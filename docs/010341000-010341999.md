# StackOverflow 问答 10341000-10341999

# python - 鼠标单击命令在某些 GUI 上不起作用

> ID：10341000
> 
> 赞同：1
> 
> 时间：2012-04-26T20:32:30.073
> 
> 标签：python, winapi, mouse-cursor

例如，当我想单击 Windows 上的“开始”按钮时，下面的脚本可以完美运行，但是当我尝试单击某个 GUI 程序中的按钮时，它没有任何效果。

该程序是否有可能禁用了虚拟鼠标点击？如果是这样，我可以以某种方式规避这个吗？

```
import win32api, win32con
Po=win32api.GetCursorPos()
win32api.mouse_event(win32con.MOUSEEVENTF_LEFTDOWN,Po[0],Po[1],0,0)
win32api.mouse_event(win32con.MOUSEEVENTF_LEFTUP,Po[0],Po[1],0,0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T19:29:15.137

程序生成的鼠标事件具有“注入”属性，应用程序可以根据需要对其进行过滤 - 例如，MMO 客户端通常会过滤这些事件以避免机器人

mouse_event 中的那些零可以让您设置一些属性，您可能想研究这些是否可以让您克服注入的标志，尽管我无法立即找到方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T03:40:57.863

mouse_event（和 SendInput，它是用于输入的首选 API）有一些棘手的问题， 在使用它之前，最好仔细[阅读 MSDN 页面的 mouse_event](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646260(v=vs.85).aspx) - 注意小字：特别是， x 和 y 值*不是*像素，因此您不能只输入从 GetCursorPos 获得的值。

恰好 0,0 是左下角，因此左下角附近的点将大致位于屏幕的同一区域，但距离越远，像素值与实际单位的差异越大这个 API 使用：所以它似乎适用于开始按钮附近的位置（假设它位于屏幕的左下角），但对于其他值，它可能似乎在点击其他地方，这听起来与你的相似看到。

来自 MSDN：

> dx [in]
> 类型：DWORD
> 鼠标沿 x 轴的绝对位置或其自上次鼠标事件生成以来的移动量，取决于 MOUSEEVENTF_ABSOLUTE 的设置。绝对数据指定为鼠标的实际 x 坐标；相对数据被指定为移动的米奇数。米奇是鼠标必须移动的量才能报告它已经移动。

所以首先，您需要 MOUTEVENTF_ABSOLUTE 标志。但这还不是全部：

> 备注
> ... 如果指定了 MOUSEEVENTF_ABSOLUTE 值，则**dx 和 dy 包含 0 到 65,535 之间的归一化绝对坐标。**事件过程将这些坐标映射到显示表面上。坐标 (0,0) 映射到显示表面的左上角，(65535,65535) 映射到右下角。

...因此在将目标坐标传递给此 API 之前，您需要适当地缩放它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-25T16:02:03.443

下面的代码对我有用

```
pyautogui.mouseDown(fromx, fromy)
time.sleep(2)
pyautogui.mouseUp(tox, toy)
pyautogui.mouseUp(1000,400) 
```

# asp.net-mvc-3 - 为什么 FancyBox 中的 PasswordFor 以纯文本形式显示我的密码？

> ID：10341001
> 
> 赞同：2
> 
> 时间：2012-04-26T20:32:33.407
> 
> 标签：asp.net-mvc-3, razor, passwords, fancybox

我认为这应该处理屏蔽我输入的密码。但是当我输入密码时，它显示为纯文本。

```
<tr>
    <td>Password:</td>
    <td>
        @Html.PasswordFor(u => u.Password)</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:26:25.173

使用这个解决方案，它会为你工作。

```
 <tr>
     <td>Password:</td>
       <td>
            @Html.Password("password", null, new { style = "float:none;margin:0;" })
       </td>
  </tr> 
```

# jsp - 在jsp中使用应用程序时计数错误

> ID：10341011
> 
> 赞同：0
> 
> 时间：2012-04-26T20:33:12.263
> 
> 标签：jsp

我尝试使用应用程序对象来记录有多少访问者查看了这个页面，但是在我刷新页面后我关闭了浏览器，当我再次打开浏览器查看这个页面时，记录又回到了我开始刷新的数量。我不知道为什么？

```
<%@ page language="java" import="java.util.*" pageEncoding="UTF-8" %>
<html>
    <body>
        <%
            Integer count;
            synchronized (application) {
                count = (Integer) application.getAttribute("count");
                if(count == null)
                    count = new Integer(0);
                count = new Integer(count.intValue() + 1);
                application.setAttribute("count", count);
            }
        %>
        This page has been visited <%= count.intValue() %> times！
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:38:47.947

为什么要同步？为什么不只使用全局变量（即 java `static`）？

您不必担心网络服务器上的线程。它应该处理那个。

服务器上的全局变量对于所有线程都是相同的。

示例在这里[http://www.tutorialspoint.com/jsp/jsp_hits_counter.htm](http://www.tutorialspoint.com/jsp/jsp_hits_counter.htm)

它说使用：

```
application.setAttribute(String Key, Object Value); 
```

然后用 ..

```
application.getAttribute(String Key); 
```

一个例子：

```
<%
    Integer hitsCount = (Integer)application.getAttribute("hitCounter");
    if( hitsCount ==null || hitsCount == 0 ){
       /* First visit */
       out.println("Welcome to my website!");
       hitsCount = 1;
    }else{
       /* return visit */
       out.println("Welcome back to my website!");
       hitsCount += 1;
    }
    application.setAttribute("hitCounter", hitsCount);
%> 
```

和

```
<p>Total number of visits: <%= hitsCount%></p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T21:03:40.107

如果您正在使用带有控制器的某种框架，您也可以`public static Integer count`在控制器端使用每次调用处理程序方法时将计数增加 1 并将计数放入该页面的模型中。

# php - 将 PHP json 编码的 UTF8 字符串转换为常规字符

> ID：10341027
> 
> 赞同：2
> 
> 时间：2012-04-26T20:34:02.790
> 
> 标签：php, json, encoding, utf-8

我在 PHP (5.3) 中有一个 UTF8_encoded 数组，但似乎无法以正常方式操作结果。

在 PHP 中回显数据时，结果会正确显示，但在测试变量时（例如使用 is_numeric）会失败。

如何转换此数组以使数据在 PHP 中正常使用？

```
getInfo($host,$port){
....
$prestore = mb_split("\xc2\xA7", utf8_encode($response));

return array( 'name' => $prestore[0],
'online_players' => $prestore[1],
'maximum_players' => $prestore[2]);
}

$data = getInfo($host,$port);
var_dump($data);

$data2 = json_encode(getInfo($host,$port));
echo $data2; 
```

数据结果的 PHP Var 转储是正确的，但字符串长度全部关闭。

```
Array(3) {
  ["name"]=>
  string(23) "MC-Outbreak"
  ["online_players"]=>
  string(5) "13"
  ["maximum_players"]=>
  string(4) "70"
} 
```

PHP json_encode 结果如下所示。

```
{"name":"\u0000M\u0000C\u0000-\u0000O\u0000u\u0000t\u0000b\u0000r\u0000e\u0000a\u0000k\u0000","online_players":"\u00001\u00003\u0000","maximum_players":"\u00007\u00000"} 
```

我花了几个小时尝试不同的东西，但现在完全卡住了！任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:36:03.113

您的文本采用 UTF-16BE 格式。首先使用 iconv 将其转换为 UTF-8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:42:43.487

```
return array( 'name' => utf8_decode($prestore[0]),
'online_players' => utf8_decode($prestore[1]),
'maximum_players' => utf8_decode($prestore[2])); 
```

试试这个

# port - 指定端口号的 scp

> ID：10341032
> 
> 赞同：984
> 
> 时间：2012-04-26T20:35:05.753
> 
> 标签：port, scp

我正在尝试将文件从远程服务器发送到我的本地计算机。只能访问端口 80。

我试过：

```
scp -p 80 username@www.myserver.com:/root/file.txt . 
```

但收到此错误：`cp: 80: No such file or directory`

如何在 scp 命令中指定端口号？

* * *

## 回答 #1

> 赞同：1726
> 
> 时间：2012-04-26T20:37:03.303

与 ssh 不同，scp 使用大写的 P 开关来设置端口，而不是小写的 p：

```
scp -P 80 ... # Use port 80 to bypass the firewall, instead of the scp default 
```

小写的 p 开关与 scp 一起使用以保存时间和模式。

以下是 scp 手册页的摘录，其中包含有关这两个开关的所有详细信息，以及为什么为 scp 选择大写 P 的解释：

> -P port 指定要连接到远程主机上的端口。请注意，此选项用大写的“P”编写，因为 -p 已保留用于在 rcp(1) 中保留文件的时间和模式。
> 
> -p 保留原始文件的修改时间、访问时间和模式。

*额外提示*：如何确定/SSH 守护进程使用的端口来接受 SSH 连接？

这个问题可以通过使用该`netstat`实用程序来回答，如下所示：

```
sudo netstat -tnlp | grep sshd 
```

或者，使用更易读的基于单词的 netstat 选项名称：

```
sudo netstat --tcp --numeric-ports --listening --program | grep sshd 
```

假设您的 ssh 守护程序配置了其侦听端口的默认值，您将看到的输出如下所示（稍微修剪列之间的空白，以使整个表可见而无需滚动）：

```
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address  Foreign Address  State       ID/Program name
tcp      0      0   0.0.0.0:22     0.0.0.0:*        LISTEN      888/sshd: /usr/sbin 
tcp6     0      0   :::22          :::*             LISTEN      888/sshd: /usr/sbin 
```

*重要的提示*

对于上述示例，使用管理员权限运行 netstat ，`sudo`以便能够查看*所有**程序名称*。如果您以普通用户身份运行 netstat（即，没有 sudo 并且假设您没有通过其他方法授予您管理员权限），您将只会看到以您的 UID 作为所有者的套接字显示的程序名称。属于其他用户的套接字的*程序名称*将不会显示（即，将被隐藏并显示占位符连字符）：

```
Proto Recv-Q Send-Q Local Address   Foreign Address  State       ID/Program name
tcp        0      0 127.0.0.1:46371 0.0.0.0:*        LISTEN      4489/code
...
tcp        0      0 0.0.0.0:111     0.0.0.0:*        LISTEN      -                   
tcp        0      0 127.0.0.53:53   0.0.0.0:*        LISTEN      -                   
tcp        0      0 0.0.0.0:22      0.0.0.0:*        LISTEN      -                   
... 
```

*更新并搁置以解决（高度赞成的）评论之一*：

关于 Abdull 关于`scp`期权顺序的评论，他的建议是：

```
scp -r some_directory -P 80 ... 
```

...，散布选项和参数，因为`-r`开关不接受额外的参数，`some_directory`并被视为命令的第一个参数，使得`-P`和所有后续命令行参数看起来像命令的附加参数（即，连字符前缀的参数不再视为开关）。

`getopt(1)`明确定义参数必须*在*选项（即开关）之后，而不是随意穿插：

> 调用 getopt 的参数可以分为两部分：修改 getopt 解析方式的选项（SYNOPSIS 中的选项和 optstring），以及要解析的参数（SYNOPSIS 中的参数）。第二部分将从第一个不是选项参数的非选项参数开始，或者在第一次出现“--”之后开始。如果在第一部分中没有找到“-o”或“--options”选项，则将第二部分的第一个参数用作短选项字符串。

由于`-r`命令行选项没有进一步的参数，`some_directory`因此是“第一个不是选项参数的非选项参数”。因此，正如手册页中明确说明的那样，`getopt(1)`它后面的所有后续命令行参数（即`-P 80 ...`）都被假定为非选项（和非选项参数）。

因此，实际上，这就是以`getopt(1)`灰色文本划分的选项结尾和参数开头呈现的示例的方式：

scp -r`some_directory -P 80 ...`

这与行为无关，`scp`与 POSIX 标准应用程序如何使用`getopt(3)`C 函数集解析命令行选项有关。

有关命令行排序和处理的更多详细信息，请阅读`getopt(1)`手册页：

```
man 1 getopt 
```

* * *

## 回答 #2

> 赞同：98
> 
> 时间：2015-10-21T09:21:49.513

一个额外的提示。将“-P”选项放在 scp 命令之后，无论您 ssh 进入的机器是否是第二台（也称为目标）。例子：

```
scp -P 2222 /absolute_path/source-folder/some-file user@example.com:/absolute_path/destination-folder 
```

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2016-04-27T00:14:37.857

你知道什么比 更酷`-P`吗？没有

如果您多次使用此服务器，请设置/创建一个`~/.ssh/config`包含以下条目的文件：

```
Host www.myserver.com
    Port 80 
```

或者

```
Host myserver myserver80 short any.name.u.want yes_anything well-within-reason
    HostName www.myserver.com
    Port 80
    User username 
```

然后你可以使用：

`scp username@www.myserver.com:/root/file.txt .`

或者

`scp short:/root/file.txt .`

您可以使用 ssh、scp、rsync、git 等“主机”行上的任何内容

您可以在配置文件中使用许多配置选项，请参阅：

`man ssh_config`

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2013-08-19T09:57:11.283

我使用不同的端口然后是标准的，并在文件之间复制文件，如下所示：

```
scp -P 1234 user@[ip address or host name]:/var/www/mywebsite/dumps/* /var/www/myNewPathOnCurrentLocalMachine 
```

这仅用于偶尔使用，如果它根据计划重复，您应该使用 rsync 和 cron 作业来完成它。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2018-10-19T14:04:33.933

要在 scp 命令上使用另一个端口，请像这样使用大写 P

```
scp -P port-number source-file/directory user@domain:/destination 
```

雅丽

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-11-14T09:53:51.967

这可以通过`-P`交换机指定端口来实现：

```
scp -i ~/keys/yourkey -P2222 file ubuntu@host:/directory/ 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-07-31T16:59:05.493

scp help 告诉我们端口是由大写的 P 指定的。

```
~$ scp
usage: scp [-12346BCpqrv] [-c cipher] [-F ssh_config] [-i identity_file]
           [-l limit] [-o ssh_option] [-P port] [-S program]
           [[user@]host1:]file1 ... [[user@]host2:]file2 
```

希望这可以帮助。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-09-12T12:18:43.683

如果您需要将本地文件复制到服务器（指定端口）

```
scp -P 3838 /the/source/file username@server.com:/destination/file 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-07-25T21:42:22.820

将文件复制到主机： `scp SourceFile remoteuser@remotehost:/directory/TargetFile`

从主机复制文件： `scp user@host:/directory/SourceFile TargetFile`

从主机递归复制目录： `scp -r user@host:/directory/SourceFolder TargetFolder`

**注意**：如果主机使用的端口不是 22 端口，您可以使用 -P 选项指定它： `scp -P 2222 user@host:/directory/SourceFile TargetFile`

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-12-30T18:50:38.380

若要使用不同的远程端口将所有目录中的所有文件备份到远程 Synology NAS：

scp -P 10022 -r /media/data/somedata/* user@192.168.1.x:/var/services/homes/user/directory/

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-01-21T12:17:45.957

***希望这会帮助寻找完美答案的人***

将文件夹或文件从定义了端口的服务器复制到另一台服务器或本地计算机

1.  转到您具有管理员权限的目录，最好是您要将文件复制到的计算机上的**主目录**
2.  写下面的命令

> scp -r -P 端口 user@IP_address:/home/file/pathDirectory 。

```
**Note:** The last . on the command directs it to copy everything in that folder to your directory of preference 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2022-02-01T13:05:58.987

可以使用 scp 协议路径指定端口：`scp://[user@]host[:port][/path]`

来自 man scp：

> 源和目标可以指定为本地路径名、具有 [user@]host:[path] 形式的可选路径的远程主机，或 scp://[user@]host[:port] 形式的 URI [/小路]。本地文件名可以使用绝对或相对路径名明确，以避免 scp 将包含 `:' 的文件名视为主机说明符。

例子：

*   `scp local/filename scp://user@acme.com:22222/path/to/filename`
*   `scp scp://userA@foo.com:22222/path/to/filename scp://userB@bar.com:33333/path/to/filename`

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-04-03T03:06:06.217

有很多答案，但你应该能够保持简单。确保您**知道**SSH 正在侦听的端口，并对其进行定义。这是我刚刚用来复制您的问题的内容。

scp -P 12222 file.7z user@193.168.XX:/home/user/Downloads 效果很好。

# iphone - NSInteger 之前的预期标识符或 '('

> ID：10341033
> 
> 赞同：0
> 
> 时间：2012-04-26T20:35:11.380
> 
> 标签：iphone, objective-c, identifier

我是 iPhone 开发和 Objective-C 的新手，如果有人问过这个问题，请原谅。我一直在处理一些代码，并且一次又一次地，这个错误不断弹出，告诉我一个预期的标识符或'（'在预期 NSInteger 之前。

```
#import "tableTutViewController.h"

@implementation tableTutViewController; 

(NSInteger)tableView:(UITableView)tableView numberOfRowsInSection:(NSInteger)section{
    return tutorials.count;
} 

- (void)viewDidLoad {
    NSString * theFile = [[NSBundle mainBundle]
                          pathForResource:@"TPL" ofType:@"plist"];
    tutorials = [[NSArray alloc] initWithContentsOfFile:theFile];
    [super viewDidLoad];
} 

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

- (void)viewDidUnload {
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
} 

- (void)dealloc {
    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T20:37:01.167

如果您的意思是此方法定义显示错误：

```
(NSInteger)tableView:(UITableView)tableView numberOfRowsInSection:(NSInteger)section
{
    return tutorials.count;
} 
```

那么原因是你`-`在第一个之前失踪了`(NSInteger)`。

所有 Objective-C 方法都需要以`-`or开头`+`，分别表示该方法是“实例方法”还是“类方法”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T20:36:47.930

看起来你只是缺少一个破折号和一颗星星。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return tutorials.count;
} 
```

# jquery-plugins - jQuery tokenInput 插件（和焦点）

> ID：10341035
> 
> 赞同：5
> 
> 时间：2012-04-26T20:35:20.053
> 
> 标签：jquery-plugins

是否有人使用 tokeninput 插件并成功地将焦点设置在令牌输入字段上？我正在努力实现[这一](https://github.com/loopj/jquery-tokeninput/issues/160)目标。

已解决：如果其他人需要，解决方案：

```
$(document).ready(function() {     
    $("#YourTokenInput").tokenInput("http://shell.loopj.com/tokeninput/tvshows.php", 
        { theme: "facebook" 
    }).focus(); 
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T01:18:48.980

OP的解决方案对我不起作用。不确定这是浏览器问题，还是元素及时加载的问题，或者是什么，但这是我必须做的（在初始化令牌输入之后：

```
setTimeout(function() { $('#token-input-search-input').focus(); }, 50); 
```

注意：（在 Chrome 中测试）

# sql - Sybase 多次更新

> ID：10341036
> 
> 赞同：1
> 
> 时间：2012-04-26T20:35:21.910
> 
> 标签：sql, sybase, sql-update

我想将值添加到我添加到表中的新列。我需要更新大约 80 行，并在这里找到了一个使用与我尝试类似的格式的答案：

```
Update table_name
set column_name = 'G'
where item_id in (6,7,12,15,16,17,22,24,134,166...etc) 
```

column_name 是 CHAR(10) 并且 item_id 是一个 INT

我收到一个错误：

```
`Subquery returned more than 1 value.  This is illegal when the subquery follows =, !=, <, <= , >, >=, or when the subquery is used as an expression.' 
```

我尝试只使用一组 3 个值并得到相同的错误。我对它太陌生了，不知道为什么这不起作用。

它确实一次可以工作，但我宁愿不这样做:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:23:08.933

自从

```
Update table_name
set column_name = 'G'
where item_id in (6,7,12,15,16,17,22,24,134,166...etc) 
```

是您的查询，我可以说您有一个触发器，只要您对 table_name 进行更新，就会运行该触发器。

您的查询不会给出您所说的错误，因此触发器内的查询一定是问题所在！

# vim - 可以在 vimscript 中访问 NERDTree 缓冲区吗？

> ID：10341041
> 
> 赞同：3
> 
> 时间：2012-04-26T20:35:27.120
> 
> 标签：vim, nerdtree

我正在为我在[这里](https://stackoverflow.com/questions/6455171/is-there-a-nerdtree-or-other-project-plugin-for-vim-that-integrates-with-git-to "这里")询问的 NERDTree 开发一个插件。

我有一个在[Github](https://github.com/swerner/git_nerd "github")上运行的概念证明插件和一个到 NERDTree 的[拉取请求](https://github.com/scrooloose/nerdtree/pull/157)，其中包含我需要编辑显示字符串的钩子。

下一件我想做的事是在保存文件时刷新 NERDTree 缓冲区。我在想 NERDTree api 函数“NERDTreeRender()”将是我所需要的——比如：

```
autocmd BufWrite * call NERDTreeRender() 
```

会起作用，但它在写入的缓冲区上调用了 NERDTreeRender()，而不是 NERDTree。有没有办法让自动命令在 bufwrite 上运行到该特定缓冲区？不幸的是，在 vim 中运行 :buffers 并没有给我任何 NERDTree 有编号缓冲区的迹象。

除非在写入该特定缓冲区时触发 autocmd，否则是否有人有任何其他建议的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T08:12:56.213

您可以通过设置并调用`switchbuf`来切换到 NERDTree 缓冲区`useopen``sbuf NERD*`

就像是：

```
autocmd BufWrite * call DoRender()

function! DoRender()
    set switchbuf+=useopen
    sbuf NERD*
    call NERDTreeRender()
endfunction 
```

# css - Chrome 中锚点上的指针状态偶尔失败

> ID：10341043
> 
> 赞同：2
> 
> 时间：2012-04-26T20:35:35.700
> 
> 标签：css, google-chrome, cursor, hover

## 关闭的决定：

我决定结束这个问题，因为它表示当前在最新版本的 Google Chrome 中无法观察到的行为，并且不再是需要缓解的问题。

* * *

## 问题：

很长一段时间以来，我一直注意到当鼠标悬停在 Chrome 中的锚元素上时，光标将保持在默认（箭头）状态，而不是切换到指针（手）状态。在 Safari 中查看网站时，我没有观察到这种行为，所以我不确定这是一个 webkit 问题。

* * *

## 问题：

这是什么原因造成的？有哪些解决方法？

* * *

## 证据：

我发现这种行为会发生......

*   页面加载后频率降低。
*   在页面仍在加载时更频繁。
*   更常见的是，如果不是唯一的，当`a`元素具有`display`属性声明时。
*   无论`cursor: pointer`声明的属性如何（尽管我可能是错的）。

在 Chrome 中查看时，请注意此示例中的鼠标行为：

*   本站主导航： http: [//css-tricks.com/](http://css-tricks.com/)

**怀疑：** Chrome 有一个问题处理`a`元素，其`display`属性声明的值与 default 不同`inline`。我还怀疑使用与默认值不同的值`position`在元素上声明属性可能会导致问题。`a``static`

**可能相关：**

*   [Chrome 悬停自定义光标](https://stackoverflow.com/questions/8094221/chrome-hover-custom-cursor/)
*   [Chrome 中的错误或糟糕的 CSS？（隐藏可见性的锚点）](https://stackoverflow.com/questions/7543696/bug-in-chrome-or-bad-css-anchor-with-visibility-hidden)
*   [http://code.google.com/p/chromium/issues/detail?id=93240](http://code.google.com/p/chromium/issues/detail?id=93240)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:13:06.403

当您的 chrome 开发工具打开时是否发生了这种情况？

如果是这样，也许您应该在开发工具的覆盖设置中禁用“模拟触摸事件”。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T13:45:10.223

我以前也遇到过这种情况，我意识到给元素放置一个位置可以解决它。例如：

```
header a.logo{
    position: absolute;
    float: left;
    height: 28px;
    width: 28px;
    margin-top: 15px;
    text-indent: -9999em;
    display: block;
} 
```

希望这可以帮助。

# unix - ldd 在 LD_LIBRARY_PATH 中找不到库

> ID：10341044
> 
> 赞同：17
> 
> 时间：2012-04-26T20:35:49.643
> 
> 标签：unix, shared-libraries, ldd

我正在尝试启动并运行系统，但 OpenMotif 共享库有问题。我在 LD_LIBRARY_PATH 中有他们的目录，但仍然找不到它们。

这是一个例子：

```
[root@intrepid netcool]# ldd /opt/netcool/omnibus/platform/linux2x86/bin/nco_* |grep 'not found'
    libXm.so.3 => not found
    libXpm.so.4 => not found
    libXm.so.3 => not found
    libXm.so.3 => not found
    libXpm.so.4 => not found
    libXm.so.3 => not found
    libXm.so.3 => not found
    libXm.so.3 => not found
    libXm.so.3 => not found
[root@intrepid netcool]# find /usr/ -name libXm.so.3 
/usr/lib64/libXm.so.3
[root@intrepid netcool]# find /usr/ -name libXpm.so.4
/usr/lib64/libXpm.so.4
[root@intrepid netcool]# echo $LD_LIBRARY_PATH
/opt/netcool/omnibus//platform/linux2x86/lib/:/opt/netcool//platform/linux2x86/lib/:/usr/lib/:/usr/lib64/ 
```

我可能在做一些愚蠢的事情，但我想不出还有什么可以尝试的。

编辑：回答下面提出的几个问题：

```
[root@intrepid netcool]# export LD_LIBRARY_PATH
[root@intrepid netcool]# ldd /opt/netcool/omnibus/platform/linux2x86/bin/nco_* |grep 'not found'
    libXm.so.3 => not found
    libXpm.so.4 => not found
    libXm.so.3 => not found
    libXm.so.3 => not found
    libXpm.so.4 => not found
    libXm.so.3 => not found
    libXm.so.3 => not found
    libXm.so.3 => not found
    libXm.so.3 => not found
[root@intrepid netcool]# ldconfig
[root@intrepid netcool]# ldd /opt/netcool/omnibus/platform/linux2x86/bin/nco_* |grep 'not found'
    libXm.so.3 => not found
    libXpm.so.4 => not found
    libXm.so.3 => not found
    libXm.so.3 => not found
    libXpm.so.4 => not found
    libXm.so.3 => not found
    libXm.so.3 => not found
    libXm.so.3 => not found
    libXm.so.3 => not found 
```

好的，只是尝试运行其中一个可执行文件：

```
# ./bin/nco_xigen 
/opt/netcool//omnibus/platform/linux2x86/bin/nco_xigen: error while loading shared libraries: libXm.so.3: wrong ELF class: ELFCLASS64 
```

这是 32 位/64 位的东西吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-26T20:38:33.143

您是否导出了 LD_LIBRARY_PATH？该`export`关键字告诉 Bash 将任何变量发送到子进程 - 否则 ldd 将永远不会看到 LD_LIBRARY_PATH。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-26T21:43:43.263

The binaries I had were looking for the 32-bit versions of the shared libraries, I had the 64-bit installed. Stupid mistake. LDD didn't produce a very insightful error message, but the binary did when I tried to run it.

# ios5 - iOS 5.x - 检测视图何时出现在屏幕上

> ID：10341051
> 
> 赞同：0
> 
> 时间：2012-04-26T20:36:03.090
> 
> 标签：ios5, detect

如何检测应用程序运行时某个视图何时出现？例如，在标签栏应用程序中，假设我们有 2 个“结果”和“编辑”栏 - 应用程序加载结果但没有任何内容。现在，用户去编辑并制作一些魔法。然后，他再次按下结果栏，他将看到结果。换句话说，当按下结果栏时，我需要将信息从“编辑”视图控制器传递到“结果”视图控制器。我希望我说清楚了。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:39:15.453

有几种方法可以解决这个问题。

1）您可以从“编辑”视图控制器中保留“结果”视图控制器的句柄（或指针或属性），并且当您想将数据发送到“结果”时，这很容易做到（通过方法或委托协议）。

2）您可以为通知注册“结果”视图控制器，然后当您想用任何新数据更新它时，在适当的通知到来时填充您的字段。然后在您的“编辑”视图控制器中，发布通知封装您要显示的结果的字典和/或对象。

还有更多！

# ruby-on-rails - Rails 有很多直通关系

> ID：10341056
> 
> 赞同：0
> 
> 时间：2012-04-26T20:36:41.677
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我通过选项使用 rails has_many 并且不确定我是否在这里做错了什么。我希望玩家创建一个赛季，当一个玩家即将创建一个赛季时，它将显示我在年/新创建的所有赛季的选择菜单。到目前为止，这部分工作得很好，但是当玩家试图拯救赛季轨道时并没有拯救它。我不确定我的关联是正确的还是我做错了什么？有什么理由不工作吗？

错误

```
No association found for name `season_year'. Has it been defined yet? 
```

季节.rb

```
class season < ActiveRecord::Base
 belongs_to :player

 has_many :quarters
 has_many :years , :through => :quarters

 attr_accessible :season_year_attributes
 accepts_nested_attributes_for :season_year 
end 
```

四分之一.rb

```
class Quarter < ActiveRecord::Base
  belongs_to :player
  belongs_to :year
  belongs_to :season
end 
```

年.rb

```
class Year < ActiveRecord::Base
  attr_accessible :season_year, :season_name

  has_many :quarters
  has_many :seasons, :through => :quarters 
end 
```

播放器.rb

```
class player < ActiveRecord::Base
  has_many :seasons, :through => :quarters
  has_many :years, :through => :quarters
end 
```

_season-form.html.erb

```
<%= form_for(@season) do |f| %>
  <div class="field">
    <%= f.label :season %>
    <%= f.text_field :season_name %>
  </div>

<%= f.fields_for :years do |year| %>
<%= select("season", "year_ids", Year.all.collect {|p| [ p.season_year, p.id ] }, { :include_blank => true }) %>
<% end %>

<div class="actions">
  <%= f.submit %>
</div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:54:55.820

根据你的模型，我相信你需要改变这个：

```
accepts_nested_attributes_for :season_year 
```

对此：

```
accepts_nested_attributes_for :years 
```

当您接受嵌套属性时，它适用于模型而不是模型的属性（season_year 是年份模型的属性，而接受实际模型的嵌套属性 Year）。

编辑：

在 Season 模型中，我将 year_ids 添加到 attr_accessible 表达式中：

```
attr_accessible :season_year_attributes, :year_ids 
```

我还修改了季节表格，使得多年来选择列表的输出*只有*这样：

```
<%= select("season", "year_ids", Year.all.collect {|p| [ p.title, p.id ] }, { :include_blank => true }) %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T20:50:17.850

您的 Season 课程中没有任何 season_year，这就是答案。

你打算把它作为一个协会吗？

# android - achartengine 在视图中切换图表类型

> ID：10341057
> 
> 赞同：0
> 
> 时间：2012-04-26T20:36:41.953
> 
> 标签：android, achartengine

我正在 ViewPager 中实现 achartengine。保存图表的视图有一个带有 7 个选项的微调器，您可以在其中选择要查看的数据。其中 6 个选项返回 PieChartView，最后一个选项返回 TimeChartView。

piechartView图表按预期更新和重绘，但选择TimeChartView选项时，没有任何反应。该视图与先前选择的 PieChartView 保持一致，并且不会引发错误。我已经在应用程序的其他地方成功实现了 TimeChartView，并且比较代码和提供图表的数据没有引发任何标志，所以我只能假设我切换图表类型的方法不正确。

下面的代码摘录是处理切换视图的部分；任何意见，将不胜感激。

```
try{
        //if mChartView is already created (has data)
        //we need to invalidate it because it will only accept
        //data less than or equal to the length of data it currently has
        if(mChartView != null){
            mChartView.invalidate();
        }
        if(graphType >= 6){
            mChartView = ChartFactory.getTimeChartView(ctx, mDataset, genericXYRenderer, "MM/dd");
            genericXYRenderer.setClickEnabled(false);
        }else{
            mChartView = ChartFactory.getPieChartView(ctx, genericSeries, genericRenderer);
      genericRenderer.setClickEnabled(false);
      genericRenderer.setSelectableBuffer(10);
        }

      layout.addView(mChartView, new LayoutParams(
                LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
     mChartView.repaint();
    } catch (Exception e) {
        Log.e("[appname]", "Error trying to set ChartView", e);
        m_Logger = new Logger();
    m_Logger.error(e);
} 
```

非常感谢，戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T20:13:51.890

行。因此 PieCharts 正在更新，因为 mChart 视图包含对 PieChartView 的引用，并且微调器选项为其提供了相同格式的数组数据（尽管大小不同）。

打电话

```
mChartView.invalidate(); 
```

（我猜）刚刚清除了它持有的数据，但仍然保留了对 PieChartView 的引用。选择TimeChartView选项时，阵列数据以不同的格式与PieChartView不兼容。不知道为什么它没有抛出错误。

无论如何，解决方案是将 .invalidate() 调用替换为：

```
layout.removeView(mChartView); 
```

# c# - 如何使用 C# 参数化 DB2 ODBC 查询？

> ID：10341071
> 
> 赞同：1
> 
> 时间：2012-04-26T20:37:36.217
> 
> 标签：c#, odbc, db2

我在尝试参数化 ASP 应用程序使用的现有 C# 类中的一些“动态”SQL 构建时遇到问题。环境是：

*   赢服务器 2008
*   .NET 3.0
*   C＃
*   DB2 9.x（[IBM][CLI 驱动程序][DB2]）

现有代码只是将 SQL 与长 SQL 字符串中的参数字符串连接起来——这当然存在 SQL 注入的风险。每当我看到这一点时，我的做法就是，我倾向于更改代码以使用参数。但是使用此代码我失败了。我试过“@”，也试过“？” - 后者是我理解的 ODBC 所必需的。

这是我编译并运行的简化代码片段（如果我的格式不正确，请原谅我 - 这是我的第一个问题）：

```
private DataSet test(String schemaName )
{
        String sortField = "TABLE_NAME.COLUMN_NAME";
        String sortDirection = "ASC";
        OdbcConnection conn = new OdbcConnection();
        DataSet ds = new DataSet();

        string connStr = ConfigurationManager.AppSettings[schemaName] + dbUser;
        try
        {
            conn.ConnectionString = connStr;
            OdbcCommand cmd = new OdbcCommand("SELECT * FROM TABLE_NAME ORDER BY ? ? ");
            cmd.Connection = conn;
            cmd.CommandType = CommandType.Text;
            cmd.Parameters.Add(sortField);
            cmd.Parameters.Add(sortDirection);                              
            logger.log("cmd SQL = \t" + cmd.CommandText );

            OdbcDataAdapter da = new OdbcDataAdapter(cmd);
            da.Fill(ds);

            return ds;
        }
        catch (Exception ex)
        {
            ex.Data.Add("Location:", "test()");
            ex.Data.Add("Connection", conn.ConnectionString);
            logger.logException(ex);
            throw ex;
        }
        finally
        {
            conn.Close();
        }
    } 
```

日志打印输出：

cmd SQL = SELECT * FROM TABLE_NAME ORDER BY ? ?

其中 TABLE_NAME 当然是我要查询的表。

我得到的回报是（删除了一些专有信息：

> 异常发生在 2012 年 4 月 26 日下午 12:29:41 错误 [42601] [IBM][CLI 驱动程序][DB2] SQL0104N 意外标记“？” 在“”之后发现。预期的令牌可能包括：“MICROSECONDS MICROSECOND SECONDS SECOND MINUTES MINUTE HOURS”。SQLSTATE=42601 at System.Data.Odbc.OdbcConnection.HandleError(OdbcHandle hrHandle, RetCode retcode)Connection Driver={IBM DB2 ODBC DRIVER}; ......

不允许将此更改为存储过程。

不允许升级到更高版本的 .NET。

不允许更改/升级 ODBC 驱动程序。

我所看到的向我表明“？” 参数没有被替换。

我已经尝试过 AddWithValue() 并且我已经尝试过 Add(OdbcType.VarChar).Value = sortField （或类似的东西）。

我有点走投无路了——所有的谷歌搜索和搜索都向我表明上面的代码应该可以工作，但到目前为止，我还无法将 SQL 中的参数替换为变量。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:46:42.150

这`?`是一个意外标记的原因是因为您在`ORDER BY`子句中使用它（我认为这是不允许的）。

使用参数的原因是为了减轻用户输入的风险。在构建查询时，如果`ORDER BY`字段和方向不是通过用户输入来的，那么您可以安全地通过连接构建查询。

仅`?`在`WHERE`子句中使用：

```
OdbcCommand cmd = new OdbcCommand("SELECT * FROM TABLE_NAME WHERE ID = ? ORDER BY " + sortField + " " + sortDirection); 
```

# ruby - 如何通过 Thin/nginx 访问事件机 websocket？

> ID：10341072
> 
> 赞同：4
> 
> 时间：2012-04-26T20:37:46.587
> 
> 标签：ruby, nginx, websocket, eventmachine, thin

我有一个事件机器 websocket 应用程序（使用[em-websocket](https://github.com/igrigorik/em-websocket) gem），它运行良好。问题是我需要通过 nginx 使用端口 80 部署它（不能用 tcp 代理模块编译它）。是否可以使用指向瘦服务器的简单 nginx proxy_pass 并让瘦服务器将请求传递给我的 websocket 服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T21:30:02.563

据我了解，您无法使用 proxy_pass 代理 websocket 流量。

> 由于 web 套接字是通过 HTTP 1.1 连接完成的（握手和升级完成），你的后端需要支持 HTTP 1.1，根据我的研究，它们打破了 HTTP 1.0 规范......

我见过一些人尝试用 socket.io 和 HAProxy 做同样的事情（见链接）。我猜你可以尝试用 em-websockets 换掉 socket.io 并期待类似的结果。

1： http: [//www.letseehere.com/reverse-proxy-web-sockets](http://www.letseehere.com/reverse-proxy-web-sockets)

2：[HAProxy+WebSocket断线](https://stackoverflow.com/questions/4360221/haproxy-websocket-disconnection/4737648#4737648)

# php - 动态生成的文本字段不显示 javascript 设置的值

> ID：10341075
> 
> 赞同：0
> 
> 时间：2012-04-26T20:37:58.940
> 
> 标签：php, javascript, jquery

我有一个动态生成的文本字段（使用以下代码）：

```
echo "<div><table width='100%'><tr>
         <td>
             Date: <input type='text' class='span2' id='currDate'>
         </td><td rowspan='2'></td></tr></table>"; 
```

一旦用户按下按钮，就会生成此字段，此按钮链接到 javascript：

```
$('#receipts button').live('click', function(){
        var id = this.id;
        $.ajax({
            type: "post", url: "receipt-stock.php", data: "production_detail_id="+id,
            success: function(data) {
                $('.modal-body').html(data);
                $('#new_receipt').modal('show');
                var myDate = new Date();
                var prettyDate = myDate.getDate()+'-' +(myDate.getMonth()+1)+'-'+myDate.getFullYear();
                $("#currDate").val(prettyDate);
                $('#currDate').datepicker({ dateFormat: 'dd-mm-yy' });
            }
        });
    }); 
```

从 javascript 中可以看出，我正在显示一个模式，其中包含上面代码中的文本字段。一切正常，除了我将值设置为`#currDate`当前日期的部分，文本字段不显示任何内容，它在焦点时显示日期选择器。

**然而，在使用警报时，我发现文本字段具有我想要的值，它只是不显示它。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:29:49.610

我认为问题是在你这样做之后`.modal()`，你有两个带有 id 的元素`#currDate`，这不是有效的 HTML。没有看到整个页面，很难确定，但我实际上已经看到了很多这个问题。jQuery 将找到第一个 ID，这就是设置您的值的元素。

如果不查看其余代码，很难说确切的修复。您可以在调用之前尝试设置 currDate 元素的值`.modal()`。如果有办法将 currDate 更改为类或唯一 ID，那可能会有所帮助。或者，您也许可以将您拥有的代码更改为`$('#new_reciept #currDate').val(prettyDate);`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:58:44.603

正如之前的海报所说，正是`.datepicker()`电话使日期空白。您可以添加一个参数，该参数`defaultDate: new Date()`应该允许您删除上面的代码并给出您想要的结果。

此外，您的输入元素永远不会关闭 `<input type='text' class='span2' id='currDate' >`应该是`<input type='text' class='span2' id='currDate' />`

# sql-server - 授予用户查看单个数据库？（拒绝查看其余部分）

> ID：10341077
> 
> 赞同：11
> 
> 时间：2012-04-26T20:38:00.413
> 
> 标签：sql-server, sql-server-2008

我希望用户登录到 SQL 服务器并且只看到一个数据库。此用户不能是数据库所有者。我试过拒绝查看任何数据库到 [用户名]，我现在想授予查看单个数据库到 [用户名] 这可能吗？我该怎么做呢？谢谢你。

编辑：澄清我的意思，我不希望用户甚至看到其他数据库存在，而不仅仅是他们不能进入数据库。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-26T21:43:23.923

我假设您在这里谈论的是 SQL Server Management Studio。简而言之，如果您无法将 DBO 授予用户（这是完全可以理解的），那么目前没有一种方法可以实现您想要的。

通过发行，您已经尽可能接近

```
DENY VIEW ANY DATABASE TO <customerlogin> 
```

有效地向用户隐藏所有数据库。如果不使用户成为 DBO，则无法将查看功能仅打开到一个。这不是 Mike Hotek 著名的 SQL 专家所添加的功能。

您可以在此 MSDN 线程上看到有关此愿望的更长更详细的讨论。

[http://social.msdn.microsoft.com/Forums/en/sqlsecurity/thread/a989ca87-660d-41c4-9dac-70b29a83ddfb](http://social.msdn.microsoft.com/Forums/en/sqlsecurity/thread/a989ca87-660d-41c4-9dac-70b29a83ddfb)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-13T12:23:55.880

拒绝特定用户查看任何数据库后：

```
DENY VIEW ANY DATABASE TO <customerlogin> 
```

如果将此用户设为特定数据库的 db_owner：

```
USE <customdatabase>
exec SP_changedbowner <customerlogin> 
```

它将只能查看和使用所选数据库。

更多详细信息： [https ://www.mssqltips.com/sqlservertip/2995/how-to-hide-sql-server-user-databases-in-sql-server-management-studio/](https://www.mssqltips.com/sqlservertip/2995/how-to-hide-sql-server-user-databases-in-sql-server-management-studio/)

# c# - Windows 性能计数器从 PerfMon 中消失

> ID：10341079
> 
> 赞同：2
> 
> 时间：2012-04-26T20:38:03.597
> 
> 标签：c#, .net, windows, performancecounter

我对此完全感到困惑（TM）：在 Win7SP1、64 位机器上，`PerfMon`似乎完全否认安装的自定义性能计数器的知识。我正在使用现有的代码库，该代码库在生产机器上安装计数器非常好，但是当我在我的机器上运行它时，当我使用我添加的计数器运行它时，或者如果我运行一个完全人为的程序集（其中的肉贴在下面），我的行为很奇怪。

使用以下代码段可能最容易描述：

```
var category = "SuperTest";
var counterName = "Test Counter 1";
var shouldInstall = true;

if (PerformanceCounterCategory.Exists(category))
{
    shouldInstall = false;
    Console.WriteLine("{0} Category Exists. Overwrite? [n]", category);
    var input = Console.ReadLine();
    if (bool.TryParse(input, out shouldInstall))
    {
        PerformanceCounterCategory.Delete(category);
    }
}
if (shouldInstall)
{
    var col = new CounterCreationDataCollection();
    col.Add(new CounterCreationData()
    {
        CounterName = counterName,
        CounterType = PerformanceCounterType.NumberOfItems64
    });

    PerformanceCounterCategory.Create(category, "Test category.", PerformanceCounterCategoryType.SingleInstance, col);
    // Magical voodoo line that may indicate my inexperience, but whose inclusion or
    // exclusion does not affect discernibly affect behavior.
    PerformanceCounter.CloseSharedResources();
}

// Multithreading setup, each thread repeats block below infinitely:
{
    System.Threading.Thread.Sleep((new Random()).Next(100));
    try
    {
        var counter = new PerformanceCounter(category, counterName, false));
        c.Increment();
    }
    catch (Exception ex) { /* ... */ }
} 
```

第一次运行时，类别不存在，它继续创建类别和计数器。我杀死了这个过程，然后打开`PerfMon`. 在这一点上，我可以`Add Counter`看到类别和计数器，添加它非常好，然后看着它坐在`0.000`。完美的。此时，如果我关闭`PerfMon`并重新打开它？我可以很好地看到所有系统性能计数器，但我所有的自定义计数器——如前所述，在生产中工作的计数器，我基于这些计数器创建的计数器，*以及*人为的计数器——都消失了。

有趣的是，如果我运行上面的代码，它会一直告诉我该组存在。潜得更深，计数器甚至存在。这对我来说似乎很奇怪。让它仍然处于消失状态，并从[这里](https://stackoverflow.com/questions/582415/missing-processor-memory-counters-in-the-windows-xp-performance-monitor-applicat)获取提示，我可以运行：`lodctr /R`，它们*确实*回来了。

所以看起来我以某种方式破坏了我自己的性能计数器商店。我的问题有两个部分：

1.  这是我在做什么（破坏性能计数器存储）？
2.  既然它是可重现的，那么在代码或我的过程中是否有任何突出的东西可以创建这种行为？

在我看来，这与其他“性能计数器消失”的问题有些不同，因为它们确实存在，而且我正在看着它们消失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:06:26.997

问题很可能出在计算机和/或其配置中，而不是您发布的代码中。我也遇到过同样的情况，没有遇到打开性能监视器时计数器消失的原因。但是，我可以帮助您：

*   Perfmon 有时会通过在注册表中将其标记为禁用来[禁用性能计数器](http://support.microsoft.com/kb/248993 "禁用性能计数器")。该链接可能会帮助您找到计数器被禁用的原因。

*   也可以使用工具[typeperf](http://technet.microsoft.com/en-us/library/bb490960.aspx "打字机")来监控计数器。根据我的经验，typeperf 并没有禁用 perfmon 会禁用的相同计数器，从而为您提供了监视计数器的替代方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-24T08:14:32.527

确保您没有混合 x86 和 x64。

即，如果您的性能计数器是使用 x64 进程创建的，那么请确保您也在使用 x64 进程读取它们。

此外，尝试以管理员身份运行。

# sql-server - 需要通过临时表中的 ID 更新存储过程中的行

> ID：10341080
> 
> 赞同：0
> 
> 时间：2012-04-26T20:38:05.500
> 
> 标签：sql-server, tsql, stored-procedures

我试图在描述中断的表中获取行，并通过计算的时间范围将它们分解为单独的行，以插入到另一个表中以描述每个给定范围内的逐小时时间段。

下面的代码为我们提供了以下输出：

我们从这一行开始（原始数据）：

```
OutageDate        StartTime                 EndTime             Duration
2010-11-10  16:00:00.0000000    17:30:00.0000000    90 
```

在我运行存储过程之后（这是期望的输出！我只需要知道如何将它保存到表中）：

```
OutageDate   StartHour StartMinutes  EndHour EndMinutes    StartTime        EndTime       Duration
2010-11-10  16   0       17       0        16:00:00.0000000     17:30:00.0000000    90
2010-11-10  17  30       18       0        16:00:00.0000000     17:30:00.0000000    90 
```

以下是我需要弄清楚如何将我的行拆分为我想要的时间值后保存到表中的代码。我无法控制为什么会发生这种情况，它只需要根据比我更高的人的请求并由他们以这种格式指定：

```
--First, let's look at the original data in the table...just one row will do

SELECT TOP (1) *
  FROM actualTable
  ORDER BY OutageDate ASC

--Begin sproc logic
declare @OutageDate date
declare @StartTime time(7)
declare @EndTime time(7)
declare @StartHour bigint
declare @EndHour int
declare @StartMinute int
declare @EndMinute int
declare @Duration int

declare @Temp_StartTime time
declare @Temp_EndTime time
declare @temp_StartHour int
declare @temp_EndHour int
declare @temp_StartMinute int
declare @temp_EndMinute int

SELECT TOP(1) @OutageDate = OutageDate, @StartTime = StartTime, @EndTime = EndTime, @Duration = Duration FROM actualTable

SET @Temp_StartTime=@StartTime
SET @Temp_EndTime=@EndTime
SET @temp_StartHour=DATEPART(HOUR, @StartTime)
SET @temp_EndHour=DATEPART(HOUR, @EndTime)
SET @temp_StartMinute=DATEPART(MI, @StartTime)
SET @temp_EndMinute=DATEPART(MI, @EndTime)

PRINT @temp_StartHour
PRINT @temp_EndHour
PRINT @temp_StartMinute
PRINT @StartTime
PRINT @EndTime

if(@temp_EndMinute>0)
    BEGIN
        SET @temp_EndHour=@temp_EndHour+1
    END

--this declares the temp table 

DECLARE @Temp_Table TABLE
(
OutageDate date,
StartHour int,
StartMinute int,
EndHour int,
EndMinute int,
StartTime time,
EndTime time,
Duration int
)

--Here's the loop that inserts the rows

While((@temp_EndHour-@temp_StartHour>1))
    BEGIN
       INSERT INTO @Temp_Table
       SELECT 
            @OutageDate AS OutageDate,  
           (DATEPART(HOUR, @Temp_StartTime)) AS StartHour,
           (DATEPART(MINUTE, @Temp_StartTime)) AS StartMinute, 
            @temp_StartHour+1 AS EndHour, 
            0 AS EndMinute,
            @StartTime as StartTime, 
            @EndTime as EndTime,
           @Duration AS Duration

--DATEADD returns a specified date with the specified number interval (signed integer) added to a specified datepart of that date.

        SET @temp_StartHour=@temp_StartHour+1
        SET @Temp_StartTime=DATEADD(HOUR,1,@Temp_StartTime)

--Let's make sure we account for the minutes in the first and last hours if any

        if(DATEPART(MI, @Temp_StartTime)!=0)
            BEGIN
                SET @Temp_StartTime=DATEADD(MI,-@Temp_StartMinute,@Temp_StartTime)
            END
    END

--Ok, if we're at the last row insertion, we still need the minutes the outage finished at...those go into StartMinutes

    WHile((@temp_EndHour-@temp_StartHour=1))
    BEGIN
       INSERT INTO @Temp_Table
       SELECT 
       @OutageDate AS OutageDate, 
       (DATEPART(HOUR, @Temp_StartTime)) AS StartHour, 
       @temp_EndMinute AS StartMinute, 
       @temp_StartHour+1 AS EndHour, 
      0 AS EndMinute, 
      @StartTime as StartTime, 
       @EndTime as EndTime,
       @Duration AS Duration

--DATEADD returns a specified date with the specified number interval (signed integer) added to a specified datepart of that date.

        SET @temp_StartHour=@temp_StartHour+1
        SET @Temp_StartTime=DATEADD(HOUR,1,@Temp_StartTime)

--Let's make sure we account for the minutes in the first and last hours if any

        if(DATEPART(MI, @Temp_StartTime)!=0)
            BEGIN
                SET @Temp_StartTime=DATEADD(MI,-@temp_StartMinute,@Temp_StartTime)
            END
    END

--Need to add logic that drops and recreates the table from the temp table so we don't have to employ a cursor

SELECT * FROM @Temp_Table

BEGIN
SELECT * INTO newTable FROM @Temp_Table
END 
```

如果您在 SMS 中直接运行，您将获得最基本的逻辑：

```
declare @StartTime time
declare @EndTime time
declare @Temp_StartTime time

declare @temp_StartHour int
declare @temp_EndHour int
declare @temp_StartMinute int
declare @temp_EndMinute int

SET @StartTime='2:30:00'
SET @EndTime='4:01:00'
SET @Temp_StartTime=@StartTime

SET @temp_StartHour=DATEPART(HOUR, @StartTime)
SET @temp_EndHour=DATEPART(HOUR, @EndTime)
SET @temp_StartMinute=DATEPART(MI, @StartTime)
SET @temp_EndMinute=DATEPART(MI, @EndTime)

if(@temp_EndMinute>0)
    BEGIN
        SET @temp_EndHour=@temp_EndHour+1
    END

DECLARE @Temp_Table TABLE
(
  StartHour int,
  StartMinute int,
  EndHour int,
  EndMinute int,
  StartTime time,
  EndTime time
)

WHile((@temp_EndHour-@temp_StartHour>=1))
    BEGIN
        INSERT INTO @Temp_Table
        SELECT (DATEPART(HOUR, @Temp_StartTime)) AS StartHour,(DATEPART(MINUTE, @Temp_StartTime)) AS StartMinute,
        @temp_StartHour+1 AS EndHour, 
        0 AS EndMinute, @StartTime as StartTime, @EndTime as EndTime

        SET @temp_StartHour=@temp_StartHour+1
        SET @Temp_StartTime=DATEADD(HOUR,1,@Temp_StartTime)

        if(DATEPART(MI, @Temp_StartTime)!=0)
            BEGIN
                SET @Temp_StartTime=DATEADD(MI,-@temp_StartMinute,@Temp_StartTime)
            END
    END

SELECT * FROM @Temp_Table 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T23:47:01.480

首先，一些设置：

```
USE tempdb;
GO

CREATE TABLE dbo.Outages
(
    OutageDate DATE,
    StartTime TIME(7),
    EndTime TIME(7),
    Duration INT
);

INSERT dbo.Outages SELECT '20101110', '16:00', '17:30', 90;
/*
-- I also tested these cases, and *think* it still produces what you expect:
INSERT dbo.Outages SELECT '20101111', '13:00', '14:02', 62;
INSERT dbo.Outages SELECT '20101112', '17:00', '18:00', 60;
INSERT dbo.Outages SELECT '20101113', '16:05', '16:25', 20;
INSERT dbo.Outages SELECT '20101114', '16:59', '18:01', 62;
INSERT dbo.Outages SELECT '20101115', '22:15', '01:30', 165;
*/ 
```

现在，查询：

```
;WITH n(n) AS 
(
  SELECT TOP 24 ROW_NUMBER() OVER (ORDER BY [object_id])
  FROM sys.objects
),
x AS
(
  SELECT 
    o.OutageDate, StartHour = (DATEPART(HOUR, StartTime) + n.n - 1) % 24,
    StartTime, EndTime, Duration,
    rn = ROW_NUMBER() OVER (PARTITION BY o.OutageDate, o.StartTime ORDER BY n.n)
  FROM n INNER JOIN dbo.Outages AS o
  ON n.n <= CEILING(DATEDIFF(MINUTE, CONVERT(DATETIME, StartTime), 
    DATEADD(DAY, CASE WHEN EndTime < StartTime THEN 1 ELSE 0 END, 
    CONVERT(DATETIME, EndTime)))/60.0)
 ),
 mx AS (SELECT OutageDate, StartTime, minrn = MIN(rn), maxrn = MAX(rn) 
   FROM x GROUP BY OutageDate, StartTime)

 -- insert into some other table
 SELECT 
    x.OutageDate, 
    x.StartHour, 
    StartMinutes = CASE 
      WHEN x.rn = mx.minrn THEN DATEPART(MINUTE, x.StartTime) ELSE 0 END,
    EndHour = x.StartHour + 1, 
    EndMinutes = CASE
      WHEN x.rn = mx.maxrn THEN DATEPART(MINUTE, x.EndTime) ELSE 0 END,
    x.StartTime, 
    x.EndTime,
    x.Duration
 FROM x INNER JOIN mx 
 ON x.OutageDate = mx.OutageDate
 AND x.StartTime = mx.StartTime
 ORDER BY x.OutageDate, x.rn;
GO 
```

当您很高兴它为您提供各种场景的正确行时，请替换

```
-- insert into some other table 
```

使用实际插入，例如

```
INSERT dbo.OtherTable(col1, col2, ...) 
```

如果您尝试从此输出创建一个全新的表，请替换

```
FROM x INNER JOIN mx 
```

带有 INTO 子句，例如

```
INTO dbo.MyNewTable FROM x INNER JOIN mx 
```

不要忘记清理：

```
DROP TABLE dbo.Outages; 
```

# perl - 提供静态文件句柄时出现 Twiggy 400 错误请求

> ID：10341082
> 
> 赞同：0
> 
> 时间：2012-04-26T20:38:13.443
> 
> 标签：perl, plack

我有一个难以在较小的测试用例中重现的问题，但这里是基本描述：

1.  我以 root 身份运行 Perl 的 Twiggy Web 服务器，绑定到端口 81。

2.  我使用 Plack::App::File->(root => "/my/directory") 作为默认 Web 应用程序来提供来自 /my/directory/... 的静态内容

3.  对于小文件，这可以正常工作，但对于较大的文件（例如，超过 30kB 左右），输出会被 400 Bad Request 错误相当可靠地截断。例如，我请求 /my.css，它服务于 /my/directory/my.css 的开头，但以：

    ```
    .rowH a:link, .rowH a:visited, .rowH a:hover, .rowH a:active {
        color:#0066CC;
    }
    .rowI { background-color:#99CCFF;}
    .rowN { background-color:#FDC651;}
    .rowZ { background-color: #f5f2EA; }/*F7F5de*/

    .disabled { backgrouHTTP/1.0 400 Bad Request
    Content-Type: text/plain 
    ```

我希望 Twiggy 提供整个文件，而不是像上面那样截断它。

我尝试通过 Twiggy/Server.pm 查看服务文件句柄会发生什么，但我迷路了。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T22:22:05.533

我发现当我试图将权限从 root 删除到另一个用户时导致错误。将其保留为 root，或者在非特权端口上运行并通过 NAT 重定向到端口 81 解决了我的问题。

# jquery - 如果无法加载外部脚本，如何阻止页面加载？

> ID：10341088
> 
> 赞同：1
> 
> 时间：2012-04-26T20:38:23.767
> 
> 标签：jquery

如果 Google Plus One 无法在 5 秒内加载，我想要一个停止页面加载的功能。在我们国家，有时 HTTPS 端口被电信部门封锁，我们无法访问 apis.google.com。它不仅慢，我们真的无法访问 HTTPS 端口。如果是这种情况，当我们无法访问[https://apis.google.com/js/plusone.js](https://apis.google.com/js/plusone.js)时，我想要某种方式来阻止页面加载。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:13:11.077

只需检查 Plusone 脚本是否在 5 秒内加载，如下所示：

```
var i=0, checkPlusone = setInterval(function() {
    if (typeof gapi!='undefined') {
        if (gapi.hasOwnProperty('plusone')) {
             clearInterval(checkPlusone);
             console.log('Plusone loaded');
        }
    }
    if (i>5000) {
         clearInterval(checkPlusone);   
         console.log('Plusone not loaded');
         window.location = "http://www.mypage.com/no_plusone.html"; //redirect to error page
    }
    i=i+300;
}, 300); 
```

[小提琴](http://jsfiddle.net/adeneo/LGZ4C/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:50:32.577

您可以使用 ajax 加载文件并使用超时。

Ctrl+F 用于**[jQuery ajax 文档页面上的“超时”，并在](http://api.jquery.com/jQuery.ajax/)****[这个 SO question](https://stackoverflow.com/questions/3543683/jquery-ajax-timeout-setting)**中查看它的使用情况。

# cross-platform - cocos2d-x 的 CCScrollView 有效吗？

> ID：10341092
> 
> 赞同：5
> 
> 时间：2012-04-26T20:38:43.673
> 
> 标签：cross-platform, cocos2d-x

**编辑：通过足够的重写和评论，我已经运行它，将在下面为其他人发布最终结果。**

**编辑2：我一直在更新我自己的版本，并且我了解到原始编码器对 C++ 不是很好，您可能需要在使用之前检查其中的所有内容，查看下面的评论**

cocos2d-x 目前可用的 CCScrollView 有一个主要缺陷：它搞砸了。

具体来说，cpp 函数标头与 .h 文件的标头不匹配。cpp 文件指的是 UIEvent 和 NSMutableArray，而不是 X-Platform。

滚动视图本身必须添加一个数组，这限制了您使用 for 循环创建菜单项（如果创建菜单项）的能力，因为您不能使用可变的，并且它们不会像彼此一样子类化iOS 所以你不能只使用一个可变的然后说 CCArray * array = mutable->getMutableArray() 或类似的。

此外，定义已经过时（尽管可以通过 cocos2d-x 网站上的翻译规则添加 CCX_SAFE_DELETE 来修复），并且各种随机模板试图创建甚至不在项目中的 NS 和 UI 对象，因为我不知道为什么。

基本思想是，除了使用可变数组之外，这个类太混乱了，无法翻译成 C++。我不相信作者编译了他拥有的版本，因为标题不匹配。我以为我下载了 cpp 和 .h 文件（每个都有 2 个），并且两者都有 UIEvent 而不是 CC 以及其他问题。

注意：我已经修复了上面的各种问题，并且在各个地方将 SelectorProtocol 更改为 CCObject，但它只是变得不堪重负。

也许我应该改用 Parallax 节点？

这太荒谬了，也许它对 Cocos2d 很好，但它不适用于 c2d-X。无论如何，我会重新编码和搜索，感谢您的任何建议！

编辑：这是我现在正在使用的课程。尚未完成编辑，但这些可以让任何人开始，并且不仅仅在 iPhone 上进行编译

标题：

```
#ifndef __CCSCROLLLAYER__
#define __CCSCROLLLAYER__
//  CCScrollLayer.h
//
//  Copyright 2010 DK101
//  http://dk101.net/2010/11/30/implementing-page-scrolling-in-cocos2d/
//
//  Copyright 2010 Giv Parvaneh.
//  http://www.givp.org/blog/2010/12/30/scrolling-menus-in-cocos2d/
//
//  Copyright 2011 Stepan Generalov
//
//  Copyright 2011 Eli Yukelzon
//
//  Permission is hereby granted, free of charge, to any person obtaining a copy
//  of this software and associated documentation files (the "Software"), to deal
//  in the Software without restriction, including without limitation the rights
//  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
//  copies of the Software, and to permit persons to whom the Software is
//  furnished to do so, subject to the following conditions:
//
//  The above copyright notice and this permission notice shall be included in
//  all copies or substantial portions of the Software.
//
//  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
//  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
//  THE SOFTWARE.

// Original source: https://github.com/cocos2d/cocos2d-iphone-extensions/tree/master/Extensions/CCScrollLayer 
// Last updated: October 1, 2011 

#include "cocos2d.h"

namespace cocos2d {

    class CCScrollLayer;

    class CCScrollLayerDelegate
    {
    public:
        /** Called when scroll layer begins scrolling.
         * Usefull to cancel CCTouchDispatcher standardDelegates.
         */
        virtual void scrollLayerScrollingStarted(CCScrollLayer* sender) {}

        /** Called at the end of moveToPage:
         * Doesn't get called in selectPage:
         */
        virtual void scrollLayerScrolledToPageNumber(CCScrollLayer* sender, unsigned int page) {}
    };

    /* 
     It is a very clean and elegant subclass of CCLayer that lets you pass-in an array 
     of layers and it will then create a smooth scroller. 
     Complete with the "snapping" effect. You can create screens with anything that can be added to a CCLayer.

     */ 
    class CCScrollLayer :   public CCLayer
    {

        int currentScreen; //added
        int totalScreens;
        float scrollWidth;
        float scrollHeight;
        float startWidth;
        float startHeight;
        int startSwipe;

    public:
        //CCScrollLayer();
        ~CCScrollLayer();

        static CCScrollLayer* nodeWithLayers(CCArray* layers, int widthOffset); 

        bool initWithLayers(CCArray* layers, int widthOffset); 

        /** Updates all pages positions & adds them as children if needed.
         * Can be used to update position of pages after screen reshape, or 
         * for update after dynamic page add/remove. 
         */
        void updatePages();

        /** Adds new page and reorders pages trying to set given number for newly added page.
         * If number > pages count - adds new page to the right end of the scroll layer.
         * If number <= 0 - adds new page to the left end of the scroll layer. 
         * @attention Designated addPage method. 
         */
        void addPage(CCLayer* aPage, unsigned int pageNumber);

        /** Adds new page to the right end of the scroll layer. */
        void addPage(CCLayer* aPage);

        /** Removes page if it's one of scroll layers pages (not children)
         * Does nothing if page not found.
         */
        void removePage(CCLayer* aPage);

        /** Removes page with given number. Doesn nothing if there's no page for such number. */
        void removePageWithNumber(unsigned int pageNumber);

        /* Moves scrollLayer to page with given number & invokes delegate
         * method scrollLayer:scrolledToPageNumber: at the end of CCMoveTo action. 
         * Does nothing if number >= totalScreens or < 0.
         */
        void moveToPage(unsigned int pageNumber);

        /* Immedeatly moves scrollLayer to page with given number without running CCMoveTo. 
         * Does nothing if number >= totalScreens or < 0.
         */
        void selectPage(unsigned int pageNumber);

        CC_SYNTHESIZE(CCScrollLayerDelegate*, m_pDelegate, Delegate);

        /** Calibration property. Minimum moving touch length that is enough
         * to cancel menu items and start scrolling a layer. 
         */
        CC_SYNTHESIZE(CGFloat, m_fMinimumTouchLengthToSlide, MinimumTouchLengthToSlide);

        /** Calibration property. Minimum moving touch length that is enough to change
         * the page, without snapping back to the previous selected page.
         */
        CC_SYNTHESIZE(CGFloat, m_fMinimumTouchLengthToChangePage, MinimumTouchLengthToChangePage);

        /** If YES - when starting scrolling CCScrollLayer will claim touches, that are 
         * already claimed by others targetedTouchDelegates by calling CCTouchDispatcher#touchesCancelled
         * Usefull to have ability to scroll with touch above menus in pages.
         * If NO - scrolling will start, but no touches will be cancelled.
         * Default is YES.
         */
        CC_SYNTHESIZE(bool, m_bStealTouches, StealTouches);

        /** Whenever show or not white/grey dots under the scroll layer.
         * If yes - dots will be rendered in parents transform (rendered after scroller visit).
         */
        CC_SYNTHESIZE(bool, m_bShowPagesIndicator, ShowPagesIndicator);

        /** Position of dots center in parent coordinates. 
         * (Default value is screenWidth/2, screenHeight/4)
         */
        CC_SYNTHESIZE_PASS_BY_REF(CCPoint, m_tPagesIndicatorPosition, PagesIndicatorPosition);

        /** Total pages available in scrollLayer. */
        unsigned int getTotalScreens() const;

        /** Current page number, that is shown. Belongs to the [0, totalScreen] interval. */
        CC_SYNTHESIZE_READONLY(unsigned int, m_uCurrentScreen, CurrentScreen);

        /** Offset, that can be used to let user see next/previous page. */
        CC_SYNTHESIZE(CGFloat, m_fPagesWidthOffset, PagesWidthOffset);

        /** Offset that can be used to let user see empty space over first or last page. */
        CC_SYNTHESIZE(CGFloat, m_fMarginOffset, MarginOffset);

        /** Array of pages CCLayer's  */
        CC_SYNTHESIZE_READONLY(CCArray*, m_pLayers, Pages);
    protected:
        // The x coord of initial point the user starts their swipe.
        CGFloat m_fStartSwipe;

        // Internal state of scrollLayer (scrolling or idle).
        int m_iState;
        bool m_bStealingTouchInProgress;
        // Holds the touch that started the scroll
        CCTouch* m_pScrollTouch;

        //void visit();
        //void moveToPageEnded();
        unsigned int pageNumberForPosition(const CCPoint& position);
        CCPoint positionForPageWithNumber(unsigned int pageNumber);
        void claimTouch(CCTouch* pTouch);
        void cancelAndStoleTouch(CCTouch* pTouch, CCEvent* pEvent);

        //void registerWithTouchDispatcher();
        bool ccTouchBegan(CCTouch* pTouch, CCEvent* pEvent);
        void ccTouchMoved(CCTouch* pTouch, CCEvent* pEvent);
        void ccTouchEnded(CCTouch* pTouch, CCEvent* pEvent);
        //void ccTouchCancelled(CCTouch* pTouch, CCEvent* pEvent);
        };
} //end namespace

#endif 
```

CPP

```
//  CCScrollLayer.cpp
//  Museum
//
//  Created by GParvaneh on 29/12/2010.
//  Copyright 2010\. All rights reserved.
//  Ported to C++ by Lior Tamam on 03/04/2011
#include "CCScrollLayer.h"

using namespace cocos2d;

CCScrollLayer* CCScrollLayer::nodeWithLayers(CCArray*  layers, int widthOffset)
{   
    CCScrollLayer *pRet = new CCScrollLayer();
    if (pRet && pRet->initWithLayers(layers, widthOffset))
    {
        pRet->autorelease();
        return pRet;
    }
    CCX_SAFE_DELETE(pRet);
    return NULL;
}

bool CCScrollLayer::initWithLayers(CCArray* layers, int widthOffset)
{   
    if (CCLayer::init())
    {       
        // Make sure the layer accepts touches
        CCTouchDispatcher::sharedDispatcher()->addTargetedDelegate(this,0,true);

        // Set up the starting variables
        //if(!widthOffset)
        {
        //  widthOffset = 0;
        }   
        currentScreen = 1;

        // offset added to show preview of next/previous screens
        scrollWidth  = (int)CCDirector::sharedDirector()->getWinSize().width - widthOffset;
        scrollHeight = (int)CCDirector::sharedDirector()->getWinSize().height;
        startWidth = scrollWidth;
        startHeight = scrollHeight;

        // Loop through the array and add the screens
        unsigned int i;
        for (i=0; i<layers->count(); i++)
        {
            CCLayer* l = (CCLayer*)layers->objectAtIndex(i);
            //l->setAnchorPoint(ccp(0,0));
            //l->setPosition(ccp((i*scrollWidth),0));
            addChild(l);            
        }

        // Setup a count of the available screens
        totalScreens = layers->count();
        return true;    
    }
    else
    {
        return false;
    }   
}

void CCScrollLayer::setMaximumScrollHeight(float maxHeight)
{
    //Make the offset match expected pixels (include the current screen if at ccp(0,0)
    maxHeight -= CCDirector::sharedDirector()->getWinSize().height;
    maximumScrollHeight = maxHeight;
}

 CCScrollLayer::~CCScrollLayer()
{
    CCTouchDispatcher::sharedDispatcher()->removeDelegate(this);
    CCLayer::onExit();
}

bool CCScrollLayer::ccTouchBegan(CCTouch *touch, CCEvent *withEvent)
{
//  
//  CCPoint touchPoint = touch->locationInView();
//  touchPoint = CCDirector::sharedDirector()->convertToGL(touchPoint);
//  
//  startSwipe = (int)touchPoint.y;
    return true;
}

void CCScrollLayer::ccTouchMoved(CCTouch *touch, CCEvent *withEvent)
{   
    CCPoint touchPoint = touch->locationInView();
    CCPoint prevPoint = touch->previousLocationInView();

    touchPoint = CCDirector::sharedDirector()->convertToGL(touchPoint);
    prevPoint = CCDirector::sharedDirector()->convertToGL(prevPoint);

    CCPoint difference = ccp( touchPoint.x - prevPoint.x , touchPoint.y - prevPoint.y);
    CCPoint currentPos = this->getPosition();

    currentPos = ccp( currentPos.x, currentPos.y+difference.y);

    if (currentPos.y > maximumScrollHeight) 
    {
        currentPos.y = maximumScrollHeight;
        //this->setPositionY(maximumScrollHeight);
    }
    else if (currentPos.y < 0)
    {
        currentPos.y = 0;
       // this->setPositionY(0);
    }
    this->setPosition(currentPos);
}

/*
void CCScrollLayer::ccTouchEnded(CCTouch *touch, CCEvent *withEvent)
{

    //CCPoint touchPoint = touch->locationInView();
    //touchPoint = CCDirector::sharedDirector()->convertToGL(touchPoint);

    int newX = (int)touchPoint.x;

    if ( (newX - startSwipe) < -scrollWidth / 3 && (currentScreen+1) <= totalScreens )
    {
    //  this->moveToNextPage();
    }
    else if ( (newX - startSwipe) > scrollWidth / 3 && (currentScreen-1) > 0 )
    {
    //  this->moveToPreviousPage();
    }
    else
    {
    //  this->moveToPage(currentScreen);        
    }   

}
*/ 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-27T17:52:48.223

恢复旧线程以添加新信息，对于通过搜索引擎找到此内容的任何人：[`CCScrollView`](http://www.cocos2d-x.org/reference/native-cpp/V2.2.3/d3/dbc/classcocos2d_1_1extension_1_1_c_c_scroll_view.html)现在是 GUI 扩展的一部分，并且似乎工作得很好。应该不再需要上面引用的实现。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T23:08:51.143

查看 Cocos2d-x 站点上的论坛以获取最新的论坛。基于此，作者现在正在对其进行重新设计。 [http://www.cocos2d-x.org/boards/18/topics/1090?r=10835#message-10835](http://www.cocos2d-x.org/boards/18/topics/1090?r=10835#message-10835)

# c++ - 是否有类似 codepad.org 或类似服务的 Visual C++ 插件？

> ID：10341096
> 
> 赞同：1
> 
> 时间：2012-04-26T20:39:05.763
> 
> 标签：c++, visual-c++, ide

我很想拥有一个本地 C++ 便笺簿，而不必担心创建项目、解决方案和文件，直到我需要特定测试用例的复杂性。对它的交互式调试将是使用 IDE 而不是来自编辑器的简单 GCC/运行脚本的主要优势。Codepad 和 ideone 不允许系统调用或文件系统操作，所以这是一个主要缺点。它们的一个小缺点是编译延迟和输出限制，当然，没有机会进行交互式调试。

# javascript - 有没有办法用鼠标悬停显示这些隐藏元素？

> ID：10341098
> 
> 赞同：0
> 
> 时间：2012-04-26T20:39:12.347
> 
> 标签：javascript

在我的 html 代码中，我列出了这些`<li>`元素：

```
<li class="liitem" id="183"><span><a href="http://www.google.it"> Google </a> </span><br>
<ul><li><span><a href="http://www.gmail.com" target="_blank">gmail.com</a> </span><span id="183" style="float:right;display:none;"><a href="">delete</a></span></li></ul></li> 
```

我想要这个：
当鼠标悬停在`<li>`“liitem”类的元素上时，然后设置 display:block 具有相同 id 的跨度（在本例中为 183 ）。

我已经编写了这段代码，但它不完整，我不知道该怎么做：

```
var elms = document.getElementsByTagName('li');

for (var i = 0; i < elms.length; i++){
  if (elms[i].getAttribute('class') === 'liitem'){

    elms[i].onmouseover = function(){
      //set display:block
    }

    elms[i].onmouseout = function(){
      //set display:none
    }

  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:31:22.777

您设置的`id`具有相同值的`id`应该是唯一的。因此您可以为 id 添加一个值以使其与 id 不同`liitem's`。像。

只要确保`a and span`.

```
<ul>
<li class="liitem" id="183"><span><a href="http://www.google.it"> Google </a> </span><br>
<ul><li><span><a href="http://www.gmail.com" target="_blank">gmail.com</a></span><span style="float:right;display:none;"><a href="">delete</a></span></li></ul>
<ul><li><span><a href="http://www.google.com" target="_blank">docs</a></span><span style="float:right;display:none;"><a href="">delete</a></span></li></ul>
</li>
</ul> 
```

.

```
var elms = document.getElementsByTagName('li'),
emls_len = elms.length;

for (var i = 0; i < emls_len; i++){

if (elms[i].className == 'liitem'){

var arr_sub_uls = document.getElementById(elms[i].id).getElementsByTagName('ul');

// for each UL within the liitem 
for (var j = 0; j < arr_sub_uls.length; j++){

// assign id's to the span around delete
var actionis = arr_sub_uls[j].childNodes[0].childNodes[1].id = elms[i].id + "_" + j;     // elms[i].id is the liitem id and j is the number of uls'

// attach the event handler
addEventHandler(arr_sub_uls[j].childNodes[0],actionis)

}
}
}

function  addEventHandler(s, actionis){
s.onmouseover = function(){ document.getElementById(actionis).style.display = "block" }
s.onmouseout = function(){ document.getElementById(actionis).style.display = "none" }
} 
```

见小提琴：http: [//jsfiddle.net/EW2cm/1/](http://jsfiddle.net/EW2cm/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:44:45.863

你可以这样做：

```
elms[i].style.display = "block"; 
```

和

```
elms[i].style.display = "none"; 
```

# java - 新线程（Runnable runnableObj）与。扩展线程

> ID：10341105
> 
> 赞同：0
> 
> 时间：2012-04-26T20:39:30.070
> 
> 标签：java, multithreading, concurrency

> **可能重复：**
> [Java：“实现可运行”与“扩展线程”](https://stackoverflow.com/questions/541487/java-implements-runnable-vs-extends-thread)

我只是想知道创建自己的扩展 Thread 的自定义对象和使用 Thread(Runnable) 构造函数创建线程之间是否存在一些细微的区别？

当我使用扩展 Thread 的类时，我有一些代码可以正常工作，但是如果我尝试使用通过使用 Thread(Runnable) 构造函数创建线程的逻辑，则新线程似乎无法正常工作 - 我无法检测到它们就像我使用我制作的自定义子类时一样，它们似乎永远不会结束。

在我的代码中，我只是产生了几个线程，然后在我的线程列表中搜索以找到一个活着的并加入它直到它死亡。然后我再次在列表中搜索一个还活着的线程并加入它。这一直持续到所有线程都死掉。

谢谢阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:45:32.433

线程是用于工作的资源。Runnable 是一项工作。您是在创建一种新型资源，还是只是定义您想要完成的工作？

要“结束”线程，您只需从“运行”方法返回。需要查看您的代码示例，以了解您无法判断它们是否处于活动状态的意思。

当然，创建 Runnables 还可以更轻松地重构代码以在将来使用 ThreadPool。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T20:49:00.397

> 在我的代码中，我只是生成了几个线程，然后在我的线程列表中搜索以找到一个活着的并加入它直到它死去。

您如何（以及为什么）“搜索我的线程列表”？相反，我会将其添加`Thread`到某种类型中`Collection`，然后您可以遍历并`Thread`依次加入：

```
 List<Thread> threads = new ArrayList<Thread();
  for (int i = 0; i < 100; i++) {
     Thread thread = new Thread(new Runnable() ...);
     thread.start();
     threads.add(thread);
  }
  ...
  for (Thread thread : threads) {
      thread.join();
  } 
```

更好的办法是使用`ExecutorService`s 给出的 s 之一`Executors`。他们有很多关于创建线程池和等待池完全完成的功能。几乎总是推荐过来`new Thread(...)`。

> 我无法检测到它们的存在方式与我使用我制作的自定义子类时的方式相同

如果您尝试设置 的名称，`Thread`那么您不能在`Runnable`. 但是，您*可以*在`run()`方法中执行此操作。你可以做：

```
 new Thread(new Runnable() {
      public void run() {
          Thread.currentThread().setName("...");
      }
  }); 
```

`Thread`否则，我不确定为什么除非它已经完成，否则你不会看到你的。

> 他们似乎永远不会结束。

使用 a `Runnable`，线程在`run()`方法返回时结束 - 通过 a`return`或 a `throw`。这与扩展非常相似，`Thread`所以我不确定为什么这不起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T20:50:57.823

我真的建议使用[并发实用程序](http://docs.oracle.com/javase/1.5.0/docs/relnotes/features.html#concurrency)，而不是尝试自己管理线程，这很复杂且容易出错。使用并发 api 还可以帮助您立即应用正确的模式。

# php - Symfony 功能适用于所有型号

> ID：10341109
> 
> 赞同：1
> 
> 时间：2012-04-26T20:39:39.460
> 
> 标签：php, function, symfony1, symfony-1.4, global

我想在所有模型类中使用一个函数（在项目文件夹和插件文件夹中）。

我应该在哪里申报？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T21:27:48.570

根据您的函数的作用，您可以在`lib`文件夹中创建一个文件，然后从应用程序的每个位置调用它。这在 Symfony 项目中用于定义常用功能（如工具箱）很有用。

例如，在[Jobeet 教程](http://svn.jobeet.org/trunk/lib/Jobeet.class.php)中，他们定义了一个调用`slugify`in的方法`/lib/Jobeet.class.php` *（请确保在文件`.class.php`末尾命名为 ，以便 Symfony 自动加载它）*。然后，您可以调用`Jobeet::slugify()`app/model/plugin/view 中的每个位置。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-04-26T20:51:47.880

此解决方案适用于 Symfony 1.4：

*   您创建一个新文件，在其中声明您希望随处可用的功能。
*   您使用php.ini 文件中的[自动前置文件设置加载该文件。](http://www.php.net/manual/en/ini.core.php#ini.auto-prepend-file)

如果操作正确，无论模型、插件或项目中的其他内容如何，​​该功能都可以在您的所有脚本中使用。

# python - 什么更随机，hashlib 或 urandom？

> ID：10341112
> 
> 赞同：20
> 
> 时间：2012-04-26T20:39:48.963
> 
> 标签：python, random, hash

我正在和一个朋友一起做一个项目，我们需要生成一个随机散列。在我们有时间讨论之前，我们都提出了不同的方法，并且因为他们使用不同的模块，所以我想问大家什么会更好——如果有这样的事情。

```
hashlib.sha1(str(random.random())).hexdigest() 
```

或者

```
os.urandom(16).encode('hex') 
```

输入这个问题让我觉得第二种方法更好。简单胜于复杂。如果您同意，这对于“随机”生成哈希有多可靠？我将如何测试这个？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-26T20:43:03.270

这个解决方案：

```
os.urandom(16).encode('hex') 
```

是最好的，因为它[使用操作系统](http://docs.python.org/library/os.html#os.urandom)来生成随机性，这*应该*可用于加密目的（取决于操作系统的实现）。

`random.random()`生成[伪随机值](http://docs.python.org/library/random.html)。

散列一个随机值不会增加任何新的随机性。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-26T20:55:14.573

`random.random()`是一个伪 radmom 生成器，这意味着数字是从一个序列中生成的。如果您调用`random.seed(some_number)`，那么之后生成的序列将始终相同。

`os.urandom()`从操作系统的 rng 中获取随机数，它使用熵池来收集真正的随机数，通常是通过来自硬件设备的随机事件，甚至存在用于生成大量随机数的系统的随机特殊熵生成器。

在 unix 系统上，传统上有两个随机数生成器：`/dev/random`和`/dev/urandom`. 如果没有足够的熵可用，则调用第一个块，而当您读取`/dev/urandom`并且没有足够的熵数据可用时，它使用伪 rng 并且不会阻塞。

所以使用通常取决于你需要什么：如果你需要一些均匀分布的随机数，那么内置的 prng 应该就足够了。对于加密使用，使用实数随机数总是更好。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-26T21:01:39.347

第二种解决方案显然比第一种解决方案具有更多的熵。假设随机比特源的质量对于`os.urandom`和是相同的`random.random`：

*   在第二种解决方案中，您正在获取 16 个字节 = 128 位的随机性
*   在第一个解决方案中，您获取的浮点值具有大约 52 位随机性（IEEE 754 双精度，忽略次正规数等）。然后你散列它，当然，这不会增加任何随机性。

更重要的是，来自 的随机性的质量`os.urandom`被预期和记录为比来自 的随机性好得多`random.random`。`os.urandom`的文档字符串说“适合加密使用”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-26T20:47:29.993

测试随机性是出了名的困难 - 但是，我会选择第二种方法，但仅在这种情况下（或者，仅就我想到的而言），其中哈希是由随机数播种的。

哈希的全部意义在于创建一个基于*输入的细微差异而大不相同的**数字*。对于您的用例，输入的随机性应该可以。但是，如果您想对文件进行哈希处理并检测一个 eensy 字节的差异，那就是哈希算法大放异彩的时候。

 *不过，我只是好奇：为什么要使用哈希算法？似乎您正在寻找一个纯粹的随机数，并且有很多生成 uuid 的库，它们比随机数生成器具有更强的唯一性保证。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-07-19T16:48:33.127

如果你想要一个唯一标识符（uuid），那么你应该使用

```
import uuid
uuid.uuid4().hex 
```

[https://docs.python.org/3/library/uuid.html](https://docs.python.org/3/library/uuid.html)*

# string - 粘贴的替代功能

> ID：10341114
> 
> 赞同：19
> 
> 时间：2012-04-26T20:40:05.327
> 
> 标签：string, r, function

有没有可以替代 paste 的功能？我想知道R中是否存在这样的东西：

```
> buildString ( "Hi {1}, Have a very nice {2} ! " , c("Tom", "day") ) 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-26T20:53:45.330

frankc 和 DWin 正确地指出了`sprintf()`.

如果由于某种原因您的替换部件确实是向量的形式（即`c("Tom", "day")`），您可以使用`do.call()`将它们传递给`sprintf()`：

```
string <- "Hi %s, Have a really nice %s!"
vals   <- c("Tom", "day")

do.call(sprintf, as.list(c(string, vals)))
# [1] "Hi Tom, Have a really nice day!" 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-04-26T21:41:41.743

该`sprintf`功能是其他人提到的一种方法，这是使用该`gsubfn`包的另一种方法：

```
> library(gsubfn)
> who <- "Tom"
> time <- "day"
> fn$paste("Hi $who, have a nice $time")
[1] "Hi Tom, have a nice day" 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-04-26T20:43:14.757

我认为您正在寻找 sprintf。

具体来说：

```
sprintf("Hi %s, Have a very nice %s!","Tom","day") 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2012-04-27T01:30:22.373

该`whisker`软件包在这方面做得很好，值得更广泛的赞赏：

```
require(whisker)
whisker.render ( "Hi {{name}}, Have a very nice {{noun}} ! " , list(name="Tom", noun="day") ) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-02-28T17:14:46.270

在 1.1.0 版本（CRAN 于 2016-08-19 发布）中，该`stringr`包获得了字符串插值功能`str_interp()`。

可以使用`str_interp()`以下用例：

**环境中定义的变量**

```
v1 <- "Tom"
v2 <- "day"
stringr::str_interp("Hi ${v1}, Have a very nice ${v2} !")
#[1] "Hi Tom, Have a very nice day !" 
```

**在命名列表中作为参数提供的变量**

```
stringr::str_interp(
  "Hi ${v1}, Have a very nice ${v2} !",
  list("v1" = "Tom", "v2" = "day"))
#[1] "Hi Tom, Have a very nice day !" 
```

**向量中定义的变量**

```
values <- c("Tom", "day")
stringr::str_interp(
  "Hi ${v1}, Have a very nice ${v2} !",
  setNames(as.list(values), paste0("v", seq_along(values)))
)
#[1] "Hi Tom, Have a very nice day !" 
```

请注意，`value`向量只能保存一种类型的数据（列表更灵活），并且数据按照提供的顺序插入。

# email - 元素中的 CakePHP 2.1 联系表不会发送

> ID：10341122
> 
> 赞同：0
> 
> 时间：2012-04-26T20:40:27.987
> 
> 标签：email, cakephp, contact-form

我的 CakePHP 应用程序中有两个联系表单——一个有自己的控制器、模型和视图，另一个在一个元素中，可以从站点上每个页面的页脚作为“快速”联系表单进行访问。

两种形式的代码是相同的。该元素旨在访问其他表单使用的控制器和模型。但是，该元素没有提交数据或发送电子邮件，而常规页面工作正常。

这是正在运行的常规形式的 MVC 代码：

```
<!-- Model: Model/Contact.php -->

<?php
class Contact extends AppModel {
    var $name = 'Contacts';
    public $useTable = false;  // Not using the database, of course.

    var $validate = array(
        'name' => array(
            'rule' => '/.+/',
            'allowEmpty' => false,
            'required' => true,
        ),
        'email' => array(
            'allowEmpty' => false,
            'required' => true,
        )
    );

    function schema() {
        return array (
            'name' => array('type' => 'string', 'length' => 60, 'class' => 'contact input'),
            'email' => array('type' => 'string', 'length' => 60, 'class' => 'contact input'),
            'message' => array('type' => 'text', 'length' => 2000, 'class' => 'contact input'),
        );
    }

}
?>

<!-- Controller: Controller/ContactsController.php -->

class ContactsController extends AppController
{
    var $name = 'Contacts';
    /* var $uses = 'Contact'; */
    var $helpers = array('Html', 'Form', 'Js');
    var $components = array('Email', 'Session');

    public function index() {
        if(isset($this->data['Contact'])) {
            $userEmail = $this->data['Contact']['email'];
            $userMessage = $this->data['Contact']['message'];

            $email = new CakeEmail();
            $email->from(array($userEmail));
            $email->to('email@example.com');
            $email->subject('Website Contact Form Submission');
            $email->send($userMessage);

            if ($email->send($userMessage)) {
                $this->Session->setFlash('Thank you for contacting us');
            } 
            else {
                $this->Session->setFlash('Mail Not Sent');
            }

        }
    }

    public function contact() {
        if(isset($this->data['Contact'])) {
            $userEmail = $this->data['Contact']['email'];
            $userMessage = $this->data['Contact']['message'];

            $email = new CakeEmail();
            $email->from(array($userEmail));
            $email->to('email@example.com');
            $email->subject('Website Contact Form Submission');
            $email->send($userMessage);

            if ($email->send($userMessage)) {
                $this->Session->setFlash('Thank you for contacting us');
            //  $this->redirect(array('controller' => 'pages', 'action' => 'index'));
            } 
            else {
                $this->Session->setFlash('Mail Not Sent');
            }

        }
    }

}
?>

<!-- View: Views/Contacts/index.ctp -->

<? 
$main = 'contact';
$title = 'quick contact';
?>
<div style="border-bottom: solid 1px #ccc;">
    <h1 style="position:relative; float:left;"><?php echo $main; ?></h1>
    <h2 style="position:relative;float:left;margin-top:15px; color: #869c38">&nbsp; &bull;&nbsp; <?php echo $title;?></h2>
    <br><br>&nbsp; &nbsp; 
</div>
<div class="clear"><br></div>
<div id="interior-page">
    <?php

    echo $this->Form->create('Contact');
    echo $this->Form->input('name', array('default' => 'name (required)', 'onfocus' => 'clearDefault(this)'));
    echo $this->Form->input('email', array('default' => 'email (required)', 'onfocus' => 'clearDefault(this)'));
    echo $this->Form->input('message', array('default' => 'message', 'onfocus' => 'clearDefault(this)'));
    echo $this->Form->submit();
    echo $this->Form->end();
    ?>
</div> 
```

这是不工作的快速联系表单的视图，位于默认布局的页脚中显示的元素中：

```
<?php

echo $this->Form->create('Contact');
echo $this->Form->input('name', array('default' => 'name (required)', 'onfocus' => 'clearDefault(this)'));
echo $this->Form->input('email', array('default' => 'email (required)', 'onfocus' => 'clearDefault(this)'));
echo $this->Form->input('message', array('default' => 'message', 'onfocus' => 'clearDefault(this)'));
echo $this->Form->submit();
echo $this->Form->end();

?> 
```

我尝试了不同的方式来改变表单动作，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:47:12.627

通常，蛋糕“自动”根据您从哪里调用它来创建表单的操作。例如，如果从视图 Views/Contacts/index.ctp 调用，它会将操作设置为 /contacts/index。如果是元素，Cake 无法真正猜出您要做什么，因此您需要手动设置操作：

```
$this->Form->create('Contact', array('action' => 'index')); 
```

或者设置完整的 URL：

```
$this->Form->create('Contact', array('url' => '/contacts/index')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T20:48:00.087

确保在创建该表单所需的每个页面上都包含 Contact 模型。在你的情况下，因为它在你的布局中，这可能意味着你应该把它放在你的 AppController 中，所以每个页面都可以访问它。

您还需要指定表单应提交到的位置：

```
echo $this->Form->create('Contact', array(
        'url' => array('controller'=>'contacts', 'action'=>'contact')
    )
); 
```

**注释**- 您可以结合最后 2 行：

```
echo $this->Form->end('Submit'); 
```

这将创建带有文本“提交”的提交按钮并关闭表单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T19:17:13.587

谢谢你！这对我帮助很大。

只是一件快速的事情，您将发送两次电子邮件。

一旦来到这里：

> $email->send($userMessage);

再次在这里：

> if ($email->send($userMessage))

第一个实例 ($email->send($userMessage)) 不是必需的。

干杯

# java - Websphere JMS：无法反序列化对象

> ID：10341125
> 
> 赞同：0
> 
> 时间：2012-04-26T20:41:08.433
> 
> 标签：java, jms, ibm-mq

我正在使用 Websphere MQ 6.x，当从队列中读取对象时，我收到以下异常。

```
Caused by: javax.jms.MessageFormatException: MQJMS1061: Unable to deserialize object
    at com.ibm.jms.JMSMessage.newMessageFormatException(JMSMessage.java:4982)
    at com.ibm.jms.JMSObjectMessage.getObject(JMSObjectMessage.java:289) 
```

我可以使用 WMQ 工具查看消息（类）的序列化版本。但是当应用程序读取它时，会发生此异常。

任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:11:49.737

我认为早期版本 6.x 存在原始类型的问题。也许它是这样的：http://www-01.ibm.com/support/docview.wss?uid=swg1IC50448

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T11:44:29.717

读取消息的应用程序是否可能在其类路径中没有该类？或者更微妙的问题，线程的上下文类加载器可能看不到它。

您是否有更长的堆栈跟踪可以提供更多信息？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T01:56:43.573

您是否尝试过使用应用程序以外的其他工具从队列中读取和写入消息？

您可以尝试查看是否可以使用例如 RFH Util 或 MQ Explorer 读取消息并将消息写入队列，以查看问题出在您的应用程序还是 MQ 基础架构上。

从 MQ 队列读取消息的应用程序是什么？

高温高压

芒鲁

# javascript - JavaScript构造函数可以返回函数并保持继承吗？

> ID：10341127
> 
> 赞同：16
> 
> 时间：2012-04-26T20:41:10.827
> 
> 标签：javascript, oop, function, constructor, prototypal-inheritance

```
function F() {
    return function() {
        return {};
    }
}

var f = new F();
f instanceof F; // returns false 
```

据我了解，如果我想`instanceof`工作，我需要`this`从构造函数返回。但我希望构造函数返回一个函数，我不能分配给`this`.

那么，这真的是不可能的，还是可以以某种方式完成，`f = new F()`返回一个函数并仍然`f instanceof F`返回 true？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T21:05:59.153

```
function F() {
    var r = function() {
        return {};
    };

    r.__proto__ = this.__proto__;
    return r;
}

var f = new F();
f instanceof F;
true
f();
Object 
```

仅适用于具有`__proto__`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-26T21:09:26.910

您当然可以`instanceof F`通过设置使所有功能看起来都是`F.prototype = Function.prototype;`.

不幸的是，ECMAScript 似乎不允许您创建函数子类。

但是，您可以使用已弃用的`__proto__`属性在 Gecko 中执行此操作：

```
function F() {
    function f() {
        return {};
    }
    f.__proto__ = F.prototype;
    return f;
 }
 F.prototype.__proto__ = F.__proto__; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-04T22:51:26.740

对于今天遇到此问题的任何人，使用 ES6/2015 可以使用新语法来避免已弃用的`__proto__`属性；`Object.setPrototypeOf`. 请注意，[MDN 警告](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf)说这是一个缓慢/昂贵的操作。

```
function F() {
    const f = function() {
        return {};
    }
    Object.setPrototypeOf(f, F.prototype);
    return f;
}

var f = new F();
f instanceof F; // returns true
f(); // returns {} 
```

另请注意，如果您想在构造函数中初始化值，它会变得有点奇怪。您需要将它们设置为您将返回的函数的道具，但稍后对原型的添加会将它们引用为“this”。例如

```
function F() {
    const f = function() {
        return {};
    }
    f.favoriteBand = 'The Books';
    Object.setPrototypeOf(f, F.prototype);
    return f;
}
F.prototype.getFavoriteBand = function(){ return this.favoriteBand; }

var f = new F();
f.getFavoriteBand() // returns 'The Books' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T21:04:39.293

在您的示例中， F 不是构造函数，它是一个返回匿名构造函数的函数，然后您调用 new 。instanceof 通过查看原型链来工作，因此您的代码不起作用，因为您没有正确设置原型。

这个[页面](http://www.coolpage.com/developer/javascript/Correct%20OOP%20for%20Javascript.html)很好地解释了 JavaScript 构造函数以及如何子类化。

看看下面的代码，看看它是否有帮助。

```
function F() {
    this.whoami = 'F';
    this.whatami = 'F';

}

function Sub() {
 this.whoami = 'G';
}

Sub.prototype = new F();

function G() {
    return new Sub;
}

var f = new G();
console.log(f instanceof F); // returns false
console.log(f.whoami);
console.log(f.whatami);
​ 
```

# wpf - Visual Studio：是否支持 XAML 片段？

> ID：10341131
> 
> 赞同：8
> 
> 时间：2012-04-26T20:41:36.863
> 
> 标签：wpf, silverlight, xaml, editor, code-snippets

有没有办法在 Visual Studio 2010 中为 XAML 编辑器添加 XAML 片段？例如，我想从一些打字中拯救自己，并有这样的事情：

片段： `gr<TAB>`

生成代码：

```
<Grid>
    <Grid.RowDefinitions>

    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>

    </Grid.ColumnDefinitions>
</Grid> 
```

然后，如果我输入例如：`rd<TAB>`它应该生成`<RowDefinition />`

同样，`cd<TAB>`应该生成`<ColumnDefinition />`

对于其他 XAML 元素也是如此。

我想你明白了……关键是使这些片段仅在 Visual Studio 的 XAML 编辑器中可用。将它们放在 Visual Studio 内的其他代码编辑器中（例如，在编辑 .cs 文件时）没有意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T07:23:36.893

如果您不需要参数，那么您可以使用工具箱！

只需将代码拖到工具箱中，然后将其插入到您想要的任何位置。这适用于 C# 以及 XAML。

来自：[http ://blog.wpfwonderland.com/2012/04/16/xaml-snippets-and-visual-studio/](http://blog.wpfwonderland.com/2012/04/16/xaml-snippets-and-visual-studio/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-07-26T10:45:39.743

它适用于 VS 2019。使用指南：[创建代码片段](https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2010/ms165393(v=vs.100))

例如，插入：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto"/>
    </Grid.ColumnDefinitions>

    <Tag Grid.Row="0" Grid.Column="0" />
</Grid> 
```

`Tag`作为每次插入片段时要设置的可编辑值，请使用以下代码：

```
<?xml version="1.0" encoding="utf-8"?>
<CodeSnippet Format="1.0.0" xmlns="http://schemas.microsoft.com/VisualStudio/2005/CodeSnippet">
  <Header>
    <SnippetTypes>
      <SnippetType>Expansion</SnippetType>
    </SnippetTypes>
    <Title>Grid Default</Title>
    <Description>Grid With Default Rows and Columns</Description>
    <HelpUrl>
    </HelpUrl>
    <Shortcut>griddef</Shortcut>
  </Header>
  <Snippet>
    <Declarations>
      <Literal Editable="true">
        <ID>TagName</ID>
        <ToolTip>Tag Name</ToolTip>
        <Default>TextBlock</Default>
      </Literal>
    </Declarations>

    <Code Language="xaml">
      <![CDATA[
      <Grid>
          <Grid.RowDefinitions>
              <RowDefinition Height="Auto"/>
          </Grid.RowDefinitions>
          <Grid.ColumnDefinitions>
              <ColumnDefinition Width="Auto"/>
          </Grid.ColumnDefinitions>

          <$TagName$ Grid.Row="0" Grid.Column="0" />
      </Grid>
      $selected$$end$]]>
    </Code>
  </Snippet>
</CodeSnippet> 
```

这个文件可以保存在任何带有扩展名的地方`.snippet`，然后使用片段管理器（`Tools | Code Snippets Manager...`将文件导入到 IntelliSense 使用的标准位置（不要忘记选择 XAML 类型）。您也可以直接在最终位置创建文件（在下面的片段管理器对话框中可见）以保存导入步骤。

[![在此处输入图像描述](../Images/f7fd0920a7f4f4c581e9b368d9df6de1.png)](https://i.stack.imgur.com/uzyxg.png)

快捷方式可能不会出现在 IntelliSense 中（这是我的情况，原因我仍然未知），但键入`griddef` `Tab``Tab`会插入模板。

根据您的特定需求，替换元素中的代码`CDATA`，并更改`Shortcut`元素中的值。您也可以删除此部分：

```
<Declarations>
  <Literal Editable="true">
    <ID>TagName</ID>
    <ToolTip>Tag Name</ToolTip>
    <Default>TextBlock</Default>
  </Literal>
</Declarations> 
```

如果您不需要任何可编辑的值，或者根据开头提到的指南进行调整。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T20:43:01.883

没有[内置的支持](http://social.msdn.microsoft.com/Forums/en-US/csharpide/thread/c9242ea2-8929-4ae5-9d7a-d1e5e74c4ce2/)，但是有一个扩展来提供[类似的东西](http://xamlcodesnippets.codeplex.com/)。

# c# - 编写单元测试来检查它是否实现了接口是否有意义？

> ID：10341132
> 
> 赞同：1
> 
> 时间：2012-04-26T20:41:39.600
> 
> 标签：c#, visual-studio-2010, unit-testing, testing

如题。

我有一个实现需要排序的 IComparable 的类。我针对所有方法编写了所有单元测试。但是，编写一个单元测试来检查它是否实现了 IComparable 是否有意义？

因为在 UI 中排序时使用界面将无法正常工作。但是编译它仍然可以工作。因此，如果我有这样的测试用例，如果有人删除了该接口，它就会被捕获。

我的课是这样的：

```
 public class ComparableCustomType: IComparable
    {
        private readonly someFields;

        public ComparableCustomType(AnotherBusinessObject obj)
        {
              //Do some parsing against the obj
        }

        public int CompareTo(object obj)
        {
             //Some custom sorting logic
        }
    } 
```

基本上我的测试用例将是：

```
[TestMethod]
public void CompareTo_IsImplementIComaparable()
{
      IComparable comparable = Isolate.Fake.Instance<ComparableCustomType>();
      Assert.AreNotEqual(null, comparable);    
} 
```

编辑：这就是我使用这个属性的方式......（或者我应该说这就是这个人使用这个属性的方式......）

```
public class CustomItem{

    private AnotherBusinessObject anotherBusinessObj = null

    public CustomItem(AnotherBusinessObject obj)
    {
        this.anotherBusinessObj = obj;
    }

    public ComparableCustomType {
        get { return new CamparableCustomType(this.anotherBusinessObj); }
    }

    public string SomeOtherProperty {get;set;}

    publci int AnotherProperty {get;set;}

}

public ObservableCollection<CustomItem> MyCustomCollection {get;set;} 
```

然后这个集合将数据绑定到我的 GridView ......所以它会自动生成所有列......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T20:44:13.880

我想说不要测试编译器会为你捕获的任何东西。由于您遇到编译器无法捕获的情况，因此为其创建 UT 似乎是合法的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-26T20:49:56.000

为了快速总结我的答案，我说不，编写单元测试来检查类实现/继承的内容没有多大意义。IMO，应该编写单元测试来测试逻辑/功能，而不是类型。这很像编写测试以确保您可以实例化构造函数。通常这样的事情是矫枉过正的，我相信这种情况也是矫枉过正的。

应在编译时检查您的代码。您可以在实例化对象时应用此约束（如果这对于您使用对象的方式是可能的）。

假设您的实现类`IComparable`被称为`FooComparable`：

```
IComparable foo = new FooComparable(); 
```

同样，如果您已经实例化了对象并且它的唯一功能不一定是`IComparable`对象，您可以应用几个其他约束。假设你有你的`FooComparable`并且你想确保它`IComparable`在绑定到控件之前，你可以做这样的事情：

```
IComparable dataSource = fooObj; 
```

如果你尝试这个并且 FooComparable 没有实现 IComparable，编译器会抱怨。也许您应该提供一个代码示例来说明您如何使用该类，以便我们提供更多建议。

# javascript - 从 javascript 使用 github API 的示例

> ID：10341135
> 
> 赞同：32
> 
> 时间：2012-04-26T20:42:00.213
> 
> 标签：javascript, github-api

我在网上搜索了一段时间，找不到如何从普通的客户端 javascript（没有 node-js、jquery 等）使用[GitHub API的示例。](http://developer.github.com/v3/)我想要像验证然后推送一个blob之类的东西，尽可能简单地让我理解它。应该不会太复杂，我敢打赌你可以在十几行代码中做到这一点，但我对 ajax、json 和 jsonp 了解不多。

你能提供一个例子让我开始吗？

谢谢！

**编辑：**发现了这个：[http](http://blog.vjeux.com/category/javascript) ://blog.vjeux.com/category/javascript ，但我仍然对这个过程的具体步骤感到困惑。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-08-23T05:19:39.483

如果您希望使用 vanilla JavaScript（即没有框架），您需要使用该`XMLHttpRequest`对象。为`XMLHttpRequest`AJAX 实现提供了核心。

尽管有`XMLHttp`前缀，但您并不局限于 XML 或 HTTP。您可以检索任何数据类型（例如 JSON）并使用其他协议，例如 FTP。

假设我们想`GET`从 GitHub 获取您的用户信息。[在浏览器中，我们可以通过访问https://api.github.com/users/funchal](https://api.github.com/users/funchal)轻松地发出请求。在 JavaScript 中发送 HTTP 请求同样简单`XMLHttpRequest`：

```
// Create a new request object
var request = new XMLHttpRequest();

// Initialize a request
request.open('get', 'https://api.github.com/users/funchal')
// Send it
request.send() 
```

如果您从 JavaScript 控制台试一试，您可能会感到有些失望：不会立即发生任何事情。您必须等待服务器响应您的请求。从创建实例化请求对象到服务器响应，对象将经历一系列由`readyState`属性值表示的状态变化：

*   0 `UNSENT`：`open()`未调用
*   1 `OPENED`：`send()`未调用
*   2 `HEADERS_RECIEVED`：标题和状态在之后可用`send()`
*   3 `LOADING`：`responseText`还在下载中
*   4 `DONE`：哇哦！

全部完成后，您可以检查`response`数据的属性：

```
request.readyState // => 4 (We've waited enough)
request.response // => "{whatever}" 
```

使用 时`XMLHttpRequest#open()`，您有几个选项需要考虑。这是方法签名：

```
void open(
   DOMString method,
   DOMString url,
   optional boolean async,
   optional DOMString user,
   optional DOMString password
); 
```

第三个参数默认为 true，指示是否应异步进行响应。如果将此设置为`false`，则必须等到响应完成`#send()`才能返回，并且您将付出阻止整个程序的代价。因此，我们以*异步*方式编码，以便我们的程序即使在等待时也能保持响应。这种异步性是通过使用事件侦听器（也称为事件处理程序）和回调函数来实现的。

假设我们只想在响应到达后将响应转储到控制台。我们首先需要创建一个我们想要执行的回调函数`onload`：

```
function dumpResponse() {
  // `this` will refer to the `XMLHTTPRequest` object that executes this function
  console.log(this.responseText);
} 
```

然后我们将此回调设置为接口`onload`定义的事件的侦听器/处理程序`XMLHttpRequest`：

```
var request = new XMLHttpRequest();
// Set the event handler
request.onload = dumpResponse;
// Initialize the request
request.open('get', 'https://api.github.com/users/funchal', true)
// Fire away!
request.send() 
```

现在，由于您将接收作为字符串的数据，因此您需要解析字符串`JSON.parse()`以执行任何有意义的操作。假设我想调试您拥有的公共存储库的数量以及您的姓名。我可以使用这个函数将字符串解析成 JSON，然后我可以拉出我想要的属性：

```
function printRepoCount() {
  var responseObj = JSON.parse(this.responseText);
  console.log(responseObj.name + " has " + responseObj.public_repos + " public repositories!");
}
var request = new XMLHttpRequest();
request.onload = printRepoCount;
request.open('get', 'https://api.github.com/users/funchal', true)
request.send()
// => Giovanni Funchal has 8 public repositories! 
```

有关. [_](http://www.w3.org/TR/XMLHttpRequest2/) _ [_](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest?redirectlocale=en-US&redirectslug=DOM%2FXMLHttpRequest%2FUsing_XMLHttpRequest) _`XMLHttpRequest`

# c# - c#删除字符串中多次出现的字符的智能方法

> ID：10341136
> 
> 赞同：3
> 
> 时间：2012-04-26T20:42:14.287
> 
> 标签：c#, list, split

我的程序读取了一个文件，该文件在“时间戳”、“LiveStandby”、“Total1”、“Total2”、“Total3”等下面有数千行类似的内容。每一行都是不同的 分割的最佳方法是什么, 并删除 "" 并将值放入列表中

这就是我所拥有的

```
 while ((line = file.ReadLine()) != null)
  {
     List<string> title_list = new List<string>(line.Split(',')); 
  } 
```

上面的步骤仍然缺少删除引号。我可以做 foreach 但这有点违背了将 List 和 Split 放在一行中的目的。最好和最聪明的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T20:44:39.187

我认为最好的方法是使用解析[CSV](http://en.wikipedia.org/wiki/Comma-separated_values)的库，例如[FileHelpers](http://filehelpers.sourceforge.net/)。

具体来说，在您的情况下，这将是使用 FileHelpers 库的解决方案：

定义一个描述记录结构的类：

```
[DelimitedRecord(",")]
public class MyDataRecord
{
    [FieldQuoted('"')]
    public string TimeStamp;
    [FieldQuoted('"')]
    public string LiveStandby;
    [FieldQuoted('"')]
    public string Total1;
    [FieldQuoted('"')]
    public string Total2;
    [FieldQuoted('"')]
    public string Total3;
} 
```

使用此代码解析整个文件：

```
var csvEngine = new FileHelperEngine<MyDataRecord>(Encoding.UTF8)
    { 
        Options = { IgnoreFirstLines = 1, IgnoreEmptyLines = true }
    };

var parsedItems = csvEngine.ReadFile(@"D:\myfile.csv"); 
```

*请注意，此代码仅用于说明，我尚未编译/运行它。但是，该库使用起来非常简单，并且网站上有很好的示例和文档。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T20:46:12.227

我要澄清一下。如果您有一个具有可预测格式的用户格式化文件（即用户已从 EXCEL 或类似程序中生成数据），那么您最好使用经过良好测试的现有解析器。

像下面这样的场景只是手动解析会遇到问题的几个例子：

```
"column 1", 2, 0104400, $1,300, "This is an interestion question, he said" 
```

..还有更多的转义、文件格式等可能会让你自己头疼。

如果你这样做，那么确保你得到一个可以容忍每行列的差异，因为它可以产生影响。

另一方面，如果您知道系统生成的文件中常见的数据中的内容，那么使用 CSV 解析器将导致比它们解决的问题更多的问题。例如，我处理过第一部分是固定的并且可以是强类型的场景，但连续有以下部分不是。如果您从遗留数据库中解析固定宽度场景中的平面文件数据，也会发生这种情况。csv 解决方案会做出我们不想要的假设，并且在许多情况下不是正确的解决方案。

如果是这种情况，并且您只想在用逗号分隔后去掉引号，那么请尝试一些 linq。这也可以扩展以替换您担心的特定字符。

```
line.Split(',').Select(i => i.Replace("\"", "")).ToArray() 
```

希望这能消除所有相互矛盾的建议。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T20:46:55.403

像这样保持简单应该可以：

```
List<string> strings = new List<string>();
while ((line = file.ReadLine()) != null) 
    string.AddRange(line.Replace("\"").split(',').AsEnumerable()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T20:53:23.500

您可以使用该[`Array.ConvertAll()`](http://msdn.microsoft.com/en-us/library/exc45z53.aspx)功能。

```
string line = "\"Timestamp\",\"LiveStandby\",\"Total1\",\"Total2\",\"Total3\"";

var list = new List<String>(Array.ConvertAll(line.Split(','), x=> x.Replace("\"",""))); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T20:56:14.870

首先执行替换，然后拆分到您的列表中。这是您的替换代码。

```
while ((line = file.ReadLine()) != null)   
{      
  List<string> title_list = new List<string>(line.Replace("\"", "").Split(','));    
} 
```

虽然，您将需要一个变量来保存所有列表，因此请考虑使用 AddRange()。

# javascript - Extjs 4 处理外部事件

> ID：10341139
> 
> 赞同：0
> 
> 时间：2012-04-26T20:42:27.217
> 
> 标签：javascript, events, iframe, extjs

我有一个 Extjs 4 应用程序作为 iframe 在另一个 Web 应用程序（用 Javascript 编写）中运行。我想以某种方式在**外部**触发一个事件并在框架中捕获它。也就是说，我想效仿

```
 this.application.fireEvent('myevent', myparams); 
```

我目前有一个解决方法。在我的外部应用程序中，我可以执行以下操作...

```
var w = document.getElementById('myIFRAME').contentWindow;
if (w) {
    w._myFunctionInExtjs(myParam);
} 
```

...它调用在我的 Ext 代码中声明的全局函数。不过，如果通过 Ext 事件完成会更干净，因此感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:15:14.050

没有简单的方法可以做到这一点。使用您的解决方法是我能想到的最佳选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:21:18.350

我最终使用了我的解决方法并创建了一个全局函数。它所做的一切都会触发 Ext 事件。

```
//  global function that is used for triggering Ext events 
function _appFireEvent(eventName, objParam) {
    _extApp.fireEvent(eventName, objParam);    
} 
```

现在，从我的外部站点，我可以调用它并告诉它我想要引发哪个事件：

```
var w = document.getElementById('myIFRAME').contentWindow;
if (w) w._appFireEvent('mycustomevent', myparam); 
```

希望这可以帮助某人。

# design-patterns - Backbone：订阅单个集合事件的多个视图？这是一个不好的做法吗？

> ID：10341141
> 
> 赞同：16
> 
> 时间：2012-04-26T20:42:41.460
> 
> 标签：design-patterns, backbone.js, javascript, javascript-framework

我有一个问题，我认为是非常基本的东西，但是：

我只看到了集合视图和依赖于正在更新的集合的单个视图的示例。如果您有多个视图试图订阅一个集合事件，例如 reset、addOne、addAll 等，该怎么办？

我是否错过了关于做/不做这件事的一些要点？你有这方面的例子吗？这甚至有意义吗？

任何信息都非常感谢

```
 var Coll = Backbone.Collection.extend({
        model: SingleModel,
        url: 'service',
        initialize: function(){
            console.log('collection inited')

        }        

    });

    var SingleModel = Backbone.Collection.extend({});            

    var CollView = Backbone.View.extend({                
        el: 'ul',
        template: Handlebars.compile(someContainerTemplate),
        init: function(){
            _.bindAll(this, 'render', 'addAll', 'addOne');
            this.collection.bind("reset", this.addAll);

            this.collection.fetch();
        },
        render: function(){
            $(this.el).append(this.template())
        },

        addAll: function(){
            this.collection.each(this.addOne);
        },

        addOne: function(model){
            var view = new SingleView({ model: model })            
        }
    })

    var SingleView = Backbone.View.extend({
        tagName: "li",
        events: {
            "click .delete": "remove"                    
        },
        template: Handlebars.compile(someTemplateForSingleItem),  
        initialize: function() {
        _.bindAll(this,'render');

            this.model.bind('save', this.addOne);
            this.model.bind('destroy', removeEl);
        },

        remove: function(){
          this.model.destroy();  
        },

        removeEl: function(){
          $(this.el).remove();  
        },

        render: function() {
            var context = this.model.toJSON();
            return $(this.el).append(this.template(context));
        },       
    })

    // standard so far (excluding any bad practices), 
    // but what if you have another view dependent on 
    // say the number of length of the collection, and 
    // you want it to update if any single models are destroyed

    var HeaderView = Backbone.View.extend({
        tagName: "div#header",
        template: Handlebars.compile(someHeaderTemplate), 
        initialize: function() {
        _.bindAll(this,'render');

        this.model.bind('save', this.addOne);
        },

        render: function() {
            //assigning this collection length

            var context = this.collection.length;
            return $(this.el).append(this.template(context));
        },      
    });        

    var coll = new Coll();
    new CollView({ collection: coll });
    new HeaderView({ collection: coll}); 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-26T21:45:27.610

您所做的一切都很好，这也是使用 Backbone 的部分原因。从[骨干介绍](http://backbonejs.org/#introduction)：

> 每当一个 UI 动作导致模型的某个属性发生变化时，模型就会触发一个*“变化”*事件；所有显示模型状态的视图都可以收到更改通知，

请注意，他们说的是“所有视图”，而不是“视图”。

单个集合的多个视图的一个示例是聊天系统。假设您有一组在线用户；那么您可能在标题中有一个显示在线人数的简单视图和列出用户的另一个视图（同一集合）：

```
var User = Backbone.Model.extend({});
var OnlineUsers = Backbone.Collection.extend({
    model: User
});

var CounterView = Backbone.View.extend({
    tagName: 'span',
    initialize: function() {
        _.bindAll(this, 'render');
        this.collection.on('add', this.render);
        // other interesting events...
    },
    render: function() {
        this.$el.text(this.collection.size());
        return this;
    }
});
var ListView = Backbone.View.extend({
    initialize: function() {
        _.bindAll(this, 'render');
        this.collection.on('add', this.render);
        // other interesting events...
    },
    render: function() {
        var html = this.collection.map(function(m) {
            return '<p>' + m.get('name') + '</p>';
        });
        this.$el.html(html.join(''));
        return this;
    }
}); 
```

然后您将拥有一个`OnlineUsers`实例，但您的实例`CounterView`和`ListView`实例都在观看它。当人们上线或下线时，两种视图都将根据需要进行更新。

简单演示：http: [//jsfiddle.net/ambiguous/eX7gZ/](http://jsfiddle.net/ambiguous/eX7gZ/)

上面的示例情况听起来正是您正在做的事情，而这正是 Backbone 的用途。做得好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-21T09:11:26.463

我们遇到了同样的问题。我们需要为每个模型使用具有唯一内部事件的多个 jQuery 模板，而不使用多个持有者视图。这是我们提出的解决方案：

```
var myHolderView = Backbone.View.extend({
    el: '#views',
    render: function(){
        // This is because 'this' change inside the collection.each
        var $this = this;

        // If you want a wrapper template
        var wrapperHtml = $('#view-wrapper-template').tmpl();
        $this.$el.append(wrapperHtml);
        $wrapper = $this.$el.find('> div'); // If wrapper is a div

        $this.collection.each(function(model){
            // Render and append the viewA with internal events
            var viewA = new myViewA({model: model});
            viewA.render();

            // Use this to add the views content (viewA.el) to this views element ('#views')
            //$this.$el.append(viewA.el);

            // Use this to add the view content (viewA.el) to this views wrapper element ($wrapper)
            $wrapper.append(viewA.el);

            // Render and append the viewB with internal events
            var viewB = new myViewB({model: model});
            viewB.render();
            //$this.$el.append(viewB.el);
            $wrapper.append(viewB.el);

            // Add more views here...
        });
    }
}); 
```

完整源代码和工作示例：http: [//jsfiddle.net/HLv5z/9/](http://jsfiddle.net/HLv5z/9/)

# c# - xdoc 查询的选择语句

> ID：10341145
> 
> 赞同：2
> 
> 时间：2012-04-26T20:42:52.393
> 
> 标签：c#, xml, linq, web-services, rest

我正在尝试在我的 xml 语句中向 Messages 添加一个子类别有没有办法可以做到这一点`GroupMessages -> Message -> GroupMessage`：

```
 var groups = xDoc.Descendants("Group")
            .Select(n => new
            {
                GroupName = n.Element("GroupName").Value,
                GroupHeader = n.Element("GroupHeader").Value,
                TimeCreated = DateTime.Parse(n.Element("TimeAdded").Value),
                Tags = n.Element("Tags").Value, 
                Messages = n.Element("GroupMessages").Value
                //line above
            })
            .ToList();
        dataGrid2.ItemsSource = groups; 
```

在我的方法中 GroupMessages 包含 MessageID 和 GroupMessage 并且它在我的数据网格中的一个容器中列出。所以我尝试了这个，但它什么也没列出：

```
 Messages = n.Descendants("GroupMessages").Select(nd => nd.Element("GroupMessage").Value) 
```

我的 XML 如下所示：

```
<Group>
<TimeAdded>2012-04-27T10:23:50.7153613+01:00</TimeAdded>
<GroupName>Group</GroupName>
<GroupHeader>Header</GroupHeader>
<GroupMessages>
<Message>
<MessageID>1</MessageID>
<GroupMessage>Message</GroupMessage>
<MessageGroup/>
</Message>
</GroupMessages>
</Group> 
```

我也试过：

```
Messages = n.Descendants("GroupMessages").Select(nd => nd.Descendants("Message").Select(nde => nde.Element("GroupMessage").Value)) 
```

没用？

更新：

```
 private void ListGroups_Click(object sender, RoutedEventArgs e)
    {
        string uriGroup = "http://localhost:8000/Service/Group";
        XDocument xDoc = XDocument.Load(uriGroup);
        var groups = xDoc.Descendants("Group")
                    .Select(n => new
        {
            GroupName = n.Element("GroupName").Value,
            GroupHeader = n.Element("GroupHeader").Value,
            TimeCreated = n.Element("TimeAdded").Value,
            Tags = n.Element("Tags").Value,
            Messages = n.Element("GroupMessages").Descendants("Message").Select(nd => new
            {
                //Id = nd.Element("MessageID").Value,
                Message = nd.Element("GroupMessage").Value
            }).FirstOrDefault()
        })
        .ToList();
        dataGrid2.ItemsSource = groups;
    } 
```

不幸的是，此方法在数据网格的单元格内显示“集合”。如果我尝试 ToArray，它将在单元格内显示一条数组消息。有没有办法实际显示 GroupMessage？不确定如何设置数据网格的子元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T23:54:40.553

在最基本的层面上，您可以这样做来获取一条**消息（第一条）**：

```
var groups = from grp in xDoc.Descendants("Group")
             select new { 
                GroupName = grp.Element("GroupName").Value,
                GroupHeader = grp.Element("GroupHeader").Value,
                TimeCreated = DateTime.Parse(grp.Element("TimeAdded").Value),
                Message = grp.Element("GroupMessages").Element("Message").Element("GroupMessage").Value
             }; 
```

但是，我假设您希望`Messages`成为具有 ID 和 Message 的消息列表。在这种情况下，请考虑：

```
var groups = from grp in xDoc.Descendants("Group")
             select new { 
                GroupName = grp.Element("GroupName").Value,
                GroupHeader = grp.Element("GroupHeader").Value,
                TimeCreated = DateTime.Parse(grp.Element("TimeAdded").Value),
                Messages = grp.Element("GroupMessages")
                             .Descendants("Message")
                             .Select(msg => new { 
                                 Id = msg.Element("MessageID").Value, 
                                 Message = msg.Element("GroupMessage").Value
                             }).ToList()
             }; 
```

然而，我**强烈强调**匿名类的所有这些使用只会引起混乱。如果你有一个类`Group`，`Message`然后使用它们。

请注意，您遇到的问题是您忽略了 XML 结构并选择了随机元素。要从单个元素中获取值，您需要准确选择该元素，并要求`.Value`. 选择它的父母，或者它是父母的父母（就像你一样）是不够的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T00:50:23.987

试试这个：

```
var groups = xDoc.Elements("Group")
            .Select(n => new
            {
                GroupName = n.Get("GroupName", string.Empty),
                GroupHeader = n.Get("GroupHeader", string.Empty),
                TimeCreated = n.Get("TimeAdded", DateTime.MinValue),
                Tags = n.Get("Tags", string.Empty),
                Messages = n.GetEnumerable("GroupMessages/Message", m => new
                {
                    Id = m.Get("MessageID", 0),
                    Message = m.Get("GroupMessage", string.Empty),
                    Group = m.Get("MessageGroup", string.Empty)
                }).ToArray()
            })
            .ToList(); 
```

我使用了这里的扩展方法：http: [//sarisen.com/xmllib/extensions.wiki](http://searisen.com/xmllib/extensions.wiki)

Get 将处理 null 情况，例如您`Tags`的 xml 中不存在的节点以及空标记`MessageGroup`。`Elements()`如果您想要的节点是您正在引用的节点的子节点，而不是该名称的任何后代，则应该使用。

我将您的 xml 复制到根节点中以对其进行测试。它适用于这个xml：

```
<root>
  <Group>
    <TimeAdded>2012-04-27T10:23:50.7153613+01:00</TimeAdded>
    <GroupName>Group</GroupName>
    <GroupHeader>Header</GroupHeader>
    <GroupMessages>
      <Message>
        <MessageID>1</MessageID>
        <GroupMessage>Message</GroupMessage>
        <MessageGroup/>
      </Message>
    </GroupMessages>
  </Group>
  <Group>
    <TimeAdded>2012-04-27T10:23:50.7153613+01:00</TimeAdded>
    <GroupName>Group</GroupName>
    <GroupHeader>Header</GroupHeader>
    <GroupMessages>
      <Message>
        <MessageID>1</MessageID>
        <GroupMessage>Message</GroupMessage>
        <MessageGroup/>
      </Message>
    </GroupMessages>
  </Group>
</root> 
```

# java - 使用 CipherOutputStream + AES 将字符串写入文件

> ID：10341150
> 
> 赞同：0
> 
> 时间：2012-04-26T20:43:03.680
> 
> 标签：java, security, encryption

我正在寻找一种方法，给定任何大小的密码，加密我通过流接收的文件`AES`。为了让事情更容易开始，我试图将一些加密消息写入文件。但我遇到了麻烦：

1.  我希望能够定义任何大小的密码。是否可以以“标准”形式完成它，还是我必须将密码填充到 2^k 大小？我目前正在绕过提供临时“aaaaaaaaaaaaaaaa”密码的问题，但我想尽快摆脱它。
2.  如果我尝试将长字符串写入`cos`，则会将加密的内容写入文件。但是如果我尝试一些更小的东西，比如“abc”，什么都不会写。我玩过几个填充选项，但它们似乎无济于事（PKCS5Padding、SSL3Padding、NoPadding）。

这是我正在使用的代码：

```
 SecretKeySpec localSecretKeySpec = new SecretKeySpec("aaaaaaaaaaaaaaaa".getBytes(), "AES");
    Cipher localCipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
    localCipher.init(Cipher.ENCRYPT_MODE, localSecretKeySpec);

    CipherOutputStream cos = new CipherOutputStream(new FileOutputStream("abc"), localCipher);
    IOUtils.write("abc", cos);
    cos.flush(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T21:23:35.963

[这个答案](https://stackoverflow.com/a/992413/391315)显示了如何使用 a`SecretKeyFactory`根据任意长度的密码生成密钥。

至于你的第二个问题，`cos.flush()`不足以填充和加密最后一个块。你需要为此打电话`cos.close()`。[这](http://docs.oracle.com/javase/1.4.2/docs/api/javax/crypto/CipherOutputStream.html#close())`close()`是说明这一事实的方法的文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T23:25:33.130

您可以使用加密哈希（例如，SHA-1）将任何字符串转换为固定长度的二进制值。

这就是我在前段时间写的一个简单的文件加密器中所做的。请参阅中的`deriveKey()`方法： [http ://david.tribble.com/src/java/tribble/crypto/FileEncrypter.java](http://david.tribble.com/src/java/tribble/crypto/FileEncrypter.java)

# mongodb - MongoDB 更新深度数组

> ID：10341151
> 
> 赞同：6
> 
> 时间：2012-04-26T20:43:11.930
> 
> 标签：mongodb

我的 mongo 数据库中有以下名为 music 的对象。

我想更新流派是 Grunge
乐队名称是 Nirvana
专辑名称是 Nevermind
曲目顺序是 1

并将曲目名称更改为“Smells Like Teen Spirit！”。
我尝试过使用位置运算符，但无法完全弄清楚这一点。

```
{
    genre : "Grunge",
    bands : [ {
        name : "Nirvana",
        albums : [ {
            name : "Nevermind",
            tracks : [ {
                name : "Smell Like Teen Spirit",
                order : 1,
                duration : 301
            },
            {
                name : "In Bloom",
                order : 2,
                duration : 254                                                  
            } ]
        },
        {
            name : "In Utero",
            tracks : [ {
                name : "Server the Servants",
                order : 1,
                duration : 216
            },
            {
                name : "Scentless Apprentice",
                order : 2,
                duration : 254                                                  
            } ]
        } ]
    },
    {
        name : "Karma++ : A Nirvina Tribute Band",
        albums : [ {
            name : "Nevermind",
            tracks : [ {
                name : "Smell Like Teen Spirit",
                order : 1,
                duration : 301
            },
            {
                name : "In Bloom",
                order : 2,
                duration : 254                                                  
            } ]
        },
        {
            name : "In Utero",
            tracks : [ {
                name : "Server the Servants",
                order : 1,
                duration : 216
            },
            {
                name : "Scentless Apprentice",
                order : 2,
                duration : 254                                                  
            } ]
        } ]
    } ]
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-26T21:48:19.227

不幸的是，目前每次更新只能使用一个“$”位置。这将更新限制为单个嵌入式数组，类似于文档中的示例：[http](http://www.mongodb.org/display/DOCS/Updating#Updating-The%24positionaloperator) ://www.mongodb.org/display/DOCS/Updating#Updating-The%24positionaloperator （从您的帖子看来，您已经找到了这个，但我已经包含了链接，以方便其他阅读这篇文章的用户。）

为了进行更新，您必须知道以下三个中两个的位置：乐队在“bands”数组中的位置、专辑在专辑数组中的位置或曲目的位置在“轨道”数组中。

此功能有一个功能请求，它计划在 2.3.0 版中使用（尽管这可能会发生变化）。
[https://jira.mongodb.org/browse/SERVER-831](https://jira.mongodb.org/browse/SERVER-831) “位置​​运算符匹配嵌套数组”

目前，您必须知道子文档在三个数组中的两个中的位置：

```
db.music.update({genre : "Grunge", "bands.name" : "Nirvana"}, {$set:{"bands.$.albums.0.tracks.0.name":"Smells Like Teen Spirit!"}})

db.music.update({genre : "Grunge", "bands.0.albums.name" : "Nevermind"}, {$set:{"bands.0.albums.$.tracks.0.name":"Smells Like Teen Spirit!"}}) 
```

或者

```
db.music.update({genre : "Grunge", "bands.0.albums.0.tracks.order" : 1}, {$set:{"bands.0.albums.0.tracks.$.name":"Smells Like Teen Spirit!"}}) 
```

# django - objects.all().annotate 结果不完全是我想要的

> ID：10341156
> 
> 赞同：0
> 
> 时间：2012-04-26T20:43:41.700
> 
> 标签：django, django-templates

这是我的代码：

楷模：

```
class Category(models.Model):
  name = models.CharField(max_length=100)

  def get_month_sum_series(self):
    return [('2012-01-01',100)]

class Operation(models.Model):
  date = models.DateField()
  value = models.DecimalField(max_digits = 9, decimal_places = 2)
  category = models.ForeignKey(Category, null = True)
  comments = models.TextField(null = True) 
```

视图.py：

```
from django.template import Context, loader
from accounts.models import Category, Operation
from django.http import HttpResponse

from django.db.models import Sum, Max

def index(request):
  category_list = Category.objects.all().annotate(suma = Sum('operation__value'))

  template = loader.get_template('reports/index.html')
  context = Context({
    'category_list' : category_list,
  })
  return HttpResponse(template.render(context)) 
```

模板：

```
{% if category_list %}
<table>
{% for category in category_list %}
<tr><td><a href="{{ category.id }}/">{{ category.name }}</a></td><td style="text-align:right">{{ category.suma|default:0|currency }}</td>
{% for month_sum in category.get_month_sum_series %}
<td>{{ month_sum.1|default:0|currency }}</td>
{% endfor %}
</tr>
{% endfor %}
</table>
{% else %}
{% endif %} 
```

category.get_month_sum_series 不起作用....

但是如果我改变

```
category_list = Category.objects.all().annotate(suma = Sum('operation__value')) 
```

进入

```
category_list = Category.objects.all() 
```

category.get_month_sum_series 不起作用.....（但当然是注释部分 - 不是）

如何更改 category_list 或 view 以获取它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T21:54:50.790

好。看起来 Category.objects.all().annotate 与 Category.objects.annotate 不同 - 或者我没有足够的时间重新启动 apache；D

# android - 在android上使用nginx检索缓慢的HttpResponse内容

> ID：10341159
> 
> 赞同：0
> 
> 时间：2012-04-26T20:44:02.730
> 
> 标签：android, nginx, httprequest

我在从 http 请求中检索数据时遇到问题。对于一些服务器请求，解析来自服务器的内容需要一分钟。请求中的数据是一个简短的 json 消息（存储在答案字符串中），因此不必花费这么长时间。

我在 android 中使用 org.apache 库

这只发生在我们生产中的 nginx 服务器上，而不是我的开发 webrick 服务器上（是的，它是一个 rails api）

此代码用于我们所有 api 意图的超类中，但它仅在某些情况下很慢（一些 api 请求）

代码挂在第三行的toString方法上

```
HttpResponse result = ... ;
HttpEntity response = result.getEntity();
String answer = EntityUtils.toString(response); 
```

这是个常见的问题吗？

编辑：这些是wireshark日志 [https://img.skitch.com/20120426-jddnkdbhuttfujym9u4m7a2ph1.jpg](https://img.skitch.com/20120426-jddnkdbhuttfujym9u4m7a2ph1.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:41:49.713

好的各位，问题解决了

毕竟是服务器问题，在 Rails 代码中，别忘了添加你的状态码

我们有：

```
respond_with({:auth_token => current_user.authentication_token}, :location => nil) 
```

这修复了它：

```
respond_with({:auth_token => current_user.authentication_token},:status => :ok, :location => nil) 
```

# ruby - Rake - 仅复制更改的文件

> ID：10341160
> 
> 赞同：2
> 
> 时间：2012-04-26T20:44:04.440
> 
> 标签：ruby, file, copy, rake

所以我有一个如下的 rake 文件：

```
require 'fileutils'

task :copy do
  FileUtils.cp_r 'src', 'target'
end 
```

我怎样才能：

1.  只复制已更改的文件？
2.  使`:copy`任务对`src`目录具有依赖性，以便仅在需要时启动？`:copy => 'src'`并且`:copy => FileList['src/*'].to_a`似乎不起作用。

我可以像这样处理第一个问题：

```
task :copy do
    sh 'rsync -ru src/* target'
end 
```

如果可能的话，我想只用 ruby​​ / rake 来做这件事。这在*某种程度上*也解决了第二个问题，因为`rsync`如果没有文件更改，则不会做任何事情，但我希望 rake 任务尽可能不执行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T10:40:24.453

为了避免执行任务，Rake 需要知道目标和源以及确定是否执行任务的规则，以便从源创建目标。

通常，规则是“时间修改”，即如果源比目标更新，则 Rake 将运行任务。您可以通过提供 Proc 作为源依赖项来修改它。请参阅“高级规则”下的[http://docs.rubyrake.org/user_guide/chapter03.html](http://docs.rubyrake.org/user_guide/chapter03.html)（但确实需要一些实验来了解正在发生的事情！）。

所以你的任务必须依赖于目标。如果您知道目标不存在，那应该很容易：

```
task :copy => 'target/' do
  sh 'rsync -ru src/ target'  # trailing slash is significant; target will be created
done 
```

如果目标已经存在，它会变得更加复杂。您可以为每个文件定义一个规则，但坦率地说，我只是运行 rsync 并完成它。Rsync 在本地文件系统上非常快，每次运行它都没什么大不了的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-19T15:00:53.113

这是一个独立于操作系统且纯 Ruby 的解决方案

```
class File
  def self.update(src, dst)
    if File.exist? dst
      # skip if src file modification or creation time is same or earlier than target
      return if [File.ctime(src), File.mtime(src)].max <= [File.ctime(dst), File.mtime(dst)].max
    else
      # create target folder if not present
      FileUtils.mkdir_p(File.dirname(dst)) unless File.exist? File.dirname(dst)
    end
    FileUtils.cp(src, dst)
    puts src
  rescue => e
    puts "#{e}\n#{e.backtrace}"
  end
end

File.update source_file, target_file 
```

# c# - 从网络外的c#发送电子邮件

> ID：10341164
> 
> 赞同：0
> 
> 时间：2012-04-26T20:44:17.167
> 
> 标签：c#, .net, email

当我使用 UserNameB 登录到 Windows 7 机器时，我在尝试发送电子邮件时收到此错误：

```
Unhandled Exception: System.Net.Mail.SmtpFailedRecipientException: Mailbox unava
ilable. The server response was: 5.7.1 Unable to relay
   at eFormsSystem.MainSystem.DoIt() in C:\Documents and Settings\...\Deskto
p\eFormsSystem\eFormsSystem\MainSystem.cs:line 63
   at eFormsApp.Program.Main(String[] args) in C:\Documents and Settings\...
\Desktop\eFormsSystem\eFormsApp\Program.cs:line 12 
```

当我使用 UsernameA 登录 xp 机器时，我没有收到错误。

我在我的配置文件中使用这个配置：

```
<normal deliveryMethod="Network" from="UserNameB@domain.com" >
      <network host="mail.domain.com" defaultCredentials="false"
               userName="someusername@domain.com" password="password" /> 
```

这就是我发送电子邮件的方式：

```
 if (processInfo.sendEmail)
    {
        OutlookeMail outlookEmail = new OutlookeMail(GetSmtpSection(eEmailType.normal));
        OutlookComponent component = new OutlookComponent();
        component.fullPath = rename;

        if (debugEmail)
            component.emailTo = debugEmailAddress;
        else
            component.emailTo = processInfo.Email;

        component.emailfrom = "UserNameC@Millenniumlabs.com";
        component.subject = formType + " - " + processInfo.PracitceName;
        outlookEmail.SendEmailWithAttachment(component);
    } 
```

我不确定这些信息是否足以确定问题出在哪里，但请多问我一些问题来帮助解决这个问题。

**问题**：为什么我在一个用户名上出现此错误，而在另一个用户名上却没有？

# html - 网站搜索的下拉结果

> ID：10341165
> 
> 赞同：0
> 
> 时间：2012-04-26T20:44:22.800
> 
> 标签：html, search, drop-down-menu

我想知道是否有创建网站搜索的服务或解决方案可以让我将结果填充到搜索栏下方的下拉窗口中，而不必将结果填充到新页面。有点像谷歌的单词预测/建议，但不是即时建议，我想要一个新的 DIV 在提交时下拉结果。

我正在开发的网站位于： http: [//www.conceptsuppliers.com/beta](http://www.conceptsuppliers.com/beta)

![在此处输入图像描述](../Images/248aea915d0ee95b7a51dd3399d3fffe.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T21:21:55.497

我强烈推荐使用**jQuery Tokeninput**插件。我最近在一个用于实时搜索功能的网站上实现了这一点，并且效果很好。

该库提供了用于对搜索栏和下拉结果列表的各个方面进行样式设置的选项。

例子：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="jquery.tokeninput.js"></script>
<link rel="stylesheet" type="text/css" href="token-input.css" />

<script type="text/javascript">
$(document).ready(function () {
    $("#searchbar").tokenInput("/url_to_your_search_endpoint");
});
</script> 
```

可以在此处找到该插件以及文档：http: [//loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)

# javascript - 自定义组合框下拉问题

> ID：10341173
> 
> 赞同：0
> 
> 时间：2012-04-26T20:44:56.573
> 
> 标签：javascript, jquery, html, css

我正在为自定义下拉菜单使用 html。我想单击箭头和列表以打开隐藏的选项，但是单击箭头时没有任何反应？我不知道出了什么问题。[http://jsfiddle.net/Hunter4854/rrmJR/1/](http://jsfiddle.net/Hunter4854/rrmJR/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:53:48.633

最简单的解决方案可能是只绑定箭头上的点击事件，以便它触发点击甚至是这样的下拉：

```
$('.arrow').click(function() {
    $('.custom-select').trigger('click')
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/rrmJR/4/)**。

顺便说一句，您为什么要使用如此旧版本的 jQuery？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:57:15.133

我只是将您的`.arrow`div 放入`custom-select`div 中并且它正在工作。将箭头放在哪里并不重要，因为您绝对定位它）工作示例：http: [//jsfiddle.net/skip405/rrmJR/6/](http://jsfiddle.net/skip405/rrmJR/6/)

# android - 如何正确使用onVisibilityChanged()、onWindowVisibilityChanged()、onAttached/Detached()？

> ID：10341176
> 
> 赞同：2
> 
> 时间：2012-04-26T20:45:11.943
> 
> 标签：android, surfaceview

我有一个自定义类，其父级是 SurfaceView。我的类工作正常，从它自己的线程绘制到屏幕等。但是我想了解如何正确处理问题标题中的方法。

例如，如果我的应用程序正在运行（在手机上）并收到呼叫，则调用哪个方法？另一个例子是，如果我实现了一个对话框，如果用户在我的自定义 SurfaceView 上“长按”，则显示一个对话框，那么会调用什么方法？我假设画布是“安全的”写入提供的 surfaceDestroyed() 尚未被调用。

基本上我想了解我应该如何处理我所描述的（可能还有更多？）以及每个方法被调用的事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:02:42.513

`on...`- 发生某事时调用方法。

您可能不必实现它们，因为超类在大多数情况下都会做正确的事情。

如果您将 log 放入有问题的方法中，您可以看到发生了什么/何时调用它们。您还可以阅读[API 文档](http://developer.android.com/reference/android/view/SurfaceView.html)并查看[源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/view/SurfaceView.java#SurfaceView.onAttachedToWindow%28%29)以了解那里做了什么。

# java - playframework 2.0 中的路由文件错误

> ID：10341178
> 
> 赞同：3
> 
> 时间：2012-04-26T20:45:17.637
> 
> 标签：java, playframework, playframework-2.0

这是我的路线文件中的一行：

```
GET  /detail controllers.Message.detail(type: String, text: String, page: Integer ?= 0) 
```

当我尝试加载页面时，它突出显示了这一行并声明“需要标识符但找到'类型'。”。现在，如果我将参数从 更改`type: String`为`newType: String`，则页面加载正常。

这个词有什么问题`type`？路由文件中有保留字吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T08:55:33.213

`type`是一个 Scala 关键字。你不能在你的路由文件中使用它们。另请参阅这张票：[https ://play.lighthouseapp.com/projects/82401/tickets/69-compilation-error-when-using-backticked-scala-keywords-on-routes-file](https://play.lighthouseapp.com/projects/82401/tickets/69-compilation-error-when-using-backticked-scala-keywords-on-routes-file)

# mysql - MySQL 使用 WHERE AVG() 选择最后 10 行

> ID：10341183
> 
> 赞同：1
> 
> 时间：2012-04-26T20:45:34.787
> 
> 标签：mysql, group-by, average

我正在尝试提取平均评分高于 4 的最后 10 行的列表。现在这是通过从第一个表中选择然后检查平均值是否高于 4 然后将其添加到变量中如果不是它什么都不做. 这是一种可怕的方法，特别是如果有超过 1000 行。

这是两个查询：

```
SELECT * FROM `CLMS_reviews` WHERE id = 465 ORDER BY date DESC

SELECT 
rc.name, rr.rating
FROM `CLMS_reviews_ratings` rr  
LEFT JOIN `CLMS_reviews_categories` rc ON rc.cat_id = rr.cat_id  AND rc.website_id = 465
WHERE rr.review_id = " . $row['id'] . "
GROUP BY rc.name 
```

如何将其组合成一个查询？我试过了，但对 GROUP BY 的使用无效：

```
SELECT 
rr.review_id
FROM `CLMS_reviews` r
LEFT JOIN `CLMS_reviews_ratings` rr ON rr.review_id = r.id
WHERE r.website_id = 465 AND AVG(rr.rating) > 4
GROUP BY rr.review_id LIMIT 10 
```

解决方案 从下面：

```
SELECT review_id FROM `CLMS_reviews_ratings`
WHERE review_id IN ((SELECT id FROM `CLMS_reviews` WHERE website_id = 465))
GROUP BY review_id
HAVING avg(rating) > 4
LIMIT 10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:50:57.263

无法测试它，但也许这会做：

```
SELECT rr.review_id
  FROM `CLMS_reviews` r
  LEFT JOIN `CLMS_reviews_ratings` rr ON rr.review_id = r.id
 WHERE r.website_id = 465
 GROUP BY rr.review_id
HAVING avg(rr.rating) > 4
 LIMIT 10; 
```

如果您需要过滤聚合函数，`HAVING`是您的朋友。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T20:49:07.273

我认为您需要使用`HAVING`语法。像这样：

```
SELECT 
rr.review_id
FROM `CLMS_reviews` r
LEFT JOIN `CLMS_reviews_ratings` rr ON rr.review_id = r.id
WHERE r.website_id = 465
GROUP BY rr.review_id 
HAVING AVG(rr.rating) > 4
LIMIT 10 
```

# c++ - std::vector 如何分配对象？

> ID：10341184
> 
> 赞同：3
> 
> 时间：2012-04-26T20:45:40.123
> 
> 标签：c++, vector, std, allocator

如何`std::vector`分配对象？看起来好像它只是`std::allocator::allocate`用来创建一块内存，但从不调用`std::allocate::construct`. 这是真的？是否`std::vector`只分配内存而从不将对象构造为内存分配？

如果没有默认构造函数怎么办？对象上没有默认构造函数时如何调用构造函数？如果有多个参数怎么办？

例如，使用此代码没有默认构造函数，并且 std::allocator 允许它。

```
#include <vector>
using namespace std;

class A{
protected:
    int m;
public:
    explicit A(int a) : m(a) { }
};

int main(){
    vector<A> test;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T20:56:16.057

自 C++11 以来，这种情况发生了很大变化。

在 C++03 中，`construct`只能就地执行复制构造。

但是，请注意，`std::vector`特别是对象数组，但有不同的大小和容量。也就是说，在包含有用数据的数组部分的末尾之外可以有更多的*空元素。*

这就是标准库的分配器将“构造”和“内存分配”分开的原因。两者`allocator`都做，但*不是同时*做。这允许`std::vector`分配比它使用的更多的内存。添加新元素时，不一定要分配更多内存；它可以通过调用`allocator::construct`.

另外，请注意所有添加元素以`std::vector` *将元素*作为参数的 C++03 函数。`push_back`, , `insert`, 即使是[大小的构造函数也将值作为参数](http://en.cppreference.com/w/cpp/container/vector/vector)。是的，它是一个默认参数，但它仍然需要一个值作为元素。这个元素被*复制*到向量中，使用调用分配器的`construct`方法来获取副本。

在 C++11 中，需要标准容器才能使用该`allocator_traits<>::construct`函数。这是一个将其参数转发给实际构造的可变参数函数。如果该调用格式正确，则此特征函数将（默认情况下。它可以专门化）调用该`allocator::construct`方法。如果不是，它将尝试放置`new`。

这允许新`emplace`功能工作。

但是，是的，标准库容器中包含的对象实际上是构造对象。即使分配器的`construct`方法没有被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:49:28.433

它依赖于实现，但典型的实现用于`std::allocator::allocate`分配内存块，然后使用放置 new 通过复制构造函数（或 C++11 中的移动构造函数）构造实例。

当元素被擦除时，它们的析构函数被直接调用来销毁对象，即使底层内存没有被释放。

# c# - 使用“+”运算符的字符串连接

> ID：10341188
> 
> 赞同：87
> 
> 时间：2012-04-26T20:45:56.673
> 
> 标签：c#, .net, string

查看`string`类元数据，我只看到运算符`==`和`!=`重载。那么它是如何为 ' `+`' 运算符执行连接的呢？

**编辑**：

Eric Lippert 关于字符串连接的一些有趣的注释：

[第1部分](http://ericlippert.com/2013/06/17/string-concatenation-behind-the-scenes-part-one/)

[第2部分](http://ericlippert.com/2013/06/24/string-concatenation-behind-the-scenes-part-two/)

第 2 部分中还提到了 Joel 的一篇超级文章 ( [http://www.joelonsoftware.com/articles/fog0000000319.html](http://www.joelonsoftware.com/articles/fog0000000319.html) )

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-04-26T20:47:43.113

它没有 - C# 编译器会:)

所以这段代码：

```
string x = "hello";
string y = "there";
string z = "chaps";
string all = x + y + z; 
```

实际上被编译为：

```
string x = "hello";
string y = "there";
string z = "chaps";
string all = string.Concat(x, y, z); 
```

（Gah - 干预编辑意外删除了其他位。）

C# 编译器注意到这里有多个字符串连接的好处是，您最终不会创建一个中间字符串`x + y`，然后需要再次复制该中间字符串作为和的连接的`(x + y)`一部分`z`。相反，我们一口气完成了所有工作。

编辑：请注意，如果您在循环中连接，编译器*将*无能为力。例如，这段代码：

```
string x = "";
foreach (string y in strings)
{
    x += y;
} 
```

最终等同于：

```
string x = "";
foreach (string y in strings)
{
    x = string.Concat(x, y);
} 
```

...所以这*确实会*产生很多垃圾，这就是为什么你应该`StringBuilder`在这种情况下使用 a 。我有一篇[文章详细介绍了这两者](http://www.yoda.arachsys.com/csharp/stringbuilder.html)，希望能回答更多问题。

# multithreading - 同步似乎挂起线程

> ID：10341193
> 
> 赞同：2
> 
> 时间：2012-04-26T20:46:23.093
> 
> 标签：multithreading, delphi, delphi-xe

我有一个基于线程的消息队列，该线程处理被抛出的消息。由于线程中的某些活动可能是 VCL 命令，因此它们在同步中执行。只要调用同步，线程就会挂起。示例代码：

```
TMessageQ = class (TThread)
...
procedure TMessageQ.do_msg;
begin
   case CurrentMessage.Command of
      cQSize:  if Assigned (OnSize)  then OnSize  (CurrentMessage);
      cQReady: if Assigned (OnReady) then OnReady (CurrentMessage);
   end; // case
end; // do_msg /

procedure TMessageQ.doTask (Sender: TObject);
begin
   while FQ.Count > 0 do
   begin
      FSection.Enter;
      try
         CurrentMessage := FQ.Dequeue;
      finally
         FSection.Leave;
      end; // try..finally
      Synchronize (do_msg);
   end; // while
end; // doTask // 
```

do_msg 中的任何语句都不会被处理。有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T00:50:03.953

`TThread.Synchronize()`阻塞直到主线程处理请求。主线程需要一个活动的消息循环来处理请求（除非您手动调用`Application.ProcessMessages()`或`CheckSynchronize()`定期调用）。如果您的线程的主要工作总是由 调用`TThread.Synchronize()`，那么使用线程根本没有意义。您可以只在主线程中使用计时器或自定义窗口消息，并消除所有不必要的复杂性。

# playframework-2.0 - 将 html 格式应用于 i18n 消息

> ID：10341196
> 
> 赞同：13
> 
> 时间：2012-04-26T20:46:28.433
> 
> 标签：playframework-2.0

在玩！2.0 我们可以将参数传递给 i18n 消息，如下所示：

在我看来：（message.key = task.created with arguments: firstName and a code）

```
<div class="alert alert-success">
<a class="close" data-dismiss="alert">×</a>
    @Messages("task.created", MyContext.currentUser().firstName, newTask.code)
</div> 
```

我的消息定义为：

```
task.created=<strong>{0}</strong>, your task has been saved with code {1} 
```

我希望看到`firstName`HTML 标签强，但不是应用强标签，而是打印`strong`标签。

我希望你能理解我的问题。这在 Play 中是否可行？

谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-27T01:37:19.323

像这样做：

```
@Html(Messages("task.created", MyContext.currentUser().firstName, newTask.code)) 
```

我希望这可以帮助你！

# c++ - OpenCV 和 Qt VideoCapture 无法在 Windows 上打开正确的摄像头

> ID：10341197
> 
> 赞同：8
> 
> 时间：2012-04-26T20:46:40.413
> 
> 标签：c++, windows, qt, opencv, image-processing

我正在使用 opencv 和 Qt 创建应用程序。在应用程序内部，我正在创建一个小工具来录制视频。出于这个原因，为了不阻塞主事件线程，我创建了一个包含录制线程的单独对话框。在这个针对初学者的线程中，我只想查看相机输出（我还没有介绍录制代码）。所以我进行了子类`QThread`化，`run()`功能如下：

```
void VideoRecordThread::run(){
    cv::VideoCapture capture;
    cv::Mat frame;
    QImage img;

    qDebug() << "Opening camera" << cameraIndex ;
    capture.open(cameraIndex);

    if(!capture.isOpened()){
        qDebug() << "Could not open camera" << cameraIndex;
        emit threadReturned();
        return;
    }

    while(!stopFlag){
        capture >> frame;
        qDebug() << "Frame Width = " << frame.cols << "Frame Height = " << frame.rows;
        if(frame.cols ==0 || frame.rows==0){
            qDebug() << "Invalid frame skipping";
            continue;
        }
        img = cvMatToQImage(frame); //Custom function
        emit imageCaptured(img);
    }
    capture.release();
    emit threadReturned(); //Custom signal
    qDebug() << "Thread returning";
} 
```

这应该可以工作，但问题是当线程启动时，我得到一个“突然”的新对话框，要求我在选择其中一个连接的相机时选择相机，它有时工作，有时它不工作吨。这是我得到的对话框：

![在此处输入图像描述](../Images/5a0a12cbdf6f3c89c57a2b61a513621a.png)

关于我能做什么的任何帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T02:08:29.027

我注意到当某些函数没有从主线程执行时，OpenCV 会出现问题。

将捕获过程的初始化移至应用程序的主线程，并将其余部分留在辅助线程上。初始化部分似乎是：

```
cv::VideoCapture capture;

qDebug() << "Opening camera" << cameraIndex ;
capture.open(cameraIndex);

if(!capture.isOpened())
{
    qDebug() << "Could not open camera" << cameraIndex;
    emit threadReturned();
    return;
} 
```

# c# - 将保存信息同步到文件的最佳方式

> ID：10341200
> 
> 赞同：2
> 
> 时间：2012-04-26T20:46:52.617
> 
> 标签：c#, multithreading

在我的代码中，我有以下功能：

```
void OnEvent(....){ SaveData();} 
```

其中 SaveData 看起来像：

```
void SaveData()
{
    new Thread(
        ()=>
        {
            lock(data)
            {
                Serialize(data);
            }
        }).Start();
} 
```

我的问题是，在序列化过程中，事件可能会被触发多次，我希望在初始序列化过程结束后只执行一次序列化。

c# 最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T20:56:16.500

您有许多问题需要解决：

首先，不要使用`Thread`类。真的。除非您正在为并行处理编写框架，否则如果您使用`Thread`. 使用类似`System.Threading.Tasks.Task`或（如果您使用的是 4.0 之前的 .NET 版本）`System.Threading.ThreadPool`来安排代码的异步执行。

其次，您应该知道`data`在线程之间共享实例变量是有粘性的。最好将要保存的数据传递*给*异步函数，这样就不会出现争用或竞争条件的问题。

第三，如果这是执行顺序，您希望发生什么：

```
<things happen>
OnEvent fires
<things happen>
Serialize starts
OnEventFires
Serialize completes 
```

由于`OnEvent`在 中间触发`Serialize`，它应该完全忽略它还是应该安排另一个序列化？如果你在这里回答“b”，这里会发生什么？

```
<things happen>
OnEvent fires
<things happen>
Serialize starts
OnEvent fires
<things happen>
OnEvent fires
Serialize completes 
```

应该安排*两个*电话`Serialize`，还是只安排一个电话？

# scroll - 如何摆脱网站中的水平滚动线

> ID：10341204
> 
> 赞同：0
> 
> 时间：2012-04-26T20:47:12.333
> 
> 标签：scroll, line

我试图摆脱我网站中的水平滚动线，任何人都可以帮助我。网站名称是 www.realcombatmedia.com

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:51:33.317

下划线行导致您的页面向右延伸。要么缩短你的下划线，要么放置一些空间来让它换行。

如果您想隐藏文本的 div 父级经过的内容，请将其添加到您的 css 中。

```
div { overflow-x: hidden; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:55:50.453

它是由以下文本中的下划线行引起的；

> 托马斯·奥斯修伊森-马库斯·约翰逊
> 
> SHOBOX 三联表头完整 UNDERCARD
> 
> * * *

这条线不能换行，所以会伸出页面的右侧

![在此处输入图像描述](../Images/b7e6d526f2caa72edcb02e01bdfba952.png)

而且没有线

![在此处输入图像描述](../Images/19f94d6e7da61d958b274370b3052cc1.png)

# ios - 在最简单的可能用例中，CAGradientLayer 因“exc_bad_access”而崩溃

> ID：10341209
> 
> 赞同：2
> 
> 时间：2012-04-26T20:47:46.110
> 
> 标签：ios, calayer, cagradientlayer

一个普通的 UIView 子类，只有以下代码：

```
- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (self) {
        // Initialization code

        CAGradientLayer* gradientLayer = [CAGradientLayer layer];
        gradientLayer.colors = [NSArray arrayWithObjects:[UIColor whiteColor], [UIColor blackColor], nil];
        gradientLayer.locations = [NSArray arrayWithObjects:[NSNumber numberWithFloat:0.0], [NSNumber numberWithFloat:1.0], nil];

        [self.layer addSublayer:gradientLayer];

    return self;
} 
```

用 EXC_BAD_ACCESS 杀死运行时（不，没有僵尸，在你问之前）。

此外，不是 CAGradientLayer 过度释放 - 在层上放置多个浮动保留没有效果。

（顺便说一句，我从未见过 CAGradientLayer 在我从事的任何项目中真正起作用。我认为它被诅咒了 :)。我不会使用它，除非我需要动画渐变，而且 Apple 的 CGGradient 类只支持 const 数组，这使得动画代码非常容易出错）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T20:51:30.520

问题可能在这里：

```
gradientLayer.colors = [NSArray arrayWithObjects:[UIColor whiteColor], [UIColor blackColor], nil]; 
```

这些颜色需要是核心图形等价物，所以这可能有效。

```
gradientLayer.colors = [NSArray arrayWithObjects:(__bridge id)[UIColor whiteColor].CGColor, (__bridge id)[UIColor blackColor].CGColor, nil]; 
```

# wpf - 如何使用实体数据模型软删除

> ID：10341216
> 
> 赞同：0
> 
> 时间：2012-04-26T20:48:19.227
> 
> 标签：wpf, entity-framework, triggers

我有一个带有实体数据模型的 WPF 应用程序。

当实体被删除而不是从数据库中删除时，我想将 IsDeleted 标志设置为 true。

我在这里阅读了很多线程，并且很多线程都建议使用修改函数映射和条件映射。

我使用条件映射来过滤 IsDeleted = true 行并且效果很好。

但是，虽然我想对删除函数使用修改函数映射，但程序给了我错误，试图在 SaveChanges() 方法上查找插入和更新函数。

我只为删除功能指定。有没有办法只使用删除修改功能而不是所有的插入、更新、删除？

如果没有，还有其他方法可以实现这一目标吗？PS 我读到了关于使用而不是删除触发器的信息。但是，如果可能的话，我想避免它，因为我们正在为移动应用程序开发程序，触发器可能会减慢应用程序的速度。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:03:32.673

我们在 Entity Framework 4.1 解决方案中实现了软/逻辑删除。

我在这个答案中部分描述了它： [部分答案](https://stackoverflow.com/questions/5576630/when-to-use-applyoriginalvalues-in-entity-framework-4/12499494#12499494)

首先，我们向数据库中所有需要软删除或逻辑删除的表添加了 IsDeleted 列。在模板中，我向 IEnforceLogicalDelete 接口添加了继承

```
public interface IEnforceLogicalDelete
    {
        global::System.Boolean IsDeleted{ get; set; }
    } 
```

在定义实体的模板中，我们添加了这一行：

```
if(entity.Properties.Where(p => p.DeclaringType == entity && (p.Name == "IsDeleted")).ToList().Count == 1){#>, IEnforceLogicalDelete<#} 
```

这在实体继承自 EntityObject 之后添加了接口。

一旦设置完成，就可以在 Context 上创建您自己的保存方法，这就是我们所做的，或者在 Context.OnSavingChanges 事件中创建。

正如我上面所说，我们创建了自己的方法（SaveChangesWithHistory），我们还将所有更改（插入、更新和删除）记录到历史表中。

要进行逻辑删除，您需要捕获所有具有已删除 EntityState 的状态条目，将其状态更改为已修改，并设置您的标志。从接口实现可以很容易地对任何需要它的实体进行完全删除。

```
foreach (ObjectStateEntry entry in this.ObjectStateManager.GetObjectStateEntries(EntityState.Modified | EntityState.Deleted | EntityState.Added))
        {

            if (entry.State == EntityState.Deleted)
            {
               if (entry.Entity is IEnforceLogicalDelete)
                    {
                        IEnforceLogicalDelete delete = entry.Entity as IEnforceLogicalDelete;
                        entry.ChangeState(EntityState.Modified);
                        entry.ApplyOriginalValues(delete);
                        delete.IsDeleted = true;
                    }
                 } 
```

}

# mysql - 带有索引的 MySQL 表：许多插入/更新会影响性能吗？如果是，如何再次加快速度？

> ID：10341217
> 
> 赞同：4
> 
> 时间：2012-04-26T20:48:26.610
> 
> 标签：mysql, sql, performance, indexing

问题是，如果您在表中的某些字段上有索引，是否在大量插入（或更新）后性能受到影响，以及是否有某种方法可以再次加快速度？

我不确定，但我读过很多关于提高性能的文章，我有点困惑。例如，碎片化是否适用于这个问题？还是别的什么？还是在具有少量索引的表上进行多次插入根本不会影响性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T20:02:00.470

您可能正在寻找`OPTIMIZE table;`.

[请参阅mysql 文档](http://dev.mysql.com/doc/refman/5.5/en/optimize-table.html)中的此处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T21:15:16.240

您要查找的内容称为索引维护，另请参阅此主题：[索引维护](https://stackoverflow.com/questions/948553/index-maintenance)

# performance - Jmeter远程/分布式测试吞吐量错误

> ID：10341218
> 
> 赞同：0
> 
> 时间：2012-04-26T20:48:26.743
> 
> 标签：performance, testing, jmeter, throughput

我创建了一个简单的测试（只是从 flickr 或 google 等著名站点下载文件。）我在本地运行测试（直接从 jmeter 或与本地运行的 jmeter-server 对话）平均时间为 250 毫秒，吞吐量29.4/秒。然后我在一台主机上远程启动这个测试（它有更好的互联网连接），结果平均时间是 225 毫秒，但吞吐量非常低——比如 2/s 甚至低于 1/s。平均时间数看起来很合理。吞吐量数完全没用。似乎 jmeter 以某种方式计算本地 jmeter 驱动程序和 jmeter 服务器之间的时间，而不是仅仅平均每个 jmeter 服务器所经历的吞吐量。我们如何在远程/分布式测试中获得正确的吞吐量数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T05:42:34.357

再添加一项（在从 jmeter.properties 中删除非活动从属设备之后）：

时间必须在所有机器之间同步：主机和所有从机。如果时间不同步，那么吞吐量将直线下降。正如 Hacking Bear 所说，Jmeter 不够聪明，无法在本地机器中聚合事物并在服务器中汇总。相反，它将所有的开始时间和结束时间发送给主控，主控将进行聚合。因此，如果所有机器之间的时间不同步，我们将无法获得适当的吞吐量。

如果要将一台机器（机器-A）的时间日期设置为所有其他机器，请运行

```
sudo ntpdate <machine-A-ip-address> 
```

在您运行 Jmeter(slaves) 的所有机器上以及在 Master 机器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T19:35:02.403

想通了。原因是当您配置了多个远程 jmeter 服务器，但只启动一个时，jmeter 不够聪明，无法知道这一点！所以它一直在等待其他非首发者回复，导致统计数据直线下降。解决方法是确保所有 jmeter 服务器都已启动并正常工作，

# sql - Rails：更新多个属性而不进行验证，1个sql事务

> ID：10341220
> 
> 赞同：2
> 
> 时间：2012-04-26T20:48:48.290
> 
> 标签：sql, ruby-on-rails, activerecord

我知道在 Rails 中你可以调用`model.update_attribute :foo, 'bar'`它，它只会更新数据库中的一个属性，而不验证模型的其余部分。这会导致一个 SQL 事务。

您还可以使用 设置多个属性`.update_attributes`，但这不能跳过验证。

或者，您可以调用`.save( :validate=>false )`和更新模型而无需验证。但是，这会将模型上的所有属性保存为当前状态，而不是能够将其限制为某些列。

我的问题是，有没有办法在一个 SQL 事务中在一个模型上设置多个值，但不是全部，而不触发验证？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T21:03:33.553

为什么不直接设置属性然后调用`save`with `:validate => false`？

```
@record.attributes = your_hash # won't nil non-mentioned attributes, as you expect it to
@record.save :validate => false 
```

# html - 将 Three.js 渲染成一个 div 元素

> ID：10341224
> 
> 赞同：5
> 
> 时间：2012-04-26T20:48:56.170
> 
> 标签：html, render, three.js

我正在使用 Three.js。拥有一个包含两个 div 元素的 html 站点，是否可以仅在一个 div 元素中呈现？

HTML 代码：

```
<body>
    <div id="twocols">
        <div id="detailinfo">
            <span class="c">Detailinformationen:</span><br/>
            <span id="tb" class="g"></span><br/>
            <span class="c">Grafiken:</span>
            <div id="chart"></div>
            <div id="chart2"></div>
        </div>
        <div id="city">
        </div>                  
    </div>      
</body> 
```

我想渲染到城市 div。

三.js代码：

```
function initScene() {

            //container = document.createElement('div');
            //document.body.appendChild(container);

            scene = new THREE.Scene();
            createCamera();
            createLight();
            createProjector();
            createRenderer();
            createControls();

            //...
        } 
```

创建渲染器：

```
function createRenderer() {
            renderer = new THREE.WebGLRenderer({
                antialias : ANTIALIAS, 
                preserveDrawingBuffer : DRAWINGBUFFER
            });

            renderer.setSize(document.getElementById("city").offsetWidth, document.getElementById("city").offsetHeight);
            document.getElementById("city").appendChild(renderer.domElement);

            THREEx.Screenshot.bindKey(renderer); // add the printscreen shortcut with "p"
        } 
```

创建控件：

```
function createControls() {
            controls = new InteractionManager(camera, document.getElementById("city"));
            //...
        } 
```

交互管理器.js

```
initialize: function(camera, domElement) {

    this.object = camera;
    this.domElement = (domElement !== undefined) ? domElement : document;
    this.target = new THREE.Vector3( 0, 0, 0 );
    //this.chartManager = new ChartsManager();

    if ( this.domElement === document ) {
        this.viewHalfX = window.innerWidth / 2;
        this.viewHalfY = window.innerHeight / 2;
    } else {
        this.viewHalfX = this.domElement.offsetWidth / 2;
        this.viewHalfY = this.domElement.offsetHeight / 2;
        //alert(domElement.offsetWidth + "  " + domElement.offsetHeight);
        //this.domElement.setAttribute( 'tabindex', -1 );
    }

    //...
}, 
```

至今..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T07:24:42.870

代替：

```
container = document.createElement('div'); 
```

利用：

```
container = document.getElementById('city'); 
```

# iphone - 如何找到 UIImageView 路径

> ID：10341226
> 
> 赞同：0
> 
> 时间：2012-04-26T20:49:01.243
> 
> 标签：iphone, ios

在我的应用程序中，我正在拍照并在图像视图中显示它。

现在我需要该图像的路径，以便将其上传到服务器。

我怎样才能得到那条路？我尝试导入 ALAsset 框架，但没有称为我的 x 代码 (4.2) iOS 5.0 的框架

```
NSData *data = UIImagePNGRepresentation(imagePic.image);
NSString *file = [NSTemporaryDirectory() stringByAppendingPathComponent:@"upload.jpg"];

[data writeToFile:file atomically:YES]; 

[[EPUploader alloc] initWithURL:[NSURL URLWithString:@"myWebSite"]
                       filePath:@"file"
                       delegate:self
                   doneSelector:@selector(onUploadDone:)
                  errorSelector:@selector(onUploadError:)]; 
```

这是我目前正在尝试的。

另外，iphone相机胶卷中照片的硬编码路径是什么？“iphone/图片/myPic” ?? 所以我可以尝试上传与查找路径分开。

谢谢，麻烦您了

**编辑：**

```
- (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
// Access the uncropped image from info dictionary
image2 = [info objectForKey:@"UIImagePickerControllerOriginalImage"];

// Save image
UIImageWriteToSavedPhotosAlbum(image2, self, @selector(image:didFinishSavingWithError:contextInfo:), nil);
imagePic.image = image2;
[picker release];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T20:58:34.957

图像视图没有路径，它在内存中。当您从拍摄图像返回时，您必须保存获得的路径。在委托方法中`imagePickerController:didFinishPickingMediaWithInfo:`，您可以获得磁盘上图像的`NSURL`in `UIImagePickerControllerMediaURL`which 点：

```
NSURL *imageURL = [info valueForKey:UIImagePickerControllerMediaURL]; 
```

# ruby-on-rails - 根据位置计算时区 [Rails]

> ID：10341231
> 
> 赞同：2
> 
> 时间：2012-04-26T20:49:17.123
> 
> 标签：ruby-on-rails, ruby-on-rails-3, time, timezone

我有一个具有纬度、经度和日期时间属性的模型，我希望能够计算该位置的时区并为模型的每个单独实例设置它。这是我为获取时区而编写的代码，我缺少什么吗？

```
require 'nokogiri'
require 'open-uri'

before_validation :set_current_time_zone

def set_current_time_zone
  Time.zone = find_timezone_based_on_location
end

def find_time_zone_based_on_location
  url = "http://www.earthtools.org/timezone-1.1/#{self.latitude}/#{self.longitude}"
  doc = Nokogiri::XML(open(url))
  offset = doc.at_xpath('//offset').text().to_i
  if offset == -5
    "Eastern Time (US & Canada)"
  ....
  elsif offset == -8 
    "Pacific Time (US & Canada)"
  end
end 
```

关于为什么没有设置正确的时间，我有什么遗漏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T23:06:35.977

我不确定您是否真的想在模型的每个实例上设置时区。根据 MVC，从 Controller 访问模型时，在控制器级别设置 time_zone 应该足够好。在控制器级别设置时区后，所有与时间相关的计算都会在过滤器中设置的 time_zone 中处理该请求。下面是代码。

```
 def set_time_zone
   old_time_zone = Time.zone
   Time.zone = find_time_zone_based_on_location
   yield
  ensure
    Time.zone = old_time_zone
  end 
```

在您要设置时区的控制器中定义环绕过滤器。find_time_zone_based_on_location（如您上面定义的）可以是 application_controller 中的辅助方法

```
 around_filter :set_time_zone 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T22:11:18.877

通过将 set_current_time_zone 更改为以下内容，我能够使代码正常工作：

```
def set_current_time_zone
  self.attributeActiveSupport::TimeZone[find_time_zone_based_on_location].local_to_utc(self.attribute)
end 
```

这将找到正确的时区，然后将该时间转换为 UTC。

# php - PHP 和 MongoDate 查询

> ID：10341234
> 
> 赞同：1
> 
> 时间：2012-04-26T20:49:29.697
> 
> 标签：php, date, mongodb

使用 PHP 脚本创建了一个 mongo 集合，其中的子字段使用 MongoDate 初始化。集合中的结果字段如下所示：

```
"ts_add" : {
    "sec" : 1335468966,
    "usec" : 420000
}, 
```

当我在 PHP 中针对该字段构建查询时，我正在像这样构建它：

```
$val = new MongoDate(strtotime($strDate)); //  $strDate = '2012-04-25'
...
$aryQuery = array(STRING_COL_NAME => array ('$gte' => $val)); 
```

然后我做一些其他的事情并使用 find() 命令执行查询。

根据调试器，PHP 中的构建查询结构如下所示：

```
find(Array
(
    [ts_add] => Array
        (
            [$gte] => MongoDate Object
                (
                    [sec] => 1335337200
                    [usec] => 0
                )

        )
) 
```

在我的日志文件中，我看到：

```
runQuery called coll.table { ts_add: { $gte: new Date(1335337200000) } } 
```

但是从来没有返回任何数据......而且我对所有额外的零有点奇怪，但我认为这是添加了默认时间戳数据或一些奇怪的 MongoDate-ism......

如果我从 cli 手动运行以下命令：

```
> db.table.find({ "ts_add.sec": { $gte:1335337200 } }) 
```

返回完整的数据集（如预期的那样）。

然后，从 cli 尝试模仿 MongoDate 的东西：

```
> var start = new Date(2012, 3, 10)
> db.addons_add.find({ ts_add : { $gte : start } } ) 
```

没有返回数据。

如果我使用相同的输入数据并将其转换为 MongoID，搜索 $_id 字段，则搜索成功。

有什么建议么？我错过了什么？感觉我站在离树三英寸远的地方，抱怨我怎么看不到森林……

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T21:29:44.650

mongod 以 JavaScript 格式打印所有内容，以毫秒为单位打印日期（这是所有额外 0 的来源）。所以正确查询 1335337200 会变成 1335337200 * 1000 = 1335337200000。

不过，您粘贴的初始文档片段看起来不对。 `"ts_add" : {"sec" : 1335468966, "usec" : 420000}`是 JSON，但 Date 类型不应该像 JavaScript 中的那样。你如何保存日期？看起来它们正在被转换为另一种类型的对象，然后存储为“通用对象”而不是“日期类型”。

# sql - 替换一个单词（它出现两次）我需要替换最后一个。sql

> ID：10341238
> 
> 赞同：0
> 
> 时间：2012-04-26T20:49:48.773
> 
> 标签：sql, performance, sql-server-2005, replace

他们是我的行

```
Número Total de Clientes
Número Total de Clientes de
Número Total de Líquidos que se Consumen en el Hogar a la Semana
Número Total de Líquidos que se Consumen en el Hogar a la Semana de
Número Total de garrafones de
Número Total de garrafones en el mercado
Númeto Total de garrafones de
Porcentaje Clientes que Compran por Calidad
Porcentaje Clientes que Compran por Disponibilidad
Porcentaje Clientesque Compran por Otros Motivos
Porcentaje Clientesque Compran por Precio
Porcentaje Total de garrafones de
Porcentaje de Clientes
Porcentaje de Clientes xxxx que Compran en la Ruta Hogar
Porcentaje de Clientes de
Porcentaje de Participación de Ventas de
Porcentaje de garrafones de 
```

我的表名为#ope_censo_indicador

你可以看到我有那些

```
Número Total de Clientes
Número Total de Clientes de 
```

我需要它是 Número Total de Clientes marca

但我得到了 Número Total de Clientes Número Total marcaClientes marca

用这个查询

```
update #ope_censo_indicador set ope_indicadoridname=(replace(ope_indicadoridname,'%de','%marca'))
where ope_indicadoridname like '% de' 
```

也有这些

```
 Número Total de Líquidos que se Consumen en el Hogar a la Semana
 Número Total de Líquidos que se Consumen en el Hogar a la Semana de 
```

我需要它回来

```
 Número Total de Líquidos que se Consumen en el Hogar a la Semana
 Número Total de Líquidos que se Consumen en el Hogar a la Semana marca 
```

这个也是

```
Porcentaje de Clientes Porcentaje de Clientes Cristal que Compran en
la Ruta Hogar Porcentaje de Clientes de 
```

我需要退货

```
 Porcentaje de Clientes Porcentaje de Clientes Cristal que Compran en
 la Ruta Hogar Porcentaje de Clientes marca 
```

（我有更多，但如果我通过一个查询就可以得到它会很棒）

之后，我会的。

```
Número Total de Clientes
Número Total de Clientes marca
Número Total de Líquidos que se Consumen en el Hogar a la Semana
Número Total de Líquidos que se Consumen en el Hogar a la Semana marca
Número Total de garrafones marca
Número Total de garrafones en el mercado
Porcentaje Clientes que Compran por Calidad
Porcentaje Clientes que Compran por Disponibilidad
Porcentaje Clientesque Compran por Otros Motivos
Porcentaje Clientesque Compran por Precio
Porcentaje Total de garrafones marca
Porcentaje de Clientes
Porcentaje de Clientes xxxx que Compran en la Ruta Hogar
Porcentaje de Clientes marca
Porcentaje de Participación de Ventas marca
Porcentaje de garrafones marca 
```

我将要删除那些（或做一个不同的查询，但我需要返回这个:)

```
Número Total de Clientes marca
Número Total de Líquidos que se Consumen en el Hogar a la Semana marca
Número Total de garrafones marca
Número Total de garrafones en el mercado
Porcentaje Clientes que Compran por Calidad
Porcentaje Clientes que Compran por Disponibilidad
Porcentaje Clientesque Compran por Otros Motivos
Porcentaje Clientesque Compran por Precio
Porcentaje Total de garrafones marca
Porcentaje de Clientes xxxx que Compran en la Ruta Hogar
Porcentaje de Clientes marca
Porcentaje de Participación de Ventas marca
Porcentaje de garrafones marca

enter code here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T21:09:23.310

这很棘手！我假设您基本上是说您想用“marca”替换最后一个“de”，但前提是它是最后一个单词。如果它在中间，你想不管它。

如果这是正确的，则此代码将处理它：

```
-- Setup a temp table with "bigstring" as your text and "lastpos" as the location of LAST "de"
 DECLARE @tmp1 TABLE (bigstring varchar(1000), lastpos int)
 INSERT INTO @tmp1 (bigstring) VALUES ('Número Total de Líquidos que se Consumen en el Hogar a la Semana')
 INSERT INTO @tmp1 (bigstring) VALUES ('Número Total de Líquidos que se Consumen en el Hogar a la Semana de')
 INSERT INTO @tmp1 (bigstring) VALUES ('Leave this de one alone')

  -- Ensure we don't have any trailing spaces
  UPDATE @tmp1 SET bigstring = RTRIM(bigstring)

  -- If the string ENDS in ' de' then record the starting position of that word
  UPDATE @tmp1 SET lastpos = LEN(bigstring)-2 WHERE RIGHT(bigstring,3) = ' de'

  -- Here is how our table looks now
  SELECT * from @tmp1

  -- Now, if LASTPOS is not null, we want everything to the LEFT of that + 'marca'
  UPDATE @tmp1 SET bigstring = SUBSTRING(bigstring, 1, lastpos) + 'marca' WHERE lastpos IS NOT NULL

  -- Done!
  SELECT * from @tmp1 
```

你的第一个字符串被单独留下，第二个将最后的“de”替换为“marca”，而我放在那里的那个（中间有“de”）被单独留下。

我希望这会有所帮助！

# qt - 如何访问在 QtCreator Designer 中创建的 QLabel？

> ID：10341256
> 
> 赞同：1
> 
> 时间：2012-04-26T20:51:10.930
> 
> 标签：qt, opencv, qt-creator

我使用 Qt Creator 和 opencv 在我的 MainWindow 中创建了一些`QLabel`，但我有这个错误：

> 错误：未在此范围内声明“ui”

在函数中`filter_image()`。我想在进行一些处理之前和之后使用标签来显示图像。

主窗口.cpp

```
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include <cv.h>
#include <cxcore.h>
#include <highgui.h>
#include<QImage>
#include<QLabel>

static QImage IplImage2QImage(const IplImage *iplImage) {
    int height = iplImage->height;
    int width = iplImage->width;
    if  (iplImage->depth == IPL_DEPTH_8U && iplImage->nChannels == 3)
    {
        const uchar *qImageBuffer = (const uchar*)iplImage->imageData;
        QImage img(qImageBuffer, width, height, QImage::Format_RGB888);
        return img.rgbSwapped();
    }
    else if  (iplImage->depth == IPL_DEPTH_8U && iplImage->nChannels == 1)
    {
        const uchar *qImageBuffer = (const uchar*)iplImage->imageData;
        QImage img(qImageBuffer, width, height, QImage::Format_Indexed8);
        QVector<QRgb> colorTable;
        for (int i = 0; i < 256; i++)
        {
            colorTable.push_back(qRgb(i, i, i));
        }
        img.setColorTable(colorTable);
        return img;
    }
    else
    {
        std::cout << "Image cannot be converted.";
        return QImage();
    }
}

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
}

MainWindow::~MainWindow() {
    delete ui;
}

void MainWindow::changeEvent(QEvent *e)
{
    QMainWindow::changeEvent(e);
    switch (e->type()) {
    case QEvent::LanguageChange:
        ui->retranslateUi(this);
        break;
    default:
        break;
    }
}

void filter_image(IplImage* img) {
    IplImage* roi = cvCreateImage(cvGetSize(img), 8, 3);
    cvCvtColor( img, roi, CV_RGB2GRAY );
    cvSmooth(img,roi,CV_BLUR, 5, 0, 0, 0);
    cvThreshold(roi,roi,100,255,CV_THRESH_BINARY);
    IplImage *img_de = cvCloneImage(roi);
    QImage qt_i = IplImage2QImage(img_de);
    QLabel label_2;
    // display on label
    ui->label_2->setPixmap(QPixmap::fromImage(qt_i));//error line
    // resize the label to fit the image
    ui->label_2->resize(ui->label_2->pixmap()->size());
    label_2.show();
}

void MainWindow::on_actionOpen_triggered() {
    IplImage *frame = cvLoadImage(
        QFileDialog::getOpenFileName(this, 
                                     "Ouvrir un fichier", 
                                     "/../../Fichiers Image", 
                                     "Image (*.jpg *.bmp *.jpeg)")
                                     .toStdString().c_str(),3);
    IplImage *img_des = cvCloneImage(frame);
    QImage qt_im = IplImage2QImage(img_des);
    QLabel label;
    // display on label
    ui->label->setPixmap(QPixmap::fromImage(qt_im));
    // resize the label to fit the image
    ui->label->resize(ui->label->pixmap()->size());
    label.show();
    filter_image(frame);
} 
```

主窗口.h

```
namespace Ui {
    class MainWindow;
}

class MainWindow : public QMainWindow {
    Q_OBJECT

public:    
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

protected:
    void changeEvent(QEvent *e);

public:
    Ui::MainWindow *ui;

public slots:
    void on_actionOpen_triggered();    
}; 
```

ui_mainwindow.h

```
#include <QtCore/QVariant>

#include <QtGui/QAction>

#include <QtGui/QApplication>

#include <QtGui/QButtonGroup>

#include <QtGui/QHeaderView>

#include <QtGui/QLabel>

#include <QtGui/QMainWindow>

#include <QtGui/QMenu>

#include <QtGui/QMenuBar>

#include <QtGui/QStatusBar>

#include <QtGui/QToolBar>

#include <QtGui/QWidget>

QT_BEGIN_NAMESPACE

class Ui_MainWindow{

public:
QAction *actionOpen;
QWidget *centralWidget;
QLabel *label;
QLabel *label_2;
QMenuBar *menuBar;
QMenu *menuFile;
QToolBar *mainToolBar;
QStatusBar *statusBar;

void setupUi(QMainWindow *MainWindow)
{
    if (MainWindow->objectName().isEmpty())
        MainWindow->setObjectName(QString::fromUtf8("MainWindow"));
    MainWindow->resize(600, 400);
    actionOpen = new QAction(MainWindow);
    actionOpen->setObjectName(QString::fromUtf8("actionOpen"));
    centralWidget = new QWidget(MainWindow);
    centralWidget->setObjectName(QString::fromUtf8("centralWidget"));
    label = new QLabel(centralWidget);
    label->setObjectName(QString::fromUtf8("label"));
    label->setGeometry(QRect(290, 30, 271, 301));
    label_2 = new QLabel(centralWidget);
    label_2->setObjectName(QString::fromUtf8("label_2"));
    label_2->setGeometry(QRect(20, 20, 281, 331));
    MainWindow->setCentralWidget(centralWidget);
    menuBar = new QMenuBar(MainWindow);
    menuBar->setObjectName(QString::fromUtf8("menuBar"));
    menuBar->setGeometry(QRect(0, 0, 600, 21));
    menuFile = new QMenu(menuBar);
    menuFile->setObjectName(QString::fromUtf8("menuFile"));
    MainWindow->setMenuBar(menuBar);
    mainToolBar = new QToolBar(MainWindow);
    mainToolBar->setObjectName(QString::fromUtf8("mainToolBar"));
    MainWindow->addToolBar(Qt::TopToolBarArea, mainToolBar);
    statusBar = new QStatusBar(MainWindow);
    statusBar->setObjectName(QString::fromUtf8("statusBar"));
    MainWindow->setStatusBar(statusBar);

    menuBar->addAction(menuFile->menuAction());
    menuFile->addAction(actionOpen);

    retranslateUi(MainWindow);

    QMetaObject::connectSlotsByName(MainWindow);
} // setupUi

void retranslateUi(QMainWindow *MainWindow)
{
    MainWindow->setWindowTitle(QApplication::translate("MainWindow", "MainWindow", 0, QApplication::UnicodeUTF8));
    actionOpen->setText(QApplication::translate("MainWindow", "Open", 0, QApplication::UnicodeUTF8));
    label->setText(QString());
    label_2->setText(QString());
    menuFile->setTitle(QApplication::translate("MainWindow", "File", 0, QApplication::UnicodeUTF8));
} // retranslateUi};

namespace Ui {
class MainWindow: public Ui_MainWindow {};

} // namespace Ui 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T21:19:24.733

`filter_image`发生错误的方法不是 的类方法，`MainWindow`因此它无权访问`MainWindow`的成员（包括`ui`）。

你可以做几件事：如果有意义，就让它成为`MainWindow`课堂的一部分。或者，您可以将 ui 作为参数传递：

```
void filter_image(Ui::MainWindow* ui, /*other params*/){...} 
```

此外，您正在制作一个局部变量`label_2`，而不是从 gui 中获取一个。

# cakephp - cakephp 回声计数

> ID：10341260
> 
> 赞同：0
> 
> 时间：2012-04-26T20:51:32.827
> 
> 标签：cakephp

嗨，我有一个赞按钮，它用赞更新赞表字段类型。我想计算表中的点赞数，在我的控制器中，我有这个，

// 加载喜欢模型并检索喜欢和不喜欢的数量

```
 $this->loadModel('Like');

    $related_likes = $this->Like->find('count', array(
        'conditions' => array('uploadid' => $id)
    ));
    $this->set('likes', $related_likes);
    } 
```

我该如何回应我认为的喜欢的数量？

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T20:54:36.090

当您使用`set()`时，您定义的名称将成为视图中的变量。

在您看来：

```
echo $likes; 
```

# javascript - Valums 文件上传器：如何以 0 以外的 ID 开头？

> ID：10341270
> 
> 赞同：0
> 
> 时间：2012-04-26T20:52:12.190
> 
> 标签：javascript

我正在使用[Andrew Valums 的 Ajax 上传插件](http://valums.com/ajax-upload/)（[GitHub 链接](https://github.com/valums/file-uploader)）。这是其中的一些代码：

```
qq.getUniqueId = (function(){
    var id = 0;
    return function(){ return id++; };
})(); 
```

这是一个很长的故事，但我的情况是，在某些情况下，我希望`qq.getUniqueId`函数以 0 以外的 ID 开头。它仍然可以递增 1；它只需要从 0 以外的值开始。最好的方法是什么？

以下是创建测试环境的步骤：

1.  下载插件：http: [//github.com/valums/file-uploader/zipball/master](http://github.com/valums/file-uploader/zipball/master)

2.  解压缩并将“客户端”文件夹移动到 Web 服务器上。

3.  在文本编辑器中打开“demo.htm”文件，然后搜索`action: 'do-nothing.htm',`并添加`onComplete: function(id, fileName, responseJSON) {alert(id)},`。

4.  在网络浏览器中打开“demo.htm”文件。确保通过 Web 服务器访问它（而不是仅仅打开本地文件），否则它将无法工作。

5.  上传一个文件。上传完成后，它应该会提示“0”。看看你是否可以修改它，以便我可以传入不同的起始编号。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:55:02.077

尝试用调用原始函数但添加偏移量的函数替换该函数：

```
function offsetUniqueId(n) {
   var old = qq.getUniqueId;
   qq.getUniqueId = function() {
       return old() + n;
   }
} 
```

见[http://jsfiddle.net/alnitak/gWjqX/](http://jsfiddle.net/alnitak/gWjqX/)

# bash - 在 OS X 上从 zsh 切换到 bash，然后再切换回来？

> ID：10341271
> 
> 赞同：260
> 
> 时间：2012-04-26T20:52:23.513
> 
> 标签：bash, terminal, zsh

我正在学习在 Rails 中进行开发，并发现了`zsh`. 但是，对于我的其他一些任务，我希望使用 normal `bash`。

`bash`尽管它们是相同的，但我只是在某些情况下对布局感到满意。

如何来回切换，或打开`zsh`和关闭？

* * *

## 回答 #1

> 赞同：520
> 
> 时间：2012-04-26T20:58:41.070

你可以`exec`用一个新的 shell 替换你当前的 shell：

切换到`bash`：

```
exec bash 
```

切换到`zsh`：

```
exec zsh 
```

这不会影响新的终端窗口或任何东西，但它很方便。

* * *

## 回答 #2

> 赞同：189
> 
> 时间：2014-03-22T03:40:39.533

您可以尝试`chsh -s /bin/bash`将 设置`bash`为默认值，或`chsh -s /bin/zsh`将 设置`zsh`为默认值。

终端需要重启才能生效。

* * *

## 回答 #3

> 赞同：71
> 
> 时间：2014-10-24T21:46:42.220

我经常在 zsh 和 bash 之间切换。有一段时间，我曾经不得不在每次切换时获取我的 bash_profile。然后我发现你可以（通常）做

```
exec bash --login 
```

要不就

```
exec bash -l 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2019-03-20T20:54:12.853

如果只是临时开关

您可以使用 exec 如上所述，但更多的是永久解决方案。

您可以使用**chsh -s /bin/bash**（切换到 bash）和**chsh -s /bin/zsh**（切换到 zsh）

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2017-11-15T03:31:16.020

对于 Bash，请尝试

```
chsh -s $(which bash) 
```

对于 zsh，请尝试

```
chsh -s $(which zsh) 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-01-15T23:22:01.437

zsh 有一个内置命令`emulate`，可以通过设置适当的选项来模拟不同的 shell，尽管 csh 永远不会被完全模拟。

```
emulate bash
perform commands
emulate -R zsh 
```

-R 标志将所有选项恢复为该 shell 的默认值。

参见：[zsh 手册](http://zsh.sourceforge.net/Doc/Release/Shell-Builtin-Commands.html)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-05-16T12:28:38.613

在 Mac OS Catalina 中，默认的交互式 shell 是 zsh。要将 shell 从 bash 更改为 zsh：

```
chsh -s /bin/zsh 
```

然后你需要输入你的 Mac 密码。退出终端并重新打开它。要检查它是否已成功更改为 ssh，请发出以下命令。

```
echo $SHELL 
```

如果结果是 /bin/zsh，那么你的任务就完成了。

要将其更改回 bash，请在终端上发出以下命令。

```
chsh -s /bin/bash 
```

使用 再次验证它`echo $SHELL`。那么结果应该是/bin/bash。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-06-15T19:17:51.767

你可以只输入`bash`或者如果你总是想使用 bash：

关于“iTerm2”

*   转到首选项 > 配置文件 > 命令
*   从下拉列表中选择“命令”
*   类型`bash`

通过关闭 iTerm 进行测试并再次打开它

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-07-20T02:12:46.157

您应该能够`bash`在终端中键入以切换到 bash，然后键入`zsh`以切换到 zsh。至少对我有用。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-05-11T18:45:54.600

请按照以下步骤操作！

```
 chsh -s /bin/bash
   Restart terminal 
   check which shell is in use by echo $SHELL
   source .profile 
```

你和 Bash 一起回来了！！

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2018-01-11T16:19:53.690

您可以使用命令“bye”轻松切换回 bash

# iphone - MKPolygon 未绘制

> ID：10341274
> 
> 赞同：1
> 
> 时间：2012-04-26T20:52:38.473
> 
> 标签：iphone, mkmapview, mkoverlay

我试图在我的地图视图上绘制一个 MKPolygon（一个三角形），但它没有显示出来。我还画了一条线，它出现了，所以我不确定为什么三角形没有。以下是相关代码：

```
 CGPoint base = [mapView convertCoordinate:carLocation toPointToView:mapView];
            CGPoint pivot = [mapView convertCoordinate:locationToLookup toPointToView:mapView];
            MKPolygon *triangle = [self drawTriangle:pivot:base];
            [mapView removeOverlays:[mapView overlays]];
            [mapView addOverlay:line];
            [mapView addOverlay:triangle];

-(MKPolygon *) drawTriangle:(CGPoint) pivot:(CGPoint)base {
    if ((abs(pivot.x - base.x) >= 70) || abs(pivot.y - base.y) >= 70 )  {
        double triangleHeight = 30;
        double triangleWidth = 30;
        double triangleSide = sqrt(triangleWidth*triangleWidth/4+triangleHeight*triangleHeight);
        double openingAngle = asin( triangleWidth/2.0/triangleSide );
        double angle = atan2( pivot.y - base.y, pivot.x - base.x );

        CGPoint a;
        a.x = (int) (base.x + triangleSide*cos( angle + openingAngle));
        a.y = (int) (base.y + triangleSide*sin( angle + openingAngle));
        CGPoint b;
        b.x = (int) (base.x + triangleSide*cos( angle - openingAngle ));
        b.y = (int) (base.y + triangleSide*sin( angle - openingAngle ));

        MKMapPoint * mp = malloc(sizeof(MKMapPoint) * 3);
        MKMapPoint init;

        init.x = base.x;
        init.y = base.y;
        mp[0] = init;
        init.x = a.x;
        init.y = a.y;
        mp[1] = init;
        init.x = b.x;
        init.y = b.y;
        mp[2] = init;
        NSLog(@"base x: %f y: %f    a x: %f y: %f     b x: %f y :%f", base.x, base.y, a.x, a.y, b.x, b.y);
        MKPolygon* triangle = [MKPolygon polygonWithPoints:mp count:3];
        NSLog(@"inside");
        free(mp);
        return triangle;
    }
    NSLog(@"here");
    return nil;

}

- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id )overlay
{
    MKOverlayView* overlayView = nil;

    if (overlay == line) {
        NSLog(@"In line");
    MKPolylineView* mkov =  [[MKPolylineView alloc] initWithPolyline:overlay];
   // [mkov fillColor:[UIColor redColor]];
    mkov.fillColor = [UIColor redColor];
    mkov.strokeColor = [UIColor redColor];
    mkov.lineWidth = 3;  
    overlayView = mkov;

    return overlayView;
    } else {
        NSLog(@"In here");
        MKPolygonView *mkpv = [[MKPolygonView alloc] initWithPolygon:overlay];
        mkpv.fillColor = [UIColor blueColor];
        mkpv.strokeColor = [UIColor blueColor];
        mkpv.lineWidth = 3;
        overlayView = mkpv;
        return overlayView;
    }
} 
```

三角形的点似乎是正确的：（这里的一个测试：base x: 43.000000 y: 25.500000 ax: 50.000000 y: 58.000000 bx: 73.000000 y :38.000000），但是 viewForOverlay 永远不会被调用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:56:17.583

我通过将我的 CGPoints 转换回 CLLocationCoordinate2D 解决了这个问题，然后创建了三角形：

```
 init = [mapView convertPoint:base toCoordinateFromView:mapView];
    mp[0] = init;
    init = [mapView convertPoint:a toCoordinateFromView:mapView];
    mp[1] = init;
    init = [mapView convertPoint:b toCoordinateFromView:mapView];
    mp[2] = init;
    MKPolygon* triangle = [MKPolygon polygonWithCoordinates:mp count:3]; 
```

我不确定为什么它不适用于polygonWithPoints，但它适用于坐标。

# vim - 使用 Ctrl-A 递增十六进制数字时使 Vim 使用大写字母

> ID：10341276
> 
> 赞同：7
> 
> 时间：2012-04-26T20:53:09.897
> 
> 标签：vim

如果我使用`Ctrl`-`A`来增加（或`Ctrl`-`X`减少）十六进制数字，则生成的数字将用小写字母书写，除非原始数字中有大写字母。

例如，如果我增加 `0x009`，我得到 `0x00a`; 但如果我增加 `0xA09`，我得到 `0xA0A`。

我希望它默认使用大写字母。有谁知道如何做到这一点？还有人关心吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T22:06:29.227

一种棘手的方法：

```
:nnoremap <C-A> m'<C-A>vUgUTx`` 
```

解释：

```
m'         # Create a mark on digit to increment.
<C-A>      # Control-A
v          # Visual select current letter.
U          # Set visual selection (current letter) to uppercase.
gUTx       # Set to uppercase (gU) next movement: (Tx) from current position to previous 'x' letter.
``         # Go to position of previous mark. 
```

因此，这种方式会产生与 original 不同的行为`<C-A>`，例如，在这种情况下：

```
A hex number 0x0ba in lowercase.
      ^--- Cursor position 
```

将设置`0x0ba`，`0x0BB`但光标将返回到字母`n`from `number`，而不是将其位置设置为递增的数字。您可以使用标记来改变这种行为。我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-27T01:45:07.553

可以在十六进制常量前加上`0X`代替，`0x`以便让 Vim 在通过`Ctrl`+`A`和`Ctrl`+`X`命令添加或减去它们时使用大写字母。

这不是一个完美的解决方案，但通常更容易将受影响数字的前缀更改为 Vim 的喜好，增加或减少它，然后将前缀更改回来，而不是回忆如何以一般方式执行此操作。

# c# - 为什么 Powershell 不清除？

> ID：10341278
> 
> 赞同：0
> 
> 时间：2012-04-26T20:53:19.357
> 
> 标签：c#, powershell, office365, runspace

所以，我在第二次运行它后让我的函数生成它自己的数据时遇到了问题。第一次生成 GetUsers 命令时，如果我的用户名和密码正确，它将返回一个包含我的用户的数组列表。如果我再次运行它，无论我使用什么用户名或密码，它都会返回相同的用户。我确定我的代码很混乱，但我一直在搞乱它试图让它变得清晰。

至于一点背景，我认为自己是一个新手程序员，所以这个问题很可能是一些非常基本的问题。

谢谢！

```
 public ArrayList GetUsers(string user, string pass)
        {
            InitialSessionState iss = InitialSessionState.CreateDefault();

            iss.ImportPSModule(new[] { "MSOnline" });
            using (Runspace myRunSpace = RunspaceFactory.CreateRunspace(iss))
            {
              myRunSpace.Open();
              using (System.Management.Automation.PowerShell powershell = System.Management.Automation.PowerShell.Create())
              {
                  ArrayList available_users = new ArrayList();

                  //create Powershell runspace

                  powershell.Runspace = myRunSpace;

                  Command connect = new Command("Connect-MsolService");
                  System.Security.SecureString secureString = new System.Security.SecureString();
                  string myPassword = pass;
                  foreach (char c in myPassword)
                      secureString.AppendChar(c);

                  connect.Parameters.Add("Credential", new PSCredential(user, secureString));
                  powershell.Commands.AddCommand(connect);

                  Collection<PSObject> results = null;
                  results = powershell.Invoke();
                  powershell.Commands.Clear();

                  Command getuser = new Command("Get-MsolUser");
                  powershell.Commands.AddCommand(getuser);
                  results = null;

                  powershell.Stop();

                  results = powershell.Invoke();

                  foreach (PSObject item in results)
                  {
                      string userprincipalname = item.Properties["UserPrincipalName"].Value as string;
                      available_users.Add(userprincipalname);
                  }

                  powershell.Dispose();
                  myRunSpace.Dispose();

                  powershell.Runspace.Dispose();
                  powershell.Runspace.Close();
                  myRunSpace.Close();
                  return available_users;
              }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T21:23:58.443

您是否尝试过明确删除或清空 available_users 类型？我认为没有必要，但是...

# c# - 无法序列化第 3 方 COM 对象。即使包装为 DataMember

> ID：10341286
> 
> 赞同：-3
> 
> 时间：2012-04-26T20:53:48.133
> 
> 标签：c#, wcf, com

我希望将 COM 对象传递到我的 WCF 服务器，但是无论我尝试什么，我都会不断收到以下错误：

> 无法序列化类型“System.__ComObject”。考虑使用 DataContractAttribute 属性对其进行标记，并使用 DataMemberAttribute 属性标记您想要序列化的所有成员。有关其他支持的类型，请参阅 Microsoft .NET Framework 文档。

我试过了`ServiceKnownType`

```
[ServiceKnownType(typeof(ComClass))] 
```

我试过包装它

```
[DataContract]
public class receivedClass
{
  [DataMember]
  public ComClass controlClass { get; set; }
} 
```

是否可以对其进行序列化以便将其发送到我的 WCF？（我将其用于 IPC 程序）

哦，这是 COM 类是第三方生成的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T21:22:05.917

COM 对象基本上只是一个指向未管理内存的指针。它不能被 .NET 固有地序列化。但是，可以序列化对象的状态，在 WCF 服务中构造 COM 对象的新对象实例，然后恢复状态。表示自治信息的 com 对象的属性可以被序列化并传递给服务器。但是，如果对象是任何未管理对象（句柄、内存指针等）的包装器，则可能很难保存 COM 对象的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T21:08:47.653

为什么不尝试使用 Microsoft DLR 中附带的动态类型和 COM 绑定器。我认为这可以解决问题。这是一篇不错的帖子，您可能会发现它很有用。 [http://loosexaml.wordpress.com/2011/01/01/wcf-serialization-of-dlr-dynamic-types/](http://loosexaml.wordpress.com/2011/01/01/wcf-serialization-of-dlr-dynamic-types/)

# c++ - 映射最大有效插入

> ID：10341290
> 
> 赞同：0
> 
> 时间：2012-04-26T20:54:17.577
> 
> 标签：c++, map, insert

这是一些工作代码：

```
std::pair<typename std::map< time_t, T >::iterator, bool> ret;    
ret = prt_map->insert ( std::pair< time_t, T >( seconds , value ) );
if (ret.second == false) // exists
{
 ... update exising value
} 
```

我想将其升级为最高效率的插入代码，并提供一个提示以插入需要从 --prt_map->end(); 开始的插入代码；就像是：

```
 prt_map->insert ( --prt_map->end(), std::pair< time_t, T >( seconds , value ) ); 
```

但是这个插入函数 prototupe 不返回 std::pair 和 bool 来通知是否添加了值（检查是否存在并更新，如果是的话......如何解决这个问题以更新现有值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T21:11:36.317

a.insert(hint, t) 的后置条件是：

> a 包含一个与 t 的键相同的元素。a 的大小增加 1 或 0。

这应该是确定元素是否被插入的足够信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T21:12:56.193

如果键已经存在，第二个版本（就像第一个版本一样）不会更新值。您可以检查它是否确实已更新/插入：

```
std::map<time_t, T>::iterator ret = prt_map->insert(--prt_map->end(),
    std::make_pair(seconds, value));
if (*ret != value) {
   // the same key already exists, update value
   *ret = value;
} 
```

This assumes you have `operator!=()` defined on the value type

# c++ - 添加后如何在 30 秒内从链表中删除项目？

> ID：10341292
> 
> 赞同：1
> 
> 时间：2012-04-26T20:54:33.717
> 
> 标签：c++, list, data-structures, linked-list

添加后如何在 30 秒内从链表中删除项目？你有什么想法吗？这个问题是我面试时被问到的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T21:00:46.830

```
std::list<int> l;
l.push_back(42);
l.pop_back(); 
```

除非您的计算机速度**非常**慢，否则应该在 30 秒的时间限制内完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T21:05:36.830

当您说“在”时，您是指任何时间吗？或经过 30 秒。如果您试图使项目过期，那么您需要在某处放置一个计时器。

您可以创建一种在固定时间（到期）移动项目的队列。

您可以像垃圾收集器一样不断地排队，在这种情况下，删除将是不确定的。

或者您可以在项目本身上放置一个计时器，当您将项目添加到队列时启动，它会在时间到期时向列表发出信号。然后该列表可以删除该项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T21:05:16.003

我不确定“添加后 30 秒内”是什么意思，但我看到了两种可能性：

1.  您希望尽可能快地做到这一点 < 30 秒，在这种情况下，您可以简单地添加元素然后删除它：

    ```
    std::list<type> my_list;
    my_list.push_back(element);
    my_list.pop_back(); 
    ```

2.  您希望尽可能接近 30 秒，在这种情况下，您可以简单地添加元素，然后在 30 秒后将其删除：

    ```
    #include <unistd.h>

     // push back element here
    sleep(30);
     // pop back element here 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T21:04:35.770

首先，您需要能够为此测量时间。您可以使用 std::time(NULL) 并执行繁忙循环，直到所需时间过去，但这似乎不合适：首先，您在等待时使 CPU 工作，其次，您不能做很多有意义的任务，而你在等）。

下一个最好的事情是使用线程：您创建一个线程，该线程将等到经过的时间，然后从列表中删除元素，而另一个则执行一些有意义的工作。C++03 标准没有定义使用线程的通用方式（因此您需要查找正在使用的线程库的详细信息）。C++11 标准确实定义了自己的内存模型并提供线程库作为 atnadard 库 (STL) 的一部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T21:20:59.310

我会使用[信号](http://linux.die.net/man/7/signal)和[警报](http://linux.die.net/man/2/alarm)：

```
int popit();
signal(SIGALRM, popit);
std::list<int> l;
l.push_back(42);
alarm(30); 
```

弹出它：

```
popit(){
   l.pop_back();
} 
```

# java - 如何反序列化隐藏在 Java 中的 ServiceProvider 类对象后面？

> ID：10341294
> 
> 赞同：1
> 
> 时间：2012-04-26T20:54:54.483
> 
> 标签：java, serialization, deserialization, netbeans-platform

我们创建了一个构建逻辑电路的程序，并使用NetBeans 平台的**Lookup**和**ServiceProvider**机制将所有可用的逻辑元素放到 UI 面板上。

模型（MVC）有一个 BasicElement 类，它是所有元素的 ServiceProvider。这个类是公共的，它的包是公共导出的，并且 View 模块依赖于它。View 模块只知道这个 Model 模块。**当有人使用带有 @ServiceProvider注释**的一组元素添加新模块时，View 会将带有 Lookup 元素的新找到的元素加载到调色板中。然后用户可以将调色板中的元素添加到场景中，创建一些电路并保存（序列化）它们。

问题是当程序尝试打开保存的文件（反序列化元素）时出现异常。因为没有模块知道（依赖于）带有元素的模块（并且这些模块中的包不能公开导出）。元素仅被注释，足以让它们到达用户。

是否有可能**不**每次都**添加对具有****反序列化**元素的新模块的依赖。或者一般来说，有一种方法可以反序列化隐藏在 ServiceProvider 类后面的类对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:52:09.367

不久前我遇到了这个确切的问题。经过大量研究，我发现您可以更改 ObjectInputStream 使用的类加载器。请查看我关于详细说明我的解决方案的主题的博客文章。[http://www.pellissier.co.za/hermien/?p=179](http://www.pellissier.co.za/hermien/?p=179)

# javascript - 将多组数据加载到一个表中/在数据模型中创建子字段

> ID：10341299
> 
> 赞同：0
> 
> 时间：2012-04-26T20:55:30.320
> 
> 标签：javascript, extjs, extjs4, extjs-mvc

我正在尝试学习 Ext JS，因为我已经设置了一个项目，需要我了解它的一些基本部分，基本上我坚持以下几点：

我需要基于一个公共字段将两个 JSON 文件加载到同一个表中：

文件 1

```
{
    "data" : [{
        "id" : "12",
        "data" : {
            "field1" : "data 1-1",
            "field2" : "data 1-2",
        }
    },{
        "id" : "34",
        "data" : {
            "field1" : "data 2-1",
            "field2" : "data 2-2",
        }
    }]
} 
```

文件 2：

```
{
    "otherdata" : [{
        "id" : "12",
        "stuff" : {
            "var1" : "stuff 1-1",
            "var2" : "stuff 1-2",
        },
        "morestuff" : {
            "v1" : "more 1-1",
            "v2" : "more 1-2",
            "v3" : "more 1-3"
        }
    },{
        "id" : "34",
        "stuff" : {
            "var1" : "stuff 2-1",
            "var2" : "stuff 2-2",
        },
        "morestuff" : {
            "v1" : "more 2-1",
            "v2" : "more 2-2",
            "v3" : "more 2-3"
        }
    }]
} 
```

我想要将这些解析成这样的表：

```
|-----------------------------------------------------------------------------------
|    |        data         |          stuff        |           morestuff           |
|-----------------------------------------------------------------------------------
| id |  field1  |  field2  |    var1   |    var2   |    v1    |    v2    |    v3   |
|-----------------------------------------------------------------------------------
| 12 | data 1-1 | data 1-2 | stuff 1-1 | stuff 1-2 | more 1-1 | more 1-2 |more 1-3 |
| 34 | data 2-1 | data 2-2 | stuff 2-1 | stuff 2-2 | more 2-1 | more 2-2 |more 2-3 |
------------------------------------------------------------------------------------ 
```

我坚持的是以下几点：

如何加载**两个**JSON 文件**并将**它们与一个公共字段链接到一个**数据**存储中？

如何**在数据模型中创建字段和子字段？**（我可以创建单个字段，但不知道如何在这些字段中创建字段）

我的模型目前看起来像这样：

```
Ext.define('NS.model.Group', {
    extend: 'Ext.data.Model',
    fields: ['id','field1', 'field2', 'var1', 'var2', 'v1', 'v2', 'v3']
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T12:12:27.797

对于分组标题，请查看以下示例：[http ://dev.sencha.com/deploy/ext-4.0.0/examples/grid/group-header-grid.html](http://dev.sencha.com/deploy/ext-4.0.0/examples/grid/group-header-grid.html)

这将让您创建类似于您想要的标题（我认为）。

至于将两个数据存储合并到一个存储中 - 虽然在您的情况下是可能的，但我不推荐它（还）。您可以只对属于其他商店的列使用自定义渲染器函数。像这样的东西：

```
{ text: 'id', flex: 1, dataIndex: 'id' },
{ text: 'v1', flex: 1, dataIndex: 'id',  
  renderer: function(value) {   
    var st = Ext.getStore('Store2'),
        idx = st.findExact('id', value);
    if (idx >= 0)
      return st.getAt(idx).get('v1');
    else 
      return '-';
  }
}, 
```

# c# - 获取已连接 TcpClient 的远程端口

> ID：10341301
> 
> 赞同：4
> 
> 时间：2012-04-26T20:55:39.963
> 
> 标签：c#, .net, sockets, tcpclient

为了构建速率限制器，我需要能够区分通过同一网关路由的不同用户。因此，如果我有 100 个具有相同 IP 地址的客户端，我想通过它们与远程网关/主机/路由器上的关联端口来区分它们。

我可以通过以下方式轻松获得 IP：

```
string clientIPAddress = ((IPEndPoint)tcpClient.Client.RemoteEndPoint).Address.ToString(); 
```

是否有类似的方法来获取客户端的远程端口号？谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-26T20:58:36.290

```
var port = ((IPEndPoint)tcpClient.Client.RemoteEndPoint).Port 
```

参考：http: [//msdn.microsoft.com/en-us/library/system.net.ipendpoint.port.aspx](http://msdn.microsoft.com/en-us/library/system.net.ipendpoint.port.aspx)

HTH。

# django - 查找多次引用的 Django 模型（以及另一个复杂的查找）

> ID：10341302
> 
> 赞同：1
> 
> 时间：2012-04-26T20:55:43.187
> 
> 标签：django, django-models, django-queryset

我有两个模型：

联系人 - 有关发生在某个人身上的联系的信息 client - 有关在联系中引用的人的信息

我需要找到在联系中被引用 3 次或更多次的客户。为此，类似这样的工作。不确定这是执行此操作的最有效方法，但它是完成这项工作的一条线路，而我不必遍历客户端。

```
client.objects.all().annotate(c_count=Count('contacted_client')).filter(c_count__gte=3) 
```

现在它变得更难了。联系人有日期。

我需要及时找到在 5 周或更长时间内联系过的所有客户：“查找 Max(contact_date)-Min(contact_date) > 5 周内联系中引用的所有客户”。我尝试使用相同的方法，但不知道如何做到这一点。

基于每个客户端计算这个的逻辑是这样的：

```
min_date = contact.objects.filter(client=self).aggregate(Min('date'))['date__min']
max_date = contact.objects.filter(client=self).aggregate(Max('date'))['date__max']
    if (max_date - min_date).days > 5*7:
        return True
    else:
        return False 
```

但是，如果我为许多客户执行此检查，它就会变慢。

# css - 带有图像背景的提交按钮 - CSS

> ID：10341306
> 
> 赞同：1
> 
> 时间：2012-04-26T20:56:06.430
> 
> 标签：css, image, background, submit

我不知道为什么我的 CSS 不能与我的提交按钮一起使用。我错过了什么吗？

```
.searchREG {
   width: 184px; 
   height:175px; 
   float:left; 
   background: url('/admin/img/search.png') no-repeat;
}

 .searchREG:hover {
   background-position: 0 -175px no-repeat; 
   cursor:pointer
 }

 <input class="searchREG" type="submit" value="submit"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T21:03:25.803

你应该看看你的图片的url是否有问题。（究竟什么不起作用？）

尝试删除图片网址中的第一个斜杠。（遇到过一次）

```
background: url('admin/img/search.png') no-repeat; 
```

# delphi - Techart 中的线笔、线刷和楼梯

> ID：10341308
> 
> 赞同：0
> 
> 时间：2012-04-26T20:56:10.593
> 
> 标签：delphi, delphi-2007, teechart

我正在尝试使用线笔、线刷和楼梯，但在 Delphi 2007 中我在它们下面得到了一条红色波浪线。我想我忘了添加一个单元。我应该包括哪个单元。

我正在尝试从 teeoffice 演示复制 popupline 代码。谢谢。磷

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T06:31:14.243

The `LinePen`,`LineBrush` and `Stairs` are properties of `TCustomSeries` and descendants. They are defined in unit `Series`.

Just a comment on the red wavy lines (aka `Error Insight`). At times `Error Insight` is known to give false positives. It's better in more modern Delphi versions. Sometimes storing the project files, reopening the project or rebuilding the project makes those false positives vanish.

# asp.net - 找不到 EncryptOrDecryptData

> ID：10341315
> 
> 赞同：1
> 
> 时间：2012-04-26T20:56:24.700
> 
> 标签：asp.net, c#-4.0, membership

我必须更改运行 aspnet Membership 的应用程序的 MachineKey，所以据我所知，我将不得不更新用户的所有密码。我正在尝试以编程方式执行此操作，并在[此处找到以下代码](https://stackoverflow.com/questions/4091110/maintain-asp-net-membership-passwords-during-machine-key-change)

运行以下代码时

```
method = typeof(MachineKeySection).GetMethod("EncryptOrDecryptData", BindingFlags.Instance | BindingFlags.NonPublic);

byte[] stuff = (byte[])method.Invoke(section, new object[] { encodedPassword, null, 0, encodedPassword.Length, 0, false, false }); 
```

方法为空。

同样在该代码中，我无法修改 MachineKeySection，但我觉得我可以解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T07:32:26.080

您可以将“BindingFlags.Instance”更改为“BindingFlags.Static”并尝试一下。因为“EncryptOrDecryptData”是MachineKeySection类中的一个内部静态方法。

# c# - 为 Console.Write 加上前缀的推荐方法是什么？

> ID：10341318
> 
> 赞同：14
> 
> 时间：2012-04-26T20:56:30.360
> 
> 标签：c#, xamarin.ios

我正在寻找一种向每个 Console.Write[Line] 插入前缀（日期和时间）的方法。我正在寻找一种推荐的方法，就像改变输出的推荐方法是使用[Console.SetOut](http://msdn.microsoft.com/en-us/library/system.console.setout.aspx)一样。

我很清楚我可以执行 String.Format("{0} {1}", DateTime.Now, msg)，但我试图将其作为最后的手段。

问题是输出在运行时是可变的，默认的已经附加了当前时间。如果我将它附加到我的代码上，我将复制日期。

有这样的事吗？我正在使用 Monotouch，所以我只能使用为其编译的库。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-26T21:12:12.903

您需要[继承](http://msdn.microsoft.com/en-us/library/system.io.textwriter.aspx)自`System.IO.TextWrite`、提供`Encoding`和覆盖例如`WriteLine`和`Write`。`Console.Out`使用更改之前存储原件`Console.setOut(x)`。

这是一个完整的代码示例：

```
class PrefixedWriter : TextWriter
{
    private TextWriter originalOut;

    public PrefixedWriter()
    {
        originalOut = Console.Out;
    }

    public override Encoding Encoding
    {
        get { return new System.Text.ASCIIEncoding(); }
    }
    public override void WriteLine(string message)
    {
        originalOut.WriteLine(String.Format("{0} {1}", DateTime.Now, message));
    }
    public override void Write(string message)
    {
        originalOut.Write(String.Format("{0} {1}", DateTime.Now, message));
    }
}

class Program
{
    static void Main(string[] args)
    {
        Console.SetOut(new PrefixedWriter());
        Console.WriteLine("test 1 2 3");
        Console.ReadKey();
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-26T21:01:38.613

您可以将 Console 调用替换为您自己的类。

```
class MyConsole
{
   public static void WriteLine(string msg)
   {
      Console.Write(String.Format("{0} {1}", DateTime.Now, msg));
   }
} 
```

然后，当然，所有调用`Console.Write`成为`MyConsole.Write`。

您还可以更进一步，`Console`并`MyConsole`在所有代码文件中使用别名...

```
using Console = MyNamespace.MyConsole; 
```

# internet-explorer - 为什么 IE 不解析从 WCF 数据服务返回的 XML？

> ID：10341319
> 
> 赞同：10
> 
> 时间：2012-04-26T20:56:33.713
> 
> 标签：internet-explorer, wcf-data-services

我目前正在运行 IE8，并且正在使用 WCF 数据服务进行一些测试。当我在浏览器中调用我的一个集合时，我得到了

> “您正在查看包含经常更新内容的提要……”

消息并且不显示任何 XML，因为它必须不理解 Atom 内容元素。但是，我可以轻松地在 Chrome 中进行相同的 RESTful 调用，甚至可以使用 Fiddler 并很好地查看响应。

是否有某些原因 IE 无法解析从我的 WCF 数据服务返回的 XML，或者我可以更改设置以直接查看它？我显然有变通办法，所以这不是一个关键问题，但如果我必须使用 IE 来查看响应，它会有所帮助。

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-03T16:09:01.373

如果要在 IE8 中查看 XML，请单击

工具 > Internet 选项。

1.  **工具**> **Internet 选项。**
2.  选择**内容**选项卡
3.  在**提要和网页快讯**下，选择**设置**
4.  在“**高级**”部分下，取消选中**“打开 Feed 阅读视图”**

如果您现在查看 OData 页面，将不会显示提要查看器，但数据将以 XML 格式显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T18:47:40.893

IE 8 和 9 只是不支持显示 OData - Atom Pub 提要输出。在IE9中，提供了如下解释：

> Internet Explorer 不支持这种提要格式。
> 
> **支持的提要格式**
> 
> *   原子 0.3、1.0
> *   RSS 0.91, 0.92
> *   RSS 1.0
> *   RSS 2.0

但是，仍然有几种简单的方法可以查看 DataService RESTful 调用的输出：

1.  在 IE 中查看页面的源代码。猜猜那里的输出是什么！
2.  使用 Fiddler 检查响应。
3.  使用 Chrome 等其他浏览器，响应将直接在浏览器中输出。

也许 IE 10 将更好地支持显示和支持基于协议 (OData) 的提要，该协议 (OData) 由创建和拥有 IE 的人创建：Microsoft。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T21:04:53.477

确保你打电话

```
response.setCharacterEncoding("text/xml;charset=utf-8"); 
```

或等价物。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T19:24:26.553

您需要禁用提要阅读视图：http: [//blogs.msdn.com/b/darrenliu/archive/2011/01/26/turn-rss-feed-reading-view-off.aspx](http://blogs.msdn.com/b/darrenliu/archive/2011/01/26/turn-rss-feed-reading-view-off.aspx)。

我遇到了相反的问题，Chrome 不会再为我显示原始 XML（我发誓过去曾经如此）。

# database - paypal 现在付款并返回变量

> ID：10341325
> 
> 赞同：0
> 
> 时间：2012-04-26T20:57:08.153
> 
> 标签：database, paypal-ipn

我正在为我的网站制作一个 paypal 立即付款按钮，以添加可以使用的积分。

我了解立即购买和 ipn 的全部内容，但我想做的是，当用户完成付款时，IPN 应该有一种方法可以获取用户名，以便我可以将积分添加到数据库中。

有没有办法让用户名与交易一起发送以便它也被返回？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:43:33.930

**请不要依赖通知网址。**

您可以将字典对象中的“自定义”参数发送到[Paypal IPN Docs](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_IPNandPDTVariables "贝宝 IPN 文档")中列出的 paypal 。

```
paypal_dict = {
    "business": "yourpaypalemail@example.com",
    "amount": "10000000.00",
    "item_name": "name of the item",
    "invoice": "unique-invoice-id",
    "notify_url": "http://www.example.com/your-ipn-location/",
    "return_url": "http://www.example.com/your-return-location/",
    "cancel_return": "http://www.example.com/your-cancel-location/",
    "custom": request.user.username, #or you can use request.user.pk
} 
```

**“自定义”值将与交易一起保存在贝宝的服务器上以及您的 IPN 对象**中。这比在没有识别客户的情况下付款要好得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T21:15:30.853

在按钮参数中，将`notify_url`变量设置为最多 255 个字符的 URL。

`payment_status`PayPal 将使用 IPN 详细信息（ 、、`payment_date`等）向该 URL 发送 HTTP POST 。

创建按钮时，将参数添加到此 URL，例如[http://yourwebsite.com?username_for_credits=john%20doe](http://yourwebsite.com?username_for_credits=john%20doe) 。当 PayPal 将进行 IPN HTTP POST 时，您将获得您想要的用户名。

# ios - Xcode 4：我可以通过 AppleScript 获取当前活动文件的路径吗？

> ID：10341327
> 
> 赞同：7
> 
> 时间：2012-04-26T20:57:16.563
> 
> 标签：ios, macos, xcode4, applescript

我正在尝试编写一个自定义的 xcode4 行为来使用 Perforce 检查当前的活动文件。我知道我可以编写一个自定义行为以在击键时运行（例如，`F1`） ，获取它的路径，并尝试通过 Perforce 对其进行检查。

据我所知，AppleScript 是访问目标文档的最佳方式，因为它可以轻松导航 Xcode DOM。鉴于此，DOM 本身就是一个迷宫。

这可以做到吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T10:43:13.327

是的。

```
tell application "Xcode"
    set CurrentActiveDocument to document 1 whose name ends with (word -1 of (get name of   window 1))
    set WhatYouWant to path of CurrentActiveDocument
end tell 
```

# android - 当我们在 android 的可扩展列表视图中打开特定组时，GroupText 发生了变化

> ID：10341330
> 
> 赞同：1
> 
> 时间：2012-04-26T20:57:44.750
> 
> 标签：android, expandablelistview

我有一个问题，当我们单击特定组打开时，我的 grouptext 会自动更改。我无法找到这个问题的根源。请向我建议任何有关相同的解决方案。

![在此处输入图像描述](../Images/c322ad8b2daef64ba97b580121deba91.png)

打开后：

![在此处输入图像描述](../Images/07dc16e6b305144f5996f6e963251a02.png)

**代码（可扩展适配器）：**

```
public class ExpResearchListAdapter extends BaseExpandableListAdapter {
    // Sample data set. children[i] contains the children (String[]) for
    // groups[i].
    Context context;
    private String[] groups = { "Research by Brand", "Research by Category",
        "Research by Price" , "Research by Fuel Economy", "Recently Viewed"};
    GridView label;
    TextView groupText;
    String group;
    ImageView groupImg;
    //ArrayList<String> groups = new ArrayList<String>();
    ArrayList<Integer> groupImage = new ArrayList<Integer>();
    ArrayList<Integer> childElement = new ArrayList<Integer>();
    private Integer[][] children = { 
            { R.drawable.icon_1, R.drawable.icon_2, R.drawable.icon_3, R.drawable.icon_4, R.drawable.icon_5, R.drawable.icon_6, R.drawable.icon_7, R.drawable.icon_8, R.drawable.icon_9,
                R.drawable.icon_10, R.drawable.icon_11, R.drawable.icon_12, R.drawable.icon_13, R.drawable.icon_14, R.drawable.icon_15, R.drawable.icon_16, R.drawable.icon_17, R.drawable.icon_18,
                R.drawable.icon_19, R.drawable.icon_20, R.drawable.icon_21, R.drawable.icon_22, R.drawable.icon_23, R.drawable.icon_24, R.drawable.icon_25, R.drawable.icon_26, R.drawable.icon_27,
                R.drawable.icon_28, R.drawable.icon_29, R.drawable.icon_30, R.drawable.icon_31, R.drawable.icon_32, R.drawable.icon_33, R.drawable.icon_34, R.drawable.icon_35, R.drawable.icon_36,
                R.drawable.icon_37, R.drawable.icon_38, R.drawable.icon_39, R.drawable.icon_40, R.drawable.icon_41, R.drawable.icon_42, R.drawable.icon_43, R.drawable.icon_44, R.drawable.icon_45,
                R.drawable.icon_46} 
            };
    LinearLayout linear;

    public ExpResearchListAdapter(Context context, ArrayList<String> groups, ArrayList<Integer> groupImage, ArrayList<Integer> childElement, LinearLayout linear)
    {
        this.context=context;
        //this.groups = groups;
        this.groupImage = groupImage;
        this.childElement = childElement;
        this.linear = linear;
    }

    public Object getChild(int groupPosition, int childPosition) {
        return children[groupPosition][childPosition];
    }

    public long getChildId(int groupPosition, int childPosition) {
        return childPosition;
    }

    public int getChildrenCount(int groupPosition) {
        int i = 0;
        try {
        i = children[groupPosition].length;

        } catch (Exception e) {
        }

        return 1;
    }

    public View getChildView(int groupPosition, int childPosition,
        boolean isLastChild, View convertView, ViewGroup parent) {
        if(convertView==null)
        {
            LayoutInflater inflater = LayoutInflater.from(context);
            convertView = (View) inflater.inflate(R.layout.brand_research_grid, null);
            label = (GridView) convertView.findViewById(R.id.gv_ResearchList_Child);
            label.setAdapter(new GridAdapter(context, childElement));
            label.setCacheColorHint(Color.WHITE);

            // initialize the following variables (i've done it based on your layout
            // note: rowHeightDp is based on my grid_cell.xml, that is the height i've
            //    assigned to the items in the grid.
            //final int spacingDp = 20;
            final int colWidthDp = 50;
            final int rowHeightDp = (childElement.size()/3)*10;
            //final int rowHeightDp = 107;

            // convert the dp values to pixels
            //final float COL_WIDTH = context.getResources().getDisplayMetrics().density * colWidthDp;
            final float COL_WIDTH = 10;
            //final float ROW_HEIGHT = context.getResources().getDisplayMetrics().density * rowHeightDp;
            final float ROW_HEIGHT = 107f;
            final float SPACING = context.getResources().getDisplayMetrics().density * 0;
            System.out.println("===================================RowHeight"+ROW_HEIGHT);
            System.out.println("===================================RowHeightDP"+rowHeightDp);

            // calculate the column and row counts based on your display
            final int colCount = (int)Math.floor((linear.getWidth() - (2 * SPACING)) / (COL_WIDTH + SPACING));
            final int rowCount = (int)Math.ceil((childElement.size() + 0d) / 3);
            //final int rowCount = 16;

            // calculate the height for the current grid
            final int GRID_HEIGHT = Math.round(rowCount * (ROW_HEIGHT + SPACING));
            System.out.println("===================================GHieght"+GRID_HEIGHT);
            System.out.println("===================================colCount"+colCount);
            System.out.println("===================================rowCount"+rowCount);
            // set the height of the current grid
            label.getLayoutParams().height = GRID_HEIGHT;
        }

        return convertView;
    }

    public Object getGroup(int groupPosition) {
        //return groups.get(groupPosition);
        return groups[groupPosition];
    }

    public int getGroupCount() {
        return groups.length;
    }

    public long getGroupId(int groupPosition) {
        return groupPosition;
    }

    public View getGroupView(int groupPosition, boolean isExpanded,
        View convertView, ViewGroup parent) {

        if (convertView == null) {
            LayoutInflater infalInflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = infalInflater.inflate(
                    R.layout.research_list_exp_group, null);
            groupText = (TextView) convertView
                    .findViewById(R.id.tv_ResearchList_ExpParentElement);
            groupImg = (ImageView) convertView
                    .findViewById(R.id.img_ResearchList_GroupParentImage);
            group = (String) getGroup(groupPosition);
            // convertView.setClickable(false);
            groupText.setText(groups[groupPosition]);
            groupImg.setImageResource(groupImage.get(groupPosition));
        }

        return convertView;
    }

    public boolean isChildSelectable(int groupPosition, int childPosition) {
        return true;
    }

    public boolean hasStableIds() {
        return true;
    }

    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T23:31:06.657

问题是`getGroupView()`功能造成的，你用`convertView`错了。如果`convertView`为 null，则您正确地膨胀了布局并填充了视图。但是，如果它不为空，则您不会更改视图！该视图是一个循环视图 - 它是以前的组项目视图之一，但您不知道是哪一个！你也必须填写它。当您单击组项目时，内容将被重绘，并且所有视图都可能被回收。

你在`getChildView()`功能上有同样的问题。

查看[本](http://www.vogella.com/articles/AndroidListView/article.html)教程，尤其是示例 9.5。它展示了如何正确使用回收视图（以及如何使用持有人模式）。

请注意，您的代码中还有另一个问题 - 您试图`GridView`在`ListView`( `ExpandableListView`) 中使用。不要那样做！不要使用两个能够在另一个内部滚动的小部件。除非每个滚动视图都使用不同的轴进行滚动，否则不要这样做。

# ruby-on-rails - 有没有办法在 Rail 的命名路由中指定默认子域？

> ID：10341331
> 
> 赞同：1
> 
> 时间：2012-04-26T20:57:52.873
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, routing, subdomain

我正在使用我的 Rails 3.2 应用程序中的子域，其中 request.subdomain 是有意义的，用于填充 Account 资源。

我期望命名路由的默认行为是，无论我在哪个子域，命名路由总是在主机名之前使用“www”，除非我使用子域选项。

例如，如果我在[http://www.example.com/path/to/something](http://www.example.com/path/to/something)，以下是正确的：

```
root_url                          # http://www.example.com/
root_url(subdomain: 'subdomain')  # http://subdomain.example.com/ 
```

即使我没有确切地说是有道理的，如果我在[http://subdomain.example.com/path/to/something](http://subdomain.example.com/path/to/something)，情况如下：

```
root_url                          # http://subdomain.example.com/ 
```

这很好，但是我的许多控制器重定向和查看帮助程序链接都是针对我的子域约束之外的 url，它省略了“www”和“”。所以我真的不想在我的应用程序中使用 new_session_url(subdomain: 'www')、thing_url(subdomain: 'www') 等。

如果没有传入子域选项，不管当前子域是什么，有没有办法让命名路由默认为“www”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T19:04:50.433

使用以下内容包装路线：

```
defaults :subdomain => '' do
     routes
end 
```

# java - Tomcat 和 Web 服务

> ID：10341335
> 
> 赞同：0
> 
> 时间：2012-04-26T20:58:31.590
> 
> 标签：java, eclipse, web-services, tomcat, tomcat6

您好，我有一组用 JAVA 制作的 Web 服务，它们是使用 Eclipse 中的动态 Web 项目制作的。当我在 Eclipse 中运行 Tomcat 6 的实例并在服务器上部署项目时，它工作得很好，我能够找到 wsdl 文件并从 php 脚本访问它。

但是，当我将 Dynamic Web Proyect 导出为 WAR 文件并将其部署在真实 Tomcat 服务器内的 webapps 文件上并启动服务器时，我不知道如何找到 wsdl 文件或如何从我的 php 脚本中访问它，它只是不工作。

我需要做些什么才能让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T18:01:08.200

您应该尝试重新下载 Tomcat。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T19:18:56.460

如果您生成动态 wsdl，则 . 你可以在 URL 上找到它

[http://example.com/context/demo.wsdl](http://example.com/context/demo.wsdl)

如果您发布 web.xml 和其他相关的 xml 配置文件，将很容易回答您的问题。

# eclipse - OpenCV 中的代码中断

> ID：10341341
> 
> 赞同：1
> 
> 时间：2012-04-26T20:58:54.983
> 
> 标签：eclipse, ubuntu, opencv, computer-vision

我正在编写一个 opencv 代码来将我的矩阵从通道重塑为具有 3 列的单通道矩阵。

```
uchar* ptrimage=(uchar*)image->imageData;
    uchar* ptrZ=(uchar*)Z->imageData;

    for (int i=0;i<image->height;i++)
    {
        for(int j=0;j<image->width;j++)
        {

            for(int k=0;k<image->nChannels;k++)
            {
                cout<<i<<" "<<j<<" "<<" "<<k<<endl;
                (ptrZ+(j+i*image->width)*Z->widthStep)[k]=(ptrimage+i*image->widthStep)[3*j+k];

            }

        } 
```

Z 是我想要得到的新矩阵，其高度为 image->width*imgae->height 且宽度为 3。这在 j 的 7-8 次迭代后中断。请你帮我找出错误。

# c++ - 递归正弦函数

> ID：10341343
> 
> 赞同：3
> 
> 时间：2012-04-26T20:59:04.383
> 
> 标签：c++, function, recursion, trigonometry

我正在编写一个必须递归的正弦函数。我写了一个正弦函数，但不确定如何递归地执行它。有人可以解释如何开始这个吗？

这是我到目前为止所拥有的：

```
/*--------------------------------------------------------------
Name: sine( double X );

Return: Function "sine" will return the 
sine of X, where X is measured in radians.
--------------------------------------------------------------*/

double sine(double X)
{
  double result = 0;
  double term;
  int k;
  double lim;

  k = 0;
  lim = power(10, -8); 
  term = power(-1, k)*power(X, ((2*k) + 1)) / (factorial((2*k)+1));  
  result = term;
  while (absolute(term) > lim)  
  {
    k += 1;
    term = power(-1, k)*power(X, ((2*k) + 1)) / (factorial((2*k)+1));  
    result += term;
  }

  return result;
} 
```

编辑：我使用包装函数来解决这个问题。基本上创建了另一个名为

```
double sine_rec(double X, double k) 
```

并围绕当前代码进行更改以适应它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T21:04:12.313

我接近这个的方法是有另一个函数`sine(double X, int n)`，它接受另一个整数参数 - 幂级数近似中包含的项数。然后这个函数可以返回类似的东西`[nth term in series] + sine(X, n - 1)`（只要记住前面`if`处理 n = 1 的语句）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T21:03:21.637

`while`您可以通过以下方式通过递归消除循环：

```
double sine(double X, int k = 0)
{
  double result = 0;
  double term;
  double lim;

  lim = power(10, -8); 
  term = power(-1, k)*power(X, ((2*k) + 1)) / (factorial((2*k)+1));  
  if (absolute(term) > lim)  
  {
    return sine(X, k+1) + term; 
  }
  else
  {
    return term;
  }
} 
```

但我完全不建议这样做。（即使是这种递归也有更好的解决方案，但请自行查找）

# java - 使用 XStream 序列化为 XML 但未获取所有字段

> ID：10341344
> 
> 赞同：0
> 
> 时间：2012-04-26T20:59:05.553
> 
> 标签：java, xml, serialization, xstream

我有一个名为的类`Lookup`，它有两个属性：

```
public class Lookup {

    private String surveyName;
    private String GUID;    

    public Lookup(String name, String guid){
        this.surveyName = name;
        this.GUID = guid;   
    }

} 
```

在另一堂课中，我有一个`Lookup`我正在尝试序列化并保存到文件的列表。这就是我的做法：

```
List<Lookup> lookup = new ArrayList<Lookup>();
lookup.add(new Lookup("foo","bar"));
XStream serializer = new XStream();
serializer.alias("Lookups",List.class);
String xml = serializer.toXML(lookup); 
```

我最终得到的 XML 是：

```
<Lookups>
  <Lookup>
    <GUID>bar</GUID>
  </Lookup>
</Lookups> 
```

如您所见，它只序列化了 field`GUID`而不是序列化了 field `surveyName`。为什么它忽略了那个领域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:18:03.250

您确定没有在其他地方修改 Lookup 变量。这段代码运行良好

```
public class Test {
    public static void main(String[] args) {
        List<Lookup> lookup = new ArrayList<Lookup>();
        lookup.add(new Lookup("foo","bar"));
        XStream serializer = new XStream();
        serializer.alias("Lookups",List.class);
        String xml = serializer.toXML(lookup);
        System.out.println(xml);
    }
}
class Lookup {
    private String surveyName;
    private String GUID;    

    public Lookup(String name, String guid){
        this.surveyName = name;
        this.GUID = guid;   
    }
} 
```

输出：

```
<Lookups>
  <Lookup>
    <surveyName>foo</surveyName>
    <GUID>bar</GUID>
  </Lookup>
</Lookups> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T21:13:53.283

愚蠢的我，这个错误完全在我身上。该字段`name`接收到一个空字符串，因此 XStream 肯定忽略了它。

# jquery - jQuery改变按钮值

> ID：10341346
> 
> 赞同：-1
> 
> 时间：2012-04-26T20:59:11.553
> 
> 标签：jquery

我正在尝试重置按钮标签的文本。当用户单击按钮时，会进行 ajax 调用，然后将按钮的标题更改为响应消息（成功或失败），如果他们想要进行更多更改，我需要将其更改回 Save。现在它只停留在响应消息上

```
// SAVE NEW STUDENT DETAILS
  $('#save_student_detail_changes').live('click',function(){
    $('#save_student_detail_changes').text('Save');
    var changes ='&';
    // FIND ALL THE INPUT CHILDREN OF #STUDENT_DETAILS AND INSERT THE VALUE ATTRIBUTE AND THE COL ATTRIBUTE INTO THEIR OWN VARIABLES
     $('#student_details').find("input").each(function() { 
      var value = $(this).attr('value');// VARIABLE FOR VALUE ATTRIBUTE OF INPUT TAG
      var column = $(this).attr('col');// VARIABLE FOR COL ATTRIBUTE OF INPUT TAG
      changes += column + '=' + value + '&' ;// BUILDS THE AJAX QUERY STRING
      var lin = $(this).parent().attr('rel');// GET ID ATTRIBUTE DETAILS
      $(this).parent().attr('id',lin);// MAKE NEW ATTRIBUTE WITH DETAILS FROM ID ATTRIBUTE
      $(this).parent().removeAttr('rel');// REMOVE ID ATTRIBUTE
      $(this).replaceWith(value); // REPLACE INPUT ELEMENT WITH VALUE THAT WAS INSERTED

      });
      $(this) // AJAX CALL
        .html(ajax_load) // SHOW LOADING SPINNING WHEEL
        .load(loadUrl,"form_being_submitted=save_student_detail_changes"+changes);
      $(this).fadeOut(3000);// FADE OUT SAVE BUTTON 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T01:25:20.090

我最终使用了 .ajax() 方法。有更多的控制权。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# c - 查找连接到 /dev/input/eventX 的设备的描述

> ID：10341349
> 
> 赞同：1
> 
> 时间：2012-04-26T20:59:20.530
> 
> 标签：c, event-handling

我有一个正在监听某个事件文件句柄的程序。是否有我可以阅读的文件以获取有关我正在收听的特定事件设备的详细信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:09:23.933

假设 (a) 您在 Linux 上并且 (b) 您已`sysfs`安装（通常`/sys`在`/sys/class/input/eventX`. 这将是设备树的符号链接；这应该为您提供一些设备详细信息。例如：

```
$  readlink /sys/class/input/event4
../../devices/pci0000:00/0000:00:1d.0/usb2/2-1/2-1.4/2-1.4:1.1/input/input4/event4 
```

对于 USB 设备，您可能会挂载一个`usbfs`文件系统并查看该`devices`文件以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-26T05:31:46.670

您是否有权访问文件描述符或者这是一个外部程序？如果这是您对实际设备的 fd，则 ioctl 列表可为您提供所需的大部分信息。看看来自 evtest 的 print_device_info，它确实做到了：

[http://cgit.freedesktop.org/evtest/tree/evtest.c#n753](http://cgit.freedesktop.org/evtest/tree/evtest.c#n753)

# perl - 你能解释一下perl中的上下文相关变量赋值吗

> ID：10341353
> 
> 赞同：2
> 
> 时间：2012-04-26T20:59:46.180
> 
> 标签：perl, variables, syntax, variable-assignment

以下是 Perl 可以做的许多很酷的事情之一

```
my ($tmp) = ($_=~ /^>(.*)/); 
```

它在循环的当前行中找到模式 ^>.*，并将括号中的内容存储在 $tmp 变量中。

我很好奇的是这种语法背后的概念。这如何以及为什么（在什么前提下）起作用？我的理解是片段 $_=~ /^>(.*)/ 是布尔上下文，但括号将其呈现为列表上下文？但是为什么只有匹配模式中括号中的内容存储在变量中？！

这是我必须“记住”的变量赋值的某种特殊情况，还是可以完美解释？如果是这样，这个功能叫什么（名称如“autovivifacation？”）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T21:06:54.300

有两种赋值运算符：列表赋值和标量赋值。选择是根据“ `=`”的 LHS 确定的。[（这里](http://www.perlmonks.org/?node_id=790129)详细介绍了这两个运算符。）

* * *

在这种情况下，使用列表赋值运算符。列表赋值运算符在列表上下文中计算其两个操作数。

那么`$_=~ /^>(.*)/`在列表上下文中做什么呢？引用[perlop](http://perldoc.perl.org/perlop.html)：

> 如果`/g`未使用该选项，则`m//`在列表上下文中返回由模式中括号匹配的子表达式组成的列表，即 ( `$1`, `$2`, `$3`...) [...] 当模式中没有括号时，返回价值是`(1)`成功的清单。有或没有括号，失败时返回一个空列表。

换句话说，

```
my ($match) = $_ =~ /^>(.*)/; 
```

相当于

```
my $match;
if ($_ =~ /^>(.*)/) {
    $match = $1;
} else {
    $match = undef;
} 
```

* * *

如果省略括号 ( `my $tmp = ...;`)，则将使用标量赋值。标量赋值运算符在标量上下文中计算其两个操作数。

那么`$_=~ /^>(.*)/`在标量上下文中做什么呢？引用[perlop](http://perldoc.perl.org/perlop.html)：

> 如果成功则返回 true，如果失败则返回 false。

换句话说，

```
my $matched = $_ =~ /^>(.*)/; 
```

相当于

```
my $matched;
if ($_ =~ /^>(.*)/) {
    $matched = 1;   # !!1 if you want to be picky.
} else {
    $matched = 0;   # !!0 if you want to be picky.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T21:03:31.870

搜索模式中的括号使它成为一个“组”。返回的是`$_ =~ /regex/`所有匹配组的数组，因此`my ($tmp)`将第一个组抓取到 $tmp 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T21:08:14.933

All operations in perl have a return value, including assignment. Thats why you can do `$a=$b=1` and set `$a` to the result of `$b=1`.

You can use `=~` in a boolean (well, scalar) context, but that's just because it returns an empty list / undef if there's no match, and that evaluates to false. Calling it in an array context returns an array, just like other context-sensitive functions can do using the wantarray method to determine context.

# scala - Scala 集合：有安全的地图操作吗？

> ID：10341359
> 
> 赞同：2
> 
> 时间：2012-04-26T21:00:40.393
> 
> 标签：scala, scala-collections

假设我有一个列表（或地图中的值），并且我想对每个项目执行操作。但不幸的是，无论出于何种原因，这个值列表都可能包含空值。

```
scala> val players = List("Messi", null, "Xavi", "Iniesta", null)
players: List[java.lang.String] = List(Messi, null, Xavi, Iniesta, null) 
```

为了避免被 NPE 炸毁，我需要执行以下操作：

```
scala> players.filterNot(_ == null ).map(_.toUpperCase)
res84: List[java.lang.String] = List(MESSI, XAVI, INIESTA) 
```

有没有更好的方法来做到这一点？

理想情况下是这样的：

```
players.safeMap(_.toUpperCase) 
```

在[scala-language 邮件列表中](https://groups.google.com/forum/?fromgroups#!topic/scala-language/NPy-jkIo9sY)，Simon 提出了这个：

```
players.filter ( null !=).map(_.toUpperCase ) 
```

这是我最初拍摄的较短版本，并且在没有专用方法的情况下尽可能短。

更好的是，Stefan 和 Kevin 提出了 withFilter 方法，该方法将返回一个惰性代理，因此可以合并两个操作。

```
players.withFilter ( null !=).map(_.toUpperCase ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T21:08:08.260

如果您无法避免`null`s （例如，如果您从 Java 代码中获取列表），另一种选择是使用`collect`而不是`map`：

```
scala> players.collect { case player if player != null => player.toUpperCase }
res0: List[java.lang.String] = List(MESSI, XAVI, INIESTA) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T00:25:21.507

我会这样做：

```
players flatMap Option map (_.toUpperCase) 
```

但这比`collect`. `filter`+`map`总是更好地完成`collect`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T21:02:30.193

您可以转换为以下列表`Option[String]`：

```
scala> val optionPlayers = players.map(Option(_))
optionPlayers: List[Option[java.lang.String]] = List(Some(Messi), None, Some(Xavi), Some(Iniesta), None) 
```

`Option`是普遍首选的`null`，它在如何安全处理数据方面为您提供了很大的灵活性。以下是获得所需结果的简单方法：

```
scala> optionPlayers.collect { case Some(s) => s.toUpperCase }
res0: List[java.lang.String] = List(MESSI, XAVI, INIESTA)

scala> optionPlayers.flatMap(_.map(_.toUpperCase))
res1: List[java.lang.String] = List(MESSI, XAVI, INIESTA)

scala> optionPlayers.flatten.map(_.toUpperCase)
res2: List[java.lang.String] = List(MESSI, XAVI, INIESTA) 
```

`Option`您可以在其他 StackOverflow 问题中或通过搜索网络找到更多信息。

或者，您始终可以将`safeMap`所需的方法定义为隐式 on `List`：

```
implicit def enhanceList[T](list: List[T]) = new {
  def safeMap[R](f: T => R) = list.filterNot(_ == null).map(f)
} 
```

所以你可以这样做：

```
scala> players.safeMap(_.toUpperCase)
res4: List[java.lang.String] = List(MESSI, XAVI, INIESTA) 
```

虽然如果你定义一个隐式，你可能想要使用`CanBuildFrom`像基本集合一样的样式来使它不仅仅适用于`List`. 您可以在其他地方找到更多相关信息。

# android - 为什么 Canvas.drawVertices 在不传递 Paint 对象时会抛出空指针异常？

> ID：10341363
> 
> 赞同：0
> 
> 时间：2012-04-26T21:00:54.273
> 
> 标签：android, android-canvas

根据 [Canvas.drawVertices Javadoc](http://developer.android.com/reference/android/graphics/Canvas.html#drawVertices(android.graphics.Canvas.VertexMode, int, float[], int, float[ ], int, int[], int, short[], int, int, android.graphics.Paint))`null`作为 Paint传递是有效的，如果`texs`参数也是`null`.

> *paint* 指定 texs 数组非空时使用的着色器

当使用 for Paint 调用该`drawVertices`方法时`null`，这将导致空指针异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:06:22.590

因为在内部它调用

```
nativeDrawVertices(mNativeCanvas, mode.nativeInt, vertexCount, verts,
                   vertOffset, texs, texOffset, colors, colorOffset,
                  indices, indexOffset, indexCount, paint.mNativePaint); 
```

如果paint 为null ，`paint.mNativePaint`将导致NullPointerException。医生忘了告诉你这里的油漆不能为空:)

由于paint定义了线型等，因此不使用paint绘制顶点似乎也不合逻辑。并且文档没有说明`paint is optional`。

# php - PHP json_encode 转 JS

> ID：10341365
> 
> 赞同：0
> 
> 时间：2012-04-26T21:01:09.983
> 
> 标签：php, javascript, jquery, ajax

PHP json_encode 作为 AJAX var“结果”：

```
[{"id":"139","assettypeid":"3","name":"skin1","body":"skin1.jpg"}] 
```

我正在尝试访问每个属性，但我不能：

```
for (var i =0;i < result.length-1;i++)
{
  var item = result[i];
  console.log (item.id + item.name + item.body);
} 
```

我所看到的是：

```
NaN
NaN
NaN
NaN
NaN
NaN
NaN
NaN
NaN
... 
```

而且迭代太多了……正如您在上面的 JSON 中看到的，应该只有 4 个循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T21:16:50.317

你需要使用 JSON.parse

```
var items = JSON.parse(result) 
```

[http://www.json.org/js.html](http://www.json.org/js.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T21:10:49.517

**更新：**

我修改了答案以创建对 PHP 或 Ruby 等服务器端文件的 JSON 调用。如果您使用的是 jQuery，请尝试以下操作：

```
$.ajax({
    url: 'http://url-of-your-server-side.com/server-side-file-name.php',
    dataType: 'jsonp',
    jsonp: 'jsoncallback',
    success: function(data) {
        $.each(data, function(i,item){
            console.log (item.id + item.name + item.body);
        });
    error: function(){
        // execute upon failure
    } 
```

Data 是保存 ajax 请求提供的数组的变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T21:16:07.973

```
for(var item in result){
    console.log(item.id, item.name, item.body);
} 
```

# javascript - 按钮是否可以在不同的事件中更改其 onClick 信息

> ID：10341367
> 
> 赞同：0
> 
> 时间：2012-04-26T21:01:21.603
> 
> 标签：javascript, html, function, onclick, show-hide

我正在寻找一种 javascript，它允许图像/字符根据单击时所处的章节显示不同的信息。例如，在第一章中，我希望字符 A 显示信息 A。但在第 2 章中，我希望字符 A 显示信息 B。这是我拥有的当前代码：

HTML：

```
//Chapters/Events where characters move. Need info to change on chapter move
<a href="#" onclick= "chapter1();">1-prologue</a>
<a href="#" onclick= "chapter2();">2</a>
<a href="#" onclick= "chapter3();">3</a>

//Characters moving on map that are onClick buttons to show info
<a href="#">
<img id="tyrion-map" src="sm_tyrion.png" /></a>
<a href="#">
<img id="catelyn-map" src="purple-small.png" /></a>
<a href="#">
<img id="bran-map" src="yello-small.png" /></a> 
```

JS：

```
//tyrion
var tyrion = null;

//catelyn
var catelyn = null;

//bran
var bran = null;

function init(){

    "use strict"; 

    tyrion = document.getElementById("tyrion-map");
    tyrion.style.position= 'relative'; 
    tyrion.style.left = '50px';
    tyrion.style.top = '50px';

    catelyn = document.getElementById("catelyn-map");
    catelyn.style.position= 'relative'; 
    catelyn.style.left = '50px'; 
    catelyn.style.top = '50px';

    bran = document.getElementById("bran-map");
    bran.style.position= 'relative'; 
    bran.style.left = '50px'; 
    bran.style.top = '50px'; 
```

}

```
//Chapter 1- prologue
function chapter1() {

    "use strict"; 

    tyrion1();
    catelyn1();
    prologue1();
    dany1();
    bran1();
    jon1();
    eddard1();
    arya1();
    sansa1();
}   

//Chapter 2
function chapter2() {

    "use strict"; 

    tyrion2();
    catelyn2();
    dany1();
    bran2();
    jon2();
    eddard2();
    arya1();
    sansa1();
    prologue2();
}

//Chapter 3
function chapter3() {

    "use strict"; 

    tyrion3();
    catelyn1();
    dany1();
    bran3();
    jon3();
    eddard3();
    arya1();
    sansa1();
    prologue2();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:30:06.227

我不确定确切的上下文/章节内容，但看起来您可以控制更改章节并显示 onclick 章节。因此，当章节更改时，请设置一个变量，例如 on`chapter1()`

```
current_chapter = 1 
```

然后根据`current_chapter`与该章节相关的显示信息的值单击图像时。

# android - 尝试为调用 GET_CONTET 意图的应用程序提供图像

> ID：10341368
> 
> 赞同：3
> 
> 时间：2012-04-26T21:01:26.153
> 
> 标签：android, image, android-intent, uri

我一直在寻找解决方案，但我越来越沮丧。

我希望我的应用能够为其他应用提供内容。例如：使用 GoogleMail 应用程序时，您可以添加附件。将打开一个对话框，显示所有可以为附件提供文件的应用程序。我的应用程序已经在对话框中，因为我用这样的意图过滤器定义了一个活动：

```
 <intent-filter >
            <action android:name="android.intent.action.GET_CONTENT" />
            <action android:name="android.intent.action.PICK" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.OPENABLE" />
            <data android:mimeType="image/*" />
        </intent-filter> 
```

因此，当您选择我的应用程序时，它正在启动活动。该活动允许用户选择一张照片并将其写入 SD 卡。到目前为止，一切都很好。但是我该如何正确退货呢？因为 GoogleMail 中的附件永远不会生成。我以这种方式返回它：

```
if(file!=null)
{
  Intent resultIntent=new Intent();
  resultIntent.setType("image/jpg");  

  Uri uri=Uri.fromFile(file);

  //uri=Uri.parse(uri.toString().replace("file", "content"));
  resultIntent.putExtra(Intent.EXTRA_STREAM, uri); 
  resultIntent.putExtra(Intent.EXTRA_UID, uri); 
  resultIntent.setData(uri);
  setResult(RESULT_OK, resultIntent);
  finish();
} 
```

如果有人可以帮助我，我会非常高兴。我相信这是我做错的一件简单的事情，但我找不到任何可以帮助我的东西。:(

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:50:17.353

您可能需要实现一个流提供程序。那里确实没有任何好的指南，但这[是](http://developer.android.com/guide/topics/text/copy-paste.html#Streams)我能找到的最接近的指南。

# memory - 保留 SDRAM 的一部分在 U-Boot 和 Linux 内核之间传递数据

> ID：10341378
> 
> 赞同：8
> 
> 时间：2012-04-26T21:02:19.610
> 
> 标签：memory, linux-kernel, arm, embedded-linux, u-boot

如何保留 SDRAM 的一部分，比如 4 个字节，在 U-Boot 和 Linux 内核之间传递一个标志，以便链接器不会初始化这个保留的内存位置，并且在热启动后保留该值？我试图避免使用引导参数来最大限度地减少嵌入式应用程序中使用的 NAND 闪存的磨损。我的问题可以被认为是对以下解决方案的扩展： [如何在 ARM 处理器上检测冷启动与热启动？](https://stackoverflow.com/questions/3730464/how-to-detect-cold-boot-versus-warm-boot-on-an-arm-processor)

我已经使用下面的链接器脚本构建了 u-boot.lds 并使用：-fno-zero-initialized-in-bss 构建它但没有成功。

```
OUTPUT_FORMAT("elf32-littlearm", "elf32-littlearm", "elf32-littlearm")
OUTPUT_ARCH(arm)
ENTRY(_start)
SECTIONS
{
 . = 0x00000000;
 . = ALIGN(4);
 .text :
 {
  cpu/arm926ejs/start.o (.text)
  *(.text)
 }
 . = ALIGN(4);
 .rodata : { *(SORT_BY_ALIGNMENT(SORT_BY_NAME(.rodata*))) }
 . = ALIGN(4);
 .data : { *(.data) }
 . = ALIGN(4);
 .got : { *(.got) }
 . = .;
 __u_boot_cmd_start = .;
 .u_boot_cmd : { *(.u_boot_cmd) }
 __u_boot_cmd_end = .;
 . = ALIGN(4);
 __bss_start = .;
 _U_BOOT_FLAG = .;  . = . + 4;
 .bss (NOLOAD) : { *(.bss) . = ALIGN(4); }
 _end = .;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T20:38:16.167

已经有一种方法可以在 U-Boot 和 Linux ARM 内核之间传递数据。它被称为*ATAG*内存列表。可用内存区域和板卡信息等信息使用此数据列表从 U-Boot 传递到 Linux ARM 内核。您可以为您的数据定义一个自定义 ATAG。在 U-Boot 中，添加您的例程以在`lib_arm/armlinux.c`. 然后*ATAG*在 中处理`arch/arm/kernel/setup.c`。

有关文档，请参阅[此](http://www.simtec.co.uk/products/SWLINUX/files/booting_article.html#d0e428)或[此替代站点](http://bauhaus.ece.curtin.edu.au/~iain/CUB-Project/LH_Cub/Kwikbyte/More%20docs/Booting%20ARM%20Linux.pdf)的第 8 节。

**ADDENDUM**
引用的 ATAG 文档的链接很薄弱（即使 Google 也有一个错误的链接）。
尝试搜索文档的实际名称，即 Vincent Sanders 的“Booting ARM Linux”。
目前，在谷歌的 simtec 网站缓存中有一份副本，更广泛的搜索发现了[韩语](https://github.com/ygpark/Documentation/wiki/Booting-ARM-Linux)（？）的翻译。

Russel King 关于 ARM 启动的另一个或更早版本 (?)（但似乎已更新）是[here](https://www.kernel.org/doc/Documentation/arm/Booting)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T12:47:56.707

如果您想在[如何检测 ARM 处理器上的冷启动与热启动中采用全局变量方法？](https://stackoverflow.com/questions/3730464/how-to-detect-cold-boot-versus-warm-boot-on-an-arm-processor)：

您可以强制该全局变量位于特定的 ELF 部分（请参阅[http://gcc.gnu.org/onlinedocs/gcc-3.1/gcc/Variable-Attributes.html](http://gcc.gnu.org/onlinedocs/gcc-3.1/gcc/Variable-Attributes.html)），然后在链接器脚本中将该部分设置为一个特定的地址。

如果你有很好的 ld-script 技能，你甚至可以让链接器初始化除那个以外的所有 bss 部分:)

# ruby-on-rails - 在哪里声明具有共享部分形式的对象在 Rails 中？

> ID：10341381
> 
> 赞同：1
> 
> 时间：2012-04-26T21:02:28.157
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我有一个 text_area 表单来创建一个快速`Idea`对象。此表单出现在网站的许多部分，因此我将其作为`shared/_idea_form.html.haml`文件移动。

我目前在表单存在的每个控制器操作中定义新对象`@ideas = Idea.new`以使其工作。

是否有更方便/全局的方式定义`@ideas = Idea.new`每个动作的外部？即作为应用程序控制器中的 before_filter。我不确定这是否是正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:07:01.477

你可以直接放在视图中

```
 <%= form_for @idea ||= Idea.new do |f| %>
     #your text area
    <%end%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T21:10:14.200

如果您在大多数操作中都有它是的，那应该是一个好方法。如果是我在你的位置，我想我会打破规则，并且会部分地这样做......有时规则没有意义，这次就是其中之一。您只需要在每个页面上都有一个表单，因此您需要始终为表单创建一个新想法。或者在部分上执行此操作，或者只是在没有帮助的情况下创建表单。

只有一种意见:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T21:15:14.497

有很多选择：使用`decent_exposure`gem（[试试看](https://github.com/voxdolo/decent_exposure)，很酷！），使用`before_filter`s 设置 的值，在表单中`@idea`手动创建新`Idea`的，定义一些帮助程序，为表单提供准备好的`Idea`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T03:24:09.700

在**app/controllers/application_controller.rb**：

```
class ApplicationController < ActionController::Base
  before_filter :create_new_idea

  def create_new_idea
    @idea = Idea.new
  end
end 
```

这将`@idea`在每个请求上设置一个新对象。在某些情况下，您肯定不想`@idea`设置为新实例，甚至根本不想设置。在这种情况下，有多种选择，这里有一个：

```
class ApplicationController < ActionController::Base
  before_filter :create_new_idea, lambda {|controller| controller.set_new_idea?}

  def create_new_idea
    @idea = Idea.new
  end

  def set_new_idea?
    # this should be false in some case
  end
end 
```

# scala - 避免在scala中继承方法

> ID：10341385
> 
> 赞同：3
> 
> 时间：2012-04-26T21:02:46.710
> 
> 标签：scala, inheritance

下面的代码片段

```
class A {
   def foo = "A.foo"
}

trait B {
   def foo = "B.foo"
   def bar = "B.bar"
}

val x = new A with B 
```

不编译，因为

```
error: overriding method foo in class A of type => java.lang.String;
method foo in trait B of type => java.lang.String needs `override' modifier 
```

但是，我的意图是定义 x 以便：

```
x.foo => "A.foo"
x.bar => "B.par" 
```

也就是说，我只希望 x 从 B 继承 bar，而不是 foo。有没有办法在 scala 中实现这一目标？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-26T21:26:30.353

```
scala> val x = new A with B { override def foo = super[A].foo }
x: A with B = $anon$1@4822f558

scala> x.foo
res0: java.lang.String = A.foo

scala> x.bar
res1: java.lang.String = B.bar 
```

这显然不是你想要经常做的事情。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-26T21:08:40.483

由于您似乎并不是真的想`A with B`成为*a*，`B`而是想要访问 a 行为的子集`B`，这听起来像是组合优于继承的一个很好的例子：

```
class A(val b: B) {
   def foo = "A.foo"
   def bar = b.bar
}

class B {
   def foo = "B.foo"
   def bar = "B.bar"
}

val x = new A(new B)
x.foo => "A.foo"
x.bar => "B.bar" 
```

或者，如果您大部分时间都需要一个`A`但`B`有时需要能够调用`bar`它的方法，您可以使用隐式转换来实现：

```
class A {
  def foo = "A.foo"
}
class B {
  def foo = "B.foo"
  def bar = "B.bar"
}

implicit def a2b(a: A) = new B

val x = new A
x.foo => "A.foo"
x.bar => "B.bar" 
```

# sql - 多个搜索条件sql

> ID：10341394
> 
> 赞同：1
> 
> 时间：2012-04-26T21:03:28.033
> 
> 标签：sql, search, notin

是否有可能在sql中实现这样的东西？

```
ID!= {2,3} 
```

其中 ID 是一列。或者我必须使用多个 OR 语句？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T21:04:44.057

是的，`not in`：

```
ID not in (2,3) 
```

[你可以在这里](http://msdn.microsoft.com/en-us/library/ms177682.aspx)阅读更多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T04:22:07.077

你必须尝试

```
ID NOT IN (2,3) 
```

或者

```
ID <> 2 or ID <> 3 
```

# javascript - 使用 Perl 提取脚本类型 html/text

> ID：10341405
> 
> 赞同：1
> 
> 时间：2012-04-26T21:04:31.277
> 
> 标签：javascript, html, perl

我目前正在尝试提取脚本 type="text/html" 指向的页面。例如[，这个 CNN 链接](http://www.cnn.com/video/#/video/bestoftv/2012/04/24/nr-brooke-student-loans.cnn)在源代码中有一行：

```
<script type="text/html" id="pageTemplate"></script> 
```

我想下载 pageTemplate 的内容并能够解析结果。我一直在尝试使用 HTML::TagParser 并且能够获取元素 pageTemplate，但无法获取其内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T21:23:16.323

照原样，“pageTemplate”没有任何内容。据推测，那是因为它将被用作某些 html 的存储；“text/html”类型的脚本实际上并没有*做*任何事情。即，`<script>`像这样的一个未显示的 DOM 元素可以用于任何目的。

一种可能性：[http ://ejohn.org/blog/javascript-micro-template/](http://ejohn.org/blog/javascript-micro-templating/)

通过与 CNN 页面关联的 javascript 查看有关该 id 用途的线索。

# objective-c - "Missing context for method declaration" for overridden description method

> ID：10341408
> 
> 赞同：34
> 
> 时间：2012-04-26T21:04:38.903
> 
> 标签：objective-c

Am getting a "Missing context for method declaration" for my overridden description method. Can you tell what's wrong with the code?

```
#import <Foundation/Foundation.h>
#import "BNRItem.h"

int main(int argc, const char * argv[])
{

  @autoreleasepool {

      // Create a mutable array object, store its address in items variable
    NSMutableArray *items = [[NSMutableArray alloc]init];

    BNRItem *p = [[BNRItem alloc]init];
    NSLog(@"%@ %@ %@ %d", [p itemName], [p dateCreated], [p serialNumber], [p valueInDollars]);

    // This creates a new NSString, "Red Sofa" and gives it to the BNRItem
    [p setItemName:@"Red Sofa"];

    // This creates a new NSString, "A1B2C" and gives it to the BNRItem
    [p setSerialNumber:@"A1B2C"];

    // We send the value 100 to be used as the valueInDollars of this BNRItem
    [p setValueInDollars:100];

    // Destroy the array pointed to by items
    items = nil;

  }
    return 0;
}

-(NSString *)description // Missing context for method declaration
{
  NSString *descriptionString =
  [[NSString alloc]initWithFormat:@"%@ (%@): Worth $%d, recorded on %@",
   itemName;
   serialNumber;
   valueInDollars;
   dateCreated];

return descriptionString;

} 
```

BNRItem.m

```
#import "BNRItem.h"

@implementation BNRItem

-(void)setItemName:(NSString *)str {
  itemName = str;
}

-(NSString *)itemName {
  return itemName;
}

-(void)setSerialNumber:(NSString *)str {
  serialNumber = str;
}

-(NSString *)serialNumber {
  return serialNumber;
}

-(void)setValueInDollars:(int)i {
  valueInDollars = i;
}

-(int)valueInDollars {
  return valueInDollars;
}

-(NSDate *)dateCreated {
  return dateCreated;
}

-(NSString *)description
{
  NSString *descriptionString = 
  [[NSString alloc]initWithFormat:@"%@ (%@): Worth $%d, recorded on %@",
   itemName,
   serialNumber; // Expected "]"
   valueInDollars, // Expression result unused
   dateCreated]; //Extraneous "]" before ";"

  return descriptionString;
}

@end 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-04-26T21:17:49.610

Your method appears to be free floating inside `main.m`. An instance method needs to be placed inside the implementation section of a class. (between `@implementation` and `@end`).

My guess is that you should move that code into BNRItem.m.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-01T08:50:47.217

If you have something like a char at the veryfirst beginning of your Header oder .m file, its also likely that this error accures.

```
^//
//  EMServices.m
//  MyController
//
//  Created by EMart on 09.01.14.
//  Copyright (c) 2014 EMart. All rights reserved.
// 
```

# iphone - 如何将 iPhone 联系人拉入 UIWebView？

> ID：10341411
> 
> 赞同：1
> 
> 时间：2012-04-26T21:04:43.100
> 
> 标签：iphone, ios, ipad, uiwebview, webview

我正在尝试找到一种将 iPhone 本机联系人导入 UIWebView 页面的方法。用户应该能够点击 Web 视图上的按钮来拉出电话联系人列表，然后从该列表中选择一些联系人。一旦他们选择了联系人，UIWebView 必须显示所有选择的联系人（联系人信息可以是姓名、电话号码、电子邮件等）。

我读到了关于使用 UIWebViewDelegate 拦截从 UIWebView 发出的请求，它看起来很有希望从 UIWebView 到一些本机视图。但是如何将数据从本机视图带入 UIWebView？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T23:37:42.997

您可以查看使用 UIWebView`stringByEvaluatingJavaScriptFromString:(NSString *)script`将地址簿数据作为 JSON 字符串注入您的网页。

我认为对您来说最困难的部分是将所有地址簿数据提取到格式化的 JSON 字符串中。

# c# - 服务器端 HTML 到 PDF

> ID：10341416
> 
> 赞同：2
> 
> 时间：2012-04-26T21:05:04.303
> 
> 标签：c#, pdf, pdf-generation, server-side

我正在尝试找到一个 C# 库，它允许我将我的一个 HTML 页面“打印”到 PDF 文件。我似乎无法确定当前是否存在允许您执行此操作的方法。我发现了几个可以让您构建页面的方法，但没有注意到是否会仅基于 HTML 生成 pdf。

编辑：我不允许在工作中对此进行预算，因此它需要是开源/免费产品。如果不是，我知道 iTextSharp 并且必须以编程方式生成 pdf（这是我希望避免的 :)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T21:06:59.017

我对[ActivePDF WebGrabber](http://www.activepdf.com/products/serverproducts/webgrabber/)很幸运。与标准托管库（ActivePDF 是非托管的）相比，使用它有点奇怪，但它可以完成工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T21:17:36.200

我已经尝试过[itextsharp](http://sourceforge.net/projects/itextsharp/ "itextsharp")并且它适用于基本转换，但是当您进入样式和格式时会变得复杂。我还听说[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/ "wkhtmltopdf")是另一种选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T16:50:52.817

iTextSharp 附带一个小伙伴：[XML Worker](http://sourceforge.net/projects/itextsharp/files/xmlworker/)

如需演示，请查看[此处](http://demo.itextsupport.com/xmlworker/)

尽管[文档](http://demo.itextsupport.com/xmlworker/itextdoc/index.html)引用了 Java API，但对 C# 的改编应该很简单。

# regex - 从行/文件中提取所有匹配模式

> ID：10341417
> 
> 赞同：-2
> 
> 时间：2012-04-26T21:05:07.203
> 
> 标签：regex, perl

有没有一种简单的方法可以在不使用循环的情况下从行或文件中提取所有匹配模式到 Perl 数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:18:01.157

就像是

```
my @matches = ($line =~ /pattern/g); 
```

其中 $line 可以是您正在查看的行或文件的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T21:23:27.527

`/g`在列表上下文中使用。

```
@matches = $lines =~ /.../gm 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-27T12:03:21.373

此外，CPAN 上的 File::Slurp 是一次读取文件所有行的简便方法。

```
use File::Slurp;

my $text = read_file( 'filename' ) ; 
```

# asp.net - 使用下拉控件过滤 GridView 时遇到问题

> ID：10341420
> 
> 赞同：0
> 
> 时间：2012-04-26T21:05:19.080
> 
> 标签：asp.net, ado.net

我正在尝试使用下拉列表过滤网格视图，但似乎被选中的下拉列表值没有进入我的 SqlDataSource 控件。（我是 asp.net 的新手，这是我正在编写的教程。）

当我删除 SelectParameters 部分并将一个有效的 LastName 插入到 gridview 的 select 语句的 where 子句中时，我得到了一个过滤的 gridview，正如我所期望的那样，但是当我从下拉列表中选择一个名称时它不起作用。

这可能是VS版本的东西。我正在使用 VS 2010 (w/.Net 3.5)，本书使用 VS 2008。

编码：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="SqlDataSourceParameters_3.aspx.cs" Inherits="SqlDataSourceWizard" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>

    </div>
    <asp:SqlDataSource ID="CustomersDataSource" runat="server" 
        ConnectionString="<%$ ConnectionStrings:AdventureWorksConnectionString %>" 

        SelectCommand="SELECT [FirstName], [LastName], [EmailAddress], [ModifiedDate] FROM [Person].[Contact] WHERE ([LastName] = @LastName)">
        <SelectParameters>
            <asp:ControlParameter ControlID="DropDownList1" 
                Name="LastName" PropertyName="SelectedValue" Type="String" />
        </SelectParameters>
    </asp:SqlDataSource>
    <asp:GridView ID="CustomerGridView" runat="server" AutoGenerateColumns="False" 
        DataSourceID="CustomersDataSource" EnableModelValidation="True">
        <Columns>
            <asp:BoundField DataField="FirstName" HeaderText="FirstName" 
                SortExpression="FirstName" />
            <asp:BoundField DataField="LastName" HeaderText="LastName" 
                SortExpression="LastName" />
            <asp:BoundField DataField="EmailAddress" HeaderText="EmailAddress" 
                SortExpression="EmailAddress" />
            <asp:BoundField DataField="ModifiedDate" HeaderText="ModifiedDate" 
                SortExpression="ModifiedDate" />
        </Columns>
    </asp:GridView>
    <asp:SqlDataSource ID="StaffDataSource" runat="server" 
        ConnectionString="<%$ ConnectionStrings:AdventureWorksConnectionString2 %>" 
        SelectCommand="SELECT DISTINCT [LastName] FROM [Person].[Contact] ORDER BY 1"></asp:SqlDataSource>
    <asp:DropDownList ID="DropDownList1" runat="server" 
        DataSourceID="StaffDataSource" DataTextField="LastName" 
        DataValueField="LastName">
    </asp:DropDownList>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T22:10:16.460

也许我在这里遗漏了一些东西，但是是什么导致了回发？我没有看到按钮，也没有看到下拉菜单的 autopostback 属性设置为 true。您的代码是否在做某事（例如设置下拉菜单的默认值）？

# php - 比较哈希导致的问题

> ID：10341425
> 
> 赞同：0
> 
> 时间：2012-04-26T21:05:39.140
> 
> 标签：php, sql-server, hash

我有一个网站，我将用户名和哈希密码存储在一个表中。我正在尝试将此信息（用户名和哈希密码）与从我的登录站点传递的登录信息进行比较。不幸的是，这一直在崩溃。如果有人能指出我做错了什么的正确方向，我将不胜感激。下面是我用来检查登录的代码。这可能很简单，因为我对 php 还是很陌生。

```
<?php

$myServer = "server.domain.com";
$myUser = "readaccess"; 
$myPass = "password"; 
$myDB = "database";

        $dbhandle = mssql_connect($myServer, $myUser, $myPass)
            or die("Couldn't connect to SQL Server on $myServer");          

        $selected = mssql_select_db($myDB, $dbhandle)
            or die("Couldn't open database $myDB");

// username and password sent from form 
    $myusername=$_POST['myusername']; 
    $mypassword=$_POST['mypassword'];

//declare the SQL statement that will query the database
    $query = "SELECT password, salt ";
        $query. = "FROM dbo.members ";
        $query. = "WHERE username = '$myusername' ";

        $result = mssql_query($query)
            or die('A error occured: ' . mssql_get_last_message());

// SQL_num_row is counting table row
    $count=mssql_num_rows($result);         
    if($count) < 1) //no such user exists
    {
           header('Location: main_login.php');
    }

    $userData = mssql_fetch_array($result, MSSQL_ASSOC);
    $hash = hash('sha256', $userData['salt'] . hash('sha256', $mypassword) );

    if($hash != $userData['password']) //incorrect password
        {
           header('Location: main_login.php');
    }
    else {
    header('Location: index.php');
    }
  ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T19:20:58.437

我认为问题是这条线

```
$result = mssql_query($query)
        or die('A error occured: ' . mssql_get_last_message()); 
```

检查失败的正确方法是

```
$result = mssql_query($query, $dbhandle);
if(!$result)
    die('A error occured: ' . mssql_get_last_message()); 
```

请注意，这也适用于 mssql_connect 和 mssql_select_db 语句。请注意，您需要将数据库资源提供给 mssql_query 函数。

`.=`此外，如果您使用它们之间没有空格，大多数人会发现它更具可读性。我认为它不会产生解析错误，但是将空格排除在操作数之外是很有意义的。`$counter+ +;`（即使合法，你也不会这样做。）

请注意询问未来的问题，请始终包含您看到的任何错误消息，如果它引用行号，请在代码示例中指出该行。在这种情况下，我认为您的问题与散列或 sql 无关，因为它完全是解析/语法错误。

# jquery - 在 jquery 中找到父母的最快方法

> ID：10341427
> 
> 赞同：1
> 
> 时间：2012-04-26T21:06:01.683
> 
> 标签：jquery

我需要为具有“tableClass”类的表分配样式。我有以下标记。

```
<table border="0" cellpadding="0" cellspacing="0" class="tableClass">
  <tr>
    <td>
    <table border="0" cellpadding="0" cellspacing="0" class="tableClass"> <-- Need to add a style here
      <tr class="colheadrowclass">
        .. some markup here
      </tr>
      more markup
      <tr id="dataRow" class="datarowclass">
      </tr>
    </table>
    </td>
  </tr>
</table> 
```

从 开始`datarowclass`，我需要遍历该类的第一个表并`tableClass`为其添加样式。

这对我有用，但我想知道是否有更快的方法。

```
$(".datarowclass").parents("table").eq(0).css("hieght", "500px"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:10:23.747

以下内容应该可以帮助您：

```
$('.datarowclass').closest('table.tableClass').css("height", "500px"); 
```

它完全按照你提到的那样做：

1.  `datarowclass`选择带有类的元素。
2.  从它（在第 1 点中找到的元素）搜索到最接近`table`的`tableClass`类，
3.  更改第 2 点中找到的元素的样式。

**注意**：您在“ ”属性中有**错字**`height`（您将其拼错为“ `hieght`”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T21:08:34.130

尝试使用`.closest()`并摆脱`.eq(0)`.

```
$(".datarowclass").closest("table").css("hieght", "500px"); 
```

# c# - 找不到端点异常 - WCF Web 服务

> ID：10341428
> 
> 赞同：1
> 
> 时间：2012-04-26T21:06:04.643
> 
> 标签：c#, wcf, web-services, soap

我无法让双工 Web 服务正常工作，我收到此错误：

> 在 ServiceModel 客户端配置部分中找不到引用合同“IService1”的默认端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此协定匹配的端点元素。

这是我的单元测试尝试访问该服务时抛出的。我发现了类似的 SO 问题：

[找不到默认端点元素](https://stackoverflow.com/questions/352654/could-not-find-default-endpoint-element)

[WCF 错误 - 找不到引用合同“UserService.UserService”的默认端点元素](https://stackoverflow.com/questions/699644/wcf-error-could-not-find-default-endpoint-element-that-references-contract-us)

答案是“将配置文件包含到另一个项目中”，但这究竟是什么意思？

*   我是否将服务编译成 DLL 并包含它？
*   我是复制“system.serviceModel”中包含的所有内容还是其中的一个子集？
*   与端点有关吗？

**编辑**：配置文件

网页配置

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
      <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name ="svcbh">
          <serviceMetadata httpGetEnabled="False"/>
          <serviceDebug includeExceptionDetailInFaults="False"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <!--<serviceHostingEnvironment multipleSiteBindingsEnabled="true" />-->
    <services>
      <service name ="Test_Duplex.Service1" behaviorConfiguration ="svcbh" >
        <host>
          <baseAddresses>
            <add baseAddress = "http://localhost:3857/Service1.svc" />
          </baseAddresses>
        </host>
        <endpoint name ="duplexendpoint"
                  address =""
                  binding ="wsDualHttpBinding"
                  contract ="Test_Duplex.IService1"/>
        <endpoint name ="MetaDataTcpEndpoint"
                  address="mex"
                  binding="mexHttpBinding"
                  contract="IMetadataExchange"/>
      </service>
    </services>
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

输出配置

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <system.serviceModel>
        <bindings>
            <wsDualHttpBinding>
                <binding name="duplexendpoint" closeTimeout="00:01:00"      openTimeout="00:01:00"
                    receiveTimeout="00:10:00" sendTimeout="00:01:00" bypassProxyOnLocal="false"
                    transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8"   useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <reliableSession ordered="true" inactivityTimeout="00:10:00" />
                    <security mode="Message">
                        <message clientCredentialType="Windows" negotiateServiceCredential="true"
                            algorithmSuite="Default" />
                    </security>
                </binding>
            </wsDualHttpBinding>
        </bindings>
        <client>
             <endpoint address="http://localhost:3857/Service1.svc" binding="wsDualHttpBinding"
                bindingConfiguration="duplexendpoint" contract="Test_Duplex.IService1"
                name="duplexendpoint">
                <identity>
                    <userPrincipalName value="12680@altus.local" />
                </identity>
            </endpoint>
        </client>
    </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:12:36.167

这是配置文件的问题。当它生成配置文件时，它没有完全指定类型的命名空间。通常，您只需要`<Namespace>.IService1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T22:19:50.377

我将**wsdl**生成的文件（Service1.svc、output.config）切换为**服务引用**，并从那里获取了我的类定义。你也可以看到[教程](http://beyondrelational.com/modules/2/blogs/48/posts/10054/a-simple-duplex-service-in-wcf.aspx)这样做。

自从我的老板教我用命令提示符做这件事后，它一定是从我头上滑过。

这修复了“找不到端点”错误。

# c++ - 物体会被杀死正确地破坏吗？

> ID：10341430
> 
> 赞同：2
> 
> 时间：2012-04-26T21:06:20.417
> 
> 标签：c++, linux, unix, object

下面，子进程创建对象。它使用信号在一段时间后杀死自己：

```
#include <unistd.h>
#include <signal.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <stdlib.h>
#include <iostream>
using namespace std;

class Wut{
public:
  Wut(){cout<<"obj being created" << endl;}
  ~Wut(){cout<<"obj being destroyeed" << endl;} 
};

void alarmHandler(){
   cout << "Alarm! Forcing child to kill itself" << endl;
   kill(getpid(), SIGKILL);
}

int main(int argc, char* argv[]){
   int status;
   pid_t pid;
   if((pid = fork()) == 0){
      Wut hi;
      signal(SIGALRM, (sighandler_t)alarmHandler);
      alarm(1);
      alarm(7);
      sleep(10);
      cout << "this will not get printed" << endl;
   } else {
      wait(&status);
      cout << "Parent dies" << endl;
   }
   sleep(10);
   return 0;
} 
```

但我不确定它创建的对象是否被正确销毁，因为它从不调用析构函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T21:10:20.483

KILL 信号实际上并没有发送到进程；这是操作系统强制停止程序执行的信号。这意味着不会调用析构函数。

使用类似于`SIGTERM`查看预期行为的信号：

```
kill(getpid(), SIGTERM); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T21:10:12.520

Unix进程无法`SIGKILL`以任何方式处理。你的过程马上就死了。如果您想要一个优雅的退出，请查看`SIGTERM`. 然后，您可以注册一个处理程序来执行您需要的任何清理工作。

您可以使用处理程序将程序置于正常退出的状态（例如，通过设置标志等），允许析构函数运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T21:12:30.663

`SIGKILL`（在大多数情况下）与 相同`kill -9`，因此分配给该进程的所有内存都由操作系统回收。

# php - 使用 JQuery/AJAX 从 PHP 文件中获取变量

> ID：10341434
> 
> 赞同：12
> 
> 时间：2012-04-26T21:06:48.450
> 
> 标签：php, jquery, html, ajax

这是我在这里的第一篇文章，我希望有人能够帮助我。在过去的一周里，我一直在做我的一个项目。显然，我坚持最后一部分。
所以基本上，我有一个 AJAX 聊天，当我提交一行时，我发送（使用 Post 方法）要分析的整行（到一个名为 analysis.php 的文件）。
正在分析聊天行，并通过对 MySql 数据库进行查询来找到我需要的变量。
我现在需要的就是使用 JQuery-AJAX 获取这个变量并将其放在我的 html 文件中的一个 div 上（这样它就可以显示在聊天的左右两边）。

这是我的文件：
**analysis.php**

```
<?php
$advert = $row[adverts];
?> 
```

**ajax-chat.html**

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>AJAX Chat</title>

<link rel="stylesheet" type="text/css" href="js/jScrollPane/jScrollPane.css" />
<link rel="stylesheet" type="text/css" href="css/page.css" />
<link rel="stylesheet" type="text/css" href="css/chat.css" />

</head>

<body>

<div id="chatContainer">

    <div id="chatTopBar" class="rounded"></div>
    <div id="chatLineHolder"></div>

    <div id="chatUsers" class="rounded"></div>
    <div id="chatBottomBar" class="rounded">
        <div class="tip"></div>

        <form id="loginForm" method="post" action="">
            <input id="name" name="name" class="rounded" maxlength="16" />
            <input id="email" name="email" class="rounded" />
            <input type="submit" class="blueButton" value="Login" />
        </form>

        <form id="submitForm" method="post" action="">
            <input id="chatText" name="chatText" class="rounded" maxlength="255" />
            <input type="submit" class="blueButton" value="Submit" />
        </form>

    </div>

</div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script src="js/jScrollPane/jquery.mousewheel.js"></script>
<script src="js/jScrollPane/jScrollPane.min.js"></script>
<script src="js/script.js"></script>
</body>
</html> 
```

所以，我基本上是试图从 analysis.php 文件中获取 $advert（在整个分析完成之后），并通过使用 JQuery/AJAX 最终将它传递给 ajax-chat.html 文件。非常感谢任何帮助。我已经用谷歌搜索了所有内容，但没有找到可以帮助我的东西。提前致谢。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-26T21:13:05.213

如果我理解正确，您需要使用 JSON。这是一个示例。

在你的 PHP 中写：

```
<?php
// filename: myAjaxFile.php
// some PHP
    $advert = array(
        'ajax' => 'Hello world!',
        'advert' => $row['adverts'],
     );
    echo json_encode($advert);
?> 
```

然后，如果您使用的是 jQuery，只需编写：

```
 $.ajax({
        url : 'myAjaxFile.php',
        type : 'POST',
        data : data,
        dataType : 'json',
        success : function (result) {
           alert(result['ajax']); // "Hello world!" alerted
           console.log(result['advert']) // The value of your php $row['adverts'] will be displayed
        },
        error : function () {
           alert("error");
        }
    }) 
```

就这样。这是 JSON - 它用于在服务器和用户之间发送变量、数组、对象等。更多信息在这里： http: [//www.json.org/](http://www.json.org/)。:)

# iphone - 如何使用objective-C在外部数据库中插入记录

> ID：10341442
> 
> 赞同：0
> 
> 时间：2012-04-26T21:07:03.590
> 
> 标签：iphone, mysql, xcode, insert

我有一个问题，想做一个应用程序在外部数据库中插入记录，但不起作用。有人帮助我吗？这是我的 xCode 代码：

```
-(IBAction)enviar:(id)sender
{
    NSString *url = [NSString stringWithFormat:@"http://192.168.1.37/mysql_iphone/insertar_alumno.php?nombre=%@&poblacion=%@",cajaNombre.text,cajaPoblacion.text];
    NSData *dataUrl = [NSData dataWithContentsOfURL:[NSURL URLWithString:url]];

    NSString *strResult = [[NSString alloc] initWithData:dataUrl encoding:NSUTF8StringEncoding];
    NSLog(@"%@",strResult);
} 
```

这是我的php代码

```
 <?php
   //Credenciales de la BBDD
   $db = "iphone";
   $host = 'localhost';
   $username = "dpbataller";
   $password = '1234';

   //Conectamos al servidor de la Base de datos
   $link = mysql_connect($host,$username,$password) or die("No se puede conectar");
   //Seleccionamos la BBDD
   @mysql_select_db($db) or die ("No se ha podido seleccionar a la base de datos");

   //Creamos un array para almacenar los resultados
   $arr = array();

   //Recogemos los valores
   //$nombre = $_POST['nombre'];
   //$poblacion = $_POST['poblacion'];
   //Lanzamos la consulta
   $consulta = mysql_query("INSERT INTO alumnos (id,nombre,poblacion)  VALUES  ('','$_POST[nombre]','$_POST[poblacion]')";

   ?> 
```

这是 Xcode 控制台的消息：

```
2012-04-26 23:04:44.981 parse[902:f803] <br />
<b>Parse error</b>:  syntax error, unexpected ';' in     <b>/Applications/XAMPP/xamppfiles/htdocs/mysql_iphone/insertar_alumno.php</b> on line <b>21</b><br /> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-31T14:49:12.777

$consulta = mysql_query("INSERT INTO alumnos (id,nombre,poblacion) VALUES ('','$_POST['nombre']','$_POST['poblacion']')";

# c# - 枚举代 码隐藏中的 MVC 模型验证错误列表

> ID：10341444
> 
> 赞同：1
> 
> 时间：2012-04-26T21:07:19.073
> 
> 标签：c#, asp.net-mvc, validation

在 MVC 3 中，是否有一种机制允许在返回结果视图之前枚举所有验证错误？

例如：

```
if (!ModelState.IsValid)
{
    //Enumerate validation errors
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T21:08:43.650

### 描述

您可以遍历 ModelStateValues 集合

### 样本

```
if (!ModelState.IsValid)
{
    foreach (ModelState modelState in ModelState.Values) {
        foreach (ModelError error in modelState.Errors) {
            // error.ErrorMessage contains the error message
        }
    }
} 
```

### 更多信息

*   [MSDN - ModelState.Value 属性](http://msdn.microsoft.com/en-us/library/system.web.mvc.modelstate.value.aspx)

# jquery - Cake php中的JQuery验证问题

> ID：10341446
> 
> 赞同：0
> 
> 时间：2012-04-26T21:07:22.370
> 
> 标签：jquery, cakephp

我在 Cakephp 中使用 JQuery 验证注册表单。

required(validate[required]) 是唯一有效的验证。其他（如最小字段大小、确认密码等）不起作用。

我添加了以下 jQuery 文件：

```
echo $this->Html->script(array('jquery.validationEngine', 'jquery.validationEngine-en'));
echo $this->Html->css('validationEngine.jquery');
echo $javascript->codeBlock('jQuery(document).ready(function(){ jQuery("#regId").validationEngine(); });');
echo $this->Html->script(array('jquery.min', 'ddaccordion', 'edit_ddaccordion')); 
```

# php - preg 匹配或 preg 替换以格式化段落中的链接

> ID：10341447
> 
> 赞同：1
> 
> 时间：2012-04-26T21:07:30.967
> 
> 标签：php, preg-replace, preg-match

有没有办法使用 preg_match 或 preg_replace 扫描段落并用链接替换每个模式？

例子：

```
... [keyword][http://mysite.com/keyword/] ... [another-keyword][http://mysite.com/another-keyword] ... 
```

如下：

```
... &lt;a href="http://mysite.com/keyword/"&gt;keyword&lt;/a&gt; ... &lt;a href="http://mysite.com/another-keyword/"&gt;another-keyword&lt;/a&gt; ... 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:45:00.947

就像是：

```
preg_replace('/\[([^\]]+)\]\[(https?:[^\]"]+)\]/i','<a href="$2">$1</a>',$string); 
```

它假定所有链接都以 http: 或 https: 开头，并且它们不包含任何双引号。在尝试提出这些模式时，[http://regexpal.com/是一个不错的工具。](http://regexpal.com/)

但是，如果您对这些标签有任何控制权，我真的建议您使用现有的标签方案，如 bbcode，而不是自己发明。有很多用于解析 bbcode 的现有代码，它会比你能想出的任何东西都更加健壮和经过良好测试。你能相信你试图解析的字符串的来源吗？很容易搞砸并造成令人讨厌的安全问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T21:45:55.920

只需使用`preg_replace_callback()`：

```
$out = preg_replace_callback('!\[([^\[\]]+)\]\[([^\[\]]+)\]!', 'callback', $in);

function callback($m){
    return "<a href=\"$m[2]\">$m[1]</a>";
} 
```

# ruby-on-rails - Rails：ActiveModel 的数据类型 - 与 PostgreSQL

> ID：10341448
> 
> 赞同：1
> 
> 时间：2012-04-26T21:07:37.783
> 
> 标签：ruby-on-rails, postgresql, activemodel

我正在使用这个命令来创建一个模型类“Listing”。但是，我有兴趣了解模型的数据类型与底层数据库的数据类型之间的关系。在这种情况下，它是 PostgreSQL。所以当我输入这个命令时：

```
rails generate scaffold Listing name:string 
```

我想知道可以用来描述类型的可能值是什么。这取决于什么？底层数据库？如果是这样，那么如果基础数据库稍后更改会发生什么？另外，我在哪里可以获得我可以在此处使用的类型的列表以及它们在 PostgreSQL 的基础数据库中的容量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T21:18:22.120

该命令实际上创建了用于在数据库上创建表等的迁移，因此您应该检查支持的类型。我会在这里复制/粘贴，但我认为没有必要。

[http://guides.rubyonrails.org/migrations.html#supported-types](http://guides.rubyonrails.org/migrations.html#supported-types)

**更新**

文档的链接不再包含该信息。转到这个问题[Rails 4: List of available datatypes](https://stackoverflow.com/questions/17918117/rails-4-datatypes/17918118#17918118) for the full list

# ruby-on-rails - Rails - 加入查询困难

> ID：10341449
> 
> 赞同：1
> 
> 时间：2012-04-26T21:07:44.550
> 
> 标签：ruby-on-rails, activerecord, join

我有两个基本模型：**Stadium**和**Owner**

这两个模型之间的关系是：

**体育场**：_

```
belongs_to :owner 
```

**业主**：_

```
has_many :stadiums 
```

这里的问题是，所有者还关联了类别，这就是**owner_category**模型的用武之地。

**业主**：_

```
has_and_belongs_to_many :owner_categories,
                          :join_table => 'l_owners_owner_categories', 
```

和**所有者类别**：

```
has_and_belongs_to_many :owners, :join_table => 'l_owners_owner_categories' 
```

基本上，

OwnerCategory 表如下所示：

```
id,name
1,sport
2,kids 
```

所以，我的问题是：

鉴于我让用户选择一个**城市**和一个**类别**，我将如何从**所有者**拥有给定**类别**的那个城市获得所有**体育场**？

 ****例如：

如果我有以下体育场：

```
id,name,city,owner_id
1,'soccer stadium','New York',5
2,'music stadium','New York',4
2,'music stadium','San Francisco',4 
```

以下业主：

```
id,name
4, 'John'
5, 'Peter' 
```

以下 OwnersCategories 表：

```
id,name,description
1,'sports','this category is associated with stadiums that support sports'
2,'music','this category is associated with stadiums that support music' 
```

以及以下连接表：

```
owner_id,owner_category_id
 5, 1 
```

当用户选择“纽约”和“体育”时，它应该给这个体育场：

```
 1,'soccer stadium','New York',5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:15:56.943

尝试这样的事情（警告：未测试）：

```
Stadium.joins(:owner).joins(:owner => :owner_categories)
.where(:city => "New York").where("owners_categories.name = ?", "sports") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T21:19:36.980

```
class Stadium < ActiveRecord::Base

  scope :for_city, lambda { |city_name| where(:city => city_name) }
  scope :for_owner_category,
        lambda { |owner_category_id|
          joins("INNER JOIN owners ON owners.id = stadium.owner_id" +
                " INNER JOIN l_owners_owner_categories ON l_owners_owner_categories.owner_id = owners.id").
          where("l_owners_owner_categories.owner_category_id = :category_id",
                :category_id => owner_category_id)
        }
end

Stadium.for_city("New York").for_owner_category(1) 
```****

# android - andengine 的等待函数？

> ID：10341451
> 
> 赞同：1
> 
> 时间：2012-04-26T21:07:45.223
> 
> 标签：android, andengine, wait

我正在用andengine 编写游戏。我用Runnable 创建了一个循环。我想创建一个等待（秒）函数。
例如，有 10 张小图片作为精灵。它们通过 MoveModifier 以 1 秒的速率从 (100,100) 移动到 (100,400)。但我想要：程序将在 5 到 6 张图片之间等待 x 秒。？-我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T17:42:09.410

延迟修饰符的另一种方法是使用 TimerHander。计时器处理程序将在指定的延迟时间后执行您定义的功能。与使用 android 处理程序相比，TimerHandler 的一个不错的功能是，当游戏引擎暂停和恢复时，TimerHandler 将暂停和恢复。

这是andengine示例中包含的Snake游戏中使用的TimerHandler：

```
/* Make the Snake move every 0.5 seconds. */
        this.mScene.registerUpdateHandler(new TimerHandler(0.5f, true, new ITimerCallback() {
            @Override
            public void onTimePassed(final TimerHandler pTimerHandler) {
                if(SnakeGameActivity.this.mGameRunning) {
                    try {
                        SnakeGameActivity.this.mSnake.move();
                    } catch (final SnakeSuicideException e) {
                        SnakeGameActivity.this.onGameOver();
                    }

                    SnakeGameActivity.this.handleNewSnakePosition();
                }
            }
        })); 
```

== 更新 == 尽管这是公认的答案，但我相信下面 Nicolas Gramlich 的答案更好。当然，作为 Nicolas Gramlich，他并没有真正记录他的答案，但希望你去百科全书“Andengine 示例”中查找。所以这里是你将如何使用延迟修饰符：延迟修饰符是上述内容的理想选择，因为你已经在使用移动修饰符，因此将修饰符链接在一起很简单。

这是 andengine 示例中的一个示例（*作者：Nicolas Gramlich） [https://code.google.com/p/andengineexamples/source/browse/src/org/anddev/andengine/examples/EntityModifierExample.java?r=2b26f37114e50616bfcbb8e292e20988efd1acd6](https://code.google.com/p/andengineexamples/source/browse/src/org/anddev/andengine/examples/EntityModifierExample.java?r=2b26f37114e50616bfcbb8e292e20988efd1acd6)

要检查的部分是：

```
new SequenceEntityModifier(
    new RotationModifier(1, 0, 90),
    new AlphaModifier(2, 1, 0),
    new AlphaModifier(1, 0, 1),
    new ScaleModifier(2, 1, 0.5f),
    new DelayModifier(0.5f),
    new ParallelEntityModifier(
                    new ScaleModifier(3, 0.5f, 5),
                    new RotationByModifier(3, 90)
    ),
    new ParallelEntityModifier(
                    new ScaleModifier(3, 5, 1),
                    new RotationModifier(3, 180, 0)
    )
) 
```

您可以看到您可以使用延迟修饰符在任意两个修饰符之间设置延迟。但是，延迟修饰符仅在延迟是修饰符的一部分时才有效，而不是您编写的函数。在这种情况下，TimerHandler 解决方案将为您完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T15:58:34.093

延迟修饰符。

（十六个字符）

# jquery - 生成的输入获取值并将它们添加到 url 参数中

> ID：10341452
> 
> 赞同：0
> 
> 时间：2012-04-26T21:08:02.183
> 
> 标签：jquery, url, input

我有两个选择字段，它们`<input>`根据选择 1 + 选择 2 的结果生成字段。

像这样 ：

```
jQuery(function($)
{
        $('select[name="nb_adultes"], select[name="nb_enfants"]').change(function()
        {
                var total_a = parseInt($('select[name="nb_adultes"]').val());
                var total_e = parseInt($('select[name="nb_enfants"]').val());

                if (total_a + total_e > 10)
                {
                        alert("La somme du nombre d'adultes et d'enfants ne doit pas dépasser 10");
                }
                else
                {
                        $("#input_appended").empty();

                        for(var j=0; j < total_a; j++) 
                        $("#input_appended").append('<label for="date_naissance">Date de naissance Adulte</label><input type="text" name="date_naissance_a_'+j+'"/><br />');

                        for(var k=0; k < total_e; k++) 
                        $("#input_appended").append('<label for="date_naissance">Date de naissance Enfant</label><input type="text" name="date_naissance_e_'+j+'"/><br />');
                }
        });
}); 
```

我需要检索生成的每个输入字段的 VALUE 并将它们保存以集成到 url 参数中：

例子 ：

选择字段 1 显示数字“2”并选择字段 2 显示数字“1”所以我有 3 个输入字段，我需要这个：

```
var select_1-1 = input VAL1
var select_1-2 = input VAL2
var select_2-1 = input VAL3

var url = "http://www.url.com/page.php?select_1-1=VAL1&select_1-2=VAL2&select_2-1=VAL3" 
```

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:23:53.333

没有 HTML，因此您必须自己找出选择器。

```
var VAL1 = $(select_1-1).val();
var VAL2 = $(select_1-2).val();
var VAL3 = $(select_2-1).val();

var url = "http://www.url.com/page.php?select_1-1="+VAL1+"&select_1-2="+VAL2+"&select_2-1="+VAL3; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-06T19:36:03.413

要检索输入的值并将它们存储在变量中，请执行以下操作：

```
var VAL1 = $(select_1-1).val();
var VAL2 = $(select_1-2).val();
var VAL3 = $(select_2-1).val(); 
```

然后您可以将它们放在另一个名为 myurl 的变量中，例如：

```
var myurl = "http://www.url.com/page.php?select_1-1="+
VAL1+
"&select_1-2="+
VAL2+"&select_2-1="+
VAL3; 
```

然后，如果您想在 myurl 使用的新窗口中打开：

```
window.open( myurl, '_blank' ) 
```

相反，如果您只想将 myurl 添加到您的网址而不刷新页面，请使用：

```
var myurl = "/page.php?select_1-1="+
    VAL1+
    "&select_1-2="+
    VAL2+"&select_2-1="+
    VAL3;
window.history.pushState('', "Title", myurl); 
```

# jquery - 追加后未加载jQuery就绪函数

> ID：10341460
> 
> 赞同：0
> 
> 时间：2012-04-26T21:08:45.833
> 
> 标签：jquery

我的头标签中有以下内容：

```
<script type="text/javascript">
    $(function() {
        $.get('content/menu_items.txt', function(data) {
            var menu_items = data.split('\n');
             $.each(menu_items, function(key, val){
                 var menu_items_split = val.split(',');
                    $('#header-bg > .inline_links').append('<a href="'+  menu_items_split[1] +'"><li>'+  menu_items_split[0] +'</li></a>');
             });   
        });   
    });
</script> 
```

我还有一个现成的函数调用来为我的导航按钮添加圆角。如果我将 li 标签静态添加到 div 中，一切正常，但如果我使用上面的代码，则不会应用角函数和动画。知道这是为什么吗？

如果你不明白，这里是完整的代码和注释，以帮助你更好地理解

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="css/stylesheet.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.js"></script>
<script type="text/javascript" src="js/jquery.corner.js"></script>
<script type="text/javascript" src="js/default.js"></script>

<script type="text/javascript">
    $(function() {
        $.get('content/menu_items.txt', function(data) {
            var menu_items = data.split('\n');
             $.each(menu_items, function(key, val){
                 var menu_items_split = val.split(',');
                    $('#header-bg > .inline_links').append('<a href="'+  menu_items_split[1] +'"><li>'+  menu_items_split[0] +'</li></a>');
             });   
        });   
    });
</script>
</head>

<body>

<div id="header-bg">
    <ul class="inline_links">

<li>test</li> //THIS WORKS, ADDS ROUNDED CORNERS AND ANIMATION;

    </ul>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:30:11.627

为了将 Jquery Corner 应用于您新创建的 li，您可以尝试以下操作：

**查询：**

```
$(function() {
  $.get('content/menu_items.txt', function(data) {
    var menu_items = data.split('\n');
    $.each(menu_items, function(key, val){
      var menu_items_split = val.split(',');
      $('#header-bg > .inline_links').append('<li><a href="'+menu_items_split[1]+'">'+  menu_items_split[0] +'</a></li>');
      // the new line to try
      $('#header-bg > .inline_links li').last().corner();
    });   
  });   
}); 
```

*新行将针对最后一个`<li>`，即刚刚附加的那个，并将角脚本应用于它。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T21:17:59.770

根据您的 CSS，我怀疑您应该将`<li>`标签放在`<a>`;

```
$('#header-bg > .inline_links').append('<li><a href="'+  menu_items_split[1] +'">'+  menu_items_split[0] +'</a></li>'); 
```

# mysql - Mysql 事件更新和搜索

> ID：10341463
> 
> 赞同：0
> 
> 时间：2012-04-26T21:08:56.407
> 
> 标签：mysql, mysql-management

我有一个演示数据库，我需要每晚在 userid = '1' 的任何表中将状态设置回 0

是否可以在 mySql 事件调度程序中执行此操作？还是我需要单独指定每个查询？

例如：更新“表”设置状态='0'，其中用户 ID='1'。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:46:18.730

就个人而言，我认为您目前的方法是最明智的。但其他一些选项可能包括：

*   一个 multi-table `UPDATE`，但是你仍然必须明确地命名每个表 - 所以我不确定它会给你带来多大的好处（除了可能有点混淆）并且它几乎肯定会因为执行连接而产生更差的性能：

    ```
    UPDATE
    FROM
           table1
      JOIN table2 USING (userid)
      JOIN table3 USING (userid)
      JOIN table4 USING (userid)
      JOIN table5 USING (userid)
    SET
      table1.status = '0',
      table2.status = '0',
      table3.status = '0',
      table4.status = '0',
      table5.status = '0'
    WHERE userid = '1'; 
    ```

*   使用准备好的语句动态构建当前的`UPDATE`查询系列 - 但除非您经常更改表的数量或名称，否则我真的不明白这一点：

    ```
    SET @qry = (
      SELECT GROUP_CONCAT(
          "UPDATE `",
          REPLACE(table_name, "`", "``"), -- in case you have strange table names
          "` SET status='0' WHERE userid='1';"
      )
      FROM INFORMATION_SCHEMA.TABLES
      WHERE table_schema = 'db_name'
    );

    PREPARE stmt FROM @qry;
    EXECUTE stmt;
    DEALLOCATE PREPARE stmt; 
    ```

# algorithm - 爱因斯坦的谜语解决方案使用 F#

> ID：10341464
> 
> 赞同：5
> 
> 时间：2012-04-26T21:08:56.460
> 
> 标签：algorithm, f#, zebra-puzzle

我正在寻找使用 F# 的[Einstein's Riddle](http://en.wikipedia.org/wiki/Zebra_Puzzle)解决方案，我发现只有[Einstein 遇到 F#](https://jacerhea.wordpress.com/tag/einstein/)。

F# 是否适合这个问题，还有其他实现吗？

# java - Java 上传小程序请求

> ID：10341467
> 
> 赞同：0
> 
> 时间：2012-04-26T21:09:05.443
> 
> 标签：java, file, upload, applet

有人可以向我展示/链接一个简单的多部分表单数据，我可以转换为小程序的 http post 文件上传脚本吗？寻找一个对我很轻松的人，我已经追求这个目标一个多月了，只需要这个。我对 java 很陌生，在完成这个项目的过程中取得了一些小胜利，但我绝对需要帮助。

我已经有一些签名的脚本在工作，所以我自己做了很多，但我需要一个不好的。我只是很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:17:43.700

从您的 applet 进行 http post 的最简单方法是使用[Apache HTTP Client](http://hc.apache.org/httpcomponents-client-ga/)。您需要将 jar 文件添加到 applet 的[classpath](http://docs.oracle.com/javase/tutorial/deployment/jar/downman.html)。一个简单的例子：

```
HttpClient client = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://example.com/test");
MultipartEntity entity = new MultipartEntity();
entity.addPart("file1", new FileBody(new File("filetoUpload.jpg"), "application/jpg"));
post.setEntity(entity);
client.execute(post)
client.getConnectionManager().shutdown(); 
```

如果由于某种原因您不能使用 HTTP 客户端，您仍然可以使用它，`java.net.URL`但它要复杂得多：

[使用 java.net.URLConnection 触发和处理 HTTP 请求](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests#2793153)

# ios - 在 ios 中以编程方式设置 .MOV 的海报框架

> ID：10341473
> 
> 赞同：2
> 
> 时间：2012-04-26T21:09:37.550
> 
> 标签：ios, avfoundation, quicktime, qtkit

在 Mac OS 上，`QtKit`允许我加载快速电影并设置海报框架。

该框架未移植到ios。

有没有其他方法可以做到这一点？

我正在使用 编写电影`AVAssetWriter`，所以我很想在保存之前设置它，但我会在之后加载它并稍后操作它

# php - PHP中使用PHPCassa的雪花密钥算法

> ID：10341474
> 
> 赞同：6
> 
> 时间：2012-04-26T21:09:43.497
> 
> 标签：php, cassandra, phpcassa

> **可能重复：**
> [如何在 PHP 上使用 64 位整数？](https://stackoverflow.com/questions/864058/how-to-have-64-bit-integer-on-php)

是否可以使用 64 位长整数作为使用 PHPCassa 的 Cassandra 中的键？

例如，

```
$pool = new ConnectionPool('main', array("127.0.0.1")); 
$table = new ColumnFamily($pool, 'messages'); // ColumnFamily 
$table->insert("5601379860409749867", array("sampleKey" => "sampleValue)); 
```

每次插入时，我都会得到 0 作为密钥。在这个表中，key_validation_class 是 LongType。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:53:27.087

这完全取决于您服务器的操作系统功能，而不是 PHPCassa 的限制。

本机 64 位整数需要 64 位硬件和 64 位版本的 PHP。

在 32 位硬件上：

```
$ php -r 'echo PHP_INT_MAX;'
2147483647 
```

在 64 位硬件上：

```
$ php -r 'echo PHP_INT_MAX;'
9223372036854775807 
```

# java - 使用 HttpClient.Execute(HttpGet) 重定向后获取 URL

> ID：10341475
> 
> 赞同：7
> 
> 时间：2012-04-26T21:09:46.247
> 
> 标签：java, httpclient, httpresponse, http-get

我已经搜索了一段时间，但没有找到明确的答案。我正在尝试登录网站。 [https://hrlink.healthnet.com/](https://hrlink.healthnet.com/) 该网站重定向到一个不一致的登录页面。我必须将我的登录凭据发布到重定向的 URL。

我正在尝试用 Java 编写代码，但我不明白如何从响应中获取 URL。它可能看起来有点乱，但我在测试时就是这样。

```
 HttpGet httpget = new HttpGet("https://hrlink.healthnet.com/");
    HttpResponse response = httpclient.execute(httpget);HttpEntity entity = response.getEntity();

    String redirectURL = "";

    for(org.apache.http.Header header : response.getHeaders("Location")) {
        redirectURL += "Location: " + header.getValue()) + "\r\n";
        }        

    InputStream is;
    is = entity.getContent();

    BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8); 
    StringBuilder sb = new StringBuilder(); 
    String line = null; 
    while ((line = reader.readLine()) != null) { 
            sb.append(line + "\n"); 
    } 
    is.close(); 

    String result = sb.toString(); 
```

我知道我被重定向了，因为我的结果字符串显示为实际的登录页面，但我无法获得新的 URL。

在 FireFox 中，我使用 TamperData。当我导航到此网站[https://hrlink.healthnet.com/](https://hrlink.healthnet.com/)时，我有一个带有 302 - Found 和登录页面位置的 GET。然后另一个 GET 到实际的登录页面

非常感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T22:20:32.567

查看[w3c 文档](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)：

> 10.3.3 302 找到
> 
> 临时 URI 应该由响应中的 Location 字段给出。除非请求方法是 HEAD，否则响应的实体应该包含一个简短的超文本注释，其中包含指向新 URI 的超链接。
> 
> 如果收到 302 状态码以响应 GET 或 HEAD 以外的请求，除非用户可以确认，否则用户代理不得自动重定向请求，因为这可能会改变发出请求的条件。

一种解决方案是使用 POST 方法在客户端中断自动重定向：

```
HttpPost request1 = new HttpPost("https://hrlink.healthnet.com/");
HttpResponse response1 = httpclient.execute(request1);

// expect a 302 response.
if (response1.getStatusLine().getStatusCode() == 302) {
  String redirectURL = response1.getFirstHeader("Location").getValue();

  // no auto-redirecting at client side, need manual send the request.
  HttpGet request2 = new HttpGet(redirectURL);
  HttpResponse response2 = httpclient.execute(request2);

  ... ...
} 
```

希望这可以帮助。

# objective-c - 每天在不同时间触发本地通知

> ID：10341476
> 
> 赞同：3
> 
> 时间：2012-04-26T21:09:47.780
> 
> 标签：objective-c, ios, xcode, uilocalnotification

我正在开发一个项目，每天在不同的时间从预定义的数据库通知用户，准确地说是一天五次。

我的问题是如何安排所有这些时间，`5times*365days = 1825`开火日期！是否可以全部安排？

任何想法将不胜感激

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-27T00:46:43.067

根据苹果文档：

> 一个应用程序只能有有限数量的预定通知；系统保持最快触发的 64 个通知（自动重新安排的通知计为单个通知）并丢弃其余通知

我通过设置通知“队列”解决了这个问题。例如，在我的应用程序中，我有三种不同类型的通知，我们只说类型 A、B 和 C。

我安排了下个月的 A、B 和 C 通知，每次用户打开应用程序时，我都会检查剩余的通知数量。例如，如果不再有 A 通知，则应用程序会安排更多 A 通知，依此类推。

我如何做到这一点？

每次我安排通知时，我都会使用该`userInfo`属性。我用一个键`type`和一个值设置了一个字典。

在我的应用程序委托中，我检查所有待处理的通知并计算每种类型的剩余通知数量。代码如下所示：

```
NSArray *scheduledNotifications = [UIApplication scheduledLocalNotifications];

NSUInteger AType, BType, CType;

for (UILocalNotification *notif in scheduledNotifications) {
        //Classify notifications by type
        NSUInteger notifType = [[notif.userInfo objectForKey:@"type"]integerValue];
        if (notifType == 0) {
           AType++;
        }else if(notifType == 1){
            BType++;
        }else{
            CType++;
        }

} 
```

如果任何类型的计数为零，则应用程序会安排更多通知。

最后，如果显示通知，例如，每天在同一时间显示，您可以使用该`repeatInterval`属性**但**您不能创建自己的重复间隔，您只能使用定义的重复间隔`NSCalendarUnit`。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-28T05:53:02.073

您可以尝试使用可以添加提醒、事件、警报的**Eventkit框架。**

1）它没有像UILocalNotification那样的通知数量限制。

2）使用事件套件，您可以添加基于时间和基于位置的事件。

3）您也不必担心隐私。

虽然 UILocalNotification 和 EventKit 本身就很强大..

注意：iOS 6 或更高版本适用于 EventKit 框架

您可以根据自己的需要选择哪一种。

以下链接将为您提供良好的开端

[资源 1](https://developer.apple.com/library/ios/documentation/DataManagement/Conceptual/EventKitProgGuide/Introduction/Introduction.html)

[资源 2](http://www.techotopia.com/index.php/Using_iOS_6_Event_Kit_to_Create_Date_and_Location_Based_Reminders)。

下面的图片将让您很好地了解 evenkit 是什么。

![EventKit_image](../Images/9e36848e215b2a003d08fc1529c75d2a.png)

如果它适合您的需要，请使用 eventkit。

# c++ - 没有 ntohs 的字节顺序交换

> ID：10341477
> 
> 赞同：12
> 
> 时间：2012-04-26T21:09:57.327
> 
> 标签：c++, endianness

我正在编写一个 ELF 分析器，但是在正确转换字节序时遇到了一些麻烦。我有函数来确定分析器的字节序和目标文件的字节序。

基本上，有四种可能的情况：

1.  大端编译分析器在大端目标文件上运行
    *   没有什么需要转换
2.  大端编译分析器在小端目标文件上运行
    *   字节顺序需要交换，但 ntohs/l() 和 htons/l() 在大端机器上都是空宏，因此它们不会交换字节顺序。**这就是问题**
3.  小端编译分析器在大端目标文件上运行
    *   字节顺序需要交换，所以使用 htons() 交换字节顺序
4.  小端编译分析器在小端目标文件上运行。
    *   没有什么需要转换

有没有我可以用来显式交换字节顺序/更改字节序的函数，因为 ntohs/l() 和 htons/l() 考虑了主机的字节序并且有时不转换？还是我需要查找/编写我自己的交换字节顺序函数？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-27T06:49:15.470

我认为值得在这里提出由 Rob Pyke（Go 的作者之一）撰写的[The Byte Order Fallacy文章。](http://commandcenter.blogspot.fr/2012/04/byte-order-fallacy.html)

如果你做对了——即你**不对你的平台字节顺序做任何假设**——那么它就会起作用。您只需要关心 ELF 格式文件是处于*Little Endian*模式还是*Big Endian*模式。

来自文章：

> 假设您的数据流有一个小端编码的 32 位整数。以下是如何提取它（假设无符号字节）：

```
i = (data[0]<<0) | (data[1]<<8) | (data[2]<<16) | (data[3]<<24); 
```

> 如果它是大端的，这里是如何提取它：

```
i = (data[3]<<0) | (data[2]<<8) | (data[1]<<16) | (data[0]<<24); 
```

让编译器担心优化它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-26T21:12:02.340

在 Linux[中有几个转换函数](http://www.kernel.org/doc/man-pages/online/pages/man3/endian.3.html)，`endian.h`允许在任意字节顺序之间进行转换：

```
uint16_t htobe16(uint16_t host_16bits);
uint16_t htole16(uint16_t host_16bits);
uint16_t be16toh(uint16_t big_endian_16bits);
uint16_t le16toh(uint16_t little_endian_16bits);

uint32_t htobe32(uint32_t host_32bits);
uint32_t htole32(uint32_t host_32bits);
uint32_t be32toh(uint32_t big_endian_32bits);
uint32_t le32toh(uint32_t little_endian_32bits);

uint64_t htobe64(uint64_t host_64bits);
uint64_t htole64(uint64_t host_64bits);
uint64_t be64toh(uint64_t big_endian_64bits);
uint64_t le64toh(uint64_t little_endian_64bits); 
```

已编辑，不太可靠的解决方案。您可以使用 union 以任何顺序访问字节。这很方便：

```
union {
    short number;
    char bytes[sizeof(number)];
}; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-26T21:12:39.970

> 我需要查找/编写自己的交换字节顺序函数吗？

是的你是。但是，为了方便起见，我建议您参考这个问题：[如何在 C++ 中的大端和小端值之间进行转换？](https://stackoverflow.com/questions/105252/how-do-i-convert-between-big-endian-and-little-endian-values-in-c)它给出了编译器特定的字节顺序交换函数的列表，以及字节顺序交换函数的一些实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T21:17:57.173

ntoh 函数不仅可以在大端和小端之间进行交换。一些系统也是“中间端”，其中字节被打乱，而不是仅仅以一种或另一种方式排序。

无论如何，如果您只关心大端和小端，那么您只需要知道主机和目标文件的字节序是否不同。您将拥有自己的函数，该函数无条件交换字节顺序，您将根据是否调用它`host_endianess()==objectfile_endianess()`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T02:27:29.987

如果我想考虑一个可以在 Windows 或 linux 上运行的跨平台解决方案，我会写如下内容：

```
#include <algorithm>

// dataSize is the number of bytes to convert.
char le[dataSize];// little-endian
char be[dataSize];// big-endian

// Fill contents in le here...
std::reverse_copy(le, le + dataSize, be); 
```

# xpages - 刷新重复所在的面板后，重复中的按钮不会隐藏/显示？

> ID：10341478
> 
> 赞同：1
> 
> 时间：2012-04-26T21:10:10.240
> 
> 标签：xpages

我有一个嵌入了按钮的重复。重复在面板中。当用户单击按钮时，该按钮应隐藏/显示（我部分刷新面板）。重复与 Domino 视图相关联，我看到该视图中的其他值在重复中得到更新，因此，这似乎不是视图索引问题（我在代码中刷新了视图索引。）

如果我在我的按钮 onclick 代码中使用 context.reloadPage() ，那么按钮将像应有的那样隐藏/显示，但是，这似乎我正在使用大锤！关于在呈现包含重复的面板时如何让按钮重新计算可见属性的任何建议？另一个奇怪的事情是，每当我刷新包含重复的面板时，都会计算 3 次可见属性。

谢谢，霍华德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T07:58:18.287

我想你在寻找

```
getComponent("<id>").setRendered(true / false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T09:28:12.673

Hi For Repeat 控件的输入是用来让我们头疼的。因为通过SSJS处理入口，我们可以获取值并设置值。但是渲染部分，重复组件的 id 对所有人都是一样的。因此，如果我们尝试将 reder 设为 false。它隐藏了我们所有的重复组件。

尝试使用以下内容。，[把这个放在按钮onclick中，看看下面的值]

```
var entryValue= getComponent("repeat1").getChildren().get(0).getValue()

getComponent("inputText1").setValue(entryValue) 
```

但在客户端，我们可以轻松处理。因为 DOM 对象的 id 对于所有重复组件都是唯一的。

```
var id1="view:_id1:repeat2:"+'2'+":button1"
document.getElementById(id1).style.display="none" 
```

这将隐藏重复控制组件的第三个条目。

[请看帖子，你可能会得到更好的主意](http://kramkumarmca.blogspot.in/2012/04/dynamic-table-and-getting-row-values.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T15:38:04.917

除了 Ramkumar 所说的之外，您还可以使用重复控件中的索引变量来识别重复控件中的每个事件。如果您使用 firefox [您可能需要 firebug] 中的元素进行检查，您会得到更多的想法。通常，重复控件中提到的字段本身可以被视为一个数组

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T20:53:14.417

找到了解决方案。我最初的解决方案是从重复行中获取值（使用集合对象，它是一个 viewentrycollection 并使用 getColumnValues）来计算按钮的呈现属性。

相反，我创建了一个 viewScope 变量（一个 Vector）来保存按钮的状态（要显示的按钮集）。这会在页面的 beforePageLoad 事件中填充。

按钮 onclick 代码在执行其处理后更新此 viewScope 变量。现在一切都很好。我猜是 JSF 生命周期中的某些东西使按钮无法正确更新。使用 viewScope 变量可以正常工作。

# python - 在 python 中初始化字典列表时出现奇怪的索引行为

> ID：10341483
> 
> 赞同：0
> 
> 时间：2012-04-26T21:10:32.387
> 
> 标签：python, list, dictionary

我刚花了一个小时就遇到了以下挫败感，并且

a）想发布它以防其他人遇到同样的问题，并且 b）我很好奇这种行为的基础是什么。

```
$ e = [{}]*6
$ e
[{}, {}, {}, {}, {}, {}]
$ e[0]['green'] = 'blue'
$ e
[{'green': 'blue'}, {'green': 'blue'}, {'green': 'blue'}, {'green': 'blue'}, {'green': 'blue'}, {'green': 'blue'}]
$ e = [{}, {}, {}, {}, {}, {}]
$ e
[{}, {}, {}, {}, {}, {}]
$ e[0]['green'] = 'blue'
$ e
[{'green': 'blue'}, {}, {}, {}, {}, {}] 
```

基本上，问题是当字典列表使用 [{}]*int 初始化时，尝试通过列表中的索引修改单个字典会修改所有字典。而显式初始化

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T21:12:02.197

因为你把同样的`dict`6次。`[{}]*6`不会复制/深度复制原始字典，而只会复制对它的引用。如果您想要 6 个单独的 dict，请使用循环/列表理解，例如

```
e = [{} for i in range(6)] 
```

[在python 文档](http://docs.python.org/faq/programming.html#how-do-i-create-a-multidimensional-list)中查看更多解释

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T21:14:57.690

答案是：**可变性**。这并不奇怪。

在第一种情况下：

```
>>> e = [{}]*6 
```

**您从一本重复 6 次的字典**创建一个列表。如果您更改其中一个元素，那么您将更改其他元素（至少看起来像，因为实际上这些“其他”元素是相同的元素）。

在第二种情况下：

```
>>> e = [{}, {}, {}, {}, {}, {}] 
```

**您从6 个不同的词典**创建了一个列表，因此更改一个不会影响其他词典。

# asp.net-mvc - 在 aspx 页面中的 webgrid 中从一个页面导航到另一个页面时丢失 web 控件数据

> ID：10341484
> 
> 赞同：3
> 
> 时间：2012-04-26T21:10:38.323
> 
> 标签：asp.net-mvc, dynamic, webgrid

嗨，当我尝试从 webgrid 中的一个页面导航到另一个页面时，我的 aspx 页面中有一个带有分页的 webgrid。我正在丢失 aspx 页面中其他控件的数据。基本上，当从一个页面导航到另一个页面时，webgrid 会尝试重新加载整个 aspx 页面。

我的问题是如何使这个 webgrid 在我的 aspx 页面中独立存在，而不是在从一个页面移动到另一个页面时重新加载页面

先感谢您

```
 <html>
<head>
    <title>Index</title>
    <style type="text/css">
        .webGrid { margin: 4px; border-collapse: collapse; width: 300px; }
        .header { background-color: #E8E8E8; font-weight: bold; color: #FFF; }
        .webGrid th, .webGrid td { border: 1px solid #C0C0C0; padding: 5px; }
        .alt { background-color: #E8E8E8; color: #000; }
        .person { width: 200px; font-weight:bold;}
    </style>
</head>
<body>            
    @{
        var grid = new WebGrid(Model, canPage: true, rowsPerPage: 5);
        grid.Pager(WebGridPagerModes.NextPrevious);
        @grid.GetHtml(tableStyle: "webGrid",
                htmlAttributes: new { id = "DataTable" },
                headerStyle: "header",
                alternatingRowStyle: "alt",
                columns: grid.Columns(
                    grid.Column("Age"),
                    grid.Column("Id"),
                    grid.Column("Name")
        ));       
    }
    <input type="text" id="somed" /><select><option value="some">test1</option><option value="some2">test2</option><option value="some3">test3</option></select>
</body>
</html> 
```

在这里我有一个文本框和一个下拉菜单，所以每当我尝试从一个页面导航到另一个页面时，文本框中的值和选定的下拉值都消失了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T15:10:49.643

经过数小时的搜索，我找到了一个可以提供帮助的链接..

这是链接 [http://haacked.com/archive/2009/04/14/using-jquery-grid-with-asp.net-mvc.aspx](http://haacked.com/archive/2009/04/14/using-jquery-grid-with-asp.net-mvc.aspx)

# matlab - 过滤函数使用matlab

> ID：10341485
> 
> 赞同：1
> 
> 时间：2012-04-26T21:10:42.960
> 
> 标签：matlab, filter

我正在尝试在 Matlab 中执行一个简单的模拟。我有一个随机信号 x 和一个滤波器传递函数。过滤功能的正确用法是什么？

```
x = rand(100,1);
syms z;
Pnum = (1-0.1*z^-1); 
Pdenum = (1-0.9*z^-1);

y = filter(Pnum, Pdenum, x); 
```

这会引发错误

> “'sym' 类型的输入参数的未定义函数 'filter'。”

我知道它在抱怨 z 变量。我应该如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T22:33:32.607

过滤器命令不是为采用符号数据类型而构建的。它将原始滤波器系数作为输入。您试图定义的是一个差分方程，其中 b 系数是 。.

```
b = [1 0.1]; 
```

和 a 系数是

```
a = [1 0.9]; 
```

然后您可以按如下方式过滤信号

```
y = filter(b,a,x) 
```

freqz 命令显示这是一个带有一些增益的奇怪高通滤波器。.

```
freqz(b,a) 
```

![在此处输入图像描述](../Images/482b0b38c83a4665e773ec3de455c46c.png)

这是你想要达到的目标吗？

如果你反转系数，那么

```
b = [1 0.9];
a = [1 0.1]; 
```

...您最终会得到一个具有一定增益的低通滤波器

```
freqz(b,a) 
```

![在此处输入图像描述](../Images/3e2edc2f55694c94ebf7e89f66df5cc0.png)

# python - 为什么在导入python文件的时候还需要给file.function_name命名是什么原因？

> ID：10341487
> 
> 赞同：4
> 
> 时间：2012-04-26T21:11:04.160
> 
> 标签：python, import

我目前正在做一个 python 教程，但他们使用 IDLE，我选择在终端上使用解释器。所以我必须找出如何导入我创建的模块。一开始我试过

```
import my_file 
```

然后我尝试自己调用模块内部的函数，但失败了。我环顾四周，做

```
my_file.function 
```

作品。我很困惑为什么如果它是进口的就需要这样做。另外，有没有办法解决它，以便我可以调用该函数？谁能指出我正确的方向。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T21:15:14.427

如果您想`my_file.function`通过调用来使用`function`，请尝试使用`from`关键字。

而不是`import my_file`尝试`from my_file import *`。

您也可以这样做以仅导入模块的一部分，如下所示： `from my_file import function1, function2, class1`

为避免名称冲突，您可以使用不同的名称导入内容： `from my_file import function as awesomePythonFunction`

编辑：注意这一点，如果您导入两个内部`myfile, myfile2`相同的模块（），将指向您最后导入的任何模块。如果您不知道，这可能会发生有趣的事情。`function``function``function`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-26T21:25:17.297

这是 python 的核心概念。它使用命名空间（参见最后一行`import this`）。这个想法是，成千上万的人编写许多不同的模块，名称冲突的可能性相当高。例如，我编写`foo`提供功能的`baz`模块，乔史密斯编写`bar`提供功能的模块`baz`。My`baz`和 Joe Smiths 不一样，所以为了区分两者，我们将它们放在命名空间 ( `foo`and `bar`) 中，这样 mine 可以被 by 调用`foo.baz()`，Joe's 可以被 调用`bar.baz()`。

当然，`foo.baz()`如果您只是想要`baz()`并且确保导入的其他模块都不会提供任何问题，那么一直打字会很烦人......这就是为什么 python 提供`from foo import *`语法，甚至`from foo import baz`只导入函数/对象/常量`baz`（正如其他人已经指出的那样）。

请注意，事情可能会变得更加复杂：假设您有一个模块 foo，它提供了函数 bar 和 baz，下面是一些导入然后调用包含在 foo 中的函数的方法...

```
import foo                 # >>> foo.bar();foo.baz()
import foo as bar          # >>> bar.bar();bar.baz()
from foo import bar,baz    # >>> bar(); baz()  
from foo import *          # >>> bar(); baz()
from foo import bar as cow # >>> cow()  # This calls bar(), baz() is not available
... 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-26T21:54:56.997

基本`import`语句是将模块对象（Python 中的一切都是对象）分配给指定的名称。我的意思是字面意思：您可以`import`在程序中的任何地方使用可以为变量赋值的任何地方，因为它们是相同的东西。在幕后，Python 正在调用一个内置函数`__import__()`来执行导入，然后返回结果并将其分配给您提供的变量名。

```
import foo 
```

意思是“导入模块`foo`并在我的命名空间中为其分配`foo`名称。这*与*：

```
foo = __import__("foo") 
```

同样，您可以这样做：

```
import foo as f 
```

这意味着“导入模块并在我的命名空间中`foo`为其分配名称。” `f`这与以下内容相同：

```
f = __import__("foo") 
```

由于在这种情况下，您只有对模块对象的引用，因此引用模块包含的内容需要属性访问：`foo.bar`等。

你也可以这样做`from foo import bar`。这将创建一个`bar`在您的命名空间中命名的变量，该变量指向模块中的`bar`函数。`foo`它是语法糖：

```
bar = __import__("foo").bar 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T21:14:25.743

我真的不明白你的困惑。你已经导入了 name `my_file`，而不是它下面的任何东西，所以这就是你引用它的方式。

如果要直接在模块中导入函数或类，可以使用：

```
from my_file import function 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T21:56:29.347

我将合并许多已经发布的评论。

要`function`无需参考模块即可访问`my_file`，您可以执行以下操作之一：

```
from my_file import function 
```

或者

```
from my_file import * 
```

有关模块如何工作的更深入描述，我将参考有关[python 模块](http://docs.python.org/tutorial/modules.html)的文档。

第一种是首选方案，第二种[不推荐](https://stackoverflow.com/questions/2386714/in-python-why-is-import-bad)，原因很多：

*   它污染了你的命名空间
*   对于可维护性来说，这不是一个好的做法（查找特定名称所在的位置变得更加困难。
*   您通常不确切知道导入的内容
*   您不能使用 pyflakes 等工具静态检测代码中的错误

Python 导入的工作方式与 C 或 Java 等静态语言中的 #includes/imports 不同，因为 python 执行模块中的语句。因此，如果两个模块需要相互导入特定名称（或 *），您可能会遇到循环引用问题，例如`ImportError`在导入特定名称时，或者根本没有定义预期的名称（在这种情况下`from ... import *`） . 当您不请求特定名称时，您不会遇到循环引用的风险，只要名称是在您实际想要使用它的时间定义的。

The `from ... import *` also doesn't guarantee you get everything. As stated in the documentation on python modules, a module can defined the `__all__` name, and cause `from ... import *` statements to miss importing all of the subpackages, except those listed by `__all__`.

# c++ - c ++：是否可以定义重载运算符ind驱动类，将工作objs基类类型

> ID：10341494
> 
> 赞同：-1
> 
> 时间：2012-04-26T21:11:25.860
> 
> 标签：c++, inheritance, operator-overloading

是否可以在驱动类中定义重载运算符，以便从基类类型工作 objs？

例如：假设我有一个 Point 类，我想在一个名为 Operators 的类中执行所有运算符重载，该类将继承 Point 类

有可能吗？如果没有，有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T21:15:41.423

不，这是不可能的。此外，您的方法是错误的。继承是一种`is-a`关系，`Operators`显然不是`Point`. 你真的需要重新考虑你的设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T21:16:59.350

派生类的全部意义在于使派生类更加具体。我不确定您是否想要一个从 Point 派生的名为 Operators 的类。

您可能只想在 operator+ 的类之外进行定义，或者任何将 Point 对象作为参数的定义。

# php - PHP XML 删除父级

> ID：10341498
> 
> 赞同：2
> 
> 时间：2012-04-26T21:12:01.827
> 
> 标签：php, xml

XML:

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<root>
    <pages>
      <page><title>Home</title><content>Lorem Ipsum</content></page>
      <page><title>Pictures</title><content>Lorem Ipsum</content></page>
      <page><title>Information</title><content>Lorem Ipsum</content></page>
    </pages>
  <css>
    <css-tag><title>background-color</title><value>#FFF</value></css-tag>
  </css>
  <layout>1</layout>
</root> 
```

PHP：

```
$title = $_GET['0'];

$xml = new DOMDocument('1.0', 'ISO-8859-1');
$xml->formatOutput = true;
$xml->preserveWhiteSpace = true;
$xml->load($location);
$pages = $xml->getElementsByTagName("page");
foreach($pages as $page){
    $pagetitle = $page->getElementsByTagName("title");
    $pagetitlevalue = $pagetitle->item(0)->nodeValue;
    if($title == $pagetitlevalue){
        $pagetitle->item(0)->parentNode->removeChild($pagetitle->item(0));
    }
}
$xml->save($location); 
```

这段代码只去掉了`<Title>`节点，怎么改成去掉父`<Page>`节点呢？

我不知道该怎么做，我只是设法摆脱标题节点并获得大量错误代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T22:14:07.937

虽然这是我可能会使用 xpath 的东西，但您可以找到...

```
$pagetitle->item(0)->parentNode->removeChild($pagetitle->item(0)); 
```

并替换为...

```
$pagetitle->item(0)->parentNode->parentNode->removeChild($pagetitle->item(0)->parentNode); 
```

在您的 XML 树中更上一层楼

# java - 从android画廊获取缩略图 - sdcard

> ID：10341506
> 
> 赞同：1
> 
> 时间：2012-04-26T21:12:40.027
> 
> 标签：java, android, android-gallery

我在 sdcard 中有图像文件名的绝对路径。有没有办法像它们在android画廊中显示的那样获取它的缩略图？我需要的原因是我从 android 库中选择的图像很少，然后 http 将其发布到服务器。如果文件很大，由于移动数据慢，需要很长时间才能上传。而不是文件，如果我能得到它的缩略图，它会很容易上传。我可以在上传之前自行调整图像大小以调整图像大小。但我想探索是否有更简单的方法？

# jquery - jQuery函数调用顺序

> ID：10341507
> 
> 赞同：0
> 
> 时间：2012-04-26T21:12:41.763
> 
> 标签：jquery

我是 Jquery 的新手，在一本书中看到了这段代码。我试图了解 hideCode() 是如何执行的。

这是我对即将发生的事件顺序的理解：

1.  文档被加载并准备好执行 jquery 功能。
2.  单击guess_box 时，运行 checkForCode() 函数。
3.  hideCode() 函数运行。

它是否正确？

```
$(document).ready(function() {
   $(".guess_box").click(checkForCode);
   function getRandom(num) {
       var my_num = Math.floor(Math.random() * num);
       return my_num;
   }
   var hideCode = function() {
       var numRand = getRandom(4);
       $(".guess_box").each(function(index, value) { 
           if(numRand == index){
               $(this).append("<span id='has_discount'></span>");
               return false;
           }
       });
   }
   hideCode();
   function checkForCode() {
       var discount;
       if($.contains(this, document.getElementById("has_discount"))) {
          var my_num = getRandom(5);
          discount = "<p>Your Discount is " + my_num + "%</p>";
       } else {
           discount = "<p>Sorry, no discount this time!</p>" ;
       }
       $(this).append(discount);
       $(".guess_box").each(function() {
           $(this).unbind('click');
       }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:59:37.473

除非我们没有看到更多代码，否则`hideCode`只会在页面加载时调用一次。在被点击`checkForCode`之前不会运行。`guess_box`顺序是：

1.  文档被加载。
2.  `checkForCode`绑定到`guess_box`的点击事件，但它还没有运行。
3.  `hideCode`运行。

# java - 如何在“外部”包中使用 GWT UI 绑定器

> ID：10341511
> 
> 赞同：0
> 
> 时间：2012-04-26T21:13:01.320
> 
> 标签：java, gwt, uibinder

我正在使用 GWT 开发一个 Web 应用程序，并且正在修改它以使用 UiBinders 构建它。

我有几个活页夹的工作版本，这些活页夹包含在与引用它们的类相同的包中，但其中很多在整个应用程序中具有通用实用程序，我希望将它们分解到 uibinders 包中。

这是工作代码的一些片段

TableListPanel.ui.xml 文件：

```
<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
xmlns:g="urn:import:com.google.gwt.user.client.ui">
<g:HTMLPanel>
<div id="tableListPanel">
    <g:HTMLPanel styleName="buttonPanel" ui:field="buttonPanel"></g:HTMLPanel>
    <g:HTMLPanel styleName="tableList" ui:field="tableList"></g:HTMLPanel>
    <table align="center"><tr>
        <td align="center"><g:HTMLPanel styleName="tableMenu" ui:field="tableMenu"></g:HTMLPanel></td>
    </tr></table>
</div>
</g:HTMLPanel>

</ui:UiBinder> 
```

TableListPanelBinder java 文件：

```
public class TableListPanelBinder extends Composite implements HasText {

private static AuditPanelUiBinder uiBinder = GWT
        .create(AuditPanelUiBinder.class);

interface AuditPanelUiBinder extends UiBinder<Widget, TableListPanelBinder> {
}

public TableListPanelBinder() {
    initWidget(uiBinder.createAndBindUi(this));
}

@UiField
protected HTMLPanel buttonPanel;

@UiField
protected HTMLPanel tableList;

@UiField
protected HTMLPanel tableMenu;

public void bindUiElement(HTMLPanel container, Widget widjetObj) {
    container.add(widjetObj);
} 
```

最后，将小部件绑定到上述 ui:fields 的代码中的调用：

```
public AuditReportProfilesPanel() {
    super();
    this.setWidth("100%");
    this.setSpacing(4);

    this.parmSetsTable = createParmSetsTable();
    SimplePager.Resources pagerResources = GWT.create(SimplePager.Resources.class);
    pager = new SimplePager(TextLocation.CENTER, pagerResources, false, 0, true);
    pager.setDisplay(parmSetsTable);

    TableListPanelBinder reportListBinder = new TableListPanelBinder();
    this.add(reportListBinder);

    // -START- Bind UI Elements -START-
    reportListBinder.bindUiElement(reportListBinder.tableList, parmSetsTable);
    reportListBinder.bindUiElement(reportListBinder.tableMenu, pager);
    reportListBinder.bindUiElement(reportListBinder.buttonPanel, createActionBar());
    //-END- Bind UI Elements -END-
} 
```

我知道这可能不是设置它的最干净的方法，但我正在学习。

我知道将 Binder 移动到不同的包意味着私有/受保护的访问修饰符会阻止我访问代码，但是将它们更改为公共也对我没有任何好处。

任何修复建议将不胜感激。这个应用程序有几个不同的类包（本质上相当于应用程序中的不同页面），它们都使用类似的表设置，所以我想避免每个包中都有重复的代码；我只是不能 100% 确定实现这一目标的最佳方式。

在 Binders 包中创建抽象类，然后在各个应用程序包中扩展它们会解决问题，还是我缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T23:42:46.197

1.  在指定的通用包中编写您的通用`UiBinder`s 和相应的类（`Widget`s 或s）。`View`我们称之为`my.general.uibinders`包。
2.  在`UiBinder`对应于具体页面（或`Place`）的 中，将此包作为`xmlns`属性`ui:UiBinder`导入`UiBinder`. 这边走：

    ```
    <ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder" 
        xmlns:g="urn:import:com.google.gwt.user.client.ui"
        xmlns:c="urn:import:my.general.uibinders"> <!-- this is the addition --> 
    ```

3.  从现在开始，在 this 中`UiBinder`，`c`是对驻留在 中的类的引用`my.general.uibinders`。假设您有一个`MyGeneralView`名为.`<c:MyGeneralView .../>``UiBinder`

# c# - 如何使 DropDownList 项的顶部值加粗 C#

> ID：10341513
> 
> 赞同：0
> 
> 时间：2012-04-26T21:13:05.430
> 
> 标签：c#, visual-studio-2008, webforms

我有这个下拉列表，我需要将最高值加粗。我该怎么做呢？

```
ddlDefaultSkins = new DropDownList();
ddlDefaultSkins.ID = "ddlDefaultSkins";
ddlDefaultSkins.ToolTip = "Select Default Clock Skin";
ddlDefaultSkins.SelectedValue = "CustomClock";
ddlDefaultSkins.AutoPostBack = true;

ddlDefaultSkins.Width = Unit.Pixel(100);
ddlDefaultSkins.Items.Add("CustomClock");
ddlDefaultSkins.Items.Add("swissRail");
ddlDefaultSkins.Items.Add("chunkySwiss");
ddlDefaultSkins.Items.Add("fancy");
ddlDefaultSkins.Items.Add("machine");
ddlDefaultSkins.Items.Add("classic"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T21:44:06.780

也许你可以使用：

```
var item = new ListItem("CustomClock");
item.Attributes.Add("style", "font-weight: bold");

ddlDefaultSkins.Items.Add(item); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-11-28T08:46:24.037

```
foreach (ListItem item in DropDownList1.Items)
{
    //if you want to apply for some selected items check the condition on item.Text or item.Value based on your requirement.
    if (item.Text == "Some Value")
    {
        //Change font weight 
        item.Attributes.CssStyle.Add("font-weight", "bold");
        //Change font color
        item.Attributes.CssStyle.Add("color", "red");
    }
} 
```

# objective-c - 获取 NSManagedObject 的属性作为 NSDictionary

> ID：10341515
> 
> 赞同：19
> 
> 时间：2012-04-26T21:13:13.107
> 
> 标签：objective-c, ios, core-data

如果我有一个从上下文中获取的 NSManagedObject，我如何从它的动态属性中创建一个 NSDictionary 而不只是将每个字段显式复制到字典中？

如果我的托管对象看起来像这样，例如：

```
@implementation Track

@dynamic artist;
@dynamic group;
@dynamic purchase_url;
@dynamic title;
@dynamic file_name;
@dynamic year;

@end 
```

在从数据库中获取之后，在这种情况下，我需要一个 NSDictionary，并且为每个 @dynamic 属性设置相同的属性。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-11-18T02:47:41.527

有一种更快的方法可以将 NSManagedObject 转换为 NSDictionary（来自[https://stackoverflow.com/a/5664745/2294824上的](https://stackoverflow.com/a/5664745/2294824)[Matthias Bauch](https://stackoverflow.com/users/457406/matthias-bauch "马蒂亚斯·鲍赫")响应）：

```
NSArray *keys = [[[myObject entity] attributesByName] allKeys];
NSDictionary *dict = [myObject dictionaryWithValuesForKeys:keys]; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-26T21:46:37.730

您可以通过以下方法实现您的方法：

```
unsigned int count;
objc_property_t *properties = class_copyPropertyList([CoreDataObject class], &count);
NSMutableDictionary *dictionary = [NSMutableDictionary dictionaryWithCapacity:16];

for(int i = 0; i < count; i++) {
    objc_property_t property = properties[i];
    NSString *name = [NSString stringWithCString:property_getName(property) encoding:NSUTF8StringEncoding];
    id obj = [coreDataObjectInstance valueForKey:name];
    if (obj) {
        // Skip properties with nil values (optionally you can use: [dictionary setObject:((obj == nil) ? [NSNull null] : obj) forKey:name]; without any if-statement) 
        [dictionary setObject:obj forKey:name];
    }
}

free(properties); 
```

“CoreDataObject”是您想要转换成 NSDictionary 的核心数据对象，而“coreDataObjectInstance”是这个核心数据对象的一个​​实例。请记住，您必须：

```
#include <objc/runtime.h> 
```

此外，如果您能给我们更多的见解，您想用这个想法实现什么，那就太好了，也许有一个不同/更好的解决方案。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-10-31T21:11:02.570

我认为这就是你真正想要的：

```
NSEntityDescription *trackEntity = [NSEntityDescription entityForName:[Track entityName] inManagedObjectContext:yourMOC]; 
```

那么您可以访问这些字典：

```
[trackEntity propertiesByName];
[trackEntity relationshipsByName];
[trackEntity attributesByName]; 
```

这些字典中的每一个都有对应于属性的键，值将是一个 NSPropertyDescription。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-02T10:19:17.583

**注意**：`Swift 4.2`更新

```
let keys = Array(YOUR_MANAGED_OBJECT.entity.attributesByName.keys)
let data:[String: Any] = YOUR_MANAGED_OBJECT.dictionaryWithValues(forKeys: keys) 
```

# javascript - Twitter Bootstrap 网站未在 Android 浏览器中向下滚动

> ID：10341518
> 
> 赞同：1
> 
> 时间：2012-04-26T21:13:21.197
> 
> 标签：javascript, css, twitter-bootstrap

我正在使用 twitters bootstrap 模拟一个移动网站。该页面有一堆内容“在首屏”。出于某种奇怪的原因，它拒绝在 Droid 浏览器中向下滚动，而在 iPhone 和桌面浏览器上运行良好。该网站可以在这里访问：http: [//mpds.a2opinion.com](http://mpds.a2opinion.com)。我的代码包括在下面：

```
<!doctype html>
<html class="no-js" lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="robots" content="noindex,nofollow">
<title></title>
<meta name="description" content="">
<meta name="author" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="css/bootstrap.min.css">
<style>
  body {
    margin:0 !important;
    padding:0 !important;
  }
  .navbar-fixed-top, .navbar-fixed-bottom {
    margin-right: 0 !important;
    margin-left: 0 !important;
  }
  .half {
    float: left !important;
    padding-bottom: 5px;
    width: 50% !important;
  }
  .navbar .nav.pull-right {
    float:right !important;
  }
  .navbar .nav > li {
    float: left !important;
  }
  .navbar .nav > li > a {
    margin-bottom: 0 !important;
    margin-top: 0 !important;
  }
  .container-fluid {
    padding-left: 10px !important;
    padding-right: 10px !important;
  }
</style>
<link rel="stylesheet" href="css/bootstrap-responsive.min.css">
<link rel="stylesheet" href="css/style.css">
<script src="js/libs/modernizr-2.5.3-respond-1.1.0.min.js"></script>
</head>
<body>
<div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <ul class="nav pull-right">
        <li><a href="#" class="btn btn-large btn-inverse"><i class="icon-home icon-white"></i></a></li>
        <li><a href="#" class="btn btn-large btn-inverse"><i class="icon-map-marker icon-white"></i></a></li>
        <li><a href="#" class="btn btn-large btn-inverse" data-toggle="collapse" data-target=".nav-collapse"><i class="icon-thumbs-up icon-white"></i></a></li>
        <li><a href="tel:" class="btn btn-large btn-inverse"><i class="icon-bell icon-white"></i> Call Now</a></li>
      </ul>
      <div class="nav-collapse">
        <!--facebook like box-->
      </div>
    </div>
  </div>
</div>
<div class="container-fluid">
  <div class="row-fluid">
    <div class="span6 half">
      <img src="/img/logo.png" width="120" />
    </div>
    <div class="span6 half">
      <a class="btn btn-large" href="#" style="width:80%;"><i class="icon-map-marker"></i> Find Location</a><br />
      <a class="btn btn-large" href="tel:" style="width:80%;"><i class="icon-bell"></i> Call Now</a>    
    </div>
  </div>
  <div class="row-fluid">
    <div class="span12">
      <ul class="nav nav-tabs nav-stacked" style="width:100%">
        <li>
          <a href="#" data-toggle="collapse" data-target="#repair-nav"><strong>Garage Door Repair</strong> <i class="icon-chevron-down" id="repair-nav-arrow" style="float:right"></i></a>
          <div id="repair-nav" class="collapse">
            <ul class="nav nav-tabs nav-stacked" style="width:100%">
              <li><a href="#"><i class="icon-wrench"></i> Garage Door Repair <i class="icon-chevron-right" style="float:right"></i></a></li>
              <li><a href="#"><i class="icon-wrench"></i> Garage Door Spring Repair <i class="icon-chevron-right" style="float:right"></i></a></li>
              <li><a href="#"><i class="icon-wrench"></i> Garage Door Opener Repair <i class="icon-chevron-right" style="float:right"></i></a></li>
            </ul>
          </div>
        </li>
        <li>
          <a href="#" data-toggle="collapse" data-target="#doors-nav"><strong>Garage Doors</strong> <i class="icon-chevron-down" id="doors-nav-arrow" style="float:right"></i></a>
          <div id="doors-nav" class="collapse">
            <ul class="nav nav-tabs nav-stacked" style="width:100%">
              <li><a href="#"><i class="icon-align-justify"></i> Garage Doors <i class="icon-chevron-right" style="float:right"></i></a></li>
              <li><a href="#"><i class="icon-align-justify"></i> Garage Door Designer <i class="icon-chevron-right" style="float:right"></i></a></li>
              <li><a href="#"><i class="icon-align-justify"></i> Commercial Garage Doors <i class="icon-chevron-right" style="float:right"></i></a></li>
            </ul>
          </div>
        </li>
        <li>
          <a href="#" data-toggle="collapse" data-target="#openers-nav"><strong>Garage Door Openers</strong> <i class="icon-chevron-down" id="openers-nav-arrow" style="float:right"></i></a>
          <div id="openers-nav" class="collapse">
            <ul class="nav nav-tabs nav-stacked" style="width:100%">
              <li><a href="#"><i class="icon-arrow-up"></i> Garage Door Openers <i class="icon-chevron-right" style="float:right"></i></a></li>
              <li><a href="#"><i class="icon-arrow-up"></i> Garage Door Opener Repair <i class="icon-chevron-right" style="float:right"></i></a></li>
            </ul>
          </div>
        </li>
        <li><a href="#"><strong>Locations</strong> <i class="icon-chevron-right" style="float:right"></i></a></li>
      </ul>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span12">
      <ul class="nav nav-tabs" id="home-tabs">
        <li class="active"><a href="#repair"><i class="icon-wrench"></i> <span>Garage Door Repair</span></a></li>
        <li><a href="#doors" id="doors-tab"><i class="icon-align-justify"></i> <span style="display:none;">Garage Doors</span></a></li>
        <li><a href="#openers"><i class="icon-arrow-up"></i> <span style="display:none;">Garage Door Openers</span></a></li>
        <li><a href="#locations"><i class="icon-map-marker"></i> <span style="display:none;">Locations</span></a></li>
      </ul>
      <div class="tab-content">
        <div class="tab-pane active" id="repair">
          <!--repair content-->
        </div>
        <div class="tab-pane" id="doors">
          <!--doors content-->
        </div>
        <div class="tab-pane" id="openers">
          <!--openers content-->
        </div>
        <div class="tab-pane" id="locations">...</div>
      </div>
    </div>
  </div>
</div>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/libs/jquery-1.7.2.min.js"><\/script>')</script>
<script src="js/libs/bootstrap/bootstrap.min.js"></script>
<script src="js/script.js"></script>
<script>
$('.collapse').on('shown', function () {
    $('#' +  $(this).attr('id') + '-arrow').toggleClass('icon-chevron-down');
    $('#' +  $(this).attr('id') + '-arrow').toggleClass('icon-chevron-up');
});
$('.collapse').on('hidden', function () {
    $('#' +  $(this).attr('id') + '-arrow').toggleClass('icon-chevron-up');
    $('#' +  $(this).attr('id') + '-arrow').toggleClass('icon-chevron-down');
});
$('#home-tabs a').click(function (e) {
  e.preventDefault();
  $(this).tab('show');
  $(this).find('span').show();
});
$('#home-tabs a').on('shown', function (e) {
  $("span",$(e.relatedTarget)).hide();
});
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:24:42.820

我在使用时遇到了同样的问题`html,body{overflow-x:hidden;}`

当背景比屏幕宽时，这是一种防止横向滚动的技巧。它适用于除 Android 2.x 设备之外的所有平台和浏览器。

更改`html{overflow-x:hidden;}`为 Android 解决了它......但不是其他人。

# soap - WebLogic使用什么SAAJ包

> ID：10341520
> 
> 赞同：2
> 
> 时间：2012-04-26T21:13:29.770
> 
> 标签：soap, weblogic, weblogic11g, saaj

我遇到了很多问题，因为 SOAP 类有不同的 SAAJ 包：

*   `com/sun/xml/internal/messaging/saaj/soap/` 在 rt.jar
*   `com/sun/xml/messaging/saaj/soap/` 在 saaj-impl.jar 中

当 WebLogic 使用来自 的类`com/sun/xml/internal/messaging/saaj/soap/`并使用来自 的类创建应用程序时`com/sun/xml/messaging/saaj/soap/`，它会在部署应用程序时引发如下异常：

`com.sun.xml.internal.messaging.saaj.soap.LocalStrings != com.sun.xml.messaging.saaj.soap.LocalStrings`

或者

`java.lang.NoClassDefFoundError: com/sun/xml/internal/messaging/saaj/soap/SAAJMetaFactoryImpl`

我的解决方案是创建一个带有 saaj 引用的 weblogic.xml 描述符，并将 saaj-impl.jar 包含到战争中。问题是：**我能知道 WebLogic Server 中使用的是什么 SAAJ 包吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T07:23:19.790

如果您使用 weblogic 10.3.3（或者我认为甚至是任何其他版本），则使用的 SAAJ 实现是安装的 JDK 运行时，因为 Web 服务器`jars`首先将 CLASSPATH 初始化为 JDK。所以你需要用你的 jar 文件覆盖它，这样它才能首先找到你想要的实现。对我有用的 weblogic 的唯一解决方案是像这样`PRE_CLASSPATH`在 weblogic`setDomainEnv.cmd`文件中设置，

```
 set PRE_CLASSPATH=%DOMAIN_HOME%\lib\endorsed\saaj-impl-1.3.18.jar 
```

借此`DOMAIN_HOME`表示 Weblogic 域，但它也可以是任何其他绝对路径来指向 jar。[此处](https://issues.apache.org/jira/browse/CXF-3307)还描述了有关该问题的一些信息

# java - 部署在 Mac 上的 JBoss AS7 应用找不到 com.apple.laf.AquaLookAndFeel

> ID：10341522
> 
> 赞同：5
> 
> 时间：2012-04-26T21:13:44.217
> 
> 标签：java, macos, jfreechart, jboss7.x, classnotfoundexception

我们正在从旧版本的 JBoss 迁移到 JBoss AS7，并且我们在应用程序的一部分中使用了 JFreeChart：

```
chart = ChartFactory.createStackedBarChart( "", "", "Data", dataset,
            PlotOrientation.HORIZONTAL, true, false, false ); 
```

当我们点击这一行时，我们得到下面的堆栈跟踪，表明无法找到 com.apple.laf.AquaLookAndFeel。我们只在 Mac 上看到这个问题，考虑到 com.apple.laf 包名称，这是有意义的。在 Linux 服务器上运行似乎工作正常。我们需要做些什么来让 Mac 上的 AS7 识别 Apple 的外观和感觉类吗？

截至 2012 年 4 月 26 日，我尝试过的所有 Mac 都已完全更新。我还没有找到一个有一些较旧的 JVM。

堆栈跟踪：

```
15:38:30,125 SEVERE [javax.enterprise.resource.webcontainer.jsf.lifecycle] (http--0.0.0.0-8080-1) JSF1054: (Phase ID: RENDER_RESPONSE 6, View ID: /blah/blah/blah/blahInfo.xhtml) Exception thrown during phase execution: javax.faces.event.PhaseEvent[source=com.sun.faces.lifecycle.LifecycleImpl@3dc264b1]
15:38:30,129 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/mgmt].[Faces Servlet]] (http--0.0.0.0-8080-1) Servlet.service() for servlet Faces Servlet threw exception: java.lang.ClassNotFoundException: com.apple.laf.AquaLookAndFeel from [Module "deployment.blah_war-1001.0-SNAPSHOT.war:main" from Service Module Loader]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
    at java.lang.Class.forName0(Native Method) [classes.jar:1.6.0_31]
    at java.lang.Class.forName(Class.java:247) [classes.jar:1.6.0_31]
    at javax.swing.SwingUtilities.loadSystemClass(SwingUtilities.java:1856) [classes.jar:1.6.0_31]
    at javax.swing.UIManager.setLookAndFeel(UIManager.java:563) [classes.jar:1.6.0_31]
    at javax.swing.UIManager.initializeDefaultLAF(UIManager.java:1329) [classes.jar:1.6.0_31]
    at javax.swing.UIManager.initialize(UIManager.java:1422) [classes.jar:1.6.0_31]
    at javax.swing.UIManager.maybeInitialize(UIManager.java:1410) [classes.jar:1.6.0_31]
    at javax.swing.UIManager.getDefaults(UIManager.java:645) [classes.jar:1.6.0_31]
    at javax.swing.UIManager.getColor(UIManager.java:687) [classes.jar:1.6.0_31]
    at org.jfree.chart.JFreeChart.<clinit>(JFreeChart.java:261) [jfreechart-1.0.13.jar:]
    at org.jfree.chart.ChartFactory.createStackedBarChart(ChartFactory.java:950) [jfreechart-1.0.13.jar:]
    at this.is.our.code.DisplayChart.buildChart(DisplayChart.java:73) [classes:] 
```

现在我们已经能够通过在启动 JBoss 时将默认外观指定为系统属性来解决这个问题：

```
-Dswing.defaultlaf=javax.swing.plaf.metal.MetalLookAndFeel 
```

这似乎更像是一种 hack，所以如果有更好的方法，我们想尝试一下。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-27T16:36:54.077

我不确定如何测试究竟在哪里添加它，但你需要添加`com.apple.laf,com.apple.laf.resources`为依赖项。在 AS 7 附带的 CLI GUI 中，它在`JAVA_OPTS`with中定义`-Djboss.modules.system.pkgs=com.apple.laf,com.apple.laf.resources`。您可以将其添加到您的`standalone.conf`或`domain.conf`取决于您正在运行的模式。

您也可以尝试添加`Dependencies: com.apple.laf,com.apple.laf.resources`到您`MANIFEST.MF`的部署中。我不确定这是否可行，但它可能值得一试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-24T18:17:28.783

不确定是否相关，但对我来说，添加`fork="true`到`<java ...>`Ant 文件中的任务有帮助。

来源： http: [//lists.apple.com/archives/java-dev/2004/Oct/msg00529.html](http://lists.apple.com/archives/java-dev/2004/Oct/msg00529.html)

# oracle - Oracle Portal 的 Repository Creation Utility 需要多长时间

> ID：10341523
> 
> 赞同：2
> 
> 时间：2012-04-26T21:13:52.117
> 
> 标签：oracle, webcenter

我正在运行 Oracle 存储库创建实用程序 (RCU) 作为安装 WebCenter 的前导，并且模式创建过程停留在“门户”步骤。前 10-12 个步骤每个都用了不到 30 秒的时间完成，而最后一个步骤则持续了 2 小时 14 分钟。

我检查了 rcu 日志文件，它们不断更新新的进度信息，就好像该过程仍在工作一样。我无法在互联网上找到其他有此问题的人。从谷歌上的各种截图来看，在某些情况下，它看起来可以在 10 分钟内完成。

![在此处输入图像描述](../Images/28bed4a0d1b7b90ea12a438415d830a4.png)

有没有人经历过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:32:13.950

自从我们安装 Portal 以来已经有很长时间了，但绝对没有花这么长时间。我会四处寻找最近修改的日志文件并跟踪它们以查找错误...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T18:13:24.603

这很奇怪，因为我经常针对虚拟机运行此程序。它永远不会超过几分钟。需要版本来进一步提供帮助。

# c# - 区分键盘的真实和虚拟按键

> ID：10341525
> 
> 赞同：2
> 
> 时间：2012-04-26T21:13:56.323
> 
> 标签：c#, keyboard, keypress

我正在用 C# 编写一个程序，它必须模拟键盘的按键命令。

问题是 - 我需要模拟“真实”的键盘按钮点击，而不是假的。例如，据我了解：

*   当用户按下键盘上的任何按钮时 - 信号通过 USB 发送，然后通过键盘驱动程序继续。

*   当使用 API（SendInput、SendKeys、KeyBoardEvent 或其他）时 - 我们绕过 USB 和驱动程序，因此基本上可以通过全局挂钩方法跟踪这些类型的按下。

**你如何模拟逼真的按键？**

*   我没有 C++ 知识，所以编写自定义驱动程序不是一种选择。

*   我不介意使用微控制器或任何其他硬件“解决方案”，只要它便宜..

*   也许可以通过 USB 电缆连接两台 PC，以便将真实的键盘按钮按下信号从 PC2 发送到 PC1？

那么方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T12:34:43.037

您可以使用全局键盘挂钩 (WH_KEYBOARD_LL) 识别使用 SendInput() 发送的键盘事件。它的回调方法[LowLevelKeyboardProc](http://msdn.microsoft.com/en-us/library/ms644985%28v=vs.85%29)接收 KBDLLHOOKSTRUCT[作为](http://msdn.microsoft.com/en-us/library/ms644967%28v=vs.85%29)参数。

如果在 KBDLLHOOKSTRUCT.flags 中设置了 LLKHF_INJECTED 标志，则键盘事件被 SendInput() 注入。

# c# - 错误“名称空间'System.Web'中不存在类型或名称空间名称'Script'”背后是否有解释

> ID：10341526
> 
> 赞同：8
> 
> 时间：2012-04-26T21:14:02.443
> 
> 标签：c#, asp.net, deployment, iis-7

我在 Visual Studio Express 2010 中创建了一个“ASP.NET 空网站”。

在 App_Code 的代码文件中，我有一行“使用 System.Web.Script.Serialization；”

当我将文件推送到服务器时，出现以下错误：

> 异常消息：c:\inetpub[....]\Extensions.cs(10)：错误 CS0234：命名空间“System.Web”中不存在类型或命名空间名称“脚本”（您是否缺少程序集引用?)

（服务器运行 Windows Server 2008，安装了 IIS 7 和 ASP.NET 4.0。）

由于这是一个网站，而不是一个 Web 项目，因此我无法使用此处推荐的“发布”功能：[名称空间“System.Web”中不存在类型或名称空间名称“脚本”](https://stackoverflow.com/questions/1521212/the-type-or-namespace-name-script-does-not-exist-in-the-namespace-system-web)

最后，经过一番挖掘，我发现这个命名空间包含在 System.Web.Extension 程序集中，我必须通过 web.config**手动包含它：**

```
<compilation debug="true" targetFramework="4.0">
    <assemblies>
        <add assembly="System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    </assemblies>
</compilation> 
```

所以，**我的问题是：**有没有更好的方法来解决这个问题？

由于我的本地项目不需要这些，我如何首先确定我需要手动引用哪些程序集，其次，我如何获取进行引用所需的信息（即，我如何获取 PublicKeyToken） ?

**更新**

因为这是一个网站而不是一个 Web 项目，所以*直到*我手动将它们添加到 Web.Config 之后，我的参考列表才会显示出来。

因此，在这种情况下，将“复制本地”选择为“真”不起作用。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-26T21:22:14.953

`System.Web.Extensions`看起来您的提供商在 GAC中没有 dll 。

命名空间`System.Web.Scripts`是`System.Web.Extensions.dll`.

如果你这样做，你可以解决你的问题。

1.  `System.Web.Extensions`在您的项目中选择
2.  转到属性选项卡并设置`Copy Local`为`true`

这可确保您也部署此 dll。

![在此处输入图像描述](../Images/66a01a166c79b6a7242dd3aa29901347.png)

![在此处输入图像描述](../Images/20805c73c03cf703c420d5d8b03edb2e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T22:08:43.353

您可以在您的网站项目中右键单击项目名称/位置，然后选择*添加引用*...。从那里将显示一个对话框。选择 .NET 选项卡并选择 System.Web.Extensions。这应该将其添加到项目中。您可以对需要添加的任何命名空间执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T21:25:09.320

只需添加 System.Web.Extensions 作为对您项目的引用。您不必通过 web.config 手动执行此操作。将 Copy Local 设置为 true 以确保它包含在您的发行版中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-17T13:56:13.030

我的问题很相似，因为我正在做一个 WPF 应用程序。添加 Extensions 引用不足以让 Intelisense 检测到我需要使用什么来实例化 JavaScriptSerializer。后来我发现我需要使用 System.Web.Script.Serialization 添加；然后它终于奏效了:)

# excel - Excel十进制四舍五入？

> ID：10341527
> 
> 赞同：5
> 
> 时间：2012-04-26T21:14:06.200
> 
> 标签：excel, decimal, rounding

如何在 excel 中舍入一个数字，例如通过格式化它以使实际数字发生变化，而不仅仅是它在单元格中的外观。

例如，如果我在一个单元格中有 229.729599999998 并且我将单元格格式化为仅显示 4 个小数位，它现在将在单元格中显示 229.7296 但单元格的值仍然是 229.729599999998 所以如果我要进行任何计算，excel 会使用较长的十进制数与 4 位十进制数相反。

有没有办法我可以做到这一点，不仅单元格中数字的外观显示 4 个小数位，而且单元格的实际值将反映 4 个小数位，以便单元格和公式栏中的值将显示 229.7296 而不是 229.729599999998。

我知道我可能可以在相邻单元格中使用函数或公式来对数字进行四舍五入，但我只是把一个巨大的电子表格放在一起，如果我必须对我的分布中的所有单元格做同样的事情，那将需要很长时间床单。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-20T19:26:32.200

只需将数字复制到工作表中并将其另存为新的 CSV。然后关闭CSV并再次打开它，你的数字被四舍五入......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-26T22:05:14.103

还有另一个选项：使用“显示的精度”设置（在计算选项下找到）。

来自excel帮助

> 将单元格中存储的值从全精度（15 位）永久更改为显示的任何格式，包括小数位。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-26T21:19:59.937

我能想到的两种方法是：

*   如果是一次性的：创建一个新选项卡，其中每个单元格都是根据原始工作表计算的，例如在单元格 A1 中：`=ROUND(OriginalTab!A1,4)`等。然后将特殊值复制粘贴回原始工作表。
*   运行一个 vba 宏，将工作表上的每个单元格四舍五入到小数点后 4 位。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-27T21:35:12.897

可以使用可以更改小数但不包含所有尾随数字的公式来对小数进行四舍五入。

我更喜欢替代方法，但我会同时展示

首先取值（输入或公式）减去 int 并乘以 100。这将使十进制值成为整数。使用 MROUND 进行舍入。现在将其除以 100 并加回原始整数。

示例： =((MROUND(((K7-J8)-INT(K7-J8))*100,10))/100)+INT(K7-J8) 如果值为 229.729599999998 则新值 229.700000000000

替代方法取决于您想要的小数位数。MOD(value,1) 为您提供小数部分 * 100 两位数 1000 位 3 位 10000 位 4 位等 1000 3 个位置，最后将其添加回整数或值。

前任。=(MROUND(INT(MOD(U9,1)*1000),10))/1000+INT(U9) 这将使数字 229.730

# php - PHP 读取 SQL 查询 - 选择 2 个值 - 对特定行值运行一些数学运算 将值添加到新列？

> ID：10341529
> 
> 赞同：0
> 
> 时间：2012-04-26T21:14:19.067
> 
> 标签：php, mysql, arrays

问题：我有一个我调用的 SQL 查询。我希望能够将其拉入一个数组（我现在这样做），然后从每一行中提取一个特定值，运行一些数学运算（我有这个），然后将这个数学运算的结果添加到一个值中查询的结尾（或开头），然后在同一数组或新数组上可用。

这是为了计算出构成 SQL 查询一部分的当前位置，然后计算出每个事件（每行一个）与该位置的距离。

SQL 查询 -> 检查事件位置 -> 在当前位置运行距离数学到事件 -> 重新编译为数组作为（SQL 查询 + 距离）准备 json 输出。

我将补充一点，我已经设法为 xml 输出做到这一点，但在操作数组方面我仍然是菜鸟......

谢谢

人族

```
 // Connect to database server   
$con = mysql_connect($config_databaseServer,$config_databaseUsername,$config_databasePassword) or die(mysql_error());
mysql_select_db($config_databaseName, $con);    

// Access tables    
$sql = "SELECT * FROM " . $config . " WHERE LAT <" . $toplat . " AND LAT > " . $bottomlat . " AND LONG > " . $leftlon . " AND LONG < " . $rightlon . " AND VALIDPERIOD_STARTOFPERIOD < '" . $nowtime . "' AND VALIDPERIOD_ENDOFPERIOD > '" . $nowtime ."')";

// Execute query
$result = mysql_query($sql) or die(mysql_error());

$lata = $latitude;
$lona = $longitude;
    // Need to populate these from each row values in the query
$latb = $sqllat;
$lonb = $sqllong;                   
// need to place this in to a colum at the end of each row
    $distancefromevent = coordDistance($lata, $longa, $latb, $lonb, "m");

    // need to reform all the above so I can carry on and use the code that follows

$responses = array();
if(mysql_num_rows($result)) {
  while($response = mysql_fetch_assoc($result)) {
    $responses[] = array('dataitem'=>array_map('utf8_encode',$response));
  }
}

header('Content-type: application/json');
$json = json_encode(array($config_datexdeftype=>$responses));

$callback = $_GET[callback];
echo $callback . '(' . $json . ')';

};

return TRUE; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:41:05.990

这应该有效。

`[...]`请注意，为了便于阅读，一些长代码已被替换为。

```
// Connect to database server   
$con = mysql_connect([...]) or die(mysql_error());
mysql_select_db($config_databaseName, $con);    

// Access tables    
$sql = "SELECT * FROM " . $config . " WHERE [...]";

// Execute query
$result = mysql_query($sql) or die(mysql_error());

// Prepare the loop
$lata = $latitude;
$lona = $longitude;
$responses = array();

// Loop over each records (stay correct even if there is no record)
while($response = mysql_fetch_assoc($result)) {
    // we assume that latitude and longitude are given by
    //  columns 'lat' and 'lon' in the SQL query.
    $latb = $response['lat']; 
    $lonb = $response['lon'];
    $distancefromevent = coordDistance($lata, $longa, $latb, $lonb, "m");
    $response['distance'] = $distancefromevent;
    $responses[] = array('dataitem'=>array_map('utf8_encode',$response));
}

header('Content-type: application/json');
$json = json_encode(array($config_datexdeftype=>$responses));

$callback = $_GET[callback];
echo $callback . '(' . $json . ')';

return TRUE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T21:25:36.357

想要通过 SQL 查询计算某个位置（经纬度）之间的距离吗？

如果是，这就是方式： [https ://developers.google.com/maps/articles/phpsqlsearch?hl=hu-HU](https://developers.google.com/maps/articles/phpsqlsearch?hl=hu-HU)

# php - AZ 列表中的回显数组

> ID：10341531
> 
> 赞同：2
> 
> 时间：2012-04-26T21:14:44.187
> 
> 标签：php, arrays, loops, alphabetical

假设我有以下数组：

```
$aTest = array('apple', 'pear', 'banana', 'kiwi', 'pineapple', 'strawberry'); 
```

我需要能够从 AZ 创建一个列表，并在每个字母下显示数组中的相关值。例如 A - 苹果，B - 香蕉，C - 空，D - 空，... K - 猕猴桃 .. P - 梨、菠萝等。

有人可以帮帮我吗？我假设我使用范围从 AZ 循环，但我不确定如何从数组中回显相关值（以及每个字母中的字母顺序，即梨在菠萝之前）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T21:20:43.310

我建议你用`sort()`它们来整理它们。然后，跟踪第一个字母。每当它发生变化时，保存并输出它。

```
sort( $aTest );

$currChar = '';
foreach ( $aTest as $word) {
  if ( $word[0] != $currChar ) {
    $currChar = $word[0];
    echo $currChar . PHP_EOL;
  }
  echo $word . PHP_EOL;
} 
```

从您的初始数组中，这将产生以下内容：

```
a
apple
b
banana
k
kiwi
p
pear
pineapple
s
strawberry 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T21:37:44.670

通过使用条件和一些内置函数；这段代码有点粗糙，但它可以解决问题：

```
<?php
    $aTest=array('apple','pear','banana','kiwi','pineapple','strawberry');
    $len=(count($aTest)-1);
    $letters=array('a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z');
    $str=null;
    foreach($letters as $letter) {
        for($i=0;$i<=$len;$i++) {
            $str=strtoupper($letter).' - ';
            if(strtolower(substr($aTest[$i],0,1))==strtolower($letter)) {
                $str.=$aTest[$i];
                break;
            } elseif($i==$len) {
                $str.='empty';
            }
        }
        echo($str.'<br />');
    }
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T21:22:39.070

```
<?php
$aTest = array('apple', 'pineapple', 'banana', 'kiwi', 'pear', 'strawberry');

$range = range('a','z');

$output = array();

foreach($range AS $letters){
    foreach($aTest AS $fruit){
        if(strtolower($fruit[0]) == $letters){
            $output[$letters][] = $fruit;
        }
    }
}

foreach($output AS $letter => $fruits){
    echo $letter . "<br/>--------<br/>\n";
    sort($fruits);
    foreach($fruits AS $indFruit){
        echo $indFruit . "<br/>\n";
    }
    echo "<br/>\n";
}
?> 
```

# optimization - 从 GHC 中哄骗循环不变的代码运动

> ID：10341537
> 
> 赞同：7
> 
> 时间：2012-04-26T21:15:07.487
> 
> 标签：optimization, haskell

我一直在为 GHC 中的低级手动循环优化而苦苦挣扎。我的程序包含一些执行数值计算的循环。真实数据包装在其他数据结构中，程序被分解为“循环控制流函数”和“计算函数”，这样一些数据结构字段最终会在内部循环中被读取。我希望 GHC 将这些读数移出内部循环。这是代码的简化版本，以显示发生了什么。

```
data D = D !Double !C
data C = C Double

-- This function is called in every loop iteration.
-- Parameter 'c' is loop-invariant.
exampleLoopBody i a c =
  case c of C b -> a + b * fromIntegral i

-- The body of this function is a counted loop that should be optimized
foo x =
  case x
  of D acc0 c ->
    let loop i acc =
          if i > 100
          then acc
          else loop (i+1) (exampleLoopBody i acc c)
    in loop 0 acc0 
```

每个循环迭代都会计算`case c of C b`，但这是冗余计算，因为`c`它是循环不变的。我可以通过在循环之外放置一个冗余的 case 表达式来使 GHC 将其取出：

```
foo x =
  case x
  of D acc0 c ->
    case c             -- This case statement inserted for optimization purposes
    of C b -> b `seq`  -- It will read 'b' outside of the loop
      let loop i acc =
           if i > 100
           then acc
           else loop (i+1) (exampleLoopBody i acc c)
      in loop 0 acc0 
```

编译器内联`exampleLoopBody`. 之后，内部 case 语句是多余的并被消除：

```
foo x =
  case x
  of D acc0 c ->
    case c
    of C b -> b `seq`
      let loop i acc =
            if i > 100
            then acc
            else loop (i+1) (acc + b * fromIntegral i) -- The inlined case expression disappears
      in loop 0 acc0 
```

的目的`seq`是确保 case 表达式不是死代码。`seq`检查是否`b`为. `_|_`GHC 注意到，既然`b`已经计算过了，那么在循环体中重用该值是很有用的。

现在，问题来了：我真的希望所有相关的数据字段都是严格的。如果我在数据定义中插入严格性注释，像这样，

```
data C = C !Double 
```

那么`seq`和`case c of C b`就GHC而言没有任何影响。GHC 删除了它们，我得到了这个：

```
foo x =
  case x
  of D acc0 c ->
    let loop i acc =
          if i > 100
          then acc
          else loop (i+1) (case c of C b -> acc + b * fromIntegral i) -- Evaluate the case in every iteration
     in loop 0 acc0 
```

这段代码在每次迭代中都会进行评估`case c of C b`，这正是我试图避免的。

如果我不能依赖`seq`，我不知道如何强制`b`在循环体之外进行计算。在这种情况下我可以使用一些技巧吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T21:39:01.787

您可以尝试重新排列参数并将循环变体部分移动到 lambda 中：

```
-- note the order of the arguments changed
exampleLoopBody (C b) =
  \i a -> a + b * fromIntegral i

foo (D acc0 c) =
    let
       loopBody = exampleLoopBody c 
       loop i acc =
          if i > 100
         then acc
         else loop (i+1) (loopBody i acc)
   in loop 0 acc0 
```

此外，此代码此时会构建一个大型未计算表达式，因此您可能希望每次循环都强制累加器参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T21:48:34.810

这看起来基本上整个原因`newtype`都放在了语言中。只需更改`data C = C !Double`并`newtype C = C Double`编写代码的幼稚版本。类型值的所有`case`表达式`C`都将被删除。作为旁注，您在示例中的代码模式：

```
case foo of
    D acc0 c -> case c of
        C b -> ... 
```

可以更简洁地写成：

```
case foo of
    D acc0 (C b) -> ... 
```

# c# - 获取泛型 List 的 T 类型 目的

> ID：10341538
> 
> 赞同：2
> 
> 时间：2012-04-26T21:15:12.450
> 
> 标签：c#, list, generics, reflection

> **可能重复：**
> [反射 - 从 System.Type 实例](https://stackoverflow.com/questions/293905/reflection-getting-the-generic-parameters-from-a-system-type-instance)
> [获取泛型参数 在泛型 List<T> 中获取 T 的实际类型](https://stackoverflow.com/questions/3689308/get-actual-type-of-t-in-a-generic-listt)

我正在从一个类中循环一个 PropertyInfo-List。在这堂课中，我对不同的列表感兴趣——例如`List<int>`, `List<string>`, `List<Book>`, aso。

但我不知道如何获得列表对象的类型。我只是得到类似的东西

```
System.Collections.Generic.List`1[[System.String, mscorlib, Version=4.0.0.0, Culture=neutral, 
PublicKeyToken=b77a5c561934e089]]. 
```

我可以把这些信息拆开，从这些信息中创建一个类型，但我希望有一个更顺畅的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T21:16:45.883

简单的：

```
Type type = list.GetType().GetGenericArguments()[0];
// The first argument will be the `T` inside `List<T>`... so the list type ;) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T21:17:44.300

```
var  list = GetListFromFoo();
Type listType = list.GetType();
Type theTypeOfT = listType.GetGenericArguments()[0]; 
```

或者用一行：

```
list.GetType().GetGenericArguments()[0]; 
```

# ruby - 如何解决捆绑器中的依赖问题？

> ID：10341546
> 
> 赞同：5
> 
> 时间：2012-04-26T21:15:50.490
> 
> 标签：ruby, bundler

我想使用最新版本的 oauth2 gem，我将它添加到我的 gemfile 并运行 bundle install。

```
Bundler could not find compatible versions for gem "multi_json":
  In Gemfile:
    oauth2 (= 0.7.0) ruby depends on
      multi_json (~> 1.3) ruby

    uglifier (>= 0) ruby depends on
      multi_json (1.0.4) 
```

哦，好的，我会更新 uglifier`bundle update uglifier`

```
Bundler could not find compatible versions for gem "faraday":
  In snapshot (Gemfile.lock):
    faraday (0.5.7)

  In Gemfile:
    oauth2 (= 0.7.0) ruby depends on
      faraday (~> 0.8) ruby 
```

嗯，那我试试`bundle update oauth2`？

```
Bundler could not find compatible versions for gem "multi_json":
  In Gemfile:
    oauth2 (= 0.7.0) ruby depends on
      multi_json (~> 1.3) ruby

    uglifier (>= 0) ruby depends on
      multi_json (1.0.4) 
```

哦，是的。这就是我一开始就想做的。`gem 'uglifier', "~> 1.2.4"`好吧，也许我可以再次指定最新版本的 uglifier `bundle update uglifier`。

```
Bundler could not find compatible versions for gem "faraday":
  In Gemfile:
    oauth2 (~> 0.7.0) ruby depends on
      faraday (~> 0.8) ruby

    instagram (>= 0) ruby depends on
      faraday (0.5.7) 
```

嗯，`bundle update instagram`是的。不 - 回到 instagram 和 oauth2 之间的 multi_json 不兼容问题。

你如何解决这样的问题？这只是需要更新 Instagram gem 以使用更新的多 json 版本的问题吗？或者还有什么我应该尝试的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T01:57:31.437

立即清除您的 GEM 目录，然后执行新的捆绑命令。认为这就像重置计算机。

$GEM_PATH 是您的宝石所在的位置（每条路径用两个点分隔）

bundle show gem_name （也会告诉你你的宝石在哪里）

# javascript - 如何在 Bing Maps v7 中禁用鼠标滚动标记

> ID：10341548
> 
> 赞同：2
> 
> 时间：2012-04-26T21:16:01.207
> 
> 标签：javascript, ajax, bing-maps

**标题很好地解释了它。**

我正在使用“Bing Maps AJAX 控件，版本 7.0”。我成功地禁用了鼠标滚轮放大和缩小地图。但是，如果我将鼠标悬停在地图上的标记（图钉）上，它仍然会放大和缩小。

**下面是我用来禁用鼠标滚轮的代码：**

```
Microsoft.Maps.Events.addHandler(map, 'mousewheel', function(e) {
  if(e.targetType == 'map') {
    e.handled = true;
  }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T16:37:22.353

以下代码对我来说很好：

```
Microsoft.Maps.Events.addHandler(map, 'mousewheel', function(e) {
    e.handled = true;
    return true;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-05T19:54:07.813

对于可能遇到此问题并想知道如何在 Bing Maps AJAX API v7 中完全禁用缩放（即通过滚轮或其他方式）的其他人，方法如下：

> ```
> var options = {
>    credentials: 'put-your-credentials-here',
>    **disableZooming: true** 
> ```
> 
> }
> 
> map = new Microsoft.Maps.Map(document.getElementById('myMap'), options);

Bing Maps API 提供其他 MapOptions，[如此处](http://msdn.microsoft.com/en-us/library/gg427603.aspx)所述。

关于@Mike Henken 的问题：

> 但是，如果我将鼠标悬停在地图上的标记（图钉）上，它仍然会放大和缩小。

这似乎是 Bing Maps v7 API 中的一个错误，已于 2013 年 8 月 5 日修复。我无法再重现该问题。

# ruby - 简单 Sinatra 应用程序中的字符编码不兼容

> ID：10341550
> 
> 赞同：7
> 
> 时间：2012-04-26T21:16:41.717
> 
> 标签：ruby, character-encoding, sinatra

我有一个在 Ruby 1.9.3 上运行的非常简单的 Sinatra 应用程序，它使用 ERB 和 markdown 模板。我已经将其剥离以证明问题所在。

这是在 Mac OS X Snow Leopard 上运行 Sinatra 1.3.2。对于降价，我使用的是 rdiscount 1.6.8。

主 Ruby 文件包含

```
get '/services' do
  erb :services
end 
```

services.erb 文件中包含以下内容

```
<%= markdown :'content/service1' %>
£ 
```

在降价文件中，我只有一行

```
£ 
```

当我运行 Sinatra 应用程序并加载“服务”页面时，我`Encoding::CompatibilityError at /services incompatible character encodings: UTF-8 and ASCII-8BIT`在 ERB 文件的第二行（仅包含“£”的那个）上得到了异常。

我已经做了很多谷歌搜索，但我一生都无法弄清楚为什么会发生这种情况。ERB 和 markdown 文件在我的本地磁盘上是 UTF-8，但显然它们正在由 Sinatra 加载并转换为字符串，我不知道如何判断这些字符串的编码是什么。

如果我强制 Sinatra 使用 ASCII-8BIT（通过添加`settings.default_encoding = 'ASCII-8BIT'`到我的主 Sinatra Ruby 文件的顶部），则不会引发异常，但 '£' 字符看起来是错误的。

任何指针？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-27T01:50:53.297

这是[Tilt](https://github.com/rtomayko/tilt)中的一个问题，这是Sinatra 使用的模板系统（并且正在考虑用于 Rails）。看看问题[#75](https://github.com/rtomayko/tilt/issues/75)和[#107](https://github.com/rtomayko/tilt/pull/107)。

问题基本上归结于 Tilt 如何[从磁盘读取模板文件](https://github.com/rtomayko/tilt/blob/1.3.3/lib/tilt/template.rb#L67)- 它使用[`binread`](http://ruby-doc.org/core-1.9.3/IO.html#method-c-binread). 这意味着传递给实际模板引擎的源字符串具有关联的编码`ASCII-8BIT`，这基本上是说它是未知的。

RDiscount 具有[设置输出编码以匹配输入的代码](https://github.com/rtomayko/rdiscount/blob/1.6.8/ext/rdiscount.c#L34-L36)，但是当输入编码为 ; 时，这并没有多大帮助`ASCII-8BIT`；结果被赋予相同的编码。Kramdown 也会发生同样的事情（或类似的事情），所以简单地切换并不能解决这个问题。

当模板包含非 ascii 字符（即`£`）并且您尝试将结果与其他 utf-8 编码字符串组合时，这会导致问题。如果模板只包含 ascii 字符，则它与 utf-8 兼容，Ruby 可以将这两个字符串结合起来。如果没有，你会得到`CompatibilityError`你所看到的。

一种可能的解决方法是自己读取模板文件，并将具有正确编码的结果字符串传递给 Tilt：

```
<%= markdown File.read './views/pound.md' %>
£ 
```

通过使用[`read`](http://ruby-doc.org/core-1.9.3/IO.html#method-c-read)而不是自己读取文件`binread`，您可以确保它具有正确的编码，因此与文件的其余部分兼容`erb`。如果您尝试这样做，您可能希望一次读取文件并将内容缓存在某处。

另一种解决方法是捕获`markdown`方法的输出并[`force_encoding`](http://ruby-doc.org/core-1.9.3/String.html#method-i-force_encoding)在其上使用：

```
<%= markdown(:pound).force_encoding('utf-8') %>
£ 
```

这是可能的，因为尽管编码是`ASCII-8BIT`，但您知道字符串中的字节确实是 utf-8 编码的，因此您只需更改编码即可。

# ruby-on-rails - 在 rails 辅助模块中使用 attr_reader 是什么意思？

> ID：10341553
> 
> 赞同：2
> 
> 时间：2012-04-26T21:16:53.950
> 
> 标签：ruby-on-rails, ruby

```
module ProductsHelper
  attr_reader :products, :product    
end 
```

做上面的结果是什么？我在 Rails 指南中看到了这一点，只是不明白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T22:40:29.813

它将允许通过在视图中调用和从实例变量`@products`中读取值。您仍然需要在控制器中设置它们。`@product``products``product`

这些读者并没有真正提供太多帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T02:44:01.987

这是一个 Ruby 约定，它创建一个称为 product 的“getter”和另一个称为 products 的“getter”。

例如，如果您有一个相当于 ProductHelper.new的对象***ph 。***

```
ph = ProductHelper.new 
```

在该模块中存在一个实例变量。

```
def initialize
  @products = "awesomeness"
end 
```

如果不对模块进行发送，您将无法访问它，因为它会被视为该***ph***实例的私有。

*（如果以下内容令人困惑，请不要担心，因为作为 Rails 新手，您不会看到太多。当您进入元编程时，您会看到更多。）*

```
ProductsHelper.send :products 
```

但是 attr_reader 将允许您读取方法或变量，就好像它是实例的属性一样。

```
ProductHelper.products 
```

它基本上为您完成了这段代码。

```
def products
  @products # which is an instance variable within the instantiated object.
end 
```

尽管您通常只会在模型类中看到这些，而不是在 Modules 中……因为 Ruby 中的所有类都是模块，但这种行为也存在于该级别。如果您没有任何方法，那么将返回信息，然后调用 .products 只会返回 nil。

在 Ruby 中，也有 attr_writers 创建“setter”。

```
def products( value )
  @products = value
end 
```

这允许你这样做。

```
ph.products = "some awesome thing" 
```

最后，您还拥有 attr_accessor，它在一个操作中创建了 getter 和 setter。

# php - 如何轻松地将具有相同父节点的两个 XML 文档合并为一个文档？

> ID：10341556
> 
> 赞同：3
> 
> 时间：2012-04-26T21:17:34.597
> 
> 标签：php, xml, domdocument

我已经决定没有办法用 SimpleXMLElements 做到这一点。我一直在阅读 PHP DOMDocument 手册，我想我可以通过迭代来做到这一点，但这似乎效率低下。有没有更好的方法我没有想到？

伪代码迭代解决方案：

```
// two DOMDocuments with same root element
$parent = new ...
$otherParent = new ...

$children = $parent->getElementByTagName('child');
foreach ($children as $child) {
   $otherParent->appendChild($child);
} 
```

为清楚起见，我有两个 XML 文档，它们都如下所示：

```
 <parent>
      <child>
        <childOfChild>
           {etc, more levels of nested XML trees possible}
        </childOfChild>
      </child>
      <child>
        <childOfChild>
           {etc, more levels possible}
        </childOfChild>
      </child>

</parent> 
```

我想要这样的输出：

```
<parent>
  {all children of both original XML docs, order unimportant, that preserves any nested XML trees the children may have}
<parent> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T22:09:22.837

如果我准确而严格地提出您的问题，那么您可以在两个文件之间识别的唯一公共节点将是根节点，因此解决方案是：

```
<doc1:parent>
    <doc1:children>...</>
    <doc2:children>...</>
</doc1:parent> 
```

你写的顺序并不重要，所以你可以在这里看到，doc2 在 doc1 之后。两个 SimpleXML 元素的示例代码`$xml1`并`$xml2`包含上面的示例 XML 表单：

```
$doc1 = dom_import_simplexml($xml1)->ownerDocument;
foreach (dom_import_simplexml($xml2)->childNodes as $child) {
    $child = $doc1->importNode($child, TRUE);
    echo $doc1->saveXML($child), "\n";
    $doc1->documentElement->appendChild($child);
} 
```

现在`$doc1`包含此 XML 表示的文档：

```
<?xml version="1.0"?>
<parent>
      <child>
        <childOfChild>
           {etc, more levels of nested XML trees possible}
        </childOfChild>
      </child>
      <child>
        <childOfChild>
           {etc, more levels possible}
        </childOfChild>
      </child>

      <child>
        <childOfChild>
           {etc, more levels of nested XML trees possible}
        </childOfChild>
      </child>
      <child>
        <childOfChild>
           {etc, more levels possible}
        </childOfChild>
      </child>
</parent> 
```

如您所见，两个文档的树都被保留了，只有您描述为*相同*的节点是根节点（实际上也是两个节点），因此它没有从第二个文档中接管，而只是它的子节点。

# javascript - 用于自定义箭头按钮的 jscrollpane 连续滚动在 Safari 中不起作用

> ID：10341571
> 
> 赞同：1
> 
> 时间：2012-04-26T21:18:09.133
> 
> 标签：javascript, jscrollpane

我试图让我的自定义滚动按钮在鼠标按下时连续滚动。（而不是点击时滚动，顺便说一句效果很好）我找到了这个很好的例子（见下面的链接和代码），但是，对于我的页面，脚本在 Firefox 中有效，但在 Safari 中无效。示例页面**确实**可以在 Safari 中运行......有谁知道问题可能是什么？

[http://jsfiddle.net/WzNM4/6/](http://jsfiddle.net/WzNM4/6/)

```
$(function()
{
    var api = $('.scroll-pane').jScrollPane().data('jsp');
    $('#scroll-up').bind(
        'mousedown',
        function()
        {
            var interval = setInterval(
                function()
                {
                    api.scrollByY(-5);
                },
                100
            );
            $(window).bind(
                'mouseup.jspExample',
                function()
                {
                    clearInterval(interval);
                    $(document).unbind('.jspExample');
                }
            );
        }
    );
    $('#scroll-down').bind(
        'mousedown',
        function()
        {
            var interval = setInterval(
                function()
                {
                    api.scrollByY(5);
                },
                100
            );
            $(window).bind(
                'mouseup.jspExample',
                function()
                {
                    clearInterval(interval);
                    $(document).unbind('.jspExample');
                }
            );
        }
    );
});​ 
```

# jquery - 下载和使用 jquery.jOrgChart.js

> ID：10341574
> 
> 赞同：0
> 
> 时间：2012-04-26T21:18:28.413
> 
> 标签：jquery, download

我找到了对 jQuery 组织结构图的参考。我想从受信任的来源下载该库，但我发现的只是人们的示例代码。有谁知道我在哪里可以找到这样的下载？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:23:49.397

这看起来像原始来源。

[http://www.capricasoftware.co.uk/jquery/orgchart/jquery.orgchart.js](http://www.capricasoftware.co.uk/jquery/orgchart/jquery.orgchart.js)

CSS和图像：

[http://www.capricasoftware.co.uk/jquery/orgchart/](http://www.capricasoftware.co.uk/jquery/orgchart/)

更新：

看起来这里有一个更新版本（从原始版本分叉）：

[https://github.com/wesnolte/jOrgChart/](https://github.com/wesnolte/jOrgChart/)

这就是开源的工作方式，任何人都可以接受一个项目并向其中添加新内容并使其成为自己的（取决于许可证）。

# webpage - 网页在 IE9 live 中的渲染与本地渲染不同

> ID：10341576
> 
> 赞同：0
> 
> 时间：2012-04-26T21:18:57.143
> 
> 标签：webpage, html-rendering

我有这个网页在我的本地机器上看起来不错，但是一旦我现场部署它，它就会失去所有的格式：

[http://www.luc.edu/new/mba-dev/test/](http://www.luc.edu/new/mba-dev/test/)

我确保所有链接引用都是绝对的。谁能帮我弄清楚为什么会这样？

Firefox，Safari 看起来也不错，它只是 IE，但在本地看起来不错

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:34:24.017

您的代码中有一些错误，例如。在第 1300 行，你`('#excerpt').find('p')`应该`$('#excerpt').find('p')`也没有加载 pageslide js。Firefox 和 chrome 似乎比 ie 更容错，我还注意到 Ie 有一种在线模式和另一种离线模式我建议在进行 Web 开发时使用类似 firebug 的东西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T21:34:50.663

`http://www.luc.edu/new/mba-dev/test/js/jquery.pageslide.min.js`是**404**。

> SEC7112：来自 [https://raw.github.com/ethagnawl/ellipsify/master/jquery.ellipsify.js](https://raw.github.com/ethagnawl/ellipsify/master/jquery.ellipsify.js)的脚本因 MIME 匹配错误而被阻止

说IE9。我建议您将此文件托管在您的服务器上。

该页面在 IE9 中看起来不错，但在 IE7 中失败。

# iphone - UIPopoverController 在没有委托调用的情况下关闭

> ID：10341579
> 
> 赞同：10
> 
> 时间：2012-04-26T21:19:23.293
> 
> 标签：iphone, ios, mkmapview, uipopovercontroller

我有一个地图视图，我`annotations`根据`popovercontroller`. 当我在外部触摸时`popover`，它会正确关闭并调用该`delegate`方法`popoverControllerDidDismissPopover:` 我遇到的问题是，当我在`popover`（在弹出窗口视图中触摸）切换开关时，如果我`annotations`从地图中删除它，它的行为正确并且弹出窗口保持可见，但如果我将其添加`annotations`到地图视图中，则会`popover`消失并且`delegate`不会调用该方法。有没有人遇到过这种行为？

开关的 on 和 off 代码之间的唯一区别是一个`annotations`从数组中删除 ，而另一个添加`annotations`. 这只是添加`annotations`到地图视图时的问题。任何帮助或建议将不胜感激。

这是`popover`显示的方式：

```
-(IBAction)toggleMapFiltersView:(id)sender
 {
    LayerPopoverViewController *popOverViewController = [[LayerPopoverViewController alloc] init];
    [popOverViewController setDelegate:self];
    [popOverViewController setBranchesShowing:branchesShowing];
    [popOverViewController setSchoolsShowing:schoolsShowing];

    [layersButton setSelected:YES];

    popoverController = [[UIPopoverController alloc]   initWithContentViewController:popOverViewController];

    [popoverController setDelegate:self];
    [popOverViewController release];
    [popoverController presentPopoverFromRect:layersButton.frame
                                       inView:[self view] 
                     permittedArrowDirections:UIPopoverArrowDirectionAny 
                                     animated:YES];
} 
```

这是从弹出视图中调用的方法：

```
-(IBAction)toggleSchools:(id)sender
{
    if ([self.delegate respondsToSelector:@selector(didChangeSchoolsDisplaySettingWithVisible:)])
    {
        if ([schoolsSwitch isOn])
        {
        [self.delegate didChangeSchoolsDisplaySettingWithVisible:YES];
             self.schoolsShowing = YES;
        }
        else
        {
            [self.delegate didChangeSchoolsDisplaySettingWithVisible:NO];
            self.schoolsShowing = NO;
        }
    }
} 
```

这就是它所指的方法：

```
-(void)didChangeSchoolsDisplaySettingWithVisible:(BOOL)visible
{
    if (visible == YES)
    {
        schoolsShowing = YES;
        if (self.schoolArray != nil && [self.schoolArray count] > 0)
        {
            for (MySchool *school in self.schoolArray)
            {
                [mapView addAnnotation:school];
            }
        }
    }
    else
    {
        schoolsShowing = NO;
        for (id<MKAnnotation> annotation in mapView.annotations)
        {
            if ([annotation isKindOfClass:[MySchool class]])
            {
                [mapView removeAnnotation:annotation];
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T15:07:51.740

为什么首先使用弹出框？您可以更轻松地控制 customView。

您可以创建一个自定义 popupView，并将其放置在您喜欢的坐标上方。弹出窗口有一个关闭按钮，并委托调用此操作。

这是一些代码（在此示例中，坐标来自标记，mapView 是谷歌的）。您还必须将坐标转换为 CGPoint。

```
UIAnnotationView *annotation = [[UIAnnotationView alloc] initWithFrame:CGRectMake(0,0,100,100)];
                  annotation.delegate = self;
                  annotation.tag = 101;

CGPoint point = [mapView.projection pointForCoordinate:marker.position];
        annotation.origin =  CGPointMake(point.x - annotation.width / 2, point.y - annotation.height - MARKER_DEFAULT_SIZE);
        [mapView addSubview:annotation]; 
```

UIAnotaionView closeButtonClicked 委托：

```
- (void)annotationViewCloseButtonClicked:(UIAnnotationView *)annotationView
{
    [[_mapView viewWithTag:101] removeFromSuperview];
} 
```

要在触摸地图中的其他点时关闭 popupView，请覆盖此委托：

```
- (void)mapView:(GMSMapView *)mapView didTapAtCoordinate:(CLLocationCoordinate2D)coordinate
{
    [[_mapView viewWithTag:101] removeFromSuperview];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T13:50:49.267

您是否尝试过另一种委托方法

```
- (BOOL)popoverControllerShouldDismissPopover:(UIPopoverController *)popoverController {
    // do some stuff here and decide whether to dismiss or not
    return YES; //or No depending on your condition
} 
```

它会询问您是否要关闭 popOver 控制器。每次 popoverviewcontroller 即将关闭时都会调用它

否则，您可以在向 mapview 添加注释时调用方法。无论如何，您知道弹出窗口正在解雇。当弹出控制器关闭时执行相同的工作。正如你正在做的那样

```
- (void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController 
```

我希望这可以帮助你

# javascript - javascript / threejs - 围绕中心 y 轴（在 3D 空间中）在圆圈中移动对象的方程

> ID：10341581
> 
> 赞同：5
> 
> 时间：2012-04-26T21:19:36.043
> 
> 标签：javascript, math, three.js, 3d

我正在尝试使用threeJS，并且我已经放置了一个相机并正在查看场景的原点（0,0,0）。我想以设定的距离（半径）围绕 y 轴绕一圈移动该相机，同时保持其焦点在原点，但我不知道如何建立方程。目前，我只是在旋转物体本身，但我想旋转相机。这是我移动网格的代码：

```
function checkRotation(){
    if (keyboard.pressed("left")){
        mesh.rotation.y += .05;
    }

    if (keyboard.pressed("right")){
        mesh.rotation.y -= .05;
    }
} 
```

这是移动相机的某种示例：

camera.position.x = ??? （一些方程来移动它的 x 位置） camera.position.z = ??? （一些方程来移动它的 z 位置） camera.lookAt(mesh.position);

你能提供的任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-26T22:40:59.833

您可以按照以下方式手动设置相机的位置：

```
// let theta be the amount you want to rotate by
var x = camera.position.x;
var z = camera.position.z;

camera.position.x = x * Math.cos(theta) + z * Math.sin(theta);
camera.position.z = z * Math.cos(theta) - x * Math.sin(theta);
camera.lookAt(mesh.position); // or camera.lookAt(0, 0, 0); 
```

请参阅[http://en.wikipedia.org/wiki/Rotation_matrix#In_three_dimensions](http://en.wikipedia.org/wiki/Rotation_matrix#In_three_dimensions)了解关于 x、y 和 z 轴旋转的等效矩阵。

您还可以调整 TrackballControls 以使用键盘而不是鼠标。

默认轨迹球行为： http: [//mrdoob.github.com/three.js/examples/misc_camera_trackball.html](http://mrdoob.github.com/three.js/examples/misc_camera_trackball.html)

注意：我还没有测试过 - 我在工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T19:03:58.207

答案有点晚，但其他人可能希望查看 Three.js 附带的 OrbitControls（在示例/js/controls 中）。您可以将其设置为自动旋转。它会为你处理数学问题。

```
var controls = new THREE.OrbitControls(camera);
controls.autoRotate = true;
controls.autoRotateSpeed = [whatever speed you want]

camera.lookAt(new THREE.Vector3(0,0,0)); 
```

然后在您的 requestAnimationFrame 中调用更新函数...

```
controls.update(); 
```

如果您不希望用户能够自己控制相机位置，我相信您可以找到一种方法来禁用它，或者只是提取您需要的代码......

# ios - iOS的厨房水槽应用程序？

> ID：10341588
> 
> 赞同：-4
> 
> 时间：2012-04-26T21:20:13.117
> 
> 标签：ios, xcode

> **可能重复：**
> [是否有 iOS “厨房水槽”应用程序可以在任何地方获得源代码？](https://stackoverflow.com/questions/9941260/is-there-an-ios-kitchen-sink-app-with-source-code-available-anywhere)

我正在寻找一个与名为 Kitchen Sink 的 Titanium 应用程序等效的 iOS。有谁知道它是否存在？我看到了 Kitchen Sink 并相信它是一个了不起的学习工具。iOS上的等效应用程序将是无价的......

我搜索了这个站点并找到了建议，但它们都只是 HTML 页面。我正在寻找一个真正的交互式应用程序，它允许用户与每种类型的控件进行交互。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T17:42:55.983

试试[ios 样板](http://iosboilerplate.com/)

根据他们的网站，它是：

*   iOS 应用程序的基本模板
*   它旨在提供启动代码的基础
*   它不是一个框架
*   它旨在由开发人员修改和扩展以满足他们的需求
*   如果需要不重新发明轮子，它包括可靠的第三方库。”

另外：“iOS Boilerplate 包括有关以下主题的帮助类和示例：”

*   HTTP 请求和图像缓存（基于内存和基于磁盘）
*   UITableViews 和 UITableViewCells：快速滚动、异步图像、下拉刷新、可滑动单元格
*   内置浏览器，让您的用户在浏览到某个 URL 时不会离开您的应用程序
*   地图和位置：两点之间的方向，自动完成位置等。”

那是你要找的吗？

# c++ - 快速部分排序对象

> ID：10341590
> 
> 赞同：1
> 
> 时间：2012-04-26T21:20:18.973
> 
> 标签：c++, boost-ptr-container

我有一个例程，在其中定义了一堆对象（大约 20 个），称为它们`Jet`，它们有一个`<`我用来对它们进行排序的定义。排序后，我取最低的两个。有什么快速的方法来做到这一点？到目前为止我想到的选项：

1.  `boost::ptr_vector<Jet>`使用内置的`.sort()`，取前两个，
2.  `boost::ptr_list<Jet>`, 使用`.sort()`, 取前两个
3.  使用上面的列表，而不是排序，使用`max_element`，删除元素，然后再次运行。

我认为 using`std::vector<Jet>`是最糟糕的选择，因为：我不需要随机访问；排序将在内存中移动对象；并且在调用时将复制对象`push_back(Jet)`。由于需要复制，我还假设 an`std::list<Jet>`会比`boost::ptr_list<Jet>`. 我进一步假设采取`max_element`两次会比对整个列表进行排序更快。

我的逻辑合理吗？性能差异会很大吗？还有其他我没有想到的选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T21:24:49.057

您的假设之​​一是正确的，因为存储指针而不是对象会更快。

但是，如果您只需要两个最小的元素，则无需对任何内容进行排序。只需取前两个元素，然后遍历`vector`or的元素`list`并保留较小的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T23:27:00.913

有一个[标准库算法](http://en.cppreference.com/w/cpp/algorithm/partial_sort)可以做到这一点：

```
std::vector<Jet> v;
// populate v
std::partial_sort(v.begin(), v.begin() + 2, v.end()); 
```

`v[0]`现在是最小的元素，`v[1]`现在是第二小的元素；其余元素的顺序未指定。`std::vector<>`可以用 代替`std::deque<>`，因为后者也有随机访问迭代器。

（请注意，我链接到的页面上提到的复杂性是不正确的；C++11 §25.4.1.3 说复杂性是`(last - first) * log(middle - first)`。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T21:24:34.687

如果您需要最低的两个对象，您可以创建自己的搜索功能，该功能将在 O(N) 时间内运行。使用排序是 O(N log N) 时间。

# socket.io - SockJS 还是 Socket.IO？值得重新编码基于 ajax 的页面吗？

> ID：10341593
> 
> 赞同：30
> 
> 时间：2012-04-26T21:20:30.020
> 
> 标签：socket.io, server-push, reverse-ajax

哪个更好：[Socket.IO](http://socket.io/#home)或[SockJS](https://github.com/sockjs/sockjs-client)，最大的区别是什么？

将完全基于 ajax 的页面重建为基于 node.JS / socket.io 的页面有多难？我必须完全重新编码所有内容吗？有没有关于如何做到这一点的好教程？这样做是否值得（在您看来）？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-08T23:16:17.820

SockJS 有更多可用的服务器端选项。如果您不想绑定到 Node.js，那么它可能是一种选择。从使用 PyPy 托管服务器端部分的一些基准测试来看，缩放似乎效果最好。

socket.io 有更多传输选项，包括 Flash。即使您不喜欢 flash，它也可以选择**真正的**WebSocket 传输，根据您的实现需求，它可能会更好地工作。

事实是，要么完成工作，这取决于你的愿望。我建议在每个应用程序中创建一个简单的应用程序，看看你的 API 是否更自然。

就个人而言，我更倾向于使用 socket.io ...我还要说，如果您需要使用集群进行扩展，您可能还需要制定一个策略来使用 pub/sub 服务器（例如 redis）因为不同的请求可能会到达不共享内存状态的不同进程。

* * *

另外值得注意的是，.Net 是否有一个类似的框架，称为[SignalR](https://github.com/SignalR/SignalR/) ...

# android - 控制 Android ListView 上下运动

> ID：10341596
> 
> 赞同：1
> 
> 时间：2012-04-26T21:20:53.747
> 
> 标签：android, listview, button, scroll, controls

我想创建两个`Button`对象来控制`ListView`.

当我单击 btn_up 时，我想`ListView`向上滚动。当我单击 btn_down 时，我希望`ListView`向下滚动。

我怎样才能做到这一点？

```
<LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="fill_parent"
        android:layout_height="450px" android:layout_marginTop="75px">

        <ListView
            android:id="@+id/listview"
            android:layout_width="844px"
            android:layout_height="fill_parent" >
        </ListView>

        <LinearLayout
            android:id="@+id/linearLayout3"
            android:layout_width="180px"
            android:layout_height="450px"
            android:orientation="vertical" >

            <Button
                android:id="@+id/btn_up"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:background="@drawable/btn_yukari" android:layout_weight="1"/>

            <Button
                android:id="@+id/btn_down"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:background="@drawable/btn_asagiya" android:layout_weight="1"/>

        </LinearLayout>

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T22:19:54.687

如果您的应用程序面向 sdk 8，您可以使用 ListView 功能：

[smoothScrollToPosition(int 位置)](http://developer.android.com/reference/android/widget/ListView.html#smoothScrollToPosition%28int%29)

如果您的应用程序以 sdk 4 为目标，您可以使用以下内容：

```
new Handler().post(new Runnable() {
    @Override
    public void run() {
        your_listview.scrollTo(0, y_coordinate);
        //you can increment this value by the cell height
    }
}); 
```

# asp.net - 为什么我在使用 Ajax Panel 时需要点击两次按钮才能提交？

> ID：10341597
> 
> 赞同：1
> 
> 时间：2012-04-26T21:20:56.473
> 
> 标签：asp.net, ajax, telerik, updatepanel

我正在使用`asp:UpdateProgress`控件在按钮单击期间显示进度。我正在使用 Telerik 控件来 ajaxify 提交按钮。代码示例如下：

```
<telerik:RadAjaxPanel ID="RadAjaxPanel4" runat="server">
  <div class="customButton">
    <asp:LinkButton ID="lbtnSave" OnClientClick="return Page_ClientValidate();" 
                    runat="server" OnClick="lbtnSave_Click" CausesValidation="true">
      <img src="../admin/images/icons/16x16/save.png" /> 
      Save 
    </asp:LinkButton>
  <div class="customButton">
</telerik:RadAjaxPanel> 
```

我的问题：

当我用 包围按钮时`telerik:RadAjaxPanel`，我必须单击该按钮两次。如果我删除面板，按钮会一键提交。发生这种情况是因为 OnClientClick 或其他 LinkBut​​ton 属性之一还是因为周围`telerik:RadAjaxPanel`？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T03:55:56.990

事实证明，这个问题与页面上的页面刷新检测逻辑有关。使用 RadAjaxPanel，第一次按钮单击导致逻辑认为它是页面刷新 - 因此，按钮未提交。

# objective-c - 如何在我的 AppDelegate 中设置引用初始化的 Storyboard ViewController 的变量

> ID：10341603
> 
> 赞同：1
> 
> 时间：2012-04-26T21:21:04.857
> 
> 标签：objective-c, ios, storyboard

根据我的阅读，我了解到我需要在我的 AppDelegate 中设置一个引用我的视图控制器的变量，以便我可以做这样的事情。接收条形码扫描并随后调用控制器中的方法并传入该条形码扫描。所以我在我的 AppDelegate 中有这个。

```
- (void)BarcodeDataArrived:(char *)BarcodeData;
{
[myViewController LoadBarcodePage:BarcodeData];
} 
```

我知道当我的蓝牙扫描仪扫描条形码时会调用此方法。问题是 myViewController 对象没有引用当前视图控制器，因此所有对象都为空。

我不认为我想创建 myViewController 的新实例，因为在应用程序加载时情节提要已经在创建它的实例。我只想能够引用故事板正在创建的同一个对象。所以，如果我理解正确，我需要在我的 AppDelegate 中做这样的事情来设置变量：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:  (NSDictionary *)launchOptions
{

    // I Want To Set A Reference To My View Controller Here Such As...   

    myViewController = aViewController;

    // Where aViewController Is What The Storyboard Initialized.

    return YES;
} 
```

我该怎么做。我在 NET 上找到的所有参考资料似乎都涉及笔尖而不是情节提要。

这是我的第一个应用程序。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T23:10:43.773

你不应该在你的 App Delegate 中实现它。你为什么不尝试在 ViewController 中实现你的 BarcodeDataArrived

```
- (void)BarcodeDataArrived:(char *)BarcodeData {
   [self performSegueWithIdentifier:@"toMyViewControllerSegue" 
                             sender:self];

    } 
```

然后在 prepareForSegueMethod 中可以将数据发送到目标控制器

```
 -(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
 myViewController *destinationController= (myViewController * )segue.destinationViewController;

    destinationController.BarcodeData=BarcodeData;

  } 
```

现在，如果您不想更改视图，那么您必须尝试另一种方法，myViewController 应该是一个对象（或类）并在其中实现方法 LoadBarcodePage。您可以在委托中拥有该对象，并且可以通过使用在任何类中引用它

```
 AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
 [delegate.myVar doWhatever you want]; 
```

# c# - 如何创建一个必须调用每次阻塞的 DLL 的多线程应用程序

> ID：10341607
> 
> 赞同：0
> 
> 时间：2012-04-26T21:21:50.643
> 
> 标签：c#, .net, multithreading, parallel-processing

我注意到，即使我让更多线程工作，我的多线程应用程序也几乎没有获得 60% 的处理使用率。我检查了代码，最后发现对 DLL（Html Agility Pack）的调用可能不是异步执行的。有没有办法并行调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T18:52:21.717

*@Devela 这不是答案。我在这里写它是因为评论有点长。*

我认为您的问题与 STA 无关。试试下面的代码。

```
Action action = () =>
{
    string html = "<html><body><div>1111</div><div>222</div></body></html>";
    HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
    doc.LoadHtml(html);
    var x = doc.DocumentNode.Descendants("div").ToArray();
    var y = x[0].InnerText;
};

while(true)
{
    Parallel.For(0,32,i=>action());
} 
```

这段代码让我的 CPU 保持在 ~96% 的忙碌状态。我的猜测是您的线程被某些磁盘 IO、网络操作等阻塞，因此即使添加了更多线程，您也看不到太多 CPU 使用率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:51:01.827

第一个问题是，您如何管理线程？我通过使用托管 ThreadPools 获得了很好的体验。系统自己管理它的资源。

Sewcond 我建议您使用委托来调用方法或 DLL 线程保存和异步。关于线程池有一篇很好的 MSDN 文章：http: [//msdn.microsoft.com/en-us/library/3dasc8as%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/3dasc8as%28v=vs.80%29.aspx)

在这里你可以找到一些关于它的优秀资源文章：http: [//support.microsoft.com/kb/315582/en-us](http://support.microsoft.com/kb/315582/en-us)

如果这不能解决您的问题，请反馈一些代码示例。

# java - 从我的 REST 服务中，确定调用者主机信息的最佳方法是什么？

> ID：10341617
> 
> 赞同：0
> 
> 时间：2012-04-26T21:22:46.290
> 
> 标签：java, rest, host

我应该从请求标头中获取“主机”吗？我显然可以访问 HttpHeaders 和 HttpServletRequest。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:28:54.273

HTTPServletRequest.getRemoteAddr() 将返回远程 IP 地址。

# mysql - SQL：如何优化单个表上的许多 SELECT

> ID：10341618
> 
> 赞同：2
> 
> 时间：2012-04-26T21:22:59.467
> 
> 标签：mysql, sql, optimization, select, indexing

我创建了一个表

```
CREATE TABLE xy (
blub VARCHAR(50) NOT NULL,
z INT UNSIGNED NOT NULL,
PRIMARY KEY (blub)
) 
```

并希望通过“blub”列一次查询多个条目。目前我正在使用简单的查询

```
SELECT blub, z FROM xy WHERE blub = '...' 
```

这比

```
SELECT blub, z FROM xy WHERE blub = '...' OR blub = '...' OR '... 
```

有没有其他方法可以使其更快并合并所有查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T21:24:44.813

```
SELECT blub, z FROM xy WHERE blub in ('a','b','c') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T21:24:54.667

你可以试试一个`in`子句。我不确定它会更快，但肯定会更简洁。例如：

```
select blub, z from zy where blub in ('this', 'that', 'theother'); 
```

[`explain`](http://dev.mysql.com/doc/refman/5.1/en/using-explain.html)会告诉你哪个对你的情况来说实际上是最快的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T21:25:54.487

在你的这样使用一个`IN`子句：`WHERE`

```
SELECT blub, z 
FROM xy 
WHERE blub IN ('value1', 'value2', 'value3') 
```

至于哪个运行得更好/更快，您可以使用查询执行计划进行查询。在 Sql-server 中，单击“包括实际执行计划”。在 MySql 中，您可以使用该[`EXPLAIN`](http://dev.mysql.com/doc/refman/5.5/en/explain.html)函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T21:40:28.190

您需要添加索引

```
CREATE TABLE xy ( 
blub VARCHAR(50) NOT NULL, 
z INT UNSIGNED NOT NULL, 
PRIMARY KEY (xy),
KEY (blub,z)
) 
```

如果您的表已填充，请执行此操作

```
ALTER TABLE xy ADD INDEX (blub,z); 
```

那么，`SELECT blub, z FROM xy WHERE blub in ('a','b','c')`会更快

# regex - 如何正则表达式数据表filterfn？

> ID：10341631
> 
> 赞同：1
> 
> 时间：2012-04-26T21:23:49.153
> 
> 标签：regex, datatables

```
$("#mediaTable").dataTable().fnFilter('0', 2 );
$("#mediaTable").dataTable().fnFilter('1', 2 ); 
```

我有这两个正常工作的过滤器。我正在尝试添加一个过滤器来获取匹配 1 或 2 的匹配项，即 [12]。出于某种原因，我无法让它工作。

我试过了：

```
$("#mediaTable").dataTable().fnFilter('[12]', 2, true );
$("#mediaTable").dataTable().fnFilter('^[12]$', 2, true );
$("#mediaTable").dataTable().fnFilter('/[12]/', 2, true );
$("#mediaTable").dataTable().fnFilter('(1|2)', 2, true ); 
```

它们都返回所有三个值（0、1 和 2）——我不想要 0 值！

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:22:25.583

这应该这样做：

```
$("#mediaTable").dataTable().fnFilter('1|2', 2, true ); 
```

# binary-tree - 二叉树函数

> ID：10341635
> 
> 赞同：0
> 
> 时间：2012-04-26T21:24:04.810
> 
> 标签：binary-tree

我怎样才能清理这段代码，以便所有二叉树操作都在自己的函数套件中，这段代码很乱，我想清理它

```
#include <iostream>
#include "binarytree.h"

using namespace std ;

node *head = 0;

node *create_node( double x )
{
    node *temp = new node();
    temp->left = 0 ;
    temp->right = 0 ;
    temp->value = x ;

    return temp ;
}

void insert_node( node *newnode )
{
    node *current = head ;
    node *last = current;

    while(current != 0) // while(current)
    {
        last = current ;
        if( current->value < newnode->value )
        {
                current = current->right ;
        }
        else
        {
            current = current->left ;
        }
    }

    if( last->value < newnode->value )
    {
        last->right = newnode ;
    }
    else
    {
        last->left = newnode ;
    }
}

void list_nodes( node *mynode )
{
    if(mynode->left)
    {
        list_nodes(mynode->left);
    }

    cout << "\t\t" << mynode->value << endl ;

    if(mynode->right)
    {
        list_nodes(mynode->right);
    }
} 
```

/ ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ***** /

```
void do_insert()
{
    double d ;

    cout << "\tInserting\n" ;
    cout << "\t\tEnter a double to insert: " ;
    cin >> d ;

    node *newnode = create_node( d ) ;

    if(head == 0) // if( !head )
    {
        head = newnode ;
    }
    else
    {
        insert_node( newnode );
    }

    return ;
} 
```

/ ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ***** /

```
void do_lookup()
{
    double d;

    cout << "\tLookup\n" ;
    cout << "\t\tEnter a double to look up: " ;
    cin >> d ;

    node *current = head ;

    while(current)
    {
        if( current->value == d )
        {
            cout << "\t\tValue found in tree" << endl;
            return ;
        }
        else
        {
            if( current->value < d )
            {
                current = current->right;
            }
            else
            {
                current = current->left;
            }
        }
    }

    cout << "\t\tValue not found in tree" << endl;
    return ;
} 
```

/ ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ***** /

```
void do_delete()
{
    double d;
    node *old_node, *left, *right, *current, *last;

    cout << "\tDeleting\n" ;
    cout << "\t\tEnter a double to delete: " ;
    cin >> d ;

    if(!head)
    {
        return ;
    }

    if( head->value == d )
    {
        old_node = head ;
        left = head->left ;
        right = head->right ;

        if( left )
        {
            head = left ;

            if(right)
            {
                insert_node( right );
            }
        }
        else if( right )
        {
            head = right ;
        }
        else
        {
            head = 0;
        }

        //delete old_node ;

        return;
    }
    else
    {
        current = head ;
        last = current;

        while(current)
        {
            if( current->value == d )
            {
                old_node = current ;
                left = current->left ;
                right = current->right ;

                if( last->value < d )
                {
                    last->right = 0;
                }
                else
                {
                    last->left = 0 ;
                }

                if(left)
                {
                    insert_node(left);
                }

                if(right)
                {
                    insert_node(right);
                }

                //delete old_node ;

                return ;
            }
            else
            {
                last = current;

                if( current->value < d )
                {
                    current = current->right;
                }
                else
                {
                    current = current->left;
                }
            }
        }
    }

    cout << "\t\tValue not found in tree" << endl;
    return ;
} 
```

/ ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ***** /

```
void do_list()
{ 
    cout << "\tListing\n" ;

    if(head)
    {
        list_nodes( head );
    }
    else
    {
        cout << "\t\tEmpty\n";
    }

    return ;
} 
```

/ ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ***** /

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:29:27.510

将您的`do_xxx()`功能复制到`xxx()`功能。

从`xxx()`函数中删除 IO。

将函数中的二叉树操作替换为对`do_xxx()`函数的相应调用`xxx()`。

# python - Pybrain 实现抛出错误

> ID：10341637
> 
> 赞同：1
> 
> 时间：2012-04-26T21:24:09.417
> 
> 标签：python, machine-learning, neural-network, pybrain

我正在尝试为我的 10 维数据集生成一个网格，同时我遵循来自[http://pybrain.org/docs/tutorial/fnn.html](http://pybrain.org/docs/tutorial/fnn.html)的代码。我正在实现并引发错误的代码是：

```
 ticks = arange(-3.,6.,0.2)
 X, Y = meshgrid(ticks, ticks)
 # need column vectors in dataset, not arrays
 griddata = ClassificationDataSet(10,1, nb_classes=3)
 for i in xrange(X.size):
      griddata.addSample([X.ravel()[i],Y.ravel()[i]], [0]) 
```

我得到的错误是：

```
 File "a.py", line 224, in <module>
  griddata.addSample([X.ravel()[i], Y.ravel()[i]], [0])
 File "a.py", line 45, in addSample
  self.appendLinked(inp, target)
 File "a.py", line 216, in appendLinked
  self._appendUnlinked(l, args[i])
 File "a.py", line 198, in _appendUnlinked
  self.data[label][self.endmarker[label], :] = row
 ValueError: cannot copy sequence with size 2 to array axis with dimension 7 
```

我不知道如何纠正错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-19T07:40:02.457

Python 已经给出了答案：尺寸是你的问题。您创建一个具有 10 个维度的数据集： `ClassificationDataSet(in_dim, out_dim, class_num)` 因为第一个数字用于维度。然后您尝试向该数据集添加具有 2 个维度的样本： `griddata.addSample([in1, in2, in3..., in_last], [out1])`. 您在此处提供的示例完全来自 pybrain 教程，只是您错误地复制了一个数字，即 in_dimensions。在示例中为 2。然后它应该工作。

# css - IE 旧版本的 Css3 Radial Gradient 替代品

> ID：10341638
> 
> 赞同：0
> 
> 时间：2012-04-26T21:24:17.053
> 
> 标签：css

当谈到渐变时，我们有很多选项可供选择： 1- Css3 2- SVG 3- 图像可能还有更多选项，但这些是最常见的。如果渐变是线性渐变，那么它在 IE 旧版本中会优雅地降级，但这里我所说的是用 css3 制作的径向渐变。这是它的CSS：

```
background: #7d7e7d;
background: -moz-radial-gradient(center, ellipse cover,  #7d7e7d 0%, #0e0e0e 100%);
background: -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%,#7d7e7d), color-stop(100%,#0e0e0e));
background: -webkit-radial-gradient(center, ellipse cover,  #7d7e7d 0%,#0e0e0e 100%);
background: -o-radial-gradient(center, ellipse cover,  #7d7e7d 0%,#0e0e0e 100%);
background: -ms-radial-gradient(center, ellipse cover,  #7d7e7d 0%,#0e0e0e 100%);
background: radial-gradient(center, ellipse cover,  #7d7e7d 0%,#0e0e0e 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#7d7e7d', endColorstr='#0e0e0e',GradientType=1 ); 
```

对于现场演示，您可以看到此页面[http://bloghutsbeta.blogspot.com/](http://bloghutsbeta.blogspot.com/)

现在我正在寻求解决这个问题的方法，就像您在 IE 中看到演示页面一样，您可以看到径向渐变的显示方式并不好。如果我使用尺寸太大的图像，我无法承受大于 5KB 的图像。如果我使用 SVG，那么我们都知道它在浏览器中的支持。一个好的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:28:46.553

我建议使用 Image，因为我没有看到其他可用的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T22:14:23.650

我会考虑仅针对 IE 并使用[此工具可以生成](http://ie.microsoft.com/testdrive/Graphics/SVGGradientBackgroundMaker/Default.html)的 SVG 。如果您需要支持“旧”版本（如您的标题所示），那么可能需要一些库，因为[本文谈到](http://www.alistapart.com/articles/using-svg-for-flexible-scalable-and-fun-backgrounds-part-i/).

# javascript - 根据 CSS 尺寸调整 Flash 对象的大小？Coldfusion CFCHART CFDIV

> ID：10341645
> 
> 赞同：0
> 
> 时间：2012-04-26T21:24:44.743
> 
> 标签：javascript, css, coldfusion, cfchart

我正在使用coldfusion AJAX 调用绑定一个div，其中包含基于另一个div 中的选项填充的查询结果。在使用 AJAX 调用的 DIV 中，我有一个 CFLAYOUT 标记，它创建了几个选项卡。

在一个选项卡中，我有一个 Coldfusion CFCHART 元素，它可以创建一个漂亮的图表。我希望图表根据它所在的选项卡 DIV 的尺寸重新调整大小。

似乎 CFCHART 标签接受高度和宽度的像素尺寸，并且我需要能够根据浏览器窗口的尺寸动态调整图表的大小。我希望对象保留在闪存中，但如果需要，我可以将其更改为 JPEG 或 PNG。

我如何轻松获得这些尺寸并使用 Javascript 更改它们？还有其他简单的方法吗？我会在窗口调整大小时做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T22:18:30.723

您将无法使用 cfchart 动态实现此目的。Coldfusion 会生成所有代码并将其编译为 SWF 或基于您在页面加载时设置的参数的图像。

你最好的选择是找到一个好的 jquery 图形插件，在快速搜索中我发现这个看起来类似于 cfchart - [http://www.jqplot.com/](http://www.jqplot.com/)

您可能还想研究 CSS3 和 HTML5，您现在可以在不使用 Javascript 或 cfCharts 的情况下做很多事情。

[http://csswizardry.com/2010/02/css-bar-charts-styling-data-with-css3-and-progressive-enhancement/](http://csswizardry.com/2010/02/css-bar-charts-styling-data-with-css3-and-progressive-enhancement/)

# linux - 域作为 apache 中子域的后备

> ID：10341653
> 
> 赞同：0
> 
> 时间：2012-04-26T21:25:18.303
> 
> 标签：linux, apache, ubuntu, virtualhost

我的域有几个子域，如果用户写入错误的子域，我希望域作为后备。
这些子域有效：
files.myadomain.com、phpmyadmin.mydomain.com 和 server.mydmomain.com

其他域/子域返回 HTTP 500 错误：

> 由于可能的配置错误，请求超出了 10 个内部重定向的限制。如有必要，使用“LimitInternalRecursion”增加限制。使用“LogLevel debug”获取回溯。

如果我输入一个不存在的子域，我最终会进入 /var/www/

这是配置：

```
<VirtualHost *:80>
    ServerName files.mydomain.com
    DocumentRoot /var/www/rcane/files.mydomain.com/
</VirtualHost>

<VirtualHost *:80>
    ServerName media.mydomain.com
    DocumentRoot /var/www/rcane/media.mydomain.com/
</VirtualHost>

<VirtualHost *:80>
    ServerName wordpress.mydomain.com
    DocumentRoot /var/www/rcane/wordpress.mydomain.com/
</VirtualHost>

<VirtualHost *:80>
    ServerName myml.mydomain.com
    DocumentRoot /var/www/johan/ayml/
</VirtualHost>

<VirtualHost *:80>
    ServerName johan.mydomain.com
    DocumentRoot /var/www/johan/
</VirtualHost>

<VirtualHost *:80>
    ServerName phpmyadmin.mydomain.com
    DocumentRoot /usr/share/phpmyadmin/
</VirtualHost>

<VirtualHost *:80>
    ServerName sqlbuddy.mydomain.com
    DocumentRoot /var/www/sqlbuddy/
</VirtualHost>

<VirtualHost *:80>
    ServerName server.mydomain.com
    DocumentRoot /var/www/
</VirtualHost>

<VirtualHost *:80>
    ServerAdmin me@mydomain.com
    ServerName mydomain.com
    ServerAlias *.mydomain.com
    DocumentRoot /var/www/rcane/mydomain.com/
</VirtualHost> 
```

这是带有 LogLevel 调试的错误日志：

```
[Sat Apr 28 13:42:24 2012] [debug] core.c(3112): [client 01.254.002.30] r->uri = /rcane/server.mydomain.com/
[Sat Apr 28 13:42:24 2012] [debug] core.c(3118): [client 01.254.002.30] redirected from r->uri = /rcane/server.mydomain.com/
[Sat Apr 28 13:42:24 2012] [debug] core.c(3118): [client 01.254.002.30] redirected from r->uri = /rcane/server.mydomain.com/
[Sat Apr 28 13:42:24 2012] [debug] core.c(3118): [client 01.254.002.30] redirected from r->uri = /rcane/server.mydomain.com/
[Sat Apr 28 13:42:24 2012] [debug] core.c(3118): [client 01.254.002.30] redirected from r->uri = /rcane/server.mydomain.com/
[Sat Apr 28 13:42:24 2012] [debug] core.c(3118): [client 01.254.002.30] redirected from r->uri = /rcane/server.mydomain.com/
[Sat Apr 28 13:42:24 2012] [debug] core.c(3118): [client 01.254.002.30] redirected from r->uri = /rcane/server.mydomain.com/
[Sat Apr 28 13:42:24 2012] [debug] core.c(3118): [client 01.254.002.30] redirected from r->uri = /rcane/server.mydomain.com/
[Sat Apr 28 13:42:24 2012] [debug] core.c(3118): [client 01.254.002.30] redirected from r->uri = /rcane/server.mydomain.com/
[Sat Apr 28 13:42:24 2012] [debug] core.c(3118): [client 01.254.002.30] redirected from r->uri = /rcane/server.mydomain.com/
[Sat Apr 28 13:42:24 2012] [debug] core.c(3118): [client 01.254.002.30] redirected from r->uri = /
[Sat Apr 28 13:42:24 2012] [debug] mod_deflate.c(615): [client 01.254.002.30] Zlib: Compressed 627 to 379 : URL /rcane/server.mydomain.com/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T08:12:46.420

可能是您上一个[`ServerName`](http://httpd.apache.org/docs/2.0/mod/core.html#servername)指令的问题。语法应该是

> **服务器名称** `fully-qualified-domain-name[:port]`

尝试

```
<VirtualHost *:80>
    ServerAdmin me@mydomain.com
    ServerName mydomain.com
    ServerAlias *.mydomain.com

    DocumentRoot /var/www/mydomain.com/
</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T11:53:45.173

所以解决方案是删除这个 htaccess 文件：

```
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_URI} ^/$
RewriteRule ^.*$ rcane/server.mydomain.com/ [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^.*$ rcane/server.mydomain.com/ 
```

# delphi - TIEHTTP 组件不适用于 IE9

> ID：10341655
> 
> 赞同：2
> 
> 时间：2012-04-26T21:25:24.543
> 
> 标签：delphi, http

我尝试在我的 Delphi 应用程序中使用 TIEHTTP 组件，但遇到了一些问题。我的应用程序在带有 IE8 的 XP 中运行良好，但在带有 IE9 的 Windows 7 中无法运行（它返回一个页面但没有登录）。

我试过 Delphi 7 d2007 和 D 2009 - 同样的问题。

我搜索了这个问题并找到了解决方案，但它不起作用！

[http://www.myfxboard.com/tiehttp/discussion?id=4273](http://www.myfxboard.com/tiehttp/discussion?id=4273)

所以我不知道该怎么办！请帮助如何在 IE9 中解决此问题！

```
//iehttp1.http_agent_string := 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.6 (KHTML, like Gecko) Chrome/20.0.1092.0 Safari/536.6';
//iehttp1.content_type := 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8' ;

iehttp1.RequestMethod := 'POST';

iehttp1.ExecuteURL('http://www.example.com/act=login&login=[user]&password=[pass]');

memo1.Text  := iehttp1.result_sl.Text; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T21:53:38.880

Internet Explorer 不支持安全更新 832894 的 URL 中的用户名和密码，详细信息如下：

[http://support.microsoft.com/kb/834489](http://support.microsoft.com/kb/834489)

我对此组件没有任何经验，但尝试使用用户名和密码属性：

```
iehttp1.username := 'user1';
iehttp1.password := '*****'; 
```

如[示例页面所述](http://www.myfxboard.com/tiehttp/)

**更新**

我错了，正如 mjn 在评论中指出的那样，这与您的情况无关，IE 更改适用于像 user:pass@example.com 这样的 URL

# c++ - OpenCL 内核中的运算符重载

> ID：10341661
> 
> 赞同：4
> 
> 时间：2012-04-26T21:25:56.080
> 
> 标签：c++, opencl

我从 CUDA 搬到了 OpenCL。

在 CUDA 中，我能够进行运算符重载：

```
__device__ bool operator != (const uint2 a, const uint b) 
{ 
    return ((a.x != b) && (a.y != b)); 
} 
```

我可以在 OpenCL 内核中做同样的事情吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T19:55:28.917

没有。任何当前版本的 OpenCL（1.0、1.1 或 1.2）的 OpenCL 内核语言都是 OpenCL C - C99 的扩展和子集版本，它不具有运算符重载 - 或者就此而言，用户函数的重载。

未来版本的 OpenCL 可能会将其扩展为具有基于 C++ 的 OpenCL 内核语言，从而允许运算符重载——但这尚未标准化或广泛可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T19:00:10.607

我不知道他们是否仍处于测试阶段，但 AMD 在他们的最新测试版中提供了支持： [OpenCL Static C++ 的关键功能包括内核和函数重载、内核和成员模板、继承、友元类等等。](http://blogs.amd.com/developer/2012/01/10/amd-opencl%E2%84%A2-app-sdk-2-6-introducing-opencl%E2%84%A2-1-2-preview-and-static-c-kernel-language/)

# git - 无法从 Git Extensions 向 GitHub 进行身份验证？

> ID：10341662
> 
> 赞同：6
> 
> 时间：2012-04-26T21:25:56.773
> 
> 标签：git, github, git-extensions

我只是在 Visual Studio 2010 中设置 Git 扩展，并不能真正让它工作 - 我无法进行身份验证。

在 Git Extensions 中，如果我选择 Plugins->GitHub，我可以添加用户、密码、API 令牌并选择 SSH。美好的。除了 API 令牌不再可用，因为 GitHub 现在正在迁移到 API v 3。

有人有这方面的消息吗？我看过一个[最近的讨论](http://groups.google.com/group/reviewboard/browse_thread/thread/3c6e638ddd6a94a)，但没有任何线索。

肯定有比我更多的 GitHub 用户使用 Git 扩展并遇到身份验证问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T11:48:15.087

仅供参考：自 v2.33 起已修复

# performance - grails 2.0.3 中字节 [] 的内存泄漏

> ID：10341664
> 
> 赞同：2
> 
> 时间：2012-04-26T21:26:10.063
> 
> 标签：performance, tomcat, grails, file-upload, memory-leaks

所以我有一个应用程序，允许您上传文档和图像并将它们保存为 byte[] 在数据库中。

（我创建了一个最小的示例项目，您可以在此处以 zip 格式下载并导入 STS [http://dl.dropbox.com/u/2342474/byteMemoryLeak.zip](http://dl.dropbox.com/u/2342474/byteMemoryLeak.zip) ...您所要做的就是转到 datasource.groovy 和更改您的数据库设置）

所以域对象看起来像这样：

```
class Test { 

    byte[] data 

    static constraints = { 
        data nullable: false, maxSize: 1024*1024*40 
    } 
} 
```

并且控制器和视图都是直接使用 generate-all 命令生成的......这里没有任何改变......

因此，现在当我们开始项目时，我们转到测试控制器...点击创建新...上传文档...使用 5 - 10 mb 之类的东西...然后点击创建...

我希望在执行 save() 方法以及调用 show 方法时内存使用量会增加......但是一旦完成加载，GC 应该拾取这些对象并将它们扔掉，因为它们目前不需要...现在我使用 Your Kit Java Profiler 检查内存使用情况，我可以看到我的 byte[] 的 3 个引用具有弱引用或无法访问...这是为什么呢？当 show() 方法或 save() 方法完成时，它们不应该被删除吗？

这里是截图：[内存泄漏]：http: [//i.imgur.com/XGj6A.png](http://i.imgur.com/XGj6A.png)

我是否必须为 tomcat 更频繁地运行 gc 进行特殊设置？

我对此感到非常困惑，它实际上导致了我现在正在测试的应用程序中的一个问题，因为人们正在向它上传大量文档并且堆内存变得越来越满并且几乎从未被清理过所以我得到在某些时候，内存不足异常......实际上也发生在 list() 方法中，它加载所有对象，现在实际上对于每个对象，字节 [] 已加载，现在在内存中并且没有被清理。 ..

也许我只是错过了什么或做错了什么......任何帮助将不胜感激......

谢谢克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T01:02:24.487

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T01:41:38.027

您可以尝试使用选项 -XX:+UseConcMarkSweepGC。此选项在执行应用程序的同时收集终身收藏。该应用程序在收集期间会短时间暂停

# c# - 如果磁盘空间低于 X-GIG 并且自创建以来超过 X 天，请删除目录！C#/网络

> ID：10341665
> 
> 赞同：0
> 
> 时间：2012-04-26T21:26:13.347
> 
> 标签：c#, .net, winforms, visual-studio-2010

正如主题所说，这是我的代码。

```
public void deleteOldShit()
{
String path = textBox1.Text ;
Int32 days = Convert.ToInt32(oldRelease.Text);
Int32 neededSpace = Convert.ToInt32(discSpace.Text);
String[] folders = Directory.GetDirectories(path, "*".ToString(), SearchOption.AllDirectories);

foreach (String folder in folders)
{

    DirectoryInfo source = new DirectoryInfo(folder);
    String k = Directory.GetDirectoryRoot(path);
    k = k.Replace(@":\", "");
    DriveInfo c = new DriveInfo(k);
    Double cAvailableSpace = c.AvailableFreeSpace / Math.Pow(1024, 2);

    // Get info of each file into the directory
    foreach (DirectoryInfo fi in source.GetDirectories())
    {
        var creationTime = fi.CreationTime;

        if (creationTime < (DateTime.Now - new TimeSpan(days, 0, 0, 0)))
        {
            if (cAvailableSpace < neededSpace)
            {
                    Directory.Delete(folder,true);
            }
        }
    }
}
} 
```

x天后一直在查看删除文件，但日期/时间的比较似乎是错误。

这里的任何指针都会很酷。我似乎找不到这个问题的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:35:18.743

我的猜测是这条线没有按您的预期工作：

```
if (creationTime < (DateTime.Now - new TimeSpan(90, 0, 0, 0))) 
```

该行阻止删除文件夹，除非该文件夹是在 90 天前创建的。此外，实际的“X 天”代码似乎也是错误的（尽管可能没有达到）

```
if (fi.CreationTime < DateTime.Now.AddDays(days)) 
```

如果达到该代码，它将*始终*删除您的文件，除非您将来创建它们，或者在您的框中输入负数。

* * *

不过，您还有其他一些麻烦。一旦你开始删除目录，你会因为两个原因而点击例外，我可以立即看到。

1.  一旦删除了子目录的包含目录，您就不会检查子目录是否仍然存在。如果您删除`c:\myFiles`然后您的代码接下来检查`c:\myFiles\other`，您将遇到错误，因为您的代码将尝试检查不存在的目录上的属性。你应该先检查`Directory.Exists()`。

2.  除非目录为空，否则您的目录删除代码将不起作用。`bool`您需要传递第二个参数`true`才能删除其中包含的文件和文件夹。

* * *

最后，一定要提一下；您的代码并没有真正检查以确保您没有进入危险目录，所以要小心这个！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T21:57:24.273

我认为您正在尝试删除错误的目录：

```
 foreach (String folder in folders)
    {

        DirectoryInfo source = new DirectoryInfo(folder);
        String k = Directory.GetDirectoryRoot(path);
        k = k.Replace(@":\", "");
        DriveInfo c = new DriveInfo(k);
        Double cAvailableSpace = c.AvailableFreeSpace / Math.Pow(1024, 2);

        // Get info of each file into the directory
        foreach (DirectoryInfo fi in source.GetDirectories())
        {
            var creationTime = fi.CreationTime;

            if (creationTime < (DateTime.Now - new TimeSpan(days, 0, 0, 0)))
            {
                if (cAvailableSpace < neededSpace)
                {
                        **/* Trying to delete Folder, but should be FI.Fullname */**

                    try
                       {
                        Directory.Delete(folder,true);
                       }
                    catch(Exception e)
                       {
Console.WriteLine("The process failed: {0}", e.ToString());
                       }
                }
            }
        }
    }
    } 
```

# c# - 我可以通过属性名称设置属性吗？

> ID：10341666
> 
> 赞同：1
> 
> 时间：2012-04-26T21:26:20.037
> 
> 标签：c#, mvvm, properties

wpf 相当新，使用 galasoft mvvm 模板。我有两个做同样事情的中继命令，但它们需要设置不同的属性。

我可以做这样的事情吗？

```
public RelayCommand OpenDestinationCommand { get; private set; }
public RelayCommand OpenSourceCommand { get; private set; }

public MainViewModel(IDataService dataService)
{
    OpenSourceCommand = new RelayCommand(() => GetPath(SourcePathPropertyName));
    OpenDestinationCommand = new RelayCommand(() => GetPath(DestinationPathPropertyName));
}

private void GetPath(string PropertyName) {
    //show a dialog, get the path they select
    string newPath = GetPathFromDialog();
    //what should this look like? Is this possible?
    var Property = GetPropertyByName(PropertyName);
    Property.Set(newPath);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:30:16.913

应该先google一下。改编自[http://geekswithblogs.net/shahed/archive/2006/11/19/97548.aspx](http://geekswithblogs.net/shahed/archive/2006/11/19/97548.aspx)

```
private PropertyInfo GetPropertyByName(string propName)
{
  return this.GetType().GetProperty(propName);
}

private void GetPath(string PropertyName) {
    //show a dialog, get the path they select
    string newPath = GetPathFromDialog();
    //what should this look like? Is this possible?
    var mProp = GetPropertyByName(PropertyName);
    mPropp.SetValue(this, newPath, null);
} 
```

# c# - 将方法作为参数传递，以便以后可以调用该方法？

> ID：10341668
> 
> 赞同：2
> 
> 时间：2012-04-26T21:26:31.020
> 
> 标签：c#, delegates

我有一个包含一些方法的库，并且在某些错误期间，我希望它调用调用者定义的方法。此方法必须返回一个布尔值。我的意思是：

```
Sock sock = new Sock();
sock.OnSpecificError(theMethodToCall); 
```

然后当错误发生时，sock 应该首先检查是否设置了 OnSpecificError。如果有，它应该运行它。如果该方法返回 false 或未设置 OnSepcificError，则应引发异常。

这似乎是代表设计的那种东西，但无论出于何种原因，我似乎无法理解这些代表实际在做什么，例如，正在传递什么以及我以后如何运行它。我目前处理这个问题的方法既愚蠢又麻烦，所以任何帮助都将不胜感激。

编辑：让我澄清一下。sock.OnSpecificError(method) 用于简单地传递 sock 一个方法，它将存储但不运行。然后的想法是，稍后，当 sock 运行一些其他方法时，如果弹出错误，它应该运行该方法。我想保留该方法以供以后使用，然后在需要时运行它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T21:32:50.810

从委托开始的最简单方法是使用预定义的委托。例如，不带参数并返回 a 的委托`bool`将是`Func<bool>`. 接受 a`string`和 an`int`并返回 a的委托`bool`将是`Func<string,int,bool>`，依此类推。

你定义你的方法是这样的：

```
void OnSpecificError(Func<bool> errorCheck) {
    // Do your stuff...
    var gotErrors = errorCheck();
    if (gotErrors) {
        // Do something about it
    }
} 
```

您现在可以`OnSpecificError`这样调用：

```
sock.OnSpecificError(CheckForErrors);

private bool CheckForErrors() {
    return errorCode.Equals("YES");
} 
```

您还可以使用*lambdas*内联小方法，如下所示：

```
sock.OnSpecificError(() => errorCode.Equals("YES")); 
```

# windows-phone-7 - 为什么我不能滚动我的 ListBox

> ID：10341670
> 
> 赞同：0
> 
> 时间：2012-04-26T21:26:54.447
> 
> 标签：windows-phone-7

任何人都知道为什么我不能用 Grid 滚动我的 ListBox 吗？我发现只有添加此属性： ScrollViewer.VerticalScrollBarVisibility="Auto" 但在我的应用程序中这不起作用

这是我的 xaml 代码：

```
 <ListBox Height="776" ScrollViewer.VerticalScrollBarVisibility="Auto" MaxHeight="776"  Margin="11,12,0,0" Name="listBox1" Width="469">
        <ListBox>
            <Grid >
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Image Grid.Column="0" Width="200" Grid.Row="0" Source="/a;component/texture.png" />
                <Image Grid.Column="0" Width="200" Grid.Row="1" Source="/a;component/texture.png" />
                <Image Grid.Column="0" Width="200" Grid.Row="2" Source="/a;component/texture.png" />
                <Image Grid.Column="0" Width="200" Grid.Row="3" Source="/a;component/texture.png" />
                <Image Grid.Column="0" Width="200" Grid.Row="4" Source="/a;component/texture.png" />
                <Image Grid.Column="0" Width="200" Grid.Row="5" Source="/a;component/texture.png" />
                <Image Grid.Column="0" Width="200" Grid.Row="6" Source="/a;component/texture.png" />
                <Image Grid.Column="1" Width="200" Grid.Row="0" Source="/a;component/texture.png" />
                </Grid>
        </ListBox>
    </ListBox> 
```

感谢您的任何建议；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:39:11.653

你有两个`listboxes`包裹在一起。看起来你真正想要的是一个`ScrollViewer`.

```
<ScrollViewer Margin="11,12,0,0" Name="listBox1" Width="469">
            <Grid >
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Image Grid.Column="0" Width="200" Grid.Row="0" Source="/a;component/texture.png" />
                <Image Grid.Column="0" Width="200" Grid.Row="1" Source="/a;component/texture.png" />
                <Image Grid.Column="0" Width="200" Grid.Row="2" Source="/a;component/texture.png" />
                <Image Grid.Column="0" Width="200" Grid.Row="3" Source="/a;component/texture.png" />
                <Image Grid.Column="0" Width="200" Grid.Row="4" Source="/a;component/texture.png" />
                <Image Grid.Column="0" Width="200" Grid.Row="5" Source="/a;component/texture.png" />
                <Image Grid.Column="0" Width="200" Grid.Row="6" Source="/a;component/texture.png" />
                <Image Grid.Column="1" Width="200" Grid.Row="0" Source="/a;component/texture.png" />
                </Grid>
        </ScrollViewer> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T02:26:39.813

Listbox 确实有一个内置的 ScrollViewer；但是有些人可能会选择将 ListBox 包装在 ScrollViewer 中以实现更平滑的滚动。我会在列表框中使用 ItemTemplate。这些链接应该会有所帮助：

*   [http://msdn.microsoft.com/en-us/library/system.windows.controls.scrollviewer.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.scrollviewer.aspx)
*   [http://msdn.microsoft.com/en-us/library/hh202907(v=VS.92).aspx](http://msdn.microsoft.com/en-us/library/hh202907(v=VS.92).aspx)
*   [ScrollViewer 内的列表框高度计算](https://stackoverflow.com/questions/5639098/listbox-inside-scrollviewer-height-calculations)
*   [ScrollViewer/StackPanel 构造中的 DataBound ListBox 和 Button，Button 出现在 ListBox 内容的末尾下方](https://stackoverflow.com/questions/3582059/databound-listbox-and-button-inside-a-scrollviewer-stackpanel-construct-with-bu)

谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T05:23:07.420

也将 scrollviewer 属性添加到内部列表框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T13:34:39.337

谢谢大家的建议。这不起作用，因为我将两个列表框包装在一起。谢谢威尔梅尔；）

这应该看起来像：

```
 <ListBox Height="776" ScrollViewer.VerticalScrollBarVisibility="Auto" MaxHeight="776"  Margin="11,12,0,0" Name="listBox1" Width="469">
            <Grid >
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Image Grid.Column="0" Width="200" Grid.Row="0" Source="/a;component/texture.png" />
                <Image Grid.Column="0" Width="200" Grid.Row="1" Source="/a;component/texture.png" />
                <Image Grid.Column="0" Width="200" Grid.Row="2" Source="/a;component/texture.png" />
                <Image Grid.Column="0" Width="200" Grid.Row="3" Source="/a;component/texture.png" />
                <Image Grid.Column="0" Width="200" Grid.Row="4" Source="/a;component/texture.png" />
                <Image Grid.Column="0" Width="200" Grid.Row="5" Source="/a;component/texture.png" />
                <Image Grid.Column="0" Width="200" Grid.Row="6" Source="/a;component/texture.png" />
                <Image Grid.Column="1" Width="200" Grid.Row="0" Source="/a;component/texture.png" />
                </Grid>
    </ListBox> 
```

# ruby - Ruby IRC 与 Rubygame 并行

> ID：10341671
> 
> 赞同：1
> 
> 时间：2012-04-26T21:26:58.963
> 
> 标签：ruby, multithreading

我使用 Cinch 库作为 IRC 机器人和 Rubygame 向用户显示游戏状态。

我希望一些用户能够更新屏幕发送 IRC 命令。也就是说，如果我使用`!addpoints`，屏幕上显示的点将被更新。我在不考虑另一个部分的情况下处理这两个部分没有问题，而且我可以从另一个部分运行一个部分，因为它们是单例的。

也就是说，在任何时候，我都可以使用`Screen::add_points`or `IRC::send_confirm_message`。

唯一的问题是，当我运行 Rubygame 时，它​​会循环等待事件并且永远不会启动 Cinch，反之亦然。

有没有办法让两者同时工作并进行通信？像某种线程？

# sql - 从另一个（日期时间类型）列开始，列可以每两年更改一次内容

> ID：10341672
> 
> 赞同：0
> 
> 时间：2012-04-26T21:27:07.880
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

让我们从项目的目的开始：

-> 我有一个表，其中有一列`Date_Election_President`类型是`Datetime`......

从选举的一天开始，总统不能达到两年以上

在同一张表中，我有一个`President_Eligible`类型的另一列，`varchar(3)`它只接受“是”或“否”

*   是 - 如果总统还没有完成两年
*   否 - 如果总统确实完成了两年

我问你如果`President_Eligible`总统完成了两年，SQL Server 中是否有任何方法可以自动将列从“是”更改为“否”？

这是桌子

```
create table GIAC
(
    Id_GIAC smallint primary key identity(1,1),
    Nom varchar(50) not null,
    Adress varchar(50) not null,

    President varchar(50) not null,
    President_Eligible varchar(20),
    Date_Election_President datetime,
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T22:02:32.817

以答案形式添加我的评论，并提供更多信息：

当您检索总统是否符合条件时，您无需将资格数据存储在数据库中，而是根据数据库中的日期进行计算。这样您就不必更新任何内容，只需在查询数据时确定资格。

一个示例查询：

```
SELECT 
    CASE WHEN DATEDIFF(year, Date_Election_President , GetDate() ) >= 2 
        THEN 'Yes' 
        ELSE 'No' 
    END 
```

以及使用 DATEDIFF 的信息：http: [//msdn.microsoft.com/en-us/library/ms189794.aspx](http://msdn.microsoft.com/en-us/library/ms189794.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T09:05:36.383

当然，如果您*确实*希望它“在”您的表中，您可以使用计算列：

```
create table GIAC
(
    Id_GIAC smallint primary key identity(1,1),
    Nom varchar(50) not null,
    Adress varchar(50) not null,

    President varchar(50) not null,
    Date_Election_President datetime,
    President_Eligible as CASE WHEN DATEDIFF(day,Date_Election_President,CURRENT_TIMESTAMP) >= 730 THEN 'NO' ELSE 'YES' END
) 
```

然后你不必记住在每个查询中都包含这个逻辑——如果规则会改变，把它放在每个查询中是有风险的。

我也改为计算自选举以来的天数，而不是这样做`DATEDIFF(year,...`，因为`DATEDIFF`计算两个日期之间已识别日期部分的*转换次数。*例如，`DATEDIFF(year,...`2011 年 12 月 31 日至 2012 年 1 月 1 日之间的时间为 1。

# c# - C# 控制台输出

> ID：10341673
> 
> 赞同：0
> 
> 时间：2012-04-26T21:27:31.287
> 
> 标签：c#, console

是否可以从另一个控制台控制/写入控制台。我已经测试了 Console.WriteLine，但什么也没发生。我很感激任何帮助。

* * *

**我的意思是从另一个类**写到控制台。很抱歉造成误导。我有一个服务器类（Server.cs）和主类（Program.cs）。服务器类将向控制台写入一些有关连接的信息以及类似的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:38:10.840

要写入调用控制台，您的应用程序需要`Console`在项目设置中标记为应用程序。如果您在 UI 应用程序中写入控制台，您的进程将创建一个新的，然后写入其中。

如果您想写入另一个现有控制台，我想可以在 Win32Api 函数上使用 P-Invoke，例如`AttachConsole`,`WriteConsole`和`FreeConsole`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T21:38:52.793

如果我没记错的话，你想要这样的东西

```
System.Diagnostics.Process p = new System.Diagnostics.Process();

p.StartInfo.FileName = "ModelExporter.exe";
p.StartInfo.RedirectStandardOutput = true;
p.StartInfo.RedirectStandardInput = true;
p.StartInfo.UseShellExecute = false;
p.StartInfo.CreateNoWindow = true;
p.Start();

StreamReader myStreamReader = p.StandardOutput;

// Reads a single line of the programs output.
string myString = myStreamReader.ReadLine(); 

// This would print the string to the DOS Console for the sake of an example.
// You could easily set a textbox control to this string instead...
Console.WriteLine(myString);

p.Close(); 
```

# haskell - 如何轻松使 Data.List.Vector 成为 Arbitrary 的成员？

> ID：10341674
> 
> 赞同：3
> 
> 时间：2012-04-26T21:27:33.683
> 
> 标签：haskell, typeclass, quickcheck

我在我的程序中使用 Data.List.Vector，现在我想使用 quickCheck。但是，没有这样的例子。由于 [Double] 已经是任意的，我想我可以做类似的事情

```
instance Arbitrary V.Vector Double where
    arbitrary = V.fromList (arbitrary :: [Double]) 
```

唉，GHC 根本不喜欢这样：

```
`Arbitrary' is applied to too many type arguments
In the instance declaration for `Arbitrary V.Vector Double' 
```

我想我也可以只创建一堆接受 [Double] 并使用 V.fromList 的属性，但这似乎很乏味。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-26T21:33:34.860

您的问题是您需要将其括起来，例如`instance Arbitrary (V.Vector Double)`等。但是有一种更好的方法：

```
instance (Arbitrary a) => Arbitrary (V.Vector a) where
    arbitrary = fmap V.fromList arbitrary 
```

请注意，您需要`fmap`因为`arbitrary`是 type 的值`Gen a`，因此为了从`Gen [a]`to`Gen (V.Vector a)`您需要提升`V.fromList`into `Gen`，您可以这样做，因为它是一个仿函数。

# java - Grails 命令绑定 - 具有关系的域类 - 可能吗？

> ID：10341675
> 
> 赞同：0
> 
> 时间：2012-04-26T21:27:37.817
> 
> 标签：java, data-binding, grails

如果我有类似的域类：

```
class A {
 short aCode
 //...
 static hasMany = [bs : B]
 static mapping = {
   id column: 'a_code' name: 'aCode'
 }
}

class B {
  long bCode
  static belongsTo = [a: A]
  id column: 'b_code' name: 'bCode'
} 
```

并尝试在命令中使用 B 类：

```
class SomeCommand {
  List<B> bs = ListUtils.lazyList( [], FactoryUtils.instantiateFactory(B) )
} 
```

我对 aCode 的输入应该是：

```
<input type='text' name='bs[0].a.aCode' /> 
```

为什么这不受 grails 控制器的约束？`command.bs[0].a`绑定后保持为空。

我正在使用 Grails 2.0.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T11:29:29.700

我已经毫无问题地完成了关系绑定。

我不确定这是如何工作的。

```
class SomeCommand {
  List<B> bs = ListUtils.lazyList( [], FactoryUtils.instantiateFactory(B) )
}

<input type='text' name='bs[0].a.aCode' /> 
```

因为，A（Parent）有很多 B（Children），B 属于 A。

例如。A 有 10Bs (bs[0] ~ bs[9]) 我总是可以使用这样的东西来绑定输入。

```
<input type="text" name="a.aCode" />

<input type="text" name="bs[0].bCode" />
<input type="text" name="bs[1].bCode" />
....
.... 
```

不确定如何将子 (B) 中的数据绑定到父 (A)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:56:32.937

实际上与命令对象和列表的数据绑定不起作用。为此有一个[JIRA](http://jira.grails.org/browse/GRAILS-5582)。

# opengl - Opengl：像素重叠（碰撞检测）

> ID：10341679
> 
> 赞同：0
> 
> 时间：2012-04-26T21:27:48.770
> 
> 标签：opengl, collision-detection, pixel, overlapping

我正在尝试在圆圈（凝结）之间建立一个碰撞检测程序，对此我很陌生，我首先做了一个检测来检查每个圆圈。现在我有了创建某种边界框的想法，以便更精确地检查足够接近的圆（当有一组凝固的圆时更有效）。

现在，在我选择要仔细查看的对象后进行更精确的检测，openGL 是否可以通过检测像素重叠来查看两个对象是否重叠？

欢迎使用其他使碰撞检测更优化的技巧:)

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T21:35:39.107

OpenGL 没有这样的内置功能，尽管您可以在较旧 (<= 2.1) 版本的 OpenGL 中破坏“反馈”渲染模式。

也就是说，对于圆的特殊情况，有一种更快的方法来查找碰撞。对于一对候选圆，如果它们的中心之间的距离小于它们的半径之和，则它们重叠。更快的是，您可以使用平方距离并避免使用`sqrt()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T22:05:19.233

> 不知何故，openGL可以通过检测像素重叠来查看两个对象是否重叠？

OpenGL 没有碰撞检测例程。

OpenGL 有[选择缓冲区](http://www.opengl.org/sdk/docs/man/xhtml/glSelectBuffer.xml)，可用于获取在特定区域渲染的对象列表，但这没有用，因为要检测重叠，您需要知道可能发生重叠的区域。

通过滥用模板缓冲区，您可以获得重叠的像素列表（以及在某个像素上绘制了多少对象），但为此您必须从模板缓冲区读取数据并手动遍历每个像素。手动检查圆形碰撞会更快（10..100 倍）。除非您使用 8 个或更少的对象，否则您将无法使用模板缓冲区来确定在像素上绘制了哪些对象。

> 欢迎使用其他提示进行更优化的碰撞检测

使用树或“扫描和修剪”算法。

# java - 从客户端发送动态图像/谷歌地图到服务器端

> ID：10341683
> 
> 赞同：0
> 
> 时间：2012-04-26T21:28:07.620
> 
> 标签：java, javascript, google-maps, flying-saucer

我正在开发一个 web java 应用程序，我想在服务器端使用一些动态图像来使用 Flying Saucer 生成 PDF。

当我在服务器端生成 PDF 时，Flaying Saucer 会尝试加载图像，例如：

```
<img src="https://maps.googleapis.com/maps/api/staticmap?parameters"> 
```

但是服务器无法访问“https://maps.googleapis.com/maps/api/staticmap?parameters”并且这样的 url 不在我的服务器中，因此没有加载图像。PDF 已生成并交付给我的用户，但没有图像。

所以我想上传用户在点击打印按钮时看到的图像。

有没有办法做到这一点，例如使用javascript？

提前致谢。

PS：我们可以使用高级版

# javascript - HTML/Javascript 在文件上传前访问 EXIF 数据

> ID：10341685
> 
> 赞同：15
> 
> 时间：2012-04-26T21:28:10.617
> 
> 标签：javascript, jquery, html, file-upload, exif

我正在尝试从已拖入浏览器或已通过 html 文件输入元素选择的图像（jpeg）中提取**EXIF数据。**

我设法使用[此处](https://developer.mozilla.org/en/DOM/FileReader)`FileReader and FileReader.readAsDataURL` 描述的方法在浏览器中预览图像。

我找到了一个[EXIF 库](http://blog.nihilogic.dk/2008/05/reading-exif-data-with-javascript.html)，它允许通过 javascript 提取图像的 EXIF 数据。但对我来说，它只有在我将它与`img`通过 URL 加载其内容的普通标签一起使用时才有效。

我还在 StackOverflow 上发现[了这个问题](https://stackoverflow.com/questions/5784459/javascript-can-i-read-exif-data-from-a-file-upload-input)，其中接受的答案表明这是不可能的。

但我很确定它可以实现，因为[500px.com](http://500px.com)在添加要上传的文件之后和上传完成之前立即提取 EXIF 数据。

一些想法应该如何从我从 FileReader 获得的 base64 编码图像中提取 EXIF 数据？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-27T07:12:04.723

我终于找到了该问题的客户端解决方案：

1.  `FileReader`使用and 方法读取文件`.readAsBinaryString`
2.  然后将该二进制字符串包装到已包含在[EXIF 库中的 BinaryFile 对象中](https://github.com/exif-js/exif-js)
3.  最后打电话`EXIF.readFromBinaryFile(binaryFileObject);`

它完成了:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-29T12:10:24.813

**[jQuery-fileExif](https://github.com/sanisoft/jQuery-fileExif)** javascript 库在上传之前读取图像 exif 数据。
[GitHub 链接](https://github.com/sanisoft/jQuery-fileExif)，库中的示例[jsfiddle](http://jsfiddle.net/noonon/Ls5Dw/)。

```
var someCallback = function(exifObject) {

    $('#cameraModel').val(exifObject.Model);
    $('#lat').val(exifObject.GPSLatitude);
    $('#lng').val(exifObject.GPSLongitude);
    // Uncomment the line below to examine the
    // EXIF object in console to read other values
    //console.log(exifObject);

  }

      try {
        $('#file').change(function() {
            $(this).fileExif(someCallback);
        });
      }
      catch (e) {
        alert(e);
      } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T21:58:30.737

查看[**FxIF firefox 扩展**](http://code.google.com/p/fxif/)的代码。它仅使用 JavaScript 读取 exif 数据。要读取文件内容，您可以使用现代浏览器的[**FileReader API**](https://developer.mozilla.org/en/DOM/FileReader)。

# php - 为什么base64编码的PHP没有被解码？

> ID：10341687
> 
> 赞同：-3
> 
> 时间：2012-04-26T21:28:22.657
> 
> 标签：php, magento, base64

我正在运行 Magento 版本。1.6.2.0 在 Ubuntu EC2 实例上，但我的表单返回为 base64 编码的 php 文件，这些文件没有被解码。关于为 Magento 或 PHP 开启 base64 解码的任何想法？

我们有一个联系我们表格，您可以填写并点击提交。此表单附带我们安装的 Magento 主题（Themeforest 的 CrispAndClean）。但是，当您单击提交时，您将返回一个空白页面，而不是提交表单。如果单击查看源代码，您可以看到 base64 编码的 PHP。

您可以使用此站点对其进行解码： [http ://www.tareeinternet.com/scripts/decrypt.php](http://www.tareeinternet.com/scripts/decrypt.php)

结果如下：

?>http://www.facebook.com/rebimol * * * @author Vladimir Popov * @copyright 版权所有 (c) 2011 Vladimir Popov * @license [http://opensource.org/licenses/osl-3.0.php](http://opensource.org/licenses/osl-3.0.php) 开放软件许可证 (OSL 3.0) */class VladimirPopov_WebForms_Block_Webforms 扩展 Mage_Core_Block_Template{ protected function _toHtml() { if((float)substr(Mage::getVersion(),0,3) <= 1.3){ if($this->getTemplate() == 'webforms/default.phtml' && $this->getData('nolegacy')!='0'){ $this->setTemplate('webforms/legacy.phtml'); } } $note = "由 WebForms 提供支持

结果')) == 1) $this->getResults(); if($webform->getSurvey()){ $collection = Mage::getModel('webforms/results')->getCollection(); if(Mage::helper('customer')->isLoggedIn()) $collection->addFilter('webform_id',$data['webform_id'])->addFilter('customer_id',Mage::getSingleton('customer /session')->getCustomerId()); else{ $session_validator = Mage::getSingleton('customer/session')->getData('_session_validator_data'); $collection->addFilter('customer_ip',ip2long($session_validator['remote_addr'])); } $count = $collection->count(); 如果（$count>0）{ $show_success = true; } } if(Mage::getSingleton('core/session')->getWebformsSuccess() == $data['webform_id'] || $show_success){ Mage::register('show_success',true); Mage::getSingleton('core/session')->setWebformsSuccess(); } if($webform->getRegisteredOnly() && !Mage::helper('customer')->isLoggedIn()){ Mage::getSingleton('customer/session')->setBeforeAuthUrl($this->getRequest() ->getRequestUri()); Mage::app()->getFrontController()->getResponse()->setRedirect(Mage::helper('customer')->getLoginUrl(),301); 法师::register('fields_to_fieldsets',$webform->getFieldsToFieldsets()); //使用验证码 if(!Mage::helper('customer')-> isLoggedIn()){ $pubKey = Mage::getStoreConfig('webforms/captcha/public_key'); $privKey = Mage::getStoreConfig('webforms/captcha/private_key'); if($this->captchaAvailable()) Mage::register('use_captcha',true); } //处理结果 if($this->getRequest()->getParam('submitWebform_'.$data['webform_id'])){ //验证验证码 if(Mage::registry('use_captcha')){ if($this->getRequest()->getParam('recaptcha_response_field')) { $verify = $this->getCaptcha()->verify($this->getRequest()->getParam('recaptcha_challenge_field'),$ this->getRequest()->getParam('recaptcha_response_field')); 如果（$验证-> isValid()){ $success = $this->saveResult(); } else { Mage::getSingleton('core/session')->addError($this->__('验证码不正确，请重试。')); 法师::register('captcha_invalid',true); } } else { Mage::getSingleton('core/session')->addError($this->__('验证码不正确，请重试。')); 法师::register('captcha_invalid',true); } } 其他 { $success = $this->saveResult(); } if($success){ Mage::getSingleton('core/session')->setWebformsSuccess($data['webform_id']); } //提交成功后重定向 $url = Mage::helper('core/url')->getCurrentUrl(); if($webform->getRedirectUrl()){ if(strstr($webform->getRedirectUrl(),'://')) $url = $webform->getRedirectUrl(); 否则 $url = $this->getUrl($webform->getRedirectUrl()); if($success) Mage::app()->getFrontController()->getResponse()->setRedirect($url); 父::_prepareLayout(); $this->getLayout()->getBlock('head')->setTitle(Mage::registry('webform')->getName()); } 公共函数 captchaAvailable(){ if(class_exists('Zend_Service_ReCaptcha') && Mage::getStoreConfig(' webforms/captcha/public_key') && Mage::getStoreConfig('webforms/captcha/private_key') ) 返回 true；返回假；} 公共函数 getCaptcha(){ $pubKey = Mage::getStoreConfig('webforms/captcha/public_key'); $privKey = Mage::getStoreConfig('webforms/captcha/private_key'); if($pubKey && $privKey) $recaptcha = new Zend_Service_ReCaptcha($pubKey, $privKey); 返回 $recaptcha; } 公共函数 saveResult(){ if(!Mage::registry('webform')) return false; 尝试{ $postData = $this->getRequest()->getPost(); $result = Mage::getModel('webforms/results'); $session_validator = Mage::getSingleton('customer/session')->getData('_session_validator_data'); $iplong = ip2long($session_validator['remote_addr']); if((float)substr(Mage::getVersion(),0,3)<=1){ $iplong = ip2long($this->getRealIp()); $result->setData($postData) ->setWebformId(Mage::registry('webform')->getId()) ->setStoreId(Mage::app()->getStore()->getId()) ->setCustomerId(Mage::getSingleton('customer/session')->getCustomerId()) ->setCustomerIp($iplong) ->save(); Mage::dispatchEvent('webforms_result_submit',array('result'=>$result,'webform'=>Mage::registry('webform'))); $emailSettings = Mage::registry('webform')->getEmailSettings(); if($emailSettings['email_enable']){ $result = Mage::getModel('webforms/results')->load($result->getId()); $result->sendEmail(); if(Mage::registry('webform')->getDuplicateEmail()){ $result->sendEmail('customer'); } } 返回真；} catch (Exception $e){ Mage::getSingleton('core/session')->addError($e->getMessage()); 返回假；} } 公共函数 getRealIp() { $ip = false; if(!empty($_SERVER['HTTP_CLIENT_IP'])) { $ip = $_SERVER['HTTP_CLIENT_IP']; } if(!empty($_SERVER['HTTP_X_FORWARDED_FOR'])) { $ips = explode(", ", $_SERVER[' HTTP_X_FORWARDED_FOR']); if($ip) { array_unshift($ips, $ip); $ip = 假；} for($i = 0; $i < count($ips); $i++) { if(!preg_match("/^(10|172\.16|192\.168)\./i", $ips [$i])) { if(version_compare(phpversion(), "5.0.0", ">=")) { if(ip2long($ips[$i]) != false) { $ip = $ips[ $i]; 休息; } } else { if(ip2long($ips[$i]) != - 1) { $ip = $ips[$i]; 休息; } } } } } return ($ip ? $ip : $_SERVER['REMOTE_ADDR']); } 公共函数 getResults(){ $data = $this->getData(); $webform = Mage::registry('webform'); //得到结果 $page_size = $data["page_size"]; $current_page = (int)$this->getRequest()->getParam('p'); if(!$current_page) $current_page = 1; $来自 = $current_page*$page_size; $results = Mage::getModel('webforms/results')->getCollection() ->addFilter('webform_id',$webform->getId()) ->addFilter('approved',1) ->setPageSize($ page_size) ->setCurPage($current_page) ; $results->getSelect()->order('created_time desc'); $last_page = $results->getLastPageNumber(); $page_url = $this->getUrl(Mage::getSingleton('cms/page')->getData('identifier')); 回声 get_class($page_url); if($current_page1){ $next_url= $page_url."?p=".($current_page-1); 法师::register('prev_url',$prev_url); 法师::register('next_url',$next_url); 法师::register('current_page',$current_page); 法师::register('results',$results); } 受保护的函数 _afterToHtml($html){ Mage::unregister('webform'); 法师::unregister('fields_to_fieldsets'); 法师::unregister('prev_url'); 法师::unregister('next_url'); 法师:: 注销（'current_page'）；法师::注销('结果'); 法师::unregister('redirect_url'); 法师::unregister('use_captcha'); 法师::unregister('captcha_invalid'); 返回父级::_afterToHtml($html); }}?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T20:40:57.953

部分答案似乎是返回的页面第一部分中的 eval 命令没有被执行：

eval(gzinflate(str_rot13(base64_decode('HZrHkoNLtlJ/pXRdFQwA4aNaBd57z6QDYoX3X/9HLwc5yQiBuOfsvZZFf/3333/9ozzT4Y

# .net - 正则表达式逗号或逗号空格或空格

> ID：10341689
> 
> 赞同：3
> 
> 时间：2012-04-26T21:28:30.520
> 
> 标签：.net, regex

我的问题是 [,\s|,|\s] 将匹配 ", " 为 "," 并留下额外的空间

所以我没有得到匹配的“星期六，星期一”：

```
(Thu|Fri|Sat)[,\s|,|\s](Mon|Tue) 
```

通过匹配 (Thu|Fri|Sat)[,\s|,|\s] 我在“Sat”上得到匹配，但 match.Value 在“Sat”上（没有空格）

基本上我还想在 "Sat,Mon" "Sat, Mon" "Sat Mon" 但不是 "SatMon" 上获得匹配

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T21:31:53.643

```
(Thu|Fri|Sat)[,\s]\s*(Mon|Tue) 
```

这将允许逗号或空格以及之前的任何额外空格`Mon`或`Tue`

您的版本将字符类和交替的概念混为一谈。交替，您在其中分隔选项的位置`|`必须在括号内。`(?: )`我们可以使用语法使这些括号不被捕获。

上面，我使用了一个字符类。要使用交替：

```
(Thu|Fri|Sat)(?:,|\s)\s*(Mon|Tue) 
```

我曾经`\s`表示空格，但出于您的目的，您可以用文字空格替换它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T21:32:11.950

尝试以下 `\s?[, ]\s?`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-18T10:10:43.727

以@Jay 回答为基础。我会简单地使用一个贪婪的匹配。

```
(Thu|Fri|Sat)(?:,|\s)+(Mon|Tue) 
```

# malloc - RTOS - 传递分配结构并将其传递给队列

> ID：10341691
> 
> 赞同：0
> 
> 时间：2012-04-26T21:28:49.630
> 
> 标签：malloc, task, messaging, rtos

我正在运行的几个任务遇到了一些问题。我有三个任务，其中一个是 LCD 更新任务，另外两个是电机驱动器任务。我还有两个 ISR 可以向两个电机驱动任务发布消息。至于安全地传递指针，我正在考虑创建一个结构：

```
 typedef struct message{
  enum BUTTON_1 = 0, BUTTON_2 = 1, NO_BUTTON = 3; //button ISR to increase motor drive  
  int timestamp; //A timestamp for the RPM of the motors
  } 
```

现在共享内存的问题出现了，所以我在想：

```
 struct message* update_msg = (struct message*)malloc(sizeof(struct message)); //from here I dont know how to creat an object that fills the space allocated. 
```

然后我将通过队列将指针发送到结构：

```
 OSTASKQPOST((void *)(st_size)
  ....
  ) 
```

在最后一个任务收到消息并使用成员变量完成所需的操作后，我将不得不释放内存。

```
 free(st_size) 
```

这样的事情是合理的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T00:17:06.647

这是线程间通信数据的“线程间通信 101”方法。它会正常工作。假设 32 位宽的队列，随着消息大小的增加，发布结构地址或对象实例开始很快获胜（超过直接按值发布数据）。

还有其他机制。在我的 ARM 嵌入式项目中，RAM 有限且内存空间比速度更重要，我倾向于使用 255 个全局消息实例的数组作为池，（保留一个值，例如 255，用于“无效索引”很有用） . 这意味着每条消息只能被一个字节引用，并且每条消息中的两个字节允许它们链接到列表中或链接到列表之外。一个链表头字节、一个互斥体和一个信号量为线程间通信创建了一个阻塞队列——不需要额外的存储空间。所有消息在启动时都链接到一个“池”队列中，并被弹出、在线程之间排队并由应用线程释放回池中。

从硬件接收数据的 ISR 不能调用 malloc、获取互斥锁或等待消息索引的信号量。我使用另一个没有锁的队列类，只是一个字节索引的循环队列。我在启动时推送了一些消息。中断处理程序可以从这个'ISRpool'中取出消息，从硬件中填充它们，设置一个int，（位域！），以识别ISR，将消息索引推送到'ISRout'循环队列，发出信号量并通过退出操作系统。在信号量上等待的线程醒来并知道 ISRout 上有数据，将其弹出并将其排队到处理来自该 ISR 的消息的任何线程。该“ISRhandler”线程还负责用消息“充值”ISRpool，以便 ISR 在数据到达时始终准备好消息。这个简单的、共享的 '

以类似的方式，tx ISR 的消息被推送到循环队列中以供 ISR 拾取，（中断被暂时禁用以查看硬件是否空闲并且硬件 FIFO 需要“启动”以再次启动 tx 中断） . 'Used' tx 消息被转储到 rx ISRpool - 它们也可以重新用于输入。

池化方案有一些不是立即显而易见的优势。一个是'没有malloc，没有免费'。消息肯定会泄露，但我很快注意到 - 我的“监视器/调试器”运行的 UART 的终端提示是“223>”，数字是池级别。如果这个数字下降并且不再回升，我知道我已经泄露了。当您不能只在 Valgrind 下运行应用程序时，这一点非常重要 :)

# python - 使用 FileField 时“未缩进与任何外部缩进级别不匹配”

> ID：10341695
> 
> 赞同：1
> 
> 时间：2012-04-26T21:29:06.757
> 
> 标签：python, django

```
class FileUploadModel(models.Model):
    title = models.CharField(max_length=50)
    uploaded_file = models.FileField(upload_to = 'bose') 
```

错误：

```
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/usr/local/lib/python2.6/dist-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/usr/local/lib/python2.6/dist-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/usr/local/lib/python2.6/dist-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/usr/local/lib/python2.6/dist-packages/django/core/management/base.py", line 231, in execute
    self.validate()
  File "/usr/local/lib/python2.6/dist-packages/django/core/management/base.py", line 266, in validate
    num_errors = get_validation_errors(s, app)
  File "/usr/local/lib/python2.6/dist-packages/django/core/management/validation.py", line 30, in get_validation_errors
    for (app_name, error) in get_app_errors().items():
  File "/usr/local/lib/python2.6/dist-packages/django/db/models/loading.py", line 158, in get_app_errors
    self._populate()
  File "/usr/local/lib/python2.6/dist-packages/django/db/models/loading.py", line 64, in _populate
    self.load_app(app_name, True)
  File "/usr/local/lib/python2.6/dist-packages/django/db/models/loading.py", line 88, in load_app
    models = import_module('.models', app_name)
  File "/usr/local/lib/python2.6/dist-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/home/bose/DJANGO/blog/blog/models.py", line 22
    uploaded_file = models.FileField(upload_to = 'bose')

IndentationError: unindent does not match any outer indentation level 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T21:32:00.533

好吧，如果您将代码直接复制到编辑框中，那么您的问题是您混合了制表符和空格。问题源中的`title`行前面有一个制表符，而下一行前面有四个空格。

有关更多信息，请参阅[此问题](https://stackoverflow.com/q/120926/577088)及其答案。`-t`如果您希望 Python 在您同时使用制表符和空格时发出警告，则可以使用该选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-02T19:56:49.757

如果您使用 Komodo 编辑器，则可以按照类似错误消息之一中的建议进行操作：

1) 全选，例如 Ctrl + A

2）转到代码 - >取消区域

3）仔细检查您的缩进是否仍然正确，保存并重新运行您的程序。

我正在使用 Python 3.4.2

# php - Flex 4.5 移动部署 php/sql

> ID：10341696
> 
> 赞同：0
> 
> 时间：2012-04-26T21:29:06.993
> 
> 标签：php, android, mysql, apache-flex, flex4.5

所以我为 android 和 iphone 构建了一个应用程序，我几乎完成了，所以我决定开始在远程服务器上进行测试。但是，当我更改远程服务器的参数时，gateway.php 文件出现 404 错误。路径正确且文件存在于服务器中。我遵循了这个方法：

1.  更改了服务文件上的参数以匹配服务器
2.  将 amf_config.ini 文件上的 webroot 更改为 /home/myuser/public_html/
3.  编辑了 MarkersService.as（扩展服务超类的文件）并添加了这个 _serviceControl.endpoint = "http://www.chania* *** *.com/Chania/gateway.php";
4.  上传 .swf 文件

测试时我得到错误。如果我将端点更改为我的本地主机，一切正常。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:00:56.620

因此，经过大量研究和测试后，我发现在服务器上部署使用 php 服务的移动应用程序需要做些什么。由于互联网上没有关于如何准确执行此操作的指南，因此我提出了以下步骤。

1.  将 ZendFramework 文件夹从本地服务器上传到服务器的根目录（我的是 public_html）
2.  将您的项目文件夹（很可能是调试文件夹）上传到根目录（例如 /myproject）。在此文件夹中，您需要有服务文件夹 (/myproject/services)、amf_config.ini 文件和 gateway.php 文件。
3.  这是最有可能导致问题的部分。您必须编辑 amf_config.ini 并在我的项目中添加 zend 库的 webroot=absolute 路径和 zend_path=absolute 路径，它们是“webroot=/home/username/public_html/ 和 zend_path=/home/username/public_html/ZendFramework /图书馆/”。您还应该确保在文件末尾存在以下内容

    > [zendamf] amf.production=true amf.directories[] myproject/services

4.  最后，您必须在项目中找到 myservice.as 文件，并在初始化后添加以下行并编译

    super._serviceControl.endpoint="http://www.mydomain.com/myproject/gateway.php"

如果您按照上述步骤操作，您的移动应用程序应该能够在测试和部署时从远程服务器获取数据。

我希望我能帮助一些人，尤其是 flex mobile 上的新开发人员

# objective-c - UITableView：为什么删除后“行数”没有更新？

> ID：10341698
> 
> 赞同：-1
> 
> 时间：2012-04-26T21:29:14.773
> 
> 标签：objective-c, ios, xcode4

这是我的代码，它应该删除选定的行。它导致应用程序崩溃，因为它声称行数不正确。我查了，不正确；表中的行已被删除，但显然行数尚未更新（代码确实被命中）......这怎么可能？（我有另一个 UITableViewController 具有确切的代码，可以工作）。我如何解决它？

```
if (editingStyle == UITableViewCellEditingStyleDelete) {

    //  remove row from the table
    SQLite *sql = [[SQLite alloc] init];
    [sql deleteReadingsRow: indexPath.row];

    // Delete the row from the data source
    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
} 
```

这是确定行数的代码：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    SingletonListOfReadings  *rShareInstance = [SingletonListOfReadings sharedInstance];

    return rShareInstance.listOfReadings.count; // Return the number of rows in the section
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:42:09.323

我发现了问题......我依赖于一个单例（SingletonListOfReadings），当在 d/b 表中删除该行时，它没有被重置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T21:52:18.337

当您发现问题时，您应该考虑改用[NSFetchedResultsController](http://developer.apple.com/library/ios/#DOCUMENTATION/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html)。只需很少的工作，它就可以在添加、删除或修改行时自动更新您的表。一般来说，它比依赖于保持单例同步更可靠。有很多将它与表格一起使用的示例。

# weka - 使用 weka 将 CSV 转换为 ARFF

> ID：10341701
> 
> 赞同：21
> 
> 时间：2012-04-26T21:29:33.540
> 
> 标签：weka

我一直试图将这个数据集`http://archive.ics.uci.edu/ml/datasets/Communities+and+Crime+Unnormalized`放入 Weka，但一点运气都没有。我将其转换为 CSV，然后将其加载到 Weka，然后尝试将其转换为 ARFF，但仍然给我错误`"attribute names are not unique"`。

另外，我是否必须从测试数据集中传播训练数据集或将它们放在一起？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-10-08T09:29:56.307

您也可以使用 ArffViewer（工具 -> ArffViewer 或 Ctrl+A）。然后打开您的 CSV 文件。

接下来转到 File -> Save as... 并选择*Arff data files*（默认情况下应选中）。

请注意，您的字段必须用逗号而不是分号分隔。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-15T16:56:12.850

WEKA 中实现了一些转换器。以下是与该主题相关的 API 页面：[http ://weka.sourceforge.net/doc.stable/weka/core/converters/package-summary.html](http://weka.sourceforge.net/doc.stable/weka/core/converters/package-summary.html)

例如，这里是如何从 CSV 转换为 ARFF：

```
java -cp /path/to/weka.jar weka.core.converters.CSVLoader filename.csv > filename.arff 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-11-29T13:32:57.970

将您的 .CSV 格式文件上传[到此](http://ikuz.eu/csv2arff/). 从此您的 .CSV 格式将转换为 WEKA .arff 格式。完成后，将 .arff 文件获取到 Weka 工具。现在您可以继续进行数据分析。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-04T03:43:09.293

您需要 csv 中的标题字段。您需要在第一行的 csv 文件中添加 attr0,attr1,...,labels。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-01T05:04:07.923

我没有遇到任何问题。好的，请执行以下操作。在您指定的网页中，

*   复制“.arff header for weka:”和“Relevant Papers”之间的段。
*   将其粘贴到 .txt 文件中
*   [在此位置](http://archive.ics.uci.edu/ml/machine-learning-databases/00211/)打开数据文件
*   复制实例并将其附加到您的 .txt 文件中，紧跟在 @data 部分之后
*   将 .txt 文件另存为 .arff 文件

你现在可以走了。

**我必须从测试数据集中分离训练数据集还是将它们放在一起？**

这取决于您的分类方法。如果您选择 10 倍 CV，则将它们放在一起。如果要使用约定方法，请将它们分开。同样，这完全取决于您的方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-11T14:45:20.677

将 .csv 转换为 .arff 文件格式以在 Weka 中使用。 **注意：** .csv 文件应该是正确的，否则它不会转换为 .arff 文件。它不应在列中包含任何空值。下载 weka 核心 jar。在 Eclipse -->Configure Build path 中，添加 weka core jar 并编写以下代码行并执行代码：

**CSVToArff.java**

```
import weka.core.Instances;
import weka.core.converters.ArffSaver;
import weka.core.converters.CSVLoader;

import java.io.File;

public class CSVToArff {

   public static void main(String[] args) throws Exception {

    // load CSV
    CSVLoader loader = new CSVLoader();
    loader.setSource(new File("Provide the input file location (.csv) "));
    Instances data = loader.getDataSet();

    // save ARFF
    ArffSaver saver = new ArffSaver();
    saver.setInstances(data);
    saver.setFile(new File("Provide the output file location (.arff) ");
    saver.writeBatch();
    // .arff file will be created in the output location
  }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-02T13:12:19.643

也许这个在线 CSV 到 ARFF 转换器会有用？

[http://slavnik.fe.uni-lj.si/markot/csv2arff/csv2arff.php](http://slavnik.fe.uni-lj.si/markot/csv2arff/csv2arff.php)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-01T04:57:58.123

**在使用Simple CLI**的weka 中，我们可以轻松地将*.csv*文件转换为*.arff*文件。

只需导航到 Simple CLI -> 在提供的文本字段中提供以下命令（首先提供 .csv 文件名，然后提供要转换的 .arff 的名称）

```
java weka.core.converters.CSVLoader D:\L4S1\DataMining-Lab-Assignment-02\filename.csv > D:\L4S1\DataMining-Lab-Assignment-02\filename.arff 
```

下图显示了简单 CLI 窗口

[![在此处输入图像描述](../Images/9a1a35d1f1ddf5392c2af0cb08421081.png)](https://i.stack.imgur.com/KStzI.png)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-07-03T23:58:14.183

有用

例如：- C:\Users\User\Desktop>java -cp "e:\data\weka-3-6-10\weka.jar;." weka.core.converters.CSVLoader data1.csv >> data1.arff 1\. 转换前检查 excel 中的 csv 是否有任何单元格不正确 2\. 检查属性是否正确

对于普通的 csv - 你必须根据需要添加标题行，即使是 x,y,z,...

# c++ - 从文件c ++中获取整数

> ID：10341702
> 
> 赞同：0
> 
> 时间：2012-04-26T21:29:39.587
> 
> 标签：c++

如何使用 fread fwrite 从文件中读取数字 这是我的代码

```
char *buff[1];
int highscore;
FILE *FPtr;
FPtr = fopen("highscore.txt","w+");
if(FPtr != NULL){
    fread(buff,sizeof(buff),1, FPtr);

}
if(buff == NULL){
     fprintf (FPtr, "%d" , 10);
     fclose(FPtr);
} 
```

因此，在它创建文件并将 10 打印到文件中的初始运行之后，我想读取文件，然后打印出 10 我将如何去做这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T22:16:12.447

如果您要阅读`int`with `fread`，您不想使用单独的指针，您想使用 that 的地址`int`：

```
int highscore;

fread(&highscore, sizeof(highscore), 1, score_file); 
```

为了匹配这一点，当你写作时，你想使用`fwrite`：

```
int highscore;

fwrite(&highscore, sizeof(highscore), 1, score_file); 
```

但是请注意，该文件是不可移植的——尝试（例如）在一台机器上写入它并在另一台机器上读取它可能会产生严重错误的结果。即使用不同的选项重新编译你的代码*也可能*改变程序对文件格式的隐含想法（例如，从 32 位编译到 64 位编译很容易破坏事情）。

# avr - 如何使用 avr-gcc 将变量绑定到未使用的 AVR I/O 寄存器？

> ID：10341706
> 
> 赞同：3
> 
> 时间：2012-04-26T21:30:02.513
> 
> 标签：avr, avr-gcc

我想使用 avr-gcc 将全局变量绑定到未使用的 I/O 寄存器（例如 PORTB），以减少代码大小。我在 AVR 的应用笔记[AVR035](http://www.atmel.com/Images/doc1497.pdf)（第 14 页）中学到了这个技巧。

在应用笔记中，他们使用 IAR 编译器并将变量绑定到 I/O 寄存器，如下所示：

```
__no_init volatile uint8_t counter@0x35; 
```

使用 avr-gcc，我可以使用以下行将变量绑定到标准寄存器（在本例中为 r3）：

```
register uint8_t counter asm("r3"); 
```

但是，这不适用于 I/O 寄存器。有没有办法对 I/O 寄存器执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T12:58:44.740

由于这仅适用于**全局变量**，因此仅使用类似这样的东西怎么样，例如 Uart 波特率寄存器：

```
#define myGlobalVariable UBRR 
```

~~另请注意，仅当您进行大量位测试时，此优化才值得，因为大多数 IO 寄存器都有直接位测试指令。~~哦，我忘记了不是所有的 AVR 都有 LDS 和 STS 指令以及一些仅通过 Z 寄存器访问 SRAM，与简单的 IN 和 OUT 相比，这在代码大小和速度上都有很大的不同......

# python - 如何将 python 站点迁移到另一台机器？

> ID：10341707
> 
> 赞同：5
> 
> 时间：2012-04-26T21:30:05.163
> 
> 标签：python, django, virtualenv

我想知道如何将当前在生产环境中运行的复杂python网站设置到本地机器中进行开发？

目前，该站点在虚拟环境中使用 python 与 Django 应用程序（注册 + cms 模块）相结合。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-26T21:32:46.003

如果您`pip`用于包管理，您可以轻松地在另一个系统上重新创建 virtualenv：

在 system1 上，运行`pip freeze --local > requirements.txt`该文件并将其复制到 system2。在那里，创建并激活 virtualenv 并用于`pip install -r requirements.txt`安装之前安装在 virtualenv 中的所有包。

您的 python 代码可以简单地复制到新系统中；我会`find -name '*.pyc' -delete`因为你通常不想在机器之间移动编译的代码（即使它只是 python 字节码）。

# css - CSS：为什么这段代码不能向右浮动？

> ID：10341711
> 
> 赞同：0
> 
> 时间：2012-04-26T21:30:23.313
> 
> 标签：css

我正在尝试创建这组社交图标以向右浮动，但我遇到了问题。

如果我将它浮动到左边它工作正常，但我不能改变到右边。

*   [http://jsfiddle.net/retse/1/](http://jsfiddle.net/retse/1/)

我不知道我是否错过了任何不能让它向右浮动的东西？

编辑：我将在一分钟内使用部分 HTML 代码进行更新。

[http://applesiam.com](http://applesiam.com)类名是正确的，我的页面中有 css 名称，但它仍然没有向右浮动

对于那个很抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T21:39:50.137

您没有任何名为 share1 和/或 widget1 的类，它们被命名为 post-share1 和 post-widget1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T21:38:33.093

我已经更新了你的 jsfiddle

[jsfiddle](http://jsfiddle.net/retse/2/)

你在那里有错误的班级名称

# jquery - .Net Jquery 单选按钮切换文本区域

> ID：10341712
> 
> 赞同：0
> 
> 时间：2012-04-26T21:30:26.260
> 
> 标签：jquery, .net, radiobuttonlist

我有一个带有单选按钮组和文本区域的 ASP .Net 页面。

我想切换犯罪描述文本区域，这样如果他们选择“是”，他们必须解释情况。否则，文本区域对其他人来说仍然是隐藏的。

两者都是运行服务器，因此 Web 表单母版页为两者创建生成的 ID。但是，我似乎无法获得单选按钮的值。

我在其他线程中尝试了几种解决方案，但它们一直没有奏效。

以下是我尝试过的几种 JQ 方法：

```
//.Net throws an error and says that ClientId is not a property of the radio group.
$('#<%= Crime.ClientId %>').bind('change', function () {

   var checked = $(this).find('input:radio:checked');
   if (checked.length == 0) {
                alert("NO");
            }
   else {
                alert("YES");
            }

   var myRadio = $(this);

                           var checkedValue = myRadio.filter(':checked').val();

                            var show = myRadio.val() == "Yes";

                           var showOrHide = (myRadio.val() == 1) ? true : false;

                            alert(show + " " + showOrHide + " " + checkedValue);
                            $('#<%= CrimeDescription.ClientID %>').toggle(showOrHide);

        }); 
```

我还为 ASPX 控件应用了一个类，并尝试了对此的变体：

```
$('.CrimeToggle').click(function () {
                        //maybe traverse down to find the selected???
                    }); 
```

.Net ASPX

```
<asp:RadioButtonList RepeatDirection="Horizontal" CssClass="CrimeToggle" ID="Crime" runat="server">
             <asp:ListItem Value="Yes">Yes</asp:ListItem>
             <asp:ListItem Value="No">No</asp:ListItem>
</asp:RadioButtonList>

<textarea runat="server" id="CrimeDescription"></textarea> 
```

我需要选择选定的单选按钮并获取其值。

我必须使用 RadioButtonList 控件而不是输入（因为后端也在对控件执行其他操作）。

这是 .Net 生成的输出 html：

```
<table id="ctl00_BodyHolder_Crime" class="CrimeToggle" border="0">
<tbody>
<tr>
<td>
<input id="ctl00_BodyHolder_Crime_0" type="radio" value="Yes" name="ctl00$BodyHolder$Crime">
<label for="ctl00_BodyHolder_Crime_0">Yes</label>
</td>
<td>
<input id="ctl00_BodyHolder_Crime_1" type="radio" value="No" name="ctl00$BodyHolder$Crime">
<label for="ctl00_BodyHolder_Crime_1">No</label>
</td>
</tr>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:34:02.287

如果有人有同样的问题，这就是我最终的结果。

```
$('#<%= Crime.ClientID %>').click(function () {

            var showHide = $('.CrimeToggle').find('input:radio:checked').val() == "Yes";

            $('#<%= CrimeDescription.ClientID %>').toggle(showHide);

}); 
```

不知为何，我原本的工作又开始了。Visual Studio 有时可能会出错。奇怪的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T21:35:52.893

根据您在问题中给我们的文字，我相信此建议比直接回答您的问题更有帮助。

使用 JQuery 查找内容时，它是通过 HTML 进行搜索。您发布了不是 HTML 的 .NET ASPX 内容，但确实生成了它。有时，ASP.NET 会做您意想不到的事情。

**因此**，与其用您的 JQuery 猜测什么可能有效，不如查看实际的 HTML 输出，并在 Web 浏览器中使用控制台（一些浏览器允许这样做）。在查看实际的 HTML 时，使用控制台计算出一个 JQuery 表达式来提取您需要的内容。

然后加油！

# android - android - 可以使用应用内购买来下载内容吗？

> ID：10341714
> 
> 赞同：6
> 
> 时间：2012-04-26T21:30:29.440
> 
> 标签：android, download, in-app-purchase

我的问题很简单：谷歌是否有应用内购买服务，在购买过程完成后，会下载购买的内容？如果没有，还有其他选择吗？

这样做的原因是使应用程序尽可能小，而不是将所有购买的内容都包含在应用程序中。一个可能的解决方案是使用扩展库并从那里只下载部分块，但这太复杂了，对于大多数设备来说，整个扩展将在通过市场下载应用程序本身时被下载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-21T17:52:52.233

我经常看到的是在 Playstore 中将您的额外内容作为另一个应用程序下载提供，然后使用 IPC 将该额外内容通信/传输到主应用程序。

例如，我见过视频播放器要求您下载辅助应用程序以获取特定的编解码器。用户下载编解码器应用程序并将其编解码器传输到视频播放器应用程序后，用户可以删除编解码器应用程序。

在您的情况下，在您的应用同意与额外内容应用通信之前，您需要执行托管应用内购买的额外步骤。

这是一种笨拙的用户体验，但除了支付专门的网络主机来提供您的额外内容之外，这是目前唯一的选择。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-27T19:36:19.363

是的。

它在 android 的开发者存储库中也有完整的文档，并附有关于如何设置它的指南等。显然，如果你使用 google，他们会有所收获。但是，如果您自己制作，您仍然需要向您的信用卡处理器提供一部分。祝你好运：

[http://developer.android.com/guide/market/billing/index.html](http://developer.android.com/guide/market/billing/index.html)

亚马逊的安卓应用市场也提供了类似的服务。

**编辑**

"---购买过程完成后将下载购买的内容" :: NO <-- 到那个部分。您必须使用自己的网络服务器来处理它。只有原始应用内容会为您托管在 Google Play 上。

# android - 使用 Google Analytics 进行本地移动和网站分析

> ID：10341718
> 
> 赞同：1
> 
> 时间：2012-04-26T21:31:11.887
> 
> 标签：android, ios, mobile, google-analytics

我正在为当前使用 Google Analytics 的特定网站开发应用程序。我也计划将 Google Analytics 添加到我的 iOS 设备中。我想知道如何设计我的工作流程，以便我可以合并两个数据源。

我的移动设备是否应该将数据发送到我的 www.website.com/myPhone 之类的 URL？为手机创建一个单独的“UA”（谷歌分析序列号）帐户是个好主意吗？任何关于在一个地方查看相关有意义数据的建议都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T07:11:36.297

更多关于您的网站和应用程序所做的事情会很有用。但是，如果他们做同样的事情，我建议您在 1 个帐户中拥有 3 个配置文件，并使用过滤器来执行以下操作：

*   一份包含所有统计信息的个人资料
*   仅包含您网站的一份个人资料
*   仅包含您的移动应用程序的一份个人资料

尝试为相同的视图使用相同的 URL：这将有助于阅读统计数据和实现目标。

# bash - 使用 shell 变量查找具有多个文件名的名称

> ID：10341719
> 
> 赞同：4
> 
> 时间：2012-04-26T21:31:21.223
> 
> 标签：bash, shell, find

我有一个`find`命令可以查找名称与`-name`参数中提到的多个模式匹配的文件

```
find -L . \( -name "SystemOut*.log" -o -name "*.out" -o -name "*.log" -o -name "javacore*.*" \) 
```

这会在命令行中成功找到所需的文件。我正在寻找的是在 shell 脚本中使用此命令并将其与`tar`创建所有日志文件的 tar 的命令相结合。因此，在脚本中，我执行以下操作：

```
LIST="-name \"SystemOut*.log\" -o -name \"*.out\" -o -name \"*.log\" -o -name \"javacore*.*\" "
find -L . \( ${LIST} \) 
```

这不会打印我正在寻找的文件。

首先 - 为什么这个脚本不像命令那样运行？一旦做到了，我可以用球棒`cpio`或类似的方法来`tar`一次击球吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T21:45:56.827

看起来`find`无法匹配`*`未引用变量的模式。此语法适用于我（使用 bash 数组）：

```
LIST=( -name \*.tar.gz )
find . "${LIST[@]}" 
```

您的示例将变为以下内容：

```
LIST=( -name SystemOut\*.log -o -name \*.out -o -name \*.log -o -name javacore\*.\* )
find -L . \( "${LIST[@]}" \) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T21:45:48.807

```
eval "find -L . \( ${LIST} \)" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T21:46:52.440

当您使用一长串文件名时，您可能需要尝试以下语法：

```
# List of file patterns
Pat=( "SystemOut*.log"
"*.out"
"*.log"
"javacore*.*" )

# Loop through each file pattern and build a 'find' string
find $startdir \( -name $(printf -- $'\'%s\'' "${Pat[0]}") $(printf -- $'-o -name \'%s\' ' "${Pat[@]:1}") \) 
```

该方法使用列表中的元素按顺序构造参数，这往往效果更好（至少在我最近的经验中）。

您可以使用 find 的`-exec`选项将结果传递给归档程序：

```
find -L . \( .. \) -exec tar -Af archive.tar {} \; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T21:49:06.247

你可以使用 eval 和 xargs，

```
eval "find -L . \( $LIST \) " | xargs tar cf 1.tar 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T21:53:33.983

```
LIST="-name SystemOut*.log -o -name *.out -o -name *.log -o -name javacore*.*" 
```

通配符已被引用，您无需再次引用它们。此外，这里

```
LIST="-name \"SystemOut*.log\"" 
```

内部引号被保留，`find`并将它们作为参数的一部分。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-08T08:19:10.260

### 命令的构建`-name`列表`find`

这是执行此操作的正确方法：

```
cmd=();for p in \*.{log,tmp,bak} .debug-\*;do [ "$cmd" ] && cmd+=(-o);cmd+=(-name "$p");done 
```

或者

```
cmd=()
for p in \*.{log,tmp,bak,'Spaced FileName'} {.debug,.log}-\* ;do
    [ "$cmd" ] && cmd+=(-o)
    cmd+=(-name "$p")
done 
```

你可以转储你`$cmd`的数组：

```
declare -p cmd
declare -a cmd=([0]="-name" [1]="*.log" [2]="-o" [3]="-name" [4]="*.tmp" [5]="-o"
     [6]="-name" [7]="*.bak" [8]="-o" [9]="-name" [10]="*.Spaced FileName" 
     [11]="-o" [12]="-name" [13]=".debug-*" [14]="-o" [15]="-name" [16]=".log-*") 
```

那么现在你可以

```
find [-L] [/path] \( "${cmd[@]}" \) 
```

作为

```
find \( "${cmd[@]}" \) 
```

（注：如果没有提交路径，`.`则默认为当前路径）

```
find /home/user/SomeDir \( "${cmd[@]}" \)

find -L /path -type f \( "${cmd[@]}" \) 
```

# jquery - jquery attr('disabled', 'disabled') 在 IE 中没有完全工作（不禁用点击但看起来已禁用）

> ID：10341727
> 
> 赞同：0
> 
> 时间：2012-04-26T21:32:07.523
> 
> 标签：jquery, internet-explorer, jquery-1.7

我在使用 jQuery 1.7.1 的 Internet Explorer 中遇到 attr('disabled', 'disabled') 问题。这些按钮显示为禁用，但如果单击它们，它们仍会执行。在 firefox、safari 和 chrome 中，它的行为符合预期（什么都不做，阻止点击）。有任何想法吗？

```
 disableWizardButtons: function() {
        jQuery(this.wizardButtonSelector).filter(this.enabledSelector).each(function() {
            var button = jQuery(this);
            button.data().originalClass = button.attr('class');
            button.removeClass().addClass('btn-secondary-disabled');
            button.attr('disabled', 'disabled');
            button.prop("onclick", null);
        });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:34:56.893

通常你可以使用

```
button.disabled = true; 
```

但是既然你得到了 jQuery obj 试试

```
this.disabled = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:43:43.030

通过小偷大师：

> 你知道你只需要写一次长格式的 jQuery 吗？通过将代码包装在 (function($) { .... })(jQuery); 中，无论是否使用了 noConflict，您都可以使用 $。你应该使用 .prop('disabled', true) 来禁用一个元素。除此之外，在禁用的元素上，通常根本不会触发任何事件。您也不应该尝试通过清除 onclick 属性来取消绑定事件。如果您使用 jQuery 绑定它们，请使用 .unbind('click') 取消绑定它们。

# iphone - 将 NSNumber 转换为 BOOL 目标 C

> ID：10341735
> 
> 赞同：6
> 
> 时间：2012-04-26T21:32:58.313
> 
> 标签：iphone, objective-c, ios, ipad

我想将整数转换为BOOLEAN `0`和`1``YES``NO`

我的代码：

```
 NSNumber *num = 0;
    BOOL myBool = [num boolValue];
    NSLog(@"bool is: %@",myBool); 
```

它给出的输出为`(null)`

有什么问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-26T21:34:05.170

首先，您的初始化`NSNumber`不正确。您应该使用以下`+numberWith:`定义的类方法之一`NSNumber`：

```
+ (NSNumber *)numberWithChar:(char)value;
+ (NSNumber *)numberWithUnsignedChar:(unsigned char)value;
+ (NSNumber *)numberWithShort:(short)value;
+ (NSNumber *)numberWithUnsignedShort:(unsigned short)value;
+ (NSNumber *)numberWithInt:(int)value;
+ (NSNumber *)numberWithUnsignedInt:(unsigned int)value;
+ (NSNumber *)numberWithLong:(long)value;
+ (NSNumber *)numberWithUnsignedLong:(unsigned long)value;
+ (NSNumber *)numberWithLongLong:(long long)value;
+ (NSNumber *)numberWithUnsignedLongLong:(unsigned long long)value;
+ (NSNumber *)numberWithFloat:(float)value;
+ (NSNumber *)numberWithDouble:(double)value;
+ (NSNumber *)numberWithBool:(BOOL)value;
+ (NSNumber *)numberWithInteger:(NSInteger)value NS_AVAILABLE(10_5, 2_0);
+ (NSNumber *)numberWithUnsignedInteger:(NSUInteger)value NS_AVAILABLE(10_5, 2_0); 
```

`BOOL`s 只是`signed char`s，因此您不能使用`%@`格式说明符，但您可以使用任何整数格式说明符，例如`%d`,`%i`或`%c`.

但是，要输出`YES`or `NO`，您需要使用字符串：

```
NSLog(@"bool is: %@", (myBool) ? @"YES" : @"NO"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-27T00:02:04.553

鉴于分配不正确，`NSNumber`您是否真的要创建一个包含整数的对象，或者您的标题问题“将 int 转换为 BOOL”是否正确？

`int`如果是后者，则使用该值转换 an`0`或转换`1`为`BOOL`您只需转换：

```
int num = ...; // num is 0 or 1
BOOL myBool = (BOOL)num; // myBool is NO or YES 
```

然而，更好的转换是：

```
BOOL myBool = num != 0; // myBool is NO for 0, YES for anything else 
```

因为这遵循了 Obj-C（和 C）的概念，即零为假，非零为真。

如果您希望将`BOOL`值转换为字符串`"YES"`，`"NO"`那么这个简单的函数将有效地完成它：

```
NS_INLINE NSString *BoolToStr(BOOL b) { return b ? @"YES" : @"NO"; } 
```

只需将其放在方便的标题中，然后在需要的地方导入即可。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-06-30T11:15:39.013

隐蔽`Int`到`BOOL`

将值为 0 或 1 的 int 转换为刚转换的 BOOL

```
NSNumber *num = [NSNumber numberWithInt:0]; // num is 0 or 1
BOOL myBool = [num boolValue];  // myBool is NO or YES 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-26T21:44:55.627

正如 sch 提到的，你在这里搞砸了：

```
NSNumber *num = 0; 
```

*   星号是对对象（RAM 中的一块内存）的指针/引用。它可以只保存对象的内存块的内存地址值（没有整数/布尔值）。即使在 Objective-C 中，也不要将 BOOL、int、float、double、NSInteger 数字类型与对象 (NSNumber) 混淆。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-27T06:34:23.490

正如@jacob Relkin 指出的那样。你用错了`NSNumber`。

其次，`boolValue`可以转换`NSString`和`NSNumber`-> `BOOL`。`boolValue`作品：

> 跳过初始空格字符 (whitespaceSet)，或可选的 -/+ 符号后跟零。遇到 "Y"、"y"、"T"、"t" 或数字**1-9**之一时返回 YES 。它忽略任何尾随字符。

因为`int`你可以用它作为`boolean`

> 布尔 a = 数；//将表现得就像 boolValue。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-25T13:42:20.057

我不知道我对此是否完全正确，但是当您将 NSNumber 分配为“0”时，如果您想要数字，则应给出值“nil”，您应该选择“@0”或“@1”或使用方法“numberwithint”

# c# - 通用实体保存方法不起作用？

> ID：10341737
> 
> 赞同：0
> 
> 时间：2012-04-26T21:33:08.567
> 
> 标签：c#, asp.net-mvc-3, entity-framework

为了减少我使用的代码和类的数量，我得到了这种方法：

```
public TEntity Save(TEntity entity)
            {
                var validatationErrors = Entities.GetValidationErrors().ToList();
                if (validatationErrors.Count() > 0)
                    throw new ValidateException(validatationErrors);

                if (Entities.Entry(entity).State == EntityState.Added)
                    Entities.Set<TEntity>().Add(entity);
                else
                    Entities.Set<TEntity>().Attach(entity);

                Entities.SaveChanges();
                Entities.Entry(entity).Reload();
                return entity;
            } 
```

但是，当我创建一个新产品时，它会跳过将其添加到数据库的条件。因此没有得救。同样，如果我尝试修改它不会改变的东西。

为了解决这个问题，我必须将我的实体保存在控制器中，如下所示：

```
using (var db = new EntitiesDbContext())
                {
                    db.Products.Attach(product);
                    db.Entry(product).State = EntityState.Modified;
                    db.SaveChanges();
                } 
```

这似乎相当低效。所以我想知道导致它不起作用的通用保存真的有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:13:23.810

*   你的代码是错误的。在您的情况下，您不需要`Attach`您的实体。您只需要将`Add`您的实体添加到您的`DbSet`：

    ```
     public TEntity Save(TEntity entity)
            {
                Entities.Set<TEntity>().Add(entity);        
                Entities.SaveChanges();
            } 
    ```

你应该记住：

`Entities.Set<TEntity>().Add(entity);`

等于

`db.Entry(entity).State = EntityState.Added;`

和

`entity.Property = newProperty;`

将实体状态设置为`Modified`( `db.Entry(entity).State`is `EntityState.Modified`)

而且您不需要验证和重新加载实体。`ObjectContext`为你而做。

*   要条件化您的实体，请尝试以下操作：

    ```
     public TEntity Save(TEntity entity)
        {

            var dbEntity = Entities.Set<TEntity>().Find(entity.Id);

            if (dbEntity != null)               
                dbEntity = entity;
            else
                Entities.Set<TEntity>().Add(entity);

            Entities.SaveChanges();
        } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T06:07:04.933

如果你创建一个新实体，你应该使用 .Add 方法。如果您有一个知道它存在于数据库中的对象并且您希望避免访问数据库来获取它，则应该使用 .Attach。

通用的 Save 方法似乎也有一些问题：

*   除非您明确禁用验证，否则您将多次验证实体，因为默认情况下 .SaveChanges() 将验证实体
*   如果实体处于已添加状态，则它已被上下文跟踪，因此无需再次添加
*   .SaveChanges() 将尝试保存上下文跟踪的所有未处于未更改状态的实体。该方法给人的印象是它只会保存您传递的实体，但实际上它可能会保存更多
*   我认为调用 DbEntityEntry.Reload() 仅对附加实体使用数据库中的值更新属性值有意义 - 如果你总是这样做，那么我想知道为什么你附加实体而不是仅仅从数据库中获取它。

# javascript - 非常简单的 Jquery 动画优化

> ID：10341739
> 
> 赞同：2
> 
> 时间：2012-04-26T21:33:12.540
> 
> 标签：javascript, jquery, jquery-animate

我写了一个简短的简单 Jquery 动画代码。它采用 rel 属性并将其用于每个 li.slide 的动画输入。它有效，但我觉得这可能不是最好的方法。可以简化/优化还是没关系？

谢谢

Javascript / Jquery 年轻人

```
$('.slide', this).each(function() {
    var rel = $(this).attr('rel');
    var coord = rel.split(',');

    var $delay = parseInt(coord[2]);
    var $transition = coord[3];
    var $duration = parseInt(coord[4]);

    $(this).delay($delay).animate({'background-position-x' : '50%', 'background-position-y' : '0', opacity : '1'},$duration, $transition);

 }); 
```

HTML 示例：

```
<li class="slide" rel="50%,300px,600,linear,200"></li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T18:54:21.883

一件小事是使用 data-* 属性而不是 rel。[html5doctor.com](http://html5doctor.com/html5-custom-data-attributes/)

您也可以跳过使用 jQuerys animate 函数并在动画之外进行所有计算。保存计算数组并​​使用 setInterval 函数对其进行迭代。这也将为不仅使用补间的更具创造性的开发打开大门。

我在 github 上发布了一些你可以免费使用的作品。查看[动画](https://github.com/erik-landvall/animasies/blob/master/animasies.js)。它是一个具有简单界面的动画复杂计算库。

## 更新

刚刚创建了一个 JavaScript，您可以按原样使用或从中获得灵感。

[https://github.com/erik-landvall/animator](https://github.com/erik-landvall/animator)

# javascript - 如何从客户端应用程序加载 Fusion Tables csv？

> ID：10341740
> 
> 赞同：1
> 
> 时间：2012-04-26T21:33:26.590
> 
> 标签：javascript, actionscript-3, actionscript-2, google-fusion-tables

我只是在玩 Google Fusion Tables，我想知道如何从客户端加载 csv。到目前为止，我已经尝试了几种选择：

从动作脚本 3.0：

```
var r:URLRequest = new URLRequest("https://www.google.com/fusiontables/exporttable?query=select%20*%20from%203685185%20");
r.method = URLRequestMethod.GET;
var l:URLLoader = new URLLoader(r);
l.addEventListener(Event.COMPLETE,loaded);
l.addEventListener(HTTPStatusEvent.HTTP_STATUS,onHTTPStatus);

function onHTTPStatus(event:HTTPStatusEvent):void{
    trace(event.status);
}
function loaded(event:Event):void{
    trace(this.loaderInfo.url,event.target.data);
} 
```

从动作脚本 2.0：

```
var vars:LoadVars = new LoadVars();
vars.onLoad = function(loaded):Void{
    if(loaded) trace(unescape(this));
    else       trace("error loading data");
}
vars.onHTTPStatus = function(status:Number):Void{
    trace(status);
}
vars.load("http://www.google.com/fusiontables/exporttable?query=select%20*%20from%203685185%20&r="+new Date().getMilliseconds()); 
```

来自 javascript：

```
$.get('https://www.google.com/fusiontables/exporttable?query=select%20*%20from%203685185%20',
    function(data) { alert(data); }); 
```

在 actionscript 中，一切都在独立播放器中运行，但不是在线播放器，这闻起来像是某种安全沙盒问题。在[JS](http://lifesine.eu/test/fusiontable.html)我得到这个：

```
XMLHttpRequest cannot load https://www.google.com/fusiontables/exporttable?query=select%20*%20from%203685185%20\. Origin http://lifesine.eu is not allowed by Access-Control-Allow-Origin. 
```

我正在查询的表是公开的和可导出的。我还尝试在 Chrome 上使用 Simple REST Client 进行通话，并得到了正确的响应。关于我可能会错过什么的任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T00:14:31.903

我只能说 javascript 方法。由于浏览器跨域访问限制，您需要使用 JSONP 检索结果。幸运的是 Fusion Tables 支持 JSONP。[我在这个答案](https://stackoverflow.com/a/9778985/1211981)中发布了一些示例代码。另一种方法是使用 google.visualization 库，并且在这个[答案](https://stackoverflow.com/a/10211253/1211981)中有一些示例代码。

**更新** @george-profenza

2分。FT JSONP api 的 URL 不同。对于 jsonp，您必须添加一个回调参数。试试这个：

```
var queryurl = 'https://fusiontables.googleusercontent.com/fusiontables/api/query?sql=select%20*%20from%203685185%20&jsonCallback=?'; 
```

这里还有一个示例成功函数：

```
 function dataHandler(data, textStatus, jqXHR) {
     alert(textStatus);
     var cols = data.table.cols;
     var rows = data.table.rows;
     for (var i = 0; i < cols.length; i++) {
         alert(cols[i]);
     }
     for (var i = 0; i < rows.length; i++) {
         for(j=0; j < rows[i].length; j++) {
             alert(rows[i][j]);
          }
     }
} 
```

# .net - ASP.NET MVC3 中基于权限的授权

> ID：10341741
> 
> 赞同：7
> 
> 时间：2012-04-26T21:33:27.803
> 
> 标签：.net, asp.net-mvc, asp.net-mvc-3, asp.net-membership, authorization

我正在将 ASP.NET MVC 添加到现有的 WebForms 应用程序中。目前，我不关心身份验证/登录，因为这部分由现有代码（表单身份验证）处理。

在现有的 WebForms 应用程序中，我们对每个页面都有一个完全自定义的基于权限的授权。所以每个用户都有一组权限，列出了他被允许访问的页面。
现在我需要决定如何使用相同的权限系统来限制对特定 MVC 控制器和操作的访问。

据我了解，对于 ASP.NET MVC，有一个标准的[AuthorizeAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx)可以在其中指定角色。我还发现了一些建议指定权限而不是角色的文章 - 然后可以执行以下操作：

```
[CustomAuthorize(Roles = "View products, Edit products")] 
```

通过扩展 AuthorizeAttribute，我还可以定义我如何存储和访问权限。

这个解决方案对我来说是可以接受的（尽管改变角色的语义有点味道）。
但在承诺之前，我想看看还有哪些其他选择。这就是我卡住的地方——我还没有找到关于 ASP.NET MVC 中授权的不同方法的完整概述。我还想知道所有安全概念（如表单身份验证、成员资格提供程序、授权属性、IPrincipal 等）是如何相互关联的，以及它们应该如何协同工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T22:32:36.093

首先你要了解的是，就像 Webforms 一样，MVC 中有一个管道。每个请求都经过许多方法，并且沿途有扩展点，您可以“挂钩”并做事。

AuthorizeAttribute 所做的只是挂钩到 OnAuthorization 扩展点，并根据您提供给它的标准（用户名、角色等）决定是否授予某人访问权限。

这是一个例子： http: [//geekswithblogs.net/brians/archive/2010/07/08/implementing-a-custom-asp.net-mvc-authorization-filter.aspx](http://geekswithblogs.net/brians/archive/2010/07/08/implementing-a-custom-asp.net-mvc-authorization-filter.aspx)

您可以创建自己的自定义授权属性，并使用您自己的标准执行完全相同的操作。您无需重新调整 Roles 参数的用途，您可以根据需要创建所有自己的参数。

这是 MVC 更喜欢的方法。另一件好事是，如果您也将其设置为过滤器，则可以将其添加到全局过滤器中，并根据需要将其应用于所有内容。

你基本上还有另外两个合理的选择。在 Application_AuthenticateRequest 的 global.asax 中实现一个处理程序（不推荐）或创建一个通用的 BaseController 来覆盖 OnAuthorize （属性挂钩相同的东西，但在不同的位置）。

很多人尝试使用 Session 变量进行身份验证，这是最糟糕的事情。

由于我们对您的身份验证和许可系统一无所知，我们所能做的就是提供一般性建议。

# regex - Visual Studio 正则表达式查找/替换无法按预期工作

> ID：10341742
> 
> 赞同：1
> 
> 时间：2012-04-26T21:33:31.527
> 
> 标签：regex, visual-studio

我正在尝试匹配

```
EchoCancellation = Convert.ToBoolean(SendReceivePackets.GetNameValuePairsFromUnparsedReply(parsedReply["EchoCancellation"])); 
```

并将其更改为：

```
EchoCancellation = Convert.ToBoolean(parsedReply["EchoCancellation"]); 
```

其中大约有3000个。

这是我的正则表达式：

```
SendReceivePackets\.GetNameValuePairsFromUnparsedReply\(parsedReply\["{\w*}"\]\) 
```

Visual Studio 说找不到。我不相信 Visual Studio，我认为它只是懒惰。:)

任何人都可以看到问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:43:55.283

`\w`应该`:w`是。

Visual Studio 使用非标准正则表达式。将您的正则表达式更改为

```
SendReceivePackets\.GetNameValuePairsFromUnparsedReply\(parsedReply\[":w"\]\) 
```

在这里查看：http: [//msdn.microsoft.com/en-us/library/2k3te2cs%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/2k3te2cs%28v=vs.80%29.aspx)

# c# - 我将如何正确构建这个 SpecFlow 功能/场景集？

> ID：10341743
> 
> 赞同：2
> 
> 时间：2012-04-26T21:33:31.957
> 
> 标签：c#, unit-testing, bdd, specflow

这就是我所拥有的

```
Feature: Register a new customer
    As a user
    I need to be able to register myself
    so that I can place orders

Scenario: Register a new customer with Valid information
    Given I fill in valid customer information
    When I press submit
    Then I should be notified that I'm registered

Scenario: Register a new customer with Invalid information
    Given I fill in invalid customer information
    When I press submit
    Then I should be notified it was invalid 
```

问题是我重复了 When 两次，但我没有看到解决方法，我需要做的是弄清楚如何在 2 个场景中正确设置它，还是我没有正确看待这个？

这是 Step 定义，但它们对我来说似乎不正确，因为我必须将所有这些都放在同一个 Steps 类中才能运行。在我看来阅读不正确。当我将这两个分开并将它们放在自己的 step 类中时，我得到了错误：

```
binding error: Ambiguous step definitions found for step 'When I press submit':

[Binding]
   public class RegisterAValidCustomerSteps
   {
      private RegisterCustomerViewModel _registerCustomerVm;

      [Given(@"I fill in valid customer information")]
      public void GivenIFillInValidCustomerInformation()
      {
         // use the ViewModel to represent the User interacting with the View
         _registerCustomerVm = new RegisterCustomerViewModel();
         _registerCustomerVm.FirstName = "Mark";
         _registerCustomerVm.LastName = "W";
         _registerCustomerVm.Email = "mark@whatever.com";
      }

      [Given(@"I fill in invalid customer information")]
      public void GivenIFillInInvalidCustomerInformation()
      {
         // simulate possible invalid name by missing the Last Name
         _registerCustomerVm = new RegisterCustomerViewModel();
         _registerCustomerVm.FirstName = "Mark";
         _registerCustomerVm.Email = "markl@whatever.com";
      }

      [When(@"I press submit")]
      public void WhenIPressSubmit()
      {
         _registerCustomerVm.Submit();
      }

      [Then(@"I should be notified that I'm registered")]
      public void ThenIShouldBeAbleToPlaceOrders()
      {
         _registerCustomerVm.MessageText.ShouldBe("Success!  Check your inbox for confirmation");
      }

      [Then(@"I should be notified it was invalid")]
      public void ThenIShouldBeNotifiedItWasInvalid()
      {
         _registerCustomerVm.MessageText.ShouldBe("Failure!  Last Name can't be blank.");
      }
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T21:38:39.107

在这些场景中，您有不同的上下文。当相同的事件发生在不同的环境中时，您会得到不同的结果。这就是您所描述的这些场景。

`When`因此，重复步骤没有问题。你实际上做了两次同样的事情。只是重复使用它。如果在某些情况下您将有相同的上下文，但不同的事件，那么您将有重复的`Given`步骤。与结果相同。

考虑保龄球比赛的这些场景：

```
Scenario: Gutter game
    Given a new bowling game
    When all balls landing in gutter
    Then total score should be 0

Scenario: All strikes
    Given a new bowling game
    When all rolls are strikes
    Then total score should be 300 
```

这些场景具有相同的上下文`Given a new bowling game`。您应该为每个场景编写相同的代码来设置场景。因此，您只有此步骤的一个实现，两种方案都将重用该实现。

```
[Given(@"a new bowling game")]
public void GivenANewBowlingGame()
{
    _game = new Game();
} 
```

您也可以使用一步定义来验证您的结果（因为它们实际上是相同的 - 验证总分）：

```
[Then(@"my total score should be (\d+)")]
public void ThenMyTotalScoreShouldBe(int score)
{
    Assert.AreEqual(score, _game.Score);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T21:42:04.910

您正在测试两个场景，这是一种有效的方法。虽然还有另一种方法可以做类似的事情：

```
Scenario 1: valid
Given I enter the following data:
|Field 1| Field 2|
|Valid| Valid|

Scenario 1: invalid
Given I enter the following data:
|Field 1| Field 2|
|Valid| Invalid| 
```

如果您在两个单独的步骤类中有完全相同的步骤，则需要定义`[Scope]`，否则会出现模棱两可的错误。

# c# - 串口未授权访问异常

> ID：10341744
> 
> 赞同：3
> 
> 时间：2012-04-26T21:33:33.383
> 
> 标签：c#, io

我正在尝试从串行端口读取一些信息，但是当我实际打开连接时，它会引发未经授权的访问异常

此代码读取端口名称

```
 SerialPort port = new SerialPort();
        string[] serialPorts = System.IO.Ports.SerialPort.GetPortNames();

        public Page_Main()
        {
            InitializeComponent();

            for (int i = 0; i < serialPorts.Count(); i++)
                portBox.Items.Add(serialPorts[i]);
        } 
```

这是尝试来自串行端口的信息的代码

```
 port.PortName = portBox.SelectedItem.ToString();
            port.BaudRate = 9600;
            port.DataBits = 8;
            port.Parity = Parity.None;
            port.StopBits = StopBits.One;

            port.Open();// This is where the exception is thrown

            serialOutput.Text = port.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T21:40:56.063

对端口的访问被拒绝。

*   或者 -

当前进程或系统上的另一个进程已经通过 SerialPort 实例或在非托管代码中打开了指定的 COM 端口。

# linq - Linq to Entities 和反转列

> ID：10341746
> 
> 赞同：0
> 
> 时间：2012-04-26T21:33:42.613
> 
> 标签：linq, sql-server-2008, entity-framework-4.1

我有一个表，其中有一列代码是一个以 2 到 4 个字符开头的字符串，然后可能有也可能没有空格，然后它有一个数字。例如：KR123 或 KS 23 或 K23456。SQL Server 2008 上的以下 SQL 代码将仅返回数字：

```
Select CONVERT(int, Reverse(LEFT(REVERSE(codefield),PATINDEX('%[a-z]%', REVERSE(codefield)) - 1)))
From Table1 
```

这在 SQL 中效果很好，但与我一起工作的一位程序员想要使用 LINQ to Entites 来做同样的事情。我在 VB.Net 中尝试了这段代码，只是想看看是否可以从第一行获取反转字段的索引值：

```
Dim theResult = theContext.Table1.select(function(y) 
              System.Data.Objects.SQLClient.SQLFunctions.PatIndex("%[a-z]%", y.codefield.Reverse)
                        ).FirstOrDefault 
```

它编译得很好，但是运行时出现错误：LINQ to Entities does not identify the method 'System.Collections.Generic.IEnumerable `1[System.Char] Reverse[Char](System.Collections.Generic.IEnumerable`1[System.Char])' 方法，并且此方法无法转换为存储表达式.

如果我删除 .Reverse，它可以工作，但我需要能够反转列数据才能使代码正常工作。

谁能弄清楚如何使用 LINQ to Entities 进行原始选择？

谢谢，NCGrimbo

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T18:48:40.257

如果您需要数字，为什么不只匹配数字而不是文本 - 如下所示：

```
SELECT SUBSTRING(Name, PATINDEX('%[0-9]%', Name), 200)
FROM Entities 
```

（200（或任何适合您的数字 - 我希望 T-SQL 中有 Int.Max）是任意的，只是为了不处理计算字符串的长度 - 如果长度大于字符串，则整个子字符串从 start 开始位置将被退回）

现在 Linq to Entities 中的查询非常简单（抱歉使用 C#）：

```
var q = ctx.Table1.Select( y => 
            y.codefield.Substring(
               (int)SqlFunctions.PatIndex("%[0-9]%", y.codefield) - 1)); 
```

请注意，Entity Framework 将提供计算字符串长度的代码。您可以通过使用带有任意大数的技巧再次避免它，如下所示：

```
var q = ctx.Table1.Select( y => 
            y.codefield.Substring(
              (int)SqlFunctions.PatIndex("%[0-9]%", y.codefield) - 1, 
              Int.Max)); 
```

回到最初的问题 - 您可以使用 Reverse 但方式有所不同：

```
var q = ctx.Table1.
            Select(y => 
               SqlFunctions.PatIndex("%[a-z]%", EntityFunctions.Reverse(y.codefield))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-19T22:41:03.863

您可以使用 System.Data.Entity.DbFunctions.Reverse()

# javascript - 元素通过后随页面滚动

> ID：10341750
> 
> 赞同：1
> 
> 时间：2012-04-26T21:34:14.883
> 
> 标签：javascript, jquery, scroll, element

标题听起来有点奇怪。

我有一个`<div>`我想让这个 div 在它即将消失时移动或被浏览器顶部推动。

YouTube 视频管理器就是一个例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T22:05:25.670

您可能对一些提供粘性 div 的 jQuery 插件感兴趣。例如，查看[http://blog.echoenduring.com/wp-content/uploads/demos/echo_ContainedStickyScroll/](http://blog.echoenduring.com/wp-content/uploads/demos/echo_ContainedStickyScroll/)或[http://archive.plugins.jquery.com/project/floatobject](http://archive.plugins.jquery.com/project/floatobject)。

# linux - 我在哪里可以找到 /dev/random 驱动程序的源代码？

> ID：10341752
> 
> 赞同：3
> 
> 时间：2012-04-26T21:34:18.627
> 
> 标签：linux, linux-kernel, linux-device-driver

我想看看 /dev/random 如何创建随机数。我知道它使用由中断产生的熵，但我仍然想查看源代码及其工作原理。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T21:35:42.820

[http://lxr.linux.no/linux/drivers/char/random.c](http://lxr.linux.no/linux/drivers/char/random.c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-31T13:18:09.333

您可以查看[Linux-kernel](/questions/tagged/linux-kernel "show questions tagged 'linux-kernel'")源代码的驱动程序部分中的*random.c* [，](https://github.com/torvalds/linux/blob/master/drivers/char/random.c)这是 Linus Torvalds 在 GitHub 上的一个项目。

# c# - 提取字符串 X 和字符串 Y 之间的字符串

> ID：10341755
> 
> 赞同：1
> 
> 时间：2012-04-26T21:34:41.880
> 
> 标签：c#, regex

[这里](https://stackoverflow.com/questions/378415/how-do-i-extract-a-string-of-text-that-lies-between-two-brackets-using-net)有一个类似的问题。在那个问题中 X 恰好是`(`并且 Y 恰好是`)`。我正在寻找类似的东西

```
 public string GetStringBetweenStrings(string Source, string leftString, string rightString)
   {

       // implementation 
      Return middlePart;
   } 
```

因此，当我将该方法称为：

```
 var test = GetStringBetweenStrings("Hello World this is a test","World","test");

   // then test = " this is a "; 
```

我该如何构建该功能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T21:38:08.100

在同一个链接问题中，您有一个适用于所有字符串的更灵活的答案，在此处修改：

```
public string GetStringBetweenStrings(string source, string leftString, string rightString)
{
    int start = source.IndexOf(leftString); // assume != -1
    int end = source.IndexOf(rightString);  // assume != -1 and >= start
    if (start == -1 || end == -1 || end < start) return String.Empty;
    return source.Substring(start + leftString.Length, end - start - rightString.Length - 1)
} 
```

这假定两个字符串都包含在源字符串中。如果任何一个都不是，你想要什么行为？或者如果开始是在结束之后？

根据@Jack 的强制性正则表达式版本，但已更新为功能：

```
public string GetStringBetweenStrings(string source, string leftString, string rightString)
{
    return Regex.Match(source, String.Format(@"(?<={0})(.*)(?={1})", 
                       Regex.Escape(leftString),
                       Regex.Escape(rightString)))
                       .Captures[0].Value;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T21:41:20.853

```
(?<=World).*(?=test) 
```

[http://regexr.com?30ph4](http://regexr.com?30ph4)

这是一个正则表达式解决方案。构建正则表达式模式时，用您的字符串变量替换`World`和。`test`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T21:37:39.250

使用 IndexOf 函数来定位这两个字符串。然后使用 SubString 提取您需要的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T21:52:37.170

`IndexOf`是最直接的。确保将开始偏移到第一个字符串之后。如果左/右可能重叠，我还添加了一些（未经测试的）代码来处理。

```
public string GetStringBetweenStrings(string Source, string leftString, string rightString)
{
   var left = Source.IndexOf(leftString);
   var right = Source.IndexOf(rightString);
   while (right > -1 && left + leftString.Length >= right)
   {
       right = Source.IndexOf(rightString, right + 1);
   }
   if (left > -1 || right > -1 || left < right)
       return null;
   var start = left + leftString.Length;
   var end = right;
   return Source.Substring(start, end - start);
} 
```

# couchdb - CouchDB Reduce-仅按降序排列错误

> ID：10341756
> 
> 赞同：1
> 
> 时间：2012-04-26T21:34:44.243
> 
> 标签：couchdb, mapreduce

我在获得在 CouchDB 1.01 中解决的看似相当简单的问题时遇到了一些问题。我的数据基本上是来自 30 多家诊所的药物日志，其中包含一些关于药物的基本数据和时间戳。我将一组相当普通的对象作为映射结果传递给伪形式的reduce：

```
Key:ClinicName, Value:{"vaccine":DrugType, "stamp":TimeStamp} 
```

我的 reduce 函数的目的是允许快速参考分配的每种药物的数量。

**地图**

```
function(doc) {
   if(doc.type=="dose"){
    emit(doc.clinicName, {"vaccine":doc.vaccine,"stamp":doc.timestamp});
   }
} 
```

**减少**

```
function(keys, values){
  var indexes = Object.keys(values);
  var vCount = new Object;
  for (var c in indexes){
    var val = values[c]
    var vname = val.vaccine
    if(vCount.hasOwnProperty(vname)){
      vCount[vname] = vCount[vname] + 1;
    }
    else{
      vCount[vname] = 1;
    }  
  }
  return vCount;
} 
```

当我使用 ?key= 一个特定的 ClinicName 只要descending=false 和group=true 时，这非常有效。一旦设置为真，我的结果就会在中途被切断。

两个问题：

1.  为什么结果顺序对 reduce 函数很重要？关闭减少后，结果向前和向后是相同的。
2.  我在某处读到，如果您的归约没有提供单个标量，那么您可能做错了。如果除此之外的奇怪行为是一种糟糕的方法，那么从日志样式数据源中呈现此类数据的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T00:51:51.080

问题 2 的答案更简单。

“单标量”经验法则非常适合入门，但我看到许多高级应用程序使用对象的方式与您完全一样。

例如，请参阅有关汇总对象中相关值的最新答案：[https ://stackoverflow.com/a/10082894/2938](https://stackoverflow.com/a/10082894/2938)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T01:02:20.380

如果您想知道**每个诊所**的疫苗数量（计数） ，那么您需要在密钥中使用它。

```
// pseudo-form
Key:[ClinicName, DrugType], Value:{"stamp":TimeStamp} 
```

接下来，您的 reduce“函数”可以简单地是 string `"_count"`。

有了这个，您可以`?group_level=2`为每种疫苗在每个诊所设置并获取一行，并分配所有剂量的总和。这可能与您无关，但您可以免费计算每个诊所的剂量（所有药物）`?group_level=1`。

要获得所有诊所的疫苗**总数，该观点必须仅针对药物。**

```
// pseudo-form
Key:DrugType, Value:{"stamp":TimeStamp} 
```

主要的一点是，reduce 必须始终在 map 输出中相邻的行上工作。然后您可以使用`?group_level`or`startkey/endkey`来获得有意义的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T05:41:16.503

Jason 的回答非常出色且正确，但对于任何偶然发现此问题的人来说，我的根本问题是对 reduce 的工作原理缺乏了解。

最重要的是，reduce 函数的输出本身必须是可归约的，因为 couchdb 并行执行归约。如果你有 1000 行匹配一个键，沙发可能需要 10 组 100 并将函数应用于每个。然后它将重新减少先前减少的 10 个输出，以得出密钥集的解决方案。

最好阅读文档...

[阅读 CouchDB 文档的 Reduce/Rereduce 部分](http://wiki.apache.org/couchdb/Introduction_to_CouchDB_views#Reduce_vs_rereduce "阅读 CouchDB 文档的 Reduce/Rereduce 部分")

# c++ - 将 googlemock EXPECT_CALL 与 shared_ptr 一起使用？

> ID：10341757
> 
> 赞同：6
> 
> 时间：2012-04-26T21:34:47.723
> 
> 标签：c++, shared-ptr, googlemock

我有一个测试可以很好地使用原始指针，但是我无法让它与`std::shared_ptr`. 类是这样的：

```
class MyClass
{
    MyClass(SomeService *service);
    void DoIt();
} 
```

我的测试代码是这样的：

```
 class MyClassTests : public ::testing::Test
    {
    public:
        MyClassTests():
            myClass_(new MyClass(&service_))
        {}

    protected:
        SomeServiceFake service_;
        MyClassSharedPointer myClass_;
    };

TEST_F(MyClassTests, DoIt_DoesNotMeetCriteria_DoesNotPerformAction) {

    // Arrange
    EXPECT_CALL(service_, MeetsCriteria(_))
        .WillRepeatedly(Return(false));

    EXPECT_CALL(service_, PerformAction(_))
        .Times(0);

    // Act
    myClass_->DoIt();
} 
```

在这个测试中，`service_`是在测试中的堆栈上创建的模拟/伪造，我将地址传递给`MyClass`. 更改`MyClass`为`service`a `shared_ptr`，我的新课程如下所示：

```
class MyClass
{
    MyClass(std::shared_ptr<SomeService> service);
    DoIt();
} 
```

我在测试中尝试的是：

```
 class MyClassTests : public ::testing::Test
    {
    public:
        MyClassTests():
            myClass_(new MyClass(std::shared_ptr<SomeService>(&service_)))
        {

        }
            ... 
```

但是，当我这样做时，测试失败并显示：

```
Debug Assertion Failed!
Expression: _CtrlIsValidHeapPointer(pUserData) 
```

简而言之，我需要一个`shared_ptr`to `service_`（这是一个假对象）来传递给`MyClass`构造函数，并且我需要一个函数的非指针`EXPECT_CALL`。我怎样才能让它正常工作？

**更新**

尝试动态分配 SomeServiceFake 以获取 shared_ptr 然后使用 * 运算符 on `service_`，这让我“更进一步”，但现在我收到以下错误：

```
error : this mock object
(used in test MyClassTests.DoIt_DoesNotMeetCriteria_DoesNotPerformAction)
should be deleted but never is. Its address is @009BBA68.
1>EXEC : error : 1 leaked mock object found at program exit. 
```

**更新 2**

使用`Mock::AllowLeak(service_.get());`所以我现在可以解决这个问题。希望我能得到答案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T22:05:41.690

更像这样定义您的测试类：

```
class MyClassTests : public ::testing::Test {
 public:
  MyClassTests():
      service_(new SomeServiceFake), myClass_(new MyClass(service_)) {}
 protected:
  std::shared_ptr<SomeServiceFake> service_;
  std::shared_ptr<MyClass> myClass_;
}; 
```

和你的测试：

```
 EXPECT_CALL(*service_, MeetsCriteria(_))
      .WillRepeatedly(Return(false));

  EXPECT_CALL(*service_, PerformAction(_))
      .Times(0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T21:42:07.783

这与测试框架无关。正如您自己所说，您正在从堆栈分配的对象（即具有自动生命周期的对象）创建一个 shared_ptr 。这根本不符合逻辑。共享指针通常是从`new`. 如果您将自定义 Deleter 作为第二个参数传递给 shared_ptr 构造函数，您可能能够使其工作，但最好只使用 new 创建对象。

# ruby-on-rails - rails 脚手架定制路径

> ID：10341759
> 
> 赞同：2
> 
> 时间：2012-04-26T21:34:51.677
> 
> 标签：ruby-on-rails

我可以将修改代码放入以更改脚手架行为的所有路径是什么？我之所以问是因为我在阅读有关发电机的导轨指南时感到困惑。要修改 helper，请将它们放在 lib/templates/rails/helper 中，要修改任何视图，请将它们放在 lib/templates/erb/ 中。那太随机了，为什么'erb'不需要在'rails'后面但'helper'必须。但无论如何，我只需要所有的路径。

# android - 在列表中获取位置，然后显示 Web 视图

> ID：10341760
> 
> 赞同：0
> 
> 时间：2012-04-26T21:34:54.937
> 
> 标签：android

嘿，如果有人单击列表中的第 5 项，我正在尝试显示 Web 视图。

这是代码：

```
 lv.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> a, View v, int position,
                long id) {

            if (position == 5) {

                Intent intent = new Intent(Intent.ACTION_VIEW);
                Uri uri = Uri.parse(href2_final
                                + "=service&doc_library=ABN01&doc_number="
                                + record_parsed_final
                                + "&line_number=0001&func_code=WEB-FULL&service_type=MEDIA");
                intent.setData(uri);
                startActivity(intent);
            }

        }

    }); 
```

我究竟做错了什么？如果我删除 IF 语句，那么当我按下列表中的任何项目时，它将启动 Web 视图。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T21:41:35.923

根据您的代码，您必须在 ListView 中选择第 6 项才能调用 startActivity。有关更多信息，请阅读[此](https://stackoverflow.com/questions/3004515/android-sending-an-intent-to-browser-to-open-specific-url)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T21:42:47.763

我猜第五个元素的索引位置是 4。

# asp.net - 将 Session/Cookie 与 FormsAuthentication cookie 同步

> ID：10341765
> 
> 赞同：0
> 
> 时间：2012-04-26T21:35:10.310
> 
> 标签：asp.net, session, forms-authentication, session-cookies

我知道你在想什么……别人犯了这个错误！

我正在使用标准 .NET 成员资格提供程序的网站上工作。用户可以创建一个帐户并登录，但他们也可以在不实际创建帐户的情况下结帐（购买商品）。在这种情况下，用户仍在创建一个 .NET 成员帐户，但是他们没有使用标准的 FormsAuthentication.SetAuthCookie 登录。这似乎没问题 - 除非用户（没有创建帐户的用户闲置了一个小时，他们不会被提示重新输入他们的详细信息）。当用户签出时，会创建一个帐户并将其 UserProviderKey 存储在会话中。

问题来自已创建帐户的用户。结帐过程取决于会话对象的存在。有时，会话可能已经超时，但 FormsAuthentication cookie 仍然存在——这会使逻辑陷入一些问题。

所以，我知道我可能犯了一个错误，将某些东西放入会话对象然后依赖它，但是有什么替代方法？饼干更好吗？

提前致谢

铝

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T22:03:16.647

无需重新发明轮子。Asp.net 支持匿名配置文件的概念，然后可以选择将其迁移到注册用户。您的应用程序可以做到这一点吗？

> 默认情况下不启用对匿名配置文件的支持，因此您必须明确启用它。

[http://msdn.microsoft.com/en-us/library/ewfkf772.aspx](http://msdn.microsoft.com/en-us/library/ewfkf772.aspx)

# sql-server-2005 - 复制单个表以在 sql server 2005 上报告的最佳实践是什么？

> ID：10341768
> 
> 赞同：0
> 
> 时间：2012-04-26T21:35:19.490
> 
> 标签：sql-server-2005, logging, reporting, replication

我有一个记录表，我需要在其上运行接近实时的报告。主键是非顺序插入的 guid。当添加其他索引以帮助提高报告速度时，我看到插入超时。我计划创建一个带有报告索引的重复表，并在日志表中只保留填充因子为 75% 的聚集索引。

我觉得只对一张表使用复制就有点过分了。所以我的问题是我应该如何做到这一点？我应该安排一个 sql 代理作业吗？

任何帮助都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T22:18:08.840

您有很多选择。为了解决您当前的问题，我会确保日志记录表上有一个顺序 ID，并且只将新数据复制到索引良好的报告表中。然后，您可以运行非锁定过程以仅获取报告中相应列的最大值，并从日志记录表中获取更大的值。

```
DECLARE @MaxValue uniqueidentifier

SELECT @MaxValue = MAX(LogID) FROM LogTable

INSERT INTO 
   ReportingTable
   (...)
SELECT
   ...
FROM
   LogTable WITH NOLOCK
WHERE
   LogID > @MaxValue 
```

注意：请参阅此进行[NOLOCK](https://stackoverflow.com/questions/1452996/is-the-nolock-sql-server-hint-bad-practice/5092501#5092501)辩论。仅当您的日志表很大且很忙时才使用它，但您的场景是它有意义的一个示例。

我不确定是什么生成了您的 GUID，但如果它是 SQL 服务器，那么将列默认为**NEWSEQUENTIALID()**意味着它不是完​​全随机的，而是顺序的。如果您从其他地方获取 GUID，则考虑放置一个**bigint IDENTITY(1,1)**列以确保您的聚集索引没有严重碎片化。碎片聚集索引很糟糕，因为您的其他索引使用它进行查找，所以无论它们多么好，它们仍然会比主索引运行得慢。

然后，您可以使用 GUID 上的聚集索引以任何您喜欢的方式构建报告表，并且仅使用索引良好的表中的最大值来仅插入您还没有的新数据。您还可以在该表上运行重新索引以确保它尽可能快。

**更多信息..**

如果您希望您的系统增长很多，那么您应该查看其他一些报告模式，以便在将数据转储到报告表中时对数据进行非规范化或简化。

看一下[星形模式](http://en.wikipedia.org/wiki/Star_schema)，或者您可以将每日或每周的统计数据非规范化到一个单独的表格中，如下所示：

```
Date, TimespentTotal, TimespentAvg, UserFact2Count.... 
```

然后您可以运行一个非锁定存储过程来一次获取一天的统计信息。我还建议根据您在报告数据库中没有的内容加载天数统计信息，以防运行它的代理作业失败，它将在下一次运行时处理积压。显然，这些模式需要做更多的工作，而且错误的选择可能会很糟糕，因此只有在需要并知道对报告的期望时才做出此选择。

# c - 使用 Linux 套接字 API 快速重新连接到 RFCOMM 蓝牙设备

> ID：10341775
> 
> 赞同：3
> 
> 时间：2012-04-26T21:36:15.653
> 
> 标签：c, linux, sockets, bluetooth, rfcomm

我有一个非常简单的蓝牙 RFCOMM 客户端应用程序，它试图维护来自蓝牙设备的蓝牙流，蓝牙设备是 UART 到蓝牙转换器。我想要的行为是，当蓝牙发射器重新启动时（它可以在不到 2 秒的时间内完成），我可以很快恢复。目前由于 SO_RCVTIMEO 我很快断开连接但尝试重新连接会导致几秒钟......

```
connect: Device or resource busy
Not connected
connect: Device or resource busy
Not connected
connect: Device or resource busy 
```

...消息。这与我是否重新启动进程无关。您可以想象，如果我想频繁关闭我的蓝牙发射器（重新编程），这有点不切实际。我可以更改任何套接字选项或其他蓝牙设置来解决此问题吗？

```
#include <sys/types.h>
#include <sys/socket.h>
#include <bluetooth/bluetooth.h>
#include <bluetooth/rfcomm.h>
#include <unistd.h>
#include <errno.h>

int connect_to_bluetooth( char const* btaddr )
{
   int sock = socket( AF_BLUETOOTH, SOCK_STREAM, BTPROTO_RFCOMM );
   if(sock < 0) {
       perror("socket");
       return -1;
   }
   bdaddr_t ba;
   struct sockaddr_rc addr;
   str2ba( btaddr, &ba );
   memset( &addr, 0, sizeof(addr) );
   addr.rc_family = AF_BLUETOOTH;
   memcpy( &(addr.rc_bdaddr), &ba, sizeof(ba) );
   addr.rc_channel = 1;
   int result = connect( sock, (struct sockaddr *)&addr, sizeof(addr ) );

   if(result == 0)
   {
       struct timeval tv;
       tv.tv_sec = 2;
       setsockopt(sock, SOL_SOCKET, SO_RCVTIMEO,(struct timeval *)&tv,sizeof(struct timeval));
       setsockopt(sock, SOL_SOCKET, SO_SNDTIMEO,(struct timeval *)&tv,sizeof(struct timeval));

       printf("Connected to %s\n", btaddr);
       return sock;
   }
   close(sock);
   printf("Not connected\n");
   perror("connect");
   return -1;
}

int main(int argc, char** argv)
{
    printf("Connect to bluetooth device\n");

    int sock;
    if(argc < 2)
        return 1;
    while( (sock = connect_to_bluetooth(argv[1])) == -1) usleep(500000);

    while(1)
    {
        char buf[128];
        ssize_t r = read(sock,buf, 128);
        if(r > 0)
        {
            write(0, buf, r); // write to stdout
        }
        else
        {
            perror("read");
            printf("Errno is %i\n", errno);
            close(sock);
            while( (sock = connect_to_bluetooth(argv[1])) == -1) {
                usleep(500000);
            }
        }
    }
    return 0;
} 
```

# .net - 如何将我的 Windows Azure 应用程序连接到 SQL Server Compact Edition 版本 3.5.8080

> ID：10341777
> 
> 赞同：-1
> 
> 时间：2012-04-26T21:36:22.677
> 
> 标签：.net, azure, azure-diagnostics

我正在构建我的第一个 Windows azure 应用程序，由于某些业务原因，我被迫使用 SQL Compact Edition 版本 3.5.8080，我想在 Windows Azure 上使用 SQL Compact Edition。有什么办法吗？

另一个问题：有没有免费的Windows Azure 链接，无需任何付款或要求Visa 或master？

请指教 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:59:04.510

首先，当您的应用程序在云中运行时，您需要了解应用程序和数据库角色。该应用程序在计算部分运行并连接到可以位于云中或在本地运行的数据库。绝对不能“强制”使用特定数据库连接到 Web 应用程序，我非常确定如果您的应用程序在 Windows Azure 上运行，您可以非常轻松地将 SQL Compact Edition 迁移到 SQL Azure 进行连接，因为这将是在 Windows Azure 上运行应用程序的理想情况。

关于在 Azure 上使用 SQL Compact Edition，问题在于您无法在 Windows Azure 上运行它，因为 Azure 是无状态机器。因此，唯一的选择是您必须在本地运行它，然后从您的 Windows Azure 应用程序连接。在此模型中，您必须使用特定于本地运行的 SQL compact 服务器的连接字符串，并且网络设置已针对此类连接打开。

总的来说，我认为使用 SQL Azure 会更好，但会增加一点成本。

最后，您无需发布信用卡信息即可获得 90 天 Windows Azure 有限容量试用： [https ://www.windowsazure.com/en-us/pricing/free-trial/](https://www.windowsazure.com/en-us/pricing/free-trial/)

# c# - 如何从 StreamSocket 获取流

> ID：10341779
> 
> 赞同：0
> 
> 时间：2012-04-26T21:36:32.450
> 
> 标签：c#, sockets, client-server, streamwriter, .net-4.5

我正在开发 Metro Client-Server 应用程序，并在客户端中使用 StreamSocket 连接到侦听服务器。然后我尝试使用 StreamWriter 将数据发送到服务器。问题是当我创建新的 StreamWriter 对象时，我需要给他一个流参数。在我的情况下，我需要给他来自 StreamSocket 的流。这就是我所说的：

> ```
>  private StreamWriter swSender;
> 
>    private StreamSocket tcpServer; 
> ```

尝试发送数据时：

> ```
>  swSender = new StreamWriter(????);
>    swSender.WriteLine(mytext);
>    swSender.Flush(); 
> ```

？？？必须是来自 tcpServer 的 Stream，但没有像旧框架中的 TcpClient() 类中的 GetStream() 方法。任何解决方法？有任何想法吗？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:46:12.477

如果我没记错的话，他有**InputStream**和**OutputStream**

进而

```
async private void WaitForData(StreamSocket socket)
{
 var dr = new DataReader(socket.InputStream);
 //dr.InputStreamOptions = InputStreamOptions.Partial;
 var stringHeader = await dr.LoadAsync(4);
 if (stringHeader == 0)
 {
    // disconnected
    return;
 }

 int strLength = dr.ReadInt32();
 uint numStrBytes = await dr.LoadAsync((uint)strLength);
 string msg = dr.ReadString(numStrBytes);
 WaitForData(socket);
} 
```

**编辑**

所以你需要这样的东西

```
IBuffer buffer = CryptographicBuffer.ConvertStringToBinary(text,   BinaryStringEncoding.Utf8);
tcpServer.OutputStream.WriteAsync(buffer); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-11T15:08:47.223

你可以使用这样的东西（正确处理）

[为 tcpclient 启动 streamreader 和 writer](https://i.stack.imgur.com/CZKsD.jpg)

# git - 如何从 git gui 中删除存储库？

> ID：10341781
> 
> 赞同：6
> 
> 时间：2012-04-26T21:36:57.907
> 
> 标签：git

我刚刚学习 Git，想从 git gui 中删除我的第一个项目。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T22:34:57.797

如果您想摆脱项目本身，如果您只想摆脱存储库并将代码删除 .git 文件夹保留在项目的根目录中，请继续删除它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-23T10:01:30.200

在您的存储库名称下，单击设置。

单击删除存储库按钮。

如果你想永久删除它，你会弹出一个窗口，然后点击删除按钮。现在它完成了。

# php - Dropbox 上的共享功能如何让您向 Facebook 朋友发送私人消息？

> ID：10341782
> 
> 赞同：4
> 
> 时间：2012-04-26T21:37:00.017
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我正在尝试实现类似于 Dropbox 上的共享功能的功能，该功能允许您向 Facebook 朋友发送邀请。

[https://www.dropbox.com/share](https://www.dropbox.com/share)

您需要登录/创建一个帐户并拥有一个共享文件夹才能看到它。

该功能仅显示一个 Facebook 对话，即授予其应用程序权限-我不知道它是如何设法发送私人消息的-根据我所做的研究，这甚至是不可能的，其次，我不知道不知道它是如何在不使用 Facebook 对话的情况下实现它的——它使用它自己的模态框。

到目前为止，我已经设法将 Facebook 朋友列表拉入 jquery ui 自动完成功能，但现在我有了他们的 id，不知道如何将私人消息发送给选定的朋友。

我能想到的唯一方法是通过 id@facebook.com 向用户发送电子邮件，但不知道如何将图像、描述、链接等附加到普通的墙/时间轴帖子上。

我希望这里的一些 Facebook 专家能提供他们的想法和意见吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T21:56:27.943

据我所知，使应用程序能够向非应用程序用户发送私人消息的唯一方法是通过[Chat API](http://developers.facebook.com/docs/chat/)。为此，您需要询问“xmpp_login”，其中：

> 为与 Facebook Chat 集成的应用程序提供登录用户的能力

（[权限参考](http://developers.facebook.com/docs/authentication/permissions/)）

当您拥有该权限时，您可以成为用户的 xmpp 客户端，从用户朋友那里获取*状态*更新（并且您可以知道用户的哪些朋友在线）并且您可以代表用户向朋友发送消息，但是同样在这里 facebook 要求消息将来自用户，这可能是 Dropbox 中的模态对话框。

这个 api 不是一个简单的，因为它要求你的应用程序有一个 xmpp 客户端。有一些客户端实现（flash 甚至[js 客户端](http://strophe.im/)），但我没有这方面的经验，另一方面，我可以根据经验告诉你，管理每个登录客户端的 xmpp 可能很棘手，所以除非你真的需要它，否则尽量避免它.

您可以在 facebook 中删除您为 dropbox 拥有的应用程序，然后再次添加它，然后您将看到权限是什么，看看他们是否确实要求“xmpp_login”权限，如果没有，请告诉我他们要求什么.

* * *

# 编辑

你让我很感兴趣，所以我自己尝试了，你是对的，他们没有要求“xmpp_login”权限，只要求“offline_access”和“publish_stream”。

我无法解释他们是如何做到这一点的，他们不在客户端这样做，我可以看到请求发送到他们的服务器。我最好的猜测是他们拥有 facebook 的特权，我知道他们对某些公司这样做。

如果我是对的，对你来说有两个选择：使用发送对话框或使用聊天 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-26T12:40:05.593

在 Dropbox 中，他们使用他们的 Facebook 电子邮件地址（例如，用户名@facebook.com）向特定用户发送电子邮件

您可以在您的 facebook 常规帐户设置中看到此电子邮件地址。你可以在它下面看到这个注释，上面写着：

“您的 Facebook 电子邮件基于您的公开用户名。发送到该地址的电子邮件会转到 Facebook 消息。”

您只需要检索用户的电子邮件 ID 和他们朋友的用户名....

并且您也可以发送附件......！

# java - CachedRowSet：还能用来保存ResultSet数据吗？

> ID：10341785
> 
> 赞同：7
> 
> 时间：2012-04-26T21:37:29.903
> 
> 标签：java, resultset, cachedrowset

我想编写一个 java 函数，它接受一个 SQL 查询并返回一个 ResultSet 以便在其他地方处理。这是无法完成的，因为一旦连接关闭，ResultSet 就会失效。

谷歌搜索，我发现了一篇[非常古老（2004 年）的 OReilly 文章](http://onjava.com/pub/a/onjava/2004/06/23/cachedrowset.html)，其中有一些看起来像治愈方法的东西：CachedRowSet。您只需放入 ResultSet，CachedRowSet 保存数据，让您关闭连接并使用返回的 CachedRowSet 在别处播放数据。

这篇文章引用了 Sun 的 CachedRowSet 实现，但似乎无处可寻。

现代 javadocs（用于 Java 1.5 及更高版本）似乎有同名的东西，“CachedRowSet”，它不仅仅是 ResultSet 数据的持有者。“CachedRowSet”似乎完成了从获取连接和其他所有事情的整个数据库处理。

那个“CachedRowSet”和旧文章中讨论的一样吗？

我想要一些简单的东西，就像在旧文章中一样。在连接关闭后将 ResultSet 放入以进行处理的东西。

有这样的动物吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T16:41:43.593

[CachedRowSet](http://docs.oracle.com/javase/6/docs/api/javax/sql/rowset/CachedRowSet.html)是一个标准的Java 接口。Sun 编写了一个参考实现，[Sun/Oracle JDK 包含它](http://hg.openjdk.java.net/jdk6/jdk6/jdk/file/tip/src/share/classes/com/sun/rowset/CachedRowSetImpl.java)。如果您使用的是不同的 JDK，则该实现或其他实现可能可用也可能不可用。

如果您已经有 a ，那么您可以使用该方法`ResultSet`从中填充 a 。`CachedRowSet`[`populate`](http://docs.oracle.com/javase/6/docs/api/javax/sql/rowset/CachedRowSet.html#populate%28java.sql.ResultSet%29)

如果您有足够的前瞻性来使用 Java 7，那么您可以使用具有方法`CachedRowSet`的 a 以可移植的方式获取实例。您可以从 a 中获得 a （当然！）。[`RowSetFactory`](http://docs.oracle.com/javase/7/docs/api/javax/sql/rowset/RowSetFactory.html)[`createCachedRowSet`](http://docs.oracle.com/javase/7/docs/api/javax/sql/rowset/RowSetFactory.html#createCachedRowSet%28%29)`RowSetFactory`[`RowSetProvider`](http://docs.oracle.com/javase/7/docs/api/javax/sql/rowset/RowSetProvider.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-22T15:15:54.073

如果您只是想在不需要 CachedRowSet 提供的所有功能的情况下传输数据，那么最好将结果集数据放在列表列表中。

```
 List<Object> list = new ArrayList<Object>();
   ResultSet rs = stmt.executeQuery("select * from myTable");
   while(rs.next()) {
         List<Object> row = new ArrayList<Object>();
         row.add(rs.getObject(1));
         row.add(rs.getObject(2));
         row.add(rs.getObject(3));
         //And so on, or you can use the ResultSetMetaData to determine the number of columns
         list.add(row);
   }
   rs.close(); 
```

完成后，您可以将该列表对象发送到您想要的任何地方，然后遍历它以获取数据。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-26T21:58:49.997

`javax.sql.rowset.CachedRowSet`只是一个接口。有一个 Sun/Oracle 专有的实现，但它不受支持，因此使用起来有风险。

如今，大多数代码都遵循“转换为 pojos”模型。

# linker - Bada 链接器不会抱怨缺少符号，运行时可能会崩溃

> ID：10341786
> 
> 赞同：1
> 
> 时间：2012-04-26T21:37:34.133
> 
> 标签：linker, runtime-error, bada, unsatisfiedlinkerror

拿一个示例 bada 应用程序，任何一个。例如，“基本应用程序”。在 MainForm.cpp 中，插入以下内容：

```
extern void Hello(); 
```

不要在任何地方定义函数。然后在 下`MainForm::OnInitializing`，调用它：

```
MainForm::OnInitializing(void)
{
    Hello();
    //... 
```

该应用程序可以很好地编译和链接，并运行到该行。然后崩溃。崩溃不会作为调试器中的断点出现。

SDK 2.0.5，针对 bada 2.0 HVGA。所有设置均为默认值。

链接器行为是怎么回事？我怎样才能使它像现有的所有其他链接器一样检查未解析的符号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:34:53.887

编辑礼貌的技术支持：

`-Wl,--no-undefined`通过在项目 Explorer->Properties->C/C++ Build->Settings->bada C++ Linker->Miscellaneous->Linker flags 中右键单击您的项目来添加选项。

# salesforce - 如何仅将依赖字段中的某些值显示给某些配置文件？

> ID：10341790
> 
> 赞同：2
> 
> 时间：2012-04-26T21:37:55.230
> 
> 标签：salesforce, force.com

**设置和目标**

我有一个带有依赖字段 SUBTYPE 的控制字段 TYPE。我想在依赖字段中添加两个选项，这些选项仅对 1 种记录类型（或一组定义的配置文件）可见。

**混乱**

我的老板说我们可以做到这一点，因为我们只添加了 1 个控制字段列。我认为这是不可能的，因为如果您使这些添加可用于控制字段选项（通过字段依赖矩阵），那么任何可以看到该控制字段（通过记录类型）的人都应该看到这些选项。[（来自https://login.salesforce.com/help/doc/en/fields_dependent_field_considerations.htm](https://login.salesforce.com/help/doc/en/fields_dependent_field_considerations.htm)的交叉点）

**问题：**

我不明白为什么这是可能的（我在这里考虑集合论）以及如何做到这一点。

谢谢，

-Das Noob。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:47:40.833

必须在记录中启用一个选项才能可见（用于控制），另外还必须在矩阵中启用（用于控制），所以我在这里看不到问题。只需将选项添加到依赖字段，将它们附加到它们的控制值，然后只为所需的记录类型启用它们。

就集合论而言，可见相关选项的集合是为记录类型启用的选项和当前控制选项的 matix 中存在的选项的交集。当其中任何一个发生变化时，都会重新计算集合（理论上;））

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:16:09.493

依赖关系的记录类型规则...

记录类型 1 具有类型 TA TB

子类型 STA1 STA2 STB1 STB2

记录类型 2 具有类型 TA TB

子类型 STA1 STB1

所以与依赖无关！所以上面这些是人们可以看到的每种记录类型......现在让我们添加依赖关系......

我们将使 STA1/STA2 依赖于 TA 我们将使 STB1/STB2 依赖于 TB

美好的！记录类型 2 仍然看不到 STB2 嘿选择 TB！（记录类型限制）记录类型 2 只有在选择 TB 时才能看到 STB2！（依赖）

所以只需将您的 2 个值添加到 SUBTYPE。使这两个值对正确的记录类型可见。编辑您的依赖项（不要考虑记录类型，只需创建依赖项）。现在以用户 1 身份登录并进行测试。现在以用户 2 的身份登录并进行测试。

你应该很高兴去！

当它怀疑时，测试它！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T14:21:26.210

为什么这不会影响在其配置文件中选择了该控制字段的所有记录类型？- 所以如果我有配置文件 A 和 B，两者都需要访问该控制字段 - 为什么依赖字段只暴露给 A 而不是 B？

# django - 没有字段的 Django models.py 导入

> ID：10341792
> 
> 赞同：0
> 
> 时间：2012-04-26T21:37:59.760
> 
> 标签：django, sqlite

当我通过[https://docs.djangoproject.com/en/1.4/topics/db/models/](https://docs.djangoproject.com/en/1.4/topics/db/models/)工作时，在 django 中，我启动了一个名为的新应用程序，并按照演练定义`myapp`编辑了文件：`models.py`

```
class Person(models.Model):
  GENDER_CHOICES = (
    (u'M', u'Male'),
    (u'F', u'Female')
  )
  name = models.CharField(max_length=60)
  gender = models.CharField(max_length=2, choices=GENDER_CHOICES) 
```

然后我运行`manage.py syncdb`并尝试在`manage.py shell`交互式提示中运行接下来的几行

```
>>> p = Person(name="Fred Flintstone", gender="M")
>>> p.save()
Traceback (most recent call last):
  .…[I removed a few lines]...
  DatabaseError: table myapp_person has no column named name
>>> p.gender
u'M'
>>> p.get_gender_display()
u'Male' 
```

...所以我检查了 sqlite3 在数据库中是否有一个名为 Person 的对象，其名称为列

```
C:\Users\djangoSite>python manage.py sql myapp
BEGIN;
CREATE TABLE "myapp_person" (
"id" integer NOT NULL PRIMARY KEY,
"name" varchar(60) NOT NULL,
"gender" varchar(2) NOT NULL 
```

);

当然可以！所以 Person 模型存在，但是它没有得到我在 models.py 中设计的字段？我打了一个`dir(Person)`电话，它确认姓名和性别字段不在那里……其次，我做了`dir(p)`，而且确实有。我想那是因为我们只是将它们添加到那个元组中，所以这并不奇怪。

那么最大的问题是：

1.  为什么我不能'p.save()'？
2.  为什么导入调用不带入具有我设计的字段的对象`models.py`？
3.  这是设计使然吗？
4.  我只是做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T00:03:24.653

> 为什么我不能`p.save()`？

您的人员表中没有名为 name 的列。 `manage.py sql myapp`只显示 django 根据您的模型生成的 sql。不是 sqlite 中的实际表。（当然它应该匹配）输入您的 sqlite 数据库并验证表及其架构是很重要的。我发现在开发时我同步数据库并稍后对模型进行更改。重新同步 db 不会修改表。您必须删除表然后重新同步或更改表。

> 为什么 import 调用没有引入我在 models.py 中设计的字段的对象？

请修改您的问题以反映此问题，看起来您在访问或实例化人员对象时没有任何问题。

> 这是设计使然吗？

不，我不认为这是设计使然，我相信这些是新用户学习新框架时出现的常见问题。在我学习的几周和几个月里，我遇到了各种各样的问题，它们会越来越远。只要确保您正在验证事情是否正常工作。检查 manage.py sql myapp 没有那么重要。检查您的数据库以查看方案更相关。Django 是一个成熟的平台，当它在 99.9% 的情况下给你一个错误`missing colum` 时，这意味着它是透明的。

# c# - 2012 年 7 月弃用的 wap 对话框

> ID：10341795
> 
> 赞同：1
> 
> 时间：2012-04-26T21:38:14.553
> 
> 标签：c#, facebook, facebook-c#-sdk

我刚刚在 WP7.1 (Mango) 应用程序中尝试了本周早些时候的 Facebook C# SDK v6.0.16。

目标是通过 facebook 应用在用户的墙上发布照片，所以我开始实现登录以获取访问令牌。令人惊讶的是，我无法得到一个很好的组合：

*   使用桌面页面在手机屏幕上显示非常小
*   使用移动页面很好，但是登录成功后出现以下错误：

“YOURAPP 发生错误。请稍后再试。API 错误代码：11 API 错误描述：不推荐使用此方法错误消息：不推荐使用 Display=wap 对话框。您可以通过禁用“july_2012”迁移来临时启用它们。他们将于 2012 年 7 月永久停止工作。”

我使用的代码是：

```
 private Uri GenerateLoginUrl(string appId, string extendedPermissions)
    {
        var parameters = new Dictionary<string,object>();

        parameters["client_id"] = appId;
        parameters["mobile"] = true;
        parameters["redirect_uri"] = "https://www.facebook.com/connect/login_success.html";
        parameters["response_type"] = "token";
        parameters["display"] = "touch";
        if (!string.IsNullOrWhiteSpace(extendedPermissions))
            parameters["scope"] = extendedPermissions;

       return fb.GetLoginUrl(parameters);
    } 
```

并且生成的 urlLogin 是 m.facebook.com/dialog/oauth?etcetcetc，来自 SDK 本身。

在我看来，SDK 本身因 API 的弃用而中断，或者我遗漏了一些东西。

有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T23:54:49.947

Facebook 不再支持 C# SDK，因此 FB 不会修复其中的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T04:20:06.370

只需将**显示**参数更改为**页面就足够了**

```
var parameters = new Dictionary<string, object>();
parameters["client_id"] = appId;
parameters["redirect_uri"] = "https://www.facebook.com/connect/login_success.html";
parameters["response_type"] = "token"; 
parameters["display"] = "page";
if (!string.IsNullOrEmpty(extendedPermissions))
{  
    parameters["scope"] = extendedPermissions; 
}
return _fb.GetLoginUrl(parameters); 
```

# image - 是否可以查看/访问动画 gif 的帧

> ID：10341796
> 
> 赞同：1
> 
> 时间：2012-04-26T21:38:30.920
> 
> 标签：image, image-processing, gif

我很好奇是否可以加载动画 .gif 文件并在代码中查看它包含哪些帧或帧数？这在javascript中完全可能吗？如果没有，即使是某种图像处理库也有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:48:37.607

在 Javascript 中？可能不会。如果您可以获取 GIF 文件中的原始字节，您可以编写（或者可能找到一个库）用于读取 GIF 中的图像/帧数据的 Javascript 实现。

那将是矫枉过正，除非您只是好奇是否可以做到。

知道了这一点，您可能希望使用服务器端解决方案来获取 GIF 中的帧数。

# iphone - 带有 UIScrollView 和 TabBar 的 iOS 应用在离开全屏 iAd 或 YouTube 后会创建空白

> ID：10341800
> 
> 赞同：1
> 
> 时间：2012-04-26T21:38:59.353
> 
> 标签：iphone, ios5, ios-simulator, fullscreen, iad

截图：

[关闭 iAd 视图后](http://i.imgur.com/WBQaN.png)[在模拟器中运行](http://i.imgur.com/8cDjr.png)

问题描述：

打开 iAd 或 Youtube（全屏）后，后面的所有视图元素都会向下移动 20 像素左右。

然而，即使在此之前，所有元素都必须在 XIB 中向下移动大约 20 像素，以便它们在没有白色（灰色）空间的情况下呈现在正确的位置。

知道为什么会这样吗？我已经尝试编辑 XIB 并查看 UIViewController 子类，但到目前为止没有任何效果。

# java - 多项选择背包拍卖

> ID：10341803
> 
> 赞同：0
> 
> 时间：2012-04-26T21:39:09.917
> 
> 标签：java, knapsack-problem

我正在拼命寻找 Java 中的 MCKP 求解器。我需要它来解决这样的拍卖：3 个竞标者，每个竞标者为相同对象的捆绑提供一组报价。假设有 10 件物品要出售，他们可以提供 1、2、3、4 等物品。

显然，每个投标人只能接受一份报价。

所以这显然是一个 MCKP。

谢谢，垫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T23:19:55.787

这是一个用于 Java 的整数编程库。

[http://javailp.sourceforge.net/](http://javailp.sourceforge.net/)

```
SolverFactory factory = new SolverFactoryLpSolve(); // use lp_solve
factory.setParameter(Solver.VERBOSE, 0); 
factory.setParameter(Solver.TIMEOUT, 100); // set timeout to 100 seconds

/**
* Constructing a Problem: 
* Maximize: 143x+60y 
* Subject to: 
* 120x+210y <= 15000 
* 110x+30y <= 4000 
* x+y <= 75
* 
* With x,y being integers
* 
*/
Problem problem = new Problem();

Linear linear = new Linear();
linear.add(143, "x");
linear.add(60, "y");

problem.setObjective(linear, OptType.MAX);

linear = new Linear();
linear.add(120, "x");
linear.add(210, "y");

problem.add(linear, "<=", 15000);

linear = new Linear();
linear.add(110, "x");
linear.add(30, "y");

problem.add(linear, "<=", 4000);

linear = new Linear();
linear.add(1, "x");
linear.add(1, "y");

problem.add(linear, "<=", 75);

problem.setVarType("x", Integer.class);
problem.setVarType("y", Integer.class);

Solver solver = factory.get(); // you should use this solver only once for one problem
Result result = solver.solve(problem);

System.out.println(result);

/**
* Extend the problem with x <= 16 and solve it again
*/
problem.setVarUpperBound("x", 16);

solver = factory.get();
result = solver.solve(problem);

System.out.println(result);
// Results in the following output:

// Objective: 6266.0 {y=52, x=22}
// Objective: 5828.0 {y=59, x=16} 
```

# javascript - 为什么这个 onclick 事件不起作用？

> ID：10341809
> 
> 赞同：-1
> 
> 时间：2012-04-26T21:39:56.860
> 
> 标签：javascript, html, css

我用这个 onclick 事件搞砸了一张图片

```
onclick="document.getElementById('custom-select span').style.border-bottom-radius ='0px';" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T21:41:24.817

`border-bottom-radius`不是 JavaScript 中的有效标识符。改为使用`borderBottomRadius`。

再说了，你元素的ID真的`custom-select span`和空格一样吗？！您不应该在 ID 中放置空格 - 它们在那里无效，因此可能会导致某些浏览器出现问题。

# excel - 如何将日和小时合并为一个日期

> ID：10341812
> 
> 赞同：1
> 
> 时间：2012-04-26T21:40:17.703
> 
> 标签：excel, vba, date

我有三个文本框（分别用于日期、小时、分钟）

我需要将最后的日/月/年小时：分钟粘贴到 Excel 中的单元格，并将其格式化为日期

```
sDate = Format(myDate.Value & txtHour.Value & txtMinute.Value, "MM/DD/YYYY HH:MM")
.Cells(iRow, iCol + 1).Value = sDate 
```

帮帮我？我在挠头。

就这样出来了。

04/26/20121437

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:56:51.323

如果您的日期已经是 04/26/27 的格式，您应该可以执行类似的操作

```
sDate = myDate.Value & " " & txtHour.Value & ":" & txtMinute.Value
.Cells(iRow, iCol + 1).Value = sDate 
```

或者

```
sDate = Format(myDate.Value, "MM/DD/YYYY") & " " & txtHour.Value & ":" & txtMinute.Value
.Cells(iRow, iCol + 1).Value = sDate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:18:43.453

这是最干净的方法。不需要字符串连接。

```
Dim d As Date
d = CDate(myDate.Value) + TimeSerial(txtHour.Value, txtMinute.Value, 0)
Range("A1") = d
Range("A1").NumberFormat = "mm/dd/yyyy hh:mm"

' If you *really* need the date as a string (which is rarely the case):
Dim s As String
s = Format(d, "mm/dd/yyyy hh:mm") 
```

唯一的弱点是`CDate(myDate.Value)`。从 VBA 文档：

> **CDate**根据系统的区域设置识别日期格式。如果提供的格式不是已识别的日期设置之一，则可能无法确定正确的日、月和年顺序。

例如，如果用户决定以`dd/mm/yyyy`format 而不是`mm/dd/yyyy`in键入日期`myDate`，那么它将无法正常工作。请注意，Zaider 的解决方案也有类似的弱点。

# use-case - 用例标准

> ID：10341821
> 
> 赞同：1
> 
> 时间：2012-04-26T21:40:45.930
> 
> 标签：use-case

1 - 我对如何通过用例建模以下问题有一些疑问。

背景：公司是保险公司，出事故及时车

*   故事：演员“A”检查一个新的声明并确定所请求的演员“B”是否被拒绝。演员“A”分析的是是否有经济保障，驾驶执照是否有效或者他是否喝醉了，因此通过电子邮件向演员“B”发送电子邮件来请求拒绝索赔的决定是指清除拒绝索赔。另一方面，ACTOR“B”回复拒绝，进入系统并使用预设格式的卡片程序。找到信件的类型（从几个中），打印出来，然后从这个区域带到“远征”区域发送到客户家中。

问题是：它们是两个用例，即一个用于请求，一个用于实际拒绝，还是一个具有两个参与者的用例？您能代表发送电子邮件的系统吗？如何复合用例的主要流程？

另一方面，为了减轻这个过程或用例，我意识到可以改进，然后我把它说如下：

*   故事：演员“A”检查投诉并确定索赔是否拒绝。为此，请使用标题为“拒绝索赔”的系统选项，按下系统会自动在“拒绝”请求的“收件箱”中发出新请求（不是电子邮件信箱，而是显示所有申请的表格）

问题：

它们是两个用例，即一个用于请求，一个用于实际拒绝，还是具有两个参与者的单个用例，例如“拒绝索赔”？如何复合用例的主要流程？这个新的“收件箱”，它指定，在一个新的用例中？

当然非常感谢您的回复或贡献！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T20:04:48.493

主要是A和B到底想做什么？换句话说，如果他们的电话响了，他们会说什么，为什么他们必须缩短谈话时间……

乍一看，用例将是：

A --> 检查声明

B --> 加快拒绝信

或类似的规定。然后，所有其他操作成为用例中的步骤、异常等。

# java - 如何获取手动输入的数组并对其进行排序？

> ID：10341822
> 
> 赞同：0
> 
> 时间：2012-04-26T21:40:51.663
> 
> 标签：java, arrays, sorting, input

这是我当前的代码：

```
public static void main (String [] args)
{
 try
      {
        System.out.println("Please enter the amount of numbers in the array");
        int arraySize2 = keyboard.nextInt ();
        System.out.println("Please enter the numbers in the array seperately.");
        int[] array = new int[arraySize2];
        for(int b=0; b<=arraySize2-1; b++){
          array[b] = keyboard.nextInt(20);}    
        for (int i = 0; i < array.length -1; i++){
          int minPos = i;
          for (int j = i; j < array.length; j++){
            if (array[j] < array[minPos])
              minPos = j; }       
          // swaps minimum value with current location
          int temp = array[i];
          array[i] = array[minPos];
          array[minPos] = temp; }
      }
      catch( ArrayIndexOutOfBoundsException e ) 
      {

      }
} 
```

当我手动输入数组时，我认为我遇到的问题出在某个地方。但我在那里变得朦胧？有没有人看到问题？我将此代码基于采用随机数组并对其进行排序的方法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:47:59.303

为什么不直接使用 a`TreeMap<Integer, Integer>`并继续输入值。最后使用迭代器或`for each`循环打印出或稍后使用这些数字。

或者您可以使用二叉搜索树并继续向其中插入数据。最后做一个中序遍历。

# java - 休眠保存中的可序列化字符串（对象实体，可序列化 id）

> ID：10341827
> 
> 赞同：0
> 
> 时间：2012-04-26T21:41:08.623
> 
> 标签：java, spring, hibernate, typing

我想坚持使用特定的 id-String tdsSubmissionId; 我的班级我的班级；this.hibernateTemplate.save(myclass, tdsSubmissionId);

使用此签名 - 保存（对象实体，可序列化 id）

但我收到错误 - 方法 save(String, Object) 不适用于参数 (Myclass, String)

似乎它的自动输入错误。我该如何解决？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T21:49:23.320

没有这样的方法`save(entity, id)`，这就是错误告诉你的。

您的实体必须已经设置了 ID，您可以将其传递给`hibernateTemplate.save(entity)`.

# php - 验证以检查用户名是否已存在于数据库中而不加载新页面

> ID：10341830
> 
> 赞同：1
> 
> 时间：2012-04-26T21:41:32.180
> 
> 标签：php, javascript, mysql, forms, validation

我设计了一个注册表单，您可以[在此处查看](http://monthlymixup.com/login/register.html)。它包括一个 javascript 验证脚本，它处理除了检查用户名是否已存在于 MySQL 数据库中之外的所有内容。

当前处理这种情况的方式是通过一个单独的 PHP 页面 (register.php) 在提交表单时调用，并检查 MySQL 数据库，如果用户名已经存在，则显示一些文本，并带有返回 html 页面的链接登记表上。

我想知道当用户尝试提交表单但用户名已经存在时，是否有一种方法不必加载新的 PHP 页面，而是将错误消息附加到 html 表单（与所有其他验证一样）。这样做的唯一方法是没有表单发布到的单独 PHP，而是在主文件中包含第二个文件（连接到数据库、检查用户名并添加新用户）中的所有 PHP注册页面？

我希望这很清楚！

谢谢，

缺口

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T22:34:42.837

我假设你在谈论一个ajax请求？如果您不知道那是什么，请继续使用 Google 搜索，您会找到大量相关信息。

我总是使用 jQuery 或 dojo 之类的 javascript 库，这使 ajax 更容易，但也许您不想为了一点 javascript 使用而增加整个 javascript 库的开销。

基本前提是：

1.  您的 javascript 向服务器发送请求，在这种情况下发送到您的 register.php 页面。
2.  register.php 文件使用您在 ajax 请求中传递的参数运行。
3.  javascript 接收来自 register.php 文件的响应。在这种情况下，可能最容易执行以下操作：

    *   如果用户名确实存在，则返回 false，然后您的 javascript 函数可以在回调中使用它来弹出验证错误。

    *   如果用户名不存在，则 register.php 文件可以注册/登录他们并将返回 true 到 javascript。然后，javascript 会将用户重定向到他们应该去的页面，就好像在后台没有发生任何事情一样。

出于编码目的，这里有一些关于如何使用 jQuery 进行操作的伪代码：

```
$.ajax({
  url:'register.php?username=theUsersName',
  dataType:'html',
  success:function(data){
    if (data)
      --redirect to homepage
    else
      --pop up validation error
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:32:31.500

我认为这正是您正在寻找的：

[http://www.99points.info/2010/06/live-availability-checking-with-ajax-and-jquery/](http://www.99points.info/2010/06/live-availability-checking-with-ajax-and-jquery/)

# php - SET @var := SELECT * FROM table_name: 有可能吗

> ID：10341831
> 
> 赞同：3
> 
> 时间：2012-04-26T21:41:34.487
> 
> 标签：php, mysql, phpmyadmin, set

我正在尝试编写我的 MySQL 查询，但我坚持这一点 - 我有多个从我的 php 到 SQL 数据库的查询：

```
SET @var := SELECT MAX(first_column)
    FROM table;

SELECT @var, 
    table.second_column
FROM table; 
```

但它返回 SQL 错误。当我在 phpmyadmin 中使用它时，它工作正常。我用谷歌搜索过，我看到人们只在存储过程中使用“SET @var = MySQL 查询”。是否可以按照我想要的方式使用它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T21:49:11.777

如果您正在运行多个查询（即，您`;`的查询中有一个），您需要将其作为两个单独的查询运行，或者使用类似[**`mysqli_multi_query`**](http://www.php.net/manual/en/mysqli.multi-query.php). 该[**`mysql_query`**](http://php.net/mysql_query)命令一次只能运行一个查询。

```
mysql_query('SET @VAR := SELECT MAX(first_column) FROM TABLE');
mysql_query('SELECT @var, table.second_column FROM table'); 
```

另请参阅[此相关问题](https://stackoverflow.com/questions/1227022/mysqli-multiple-queries-set-variable-produces-boolean-error-how-to-skip-this)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T21:52:03.830

```
SELECT MAX(first_column) INTO @var FROM table; 
SELECT @var,table.second_column FROM table; 
```

# c# - LINQ 列中的方法调用

> ID：10341835
> 
> 赞同：3
> 
> 时间：2012-04-26T21:41:54.817
> 
> 标签：c#, sql, linq, linq-to-sql, linq-to-objects

我有以下 LINQ 查询：

```
//myRepository.GetClients(); returns an IQueriable<>
        var AllClients = myRepository.GetClients();

        var ClientReports = from c in FirmECFIs
                         select new ClientReport
                        {
                            FirmSerialNumber = c.SerialNumber,
                            FirmName = c.Name,
                            Year = c.Year,
                            Month = c.Month,
                            CustID = c.CustID,
                            TotalCount =myRepository.GetCount(c.SerialNumber, billingYear, billingMonth),
                            TotalPrice = "0"
                        }; 
```

我收到一条错误消息，上面写着“...没有支持的 SQL 转换”，我从 TotalCount 列中删除了方法调用并分配了一个静态值，它可以正常工作。看起来 LINQ 无法将方法调用转换为 tSQL

谁能帮我解决这个问题？

谢谢

## GetCount() 方法的来源：

```
 public int GetCount(int SerialNumber, string billingYear, string billingMonth)
    {
        var Count = CreateDataContext().myView.Where(c => c.SerialNumber == SerialNumber)
            .Where(c => c.Year == Convert.ToInt32(billingYear)).Where(c => c.Month == Convert.ToInt32(billingMonth));
        return Count.ToList().Count; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T21:47:32.797

您的存储库在这里并没有真正做好它的工作 - 实际上它似乎是一个非常容易泄漏的抽象，充其量对您没有多大帮助（因为您仍在存储库之外进行查询）。

一种方法是将一种方法引入`GetClientReports`您的存储库，为您生成此结果。假设这只是下面的 Linq to Sql，您可以使用嵌套查询或在该级别连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T21:46:38.107

您可以在该行中执行另一个 SQL/LINQ 查询，但不能调用另一个 C# 函数。它无法将其转换为 SQL。

# php - PHP JSON 解码

> ID：10341836
> 
> 赞同：0
> 
> 时间：2012-04-26T21:41:56.067
> 
> 标签：php, json

我正在尝试更改 PHP 脚本，以便它可以接收 JSON 对象并使用给定的 JSON 对象。一切正常，直到我尝试使用 for 循环遍历转换后的 JSON 数组对象（又名“东西”）。

我在这里做错了什么：

```
$json = '{

    "foo":  "hi",
    "bar":  "bye"
    "stuff": [{"widget":"dd"},{"thing":"cc"},{"wcha":"dd"}] 
}';

$arr = json_decode($json, true);
$foo = $arr['foo']; //works fine
$bar = $arr['bar']; //works fine

//old way that worked:
//$stuff    = array("widget" => "dd", "thing" => "cc", "wcha" => "dd");
//new way that does not work:
$stuff = $arr['stuff'];
...

//This is where the problem is:
foreach ($stuff as $key => $value){... 
```

*for 循环中的问题*是 $key 是一个整数（不是实际值），而 $value 是单词“数组”（不是实际值）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T21:46:20.323

它正在做它应该做的事情。问题是你没有完全正确地理解它。

“东西”是一个对象数组。因此，当您对其进行解码时，生成的 PHP 数组是这样的：

```
[stuff]=>
array(3)
  {
  [0]=>
  array(1)
    {
    [widget]=>string(2) "dd"
    }
  [1]=>
  array(1)
    {
    [thing]=>string(2) "cc"
    }
  [2]=>
  array(1)
    {
    [wcha]=>string(2) "dd"
    }
  } 
```

因此，当您调用`foreach`它时，您将从那里获取各个数组。

我认为你的 JSON 应该是：

```
"stuff": {"widget":"dd","thing":"cc","wcha":"dd"} 
```

要么，要么你的 PHP 代码应该是：

```
foreach($stuff as $element) {
    list($key,$value) = each($element);
    // now do stuff
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T21:45:30.523

当然`$key`是整数=)。`[{"widget":"dd"},{"thing":"cc"},{"wcha":"dd"}]`这是你的数组，所以 key = 0 对应于对象`{"widget":"dd"}`，所以第四个。

要了解这些元素，请尝试：`$value->widget`或`$value->thing`.

由于 stuff 数组中的对象并非都具有相同的成员，因此您可能希望重新考虑构建对象的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T21:48:06.350

将您的 JSON 更改为

```
$json = '{
  "foo":  "hi",
  "bar":  "bye"
  "stuff": {"widget":"dd",
            "thing":"cc",
            "wcha":"dd"} 
}'; 
```

这种方式的东西包含另一个字典，如结构。

在您的示例中，您使用 [] 用于封装数组，而不是 json 对象，因此您拥有的整数只是项目的索引 {"widget":"dd"}, {"thing":"cc "} 和 {"wcha":"dd"} 在您的数组中。对于您的第一次迭代，$value["widget"] 应该等于 "dd"。

# .htaccess - 带有 php 和 .htaccess 的漂亮 url

> ID：10341841
> 
> 赞同：1
> 
> 时间：2012-04-26T21:42:26.080
> 
> 标签：.htaccess, friendly-url, pretty-urls

请放轻松，因为这对我来说是一个全新的世界。

所以我已经构建了 Little cms 并使用 GET 来控制 url 中的 pageID 或页面永久链接。当只通过查询字符串传递 1 个变量时，我的脚本工作正常

例如我的 htaccess：

```
RewriteEngine On
RewriteRule ^([a-zA-Z0-9]+)$ index.php?p=$1
RewriteRule ^([a-zA-Z0-9]+)/$ index.php?p=$1 
```

然后我可以通过在我的索引文件中控制的 id 或永久链接来调用我的页面。我没有弄清楚的一件事是如何在调用子页面时在 url 中包含父永久链接。

另一个例子。如果我调用作为父级子级的页面：

```
http://site.com/index.php?p=post-title 
```

如果 post-title 是 parent-title 的孩子；如何使用网址

```
http://site.com/parent-title/post-title? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T23:48:25.293

首先，我们可以将所有代码放在 Apache .htaccess 文件中。这可能看起来像这样：

```
 Options +FollowSymLinks
RewriteEngine On
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule ^users/(\d+)*$ ./profile.php?id=$1
RewriteRule ^threads/(\d+)*$ ./thread.php?id=$1
RewriteRule ^search/(.*)$ ./search.php?query=$1 
```

让我们从顶部开始，一路向下，以更好地了解这里发生了什么。第一行使用 Options 指令将环境设置为遵循符号链接。这可能是必要的，也可能不是必要的，但一些网络主机使用符号链接（类似于 MacOSX 中的别名或快捷方式是 Windows）来处理常见的 HTTP 请求错误，这些通常是符号链接文件，或者至少这是我理解的推理方式。接下来我们告诉 Apache 我们将使用重写引擎。接下来的两行非常非常重要，它将 URL 的重写限制在实际不存在的路径上。例如，这会阻止以下规则匹配 example.com/images/logo.png。第一个使用 !-d 标志防止现有目录，第二个使用 !-f 表示忽略现有文件。接下来的三行是实际的 URL 重写命令。

# javascript - 如何使用 Javascript 或 JQuery 在 HTML 中突出显示输入文本字段的一部分

> ID：10341843
> 
> 赞同：13
> 
> 时间：2012-04-26T21:42:42.000
> 
> 标签：javascript, jquery, html, validation

我正在对 HTML 中自由输入的输入文本字段执行某种形式的验证。有没有办法使用 JQuery 或 JavaScript 在输入文本字段中突出显示某些单词或短语（基于某些条件）？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-26T21:57:28.100

在文本输入框中，突出显示部分文本的唯一机会是使用选择。您可以使用文本框`selectionStart`和`selectionEnd`属性或`setSelectionRange()`方法在所有现代浏览器中执行此操作（不知道为什么两者都存在）。

现场演示：http: [//jsfiddle.net/YNr7K/](http://jsfiddle.net/YNr7K/)

代码：

```
var input = document.getElementById("textBoxId");
input.value = "Cup of tea";
input.setSelectionRange(0, 3); // Highlights "Cup"
input.focus(); 
```

在旧版本的 IE (< 9) 中，您需要使用其中一个令人厌烦`TextRange`的 s。有关显示如何执行此操作的功能，请参阅[此答案。](https://stackoverflow.com/a/3549669/96100)

# python - Django中的动态配置

> ID：10341847
> 
> 赞同：2
> 
> 时间：2012-04-26T21:43:06.820
> 
> 标签：python, django, web-services

我试图在运行时自动确定 Django 中的一些配置设置。

我已经设置了一个中间件处理程序，它在发出第一个请求之前运行一次，然后通过引发 MiddlewareNotUsed 来禁用自身。当处理程序运行时，它会通过 HTTP 从另一台服务器获取一些信息。我希望该信息可用于所有视图。

在设置模块中，我有一个空字符串。我认为我可以使用检索到的信息动态地修改它，以便所有视图都可以使用它。但是当我从中间件处理程序更新字符串时，信息不知何故丢失了。视图只看到空字符串。

如何使通过 HTTP 检索到的信息可用于所有视图？

我想将它保存在内存中，而不是数据库或文件系统中，但如果这是唯一的选择，我将使用其中一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T13:49:36.520

好的，我曾经做过类似的事情，但我并不为此感到自豪:)

但这很简单并且完成了工作，所以这里是：

```
from django.conf import settings

class SomeMiddleware(object):
    def process_request(self, request):
        try:
            settings.SOME_STRING_CONFIG
        except AttributeError:
            settings.SOME_STRING_CONFIG = some_value_to_set 
```

但是，这不是处理 django.settings 的好方法，请参阅[https://docs.djangoproject.com/en/dev/topics/settings/#altering-settings-at-runtime](https://docs.djangoproject.com/en/dev/topics/settings/#altering-settings-at-runtime)。

不，让我在这里引用它：

> 在运行时更改设置
> 您**不应该**在运行时更改应用程序中的设置。例如，**不要**在视图中这样做：
> 
> from django.conf import settings
> settings.DEBUG = True #**不**要这样做！
> 
> **您应该分配给设置的唯一位置是在设置文件中。**

（我加了粗体）

# java - 使用 Java 写入文本文件，覆盖测试用例的输出

> ID：10341854
> 
> 赞同：1
> 
> 时间：2012-04-26T21:43:31.850
> 
> 标签：java, file, io

我正在尝试使用关键路径方法计算关键路径。我有几个测试用例，输出应该打印到一个名为“tarea2.out”的文件中。

问题是当我打印文件时，似乎我覆盖了每种情况的输出，最后输出只显示了最后一个。我知道这很愚蠢，但我是 Java 新手，我无法使输出正确

这是我的代码：

```
package tarea;

import java.io.*;
import java.util.Arrays;
import java.util.StringTokenizer;

/**
 *
 * @author Francisco
 */
public class Main {
    public static int c;

    public static void recorrido(int[][] adj) throws IOException{
        int n=adj.length;
        int casitas[][] = new int[n][2];
        int mejorCamino[] = new int [n];

        int temp;

        for(int i=0;i<n;i++){
            for(int j=0;j<n;j++){
                temp = adj[i][j];
                if(temp > -1){
                    if(temp + casitas[i][0]>casitas[j][0]){
                        casitas[j][0] = temp + casitas[i][0];
                        mejorCamino[j] = i;
                    }
                }
            }
        }
        //Hacemos el paso hacia atrás.
        for(int y=0;y<n;y++)
        casitas[y][1] = casitas[n-1][0];

        for (int j=n-1;j>=0;j--){
            for(int i=0;i<n;i++){
                temp = adj[i][j];
                 if(temp > -1){
                    casitas[i][1]= Math.min(casitas[j][1] - temp , casitas[i][1]);
                }
            }
        }

        int x=n-1;
        String cam = "";
        while(x>0){
            if(x==n-1)
                cam= mejorCamino[x] + " " + x;
            else
                cam= mejorCamino[x] + " " + x + "\n" + cam;
            adj[mejorCamino[x]][x] = -1;
            x = mejorCamino[x];

        }

        //Calculamos las holguras con nuestra nueva matriz
        String mac="";
        int HT , HL;
        for(int i=0;i<n;i++){
            for(int j=0;j<n;j++){
                temp = adj[i][j];
                if (temp > -1){
                    HT = casitas[j][1] - temp - casitas[i][0];
                    HL = casitas[j][0] - temp - casitas[i][0];
                    mac += "\n" + i + " " + j + " " + HT + " " + HL;
                    if (HT>HL)
                        mac += " R";
                }
            }
        }

        String sFichero = "tarea2.out";
        File fichero = new File(sFichero);

        BufferedWriter bw = new BufferedWriter(new FileWriter(sFichero));

        bw.write("Case " + c + ": total duration " + casitas[n-1][0] );
                 bw.write("\n");
                 bw.write(cam);
                 bw.write(mac);
                 bw.write("\n");

                 // Hay que cerrar el fichero
        bw.close(); 
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T22:06:35.913

每次调用`recorrido`方法时都会创建 BufferedWriter。

```
BufferedWriter bw = new BufferedWriter(new FileWriter(sFichero)); 
```

每次都会重写该文件。将`true`参数添加到构造函数中以告知它将以追加模式打开文件

```
BufferedWriter bw = new BufferedWriter(new FileWriter(sFichero, true)); 
```

此外，如果您在所有应用程序中打开文件一次并`recorrido`只写入内容而不是多次打开/关闭文件会更好。

# iis - 如何接收带有“/”编码的 URL

> ID：10341855
> 
> 赞同：1
> 
> 时间：2012-04-26T21:43:33.450
> 
> 标签：iis, request, uri, urlencode

我的应用程序依赖于数据的 URL；例如：/categories/parent_name/child_name

URL 在“/”上拆分以确定父类别名称和子类别名称，用于数据库查找。某些类别名称包含“/”：/categories/parent_name/child_na/me 因此，在 URL：/categories/parent_name/child_na%2Fme 中使用“%2F”转义“/”是有意义的

但是这样做时，服务器会收到请求并将“%2F”转换回“/”。

因此，当我对 URL 进行拆分时，对于我不希望得到的部分 1) parent_name 2) child_na 3) me

我想要 1) parent_name 2) child_na/me

关于如何解决这个问题的任何想法？除了处理原始查询字符串还有其他方法吗？

# internet-explorer - 如何强制 Sass 为 Internet Explorer 的 DXImageTransform 渐变以十六进制格式输出颜色？

> ID：10341857
> 
> 赞同：0
> 
> 时间：2012-04-26T21:43:38.013
> 
> 标签：internet-explorer, sass, mixins

我有这个漂亮的 mixin 用于在 SCSS 中做渐变。

```
@mixin gradient($from, $to) {
    background: -webkit-gradient(linear, left top, left bottom, from($from), to($to));
    background: -moz-linear-gradient(top,  $from, $to);
    filter:  progid:DXImageTransform.Microsoft.gradient(startColorstr='#{$from}', endColorstr='#{$to}');
} 
```

问题是 SCSS 自动将我的 HEX 值更改`#FFFFFF`为 word `white`。IE 过滤器无法处理此问题。他们需要完全形成的 HEX 值。有没有办法强制 SCSS 不转换我的值？我不想重写我的整个 CSS 文件来适应这个怪癖。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T20:17:19.917

我遇到了同样的问题（使用 CodeKit 的内置 SCSS 编译器），我使用[ie-hex-str](http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html#ie_hex_str-instance_method)函数修复了它：

```
 filter:  progid:DXImageTransform.Microsoft.gradient(startColorstr='#{ie-hex-str($from)}', endColorstr='#{ie-hex-str($to)}'); 
```

请注意，这将生成一个八位十六进制数字 (RGBA)，而不是更常见的六位 RGB 版本，因此如果您将样式值传递给 JavaScript，您需要确保您的 JavaScript 可以处理更长的颜色代码。

[Sass 参考手册](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#color_operations)中涵盖了这个确切的 IE 过滤器问题。

# c - MPI IO读写块循环矩阵

> ID：10341860
> 
> 赞同：6
> 
> 时间：2012-04-26T21:43:53.490
> 
> 标签：c, io, mpi

我有一个学校项目要在 hpc 分布式系统上进行矩阵乘法。

我需要从并行 IO 系统中读取矩阵并使用 pblacs 在许多计算节点（处理器）上并行执行矩阵乘法。必须使用 MPI IO 命令读入数据。我知道 PBlacs 使用块循环分布来执行乘法。

教授没有给我们太多关于 MPI IO 的信息，我也很难找到很多关于它的信息/资源。**具体来说，有没有办法以块循环方式从并行 io 系统中读取矩阵并轻松将其插入 pblacs pdgemm？**

任何指向有用资源的指针将不胜感激。我的时间有点短，并且对这个项目缺乏方向感到沮丧。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-27T13:08:52.377

这实际上是相对简单的（如果你已经知道一些关于 blacs/scalapack 和 mpi-io 的知识！）但即便如此，文档 - 甚至在线 - 正如你所发现的那样，有些差。

首先要了解 MPI-IO 是它允许您使用普通的 MPI 数据类型来指定文件的每个进程的“视图”，然后只读取属于该视图的数据。在我们的中心，我们有关于并行 IO 的半天课程的幻灯片和源代码；前三分之一左右是关于 MPI-IO 的基础知识。[这里](https://support.scinet.utoronto.ca/wiki/images/4/4a/ParIO-HPCS2011.tgz)有幻灯片[，这里](https://support.scinet.utoronto.ca/wiki/images/a/aa/ParIO-HPCS2011.pdf)有示例源代码。

第二件要知道的是，MPI 有一种内置的方式来创建“分布式数组”数据类型，其中的一种组合可以让您布局块循环数据分布；这在我对这个问题的回答中进行了一般性讨论： [mpi 中的 darray 和 subarray 有什么区别？](https://stackoverflow.com/questions/5716677/what-is-the-difference-between-darray-and-subarray-in-mpi).

所以这意味着如果你有一个包含大矩阵的二进制文件，你可以使用 mpi-io 读取它，`MPI_Type_create_darray`它会以块循环的方式由任务分发。然后只需进行 blacs 或 scalapack 调用即可。我对计算科学堆栈交换[问题](https://scicomp.stackexchange.com/questions/1688/how-do-i-use-scalapack-pblas-for-matrix-vector-multiplication/1713#1713)的回答中列出了使用 scalapack psgemv 进行矩阵向量乘法而不是 psgemm 的示例程序。

为了让您了解这些部分是如何组合在一起的，下面是一个简单的程序，它读取包含矩阵的二进制文件（首先是方阵 N 的大小，然后是 N^2 个元素），然后计算特征值和使用 scalapack 的（新）`pssyevr`例程的向量。它结合了 MPI-IO、darray 和 scalapack 的东西。它在 Fortran 中，但函数调用在基于 C 的语言中是相同的。

```
!
! Use MPI-IO to read a diagonal matrix distributed block-cyclically,
! use Scalapack to calculate its eigenvalues, and compare
! to expected results.
!
program darray
      use mpi
      implicit none

      integer :: n, nb    ! problem size and block size
      integer :: myArows, myAcols   ! size of local subset of global array
      real :: p
      real, dimension(:), allocatable :: myA, myZ
      real, dimension(:), allocatable :: work
      integer, dimension(:), allocatable :: iwork
      real, dimension(:), allocatable :: eigenvals
      real, dimension(:), allocatable :: expected
      integer :: worksize, totwork, iworksize

      integer, external :: numroc   ! blacs routine
      integer :: me, procs, icontxt, prow, pcol, myrow, mycol  ! blacs data
      integer :: info    ! scalapack return value
      integer, dimension(9)   :: ides_a, ides_z ! scalapack array desc
      integer :: clock
      real :: calctime, iotime

      character(len=128) :: filename
      integer :: mpirank
      integer :: ierr
      integer, dimension(2) :: pdims, dims, distribs, dargs
      integer :: infile
      integer, dimension(MPI_STATUS_SIZE) :: mpistatus
      integer :: darray
      integer :: locsize, nelements
      integer(kind=MPI_ADDRESS_KIND) :: lb, locextent
      integer(kind=MPI_OFFSET_KIND) :: disp
      integer :: nargs
      integer :: m, nz

! Initialize MPI (for MPI-IO)

      call MPI_Init(ierr)
      call MPI_Comm_size(MPI_COMM_WORLD,procs,ierr)
      call MPI_Comm_rank(MPI_COMM_WORLD,mpirank,ierr)

! May as well get the process grid from MPI_Dims_create
      pdims = 0
      call MPI_Dims_create(procs, 2, pdims, ierr)
      prow = pdims(1)
      pcol = pdims(2)

! get filename
      nargs = command_argument_count()
      if (nargs /= 1) then
          print *,'Usage: darray filename'
          print *,'       Where filename = name of binary matrix file.'
          call MPI_Abort(MPI_COMM_WORLD,1,ierr)
      endif
      call get_command_argument(1, filename)

! find the size of the array we'll be using

      call tick(clock)
      call MPI_File_open(MPI_COMM_WORLD, filename, MPI_MODE_RDONLY, MPI_INFO_NULL, infile, ierr)
      call MPI_File_read_all(infile,n,1,MPI_INTEGER,mpistatus,ierr)
      call MPI_File_close(infile,ierr)

! create the darray that will read in the data.

      nb = 64
      if (nb > (N/prow)) nb = N/prow
      if (nb > (N/pcol)) nb = N/pcol
      dims = [n,n]
      distribs = [MPI_DISTRIBUTE_CYCLIC, MPI_DISTRIBUTE_CYCLIC]
      dargs = [nb, nb]

      call MPI_Type_create_darray(procs, mpirank, 2, dims, distribs, dargs, &
                                  pdims, MPI_ORDER_FORTRAN, MPI_REAL, darray, ierr)
      call MPI_Type_commit(darray,ierr)

      call MPI_Type_size(darray, locsize, ierr)
      nelements = locsize/4
      call MPI_Type_get_extent(darray, lb, locextent, ierr)

! Initialize local arrays    

      allocate(myA(nelements))
      allocate(myZ(nelements))
      allocate(eigenvals(n), expected(n))

! read in the data
      call MPI_File_open(MPI_COMM_WORLD, trim(filename), MPI_MODE_RDONLY, MPI_INFO_NULL, infile, ierr)
      disp = 4   ! skip N = 4 bytes
      call MPI_File_set_view(infile, disp, MPI_REAL, darray, "native", MPI_INFO_NULL, ierr)
      call MPI_File_read_all(infile, myA, nelements, MPI_REAL, mpistatus, ierr)
      call MPI_File_close(infile,ierr)

      iotime = tock(clock)
      if (mpirank == 0) then
          print *,'I/O time      = ', iotime
      endif

! Initialize blacs processor grid

      call tick(clock)
      call blacs_pinfo   (me,procs)

      call blacs_get     (-1, 0, icontxt)
      call blacs_gridinit(icontxt, 'R', prow, pcol)
      call blacs_gridinfo(icontxt, prow, pcol, myrow, mycol)

      myArows = numroc(n, nb, myrow, 0, prow)
      myAcols = numroc(n, nb, mycol, 0, pcol)

! Construct local arrays
! Global structure:  matrix A of n rows and n columns

! Prepare array descriptors for ScaLAPACK 
      call descinit( ides_a, n, n, nb, nb, 0, 0, icontxt, myArows, info )
      call descinit( ides_z, n, n, nb, nb, 0, 0, icontxt, myArows, info )

! Call ScaLAPACK library routine

      allocate(work(1), iwork(1))
      iwork(1) = -1
      work(1)  = -1.
      call pssyevr( 'V', 'A', 'U', n, myA, 1, 1, ides_a, -1.e20, +1.e20, 1, n, &
                     m,  nz, eigenvals, myZ, 1, 1, ides_z, work, -1,           &
                     iwork, -1, info )
      worksize  = int(work(1))/2*3
      iworksize = iwork(1)/2*3
      print *, 'Local workspace ', worksize
      call MPI_Reduce(worksize, totwork, 1, MPI_INTEGER, MPI_SUM, 0, MPI_COMM_WORLD, ierr)
      if (mpirank == 0) print *, ' total work space ', totwork
      call MPI_Reduce(iworksize, totwork, 1, MPI_INTEGER, MPI_SUM, 0, MPI_COMM_WORLD, ierr)
      if (mpirank == 0) print *, ' total iwork space ', totwork
      deallocate(work,iwork)
      allocate(work(worksize),iwork(iworksize))
      call pssyev('N','U',n,myA,1,1,ides_a,eigenvals,myZ,1,1,ides_z,work,worksize,info)
      if (info /= 0) then
         print *, 'Error: info = ', info
      else if (mpirank == 0) then
         print *, 'Calculated ', m, ' eigenvalues and ', nz, ' eigenvectors.'
      endif

! Deallocate the local arrays

      deallocate(myA, myZ)
      deallocate(work, iwork)

! End blacs for processors that are used

      call blacs_gridexit(icontxt)
      calctime = tock(clock)

! calculated the expected eigenvalues for a particular test matrix

      p = 3\. + sqrt((4\. * n - 3.) * (n - 1.)*3./(n+1.))
      expected(1) = p/(n*(5.-2.*n))
      expected(2) = 6./(p*(n + 1.))
      expected(3:n) = 1.

! Print results

      if (me == 0) then
        if (info /= 0) then
             print *, 'Error -- info = ', info
        endif
        print *,'Eigenvalues L_infty err = ', &
          maxval(abs(eigenvals-expected))
        print *,'Compute time = ', calctime
      endif

      deallocate(eigenvals, expected)

      call MPI_Finalize(ierr)

contains
    subroutine tick(t)
        integer, intent(OUT) :: t

        call system_clock(t)
    end subroutine tick

    ! returns time in seconds from now to time described by t
    real function tock(t)
        integer, intent(in) :: t
        integer :: now, clock_rate

        call system_clock(now,clock_rate)

        tock = real(now - t)/real(clock_rate)
    end function tock

end program darray 
```

# html - 为什么我的网站右侧有额外的空白？

> ID：10341864
> 
> 赞同：1
> 
> 时间：2012-04-26T21:44:02.603
> 
> 标签：html, css

在 Chrome 上，我的网站显示正常，但在 FF 或 IE 中，我在网站右侧看到水平滚动条和空白区域（可能需要调整大小/刷新几次才能显示）。

这是什么原因造成的？我的第一个想法是一个未封闭的 div，但我已经通过 W3C 进行了验证，并且它检查出来了。我的另一个想法是相对定位的东西（必须用一些元素做一些棘手的浮动。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-26T22:05:03.557

原因如下：

![在此处输入图像描述](../Images/64502769c9e5b6b16bbb6fd2103c7218.png)

我通过给所有元素一个 1px 的边框来发现这一点，然后你可以使用“检查元素”来定位它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T21:55:38.167

出于某种原因，宽度为 995px 的包装器破坏了它。我把它改回960，其他一切都很好。设计师设计的太宽了……grr。=D 谢谢收看。如果其他人知道这是为什么，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T21:56:52.727

使用 IE 9 查看您的页面源代码，#container 正在强制浏览器扩展您的站点结构的宽度：

**在你的 CSS 上，改变这个：**

```
#container {
    float: left;
    margin: 0 -240px 0 0;
    width: 100%;
} 
```

**对此：**

```
#container {
    float: left;
    margin: 0;
    width: 100%;
} 
```

也许这将为您解决问题！

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-03-02T06:31:41.153

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ ^^^^^^^^

身体 {

```
min-width: 1000px; 
```

}

谢谢，这使右侧的白色框架变为 GO。^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ ^^^^^^^^

# c# - 从 linq 到 sql 的自定义选择参数

> ID：10341869
> 
> 赞同：0
> 
> 时间：2012-04-26T21:44:37.407
> 
> 标签：c#, asp.net, linq-to-sql, .net-4.0

也许我的问题标题不正确，但不能描述我的观点。

可以说我有数据库表：

*   姓名
*   姓
*   电话
*   地点

我可以使用此代码进行查询以从该表中获取一些结果

```
DALDataContext context = GetContext();
var result = new List<Users>;
var result = (from users in context.Users where Name = "test" select users).ToList(); 
```

但如果我只需要姓名和姓氏，这个查询会给我所有的表信息（姓名、姓氏、电话和位置）。我认为如果我只需要姓名和姓氏并进行查询以仅获取姓名和姓氏，这将提高我的表现。

如何仅针对姓名和姓氏进行自定义查询 ToList()？

ASP.NET 4.0 C#

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T21:51:33.623

也许你可以试试这个：

```
var result = (from users in context.Users 
              where Name = "test" 
              select new User { users.Name, users.Surname }).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T21:54:47.703

要选择填充了这些字段的用户对象列表：

```
var result = (
    from user in context.Users 
    where Name = "test" 
    select new User {Name = user.Name, Surname = user.Surname}).ToList(); 
```

要返回匿名类型列表：

```
var result = (
    from user in context.Users 
    where Name = "test" 
    select new {user.Name, user.Surname}).ToList(); 
```

# firefox - WebKit 的 css zoom 属性是否有 Firefox 等价物？

> ID：10341870
> 
> 赞同：3
> 
> 时间：2012-04-26T21:44:49.527
> 
> 标签：firefox, css, webkit

我用 CSS 构建了一个进度条，它看起来不错，更好，但在 WebKit 中可以很好地扩展：

[http://jsfiddle.net/YvFYk/](http://jsfiddle.net/YvFYk/)

我想知道是否有人知道在 Firefox 中做同样事情的方法：

*   缩放高度、阴影/阴影位置
*   保持宽度不变

`-moz-transform: scale( .4 )`不符合我的要求，因为它缩小了宽度并保持容器大小相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T22:00:18.810

*不完全是答案，但比评论更长！*

据我所知`zoom`，Firefox 中没有或直接等效。也许还有另一种缩放标准的方法？我假设您想在两个地方使用相同的代码（大小是唯一的区别）。

在您解雇之前，请`-moz-transform:scale`记住它接受两个值。所以你可以这样做`scale(1, .4)`将保持水平比例相同但缩小垂直。在您的示例中，这可能会导致圆角出现问题，但您也许可以使其工作。

希望那有所帮助

# timer - 如何从函数中使用 Swing Timer

> ID：10341872
> 
> 赞同：0
> 
> 时间：2012-04-26T21:44:57.933
> 
> 标签：timer, repaint

我想停止执行一个函数来打印我在paintComponent中的内容

```
main(){
   f(){
      change(list)
      Timer to stop 1 minute and repaint
   } 
```

}

```
change(){
   repaint();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:01:28.900

[我想这里](https://stackoverflow.com/questions/10338163/paintcomponent-does-not-work-if-its-called-by-the-recursive-function)已经介绍过了

摇摆计时器。

```
public class exampe extends JPanel implements ActionListener {

int x;
int y;
int temp = 0;

public void paintComponent(Graphics g) {

    super.paintComponent(g);
    Graphics2D g2 = (Graphics2D) g;
    g2.fillOval(x - 2, y - 2, 4, 4);
}

public void set(int X, int Y) {

    x = X;
    y = Y;
}

public static void main(String args[]) {

    SwingUtilities.invokeLater(new Runnable()
    {
        public void run()
        {
            new exampe().createAndDisplayGUI();
        }
    });

 }

 public void createAndDisplayGUI(){

    JFrame frame = new JFrame("TEST");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    exampe ex = new exampe();
    JScrollPane scroll = new JScrollPane(ex);
    frame.getContentPane().add(scroll);
    frame.setSize(400, 300);
    frame.setLocationRelativeTo(null);
    frame.setVisible(true);
    Timer PointTimer = new Timer(1000, ex);
    PointTimer.setInitialDelay(1000);
    PointTimer.start();
    System.out.println("started");
}

@Override
public void actionPerformed(ActionEvent e) {

   // set(rand.nextInt(350), rand.nextInt(350));
      set(temp+10,temp+10);
      temp=temp+2;
      repaint();
}
} 
```

# php - 按地点奖励不同金额 (PHP)

> ID：10341874
> 
> 赞同：2
> 
> 时间：2012-04-26T21:45:16.430
> 
> 标签：php, database, arrays, foreach

我要做的是为 GPT 网站创建一个竞赛脚本，并且我希望能够以数据库中定义的不同金额奖励获奖者。例如，第一名将获得`reward_1`数据库中的内容等等。因此，我正在努力做到当我做的时候，`mysql_query("UPDATE members SET points=points+'$reward' WHERE username='$username'")`但我需要`$reward`对每个获胜的用户有所不同。

**澄清**
当这个特定脚本运行时，如果日期> =比赛的结束日期，它会给用户奖励（在代码中它说<=因为如果不是我将无法测试它）但基本上当它给出奖励时，我希望能够使用 1 个查询来执行此操作，但我希望该查询向正确的用户提供正确的奖励。例如，完成最多报价的用户应该得到比赛表中的reward_1，假设是1000，第二名的用户将得到列reward_2的奖励，比如500。我现在设置的方式它将为所有用户提供相同的奖励金额，而不是给每个用户不同的奖励金额。我希望这会有所帮助！

这是我的代码（请注意，我没有添加任何函数来尝试这样做，因为我不知道从哪里开始）

**更新**
我正在处理的是在所有被阻止的行之后，奖励金额将来自 dbtable 比赛。

我不确定我是否已经对我想要得到的内容进行了足够的描述，所以如果我需要澄清任何事情，请告诉我，感谢您的所有帮助！

好的，所以我一直在努力解决这个问题，尝试使用数组，请原谅这种草率，因为我只是想让事情按照我需要的方式工作！这是新代码：

```
<?
include_once"config.php";
date_default_timezone_set('UTC');

$query= "SELECT * FROM raffle WHERE amount>='1' ORDER BY Rand() LIMIT 2";
$result = mysql_query($query);
$raff=mysql_query("SELECT SUM(amount) FROM raffle");
$raffle=mysql_fetch_row($raff);
$amount= $raffle[0] / 2;
$dates= mysql_query("SELECT * FROM contest");
$stats= mysql_query("SELECT * FROM stats WHERE type='today'");
$statu= mysql_fetch_array($stats);

// while ($row = mysql_fetch_array($result)){
 // $uid = $row["id"]; 
 // $username = $row["user_id"];  
 // echo "User ID = $uid 
    // <br />User Name = $username 
   // <hr />"; 
// $winners= mysql_query("UPDATE members SET points=points+'".$amount."' WHERE username='".$username."'");
// $statusu1= mysql_query("UPDATE stats SET new='".$statu['new']."' WHERE type='yesterday'");
// $statusu2= mysql_query("UPDATE stats SET cashouts='".$statu['cashouts']."' WHERE type='yesterday'");
// $statusu3= mysql_query("UPDATE stats SET complete='".$statu['complete']."' WHERE type='yesterday'");
// $announce= mysql_query("INSERT INTO comment (text, home, date, text1)
// VALUES ('Rewards Cube System','',NOW(),'".$username." just won ".$amount." points in the daily raffle, Congrats!')");
 // }
 // $clear= mysql_query("UPDATE raffle SET amount='0'");
 // $clear1= mysql_query("UPDATE stats SET new='0' WHERE type='today'");
 // $clear2= mysql_query("UPDATE stats SET cashouts='0' WHERE type='today'");
 // $clear3= mysql_query("UPDATE stats SET complete='0' WHERE type='today'");
// print" DONE";

while ($dat = mysql_fetch_array($dates)) {
$places= mysql_query("SELECT * FROM members ORDER BY entries_".$dat['type']." DESC LIMIT ".$dat['rewards']."");
if ($dat['rewards'] == 1){
$reward = array ('1' => $dat['reward_1']);
}
else if ($dat['rewards'] == 2){
$reward = array ('1' => $dat['reward_1'], '2' => $dat['reward_2']);
}
else if ($dat['rewards'] == 3){
$reward = array ('1' => $dat['reward_1'], '2' => $dat['reward_2'], '3' => $dat['reward_3']);
}
else if ($dat['rewards'] == 4){
$reward = array ('1' => $dat['reward_1'], '2' => $dat['reward_2'], '3' => $dat['reward_3'], '4' => $dat['reward_4']);
}
else if ($dat['rewards'] == 5){
$reward = array ('1' => $dat['reward_1'], '2' => $dat['reward_2'], '3' => $dat['reward_3'], '4' => $dat['reward_4'], '5' => $dat['reward_5']);
}
else if ($dat['rewards'] == 6){
$reward = array ('1' => $dat['reward_1'], '2' => $dat['reward_2'], '3' => $dat['reward_3'], '4' => $dat['reward_4'], '5' => $dat['reward_5'], '6' => $dat['reward_6']);
}
else if ($dat['rewards'] == 7){
$reward = array ('1' => $dat['reward_1'], '2' => $dat['reward_2'], '3' => $dat['reward_3'], '4' => $dat['reward_4'], '5' => $dat['reward_5'], '6' => $dat['reward_6'], '7' => $dat['reward_7']);
}
else if ($dat['rewards'] == 8){
$reward = array ('1' => $dat['reward_1'], '2' => $dat['reward_2'], '3' => $dat['reward_3'], '4' => $dat['reward_4'], '5' => $dat['reward_5'], '6' => $dat['reward_6'], '7' => $dat['reward_7'], '8' => $dat['reward_8']);
}
else if ($dat['rewards'] == 9){
$reward = array ('1' => $dat['reward_1'], '2' => $dat['reward_2'], '3' => $dat['reward_3'], '4' => $dat['reward_4'], '5' => $dat['reward_5'], '6' => $dat['reward_6'], '7' => $dat['reward_7'], '8' => $dat['reward_8'], '9' => $dat['reward_9']);
}
else if ($dat['rewards'] == 10){
$reward = array ('1' => $dat['reward_1'], '2' => $dat['reward_2'], '3' => $dat['reward_3'], '4' => $dat['reward_4'], '5' => $dat['reward_5'], '6' => $dat['reward_6'], '7' => $dat['reward_7'], '8' => $dat['reward_8'], '9' => $dat['reward_9'], '10' => $dat['reward_10']);
}
while ($place = mysql_fetch_array($places)) {
if(time() <= strtotime($dat['date_2'])) {
foreach($reward as $rew)
print" {$dat['name']}  {$place['username']} {$rew} <br>";
}
else {
print" no contests ready for rewards given";
}
}
}
?> 
```

它给了我想要的结果，但是它为每个结果都复制了它，所以它给了我：

```
Monthly Offer Contest Faiz66 2500
Monthly Offer Contest Faiz66 1000
Monthly Offer Contest Faiz66 500
Monthly Offer Contest taras 2500
Monthly Offer Contest taras 1000
Monthly Offer Contest taras 500
Monthly Offer Contest admin 2500
Monthly Offer Contest admin 1000
Monthly Offer Contest admin 500
Monthly Referral Contest taras 2500
Monthly Referral Contest taras 1000
Monthly Referral Contest taras 500
Monthly Referral Contest kira423 2500
Monthly Referral Contest kira423 1000
Monthly Referral Contest kira423 500
Monthly Referral Contest Faiz66 2500
Monthly Referral Contest Faiz66 1000
Monthly Referral Contest Faiz66 500 
```

这是为每个获胜者重复 3 个奖励，但我需要它看起来像这样：

```
Monthly Offer Contest Faiz66 2500
Monthly Offer Contest taras 1000
Monthly Offer Contest admin 500
Monthly Referral Contest taras 2500
Monthly Referral Contest kira423 1000
Monthly Referral Contest Faiz66 500 
```

也许数组不是解决这个问题的最佳方法，但如果是，我想我需要知道如何让它看起来像上面的表格，而不是它现在给我的第一个表格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:19:00.323

在休息了这段代码并阅读了其他一些可以实现的方法之后，我终于想出了一个可行的解决方案。

它可能不是最好的，但它确实有效。我对任何人可能拥有的任何其他解决方案持开放态度！

```
<?
include_once"config.php";
include_once"test/includes.php";
date_default_timezone_set('America/New_York');

$dates=mysql_query("SELECT * FROM contest");
$timestamp = time();

while ($dat = mysql_fetch_array($dates)) {
$places="(SELECT * FROM `".$dat['name']."` ORDER BY `completed` DESC LIMIT ".$dat['rewards'].")";
$results=mysql_query($places);

if ($dat['rewards'] == 1){
$reward = "".$dat['reward_1']."";
}
else if ($dat['rewards'] == 2){
$reward = "".$dat['reward_1'].",".$dat['reward_2']."";
}
else if ($dat['rewards'] == 3){
$reward = "".$dat['reward_1'].",".$dat['reward_2'].",".$dat['reward_3']."";
}
else if ($dat['rewards'] == 4){
$reward = "".$dat['reward_1'].",".$dat['reward_2'].",".$dat['reward_3'].",".$dat['reward_4']."";
}
else if ($dat['rewards'] == 5){
$reward = "".$dat['reward_1'].",".$dat['reward_2'].",".$dat['reward_3'].",".$dat['reward_4'].",".$dat['reward_5']."";
}
else if ($dat['rewards'] == 6){
$reward = "".$dat['reward_1'].",".$dat['reward_2'].",".$dat['reward_3'].",".$dat['reward_4'].",".$dat['reward_5'].",".$dat['reward_6']."";
}
else if ($dat['rewards'] == 7){
$reward = "".$dat['reward_1'].",".$dat['reward_2'].",".$dat['reward_3'].",".$dat['reward_4'].",".$dat['reward_5'].",".$dat['reward_6'].",".$dat['reward_7']."";
}
else if ($dat['rewards'] == 8){
$reward = "".$dat['reward_1'].",".$dat['reward_2'].",".$dat['reward_3'].",".$dat['reward_4'].",".$dat['reward_5'].",".$dat['reward_6'].",".$dat['reward_7'].",".$dat['reward_8']."";
}
else if ($dat['rewards'] == 9){
$reward = "".$dat['reward_1'].",".$dat['reward_2'].",".$dat['reward_3'].",".$dat['reward_4'].",".$dat['reward_5'].",".$dat['reward_6'].",".$dat['reward_7'].",".$dat['reward_8'].",".$dat['reward_9']."";
}
else if ($dat['rewards'] == 10){
$reward = "".$dat['reward_1'].",".$dat['reward_2'].",".$dat['reward_3'].",".$dat['reward_4'].",".$dat['reward_5'].",".$dat['reward_6'].",".$dat['reward_7'].",".$dat['reward_8'].",".$dat['reward_9'].",".$dat['reward_10']."";
}

$rewardsa = explode(",", $reward);
$i=0;

// Offers Contest

if(time() <= $dat['date_2'] && $dat['type'] == offer) {
while ($place = mysql_fetch_array($results)) {
print" {$dat['name']}  {$place['username']}  {$rewardsa[$i]}<br>";
if($dat['r_type'] == points){
$winners= mysql_query("UPDATE members SET points=points+'".$rewardsa[$i]."' WHERE username='".$place['username']."'") or die(mysql_error());
$shout=mysql_query("INSERT INTO shout (id, username, datetime, shout) VALUES ('','".$shoutname."','".$timestamp."','".$place['username']." has just won ".$rewardsa[$i]." points in the ".$dat['name']."')") or die(mysql_error());
}
if($dat['r_type'] == cash){
$winners= mysql_query("UPDATE members SET cash=cash+'".$rewardsa[$i]."' WHERE username='".$place['username']."'") or die(mysql_error());
$shout=mysql_query("INSERT INTO shout (id, username, datetime, shout) VALUES ('','".$shoutname."','".$timestamp."','".$place['username']." has just won $".$rewardsa[$i]." in the ".$dat['name']."')") or die(mysql_error());
}
$i++;
if($winners && $shout){
$delete=mysql_query("DROP TABLE `".$dat['name']."`");
}
}
}

// Referral Contest

if(time() <= $dat['date_2'] && $dat['type'] == referral) {
while ($place = mysql_fetch_array($results)) {
print" {$dat['name']}  {$place['username']}  {$rewardsa[$i]}<br>";
if($dat['r_type'] == points){
$winners= mysql_query("UPDATE members SET points=points+'".$rewardsa[$i]."' WHERE username='".$place['username']."'") or die(mysql_error());
$shout=mysql_query("INSERT INTO shout (id, username, datetime, shout) VALUES ('','".$shoutname."','".$timestamp."','".$place['username']." has just won ".$rewardsa[$i]." points in the ".$dat['name']."')") or die(mysql_error());
}
if($dat['r_type'] == cash){
$winners= mysql_query("UPDATE members SET cash=cash+'".$rewardsa[$i]."' WHERE username='".$place['username']."'") or die(mysql_error());
$shout=mysql_query("INSERT INTO shout (id, username, datetime, shout) VALUES ('','".$shoutname."','".$timestamp."','".$place['username']." has just won $".$rewardsa[$i]." in the ".$dat['name']."')") or die(mysql_error());
}
$i++;
if($winners && $shout){
$delete=mysql_query("DROP TABLE `".$dat['name']."`");
}
}
}

}
?> 
```

# jquery - jQuery 可通过 droppable 排序

> ID：10341875
> 
> 赞同：3
> 
> 时间：2012-04-26T21:45:16.607
> 
> 标签：jquery, draggable, jquery-ui-sortable, droppable

我的小提琴：http: [//jsfiddle.net/Yc9WY/42/](http://jsfiddle.net/Yc9WY/42/)

您将在此处看到两组，每组定义了 3 个可放置容器。您可以将事件从组 1 移动到组 2，并移动到任何插槽。这工作得很好。

一旦一个组已满，我想让用户能够通过上下移动事件来对该组进行排序。但是，如果他们选择，他们仍然应该能够将事件移出组。

您会看到我开始集成可排序库的注释掉的代码，但出现了奇怪的行为。

注意：我不能仅用 sortable 替换我的 draggable/dropable。我需要明确定义的可放置区域（每组 3 个），以便事件可以存在于组 1 的插槽 1 和 3 中。

这是我的代码

```
$(document).ready(function() {

// $(".sort").sortable({
//     revert: true
// });

$(".drag").draggable({
    //connectToSortable: ".sort",
    revert: true
    //helper: clone
});

$(".sort").droppable({
    drop: function(event, ui) {

        if (!($(this).children(".drag").size() == 1)) {
            $(this).append(ui.draggable);

            ui.draggable.css({
                left: 0,
                top: 0
            });
        }
    }

});
});

<div>Group 1:
<ul class="parent">
    <li class="sort"><a href="" class="drag">event 1</a></li>
    <li class="sort"><a href="" class="drag">event 2</a></li>
    <li class="sort"></li>
</ul>
</div>
<div>
Group 2
<ul class="parent">
    <li class="sort"></li>
    <li class="sort"><a href="" class="drag">event 3</a></li>
    <li class="sort"><a href="" class="drag">event 4</a></li>
</ul>
</div> 
```

我真的在为此苦苦挣扎，谢谢大家！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T22:14:03.740

我破解了它:)

**小提琴（和 CSS）：http:** [//jsfiddle.net/jhogervorst/CPA5Y/](http://jsfiddle.net/jhogervorst/CPA5Y/)

**HTML：**

```
<div class="group">
    <h1>Group 1</h1>

    <ul class="parent">
        <li class="droppable"><span class="draggable">Item 1</span></li>
        <li class="droppable"><span class="draggable">Item 2</span></li>
        <li class="droppable"></li>
    </ul>
</div>

<div class="group">
    <h1>Group 2</h1>

    <ul class="parent">
        <li class="droppable"><span class="draggable">Item 3</span></li>
        <li class="droppable"></li>
        <li class="droppable"><span class="draggable">Item 4</span></li>
    </ul>
</div>​ 
```

**JavaScript：**

```
$(".draggable").draggable({
    revert: true,
    revertDuration: 0
});

$(".droppable").droppable({
    activeClass: "active",
    hoverClass: "hover",

    accept: function (draggable) {
        // The droppable (li element).
        var droppable = $(this);

        // The droppable which contains the draggable, i.e., the parent element of the draggable (li element).
        var draggablesDropable = draggable.parent();

        // Is the draggable being dragged/sorted to the same group?
        // => We could just sort it, because there's always enough space inside the group.
        if (droppable.parent().is(draggablesDropable.parent())) {
           return true;
        }

        // Nope, the draggable is being dragged/sorted to another group.
        // => Is there an empty droppable left in the group to which the draggable is being dragged/sorted?
        else if (droppable.parent().find(".draggable").size() < droppable.parent().find(".droppable").size()) {
            return true;
        }

        // Nothing true?
        return false;
    },

    drop: function(event, ui) {
        // The droppable (li element).
        var droppable = $(this);

        // The draggable (span element).
        var draggable = ui.draggable;

        // The droppable which contains the draggable, i.e., the parent element of the draggable (li element).
        var draggablesDropable = draggable.parent();

        // Is the draggable being dragged to it's own droppable?
        // => Abort, there's nothing to drag/sort!
        if (droppable.is(draggablesDropable)) {
            return;
        }

        // Is the draggable being dragged to an empty droppable?
        else if (!droppable.find(".draggable").size()) {
            // Just drop the draggable there.
            droppable.append(draggable);
        }

        // Is the draggable being dragged/sorted to the same group?
        // => We can just sort it, because there's always enough space inside the group.
        else if (droppable.parent().is(draggablesDropable.parent())) {
            // Is the draggable being dragged up?
            if (droppable.parent().find(".droppable").index(draggablesDropable) > droppable.parent().find(".droppable").index(droppable)) {
                // Add the dragged draggable's droppable before the droppable.
                draggablesDropable.insertBefore(droppable);
            }

            // No, the draggable is being dragged down.
            else {
                // Add the dragged draggable's droppable after the droppable.
                draggablesDropable.insertAfter(droppable);
            }
        }

        // Nope, the draggable is being dragged/sorted to another group.
        // => Is there an empty droppable left in the group to which the draggable is being dragged/sorted?
        else if (droppable.parent().find(".draggable").size() < droppable.parent().find(".droppable").size()) {
            // Find the first empty droppable in which the draggable is being dragged/sorted.
            var emptyDroppable = $($.grep(droppable.parent().find(".droppable"), function (item) {
                // Are there draggables inside this droppable?
                // => Return TRUE if not.
                return !$(item).find(".draggable").size();
            })).first();

            // Clone the dragged draggable's droppable before itself, because we need to remember it's position after moving it.
            var draggablesDropableClone = draggablesDropable.clone().insertBefore(draggablesDropable);

            // Is the draggable being dragged above the empty droppable?
            if (droppable.parent().find(".droppable").index(emptyDroppable) > droppable.parent().find(".droppable").index(droppable)) {
                // Add the dragged draggable's droppable before the droppable.
                draggablesDropable.insertBefore(droppable);
            }

            // No, the draggable is being dragged below the empty droppable.
            else {
                // Add the dragged draggable's droppable after the droppable.
                draggablesDropable.insertAfter(droppable);
            }

            // Remove the position of the dragged draggable, because there's still some css left of the dragging.
            draggable.css({"top": 0, "left": 0});

            // Add the first empty droppable before the cloned draggable's droppable. Remove the latter afterwards.
            draggablesDropableClone.before(emptyDroppable).remove();
        }
    }
});​ 
```

# facebook - 通过开放图发布的链接在 facebook mobile 上不起作用

> ID：10341878
> 
> 赞同：1
> 
> 时间：2012-04-26T21:45:35.783
> 
> 标签：facebook, mobile, facebook-opengraph

我们正在使用 OpenGraph 通过我们的应用发布链接。如果我们使用浏览器查看来自 Facebook 的链接，它会完美显示，并且链接会转到正确的位置。如果我们从 iOS 或 Android 上的 Facebook 移动应用程序查看，则不会。

这是正确的链接：[http://meca.st/v/6wEhOTQfh][1] 在浏览器中从 Facebook 上单击时，它会完美显示。

这是从 Facebook 移动单击时显示的链接：ft=qid.5735821438092661368%3Amf_story_key.129730237160681">http://meca.st/?ref=feed&refid=7& *ft* =qid.5735821438092661368%3Amf_story_key.12973023716

基本上，它似乎失去了我们的直接位置，而是转到主站点 URL。奇怪的是，它可以在除 facebook 的移动应用程序之外的任何地方工作。

如果我们手动发布链接，它可以正常工作。只有当我们通过 OpenGraph 提交时。

任何帮助，将不胜感激。

谢谢，杰森

```
Here is the code that initiates the post:
[[manager facebook] postToWall:[captionTextField text] linkURL:[[manager mediaItem] playbackURL] imageURL:[[[manager mediaItem] thumbnails] objectAtIndex:0]]; 
```

[captionTextField text] - 用户输入的文本 [[manager mediaItem] playbackURL] - 服务器返回的播放 URL [[[manager mediaItem] thumbnails] objectAtIndex:0] - 服务器发送的第一个缩略图 URL

这是 postToWall 方法

```
- (void)postToWall:(NSString *)message linkURL:(NSString *)linkURL imageURL:(NSString *)imageURL {
NSMutableDictionary *postArguments = [[NSMutableDictionary alloc] init];

if (message != nil)
    [postArguments setObject:message forKey:@"message"];

if (linkURL != nil)
    [postArguments setObject:linkURL forKey:@"link"];

if (imageURL != nil)
    [postArguments setObject:imageURL forKey:@"picture"];

 _action = MC_FB_STATE_2;

[_facebook requestWithGraphPath:@"me/feed" andParams:postArguments   andHttpMethod:@"POST" andDelegate:self]; 
```

# magento - Magento 导入带有图像的产品

> ID：10341879
> 
> 赞同：8
> 
> 时间：2012-04-26T21:45:45.017
> 
> 标签：magento, csv, import

我整个下午都在尝试在 Magento 中导入一些产品，但都没有成功。经过反复试验，这一切都归结为“图像不存在”错误。我已经阅读了一些关于它的帖子，其中大多数已经过时，但最近的[一篇](http://www.magentocommerce.com/boards/viewthread/224928)文章谈到了将所有内容放入`/media/import`并将所有文件命名`/image.png`为 CSV 文件中的名称。

它不起作用，我仍然得到同样的错误。

我正在使用 Magento 1.6.2 并尝试将文件放入

```
/var/import/image.png
/var/import/i/m/image.png 
/media/import/image.png
/media/import/i/m/image.png
/media/catalog/product/i/m/image.png 
```

我试图将 CSV 中的文件命名为

```
/image.png
/1/m/image.png
/media/import/image.png
/media/import/i/m/image.png 
```

...以及它们的一堆组合（不完全确定哪些是我一开始使用随机方法，尝试论坛建议的方法，但没有任何运气）。我试图找到检查图像文件的 PHP 代码，但再次失败。

那么，导入程序在哪个文件夹中查找文件呢？这样做的方法是什么？有很多人有同样的问题，这似乎没有任何官方解决方案。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T21:00:18.003

我将图像 ftp 到 media/import 中，然后在实际的 CSV 文件中，图像是 /image.jpg。

这是我的工作导入 CSV 文件的示例。我编写了一个 php 脚本来散列为我们当时的目录提供数据的数据库并组装以下输出。它确实需要大量的试验和错误才能使其工作。在尝试导入之前先做一个`mysqldump`，这样您就可以消除还原错误。

```
"sku"|"price"|"special_price"|"brand"|"weight"|"cost"|"name"|"section"|"description"|"short_description"|"make"|"fitment"|"product_name"|"store"|"websites"|"attribute_set"|"type"|"has_options"|"gift_message_available"|"custom_design"|"options_container"|"image_label"|"small_image_label"|"thumbnail_label"|"page_layout"|"meta_keyword"|"custom_layout_update"|"manufacturer"|"color"|"status"|"tax_class_id"|"visibility"|"enable_googlecheckout"|"is_recurring"|"is_imported"|"special_to_date"|"custom_design_from"|"custom_design_to"|"news_from_date"|"news_to_date"|"qty"|"min_qty"|"use_config_min_qty"|"is_qty_decimal"|"backorders"|"use_config_backorders"|"min_sale_qty"|"use_config_min_sale_qty"|"max_sale_qty"|"use_config_max_sale_qty"|"is_in_stock"|"low_stock_date"|"notify_stock_qty"|"use_config_notify_stock_qty"|"manage_stock"|"use_config_manage_stock"|"stock_status_changed_automatically"|"use_config_qty_increments"|"qty_increments"|"use_config_enable_qty_increments"|"enable_qty_increments"|"store_id"|"product_type_id"|"product_status_changed"|"product_changed_websites"|"material"|"category_ids"|"image"|"small_image"|"thumbnail"
"TEE BLACK LONG LG"|"28.41"|"25.00"|""|"0.60"|"12.15"|"Ca Cycleworks Lg black cotton longsleeve logo t-shirt Cycleworks Brand Gear!!"|""|"Ca Cycleworks Lg black cotton longsleeve logo t-shirt Cycleworks Brand Gear!! for Ducati Everyone"|" Ducati Everyone"|""|""|"Ca Cycleworks Lg black cotton longsleeve logo t-shirt Cycleworks Brand Gear!!"|"admin"|"base"|"Other Accessories"|"simple"|"0"|"Use config"|""|"Block after Info Column"|""|""|""|"No layout updates"|""|""|""|""|"Enabled"|"None"|"Catalog, Search"|"Yes"|"No"|"Yes"|""|""|""|""|""|"1.0000"|"0.0000"|"1"|"0"|"0"|"1"|"1.0000"|"1"|"0.0000"|"1"|"1"|""|""|"1"|"0"|"1"|"0"|"1"|"0.0000"|"1"|"0"|"0"|"simple"|""|""|""|"36"|"/tee.jpg"|"/tee_sm.jpg"|"/tee_th.jpg"
"LANYARD"|"2.27"|"2.00"|""|"0.05"|"1.05"|"Ca Cycleworks Cycleworks lanyard Cycleworks Brand Gear!!"|""|"Ca Cycleworks Cycleworks lanyard Cycleworks Brand Gear!! for Ducati Everyone"|" Ducati Everyone"|""|""|"Ca Cycleworks Cycleworks lanyard Cycleworks Brand Gear!!"|"admin"|"base"|"Other Accessories"|"simple"|"0"|"Use config"|""|"Block after Info Column"|""|""|""|"No layout updates"|""|""|""|""|"Enabled"|"None"|"Catalog, Search"|"Yes"|"No"|"Yes"|""|""|""|""|""|"1.0000"|"0.0000"|"1"|"0"|"0"|"1"|"1.0000"|"1"|"0.0000"|"1"|"1"|""|""|"1"|"0"|"1"|"0"|"1"|"0.0000"|"1"|"0"|"0"|"simple"|""|""|""|"36"|"/"|"/_sm"|"/_th"
"PVC TAPE"|"13.64"|"12.00"|""|"0.50"|"1.05"|"Ca Cycleworks White pvc duck tape - all 4 panes - 2in x 110yds Cycleworks Brand Gear!!"|""|"Ca Cycleworks White pvc duck tape - all 4 panes - 2in x 110yds Cycleworks Brand Gear!! for Ducati Everyone"|" Ducati Everyone"|""|""|"Ca Cycleworks White pvc duck tape - all 4 panes - 2in x 110yds Cycleworks Brand Gear!!"|"admin"|"base"|"Other Accessories"|"simple"|"0"|"Use config"|""|"Block after Info Column"|""|""|""|"No layout updates"|""|""|""|""|"Enabled"|"None"|"Catalog, Search"|"Yes"|"No"|"Yes"|""|""|""|""|""|"1.0000"|"0.0000"|"1"|"0"|"0"|"1"|"1.0000"|"1"|"0.0000"|"1"|"1"|""|""|"1"|"0"|"1"|"0"|"1"|"0.0000"|"1"|"0"|"0"|"simple"|""|""|""|"36"|"/ductape.jpg"|"/ductape_sm.jpg"|"/ductape_th.jpg" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-22T12:35:01.617

对于那些厌倦了 Magento 开箱即用的数据流配置文件的无尽错误并考虑付费解决方案的人：[检查这个](http://www.magelynx.com/shop/import-export-plugin-for-magento.html)。有了它，您可以轻松避免在导入带有图像的产品时出现 99% 的常见错误：

-- 没有 BOM 字符问题（因为它将通过在线 CSV 编辑器发生）

-- 没有“错误路径”问题（您可以在设置中设置拾取图像的路径，如果图像丢失 - 日志会立即通知您）

-- 没有“多个图像”问题：您可以导入 small_image、缩略图、图像字段以及包含由分号分隔的多个路径的“media_gallery”字段。

此外，它可以导出，所以如果出现问题并且您无法弄清楚发生了什么 -*只需手动创建您的产品*，通过 magento 管理员手动上传图片，然后只需导出此产品。它将使用图像的正确路径填充 CSV，*它还将所有需要的图像复制到您在设置中设置为 "Media folder" 的文件夹中*。因此，如果图像位于正确的文件夹中，您可以将它们导入回来，而无需注意。

我知道大多数人都在寻找免费的东西，但是如果您已经花费了数十个小时来使用 Dataflow 来完成将图像批量分配给产品的简单任务 - 我敢打赌您明白我在说什么 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-29T11:14:50.880

就我而言，我需要导入 10000 条具有相同图像的记录。

在我在谷歌上搜索但它没有工作。我必须收集所有解析器并且它可以工作。我的解析器是：

1.  最低属性：

    商店、**sku**、数量、is_in_stock、attribute_set、描述、型号、价格、tax_class_id、可见性、网站、重量、状态、类型、short_description、名称、category_ids、图像、small_image、 **sku**、

你可以看到两个“sku”。一个是字符，另一个是数字。我不知道为什么。但是当我删除最后一个。它显示“图像不存在”。如果图像名称相同，则可能是图像的 sku。

1.  在 $MAGENTO_HOME/media/var 下创建导入文件夹
2.  通过 ftp/scp 上传您在此文件夹中的图像。
3.  在 csv 文件中：添加 /name_image.jpg（png 或您上传的任何格式的图像）

它将与您上传的图像匹配

所以，当你导入时。错误“图像不存在不显示。

# perl - 在 Perl 中使用全局变量时生成警告

> ID：10341884
> 
> 赞同：0
> 
> 时间：2012-04-26T21:45:57.940
> 
> 标签：perl, warnings, global

如果 Perl 子例程使用全局变量，有没有办法生成警告？

```
#!/usr/bin/perl -w  
use strict;
my $GlobalVariable;

#  Main Start

#  Main End

sub  MyFunction
{
    my $LocalVariable;
    $GlobalVariable=1;

} 
```

在这段代码中，Perl 中是否有警告`MyFunction()`正在使用`$GlobalVariable`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T21:58:32.647

标准做法是`use strict 'vars';`. 在你输入这个之后，你必须完全限定全局变量（例如`$main::GlobalVar`），否则 Perl 会抛出一个编译时错误。

*   [perldoc 严格](http://perldoc.perl.org/strict.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T12:12:11.657

如果您的意思是“警告 Perl 代码是否使用任何全局变量”，我认为目前没有预定义的方法可以做到这一点。

如果您只想禁止使用任何非标准 Perl 全局变量，您可以使用 CPAN 中的 Devel::FindGlobals 之类的东西来获取所有全局变量，然后在定义了任何非标准全局变量时发出警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T21:59:34.400

是的，`use strict`除非您明确将其声明为本地或全局或完全限定其名称，否则它将捕获访问任何变量的尝试。您可以尝试`tie`访问 current 的包全局范围（毕竟它是一个哈希）以捕获对已声明变量的访问，但不建议这样做，因为这样做有很多正当理由（例如来自 的所有好东西`perlodc perlvar`） .

# oop - 来自采访的车辆配置信息亭的面向对象设计

> ID：10341885
> 
> 赞同：4
> 
> 时间：2012-04-26T21:46:02.707
> 
> 标签：oop

我有一个面试问题，询问我将如何设计一个系统来在售货亭展示汽车/卡车/货车，以便客户可以查看车辆的规格。（警告：我最近没有做太多的 OO 编程，所以可能会出现不好的词汇）

我说我是从一类具有非常基本属性的车辆开始的，比如轴距、传动系统、马力。然后我会将其细分为汽车、卡车或货车，在那里我可以进行更具体的测量，例如卡车的床长或汽车的后备箱容量。

然后他们问，我将如何添加选项。我说选项可能存在于任何车辆上，所以我会说车辆可以有一个选项列表。

最后他们问，如果有一个选项只适用于卡车和货车而不是汽车，我有点难过。鉴于我描述的布局，有什么方法可以很好地实现这一点吗？有没有更好的方法来设置类层次结构来解决这个问题？或者这只是一个更复杂的问题，如果不添加一些额外的逻辑就无法轻松解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T22:45:16.003

这种情况有几个选项。

首先，最简单的：

**选项 #1 - 卡车/货车接口**

如果只有卡车和货车实现选项，则创建一个名为 IVehicleOptions 的接口并让卡车和货车实现它：

```
public interface VehicleOptions
{
  Options { get; }
} 
```

这样做的缺点是，现在您必须以不同于卡车和货车的方式对待汽车。

**选项 #2 - 空设计模式**

但是，您可以使用**Null 设计模式**。让 Car 实现 IVehicleOptions，然后返回 null：

```
public class Car : IVehicleOptions
{
  public VehicleOptions { get { return null; } }
} 
```

**选项 #3 - 策略模式**

创建一个基类，例如 Vehicle：

```
public abstract class Vehicle
{
  public Options Options { get; protected set; }
} 
```

并让每个具体类设置它：

```
public class Car : Vehicle
{
  public Car()
  {
    this.Options = NullOptions();  // This is the null design pattern used with this strategy pattern
  }
}

public class Truck : Vehicle
{
  public Truck
  {
    this.Options = SuperOptions();
  }
}

public class Van: Vehicle
{
  public Van
  {
    this.Options = ElegantOptions();
  }
} 
```

Now all vehicles can be treated the same way (as a Vehicle).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T22:40:45.133

1* 进行`Vehicle`抽象，以便它必须像`Class Car extends Vehicle`.

2* 所有的抽象方法都必须由所有的具体子实现，但所有的方法都必须是抽象的。所以使用部分实现。

3* 因此，如果您需要类选项`Truck`但`Van`不需要`Car`，请在`Vehicle`. 自从它实施以来，任何孩子都可以选择（或不）覆盖它。

4* 你也可以使用接口。`Truck`并且`Van`可以共享一个`Car`不需要共享的接口。

由于您已经有一段时间了，您应该查看：[http ://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-23T17:39:24.217

Since Van and Truck have extra feature which car do not have and we cant add that feature in the common interface, I think of segregating the interface which is one of the SOLID principle wherein van and truck would implement another interface which extends the basic interface. Mean to say:-

```
Interface IVehicle{
void move();
} 
Interface IVehicleExtra extends IVehicle{
// Have methods for extra features for Van and Truck
void limitSpeedEighty();
}
class Car implements IVehicle{
void move(){
}
}
class Van implements IVehicleExtra{
void move(){
}
void limitSpeedEighty(){
}
}
class Truck implements IVehicleExtra{
void move(){
}
void limitSpeedEighty(){
}
} 
```

I hope my understanding and presentation is clear.

# c# - 获取带前导零的日期时间小时和分钟

> ID：10341886
> 
> 赞同：26
> 
> 时间：2012-04-26T21:46:09.370
> 
> 标签：c#

我试图找出最简单的代码，以便在 DateTime.Now 函数的小时和分钟上添加前导零。我只需要结合小时和分钟，我不需要日期的其余部分。

最好的方法是什么？

我的代码如下所示：

```
DateTime.Now.Hour.ToString() + ":" + DateTime.Now.Minute.ToString(); 
```

但是，我得到了下午 4:04 的 16:4 等数据，我需要它看起来像 16:04。我熟悉有关日期时间格式的 msdn 文章，但我没有看到任何专门解决此问题的内容。

是否可以结合`DateTime.Now.Hour.ToString() + ":" + DateTime.Now.Minute.ToString();

如果不是，我将如何轻松地将 HH:MM 从 DateTime.Now 中拉出？

寻找尽可能少的代码行，因为这是我将经常使用的东西。谢谢

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-04-26T21:48:11.590

```
DateTime.Now.ToString("hh:mm") // for non military time
DateTime.Now.ToString("HH:mm") // for military time (24 hour clock) 
```

使用`hh`vs`h`将做一个领先的 0。与`mm`分钟相同。如果你想要秒，你可以使用`ss`.

```
MM - Month with leading 0
M - Month without leading 0
dd - Day with leading 0
d - Day without leading 0
yyyy - 4 Digit year
yy - 2 Digit year
HH - Military Hour with leading 0
H - Military Hour without leading 0
hh - Hour with leading 0
h - Hour without leading 0
mm - Minute with leading 0
m - Minute without leading 0
ss - Second with leading 0
s - Second without leading 0
tt - AM / PM 
```

还有很多。您应该查看 MSDN 文档以获取完整参考： [https ://msdn.microsoft.com/library/zdtaw1bw.aspx](https://msdn.microsoft.com/library/zdtaw1bw.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-19T08:15:13.740

如果您只想将小时和分钟作为分隔值，您可以使用

```
DateTime.Now.Hour.ToString("00.##") + ":" + DateTime.Now.Minute.ToString("00.##"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T21:49:31.193

您应该查看 MSDN 的[标准日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T21:49:19.383

尝试使用格式参数`ToString`

```
[DateTime]::Now.ToString("hh:mm") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-03T14:17:41.920

使用插值可以做到这一点： `Console.WriteLine($"{DateTime.Now:HH:mm}")`其中*Console.WriteLine*可以是一个字符串变量。

# emacs - Emacs：如何在 Chrome 中打开 ftp://...？（http://... 有效）

> ID：10341894
> 
> 赞同：1
> 
> 时间：2012-04-26T21:46:55.483
> 
> 标签：emacs, org-mode

我的`.emacs`包含

```
(setq browse-url-browser-function 'browse-url-default-macosx-browser) 
```

通过 Chrome 打开 .org 文件中的链接。奇怪的是，当我点击 ftp://... 链接时，它们会在 Firefox 中打开。我在此找到的所有内容是[How to make emacs org-mode open links to sites in Google Chrome](https://stackoverflow.com/questions/4506249/how-to-make-emacs-org-mode-open-links-to-sites-in-google-chrome)我检查了那里的所有选项，没有任何帮助。

注意：我正在使用 Emacs 24 处理 Mac OS X 10.7.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T05:44:06.120

除非`org-link-protocols`包含“ftp”条目，否则`browse-url`应为此调用该函数，在这种情况下`browse-url-browser-function`将使用该函数。

后者*可以*是将各种 URL 模式映射到不同功能的列表，但看起来您没有使用该功能。

`browse-url-default-macosx-browser`调用`open`程序，所以我不得不假设问题就在那里，因此在 Emacs 之外。

您应该能够通过对`open URL`各种类型的 URL 运行 shell 命令来确认这一点。

# jquery - jQuery 下拉菜单重新加载

> ID：10341895
> 
> 赞同：0
> 
> 时间：2012-04-26T21:46:56.043
> 
> 标签：jquery

我正在尝试使用 jQuery 使特定 div 的高度在鼠标悬停在它上方时展开，这样我就可以从中制作菜单。但是由于某种原因，当我的鼠标悬停在它上面时，它总是上下循环两次，而不是我想要的一次。这是我的代码副本，其中包含错误。

```
<div id="Container">
        <div id="Headeritem">
            <div id="NavBaritem">
              <div id="Nav3item">
                <div id="NavExpand3item"><a href="#" class="NavTextitem">Ministries</a></div>
              </div>
            </div>
          </div>
        <script type="text/javascript" src="jquery-1.4.2.min.js"></script> 
        <script type="text/javascript">
          <!--Script for NavBar Control
          $(document).ready(function(e) {
            <!--Script for AboutNE DropDown//-->
            $('#NavExpand3item').hover(
                function () {
                    $('#NavExpand3item').animate({
                        'height':'200px'
                    }, 300);
                },
                function () {
                    $('#NavExpand3item').animate({
                        'height':'0px'
                    }, 300);
                }
            );
          });

          //-->
         </script>
  </div> 
```

我真的只是想知道如何防止我的菜单循环两次，这里是一个[网站](http://sites.deyone.com/northeastchurch12/test2)的链接。我希望有人能帮助我。

谢谢你，

莫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T22:09:35.167

不要忘记使用 .stop()。

jQuery：

```
var origHeight = $('#NavExpand3item').height();
$('#NavExpand3item').hover(
function() {
    $(this).stop().animate({
        'height': '200px'
    }, 300);
}, function() {
    $(this).stop().animate({
        'height': origHeight 
    }, 300);
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/hDJJy/2/)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T22:17:24.717

@Francisc 非常正确。

[http://jsfiddle.net/4cVSq/](http://jsfiddle.net/4cVSq/)

发生的事情是（我认为），当您将文本悬停时它会扩展 div，并且当您的鼠标在扩展时遇到 div 时，它会将其视为另一个悬停。

你有两个选择。[之前](http://jsfiddle.net/4cVSq/)的一个链接。或者这个。

[http://jsfiddle.net/4cVSq/2/](http://jsfiddle.net/4cVSq/2/)

您可以给外部 div 一个高度，或者您可以将鼠标悬停在内部 div 上，同时仍然为外部 div 设置动画。我认为第一个是你想要的，因为这看起来像你打算把它做成一个菜单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T22:05:40.747

尝试这个：

```
$(document).ready(function() {

            $('#NavExpand3item').hover(
                function () {
                    $(this).animate({
                        "height" : "+=200px"
                    }, "fast");
                },
                function () {
                    $(this).animate({
                         "height" :"-=200px"
                    }, "fast");
                }
            );
          }); 
```

# java - 使用 StringTokenizer 的 Java 控制台计算器

> ID：10341896
> 
> 赞同：0
> 
> 时间：2012-04-26T21:47:17.573
> 
> 标签：java, console, calculator

我正在尝试使用 制作计算器（仅限代码）`StringTokenizer`，但我迷路了。我必须使计算器能够进行简单的数学运算（+-*）和其他一些不太基本的运算（log、sin、tan、exponential）。这段代码是一个基本数学的例子——我想先做基础，然后使用方法添加其他函数。

但是，我不知道如何进行操作，我在想也许开关可以完成这项工作，但是使用 BEMDAS 会变得复杂。上面的代码只是把操作数放在一个char数组里，把数字放在一个double数组里，然后就不知道怎么继续了。如果有人可以解释我如何继续这一点，或指导我，我将不胜感激。

```
import java.util.StringTokenizer;
import java.io.*;

public class Calculator  {
  public static void main (String[] args) {     
    int i=0;
    int j=0;
    int n=0;
    int o=0;
    double num []= new double [100];
    char op[]=new char [100];
    String ops[]=new String [100];

    String x = "5*10+15/12";
    StringTokenizer st = new StringTokenizer(x, "*/-+", true);
    while(st.hasMoreTokens()){
      ops[j] =st.nextToken();
      j++;
    }

    for(i=0; i<j;i++){
      if(i%2==0){
        num[n]=Double.parseDouble(ops[i]);
        n++;
      }
      else{
        op[o]=ops[i].charAt(0);
        o++;
      }
    }

    for(i=0; i<n;i++)
      System.out.println(num[i]);

    for(i=0; i<o;i++)
      System.out.println(op[i]);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T22:14:19.187

首先你必须抽象地思考，你必须想出一个解决问题的过程。你如何解决“5*10+15/12”？你在小学时是如何被教导去解决问题的？想想你如何在自己的头脑中将问题分解为简单的步骤。您将能够在脑海中将这个过程翻译成循环、结构、if 语句、树和算法。

首先，“ops”变量永远不会被分配给任何东西，所以你的 while 循环什么也不做。您需要考虑的第一件事是如何获取操作，在这种情况下，星号，加号，并从该字符串中除：“5 * 10 + 15/12”到该opts变量中，以便您可以循环它们。

# c++ - 添加命名空间会删除对类私有成员的朋友访问权限

> ID：10341898
> 
> 赞同：1
> 
> 时间：2012-04-26T21:47:31.727
> 
> 标签：c++, class, namespaces, friend

我有一个 Vector 类分为声明（.h）和实现（.cpp）文件：

```
// a_vector.h
class Vector
    {
    private:
        float f[4];

    public: 
        ...
        // friend operator overloads
        friend Vector operator * (const float& s, const Vector& v);
        friend Vector operator * (const Vector& v, const float& s);
} 
```

和

```
// a_vector.cpp
...
// friend operator overloads
Vector operator * (const float& s, const Vector& v)
{
    return Vector(s*v.f[0], s*v.f[1], s*v.f[2], s*v.f[3]);
}

Vector operator * (const Vector& v, const float& s)
{
    return s*v;
} 
```

现在我想为我的班级添加一个命名空间。根据[Danny Kalev 的文章](http://www.informit.com/guides/content.aspx?g=cplusplus&seqNum=61)，我对上述两个文件进行了以下更改：

```
// a_vector.h
namespace a
{
    class Vector
        {
        private:
            float f[4];

        public: 
            ...
            // friend operator overloads
            friend Vector operator * (const float& s, const Vector& v);
            friend Vector operator * (const Vector& v, const float& s);
    }
} 
```

和

```
// a_vector.cpp
...
// friend operator overloads
a::Vector operator * (const float& s, const a::Vector& v)
{
    return a::Vector(s*v.f[0], s*v.f[1], s*v.f[2], s*v.f[3]);
}

a::Vector operator * (const a::Vector& v, const float& s)
{
    return s*v;
} 
```

我现在得到了*运算符重载的第一个定义的调试错误，指出“'f' 是 'a::Vector' 的私有成员”。我认为朋友定义可以访问班级的私人成员？如果命名空间中没有 Vector 类，它可以正常工作。将 Vector 类放在命名空间中会如何改变朋友的工作方式？

**编辑：**

在下面添加了答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-26T10:00:06.660

您声明一个友元函数 a::operator* 而在您的 cpp 文件中声明并定义*另一个*不在 a:: 命名空间中的函数。因此，它不是您在头文件中声明的友元函数。用 a::operator* 替换 operator* 应该可以修复它。

# php - 基于表单的用户输入难以更改 PHP 文档中的 SQL 查询

> ID：10341907
> 
> 赞同：0
> 
> 时间：2012-04-26T21:48:23.813
> 
> 标签：php, mysql, sql, pear

我有一个 PHP 文档，该文档根据搜索表单中的输入值查询 MYSQL 数据库。一切都运行良好，除了我正在努力添加一个我相信会使整个应用程序更加用户友好的功能。

我数据库中的表基本上是存储各种社交俱乐部的信息。它有关于他们的位置、姓名、booking_price、alcohol_permitted 的数据。我需要帮助的一点与酒精许可有关。在数据库中存储 1 或 2，2 表示允许饮酒，1 表示不允许。

目前我的表格如下所示：

```
<form>
    <label for="alcohol_check">Search clubs where alcohol permitted?</label>
       <input type="radio" id="alcohol_check1" value="1" /><label for="radio1">No</label>
       <input type="radio" id="alcohol_check2" value="2" /><label for="radio2">Yes</label>
       <input type="radio" id="alcohol_check3" value="???" /><label for="radio3">Show both</label>

    <label for="club_name">Enter social club name:</label>
       <input type="text" id="club_name" name="club_name"/>
</form> 
```

我的 PHP 看起来像这样：

```
$user_alcohol_permitted_selection = $_POST['alcohol_check']; //Value sent using jquery .load()
$user_social_club_name_input = $_POST['name']; //Value sent using jquery .load()

$query="SELECT * FROM social_clubs 
        WHERE name = $user_social_club_name_input
        AND
        WHERE alcohol_permitted = $user_alcohol_permitted_selection"; 
```

目前的问题是，我的查询只会检索提供或不提供酒精的社交俱乐部。因为此时从alcohol_permitted 表单传递的值是1 或2。我可以对我的查询做些什么，以便如果用户选择“both”选项，它会检索提供酒类的社交俱乐部和不提供酒类的俱乐部？我想不通！我的查询中是否需要 if 语句？

感谢您检查这一点，抱歉，如果我没有很好地解释这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:57:10.237

这应该有效。

```
$user_alcohol_permitted_selection = $_POST['alcohol_check']; //Value sent using jquery .load()
$user_social_club_name_input = $_POST['name']; //Value sent using jquery .load()

$query="SELECT * FROM social_clubs 
        WHERE name = $user_social_club_name_input";

if ($user_alcohol_permitted_selection == "???")
{
     $query.= "AND WHERE alcohol_permitted = 1 OR alcohol_permitted = 2";
} else {
     $query.= "AND WHERE alcohol_permitted = $user_alcohol_permitted_selection";
} 
```

此外，如果列`alcohol_permitted`仅包含值 1 或 2。我建议您将列类型更改为 bool，就像他的回答中建议的 realmitchconnors 一样。

然后，您可以将条件语句缩减为：

```
$query="SELECT * FROM social_clubs 
        WHERE name = $user_social_club_name_input";    

if ($user_alcohol_permitted_selection != "???")
{
     $query.= "AND WHERE alcohol_permitted = $user_alcohol_permitted_selection";
} 
```

请注意`!`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T21:54:16.580

好的，首先，请将您的 alchohol_permitted 列的数据类型更改为 bool（MySQL 中的位（1））。光是读就让人不寒而栗……

现在，关于你的问题。试试这个 where 语句：

```
WHERE $user_alcohol_permitted_selection IS NULL 
OR alcohol_permitted = $user_alcohol_permitted_selection 
```

# php - 一个闪存卡程序的php帮助

> ID：10341913
> 
> 赞同：2
> 
> 时间：2012-04-26T21:48:45.207
> 
> 标签：php, database, web-applications

我正在开发一个查询数据库的小型 Web 应用程序。我希望脚本只在每张闪存卡上循环一次，并在最后显示“堆栈结束”警报，但随着脚本的编写，它将无限期地滚动整个集合。我想知道是否有人可以帮助我解决这个问题？该数据库具有 card_id (1,2,3...[每个条目都有一个唯一编号])、card_type (0 [基于术语]、1 [基于问题])、类 (主题)、子类 (划分该主题），side_1（数据），side_2（数据）。这是我到目前为止的代码：

```
 <?php

//Sample Database Connection Syntax for PHP and MySQL.
    //Connect To Database
    $hostname="";
    $username="";
    $password="";
    $dbname="";
    $usertable="flash_cards";
    $question = "side_1";
    $answer = "side_2";
    $connection = mysql_connect($hostname, $username, $password);
    mysql_select_db($dbname, $connection);
    $count=0;

    // this section generates the flashcards
    $query = "SELECT * FROM $usertable ";
    if(empty($_GET)) {

    }
    else {
        $query .= " WHERE ";

        if($_GET["sub_class"] != null){
            $query .= "sub_class = '".$_GET["sub_class"]."'";
            if($_GET["card_type"] != null){
                $query .= " AND card_type = ".$_GET["card_type"];
            }
        }
        else if($_GET["card_type"] != null){
            $query .= " card_type = ".$_GET["card_type"];
        }
    }

    $query .= " ORDER BY RAND() ";

    //echo $query;

    $result = mysql_query($query);
    if($result){
        while($row = mysql_fetch_array($result)){
            if($count == 0){
                $class = $row["class"];
                $sub_class = $row["sub_class"];
                echo "<input type=\"hidden\" id=\"".$count."\" value=\"".$class." - ".$sub_class."\"/>";
                $count += 1;
                echo "<input type=\"hidden\" id=\"".$count."\" value=\""."\"/>";
                $count += 1;
            }

            $name = $row["$question"];
            $name2 = $row["$answer"];
            echo "<input type=\"hidden\" id=\"".$count."\" value=\"".$name."\"/>";
            $count += 1;
            echo "<input type=\"hidden\" id=\"".$count."\" value=\"".$name2."\"/>";
            $count += 1;
        }
        echo "<input type=\"hidden\" id=\"count\" value=\"".$count."\"/>";

}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:56:08.967

在会话中的数组、cookie 或数据库中为每个用户显示的每张卡片保存一个唯一的 ID。当您查询卡片使用时`WHERE unique_id NOT IN($ids)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T22:31:13.587

其他发帖者已经提到了这一点，但需要重申：使用 PDO 准备你的 sql 语句，以避免注入攻击和黑客攻击。

关于你的问题；你可能想要做的是得到你的结果，*然后*随机化，因为它会更有效：

```
$result = mysql_query($query);
$shuffled_deck = array();
if($result) {
    while ($row = mysql_fetch_array($result)){
        $shuffled_deck[] = $row;
    }

    shuffle($shuffled_deck);

    foreach ($shuffled_deck as $row) {
        //output your stuff here
    }
    echo "<input type=\"hidden\" id=\"count\" value=\"".$count."\"/>";
} 
```

# android - Android root 访问阻止应用程序启动

> ID：10341914
> 
> 赞同：0
> 
> 时间：2012-04-26T21:48:47.090
> 
> 标签：android, root, launching-application

如果您具有 root 访问权限，是否有人知道以编程方式阻止启动另一个应用程序（或应用程序列表）的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T01:20:19.920

我认为您可以将 apk 更改为 600（不可执行）应用程序位于 /system/app 和 /data/app

# php - 使用 MySql/PHP 解释日期

> ID：10341915
> 
> 赞同：0
> 
> 时间：2012-04-26T21:48:47.837
> 
> 标签：php, mysql, date

我有一个数据库，里面有关于从我的网站购买的东西。我以以下格式存储了出售的日期和时间

```
2012-04-23 16:29:28 
```

现在，我目前拥有这个来获取某个人购买的产品：

```
$result = mysql_query("SELECT * FROM `purchases` WHERE `ReceiverKey` LIKE '4da0e081-320d-4c7b-bf5b-3d9f022d21d3' AND `InventoryName` LIKE '[Dugley] Cache Clearer 2.0' LIMIT 0, 30 ") or die(mysql_error()); 
```

但是，我需要对“*时间*”列进行排序，以仅显示过去 30 天内的购买情况。

关于如何有效地做到这一点的任何想法？代码示例将不胜感激，因为我很讨厌约会。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:52:21.230

```
WHERE when > date_add(NOW(), interval -30 days) 
```

# objective-c - 使用 ASIHTTPRequest 和 NSOperationQueue 的意外结果

> ID：10341916
> 
> 赞同：0
> 
> 时间：2012-04-26T21:48:55.700
> 
> 标签：objective-c, asihttprequest

这真的让我很烦......所以我制作了一个足够基本的应用程序来查询 servlet。

在我昨晚做了一些改变之前，它工作得很好。

使用 ASIHTTPRequest 的调用是同步工作的，它返回了我所期望的，但是当我使用 NSOperationQueue 异步进行相同的调用时，它在 requestFinished() 中返回完全不同的响应；

任何人都可以确定它可能出错的地方吗？这可能很简单，但我已经盯着它看了好几个小时，无法确定原因。

# 网站视图控制器.m

```
- (IBAction)searchStockOfCatNum: (id) sender
{
NSAutoreleasePool *pool =  [[NSAutoreleasePool alloc] init];

if (![self queue]) {
    [self setQueue:[[[NSOperationQueue alloc] init] autorelease]];
}

for (int i = 0; i < self.ids.count; i++)
{
    currStoreID = [self.ids objectAtIndex: i];
    NSURL *url = <website removed>;
    ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
    request.userInfo = [[NSMutableDictionary alloc] initWithObjectsAndKeys:[NSString stringWithFormat:@"%d", i], @"idx", nil];

    [request setDelegate:self];
    [request setDidFinishSelector:@selector(requestFinished:)];
    [request setDidFailSelector:@selector(requestFailed:)];
    [[self queue] addOperation:request];
}

[pool release];
}

- (void)requestFinished:(ASIHTTPRequest *)request
{
     NSData *responseData = [request responseData];
     NSString *responseStr = [request responseString];
} 
```

# 网站视图控制器.h

```
@interface websiteViewController : UIViewController <UITableViewDelegate, UITableViewDataSource>
@property (strong, nonatomic) NSMutableArray *names, *ids, *stockLvls;
@property (strong, nonatomic) IBOutlet UITextField *catNum;
@property (strong, nonatomic) IBOutlet UIButton *searchBtn;
@property (strong, nonatomic) NSString *currStoreID;
@property (strong, nonatomic) NSOperationQueue *queue;

- (IBAction)searchStockOfCatNum: (id) sender; 
```

正如我所说，它使用同步调用按预期工作，但是在异步调用时我不断得到不正确的 servlet 定义。

提前致谢。

# python - 如何让 Python 看到 librt？

> ID：10341917
> 
> 赞同：4
> 
> 时间：2012-04-26T21:48:57.040
> 
> 标签：python, perforce, librt

我刚刚安装了 python-dev：

```
$ sudo apt-get install python-dev 
```

这样我就可以开始使用 P4Python。但是当我尝试导入 P4 时，我得到：

```
Traceback (most recent call last):
  File "/opt/pycharm-2.5/helpers/pycharm/utrunner.py", line 113, in <module>
    modules = [loadSource(a[0])]
  File "/opt/pycharm-2.5/helpers/pycharm/utrunner.py", line 44, in loadSource
    module = imp.load_source(moduleName, fileName)
  File "/home/nyap/proj/p4-rollback/Tools/Perforce/util/p4_rollback_unit_test.py", line 32, in <module>
    import P4
  File "/home/nyap/proj/p4-rollback/Tools/Perforce/p4python/build/lib.linux-x86_64-2.7/P4.py", line 312, in <module>
    import P4API
ImportError: /home/nyap/proj/p4-rollback/Tools/Perforce/p4python/build/lib.linux-x86_64-2.7/P4API.so: undefined symbol: clock_gettime 
```

我需要做什么才能使其正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T01:59:49.293

这里有几件事可以尝试。

*   您确定`librt.so`在您的系统上可用吗？

*   您可以尝试运行`ldd`以`/home/nyap/proj/p4-rollback/Tools/Perforce/p4python/build/lib.linux-x86_64-2.7/P4API.so`查看它想要链接的共享库。`librt`上市了吗？找到了吗？

*   您可以尝试预加载`librt`，看看是否有帮助：

    ```
    LD_PRELOAD=/path/to/librt.so python ... 
    ```

*   您可以通过设置在动态加载器中启用调试`LD_DEBUG=libs`：

    ```
    LD_PRELOAD=libs python 
    ```

    这将显示有关加载程序正在查找哪些库以及在何处找到它们的信息。

希望其中一件事会有所帮助。

# symfony - Symfony 2，覆盖包视图 (TWIG) SonataAdmin

> ID：10341921
> 
> 赞同：0
> 
> 时间：2012-04-26T21:49:10.147
> 
> 标签：symfony, twig, symfony-sonata

我想知道如何跨捆绑扩展树枝中的视图。

我正在使用**SonataAdmin bundle**，它为列表渲染提供了自己的树枝视图：

*   CRUD/base_template.html.twig

*   CRUD/base_list.html.twig（延伸到树枝之上）

    *   ...

它还有一个配置“模板/布局”，它似乎是任何视图的“包装器”（实际上不确定理解它是如何工作的）

我的应用程序有它自己的布局，因此需要 SonataAdmin 以某种方式扩展这个布局。

*我该怎么做？*

我想修改配置“模板/布局”树枝文件，使其扩展我的布局并将其内容放入一个块中。但这引发了一个内存耗尽的问题。

我是 Symfony2 的新手，这似乎是一个基本概念，但无法弄清楚如何正确地做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:37:41.033

你可以把新的树枝文件放在 /app/Resources/views

# javascript - 从 IE8 中的 iframe 外部调用 iframe 内部的函数

> ID：10341926
> 
> 赞同：-1
> 
> 时间：2012-04-26T21:49:31.020
> 
> 标签：javascript, iframe, internet-explorer-8

我在 IE8 中有一个我无法弄清楚的错误。我正在尝试从 iframe 外部调用 iframe 内部的函数。代码的结果是“对象不支持此属性或方法”。这是代码：

```
<html><head>

<script type="text/javascript">
     setTimeout(function () { 
     document.getElementById('mypage').contentWindow.MyFunction('myVar') }, 10000);

</script>

</head><body>

.....

<iframe id="mypage" src="myfile.php">

<script type="text/javascript">
     function MyFunction(myvar) {
           .....
     }
</script>

</iframe>

.....

</body></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T22:08:43.890

您的 javascript 将在 iframe 甚至已知之前执行良好，更不用说加载了。尝试将您的 javascript 添加到 iframe 的加载事件中，而不是直接调用它。您还必须在 dom 中执行此操作，以确保 iframe 已加载到 dom。

类似的东西（请原谅jQuery，但这是我所知道的）：

```
$(document).ready(function(){
    $('#mypage').load(function(){
       document.getElementById('mypage').contentWindow.MyFunction('myVar');
    });
}); 
```

最后一点，这可能需要也可能不需要（取决于您的页面，而不是其他任何东西）。如果脚本加载缓慢，或者在框架的页面加载周期中加载较晚，您可能需要 setInterval 来测试它是否已经加载。您基本上需要确保在执行创建它的 javascript 之后调用该函数。

# excel - Excel：很长的 IF($Cell=key, value) 列表的替代方案？

> ID：10341929
> 
> 赞同：0
> 
> 时间：2012-04-26T21:49:54.390
> 
> 标签：excel, arraylist, excel-formula

我的公式如下所示：

`=(IF(ISBLANK(B1),1, (IF($B1="Banana", 2.23, IF($B1="Cherry",3.5))) )*C1*A1)`

这里单元格 B1 的值是从数据验证下拉列表中提取的，与上面的示例不同，该下拉列表变得非常非常长，其中包含许多 IF 和 OR 运算符。我很快就不可能在它自己的公式中声明维持所有横幅和樱桃的关系。用大致相同的信息更新列表和公式有什么意义 - 只是为了给用户一个下拉列表：/

一种选择是我将乘数值与下拉列表一起放入，然后使用`VALUE(RIGHT(B1,LEN(B1)-FIND("x",B1))` [将其拉出](https://stackoverflow.com/questions/10337723/explode-a-cells-value-and-multiply-together-values-found-on-either-side-of-a-se#comment13316668_10337723)。但是在这种情况下，乘数是一个非常长的小数，最终用户会感到困惑，例如：“香蕉 0.000000d325001”

我看到两种可能性：

1.通过某种预处理找到一种方法来隐藏乘数在下拉菜单中向用户显示或

2.  找到一种将香蕉和樱桃关联到某种数组中的方法 Key ：不会显示在下拉菜单中的值关系。

有谁知道这可能是如何实现的——它是可行的还是只是一个受伤的世界？

感谢大家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T22:18:22.730

基本上，您只需要一张包含您的水果/价格信息的表格，然后您的查找和验证遵循该表格。

![显示 VLOOKUP 公式和数据的 Excel 电子表格的屏幕截图](../Images/8e91b59dba7ccde403a07a718202b597.png)

现在我看到你的第二条评论，问题有点棘手。我会使用命名范围。而不是使用`=VLOOKUP(B1,G$1:H$3,2,FALSE)`，使用`=VLOOKUP(B1,FruitTable,2,FALSE)`。

`FruitTable`是一个命名范围。`G1:H3`您可以通过选择，然后在编辑栏左侧的框中键入来创建命名范围`FruitTable`（在上图中，这是其中带有“C1”的框；如果您单击该框，它将让您键入一个名字）。

您也可以将这种“命名范围”技术用于您的验证菜单，除非您只想选择`G1:G3`并给它一个不同的名称，例如`FruitList`. 然后，当您设置验证时，请使用`=FruitList`Source。

现在，当您向列表中添加新项目时，您只需调整命名范围（使用公式/名称管理器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T22:17:06.290

```
=(IF(ISBLANK(B1), 1, VLOOKUP(B1,YOUR_NAMED_RANGE,2,FALSE)*C1*A1) 
```

其中 YOUR_NAMED_RANGE 是一个两列命名范围，在 Col1 中包含 Banana、Cherry 等，在 Col2 中包含乘数

# entity-framework - 如何处理实体框架架构升级

> ID：10341934
> 
> 赞同：0
> 
> 时间：2012-04-26T21:50:54.623
> 
> 标签：entity-framework, database-design

嗨，我几乎准备好将我的 Entity 框架代码第一个项目投入生产，最后一步是处理架构升级而不会丢失数据。

几个问题：

我应该将架构版本号存储在单独的表中还是 EF 将其存储在哪里？我会使用 SQL 脚本或类似的脚本来执行升级吗？Microsoft 推荐的在不丢失数据的情况下执行架构升级的方法是什么？

问候，

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T03:36:27.557

[您可以在 EF 4.3 http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-released.aspx](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-released.aspx)中使用数据迁移

# android - 无法针对系统库中的函数进行构建

> ID：10341938
> 
> 赞同：3
> 
> 时间：2012-04-26T21:51:04.903
> 
> 标签：android, android-ndk, java-native-interface, shared-libraries

我要疯了。

基本上，我正在尝试使用 NDK 访问位于 android 平台上 system/lib/ 中的共享库中的一些函数。

我尝试使用的库是 libsonivox.so。我的主要目标是从 NativeActivity 中使用它。我知道这会使事情复杂化，因为我需要在加载我自己的依赖于它的库之前（静态地）加载这个库。因此，我试图让它通过常规的 Activity 和 JNI 工作。

在活动中，我像这样加载库：

```
static {
  System.loadLibrary("sonivox");
  System.loadLibrary("native-audio-jni");
} 
```

“native-audio-jni”库来自 NDK 示例，但我正在修改它以初步尝试访问 Sonivox 函数。

无需从 libnative-audio-jni 调用 libsonivox，一切都可以正常编译。LogCat 输出中的这一行给了我希望：

```
 04-26 15:01:14.973: D/dalvikvm(691): No JNI_OnLoad found in /system/lib/libsonivox.so   
  0x412a1100, skipping init 
```

所以库被加载了。

然后我将此函数添加到 native-audio-jni.c：

```
void Java_jay_enn_eye_JNImidiActivity_createMidi(JNIEnv* env,
        jclass clazz)
{
  pLibConfig = EAS_Config();
} 
```

pLibConfig 声明如下：

```
static const S_EAS_LIB_CONFIG* pLibConfig = NULL; 
```

当它被声明时，不添加上述函数，它编译得很好。所以至少头文件是......在那里。

当我将该函数放入代码中时，这是 ndk-build 的输出：

```
 Compile thumb  : native-audio-jni <= native-audio-jni.c
  SharedLibrary  : libnative-audio-jni.so
  ./obj/local/armeabi/objs/native-audio-jni/native-audio-jni.o: In function
  `Java_jay_enn_eye_JNImidiActivity_createMidi':
  /home/anthony/Documents/eclipse/JNImidi/jni/native-audio-jni.c:202: undefined   
  reference
  to `EAS_Config'
  collect2: ld returned 1 exit status
  make: *** [obj/local/armeabi/libnative-audio-jni.so] Error 1 
```

我不确定 libnative-audio-jni 是否无法访问 libsonivox，或者我是否需要 dlsym() 或 sym() 链接 Sonivox 函数以使用它们。由于该库位于 system/lib/ 中并且不是由我提供的，因此我无法尝试其中任何一个，因此我没有完整的路径来提供这样做。

我正在考虑的另一个选择是获取 libsonivox.so，将其复制到项目中的目录中，然后更改 Android.mk 以将 lib 作为预构建的共享库包含在内。我在想也许该库需要在编译时包含在内。

**编辑：** 这是 Android.mk 文件：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := native-audio-jni
LOCAL_SRC_FILES := native-audio-jni.c
# for native audio
LOCAL_LDLIBS    += -lOpenSLES
# for logging
LOCAL_LDLIBS    += -llog
# for native asset manager
LOCAL_LDLIBS    += -landroid

include $(BUILD_SHARED_LIBRARY) 
```

这一定是哪里不对劲了。我认为在编译所有内容时都需要存在 Sonivox**库**。但是，无论我对此文件进行什么更改，该库都不会加载，这主要涉及尝试将其包含为 PREBUILT_SHARED_LIBRARY 或 PREBUILT_STATIC_LIBRARY。此外，OpenSL 的东西工作得很好。如果我只是将它包含为 -lsonivox，我希望 Sonivox 能够工作，但不是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:45:09.897

我被其他事情冲昏了头脑，但我最近找到了答案……
libsonivox.so 可以动态加载。您需要从您的 android 设备复制 .so 并将其放在 $NDK-ROOT/platforms/android-14/arch-arm/usr/lib 中，“android-14”可以是任何版本。
这样就可以对其进行编译，并且当应用程序在设备上运行时，它会使用该设备上的库。

# ios - 我怎样才能让我的转场更顺利地过渡？

> ID：10341940
> 
> 赞同：0
> 
> 时间：2012-04-26T21:51:28.063
> 
> 标签：ios, multithreading, ios5, segue

在我为 segue 方法做准备时，我在视图控制器中设置了几个属性，我正在继续：

```
 ShowPlantTVC *showPlant = [segue destinationViewController];
    [showPlant setInfoForTable:self.vegTableInfo]; 
    [showPlant setTitle:self.vegTableInfo.VegetableName]; 
```

在destinationconroller 中的viewDidLoad 方法中，我设置了一组UI 属性，以便在它被设置后显示。属性之一是图像。问题是，当segue 发生时，这个图像被打印在屏幕上，这使得segue 变得非常跳跃而不平滑。当我尝试在不显示图像的情况下进行 segue 时，这很好。我想过以某种方式使用队列和大型中央调度，但是当我尝试它时，图像根本没有显示。我对大中央调度一点也不熟悉，所以我可能做错了什么。这是我在表格视图中显示的图像：

```
- (void)viewDidLoad
{
    self.showPlantImage.image  = self.infoForTable.VegetableImage;
} 
```

我怎样才能改进segue转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:59:03.563

您需要预加载图像，以便立即显示。这里有一些示例代码：[https ://stackoverflow.com/a/10137375/434004](https://stackoverflow.com/a/10137375/434004)

# linux - GHC：奇怪条件下的分段错误

> ID：10341943
> 
> 赞同：7
> 
> 时间：2012-04-26T21:51:41.207
> 
> 标签：linux, haskell, segmentation-fault, ghc, ffi

今天我将我的开发机器从 Ubuntu 10.04 LTS 更新到 Ubuntu 12.04 LTS（或更新到 Ubuntu 12.04 LTS `ghc 6.12.1`）`ghc 7.4.1`，我在当前项目中遇到了一个非常奇怪的行为。

几个小时后，我将其简化为以下代码：

```
{-# LANGUAGE ForeignFunctionInterface #-}
module Main where

import Data.Word
import Text.Printf
import Foreign

foreign import ccall "dynamic"
   code_void :: FunPtr (IO ()) -> (IO ())

main :: IO ()
main = do
  entryPtr <- (mallocBytes 2)
  poke entryPtr (0xc390 :: Word16) -- nop (0x90); ret(0xc3) (little endian order)

  _ <- printf "entry point: 0x%08x\n" ((fromIntegral $ ptrToIntPtr entryPtr) :: Int)
  _ <- getLine -- for debugging
  code_void $ castPtrToFunPtr entryPtr
  putStrLn "welcome back" 
```

我试图在运行时生成一些代码，跳转到它，然后再回来。使用 Makefile，一切都很好：

```
$ make 
ghc --make -Wall -O2 Main.hs -o stackoverflow_segv
[1 of 1] Compiling Main             ( Main.hs, Main.o )
Linking stackoverflow_segv ...
./stackoverflow_segv
entry point: 0x098d77e0

welcome back 
```

但是，如果我直接从 shell 调用二进制文件：

```
$ ./stackoverflow_segv 
entry point: 0x092547e0

Segmentation fault (core dumped) 
```

这种行为是可重现的（幸运的是？）。

使用`gdb`，`objdump`我`/proc`发现：

```
$ gdb -q stackoverflow_segv
Reading symbols from /home/lewurm/stackoverflow/stackoverflow_segv...(no debugging symbols found)...done.
(gdb) run
Starting program: /home/lewurm/stackoverflow/stackoverflow_segv
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/i386-linux-gnu/libthread_db.so.1".
entry point: 0x080fc810 
```

在按回车之前，我切换到第二个终端：

```
$ cat /proc/`pgrep stackoverflow`/maps
[...]
08048000-080ea000 r-xp 00000000 08:01 2492678    /home/lewurm/stackoverflow/stackoverflow_segv
080ea000-080eb000 r--p 000a2000 08:01 2492678    /home/lewurm/stackoverflow/stackoverflow_segv
080eb000-080f1000 rw-p 000a3000 08:01 2492678    /home/lewurm/stackoverflow/stackoverflow_segv
080f1000-08115000 rw-p 00000000 00:00 0          [heap]
[...] 
```

又回来了：

```
<enter>
Program received signal SIGSEGV, Segmentation fault.
0x0804ce3c in s2aV_info () 
```

嘘。让我们看看这段代码做了什么：

```
$ objdump -D stackoverflow_segv | grep -C 3 804ce3c
 804ce31:       89 44 24 4c             mov    %eax,0x4c(%esp)
 804ce35:       83 ec 0c                sub    $0xc,%esp
 804ce38:       8b 44 24 4c             mov    0x4c(%esp),%eax
 804ce3c:       ff d0                   call   *%eax
 804ce3e:       83 c4 0c                add    $0xc,%esp
 804ce41:       83 ec 08                sub    $0x8,%esp
 804ce44:       8b 44 24 54             mov    0x54(%esp),%eax 
```

嗯，跳到`*%eax`。又是什么`%eax`？

```
 (gdb) info reg eax
 eax            0x80fc810        135251984 
```

好吧，实际上它只是代码缓冲区。查找`/proc/*/maps`告诉我们，此页面不可执行（`rw-p`对吗？）。*但是*，在`make`.

这里有什么问题？

顺便说一句，代码也可以通过[gist获得](https://gist.github.com/2503293)

编辑：[ghc 错误报告](http://hackage.haskell.org/trac/ghc/ticket/6059)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:49:07.280

一个临时解决方案是使用`mprotect(3)`并将内存区域显式设置为可执行文件。`mprotect(3)`需要对齐的内存块，因此`memalign(3)`是必需的。

```
{-# LANGUAGE ForeignFunctionInterface #-}
module Main where

import Data.Word
import Text.Printf
import Foreign
import Foreign.C.Types

foreign import ccall "dynamic"
   code_void :: FunPtr (IO ()) -> (IO ())

foreign import ccall "static sys/mman.h"
  mprotect :: CUInt -> CUInt -> Int -> IO ()

foreign import ccall "static stdlib.h"
  memalign :: CUInt -> CUInt -> IO (Ptr a)

main :: IO ()
main = do
  entryPtr <- memalign 0x1000 0x2
  poke entryPtr (0xc390 :: Word16) -- nop (0x90); ret(0xc3) (little endian order)
  let i_entry = (fromIntegral $ ptrToIntPtr entryPtr) :: Int
  -- 0x7 = PROT_{READ,WRITE,EXEC}
  mprotect (fromIntegral i_entry) 2 0x7

  _ <- printf "entry point: 0x%08x\n" i_entry
  _ <- getLine -- for debugging
  code_void $ castPtrToFunPtr entryPtr
  putStrLn "welcome back" 
```

# jasper-reports - 带有 Pojos 列表或集合的 Jasper 报告

> ID：10341946
> 
> 赞同：2
> 
> 时间：2012-04-26T21:52:11.783
> 
> 标签：jasper-reports

这个问题是关于 Jasper Reports 的。

假设我想用`JRBeanCollectionDataSource`这样的方式创建一个 Jasper 报告......

```
jasperPrint = JasperFillManager.fillReport(JRLoader.getInputStream(fileName), parameters, new JRBeanCollectionDataSource(aList)); 
```

并假设我正在使用的 PoJo 具有 List 类型的属性。

我怎样才能访问

1.  此列表中的各个项目，
2.  如果这个项目本身是一个 Pojo 访问它在 Jasper 报告 XML 文件中的属性。

例如在 Jasper XML 文件中：

```
...field name="?????" class="java.lang.String" ... 
```

谢谢你的帮助 ...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T23:17:40.667

如果您的数据源具有 List 类型的字段（更一般地，java.util.Collection 类型），那么您可以使用 Table 或 List 或 Subreport 组件来遍历它们。使用其中一个元素并像这样设置其数据源：

```
new net.sf.jasperreports.engine.data.JRMapCollectionDataSource($F{myListField}) 
```

您还可以使用静态方法添加自己的帮助程序类来适当地处理这些字段。

MongoDB经常出现这种情况。我在 JasperReports 中写了一篇关于[Collections](http://mdahlman.wordpress.com/2012/02/03/collections-in-reports-on-mongodb/)的文章。它使用 MongoDB 作为数据源……但它同样适用于您的 POJO 数据源。

# tomcat - 如何在 Tomcat 中设置每个 webapp 不同的代理？

> ID：10341948
> 
> 赞同：0
> 
> 时间：2012-04-26T21:52:19.643
> 
> 标签：tomcat, proxy, web-applications

我目前可以通过向 catalina.bat 添加 -D 选项在全局级别为 Tomcat 设置代理。但是，我希望能够只为其中一个 webapps 设置代理，而让其他 webapps 不被代理。

从查看文档看来，我应该能够在 meta-inf 中的 context.xml 文件中添加参数，但我还没有设法让它工作；有这方面的指南吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T00:15:51.590

您必须编写 webapp 才能使用`java.net.Proxy`和朋友。-D 技术适用于整个 JVM。

# iphone - 隐藏在 UITextField (ios) 中的插入符号

> ID：10341953
> 
> 赞同：1
> 
> 时间：2012-04-26T21:52:29.537
> 
> 标签：iphone, uitextfield

我有一个简单的应用程序，它有几个屏幕，上面有按钮和 uitextfields 之类的东西。它是一个基于导航的应用程序。但是，经过一段时间后，我在编辑 uitextfields 时看不到插入符号。编辑工作，但我看不到插入符号（所以我看不到我正在编辑的内容）。可能是什么问题？我在 iPhone 4S (ios 5.1) 和 iPhone 4 (ios 4.3.3) 上看到了这种行为，但是在 4.3.3 上显示警报时，插入符号随后显示在下一个 uitextfield 上；在 5.1 上不再显示插入符号。

编辑：填写文本字段后，应用程序通过显示 MFMessageComposeViewController (presentModalViewController) 发送 SMS。发送 SMS 时，在 messageComposeViewController 中我会显示一条警报，说“您的消息已发送，等等”。然后做dismissModalViewControllerAnimated。当不显示警报时，文本字段工作正常（插入符号可见）；显示警报时，插入*符号*在文本字段中不再可见。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:46:07.277

What I did at last is to replace the alert by a regular (navigation) view controller, because I could not make it work; there was even no response to this problem on Apple's developer forum.

# python - lxml 和 标签

> ID：10341954
> 
> 赞同：5
> 
> 时间：2012-04-26T21:52:32.077
> 
> 标签：python, html, lxml, wbr

默认情况下，lxml 不理解 wbr 标签，用于在长词中添加分词。它将其`<wbr></wbr>`格式化为应该简单地格式化为`<wbr>`，类似于 br 标记。

如何将此行为添加到 lxml？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T07:04:59.170

实际上，修补 libxml2 并不难（本演练是在 Ubuntu 11.04 上使用 Python 2.7.3 完成的）

首先定义一个测试程序`wbr_test.py`：

```
from lxml import etree
from cStringIO import StringIO

wbr_html = """\
<html>
  <head>
    <title>wbr test</title>
  </head>
<body>
  Test for a breakable<wbr>word implemenation change
</body>
</html>
"""

parser = etree.HTMLParser()
tree   = etree.parse(StringIO(wbr_html), parser)

result = etree.tostring(tree.getroot(),
                         pretty_print=True, method="html")
if result.split() != wbr_html.split(): # split, as we are not interested in whitespace differences
    print(result)
    print("not ok")
else:
    print("OK") 
```

通过运行确保它失败`python wbr_test.py`。它应该插入一个`<\wbr>`before `<\body>`，并在最后打印`not ok`。

下载、解压和编译`libxml2`：

```
wget ftp://xmlsoft.org/libxml2/libxml2-2.8.0.tar.gz
tar xvf libxml2-2.8.0.tar.gz 
cd libxml2-2.8.0/
./configure --prefix=/usr
make -j8  # adjust number to match your number of cores 
```

安装并安装 python libxml2 绑定：

```
sudo make install
cd to_python_bindings
sudo python setup.py install 
```

再次测试你的`wbr_test.py`，以确保它在最新的 libxml2 版本中失败。

`HTMLparser.c`首先制作一个例如 in的副本`/var/tmp`。

现在在 libxml2 源代码的顶层编辑文件 HTMLparser.c。搜索单词`forced`（仅出现一次）。您将处于`<br>`标签定义处。复制从刚刚找到的行开始的三行。最合适的插入点就在结尾之前（在 的定义之后`<var>`）。要在表格中正确使用最后一个逗号，请在带有 的一行之前插入三行，而`'}'`不是带有 的一行`'};'`。

在新插入的代码中替换`br`为`wbr`并更改`DECL clear_attrs`为`NULL`（假设新标签没有不推荐使用的属性）。

结果应与`/var/tmp`( `diff -u HTMLparser.c /var/tmp`) 中的版本不同，如下所示：

```
@@ -1039,6 +1039,9 @@
 },
 { "var",   0, 0, 0, 0, 0, 0, 1, "instance of a variable or program argument",
DECL html_inline, NULL, DECL html_attrs, NULL, NULL
+},
+{ "wbr",   0, 2, 2, 1, 0, 0, 1, "possible line break ",
+   EMPTY , NULL , DECL core_attrs, NULL , NULL
 }
 }; 
```

制作和安装：

```
make && sudo make install 
```

`wbr_test.py`再次测试你的。应该显示`OK`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-23T22:04:30.587

好消息！这是完全不可能的。HTML 标记名称直接[烘焙到`libxml2`](http://svn.gnome.org/viewvc/libxml2/trunk/HTMLparser.c?view=markup#l473).

并`lxml.html.html5parser`包含几个严重的错误，其修复尚未发布。

但见鬼，让我们在本地修复它们，看看会发生什么。

```
>>> lxml.html.tostring(lxml.html.html5parser.fromstring('<p>hello<wbr>world!</p>'), encoding=unicode)
u'<html:p xmlns:html="http://www.w3.org/1999/xhtml">hello<html:wbr></html:wbr>world!</html:p>' 
```

如此接近，却又如此遥远。至少结构是正确的。

再试一次：

```
>>> lxml.html.tostring(lxml.html.html5parser.fromstring('<p>hello<wbr>world!</p>', parser=lxml.html.html5parser.HTMLParser(namespaceHTMLElements=False)), encoding=unicode)
u'<p>hello<wbr></wbr>world!</p>' 
```

韦尔普。

至少没有*错。*

我想我可能会针对 lxml 和 libxml2 提交一些错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T22:19:43.827

由于`<wbr>`仅存在于 HTML5 中，我怀疑正确的做法是使用`lxml.html.html5parser`.

除此之外，空标签列表是在常规 Python 代码中定义的，因此您总是可以对其进行猴子补丁；见[lxml.html.defs.empty_tags](https://github.com/lxml/lxml/blob/master/src/lxml/html/defs.py)。补丁是受欢迎的，我敢肯定。:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T19:57:23.310

作为一个快速修复，为什么不使用`replace`字符串的方法来删除关闭标签呢？

```
>>> t = 'Thisisa<wbr></wbr>test'
>>> t.replace('</wbr>', '')
'Thisisa<wbr>test' 
```

# c# - 如何从类库/文件中关闭调用窗口窗体？需要访问调用表单并执行 .close()

> ID：10341955
> 
> 赞同：0
> 
> 时间：2012-04-26T21:52:32.790
> 
> 标签：c#, .net, winforms, form-control

我的 winforms 项目中有 3 个表单，它们都有一个按钮，可以触发打开 Form2 的相同代码。我需要通过将此代码放在同一个项目内的类文件中或将其放入单独的类库中来集中代码。现在代码在下面的相同形式中：

```
frm1 entryform = (frm1)Application.OpenForms["frm1"];

if (entryform == null)
{
    entryform = new frmMainMenu();
}
entryform.StartPosition = FormStartPosition.Manual;
entryform.Location = this.Location;
entryform.Show();

this.close(); 
```

当我将此代码从 Form1、Form2、Form3 移动到通用表单时，我无法访问调用表单来替换行`this.close();` 是否有类似 Method.CallingForm.Close() 的属性或 c# 中的其他内容？请帮忙

我不想将表单作为参数传递。表格太重，无法通过。还有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T03:01:43.947

您不必担心将表单作为参数传递，因为它很重。

表单是一种引用类型，不会导致任何性能下降。

如果您想考虑最佳实践，您应该让您的中心类在需要关闭表单时触发一个事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T03:03:18.710

将表单作为参数传递。

表格不要太重，因为您传递的只是对表格的引用，而不是整个表格。

# python - 环绕检测

> ID：10341962
> 
> 赞同：0
> 
> 时间：2012-04-26T21:53:18.550
> 
> 标签：python, overflow

假设您有一个按升序排列的值列表，除了在某些时候它们会环绕

```
2, 4, 6, 9, 12, 15, 34, -2, 1, 4, 5, 7, ... 
```

知道周期是 2^n，对于 n 的某个值，是否有任何内置函数，或者重新排列上述值的快速方法，以便所有数字都按升序排列（假设这些数字是可能的)?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T21:56:23.423

`list.sort()`可能足够快。在 CPython 中，它是使用[Timsort](http://en.wikipedia.org/wiki/Timsort)实现的，它应该以优于平均水平的方式处理像你这样的情况（第一阶段是寻找已经排序的数字运行，就像你的情况一样）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T00:20:34.303

预期的输出将有助于理解您的问题。我猜到了与其他人不同的理想解决方案。也许其他人可以为这种解释找到更简洁的解决方案。

输出将是 2, 4, 6, 9, 12, 15, 34, 62, 65, 68, 69, ... 即从 -2 开始的所有值都向上移动 64

首先，我猜测周期大小为 64。这可以通过例如查看相邻元素的最负差异并四舍五入到 2 的幂来完成。如果您在开始时没有所有可用的值，这可能是不可能的。

```
period = 64

def unwrap(seq):
    it = iter(seq)
    try:
        lastitem = next(it)
    except StopIteration:
        return
    yield lastitem
    shift = 0
    for item in it: 
        if item < lastitem:
            shift += period
        yield item + shift
        lastitem = item 
```

如果您需要列表而不是生成器，则可以使用

```
result = list(unwrap(original_list)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T21:56:31.843

如果您希望*所有*值都按升序排列，那么这是一种：

```
>>> sorted([2, 4, 6, 9, 12, 15, 34, -2, 1, 4, 5, 7])
[-2, 1, 2, 4, 5, 6, 7, 9, 12, 15, 34] 
```

您是在尝试根据连续数字间隔包装的知识来优化排序，还是提出不同的问题？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T21:57:21.730

```
>>> sorted([5, 2, 3, 1, 4])
[1, 2, 3, 4, 5]

>>> a = [5, 2, 3, 1, 4]
>>> a.sort() 
```

# r - 使用 rgl plot3d 在 R 中绘制 3d 散点图 - 每个数据点的大小不同？

> ID：10341963
> 
> 赞同：4
> 
> 时间：2012-04-26T21:53:21.097
> 
> 标签：r, scatter-plot, rgl

我在用

```
plot3d(x,y,z, col=test$color, size=4) 
```

用 R 绘制我的数据集的 3d 散点图，但`rgl`参数`size`只需要一种大小。

是否可以为每个数据点设置不同的大小，或者使用另一个库，或者是否有简单的解决方法？

谢谢你的想法！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T00:27:57.910

这是与 Etienne 建议的相同思路的解决方法。关键思想是设置绘图，然后使用单独的调用来`points3d()`绘制每个尺寸类中的点。

```
# Break data.frame into a list of data.frames, each to be plotted 
# with points of a different size
size <- as.numeric(cut(iris$Petal.Width, 7))
irisList <- split(iris, size)

# Setup the plot
with(iris, plot3d(Sepal.Length, Sepal.Width, Petal.Length, col=Species, size=0))

# Use a separate call to points3d() to plot points of each size
for(i in seq_along(irisList)) {
    with(irisList[[i]], points3d(Sepal.Length, Sepal.Width, 
                                 Petal.Length, col=Species, size=i))
} 
```

* * *

（FWIW，似乎没有办法`plot3d()`直接做到这一点。问题是`plot3d()`使用辅助函数`material3d()`来设置点大小，如下所示，`material3d()`只想采用单个数值。）

```
material3d(size = 1:7)
# Error in rgl.numeric(size) : size must be a single numeric value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-21T14:57:08.567

以防万一其他人在几年后偶然发现，现在完全可以将变量传递给 size 参数，例如`with(test, plot3d(x,y,z, col=test$color, size=test$size))`.

实际上，您可以对输入的数据进行操作，它也可以工作。我成功地用类似的东西制作了一个基本的尺寸比`size = x/(max(x,na.rm=TRUE)-min(x,na.rm=TRUE))`。

虽然确实`material3d`只接受单个数值，但应该事先评估在 with 语句中输入大小的表达式或变量，因此`material3d`每个绘图点仍然应该只看到一个大小值。只是提醒一下，因为我花了一个小时左右摆弄这里发布的解决方法，然后才意识到这是不必要的。

# java - 如何仅使用类名加载类

> ID：10341967
> 
> 赞同：4
> 
> 时间：2012-04-26T21:53:47.713
> 
> 标签：java, class, classloader, dynamic-class-loaders

我需要使用 Java 的 Class.forName("") 来加载我的一个类。问题是我需要通过只指定类名而不是完全限定的类名来加载类。

1.  例如，这可行，但不符合我的要求：

    Class.forName("reflection.Person");

2.  这就是我需要但不起作用的东西：

    Class.forName("人");

任何人都知道如何让＃2工作？我只需要使用简单的类名。任何第 3 方工具将遍历我的文件夹结构以检查该类是否存在？这将被部署为一个可执行的 JAR。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T22:08:48.253

您应该[获取 classpath 上的所有类，对](https://stackoverflow.com/questions/3222638/get-all-classes-in-classpath)它们进行迭代并查看哪个类的简单名称与所需的名称相同。然后`Class.forName(..)`使用完全限定名称。请注意，可以在多个包中使用相同的名称。

您最好[寻找实现接口](https://stackoverflow.com/questions/435890/find-java-classes-implementing-an-interface)或[使用特定注释进行注释](http://scannotation.sourceforge.net/)的类。依赖简单的名称可能非常棘手，尤其是当您的类路径增长时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T22:16:19.103

您需要了解像“Person”这样的类名的含义取决于它在源代码中出现的位置。Java 编译器的便利之处在于不需要到处都使用完全限定的类名。但是在运行时，在字节码中，所有类名都是完全限定的。

# ios - GKSession - 在应用程序之间切换并维护会话

> ID：10341968
> 
> 赞同：1
> 
> 时间：2012-04-26T21:53:50.563
> 
> 标签：ios, gamekit, gksession

我在两个应用程序之间有一个 GKSession。一个是服务器，另一个是客户端。服务器使客户端应用程序使用 urlscheme 命令启动另一个应用程序。

我希望发生的是，当客户端应用程序关闭时，会话结束，另一个应用程序打开，我们开始一个新的会话。

实际发生的事情对我来说有点神秘。基本上，新应用程序打开并开始与服务器通信。大量数据包在两者之间来回发送......但在短时间内（3-5 秒）后，GKPeerStateDisconnected 情况发生在 session:peer:didChangeState: 与之前连接的应用程序中。这将停止应用程序之间的所有通信。

我最初为此使用了对等选择器，它工作得很好（除了你需要按下很多手动按钮）。现在我需要删除对等选择器并让这个过程自动发生。

```
-(void)session:(GKSession *)session 
          peer:(NSString *)peerID 
didChangeState:(GKPeerConnectionState)state
{
    BOOL peerChanged = NO;
    NSLog(@"peer:%@ didChangeState: %d", peerID, state);

switch(state) {
    case GKPeerStateAvailable:
            [session connectToPeer:peerID withTimeout:1000];
            peerChanged = YES;
        break;

    case GKPeerStateUnavailable:
            peerChanged = YES;
        break;

    case GKPeerStateConnected:
        [self.peerList addObject:peerID];
        [self setupConnectionWithPeer:peerID toSession:session];
        break;

    case GKPeerStateDisconnected:        
        [self.peerList removeObject:peerID];
        if(self.peerList.count == 0) self.isConnected = NO;
        break;

    }
    NSLog(@"Number of peers: %d", self.peerList.count);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:06:36.723

这听起来像是对多任务处理的限制。Peer Picker 可能具有额外的系统级访问权限，允许您的后台应用程序继续与服务器通信。如果不使用该代码，您的后台应用程序将在传统的 3-5 秒内完成操作，然后进入后台状态，断开与服务器的连接。

# ruby - 线程~广度优先处理

> ID：10341970
> 
> 赞同：1
> 
> 时间：2012-04-26T21:54:13.853
> 
> 标签：ruby, multithreading, breadth-first-search

我有一个执行广度优先搜索资源的算法：

```
def crawl(starting_node)
  items=[starting_node]
  until items.empty?
    item = items.shift
    kids = item.slow_network_action # takes seconds
    kids.each{ |kid| items << kid }
  end
end 
```

我想使用一些并发线程来并行化 slow_network_action。
**这样做的合理方法是什么？**

这是一种*有效*的技术，但我觉得肯定不是正确的方法：

```
def crawl(starting_node)
  mutex = Mutex.new
  items = [starting_node]
  4.times.map{
    loop do
      unless item=mutex.synchronize{ items.shift }
        sleep LONGER_THAN_LONGEST_NETWORK_ACTION
        break unless item=mutex.synchronize{ items.shift }
      end
      kids = item.slow_network_action
      mutex.synchronize{
        kids.each{ |kid| items << kid }
      }
    end
  }.each(&:join)
end 
```

*我想做一些事情，比如让线程在等待将项目添加到队列时实际休眠，在添加项目时唤醒，并在每个人都在等待时让所有线程退出，而没有添加任何线程。*

* * *

这个替代代码几乎可以工作，但是对于可能（并且确实）发生的死锁，以及完全缺乏适当的退出策略：

```
require 'thread'
def crawl(starting_node)
  items = Queue.new
  items << starting_node
  4.times.map{
    while item=items.shift
      kids = item.slow_network_action
      kids.each{ |kid| items << kid }
    end
  }.each(&:join)
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T21:35:07.630

这应该为您指明正确的方向：

```
require 'monitor'

NUM_THREADS = 4

def crawl(starting_node)
  items = [starting_node]
  items.extend MonitorMixin
  item_cond = items.new_cond

  threads = []
  working_threads = 0
  finished = false

  NUM_THREADS.times do
    items.synchronize do
      working_threads += 1
    end
    threads << Thread.new do
      item = nil
      kids = []
      loop do
        items.synchronize do

          #add any new items to array
          items.concat kids

          if (items.empty? && working_threads == 1)
            #all other threads are waiting, and there's no more items
            #to process, so we must be done
            finished = true
          end

          #wake up all waiting threads, either to finish or do more work
          #watch out for thundering herds
          item_cond.broadcast unless (items.empty? && !finished)

          #wait, but first decrement count of working threads
          #so we can determine when to finish
          working_threads -= 1
          item_cond.wait_while { items.empty? && !finished}
          Thread.exit if finished
          working_threads += 1

          #get next item
          item = items.shift
        end

        kids = item.slow_network_action
      end

    end
  end

  threads.each(&:join)
end 
```

这使`items`阵列成为[监视器](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/monitor/rdoc/Monitor.html)，并通过它进行任何同步，以及[`ConditionVariable`](http://ruby-doc.org/stdlib-1.9.3/libdoc/monitor/rdoc/MonitorMixin/ConditionVariable.html)从监视器创建的关联。

这类似于 a[`Queue`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/thread/rdoc/Queue.html)内部的工作方式，除了它还会检查所有工作何时完成（这实际上增加了一些复杂性）。

线程主循环以一个空`kids`数组开始，该数组被添加到其中`items`以避免在循环中需要两个单独的同步块，以及随之而来的竞争条件。

请注意，这[`broadcast`](http://ruby-doc.org/stdlib-1.9.3/libdoc/monitor/rdoc/MonitorMixin/ConditionVariable.html#method-i-broadcast)会导致*所有*等待线程唤醒，并可能导致[雷鸣般的羊群](http://en.wikipedia.org/wiki/Thundering_herd_problem)。我不认为这应该在这里造成任何问题。另一种方法是一次添加一个元素`kids`，并调用[`signal`](http://ruby-doc.org/stdlib-1.9.3/libdoc/monitor/rdoc/MonitorMixin/ConditionVariable.html#method-i-signal)每个元素。当所有工作都完成时，这会增加处理案件的复杂性。

# python - 骰子游戏与字典

> ID：10341977
> 
> 赞同：0
> 
> 时间：2012-04-26T21:55:03.493
> 
> 标签：python, python-2.7

这是一个猪骰子游戏，我使用了 2 种策略，目标是达到 63 分。

所以我得到了一个函数`play_games(n_games, strategy_a, strategy_b)`。（看代码的底部）这个函数必须玩n_games，在这个玩家A必须使用strategy_a，玩家B必须使用strategy_b（两个参数都是字符串）。并且该函数必须返回带有键“A”、“B”和“D”的字典，其中的值表示 A 和 B 获胜的频率以及平局的次数。

我已经试了两天了，什么都想不出来，好想学这个。

这是我到目前为止得到的：

```
from random import randint

def one_round(total, strategy):
    round = 0
    while True:
        value = randint(1,6)
        round = round + value
        if Value == 1:
            round = 0
            break
        if round + total >= 63:
            break
        if strategy == 'Sum13':
            if round >= 13:
                break
        if strategy == 'Sum6':
            if round >= 6:
                break

    return round

def one_game(strategy_a, strategy_b):
    total_a = 0
    total_b = 0
    while True:
        round_a = one_round(total_a, strategy_a)
        round_b = one_round(total_b, strategy_b)
        total_a += round_a
        total_b += round_b
        while total_a >= 63 or total_b >=63:
            break
    if total_a >= 63:
        return 'A'
    elif total_b >= 63:
        return 'B'
    elif total_a == total_b:
        return 'D'

def play_games(n_games, strategy_a, strategy_b):
    n_games = 100
    for i in range(n_games): 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T22:44:21.323

它现在应该可以工作了：

```
#I made one change in your original part.

from random import randint

def one_round(total, strategy):
    round = 0
    while True:
        value = randint(1,6)
        round = round + value
        if value == 1:
            round = 0
            break
        if round + total >= 63:
            break
        if strategy == 'Sum13':
            if round >= 13:
                break
        if strategy == 'Sum6':
            if round >= 6:
                break

    return round

def one_game(strategy_a, strategy_b):
    total_a = 0
    total_b = 0
    while True:
        round_a = one_round(total_a, strategy_a)
        round_b = one_round(total_b, strategy_b)
        total_a += round_a
        total_b += round_b
        if total_a >= 63 or total_b >=63: # while to if here
            break
    if total_a >= 63:
        return 'A'
    elif total_b >= 63:
        return 'B'
    elif total_a == total_b:
        return 'D'

#The additional Part

from collections import defaultdict

def play_games(n_games, strategy_a, strategy_b):
    dicto = defaultdict(int)
    for i in xrange(n_games):
        dicto[one_game(strategy_a, strategy_b)] += 1
    return dicto 
```

结果：

```
>>> play_games(1000,'sum6','sum13')
defaultdict(<type 'int'>, {'A': 495, 'B': 505}) 
```

我不认为游戏的设计允许'D'发生，所以你最好放弃它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T22:28:38.480

只是为了根据您到目前为止所拥有的内容概述一般步骤，在 play_games 的第一行中，我将使用以下内容定义您的 dict：

```
resultsDict = {A:0, B:0, D:0} 
```

play_games 的最后一行当然是

```
return resultsDict 
```

在你的 for 循环中，你会有类似的东西：

```
resultsDict(one_game(stratA, stratB)) += 1 #increase the count for the victor or draw 
```

目前，您在 play_games 中的第一行设置为 n_games，如果您传入该值，这没有多大意义。您要么只想将其定义为本地值而不传递它，要么使用传递的值。第二个可能是更通用和更好的策略，但这取决于你的班级。

当然，您需要在某个地方实际调用 play_games，并为 n_games、strategy_a 和 strategy_b 设置适当的值。除非这是一个从其他地方调用的库，在这种情况下，“其他地方”应该调用它。如果此脚本直接运行，您可以同时执行这两种操作的方法是添加对 play_games 的条件调用，这样在导入时它不会自动进行调用。这看起来像：

```
if __name__ == "__main__":
     play_games(1000, 'Sum13', 'Sum6') 
```

我注意到的一件事是您的函数没有注释和文档字符串。作为一般规则，我喜欢有文化的编程风格，喜欢太多而不是太少的评论。由于这是家庭作业，这是否重要取决于评分的完成方式。

**编辑：**在我看来，您可以通过为策略设置一个保持值而不是当前高度具体的 Sum13 和 Sum6 策略来进行设置。这将使它更通用，同时使代码更短。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T22:28:47.447

简单的方法：

```
results = {}
for i in range(n_games):
    winner = one_game(...)
    if not winner in results:
        results[winner] = 0
    results[winner] += 1 
```

优雅的方式：

```
collections.Counter(one_game(...) for _ in range(n_games)) 
```

另一种不太优雅（但更通用）的方式：

```
results = collections.defaultdict(lambda:0)
for i in range(n_games):
    winner = one_game(...)
    results[winner] += 1 
```

# visual-studio - 在 Visual Studio 11 中运行有序测试

> ID：10341978
> 
> 赞同：1
> 
> 时间：2012-04-26T21:55:09.753
> 
> 标签：visual-studio, unit-testing, visual-studio-2012, ordered-test

我无法在 Visual Studio 11 中运行有序测试。正如[博文中所指出的](http://blogs.msdn.com/b/rubel/archive/2012/03/17/visual-studio-11-beta-changes-in-web-performance-test-load-test-workflow.aspx)，测试视图窗口已在该特定版本中被删除，因此我无法在任何地方加载查看我的测试。

我决定做一些研究，特别是偶然发现了[一种特定的资源](http://msdn.microsoft.com/en-us/library/dd286704%28v=vs.110%29.aspx)。但是，该页面上的[说明](http://msdn.microsoft.com/en-us/library/ms182470%28v=vs.110%29.aspx)似乎对我不起作用。我该怎么办？

当我打开测试资源管理器窗口时，我看不到任何测试。当我点击“全部运行”时，没有任何运行。我什至看不到我的个人单元测试。

如果我右键单击我的测试项目并点击“运行单元测试”，一切正常。

我安装了 ReSharper EAP 7，但我不确定这是否真的有很大的不同。

应该注意的是，通过测试资源管理器单击“运行所有测试”时，我在输出窗口中看到以下内容。![在此处输入图像描述](../Images/4c81f81a57934b3232bf7ec373b6c743.png)

对于那些看不懂那个小文本的人，这里是基本输出。

> ------ 发现测试开始 ------
> 
> 无法检查模型兼容性，因为数据库不包含模型元数据。确保已将 IncludeMetadataConvention 添加到 DbModelBuilder 约定中。
> 
> ========== 发现测试已完成：找到 26 个 (00:00:03.2335529) ==========
> 
> ------ 运行测试开始 ------
> 
> 无法检查模型兼容性，因为数据库不包含模型元数据。确保已将 IncludeMetadataConvention 添加到 DbModelBuilder 约定中。
> 
> ========== 运行测试完成：0 次运行 (00:00:00.0979866) ==========

## 编辑

似乎如果我创建一个新解决方案并将我的测试项目添加到该解决方案中，它运行得很好。它不会编译，但可以在单元测试资源管理器中找到测试。

但是，在原始解决方案中，如果我卸载除全新单元测试项目之外的每个项目，它甚至不会检测到这些测试方法。

制定新的解决方案对我来说不是一个选择。我在该解决方案中有如此多的依赖项和项目，如果再次嵌入它们将是一种耻辱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T07:55:53.733

我通过创建一个新解决方案并将所有现有项目再次添加到该解决方案来解决了这个问题。很奇怪。

# php - 创建 PHP 日历

> ID：10341982
> 
> 赞同：-9
> 
> 时间：2012-04-26T21:55:57.293
> 
> 标签：php, calendar

我正在尝试创建一个日历来显示要举行或已经举行的活动。我正在计划一个全屏日历，以便可以在日期旁边显示事件。有人可以告诉我如何在正确的列和行下获取日期。

我不想使用任何现成的库。我想从头开始创建一个日历。我无法理解如何将日期放入日历表中各自的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T22:02:48.277

1) 从数据库中获取行，按日期排序

2）选择开始的日期

3）选择你想结束的日期

4) 对于开始和结束之间的每一天，检查数据库中的数据是否有记录并输出该日期是否存在。

*提示：*您可以使用`getdate($timestamp);`获取包含有关您的时间戳的分隔日期信息的数组。(http://www.php.net/manual/en/function.getdate.php)

有多种方法可以做到这一点，具体取决于框架、所需的功能、所需的布局等。

# jersey - RESTful Web 服务经验法则

> ID：10341983
> 
> 赞同：1
> 
> 时间：2012-04-26T21:56:03.900
> 
> 标签：jersey, jax-rs, restful-architecture

我正在创建一些生成和使用 XML 的 Web 服务。计划是在带有 JAXB 的 Tomcat 6.x 上使用 Jersey 1.x。

我需要找出的是；创建这些服务时有什么经验法则可以遵循吗？执行 PUT 或 GET 时的常见做法是什么？消费者是否期望返回响应、状态或对象？

我一直在阅读和查看所有这些场景的示例，但每个作者/博主以及如何似乎以不同的方式处理这些相同的场景。

那些已经这样做了一段时间的人有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T05:09:37.933

每个人似乎都同意或不同意的一些事情：

1.  无效请求返回 HTTP 400 代码。500 只应用于“意外异常”。
2.  虽然没有明确的规范，但请尝试使用[Clean URLs](http://en.wikipedia.org/wiki/Clean_URL)。除了提到的好处之外，如果您需要，它还可以更轻松地设置反向代理。
3.  在 HTTP 方法上，虽然似乎对 GET 和 DELETE 达成了一致，但关于 PUT 或 POST 中的哪个创建或更新存在争议。请参阅[此讨论](https://stackoverflow.com/questions/630453/put-vs-post-in-rest)。最后，一些代理或 Web 服务器（IIS 任何人）并不总是容易处理除 GET 和 POST 之外的任何事情，因此您必须求助于额外的`X-HTTP-Method-Override`标头来指定您的实际方法。
4.  您应该尊重 Accept 标头并返回所请求类型的内容。文本类型（XML、JSON、纯文本和 HTML）是最常见的，但您可能不想支持所有这些。

REST 的吸引力在于它的简单性。确保你保持这种方式。很简单，记录服务很容易，这是真正的关键，而不是您使用的是 POST 或 PUT。

# python - 转换 PIL GdkPixbuf

> ID：10341988
> 
> 赞同：5
> 
> 时间：2012-04-26T21:56:25.590
> 
> 标签：python, python-imaging-library, pygobject, gdkpixbuf

如何在 pixbuf 中转换 PIL 图像？我尝试更改许多示例但没有解决方案

```
import array
from gi.repository import GdkPixbuf

def image2pixbuf(self,im):
    arr = array.array('B', im.tostring())
    height, width = im.size
    return GdkPixbuf.Pixbuf.new_from_data(arr, GdkPixbuf.Colorspace.RGB,
                                      True, 8, width, height, width * 4) 
```

错误

```
TypeError: new_from_data () takes Exactly 9 arguments (7 given) 
```

我使用 Pygobject [https://live.gnome.org/PyGObject](https://live.gnome.org/PyGObject)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:31:10.753

这就是我在 PyGtk 中的做法，也许这仍然有效（我在 pygi-convert'ed 之后复制代码）：

```
import Image
import StringIO
from gi.repository import GdkPixbuf

def thumbnail_image(self, image):
    """Creates a thumbnail GdkPixbuf of given image"""

    # Create thumbnail
    img = Image.open(image)
    img.thumbnail((200, 300), Image.ANTIALIAS)

    # Convert to GdkPixbuf
    if img.mode != 'RGB':          # Fix IOError: cannot write mode P as PPM
        img = img.convert('RGB')
    buff = StringIO.StringIO()
    img.save(buff, 'ppm')
    contents = buff.getvalue()
    buff.close()
    loader = GdkPixbuf.PixbufLoader('pnm')
    loader.write(contents, len(contents))
    pixbuf = loader.get_pixbuf()
    loader.close()

    return pixbuf 
```

亲切的问候

* * *

编辑：好的，这似乎正在工作......我只是非常讨厌 PyGObject 糟糕的 C 移植 API（直到现在......）。

代码（**test.py**）：

```
import Image
import StringIO
from gi.repository import Gtk, GdkPixbuf
from os.path import abspath, dirname, join

WHERE_AM_I = abspath(dirname(__file__))

class MyApp(object):

    def __init__(self):
        # Build GUI
        self.builder = Gtk.Builder()
        self.glade_file = join(WHERE_AM_I, 'test.glade')
        self.builder.add_from_file(self.glade_file)

        # Get objects
        go = self.builder.get_object
        self.window = go('window')
        self.image = go('image')

        # Load image
        path = join(WHERE_AM_I, 'logo.png')
        thumbnail = self.thumbnail_image(path)
        self.image.set_from_pixbuf(thumbnail)

        # Connect signals
        self.builder.connect_signals(self)

        # Everything is ready
        self.window.show()

    def main_quit(self, widget):
        Gtk.main_quit()

    def thumbnail_image(self, image):
        """Creates a thumbnail GdkPixbuf of given image"""

        # Create thumbnail
        img = Image.open(image)
        img.thumbnail((200, 300), Image.ANTIALIAS)

        # Convert to GdkPixbuf
        if img.mode != 'RGB':          # Fix IOError: cannot write mode P as PPM
            img = img.convert('RGB')
        buff = StringIO.StringIO()
        img.save(buff, 'ppm')
        contents = buff.getvalue()
        buff.close()
        loader = GdkPixbuf.PixbufLoader.new_with_type('pnm')
        loader.write(contents)
        pixbuf = loader.get_pixbuf()
        loader.close()

        return pixbuf

if __name__ == '__main__':
    gui = MyApp()
    Gtk.main() 
```

林间空地文件（**test.glade**）：

```
<?xml version="1.0" encoding="UTF-8"?>
<interface>
  <!-- interface-requires gtk+ 3.0 -->
  <object class="GtkWindow" id="window">
    <property name="can_focus">False</property>
    <property name="window_position">center-always</property>
    <property name="default_width">300</property>
    <property name="default_height">200</property>
    <signal name="destroy" handler="main_quit" swapped="no"/>
    <child>
      <object class="GtkImage" id="image">
        <property name="visible">True</property>
        <property name="can_focus">False</property>
      </object>
    </child>
  </object>
</interface> 
```

它看起来像什么：

![将 PIL Image 转换为 GdkPixbuf 的结果](../Images/a67b17fa33d696c1660431bcd27af350.png)

（欢迎改进以添加 Alpha 通道支持）

亲切的问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T07:51:49.890

我在 Gtk3 上遇到了同样的问题。[GdkPixbuf.PixbufDestroyNotify - NotImplementedError - python gtk3](https://stackoverflow.com/questions/10284465/gdkpixbuf-pixbufdestroynotify-notimplementederror-python-gtk3)

似乎有一个错误。我已经举报了。[https://bugzilla.gnome.org/show_bug.cgi?id=674691](https://bugzilla.gnome.org/show_bug.cgi?id=674691)

Gtk3 有这个错误。但是你仍然可以在 Gtk2 中做到这一点。

# xpath - selenium v erifyxpathcount 失败，对象 xx 没有方法“indexof”

> ID：10341994
> 
> 赞同：0
> 
> 时间：2012-04-26T21:56:43.233
> 
> 标签：xpath, selenium

verifyxpathcount 正在 FF 上的 Selenium IDE 上工作。但是，当使用 Selenium Server（独立）在 Chrome 甚至 FF 上运行相同的 ide 脚本时。我遇到了以下错误...

> 信息：执行：|verifyXpathCount | //div[@id='collection-3']/descendant::div[@id='work-items']/descendant::div[@class='item'] | ${FC1Count} | 错误：意外异常：对象 25 没有方法“indexOf”错误：异常详细信息：警告：currentTest.recordFailure：命令执行失败。[请在https://groups.google.com/forum/#!forum/selenium-users](https://groups.google.com/forum/#!forum/selenium-users)中搜索用户组，以获取日志窗口中的错误详细信息。错误消息是：对象 25 没有方法 'indexOf'

# android - ListView 中圆角边缘后面的颜色

> ID：10341996
> 
> 赞同：0
> 
> 时间：2012-04-26T21:56:52.460
> 
> 标签：android, listview, colors, selector

我有一个列表视图，我已经定制了列表项的圆角边缘。一切正常，除了按下时每个列表视图项目后面都有绿色。它似乎与用于原始按钮选择的颜色相同。有没有办法改变这个？

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<item android:state_pressed="true"><shape>
        <solid android:color="#FFFFFF" />

        <stroke android:width="1dp" android:color="#FFFFFF" />

        <corners android:radius="10dp" />

        <padding android:bottom="5dp" android:left="5dp" android:right="5dp" android:top="5dp" />
    </shape></item>
<item><shape>
        <gradient android:angle="270" android:endColor="#000000" android:startColor="#FFFFFF" />

        <stroke android:width="1dp" android:color="#FFFFFF" />

        <corners android:radius="10dp" />

        <padding android:bottom="5dp" android:left="5dp" android:right="5dp" android:top="5dp" />
    </shape></item> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T22:01:55.023

添加`android:cacheColorHint="#0000"`和`android:listSelector="#0000"`到您的 ListView

# javascript - 从覆盖以前的 Javascript/JSON 对象的 jQuery AJAX 调用返回 Javascript 变量

> ID：10341999
> 
> 赞同：-1
> 
> 时间：2012-04-26T21:57:10.263
> 
> 标签：javascript, jquery, json

谢谢阅读。我有一个难题，我似乎可以舔。我创建了一个基于 JSON 对象创建表行的 jQuery 插件。在这个插件中，我希望有一个具有 AJAX 调用的分页，这会产生一个具有相同变量名和不同键/值对的新 JSON 对象（我想覆盖它）。成功后，我可以提醒数据，但无法访问我正在提醒的数据中的变量。

```
var grid = { 
    "name": "test", 
    "columns":
    [
        {"name":"col1"},
        {"name":"col2"}
    ], 
    "rows":
    [
         {"name":"col1", "value":"text1"},
         {"name":"col2", "value":"text2"}
    ] 
}
$("#myDiv").makeTable(); <-- plugin that creates table based off this JSON
// if I alert grid.columns[0].name I get col1 no problem. 
```

然后我做一些jQuery的东西来循环并创建一个表，没问题......

然后我在我的 makeTable() 插件中有这段代码：

```
$.ajax({
url: 'get_json-pages.php',
type: "GET",
data: form_data, <-- my string
dataType:"script", <-- set it to script because the output is just the javascript
success: function(data) {
            alert(data); <-- alerts perfectly, looks like the same JSON above but 
            with different key/value pairs
            the alert looks like this:
            var grid = { 
                 "name": "test", 
                 "columns":
                 [
                     {"name":"col3"},
                     {"name":"col4"}
                 ], 
                 "rows":
                 [
                     {"name":"col3", "value":"text3"},
                     {"name":"col4", "value":"text4"}
                 ]  
             }

           now when I do this:
           alert(grid.columns[0].name);
           it is a blank alert?
}
}); 
```

如何使用 AJAX JSON 覆盖 JSON 对象并重新加载我的插件以显示新的数据集？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T22:10:22.057

您不应该让插件访问用户未传入的任何外部内容。如果您希望您的“插件”接受一个对象，那么您应该传递对插件的引用。

```
$("#myDiv").makeTable({data:grid}); 
```

对于分页，您可以采用两种方法之一。简单的答案是在每次分页调用时重新运行您的插件。

```
$.ajax({
success: function(data) {    
    var grid //construct new object from data 
    $("#myDiv").makeTable({data:grid});
}
}); 
```

或者您可以让您的插件接受“数据源”。根据您对 ajax 源的含义，这可能是微不足道的（一次获取所有数据），也可能是棘手的（更改您的请求以一次仅获取每个“页面”数据）。