# StackOverflow 问答 12012000-12012999

# android - 定义设备是否支持视频格式

> ID：12012004
> 
> 赞同：0
> 
> 时间：2012-08-17T19:27:14.883
> 
> 标签：android

我需要定义设备是否可以播放视频文件。到目前为止，我已经注册[了一个错误处理程序](http://developer.android.com/reference/android/media/MediaPlayer.html#setOnErrorListener%28android.media.MediaPlayer.OnErrorListener%29)，它接收到一些可能可以容忍的错误——我的意思是即使它们发生，玩家仍然感觉很好并继续工作。

但是，我需要以某种方式区分不重要的错误和与 MediaPlayer 无法播放某些视频格式有关的错误。或者还有另一种定义是否可以播放视频的方法？

也许有一种功能可以提取所有可支持的视频类型并将它们与正在播放的视频类型进行比较？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:59:05.427

有一个隐藏的 api android.media.Mediafile.isMimeTypeMedia。您可以对其使用反射来获取是否支持您的 mime 类型。函数签名是

```
 public static boolean isMimeTypeMedia(String mimeType) 
```

在带有 android.media 包的 Mediafile 类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:41:54.690

如果按类型表示扩展，那么这可能会有所帮助： [Android 支持的媒体格式](http://developer.android.com/guide/appendix/media-formats.html)

编辑：您可以通过创建将包含支持的格式的任何集合来比较格式，然后检查文件的格式，并检查它是否包含在集合中。

以下是提取文件格式的方法示例：

```
private String getFileExtention(String fileName) {
      String ext="";
      int mid= fileName.lastIndexOf(".");
      ext=fileName.substring(mid+1,fileName.length());  
      return ext;
} 
```

# javascript - 在 raphael.js 中为逆时针弧设置动画

> ID：12012006
> 
> 赞同：1
> 
> 时间：2012-08-17T19:27:23.853
> 
> 标签：javascript, raphael, vector-graphics

[我从raphael js 中绘制居中弧线](https://stackoverflow.com/questions/5061318/drawing-centered-arcs-in-raphael-js?answertab=votes#tab-top)的线程中得到了我需要的精确弧线动画

但是，我需要逆时针绘制该弧的另一个实例，而这个似乎只是顺时针。这条弧线是否可以逆时针绘制和动画？

已回答问题的代码片段：

```
// Custom Arc Attribute, position x&y, value portion of total, total value, Radius
var archtype = Raphael("canvas", 200, 100);
archtype.customAttributes.arc = function (xloc, yloc, value, total, R) {
    var alpha = 360 / total * value,
        a = (90 - alpha) * Math.PI / 180,
        x = xloc + R * Math.cos(a),
        y = yloc - R * Math.sin(a),
        path;
    if (total == value) {
        path = [
            ["M", xloc, yloc - R],
            ["A", R, R, 0, 1, 1, xloc - 0.01, yloc - R]
        ];
    } else {
        path = [
            ["M", xloc, yloc - R],
            ["A", R, R, 0, +(alpha > 180), 1, x, y]
        ];
    }
    return {
        path: path
    };
};

//make an arc at 50,50 with a radius of 30 that grows from 0 to 40 of 100 with a bounce
var my_arc = archtype.path().attr({
    "stroke": "#f00",
    "stroke-width": 14,
    arc: [50, 50, 0, 100, 30]
});

my_arc.animate({
    arc: [50, 50, 40, 100, 30]
}, 1500, "bounce"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T10:04:42.990

正如凯文所说，您需要扫描标志集，并且需要反转一些变量。这是我逆时针方向的最终代码；

```
paper.customAttributes.arc = function (xloc, yloc, value, total, R) {
var alpha = 360 / total * value, 
    a = (90 - alpha) * Math.PI / 180, 
    x = xloc - R * Math.cos(a), 
    y = yloc - R * Math.sin(a),
    path;
    console.log(x);
if (total == value) {
    path = [
        ["M", xloc, yloc - R],
        ["A", R, R, 0, 1, 1, xloc - 0.01, yloc - R]
    ];
} else {
    path = [
        ["M", xloc, yloc - R],
        ["A", R, R, 0, +(alpha > 180), 0, x, y]
    ];
}
return {
    path: path
};
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T20:10:10.773

我无法弄清楚如何使圆弧本身逆时针旋转，但我能够使用[本主题](https://stackoverflow.com/questions/3433641/flipping-inverting-mirroring-text-using-css-only)中的 CSS 镜像 SVG 本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T17:29:45.200

您的问题的答案隐藏在svg1.1 规范[中椭圆弧的 w3c 文档中。](http://www.w3.org/TR/SVG/paths.html#PathDataEllipticalArcCommands)您正在寻找的是扫描标志 - 1（您一直在使用）导致顺时针弧，而 0 导致逆时针弧。几个月前，当我偶然发现这个问题时，我在 RaphaelJS.com 上找不到任何答案，这让我非常恼火。

您可以通过多种方式实现这一点，这样的方法可能是最直接的方法：

```
archtype.customAttributes.arc = function (xloc, yloc, value, total, R, sweep_flag ) {
    sweep_flag = sweep_flag || 1;
    var alpha = 360 / total * value,
        a = (90 - alpha) * Math.PI / 180,
        x = xloc + R * Math.cos(a),
        y = yloc - R * Math.sin(a),
        path;
    if (total == value) {
        path = [
            ["M", xloc, yloc - R],
            ["A", R, R, 0, 1, sweep_flag, xloc - 0.01, yloc - R]
        ];
    } else {
        path = [
            ["M", xloc, yloc - R],
            ["A", R, R, 0, +(alpha > 180), sweep_flag, x, y]
        ];
    }
    return {
        path: path
    };
}; 
```

使用它，您应该能够使用可选的第 6 个参数来控制弧的方向。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-24T11:25:36.303

使用它，您可以将负数传递给`value`参数。

```
r.ca.arc = function(centerX, centerY, value, total, radius){
    var
        angle = value / total * 359.99,
        absAngle = Math.abs(angle),
        a = Math.PI / 180 * (90 - angle),
        x = centerX + radius * Math.cos(a),
        y = centerY - radius * Math.sin(a),
        sweep = +(value >= 0),
        path;

        path = [
            ['M', centerX, centerY - radius],
            ['A', radius, radius, 0, +(absAngle > 180), sweep, x, y]
        ];

        return { 'path': path };
}; 
```

# php - PHP 5.4.4 MySQL 连接

> ID：12012010
> 
> 赞同：0
> 
> 时间：2012-08-17T19:27:30.897
> 
> 标签：php, mysql

我正在尝试将应用程序从 PHP 5.2.X 迁移到 PHP 5.4.4，我遇到了一些与应用程序如何连接到数据库相关的问题。

新服务器在此行失败：

```
$this->db = @mysql_pconnect(_DBHOST,_DBUSER,_DBPASS); 
```

我知道新版本改变了应用程序连接到数据库的方式，但我一直在尝试用其他方法连接，但我做不到。我认为它应该与可以在这里找到的服务器配置有关：http: [//bit.ly/S2px7Q](http://bit.ly/S2px7Q)

我看到的是安装了 mysqlnd，但没有安装 mysql、mysqli 或 PDO。那是对的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:46:09.497

如果您遇到`Undefined Function`错误，则表示该`mysql`库未安装在您的 PHP 副本中。

这实际上可能是一件好事，因为这个特定的库被认为是过时的。PHP 提供了至少两个好的替代方案，建议使用它们。

我建议您将所有`mysql_xxx()`函数调用切换为等效`mysqli_xxx()`调用。

这将允许您以最少的代码更改开始使用更好的库。您也可以使用 PDO 库，但如果您要处理现有代码，这将涉及更多工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:57:03.853

我同意，试试 PDO

```
$this->db = new PDO("mysql:host=localhost;dbname=mysql", "root", "password");
$this->statement = $db->query('SELECT first_name, last_name FROM users;');
$this->users = $this->statement->fetchAll(PDO::FETCH_ASSOC); 
```

# c# - 如何在 C# 的循环中返回结果？

> ID：12012011
> 
> 赞同：1
> 
> 时间：2012-08-17T19:27:39.013
> 
> 标签：c#, .net

本质上，我有一个`Do..While`循环遍历文本文件中的一些行。我想处理一行，返回一个值（工作或没有），然后移动到下一行。

我有一个`ProcessTXT`接受 2 个字符串的函数。 `Source`和`Destination`新文件。

有没有办法为`ReturnedValue string =`结果设置 a 并让后台工作人员检查变量是否更改？如果是这样，将此值添加到列表框中？

```
private void TranslatePOD(string strSource, string strDest,)
{
  TextWriter tw = new StreamWriter(strDest);
  TextReader tr = new StreamReader(strSource);
  do
    {
      //My Code doing stuff
      //Need to send a result somehow now, but i have more work to do in this loop
      //Then using tw.writeline() to write my results to my new file
    } while (tr.ReadLine() != null);
} 
```

编辑：当前使用 Yield 的测试代码。我的输出是“TestingGround.Form1+d__0”。我做错什么了吗？

```
namespace TestingGround
{
public partial class Form1 : Form
{
    static IEnumerable<string> TestYield(string strSource) 
    {
        TextReader tr = new StreamReader(strSource);
        string strCurLine = System.String.Empty;

        while ((strCurLine = tr.ReadLine()) != null)
        {
            yield return strCurLine;
        }
    }

    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        string MySource = System.String.Empty;
        MySource = @"C:\PODTest\Export Script\Export\Shipment List.csv";
        listBox1.Items.Add(TestYield(MySource));

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T19:30:01.730

[Yield](http://msdn.microsoft.com/en-us/LIBRARY/9k7k7cf0.ASPX)通常用于迭代或流式返回结果。网上有很多例子。SO上有[一个](https://stackoverflow.com/questions/1271225/c-sharp-reading-a-file-line-by-line)用于读取文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T19:36:30.410

听起来这对于生产者/消费者队列来说是一个很好的案例。引入了 C# 4.0 `BlockingCollection`，对此非常有用。创建阻塞集合并确保此过程以及任何需要使用您传递的结果的东西都可以访问它。该方法可以将项目添加到队列中，任何正在读取结果的都可以使用该`Take`方法，该方法将阻塞[等待]，直到至少有一个项目可以取出。该集合专为在多线程环境中工作而设计；所有操作在逻辑上都是原子的。

# c# - 将语句 lambda 作为参数传递

> ID：12012012
> 
> 赞同：2
> 
> 时间：2012-08-17T19:27:42.780
> 
> 标签：c#, wpf, linq, lambda

在关注[这个](https://stackoverflow.com/questions/661561/how-to-update-gui-from-another-thread-in-c)关于从另一个线程更新 GUI 的问题之后，我想稍微扩展代码，以便它可以用于属性分配以外的其他东西。具体来说，我试图找到一种将某些功能直接分配给 lambda 的方法，以便我可以根据需要定义行为（我为 WPF 稍微修改了原始行为）：

```
 private delegate void UpdateControlThreadSafeDelegate(Control control, System.Linq.Expressions.Expression<Action> property);
    public void UpdateControl(Control control, System.Linq.Expressions.Expression<Action> property)
    {

        // If calling thread is not associated with control dispatcher, call our thread safe property update delegate
        if (!control.Dispatcher.CheckAccess())
        {
            control.Dispatcher.Invoke(new UpdateControlThreadSafeDelegate(UpdateControl), new object[] { control, property });
        }
        else
        {
            Action call = property.Compile();
            call();
        }
    } 
```

随着用法：

```
UpdateControl(lbFoo, () => lbFoo.Items.Clear()); // where lbFoo is a ListBox control 
```

这工作正常。但我宁愿允许这样做：

```
UpdateControl(lbFoo, () => { lbFoo.Items.Clear(); lbFoo.Items.Add("Bar");}); 
```

这不起作用，返回错误*CS0834: A lambda expression with a statement body cannot be convert to an expression tree*。错误很明显，我只是不确定如何最好地进行。我可以按照我原来的用法并在几行中做我需要的事情，只是没有那么整洁。

我猜有更好/更简单的方法来做我想做的事。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T19:34:17.147

如果您不使用表达式，而只是传递操作，如下所示：

```
public void UpdateControl(Control control, Action actionToExecute) 
```

然后你可以使用它作为书面。唯一的其他更改将是您的 else 语句，您可以直接调用它：

```
 else
    {
        actionToExecute();
    } 
```

# java - Java - JPanel 上的paintComponents 不起作用

> ID：12012013
> 
> 赞同：3
> 
> 时间：2012-08-17T19:27:48.727
> 
> 标签：java, swing, jframe, paintcomponent

我创建了一个扩展 a`JFrame`并`JPanel`在其中添加 a 的类，但该`paintComponents()`方法没有在`JPanel`. 继承人的代码`paintComponents()`，我选择使用双图像缓冲。

```
 public void paintComponents(Graphics graphics) {
     panel.paintComponents(graphics);

      bufferedImage = createImage(sizeX, sizeY);
      Graphics2D g = (Graphics2D) bufferedImage.getGraphics();

      for (ImageData myImage : imageData) {
        g.drawImage(myImage.getImage(), myImage.getX(), myImage.getY(), null);
    }

    graphics.drawImage(bufferedImage, 0, 0, null);
  } 
```

这有什么问题吗？顺便说一句，我试过`paint()`了，它奏效了，但我认为这不是正确的方法。

谢谢你的时间。:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T19:32:14.257

不要扩展顶级组件，例如`JFrame`. 而是保留一个框架的实例，并为其添加一个面板。所有自定义绘画或组件添加都在面板中完成。

在面板中进行自定义绘画时，请在 `paintComponent`方法中进行（**不要** `paintComponents`不覆盖）。

## 其他提示

*   记得打电话`super.paintComponent(g);`。这对于确保考虑边界和填充等很重要。
*   换成. `null`_ `this`每一个`JComponent`都是一个`ImageObserver`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T19:32:17.063

请注意，JFrame 不是 JComponent！事实上，该`paintComponents(Graphics)`方法永远不会被调用。一个修复方法是将 JPanel 子类化并将您的子类面板添加到框架中作为内容窗格。在面板中覆盖该`paintComponents(Graphics)`方法。

# ios - 使用 iCloud 在多台设备上同步 Core Data

> ID：12012015
> 
> 赞同：9
> 
> 时间：2012-08-17T19:27:57.943
> 
> 标签：ios, core-data, ios6, sync, icloud

最近有[很多](http://rms2.tumblr.com/post/46505165521/the-gathering-storm-our-travails-with-icloud-sync)关于 iCloud 和 Core Data 的问题以及 Apple 的 API 目前在 iOS 5 和可能的 iOS 6 中如何被破坏的讨论。

考虑到 Apple 核心数据 API 的当前状态，是否有可能使用 iCloud 在多个设备之间可靠地同步？

如果是这样，你会怎么做？如果没有，请推荐一种替代方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T06:15:03.893

这篇[博](http://rms2.tumblr.com/post/46505165521/the-gathering-storm-our-travails-with-icloud-sync)文将引导您查看一系列最近的文章，这些文章介绍了尝试这种方法的开发人员的艰辛。

根据我自己的理解和经验，我相信这是可行的，但不要相信你会“免费”获得任何东西。根据您的数据模型，您最好将整个持久存储同步为文档，而不是使用记录的核心数据/iCloud 方法。

如果您已经习惯了 Core Data，您可能会有更好的运气。请确保您考虑过如何处理几个重要案件。

一个是如果用户退出他们的 iCloud 帐户该怎么办。发生这种情况时，将删除本地无处不在的持久存储。如果用户仍然可以访问他们的数据是有意义的，那么您需要在本地存储中管理一个副本，然后在他们重新登录时管理重新同步。

另一个是默认情况下更改的传播速度显然很慢，因此您可能需要考虑一种替代机制，例如键值存储，以快速传播足够的信息以避免不良的用户体验。

冲突管理可能是最具挑战性的（取决于您的模型）。虽然框架提供了一种通知您冲突的机制，但您需要自己提供一种机制来解决它们，并且有报告称冲突通知可能不可靠（请参阅链接文章），这似乎与滞后密切相关在更新中。

简而言之，如果您了解实际的支持是非常简单的，并且您需要非常防御性地编写代码，那么您可能会有机会。那里没有任何好的食谱，所以如果你做到了，请回来告诉我们什么有效！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T08:56:07.087

这取决于你想做什么。有两种类型的 Core Data-iCloud 集成，如下所述：http: [//developer.apple.com/library/ios/#releasenotes/DataManagement/RN-iCloudCoreData/_index.html](http://developer.apple.com/library/ios/#releasenotes/DataManagement/RN-iCloudCoreData/_index.html)

> 从广义上讲，有两种类型的基于核心数据的应用程序与 iCloud 集成：
> 
> 库风格的应用程序，其中应用程序通常具有单个持久存储，并且来自存储的数据在整个应用程序中使用。这种应用风格的例子是音乐和照片。
> 
> 基于文档的应用程序，其中不同的文档可能在应用程序生命周期的不同时间打开。这种应用风格的例子是 Keynote 和 Numbers。

如果您使用的是库类型，那么本文是系列文章中的第一篇，该系列文章会涉及许多将出现的问题：http: [//mentalfaculty.tumblr.com/post/23163747823/under-the-sheets -with-icloud-and-core-data-the-basics](http://mentalfaculty.tumblr.com/post/23163747823/under-the-sheets-with-icloud-and-core-data-the-basics)。

您还可以查看今年 wwdc 的会话 218（基于文档）或 227（用于库风格）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-17T18:29:12.937

从 iOS 7 开始，最好的解决方案可能是 Ensembles 框架：[https ://github.com/drewmccormack/ensembles](https://github.com/drewmccormack/ensembles)

此外，还有一个很有前途的项目，它基本上允许您使用不同的云服务来做同样的事情。

这是存储库的链接： [https ://github.com/nohirst/TICoreDataSync](https://github.com/nothirst/TICoreDataSync)

项目介绍：

> TICoreDataSync 是一个类的集合，用于在 Mac OS X 或 iOS 下运行的任意数量的客户端之间通过基于核心数据的应用程序（包括基于文档的应用程序）的云（包括 Dropbox）实现同步。如果您需要通过尚不支持的选项进行同步，它的设计很容易扩展。

iCloud 当前不可靠的原因：

*   “有时，iCloud 根本无法将数据从一台计算机移动到另一台计算机。”
*   “损坏的基线是 [a] 常见的障碍......没有从损坏的基线中恢复，除非深入挖掘本地 iCloud 存储的内部并将所有内容刮掉，并且没有明显的迹象表明已经发生了损坏 -同步只是停止。”
*   “有时，在初始化 iCloud 应用程序子系统时，它只会返回一个不透明的内部错误。当它失败时，没有恢复的选项——你所能做的就是再试一次（再一次……）直到它最终工作。”
*   “[W]当您关闭 iCloud 系统偏好设置中的“文档和数据”同步选项时，iCloud 系统会删除您本地存储的所有 iCloud 数据[.]”
*   当您退出 iCloud 时，系统会将您的 iCloud 数据移动到应用程序沙箱容器之外的位置，并且应用程序无法再使用它。
*   “在某些情况下（我们还无法弄清楚是哪一个），iCloud 在同步项目时实际上会更改项目的对象类。简单地说，对象类决定了数据库中对象的类型 [. ]"
*   “在某些情况下（同样，并非一直如此），iCloud 可能会执行以下操作之一：
    *   项目数据中的所有者关系将指向错误的所有者；
    *   所有者项目会在同步中丢失，并且永远不会出现在创建它们的计算机之外的计算机上。（这导致该项目永远不会出现在任何其他机器的 UI 中。）发生这种情况时，会在 blob 项目和任意不相关的所有者之间创建虚假关系。”
*   “有时（没有任何明显的一致性或可重复性），对象的关联数据（例如，PDF 项目的 PDF 数据，或 Web 存档项目的 Web 存档数据）根本无法显示在目标计算机上. 有时它会更晚到达（更晚——几分钟或几小时）。”

从这些来源引用和解释：

*   [http://www.imore.com/debug-12-icloud-core-data-sync](http://www.imore.com/debug-12-icloud-core-data-sync)
*   [http://rms2.tumblr.com/post/46505165521/the-gathering-storm-our-travails-with-icloud-sync](http://rms2.tumblr.com/post/46505165521/the-gathering-storm-our-travails-with-icloud-sync)

**注意：**我看过一篇文章，作者提到让它适用于 iOS 6+，但他们没有提供任何示例：http: [//zaal.tumblr.com/post/46718877130/why-you-want-to -use-core-data-icloud-sync-if-only-it](http://zaal.tumblr.com/post/46718877130/why-you-want-to-use-core-data-icloud-sync-if-only-it)

* * *

作为参考，这里是 Apple 在 iCloud + Core Data 上的文档：

*   [http://developer.apple.com/library/ios/#releasenotes/DataManagement/RN-iCloudCoreData/](http://developer.apple.com/library/ios/#releasenotes/DataManagement/RN-iCloudCoreData/)
*   [http://developer.apple.com/library/ios/#documentation/General/Conceptual/iCloudDesignGuide/Chapters/DesignForCoreDataIniCloud.html](http://developer.apple.com/library/ios/#documentation/General/Conceptual/iCloudDesignGuide/Chapters/DesignForCoreDataIniCloud.html)
*   [http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/CoreDataVersioning/vmCloud/vmCloud.html](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/CoreDataVersioning/vmCloud/vmCloud.html)

这是一个示例应用程序：

*   [http://developer.apple.com/library/ios/#DOCUMENTATION/General/Conceptual/iCloud101/Introduction/Introduction.html](http://developer.apple.com/library/ios/#DOCUMENTATION/General/Conceptual/iCloud101/Introduction/Introduction.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T19:35:55.290

[关于使用 iCloud API 操作文档](http://developer.apple.com/library/ios/#DOCUMENTATION/General/Conceptual/iCloud101/Introduction/Introduction.html)的Apple 开发人员教程可能是一个不错的起点。

> 您的第三个 iOS 应用程序向您介绍了 iCloud 文档存储 API。您可以使用这些 API 在用户的 iCloud 存储中存储和操作文件。

# c# - 在 WPF 中为不同的图像有效地使用 Style 标签

> ID：12012017
> 
> 赞同：0
> 
> 时间：2012-08-17T19:28:15.487
> 
> 标签：c#, .net, wpf, visual-studio, xaml

我使用样式来定义当用户将鼠标悬停在这样的图像上时会发生什么。

```
<Style TargetType="{x:Type Image}">
    <Setter Property="Source" Value="c:\\2.bmp"/>
    <Style.Triggers>
        <Trigger Property="IsMouseOver" Value="True">
            <Setter Property="Source" Value="C:\\1.bmp"/>
        </Trigger>
    </Style.Triggers>
</Style> 
```

但是，我猜我的应用程序中包含的所有图像都使用了在“值”属性中定义的相同图像。如果我需要为不同的图像提供不同的悬停图像而没有此自定义覆盖怎么办？

在这种情况下，我应该使用什么想法？或者在 WPF 中处理图像悬停的更好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:13:57.653

我们应该像 Jon 建议的那样定义一个 x-key 值！

```
<Style x:Key="Name_of_your_style"  TargetType="{x:Type Image}">
<Setter Property="Source" Value="c:\\2.bmp"/>
<Style.Triggers>
    <Trigger Property="IsMouseOver" Value="True">
        <Setter Property="Source" Value="C:\\1.bmp"/>
    </Trigger>
</Style.Triggers> 
```

在使用此代码段时，请使用类似

```
 <Image Style="{StaticResource Name_of_your_style}"  Name="I1" />
 <Image Name="I2" /> 
```

这将使图像 I1（首先定义）使用上面的模板（在悬停处理时），而另一个图像仍然按照您当前的模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:42:28.600

您可以定义几种不同的样式并给它们一个`x:Key`值，而不是一个`TargetType`值。然后，您可以简单地将`Style`图像的属性设置`x:Key`为适当样式的属性。

如果您想将单一样式应用于大多数图像，但您只想覆盖其中的几个，那么您可以结合这两种方法。如果您将样式分配给一种元素（通过`TargetType`属性），您可以通过显式指定它们的属性来覆盖特定元素的样式`Style`。此外，如果设置`Style={x:Null}`，则可以使元素恢复为默认样式。

# css - 指定 :hover 具有特定 ID 的链接

> ID：12012019
> 
> 赞同：0
> 
> 时间：2012-08-17T19:28:24.513
> 
> 标签：css

如果我有以下情况：

```
 .nav > li.dropdown.open.active > a:hover 
```

我想为带有#futurebutton id 的链接“a”指定相同的内容，这看起来如何？

显然不是？：

```
 .nav > li.dropdown.open.active > a#futurebutton:hover 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T19:29:59.487

不。

```
#futurebutton:hover {
    /* styles */
} 
```

ID 在 DOM 中是唯一的，因此您只需要将 ID 指定为选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T21:58:37.997

CSS：

```
#futurebutton:hover{
} 
```

jQuery：

```
$('#futurebutton').open(yourOpenFunction) 
```

# sql - SQL：需要有关此查询的帮助

> ID：12012025
> 
> 赞同：0
> 
> 时间：2012-08-17T19:28:50.313
> 
> 标签：sql, if-statement, switch-statement, case

我希望表名无关紧要，因为它们基于我的数据库。我会尽量保持简单。

这就是我需要的：提供骨科专家名单及其助手的姓名和联系信息。如果医生没有助手，请在姓氏的报告中填写“未知”。个人信息位于名为 的表中`Person`。这包括联系信息 ( `PhoneNumber`)。每个医生都有一个 ID 号，叫做`PersonID` Assistant name ( `FirstName`, `LastName`) 是在一个叫做的表中`PersonContact`。

这是我到目前为止所拥有的：

```
SELECT Person.FirstName
    ,Person.LastName
    ,Person.PhoneNumber
    ,PersonContact.FirstName
    ,PersonContact.Lastname
FROM Person
INNER JOIN PersonContact ON person.personID = PersonContactID 
```

我怎样才能让没有助手的医生出现`Unknown`在他们的助手名字中的“”？

编辑：我在这里尝试了每一个建议，但每一行我都得到了直接的“NULL”或“UNKNOWN”。当没有 Personcontact.Firstname 和/或 Personcontact.Lastname 的条目时，我需要它说“未知”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T19:32:11.390

使用 a`LEFT JOIN`获取所有人员和任何可用的联系人，并使用`COALESCE`'UNKNOWN' 替换任何 NULL 值。

```
Select Person.FirstName, Person.LastName, Person.PhoneNumber, 
    COALESCE(PersonContact.FirstName, 'UNKNOWN') AS FirstName,
    COALESCE(PersonContact.Lastname, 'UNKNOWN') AS LastName
From Person
LEFT OUTER Join PersonContact
    On person.personID = PersonContactID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:31:53.080

使用左连接

```
FROM PERSON
LEFT JOIN PersonContact ON person.personID = PersonContactID 
```

这将在没有联系人可用的地方提供空值。

根据您的 SQL 种类，您可以使用某种形式的 NULL 替换来格式化这些 NULL。例如，在 MSSQL 中

```
ISNULL(PersonContact.FirstName, '(unknown)') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T19:33:18.990

使用 ISNULL() 和 LEFT OUTER JOIN：

```
SELECT Person.FirstName     
,isnull(Person.LastName, 'Unknown') as LastName
,Person.PhoneNumber     
,PersonContact.FirstName     
,PersonContact.Lastname 
FROM Person LEFT OUTER JOIN PersonContact ON person.personID = PersonContactID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T19:33:19.367

你想在这里左加入；所以是这样的：

```
Select Person.FirstName,
       Person.LastName,
       Person.PhoneNumber,
       ISNULL(PersonContact.FirstName, 'Unknown') AS FirstName,
       ISNULL(PersonContact.Lastname, 'Unknown') AS LastName
From Person LEFT OUTER Join PersonContact
      On person.personID = PersonContactID 
```

# xml - 使用 CFSCRIPT 获取 xml 属性

> ID：12012027
> 
> 赞同：3
> 
> 时间：2012-08-17T19:29:02.077
> 
> 标签：xml, coldfusion, xml-parsing

简单的 XML

```
<employee> 
    <name EmpType="Regular"> 
        <first>Almanzo</first> 
        <last>Wilder</last> 
    </name> 
</employee> 
```

我正在尝试使用 CFSCRIPT 来测试属性“EmpType”的存在

尝试使用 isDefined('_XMLDoc.employee.name[1].xmlAttributes.EmpType'); 无济于事

尝试使用 structkeyexists(_XMLDoc,'employee.name[1].xmlAttributes.EmpType'); 无济于事

还有其他想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T20:21:06.913

我同意 StructKeyExists 是您想要更改的内容：

```
structkeyexists(_XMLDoc,'employee.name[1].xmlAttributes.EmpType') 
```

对此：

```
 structkeyexists(_XMLDoc.employee.name[1].xmlAttributes,'EmpType') 
```

您希望将要检查的最后一项以外的所有项目作为第一个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:04:26.533

This was my solution:

```
myEmpType = '';
    try{
    myEmpType = _XMLDoc.employee.name[1].xmlAttributes["EmpType"]; 
} catch (Any e) {
    myEmpType = 'no category';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T20:31:26.270

使用`xmlsearch`.

为了测试这一点，我在您的 XML 中添加了更多内容。

```
<employee> 
<name EmpType="Regular"> 
    <first>Almanzo</first> 
    <last>Wilder</last> 
</name>
<name> 
    <first>Luke</first> 
    <last>Skywalker</last> 
</name> 
</employee> 
```

您会注意到您的原始员工具有 EmpType，但第二个没有。

代码有点冗长，但我只是想证明它有效。它遍历每个`name`节点并检查它是否有一个`@EmpType`。如果是这样，它将转储该 XML 节点。

```
names = xmlsearch(testXML,'employee/name');
for(n=1;n<=arraylen(names);n=n+1){
    thisname = names[n];
    hasemptype = xmlsearch(thisname,'@EmpType');
    if(arraylen(hasemptype)==1){
        writedump(thisname);    
    }
} 
```

`xmlsearch` [这里](http://www.bennadel.com/blog/827-Nylon-Technology-Presentation-Introduction-To-XPath-And-XmlSearch-In-ColdFusion.htm)和[这里](http://www.bennadel.com/blog/1039-Ask-Ben-Iterating-Over-A-ColdFusion-XML-Document.htm)有很好的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T02:29:23.030

我会使用 XPath 来解决这个问题：

```
XmlSearch(xmlObject, "//name[@EmpType]") 
```

上面的表达式返回一个具有 EmpType 属性的节点数组，如果没有找到则返回一个空数组。所以你可以检查一个数组是否为空。如果您只需要一个布尔值，您可以像这样修改您的 xpath 字符串：

```
XmlSearch(xmlObject, "exists(//name[@EmpType])") 
```

此表达式使用 xpath 函数`exists()`，如果找到具有该属性的任何节点，则返回 true，如果没有，则返回 false。整个表达式返回真或假，而不是像第一种情况那样的数组。返回类型的`XmlSearch()`变化取决于 xpath 表达式返回的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T19:55:56.427

尝试这个

```
<cfscript>
   employee.name[1].xmlAttributes["EmpType"]
</cfscript> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-17T19:56:38.537

I use CFSCRIPT to parse XML.

When you test for the existence of a node, you should use structKeyExists(); This requires two paramenters, the scope and the variable. The scope cannot be in quotes. The variable MUST be in quotes.

```
structKeyExists(SCOPE, "Variable"); 
```

Here's s short bit that might help.

```
// BOOTH NUMBER
BoothInfo.BoothNumber = ResponseNodes[i].BoothNumber.XmlText;
writeOutput("<h3>BoothNumber - #BoothInfo.BoothNumber# </h3>");

// CATEGORIES
if (structKeyExists(ResponseNodes[i].ProductCategories, "Category")) {
    Categories = ResponseNodes[i].ProductCategories.Category;
    CatIDList = "";
    for (j = 1; j lte arrayLen(Categories); j++) {
        CatID = ResponseNodes[i].ProductCategories.Category[j].XmlAttributes.ID;
        CatIDList = listAppend(CatIDList, CatID);
    }
BoothInfo.CatID = CatIDList;
} else {
BoothInfo.CatID = "";
}
writeOutput(BoothInfo.CatID); 
```

# java - 需要一种更好的方法来从文本文件中读取和存储值

> ID：12012031
> 
> 赞同：0
> 
> 时间：2012-08-17T19:29:08.950
> 
> 标签：java, android, text-files, inputstream, stringtokenizer

目标：从文本文件中获取值并将其存储到值中以加载到我的 sqlite 数据库中。

问题：我的方法效率不高，我需要帮助想出一个更简单的方法。

截至目前，我正在解析我的文本文件，看起来像这样。

```
agency_id,agency_name,agency_url,agency_timezone,agency_lang,agency_phone
1,"NJ TRANSIT BUS","http://www.njtransit.com/",America/New_York,en,""
2,"NJ TRANSIT RAIL","http://www.njtransit.com/",America/New_York,en,"" 
```

每次读取逗号时我都会解析，然后将该值存储到一个变量中，然后我将使用该变量作为我的数据库值。

这种方法有效且耗时，我必须读入的下一个文本文件有超过 200 行代码，我需要找到一种更简单的方法。

```
AgencyString = readText();
        tv = (TextView) findViewById(R.id.letter);

        tv.setText(readText());

        StringTokenizer st = new StringTokenizer(AgencyString, ",");

        for (int i = 0; i < AgencyArray.length; i++) {
            size = i; // which value i am targeting in the textfile 
//ex. 1 would be agency_id, 2 would be agency_name
            AgencyArray[i] = st.nextToken();
        }
        tv.setText(AgencyArray[size]);  //the value im going to store into database value
    }

    private String readText() {
        InputStream inputStream = getResources().openRawResource(R.raw.agency);

        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();

        int i;
        try {
            i = inputStream.read();
            while (i != -1) {
                byteArrayOutputStream.write(i);
                i = inputStream.read();
            }
            inputStream.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return byteArrayOutputStream.toString();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:41:23.133

First, why is this a problem? I don't mean to answer your question with a question so to speak, but more context is required to understand in what way you need to improve the efficiency of what you're doing. Is there a perceived delay in the application due to the parsing of the file, or do you have a more serious ANR problem due to you running on the UI thread? Unless there is some bottleneck in other code not shown, I honestly doubt you'd read and tokenise it faster that you're presently doing. Well, actually, no doubt you probably could; however, I believe it's more a case of designing your application so that delays involved in fetching and parsing of large data aren't perceived by or cause irritation to the user. My own application parses massive files like this and it does take a fraction of a second, but it doesn't present a problem due to the design of the overall application and UI. Also, have you used the profiler to see what's taking time? And also, have you run this on a real device, without debugger attached? Having the debugger attached to the real device, or using the simulator greatly increases execution time by several orders.

I am making the assumption that you need to parse this file type after receiving it over a network, as opposed to being something that is bundled with the application and only needs parsing once.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:37:57.210

您可以将 SQLite 数据库与您的应用程序捆绑在一起，而不是在文本文件中表示它。看看[这个问题的答案](https://stackoverflow.com/questions/513084/how-to-ship-an-android-application-with-a-database)

# java - SCJP 6 和 OCJP 是否相同？

> ID：12012032
> 
> 赞同：14
> 
> 时间：2012-08-17T19:29:13.063
> 
> 标签：java, scjp

两者`SCJP 6`和`OCJP 6`考试一样吗？我将在本月底参加 OCJP 6 考试，但我正在准备 Kathy Seirra 的 SCJP 6 书。

为了练习，我正在准备 Kathy seirra 的`"OCP Java SE 6 programmer study guide"`。可以吗？

我对这句话感到困惑`"SCJP 6" , "OCJP 6", "OCP Java SE 6 Programmer"`。那些是一样的吗？

如果相同，为什么会有这么多不同的名称？

先感谢您？请指导我。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-17T19:31:39.290

是的，用于两次考试的题集是相同的，Sierra/Bates 书是很好的准备材料。为了更好地准备，我建议先进行一些模拟测试。网上有大量免费的。

编辑：关于命名歧义 - 证书由 Sun Microsystems 颁发并称为[SCJP - **Sun Certified Java Programmer**](http://en.wikipedia.org/wiki/SCJP#Sun_Certified_Java_Programmer_.28SCJP.29)。甲骨文于2010年初收购Sun后（该协议已于2009年签署），该证书已正式更名为**Oracle Certified Professional Java SE Programmer**或OCPJP。许多人仍然称它为 SCJP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T15:21:19.593

据我所知，唯一的区别是 OCPJP 考试版本中不再提供拖放式问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T19:58:57.743

由于“所有权”而不同的名称 - 曾经是 Sun Certified Java Programmer，现在是 Oracle Certified Java Programmer。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T21:21:20.653

那么SCJP6和OCJP6基本上是同一个考试。由于 Oracle 接管了 Sun 和他们的考试，您不能再参加 SJCP。

测试略有变化。为了准备，我已经看到了很多完整的代码示例，而我在实际考试中没有看到。他们也将测试提供商从 Prometric 更改为 PearsonVUE。

# java - 迭代器检索第一个值并将其放回同一个迭代器

> ID：12012033
> 
> 赞同：1
> 
> 时间：2012-08-17T19:29:13.603
> 
> 标签：java, collections, iterator

我有以下情况：我有一个现有的迭代器`Iterator<String> it`，我在它的头上进行迭代（比如前 k 个元素，它们是标记的元素，即它们以 '*' 开头）。知道标记元素结束的唯一方法是注意到第 (k+1) 个元素没有标记。

问题是，如果我这样做，迭代器`it`将不会在下一次调用时为我提供第一个值`next()`。

我想将此迭代器传递给一个方法，因为它是唯一的参数，并且我想避免更改它的签名和实现。我知道我可以这样做：

```
 public void methodAcceptingIterator(Iterator<String> it) //current signature

   //change it to 

  public void methodAcceptingIterator(String firstElement, Iterator<String> it) 
```

但这看起来像是一种降低代码优雅性和通用性的工作方法/hack，所以我不想这样做。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T19:35:12.520

您可以使用 Guava 的[PeekingIterator](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Iterators.html#peekingIterator%28java.util.Iterator%29)（链接包含静态方法的 javadoc，给定一个`Iterator`，将返回一个 wrapping `PeekingIterator`）。这包括一种方法`T peek()`，它可以向您显示下一个元素，而无需前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T19:30:32.060

解决方案是创建您自己的 Iterator 实现，该实现存储`firstElement`并使用现有的迭代器作为底层 Iterator 来委托对其余元素的请求。

就像是：

```
 public class IteratorMissingFirst<E> implements Iterator<E>{

private Iterator<E> underlyingIterator;
private E firstElement;
private boolean firstElOffered;

public IteratorMissingFirst(E firstElement, Iterator<E> it){
    //initialize all the instance vars
}

public boolean hasNext(){
    if(!firstElOffered && firstElement != null){
            return true;
    }
    else{
        return underlyingIterator.hasNext();
    }
}

public E next(){
    if(!firstElOffered){
        firstElOffered = true;
        return firstElement;
    }
    else return underlyingIterator.next();
}

public void remove(){

}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T20:24:17.787

使用 Guava，您可以使用类中的一些方法以更简单的方式实现 Razvan 的解决方案`Iterables`：

```
Iterators.concat(Iterators.singletonIterator(firstElement), it) 
```

这为您提供了一个与 类似的迭代器`IteratorMissingFirst`，如果您需要查看前面的多个元素（但它创建两个对象而不是仅一个），它很容易扩展。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T19:32:25.687

为什么不`methodAcceptingIterator`将它从迭代器中取出的第一个元素存储在变量中？或者 - 在紧要关头 - 只需将方法的开头的内容复制`Iterator`到 an中；`ArrayList`现在您可以随心所欲地重新访问元素。

# visual-studio-2010 - 无法引用 System.Threading.Volatile

> ID：12012035
> 
> 赞同：1
> 
> 时间：2012-08-17T19:29:19.170
> 
> 标签：visual-studio-2010, .net-4.5

我刚刚安装了 .NET Framework 4.5 的最终版本并重新启动。我正在使用 VS 2010。我尝试使用新的[System.Threading.Volatile](http://msdn.microsoft.com/ru-ru/library/gg712929)类，但在使用`System.Threading.Volatile`.

在项目属性中，目标框架版本是“.NET Framework 4”，我想它包括 4.5

为什么我不能参考`System.Threading.Volatile`以及如何解决我的问题？我必须为此使用VS 2012吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:31:24.743

您不能使用 Visual Studio 2010 中的 .NET 4.5。您需要安装 VS 2012 以定位 .NET 4.5 并使用仅在 4.5 中定义的新类型。

> 在项目属性中，目标框架版本是“.NET Framework 4”，我想它包括 4.5

不，不是的。它仅包括 .NET 4 中的类和类型。您需要针对“.NET Framework 4.5”，这需要 VS 2012。

# google-apps-script - getTag() 方法不适用于谷歌应用程序脚本

> ID：12012036
> 
> 赞同：0
> 
> 时间：2012-08-17T19:29:29.563
> 
> 标签：google-apps-script

我在编写一个让用户与数据表交互的脚本时正在做什么。用户选择的每个系列都会创建一个按钮，然后将系列绘制在图表上。如果用户单击按钮，它会显示系列。那里的所有数据都存储在一个隐藏的 JSON 字符串中。用户要查看的列或系列存储在我称为索引的数组中，它也是一个隐藏的 JSON 字符串）每个按钮都连接到其自己的客户端处理程序，该处理程序具有

```
.forTargets(the index i was talking about).setTag(to the corresponding column in the data array) 
```

并且它们都连接到同一个服务器处理程序。因此，当单击按钮时，客户端处理程序会将索引的标签设置为应该删除的系列。现在服务器处理程序将运行它，通过 ID 获取索引并获取标签。这是它出错了。标签始终为空。

我尝试的第一件事是查看我的客户端处理程序是否工作不正常。所以我将索引的标签设置为某个数字，但服务器处理程序中的 getTag 方法仍然返回 null。

idk，但也许标签没有保存在 UI 实例中？

下面是服务器处理程序的第一位。

```
function clickServer(e) {
   e = e.parameter;
   var app = UiApp.getActiveApplication();

   var master = JSON.parse(e.dataTable, "reviver");
   var index = JSON.parse(e.index, "reviver"); 

   var hidden = app.getElementById("hiddenIndex");
   var tag = hidden.getTag(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T11:54:29.750

我认为您遇到的问题与时间更相关：同时调用处理程序，这对于客户端和服务器处理程序也是如此，这意味着如果客户端处理程序更改隐藏标记值，则此更改对于服务器处理程序来说太晚了功能来“看到”它。您应该做的是创建一个单独的按钮来触发用户在设置所有其他参数后将使用的服务器处理程序。在用于获取[radioButtons 值的已知解决方法中使用了相同的方法](https://sites.google.com/site/appsscriptexperiments/home/some-ui-elements#TOC-Playing-with-RadioButtons)

另外，为什么要在隐藏的小部件上使用标签？您可以通过直接访问来使用它，`setValue()`因为`e.parameter.hiddenName`它们本质上已经是不可见的......？

另请注意，您可以在客户端处理程序中设置一个值，只要这些值是在 Ui 实例（do Get 函数）内通过常量变量或由同一函数中的另一个客户端处理程序定义的，如前面提到的示例所示单选按钮......但这只是一个细节。在这种情况下，如果您需要获取小部件值（在 doGet 函数内），您当然应该使用`getValue()`来获取小部件值，因为此时 no`e.parameter`可用。

我希望我已经足够清楚了，重新阅读我不太确定，但是....只是问是否缺少某些东西;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T19:43:20.597

标签值通过参数传递给处理程序。在这篇[文章](https://stackoverflow.com/questions/11829479/using-tags-on-widgets)中，这个事实被详细解释了。

# php - Javascript不联系php页面

> ID：12012040
> 
> 赞同：0
> 
> 时间：2012-08-17T19:30:18.383
> 
> 标签：php, javascript, mysql, rating

我对 php 和 javascript 很陌生，但仍在尝试让我的网页正常工作。我试图在页面中添加一个 5 星投票系统，该系统将联系我的数据库并进行相应更新。您可能已经注意到我的代码语法也不完美。

```
<div class="first"  onmouseover="starmove('-32px')" onmouseout="starnormal()" onclick="rate('harrys','1')"> 
```

这是“联系”javascript的div

```
function rate(id,ratings){
var i=id;
var r=ratings;
var xmlhttp;
if (window.XMLHttpRequest)
  { // code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
  }
else
   { // code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
   }
   }
 xmlhttp.onreadystatechange=function()
   {
xmlhttp.open("POST","http://------/rating.php?id="+i+"&rating="+r,true);
xmlhttp.send();
   } 
```

这是javascript

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Namnlös 1</title>
</head>
<body>
<?php
mysql_connect("host", "username", "password") or die(mysql_error());
mysql_select_db("database") or die(mysql_error());
mysql_set_charset('utf8');
$itemid = ($_GET["id"]);
$rating = ($_GET["rating"]);
$query = "INSERT INTO ratings(id,rating) VALUES ('$itemid','$rating')";
mysql_query($query);
?>
</body>
</html> 
```

这是我的 rating.php 文件（注意：mysql_connect 中的值在实际页面上，即使此处未定义。）

如果我只是打开我的 php 文件，则会在 mysql 中添加一行，所以我知道它已正确连接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T19:33:46.407

您将值作为 GET 传递给 rating.php，但您将其作为 POST 获取

```
xmlhttp.open("POST","http://------/rating.php?id="+i+"&rating="+r,true); 
```

在这里，即使您将方法指定为 POST，`?id="+i+"&rating="+r`也意味着 id 和 rating 将作为 GET 传递。

所以你不能访问它们

```
$itemid = ($_POST["id"]);
$rating = ($_POST["rating"]); 
```

您需要将其更改为：

```
$itemid = ($_GET["id"]);
$rating = ($_GET["rating"]); 
```

还将您的查询更改为：

```
$query = "INSERT INTO ratings(id,rating) VALUES ('".$itemid."','".$rating."')"; 
```

编辑：

我在这里更新了 Javascript 代码。尝试这个：

```
<script>
function rate(id,ratings)
{
    var i=id;
    var r=ratings;
    var xmlhttp;
    if (window.XMLHttpRequest)
    { 
        // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    { // code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.open("POST","http://------/rating.php?id="+i+"&rating="+r,true);
    xmlhttp.send();
}
</script> 
```

变化： 1\. 后面有两个大括号：

```
 xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
   }
   } 
```

第二个大括号有效地关闭了`rate()`函数，因此之后的代码没有按照预期进行。所以我把那个大括号移到了代码的末尾，以包装函数。

1.  该`onreadystatechange`函数在数据被发送到服务器后调用，以跟踪请求发生了什么。在您的代码中，您在 onreadystatechange 内部发送请求，该请求永远不会执行，因为请求永远不会被发送..

我变了

```
 xmlhttp.onreadystatechange=function()
       {
         xmlhttp.open("POST","http://------/rating.php?id="+i+"&rating="+r,true);
         xmlhttp.send();
       } 
```

进入一个简单的 POST 调用：

```
 xmlhttp.open("POST","http://------/rating.php?id="+i+"&rating="+r,true);
 xmlhttp.send(); 
```

我希望这能解释一切：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T19:34:51.033

您应该尝试使用 jQuery 进行 XHTTP 调用。这样，您可以确定您的代码支持所有浏览器。

将此添加到您的头部：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script> 
```

然后使用此代码调用 PHP 页面：

```
var i = id;
var r = ratings;
$.get("http://------/rating.php?id="+i+"&rating="+r); 
```

我还注意到您确实在查询的“id”字段中输入了“sds”。“id”字段应该是一个整数。如果它已经是一个整数，那是你的问题。还将 $_POST 更改为 $_GET。固定版本：

```
$itemid = ($_GET["id"]);
$rating = ($_GET["rating"]);
$query = "INSERT INTO ratings(id,rating) VALUES ($itemid,'$rating')"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T19:34:14.527

请使用 jQuery 处理 ajax 请求。jQuery 可以跨浏览器工作，你可以确定它可以工作。

还：

```
$itemid = ($_POST["id"]);
$rating = ($_POST["rating"]);
$query = "INSERT INTO ratings(id,rating) VALUES ('sds','$rating')"; 
```

不安全

```
$itemid = intval($_POST["id"]);
$rating = intval($_POST["rating"]);
$query = "INSERT INTO ratings(id,rating) VALUES ('sds','$rating')"; 
```

好多了

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T19:56:55.323

First, use relative instead of absolute links if the php file you're trying to request is in the same site:

```
// Absolute link
xmlhttp.open("POST","http://------/rating.php?id="+i+"&rating="+r,true);

// Relative link
xmlhttp.open("POST","rating.php?id="+i+"&rating="+r,true); 
```

Then, you're trying to send and retrieve the info via `POST`, but you're sending the info in a query string (`GET`):

JS:

```
xmlhttp.open("GET","rating.php?id="+i+"&rating="+r,true); 
```

PHP:

```
$itemid = $_GET["id"];
$rating = $_GET["rating"]; 
```

Finally, before you insert, use mysql_real_escape_string() or mysqli_real_escape_string(), depending on the MySQL library you're using, to prevent SQL injection in the database and compromise your site:

```
$itemid = mysql_real_escape_string($_GET["id"]);
$rating = mysql_real_escape_string($_GET["rating"]);
$query = 'INSERT INTO ratings(id,rating) VALUES ('.$itemid.','.$rating.')';
mysql_query($query); 
```

# c# - TryUpdateModel 仅在更新子对象的单元测试中失败

> ID：12012044
> 
> 赞同：2
> 
> 时间：2012-08-17T19:30:35.350
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, unit-testing, nunit

我能够让以下代码在服务器上工作，但不能在单元测试中工作。在单元测试中，简单属性设置正确，但子对象不正确。我已经把头撞在墙上太久了，所以欢迎任何建议。

### 控制器：

```
[HttpPost]
public bool Save(int id)
{
        var itemFromRepository = this.itemRepository.FetchById(id);

        if (itemFromRepository != null)
        {
            this.TryUpdateModel(
                itemFromRepository,
                "Item",
                new[] { 
                    "AnIntProperty", 
                    "AStringProperty",
                    "Category.Id"
                });

            if (itemFromRepository.Category!= null)
            {
                itemFromRepository.Category= this.categoryRepository.FetchById(itemFromRepository.Category.Id);
            }

            if (ModelState.IsValid)
            {
                this.itemRepository.Update(itemFromRepository);
                return true;
            }
        }

        return false;
} 
```

### 单元测试：

```
 this._controller.ControllerContext = new ControllerContext();
    Item item = this.items.First();
    var updatedCategory = this.categories.Last();
    var updatedStringProperty = "Fake Value";
    var updatedIntProperty = 4;

    var formValues = new FormCollection {
        { "Item.AnIntProperty", updatedStringProperty},
        { "Item.Category.Id", updatedCategory.Id.ToString() },
        { "Item.AStringProperty", updatedIntProperty.ToString() }
    };

    var result = this._controller
        .WithIncomingValues(formValues)
        .Save(item.Id); 
```

这通过：

```
 Assert.That(
        item.AStringProperty,
        Is.EqualTo(updatedStringProperty));
    Assert.That(
        item.AnIntProperty,
        Is.EqualTo(updatedIntProperty)); 
```

这不会：

```
 Assert.That(
        item.Category,
        Is.Not.Null);
    Assert.That(
        item.Category.Name,
        Is.EqualTo(updatedCategory.Name)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:48:44.290

您是否检查过上一个类别不为空？在下面的代码中，您只更新不为空的值，您可以在两种情况下为类别获取空值。1\. 如果该值当前为 null 并且 2\. 可能如果您的 categoryRepository.FetchById 返回一个 null 引用。

```
if (itemFromRepository.Category!= null)
{
     itemFromRepository.Category= this.categoryRepository.FetchById(itemFromRepository.Category.Id);
} 
```

这两种情况都会导致您的断言失败。

# android - 设置 Settings.System.AUTO_TIME 不会更新系统时间

> ID：12012046
> 
> 赞同：1
> 
> 时间：2012-08-17T19:30:42.047
> 
> 标签：android, datetime, android-2.2-froyo

我的 android 应用程序集

```
Settings.System.putInt(getContentResolver(), Settings.System.AUTO_TIME, 1); 
```

在清单中使用`permission.WRITE_SETTINGS`和。`permission.WRITE_SECURE_SETTINGS`

> 它部分工作 - 自动时间设置确实设置正确。但是系统时间不会更新。当我在日期和时间设置应用程序中选择自动时，时间会自动从网络更新，但是当我从我的应用程序设置自动时不会发生这种情况。我是否需要做一些额外的事情或需要额外的许可？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-17T07:31:33.677

请改用 Settings.Global.AUTO_TIME

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T09:42:16.527

您是否在位置设置中打开了 GPS/无线网络？

你打开互联网连接了吗？

系统需要知道你在哪里，我不太确定它是否需要联系时间服务器来确定实际的日期/时间。

# java - 文档类型“脚本”——它是什么？

> ID：12012048
> 
> 赞同：0
> 
> 时间：2012-08-17T19:31:10.737
> 
> 标签：java, google-apps-script, google-docs, google-docs-api

尝试使用 Java 客户端库从 Google Docs 下载文档并获取一些“脚本”类型的文档。

这种类型是什么？处理此类文件的正确方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T20:03:31.410

Those are Apps Script files. Go to [script.google.com](http://script.google.com) to create a new Apps Script project.

You can learn everything about Apps Script on [https://developers.google.com/apps-script/](https://developers.google.com/apps-script/)

# windows - 事件日志中是否存储了 regsvr32 的历史记录？

> ID：12012052
> 
> 赞同：0
> 
> 时间：2012-08-17T19:31:22.683
> 
> 标签：windows, dll, event-log, regsvr32

我正在尝试向项目提交错误报告，我需要查看今天在 Windows 中注册的 dll 以将其包含在报告中。（运行另一个注册 DLL 的程序修复了我最初使用的程序，我想让开发人员知道。）

事件日志中是否有任何地方可以查看已注册和未注册 DLL 的历史记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T19:33:24.963

regsvr32 将条目插入注册表。如果您在 regsvr32 之前和之后运行注册表之间的差异，您将能够找出确切注册的内容。

ProcMon 也是一个可用于监控注册表更改的工具

[http://technet.microsoft.com/en-us/sysinternals/bb896645](http://technet.microsoft.com/en-us/sysinternals/bb896645)

# c - OpenGL GLint，GLsizei 限制？

> ID：12012070
> 
> 赞同：5
> 
> 时间：2012-08-17T19:32:38.327
> 
> 标签：c, opengl, types, limit

OpenGL 定义了自己的数据类型。比如`GLint`或`GLsizei`。而且它们在不同平台上是不同的。我在哪里可以找到类型的限制？

## 编辑

添加了语言标签以阐明域。而且我知道 GL* 类型将被解析为基本的 C 类型，但它可能因平台而异。（实际上这就是定义它们的原因。）即使是基本的 C 类型也不能保证在任何平台上都是固定大小的。这`limit.h`就是存在的原因，我希望 GL 本身对于 GL* 类型也有类似的东西，因为它们在语义上与 C 类型不同，这意味着它们需要自己的限制定义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T19:43:09.277

**编辑：请注意，正如 pmr 从 OpenGL 规范中指出的那样，不能保证`GLint`或`GLsizei`将始终定义为`int`. `GLint`并且`GLsizei`只保证*至少为*32 位。**

来自 GL/gl.h

```
typedef int GLint;
typedef int GLsizei; 
```

这些类型是 int 的，大小根据平台而定。要获得最小值和最大值，您可以使用 INT_MIN 和 INT_MAX ，它们应该在 limits.h 中找到（假设 C ）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T20:02:53.073

假设您使用的是 C++，您可以使用它`std::numeric_limits<GLint>::max()`来获取类型或该类型的任何其他属性的正确最大值。

该规范不保证它`GLint`实际上是在任何平台上，但只保证它是一个至少 32 位宽的有符号整数类型，因此 MAX_INT是实际上是 32 位宽`int`的平台上的下限（例如）。`int``x86_64`

# php - 将用户信息存储到会话或在发出请求时直接从 sql 加载它们？

> ID：12012071
> 
> 赞同：1
> 
> 时间：2012-08-17T19:32:47.610
> 
> 标签：php, mysql

另一个，也许是傻瓜，问题。我正在制作一个网站，现在我在`$_SESSION`直接从表本身请求用户数据之间进退两难。所以，我现在的两个想法：

1.  从 mySQL 中检索所需的值，然后将它们设置为`$_SESSION`数组。所以，当我需要一些东西时，我可以打电话给`$_SESSION["username"]`. 它也有一些缺点。例如，如果管理员更改了一些用户数据，即用户名（这是一个蹩脚的例子，但仍然如此）。
2.  直接从 SQL 中检索值。在这种情况下，我可以调用一些调用 SQL 查询并给我结果的函数。

所以，问题是，哪种方法更适合使用，或者您可以建议任何替代方法。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T19:40:36.097

For frequently-used data but relatively unchanging data, such as names ("Hello, $firstname, welcome back") that would be used on every page request, you probably should cache them in the session. The slight additional parsing/loading overhead will be far less than having to yank that data out of the DB each time.

For relatively critical data, e.g. 'account is disabled', you may want to hit the database each time. However, this would depend on your security needs. If it's ok for a banned user to be able to wander around your system for a short period after their account is disabled, you can implement a time-out counter in the session, e.g. after every 50 hits, you refresh the data in the session regardless.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T19:37:37.460

不要在 SESSION 中保留用户名，而是保留用户 ID，并且不要让管理员更改用户 ID。创建帐户后，不应修改其用户 ID。并为每个页面加载检查数据库中的内容。

# android - 使用对话首选项从搜索栏保存浮动

> ID：12012073
> 
> 赞同：0
> 
> 时间：2012-08-17T19:32:59.363
> 
> 标签：android, sharedpreferences, android-preferences, preferenceactivity, dialog-preference

我正在使用自定义对话框首选项在我的首选项菜单中生成搜索栏。在研究了 seekbar 的实现之后，为了从 seekbar 中获取我需要的浮点值，我编写了以下代码：

```
public void onProgressChanged(SeekBar seek, int newValue,
        boolean fromTouch) {
    // Round the value to the closest integer value.
    if (stepSize >= 1) {
        value = Math.round(newValue/stepSize)*stepSize;

    }
    else {
        value = newValue;
    }

    // Set the valueText text.
    float sValue = newValue*10;
    sValue = sValue/100;

    valueText.setText(Float.toString(sValue)); 
```

这会产生我想要的浮动。但是，我希望能够在我的主要活动中使用这个浮动。我尝试使用 SharedPreferences 存储它：

```
userPrefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
Editor editor = userPrefs.edit()
editor.putFloat("mpm", sValue);
editor.commit(); 
```

这就是我学会在扩展 Activity 的类中使用 SharedPreferences 的方式。

但是，由于此搜索栏扩展了对话首选项，我无法使用

getBaseContext()

当我收到该类型的方法 getBaseContext 未定义的错误时。

我曾尝试将 getBaseContext() 更改为 getContext() 但这并不成功，尽管这可能是因为我不熟悉此实现。

如何从对话首选项中保存此浮点数并在不同的类中使用该值？

我用来检索 SharedPreferences 的代码：

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.logbook);
    initialise();
    userPrefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());

    list = userPrefs.getString("list", "10");
    userswallstring = userPrefs.getString("height", "10.0");

    try {
        usersWall = Float.valueOf(userswallstring.trim());
    } catch (Exception e) {
        // TODO: handle exception
    }
    mpm = userPrefs.getFloat("mpm", 2); 
```

Mpm.class：包com.gbclimber.ep；

```
 import android.content.Context;
 import android.content.DialogInterface;
 import android.content.SharedPreferences;

 import android.content.SharedPreferences.Editor;
 import android.content.res.TypedArray;
 import android.preference.DialogPreference;
 import android.preference.PreferenceManager;

 import android.util.AttributeSet;

 import android.view.LayoutInflater;
 import android.view.View;

 import android.widget.SeekBar;
 import android.widget.TextView;

 public class Mpm extends
    DialogPreference implements SeekBar.OnSeekBarChangeListener {
// Layout widgets.
private SeekBar seekBar = null;
private TextView valueText = null;

// Custom xml attributes.
private int maximumValue = 0;
private int minimumValue = 0;
private int stepSize = 0;
private String units = null;

private int value = 0;
SharedPreferences userPrefs;
/**
 * The SeekBarDialogPreference constructor.
 * @param context of this preference.
 * @param attrs custom xml attributes.
 */
public Mpm(Context context, AttributeSet attrs) {
    super(context, attrs);

    TypedArray typedArray = context.obtainStyledAttributes(attrs,
        R.styleable.Mpm);

    maximumValue = typedArray.getInteger(
        R.styleable.Mpm_maximumValue, 0);
    minimumValue = typedArray.getInteger(
        R.styleable.Mpm_minimumValue, 0);
    stepSize = typedArray.getInteger(
        R.styleable.Mpm_stepSize, 1);
    units = typedArray.getString(
        R.styleable.Mpm_units);

    typedArray.recycle();
}
/**
 * {@inheritDoc}
 */
protected View onCreateDialogView() {

    LayoutInflater layoutInflater = LayoutInflater.from(getContext());

    View view = layoutInflater.inflate(
        R.layout.mpmdp, null);

    seekBar = (SeekBar)view.findViewById(R.id.seekbar);
    valueText = (TextView)view.findViewById(R.id.valueText);

    // Get the persistent value and correct it for the minimum value.
    value = getPersistedInt(minimumValue) - minimumValue;

    // You're never know...
    if (value < 0) {
        value = 0;
    }

    seekBar.setOnSeekBarChangeListener(this);
    seekBar.setKeyProgressIncrement(stepSize);
    seekBar.setMax(maximumValue - minimumValue);
    seekBar.setProgress(value);

    return view;
}
/**
 * {@inheritDoc}
 */
public void onProgressChanged(SeekBar seek, int newValue,
        boolean fromTouch) {
    // Round the value to the closest integer value.
    if (stepSize >= 1) {
        value = Math.round(newValue/stepSize)*stepSize;

    }
    else {
        value = newValue;
    }

    // Set the valueText text.
    float sValue = newValue*10;
    sValue = sValue/100;
    userPrefs = PreferenceManager
            .getDefaultSharedPreferences(getContext());
    Editor editor = userPrefs.edit();
    editor.putFloat("mpm", sValue);
    editor.commit();
    valueText.setText(Float.toString(sValue));

    callChangeListener(value);
}
/**
 * {@inheritDoc}
 */
public void onStartTrackingTouch(SeekBar seek) {
}
/**
 * {@inheritDoc}
 */
public void onStopTrackingTouch(SeekBar seek) {
}
/**
 * {@inheritDoc}
 */
public void onClick(DialogInterface dialog, int which) {
    // if the positive button is clicked, we persist the value.
    if (which == DialogInterface.BUTTON_POSITIVE) {
        if (shouldPersist()) {
            persistInt(value + minimumValue);
        }
    }

    super.onClick(dialog, which);
}
@Override
protected void onDialogClosed(boolean positiveResult) {
    // TODO Auto-generated method stub
    super.onDialogClosed(positiveResult);
    persistInt(value + minimumValue);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:45:25.923

只是做了一个快速搜索，但为了你的上下文尝试

```
this.getDialog().getContext() 
```

# c# - Facebook C# SDK 版本 6.0.20 & FacebookMediaObject

> ID：12012079
> 
> 赞同：1
> 
> 时间：2012-08-17T19:33:33.770
> 
> 标签：c#, facebook-c#-sdk

我正在尝试使用 FacebookMediaObject 并且在尝试这样做时遇到了一个奇怪的问题，即对象上没有属性。这是一个屏幕截图：

![缺少属性：](../Images/7e1b5502315d064f3faa77786ba18929.png)

我正在使用 Visual Studio 2012，仅供参考。

对此的任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:55:28.637

您是否在顶部使用 using 关键字向 FacebookMedia 程序集添加引用..？你能展示更多关于你想要做什么或完成什么的代码吗？？尝试在 .cs 文件顶部删除您**using**中不必要的程序集。

# grails - Spring框架NoSuchMethodFound Tomcat错误

> ID：12012083
> 
> 赞同：1
> 
> 时间：2012-08-17T19:33:50.323
> 
> 标签：grails, spring-security, intellij-idea, bamboo

我在一个使用 IntelliJ 的 4 人开发团队中工作，但由于某种原因，只有一个团队成员可以成功构建 WAR 文件并进行部署。所有其他成员将收到以下错误：

> 2012 年 8 月 17 日下午 2:14:31 org.apache.catalina.core.StandardContext 开始严重：错误 listenerStart 2012 年 8 月 17 日下午 2:14:31 org.apache.catalina.core.StandardContext 开始
> 
> 严重：上下文 [/xxx] 由于先前的错误而启动失败
> 
> 2012-08-17 14:14:40,171 [http-8080-1] 错误 context.ContextLoader - 上下文初始化失败
> 
> java.lang.NoSuchMethodError: org.springframework.web.context.support.XmlWebApplicationContext.getEnvironment()Lorg/springframework/core/env/ConfigurableEnvironment;

从我研究的所有内容来看，这是由 Spring Framework 中的版本冲突引起的，但对于我来说，我似乎无法解决这个问题。

有没有人遇到过这个问题？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:41:55.633

修改 catalina.sh/catalina.bat 以便使用该`-verbose:class`标志启动 java。它将产生大量输出，但您应该能够看到您从哪个 JAR 文件加载`org.springframework.web.context.support.XmlWebApplicationContext`，并且很可能它与您使用的 Grails 版本不同。从您的类路径中删除错误版本，希望您一切顺利。

# java - 何时在 java 中使用 expm1 而不是 exp

> ID：12012084
> 
> 赞同：6
> 
> 时间：2012-08-17T19:33:50.583
> 
> 标签：java, double-precision, exp

我对在 java 中使用 expm1 函数感到困惑 The Oracle java doc for Math.expm1 说：

> 返回 exp(x) -1。请注意，对于接近 0 的 x 值，expm1(x) + 1 的精确总和比 exp(x) 更接近 ex 的真实结果。

但是[这个页面](http://www.ibm.com/developerworks/java/library/j-math2/index.html)说：

> 但是，对于 x 的负值，大约为 -4 或更低，用于计算 Math.exp() 的算法表现相对较差，并且会出现舍入误差。用不同的算法计算 ex - 1 然后在最终结果上加 1 会更准确。

我们应该将 expm1(x) 用于负 x 值还是接近 0 值？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T19:38:19.197

在位级别的实现`double`意味着您可以将`double`s 存储在 0 附近，其精度要比`double`s 接近 1 的精度高得多。这就是为什么`expm1`可以为接近零的幂提供比`exp`can 更高的精度，因为`double`没有足够的精度来存储非常准确数字非常接近`1`。

我不相信您引用的文章是正确的，就 go 的准确性`Math.exp`而言（以 的限制为模`double`）。`Math.exp`规范保证结果在精确值的 1 ulp 范围内，这意味着 - 过度简化一点 - 相对误差最多为 2^-52，ish 。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-17T19:37:17.367

您`expm1(x)`用于任何接近 0 的值。正或负。

原因是因为`exp(x)`任何接近 0 的东西都会非常接近 1。因此当接近 0`exp(x) - 1`时会遭受破坏性抵消。`x`

`expm1(x)`被适当优化以避免这种破坏性的取消。

* * *

从数学方面：如果`exp`是使用它的泰勒级数实现的，那么`expm1(x)`可以通过简单地省略第一个来完成`+1`。

# facebook - 将打开图形对象中的评论加载到 Facebook 评论社交插件中

> ID：12012087
> 
> 赞同：1
> 
> 时间：2012-08-17T19:34:06.293
> 
> 标签：facebook, facebook-opengraph, facebook-comments

我创建了一个连接我的 facebook 应用程序的网站。用户可以登录并发布连接到具有开放图形、javascript sdk 的自定义对象的自定义操作。这也将在 'fb:explicitly_shared' 设置为 true 的情况下发布，因此它将在用户时间轴上生成一个帖子。所以这些自定义对象有自己的 url，在这些页面上我想有评论插件。我希望该对象页面（带有评论插件）和用户时间轴上的帖子分享评论。

我尝试在评论插件的“href”属性中设置很多不同的东西，但似乎没有任何效果。但是，我已经设法通过使用 FB.api() 调用“/objectid/comments”来获得时间线帖子的评论。我可以使用它来构建我自己的评论 ui，但我更愿意使用评论社交插件。有没有办法让它发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:53:09.233

Post ID 和 Open Graph Object ID 不同，所以我不相信他们可以分享评论。评论基于单个 Facebook ID。此外，目前无法从 API（仅限评论插件）向 Open Graph 对象写入评论，因此您无法真正为 OG 对象创建自己的评论插件。

# objective-c - 如果没有找到新帖子，则显示 UIAlertView

> ID：12012091
> 
> 赞同：0
> 
> 时间：2012-08-17T19:34:22.203
> 
> 标签：objective-c, uitableview, rss, uialertview, nsxmlparser

我正在为我的网站开发一个应用程序，该应用程序具有带有解析器的 RSS 提要。我做了一个刷新按钮来查找新帖子，它可以工作。但是现在，如果没有找到新帖子，我希望它显示一个 UIAlertView，上面写着“未找到帖子”。

这是我的刷新按钮

```
- (IBAction)refreshButton:(UIBarButtonItem *)sender
{

    // Create a new data container for the stuff that comes back from the service
    xmlData = [[NSMutableData alloc] init];

    // Construct a URL that will ask the service for what you want -
    // Note we can concatenate literal strings together on multiple lines in this way it
    // results in a single NSString instance
    NSURL *url = [NSURL URLWithString:
                  @"http://sephardijews.com/feed/"];

    // Putting the URL we made into an NSURLRequest, so we can connect to the url data that we specifed
    NSURLRequest *req = [NSURLRequest requestWithURL:url];

    // Creating a connecting that will exchange this request for the data from the URL we specifed
    connection = [[NSURLConnection alloc] initWithRequest:req
                                                 delegate:self
                                         startImmediately:YES];

    [[self tableView] reloadData];
    NSLog(@"%@\n %@\n %@\n", channel, [channel title], [channel infoString]);

} 
```

我怎么能这样做？带有if语句的东西对吗？

刷新按钮：

```
- (IBAction)refreshButton:(UIBarButtonItem *)sender
{

    // Create a new data container for the stuff that comes back from the service
    xmlData = [[NSMutableData alloc] init];

    // Construct a URL that will ask the service for what you want -
    // Note we can concatenate literal strings together on multiple lines in this way it
    // results in a single NSString instance
    NSURL *url = [NSURL URLWithString:
                  @"http://sephardijews.com/feed/"];

    // Putting the URL we made into an NSURLRequest, so we can connect to the url data that we specifed
    NSURLRequest *req = [NSURLRequest requestWithURL:url];

    // Creating a connecting that will exchange this request for the data from the URL we specifed
    connection = [[NSURLConnection alloc] initWithRequest:req
                                                 delegate:self
                                         startImmediately:YES];

    [[self tableView] reloadData];
    NSLog(@"%@\n %@\n %@\n", channel, [channel title], [channel infoString]);

    if ([[self tableView] numberOfRowsInSection:0] > someNumberVariableForLastCount) {
        someNumberVariableForLastCount = [[self tableView] numberOfRowsInSection:0];
        [[self tableView] reloadData];
    }else{
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"No New Posts" message:@"There were no new posts found" delegate:self cancelButtonTitle:@"Dismiss" otherButtonTitles:nil, nil];
        [alert show];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:44:37.360

这会将您指定的部分中的当前行计数与最后计数的变量进行比较：

```
 if ([[self tableView] numberOfRowsInSection:0] > someNumberVariableForLastCount) {
            someNumberVariableForLastCount = [[self tableView] numberOfRowsInSection:0];
            [[self tableView] reloadData];
        }else{
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"no new items" message:@"OH NO!!" delegate:self cancelButtonTitle:@"Dismiss" otherButtonTitles:nil, nil];
            [alert show];
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:39:41.577

Your `reloadData` call should occur in `connectionDidFinishLoading`, not right after you start the connection (it is an asynchronous network call, the table will be reloaded before anything is even fetched). The alert should be kicked off there too. You need to implement all the connection delegate stuff, hopefully you've done that. If not, basic example [here](https://stackoverflow.com/questions/2124421/are-there-complete-examples-that-make-use-of-all-the-nsurlconnection-delegate-me).

# android - 小部件不会填满平板电脑上的整个单元格

> ID：12012092
> 
> 赞同：0
> 
> 时间：2012-08-17T19:34:23.653
> 
> 标签：android, layout, widget, cell, tablet

我在多个教程中创建了一个小部件，但是在让小部件填充整个单元格时遇到了一些问题。

当我在像三星 Galaxy S 这样的小屏幕上加载小部件时，它会填满整个单元格空间，但在我的平板电脑上，小部件布局周围似乎有很大的边距或填充，以防止它填满整个单元格，但我的许多我下载的其他小部件填充了平板电脑上的整个 2x2 单元格区域。

这是我用于小部件大小的代码。

```
<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    android:initialLayout="@layout/widget"
    android:minHeight="146dp"
    android:minResizeHeight="146dp"
    android:minResizeWidth="146dp"
    android:minWidth="146dp"
    android:resizeMode="horizontal|vertical"
    android:updatePeriodMillis="10000" >

</appwidget-provider> 
```

以及小部件布局本身的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent" android:layout_height="match_parent"
    android:id="@+id/layout" android:background="@drawable/yellow">

    <TextView android:id="@+id/TextView01" android:layout_width="match_parent"
        android:layout_height="match_parent" style="@android:style/TextAppearance.Medium"
        android:layout_gravity="center" android:textColor="#000000"></TextView>

</LinearLayout> 
```

我也尝试将其添加到清单中，但它没有解决问题

```
<supports-screens
    android:smallScreens="true"
    android:normalScreens="true"
    android:largeScreens="true"
    android:xlargeScreens="true"
    android:anyDensity="true" /> 
```

我错过了什么会导致我的小部件无法填充平板电脑上的整个单元格区域？

![小部件比较的屏幕截图](../Images/7eb313a9843409d03b975ee6709580c1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T06:29:33.937

找到了解决方案！你只需要添加

```
<uses-sdk android:targetSdkVersion="8" /> 
```

进入清单。任何低于 14 的 targetSdk 都可以工作，并且允许您使用完整的单元格区域，因为直到 Android 4.0 - api 14 才实现小部件的自动填充。

# servlets - 使用 Java EE 发布到另一个站点

> ID：12012093
> 
> 赞同：0
> 
> 时间：2012-08-17T19:34:31.990
> 
> 标签：servlets, jsf-2, cdi

我们正在实施对遵循以下基本流程的打孔/oci 的支持：

我们的采购系统为外部网店打开一个新选项卡/窗口，并在我们的请求中附加一个名为 HOOK_URL 的参数。当用户完成后，外部站点将重定向到 hook_url 并执行发布。此处示例：http: [//help.sap.com/saphelp_crm20c/helpdata/en/30/67483936dd7607e10000000a11402f/content.htm](http://help.sap.com/saphelp_crm20c/helpdata/en/30/67483936dd7607e10000000a11402f/content.htm)

该系统对我们来说是一个黑匣子，我们基本上只是应该检索帖子，然后将表单数据处理成我们需要的任何信息，并通过我们的业务逻辑将其发送出去。

所以我需要构建一个简单的测试应用程序，它可以扮演外部网店的角色，我需要我们的系统来发送和接收。

我们正在使用 servlet 2.5、JSF 2.0 和 CDI。但我猜我将需要一个或两个好的旧 servlet 来实现此目的。

到目前为止，我得到的是：

*   采购系统执行window.open并发送到测试系统
*   测试系统呈现一个非常基本的 html 页面并发布到一个重定向到 hook_url 的简单 servlet

*   采购系统得到响应

但是我不知道该怎么做才能真正执行帖子？当我收到来自测试系统的响应时，这是一个全新的请求。我必须使用 servlet 吗？

我试图遵循一些指南，但示例映射得很差。它必须是按规范发布的帖子。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:47:43.273

通过使用 apache http 和 url 连接解决

# html - :before 元素重叠子元素

> ID：12012101
> 
> 赞同：1
> 
> 时间：2012-08-17T19:35:03.253
> 
> 标签：html, css, position, z-index, pseudo-element

我很难理解绝对定位的 :before 元素。我在一个大引号之后坐在推荐信后面。我使用了一个 :before 元素，因为它是一种字体，因此可以针对视网膜显示器进行扩展，为图像节省了额外的 http 请求（我没有任何其他可以用来制作精灵的图像），它还为我提供了更多的灵活性位置（背景图像需要在元素的左侧进行填充，这意味着使用我的网格并在我使用 CSS 的其他页面之间失去一致性）。

希望这是有道理的！我遇到的问题是 :before 元素覆盖了它上面的文本。如果只是文本，问题不大（尽管仍然是个问题），但那里有一个不能完全点击的链接……</p>

这是我的问题的 jsFiddle：http: [//jsfiddle.net/tempertemper/KzQZQ/](http://jsfiddle.net/tempertemper/KzQZQ/)

我假设 :before 在 li 元素上，它会位于块引用的后面并引用，但看起来情况并非如此。

我已经尝试过 z-index 并且似乎无法使其全部正常工作。我也尝试过更改块引用和引用的位置值，但没有任何乐趣。

谢谢参观 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T20:25:39.490

我也注意到 Chrome 中的问题。通过在 :before 中添加背景，您可以真正看到正在发生的事情（我经常使用的技巧），或者您可以尝试 Firefox 中的 3D 视图。您的怀疑是正确的，支架实际上位于链接的顶部。这是有道理的，因为在应用 css 之前渲染了 DOM。添加 z-index 确实解决了这个问题。我更新了你的小提琴：http: [//jsfiddle.net/KzQZQ/1](http://jsfiddle.net/KzQZQ/1)

这应该解决它。奇怪的是这对你不起作用，但也许你做错了什么......如果你对此有任何问题，请告诉我们。

# entity-framework - EF 代码第一个循环引用

> ID：12012106
> 
> 赞同：2
> 
> 时间：2012-08-17T19:35:25.517
> 
> 标签：entity-framework, entity-framework-4

我有一个关于实体框架的问题。在我们的项目中，我们需要有一些循环引用，比如这个：

```
public class OptionClusterSet
{
    public int ID { get; set; }

    public virtual ICollection<OptionCluster> OptionClusters { get; set; }
}

public class OptionCluster
{
    public int ID { get; set; }

    public long OptionClusterSetId { get; set; }

    public virtual OptionClusterSet OptionClusterSet { get; set; }
} 
```

问题是，例如，每当我们尝试**使用 eager loading**获取包含其 OptionCluster的 OptionClusterSet 时，OptionCluster 都会尝试加载其 OptionClusterSets 等等。所以我们得到一个无限循环。

有没有办法配置它以使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:54:13.367

除非您尝试对其进行序列化，否则它开箱即用即可正常工作 - 序列化需要一些特殊处理（属性）以让序列化程序识别循环引用。

急切加载仅加载您在`Include`调用中指定的级别，仅此而已。其他所有内容都可以通过延迟加载加载，但 EF 不会再次加载已加载的关系。在某些情况下它无法按预期工作 - 例如 POCO 生成器中的导航属性修复（它会延迟加载额外的数据以修复反向导航属性）。

# vim - vim：替换块

> ID：12012108
> 
> 赞同：1
> 
> 时间：2012-08-17T19:35:39.503
> 
> 标签：vim

假设我有这段文字：

```
something "something else"
something here "just another quoted block" 
```

我想用“只是另一个引用的块”替换“其他东西”，所以我这样做：

```
/quot<enter>   (to jump to second quoted block searching for the string "quot")
yi"            (to yank inner text for current quoted block)
?else<enter>   (to jump back to the first quoted block wich contains "else")
vi"            (to visually select the quoted block)
p              (to paste yanked text) 
```

这可行，但我想知道最后两个步骤是否可以替换为单个步骤，以避免视觉模式。我知道在击键方面并不是一个巨大的收获，但我认为 Vim 哲学会鼓励我正在尝试做的事情，每次我这样做时，我的大脑都会不断地询问这个命令。:-P

到目前为止我尝试了什么：

r（替换）只替换一个字符 c（更改）让我进入插入模式并且不允许我粘贴文本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T19:43:14.203

```
"_di"P 
```

删除黑洞寄存器的内部引号；在光标之前粘贴最后一次拉动。

或者

```
ci"<Ctrl-R>0<ESC> 
```

更改内部引号以检索最后一个 yank；离开插入模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T19:47:55.913

使用我的[ReplaceWithRegister 插件](http://www.vim.org/scripts/script.php?script_id=2703)，最后两个步骤将是`gri"`。它还提供`grr`（替换当前/ [count] 行）；虽然它只节省了一点打字，但我觉得这是必不可少的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T20:11:51.780

击键明智，`j$yi"k`然后`vi"p`实际上可能是最快的。但是，如果您绝对必须进入插入模式，那么您可以`j$yi"k`使用`"_ci"<C-r>"`或`ci"<C-r>0`. 运算符允许您将`:help i_CTRL-R`寄存器的内容置于插入模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T10:37:21.683

我通常会尽量保持简单，使用我觉得对日常命令更直观的方式：

```
j
yi"
k
ci"
<ESC>
p 
```

# php - codeigniter - 从 API 返回数据的正确方法

> ID：12012109
> 
> 赞同：1
> 
> 时间：2012-08-17T19:35:45.113
> 
> 标签：php, api

我正在尝试创建一个 API。

我有一个控制器做某事，并返回让我们说“ABC”作为一个字符串。我的网址如下所示：

```
 http://myserver/myapp/myAPImethod/parm1 
```

在方法内部，我有这样的代码：

```
 header ('Content-Type: application/json; charset=UTF-8');
    $model= str_replace("%snv%"," ",$model);
    echo json_encode($model); 
```

使用此 API 的应用程序具有执行以下操作的控制器：

```
public function curl($url){
  //echo 'in the routine';
    $ch=curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $data=curl_exec($ch);
    print_r($data);
    curl_close($ch);
    return $data;
  }
    $url = "http://myserver/myapp/index.php/myAPImethod/hname";
    $jsondata = $this->curl($url);      
    //print_r(json_decode($jsondata)); 
```

我的问题是：当我运行使用我的 API 的应用程序时，因为我有一个 echo 语句，它在页面上显示“ABC”。但我不希望它显示结果。我只是希望它将数据传递给消费应用程序。我尝试将 API 方法中的 echo 语句更改为“return”语句，但我没有收到任何数据发送给调用者。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-25T05:37:23.427

创建 JSON 视图并将数据传递给 json 视图

```
// In view create a file json_view.php and paste this content

// RFC4627-compliant header
header('Content-type: application/json');

// Encode data
if(isset($response)) {
    echo json_encode($response);
}
else
    echo json_encode(array('error' => true)); 
```

在你的控制器中

```
// Build our view's data object
$data = array('response' => $response_data);
// Load the JSON view
$this->load->view('json_view', $data); 
```

# unit-testing - 如何对在密封的非泛型类中调用泛型方法的非泛型方法进行单元测试？

> ID：12012110
> 
> 赞同：0
> 
> 时间：2012-08-17T19:35:50.893
> 
> 标签：unit-testing, rhino-mocks

使用`[assembly:InternalsVisibleTo()]`和

```
public sealed class AppService
{
    //TODO: fix dev's spelling
    //want to test this
    public AddSubscribtionResponse AddSubscribtion(AddSubscribtionRequest request)
    {
        return ExecuteQueryProc<AddSubscribtionResponse>("spAddAppToUserGroup", request).First();
    }

    //I want to stub or interaction test the call to here
    #if DEBUG
    internal
    #endif
    List<T> ExecuteQueryProc<T>(string query, object parameters = null)
    {
        var cn=GetConnection();
        //DatabaseCommand is a static class =(
        return DatabaseCommand.ExecuteQueryProc<T>(cn, query, parameters);
    }
} 
```

我在让 Rhino 存根或拦截 Execute Query proc 方法方面所做的每一次尝试都失败了。

```
var service = MockRepository.GeneratePartialMock<AppService>(null);
service.Stub(f => f.ExecuteQueryProc<AddSubscribtionRequest>(null, null)).IgnoreArguments().Return(new List<AddSubscribtionRequest>());

var expected = new AddSubscribtionRequest();
var actual = service.AddSubscribtion(expected); 
```

投掷 `System.InvalidOperationException: ExecuteReader: CommandText property has not been initialized`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:52:30.970

从你的类中删除“密封”（如果它不能从它继承，Rhino.Mocks 就不能代理你的类）。并且 ExecuteQueryProc 必须是虚拟的才能存根其功能。

# paypal - Paypal 标准 - 是否可以让用户留在网站上

> ID：12012111
> 
> 赞同：1
> 
> 时间：2012-08-17T19:35:51.630
> 
> 标签：paypal

正如问题标题所解释的那样 - 当使用贝宝标准时，是否可以让用户留在现场，而不是引导他们到贝宝登录并授权付款。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:50:52.743

使用网站付款标准（基于 HTML 的常规“立即购买”/“添加到购物车”按钮）：否。这是不可能的。
如果您希望买家留在您的网站上并仍然使用 PayPal 付款，您需要与基于 API 的解决方案集成，例如自适应嵌入式支付或数字商品快速结账。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:37:42.553

如果 PayPal 可以集成到您的网站中，它可能会提供更好的购买流程，但用户会知道他们实际上正在登录 PayPal 并且他们的用户 ID/密码没有被泄露吗？

# linq - 请求的操作无法完成，因为连接已断开

> ID：12012116
> 
> 赞同：0
> 
> 时间：2012-08-17T19:36:01.217
> 
> 标签：linq

这段代码有什么问题，我该如何解决？

我正在使用 .net 3.5、Sql Server 2008 Express 版本和 Windows 7 64。我收到此错误：

[UpdateFileStatus] 错误 -
System.InvalidOperationException：由于连接中断，请求的操作无法完成。在 System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransaction(TransactionRequest transactionRequest, 字符串名称, IsolationLevel iso, SqlInternalTransaction internalTransaction, Boolean isDelegateControlRequest) 在 System.Data.SqlClient.SqlDelegatedTransaction.Initialize() 在 System.Transactions.TransactionStatePSPEOperation.PSPEInitialize(InternalTransaction tx, IPromotableSinglePhaseNotification promotableSinglePhaseNotification) 在 System.Transactions.TransactionStateActive.EnlistPromotableSinglePhase(InternalTransaction tx, IPromotableSinglePhaseNotification promotableSinglePhaseNotification, Transaction atomicTransaction) 在 System.Transactions.Transaction。`1.System.Linq.IQueryProvider.Execute[TResult](Expression expression) at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`StorageQuest.Ovm.Connection.Dal.FilesDal.UpdateFileStatus(Guid fileId, Int32) 处的 1 个源，表达式`1 谓词) FileFolderId, Int32 fileFolderFileId, Int16 fileVersion, Guid discId, FileStatus fileStatus) at StorageQuest.Ovm.Connection.Bll.FilesBll.UpdateFileStatus(Guid fileId, Int32 fileFolderId, Int32 fileFolderFileId, Int16 fileVresion, Guid discId, FileStatus fileStatus)

```
 public bool UpdateFileStatus(Guid fileId, int fileFolderId, int fileFolderFileId, short fileVresion, Guid discId, FileStatus fileStatus)
    {
        FilesDal filesDAL = new FilesDal(this.connection);

        try
        {
            using (TransactionScope transcope = new TransactionScope(TransactionScopeOption.Required, TimeSpan.Zero ))
            {
                bool result = filesDAL.UpdateFileStatus(fileId, fileFolderId, fileFolderFileId, fileVresion, discId, fileStatus);
                transcope.Complete();
                return result;
            }
        }
        catch (Exception ex)
        {
            SqlConn.LogConnection.Error(null, ex);
        }

        return false;
    }

        internal bool UpdateFileStatus(Guid fileId, int fileFolderId, int fileFolderFileId, short fileVersion, Guid discId, FileStatus fileStatus)
    {
        File file = null;

        try
        {
            file = GetFile(fileId, fileFolderId, fileFolderFileId, fileVersion);
        }
        catch (Exception ex)
        {
            SqlConn.LogConnection.Error(null, ex);
        }

        if (file == null)
            return false;

        file.FileDiscID = discId;
        file.FileStatus = (byte)fileStatus;

        try
        {
            return SaveFile(file);
        }
        catch (Exception ex)
        {
            SqlConn.LogConnection.Error(null, ex);
        }

        return false;
    }

        internal File GetFile(Guid fileId, int fileFolderId, int fileFolderFileId, short fileVersion)
    {
        using (FilesDataContext fileDC = new FilesDataContext(this.connection)
            {
                DeferredLoadingEnabled = false,
                CommandTimeout = 0
            })

            return fileDC.Files.FirstOrDefault(
                    f => f.FileID.Equals(fileId) &&
                         f.FileFolderID.Equals(fileFolderId) &&
                         f.FileFolderFileID.Equals(fileFolderFileId) &&
                         f.FileVersion.Equals(fileVersion)
                            );
    }

        internal bool SaveFile(File file)
    {
        ChangeSet changeSet = null;
        int changeCount = 0;

        using (FilesDataContext fileDC = new FilesDataContext(this.connection)
            {
                DeferredLoadingEnabled = false,
                CommandTimeout = 0
            })
        {
            if (file.FileRowVersion == null)  //insert a file
            {
                fileDC.Files.InsertOnSubmit(file);
                changeSet = fileDC.GetChangeSet();
                changeCount = changeSet.Inserts.Count;
            }
            else                              //updates a file
            {
                fileDC.Files.Attach(file, true);
                changeSet = fileDC.GetChangeSet();
                changeCount = changeSet.Updates.Count;
            }

            try
            {
                fileDC.SubmitChanges();
            }
            catch (ChangeConflictException cce)
            {
                fileDC.Log = Console.Out;
                Console.WriteLine(cce);
                SqlConn.LogConnection.Error(null, cce);
                //SqlConn.ChangeConflictException(fileDC);
                return false;
            }
            catch (InvalidOperationException ioe)
            {
                SqlConn.LogConnection.Error(null, ioe);
                return false;
            }
            catch (Exception ex)
            {
                SqlConn.LogConnection.Error(null, ex);
                return false;
            }
        }

        return !changeCount.Equals(0) ? true : false;
    } 
```

先感谢您。

# asp.net - 在 BeforePerformDataSelect 事件期间 DevExpress AspxGridView GetRowValues

> ID：12012117
> 
> 赞同：0
> 
> 时间：2012-08-17T19:36:02.593
> 
> 标签：asp.net, devexpress, aspxgridview

因此，我在该主网格中有一个主网格和一个详细网格。

我通过 BeforePerformDataSelect 从我的父网格中获取主密钥并将这个值放入会话变量中。那时我还需要从我所在的特定行中获取一个值。让我们称该变量为 SENT_DATE。

这是一些示例代码。

```
Protected Sub gvDetails_BeforePerformDataSelect(ByVal sender As Object, ByVal e As EventArgs)
        Dim gvDetails As ASPxGridView = (TryCast(sender, ASPxGridView))
        Session("ID_NUMBER") = gvDetails.GetMasterRowKeyValue
        Session("SENT_DATE") = gvDetails.GetRowValues("SENT_DATE")
End Sub 
```

我以前使用过很多 DevExpress 产品，但已经有一段时间了。如果我没记错的话，通常我只是抓住 e.VisibleIndex 并且我可以从那里开始，但在这个特定的事件中我无法抓住这个。我知道上面的代码对于获取变量 SENT_DATE 是不正确的，但我不确定这里该怎么做。

任何想法，建议将不胜感激。谢谢。我已经深入搜索了 DevExpress 论坛。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T08:47:10.477

您可以使用[FocusedRowIndex](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridView_FocusedRowIndextopic)属性。

```
Session("SENT_DATE") = gvDetails.GetRowValues(gvDetails.FocusedRowIndex, "SENT_DATE") 
```

# sql - wordpress $wpdb sql查询

> ID：12012118
> 
> 赞同：0
> 
> 时间：2012-08-17T19:36:05.510
> 
> 标签：sql, wordpress

我正在开发一个 WordPress 插件，我需要一些帮助。在这种情况下，我已经创建了一个名为“wp_pfot”的表，并在该表中创建了一个名为“title”的行。我希望能够检查“title”中的值是否不存在，如果不存在，则执行操作。我已经尝试过了，但它似乎不起作用。

```
global $wpdb
$table_name = $wpdb->prefix . "pfot";
$title = "some text";

if(!$wpdb->get_row("SELECT title FROM $table_name WHERE title = '" . $title . "'", 'ARRAY_A')) {
//do something
} 
```

任何帮助将非常感激！！谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:14:26.133

ARRAY_A 是一个常量，而不是字符串。

```
global $wpdb
$table_name = $wpdb->prefix . "pfot";
$title = "some text";

if($wpdb->get_row("SELECT title FROM $table_name WHERE title = '$title'", ARRAY_A)) {
//do something
} 
```

# java - 让客户端有选择地处理 Java 中的错误的模式

> ID：12012119
> 
> 赞同：0
> 
> 时间：2012-08-17T19:36:06.663
> 
> 标签：java, exception-handling

我正在围绕 DefaultHttpClient 编写一个包装器来处理一些容易出错的配置选项。例如，我将预先配置一切以正确处理 UTF-8 并干净地关闭连接。

当返回非 200 时，我想到了客户端为特定状态代码注册一个处理程序，然后调用它。

我会提供一些默认处理程序来处理简单的情况。

这是一个干净的 API 的好模式吗？如果我抛出异常，客户端必须处理可能根本不会发生的情况，因为我必须根据可能的 HTTP 状态代码（或大多数）抛出异常。

我喜欢处理程序的一点是我可以提供几个可能被覆盖的“默认处理程序”......

我想听听你的意见，也许会得到一些更有创意的想法。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T19:40:16.483

Currently, accepted practice for Java APIs is to employ unchecked exceptions, so client won't need to change it's internal code just to accommodate API's exceptions into client's codebase.

Instead, if you use unchecked exceptions, you'll save your code unchanged except the places where you really need to handle exceptions.

Here're slides about Robert Martin's "Clean code" book which talk about error handling best practices: [slides](http://www.slideshare.net/hebel/clean-code).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T19:38:26.780

我不会为每个 http 错误代码创建不同的异常。最多创建一两个一般异常并将准确的错误代码存储为异常的一部分。这样，如果客户端代码只想记录或忽略它们，它可以，或者它可以根据错误代码获取更多详细信息。

# ruby - 什么是< 我正在学习 Ruby，在我使用的书中，有一个这样的示例代码 #... restaurant = Restaurant.new restaurant.name = "Mediterrano" restaurant.description = < <desc 0="" 1="" 2="" 3="" 4="" 11="" 3709="" one="" of="" 问问题="" 2012-08-17t19:36:11.890="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" 我正在学习="" ruby，在我使用的书中，有一个这样的示例代码="" #...="" restaurant="Restaurant.new" restaurant.name="Mediterrano" restaurant.description="<<DESC" the="" best="" italian="" restaurants="" in="" kings="" cross="" area,="" mediterraneo="" will="" never="" leave="" you="" disappointed="" desc="" 有人可以向我解释上述示例中="" <<desc="" 的含义吗？它与常见的字符串双引号有何不同？="" 它允许以可读的方式创建多行字符串常量。请参阅http:="" en.wikibooks.org="" wiki="" ruby_programming="" here_documents。="" rubyheredoc="" 回答="" answer="" 它用于创建多行字符串。基本上，'<<="" desc'="" 告诉="" ruby="" 考虑接下来的所有内容，直到下一个="" 'desc'="" 关键字。“desc”不是强制性的，因为它可以用其他任何东西代替。="" a="<<STRING" here="" multiline="" string="" <<="" 运算符后跟一个标识文档结束的标识符。结束标记称为终止符。终止符之前的文本行连接在一起，包括换行符和任何其他空格。="" http:="" here_documents="" 于="" 2012-08-17t19:45:19.120="" 2012-08-17t19:43:39.907="" 它被称为heredoc或="" heredocument。它允许您编写多行代码。您可以在终端中测试它！="" 2017-09-19t08:53:21.390="" related="" javascript="" -="" 图片按钮事件="" wsdl="" 将="" web="" 服务请求参数设为必填字段="" c#="" 如何将datatable中的空数据设="" 置为空字符串="" 具有另一个结构的固定大小数组的结构="" jquery="" jquery如何获取元素html加上textarea元素的文本="" spring="" 异常="" org.springframework.validation.beanpropertybindingresult="" xdate="" vs="" datejs="" c++="" 返回类型的模板参数减少="" python="" cython="" 中的向量分配="" android="" 未找到="" google="" maps="" api="" 密钥="" reference="" php × 1429865="" c="" c++ × 756500="" nginx × 49975="" mongodb × 159057="" mybatis × 3233="" anaconda × 13410="" pycharm × 14671="" python × 1902243="" vscode × 56040="" docker × 110988="" github × 49000="" flask × 49129="" ffmpeg × 24037="" jmeter × 16910="" matplotlib × 63493="" bootstrap × 54641<="" h1="">> ID：12012121
> 
> 赞同：2
> 
> 时间：
> 
> 标签：ruby, heredoc

我正在学习 Ruby，在我使用的书中，有一个这样的示例代码

```
#...
restaurant = Restaurant.new
restaurant.name = "Mediterrano"

restaurant.description = <<DESC
One of the best Italian restaurants in the Kings Cross area, 
Mediterraneo will never leave you disappointed
DESC

#... 
```

有人可以向我解释上述示例中 <<DESC 的含义吗？它与常见的字符串双引号有何不同？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-17T19:45:19.120

它用于创建多行字符串。基本上，'<< DESC' 告诉 ruby​​ 考虑接下来的所有内容，直到下一个 'DESC' 关键字。“DESC”不是强制性的，因为它可以用其他任何东西代替。

```
a = <<STRING
Here
is
a
multiline
string
STRING 
```

<< 运算符后跟一个标识文档结束的标识符。结束标记称为终止符。终止符之前的文本行连接在一起，包括换行符和任何其他空格。 [http://en.wikibooks.org/wiki/Ruby_Programming/Here_documents](http://en.wikibooks.org/wiki/Ruby_Programming/Here_documents)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T19:43:39.907

它允许以可读的方式创建多行字符串常量。请参阅[http://en.wikibooks.org/wiki/Ruby_Programming/Here_documents](http://en.wikibooks.org/wiki/Ruby_Programming/Here_documents)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-19T08:53:21.390

它被称为[**heredoc**或 heredocument](https://en.wikipedia.org/wiki/Here_document)。它允许您编写多行代码。您可以在终端中测试它！</desc>

# java - 可以将 XmlPullParser 配置为不忽略空格吗？

> ID：12012122
> 
> 赞同：1
> 
> 时间：2012-08-17T19:36:19.490
> 
> 标签：java, android, android-xml

我正在使用 XmlPullParser 来解析一些自定义 XML。我像这样打开XML文件......

```
XmlPullParser xpp = activity.getResources().getXml(R.xml.myXML); 
```

后来我阅读了以下 XML 节点

```
<L>  ####</L> 
```

使用代码

```
String str = "";
if( xpp.next() == XmlPullParser.TEXT )
    str = xpp.getText();
return str; 
```

而不是返回

```
'  ####' 
```

我明白了

```
' ####' 
```

（为清楚起见，我添加了单引号。）注意缺少的前导空格。

看来 getText 正在剥离前导空间？当 XML 不包含前导空格时，我的代码按预期工作。

我找不到任何允许我告诉它保留所有空格的 XMLPullParser 属性。我也不能更改 XML 以在带有前导空格的文本周围添加双引号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:27:00.070

XmlPullParser.next() 和 XmlPullParser.getText() 可以以不可预知的方式分几部分返回内容。在您的情况下，如果它在 xpp.next() 上迭代而不连接各个部分，则可能第一个空格字符作为第一部分返回并由您的程序静默删除。算法应该更多的是：

```
String str = "";
while (xpp.next() == XmlPullParser.TEXT) {
    str += xpp.getText();
}
return str; 
```

# node.js - node-postgres“事件发射器样式”与“回调样式”

> ID：12012126
> 
> 赞同：3
> 
> 时间：2012-08-17T19:36:38.723
> 
> 标签：node.js, postgresql, node-postgres

[node-postgres](https://github.com/brianc/node-postgres/)声明如下：

> node-postgres 支持“事件发射器”样式 API 和“回调”样式。回调风格更简洁，通常更受欢迎，但事件 API 可以派上用场。它们可以混合搭配。

使用事件发射器 API，我可以执行以下操作：

```
var db = new pg.Client("insert-postgres-connection-info");
db.connect(); 
```

然后我可以`db`使用`db.query('sql statement here')`. 使用回调样式，每次我想运行查询时都会执行以下操作：

```
pg.connect(conString, function(err, client) {
  client.query("sql statement", function(err, result) {
    // do stuff
  });
}); 
```

所以我的问题是为什么“通常首选”使用回调样式？每次对数据库做某事时打开一个连接不是效率低下吗？使用回调样式有什么好处？

**编辑**

我可能会误解他所说的“回调样式”是什么意思（我不是在开玩笑，我的 JavaScript 不是很强大），但我的问题是关于连接方法。我假设以下是回调样式连接方法：

```
// Simple, using built-in client pool

var pg = require('pg'); 
//or native libpq bindings
//var pg = require('pg').native

var conString = "tcp://postgres:1234@localhost/postgres";

//error handling omitted
pg.connect(conString, function(err, client) {
  client.query("SELECT NOW() as when", function(err, result) {
    console.log("Row count: %d",result.rows.length);  // 1
    console.log("Current year: %d", result.rows[0].when.getYear());
  });
}); 
```

以下是 EventEmitter API 连接方法：

```
// Evented api
var pg = require('pg'); //native libpq bindings = `var pg = require('pg').native`
var conString = "tcp://postgres:1234@localhost/postgres";

var client = new pg.Client(conString);
client.connect(); 
```

如果我只是在这里混淆了术语，我的问题仍然存在。`pg.connect(do queries)`每次使用时都会打开一个新连接（不是吗？）而

```
var client = new pg.Client(conString);
client.connect(); 
```

打开一个连接，然后允许您`client`在必要时使用它来运行查询，不是吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T20:05:12.887

EventEmitter 风格更适合这种类型的东西：

```
var query = client.query("SELECT * FROM beatles WHERE name = $1", ['John']);
query.on('row', function(row) {
  console.log(row);
  console.log("Beatle name: %s", row.name); //Beatle name: John
  console.log("Beatle birth year: %d", row.birthday.getYear()); //dates are returned as javascript dates
  console.log("Beatle height: %d' %d\"", Math.floor(row.height/12), row.height%12); //integers are returned as javascript ints
}); 
```

通过混合和匹配，您应该能够做到以下几点：

```
// Connect using EE style
var client = new pg.Client(conString);
client.connect();

// Query using callback style
client.query("SELECT NOW() as when", function(err, result) {
  console.log("Row count: %d",result.rows.length);  // 1
  console.log("Current year: %d", result.rows[0].when.getYear());
}); 
```

请注意，即使使用回调样式，您也不会在每次要执行查询时都打开连接；最有可能的是，您会在应用程序启动时打开一个连接并在整个过程中使用它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-03T11:44:19.247

有利有弊，您选择的一个取决于您的用例。

## 用例 1：将结果集逐行返回给客户端。

如果您要以与从数据库中返回数据相同的方式（逐行）将数据返回给客户端，那么您可以使用事件发射器样式来减少延迟，我在这里将其定义为发出请求之间的时间并接收第一行。如果您改用回调样式，则会增加延迟。

## 用例 2：返回基于整个结果集的分层数据结构（例如 JSON）。

如果您要以 JSON 等分层数据结构向客户端返回数据（当结果集是层次结构的平面表示时，您会这样做以节省带宽），您应该使用回调样式，因为您可以'在收到所有行之前不要返回任何内容。您可以使用事件发射器样式并累积行（node-postgres 提供了这样的机制，因此您不必通过查询维护部分构建结果的映射），但这将是无意义的浪费，因为您不能返回任何结果，直到您收到最后一行。

## 用例 3：返回一个分层数据结构数组。

当返回一个分层数据结构的数组时，如果使用回调样式，您将有很多行要一次全部通过。这会阻塞很长一段时间，这是不好的，因为您只有一个线程来服务许多客户端。因此，您应该将事件发射器样式与行累加器一起使用。您的结果集应该这样排序，以便当您检测到特定字段的值发生变化时，您知道当前行代表要返回的新结果的开始，并且到目前为止累积的所有内容都代表现在完整的结果，您可以将其转换为您的分层形式并返回给客户端。

# c# - 从查询参数获取 URL

> ID：12012127
> 
> 赞同：0
> 
> 时间：2012-08-17T19:36:43.563
> 
> 标签：c#, url

**样本数据网址**

```
_http://abc.com/cache.ashx?feedURL=http://search.twitter.com/search.rss?q=from%3AAbbottNews&rpp=3&clientsource=TWITTERINC_WIDGET&include_entities=true&result_type=recent&1334673762143=cachebust 
```

我试图获取查询参数的值`FeedURL`并低于我得到的值；

**实际的：** `http://search.twitter.com/search.rss?q=from%3AAbbottNews&rpp=3&clientsource=TWITTERINC_WIDGET&include_entities=true&result_type=recent&1334673762143=cachebust`

**我得到了什么：** `http://search.twitter.com/search.rss?q=from%3AAbbottNews`

**必需**：我需要完整的 URL。

**注意：**它从第二个参数开始截断

**肮脏的解决方案：**
我尝试了所有建议，但我觉得没有更好的解决方案。没有别的办法，我做了一个肮脏的解决方案来完全获取 URL 的正确部分。

```
/// <summary>
/// Get Feed URL from raw URL
/// </summary>
/// <param name="rawURL"></param>
/// <returns></returns>
public static string GetFeedURL(string rawURL)
{
    int index = rawURL.IndexOf("=");
    string _rawURL = rawURL;

    if (index > 0)
        _rawURL = _rawURL.Substring(index).Remove(0, 1);

    return _rawURL;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T20:13:25.047

看起来这可能是因为 FeedUrl 中的第一个“&”字符可能被视为外部查询字符串的查询参数。您可能需要先对 FeedUrl 进行编码。这只是我最初的直觉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T20:13:35.827

将 URL 变量添加到 URL 时，您需要对它们进行 URLEncode ...

```
url = "http://url.com?id=" + HttpUtility.UrlEncode("...");
Response.Redirect(url); 
```

.. 和 URLDecode 他们在请求后与他们一起工作......

```
HttpUtility.UrlDecode(Request.QueryString["id"]); 
```

否则 QueryString 请求不知道如何处理所有额外的 ? 和 &。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T20:14:23.613

您提供的 URL 虽然有效，但不会以您期望的方式解析；它将按照当前的方式进行解析。除非对与号进行编码，否则不支持嵌套查询字符串。

# mongodb - Can't Connect to MongoDB from play app with salat: command failed [listDatabases]

> ID：12012129
> 
> 赞同：3
> 
> 时间：2012-08-17T19:36:47.200
> 
> 标签：mongodb, playframework-2.0, mlab, salat

我正在尝试开始使用 playframework 中的 salat 插件。我已经在其中配置了数据库，`application.conf`并将所有依赖项添加到文件中`Build.scala`，并将 salat 添加到`play.plugins`文件中。我实际上还没有在项目中添加任何代码，我只是按照 github 页面上的说明进行操作，然后尝试运行该项目。我收到以下错误消息

```
（服务器已启动，使用 Ctrl+D 停止并返回控制台...）

[info] play - mongodb [default] 连接到 heroku_app4620908@ds031907.mongolab.com:31907/heroku_app4620908
[错误] 应用程序 -

！@6bchnaacn - 内部服务器错误，请求 [GET /] ->

play.api.Configuration$$anon$1：配置错误[无法连接到[ds031907.mongolab.com/107.21.153.211:31907]]
    在 play.api.Configuration$.play$api$Configuration$$configError(Configuration.scala:71) ~[play_2.9.1-2.0.3.jar:2.0.3]
    在 play.api.Configuration.reportError(Configuration.scala:258) ~[play_2.9.1-2.0.3.jar:2.0.3]
    在 se.radley.plugin.salat.SalatPlugin$$anonfun$onStart$1.apply(SalatPlugin.scala:105) ~[play-plugins-salat_2.9.1-1.0.8.jar:1.0.8]
    在 se.radley.plugin.salat.SalatPlugin$$anonfun$onStart$1.apply(SalatPlugin.scala:98) ~[play-plugins-salat_2.9.1-1.0.8.jar:1.0.8]
    在 scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:194) ~[scala-library.jar:0.11.3]
    在 scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:194) ~[scala-library.jar:0.11.3]
引起：com.mongodb.CommandResult$CommandFailure：命令失败[listDatabases]：{“serverUsed”：“db-uri”，“errmsg”：“需要登录”，“ok”：0.0}
    在 com.mongodb.CommandResult.getException(CommandResult.java:88) ~[mongo-java-driver-2.8.0.jar:na
    在 com.mongodb.CommandResult.throwOnError(CommandResult.java:134) ~[mongo-java-driver-2.8.0.jar:na]
    在 com.mongodb.Mongo.getDatabaseNames(Mongo.java:356) ~[mongo-java-driver-2.8.0.jar:na]
    在 com.mongodb.casbah.MongoConnection.getDatabaseNames(MongoConnection.scala:190) ~[casbah-core_2.9.1-2.4.1.jar:2.4.1]
    在 se.radley.plugin.salat.SalatPlugin$$anonfun$onStart$1.apply(SalatPlugin.scala:103) ~[play-plugins-salat_2.9.1-1.0.8.jar:1.0.8]
    在 se.radley.plugin.salat.SalatPlugin$$anonfun$onStart$1.apply(SalatPlugin.scala:98) ~[play-plugins-salat_2.9.1-1.0.8.jar:1.0.8]

```

我很困惑，因为我将密码和所有内容都添加到了 conf 文件中。从日志看来，任何试图为我连接到数据库的东西都没有使用我提供的信息先登录。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T19:59:51.953

正如你所说，看起来根本问题是 MongoDB 拒绝了命令“listDatabases”。此命令[需要管理员访问](http://www.mongodb.org/display/DOCS/List+of+Database+Commands)MongoDB 进程，因为它会显示有关托管在那里的其他数据库的信息。

不幸的是，它返回的消息“需要登录”有点误导。您已登录！您只是无权列出数据库。

这是一个简单的实验，您可以自己尝试使用 MongoDB shell。看到“show dbs”失败并显示您在应用程序中收到的相同错误消息，但是“show collections”（不需要访问您自己以外的任何其他数据库）成功了吗？

```
% mongo ds031907.mongolab.com:31907/heroku_app4620908 -u heroku_app4620908 -p your_password
MongoDB shell version: 2.0.7
connecting to: ds031907.mongolab.com:31907/heroku_app4620908
> show dbs
Fri Aug 17 13:12:10 uncaught exception: listDatabases failed:{ "errmsg" : "need to login", "ok" : 0 }
> show collections
system.indexes
system.users 
```

*（注意：我使用自己的 MongoLab 帐户进行了此操作，并在此处复制和粘贴时修改了文本，因此您可以将其复制到终端中。）*

有没有办法避免调用 listDatabases ？我不熟悉您使用的框架。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T16:41:19.457

我也有这个问题...

它应该带有请求所有数据库名称的 SalatPlugin 的 onStart 方法：`source._2.connection.getDatabaseNames()`.

这段代码只是测试服务器的活跃度......

我要和 leon 核对一下我们怎么能做到这一点！可悲的是，在解决此问题之前，您将无法连接！

请继续关注这个问题[https://github.com/leon/play-salat/issues/23](https://github.com/leon/play-salat/issues/23)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T08:57:50.197

这在最新版本的 play-salat 中已修复，现在它使用 getCollectionNames 代替

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-21T03:33:31.530

> 使用管理员
> 
> db.addUser('userName', 'userPassword')
> 
> db.auth('用户名', '用户密码')
> 
> 显示数据库

爪哇：

DB db = mongo.getDB("YouDBName") ;

db.authenticate("userName", "userPassword".toCharArray()) ;

System.out.println(mongo.getDatabaseNames()) ;

# c# - 如何获取客户端代码的html标签innerHTML？

> ID：12012131
> 
> 赞同：0
> 
> 时间：2012-08-17T19:36:51.740
> 
> 标签：c#, jquery, asp.net, sharepoint

在共享点服务器上使用 asp.net 和 c# 我编辑了具有 runat="server" 的 div 标签的 innerhtml，并在其中放置了许多 html 代码和一个输入框（这个输入框是自动完成 jquery UI 输入框）。

我可以给输入框一个id。

现在如何在 c# 中访问输入框中的文本？

```
 searchbox.InnerHtml = @"
                <script type='text/javascript'>
                    $(function() {
                        var availableTags = [
                            " + results + @"
                        ];
                        $( '#tags' ).autocomplete({
                            source: availableTags
                        });
                    });
                </script>
                <div class='demo'>
                    <div class='ui-widget'>
                        <input id='tags'>
                    </div>
                </div>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:46:38.577

您需要一个 HTML 解析器。你可以试试[这个库](http://htmlagilitypack.codeplex.com/)。具体来说，如果您使用 Chrome .. 右键单击​​框本身并“检查它”。右键单击输入框，然后单击“复制 XPath”。这是路径，现在只需使用 HTMLAgilityPack 选择元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:57:06.753

您不能直接从服务器端代码访问输入框的值。您要么需要将其发回，要么通过 Ajax 请求将输入框的值发送到服务器。

使用表单回发并提交

```
<form action="yourpage.aspz" method="POST">
    <input type="text" name="inputbox" id="inputbox"/>
    <input type="submit" name="submit" value="submit"/>
</form> 
```

对于带有 JQuery 的 Ajax 代码：

```
<input type="text" name="inputbox" id="inputbox"/>
<input type="button" name="submit" value="submit" onclick="ajaxPost();"/>
<script type="text/javascript">
    function ajaxPost(){
        var inputBoxValue=$("#inputbox").val();
        $.post("yourpage.aspx", { inputbox: inputBoxValue } );
    }
</script> 
```

Yourpage.aspx.cs

```
 // ... some other code 
     var a = Request.Form("inputbox")
     // ... some other code 
```

# php - PHP：如何仅获取网站的当前文件夹

> ID：12012134
> 
> 赞同：1
> 
> 时间：2012-08-17T19:37:09.363
> 
> 标签：php

例如，我有一个网站指向这样的页面：

```
http://www.mysite.com/folder/file 
```

如何获得确定 /folder 以便我可以进一步引用 if 语句，例如

```
if /folder then echo something 
```

为什么我需要这个？

我试图告诉 facebook 从页面中选择哪个图像。实际上，我有一个非常简单的页面结构，facebook 应该拍摄的图像总是一开始，但不知何故，它确实会不时选择另一个图像。我猜是因为其他图像加载速度更快。rel="img_src" 的旧方法似乎不再起作用，因为我可以将它添加到想要的图像中。

当然，我使用开放图形协议来告诉 facebook 它应该使用哪个图像。

我正在使用 cms，我可以根据图像的 id 输出图像的路径。对于生活在两个不同文件夹中的不同类型的页面，我有两个不同的 id。

这将导致：

```
if index --> echo meta og for index img
else if /folderone (with id1) --> echo meta og for id1
else if /foldertwo (with id2) --> echo meta og for id2 
```

这就是为什么我需要知道文件夹名称。

现在有了答案，我有以下设置，只是你知道：

```
<?php $folder = dirname($_SERVER['SCRIPT_NAME']); ?>

<?php if (dirname($_SERVER['SCRIPT_NAME']) == "/") echo "<meta property='og:image' content='http://www.mysite.com/img/img.jpg'/>" ;?>
<?php if (dirname($_SERVER['SCRIPT_NAME']) == "/folderOne") echo "<meta property='og:image' content='http://www.mysite.com/img/{$img_id1}'/> " ;?>
<?php if (dirname($_SERVER['SCRIPT_NAME']) == "/folderTwo") echo "<meta property='og:image' content='http://www.mysite.com/img/{$img_id2}'/> " ;?> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T19:41:21.243

[parse_url](http://php.net/manual/en/function.parse-url.php) & [explode](http://ca.php.net/manual/en/function.explode.php)

```
$path = parse_url($url, PHP_URL_PATH); 
```

gives you

```
/folder/file 
```

then you can *explode()* to separate the path values and check the first one to see if it is 'folder'

Example here: [http://tehplayground.com/#7TIKAwp6J](http://tehplayground.com/#7TIKAwp6J) Example code:

```
$url = "http://www.mysite.com/folder/file";
$path = parse_url($url, PHP_URL_PATH);
$arr = explode("/",$path);
echo $arr[1]; // leading slash makes [0] "" 
```

outputs

> folder

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T19:44:29.143

```
$script = $_SERVER['SCRIPT_NAME'];
echo dirname($script); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T19:44:00.640

可能使用“获取当前工作目录”功能`getcwd()`？

1.  按目录分隔符展开。
2.  然后像这样抓住最后一个元素：

    ```
    $var = getcwd();
    $var = explode('\\', $var); // your OS might use '/' instead
    $var = end($var); 
    ```

我想这假设您没有使用某种使用路由的 MVC 框架。

我希望这会有所帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T19:52:57.160

我认为这比爆炸字符串更好：

```
function getCurrentDirectory(){
    $curDirPath = getcwd();
    return substr($curDirPath, strrpos($curDirPath, '/') + 1);
} 
```

`getcwd()`为您提供当前目录的路径，然后您可以`/`在其文件路径中最后一次出现之后立即截断它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-07T20:36:52.910

```
$dir_list = explode('/', dirname($_SERVER['SCRIPT_FILENAME']));
$this_folder = $dir_list[count($dir_list)-1];
...
if ($this_folder) == "folderOne") echo "...."
... 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-08-17T19:41:10.697

```
if(dirname('yoursite/folder')){ 
```

# php - Foreach PHP PDO 查询

> ID：12012137
> 
> 赞同：0
> 
> 时间：2012-08-17T19:37:21.627
> 
> 标签：php, foreach, pdo

我这个 PHP foreach 代码写得正确吗？

```
$colors = $_GET['color'];
$i = 0;
foreach (explode(' ', $colors) as $color) 
{
    $items = $con -> prepare(
        "SELECT * FROM item_descr WHERE color_base1 = :colorbase1");
    $items -> bindValue(":colorbase1", $color[$i]);
    $i++;
} 
```

我无法让 SQL 工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T19:40:49.207

我认为这应该满足您的要求 - 您`$color`在 foreach 中作为变量生成，但您将其作为数组访问。

```
$colors = explode(' ', $_GET['color']);
foreach ($colors as $color) 
{
    $items = $con -> prepare(
        "SELECT * FROM item_descr WHERE color_base1 = :colorbase1");
    $items -> bindValue(":colorbase1", $color);
} 
```

# google-apps-script - 如何使开关功能从电子表格/表单条目中提取其标准

> ID：12012139
> 
> 赞同：0
> 
> 时间：2012-08-17T19:37:30.903
> 
> 标签：google-apps-script

我对 Google Apps 脚本很陌生，我在让我的脚本的一部分工作时遇到了一些麻烦。看下面的开关功能：

```
function sendFormByEmail(e) {
 var emailSubject   = "Request for Sample";  

 // Set with your email address or a comma-separated list of email addresses.
 var yourEmail    = "staticemailgoeshere";

 // Set with your spreadsheet's key, found in the URL when viewing your spreadsheet.
 var docKey      = "SHEETKEYHERE";

 // If you want the script to auto send to all of the spreadsheet's editors, set this value as 1.
 // Otherwise set to 0 and it will send to the yourEmail values.
 var useEditors    = 0;

      switch () {
   case "Name 1":
      yourEmail = "emailaddress";
      break;
   case "name 2":
      yourEmail = "emailaddress";
      break;
   case "Name 3":
      yourEmail = "emailaddress";
      break;
   case "Name 4":
      yourEmail = "emailaddress";
      break;
   default:
      yourEmail = "defaultemail"
  }

 if (useEditors) {
  var editors = DocsList.getFileById(docKey).getEditors();
  if (editors) { 
   var notify = editors.join(',');
  } else var notify = yourEmail;
 } else {
  var notify = yourEmail;
 }

 // The variable e holds all the submission values in an array.
 // Loop through the array and append values to the body.

 var s = SpreadsheetApp.getActive().getSheetByName("Sheet1");
 var headers = s.getRange(1,1,1,s.getLastColumn()).getValues()[0];
 var message = "";
 for(var i in headers) {
  message += headers[i] + ' = '+ e.namedValues[headers[i]].toString() + '\n\n'; 
 }

 MailApp.sendEmail(notify, emailSubject, message); 
} 
```

现在，事情就是这样。上面的语句现在按预期工作。每次我从列表中选择一个名称时，它都会默认，因为我无法弄清楚如何让函数读取某个字段以从中提取数据。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T03:10:05.747

您的`switch`语句有一个空表达式，因此它将始终执行该`default:`案例。它应该测试什么？你`e`的函数的（未使用的）参数是什么？

# jquery - jquery使用显示内联块搜索所有CSS

> ID：12012143
> 
> 赞同：4
> 
> 时间：2012-08-17T19:37:47.077
> 
> 标签：jquery, css

是否可以通过属性：值而不是选择器/属性来搜索 CSS？或者这需要通过服务器脚本解析吗？

如果可能的话，我会计划创建一个脚本，如果选择器有，它会自动添加 IE7 hack：`display: inline-block`因为我厌倦了写作`*display: inline; zoom: 1;`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T19:50:39.093

如果将样式直接添加到元素中，则可以进行如下过滤：

**代码1**

`$("[style*='inline-block']");`

但是如果使用css计算样式，上面的代码将不会获取元素，这种情况下您可以使用以下内容。

**代码2**

```
$('*').filter(function() {
    return $(this).css('display') == 'inline-block';
}); 
```

所以如果我有以下html。

```
<div style="display: inline-block"></div>
<div class="someClass"></div> 
```

`Code1`只得到第一个。
`Code2`两者兼得。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T20:08:19.660

如果元素样式为 inline-block，则此代码应允许您处理某些内容。

```
$("body *").each(function (i) {
    if ($(this).css('display') == "inline-block") {
        //inline block - do what you need to do
        this.style.color = "blue";
        alert($(this).css('display'));            
    }
}); 
```

有关工作示例，请参见 jsfiddle [http://jsfiddle.net/nevtn/](http://jsfiddle.net/nevtn/)

这将是您需要的整个脚本：

```
$(document).ready(function(){

if ($.browser.msie  && parseInt($.browser.version, 10) === 7) {
    $("body *").each(function (i) {
        if ($(this).css('display') == "inline-block") {
            //inline block - do what you need to do
            $(this).css({'display':'inline', 'zoom':'1'});  
        }
    });
}

});​ 
```

example demo (faked IE7) [http://jsfiddle.net/nevtn/5/](http://jsfiddle.net/nevtn/5/)

# forms - 如何知道点击了哪个提交按钮？

> ID：12012144
> 
> 赞同：0
> 
> 时间：2012-08-17T19:37:53.817
> 
> 标签：forms, cakephp

我有这两个按钮，

```
<?php echo (($active_players >= 25 && !$active_players_check_bypass) ? $html->submit('Submit Registration', array('onclick'=>'return window.confirm("You have reached your maximum allowable players per team. In order to register this player, you must pay the $25.00 required overage fee in order to continue. Do you wish to continue with the registration?")')) : $html->submit('Submit Registration'));
  echo $html->submit('Register Player using Registration Credits', array('id'=>'submitregistrationusingcredits')); // this will use the credits of the team
?> 
```

第一个按钮是`Submit Registration`，另一个是`Register Player using Registration Credits`，现在有没有办法知道我点击了哪个按钮？我正在使用`CakePHP`并且我对此很陌生，有没有办法知道我点击了哪个按钮，以便在我的控制器中验证表单时，我将能够知道我点击了哪个按钮并拥有属于每个按钮的进程？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:56:06.970

在每个提交按钮上设置名称属性。

```
echo (($active_players >= 25 && !$active_players_check_bypass) ? $html->submit('Submit Registration', array('name'=>'submit1a', 'onclick'=>'return window.confirm("You have reached your maximum allowable players per team. In order to register this player, you must pay the $25.00 required overage fee in order to continue. Do you wish to continue with the registration?")')) : $html->submit('Submit Registration', array('name'=>'submit1b'));
echo $html->submit('Register Player using Registration Credits', array('name'=>'submit2', 'id'=>'submitregistrationusingcredits')); // this will use the credits of the team 
```

现在在您即将到来的页面上，您可以查看是否使用以下代码单击了第一个按钮：

```
if ( isset($_REQUEST['submit1a']) ) ... // some code
// or, if the first button has the second possibility
if ( isset($_REQUEST['submit1b']) ) ... // some code 
```

要查看是否单击了第二个按钮：

```
if ( isset($_REQUEST['submit2']) ) ... // some code 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T19:58:43.357

我对 CakePHP 的 HTMl 或 Form Helper（或您在那里使用的任何东西）并不十分熟悉。但是我认为如果您在第二个数组参数中添加一个名称参数：

```
$html->submit('Register Player using Registration Credits', array('name' => 'usingCredits', 'id' => 'submitregistrationusingcredits')); 
```

对两个提交按钮都这样做。然后，当您处理该请求时，您可以编写一些如下所示的代码：

```
if (isset($_POST['usingCredits'])) 
{
    // handle submission using credits
} 
else
{
    // handle another submission method
} 
```

您可能希望为两者指定一个名称并检查是否设置了每个名称。但这就是想法。

# javascript - 在jsp中获取屏幕宽度作为变量

> ID：12012158
> 
> 赞同：1
> 
> 时间：2012-08-17T19:38:31.583
> 
> 标签：javascript, css, jsp

我需要知道调整图像的大小（它需要作为 img src="blah.jpg?width=x 传递）所以我的页面可以显示为不同的大小，有人可以帮我吗？我只需要 x (width ) 作为 jsp 变量。

2021 年更新：哇，9 年后。如果你正在看这个（而且你们中的一些人仍然在看）——在过去的 9 年里，Javascript 已经取得了惊人的长足进步。正如下面的评论所说，这在 JSP 中是不可能的，但在 Javascript 和 CSS3 中是可能的。如果您试图确定页面的宽度以动态调整元素的大小，那么您可能不尊重多年来发展起来的响应式原则。研究 CSS Flexbox 并在设计时牢记这一点。

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T19:43:49.253

你所要求的不能以这种方式完成。您的 JSP 在服务器上呈现，并作为 HTML 发送到浏览器。只有当页面到达浏览器时，屏幕宽度才可用（使用 JavaScript）。因此，将其作为 JSP 变量是不可能的。

相反，您可以使用 JavaScript 获取上一页中的屏幕宽度，并将其设置为链接中的查询参数或表单的隐藏字段。当点击链接或提交表单时，您可以访问请求以获取屏幕宽度。

当然，如果用户可以通过直接在浏览器中输入该页面的 URL 来访问该页面，这将不起作用。

或者，在页面加载*后*使用 JavaScript 加载图像。此时您将拥有屏幕宽度，并且可以相应地构建 URL。本质上，您将使用`onload`正文（或`$(document).ready`在 JQuery 中）的事件来调用 javascript，将`src`图像的属性设置为您需要使用的 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-12T18:30:50.247

我有同样的问题，但后来意识到我可以通过以下方式解决它：
有一个启动页面，例如 tomcat 中的 index.html，它会在会话开始时自动调用并执行此操作：

```
<!DOCTYPE html>
<html>
<head>
    <script>
    var init=function() {
        var noi=window.innerHeight;
        url="myPage.jsp?rows="+noi;
        cm=document.getElementById('cm');
        cm.href=url;
        cm.click();
    }
    </script>
</head>
<body onload=init()>
<A style='' id=cm HREF=''>&nbsp;</A>
</body> 
```

在您的“myPage.jsp”页面中，在您的 java 代码中收集变量“rows”，您就可以开始使用了！

# wordpress - Sub menu bar not visible

> ID：12012162
> 
> 赞同：-1
> 
> 时间：2012-08-17T19:39:21.863
> 
> 标签：wordpress, css

The **sub menu** bar of this site is not visible i am using constellation theme of wordpress i have tried using changing margins but not able to figure it out it is responsive

no i am talking about child of the menu bar actually if u can see the code about page has 2 child submenu which should be visible as a dropdown but it is not visible

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:57:47.800

看你到目前为止提供的东西很难说。但是如果我看到您的页面，我会将此脚本视为 404，[链接](http://trichometechnology.com/wp-content/themes/constellationjs/script.js?ver=3.4.1)

这个 js 是否正在显示。隐藏您的菜单。我还看到导航的一部分已被注释掉。但是，如果您可以修复那些 2 404，它会更好地了解正在发生的事情。我猜导航显示/隐藏是由实际上不存在的脚本驱动的。

希望这可以帮助。

# html - 将图像（本地）上传到 Tinymce

> ID：12012163
> 
> 赞同：3
> 
> 时间：2012-08-17T19:39:33.270
> 
> 标签：html, image, plugins, upload, tinymce

我想问一下是否有任何插件可以将图像从我的本地系统上传到tinymce？Tinymce 有一个图像上传，但用于在线图像。此外，从本地系统上传图像是tinymce的高级功能，需要购买。那么，有没有一个免费的插件可以用来整合从本地系统上传图片到tinymce？谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:03:43.383

您可以编写自己的插件并将图像插入为 base64 编码的字符串。

示例：您需要从 Web 获取 javascript 函数并创建字符串 my_image_base64_string（已在此处给出）。该片段显示了如何在之后插入图像。使用自己的插件，您将能够创建一个按钮并使用例如弹出窗口。

```
var my_image_base64_string = 'R0lGODlhEAAOALMAAOazToeHh0tLS/7LZv/0jvb29t/f3//Ub//ge8WSLf/rhf/3kdbW1mxsbP//mf///yH5BAAAAAAALAAAAAAQAA4AAARe8L1Ekyky67QZ1hLnjM5UUde0ECwLJoExKcppV0aCcGCmTIHEIUEqjgaORCMxIC6e0CcguWw6aFjsVMkkIr7g77ZKPJjPZqIyd7sJAgVGoEGv2xsBxqNgYPj/gAwXEQA7';

tinymce.activeEditor.execCommand('insertHTML', false, '<img src="data:image/gif;base64,' + my_image_base64_string + '" width="16" height="14">'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-13T15:49:25.553

我在 Github 上创建了一个插件，它允许您上传图像并作为嵌入，之后该图像将自动转换为 Base64 数据字符串，该插件位于以下链接： [https ://github.com/buddyexpress/bdesk_photo](https://github.com/buddyexpress/bdesk_photo)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-21T12:45:05.327

您可以创建自定义按钮：

```
 tinymce.init({
        selector: `#${this.props.id}`,
        ...
        toolbar: '... uploadimage ...',
        paste_data_images: true,
        setup: 
            ...
            editor.addButton('uploadimage', {
                text: '',
                icon: 'image',
                onclick: this.uploadImage,
            });
        },
    }) 
```

和`uploadImage`功能：

```
uploadImage() {
    var editor = tinymce.activeEditor;
                // create input element, call modal dialog w
                var fileInput = document.createElement('input');
                fileInput.setAttribute('type', 'file');
                fileInput.setAttribute('accept', 'image/png, image/gif, image/jpeg, image/bmp, image/x-icon');
                // if file is submitted run our key code
                fileInput.addEventListener('change', () => {

                    if (fileInput.files != null && fileInput.files[0] != null) {
                        // create instance of FileReader()
                        let reader = new FileReader();
                        // create event triggered after successful reading operation
                        reader.onload = (e) => {
                            // insert content in TinyMCE
                            editor.insertContent('<img src="' + e.target.result + '">');
                            fileInput.value = '';
                        };
                        reader.readAsDataURL(fileInput.files[0]);
                    }
                });
        fileInput.click()
    } 
```

在此之后，您应该在编辑器中看到您的 base64 图像。

# php - using modal message/window to display database record

> ID：12012166
> 
> 赞同：0
> 
> 时间：2012-08-17T19:39:53.513
> 
> 标签：php, javascript, jquery, modal-dialog

I'm displaying tabular data populated via loop from a database.

I know that I could edit/delete etc in the usual manner, where

```
 <a href="edit_record.php?id=' . $row['abstract_id'] . '">Edit Record</a> 
```

But I would really like to do this using the modal-message feature of jquery.

However, what I can't seem to figure out is how to indicate to the modal-message window/div the correct record number from the database (whereas in php, I'm simply using the print function.

Is it feasible to set maybe an onClick event that sets a variable ($id) to equal whatever the $row['abstract_id'] number is?

The idea being that when I click on the Edit button, I can put php within the div and it will call up the correct record.

EDIT for clarity: I don't want to actually edit it, it's to pull up the text of the abstracts, which are too big to fit in the tabular format (but there are too many abstracts to give each submission its own page).

The key here is how I can pass the record id from the database/php side to the javascript side even if it's setting/resetting some variable. I thought about using .load(read_abstract.php) but then realized that I don't think that .load(read_abstract.php?id=' . $row['abstract_id']') would work- and don't know what the JS equivalent would be (or if it exists).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:47:39.373

您可以将 id 移动到 HTML 标记中的数据属性中：

```
echo '<span class="edit-button" data-abstract-id="'.$row['abstract_id'].'">edit</span>' 
```

然后在模态中，您将能够通过以下方式引用它：

```
jQuery('.edit-button').click(function() {
     id = jQuery(this).attr('data-abstract-id');
}); 
```

# wpf - Changing the background color of a textblock in MVVM-WPF (and retaining it)

> ID：12012167
> 
> 赞同：1
> 
> 时间：2012-08-17T19:39:56.633
> 
> 标签：wpf, mvvm

Here is the working code i have: The text and background color property do change when I click the button (but for a micro second) and are then set back to the default text/color. Seems like RaisePropertyChanged is being triggered again and again. Can somebody help point what I am doing wrong?

MainWindow.xaml code

```
 <Window x:Class="BuiltIn_Custom_Commands_Eg.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <StackPanel HorizontalAlignment="Center">
        <TextBlock Text="{Binding txtblck_text, StringFormat=Default: {0}}" Padding="10" FontStyle="Italic" Background="{Binding txtblck_color}"/>
        <Button Content="Change Color" Width="100" Height="30" Margin="20" Command="{Binding OkCommand}" />
    </StackPanel>
</Grid> 
```

ViewModel Code:

```
class Example_ViewModel : ViewModelBase
{
    #region Properties
    private string _txtblck_text;
    private Brush _txtblck_color;
    public ICommand OkCommand {get; set;}

    public string txtblck_text
    {
        get { return _txtblck_text; }
        set 
        { 
            _txtblck_text = value;
            RaisePropertyChanged("txtblck_text");
        }
    }

    public Brush txtblck_color
    {
        get { return _txtblck_color; }
        set
        {
            _txtblck_color = value;
            RaisePropertyChanged("txtblck_color");
        }
    }
    #endregion

    #region Constructor
    public Example_ViewModel()
    {
        OkCommand = new myCommand(myOkExecute, myCanOkExecute);
    }
    #endregion

    private void myOkExecute(object parameter)
    {
        txtblck_color = Brushes.CadetBlue;
        //RaisePropertyChanged("txtblck_color");

        txtblck_text = "You Clicked me!!!";
        //RaisePropertyChanged("txtblck_text");
    }

    private bool myCanOkExecute(object parameter)
    {
        txtblck_color = Brushes.Yellow;
        txtblck_text = "You havent clicked me!!!";
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T20:02:26.663

每当绑定发生变化时，都会并且应该调用 CanExecute 方法。因此，更改 Execute 方法中的绑定（颜色）将导致 CanExecute 再次被调用。

相反，为什么不在构造函数中初始化颜色私有成员一次，如下所示。

```
public Example_ViewModel()
{
    OkCommand = new myCommand(myOkExecute, myCanOkExecute);
    _txtblck_color =  = Brushes.Yellow;
} 
```

请注意，对于 text 属性也是如此。通常，所有属性私有成员都应在初始化（构造函数）时设置默认值，因为这样可以避免对 INotifyPropertyChanged 的​​不必要调用。

此外，为了测试代码的行为方式并确认这一点，只需在 CanExecute 方法中设置一些断点以查看程序流的行为方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T21:04:40.440

您的问题是您不应该在 myCanOkExecute 中对您的属性进行任何设置......因为它正在被调用并将您的属性更改回黄色等。

Commands 的 CanExecute 方法可能会被多次调用，有时在您不期望的情况下......例如，当焦点更改为不同的控件时，当某些控件正在编辑/发送按键时，在执行命令后，当有人调用 CommandManager.InvalidateRequerySuggested 等。

因此，在您单击并执行按钮后不久，您的 myCanOkExecute 就会被调用。

# jquery - Why does the browser become unresponsive after multiple events using jQuery?

> ID：12012169
> 
> 赞同：2
> 
> 时间：2012-08-17T19:39:59.273
> 
> 标签：jquery, html

1 - I have this simple html button :

```
<input type="button" id="testBtn" value="1" /> 
```

2 - and some jquery :

```
function one()
{
    $("#testBtn").val("1")
    .click(function(){
        zero();
    });         
}

function zero()
{
    $("#testBtn").val("0")
    .click(function(){
        one();
    });
}
$(document).ready(function(){
    $("#testBtn").click(function(){
        zero();
    });
}); 
```

3 - after multiple click on the testBtn firefox shows this message :

```
A script on this page may be busy, or it may have stopped responding. You can stop script now, or you can continue to see if the script will complete. Script: http://localhost/js/jquery-1.7.2.min.js:2 
```

after click continue firefox shows above message again.

4 - I used the following solution instead and was able to resolve the unresponsive dialog:

```
var state=1;

function onezero()
{
    if (state == 1)
    {
        $("#testBtn").val("0")
        .click(function(){
            one();
        });
    }
    else
    {
        $("#testBtn").val("0")
        .click(function(){
            one();
        });     
    }
}

$(document).ready(function(){
    $("#testBtn").click(function(){
        onezero();
    });
}); 
```

5 - and above solution works well, but why first solution kills jquery?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T19:43:08.283

第一个解决方案每次单击按钮时都会附加一个新的事件处理程序。你实际上会更好：

```
document.getElementById('testBtn').onclick = function() {
    this.value = this.value == 1 ? 0 : 1;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T19:43:15.623

[http://jsfiddle.net/YFUuR/](http://jsfiddle.net/YFUuR/)

打开您的控制台并查看一下，当您不断单击按钮时，它会不断将越来越多的事件处理程序附加到它上面。最终这一切都结束了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T20:14:00.563

因为您每次都不断添加点击事件。click()**不会**覆盖前一个事件。

```
 $("#testBtn").val("0")
    .off("click").on("click", function(){
        one();
    }); 
```

不好的`off`是它会清除可能附加到该元素的任何其他点击事件。那很不好。更好的方法是添加一键式处理程序并将逻辑构建到该处理程序中。

```
 $("#testBtn").data("state",false).val("0")
    .on("click", function(){
        var elem = $(this);
        var state = elem.data("state");
        if(state) {
            one();
        } else {
            two();
        }
        elem.data("state", !state);
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T19:42:40.797

由于您的引用，您通过添加不必要的事件处理程序来重载元素。

# xml - How to let my web output data to my apps?

> ID：12012171
> 
> 赞同：0
> 
> 时间：2012-08-17T19:40:06.937
> 
> 标签：xml, xcode, mobile, web

I am a Mobile developer, and I know nothing about web development.

I have a mobile app which need to receive a string from my web each time it starts, a simple string, just one number, 1 or 0.

I use Yola.com to host my web, so I can not change CSS or Html.

The API I use: network.request( "http://www.google.ca", "GET", networkListener )

The thing is I can get data from any web, but just can not get data from any Yola.com hosted web, which give me a error in the app.

Is there anything I can do?

Or just introduce me some other host who can let me get data at a good price. (I don't wanna pay too much as all I need is go get 1 number.)

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:47:07.873

或者您可以将字符串作为 POST 消息从 Web 传递到移动应用程序。您可以使用 javascript 轻松完成。因此，您的移动应用程序（启动后）将向 web 发出请求，web 将回复字符串（就像 api 调用一样）。此外，如果您想进行安全呼叫，则应使用 https 呼叫。如果您要发送密码，请使用 MD5 或 AES 加密来保护敏感数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:45:13.173

在您的网络主机上创建一个页面，该页面仅包含文本内容，1 或 0。在这种情况下，不需要 css 或 html。

# opencart - Featured Products linking to different url

> ID：12012175
> 
> 赞同：0
> 
> 时间：2012-08-17T19:40:26.217
> 
> 标签：opencart, featured

I have assigned some featured products in my homepage and somehow the link to product is different from that of my menu.

For example: From menu: [http://www.mydomain.com/store/products/littleshirt](http://www.mydomain.com/store/products/littleshirt)

From featured products section: [http://www.mydomain.com/store/littleshirt](http://www.mydomain.com/store/littleshirt)

I am using opencart extension menu but I don't supposed that is the source of this problem. I need the URL to point to same location as the url for featured product link to the product nicely but the side product menu only display parent categories.

Is there anyway to resolve this?

Any help are appreciated!! :D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-13T10:18:22.813

“OpenCart 特色产品和新闻”模块是一个基于 jquery 的开放式购物车模块，它显示选定的特色产品和/或新闻或相关帖子

OpenCart 特色产品和新闻很有用，并且有一个不错的插件。

[http://codecanyon.net/item/opencart-featured-products-and-news/4368564?ref=wpproducts](http://codecanyon.net/item/opencart-featured-products-and-news/4368564?ref=wpproducts)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-18T12:12:41.903

我的已知问题。使用规范引用这些重复项的所需 URL 是解决此问题的一种解决方案。例如：

*[http://www.example.com/store/littleshirt](http://www.example.com/store/littleshirt)* 包含所需 URL 的规范： *[http ://www.example.com/store/products/littleshirt](http://www.example.com/store/products/littleshirt)*

这将防止搜索引擎对重复页面进行索引/抓取，并且您的正确/所需页面不会丢失指标。

ps 我必须将 URL 更改为 example.com 才能让我的帖子通过。

# spring - Springsource Tool Suite UML plugin

> ID：12012178
> 
> 赞同：4
> 
> 时间：2012-08-17T19:40:42.327
> 
> 标签：spring, eclipse-plugin, uml

Is there an open-source "UML Modeling" plugin for Spring source Tool Suite? I tried installing UML2 plugin provided for Eclipse but it doesn't seem to work.

After some googling, I found Object Aid which isn't licensed open source software! Is there any other plugin available?

Regards Surekha

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:02:53.563

您可以像这样在 Eclipse 市场上搜索： [http ://marketplace.eclipse.org/search/apachesolr_search/uml?filters=ss_cck_field_status:Production/Stable%20ss_cck_field_licensetype:EPL](http://marketplace.eclipse.org/search/apachesolr_search/uml?filters=ss_cck_field_status:Production/Stable%20ss_cck_field_licensetype:EPL)

但除了 Topcased 之外，只涵盖了 UML 的非常小的部分。您很可能不会对非商业工具感到满意......使用“高级搜索”，您可以将许可证类型切换为“商业”；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T13:21:20.627

[UMLet](http://www.umlet.com/)工作正常，但它可用于从头开始制作图表。它虽然不会从 java 类创建类图！

# orm - 在 Doctrine2 和 Symfony Querybuilder 中获取无效的参数数量

> ID：12012181
> 
> 赞同：0
> 
> 时间：2012-08-17T19:40:56.537
> 
> 标签：orm, symfony, doctrine-orm

这是我的代码

```
if(!$criteria){
            return null;
        }

        $em = $this->doctrine->getEntityManagerForClass('Sample\MyBundle\Entity\Call');
        $qb = $em->createQueryBuilder();
        $qb->add('select', 'c')->add('from', 'Sample\MyBundle\Entity\Call c');

        if($criteria->getReason() && $criteria->getReason() != null){
            $qb->add('where', 'c.reason = ?1');
            $qb->setParameter(1, $criteria->getReason());
        }
        if($criteria->getCallDate() && $criteria->getCallDate() != null){
            $qb->add('where', 'c.callTime = ?2');
            $qb->setParameter(2, $criteria->getCallDate());
        }

        if($criteria->getPage()>1){
            $qb->setFirstResult(($criteria->getPage()-1) * 10)->setMaxResults(10);
        }

        $query = $qb->getQuery();
        return $query->getResult(); 
```

我收到此错误 -`Invalid parameter number: number of bound variables does not match number of tokens`我用谷歌搜索但找不到解决方案。需要帮助。

我什至尝试在条件检查 if 语句之后调用两个 setParameter() 调用，但这也给出了相同的错误。如果我不设置第二个参数并删除第二个 where 条件，那么它可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:51:55.897

哦，我想我犯了一个错误。我想我不能在'add'函数中使用多个'where'。我用它替换了它，`$qb->andWhere('c.callTime > ?2');`现在它工作正常。

# c# - regex.Match runs slow

> ID：12012182
> 
> 赞同：0
> 
> 时间：2012-08-17T19:41:05.407
> 
> 标签：c#, regex

I have a program extracting some information from a lot of large html pages. I found that the last line (`myRegex.Match(detailPage)`) takes most of the execution time. Is the regex pattern optimized?

```
const string strRegex = @"prepend-top.*?<h1[^>]*?>(?<name>.+?)\s*<a.*?
    Create\ Date.*?<label>(?<create>.*?)</label>.*?
    <a.*?id\s*=\s*""period_report"".*?href\s*=\s*""(?<url>.*?)""";
const RegexOptions myRegexOptions =
            RegexOptions.IgnoreCase | RegexOptions.Singleline | RegexOptions.Compiled |
            RegexOptions.IgnorePatternWhitespace;
var myRegex = new Regex(strRegex, myRegexOptions);
var m = myRegex.Match(detailPage); 
```

The HTML code looks like (The html file size is about 30K, however, most of the the html is javascript code):

```
<div class="span-24 prepend-top">
<h1>XXX XXX XXXX 
    <a href="https://....">Back to Search Results</a></h1>
</div>

<div class="span-18">
<div class="top-content">

<script type="text/javascript">
 .....
</script>

    <div class="detailHeaderContainer">
        <div class="leftBlock">

            <div class="left staticlabel leftStaticlabelWidth inlineColumn">
                <label>
                    Product Type:
                </label>
            </div>
            <div class="left leftDynamiclabelWidth dynamiclabel">
                <label>Type 2</label>
            </div>
            <div class="clear"></div>

            <div class="left staticlabel leftStaticlabelWidth inlineColumn">
                <label>
                    Create Date:
                </label>
            </div>
            <div class="left leftDynamiclabelWidth dynamiclabel">
                <label></label>
            </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T20:07:27.200

我建议快速查看[MSDN 上的正则表达式最佳实践指南](http://msdn.microsoft.com/en-us/library/gg578045.aspx)和[BCL 团队博客上的此博客条目](http://blogs.msdn.com/b/bclteam/archive/2010/08/03/optimizing-regular-expression-performance-part-ii-taking-charge-of-backtracking.aspx)，它们深入了解正则表达式的行为，并可以就正则表达式为何会变慢提供指导

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T22:49:15.117

创建静态 RegEx 类可以节省大量时间。

# sql - 主机存储中的程序集与 GAC 中的程序集具有不同的签名

> ID：12012186
> 
> 赞同：2
> 
> 时间：2012-08-17T19:41:24.527
> 
> 标签：sql, sql-server, sql-server-2005, visual-studio-2008

我添加了第三方 dll（Extreme.Numerics.Net20.dll 到我的 sql server 程序集）。然后我通过 VS 2008 项目打开并添加该程序集作为参考。然后我构建并发布了我的项目，它创建了一个 PowerstatRegression.dll。然后我将该程序集也添加到 SQL Server。但是当我运行我的代码时，我仍然得到这个：

```
Error message: System.IO.FileLoadException: Could not load file or assembly 
'Extreme.Numerics.Net20, Version=3.6.10055.0, Culture=neutral, 
PublicKeyToken=9e513770f58567b2' or one of its dependencies. Assembly in host store has a 
different signature than assembly in GAC. (Exception from HRESULT: 0x80131050) File name: 
'Extreme.Numerics.Net20, Version=3.6.10055.0, Culture=neutral, 
PublicKeyToken=9e513770f58567b2' at 
PowerStatRegression.matrix.MatrixHandler.MultiplyMatrixByArray(Double[][] a, Double[] b) at 
```

为什么会这样？一切都正确构建，没有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-09T08:12:27.847

将您的 CREATE ASSEMBLY 更改为 ALTER ASSEMBLY 并在服务器上重新运行它，这将更新 GAC。

# mysql - 如何修复这个 MySQL DELETE 查询？

> ID：12012187
> 
> 赞同：0
> 
> 时间：2012-08-17T19:41:24.480
> 
> 标签：mysql

我有三个表，`products`，`shops`和`sex`。我希望`DELETE`products 表中的行具有这样的表中`product_id`不存在等效项。`product_id``sex`

此外，表中的这些行的值`products`必须`shop_id`等于表中值为“www.shop.com”的行。`shop_id``shops``shops.shop`

到目前为止我有

```
DELETE FROM products USING shops WHERE
products.shop_id=shops.shop_id AND
shops.shop='www.shop.com' AND NOT EXISTS
(SELECT sex.product_id FROM sex WHERE
sex.product_id=products.product_id) 
```

但似乎`products`像我所做的那样在子查询中引用是不可接受的。（我得到错误`Unknown table 'products' in MULTI DELETE`。）我该如何解决我的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T19:47:07.810

您可以在语句中使用`JOIN`s ：`DELETE`

```
DELETE    a 
FROM      products a
JOIN      shops b ON a.shop_id = b.shop_id AND b.shop = 'www.shop.com'
LEFT JOIN sex c ON a.product_id = c.product_id
WHERE     c.product_id IS NULL 
```

这将`DELETE`仅适用于在`shops`表中具有`shop`= www.shop.com 的相应行的产品，但前提是该产品在表中也没有***相应***的行`sex`。

# security - 什么是从 SHA1 升级到 SHA256 的好方法？

> ID：12012188
> 
> 赞同：1
> 
> 时间：2012-08-17T19:41:26.023
> 
> 标签：security

我有一个现有的数据库，其中包含大约 160 万用户。目前密码存储为加盐 SHA1，我想将它们全部升级为加盐 SHA256。

到目前为止，我采取的方法是在每个用户登录时迁移他们，本质上是根据旧哈希验证他们的密码，如果匹配，则创建一个新的更强的哈希。这工作正常，但这是一个缓慢的过程。

据我所知，没有简单的方法可以简化此过程。有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:43:34.343

除非您将原始明文密码存储在某处，否则您无法“升级”哈希。被散列的文本被破坏了，你不能简单地“un-sh1”来取回它。您的方法可能是唯一实用的方法，除非您想为您的用户批量生成新的基于 sha256 的密码并将新密码通过电子邮件发送给他们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T23:49:31.347

您所描述的是将用户从较弱/较旧的哈希算法迁移到更强/较新的哈希算法的适当且合法的方法。我已经在多种情况下成功地实施了这种技术。尝试一次迁移所有人是一个可怕的 UX 想法，然后您会遇到需要邮寄密码的问题，由于安全和 UX 等多种原因，这是一个坏主意。

我建议，由于您现在正在进行这样的努力，因此您考虑使用与加盐 SHA-256 不同的算法。Salted SHA-512 提供了更高级别的安全性，并且实施一个拉伸散列的方案甚至更好（对 SHA-512 进行大量迭代 - 当然从密码+salt 开始）。或者，您可以利用专门为密码散列设计的算法，例如 bcrypt、scrypt 或 PBKDF2。

# android - 从android中的UTF-8编码文本文件中读取阿拉伯语？

> ID：12012189
> 
> 赞同：2
> 
> 时间：2012-08-17T19:41:30.960
> 
> 标签：android, encoding, utf-8, character-encoding

我正在开发一个应用程序，其中有一些英文和阿拉伯文文本。为了举例，我可以把它说成一个词，意思是应用。这个词是英文的，用户会得到它在阿拉伯语中的含义。

例如：

```
 Test     اختبار    // Test is the word and then there is it's meaning in Arabic 
```

但是当我阅读这个本地文件时，我并没有按预期得到阿拉伯语。相反，我得到了一些奇怪的字符。我确保该文件是 UTF-8 编码的，当我读取文件时，我再次将编码方案传递为 UTF-8 ..但它不起作用。代码片段如下：

```
 InputStream inputStream = resources.openRawResource(R.raw.textfile);
    BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream, "utf-8"));

    try {
        String line;
        while((line = reader.readLine()) != null) {
            String[] strings = TextUtils.split(line, " ");
            if (strings.length < 2) continue;
            addWord(strings[0].trim(), strings[1].trim());
        }
    } finally {
        reader.close();
    } 
```

任何帮助表示赞赏..谢谢..!!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:50:22.880

我实际上构建了一个帮助类来处理`FileIO`（并且与希伯来语完全兼容）所以我猜阿拉伯语不会有问题：

```
 /***
 * 
 * @author Android Joker ©
 *  Do NOT copy without confirmation!
 *  Thanks!
 *
 */
public class FileMethods {
    private Boolean isOk;
    private Context mContext;
    private String fileName;
    public FileMethods(Context c, String FILENAME) {
        this.isOk = true;
        this.mContext = c;
        this.fileName = FILENAME;
    }
    public void reWrite(Object DATA) { 
        //For deleting the content of the file and then writing
        try {
            FileOutputStream fos = mContext.openFileOutput(this.fileName, Context.MODE_PRIVATE);
            fos.write(DATA.toString().getBytes());
            fos.close();
            Log.i("File Writing ("+this.fileName+")", "Success!");
            isOk = true;
        }
        catch (IOException e) {
            e.printStackTrace();
            Log.e("File Writing ("+this.fileName+")", "Failed!");
            isOk = false;
        }
    }
    public void Write(Object DATA) {
        //For keeping the previous contents and continue writing
        String data = Read("") + DATA.toString() + "\n";
        try {
            FileOutputStream fos = mContext.openFileOutput(this.fileName, Context.MODE_PRIVATE);
            fos.write(data.getBytes());
            fos.close();
            Log.i("File Writing ("+this.fileName+")", "Success!");
            isOk = true;
        }
        catch (IOException e) {
            e.printStackTrace();
            Log.e("File Writing ("+this.fileName+")", "Failed!");
            isOk = false;
        }

    }
    public void Clear() {
        //For deleting all the file contents
        try {
            FileOutputStream fos = mContext.openFileOutput(this.fileName, Context.MODE_PRIVATE);
            fos.write("".getBytes());
            fos.close();
            Log.i("Cleared"+"("+this.fileName+")", "Success!");
            isOk = true;
        }
        catch (IOException e) {
            e.printStackTrace();
            Log.e("Cleared"+"("+this.fileName+")", "Failed!");
            isOk = false;
        }
    }
    public String Read(String inCaseOfFailure) {
        //For reading (If reading failed for any reason, inCaseOfFailure will be written)
        String info = "";
        try {
            FileInputStream fis = mContext.openFileInput(this.fileName);
            byte[] dataArray = new byte[fis.available()];
            if (dataArray.length>0) {
                while(fis.read(dataArray)!=-1)
                {
                    info = new String(dataArray);
                }
                fis.close();
                Log.i("File Reading ("+this.fileName+")","Success!");
                isOk = true;
            }
            else {
                try {
                    FileOutputStream fos = mContext.openFileOutput(this.fileName, Context.MODE_PRIVATE);
                    fos.write(inCaseOfFailure.getBytes());
                    fos.close();
                    Log.e("File Writing In Case Of Failure ("+this.fileName+")", "Success!");
                    isOk = true;
                }
                catch (Exception e) {
                    e.printStackTrace();
                    isOk = false;
                    Log.e("File Writing In Case Of Failure ("+this.fileName+")", "Failed!");
                    Log.e("File Writing In Case Of Failure ("+this.fileName+")", "MOVING ON");
                }
            }
        }
        catch (FileNotFoundException e) {
            try {
                FileOutputStream fos = mContext.openFileOutput(this.fileName, Context.MODE_PRIVATE);
                if (inCaseOfFailure != null) {
                    fos.write(inCaseOfFailure.getBytes());
                    fos.close();
                    Log.e("File Writing In Case Of Failure ("+this.fileName+")", "Success!");
                    isOk = true;
                }
                else {
                    Log.e("File Writing In Case Of Failure ("+this.fileName+")", "Failed!");
                    isOk = false;
                }
            }
            catch (IOException e1) {
                e.printStackTrace();
                Log.e("File Writing In Case Of Failure ("+this.fileName+")", "Failed!");
                isOk = false;
            }
        }
        catch (IOException e) {
            e.printStackTrace();
            Log.e("File Reading ("+this.fileName+")", "Failed!");
            isOk = false;
        }
        return info;
    }

    public Boolean GetIsOK() {
        //Method that checks whether the FileIO was successfully running or not
        Boolean temp = isOk;
        isOk = true;
        return temp;
    }
} 
```

该类的每个实例都处理另一个文件 (FILENAME)。

希望这可以帮助！

# django - Shopify Django/GAE API

> ID：12012191
> 
> 赞同：2
> 
> 时间：2012-08-17T19:41:48.310
> 
> 标签：django, api, google-app-engine, shopify

尝试进行设置时，我遇到以下错误：

```
Traceback (most recent call last):
File "manage.py", line 11, in <module>
import settings
File "/Users/Paul/Documents/shopifywarrantymanager/settings.py", line 7, in <module>
from djangoappengine.settings_base import *
File "/Users/Paul/Documents/shopifywarrantymanager/djangoappengine/settings_base.py",     line 6, in <module>
setup_env()
File "/Users/Paul/Documents/shopifywarrantymanager/djangoappengine/boot.py", line 64, in setup_env
setup_project()
File "/Users/Paul/Documents/shopifywarrantymanager/djangoappengine/boot.py", line 114, in setup_project
from .utils import have_appserver, on_production_server
File "/Users/Paul/Documents/shopifywarrantymanager/djangoappengine/utils.py", line 12, in <module>
appconfig, unused = dev_appserver.LoadAppConfig(PROJECT_DIR, {})
ValueError: too many values to unpack 
```

除了添加我的 API 密钥/共享密钥并将“app.yaml”中的应用程序名称更改为我在 GAE 注册的名称之外，我没有以任何方式更改文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T12:03:38.660

我认为您使用的是旧版本的`Djangoappengine`.

`LoadAppConfig`从 SDK 1.6 开始的方法[返回](http://code.google.com/p/googleappengine/source/search?q=LoadAppConfig&origq=LoadAppConfig&btnG=Search%20Trunk)三个值的元组`(AppInfoExternal, URLMatcher, from_cache)`；中的代码`utils.py`是错误的，因为它只需要两个值。

如果您查看[更新版本的 Djangoappengine](https://github.com/django-nonrel/djangoappengine)，您可以看到该方法被正确调用：

```
appconfig = dev_appserver.LoadAppConfig(PROJECT_DIR, 
                                        {},
                                        default_partition='dev')[0] 
```

# c# - 如何调试链式方法调用？

> ID：12012193
> 
> 赞同：0
> 
> 时间：2012-08-17T19:41:54.293
> 
> 标签：c#

...使用 .net 4.0

我的意思是链式方法调用

```
public bool CallA(){
  return CallB().HasAccess;
}

public User CallB(){
  return new User{ HasAccess = true};
} 
```

有没有办法在 CallA 中调试以查看 CallB() 返回的内容。我通常将调用返回到一个对象，检查 null 等，但这是我不想更改的现有代码，以便我可以更轻松地调试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T19:44:40.780

您可以设置断点`return CallB().HasAccess`并添加快速监视`CallB()`以查看返回的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T19:44:42.560

```
public bool CallA()
{
    User ret = CallB();
    // breakpoint on this next line
    return ret.HasAccess;
} 
```

# jquery - 动态添加类活动

> ID：12012196
> 
> 赞同：0
> 
> 时间：2012-08-17T19:42:35.047
> 
> 标签：jquery, html, django

# html

```
 <ul class="nav">
   <li class=""><a href="/home/">Home</a></li>
   <li><a href="/about/">About</a></li>
   <li><a href="/contact/">Contact</a></li>
 </ul> 
```

# 脚本

```
 $(document).ready(function(){
    if(window.location=='/home/'){
       $('.nav li:first').appendClass('active');
     }
//---and similarly for other divs or 
  }); 
```

# 怀疑

除了使用嵌入的 django 代码有条件地声明类之外，还有其他更简单的方法可以实现这一点吗？在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:44:58.960

```
 $('.nav li:first').appendClass('active'); 
```

而不是这个，尝试

```
 $('.nav li:first').addClass('active'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T19:51:00.280

如果我想使用的链接更少，如下所示，

```
var links = ['/home/', '/about/', '/contact/' ];

$(document).ready(function(){
   var idx = $.inArray(window.location, links);
   $('.nav li').eq(idx).addClass('active');
}); 
```

如果你有很多链接..然后试试下面..

```
$(document).ready(function(){
   var curLink = window.location;

   $('.nav li').each(function () {
      if (curLink == $(this).find('a').attr('href')) {
        $(this).addClass('active');
      }
   });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T20:23:37.427

我使用[这个简单的模板标签](https://snipt.net/jonbiddle/simple-navigation-template-tag/)：

```
# app/templatetags/menu.py
from django import template
register = template.Library()

@register.simple_tag
def active(request, pattern):
    import re
    if re.search(pattern, request.path):
        return ' class="active"'
    return ''

# your_template.html
{% load menu %}
<ul class="nav">
    <li{% active request "^/home/$" %}><a href="/home/">Home</a></li>
    <li{% active request "^/about/$" %}><a href="/about/">About</a></li>
    <li{% active request "^/contact/$" %}><a href="/contact/">Contact</a></li>
</ul> 
```

有几项改进是可能的，特别是通过`reverse()`在模板标签中使用而不是将 URL 正则表达式作为字符串来减少重复量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T19:46:07.497

试试这个而不是使用`.appendClass(...)`：

```
 $(document).ready(function(){
     if(window.location=='/home/'){
        $('.nav li:first').addClass('active');
     }
 }); 
```

然后，如果您在编写时有更多来自不同类型的元素并希望它们具有`.active`该类，请执行以下操作：

```
$(document).ready(function(){

    //x: group all 'div' elements.
    var x = $('div');
    //y: group all 'p' elements
    var y = $('p');
    //All elements:
    var combined = x.add(y);

    if(window.location=='/home/'){
      combined.addClass('active');
    }

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T19:59:50.290

如果`window.location`真的符合你的`href`属性，我怀疑它，你可以直接选择它们：

```
$(document).ready(function(){
    $('#nav li a[href="'+window.location+'"]').closest('li').addClass('active');
});​ 
```

# objective-c - 从不同的类打开 ViewController

> ID：12012201
> 
> 赞同：0
> 
> 时间：2012-08-17T19:42:55.783
> 
> 标签：objective-c, ios, cocoa-touch

我希望能够从不同的类打开 ViewController。所以我可以简单地调用它来在我需要的地方打开一个视图。

所以我在保存代码的类中有这个设置：

* * *

```
+ (void)openCalcView: (NSString *)nameOfView {

UIViewController *controller;

if ([nameOfView isEqualToString:@"Tax"]) {

    controller = [[TAXViewController alloc]initWithNibName:@"TAXViewController" bundle:nil];

}else if ([nameOfView isEqualToString:@"Rent"]){

    controller = [[RENTViewController alloc]initWithNibName:@"RENTViewController" bundle:nil];

}

controller.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self presentViewController:controller animated:YES completion:nil];
[controller release];

} 
```

* * *

但是`[self presentViewController:controller animated:YES completion:nil];`给了我一个警告：

`Class method '+presentViewController:animated:completion:' not found (return type defaults to 'id')`

我可以`NSLog`从任何类中调用像这样的简单事物。但这不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T19:45:42.207

因为openCalcView 是一个Class 方法，所以没有UIViewController 实例（即没有[self presentViewController:] 方法）。

您还需要将 UIViewController 传递给此类方法，如下所示：

```
+ (void)openCalcView: (NSString *)nameOfView fromViewController:(UIViewController *)controller { 

    UIViewController *newController; 

    if ([nameOfView isEqualToString:@"Tax"]) { 

        newController= [[TAXViewController alloc]initWithNibName:@"TAXViewController" bundle:nil]; 

    }else if ([nameOfView isEqualToString:@"Rent"]){ 

        newController= [[RENTViewController alloc]initWithNibName:@"RENTViewController" bundle:nil]; 

    } 

    newController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve; 
    [controller presentViewController:newController animated:YES completion:nil]; 
    [newController release]; 

} 
```

controller 参数表示打开新视图控制器的 UIViewController

# excel - 在 VBA 的文本框中格式化 MM/DD/YYYY 日期

> ID：12012206
> 
> 赞同：32
> 
> 时间：2012-08-17T19:43:10.523
> 
> 标签：excel, vba, user-interface

我正在寻找一种方法来自动将 VBA 文本框中的日期格式化为 MM/DD/YYYY 格式，并且我希望它在用户输入时格式化。例如，一旦用户输入第二个数字，程序会自动输入一个“/”。现在，我使用以下代码使这个工作（以及第二个破折号）：

```
Private Sub txtBoxBDayHim_Change()
    If txtBoxBDayHim.TextLength = 2 or txtBoxBDayHim.TextLength = 5 then
    txtBoxBDayHim.Text = txtBoxBDayHim.Text + "/"
End Sub 
```

现在，这在打字时效果很好。但是，当尝试删除时，它仍然进入破折号，因此用户不可能删除超过一个破折号（删除破折号会导致长度为 2 或 5，然后再次运行 sub，添加另一个破折号）。关于更好的方法来做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-08-17T22:24:03.287

我从不建议使用文本框或输入框来接受日期。很多事情都可能出错。我什至不建议您使用日历控件或日期选择器，因为您需要注册 mscal.ocx 或 mscomct2.ocx，这非常痛苦，因为它们不是可自由分发的文件。

这是我推荐的。您可以使用此自定义日历来接受用户的日期

**优点**：

1.  您不必担心用户输入错误信息
2.  您不必担心用户在文本框中粘贴
3.  您不必担心编写任何主要代码
4.  有吸引力的图形用户界面
5.  可以很容易地整合到您的应用程序中
6.  不使用您需要引用任何库（如 mscal.ocx 或 mscomct2.ocx）的任何控件

**缺点**：

嗯……嗯……想不出来……

**如何使用它（我的保管箱中缺少文件。请参阅帖子底部以获取日历的升级版本）**

1.  从[这里](https://www.dropbox.com/s/f1gzv52mmi6mvt2/Calendar%20Userform.zip?dl=0)下载`Userform1.frm`和。`Userform1.frx`
2.  在您的 VBA 中，只需`Userform1.frm`如下图所示导入即可。

导入表格

![在此处输入图像描述](../Images/a69567bd4b7c1fc4079411eb77962ab5.png)

**运行它**

您可以在任何过程中调用它。例如

```
Sub Sample()
    UserForm1.Show
End Sub 
```

**屏幕截图在行动**

![在此处输入图像描述](../Images/4046c7c8391b52842e01cd874018b5df.png)

**注意**：您可能还希望看到[将日历提升到新的水平](https://stackoverflow.com/questions/54650417/taking-calendar-to-new-level)

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2014-09-30T02:17:40.480

这与 Siddharth Rout 的答案相同。但我想要一个可以完全定制的日期选择器，以便可以根据正在使用的任何项目定制外观和感觉。

[您可以单击此链接](http://trevoreyre.com/portfolio/excel-datepicker/)下载我想出的自定义日期选择器。下面是一些正在运行的表单的屏幕截图。

![三个示例日历](../Images/182904a47910c8dbc0ace42dda3a418a.png)

要使用日期选择器，只需将 CalendarForm.frm 文件导入您的 VBA 项目。上面的每个日历都可以通过一个函数调用获得。结果仅取决于您使用的参数（所有这些都是可选的），因此您可以根据需要自定义它的大小。

比如左边最基本的日历可以通过下面这行代码得到：

```
MyDateVariable = CalendarForm.GetDate 
```

这里的所有都是它的。从那里，您只需包含要获取所需日历的任何参数。下面的函数调用将生成右侧的绿色日历：

```
MyDateVariable = CalendarForm.GetDate( _
    SelectedDate:=Date, _
    DateFontSize:=11, _
    TodayButton:=True, _
    BackgroundColor:=RGB(242, 248, 238), _
    HeaderColor:=RGB(84, 130, 53), _
    HeaderFontColor:=RGB(255, 255, 255), _
    SubHeaderColor:=RGB(226, 239, 218), _
    SubHeaderFontColor:=RGB(55, 86, 35), _
    DateColor:=RGB(242, 248, 238), _
    DateFontColor:=RGB(55, 86, 35), _
    SaturdayFontColor:=RGB(55, 86, 35), _
    SundayFontColor:=RGB(55, 86, 35), _
    TrailingMonthFontColor:=RGB(106, 163, 67), _
    DateHoverColor:=RGB(198, 224, 180), _
    DateSelectedColor:=RGB(169, 208, 142), _
    TodayFontColor:=RGB(255, 0, 0), _
    DateSpecialEffect:=fmSpecialEffectRaised) 
```

以下是它所包含的一些功能的简单介绍。所有选项都完整记录在用户表单模块本身中：

*   使用方便。用户窗体是完全独立的，可以导入到任何 VBA 项目中，并且无需太多额外的编码即可使用。
*   简单，有吸引力的设计。
*   完全可定制的功能、尺寸和配色方案
*   将用户选择限制在特定日期范围内
*   选择任何一天作为一周的第一天
*   包括周数，并支持 ISO 标准
*   单击标题中的月份或年份标签会显示可选的组合框
*   当您将鼠标悬停在日期上时，日期会改变颜色

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-08-17T19:48:24.713

添加一些东西来跟踪长度，并允许您“检查”用户是否正在添加或减去文本。这目前未经测试，但类似的东西应该可以工作（特别是如果你有一个用户表单）。

```
'add this to your userform or make it a static variable if it is not part of a userform
private oldLength as integer

Private Sub txtBoxBDayHim_Change()
    if ( oldlength > txboxbdayhim.textlength ) then
        oldlength =txtBoxBDayHim.textlength
        exit sub
    end if

    If txtBoxBDayHim.TextLength = 2 or txtBoxBDayHim.TextLength = 5 then
    txtBoxBDayHim.Text = txtBoxBDayHim.Text + "/"
    end if
    oldlength =txtBoxBDayHim.textlength
End Sub 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-07-15T05:08:02.280

我也以一种或另一种方式偶然发现了同样的困境，为什么 Excel VBA 没有`Date Picker`. 感谢 Sid，他出色地完成了为我们所有人创造一些东西的工作。

尽管如此，我还是到了需要自己创作的地步。我把它贴在这里是因为我确信很多人都会登陆这篇文章并从中受益。

我所做的和 Sid 所做的一样简单，只是我不使用临时工作表。我认为计算非常简单直接，因此无需将其转储到其他地方。这是日历的最终输出：

![在此处输入图像描述](../Images/2fbdfc63fab66c8fd7e31cd5f100fbf4.png)

**如何设置：**

*   创建 42 个`Label`控件并按顺序命名并从左到右、从上到下排列（此标签包含上面的灰色`25`到灰色`5`）。`Label`将控件的名称更改为*Label_01*、*Label_02*等。将所有 42 个标签`Tag`属性设置为`dts`.
*   `Label`为标题创建另外 7 个控件（这将包含*Su、Mo、Tu...*）
*   再创建 2 个`Label`控件，一个用于水平线（高度设置为 1），一个用于*月和年*显示。`Label`将用于显示月份和年份的名称命名为*Label_MthYr*
*   插入 2 个`Image`控件，一个包含左侧图标以滚动上个月，一个包含滚动下个月（我更喜欢简单的左右箭头图标）。命名它`Image_Left`并`Image_Right`

布局应该或多或少像这样（我将创造力留给任何使用它的人）。

![在此处输入图像描述](../Images/6320ea2bc2ee3c1ac9787e7193c52663.png)

**声明：**
我们需要在最顶部声明​​一个变量来保存当前选择的月份。

```
Option Explicit
Private curMonth As Date 
```

**私有过程和函数：**

```
Private Function FirstCalSun(ref_date As Date) As Date
    '/* returns the first Calendar sunday */
    FirstCalSun = DateSerial(Year(ref_date), _
                  Month(ref_date), 1) - (Weekday(ref_date) - 1)
End Function 
```

* * *

```
Private Sub Build_Calendar(first_sunday As Date)
    '/* This builds the calendar and adds formatting to it */
    Dim lDate As MSForms.Label
    Dim i As Integer, a_date As Date

    For i = 1 To 42
        a_date = first_sunday + (i - 1)
        Set lDate = Me.Controls("Label_" & Format(i, "00"))
        lDate.Caption = Day(a_date)
        If Month(a_date) <> Month(curMonth) Then
            lDate.ForeColor = &H80000011
        Else
            If Weekday(a_date) = 1 Then
                lDate.ForeColor = &HC0&
            Else
                lDate.ForeColor = &H80000012
            End If
        End If
    Next
End Sub 
```

* * *

```
Private Sub select_label(msForm_C As MSForms.Control)
    '/* Capture the selected date */
    Dim i As Integer, sel_date As Date
    i = Split(msForm_C.Name, "_")(1) - 1
    sel_date = FirstCalSun(curMonth) + i

    '/* Transfer the date where you want it to go */
    MsgBox sel_date

End Sub 
```

**图像事件：**

```
Private Sub Image_Left_Click()

    If Month(curMonth) = 1 Then
        curMonth = DateSerial(Year(curMonth) - 1, 12, 1)
    Else
        curMonth = DateSerial(Year(curMonth), Month(curMonth) - 1, 1)
    End If

    With Me
        .Label_MthYr.Caption = Format(curMonth, "mmmm, yyyy")
        Build_Calendar FirstCalSun(curMonth)
    End With

End Sub 
```

* * *

```
Private Sub Image_Right_Click()

    If Month(curMonth) = 12 Then
        curMonth = DateSerial(Year(curMonth) + 1, 1, 1)
    Else
        curMonth = DateSerial(Year(curMonth), Month(curMonth) + 1, 1)
    End If

    With Me
        .Label_MthYr.Caption = Format(curMonth, "mmmm, yyyy")
        Build_Calendar FirstCalSun(curMonth)
    End With

End Sub 
```

* * *

我添加了这个以使它看起来像用户正在单击标签并且也应该在`Image_Right`控件上完成。

```
Private Sub Image_Left_MouseDown(ByVal Button As Integer, ByVal Shift As Integer, _
                                 ByVal X As Single, ByVal Y As Single)
    Me.Image_Left.BorderStyle = fmBorderStyleSingle
End Sub

Private Sub Image_Left_MouseUp(ByVal Button As Integer, ByVal Shift As Integer, _
                               ByVal X As Single, ByVal Y As Single)
    Me.Image_Left.BorderStyle = fmBorderStyleNone
End Sub 
```

**标签事件：** 所有 42 个标签 ( to )
都应完成所有这些操作**提示：**构建前 10 个标签，然后对剩余的标签使用查找和替换。`Label_01``Lable_42`

 **```
Private Sub Label_01_Click()
    select_label Me.Label_01
End Sub 
```

* * *

这是为了悬停在日期和点击效果。

```
Private Sub Label_01_MouseDown(ByVal Button As Integer, ByVal Shift As Integer, _
                               ByVal X As Single, ByVal Y As Single)
    Me.Label_01.BorderStyle = fmBorderStyleSingle
End Sub

Private Sub Label_01_MouseMove(ByVal Button As Integer, ByVal Shift As Integer, _
                               ByVal X As Single, ByVal Y As Single)
    Me.Label_01.BackColor = &H8000000B
End Sub

Private Sub Label_01_MouseUp(ByVal Button As Integer, ByVal Shift As Integer, _
                             ByVal X As Single, ByVal Y As Single)
    Me.Label_01.BorderStyle = fmBorderStyleNone
End Sub 
```

**用户窗体事件：**

```
Private Sub UserForm_Initialize()
    '/* This is to initialize everything */
    With Me
        curMonth = DateSerial(Year(Date), Month(Date), 1)
        .Label_MthYr = Format(curMonth, "mmmm, yyyy")
        Build_Calendar FirstCalSun(curMonth)
    End With

End Sub 
```

* * *

同样，只是为了悬停日期效果。

```
Private Sub UserForm_MouseMove(ByVal Button As Integer, ByVal Shift As Integer, _
                               ByVal X As Single, ByVal Y As Single)

    With Me
        Dim ctl As MSForms.Control, lb As MSForms.Label

        For Each ctl In .Controls
            If ctl.Tag = "dts" Then
                Set lb = ctl: lb.BackColor = &H80000005
            End If
        Next
    End With

End Sub 
```

就是这样。这是原始的，您可以在其中添加自己的扭曲。
我已经使用了一段时间，并且没有任何问题（性能和功能方面）。
还没有`Error Handling`，但我想可以很容易地管理。
实际上，没有效果，代码太短了。
您可以管理您的日期在`select_label`程序中的去向。HTH。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-05T18:46:16.243

您也可以在文本框上使用输入掩码。如果您将掩码设置为`##/##/####`，它将始终在您键入时进行格式化，并且您无需进行任何编码，只需检查输入的日期是否为真实日期。

简单的几行

```
txtUserName.SetFocus
If IsDate(txtUserName.text) Then
    Debug.Print Format(CDate(txtUserName.text), "MM/DD/YYYY")
Else
    Debug.Print "Not a real date"
End If 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-17T23:28:24.873

为了快速解决，我通常这样做。

这种方法将允许用户在文本框中以他们喜欢的任何格式输入日期，最后在完成编辑后以 mm/dd/yyyy 格式输入日期。所以它非常灵活：

```
Private Sub TextBox1_Exit(ByVal Cancel As MSForms.ReturnBoolean)
    If TextBox1.Text <> "" Then
        If IsDate(TextBox1.Text) Then
            TextBox1.Text = Format(TextBox1.Text, "mm/dd/yyyy")
        Else
            MsgBox "Please enter a valid date!"
            Cancel = True
        End If
    End If
End Sub 
```

但是，我认为 Sid 开发的是一种更好的方法 - 一个完整的日期选择器控件。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-17T21:22:44.217

只是为了好玩，我接受了 Siddharth 关于单独文本框的建议并做了组合框。如果有人感兴趣，可以添加一个用户表单，其中包含三个名为 cboDay、cboMonth 和 cboYear 的组合框，并将它们从左到右排列。然后将下面的代码粘贴到用户窗体的代码模块中。所需的组合框属性在 UserFormInitialization 中设置，因此不需要额外的准备。

棘手的部分是更改由于年份或月份的变化而变得无效的日期。此代码只是在发生这种情况时将其重置为 01 并突出显示 cboDay。

我已经有一段时间没有编写过这样的代码了。希望有一天它会引起某人的兴趣。如果不是，那很有趣！

```
Dim Initializing As Boolean

Private Sub UserForm_Initialize()
Dim i As Long
Dim ctl As MSForms.Control
Dim cbo As MSForms.ComboBox

Initializing = True
With Me
    With .cboMonth
        '        .AddItem "month"
        For i = 1 To 12
            .AddItem Format(i, "00")
        Next i
        .Tag = "DateControl"
    End With
    With .cboDay
        '        .AddItem "day"
        For i = 1 To 31
            .AddItem Format(i, "00")
        Next i
        .Tag = "DateControl"
    End With
    With .cboYear
        '        .AddItem "year"
        For i = Year(Now()) To Year(Now()) + 12
            .AddItem i
        Next i
        .Tag = "DateControl"
    End With
    DoEvents
    For Each ctl In Me.Controls
        If ctl.Tag = "DateControl" Then
            Set cbo = ctl
            With cbo
                .ListIndex = 0
                .MatchRequired = True
                .MatchEntry = fmMatchEntryComplete
                .Style = fmStyleDropDownList
            End With
        End If
    Next ctl
End With
Initializing = False
End Sub

Private Sub cboDay_Change()
If Not Initializing Then
    If Not IsValidDate Then
        ResetMonth
    End If
End If
End Sub

Private Sub cboMonth_Change()
If Not Initializing Then
    ResetDayList
    If Not IsValidDate Then
        ResetMonth
    End If
End If
End Sub

Private Sub cboYear_Change()
If Not Initializing Then
    ResetDayList
    If Not IsValidDate Then
        ResetMonth
    End If
End If
End Sub

Function IsValidDate() As Boolean
With Me
    IsValidDate = IsDate(.cboMonth & "/" & .cboDay & "/" & .cboYear)
End With
End Function
Sub ResetDayList()
Dim i As Long
Dim StartDay As String

With Me.cboDay
    StartDay = .Text
    For i = 31 To 29 Step -1
        On Error Resume Next
        .RemoveItem i - 1
        On Error GoTo 0
    Next i
    For i = 29 To 31
        If IsDate(Me.cboMonth & "/" & i & "/" & Me.cboYear) Then
            .AddItem Format(i, "0")
        End If
    Next i
    On Error Resume Next
    .Text = StartDay
    If Err.Number <> 0 Then
        .SetFocus
        .ListIndex = 0
    End If
End With
End Sub

Sub ResetMonth()
Me.cboDay.ListIndex = 0
End Sub 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-06-29T02:47:01.960

虽然我同意下面的答案中提到的内容，但这表明这对于用户表单来说是一个非常糟糕的设计，除非包含大量的错误检查......

为了完成您需要做的事情，只需对代码进行*最少的更改*，有两种方法。

1.  对文本框使用**KeyUp()**事件而不是 Change 事件。这是一个例子：

    ```
    Private Sub TextBox2_KeyUp(ByVal KeyCode As MSForms.ReturnInteger, ByVal Shift As Integer)

        Dim TextStr As String
        TextStr = TextBox2.Text

        If KeyCode <> 8 Then ' i.e. not a backspace

            If (Len(TextStr) = 2 Or Len(TextStr) = 5) Then
                TextStr = TextStr & "/"
            End If

        End If
        TextBox2.Text = TextStr
    End Sub 
    ```

2.  或者，如果您需要使用**Change()**事件，请使用以下代码。这会改变行为，因此用户不断输入数字，如

    ```
    12072003 
    ```

而他输入的结果显示为

```
 12/07/2003 
```

但“/”字符仅在输入 DD 的第一个字符即 0 的 07 时出现。不理想，但仍会处理退格。

```
 Private Sub TextBox1_Change()
        Dim TextStr As String

        TextStr = TextBox1.Text

        If (Len(TextStr) = 3 And Mid(TextStr, 3, 1) <> "/") Then
            TextStr = Left(TextStr, 2) & "/" & Right(TextStr, 1)
        ElseIf (Len(TextStr) = 6 And Mid(TextStr, 6, 1) <> "/") Then
            TextStr = Left(TextStr, 5) & "/" & Right(TextStr, 1)
        End If

        TextBox1.Text = TextStr
    End Sub 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-02-03T22:58:34.850

```
Private Sub txtBoxBDayHim_KeyPress(ByVal KeyAscii As MSForms.ReturnInteger)
If KeyAscii >= 48 And KeyAscii <= 57 Or KeyAscii = 8 Then 'only numbers and backspace
    If KeyAscii = 8 Then 'if backspace, ignores + "/"
    Else
        If txtBoxBDayHim.TextLength = 10 Then 'limit textbox to 10 characters
        KeyAscii = 0
        Else
            If txtBoxBDayHim.TextLength = 2 Or txtBoxBDayHim.TextLength = 5 Then 'adds / automatically
            txtBoxBDayHim.Text = txtBoxBDayHim.Text + "/"
            End If
        End If
    End If
Else
KeyAscii = 0
End If
End Sub 
```

这对我有用。:)

你的代码对我帮助很大。谢谢！

我是巴西人，我的英语很差，如有错误请见谅。**

# jasper-reports - JasperReports 和 Windows 上的缺失字体

> ID：12012207
> 
> 赞同：0
> 
> 时间：2012-08-17T19:43:12.527
> 
> 标签：jasper-reports

我们的应用程序使用*JasperReports.3.7.1*并在*Windows*上运行。我们的其中一个网站无法打印他们的报告。此消息出现在日志中：

```
Font 'Arial' is not available to the JVM. See the Javadoc for more details 
```

该文件存在：`c:\windows\fonts\arial.ttf.`

为什么 JVM 或*JasperReports*找不到？

Using**`net.sf.jasperreports.awt.ignore.missing.font`**允许打印报告，但不是一个好的解决方案。

到目前为止，我发现的大部分信息都是`Font 'Arial' is not available to the JVM.`指将报告从*Windows*迁移到*Unix*的风格，这不是这里遇到的问题。

感谢您的任何建议、想法或见解

# c - 指针和字符数组

> ID：12012214
> 
> 赞同：2
> 
> 时间：2012-08-17T19:43:41.133
> 
> 标签：c, arrays, pointers, char

我有一个指向字符数组的指针：

```
space=(char**)calloc(100000,sizeof(char*));
for(i=0;i<100000;i++){
    space[i]=(char*)calloc(1,sizeof(char));
} 
```

这样当我使用以下命令时

```
printf("%s\n",space[0]); 
```

我明白了`"a b c d e"`

我想分配`"a b c d e"`给

```
char c[10]; 
```

这样

`printf("%s",c)`产量

```
"a b c d e" 
```

但是当我尝试

```
c=space[0] 
```

我收到以下错误：

```
incompatible types in assignment 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T19:48:00.887

首先，您需要分配足够的空间来将整个字符串保存在位置空间[0]。当前，您正在分配一个字符。完成此操作后，您将使用 strcpy() 将字符串复制到新分配的缓冲区中。

```
space=(char**)calloc(100000,sizeof(char*));
...
space[0]=(char*)calloc(10,sizeof(char));
strcpy(space[0], "a b c d e"); 
```

PS：在为新字符串分配之前，不要忘记在空间 [0] 处释放（）任何先前分配的字符串（就像您在 for() 循环中创建的字符串）。或者你可以使用 realloc() 代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T04:17:33.607

`c[0]`是类型`char *`。你要么需要做，`c[0][0]`要么`(char) c`。

# asp.net-mvc-4 - 我可以在我的视图模型中获取一个 SelectList 以使用 EditorForModel 进行渲染吗？

> ID：12012221
> 
> 赞同：0
> 
> 时间：2012-08-17T19:44:20.973
> 
> 标签：asp.net-mvc-4

我想要一个使用 EditorForModel Html 帮助器呈现的状态列表框。我的视图模型：

```
public class MyViewModel
{
    public MyewModel()
    {
        States = new SelectList(MyModel.RegionsToSelectList,"Value","Text");
    }

    [DataType(DataType.Text)]
    public string City { get; set; }

    [Display(Name = "States")]
    public SelectList States { get; private set; }
} 
```

在我看来，我有正确`@Html.EditorForModel()` 的渲染，但没有渲染到任何类型的列表（下拉列表或列表框）`City``States`

如果我使用`@Html.DropDownList("mylistname", Model.States)`它会正确呈现。我真的很想让它在这个`ForModel`过程中呈现。

这可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:17:03.347

如果要生成下拉列表，则需要使用 Html.DropdownListFor 帮助器。您使用 SelectList 作为某些属性的类型这一事实并不意味着默认编辑器模板将呈现一个框。因此，您将不得不编写一个自定义编辑器模板。

您可以查看以下[博客文章](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-3-default-templates.html)，了解这些默认模板是如何实现的。

# css - IE9 通过内联样式将背景图像设置为“无”

> ID：12012225
> 
> 赞同：2
> 
> 时间：2012-08-17T19:44:33.580
> 
> 标签：css, internet-explorer, internet-explorer-9, background-image

我目前正在处理的网站是[http://rattscallion.com/](http://rattscallion.com/)我正在努力使该网站在 IE 中看起来正确。

我在页面上获取框架时遇到了麻烦（查看 /murals.html 以获取我首先正在处理的页面）。IE9 表示内联样式声明背景图像是“无”，因此它划掉了原始背景图像。我想它可能是从主样式表的某个地方得到的，所以我所做的是制作一个只存在于 IE 中的新框架，并只在 IE 样式表中设置它的样式。不幸的是，这也不起作用......它仍然说内联样式将背景图像设置为“无”，但没有这样的事情！

我仔细检查过，这是在 IE9 标准模式下发生的。那么为什么会这样呢？谁能帮助弄清楚如何“强制”它超越 IE 认为的内联样式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T19:58:47.363

那么你的问题是：

```
CSS was ignored due to mime type mismatch 
normalize.css 
```

如果您检查网络调用，则 normalize.css 将作为 text/plain 而不是 text/css 接收。您应该在 IIS 中安装静态内容（在服务器角色下），因为某些奇怪的原因默认情况下没有安装它。我赌一美元你正在使用 IIS。

您可以将 normalize.css 复制粘贴到服务器端 css 文件中，这样就不会远程访问它。

我通过执行以下操作使其工作：

*   `#framePos img{ display: none; }`从样式-ie.css中删除
*   删除 unitpngfix.js - png 过滤器修复适用于 ie6，在 ie9 上无用（这实际上是框架不显示的原因之一）

注意：frame.png 图片作为背景放置在很多地方，所以你应该考虑清理一下 css 文件

另一个注意事项：unitpngfix.js 将 frame.png 替换为 clear.gif 并在每个 png 元素上放置透明度过滤器。因此，除非您删除 js，否则对 css 的修补不会做任何事情。

# asp.net - .net IE8 哈希 url 重定向

> ID：12012232
> 
> 赞同：0
> 
> 时间：2012-08-17T19:45:19.307
> 
> 标签：asp.net

场景是，我的用户在未登录时被重定向到登录页面。他们尝试访问的页面有一个带有 URL (myPage.aspx#abc) 的哈希片段。

我正在使用 .net 4.0 网络表单 Response.Redirect 进行重定向。而且我知道服务器端在哈希片段之后没有得到任何东西，所以我不能在服务器端重定向，除非我做一个隐藏字段，如果有其他选择我不想这样做。

我在这篇文章中查看了一个解决方案 [ASP.NET postbacks lost the hash in the URL](https://stackoverflow.com/questions/3885568/asp-net-postbacks-lose-the-hash-in-the-url)

```
$(window).load(function(){
    document.getElementById("aspnetForm").action += location.hash
}); 
```

它适用于 firefox/chrome 但不适用于 IE8。当从服务器返回时，location.hash 在 IE8 中已经是“”。

有什么想法吗？还有另一个我应该附加的事件吗？

谢谢！

# installation - NSIS：安装新产品

> ID：12012233
> 
> 赞同：0
> 
> 时间：2012-08-17T19:45:22.813
> 
> 标签：installation, nsis

我要安装两种产品，一种是服务器实用程序，另一种是客户端实用程序。我正在为服务器实用程序编写安装脚本。在安装服务器实用程序之后和重新启动计算机之前，我想提示用户插入 DVD 以安装客户端实用程序。我是 NSIS 脚本的新手，谁能告诉我怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T06:48:23.443

我要做的就是`MessageBox`询问用户是否要安装这个东西，如果他们说是，那么您可以使用[其他一些代码](https://stackoverflow.com/a/11992620/3501)，只需将 GetDiskFreeSpaceEx 部分替换为一些检查它是否是正确光盘的代码（[IfFileExists](http://anders_k.users.sourceforge.net/public/NSIS/2.46/Manual.html#iffileexists)等）。如果没有找到正确的光盘，您应该`goto`返回 MessageBox，以便用户可以重试或取消...

# python - 针对不同长度的哈希键列出索引超出范围错误

> ID：12012243
> 
> 赞同：0
> 
> 时间：2012-08-17T19:46:05.363
> 
> 标签：python, python-3.x, python-2.7

我有一个文本文件。该文件的每一行有 6 个字段或 7 个字段。

*   如果一行中有 7 个字段，我将前 6 个字段作为键，将第 7 个字段作为该键的值。

*   如果一行中有 6 个字段，我将前 5 个字段作为键，将第 6 个字段作为该键的值。

我不知道是否有必要发布整个代码，但为了清晰起见，我发布了整个代码。

我的代码粘贴在下面：

```
ReqResRS = {}
with contextlib.nested(open(sys.argv[1],'r'), open(sys.argv[2], 'w')) as (inpf, outf):
    lines = [l.split() for l in inpf if l.strip()]
    for l in lines:
            if(l[6]):
                    myKey = (l[0],l[1],l[2],l[3],l[4],l[5])
                    myValue = l[6]
                    if(myKey in ReqResRS):
                            diff = float(l[6])-float(ReqResRS[myKey]);
                            if(float(diff) < 0.000008):
                                    ReqResRS[myKey] = myValue
                            else:
                                    ReqResRS[myKey] = myValue
                                    outf.write(l[0] + "\t" + l[1] + "\t" + l[2] + "\t" + l[3] + "\t" + l[4] + "\t" + l[5] + "\t" + l[6] + "\n")
                    else:
                            ReqResRS[myKey] = myValue
                            outf.write(l[0] + "\t" + l[1] + "\t" + l[2] + "\t" + l[3] + "\t" + l[4] + "\t" + l[5] + "\t" + l[6] + "\n")
            else:
                    myKey = (l[0],l[1],l[2],l[3],l[4])
                    myValue = l[5]
                    if(myKey in ReqResRS):
                            diff = float(l[5])-float(ReqResRS[myKey]);
                            if(float(diff) < 0.000008):
                                    ReqResRS[myKey] = myValue
                            else:
                                    ReqResRS[myKey] = myValue
                                    outf.write(l[0] + "\t" + l[1] + "\t" + l[2] + "\t" + l[3] + "\t" + l[4] + "\t" + l[5] + "\n")
                    else:
                            ReqResRS[myKey] = myValue
                            outf.write(l[0] + "\t" + l[1] + "\t" + l[2] + "\t" + l[3] + "\t" + l[4] + "\t" + l[5] + "\n") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T19:48:00.933

我认为您想更改`if l[6]`为`if len(l) == 7`

但是这种事情应该比你做的更容易（从上面的代码中，你应该*需要*根据你的数据文件有多少列来特殊情况）：

```
myValue = l[-1] 
myKeys = l[:-1]  #tuple(l[:-1]) if you must ...
try:
    diff = float(myValue)-float(ReqResRS[myKey])
    ReqResRS[myKey] = myValue
    if(float(diff) >= 0.000008):
        outf.write("\t".join(l) + "\n") 
except KeyError:
    ReqResRS[myKey] = myValue
    outf.write("\t".join(l) + "\n") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T19:47:52.947

```
if(l[6]): 
```

如果您的阵列太短，则会失败。访问不属于数组的值总是会导致异常。因此，您应该事先检查数组是否足够长，如下所示：

```
if len(l) == 7: 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T19:51:49.560

我想`if(l[6]):`应该`if(len(l) == 7):`在第5行

请注意，您还可以编写类似的内容

```
try:
    myKey = (l[0], l[1], l[2], l[3], l[4], l[5])
    myValue = l[6]
except IndexError:
    myKey = (l[0], l[1], l[2], l[3], l[4])
    myValue = l[5]

if(myKey in ReqResRS):
    diff = float(myValue) - float(ReqResRS[myKey]);
    if(float(diff) < 0.000008):
            ReqResRS[myKey] = myValue
    else:
            ReqResRS[myKey] = myValue
            outf.write('{}\t{}\n'.format("\t".join(myKey), myValue)
else:
    ReqResRS[myKey] = myValue
    outf.write('{}\t{}\n'.format("\t".join(myKey), myValue) 
```

# c++ - 在 C 中使用局部变量创建类似函数的 C++ 模板

> ID：12012245
> 
> 赞同：0
> 
> 时间：2012-08-17T19:46:07.217
> 
> 标签：c++, c, templates, variables, c-preprocessor

这里有个谜语。

想象一下，我有以下 C++ 函数：

```
template<uint8_t MASK>
uint8_t Foo(uint8_t val)
{
    uint8_t step = 0;
    uint8_t result = 0;
    if(MASK & 0x01) {result |= (val & 0x01) >> step; ++step;}
    if(MASK & 0x02) {result |= (val & 0x02) >> step; ++step;}
    //...etc...
    if(MASK & 0x80) {result |= (val & 0x80) >> step; ++step;}

    return result;
} 
```

当我这样实例化这个函数时（下面的所有值都只是示例值）：

```
uint8_t someval = Foo<0xAA>(44); 
```

编译器优化了 Foo() 中的 if 语句，因为它在编译时就知道 if() 语句的结果是什么。

这很好，但尝试在 C 中做同样的事情是有问题的，因为创建了局部变量*step*。

如果*step*不存在，你可以像这样做一个大的#define：

```
#define Foo(MASK, val) (\
    ((MASK & 0x01) ? (val & 0x01) : 0) | \
    ((MASK & 0x02) ? (val & 0x02) : 0) | \
    ...etc...
    ((MASK & 0x80) ? (val & 0x80) : 0) | \
    ) 
```

但是对于*step*，我有点陷入僵局。我该怎么做才能在 C 中获得与 C++ 模板相同的功能，用于具有局部变量的 C++ 模板函数？

请注意，使用内联 C 函数不是答案，因为编译器在编译时不知道*MASK*的值，因此所有比较都不会被优化，因此将成为最终编译输出的一部分。

另请注意，更改 #define 以包含结果值也不是答案，因为这会更改“函数的”签名。

最后，我完全清楚这个谜语可能没有答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T19:56:57.187

让你的宏尝试做模板所做的事情；创建一个内联函数——

```
#define Foo(MASK, val) inline uint8_t Foo_##MASK(uint8_t val) \
{ \
   uint8_t step = 0; \
    uint8_t result = 0; \
    if(MASK & 0x01) {result |= (val & 0x01) >> step; ++step;} \
    if(MASK & 0x02) {result |= (val & 0x02) >> step; ++step;} \
    //...etc...
    if(MASK & 0x80) {result |= (val & 0x80) >> step; ++step;} \
\
    return result;\
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T19:52:14.900

怎么样（GCC主义）：

```
#define Foo(MASK, val) ({ \
    uint8_t step = 0; \
    uint8_t result = 0; \
    if(MASK & 0x01) {result |= (val & 0x01) >> step; ++step;} \
    if(MASK & 0x02) {result |= (val & 0x02) >> step; ++step;} \
    //...etc...
    if(MASK & 0x80) {result |= (val & 0x80) >> step; ++step;} \
    result;}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T22:04:17.310

你只是在做一个错误的假设

> 请注意，使用内联 C 函数不是答案，因为编译器在编译时不会知道 MASK 的值，因此所有比较都不会被优化，因此将成为最终编译输出的一部分。

我刚刚测试过，gcc 能够毫无问题地内联所有内容：

```
static inline
unsigned Foo(unsigned MASK, unsigned char val)
{
    unsigned char step = 0;
    unsigned char result = 0;
    if(MASK & 0x01) {result |= (val & 0x01) >> step; ++step;}
    if(MASK & 0x02) {result |= (val & 0x02) >> step; ++step;}
    //...etc...
    if(MASK & 0x80) {result |= (val & 0x80) >> step; ++step;}

    return result;
}

int main(int argc, char *argv[]) {
  return Foo(0x02, argc);

} 
```

产生以下汇编程序`main`：

```
main:
.LFB1:
    .cfi_startproc
    andl    $2, %edi
    movzbl  %dil, %eax
    ret
    .cfi_endproc
.LFE1:
    .size   main, .-main 
```

和 clang 在功能上是一样的。

# java - Mockito isA(类 clazz) 如何解决类型安全问题？

> ID：12012249
> 
> 赞同：32
> 
> 时间：2012-08-17T19:46:30.073
> 
> 标签：java, junit, mockito, java-5

在我的测试中，我有以下行：

```
when(client.runTask(anyString(), anyString(), isA(Iterable.class)).thenReturn(...) 
```

`isA(Iterable.class)`产生警告，它需要未经检查的转换才能符合`Iterable<Integer>`. 那是什么语法？

```
isA(Iterable<Integer>.class)
isA((Iterable<Integer>)Iterable.class 
```

不工作。

有什么建议么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-18T16:30:29.133

## Mockito/Hamcrest 和泛型类

是的，这是 Mockito/Hamcrest 的普遍问题。通常`isA()`与泛型类一起使用会产生警告。

最常见的泛型类有预定义的 Mockito 匹配器：[anyList()](http://site.mockito.org/mockito/docs/current/org/mockito/ArgumentMatchers.html#anyList())、`anyMap()`和。`anySet()``anyCollection()`

建议：

## Mockito 2.1.0 中的 anyIterable()

Mockito 2.1.0 添加了一个新的[anyIterable()](http://site.mockito.org/mockito/docs/current/org/mockito/ArgumentMatchers.html#anyIterable())方法来匹配 Iterables：

```
when(client.runTask(anyString(), anyString(), anyIterable()).thenReturn(...) 
```

## 在 Eclipse 中忽略

如果您只是想摆脱 Eclipse 中的警告。[自Eclipse Indigo](http://archive.eclipse.org/eclipse/downloads/drops/R-3.7-201106131736/eclipse-news-part2.html#unavoidable-generic-type-problems)以来存在选项：

> 窗口 > 首选项 > Java > 编译器 > 错误/警告 > 泛型 > 忽略不可避免的泛型类型问题

## 使用@SuppressWarnings 快速修复

如果您只遇到一次问题，我建议您这样做。我个人不记得曾经需要一个`isA(Iterable.class)`.

正如 Daniel Pryden 所说，您可以将其限制`@SuppressWarnings`为局部变量或辅助方法。

## 使用带有 TypeToken 的通用 isA() 匹配器

这很好地解决了这个问题。但它有两个缺点：

*   语法不太漂亮，可能会使一些人感到困惑。
*   `TypeToken`您对提供该类的库有额外的依赖关系。在这里，我使用了[Guava 的 TypeToken 类](http://google.github.io/guava/releases/19.0/api/docs/com/google/common/reflect/TypeToken.html)。`TypeToken`Gson 和`GenericType`JAX-RS 中还有一个类。

使用通用匹配器：

```
import static com.arendvr.matchers.InstanceOfGeneric.isA;
import static org.mockito.ArgumentMatchers.argThat;

// ...

when(client.runTask(anyString(), anyString(), argThat(isA(new TypeToken<Iterable<Integer>>() {}))))
            .thenReturn(...); 
```

通用匹配器类：

```
package com.arendvr.matchers;

import com.google.common.reflect.TypeToken;
import org.mockito.ArgumentMatcher;

public class InstanceOfGeneric<T> implements ArgumentMatcher<T> {
    private final TypeToken<T> typeToken;

    private InstanceOfGeneric(TypeToken<T> typeToken) {
        this.typeToken = typeToken;
    }

    public static <T> InstanceOfGeneric<T> isA(TypeToken<T> typeToken) {
        return new InstanceOfGeneric<>(typeToken);
    }

    @Override
    public boolean matches(Object item) {
        return item != null && typeToken.getRawType().isAssignableFrom(item.getClass());
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-17T21:07:33.910

这就是我所做的：

```
// Cast from Class<Iterable> to Class<Iterable<Integer>> via the raw type.
// This is provably safe due to erasure, but will generate an unchecked warning
// nonetheless, which we suppress.
@SuppressWarnings("unchecked")
Class<Iterable<Integer>> klass 
    = (Class<Iterable<Integer>>) (Class) Iterable.class;  

// later

isA(klass) // <- now this is typesafe 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-17T19:55:39.563

你可以在`@SuppressWarnings("unchecked")`上面添加语句。没有其他办法，但如果它打扰你，你可以将演员移动到辅助方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-17T21:09:05.233

没有办法做到这一点。为简化起见，您不能在没有警告的情况下初始化此变量：

```
Class<Iterable<Integer>> iterableIntegerClass = ? 
```

一种解决方案可能是使用[伪 typedef 反模式](http://www.ibm.com/developerworks/java/library/j-jtp02216/index.html)，您创建并使用`IntegerIterable`接口

```
interface IntegerIterable extends Iterable<Integer> {} 
```

然后

```
isA(IntegerIterable.class) 
```

将不再产生警告。但是您必须扩展实现的类`Iterable`以让它们实现`IntegerIterable`:) 例如：

```
public class IntegerArrayList extends ArrayList<Integer> implements IntegerIterable {} 
```

嗯好吃...

所以，我建议你考虑通过添加到你的方法中来解决裂缝：

```
@SuppressWarnings("unchecked") 
```

# android - 更好地理解fragment+actionbar

> ID：12012252
> 
> 赞同：1
> 
> 时间：2012-08-17T19:46:44.503
> 
> 标签：android, android-actionbar, fragment

我在这里阅读了很多关于 android 中的片段和操作栏的主题。

但我不明白为什么它不能正常工作。

起初我实施了很多活动，我的片段（片段可以工作 thx vogella ;)）开始另一个活动

结构为 loginactivity -> activityA -> activityB -> fragment -> fragmentA/fragmentB -> 片段 A/B 的活动

在片段中，我创建了我的操作栏，但是如果我单击片段 A，我的片段 A 的活动丢失了操作栏？

问题很简单...

如何在我的片段上为所有片段活动创建操作栏？

接下来我将尝试.... * 继承 -> 不工作，接下来我尝试实现 onCreateOptionMenu * 我在我的 mainactivity 中设置操作栏，如果该工作我将尝试在所有活动中隐藏它

感谢您的建议

# mongodb - 在 MongoDb 中查找下一个文档

> ID：12012253
> 
> 赞同：8
> 
> 时间：2012-08-17T19:47:06.640
> 
> 标签：mongodb

如果这是我的收藏结构：

```
{ _id: ObjectId("4fdbaf608b446b0477000142"), name: "product 1" }
{ _id: ObjectId("4fdbaf608b446b0477000143"), name: "product 2" }
{ _id: ObjectId("4fdbaf608b446b0477000144"), name: "product 3" } 
```

我查询产品 1，有没有办法查询下一个文档，在这种情况下是“产品 2”？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-18T07:11:31.230

`sort()`如果您想要一个可预测的结果顺序，最好添加明确的标准。

假设您的顺序是“插入顺序”并且您使用的是 MongoDB 默认生成的 ObjectId，那么您可以根据 ObjectId 进行查询：

```
// Find next product created
db.products.find({_id: {$gt: ObjectId("4fdbaf608b446b0477000142") }}).limit(1) 
```

请注意，此示例仅有效，因为：

*   ObjectId 的前四个字节是根据 unix 样式的时间戳计算的（请参阅：[ObjectId 规范](http://www.mongodb.org/display/DOCS/Object+IDs#ObjectIDs-BSONObjectIDSpecification)）
*   单独的查询`_id`将使用默认`_id`索引（按 id 排序）来查找匹配项

所以实际上，这种隐式排序与以下内容相同：

```
db.products.find({_id: {$gt: ObjectId("4fdbaf608b446b0477000142" )}}).sort({_id:1}).limit(1); 
```

如果您向查询添加了更多条件以限定如何查找“下一个”产品（例如 a `category`），则查询可能使用不同的索引，并且顺序可能与您预期的不同。

[您可以使用explain()](http://www.mongodb.org/display/DOCS/Explain)检查索引使用情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:24:53.703

您可以使用 ObjectId 按插入顺序取回项目。见：[http ://www.mongodb.org/display/DOCS/Optimizing+Object+IDs#OptimizingObjectIDs](http://www.mongodb.org/display/DOCS/Optimizing+Object+IDs#OptimizingObjectIDs)

如果您想以其他顺序取回它们，那么您将必须定义该顺序是什么并将更多信息存储在您的文档中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-27T17:13:15.713

Starting in `Mongo 5`, it's a perfect use case for the new [`$setWindowFields`](https://docs.mongodb.com/manual/reference/operator/aggregation/setWindowFields/) aggregation operator:

```
// { _id: 1, name: "product 1" }
// { _id: 2, name: "product 2" }
// { _id: 3, name: "product 3" }
db.collection.aggregate([
  { $setWindowFields: {
    sortBy: { _id: 1 },
    output: { next: { $push: "$$ROOT", window: { documents: [1, 1] } } }
  }}
])
// { _id: 1, name: "product 1", next: [{ _id: 2, name: "product 2" }] }
// { _id: 2, name: "product 2", next: [{ _id: 3, name: "product 3" }] }
// { _id: 3, name: "product 3", next: [ ] } 
```

This:

*   `$sort`s documents by their order of insertion using their `_id`s (`ObjectId`s contain the timestamp of insertion): `sortBy: { _id: 1 }`
*   adds the `next` field in each document (`output: { running: { ... }}`)
    *   by `$push`ing the whole document `$$ROOT` (`$push: "$$ROOT"`)
    *   on a specified span of documents (the `window`) which is in this case is a range of only the next document document: `window: { documents: [1, 1] }`.

# android - 画布上的 Android EditText

> ID：12012257
> 
> 赞同：2
> 
> 时间：2012-08-17T19:47:16.653
> 
> 标签：android, bitmap, android-edittext, android-canvas

我有一个editText，我希望在其中输入的内容被绘制在我的资源称为“ger”的画布上。我做了一个简单的代码，但不让它工作。IDK是什么问题，当我运行它时，它意外停止

这是我的课程代码 public class StartActivity extends Activity {

```
/** Called when the activity is first created. */

static Bitmap bmp;
static EditText et;
static ImageView iv;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    EditText et = (EditText) findViewById(R.id.editText1);
    ImageView iv = (ImageView) findViewById(R.id.imageView1);
    Bitmap bmp = Bitmap.createBitmap(et.getDrawingCache());
}
public void onDraw (Canvas canvas){

    try {
        canvas.drawColor (Color.BLACK) ;
        Bitmap ab = BitmapFactory.decodeResource(getResources(),(R.drawable.ger)) ;
        ab = bmp;

        canvas.drawBitmap ( ab , 0 , 0 , null ) ;

        Paint paint = new Paint();
        paint.setColor(Color.WHITE);
        canvas.drawText(et.toString(),10,10,paint);
        iv.setImageBitmap(bmp);

    } catch ( Exception e ) {
        e.printStackTrace ( ) ;
    } catch ( Error e ) {
        e.printStackTrace ( ) ;
    }

}
} 
```

日志猫：

```
08-17 22:51:03.526: D/AndroidRuntime(509): Shutting down VM
08-17 22:51:03.526: W/dalvikvm(509): threadid=1: thread exiting with uncaught exception (group=0x40015560)
08-17 22:51:03.547: E/AndroidRuntime(509): FATAL EXCEPTION: main
08-17 22:51:03.547: E/AndroidRuntime(509): java.lang.RuntimeException: Unable to start activity ComponentInfo{example.edittext.com/example.edittext.com.StartActivity}: java.lang.NullPointerException
08-17 22:51:03.547: E/AndroidRuntime(509):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
08-17 22:51:03.547: E/AndroidRuntime(509):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
08-17 22:51:03.547: E/AndroidRuntime(509):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-17 22:51:03.547: E/AndroidRuntime(509):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08-17 22:51:03.547: E/AndroidRuntime(509):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-17 22:51:03.547: E/AndroidRuntime(509):  at android.os.Looper.loop(Looper.java:123)
08-17 22:51:03.547: E/AndroidRuntime(509):  at android.app.ActivityThread.main(ActivityThread.java:3683)
08-17 22:51:03.547: E/AndroidRuntime(509):  at java.lang.reflect.Method.invokeNative(Native Method)
08-17 22:51:03.547: E/AndroidRuntime(509):  at java.lang.reflect.Method.invoke(Method.java:507)
08-17 22:51:03.547: E/AndroidRuntime(509):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-17 22:51:03.547: E/AndroidRuntime(509):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-17 22:51:03.547: E/AndroidRuntime(509):  at dalvik.system.NativeStart.main(Native Method)
08-17 22:51:03.547: E/AndroidRuntime(509): Caused by: java.lang.NullPointerException
08-17 22:51:03.547: E/AndroidRuntime(509):  at android.graphics.Bitmap.createBitmap(Bitmap.java:367)
08-17 22:51:03.547: E/AndroidRuntime(509):  at example.edittext.com.StartActivity.onCreate(StartActivity.java:27)
08-17 22:51:03.547: E/AndroidRuntime(509):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-17 22:51:03.547: E/AndroidRuntime(509):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
08-17 22:51:03.547: E/AndroidRuntime(509):  ... 11 more 
```

xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10" >

        <requestFocus />
    </EditText>

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.17"
        android:src="@drawable/ger" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T20:13:17.247

这里的问题是您正在尝试`Bitmap`从缓存中创建一个。这不可能顺利...

你需要做的是这样的：

```
/** Called when the activity is first created. */

static Bitmap bmp;
static EditText et;
static ImageView iv;
static Canvas ivCanvas; // We'll be using our own Canvas.

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    EditText et = (EditText) findViewById(R.id.editText1);
    ImageView iv = (ImageView) findViewById(R.id.imageView1);

    // Move this up to onCreate
    Bitmap ab = BitmapFactory.decodeResource(getResources(),(R.drawable.ger)) ;
    bmp = convertToMutable(ab); // Initialize it here with the contents of ab. This effectively clones it and makes it mutable.
    ab = null; // Dispose of ab.

    ivCanvas = new Canvas(bmp); // Create our Canvas!

    // Add a TextWatcher
    et.addTextChangedListener(new TextWatcher() {
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            updateCanvas(); // Call the canvas update
        }
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        }
        public void afterTextChanged(Editable s) {
        }
    });
}
public void updateCanvas() {
    ivCanvas.drawColor (Color.BLACK) ;

    ivCanvas.drawBitmap ( bmp , 0 , 0 , null ) ;

    Paint paint = new Paint();
    paint.setColor(Color.WHITE);
    ivCanvas.drawText(et.getText().toString(),10,10,paint);

    // Everything has been drawn to bmp, so we can set that here, now.
    iv.setImageBitmap(bmp);

    // Removed the "catch" blocks so you can actually know when you're getting errors! Feel free to re-add later.
} 
```

我已经对此进行了彻底的评论，以便您了解我所做的更改。我认为这里有必要进行进一步的更改，但这至少现在应该对你有用。

编辑：

我已将代码转换为用于`TextWatcher`. [您可以从此答案](https://stackoverflow.com/questions/8543449/how-to-use-textwatcher-in-android)中找到有关基本实现的信息。

编辑2：

您需要将其转换`Bitmap`为“可变”（可变）位图。您可以使用[此答案](https://stackoverflow.com/questions/4349075/bitmapfactory-decoderesource-returns-a-mutable-bitmap-in-android-2-2-and-an-immu)中的代码。我已经在上面添加了一个调用。

# php - 如何使用 Hudson 构建锂测试？

> ID：12012258
> 
> 赞同：0
> 
> 时间：2012-08-17T19:47:17.843
> 
> 标签：php, hudson, jenkins, lithium

我正在尝试设置 hudson 来构建锂单元测试。我猜命令“li3 test tests/cases”应该构建这些案例，但我不确定在 Hudson 中设置路径。有人做过锂项目的持续整合吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:55:02.190

Take a look to this blog post [Setting up Jenkins with Lithium](http://blog.icambridge.me/post/17027653996/setting-up-jenkins-with-lithium).

**Note**: As you should know (and for those who find this after a google search), Jenkins is the rename of Hudson. [source](http://en.wikipedia.org/wiki/Hudson_%28software%29#Hudson.E2.80.93Jenkins_Split)

# html - html 净化器 - 允许链接？

> ID：12012261
> 
> 赞同：2
> 
> 时间：2012-08-17T19:47:40.143
> 
> 标签：html, htmlpurifier

链接和 html 净化器的老问题。我正在使用这段代码：

```
$config = HTMLPurifier_Config::createDefault();  
$config->set('HTML.Allowed', 'p,b,a[href],i');  
$config->set('HTML.AllowedAttributes', 'a.href');  
$purifier = new HTMLPurifier($config); 
```

但它不起作用。输入

```
<a href="http://www.google.de">search</a> 
```

将转向

```
<a href="%5C">search</a> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T19:59:33.877

关闭魔术引号。[http://php.net/manual/en/security.magicquotes.disabling.php](http://php.net/manual/en/security.magicquotes.disabling.php)

# c# - 如何刷新 Metro Style 应用程序的 UI？

> ID：12012262
> 
> 赞同：1
> 
> 时间：2012-08-17T19:47:40.700
> 
> 标签：c#, xaml, windows-8, microsoft-metro, windows-runtime

我正在尝试刷新/更新 Metro Style 应用程序的 UI 以反映更改。
要重绘 Windows 窗体中的控件，您可以简单地使用：

```
this.Refresh(); 
```

如何在 Metro Style 应用程序中获得类似的结果？

考虑一下 C# 中的这个简单示例：

```
private async void Button_Click(object sender, RoutedEventArgs e)
{
    btnStatus.Content = "Test started";
    Task.Delay(3000); // Wait 3 seconds
    btnStatus.Content = "Test Ended"
} 
```

我需要做的是：显示“开始”消息，等待几秒钟，然后显示“结束”消息。但是，当它运行时，btnStatus 立即显示“TestEnded”——就好像前 2 条语句没有执行一样。

我怎样才能解决这个问题？

我看过：[如何在 Metro 应用程序中刷新 UI？](https://stackoverflow.com/questions/11111432/how-to-refresh-the-ui-in-a-metro-app)但这没有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T20:06:11.730

The code you wrote is incorrect. Task.Delay() runs async, so your code naturally continues on.

This will work correctly...

```
private async void Button_Click(object sender, RoutedEventArgs e)
{
    btnStatus.Content = "Test started";
    await Task.Delay(3000); // Wait 3 seconds
    btnStatus.Content = "Test Ended"
} 
```

Note the addition of the **await** key world

# c++ - 错误：非静态引用成员，不能使用默认赋值运算符

> ID：12012277
> 
> 赞同：3
> 
> 时间：2012-08-17T19:49:00.510
> 
> 标签：c++, arduino

我正在调整现有库（“Webduino”，Arduino 的网络服务器）以与另一个现有库（“WiFly”，wifi 模块）一起使用并遇到问题。每个库都可以独立运行。Webduino 库希望通过 SPI 使用以太网硬件模块，而 WiFi 模块使用串行端口 (UART)。我得到的错误是：

```
WiFlyClient.h: In member function 'WiFlyClient& WiFlyClient::operator=(const WiFlyClient&)':
WiFlyClient.h:14:
error: non-static reference member 'WiFlyDevice& WiFlyClient::_WiFly', can't use default assignment operator
WiFlyWebServer.h: In member function 'void WebServer::processConnection(char*, int*)':
WiFlyWebServer.h:492: note: synthesized method 'WiFlyClient& WiFlyClient::operator=(const WiFlyClient&)' first required here 
```

以下是相关的代码片段。请注意，到目前为止，我只修改了 WiFlyWebServer.h (Webduino)：

```
// WiFlyWebServer.h (Webduino)
...
WiFlyServer m_server; // formerly EthernetServer and
WiFlyClient m_client; // EthernetClient
...
void WebServer::processConnection(char *buff, int *bufflen){
  ...
  // line 492
  m_client = m_server.available();
  ...
}

// WiFlyClient.h
class WiFlyClient : public Client {
 public:
  WiFlyClient();
  ...
private:
  WiFlyDevice& _WiFly;
  ...
}

// WiFlyClient.cpp
#include "WiFly.h"
#include "WiFlyClient.h"

WiFlyClient::WiFlyClient() :
  _WiFly (WiFly) {    // sets _wiFly to WiFly, which is an extern for WiFlyDevice (WiFly.h)
  ...
}

// WiFly.h
#include "WiFlyDevice.h"
...
extern WiFlyDevice WiFly;
...

// WiFlyDevice.h
class WiFlyDevice {
  public:
    WiFlyDevice(SpiUartDevice& theUart);
...

// WiFlyDevice.cpp
WiFlyDevice::WiFlyDevice(SpiUartDevice& theUart) : SPIuart (theUart) {
  /*

    Note: Supplied UART should/need not have been initialised first.

   */
  ...
} 
```

问题源于`m_client = m_server.available();`，如果我评论说问题消失了（但整个事情都依赖于那条线）。实际的问题似乎是 _WiFly 成员在分配 WiFiClient 对象时无法初始化（覆盖？），但我不明白为什么它在没有修改的情况下在这里不起作用。

（是的，我知道头文件中有实现，我不知道他们为什么这样写，不要怪我！）

有什么见解吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T20:23:07.603

您的`WiFly`成员`WiFlyClient`正在使课程不可分配。原因是赋值不能用于更改引用所指的对象。例如：

```
int a = 1;
int b = 2;
int &ar = a;
int &br = b;
ar = br; // changes a's value to 2, does not change ar to reference b 
```

由于您的所有`WiFlyClient`s 都引用同一个`WiFlyDevice`实例，因此您可以`WiFlyClient`按照编译器的建议进行更改以使用静态成员：

```
// WiFlyClient.h
class WiFlyClient : public Client {
 public:
  WiFlyClient();
  ...
private:
  static WiFlyDevice& _WiFly;
  ...
}; 
```

然后，您不在构造函数中初始化它，而是在定义它的源文件中初始化它。

```
WiFlyDevice & WiFlyClient::_WiFly = WiFly; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:04:24.290

显然，问题是`WiFlyClient`不可分配的。考虑将它包含在`std::unique_ptr`（在 C++03 中，`std::auto_ptr`）中，以便您至少可以分配该类型的项目。

```
std::unique_ptr<WiFlyClient> m_client;

...

m_client = m_server.available();

...

// convert m_client.<...> to m_client-><...>

// change m_server.available() to return std::unique_ptr<WiFlyClient> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T20:26:16.550

尝试覆盖`operator=`：

```
WiFlyClient& operator= (const WiFlyClient & wi)
{
  /* make a copy here */ 
  return *this;
} 
```

# jquery - 使用 AJAX 处理序列化数组时遇到问题

> ID：12012278
> 
> 赞同：0
> 
> 时间：2012-08-17T19:49:04.610
> 
> 标签：jquery, ajax

我试图在 $.post 调用中包含两个变量和一个序列化表单，而我发现这样做的唯一方法是使用 serializeArray() 而不是 serialize()，然后将额外的变量添加到大批。所有表单元素都被正确处理，但额外的两个变量（订单和列）没有。

JQ:

```
 var order = 'asc';
        var column = 'description';

        $('#task_form').submit(function(e){
            var formData = $("#task_form").serializeArray();
            formData.push({column: column, order: order});

            $.post('process.php', formData, function(data){
                // clear the current task table
                $('#tbody').empty();
                // refresh the task table with the newly inserted task
                $(data).appendTo('#tbody');
                $('#tasks_table').trigger('update');
                $("#description_text").val('');
            });
            e.preventDefault();
        }); 
```

PHP：

```
if(isset($_POST['description_text'])){
    $description = $_POST['description_text'];
    $duration = $_POST['duration_text'];
    $deadline = $_POST['deadline_text'];
    $order = $_POST['order'];
    $column = $_POST['column'];
    TaskDB::createLog($order.' '.$column);

    // convert the date
    $pieces = explode('/', $deadline);
    $month = $pieces[0];
    $day = $pieces[1];
    $year = $pieces[2];

    $newDate = $year.'-'.$month.'-'.$day;
    // create a new task object, add it to database
    $task = new Task('DEFAULT', $description, $duration, $newDate, '0');
    TaskDB::addTask($task);
    TaskDB::generateTaskTable();
} 
```

有谁知道这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T19:55:54.290

根据序列化数组文档（[http://api.jquery.com/serializeArray/](http://api.jquery.com/serializeArray/)），您需要重新格式化附加到数组。

它需要`name`,`value`对。

你想像这样格式化你的追加：

```
formData.push({name: "column", value: column}); 
```

我相信你可以弄清楚其余的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:57:29.777

`serializeArray`返回一个对象数组，每个对象包含`{name: 'fieldName', value: 'fieldValue'}`.

您需要以相同的格式推动您的价值观。

```
formData = formData.concat([{name: 'column', value: column}, {name: 'order', value: order}]); 
```

或者

```
formData.push({name: 'column', value: column});
formData.push({name: 'order', value: order}); 
```

另一种解决方案是使用`serialize()`and `$.param`。

```
var formData = $("#task_form").serialize();
formData += '&'+$.param({column: column, order: order}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T19:59:48.060

serializeArray 方法生成一个对象数组，其中包含键和值。试试这个代码：

```
formData.push([{name: 'column', value: column});
formData.push([{name: 'order', value: order}); 
```

# c# - 在 iis7 中托管 wcf 服务时，在 ApplyDispatchBehavior 方法处设置断点

> ID：12012281
> 
> 赞同：1
> 
> 时间：2012-08-17T19:49:10.027
> 
> 标签：c#, wcf

我的 wcf 服务托管在 iis7 中。有没有办法我可以在 ApplyDispatchBehavior 方法中设置断点，并确保在运行时通过击中该断点来调用它？我的总体问题是在 CultureMessageInspector 类中没有命中方法 AfterReceiveRequest。我的代码的详细信息已发布在以下链接中的问题下。请帮助我..谢谢

[wcf AfterReceiveRequest 没有被调用](https://stackoverflow.com/questions/11997119/wcf-afterreceiverequest-not-getting-called)

[在 iis 托管的 wcf 服务中传递文化值](https://stackoverflow.com/questions/11994697/passing-culture-value-inside-wcf-service-hosted-by-iis)

```
public class CultureBehaviour : IEndpointBehavior
    {
        #region IEndpointBehavior Members

        public void AddBindingParameters(ServiceEndpoint endpoint, System.ServiceModel.Channels.BindingParameterCollection bindingParameters)
        {
        }

        public void ApplyClientBehavior(ServiceEndpoint endpoint, System.ServiceModel.Dispatcher.ClientRuntime clientRuntime)
        {
            CultureMessageInspector inspector = new CultureMessageInspector();
            clientRuntime.MessageInspectors.Add(inspector);
        }

        public void ApplyDispatchBehavior(ServiceEndpoint endpoint, System.ServiceModel.Dispatcher.EndpointDispatcher endpointDispatcher)
        {
            CultureMessageInspector inspector = new CultureMessageInspector();
            endpointDispatcher.DispatchRuntime.MessageInspectors.Add(inspector);
        }

        public void Validate(ServiceEndpoint endpoint)
        {
        }

        #endregion
    }

public class CultureMessageInspector : IClientMessageInspector, IDispatchMessageInspector
    {
        private const string HeaderKey = "culture";
        #region IDispatchMessageInspector Members

        public object AfterReceiveRequest(ref System.ServiceModel.Channels.Message request, System.ServiceModel.IClientChannel channel, System.ServiceModel.InstanceContext instanceContext)
        {
            int headerIndex = request.Headers.FindHeader(HeaderKey, string.Empty);
            if (headerIndex != -1)
            {
                Thread.CurrentThread.CurrentCulture = new CultureInfo(request.Headers.GetHeader<String>(headerIndex));
            }
            return null;
        }

        public void BeforeSendReply(ref System.ServiceModel.Channels.Message reply, object correlationState)
        {
        }

        #endregion

        #region IClientMessageInspector Members

        public void AfterReceiveReply(ref System.ServiceModel.Channels.Message reply, object correlationState)
        {
        }

        public object BeforeSendRequest(ref System.ServiceModel.Channels.Message request, System.ServiceModel.IClientChannel channel)
        {
            request.Headers.Add(MessageHeader.CreateHeader(HeaderKey, string.Empty, Thread.CurrentThread.CurrentCulture.Name));
            return null;
        }

        #endregion
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:54:17.097

假设 PDB 文件存在于您的 bin 目录中，您可以简单地将调试器附加到 IIS7 进程并正常调试。

确保 web.config 设置了 debug="true"。

有关更多详细信息，请参阅此答案

[将调试器附加到 IIS 实例](https://stackoverflow.com/questions/848987/attach-debugger-to-iis-instance)

# maven - 在 maven-dependency-plugin:copy-dependencies 上使用正则表达式重命名

> ID：12012282
> 
> 赞同：1
> 
> 时间：2012-08-17T19:49:14.310
> 
> 标签：maven, maven-dependency-plugin

我想重命名所有依赖项以剥离 SNAPSHOT，以便我的文件处理脚本和安装程序在我发布时不会中断。

我目前使用 maven-dependency-plugin:copy-dependencies 并复制列出并重命名的各个工件。我宁愿有类似于 ant 的正则表达式映射器的东西来建立重命名规则。

目前，我计划将依赖项复制到准备包中的第一阶段目录，并在包中使用 antrun 的复制 + 正则表达式映射器来复制/重命名，但这会浪费时间和空间。

有没有更直接的方法来解决这个问题？依赖插件可以处理基于规则的重命名吗？

谢谢

彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T07:56:01.753

如果您只想从依赖项中删除版本，则将 stripVersion 参数添加到插件配置中：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-dependency-plugin</artifactId>
    <version>2.4</version>
    <executions>
        <execution>
            <id>copy-dependencies</id>
            <goals>
                <goal>copy-dependencies</goal>
            </goals>
            <configuration>
                <silent>true</silent>
                <outputDirectory>libs</outputDirectory>
                <stripVersion>true</stripVersion>
                <includeTypes>swc</includeTypes>
                <excludeGroupIds>com.adobe.flex.framework</excludeGroupIds>
                <excludeTypes>pom</excludeTypes>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

# android - 未调用 ViewPager onPageScrolled 事件

> ID：12012284
> 
> 赞同：6
> 
> 时间：2012-08-17T19:49:26.083
> 
> 标签：android, android-viewpager

以下代码可以很好地滚动 4 页。我的问题是`onPageScrolled`滚动页面时不会触发事件。无论我是否使用该`myPager.SetOffsccreenPageLimit(4)`命令，都会发生这种情况。阅读文档后，我的理解是，当我将事件`implements ViewPager.OnPageChangeListener`包含在`MyPagerAdapter`课程中时，应该触发该事件。我究竟做错了什么？

谢谢，加里布莱克利

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    MyPagerAdapter adapter = new MyPagerAdapter();
    ViewPager myPager = (ViewPager) findViewById(R.id.mysevenpanelpager);
    myPager.setAdapter(adapter);
    myPager.setCurrentItem(0);
    myPager.setOffscreenPageLimit(4);
}

private class MyPagerAdapter extends PagerAdapter 
    implements ViewPager.OnPageChangeListener {

    public int getCount() {
        return 4;
    }

    public Object instantiateItem(View collection, int position) {
        LayoutInflater inflater = (LayoutInflater) collection.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        int resId = 0;
        switch (position) {
        case 0:
            resId = R.layout.left;
            break;
        case 1:
            resId = R.layout.gps;
            break;
        case 2:
            resId = R.layout.map;
            break;
        case 3:
            resId = R.layout.right;
            break;
        }

        View view = inflater.inflate(resId, null);

        ((ViewPager) collection).addView(view, 0);

        return view;
    }

    @Override
    public void destroyItem(View arg0, int arg1, Object arg2) {
        ((ViewPager) arg0).removeView((View) arg2);
    }
    @Override
    public void onPageScrollStateChanged(int arg0) {
        int myint = 9;
        myint = myint * 2;
    }

    @Override
    public void onPageScrolled(int arg0, float arg1, int arg2) {
        int myint = 9;
        myint = myint * 2;
    }

    @Override
    public void onPageSelected(int arg0) {
        int myint = 9;
        myint = myint * 2;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T19:54:45.770

您还需要`set`使用`setOnPageChangeListener()`.

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    MyPagerAdapter adapter = new MyPagerAdapter();
    ViewPager myPager = (ViewPager) findViewById(R.id.mysevenpanelpager);
    myPager.setAdapter(adapter);
    myPager.setCurrentItem(0);
    myPager.setOffscreenPageLimit(4);
    myPager.setOnPageChangeListener(adapter); // This line here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T19:56:30.887

我相信您还需要使用ViewPager 上的[.setOnPageChangeListener()](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setOnPageChangeListener%28android.support.v4.view.ViewPager.OnPageChangeListener%29)将您的适配器实例注册为这些类型的事件的侦听器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-17T07:50:12.980

您需要设置一个侦听器，但~~`setOnPageChangeListener(OnPageChangeListener)`~~已弃用。您应该使用**`addOnPageChangeListener(OnPageChangeListener)`**能够拥有多个侦听器。

# php - fputcsv 函数和表格

> ID：12012287
> 
> 赞同：0
> 
> 时间：2012-08-17T19:49:41.587
> 
> 标签：php

我正在尝试使用该`fputcsv`函数将我的表单提交值处理到 .csv 文件。我没有收到任何错误，也没有将表单值保存到 data.csv 文件中。谁能看到我做错了什么的问题？

**形式**

```
<label for="location">How many Locations?</label> 
<input id="location" name="loc" /><br />

<select id="when" name="day">
    <option value="Sunday">Sunday</option>
    <option value="Monday">Monday</option>
    <option value="Tuesday">Tuesday</option>
    <option value="Wednesday">Wednesday</option>
    <option value="Thursday">Thursday</option>
    <option value="Friday">Friday</option>
    <option value="Saturday">Saturday</option>
</select>
<input type="checkbox" id="osecom" name="osecom" value="Yes" /> 
<label for="osecom">Online</label>

<input type="checkbox" id="item1yes" name="item1yes" value="Yes" /> Yes
<input type="checkbox" id="item1no" name="item1no" value="No" /> No<br />
<label for="chkitem1">mobile</label> 

<input type="checkbox" id="item2yes" name="item2yes" value="Yes" /> Yes
<input type="checkbox" id="item2no" name="item2no" value="No" /> No<br />
<label for="chkitem2">policy? </label> 

<input type="submit" title="Submit Form" value="" /> 
```

**php代码**

```
if(isset($_POST['submit'])) {

    $data = implode(',', $_POST);
    if( $fp = fopen('data.csv', 'a') ){
        fputcsv($fp, $data);
    }
    fclose($fp);        

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T20:22:08.913

不要使用 implode(',', $_POST)！

$_POST 是数组， fputcsv() 期望第二个参数是数组而不是字符串！

更好地使用此代码：

```
if(isset($_POST['submit'])) {
    $data = array_values($_POST); // get only values
    if( $fp = fopen('data.csv', 'a') ){
        fputcsv($fp, $data);
    }
    fclose($fp);
} 
```

请注意，通过仅保存值，如果 $_POST 中的参数切换位置，您将无法读取 csv，因此最好保存带有标题的第一行：

```
if(isset($_POST['submit'])) {
    $data = array_values($_POST); // get only values
    $headers = array_keys($_POST); // keys are headers 
    if( $fp = fopen('data.csv', 'a') ){
        fputcsv($fp, $headers);
        fputcsv($fp, $data);
    }
    fclose($fp);
} 
```

编辑：我注意到在您的表单中，您使用的复选框更适合单选按钮，例如字段“移动？” 和“政策？”

# django - 在 django 模板中循环排序字典特定次数

> ID：12012289
> 
> 赞同：1
> 
> 时间：2012-08-17T19:49:53.447
> 
> 标签：django, for-loop, django-templates

我有一个包含排序选项的排序字典：

```
sort_options = SortedDict([
    ("importance" , ("Importance" , "warning-sign")),
    ("effort" , ("Effort" , "wrench" , "effort")),
    ("time_estimate" , ("Time Estimate" , "time")),
    ("date_last_completed" , ("Date Last Completed" , "calendar")),
]) 
```

我在我的模板中显示这些选项：

```
{% for key, icon in sort_options.items %}<!-- Sort Options -->
    <a class="btn btn-info" href={{ request.path }}?key={{ key }}&orientation=desc><i class="icon-{{ icon.1 }} icon-large"></i></a>
{% endfor %} 
```

我需要定义 4 个排序选项，但我只想显示前 3 个（其余选项在其他地方使用）。我还预计会添加其他不需要显示的排序选项。我可以编写一个带有 forloop 计数器的 if 语句来防止显示最后一个选项，但这似乎很浪费。

我找到[了这个过滤器](http://djangosnippets.org/snippets/1357/)，但我不确定如何将它与需要键和图标数据的 forloop 结合起来。

如何为在字典上运行且仅循环 X 次的循环编写 django 模板？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T20:37:43.183

与乔的回答类似，但实际上[有一个内置过滤器`slice`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#slice)可以为您执行此操作：

```
{% for key, icon in sort_options.items|slice:":3" %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:08:39.363

我认为您可以使用模板过滤器来做到这一点。例如，在：

**./mymodules/templatetags/mytags.py**

```
@register.filter
def get_recent(object, token):
    """
    Must pass a Option Dictionary 
    """
    return object.items()[:token] 
```

然后在您的模板中：

```
{% load mytags %}

{% for option in sort_options|get_recent:3 %}
    key: {{ option.0  }} 
    value: {{ option.1 }}
{% endfor %} 
```

我没有机会测试上面的代码，但认为逻辑是合理的。让我知道你的想法。

# imap - Kindle 优化的 IMAP 网络邮件客户端

> ID：12012291
> 
> 赞同：-1
> 
> 时间：2012-08-17T19:49:56.130
> 
> 标签：imap, kindle, webmail

我最近买了一台 Kindle 3G，它带有一个简单的基于 Webkit 的网络浏览器。这将是在国外检查我的电子邮件的完美设备（因为全球免费 3G），但不幸的是，我还没有找到一个真正适用于有限资源和小型 eInk 显示器的网络邮件客户端。例如，它不能很好地与 Squirrelmail 或 Roundcube 配合使用，甚至 Gmail 也不能很好地工作。

有人知道与 Kindle 配合得很好的网络邮件软件，让我连接到任意 IMAP 服务器吗？如果这还不存在并且有一些兴趣，我也可以自己编写这样的客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T06:51:03.767

我会尝试 Horde Webmail (http://www.horde.org)。它提供了针对智能手机视图优化的“最小”视图和基于 jQuery Mobile 的“智能手机”视图。后者应该支持 Kindle 3 和 Kindle Fire（参见[http://jquerymobile.com/gbs/](http://jquerymobile.com/gbs/)）。不过，我自己并没有测试 Kindle 支持。

# firefox - WordPress 插件可以在 Firefox 之外运行

> ID：12012295
> 
> 赞同：0
> 
> 时间：2012-08-17T19:50:30.953
> 
> 标签：firefox, wordpress, mediaelement.js

我在 WordPress 网站上使用“MediaElement.js - HTML5 音频和视频”插件，它工作得很好，除了我无法在 Firefox 中使用它。

我只将它用于音频剪辑，并且我正在使用 mp3 文件。

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T19:50:45.903

您是否尝试过将以下代码用于 .htaccess 文件并查看它是否有效。

AddType video/ogg .ogv AddType video/mp4 .mp4 AddType video/webm .webm AddType audio/mp3 .mp3

# java - Jersey/Jaxb 别名 bean 列表

> ID：12012299
> 
> 赞同：2
> 
> 时间：2012-08-17T19:50:52.243
> 
> 标签：java, jaxb, jersey

我有一个界面

```
@Path("basePath")
@Produces(MediaType.APPLICATION_XML)
@Consumes(MediaType.APPLICATION_XML)
public interface SomeService {

@GET
@Path("list")
public List<ItemBean> getItems() throws WebApplicationException;

} 
```

和一颗豆子

```
@XmlRootElement(name = "item")
@XmlAccessorType(XmlAccessType.FIELD)
public class ItemBean {

@XmlElement(name = "name")
private String someName;
@XmlElement(name = "description")
private String desc20Char;

..... 
```

如果我提出请求，我的回应是

```
<itemBeans>
   <item>
      <name>foo</name>
      <description>bar</description>
   </item>
   ....etc....
</itemBeans> 
```

除了 itemBeans 标记之外，所有这些都很好。如何将其重命名为项目？我尝试将@XmlElement(name = "items") 同时添加到接口的方法、实现类的方法和返回参数中。我错过了什么吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T21:51:06.733

```
@XmlRootElement(name = "itemBeans")
@XmlAccessorType(XmlAccessType.FIELD)
public class ItemBeans 
{
    @XmlElementWrapper(name = "items")
    @XmlElement(name = "item")
    private List<ItemBean> beans;

    public ItemBeans(List<ItemBean> beans) {
        this.beans = beans;
    }

    public ItemBeans() {
    }
} 
```

WS

```
@GET
@Path("list")
public ItemBeans getItems() throws WebApplicationException;

} 
```

回复

```
<itemBeans>
    <items>
        <item>
            <name>first</name>
            <description>second</description>
        </item>
        <item>
            <name>first1</name>
            <description>second1</description>
        </item>
    </items>
</itemBeans> 
```

# templates - 流星如何在模板末尾加载脚本

> ID：12012303
> 
> 赞同：0
> 
> 时间：2012-08-17T19:50:56.863
> 
> 标签：templates, meteor, handlebars.js

我有一个看起来像这样的模板。它曾经与常规的 html 文件一起工作，但是，它现在不工作了。

这是我的`test.html`文件。

```
<template name="test">
<a href="xxxxxxxx" class="screenshot">
    <img src="xxxxxx" alt="Screenshot" class="thumbnail"/>
    <span class="screenshot-zoom"></span>
</a>
<script>
    $(function () {
        $(".screenshot").lightbox();
    });
</script>
</template> 
```

**编辑1**

我关注[https://stackoverflow.com/a/10119993/772481](https://stackoverflow.com/a/10119993/772481)并尝试类似的测试，但仍然无法正常工作。

```
->test.html
<template name="test">
    <a href="./img/screenshots/placeholder.gif" class="screenshot">
        <img src="http://placehold.it/300x120" alt="Screenshot" class="thumbnail"/>
        <span class="screenshot-zoom"></span>
        {{add_my_special_behavior}}
    </a>
</template>

->screenshot.js
Template.test.add_my_special_behavior = function () {
    Meteor.defer(function () {
        // do stuff to it
        $(".screenshot").lightbox();
    });
    // return nothing
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T13:46:21.350

使用[`rendered`](http://docs.meteor.com/#template_rendered)模板可用的事件：

```
Template.test.rendered = function() {
  $(".screenshot").lightbox();
} 
```

这将在 Meteor 渲染模板后执行 lightbox 方法。

# mongodb - Grails Scaffolding 的 MongoDB 问题（在 MySQL 中不会发生）

> ID：12012306
> 
> 赞同：5
> 
> 时间：2012-08-17T19:51:21.603
> 
> 标签：mongodb, grails, groovy, grails-orm

我尝试使用 MongoDB 2.0.6 替换 MySQL 5.5.25 来测试 Grails 2.1 应用程序，但遇到了一些奇怪的问题。

使用 MongoDB 而不是 MySQL 时的问题：

1.  使用脚手架时，我无法通过使用静态约束来排序字段

2.  当我将 inList 指定为约束时，在使用 MySQL 后端时会出现一个下拉列表，但在使用 MongoDB 后端时会出现一个字段。

3.  `blank=false`指定约束的字段上没有 *（星号） 。

**域类**：

```
package study

class Student {

    String login
    String firstName
    String lastName
    String gender
    Boolean active

    Date dateCreated
    Date lastUpdated

    static constraints = {
        login()
        firstName(blank: false)
        lastName(blank: false)
        gender(inList: ['M', 'F'])
        active()
    }

} 
```

**控制器**

```
package study

class StudentController {

    def scaffold = true
} 
```

**DataSource.groovy**（MySQL 的东西被注释掉了）：

```
grails {
  mongo {
    host = "dev-linux"
    port = 27017
    username = "study"
    password= "********"
    databaseName = "study"
  }
}

//dataSource {
//    pooled = true
//    driverClassName = "com.mysql.jdbc.Driver"
//    dialect = "org.hibernate.dialect.MySQL5InnoDBDialect"
//    username = "study"
//    password = "********"
//    dbCreate = "create-drop" // one of 'create', 'create-drop','update'
//    url = "jdbc:mysql://dev-linux:3306/study"
//
//}
//hibernate {
//    cache.use_second_level_cache = true
//    cache.use_query_cache = true
//    cache.provider_class = "net.sf.ehcache.hibernate.EhCacheProvider"
//} 
```

**BuildConfig.groovy**（显示的插件部分是我将 MongoDB 替换为 MySQL 的所有内容，该文件的其余部分是 Grails 创建的默认值）

```
plugins {
      // build ":hibernate:$grailsVersion"
      // compile ":mysql-connectorj:5.1.12"

      compile ":mongodb:1.0.0.GA"
      build ":tomcat:$grailsVersion"

} 
```

我对 MongoDB 和 MySQL 所做的唯一更改是对上面显示的**DataSource.groovy**和**BuildConfig.groovy**的更改。

有没有我遗漏的配置项？

我确实看到有人在这个[Nabble 论坛帖子](http://grails.1312388.n4.nabble.com/2-0-1-order-of-fields-for-scaffolding-is-broken-td4445221.html)中提到字段排序可能是 MongoDB 的一个问题。

但是，这篇文章没有任何细节。

此外，我不明白后端数据库引擎为什么或如何影响使用脚手架时视图的呈现方式。具体来说，页面上的排序和下拉 vs 文本字段。

我原以为这将来自域类的字段类型和约束。

以前在 MongoDB 中使用 Grails+Scaffolding 时，有没有人遇到过这种奇怪的行为？有谁知道修复或有任何见解？

非常感谢您，我很感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T21:30:13.683

MongoDB 的脚手架可以工作，问题是如果你只是安装 mongodb 插件，grails 会看到模棱两可的域映射和类似的错误弹出。您需要：

*   像这样删除休眠插件：

    ```
    grails uninstall-plugin hibernate 
    ```

    还要从 BuildConfig.groovy 中删除这些行：

    ```
    runtime ":database-migration:1.1"
    runtime ":hibernate:$grailsVersion" 
    ```

*   通过添加以下行来明确告诉给定域由 Mongo 持久化：

    ```
    static mapWith="mongo" 
    ```

# firefox - Firefox 字体跨站访问错误

> ID：12012307
> 
> 赞同：3
> 
> 时间：2012-08-17T19:51:23.663
> 
> 标签：firefox, fonts, font-face, cdn

我们刚刚开始使用 Amazon Cloudfront 的 CDN 来加载我们的文件，但我们无法在 Firefox 中加载 @font-face 字体。根据一些建议，我们在 htaccess 文件中添加了以下代码，但似乎并没有解决问题。

```
<FilesMatch "\.(ttf|ttc|otf|eot|woff)$">
  <IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
  </IfModule>
</FilesMatch> 
```

字体有时会出现，但我们仍然会在控制台中看到每种字体的错误。您可以在[http://wiredimpact.com](http://wiredimpact.com)上查看。

另外，我用来了解这个的主要 WordPress 帖子是[http://wordpress.org/support/topic/plugin-w3-total-cache-font-face-not-working-in-firefox?replies=21](http://wordpress.org/support/topic/plugin-w3-total-cache-font-face-not-working-in-firefox?replies=21)。

关于如何让字体正确加载到 Firefox 中的任何建议？

谢谢。

**编辑：**

我将 htaccess 中使用的代码调整为：

```
<FilesMatch "\.(ttf|ttc|otf|eot|woff|font.css)$">
  <IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*.wiredimpact.com"
  </IfModule>
</FilesMatch> 
```

这不仅添加了 font.css 文件，这在 Firefox 中似乎有帮助，而且它也只从我们的子域加载，这对安全目的更好。字体现在似乎正在 Firefox 中加载，但错误仍然显示在控制台中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T21:50:36.670

正如[icoMoon 字体中所述，@meaganoff 不会在 Firefox 上显示](https://stackoverflow.com/questions/13666722/icomoon-fonts-doesnt-show-up-on-firefox#8203;icomoon-fonts-doesn)：

> 我也遇到了 icomoon 和 Firefox 的问题。您是否尝试过 [Paul Irish 的“防弹”`@font-face`语法](http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/)？它与 icomoon 的输出有点不同，而且我的运气更好——从那以后就没有 FF 问题了。
> 
> ```
> @font-face {
>     font-family: 'Graublau Web';
>     src: url('GraublauWeb.eot?') format('eot'), url('GraublauWeb.woff') format('woff'), url('GraublauWeb.ttf') 
> ```
> 
> 格式（'truetype'）；}

并且像魅力一样工作！

# mysql - Mysql 连接查询 - phpmyadmin 错误是“不是唯一的表别名”

> ID：12012317
> 
> 赞同：1
> 
> 时间：2012-08-17T19:52:14.850
> 
> 标签：mysql

伙计们正在寻求一点帮助。我试图在 php myadmin 中运行此查询。需要用 4 组数据更新一个临时表..一个表中的 3 组..另一个表中的 1 组，同时加入 3 个表。在我没有唯一表别名的第二次 JOIN 之后，错误又回来了。我不知道如何解决这个问题。谁能看到查询出错的地方？谢谢。

```
INSERT INTO jos_jxgallery_assign_ratings_temp( image_id, pscore, hits, contest_id )
SELECT jos_jxgallery_images.image_id, jos_jxgallery_images.pscore, jos_jxgallery_images.hits, jos_jxgallery_contests.contest_id
    FROM jos_jxgallery_images, jos_jxgallery_contests
    INNER JOIN jos_jxgallery_contest_image_map ON jos_jxgallery_images.image_id = jos_jxgallery_contest_image_map.image_id
    INNER JOIN jos_jxgallery_contests ON jos_jxgallery_contest_image_map.contest_id = jos_jxgallery_contests.contest_id
    WHERE jos_jxgallery_contests.published =1
    AND jos_jxgallery_images.published =1
    ORDER BY jos_jxgallery_images.pscore DESC , jos_jxgallery_images.hits DESC
    LIMIT 25

    MySQL said: Documentation
        #1066 - Not unique table/alias: 'jos_jxgallery_contests' 
```

现在，当我将查询更改为此...我在查询下方列出了另一个错误。有任何想法吗？

```
 INSERT INTO jos_jxgallery_assign_ratings_temp( image_id, pscore, hits, contest_id )
SELECT jos_jxgallery_images.image_id, jos_jxgallery_images.pscore, jos_jxgallery_images.hits, jos_jxgallery_contests.contest_id
FROM jos_jxgallery_images, jos_jxgallery_contests
INNER JOIN jos_jxgallery_contest_image_map ON jos_jxgallery_images.image_id = jos_jxgallery_contest_image_map.image_id
INNER JOIN jos_jxgallery_contests AS con ON jos_jxgallery_contest_image_map.contest_id = con.contest_id
WHERE con.published =1
AND jos_jxgallery_images.published =1
ORDER BY jos_jxgallery_images.pscore DESC , jos_jxgallery_images.hits DESC
LIMIT 25

MySQL said: Documentation
#1054 - Unknown column 'jos_jxgallery_images.image_id' in 'on clause' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:55:33.163

您在 FROM 和 INNER JOIN 中使用 jos_jxgallery_contests。在 INNER JOIN 中，您建立了一个模棱两可的连接。你为什么要这么做？

# c++ - c++ WinApi：GetClientRect 失败

> ID：12012318
> 
> 赞同：3
> 
> 时间：2012-08-17T19:52:25.797
> 
> 标签：c++, winapi, screensaver

我正在编写一个在 Windows 上运行的屏幕保护程序。

在预览模式下，Windows 以这种方式调用程序：
`Screensaver.exe /p ParentWindowHandle`

但是，当我在我的程序中进行此调用时：
`BOOL res = GetClientRect(parentWindowHandle, rect)`
res 为 FALSE，rect 为 NULL，我得到`ERROR_INVALID_WINDOW_HANDLE`了`GetLastError()`

`GetWindowRect`给了我同样的结果。

但是，如果我改为调用`BOOL res = IsWindow(parentWindowHandle)`，我会得到 res == TRUE。这不意味着我有一个有效的窗口句柄吗？

代码如下所示：

```
int WINAPI wWinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, PWSTR pCmdLine, int nCmdShow)
{
    unsigned int handle = GetHandleFromCommandLine(pCmdLine); // Custom function (tested and approved :) )
    HWND parentWindowHandle = (HWND) handle;
    LPRECT rect = NULL;
    BOOL res = GetClientRect(parentWindowHandle, rect);
    // here, rect == NULL, res == FALSE and GetLastError() returns ERROR_INVALID_WINDOW_HANDLE

    // ...
    // ...
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T20:01:41.667

在 64 位 Windows 上，窗口句柄是 64 位，不能放入 中`unsigned int`，因此您的转换生成的值是无效的窗口句柄。您应该修改您的`GetHandleFromCommandLine`函数，使其返回正确`HWND`的 ，而不是`unsigned int`，并且不需要类型转换。

此外，`GetClientRect`通过将矩形存储到第二个参数指向的值中来返回矩形。如果你通过它`NULL`，它就没有地方存储它，所以它会崩溃或失败并出现无效参数错误。为避免这种情况，请传入局部变量的地址：

```
RECT rect;
GetClientRect(..., &rect); 
```

# python - 第一次测试后硒测试失败

> ID：12012323
> 
> 赞同：2
> 
> 时间：2012-08-17T19:52:37.833
> 
> 标签：python, django, selenium

我正在尝试使用 xvfb 在 Debian 服务器上运行我为 Django 项目编写的硒测试。

我尝试运行 3 个测试，在第一次测试后，它们因以下错误而失败：NoSuchElementException: Message: u'Unable to locate element： `{"method":"xpath","selector":"//a[@href=\\"#detail\\"]"}'`

我已经运行`export DISPLAY=:99`并正在使用带有 django-selenium 的 Django LiveServerTestCase。 `SELENIUM_DISPLAY = ':99'`在我的 settings.py 中设置。

这是我的测试运行器：

```
class BaseLiveTest(LiveServerTestCase):
    @classmethod
    def setUpClass(cls):
        cls.selenium = WebDriver()
        super(BaseLiveTest, cls).setUpClass()

    @classmethod
    def tearDownClass(cls):
        super(BaseLiveTest, cls).tearDownClass()
        cls.selenium.quit()

    def login(self, user):
        #helper function, to log in users
        #go to login page
        self.selenium.get("%s%s" % (self.live_server_url, reverse('userena_signin')))
        #wait for page to display
        WebDriverWait(self.selenium, 10).until(
            lambda x: self.selenium.find_element_by_id('id_identification'),
        )
        #fill in form and submit
        identifictation_input = self.selenium.find_element_by_id('id_identification')
        identifictation_input.send_keys(user.email)
        password_input = self.selenium.find_element_by_id("id_password")
        password_input.send_keys('password')
        self.selenium.find_element_by_xpath('//form/descendant::button[@type="submit"]').click()

        #wait for dashboard to load
        WebDriverWait(self.selenium, 10).until(
            lambda x: self.selenium.find_element_by_id('container'),
        ) 
```

当我自己运行每个测试时，它们都通过了，但是如果我尝试一个接一个地运行它们，最后两个会失败。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T20:43:39.377

您需要使用`setUp()`and `tearDown()`，而不是`setUpClass()`and `tearDownClass()`。Class 版本针对整个fixture 全局运行，因此所有3 个测试都使用同一个`WebDriver`实例，因此浏览器不在您对第二个和第三个测试的预期状态。

# mysql - mysql count(*) 是否比 count(specific_field) 效率低得多？

> ID：12012327
> 
> 赞同：-3
> 
> 时间：2012-08-17T19:52:49.610
> 
> 标签：mysql, sql

> **可能重复：**
> [COUNT( *) vs. COUNT(1) vs. COUNT(pk)：哪个更好？*](https://stackoverflow.com/questions/2710621/count-vs-count1-vs-countpk-which-is-better) *[count(](https://stackoverflow.com/questions/2876909/count-and-countcolumn-name-whats-the-diff)* [) 和 count(column_name)，有什么区别？](https://stackoverflow.com/questions/2876909/count-and-countcolumn-name-whats-the-diff)
> [count(*) vs count(column-name) - 哪个更正确？](https://stackoverflow.com/questions/3003457/count-vs-countcolumn-name-which-is-more-correct)

在 select 语句中使用的好处`count(*)`是我可以将它与任何表一起使用，这使得自动化脚本更容易：

`count_sql = 'select count(*) ' + getRestOfSQL('tablename');`

但是，它是否比使用效率低`count(specific_field)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T19:55:02.700

**对于 InnoDB**

如果`specific_field`不可为空，则它们是等效的并且具有相同的性能。

如果`specific_field`可以为空，则它们不会做同样的事情。`COUNT(specific_field)`计算具有非空值的行`specific_field`。这需要查看`specific_field`每一行的值。`COUNT(*)`只计算行数，在这种情况下可以更快，因为它不需要检查`specific_field`.

**对于 MyISAM**

以下内容有一个特殊的优化，因此它甚至不需要获取所有行：

```
SELECT COUNT(*) FROM yourtable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T19:55:26.817

一般来说，这并不重要，因为我们返回的行数相同。

这个链接很好地涵盖了它

*   [count(*) vs count(column-name) - 哪个更正确？](https://stackoverflow.com/questions/3003457/count-vs-countcolumn-name-which-is-more-correct)
*   [计数（*）与计数（1）](https://stackoverflow.com/questions/1221559/count-vs-count1)

此链接还解释了更多，[特别是 Oracle](http://www.bidn.com/blogs/BradSchacht/ssis/2195/select-count-vs-count-1-vs-count-columnname)

# compilation - /usr/bin/ld: 找不到 -latlas

> ID：12012330
> 
> 赞同：3
> 
> 时间：2012-08-17T19:53:00.117
> 
> 标签：compilation, fedora, ld, scons, atlas

我正在尝试在新计算机上安装过去成功安装的代码，但遇到了问题。

这是在**Fedora**上，使用**scons**。之前的成功安装是在**Ubuntu**上。

当我输入 scons 时，会出现以下错误：

```
/usr/bin/ld: cannot find -latlas 
```

我已经通过 yum 成功安装了 atlas-devel。

如果有帮助，您会在顶级 SConstruct 文件下方找到（--- 表示已编辑的代码）

* * *

```
BUILD_LIB_DIR     = '#build/lib'
BUILD_INCLUDE_DIR = '#build/include'
BUILD_BIN_DIR     = '#build/bin'

import os

default_env = Environment(ENV        = os.environ,             # use the system $PATH variable
                          CCFLAGS    = ['-pipe', '-Wall'],
                          CXXFLAGS   = ['-std=c++0x'],
                          CPPPATH    = [BUILD_INCLUDE_DIR, '#src/'],
                          LIBPATH    = [BUILD_LIB_DIR],
                          CPPDEFINES = ['_USE_LCM_'])

default_env.Append(LIBS = [---, 'lapack', 'blas', 'atlas', 'armadillo', 'rt'])

default_env.Alias('install', [BUILD_LIB_DIR, BUILD_INCLUDE_DIR, BUILD_BIN_DIR])

# Create the command-line options along with help text
vars = Variables()
vars.Add(BoolVariable('debug', 'Compile in debug mode with -g and -pg', 0))
vars.Add(EnumVariable('---'))
vars.Add(BoolVariable('log-data', 'Define LOG_DATA in the preprocessor so internal state of modules will be written to log files', 0))
Help(vars.GenerateHelpText(default_env))

debug = ARGUMENTS.get('debug', 0)
log   = ARGUMENTS.get('log-data', 0)

if int(debug):
    default_env.Append(CCFLAGS = ['-g', '-pg'])
    default_env.Append(LINKFLAGS = ['-pg'])
else:
    default_env.Append(CCFLAGS = ['-O3'])

if int(log):
    default_env.Append(CPPDEFINES = ['LOG_DATA'])

log_env = default_env.Clone();
log_env.Append(LIBS=['global', 'readlog', 'z'])

Export(['default_env', 'log_env', 'BUILD_LIB_DIR', 'BUILD_INCLUDE_DIR', 'BUILD_BIN_DIR', ---])

SConscript(['src/SConscript',
            'docs/SConscript']) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:34:57.430

事实证明，问题在于 atlas 将 libatlas.so 放在 /usr/lib(64)/ **atlas** /... 感谢@Dave_Bacher 提供有关如何处理此问题的信息，即

> 将 /usr/lib/atlas 添加到 default_env 中的 LIBPATH 数组中：
> 
> ```
> LIBPATH = [BUILD_LIB_DIR, /usr/lib/atlas] 
> ```

# android - eclipse android模拟器按钮不起作用

> ID：12012331
> 
> 赞同：0
> 
> 时间：2012-08-17T19:53:01.527
> 
> 标签：android, eclipse, emulation

我正在 Eclipse Juno 上开发一个 android 应用程序。android 模拟器启动正确加载我的启动画面，然后正确移动，但模拟器上的按钮都不起作用。代表手机上的按钮的所有按钮在单击时什么都不做，当我尝试单击我的应用程序上的任何按钮时也没有任何反应。以前有人有这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:24:32.697

1.  开始日食
2.  启动安卓虚拟设备管理器。
3.  选择您使用的 AVD。4.选择右上角的编辑。
4.  在硬件选项中选择新建。
5.  添加键盘盖支持和键盘支持。
6.  为此属性设置值是。
7.  现在启动模拟器这将工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T20:48:51.917

在新的 ADT 中，他们改变了键盘支持对模拟器的工作方式……所以你需要手动添加对它的支持。如果您转到 AVD 管理器然后编辑您的 AVD，在硬件部分单击新建并添加“键盘支持”并将值设置为“是”。那应该为你解决它。

# ios - 在 iOS 中管理和关闭多个视图控制器

> ID：12012336
> 
> 赞同：3
> 
> 时间：2012-08-17T19:53:37.533
> 
> 标签：ios, uiviewcontroller

我是 iPhone 的新手程序员。在开发我的第一个游戏/应用程序时，我为自己提出了一个问题（创造了一个问题）。我对此进行了研究，并认为我已经看到了答案，但我不明白如何使它们适用于我的应用程序。

我有一个有几个视图控制器的游戏：Welcome、Play、High Scores、Preferences 和 About。我没有我知道的导航控制器或根控制器。编辑 - 我现在有一个 rootview 控制器 - 我添加`[self.window setRootViewController:viewController];`到我的 appDelegate.m 文件

从欢迎屏幕/视图控制器我可以转到 Play 视图控制器、关于视图控制器、高分视图控制器或首选项视图控制器。我想让我现在去的任何新控制器负责，这样我就可以关闭 Welcome 视图控制器。事实上，每当我使用视图控制器时，我都希望能够从内存中删除任何其他视图控制器——尤其是我刚刚来自的那个。我可以**从大多数视图控制器****转到**大多数视图控制器。

 **我使用这个去新的视图控制器：

```
- (IBAction)playGameAction:(id)sender {
    FlipTestViewController *myViewController = [[FlipTestViewController alloc]

   initWithNibName:@"FlipTestViewController" bundle:nil];

    [UIView beginAnimations:@"flipview" context:nil];
    [UIView setAnimationDuration:1];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft 
                           forView:self.view cache:YES];

    [self.view addSubview:myViewController.view];

    [UIView commitAnimations];
} 
```

一旦我安全地进入 FlipTestViewController（播放控制器），我该怎么做才能让 WeclomeViewController 离开？我如何告诉新控制器它现在负责并且其他控制器可以离开？我什至在问一个有意义的问题吗？回复时请用小词和具体例子！谢谢！

根据 rdelmar 的建议，我尝试添加一个调用以将 RootvVewController 更改为我的按钮代码 - 我用来调出新 viewController 的代码：

```
- (IBAction)playGameAction:(id)sender {
    FlipTestViewController *myViewController = [[FlipTestViewController alloc]
                                                      initWithNibName:@"FlipTestViewController"
                                                      bundle:nil];

    [UIApplication sharedApplication].delegate.window.rootViewController = myViewController;
    [UIView beginAnimations:@"flipview" context:nil];
    [UIView setAnimationDuration:1];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft 
                           forView:self.view cache:YES];

    [self.view addSubview:myViewController.view];

    [UIView commitAnimations];

} 
```

果然，然后我看评论，FlipTestViewController（我的Play Controller）就是新的RootViewController。不幸的是，我得到一个空白屏幕，没有任何类型的转换和日志消息告诉我我的 FlipTestViewController 中的 ViewDidDisappear 正在以某种方式被调用。可能是因为欢迎屏幕仍然存在。也许是内存管理问题？我应该把这个带到一个新的问题上吗？

我刚刚更改了 main.xib 文件的背景颜色，显然这是正在显示的屏幕（空白屏幕）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T19:57:45.057

要以模态方式呈现视图控制器，您可能想尝试以下方法：

```
- (IBAction)playGameAction:(id)sender {
    FlipTestViewController *myViewController = [[FlipTestViewController alloc] initWithNibName:@"FlipTestViewController" bundle:nil];

    myViewController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self presentViewController:myViewController animated:YES completion:nil];
} 
```

这会将 FlipTestViewController 置于具有翻转过渡样式的当前视图之上。

然后要关闭视图控制器，您可以将其连接到 FlipTestViewController 中的控件（通常是按钮）：

```
- (IBAction)dismissViewController:(id)sender {
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

这会关闭具有相同翻转动画的视图控制器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T15:44:35.200

这听起来像实现你想要的最简单的方法就是重置应用程序窗口的 rootViewController 属性。从应用程序的任何位置，您都可以使用 [UIApplication sharedApplication].delegate.window.rootViewController 获取对根视图控制器的引用。因此，无论您使用何种操作方法切换到下一个视图控制器，您都可以分配初始化该控制器，然后将窗口的 rootViewController 属性设置为该控制器。如果您没有保留对控制器的其他引用，则应在重置属性时释放旧的引用（这可能是也可能不是您想要的 - 您可能想要一些属性来跟踪高分或在哪里例如，玩家正在玩游戏）。

在应用程序委托中，通常有这样的代码（当您从单个视图项目开始时）：

```
 WelcomeController *welcome = [[WelcomeController alloc] initWithNibName:@"ViewController" bundle:nil];
 self.window.rootViewController = welcome; 
```

所以我会在你的应用程序委托中放置类似的东西，以及你想在启动时显示的任何视图控制器。然后在您的视图控制器代码中（或者您将按钮放置在切换视图控制器的任何位置）中，您将有类似的东西（我在我的测试项目中使用了分段控件）：

```
-(IBAction)selectController:(UISegmentedControl *)sender {
    if (sender.selectedSegmentIndex == 0) {
        PlayViewController *player = [[PlayViewController alloc] initWithNibName:@"PlayViewController" bundle:nil];
        [UIApplication sharedApplication].delegate.window.rootViewController = player;
    }else{
        HighScores *scorer = [[HighScores alloc] initWithNibName:@"HighScores" bundle:nil];
        [UIApplication sharedApplication].delegate.window.rootViewController = scorer;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T23:08:41.093

一种简单的方法是使用导航控制器。您可以获得推送/弹出的好处，这有助于屏幕序列。

然后，您可以使用以下命令弹出到特定控制器：

```
- (NSArray *)popToViewController:(UIViewController *)viewController animated:(BOOL)animated 
```

这使您可以转到已经呈现的特定视图控制器，而无需遍历所有其他视图控制器。

此外，鲜为人知的是，您可以将整个控制器堆栈替换为

```
- (void)setViewControllers:(NSArray *)viewControllers animated:(BOOL)animated 
```

它还用索引为零的控制器替换了基本控制器。

因此，您可以轻松获得顶部工具栏和所有导航控制器功能，当您只想将所有内容重置为某个控制器时，您只需...

```
 [navController setViewControllers:@[viewController] animated:YES]; 
```

**编辑**

听起来你并不确定你想要什么。因此，您应该给自己一些余地，而不是试图重新发明轮子。

我认为导航控制器是要走的路。它已经知道如何管理多个控制器，并且`setViewControllers`您可以让它看起来像是从任何控制器转到任何其他控制器，但您可以将相同的导航控制器作为您的主要工作中心。

否则，你仍然可以自己做这一切

```
- (void)presentViewController:(UIViewController *)viewControllerToPresent animated:(BOOL)flag completion:(void (^)(void))completion 
```

和

```
- (void)dismissViewControllerAnimated:(BOOL)flag completion:(void (^)(void))completion 
```

您可以从根视图控制器调用它们。当您想更改控制器时，它将关闭当前控制器并呈现新控制器。**

# drupal - 创建自定义字段格式化程序不起作用

> ID：12012337
> 
> 赞同：6
> 
> 时间：2012-08-17T19:53:40.040
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-fields, drupal-field-api

我正在尝试为文本字段创建一个新的自定义字段格式化程序，但根本没有显示任何内容。

我尝试卸载并重新安装模块并多次刷新缓存，但没有任何效果。

这是我使用的代码

```
/**
 * Implementation of hook_field_formatter_info()
 */
function facebooklink_field_formatter_info()
{
    return array(
        'cfieldformatter_text_1'    => array(
            'label'         => t('Text 1'),
            'field types'   => array('text', 'text_long', 'text_with_summary'),
            'settings'      => array(
                'pic_size'  => 'small',
                'tooltip'   => 'Link to user Facebook page',
            ),
        ),
    );
}

/**
 * Implementation of hook_field_formatter_settings_form()
 */
function facebooklink_field_formatter_settings_form($field, $instance, $view_mode, $form, &$form_state)
{
    //This gets the view_mode where our settings are stored
    $display = $instance['display'][$view_mode];
    //This gets the actual settings
    $settings = $display['settings'];
    //Initialize the element variable
    $element = array();

    $element['pic_size'] = array(
        '#type'           => 'select',                           // Use a select box widget
        '#title'          => t('Button Size'),                   // Widget label
        '#description'    => t('Select what size of FB button'), // Helper text
        '#default_value'  => $settings['pic_size'],              // Get the value if it's already been set
        '#options'        => array(
          'small'  => 'Small',
          'medium' => 'Medium',
          'large'  => 'Large',
        ),
    );

    $element['tooltip'] = array(
        '#type'           => 'textfield',                        // Use a textbox
        '#title'          => t('Tool Tip'),                      // Widget label
        '#description'    => t('This text will appear when a user mouses over.'),  // helper text
        '#default_value'  => $settings['tooltip'],               // Get the value if it's already been set
    );

    return $element;
}

/**
 * Implementation of hook_field_formatter_settings_summary()
 */
function facebooklink_field_formatter_settings_summary($field, $instance, $view_mode)
{
    $display = $instance['display'][$view_mode];
    $settings = $display['settings'];
    $summary = t('Use a @size Facebook button with the tooltip of "@tooltip"', array(
        '@size'     => $settings['pic_size'],
        '@tooltip'  => $settings['tooltip'],
    ));

    return $summary;
}

/**
 * Implementation of hook_field_formatter_view()
 */
function facebooklink_field_formatter_view($entity_type, $entity, $field, $instance, $langcode, $items, $display)
{
    $element = array(); // Initialize the var
    $settings = $display['settings']; // get the settings
    $size = $settings['pic_size']; // The Size setting selected in the settings form
    $tooltip = $settings['tooltip']; // The tool tip assigned in settings
    // Create the image - Note that I'm storing the images in our module but they could be anywhere
    $image = '<img src="/' . drupal_get_path('module', 'facebooklink') . 'fb-' . $size . '.png">';
    foreach ($items as $delta => $item) {
      $fb = $item['safe_value']; // Getting the actual value
    }
    $options = array(
      'html'        => TRUE, // This tells Drupal that we're sending HTML, not plain text, otherwise it would encode it
      'attributes'  => array(
        'title' => $tooltip, // This sets our tooltip
        ),
      );
    if(isset($fb)) {
      $link = l($image, $fb, $options); // Create the Link
      $element[0]['#markup'] = $link; // Assign it to the #markup of the element
    }
    return $element;
} 
```

对这个疯狂的问题有什么帮助吗？！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T06:34:25.010

我建议您在 hook_field_formatter_info 中将格式化程序命名为“facebooklink”而不是“cfieldformatter_text_1”（当您在模块中有一个格式化程序时有效）或显式触发 hook_field_formatter_view 中的格式化程序，如下所示：

```
/**
 * Implementation of hook_field_formatter_view()
 */
function facebooklink_field_formatter_view($entity_type, $entity, $field, $instance, $langcode, $items, $display)
    {
        $element = array(); // Initialize the var
        $settings = $display['settings']; // get the settings

        switch ($display['type']) {
          case 'cfieldformatter_text_1':
          $size = $settings['pic_size']; // The Size setting selected in the settings form
          $tooltip = $settings['tooltip']; // The tool tip assigned in settings
          // Create the image - Note that I'm storing the images in our module but they could be anywhere
          $image = '<img src="/' . drupal_get_path('module', 'facebooklink') . 'fb-' . $size . '.png">';
          foreach ($items as $delta => $item) {
            $fb = $item['safe_value']; // Getting the actual value
          }
          $options = array(
            'html'        => TRUE, // This tells Drupal that we're sending HTML, not plain text, otherwise it would encode it
            'attributes'  => array(
              'title' => $tooltip, // This sets our tooltip
              ),
            );
          if(isset($fb)) {
            $link = l($image, $fb, $options); // Create the Link
            $element[0]['#markup'] = $link; // Assign it to the #markup of the element
          }
          break;
      }    
        return $element;
    } 
```

# database - 如何在 j2me 中处理大型数据库

> ID：12012338
> 
> 赞同：3
> 
> 时间：2012-08-17T19:53:41.810
> 
> 标签：database, java-me

我想制作一个在 sqlite3 中使用 400Mb 数据库的应用程序。我在 j2me 中寻找 sqlite 支持，但没有独立的 sqlite sqljet 平台的实现，但使用`java.io.File`j2me 中不存在的。我认为 RMS 无法处理这种容量。

数据库很大，但只有一张桌子。

我正在寻找其他格式来转换 sqlite db.Database 是只读的并且可以是资源。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T21:01:48.097

[您可以在 JavaRanch 论坛的此线程中](http://www.coderanch.com/t/230853/JME/Mobile/List-Database-ME)查看 J2ME 中的数据库列表。或者您可以使用[`Perst Lite`](http://www.mcobject.com/j2me_database)（Java ME 嵌入式数据库）。

我在这些问题中找到了上面的链接：
[J2ME With Sqlite](https://stackoverflow.com/questions/3940496/j2me-with-sqlite)
[Is there any option for local database like Sqlite for j2me - CLDC devices？](https://stackoverflow.com/questions/788397/is-there-any-option-for-local-database-like-sqlite-for-j2me-cldc-devices)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T10:29:46.823

我找到了这个答案： [J2ME 中的数据库列表](http://www.coderanch.com/t/230853/JME/Mobile/List-Database-ME)：

Apache Derby - 一个开源关系数据库 / 大约 2 兆字节
Java DB - Sun 支持的 Apache Derby 数据库分布 / 占用空间 2.5 MB
Floggy - J2ME/MIDP 应用程序的免费对象持久性框架 / 11k API
J2MEMicroDB - J2ME
mDrawer的免费对象持久性框架- J2ME 通用数据库程序，DES 加密
RMS DB 类 - J2ME 类，可轻松访问手机的 RMS-Database 系统
Micro DB - 在 J2ME 平台中实现关系数据库

对于少量数据，您也可以使用 kXML + miniXPath

# android - 如何将按钮设置为始终按下？（安卓）

> ID：12012347
> 
> 赞同：0
> 
> 时间：2012-08-17T19:54:20.477
> 
> 标签：android, android-layout, android-button

我的应用程序中有一个并排有 2 个按钮的栏。一个按钮代表用户当前所在的页面，另一个按钮将用户重定向到具有相同按钮栏的另一个页面。我想要的是代表用户当前所在页面的按钮看起来像是被按下（即，如果按下它会是什么颜色）。我已经设置好了，所以不能点击。是否有设置或属性，或者我必须创建自己的选择器（因为我真的不明白如何实现它）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T20:05:27.843

从来没有试过这个但是

```
button.setPressed(true) 
```

应该管用。
编辑：您还可以添加

```
button.setClickable(false) 
```

编辑：这确实有效，但顺序很重要。用这个

```
 btn.setClickable(false);
    btn.setPressed(true); 
```

# xml - 从命令行列出 XML 节点的 XPath

> ID：12012352
> 
> 赞同：2
> 
> 时间：2012-08-17T19:54:46.720
> 
> 标签：xml, macos, bash, xpath

鉴于这个大型深度嵌套 XML 文档 (bookstore.xml) 的片段，我想知道`amazon`节点的完整路径。如何从命令行打印该路径？

```
<bookstore>
<book>
  <title lang="eng">Learning XML</title>
  <price>
    <retail>39.95</retail>
    <discounts>
      <amazon>29.99</amazon>
    </discounts>
    <currency>USD</currency>
  </price>
</book>
...
</bookstore> 
```

理想情况下，它看起来像这样：

```
old-gregg$ magic bookstore.xml amazon
/bookstore/book/price/discounts/amazon 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T21:08:27.300

我找到了[XMLStarlet](http://xmlstar.sourceforge.net/docs.php)，它正是我在这里寻找的。[使用Homebrew](http://brew.sh)安装它：

```
$ brew update
$ brew install xmlstarlet
$ xml el bookstore.xml | grep amazon
/bookstore/book/price/discounts/amazon 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T20:19:37.873

使用[xmllint](http://xmlsoft.org/xmllint.html)，它是一个与 libxml2 捆绑在一起的命令行工具。很可能它在您的系统上可用。

根据您的示例数据（删除省略号），我玩弄并管理了以下内容：

```
echo -e "du\nbye\n" | \
  xmllint --shell data 
```

返回

```
/ > du
/
bookstore
  book
    title
    price
      retail
      discounts
        amazon
      currency
/ > bye 
```

这使用工具的交互模式。
`du`要求打印从当前节点（此处为根）开始的整个子树。 `bye`只是退出程序。

下一步是解析这个输出。

**更新：（** 假设 XML 在`data`）
请注意，有问题的节点当前是硬编码的！

```
#!/bin/bash

echo -e "du\nbye\n" | \
  xmllint --shell data | \
  sed 's/  /: /g' | \
  awk '
    BEGIN {depth = 0}
    $NF == "amazon" {
      for(i=1; i<NF; i++) {printf("/%s", STACK[i])}
      print "/" $NF
    }
    /^\// {next}
    NF == depth + 1 {depth = NF; STACK[depth] = $NF; next}
    NF == depth {STACK[depth] = $NF; next}
    NF < depth {depth = NF; STACK[depth] = $NF; next}
    1 {print "something went horribly wrong!"}
  ' 
```

给

```
/bookstore/book/price/discounts/amazon 
```

要解释这一点，请查看`sed`命令后的输出：

```
/ > du
/
bookstore
: book
: : title
: : price
: : : retail
: : : discounts
: : : : amazon
: : : currency
/ > bye 
```

`sed``[two spaces]`用代替`[:space]`。
在下文中，使用 检测深度很简单`awk`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T21:06:41.323

在 XPath 2.0 中，您可以使用`//amazon`选择元素`/ancestor-or-self::*/node-name(.)`来获取父节点名称并`string-join(..., "/")`从中获取路径。

所以最后是 XPath 2.0 表达式

```
string-join(("",//amazon/ancestor-or-self::*/node-name(.)),"/") 
```

将完全返回您想要的路径。（虽然它不会添加 [] 属性测试，如果你也需要的话）

我不知道是否还有其他 XPath 2.0 命令行工具，但我前几天自己做了。如果你碰巧有 fpc，你可以下载[源代码](http://videlibri.hg.sourceforge.net/hgweb/videlibri/videlibri/file/86c0bce582ce/programs/internet/xidel)并编译它（没有二进制编辑：现在它们在那里链接：http: [//videlibri.sourceforge.net/xidel.html](http://videlibri.sourceforge.net/xidel.html)）。有了它，你可以运行：

```
 xidel /tmp/so2.xml --extract 'string-join(("",//amazon/ancestor-or-self::*/node-name(.)),"/")' 
```

我还做了一个 CGI 服务，你可以试试：

```
 wget -qO - 'http://videlibri.sourceforge.net/cgi-bin/xidelcgi?extract=string-join(("",//amazon/ancestor-or-self::*/node-name(.)),"/")&data=<bookstore><book>  <title lang="eng">Learning XML</title>  <price>   <retail>39.95</retail>    <discounts>      <amazon>29.99</amazon>    </discounts>    <currency>USD</currency>  </price></book></bookstore>' 
```

# android - Android：在单个选项卡上锁定屏幕方向

> ID：12012354
> 
> 赞同：1
> 
> 时间：2012-08-17T19:54:55.663
> 
> 标签：android, android-manifest, android-tabhost, screen-orientation

我有一个带有五个选项卡的 TabHost，我们将其称为选项卡 1-5。

我希望 Tab 3 保持纵向 - 我不希望它变成横向。

我将如何实现这一目标？

这是我当前的代码（Main.class）：

```
public class Main extends FragmentActivity {
    TabHost mTabHost;
    TabManager mTabManager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        mTabHost = (TabHost)findViewById(android.R.id.tabhost);
        mTabHost.setup();    

        mTabManager = new TabManager(this, mTabHost, R.id.realtabcontent);

        addTab(mTabManager, mTabHost, new String("Tab 1"), new String("tab1"),
            Tab1.class);
        addTab(mTabManager, mTabHost, new String("Tab 2"), new String("tab2"),
            Tab2.class);
        addTab(mTabManager, mTabHost, new String("Tab 3"), new String("tab3"),
            Tab3.class);
        addTab(mTabManager, mTabHost, new String("Tab 4"), new String("tab4"),
            Tab4.class);
        addTab(mTabManager, mTabHost, new String("Contact"), new String("contact"),
            Tab5.class);

        mTabHost.getTabWidget().getChildTabViewAt(0).setFocusable(false);
        mTabHost.getTabWidget().getChildTabViewAt(1).setFocusable(false);
        mTabHost.getTabWidget().getChildTabViewAt(2).setFocusable(false);
        mTabHost.getTabWidget().getChildTabViewAt(3).setFocusable(false);
        mTabHost.getTabWidget().getChildTabViewAt(4).setFocusable(false);
        mTabHost.setSelected(false);
        mTabHost.getTabWidget().setSelected(false);

        if (savedInstanceState != null) {
            mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab"));
        }
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putString("tab", mTabHost.getCurrentTabTag());
    }

    private static View prepareTabView(Context context, String text) {
        View view = LayoutInflater.from(context).inflate(R.layout.tab_bg, null);
        ((TextView) view.findViewById(R.id.tabsText)).setText(text);
        return view;
    }

    public static void addTab(TabManager manager, TabHost host, String title, String tag, Class<?> cl) {
        TabHost.TabSpec spec = host.newTabSpec(tag);
        View view = prepareTabView(host.getContext(), title);
        spec.setIndicator(view);

        manager.addTab(spec, cl, null);
    }

    public static class TabManager implements TabHost.OnTabChangeListener {
        private final FragmentActivity mActivity;
        private final TabHost mTabHost;
        private final int mContainerId;
        private final HashMap<String, TabInfo> mTabs = new HashMap<String, TabInfo>();
        TabInfo mLastTab;

        static final class TabInfo {
            private final String tag;
            private final Class<?> clss;
            private final Bundle args;
            private Fragment fragment;

            TabInfo(String _tag, Class<?> _class, Bundle _args) {
                tag = _tag;
                clss = _class;
                args = _args;
            }
        }

        static class DummyTabFactory implements TabHost.TabContentFactory {
            private final Context mContext;

            public DummyTabFactory(Context context) {
                mContext = context;
            }

            @Override
            public View createTabContent(String tag) {
                View v = new View(mContext);
                v.setMinimumWidth(0);
                v.setMinimumHeight(0);
                return v;
            }
        }

        public TabManager(FragmentActivity activity, TabHost tabHost, int containerId) {
            mActivity = activity;
            mTabHost = tabHost;
            mContainerId = containerId;
            mTabHost.setOnTabChangedListener(this);
        }

        public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args) {
            tabSpec.setContent(new DummyTabFactory(mActivity));
            String tag = tabSpec.getTag();

            TabInfo info = new TabInfo(tag, clss, args);

            info.fragment = mActivity.getSupportFragmentManager().findFragmentByTag(tag);
            if (info.fragment != null && !info.fragment.isDetached()) {
                FragmentTransaction ft = mActivity.getSupportFragmentManager().beginTransaction();
                ft.detach(info.fragment);
                ft.commit();
            }

            mTabs.put(tag, info);
            mTabHost.addTab(tabSpec);
        }

        @Override
        public void onTabChanged(String tabId) {
            TabInfo newTab = mTabs.get(tabId);
            if (mLastTab != newTab) {
                FragmentTransaction ft = mActivity.getSupportFragmentManager().beginTransaction();
                if (mLastTab != null) {
                    if (mLastTab.fragment != null) {
                        ft.detach(mLastTab.fragment);
                    }
                }
                if (newTab != null) {
                    if (newTab.fragment == null) {
                        newTab.fragment = Fragment.instantiate(mActivity,
                            newTab.clss.getName(), newTab.args);
                        ft.add(mContainerId, newTab.fragment, newTab.tag);
                    } else {
                        ft.attach(newTab.fragment);
                    }
                }

                mLastTab = newTab;
                ft.commit();
                mActivity.getSupportFragmentManager().executePendingTransactions();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:39:38.700

我从您的 AndroidManiest.xml 文件中假设您的每个选项卡都是活动。如果是这样，那么看看[Activity.setRequestedOrientation(int)](http://developer.android.com/reference/android/app/Activity.html#setRequestedOrientation%28int%29)

在您的 Tab3 Activity 类中，您可以使用以下代码将您的 Activity 锁定为纵向模式：

```
public class Tab3 extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setRequestedOrientation (ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    }
} 
```

在所有其他选项卡活动中，您可以打开[ActivityInfo.SCREEN_ORIENTATION_FULL_SENSOR](http://developer.android.com/reference/android/content/pm/ActivityInfo.html#SCREEN_ORIENTATION_FULL_SENSOR)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T03:31:25.180

最简单的方法是你去 manifest.XML

在您想要纵向的任何活动中，以粗体添加此行

```
 android:screenOrientation="portrait" 
```

在你的情况下：

```
 <activity
            android:name=".Main"
            android:screenOrientation="portrait" /> 
```

# php - php 拒绝找到 ssh2_connect() 函数

> ID：12012367
> 
> 赞同：5
> 
> 时间：2012-08-17T19:55:33.257
> 
> 标签：php, apache, apache2, libssh2

使用的操作系统

```
Windows 7 - V 6.1 
```

安装了 Apache

```
httpd-2.2.22-win32-x86-no_ssl.msi 
```

我的 httpd.conf

```
AddType application/x-httpd-php .php

LoadModule php5_module "X:/Program Files/PHP/php5apache2_2.dll" 
```

安装的php版本

```
php-5.3.16-Win32-VC9-x86.msi 
```

我从未压缩的 php_ssh2-0.11.2-5.3-nts-vc9-x86.zip 复制了 php_ssh2.dll

```
php_ssh2-0.11.2-5.3-nts-vc9-x86.zip 
```

到

```
X:\Program Files\PHP\ext\php_ssh2.dll 
```

我的 php.ini

```
extension_dir="X:\Program Files\PHP\ext"

PHPIniDir "X:/Program Files/PHP"

[PHP_SSH2]
extension=php_ssh2.dll 
```

在使用 php_ssh2.dll 配置 php.ini 并将文件 php_ssh2.dll 复制到 extension_dir 后，Apache 已重新启动 - 错误仍然存​​在

```
Fatal error: Call to undefined function ssh2_connect() in X:\Program Files\Apache Software Foundation\Apache2.2\htdocs\index.php on line 4 
```

用于测试的代码

```
<?php
$connection = ssh2_connect("XXX.XXX.XXX.XXX", 22);

if(ssh2_auth_password($connection, "XXXXXX", "XXXXXX"))
  printf("CONNECTED");
else
  printf("ERROR");
?> 
```

使用 phpinfo() 的测试在浏览器中完美显示页面，因为 php 配置了 httpd.conf 但参数 extension_dir 显示为

```
extension_dir C:\php C:\php 
```

但此参数设置为“X:\Program Files\PHP\ext”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T20:02:19.543

为 PHP 使用的 php.ini（或单独的扩展 conf，如果适用）启用相应的 .DLL 文件：（ `extension=ssh2.dll`删除一个**;**如果它恰好在这一行前面）

我们可以使用 windows 命令行检查是否已启用 PHP 的 SSH2 扩展（这可能需要重新启动 apache）： `php -m` 这将列出所有已安装的 php 扩展，您应该会在其中看到 ssh2。

您现在应该可以使用`ssh2_connect()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T20:07:24.663

在您的 ini 文件中，您是否`ssh2.shell, ssh2.exec, ssh2.tunnel, ssh2.scp, ssh2.sftp`在`Registered PHP Streams`if not 未加载 dll 下看到。Apache重启可能吗？

我也假设你有

```
PHPIniDir "X:/Program Files/PHP" 
```

在`httpd.conf`不`php.ini`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-23T07:32:45.323

肯定会工作。

运行这个来安装 ssh2：

```
sudo apt-get install libssh2-php 
```

现在运行此命令以检查 ssh2 是否附加到扩展数组

```
php -r "print_r(get_loaded_extensions());" 
```

现在代码移动你的文件

```
public function movefolder() {

          $connection = ssh2_connect('xxx.xx.xx.xx', 22);

        $res = ssh2_auth_password($connection, 'xxxx', 'xxxx123');

          $res1 = ssh2_scp_send ($connection, '/home/user/public/upgrades/downloaded/abc.tar', '/home/xxx/public/abc.tar', 0644);

           echo $connection . '--' . $res. '--' .$res1;

        die;

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T01:25:00.760

1.  下载php_ssh2-0.11.2-5.3-vc9-x86.zip
2.  在 php.ini 中设置扩展名
3.  重启 Wamp

这适用于带有 Apache 5.3 和 W32 的 Wamp

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-06T17:59:28.253

在 php_ssh2-0.11.2-5.3-nts-vc9-x86.zip 你有**2 个**dll

1.  php_ssh2.dll
2.  libssh2.dll

第一个去这里
X:\Program Files\PHP\ext\php_ssh2.dll 和第二个去那里 X:\Program Files\PHP\libssh2.dll

# java - 为什么第一次调用构造函数花费的时间是其他调用的 10 倍？

> ID：12012377
> 
> 赞同：8
> 
> 时间：2012-08-17T19:56:08.863
> 
> 标签：java, performance, time, nanotime

```
class testx
{
  public testx()
  {
    long startTime = System.nanoTime();
    System.out.println((System.nanoTime() - startTime));
  }

  public static void main(String args[])
  {
      new testx();
      new testx();
      new testx();
  }
} 
```

我总是得到类似的结果`7806 660 517`。为什么第一次通话的时间是其他通话的 10 倍？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-17T19:57:45.637

因为 JVM 在那个时候第一次加载了一堆 o' 类。一旦第一次`System.nanoTime()`返回，你已经加载了`System.class`and `testx.class`，但是一旦`System.out.println`进入画面，我怀疑很多 I/O 类都被加载了，这需要一些时间。

无论如何，这*不是*一个好的基准测试技术。在开始测量之前，您真的应该通过运行约 10000 次迭代来预热 JIT。[或者（最好），使用像Caliper](https://code.google.com/p/caliper/)这样的预先构建的基准测试工具。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T20:25:10.787

这绝对是 Louis Wasserman，它在第一轮需要更长的时间，因为它必须加载所有必要的`System`类，你可以通过`println()`在创建类的新实例之前调用一个空白来解决这个问题，因为看看当我们这样做时会发生什么：

```
public class testx
{
  public testx()
  {
    long startTime = System.nanoTime();
    System.out.println((System.nanoTime() - startTime));
  }

  public static void main(String args[])
  {
    //loads all System.* classes before calling constructor to decrease time it takes
    System.out.println();
      new testx();
      new testx();
      new testx();
  }
} 
```

输出：

> 405 0 405

您的初始代码输出的位置：

> 7293 0 405

# python - python tkinter full frame vs message box focus

> ID：12012385
> 
> 赞同：6
> 
> 时间：2012-08-17T19:56:46.270
> 
> 标签：python, focus, tkinter, python-3.2

I am creating a full-frame (no decorations) window with code like this (in python 3.2 using tkinter):

```
self.root = Tk()    
self.W, self.H = self.root.winfo_screenwidth(), self.root.winfo_screenheight()
self.root.overrideredirect(1) # full screen, no menu or borders
self.root.geometry("%dx%d+0+0" % (self.W, self.H)) 
```

When I try to open a file dialog or message box, they appear UNDER the full frame window. I can verify this by calling a withdraw() on the main window before I open one of the dialogs. For example,

```
 file = tkinter.filedialog.askopenfilename(parent=self.root) # UNDER main window 
```

On windows I don't have a problem with this, only on fedora 14 and ubuntu 12.04 have I noticed it. (I haven't tested on Mac). I'm passing a parent to the dialogs but they don't seem to be paying attention. Can someone help me understand what I'm doing wrong? Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T01:29:08.977

在 Windows 和 X11 上调用`.overrideredirect(1)`窗口具有不同的含义。在 Windows 上，它告诉操作系统禁用窗口边框的绘制。在 X11 上，它告诉窗口管理器完全忽略窗口。实际上，它在 Windows 上的效果应该与在 X11 上的效果相同，但事实并非如此。

调用`.overrideredirect(1)`导致窗口停留在顶部的原因是因为 X11 没有对其进行任何控制（因为窗口的显示不是由窗口管理器处理的）。程序窗口和窗口管理器是完全独立的，所以实现标准的窗口堆叠是没有意义的。

仅使用 tkinter，您无法阻止这种行为，因为 tkinter 并不是问题的真正根源。可能有一种方法可以使用 X11 Python 绑定来显示没有框架的窗口，但这会导致特定于平台的代码。

您可能需要重新考虑删除窗口边框。有没有可能的替代方案？包括窗口边框的全屏窗口是一个不错的选择。由于可访问性原因（无法移动、最小化、最大化等），在最好的情况下删除窗口边框并不是一个好主意。另外，就个人而言，作为一名 Linux 用户，我使用各种功能（例如窗口选项卡、阴影按钮）定制了我的窗口边框，并且经常使用它们。删除窗口边框将阻止使用此类功能。

# r - R, Sweave: How to pass file encoding to patchDVI::SweavePDF?

> ID：12012388
> 
> 赞同：1
> 
> 时间：2012-08-17T19:56:57.970
> 
> 标签：r, sweave

I have a master file `master.tex` containing the preamble and which inputs (via `\input{chapter01}`, `\input{chapter02}`, ...) chapters. The chapters are .Rnw files. My goal is to use patchDVI::SweavePDF to compile the chapters (say, `chapter.Rnw`) individually (each chapter starts with sourcing Sweave preliminary settings but [of course] does not have a preamble). When I execute

```
Rscript -e "patchDVI::SweavePDF('chapter.Rnw') 
```

I obtain

```
Error: ‘chapter.Rnw’ is not ASCII and does not declare an encoding 
```

Normally one uses `\usepackage[utf8]{inputenc}` to solve this problem. However, I can't put this into chapter.Rnw since it is only allowed in the preamble, so in master.tex. But there it has no effect. The question is how to solve this.

I found [this](http://r.789695.n4.nabble.com/Sweave-UFT8-problem-td4558225.html) but I couldn't figure out how to adjust it to make it work with `patchDVI::SweavePDF`.

# ios - 在更新后重新部署应用程序之前，如何解决数据不填充 UITableView 的问题？

> ID：12012395
> 
> 赞同：0
> 
> 时间：2012-08-17T19:57:17.003
> 
> 标签：ios, uitableview, core-data, grand-central-dispatch, nsfetchedresultscontroller

我刚刚`UITableview`使用 Core Data 和 Grand Central Dispatch 设置了一个来更新我的应用程序并通过我的`fetchedResultsController`. 我有应用程序更新我的数据库；但是，`UITableView`只有在我通过 Xcode 将应用程序重新部署到手机后才会填充。例如，我运行更新，一切正常，除了我有一个空的`UITableView`. 然后我可以关闭应用程序并通过 Xcode 再次单击“运行”，当应用程序出现时，信息位于`UITableView`. 我包括下面的代码，希望有人可以帮助我发现为什么会这样。如果我需要包含更多代码，请告诉我。谢谢！

**TeamTableViewController.m**

```
 - (NSFetchedResultsController \*)fetchedResultsController {
        ...

        NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchREquest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:@"stateCode" cacheName:nil];
        self.fetchedResultsController = aFetchedResultsController;

        ...
    }

    -(IBAction) refreshList:(id)sender {

       dispatch_queue_t queue = dispatch_queue_create("updateQueue", DISPATCH_QUEUE_CONCURRENT);

       dispatch_async(queue,^ { [self updateFromXMLFile:@"https://path/to/file.xml"];});
       dispatch_async(queue,^ { [self updateFromXMLFile:@"https://path/to/file2.xml"];});
       dispatch_async(queue,^ { [self updateFromXMLFile:@"https://path/to/file3.xml"];});

    }

    - (BOOL)updateFromXMLFile:(NSString *)pathToFile {

       AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

       XMLParser *parser1 = [[XMLParser alloc] initXMLParser];
       XMLParser *parser2 = [[XMLParser alloc] initXMLParser];
       XMLParser *parser3 = [[XMLParser alloc] initXMLParser];

       BOOL success = FALSE;

       NSURL *url = [[NSURL alloc] initWithString:pathToFile];
       NSXMLParser *xmlParser = [[NSXMLParser alloc] initWithContentsOfURL:url];

       if ([pathToFile rangeOfString:@"people"].location != NSNotFound) {
           NSManagedObjectContext * peopleMOC = [[NSManagedObjectContext alloc] init];
           [peopleMOC setPersistentStoreCoordinator:[appDelegate persistentStoreCoordinator]];

           NSNotificationCenter * notify = [NSNotificationCenter defaultCenter];
           [notify addObserver:self selector:@selector(mergeChanges:) name:NSManagedObjectContextDidSaveNotification object: peopleMOC];

           parser1.managedObjectContext = peopleMOC;
           [xmlParser setDelegate: parser1];
           success = [xmlParser parse];

           if (success) {
               NSError * error = nil;
               @try {
               [parser1.managedObjectContext save:&error];
               } catch (NSException * exception) {
                  // NSLog logs the exception...
               }
               [NSNotificationCenter defaultCenter] removeObserver:self];
               Return TRUE;
           } else {
               // NSLog logs errors
               return FALSE;
           } 
    } elseif ... {  // other 3 use practically same code here }

    [appDelegate saveContext];

}
    -(void) mergeChanges:(NSNotification *) notification {

        AppDelegate *theDelegate = [[UIApplication sharedApplication] delegate];
        [[theDelegate managedObjectContext] performSelectorOnMainThread:@selector(mergeChangesFromContextDidSaveNotification:) withObject: notification waitUntilDone:YES];
    } 
```

**更新**

我可以通过添加`[theDelegate saveContext];`到我的`-(void)mergeChanges`方法的末尾来让它工作......这对我来说似乎不是正确的方法。想法？

**更新 2**

上述方法曾经奏效，但我一直无法复制它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T06:22:23.743

您应该使用该`NSFetchedResultsControllerDelegate`协议来通知您的视图控制器数据的任何更改。

使用`controllerDidChangeContent:`而不是其他方法。像这样，一旦所有下载完成，结果就会反映出来。较短的增量更新可能会在计算上变得昂贵。

[委托文档](http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsControllerDelegate_Protocol/Reference/Reference.html)中有一个非常简洁的“典型使用”示例。

# spring - 向流xml中的messageContext添加消息

> ID：12012397
> 
> 赞同：1
> 
> 时间：2012-08-17T19:57:19.360
> 
> 标签：spring, jsp, spring-webflow

我正在实施忘记密码的过程。挑战阶段将询问三个先前回答的问题，如果它们是正确的，它会继续。但是，如果它们不正确，这次我想循环回到挑​​战表单，并显示一条错误消息，指出答案不正确。基本上，我想要这样的东西：

```
 <view-state id="challengeForm" view="forgotPasswordChallengeView" model="challenge">
    <binder>
      <!-- http://stackoverflow.com/questions/10338472/debugging-spring-mvc-collection-binding -->
      <binding property="questionAndAnswerList[0].answer.answer" />
      <binding property="questionAndAnswerList[1].answer.answer" />
      <binding property="questionAndAnswerList[2].answer.answer" />
    </binder>
    <on-entry>
      <set name="viewScope.commandName" value="'challenge'" />
    </on-entry>
    <transition on="submit" bind="true" validate="true" to="checkChallenge" />
  </view-state>

  <action-state id="checkChallenge">
    <evaluate expression="userManager.challengePasses( challange )" />
    <transition on="true" to="resetPassword" />
    <transition on="false" to="challengeForm">
      <!-- ADD MESSAGE HERE -->
      <evaluate expression="messageContext.addMessage( ... )" />
    </transition>
  </action-state>

  ... 
```

正如我现在所看到的，我有 3 种可能的解决方案：

1.  检查验证器中的挑战答案并在其中添加一条消息，但是在验证中进行工作感觉不对。
2.  将 messageContext 传递给 challengePasses 方法，如果失败，则在其中添加消息，但 userManager 似乎应该更像一个普通服务，只返回响应而不是管理消息。
3.  创建一个类似于 messageManager.addChallengeFailedMessage( messageContext ) 的新方法，这可能是最清晰的关注点分离，但感觉有点过火。

所以，我要问的是：有没有一种干净的方法可以`messageContext`直接在流 XML 中添加消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:57:27.260

我过去也有过这个确切的问题。'validation' 的语义是什么？在验证器中什么是合适的？我最终决定这种类型的操作不应该成为验证器的一部分。我已将选项 3 用于与您类似的情况，尽管我同意这似乎有点过火了。选项 2 并不理想，因为方法名称`challengePasses`并未表明它会添加错误消息，并且“challengePassesAddedErrorIfNot”会有点荒谬。

# objective-c - UITableView 标头中的 NSDates 已更改

> ID：12012400
> 
> 赞同：0
> 
> 时间：2012-08-17T19:57:31.807
> 
> 标签：objective-c, ios, nsdateformatter, nstimezone

因此，我在 UITableView 中使用日期数组作为部分标题。我的数据在数组中的日期如下

```
07/12/2012
07/13/2012
07/14/2012 
```

但是当我运行该应用程序时，部分标题全部移回了一天，因此它们如下：

```
07/11/2012
07/12/2012
07/13/2012 
```

是什么赋予了？我从服务器中提取的数据特定于 timeZone。我们知道何时使用我们的应用程序以及在哪一天使用（想想旅行马戏团）。

我确信这与 NSTimeZone 有关，所以我尝试了以下方法，但没有成功。

```
self.sectionDateFormatter = [[NSDateFormatter alloc] init];
[self.sectionDateFormatter setDateStyle:NSDateFormatterLongStyle];
[self.sectionDateFormatter setTimeStyle:NSDateFormatterNoStyle];
[self.sectionDateFormatter setTimeZone:[NSTimeZone localTimeZone]]; 
```

有谁知道有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T16:00:48.670

将日期设置为 UTC 并解决了问题。

# ruby-on-rails - 如何判断 Rails 3 事务是否成功完成？

> ID：12012407
> 
> 赞同：0
> 
> 时间：2012-08-17T19:57:49.170
> 
> 标签：ruby-on-rails, activerecord

有没有办法确定我的事务是否成功提交（并且没有回滚）？

```
Inventory.transaction do
  beads.each do |bead|
    # update something
    # insert something
    # delete something
  end
end 
```

或者这样的事情是唯一的方法吗？

```
success = false
Inventory.transaction do
  beads.each do |bead|
    # update something
    # insert something
    # delete something
  end
  success = true
end

if success
  # do something
end 
```

或者，因为异常被传播，如果没有异常就假设成功？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T20:25:06.267

如果您担心异常，为什么不将其包装在 try/catch 块（或`begin`/`rescue`块，更 Rubyish）中？

```
begin
  Inventory.transaction do
    beads.each do |bead|
      # update something
      # insert something
      # delete something
    end
  end
rescue WhateverError
  #handle error
end 
```

# mercurial - 有没有办法通过电子邮件发送定期的、聚合的变化集报告？

> ID：12012408
> 
> 赞同：0
> 
> 时间：2012-08-17T19:57:51.620
> 
> 标签：mercurial, jenkins, tortoisehg

为了加强代码审查，我希望每天/每周/每月/some_regular_interval 发送一份关于 mercurial? 更改的报告？我认为，如果一个人不必去寻找变化，而是将它们带到这个人那里，那么这应该是朝着正确方向迈出的一步。但是，我没有看到任何东西。（我们使用 mercurial 与 TortoiseHG 和 Jenkins 进行自动化构建，以防这些工具中的任何一个可能有帮助？）

我在找什么：

**一定有**

* * *

*   提交消息
*   更改的文件列表

**很高兴有**

* * *

*   变更集指南
*   提交人的姓名
*   某些方法可以查看每个文件的更改（最好通过 URL 进行，否则电子邮件可能会超载）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T15:10:54.950

您没有说明您使用的是什么操作系统。我假设是 Windows，因为您使用的是 TortoiseHG。

在 Linux（或其他基于 UNIX 的操作系统）上，您可以创建一个每周/每月/任何时间运行一次的 cron。以下简单的脚本可以满足您对我的 Linux 机器的大部分要求：

```
LOG_DATE=`date -d "1 week ago" +"%Y-%m-%d 00:00:00"`
hg log -d ">$LOG_DATE" 
```

如果您使用 Mercurial 模板，您可以得到您想要的。您可以使用变更集 ID 构建 URL 以指向 Mercurial Web 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T03:12:03.330

[通知扩展](http://mercurial.selenic.com/wiki/NotifyExtension)会起作用吗？您可以在指定的主存储库上进行配置，以便发送包含更改摘要的电子邮件（您可以自定义模板以包含哈希的简短形式、用户名、提交消息）以及各个更改集的 URL每当将更改推送到主存储库时，都会向人们发送。

# jquery - 如何将对象投射到桌子上？

> ID：12012409
> 
> 赞同：0
> 
> 时间：2012-08-17T19:58:02.157
> 
> 标签：jquery, jquery-plugins, jquery-selectors, tablesorter

我有一张桌子。现在我克隆了它。当我使用 tablesorter 时，它说不能在类型对象上使用它。

那么，我怎样才能将它转换为对象。

```
var clonedTable = $('#originalTable').clone(); 
$(clonedTable).tablesorter({ 
widgets: ['zebra'],  
headers: { 
 0:{sorter:false}, 
 1:{sorter:false},
 2:{sorter:false},
 3:{sorter:false},
 4:{sorter:false} } 
}); 
```

在这里，tablesorter 抱怨说：未捕获的类型错误。object[object object] 没有方法 tablesorter

```
Edit: 
```

深入研究代码......我注意到原因是这一行：

```
 var clonedTableRows= $('clonedTable tr:gt(0)'); 
```

看起来 clonedTableRows 是空的……我的语法错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:56:49.380

正如@nbrooks 所说，引号不应该在`clonedTable`变量周围。试试这个：

```
var clonedTableRows = clonedTable.find('tr:gt(0)'); 
```

此外，您正在对未附加到 DOM 的克隆对象初始化插件。将克隆的表追加到某处，然后初始化插件：

```
var clonedTable = $('#originalTable').clone()
      // remove duplicate ID
      .removeAttr('id')
      // append it whatever you want
      .appendTo('body')
      // now that it's in the DOM, initialize the plugin
      .tablesorter({ 
        widgets: ['zebra'],  
        headers: { 
          0:{sorter:false}, 
          1:{sorter:false},
          2:{sorter:false},
          3:{sorter:false},
          4:{sorter:false}
        } 
      }); 
```

# ios - 消失的缩略图

> ID：12012410
> 
> 赞同：0
> 
> 时间：2012-08-17T19:58:07.193
> 
> 标签：ios, alassetslibrary, assetslibrary

在我的应用程序中，我注意到我正在保存的图像开始写入相册并在照片应用程序中正确显示。但是，当我删除从中复制新图像的图像时，新图像的缩略图消失了。这真的很奇怪。

这是我用来创建 CGImageRef 以保存到资产库的代码：

```
NSDictionary *options = [NSDictionary
    dictionaryWithObjectsAndKeys:(__bridge NSNumber *)kCFBooleanTrue,
            (__bridge NSString *)kCGImageSourceCreateThumbnailFromImageAlways, nil];
CGImageRef fullImage = [asset.defaultRepresentation CGImageWithOptions:options]; 
```

在我刚刚抓取 defaultRepresentation.fullResolution 图像并将其写入资产库之前。

我的问题是：通过这种方式保存图像，是否会创建我期望的缩略图？而且，如果不是，我应该做一些不同的事情来创建我的缩略图，这样它们就不会“消失”。

编辑：发生这种情况时控制台中的错误是：

```
Aug 18 11:08:27 [phone name] [app name][2081] <Error>: Fixing thumbnail for 0x112b2dc0 <x-coredata://97C87589-EC35-4664-BE0D-AD01687EF7C4/Asset/p3637> AF6CD736-EF5D-482A-AFAD-F12834C301BF at index 2 
```

缩略图修复失败似乎只发生在我用新坐标修改 GPS 字典的图像上。我删除坐标的图像已正确修复缩略图。

这是我该部分的代码：

```
NSDictionary *gpsDictionary =
    [readOnlyMetadata valueForKey:(__bridge NSString*) kCGImagePropertyGPSDictionary];
NSMutableDictionary *modifiableGpsDictionary = (gpsDictionary) ?
    [gpsDictionary mutableCopy] : [[NSMutableDictionary alloc] init];
        CLLocationCoordinate2D coordinate = thumbnail.coordinate;

[modifiableGpsDictionary setValue:[NSNumber numberWithDouble:ABS(coordinate.latitude)]
    forKey:(__bridge NSString*) kCGImagePropertyGPSLatitude];
[modifiableGpsDictionary setValue:(coordinate.latitude < 0.0) ? @"S" : @"N"
    forKey:(__bridge NSString*) kCGImagePropertyGPSLatitudeRef];
[modifiableGpsDictionary setValue:[NSNumber numberWithDouble:ABS(coordinate.longitude)]
    forKey:(__bridge NSString*) kCGImagePropertyGPSLongitude];
[modifiableGpsDictionary setValue:(coordinate.longitude < 0.0) ? @"W" : @"E"
    forKey:(__bridge NSString*) kCGImagePropertyGPSLongitudeRef];

[modifiableMetadata setValue:modifiableGpsDictionary
    forKey:(__bridge NSString*) kCGImagePropertyGPSDictionary]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T16:48:32.987

原来我在没有现有字典的情况下将 GPS 数据添加到图像的方式是问题所在：

[在 iOS4.1 上保存带有照片的地理标记信息](https://stackoverflow.com/questions/3884060/saving-geotag-info-with-photo-on-ios4-1)

# user-controls - VB6 控件在 UserControl 框架上显示为透明

> ID：12012411
> 
> 赞同：1
> 
> 时间：2012-08-17T19:58:15.817
> 
> 标签：user-controls, vb6, transparent, visible, ocx

我在自己创建的框架 OCX 上放置了一些 VB6 控件。问题是当框架可见时，有时控件（在此示例中为 2 个组合框）会丢失，您可以通过它看到表单的背景颜色。

Usercontrol 只是 2 个带有渐变的图像和一个标题标签。

是否有任何我需要知道的 UserControls 设置可以解决此问题？

![在此处输入图像描述](../Images/86ba39957761406799671d2666429b51.png)

**已编辑**

自动重绘：真剪辑控制：真

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T16:05:47.140

Clip Controls 必须设置为 False。解决了我的整个问题。谢谢你的答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:26:31.427

将背景图像设置为

`backgroundimage.zorder 1`

和你的控制

`combobox1.zorder 0`

您可以在运行时执行此操作。我认为您的组合框在 Z 顺序中被推回您的图像后面。这类似于您在设计时拥有的“放在前面”和“推到后面”选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T09:47:26.947

1) 确保您的容器用户控件具有 AutoRedraw=true 和 ClipControls=true

2）将以下代码添加到您的容器用户控件：

```
Private Sub UserControl_Paint()
   Refresh
End Sub 
```

# azure - 带有 Google ID 的 Azure ACS 身份验证不断中断

> ID：12012413
> 
> 赞同：1
> 
> 时间：2012-08-17T19:58:20.497
> 
> 标签：azure, openid, acs

我们使用的应用程序使用带有 Google ID 的 Azure ACS 进行身份验证。但是我们从 Google 获得的名称标识符一直在变化。这似乎是基于使用 Azure 时波动的 IP 地址。所以我想让输出声明类型不是名称标识符。

但是，如果我将输入名称标识符的输出声明类型（在规则组面板中）更改为电子邮件地址，我们在尝试进行身份验证时会收到服务器错误：序列包含多个元素

为 Google 设置规则组是否有技巧，以便您获得不会一直更改的令牌？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T22:27:53.510

正如您已经怀疑的那样，[每个领域/域的 ID 都是唯一的](https://blog.stackoverflow.com/2009/04/googles-openids-are-unique-per-domain/)，但这应该基于 ACS 命名空间，而不是应用程序的 URL。

现在，如果您可能需要使用不同的 ACS 命名空间或者您根本不想再使用 ACS，使用 emailaddress 会更加安全。为了将 emailaddress 声明映射到 namidentifier（输出声明），您需要先删除实际的 nameidentifier：

![在此处输入图像描述](../Images/fb337b60b0dd813b345d7f8891e9fcae.png)

# solr - 如何在不知道上次修改时间的情况下重新索引 Solr 中的文档？

> ID：12012415
> 
> 赞同：2
> 
> 时间：2012-08-17T19:58:24.480
> 
> 标签：solr

在 Solr 中如何处理以下场景`DataImportHandler`？我们每天对所有文档进行一次完整导入（完整索引运行大约需要 1 小时）。我们所有的文档都分为两类，比如 A 和 B。只有 3% 的文档属于 A 类，并且这些文档经常被修改。我们每 10 分钟通过 deltaQuery 使用修改后的时间重新索引 A 类中的文档。到这里为止一切都很好。

现在，我们还想每小时重新索引一次 A 类中的**所有**文档（因为我们在不同的表中有一个 view_count 列，并且当我们更新 view_count 时文档修改时间不会改变）。这个怎么做？

更新（短期解决方案）：现在我们决定根本不使用增量中的修改时间，而是每 10 分钟重新索引 A 类中的所有文档。索引 A 类文档只需要 3 分钟，所以我们现在可以了。不过，任何解决方案都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T21:02:16.433

我没有在您的 DIH DB 配置中使用单独的查询和 deltaQuery 参数，而是选择遵循[此处](http://wiki.apache.org/solr/DataImportHandlerDeltaQueryViaFullImport)找到的建议，这允许您通过将不同的参数传递给 Solr 来执行完全导入，从而对完全和部分更新使用相同的查询逻辑或增量导入。

在这两种情况下，您都将传递 ?command=full-import，但对于完全导入，您将传递 &clean=true 作为 URL 参数，对于增量，您将传递 &clean=false，这将影响从查询并告诉 Solr 是否刷新并重新开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T19:58:50.250

我发现可以使用`ExternalFileField`存储视图计数并使用函数查询根据该字段对结果进行排序。[（我在 SO: ExternalFileField in Solr 3.6](https://stackoverflow.com/questions/12015049/externalfilefield-in-solr-3-6/12018587)上问了另一个问题。）但是，我发现这些字段无法在 Solr 结果集中返回，这意味着我需要进行数据库调用来获取字段的值。我不想那样做。

找到了一个替代解决方案：当试图理解 Mike Klostermeyer 的答案时，我发现`command=full-import`还可以使用一个额外的查询参数：`entity`。`<document>`所以现在我在标签中设置了两个顶级实体`data-config.xml`- 第一个只会索引 A 类中的文档，第二个只会索引 B 类中的文档。对于 A 类文档，我们根据上次修改的内容进行增量导入每 5 分钟一次，每小时一次完全导入（以更新 view_count）。对于 B 类文档，我们每天只进行一次完全导入，不进行增量导入。

这实质上给出了三种不同的执行计划，以不同的时间间隔运行。

不过还有一个警告：`clean=false`每次运行实体导入时都需要传递查询参数；否则索引完成后其他实体中的文档将被删除。

我不喜欢这种方法的一件事是将所有查询和子实体从一个顶级实体复制粘贴到另一个。顶级实体中的查询之间的唯一区别是文档是属于 A 类还是 B 类。

# php - WordPress 表创建抛出错误（而不是创建表）

> ID：12012419
> 
> 赞同：1
> 
> 时间：2012-08-17T19:58:40.603
> 
> 标签：php, mysql, wordpress, plugins

我对 WordPress 非常陌生，并且编写一个插件（理想情况下）允许我们的客户在一个地方更新他们现有的 WP 网站和我们 iphone 应用程序上的动态信息。这将需要创建两个表。我已经写了我认为应该创建这些表的内容，但是激活插件会在我的测试 WordPress 站点上引发此错误：

`The plugin generated 1 characters of unexpected output during activation. If you notice “headers already sent” messages, problems with syndication feeds or other issues, try deactivating or removing this plugin.`

查看数据库还显示未创建表。我在这里和其他地方查看了一些其他帖子，但似乎无法确定我哪里出错了。有什么建议么？：

```
<?php
// Plugin info omitted

register_activation_hook(_FILE_, 'event_manager_install');
register_deactivation_hook(_FILE_, 'event_manager_uninstall');

// Installer
function event_manager_install() {
global $wpdb;

// Builds queries for custom event and speakers tables
$event_table = $wpdb->prefix . 'events';
$eventSql = "CREATE TABLE $event_table (
  id mediumint(9) NOT NULL AUTO_INCREMENT,
  venueName VARCHAR(250) DEFAULT '' NOT NULL,
  date datetime DEFAULT '0000-00-00 00:00:00' NOT NULL,
  address text NOT NULL,
  registrationDeadlineDate datetime DEFAULT '0000-00-00 00:00:00' NOT NULL,
  UNIQUE KEY id (id)
);";

$speaker_table = $wpdb->prefix . 'speakers';
$speakerSql = "CREATE TABLE $speaker_table (
  id mediumint(9) NOT NULL AUTO_INCREMENT,
  eventID mediumint(9) NOT NULL,
  speaker text NOT NULL,
  UNIQUE KEY id (id)
);";

// Executes queries
require_once(ABSPATH . 'wp-admin/includes/upgrade.php');
dbDelta($eventSql);
dbDelta($speakerSql);
}

// Uninstaller
function event_manager_uninstall() {
global $wpdb;

// Creates queries to delete custom tables
$event_table = $wpdb->prefix . 'events';
$speaker_table  = $wpdb->prefix . 'speakers';
$eventSql = "DROP TABLE " . $event_table . ";";
$speakerSql = "DROP TABLE " . $speaker_table . ";";

// Executes deletion queries
$wpdb->query($eventSql);
$wpdb->query($speakerSql);
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T20:27:51.903

问题是您拼错了`__FILE__`常量的名称。只需替换`_FILE_`为`__FILE__`（注意：*两个*下划线），它应该可以正常工作。

# python - 执行 Python 脚本时如何使用 AJAX 调用？

> ID：12012421
> 
> 赞同：0
> 
> 时间：2012-08-17T19:58:45.143
> 
> 标签：python, ajax, google-app-engine, wsgi

我正在使用 Google App Engine 开发应用程序，并且我想使用 AJAX 调用来执行 Python 脚本。我可以检索脚本，但无法执行它。

我会使用 WSGI，如下所示： [How do you execute a server-side Python script using jQuery?](https://stackoverflow.com/questions/2201561/how-do-you-execute-a-server-side-python-script-using-jquery) . 但是，我不希望我的页面重定向，并且我保持页面不重定向的解决方案是使用此处建议的 AJAX 调用：[Run CGI application without redirecting from HTML](https://stackoverflow.com/questions/448885/run-cgi-application-without-redirecting-from-html)和此处：[Make a tag act like input button](https://stackoverflow.com/questions/9024206/make-a-tag-act-like-input-button)。

现在我使用 HTML 表单，但我想阻止它重定向页面。

```
<form action="/token" method="post" >
 <div> "some button code" </div>
 </form> 
```

所以我一直在尝试改用 AJAX，但它返回代码而不执行它

```
$.post('js/mailToken.py', { testdata: 'hello world' },alert("success")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T12:39:29.410

您正在尝试将 python 脚本作为静态文件查看，这就是应用引擎返回代码而不执行它的原因。

假设您来自 PHP 世界，除非您在 .htacces（在 apache 服务器上）中进行 URL 重写，否则将您的浏览器指向 PHP 脚本的位置将执行该脚本。

在 App Engine 和许多 python 网络框架中，这会有所不同。为了将某个 URI 指向某个脚本，您可以编辑`app.yaml`应用目录中的文件。

默认情况下，所有 URI 都将指向一个名为`main.py`. 这是在您使用谷歌应用引擎启动器创建应用时生成的 app.yaml 中定义的。定义 this 的部分如下所示：

```
handlers:
- url: /
  script: main.py 
```

在 main.py 中，您需要进一步指定如何根据 URI 处理您的请求。您可能希望使用 webapp 或 webapp2 框架来执行此操作，具体取决于您使用的是 python 2.5 还是 2.7。完成后，您可以简单地向这些 URI 发送请求，无论它是通过 AJAX 还是作为表单的操作，或者直接转到它或单击链接。

解释整个 webapp 和 webapp2 框架以了解如何进一步处理请求，可能超出了这个答案的范围（阅读：我厌倦了打字：p），但应用程序引擎文档有很好的“入门” [python 2.5](https://developers.google.com/appengine/docs/python/gettingstarted/)和[python 2.7](https://developers.google.com/appengine/docs/python/gettingstartedpython27/)指南。

# jquery - 选择选定后具有特定类的第一个元素

> ID：12012426
> 
> 赞同：1
> 
> 时间：2012-08-17T19:59:08.043
> 
> 标签：jquery, html

我想在 selected 之后选择具有某个类的第一个元素`<input>`。这是一个例子：

### HTML：

```
<form>
    <input id="id_username" />
    <div class="status"></div>

    <input id="id_email" />
    <div class="status"></div>

    <input id="id_password" />
    <div class="status"></div>
</form> 
```

### jQuery：

```
function check_username() {
    $("#id_username").change(function() {
        var user = $("#id_username").val();
        if(user.length >= 3) {
            /* HOW SHOULD I CHANGE THIS ??? */
            $(".status").append('<img src="/site_media/images/loader.gif"> Checking availability...');
        }
    });
} 
```

所以我希望这个图像“loader.gif”只在`id_username`输入之后出现。`id_email`我将在and上使用类似的东西`id_password`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T20:01:49.663

你只需要使用：

```
$(this).nextAll('.status').first().append(/* ...stuff... */); 
```

即使 the`$(this)`和 the之间有分隔元素，这也有效`.status`，如果两者紧邻，您可以使用：

```
$(this).next('.status').append(/* ...stuff... */); 
```

参考：

*   [`first()`](http://api.jquery.com/first/).
*   [`next()`](http://api.jquery.com/next/).
*   [`nextAll()`](http://api.jquery.com/nextAll/).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T20:02:29.780

试试这个，

```
function check_username() {
    $("#id_username").change(function() {
        var user = $("#id_username").val();
        if(user.length >= 3) {
           $(this).next(".status").append('<img src="/site_media/images/loader.gif" > Checking availability...');
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-17T20:02:48.837

在事件处理程序内部，您使用`this`来表示元素。至于`.status`，可以用`$(this).next('.status')`。

```
function check_username() {
    $("#id_username").change(function() {
        var user = $(this).val();
        if(user.length >= 3) {
           $(this).next('.status').append('<img src="/site_media/images/loader.gif" > Checking availability...');
        }
    });
} 
```

# ios - IOS图像缩放缩略图

> ID：12012429
> 
> 赞同：1
> 
> 时间：2012-08-17T19:59:18.377
> 
> 标签：ios

我尝试使用下面的代码调整图像大小以适合框架，但图像有点失真。

```
+ (UIImage*)imageWithImage:(UIImage*)image scaledToSize:(CGSize)newSize {
     UIGraphicsBeginImageContext( newSize );
     [image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
     UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
     UIGraphicsEndImageContext();

     return newImage;
}

    UIImage* image =[UIImage imageWithData:[NSData dataWithContentsOfURL:url]];
    deal.Image=[tfbImageHelper imageWithImage:image scaledToSize:newSize]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:03:16.963

是的，因为你应该使用`UIGraphicsBeginImageContextWithOptions`并且最后一个参数应该是 0.0f （这意味着，要保持当前的比例）。它是扭曲的，因为您在视网膜显示器上测试它并且比例因子为 2。还要确保在分配新尺寸时保持纵横比。

# java - 使用 pax-exam 在本机容器中配置 pax-logging

> ID：12012430
> 
> 赞同：3
> 
> 时间：2012-08-17T19:59:18.310
> 
> 标签：java, osgi, pax, pax-runner, pax-exam

我知道这有点具体，但我已经尝试了我能想到的一切。我正在使用 pax-exam 运行一些集成测试，并且日志记录应该使用 pax-logging。

这在直接运行 felix 容器时工作正常，但如果我通过 pax-exam 启动它，pax-logging 永远不会被配置（它没有`bundles.configuration.location`vm proeperty，所​​以它找不到`services/org.ops4j.pax.logging.properties`）。

我试图设置它但似乎不起作用的方式是使用：

```
@Configuration
public Option[] configuration() throws IOException {
    Option[] options = new Option[]{
        vmOption("-Dbundles.configuration.location=mypath)
    }
    return options;
} 
```

我会很感激你的任何建议。非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T07:44:47.233

一些可能有帮助的评论：

1.  Pax Logging 是 Pax Exam 提供的默认日志记录解决方案，但您可以使用现成的 SLF4J 和任何后端（如 logback）覆盖它，有关更多详细信息，请参阅[本文](http://team.ops4j.org/wiki/display/paxexam/Logging+Configuration)。我发现这更容易使用。

2.  我不确定该`bundles.configuration.location`属性应该针对哪个捆绑包或服务。这看起来像 Pax ConfMan，它*不是*由 Pax Exam 自动配置的，因此除非您自己处理，否则该属性不起作用也就不足为奇了。

3.  通过 Pax Exam 选项设置系统属性的首选（但功能等效）方法是`systemProperty("foo").value("bar")`.

# scala - 在通配符上键入边界“粘性”

> ID：12012432
> 
> 赞同：5
> 
> 时间：2012-08-17T19:59:32.973
> 
> 标签：scala

我在 scala 论坛上看到了这篇[文章。](http://www.scala-lang.org/node/8018)

这是一个回顾：

> 我刚刚意识到 Scala 编译器似乎没有在通配符上“继承”类型边界：

```
scala> class Foo { def foo = 42 }
defined class Foo
scala> class Bar[A <: Foo](val a: A)
defined class Bar
scala> def bar(x: Bar[_]) = x.a.foo
:7: error: value foo is not a member of Any 
```

> 我希望方法 bar 的参数仍然是 Foo 的上限，即使它的确切类型参数在方法中并不重要。这种行为有特定的原因吗？

然后讨论进入规范解释争议:)

## 解释？

最终海报提出了这个解释：

> 但是，如果编译器为 Bar[_] 执行此操作，出于一致性原因，它也必须为 Bar[A] 执行此操作。然而，后者会产生一些奇怪的后果。例如 def bar[A](x: Bar[A], y: Bob[A]) 突然必须为 Bob 携带一个隐式类型绑定。如果 Bob 有自己的类型绑定，事情会非常混乱。

我不明白，因为

```
def bar[A](x: Bar[A]) 
```

单独不会编译，因为 Bar 类型参数是有界的。

无论如何，我相信以下内容将完全有意义：

```
def bar(x: Bar[_], y : Bob[_]) 
```

## 解决方法

作为一种解决方法，他们建议：

```
def bar(x: Bar[_ <: Foo]) = x.a.foo 
```

除了不干燥之外，它还让事情变得困难：

让我们考虑一棵树

```
abstract class Tree[T <: Tree[T]] { val subTree : List[T] } 
```

现在你将如何定义递归遍历树的函数（显然是在 Tree 类之外定义的）：

```
def size( tree : Tree[_] ) = tree.subTree.size + tree.subTree.map(size(_)).sum 
```

显然不行，因为 subTree 会变成 List[Any]，所以我们需要一个类型参数：

```
def size[T <: Tree[T]]( tree : T ) = ... 
```

更丑陋：

```
class OwnATree( val myTree : Tree[_] ){} 
```

应该成为

```
class OwnATree[T <: Tree[T]]( val myTree : T ){} 
```

等等等等……

我相信某处有问题:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T20:17:12.217

完成你想要的最简单的方法`size`是`OwnATree`使用存在类型：

```
def size(tree: Tree[T] forSome { type T <: Tree[T] }): Int =
  tree.subTree.size + tree.subTree.map(size(_)).sum 
```

和：

```
class OwnATree(val myTree: Tree[T] forSome { type T <: Tree[T] }) 
```

你的`Tree[_]`版本实际上也使用了存在类型——它们只是被包裹在一些语法糖中。换句话说，

```
def size(tree: Tree[_]): Int = ... 
```

只是语法糖：

```
def size(tree: Tree[T] forSome { type T }): Int = ... 
```

您不能将所需的约束添加到下划线版本，但可以添加到去糖版本。

# android - 倒数计时器在按钮按下时不断重新开始

> ID：12012438
> 
> 赞同：0
> 
> 时间：2012-08-17T20:00:01.583
> 
> 标签：android

好的，所以我有一个倒数计时器，我的应用程序要求用户多次点击一个按钮，但是计时器在该按钮点击时开始。我的问题是：

我有一个 10 秒的倒计时计时器，它在按下按钮时开始，但不是仅仅持续到 0，而是在每次用户点击按钮时从 10 重新开始。我如何做到这一点，当用户第一次点击它时，它会一直倒计时？

我的代码：

```
private Button tapBtn;
TextView cm;

tapBtn = (Button) findViewById(R.id.Tap);
cm = (TextView) findViewById(R.id.Timer);

final CountDownTimer aCounter = new CountDownTimer(10000, 1000) {

         public void onTick(long millisUntilFinished) {
            cm.setText("Time Left: " + millisUntilFinished / 1000);
         }

         public void onFinish() {
             cm.setText("Time's Up!");
         }
      };
      aCounter.cancel();

tapBtn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            scr = scr - 1;
            TextView Score = (TextView) findViewById(R.id.Score);
            Score.setText(String.valueOf(scr));
            aCounter.start();
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:04:19.530

Are you trying to make it so that if the user has already started the timer, subsequent button presses don't restart it from the first tap? If so, all you should have to do is put an if statement in your onclick that checks to see if the timer is still counting down, i.e. check and see if the current time is greater than 0 on the counter.

Edit: here's code

```
final CountDownTimer aCounter = new CountDownTimer(10000, 1000) {

         private long timeLeft;

         public long getTimeLeft() {
            return timeLeft;
         }

         public void onTick(long millisUntilFinished) {
            timeLeft = millisUntilFinished / 1000;

            cm.setText("Time Left: " + timeLeft);

         }

         public void onFinish() {
             cm.setText("Time's Up!");
         }
      };
      aCounter.cancel();

tapBtn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            if (aCounter.getTimeLeft() == 0) {
               scr = scr - 1;
               TextView Score = (TextView) findViewById(R.id.Score);
               Score.setText(String.valueOf(scr));
               aCounter.start();
            }
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:05:24.980

one way to do it is to create a flag that gets set on the first tap and have the onclick event flip the flag on the first click, and put the timer start inside of an if statement that only occurs if the flag hasn't been set.

# linux - BASH - 找不到 $ 什么？特殊变量手段

> ID：12012439
> 
> 赞同：4
> 
> 时间：2012-08-17T20:00:01.887
> 
> 标签：linux, bash

有人知道`$?`BASH 中的含义吗？

如果进程崩溃或被杀死，我必须编写一个脚本来重新启动进程。所以我发现这是从：

```
RESTART="/etc/init.d/apache2 restart"
if [ $? -ne 0 ] # if apache not running
then
   # restart apache
   $RESTART
fi 
```

我已经进行了搜索，但是 $? 躲着我。

我不确定上述脚本是否是执行此操作的最佳方法，我假设 $RESTART 将挂起，直到进程被杀死或死亡？如果不是，我会假设那里会有某种 sleep() 调用，所以这个东西不会以每小时 1000 英里的速度旋转。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T20:02:03.320

> 有人知道$是什么吗？在 bash 中的意思

这是最近执行的命令的退出状态。

```
[cnicutar@fresh ~]$ ls /nothing
ls: cannot access /nothing: No such file or directory
[cnicutar@fresh ~]$ echo $?
2

[cnicutar@fresh ~]$ ls -ld .
drwx------ 15 cnicutar users 4096 Aug 16 15:29 .
[cnicutar@fresh ~]$ echo $?
0 
```

[在tldp](http://tldp.org/LDP/abs/html/internalvariables.html)中查找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:04:23.453

问：找不到什么 bash $？方法

A：这是程序的“返回状态”。

```
/* In this example, "$?" from "./hello" will be "0": Status == OK */
#include <stdio.h>

int main (argc, char*argv[])
{
  printf ("Hello world!\n");
  return 0;
} 
```

以下是“特殊 shell 变量”的列表：

*   [http://unixhelp.ed.ac.uk/scrpt/scrpt2.2.2.html](http://unixhelp.ed.ac.uk/scrpt/scrpt2.2.2.html)

# vim - 在 jVI for Netbeans 中，光标不会出现

> ID：12012444
> 
> 赞同：9
> 
> 时间：2012-08-17T20:00:40.123
> 
> 标签：vim, netbeans-7, key-bindings, jvi

根据我使用的字体，我可能会在错误的位置看到四分之一的光标（右下角矩形不闪烁），或者根本没有光标。尽管如此，我在突出显示的行和列号显示在右下角。

我尝试了各种大小 (11-14) 的固定宽度字体的组合，包括默认的 Monospace、MacVim 的 Menlo、糟糕的 Courier 和另一个 qa 网站建议的 Consolas。

任何如何让光标出现的想法都会很棒。在 NetBeans 中获取 Vi 键绑定的替代方法也是可以接受的，尽管 jVi 似乎是最新/最积极的努力。

NetBeans 7.1.2

编辑：图像显示没有突出显示的光标 ![无光标图像](../Images/2380806ae57a6e57a68a28ee8c1f0bf7.png)

图像实际上显示了两个部分光标，这是我以前从未见过的： ![半光标图像](../Images/5d8e163bf6ba11ca71fba1c32b759750.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T22:34:32.073

Mac Retina 有问题，就是这个问题。最新的 jVi 版本有一个解决方法，您需要打开选项
Tools > Options > jViConfig > Platform > MacRetinaCursorXorBug

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-15T14:47:04.700

我在 Netbeans 8.0.2 中遇到了同样的问题。解决方法是禁用以下选项：Tools->Options->jVi config->platform->use modal frame

我在[这里](http://sourceforge.net/p/jvi/discussion/10909/thread/80f191d3/)找到了解决方案，它也解决了光标的其他问题。我希望这能帮到您。

干杯

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-11T13:41:31.963

ubuntu - 14.04 java 1.7.0_121 netbeans - 8.2 jvi - 1.5.4

我遇到了同样的问题，并且已经启用了“使用模型框架”。启用“MacRetinaCursorXorBug”解决了这个问题。我已将光标的频率设置为 500 以更安全。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-18T04:15:36.360

*在工具 > 选项 > jViConfig > 平台*下启用选项*MacRetinaCursorXorBug*是我在一堆其他建议的解决方法中唯一可行的解​​决方案。因此，重要的是要提到即使在非 Mac 系统上也可能需要此设置。

 *（在环境中测试：Netbeans IDE 8.0.2、带有内核 3.19.0-16 的 Ubuntu 15.04、XFCE-Desktop 4.12、VirtualBox 4.3.28）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-14T16:12:28.470

按照 develucas 的建议将闪烁率设置为 500 为我在 Ubuntu 和 Netbeans 8.1 上修复了这个问题，尽管它在移动时仍然消失，它在静止后不久又重新出现，使 jvi 再次可用。*

# c# - 如何在 CMD 中使用 SET 和 COPY？

> ID：12012447
> 
> 赞同：1
> 
> 时间：2012-08-17T20:00:49.657
> 
> 标签：c#, copy, cmd, set

在 C# Win Forms 中处理这个问题。

如何设置变量并在运行命令复制后？就像现在的代码一样， Process1.startInfo.Arguments = "/k **SET** etc. etc." 被“/k **COPY** etc. etc.”覆盖 命令并没有执行。

```
 public void OutputBtn_Process_Click(object sender, EventArgs e)
    {
        foreach (FileInfo fi in listBox1.Items)
        {
            Process process1 = new Process();
            process1.StartInfo.Arguments ="/k Set filename ="+fi.Name;
            process1.StartInfo.UseShellExecute = false;
            process1.StartInfo.Arguments = "/k copy /b %filename% test.txt";
            //process1.StartInfo.LoadUserProfile = true;
            process1.StartInfo.FileName = "cmd.exe";
            process1.StartInfo.WorkingDirectory = Path.GetDirectoryName(fi.FullName);
            process1.Start();
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T20:07:19.577

回复：环境变量

您可以使用ProcessStartInfo ( [ProcessStartInfo.EnvironmentVariables ) 中的一组它们。](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.environmentvariables)

RE：复制文件。
使用[File.Copy](http://msdn.microsoft.com/en-us/library/system.io.file.copy%28v=vs.100%29.aspx)。

```
File.Copy(src, destination); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T20:05:18.400

`process1.StartInfo.Arguments = "copy /b \"" + fi.Name + "\" test.txt";`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T20:08:02.117

由于您没有提供有关您正在尝试实现正确方法的信息，因此您的代码正在执行的操作是 File.Copy。

# apache - 如何使用 mod_rewrite 重定向到“关键字”文件夹

> ID：12012448
> 
> 赞同：1
> 
> 时间：2012-08-17T20:00:56.173
> 
> 标签：apache, mod-rewrite

标题很难解释。

我想做以下两个网址

> http://www.example.com/apps/web/admin/images/pic.jpg **http://www.example.com/apps/web/blog/comment/images/pic.jpg** _ **_** _

都重定向到

> http://www.example.com/apps/view/images/pic.jpg **_** _

我将“.htaccess”文件放在 /apps/ 文件夹中。

不管当前网址是什么，
只要当前网址中包含“images/”，
都重定向到这个文件夹

> http://www.example.com/apps/view/**图像**

这是我的代码，但它不能工作

> 重写引擎开启
> 
> RewriteRule ^(.*)/images/(.*)$ views/images/$2

那么，如何设置 .htaccess 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T20:06:28.860

尝试：

```
RewriteEngine On
RewriteBase /apps/
RewriteCond %{REQUEST_URI} !/view/images/
RewriteRule images/(.*)$ view/images/$1 [L] 
```

如果您确实想重定向浏览器，例如更改地址栏中的 URL，`L`请将括号中的更改为`L,R=301`

# php - Magento 多站点 - 每个站点以不同方式批量启用和设置可见性

> ID：12012451
> 
> 赞同：1
> 
> 时间：2012-08-17T20:01:21.810
> 
> 标签：php, mysql, magento

我们有一个多商店的 magento 设置，我们在主站点下有几家商店。我们需要为数百种产品启用和设置搜索可见性，但我们不希望这些产品只在每家商店展示，事实上，我们只希望它们在一家商店展示。我曾尝试更新 Magento 数据库，但发现并非每个商店都有一组要更新的属性，这需要一些花哨的 SQL 来执行。我也尝试过创建 Excel XML 导入，但没有成功。导入文件如下所示（我尝试了 2 种方式）：

```
sku 可见性状态 _store
112001 4 1 其他商店
11924-01 4 1 其他商店

sku 可见性状态 _store
112001 4 1 其他商店
112001 1 2 管理员
11924-01 4 1 其他商店
11924-01 1 2 管理员

```

两种方式似乎都只是完全重置状态，因为在状态字段中没有任何内容。我对通过 PHP 执行此操作有点谨慎，因为我不精通 Magento，并且听说过有关在核心文件中乱七八糟的事情，但在这一点上，如果它可以工作，我会做任何事情。我不禁想到以前有人通过 SQL 或 PHP 上的插件完成了此操作，因此感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:03:10.847

我找到并成功使用[了 Magmi](http://sourceforge.net/apps/mediawiki/magmi/index.php?title=Main_Page)。速度非常快，而且似乎做得很好。文档不是很好，但它是可用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:11:00.763

备份您的数据库。对适用的产品进行产品出口。编辑 csv 文件以显示所有这些产品的正确商店。在 magento 中删除所有适用的产品。现在导入您之前导出和编辑的 csv。

# sql - SQL 到 Oracle SQL 的转换

> ID：12012452
> 
> 赞同：0
> 
> 时间：2012-08-17T20:01:23.767
> 
> 标签：sql, oracle

谁能帮我把这段代码转换成 Oracle SQL？或者请告诉我为什么这会在 Oracle SQL 上引发错误？

```
declare @PropertyName varchar(64)
set @PropertyName= 'ESRegion'
select PD.PropertyId,
PD.PropertyName,
convert(varchar(255), v.Value ) DisplayValue
from Property_Dictionary PD WITH(READUNCOMMITTED) 
inner join CorpTax_LookupDefinition l on l.Lookupkey = pd.ReferenceType
join MDTable md on l.DataDictionaryTypeId = md.TableGUID 
join ValueChar v on 
(
v.TableID = md.TableID 
and v.AttributeID = l.DisplayAttributeId 
)
where PD.DataTypeid = 7
and PD.PropertyName = @PropertyName 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T20:23:20.943

这里有非SQL。你是说 T/SQL 到 PL/SQL 吗？另外，我认为在 Oracle 中不允许使用 WITH(READUNCOMITTED)，因为在 Oracle 中不允许未读未提交（如果您需要能够进行脏读，您可以更改事务隔离）。最后，我认为 convert 使用不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:53:09.240

在 SQL*Plus 中，您可以执行以下操作：

```
define PropertyName='ESRegion'
SELECT PD.PropertyId, PD.PropertyName, v.Value DisplayValue 
  FROM Property_Dictionary PD 
         INNER JOIN CorpTax_LookupDefinition l 
                 ON l.Lookupkey = pd.ReferenceType 
               JOIN MDTable md ON l.DataDictionaryTypeId = md.TableGUID
               JOIN ValueChar v ON ( v.TableID = md.TableID  AND
                                     v.AttributeID = l.DisplayAttributeId  )
 WHERE PD.DataTypeid = 7 
   AND PD.PropertyName = '&PropertyName'; 
```

DEFINE 替换原始代码中的 DECLARE 和 SET。然后，您将在查询中使用 DEFINE 的变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T20:55:11.717

这应该有效：

```
select PD.PropertyId, PD.PropertyName, cast(v.value as varchar(255)) as DisplayValue
from Property_Dictionary PD inner join
     CorpTax_LookupDefinition l
     on l.Lookupkey = pd.ReferenceType join
     MDTable md
     on l.DataDictionaryTypeId = md.TableGUID join
     ValueChar v
      on v.TableID = md.TableID and
         v.AttributeID = l.DisplayAttributeId 
where PD.DataTypeid = 7 and PD.PropertyName = 'ESRegion' 
```

正如其他地方所提到的，这有点不同。它将调用表上的读锁。如果您关心这一点，那么您需要研究用于锁定的不同 Oracle 选项。我将 CONVERT 更改为 CAST。目前尚不清楚 v.value 的类型是什么，但这应该可以。（对于某些类型， to_char() 会更好。）

我还将变量直接放入查询中。如果你想要变量，那么你就超出了 SQL 的范围，进入了 PL/SQL 和 TSQL 的领域。

# jquery - JqueryUI 自动完成自动对焦覆盖我的文本输入

> ID：12012454
> 
> 赞同：2
> 
> 时间：2012-08-17T20:01:29.987
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

我正在使用最新版本的 JqueryUI 自动完成（1.8.23）。我正在使用 autoFocus : true property，这给了我一个大问题。

当我开始以较快的速度在输入框中输入文本时， autoFocus : true 会导致文本被先前匹配的值替换。

例如：当我输入“foot”时，这会向服务器发出一个请求，并且自动完成下拉菜单中的第一个选择变为“foot”，而我会很快继续输入“football”。当我键入它们时，这会替换字母球。

有人遇到过这个问题并找到了解决方案吗？

**更新**

这是 jquery ui 网站上提出的错误。尽管它已按固定方式关闭，但在可供下载的最新稳定版本中不可用。 [http://bugs.jqueryui.com/ticket/7555](http://bugs.jqueryui.com/ticket/7555)

如果有人找到了此解决方案的解决方法，如果您可以分享它会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T22:50:02.513

尽管 JQueryUI 团队已将 bug 关闭为“已修复”，但显示该修复仅在 1.9.0 版本中可用。所以在那之前，这是解决问题的方法。模糊事件是导致此问题的原因。

将以下代码添加到页面的 javascript 中：

```
$('.ui-autocomplete-input').each(function (idx, elem) {
      var autocomplete = $(elem).data('autocomplete');
      if ('undefined' !== typeof autocomplete) {
            var blur = autocomplete.menu.options.blur;
            autocomplete.menu.options.blur = function (evt, ui) {
                  if (autocomplete.pending === 0) {
                        blur.apply(this,  arguments);
                  }
             };
      }
 }); 
```

归功于[这些人](http://support.transparensee.com/kb/simplicity-widgets/jquery-ui-1816-autocomplete-autofocus-bug-workaround)

# c++ - CMake 和处理子文件夹头文件

> ID：12012459
> 
> 赞同：10
> 
> 时间：2012-08-17T20:01:54.770
> 
> 标签：c++, cmake

我正在尝试设置我的项目来构建几个包含其完整功能的动态库。每个库都有子文件夹。子文件夹库相互依赖，因此它们必须相互引用函数。我似乎已经设法让 CMake 在项目中无错误地运行，但是当我开始构建时，我的标题找不到对方。似乎在构建时，包含路径设置不正确。我怎样才能解决这个问题？是否需要采取其他步骤才能正确设置包含路径？

结构看起来像这样

```
root
    CMakeLists.txt
    bin
    lib
    lib0
        CMakeLists.txt
        lib0.h
        lib0.cpp
    lib1
        CMakeLists.txt
        lib1.h
        lib1.cpp
    ... 
```

在根目录的 CMakeLists.txt 中，我有这样的声明：

```
set(ROOT /blah/blah/root)    

include_directories(${ROOT}/lib0)
include_directories(${ROOT}/lib1)

add_subdirectory(lib0)
add_subdirectory(lib1) 
```

在子文件夹的 CMakeLists.txt 中，我有：

```
set(lib0_SOURCES "")
list(APPEND lib0_SOURCES lib0.cpp)
add_library(lib0_lib ${lib0_SOURCES}) 
```

我的库标题看起来像（假设这是 lib0.h）：

```
#include "lib1/lib1.h"
... 
```

CMake 运行良好，没有错误，但是当我去编译时，出现如下错误：

```
In file included from /blah/blah/root/lib0/lib0.cpp:1:0:
/blah/blah/root/lib0/lib0.h:1:30: fatal error: lib1/lib1.h: No such file or directory 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-17T20:27:51.427

你告诉 GCC `#include the file "lib1/lib1.h"`。当你构建时，CMake 会要求在“${ROOT}/lib0”和“${ROOT}/lib1”中寻找额外的头文件

所以，GCC 正在尝试 "${ROOT}/lib0/lib1/lib1.h" 和 "${ROOT}/lib1/lib1/lib1.h" 是的，不能工作。

要解决这个问题：

*   您可以在根 CMakeLists.txt 中使用：`include_directories(".")`
*   保留你的 CMakeLists 但`#include the file "lib1.h"`
*   删除 CMakeLists 中的 include_directories 和`#include the file "../lib1/lib1.h"`

IMO，我会选择第一个选项！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T18:40:50.847

我会要求 CMake 只考虑 C/C++ 的 ROOT 目录包括查找：

```
set(ROOT /blah/blah/root)

include_directories(${ROOT})

add_subdirectory(lib0)
add_subdirectory(lib1) 
```

然后，在 C/C++ 中，使用尖括号（'<' 和 '>'）而不是双引号（'"'）：

```
#include <lib1/lib1.h> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T20:12:46.510

您需要使用双重命名方案或将基本目录指定为包含路径：

```
root
    CMakeLists.txt
    bin
    lib
    lib0
        CMakeLists.txt
        lib0.cpp
        lib0
            lib0.h
    lib1
        CMakeLists.txt
        lib1.cpp
        lib1
            lib1.h
    ... 
```

# sql - 主要是数字范围

> ID：12012461
> 
> 赞同：0
> 
> 时间：2012-08-17T20:02:04.450
> 
> 标签：sql, oracle, coldfusion

我正在使用 ColdFusion 访问的 Oracle 数据库中有一个列，并且想要选择一系列项目。

该列主要是数字，但在数字末尾包含一些字母。样本数据：55, 56, 570, 571, 572, 573, 574, 575, 576, 577, 578, 579, 57A, 57, 580, 581, 582, 583, 583, 583, 584, 585, 586, , 587, 588, 589, 58, 59, ....

我想要

```
select .... where filenumber >= '57' and filenumber <= '59' 
```

结果将返回 57、57A、58 和 59

该列的 Oracle 数据类型是 varchar。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T20:07:06.180

You might be able to use a regular expression to get the digits only, like so:

```
SELECT ....
WHERE REGEXP_LIKE(filenumber, '^[[:digit:]]+$') >= '57'
AND REGEXP_LIKE(filenumber, '^[[:digit:]]+$') <= '59' 
```

However, I have never used Oracle before, so this might not work.

Based on [this SO answer](https://stackoverflow.com/a/3932261/1028949).

Another, simplified attempt:

```
SELECT ....
WHERE REGEXP_LIKE(filenumber, '^[[:digit:]]+$') BETWEEN '57' AND '59' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T22:15:30.460

知道了！我必须提到@MrSlayer，因为它指出了 Oracle 支持正则表达式的事实（不幸的是，它`REGEXP_LIKE()`返回了一个*布尔*结果，这并不完全有帮助）。

这可以这样做：

```
SELECT fileNumber
FROM File_Transfer
WHERE TO_NUMBER(REGEXP_SUBSTR(filenumber, '^(\d+)(\D*)$', 1, 1, 'x', 1)) >= 57
AND TO_NUMBER(REGEXP_SUBSTR(filenumber, '^(\d+)(\D*)$', 1, 1, 'x', 1)) < 60 
```

（我也有一个有效的 SQL Fiddle[示例](http://www.sqlfiddle.com/#!4/3c7fc/24)。）

这是假设您在 Oracle 11 下运行，尽管您可能能够将其调整为 10 中的等效项（10 缺少最终参数，即*仅*返回数字部分的参数）。这也假设您已经将文件编号作为数字开头，但这不应该太难在必要时进行转换。当然，总是更喜欢“下限包容，上限排斥”形式的范围（并避免`BETWEEN`像瘟疫一样）。

# iphone - iOS - 具有方向的反转高度/宽度

> ID：12012462
> 
> 赞同：2
> 
> 时间：2012-08-17T20:02:08.810
> 
> 标签：iphone, ios, ipad, uiview, uiviewcontroller

我正在创建一个自定义容器视图控制器，但是当我想调整其中一个子视图控制器视图的框架大小时，它的大小对于屏幕的方向并不好。

为了在我的容器的 init 方法中更准确，我保留了 2 个实例变量（2 个视图控制器）。然后在我的容器的 viewdidload 方法中，我想调整一个视图控制器的视图框架并将 2 添加为子视图。

我的问题是我只在横向工作，当我询问其中一个视图控制器的帧大小时，高度和宽度是相反的。我应该有 1024 的宽度和 748 的高度，但我得到了 748 的宽度和 1024 的高度！

你知道为什么吗 ？

PS：在包括容器视图控制器在内的所有视图控制器中，我将 shouldautorotate 方法设置为 UIOrientationInterfaceIsLandscape()

非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T21:15:17.903

我不确定您的确切设置，但这里有一些可能会有所帮助的一般信息：

当您的视图控制器非常靠近视图层次结构的顶部（或实际上在顶部）时，您会发现您获得了宽度和高度的这种“交换”效果。交换通常在视图上显示`frame`，而不是在`bounds`视图上。这是因为`bounds`实际上将一些变换应用于框架 - 有时这些变换包括 90 度旋转（由于设备处于横向模式）。

请注意，检查房产的确切时间`frame`也很重要。如果您在视图加载之后但在它出现在屏幕上之前检查属性，您可能会得到“错误”的结果。

# symfony - Symfony 2 - 使用 Json 检索实体，返回另一个实体

> ID：12012463
> 
> 赞同：0
> 
> 时间：2012-08-17T20:02:09.310
> 
> 标签：symfony, doctrine-orm, json

我在对实体进行 json_encode 时遇到问题。

```
public function jsonvoteAction($id) {
    $em = $this->getDoctrine()->getEntityManager();
    $entity = $em->getRepository('KorumAGBundle:AGVote')->findOneById($id);
    $response = new Response(json_encode($entity, 200));
    $response->headers->set('Content-Type',' application/json');
    return $response;
    } 
```

此代码返回我一个用户实体

```
 {"users":{"__isInitialized__":false,"id":null,"nickname":null,"pwd":null,"email":null,"firstname":null,"lastname":null,"poste":null,"addr1":null,"addr2":null,"pc":null,"country":null,"phone":null,"province":null,"acess":null,"site":null,"crew":null,"utilisateur":null}} 
```

当我 var dymp 我的 $entity 时，它会返回我的 AGVote 和 USers 实体。

这是我的 AGVote 实体

```
 <?php
    namespace Korum\AGBundle\Entity;

    use Doctrine\ORM\Mapping as ORM;

    /**
     * Korum\AGBundle\Entity\AGVote
     * @ORM\Entity
     * @ORM\HasLifecycleCallbacks
     */
    class AGVote
    {
        /**
         * @ORM\Id
         * @ORM\Column(type="integer")
         * @ORM\GeneratedValue(strategy="AUTO")
         * 
         */
        private $id;

         /**
         * @ORM\Column(type="text")
         */
        private $question;

        /**
         * @ORM\Column(type="smallint")
         */
        private $actif;

         /**
         * @ORM\ManyToOne(targetEntity="\Korum\KBundle\Entity\Users", cascade={"all"})
         */
        public $users;

   /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set question
     * Nb : Only AG admin can set a question
     * @param text $question
     */
    public function setQuestion($question)
    {
        $this->question = $question;
    }

    /**
     * Get question
     *
     * @return text 
     */
    public function getquestion()
    {
        return $this->question;
    }

    /**
     * Set actif
     *
     * @param smallint $actif
     */
    public function setActif($actif)
    {
        $this->actif = $actif;
    }

    /**
     * Get actif
     *
     * @return smallint
     */
    public function getActif()
    {
        return $this->actif;
    }

     /**
     * Set Users
     *
     * @param Korum\KBundle\Entity\Province $Users
     */
    public function setUsers(\Korum\KBundle\Entity\Users $users)
    {
        $this->users = $users;
    }

    /**
     * Get Users
     *
     * @return Korum\KBundle\Entity\Users
     */
    public function getUsers()
    {
        return $this->users;
    }

} 
```

有谁知道发生了什么？

* * *

我尝试安装 JSMSerializerBundle，但在 1.1 版本中使用元数据库事件。当我想清除我的缓存时，它失败并出现错误：

请参阅： [JMSSerializerBundle 安装：可捕获的致命错误：参数 1 传递给 JMSSerializerBundle\Twig\SerializerExtension::__construct()](https://stackoverflow.com/questions/12075247/jmsserializerbundle-installation-catchable-fatal-error-argument-1-passed-to-j)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T11:32:13.140

默认情况下，`json_encode`仅使用公共属性。所以它序列化了`AGVote`:的唯一公共属性`$users`。的内容`$users`是`User`; 哪些公共字段被序列化了。

您可以通过向您的实体添加 toArray() 方法，然后执行这些来解决这些问题`json_encode($entity->toArray())`，但我强烈建议您查看并使用**[JMSSerializedBundle](https://github.com/schmittjoh/JMSSerializerBundle)**。

# android - 连续 5 次从内部存储读取时，Android 强制关闭

> ID：12012466
> 
> 赞同：0
> 
> 时间：2012-08-17T20:02:21.343
> 
> 标签：android, file-io

在我的 android 应用程序中，每次加载新游戏时，我都会从内部存储中读取文件。我这样做的前 4 次，它工作正常，但在第五次它强制关闭。这是我的代码

```
private String readFromInternalStorage(String filename) {
    FileInputStream fis=null;
    byte[] bytes = new byte[1000000];
    try {
        fis=startGame.openFileInput(filename);
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }       
    try {
        fis.read(bytes);
    } catch (IOException e) {
        e.printStackTrace();
    }
    return new String(bytes);

} 
```

在弄乱代码时，我注意到如果我改变字节数组的长度，它会改变我在不强制关闭的情况下读取文件的次数。如果我将长度更改为 2000000，它会在第二次后关闭，如果我将其更改为 100000，它会在第八次后关闭。我对为什么会发生这种情况一无所知，因为每次调用该方法时我都会创建一个新的字节数组，所以我认为大小不会改变任何东西。

更新：

在返回并进行更多测试后，文件输入似乎与我的应用程序强制关闭的原因无关。当这段代码被注释掉时，应用程序将连续加载五个级别而不会强制关闭，所以我认为这是问题所在，但在八次尝试后它仍然强制关闭，所以很明显还有其他东西不起作用。还是要谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T20:07:29.943

我在您的代码中没有看到“close()”：

*   [http://docs.oracle.com/javase/6/docs/api/java/io/FileInputStream.html#close%28%29](http://docs.oracle.com/javase/6/docs/api/java/io/FileInputStream.html#close%28%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T20:12:10.410

您不应该对数组大小进行硬编码。此外，您应该使用 finally，以确保`FileInputStream`即使失败也已关闭。

这是一个代码示例，显示了它应该如何完成：

```
 FileInputStream fis;
        String info = "";
        try {
            fis = mContext.openFileInput(this.fileName);
            byte[] dataArray = new byte[fis.available()];
            if (dataArray.length > 0) {
                while (fis.read(dataArray) != -1) {
                    info = new String(dataArray);
                }
                Log.i("File Reading" , "Success!");
                isOk = true;
            }
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e1) {
            e1.printStackTrace();
        } finally {
            fis.close();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T21:01:55.850

您所做的安全版本是例如：

```
private String readFromInternalStorage(String filename) {
    FileInputStream fis = null;
    File file = new File(startGame.getFilesDir(), filename);

    long size = file.length();
    // impossible to have more than that (= 2GB)
    if (size > Integer.MAX_VALUE) {
        Log.d("XXX", "File too big");
        return null;
    }

    int iSize = (int) size;
    try {
        fis = new FileInputStream(file);

        // part of Android since API level 1 - buffer can scale
        ByteArrayBuffer bb = new ByteArrayBuffer(iSize);

        // some rather small fixed buffer for actual reading
        byte[] buffer = new byte[1024];

        int read;
        while ((read = fis.read(buffer)) != -1) {
            // just append data as long as we can read more
            bb.append(buffer, 0, read);
        }

        // return a new string based on the large buffer
        return new String(bb.buffer(), 0, bb.length());
    } catch (FileNotFoundException e) {
        Log.w("XXX", e);
    } catch (IOException e) {
        Log.w("XXX", e);
    } catch (OutOfMemoryError e) {
        // this could be left out. Keep if you read several MB large files.
        Log.w("XXX", e);
    } finally {
        // finally is executed even if you return in above code
        // fis will be null if new FileInputStream(file) throws
        if (fis != null) {
            try {
                fis.close();
            } catch (IOException e) {
                // ignored, nothing can be done if closing fails
            }
        }
    }
    return null;
} 
```

# scala - 使用持久连接玩 2.0 Comet

> ID：12012468
> 
> 赞同：2
> 
> 时间：2012-08-17T20:02:24.460
> 
> 标签：scala, playframework, playframework-2.0

我正在将 play 2.0 用于连接到后端套接字的实时 Web 应用程序，以便侦听该流上的数据。

以下示例执行我想要的操作，但如果客户端网页已关闭或页面已更改，我不知道如何断开套接字。

```
def comet = Action {

  val out = Enumerator.imperative[String]()
  val socketClient = new SocketClientModel("localhost", "testclient", 
    Option("username"), "password", out)
  socketClient.listen

  Ok.stream(out &> Comet(callback = "console.log"))
} 
```

我遇到的问题是弄清楚当页面关闭或更改时如何调用 socketClient.disconnect 。目前，当我关闭浏览器会话时，我仍然可以看到连接已建立并且正在服务器端接收数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T16:44:08.513

一个 hacky 解决方案可能是让您在另一个方向（客户端到服务器）进行 ping 调用：

*   您设置了一个计时器，如果在 10 秒之前没有取消连接，它将破坏连接（您始终可以设置更长的时间）：

    ```
    var timer; 

    def comet = Action {
         timer = Akka.system.scheduler.scheduleOnce(10 seconds) {
           socketClient.disconnect
         }
    ...
    } 
    ```

*   您设置一个接收 ping 的操作并在 javascript 代码中设置一个计时器，以每 9 秒向该路由发送请求：

    ```
    def keepAlive = Action {
        cancel.cancel
          timer = Akka.system.scheduler.scheduleOnce(10 seconds) {
              socketClient.disconnect
          }
    } 
    ```

当用户转到另一个页面，或者取消与彗星Action的连接时，它也应该取消客户端的ping计时器（如果用户更改页面，这应该是自动的，但是你必须进行一些健康检查如果您停留在同一页面等，则在彗星连接上）。当客户端停止 ping 您的操作时，计时器最终将终止套接字。

这真的很难看，因为您需要使用`var`在两个操作之间共享的 a 并且它并不是真正的线程安全。它也只能支持一个客户。但是您给出的代码示例与我猜的相同。您需要跟踪哪个会话打开了哪个套接字以支持多个客户端。不过，您会失去无状态行为。

一个更干净的解决方案是使用一个小的actor系统来封装这种行为： - 你有一个 SocketActor，当它接收到 Start 消息时，它会打开一个套接字并将东西推送到 PushEnumerator 上，只要它没有，它就会一直这样做' t 收到停止消息。- 你还有一个 KeepAliveActor，它会在给定的时间后向 SocketActor 发送一个 Stop 消息，除非它之前收到过 KeepAlive 消息（所以，这里发生了什么）。

当你收到一个彗星连接时，你会产生两个新的演员（你应该有一个经理演员来隐藏这两个演员并中继消息等）并保持他们的参考链接到会话。然后，keepalive 操作将获取正确会话的 ref 并将 KeepAlive 消息发送给参与者。

SocketActor 会在收到 Stop 消息时关闭套接字并销毁链接到他的 Actor。

它涉及更多的编码，所以我不包括片段，但这将是一个简单的 AKKA 系统，所以如果你还不习惯它，你应该能够通过查看 AKKA 教程来设置它。

# objective-c - 使用 NSLog 使用枚举数据类型的令牌

> ID：12012478
> 
> 赞同：6
> 
> 时间：2012-08-17T20:02:59.897
> 
> 标签：objective-c, enums

我正在尝试使用 NSLog 显示存储特定枚举值的值。在以下示例中，我试图将输出设为：`5 represents month of May`.

知道`enum`与 NSLog 一起使用的正确令牌是什么吗？我尝试使用 %i 和 %@，但两者都不起作用。

谢谢！

```
enum month {jan = 1, feb, march, apr, may, jun, jul, aug, sep, oct, nov, dec};
enum month amonth;
int x = 5;
amonth = x;
NSLog(@"%i represents month of %@", x,amonth); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T20:06:24.477

不幸的是，你所要求的是不可能的。枚举名称不会保留过去的编译（编译器可用的调试信息除外）。因此，除非您想 a) 在您的应用程序中提供调试信息，并且 b) 在您的应用程序中有效地编写一个使用嵌入式调试信息的调试器，否则它就无法工作。

此问题的典型解决方案是使用`switch`语句提供一个返回适当名称的函数。

```
NSString *monthName(enum month m) {
    switch (m) {
        case jan:
            return @"jan";
        case feb:
            return @"feb";
        ...
    }
    return @"unknown";
} 
```

这种方法的一个好处是您可以本地化名称。

# json - 无法使用 jsonp extjs4.1 加载商店

> ID：12012482
> 
> 赞同：0
> 
> 时间：2012-08-17T20:03:20.560
> 
> 标签：json, extjs4, jsonp

我正在尝试使用 jsonp 加载 ext 数据存储。当我使用 ajax 并在同一个域上发出请求时，下面的代码工作正常。

**店铺定义：**

```
var baseUrl = 'http://localhost:8090/'; 

Ext.define('Ktimatologio.store.NewWholeBlockStore', {
    extend: 'Ext.data.Store',
    alias: 'widget.newsingleblockstore',

    requires: ['Ktimatologio.model.NewWholeBlockModel'],

    model: 'Ktimatologio.model.NewWholeBlockModel',

    groupField: 'search_tag',

    fields: [   
        {name:'id', mapping:'id'},
        {name:'id1', mapping:'id1'},
        {name: 'text', mapping: 'text'},
        {name: 'title', mapping: 'title'},
        {name: 'fek', mapping: 'fek'},
        {name: 'date', mapping: 'date'},
        {name: 'descr', mapping: 'description'},
        {name: 'model', mapping: 'model'},
        {name: 'body', mapping: 'body'},
        {name: 'type', mapping: 'type'},
        {name: 'history', mapping: 'history'},
        {name: 'src', mapping: 'url'},
        {name: 'search_tag', mapping: 'search_tag'},
        {name: 'new_element', mapping: 'new_element'},
        {name: 'new_table', mapping: 'new_table'}
        ],

    autoLoad: true, 

    proxy: {
        //type:'ajax',
        type:'jsonp',
        url: baseUrl + 'openbd/ktimatologio-final/resources/cfScripts/nea_stoixeia/GetNewTables.cfc?',
        extraParams: {
            method: 'getNewTables'
            },
        reader:{
            type: 'json',
            root: 'data'
        }
    } 
```

当我运行代码时，我在 firebug 上看到一个错误：

```
SyntaxError: invalid label
{"data":[{"id":"1_n_2308_1995","id1":1,"title":"Άρθρο 1&nbspΦΕΚ Α΄ 114&nbsp15.6....

GetNew...llback2 (line 1, column 1) 
```

我被困住了！

任何帮助深表感谢！

汤姆

希腊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T04:42:14.823

JSONP 服务实际上必须返回一个函数调用，而不仅仅是返回 JSON。谷歌一些例子。

# javascript - 列出辅助窗口

> ID：12012489
> 
> 赞同：4
> 
> 时间：2012-08-17T20:03:54.210
> 
> 标签：javascript

使用该功能`window.open()`可以生成辅助窗口和选项卡。

如何在 JavaScript 中获取“父”页面的生成的辅助窗口和选项卡的列表？

***编辑***：我正在寻找一种方法来做到这一点*，而无需*在创建时跟踪我创建的窗口。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T20:09:51.313

在javascript中没有办法做到这一点。您需要自己跟踪它们：

```
var windowArray = [];

// whenever you open a window...
var newWindow = window.open(...);
windowArray.push(newWindow);

// whenever you close a window...
if (opener && !opener.closed && opener.windowArray) {
    // search for your window in the array

    var matchingIndex = -1;

    for (var i = 0; i < opener.windowArray.length; i++) {
        if (opener.windowArray[i] === window) {
            matchingIndex = i;
            break;
        }
    }

    // if your window was found, remove it
    if (matchingIndex !== -1) {
       opener.windowArray.splice(matchingIndex, 1);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T20:08:41.657

我不知道是否有内置方法可以在 js 中返回子窗口和选项卡，但是您可以通过每次调用 window.open() 在数组中创建一个条目来创建一个数组来跟踪它们

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T20:10:31.990

我**认为**不可能直接这样做，尽管您可以将窗口保存在数组中：

```
var wins = [];
function openWindow(win){
   newWin = window.open(win);
   wins.push(newWin);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T20:09:37.650

这个怎么样：

```
var windowArray = [];
windowArray.push(window.open(yourWindow)); 
```

`windowArray`将存储对所有打开的窗口或选项卡的引用。

# ruby-on-rails - advantages of serving via asset pipeline rather than from /public

> ID：12012490
> 
> 赞同：0
> 
> 时间：2012-08-17T20:03:56.937
> 
> 标签：ruby-on-rails, ruby-on-rails-3, asset-pipeline

I have an app that serves web image assets from both locations. I have watched the two railscasts on this topic but what are the REAL advantages of serving images this way. I see the timestamp on the file; does this cause problems with working with a CDN like cloudfront? Or a reverse proxy such as Varnish? Are there any performance metrics for serving from /public vs /app/assets using Nginx?

In short, I understand advantages of CSS and Javascript but am not sure if it justifies moving the images from /public to /app/assets. What is the most compelling reason to do so? And are there any significant downsides esp as it relates to a CDN?

thx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T20:43:17.580

The asset pipeline will ad a digest (digital signature) to the images which is very helpful for cache busting. If you do eventually choose to use a CDN, having all your static assets in the assets folder makes it convenient.

# ruby-on-rails - 重构模型中多个字段的自定义验证

> ID：12012491
> 
> 赞同：1
> 
> 时间：2012-08-17T20:04:00.957
> 
> 标签：ruby-on-rails, validation, custom-validators

我有一个带有自定义验证功能的模型，可以验证日期不是过去的。目前，验证是硬编码的，以检查模型中的单个字段 selected_date。如何重构验证，以便可以将参数传递给自定义验证，以便测试 2 个字段？

```
class Appointment < ActiveRecord::Base
  attr_accessible :selected_date, :alternate_date

  validates_presence_of :selected_date
  validate :validate_date

  def validate_date
    if selected_date < Date.today
      errors.add(:selected_date, 'Date has passed')
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:10:33.877

创建文件 lib/future_validator.rb：

```
class FutureValidator < ActiveModel::EachValidator

  def validate_each(object, attribute, value)
    if value < Date.today
      object.errors[attribute] << "has passed"
    end
  end

end 
```

在您的模型中：

```
validates :selected_date, presence: true, future: true
validates :other_date, presence: true, future: true 
```

请参阅此 RailsCast：[Rails 3 中的验证](http://railscasts.com/episodes/211-validations-in-rails-3)

注意：确保 lib 文件在 config/application.rb 中自动加载，并在添加该文件后重新启动服务器。

# jquery - Jquery 返回 b.fn.b.init[102]

> ID：12012492
> 
> 赞同：0
> 
> 时间：2012-08-17T20:04:07.960
> 
> 标签：jquery, html, jquery-selectors, web

我必须选择多个元素，它们都有类="org-box"。在该框中有一个链接，我想捕获href。所以我这样做

```
$("a.org-box").click(function (e) {
 e.preventDefault();
 var link = $(e).html();
 $('.col-right').prepend("<b>" + link +"</b>");
}) 
```

我总是得到的是空值，我尝试过其他选择器，比如
var link = $(ea).attr("href").html();

以同样的运气。

我检查了我从该选择中得到的结果`$("a.org-box")`，我得到了这个 -> b.fn.b.init[102]

如果我这样做，`$("a.org-box:first").attr("href");`我会得到正确的href，但是当我这样做时，`$("a.org-box").attr("href");`我只会得到第一个。

我在做什么坏事？？如何选择所有 a.org-box 并在单击时捕获 href？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T20:10:43.323

```
<a href="http://google.com" class="org-box">Click to prepend Google</a> 
```

--

```
$("a.org-box").on('click', function(e) {
    e.preventDefault();
    $('.col-right').prepend("<b>" + e.target.href +"</b>"); //http://google.com
}); 
```

[**小提琴**](http://jsfiddle.net/gX7w7/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:13:20.643

你可以使用：

```
$("a.org-box").click(function (e) {
    $('.col-right').prepend('<b>' + $(this).attr('href') + '<b>');
    e.preventDefault();
}); 
```

`this`设置为`e.target`，`e.target`作为*事件的**目标*（被点击的项目）。您可以使用、、或任何使用 . 的相同变体。*`$(this).attr('href')``$(this).prop('href')``this.href``e.target`*

 *[我不知道您是否需要`.text()`链接的内部文本 ( ) 或`href`属性，所以我假设是后者。]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T20:18:44.060

jQuery 选择器返回所有匹配的元素，所以发生的事情是您从选择器中获取这些元素的 jQuery 集合，事件数据不是触发事件的元素，正确的实现将是：

```
$(a.org-box).click(function(){
    var link = $(this).html();
    $('.col-right').prepend("<b>" + link +"</b>");
}); 
```

您之所以使用`$(this)`，是因为 jQuery 正在遍历集合，所以就像您使用`.each()`对象`this`保存您的元素一样。*

# facebook - Detecting if a user clicked on Facebook Like button

> ID：12012494
> 
> 赞同：2
> 
> 时间：2012-08-17T20:04:21.073
> 
> 标签：facebook, facebook-like

It looks like:

```
 FB.Event.subscribe('edge.create', function(href, widget) {
            alert("Hi");
        }); 
```

works for everybody except me! Here is my code:

```
 <html xmlns:fb="https://www.facebook.com/2008/fbml">
                               .
                               .
                               .
         <body>
         <div id="section1">    
     <div id="fb-root"></div>
         <script src="http://connect.facebook.net/en_US/all.js"></script>
         <script>
     window.fbAsyncInit = function() {
            FB.init({
               appId :'xxx',
               status : true, 
               cookie : true,
               xfbml : true, 
               oauth : true 
            });
            FB.Event.subscribe('edge.create', function(href, widget) {
               alert("Hi");
            });
          });

          (function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) {return;}
          js = d.createElement(s); js.id = id;
          js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
          fjs.parentNode.insertBefore(js, fjs);
          }(document, 'script', 'facebook-jssdk'));</script>

          <fb:like href="mysite" send="false" width="450" show_faces="false" font="tahoma"></fb:like>

     </div> 
```

I just need a simple way to check if the like button was clicked to show a form on the page! Any Suggestions? Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T01:45:59.530

您甚至可以在同一页面上检测多个喜欢。我们经常使用它，请查看以下代码段。

```
window.fbAsyncInit = function() {
 FB.init({appId: 'YOUR_FACEBOOK_APP_ID', status: true, cookie: true, xfbml: true});
 FB.Event.subscribe('edge.create', function(href, widget) {

  // START: LOGIC For detecting multiple likes on the same page
   if(href == "LINK_1_ON_THEPAGE') {
       alert('User Like is for Link1');
   } else if (href == "LINK_2_ON_THEPAGE') {
       alert('User Like is for Link2');
   }
  // END: LOGIC For detecting multiple likes on the same page

 });
}; 
```

# adobe - 在 InDesign 中使用 XMP 进行开发

> ID：12012500
> 
> 赞同：1
> 
> 时间：2012-08-17T20:04:38.507
> 
> 标签：adobe, adobe-indesign, xmp

我正在尝试与 Adob​​e InDesign、HP SmartStream 和 XMP 元数据格式集成。下面是我正在使用的 IDML metadata.xml 文件中的 xml 片段。在 XML 中有实例和文档 ID，它们是随机生成的，还是特定类型的哈希，或者完全是其他东西？我需要生成这样的文件。此外，有没有人知道这个元文件的更好的信息来源？我一直在挖掘 Adob​​e 的文档，但每个文档似乎都将我引向了另一个文档。

```
<xmpMM:DerivedFrom rdf:parseType="Resource">
    <stRef:instanceID>xmp.iid:679F6CA9302668118C14A18AA97898A6</stRef:instanceID>
    <stRef:documentID>xmp.did:F7416EEA182068118083BC84E35D00D0</stRef:documentID>
    <stRef:originalDocumentID>xmp.did:F7416EEA182068118083BC84E35D00D0</stRef:originalDocumentID>
    <stRef:renditionClass>default</stRef:renditionClass>
</xmpMM:DerivedFrom>
<xmpMM:Manifest>
    <rdf:Bag>
        <rdf:li rdf:parseType="Resource">
            <stMfs:linkForm>ReferenceStream</stMfs:linkForm>
            <stMfs:reference rdf:parseType="Resource">
                <stRef:instanceID>uuid:90f0c8a7-2814-ed43-8557-672122f6924d</stRef:instanceID>
                <stRef:documentID>uuid:f99b8252-e392-45bd-a8f3-c845a8f14e15</stRef:documentID>
                <stRef:lastURL>file:///Path/To/PDF.pdf</stRef:lastURL>
            </stMfs:reference>
            <xmpMM:placedXResolution>72.00</xmpMM:placedXResolution>
            <xmpMM:placedYResolution>72.00</xmpMM:placedYResolution>
            <xmpMM:placedResolutionUnit>Inches</xmpMM:placedResolutionUnit>
        </rdf:li>
        .
        .
        .
        <rdf:li rdf:parseType="Resource">
             <stMfs:linkForm>ReferenceStream</stMfs:linkForm>
             <stMfs:reference rdf:parseType="Resource">
                 <stRef:instanceID>uuid:5245EF7C528E11DA951BB478EA16A7D6</stRef:instanceID>
                 <stRef:documentID>uuid:5245EF7B528E11DA951BB478EA16A7D6</stRef:documentID>
                 <stRef:lastURL>file:///Path/To/EPS.eps</stRef:lastURL>
             </stMfs:reference>
             <xmpMM:placedXResolution>72.00</xmpMM:placedXResolution>
             <xmpMM:placedYResolution>72.00</xmpMM:placedYResolution>
             <xmpMM:placedResolutionUnit>Inches</xmpMM:placedResolutionUnit>
        </rdf:li>
        <rdf:li rdf:parseType="Resource">
             <stMfs:linkForm>DirectStream</stMfs:linkForm>
             <stMfs:reference rdf:parseType="Resource">
                <stRef:instanceID>xmp.iid:60B74D5C85A5E0118B24913025BE159A</stRef:instanceID>
                <stRef:documentID>adobe:docid:photoshop:14ee6e6c-eb90-11dd-a5fb-e51dc86f9044</stRef:documentID>
                <stRef:originalDocumentID>adobe:docid:photoshop:14ee6e6c-eb90-11dd-a5fb-e51dc86f9044</stRef:originalDocumentID>
                <stRef:lastURL>file:///Applications/Adobe%20InDesign%20CS6/Plug-Ins/SmartStream/Designer/Resources/SmartStreamDefault.tif</stRef:lastURL>
             </stMfs:reference>
             <xmpMM:placedXResolution>300.00</xmpMM:placedXResolution>
             <xmpMM:placedYResolution>300.00</xmpMM:placedYResolution>
             <xmpMM:placedResolutionUnit>Inches</xmpMM:placedResolutionUnit>
        </rdf:li>
    </rdf:Bag>
</xmpMM:Manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-09T23:14:33.543

在 InDesign 中选择一张图片并运行脚本

```
var c = app.documents[0].selection[0].graphics;
var myfilePath = c[0].itemLink.filePath;
var k = c[0].itemLink.linkXmp.properties;

alert(k.toSource().replace( new RegExp(",",'g'),"\r" ))

var myFile = File(myfilePath);
    xmpFile = new XMPFile(myFile.fsName, XMPConst.UNKNOWN, XMPConst.OPEN_FOR_UPDATE);
    xmp = xmpFile.getXMP();
    var myXmp = xmp.serialize();

    alert (myXmp.toSource()) 
```

# sql-server-2005 - 没有 RegEx 的 SQL Server 模式匹配

> ID：12012503
> 
> 赞同：2
> 
> 时间：2012-08-17T20:04:52.740
> 
> 标签：sql-server-2005, pattern-matching

我正在尝试搜索存储过程中使用的表达式的所有实例并具有以下内容：

```
SELECT name, type_desc, create_date, modify_date
    FROM sys.procedures 
    WHERE OBJECT_DEFINITION(object_id) LIKE '%ufn_TurnFlagOn(5,ColumnA)%'
ORDER BY name 
```

但这不会返回函数参数之间可能有空格的 sps，例如：

```
ufn_TurnFlagOn( 5,ColumnA )
ufn_TurnFlagOn(5, ColumnA)
ufn_TurnFlagOn( 5,ColumnA) 
```

请注意：

*   我不能像这样使用“_”通配符，`LIKE '%ufn_TurnFlagOn(_5_,_ColumnA_)%'`因为它完全匹配单个字符，因此它不会匹配 `ufn_TurnFlagOn(5,ColumnA)`等等。
*   我没有 CLR 集成（现在也不能注册），因此我不能使用正则表达式。

另一种方法是在所有可能性下多次运行查询，但有没有更好的方法在 1 个查询中完成此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T20:17:16.383

如果空格是唯一的问题，您可以使用`REPLACE`删除它们，然后有：

```
WHERE REPLACE(OBJECT_DEFINITION(object_id), ' ', '') 
    LIKE '%ufn_TurnFlagOn(5,ColumnA)%' 
```

# php - Facebook 应用程序：获取用户信息，插入数据库，并自动发布到墙上

> ID：12012507
> 
> 赞同：1
> 
> 时间：2012-08-17T20:05:14.603
> 
> 标签：php, mysql, facebook, authentication

我正在学习如何为 facebook 创建应用程序。我想要的是一个应用程序，它在用户授权后收集用户的信息（姓名、电子邮件、生日），将其插入数据库，并在用户的墙上自动发布。

我有这段代码，但是当我运行它时，浏览器告诉我网页导致了太多重定向。

我进行了很多搜索并测试了许多不同的方法。这段代码似乎以前有效，但 facebook 改变了一些东西。我已尽力更新它而没有结果。请看一下并指导我解决它。

谢谢 这是我在根文件夹中保存为 index.php 的代码。

```
<?php

session_start();

if (!empty($_SESSION)) {
header("Location: index.php");
}
mysql_connect('host', 'username', 'pass');
mysql_select_db('dbname');

# require library
require("src/facebook.php");

# Creating the facebook object
$facebook = new Facebook(array(
        'appId' => 'xxxxxx',
        'secret' => 'xxxxxxxx',
        'cookie' => true
    ));

# check active session
$user = $facebook->getUser();

if (!empty($user)) {
# session active, get user id (getUser()) and user info (api->('/me'))
try {
    $uid = $facebook->getUser();
    $fb_access_token=$user['access_token'];
    $url = $facebook->getLoginUrl(array(
        'req_perms' => 'email,status_update,publish_stream,user_birthday'
            ));
    $user = $facebook->api('/me');
    $photolink = 'http://graph.facebook.com/'.$user['id'].'/picture?type=square';
    $param = array(
        'method' => 'users.getInfo',
        'uids' => uid,
        'fields' => 'pic_big'
    );
    $users_getinfo = $facebook->api($param);
} catch (Exception $e) {

}

if (!empty($user)) {
    # active session, check if already registered the user
    $query = mysql_query("SELECT * FROM users WHERE oauth_provider = 'facebook' AND     oauth_uid = " . $user['id']);
    $result = mysql_fetch_array($query);

    # If not, add it to the database
    if (empty($result)) {
        $query = mysql_query("INSERT INTO users (oauth_uid, oauth_provider, username, first_name, last_name, birthday, email, pic_square) VALUES ('facebook', {$user['id']}, '{$user['name']}', '{$user['first_name']}', '{$user['last_name']}', '{$user['birthday']}', '{$user['email']}', '".$photolink."')");
        $query = mysql_query("SELECT * FROM users WHERE id = " . mysql_insert_id());
        $result = mysql_fetch_array($query);
    }

    // variables in the session 
    $_SESSION['id'] = $result['id'];
    $_SESSION['oauth_uid'] = $result['oauth_uid'];
    $_SESSION['oauth_provider'] = $result['oauth_provider'];
    $_SESSION['username'] = $result['username'];
} else {
    # if error, kill the script
    die("There was an error.");
}

$api_call = array(
    'method' => 'users.hasAppPermission',
    'uid' => $uid,
    'ext_perm' => 'publish_stream'
);
$can_post = $facebook->api($api_call);
if ($can_post) {
    # post it! 
    $facebook->api('/' . $uid . '/feed', 'post', array(
        'message' => 'Wow you can get good prizes!',
        'name' => 'Be happy',
        'description' => 'Tour around the world',
        'caption' => 'Win a full package around the world',
        'picture' => 'http://www.test.com/test',
        'link' => 'http://test.test.com/test/'
    ));
    echo 'Posted!';
} else {
    die('Permissions required!');
}
} else {
# no active session, generate one
$login_url = $facebook->getLoginUrl();
header("Location: " . $login_url);
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:10:23.027

您确实在代码中创建了一个循环。它说如果用户有一个活动会话，将他重定向到 index.php。从那里他将被重定向到 index.php 等等。

```
if (!empty($_SESSION)) {
    header("Location: index.php");
} 
```

我不确定你想用这个重定向做什么，但它肯定会导致一个循环。

# c# - 如何使用 JSON.NET 将 JSON 反序列化为 .NET 对象？

> ID：12012519
> 
> 赞同：0
> 
> 时间：2012-08-17T20:06:25.193
> 
> 标签：c#, json.net

我有一个 JSON 对象，如下所示

```
{
   "data": [
      {
         "id": "18128270850211_49239570772655",
         "from": {
            "name": "Someone Unimportant",
            "id": "57583427"
         }
         /* more stuff */
      }
   ]
} 
```

我想使用[JSON.NET](http://james.newtonking.com/projects/json-net.aspx)解析它，

```
FacebookResponse<FacebookPost> response = JsonConvert.DeserializeObject<FacebookResponse<FacebookPost>>(json);

internal class FacebookResponse<T> where T : class
{
    public IList<T> Data { get; set; }
    public FacebookResponsePaging Paging { get; set; }
}

public class FacebookPost
{
    public string Id { get; set; }

    [JsonProperty("to.data.id")]
    public string FeedId { get; set; }

    [JsonProperty("from.id")]
    public string UserId { get; set; }

    [JsonProperty("created_time")]
    public DateTime CreatedTime { get; set; }

    [JsonProperty("updated_time")]
    public DateTime UpdatedTime { get; set; }

    public string Type { get; set; } // TODO: Type enum??

    public string Message { get; set; }
    public string Link { get; set; }
    public string Name { get; set; }
    public string Caption { get; set; }
    public string Description { get; set; }
} 
```

除了`FeedId`和`UserId`属性之外，一切都通过了。我应该如何映射这些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:30:15.940

```
public class From
{
    public string name { get; set; }
    public string id { get; set; }
}

public class Datum
{
    public string id { get; set; }
    public From from { get; set; }
}

public class FacebookPost
{
    public List<Datum> data { get; set; }
}

internal class FacebookResponse<T> where T : class
{
    public IList<T> Data { get; set; }
    public FacebookResponsePaging Paging { get; set; }
}

FacebookResponse<FacebookPost> response = JsonConvert.DeserializeObject<FacebookResponse<FacebookPost>>(json); 
```

试试下面的代码:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:15:43.567

使用此[站点](http://json2csharp.com/)获取 .net 的对象

然后可以使用 JSON.Net 进行反序列化：ex.JsonConvert.DeserializeObject(input) iirc

# php - 如何在 symfony2 formbuilder 中获取表单字段的默认值

> ID：12012520
> 
> 赞同：1
> 
> 时间：2012-08-17T20:06:26.357
> 
> 标签：php, forms, symfony

所以我读过我可以通过这样做在 symfony2 formbuilder 中设置字段的默认值

```
->add('myfield', 'text', array(
  'label' => 'Field',
  'data' => 'Default value'
)) 
```

现在我想操作默认情况下会在这里的值，为了知道要设置什么，我需要知道最初传递了什么，所以我可以得到默认值吗

myfield.default_value

以便我以后可以对其进行操作并将我的操作结果设置为真正的默认值？

补充：我试过

```
 ->add('username', 'text', array('label' => 'Användarnamn ', 'data' => 'my_own_defaultvalue')) 
```

这对我不起作用（虽然在一堆论坛中看到......）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:22:01.503

然后我意识到，最简单的方法可能是在将对象传递给 formBuilder 之前对其进行编辑，如下所示：

```
public function editUserAction($id)
{   

    $em = $this->getDoctrine()->getEntityManager();

    $entity = $em->getRepository('BizTVUserBundle:User')->find($id);

    if (!$entity) {
        throw $this->createNotFoundException('Unable to find Container entity.');
    }

      //run some action to modify one of the variables of $entity

    $entity->setUsername($username_stripped); //put my edited variable into the object, now we're ready to pass my new and improved $entity to the formBuilder...

    $editForm = $this->createForm(new editUserType(), $entity);

    return $this->render('BizTVUserBundle:Default:editUser.html.twig', array(
        'entity'      => $entity,
        'edit_form'   => $editForm->createView(),
    ));
} 
```

# google-apps-script - Need a good reference for Google Generic Widget class

> ID：12012524
> 
> 赞同：0
> 
> 时间：2012-08-17T20:06:42.397
> 
> 标签：google-apps-script

I want to see all the methods that I can use on a Generic Widget in Google Apps script, but I can't find anything unsubstantial.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T20:54:53.337

有两种方法可以查看所有**公共**方法。以下代码执行此操作

```
function test() {
  var app = UiApp.getActiveApplication();
  // Method 1
  var functions1 = Object.keys(app);
  // Method 2
  var functions2 = [];
  for (var f in app) {
    functions2.push(f);
  }
} 
```

数组`functions1`和`functions2`包含任何对象的相同公共函数列表，也包含任何通用小部件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T20:09:46.193

你看到了吗？： http: [//google-web-toolkit.googlecode.com/svn/javadoc/1.6/com/google/gwt/user/client/ui/Widget.html](http://google-web-toolkit.googlecode.com/svn/javadoc/1.6/com/google/gwt/user/client/ui/Widget.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T22:53:17.287

我认为这是您正在寻找的链接。 [https://developers.google.com/apps-script/class_widget](https://developers.google.com/apps-script/class_widget)

请记住，Apps 脚本是基于 Google 的 Web Toolkit（在 App 引擎服务中使用）构建的。您可以查看它以更好地了解事物的工作方式。但是，Apps Script 是另一项服务，您很快就会看到，每次在 Apps Script 中实现一个小部件时，它的属性和方法都会减少。

[最后，您可以随时在http://code.google.com/p/google-apps-script-issues/](http://code.google.com/p/google-apps-script-issues/)上发布功能请求。如果其他人对其“加注”足够多，谷歌可能会执行您的请求。这是一个相当诚实的系统，他们确实根据它优先考虑他们的努力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T21:25:36.743

我不知道是否有人会有用，但如果您想节省一些时间，这里列出了您可以在 Google 的 Generic Widget 上使用的所有方法。随意填写任何方法的一些信息。

```
addKeyPressHandler, 
setReadOnly, 
setDialogTitle, 
setStylePrimaryName,
 addMouseDownHandler, 
addBeforeSelectionHandler, 
addSubmitCompleteHandler, 
setModal, setGlassEnabled, 
setAutoHideEnabled, 
setWidgetPosition, 
setPreviewingAllNativeEvents,
 addSouth, 
addKeyUpHandler, 
setCellHorizontalAlignment, 
addMouseMoveHandler, 
setTabEnabled,
 setWidgetLeftRight,
 removeRow, 
setLimit, 
addStyleName, 
getId, 
showDatePicker, 
setWidgetBottomHeight, 
setDefaultValue, 
setCommand,
 setPopupPositionAndShow, 
setWidgetLeftWidth, 
setWidgetHorizontalPosition, 
setStyleName, 
setAlwaysShowScrollBars, 
addMouseWheelHandler, 
setHref, 
addTab, 
addSubmitHandler, 
setItemSelected, 
hideDatePicker, 
remove, 
addLoadHandler, 
setItemText, 
setVisibleRect, 
addItem, 
setLayoutData, 
showDocsPicker, 
clear, 
insertRow, 
setFormValue, 
setUrl, 
setWidgetVerticalPosition, 
addEast, 
setAction, 
removeCell,
setCellHeight, 
setId, 
addWest, 
addClickHandler,
 setCharacterWidth, 
setCaptionText, 
setTabText, 
setCellWidth, 
addScrollHandler, 
setScrollPosition, 
setVisible,
 setUserObject, 
setVisibleLines, 
setMaxLength,
 setSelectionRange,
 setMethod,
 setSelectedIndex,
 addMouseOverHandler,
addNorth, 
setWordWrap,
 removeItem,
 addCloseHandler,
 setStyleAttribute,
 setCellPadding,
 insertCell, 
addChangeHandler,
 setText,
 setContentWidget, 
setGlassStyleName, 
resize, 
setTarget,
 setAccessKey, 
addAutoHidePartner, 
setTag, 
setInitialView, 
setSelectedItem,
 addView,
 setBorderWidth, 
setSubMenu,
 removeCells, 
setCurrentMonth, 
setTextAlignment, 
setID, 
addFocusHandler, 
setVerticalAlignment, 
setPixelSize,
 setTabIndex, 
selectTab, 
setResource, 
setWidgetTopHeight,
 setFormat, 
setStackText, 
setVisibleLength, 
addSeparator,
 setTitle, 
setVisibleItemCount, 
setHeight, 
setSpacing,
 addMouseOutHandler,
 toString, 
addMouseUpHandler,
 setPopupPosition,
 setName, 
setWidgetTopBottom, 
setHorizontalScrollPosition, 
setTargetHistoryToken,
setCellSpacing, 
setPopupStyleName, 
getTag, 
addCell, 
addStyleDependentName, 
setDown, 
addInitializeHandler, 
setWidget, 
setChecked,
 add, 
addKeyDownHandler, 
setCursorPos, 
getType, 
setEnabled, 
setState, 
setWidth, 
setUrlAndVisibleRect, 
setFocus, 
setDirection, 
addErrorHandler,
 addValueChangeHandler, 
setSize, 
addSelectionHandler, 
addBlurHandler,
 setMultiSelectEnabled,
 setValue, 
setHorizontalAlignment, 
setEncoding,
 setAutoSelectEnabled,
 setAutoOpen,
 setWidgetMinSize,
 setCellVerticalAlignment,
 setWidgetRightWidth,
 setAnimationEnabled,
 setSelected, 
setHTML 
```

# php - 变量解析PHP中的解析错误

> ID：12012526
> 
> 赞同：-1
> 
> 时间：2012-08-17T20:07:14.167
> 
> 标签：php

以下是我目前正在使用的代码：

```
 $form = "
  <form action='echo htmlentities($_SERVER["PHP_SELF"]);' method='post'>
  <table>
  <tr>
  <td>Username</td>
  </td><input type='text' name='user' value='$getuser' /></td>
  </tr>
  </table>
  </form>";

  ?> 
```

上面的代码给了我这个错误：

```
Parse error: syntax error, unexpected '"', expecting T_STRING or T_VARIABLE or T_NUM_STRING in ... on line 27 
```

如果我将 this: 更改`["PHP_SELF"]`为 this `['PHP_SELF']`，则会收到此错误：

```
Parse error: syntax error, unexpected T_ENCAPSED_AND_WHITESPACE, expecting T_STRING or T_VARIABLE or T_NUM_STRING in ... on line 27 
```

如何修复上面的表单操作，使其停止返回解析错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T20:09:45.710

将其更改为：

```
<form action='echo htmlentities($_SERVER["PHP_SELF"]);' method='post'> 
```

到：

```
<form action='" . htmlentities($_SERVER["PHP_SELF"]) . "' method='post'> 
```

您正在使用双引号字符串构建 HTML；所以当 PHP 看到双引号分隔`"PHP_SELF"`时，它假设第一个终止你的字符串。然后它尝试解析`PHP_SELF`，但不能这样做。

请参阅有关字符串的[文档以获取更多参考。](http://us.php.net/manual/en/language.types.string.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T20:09:58.300

改变：

```
<form action='echo htmlentities($_SERVER["PHP_SELF"]);' method='post'> 
```

到

```
<form action='" . htmlentities($_SERVER["PHP_SELF"]) . "' method='post'> 
```

您已经在 PHP 中并正在构建一个字符串，因此不需要在字符串中使用 echo。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-17T20:12:07.267

删除`$form`变量并将 HTML 代码放在 PHP 右括号之外：

```
<?php
//php code

?>

<form action="<?php echo htmlentities($_SERVER["PHP_SELF"]);?>" method="post">
<table>
<tr>
<td>Username</td>
</td><input type='text' name='user' value='<?php echo $getuser; ?>' /></td>
</tr>
</table>
</form> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-17T20:11:14.917

您忘记`.`在这一行使用 PHP 中的连接

```
<form action='echo htmlentities($_SERVER["PHP_SELF"]);' method='post'> 
```

你应该写

```
<form action='" . htmlentities($_SERVER["PHP_SELF"]) . "' method='post'> 
```

# php - 强制谷歌图片搜索

> ID：12012528
> 
> 赞同：0
> 
> 时间：2012-08-17T20:07:22.043
> 
> 标签：php, html, image, google-custom-search

我有一个简单的网站，其中顶部内容是一个导航选项卡，其中包含两个导航列表：Web 和 Image。在导航选项卡下，我有一个谷歌自定义搜索搜索元素/栏。web 选项卡默认选择为 web。

默认情况下，谷歌自定义搜索将搜索网络，有什么方法可以强制它通过 php 或可选的 javascript 搜索图像。因此，当在导航菜单中设置图像选项卡时，它将搜索谷歌图像而不是网络？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T20:19:51.703

我认为您基本上可以创建自己的 Google 图片搜索表单。要知道的最重要的事情是图像搜索的 URL 如下所示：

```
http://www.google.com/search?site=imghp&tbm=isch&q=Glee 
```

（其中“欢乐合唱团”是您的搜索词）。

这是表单的一个简单示例，HTML：

```
<h1>Google Image Search</h1>
<input type = "text" id = "srchterm"/>
<button type = "button" onclick = "reDirect();">Search!</button> 
```

JavaScript：

```
function reDirect() {
    window.location = 'http://www.google.com/search?site=imghp&tbm=isch&q=' + document.getElementById('srchterm').value;
} 
```

希望对您有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:19:14.230

看看这个网址：

[http://www.google.com/search?tbm=isch&q=queen](http://www.google.com/search?tbm=isch&q=queen)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-25T20:07:31.917

希望这篇文能有用是达到30字

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Copia Google</title>
</head>
<body>
    <form method=get action="http://www.images.google.com/images">
        <input type="search" name="q" >
        <br>
        <button type="submit">------</button>
    </form>
</body>
</html> 
```

# qt-creator - 未找到 QML 模块错误

> ID：12012535
> 
> 赞同：5
> 
> 时间：2012-08-17T20:08:11.347
> 
> 标签：qt-creator, qml

使用 QtCreator 时，我在编辑器中显示一个 qml 文件。qml 文件用于名为`main.qml`插件的文件。

然后我点击`Design`按钮。它显示错误消息：`QML module not found`。

如果我获取`Go to error`链接，它将转到包含以下内容的行`import com.name.os.app.all 1.0`。这是插件所需的各种组件 qml 文件的位置。

我已将路径添加`c:\users\me\ui\viewer\`到我的`QML_IMPORT_PATH` `env`变量。如果 QtCreater 将`com.name...`from qml 文件导入语句附加到我添加到的路径名`QML_IMPORT_PATH`，它将找到所需的目录。它没有。

该项目使用qmake。

我尝试使用为我的主 qml 视图容器文件`qmlplugindump.exe`生成一个`qmltypes`文件，但`qmlplugindump.exe`给我一个错误，说`component is not ready`and `file::///c:/Users/name/ui/viewer/modules/app/qml/com/name/os/app/all/typelist.qml:2:1 module MyViewContainer.qml is not installed`。

我使用的命令是`qmlplugindump.exe MyViewContainer.qml 1.0 c:\users\myname\ui\viewer\modules\app\qml\com\name\os\app\all\ > ...`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-03-31T10:59:23.663

**这个错误毁了我的生活**“QML 模块未找到错误”的
**真正解决方案**
： 假设您在这样的目录中有插件，其中包含 qmldir， `"myproject/modules/mymodule/blabla.qmldir"`
您需要在“.pro”文件中导入这样的父目录：

```
QML_IMPORT_PATH += $$PWD/modules 
```

不像这样（这个不行）： //---------------------------- ------- 旁注： 这也会发生在 qml 的其他部分，就像**qmlplugindump**你需要给父目录而不是确切的文件夹！但**windeployqt**正在使用确切的文件夹
~~`QML_IMPORT_PATH += $$PWD/modules/mymodule`~~

 ****例如：

```
qmlplugindump lib 1.0 C:\Users\Administrator\Documents\projectName\3rdparty > C:\Users\Administrator\Documents\projectName\3rdparty\lib\lib.qmltypes 
```

//------------------------------------------------
和第二大重要的部分是Qt Creator 中的**QML 仿真层**
转到**工具->选项->Qt Quick->Qt Quick Designer**
选择“**使用使用所选 qt 构建的 Qml 仿真层**” ，
如果它已经被选中，请查看该“顶层”下的文本框构建路径”
它应该引用 Qt 版本的 bin 目录，它应该与插件 Qt 版本相同：

```
..\5.12.1\msvc2017\bin 
```

对我来说：（它应该与您用于套件和 blabla 的版本相同）

```
C:\QtN\5.12.1\msvc2017\bin 
```

它不应该是这样的：

 ~~~~```
C:\Users\Administrator\AppData\Roaming\QtProject\qtcreator\qmlpuppet 
```~~ 

 ~~在插件中添加新项目后不要忘记部署（cmd命令）：~~

 ~~```
windeployqt --qmldir C:\Users\Administrator\Documents\projectName C:\Users\Administrator\Documents\build-projectName-5_12-Debug\debug 
```

和插件转储：

```
qmlplugindump lib 1.0 C:\Users\Administrator\Documents\projectName\3rdparty > C:\Users\Administrator\Documents\projectName\3rdparty\lib\lib.qmltypes 
```

此后，如果 QtCreator 为插件中的新对象提供错误，则需要重新启动 QtCreator 就是这样！

如果仍然有问题，您需要 - 清理所有 - 运行 Qmake - 重建所有解决了这么多问题的问题。在某些情况下，您需要将 qml 文件放入`5.13.1\msvc2017\qml`或任何适合您的 qt 版本的文件中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T05:55:58.650

Have you tested this plugin fully? I ask this because I have written a number of plugins and have run into this issue multiple times. Possible issues include the version of Qt you are using, and some form of naming error in the plugin uri / classname.

I have an app that I build for multiple versions of Qt and it seems that the qmlplugindump tool has different levels of effectiveness.

Sorry to be so general, but hopefully it points you in the right direction.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T23:49:55.397

**在 QtCreator 中，执行“项目清理”，然后重新构建。将找到该模块。**

我有同样的问题，偶然发现了你的问题。经过一番努力，“干净”和重建工作。

在构建过程中似乎有一个“不完整的依赖检查”，以“理解”`main.cpp`需要重建，然后将暴露`qmlRegisterType<MyType>()`它以便可以在`main.qml`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-22T08:46:26.430

经过两天的谷歌搜索和头痛，感谢@MoreMag，我终于解决了！我只是在这里写一些要点，希望对大家有所帮助！

## 问题：

[![发现问题的导入文件不起作用](../Images/c7f173c7048acff384c4681df7c796d0.png)](https://i.stack.imgur.com/Bg4SQ.png)

## 解决方案：

① 进入**工具**-> **选项**-> **Qt Quick** -> **QML Emulation Layer**。

②勾选**Use QML emulation layer that build with selected Qt**

③点击**浏览**按钮选择Qt构建环境的bin文件夹。路径格式为*D:\Qt\5.15.2\msvc2019_64\bin*。这里我使用的是 msvc2019 64bit 构建环境。

④ 点击**Apply**按钮并重启Qt creater。**完毕！**

[![解决方案](../Images/c20699c514c0bedfe29121ec979cbae4.png)](https://i.stack.imgur.com/32cwA.png)

[Qt Creator 文档说](https://doc.qt.io/qtcreator/creator-qml-modules-with-plugins.html)

> QML 仿真层（也称为 QML Puppet）在设计模式中用于渲染和预览图像以及收集数据。为了能够从 QML 模块正确呈现自定义类型，必须使用与 QML 模块相同的 Qt 版本构建仿真层。默认情况下，Qt Creator 提供了一个后备仿真层，并使用与 Qt Creator 相同的 Qt 版本构建。因此，您的 QML 模块大多不会开箱即用。

我猜这个问题是由于默认的 QML Emulation 层可能与某些 QML 模块不兼容造成的。就我而言，它是 QtMultimedia 模块。~~~~****

# drupal - 在 Drupal 7 中以编程方式设置数字五星级值

> ID：12012540
> 
> 赞同：3
> 
> 时间：2012-08-17T20:08:54.807
> 
> 标签：drupal, drupal-7, drupal-fivestar

我有一个 Drupal 7 站点，并且在一种内容类型上使用了五星级。该内容类型的某些节点是使用带有 xpath 解析器的 Feed 导入器创建的（其余的则以更传统的 /node/add drupal 方式创建）。对于这些导入的提要，我有一个包含数字评级值（0、20、40、60、80、100）的传入字段，我想将其添加到我的五星级字段中，以便可以跟踪这些评级并以方式与drupal创建的节点一致。

我的问题是我的 Fivestar 字段 (field_rating) 没有作为 xpath 解析器导入的目标出现。有没有办法拉这个评级，或者有人可以指出我以编程方式设置这个 Fivestar 字段值的方法？

更新：我找到了 _fivestar_cast_vote，但无法将其用于我尝试使用的字段，即“编辑时评级”。我可以将 _fivestar_cast_vote 用于同一节点上的“查看时评级”的不同五星级字段，所以我觉得我的语法是正确的。对于“编辑时评级”字段，我使用的是在导入时分配内容的用户的 uid...为了测试，我在 node--*.tpl.php 文件中执行此操作，并且如果我能让它工作，可能会转向一个 cron 钩子......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T23:23:46.050

我花了一段时间才找到这个，但它是这样以编程方式创造五星级价值的

$node->field_name_of_your_field[$node->language][0]['rating'] = 20;

打开Devel 并浏览（对象）stdClass，它出现在节点的Devel 选项卡下。

李

# django - 带有 slug 的 Django Tastypie 前缀 URL 资源

> ID：12012541
> 
> 赞同：1
> 
> 时间：2012-08-17T20:08:58.747
> 
> 标签：django, api, rest, tastypie

我正在尝试构建如下 API：

```
api/v1/<client_slug>/track/expenses 
```

`/clients`但是，至少在此时，我并没有真正需要返回的任何数据，所以我希望避免必须创建一个 ClientResource 来遵循 REST 标准。下面是我的 ExpenseResource 的一个示例。

```
class ExpenseResource(ModelResource):
    class Meta:
        resource_name = 'expenses'
        queryset = Expense.objects.all() # Wish to filter by client_slug
        include_resource_uri = False

        authentication = OAuthTokenAuthentication()
        authorization = Authorization() # allow GET/PUT/POST/DELETE/PATCH

    def prepend_urls(self):
        return [
            url(r"^track/(?P<resource_name>%s)/$" % self._meta.resource_name, self.wrap_view('dispatch_list'), name='api_dispatch_list'),
            url(r"^track/(?P<resource_name>%s)/(?P<pk>\w[\w/-]*)/$" % self._meta.resource_name, self.wrap_view('dispatch_detail'), name='api_dispatch_detail'),
        ] 
```

**将client_slug**包含在我的 中的最佳处理方法是什么`ExpenseResource`？我想通过提供的**client_slug**过滤我的费用，我应该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T02:37:23.397

其实很简单。您可以覆盖`base_urls()`或使用`override_urls()`或`prepend_urls()`提供接受的自定义 URL `client_slug`。

对于每个资源，Tastypie 执行以下操作：

```
def base_urls(self):
    """
    The standard URLs this ``Resource`` should respond to.
    """
    # Due to the way Django parses URLs, ``get_multiple`` won't work without
    # a trailing slash.
    return [
        url(r"^(?P<resource_name>%s)%s$" % (self._meta.resource_name, trailing_slash()), self.wrap_view('dispatch_list'), name="api_dispatch_list"),
        url(r"^(?P<resource_name>%s)/schema%s$" % (self._meta.resource_name, trailing_slash()), self.wrap_view('get_schema'), name="api_get_schema"),
        url(r"^(?P<resource_name>%s)/set/(?P<pk_list>\w[\w/;-]*)/$" % self._meta.resource_name, self.wrap_view('get_multiple'), name="api_get_multiple"),
        url(r"^(?P<resource_name>%s)/(?P<pk>\w[\w/-]*)%s$" % (self._meta.resource_name, trailing_slash()), self.wrap_view('dispatch_detail'), name="api_dispatch_detail"),
    ] 
```

您需要的是以下内容：

```
 return [
        url(r"^(?P<client_slug>\w+)/(?P<resource_name>%s)%s$" % (self._meta.resource_name, trailing_slash()), self.wrap_view('dispatch_list'), name="api_dispatch_list"),
        url(r"^(?P<client_slug>\w+)/(?P<resource_name>%s)/schema%s$" % (self._meta.resource_name, trailing_slash()), self.wrap_view('get_schema'), name="api_get_schema"),
        url(r"^(?P<client_slug>\w+)/(?P<resource_name>%s)/set/(?P<pk_list>\w[\w/;-]*)/$" % self._meta.resource_name, self.wrap_view('get_multiple'), name="api_get_multiple"),
        url(r"^(?P<client_slug>\w+)/(?P<resource_name>%s)/(?P<pk>\w[\w/-]*)%s$" % (self._meta.resource_name, trailing_slash()), self.wrap_view('dispatch_detail'), name="api_dispatch_detail"),
    ] 
```

只需使用上述方法之一来提供这些方法，然后我相信`client_slug`它将`kwargs[ 'client_slug' ]`在所有接受的 Tastypie 方法中可用`**kwargs`。

我没有测试它，但给出：

```
 objects = self.obj_get_list(request=request, **self.remove_api_resource_names(kwargs)) 
```

它`get_list()`甚至可以为您过滤开箱即用的客户费用。

# eclipse - 什么 Eclipse GEF 软件包包含 Draw2d？

> ID：12012543
> 
> 赞同：0
> 
> 时间：2012-08-17T20:09:13.913
> 
> 标签：eclipse, draw2d

我正在尝试获取 Eclipse GEF 包“Draw2d”。

什么 Eclipse GEF 软件包包含 Draw2d？当我搜索它时，列表中没有任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:12:24.277

看看下面的更新站点。

您可以使用**[以下](http://www.eclipse.org/gef/updates/index.php)**更新站点之一：

```
Nightly (not promoted to download.eclipse.org): https://hudson.eclipse.org/hudson/job/gef-master/lastSuccessfulBuild/artifact/update-site/ and https://hudson.eclipse.org/hudson/job/gef-maintenance/lastSuccessfulBuild/artifact/update-site/
Releases: http://download.eclipse.org/tools/gef/updates/releases/
Milestones: http://download.eclipse.org/tools/gef/updates/milestones/
Integration and Maintenance: http://download.eclipse.org/tools/gef/updates/interim/ 
```

如果你喜欢使用整个 P2 Repo 或 dropin，你可以从这里下载它们：http: [//www.eclipse.org/gef/downloads/](http://www.eclipse.org/gef/downloads/)

使用`http://download.eclipse.org/tools/gef/updates/releases/`更新站点时会发生什么？它列出 D2D 吗？

**更新**

`All-in-one`可以安装GEF SDK，因为它包含 Draw2D，如下所示：

![在此处输入图像描述](../Images/8bb7de6af2fb74dd52bdfd779254516e.png)

# c++ - NPM Module Canvas 要求在 OSX Mountain Lion 上安装 c++ 库的程序是什么？

> ID：12012544
> 
> 赞同：0
> 
> 时间：2012-08-17T20:09:17.663
> 
> 标签：c++, node.js, libraries, osx-mountain-lion

我正在尝试安装 canvas npm 模块，这是一个已知的麻烦制造者！它需要三个库：gif、jpeg 和 cairo。这基本上是一台新机器。让这些库可供 npm 使用的最佳方法是什么？

```
$ npm install canvas
npm http GET https://registry.npmjs.org/canvas
npm http 304 https://registry.npmjs.org/canvas

> canvas@0.12.1 preinstall node_modules/canvas
> node-waf configure build

    Checking for program g++ or c++          : /usr/bin/g++ 
    Checking for program cpp                 : /usr/bin/cpp 
    Checking for program ar                  : /usr/bin/ar 
    Checking for program ranlib              : /usr/bin/ranlib 
    Checking for g++                         : ok  
    Checking for node path                   : ok /usr/local/lib/node 
    Checking for node prefix                 : ok /usr/local 
    Checking for library gif                 : not found 
    Checking for library jpeg                : not found 
    Checking for cairo                       : not found 
    node_modules/canvas/wscript:30: error: the configuration failed (see 'node_modules/canvas/build/config.log') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:12:28.733

Mac [homebrew](https://brew.sh/)至少可以帮助您安装这些库。我知道它可以为你安装 cairo。当您尝试编译画布时，您可能需要调整一些库标志，但它可能只是开箱即用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:26:28.140

[Macports](http://www.macports.org/)相当轻松地做到了这一点

# ruby-on-rails - 有没有办法通过 Rails 检查打开/点击率、电子邮件的退回？

> ID：12012546
> 
> 赞同：1
> 
> 时间：2012-08-17T20:09:26.047
> 
> 标签：ruby-on-rails, email

我目前正在尝试从 Rails 应用程序发送电子邮件，并想检查这些电子邮件的打开/点击率。（不使用任何网络服务）我可以使用 gem 或插件来帮助我找出答案吗？或者甚至有可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:18:24.673

看看这里：

[http://www.codingforums.com/archive/index.php/t-122920.html](http://www.codingforums.com/archive/index.php/t-122920.html)

我认为第一个提到的方法，检测图像被查看了多少次将是最简单的。再说一次，这些不是精确的解决方案，但我认为一个精确的解决方案将是一种安全漏洞（即，一旦您打开电子邮件，就向外部服务器发送 HTTP 请求）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:57:55.367

Varatis 是正确的，使用图像跟踪是最常见的完成方式，也是大多数 Web 服务为您提供分析他们代表您发送的电子邮件的方式。这是[另一个 Stack Overflow 问题](https://stackoverflow.com/questions/3525145/email-open-notification-ruby-on-rails)，其中包含如何在 Rails 中执行此操作的示例。

# sql - 使用 VBA Access 一次插入多条记录

> ID：12012547
> 
> 赞同：2
> 
> 时间：2012-08-17T20:09:28.230
> 
> 标签：sql, vba, ms-access-2007

我试图避免使用多个 INSERT SQL 查询，但如果我必须这样做的话。我在[那里](http://blog.sqlauthority.com/2007/06/08/sql-server-insert-multiple-records-using-one-insert-statement-use-of-union-all/)读到你可以简单地使用，`INSERT INTO table(field) SELECT 'value' UNION ALL SELECT ...`但是我在 MS Access 2007 下遇到了它的语法问题。我尝试了一些变体，但没有一个有效：我总是得到“不正确的语法”或“缺少运算符”错误。我尝试过使用和不使用`ALL`限定符，使用和不使用`SELECT`关键字等。以下是我使用 VBA 创建查询的方式：

```
sql_query = "INSERT INTO " & tmp_tbl_name & " (transit)"
For Each xlCell In xlRange
    sql_query = sql_query & " SELECT '" & xlCell.Value & "' "
    sql_query = sql_query & "UNION"
Next xlCell
sql_query = Mid(sql_query, 1, Len(sql_query) - 6)
DoCmd.RunSQL (sql_query) 
```

这是我正在生成的查询的简短示例：

```
INSERT INTO tmp_tbl_2012_08_17_15_44_03 (transit) 
SELECT 'L02_NA010001' 
  UNION 
SELECT 'L13_PB010001' 
  UNION 
SELECT 'L31_US020001' 
  UNION 
SELECT 'L33_EX020010'
  ... 
```

该表只有一个`VARCHAR(255)`字段，与任何其他表没有关系（它是一个临时表，用于处理一些事情并只保留其中的一些元素）。

非常感谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T20:22:16.610

我认为你可以使用好的 ol' DAO 来相当快地做到这一点：

```
Dim db As DAO.Database
Dim rs As DAO.Recordset

Set db = CurrentDb
Set rs = db.OpenRecordset("tmp_tbl_2012_08_17_15_44_03", dbOpenDynaset)

For Each xlCell In xlRange
    With rs
        .AddNew
        .Fields("transit") = xlCell.Value
        .Update
    End With
Next xlCell

rs.Close
db.Close 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T20:13:09.827

在 MS Access 中一次运行一个语句可能会更容易，UNION 将需要每个 UNION 语句的 FROM 表，这意味着 FROM 表必须只包含一行，或者一些花哨的步法。

```
INSERT INTO tmp_tbl_2012_08_17_15_44_03 (transit) 
SELECT Transit FROM (
SELECT DISTINCT 'L02_NA010001' As Transit FROM tablename
  UNION 
SELECT DISTINCT 'L13_PB010001' As Transit FROM tablename
  UNION  ... ) 
```

# php - 查询两个表以获取不同/单独的值

> ID：12012551
> 
> 赞同：1
> 
> 时间：2012-08-17T20:09:39.383
> 
> 标签：php, mysql

我有两张桌子：

任务
ID 名称到期日期完成项目 ID

项目
ID 名称到期日期完成

我需要在两个表中查询具有相同数据的行。我尝试做一个示例语句，只查找已完成 = 0 的行，但从未得到任何结果。我认为这与使用 OR 而不是 AND 有关，但它现在只是略高于我的水平......有什么想法吗？

澄清一下，我不是在寻找重复的行，而是在寻找“所有已完成 = 0 的任务和项目”

查询是：

```
SELECT * FROM "task" t, "project" p WHERE t.dueDate = "2012-08-17" OR p.dueDate = "2012-08-17" AND t.completed = 0 OR p.completed = 0 
```

* * *

`isProject`我确实设法让其中一个答案的代码起作用，但是我意识到我的整个应用程序都是为与一个表对话而编写的，并且将任务和项目表结合起来并使用列来区分会容易得多来自任务的项目。这也增加了在项目中嵌套项目的能力，因为项目现在也将有一个`projectID`列。

最后，KISS胜出……

感谢所有的帮助！我会标记有效的答案，即使我不会使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:14:15.223

尝试使用括号。

```
SELECT * FROM "task" t, "project" p WHERE (t.dueDate = "2012-08-17" OR p.dueDate = "2012-08-17") AND (t.completed = 0 OR p.completed = 0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T20:19:03.630

如果您只想要两个表中的值匹配，并且从 dueDate='2012-08-17' 完成 = 0：

您可以使用 join 将该表结果绑定为一个。内连接将只返回双方都匹配的结果。因此，您可以使用它在两个表中匹配它们，然后通过经典过滤您想要的值，其中：

```
select * from task t inner join project p on t.dueDate = p.dueDate and t.completed = p.completed
where t.dueDate = '2012-08-17' and t.completed = 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T20:17:17.763

试试这个：

```
SELECT dueDate, completed
FROM task AS t 
WHERE (dueDate = "2012-08-17" AND completed = 0)
UNION ALL
SELECT dueDate, completed
FROM project AS p
WHERE (dueDate = "2012-08-17" AND completed = 0) 
```

这应该为您提供每个表中的所有记录 where`dueDate = "2012-08-17"`和`completed = 0`.

# sharepoint - 如何隐藏共享点模式框上的功能区，滚动条也不起作用

> ID：12012552
> 
> 赞同：4
> 
> 时间：2012-08-17T20:09:44.533
> 
> 标签：sharepoint, sharepoint-2010

模态对话框选项

```
function Myfunction() {

    var clientContext = new SP.ClientContext.get_current();
    var options = {
        url: clientContext.get_url() + "/_layouts/Page1.aspx",
        showMaximized: true,  

        //width: 950,  
        //height: 1000,  
        dialogReturnValueCallback: myCallback
    };
    SP.UI.ModalDialog.showModalDialog(options);
    return false;
}

function myCallback(dialogResult, returnValue) {
} 
```

我试图隐藏模式框上的功能区..我在 Page1.aspx 上添加了以下 css

```
<style type="text/css">  
.s4-notdlg
{
   display:none;
} 
```

它仅隐藏站点操作部分和用户的登录名。我的页面上仍然有丝带的黑色厚图像。我希望隐藏完整的功能区。此外，滚动条出现在页面上，但它们不会完全滚动到页面底部。

有人请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T08:49:20.930

```
body{overflow:auto !important;}
#s4-leftpanel { display: none;}
.s4-ca {margin-left:0px !important;}
#s4-ribbonrow{height:auto !important;min-height:0px !important;}
#s4-ribboncont{display:none;}
#s4-titlerow{ display:none;}
.s4-ba {width:100%; min-height:0px !important;}
#s4-workspace{float:left;width:100%; overflow:auto  !important;}
body #MSO_ContentTable{min-height:0px !important;position:inherit;} 
```

在您的 page1.aspx 中使用上面的 css

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-04T09:00:51.847

在 sharepoint 2013 中，以下 CSS 为我工作：

```
.ms-dialog #s4-ribbonrow { 
    display: none;
} 
```

# php - 使用 PHP 从 html 表单转换为 PDF

> ID：12012555
> 
> 赞同：4
> 
> 时间：2012-08-17T20:09:47.270
> 
> 标签：php, html, forms, pdf, pdftk

> **可能重复：**
> [使用 PHP 填写 PDF 表单](https://stackoverflow.com/questions/77873/filling-pdf-forms-with-php)

我已经寻找和测试了几天了，想知道是否有人可以指出我不同的方向。我有一个很长的工作申请 HTML 表单 (jobapp.html) 和一个匹配的 PDF (jobpdf.pdf)，它们对于 HTML 表单和 PDF 中的所有条目具有相同的字段名称。我需要获取表单中输入的用户数据并将其转换为 PDF。这是我到目前为止收集的内容，但不知道我是否走上了正轨：

pdftk 是唯一可行的第 3 方应用程序吗？

使用 pdftk 我会获取为用户收集的 $_POST 数据并生成 .fdf(user.fdf) 然后将 .fdf 展平在 .pdf(job.pdf) 上。因此，无论每个文档上的字段位于何处，fdf 上的信息都会按字段名称填充 pdf？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T21:59:13.613

试试[mPDF](http://www.mpdf1.com/mpdf/index.php)。它从 HTML 和 CSS 生成 PDF。它不能理解您可能想要的所有内容，但对于格式相对简单的文档来说它很好。

# c# - 登录失败：用户在这台计算机上没有被授予请求的登录类型

> ID：12012558
> 
> 赞同：5
> 
> 时间：2012-08-17T20:10:06.817
> 
> 标签：c#, asp.net, impersonation

我有一个网站，我在其中创建一个文件并将其保存在远程共享文件夹中。我有一个对该共享文件夹具有写入权限的帐户。因此，我在将文件保存在该路径中时模拟了该帐户。当我在我的机器上本地从我的 Visual Studio 运行应用程序时，此逻辑有效。当我在开发服务器中部署代码时，它不起作用。我收到以下错误。

“登录失败：用户未在此计算机上获得请求的登录类型”

有人可以帮忙吗？

这是来自codeproject的模拟代码

```
using System;
using System.Security.Principal;
using System.Runtime.InteropServices;
using System.ComponentModel;

public class Impersonator :
    IDisposable

{

public Impersonator(
    string userName,
    string domainName,
    string password)
{
    ImpersonateValidUser(userName, domainName, password);
}

// ------------------------------------------------------------------
#endregion

#region IDisposable member.
// ------------------------------------------------------------------

public void Dispose()
{
    UndoImpersonation();
}

// ------------------------------------------------------------------
#endregion

#region P/Invoke.
// ------------------------------------------------------------------

[DllImport("advapi32.dll", SetLastError = true)]
private static extern int LogonUser(
    string lpszUserName,
    string lpszDomain,
    string lpszPassword,
    int dwLogonType,
    int dwLogonProvider,
    ref IntPtr phToken);

[DllImport("advapi32.dll", CharSet = CharSet.Auto, SetLastError = true)]
private static extern int DuplicateToken(
    IntPtr hToken,
    int impersonationLevel,
    ref IntPtr hNewToken);

[DllImport("advapi32.dll", CharSet = CharSet.Auto, SetLastError = true)]
private static extern bool RevertToSelf();

[DllImport("kernel32.dll", CharSet = CharSet.Auto)]
private static extern bool CloseHandle(
    IntPtr handle);

private const int LOGON32_LOGON_INTERACTIVE = 2;
private const int LOGON32_PROVIDER_DEFAULT = 0;

// ------------------------------------------------------------------
#endregion

#region Private member.
// ------------------------------------------------------------------

/// <summary>
/// Does the actual impersonation.
/// </summary>
/// <param name="userName">The name of the user to act as.</param>
/// <param name="domainName">The domain name of the user to act as.</param>
/// <param name="password">The password of the user to act as.</param>
private void ImpersonateValidUser(
    string userName,
    string domain,
    string password)
{
    WindowsIdentity tempWindowsIdentity = null;
    IntPtr token = IntPtr.Zero;
    IntPtr tokenDuplicate = IntPtr.Zero;

    try
    {
        if (RevertToSelf())
        {
            if (LogonUser(
                userName,
                domain,
                password,
                LOGON32_LOGON_INTERACTIVE,
                LOGON32_PROVIDER_DEFAULT,
                ref token) != 0)
            {
                if (DuplicateToken(token, 2, ref tokenDuplicate) != 0)
                {
                    tempWindowsIdentity = new WindowsIdentity(tokenDuplicate);
                    impersonationContext = tempWindowsIdentity.Impersonate();
                }
                else
                {
                    throw new Win32Exception(Marshal.GetLastWin32Error());
                }
            }
            else
            {
                throw new Win32Exception(Marshal.GetLastWin32Error());
            }
        }
        else
        {
            throw new Win32Exception(Marshal.GetLastWin32Error());
        }
    }
    finally
    {
        if (token != IntPtr.Zero)
        {
            CloseHandle(token);
        }
        if (tokenDuplicate != IntPtr.Zero)
        {
            CloseHandle(tokenDuplicate);
        }
    }
}

/// <summary>
/// Reverts the impersonation.
/// </summary>
private void UndoImpersonation()
{
    if (impersonationContext != null)
    {
        impersonationContext.Undo();
    }
}

private WindowsImpersonationContext impersonationContext = null;

// ------------------------------------------------------------------
#endregion 
```

}

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-25T18:55:45.607

我自己找到了答案。我将登录类型更改为 8 并且它有效.. 谢谢大家

# ruby-on-rails - Node.js PUT 或 POST 请求到 Rails 3 服务器

> ID：12012559
> 
> 赞同：2
> 
> 时间：2012-08-17T20:10:13.563
> 
> 标签：ruby-on-rails, node.js

我正在尝试从 Node.js 向我的 Rails 3 服务器发出 PUT 和/或 POST 请求。我在正文中传递了我的参数，但它们没有变成 Rails 控制器中的参数散列。我的代码如下：

```
http = require('http');
request = require('request');
qs = require('qs');

data = qs.stringify({name: 'Aaron', points: 10});
request_opts = {
  uri: 'http://localhost:3000/users/update',
  method: 'PUT',
  body: data
}

request(request_opts, function() { console.log(arguments) }); 
```

我在我的 Rails 控制器中放置了一个调试器，params 为 nil，但`response.body.read`返回我在`data`.

如何从参数与 Rails 兼容的 Node.js 发出 PUT / POST 请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:19:57.770

该`querystring`模块会将您的数据序列化为参数编码形式。默认情况下，rails 需要一个 JSON 序列化实体。您应该使用`JSON.stringify`而不是`qs.stringify`将您的用户序列化到请求正文中。或者，您可以显式指定一个 content-type 标头来`application/x-www-form-urlencoded`告诉 rails 您要发送的正文的类型。

# haskell - 转换其元素类型参数化其类型编码索引的列表

> ID：12012569
> 
> 赞同：1
> 
> 时间：2012-08-17T20:11:04.017
> 
> 标签：haskell, functional-programming, type-safety, gadt, successor-arithmetics

我正在尝试实现类型安全的[二项式堆](https://en.wikipedia.org/wiki/Binomial_heap)。为此，我有两种数据类型，它们的元素类型由它们的类型编码索引参数化：

```
data Zero
data Succ a = Succ

{-| A GADT representation of lists with type-encoded length.
    Unlike the most common implementation, the type paramater
    for values is of kind * -> *. Each element type is
    parametrized by its index (counting from the end of the vector),
    so the type-encoded numbers decrease from start to end.
-}
data Vec n a where
    Nil  ::                   Vec Zero a
    Cons :: a n -> Vec n a -> Vec (Succ n) a

{-| A GADT representation of lists whose values are of kind
    * -> *. Each element type is parametrized by its by its
    index (counting from the start of the vector), so the
    type-encoded numbers increase from start to end.
    Unlike Vec the type-encode number here doesn't represent
    the length, it can be arbitrary (just increasing).
-}
data RVec n a where
    RNil  ::                           RVec n a
    RCons :: a n -> RVec (Succ n) a -> RVec n a 
```

`Vec`使用递减的数字参数对值进行编码，其中最后一个元素始终由 参数化`Zero`。`RVec`使用增加的数字参数对值进行编码，没有其他限制（这就是为什么`RNil`可以产生`RVec`任何数字的原因）。

这允许我（例如）拥有一个高度增加/减少的树木列表，由类型系统检查。在实现了我的大部分项目之后，我意识到我需要一个看似简单的函数，但我无法实现：

```
vreverse :: Vec n a -> RVec Zero a 
```

它应该简单地颠倒给定列表的顺序。有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T21:38:15.570

我相信我找到了答案：

```
vreverse :: Vec n a -> RVec Zero a
vreverse v = f1 v RNil
  where
    f1 :: Vec n a -> (RVec n a -> RVec Zero a)
    f1 Nil = id
    f1 (Cons x xs) = f1 xs . RCons x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T19:12:25.193

供您参考，[Monad.Reader 第 16 期的第三篇文章](http://themonadreader.wordpress.com/2010/05/12/issue-16/)……嗯，我写的……讨论了 Haskell 中的类型安全二项式堆，以及如何正确实现它们。

# html - 无法在 Safari 中渲染 SVG 图像

> ID：12012573
> 
> 赞同：10
> 
> 时间：2012-08-17T20:11:44.543
> 
> 标签：html, safari, web, svg, rendering

正如标题所述，我有一个 svg 图像，但我无法在 safari 和歌剧中渲染它。但它在 Firefox 中运行良好。我找到了这篇文章

[使用 Safari 显示 SVG 的 Doctype 问题](https://stackoverflow.com/questions/6117380/doctype-problem-displaying-svg-with-safari)

其中提到将内容更改为 xhtml。所以，我在我的html页面顶部添加了这个，

```
<meta http-equiv="Content-Type" content="application/xhtml+xml"> 
```

但它仍然不起作用。

我像这样在我的 JS 文件中嵌入 svg 图像

```
this.my_object.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><image xlink:href="img/gauge.png" width="122" height="127"/><g id="needle" transform="rotate(0,62,62)"><circle cx="62" cy="62" r="4" style="fill: #c00; stroke: none"/><rect transform="rotate(-130,62,62)" name="arrow"  x="58" y="38" width="8" height="24" style="fill: #c00; stroke: none"/><polygon transform="rotate(-130,62,62)" points="58,39,66,39,62,30,58,39" style="fill: #c00; stroke: none"/></g><text id="value" x="35" y="103" focusable="false" editable="no" style="stroke:none; fill:#fff; font-family: monospace; font-size: 12px"></text></svg>'; 
```

这可能是原因吗？我不是通过传统机制来调用它。

我也在此处粘贴 svg 代码，

```
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g name="gauge" width="122px" height="127px">
        <image xlink:href="gauging.png" width="122" height="127"/>
    <circle id="led" cx="39" cy="76" r="5" style="fill: #999; stroke: none">
        <animateColor id="ledAnimation" attributeName="fill" attributeType="css" begin="0s" dur="1s"
        values="none;#f88;#f00;#f88;none;" repeatCount="0"/>
    </circle>
        <g id="needle" transform="rotate(0,62,62)">
            <circle cx="62" cy="62" r="4" style="fill: #c00; stroke: none"/>
            <rect transform="rotate(-130,62,62)" name="arrow"  x="58" y="38" width="8" height="24" style="fill: #c00; stroke: none"/>
            <polygon transform="rotate(-130,62,62)" points="58,39,66,39,62,30,58,39" style="fill: #c00; stroke: none"/>
        </g>
        <text id="value" x="51" y="98" focusable="false" editable="no" style="stroke:none; fill:#fff; font-family: monospace; font-size: 12px"></text>
    </g>
</svg> 
```

任何人都可以提出这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T00:12:36.097

对于未来的用户：找到问题的原因。这篇文章[Safari embeded SVG doctype](https://stackoverflow.com/questions/6372695/safari-embeded-svg-doctype?rq=1)的公认答案解释了这个问题。

问题的解决方案：

除此之外，我配置了我的 web.config 文件以添加

```
<staticContent><mimeMap fileExtension=".svg" mimeType="image/svg+xml" /></staticContent> 
```

服务器应发送正确的 Content-Type 标头。

问题解决了！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T22:29:52.497

我最近遇到了这个问题，发现因为我的多边形是自终止的，Safari 6.0.2 不会渲染它们。例如：

不起作用：

```
<polygon points='-3.172,-1.758 -6.208,-4.793 -8,-3 -8,-8 -3,-8 -4.792,-6.207 -1.757,-3.173'> 
```

作品：

```
<polygon points='-3.172,-1.758 -6.208,-4.793 -8,-3 -8,-8 -3,-8 -4.792,-6.207 -1.757,-3.173'/> 
```

# ruby-on-rails - 使用 Rails Active Record 在 IN 列表中的 Postgres ORDER BY 值

> ID：12012574
> 
> 赞同：2
> 
> 时间：2012-08-17T20:11:49.947
> 
> 标签：ruby-on-rails, postgresql, activerecord, sql-order-by, in-clause

我收到按“收入”排序的用户 ID 列表（一次大约 1000 个）。我在“我的系统数据库”中有用户记录，但没有“收入”列。我想从列表中收到的排序顺序中的“我的系统数据库”中检索用户。我尝试使用 Active Record 执行以下操作，期望记录的检索顺序与排序列表中的顺序相同，但它不起作用。

```
//PSEUDO CODE
User.all(:conditions => {:id => [SORTED LIST]}) 
```

我在下面的链接中找到了类似问题的答案，但不确定如何使用 Active Record 实施建议的解决方案。

> [按 IN 值列表排序](https://stackoverflow.com/questions/866465/sql-order-by-the-in-value-list)

还有其他方法吗？

请指导。

沙杜尔。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T19:48:36.197

您链接到的答案正是您所需要的，您只需要以灵活的方式在 Ruby 中对其进行编码。

像这样的东西：

```
class User
  def self.find_as_sorted(ids)
    values = []
    ids.each_with_index do |id, index|
      values << "(#{id}, #{index + 1})"
    end
    relation = self.joins("JOIN (VALUES #{values.join(",")}) as x (id, ordering) ON #{table_name}.id = x.id")
    relation = relation.order('x.ordering')
    relation
  end
end 
```

事实上，你可以很容易地将它放在一个模块中并将它混合到任何需要它的 ActiveRecord 类中，因为它使用`table_name`并且`self`它没有用任何特定的类名实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:15:17.363

MySQL 用户可以通过该`FIELD`函数执行此操作，但 Postgres 缺少它。但是这个问题有解决方法：[Simulating MySQL's ORDER BY FIELD() in Postgresql](https://stackoverflow.com/questions/1309624/simulating-mysqls-order-by-field-in-postgresql)

# php - 试图将 xml 内容发布到 wsdl

> ID：12012578
> 
> 赞同：1
> 
> 时间：2012-08-17T20:12:01.110
> 
> 标签：php, soap, soap-client

我一直在尝试将一些 XML 内容发布到 WSDL URL。当我尝试发布内容时，我收到以下错误**(SOAP-ERROR: Encoding: object has no 'core_submission' property)**。在下面的 XML 内容中有核心提交区域的内容。如果有人可以帮助我解决这个问题，我将不胜感激。

```
 <?php
        $post_string = '<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:roof="http://www.energystar.gov/schema/Roof_Products_2_x/" xmlns:core="http://www.energystar.gov/schema/core/">
           <soapenv:Body>
              <roof:Roof_Products_submission>
                 <core_submission>
                    <core:Authentication_UserName>xx</core:Authentication_UserName>
                    <core:Authentication_Password>xx</core:Authentication_Password>
                    <core:Certification_Body_EPA_Issued_Organization_Id>xx</core:Certification_Body_EPA_Issued_Organization_Id>
                    <core:Is_Test_Submission>Yes</core:Is_Test_Submission>
                 </core_submission>
                 <roof:Roof_Products>
                    <core:core_product_data>
                       <core:ENERGY_STAR_Manufacturing_Partner>QPX Active Partner</core:ENERGY_STAR_Manufacturing_Partner>
                       <core:ENERGY_STAR_Manufacturing_Partner_s_EPA_issued_Organization_ID>xx</core:ENERGY_STAR_Manufacturing_Partner_s_EPA_issued_Organization_ID>
                       <core:Partner_Contact_Name_For_This_Model>Benny</core:Partner_Contact_Name_For_This_Model>
                       <core:Type_of_Transaction>Initial Certification</core:Type_of_Transaction>
                       <core:Reason_for_Transaction>Initial Certification: Model Meets ENERGY STAR Requirements</core:Reason_for_Transaction>
                       <core:Date_of_Transaction_Type>2010-12-31</core:Date_of_Transaction_Type>
                       <core:ENERGY_STAR_Model_Identifier>TestID2929</core:ENERGY_STAR_Model_Identifier>
                       <core:Certification_ID>TestCertID123</core:Certification_ID>
                       <core:Family_ID>TestFamID123</core:Family_ID>
                       <core:Model_Name>Model_Name1234</core:Model_Name>
                       <core:Model_Number>Model_Number33453</core:Model_Number>
                       <core:Brand_Name>Brand_Name1</core:Brand_Name>
                       <core:Tested_Model_Name>Tested_Model_Name1</core:Tested_Model_Name>
                       <core:Tested_Model_Number>Tested_Model_Number1</core:Tested_Model_Number>
                       <core:Additional_Models_Represented_by_Family_Series_or_DOE_Basic>
                          <core:Additional_Model_Name>test</core:Additional_Model_Name>
                          <core:Additional_Model_Number>12345</core:Additional_Model_Number>
                          <core:Additional_Identifying_Information>non</core:Additional_Identifying_Information>
                       </core:Additional_Models_Represented_by_Family_Series_or_DOE_Basic>
                       <core:Is_the_Partner_Listed_the_Original_Equipment_Manufacturer_OEM>Yes</core:Is_the_Partner_Listed_the_Original_Equipment_Manufacturer_OEM>
                       <core:If_the_Partner_is_Not_the_Original_Equipment_Manufacturer_Who_is>test</core:If_the_Partner_is_Not_the_Original_Equipment_Manufacturer_Who_is>
                       <core:Currently_Available_on_Market>Yes</core:Currently_Available_on_Market>
                       <core:Date_Available_On_Market>2010-12-31</core:Date_Available_On_Market>
                       <core:Date_Tested>2010-12-31</core:Date_Tested>
                       <core:Date_CB_Notified_Partner_of_Model_Qualification>2010-12-31</core:Date_CB_Notified_Partner_of_Model_Qualification>
                       <core:Certification_Body_Contact_Name_for_This_Model>QPX Certification Body 1</core:Certification_Body_Contact_Name_for_This_Model>
                       <core:Laboratory>
                          <core:Laboratory_EPA_issued_Organization_ID>1114629</core:Laboratory_EPA_issued_Organization_ID>
                          <core:Laboratory_Contact_for_This_Model>QPX Laboratory Test</core:Laboratory_Contact_for_This_Model>
                       </core:Laboratory>
                       <core:To_What_Major_Markets_is_This_Model_Sold>United States</core:To_What_Major_Markets_is_This_Model_Sold>
                       <core:Notes>notes on the product</core:Notes>
                    </core:core_product_data>
                    <roof:ENERGY_STAR_Specification_Version>2.2</roof:ENERGY_STAR_Specification_Version>
                    <roof:Product_Type>Single-Ply</roof:Product_Type>
                    <roof:Measured_Initial_Solar_Reflectance>0.25</roof:Measured_Initial_Solar_Reflectance>
                    <roof:Reported_Initial_Solar_Reflectance>0.26</roof:Reported_Initial_Solar_Reflectance>
                    <roof:Initial_Solar_Reflectance_Test_Method>ASTM E903-96</roof:Initial_Solar_Reflectance_Test_Method>
                    <roof:Measured_Solar_Reflectance_After_Three_Years>0.15</roof:Measured_Solar_Reflectance_After_Three_Years>
                    <roof:Reported_Reflectance_After_Three_Years>0.16</roof:Reported_Reflectance_After_Three_Years>
                    <roof:Solar_Reflectance_After_Three_Years_Test_Method>ASTM C1549-09</roof:Solar_Reflectance_After_Three_Years_Test_Method>
                    <roof:Measured_Initial_Emissivity>0.01</roof:Measured_Initial_Emissivity>
                    <roof:Reported_Initial_Emissivity>0.02</roof:Reported_Initial_Emissivity>
                    <roof:Initial_Emissivity_Test_Method_Used>ASTM E408-71(1996) e1</roof:Initial_Emissivity_Test_Method_Used>
                    <roof:Low_Slope>Yes</roof:Low_Slope>
                    <roof:Steep_Slope>Yes</roof:Steep_Slope>
                    <roof:Roof_Cleaned_Prior_to_Third_Year_Test>No</roof:Roof_Cleaned_Prior_to_Third_Year_Test>
                    <roof:Warranty_Period>abcdefg</roof:Warranty_Period>
                 </roof:Roof_Products>
              </roof:Roof_Products_submission>
           </soapenv:Body>
        </soapenv:Envelope>';

        $url = "https://esws.energystar.gov:443/DataServices/servlet/webservices?ver=1.1";

        $client = new SoapClient($url,
                                array(
                                'trace' => 1,
                                'exceptions' => 1,
                                'soap_version' => SOAP_1_1,
                                'encoding' => 'utf-8',
                                'features' => SOAP_SINGLE_ELEMENT_ARRAYS
                                )
         );

        $xmlvar = new SoapVar(
                     '<ns1:xmlDocument>'.$post_string.'</ns1:xmlDocument>',
                     XSD_ANYXML
         );

        try 
        {
            $params->post_string = (object)$xmlvar;
            $save_result = $client->Submit_Roof_Products_2_x($params);
            echo "<pre>\n\n";
            echo "Result1 :\n";
            var_dump($save_result);
            echo "</pre>";
        } 
        catch (SoapFault $e)
        {
            echo "SOAP Fault: ".$e->getMessage()."<br />\n";
        }

        echo "<pre>\n\n";
        echo "Request2 :\n";
        echo htmlspecialchars($soap->__getLastRequest())."\n";
        echo "</pre>";
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T21:04:03.073

看起来 core_submission 属性需要在 Roof_products_submission 标记之外。有关如何实现的一个很好的示例，请参见此处：

[http://www.energystar.gov/ia/partners/third_party_certification/downloads/sample_Roof_Products_2_x.xml](http://www.energystar.gov/ia/partners/third_party_certification/downloads/sample_Roof_Products_2_x.xml)

希望有帮助。

# memory - goroutines 内存不足 UPD：go 错误处理

> ID：12012581
> 
> 赞同：0
> 
> 时间：2012-08-17T20:12:17.320
> 
> 标签：memory, go, goroutine

**UPD**：原来，这是一个关于 Go 中的错误处理的问题

我编写了一个简单的网络爬虫，它在“主线程”上生成网页的地址，在一个 go-routine 中获取实际页面并通过 a 返回内容`chan`，并将其写入另一个 go-常规。但是，经过大约 300,000 次此过程的迭代，我收到以下错误：

```
panic: runtime error: invalid memory address or nil pointer dereference
[signal 0xb code=0x1 addr=0x38 pc=0x22e9]</pre> 
```

错误“stacktrace”很长，不幸的是，我现在没有它（我会在重复实验后发布它）。

是否需要以某种方式管理内存、关闭通道或类似的东西？

下面是有一些遗漏的代码。

```
package main

import (
    "fmt"
    "io/ioutil"
    "net/http"
    "strconv"
)

func main() {
    channel := make(chan []byte)

    for i:=0; i < 20; i++ {
        go fetcher(generateLink(), channel)
    }

    for a:=0; ; a++ {
        go writeToFile(strconv.Itoa(a), <-channel)
        go fetcher(generateLink(), channel)
        fmt.Println(strconv.Itoa(a))
    }
}

func fetcher(url string, channel chan []byte) {

    resp, err := http.Get(url)
    if err != nil {
        channel <- []byte("")
    }
    defer resp.Body.Close()
    body, err := ioutil.ReadAll(resp.Body)
    channel <- body
}

func writeToFile(filename string, bytes []byte) {
    ioutil.WriteFile(filename+".html", bytes, 0644)
}

func generateLink() string {
    ...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T20:29:26.320

```
panic: runtime error: invalid memory address or nil pointer deference 
```

这意味着您尝试使用 nil 指针。这是程序员错误，而不是内存不足错误。由于我无法访问实际的跟踪或代码，因此我无法进一步帮助您。

**编辑：**再次查看您的代码后，我想我找到了可能的错误来源。

```
resp, err := http.Get(url)
if err != nil {
    channel <- []byte("")
}
defer resp.Body.Close() 
```

即使. _ `resp`_ 如果，则很可能 resp 为零。`Body``err != nil``err !=nil`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T20:41:29.537

我只是在这里猜测，因为我没有堆栈跟踪。但以下两行对我来说看起来很可疑：

```
body, err := ioutil.ReadAll(resp.Body)
channel <- body 
```

当你在频道上发送它时，你怎么知道身体不是零？由于 writeToFile 也没有检查它，因此您完全有可能尝试将 nil 字节切片写入文件并且它在那里爆炸。如果您发现错误，您应该在继续之前检查它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T20:54:37.863

在某些时候，您的调用`http.Get()`失败并返回一个非 nil `err`。发生这种情况时，您将一个空字节切片放入通道中，但您继续前进，并尝试从任何情况下读取`resp.Body`，何时`resp`为 nil。

# android - Android java.lang.NullPointerException 使用 HostTab

> ID：12012584
> 
> 赞同：-1
> 
> 时间：2012-08-17T20:12:31.790
> 
> 标签：android, nullpointerexception

我正在使用`Android 2.1`和`HostTab`活动，但是当我编译时在我的应用程序中出现错误并崩溃`"java.lang.NullPointerException"`。我不确定，但我想`HostTab`有问题`Android 2.1`请需要帮助，任何人都可以查看我的代码吗？泰

我的日志是

```
 08-17 19:54:08.025: D/ddm-heap(215): Got feature list request
    08-17 19:54:08.035: D/AndroidRuntime(215): Shutting down VM
    08-17 19:54:08.035: W/dalvikvm(215): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
    08-17 19:54:08.035: E/AndroidRuntime(215): Uncaught handler: thread main exiting due to uncaught exception
    08-17 19:54:08.035: E/AndroidRuntime(215): java.lang.RuntimeException: Unable to start activity ComponentInfo{utec.academico/utec.academico.Academico}: java.lang.NullPointerException
    08-17 19:54:08.035: E/AndroidRuntime(215):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
    08-17 19:54:08.035: E/AndroidRuntime(215):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
    08-17 19:54:08.035: E/AndroidRuntime(215):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
    08-17 19:54:08.035: E/AndroidRuntime(215):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
    08-17 19:54:08.035: E/AndroidRuntime(215):  at android.os.Handler.dispatchMessage(Handler.java:99)
    08-17 19:54:08.035: E/AndroidRuntime(215):  at android.os.Looper.loop(Looper.java:123)
    08-17 19:54:08.035: E/AndroidRuntime(215):  at android.app.ActivityThread.main(ActivityThread.java:4363)
    08-17 19:54:08.035: E/AndroidRuntime(215):  at java.lang.reflect.Method.invokeNative(Native Method)
    08-17 19:54:08.035: E/AndroidRuntime(215):  at java.lang.reflect.Method.invoke(Method.java:521)
    08-17 19:54:08.035: E/AndroidRuntime(215):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
    08-17 19:54:08.035: E/AndroidRuntime(215):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
    08-17 19:54:08.035: E/AndroidRuntime(215):  at dalvik.system.NativeStart.main(Native Method)
    08-17 19:54:08.035: E/AndroidRuntime(215): Caused by: java.lang.NullPointerException
    08-17 19:54:08.035: E/AndroidRuntime(215):  at utec.academico.Academico.onCreate(Academico.java:28)
    08-17 19:54:08.035: E/AndroidRuntime(215):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    08-17 19:54:08.035: E/AndroidRuntime(215):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
    08-17 19:54:08.035: E/AndroidRuntime(215):  ... 11 more
    08-17 19:54:08.055: I/dalvikvm(215): threadid=7: reacting to signal 3
    08-17 19:54:08.055: E/dalvikvm(215): Unable to open stack trace file '/data/anr/traces.txt': Permission denied
    08-17 19:54:09.306: I/Process(215): Sending signal. PID: 215 SIG: 9 
```

我的清单是：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="utec.academico"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Academico">

        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".Login"></activity>
    <activity android:name=".Horario"></activity>
    <activity android:name=".Asistencia"></activity>
    <activity android:name=".Notas"></activity>
    <activity android:name=".DetalleNotas"></activity>
    <activity android:name=".Record"></activity>
</application> 
```

我的主要 Hosttab 课程

```
public class Academico extends TabActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.academico);

    TabHost tabHost=getTabHost(); //Creamos el tabhost de la actividad
    tabHost.setup();      

    TabHost.TabSpec spec;         //Creamos el recurso para la propiedad de la pestaña
    Intent intent;                //intent para abrir la pestaña 
    Resources res= getResources();//Obtenemos los recursos

    //Establecemos el recurso de color para todos los tabs
    tabHost.getTabWidget().getChildAt(0).setBackgroundColor(Color.BLACK);

    //Se crea el  intent para abrir la actividad, configuramos y cargamos el tab en el contenedor tabhost
    intent = new Intent().setClass(this, Horario.class);
    spec = tabHost.newTabSpec("Horario").setContent(intent).setIndicator("Horario",res.getDrawable(R.drawable.horario));  
    tabHost.addTab(spec);

    intent = new Intent().setClass(this, Notas.class);
    spec = tabHost.newTabSpec("Notas").setContent(intent).setIndicator("  Notas  ");  
    tabHost.addTab(spec);

    intent = new Intent().setClass(this, Asistencia.class);
    spec = tabHost.newTabSpec("Asistencia").setContent(intent).setIndicator("Asistencia",res.getDrawable(R.drawable.asistencia));  
    tabHost.addTab(spec);

    intent = new Intent().setClass(this, Record.class);
    spec = tabHost.newTabSpec("Record").setContent(intent).setIndicator("  Record Académico  ");  
    tabHost.addTab(spec);        
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.academico, menu);
    return true;
}
} 
```

然后我的 HostTab xml 是

```
<TabHost
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@android:id/tabhost"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<LinearLayout
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">
    <FrameLayout 
           android:id="@android:id/tabcontent"
           android:layout_width="fill_parent"
           android:layout_height="fill_parent"
           android:padding="5dp"
           android:layout_weight="1">
    </FrameLayout>   
    <TabWidget
           android:id="@android:id/tabs"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_weight="0"
           android:layout_marginBottom="-4dp">
    </TabWidget>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:16:58.430

我想问题出在

```
 tabHost.getTabWidget().getChildAt(0).setBackgroundColor(Color.BLACK); 
```

将此移动到 Oncreate 的末尾

# ocaml - 为什么 OCaml 标准库有这么多非尾递归函数？

> ID：12012585
> 
> 赞同：13
> 
> 时间：2012-08-17T20:12:32.867
> 
> 标签：ocaml, tail-recursion, continuation-passing

我最近一直在重写许多 OCaml 标准库函数，使其成为尾递归的。鉴于这需要直接的 CPS 转换，我对为什么不以这种方式编写默认版本感到困惑。

例如，在标准库中，map 定义为：

```
let rec map f = function
    []   -> []
  | a::l -> let r = f a in r :: map f l 
```

我已将其重写为：

```
let map f l =
  let rec aux l k = match l with
      []   -> k []
    | a::l -> aux l (fun rest -> k (f a :: rest))
  in aux l (fun x -> x) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T20:25:17.723

以我的经验，非平凡函数的尾递归版本经常以空间效率与时间效率为代价。换句话说，标准库中的函数对于较小的输入可能很容易更快。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-17T23:18:07.507

好吧，您的代码正在堆中构建并传递闭包的“链表”（每个闭包都将前一个闭包捕获为`k`），而不是调用堆栈上的帧堆栈。

一种更常见、等效的尾递归方式是传递到目前为止的结果列表（相反，因为您只能有效地添加到前面），然后最后将其反转：

```
let map f l =
  let rec aux l acc = match l with
      []   -> List.rev acc
    | a::l -> aux l (f a :: l)
  in aux l 
```

（这与 基本相同`List.rev (List.rev_map f l)`）

在这种情况下，累积的东西是迄今为止的结果列表（反向），而不是闭包。但是效果是完全一样的。

在这两种情况下，我们都需要线性空间来存储某种中间表示（除了输入或输出列表），因此就内存使用的复杂性而言，与非尾递归版本相比没有优势。虽然堆上的内存确实比堆栈上的内存多，但使用尾递归版本可能比非尾递归版本适用于更大的列表。就绝对内存使用而言，累积列表选项可能是最有效的，因为闭包和堆栈帧都有更多的开销。

# facebook - 使用图形 api 动态获取面孔，如 fb 登录按钮中的那些

> ID：12012586
> 
> 赞同：0
> 
> 时间：2012-08-17T20:12:37.767
> 
> 标签：facebook, facebook-graph-api, facebook-login

在我的网站上，我有 show_faces=true 的 facebook 登录按钮。我需要自定义面孔并隐藏按钮（只需要面孔）。但是因为一切都在 iframe 中，所以我不能这样做。登录按钮显示已被应用程序接受的用户的面孔，并且是登录到 fb 但仍未接受应用程序的用户的朋友。

我尝试使用以下内容使用 fb graph api 获取人脸：
/me/friends?fields=installed
但我收到错误消息：“必须使用活动访问令牌来查询有关当前用户的信息”。另外，我尝试添加用户 ID 而不是“我”，但我得到 0。但是如果新用户接受该应用程序，这可行，但这不是我需要的情况。

问题是我如何才能让使用我的应用程序的用户登录到 fb 但第一次访问我的网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:50:20.950

如果用户已通过 Auth Dialog 授予您的应用访问其信息的权限，您在那里的调用`/[USER]/friends?fields=installed`将返回用户的好友列表，您可以确定哪些人通过存在或不存在授权了您的应用，的“已安装：真实”项目。

如果用户没有授权你的应用，你就无法获取这些信息

# java - JDBC插入多行

> ID：12012592
> 
> 赞同：39
> 
> 时间：2012-08-17T20:13:17.553
> 
> 标签：java, mysql, jdbc, batch-file

我现在正在使用批处理：

```
String query = "INSERT INTO table (id, name, value) VALUES (?, ?, ?)";
PreparedStatement ps = connection.prepareStatement(query);            
for (Record record : records) {
    ps.setInt(1, record.id);
    ps.setString(2, record.name);
    ps.setInt(3, record.value);
    ps.addBatch();
}
ps.executeBatch(); 
```

我只是想知道上面的代码是否等同于下面的代码。如果不是，哪个更快？

```
String query = "INSERT INTO table (id, name, value) VALUES ";
for (Record record : records) {
    query += "(" + record.id + ",'" + record.name + "'," + record.value + "),";
}
query = query.substring(1, query.length() - 1);
PreparedStatement ps = connection.prepareStatement(query);
ps.executeUpdate(); 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-17T20:20:41.127

# 关闭自动提交

`executeBatch``executeUpdate`只要将[autocommit](https://en.m.wikipedia.org/wiki/Autocommit)设置为 false ，性能就会有所提高：

```
connection.setAutoCommit(false);  
PreparedStatement ps = connection.prepareStatement(query);            
for (Record record : records) {
    // etc.
    ps.addBatch();
}
ps.executeBatch();
connection.commit(); 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-08-17T20:17:06.243

首先，使用查询字符串连接，您不仅会丢失 PreparedStatement 方法的原生类型转换，而且还容易受到数据库中执行的恶意代码的攻击。

其次，PreparedStatements 之前缓存在数据库本身中，这已经比普通 Statements 提供了非常好的性能改进。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-07-31T14:18:23.240

如果要插入的项目数量很大，您可能会面临严重的性能问题。因此，更安全的是定义一个batch size，并在达到batch size时不断执行查询。

类似以下示例代码的内容应该可以工作。有关如何有效使用此代码的完整故事，请参阅此[链接](https://viralpatel.net/blogs/batch-insert-in-java-jdbc/)。

```
private static void insertList2DB(List<String> list) {
        final int batchSize = 1000; //Batch size is important.
        Connection conn = getConnection();
        PreparedStatement ps = null;
        try {
            String sql = "INSERT INTO theTable (aColumn) VALUES (?)";
            ps = conn.prepareStatement(sql);

            int insertCount=0;
            for (String item : list) {
                ps.setString(1, item);
                ps.addBatch();
                if (++insertCount % batchSize == 0) {
                    ps.executeBatch();
                }
            }
            ps.executeBatch();

        } catch (SQLException e) {
            e.printStackTrace();
            System.exit(1);
        }
    finally {
        try {
            ps.close();
            conn.close();
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-30T11:53:59.763

```
public void insertBatch(final List<Record > records ) {

    String query = "INSERT INTO table (id, name, value) VALUES (?, ?, ?)";

    GenericDAO.getJdbcTemplate().batchUpdate(sql, new BatchPreparedStatementSetter() {

        @Override
        public void setValues(PreparedStatement ps, int i) throws SQLException {
              Record record = records .get(i);
              ps.setInt(1, record.id);
              ps.setString(2, record.name);
              ps.setInt(3, record.value);
        }

        @Override
        public int getBatchSize() {
            return records.size();
        }
    });
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-06T06:35:54.183

如果您的记录大小小于或等于 1000，则以下代码优于您的两个代码：

```
StringBuilder query = new StringBuilder("INSERT INTO table (id, name, value) VALUES ");

if (records.size() <= 1000) {

    for (int i = 0; i < records.size(); i++)
        query.append("(?, ?, ?), ");

    query = new StringBuilder(query.substring(1, query.length() - 1));

    PreparedStatement ps = connection.prepareStatement(query.toString());

    for (int i = 0; i < records.size(); i++) {
        ps.setInt((i * 3) + 1, record.id);
        ps.setString((i * 3) + 2, record.name);
        ps.setInt((i * 3) + 3, record.value);
    }

    ps.executeUpdate();

} 
```

通过这种方式，您正在使用 PreparedStatement 并根据记录列表的大小在一个插入查询中使用多个值子句动态创建它

* * *

## 回答 #6

> 赞同：-7
> 
> 时间：2012-08-17T20:48:46.467

我想这会做

```
String query = "INSERT INTO table (id, name, value) VALUES ";
for (Record record : records)
{
query += "(" + record.id + ",'" + record.name + "'," + record.value + "),";
query = query.substring(1, query.length() - 1);
PreparedStatement ps = connection.prepareStatement(query);
ps.executeUpdate();
} 
```

因为您必须对要插入数据库的每条记录执行查询。

# entity-framework - 实体框架 5 - DbContext 有变化？

> ID：12012607
> 
> 赞同：37
> 
> 时间：2012-08-17T20:15:13.703
> 
> 标签：entity-framework, entity-framework-4.1

我正在尝试找到一种方法来确定对数据库上下文 (DbContext) 所做的任何更改。注意：我在 Windows 7 64 位机器上使用带有实体框架 5 的 Visual Studio 2012。

当我过去使用 ObjectContext 而不是 DbContext 时，我可以执行以下操作：

```
public partial class MyObjectContext
{
    public Boolean HasUnsavedChanges()
    {
        return (this.ObjectStateManager.GetObjectStateEntries(EntityState.Added | EntityState.Modified | EntityState.Deleted).Any());
    }
} 
```

现在我正在使用 DbContext，我尝试这样做：

```
public partial class MyDbContext
{
    public ObjectContext ObjectContext()
    {
        return (this as IObjectContextAdapter).ObjectContext;
    }

    public Boolean HasUnsavedChanges()
    {
        return (this.ObjectContext().ObjectStateManager.GetObjectStateEntries(EntityState.Added | EntityState.Modified | EntityState.Deleted).Any());
    }
} 
```

我遇到的问题是“HasUnsavedChanges()”方法总是返回“false”，即使我知道上下文已更改。有人对我做错了什么有任何想法吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-17T20:25:31.640

对于 EF 5 使用`DbContext`'s `ChangeTracker`：

```
 public bool HasUnsavedChanges()
 {
    return this.ChangeTracker.Entries().Any(e => e.State == EntityState.Added
                                              || e.State == EntityState.Modified
                                              || e.State == EntityState.Deleted);
 } 
```

对于 EF 6，使用`ChangeTracker.HasChanges()`也将检测多对多关系变化的方法：

```
 public bool HasUnsavedChanges()
 {
    return this.ChangeTracker.HasChanges();
 } 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2016-12-22T17:15:37.013

我知道您使用的是**Entity Framework 5**，这个答案对您没有帮助，但可能对其他人有所帮助。

从**Entity Framework 6**和**Entity Framework Core**开始，您只需通过以下代码行即可检查更改：

```
context.ChangeTracker.HasChanges() 
```

# templates - 主干.js 视图和会话变量

> ID：12012609
> 
> 赞同：1
> 
> 时间：2012-08-17T20:15:17.847
> 
> 标签：templates, backbone.js, underscore.js

我已经实现了一个项目集合（模型、集合、集合的视图、单个项目的视图和模板文件）。除此之外，我还有一些会话变量（例如用户凭据/会话属性/权限）。我想根据用户权限为每个项目显示不同的字段和选项（普通用户可以查看它们，管理员可以编辑/删除等）。最干净的方法是什么？通过视图构造函数传递会话或向每个模型添加对会话结构的引用的任何方式似乎都不正确。听起来我想要的是让这些会话结构全局化，并希望从我的视图模板中访问它，但我怀疑这是正确的方法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T21:49:35.810

我解决相同问题的方法是通过权限检查设置模型和集合，然后在模型类中实现逻辑，如下所示：

```
PermissionModel = Backbone.Model.extend({

  hasPermission: function(permission){
    // pessimistic default implementation, override in inherited model classes
    return false;
  }

}); 
```

从这个模型继承你的模型，然后如果应用程序相对简单，则使用全局标志检查权限逻辑，如果应用程序更复杂，则使用某种 ACL。例如。

```
hasPermission: function(permission){
  switch (permission) {
    case "read":
      return true;
    case "write":
      return window.app.user.isAdmin(); //app.user is defined in the app initialization
    default:
      return false;
  }
} 
```

在您的模板中，您可以使用此逻辑。如果你使用 Handlebars，你可以定义一个模板助手：

```
{{#ifPermission model "read"}}You have permission{{/ifPermission}} 
```

# ios - 将 NSData JSON 对象发送到 Web 服务而不使用 3rd 方库

> ID：12012614
> 
> 赞同：0
> 
> 时间：2012-08-17T20:15:51.933
> 
> 标签：ios, json, web-services, nsdata

我已经搜索过，但在这里找不到这个：

我正在尝试将 NSData 对象发送到 Web 服务。NSData 对象是一个使用 iOS 5 内置 JSON 的 JSON 对象。

我需要进行异步发送，然后检查服务器返回的响应。

我不想使用任何 3rd 方库。

这是我已经拥有但不起作用的东西：

```
NSDictionary * initialLogAsJSON = [NSDictionary dictionaryWithObjects:items forKeys:keys];

NSError * error;

NSData * jsonData = [NSJSONSerialization dataWithJSONObject:initialLogAsJSON options:NSJSONWritingPrettyPrinted error:&error];

NSMutableURLRequest * request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:kURLSendTestStartedDataToTenOneServer ]];

[request setHTTPMethod:@"POST"];
[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setValue:@"appliction/json" forHTTPHeaderField:@"Content-Type"];
[request setValue:[NSString stringWithFormat:@"%d", [jsonData length]] forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody: jsonData];

[NSURLConnection sendAsynchronousRequest:request
                                   queue:self.queue
                       completionHandler:^( NSURLResponse * response, NSData * data, NSError * error )
                                        {
                                            NSLog( @"If finished with reponse = %@\nData: %@\nError %@", response, data, error );
                                            // do something useful
                                        }
]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T23:28:34.227

两个问题：

1）您应该断言或记录该调用中的每个对象，这样您就知道没有什么是零。

2）你有一个错字：

```
[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setValue:@"appliction/json" forHTTPHeaderField:@"Content-Type"]; 
```

第二个应用程序缺少“a”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T23:38:40.433

实际上问题比..

归结为 URL 为零 - 因为源字符串中有一些有趣的转义字符。

这是我的最终（工作）实现：

```
NSDictionary * mainJSON = [NSDictionary dictionaryWithObjects:mainItems forKeys:mainKeys];

NSError * error;

NSData * jsonData = [NSJSONSerialization dataWithJSONObject:mainJSON options:NSJSONWritingPrettyPrinted error:&error];

NSString * jsonString = [[NSString alloc] initWithData:jsonData encoding:NSASCIIStringEncoding];

NSString * serverString = [NSString stringWithFormat:@"%@", kURLServer];

NSString * urlString = [NSString stringWithFormat:@"%@%@", serverString, jsonString];

NSString * webStringURL = [urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

NSURL * url = [NSURL URLWithString:webStringURL];

NSAssert( url != nil, @"URL nil - Check string values for URL to Server!" );

dispatch_async( kBackgroundQueue, ^
                                   {
                                       NSData * data = [NSData dataWithContentsOfURL:url];
                                                   [self performSelectorOnMainThread:@selector( receivedResponseFromServer: )
                                                                          withObject:data
                                                                       waitUntilDone:YES];
                                   }
               ); 
```

# vector - 在 Chipmunk 中通过向其施加正交力来围绕其中心旋转身体

> ID：12012615
> 
> 赞同：2
> 
> 时间：2012-08-17T20:15:59.277
> 
> 标签：vector, chipmunk

我试图通过施加正交（与身体方向）力并产生所需的扭矩来围绕自己的中心旋转身体。但是，这也会（自然地）移动身体，我只需要它来旋转。这是我的代码。请注意，我不想手动设置角度/方向，而是试图通过使用这种旋转力来实现。

```
cpFloat dot = cpvdot(turningN, cpvnormalize_safe(cpBodyGetRot(body)));
cpFloat cross = cpvcross(turningN, cpvnormalize_safe(cpBodyGetRot(body)));

cpVect rotN;
if (cross<=0) {
    rotN = cpvperp(cpvnormalize_safe(cpBodyGetRot(body)));
}else{
    rotN = cpvrperp(cpvnormalize_safe(cpBodyGetRot(body)));
}

cpVect rotF = cpvmult(rotN, 300*(1-dot));
cpBodyApplyForce(body, rotF, cpv(75,14)); 
```

`turningN`是指示身体应该具有的方向的向量。我制作了点积，这样当身体的方向朝向所需方向时，我应用的旋转越来越少。

编辑

因此，正如@DGH 指出的那样，我们需要添加一个方向和大小相同但与我们的旋转力相反且朝向物体中心的力。所以，我只需要添加这行代码就可以了：

`cpBodyApplyForce(body, cpvneg(rotF), cpvzero);`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T20:20:09.767

我不知道花栗鼠，但我知道一点物理学 - 向相反方向的物体中心施加第二个力，并适当地缩放其大小以抵消不希望的运动。

这就像一个轮子连接到一个固定的轴上——当你对轮子的边缘施加一个力时，它会旋转而不向前移动，因为轴会在相反的方向上施加一个反作用力。

# git - How can I 'git merge' a new file based on a tracked file of a different name?

> ID：12012619
> 
> 赞同：3
> 
> 时间：2012-08-17T20:16:31.487
> 
> 标签：git, merge

I'm quite new to git and have following problem:

I've worked on a some large code file in my private branch and refactored it so most of it was moved to few other code files. Now I'm trying to merge back to master via "git merge --squash --no-commit mybranch" but then I'm trying to commit it gives me an error:

error: 'foo' has changes staged in the index (use --cached to keep the file, or -f to force removal)

And the status of foo is "modified" and "renamed to bar" while bar is new file which is used from foo. How do I tell git this isn't rename and commit?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T21:08:08.980

Change the [rename threshold on the merge to 100% (or something really high):](https://stackoverflow.com/a/5487775/877115)

```
git merge -X rename-threshold=100 <branch> 
```

`git merge` will then only detect renames, for this particular merge, if the two files are 100% identical. It's a one-off, merge strategy argument so you needn't worry about it being a permanent setting.

# jsf - 为什么不刷新jsf页面

> ID：12012620
> 
> 赞同：0
> 
> 时间：2012-08-17T20:16:36.307
> 
> 标签：jsf, jsf-2

我创建一个bean

```
@ManagedBean
@RequestScoped
public class KhachHangMB implements Serializable {
@PersistenceContext(unitName = "XoSoWebPU")
private EntityManager em;
private List<KhachHang> l;

public KhachHangMB() {
    l = new ArrayList<KhachHang>();
}
@PostConstruct
public void init() {
    l = new ArrayList<KhachHang>();
    l = em.createNamedQuery("KhachHang.findAll").getResultList();
    MsgShow.showMsg("", "Init " + Math.random());
}

public List<KhachHang> retriveAllKhachHang() {
    return l;
} 
```

}

还有我的 jsf 页面：

```
<h:form>
            <h1><h:outputText value="List"/></h1>
            <h:dataTable value="#{khachHangMB.retriveAllKhachHang()}" var="item">
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Idkh"/>
                    </f:facet>
                    <h:outputText value="#{item.idkh}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="TenKH"/>
                    </f:facet>
                    <h:outputText value="#{item.tenKH}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Cmnd"/>
                    </f:facet>
                    <h:outputText value="#{item.cmnd}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="DiaChi"/>
                    </f:facet>
                    <h:outputText value="#{item.diaChi}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="SoDT"/>
                    </f:facet>
                    <h:outputText value="#{item.soDT}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Email"/>
                    </f:facet>
                    <h:outputText value="#{item.email}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="MaDuThuong"/>
                    </f:facet>
                    <h:outputText value="#{item.maDuThuong}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="GhiChu"/>
                    </f:facet>
                    <h:outputText value="#{item.ghiChu}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="MatKhau"/>
                    </f:facet>
                    <h:outputText value="#{item.matKhau}"/>
                </h:column>
            </h:dataTable>
            <h:commandLink value="Click" action="home" />
        </h:form> 
```

还有我的面孔配置

```
<navigation-rule>
    <navigation-case>
        <from-outcome>trungthuong_list</from-outcome>
        <to-view-id>/f_trungthuong/trungthuong_list.xhtml</to-view-id>
        <redirect/>
    </navigation-case>
</navigation-rule>
<navigation-rule>
    <navigation-case>
        <from-outcome>home</from-outcome>
        <to-view-id>index.xhtml</to-view-id>
        <redirect/>
    </navigation-case>
</navigation-rule> 
```

我点击命令链接，随机被调用，但页面上的数据没有改变，尽管我已经编辑了数据库上的数据。另一种情况，我返回后导航到其他页面，但数据是旧的（不使用网络浏览器的背面，我使用的是命令链接）！请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T20:27:53.647

我认为您应该尝试将`Shared Cache Mode`文件中的选项设置`persistence.xml`为`None`. 这帮助我解决了前段时间与您类似的[问题。](https://stackoverflow.com/questions/8376652/why-my-applicationscope-cdi-bean-not-updated):)

# mysql - 针对引用表的查询返回的记录少于应有的记录

> ID：12012625
> 
> 赞同：0
> 
> 时间：2012-08-17T20:17:04.077
> 
> 标签：mysql

这是我正在使用的 2 个表：http: [//pastie.org/4539541](http://pastie.org/4539541)

表 products_options_values 是参考表， products_images 表是我要与参考表进行比较的表。

这是我正在使用的查询：

```
select
products_options_values_name
from 
products_options_values as pov
inner join
products_images as img
on pov.products_options_values_id = img.color_id
where img.products_id = '426' 
```

这仅返回 1 条记录，但是当我执行此查询时：

```
select color_id from products_images where products_id = '426' 
```

它返回 2 条记录。

我很确定我做错了查询，但我不知道我应该怎么做。我知道 products_images 中的 color_id 名称和 products_options_values 中的 products_options_values_id 应该是相同的列名，但我无法更改它，因为它会导致我正在使用的应用程序中出现大量错误。

任何帮助都会很棒，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T20:28:18.797

将 Right Join 与 COALESCE 结合使用会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:28:50.373

我想给你一些反馈意见：

1.  您正在使用 MyISAM 表作为关系数据库。MyISAM 不支持通过外键建立关系，这会保护数据库的引用完整性。如果没有外键，您不能保证引用其他表的表（在连接表的情况下）将反映数据库中的实际值。而是使用 Innodb。
2.  您不应该在数值上使用引号，'1' 表示字符 1，而不是整数中的 1。虽然 MySQL 通常对此很宽容，但它仍然是不正确的。
3.  MyISAM 只有表级锁。任何需要锁定的操作都会锁定整个表以进行写入。这会导致并发问题。
4.  颜色 ID 应该引用另一个枚举颜色的表，颜色 ID 列应该是一个整数来反映这一点。
5.  如果您希望每个产品图像应该只有一种颜色，那么您应该在其上放置一个唯一标识符。
6.  在 where 子句中，您应该指定您指的是哪个表的 products_id 列。

# ios - 正确取消 NSURLConnection？

> ID：12012631
> 
> 赞同：5
> 
> 时间：2012-08-17T20:17:19.320
> 
> 标签：ios, request, nsurlconnection

我正在创建我的 NSURLConnection ，如下所示：

```
theConnection = [[NSURLConnection alloc] initWithRequest:serviceRequest delegate:self]; 
```

我查看了 NSURLConnection 文档，显然取消 API 适用于异步请求，那么这在场景中是否有效？

无论如何，在我的其他课程中，当 NSURLConnection 正在进行时，我尝试这样做：

```
[mgr.theConnection cancel];
[mgr.theConnection release]; 
```

但是，代表仍然被调用，这是我不想要的。那么我如何正确地确保我取消连接，以便它的委托调用也被取消呢？

安慰：

```
2012-08-17 23:01:11.820 app[14097:707] Will cancel connection=(null)
2012-08-17 23:01:11.821 app[14097:707] Did cancel connection
2012-08-17 23:01:11.821 app[14097:707] Did release connection
2012-08-17 23:01:20.330 app[14097:707] didReceiveResponse
2012-08-17 23:01:20.331 app[14097:707] didReceiveData
2012-08-17 23:01:20.332 app[14097:707] connectionDidFinishLoading 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T23:22:56.327

显然正在发生一些不清楚的事情。我的建议是添加一些日志消息以验证实际上时间是否如您所想：

```
// Add a simple log like (NSLog(@"%@", @"conn_del"); to all your delegate methods)

Then addend you cancelation code with this:
NSLog(@"Will cancel connection=%@", mgr.theConnection);
[mgr.theConnection cancel];
NSLog(@"Did cancel connection");
// [mgr.theConnection release]; assuming a retained property, this is not the way to do it
mgr.theConnection = nil; // this is the proper way - release and nil out the property
NSLog(@"Did release connection"); 
```

我的代码已经取消，并且已经测试了几年，没有问题。我怀疑你可能会从上面的测试中学到一些东西。当您在控制台上看到“已取消连接”后收到任何消息，我会感到震惊，但您可能会在“Will”日志和它之间。

编辑：根据您的测试，经理或经理的 theConnection 属性为零。这是您的问题的根本原因。当你弄清楚为什么它的 nil 并修复它时，连接将取消，之后相同的 NSLogs 将不再显示委托消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-02T03:43:43.777

该`cancel`方法不**保证**不会传递更多的委托消息。请参阅来自 NSURLConnection 类描述的以下内容： `The -cancel message hints to the loader that a resource load should be abandoned but does not guarantee that more delegate messages will not be delivered. If -cancel does cause the load to be abandoned, the delegate will be released without further messages. In general, a caller should be prepared for -cancel to have no effect, and internally ignore any delegate callbacks until the delegate is released.`

# php - PHP：如何按名称创建类？

> ID：12012632
> 
> 赞同：2
> 
> 时间：2012-08-17T20:17:22.990
> 
> 标签：php, class

> **可能重复：**
> [Php动态类构造](https://stackoverflow.com/questions/2826711/php-dynamic-class-construction)

我如何通过名称从类中创建对象？

像这样

```
$name = "test";
$test = "text from var";
print ${$name}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T20:20:08.683

```
<?php
class SomeClass {

    public function __construct() {
        echo "construct SomeClass";
    }
}

$className = 'SomeClass';
$obj = new $className(); 
```

输出：`construct SomeClass`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T20:19:50.820

我想这就是你所要求的......

```
$classname = "MyClassName";
$newObject = new $className(); 
```

但是，我建议避免使用动态类名（或者实际上，根据您的问题，任何变量变量），因为它会使调试变得更加困难，并且您也会失去一个好的 IDE 可以为您提供的所有帮助，例如智能感知。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T20:20:13.253

我想你要求这样做。也许？

```
$myObject = new $name(); 
```

# c# - 写10位数和6位数短？

> ID：12012634
> 
> 赞同：2
> 
> 时间：2012-08-17T20:18:05.400
> 
> 标签：c#, bit-manipulation, bit-shift

我正在编写一个程序，其中一个数字（10 位数字）存储在 16 位数字的第一部分，然后在末尾存储一个 6 位数字。

如何利用位移来实现我的目标？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T20:20:19.323

注意：我将“16 位数的第一部分”解释为“10 个最低有效位”——因为位数学通常从右侧倒数。

```
short x = (short)(value & 1023); // the first 10 bits
short y = (short)((value >> 10) & 63); // the last 6 bits 
```

并重新组合：

```
value = (short)(x | (y << 10)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T20:21:27.833

使用`<<`左移运算符和`|`二元或运算符。

将这些值放在一起：

```
short n = (short)(oneNumber << 6 | otherNumber); 
```

（这些值`int`由二元运算符转换为，因此您必须将结果转换为`short`。）

要拆分值：

```
int oneNumber = n >> 6;
int otherNumher = n && 0x3F; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T20:24:50.047

```
ushort result=0;
ushort a=100;
ushort b= 43;
result=((result|(a<<6))|b&63) 
```

`//shift a by 6 bits to empty 6 bits at end,and then OR it with result.Strip from b, any bit ahead of 6 th place and OR it with result.`

数学上：-

```
0000000000000000 = result
0000000001100100 = a
0000000000101011 = b

0001100100000000 = (a<<6)
0000000000000000|0001100100000000 = (result|(a<<6))=0001100100000000
0000000000101011|0000000000111111 = b&63 =0000000000101011
0001100100000000|0000000000101011 = ((result|(a<<6))|b&63)=0001100100101011

result=6443 
```

# jms - 如何指示 IBM Websphere MQ 将 JMS 标头从 EBCDIC 转换为 ASCII

> ID：12012636
> 
> 赞同：2
> 
> 时间：2012-08-17T20:18:08.893
> 
> 标签：jms, weblogic, ibm-mq, mom

我在 Weblogic 11g 上有一个 Java 应用程序，它使用消息桥将 JMS 与 Websphere MQ 对话。MQ 服务器在使用 EBCDIC 编码的 IBM z/OS 平台上运行。我需要使用 Weblogic 消息选择器功能来过滤网桥上的消息。但是 JMS 标头采用 EBCDIC 格式。我如何指示 MQ 在放入网桥之前将 msg 标头转换为 ASCII？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T06:51:31.690

JMS 标头将采用 Unicode 1208。无需任何转换。

# javascript - 将多级 mongodb 文档翻译成 Backbone.js 模型/集合

> ID：12012638
> 
> 赞同：1
> 
> 时间：2012-08-17T20:18:21.300
> 
> 标签：javascript, mongodb, backbone.js

我的 mongodb 集合包含两个关键级别的文档和嵌入式文档，帖子和评论。下面是一个包含 2 条评论作为嵌入文档的帖子文档。

```
{
    "__v" : 0,
    "_id" : ObjectId("502d7b33eac728b658000002"),
    "comments" : [
        {
            "_id" : ObjectId("502d7b39eac728b658000003"),
            "body" : "comment 1",
            "votes" : 1
        },
        {
            "_id" : ObjectId("502d7d1feac728b658000004"),
            "body" : "comment 2",
            "votes" : 0
        }
    ],
    "text" : "post 1",
} 
```

我想将此结构映射到 Backbone.js PostCollection、PostModel、CommentCollection 和 CommentModel，其中 PostModel 包含一个 CommentCollection。我还希望每次在 PostCollection 或 PostModel 上调用 fetch() 时都保留它，因为这将从 REST API 同步。

我还想在上面指定的所有集合和模型上收听 Backbone.js 的“更改”和“添加”事件。

解决这个问题的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T21:35:54.100

[检查主干关系](https://github.com/PaulUithol/Backbone-relational)，它包含使用HasOne和 HasMany 逻辑在模型和集合之间建立关联的代码。

# gmail - iphone gmail上的IMAP ip地址

> ID：12012652
> 
> 赞同：0
> 
> 时间：2012-08-17T20:19:56.593
> 
> 标签：gmail, ip, imap

如果我早上从我的家中查看我的电子邮件，并且我整天都在旅行，到一天结束时我离家 30 英里.. 那时我离家 30 英里电子邮件，我是否应该每次都使用相同的 IMAP IP 地址。我指的是 GMAILS 最近的活动日志。有人帮我理解这一点。

换句话说，如果我在我的 iphone 上查看我的邮件并且从未在同一个位置，它是否应该显示一个恒定的 IP 地址，一个离我家很近的地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T01:01:17.830

也许。手机网络通常会尽量保持您的 IP 地址，但可能偶尔会发生变化。

# python - 禁用所有缓存以迭代巨大的查询集

> ID：12012655
> 
> 赞同：0
> 
> 时间：2012-08-17T20:19:57.583
> 
> 标签：python, optimization

这是我的代码：

```
def new_badge(badge_classes=None, users=None):
    """
    Utility function for awarding a badge when a new one is added.
    """

    badge_classes = get_badges_classes() if badge_classes is None else badge_classes
    total = users.count()

    for i, user in enumerate(users.iterator()):
        t0 = time.time()
        flight_ids = []
        for flight in user.flight_set.order_by('date').iterator():
            flight_ids.append(flight.id)
            flights_before = Flight.objects.filter(id__in=flight_ids)
            for BadgeClass in badge_classes:
                badge = BadgeClass(all_flights=flights_before, new_flight=flight)
                badge.grant_if_eligible()

        print "-- %s" % user.username
        print "-- %.2f s" % (time.time() - t0)
        print "-- %.2f%% done" %(float(i) / total * 100) 
```

查询集中有 2700 个对象`users`，超过 500,000 个航班。当我运行这个脚本时，我预计它会花费很长时间，但问题是它占用了越来越多的内存。几个小时后，脚本停止并出现以下错误：

```
File "/Users/chris/Documents/flightloggin2/badges/models.py", line 361, in eligible
  c = countries.count()
File "/Library/Python/2.7/site-packages/django/db/models/query.py", line 351, in count
  return self.query.get_count(using=self.db)
File "/Library/Python/2.7/site-packages/django/db/models/sql/query.py", line 418, in get_count
  number = obj.get_aggregation(using=using)[None]
File "/Library/Python/2.7/site-packages/django/contrib/gis/db/models/sql/query.py", line 85, in get_aggregation
  return super(GeoQuery, self).get_aggregation(using)
File "/Library/Python/2.7/site-packages/django/db/models/sql/query.py", line 384, in get_aggregation
  result = query.get_compiler(using).execute_sql(SINGLE)
File "/Library/Python/2.7/site-packages/django/db/models/sql/compiler.py", line 818, in execute_sql
  cursor.execute(sql, params)
File "/Library/Python/2.7/site-packages/django/db/backends/util.py", line 40, in execute
  return self.cursor.execute(sql, params)
File "/Library/Python/2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py", line 52, in execute
  return self.cursor.execute(query, args)

django.db.utils.DatabaseError: could not create temporary file "base/pgsql_tmp/pgsql_tmp98246.932828": No space left on device 
```

我怎样才能解决这个问题？当我运行脚本时，`top`告诉我正在运行脚本的 python 进程有 10G 内存，所以我认为这是 python 端的东西，而不是 postgres，但我不完全确定。

# jquery - 使固定的 div 水平滚动，并在页面最大化时返回中心

> ID：12012662
> 
> 赞同：0
> 
> 时间：2012-08-17T20:20:21.163
> 
> 标签：jquery, css

我一直在寻找解决问题的方法，并且已经解决了上半部分，但是有一个突出的小问题，我希望有人可以帮助我。我相当精通 html 和 css，并且以使用非常基本的 php 的奇怪位而闻名，但我对 javascript / jquery 完全陌生，并且在网页设计方面非常业余，所以请对我温柔点，通俗点解释！

我正在尝试将一个固定宽度为 960 像素的网站放在一起，该网站在更宽的浏览器窗口中居中。为此，我使用以下 CSS：

```
#container {
 width:960px;
 margin:auto;
} 
```

这工作正常。

在这个 div 的顶部，我想要一个固定的水平菜单，它浮动在页面内容的其余部分之上，它是完整的 960px 宽，并且在用户垂直滚动时保持粘在视口的顶部并且在视图中向下。

虽然窗口比 960px 宽的容器更宽，但这很容易，下面的 CSS 工作得很好：

```
#top {
 width:960px;
 position:fixed;
 top:0;
} 
```

问题是，因为 CSS position:fixed 总是与视口相关，如果窗口缩小到小于 960px 宽，页面在底部获得滚动条，主要内容区域向右滚动，但是顶部的固定菜单没有，这意味着它的右侧丢失并且无法访问。

在寻找解决方案时，我发现[了这个线程](https://stackoverflow.com/questions/10054588/a-fixed-div-with-javascript-to-scroll-when-a-window-is-too-small-doc-type-issue)，其中说下面的 jquery 代码可以解决问题：

```
$(window).scroll(function () {
 $('#top').css('left', -($(window).scrollLeft()));
}); 
```

本质上，这会改变 #top div 上的 css 以在用户向右滚动时将其向左移动。这看起来优雅，简单，非常适合我的需求。在尝试弄清楚如何使这项工作以及将其放置在哪里之后，我在我的正文标签中添加了以下代码：

```
<script src="jquery.js"></script>
<script type="text/javascript"> $(window).scroll(function () {
   $('#top').css('left', -($(window).scrollLeft()));
});
</script> 
```

到目前为止，一切都很好！首次加载页面时，在浏览器窗口宽度超过 960 像素时，菜单位于顶部并在容器 div 内居中，并在主要内容上下滚动时保持固定不变。然后，当窗口缩小到小于 960 像素并出现水平滚动条时，菜单会与主要内容一起向右滚动。完美的！可悲的是，还有一个障碍......

虽然页面很窄时滚动效果很好，但如果再次扩大到超过 960 像素，顶部的浮动菜单会停留在左侧，而不是与主要内容一起移回中心，因为它仍然具有 jquery 代码再次设置的 css“left”属性。这打破了我可爱的布局，意味着菜单不再符合主要内容。

不知何故，只要浏览器窗口的宽度超过 960 像素并且水平滚动条消失，我就需要从本质上删除这部分 CSS。

是否有某种 javascript / jquery 可以做到这一点？我对这一切完全陌生，到目前为止，搜索让我无处可去.....

非常感谢任何帮助或建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T20:29:37.303

我会尝试添加到您的 jquery

```
$(window).resize(function(){
    if ($(window).width() > 960) {
        $('#top').css('left', 'auto');
    } else {
        $('#top').css('left', -($(window).scrollLeft()));
    }
}); 
```

那样有用吗？

您可以使用它来检测左滚动：

```
var lastScrollLeft = 0;
$(window).scroll(function() {
var documentScrollLeft = $(document).scrollLeft();
if (lastScrollLeft != documentScrollLeft) {
    //your code here
    $('#top').css('left', -($(window).scrollLeft()));

    lastScrollLeft = documentScrollLeft;
}
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T08:40:13.707

我修好了它！耶！只是去展示等到早上和头脑清醒会做什么。只需在将菜单向左滚动的代码中添加一个非常简单的“if”语句。

这是最终的解决方案，非常感谢 tsdexter！

```
$(window).scroll(function () {
 if (($(window).scrollLeft())>0) {
  $('#top').css('left', -($(window).scrollLeft()));
 }
});

$(window).resize(function(){
 if ($(window).width() > 960) {
  $('#top').css('left', 'auto');
 }
}); 
```

现在似乎在 Firefox 中完美地工作了——还没有尝试过其他的！ *手指交叉*....

# javascript - 使用javascript中的侦听器将输入字段链接在一起

> ID：12012665
> 
> 赞同：0
> 
> 时间：2012-08-17T20:20:29.767
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery 将几个输入字段绑定到 span 元素。例如，我有 2 个带有整数值的输入字段。整数值的总和显示在 span 元素中。现在，当修改输入字段之一时，span 元素应该始终更新（因为这是在 jquery 中使用 .keyup() 事件）。我有一个可行的解决方案。但在我看来，这是一个跛行的解决方案。所以我想知道你会怎么做。先感谢您。

这里的代码：http: [//jsfiddle.net/SJAwb/2/](http://jsfiddle.net/SJAwb/2/)

干杯沃尔夫冈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T20:31:02.877

有没有你不能做的原因：

```
$('input[type="text"]').on('keyup', function(e) {
    if (e.which === 13) e.preventDefault();
    var span = $(this).nextAll('span').first(),
        val = this.value,
        mult = $('#'+span.data("multiplier")).val();
    span.html(( parseFloat(val, 10) * parseFloat(mult, 10) ));
}); 
```

[小提琴](http://jsfiddle.net/SJAwb/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:50:14.717

您应该使用类选择器而不是 ID 选择器。

将所有输入框值相加并乘以乘数。演示中的 div 仅用于展示，并不真正需要。

请参阅下面的方法，

**演示：http:** [//jsfiddle.net/SJAwb/8/](http://jsfiddle.net/SJAwb/8/)

**JS：**

```
$('.listener').each(function () {
    var element = $(this),
        dataBound = $(this).data('bound'),
        dataMultiplier = $(this).data("multiplier"),
        val;

    $('.' + dataBound).on('keyup', {db: dataBound, dm: dataMultiplier}, function (event) {
        /* block ENTER key stroke */
        if (event.which === 13) {
            event.preventDefault();
        }

        /* calculate result */
        val = 0;

        $('.' + event.data.db).each(function (idx, el) {
            val += parseFloat (el.value, 10);
        });

        val = val * parseFloat($('.' + event.data.dm).val());

        if (isNaN(val)) {
          element.html("Please enter a valid number");
        } else {
          element.html(val);
        }
    });
}); 
```

# c# - 将另一个 asp.net 页面加载到当前页面中

> ID：12012666
> 
> 赞同：0
> 
> 时间：2012-08-17T20:20:30.783
> 
> 标签：c#, asp.net

使用带有 C# 的 ASP.NET，我想将另一个页面的内容加载到我的当前页面中。

我`id="maindiv"`在一页上有一个主 div，上面有一个标题。标头包含可点击的链接，这些链接通过 get 变量（如`http://www.mainpage.com&page=nextpage`. 我想在 switch case 中使用 page get 变量从指定页面加载到 maindiv。我可以很好地处理 switch case，但是如何从另一个页面加载响应？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T20:44:45.850

听起来您想为所有页面保持相同的布局（页眉、导航、页脚等）。ASP.NET 2.0 引入了母版页，它们基本上是布局文件，允许您创建填充布局中占位符的内容页面。

> ASP.NET 母版页允许您为应用程序中的页面创建一致的布局。单个母版页定义了您希望应用程序中所有页面（或一组页面）的外观和标准行为。然后，您可以创建包含您要显示的内容的单个内容页面。当用户请求内容页时，他们会与母版页合并以生成将母版页的布局与内容页中的内容相结合的输出。

[这是MSDN 文章](http://msdn.microsoft.com/en-us/library/wtxbf3hh.aspx)中的一个示例。

母版页：

```
<%@ Master Language="C#" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 
    1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server" >
    <title>Master page title</title>
</head>
<body>
    <form id="form1" runat="server">
        <div><asp:contentplaceholder id="Main" runat="server" /></div>
        <div><asp:contentplaceholder id="Footer" runat="server" /></div>
    </form>
</body>
</html> 
```

内容页：

```
<% @ Page Language="C#" MasterPageFile="~/Master.master" Title="Content Page 1" %>
<asp:Content ID="Content1" ContentPlaceHolderID="Main" Runat="Server">
    Main content.
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="Footer" Runat="Server" >
    Footer content.
</asp:content> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T20:27:54.110

一个可能的解决方案是

[在http://geekswithblogs.net/ranganh/archive/2005/04/25/37635.aspx](http://geekswithblogs.net/ranganh/archive/2005/04/25/37635.aspx)中设置 iframe， 您将使用查询字符串参数来设置 iframe 的来源

```
frame1.Attributes["src"] = "http://www.live.com" ; 
```

在后面的代码中

```
frame1.Attributes["src"] = nextpage ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T20:24:53.947

如果您需要逻辑背后的代码，我建议使用面板并基于 URL 变量显示或使用 .ASCX 用户控制文件并基于 URL 变量加载这些文件。

```
<asp:Panel ID="pnl1" runat="server" visible="false">
    page 1...
</asp:Panel>

<asp:Panel ID="pnl2" runat="server" visible="false">
    page 2...
</asp:Panel> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T20:28:43.860

此相关帖子可能会为您的问题提供解决方案：

[如何在运行时动态显示另一个 ASPX 的 DIV 中的 ASPX？](https://stackoverflow.com/questions/2099214/how-to-display-an-aspx-in-another-aspxs-div-dynamically-at-runtime)

# c# - 用于返回分组结果的 Linq 扩展

> ID：12012667
> 
> 赞同：0
> 
> 时间：2012-08-17T20:20:36.857
> 
> 标签：c#, .net, linq

我有以下代码，并试图避免**代码重复** 我想要做的是有一个自定义**扩展方法**，称为“SelectGrouped”

这将接受“Shift”对象，并返回匿名类型（不确定是否可能）

```
var groupedFillingsCurrentShift = currentShift.FilingMeasurements
                    .Where(f => TimeSpan.Parse(f.MeasurementTime.MeasurementTime) == ShiftEnd)
                    .GroupBy(f => new { f.Medium, f.MeasurementTime })
                    .Select(t => new { t.Key.Medium, t.Key.MeasurementTime, VolumeInTanks = t.Sum(s => s.Filing) })
                    .ToList();

if (previousShift != null)
{
    var groupedFillingsPreviousShift = previousShift.FilingMeasurements
        .Where(f => TimeSpan.Parse(f.MeasurementTime.MeasurementTime) == previousShift.ShiftEnd)
        .GroupBy(f => new { f.Medium, f.MeasurementTime })
        .Select(t => new { t.Key.Medium, t.Key.MeasurementTime, VolumeInTanks = t.Sum(s => s.Filing) })
        .ToList(); 
```

我想要实现的是让它看起来像这样

```
var groupedResultCurrentShift = 
   currentShift.SelectGrouped(t=>t.Medium, t.MeasurementTime, t.VolumenInTanks);

var groupedResultPreviousShift = 
   previousShift.SelectGrouped(t=>t.Medium, t.MeasurementTime, t.VolumenInTanks); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T20:32:39.983

不幸的是，你想要的不能以目前的形式完成。

首先，该变量`t`仅在 lambda 中具有值。逗号分隔参数，因此`t`失去了其他参数的范围。

其次，更重要的是，匿名类型根据定义是局部范围的，因为您必须使用“var”来暗示保存它们的变量的类型。您不能将它们作为参数传递，也不能将它们作为返回值返回（好吧，从技术上讲，您可以使用`dynamic`，但我们不要去那里，*拜托*）。

如果您要定义一个可用于保存最终形式的投影数据的命名类型，这将起作用：

```
internal class VolumeData
{
   public string Medium;
   public DateTime MeasurementTime;
   public decimal VolumeInTanks;
}

public static List<VolumeData> GetVolumeData(this Shift shift)
{
   return shift.FilingMeasurements
               .Where(f => TimeSpan.Parse(f.MeasurementTime.MeasurementTime) == ShiftEnd)
               .GroupBy(f => new { f.Medium, f.MeasurementTime })
               .Select(t => new VolumeData{ 
                                Medium = t.Key.Medium, 
                                MeasurementTime = t.Key.MeasurementTime, 
                                VolumeInTanks = t.Sum(s => s.Filing) })
               .ToList();
}

...

var groupedFillingsCurrentShift = currentShift.GetVolumeData();

if (previousShift != null)
    var groupedFillingsPreviousShift = previousShift.GetVolumeData(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:54:19.197

```
var groupedResultCurrentShift = 
 currentShift.SelectGrouped(t=>t.Medium, t.MeasurementTime, t.VolumenInTanks); 
```

没有意义，因为`t`第二个和第三个子句的 the 没有定义，并且`VolumenInTanks`与您尚未创建的属性相关。

我们还有一个问题，因为`Select`您的查询中的 与之前在同一范围内定义的匿名对象有关。这阻止了我们定义一个方法，让我们传入一个定义应该选择什么的 lambda。

然而：

```
currentShift.FilingMeasurements
                .Where(f => TimeSpan.Parse(f.MeasurementTime.MeasurementTime) == ShiftEnd)
                .GroupBy(f => new { f.Medium, f.MeasurementTime })
                .Select(t => new { t.Key.Medium, t.Key.MeasurementTime, VolumeInTanks = t.Sum(s => s.Filing) })
                .ToList(); 
```

相当于；

```
currentShift.FilingMeasurements
                .Where(f => TimeSpan.Parse(f.MeasurementTime.MeasurementTime) == ShiftEnd)
                .GroupBy(f => new { f.Medium, f.MeasurementTime }, s => s.Filing)
                .Select(t => new { t.Key.Medium, t.Key.MeasurementTime, VolumeInTanks = t.Sum() })
                .ToList(); 
```

现在，这还不完全存在，但让我们考虑一下，我们从以下位置获得了相同的信息：

```
currentShift.FilingMeasurements
                .Where(f => TimeSpan.Parse(f.MeasurementTime.MeasurementTime) == ShiftEnd)
                .GroupBy(f => new { f.Medium, f.MeasurementTime }, s => s.Filing)
                .Select(t => new { t.Key, VolumeInTanks = t.Sum() })
                .ToList(); 
```

所以。如果您愿意做`item.Key.Medium`而不是`item.Medium`，那么我们在做生意：

我们需要一个返回类型，所以我们将创建一个：

```
public class GroupedCount<T>
{
  public<T> Key{get;set;}
  public int Count{get;set;}//bit more of a general-purpose name than VolumeInTanks
} 
```

现在，创建我们的方法：

```
public static List<GroupedCount<TKey>> ToGroupedCounts<TSource, TKey>(this IQueryable<TSource> source, Func<TSource, bool> pred, Func<TSource, TKey> keyGen, Func<TSource, int> tallyGen)
{
    currentShift.FilingMeasurements
                .Where(pred)
                .GroupBy(keyGen, tallyGen)
                .Select(t => new GroupedCount<TKey>{ Key = t.Key, Count = t.Sum() })
                .ToList();
} 
```

我们现在可以调用：

```
currentShift.ToGroupedCounts(
  f => TimeSpan.Parse(f.MeasurementTime.MeasurementTime) == ShiftEnd,
  f => new { f.Medium, f.MeasurementTime },
  s => s.Filing
); 
```

由于我们希望这是通用`ToList()`的，除非在特定情况下确实需要它，否则不应调用它，因此返回 IQueryable 更有意义：

```
public static IQueryable<GroupedCount<TKey>> ToGroupedCounts<TSource, TKey>(this IQueryable<TSource> source, Func<TSource, bool> pred, Func<TSource, TKey> keyGen, Func<TSource, int> tallyGen)
{
    currentShift.FilingMeasurements
                .Where(pred)
                .GroupBy(keyGen, tallyGen)
                .Select(t => new GroupedCount<TKey>{ Key = t.Key, Count = t.Sum() });
} 
```

# php - 用于远程查看的 PHP 代理脚本

> ID：12012670
> 
> 赞同：1
> 
> 时间：2012-08-17T20:20:41.610
> 
> 标签：php, proxy

我正在尝试创建一个简单的系统，将网站加载到 iframe 中，以允许通常会因跨域问题而被阻止的内容。

我已经尝试了几个加载[http://www.website.com/index.php?url=http://www.other-site.com](http://www.website.com/index.php?url=http://www.other-site.com)的代理脚本，除了返回不包括脚本、css 和其他资源。

是否有一个好的脚本可以让我访问网站，或者使用 cURL 的可靠方法？

编辑：

我实际上得到了这个工作：

```
$url = $_GET['url'];

$content = file_get_contents($url);

// Fix href= statements 
$content = str_replace('src="','src="'.$url.'/',$content);
$content = str_replace('href="','href="'.$url.'/',$content);

echo $content; 
```

效果很好，我遇到了两个问题：

1.  'src' 和 'href' 替换对亲戚来说效果很好，但我需要确定 src 是相对的还是绝对的。

2.  网站上的链接保留在原始网站上，否定“代理”，我想我可以通过指向 http://www.website.com/index.php?url=http://www.other- 来修复它site.com/[路径]

# php - 通过 AJAX 发送表单 textarea 时的 encodeURIComponent() 和 UTF-8

> ID：12012671
> 
> 赞同：1
> 
> 时间：2012-08-17T20:20:42.110
> 
> 标签：php, ajax, post, utf-8, encodeuricomponent

我**通过 AJAX**方法 POST 将数据发送到 PHP 后端文件。数据来自 textarea，其形式具有下一个属性`accept-charset="UTF-8"`。AJAX 函数发送数据`http[act].send("title=" + encodeURIComponent(field.value)...)`，我的 PHP 后端文件以`header('Content-Type:text/html; charset=UTF-8');`. 数据库接受名称和字段都设置为 UTF-8（这些东西从来没有问题）。

我想我应该在 PHP 后端解码`encodeURIComponent()`func。但是怎么做？

**编辑（对不起）：**

**Fibra Dietética**插入 DB 为**fibra**
**Dietética Acompañada**插入为**AcompaÃ±ada**

...等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-22T05:22:35.253

和平使者在 Ajax 中是正确的，使用

```
encodeURIComponent() 
```

然后在php中，使用

```
rawurldecode() 
```

Ajax 中的示例

```
abc=encodeURIComponent(xxx) 
```

然后在php中，

```
$varName = rawurldecode($_POST['abc']) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:22:58.410

使用`rawurldecode($value)`见这里[http://www.php.net/manual/en/function.rawurldecode.php](http://www.php.net/manual/en/function.rawurldecode.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T20:39:13.037

错误。在执行 INSERT 之前，我在字符串上使用了`htmlentities()` *(PHP) 。*一个很好的选择是使用`strip_tags()` *(PHP)*来避免“ **HTML/Js/...注入**”。感谢大家的帮助。我希望这对某人有用。

# c# - 使用 CodeDom / CSharpCodeProvider 输出 C# 别名（int 等）而不是 CLR 类型（Int32 等）

> ID：12012672
> 
> 赞同：3
> 
> 时间：2012-08-17T20:20:50.487
> 
> 标签：c#, codedom, csharpcodeprovider

使用 CodeDom / CSharpCodeProvider 生成 C# 代码时，是否可以强制输出尽可能使用[C# 别名](http://blogs.msdn.com/b/csharpfaq/archive/2004/03/12/88418.aspx)而不是 CLR 类型？

我目前正在解析生成的 C# 代码并用它们的别名替换 CLR 类型，但我想知道是否可以在代码生成期间执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T05:32:59.557

Microsoft.CSharp.CSharpCodeProvider 默认使用 C# 别名生成代码。

例子：

```
 CodeCompileUnit compileUnit = new CodeCompileUnit();
        CodeNamespace sampleNamespace = new CodeNamespace("Sample");

        CodeTypeDeclaration sampleClass = new CodeTypeDeclaration("SampleClass");
        sampleClass.IsClass = true;
        sampleClass.Members.Add(new CodeMemberField(typeof(Int32), "_sampleField"));

        CodeMemberProperty prop = new CodeMemberProperty();
        prop.Attributes = MemberAttributes.Public | MemberAttributes.Final;
        prop.Name = "SampleProp";
        prop.HasGet = true;
        prop.Type = new CodeTypeReference(typeof(System.Int32));
        prop.GetStatements.Add(new CodeMethodReturnStatement(
    new CodeFieldReferenceExpression(
    new CodeThisReferenceExpression(), "_sampleField")));

        sampleClass.Members.Add(prop);
        sampleNamespace.Types.Add(sampleClass);
        compileUnit.Namespaces.Add(sampleNamespace);

        using (var fileStream = new StreamWriter(File.Create("outputfile.cs")))
        {
            var provider = new Microsoft.CSharp.CSharpCodeProvider();

            provider.GenerateCodeFromCompileUnit(compileUnit, fileStream, null);
        } 
```

会产生：

```
namespace Sample {

    public class SampleClass {

        private int _sampleField;

        public int SampleProp {
            get {
                return this._sampleField;
            }
        }
    }
} 
```

如您所见，虽然我使用了 typeof(Int32)，但它却将其转换为“int”。（Int64 转换为“long”等）

# c++ - 在存在多重继承的情况下唯一标识对象

> ID：12012675
> 
> 赞同：2
> 
> 时间：2012-08-17T20:21:14.750
> 
> 标签：c++

我正在设计一个必须本质上支持操作历史记录（撤消/重做）和序列化的系统。它包含各种实体，许多实体以图的形式链接。

我想通过让操作了解对象的创建、销毁和链接来自动化大部分历史记录工作。我面临的问题如下：

假设我创建对象**A**，然后创建对象**B**，然后链接**A**和**B**。这是三个动作。现在撤消所有操作，操作将移至“重做”列表。现在，重新做一遍。这意味着创建了一个*新* **的 A**对象，创建了一个*新的* **B**对象。为了重做链接操作，我需要知道作用于*旧* **A**和**B**对象的“链接”动作现在将应用于*新* **的 A**和**B**对象。

一个简单的重定位表就可以解决问题；创建新对象时，只需将旧地址映射到新地址，并使用它来解释历史日志中的任何链接关系。问题是，如果涉及多重继承会发生什么？也就是说，链接可能引用指向 A 基址的指针**，***而*不是A**本身**，因此地址可能与重定位表中的地址不同。

 ****系统必须处理数百 GB 的内存，因此出于性能原因，我宁愿不要只是在内部丢弃所有指针并切换到全局唯一 ID 并一直执行表查找。为所有内容都添加一个虚拟基类也是不可取的，因为其中一些类型非常轻量级。

问题是，除了我提到的两个替代方案之外，是否可以通过指向（可能多个）基类之一的指针来唯一标识对象？我是否应该放弃自动化并为所涉及的每种类型编写专门的代码？

**编辑：**

也许我对冗长的解释不够清楚。这是一个展示问题的简单示例：

```
#include <iostream>

using namespace std;

struct A { int x; };

struct B { int y; };

struct AB : A, B { int z; };

int main()
{
    AB ab;

    AB* pab = &ab;
    A* pa = &ab;
    B* pb = &ab;

    cout << "pab: " << pab << endl;
    cout << "pa: " << pa << endl;
    cout << "pb: " << pb << endl;
} 
```

一种可能的输出是：

```
pab: 0x7fff30b6a400
pa: 0x7fff30b6a400
pb: 0x7fff30b6a404 
```

如您所见，尽管它们来自同一个对象，但它们`pb`的值与 不同。`pab`我需要一种方法来知道它们都标识同一个对象，原因如上所述（执行/撤消操作可能会在新位置重新创建对象，因此必须更新所有指向它的指针。）****

# algorithm - 字符串 A 中有多少个不包含字符串 B 作为子字符串的不同子字符串

> ID：12012676
> 
> 赞同：-3
> 
> 时间：2012-08-17T20:21:16.390
> 
> 标签：algorithm, knuth-morris-pratt

如何使用 KMP 算法查找不包含字符串 B 作为子字符串的字符串 A 的不同子字符串的数量？

我使用 KMP 算法解决了另一个问题，但找不到如何用 KMP 解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T04:55:57.020

我认为 KMP 是计数问题中的简单部分，你需要一个非常清晰的头脑。使用 KMP，您可以依次遍历 A 的字符，并检测 A 中结束出现 B 的字符。您可以使用它来计算 A 中包含 B 的子串的数量。

如果 A 的一个字符结束了 B 的出现，那么每个以该结尾的子字符串开始足够远以包含 B 实际上包含 B。太短而不能包含 B 的子字符串显然不包含。因此，在这种情况下，您可以计算以包含 B 的字符结尾的 A 子串的数量。

如果 A 的字符没有结束 B 的出现，那么每个以该结尾的子字符串开始足够远以包含先前出现的 B 实际上包含 B。因此（假设您记得 B 最后一次出现的位置）您可以再次计算在此位置结束的包含 B 的子字符串的数量。

所以（在时间上与 A 的长度加上 B 的长度成线性关系，因为计算在每个位置结束的子串的数量只是做一些简单的算术）你可以计算 A 的包含 B 的子串的数量。当然，你想要不包含 B 的子串的数量，但 A 的子串总数只是 A 长度的二次方，所以这也很容易。

# android - 导入 Android APK 扩展库错误

> ID：12012677
> 
> 赞同：1
> 
> 时间：2012-08-17T20:21:17.240
> 
> 标签：android, eclipse, apk

我已经按照[Android dev](http://developer.android.com/guide/google/play/expansion-files.html#Testing)上的步骤在 Google Play 上加快了 APK 扩展包的实现。我从 SDk 管理器下载了这两个包，将它们中的每一个作为库项目导入到 Eclipse 中（如下所示的链接说明），我收到了

`[2012-08-17 13:09:57 - library] Unable to resolve target 'android-15' [2012-08-17 13:09:57 - com.example.android.market.licensing.MainActivity] Unable to resolve target 'android-15' [2012-08-17 13:09:57 - test] Unable to resolve target 'android-15'`

我通过将 manifest.xml 中的目标 API 从 15 更改为 16 来解决此问题

但是当我在我的项目属性中分配 libvraries 时，会弹出另一个错误：

```
[2012-08-17 13:13:16 - MyApp ]     (skipping file '.nores' due to ANDROID_AAPT_IGNORE pattern '.*')
[2012-08-17 13:13:16 - MyApp ] invalid resource directory name: /Users/calvin/Desktop/android-sdk-macosx/extras/google/play_apk_expansion/downloader_library/res/res 
```

我在这里做错了什么？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T18:40:02.217

刚刚解决了这个问题并弄清楚了 - 该`downloader_library/res`目录有一个额外的嵌套层（不知道为什么）。`downloader_library/res/res`为我修复`downloader_library/res`此错误。

# objective-c - UITableView 动画期间的用户交互

> ID：12012684
> 
> 赞同：5
> 
> 时间：2012-08-17T20:21:57.500
> 
> 标签：objective-c, ios, uitableview, animation, touch

我有一个 UITableView，我的单元格处理所有的触摸而不是 tableview 本身。细胞需要立即响应单击和双击。（是的，这确实意味着单击然后再双击，我希望它们都被调用）。

单击操作是在点击的单元格下方放入另一个单元格（该单元格是上述单元格的菜单）。我为此使用了 insertRowsAtIndexPaths。然而，在该动画期间，用户交互似乎完全失败，所以我无法在第二次点击时启动该操作。

使用 2 个 UITapGestureRecognizers（单击和双击）并将单个设置为等待双重失败可以工作，但会导致单击操作明显延迟。

我知道在 UIView 动画期间您可以标记它 UIViewAnimationOptionAllowUserInteraction 并且它会正常工作，但这不是 UITableView 中的选项。

关于如何在 tablview 动画期间继续获取触摸事件的任何想法？

我尝试过使用 UITapGestureRecognizers，使用 touchesEnded 和 touchesBegan，在动画期间没有人注册过触摸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:58:48.040

只需创建自己的 for 循环来执行动画。我使用了自己的递归逻辑，看起来像动画 0.3 秒。

```
NSInteger i = 0;

-(void)recursiveMethod
{
    //Doing Animation task very slowly...
    //For example, Transforming UIView.

    [aView setTransform: CGAffineTransformMakeScale(i/100.0,i/100.0)];

    if(i<100)
    {
        [self performSelector:@selector(recursiveMethod) afterDelay:0.3/100.0];
        i++;
    }
} 
```

您还可以执行触摸动作。编译器不会禁用您的用户交互。

# c# - 如何浏览文本文件并将项目添加到列表框 c#/.net

> ID：12012685
> 
> 赞同：0
> 
> 时间：2012-08-17T20:22:03.840
> 
> 标签：c#, listbox, file-browser, filebrowse

我想通过浏览包含如下文本的文件将项目添加到文本文件中的“列表框”：

> “一”
> 
> “二”
> 
> “三”
> 
> “还有很多”

请告诉我如何浏览文本文件并将项目添加到列表框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T20:29:17.210

下面的代码读取一个文件并将文本逐行放入列表框中

```
 ListBox lb = new ListBox();
    System.IO.StreamReader sr = new System.IO.StreamReader("Path to File");

    while (!sr.EndOfStream)
    {
        lb.Items.Add(sr.ReadLine());
    }

    sr.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:25:10.110

```
foreach (var line in System.IO.File.ReadAllLines("file.txt"))
{
   listbox.Items.Add(line);
} 
```

# perl - 为什么 DateTime 会在时间戳中添加 T 分隔符？

> ID：12012689
> 
> 赞同：15
> 
> 时间：2012-08-17T20:22:19.263
> 
> 标签：perl, datetime

我的代码：

```
print DateTime->now; 
```

回复：

> 2012-08-17T20:16:37

为什么会有T？有没有我忘记的选项？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-17T20:28:34.617

这`T`只是划定*时间*的标准（ISO 8601）方式。要使用不同的格式，请考虑使用[`strftime`](http://search.cpan.org/~drolsky/DateTime-0.76/lib/DateTime.pm#strftime_Patterns)or [`format_cldr`](http://search.cpan.org/~drolsky/DateTime-0.76/lib/DateTime.pm#CLDR_Patterns)。

例如，要使用空格，请使用`DateTime->now->format_cldr("YYYY-MM-dd hh:mm:ss")`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T20:30:28.507

`DateTime`除非您在构造函数中指定了格式化程序，否则对对象进行字符串化使用 ISO 8601 格式。请参阅文档中的[格式化程序和字符串化。](http://search.cpan.org/perldoc?DateTime#Formatters_And_Stringification)`iso8601`方法是：

```
sub iso8601 { join 'T', $_[0]->ymd('-'), $_[0]->hms(':') } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T20:30:49.997

[这是DateTime](https://metacpan.org/module/DateTime)生成的默认输出格式ISO-8601。如果你想要别的东西，你需要使用`strftime`or`format_cldr`方法或其中一个`DateTime::Format::*`模块来输出不同的格式，例如：

```
print DateTime->now->format_cldr("YYYY-MM-dd hh:mm:ss"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T20:36:14.213

这是日期和时间的 iso 标准，请参阅[http://en.wikipedia.org/wiki/ISO_8601](http://en.wikipedia.org/wiki/ISO_8601)

参见例如[您如何在 Perl 中读取系统时间和日期？](https://stackoverflow.com/questions/487791/how-do-you-read-the-system-time-and-date-in-perl)讨论以可格式化的方式读取日期/时间。

# ruby-on-rails-3.2 - Ruby on Rails 中的实例和类方法

> ID：12012692
> 
> 赞同：0
> 
> 时间：2012-08-17T20:22:41.877
> 
> 标签：ruby-on-rails-3.2

[最近我在 Ruby on Rails http://railscasts.com/episodes/206-action-mailer-in-rails-3](http://railscasts.com/episodes/206-action-mailer-in-rails-3)中看到一个很奇怪的代码

```
 class UserMailer < ActionMailer::Base
      default :from => "ryan@railscasts.com"

      def registration_confirmation(user)
        @user = user
        attachments["rails.png"] = File.read("#{Rails.root}/public/images/rails.png")
        mail(:to => "#{user.name} <#{user.email}>", :subject => "Registered")
      end
    end

    #controller
    UserMailer.registration_confirmation(@user).deliver 
```

这怎么可能？`registration_confirmation`不是类方法（或有点像 C# 中的静态方法），它是一个**实例**方法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T21:00:38.523

这有点棘手。

因为它派生自 AbstractController，所以定义的方法被添加为公共实例方法。(http://api.rubyonrails.org/classes/ActionMailer/Base.html)

您永远不会实例化您的邮件程序类。相反，您只需调用您在类本身上定义的方法。

如果您检查[AbstractController::Base](https://github.com/rails/rails/blob/1eb6189404f53ae59e4cb47ef9d5ad3a9bec3064/actionpack/lib/abstract_controller/base.rb)，您可以看到类在哪里被抽象，并且操作方法被转换为公共实例方法。

# xpages - 使用带有 href 属性的 tooltipDialog 但内容永远不会加载？

> ID：12012697
> 
> 赞同：1
> 
> 时间：2012-08-17T20:23:22.703
> 
> 标签：xpages

我想从 tooltipDialog 中的 url 加载内容，我正在使用 href 属性。它只是显示一个空白的工具？有没有人让这个工作？

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core"
    xmlns:xe="http://www.ibm.com/xsp/coreex">

    <xp:label value="Label" id="label1">
        <xp:eventHandler event="onclick" submit="false">
            <xp:this.script><![CDATA[XSP.openTooltipDialog("#{id:tooltipDialog1}", "#{id:label1}")]]></xp:this.script>
        </xp:eventHandler>
    </xp:label>
    <xe:tooltipDialog id="tooltipDialog1"
        href="http://www.netexperts.com" loadingMessage="Loading"
        errorMessage="Error">
    </xe:tooltipDialog>
</xp:view> 
```

谢谢，霍华德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T10:03:25.680

出于安全原因，Web 浏览器不会从其他域加载内容。只能显示指向当前服务器/域的 URL。如果您想从其他域加载内容，您需要一个可在您的域下访问的代理，并将内容传送到 Web 浏览器。

尝试从同一个数据库加载一个 xpage，这应该可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:09:19.750

根据 Daniel 的建议，将 Dojo 内容窗格添加到 tooltipDialog 效果很好。

# scala - 生成 Play 2 的 javascript 路由器的简洁方式

> ID：12012703
> 
> 赞同：10
> 
> 时间：2012-08-17T20:23:54.547
> 
> 标签：scala, playframework-2.0

目前我以相当冗长的方式定义我的应用程序的 javascript 路由器

```
def javascriptRoutes = Action { implicit request =>
  import routes.javascript._
  Ok(Routes.javascriptRouter("jsRoutes")(
    Login.method1,Login.Method2,
    OtherController.method1,OtherController.method2,
    //[...]
  )).as("text/javascript")
} 
```

我真正想做的是用文件`javascriptRouter`中的所有路由创建一个，所以每次添加新的控制器方法时我`routes`都不必手动更新定义。`javascriptRoutes`

有没有办法完成这项任务，或者是否有一种稍微不那么冗长的方式来定义`javascriptRouter`？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-19T07:41:14.993

你可以像这样通过反射来做到这一点：

```
val routeCache = {
    import routes._
    val jsRoutesClass = classOf[routes.javascript]
    val controllers = jsRoutesClass.getFields().map(_.get(null))
    controllers.flatMap { controller =>
        controller.getClass().getDeclaredMethods().map { action =>
            action.invoke(controller).asInstanceOf[play.core.Router.JavascriptReverseRoute]
        }
    }
}

def javascriptRoutes = Action { implicit request =>
    Ok(Routes.javascriptRouter("jsRoutes")(routeCache:_*)).as("text/javascript")
} 
```

这是从 target/scala-2.xx/src_managed 中生成的源文件派生的。您实际上可以添加自己的源生成器并自己解析路由文件，但我发现通过反射更容易做到这一点。

您可能想要做的另一件事是过滤掉您不想要的方法，因为这将为您提供所有路由（包括 javascriptRouter 本身）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-17T09:08:36.677

此外，如果您使用的是 Play 2.4，则某些类/包已更改：

```
def javascriptRoutes = Action { implicit request =>
  Ok(play.api.routing.JavaScriptReverseRouter("jsRoutes")(routeCache:_*)).as("text/javascript")
}

val routeCache: Array[JavaScriptReverseRoute] = {
  import routes._
  val jsRoutesClass: Class[javascript] = classOf[routes.javascript]
  val controllers = jsRoutesClass.getFields.map(_.get(null))
  val met = for (
    controller <- controllers;
    method <- controller.getClass.getDeclaredMethods if method.getReturnType == classOf[play.api.routing.JavaScriptReverseRoute]
  ) yield method.invoke(controller).asInstanceOf[play.api.routing.JavaScriptReverseRoute]
  met
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-28T13:40:18.227

我在java中需要它。在这里复制它以防它对某人有用。

```
public static Result javascriptRoutes() throws IllegalAccessException, IllegalArgumentException,
        InvocationTargetException {

    // use reflection to get the fields of controllers.routes.javascript
    Set<Object> reverseRoutes = new HashSet<Object>();
    for (Field f : controllers.routes.javascript.class.getFields()) {
        // get its methods
        for (Method m : getAllMethods(f.getType(), withReturnType(JavascriptReverseRoute.class))) {
            // for each method, add its result to the reverseRoutes
            reverseRoutes.add(m.invoke(f.get(null)));
        }
    }

    // return the reverse routes
    response().setContentType("text/javascript");
    return ok(Routes.javascriptRouter("jsRoutes",
            reverseRoutes.toArray(new JavascriptReverseRoute[reverseRoutes.size()])));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-04T07:59:14.107

thatsmydoing 的非常好的解决方案。如果您在其他一些子包下有 JavaScript 路由，则需要像这样声明 routeCache

```
val routeCache = {
  val jsRoutesClass = classOf[controllers.api.routes.javascript]
  val controllerArray = jsRoutesClass.getFields().map(_.get(null))
  controllerArray.flatMap { controller =>
    controller.getClass().getDeclaredMethods().map { action =>
    action.invoke(controller).asInstanceOf[play.core.Router.JavascriptReverseRoute]
  }
 }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-20T05:50:36.547

扩展 @rochb 对 Play 2.4 Java 的回答，其中包名称略有不同，支持多个控制器包。

```
public Result javascriptRoutes() throws IllegalAccessException, IllegalArgumentException,
        InvocationTargetException {

    // use reflection to get the fields of controllers.routes.javascript and other controller packages
    Set<Object> reverseRoutes = new HashSet<Object>();
    Class[] routeClasses = {controllers.routes.javascript.class, com.example.package1.routes.javascript.class, com.example.package2.routes.javascript.class};
    for (int i = 0; i < routeClasses.length; i++) {
        for (Field f : routeClasses[i].getFields()) {
            // get its methods
            for (Method m : getAllMethods(f.getType(), withReturnType(play.api.routing.JavaScriptReverseRoute.class))) {
                // for each method, add its result to the reverseRoutes
                reverseRoutes.add(m.invoke(f.get(null)));
            }
        }
    }
    // return the reverse routes
    response().setContentType("text/javascript");
    return ok(Routes.javascriptRouter("jsRoutes",
            reverseRoutes.toArray(new play.api.routing.JavaScriptReverseRoute[reverseRoutes.size()])));
} 
```

# c++ - C++ STL 容器集的奇怪行为

> ID：12012719
> 
> 赞同：0
> 
> 时间：2012-08-17T20:25:51.233
> 
> 标签：c++, stl, set

使用集合时我有一些非常奇怪的行为（它实际上是集合的 3d 向量）。我在循环结束时有以下内容（注释是第四次循环发生时的行为，所以它不会立即发生）

```
cout<<"size of set at 3 0 0 is "<<particles_celllist.at(3).at(0).at(0).size()<<endl; 
//returns 4

grid_locations[box_counter][0]=i*xgridlength;
cout<<"size of set at 3 0 0 is "<<particles_celllist.at(3).at(0).at(0).size()<<endl; 
//returns 4

grid_locations[box_counter][1]=(i+1)*xgridlength;
cout<<"size of set at 3 0 0 is "<<particles_celllist.at(3).at(0).at(0).size()<<endl; 
//returns 4

grid_locations[box_counter][2]=j*ygridlength;
cout<<"size of set at 3 0 0 is "<<particles_celllist.at(3).at(0).at(0).size()<<endl; 
//returns 4

grid_locations[box_counter][3]=(j+1)*ygridlength;
cout<<"size of set at 3 0 0 is "<<particles_celllist.at(3).at(0).at(0).size()<<endl; 
//returns 4

grid_locations[box_counter][4]=k*zgridlength;
cout<<"size of set at 3 0 0 is "<<particles_celllist.at(3).at(0).at(0).size()<<endl; 
//returns 4

grid_locations[box_counter][5]=(k+1)*zgridlength;
cout<<"size of set at 3 0 0 is "<<particles_celllist.at(3).at(0).at(0).size()<<endl;
// returns 1071644672

grid_rank_lookup[box_counter]=use_rank;
cout<<"size of set at 3 0 0 is "<<particles_celllist.at(3).at(0).at(0).size()<<endl;
// returns 1071644672

box_counter++;
cout<<"size of set at 3 0 0 is "<<particles_celllist.at(3).at(0).at(0).size()<<endl;
// returns 1071644672

use_rank=(use_rank+1)%world.size();
cout<<"size of set at 3 0 0 is "<<particles_celllist.at(3).at(0).at(0).size()<<endl;
// returns 1071644672 
```

`particles_celllist`、`grid_rank_lookup`和的定义`grid_locations`是：

```
vector<vector<vector<set<int> > > > particles_celllist;
map<int,vector<double> > grid_locations
map<int,int> grid_rank_lookup 
```

注意：第一个是局部变量，而另外两个是函数的输入。

我不知道是什么原因造成的，甚至不知道如何找出问题所在。我在代码本身的范围内没有看到任何合乎逻辑的解释，所以也许这与内存有关？评论是当我在单个处理器上运行它时会发生什么，但如果我在 2 个处理器上执行它（它是一个 mpi 代码）它似乎在随机处理器上随机发生（我没有包括所有细节这里是因为代码很长，但是如果您觉得这里的信息不足以猜测出什么问题，我可以发布它）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:33:38.823

`1071644672``1.75`具有与（作为 32 位值） 相同的值表示。

```
grid_locations[box_counter][5]=(k+1)*zgridlength; 
```

正在覆盖属于 的内存`particles_celllist`。可能`grid_locations[box_counter]`不够大，`grid_locations[box_counter][5]`无法正确访问内存；尝试将其更改为`grid_locations[box_counter].at(5)`并查看是否损坏。

# javascript - JqueryMobile 页面的结构？

> ID：12012720
> 
> 赞同：1
> 
> 时间：2012-08-17T20:25:55.457
> 
> 标签：javascript, jquery, asp.net-mvc, jquery-mobile

我在需要时使用 Asp.net MVC 来拉取我的页面。我的页面结构是：

```
{
   Layout = "";
}

  <div data-role="page"> 
     ....

      <script type="text/javascript">
        $(document).one("pageinit", function () {

          ....
      </script>

  </div> 
```

我应该像上面那样保留我的页面结构，还是应该将我的脚本放在一个全局外部 javascript 文件中（在这种情况下，我如何将每个“pageinit”与正确的页面相关联）？

我遇到的另一个问题是在 chrome 中调试嵌入式脚本。这与它嵌入的事实有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T05:28:36.627

This is what I have done;

Firstly, I have all my scripts that I will ever need in one external JS file.

In my MVC layout page I have created the div for the data-role wrapper to set its id attribute from a property each and every controller action will return with a unique value.

The layout page.

```
<body class="ui-mobile-viewport">
    <div data-role="page" id="@ViewBag.PageId"> 
```

Then in my Controller Action I return a unique value to the view;

```
public ActionResult Index()
        {
             ViewBag.PageId = "pageCustomers";

            return View();
        } 
```

This means that I can bind to the page.init event as follows. The script below is wrapped in `<script>` tags in the in the MVC view that the controller returns and allows custom JS code for that particular view to be fired when the view has loaded.

```
 $('#pageCustomers').live('pageinit', function (event) {
    // do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T22:12:16.447

如果您移动到单个 JS 包含，我建议这样做，那么您将更容易维护代码，因为它会在一个地方。

`pageinit`您可以根据正在初始化的伪页面的 ID运行代码：

```
//setup initialization code for each pseudo-page that needs it
var myCode = {
    someID : function (event) {
        //run initialization code for the pseudo-page with the ID of "someID"
    },
    someOtherID : function (event) {
        //run initialization code for the pseudo-page with the ID of "someOtherID"
    }
};

//setup a delegated event handler for each pseudo-page's "pageinit" event
$(document).on('pageinit', '.ui-page', function (event) {

    //check if a function for this pseudo-page exists
    if (this.id in myCode) {

        //since the function exists, call it and pass "this" as the current pseudo-page as well as passing-in the "event" object
        myCode[this.id].call(this, event);
    }
}); 
```

# wpf - 如何在 XAML 中手动将 ListViewItem 添加到 WPF 多列 ListView（无绑定）

> ID：12012721
> 
> 赞同：7
> 
> 时间：2012-08-17T20:25:54.757
> 
> 标签：wpf, xaml, listview, gridview, listviewitem

我在 Expression Blend 中的 ListView 设计有一个问题，这比我想象的要难。

我只想使用 XAML 绘制一个屏幕。这将不会在应用程序中运行，它只是一个静态设计研究，应仅在 Expression Blend 的设计窗口中呈现以供查看。

到目前为止我有这个：

```
<ListView x:Name="examList" SelectionMode="Single">
    <ListView.View>
        <GridView>
            <GridViewColumn Header="Date" Width="Auto"/>
            <GridViewColumn Header="Setup" Width="Auto"/>
            <GridViewColumn Header="Protocol" Width="Auto" />
            <GridViewColumn Header="Channels" Width="Auto"/>
            <GridViewColumn Header="Duration" Width="Auto"/>
        </GridView>
    </ListView.View>

    <ListViewItem>
        <TextBlock Text="stuff" />  <!-- what should I put here??? -->
    </ListViewItem>
</ListView> 
```

问题是：我不知道如何为每个字段（GridView 中的每一列）创建一个字符串或数字值的 ListViewItems。

我将不胜感激任何帮助，无论是否有代码隐藏，但我的工作流程的一个必要要求是它在 Expression Blend 中的设计时呈现，而无需运行应用程序，并且最好不要从另一个文件绑定数据，但直接手动输入 XAML（我不介意，实际上我想要它）。

我找到[了这个答案](https://stackoverflow.com/a/2316024/401828)，但我认为它不能满足我的需求。

谢谢阅读！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T21:07:41.750

您可以在您的内部使用字符串数组，`ListViewItem`并使用`DisplayMemberBinding`指定哪个索引应显示在哪个列中。

```
<ListView x:Name="examList" SelectionMode="Single">
    <ListView.View>
        <GridView>
            <GridViewColumn Header="Date" Width="Auto" 
                            DisplayMemberBinding="{Binding [0]}"/>
            <GridViewColumn Header="Setup" Width="Auto" 
                            DisplayMemberBinding="{Binding [1]}"/>
            <GridViewColumn Header="Protocol" Width="Auto" 
                            DisplayMemberBinding="{Binding [2]}"/>
            <GridViewColumn Header="Channels" Width="Auto" 
                            DisplayMemberBinding="{Binding [3]}" />
            <GridViewColumn Header="Duration" Width="Auto" 
                            DisplayMemberBinding="{Binding [4]}"/>
        </GridView>
    </ListView.View>

    <ListViewItem>
        <x:Array Type="{x:Type sys:String}">
                <sys:String>This is Date</sys:String>
                <sys:String>This is Setup</sys:String>
                <sys:String>This is Protocol</sys:String>
                <sys:String>This is Channels</sys:String>
                <sys:String>This is Duration</sys:String>
            </x:Array>        
    </ListViewItem>
</ListView> 
```

`sys:`在哪里`xmlns:sys="clr-namespace:System;assembly=mscorlib"`

或者您可以创建自己的数据类型来保存这些值：

```
public class Exam
{
    public string Date { get; set; }

    public string Setup { get; set; }

    //...
} 
```

并将其用于`ListViewItem`：

```
<ListView x:Name="examList" SelectionMode="Single">
    <ListView.View>
        <GridView>
            <GridViewColumn Header="Date" Width="Auto" 
                            DisplayMemberBinding="{Binding Date}"/>
            <GridViewColumn Header="Setup" Width="Auto" 
                            DisplayMemberBinding="{Binding Setup}"/>    
        </GridView>
    </ListView.View>

    <ListViewItem>
        <local:Exam Date="2001/1/1" Setup="Some setup" />
    </ListViewItem>
</ListView> 
```

Where`local:`指向你的`Exam`类命名空间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-27T02:50:02.023

您需要像“[0]”这样的索引绑定。

```
<Grid>
    <ListView x:Name="lv" />
</Grid>

lv.Items.Clear();
var gv = new GridView();
lv.View = gv;

var columns = new List<string> { "Date", "Setup", "Protocol", "Channels", "Duration" };
for(int index = 0; index < columns.Count; index++)
{
    gv.Columns.Add(new GridViewColumn
    {
        Header = columns[index],
        DisplayMemberBinding = new Binding("[" + index.ToString() + "]")
    });
}

// Populate list
var row1 = new List<string> { "Date1", "Setup1", "Protocol1", "Channels1", "Duration1" };
var row2 = new List<string> { "Date2", "Setup2", "Protocol2", "Channels2", "Duration2" };
lv.Items.Add(row1);
lv.Items.Add(row2); 
```

# graphite - 如果 statsd 无法联系 Graphite 会怎样？

> ID：12012723
> 
> 赞同：0
> 
> 时间：2012-08-17T20:25:58.370
> 
> 标签：graphite, statsd

我是 Node.js 的新手，但是阅读 statsd 源代码后，在我看来，如果由于某种原因 Graphite 后端变得无法访问，那么 statsd 只会将其收集的统计数据洒在地板上，而不是将它们保留在不断增长的缓存中统计数据。这个对吗？

（我并不担心丢弃统计数据，而是担心无法联系 Graphite 的不断增长的 statsd 堆。所以，如果我对代码的阅读是正确的，我很高兴！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T17:54:46.923

简短的回答：它是可配置的，但默认行为是您想要的行为（缓存在刷新周期之间被丢弃）。

长答案：statsd 实际上并不向石墨报告。但是，它可以加载一个可以这样做的插件（并且它与这样的插件一起提供）。

要理解的重要一点是，虽然插件可以报告初始化成功或失败，但刷新事件没有回调或其他反馈选项。石墨插件注册 2 个事件，状态和刷新（[https://github.com/etsy/statsd/blob/master/backends/graphite.js](https://github.com/etsy/statsd/blob/master/backends/graphite.js)第 230 行），其中刷新是唯一报告指标的事件。

石墨插件注册刷新事件。在刷新事件期间，节点 EventEmitter 将调用所有已注册的插件，并带有一份缓存的统计数据。不同的副本被发送到每个插件，没有订单保证。如果您查看[https://github.com/etsy/statsd/blob/master/stats.js](https://github.com/etsy/statsd/blob/master/stats.js)第 32 行，您会看到正在发生这种情况，您将在其中看到 metrics_hash 正在创建和填充，然后用于发出刷新事件（第 122 行）。

缓存本身在副本被填充后立即被删除（第 77-120 行）。正如您在代码中看到的那样，您可以通过在配置文件中添加一个条目来更改此默认行为，以用于特定的度量类型（时间、仪表、计数器、集合）。例如，要保留计数器缓存，您应该将 deleteCounters = true 添加到您的配置中。请注意，无论任何插件的成功或失败，此配置将始终保留缓存的指标。

# jersey - 在 Jersey 中使用 StreamingOutput 作为响应实体的示例

> ID：12012724
> 
> 赞同：77
> 
> 时间：2012-08-17T20:26:01.187
> 
> 标签：jersey

有人可以发布一个示例，说明如何在 Jersey 中将其设置`StreamingOutput`为`Response`对象中的实体吗？

我一直找不到这样的例子。

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-08-17T20:39:28.003

看看这是否有帮助：

```
@GET
@Produces(MediaType.TEXT_PLAIN)
public Response streamExample() {
  StreamingOutput stream = new StreamingOutput() {
    @Override
    public void write(OutputStream os) throws IOException,
    WebApplicationException {
      Writer writer = new BufferedWriter(new OutputStreamWriter(os));
      writer.write("test");
      writer.flush();  // <-- This is very important.  Do not forget.
    }
  };
  return Response.ok(stream).build();
} 
```

# javascript - 使用 gmaps4rails 显示虚线

> ID：12012725
> 
> 赞同：1
> 
> 时间：2012-08-17T20:26:02.670
> 
> 标签：javascript, ruby-on-rails, ruby, google-maps-api-3, gmaps4rails

**环境：** MacOSX、RoR 3.2.6、gmaps4rails 1.5.5、Google Maps API V3

**愿望：**使用 gmaps4rails 在地图上显示折线会很好，它可以支持谷歌地图中的符号机制。

**参考文档：**

[Google Maps API 折线符号文档](https://developers.google.com/maps/documentation/javascript/overlays#PolylineSymbols)

[谷歌地图 API 符号参考](https://developers.google.com/maps/documentation/javascript/reference#Symbol "谷歌地图 API 符号参考")

[折线上符号的实时示例](http://googlegeodevelopers.blogspot.com/2012/06/powerful-data-visualization-with.html)

[折线上的 Gmaps4Rails 文档](https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Polylines)

**问题的当前状态**我目前能够使用普通属性（strokeColor、strokeWeight、strokeOpacity）来绘制使用 gmaps4rails 的折线。当我尝试添加元数据以在线创建符号时，问题就出现了。

**谷歌地图中的工作代码**

从折线上符号的文档中，您可以创建一个图标数组，其中包含 1-n 个图标元素。一个工作样本的例子是：

```
dashed = new google.maps.Polyline({ 
  path: [
    new google.maps.LatLng(40, -80),
    new google.maps.LatLng(-50, 80)
  ],
  geodesic: true,
  strokeOpacity: 0.0,
  strokeColor: 'yellow',
  icons: [{
    icon: {
      path: 'M 0,-2 0,2',
      strokeColor: 'red',
      strokeOpacity: 1.0,          
    },
    repeat: '24px'
  }],
  map: map,
}); 
```

其中虚线是要创建的折线，而图标数组是通过 Javascript 中的 SVG 内联定义的。

在 Chrome 检查窗口中检查对象并在地图完成之前设置断点时，您会得到一个格式如下的对象（删除了通用访问器和对象引用）：

```
dashed
  geodesic: true
  icons: Array[1]
    0: Object
      icon: Object
        path: "M 0,-2 0,2"
        strokeColor: "red"
        strokeOpacity: 1
      repeat: "24px"
      length: 1
  latLngs: Nf
  map: sh
  strokeColor: "yellow"
  strokeOpacity: 0 
```

这一切都很好。然而，它是在静态 html 中创建并应用于 onLoad() 函数的 javascript。

**我尝试使用 gmaps4rails 进行复制**

我有一个通用地图控制器，可以加载多个多边形、符号和折线。如前所述，获得通用折线是没有问题的。这是控制器中的 Ruby 代码，我试图用它来生成带有基本虚线符号的折线。

```
# Array to push created lines into for pushing through JSON
polyline_array = []
# Array to push the icons created into for use by the gmaps4rails.base.js.coffee
icons_array = []
# SVG path representation of symbol
symbol = {:path => 'M 0,-2 0,2', :strokeColor => 'red', :strokeOpacity => 1.0}
# Create actual instance of the icon element to push to the icons array
tmpIcon = {:icon => symbol, :repeat => '24px'}
# Push to the icons array
icons_array.push(tmpIcon)

@lines.each do |line|
  tmpLine = []
  line.points.each do |point|
    # Only populate the icon and line style for the first point in the
    # polylines point array
    if point == line.points.first
      tmpPoint = {:clickable => true, :linename => line.name,
        :icons => icons_array, :strokeOpacity => 0.0, :strokeColor => 'yellow'}
    else
      tmpPoint = {}
    end
    tmpPoint.merge ! :lat => point.latitude, :lng => point.longitude
    tmpLine.push(tmpPoint)
  end
  polyline_array.push(tmpLine)
end
@polyline_json = polyline_array.to_json 
```

我对 gmaps4rails.googlemaps.js.coffee 脚本进行了修改，以将图标插入到折线创建函数中。

```
for element in polyline
  #if we have a coded array
  if element.coded_array?
    decoded_array = new google.maps.geometry.encoding.decodePath(element.coded_array)
    #loop through every point in the array
    for point in decoded_array
      polyline_coordinates.push(point)

  #or we have an array of latlng
  else
    #by convention, a single polyline could be customized in the first array or it uses default values
    if element == polyline[0]
      strokeColor   = element.strokeColor   || @polylines_conf.strokeColor
      strokeOpacity = 0
      # Set explicit strokeOpacity to 0 to try and match example that works
      # Would do something sexy later
      #strokeOpacity = element.strokeOpacity || @polylines_conf.strokeOpacity
      # Comment out strokeWeight to make it match object sent in working example
      #strokeWeight  = element.strokeWeight  || @polylines_conf.strokeWeight
      clickable     = element.clickable     || @polylines_conf.clickable
      zIndex        = element.zIndex        || @polylines_conf.zIndex
      icons         = element.icons         || @polylines_conf.icons

    #add latlng if positions provided
    if element.lat? && element.lng?
      latlng = @createLatLng(element.lat, element.lng)
      polyline_coordinates.push(latlng)

# Construct the polyline
new_poly = new google.maps.Polyline
  path:         polyline_coordinates
  strokeColor:  strokeColor
  strokeOpacity: strokeOpacity
  # Comment out since it doesn't exist in the object since it was commented
  # out above
  #strokeWeight: strokeWeight
  clickable:    clickable
  zIndex:       zIndex
  icons:        icons

#save polyline
polyline.serviceObject = new_poly
new_poly.setMap(@serviceObject) 
```

这就是改变的内容以及我如何填充驱动折线创建的 json。

如果我通过在创建后立即设置断点来检查 Chrome 中的“new_poly”对象，并且它已使用 setMap 函数添加到地图中，那么这就是返回的对象（删除了通用访问器和对象引用）。

```
new_poly
  icons: Array[1]
    0: Object
      icon: Object
        path: "M 0,-2 0,2"
        strokeColor: "red"
        strokeOpacity: 1
      repeat: "24px"
      length: 1
  latLngs: Nf
  map: xh
  strokeColor: "yellow"
  strokeOpacity: 0 
```

**所以说了这么**多， 我不知道发生了什么。似乎从所有意图和目的来看，添加到地图的折线对象在结构上都是相同的。gmaps4rails 中是否存在我在如何向地图中添加内容时遗漏的阶段？

**2012 年 8 月 21 日更新 1** 我已将所有内容转换为使用该分支。但是我遇到了同样的问题。我使用 jsfiddle 从 google/objects/polyline.coffee 中的 mergeOptions 对象获取输出，并显示从 gmaps4rails 中创建的折线。在 jsfiddle 上，它工作正常，但是在 gmaps4rails 中创建时，没有运气。这是小提琴的链接：[工作虚线](http://jsfiddle.net/N8QUC/16/)

因此，为了确保地图中没有任何内容，我将以下内容添加到 gmaps4rails 回调中。

```
var icon_array = {"icons":[{"repeat":"24px","icon":{"path":"M 0,-2 0,2","strokeOpacity":1,"strokeColor":"red", "scale": 4}}],"path":[{"$a":35,"ab":-70},{"$a":40,"ab":-80},{"$a":50,"ab":-85}],"strokeColor":"yellow"};

var route1 =
[
    new google.maps.LatLng(35,-70),
    new google.maps.LatLng(40,-80),
    new google.maps.LatLng(50, -85)
];
console.log(icon_array);

icon_array.path = route1;

var path1 = new google.maps.Polyline(icon_array);
path1.setMap(Gmaps.map.map.serviceObject); 
```

它会创建一条黄色实线，而不是预期的虚线。传入 polyline.coffee 中新的 google.maps.Polyline 合并选项行的对象就是我在上面的 JSON 解析中使用的对象。我不得不重置路径数组，因为我在从 JSON 解析时假设没有类型信息，但客观上它应该是正确的，因为你有 createLatLng 函数，该函数在 polylines.coffee 脚本中从折线数组创建一个谷歌纬度/经度对象.

这真的很奇怪。在创建地图时，我开始查看地图上的选项，但似乎那里没有任何可能导致问题的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:13:23.360

我确定了 gmaps4rails 如何创建地图和 jsFiddle 如何创建地图有什么区别，并得出结论，这是来自谷歌的地图 api 的 api 设置。

在 ./lib/gmaps4rails/view_helper.rb 的第 8 行有一行：

```
GOOGLE     = "//maps.google.com/maps/api/js?v=3.8" 
```

如果将此行更改为：

```
GOOGLE     = "//maps.google.com/maps/api/js?" 
```

因此从 API 调用中删除基本版本允许地图在使用 gmaps4rails 时显示虚线。

我不确定为什么在该映射 js 定义中的显式版本调用会使虚线不起作用，但是我现在能够利用自定义 gem 来显示虚线，并且我想象在线上更复杂的 SVG 符号。

感谢您的帮助。我不认为我会在没有下载源代码并开始挖掘的情况下弄清楚这一点。我想这也适用于非客观化分支。

我将在 github 项目上发表一篇文章以及调查结果。再次感谢，gmaps4rails 提供了巨大的帮助。

# ruby-on-rails - 如果存在基于记录 ID 以外的属性的特定记录，如何创建新记录或更新，Ruby on Rails？

> ID：12012728
> 
> 赞同：0
> 
> 时间：2012-08-17T20:26:28.673
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有 2 个模型班，员工和公司。外部库仅生成员工 ID。如果他的详细信息已经存在，我正在尝试更新员工详细信息，否则我需要创建新的员工详细信息。以下是创建方法的代码：

```
def create

 if !@emp= Details.find_or_create_by_emp_id(params[:details][:emp_id])
    @emp = Details.new(params[:details])

  // some logic goes here 

  else
    @emp.update_attributes(params[:details])
    render action: "show"
  end      
end 
```

但这总是使用现有的 emp_id 创建一条新记录，而不是更新与特定 emp_id 相关的表行。如何使它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T21:01:25.927

你可以试试这个：

```
def create
  @emp = Details.find_by_emp_id(params[:details][:emp_id])

  if @emp
    @emp.update_attributes(params[:details])
    render action: "show"
  else
    @emp = Details.new(params[:details])
    //other stuff
  end
end 
```

因此，如果员工已经存在，则将其设置为@emp，否则将@emp 设置为 nil

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T22:37:18.657

您使用 find_or_create 错误。它需要标识符和哈希：

```
if Detail.find_or_create_by_emp_id(params[:detail][:emp_id], params[:detail])
   #success
 else
   #fail
 end 
```

注意：您的模型名称和参数似乎都是复数，这是违反约定的，您确定这是您的意图吗？

# zend-framework - Zend 框架：提交和重定向

> ID：12012731
> 
> 赞同：0
> 
> 时间：2012-08-17T20:26:40.553
> 
> 标签：zend-framework

那是我的表格：

```
class Application_Form_Search extends Zend_Form {

public function init() {
    $searchFor = new Zend_Form_Element_Text(array('name' => 'searchFor', 'class' => 'input-text search-box', 'value' => 'Search'));
    $searchFor->setAttribs(array('onclick' => 'this.value="";', 'onfocus' => 'this.select()', 'onblur' => 'this.value=!this.value?"Search":this.value;'))
            ->setDecorators(array('ViewHelper',));

    $submit = new Zend_Form_Element_Submit(array('name' => 'search', 'class' => 'input-submit-search search-box', 'label' => ''));
    $submit->setDecorators(array('ViewHelper',));

    $this->addElements(array($searchFor, $submit));
} 
```

}

那是我的搜索动作：

```
 public function searchresultAction() {
    $form = new Application_Form_Search();

    if ($this->getRequest()->isPost()) {
        $postdata = $this->getRequest()->getPost();

        if ($form->isValid($postdata)) {
            $this->_redirect('Search/Results);
        }
    }....... 
```

问题是，当我单击提交按钮时，我没有重定向到搜索/结果，在 postdata 中没有值。我在 layout.phtml 中调用我的表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T17:55:22.507

您发布的代码中有错字。重定向行应该是`$this->_redirect('Search/Results');`

假设这只是您的问题中的错字，而不是您的代码中的错字，IIRC 使用`$this->_redirect()`发送带有[Location 标头的](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.30)[HTTP 302 Found](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.3)响应，这会导致浏览器使用 GET 请求加载新页面。因此，如果 POST 数据未包含在 Location 标头的 URL 中，它将丢失。

您可以使用`$this->_forward()`来避免 302 重定向，只需让 ZF 加载不同的模块/控制器/操作。您也可以使用此方法来传递参数。

否则，为什么要转发或重定向？为什么不继续处理数据并使用您`searchresultAction`自己显示结果呢？

# tablecolumn - 可关闭的表？列

> ID：12012732
> 
> 赞同：0
> 
> 时间：2012-08-17T20:26:59.943
> 
> 标签：tablecolumn

是否有一个 jquery 表格元素小部件允许您通过单击“x”图标来删除某些列？我以前使用过一个我在网上找到的自定义选项卡界面，只是在我实现了大部分我可以使用 jquery 选项卡（叹气）并希望避免类似情况之后才发现。

寻找类似的[东西](http://www.hospitalcompare.hhs.gov/hospital-compare.aspx#cmprTab=0&cmprID=210002%2C210013%2C210008&stsltd=%20MD&loc=Baltimore%2C%20MD&lat=39.2903848&lng=-76.61218930000001&AspxAutoDetectCookieSupport=1)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T21:28:20.443

您可以自己非常简单地做到这一点。如果您在 stackoverflow 上搜索“jquery remove table column”，您会发现很多答案。这是一个“插件”：http: [//jquery-howto.blogspot.se/2009/05/remove-nth-table-column-jquery-plugin.html](http://jquery-howto.blogspot.se/2009/05/remove-nth-table-column-jquery-plugin.html)

使用这个函数，用 id="x_element" 创建你的 x-icon 元素并添加一些 javascript：

```
$('#x_element').click({
  $('#table_id').removeCol(2);
}); 
```

# .net - Azure 和 Ninject（没有为此对象定义无参数构造函数。）

> ID：12012735
> 
> 赞同：3
> 
> 时间：2012-08-17T20:27:18.597
> 
> 标签：.net, asp.net-mvc, azure, ninject

我有一个使用 .NET Framework 4、MVC 4、Ninject 3 的 Web 应用程序。最初我使用的是 .NET Framework 4.5，但我将“目标框架”更改为 4.0 并修复了它导致的所有错误。现在该应用程序在我的本地机器上完美运行。问题是当我将它部署到 Azure 时，我在这篇文章的底部收到了服务器错误。

我以前见过这个错误。当我第一次开始使用 Ninject 时，当我在 Global.asax 中没有正确绑定时会出现这个错误（下面的相关代码）。

此外，我的 Ninject.dll 引用“复制本地”属性设置为“真”。

我究竟做错了什么？当我尝试在 Azure 中查看 Web 应用程序而不是在我的本地机器上时，为什么会出现此错误？

谢谢您的帮助，

亚伦

**HomeController.cs**：

```
public class HomeController : Controller
{
    IAuthorizationService _authorizationService;
    IUserService _userService;

    public HomeController(IAuthorizationService authorizationService, IUserService userService)
    {
        _authorizationService = authorizationService;
        _userService = userService;
    }
} 
```

**全球.asax**：

```
protected void Application_Start()
{
    SetupDependencyInjection();
}

private void SetupDependencyInjection()
{
    //create Ninject DI Kernel
    IKernel kernel = new StandardKernel();

    //register services with Ninject DI container
    RegisterServices(kernel);

    //tell asp.net mvc to use our Ninject DI Container
    DependencyResolver.SetResolver(new NinjectDependencyResolver(kernel));
}

private void RegisterServices(IKernel kernel)
{
    kernel.Bind<IAccountService>().To<AccountService>().WithConstructorArgument("connectionString", ConfigurationManager.ConnectionStrings["AccountManagerEntities"].ConnectionString);
} 
```

**服务器错误**：

```
No parameterless constructor defined for this object.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.MissingMethodException: No parameterless constructor defined for this object.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[MissingMethodException: No parameterless constructor defined for this object.]
   System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) +0
   System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache) +117
   System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache) +247
   System.Activator.CreateInstance(Type type, Boolean nonPublic) +106
   System.Web.Mvc.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType) +84

[InvalidOperationException: An error occurred when trying to create a controller of type 'AccountManager.Controllers.HomeController'. Make sure that the controller has a parameterless public constructor.]
   System.Web.Mvc.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType) +247
   System.Web.Mvc.DefaultControllerFactory.CreateController(RequestContext requestContext, String controllerName) +85
   System.Web.Mvc.MvcHandler.ProcessRequestInit(HttpContextBase httpContext, IController& controller, IControllerFactory& factory) +280
   System.Web.Mvc.<>c__DisplayClass6.<BeginProcessRequest>b__2() +66
   System.Web.Mvc.<>c__DisplayClassb`1.<ProcessInApplicationTrust>b__a() +19
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Func`1 func) +161
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +405
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +375 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T22:47:32.380

Sandrino Di Mattia，你是对的，我需要注册其他接口。实际上，我确实让他们注册了。为了在我的示例代码中直截了当，我删除了相关的部分。:p

我修复它的方法只是用 NuGet 卸载 Ninject，然后用 NuGet 重新安装它。我在互联网上读过一篇文章，说我必须使用 Entity Framework 执行此操作，才能在从 4.5 重新定位后使用 .NET 4.0 正确安装。所以，当它解决了我的 EF 问题时，我用 Ninject 进行了尝试，它奏效了。

所以，所有这一切的寓意是当从 .NET 4.5 重新定位到 .NET 4.0 时，卸载你的 NuGet 包，然后重新安装它们。

亚伦

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T21:58:45.110

这个问题实际上是一个 Ninject 配置问题。在您的`RegisterServices`方法中，您正在注册 1 个接口：`IAccountService`. 您在这里缺少的是您尝试在 HomeController 中注入的接口的注册：

*   `IAuthorizationService`
*   `IUserService`

由于 Ninject 不知道这些接口的任何实现，它不能使用您在`HomeController`类上指定的构造函数。它正在寻找默认的无参数构造函数，但是这个构造函数不存在。

解决方案很简单，您需要注册`IAuthorizationService`and`IUserService`才能使其正常工作。

# entity-framework - 实体框架代码首先使用 Guid 作为身份与另一个身份列

> ID：12012736
> 
> 赞同：37
> 
> 时间：2012-08-17T20:27:47.130
> 
> 标签：entity-framework, ef-code-first, entity-framework-5, entity-framework-migrations

*aka*我们如何在 Code First 中创建多个标识列？

由于集群性能，一个常见的建议是使用自动递增的整数列，而不是使用创建的 GUID `newid()`。

为了将列声明为自动增量，您必须使用 Annotation 指定它`[DatabaseGenerated(DatabaseGeneratedOption.Identity)]`。

但是，您在一个表中只能有一个身份。

所以从一个基本模型开始，比如：

```
public abstract class ModelBase {
    // the primary key
    public virtual Guid Id { get; set; }

    // a unique autoincrementing key
    public virtual int ClusterId { get; set; }
} 
```

我们如何设置它以便：

1.  *Guid由数据库*自动生成，而不是代码
**   `ClusterId`是自动递增的*   Entity Framework Code First 不会引发各种错误，例如：
    *   *不支持对主键列的属性“StoreGeneratedPattern”设置为“Computed”的表进行修改。请改用“身份”模式。**

 ** * *

*仅供参考*，如果您确实想在代码中自动生成它，您可以跳过 Id 字段上的注释并执行以下操作：

```
public abstract class AbstractContext : DbContext {

  /// <summary>
  /// Custom processing when saving entities in changetracker
  /// </summary>
  /// <returns></returns>
  public override int SaveChanges()
  {
      // recommended to explicitly set New Guid for appropriate entities -- http://msdn.microsoft.com/en-us/library/dd283139.aspx
      foreach (var entry in ChangeTracker.Entries<ModelBase>().Where(e => e.State == EntityState.Added) ) {

          // only generate if property isn't identity...
          Type t = entry.Entity.GetType();
          var info = t.GetProperty("Id").GetCustomAttributes(
              typeof(DatabaseGeneratedAttribute), true).Cast<DatabaseGeneratedAttribute>().Single();

          if (info.DatabaseGeneratedOption != DatabaseGeneratedOption.Identity) {
              entry.Entity.Id = Guid.NewGuid(); // now we make it
          }
      }
      return base.SaveChanges();
  }

} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-17T20:27:47.130

这最终对我有用，Entity Framework 5。

1.  关闭自动迁移
2.  迁移以创建初始表，没有多余的装饰
3.  声明`ClusterId`为身份（注解）

    ```
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public override int ClusterId { get; set; } 
    ```

4.  迁移

5.  *在另一个更新后将*pk 属性声明`Id`为 Identity

     *```
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public override Guid Id { get; set; } 
    ```

    *   *奖金*：EF 似乎假设`Id`是主键，所以你不需要`[Key, Required]`* 
**   创建迁移代码，如`add-migration TrickEfIntoAutogeneratingMultipleColumns`

    *   在`Up()`方法中，在`AlterColumn`语句中，通过声明`defaultSqlValue`
    *   `AlterColumn(theTable, "Id", c => c.Guid(nullable: false, identity: true, defaultValueSql: "newid()"));`*   迁移*

 *这似乎“欺骗”了 EF，因为它假设两列都是身份并做出相应的反应。在迁移过程中，它尝试使另一列成为身份，但似乎并不关心何时静默失败——您最终将一个标记为身份，另一个标记为默认值。

在正常代码操作期间，当 EF 执行 SaveChanges/ChangeTracking 步骤时，因为它将`Id`属性视为身份，所以它是整个[“分配临时密钥”的事情](http://msdn.microsoft.com/en-us/library/dd283139.aspx#sectionSection2)，因此它不会尝试使用默认的 0000000... 值，并且而是让数据库使用您指定的默认值函数生成它。

*（我本来以为注释这个字段`Computed`会完成同样的事情，但是......我在问题中提到的错误......嘘......）*

而且，因为该`ClusterId`字段在代码中也是一个身份，并且在数据库中确实是一个身份，所以它也会自动递增。**

# ruby-on-rails - 验证整数（允许尾随零）

> ID：12012743
> 
> 赞同：0
> 
> 时间：2012-08-17T20:28:03.127
> 
> 标签：ruby-on-rails, regex

如何检查字符串是否为整数并同时允许“1”和“1.0”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:47:19.090

我首先考虑`validates_numericality_of :your_attribute_here, :only_integer => true`过，但它不允许有小数位。

您可以使用

```
validates_format_of :your_attribute, :with => /\A\d+(\.0+)?\Z/ 
```

注意这里的`\A`和`\Z`。如果你使用`^`and `$`，它只会匹配行，允许像`"1.0\nBLAAAAH"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:29:04.413

使用正则表达式，您可以使用以下内容：

```
/^\d+(\.0*)?$/ 
```

这将检查一个或多个数字的序列，后跟可选的 a`.`和零个或多个尾随`0`。

# c# - 为了获得最佳效果，您应该重新调整图像大小然后压缩它，还是应该压缩它然后重新调整大小？

> ID：12012745
> 
> 赞同：1
> 
> 时间：2012-08-17T20:28:11.107
> 
> 标签：c#, image, resize, compression

我正在尝试缩小图片大小，我想知道：

是先压缩原始图像然后重新调整大小更好，还是应该重新调整大小然后压缩它的较小版本？

有什么区别吗？

我正在使用 C#。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T21:03:16.730

无论您做什么，压缩总是最后发生。这是因为压缩是保存图像所固有的，尝试以压缩形式处理图像是不切实际的；您几乎总是解压缩它以使用图像本身，而不是简单地传递文件。

因此，如果先压缩，然后调整大小，则步骤顺序是 compress->uncompress->resize->compress。如果您使用“无损”压缩图像格式，例如 PNG，那么您在最初的两个步骤上浪费了时间，因为什么都不会改变，您不妨调整大小，然后进行压缩。

*这可能*在哪里*不同之处在于使用 JPEG 等“有损”压缩算法时。“有损”格式使用类似的算法将图像数据实际压缩为无损格式，但它们包含了一个额外的简化步骤；对图像进行处理以在实际像素中产生（希望）细微的变化，这允许通过压缩算法更有效地消化整个图像（通常，像素块更加相似，因此整个块可以表示为一或两个字节的“散列”，然后在元数据字典中交叉引用，散列替换它出现的块）。这种简化是单向的；您不能“取消简化”处理后的图像以恢复原始图像，因此压缩然后调整大小的步骤顺序是简化->压缩->解压缩->调整大小->简化->压缩。简化步骤发生了两次，影响调整大小前后的图像。这是否真的会导致更小的文件大小取决于确切的图像和用于应用简化过滤器的质量设置。*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T20:32:54.910

压缩会导致图像质量和细节的损失，因此作为一般规则，它应该始终是应用任何修改后的最后一步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T20:33:55.353

如果您在压缩之前调整图像大小，则对图像质量更好，但对流式传输不利，因为或数据大小

如果您压缩和调整大小，则更适合流式传输（小尺寸），但质量会受到原始尺寸的限制*

# r - 具有许多变量的数据集的 bestglm 替代方案

> ID：12012746
> 
> 赞同：4
> 
> 时间：2012-08-17T20:28:15.067
> 
> 标签：r

R 版本 2.15.0 (2012-03-30) RStudio 0.96.316 Win XP，最后更新

我确实有一个包含 40 个变量和 15.000 个观察值的数据集。我想使用 bestglm 搜索可能的好模型（逻辑回归）。我试过 bestglm，但它不适用于这种中等大小的数据集。经过几次试验，我认为当有超过 30 个变量时 bestglm 会失败，至少在我的计算机上（4G ram，双核）。

您可以自己尝试 bestglm 限制：

```
library(bestglm)

bestBIC_test <- function(number_of_vars) {

# Simulate data frame for logistic regression
glm_sample <- as.data.frame(matrix(rnorm(100*number_of_vars), 100))

# Get some 1/0 variable
glm_sample[,number_of_vars][glm_sample[,number_of_vars] > mean(glm_sample[,number_of_vars]) ] <- 1
glm_sample[,number_of_vars][glm_sample[,number_of_vars] != 1 ] <- 0

# Try to calculate best model
bestBIC  <- bestglm(glm_sample, IC="BIC", family=binomial)

}

# Test bestglm with increasing number of variables
bestBIC_test(10) # OK, running
bestBIC_test(20) # OK, running
bestBIC_test(25) # OK, running
bestBIC_test(28) # Error: cannot allocate vector of size 1024.0 Mb
bestBIC_test(30) # Error: cannot allocate vector of size 2.0 Gb
bestBIC_test(40) # Error in rep(-Inf, 2^p) : invalid 'times' argument 
```

我可以在 R 中使用任何替代方法来搜索可能的好模型吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-25T18:20:26.677

好吧，对于初学者来说，详尽搜索 40 个变量的最佳子集需要创建超过一万亿个的 2^40 个模型。那很可能是你的问题。

对于超过 20 个左右的变量，详尽的最佳子集搜索通常不被认为是最佳的。

更好的选择是向前逐步选择，大约是 (40^2+40)/2 个模型，所以大约是 800。

甚至更好（我认为最好的）通过`glmnet`包使用套索进行正则化逻辑回归。

[这里](https://www.youtube.com/playlist?list=PLxXnVFYbQ9rnK4WgHVVgY5PFwTI4NCYq1)有很好的概述。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T23:07:49.737

您可以尝试探索包[caret](https://cran.r-project.org/web/packages/caret/index.html)，它也有用于模型选择的工具。我能够毫无问题地拟合具有 15000 个观察值的模型：

```
number_of_vars <- 40

dat <- as.data.frame(matrix(rnorm(15000*number_of_vars), 15000))
dat[,number_of_vars][dat[,number_of_vars] > mean(dat[,number_of_vars]) ] <- 1
dat[,number_of_vars][dat[,number_of_vars] != 1 ] <- 0

library(caret)
result <- train(dat[,1:39], dat[,40], family = "binomial", method = "glm")
result$finalModel 
```

我会查阅大量文档以更好地控制模型拟合。

# javascript - 我的 JS/jQuery 创建 div 时遇到困难

> ID：12012750
> 
> 赞同：5
> 
> 时间：2012-08-17T20:28:36.933
> 
> 标签：javascript, jquery, css, html

我正在制作一个 web 应用程序，只是为了学习 JavaScript 和 jQuery，因为有人告诉我这将是一个很好的实践项目，所以我在这里遇到了一些错误并且不知道如何修复它们。我是 StackOverflow 的新手——我更多地将它用作参考。

这是代码： [http ://pastebin.com/raw.php?i=67i5HwY5](http://pastebin.com/raw.php?i=67i5HwY5)

问题：-当添加多个便利贴时，它会弄乱 div ..

我有如何修复它的想法，我只是 jQuery 和 JS 的新手，所以我不知道如何应用它们。如果你们能帮助我，那就太好了。

谢谢！

[http://jsfiddle.net/mitchbregs/fYTFV/5/](http://jsfiddle.net/mitchbregs/fYTFV/5/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T21:19:24.787

给你：http: [//jsfiddle.net/mattblancarte/fYTFV/12/](http://jsfiddle.net/mattblancarte/fYTFV/12/)

您基本上需要为每个便利贴添加一个唯一标识符。:) 在这种情况下，我只是增加了您正在使用的 ID，然后在您每次制作新的便利贴时增加 id。

您可能也想缓存这些选择器......而不是一遍又一遍地使用 $("#postIt-" + id) ，只需执行以下操作：

```
var postit = $("#postIt-" + id);
postit.css(); 
```

您还可以在一种方法中传递所有 css，如下所示：

```
postit.css({
  'background' : 'blue',
  'height' : '100px',
  //etc.
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:45:51.670

好像

```
$("#header").append("<div id='urlPost' 
```

可能会导致问题？附加多个具有相同 ID 的项目通常不好。每个 postit 都需要一个唯一的标识符。

也许创建一个名为“id”的全局变量并设置为 0。

那么您的点击功能可能如下所示：

```
$("#header").append("<div id='urlPost" + id + "' class='etc'");

$("#urlPost"+id).css("width",wh); 
```

然后在函数结束时：

```
id++; 
```

这样每次添加新帖子时，css 只会应用于最新的帖子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T21:50:47.027

嘿只是为了回答你的问题.. 我只使用 jquery 做了一个解决方案。这可能是另一个你不需要声明 var 的解决方案。这是.. [http://jsfiddle.net/vwPDr/](http://jsfiddle.net/vwPDr/)

我使用 :last 的 jquery 选择器并将其应用于 draggble 类。一探究竟。

# c# - 不可变地传递集合

> ID：12012758
> 
> 赞同：6
> 
> 时间：2012-08-17T20:29:04.527
> 
> 标签：c#

我正在对过去使用一堆不断调整大小的多维数组的一堆代码进行大重构。我创建了一个数据对象来替换 2D 数组，现在我正在传递这些列表。

我发现了一些让我有点担心的事情。假设我有一些看起来像这样的代码：

```
List<NCPoint> basePoints = new List<NCPoint>();

// ... snip populating basePoints with starting data

List<NCPoint> newPoints = TransformPoints(basePoints, 1, 2, 3);

public List<NCPoint> TransformPoints(List<NCPoint> points, int foo, int bar, int baz){
    foreach(NCPoint p in points){
        points.X += foo
        points.Y += bar
        points.Z += baz
    }

    return points;
} 
```

想法是保留原始点列表 ( `basePoints`) 和更新点列表 ( `newPoints`)。但是 C# 通过引用传递列表，与任何对象一样。此更新`basePoints`到位，因此现在两者都`basePoints`将`newPoints`具有相同的数据。

目前，我正在尝试在`List`处理数据之前小心制作传入的完整副本。这是确保对函数内对象的更改不会在函数外产生副作用的唯一明智方法吗？有什么类似于传递对象的东西`const`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T20:29:52.690

您可能正在搜索 [ReadOnlyCollection](http://msdn.microsoft.com/en-us/library/ms132474.aspx)

> 为通用只读集合提供基类。

例子：

```
public IEnumerable<..> GetReadonlyCollection(List<...> originalList) 
{
  return new ReadOnlyCollection<string>(originalList);
} 
```

请注意一个事实：这是为使只读（不可变）*集合而不**包含*类型提供服务。我可以从该集合中获取一个对象并对其进行更改，如果该对象是引用类型，那么这些更改也会在原始集合中反映出来。

 *如果你想拥有 readonly *object*，这会变得有点棘手（取决于你的对象有多复杂）。基本思想是（Servy 也建议）使用*只读*公共成员对原始对象进行*包装*（因此对于*该*类型的消费者，它变得不可变）。

 **希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T20:34:06.727

简而言之：没有。

C# 本身没有`const`引用的概念。如果要使对象不可变，则必须对其进行显式编码或利用其他“技巧”。

您可以通过多种方式使您的集合不可变（`ReadOnlyColelction`返回一个迭代器，返回一个浅拷贝），但这*只会*保护序列，而不是存储在其中的数据。

因此，您真正需要做的是返回深层副本或投影，可能使用 LINQ：

```
public IEnumerable<NCPoint> TransformPoints(List<NCPoint> points, int foo, int bar, int baz)
{
    // returning an iterator over the sequence so original list won't be changed
    // and creating new NCPoint using old NCPoint + modifications so old points
    // aren't altered.
    return points.Select(p => new NCPoint
        { 
           X = p.X + foo,
           Y = p.Y + bar,
           Z = p.Z + baz
        });
} 
```

此外，返回迭代器（而不是仅仅将 a`List<T>`作为 a`IEnumerable<T>`等返回）的美妙之处在于它不能被强制转换回原始集合类型。

**更新**：或者，用 .NET 2.0 的说法：

```
public IEnumerable<NCPoint> TransformPoints(List<NCPoint> points, int foo, int bar, int baz)
{
    // returning an iterator over the sequence so original list won't be changed
    // and creating new NCPoint using old NCPoint + modifications so old points
    // aren't altered.
    NCPoint[] result = new NCPoint[points.Count];

    for (int i=0; i<points.Count; ++i)
    { 
        // if you have a "copy constructor", can use it here.
        result[i] = new NCPoint();
        result[i].X = points[i].X + foo;
        result[i].Y = points[i].Y + bar;
        result[i].Z = points[i].Z + baz;
    }

    return result;
} 
```

关键是，有很多方法可以将某些东西视为不可变，但我不会尝试在 C# 中实现 C++ 风格的“const 正确性”，否则你会发疯的。当您想避免副作用等时，根据需要实施它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-17T15:56:07.610

如果您使用的是 C# 4.5，我建议您查看 Immutable Collections，它可以通过 Nuget 包下载...

```
PM> Install-Package Microsoft.Bcl.Immutable 
```

这篇博文很好地解释了如何使用它们：http: [//blogs.msdn.com/b/dotnet/archive/2013/09/25/immutable-collections-ready-for-prime-time.aspx](http://blogs.msdn.com/b/dotnet/archive/2013/09/25/immutable-collections-ready-for-prime-time.aspx)

为了保护封闭的对象，您必须将所有属性设为私有。我喜欢`.With..(..)` 帮助构建对象的模式

```
 public class NCPoint
    {
        public int X { get; private set; }
        public int Y { get; private set; }
        public int Z { get; private set; }

        public NCPoint(int x, int y, int z)
        {
            this.X = x;
            this.Y = y;
            this.Z = z;
        }

        public NCPoint WithX (int x)
        {
            return x == X ? this : new NCPoint(x, Y, Z);
        }

        public NCPoint WithY(int y)
        {
            return y == Y ? this : new NCPoint(X, y, Z);
        }

        public NCPoint WithZ(int z)
        {
            return z == Z ? this : new NCPoint(X, Y, z);
        }
    } 
```

你可以像这样使用它：

```
var p = points[i];
var newPoint = p.WithX(p.X + foo)
                .WithY(p.Y + bar)
                .WithZ(p.Z + baz); 
```

我知道这个解决方案并不是每个人都喜欢，因为它需要大量的编码。但我觉得它很优雅。

最后调用不可变列表的替换方法：

`immutablePoints.Replace (p, newPoint);`***

# java - gwt / gwt-query - 使面板内的一些内部区域透明

> ID：12012759
> 
> 赞同：0
> 
> 时间：2012-08-17T20:29:06.177
> 
> 标签：java, gwt, transparency, gwtquery

我一直在期待一些能让我透明面板内的一些内部区域而不是其余部分的东西。比如说，如果我有一个尺寸为 500x300 的面板，我只想透明左侧和顶部（相对于其父级）分别为 30 和 40 且宽度和高度分别为 100 和 200 的区域。

提前致谢！

PS：也许解决方案是本机方法中的一些js东西，但不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T21:15:56.207

我认为没有一种直接的方法可以“剪切”面板的一部分。我会像这样解决它：

```
Panel:
+---------+--------------------------------+----------------+
|         |             B                  |                |
|         |                                |                |
|         +--------------------------------+                |
|         |                                |                |
|   A     |             T                  |      D         |
|         |                                |                |
|         |                                |                |
|         +--------------------------------+                |
|         |             C                  |                |
|         |                                |                |
+---------+--------------------------------+----------------+ 
```

让整个面板背景透明^([*])。然后添加白色背景的 A、B、C 和 D。这将使 T 透明。

这种安排可以通过 DockLayoutPanel 轻松实现！

^([*])提示：如果您使用的是 GWT 主题，它可能已经在面板上设置了背景。如果是这种情况，请使用`myPanel.addStyleName("transparent")`并定义 CSS 规则

```
div.transparent {
  background: none;
} 
```

# mysql - xml 大小超出了 MySQL “extractvalue”函数的容量，我该如何解决？

> ID：12012771
> 
> 赞同：1
> 
> 时间：2012-08-17T20:30:17.160
> 
> 标签：mysql, xml, extract, bigdata

我在这里结束了。我的 XML（数据）太大，extractvalue 函数无法处理。

当“数据”长度约为 10k 时，它可以找到，但是当它超过 30k 时，它给了我 null

```
 EXTRACTVALUE(data,'/a/b') as var1 
```

任何人都可以推荐我在 mysql 中解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-02T15:00:18.273

您遇到的问题是 MySQL 的错误。您尝试解析的 XML 很可能太长。我很确定它与这个错误有关：[https](https://bugs.mysql.com/bug.php?id=62429) ://bugs.mysql.com/bug.php?id=62429 。要解决此错误，您可以只提取您尝试导航的 XML 部分，或者只使用另一种方法来提取您正在寻找的值。无论如何，您可以查看我发布到此问题的答案，以了解该问题是如何解决的。[使用 MySQL 提取值](https://stackoverflow.com/questions/33395829/extractvalue-with-mysql)

# python - 强制 YAML 值是字符串

> ID：12012774
> 
> 赞同：6
> 
> 时间：2012-08-17T20:30:29.843
> 
> 标签：python, yaml

看看这段代码，在 Python 2.7 下：

```
>>> import yaml
>>> yaml.load('string: 01')
{'string': 1}
>>> :( 
```

`01`是否可以在不修改yaml文件的情况下获取字符串？我在文档中没有找到任何东西。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T20:57:00.667

尝试：

```
>> import yaml
>> yaml.load('string: 01', Loader=yaml.loader.BaseLoader)
{u'string': u'01'} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-12T20:37:36.767

我正在寻求完全相反的效果：数字被转换为刺痛，但数字却在需要。我不小心使用了 BaseLoader（Dame 复制粘贴！）。

正如@Konrad Hałas 所述，LOADER 就是答案**。**

强制字符串：

```
yaml.load('string: 01', Loader=yaml.loader.BaseLoader) 
```

强制编号：（默认）

```
yaml.load('string: 01', Loader=yaml.loader.SafeLoader) 
```

关于*弃用*和详细信息的链接：

[https://github.com/yaml/pyyaml/wiki/PyYAML-yaml.load(input)-弃用](https://github.com/yaml/pyyaml/wiki/PyYAML-yaml.load(input)-Deprecation)

# hibernate - 访问 DataSource 导致异常 Null UserID 传递并且无法创建连接

> ID：12012779
> 
> 赞同：1
> 
> 时间：2012-08-17T20:30:52.613
> 
> 标签：hibernate, jpa, nullpointerexception, datasource, websphere-7

这几天我一直在研究这个问题，但没有解决方案。我希望在这里发布我的问题将引导我朝着正确的方向前进。我浏览了许多论坛，并且都说明了我遵循的相同步骤（如下所述），但在访问数据源时仍然遇到相同的运行时异常。

```
Exception - 
org.hibernate.exception.SQLGrammarException: Could not open connection
at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:122)
at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)
Caused by: java.sql.SQLNonTransientException: [jcc][t4][10205][11234][4.11.88] Null userid is not supported. ERRORCODE=-4461, SQLSTATE=42815 DSRA0010E: SQL-Status = 42815, Fehlercode = -4'461
at com.ibm.db2.jcc.am.gd.a(gd.java:676) 
```

环境 - Hibernate、JPA 2.0、DB2、Websphere 8.0、RAD、Java EE 6 部署网络。

1.  在 Websphere JDBC/Sample 上创建了一个数据源。使用 DataSource 上的 DB 凭据创建了 J2C 身份验证。通过容器管理的身份验证将身份验证分配给数据源。

2.  Web.xml 条目

    ```
    resource-ref
    res-ref-name Sample
    res-type javax.sql.DataSource
    res-auth Container
    res-sharing-scope Shareable
    resource-ref 
    ```

3.  ibm-web-bnd.xml 条目

    ```
    resource-ref name="jdbc/Sample" binding-name="java:comp/env/jdbc/Sample" 
    ```

4.  持久性.xml

    ```
    persistence-unit name="samplePool" transaction-type="JTA"
    provider org.hibernate.ejb.HibernatePersistence
    jta-data-source jdbc/Sample
    properties
    property name="hibernate.transaction.manager_lookup_class"         value="org.hibernate.transaction.WebSphereExtendedJTATransactionLookup"
    property name="hibernate.dialect" value="org.hibernate.dialect.DB2390Dialect"
    properties
    persistence-unit
    persistence 
    ```

5.  Dao 中的代码

    ```
     eMgrFactory = Persistence.createEntityManagerFactory("samplePool");
     entityMgr = eMgrFactory.createEntityManager();
     entityMgr.createNativeQuery(); 
    ```

请注意，通过管理控制台创建数据源后，我能够成功测试连接。另请注意，如果我指定组件托管身份验证我能够通过代码访问。建议我如何通过 Container Managed 身份验证进行访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:27:39.903

今天，我能够为我的问题找到解决方案。整个问题原来是配置问题。很好，我能够解决。以下是我所做的更改

1.  persistence.xml 文件 - 我不再从这里直接查找 DataSource。我像这样在 web.xml 中查找(java:comp/env/jdbc/ds)

```
xml 版本="1.0" 编码="UTF-8"
持久性 xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 版本="2.0" xsi:schemaLocation= “http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd”
    持久性单元名称="dataPool" 事务类型="JTA"
        提供者 org.hibernate.ejb.HibernatePersistence 提供者
        jta 数据源 java:comp/env/jdbc/ds jta 数据源

        共享缓存模式 所有共享缓存模式

        特性
        属性名称="hibernate.dialect" 值="org.hibernate.dialect.DB2390Dialect"
        属性名称="hibernate.default_schema" 值="A11"
        属性名称="hibernate.transaction.manager_lookup_class" 值="org.hibernate.transaction.WebSphereExtendedJTATransactionLookup"  
        属性名称="hibernate.transaction.jta.platform" 值="org.hibernate.service.jta.platform.internal.WebSphereExtendedJtaPlatform"
        属性名称="hibernate.temp.use_jdbc_metadata_defaults" 值="假"
        特性

    持久性单元
坚持

```

1.  在 Web.xml 我查找 DataSource

```

    资源参考
        资源参考名称 jdbc/ds 资源参考名称
        查找名称 实际数据源 查找名称
        资源类型 javax.sql.DataSource 资源类型
        res-auth 容器 res-auth
        res-sharing-scope 可共享的 res-sharing-scope
    资源参考

```

我为其他人发布解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:56:30.473

部署后，您必须将数据源映射到您的应用程序。

[地图资源参考文档](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=%2Fcom.ibm.websphere.express.doc%2Finfo%2Fexp%2Fae%2Fudat_maprrr.html)。

# android - 使用 phonegap 创建的 android 应用程序 - 背景在滚动时不会保持固定

> ID：12012780
> 
> 赞同：2
> 
> 时间：2012-08-17T20:30:57.893
> 
> 标签：android, html, css, cordova, background

我有一个 android 应用程序，它有这个 css 作为正文背景：

```
html, body {
height:100%
margin: 0;
padding: 0;
color: white;
position: static;
text-align:left;
background: URL(images/aVia_Background_new.png) top center black;
background-repeat:no-repeat;
background-size: cover;
background-attachment:fixed !important;
} 
```

当页面足够长可以滚动时，当页面向下遍历时，背景将直接滚动到屏幕外。它的作用就好像 background-attachment 属性设置为滚动，但它肯定不是。当在我的桌面上的谷歌浏览器中查看该网站时，背景工作正常，但由于某种原因，当它通过 Phonegap 翻译到 Android 时，它不能正常工作。这是 Phonegap 的已知问题吗？有谁知道我可以尝试解决这个问题吗？感谢任何回复。想法越多越好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T06:35:28.673

是的..问题出在您的`背景附件：已修复；据我所知 position:fixed 不能正常工作。当我试图在我的应用程序中做一个固定的页眉/页脚时，我遇到了同样的问题。最后使用[了 iScroll](http://cubiq.org/iscroll)

# objective-c - 在 Mac 应用程序中嵌入可执行文件

> ID：12012783
> 
> 赞同：4
> 
> 时间：2012-08-17T20:31:13.060
> 
> 标签：objective-c, macos, embed, executable, mac-app-store

如果你去`/usr/bin`你会看到数百个可执行文件或可执行文件的链接。

我的应用程序（在 Xcode 中用 Obj-C 编写的 Mac 应用程序）依赖于其中一些可执行文件。不幸的是，必须手动安装可执行文件——我必须检查它们，然后提示用户安装它们。

我的代码是：

```
NSTask *task = [[NSTask alloc] init];
[task setLaunchPath:@"/usr/bin/executable"];

NSPipe *pipe = [NSPipe pipe];
[task setStandardOutput:pipe];
NSFileHandle *file = [pipe fileHandleForReading];

[task setArguments:[NSArray arrayWithObjects:sender, target, nil]];
[task launch]; 
```

我想知道是否可以将可执行文件复制到我的应用程序中的某个地方，然后从那里调用它。这样，用户就不必自己去获取它。

Mac App Store 会允许吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-02T12:51:26.970

如果你想知道，在 Swift 3 中你可以这样做：

```
let bundle = Bundle.main
let task = Process()
let path = bundle.path(forResource: "executableName", ofType: "")
task.launchPath = path 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-25T22:30:45.563

只是为了更新和澄清，我发现以下内容适用于 Xcode 11 和 Swift 5。

首先，将所需的可执行文件（在我的例子中是 pandoc）拖放到我的 Xcode 项目中。我把它放在一个名为“bin”的组/文件夹中。

确保选择我希望包含可执行文件的所需目标！

然后使用以下代码：

```
let task = Process()
let bundle = Bundle.main
let execURL = bundle.url(forResource: "pandoc", withExtension: nil)
guard execURL != nil else {
    print("Pandoc executable could not be found!")
    return 
}
task.executableURL = execURL!
task.arguments = ["--version"]
do {
    try task.run()
    print("Pandoc executed successfully!")
} catch {
    print("Error running Pandoc: \(error)")
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T05:08:36.680

好的，所以我开始尝试自己寻找答案。而且，我很高兴地说我想通了！

因此，只需将其复制`executable`到 Xcode 项目中您想要的任何位置。然后，改变

```
[task setLaunchPath:@"/usr/bin/executable"]; 
```

到

```
[task setLaunchPath:[[NSBundle mainBundle] pathForResource:@"executable" ofType:@""]]; 
```

和达！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-05T12:37:07.250

在 Swift 中，你可以这样做：

```
let bundle = NSbundle.mainBundle()
let task = NSTask()

task.launchPath = bundle.pathForResource("executableName", ofType: "") 
```

确保捆绑的可执行文件位于目录树的顶层，而不是像 /lib 这样的子目录，否则它可能不起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-30T16:09:04.253

我更新了 hbowie 的答案，将从 shell 接收到的值作为字符串返回：

```
func safeShell(_ strExecutable:String, _ arrArguments:Array<String>) throws -> String {

        let task = Process()
        let pipe = Pipe()
        let bundle = Bundle.main
        let execURL = bundle.url(forResource: strExecutable, withExtension: nil)

        //no point in going on if we can't find the program
        guard execURL != nil else {
            print("\(strExecutable) executable could not be found!")
            return ""
        }

        task.executableURL = execURL!
        task.arguments = arrArguments
        task.standardOutput = pipe
        task.standardError = pipe
        //task.arguments = ["-c", command]
        //task.executableURL = URL(fileURLWithPath: "/bin/zsh") //<--updated

        do {
            try task.run() //<--updated
        }
        catch{ throw error }

        let data = pipe.fileHandleForReading.readDataToEndOfFile()
        let output = String(data: data, encoding: .utf8)!

        return output
    }

} 
```

使用示例：

```
let strOutput = try myAppManager.safeShell("pandoc", ["--version"])
print(strOutput) 
```

回报：

```
pandoc 2.16.2
Compiled with pandoc-types 1.22.1, texmath 0.12.3.2, skylighting 0.12.1,
citeproc 0.6, ipynb 0.1.0.2
User data directory: /Users/stevesuranie/Library/Containers/MartianTribe.MD2HTML/Data/.local/share/pandoc
Copyright (C) 2006-2021 John MacFarlane. Web:  https://pandoc.org
This is free software; see the source for copying conditions. There is no
warranty, not even for merchantability or fitness for a particular purpose. 
```

# php - 作为验证的一部分，如何让 symfony2 formbuilder 签入 DB

> ID：12012785
> 
> 赞同：1
> 
> 时间：2012-08-17T20:31:14.163
> 
> 标签：php, symfony, formbuilder

在允许表单插入之前检查值是否已经存在的最佳方法是什么？如果已经存在具有指定用户名的用户，我希望表单验证为假。我猜想在某个地方会有一个独特的约束，但要更全面，或者能够以更定制的方式检查值。假设一个客户帐户中有多个管理员帐户，他们都有降级其他管理员的权限，我希望能够进行的一项检查是您是否禁用了最后一个管理员（如果是这样，请阻止降级操作，在表单上有一个很好的错误消息......）

例如，我可以从我的 formType 中访问实体管理器，还是必须从控制器以解决方法的方式传递？

```
 $builder
        ->add('username', 'text', array('label' => 'Användarnamn '))
        ->add('email', 'email', array('label' => 'Epost '))
        ->add('plainPassword', 'repeated', array('type' => 'password', 'first_name' => 'Lösenord ', 'second_name' => 'Upprepa lösenord',)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T20:53:17.817

您应该创建一个[自定义验证约束](http://symfony.com/doc/master/cookbook/validation/custom_constraint.html)并将其注入`EntityManager`以访问数据库。

# c# - 建议下拉列表的过滤器通常是如何实现的？

> ID：12012789
> 
> 赞同：0
> 
> 时间：2012-08-17T20:31:45.900
> 
> 标签：c#, asp.net-mvc, autocomplete

在输入框中输入时，如果有一个下拉菜单或部分显示可能的预测列表，那就太好了。

使用什么类型的过滤器来生成这些预测？

是`.Contains(string)`(c#) 吗？是`.StartsWith(string)`(c#) 吗？或者我应该只是推出我自己的这两种和/或其他类型的组合？

我的目标是有一个输入框，它将 ajax 将输入框中的文本发布到 asp.net mvc 3 控制器并取回现有类似文本的列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T20:37:28.433

我将首先列出 StartsWith 结果（按字母顺序），然​​后在它们下方列出 Contains 结果（再次按字母顺序）。

例如：

```
Hello world
Foobar
Foobaz
Jon Skeet
AnotherFoo 
```

例子：

```
Foo ▼ 
```

```
Foobar
Foobaz
AnotherFoo 
```

# c# - TextReader 类行数

> ID：12012790
> 
> 赞同：2
> 
> 时间：2012-08-17T20:31:46.577
> 
> 标签：c#, text, count, lines, textreader

你好。最近，我了解了这门课`TextReader`以及如何阅读文本文件。但是，有些事情我真的不明白。

假设这是一个新对象：

```
TextReader TR = new StreamReader(@"C:\Users\Administrator\Desktop\Text1.txt"); 
```

所以我想知道里面有多少个字母，所以我正在输入这个，对吧？

```
Console.WriteLine(TR.ReadToEnd().Length); 
```

但是，它为第一行返回一个数字，它是当前的，但是当我添加新行时。无论是否输入任何内容，长度都会增加。假设它`\n`是新行的代码[也许我错了，但这是有道理的]

所以我需要像这样减少长度：

```
current length - line count*2 
```

所以我在我的文本文件中得到了正确数量的字母。问题是：如何获得行数？

还有其他方法可以检查字母的数量吗？如果有，怎么做？无论如何，我如何获得文本文件中的行数？

谢谢。=)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T20:34:37.283

由于 .NET 框架 2.0 有一个快捷方法`ReadAllLines`：

```
var lines = System.IO.File.ReadAllLines("file.txt");
var count = lines.Length; 
```

# apache2 - 来自响应标头的 Apache 粘性会话

> ID：12012792
> 
> 赞同：1
> 
> 时间：2012-08-17T20:31:49.263
> 
> 标签：apache2, load-balancing

我有一个要求，我需要将一系列请求路由到负载均衡器集群中的同一成员。

请求如下所示：

1.  /server/create-some-id => 以唯一 ID 响应
2.  /server/do-something-with-id/{ID}
3.  /server/do-something-with-id/{ID}
    ...等。

要求是请求 2 及以后的请求必须路由到与请求 1 相同的平衡器成员。由于一些遗留代码，我不能只在请求 1 的响应中创建一个 cookie 用于路由。

我想知道是否有一个 Apache 模块能够根据响应标头或响应正文设置环境，或者任何其他解决此问题的方法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T04:12:58.267

在 Apache 2 中，似乎无法根据响应标头或正文启用粘性。

# sql - SQL - 在 SELECT 中有多个 CASE 语句对性能有什么影响 - Teradata

> ID：12012793
> 
> 赞同：22
> 
> 时间：2012-08-17T20:32:00.423
> 
> 标签：sql, performance, teradata

所以我有一个查询需要在 SELECT 中使用一堆 CASE 语句。这不是最初的设计，而是妥协的一部分。

所以查询看起来像这样：

```
SELECT
  CONT.TABLE.FINC_ACCT_NM,
  CONT.TABLE.FINC_ACCT_ID,
  CONT.TABLE.CURR_END_OF_PERD_ACTL_VAL,
  CONT.TABLE.PREV_END_OF_PERD_ACTL_VAL,
  CONT.TABLE.VARNC_PLAN_VAL,
  CONT.TABLE.OUTLOOK_BDGT_PLAN_VAL,
  CONT.TABLE.PERD_END_RPT_DT,
  CONT.TABLE.PLAN_VERS_NM,
  CONT.TABLE.FRMT_ACTL_CD,
  CONT.TABLE.FRMT_PLAN_CD,
  CONT.TABLE.RPT_PERD_TYPE_CD,
  CASE 
                WHEN ( CONT.TABLE.FINC_ACCT_ID )=           'XXXX'        and ( CONT.TABLE.BAL_TYPE_CD ) =             'EOP'      then      '  Net Interest Income'  
                WHEN ( CONT.TABLE.FINC_ACCT_ID )=           'XXXX'        and ( CONT.TABLE.BAL_TYPE_CD ) =             'EOP'      then      '  Non Interest Income'
                WHEN ( CONT.TABLE.FINC_ACCT_ID )=           'XXXX'        and ( CONT.TABLE.BAL_TYPE_CD ) =             'EOP'      then      'Non-Interest Expense'
                WHEN ( CONT.TABLE.FINC_ACCT_ID )=           'XXXX'        and ( CONT.TABLE.BAL_TYPE_CD ) =             'EOP'      then      '  Total Marketing Expense'
                WHEN ( CONT.TABLE.FINC_ACCT_ID )=           'XXXX'        and ( CONT.TABLE.BAL_TYPE_CD ) =             'EOP'      then      '  Total Operating Expense'
                WHEN ( CONT.TABLE.FINC_ACCT_ID )=           'XXXX'        and ( CONT.TABLE.BAL_TYPE_CD ) =             'EOP'      then      'Pre-Provision Earnings (before tax)'
                WHEN ( CONT.TABLE.FINC_ACCT_ID )=           'XXXX'        and ( CONT.TABLE.BAL_TYPE_CD ) =             'EOP'      then      '  Net Charge-offs'
                WHEN ( CONT.TABLE.FINC_ACCT_ID )=           'XXXX'        and ( CONT.TABLE.BAL_TYPE_CD ) =             'EOP'      then      '  Other'
                WHEN ( CONT.TABLE.FINC_ACCT_ID )=           'XXXX'        and ( CONT.TABLE.BAL_TYPE_CD ) =             'EOP'      then      '  Allowance Build (Release)'
                WHEN ( CONT.TABLE.FINC_ACCT_ID )=           'XXXX'        and ( CONT.TABLE.BAL_TYPE_CD ) =             'EOP'      then      'Provision Expense'
                WHEN ( CONT.TABLE.FINC_ACCT_ID )=           'XXXX'        and ( CONT.TABLE.BAL_TYPE_CD ) =             'EOP'      then      'Pretax Income'
                WHEN ( CONT.TABLE.FINC_ACCT_ID )=           'XXXX'        and ( CONT.TABLE.BAL_TYPE_CD ) =             'EOP'      then      'Tax Expense'
                WHEN ( CONT.TABLE.FINC_ACCT_ID )=           'XXXX'        and ( CONT.TABLE.BAL_TYPE_CD ) =             'EOP'      then      'NIAT'
                WHEN ( CONT.TABLE.FINC_ACCT_ID )=           'XXXX'        and ( CONT.TABLE.BAL_TYPE_CD ) =             'EOP'      then      'EPS'
                WHEN ( CONT.TABLE.FINC_ACCT_ID )=           'XXXX'        and ( CONT.TABLE.BAL_TYPE_CD ) =             'EOP'      then      'Ending Loans - HFI'
                WHEN ( CONT.TABLE.FINC_ACCT_ID )=           'XXXX'        and ( CONT.TABLE.BAL_TYPE_CD ) =             'avg'       then      'Average Loans - HFI'
                WHEN ( CONT.TABLE.FINC_ACCT_ID )=           'XXXX'        and ( CONT.TABLE.BAL_TYPE_CD ) =             'avg'       then      'Average Earning Assets'
                WHEN ( CONT.TABLE.FINC_ACCT_ID )=           'XXXX'        and ( CONT.TABLE.BAL_TYPE_CD ) =             'EOP'      then      'Ending Deposits'
                WHEN ( CONT.TABLE.FINC_ACCT_ID )=           'XXXX'        and ( CONT.TABLE.BAL_TYPE_CD ) =             'avg'       then      'Average Deposits'
                WHEN ( CONT.TABLE.FINC_ACCT_ID )=           'XXXX'        and ( CONT.TABLE.BAL_TYPE_CD ) =             'EOP'      then      'NIM on Loans'
                WHEN ( CONT.TABLE.FINC_ACCT_ID )=           'XXXX'        and ( CONT.TABLE.BAL_TYPE_CD ) =             'EOP'      then      'Revenue Margin'
                WHEN ( CONT.TABLE.FINC_ACCT_ID )=           'AC579'        and ( CONT.TABLE.BAL_TYPE_CD ) =             'EOP'      then      'Charge off rate'
                WHEN ( CONT.TABLE.FINC_ACCT_ID )=           'XXXX'        and ( CONT.TABLE.BAL_TYPE_CD ) =             'EOP'      then      'Efficiency ratio'
                WHEN ( CONT.TABLE.FINC_ACCT_ID )=           'XXXX'        and ( CONT.TABLE.BAL_TYPE_CD ) =             'EOP'      then      'ROA'
                WHEN ( CONT.TABLE.FINC_ACCT_ID )=           'XXXX'        and ( CONT.TABLE.BAL_TYPE_CD ) =             'EOP'      then      'ROE'
                WHEN ( CONT.TABLE.FINC_ACCT_ID )=           'XXXX'        and ( CONT.TABLE.BAL_TYPE_CD ) =             'EOP'      then      'Return on Allocated Capital (ROAC)'

  ELSE ( CONT.TABLE.FINC_ACCT_NM ) end
FROM
  CONT.TABLE
WHERE
  (
   (
    ( ( CONT.TABLE.PERD_END_RPT_DT ) = (

SELECT Max(Perd_END_RPT_DT) 
FROM CONT.TABLE
Where VERS_NM='Actual'
   AND RPT_PERD_TYPE_CD = 'Q'
   AND DATA_VLDTN_IND='Y'
)
   AND RPT_PERD_TYPE_CD = 'Q'
  AND DATA_VLDTN_IND='Y'  )
    OR
    ( ( CONT.TABLE.PERD_END_RPT_DT ) = (

SELECT Max(Perd_END_RPT_DT) 
FROM CONT.TABLE
Where VERS_NM='Actual'
   AND RPT_PERD_TYPE_CD = 'M'
   AND DATA_VLDTN_IND='Y'
) 

  AND RPT_PERD_TYPE_CD = 'M'
  AND DATA_VLDTN_IND='Y'  )
   )
   AND
   ( ( CONT.TABLE.DATA_VLDTN_IND )='Y'  )
   AND
   ( ( CONT.TABLE.FINC_ACCT_ID )IN ('AC0006470','AC8000199','AC8002145','AC0006586','AC8000094')  AND ( CONT.TABLE.DEPT_ID )='OR80637'  )
  ) 
```

我的问题是将所有这些 CASE 语句更改为直接列引用会对性能产生什么影响。

换句话说：如果我将每个 CASE 语句更改为一个列名并从查询中删除所有 CASE 语句，会对性能产生很大影响，为什么？

我正在对此进行测试，以便确定性能是否受到影响，但我对 WHY 的细节同样感兴趣？（原因的技术细节）

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-17T20:49:41.387

与 WHERE 子句中的连接相比，case 语句的影响要小得多。

SQL 性能的主要驱动因素是 I/O——从磁盘读取数据。我认为它比按行进行的处理重要两个数量级。这只是一种启发式方法，而不是基于对数据库的特定测试。

您正在执行自联接，这将需要大量读取表的工作或大量处理索引的工作。

另一方面，case 语句变成了非常原始的硬件命令——equals、gotos 等。数据驻留在最靠近处理器的内存中，因此它会快速传输。您在 case 语句中没有做任何花哨的事情（例如喜欢或子查询）。我想如果您删除语句中的大部分行，查询也会一样快。

如果您遇到性能问题，请在（VERS_NM、RPT_PERD_TYPE_CD、DATA_VLDTN_IND、Perd_END_RPT_DT）上放置索引。这个由四部分组成的索引应该允许您在不调用原始表上的 I/O 请求的情况下获得最大日期。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-17T21:04:42.723

**编辑：**实际上，您可以将这两个子查询重新分解为 a `JOIN`，无论如何这可能会更快。它也摆脱了很多重复！

这实际上与查询的性能无关（@Gordon 已经很好地涵盖了这一点），但是那个巨大的 case 语句看起来就像是维护的噩梦。也许更好的处理方法是将其转换为表格

```
CREATE TABLE ACCT_DISPLAY_NAME (
    FINC_ACCT_ID CHAR(10),
    BAL_TYPE_CD  CHAR(3),
    DISPLAY_NAME VARCHAR(100)
);

CREATE INDEX ACCT_DISPLAY_INDEX ON ACCT_DISPLAY_NAME (
    FINC_ACCT_ID,
    BAL_TYPE_CD
);

INSERT INTO ACCT_DISPLAY_NAME VALUES
('AC99800'  , 'EOP', '  Net Interest Income'               ),
('AC12993'  , 'EOP', '  Non Interest Income'               ),
('AC667999' , 'EOP', 'Non-Interest Expense'                ),
('AC996587' , 'EOP', '  Total Marketing Expense'           ),
('AC659986' , 'EOP', '  Total Operating Expense'           ),
('AC69678'  , 'EOP', 'Pre-Provision Earnings (before tax)' ),
('AC09994'  , 'EOP', '  Net Charge-offs'                   ),
('AC20977'  , 'EOP', '  Other'                             ),
('AC19979'  , 'EOP', '  Allowance Build (Release)'         ),
('AC7094'   , 'EOP', 'Provision Expense'                   ),
('AC6997'   , 'EOP', 'Pretax Income'                       ),
('AC0994'   , 'EOP', 'Tax Expense'                         ),
('AC9999'   , 'EOP', 'NIAT'                                ),
('AC7990'   , 'EOP', 'EPS'                                 ),
('AC9995'   , 'EOP', 'Ending Loans - HFI'                  ),
('AC9995'   , 'avg', 'Average Loans - HFI'                 ),
('AC2991'   , 'avg', 'Average Earning Assets'              ),
('AC2999'   , 'EOP', 'Ending Deposits'                     ),
('AC9999'   , 'avg', 'Average Deposits'                    ),
('AC0379'   , 'EOP', 'NIM on Loans'                        ),
('AC6999'   , 'EOP', 'Revenue Margin'                      ),
('AC579'    , 'EOP', 'Charge off rate'                     ),
('AC5899'   , 'EOP', 'Efficiency ratio'                    ),
('AC629'    , 'EOP', 'ROA'                                 ),
('AC359'    , 'EOP', 'ROE'                                 ),
('AC619'    , 'EOP', 'Return on Allocated Capital (ROAC)'  ); 
```

并`LEFT JOIN`对其进行操作（因为您在`ELSE`中拥有它`CASE`），例如：

```
SELECT T.FINC_ACCT_NM,
       T.FINC_ACCT_ID,
       T.CURR_END_OF_PERD_ACTL_VAL,
       T.PREV_END_OF_PERD_ACTL_VAL,
       T.VARNC_PLAN_VAL,
       T.OUTLOOK_BDGT_PLAN_VAL,
       T.PERD_END_RPT_DT,
       T.PLAN_VERS_NM,
       T.FRMT_ACTL_CD,
       T.FRMT_PLAN_CD,
       T.RPT_PERD_TYPE_CD,
       COALESCE(N.DISPLAY_NAME, T.FINC_ACCT_NM)

FROM CONT.TABLE T
JOIN (
    SELECT RPT_PERD_TYPE_CD, DATA_VLDTN_IND, Max(Perd_END_RPT_DT) AS PERD_END_RPT_DT
    FROM CONT.TABLE
    WHERE VERS_NM='Actual'
      AND DATA_VLDTN_IND='Y'
    GROUP BY RPT_PERD_TYPE_CD, DATA_VLDTN_IND
) AS MAX_DATES
  ON T.RPT_PERD_TYPE_CD = MAX_DATES.RPT_PERD_TYPE_CD
 AND T.DATA_VLDTN_IND   = MAX_DATES.DATA_VLDTN_IND 
 AND T.PERD_END_RPT_DT  = MAX_DATES.PERD_END_RPT_DT 

LEFT JOIN ACCT_DISPLAY_NAME N
  ON T.FINC_ACCT_ID = N.FINC_ACCT_ID
 AND T.BAL_TYPE_CD  = N.BAL_TYPE_CD

WHERE T.DEPT_ID = 'OR80637'

  AND T.RPT_PERD_TYPE_CD IN ('Q', 'M')

  AND T.FINC_ACCT_ID IN (
    'AC0006470',
    'AC8000199',
    'AC8002145',
    'AC0006586',
    'AC8000094'
  ) 
```

# php - jQuery 在 AJAX 调用中发布版本

> ID：12012794
> 
> 赞同：1
> 
> 时间：2012-08-17T20:32:09.280
> 
> 标签：php, javascript, jquery

我有一个简单的脚本，它获取文本区域的值并通过 AJAX 发布。如果我发布“？？” 我得到奇怪的价值观。如果我在发布之前注销它检索的值，那一切都是正确的。但我的脚本收到的 POST 数据包括 jQuery 版本号。我的代码和结果如下。我应该以某种方式逃避这个吗？

```
var value = $("#textarea").val();

$.ajax({
        url:'index.php',
        type:'POST',
        data:'text='+value,
        dataType:'JSON',
        success:function(data){}
    }); 
```

对于文本的值，我的帖子数据以“jQuery17106460378167700797_1345234676316”的形式出现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T20:39:19.010

这是一个 POST 请求，而不是 GET，应该是：

```
var value = $("#textarea").val();

$.ajax({
    url:'index.php',
    type:'POST',
    data: {text :  value}, //object
    dataType:'JSON',
    success:function(data){

    }
}); 
```

PHP

```
$value = $_POST['text']; 
```

此外，将 dataType 设置为 JSON 会将响应评估为 JSON 并返回一个 JavaScript 对象。以严格的方式解析 JSON 数据，拒绝任何格式错误的 JSON 并引发解析错误。这意味着任何格式错误的 JSON，并且您的 ajax 调用将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:42:41.307

我不确定您何时执行脚本，是否按下按钮？

如果没有，您需要将其包装，使其仅在 DOM 完成加载后运行：

```
$(document).ready(function()
{
    var value = $("#textarea").val();
    $.ajax({
            url:'index.php',
            type:'POST',
            data:'text='+value,
            dataType:'JSON',
            success:function(data){}
        });
}); 
```

# git - Git：如何合并两个指向同一个存储库的文件夹

> ID：12012795
> 
> 赞同：2
> 
> 时间：2012-08-17T20:32:12.940
> 
> 标签：git, ssh, gitolite

我在 PC 上克隆了一个存储库，并创建了一些分支并提交。我无法推送它（因为 ssh 身份验证在 pc 上是不可能的）。所以我将文件发送到另一台电脑（zip 文件），它可以推送更改。

**Folder1**：包含解压缩的文件。

**Folder2**：包含相同 repos 的克隆版本，但在 folder1 中没有更改。

我试图推送它，但服务器告诉我这个错误“致命：远程端意外挂断”。

`git config remote.origin.url=new_url`我使用 git 协议而不是 http更改了远程 url 。但即便如此，我也无法推动更改。

那么如何将我的更改（从**folder1**）推送到服务器，或者将更改从**folder1**合并到**folder2**，并能够保留历史记录？

谢谢

**编辑：**

根据@VonC 的回答，我使用这些命令正确合并。

```
git bundle create bundle.bkp --all
git remote add temp-repos-to-merge ~/path/to/bundle.bkp
git fetch temp-repos-to-merge
git merge --no-ff temp-repos-to-merge/path/to/specific-branch

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T21:44:17.663

**我会捆绑** `folder1`repo（请参阅“[如何备份 git 服务器？](https://stackoverflow.com/questions/2870564/how-to-backup-git-server/2870908#2870908) ”）而不是 zip，它也会生成一个文件。

然后我会去`folder2`那个包并从那个包中拉出来（在将它添加为遥控器之后）

有关具体示例，请参阅“[如何使用 git-bundle 保持开发同步](https://stackoverflow.com/questions/3635952/how-to-use-git-bundle-for-keeping-development-in-sync)”。

# wordpress - 当我尝试预览或访问该网站时，Wordpress 空白屏幕？

> ID：12012796
> 
> 赞同：0
> 
> 时间：2012-08-17T20:32:17.857
> 
> 标签：wordpress

我是 Wordpress 的新手，我今天刚刚安装了它，我创建了一个用户名和密码，能够登录到 wordpress 并访问仪表板。我做了一些改变，安装了一个主题，创建了一个菜单，挑选了一个标题，等等......

但是，当我尝试预览该站点时，它只显示一个空白屏幕，有人知道如何解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T21:15:53.897

我过去遇到过类似的问题......为了解决它，我编辑了 wp-config.php 文件并激活了调试功能......让 wordpress 告诉我错误是什么，所以我可以修复它......

基本上在 wp-config.php 中搜索：define('WP_DEBUG', false);

并将其替换为：define('WP_DEBUG', true);

完成修复错误后，不要忘记将其改回...

取自：[Wordpress Codex - 编辑 wp-config.php](http://codex.wordpress.org/Editing_wp-config.php)

# jquery - 如何防止用户在控制台中获取密码字段值

> ID：12012798
> 
> 赞同：2
> 
> 时间：2012-08-17T20:32:22.653
> 
> 标签：jquery, security, console

我一直在帮助一些人使用他们的电脑并修理它们。其中一个人问我在自动表单字段中存储密码的安全性。我向他们展示了如何从控制台中的简单 jQuery 调用中检索密码的快速技巧。在一些网站上工作时，我一直在试图找出一种方法来阻止使用这个技巧来找出保存的密码是什么。

如果您不知道，要了解我在说什么，请尝试以下操作。

1.  使用 jquery 导航到一个网站（或 jquery 网站），然后打开自动表单填写或填写密码字段。
2.  检查元素以显示密码 id 字段或使用 jquery 调用该字段的某种方式
3.  在控制台中运行类似的东西`$('#password').val()`并观察密码显示。

我想知道作为 Web 开发人员是否有某种方法可以防止在我的网站上使用它，但仍然允许使用它来获取网站代码中字段的值。

谢谢。

**编辑**

来自 facebook 并自动填写登录名（为安全起见已涂黑）

![在此处输入图像描述](../Images/bc06a0171106db0dab5baca466e0106a.png)

然后在查询页面并`$jq('#pass').val()`在不更改任何内容的情况下运行控制台后（密码为安全起见）

![在此处输入图像描述](../Images/0146d05c48b0fdb450058d832db6f5eb.png)

**用例**

用户 1 在公共计算机上，他们允许浏览器保存登录信息

用户 1 离开，用户 2 去同一个站点。浏览器自动填写登录信息

用户 2 运行命令并获得对密码的访问权限

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T21:10:06.377

简短的回答：没有。从逻辑上讲，没有办法删除访问该字段中的数据*并*保留自动填充功能的能力。密码框的值*就是*密码，这就是您要提交的内容。您要么必须禁用自动填充才能*正确*阻止这种情况的发生。

然而...

您可以隐藏该值，方法是从`password`输入框中取出值并使用`.val("")`. 然后提交存储值的变量而不是提交时框中的内容。如果您使用许多混淆变量名称的工具之一来缩小脚本，那么找到该值会稍微困难一些（尽管*当然不是不可能）。*通过对值进行加密和解密，您可能会变得越来越疯狂，但归根结底，获取密码的*所有密钥***都**必须在脚本中，以便脚本本身可以在适当的时间访问它。你会阻止少数几个有人试一试但不是专职人员的情况。

您还必须牢记以下所有注意事项：

*   *如果*用户不更改密码变量，您必须确保仅提交密码变量。如果用户更新了密码框中的信息，您需要提交该信息。使用像 knockout.js 这样的工具，您可能能够不断获取和隐藏用户在该框中键入的任何内容，但这将是另一层复杂性

*   您希望用户清楚地知道发生了什么。如果他们的密码框突然空白，大多数用户会很困惑。

让我们现实一点。如果“黑客”可以直接访问某人的计算机，并且他们想要密码，他们就会得到它。在使用您的 javascript 之前，他们有一千种其他方法可以首先获取密码（键盘记录器，在他们键入时站在他们身后，如果您不使用 HTTPS 或加密数据，则使用数据包嗅探器，用钝器敲击它们等。 ) 在某处有一个关于这个的 XKCD 片段。编辑：[找到它:)](http://xkcd.com/538/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-23T08:49:08.450

您可以简单地禁用自动完成，这样密码就不会存储在输入字段中。

输入类型=“密码”自动完成=“关闭”

# javascript - 以编程方式打开选择器我想以编程方式打开下面选择元素的选择器。 <select id="select1" multiple="multiple"><option value="MDO1" selected="selected">MDO 1</option> <option value="MDO2">MDO 2</option> <option value="MDO3">MDO 3</option> < ID：12012799 赞同：3 时间：2012-08-17T20:32:27.227 标签：javascript, android, html, webkit 回答 #1 赞同：0 时间：2012-08-17T20:38:53.697 你能试试吗 var select1 = document.getElementById("select1"); var evt = document.createEvent('UIEvents'); evt.initUIEvent("click", true, true, window, 1); select1.dispatchEvent(evt); 谢谢，普什卡</select>

# nuget - 如何删除解决方案中任何项目未引用的 NuGet 包？

> ID：12012803
> 
> 赞同：149
> 
> 时间：2012-08-17T20:33:01.437
> 
> 标签：nuget, visual-studio-2012

不知何故，在升级到 VS2012 和 .NET 4.5 期间，我设法让 NuGet 感到困惑。包管理器（和包文件夹）中出现了我无法删除的包（我相信它们是旧的 ASP.NET NuGet 包，已被新版本的新包名称替换。它们每个都只有一个“**管理**” 按钮-- 但没有卸载按钮。当您查看它们的使用位置时，您会发现解决方案的任何项目都没有引用它们？它们**没有**显示卸载？

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2013-10-29T17:30:31.393

我找到了解决方法。

1.  启用包还原和自动检查（选项/包管理器/常规）
2.  删除 packages 文件夹的全部内容（如果你紧张的话到回收站！）
3.  管理 Nuget 包以获取解决方案
4.  单击恢复按钮。

NuGet 将*仅*还原解决方案中使用的包。您最终会得到一组漂亮、精简的软件包。

* * *

## 回答 #2

> 赞同：110
> 
> 时间：2012-08-19T07:24:12.047

您可以使用带有命令的包管理器控制台：`Uninstall-Package PackageId`删除它，或者只是从解决方案文件夹下的“包”文件夹中删除包文件夹。有关包管理器控制台的更多信息，您可以在此处找到：http: [//docs.nuget.org/docs/reference/package-manager-console-powershell-reference](http://docs.nuget.org/docs/reference/package-manager-console-powershell-reference)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-11-28T06:22:38.003

首先打开包管理器控制台。然后从下拉列表中选择您的项目。并运行以下命令来卸载 nuget 包。

## `Get-Package`

获取您已安装的所有软件包。

接着

## `Uninstall-Package PagedList.Mvc`

--- 卸载名为 PagedList.MVC 的包

信息

```
PM> Uninstall-Package PagedList.Mvc
Successfully removed 'PagedList.Mvc 4.5.0.0' from MCEMRBPP.PIR. 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-02-27T12:37:24.453

如果要删除/卸载应用于**解决方案中多个项目的**Nuget 包，请转到：

1.  工具-> Nuget 包管理器-> 管理解决方案的 Nuget 包

2.  在“已安装包”所在的左侧列中选择“全部”，这样您将看到已安装包的列表和跨它们的“管理”按钮。

3.  选择管理按钮，你会得到一个弹出窗口，取消选中项目名称中的复选框，然后确定

包管理器的其余工作将为您完成。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-05-06T14:03:18.380

VS2019 > 工具 > 选项 > Nuget 包管理器 > 常规 > 点击“清除所有 Nuger 缓存”

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-04-15T16:04:40.370

如果您已使用**Uninstall-Package**实用程序删除了软件包并从解决方案下的软件包目录中删除了所需的软件包（并且您仍然收到错误），只需在代码编辑器中打开 *.csproj 文件并手动删除标签。例如，我想摆脱 Nuget 包**Xamarin.Forms.Alias**并从 *.csproj 文件中删除了这些行。

[![从 msbuild 脚本中删除 nuget 包](../Images/df16d03377df330a5a96c78dd196daba.png)](https://i.stack.imgur.com/MhfyH.png)

最后，不要忘记在 Visual Studio 中提示后重新加载您的项目（更改项目文件后）。我在 Visual Studio 2015 上尝试过，但它应该也可以在 Visual Studio 2010 及更高版本上运行。

希望这可以帮助。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-13T10:40:16.327

另一种方法是在解决方案的任何项目中安装要删除的未使用包，然后将其卸载，Nuget 也会将其删除。

这里需要一个合适的卸载程序。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-02-13T15:02:19.943

## 解决方案 1

使用 powershell 管道获取包并在单个语句中删除，如下所示

```
Get-Package | Uninstall-Package 
```

## 解决方案 2

如果要卸载选定的软件包，请按照以下步骤操作

1.  用于`GetPackages`获取包列表
2.  下载**[Nimble 文本](https://nimbletext.com)**软件
3.  复制`GetPackages`NimbleText 中的输出（对于列表窗口中的每一行）
4.  `(`如果需要，将列分隔符设置为
5.  类型`Uninstall-Package $0`（使用模式窗口替换）
6.  复制结果并将其粘贴到**包管理控制台中**

所有人都这样。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-04-04T07:02:11.453

一个 NuGet 包可以引用另一个 NuGet 包。所以，请注意包间的依赖关系。我刚刚卸载了一个谷歌地图包，它随后卸载了 Newtonsoft、Entity Framework 等底层包。

因此，从包文件夹中手动删除特定包会更安全。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-03-12T14:40:37.757

在包管理器控制台窗口中，通常用于安装包的任何命令都可用于卸载该包。只需将**INSTALL**命令替换为**UNINSTALL**即可。

例如，要安装 PowerTCPTelnet，命令是：

`Install-Package PowerTCPTelnet -Version 4.4.9`

要卸载相同，命令是：

`Uninstall-Package PowerTCPTelnet -Version 4.4.9`

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2014-08-10T01:33:58.113

如果您想使用 Visual Studio 选项，请参阅[如何从现有的 Visual Studio 解决方案中删除 Nuget 包](https://spvenky.wordpress.com/2014/08/10/how-to-remove-nuget-packages-from-existing-visual-studio-solution/)：

> **步骤1：**
> 
> 在 Visual Studio 中，转到 Tools/NuGet Package Manager/Manage NuGet Packages for Solution...</p>

> **第2步：**
> 
> 从当前解决方案中取消选中您的项目

> **第 3 步：**
> 
> 取消选择项目并按 OK

# spring - Spring：bean与现有的不兼容bean冲突

> ID：12012804
> 
> 赞同：0
> 
> 时间：2012-08-17T20:33:11.810
> 
> 标签：spring, tomcat

我们的项目使用 spring 2.5.5 和 Tomcat。我刚刚将tomcat从5.5迁移到7。但是当tomcat加载webapp上下文时，我们得到了这个异常。似乎 spring 至少扫描了所有相同的组件两次。有没有人遇到过这个异常？

```
Aug 16, 2012 1:54:36 PM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring root WebApplicationContext
Aug 16, 2012 1:54:36 PM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from class path resource [spring-configuration/application-context.xml]; nested exception is java.lang.IllegalStateException: Annotation-specified bean name 'observerLockMonitor' for bean class [aaa.aaa.ObserverLockMonitor] conflicts with existing, non-compatible bean definition of same name and class[aaa.aaa.ObserverLockMonitor]
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:420)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:342)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:310)
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)
at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)
at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124)
at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:92)
at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:123)
at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:423)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:353)
at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:255)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:199)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:45)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618)
at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:963)
at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1600)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.IllegalStateException: Annotation-specified bean name 'observerLockMonitor' for bean class [aaa.aaa.ObserverLockMonitor]conflicts with existing, non-compatible bean definition of same name and class [aaa.aaa.ObserverLockMonitor]
at org.springframework.context.annotation.ClassPathBeanDefinitionScanner.checkCandidate(ClassPathBeanDefinitionScanner.java:267)
at org.springframework.context.annotation.ClassPathBeanDefinitionScanner.doScan(ClassPathBeanDefinitionScanner.java:208)
at org.springframework.context.annotation.ComponentScanBeanDefinitionParser.parse(ComponentScanBeanDefinitionParser.java:85)
at org.springframework.beans.factory.xml.NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:69)
at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1255)
at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1245)
at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:135)
at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:92)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:507)
at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:398)
... 27 more 
```

WEB-INF下的web.xml为：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.4"
    xmlns="http://java.sun.com/xml/ns/j2ee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            classpath*:spring-configuration/*.xml; 
            classpath*:spring-configuration/${apollo.realm}/${apollo.domain}/*.xml; 
            classpath*:spring-configuration/${apollo.realm}/*.xml  
        </param-value>

    </context-param>

    <listener>
        <listener-class>
            org.springframework.web.context.ContextLoaderListener
        </listener-class>
    </listener>

    <servlet>
        <servlet-name>rds-eventProcessor</servlet-name>
        <servlet-class>
            org.springframework.web.servlet.DispatcherServlet
        </servlet-class>
        <load-on-startup>2</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>rds-eventProcessor</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>

    <!-- 
    <servlet>
        <servlet-name>ping</servlet-name>
        <servlet-class>
            amazon.rds.processor.utils.VipHealthCheck
        </servlet-class>
        <load-on-startup>2</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>ping</servlet-name>
        <url-pattern>/ping/*</url-pattern>
    </servlet-mapping>
    -->
</web-app> 
```

类路径下的 xml 之一是 application-context.xml：

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
                           http://www.springframework.org/schema/aop
                           http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
                           http://www.springframework.org/schema/context
                           http://www.springframework.org/schema/context/spring-context-2.5.xsd
                           http://www.springframework.org/schema/tx 
                           http://www.springframework.org/schema/tx/spring-tx-2.5.xsd "
       default-destroy-method="shutdown">

  <context:annotation-config />

    <context:component-scan base-package="aaa.aaa" />  
    <context:component-scan base-package="bbb.bbb" />  
    <context:component-scan base-package="ccc.ccc" />

...... here we have some other beans that are defined manually.
</beans> 
```

bean定义是：

```
@Component
public class ObserverLockMonitor implements RDSAlfSessionDroppedListener {
    public interface RDSAlfSessionStartedListener {
        public void sessionStarted(AlfConnection alfConnection);
    }

    private static EventLog log = EventLogFactory.getEventLog(ObserverLockMonitor.class);

    private final RDSAlfConnectionFactory alfConnectionFactory;
    private final List<RDSAlfSessionStartedListener> sessionStartedListeners;

    /**
     * Timestamp of the last time we had a valid connection to alf...
     */
    private Long timeOfLastSeenAlfConnection = System.currentTimeMillis();

    private AlfConnection alfConnection;

    @Autowired
    public ObserverLockMonitor(RDSAlfConnectionFactory alfConnectionFactory, List<RDSAlfSessionStartedListener> sessionStartedListeners) {
        this.alfConnectionFactory = alfConnectionFactory;
        this.sessionStartedListeners = sessionStartedListeners;
    } 
```

任何提示或指针将不胜感激。谢谢。

# android - 如何将 Android 应用程序签署为系统应用程序以使用 DEVICE_POWER 权限

> ID：12012805
> 
> 赞同：0
> 
> 时间：2012-08-17T20:33:13.260
> 
> 标签：android

是否正在阅读[Android 系统应用程序 DEVICE_POWER 权限错误](https://stackoverflow.com/questions/7507776/android-system-application-device-power-permission-error)以及[如何使用系统签名对 Android 应用程序进行签名？](https://stackoverflow.com/questions/3635101/how-to-sign-android-app-with-system-signature)

我仍然无法将我的应用程序作为系统应用程序进行签名。我不知道 /build/target/product/security 在哪里。

我是否将密钥从我自己的设备中取出以用于签署我的应用程序。

我只希望我的应用程序能够调用：

```
private void screenOff(){
    PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);

    long time = SystemClock.uptimeMillis() + 1000;
    pm.goToSleep(time);
} 
```

感谢您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T20:37:55.050

如果您从项目的源代码构建 Android，则只能将您的应用程序作为系统应用程序进行签名。如果您对只能在您的手机上使用的 hack 感兴趣，请参阅：

[如何使用系统签名对 Android 应用进行签名？](https://stackoverflow.com/questions/3635101/how-to-sign-android-app-with-system-signature)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T21:59:27.803

你不能那样做。

只有设备制造商可以使用系统密钥签署应用程序 - 与只有您可以使用密钥签署应用程序的方式相同。并且每个设备（至少每个制造商）都有不同的系统密钥。他们都不会给你那把钥匙。

获得该权限的唯一方法是构建您自己的设备固件（例如[CyanogenMod](http://www.cyanogenmod.com/)，因此您知道该密钥（`/build/target/product/security`是这些来源的一部分）。但如果您这样做，您仍然无法分发您的应用程序，因为只有您（+其他使用您的固件的人）拥有正确的密钥。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-14T08:31:37.667

我认为您需要让您的应用获得 DEVICE_POWER 的权限。是的，普通应用程序没有该权限。但是您可以使您的应用程序成为特权应用程序。如果您将其设为特权，则在构建中，该应用程序将在您的 /system/priv-apps/ 中创建

要使您的应用程序成为特权应用程序，请在 Android.mk 文件中添加以下代码： LOCAL_PRIVILEGED_MODULE := true

干杯！！！

# android - Android AlertDialog中的奇怪效果，灰色条纹

> ID：12012806
> 
> 赞同：0
> 
> 时间：2012-08-17T20:33:21.047
> 
> 标签：android, android-alertdialog

![2.3.3 上的警报对话框](../Images/4efa137ae7836ca840541d37bb97f3f8.png)

在 Android 4 上这可以正常工作，但在 2.3.3 上，我在 OK 按钮顶部后得到（而不是完全深灰色背景）浅灰色水平条纹。有什么想法可能导致这种情况吗？谢谢！

```
private void showResult(final String message) {
   final Context context = this;

    Runnable run = new Runnable() {
        public void run() {
            AlertDialog.Builder builder = new AlertDialog.Builder(context);

            builder.setMessage(message)
                .setPositiveButton(R.string.ok, new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        dialog.dismiss();
                    }
            });
            builder.create().show();
        }
    };

    this.runOnUiThread(run);
} 
```

我有：

```
<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="15" /> 
```

并在 values/styles.xml

```
<resources>

<style name="AppTheme" parent="android:Theme.Light" />

</resources> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T20:39:06.903

我不确定您是在寻找所有东西的深灰色背景，还是只是为了保持一致性。

您是否尝试过更改主题[`AlertDialog.Builder`](http://developer.android.com/reference/android/app/AlertDialog.Builder.html#AlertDialog.Builder(android.content.Context,%20int))？在 API11+ 中，您可以使用第二个构造函数，它接受一个整数参数来设置主题。也许将其设置回“传统”主题会使它在各个版本中看起来都一样？

> `public AlertDialog.Builder (Context context, int theme)`
> 
> 自：API 级别 11
> 
> 使用此构建器及其创建的 AlertDialog 的上下文和主题的构造器。AlertDialog 使用的实际主题是私有实现，但是您可以在此处提供主题中的属性名称，从中获取对话框的样式（例如 alertDialogTheme 或常量之一`AlertDialog.THEME_TRADITIONAL`、`AlertDialog.THEME_HOLO_DARK`或`AlertDialog.THEME_HOLO_LIGHT`.

如果这对您不起作用，您可以使用`AlertDialog.Builder().setView(View)`能够进一步指定对话框中每个项目的属性（因此您可以将`Button`s 放入`View`您传递的内容中，并将按钮的背景设置为灰色） .

# iphone - 如何使用 CGPathAddCurveToPoint 创建一个完美的半圆？

> ID：12012807
> 
> 赞同：3
> 
> 时间：2012-08-17T20:33:24.693
> 
> 标签：iphone, ios, ipad, core-graphics, cgpath

我正在尝试使用 CGPathAddCurveToPoint 创建一个半径为 15 点的完美右半圆，如下所示：

```
CGPathMoveToPoint(path, NULL, 0, 0);
CGPathAddCurveToPoint(path, NULL, 15, 0, 15, 30, 0, 30); 
```

它从圆圈的顶部中间开始。然后将第一个控制点设置为圆圈边界框的右上角。第二个控制点设置在圆圈边界框的右下角。圆圈在边界框的底部中间结束。

但是在绘制时，圆圈具有蛋状形状。

如何制作一个完美无瑕的右半球，从 0,0 点开始向右，到 0,30 点结束？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T20:38:37.047

`CGPathAddCurveToPoint`创建[贝塞尔曲线](http://en.wikipedia.org/wiki/Bezier_curve)，而不是圆弧。您正在寻找的方法是`CGPathAddArc`or `CGPathAddArcToPoint`，如下所示：

```
CGPathMoveToPoint(path, NULL, 0, 0);
CGPathAddArc(path, NULL, 0, 15, 15, M_PI_2, -M_PI_2, true); 
```

# sql-server - 将 JSON 内容存储为字符串应该正确的数据类型是什么？

> ID：12012810
> 
> 赞同：5
> 
> 时间：2012-08-17T20:33:53.503
> 
> 标签：sql-server, json, sql-server-2008, sql-server-2005, json.net

我计划使用 JSON.NET 对对象进行序列化和反序列化，并使用 json 字符串将其存储在数据库中。

SQL Server 2008 的哪种数据类型最好存储它？

*   nvarchar（最大值）？
*   varchar（最大值）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T20:38:15.407

你的 json 会是多语言的吗？如果是 - 使用 nvarchar。如果不是 - 使用 varchar，它使用更少的存储空间并且在性能方面更有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T21:05:44.510

您可能应该使用 nvarchar(max)。

[http://www.ietf.org/rfc/rfc4627.txt](http://www.ietf.org/rfc/rfc4627.txt)

JSON 的首选编码是 UTF-8，但也可以使用 UTF-16 和 UTF-32，因此您可能会获取包含宽字符的数据。

另一方面，您也可以使用 varbinary(max)，存储实际的 UTF-8 流并节省一些空间和处理，因为 UTF-8 流不需要转换为 .NET 中的实际字符串（即不需要UTF-8 到 Unicode 内部 .NET 字符串）。

我不会使用 varchar(max) 因为如果确实有宽字符进入，那么它们可能会被任何未转换恰好存储在 varchar 中的 UTF-8 的查询误解（假设 8 位 varchar 因为你可以还根据您的数据库设置在 varchar 中存储多字节），您不必担心将 UTF-8 转换为 varchar 的特定代码页。同样，nvarchar 是 Unicode，因此您不必担心任何混乱。

您是要对 SQL Server 中的 JSON 进行任何操作还是仅对存储进行操作？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T06:10:44.297

varchar 10 倍。更快更好。

# c# - 使用 OrderBy (IEnumerable , 功能 )

> ID：12012812
> 
> 赞同：3
> 
> 时间：2012-08-17T20:33:57.327
> 
> 标签：c#, linq, c#-4.0

我想通过例子来理解TSource、Tkey的概念。

我们有代码

```
 class Pet
        {
            public string Name { get; set; }
            public int Age { get; set; }
        }

        public static void OrderByEx1()
        {
            Pet[] pets = { new Pet { Name="Barley", Age=8 },
                           new Pet { Name="Boots", Age=4 },
                           new Pet { Name="Whiskers", Age=1 } };

            IEnumerable<Pet> query = pets.OrderBy(pet => pet.Age);

            foreach (Pet pet in query)
            {
                Console.WriteLine("{0} - {1}", pet.Name, pet.Age);
            }
        }

        /*
         This code produces the following output:

         Whiskers - 1
         Boots - 4
         Barley - 8
        */ 
```

我们可以说 TSource 是“pet”，key 是“Age”，pet => pet.Age 是

```
 Func<TSource, TKey>? 
```

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T20:35:51.937

不，`TSource`是类型`Pet`，`TKey`是类型`int`。因此，不使用类型推断，您将拥有：

```
IEnumerable<Pet> query = pets.OrderBy<Pet, int>(pet => pet.Age); 
```

`TSource`并且`TKey`是方法的[*泛型类型参数*](http://msdn.microsoft.com/en-us/library/0zk36dx2.aspx)。您可以将它们视为类的泛型类型参数......所以在`List<T>`,`T`是类型参数，如果你写：

```
List<string> names = new List<string>(); 
```

那么这里的*类型参数*是`string`（所以你可以说`T=string`在这种情况下，以手动方式）。

您的情况的不同之处在于编译器根据方法调用参数为您*推断类型参数。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T20:40:56.210

不，来自[msdn](http://msdn.microsoft.com/en-us/library/bb534966.aspx)`Enumerable.OrderBy<TSource, TKey> Method (IEnumerable<TSource>, Func<TSource, TKey>`

*   TSource

    源元素的类型。

*   密钥

    keySelector 返回的键的类型。参数源类型：System.Collections.Generic.IEnumerable

    要排序的一系列值。keySelector 类型：System.Func

    从元素中提取键的函数。

所以`TSource`= `Pet`; `TKey`=`int`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T20:50:26.197

Jon Skeet 的[书](http://manning.com/skeet2/)相当彻底地涵盖了这些细节。话虽如此，在这种情况下，通过使用 Visual Studio 中的鼠标浮动工具来查看 Generic 的播放方式是很有用的。

![在此处输入图像描述](../Images/51a3828adb9231180b5b9a6c9b12ce33.png)

# javascript - Twitter Bootstrap Popover 的 Ajax 内容

> ID：12012816
> 
> 赞同：2
> 
> 时间：2012-08-17T20:34:12.760
> 
> 标签：javascript, jquery, twitter-bootstrap

这是我通过ajax加载popover内容的实现。它加载内容，甚至显示弹出框。我的问题是，在第一次“显示”时，ajax 加载后，它会立即显示和隐藏。之后它工作正常。

```
 $("a.mypopover").bind("hover", function() {
    var el=$(this);
    el.unbind("hover");
    $.ajax({
      url: el.attr('href'),
      success: function(d){
        el.popover({ content: "dynamic text", placement:'bottom' })
          .click(function(e) {
            e.preventDefault() ;
          })
          .bind("mouseleave", function(e) {
            $(this).popover("hide");
          });
        el.popover("show");
      }
    });
    return false;
  }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T03:31:19.970

```
$("a.mypopover").bind("hover", function() {
var el=$(this);
el.unbind("hover");
$.ajax({
  url: el.attr('href'),
  success: function(d){
    el.popover({ content: "dynamic text", placement:'bottom', html:true, trigger:'hover' }).popover("show");
  }
});
return false;
}); 
```

只需使用“触发器”悬停即可。

# asp.net-mvc - 让 MVC 控制器轻而模型重

> ID：12012817
> 
> 赞同：10
> 
> 时间：2012-08-17T20:34:23.013
> 
> 标签：asp.net-mvc

我听说控制器应该保持轻便而模型要重。

对于控制器中应该保留什么以及模型中应该保留什么的最佳实践，我有些困惑。

在我们的组织中，我们在哪里使用实体框架并将表放在那里。

对于控制器，我们使用 LINQ，然后将信息发送到视图。

对控制器和模型中应该包含哪些代码有点困惑。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-19T15:21:24.843

> [**免责声明**
> 整个话题是一团糟。尤其是在涉及 Web MVC 时。出于所有实际目的，不可能将经典的 MVC 模式用于 Web，因为视图应该是观察模型。从理论上讲，您可以使用 WebSockets 实现类似的东西，但是为*每个*用户保留一个持久模型并不是一个现实的解决方案。]

## 这是你必须了解的 MVC

经典 MVC 和受 MVC 启发的模式中最重要的思想[*分离关注点*](http://en.wikipedia.org/wiki/Separation_of_concerns)。它将应用程序分为两个主要层：

*   *表示层*

    管理用户界面。它处理界面的创建和对用户对该界面的操作作出反应。该接口可能是桌面应用程序或 HTML 网页的 GUI，但它也可以是 REST API 或火星探测器上的接收器-响应器。这就是为什么 Web 应用程序可以在前端和后端实现 MVC 模式的原因。

    必需的部分是视图和控制器，但在 web 上下文中，完全实现的视图通常也使用多个模板来创建界面。

*   *模型层*

    这是所有业务规则和逻辑所在的地方。MVC 中的**M**不是一个单一的实体。相反，它是一个包含不同结构的层。其中一些结构还负责与存储的交互。

## 控制者的职责是什么？

控制器是表示层的一部分，它处理用户输入。在基于 Web 的实现的上下文中，视图和控制器之间通常具有 1:1 的关系，其中控制器接收来自浏览器的请求，并根据所述请求的内容更改模型层和视图的状态。

如果您使用的是经典 MVC 或 Model2 MVC，那么这就是控制器职责的范围。

在 MVP 和 MVVM 模式中，您有一个被动视图，类似控制器的结构负责从模型层获取信息并将其传递给当前视图实例。[这篇文章](https://stackoverflow.com/a/11878502/727208)可能会提供一些关于受 MVC 启发的模式的额外细节。

但控制器绝不负责任何形式的业务逻辑。如果是，则意味着您有一个泄漏的抽象，因为表示层的结构会起作用，这应该在模型层中。

通常，控制器将是您应用程序中最简单的结构。

## 模型呢？

如前所述，模型是一个层，它包含所有领域业务逻辑和相关功能。该层，就像表示层一样，由多组结构组成：

*   **领域对象**^([[1]](http://c2.com/cgi/wiki?DomainObject))

    在谈论“模型”时，这些结构通常是人们的意思。它们也称为[模型对象](http://msdn.microsoft.com/en-us/library/dd381412.aspx)或[业务对象](https://en.wikipedia.org/wiki/Business_object_(computer_science))。这是大多数领域业务逻辑结束的地方。

*   **数据存储结构**

    该组将包含所有类，它们抽象与存储的交互（SQL 数据库、缓存系统、noSQL、远程 SOAP 或 REST API）。他们通常会实现一些[数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)或[存储库](http://martinfowler.com/eaaCatalog/repository.html)模式的变体，但您也可以使用其他一些解决方案，例如[工作单元](http://martinfowler.com/eaaCatalog/unitOfWork.html)。实现细节并不那么重要。重要的*是*它们允许您从域对象中存储数据并将信息检索到域对象中。

*   **服务**

    或者你可以称之为“组件”。模型层中有高级抽象，有助于域对象和存储结构之间的交互。通常代表模型层的大块，如“识别服务”、“邮件”、“文章管理”，并为表示层提供交互的接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T21:11:43.457

这是一场宗教辩论。有些人喜欢在他们的控制器中尽可能少的代码，而在他们的模型中尽可能少的代码。在项目中做你觉得自然的事情，但要保持一致。

其他一切都是教条，您可以选择任何一种方式并提出案例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T20:43:11.083

Model is the core of your application. It is best to think of models as of your business entities. Do you want to create a view of an invoice? Then `Invoice` be your model, it represents the underlying object.

Controller is just a way to handle requests from a client, retrieving the data from database (or updating them) and flushing out the responses.

Your thoughts about the application design should be model-centric, that's the important part.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T20:55:02.790

简单来说，Model 表示您的应用程序将使用的底层数据。它的设计方式应使其可以在不同的应用程序中使用。例如，控制台命令、Web 服务等可以使用表示新闻数据的模型。它在模型中，您将在其中定义业务逻辑，独立于视图。

控制器可以被认为是将模型和视图绑定在一起的粘合剂。它们直接处理客户端请求并相应地与视图和模型进行交互。

在一个设计良好的应用程序中，您的数据结构和业务逻辑将被设计在一个模型中，使其“沉重”。而控制器只会将您的模型和视图与客户端请求互连，使其“轻”。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-17T21:09:21.553

在经典的模型-视图-控制器 MVC 模式中，您的模型本质上是一个“无头”应用程序，没有 UI，并且完全与 UI 无关。它提供了一个 API，它是应用程序的功能核心。

视图是用户界面，但您选择定义它（网页？电梯控制面板？其他？）。给定的应用程序可能有 1 个视图，也可能有很多视图。

控制器（或多个控制器——就像视图一样，对于给定的应用程序可能有一对多控制器）在视图和模型之间中继和转换事件、通知和数据，以防止模型需要知道任何特定于视图的东西。

这个想法是将核心应用程序（模型）与用户界面（视图）隔离开来。从中可以看出一些事情：

*   View 知道 Controller 和 Model 并与之通信（您不太可能尝试将 View 连接到另一个 Model）并期望 Controller 知道 View 和 Model。

*   Controller 知道 View 和 Model 并与之通信。

*   模型对控制器或视图一无所知。

执行业务逻辑的代码应该在模型中，而不是在控制器中。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-17T20:40:26.733

我不是 MVC 专家，但试着专注于控制器应该使用来自用户的输入来引导他们到正确视图的事实。

我不知道[NerdDinner](http://nerddinner.codeplex.com/SourceControl/list/changesets)是否是一个理想的例子，但您可以看到 Scott Hanselman 等人从他的 EF 上下文中进行了一些数据访问，但将大部分其他逻辑推送到模型上的服务类或助手。

我不知道我是否同意“模型重”部分，因为我不将模型用作“业务对象”。如果我真的需要很多“业务”逻辑，我通常会在单独的“域”层中创建它，甚至可能在此之上有一个单独的数据访问层。但是对于很多简单的（请参阅：非企业）项目，根据我的经验，这是矫枉过正的。

# python - 在 Appengine (Python) 中将 PDF 附加到电子邮件

> ID：12012818
> 
> 赞同：1
> 
> 时间：2012-08-17T20:34:29.237
> 
> 标签：python, google-app-engine

如何将位于 Appengine 应用程序基本目录中的 PDF 附加到电子邮件中？长什么样子
？`should message.attachments`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T20:52:47.997

根据[文档](https://developers.google.com/appengine/docs/python/mail/emailmessagefields)，附件字段是元组列表，其中第一个元素是文件名，第二个元素是表示文件的字节字符串。所以你只需要阅读pdf：

```
pdf_contents = open(os.path.join(os.path.dirname(__file__), 'yourpdf.pdf')).read() 
```

这假设您的 pdf 和 python 文件在同一个文件夹中。接着

```
attachments = [('yourpdf.pdf', pdf_contents)] 
```

# css - href 破坏 div 按钮提供随机边框

> ID：12012822
> 
> 赞同：-4
> 
> 时间：2012-08-17T20:34:42.057
> 
> 标签：css, styles

我添加了一个这样的 CSS 按钮：http: [//pastebin.com/UZCgmqSN](http://pastebin.com/UZCgmqSN) 为什么我不能使用简单的 HTML 代码？..

链接href为按钮提供了蓝色边框+文本颜色，每当我从中删除`<A>`时，它仍然保持不变。

我希望整个按钮成为一个链接，而不是像您需要将鼠标悬停在文本上才能转到该链接。

基本上我不希望 a 样式影响我的按钮。

解决方案可能是：在指定的 div 上禁用链接样式谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T20:39:45.913

添加一个填充，这将使文本周围的区域也可点击。此外，应用以下样式：

```
a {
    text-decoration:none;
}
a div {
    background:#444;
    color:#fff;
    border:1px solid #333;   
    text-align:center;
    padding:5px;
    width:100px;
} 
```

这应该这样做。

看看这个：http: [//jsfiddle.net/yFZ4y/](http://jsfiddle.net/yFZ4y/)

*编辑*：在*INLINE*元素（如**a** ）中使用**div**或任何*块级元素*是不好的做法。请改用**跨度**。

 ****** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T20:40:46.443

这是链接/按钮的示例[http://jsfiddle.net/CRjrz/](http://jsfiddle.net/CRjrz/)

```
<div>
    <a href="#">link text</a>
</div>​

a
{
    display: block;
    width: 100px;
    height: 35px;
    text-decoration: none;
    color: black;
    text-align: center;
    line-height: 35px;
}
div
{
    border: solid 1px black;
    width: 100px;
    height: 35px;
}​ 
```*****

# wrapper - 如何包装 NHibernate QueryOver API

> ID：12012823
> 
> 赞同：0
> 
> 时间：2012-08-17T20:34:53.340
> 
> 标签：wrapper, queryover

我将 Nhibernate 会话包装如下。

```
public interface IDalSession : IDisposable
{
    void MarkForRollBack();
    void End();
    IDalSession Start();
    IDalSession StartWithTransaction();
    T Save<T>(T entity);
    T CreateQuery<T>(string query);
    //ISession GetHibernateSession { get; }
} 
```

我真的很想使用 QueryOver 作为我的主要查询。QueryOver API 看起来不可能被包装，因为它很大。一种解决方案是在我需要提取数据的所有地方使用 NHibernate `ISession`( )。`GetHibernateSession`但它非常难看。
这里的解决方法是什么？如何包装 QueryOver？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T08:54:30.747

你是这个意思吗？

```
 public interface IDalSession : IDisposable
    {
        void MarkForRollBack();
        void End();
        IDalSession Start();
        IDalSession StartWithTransaction();
        T Save<T>(T entity);
        T CreateQuery<T>(string query);
        IQueryOver<T,T> NewQueryOver<T>(); // check me out
        //ISession GetHibernateSession { get; }
    }

    ...

     public IQueryOver<T,T> NewQueryOver<T>()
        {

          return Session.QueryOver<T>();
        } 
```

您可能会收到一些关于从其他层隐藏任何 NH 的评论，因此能够将新的 linq 传递回 NH 查询作为它的`IQueryable`：

```
 public virtual IQueryable<T> NewQuery<T>()
    {
      return Session.Query<T>();
    } 
```

但我个人更喜欢 QueryOver API，因此我将数据访问封装到具体的存储库中。S#arp 架构做得很好：

*   [界面](http://code.google.com/p/sharp-architecture/source/browse/trunk/src/SharpArch/SharpArch.Core/PersistenceSupport/IRepository.cs?spec=svn353&r=353)
*   [实施。](http://code.google.com/p/sharp-architecture/source/browse/trunk/src/SharpArch/SharpArch.Data/NHibernate/Repository.cs?r=493)

# java - 使用文件集合，获取与特定文件夹相关的 getPath()

> ID：12012824
> 
> 赞同：1
> 
> 时间：2012-08-17T20:34:57.013
> 
> 标签：java, file, pdf, path, apache-commons

我正在使用

```
org.apache.commons.io.FileUtils 
```

获取包含在指定文件夹（和相关子文件夹）中的所有归档 PDF

这里有一个简单的代码

```
import java.io.File;
import java.util.Collection;
import org.apache.commons.io.FileUtils;
import org.apache.commons.io.filefilter.IOFileFilter;
import org.apache.commons.io.filefilter.TrueFileFilter;

public class FileFilterTest
{
    public static void main(String[] args)
    {
        File ROOT_DIR = new File("C:\\PDF_Folder");

        Collection<File> PDF_FILES = FileUtils.listFiles(ROOT_DIR, new IOFileFilter() {

            @Override
            public boolean accept(File file)
            {
                return file.getName().endsWith(".pdf");
            }

            @Override
            public boolean accept(File dir, String name)
            {
                return name.endsWith(".pdf");
            }
        }, TrueFileFilter.INSTANCE);

        for(File pdf : PDF_FILES)
        {
            System.out.println(pdf.getPath());
        }
    }
} 
```

getPath() 方法像这样返回绝对路径

```
C:\PDF_Folder\SomeFolder\AnotherFolder\A\20120430_TT006059__0000039.pdf
C:\PDF_Folder\Folder1\A\20120430_TT006060__000003A.pdf
C:\PDF_Folder\Folder1\Folder2\Folder3\B\20120430_TT006071__000003B.pdf
C:\PDF_Folder\Folder4\20120430_TT006125__000003C.pdf 
```

有没有办法只获取与提供的根文件夹相关的路径？

```
SomeFolder\AnotherFolder\A\20120430_TT006059__0000039.pdf
Folder1\A\20120430_TT006060__000003A.pdf
Folder1\Folder2\Folder3\B\20120430_TT006071__000003B.pdf
Folder4\20120430_TT006125__000003C.pdf 
```

编辑：这里是由 jsn 代码创建的解决方案

```
for(File pdf : PDF_FILES)
{
    URI rootURI = ROOT_DIR.toURI();
    URI fileURI = pdf.toURI();

    URI relativeURI = rootURI.relativize(fileURI);
    String relativePath = relativeURI.getPath();

    System.out.println(relativePath);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T20:40:03.980

可能是这样的：

```
String relPath = new File(".").toURI().relativize(pdf.toURI()).getPath();
System.out.println(relPath); 
```

经测试，这行得通。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T20:41:28.527

一种方法是简单地从文件名中“减去”根路径：

```
pdf.getPath().substring(ROOT_DIR.getPath().length() + 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T20:47:04.510

你也可以这样：

```
for(File pdf : PDF_FILES)
{
        System.out.println(pdf.getParentFile().getName()
                             + System.getProperty("file.separator")
                             + pdf.getName());
} 
```

# android - Why does my song restart when I change from vertical to horizontal view?

> ID：12012831
> 
> 赞同：2
> 
> 时间：2012-08-17T20:35:47.457
> 
> 标签：android, android-layout, media-player, android-mediaplayer, android-lifecycle

The songs I have are all MediaPlayers, and when I change from horizontal to vertical orientation, or vice versa, the song stops, and then begins playing from the start of the song. I suspect that when i change the layout to horizontal or to vertical that the onPause() method is called or something. What can I do to prevent the song from restarting, and to just keep playing normally when I change from vertical to horizontal and vice versa? Would this have anything to do with the fact that I implemented these methods?

```
@Override
protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
    music.get(SongPlaying).stop();
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    music.get(SongPlaying)).stop();

}

@Override
protected void onStop() {
    // TODO Auto-generated method stub
    super.onStop();
    music.get(SongPlaying)).stop();

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T21:57:15.933

Another way if you don't want to handle the orientation yourself. Save the mediaplayer current position in onSaveInstantState();

```
 @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putInt("currPos", music.get(SongPlaying)).getCurrentPosition());
    } 
```

then have a variable that holds the current position and in onCreate

```
public void onCreate(Bundle state){
         if( state != null ){
             playerCurrentPosition = state.getInt("currPos"));
         }
        //Then when you play your media use seekTo(playerCurrentPosition);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T20:40:09.143

When you switch orientations, the current activity is destroyed and created again for layout purposes. You can prevent this a few different ways, but throw android:configChanges="orientation" In your activity section of your Manifest file. It should prevent the orientation from restarting the activity

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T19:22:51.343

The Activity reloads when you change the orientation.Hence you can lock your orientation to prevent the activity from reloading.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T20:42:40.377

Screen orientation change effectively means your current activity is restarted. Log your onCreate and onDestroy, youll see. I find this one of the rare but very unpleasant surprises with android development, youll have to save the current status of your activity and restore them manually.

# javascript - 如何使用媒体查询和 jquery 将垂直选项卡式内容面板更改为响应式可折叠？

> ID：12012833
> 
> 赞同：1
> 
> 时间：2012-08-17T20:35:51.013
> 
> 标签：javascript, jquery, css, responsive-design, media-queries

我正在尝试构建一个内容导航模式，该模式使用垂直堆叠的选项卡来切换选项卡旁边隐藏内容面板的显示。在较小的宽度下，这种模式会中断。

这是我的小提琴：http: [//jsfiddle.net/jrotton/xCeX8/1/](http://jsfiddle.net/jrotton/xCeX8/1/)

它有点响应......但假设我有 12 个选项卡，它们的标签长度​​范围从“护理”到“建筑、设计和施工”。当屏幕低于 500px 左右时，这会中断。

我可以：

```
.contextNav { width: 100%; }
ul.checklist-select li { display:inline-block; } 
```

..它可以工作，但当您有多个标签时它并不理想。我宁愿隐藏选项卡菜单并将面板更改为带有可点击 h2 的可折叠面板。该模式可通过屏幕阅读器访问也很重要，但我还没有做到这一点。

关于我如何做到这一点的任何想法？提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T06:39:13.283

[http://www.zurb.com/playground/off-canvas-layouts](http://www.zurb.com/playground/off-canvas-layouts)

这里有一些想法......

另外，我想说的是，您目前所拥有的，在移动版本上将该菜单浮动到右侧是行不通的。在移动设备尺寸下，那些导航项目应该是 100% 宽度，并且导航应该在内容之上，或者应该是另一个“滑动面板”。

Jquery mobile 还内置了一些非常有用、非常常见的设计模式：

[http://jquerymobile.com/](http://jquerymobile.com/)

# php - PHP如果是windows上的chrome

> ID：12012836
> 
> 赞同：-1
> 
> 时间：2012-08-17T20:36:41.543
> 
> 标签：php, windows, google-chrome, user-agent, browser-detection

我正在做一些 PHP 包括取决于浏览器，并且需要在 Windows 上定位 Chrome

我有这个针对所有 IE 浏览器 (MSIE) 有什么方法我也可以针对 Windows 的 Chrome 吗？

```
if (isset($_SERVER['HTTP_USER_AGENT']) && 
(strpos($_SERVER['HTTP_USER_AGENT'], 'MSIE') !== false))
    return true; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T20:44:03.033

If possible, your best bet would be to configure [browsecap](http://www.php.net/manual/en/misc.configuration.php#ini.browscap) in `php.ini` and use the [`get_browser()`](http://php.net/manual/en/function.get-browser.php) function to determine the user agent and platform.

I just checked Chrome's user agent on a Windows PC and you can probably match against this:

```
function isChrome($user_agent) {
    return stripos($user_agent, 'chrome') !== false &&
           stripos($user_agent, 'win') !== false);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T20:43:31.123

Try [get_browser()](http://php.net/manual/en/function.get-browser.php)

```
<?php
$browser = get_browser(null, true);
print_r($browser);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T20:52:13.743

尝试：

```
if (strpos($_SERVER['HTTP_USER_AGENT'], 'Chrome') !== false &&    
(preg_match('/windows|win32/i', $_SERVER['HTTP_USER_AGENT'])))
{
// Windows and Chrome 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T20:43:59.970

Your code is just looking to see if the user agent string contains "MSIE". You can do the same check for "Chrome", since that's going to be present in the chrome user agent string.

see: [http://www.useragentstring.com/pages/Chrome/](http://www.useragentstring.com/pages/Chrome/)

# bash - printf 输出从一行转换为参数数量

> ID：12012840
> 
> 赞同：2
> 
> 时间：2012-08-17T20:37:12.060
> 
> 标签：bash, printf

这是我的代码的一部分：

```
FCWWN=`fcinfo hba 端口 | grep HBA | awk '{打印 $4}'`

对于我在 ${FCWWN}
做
    FCREMOTE=`fcinfo 远程端口-p ${i} | grep 远程 | 瑙克'{打印 $4}'`
    PRODUCT=`/usr/sbin/luxadm 显示 ${FCREMOTE} | grep 产品 | nawk -F: '{打印 $2}'`
    CAPACITY=`/usr/sbin/luxadm 显示 ${FCREMOTE} | grep 容量 | nawk -F: '{打印 $2}'`
    LUNNAME=`/usr/sbin/luxadm 显示 ${FCREMOTE} | grep /dev/rdsk | grep -i -v 设备`
    FCSTATE=`fcinfo hba 端口 ${i} | grep 状态：| 瑙克'{打印 $2}'`
    回声“”
    echo -e FC 端口 WWN "\033[1m \E[36;40m ${i} \033[0m 是 \033[1m \E[37;42m ${FCSTATE} \033[0m”; 回声 -ne "\E[0m"
    printf "############################################### ##################################\n"
    printf "%-6s %9s %18s \n" "LUN:" "存储" "磁盘"
    printf "%-6s %9s %18s \n" " " "类型" "大小"
    printf "=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=- =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-\n"
    printf "%-6s\n %9s\n %2s\n" "${LUNNAME}" "${PRODUCT}" "${CAPACITY}"
完毕
```

输出是：

```
FC端口WWN 10000000c9822976在线
################################################# ################################
LUN：存储磁盘
            类型 尺寸
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=- =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
  /dev/rdsk/c4t60060E80102A8AF005119C37000000C2d0s2
  /dev/rdsk/c4t60060E80102A8AF005119C37000000C0d0s2
  /dev/rdsk/c4t60060E80102A8AF005119C370000016Cd0s2
  /dev/rdsk/c4t60060E80102A8AF005119C3700000028d0s2
  /dev/rdsk/c4t60060E80102A8AF005119C37000000E1d0s2
                DF600F
                DF600F
                DF600F
                DF600F
                DF600F
        131072.000 兆字节
        131072.000 兆字节
        65536.000 兆字节
        262144.000 兆字节
        65536.000 兆字节
```

所需的输出是：

```
FC端口WWN 10000000c9822976在线
################################################# ################################
LUN：存储磁盘
            类型 尺寸
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=- =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
  /dev/rdsk/c4t60060E80102A8AF005119C37000000C2d0s2 DF600F 131072.000 MB
  /dev/rdsk/c4t60060E80102A8AF005119C37000000C0d0s2 DF600F 131072.000 MB
  /dev/rdsk/c4t60060E80102A8AF005119C370000016Cd0s2 DF600F 65536.000 MB
  /dev/rdsk/c4t60060E80102A8AF005119C3700000028d0s2 DF600F 262144.000 MB
  /dev/rdsk/c4t60060E80102A8AF005119C37000000E1d0s2 DF600F 65536.000 MB
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T22:23:07.703

一种快速的方法是将三个多行字符串转换为数组：

```
# bash 4 or later
mapfile -t LUN_ARR <<< "$LUNNAME"
mapfile -t PROD_ARR <<< "$PRODUCT"
mapfile -t CAP_ARR <<< "$CAPACITY"

# bash 3
IFS=$'\n' read -d '' -a LUN_ARR <<< "$LUNNAME"
IFS=$'\n' read -d '' -a PROD_ARR <<< "$PRODUCT"
IFS=$'\n' read -d '' -a CAP_ARR <<< "$CAPACITY" 
```

然后使用 C 风格的循环简单地遍历数组

```
for (( idx=0; idx < ${#LUN_ARR[@]}; idx++ )); do
    printf "%-40s %9s %s\n" "${LUN_ARR[idx]}" "${PROD_ARR[idx]}" "${CAP_ARR[idx]}"
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T21:38:19.553

你很亲密。我没有资源可以测试，但我真的认为这会解决你的问题。

不是

```
 printf "%-6s\n %9s\n %2s\n" "${LUNNAME}" "${PRODUCT}" "${CAPACITY}" 
```

但

```
 printf "%-6s %9s %2s\n" "${LUNNAME}" "${PRODUCT}" "${CAPACITY}" 
```

额外的 '\n' 总是会换行，对吗？

你也可以把它写成一个 awk 脚本。

或者至少通过重写脚本的前面部分来减少您开始的进程数量，例如

```
PRODUCT=`/usr/sbin/luxadm display ${FCREMOTE} | nawk -F: '/Product/{print $2}'` 
```

而且，当您使用 nawk 时，这对我来说就是 solaris。也许您正在编写 /bin/sh （bourne shell 脚本），但如果没有，反引号自 1995 年以来已被弃用（至少）。使用现代命令替换，如

```
PRODUCT=$(/usr/sbin/luxadm display ${FCREMOTE} | nawk -F: '/Product/{print $2}') 
```

IHTH

# iis - 更改 site.master 时是否需要重新启动 IIS

> ID：12012847
> 
> 赞同：1
> 
> 时间：2012-08-17T20:37:45.627
> 
> 标签：iis, master-pages, sitefinity-5

最近，我们将服务器从测试转移到了生产。

我们在缓存一些引用脚本时遇到了问题，因此我们需要编辑 site.master 并将一些人工查询参数放在我们引用的脚本上。

从我认为您不需要重新启动 IIS 只需修改 .master 页面，但前几天我尝试上传少数 .master 页面，因为我们删除了其中的一些代码，并且站点停止运行，直到我们重新启动 IIS。

对 IIS 和 MASTER 页面工作方式的任何见解都将是一流的。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:43:20.190

一般来说，您不一定需要重新启动您的网站来更改您的母版页。但是，如果您修改代码隐藏，则需要编译站点，因为 Sitefinity 是 Web 应用程序项目，而不是网站项目。这意味着整个站点被编译为 DLL，因此代码中的任何更改都需要运行新的编译并将其推送到您的站点。

此外，Sitefinity 使用缓存来提高性能，因此您可能需要重新启动站点以清除缓存以清除对母版页或用户控制 (ascx) 文件等内容的任何更改。

我希望这是有帮助的！

# php - PHP中的正则表达式问题

> ID：12012851
> 
> 赞同：0
> 
> 时间：2012-08-17T20:38:17.987
> 
> 标签：php, regex

我有一些代码可以提取一堆数据并将结果存储到一个变量中。当我尝试对其运行 reg 表达式时，它无法找到匹配项。但是，如果我通过执行 echo 语句将变量转储到屏幕，然后将屏幕中的所有数据复制到一个变量中并在新变量上运行正则表达式，那么它能够找到 80 多个匹配项。

这是我目前正在使用的代码：

```
 require 'HPVC.php';

  $hp = new HPVC('10.14.3.23', '123', '');
  echo "<br>Attempting connection";

  $hp->connect();
  echo "<br>connection succeeded";
  $data = $hp->showPSAll();
  echo "<br>closing connection...";
  $hp->close();
  echo "<br>connection closed.";

  print_r($data);
  $pattern = '/(\w+)(\s*)(\w+\/\w+|\s+)(\s*)(\|)(\s*)(\w+)(\s*)(\w+)(\s*)(\w+|\s+)(\s*)(\w+)(\s*)(\w+)(\s*)(\w+)(\s*)(\d)/i';
  echo '<br>Number of matches: '.preg_match_all($pattern, $data, $matches, PREG_PATTERN_ORDER); 
```

这是 print_r 给出的部分内容：（它真的很长！）

```
 connection closed. [24;1H [24;16H [24;1H [?25h [24;16H [24;16Hshow inter [24;16H [?25h [24;26H [24;26Hfaces brie [24;26H [?25h [24;36H [24;36Hf [24;36H [?25h [24;37H [24;0H E [24;1H [24;37H [24;1H [2K [24;1H [?25h [24;1H [1;24r [24;1H Status and Counters - Port Status | Intrusion MDI Flow Bcast Port Type | Alert Enabled Status Mode Mode Ctrl Limit ------ --------- + --------- ------- ------ ---------- ---- ---- ----- A1 100/1000T | No Yes Down 1000FDx Auto off 0 A2 100/1000T | No Yes Down 1000FDx Auto off 0 A3 100/1000T | No Yes Down 1000FDx Auto off 0 A4 100/1000T | No Yes Down 1000FDx Auto off 0 A5 100/1000T | No Yes Down 1000FDx Auto off 0 A6 100/1000T | No Yes Down 1000FDx Auto off 0 A7 100/1000T | No Yes Down 1000FDx Auto off 0 A8 100/1000T | No Yes Down 1000FDx Auto off 0 A9 100/1000T | No Yes Down 1000FDx Auto off 0 A10 100/1000T | No Yes Down 1000FDx Auto off 0 A11 100/1000T | No Yes Down 1000FDx Auto off 0 A12 100/1000T | No Yes Down 1000FDx Auto off 0 A13 100/1000T | No Yes Down 1000FDx Auto off 0 A14 100/1000T | No Yes Down 1000FDx Auto off 0 A15 100/1000T | No Yes Down 1000FDx Auto off 0 A16 100/1000T | No Yes Down 1000FDx Auto off 0 A17 100/1000T | No Yes Down 1000FDx Auto off 0 [24;1H [2K [24;1H [1;24r [24;1H A18 100/1000T | No Yes Down 1000FDx Auto off 0 A19 100/1000T | No Yes Down 1000FDx Auto off 0 A20 100/1000T | No Yes Down 1000FDx Auto off 0 A21 100/1000T | No Yes Down 1000FDx Auto off 0 A22 100/1000T | No Yes Down 1000FDx Auto off 0 A23 100/1000T | No Yes Down 1000FDx Auto off 0 A24 100/1000T | No Yes Down 1000FDx Auto off 0 B1 100/1000T | No Yes Down 1000FDx Auto off 0 B2 100/1000T | No Yes Down 1000FDx Auto off 0 B3 100/1000T | No Yes Down 1000FDx Auto off 0 B4 100/1000T | No Yes Down 1000FDx Auto off 0 B5 100/1000T | No Yes Down 1000FDx Auto off 0 B6 100/1000T | No Yes 
```

有人可以帮忙解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T20:47:07.657

检查您的原始数据。您可能正在复制的内容与 $data 中的内容略有不同。这方面的一个例子可能是非空白字符显示为空白，然后被复制为空白。您可能必须使用二进制写入将 $data 转储到文件中，然后使用十六进制编辑器查看字符。

过去我自己也遇到过类似的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T20:48:36.360

将最后一行替换为：

```
echo '<br>Number of matches: '.preg_match_all($pattern, print_r($data, true), $matches, PREG_PATTERN_ORDER); 
```

（`print_r`being的第二个参数`true`返回输出而不是将其打印到屏幕上。）

如果这解决了您的问题，那么，正如其他人所评论的那样，您的问题`$data`不是字符串，而是数组或`toString`在您`print_r`编辑时得到的对象。

# c++ - 指向同一对象的不同基类型的指针和唯一指针

> ID：12012853
> 
> 赞同：1
> 
> 时间：2012-08-17T20:38:27.920
> 
> 标签：c++, pointers, polymorphism

我有一个`Reticule`像这样定义的抽象类：

```
class Reticule : public Drawable, public Object {
    //some irrelevant methods to the question
}; 
```

它用于绘制目标标线，即如果我想要一个具有圆形或锥形 AoE 标线的法术，我将从上述类派生，例如：

```
class Circle : public Reticule {
public:
    Circle(float radius);

    //etc
}; 
```

我有另一个`World`具有 2 个方法的类，一个用于注册可绘制的东西，另一个用于注册对象。

```
class World {
public:
    void registerDrawable(Drawable* drawable);
    void registerObject(Object* object);

    //other irrelevant methods

private:
    std::list<Drawable*> drawables_;
    std::list<Object*> objects_;
}; 
```

这些函数添加指向相关容器的指针。这允许世界中的对象相互交互。

在我的咒语中，我正在像这样创建标线：

```
reticule_ = std::unique_ptr<Recitule>(new Circle(3.0f)); 
```

我的问题是，我打算如何将标线注册到我的`World`班级。它可以做到这一点：

```
world.registerDrawable(&(*reticule_));
world.registerObject(&(*reticule_))); 
```

但这对我来说似乎不正确，因为我将其定义`reticule_`为唯一指针，现在我还有 2 个指向它的指针，它们只是不是类型`Reticule*`

我不应该使用`unique_ptr`吗？我是否将所有内容都更改为，`shared_ptr`但是在向世界添加简单对象时这没有意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T20:40:38.033

`unique_ptr`如果您希望他们都“拥有”它，则不能使用。在那种情况下`shared_ptr`是合适的。

或者，您可以注册原始指针。但是，您需要确保在对象被销毁之前取消注册该对象。这会产生其他问题，因为在析构函数中抛出是一件坏事。

不过，在简单对象上使用`shared_ptr`很好，除非分析器告诉您这是一个问题，否则这是我的建议。

# android - Twitter update_with_media Via Scribe OAuth On Android

> ID：12012863
> 
> 赞同：0
> 
> 时间：2012-08-17T20:39:13.067
> 
> 标签：android, twitter, oauth, scribe

I'm currently using Scribe to both authenticate and post non-media messages to Twitter successfully. This was very easy, my first test message posted with no issues. However, I can't seem to post photos at all. I have reviewed Twitter's instructions for posting with media, both [here](https://dev.twitter.com/docs/api/1/post/statuses/update_with_media) and [here](https://dev.twitter.com/discussions/1059).

All of the Scribe/Twitter examples at Github are for non-media posts. It would be great if someone could provide a solid example of how to post photos to Twitter via Scribe!

I'm have two issues in particular:

1) My posts will not pass authorization. I've tried mimicking the examples I posted above, but nothing seems to work.

2) When converting the image from byte[] to a string, I only seem to get 4113 characters before it stops. From my understanding, this is well under the number of characters a String can hold.

Here is how I'm extracting the photo:

```
// GET PHOTO FILE AND FILE LENGTH
// INSTANTIATE UPLOAD VARIABLE WITH FILE LENGTH

    File file      = new File(photo); // ("photo" is a string path to the photo file)
    int fileLength = (int) file.length();

    uploadFile = new byte[fileLength];

// CREATE BUFFER INPUT STREAM OF FILE

    BufferedInputStream inputStream;

    try {inputStream = new BufferedInputStream(new FileInputStream(file));}
    catch (FileNotFoundException e)
    {
        inputStream = null;
        Toast.makeText(this.getApplicationContext(), "Buffer input stream error!", Toast.LENGTH_LONG).show();
    }

// READ DATA FROM FILE INTO UPLOAD VARIABLE
// CLOSE INPUT STREAM

    try {inputStream.read(uploadFile);}
    catch (IOException e) {Toast.makeText(this.getApplicationContext(), "Read input stream to upload variable error!", Toast.LENGTH_LONG).show();}

    try {inputStream.close();}
    catch (IOException e) {Toast.makeText(this.getApplicationContext(), "Close input stream error!", Toast.LENGTH_LONG).show();} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T01:10:14.763

After a LOT of research and piece milling code from various places I finally figured out what I was doing wrong. Here is an example of how to post photos to Twitter via Scribe OAuth:

NOTE: This assumes a few things...

1) You have already saved the photo and have the file path

2) You have already authenticated the user at some point and have a valid access Token

3) You MUST add apache-mime4j-0.6.jar & httpmime-4.0.1.jar to you libs folder and include them in your build path!!!

I really hope this helps someone! It's very easy to implement, but took a few days of troubleshooting to get it working correctly!

```
// BUILD OAUTH SERVICE

    OAuthService oAuth = new ServiceBuilder()
        .provider(TwitterApi.class)
        .apiKey(YOUR_TWITTER_API_KEY)        // REPLACE WITH YOUR OWN!!!
        .apiSecret(YOUR_TWITTER_API_SECRET)  // REPLACE WITH YOUR OWN!!!
        .callback(YOUR_CALLBACK)             // REPLACE WITH YOUR OWN!!!
        .build();

// BUILD OAUTH REQUEST & SIGN IT RIGHT AWAY (OTHERWISE MULTIPART FORM MAY PREVENT SIGNING)

    OAuthRequest request = new OAuthRequest(Verb.POST, "https://upload.twitter.com/1.1/statuses/update_with_media.json");
    oAuth.signRequest(USER_ACCESS_TOKEN, request);  // ENTER USER'S ACCESS TOKEN

// ADD MULTIPART FORM

    try
    {
        MultipartEntity entity = new MultipartEntity();

        entity.addPart("status", new StringBody(message));       // THIS IS THE TWITTER MESSAGE
        entity.addPart("media", new FileBody(new File(photo)));  // THIS IS THE PHOTO TO UPLOAD

        ByteArrayOutputStream out = new ByteArrayOutputStream();
        entity.writeTo(out);

        request.addPayload(out.toByteArray());
        request.addHeader(entity.getContentType().getName(), entity.getContentType().getValue());
    }
    catch (UnsupportedEncodingException e) {e.printStackTrace();}
    catch (IOException e) {e.printStackTrace();}

// SEND REQUEST

    try {response = new JSONObject (request.send().getBody());}
    catch (JSONException e) {Log.e("YOUR_APP_TAG", "JSONException Thrown: " + e.getMessage());} 
```

# c++ - std::string 和 std::list 的 boost::unordered_map 中的线程安全，同时对列表进行更改

> ID：12012866
> 
> 赞同：2
> 
> 时间：2012-08-17T20:39:19.767
> 
> 标签：c++, boost, thread-safety, unordered-map, boost-unordered

我`boost::unordered_map<const std::string, std::list<TypeA> >`在性能关键的多线程环境中使用。我知道写入 STL 容器不是线程安全的，对于`boost::unordered_map`.

```
boost::unordered_map<const std::string, std::list<TypeA> > myMap;
// Added some elements to myMap 
```

现在，如果我想将 A 类型的元素添加或删除到列表中，是否有必要锁定整个映射，而不是锁定正在修改的列表，以便其他线程可以读/写其余的键值对？

```
// Assuming there are pair with the keys "Apple" and "Orange" in myMap
      A a, b;
      myMap["Orange"].push_back(a) //Add an element to the list
      myMap["Apple"].remove(b); //Remove an element 
```

如果列表被另一个 STL 容器替换怎么办？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:46:59.090

由于您只修改包含的对象，而不是 [unordered_]map 本身，因此您只需锁定该包含的对象。如果您将 更改`list`为另一个序列（例如，双端队列或向量），则应该保持不变 - 更改包含对象的类型不会改变您只是修改该包含对象，而不是包含它的映射的事实.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T20:50:27.587

您不必在此处执行任何锁定。如果保证密钥已经存在，那么访问它们是一个不需要锁定的非变异操作（只要没有其他人在变异）。每个列表都是独立的——只要没有其他人同时访问`myMap["Apple"]`，你就是黄金。当然，您可以简单地使用更适合该任务的东西，例如无锁列表，它可以从多个线程安全地变异，或者`concurrent_unordered_map`您可以在 TBB 或 PPL 中找到的 .

# ios - 在 iOS 上，当某些维度信息不可用时，我们如何在 viewDidLoad 中的屏幕上绘制东西？

> ID：12012869
> 
> 赞同：1
> 
> 时间：2012-08-17T20:39:44.213
> 
> 标签：ios, uiviewcontroller, uikit

在应用程序启动时，我直接在 a 上绘制东西`CGBitmapContext`，将其转换为`CGImage`，然后将其设置为`viewDidAppear`.

它实际上相当快，但由于 Apple 需要向应用程序添加 Launch 图像，所以我添加了一个静态图像，显示屏幕的样子作为 Launch 图像。

然而，接下来发生的事情是，当应用程序启动时，启动图像出现，但屏幕会在 0.5 到 1 秒后黑屏，我认为是由于`viewDidLoad`启动并`viewDidAppear`开始运行，但在开始时，屏幕是全部空白。

然后在 0.5 秒后，一切都显示出来，但这会产生白屏“闪烁”。

所以看起来至少有两个选择，它们是

1.  只是让启动图像完全空白，但我不确定Apple是否会拒绝该应用程序，因为他们想要“应用程序最初外观的静态图像”......但我想知道初始图像是否显示得这么快（0.5 到 1 秒，他们还会介意吗？）

2.  另一种选择是将所有绘图从`viewDidAppear`移至`viewDidLoad`，但我发现其中缺少某些信息`viewDidLoad`，例如`self.view.bounds`在`viewDidLoad`is 中`{{0, 0}, {768, 1004}}`，并且更改为正确`{{0, 0}, {320, 460}}`的 in `viewDidAppear`（正在iPhone 4S上进行测试）。

所以我认为某些视图信息尚未正确设置`viewDidLoad`，这是一个两难的选择。一种方法可能是检查它是 iPad 还是 iPhone，并对`self.view.bounds`值进行硬编码，但有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T20:49:14.627

在 viewWillAppear 期间启动的后台线程上创建 CGImage，然后您将获得尺寸。

也许将 viewDidLoad 中的视图背景设置为与您的启动图像相同，以便在您绘制 CGImage 时，用户不会看到闪烁。

# .net - 如何从 Visual Studio 2008 访问 Iwebbrowser2.scripterrorssuppressed

> ID：12012873
> 
> 赞同：0
> 
> 时间：2012-08-17T20:39:52.793
> 
> 标签：.net, visual-c++, iwebbrowser2

我有 Visual Studio 2008，它带有定义 iWebBrowser2 的程序文件/microsoft sdks/windows/v6.0a/include/ExDisp.h。头文件缺少 .NET 2+ 上记录的许多属性和方法，特别是缺少 scripterrorssuppressed。已经安装了 .NET 4.5，但对它的去向感到迷惑。我有程序文件（64 位）和程序文件（x86）（32 位），但是通过它们查找新的“sdk”并没有帮助。重新安装 .NET 4.5 只是说“我已经安装了”，并且没有关于安装位置的信息。

那么，是否可以在运行 Visual Studio 2008（又名 Visual Studio 9.x）时将我正在使用的 iWebBrowser2 升级到更新的版本？

谁能指出我安装的 .NET 4.x SDK？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T05:10:29.197

无法升级 IE 的 API 以找到更多成员。[COM 接口是不可变的](http://msdn.microsoft.com/en-us/library/ms809984.aspx)。

您的问题是您希望 IE ActiveX 具有与 .Net 的包装类相同的属性和方法，该包装类不仅提供来自 ActiveX 本身的功能，而且还提供专门为 Windows 窗体中的 webbrowser ActiveX 控件设计的[ActiveX 容器的功能。](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowsersitebase.aspx)

没有像 IWebBrowser2::ScriptErrorsSuppressed 这样的东西 - 抑制脚本错误的本机方法是[修改您的 ActiveX 容器，以便它以不显示 UI 的方式处理 OLECMDID_SHOWSCRIPTERROR 命令。](http://support.microsoft.com/kb/261003)

# javascript - 在不离开 textarea 的情况下禁用和重新启用用户输入

> ID：12012875
> 
> 赞同：0
> 
> 时间：2012-08-17T20:40:08.223
> 
> 标签：javascript, jquery, html

我一直在从事一个小型个人项目，该项目要求我能够通过键盘命令启用和禁用文本区域中的文本输入。它的功能类似于 Vi/Vim 处理插入和命令模式的方式。

我似乎无法找到一种优雅的方式来执行这项任务。将 textarea 设置为禁用意味着用户不能再在文本中移动光标插入符号。将 keydown 事件设置为`return false`可用于禁用该字段，但显然无法重新启用它，因为它会在达到任何其他逻辑之前立即返回 false。

如果在 之前有任何逻辑，`return false`则 textarea 接受字符输入。我尝试了一个版本，它可以接受这个输入，如果它没有设置为插入模式，它会立即恢复它，但这感觉很笨拙，并且导致的问题比它的价值要多（而且它不是真正的即时......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:48:06.830

我做了一个小提琴，只是一个简单的演示，按 d 禁用该字段，按 e 启用它。启用时可以输入其他字符。 [http://jsfiddle.net/gKDDh/1/](http://jsfiddle.net/gKDDh/1/)

试试这个，设置一个隐藏字段，其中包含与 textarea 相同的文本。现在永远不会真正禁用 textarea，只是可能会更改背景颜色或文本颜色，以便用户可以区分禁用和未禁用。然后像这样设置你的逻辑。

```
onkeydown {
  if (state == disabled and hidden field value <> textarea value) {
    copy value from hidden field to textarea
  }
  else if (state == enabled) {
    copy value from textarea to hidden field
  } 
```

基本上我们正在做的是不断跟踪值应该是什么，并且只允许在启用状态时进行更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T20:55:02.697

我不熟悉 Vi/Vim，但我认为你正在尝试实现这样的目标：http: [//jsfiddle.net/FSjTa/](http://jsfiddle.net/FSjTa/)

```
$('#text').keydown(function() {
    if ($(this).hasClass('command-mode')) {
        return false;            
    }
});
$('#btn-toggle').click(function() {
    $text = $('#text');
    if ($text.hasClass('input-mode')) {
        $text.removeClass('input-mode');
        $text.addClass('command-mode');
        $(this).html('command mode');
    } else {
        $text.removeClass('command-mode');
        $text.addClass('input-mode');
        $(this).html('input mode');
    }
}); 
```

我认为代码应该自我解释。如果没有，请随时询问！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T20:55:13.377

使用 JQuery：

```
var txt = $("#txt");
txt.on("keyup",function(e){
  //Hit shift to disable
  if (e.keyCode === 16){
    $(this).attr("disabled","disabled");
  } 
}); 

$("body").on("keyup",function(e){
  //Hit enter to enable
  if (e.keyCode === 13){
    txt.removeAttr("disabled","");
  } 
}); 
```

这是一个演示：

[http://jsfiddle.net/JMyTY/1/](http://jsfiddle.net/JMyTY/1/)

# javascript - 将 HTML 内容分解为轮播项目

> ID：12012877
> 
> 赞同：0
> 
> 时间：2012-08-17T20:40:12.647
> 
> 标签：javascript, css, sencha-touch, sencha-touch-2

我想获取一些任意 HTML 并将其显示在轮播中，一次显示一个页面。例如，查看文章在 NY Times iPad 应用程序中的布局方式。我已经使用`-webkit-column-width`CSS 属性实现了列布局，如果我添加空的轮播项目，它会按预期工作：

[http://www.senchafiddle.com/#ea1RR](http://www.senchafiddle.com/#ea1RR)

但是，我需要根据列数以编程方式计算出要添加多少虚拟轮播项目。据我所知，没有办法找到文本的宽度，因为额外的列溢出并且不影响元素的大小。对此问题的任何帮助，或关于我可以实现相同功能的其他方式的想法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:07:58.513

我认为这个解决方案可以适应您的需求：[http ://www.webdeveloper.com/forum/showthread.php?t=196319](http://www.webdeveloper.com/forum/showthread.php?t=196319)

如果您有问题，请启动一个 senchafiddle，以便我可以检查您的代码

# ruby-on-rails - 在 activescaffold 更新后 Rails 3 链接断开

> ID：12012878
> 
> 赞同：1
> 
> 时间：2012-08-17T20:40:14.233
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activescaffold, broken-links

我刚刚更新了我的 rails 应用程序上的活动脚手架，现在网站上的所有链接都已损坏。如果我将鼠标悬停在 Firefox 中的链接上，我可以看到`http://localhost:3000/correct_link`；但是，当我单击链接时，我最终在`http://localhost:3000/current_link#__1_`. 加载链接后，所有样式/ javascript 都搞砸了。此外，每次我点击另一个链接时，两个下划线后面的数字都会增加，但我永远无法离开`http://localhost:3000/current_link__NUM_`.

有趣的是，如果我在浏览器中输入我想要的 url，一切都很好。我的日志或服务器控制台中似乎没有任何错误。

我不知道如何去调试这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T00:10:30.570

啊哈！该错误是由我删除 active_scaffold 引起的，它引入了一些来自已挂钩的自定义 javascript 的奇怪行为。移除活动脚手架后，javascript 开始劫持链接。改组 javascript 修复了错误

# django - Django-CMS show_placeholder 未按预期工作

> ID：12012879
> 
> 赞同：0
> 
> 时间：2012-08-17T20:40:15.803
> 
> 标签：django, django-cms

我正在一个页脚内容在所有页面之间共享的网站上工作。在 Django-CMS 中最好的方法是什么？

我尝试使用 show_placeholder 标签，但不知何故不起作用。关于我所做的更多细节：

首先，我在 base.html 中有一个 {% placeholder footer_info %}。然后我在 django admin 中添加一个名为“Home”的页面（模板 homepage.html），并将一些文本作为文本插件放在 footer_info 下。正如这个问题中公认的答案所建议的（http://stackoverflow.com/questions/3616745/how-to-render-django-cms-plugin-in-every-page），

我加

```
{% placeholder footer_info or %}
{% show_placeholder footer_info "Home" %}
{% endplaceholder %} 
```

在一个名为 services.html 的模板中，我将其用作页面服务的模板。但是，主页中的内容未显示在服务页面中。我还尝试在 Advanced 选项区域的主页中添加一个 id home_cms_page，这样我就可以在 services.html 中像这样引用它：

```
{% placeholder footer_info or %}
{% show_placeholder footer_info "home_cms_page" %}
{% endplaceholder %} 
```

但是内容仍然没有显示出来。

谁能告诉我我做错了什么？这是从所有其他页面的页面获取一些内容的最佳方式（我必须在每个其他页面中添加 show_placeholder）？

谢谢

* * *

**编辑：**

它不是一个多语言网站。我注释掉了，`'cms.middleware.multilingual.MultilingualURLMiddleware',`因为我在网站上使用的唯一语言是英语。

我的 base.html 中有这个：

```
{% load cms_tags sekizai_tags %}

<!-- all the rest of the HTML markups -->

<div class="span4">

{% placeholder footer_info %}

</div> 
```

然后我在管理员中添加了一个名为“主页”的页面，其中包含一个文本插件和一个 ID 为“home_cms_page”。

以下在我的 services.html 中：

```
{% extends "base.html" %}
{% load cms_tags %}

{% block base_content %}
    {% placeholder services_info %}
{% endblock base_content %}

{% block page_content %}
<a href="{% page_url "home_cms_page" %}">Home page</a>
{% endblock page_content %}

{% placeholder "footer_info" or %}
{% show_placeholder "footer_info" "home_cms_page" %}
{% endplaceholder %} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T11:30:04.640

阅读文档：

> 如果您知道所指的确切页面，最好在模板中使用 reverse_id（用于唯一命名页面的字符串）而不是硬编码的数字 ID。例如，您可能有一个帮助页面，您希望链接到该页面或在所有页面上显示其中的一部分。为此，您首先要在管理界面中打开帮助页面，然后在表单的“高级”选项卡下输入一个 ID（例如帮助）。然后你可以使用带有适当模板标签的 reverse_id： {% show_placeholder "right-column" "help" %}

我在索引页面的高级选项中添加了“索引”，并`{% show_placeholder "banner" "index" %}`在基础模板中添加。这一切都有效。

# jquery - 如何使用 JQuery 删除父元素的子元素的所有事件处理程序

> ID：12012882
> 
> 赞同：13
> 
> 时间：2012-08-17T20:40:27.463
> 
> 标签：jquery

给定一个特定的父节点，例如动态创建的模态 div。在向其中添加一堆动态 html 然后将这些元素绑定到单击、鼠标悬停等事件之后，有没有办法取消绑定与模态 div 的子元素关联的所有事件。在我的具体示例中，一旦模态 div 被隐藏，它就会从 dom 中完全删除，然后在每次需要时从头开始重新创建。

我正在寻找一种不必跟踪所有特定绑定的方法，而只需使用一个调用来表示：获取任何具有绑定的子元素并“关闭”它们。

注意：我可以验证从 dom 中删除元素然后重新创建它不会终止绑定，因为打开和关闭模态 div 会导致绑定事件被触发的次数与创建 div 的次数相同。我`$(document).on('click', '#abc',function(e) {});`用来绑定元素。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-17T20:43:27.640

如果您曾经附加事件，则可以使用[unbind() 。](http://api.jquery.com/unbind/)`bind()`

```
 $('#foo').children().unbind();
  $('#foo').children('.class').unbind(); //You can give selector for limiting clildren 
```

或者

如果您曾经绑定事件，请使用[off() 。](http://api.jquery.com/off/)`on()`

```
 $('#foo').children().off();
 $('#foo').children('class').off();   //You can give selector for limiting clildren 
```

要从所有后代而不是直接子代中删除事件，您可以使用[Descendant Selector (“ancestor descendant”)](https://api.jquery.com/descendant-selector/)。

```
$('#foo *').off(); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-17T20:42:26.147

是的 -`off()`不带参数使用 - 这将取消绑定所有事件。

```
$('#parent *').off(); 
```

如果您的意思是字面上的孩子，即不是孩子或后代，请`#parent > *`改用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-02-12T15:28:13.610

我还想知道是否需要手动取消绑定已删除元素的每个子项。

从 jquery 文档中你不应该：

[用于删除的 jquery 文档](http://api.jquery.com/remove/)

> 如果我们在里面有任意数量的嵌套元素，它们也会被删除。其他 jQuery 构造（例如数据或事件处理程序）也会被删除。

因为我很好奇这是不是真的，所以我检查了源代码：

```
function remove( elem, selector, keepData ) {
    var node,
        nodes = selector ? jQuery.filter( selector, elem ) : elem,
        i = 0;

    for ( ; ( node = nodes[ i ] ) != null; i++ ) {
        if ( !keepData && node.nodeType === 1 ) {
            jQuery.cleanData( getAll( node ) );
        }

        if ( node.parentNode ) {
            if ( keepData && jQuery.contains( node.ownerDocument, node ) ) {
                setGlobalEval( getAll( node, "script" ) );
            }
            node.parentNode.removeChild( node );
        }
    }

    return elem;
} 
```

如你看到的：

```
jQuery.cleanData( getAll( node ) ); 
```

正在清除已移除元素的所有子元素的所有事件。

所以最后：如果你使用`$(element).remove()`or `.empty()`，你已经是内存泄漏安全的了！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-06T06:04:58.430

在某些情况下，您不想将事件直接绑定到元素。相反，您希望将其绑定到父元素，例如“body”。当您想要全局定义事件侦听器但该元素可能尚不存在时，这是必不可少的：

```
$("body").on("mouseenter", ".hover-item", function() {
    // do the thing
} 
```

这里的问题是，如果您尝试在“.hover-item”上运行 .off() 它将不起作用。或者，如果您尝试在“body”上使用 .off()，按照接受的答案中的建议使用 .children()，它也不会做任何事情。

而不是使用 .off()，我相信最好的做法是将你的事件绑定到一个特定的类名，当你想禁用这些事件时，删除类名：

```
$(".the-element").removeClass(".hover-item"); 
```

现在该特定元素将不再启用事件侦听器。但是，由于您从技术上在“body”上定义了事件侦听器，如果您需要稍后再次启用悬停效果，您可以使用 addClass(".hover-item") 一切都会正常工作。

现在，这仅适用于您为多个项目设置一个动画的情况。悬停事件就是一个很好的例子。例如，您可以将相同的事件应用于所有按钮，而不是将不同的悬停事件应用于不同的按钮。但是，如果您只想禁用某个特定按钮的悬停事件，那么这是可行的方法。

# jquery - JQuery幻灯片悬停菜单卡在鼠标悬停上

> ID：12012883
> 
> 赞同：-1
> 
> 时间：2012-08-17T20:40:36.630
> 
> 标签：jquery, menu, mouseover, hoverintent

转到：[http ://www.radiofriendly.freehosting.com/menu/menu2.html](http://www.radiofriendly.freehosting.com/menu/menu2.html)

重现问题的步骤：

1) 将鼠标放在青色背景右侧的“Insight Quick Links”链接上。

2) 一旦蓝色菜单滑出，将鼠标移动到该区域。

3) 现在快速将鼠标移动到“合同详情”链接。

请注意，蓝色菜单仍处于打开状态。它应该已经关闭了。有人可以在这里告诉我我需要在js中修改什么来修复这个错误吗？请尽可能具体。我是 Jquery 的新手。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T21:00:58.347

我会说问题是你的 div 下拉列表中的结构。将下拉列表中的 ul/li 更改为

或其他东西，你不会看到问题。:D 抱歉，这不是您正在寻找的，但它会解决问题

```
<div id="navigation_vert">
  <ul>
    <li>
      <a href="#" class="navlink">Insight Quick Links</a>
      <div class="dropdown" id="dropdown_two">            
        <p>                       
          Some Text Stuff WITHOUT "<ul>" or "<li>"
        </p>
      </div><!-- .dropdown_menu --> 
    </li>
  </ul>
</div> 
```

PS 我会在底部查看您的注册，那里的列表似乎有一个很好的项目符号列表，您可以建模，或者甚至将列表包装在 div 中将解决所有问题

```
 <li>
                  <a href="#" class="navlink">Insight Quick Links</a>
                  <div class="dropdown" id="dropdown_two" style="background: blue">            
                    <p>
                      <a href="">My Quotes (DAF)</a>
                      <a href="">My Opportunities</a>
                      <a href="">My Customer's Assets</a>
                      <a href="">Insight Partner Support</a>
                      <a href="">New Account Request Form</a>                        
                    </p>
                  </div><!-- .dropdown_menu --> 
                </li> 
```

我知道这会改变页面的外观，但它是这样工作的

# python - 尽管有uid，Django post save 信号被调用了两次

> ID：12012887
> 
> 赞同：10
> 
> 时间：2012-08-17T20:41:21.490
> 
> 标签：python, mysql, django, signals

`@receiver`我已经使用装饰器在回调中注册了我的信号

```
@receiver(post_save, sender=User, dispatch_uid='ARandomUniqueString') 
def do_callback(sender, **kwargs): 
```

我已经把`from app.signals import *`代码放进去`__init__.py`，我可以看到它被导入了两次，我认为没有很好的方法来修复它，可能是由于`installed apps`in `settings.py`. 我不明白为什么尽管使用`dispatch_uid`并且`modelInstance.save`只被调用一次，它仍然运行`do_callback`两次。有什么建议么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-17T21:12:45.500

好的，所以我将导入移动到`views.py`（或者`models.py`当它只被导入一次时，它被调用了两次。

问题是`post_save`在创建和保存对象时调用了信号。我不知道为什么，所以我添加了一个现在可以使用的解决方法

```
created = False

    #Workaround to signal being emitted twice on create and save
    if 'created' in kwargs:
        if kwargs['created']:
            created=True

    #If signal is from object creation, return
    if created:
        return 
```

编辑：

`post_save`被调用了两次，因为我使用`.create(...)`了相当于`__init__(...)`and `.save()`。

**结论**

**`dispatch_uid`确实有效，并且进行单一导入仍然是一个好习惯。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T12:56:37.700

我对 post_save 和 post_delete 信号也有同样的问题。尽管设置了 dispatch_uid，但似乎会话对象和 LogEntry 对象也被保存，并创建了多个信号。

对我有用的是：

```
from django.contrib.admin.models import LogEntry
from django.contrib.sessions.models import Session

....

if sender in [LogEntry, Session]:
    return 
else:
    # do your thing here 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-06-01T21:27:52.937

我刚刚遇到了同样的问题。我有一个接收器，它做一些重要的事情，在 Django 中每次新创建模型实例时必须只做一次。所以，我使用了这个`post_save`信号，但是为了创建我正在做的每个新模型实例，它被调用了两次`Profile.objects.create(...)`。这个问题的解决方案是`created`自带的标志`kwargs`。以下是如何使用该标志来确保您的预期操作只执行一次：

```
@receiver(post_save, sender=Profile)
def publish_auction(sender, **kwargs):
    if kwargs['created']:
        kwargs['instance'].send_email_confirmation() 
```

我尝试了[Django docs](https://docs.djangoproject.com/en/1.11/topics/signals/#preventing-duplicate-signals)`dispatch_uid`的建议。它没有用，但我上面粘贴的代码有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T20:57:58.913

> 我已将`from app.signals import *`代码放入`__init__.py`

你不应该在你的`__init__.py`文件中放任何东西。

如果您从 中删除它`__init__.py`，并将其添加到您的底部`models.py`，它应该可以解决您的问题。

您还应该避免“盲目”进口`from foo import *`

# iphone - AVPlayer 仅在模拟器中播放

> ID：12012893
> 
> 赞同：1
> 
> 时间：2012-08-17T20:41:45.087
> 
> 标签：iphone, objective-c, avplayer

我正在使用下载 MP3 文件`NSURLConnection`，并将数据保存到使用`NSFileHandle`. 每当下载一定比例的文件（所有文件大小大致相同）时，我就会开始播放 MP3 文件。

我认为我可以使用`AVPlayer`来执行此操作，但它不适用于设备 - 仅在模拟器中。

我执行以下操作：

```
if (self.player.rate == 0.0f && percentage > kMinimumDownloadPercentage)
{
    NSError *error;
    self.player = [AVPlayer playerWithURL:[[NSURL alloc] initFileURLWithPath:localPath]];
    if (!error)
        [self.player play];
    else
        NSLog(@"%@", error);
} 
```

这适用于模拟器，但不适用于设备。没有给出错误。但是，如果我执行以下操作，它确实有效：

`self.player = [AVPlayer playerWithURL:url];`

`url`MP3 文件的远程 URL在哪里。

有谁知道为什么我不能使用播放本地文件`AVPlayer`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T21:49:50.477

由于文件的保存方式，这原来是一个错误。

`-playerWithURL:`在`AVPlayer`工作中**非常好**。

# jquery-mobile - JQuery Mobile：重点输入文本不尊重 z-index，出现在其他所有内容之上

> ID：12012895
> 
> 赞同：4
> 
> 时间：2012-08-17T20:41:49.407
> 
> 标签：jquery-mobile, cordova, z-index, android

我有一个带有 jQ​​uery Mobile 的 Android Phonegap 应用程序。在 HTC Desire 上，如果一个输入框被聚焦，它总是在前面，不管上面有哪些元素。

![截屏](../Images/888403d3691a964aefea1c15bf93cc3c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-01T05:38:25.623

您是否尝试应用 css 属性 -webkit-transform ： translate3d(0,0,0); 到您的输入字段？

# python - 如何实时运行python程序？

> ID：12012896
> 
> 赞同：1
> 
> 时间：2012-08-17T20:41:53.003
> 
> 标签：python

我的 python 程序基本上是通过加载 URL 来提交表单。有一个似乎每秒都在变化的安全代码，因此您必须实际在网站上才能输入表格。

例如，

```
http://www.locationary.com/prizes/index.jsp?ACTION_TOKEN=index_jsp$JspView$BetAction&inTickets=125000000&inSecureCode=091823021&inCampaignId=3060745 
```

我能想到的唯一解决方案是使用 Selenium 之类的东西……我不知道任何其他模拟 Web 浏览器的方法，但并没有真正让它像 Web 浏览器那样沉重和缓慢……有什么想法吗？或者有没有办法在没有浏览器自动化的情况下做到这一点？

编辑：

对第一个答案的回应：我确实使用 urllib 获得了安全代码......问题是，当我尝试加载我的提交 url 时，它似乎已经改变了......所以我只是在猜测/假设你有实时进行...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:44:52.160

是的，您需要以编程方式获取安全代码，因为它每次都会更改。您可以使用 urllib 手动执行此操作，也可以使用 mechanize 或 Selenium 使事情变得更容易。

# android - LoaderThrottle 魔术

> ID：12012897
> 
> 赞同：0
> 
> 时间：2012-08-17T20:41:57.693
> 
> 标签：android, sqlite, android-contentprovider, android-cursoradapter, android-listfragment

我是安卓新手。我把暑假的空闲时间花在研究它上，以尝试开发一个应用程序。

我需要在列表（ListView）中显示来自数据库表的数据，以便用户操作它。

我找到了 simpleCursorAdapter，但它被指示为已弃用，以避免在 UI 线程中执行查询。使用我的第一张桌子，它会保持小，这可能不是问题，但使用主桌子它会。于是研究了LoaderManager的推荐替换。

我在 ApiDemos SDK Samples 中找到了 LoaderThrottle 示例，试图了解 LoaderManager 机制。ApiDemos/src/com/example/android/apis/app/LoaderThrottle.java

我努力理解这个例子，但我仍然有一些我不明白的地方。

我没有在第 406 行找到 android.R.layout.simple_list_item_1 和 android.R.id.text1 ：

```
 // Create an empty adapter we will use to display the loaded data.
        mAdapter = new SimpleCursorAdapter(getActivity(),
                android.R.layout.simple_list_item_1, null,
                new String[] { MainTable.COLUMN_NAME_DATA },
                new int[] { android.R.id.text1 }, 0);
        setListAdapter(mAdapter); 
```

我也没有在第 377 行找到 android.R.id.content：

```
 // Create the list fragment and add it as our sole content.
    if (fm.findFragmentById(android.R.id.content) == null) {
        ThrottledLoaderListFragment list = new ThrottledLoaderListFragment();
        fm.beginTransaction().add(android.R.id.content, list).commit();
    } 
```

ApiDemos 布局目录中没有 simple_list_item_1.xml。有很多不同布局的 text1，但没有找到它可能是哪一个。找到 3 个“内容”，其中一个位于 ContentBrowserActivity$Content 类型的 content_browser.xml 中...

所以我不明白我期待的 ListView 的链接在哪里。

所以对我来说它仍然是“魔法”，因为我没有看到 ListView 和适配器之间的隐藏链接。

我应该在我的 ListView 中有什么？没有什么？我从数据库中获取的每个数据一个 TextView？

如果有人有一个 LoaderManager 的示例，可以将数据库表与 ListView 链接起来，而不是与所有其他 ApiDemo 融为一体，我会喜欢的！

提前感谢您的提示和回答，弗洛伦特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T06:50:38.727

谢谢您的回答。我现在更好地理解了机制。无需创建特定布局。

所以我认为与应用程序其余部分的链接在 FragmentTabs 活动中，第 54 行：

```
bar.addTab(bar.newTab()
    .setText("Throttle")
    .setTabListener(new TabListener<LoaderThrottle.ThrottledLoaderListFragment>(
            this, "throttle", LoaderThrottle.ThrottledLoaderListFragment.class))); 
```

ApiDemos/src/com/example/android/apis/app/FragmentTabs.java

最好的问候，弗洛伦特

# python - 在多个 Django 站点上单点登录

> ID：12012899
> 
> 赞同：1
> 
> 时间：2012-08-17T20:42:24.963
> 
> 标签：python, django, single-sign-on, django-sites

我正在一个 django 开发中工作，在单个 django 代码库下有**3 个站点**（**siteA、siteB、siteC**），每个站点都有自己的域和自己的数据库。由于单独的数据库，我为每个站点都有单独的用户。

**我的问题是：**是否有可能在这 3 个站点上创建**单点登录？**如果用户在***siteA***和***siteB***中注册但未在***siteC***中注册，在这种情况下，如果用户在***SiteA***中登录，将自动登录到***siteB***（因为它在两者中都注册）但不在***siteC***中。（如 stackexchange.com）

任何建议和帮助表示赞赏！
谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T21:27:24.303

终极解决方案是：OAuth

但是，如果您更喜欢捷径，在将 OAuth 集成到所有这些 Django 站点中时，您可以：

> 站点 A：肯，约翰
> 
> 站点 B：Ken, Joh
> 
> 站点 C：约翰

我们有两个站点，主要站点使用站点 B 的一些资源，但它必须是站点 B 上的用户。但是两个站点不同步用户。因为 OAuth 是一个痛苦的集成，所以我们这样做：

```
1\. Ken login through Site A.
2\. As soon as he hits "login", he's redirected to login to Site B and C through iframe login (submit the auth login requests through HTTPS).

3\. The iframe login will return cookies of the site trying to login
     - site B
     - site C
4\. Since Ken is not a user of Site C, there is no cookies return from Site C.
5\. After two iframe logins, you are back to Site A and at this moment, as authenticated user of Site A, ken has at most two cookies:
    - site A
    - site B 
```

这是一条捷径，但非常不安全。当我说 iframe 登录时，我并不是说您会看到带有登录表单的 iframe。请求通过请求发送出去。

这是不安全的，因为用户必须使用相同的加密密码：/ 并且传递 cookie 很容易受到攻击。

# vb.net - 使用 VB.Net 为 FogBugz 实现 IPluginExtraMenus

> ID：12012901
> 
> 赞同：1
> 
> 时间：2012-08-17T20:42:29.473
> 
> 标签：vb.net, fogbugz

我们正在尝试创建一个 FogBugz 插件并自然地从 Hello World 示例 [Wiki 38] 开始。

我们正在使用 Visual Studio 2005 和 VB.Net。

但是，每当我们将“Implements IPluginExtraMenus”添加到我们的类并实现适当的函数时，Visual Studio 都会报告

> 类“xxxx”必须将函数 ExtrasMenuLinks() 实现
> 为接口 FogCreek.FogBugz.Plugins.InterfacesIPluginExtrasMenu的 UI.CNavMenuLink()

这是一个例子：

```
Public Class DaysRemaining
  Inherits Plugin
  Inherits IPluginPagedisplay
  Inherits IPluginExtrasMenu

  Public Function ExtrasMenuLinks() As UI.CNavMenuLink
    dim vMenu as CNavMenuLink
    vMenu = new CNavMenuLink("", "", "", "")
    Return vMenu
  End Function
End Class 
```

此外，如果我们尝试在函数定义中添加“Implements IPluginExtrasMenu.ExtrasMenuLinks”关键字，Visual Studio 会报告

> 'ExtrasMenuLinks' 无法实现 'ExtrasMenuLinks' 因为接口 FogCreek.FogBugz.Plugins.InterfacesIPluginExtrasMenu
> 上没有匹配函数

我们正在导入所有正确的命名空间等。

任何帮助将不胜感激，例如指出我们出错的地方，为我们指出其他 VB.Net 示例的方向等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T22:12:46.913

看起来 Visual Studio 正在抱怨，因为接口期望 ExtrasMenuLinks 返回 UI.CNavMenuLink 对象的数组，而您的实现只返回一个 UI.CNavMenuLink。

我相信您需要进行的修改以匹配界面是：

```
Public Function ExtrasMenuLinks() As UI.CNavMenuLink() 
```

您还需要修改函数体以返回一个数组。

# excel - MSXML2.XMLHTTP 不工作

> ID：12012905
> 
> 赞同：0
> 
> 时间：2012-08-17T20:42:50.480
> 
> 标签：excel, msxml, shdocvw, vba

我不知道这些对象在幕后发生了什么，但我一直在使用它们并取得了巨大的成功。

```
dim ie As New SHDocVw.InternetExplorer
ie.navigate url
Set oDoc = ie.Document
iT = oDoc.body.innerText 
```

和

```
dim oX As New MSXML2.XMLHTTP
dim oDoc As HTMLDocument
oX.Open "GET", url, False
oX.send
rT = oX.responseText 
```

但是对于一个特定的网页，ie 对象挂起，产生错误，使我的硬盘驱动器颠簸并完全让我感到沮丧。

我喜欢 MSXML2 对象，因为它总是快速且无故障。这个特定网页上的问题是它没有返回正确的信息。似乎它获取了错误的页面，或者它没有获取全部内容。

我的最低要求是获取页面的整个 html——我可以从那里解析。

这是我试图获取的页面示例： [http ://www.nfl.com/gamecenter/2011090800/2011/REG1/saints@packers?icampaign=GC_schedule_rr#menu=highlights&tab=analyze&analyze=playbyplay](http://www.nfl.com/gamecenter/2011090800/2011/REG1/saints@packers?icampaign=GC_schedule_rr#menu=highlights&tab=analyze&analyze=playbyplay)

我的目标是让他们全部获得，回到大约 2001 年，当时他们开始保持逐场比赛的记录。他们正在使用的技术令人不安，即阻止了 msxml2。

有什么建议可以让我朝着正确的方向前进吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T01:38:54.830

这不是最性感的解决方案，但你去：

```
Option Explicit

Sub fantasyFootball_egghead()
Const READYSTATE_COMPLETE = 4
Const tempDir As String = "C:\Windows\Temp\"

Dim URL$, s_outerhtml$ ''These are strings
Dim IE As Object, IE_Element As Object, IE_HTMLCollection As Object
Dim i_file% ''This is an integer
Dim blnSheetFnd As Boolean
Dim ws As Excel.Worksheet

''Enter your address to navigate to here
URL = "http://www.nfl.com/gamecenter/2011090800/2011/REG1/saints@packers?icampaign=GC_schedule_rr#menu=highlights&tab=analyze&analyze=playbyplay"

''Create an Internet Explorer object if it doesn't exist
If IE Is Nothing Then Set IE = CreateObject("InternetExplorer.Application")

''Make the window visible with true, hidden with false
IE.Visible = True
''navigate to the website
IE.Navigate URL

'' use this loop to make wait until the webpage has loaded
Do While IE.Busy Or IE.readyState <> READYSTATE_COMPLETE
  DoEvents
Loop

''The next line helps ensure that the html has been fully loaded
Application.Wait Now() + TimeValue("0:00:02")
s_outerhtml = IE.document.body.OuterHtml
i_file = FreeFile

''This is a modification of some code I found at www.tek-tips.com <--great resource
''the code saves a temporary copy of the webpage to your temp file
Open tempDir & "\tempFile.htm" For Output As #i_file
Print #i_file, s_outerhtml

Close #i_file

''Creating a "Data" sheet if it doesn't exist
For Each ws In ThisWorkbook.Worksheets
  If ws.Name = "Data" Then blnSheetFnd = True: Exit For
Next

If blnSheetFnd = False Then Sheets.Add: ActiveSheet.Name = "Data"

Sheets("Data").Cells.Clear

''Here is your webquery, using the temporary file as its source
''this is untested in 2003, if it errors out, record a macro
''and replace the property that throws the error with your recorded property
With Sheets("Data").QueryTables.Add(Connection:= _
   "URL;" & tempDir & "tempFile.htm" _
   , Destination:=Range("$A$1"))
   .Name = "Data"
   .FieldNames = True
   .RowNumbers = False
   .FillAdjacentFormulas = False
   .PreserveFormatting = True
   .RefreshOnFileOpen = False
   .BackgroundQuery = True
   .RefreshStyle = xlInsertDeleteCells
   .SavePassword = False
   .SaveData = True
   .AdjustColumnWidth = True
   .RefreshPeriod = 0
   .WebSelectionType = xlEntirePage
   .WebFormatting = xlWebFormattingAll
   .WebPreFormattedTextToColumns = True
   .WebConsecutiveDelimitersAsOne = True
   .WebSingleBlockTextImport = False
   .WebDisableDateRecognition = False
   .WebDisableRedirections = False
   .Refresh BackgroundQuery:=False
End With

''delete the temporary file
Kill tempDir & "\tempFile.htm"

IE.Quit
Set IE = Nothing
Set IE_HTMLCollection = Nothing

End Sub 
```

如果你把它放在一个循环中，只要确保你删除了查询表，否则当连接太多时，excel会停止运行。

```
Sub delete_qryTables()
Dim qt As QueryTable
Dim qts As QueryTables

Set qts = ThisWorkbook.Worksheets("Data").QueryTables
For Each qt In qts
    qt.Delete
Next

End Sub 
```

# haskell - Haskell：为什么这段代码会失败？

> ID：12012907
> 
> 赞同：3
> 
> 时间：2012-08-17T20:42:53.120
> 
> 标签：haskell, file-io, monads, lazy-evaluation

当我尝试运行此代码时...

```
module Main where

import qualified Data.Text.Lazy.IO as LTIO
import qualified Data.Text.Lazy as LT
import System.IO (IOMode(..), withFile)

getFirstLine :: FilePath -> IO String
getFirstLine path =
        withFile path ReadMode (\f -> do
                contents <- LTIO.hGetContents f
                return ("-- "++(LT.unpack . head $ LT.lines contents)++" --"))

main::IO()
main = do
        firstLine <- getFirstLine "/tmp/foo.csv"
        print firstLine 
```

我明白了

```
"-- *** Exception: Prelude.head: empty list 
```

...我希望它打印“/tmp/foo.csv”的第一行。你能解释一下为什么吗？最终，我试图弄清楚如何从文件输入中创建一个惰性文本列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T20:56:26.760

正如 Daniel Lyons 在评论中提到的，这是由于 IO 和惰性交互。

想象一下，如果你愿意：

*   `withFile`打开文件，到文件句柄`f`.
*   使用内容的 Thunk`f`返回。
*   `withFile`关闭文件。
*   Thunk 被评估。关闭的文件中没有内容。

[HaskellWiki / 维护懒惰](http://www.haskell.org/haskellwiki/Maintaining_laziness)页面上提到了这个陷阱。

要修复，您可以读取其中的整个文件内容`withFile`（可能通过强制使用`seq`）或懒惰地关闭文件而不是使用`withFile`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T20:56:14.930

我认为是这样的：`withFile`执行函数后关闭文件。`hGetContents`延迟读取内容（延迟 IO），当它需要读取内容时，文件已关闭。

不要使用`withFile`，而是尝试使用`openFile`，而不是关闭它。`hGetContents`读取文件后会将文件置于半关闭状态。或者更好，只需使用直接读取内容`readFile`

# javascript - Locate variable of my prototype

> ID：12012911
> 
> 赞同：0
> 
> 时间：2012-08-17T20:43:12.503
> 
> 标签：javascript

I have an object in Javascript:

```
function MyObject(aField) {
    this.field = aField;
}

MyObject.prototype.aFunction = function() {
    return this.field;
} 
```

Then

```
var anInstance = new MyObject("blah");
var s = anInstance.aFunction(); 
```

this works fine, but if I pass the function to another function:

```
callLater(anInstance.aFunction); 
```

I don't control `callLater` and it's minified, but it seems that it's calling `aFunction` using `call()` or `apply()`. Therefore, `this` points to another object and `field` is undefined.

What's the best practice to avoid this situation I'm facing?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T20:46:18.370

那是因为你失去了`this`Try this 的价值：

```
callLater(function() { anInstance.aFunction() }); 
```

解释，这样想

```
function MyObject(aField) {
    this.field = aField;
}
function MyObject2(aField) {
    this.field = aField;
}
MyObject.prototype.aFunction = someFunct;
MyObject2.prototype.aFunction = someFunct; 
```

现在`someFunct`属于什么？

好吧，尝试这样做`MyObject.prototype.aFunction === MyObject2.prototype.aFunction`会是真的！

您会看到问题因此需要从类中调用它，而不仅仅是通过值引用。

# javascript - jQuery object not draggable when recreated

> ID：12012913
> 
> 赞同：0
> 
> 时间：2012-08-17T20:43:24.980
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-draggable, jquery-ui-droppable

Please visit [http://classrecon.com/invest/mockup.html](http://classrecon.com/invest/mockup.html) for the example of my problem. To recreate the problem:

1.  Drag `PULM` into the "Has these targets..." field and drop.
2.  Delete the tag by hitting the X to the right of the tag.
3.  PROBLEM: Notice that when you try to drag `<delete element's text>` the element won't drag.

How can I make the new tag draggable? And how can I transfer the deleted tag's text to the new tag?

JS:

```
$(function(){
    $(".drag-key").draggable();
    $(".tag-collection").droppable({
        over: function(event, ui){
            $(this).css("background-color","rgba(0,191,255,.3)");
        },
        out: function(event, ui){
            $(this).css("background-color","white");
        },
        drop: function(event, ui){
            $("<div class='key'></div>").text( ui.draggable.text() ).appendTo( this ).append(" <span class='remove'>✘&lt;/span>");
            ui.draggable.remove();
        }
    });

    // I THINK THE PROBLEM IS HERE
    $(document).on('click', 'span.remove', function() {
        $(".key-rep").append("<div class=\"drag-key key\">&lt;removed element's text&gt;</div>");
        $(this).closest('.key').hide();
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T20:54:45.787

您需要 `$(".drag-key").draggable();`在结束时再次运行该行`$(document).on('click', 'span.remove', function() {`

它应该看起来像这样

```
$(document).on('click', 'span.remove', function() {
        $(".key-rep").append("<div class=\"drag-key key\">&lt;removed element's text&gt;</div>");
        $(this).closest('.key').hide();
        $(".drag-key").draggable();
    }); 
```

这是一个带有建议修复的 JSFiddle

[JSFiddle](http://jsfiddle.net/FYeBC/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:52:43.827

当你`.append()`标记一个新的拖动键时，它只是一个......一个全新的元素。它在您创建 selected 时不存在`$(".drag-key")`，并使与该选择器匹配的所有元素都可拖动。它不包含与 JQuery 可拖动相关的事件或类。如果要使新的拖动键可拖动，则必须`.draggable()`像处理原始元素一样使用新创建的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T21:01:32.170

当附加到 key-rep 时，您应该使用`delegate()`方法使 div 可拖动。

# xml - XSLT beginner - not sure how to apply template

> ID：12012918
> 
> 赞同：2
> 
> 时间：2012-08-17T20:43:40.513
> 
> 标签：xml, xslt

If I have the following XML:

```
<items>
  <item>
    <subItem>
      <name>myName</name>
    </subitem>
    <subitem>
      <val>Val1</val>
      <val>Val2</val>
    </subItem>
  </item>
  <item>
     ...more tags here
  </item> 
</items> 
```

The item element repeats a number of times with different values. If I know the value in the val element I want to match, for instance Val1, what do I use for a template to select the name element value myName in the subItem above it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T21:23:01.580

尝试

```
item[subItem/val='value'] 
```

这表示“选择一个包含文本内容为‘值’的子项/val 的项目”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T04:05:55.443

提供的 XML 格式不正确：`<subItem>`开始标记有一个`</subitem>`结束标记，而下一个`<subitem>`开始标记有一个`<subItem>`结束标记。

**请记住，XML 名称区分大小写**！

如果格式错误问题得到修复，并且在更正、格式正确的文档中仅使用小写名称，

**用作匹配模式**：

```
item[subitem/val = 'Val1']/subitem/name 
```

这匹配作为 a 的子元素的任何元素`name`，该子元素是具有至少一个子元素的子元素，该子元素具有至少一个具有字符串 value的子元素。`subitem``item``subitem``val``"Val1"`

**`xsl:template`指令**是**：**

```
<xsl:template match="item[subitem/val = 'Val1']/subitem/name">
  <!-- Any desired processing here -->
</xsl:template> 
```

**请注意**：

此解决方案与`subitem`元素的顺序无关，即使它们被重新排序也能正常工作，例如，`subitem`有一个`name`孩子的就是所有`subitem`孩子中的最后一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T20:53:00.347

我自己不必执行相同的选择。在不了解您为什么这样做的上下文的情况下，我假设您想要所选 XML 元素的前一个兄弟元素。

话虽如此，这篇博文可能会对您有所帮助：[Using XPath's 'preceding-sibling' Axis Correctly](http://www.infopathdev.com/blogs/greg/archive/2005/06/13/Using-XPath_2700_s-_2700_preceding_2D00_sibling_2700_-Axis-Correctly.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T21:50:29.460

所以基本上我认为你真正想要的是：

```
//val[. = 'Val1' and parent::subItem]/parent::subItem/preceding-sibling::subItem[1]/name 
```

它将选择所有`val`子元素`subItem`并具有指定值，在这种情况下`Val1`，然后导航到前一个`subItem`元素的名称。当然，您可以对其进行调整以更好地满足您的需要。

# android - Can I generate coupon codes for the virtual products in my android app/game?

> ID：12012921
> 
> 赞同：0
> 
> 时间：2012-08-17T20:43:50.450
> 
> 标签：android, in-app-purchase, coupon

I have seven virtual products in my game and would like to give one away each day or so to people who visit my website.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:52:21.327

Bob Smith 是正确的，这将起作用，但根据这些应用内购买的价值，您可能会想要更复杂的东西。

如果这些代码没有生成任何内容，即我的代码与您的代码相同，那么任何人都可以将此代码提供出去，它对所有人都有效。要记住的另一个建议是使代码成为某个预定秘密值的哈希值和应用程序的唯一标识符。

例如，如果每个应用程序中都有一个 ID，那么您的代码可能是：

```
md5(userId.toString + mySecret); 
```

因为散列是一种方式，所以没有人可以取回您的秘密并计算他们自己的代码。他们必须通过您的服务提交他们的应用程序代码才能获得特定于他们的代码。

您也可以继续对要素进行分层。您可以为每次购买包含秘密标识符，以便一个算法为每次购买生成唯一代码。

当然，如果只有一个秘密，它也必须被硬编码到应用程序中，这并不完全安全。这对 Bob 的系统和我的系统都是一个问题，如果这个秘密被公开，整个系统就会崩溃。*如果您需要*那种级别的安全性，您可以研究各种不同的加密技术来设计出越来越聪明的系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:46:47.910

是的，你可以这样做，你应该做的是通过电子邮件或其他方式向代码的收件人发送代码，然后在应用程序中有一个人可以输入代码的位置。类似于在视频游戏中输入作弊码。如果他们输入的代码与您设置的有效代码相匹配，您应该授予他们访问虚拟产品的权限。

# apache - Rewriting app URL on tomcat through apache

> ID：12012922
> 
> 赞同：0
> 
> 时间：2012-08-17T20:43:51.390
> 
> 标签：apache, tomcat6, mod-proxy

I'm trying to get apache to route app.example.com to app.example.com/app where the application is running on tomcat. With the code below I keep getting infinite loop errors.

Httpd.conf

```
NameVirtualHost *:80
<VirtualHost *:80>
 ServerName app.example.com
 ServerAlias app.example.com
 <IfModule mod_rewrite.c>
    ProxyPass         /app  http://app.example.com:8080/app/
    ProxyPassReverse  /app  http://app.example.com:8080/app/
    ProxyPreserveHost off

    <Location "/app">
      Order allow,deny
      Allow from all
    </Location>

    RewriteCond %{HTTP_HOST} ^app\.example\.com$ [NC]
    RewriteRule ^(.*)$ http://app.example.com/app/ [L,PT]
    RewriteEngine On
  </IfModule>
</VirtualHost> 
```

Tomcat server.xml snippet

```
<Connector port="8080" protocol="HTTP/1.1" 
           connectionTimeout="20000" 
           redirectPort="8443"
           proxyPort="80" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T22:19:27.260

尝试这个

```
NameVirtualHost *:80
<VirtualHost *:80>
 ServerName app.example.com
 ServerAlias app.example.com
 <IfModule mod_rewrite.c>
    ProxyRequests Off
    ProxyVia Off
    ProxyPreserveHost On

    <Proxy *>
        Order deny,allow
        Allow from all
    </Proxy>

    <Location "/app">
      Order allow,deny
      Allow from all
    </Location>
    ProxyPass / http://app.example.com:8080/app/
  </IfModule>
</VirtualHost> 
```

# html - 在 Orchard CMS 中向页面添加元素

> ID：12012926
> 
> 赞同：2
> 
> 时间：2012-08-17T20:44:44.133
> 
> 标签：html, orchardcms

我正在向我最近从同事那里继承的 Orchard 网站添加一个新页面。该页面的目的是为我们的 Google Chrome 扩展程序提供内联安装。

支持此功能需要在页面的 head 元素中添加一个链接到 Google 网上商店页面，例如

```
<link rel="chrome-webstore-item" href="https://chrome.google.com/webstore/detail/apdfllckaahabafndbhieahigkjlhalf"> 
```

如何将元素添加到页面的头部？我知道我们有一些 Orchard 模块可以做类似的事情，这需要模块吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-01T03:01:30.783

您还可以通过自定义主题将脚本、css 等直接插入到 <head> 元素中。document.cshtml 的默认形状有一个名为 Head 的区域，您可以在其中呈现各种形状。

注意 document.cshtml 中的 @Display(Model.Head) 调用：

```
<head> 
    <meta charset="utf-8" />
    <title>@Html.Title(title, siteName)</title> 
    @Display(Model.Head)
    <script>(function(d){d.className="dyn"+d.className.substring(6,d.className.length);})(document.documentElement);</script> 
</head> 
<body>
@* Layout (template) is in the Body zone @ the default position (nothing, zero, zilch) *@
@Display(Model.Body)
@Display(Model.Tail)
</body>
</html> 
```

这意味着如果您想在元素中添加东西，您可以执行以下操作，例如，从自定义主题中的 layout.cshtml ：

```
@{
    WorkContext.Layout.Head.Add(New.Analytics(), "10");
} 
```

并在您的主题中，在 Views 文件夹中有 Analytics.cshtml：

```
<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-XXXXXXX-X', 'auto');
    ga('send', 'pageview');

</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T10:34:31.067

我不知道有任何模块能够向头部添加任意链接标签，因此您有两种选择：

1.  通过从形状模板注册链接从主题添加它；这意味着您的主题中需要有一个模板，用于构建网站布局。为此，您可以例如覆盖现有模板，例如主题中的 Document.cshtml 并在那里添加注册。有一个[Pretty Good Base Theme](http://gallery.orchardproject.net/List/Themes/Orchard.Theme.Piedone.PrettyGoodBaseTheme)开发者主题专门设计用于通过扩展点来帮助此类场景，因此您不必完全覆盖（并且首先复制粘贴）现有形状以包含您自己的形状。
2.  通过 ResourceManager 从模块中添加它。

广告 1：

```
RegisterLink(new Orchard.UI.Resources.LinkEntry
{
    Rel = "chrome-webstore-item",
    Href = "https://chrome.google.com/webstore/detail/apdfllckaahabafndbhieahigkjlhalf"
}); 
```

广告 2：在您的代码中注入一个 IResourceManager（它应该在需要此链接条目的每个请求上运行；因此可能是一个 IResultFilter）并以与前一点相同的方式使用它。

# perl - 任何 C API 或 Perl 模块来获取系统信息？

> ID：12012929
> 
> 赞同：-2
> 
> 时间：2012-08-17T20:44:58.173
> 
> 标签：perl, sigar

我正在寻找一个 API 或 perl 模块来收集不同风格的 UNIX 和 Windows 版本的系统架构。比如 Unix 版本、硬件、CPU 数量、内存大小等。我使用 SIGAR api 来监控系统资源，但它没有任何可以收集系统信息的库。我正在使用 perl 绑定来调用 SIGAR 库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T20:50:55.183

您要查找的站点是[http://search.cpan.org](http://search.cpan.org)。在那里您可以搜索模块并浏览它们的文档以查看最适合您需求的模块。

# jquery - kartograph.js - 非常简单的地图

> ID：12012930
> 
> 赞同：1
> 
> 时间：2012-08-17T20:44:59.533
> 
> 标签：jquery, kartograph

作为一个初学者，我想得到最基本的例子来工作。所以我从[这里](http://datamaps.cc/admin1/EU/DEU.svg)下载了一张地图查看 了文件，发现第一个也是唯一的 id`'g'`是`'admin1'`。

所以，我开始：

```
<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="map.css" type="text/css" />
    <link rel="stylesheet" href="k.css" type="text/css" />
    <script type="text/javascript" src="/js/script.min.js"></script>
    <script type="text/javascript">
        $script(['/js/jquery.min.js'], 'jquery');
        $script(['/js/raphael-min.js', '/js/kartograph.js', '/js/chroma.min.js'], 'kartograph');
    </script>
</head>

<body>
    <script>
        $script.ready(['jquery','kartograph'], function() {
            $(function() {
                map = $K.map('#map');
                map.loadMap('DEU.svg', function(map) {
                    map.addLayer({ id: "admin1" });
                });
            });
        });
    </script>
    <div id="map"></div>        
</body>
</html> 
```

基本上就是这样 - 它没有显示任何内容。我检查了文件位置，并检查了`$script.ready`函数运行后的所有内容。一切都好 - 但没有结果。我从 kartograph lib 文件夹（在 git 上）中获取了我包含的所有文件 - 并添加了`k.css`一个小的`map.css`

`map.css`看起来像这样：

```
#map {
width: 900px;
height: 900px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-20T21:46:08.200

如果我在 2 年后复活这件事引起了 OP 的失望，我最诚挚的歉意。我只打算帮助其他可能像我一样在这个问题上目瞪口呆的人。

以下`loadMap()`功能对我有用：

```
map.loadMap('DEU.svg', function () {
    map.addLayer("admin1");
}); 
```

所以看起来你不需要说`map.addLayer({ id: "admin1" })`。您可以在图层名称后添加样式或事件处理程序，如下所示

```
map.loadMap('DEU.svg', function () {
    map.addLayer("admin1", {
        styles: {
            stroke: '#aaa',
            fill: '#f6f4f2'
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T21:24:09.843

当我试图重现您的问题时，我发现[Raphaël](http://raphaeljs.com/)可能未加载。如果您从[kartograph.org](http://www.kartograph.org/)复制文件，请尝试更改`/js/raphael-min.js`为[`/js/raphael.min.js`](http://www.kartograph.org/js/raphael.min.js).

# json - Ajax Request in the same domain using jQuery

> ID：12012932
> 
> 赞同：1
> 
> 时间：2012-08-17T20:45:24.400
> 
> 标签：json, jquery, getjson

I have a question where my client is on [http://web-dev.test.com](http://web-dev.test.com) and my MVC Services are on [http://webdev01.test.com](http://webdev01.test.com) . So i am trying to use ajax GET and POST json requests from my client to mvc services but it is giving me cross domain error. Can anyone explain me what the problem is? and how I could resolve this?

Thankyou

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T20:47:53.770

从[**文档**](http://api.jquery.com/jQuery.ajax/)中：

*   由于浏览器安全限制，大多数“Ajax”请求都受[**同源策略**](http://en.wikipedia.org/wiki/Same_origin_policy)的约束；请求无法从不同的域、子域或协议成功检索数据。

*   脚本和 JSONP 请求不受同源策略限制。

如果可能，将其设为 JSONP 请求不会导致您出现这些问题。否则恐怕您将无法成功完成您的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T21:00:14.623

您有两个选项使用[`JSONP`](http://en.wikipedia.org/wiki/JSONP)or[`CORS`](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)

对于 CORS，您为您的服务设置 http 标头，以便您的客户端可以访问它，例如

```
Access-Control-Allow-Origin: http://web-dev.test.com 
```

# android - Lags while playing 2 sounds on the same time in timer

> ID：12012933
> 
> 赞同：5
> 
> 时间：2012-08-17T20:45:27.033
> 
> 标签：android, soundmanager2

I have a small app that basically sets up a **timer** and plays **sets of 2 sounds one after another**.

I've tried 2 timers, because I wanted both sounds to start exactly at the same time each time. I gave the app 500ms for setting both timers before they start

```
 Calendar cal = Calendar.getInstance();
    Date start = new Date(cal.getTime().getTime() + 500);

    timerTask1 = new TimerTask() { //1st timer
      @Override
      public void run() {
          soundManager.playSound(1);
      }
    };
    timer1 = new Timer();
    timer1.schedule(timerTask1, start, 550);

    timerTask2 = new TimerTask() { //2nd timer
      @Override
      public void run() {
          soundManager.playSound(2);
      }
    };
    timer2 = new Timer();
    timer2.schedule(timerTask2, start, 550);
} 
```

soundManager is a **SoundManager** object which is based on [this tutorial](https://stackoverflow.com/questions/3039078/playing-multiple-sounds-using-soundmanager/3763993#3763993). Thew only change I've made was decreasing number of avalible streams from 20 to 2 since I play only 2 sounds at the same time.

Now the problem. **It's not playing at the equal rate** neither on my Motorola RAZR or the emulator. The app slows sometimes, making a longer brake than desired. I can't let that happen. What could be wrong here?

I'm using very short sounds in **OGG** format

EDIT: I've made some research. Used 2 aproaches. I was measuring milisecond distances between sound was fired. Refresh rate was 500 ms.

*   1st aproach was TimerTask - it is a big fail. It started at 300ms, then was constantly growing, and after some time (2 mins) stabilized at 497ms which would be just fine if it started as that.
*   2nd aproach was while loop on AsyncTask - it was giving me outputs from 475 to 500ms which is better than TimerTask but still inaccurate

At the end none of aproach was playing smoothly. There were always lags

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T12:17:04.040

我知道这可能有点太多了，但你可以尝试不同的 SoundPool 实现：

```
public class Sound {
    SoundPool soundPool;
    int soundID;

    public Sound(SoundPool soundPool, int soundID) {
        this.soundPool = soundPool;
        this.soundID = soundID;
    }

    public void play(float volume) {
        soundPool.play(soundID, volume, volume, 0, 0, 1);
    }

    public void dispose() {
        soundPool.unload(soundID);
    }
} 
```

要使用它，您可以执行以下操作：

```
SoundPool soundPool = new SoundPool(20, AudioManager.STREAM_MUSIC, 0);
AssetFileDescriptor assetFileDescriptor = activity.getAssets().openFd(fileName);
int soundID = soundPool.load(assetFileDescriptor, 0);

Sound sound = new Sound(soundPool, soundID); 
```

然后播放：

```
sound.play(volume); 
```

PS如果即使使用此代码问题仍然存在，请发表评论，我会回复您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T10:39:18.787

您在使用 SoundPool 吗？它比 MediaPlayer 更快。将两种声音放在一起的最佳机会是在同一线程上播放它们。

# c++ - 简单的 C++ 程序崩溃

> ID：12012936
> 
> 赞同：0
> 
> 时间：2012-08-17T20:45:51.400
> 
> 标签：c++

出于某种原因，以下程序在打印“我到达这里”之前崩溃。当我注释掉 try-catch 部分时，程序运行并正常退出。

```
#include <iostream>

int error_function () {

    throw 5;

    return 0;
}

int main () {

    double* b = new double[6];

    for (int i = 0; i < 6; i++) {
        b[i] = i;
    }

    double* c = new double(*b);

    for (int i = 0; i < 6; i++) {
        c[i] = i+1;
    }

    for (int i = 0; i < 6; i++) {
        std::cout << b[i] << " " << c[i] << std::endl;
    }

    try {
        error_function();
    }
    catch (int t) {
        std::cout << "catched an int: " << t << std::endl;
    }

    std::cout << "i got here" << std::endl;
    return 0;
} 
```

这是程序崩溃时我得到的全部输出：

```
0 1
1 2
2 3
3 4
4 5
5 6
catched an int: 5
*** glibc detected *** ./main: free(): invalid next size (fast): 0x0000000001f22070 ***
======= Backtrace: =========
/lib/libc.so.6(+0x77806)[0x7f2b273a0806]
/lib/libc.so.6(cfree+0x73)[0x7f2b273a70d3]
./main[0x400d92]
(a bunch of stuff)
Aborted 
```

我不知道为什么会这样。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T20:51:13.313

它崩溃了，因为您在分配 c 时只分配了一个 double ，然后通过访问第一个之后的元素继续超出边界。在这种情况下，似乎在处理异常之后进行了一些清理，并且 glibc 检测到损坏的内存。

问题线如下：

```
double* c = new double(*b);

for (int i = 0; i < 6; i++) {
        c[i] = i+1;
} 
```

它分配一个新的 double 来复制 *b 的值（或者 b[0] 如果你喜欢），因为 b 只是一个指针，所以取消引用它不会调用复制数组的复制构造函数。

您最好使用 std::vector ，因为它会自动为您处理任何内存分配和释放以及异常安全。如果你`error_function`抛出了一个你没有处理的异常，它仍然会正确清理，而你`new`的内存不会像现在这样。

从技术上讲，这是未定义的行为，所以任何事情都可能发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T20:53:43.180

你的问题在这里：

```
double* c = new double(*b); 
```

这是为一个 double 分配空间并给它一个初始值`b[0]`。稍后您将分配给`c[1]`等。这是未定义的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T21:02:30.377

添加到[timans](https://stackoverflow.com/users/583044/tinman)答案。

您的程序正在发生堆溢出。

```
for (int i = 0; i < 6; i++) {
    c[i] = i+1;
} 
```

double c[0] 的地址为 new double 且值为 b[0]。但是 c[1],c[2],.... 它们可能会覆盖与程序相关的任何其他系统信息，然后行为变得不确定.

更改此行，程序应该可以正常工作

```
double* c = new double[6];
for (int i = 0; i < 6; i++) {
    c[i] = b[i]+1;
} 
```

并且不要忘记在从 main 返回之前调用 delete[]。

# asp.net-mvc-3 - ASP.Net MVC3 Controller Authorize 属性问题

> ID：12012940
> 
> 赞同：0
> 
> 时间：2012-08-17T20:46:20.880
> 
> 标签：asp.net-mvc-3

我有一个具有以下操作的家庭控制器：

```
public class HomeController : Controller
{
    [Authorize]
    public ActionResult Index()
    {
        return View();
    }

    public ActionResult Logoff()
    {
        HttpContext.Session.Remove("LogonTicket");
        HttpContext.Session.Remove("PID");
        return View("Index");
    } 
```

现在，当我使用注销操作注销时，我希望索引的授权属性生效，但当我在注销操作中返回索引视图时它不会生效。

我将如何处理？

我正在使用自定义 MembershipProvider，但不确定如何在其中添加注销功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:50:01.953

您应该重定向，而不是直接返回视图：

```
public ActionResult Logoff()
{
    HttpContext.Session.Remove("LogonTicket");
    HttpContext.Session.Remove("PID");
    return RedirectToAction("Index");
} 
```

返回视图直接将视图的标记发送给客户端，并且`Authorize`过滤器根本不会被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T15:49:01.210

在 AccountController 注销操作中完成。它们现在也是基本控制器中的公共“全局变量”。

```
 public ActionResult LogOff()
    {
        FormsAuthentication.SignOut();
        LogonTicket = null;
        ParticipantID = null;
        return RedirectToAction("Index", "Home");
    } 
```

# makefile - makefile 中“all-before”和“all-after”的含义

> ID：12012942
> 
> 赞同：2
> 
> 时间：2012-08-17T20:46:35.833
> 
> 标签：makefile

```
 .PHONY: all all-before all-after clean clean-custom

    all: all-before ../Flock.exe all-after 
```

由于它在 .PHONY 中，它必须是 Makefile 关键字，但我不知道它是什么意思，甚至不知道它的作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T20:51:16.573

它们不是关键字，它们指的是命名的规则，`all-before`因此`all-after`前者在构建可执行文件之前被调用，而后者在之后被调用。.PHONY 中提到了它们，因为它们不是文件名。

不好的例子：

```
all: all-before binary all-after

binary:
  gcc input.c -o binary

all-before:
  -mkdir bin

all-after:
  -cp binary bin 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:49:54.163

我不认为这是一个 makefile 关键字。它可能是在 makefile 中其他地方定义的另一个目标的名称（但如果没有更多文件上下文，我无法确定）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-08T12:52:36.300

它们只是完成定制的预插入目标。查看添加到 makefile 的代码并使用修改后的 makefile.win

## 正在处理生成文件...

*   Makefile 处理器：C:\Program Files (x86)\Dev-Cpp\MinGW32\bin\mingw32-make.exe
*   命令： mingw32-make.exe -f "MakefileMy.win" ----> 在 .PHONY 下面添加行： all-before all-after clean clean-custom

all-before: @echo "所有之前"

all-after: @echo "all-after done"

全部：全部之前 $(BIN) 全部之后

--> Windows 10 机器上来自 DevC 的部分 compile.log 文件：

所有“所有之前”“所有之后”

## 编译结果...

*   错误：0
*   警告：0

# unit-testing - 运行 gwt-test-utils 单元测试时，GWT Timer 立即触发

> ID：12012943
> 
> 赞同：2
> 
> 时间：2012-08-17T20:46:40.330
> 
> 标签：unit-testing, gwt, junit, timer

我使用 gwt-test-utils 框架编写了一个单元测试，如此[处](http://code.google.com/p/gwt-test-utils/wiki/SimpleUnitTest)所述。被测试的类在内部使用一个`com.google.gwt.user.client.Timer`（不是 Java 默认的 Timer）。

但是，只有在经过测试时，Timer 实例才会表现得不正确，因为它会在调度后立即触发。

当我运行这个测试

```
public class TimerTest extends GwtTest {
  @Override
  public String getModuleName() {
    return "com.whatevs";
  }

  @Test
  public void testTimer() {
    final int[] counter = { 0 };

    com.google.gwt.user.client.Timer t = new Timer() {
      @Override
      public void run() {
        Log.info("firing timer");
        counter[0]++; // just increase the counter
      }
    };

    Log.info("scheduling timer");
    t.schedule(1000000); // this should return immediately
    Log.info("scheduling returns");
    assertEquals(0, counter[0]); // the counter shouldn't yet be incremented
  }
} 
```

我失败了

```
testTimer(com.whatevs.TimerTest): expected:<0> but was:<1> 
```

和调试输出

```
22:37:44,075  INFO gwt-log:81 - scheduling timer
22:37:44,075  INFO gwt-log:81 - firing timer
22:37:44,075  INFO gwt-log:81 - scheduling returns 
```

请注意，该测试作为 JUnit 测试运行，而不是先编译为 JavaScript。

我做错了什么，还是我只是遇到了一个错误？有没有其他方法来测试这些类？

**更新**：

我刚刚发现，如果在上面的示例中我调用 scheduleRepeating，或者我使用 run 方法中的 schedule 重新调度计时器，则计时器在将控制权返回给调用者之前恰好触发 5 次。

发生了一些奇怪的事情，我刚刚打开了关于 gwt-test-utils[的错误报告。](http://code.google.com/p/gwt-test-utils/issues/detail?id=157)

# ms-access - 如何将 Access 2007 中的多条记录合并为一条记录？

> ID：12012944
> 
> 赞同：0
> 
> 时间：2012-08-17T20:46:40.360
> 
> 标签：ms-access, ms-access-2007

我搜索了许多讨论，但无法找到解决我的特定问题的方法。我有一个 Access 2007 数据库，其中包含一个多对多关系的 Faculty 表和 Sessions 表。教职员工可以参加多个会议，并且可以担任不同的角色（主持人、主持人、促进者等），具体取决于您查看的会议。我正在尝试创建一个查询，该查询在他们所在的所有会话中的单个记录中列出教员的角色。目前，我为教员所在的每个会话获取一条记录，除非他们的角色在另一个会话中相同。我希望看到他们的角色全面独立于他们所参​​加的会议。

我是那里的一部分。下面是我目前拥有的查询的 SQL 代码。

```
SELECT DISTINCT 
  FacultySessionJoin.FacultyID, 
  Faculty.FirstName, 
  Faculty.LastName, 
  Faculty.Email, 
  FacultySessionJoin.Presenter, 
  FacultySessionJoin.Moderator, 
  FacultySessionJoin.Facilitator
FROM 
  Faculty 
LEFT JOIN 
  FacultySessionJoin ON Faculty.FacultyID = FacultySessionJoin.FacultyID
ORDER BY FacultySessionJoin.FacultyID; 
```

我会发布结果的图像，但该网站不允许我这样做。这是我的问题的一个例子：

```
Faculty ID  FirstName  LastName  Presenter  Moderator  Facilitator
3            Vanessa    Smith      Yes         
3            Vanessa    Smith      Yes        Yes 
```

我如何将查询中的所有此类记录合并到一行中，例如：

```
Faculty ID  FirstName  LastName  Presenter  Moderator  Facilitator
3            Vanessa    Smith      Yes        Yes 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T20:52:45.500

怎么样：

```
SELECT 
   FacultySessionJoin.FacultyID, 
   Faculty.FirstName, Faculty.LastName, 
   Faculty.Email, 
   Max(FacultySessionJoin.Presenter), 
   Max(FacultySessionJoin.Moderator), 
   Max(FacultySessionJoin.Facilitator)
FROM Faculty 
LEFT JOIN FacultySessionJoin 
ON Faculty.FacultyID = FacultySessionJoin.FacultyID
GROUP BY 
   FacultySessionJoin.FacultyID, Faculty.FirstName, 
   Faculty.LastName, Faculty.Email 
```

# core-data - 将视频文件保存到 iCloud

> ID：12012956
> 
> 赞同：1
> 
> 时间：2012-08-17T20:47:18.583
> 
> 标签：core-data, metadata, icloud

我目前正在尝试将视频文件保存到 iCloud。我正在使用 Core Data 为每个视频保存文件名字符串 (filename.MOV)，然后从 ubiquity 容器中检索它们。这一切都在本地工作（文件保存，并且可以从他们的 URL 访问），但我正在努力通过 iCloud 获取视频。核心数据同步，所以我可以访问文件名，但是当我尝试从 URL 获取视频时，我无法。

这是我从 UIImagePicker 获取其 url（下面的 videoURL）并从当前日期创建一个唯一字符串后保存视频的方式：

```
NSString *videoFileName = [stringFromDate stringByAppendingPathExtension:@"MOV"];

NSURL *ubiquityContainer = [[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil];
NSURL *saveToURL = [ubiquityContainer URLByAppendingPathComponent:videoFileName];

BOOL ok;
ok = [[NSFileManager defaultManager] setUbiquitous:YES itemAtURL:videoURL destinationURL:saveToURL error:nil];
if (!ok) NSLog(@"error saving"); 
```

然后我有一个核心数据表视图来列出所有视频。在这里，我观察到核心数据与 iCloud 同步并重新加载的变化（这一切仍然正常）：

```
- (void)viewDidLoad {
    [[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(reloadFetchedResults:)
                                             name:@"SomethingChanged"
                                           object:[[UIApplication sharedApplication] delegate]];

}

- (void)reloadFetchedResults:(NSNotification*)note {
    [self performFetch];
} 
```

此时，我希望 ubiquity 容器更新，这样当我选择一个视频，并转到视图控制器观看它时，可以找到视频文件。（self.video 是我的核心数据视频实体）（资产是视频资产，我可以播放）

```
NSURL *ubiquityContainer = [[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil];
ubiquityContainer = [ubiquityContainer URLByAppendingPathComponent:self.video.url];

AVURLAsset *asset = [AVURLAsset URLAssetWithURL:ubiquityContainer options:[NSDictionary dictionaryWithObject:[NSNumber numberWithBool:YES] forKey:AVURLAssetPreferPreciseDurationAndTimingKey]];

AVAssetTrack *videoTrack = [[asset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0]; 
```

这就是我遇到麻烦的地方。在我拍摄视频的设备上它可以工作，但在另一台设备上，找不到文件（objectAtIndex：0 超出范围）。

这是我在视图中调用的元数据查询确实加载了：

```
NSMetadataQuery * query = [[NSMetadataQuery alloc] init];
NSString * filePattern = [NSString stringWithFormat:@"%@", self.video.url];
[query setPredicate:[NSPredicate predicateWithFormat:@"%K LIKE %@",
                     NSMetadataItemFSNameKey, filePattern]];        
[query startQuery]; 
```

我的元数据查询可能有问题，或者可能有更多问题。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:50:16.903

我假设您在 iOS 上，这意味着在您的第二台设备上尚未下载媒体文件（iOS 在您实际访问它们之前不会下载 iCloud 文件，OS X 会下载所有内容 - 请参阅文档）。

要确保文件在设备上，请使用 startDownloadingUbiquitousItemAtURL:error: 或 coordinateReadingItemAtURL:options:error:byAccessor: 如果您想知道它何时完成（在 Accessor 块中）。无论如何，您都需要调用后者来进行协调读取，因此第一种方法的用处有限。

# jquery - jQuery - 动态添加元素的 on() 问题

> ID：12012959
> 
> 赞同：3
> 
> 时间：2012-08-17T20:47:31.967
> 
> 标签：jquery, json, dynamic, hover, live

我有一个从 json 恢复数据并生成产品列表的页面。当单击将父 ul 更改为 ul.fullview 的按钮时，用户可以在两种不同的样式之间切换。浏览带有 ul.fullview 的产品时，收到 .highlighted 类的产品应该以更大的缩略图显示，而其他产品会收到一个绝对位置以适应布局。这一切都由 CSS 和一个简单的 toggleClass() 完成。问题在于这两个不同视图中的 mouseenter / mouseleave 事件。使用默认视图浏览时，所有产品都应具有相同的动画。当父ul为.fullview时，.highlighted产品必须有不同的动画。由于我使用的是动态添加的元素，因此我不得不使用 .on() 而不是 .hover()。

```
$('div.products ul:not(.fullview) li:not(.highlighted)').hover(
  function () {
    $(this).find($('div.tooltip')).show();
    $(this).find($('div.fb-like')).fadeIn(150);
  }, 
  function () {
    $(this).find($('div.tooltip')).fadeOut(150);
    $(this).find($('div.fb-like')).fadeOut(150);
  }
);

$('li.highlighted').hover(
  function () {
    $(this).find($('div.description')).show();
    $(this).find($('div.fb-like')).fadeIn(150);
  }, 
  function () {
    $(this).find($('div.description')).fadeOut(150);
    $(this).find($('div.fb-like')).fadeOut(150);
  }
); 
```

如果元素不是由 javascript 添加的，上面的代码应该可以工作。我能够使用下面的脚本使默认视图工作：

```
$('div.products ul').on({
    mouseenter: function () {
    $(this).find($('div.tooltip')).show();
    $(this).find($('div.fb-like')).fadeIn(150);
    },
    mouseleave: function () {
    $(this).find($('div.tooltip')).fadeOut(150);
    $(this).find($('div.fb-like')).fadeOut(150);
    }
}, 'li'); 
```

但是当我添加这些行时，它会停止加载 json 数据：

```
$('div.products ul.fullview').on({
    mouseenter: function () {
    $(this).find($('div.description')).show();
    $(this).find($('div.fb-like')).fadeIn(150);
    },

    mouseleave: function () {
    $(this).find($('div.description')).fadeOut(150);
    $(this).find($('div.fb-like')).fadeOut(150);
    }
}, 'li.highlighted'); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T20:57:06.250

你是说：

> 将父 ul 更改为 ul.fullview

我会假设`ul.fullview`在绑定时它是动态的，它只是一个`ul`没有“fullview”类但随后动态更改为拥有该类。

试试这个：

```
$('div.products').on({
    mouseenter: function() {
        $(this).find($('div.description')).show();
        $(this).find($('div.facebook-like')).fadeIn(150);
    },

    mouseleave: function() {
        $(this).find($('div.description')).fadeOut(150);
        $(this).find($('div.fb-like')).fadeOut(150);
    }
}, 'ul.fullview li.highlighted');​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T21:30:35.267

为了您的方便，我将这两个答案结合到了[JSFiddle中。](http://jsfiddle.net/Xv5pF/)括号和选择器根据其他人的答案进行了调整。

# java - 无法从 JConsole 执行 CompositeData 类型的 JMX MXBean 操作

> ID：12012961
> 
> 赞同：0
> 
> 时间：2012-08-17T20:47:53.310
> 
> 标签：java, jmx

我有一个名为 JmxJobLauncher 的自定义 MXBean，它有一个名为 launchExampleJob 的托管操作，带有一个参数，这是一个复杂类型。在 jconsole 中，它将类型显示为 CompositeData，我可以看到它映射回的原始类型（ExampleJobParams），所以一切看起来都很好。问题是执行 launchExampleJob 的按钮是灰色的，它不允许我为参数设置任何 CompositeData 值。jconsole 不支持这个吗？是否有支持此功能的 jmx 控制台？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T21:20:44.880

这超出了 jconsole 的能力。有时，我在我的 MXBeans 中实现“jconsole 便利”方法，这些方法要么接受负载的字符串和基于原始的参数，要么接受一个简单的字符串，然后我将其重新组合回目标类型实例。

就 jconsole 而言，复合类型非常适合显示，但不太适合传入。如果您有兴趣使用一点 jquery，请查看[jolokia](http://www.jolokia.org/)，它是一个基于 REST 的 JMX 接口。

# java - spring webflow 消息可以引用多个来源吗？

> ID：12012962
> 
> 赞同：1
> 
> 时间：2012-08-17T20:47:57.920
> 
> 标签：java, spring, jsp, spring-webflow-2

我有一个代表忘记密码挑战的 webflow 表单。有 3 个问题，为了成功，所有 3 个问题都必须是正确的。但是，为了安全起见，如果 3 个中的任何一个错误，则挑战失败。因此，如果有任何错误，我想将所有错误标记为错误并提供一条消息。我想我可以对所有 3 个错误消息执行此操作，并且不显示消息，然后将第四个作为显示的实际消息。但是有没有更简单的方法？就像是：

```
messageContext.addMessage( MessageBuilder
        .error()
        .source( "answer1" )
        .source( "answer2" )
        .source( "answer3" )
        .code( "you.failed.the.challenge.moron" )
        .defaultText( "uh-uh!" )
        .build() ); 
```

我知道 API 并不完全支持这一点，但也许我错过了一种通过以某种方式直接实现 MessageResolver 的方法？

# mono - Mono 项目中的 RestSharp (MonoDevelop)

> ID：12012963
> 
> 赞同：1
> 
> 时间：2012-08-17T20:48:00.030
> 
> 标签：mono, httpwebrequest, monodevelop, restsharp

我正在做一些 Mono 项目（Mono 2.10.8）并尝试使用 RestSharp。正如我在 RestSharp 页面上看到的，它支持 Mono。

我正在尝试运行以下简单代码：

```
var client = new RestClient("http://www.go2board.com");
var request = new RestRequest();
var result = client.Execute(request); 
```

但是每次当我在 MonoDevelop IDE 中选择 Mono 2.10.8 运行时时，我都会遇到以下错误

```
{System.Net.WebException: The request timed out   at System.Net.HttpWebRequest.EndGetResponse (IAsyncResult asyncResult) [0x00046] in C:\cygwin\tmp\monobuild\build\BUILD\mono-2.10.8\mcs\class\System\System.Net\HttpWebRequest.cs:824    at System.Net.HttpWebRequest.GetResponse () [0x0000e] in C:\cygwin\tmp\monobuild\build\BUILD\mono-2.10.8\mcs\class\System\System.Net\HttpWebRequest.cs:836    at RestSharp.Http.GetRawResponse (System.Net.HttpWebRequest request) [0x00000] in C:\Users\Renato\Desktop\restsharp-RestSharp-8763a56\restsharp-RestSharp-8763a56\RestSharp\Http.Sync.cs:142 } 
```

如果我在 MonoDevelop 中切换到 .NET 运行时，一切正常，并且我得到了预期的结果。

我还下载了 RestSharp 源代码，再次编译 Mono 2.10.8 并再次尝试，但没有成功。

那么，我可以在我的 Mono 应用程序中使用 RestSharp，如果可以，如何使用？我错过了什么吗？一些步骤？

另外，我通过 Mono MOMA 分析器分析了 RestSharp.dll，得到了肯定的结果，这意味着我可以在 Mono 上使用 RestSharp。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:26:29.537

因此，正如 rjovic 所证实的，这可能是**Mono *for Windows***中的一个错误。

确实，Mono 仅推荐用于非 Windows 平台。这是有道理的，特别是因为对于 Windows 平台，您总是拥有 MS.NET ;)

# c# - C#正则表达式删除单引号之间的单引号

> ID：12012966
> 
> 赞同：1
> 
> 时间：2012-08-17T20:48:11.493
> 
> 标签：c#, regex

大家好，我想使用 C# 正则表达式删除单引号**之间的所有单引号，例如**

> '这是一个'示例'文本'

请注意，单词**示例**位于单引号之间。我需要我的字符串看起来像：

> '这是一个示例文本'

谢谢！

**编辑：**

它有一些变化！现在字符串看起来像：

> begin:'这是一个'示例'文本'

请注意，字符串现在以一个单词开头，后跟**:**，然后是第一个单引号**'**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T20:57:35.950

您不需要使用正则表达式（无论如何它不太适合这种情况）。试试这个：

```
string oldString = "'this is an 'example' text'";
string newString = "'" + oldString.Replace("'","") + "'"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T20:56:33.700

根据您的评论：

1.  从字符串中删除所有单引号。
2.  在字符串的开头和结尾添加单引号。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T20:57:30.287

```
string yoursentence = "'this is an 'example' text'";
yoursentence = "'" + yoursentence.Replace("'","")  + "'"; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-17T21:12:53.363

```
using System;
using System.Text.RegularExpressions;

public class Test
{
  public static void Main()
  {
    string str = "begin:'this is an 'example' text'"; 
    str = Regex.Replace(str, "(?<=')(.*?)'(?=.*')", "$1");  
    Console.WriteLine(str);
  }
} 
```

[在此处](http://ideone.com/FfZ95)测试此代码。

# c# - 创建原始 Soap XML 时可以删除默认命名空间吗？

> ID：12012968
> 
> 赞同：1
> 
> 时间：2012-08-17T20:48:30.020
> 
> 标签：c#, xml, wcf, soap, xml-serialization

我正在尝试向 WCF 服务发送一个肥皂请求。我正在使用 System.ServiceModel.Channels.Message.CreateMessage() 方法构建肥皂请求。

我还没有深入到构建身体，但这就是我所拥有的......

```
Message msg = Message.CreateMessage( MessageVersion.Soap11WSAddressing10, "MethodName" );
msg.Headers.MessageId = new UniqueId( Guid.NewGuid().ToString() );
msg.Headers.Add( Message.CreateHeader( "Security", "",
    new Security()
    {
        TimeStamp = new TimeStampType() {
            Created = DateTime.Now,
            Expires = Created.AddDays( 1 )
        },
        UsernameToken = new UsernameToken() {
            Username = "stackoverflow",
            Password = new Password() {
                Type = "hashed",
                Value = "Password"
            }
        }
     } ) ) );

string s = msg.ToString(); 
```

当我运行它时，我得到以下输出。我正在使用 Visual Studio XML Visualizer 顺便说一句。

```
<s:Envelope>
    <s:Header>
        <Action>MethodName</Action>
        <MessageID>GUIDVALUE</MessageID>
        <Security>
            <Timestamp xmlns="http://schemas.datacontract.org/2004/07/ConsoleApplication1">
               .....
    </s:Header>
    <s:Body />
</s:Envelope> 
```

我的问题是，我可以从 xml 中删除 xmlns="http://schemas.datacontract.org/2004/07/ConsoleApplication1" 吗？它显示在 Timestamp 和 UsernameToken 中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T21:06:08.210

在包装您的安全性和时间戳的类中将命名空间设置为空

```
 [DataContract(Namespace = "")] 
```

# window - Access 2010 隐藏访问窗口

> ID：12012978
> 
> 赞同：0
> 
> 时间：2012-08-17T20:49:06.360
> 
> 标签：window, hide, ms-access-2010

我想永久隐藏访问窗口。我有一个自动 exe 宏，它最初会隐藏窗口，但是如果用户在任务栏上单击我的数据库图标，如果出现在我的表单后面，那就太烦人了。我想知道是否有办法让它保持低调，而不必到处复制隐藏窗口宏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T14:39:13.773

以下内容适用于旧版本的访问（来源：[http](http://www.vbaexpress.com/kb/getarticle.php?kb_id=74) ://www.vbaexpress.com/kb/getarticle.php?kb_id=74 ）：

```
Option Compare Database 
Option Explicit 

Global Const SW_HIDE = 0 
Global Const SW_SHOWNORMAL = 1 
Global Const SW_SHOWMINIMIZED = 2 
Global Const SW_SHOWMAXIMIZED = 3 

Private Declare Function apiShowWindow Lib "user32" _ 
Alias "ShowWindow" (ByVal hWnd As Long, _ 
ByVal nCmdShow As Long) As Long 

Function fSetAccessWindow(nCmdShow As Long) 

    Dim loX As Long 
    Dim loForm As Form 
    On Error Resume Next 
    Set loForm = Screen.ActiveForm 

    If Err <> 0 Then 
        loX = apiShowWindow(hWndAccessApp, nCmdShow) 
        Err.Clear 
    End If 

    If nCmdShow = SW_SHOWMINIMIZED And loForm.Modal = True Then 
        MsgBox "Cannot minimize Access with " _ 
        & (loForm.Caption + " ") _ 
        & "form on screen" 
    ElseIf nCmdShow = SW_HIDE And loForm.PopUp <> True Then 
        MsgBox "Cannot hide Access with " _ 
        & (loForm.Caption + " ") _ 
        & "form on screen" 
    Else 
        loX = apiShowWindow(hWndAccessApp, nCmdShow) 
    End If 
    fSetAccessWindow = (loX <> 0) 
End Function 
```

只需调用`fSetAccessWindow(0)`隐藏和`fSetAccessWindow(1)`显示。或者，您可以使用`fSetAccessWindow(2)`and`fSetAccessWindow(3)`来显示最小化/最大化。该应用程序也将从任务栏中隐藏，以防止用户单击它。

如果它不适用于 Access 2010，您也可以试试这个：[http ://www.tek-tips.com/faqs.cfm?fid=2562](http://www.tek-tips.com/faqs.cfm?fid=2562)

# list - 在 BAT 文件中创建文件列表

> ID：12012985
> 
> 赞同：1
> 
> 时间：2012-08-17T20:49:34.200
> 
> 标签：list, variables, batch-file, set

> **可能重复：**
> [批处理文件 - 将文件列表写入变量](https://stackoverflow.com/questions/3238433/batch-file-write-list-of-files-to-variable)

在批处理文件中，我试图创建目录及其子文件夹中所有 PDF 文件的列表，并使用*set*将此信息存储在变量中。

例如，如果*parentDirectory*本身及其子文件夹包含*1.pdf、2.pdf*和*3.pdf ：*

cd *parentDirectory*
set pdfList =
*- 用于填充列表的代码在这里 -*
*现在 pdfList 包含*“1.pdf 2.pdf 3.pdf”

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T21:21:06.960

```
@echo off

setlocal
cd ..

if exist *.pdf(
    for /f "tokens=*" %%a in ('dir /b *.pdf') do call :append %%a
)
echo pdfList: %pdfList%
goto :eof

:append
if defined pdfList (
    set pdfList=%pdfList% %1
) else (
    set pdfList=%1
) 
```

这会将由空格分隔的 PDF 文件名列表添加到`pdfList`变量中。如果您还想在所有子目录中包含 PDF 文件名，则将语句中的`dir`命令更改为：`for`

```
dir /s /b *.pdf 
```

但是使用它会产生副作用，即绝对路径列表将被添加到`pdfList`变量中，而不是您在问题中表达的相对路径。

第一条`if`语句确保我们`dir`仅在存在 PDF 文件时才执行命令。如果它们不存在，我们不想调用 DIR 命令；否则`dir`会打印“找不到文件”错误。

该`:append`子例程是必要的，因为如果我们尝试`pdfList`在语句本身中附加到变量`for`，我们会发现`pdfList`在一次迭代中更新的值不会持续到下一次迭代。

子例程中的`if`语句`:append`是为了确保在 的值中没有前导空格`pdfList`。

# objective-c - Objective C中的数组到字典

> ID：12012986
> 
> 赞同：3
> 
> 时间：2012-08-17T20:49:40.403
> 
> 标签：objective-c, ios, xcode, nsdictionary

我有一个在 NSLog 中输出的数组：

```
log: (
        {
        "case_color" = White;
        "case_description" = "";
        "case_image" = "http://site.com/get/parts/part_images/nzxtphantom410.jpeg";
        "case_name" = "NZXT Phantom 410";
        "case_price" = "99.99";
        "case_type" = ATX;
        id = 1;
    }
) 
```

我怎样才能把它放在一个 NSDictionary 中，所以我可以这样称呼它：

```
NSDictionary *object;
NSString *casename object[@"case_name"]; 
```

并且casename等于“NZXT Phantom 410”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T20:52:22.857

看起来您的数组只有一个元素，即字典。试试这个：

```
NSDictionary *dictionary = [myArray objectAtIndex:0];
NSString *caseName = [dictionary objectForKey:@"case_name"]; 
```