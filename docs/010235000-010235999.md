# StackOverflow 问答 10235000-10235999

# wordpress - 如何在 wordpress 中进行扩展搜索，如 %some%

> ID：10235000
> 
> 赞同：0
> 
> 时间：2012-04-19T19:02:50.933
> 
> 标签：wordpress, search

我需要在我的帖子标题中为单词的一部分做一个搜索，像这样

```
$args = array ( 'category_name' => '%som%');
query_posts( $args ); 
```

所以我得到了这个“东西”和“besomer”

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T21:59:39.890

看起来 wordpress 默认已经这样做了。但是，您可以过滤`posts_where`以更改默认搜索功能。看起来像这样：

```
<?php
add_filter('posts_where', 'my_search_where');

function my_search_where($where) {
    if (is_search()) {
        // change the where string with a preg_replace()
    }
    return $where;
}
?> 
```

# hive - 有没有办法在配置单元脚本中进行多行注释

> ID：10235002
> 
> 赞同：36
> 
> 时间：2012-04-19T19:03:13.880
> 
> 标签：hive

我知道我们可以在 hiveQL（hive.sql 脚本）中使用“--”进行单行注释，但是有没有办法进行多行注释？我需要类似下面的东西

```
/*  This sentence is 
    a comment */ 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-25T01:32:54.267

据我所知，目前 Hive 脚本不支持多行注释。似乎[这个 JIRA](https://issues.apache.org/jira/browse/HIVE-2259)只引入了单行注释，从Hive 0.8中的*--开始*

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-12-10T11:23:56.233

不，截至目前 Hive 仅支持单行注释。

Hive、Pig、Hbase 还没有像 Mangodb、Cassandra 那样实现，但在下一个版本中，特别是 Hadoop 2.x 也可能有多个注释。

只需使用 -- 两个破折号在 hive 中发表评论。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-10-10T20:11:32.907

Hive v2.3.0 中应提供多行（又名“括号”）注释： [https ://issues.apache.org/jira/browse/HIVE-15765](https://issues.apache.org/jira/browse/HIVE-15765)

# javascript - jQuery切换不保持打开状态

> ID：10235005
> 
> 赞同：0
> 
> 时间：2012-04-19T19:03:45.907
> 
> 标签：javascript, jquery, css, click, jquery-animate

试图切换 div 以扩展和收缩，它基本上是一个菜单，带有 subnav。所以我最初将高度设置为 48px 以隐藏子导航，如果没有 JS，它仍然看起来不错，然后我分配一个开关来打开和关闭 div（在这种情况下设置高度）

它不断刷新并自动打开 div。不想保持打开状态，只是扩展，发出警报，然后再次关闭。

```
jQuery(document).ready(function($) { 
$('#nav-wrapper').css('height','48px');
  $('#menu-item-18').click(function() {
    var open = false;
    if(isOpen) {
      $('#nav-wrapper').animate({ height: '-=44' }, 0, function() {}); 
      var isOpen = false;
      alert ('not open')
    } else { 
      $('#nav-wrapper').animate({ height: '+=44' }, 0, function() {}); 
      isOpen = !isOpen; 
      alert ('open') 
    };
  });
}); 
```

这可能过于复杂了。我相信也有一个更简单的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:05:07.327

`isOpen`在本地范围内定义，因此该值将始终为 false。您需要将其移到点击处理程序之外，然后您只需要`isOpen = !isOpen;`切换值。见下文，

```
 $('#nav-wrapper').css('height','48px');
  var isOpen = false;

  $('#menu-item-18').click(function() {
    isOpen = !isOpen; 
    if(isOpen) {
      $('#nav-wrapper').animate({ height: '-=44' }, 0, function() {}); 
      alert ('not open')
    } else { 
      $('#nav-wrapper').animate({ height: '+=44' }, 0, function() {}); 
      alert ('open') 
    };
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T19:08:45.047

这应该有效（*并且也可以处理多个元素*）

```
$('#menu-item-18').click(function() {
    var isOpen = $(this).is('.open');
    if(isOpen) {
        $('#nav-wrapper').animate({ height: '-=44' }, 0); 
        $(this).removeClass('open');
        alert ('not open');
    } else { 
        $('#nav-wrapper').animate({ height: '+=44' }, 0); 
        $(this).addClass('open');
        alert ('open') ;
    };
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T19:09:17.043

好，易于

```
$('#menu-item-18').click(function() {
    $('#nav-wrapper').slideToggle(200, //speed in ms
      function() {
        //callback (runs after shown or hidden)
        $(this).is(':visible'); //Returns true if not hidden false if hidden
      }
    );     
}); 
```

# wordpress - WordPress“阅读更多”以显示类别

> ID：10235007
> 
> 赞同：2
> 
> 时间：2012-04-19T19:03:49.093
> 
> 标签：wordpress, categories

我正在修改一个 WordPress 插件/小部件。它是一个类别帖子插件，我们可以在其中显示特定类别的帖子。我试图让小部件只显示一篇文章（简单），然后在底部添加一个“阅读更多”按钮。但是，我希望“阅读更多”将用户带到相应的类别页面，而不是显示帖子的其余部分（它们是简短的帖子，例如引号）。

到目前为止，我能做的最好的是：

`<p class="read-more-custom-widget"><?php echo '<a href="'.get_the_category().'" title="Read More">Read More &raquo;</a>';?></p>`

但这会显示 Array 而不是类别。谁能帮帮我吗？

提前致谢。

编辑：帖子只有一个类别。抱歉，这很简单（我敢打赌），但我用谷歌搜索了一遍，找不到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:14:57.310

要扩展我的评论，请尝试以下操作：

```
$category = get_the_category(); 
if($category[0]){
    echo '<p class="read-more-custom-widget">';
    echo '<a href="'.get_category_link($category[0]->term_id ).'"title="Read More">Read More &raquo;</a>';
    echo '</p>';
} 
```

改编自[WP 文档](http://codex.wordpress.org/Function_Reference/get_the_category)。

# javascript - JQuery Mobile：如何在查询 Web SQL 时显示消息

> ID：10235010
> 
> 赞同：0
> 
> 时间：2012-04-19T19:04:11.740
> 
> 标签：javascript, jquery-mobile

我在 JQuery Mobile 中阅读了有关消息的所有问题，但找不到我的问题的答案。

我有带有列表的页面，其中每个列表项都会打开一个带有查询结果的新页面。一切正常，但我在查询期间目标页面显示为空白，直到查询完成。我想要的是通知用户正在进行搜索，但我找不到放置该功能的合适位置。

```
// in each li of list_a I have a href to page_b, that resultas in
// <li id="op1"><a href="#page_b" data-transition="slide" class="ui-link-inherit">Option A</a></li>
// <li id="op2"><a href="#page_b" data-transition="slide" class="ui-link-inherit">Option B</a></li>
// <li id="op3"><a href="#page_b" data-transition="slide" class="ui-link-inherit">Option C</a></li>

$('#list_a').on('click', 'li', function () {
    id = this.id;
    do_query(id);
});
function do_query(id) {
    //$.mobile.showPageLoadingMsg(); // doesn't work
    sql = 'SELECT ... ... ';
    db.transaction(
    function (tx) { tx.executeSql(sql,[id], populate_page, errorHandler); });
}
function populate_page(tx, results) {
    $('#list_b').children().remove('li');
    for (var i = 0; i < results.rows.length; i++) {
        var row = results.rows.item(i);
        $('#list_b').append('result data...').listview('refresh');
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T03:05:13.013

经过大量测试，我找到了一个中间解决方案。

我想要的是在第一页或目标页面上的旋转球。此解决方法会在空白屏幕上显示一条消息，但它比没有有关处理信息的空白页面要好。

使用这种方法，列表中的 href 不是必需的。

```
 $('#list_a').on('click', 'li', function () {
        id = this.id;
        do_query(id);
    });
    function do_query(id) {

        // added
        $.mobile.changePage('#pag_b', { transition: 'pop' }); // transition slide fails
        $.mobile.showPageLoadingMsg("e","Searching...",true); // only shows the text
        // the ajax-loader.gif graphic stay static, doesn't spin

        sql = 'SELECT ... ... ';
        db.transaction(
        function (tx) { tx.executeSql(sql,[id], populate_page, errorHandler); });
    }
    function populate_page(tx, results) {
        $('#list_b').children().remove('li');
        for (var i = 0; i < results.rows.length; i++) {
            var row = results.rows.item(i);
            $('#list_b').append('result data...').listview('refresh');
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T19:20:44.620

听起来您应该在 #list_a 单击处理程序中调用 do_query(id) 之前显示您想要的消息。

例如：

```
$('#list_a').on('click', 'li', function () {
    id = this.id;
    showSearching(); //function to handle 'search in progress'
    do_query(id);
});

function showSearching(){
//show message however you'd like
//might use a jqueryui modal or something

} 
```

但是您还需要在成功和失败时处理该消息的隐藏。例如：

```
function populate_page(tx, results) {
    $('#list_b').children().remove('li');
    for (var i = 0; i < results.rows.length; i++) {
        var row = results.rows.item(i);
        $('#list_b').append('result data...').listview('refresh');
    }

    hideSearching(); //call message hide function
}

function errorHandler(){
    hideSearching(); //call message hide function

    //other error handling

}

function hideSearching(){
    //hide the search message

} 
```

希望这可以帮助！

# c - SMP 上的中断是如何处理的？

> ID：10235011
> 
> 赞同：26
> 
> 时间：2012-04-19T19:04:15.550
> 
> 标签：c, linux, x86-64

SMP（对称多处理器/多核）机器上的中断是如何处理的？是否只有一个或多个内存管理单元？

假设运行在不同内核上的两个线程 A 和 B （同时）接触到页表中不存在的内存页，在这种情况下将出现页面错误，并从内存中引入新页。

将发生的事件的顺序是什么？如果有一个内存管理单元，页面错误转发到哪个核心？内核如何处理它？是否有多个内核实例，每个实例都运行在不同的内核上？如果是这样，它们如何在页面错误处理等事件上同步？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-19T19:32:37.133

好吧，这取决于具体的架构，但从我能从英特尔文档中记住的...

有两个主要的中断源：

*   内部：这些是由 CPU 本身生成的。包括故障、陷阱、软件中断等。
*   外部：这些是外围设备产生的硬件中断。

内部中断总是传递给产生它的 CPU。外部的被发送到任意核心。

在现代模型中，中断也可以使用类似总线的系统而不是旧的中断驱动系统来传递，但我忽略了这个模型是否正在任何当前的操作系统中使用。

关于MMU，当然，每个核心都有自己的，但它们通常被操作系统强制相同的段，因此它们可以对称使用。请注意，物理内存和虚拟内存之间的大部分映射实际上都在内存中，并且始终是共享的。

关于您示例中的序列：

*   页面错误被转发到生成它的核心。
*   内核更新其 MMU 表，这些表受共享锁或类似的保护。
*   不，通常只有一个内核，除非您应用虚拟化模型。
*   它们使用共享锁或类似结构进行同步。如果两个内核同时在同一个页面发生故障……实际上这没什么大不了的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-19T19:32:45.833

在多核/多处理器架构上，[APIC](http://en.wikipedia.org/wiki/Advanced_Programmable_Interrupt_Controller)用于将中断路由到内核/处理器。顾名思义，APIC 可以被编程为根据需要进行路由。

关于内核的同步：这取决于内核/操作系统。您可以使用带有锁定的方案（尽管在非缓存一致的架构上可能需要 IPI），或者您也可以使用建议的方法在每个内核上运行内核并使用某种显式的内核间通信。

[Barrelfish](http://barrelfish.org/)是运行多个内核的操作系统的一个示例。如果您对这种架构感兴趣，您可能想阅读论文“[多内核：可扩展多核系统的新操作系统架构](http://barrelfish.org/barrelfish_sosp09.pdf)”

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-19T19:35:30.020

每个处理器都有自己的内存管理单元和翻译后备缓冲区。这是必要的，因为每个内核可能正在执行具有不同地址空间的不同进程。

多个内核可以同时独立处理中断/异常。因此可以在内核中同时执行多个并发中断上下文。

诸如页面错误或被零除之类的异常将始终在发生它的同一处理器上处理，因为它与该处理器正在执行的操作有关。

外部中断通常通过某种交换结构，允许它们以某种方式静态或动态映射到处理器。例如，PC 型硬件上的“APIC”。

如果结构足够复杂，则可以针对不同的内核即时重新编程中断。

这取决于架构。例如，一个简单的架构可以将所有外部中断绑定到一个内核。不过那不是很对称；它不允许 IRQ 负载平衡。

（另请注意，在所有处理器上发生某些外部中断是很有用的。定时器中断就是一个例子。如果每个内核都有自己的中断定时器，那么调度程序中的时间片处理是对称的：没有特殊情况处理对于一个主核心与其他核心。中断发生，核心运行调度程序代码，如果当前任务的时间量已到，它会选择另一个任务在该核心上运行。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T19:34:24.230

每个逻辑 CPU（即 CPU 内核）都有自己的`cr3`寄存器，用于处理指向分页结构的指针。两种页面错误都可能发生：

*   在同一进程的线程中
*   在不同进程的线程中

如果这些是不同进程的线程，那没问题。我不知道 Linux 对此的具体实现是什么（是的，我知道它被标记为“linux”），但是在 SMP 环境中管理虚拟内存有两种通用算法：

*   每个核心都拥有自己的空闲物理页面列表，并在分配了自己列表中的所有页面时请求更多
*   所有内核都使用相同的空闲页面列表，受某种锁保护（通常在这种情况下自旋锁就足够了），这当然是较慢的解决方案

相同的代码（#PF 处理程序）可以在两个不同的内核上同时执行，这不是问题。如果线程使用两个不同的 VASes ¹，那么它们的页面错误只是对称地处理。如果页面错误发生在单个VAS内，仍然没有问题，直到#PFs是由访问同一页面引起的。在这种情况下，VAS 中的每个页面都应该受到自旋锁的保护（或者仅给定 VAS 中的 #PF 可以受到单个锁的保护——这种方式减少了内存开销，但消除了同时运行两个 #PF 处理程序的可能性）。

根据[this answer](https://stackoverflow.com/a/9929969/809387)，仅在NUMA系统中，每个CPU内核都有自己的MMU；在其他系统中，每个物理处理器都有自己的 MMU，以及 TLB 来处理由不同`cr3`寄存器值引用的不同分页结构。

* * *

[1\. VAS = 虚拟地址空间]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T19:34:45.877

我没有得到“内核的多个实例”，通常是内核规则全部。这意味着它没有实例，而是应该将内核视为一个全局反应系统，它为应用程序提供服务。

据我所知，内存处理是一个单元（虽然每个内核都有自己的中断向量），页面是使用 锁定的`page_table_lock`，所以页面检索只执行一次，按照锁定的顺序。

** 编辑：看到其他评论后，我的回答可能已经过时了：无论如何你应该检查：[http ://www.xml.com/ldd/chapter/book/ch13.html](http://www.xml.com/ldd/chapter/book/ch13.html)

# java - 使用 MongoDB 计算距离

> ID：10235017
> 
> 赞同：1
> 
> 时间：2012-04-19T19:04:38.760
> 
> 标签：java, jakarta-ee, mongodb

我正在尝试使用 MongoDB 在 Java 中查找两个位置 P(x,y) 和 Q(a,b) 之间的距离。

我正在通过我的应用程序中的纬度和经度 x，y，我得到 a，b 作为最近的点，现在我只看这两个点之间的距离。我在某处读过 geoNear 支持这个，但我没有找到 geoNear 的 Java 代码，我只有可以在 MongoDB 命令提示符下运行的 commond。

请让我知道如何使用 MongoDB 在 Java 中进行距离计算。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:32:13.867

另一位用户刚刚问了一个关于如何将 geoNear 命令与 Java 驱动程序一起使用的类似问题。希望答案也能解决您的问题。
[使用 MongoDB 在 Java 中计算距离](https://stackoverflow.com/questions/10224364/calculate-distance-in-java-using-mongodb)

# python - Django Admin：按相关外键的值排序

> ID：10235020
> 
> 赞同：7
> 
> 时间：2012-04-19T19:05:03.380
> 
> 标签：python, django, django-admin

我正在尝试按对象相关外键集中的特定值对 Django 管理列表页面进行排序。

具体来说，在下面的代码中，我希望 ContentAdmin 视图显示按“Twitter Score”（名称为“Twitter”的 Score 对象）排序的所有内容对象的列表。

在 django 应用程序中，我有以下模型：

```
class Content(models.Model):
    body = models.CharField(max_length=564)
    title = models.CharField(max_length=64) 

class Score(models.Model):
    name = models.CharField(max_length=64)
    score = models.IntegerField()
    content = models.ForeignKey('Content') 
```

在 admin.py 我有以下内容：

```
class ContentAdmin(admin.ModelAdmin):
    list_display = ('title', 'show_twitter_score',)

    def show_twitter_score(self, obj):
        twitter_score = obj.score_set.get(name='Twitter')
        return 'Twitter: ' + str(twitter_score.score) 
```

目标：ContentAdmin 的管理面板显示按“Twitter”分数排序的内容对象

谢谢大家！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T21:02:20.747

我通过扩展类的`get_queryset`方法解决了这个问题`ContentAdmin`。之后，只需获取正确的 ORM 查询即可

```
def get_queryset(self, request):
    qs = super(ContentAdmin, self).get_queryset(request)
    return qs.filter(score__name='Twitter').order_by('-score__score') 
```

对于 Django 1.5 及更早版本，该方法是`queryset`.

```
def queryset(self, request):
    qs = super(ContentAdmin, self).queryset(request)
    return qs.filter(score__name='Twitter').order_by('-score__score') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T19:33:45.287

如果我理解正确，您可以从Django 文档中的[ModelAdmin.list_display](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_display)尝试此操作：

> 通常，`list_display`不是实际数据库字段的元素不能用于排序（因为 Django 在数据库级别进行所有排序）。
> 
> 但是，如果一个元素`list_display`表示某个数据库字段，则可以通过设置该项的`admin_order_field`属性来表明这一事实。
> 
> 例如：
> 
> ```
> class Person(models.Model):
>     first_name = models.CharField(max_length=50)
>     color_code = models.CharField(max_length=6)
> 
>     def colored_first_name(self):
>         return '<span style="color: #%s;">%s</span>' % (self.color_code, self.first_name)
>     colored_first_name.allow_tags = True
>     colored_first_name.admin_order_field = 'first_name'
> 
> class PersonAdmin(admin.ModelAdmin):
>     list_display = ('first_name', 'colored_first_name') 
> ```
> 
> 上面将告诉 Django 在管理员中尝试按 colour_first_name 排序时按 first_name 字段排序。

您可以在代码中尝试此解决方法进行排序。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-19T19:53:00.920

由于 django admin 使用 db 进行排序，因此您无法对列表中显示的功能进行排序。

您可以做的是将要显示的列添加到 django 管理员用来列出您的模型的查询集中，这样您就可以进行排序。

要添加您需要的列，您必须使用 queryset extra 方法。

这应该可以解决问题:)

```
Content.objects.all().extra(select={'twitter_score': 'SELECT score from content_score WHERE content_score.id = content_content.id'}) 
```

奖金回合：

Content.objects.all().extra(select={'twitter_score': 'SELECT 'Twitter score:' || score from content_score WHERE content_score.id = content_content.id'})

# ruby-on-rails - 如何从 travis-ci 在 Heroku 上部署 Rails 应用程序？

> ID：10235026
> 
> 赞同：18
> 
> 时间：2012-04-19T19:05:18.607
> 
> 标签：ruby-on-rails, heroku, continuous-integration, travis-ci

在 travis-ci 成功构建后，有什么方法可以部署 heroku rails 应用程序？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-09T15:12:32.967

Travis CI 现在内置了对部署到 Heroku 的支持：http: [//about.travis-ci.org/blog/2013-07-09-introducing-continuous-deployment-to-heroku/](http://about.travis-ci.org/blog/2013-07-09-introducing-continuous-deployment-to-heroku/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-11T22:33:41.420

我刚刚用我的一个应用程序实现了这个案例。这实际上并不难做到，但它需要一些步骤：

1.  你需要[你的 heroku API 密钥](https://dashboard.heroku.com/account)
2.  请参阅[此要点以获取示例`.travis.yml`并获取`travis_deployer.rb`脚本](https://gist.github.com/cd5557fea4bf175b6813)
3.  然后安装 travis gem，查看[另一个关于如何保护 API 密钥的问题的答案](https://stackoverflow.com/a/12778315/549755)。
    *   如果您不关心它，只需使用上面 gist 中的示例。
    *   跑`travis encrypt your_username/your_repo HEROKU_API_KEY=<your key here>`
    *   将结果复制到`.travis.yml`env -> global 部分

该`travis_deployer.rb`文件负责 Heroku 的 ssh 密钥和远程分支。

如果您已经执行了所有这些步骤，您`.travis.yml`可能看起来像这样：

```
env:
  global:
    - secure: "1u21hjnmHjkghduUIJhhs76saljlkajdlfhGhgdJgfaVtgasfLLmNBnb87dad="

after_success:
  - gem install heroku
  - yes | ruby travis_deployer.rb
  - heroku keys:clear
  - yes | heroku keys:add
  - git push heroku master 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-15T06:43:15.370

这是我在[Mark Ba​​tes 的博客](http://metabates.com/2012/10/23/deploying-to-heroku-from-travisci/)上找到的版本。它与 Odi 的类似，只是它仅依赖`after_script`于您的`.travis.yml`文件中的 。

1.  首先，使用 Travis 的特性来[**加密环境变量**](http://about.travis-ci.org/docs/user/build-configuration/#Secure-environment-variables)，这样你的 API 密钥就会受到保护：

    ```
    gem install travis
    travis encrypt username/repository HEROKU_API_KEY=YOUR_HEROKU_API_KEY 
    ```

2.  然后将以下内容附加到您的`.travis.yml`文件中：

    ```
    env:
      global:
        - secure: YOUR_SECURED_HEROKU_API_KEY
    after_script:
      # Install the Heroku gem (or the Heroku toolbelt)
      - gem install heroku
      # Add your Heroku git repo:
      - git remote add heroku git@heroku.com:YOUR_HEROKU_APP.git
      # Turn off warnings about SSH keys:
      - echo "Host heroku.com" >> ~/.ssh/config
      - echo "   StrictHostKeyChecking no" >> ~/.ssh/config
      - echo "   CheckHostIP no" >> ~/.ssh/config
      - echo "   UserKnownHostsFile=/dev/null" >> ~/.ssh/config
      # Clear your current Heroku SSH keys:
      - heroku keys:clear
      # Add a new SSH key to Heroku
      - yes | heroku keys:add
      # Push to Heroku!
      - yes | git push heroku master 
    ```

3.  你就完成了：提交你的新更改并享受通过 TravisCI 部署到 Heroku。

* * *

*编辑：*如果您遇到任何错误`travis encrypt`，[这可能是您的解决方案](https://stackoverflow.com/q/14072266/341929)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T22:53:33.680

我一直在考虑这种情况，虽然我没有特别考虑 Heroku 作为选择的平台。无论如何，这就是我想出的：

1.  拉取请求转到*“开发”*分支
2.  Travis 为您测试拉取请求
3.  如果我们要部署当前*“开发”*中的内容- 人类拉取请求，审查并将其合并到*“发布/候选”*分支
4.  合并后 Travis 再次测试
5.  一旦该分支的测试通过 - 让 Travis 创建一个针对*“发布/生产”*的拉取请求（也许为 GitHub API 编写一个包装器，以创建实际的拉取请求表单 Travis）。
6.  取决于我们是否真的想要部署 - 人工合并（进入*“发布/生产”*）或关闭从 Travis 创建的拉取请求
7.  拥有一个部署主机或拥有每个应用程序主机（如果您有很多并且不想拥有 SPF）来跟踪*“发布/生产”*分支。

我相信你可以实现一个 Heroku 应用程序来处理作为部署主机的角色，或者更疯狂的事情。

此外，您可能希望让 Travis 通过 IRC 通知您，并在您的客户端设置另一个 IRC 机器人，它可以访问您的个人 SSH 密钥并推送到 Heroku，您还可以通过以下方式实现确认界面与您自己的机器人或脚本 GUI 界面进行私人对话，并带有*“继续！”* 按钮。如果你不是那么老派，你可以使用 Hubot 来达到这个目的。

顺便说一句，您还可以在上述某些步骤之间引入某种暂存分支或任何您喜欢的东西。您可能还应该使用标签，并且回滚只会将已知的工作标签推送到*“发布/生产”*中，您的部署程序脚本将从那里获取它。

# .htaccess - 如何重写？

> ID：10235027
> 
> 赞同：0
> 
> 时间：2012-04-19T19:05:24.067
> 
> 标签：.htaccess, mod-rewrite

我如何重写类似的东西

> 目录/index.php?abc=123

变成类似的东西

> 目录/用户/123

?

我`index\.php\?abc\=[1-9]+`到目前为止，但我不知道如何将数字作为变量传递给`user/...`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:26:15.393

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放入 DOCUMENT_ROOT 下的 .htaccess 中：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{QUERY_STRING} ^abc=([^&]*) [NC]
RewriteRule ^dir/index\.php/?$ dir/user/%1 [L,R,QSA,NC] 
```

# c# - 表达式中的 C# 数字提升

> ID：10235028
> 
> 赞同：0
> 
> 时间：2012-04-19T19:05:23.907
> 
> 标签：c#, expression, numeric, promotions

我正在创建一个可以动态比较任何类型的两个对象的通用运算符方法。例如：

```
Object a = (int)5;
Object b = (long)7;
return a < b; 
```

现在这显然不会编译，因为 object 不提供小于运算符。将对象转换回它们各自的类型显然会起作用。

但是我不知道运行时的类型。

如果我可以使用 .NET 4（我不能），那么我可以将对象转换为动态的，一切都会好起来的。但是，由于我不能，我相信我只剩下使用表达式的代码生成，或者为每种可能的类型和值提供强制转换！

所以表情！

如果我要创建一个表达式，我需要将对象拆箱为正确的类型（简单），但随后我需要将任何数值类型提升为任一操作数中的最大值。升级规则记录在 C# 规范中。

我的问题是，框架中是否有任何预先编写的促销代码，或者，我是否以错误的方式处理这个问题！

谢谢您的帮助。

**更新**

感谢您的回答。我必须承认我并没有考虑使用 IComparable，因为该方法将用于数字之外（尽管我没有明确提及）。话虽如此，我可能会检查两个对象是否都实现了接口并在它们实现时使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T19:08:48.810

使用泛型，如果你使用 where T : IComparable，你可以对对象（值）使用比较方法

```
static bool IsLessThan<T>(T a, T b) where T : IComparable
{
  return a.CompareTo(b) < 0;
} 
```

对于两种不同的类型：

```
static bool IsLessThan<T, V>(T a, V b) where T : IComparable where V : IComparable
{
  return a.CompareTo(b) < 0;
} 
```

**注意**值类型 int、long 等——已经是 IComparable，这有多酷？:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T19:10:05.767

最好的方法可能是使用泛型（如果你还没有）并将泛型类型限制为那些实现的类型`IComparable`，然后使用它的`CompareTo`方法。

# android - java.lang.NoClassDefFoundError: com.google.api.client.http.javanet.NetHttpTransport

> ID：10235034
> 
> 赞同：2
> 
> 时间：2012-04-19T19:05:43.017
> 
> 标签：android, guava

我正在尝试使用适用于 Android 的 Google Places API，但每当我尝试运行我的应用程序时，我都会收到此错误：

```
04-19 18:27:16.094: E/AndroidRuntime(531): Caused by: java.lang.NoClassDefFoundError: com.google.api.client.http.javanet.NetHttpTransport
04-19 18:27:16.094: E/AndroidRuntime(531):  at com.android.FoodFinder.MainActivity.<clinit>(MainActivity.java:38) 
```

这是我的代码

```
package com.android.FoodFinder;

import java.io.IOException;

import com.google.api.client.http.GenericUrl;
import com.google.api.client.http.HttpRequest;
import com.google.api.client.http.HttpRequestFactory;
import com.google.api.client.http.HttpRequestInitializer;
import com.google.api.client.http.HttpTransport;
import com.google.api.client.http.javanet.NetHttpTransport;
import com.google.api.client.http.json.JsonHttpParser;
import com.google.api.client.json.jackson.JacksonFactory;

import android.app.ListActivity;
import android.content.Context;
import android.location.Location;
import android.location.LocationManager;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class MainActivity extends ListActivity
{

    private float distance;
    private Location location;
    private double latitude;
    private double longitude;
    private static String keyString = "0JVolnSwRg8xLH0J6d9rUwQH-e770dlWn3kcRuA";
    private static String urlString = "https://maps.googleapis.com/maps/api/place/search/json?";
    private static final HttpTransport transport = new NetHttpTransport();

    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        LocationManager locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);

        location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

        if(location == null)
        {
            latitude = 0;
            longitude = 0;
        }
        else
        {
            latitude = location.getLatitude();
            longitude = location.getLongitude();
        }

        final EditText distanceEdit = (EditText)findViewById(R.id.distance);

        final Button confirm = (Button)findViewById(R.id.confirm);
        confirm.setOnClickListener(new View.OnClickListener(){
            public void onClick(View v)
            {
                try
                {
                    distance = Float.parseFloat(distanceEdit.getText().toString());
                    search(distance);                   
                }
                catch(Exception e)
                {
                    e.printStackTrace();
                }
            }
        });
    }

    private void search(float d) throws IOException
    {
        HttpRequestFactory hrfactory = createRequestFactory(transport);
        HttpRequest request = hrfactory.buildGetRequest(new GenericUrl(urlString));
        request.getUrl().put("key", keyString);
        request.getUrl().put("location", latitude + ", " + longitude);
        request.getUrl().put("types", "restaurant");
        request.getUrl().put("radius", distance);
        request.getUrl().put("sensor", "false");

    }

    private static HttpRequestFactory createRequestFactory(final HttpTransport transport)
    {
        return transport.createRequestFactory(new HttpRequestInitializer()
        {

            public void initialize(HttpRequest request) throws IOException 
            {
                request.addParser(new JsonHttpParser(new JacksonFactory()));
            }
        });
    }

} 
```

错误在：

```
private static final HttpTransport transport = new NetHttpTransport(); 
```

我已将以下 jar 文件添加到我的构建路径中：

*   公共日志记录-1.1.1

*   google-http-client-1.8.3-beta

*   google-http-client-android2-1.8.3-beta

*   谷歌-http-client-android3-1.8.3-beta

*   google-http-client-appengine-1.8.3-beta

*   google-oauth-client-1.8.0-beta

*   gson-2.1

*   番石榴-r09

*   番石榴-11.0.2

*   httpclient-4.0.3

*   httpcore-4.0.1

*   杰克逊核心asl-1.9.4

*   jdo2-api-2.3-eb

*   json-20080701

*   jsr305-1.3.9

*   junit-4.8.2

*   protobuf-java-2.2.0

*   交易-api-1.1

*   xpp3-1.1.4c

*   google-api-client-1.8.0-beta

*   google-api-client-appengine-1.8.0-beta

*   google-api-client-servlet-1.8.0

但我仍然设法得到 NoClassDefFoundException。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:12:48.540

我认为问题在于添加罐子，试试这个在根名称 /libs(not /lib) 和 Project => Properties => Java Build Path => Libraries => Add JAR 创建一个文件夹 ...

[您可以在此处](https://stackoverflow.com/questions/7648039/android-and-google-client-api-nethttptransport-class-not-found)和[此处](https://stackoverflow.com/questions/6107062/google-api-java-client-nethttptransport-causes-noclassdeffounderror)找到更多帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T17:23:20.507

我正在使用 google-http-client-1.11.0 beta.jar （位于 NetHttpTransport ），它比你的更新，它工作正常，试一试。

# c# - 此 SqlParameterCollection 的索引无效，计数为

> ID：10235037
> 
> 赞同：4
> 
> 时间：2012-04-19T19:05:57.327
> 
> 标签：c#, fluent-nhibernate, nunit, fluent-nhibernate-mapping

我需要访问父类的 ApplicationID 属性才能运行 Nhibernate 查询。在 NUnit 中运行此查询的测试会导致它失败：“BusinessObjects.IntegrationTests.CMSEligibilityInfoRepositoryTest.FetchListByApplicationIDTest: System.IndexOutOfRangeException : Invalid index 6 for this SqlParameterCollection with Count=6.”

在尝试获取 ApplicationID 之前，此代码集合运行良好。

到目前为止，我的研究得出的最好的结果是它是一个映射问题。

父类：

```
public abstract class MemberEligibilityInfo
{
    #region Access Properties

    private int _managedBenOpID;
    private int _managedApplicationID;

    /// <summary>
    /// ID
    /// </summary>
    public virtual uint ID { get; set; }

    /// <summary>
    /// MemberElig ID that will work with NHibernate
    /// </summary>
    public virtual int ManagedMemberEligID { get; set; }

    /// <summary>
    /// Member ID
    /// </summary>
    public virtual ulong MemberID { get; set; }

    /// <summary>
    /// Member ID that will work with NHibernate
    /// </summary>
    public virtual long ManagedMemberID { get; set; }

    /// <summary>
    /// Benefit Option ID
    /// </summary>
    public virtual uint BenefitOptionID { get; set; }

    public virtual int ManagedBenOpID
    {
        get { return _managedBenOpID; }
        set
        {
            if (_managedBenOpID == value)
            {
                BenefitOptionID = (uint)_managedBenOpID;
                return;
            }

            _managedBenOpID = value;
            BenefitOptionID = (uint)_managedBenOpID;
        }
    }

    /// <summary>
    /// Benefit Option
    /// </summary>
    public virtual string UBOI { get; set; }

    /// <summary>
    /// Application ID
    /// </summary>
    public virtual uint ApplicationID { get; set; }

    public virtual int ManagedApplicationID
    {
        get { return _managedApplicationID; }

        set
        {
            if (_managedApplicationID == value)
            {
                ApplicationID = (uint)_managedApplicationID;
                return;
            }

            _managedApplicationID = value;
            ApplicationID = (uint)_managedApplicationID;
        }
    }
    /// <summary>
    /// Application Plan Year date.
    /// </summary>
    public virtual DateTime ApplicationPlanYear { get; set; }

    /// <summary>
    /// Effective Date.
    /// </summary>
    public virtual DateTime EffectiveDate { get; set; }

    /// <summary>
    /// Termination Date.
    /// </summary>
    public virtual DateTime TermDate { get; set; }

    #endregion // Access Properties

    #region Constructors

    /// <summary>
    /// Default constructor.
    /// </summary>
    public MemberEligibilityInfo()
    {
        ID = 0;
        MemberID = 0;
        BenefitOptionID = 0;
        UBOI = string.Empty;
        ApplicationID = 0;
        ApplicationPlanYear = DateTime.MinValue;
        EffectiveDate = DateTime.MinValue;
        TermDate = DateTime.MinValue;
    }

    #endregion // Constructors
} 
```

儿童班：

```
public class CMSEligibilityInfo : MemberEligibilityInfo
{
    private BenefitOptionInfo _managedBenefitOptionInfo;

    #region Access Properties

    /// <summary>
    /// Precedence
    /// </summary>
    public virtual int Precedence { get; set; }

    /// <summary>
    /// Is Active
    /// </summary>
    public virtual bool Active { get; set; }

    public virtual BenefitOptionInfo ManagedBenefitOptionInfo
    {
        get { return _managedBenefitOptionInfo; }
        set
        {
            if (_managedBenefitOptionInfo == value)
            {
                return;
            }

            _managedBenefitOptionInfo = value;
            this.ManagedApplicationID = ManagedBenefitOptionInfo.ManagedApplicationID;
        }
    }

    public virtual MemberInfo MemberInfo
    {
        get;
        set;
    }

    #endregion // Access Properties

    #region Constructors

    /// <summary>
    /// Default Constructor
    /// </summary>
    public CMSEligibilityInfo() : base()
    {
        Precedence = 0;
        Active = false;
    }

    #endregion // Constructors
} 
```

子类映射：

```
public class CMSEligibilityInfoMap : ClassMap<CMSEligibilityInfo>
{
    public CMSEligibilityInfoMap()
    {
        // Table
        Table("_MEI_EligPeriods");

        // Unique Identifier
        Id(x => x.ManagedMemberEligID, "MemEligID")
            .GeneratedBy.Identity();

        // Member ID, Managed to handle the bigint
        Map(x => x.ManagedMemberID, "MemberID")
            .Not.Nullable();

        // Benefit Option ID
        Map(x => x.ManagedBenOpID, "BenOpID")
            .Not.Nullable();

        //// Effective Date
        Map(x => x.EffectiveDate, "Eff")
            .Nullable();

        // Termination Date
        Map(x => x.TermDate, "Term")
            .Nullable();

        // Is the eligibility record active
        Map(x => x.Active, "Active")
            .Not.Nullable();

        Map(x => x.Precedence, "Precedence")
            .Nullable();

        References(x => x.ManagedBenefitOptionInfo)
            .Column("BenOpID")
            .Not.LazyLoad()
            .Cascade.None();

        // References back to MemberInfo
        References(x => x.MemberInfo)
            .Column("MemberID")
            .Not.LazyLoad()
            .Cascade.None();
    }
} 
```

在导致错误的存储库方法中查询：

```
 /// <summary>
    /// Fetch a list of eligibility info based on Application ID
    /// </summary>
    /// <param name="appID">Selected Application ID</param>
    /// <returns>A list of eligibility information</returns>
    public IList<CMSEligibilityInfo> FetchListByApplicationID(uint? appID)
    {
        using (var session = SessionFactory.OpenSession())
        using (var transaction = session.BeginTransaction())
        {
            var list = session.CreateCriteria<CMSEligibilityInfo>()
                .CreateAlias("ManagedBenefitOptionInfo", "ManagedBenefitOptionInfo")                 .Add(Restrictions.Eq(Projections.Property("ManagedBenefitOptionInfo.ManagedApplicationID"), appID))
                .List<CMSEligibilityInfo>();

            // Commit the transaction
            transaction.Commit();

            return list;
        }
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T21:15:48.973

事实证明，这种错误是由于同一个属性被绑定了两次，或者更确切地说，映射了两个同名的属性。我们移除了父对象（因为它从未被使用过）并创建了子类的基类，并确保该`BenefitOptionInfo`对象是唯一通过`BenOpID`.

# c# - 如何在 C# 中生成一个总共 8 位的随机数？（4 个整数，4 个小数部分）

> ID：10235038
> 
> 赞同：7
> 
> 时间：2012-04-19T19:05:57.713
> 
> 标签：c#, .net, math, random

像这样的东西：

```
1234.5678
2345.6789
3456.7890 
```

但不是：

```
123.4567 
```

现在我这样做：

```
double number = Math.Ceiling ( random.NextDouble ( ) * 10000000 ) * 0.001; 
```

但这并不总是给我8位数。

有什么巧妙的技巧可以做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T19:09:37.247

尝试`random.Next(10000000, 99999999+1) / 10000.0d;`

编辑：添加了更多的 9

EDIT2：修复了 1 减问题

EDIT3：添加了更多的 0，我的答案是如何获得如此多的支持的？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T19:09:03.783

使用其中之一：

```
double number = Math.Ceiling(random.NextDouble() * 9000 * 10000 + 1000 * 10000) * 0.0001;
double number = Math.Ceiling(random.NextDouble() * 90000000 + 10000000) * 0.0001;
double number = random.Next(10000 * 10000 / 10, 10000 * 10000) / 10000d;
double number = random.Next(10000000, 100000000) / 10000d; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T19:11:52.473

像这样的东西？

```
Random r = new Random();
var item = r.Next(10000000, 100000000) * 0.0001m; 
```

每个支出者的评论如下......关于你为什么我在这里使用小数的解释：

1.  Jon Skeet 在俄亥俄州 Codemash 的一次演讲中公开羞辱了我们中的许多人，因为他选择了 double。
2.  时髦人士使用双打，并且
3.  Decimal 将防止使用 double 引入的精度问题。请记住，当您在点后面需要很多数字时，您应该使用双精度数。如果您需要较少，但需要它们保持准确性，请使用小数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T19:08:31.150

生成 8 个单个随机数字，然后将它们连接在一起。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-19T19:09:07.513

```
double number = random.Next(1000 * 1000, 1000 * 1000 * 10) / 1000.0 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-19T19:10:37.547

```
double rndNumber = new Random().NextDouble(); 
string testNumber = (rndNumber * 99999999).ToString("0000.0000"); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-19T19:14:12.607

```
Random rnd = new Random();
int num1 = rnd.Next(1000,9999);
int num2 = rnd.Next(1000,9999);
Console.WriteLine(num1.ToString()+"."+num2.ToString()); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-19T19:13:55.650

```
double number = Double.Parse(r.Next(10000000, 99999999).ToString().Insert(4,".")); 
```

# mysql - MySQL查询自我加入最大日期

> ID：10235045
> 
> 赞同：0
> 
> 时间：2012-04-19T19:06:23.967
> 
> 标签：mysql, date, join, max

我有 2 张桌子，联系人和搜索。“联系人”包含联系人的 ID 和他工作的公司 ID。'搜索'有他所属的contactid和companyid，因为一个联系人可以在2家公司工作。它还有最后一次联系人搜索数据库的时间。cityid 对应他工作的城市。

我正在寻找每个唯一标识的联系人的最后搜索日期。如何获得所需的输出？

```
create table contact (id integer primary key auto_increment, companyid integer, contactid integer, unique key(companyid, contactid));
insert into contact (companyid, contactid) values (1,1), (1,2), (2,3); 
```

接触：

```
id companyid contactid
1  1         1    
2  1         2
3  2         3

create table search (searchid integer primary key auto_increment, companyid integer, contactid integer, cityid integer, lastsearchdate date);
insert into search (companyid, contactid, cityid, lastsearchdate) values (1,1,1,'2012-03-01'), (1,1,2,'2012-04-16'), (2,3,3,'2012-04-01'), (1,1,1,'2012-03-07'), (2,3,4,'2012-04-10'), (1,2,1,'2012-04-01'); 
```

搜索：

```
searchid companyid contactid cityid   lastsearchdate
1        1          1        1        2012-03-01
2        1          1        2        2012-04-16
3        2          3        3        2012-04-01
4        1          1        1        2012-03-07
5        2          3        4        2012-04-10
6        1          2        1        2012-04-01 
```

期望的输出：

```
companyid contactid cityid lastsearchdate
1         1         2       2012-04-16
1         2         1       2012-04-01
2         3         4       2012-04-10 
```

查询至今：

```
select b.companyid, b.contactid, a.cityid, a.lastsearchdate from search a join contact b
on a.companyid = b.companyid and a.contactid = b.contactid
join search c
on a.companyid = c.companyid and a.contactid = c.contactid and a.lastsearchdate > c.lastsearchdate
group by b.companyid, b.contactid; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:49:05.090

根据您要查找的内容的描述，这不是您的样本数据的期望输出吗？（不知道为什么您还从下面丢弃了记录 2 和 3）

```
companyid contactid cityid   lastsearchdate    
1          1        2        2012-04-16
2          3        3        2012-04-01
1          1        1        2012-03-07
2          3        4        2012-04-10
1          2        1        2012-04-01 
```

如果这是正确的，则此查询将起作用：

```
select t1.companyid, t1.contactid, t1.cityid, t1.lastsearchdate
from search t1
where t1.lastsearchdate = (select max(t2.lastsearchdate) from search t2 where t2.companyid =
t1.companyid and t2.contactid = t1.contactid and t2.cityid = t1.cityid); 
```

# android - 如何在文本字段上运行验证

> ID：10235048
> 
> 赞同：0
> 
> 时间：2012-04-19T19:06:30.323
> 
> 标签：android, lost-focus, textedit

这里的目标是在用户输入联系信息时验证每个字段，并最终对每个字段应用自动格式（大写、拼写等）。

我几乎可以使用以下代码进行此操作，但它基于按键回调，而我真正想要触发的是每个文本字段的“失去焦点”。有任何想法吗？

```
public TextFormValidationCallback (CustomerFormActivity faja, String editTextName, Context context, EditText textField, 
                                   Button button, int rule) {
    this.button = button;
    this.textField = textField;
    this.context = context;
    this.ruleResourceId = rule;
    this.editTextName = editTextName;
    this.faja = faja;
    this.res = context.getResources();
}

public boolean onEditorAction(TextView v, int keyCode, KeyEvent event) {
    if (event != null) {

        // If the event is a key-down event on the "enter" button
        if ((event.getAction() == KeyEvent.ACTION_DOWN)
                && (keyCode == KeyEvent.KEYCODE_ENTER)) {
            // Perform action on key press
            Log.i("TextFormValidation",
                    "TextFormValidation callback activated!");
            if (validateTextFieldNotNullData(this.textField)
                    && (validateTextFieldFormat(this.textField,
                            ruleResourceId))) {
                faja.setFieldValidationArray(getHeadingIndex(editTextName),
                        true);
                if (faja.sumFieldValidations()) {
                    button.setClickable(true);
                    button.setText(R.string.addCustomer);
                }
            } else {
                button.setText(R.string.next);
                button.setClickable(false);
            }
            return true;
        }
    } else {
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:44:10.117

好的，它不会让我昨天发布这个，但我想通了。为了让其他人免于这个掌声时刻，我将在此处发布固定代码。

```
public class TextFormValidationCallback  implements OnFocusChangeListener {

private Button button;
private EditText textField;
private Integer ruleResourceId;
private Resources res;
private Context context;
private String editTextName;
private CustomerFormActivity faja;

public TextFormValidationCallback (CustomerFormActivity faja, String editTextName, Context context, EditText textField, 
                                   Button button) {
    this.button = button;
    this.textField = textField;
    this.context = context;
    this.editTextName = editTextName;
    this.res = context.getResources();
    this.ruleResourceId = R.string.validates_everything;
    this.faja = faja;
}

public TextFormValidationCallback (CustomerFormActivity faja, String editTextName, Context context, EditText textField, 
                                   Button button, int rule) {
    this.button = button;
    this.textField = textField;
    this.context = context;
    this.ruleResourceId = rule;
    this.editTextName = editTextName;
    this.faja = faja;
    this.res = context.getResources();
}

public void onFocusChange(View v, boolean hasFocus) {

    Log.i("TextFormValidation", "TextFormValidation callback activated!");
    if (! hasFocus) {
        if (validateTextFieldNotNullData(this.textField)) {
           if (validateTextFieldvsFormat(this.textField, ruleResourceId)) {
                faja.setFieldValidationArray(getHeadingIndex(editTextName), true);
           }
        }
        if (faja.sumFieldValidations()) {
            button.setClickable(true);
            button.setText(R.string.addCustomer);
        }
        else {
            button.setText(R.string.next);
            button.setClickable(false);
        }
    }
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T19:17:18.390

这可能是您正在寻找的东西吗？ [TextView.onWindowFocusChanged()](http://developer.android.com/reference/android/widget/TextView.html#onWindowFocusChanged%28boolean%29)

# rally - 默认 API 版本

> ID：10235051
> 
> 赞同：0
> 
> 时间：2012-04-19T19:06:42.507
> 
> 标签：rally

Rally Rest API 如何确定要使用的 API 版本（如果在 RallyRestAPI.new 调用中没有明确定义版本）？

背景：我们最近通过 Ruby API 测试了一些东西（实际上是在查看给定工作区中故事的有效字段是什么），并发现并非所有有效字段都通过 API 进行广告。但是如果我们明确定义了最新的 API 版本（1.31），那么它就可以正常工作了。从更仔细的角度来看，在没有明确定义 API 版本的情况下，我猜我们的接口假定了一个默认版本（对我们来说是 1.17）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T20:42:17.073

如果版本未在 RallyRestAPI 对象中表示，则 Rally Rest API 将默认为 Web 服务的最新版本。

您可以像这样显式表达您想要使用的 API 版本：

```
rally = RallyRestAPI.new(:username => "<your email>", 
                         :password => "your password",
                         :version => "1.31") 
```

# javascript - jQuery 出站链接匿名化 + 法律声明

> ID：10235052
> 
> 赞同：1
> 
> 时间：2012-04-19T19:06:42.423
> 
> 标签：javascript, jquery, html, dom

我将如何让一个 jQuery（最好是）脚本遍历每个`<a>`标签并找到任何不以开头的标签

```
http://www.example.com/ 
```

并将 src 属性更改为

```
http://www.example.com/outbound/?verifyAge=0&dest='+encodeURIComponent(original_src) 
```

并申请`rel="external" target="_blank"`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T19:18:53.587

[这](http://jsfiddle.net/PXPxt/)是概念的快速证明：

HTML：

```
<a href="http://www.google.com">Google</a>
<a href="test.html">Test</a> 
```

JavaScript：

```
$('a').not('[href^="http"]').each(function () {
    var element = $(this);
    element.attr('href', element.attr('href') + '?foo=baz');
    element.attr('target', '_blank');
}); 
```

本质上，JavaScript 所做的是查找任何**不以开头的**`a`元素（您需要根据自己的需要[扩展该条件逻辑](http://api.jquery.com/category/selectors/attribute-selectors/)，以及处理必须转义 URL 中的斜杠或类似的任何问题)，获取对它的引用作为一个 jQuery 对象（我不记得是否已经是一个 jQuery 对象，如果是你可以省略那部分），修改它的属性并添加一个属性。 **`http``this``href``target`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T19:22:49.717

我认为这样的事情会奏效。

```
​$('a')
    .filter( function() { return $(this).attr('href').indexOf('www.example.com') !== 0; })
    .each( function(i, el) {
        var curHref = el.attr('href');
        el.attr('rel', 'external');
        el.attr('target', '_blank');            
        el.attr('href', 'http://www.example.com/outbound/verifyAge=0&dest='+encodeURIComponent(curHref));             
    }​); 
```

​有一个插件可以对元素进行正则表达式匹配，但是对我来说使用正则表达式似乎有点矫枉过正。**

# emacs - 如何在 Emacs 中更改目录

> ID：10235054
> 
> 赞同：22
> 
> 时间：2012-04-19T19:06:45.703
> 
> 标签：emacs, dired

在 Emacs 23.2.1 的 dired+ 中，如何导航到不同的目录（“更改目录”）？

我知道如何使用 and 向上移动目录`^`以及如何使用 and 移动到不同的目录行`<`，`>`但是我一直无法找到允许我导航到新目录（通过输入名称）而不退出当前目录的命令窗口并创建一个新窗口。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-19T19:32:21.920

`C-x C-v`将在当前窗口中打开一个文件。如果您给出目录的名称而不是文件，它将在目录中打开它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T03:02:01.997

您还可以使用`a`in dired 来访问文件/目录，丢弃您所在的 dired 缓冲区，这样您就不会留下所有祖先的 dired 缓冲区。

如果你使用`dired-jump`, then`C-x C-j`可以从 dired*或*文件缓冲区跳转到父目录（方便地指向你来自的文件/目录）。

`M-:` `(info "(dired-x) Optional Installation Dired Jump")` `RET`

# ruby-on-rails - rails应用程序名称的保留字？

> ID：10235059
> 
> 赞同：2
> 
> 时间：2012-04-19T19:07:16.203
> 
> 标签：ruby-on-rails

我创建了一个新的 rails 3.2.3 应用程序，并为其命名 - jquery。

```
rails new jquery 
```

在我创建它之后，“rails 控制台”给了我以下错误。

```
~/Temp/jquery$ r c
/Users/ssk/Temp/jquery/config/application.rb:13: uninitialized constant Jquery::Rails::Application (NameError)
    from /Users/ssk/.rvm/gems/ree-1.8.7-2011.03/gems/railties-3.2.3/lib/rails/commands.rb:39:in `require'
    from /Users/ssk/.rvm/gems/ree-1.8.7-2011.03/gems/railties-3.2.3/lib/rails/commands.rb:39
    from script/rails:6:in `require'
    from script/rails:6 
```

如果我用不同的名称创建它，没关系。所以jquery是不允许的名字？如果是这样，我如何知道一个名称是否允许或现在在我创建一个名称之前？

谢谢。

山姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T19:15:04.430

这是您可以查看的 Rails 保留字列表。

[http://oldwiki.rubyonrails.org/rails/pages/ReservedWords](http://oldwiki.rubyonrails.org/rails/pages/ReservedWords)

# ant - 如何在 Ant 目标中获取 P4 最后一个更改列表编号

> ID：10235062
> 
> 赞同：0
> 
> 时间：2012-04-19T19:07:44.003
> 
> 标签：ant, perforce

我想创建一个可以打开一个新的 p4 更改列表并集成 2 个分支的 ant 目标。[我可以使用 p4 任务http://ant.apache.org/manual/Tasks/perforce.html](http://ant.apache.org/manual/Tasks/perforce.html)完成大部分工作

但是，我不知道该怎么做的一件事是我想将最后一个更改列表编号放在描述中，但我不知道如何在 Ant 中获取最后一个更改列表编号。

有谁知道这是怎么做到的吗？请给我一些建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T21:21:32.350

查看 P4Ant - 它具有在特定路径中查找更改的任务。

[http://www.perforce.com/perforce/doc.current/manuals/p4ant/p4tasks.html](http://www.perforce.com/perforce/doc.current/manuals/p4ant/p4tasks.html)

# jquery - jQuery jqTransform 插件输入宽度

> ID：10235064
> 
> 赞同：0
> 
> 时间：2012-04-19T19:07:47.127
> 
> 标签：jquery

我正在使用 jqTransform 插件，但我有问题，当我添加 jqTransform 插件时，我无法更改输入宽度，如果我不使用插件一切都可以。

# HTML

```
<div id="content">
    <form class="jqtransform">
        <div class="label">Vardas Pavarde<span class="z">*</span>:</div>
        <div class="field"><input type="text" value="Vardenis Pavardelevicius" /></div>
        <div class="clear"></div>
        <div class="label">&nbsp;</div>
        <div class="field-submit field"><input type="submit" value="Siusti" /></div>
        <div class="clear"></div>
    </form>                     
</div> 
```

# CSS

```
#content form .field { float: left; width: 534px; height: auto; overflow: hidden; margin: 0 0 11px 0; }
#content form .field input[type="text"] { width: 1000px; }
#content form .field textarea { width: 524px; height: 105px; }
#content form .field-submit { text-align: right; }
#content .form-done { margin: 0 0 15px 0; color: #5f2d82; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T20:56:07.087

您的输入被包装在`div`s 中，因此您必须编辑`div`s. 您可以通过编程方式完成，但文档本身说您应该更改他们的 CSS。

[http://www.dfc-e.com/sites/theme/jscripts/vendors/jqtransformplugin/jqtransform.css](http://www.dfc-e.com/sites/theme/jscripts/vendors/jqtransformplugin/jqtransform.css)

他们渲染的 HTML 看起来像这样，你可以看到`jqTransformInputWrapper`如果你想放大你的输入，你需要改变：

```
<div class="rowElem">
    <label for="inputtext"">Input Text:</label>
    <div class="jqTransformInputWrapper jqTransformSafari" style="width: 210px; ">
        <div class="jqTransformInputInner">
            <div>
               <input type="text" name="inputtext" class="jqtranformdone jqTransformInput" style="width: 226px; ">
            </div>
        </div>
    </div>
</div> 
```

顺便说一句，有一些不错的 CSS 库，例如[Twitter Bootstrap](http://twitter.github.com/bootstrap/)，它们以更加优雅和高效的方式完成这种类型的表单操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T14:08:20.990

这对我来说很好。

```
 .jqTransformSelectWrapper ul{ 
 font-size:10px !important; 
  width:175px !important;} 

 .jqTransformSelectWrapper{
 width:175px !important;
 } 
```

# iphone - UIAction Sheet 和警报问题

> ID：10235065
> 
> 赞同：2
> 
> 时间：2012-04-19T19:07:50.930
> 
> 标签：iphone, ios, objective-c, uialertview, uiactionsheet

你好，我是 Xcode 和 iOS 编程的新手。我在操作表和警报中遇到了一些问题，必须按两次才能工作。它还说：“呈现由其超级视图剪辑的操作表”。某些控件可能无法响应触摸。在 iPhone 上尝试 -[UIActionSheet showFromTabBar:] 或 -[UIActionSheet showFromToolbar:] 而不是 -[UIActionSheet showInView:]。

```
{
    UIActionSheet   *actionSheet = [[UIActionSheet alloc]
                                  initWithTitle:@"¿?" delegate:self cancelButtonTitle:@"No" destructiveButtonTitle:@"Send" otherButtonTitles:nil];

    [actionSheet showInView:self.view];
} 
```

任何帮助将不胜感激谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T20:51:51.453

您需要将其放在标签栏（或工具栏）中，而不是：

```
 [actionSheet showInView:self.view]; 
```

做

```
 [actionSheet showFromTabBar:self.tabBarController.tabBar]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T07:02:09.063

If your application is using a navigation bar (and not a tool bar) on the screen where you want to present the `UIActionSheet`, try to present it on the tool bar of the navigation controller.

This would also present the action sheet even if you have hidden your navigation controller's toolbar.

`[myActionSheet showInView:self.navigationController.toolbar]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-14T05:53:55.273

此方法也有效，它隐藏了**“Prepresenting action sheet clipped by its superview”**警告。

```
[actionSheet showInView:[UIApplication sharedApplication].keyWindow]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T09:20:49.560

`[actionSheet showInView:self.parentViewController.view];`如果您使用 tabbar 或 naviatinbar，我有同样的问题，我使用而不是 self.view 解决了

# c# - 数据库集成测试结构

> ID：10235067
> 
> 赞同：2
> 
> 时间：2012-04-19T19:07:56.610
> 
> 标签：c#, sql, unit-testing, integration-testing

为了帮助，这是我的环境：

*   Visual Studio 2010 和 c#
*   带有 Sql 管理工作室的 Sql Server 2008 R2
*   单元

我正在创建许多将与数据库交互的集成测试。每个测试都必须有一个处于非常特定状态的数据库。我不想使用 ORM 或直接使用 Sql Management Studio 插入数据。

我想要的是几个结构与 VMware 快照相同的 sql 脚本。

例如：

--> [主脚本，系统表如映射到枚举的表].sql

-- --> [一些表中的几行].sql

-- -- --> [其他表中的其他几行].sql

-- --> [其他测试的几行].sql

-- -- --> [其他几行用于处理其他情况].sql

使用这种类型的结构，我将能够回滚到特定版本的快照以将数据库设置为特定状态，然后在结构中创建另一个快照分支。

在每次测试之前，我都会清理数据库中的所有表，然后执行特定的 sql 脚本。

这是与数据库进行集成测试的好方法吗？

是否存在执行此类 sql 脚本结构的工具？

你有最佳实践清单吗？

如果我想做什么不是一个好主意，那么进行此类测试的最佳架构和方法是什么？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T20:52:35.660

您说您不想使用 ORM，但我选择在回答中忽略这一点。对不起 ：）

### 如何填充

我更喜欢使用与用户相同的操作将数据插入数据库。也就是说，如果我需要在数据库中订购产品，我会使用管理界面创建产品，让用户使用公共界面创建帐户并让该用户下订单。

这不必通过单击实际 UI 中的按钮来完成，但最好使用 UI 的底层抽象。

好处：

*   数据库将具有与实际执行时相同的状态，而不是*您认为*它将具有的状态
*   如果您需要进行更改，例如对架构进行更改，您只需更改生产代码
*   测试涵盖了更多功能
*   数据库仅填充此特定用例所需的数据
*   测试更容易阅读（插入脚本不容易阅读）

缺点：

*   它更慢
*   如果您需要*大量*数据（这种情况很少见），则效果不佳

我只需要大量数据进行一次测试。为此，我创建了自己的声明性域特定语言，我可以使用它在测试中的（[逐字](http://msdn.microsoft.com/en-us/library/aa691090(v=vs.71).aspx)）字符串中指定必要的数据。然后我写了一个工具来解析数据并将其插入数据库。

### 清理数据库

清理数据库有几种方法： 重新创建数据库；删除所有数据；在事务中执行测试并回滚……不过，我最喜欢的不是清理数据库。对于每个测试，我都会创建一个新用户和一个新产品（使用上面的示例）。我不必清理数据库，测试仍然不会相互干扰。另外，如果我需要检查它，我将在测试后获得数据。

希望它有点帮助，即使它不是你问题的真正答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T19:30:44.933

我们使用[FitNesse](http://fitnesse.org/)和[dbFit](http://benilovj.github.com/dbfit)进行这种数据库测试，我们也使用 SQL 2008 R2。我不确定 VMWare 快照的结构是什么样的，但 FinNesse 允许您构建一组分层测试（使用类似于 wiki 的结构和语法）。

从我自己的角度来看，主要的好处是：

*   dbFit 将在事务中隐式运行并在每次测试结束时自动回滚。
*   层次结构使您能够添加可应用于多个测试的设置和拆卸脚本。
*   您可以创建一组按顺序执行所有测试的单独测试。
*   与我们的持续集成服务器 TeamCity 集成（在某种程度上）。

# jquery - jQuery高度设置

> ID：10235073
> 
> 赞同：0
> 
> 时间：2012-04-19T19:08:32.187
> 
> 标签：jquery, jquery-plugins, jquery-selectors

我试图修改代码：

```
<script type="text/javascript">
$(function() {
    $('#accordion > li').hover(
        function () {
            var $this = $(this);
            $this.stop().animate({'height':'400px'},500);            
            $('.description',$this).stop(true,true).fadeIn();
        },
        function () {
            var $this = $(this);
            $this.stop().animate({'height':'39px'},1000);          
            $('.description',$this).stop(true,true).fadeOut(500);
        }
    );
});
</script> 
```

这样我就可以制作出我成功的垂直手风琴了。但我想手风琴在链接上单击（选择）时停止。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:16:19.597

我认为您想`hover`在单击链接时解除绑定。如果是这样，您可以取消绑定`mouseenter`和`mouseleave`事件。悬停是`mouseenter`和`mouseleave`事件的快捷方式。

尝试如下，

```
$('#accordion > li').unbind('mouseenter mouseleave') 
```

# python - 更多功能的python

> ID：10235074
> 
> 赞同：1
> 
> 时间：2012-04-19T19:08:34.783
> 
> 标签：python, functional-programming, anonymous-function

我想编写一种 CPS 代码更高的功能。他们应该获取一个功能代码，将其封装在对象中，并添加组合这些对象的方法。

像这样的东西：

```
myFunction=MyFunction(
  a = b+c
  print(c)
  return a) 
```

但是对于匿名函数，只有一个 Python 表达式——lambda 语句。它不太适合。

Python 是一门强大的语言，它有不同的表达方式：装饰器、eval 等……有没有像上面提到的例子那样编写匿名函数的好方法？

另一种方法是使用特殊函数（如 monadic bind 和 return）扩展 lambda 表达式，以及用于编写单行复杂表达式的其他高阶函数。

主要目的是创建自定义抛出控制表达式。

```
class TimeoutExpression:
  def __init__(self,name,function,timeout):
    ...
  def eval(self):
    """ eval functions, print result and error message
      if functions failed to calculate in time """
    ...
  def andThen(self,otherExpression):
    """ create complex sequential expression"
    ...
  def __call__(self):
    ... 
```

它的使用方式如下：

```
TimeoutExpression( time consuming calculation ).andThen(
  file object access).andThen(
    other timer consuming calcualtion ) 
```

创建自定义控制流结构的最佳 python 惯用方式是什么？

我已经阅读了讨论：[如何在 Python 中创建匿名函数而不用洗礼？](https://stackoverflow.com/questions/6629876/how-to-make-an-anonymous-function-in-python-without-christening-it) 提到了几个采用相同方法的决定：从三重引号字符串生成函数。虽然行为完全正确，但似乎很麻烦。它是目前设计的最佳方法吗？

**更新**：

有人告诉我没有问题，python 允许你在任何上下文中使用*def 。*我假设我的 python 经验欺骗了我，并尝试按照建议**在任何范围内使用***def 。* 我有一个错误。在任何情况下我应该如何准确地放置*def ？*

 ***```
def compose(f):
    return lambda k: lambda x: f(k(x))

test = compose( def sqr(x) :
                print ("sqr "+str(x))
                return x*x
                return sqr) ( def x2(x):
                              print("x2 "+str(x))
                              return x*2
                              return x2 ) 
```

错误：

```
Traceback (most recent call last):
  File "<input>", line 1, in <module>
  File "anonFunction.py", line 4
    test = compose( def sqr(x) :
                  ^
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T19:14:04.120

使用 lambda 的 wrt Python 没有任何优势。Lambda 和 Anonymous 函数一般用于简单函数，如果需要更复杂的多行函数，编写命名函数更易读。

由于函数是第一类对象，您可以简单地定义它，将其分配给变量并使用它并传递它。除非您需要一个可以选择 lambda 的一次性简单函数，否则命名函数是有利的。尽管如此，在从未完全 Pythonic 中使用 lambda。

回到你的例子，

```
myFunction=MyFunction(
  a = b+c
  print(c)
  return a) 
```

在 Python 中，将其编写为

```
def MyFunction:
    a =b + c
    print c
    return a 
```

然后将它传递给你的代码，就像`MyFunction`Pythonic 一样。我在 Javascripts 中看到了 Callbacks 以匿名方式编写的代码。但是每种语言都有自己的哲学，而 Python 的哲学是可读性。

*---可读性很重要。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T18:12:15.240

我有一个技巧——这确实是唯一合适的术语——使用嵌套函数，它提供了多行 lambda 可能提供的那种功能。[你可以在这里](https://github.com/whaatt/Mu)查看我的 GitHub 存储库。

基本上它允许您执行以下操作：

```
fibonacci = f('result = t(a-1)+t(a-2) if a>2 else 1; return result')
fibonacci(6) #Output: 8 
```

或者更多的是匿名函数：

```
cube = f('result = a**3; return result')(4)
print(cube) #Output: 64 
```

这种黑客攻击显然有局限性。例如，我还没有想出一种方法来实现更复杂的缩进结构，比如`if`or `while`，但同样，这是一个非常便宜的 hack。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T19:41:07.133

在 Python 中，使用`lambda`关键字，您只能创建一个计算单个表达式并返回结果的函数对象。要使用语句或多行创建函数，您必须使用`def`关键字，该关键字需要名称。

限制的原因`lambda`主要是基于 Python 将行尾视为一件重要的事情：

[Python 中没有多行 Lambda：为什么不呢？](https://stackoverflow.com/questions/1233448/no-multiline-lambda-in-python-why-not)

然而，名字并不重要。您可以制定一个约定，即您的每个“匿名”函数都将使用名称`anon`或其他内容进行定义。如果你真的在乎，你可以抹去名字的所有痕迹：

```
y = 5
def anon(x):
    return x + y  # note "closure" over the current value of y

myFunction = anon

# if you really care, you can erase all evidence of name "anon"
anon.__name__ = ''  # wipe the record of original name "anon"
del(anon)  # unbind the name "anon" 
```

因此，对于函数式编程，Python 可以创建一流的函数对象，传递它们等等。Python 不能做的一件事是创建一个从不具有名称的复杂函数对象，但实际上没有理由说这很重要。***

# pdfsharp - PdfSharp：将一个 PdfPage 绘制到另一个 PdfPage 上

> ID：10235078
> 
> 赞同：1
> 
> 时间：2012-04-19T19:08:45.997
> 
> 标签：pdfsharp

我目前正在将 PdfPage 作为 XPdfForm 重新加载，以便将其用作图形源。我想要一种将 PdfPage 转换为 XImage 的方法，以便我可以在另一个 XGraphics 上绘制它，或者以某种方式将 PdfPage 直接绘制到 XGraphics 上。

注意：询问如何从 PdfPage 获取 XPdfForm 的目的是为了避免从流中重新加载文件。我不想经历保存/加载周期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T05:29:44.467

您可以使用 XImage.FromFile 从 PDF 文件加载页面。在页码后面加上 # 号，例如“test.pdf#17”以获取第 17 页。

另见： [http ://www.pdfsharp.net/wiki/Graphics-sample.ashx#Draw_a_form_XObject_a_page_from_an_external_PDF_file_27](http://www.pdfsharp.net/wiki/Graphics-sample.ashx#Draw_a_form_XObject_a_page_from_an_external_PDF_file_27)

# ruby-on-rails - 命名空间路由文件提供路由错误

> ID：10235084
> 
> 赞同：0
> 
> 时间：2012-04-19T19:09:08.807
> 
> 标签：ruby-on-rails, rails-routing

我正在尝试将我的网站命名为所有者/管理员，并遇到路由错误。当我尝试创建一个新的财务报告 (http://localhost:3000/en/admin/financial_reports/new) 我得到

```
No route matches {:controller=>"financial_reports", :format=>nil} 
```

这是我的 routes.rb （缩短）

```
scope ":locale", locale: /#{I18n.available_locales.join("|")}/ do
 root :to => 'sites#index'
 get "logout" => "sessions#destroy", :as => "logout"
 get "login" => "sessions#new", as: "login"
namespace :admin do
    root :to => "base#index"
    resources :financial_reports do
      collection do
        get :monthly
        get :yearly
      end
    end
  end
namespace :owner do
    root :to => "base#index"
  end
match "*path", to: "sites#not_found" # handles /en/fake/path/whatever
end
root to: redirect("/#{I18n.default_locale}") # handles /
match '*path', to: redirect("/#{I18n.default_locale}/%{path}")
end 
```

这是我的控制器 app/controllers/admin/financial_reports_controller.rb

```
class Admin::FinancialReportsController < BaseController 
```

def index @financial_reports = FinancialReport.all end

def new @financial_report = FinancialReport.new end

def create @financial_report = FinancialReport.new(params[:financial_report]) if @financial_report.save flash[:notice] = '财务报告上传成功' redirect_to root_url else flash[:alert] = "财务报告未上传成功" render "指数”年底结束def yearly @financial_reports = FinancialReport.yearly end defmonthly @financial_reports = FinancialReport.monthly end end

和我的看法

app/views/admin/financial_reports/new.html.erb

```
<%= form_for(@financial_report) do |f| %>
<p>
  <%= f.label(:report_type) %> <br>
  <%= f.radio_button :report_type, "Monthly" %> Monthly |
  <%= f.radio_button :report_type, "Yearly" %> Yearly
</p>
<p>
  <%= f.file_field :file %>
</p>
<p>
  <%= f.submit "Upload Monthly Record" %>  
</p>
<% end %> 
```

知道为什么我会收到此错误吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:14:28.643

```
<%= form_for[:admin, @financial_report] do |f| %>
........................
.............
........ 
```

[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

[Rails 命名空间与嵌套资源](https://stackoverflow.com/questions/5160021/rails-namespace-vs-nested-resource)

# c# - 如何从 2 个 XML 文件中删除重复元素？

> ID：10235085
> 
> 赞同：0
> 
> 时间：2012-04-19T19:09:10.973
> 
> 标签：c#, xml, linq

我有一个要解析到我的数据库的 XML，这个 XML 大小约为 10MB，它包含数百万个元素。

每 30-60 秒更新一次，但只有几个元素，而不是全部。

为了以最快的方式将其解析到数据库中，我开发了一个函数来删除 2 个 XML 文件中的重复元素，代码如下：

```
XDocument doc2 = XDocument.Parse(tempDoc.ToString());

var doc1 = new XDocument();
try
{
doc1 = XDocument.Load(bookieName + ".xml");
}
catch
{ }

try
{
var dict1 = doc1.Descendants("event").Select(el => el.ToString()).ToList();
var dict2 = doc1.Descendants("event").Select(el => el.ToString()).ToList();

foreach (var elem in dict1)
{
    if (dict2.Contains(elem))
    {
    if (dict2.Find(x => x == elem).ToString() == dict1.Find(x => x == elem).ToString())
    {
        doc2.Descendants("event").Where(x => x.ToString() == elem).Remove();
    }
    }
}
}
catch (Exception e)
{
Console.WriteLine(e.Message);
}

return doc2; 
```

问题是，它适用于小型 XML 文件，但对于大型 XML 文件 (10MB)，它需要 100% 的 CPU 2-5 分钟。

你知道我该如何改进它并让它变得更好吗？

我有点绝望。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:20:57.787

您可以通过在添加元素之前检查该元素是否存在于数据库中来解决。

并且您想使用 xml 阅读器，以便在阅读时进行解析（以获得最佳性能）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T19:29:40.063

看起来你正在与两件事作斗争：

1.  对于此类任务，XML 是一个糟糕的选择（但我知道这可能不是您的选择）
2.  将整个文档读入`XDocument`(or `XmlDocument`) 是昂贵且不必要的

要摆脱 (2)，请尝试使用较低级别的方法`XmlReader`（可能还不够），或者使用 Java-nese`SAX`或 Perl-ish等更低级别的方法，它们可以在`XML:Twig`不构建文档结构的情况下为您提供基于事件的 XML 解析 -~~但是我不知道.net 的此类库。~~有一个[用于 .NET 的 SAX 解析器端口](http://saxdotnet.sourceforge.net/)，但我不知道它有多好。

当然，您可以节省很多时间来保存以前解析过的文档中的数据并只解析新的（但我相信您知道这一点）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T20:33:25.020

您现在要做的是，对于 dict1 中的这些数百万个事件中的每一个，您迭代 dict2 中的数百万个事件，将 dict1 中的每个事件与 dict2 中的每个事件进行比较。这使得成千上万的比较！这不是必需的。将所有事件从第一个 XML 放入字典。然后对于第二个 XML 中的每个事件，查看字典中第一个 XML 中是否也存在相同的事件。如果是，请将其删除。在字典中搜索比在第一个 XML 中搜索数百万个事件要快得多，并且也会使您的程序更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T05:10:30.643

听起来您只希望删除其中`doc2`也存在的元素`doc1`，而不是相反。

您面临的问题是您执行的搜索效率非常低。如果您有几百万条记录，那么您实际上是在搜索几百万条*平方*记录。

相反，您应该使用字典而不是列表来大大加快您的算法。

试试这个：

```
var dict1 = doc1.Descendants("event").ToDictionary(x => x.ToString(), x => x);
var dict2 = doc2.Descendants("event").ToDictionary(x => x.ToString(), x => x);

var xs = dict1.Keys.Intersect(dict2.Keys).Select(x => dict2[x]);

foreach (var x in xs)
{
    x.Remove();
}

return doc2; 
```

对，就是那样。我已经在一些虚拟数据广告上对此进行了测试，它运行良好。

文档1：

```
<doc>
  <event>bar</event>
  <event>foo</event>
</doc> 
```

初始文档2：

```
<doc>
  <event>foo</event>
  <event>qaz</event>
</doc> 
```

最终文档2：

```
<doc>
  <event>qaz</event>
</doc> 
```

# .net - 在多个串行端口上编写 Zaber 设备脚本

> ID：10235090
> 
> 赞同：0
> 
> 时间：2012-04-19T19:09:36.773
> 
> 标签：.net, serial-port, motion, zaber

是否可以将 Zaber 设备连接到多个串行端口并通过单个脚本控制它们？该脚本在[Zaber Console](http://www.zaber.com/wiki/Software/Zaber_Console)中运行，并且应该能够协调任一端口上的设备之间的运动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:09:55.027

是的，您可以在脚本中打开更多串行端口。您只需复制我们的 Zaber 控制台程序通常为您执行的所有配置。串口打开后，就可以正常使用会话对象了。要协调两个设备之间的移动，您可以使用对话主题对象来等待响应。有关更多详细信息，请阅读 Zaber 库帮助文件。您可以在脚本编辑器的帮助菜单中找到它。

```
// Example C# script showing how to open a second serial port and coordinate 
// moves between the two.
#template(methods)

public override void Run()
{
    // First port is the one that Zaber Console has already opened.
    var portFacade1 = PortFacade;
    // Now, we're going to open COM2 in the script.
    // The using block makes sure we don't leave it open.
    using (var portFacade2 = CreatePortFacade())
    {
        portFacade2.Open("COM2");

        // Start a conversation with a device on each port.
        // Note that the device numbers can be the same because they're on
        // separate ports.
        var conversation1 = portFacade1.GetConversation(1);
        var conversation2 = portFacade2.GetConversation(1);

        while ( ! IsCanceled)
        {
            MoveBoth(conversation1, conversation2, 0);
            MoveBoth(conversation1, conversation2, 10000);
        }
    }
}

private void MoveBoth(
    Conversation conversation1, 
    Conversation conversation2, 
    int position)
{
    // Start a topic to wait for the response
    var topic = conversation1.StartTopic();
    // Send the command using Device.Send() instead of Request()
    // Note the topic.MessageId parameter to coordinate request and response
    conversation1.Device.Send(
            Command.MoveAbsolute, 
            position, 
            topic.MessageId);

    // While c1 is moving, also request c2 to move. This one just uses
    // Request() because we want to wait until it finishes.
    conversation2.Request(Command.MoveAbsolute, position);

    // We know c2 has finished moving, so now wait until c1 finishes.
    topic.Wait();
    topic.Validate();
}

private ZaberPortFacade CreatePortFacade()
{
    var packetConverter = new PacketConverter();
    packetConverter.MillisecondsTimeout = 50;
    var defaultDeviceType = new DeviceType();
    defaultDeviceType.Commands = new List<CommandInfo>();
    var portFacade = new ZaberPortFacade();
    portFacade.DefaultDeviceType = defaultDeviceType;
    portFacade.QueryTimeout = 1000;
    portFacade.Port = new TSeriesPort(
        new System.IO.Ports.SerialPort(), 
        packetConverter);
    portFacade.DeviceTypes = new List<DeviceType>();
    return portFacade;
} 
```

# c# - 如果启动的进程打开，应用程序退出后套接字不会关闭

> ID：10235093
> 
> 赞同：7
> 
> 时间：2012-04-19T19:09:39.480
> 
> 标签：c#, .net, sockets

我的 C# .net 应用程序当前执行以下操作（除其他外）：

1.  创建一个在特定端口上打开套接字并等待指令的线程。
2.  消息进来，套接字线程读取消息并引发事件。
3.  事件处理程序调用必要的函数来解析消息并执行必要的操作，例如启动应用程序。
4.  指定的外部“应用程序”异步启动。

当我的应用程序重新启动，但外部应用程序没有关闭时，套接字似乎永远不会关闭。然后，当我再次尝试在该端口上启动通信时，出现错误。但是，只要我关闭外部应用程序，我就可以在该端口上打开一个套接字。

我的程序似乎没有正确关闭。它应该在退出时杀死套接字，但是当外部进程正在运行时，套接字永远不会关闭。

有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-19T19:26:21.310

This is just a stab because I have seen how you're starting the external process. If you're creating a Process object, my guess is you're not setting:

```
ProcessStartInfo.UseShellExecute = true; 
```

If UseShellExecute is set to false, the child process will inherit open socket handles from the parent process. This will keep your socket open even if the parent application is closed.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T19:23:34.913

从我在[这里](http://www.davidmoore.info/2011/06/21/when-system-diagnostics-process-creates-a-process-it-inherits-inheritable-handles-from-the-parent-process/)发现的情况来看，我的怀疑可能得到证实，这是新进程从父进程继承句柄的情况，从而导致了您的问题。

看起来您只需从该链接复制/粘贴代码，即可直接调用带有标志集的 Windows CreateProcess API，以免继承句柄。

另一个单独的想法是编写一个中间启动程序，该程序获取命令行信息，然后启动然后退出。这种额外的间接性可能会让您毫不费力地到达您需要的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T19:15:33.390

您也许可以使用 using 关键字解决此问题

```
using (Socket socket = new Socket()) {
//The code
} 
```

其他应用程序是否完全使用套接字？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T19:25:00.640

The first thing is to take a look on the socket state when the application is closed. The socket could be in the TIME_WAIT state that means that it will wait for some time in order to make sure that no other messages will be received. You can read about that here: [http://www.isi.edu/touch/pubs/infocomm99/infocomm99-web/](http://www.isi.edu/touch/pubs/infocomm99/infocomm99-web/) Now the TIME_WAIT state will be generated on the socket according to which of them initiated the connection termination procedure. So if for some reason your socket perform the close action in the server site then in the server site ( in the server's port ) the socket will change the state to the TIME_WAIT, so if you restart your server application during the socket is in TIME_WAIT a new socket will fail to bind to the listening port, I thing that this is the problem you met.

# java - 根据CPU时钟测量时间？

> ID：10235094
> 
> 赞同：2
> 
> 时间：2012-04-19T19:09:40.303
> 
> 标签：java, performance

我读过一些低延迟技术论文，他们通过 CPU 测量时序，因为它更准确。

通常在Java中我会使用：

```
System.nanoTime() 
```

在 C++ 中，我相信我曾经使用过一种性能计数器方法，我在网上发现它可以精确到纳秒。它使用 LARGE_INTEGER，分配给您希望测量的准确度，然后通过引用传递给 QueryPerformanceCounter() 并返回除以频率的答案。

是否有任何 Java 等效代码来根据 CPU 测量时间，还是必须使用某种 PInvoke？

编辑：

[https://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCYQFjAA&url=http%3A%2F%2Fdisruptor.googlecode.com%2Ffiles%2FDisruptor-1.0.pdf&ei= ImmQT5WQMOaW0QWW2sTwAQ&usg=AFQjCNEeGmYXzJa8huMdRGN2p4n8YH-jfg](https://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCYQFjAA&url=http%3A%2F%2Fdisruptor.googlecode.com%2Ffiles%2FDisruptor-1.0.pdf&ei=ImmQT5WQMOaW0QWW2sTwAQ&usg=AFQjCNEeGmYXzJa8huMdRGN2p4n8YH-jfg)

> 要以这种精度水平计时，必须使用来自 CPU 的时间戳计数器。我们选择了具有不变 TSC 的 CPU，因为旧处理器会因省电和睡眠状态而受到频率变化的影响。

我对 Windows 和 Linux 的答案很感兴趣，但如果人们能解释他们的答案是否特定于其中一个，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T19:50:26.623

System.nanoTime() 可以有一个快速的纳秒分辨率计时器，具体取决于操作系统。在某些操作系统上，这与 20 ns 一样快。

在这个库中，我使用了 RDTSC，因为 RHEL 5.x 不是速度很快的操作系统之一。:( [https://github.com/peter-lawrey/Java-Thread-Affinity](https://github.com/peter-lawrey/Java-Thread-Affinity)在快速 PC 上耗时不到 10 ns。

使用 cpu 计数器的问题在于它在不同的套接字上是不同的。如果你的程序只在一个套接字上运行，这不是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T21:09:38.437

微基准测试有几个可能被忽视的内在变量

*   垃圾回收的Java效果
*   JIT 优化的 Java 效果需要一些时间来“预热”
*   Java 目标虚拟机
*   Java VM 设置（-Xnnnn 设置，以及客户端与服务器模式）
*   目标操作系统差异
*   目标 CPU 差异
*   quiescence：CPU在后台多任务处理其他事情有多忙
*   基准代码本身的开销

像[Caliper Micro-benchmarking 框架](http://code.google.com/p/caliper/)这样的工具试图解决上述部分但不是全部问题。我什至不确定它试图做什么。但至少它所做的主要明显的事情是尝试预热 JIT，运行基准代码固定次数并平均迭代，并重复该练习几次，直到运行之间有一些可接受的容差差异。它还捕获和记录环境，以便未来的基准测试可以将苹果与苹果（而不是橙子）进行比较。它允许您使用不同的 VM 设置或程序参数轻松地重复和比较以上所有内容，并比较每个结果。

也就是说，不曲解结果，或者更可能不让*其他人*曲解结果，仍然是一项棘手且充满危险的努力。

**编辑**（添加）实际上 JIT 可以双向切割。虽然您通常希望 JIT 预热，但它也可以优化掉您希望作为基准测试的一部分包含的内容。因此，您必须以这样一种方式编写基准测试，以通过强制每个循环以对您所测量的内容重要/重要的方式实际变化来预测和防止循环不变量之类的事情被优化掉。

# c# - 带有 NHibernate 分页的 MVC 3

> ID：10235103
> 
> 赞同：1
> 
> 时间：2012-04-19T19:10:11.647
> 
> 标签：c#, asp.net-mvc-3, nhibernate, pagination

我找到了一些关于如何使用 NHibernate 进行分页的问题和答案，我的代码如下：

```
public virtual List<T> GetPageResults(int pageIndex, int pageSize)
        {
            using (var session = SessionFactory.OpenSession())
            {
                var returnVal =
                    session.CreateCriteria<T>().SetFirstResult(pageIndex).SetMaxResults(pageSize).Future
                        <T>().OrderByDescending(x => x.Id).ToList();

                return returnVal;
            }
        } 
```

如您所见，我正在使用 OrderByDescending 进行分页，我想先显示最后一项。这是这样做的好方法吗？

另外，有没有我可以使用的框架可以轻松地为我提供分页，我看到很多包，但除了 SO 问题之外，它们中的大多数几乎没有文档。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T21:54:29.947

您可以使用 QueryOver 编写此查询：

```
session.QueryOver<T>()
  .OrderBy(t => t.Property).Desc
  .Skip(pageIndex).Take(pageSize)
  .List(); 
```

# c# - 如何基于应用程序计时器在服务器上执行方法？

> ID：10235105
> 
> 赞同：0
> 
> 时间：2012-04-19T19:10:15.420
> 
> 标签：c#, asp.net-mvc, iis

我是一个相对较新的开发人员，但我正在开发一个聚合多个 XML 文件的应用程序。对于一个特定的控制器，大约 25 次调用远程基于 REST 的服务，完成所有调用、解析数据并返回视图大约需要 5-7 秒。我将控制器的结果缓存 30 分钟。

我要避免的是用户在缓存过期时必须等待 7 秒。所以，我的想法是每半小时执行一个方法，将 XML 文件聚合到一个本地文件中，然后可以对其进行查询。因此，控制器将不再直接调用服务，而只是调用存储的文件。

我可以远程访问 IIS，所以我不能以这种方式设置任务。它必须是一个应用层解决方案。建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T20:09:49.263

您可以使用 Quartz.NET，一种调度服务。它可以在嵌入式模式下运行（在您的 IIS 应用程序池的进程下运行，应该很容易与您的应用程序一起部署），也可以作为独立服务运行。如果这很重要，后者会更加可靠，因为应用程序池会频繁回收（默认情况下每 29 小时，或者在某个空闲时间之后，或者如果服务器重新启动，或者任何数量的事件）......并且您需要手动访问该站点以启动应用程序池（除非您自动启动）。

但是，听起来您的任务并不那么重要……所以我强烈考虑使用嵌入式 Quartz.net 以下是一些示例：

*   [http://quartznet.sourceforge.net/tutorial/index.html](http://quartznet.sourceforge.net/tutorial/index.html)
*   [如何在 ASP.NET 中使用 Quartz.net](https://stackoverflow.com/questions/1356789/quartz-net-with-asp-net)
*   [http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)

您还可以考虑 Windows 任务计划程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T19:16:27.103

从理论上讲，您可以在 Global.asax 中启动几个线程，它们将能够异步获取数据，然后将它们放入 ASP.NET 缓存中。只需确保您创建的线程不会从 ASP.NET 的线程池中弹出。您应该可以通过将任务状态设置为`LongRunning`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T19:14:05.857

这不是好的设计，但您可以通过 windows 服务将 xml 文件创建到本地文件夹，并且您的 asp.net mvc 应用程序访问 windows 服务编写的 xml 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T19:19:14.743

我会考虑创建一个在您的服务器上运行并为您处理更新的 Windows 服务（不是 Web 服务）。它可以将后处理的数据存储在您的控制器将调用的数据库中。这将使 Web 应用程序与解析数据的工作分离，并允许您在服务上使用计时器并保持 Web 应用程序更清洁。

# url - 肥皂原始请求测试工具

> ID：10235111
> 
> 赞同：1
> 
> 时间：2012-04-19T19:10:59.120
> 
> 标签：url, testing, soap, request

我正在寻找一个简单的测试工具，它可以发送我可以输入到我输入的 URL 的原始肥皂请求。我找到了几个使用 WSDL 并提供特殊测试等的工具（如 SOAPUI），但我不需要这些（或者至少我需要一些关于如何使用其中一种工具来满足我需要的教程）。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:31:52.357

1.  选择一个可以提交 http/s 请求并允许您添加 http 标头的简单工具
2.  确保它通过 SOAP 提交所需的 HTTP 标头（如 soapAction 等）
3.  确保将有效负载封装在 SOAP 信封中

# linux - Proftpd 完全隐藏目录

> ID：10235113
> 
> 赞同：0
> 
> 时间：2012-04-19T19:11:11.697
> 
> 标签：linux, ubuntu, ftp, hide, ftp-server

在我的 ftp 树中有一个我不想通过匿名访问的目录。

我能够隐藏有问题的目录和目录中的所有文件。

我无法做的是阻止某人导航到目录。

因此，如果有人导航到 ftp.site.com，他们将不会看到“传入”目录。但是，如果他们导航到 ftp.site.com/incoming 页面加载。

这些文件是隐藏的，但这种方式首先取消了隐藏“传入”目录的意义。

任何想法将不胜感激，如果我遗漏了什么，请告诉我。

这是我的配置。

```
drwxr-xr-x  29 john     ftpgroup 4096 2012-04-17 22:22 incoming

<Anonymous /home/ftp/ftp.site.com>
    User  ftp
    Group ftp
    UserAlias    anonymous ftp

    <Directory incoming/>
        HideGroup ftpgroup

        <Limit READ DIRS>
            IgnoreHidden on
        </Limit>
    </Directory>
</Anonymous> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:43:21.650

以下行不应该拒绝对该目录的任何访问。将以下行添加到您的配置中。

**`<Directory incoming`/*>
AllowOverwrite no
`<Limit READ`>
DenyAll
`</Limit`>
`</Directory`>**

谢谢查克里

# java - 如何检测 Linux 操作系统是使用 KDE 还是 Gnome 环境

> ID：10235117
> 
> 赞同：7
> 
> 时间：2012-04-19T19:11:16.827
> 
> 标签：java, linux, desktop-application, gnome, kde

我需要以编程方式确定 Linux 上正在运行的窗口管理器。

如何使用它的伪代码：

```
if(WindowManagerOfOS.isKDE()){
      do.anyThing();
} 
```

我怎样才能做到这一点？甚至可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-19T19:16:52.870

```
System.getenv("XDG_CURRENT_DESKTOP") 
```

`"GNOME"`在我的机器上返回。在基于 KDE 的机器上试一试。

# 也可以看看

*   [确定正在运行什么窗口管理器？](https://askubuntu.com/questions/72549)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T21:39:55.833

官方的回答是你不应该关心。两款台式机均符合现有标准。两者都可以运行彼此的软件。你想做什么？如果它是您正在寻找的特定服务，默认情况下只有一个发行版提供，那么您应该寻找它。

# python - 循环一个python脚本

> ID：10235124
> 
> 赞同：0
> 
> 时间：2012-04-19T19:11:53.317
> 
> 标签：python, for-loop

我正在使用一个适合数据集的行并输出一些适合参数的脚本。运行 fitter 的命令如下所示：

`fitter = Fitter(hdf2.root.OM01, plot=False)`.

我想循环这个命令，以便它输出文件的拟合参数`'hdf2.01', 'hdf2.02', ... 'hdf2.50'`

我怎样才能循环这段代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T19:35:08.750

如果我理解正确，您有一个具有编号属性的对象（`OM01`通过`OM50`）。您可以使用循环生成这些属性名称，并使用[getattr](http://docs.python.org/library/functions.html#getattr)从对象中检索它们。

如果您的对象被称为`root`，就像在您的评论中一样，您可以执行以下操作：

```
parameters = []
for i in range(1, 51):
    parameter = getattr(root, 'OM%02d' % i)
    parameters.append(parameter)

# now all of your parameters are in the parameter array 
```

或者，如果你喜欢列表推导（谁不喜欢）：

```
parameters = [getattr(root, 'OM%02d' % i) for i in range(1, 51)] 
```

我想您需要将这些参数与 一起使用`Fitter`，您可以执行以下操作：

```
results = []
for i in range(1, 51):
    parameter = getattr(hdf2.root, 'OM%02d' % i)
    result = Fitter(parameter, plot=False)
    results.append(result) 
```

**编辑**：如果您的文件只有名称“hdf2.root.OM01”、“hdf2.root.OM02”等，您可以这样做：

```
results = []
for i in range(1, 51):
    filename = 'hdf2.root.OM%02d' % i
    result = Fitter(filename, plot=False)
    results.append(result) 
```

# linux - Linux 自定义可执行文件全球可用

> ID：10235125
> 
> 赞同：37
> 
> 时间：2012-04-19T19:12:00.803
> 
> 标签：linux, ubuntu

我以 zip 格式下载了 Google App Engine，将其解压缩到 /usr/local/google_engine

现在我需要一直从那个文件夹运行一个 python 脚本。无论我的路径在哪里，如何使其可用？即：当我在 /usr/something/ 中时，我可以通过调用 script.py 来执行脚本？

我可以在不使用别名或不使用 bash 脚本的情况下执行此操作吗？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-04-19T19:16:08.477

编辑您的 .bashrc 以在 PATH 环境变量中添加所需的目录。

```
export PATH=/usr/local/google_app_engine/bin:$PATH 
```

然后，要么启动新终​​端，要么做，

```
source ~/.bashrc 
```

现在尝试从任何地方运行脚本。

另一种你可以在不接触 .bashrc 的情况下做到这一点的方法是通过执行类似的操作来创建符号链接，

```
sudo ln -s /usr/local/google_app_engine/bin/script.py /usr/bin/script.py 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-03-21T19:41:01.057

有两种方法可以做到这一点。正如上面提到的 Kal，您可以通过添加将文件夹添加到路径变量

```
export PATH=/usr/local/google_app_engine/bin:$PATH1 
```

到你的 .bashrc。或者，如果该命令只是一个脚本，您可以将其移动或复制到`/usr/bin`. 这将使它可以作为命令从任何地方访问。

如果您想创建一个命令来执行此操作而不移动，`script.py`那么您可以创建一个使用固定路径调用它的 bash 文件，然后将其放入`/usr/bin`

# javascript - 在输入数组的 split() 和 substring() 之后显示在 textarea 中

> ID：10235127
> 
> 赞同：0
> 
> 时间：2012-04-19T19:12:13.063
> 
> 标签：javascript, arrays, textarea

html代码：

```
<textarea id="TaAll" rows=11>
 </textarea>

<input type="button" Value="Get Results" 
 onclick="doit();"/>

<textarea id="Tanext" rows=11>
  </textarea> 
```

javascript代码：

```
window.doit = function ()
{
console.log(document.getElementById("TAall").value);
var containertext=document.getElementById("TAall").value.split("\n");  
    for(var i=0;i< containertext.length;i++)
      {
       var temp=containertext[i+1].split(" "); 
       sbray[i]=eval(temp[1].substring(1,temp[1].length)); 
       op[i]=eval(temp[2].substring(1,temp[2].length)); 

       } 
 Tb = document.frmone.Tanext;

 Tb.value = Tb.value +("\n")+sbray.join("\n")+ ("\n")+"Test";

keysbyValue(); 
} 
```

嗨，在上面的代码中，我有 2 个文本区域。我在 TAall textarea 中写入输入并将其拆分并将其子字符串保存在其他数组 sbray [] 和 op [] 中。在 textarea 中显示 containertext[] 之前的代码工作正常，但是当我尝试在其他 textarea Tbnext 中显示生成的 sbray[] 时，它不起作用。我使用的输入如下，我必须使用这种格式的输入。我想拆分数组并保存所有编号的子字符串。在 sbray[] 中附加左“c”，在 op[] 中附加右“c”：

```
10
1 c1 c2 //i want to save and split the array starting from this line.
2 c3 c4
3 c5 c12
4 c6 c7
5 c8 c11
6 c9 c10
7 c13 c15
8 c14 c16
9 c17 c18
10 c19 c20 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:41:21.613

你传给`TAall`了`document.getElementById`，但`id`就是`TaAll`。你会得到一个错误，因为你要求的对象不存在。

`0`此外，您正在从to迭代`containertext.length-1`，但您要求`containertext[i+1]`. 由于数组中的最大索引是`array.length-1`（基于 0 的索引），因此`containertext[containertext.length]`会出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T19:27:39.283

document.getElementById**区分大小写**。你`<textarea>`的 id 是`TaAll`，但你正试图得到它`document.getElementById("TAall")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T19:27:59.097

`document.getElementById`区分大小写，更改`TAall`为`TaAll`，它应该工作得更好。

还有一些其他错误，你不应该使用 eval，因为例如 temp 的范围丢失了。

我试图让你的脚本工作，你可以在这里检查它的行为：http: [//jsfiddle.net/KjYpX/](http://jsfiddle.net/KjYpX/)

编辑：

我终于明白你想要什么了，你可以试试这里的脚本：http: [//jsfiddle.net/KjYpX/1/](http://jsfiddle.net/KjYpX/1/) 它是用一种不那么脏的方式制作的。

这里是解析奇怪格式的函数的详细信息：

```
var parseMyFormat = function(input){ // we declare a new function
  var sbray=[], op=[]; // declaration of two temporary array
  (input=input.split('\n')).shift(); // we split input in an array called input containing all lines, and then we shift it, it means we remove the first element.

  while(o=input.shift()){ // now, we are gonna make a loop, shift remove the first element but also return it, so we save it in the o variable
    sbray.push((o = o.match(/c(\d+) c(\d+)$/))[1]); //we apply a regexp on o to get the two decimal (\d) ids, it returns an array containing for example ['c1 c2','c1','c2'], we save this array in o (because we will not use o anymore), and we push 'c1' in sbray
    op.push(o[2]); // we push 'c2' in op
  }

  return [sbray, op]; // finally we return both arrays so that you can access them easily
} 
```

# java - 使用 Swing 按钮重置应用程序

> ID：10235130
> 
> 赞同：2
> 
> 时间：2012-04-19T19:12:41.920
> 
> 标签：java, swing, user-interface, jbutton, tic-tac-toe

尝试使用“再次播放”JButton 重置按钮。

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;
import java.awt.Toolkit;
import java.awt.Image;

public class HW4_TicTacToePanel extends JFrame implements ActionListener {

// declare variables and arrays
    private int counter = 0;
    private String letter;
    private boolean win = false;
    private int[][] winConditions = new int[][]{
        {0, 1, 2}, {3, 4, 5}, {6, 7, 8}, //Horizontal wins
        {0, 3, 6}, {1, 4, 7}, {2, 5, 8}, //Vertical wins
        {0, 4, 8}, {2, 4, 6} //Diagonal wins
    };
    // JFrame Instructions
    //  private JButton buttons[] = new JButton[12];
    //  private JFrame gamewindow = new JFrame("Tic Tac Toe");
    // End JFrame
    // Panel demo
    private JPanel southPanel; //panel for replay and exit button
    private JButton[] optButtons;//Exit and replay buttons
    private JPanel centerPanel;
    private JButton[] gameButtons;//Tic tac toe squares
    private GridLayout myGridLayout;

    // End panel demo
    public HW4_TicTacToePanel() //Constructor
    {
        super("Tic Tac Toe"); //super calls the JFrame controller
        southPanel = new JPanel();// instantiate panel
        optButtons = new JButton[2];//create an array of 2 buttons
        String[] buttonNames = {"Play Again", "Exit"};

        centerPanel = new JPanel(); //instantiate panel
        gameButtons = new JButton[9];//creates an array of 9 buttons
        myGridLayout = new GridLayout(3, 3, 2, 2);

        setLayout(new BorderLayout());//set layout for JPanel
        centerPanel.setLayout(myGridLayout);//set Layout for center panel

        // add buttons to the centerPanel and add the ActionListener
        for (int i = 0; i < gameButtons.length; i++) {
            gameButtons[i] = new JButton();
            centerPanel.add(gameButtons[i]);
            gameButtons[i].addActionListener(this);
        }

        add(centerPanel, BorderLayout.CENTER); //add panel to JFrame

        // add buttons to the southPanel and add the ActionListener
        for (int i = 0; i < optButtons.length; i++) {
            optButtons[i] = new JButton(buttonNames[i]);
            southPanel.add(optButtons[i]);
        }

        //add functionality to replay and exit buttons
        optButtons[0].addActionListener(this);
        optButtons[1].addActionListener(this);

        add(southPanel, BorderLayout.SOUTH); //adds panel to JFrame
    }

    public void actionPerformed(ActionEvent a) {
        // Add Image icons
        counter++;

         //Calculate whose turn it is by using modulus to determine even or odd
    if (counter % 2 == 0) {
        letter = "O";
        Icon o = new ImageIcon(getClass().getResource("O.gif"));
        //Capture and show player input then disable button so it may not be reselected
        JButton pressedButton = (JButton) a.getSource();
        pressedButton.setIcon(o);
        pressedButton.setText(letter);
        pressedButton.setEnabled(false);
    } else if (a.getSource() == optButtons[0])
    {
        //
        //play again Instructions
        //
        System.exit(0);
    } else if (a.getSource() == optButtons[1])
    {
        System.exit(0);
    } else {
        letter = "X";
        Icon x = new ImageIcon(getClass().getResource("X.gif"));
        //Capture and show player input then disable button so it may not be reselected
        JButton pressedButton = (JButton) a.getSource();
        pressedButton.setIcon(x);
        pressedButton.setText(letter);
        pressedButton.setEnabled(false);
    }

//determine who won
        for (int i = 0; i <= 7; i++) {
            if (gameButtons[winConditions[i][0]].getText().equals(gameButtons[winConditions[i][1]].getText())
                    & gameButtons[winConditions[i][1]].getText().equals(gameButtons[winConditions[i][2]].getText())
                    & gameButtons[winConditions[i][0]].getText() != "") {
                win = true;
            }
        }

//Show victor dialog
        if (win == true) {
            JOptionPane.showMessageDialog(null, letter + " wins the game!");
            //Remove once optButtons are operational...
            System.exit(0);
        } else if (counter == 9 && win == false) {
            JOptionPane.showMessageDialog(null, "The game was a tie!");
            //Remove once optButtons are operational...
            System.exit(0);
        }
    }

    public static void main(String[] args) {
        HW4_TicTacToePanel starter = new HW4_TicTacToePanel();
    }
} 
```

对于再次播放按钮，我正在考虑重置计数器并取消存储在游戏按钮中的任何值。我会在玩家作为 else if 语句移动时在同一个循环中实现这一点。

我一直在研究这个问题，但无济于事，有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T02:24:42.717

有那么多退出按钮，你只能退出。以下是一些代码改进：

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;
import java.awt.Toolkit;
import java.awt.Image;

public class HW4_TicTacToePanel extends JFrame implements ActionListener {
    private int counter = 0;
    private int [] [] winConditions = new int [] [] {
        {0, 1, 2}, {3, 4, 5}, {6, 7, 8}, // Horizontal wins
        {0, 3, 6}, {1, 4, 7}, {2, 5, 8}, // Vertical wins
        {0, 4, 8}, {2, 4, 6} // Diagonal wins
    };
    private JButton [] gameButtons;

    public HW4_TicTacToePanel ()
    {
        super ("Tic Tac Toe");
        JPanel southPanel = new JPanel ();
        JButton [] optButtons = new JButton [2];
        String [] buttonNames = {"Play Again", "Exit"};
        JPanel centerPanel = new JPanel (); 
        gameButtons = new JButton [9];
        GridLayout myGridLayout = new GridLayout (3, 3, 2, 2);
        setLayout (new BorderLayout ());
        centerPanel.setLayout (myGridLayout);
        for (int i = 0; i < gameButtons.length; i++) {
            gameButtons [i] = new JButton ();
            centerPanel.add (gameButtons [i]);
            gameButtons [i].addActionListener (this);
        }

        add (centerPanel, BorderLayout.CENTER); 
        for (int i = 0; i < optButtons.length; i++) {
            optButtons [i] = new JButton (buttonNames [i]);
            southPanel.add (optButtons [i]);
            optButtons [i].addActionListener (this);            
        }
        add (southPanel, BorderLayout.SOUTH); 
        setSize (300, 300);
        setLocation (200, 200);
        setVisible (true);
    }

    private static Icon [] icon = new ImageIcon [] {
        new ImageIcon ("/home/stefan/some/images/mini.null.jpg"), 
        new ImageIcon ("/home/stefan/daten/some/images/x.gif")};
    private static String [] letter = new String [] {"x", "o"}; 

    public void actionPerformed (ActionEvent a) {
        // Add Image icons
        counter++;
        boolean win = false;
        String cmd = a.getActionCommand ();
        if (cmd.equals ("Play Again"))
        {
            dispose ();
            HW4_TicTacToePanel.main (null); 
        } 
        else if (cmd.equals ("Exit"))
        {
            dispose ();
        } else {
            // Calculate whose turn it is by using modulus to determine even or odd
            JButton pressedButton = (JButton) a.getSource ();
            pressedButton.setIcon (icon [counter%2]);
            pressedButton.setText (letter[counter%2]);
            pressedButton.setEnabled (false);
        }
        //determine who won
        for (int i = 0; i <= 7; i++) {
            if (gameButtons [winConditions [i] [0]].getText ().equals (gameButtons [winConditions [i] [1]].getText ())
            & gameButtons [winConditions [i] [1]].getText ().equals (gameButtons [winConditions [i] [2]].getText ())
            & gameButtons [winConditions [i] [0]].getText () != "") {
                win = true;
            }
        }
        //Show victor dialog
        if (win == true) {
            JOptionPane.showMessageDialog (null, letter[counter%2] + " wins the game!");
        } else if (counter == 9 && win == false) {
            JOptionPane.showMessageDialog (null, "The game was a tie!");
        }
    }

    public static void main (String [] args) {
        new HW4_TicTacToePanel ();
    }
} 
```

一些提示：

*   不要在注释中重复您在代码中编写的内容。
*   不要评论，每个Java程序员都应该知道（构造函数长什么样，属性实例化是什么。
*   仅在必须使用的地方使用属性。JPanel 通常只在 ctor 中使用——它们不需要在其他地方可以访问。
*   如果您不引用变量（main 中的启动器） - 不要使用引用。
*   为什么不将 addActionListener 放入循环中？
*   `(a.getSource() == optButtons[0])`什么是 optButtons[0]？如果您`a.getActionCommand ().equals ("Play Again")`改为使用，则代码会自行记录。
*   使用数组是个好主意。更进一步！
*   setSize/...location/...visible - 没有它你怎么工作？
*   请享用。:)

# multithreading - 完成网络请求后显示启动屏幕并隐藏

> ID：10235131
> 
> 赞同：0
> 
> 时间：2012-04-19T19:12:42.953
> 
> 标签：multithreading, httpwebrequest, windows-phone-7.1, splash-screen

当我的应用程序启动时，我想显示启动画面并创建 httpwebrequest，当请求完成时，隐藏启动画面并显示主页。

这是我的启动画面：

```
 private void ShowPopup()
    {
        this.popup = new Popup();
        this.popup.Child = new PopupSplash();
        this.popup.IsOpen = true;
        StartLoadingData();
    }

    private void StartLoadingData()
    {
        backgroundWorker = new BackgroundWorker();
        backgroundWorker.DoWork += new DoWorkEventHandler(backgroundWorker_DoWork);
        backgroundWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(backgroundWorker_RunWorkerCompleted);
        backgroundWorker.RunWorkerAsync();
    }

    void backgroundWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        this.Dispatcher.BeginInvoke(() =>
            {
                this.popup.IsOpen = false;
            }
        );
    }

    void backgroundWorker_DoWork(object sender, DoWorkEventArgs e)
    {

        using (var db = new ListDataContext(ListDataContext.DBConnectionString))
        {
            if (!db.DatabaseExists())
            {
                db.CreateDatabase();
            }
        }
        Thread.Sleep(4000);
    } 
```

这是我的httpwebrequest：

```
 private void main_WebResponseAvailableEventHandler(object sender, string response, string url)
    {
            SearchResult result = new SearchResult(response, url);

            PhoneApplicationService.Current.State["result"] = result;
            this.NavigationService.Navigate(new Uri("/SearchPivotPage.xaml", UriKind.Relative));
    }

    private void HandleWebResponse(IAsyncResult asyncResult)
    {
        WebRequestState state = (WebRequestState)asyncResult.AsyncState;
        HttpWebRequest request = state.Request;
        string url = request.RequestUri.ToString();
        state.Response = (HttpWebResponse)request.EndGetResponse(asyncResult);

        if (state.Response != null)
        {
            StreamReader reader = new StreamReader(state.Response.GetResponseStream());
            StringBuilder sb = new StringBuilder();
            while (!reader.EndOfStream)
                sb.Append(reader.ReadLine());
            string text = sb.ToString();
            Dispatcher.BeginInvoke(() =>
            {
                if (WebResponseAvailable != null)
                {
                    WebResponseAvailable(this, text, url);
                }
            });
        }
    } 
```

在构造函数 MainPage()

```
 ....
        ShowPopup();
        HttpWebRequest movieRequest = (HttpWebRequest)WebRequest.Create(url);
        WebRequestState state = new WebRequestState();
        state.Request = movieRequest;
        movieRequest.BeginGetResponse(new AsyncCallback(HandleWebResponse), state);
        WebResponseAvailable += main_WebResponseAvailableEventHandler;
        .... 
```

有没有办法我可以做我想做的事？或者两者都在其他线程中这是不可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:09:45.673

`SplashScreenPage.xaml`您可以通过添加新页面而不是 SpalshScreen.jpg 文件来创建假的 splashScreen 。如果您删除`SplashScreen.jpg`文件，则应该加载的第一个页面（来自 App.xaml）将在`SplashScreenPage.xaml`那里，您可以在那里执行任何操作，如您在上面指出的 webrequest。一旦 webrequest 结束，然后导航到 mainPage.xaml，然后调用`RemoveBackEntry`方法以`MainPage.xaml`在 BackStack 中创建第一个页面条目。

问候，

# regex - 使用 ASP Classic 查找和替换

> ID：10235135
> 
> 赞同：0
> 
> 时间：2012-04-19T19:13:02.520
> 
> 标签：regex, asp-classic, vbscript

我在 ASP VB 中有一个函数。我需要替换其中的确切单词。例如，我有一个类似“wool|silk/wool|silk”的字符串。我只想替换丝绸而不是丝绸/羊毛。

```
' "|" is a devider
cur_val = "wool|silk/wool|silk"
cur_val_spl = Split("wool|silk/wool|silk", "|")
key_val = "silk"
For Each i In cur_val_spl
    If i = key_val Then
        cur_val = Replace(cur_val, ("|" & i), "")
        cur_val = Replace(cur_val, i, "")
    End If
Next
Response.Write(cur_val) 
```

在这种情况下，我的结果将是“羊毛/羊毛”，但我真正想要的是这个“羊毛|丝绸/羊毛”。
我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T19:38:37.387

你应该在你去的时候建立一个新的字符串

```
' "|" is a devider
cur_val = "wool|silk/wool|silk"
cur_val_spl = Split("wool|silk/wool|silk", "|")
result = ""
key_val = "silk"

addPipe = false
For Each i In cur_val_spl
    If i <> key_val Then
        if addPipe then
            result = result & "|"
        else 
           addPipe = true
        end if
        result = result & i
    End If
Next

Response.Write(result) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T23:22:18.720

你可以用正则表达式来做，但这更短

```
cur_val = "wool|silk/wool|silk"
Response.Write left(mid(replace("|"&cur_val&"|","|wool|","|silk|"),2),len(cur_val))
'=>silk|silk/wool|silk 
```

太糟糕了，你已经接受了另一个答案 8>）

# python - 你在哪里设置芹菜任务的task_id？

> ID：10235136
> 
> 赞同：12
> 
> 时间：2012-04-19T19:13:15.840
> 
> 标签：python, django-celery, celery-task

我无法找到任何使用我自己的 task_id 设置 task_id 的示例

沿着这些路线的东西......

```
def testview1(request):
    for i in xrange(0,1000):
        result = add.delay( i, 4,task_id = i)
        print result.info
        #value = result.wait()
    return HttpResponse("Done") 

@task()
def add(task_id, x, y):
    print add.task_id
    print str(x+y)
    return x + y 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-19T22:19:58.593

delay 不支持选项，它是 apply_async 的快捷方式：

```
add.apply_async(args, kwargs, task_id=i)

add.apply_async((1, 4), task_id=i) 
```

此外，当前任务的 id 与`task.request.id`您`task.id`上面的不同。

# java - 在解析器生成器中处理迭代计数字段

> ID：10235138
> 
> 赞同：1
> 
> 时间：2012-04-19T19:13:32.377
> 
> 标签：java, parser-generator

在典型的解析器生成器情况（例如 ANTLR 或 Beaver）中，如何处理以下情况：

```
0051A2B3C4D5E
0031G2T3H 
```

它是一个 3 个字符的数字字段，它告诉您重复字段的迭代次数。

我知道有后期处理的可能性，但在某些情况下不会有用，所以我试图找出解析器是否有某种方法来处理它。如果有一个解决方案涉及在解析器读取数字字段时与它进行交互 - 不知何故告诉它根据某个产生式读取下一个 N 项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T19:34:57.787

这是否可能取决于解析器生成器。

您的词法分析器将需要了解其周围环境（上下文敏感）。您只想`Num`在一行的开头创建一个标记。在 ANTLR 中，您可以通过`getCharPositionInLine()==0`在规则前面添加谓词来做到这一点`Num`。

然后在您的解析器规则中，只要计数器大于零（计数器的值） `line`，您就需要继续使用令牌（您的双字符）。`Block``Num`

一个快速的 ANTLR 演示：

```
grammar T;  

parse
 : line* EOF 
 ;

line
@init{int n = 0;}
 : Num {n = Integer.valueOf($Num.text);} ({n > 0}?=> Block {n--;})*
 ;

Num
 : {getCharPositionInLine()==0}?=> Digit Digit Digit
 ;

Block
 : AlphaNum AlphaNum
 ;

Space
 : (' ' | '\t' | '\r' | '\n')+ {skip();}
 ;

fragment Digit : '0'..'9';
fragment Letter : 'a'..'z' | 'A'..'Z';
fragment AlphaNum : Letter | Digit; 
```

将解析您的输入：

```
0051A2B3C4D5E
0031G2T3H 
```

如下：

![在此处输入图像描述](../Images/8ecd9cf4c56e6746a8f0f677879cf35c.png)

# c# - 如何在 EF4 中按过滤后的 Max 查询进行查询和排序？

> ID：10235140
> 
> 赞同：1
> 
> 时间：2012-04-19T19:13:38.533
> 
> 标签：c#, sql-server, linq, entity-framework, entity-framework-4

上下文：EF4、C#、.NET4、SQL2008/R2

重现问题的表/实体：

*   `Account (long Id, string Name, etc.)`
*   `Order (long Id, DateTime DateToExecute, int OrderStatus, etc.)`
*   `AccountOrder (long Id, long AccountId, long OrderId)`<- 是的，一个帐户可能有多个订单，同样，一个订单可能与多个帐户相关联。
*   `OrderedItem (long Id, long OrderId, long ItemId, etc)`<- 一个订单可能有很多商品，我们希望预先加载这些商品（我意识到这会影响性能/数据大小）。

非常适合工作的伪代码（几乎是真实代码）：

```
DateTime startDateInclusive = xxxx;
DateTime stopDateExclusive = yyy;

var query = Db.Accounts.Include(a => a.AccountOrders.Select(ao => ao.Order.Ordereditems.Select(oi => oi.Item)))
              .Where(account =>
                     account.AccountOrders.Where(ao => ao.OrderStatus != 42)
                            .Max(ao => ao.DateToExecute).IsBetween(startDateInclusive, stopDateExclusive))
              .OrderBy(account =>
                       account.AccountOrders.Where(ao => ao.OrderStatus != 42)
                              .Max(ao => ao.DateToExecute));

var results = query.Take(5).ToList(); 
```

在英语中，这是寻找在一个日期范围内执行最后一个订单的下 5 个帐户。但是，也有可以取消的订单，因此我们在执行该 Max 时必须排除 42 的 OrderStatus。

问题围绕多对多表的过滤最大日期展开。一个额外的复杂性是我们需要按过滤后的最大值进行排序，并且我们必须在不破坏我们急切加载的情况下完成上述所有操作（即，连接必须通过 Where 中的投影完成，而不是使用 .Join）。我不确定如何执行此查询，而不会使结果比应有的复杂 10 倍。我不想进行连接以过滤 ao.OrderStatus/Max DateToExecute 3 次（一次用于 startDate，一次用于 stopDate，一次用于排序）。显然 IsBetween 不起作用。

**关于如何以一种相当有效的方式对生成的 SQL 执行此查询（以这种方式排序）的任何想法？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:13:35.360

在这里使用匿名类型可能会有所帮助：

```
DateTime startDateInclusive = xxxx;
DateTime stopDateExclusive = yyy;

var query = Db.Accounts
              .Select(account => new { 
                  Account = account,
                  MaxDate = account.AccountOrders.Select(ao => ao.Order).Where(o => o.OrderStatus != 42).Max(o => o.DateToExecute) 
              })
              .Where(a => a.MaxDate >= startDateInclusive && a.MaxDate < stopDateExclusive)
              .OrderBy(a => a.MaxDate)
              .Select(a => a.Account)
              .Include(a => a.AccountOrders.Select(ao => ao.Order.Ordereditems.Select(oi => oi.Item)));

var results = query.Take(5).ToList(); 
```

这是未经测试的，因为我没有任何数据源可供测试。但这可能是您需要做的最简单的方法。

# java - 从 netbeans/java 连接到 linux 服务器上的 mySQL 服务器时遇到问题

> ID：10235143
> 
> 赞同：2
> 
> 时间：2012-04-19T19:13:51.713
> 
> 标签：java, mysql, netbeans

我无法通过 netbeans 连接到托管在 linux 服务器上的 MySQL 服务器。

当通过 MySQL Workbench “Standard TCP/IP through ssh”连接时，所有这些凭据都有效。

这是我的代码：

```
public class Database {
private static final String DRIVER = "com.mysql.jdbc.Driver";
private static final String URL = "jdbc:mysql://john.myschool.edu:3306/cs3610";
private static final String USERNAME = "mbrooke";
private static final String PASSWORD = "mypass";
private Connection connection;

public Database() throws Exception{
    try{
        connect();
    }catch(SQLException e){
        if(connection !=null){
            connection.close();
        }
    }
}

//Open connection to database
private void connect() throws Exception{
    connection = null;
    Class.forName (DRIVER).newInstance ();
    connection = DriverManager.getConnection(URL,USERNAME,PASSWORD);

} 
```

}

我在以“connection = DriverManager ...”开头的行上收到带有#521 的 SQLException，但我不确定是什么导致了这个问题。驱动程序似乎已正确安装，因为在单步执行时，我通过了“Class.forName(D...”) 行，没有抛出异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T23:28:29.373

听起来您的数据库服务器没有打开端口 3306，或者您的 MySQL 凭据不允许使用远程连接。

MySQL Workbench 的[TCP/IP over SSH](http://dev.mysql.com/doc/workbench/en/wb-manage-db-connections-ssh.html)设置首先打开到 SSH 服务器的 SSH 连接，然后连接到数据库服务器（通常是`localhost`或`127.0.0.1`）。所以 MySQL 连接实际上是从 SSH 服务器发起的。因此，通过该通道连接的能力仅表明您的 java 代码*在您正在 SSH 连接的服务器上运行时可以*工作。但是在尝试从另一台机器运行代码时，您可能仍然遇到防火墙或 MySQL 权限问题。

我会尝试将 MySQL 客户端下载到您的机器上，看看您是否可以使用该方法进行连接：`mysql -h myDatabaseServer.school.edu cs3610 -u mbrooke -p'mypass'`看看是否可行。您可能会收到“连接不可用”错误或“用户 mbrooke 无权远程访问”，这应该可以让您深入了解您面临的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T21:52:06.097

试试不带结尾的斜线

URL = "jdbc:mysql://john.myschool.edu:3306/cs3610/";

像

URL = "jdbc:mysql://john.myschool.edu:3306/cs3610";

或者您有一个名为“cs3610/”的数据库

# java - Webservice 响应命名空间与 WSDL 定义不匹配

> ID：10235145
> 
> 赞同：3
> 
> 时间：2012-04-19T19:13:56.417
> 
> 标签：java, web-services, wsdl, websphere, jax-ws

我正在尝试使用 JAX-WS 连接到 Web 服务，它的 WSDL 定义与从 Web 服务接收到的实际响应不完全匹配。基本上，WSDL 表明所有元素都是“urn:HPD_IncidentInterface_WS”名称空间的一部分，但实际响应元素位于“urn:Port”名称空间中。这会导致 JAX-WS 抛出以下异常：

> com.sun.xml.internal.ws.streaming.XMLStreamReaderException：意外的 XML 标记。预期：{urn:HPD_IncidentInterface_WS}HelpDesk_QueryList_ServiceResponse 但发现：{urn:Port}HelpDesk_QueryList_ServiceResponse

我解决此问题的计划是下载 WSDL，修改它以匹配实际响应中的命名空间，然后使用 wsimport 重新生成 JAX-WS 代码。但是，我很难弄清楚如何修改 WSDL 以使响应命名空间正确。根据我到目前为止的研究，看起来我需要使用包含 urn:Port targetNamespace 的 wsdl:definition 创建一个新的 WSDL 文件，然后将其导入原始 WSDL 文件，但我不能似乎语法正确。谁能帮我更正 WSDL 以匹配实际的 Web 服务响应？

以下是引用`urn:Port`命名空间的响应示例：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <soapenv:Body>
      <ns0:HelpDesk_QueryList_ServiceResponse xmlns:ns0="urn:Port">
         <ns0:getListValues>
            <ns0:Assigned_Group>APP-eBiz-EP-L2</ns0:Assigned_Group>
            <ns0:Assigned_Group_Shift_Name/>
            <ns0:Assigned_Support_Company>Acme</ns0:Assigned_Support_Company>
            <ns0:Assigned_Support_Organization>Applications - eBusinessServices</ns0:Assigned_Support_Organization>
            <ns0:Assignee>Geoff Denning</ns0:Assignee>
            <ns0:Categorization_Tier_1>Issue</ns0:Categorization_Tier_1>
            <ns0:Categorization_Tier_2>Failure</ns0:Categorization_Tier_2>
            <ns0:Categorization_Tier_3/>
            <ns0:City>Mountain View</ns0:City>
            <ns0:Closure_Manufacturer/>
            <ns0:Closure_Product_Category_Tier1/>
            <ns0:Closure_Product_Category_Tier2/>
            <ns0:Closure_Product_Category_Tier3/>
            <ns0:Closure_Product_Model_Version/>
            <ns0:Closure_Product_Name/>
            <ns0:Company>Acme</ns0:Company>
            <ns0:Contact_Company>Acme</ns0:Contact_Company>
            <ns0:Contact_Sensitivity>Standard</ns0:Contact_Sensitivity>
            <ns0:Country>United States</ns0:Country>
            <ns0:Department>Mgmt Information Systems</ns0:Department>
            <ns0:Summary>Test summary</ns0:Summary>
            <ns0:Notes>Refer to the attached error screenshot.</ns0:Notes>
            <ns0:First_Name>Geoff</ns0:First_Name>
            <ns0:Impact>4-Minor/Localized</ns0:Impact>
            <ns0:Incident_Number>INC000000773346</ns0:Incident_Number>
            <ns0:Internet_E-mail>geoff@acme.com</ns0:Internet_E-mail>
            <ns0:Last_Name>Denning</ns0:Last_Name>
            <ns0:Manufacturer/>
            <ns0:Middle_Initial/>
            <ns0:Organization>IT-eBusiness</ns0:Organization>
            <ns0:Phone_Number>000-0000</ns0:Phone_Number>
            <ns0:Priority>Low</ns0:Priority>
            <ns0:Priority_Weight>2</ns0:Priority_Weight>
            <ns0:Product_Categorization_Tier_1>Software-Application</ns0:Product_Categorization_Tier_1>
            <ns0:Product_Categorization_Tier_2>eBusiness Services</ns0:Product_Categorization_Tier_2>
            <ns0:Product_Categorization_Tier_3>Test</ns0:Product_Categorization_Tier_3>
            <ns0:Product_Model_Version/>
            <ns0:Product_Name/>
            <ns0:Region>Americas</ns0:Region>
            <ns0:Reported_Source>Email</ns0:Reported_Source>
            <ns0:Resolution/>
            <ns0:Resolution_Category/>
            <ns0:Resolution_Category_Tier_2/>
            <ns0:Resolution_Category_Tier_3/>
            <ns0:Service_Type>User Service Restoration</ns0:Service_Type>
            <ns0:Site>Mountain View, CA</ns0:Site>
            <ns0:Site_Group>NA West</ns0:Site_Group>
            <ns0:Status>Assigned</ns0:Status>
            <ns0:Status_Reason/>
            <ns0:Urgency>4-Low</ns0:Urgency>
            <ns0:VIP>No</ns0:VIP>
         </ns0:getListValues>
      </ns0:HelpDesk_QueryList_ServiceResponse>
   </soapenv:Body>
</soapenv:Envelope> 
```

仅具有命名空间的现有 WSDL `urn:HPD_IncidentInterface_WS`：

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions targetNamespace="urn:HPD_IncidentInterface_WS" xmlns:s0="urn:HPD_IncidentInterface_WS" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
 <wsdl:types>
  <xsd:schema elementFormDefault="qualified" targetNamespace="urn:HPD_IncidentInterface_WS">
   <xsd:element name="HelpDesk_Query_Service" type="s0:GetInputMap"/>
   <xsd:complexType name="GetInputMap">
    <xsd:sequence>
     <xsd:element name="Incident_Number" type="xsd:string"/>
    </xsd:sequence>
   </xsd:complexType>
   <xsd:element name="HelpDesk_Query_ServiceResponse" type="s0:GetOutputMap"/>
   <xsd:complexType name="GetOutputMap">
    <xsd:sequence>
     <xsd:element name="Assigned_Group" type="xsd:string"/>
     <xsd:element name="Assigned_Group_Shift_Name" type="xsd:string"/>
     <xsd:element name="Assigned_Support_Company" type="xsd:string"/>
     <xsd:element name="Assigned_Support_Organization" type="xsd:string"/>
     <xsd:element name="Assignee" type="xsd:string"/>
     <xsd:element name="Categorization_Tier_1" type="xsd:string"/>
     <xsd:element name="Categorization_Tier_2" type="xsd:string"/>
     <xsd:element name="Categorization_Tier_3" type="xsd:string"/>
     <xsd:element name="City" type="xsd:string"/>
     <xsd:element name="Closure_Manufacturer" type="xsd:string"/>
     <xsd:element name="Closure_Product_Category_Tier1" type="xsd:string"/>
     <xsd:element name="Closure_Product_Category_Tier2" type="xsd:string"/>
     <xsd:element name="Closure_Product_Category_Tier3" type="xsd:string"/>
     <xsd:element name="Closure_Product_Model_Version" type="xsd:string"/>
     <xsd:element name="Closure_Product_Name" type="xsd:string"/>
     <xsd:element name="Company" type="xsd:string"/>
     <xsd:element name="Contact_Company" type="xsd:string"/>
     <xsd:element name="Contact_Sensitivity" type="s0:Contact_SensitivityType"/>
     <xsd:element name="Country" type="xsd:string"/>
     <xsd:element name="Department" type="xsd:string"/>
     <xsd:element name="Summary" type="xsd:string"/>
     <xsd:element name="Notes" type="xsd:string"/>
     <xsd:element name="First_Name" type="xsd:string"/>
     <xsd:element name="Impact" type="s0:ImpactType"/>
     <xsd:element name="Last_Name" type="xsd:string"/>
     <xsd:element name="Manufacturer" type="xsd:string"/>
     <xsd:element name="Middle_Initial" type="xsd:string"/>
     <xsd:element name="Organization" type="xsd:string"/>
     <xsd:element name="Phone_Number" type="xsd:string"/>
     <xsd:element name="Priority" type="s0:PriorityType"/>
     <xsd:element name="Priority_Weight" type="xsd:int"/>
     <xsd:element name="Product_Categorization_Tier_1" type="xsd:string"/>
     <xsd:element name="Product_Categorization_Tier_2" type="xsd:string"/>
     <xsd:element name="Product_Categorization_Tier_3" type="xsd:string"/>
     <xsd:element name="Product_Model_Version" type="xsd:string"/>
     <xsd:element name="Product_Name" type="xsd:string"/>
     <xsd:element name="Region" type="xsd:string"/>
     <xsd:element name="Reported_Source" type="s0:Reported_SourceType"/>
     <xsd:element name="Resolution" type="xsd:string"/>
     <xsd:element name="Resolution_Category" type="xsd:string"/>
     <xsd:element name="Resolution_Category_Tier_2" type="xsd:string"/>
     <xsd:element name="Resolution_Category_Tier_3" type="xsd:string"/>
     <xsd:element name="Service_Type" type="s0:Service_TypeType"/>
     <xsd:element name="Site" type="xsd:string"/>
     <xsd:element name="Site_Group" type="xsd:string"/>
     <xsd:element name="Status" type="s0:StatusType"/>
     <xsd:element name="Status_Reason" type="s0:Status_ReasonType"/>
     <xsd:element name="Urgency" type="s0:UrgencyType"/>
     <xsd:element name="VIP" type="s0:VIPType"/>
    </xsd:sequence>
   </xsd:complexType>
   <xsd:simpleType name="Contact_SensitivityType">
    <xsd:restriction base="xsd:string">
     <xsd:enumeration value="Sensitive"/>
     <xsd:enumeration value="Standard"/>
    </xsd:restriction>
   </xsd:simpleType>
   <xsd:simpleType name="ImpactType">
    <xsd:restriction base="xsd:string">
     <xsd:enumeration value="1-Extensive/Widespread"/>
     <xsd:enumeration value="2-Significant/Large"/>
     <xsd:enumeration value="3-Moderate/Limited"/>
     <xsd:enumeration value="4-Minor/Localized"/>
    </xsd:restriction>
   </xsd:simpleType>
   <xsd:simpleType name="PriorityType">
    <xsd:restriction base="xsd:string">
     <xsd:enumeration value="Critical"/>
     <xsd:enumeration value="High"/>
     <xsd:enumeration value="Medium"/>
     <xsd:enumeration value="Low"/>
    </xsd:restriction>
   </xsd:simpleType>
   <xsd:simpleType name="Reported_SourceType">
    <xsd:restriction base="xsd:string">
     <xsd:enumeration value="Direct Input"/>
     <xsd:enumeration value="Email"/>
     <xsd:enumeration value="External Escalation"/>
     <xsd:enumeration value="Fax"/>
     <xsd:enumeration value="Systems Management"/>
     <xsd:enumeration value="Phone"/>
     <xsd:enumeration value="Voice Mail"/>
     <xsd:enumeration value="Walk In"/>
     <xsd:enumeration value="Web"/>
     <xsd:enumeration value="Other"/>
    </xsd:restriction>
   </xsd:simpleType>
   <xsd:simpleType name="Service_TypeType">
    <xsd:restriction base="xsd:string">
     <xsd:enumeration value="User Service Restoration"/>
     <xsd:enumeration value="User Service Request"/>
     <xsd:enumeration value="Infrastructure Restoration"/>
     <xsd:enumeration value="Infrastructure Event"/>
    </xsd:restriction>
   </xsd:simpleType>
   <xsd:simpleType name="StatusType">
    <xsd:restriction base="xsd:string">
     <xsd:enumeration value="New"/>
     <xsd:enumeration value="Assigned"/>
     <xsd:enumeration value="In Progress"/>
     <xsd:enumeration value="Pending"/>
     <xsd:enumeration value="Resolved"/>
     <xsd:enumeration value="Closed"/>
     <xsd:enumeration value="Cancelled"/>
    </xsd:restriction>
   </xsd:simpleType>
   <xsd:simpleType name="Status_ReasonType">
    <xsd:restriction base="xsd:string">
     <xsd:enumeration value="Infrastructure Change Created"/>
     <xsd:enumeration value="Local Site Action Required"/>
     <xsd:enumeration value="Purchase Order Approval"/>
     <xsd:enumeration value="Registration Approval"/>
     <xsd:enumeration value="Supplier Delivery"/>
     <xsd:enumeration value="Support Contact Hold"/>
     <xsd:enumeration value="Third Party Vendor Action Reqd"/>
     <xsd:enumeration value="Client Action Required"/>
     <xsd:enumeration value="Infrastructure Change"/>
     <xsd:enumeration value="Request"/>
     <xsd:enumeration value="Future Enhancement"/>
     <xsd:enumeration value="Pending Original Incident"/>
     <xsd:enumeration value="Client Hold"/>
     <xsd:enumeration value="Monitoring Incident"/>
     <xsd:enumeration value="Customer Follow-Up Required"/>
     <xsd:enumeration value="Temporary Corrective Action"/>
     <xsd:enumeration value="No Further Action Required"/>
     <xsd:enumeration value="Resolved by Original Incident"/>
    </xsd:restriction>
   </xsd:simpleType>
   <xsd:simpleType name="UrgencyType">
    <xsd:restriction base="xsd:string">
     <xsd:enumeration value="1-Critical"/>
     <xsd:enumeration value="2-High"/>
     <xsd:enumeration value="3-Medium"/>
     <xsd:enumeration value="4-Low"/>
    </xsd:restriction>
   </xsd:simpleType>
   <xsd:simpleType name="VIPType">
    <xsd:restriction base="xsd:string">
     <xsd:enumeration value="Yes"/>
     <xsd:enumeration value="No"/>
    </xsd:restriction>
   </xsd:simpleType>
   <xsd:element name="HelpDesk_QueryList_Service" type="s0:GetListInputMap"/>
   <xsd:complexType name="GetListInputMap">
    <xsd:sequence>
     <xsd:element name="Qualification" type="xsd:string"/>
     <xsd:element name="startRecord" type="xsd:string"/>
     <xsd:element name="maxLimit" type="xsd:string"/>
    </xsd:sequence>
   </xsd:complexType>
   <xsd:element name="HelpDesk_QueryList_ServiceResponse" type="s0:GetListOutputMap"/>
   <xsd:complexType name="GetListOutputMap">
    <xsd:sequence>
     <xsd:element maxOccurs="unbounded" name="getListValues">
      <xsd:complexType>
       <xsd:sequence>
        <xsd:element name="Assigned_Group" type="xsd:string"/>
        <xsd:element name="Assigned_Group_Shift_Name" type="xsd:string"/>
        <xsd:element name="Assigned_Support_Company" type="xsd:string"/>
        <xsd:element name="Assigned_Support_Organization" type="xsd:string"/>
        <xsd:element name="Assignee" type="xsd:string"/>
        <xsd:element name="Categorization_Tier_1" type="xsd:string"/>
        <xsd:element name="Categorization_Tier_2" type="xsd:string"/>
        <xsd:element name="Categorization_Tier_3" type="xsd:string"/>
        <xsd:element name="City" type="xsd:string"/>
        <xsd:element name="Closure_Manufacturer" type="xsd:string"/>
        <xsd:element name="Closure_Product_Category_Tier1" type="xsd:string"/>
        <xsd:element name="Closure_Product_Category_Tier2" type="xsd:string"/>
        <xsd:element name="Closure_Product_Category_Tier3" type="xsd:string"/>
        <xsd:element name="Closure_Product_Model_Version" type="xsd:string"/>
        <xsd:element name="Closure_Product_Name" type="xsd:string"/>
        <xsd:element name="Company" type="xsd:string"/>
        <xsd:element name="Contact_Company" type="xsd:string"/>
        <xsd:element name="Contact_Sensitivity" type="s0:Contact_SensitivityType"/>
        <xsd:element name="Country" type="xsd:string"/>
        <xsd:element name="Department" type="xsd:string"/>
        <xsd:element name="Summary" type="xsd:string"/>
        <xsd:element name="Notes" type="xsd:string"/>
        <xsd:element name="First_Name" type="xsd:string"/>
        <xsd:element name="Impact" type="s0:ImpactType"/>
        <xsd:element name="Incident_Number" type="xsd:string"/>
        <xsd:element name="Internet_E-mail" type="xsd:string"/>
        <xsd:element name="Last_Name" type="xsd:string"/>
        <xsd:element name="Manufacturer" type="xsd:string"/>
        <xsd:element name="Middle_Initial" type="xsd:string"/>
        <xsd:element name="Organization" type="xsd:string"/>
        <xsd:element name="Phone_Number" type="xsd:string"/>
        <xsd:element name="Priority" type="s0:PriorityType"/>
        <xsd:element name="Priority_Weight" type="xsd:int"/>
        <xsd:element name="Product_Categorization_Tier_1" type="xsd:string"/>
        <xsd:element name="Product_Categorization_Tier_2" type="xsd:string"/>
        <xsd:element name="Product_Categorization_Tier_3" type="xsd:string"/>
        <xsd:element name="Product_Model_Version" type="xsd:string"/>
        <xsd:element name="Product_Name" type="xsd:string"/>
        <xsd:element name="Region" type="xsd:string"/>
        <xsd:element name="Reported_Source" type="s0:Reported_SourceType"/>
        <xsd:element name="Resolution" type="xsd:string"/>
        <xsd:element name="Resolution_Category" type="xsd:string"/>
        <xsd:element name="Resolution_Category_Tier_2" type="xsd:string"/>
        <xsd:element name="Resolution_Category_Tier_3" type="xsd:string"/>
        <xsd:element name="Service_Type" type="s0:Service_TypeType"/>
        <xsd:element name="Site" type="xsd:string"/>
        <xsd:element name="Site_Group" type="xsd:string"/>
        <xsd:element name="Status" type="s0:StatusType"/>
        <xsd:element name="Status_Reason" type="s0:Status_ReasonType"/>
        <xsd:element name="Urgency" type="s0:UrgencyType"/>
        <xsd:element name="VIP" type="s0:VIPType"/>
       </xsd:sequence>
      </xsd:complexType>
     </xsd:element>
    </xsd:sequence>
   </xsd:complexType>
   <xsd:element name="HelpDesk_Modify_Service" type="s0:SetInputMap"/>
   <xsd:complexType name="SetInputMap">
    <xsd:sequence>
     <xsd:element name="Categorization_Tier_1" type="xsd:string"/>
     <xsd:element name="Categorization_Tier_2" type="xsd:string"/>
     <xsd:element name="Categorization_Tier_3" type="xsd:string"/>
     <xsd:element name="Closure_Manufacturer" type="xsd:string"/>
     <xsd:element name="Closure_Product_Category_Tier1" type="xsd:string"/>
     <xsd:element name="Closure_Product_Category_Tier2" type="xsd:string"/>
     <xsd:element name="Closure_Product_Category_Tier3" type="xsd:string"/>
     <xsd:element name="Closure_Product_Model_Version" type="xsd:string"/>
     <xsd:element name="Closure_Product_Name" type="xsd:string"/>
     <xsd:element name="Company" type="xsd:string"/>
     <xsd:element name="Summary" type="xsd:string"/>
     <xsd:element name="Notes" type="xsd:string"/>
     <xsd:element name="Impact" type="s0:ImpactType"/>
     <xsd:element name="Manufacturer" type="xsd:string"/>
     <xsd:element name="Product_Categorization_Tier_1" type="xsd:string"/>
     <xsd:element name="Product_Categorization_Tier_2" type="xsd:string"/>
     <xsd:element name="Product_Categorization_Tier_3" type="xsd:string"/>
     <xsd:element name="Product_Model_Version" type="xsd:string"/>
     <xsd:element name="Product_Name" type="xsd:string"/>
     <xsd:element name="Reported_Source" type="s0:Reported_SourceType"/>
     <xsd:element name="Resolution" type="xsd:string"/>
     <xsd:element name="Resolution_Category" type="xsd:string"/>
     <xsd:element name="Resolution_Category_Tier_2" type="xsd:string"/>
     <xsd:element name="Resolution_Category_Tier_3" type="xsd:string"/>
     <xsd:element name="Resolution_Method" type="xsd:string"/>
     <xsd:element name="Service_Type" type="s0:Service_TypeType"/>
     <xsd:element name="Status" type="s0:StatusType"/>
     <xsd:element name="Urgency" type="s0:UrgencyType"/>
     <xsd:element name="Action" type="xsd:string"/>
     <xsd:element name="Work_Info_Summary" type="xsd:string"/>
     <xsd:element name="Work_Info_Notes" type="xsd:string"/>
     <xsd:element name="Work_Info_Type" type="s0:Work_Info_TypeType"/>
     <xsd:element name="Work_Info_Date" type="xsd:dateTime"/>
     <xsd:element name="Work_Info_Source" type="s0:Work_Info_SourceType"/>
     <xsd:element name="Work_Info_Locked" type="s0:VIPType"/>
     <xsd:element name="Work_Info_View_Access" type="s0:Work_Info_View_AccessType"/>
     <xsd:element name="Incident_Number" type="xsd:string"/>
    </xsd:sequence>
   </xsd:complexType>
   <xsd:simpleType name="Work_Info_TypeType">
    <xsd:restriction base="xsd:string">
     <xsd:enumeration value="----- Customer Inbound -----"/>
     <xsd:enumeration value="Customer Communication"/>
     <xsd:enumeration value="Customer Follow-up"/>
     <xsd:enumeration value="Customer Status Update"/>
     <xsd:enumeration value="----- Customer Outbound -----"/>
     <xsd:enumeration value="Closure Follow Up"/>
     <xsd:enumeration value="Detail Clarification"/>
     <xsd:enumeration value="General Information"/>
     <xsd:enumeration value="Resolution Communications"/>
     <xsd:enumeration value="Satisfaction Survey"/>
     <xsd:enumeration value="Status Update"/>
     <xsd:enumeration value="----- General -----"/>
     <xsd:enumeration value="Incident Task / Action"/>
     <xsd:enumeration value="Problem Script"/>
     <xsd:enumeration value="Working Log"/>
     <xsd:enumeration value="Email System"/>
     <xsd:enumeration value="Paging System"/>
    </xsd:restriction>
   </xsd:simpleType>
   <xsd:simpleType name="Work_Info_SourceType">
    <xsd:restriction base="xsd:string">
     <xsd:enumeration value="Email"/>
     <xsd:enumeration value="Fax"/>
     <xsd:enumeration value="Phone"/>
     <xsd:enumeration value="Voice Mail"/>
     <xsd:enumeration value="Walk In"/>
     <xsd:enumeration value="Pager"/>
     <xsd:enumeration value="System Assignment"/>
     <xsd:enumeration value="Web"/>
     <xsd:enumeration value="Other"/>
    </xsd:restriction>
   </xsd:simpleType>
   <xsd:simpleType name="Work_Info_View_AccessType">
    <xsd:restriction base="xsd:string">
     <xsd:enumeration value="Internal"/>
     <xsd:enumeration value="Public"/>
    </xsd:restriction>
   </xsd:simpleType>
   <xsd:element name="HelpDesk_Modify_ServiceResponse" type="s0:SetOutputMap"/>
   <xsd:complexType name="SetOutputMap">
    <xsd:sequence/>
   </xsd:complexType>
   <xsd:element name="AuthenticationInfo" type="s0:AuthenticationInfo"/>
   <xsd:complexType name="AuthenticationInfo">
    <xsd:sequence>
     <xsd:element name="userName" type="xsd:string"/>
     <xsd:element name="password" type="xsd:string"/>
     <xsd:element minOccurs="0" name="authentication" type="xsd:string"/>
     <xsd:element minOccurs="0" name="locale" type="xsd:string"/>
     <xsd:element minOccurs="0" name="timeZone" type="xsd:string"/>
    </xsd:sequence>
   </xsd:complexType>
  </xsd:schema>
 </wsdl:types>

   <wsdl:message name="HelpDesk_Query_ServiceSoapIn">

      <wsdl:part element="s0:HelpDesk_Query_Service" name="parameters"/>

   </wsdl:message>

   <wsdl:message name="HelpDesk_Query_ServiceSoapOut">

      <wsdl:part element="s0:HelpDesk_Query_ServiceResponse" name="parameters"/>

   </wsdl:message>

   <wsdl:message name="HelpDesk_Modify_ServiceSoapIn">

      <wsdl:part element="s0:HelpDesk_Modify_Service" name="parameters"/>

   </wsdl:message>

   <wsdl:message name="HelpDesk_Modify_ServiceSoapOut">

      <wsdl:part element="s0:HelpDesk_Modify_ServiceResponse" name="parameters"/>

   </wsdl:message>

   <wsdl:message name="HelpDesk_QueryList_ServiceSoapOut">

      <wsdl:part element="s0:HelpDesk_QueryList_ServiceResponse" name="parameters"/>

   </wsdl:message>

   <wsdl:message name="HelpDesk_QueryList_ServiceSoapIn">

      <wsdl:part element="s0:HelpDesk_QueryList_Service" name="parameters"/>

   </wsdl:message>

   <wsdl:message name="ARAuthenticate">

      <wsdl:part element="s0:AuthenticationInfo" name="parameters"/>

   </wsdl:message>

   <wsdl:portType name="HPD_IncidentInterface_WSPortType">

      <wsdl:operation name="HelpDesk_Query_Service">

         <wsdl:input message="s0:HelpDesk_Query_ServiceSoapIn"/>

         <wsdl:output message="s0:HelpDesk_Query_ServiceSoapOut"/>

      </wsdl:operation>

      <wsdl:operation name="HelpDesk_QueryList_Service">

         <wsdl:input message="s0:HelpDesk_QueryList_ServiceSoapIn"/>

         <wsdl:output message="s0:HelpDesk_QueryList_ServiceSoapOut"/>

      </wsdl:operation>

      <wsdl:operation name="HelpDesk_Modify_Service">

         <wsdl:input message="s0:HelpDesk_Modify_ServiceSoapIn"/>

         <wsdl:output message="s0:HelpDesk_Modify_ServiceSoapOut"/>

      </wsdl:operation>

   </wsdl:portType>

   <wsdl:binding name="HPD_IncidentInterface_WSSoapBinding" type="s0:HPD_IncidentInterface_WSPortType">

      <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>

      <wsdl:operation name="HelpDesk_Query_Service">

         <soap:operation soapAction="urn:HPD_IncidentInterface_WS/HelpDesk_Query_Service" style="document"/>

         <wsdl:input>

            <soap:header message="s0:ARAuthenticate" part="parameters" use="literal">

            </soap:header>

            <soap:body use="literal"/>

         </wsdl:input>

         <wsdl:output>

            <soap:body use="literal"/>

         </wsdl:output>

      </wsdl:operation>

      <wsdl:operation name="HelpDesk_QueryList_Service">

         <soap:operation soapAction="urn:HPD_IncidentInterface_WS/HelpDesk_QueryList_Service" style="document"/>

         <wsdl:input>

            <soap:header message="s0:ARAuthenticate" part="parameters" use="literal">

            </soap:header>

            <soap:body use="literal"/>

         </wsdl:input>

         <wsdl:output>

            <soap:body use="literal"/>

         </wsdl:output>

      </wsdl:operation>

      <wsdl:operation name="HelpDesk_Modify_Service">

         <soap:operation soapAction="urn:HPD_IncidentInterface_WS/HelpDesk_Modify_Service" style="document"/>

         <wsdl:input>

            <soap:header message="s0:ARAuthenticate" part="parameters" use="literal">

            </soap:header>

            <soap:body use="literal"/>

         </wsdl:input>

         <wsdl:output>

            <soap:body use="literal"/>

         </wsdl:output>

      </wsdl:operation>

   </wsdl:binding>

   <wsdl:service name="HPD_IncidentInterface_WSService">

  <wsdl:documentation>
Query and Modify Operations  </wsdl:documentation>

      <wsdl:port binding="s0:HPD_IncidentInterface_WSSoapBinding" name="HPD_IncidentInterface_WSSoap">

         <soap:address location="http://internal.acme.com:8080/arsys/services/ARService?server=rsm7&amp;webService=HPD_IncidentInterface_WS"/>

      </wsdl:port>

   </wsdl:service>

</wsdl:definitions> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T17:09:27.757

感谢`SoapHandlers`Osw提供的提示，我能够解决这个问题。这是我的解决方法，以防有人遇到类似情况：

1) 向您的主要 JAX-WS 服务类添加处理程序链注释：`@HandlerChain(file = "handlers.xml")`

2) 将 handlers.xml 文件添加到资源文件夹：

```
<?xml version="1.0" encoding="UTF-8"?>
<handler-chains xmlns="http://java.sun.com/xml/ns/javaee">
    <handler-chain>
        <handler>
            <handler-class>com.sample.handlers.FixNamespaceHandler
            </handler-class>
        </handler>
    </handler-chain>
</handler-chains> 
```

3) 添加 FixNamespaceHandler 用正确的命名空间声明替换不正确的命名空间声明：

```
public class FixNamespaceHandler implements SOAPHandler<SOAPMessageContext> {

    @Override
    public void close(MessageContext arg0) {
        // Do nothing
    }

    @Override
    public boolean handleFault(SOAPMessageContext arg0) {
        // Do nothing
        return true;
    }

    @Override
    public boolean handleMessage(SOAPMessageContext smc) {
        Boolean outboundProperty = (Boolean) smc.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);

        if (!outboundProperty.booleanValue()) {
            try {
                SOAPBody soapBody = smc.getMessage().getSOAPBody();
                soapBody.removeNamespaceDeclaration("ns0");
                soapBody.addNamespaceDeclaration("s0", "urn:HPD_IncidentInterface_WS");
                SOAPElement oldElement = (SOAPElement) soapBody.getFirstChild();
                cloneToNewNamespace(oldElement, soapBody, "s0");
                soapBody.removeChild(oldElement);
            } catch (SOAPException e) {
                e.printStackTrace();
            }
        }
        return true;
    }

    private void cloneToNewNamespace(Node nodeToRename, SOAPElement parentElement, String prefix) throws SOAPException {
        if (nodeToRename instanceof SOAPElement) {
            SOAPElement elementToRename = (SOAPElement) nodeToRename;
            SOAPElement newElement = parentElement.addChildElement(elementToRename.getElementName().getLocalName(), prefix);
            for (int index = 0; index < elementToRename.getChildNodes().getLength(); index++) {
                Node childNode = elementToRename.getChildNodes().item(index);
                cloneToNewNamespace(childNode, newElement, prefix);
            }
        } else {
            parentElement.addTextNode(nodeToRename.getNodeValue());
        }
    }

    @Override
    public Set<QName> getHeaders() {
        // Do nothing
        return null;
    }
} 
```

# linux - 模棱两可的重定向

> ID：10235146
> 
> 赞同：0
> 
> 时间：2012-04-19T19:14:01.910
> 
> 标签：linux, bash, redirect

我正在尝试转到当前目录和所有子目录，并在每个以 .sql 结尾的文件中添加一些注释

这是代码片段

```
HEADER="--SQL HEADER"

for f in 'find . -name *.sql';
do
        echo $f
        echo -e $HEADER > $f.tmp;
        FNAME=${f//\//_/};
        echo -e "\n\n--MORE ANNOTATIONS ${FNAME%.*}:1" >> $f.tmp;
        cat $f >> $f.tmp;
        mv $f.tmp $f;
        rm $f.tmp
done; 
```

我是 bash 的初学者，所以我认为我遇到的一些错误可能是由于带有循环的 find 语句，但这是我得到的错误

```
find . -name X.sql A.sql W.sql E.sql S.sql
./annotate.sh: line 6: $f.tmp: ambiguous redirect
./annotate.sh: line 8: $f.tmp: ambiguous redirect
./annotate.sh: line 9: $f.tmp: ambiguous redirect
mv: invalid option -- n
Try `mv --help' for more information.
rm: invalid option -- n
Try `rm --help' for more information. 
```

任何帮助将不胜感激=）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T19:22:40.730

这就是问题所在。你的“回声”泄露了它：

```
echo $f 
```

输出

```
find . -name X.sql A.sql W.sql E.sql S.sql 
```

我认为问题是你在 find 命令中有直单引号（''），而不是反引号（``）。所以它并不是真正运行查找，而是简单地扩展通配符。

您可能必须引用通配符，以便将其传递给 find 而不是由 shell 评估：

```
for f in `find . -name \*.sql`; 
```

但是，您的脚本中有几个问题，如果您想多次使用它，您应该解决这些问题。请参阅[ormaaj 的回答](https://stackoverflow.com/a/10237190/1118101)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T21:37:56.617

正如已经指出的那样，问题在于 find 实际上并没有被执行。然而，这种模式是非常错误的。使用 for 循环对命令替换发生的任何事情进行迭代都不起作用，因为将输出拆分为单词需要进行单词拆分，这不需要引用，即使禁用了路径名扩展也是一个问题，因为文件名可以包含换行符。

最好使用`-exec`. 首先将此脚本写入文件并`chmod u+x scriptname`：

```
#!/usr/bin/env bash
header="--SQL HEADER"

for f in "$@"; do
    echo "$f" >&2
    fname=${f//\//_/}

    cat - "$f" <<EOF >"$f.tmp"
    ${header}$'\n\n'
    --MORE ANNOTATIONS ${fname%.*}:1
    EOF

    mv "$f.tmp" "$f"
done 
```

然后`find`像这样运行：

```
find . -name '*.sql' -exec scriptname {} + 
```

或者，（假设这是 Bash 的最新版本），使用`globstar`和否`find`（如果您愿意，ksh 具有类似的功能）。根据作业，这可能会更慢 - shell 必须预先生成文件列表。

```
#!/usr/bin/env bash
shopt -s globstar

for f in ./**/*.sql; do
    ... 
```

或者，如果您有 Bash 4 和具有必要 GNU 实用程序的系统，请使用`-print0`.

```
find . -name '*.sql' -print0 | while IFS= read -rd '' f; do
    # <body of the above for loop here>
done 
```

请参阅： http: [//mywiki.wooledge.org/UsingFind](http://mywiki.wooledge.org/UsingFind)

# html - iframe 和 css 兼容性

> ID：10235147
> 
> 赞同：0
> 
> 时间：2012-04-19T19:14:02.653
> 
> 标签：html, css, iframe, joomla

我需要一些兼容性帮助。我的网站在浏览器中看起来不同。Chrome/firefox 等看起来不错，但 IE 搞砸了。看看：[http ://southwestarkansasradio.com/joomla](http://southwestarkansasradio.com/joomla)

我正在使用 Joomla 2.5。搜索框向左移动，我的 on air box 脚本在 IE 中不起作用。代码如下，你能帮忙吗？谢谢。

```
<table border="0">
<tr>
<th>
<center><img style="float: left;"
src="http://www.southwestarkansasradio.com/images/onair995.jpg" alt="" height="35"     
width="316" /><br><img 
src="http://www.southwestarkansasradio.com/images/playerbackground.jpg" width="316" 
height="216" alt="" border="1"><div id="now playing" style="position: absolute; top: 
60px; left: 20px;>

<!--[if IE]>

<iframe src="http://www.southwestarkansasradio.com/NowPlaying.html" name="nowplaying"   
style="height:216px" "width:316px" frameborder="0" scrolling="no" border="none" 
allowtransparency="true" valign="top" ></iframe>

<![endif]-->

<!--[if !IE]>-->

<iframe src="http://www.southwestarkansasradio.com/NowPlaying.html" name="nowplaying" 
style="height:216px" "width:316px" frameborder="0" scrolling="no" border="none" 
valign="top" ></iframe>

<!--<![endif]-->

</div></center>
</th></tr></table></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T22:25:57.277

对于这么小的一段代码，那个 html 真的很难阅读。使用缩进会让你更容易发现错误。有很多事情是错误的：

*   片段中缺少开头的 div
*   其中一个“正在播放”的 div 在 id 中有一个空格。HTML ID 中不能有空格。
*   你应该在 br 标签中有一个斜杠
*   您还没有关闭正在播放的 div 中的 css 样式，即您忘记了结束撇号。这会导致问题。
*   iframe 没有 valign 属性
*   iframe 中的高度和宽度格式不正确
*   iframe 没有边框属性

像下面这样的东西应该会更好，但不能在你的服务器上调试它是猜测。无论如何，如前所述，我已将其保留在您的结构中并修复了明显的问题，但是当您在站点上尝试时可能仍然存在一些问题，但它会让您更接近。但是，我当然不会这样做。

w3c 验证器是一个方便的工具。

```
<div>
    <table border="0"> 
        <tr> 
            <th> 
                <center>
                    <img style="float: left;" src="http://www.southwestarkansasradio.com/images/onair995.jpg" alt="" height="35" width="316" />
                    <br/>
                    <img src="http://www.southwestarkansasradio.com/images/playerbackground.jpg" width="316" height="216" alt="" border="1">

                    <div id="nowplaying" style="position: absolute; top: 60px; left: 20px;"> 
                        <!--[if IE]>
                            <iframe src="http://www.southwestarkansasradio.com/NowPlaying.html" name="nowplaying" height="216px" width="316px" frameborder="0" scrolling="no" allowtransparency="true" ></iframe> 
                        <![endif]-->

                        <!--[if !IE]>--> 
                            <iframe src="http://www.southwestarkansasradio.com/NowPlaying.html" name="nowplaying" height="216px" width="316px" frameborder="0" scrolling="no" ></iframe> 
                        <!--<![endif]--> 
                    </div>
                </center>
            </th>
        </tr>
    </table>
</div> 
```

这只是一个 hack，但要在 IE8 和 IE9（没有尝试过 IE7）中移动搜索框，请将以下内容添加到模板 index.php 的头部部分。它只是“推动”搜索框。

```
<!--[if IE]>
<style type="text/css">
div.topmenu
{
    width: 250px !important;
}

div.search
{
    margin-left: 30px !important;
}
</style>
<![endif]--> 
```

# php - 复选框 onChange 提交表单

> ID：10235150
> 
> 赞同：0
> 
> 时间：2012-04-19T19:14:09.813
> 
> 标签：php, javascript, jquery, mysql

我拥有的是我的 mySQL 数据库中的一组项目，每个项目都有一个复选框。我正在努力做到这一点，因此当您单击复选框时，它将向数据库提交已选中或未选中的项目的信息。我有它未选中 = 1 和选中 = 0。这是我想要显示该项目的位置。

现在我的问题是我似乎无法将任何东西提交到我的数据库中，我对 jQuery 的了解不足以为其编写函数，所以我需要一些帮助。这是我的代码得到的。

```
if(isset($_POST['submit'])){
        foreach($_POST['id'] as $id){
            $value = (isset($_POST['location'][$id]) && $_POST['location'][$id]=="0" ? '0' : '1');
            $insert = mysql_query("UPDATE items SET location='$value' WHERE id='$id'") or die('Insert Error: '.mysql_error());
        }
    }
echo '<form id="form1" method="post"><input type="submit" name="submit" value="Submit">';
$result = mysql_query("SELECT * FROM items")
    or die("Query Failed: ".mysql_error());
    $counter = 0;
    echo '<div class="specialcontainer">';
while($row = mysql_fetch_array($result)){
    list($id, $item_info, $item_img, $price, $sale, $location) = $row;
    if($location == '0'){
        $set_checked = ' checked="checked" ';
    }else{
        $set_checked = '';
    }
    if($counter % 5==0) {
        echo '</div>';
        echo '<div class="specialcontainer">';
    }
    echo '<div class="special"><img src="../images/items/'.$item_img.'" width="130" /><br />';
    echo $item_info.'<br />';
    echo 'Reg. $'.$price.'<br />';
    echo 'Sale $'.$sale.'<br />';
    echo 'Slide Show: <input type="checkbox" id="ch" value="0" name="location['.$id.']"'.$set_checked.' /><br />';
    echo '<input type="button" value="Edit" name="edit" onclick="window.location.href=\'specials.php?action=edit&id='.$id.'\'">';
    echo '<input type="button" value="Delete" name="Delete" onclick="window.location.href=\'specials.php?action=delete&id='.$id.'\'">';
    echo '<input type="hidden" name="id[]" value='.$id.' />';
    echo '</div>';
    $counter++;
}
echo '</div>';
echo '<input type="submit" name="submit" value="Submit"></form>'; 
```

如您所见，我确实有提交按钮，但我的计划是为 onChange 提交删除它。我试过 onchange="this.form.submit();" 在复选框参数中，但它不能正常工作。所以我只希望它在任何时候点击复选框时提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:11:43.033

像这样的 Ajax 解决方案会起作用吗？

```
$('ch').click(function() {
    //this is what goes into $_POST
    var data = 'id='+ $(this).attr('name') +'&checked=' + $(this).is(':checked');
    $.ajax({
        //This would be the url that would handle updating the MySQL Record
        url: my_mysql_handler.php,
        cache: false,
        type: 'POST',
        data: data,
        success: function(response) {
            alert(response); //or whatever you want to do with the success/fail notification
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T19:22:46.573

您应该尝试使用复选框`document.getElementById('form1').submit()`的方法`onchange`

# objective-c - 为什么我的基于单元格的 NSTableView 调用 viewForTableColumn？

> ID：10235153
> 
> 赞同：5
> 
> 时间：2012-04-19T19:14:26.413
> 
> 标签：objective-c, xcode, cocoa, nstableview

我有一个视图控制器，它是 2 个表的代表，一个基于视图的表和一个基于单元格的表。基于单元格的表`viewForTableColumn`在应该调用时调用`objectValueForTableColumn`。我更加确定它是界面构建器中基于单元格的表格。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T16:59:43.563

如果委托的`NSTableView`实现方法`tableView:viewForTableColumn:row:`，`NSTableView`自动切换到基于视图。您必须为 2 个表视图创建不同的代表

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-23T13:25:15.747

基于视图的表视图和基于单元的表视图不能混合使用，您可以有两个不同的委托，也可以将单元基表转换为基于视图的表，然后使用以下代码`tableView:viewForTableColumn:row:`使其看起来像一个单元-基于表：

`NSTableCellView *cell = [tableView makeViewWithIdentifier:@"textFieldCell" owner:self];`

其中`textFieldCell`是单元格的标识符。然后使用以下代码设置要在单元格中显示的字符串：

`[[cell textField] setStringValue:desiredString];`

在方法结束时返回变量单元格

# java - 如何在 Python 中使用本机库（即 hashlib）迭代 sha256，使用 byte[] 作为输入而不是十六进制字符串

> ID：10235161
> 
> 赞同：3
> 
> 时间：2012-04-19T19:15:20.003
> 
> 标签：java, python, hash, hex, sha256

背景：我有一个迭代哈希算法，需要从 Python 脚本和 Java Web 应用程序计算。

伪代码：

```
hash = sha256(raw)
for x=1 to 64000 hash = sha256(hash) 
```

其中 hash 是长度为 32 的字节数组，而不是长度为 64 的十六进制字符串。

我想将其保留为字节的原因是，尽管 Python 可以在每次迭代之间转换为十六进制字符串并将处理时间保持在一秒以下，但 Java 需要 3 秒的字符串开销。

因此，Java 代码如下所示：

```
// hash one time...
byte[] result = sha256(raw.getBytes("UTF-8"));

// then hash 64k-1 more times
for (int x = 0; x < 64000-1; x++) {
  result = sha256(result);
}

// hex encode and print result
StringBuilder sb = new StringBuilder();
Formatter formatter = new Formatter(sb);
for (int i=0; i<buf.length; i++) {
  formatter.format("%02x", buf[i]);
}
System.out.println(sb.toString()); 
```

Python 代码如下所示：

```
import hashlib

# hash 1 time...
hasher = hashlib.sha256()
hasher.update(raw)
digest = hasher.digest()

# then hash 64k-1 times
for x in range (0, 64000-1):
  # expect digest is bytes and not hex string
  hasher.update(digest) 
  digest = hasher.digest()
print digest.encode("hex") 
```

Python 结果计算了第一个摘要（字符串）的十六进制表示的哈希值，而不是原始摘要字节。所以，我得到不同的输出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T19:24:46.640

hasher 的 .update 方法将参数附加到以前的文本（[Python 文档](http://docs.python.org/library/hashlib.html#hashlib.hash.update)）。相反，您应该在每次要计算摘要时创建新的哈希。

```
import hashlib

# hash 1 time...
digest = hashlib.sha256(raw).digest()

# then hash 64k-1 times
for x in range(0, 64000-1):
  digest = hashlib.sha256(digest).digest()
print digest.encode("hex") 
```

# iphone - 使用 UIWebView 访问文档层次结构

> ID：10235168
> 
> 赞同：0
> 
> 时间：2012-04-19T19:15:35.613
> 
> 标签：iphone, macos, cocoa-touch, uiwebview

在 Cocoa 中，有没有办法通过 UIWebView 或其他方式访问 HTML 文档的对象层次结构？例如，我想获取一个 HTML 文件并提取所有图像 ( `<img>`)、所有链接 ( `<a href>`) 等及其关联属性 (src=""、href=""、style="" 的列表。 .. 等等）。

其次，假设我有一个 html 页面，其中的图像没有与之关联的样式信息（普通的旧`<img src="">`标签）。在所述 UIWebView 中呈现页面后，是否可以确定任何继承的属性，甚至可能确定它在屏幕上显示的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T03:48:55.427

看看[stringByEvaluatingJavaScriptFromString:](http://developer.apple.com/library/ios/documentation/uikit/reference/UIWebView_Class/Reference/Reference.html#//apple_ref/occ/instm/UIWebView/stringByEvaluatingJavaScriptFromString%3a)。您可以使用它来运行一个脚本来查找您感兴趣的标签，然后将您感兴趣的数据作为字符串返回。如果您想一次获取大量数据，那么在传递它时使用 JSON 可能是最简单的。一个例子：

```
NSString *jsonString = [webView stringByEvaluatingJavaScriptFromString:@"var result = {}; var imgs = document.getElementsByTagName('img'); for (x = 0; x < imgs.length; x++) { result[x] = {'src': imgs[x].src, 'width': imgs[x].offsetWidth, 'height': imgs[x].offsetHeight}; } result = JSON.stringify(result);"];
NSData *jsonData = [jsonString dataUsingEncoding:NSUTF8StringEncoding];
NSError *error = nil;
NSArray *imgArray = [NSJSONSerialization JSONObjectWithData:jsonData options:0 error:&error]; 
```

因此，现在您拥有`NSArray`所有图像和您感兴趣的属性。请注意，这`NSJSONSerialization`确实需要 iOS 5 或 OS X 10.7，但如果您需要支持较早的操作系统版本，则可以[使用第三方库。](http://code.google.com/p/json-framework/)（`stringByEvaluatingJavaScriptFromString:`回到 iOS 2.0 和 10.2.7。）

# jquery - 如何将事件附加到克隆/动态生成的元素？

> ID：10235172
> 
> 赞同：0
> 
> 时间：2012-04-19T19:15:47.603
> 
> 标签：jquery, clone

[http://www.stableflow.com/downloads/jquery-plugins/360-degrees-product-view/](http://www.stableflow.com/downloads/jquery-plugins/360-degrees-product-view/)

找到了这个脚本。我如何在此处将事件附加到单个图像。例如，如果我想要自定义单击图像 10 并悬停在图像 20 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:19:34.997

对于动态生成的元素，请考虑使用`live(event, function)`方法或更新的一个 - `on(event, function)`。

因此，如果您的插件生成了一些 DOM 逻辑，请考虑在它们上使用 on 附加事件，并且当它们准备好时，它们将附加事件。

逻辑应该是这样的：

```
...
...
//attach events
$('image:eq(10)').on('click', function() {
//my custom click handler for 10th image
});
...
... 
```

初始化一些插件，它将围绕/或使用您的图像构建 DOM 逻辑

# android - android中ColorDrawable中没有方法“getColor”

> ID：10235173
> 
> 赞同：3
> 
> 时间：2012-04-19T19:15:49.580
> 
> 标签：android, eclipse, colors, packages

Eclipse 给我一个非常奇怪的错误：方法 getColor() 未定义 ColorDrawable 类型

```
android.graphics.drawable.ColorDrawable dd = 
   new android.graphics.drawable.ColorDrawable();
dd.getColor(); 
```

我不知道如何解决它。所有其他方法都存在。什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T19:18:42.637

您的目标 API 级别是多少？ColorDrawable.getColor() 是在 API 级别 11 中引入的，因此如果您的目标是较低的 API 级别，您将无法访问该函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T10:06:02.683

为什么不将 Drawable 绘制到一个很小的屏幕外[Bitmap](http://developer.android.com/reference/android/graphics/Bitmap.html)中，然后调用[getPixel](http://developer.android.com/reference/android/graphics/Bitmap.html#getPixel%28int,%20int%29)来检索您绘制的颜色？

# android - 更改布局，但不重新启动我的 Android 应用程序上的活动

> ID：10235178
> 
> 赞同：0
> 
> 时间：2012-04-19T19:16:23.043
> 
> 标签：android, layout, android-activity, orientation, restart

我希望我的应用程序从纵向变为横向并从 layout1 更改为 layout2 但不重新启动活动。
它从layout1很好地转到layout2，但每次从纵向切换到横向和横向切换到纵向时都会重新启动活动，我只想运行一次活动然后将其保留在那里。

非常感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:23:59.877

您可以通过`android:configChanges="orientation"`在清单中添加活动并通过覆盖手动处理屏幕内容来实现此目的`onConfigurationChanged`

# zend-framework - ZF - 动态更改默认控制器

> ID：10235180
> 
> 赞同：0
> 
> 时间：2012-04-19T19:16:35.077
> 
> 标签：zend-framework, front-controller

如果请求来自移动设备，我需要加载不同的控制器作为默认控制器。我试图在插件中获取前端控制器实例并根据设备检测在那里设置默认值，但它不起作用。

有没有办法动态更改 FC 设置？

编辑：

插件已注册并且可以工作，但其余代码没有

```
 public function preDispatch(Zend_Controller_Request_Abstract $request)
 {
   $front = Zend_Controller_Front::getInstance();
   $front->setDefaultControllerName('test');
 } 
```

# php - PHP Facebook SDK 以管理员身份在页面上发布

> ID：10235187
> 
> 赞同：1
> 
> 时间：2012-04-19T19:17:06.923
> 
> 标签：php, facebook, post, sdk

> **可能重复：**
> [Facebook Graph Api - 以管理员身份发布到粉丝页面](https://stackoverflow.com/questions/3627684/facebook-graph-api-posting-to-fan-page-as-an-admin)

我想在我的网站上有一个表单，我可以在其中提交博客文章，然后将相同的博客文章发送到我在 facebook 上的页面。

我的页面是：[https ://www.facebook.com/foreveraloneminecraft](https://www.facebook.com/foreveraloneminecraft)

我希望它像我已登录并手动发布一样发布它（就像那里的所有其他帖子一样）。

我一直在到处搜索，我发现的所有内容要么从未实际发布过任何内容，要么引发错误。

这是我在搜索完之后得到的：

```
<?php
include('core/init.inc.php');
require_once('libs/parser.php'); // path to Recruiting Parsers' file
$parser = new parser; //  start up Recruiting Parsers

if(isset($_POST['submit'], $_POST['user'], $_POST['title'], $_POST['body'])
{
    //--- Facebook Posting ------
    require_once('libs/facebook/facebook.php');
    $appid = '286964398044671';
    $appsecret = 'myappsecret';
    $pageid = '215852885143861';
    $token = 'mytoken';

    // Create our Application instance (replace this with your appId and secret).
    $facebook = new Facebook(array(
      'appId'  => $appid,
      'secret' => $appsecret,
    ));

    // Get the current access token
    //$token = $facebook->getAccessToken();

    //Information that makes up the facebook page post
    $attachment = array(
            'access_token' => $token,
            'message' => $_POST['body'], 
            'link'    => 'http://hgs1957.hostedd.com/news.php',
            'picture' => 'http://hgs1957.hostedd.com/images/foreverAloneMCguy.png',
            'name'    => $_POST['title'],
            'description'=> 'Latest news for foreveralonemc.com.'
    );

    //Try to post to the facebook page
    try{
    $res = $facebook->api('/'.$pageid.'/feed','POST',$attachment);

    } catch (Exception $e){

        echo $e->getMessage();
    }

    //Add the post to the sql database of posts
    //add_post($_POST['user'], $_POST['title'], $_POST['body']);

    //Redirect to news feed
    header('Location: news.php');
    die();
}
?> 
```

我使用令牌中的 appsecret 是我在使用[https://developers.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/)时获得的权限：publish_stream、status_update、manage_pages、publish_actions、offline_access 尝试后它似乎发布到页面墙，但我不是页面或管理员。

任何人都知道这只是一个错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T12:21:51.563

您应该在过期后重新登录您的应用程序以更新和存储新的访问令牌。我希望[这](https://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)会对你有所帮助。

# vb6 - VB6中的选择案例会自动级联吗？

> ID：10235192
> 
> 赞同：2
> 
> 时间：2012-04-19T19:17:21.777
> 
> 标签：vb6

我来自 C/Java 背景，除非你放一个 break 语句，否则 switch case 会产生级联效应

```
 switch(index)
   {
       case 0: doSomething();        
       case 1: doSomethingElse(); 
       // ...
   } 
```

所以案例 0 级联到案例 1。

VB是这种情况吗？case 0 会像上面那样自动级联到 case 1 吗？

```
 Select Case Index

  Case 0 ' code
  Case 1 ' code
  ...
  End Select 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T19:24:49.113

不，VB6 中的 Select/Case 没有“break”语句。事实上，我认为“break”甚至不是VB6中的保留字。

如果 case 0 中的代码运行，那么它不会级联到 case 1。

# jquery - 带有自定义搜索的 DataTables Cookie

> ID：10235197
> 
> 赞同：0
> 
> 时间：2012-04-19T19:17:52.233
> 
> 标签：jquery, cookies, datatables

我向 Datatable 添加了一些自定义过滤器，它们工作正常。我遇到的问题是，当我返回查看表格时，我丢失了自定义过滤器（这是有道理的）。

当我做一个

```
aoData.push( {  "name": "SomeVar", "value": "SomeVarInfo"} ); 
```

DataTable 是否将这些额外信息保存在 cookie 中？如果不是，我如何将其添加到 cookie 以及如何在页面加载时访问它？

数据表版本 1.9.1

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T19:33:27.000

我发现这对我有用。它的本地存储虽然不是 cookie，但效果很好

```
"fnStateSave": function (oSettings, oData) {
localStorage.setItem( 'DataTables', JSON.stringify(oData) );
},
"fnStateLoad": function (oSettings) {
return JSON.parse( localStorage.getItem('DataTables') );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T20:32:29.860

使用 Datatables 1.9，我发现在 iPad 上 localStorage 解决方法会导致 DataTables 过滤器中断。DT 过滤器不再选择正确的匹配行。当恢复到保存 DataTable 状态的默认 cookie 方法时，过滤器再次正常工作。

# java - Java：通过静态计数器对不可变对象进行唯一的 hashCode()

> ID：10235199
> 
> 赞同：1
> 
> 时间：2012-04-19T19:18:03.190
> 
> 标签：java, equals, immutability, hashcode

我有一个非常大`Set`的不可变对象，所以我正在考虑在构建时为它们分配一个唯一的哈希码。

```
private static int counter = Integer.MIN_VALUE;

private final double foo;
private final double bar;
private final int hashCode;

public MyImmutableObject(double foo, double bar)
{
    counter++;
    this.foo = foo;
    this.bar = bar;
    this.hashCode = counter;
}

@Override
public int hashCode()
{
    return this.hashCode;
}

   /**
    * Unneeded override of equals since its the same as in
    * Object, but shown for demonstration purposes. 
    */
@Override
public boolean equals(final Object obj)
{
    return this == obj;
} 
```

这样，我可以获得尽可能高的密钥分散度，因为我将拥有 2 ^(32 个)唯一密钥。当然，这也意味着这种类型的两个对象永远不会相等，因为一个对象只会与它自己相等。

编辑：对象也用作`Map`s 中的键。

这可能吗？有没有我错过的隐藏陷阱？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T19:21:51.387

> 这可能吗？有没有我错过的隐藏陷阱？

线程安全，一方面？当然，你可以用它`AtomicInteger`来解决这个问题。

然后还有它的无意义，真的。无需您做任何额外的工作（并且每个对象占用额外的 4 个字节），内置哈希码将*非常接近唯一。*鉴于您没有改变平等的含义（它基本上仍然是参考平等），我看不出有什么好的理由这样做。

# c++ - C++ 对不同命名空间中函数的模糊调用

> ID：10235201
> 
> 赞同：5
> 
> 时间：2012-04-19T19:18:03.803
> 
> 标签：c++, filenames

这让我和一些同事感到困惑，但我们已经验证这是针对大约 5 种不同编译器的错误。他们都返回这个小代码片段是“模棱两可的”。

```
namespace foo {
  struct type_t {
    int x;
  };
  void bar( type_t & );
}

void bar( foo::type_t & );

void func( void ) {
  foo::type_t x = { 10 };
  bar(x);
} 
```

Clang 返回以下内容：

```
func.cpp:12:3: error: call to 'bar' is ambiguous
  bar(x);
  ^~~
func.cpp:5:8: note: candidate function
  void bar( type_t & );
       ^
func.cpp:8:6: note: candidate function
void bar( foo::type_t & );
     ^
1 error generated. 
```

为什么会这样？代码中没有“使用”语句。解析顺序不应该包含 foo 命名空间，那么为什么要在那里搜索呢？为什么这是模棱两可的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T19:19:44.570

它是[依赖于参数的查找](http://en.wikipedia.org/wiki/Argument-dependent_name_lookup)。to 的参数`bar`在`foo`命名空间中，因此 bar 也在该命名空间中查找，导致歧义。如果您想`foo`从全局命名空间中明确调用`::foo`.

# java - 通过代码处理 JDialog，不要让用户关闭它

> ID：10235202
> 
> 赞同：3
> 
> 时间：2012-04-19T19:18:04.493
> 
> 标签：java, swing, dispose, jdialog

我有一个简短的代码，我想处理一个对话框，但不希望用户能够关闭它，它只是不起作用，请帮助我。

```
 import javax.swing.*;
    public class Processing extends JOptionPane{

    JDialog jd;
    public Processing(){
        super(null, JOptionPane.DEFAULT_OPTION, 
                  JOptionPane.INFORMATION_MESSAGE, null, new Object[]{});
        Icon processPic = new ImageIcon("C:\\Users\\Judit\\Desktop\\Mesekocka3D"
                + "\\externals\\pics\\szamitas.gif");

        setMessage(processPic);
        jd = createDialog("Számítás");

        jd.setDefaultCloseOperation(WindowConstants.DO_NOTHING_ON_CLOSE);
        jd.setVisible(true);
        jd.dispose();
    }   
} 
```

这就是我的代码现在的样子，我使用 Jdialog 而不是 Joptionpane，我是否应该编写更多字符以使网站接受我的编辑？

```
import javax.swing.*;

public class Mifasz
{
 private static class Processing extends JDialog{

public Processing(){
    Icon processPic = new ImageIcon("C:\\Users\\Judit\\Desktop\\Mesekocka3D"
            + "\\externals\\pics\\szamitas.gif");
    JLabel label = new JLabel(processPic);
    add(label);
    setTitle("Számítás");
    setDefaultCloseOperation(WindowConstants.DO_NOTHING_ON_CLOSE);        
    setSize(400, 70);
    setLocation(330, 300);
    setModal(true);
    setVisible(true);
    dispose();
}       
}

  public static void main(String[] args)
  {
    Processing pc = new Processing();
  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T20:14:32.223

> 我想在短时间内为用户显示一个 gif，它就像一个加载屏幕，我不希望他对应用程序做任何事情，所以我正在使用 joptionpane，但我也想禁用X 按钮，所以我使用 jdialog，因为我没有找到禁用选项窗格的 X 按钮的选项。

1）你可以使用未装饰的`JDialog#setUndecorated(true);`

2）作为`gif`图标[放入](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html)[JLabel](http://docs.oracle.com/javase/tutorial/uiswing/components/label.html)

3) 使用[Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)进行计时，Swing Timer 的输出可以是[Swing Action](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)和 inside `actionPerformed`put`JDialog#setVisible(fasle);`

编辑

> 我想阻止它，它需要在用户单击 JCombobox 项目时多次使用

1）只创建一次JDialog，你只会重用它

`actionPerformed`2) 运行 Swing Timer#repeat(false)并期待延迟，输入`JDialog#setVisible(fasle);`

3) 事件从选定的`Item`( `JComboBox`) 更改`Icon``JLabel` `myLabel#setIcon(myAnotherGIF)`

4) 内`invokeLater`包装`JDialog#setVisible(true);`

5) 不需要任何其他步骤

仅在特殊情况下

6）你必须打电话

```
myIcon.getImage().flush();
myLabel.setIcon(myIcon); 
```

`Icon's`如果您在重新粉刷时遇到问题`JLabel`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T19:21:15.310

你需要打电话

```
jd.setVisible(false); 
```

进而

```
jd.dispose(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T23:51:27.293

你想要做的是一个启动画面，看[这个](http://docs.oracle.com/javase/tutorial/uiswing/misc/splashscreen.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T17:27:53.717

好的，所以我找到了一个非常简单的解决方案：我只是在处理时禁用大型机。 [如何在 Swing java 中制作 JFrame 模态](https://stackoverflow.com/questions/1481405/how-to-make-a-jframe-modal-in-swing-java)

# ios - 应用程序进入后台后每 n 分钟获取一次用户位置

> ID：10235203
> 
> 赞同：27
> 
> 时间：2012-04-19T19:18:06.010
> 
> 标签：ios, objective-c, iphone, background, locationmanager

我正在尝试实施[这篇文章](https://stackoverflow.com/questions/6347503/how-do-i-get-a-background-location-update-every-n-minutes-in-my-ios-application)中给出的建议。

不幸的是，我不清楚这些步骤。我尝试实施这些建议，但即使在我启动和停止 locationServices 之后，backgroundTimeRemaining 也会继续减少。这就是我开发它的方式：

```
- (void)applicationDidEnterBackground:(UIApplication *)application {

    UIApplication*    app = [UIApplication sharedApplication];

    bgTask = [app beginBackgroundTaskWithExpirationHandler:^{
        [app endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
    }];

    // Start the long-running task and return immediately.
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        // Do the work associated with the task.
        self.timer = nil;
        [self initTimer];

    });
} 
```

初始化定时器：

```
- (void)initTimer {

    // Create the location manager if this object does not
    // already have one.
    if (nil == self.locationManager)
        self.locationManager = [[CLLocationManager alloc] init];

    self.locationManager.delegate = self;
    [self.locationManager startMonitoringSignificantLocationChanges];

    if (self.timer == nil) {
        self.timer = [NSTimer scheduledTimerWithTimeInterval:0.3
                                              target:self
                                            selector:@selector(checkUpdates:)
                                            userInfo:nil
                                             repeats:YES];
    }
} 
```

检查更新：

```
- (void)checkUpdates:(NSTimer *)timer{
    UIApplication*    app = [UIApplication sharedApplication];
    double remaining = app.backgroundTimeRemaining;
    if(remaining < 580.0) {
        [self.locationManager startUpdatingLocation]; 
        [self.locationManager stopUpdatingLocation]; 
        [self.locationManager startMonitoringSignificantLocationChanges];
    }
    DbgLog(@"Reminaing %f", app.backgroundTimeRemaining);
} 
```

有没有人对我的代码中可能有什么问题提出建议？initTimer 和 checkUpdates 都被调用，但仅限于后台执行时间（+- 10 分钟）。我希望应用程序“永远”每 n 分钟更新一次位置。

我的应用程序的 UIBackgroundModes 设置为位置。

**更新：**

我现在正在重置 didUpdateToLocation 和 didFailWithError 上的计时器。但仍然 backgroundTimeRemaining 不断减少：

```
- (void)locationManager:(CLLocationManager *)manager 
didUpdateToLocation:(CLLocation *)newLocation 
       fromLocation:(CLLocation *)oldLocation {

NSLog(@"Did Update Location = %f / %f", [newLocation coordinate].latitude, [newLocation coordinate].longitude);

UIApplication*    app = [UIApplication sharedApplication];

bgTask = [app beginBackgroundTaskWithExpirationHandler:^{
    [app endBackgroundTask:bgTask];
    bgTask = UIBackgroundTaskInvalid;
}];

// Start the long-running task and return immediately.
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    // Do the work associated with the task.

    [self initTimer];

});
}

- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error {

[self.locationManager stopUpdatingLocation]; 
UIApplication*    app = [UIApplication sharedApplication];

bgTask = [app beginBackgroundTaskWithExpirationHandler:^{
    [app endBackgroundTask:bgTask];
    bgTask = UIBackgroundTaskInvalid;
}];

// Start the long-running task and return immediately.
[self initTimer];
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    // Do the work associated with the task.

});

} 
```

我也使计时器无效：

```
- (void)checkUpdates:(NSTimer *)timer{
UIApplication*    app = [UIApplication sharedApplication];
double remaining = app.backgroundTimeRemaining;
if(remaining < 580.0 && remaining > 570.0) {
    [self.timer invalidate];
    self.timer = nil;
    [self.locationManager startUpdatingLocation]; 
    [self.locationManager stopUpdatingLocation]; 
}
DbgLog(@"*************************Checking for updates!!!!!!!!!!! Reminaing %f", app.backgroundTimeRemaining);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-01T11:10:07.813

对于其他任何一个想要弄清楚这一点的人来说，我有一个简单的解决方案。

1.  研究来自[raywenderlich.com](http://www.raywenderlich.com/29948/backgrounding-for-ios)的示例。示例代码完美运行，但不幸的是在后台定位期间没有计时器。这将无限期地运行。
2.  使用此代码段添加计时器：

    ```
    -(void)applicationDidEnterBackground {
      [self.locationManager stopUpdatingLocation];

      UIApplication* app = [UIApplication sharedApplication];

      bgTask = [app beginBackgroundTaskWithExpirationHandler:^{
        [app endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
      }];

      self.timer = [NSTimer scheduledTimerWithTimeInterval:intervalBackgroundUpdate
                                                    target:self.locationManager
                                                  selector:@selector(startUpdatingLocation)
                                                  userInfo:nil
                                                   repeats:YES];
    } 
    ```

3.  只是不要忘记在 info.plist 中添加“应用程序注册以进行位置更新”。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-25T17:58:22.503

经过几天尝试所有可能的解决方案后，我终于能够使其工作。这是我的解决方案中的错误：

*   我需要设置**2 个**UIBackgroundTaskIdentifiers，一个用于计时器，另一个用于 locationManager

在我的解决方案中，只需添加：

```
UIApplication *app = [UIApplication sharedApplication];

bgTask2 = [app beginBackgroundTaskWithExpirationHandler:^{ 
[app endBackgroundTask:bgTask2]; 
bgTask2 = UIBackgroundTaskInvalid; }];

self.locationManager.delegate = self; 
[self.locationManager startUpdatingLocation]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-19T19:24:04.120

一旦你在后台，你只能有 10 分钟的额外时间。没有办法扩展它。您应该改用位置后台服务。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-09-06T07:44:08.020

**工作代码（整个逐步代码）** *修改后的scurioni代码*

**步骤1**

*   转到项目-> 功能-> 背景模式-> 选择位置更新。
*   转到 Project -> Info -> 添加带有可选字符串的键 NSLocationAlwaysUsageDescription。

**第2步**

将此代码添加到 AppDelegate.m

```
@interface AppDelegate ()<CLLocationManagerDelegate>
@property (strong, nonatomic) CLLocationManager *locationManager;
@property (strong, nonatomic) NSTimer *timer;
@end 
```

**第 3 步** 将此代码添加到*AppDelegate.m中的**applicationDidEnterBackground*方法中

 *```
 - (void)applicationDidEnterBackground:(UIApplication *)application {
        UIApplication *app = [UIApplication sharedApplication];
        __block UIBackgroundTaskIdentifier bgTaskId =
        [app beginBackgroundTaskWithExpirationHandler:^{
            [app endBackgroundTask:bgTaskId];
            bgTaskId = UIBackgroundTaskInvalid;
        }];

        dispatch_async( dispatch_get_main_queue(), ^{
            self.timer = nil;
            [self initTimer];
            [app endBackgroundTask:bgTaskId];
            bgTaskId = UIBackgroundTaskInvalid;
        });
    }

- (void)initTimer {
    if (nil == self.locationManager)
        self.locationManager = [[CLLocationManager alloc] init];

    self.locationManager.delegate = self;
    [self.locationManager requestAlwaysAuthorization];
    [self.locationManager startMonitoringSignificantLocationChanges];
    if (self.timer == nil) {
        self.timer = [NSTimer scheduledTimerWithTimeInterval:0.3
                                                      target:self
                                                    selector:@selector(checkUpdates:)
                                                    userInfo:nil
                                                     repeats:YES];
    }
}

- (void)checkUpdates:(NSTimer *)timer{
    UIApplication *app = [UIApplication sharedApplication];
    double remaining = app.backgroundTimeRemaining;
    if(remaining < 580.0) {
        [self.locationManager startUpdatingLocation];
        [self.locationManager stopUpdatingLocation];
        [self.locationManager startMonitoringSignificantLocationChanges];
    }
}

- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation {
    NSLog(@"Did Update Location = %f / %f", [newLocation coordinate].latitude, [newLocation coordinate].longitude);
    [self updateLocationWithLatitude:[newLocation coordinate].latitude andLongitude:[newLocation coordinate].longitude];
    UIApplication*    app = [UIApplication sharedApplication];
    __block UIBackgroundTaskIdentifier bgTask =
    bgTask = [app beginBackgroundTaskWithExpirationHandler:^{
        [app endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
    }];
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        [self initTimer];
    });
}

- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error {
    [self.locationManager stopUpdatingLocation];
    UIApplication *app = [UIApplication sharedApplication];
    __block UIBackgroundTaskIdentifier bgTask =
    bgTask = [app beginBackgroundTaskWithExpirationHandler:^{
        [app endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
    }];
    [self initTimer];
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        // Do the work associated with the task
    });
}

-(void)updateLocationWithLatitude:(CLLocationDegrees)latitude
                     andLongitude:(CLLocationDegrees)longitude{
//Here you can update your web service or back end with new latitude and longitude
} 
```*

# ruby-on-rails - 用 rabl 处理 2 种不同的类型

> ID：10235204
> 
> 赞同：0
> 
> 时间：2012-04-19T19:18:15.707
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, rabl

我正在对名为位置的表和名为项目的表进行搜索。它们都是短表（2k 项），因此对此查询的性能并不紧张。

我将搜索一个然后另一个，从而将 2 种不同类型的对象作为单个数组返回。有没有办法可以使用 rabl 模板来处理其中任何一种情况。就像是：

```
collection @locations

@locations.each do |x|
if x.class.to_s=='Location'
  extends "api/location"
elsif x.class.to_s=='Location'
  extends "api/item"
end 
```

谢谢

**编辑 #1** 试过这个，但不知道这能带给我什么。该数组只是不同对象的列表，不确定展平数组可以实现什么。

```
collection @b

node(:data) do |m|
  [@locations, @items].flatten
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:44:34.687

我玩了一会儿，想出了这个，它应该显示一个 JSON 数组，命名为and`array_name`中的所有对象：`@locations``@items`

*.rabl：

```
node(:array_name) do |m|
  [@locations, @items].flatten
end 
```

# sharepoint - SharePoint 中类似购物车功能的最佳实践

> ID：10235205
> 
> 赞同：0
> 
> 时间：2012-04-19T19:18:17.383
> 
> 标签：sharepoint, session, sharepoint-2010, concurrency

我需要在 SharePoint 上构建一个报价系统，人们可以在其中进入现有网站，而不是将商品添加到购物车（这家公司不直接销售），他们可以将商品添加到报价中，然后打印报价并将其交给经销商。

问题是，SharePoint 不能很好地处理 Session，我们不想以任何我们不需要的方式弄乱服务器。

在不使用会话的情况下，我应该如何最好地以类似购物车的方式同时保存产品和配件列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T06:41:18.033

您可以通过 web.config 文件轻松地在 SharePoint Web 应用程序上启用会话状态。[但是，从规模的角度来看，使用基于cookie 的](http://msdn.microsoft.com/en-us/library/ms178194%28v=vs.85%29.aspx)方法可能会更好。

# java - Grails：groovy.sql.Sql 和Model.withTransaction 会发生什么？

> ID：10235210
> 
> 赞同：2
> 
> 时间：2012-04-19T19:18:38.930
> 
> 标签：java, grails, groovy, grails-orm

如果我将存储过程的 sql 调用放在Grails GORM中`withTransaction`，是否会使用相同的连接？例如：`groovy.sql.Sql``withTransaction`

可以说我有一个命令：

```
@Validateable
class MyCommand {
  List<MyModel> listOfModel
} 
```

然后我有一个服务来处理这个命令

```
class MyService {
  def dataSource

  def handleCommand( MyCommand command ) {
    MyModel.withTransaction { status ->
      for( MyModel m : command.listOfModel ) {
         if( !m.save() ) {
           status.setRollbackOnly()
           throw new MyException(m.errors)
         }
      }

      //now I need to call a stored proc. This will use the same connection?
      //withTransaction will commit the call?
      Sql s = new Sql(dataSource)
      s.call('my_stored_proc')
    }
  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T20:34:39.330

我已经找到了如何做到这一点。

```
def sessionFactory

//after GORM saves...  
sessionFactory.currentSession.flush()
Sql s = new Sql( sessionFactory.currentSession.connection()  )
s.call() 
```

[本主题](http://grails.1312388.n4.nabble.com/Stored-Procedures-GORM-td3901546.html)中的更多信息。

# c++ - C ++在到达输入结束后结束do while循环

> ID：10235213
> 
> 赞同：1
> 
> 时间：2012-04-19T19:18:44.553
> 
> 标签：c++, loops, do-while

我正在尝试编写一个使用 C++ 将输入转换为二进制形式的程序。但是，我对继续翻译每个附加输入的 do-while 循环部分有一些问题。do-while 循环的条件搞砸了，所以输出变成了一个无限循环。

```
do{
   cin>>number;
   if (number<0)
      cout<< number<< " (base 10) is not a positive integer"<<endl;
   else if (number==0) 
      cout<< number<< " (base 10) = 0 (base 2) ";
   else {
      binary= binaryConverter(number);
      cout<< number << " (base 10) =";
      cout<< binary << " (base 2)";
   }
   cout<< endl;
}while(????); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T19:24:50.470

这将循环直到接收到终止信号（如 CTRL-C），然后终止流

```
while(cin >> number) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T19:34:46.303

规范的 C++ 输入循环如下所示：

```
ItemType item;
while ( input_stream >> item ) {
   // Do something with item, for example:
   //   std::cout << item;  or,
   //   container.push_back(item);  or,
   //   sum += item;  or whatever.
} 
```

这种循环将在每个输入项中只运行一次，将在文件结尾处停止（无论是磁盘文件的结尾还是控制台发出的 EOF 信号）。一旦输入不再符合项目的格式（例如，如果`ItemType`是`int`并且输入中包含字母 Q），它也会停止。

具体来说，*永远不*应该使用`.eof()`or`.good()`作为循环条件。几乎不应该使用 a`do-while`作为输入循环。

在您的情况下，循环应如下所示：

```
while(std::cin >> number) {
  std::cin>>number;
  if (number<0)
    std::cout<< number<< " (base 10) is not a positive integer";
  else if (number==0) 
    std::cout<< number<< " (base 10) = 0 (base 2) ";
  else {
    binary= binaryConverter(number);
    std::cout<< number << " (base 10) =";
    std::cout<< binary << " (base 2)";
  }
  std::cout<< "\n";
} 
```

^(Ps 我修改了你的代码以符合另外两个被广泛采用的标准：永远`using namespace std;`不要说，`std::endl`当你的意思是永远不要说`'\n'`.)

# excel - 如何在 Excel 2007 中将多行折叠成一行？

> ID：10235214
> 
> 赞同：3
> 
> 时间：2012-04-19T19:18:46.227
> 
> 标签：excel

我有一个大型 Excel 表（591 列，2645 行），其基本格式如下所示：

```
| Time | Data 1 | Data 2 | Data 3 | Data 4 | Data 5 | Data 6 | Data 7 |
|======+========+========+========+========+========+========+========|
| 0.01 |  0.35  |        |        |        |        | 0.1351 | 0.2398 | 
| 0.02 |        |  0.42  |        |        |        | 0.4314 | 0.4342 | 
| 0.03 |        |        |  0.99  |        |        | 0.3414 | 0.4321 |
| 0.04 |        |        |        |  0.12  |        | 0.4351 | 0.4256 |
| 0.05 |        |        |        |        |  0.66  | 0.7894 | 0.9874 | 
```

这基本上是数据流的记录，其中某些字段在每个时间步仅采样一次，而其他字段在每个单独的时间步上采样。然后，一旦循环完成，就会记录完整的“记录”（即，再次写入“数据 1”）。

出于数据处理和分析的目的，最终的数据记录如下所示：

```
| Time | Data 1 | Data 2 | Data 3 | Data 4 | Data 5 | Data 6 | Data 7 |
|======+========+========+========+========+========+========+========|
| 0.05 |  0.35  |  0.42  |  0.99  |  0.12  |  0.66  | 0.7894 | 0.9874 | 
```

请注意，时间戳等于在表中找到的时间戳，重复数据字段等于当时的数据值，周期性数据字段等于每个字段的最后报告值。

然后，单个循环的记录基本上将包括在给定时间范围内为任何字段记录的最终值。我可以轻松完成这一步，但每个数据集有 2600 多行数据要处理，还有六个数据集要处理。

是否有一种干净/简单/实用的方法可以在整个数据文件中执行此操作？我可以通过多种方式强制执行此操作，但我希望不必重新发明轮子。如果我可以将输出写入新工作表，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T20:45:03.800

欢迎来到 SO。

我有一个基于长度为 5 的循环的小解决方案。它使用该`indirect`功能，您应该能够根据需要对其进行扩展。

首先，我在您的示例中添加了一些行，以达到 0.15 的时间。这占用了 a1 到 h16。然后我将 i17 添加到 j19，以告知要检查哪些行。我做了这些：

```
 2  6
 7 11
12 16 
```

这意味着 i17 和 j17 代表第 2 到第 6 行（或数据中的第 1 行）。我建议你让 j17 = i17+4 和 j18=i17+1。

好的，间接函数来了。在 a17,`=INDIRECT("A"&$J17)`中，这意味着，给我 col A，第 2 行（因为单元格 i17 中有一个 2。该`$`方法使用绝对列，并继续在公式中使用 I）。

在 b17 中`=SUM(INDIRECT("b"&$I17&":b"&"$"&$J17))`，表示 b2 到 b6 的总和。

在 c17 中，`=SUM(INDIRECT("c"&$I17&":c"&"$"&$J17))`.

对 d17、e17 和 f17 重复该模式。

在 g17 中，您只想将 g6 中的内容复制到`=INDIRECT("g"&$J17)`.

在 h17 中，您将 h6 中的内容复制到`=INDIRECT("h"&$J17)`.

然后，您可以将 a17:h17 中的公式向下复制三行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T20:49:27.163

像这样的东西可能对你有用

```
Sub tester()
    SummarizeRows ThisWorkbook.Sheets("Sheet1").Range("A1"), _
                  ThisWorkbook.Sheets("Sheet2").Range("A1")
End Sub

Sub SummarizeRows(rngIn As Range, rngOut As Range)

Const MASTER_COL As Long = 2 'summarize when new value here (except first row)

Dim vals(), data
Dim numRows As Long, numCols As Long
Dim r As Long, c As Long, r_out As Long
Dim c2 As Long, v

    r_out = 1
    'get all the input data
    data = rngIn.CurrentRegion.Value
    numRows = UBound(data, 1)
    numCols = UBound(data, 2)
    ReDim vals(1 To numCols)

    For r = 2 To numRows
        For c = 1 To numCols
            v = data(r, c)
            If Len(v) > 0 Then
                If c = MASTER_COL And r > 2 Then
                    'new value in "master" column...
                    r_out = r_out + 1
                    For c2 = 1 To numCols
                        data(r_out, c2) = vals(c2)
                        vals(c2) = ""
                    Next c2
                End If
                vals(c) = v
            End If
        Next
    Next r

    'write any last values
    r_out = r_out + 1
    For c2 = 1 To numCols
        data(r_out, c2) = vals(c2)
    Next c2

    rngOut.Resize(r_out, numCols).Value = data

End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T21:16:48.117

这是我最终使用的解决方案...

首先，我创建了第二张表（表 2），复制了标题行，并将第一行中的每条记录设置为等于第一张表（表 1）第一行中的第一条记录。如果工作表 1 中的第一行有一个空值，我将其替换为零。例如：

```
=IF(Sheet1!A2="",0,Sheet1!A2) 
```

然后我使用公式有条件地将值从工作表 1 复制到工作表 2，或者使用工作表 2 中当前单元格上方的值。例如，在 B3 中（第二条记录，第一个字段）：

```
=IF(Sheet1!B3="",B2,Sheet1!B3) 
```

然后，我将其复制到工作表 2 中具有工作表 1 中可用源值的每个单元格。结果如下所示：

```
| Time | Data 1 | Data 2 | Data 3 | Data 4 | Data 5 | Data 6 | Data 7 |
|======+========+========+========+========+========+========+========|
| 0.01 |  0.35  |  0     |  0     |  0     |  0     | 0.1351 | 0.2398 | 
| 0.02 |  0.35  |  0.42  |  0     |  0     |  0     | 0.4314 | 0.4342 | 
| 0.03 |  0.35  |  0.42  |  0.99  |  0     |  0     | 0.3414 | 0.4321 |
| 0.04 |  0.35  |  0.42  |  0.99  |  0.12  |  0     | 0.4351 | 0.4256 |
| 0.05 |  0.35  |  0.42  |  0.99  |  0.12  |  0.66  | 0.7894 | 0.9874 | 
```

由此，我能够生成相关的图表来有效地分析数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T19:28:29.423

将其粘贴到数据下方行的单元格中。A 是您要粘贴到的列

```
=LOOKUP(2,1/(A1:A5<>""),A:A) 
```

# game-engine - 如何分配可能超出范围因而不需要渲染的网格？

> ID：10235218
> 
> 赞同：0
> 
> 时间：2012-04-19T19:19:06.690
> 
> 标签：game-engine, mesh

我正在编写自己的游戏和游戏引擎。我感到困惑的一件事是，当我吸引附近的玩家时，我不确定该怎么做。附近可能有 0 个玩家或多个玩家。我应该在玩家进入范围时动态分配网格实例并在玩家走出范围时删除它们，还是应该使用静态分配并保留网格实例的资源池以根据需要使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T19:43:55.190

如果您正在编写包含大量角色的 MMORPG，如果您有一段时间没有看到相应的演员，您可能会破坏您的网格，但在 12 人 FPS 中，只需将它们始终保存在内存中；没有用重新构建它们并将数据重新上传到图形卡。

在渲染之前，只需决定是否渲染每个网格（或世界“块”）。常见的剔除操作是（按顺序）：

*   距离剔除：如果网格/演员距离相机 > X 距离，则剔除它
*   视锥体剔除：如果网格/actor在视域之外，则剔除它
*   遮挡剔除（我想是可选的）：剔除实体几何背后的网格/演员。我会说这是非常先进的。

# python - Python 日志记录 - logrotate 选项

> ID：10235220
> 
> 赞同：2
> 
> 时间：2012-04-19T19:19:17.527
> 
> 标签：python, logging, multiprocessing, logrotate

我正在尝试使用 logrotate 为多进程 python 服务轮换日志。以下哪种组合是常用的（正确且安全）？

*   WatchedFileHandler + logrotate 与创建选项

    或者

*   FileHandler + logrotate 与 copytruncate 选项

Option-1 似乎用于 openstack nova 和 Glance 项目。我还没有看到使用 option-2。选项 2 会按预期工作吗？当用于多进程应用程序时，这些方法有什么缺点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T00:05:53.493

正如`WatchedFileHandler`专门为与外部旋转工具一起使用而提供的一样`logrotate`，我建议使用它（选项 1）。为什么你认为你需要选项 2？

在每个进程写入自己的日志的多进程环境中，应该没有任何问题。但是，进程不应该共享日志文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T19:46:12.487

我建议使用 Python 自己的日志轮换来获得最佳集成。唯一的缺点是您有一个额外的地方来配置详细信息。

# c# - What am I doing wrong in this ASPxPageControl? (dev express)

> ID：10235228
> 
> 赞同：2
> 
> 时间：2012-04-19T19:19:49.470
> 
> 标签：c#, asp.net, devexpress

Here is what I have. I am trying to use Developer Express ASPxPageControl. I want to only load the first TabPage (and WebUserControl it contains) when the page is loaded and then when I click on subsequent tabs, load those WebUserControls. I have found documentation [here](http://www.devexpress.com/Support/Center/p/Q348532.aspx) and other places telling me to

> set the ASPxPageControl.AutoPostBack property to false, and ASPxPageControl.EnableCallBacks set to true

However, this is not working for me. I have verified with the debugger that when the main page is loaded, each of my WebUserControls are also loading. Am I misunderstanding the idea of the ASPxPageControl??

```
<dxtc:ASPxPageControl ID="ASPxPageControl1" runat="server" ActiveTabIndex="0" 
    EnableCallBacks="True"
     AutoPostBack="false" >
    <TabPages>
        <dxtc:TabPage Text="Detail" Name="tabDetail">
            <ContentCollection>
                <dxw:ContentControl ID="ContentControl3" runat="server">

                    <uc13:WUCDetail ID="WUCDetail" runat="server" />

                </dxw:ContentControl>
            </ContentCollection>
        </dxtc:TabPage>
        <dxtc:TabPage Text="Room" Name="tabRoom">
            <ContentCollection>
                <dxw:ContentControl ID="ContentControl4" runat="server">

                    <uc11:WUCRoom ID="WUCRoom" runat="server" />

                </dxw:ContentControl>
            </ContentCollection>
        </dxtc:TabPage>
        <dxtc:TabPage Text="Mailers" Name="tabMailers">
            <ContentCollection>
                <dxw:ContentControl ID="ContentControl5" runat="server">

                    <uc10:WUCMailers ID="WUCMailers" runat="server" />

                </dxw:ContentControl>
            </ContentCollection>
        </dxtc:TabPage>     
     </TabPages>

</dxtc:ASPxPageControl> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T04:23:12.883

> However, this is not working for me. I have verified with the debugger that when the main page is loaded, each of my WebUserControls are also loading. Am I misunderstanding the idea of the ASPxPageControl??

I'm afraid you are misunderstanding the idea of the example ["How to create and load an active tab's content on a callback"](http://www.devexpress.com/example=E10). The main idea of this example is to create and load an active tab's content on a callback. But you've specified content for all pages directly in markup. Thus these controls will be created and loaded in any cases. Please, create an empty tabpages and then use the approach demonstrated in this example to create and load page's content only when active tab changed.

# spring - mvn selenium:selenese 在 Spring Roo 教程中挂起

> ID：10235231
> 
> 赞同：1
> 
> 时间：2012-04-19T19:20:05.590
> 
> 标签：spring, maven, selenium, spring-roo

我正在通过 Spring Roo 教程进行工作，但此时我陷入了困境：

[http://static.springsource.org/spring-roo/reference/html/beginning.html#beginning-step-7](http://static.springsource.org/spring-roo/reference/html/beginning.html#beginning-step-7)

这是 Maven 命令行输出：

```
C:\pizza>mvn selenium:selenese
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building pizzashop 0.1.0.BUILD-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- selenium-maven-plugin:2.1:selenese (default-cli) @ pizzashop ---
log4j:WARN No appenders could be found for logger (org.openqa.selenium.server.SeleniumServer).
log4j:WARN Please initialize the log4j system properly.
14:53:20.476 INFO - Preparing Firefox profile...
14:53:23.026 INFO - Launching Firefox... 
```

此时我的 FireFox 11 浏览器已启动，但现在有可见的 URL，一切似乎都挂起。

欢迎任何建议或想法。

环境：OS Windows 7 JDK 1.6 Maven 3.0.3 Firefox 11最新spring roo下载

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:12:59.033

它是 pom.xml 中的 selenium 插件配置。注意：开箱即用（可以这么说） Roo 将期待 Firefox 3.x 您可以安装 Firefox 3.x，也可以更改配置以使用其他支持的浏览器 - 例如：

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>selenium-maven-plugin</artifactId>
            <version>2.1</version>
            <configuration>
            <browser>*safari</browser>
            <suite>src/main/webapp/selenium/test-suite.xhtml</suite>
            <results>${project.build.directory}/selenium.html</results>
            <startURL>http://localhost:4444/</startURL>
        </configuration>
            <dependencies>
                <dependency>
                    <groupId>org.seleniumhq.selenium</groupId>
                    <artifactId>selenium-server</artifactId>
                    <version>2.9.0</version>
                </dependency>
            </dependencies>
        </plugin> 
```

# localization - load_plugin_textdomain 不工作

> ID：10235232
> 
> 赞同：6
> 
> 时间：2012-04-19T19:20:08.437
> 
> 标签：localization, wordpress

嘿，我正在尝试本地化一个名为 Donate Plus 的插件（在技术上已本地化）。

该插件附带 en_CA 和 de_DE 文件，我尝试创建 he_IL 文件但没有成功。所以我尝试了插件附带的de文件，但没有用。

我已经将 wp-config.php 中的 WPLANG 设置为 de_DE 但这并没有改变代码。

这是设置代码：

```
load_plugin_textdomain( 'dplus', '/wp-content/plugins/donate-plus' ); 
```

我确实检查了所有字符串是否都设置为本地化。

有人有线索吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-03-15T22:56:35.450

我只是遇到了类似的问题，您是否尝试将文件从 de_DE.po 和 de_DE.mo 重命名为 name-of-plugin-de_DE.mo 和 name-of-plugin-de_DE.po（更改 name-of-plugin当然是你的）？

dplus-de_DE.mo 和 dplus-de_DE.po 它必须工作；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T07:23:39.137

load_plugin_textdomain 采用三个参数。在您的情况下，它将是这样的（假设 .po 和 .mo 文件位于名为“languages”的子目录中）

```
load_plugin_textdomain( 'dplus', false, dirname( plugin_basename( __FILE__ ) ) . '/languages/' ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T10:09:56.280

我检查了[DonatePlus 插件](http://plugins.svn.wordpress.org/donate-plus/trunk/donate-plus.php)的来源，发现该插件进行了错误的本地化。

load_plugin_textdomain() 调用是在 DonatePlus 类构造函数中进行的。但它应该存在于“init”钩子中。*尝试在init*函数中添加以下代码（位于文件中） 。

```
if( class_exists('DonatePlus') )
    $donateplus = new DonatePlus(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T06:21:20.780

所有 .po 和 .mo 文件都存储在哪里？它们是否在 /wp-content/plugins/donate-plus 文件夹本身内？如果没有，则更改路径或移动文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-02T07:58:37.027

使用：load_textdomain(TEXT_DOMAIN, WP_PLUGIN_DIR.'/'.dirname(plugin_basename( **FILE** )).'/languages/'.get_locale().'.mo');

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-06T08:30:45.833

`load_plugin_textdomain`我有一个类似的问题，我正在使用 PSR-4 从服务类中加载带有函数的翻译文件。这意味着`dirname( plugin_basename( __FILE__ ) )`字符串返回了错误的路径。

*   正确的路径是相对路径`your-plugin/languages`（假设您从`/languages`目录加载翻译文件）。
*   诸如此类的绝对路径`/var/www/html/wp-content/plugins/my-plugin/languages`不起作用。

我的插件文件结构如下所示：

```
- my-plugin
    - assets
    - languages
    - services
        - Api
        - Base
            Translation.php
        - ...
        Plugin.php
    - vendor
    - views
    composer.json
    composer.lock
    index.php
    my-plugin.php
    uninstall.php 
```

由于我的翻译服务放在`/services/Base/`目录中，这对我有用：

```
$root = plugin_basename(dirname(__FILE__, 3));
load_plugin_textdomain( 'my-plugin', false, "$root/languages/"); 
```

此外，我根本没有使用操作钩子而不是`init`or`plugins_loaded`并在插件开始时触发了该`load_plugin_textdomain`函数，因为钩子没有足够早地触发，无法翻译管理菜单和操作链接。

# jquery - 在 jQuery 上打开新页面单击 + 停止显示/隐藏

> ID：10235233
> 
> 赞同：0
> 
> 时间：2012-04-19T19:20:09.020
> 
> 标签：jquery

我有一个用来显示/隐藏内容的菜单。效果很好，但是当用户单击第一个链接时，我想重新加载整个页面，而不是执行显示/隐藏功能。对于其他菜单项，我想保持显示/隐藏。

这是我的代码：

**jQuery**

```
$(document).ready(function() {

    $('#nav li a').first().addClass('blue');

    $('#nav li a').click(function(){

    $('#nav li a').first().removeClass('blue');
    $('#nav li a').removeClass('blue');
    $(this).addClass('blue');

    var toLoad = $(this).attr('href')+'#content';  
    $('#content').hide(0,loadContent);  
    $('#load').remove();  
    $('#wrapper').append('<span id="load">LOADING...</span>');  
    $('#load').fadeIn('normal');  
    //window.location.hash = //$(this).attr('href').substr(0,$(this).attr('href').length-0);  
    function loadContent() {  
        $('#conent').load(toLoad,'',showNewContent())  
    }  
    function showNewContent() {  
        $('#content').show(0,hideLoader());  
    }  
    function hideLoader() {  
        $('#load').fadeOut('normal');  
    }  
    return false;  
    });
}); 
```

**HTML**

```
<div id="leftcol">

<div id="menu">
<ul id="nav">
<li><a href="/option1">Option 1</a></li><br />
<li><a href="/option2">Option 2</a></li><br />
<li><a href="/option3">Option 3</a></li><br />
</ul>
</div>
</div>

<div id="content">
<div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T19:39:58.683

在您的`$('#nav li a').click(function(){`块中，您需要检查它是否是列表中的第一项，如果是，只需返回以刷新页面：

```
$(document).ready(function() {
    var $first = $('#nav li a').first();

    $first.addClass('blue');    
    $('#nav li a').click(function(){
        if ( this == $first[0] ) {
            return true;
        }

        $first.removeClass('blue');
        ... 
```

# web - 在 seam 中配置 Web 服务（“没有活动的应用程序上下文”）

> ID：10235234
> 
> 赞同：1
> 
> 时间：2012-04-19T19:20:10.140
> 
> 标签：web, service, jboss

我正在使用 seam 2.0.1 构建 Web 服务并将其部署在 jboss 4.2.2 GA 上。我有我的 Web 服务类，它可以访问另一个类（更新数据库中的内容）。

我`standard-jaxws-endpoint-config.xml`在 META-INF 文件夹中。

```
@Name("pluginHandler")
@Scope(ScopeType.APPLICATION)  
@Install(precedence = Install.BUILT_IN)
@Startup(depends = "someclass")

@Stateless
@WebService(name = "Plugin", serviceName = "PluginService")

public class PlugInHandler {

@WebMethod
public int processRequest(Account account)
{

    Workbench wb = Component.getInstance("Workbench");
    //above line keeps throwing exception "No application context active"

    }

} 
```

我一直在寻找不同的论坛，但我找不到解决方案。我尝试使用`Lifecycle.begincall()`但`Lifecycle.endCall()`没有任何效果。我也需要`web.xml`吗？如果是，应该`web.xml`包含哪些信息？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:01:44.590

我承认这是一个相当过时的问题，但对于那些仍然分享你（以及目前我的）困境的可怜的灵魂，这里有一些指针（从各种来源但主要来自[https://community。 jboss.org/thread/192046](https://community.jboss.org/thread/192046)）：

**Java EE Web 服务**

首先，使用 JBoss 4.2.2 可能意味着使用 Java EE5。那里的 Web 服务（有或没有 SEAM 2）只能在无状态会话 Bean 之上创建。Java EE 5 中的无状态会话 Bean 需要实现一个使用 @Local 或 @Remote 注释的服务端点接口。虽然这在 Java EE6 中已成为可选，但在这里仍然是强制性的。

所以：

```
@Local
public interface PluginHandlerInterface {
   int processRequest(Account account);
}

@WebService
@Stateless
public PluginHandler implements PluginHandlerInterface { } 
```

**POJO 网络服务**

如果在 seam 中，您想使用常规 POJO 作为 Web 服务，则您的类必须有另一个定义 Handler 链的特殊注释：

```
@WebService
// This here makes all the difference!
@HandlerChain(file = "web-service-handler-chain.xml")
public class PluginHandler {
    ...
} 
```

这是您放入 /WEB-INF/classes/web-service-handler-chain.xml 的处理程序链：

```
<?xml version="1.0" encoding="UTF-8"?>
<handler-chains xmlns="http://java.sun.com/xml/ns/javaee">
  <handler-chain>
    <handler>
      <description>seam request handler</description>
      <!-- probably not necessary
         <handler-name>org.jboss.seam.webservice.SOAPRequestHandler</handler-name>
      -->
      <handler-class>org.jboss.seam.webservice.SOAPRequestHandler</handler-class>
    </handler>
  </handler-chain>
</handler-chains> 
```

你必须像这样向战争文件 web.xml 宣布你的服务类：

```
<listener> <!-- this might already be present in your web.xml -->
    <listener-class>org.jboss.seam.servlet.SeamListener</listener-class>
</listener>
<servlet> <!-- Which class is to be used? -->
    <servlet-name>PluginHandler</servlet-name>
    <servlet-class>your.package.name.PluginHandler</servlet-class>
</servlet>
<servlet-mapping> 
    <!-- you'll find it under http://localhost:8080/your-war/PluginHandler?wsdl-->
    <servlet-name>PluginHandler</servlet-name>
    <url-pattern>/PluginHandler</url-pattern>
</servlet-mapping> 
```

所以这三个步骤，创建处理程序链、添加注释和向 web.xml 宣布您的服务，应该可以在 SEAM 中为您解决问题：您将拥有一个 Web 服务和其中可用的 SEAM 上下文。

# python - windows中的.dll文件是什么意思......？linux中.so文件的含义是什么？

> ID：10235235
> 
> 赞同：-2
> 
> 时间：2012-04-19T19:20:28.080
> 
> 标签：python, windows, linux, shell

据我所知，我知道两者都是可执行的……但是 .dll 文件和 .exe 文件有什么区别，.so 文件和 .sh/.py/.bin 文件有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:26:39.573

`.dll`- 动态链接库。它是微软在程序初始化或执行期间加载的共享库的实现。与静态链接库不同，它不会使代码膨胀，但可以在多个不同的进程映像之间共享单个内存映像。这些不是独立的，但需要从可执行文件中调用。作为一个库，可以有多个与可执行文件相反的入口点。

`.exe`- 独立可执行文件的 Microsoft 实现。可执行文件可以通过加载程序作为进程直接加载到内存中。有一个且只有一个入口点作为第一个执行线程执行。

`.so`- 共享对象。在 *nix 系统上，共享库（如 dll）被实现为共享对象。

# android - 将 Android CheckBox 设置为不同的图像...然后返回原始图像

> ID：10235237
> 
> 赞同：2
> 
> 时间：2012-04-19T19:20:33.227
> 
> 标签：android, sdk, checkbox, imageview

我正在使用以下（非常常见的）代码来更改我的 Android 应用程序中的复选框图像。

```
 mCheck = (CheckBox) findViewById(R.id.chkMine);
    mCheck.setButtonDrawable(R.drawable.my_image); 
```

我看到很多人都在问这个。但我从来没有看到第二部分：

```
How do I put BACK the original checkbox imagery, later in my code? 
```

我犹豫是否尝试设计我自己的所有图像（选中、未选中、重影检查、重影未选中等），因为我需要通常出现在许多不同版本的 Android 上的原始图像。

也许，最初使用（不存在？） getButtonDrawable() 调用保存默认图像，然后再使用它？

我认为这就像第二次调用 setButtonDrawable() 来“撤消”我的更改一样简单。或者是吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T21:16:37.747

正如您已经正确提到自己的那样，不幸的是`getButtonDrawable()`，在替换它之前没有对所使用的可绘制对象的引用。显然，您可以将 Android 的资源复制到本地项目并使用这些资源来重置`CheckBox`' 按钮，但这意味着您必须考虑主题的所有不同样式，更不用说设备制造商可能对这些资源进行的任何更改. 走这条路并非不可能，但你会发现对于听起来很简单的事情会很麻烦。

您可能要考虑执行以下操作：在资源中查询您需要的可绘制对象的资源 ID。这样您就不必明确地处理不同的主题，因为查找会这样做。您只需几行即可轻松将此功能放入专用方法中。例子：

```
private static int getDefaultCheckBoxButtonDrawableResourceId(Context context) {
    // pre-Honeycomb has a different way of setting the CheckBox button drawable
    if (Build.VERSION.SDK_INT <= 10) return Resources.getSystem().getIdentifier("btn_check", "drawable", "android");
    // starting with Honeycomb, retrieve the theme-based indicator as CheckBox button drawable
    TypedValue value = new TypedValue();
    context.getTheme().resolveAttribute(android.R.attr.listChoiceIndicatorMultiple, value, true);
    return value.resourceId;
} 
```

下面是一个将可绘制按钮设置为一些自定义图像的快速示例，然后将其重置。每当检查状态发生变化时，我只是在应用程序图标和可绘制的原始按钮之间切换。

```
CheckBox mCheckBox = (CheckBox) findViewById(R.id.checkbox);
mCheckBox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
    @Override public void onCheckedChanged(CompoundButton button, boolean isChecked) {
        button.setButtonDrawable(isChecked ? R.drawable.icon : getDefaultCheckBoxButtonDrawableResourceId(StackOverflowActivity.this));
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T19:33:42.807

我认为检索原始图像的调用`setButtonDrawable()`应该再次起作用。
但是，您将引用[android 的原始资源，而不是您的资源](https://stackoverflow.com/questions/5205679/where-to-find-androids-original-resource-images)。

```
mCheck = (CheckBox) findViewById(R.id.chkMine);
mCheck.setButtonDrawable(android.R.drawable.*); 
```

可能您必须自己查找文件名：

```
platforms > android-* > data > res > drawable-*
(source: accepted answer) 
```

*编辑*
哈！我*知道*我以前看过那个网站：[Android R Drawables](http://androiddrawableexplorer.appspot.com/) ^^v
（[感谢 Mef](https://stackoverflow.com/questions/5205679/where-to-find-androids-original-resource-images)）

# iphone - 如果未安装 Facebook 本机应用程序，请打开 Facebook i safari

> ID：10235239
> 
> 赞同：2
> 
> 时间：2012-04-19T19:20:50.863
> 
> 标签：iphone, ios, facebook, safari, native

我正在制作一个应用程序，我可以从应用程序中打开 Facebook 原生应用程序。我用这个卖的那个问题

```
 NSString* urlString = @"fb://groups/";
 [[UIApplication sharedApplication] openURL:[NSURL URLWithString: urlString]]; 
```

但如果未安装本机应用程序，它应该在 iPhone 上的本机 safari 应用程序中打开 Facebook。那是我的问题？

有没有人可以帮助我？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T19:30:53.087

```
NSString fbURL = @"fb://group/5385407511";
BOOL canOpenURL = [[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:fbURL]];

if(canOpenURL) {
    [[UIApplication openURL:[NSURL urlWithString:fbURL]];
} else {
    [[UIApplication openURL:@"http://facebook.com"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T19:27:34.827

以不改变其内部结构的方式编写您的应用程序是一个非常糟糕的主意，您的应用程序可能随时中断。

也就是说，如果您出于某种原因必须这样做，您可以通过检查`fb://`带有 UIApplication 的 URL来检查 Facebook 应用程序是否已安装

```
- (BOOL)canOpenURL:(NSURL *)url 
```

# java - 根据选定的字符数量在 ArrayList 中拆分字符串

> ID：10235242
> 
> 赞同：1
> 
> 时间：2012-04-19T19:20:57.970
> 
> 标签：java, string, arraylist, split

我想将一个字符串拆分为一个 ArrayList。例子：

String = "Would you like to have answers to your questions" 结果为 3: Wou -> arraylist, ld -> arraylist, you -> arraylist, ...

金额是预定义的变量。

至今：

```
public static void analyze(File file) {

    ArrayList<String> splittedText = new ArrayList<String>();

    StringBuffer buf = new StringBuffer();
    if (file.exists()) {
        try {
            FileInputStream fis = new FileInputStream(file);
            InputStreamReader isr = new InputStreamReader(fis,
                    Charset.forName("UTF-8"));
            BufferedReader reader = new BufferedReader(isr);
            String line = "";
            while ((line = reader.readLine()) != null) {
                buf.append(line + "\n");
                splittedText.add(line + "\n");
            }
            reader.close();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    String wholeString = buf.toString();

    wholeString.substring(0, 2); //here comes the string from an txt file
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T19:23:16.567

“正常”的做法是关于你所期望的：

```
List<String> splits = new ArrayList<String>();
for (int i = 0; i < string.length(); i += splitLen) {
  splits.add(string.substring(i, Math.min(i + splitLen, string.length()));
} 
```

[不过，我会用Guava](http://guava-libraries.googlecode.com)抛出一个单线解决方案。（披露：我为 Guava 做出了贡献。）

```
return Lists.newArrayList(Splitter.fixedLength(splitLen).split(string)); 
```

仅供参考，您可能应该使用`StringBuilder`而不是`StringBuffer`，因为它看起来不需要线程安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T19:36:20.723

您可以在没有这样的子字符串调用的情况下做到这一点：

```
String str = "Would you like to have responses to your questions";
Pattern p = Pattern.compile(".{3}");
Matcher matcher = p.matcher(str);
List<String> tokens = new ArrayList<String>();
while (matcher.find())
    tokens.add(matcher.group());
System.out.println("List: " + tokens); 
```

**输出：**

```
List: [Wou, ld , you,  li, ke , to , hav, e r, esp, ons, es , to , you, r q, ues, tio] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T19:30:06.273

您正在将每一行添加到您的数组列表中，这听起来不像您想要的。我想你正在寻找这样的东西：

```
int i = 0;
for( i = 0; i < wholeString.length(); i +=3 )
{
    splittedText.add( wholeString.substring( i, i + 2 ) );
}
if ( i < wholeString.length() )
{
    splittedText.add( wholeString.substring( i ) );
} 
```

# jquery - 在 prettyphoto 灯箱上，如何将 X 或关闭按钮移动到右上角？

> ID：10235243
> 
> 赞同：2
> 
> 时间：2012-04-19T19:20:58.243
> 
> 标签：jquery, prettyphoto

在 prettyphoto 灯箱上，如何将 X 或关闭按钮移动到右上角？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T20:08:43.497

阅读[文档](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/documentation/)后，您似乎必须`markup`在创建它时重写参数中的属性。

将 HTML 带到那里并将其重写为您喜欢的任何内容。

```
<script type="text/javascript" charset="utf-8">

    $(document).ready(function(){
        $("a[rel^='prettyPhoto']").prettyPhoto({ // the default markup follows
            markup: '<div class="pp_pic_holder"> \
                        <div class="ppt">&nbsp;</div> \
                        <div class="pp_top"> \
                            <div class="pp_left"></div> \
                            <div class="pp_middle"></div> \
                            <div class="pp_right"></div> \
                        </div> \
                        <div class="pp_content_container"> \
                            <div class="pp_left"> \
                            <div class="pp_right"> \
                                <div class="pp_content"> \
                                    <div class="pp_loaderIcon"></div> \
                                    <div class="pp_fade"> \
                                        <a href="#" class="pp_expand" title="Expand the image">Expand</a> \
                                        <div class="pp_hoverContainer"> \
                                            <a class="pp_next" href="#">next</a> \
                                            <a class="pp_previous" href="#">previous</a> \
                                        </div> \
                                        <div id="pp_full_res"></div> \
                                        <div class="pp_details"> \
                                            <div class="pp_nav"> \
                                                <a href="#" class="pp_arrow_previous">Previous</a> \
                                                <p class="currentTextHolder">0/0</p> \
                                                <a href="#" class="pp_arrow_next">Next</a> \
                                            </div> \
                                            <p class="pp_description"></p> \
                                            {pp_social} \
                                            <a class="pp_close" href="#">Close</a> \
                                        </div> \
                                    </div> \
                                </div> \
                            </div> \
                            </div> \
                        </div> \
                        <div class="pp_bottom"> \
                            <div class="pp_left"></div> \
                            <div class="pp_middle"></div> \
                            <div class="pp_right"></div> \
                        </div> \
                    </div> \
                    <div class="pp_overlay"></div>'
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-02T23:35:27.440

根据您使用 prettyPhoto 的方式，您可以通过编辑 CSS 来实现您想要的。

前任：

这会将细节移到顶部

```
.pp_details{
    position: absolute;
} 
```

这会调整关闭按钮的位置。

```
a.pp_close {
    top: -12px;
} 
```

# php - 在引号内使用带有转义引号的 REGEX

> ID：10235245
> 
> 赞同：4
> 
> 时间：2012-04-19T19:21:01.890
> 
> 标签：php, regex, preg-match-all

我有一个 PHP`preg_match_all`和 REGEX 问题。

我有以下代码：

```
<?php

$string= 'attribute1="some_value" attribute2="<h1 class=\"title\">Blahhhh</h1>"';

preg_match_all('/(.*?)\s*=\s*(\'|"|&#?\w+;)(.*?)\2/s', trim($string), $matches);

print_r($matches);

?> 
```

对于我想用引号传入 HTML 的实例，这似乎没有提取转义引号。我已经尝试了许多解决方案，其中包含引号 REGEX 修复中的基本引号，但似乎没有一个对我有用。我似乎无法将它们正确放置在这个预先存在的 REGEX 中。

我不是 REGEX 大师，有人可以指点我正确的方向吗？

我想要达到的结果是这样的：

```
Array
(
    [0] => Array
        (
            [0] => attribute1="some_value"
            [1] =>  attribute2="<h1 class=\"title\">Blahhhh</h1>"
        )

    [1] => Array
        (
            [0] => attribute1
            [1] =>  attribute2
        )

    [2] => Array
        (
            [0] => "
            [1] => "
        )

    [3] => Array
        (
            [0] => some_value
            [1] => <h1 class=\"title\">Blahhhh</h1>
        )
) 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:38:05.053

[您可以使用否定的后向断言](http://www.regular-expressions.info/lookaround.html#lookbehind)来解决此问题：

```
'/(.*?)\s*=\s*(\'|"|&#?\w+;)(.*?)(?<!\\\\)\2~/'
                                 ^^^^^^^^^ 
```

结束引号不应以`\`. 给我：

```
Array
(
    [0] => Array
        (
            [0] => attribute1="some_value"
            [1] =>  attribute2="<h1 class=\"title\">Blahhhh</h1>"
        )

    [1] => Array
        (
            [0] => attribute1
            [1] =>  attribute2
        )

    [2] => Array
        (
            [0] => "
            [1] => "
        )

    [3] => Array
        (
            [0] => some_value
            [1] => <h1 class=\"title\">Blahhhh</h1>
        )
) 
```

这个正则表达式并不完美，因为它是你的实体，但在那里作为分隔符，就像引号一样，它也可以用`\`. 不知道这是否真的是有意的。

另请参阅这个很好的问题/答案：[Split string by delimiter, but not if it is escaped](https://stackoverflow.com/questions/6243778/split-string-by-delimiter-but-not-if-it-is-escaped/6243797#6243797)。

# javascript - Javascript - 检查哪个输入元素光标在

> ID：10235251
> 
> 赞同：0
> 
> 时间：2012-04-19T19:21:28.610
> 
> 标签：javascript

如果我单击一个随机按钮，有没有办法定义我的光标当前在哪个输入元素中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T19:23:22.687

如果单击按钮，光标将不再位于输入元素中。

但是，您可以执行以下操作：

```
<input onFocus="activeInput = this;" /> 
```

然后，当您单击按钮时，找到 的值`activeInput`并且您选择了输入元素。

# c# - 在 foreach/for 中内置 where 子句的延迟查询

> ID：10235252
> 
> 赞同：1
> 
> 时间：2012-04-19T19:21:33.950
> 
> 标签：c#, linq, entity-framework, entity-framework-4

在排除错误时，我遇到了这个问题。这似乎是由于延迟执行和查询使用变量关键字的最后一个值。解决此问题的推荐模式是什么。

```
var query = from c in dbContext.Cars
            select c;

var keywords = new string[] { "Clean", "Car" };

foreach (var keyword in keywords)
{
    query = query.Where(c => c.Name.Contains(keyword));
}

var cars = query.ToList(); 
```

结果是这样的查询（注意两个参数的值都是“汽车”）

```
exec sp_executesql N'SELECT 
[Extent1].[CarID] AS [MID], 
[Extent1].[Name] AS [Name], 
FROM [dbo].[Cars] AS [Extent1]
WHERE ([Extent1].[Name] LIKE @p__linq__0 ESCAPE N''~'') AND ([Extent1].[Name] LIKE @p__linq__1 ESCAPE N''~'')
',N'@p__linq__0 nvarchar(4000),@p__linq__1 nvarchar(4000)',@p__linq__0=N'%Car%',@p__linq__1=N'%Car%' 
```

LINQPad 中的调试也显示相同的查询

```
DECLARE p__linq__0 NVarChar(1) = '%Car%'
DECLARE p__linq__1 NVarChar(1) = '%Car%'

SELECT 
[Extent1].[CarID] AS [MID], 
[Extent1].[Name] AS [Name], 
FROM [dbo].[Cars] AS [Extent1]
WHERE ([Extent1].[Name] LIKE @p__linq__0 ESCAPE N'~') AND ([Extent1].[Name] LIKE @p__linq__1 ESCAPE N'~') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T19:23:50.343

这是由于在匿名函数中捕获变量的方式。改变这个：

```
foreach (var keyword in keywords)
{
    query = query.Where(c => c.Name.Contains(keyword));
} 
```

对此：

```
foreach (var keyword in keywords)
{
    var copy = keyword;
    query = query.Where(c => c.Name.Contains(copy));
} 
```

它应该可以工作。有关详细信息，请参阅[Eric Lippert 的博客文章](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)。C# 5 的行为正在发生变化，因此此时您无需担心。

但是请注意，您也可以尝试让 LINQ 为您执行此操作：

```
var query = dbContext.Cars.Where(c => keywords.All(key => c.Name.Contains(key)); 
```

我很确定这将适用于`Any`（有效的“或”），但我不确定它是否适用于`All`. 工作一试...

# java - 在 Java 中，如果我调用一个从另一个可运行对象扩展 Thread 的类，哪个 Thread 执行？

> ID：10235253
> 
> 赞同：0
> 
> 时间：2012-04-19T19:21:41.013
> 
> 标签：java, multithreading, concurrency, thread-safety

我正在做一些并发编程，其中一部分困扰着我。

假设我有一些类`Foo`扩展了 Thread 并实现了它自己的公共方法`bar()`以及所需的`run()`方法。如果我实现多个`Foo`对象，每个对象都包含对另一个`Foo`对象的引用，并且在类的`run()`方法内部是对它所引用的任何对象`Foo`的方法的调用。如果名为“ ”的对象调用了名为“ ”的对象，那么究竟是谁在执行“ ”中的方法代码？执行是从“ ”移交给“ ”执行还是“继续执行”中的代码`bar()``Foo``Foo``Thread-1``bar()``Foo``Thread-2``Thread-2``Thread-1``Thread-2``Thread-1``Thread-2`”？如果是第二选择，我怎么能让它表现得像第一选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T19:24:58.143

仅当您调用`thread.start()`（或使用`executor.submit(runnable)`）时才会启动新线程。所有其他方法调用都保留在当前线程中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T19:26:07.833

`Foo`只是一个对象，想象一下它没有扩展`Thread`，你会期待什么？只要不`start()`编辑新线程，你只是调用一个普通方法，代表调用线程。

此外，如果在不同对象上调用方法`Thread`会导致该线程接管执行，那么当前线程的执行会发生什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T19:26:18.300

除了在启动线程时被执行，`run()`是一种正常的方法。如果您手动调用，它的行为就像任何其他方法一样，这意味着它在调用者的线程中执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T19:28:16.803

它将在调用它的线程上运行。在扩展线程的类中调用方法与调用任何其他类的方法没有什么不同。

```
public class A extends Thread
{
     public void bar()
     {
         System.out.println(Thread.currentThread().getName());
     }

     public void run()
     {
         new A().bar();
     }

     public static void main()
     {
         A testA = new A();     
         testA.setName("parent");
         testA.start();        
     }
} 
```

应该打印'父'；

# android - 如何在 Amazon App Store App 中打开我的所有应用程序列表？

> ID：10235255
> 
> 赞同：1
> 
> 时间：2012-04-19T19:21:57.057
> 
> 标签：android, amazon-appstore

我正在尝试将按钮与我在亚马逊应用商店中的所有游戏链接。我正在使用以下网址来执行此操作[http://www.amazon.com/gp/mas/dl/android/](http://www.amazon.com/gp/mas/dl/android/) r&showall 我的应用程序包名称在哪里。但是有些方法不是在亚马逊应用商店中打开它，而是在浏览器中打开该链接。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T02:52:39.020

来自亚马逊指南 - [https://developer.amazon.com/help/tuabg.html](https://developer.amazon.com/help/tuabg.html)

> 如需指向我们美国商店中所有应用程序列表的链接，请：
> 
> 使用此链接结构： [http://www.amazon.com/gp/mas/dl/android?p= **com.example.package** &showAll=1](http://www.amazon.com/gp/mas/dl/android?p=com.example.package&showAll=1) 将粗体部分替换为我们当前 LIVE 应用程序之一的包名称店铺。

# asp.net - tfs 2010 传播某些核心文件更改的策略

> ID：10235256
> 
> 赞同：0
> 
> 时间：2012-04-19T19:22:00.247
> 
> 标签：asp.net, visual-studio-2010, architecture

我有几个 asp.net Web 项目，它们有一些对于每个项目都相同的核心文件，以及一些对于每个项目都不同的“更改”文件（.cs、.aspx、.config）。

我想将核心文件放在 TFS 中，然后有一个框架将更改从一个项目传播到核心文件，然后传播到每个项目，忽略“更改文件”？？？

# css - 添加全局属性，例如颜色/字体

> ID：10235259
> 
> 赞同：0
> 
> 时间：2012-04-19T19:22:01.823
> 
> 标签：css

我正在寻找在两个 CSS 文件之间布置我的网站的最实用、最方便的方法。

一种用于一般格式，另一种将包括所有颜色和字体。

有没有一种我可以简单地在布局文件中执行的方法：

```
#sel1 .class1{
color: @color maincolor
}

#sel2 .class2{
color: @color secondarycolor
} 
```

然后在我的第二个文件中简单地定义了主要和次要颜色？我知道我可以将`maincolor`and`secondarycolor`作为一个类添加到每个元素中，但是为了我自己的理智，我不想对主文档执行此操作。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T19:24:03.020

听起来您应该使用 CSS 预处理器，例如[LESS](http://lesscss.org/)或[Sass](http://sass-lang.com/)。您在问题中建议的`@color`变量语法与 LESS' 几乎相同。

# asp.net - 使用带有表单身份验证的 ASP.NET Web 表单进行路由

> ID：10235263
> 
> 赞同：2
> 
> 时间：2012-04-19T19:22:29.753
> 
> 标签：asp.net, url-routing, form-authentication

仅供参考 - 这不是 MVC。

我正在使用 Web 表单身份验证，并且在我的 web.config 中有以下内容。

```
<authentication mode="Forms">
  <forms loginUrl="~/en/Admin/Login" timeout="2880" defaultUrl="/DashBoard" />
</authentication> 
```

我也将路由用于双语/文化。

我的路线如下所示：

```
RouteTable.Routes.MapPageRoute(
    routeName, "{lang}/Admin/Login", "/Admin/Login.aspx", true, defaults, constraints, dataTokens); 
```

如果用户尝试访问受限页面，他们将根据 web.config 中的值重定向到 /en/Admin/Login。我的问题是，如果用户正在查看法语网站，当需要重定向到 /fr/Admin/Login 时，页面会重定向到英文登录页面。

有什么办法可以解决这个问题，因为整个网站都需要双语？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:13:20.823

我通过一些变通方法发现了类似的问题，但没有真正的解决方案。 [如何在 ASP.NET MVC 中重定向到动态登录 URL](https://stackoverflow.com/questions/356982/how-to-redirect-to-a-dynamic-login-url-in-asp-net-mvc)

**这是我的解决方案：**

1）我添加了一个会话变量来跟踪用户选择的语言。（例如：会话 [“lang”] = “fr”）

2) 我在 web.config 中创建了我的登录页面 /admin/default.aspx，如下所示：

```
<authentication mode="Forms">
  <forms loginUrl="~/Admin/Default.aspx" timeout="2880" defaultUrl="/en/DashBoard" />
</authentication> 
```

3) 在 /admin/default.aspx 的页面加载事件中，我确定设置的语言并使用会话中的语言重定向到实际登录页面。

```
 if (HttpContext.Current.User.Identity.IsAuthenticated)
        // Redirect to dashboard
        ...
    else
    {
        string returnUrl = "";
        if (Request.QueryString["ReturnUrl"] != null)
            returnUrl = "?ReturnUrl=" + Request.QueryString["returnUrl"].ToString();

        string selectedLanguage = "";
        if (Session["lang"] != null)
            selectedLanguage = Session["lang"].ToString();
        else
            selectedLanguage = "en";

        string loginURL = ConfigurationManager.AppSettings["Auth.LoginUrl"].ToString();
        loginURL = loginURL.Replace("{lang}", selectedLanguage);

        Response.Redirect(loginURL + returnUrl);                
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T19:28:19.353

在默认 (en//admin/login) 页面上，解析引用 URL 并根据需要重定向。（假设区域设置是由 URL 路径中的文化标记在您的站点上确定的。）例如，

```
var referrer = Request.QueryString["ReturnUrl"];
if (!string.IsNullOrEmpty(referrer))
{
    if (!referrer.Contains("/Admin/Login"))
    {
        if (referrer.Contains("/fr/")) Response.Redirect("/fr/Admin/Login");
        else if (referrer.Contains("/de/")) Response.Redirect("/de/Admin/Login");
        // etc.
    }
} 
```

当然，这可以通过使用正则表达式来解析引荐来源并检查有效的语言环境来改进/简化。

# css - CSS：锁定盒子？

> ID：10235265
> 
> 赞同：0
> 
> 时间：2012-04-19T19:22:38.663
> 
> 标签：css

```
___________div class=MAIN_________________

div id=LEFT                   div id=RIGHT
__________________________________________ 
```

我怎样才能实现 MAIN + LEFT + RIGHT 盒子的所有底部都粘在一起？

基本上锁定底部，比如说如果左框中有很多内容 - >右框将与左框和主框一起增长。

__ 跟进 __

我不知道如何正确地实现到我的代码中:(

[http://jsfiddle.net/v572V/](http://jsfiddle.net/v572V/)

我已经复制了整个 CSS 文件，所以看起来很乱。但盒子如下

```
<div class="content home">
<div id="main">
<div id="sidebar"> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T19:47:45.653

你的意思是这样的：http: [//jsfiddle.net/teresko/EkTVv/](http://jsfiddle.net/teresko/EkTVv/)

这是所谓的“圣杯布局”的变体。应该适用于所有浏览器，包括 IE6。布局将扩展以适应最长的部分。如果内容比浏览器的高度短，那么布局将扩展到浏览器的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T19:47:17.723

[http://jsfiddle.net/rlemon/DjQup/](http://jsfiddle.net/rlemon/DjQup/)

你浮动容器中的左右列。然后有一个带有填充的“内部”内容容器以抵消浮动...参见上面的示例。

```
<div class="container">
   <div class="left">asd</div>
   <div class="right">asd</div>
   <div class="middle">
       <div class="middle-inner">
       asdf
       </div>
   </div>
</div>​

.container {
 height: 600px;
 widht: 800px;
 background-color: #aaa; 
 clear: both;    
}
.left, .right {
 width: 100px;
 height: 100%;
 background-color: blue;    
}
.left { float: left; }
.right { float: right; }
.middle {
 background-color: green;
 float: none;
 height: 100%;
 width: 100%;
}
.middle-inner {
 padding: 0 100px;   
}
​ 
```

它并不完美，但至少你可以看到这项技术在发挥作用。冰川

# c++ - 将小部件从一个选项卡复制到另一个选项卡时的 QTabWidget

> ID：10235267
> 
> 赞同：1
> 
> 时间：2012-04-19T19:22:44.867
> 
> 标签：c++, qt, tabwidget

我有一个用 Qt 制作的应用程序。这是一个irc客户端。所以基本上我有一个用于联系人列表的列表小部件和另一个用于聊天列表的小部件。我还拥有一个 lineEdit 和一个按钮。当我双击一个项目时，它会打开另一个选项卡。到这里为止，很好。当用户键入 /join toto 时，它会打开一个名为 toto 的选项卡（这是一个新频道）。问题是当我打开一个新选项卡时，我会为这个新选项卡重新创建每个小部件（列表、lineEdit、按钮）。因此，当用户从选项卡键入 /join toto 时，他无法在此选项卡上发送任何内容。但他可以在新创建的选项卡上执行此操作。

我不知道为什么会这样，所以如果你们中的任何人都可以帮助我，那就太好了，谢谢：P

这是我创建新标签的代码。每个 var 都是一个类 var。

```
 newTab = new QWidget(ui->tabWidget);
    pushButton = new QPushButton("Envoyer", newTab);
    connect(pushButton, SIGNAL(clicked()), this, SLOT(clicked()));
    pushButton->setGeometry(976, 705, 121, 27);
    chatListView = new QListView(newTab);
    chatListView->setGeometry(10, 10, 891 ,681);
    contactListView = new QListWidget(newTab);
    contactListView->setGeometry(910, 10, 251, 681);
    lineEdit = new QLineEdit(newTab);
    lineEdit->setGeometry(10, 705, 891, 27);
    connect(lineEdit, SIGNAL(returnPressed()), pushButton, SLOT(click()));
    ui->tabWidget->addTab(newTab, name); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T21:43:25.627

将所有这些代码移动到 QWidget 的自定义子类中。然后，每次您想创建一个新选项卡时，只需创建一个自定义小部件的全新实例。

请注意，现在您一直在引用类实例属性而不是全新的对象。您不应该`newTab`每次都替换相同的属性。它很可能会破坏您的连接引用。

你最终会得到这样的东西：

```
MyTabWidget *tabWidget = new MyTabWidget(this);
connect(tabWidget->pushButton, SIGNAL(clicked()), this, SLOT(clicked()));
connect(tabWidget->lineEdit, SIGNAL(returnPressed()), pushButton, SLOT(click()));
ui->tabWidget->addTab(tabWidget, name); 
```

# java - 如何将这些功能整合到一个泛型中

> ID：10235273
> 
> 赞同：0
> 
> 时间：2012-04-19T19:23:00.407
> 
> 标签：java, generics

我有几个功能...

```
@Override
public List<ContentType> findAllContentTypes() {
    return this.emf.createEntityManager()
                   .createNamedQuery("ContentType.findAll", ContentType.class)
                   .getResultList();
}

@Override
public List<Status> findAllStatus() {
    return this.emf.createEntityManager()
                   .createNamedQuery("Status.findAll", Status.class)
                   .getResultList();
} 
```

事实上，我有大约 12 个可以得到各种不同的东西。我想采用这些函数并制作一个通用函数来替换所有这些。

我能想到的最好方法是做类似`findAll("Language")`. 我开始做...

```
public List<T> findAll(String objectName) {
    return this.emf.createEntityManager()
                   .createNamedQuery(objectName+".findAll", objectName)
                   .getResultList();
} 
```

问题（除了我的 IDE 不知道如何处理`T`）是我不确定如何获取该字符串并将其传递给`ContentType.class`.

我错过了什么阻止 Netbeans 识别`T`？

会`objectName`按照我将它作为第二个参数传递给的方式工作`createNamedQuery()`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T19:26:55.657

您需要通过`<T>`在方法返回类型之前添加类型参数列表（在本例中）来将您的方法声明为泛型。然后只需传入正确类型的类对象作为参数：

```
public <T> List<T> findAll(Class<T> clazz) {
    return this.emf.createEntityManager().createNamedQuery(
            clazz.getSimpleName()+".findAll", clazz).getResultList();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T19:27:28.207

这样的事情应该可以解决问题：

```
public <T> List<T> findAll(Class<T> klass) {
    return this.emf.createEntityManager().createNamedQuery(klass.getSimpleName()+".findAll", klass).getResultList();
} 
```

# c# - 异常处理应用程序块

> ID：10235278
> 
> 赞同：0
> 
> 时间：2012-04-19T19:23:23.700
> 
> 标签：c#, exception-handling, enterprise-library, n-tier-architecture

不使用异常处理应用程序块或任何其他统一异常处理库有什么缺点。我能想到的唯一一件事是代码最终会根据开发人员的不同而在各处使用不同类型的 Try/Catch。在这方面缺乏规划怎么会导致现实世界的问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:04:43.543

我最近开始自己阅读这个主题。我的基本理解是：

1.  仅当您打算处理异常时才捕获异常。
2.  过度使用 try/catch 会导致异常吞咽和/或丢失有价值的堆栈跟踪信息，并可能导致可维护性问题（如果您决定将错误/日志标准化怎么办？）。而是使用 try/finally 或使用块来实现清理。
3.  通过全局异常处理程序在边界处捕获异常。

同样，这正是我最初收集到的。我认为对您的问题的简短回答是可维护性和有价值的跟踪信息的潜在损失。以下是一些来源：

[良好的异常管理经验法则](http://www.hanselman.com/blog/GoodExceptionManagementRulesOfThumb.aspx)

[理解和使用异常](http://codebetter.com/karlseguin/2006/04/05/understanding-and-using-exceptions/)

# postgresql - 创建 Postgres 表后启用 OID

> ID：10235290
> 
> 赞同：1
> 
> 时间：2012-04-19T19:23:57.863
> 
> 标签：postgresql

是否可以使用 ALTER 语句将 OID 添加到表中？

编辑：我应该添加我正在使用 PG 8.3，而 8.3 手册没有列出该选项

[http://www.postgresql.org/docs/8.3/static/sql-altertable.html](http://www.postgresql.org/docs/8.3/static/sql-altertable.html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-07T11:55:26.337

这是PostgreSQL 9.2：

```
ALTER TABLE "myTable" SET WITH OIDS; 
```

我希望这对你有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T22:27:58.353

在这种情况下，您可以在[PostgreSQL 8.3 手册中找到](http://www.postgresql.org/docs/8.3/static/sql-altertable.html)答案：

> 请注意，没有任何变体`ALTER TABLE`允许 OID 在被删除后恢复到表中。

所以答案是**否定**的。

`SET WITH OIDS`此后不久[在 8.4 版本](https://www.postgresql.org/docs/8.4/static/sql-altertable.html)中实施。

但我想不出这样做的充分理由。用户表中的 OID，从一开始就是一个错误的概念。甩掉包袱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T19:40:51.737

您可以在比输入问题更短的时间内阅读手册，并查看“ALTER TABLE”页面

[http://www.postgresql.org/docs/9.1/static/sql-altertable.html](http://www.postgresql.org/docs/9.1/static/sql-altertable.html)

答案是肯定的，但这是一个无聊的问题。

一个有趣的问题是你为什么认为你想要它们？我有 90% 的把握你真的不知道。

# svn - SVN 全局忽略不起作用（其他帖子的解决方案不起作用）

> ID：10235297
> 
> 赞同：3
> 
> 时间：2012-04-19T19:24:08.380
> 
> 标签：svn

我进入我的 .subversion/config 并添加 .settings，但从 . 中`svn diff`，我们看到它不起作用。

```
~/Space/ifp-integration/CIGNA-IFP-ESB$ svn diff
Index: .settings/org.eclipse.jdt.core.prefs
===================================================================
--- .settings/org.eclipse.jdt.core.prefs    (revision 2014)
+++ .settings/org.eclipse.jdt.core.prefs    (working copy)
@@ -1,6 +1,15 @@ 
```

这表明一定有人签入了它，但我不在乎，因为我想忽略它。有没有办法确保这被忽略？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T20:35:26.370

您不能忽略存储库中的内容。这不是 Subversion 中忽略的工作方式。

忽略只是一种防止**意外** ***将***文件添加到存储库的方法。如果存储库中已存在文件，则不能忽略它。

全局忽略仅适用于文件而不适用于目录。如果你`.settings`在你的 Subversion 配置文件中说忽略，它不会忽略一个名为 . 的目录`.settings`，而只会忽略一个名为`.settings`. 而且，它只会在`.settings`文件不在存储库中时忽略该文件。

基本上，如果您说`svn add *`或`svn status`，则任何不在存储库中且与您的全局忽略模式匹配的文件都不会添加到`svn status`. 这就是它所做的一切。

`svn:ignore`您可以在一个类似的目录上创建一个属性。但是，`svn:ignore`也会忽略目录。比如你有一个 Maven 项目，你可以设置`svn:ignore`= `target`，不会上报目标文件夹。但是，`svn:ignore`仅适用于属性所在的目录，而不是子目录。

那么如何忽略`.settings`目录呢？很简单：你不检查它。不幸的是，在 Subversion 中没有简单的方法可以做到这一点。以下是您可以执行的操作：

```
$ svn checkout --depth=immediates http://server/src/myproj 
```

这将检查工作目录中的所有文件夹和文件，但不会检查任何子目录。在 Kornshell 和 BASH（如果您设置`shopt -s extglob`）中：

```
$ svn update --set-depth=infinity !(.settings) 
```

这将继续在除目录之外的所有目录中结帐`.settings`。

你也可以这样做：

```
$ svn update --set-depth=exclude .settings 
```

删除`.settings`目录一旦它已经被签出。这不会`.settings`从存储库中删除目录，但会`.settings`从您的工作目录中删除该目录，并且`svn diff`在您的工作目录（但不是存储库 URL）上不会报告`.settings`目录中的任何内容。

我需要强调的重要一点：忽略仅防止***意外***将文件添加到存储库中。它不会阻止某人添加它，并且一旦它在那里，它就不会被忽略。

此外，您的全局忽略设置并非对所有人都是全局的。只给你。如果你想阻止人们添加不应该添加到存储库的文件，你需要一个像[这样](https://github.com/qazwart/SVN-Precommit-Kitchen-Sink-Hook)的 pre-commit 钩子。

此钩子可用于防止提交具有特定名称的文件或目录，也可用于确保设置文件和目录的属性。例如，您可能希望确保人们无法`.settings`在您的项目中添加目录。或者`svn:ignore`目录上的该属性设置为忽略`.settings`目录。

# grails - Grails 数据绑定 - 带有 Maps 的命令对象

> ID：10235299
> 
> 赞同：3
> 
> 时间：2012-04-19T19:24:25.317
> 
> 标签：grails, object, command

Grails 2.0.3 我在将数据绑定到命令对象时遇到问题。我有这样的 jquery 请求 http://localhost:8080/api/test.json?callback=jQuery17102313091890902648_1334273415631&ex[0][a]=a0&ex[0][b]=b0&ex[1][a]=a1&ex[1 ][b]=b1

我需要一种将请求 url 中的数据绑定到命令对象的方法。像这样的东西

```
class TestCommand
{
    List<Map<String, String>> ex
    static constraints = {}
} 
```

我想动态绑定数据，以便我可以获得 ex[0].a = a0 和 ex[0].b = b0 并直接在控制器中使用它。这适用于列表。但是，不适用于地图列表。有没有办法像这样绑定数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T18:23:20.680

您是否尝试过使用[bindData](http://grails.org/doc/latest/ref/Controllers/bindData.html)？

毕竟，无论您如何提出请求（通过使用 jQuery 或传统的 GET 方法），事情都是在服务器端解决的。

# c# - 如果xml文件不存在

> ID：10235303
> 
> 赞同：0
> 
> 时间：2012-04-19T19:24:49.297
> 
> 标签：c#, asp.net, gridview, xmldatasource

我正在使用 ASP.NET C# 并使用 XmlDataSource 工具编写了一个页面来读取 xml 文件并在 GridView 中显示数据。当文件在那里时，一切都很好。但是，xml 文件每小时生成一次，如果您在更新文件时碰巧连接到页面（大约需要 2 分钟），则会显示错误（因为文件不存在）。当我使用内置工具连接和读取 xml 时，是否有代码可用于检查文件是否存在，如果不存在，则打开没有文件的页面。

我可以看到有代码可以执行 if 存在，但是我似乎无法弄清楚“该怎么做？”部分。忽略 XMLDataSource 工具。也许我可以让一个标签出现，说几分钟后回来，但我如何让它忽略数据阅读器？

```
if (!File.Exists(filename))
{
     // what to do?
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T20:05:47.987

如果您尝试以`File.Exists`这种方式使用，您将感到失望。

假设您的代码以最简单的方式工作：

```
if (!File.Exists(filename))
{
    // Tell user that file isn't there.
}
else
{
    // The file exists, so now go party on it.
    DoSomething(filename);
} 
```

所以你的程序确定文件存在。但在`DoSomething`调用之前，创建文件的进程会以独占方式打开它。那么你的`DoSomething`方法就会失败。因此，您对文件是否存在的检查是无关紧要的。

是的，这是一个非常小的窗口。我可以根据经验告诉你，事情确实发生在那些非常小的窗口内。我被类似于上面的代码咬了。

我强烈建议您编写代码，以便它处理文件不存在时引发的 FileNotFoundException（或任何异常）。例如：

```
try
{
    DoSomething(filename);
    // now format the page as normal
}
catch (FileNotFoundException)
{
    // notify user that the file wasn't found
} 
```

这样一来，没有其他过程可以将地毯从您的脚下拉出来。您知道该文件在那里，因为您已将其打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:48:26.223

这是我的解决方案。我更改变量名称以保护无辜者。非常感谢吉姆米歇尔...

```
protected void Page_Load(object sender, EventArgs e)
{
    string xmlFile = Server.MapPath("~/App_Data/file.xml");

    try
    {
        XmlDataSource1.DataFile = xmlFile;
        XmlDataSource1.GetXmlDocument();
    }
    catch (Exception ex)
    {
        lblErrorMessage.Visible = true;
        gridView1.Visible = false;
        formView1.Visible = false;
    }
} 
```

# emacs - 在 emacs 中，我可以有一组代码换行设置和一组文本换行设置吗？

> ID：10235305
> 
> 赞同：6
> 
> 时间：2012-04-19T19:24:50.890
> 
> 标签：emacs, word-wrap

经过相当多的实验，我认为我喜欢：

```
(setq truncate-lines nil)
(setq word-wrap t) 
```

用于文本编辑，但

```
(setq truncate-lines t)
(setq word-wrap nil) 
```

用于编程。

在所有模式下，我都喜欢：

```
(setq fill-column 80) 
```

这样我就可以使用`M-q`and`C-u M-q`将文本流到 80 列，但我也发现我不喜欢`auto-fill`模式并且永远不会喜欢它。

我也不是那么热衷`visual-line-mode`（或者至少不是那么热衷`word-wrap`）

有什么咒语可以放在我的`.emacs`档案里让我开心吗？

我对快乐的定义是：'这一切都只是按照我的意愿行事，我再也不需要考虑这个问题了'。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T19:36:42.680

使用`prog-mode-hook`和`text-mode-hook`设置这些变量：

```
(add-hook 'text-mode-hook '(lambda ()
    (setq truncate-lines nil
          word-wrap t))) 
```

和

```
(add-hook 'prog-mode-hook '(lambda ()
    (setq truncate-lines t
          word-wrap nil))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T19:40:16.390

很抱歉没有在我的回答中提供源代码，但我可以向您保证，您想到的设置确实是可能的。它仅取决于您对“编程模式”的定义。大多数模式都带有一个所谓的钩子函数（参见[http://www.gnu.org/software/emacs/manual/html_node/emacs/Hooks.html](http://www.gnu.org/software/emacs/manual/html_node/emacs/Hooks.html)）。这些基本上是在加载模式时执行的功能。然后，这样的钩子会调整您想到的设置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-03T17:16:11.323

(setq truncate-lines t) 还是不行？

罪魁祸首可能是另一种模式。视觉线模式是我的（global-visual-line-mode），所以我不得不将禁用功能放入钩子中：

```
(add-hook 'neotree-mode-hook
       (lambda ()
         (visual-line-mode -1)
         (setq truncate-lines t))) 
```

# c# - 你如何在静态方法中模拟对象

> ID：10235310
> 
> 赞同：5
> 
> 时间：2012-04-19T19:25:03.383
> 
> 标签：c#, unit-testing, moq, mstest

如果我有这样的事情：

```
static class ManifestGenerator
{
    public static void GenerateManifestFile(){
    var doc = new XDocument();
    ...
    ... xml stuff added to doc
    ...
    doc.Save(manifestFilePath)
} 
```

现在你能告诉我如何创建一个单元测试来确保该方法生成正确的xml吗？如何在不向方法调用添加其他参数的情况下模拟 XDocument（我正在使用 Moq）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T19:29:21.297

不要试图嘲笑`XDocument`. 这不是这里的问题——令人讨厌的是对文件系统的访问。您可以传入 a`Stream`以将清单写入：

```
public static void GenerateManifestFile(Stream output) {
  var doc = new XDocument();
  ...
  ... xml stuff added to doc
  ...
  doc.Save(output);
} 
```

然后您可以使用 a 进行测试`MemoryStream`，但实际上使用 a`FileStream`到清单路径。您甚至可以将此方法设置为内部方法（使用`[InternalsVisibleTo]`以便您仍然可以从测试中访问它）和公共无参数重载，如下所示：

```
using (Stream output = File.OpenWrite(manifestFilePath))
{
    GenerateManifestFile(output);
} 
```

然后，您无需测试*该*代码，但您可以测试所有真实逻辑。

# mysql - 创建只读数据库/Web 服务？

> ID：10235311
> 
> 赞同：0
> 
> 时间：2012-04-19T19:25:05.960
> 
> 标签：mysql, web-services, rest

我在 Netbeans 中创建了一个 Web 服务；从我的数据库创建实体类。

我只是想知道我是否可以将 mysql 数据库或 Web 服务设为只读？已创建数据库和 Web 服务以检索我的 android 应用程序的数据；我不希望应用程序能够修改数据库，只能使用 get 方法进行选择。

我尝试在我的数据库中创建角色，删除 web 服务中的 setter 方法，但这只会导致问题

建议会很棒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:34:44.063

为您的 Web 服务使用一个不同的 mysql 用户帐户，该帐户只有读取权限（例如，对所需数据库或表只有 SELECT 权限的用户）？

也许是最简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:11:32.337

Web 服务将做他们必须做的事情。如果您的 WS 只是为了获取数据，那么它只会获取数据，不会修改它。此外，如果您用来公开 Web 服务的 Web 组件没有任何方法可以在数据库中插入/更新/删除数据，那么它就不会操作数据。

如果您有可以操作数据的 Web 服务，则有两条路径：

1.  不要公开它们，因此没有应用程序可以使用该 Web 服务。
2.  正如@BernhardDenner 所发布的，在 mysql 中创建一个没有写入权限的用户，并在您的 Web 组件中使用该用户。

另外，我猜您的 android 应用程序不应该与数据库直接通信（这就是您创建 Web 服务的原因）。

# php - 为什么我的变量会发生这种情况？

> ID：10235312
> 
> 赞同：2
> 
> 时间：2012-04-19T19:25:08.450
> 
> 标签：php

```
<?php

// $searchResult is type of Outcome
// This is what we do:
dList::lessAnchor($searchResult)->showElement();
dList::moreAnchor($searchResult)->showElement();

/**
* @returns vAnchor (can get showed with showElement() - not part of the problem)
*/
public static function lessAnchor(Outcome $searchResult){
  $searchData = $searchResult->searchData;
  $searchData->Page = $searchData->Page - 1; // (!1)
  return self::basicAnchor($searchData, "Back");
}

/**
* @returns vAnchor (can get showed with showElement() - not part of the problem)
*/
public static function moreAnchor(Outcome $searchResult){
  $searchData=$searchResult->searchData;
  $searchData->Page = $searchData->Page + 1; // (!2)
  return self::basicAnchor($searchData, "More");
} 
```

当我调用`dList::lessAnchor()`时`$searchResult`，它会修改 的属性，`$searchData->Page`如您所见，将其减 1，标记为`(!1)`。过了一会儿（下面一行），我再次打电话`dList::moreAnchor()`。`$searchResult`

为什么我看到标记`Page`处的属性减少了 1 `(!2)`？我没有`$searchResult`通过引用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T19:37:32.100

看看[文档](http://php.net/manual/en/language.oop5.references.php)：这是预期的行为。

> 从 PHP 5 开始，对象变量不再包含对象本身作为值。它只包含一个对象标识符，允许对象访问者找到实际对象。**当一个对象通过参数发送、返回或分配给另一个变量**时，不同的变量不是别名：**它们持有标识符的副本，它指向同一个对象**。

如果你想避免这种情况，你应该在必要的地方[克隆你的对象](http://php.net/manual/en/language.oop5.cloning.php)。就像这样：

```
public static function lessAnchor(Outcome $searchResult){
  $searchData = clone $newResult->searchData; //$searchData now is a new object
  $searchData->Page=$searchData->Page-1; // (!1)
  return self::basicAnchor($searchData,"Back");
} 
```

# file-upload - 在 Ruby on rails 3.2 中上传文件的简单方法

> ID：10235314
> 
> 赞同：1
> 
> 时间：2012-04-19T19:25:12.123
> 
> 标签：file-upload, ruby-on-rails-3.2

我搜索了很多，我想要最简单的方法在目录上上传文件，而不是在数据库中，没有模型，没有任何插件宝石......只想使用控制器和视图，现在所有简单的教程都过时了，方法有问题，有高手可以告诉我吗？？我已经安装了 Ruby 1.9 和 Rails 3.2

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T18:05:05.630

我和你有同样的问题。好吧，我会把它留在那里并使用回形针。这个地址有一些东西。如果您发现了什么，请告诉我们。

[Rails 3 获取原始帖子数据并将其写入 tmp 文件](https://stackoverflow.com/questions/4704143/rails-3-get-raw-post-data-and-write-it-to-tmp-file)

# css - 文本字段文本缩进

> ID：10235318
> 
> 赞同：2
> 
> 时间：2012-04-19T19:25:19.887
> 
> 标签：css, forms

如何正确缩进文本字段中的文本？我目前正在将它用于 css，但它似乎在 IE 中不起作用。

```
text-indent:15px; 
```

基本上，我有一个图像，并且想将它缩进大约 15 像素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T19:30:33.857

我想你正在寻找这样的东西。

[http://jsfiddle.net/jn4SW/](http://jsfiddle.net/jn4SW/)

```
input{
  padding: 5px 5px 5px 15px;
  margin: 20px;    
}​ 
```

我更新了 jsfiddle 以包含背景图片：

[http://jsfiddle.net/jn4SW/1/](http://jsfiddle.net/jn4SW/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:27:45.657

请在你的css中添加**行高**它也可以工作ie6

# javascript - 用div水平和垂直填充空间

> ID：10235320
> 
> 赞同：0
> 
> 时间：2012-04-19T19:25:25.570
> 
> 标签：javascript, css, html, fill

我正在寻找一种方法来自动填充宽度为 x1 和高度为 y1 的 div 与其他 div 元素，每个元素的宽度为 x2 和高度为 y2

所以html看起来像：

```
<div class="parentdiv">
    <div class="subdiv"></div>
    <div class="subdiv"></div>
    <div class="subdiv"></div>
    ...
</div> 
```

根据显示所有信息所需的细分数动态附加。我希望它们水平填充 parentdiv 中的空间，然后在它们碰到边缘时移动到下一行。

现在它们只是垂直堆叠在一起，浪费了很多空间。有没有跨浏览器的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T19:35:49.777

```
<style type="text/css">
    .parentdiv .subdiv { display: inline-block; }
</style> 
```

请注意，IE7 存在 div 内联的问题，因此您可能需要制作那些 subdiv、subspans（仍在使用`inline-block`）；

* * *

或者布赖恩的解决方案`float:left;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T19:31:31.370

默认情况下，div 将占据其父容器的整个宽度。您可以通过将 a 添加`float: left`到您的`subdiv`课程来解决此问题。只要确保清除容器末端的浮子即可。像这样的东西：

```
<style type="text/css">
.parentdiv .subdiv { float: left; }
</style>

<div class="parentdiv">
    <div class="subdiv"></div>
    <div class="subdiv"></div>
    <div class="subdiv"></div>
    ...
    <div style="clear: both;"></div>
</div> 
```

# php - 在 php 中显示/隐藏 div 包括使用 Jquery

> ID：10235322
> 
> 赞同：0
> 
> 时间：2012-04-19T19:25:29.550
> 
> 标签：php, jquery, html, include, hide

我有一个名为 div_1.php 的页面，里面有一个 div。

```
 <div id="div_1"></div> 
```

我有一个名为 index.php 的页面：

```
 <div id="div_menu"></div>

<?php include("div_1.php"); ?> 
```

“div_menu”的可见性是真实的。“div_1”的默认可见性在 style.css 中设置为 false。

```
#div_1{
    display: none;
} 
```

jQuery 函数显示/隐藏“div_1”：

```
$('.form_name').click(function() {
    // Hide the menu
    $('#div_menu').hide();

    if(this.id == "form_choice1"){
        // Show the div
        $('#div_1').show();
    }
}); 
```

第一部分（隐藏“div_menu”）工作正常，但第二部分不起作用！！！如果我将 div_1.php 的内容复制并粘贴到 index.php 中，它可以正常工作！

为什么 jQuery 无法访问该 div？当 div 在 php 文件中时有什么问题？我认为 php include 只在调用页面内复制被调用页面的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:30:32.680

您似乎没有正确关闭标签。这可能会使浏览器感到困惑。格式`</div>`不是`<!div>`。除此之外，您是否比较了两者生成的 HTML？他们看起来应该是一样的。检查您的浏览器以查找差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T17:53:09.213

我发现 PHP 在我的 Web 服务器（jetty 8）上不起作用......

我会尝试包含 js 文件并使用 document.write 函数，但它非常难看！

# ruby - Sqlite3 `step': 约束失败 (SQLite3::ConstraintException)

> ID：10235324
> 
> 赞同：0
> 
> 时间：2012-04-19T19:25:43.147
> 
> 标签：ruby, sqlite

我正在尝试转换一些 JSON 数据并使用 Ruby 将其插入到 sqlite3 db 中。JSON 来自 githubarchive.com 我遵循了关于这个问题的建议：[Escaping Strings For Ruby SQLite Insert](https://stackoverflow.com/questions/9614236/escaping-strings-for-ruby-sqlite-insert)，我的代码如下所示：

```
Yajl::Parser.parse(open(input).read) do |event|
r = CSV::Row.new(headers, [])
flatmap({}, event).each do |k,v|
  v = (Time.parse(v).utc.strftime('%Y-%m-%d %T') rescue '') if k =~ /_at$/
  if r.include? k
    r[k] = v
  else

   puts "Unknown field: #{k}, value: #{v}"
        end
    end 
#   tmp << r.to_s
db = SQLite3::Database.open( "../github.sqlite" )
val = (['?'] * 186).join(',')
ins = db.prepare("insert into Sheet1_copy values (#{val})")
ins.execute(r.to_s) 
```

上面的部分取自他们的 git 项目。现在，当我尝试使用任何数据运行它时，我得到

```
gems/sqlite3-1.3.5/lib/sqlite3/statement.rb:67:in `step': constraint failed (SQLite3::ConstraintException) 
```

有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T06:36:33.333

你需要更多的东西才能正确加载它。这是一个工作副本：[https ://gist.github.com/2426614](https://gist.github.com/2426614)

请注意，我没有使用准备好的语句，因为这将需要更多的体操来填充所有不同类型事件的空行。话虽如此，它的运行速度非常快。

# c# - 以更灵活的方式用属性装饰属性

> ID：10235325
> 
> 赞同：1
> 
> 时间：2012-04-19T19:25:47.023
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3, custom-attributes

可以说我有这些课

```
public class BaseClass
{
  public int Id { get; set; }
} 
```

和

```
public class SomeClass : BaseClass
{
  ... more properties ...
} 
```

BaseClass 被认为用在很多地方。

在我的情况下，我使用 ASP.NET MVC 3 的 EditorForModel 来呈现视图，并且通常使用属性来装饰属性，例如`[Display(Name = "Id"), Required]`

但是假设我想为继承它的每个类以不同的方式装饰 BaseClass 的属性。在`SomeClass`我可能想用 装饰`Id`，`[Required]`在`OtherClass`我可能想用 装饰`[SomeCustomAttribute]`。

有办法吗？

能够做这样的事情会很好：

```
public class SomeClass : BaseClass
{
  public SomeClass()
  {
    WithProperty(x => x.Id).AddAttribute(new RequiredAttribute());
    ...
  }

  ... more properties ...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T19:27:22.780

属性是静态元数据。程序集、模块、类型、成员、参数和返回值不是 C# 中的第一类对象（例如，System.Type 类只是类型的反映表示）。您可以获取类型的属性实例并更改属性（如果它们是可写的，但不会影响属性，因为它应用于类型）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T19:33:28.707

您可以将该属性声明为虚拟属性，并在派生类中覆盖它。使用特定于类的属性来装饰覆盖，并使用应该应用于所有类的任何属性来装饰基本属性。

确保应用于基本属性的属性本身没有`AttributeUsageAttribute`用`Inherited`值`false`（默认值为`true`）修饰。如果`AttributeUsage`指定了属性`Inherited == false`，则覆盖属性将不会继承该属性。有关更多信息，请参阅[文档](http://msdn.microsoft.com/en-us/library/system.attributeusageattribute.inherited.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T19:32:35.807

无法将属性装饰到单个对象实例级别的成员。它是类型特定的元数据。如果你真的需要这个，你将不得不实现你自己的属性管理来处理特定的实例。

# django - 摆脱 ModelForm 中的标签？

> ID：10235328
> 
> 赞同：0
> 
> 时间：2012-04-19T19:25:59.657
> 
> 标签：django, forms, model, django-forms

所以我试图让我的模型中的字段被隐藏但包含默认值并且无法更改因此被隐藏（是否有更安全的方法可以让默认字段始终是一个变量？）无论如何当我使用

```
username = forms.CharField(widget=forms.HiddenInput()) 
```

它只隐藏实际的输入字段，并让标签在网站的 html 上是免费的，所以有没有办法让我摆脱自由浮动的标签？有没有更好的方法将当前登录用户的用户名提交给模型？

现在我在这样的表格上使用 inital ：

```
USER=request.user
ref_create = CashtextsForm(initial={'username': USER}) 
```

那是安全的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T19:45:51.373

如果用户不需要编辑表单字段，最好不要将其包含在模型表单中——即使是隐藏的表单输入也可以由用户操作。

要删除它，只需将其添加到模型表单元类中的排除元组中：

```
class MyForm(forms.ModelForm):
    class Meta:
        model = MyModel
        exclude = ('username',) 
```

然后，`username`在他们提交表单后设置为当前用户，您将在检查 if 后使用以下代码`form.is_valid()`：

```
mymodel = form.save(commit=False)
mymodel.username = request.user
mymodel.save() 
```

# php - 如何将地址列表添加到地图的一侧？

> ID：10235329
> 
> 赞同：-5
> 
> 时间：2012-04-19T19:26:05.197
> 
> 标签：php, javascript, codeigniter, google-maps

我所需要的只是学习如何向[这个](https://perfectsmoked.com/best-wireless-meat-thermometer/)谷歌地图/网页添加更多地址。

这个页面在我之前几年就已经到位并由其他人设计。更糟糕的是，该站点使用 CodeIgnigter（我不知道如何使用它）

我不需要重新设计或任何东西。我只需要知道如何添加更多地址。

**PHP代码/codeigniter**

```
<? $this->load->view("inc/header");
?>
  <script src="http://maps.google.com/maps?file=api&v=2&key=removed" 

  type="text/javascript"></script>

  <script type="text/javascript">

//<![CDATA[
var cm_map;
var cm_mapMarkers = [];
var cm_mapHTMLS = [];

// Create a base icon for all of our markers that specifies the
// shadow, icon dimensions, etc.
var cm_baseIcon = new GIcon();
cm_baseIcon.shadow = "http://www.google.com/mapfiles/shdow50.png";
cm_baseIcon.iconSize = new GSize(20, 34);
cm_baseIcon.shadowSize = new GSize(37, 34);
cm_baseIcon.iconAnchor = new GPoint(9, 34);
cm_baseIcon.infoWindowAnchor = new GPoint(9, 2);
cm_baseIcon.infoShadowAnchor = new GPoint(18, 25);

// Change these parameters to customize map
var param_wsId = "od6";
var param_ssKey = "removed";
var param_useSidebar = true;
var param_titleColumn = "address";
var param_descriptionColumn = "link";
var param_latColumn = "latitude";
var param_lngColumn = "longitude";
var param_rankColumn = "";
var param_iconType = "red";
var param_iconOverType = "green";

/**
 * Loads map and calls function to load in worksheet data.
 */
function cm_load() {  
  if (GBrowserIsCompatible()) {
    // create the map
    cm_map = new GMap2(document.getElementById("cm_map"));
    cm_map.addControl(new GLargeMapControl());
    cm_map.addControl(new GMapTypeControl());
    cm_map.setCenter(new GLatLng( 43.907787,-79.359741), 2);
    cm_getJSON();
  } else {
    alert("Sorry, the Google Maps API is not compatible with this browser");
  } 
}

/**
 * Function called when marker on the map is clicked.
 * Opens an info window (bubble) above the marker.
 * @param {Number} markerNum Number of marker in global array
 */
function cm_markerClicked(markerNum) {
  cm_mapMarkers[markerNum].openInfoWindowHtml(cm_mapHTMLS[markerNum]);
}

/**
 * Function that sorts 2 worksheet rows from JSON feed
 * based on their rank column. Only called if column is defined.
 * @param {rowA} Object Represents row in JSON feed
 * @param {rowB} Object Represents row in JSON feed
 * @return {Number} Difference between row values
 */
function cm_sortRows(rowA, rowB) {
  var rowAValue = parseFloat(rowA["gsx$" + param_rankColumn].$t);
  var rowBValue = parseFloat(rowB["gsx$" + param_rankColumn].$t);

  return rowAValue - rowBValue;
}

/** 
 * Called when JSON is loaded. Creates sidebar if param_sideBar is true.
 * Sorts rows if param_rankColumn is valid column. Iterates through worksheet rows, 
 * creating marker and sidebar entries for each row.
 * @param {JSON} json Worksheet feed
 */       
function cm_loadMapJSON(json) {
  var usingRank = false;

  if(param_useSidebar == true) {
    var sidebarTD = document.createElement("td");
    sidebarTD.setAttribute("width","150");
    sidebarTD.setAttribute("valign","top");
    var sidebarDIV = document.createElement("div");
    sidebarDIV.id = "cm_sidebarDIV";
    sidebarDIV.style.overflow = "auto";
    sidebarDIV.style.height = "860px";
    sidebarDIV.style.fontSize = "11px";
    sidebarDIV.style.color = "#000000";
    sidebarTD.appendChild(sidebarDIV);
    document.getElementById("cm_mapTR").appendChild(sidebarTD);
  }

  var bounds = new GLatLngBounds();   

  if(json.feed.entry[0]["gsx$" + param_rankColumn]) {
    usingRank = true;
    json.feed.entry.sort(cm_sortRows);
  }
  for (var i = 0; i < <?=count($address)+1?>; i++) {
    var entry = json.feed.entry[i];

    if(entry["gsx$" + param_latColumn]) {
      var lat = parseFloat(entry["gsx$" + param_latColumn].$t);
      var lng = parseFloat(entry["gsx$" + param_lngColumn].$t);
      var point = new GLatLng(lat,lng);
      var html = "<div style='font-size:12px'>";
      html += "<strong>" + entry["gsx$"+param_titleColumn].$t 
              + "</strong>";
      var label = entry["gsx$"+param_titleColumn].$t;
      var rank = 0;
      if(usingRank && entry["gsx$" + param_rankColumn]) {
        rank = parseInt(entry["gsx$"+param_rankColumn].$t);
      }
        var trimmed = label.replace(/^\s+|\s+$/g, '') ;
        var link_label = label.replace(/ /gi,'-');
        link_label = link_label.toLowerCase();
        link_label = link_label.replace(/^\s+|\s+$/g, '') ;

if(trimmed == "1286 West Adams Blvd" )
{
     if(entry["gsx$" + param_descriptionColumn]) {
    html += "<br/><a href=\"<?=base_url()?>Housing/propertyDetail/1286-west-adams-blvd.html\">Click here for housing option</a>" ;
    }

}
else if(trimmed == "1239 West 30th Street")
{
    if(entry["gsx$" + param_descriptionColumn]) {
    html += "<br/><a href=\"<?=base_url()?>Housing/propertyDetail/1352-west-29th-street.html\">Click here for housing option</a>" ;
    }
}

else if(trimmed == "2150 Oak Street")
{
    if(entry["gsx$" + param_descriptionColumn]) {
    html += "<br/><a href=\"<?=base_url()?>Housing/propertyDetail/2126-50-south-oak-867-889-west-23rd-street.html\">Click here for housing option</a>" ;
    }
}
else if(trimmed == "1146 West 36th Place")
{
    if(entry["gsx$" + param_descriptionColumn]) {
    html += "<br/><a href=\"<?=base_url()?>Housing/propertyDetail/1140--1168-west-36th-place.html\">Click here for housing option</a>" ;
    }
}else if(trimmed == "1199 West 37th Drive")
{
    if(entry["gsx$" + param_descriptionColumn]) {
    html += "<br/><a href=\"<?=base_url()?>Housing/propertyDetail/1189--1199-west-37th-drive.html\">Click here for housing option</a>" ;
    }
}
else if(trimmed == "2611 South Portland Street")
{
    if(entry["gsx$" + param_descriptionColumn]) {
    html += "<br/><a href=\"<?=base_url()?>Housing/propertyDetail/2611-south-portland.html\">Click here for housing option</a>" ;
    }
}

else
{
    if(entry["gsx$" + param_descriptionColumn]) {

        html += "<br/><a href=\"<?=base_url()?>Housing/propertyDetail/"+link_label+".html\">Click here for housing option</a>" ;
           }

}

      html += "</div>";

      // create the marker

      var marker = cm_createMarker(point,label,html,rank);
      //label = 'hello';
      cm_map.addOverlay(marker);

      cm_mapMarkers.push(marker);

      cm_mapHTMLS.push(html);

      bounds.extend(point);

      if(param_useSidebar == true) {

        var markerA = document.createElement("a");

        markerA.setAttribute("href","javascript:cm_markerClicked('" + i +"')");

        markerA.style.color = "#000000";

        var sidebarText= "";

        if(usingRank) {

          sidebarText += rank + ") ";

        } 

        sidebarText += label;

        markerA.appendChild(document.createTextNode(sidebarText));

        // condition to remove an address from the list....
        /*if(trimmed != '1155 24th Street')
        {*/
            sidebarDIV.appendChild(markerA);

            sidebarDIV.appendChild(document.createElement("br"));

            sidebarDIV.appendChild(document.createElement("br"));
        //}

      } 

    }

  }

  cm_map.setZoom(cm_map.getBoundsZoomLevel(bounds));

  cm_map.setCenter(bounds.getCenter());

}

/**

 * Creates marker with ranked Icon or blank icon,

 * depending if rank is defined. Assigns onclick function.

 * @param {GLatLng} point Point to create marker at

 * @param {String} title Tooltip title to display for marker

 * @param {String} html HTML to display in InfoWindow

 * @param {Number} rank Number rank of marker, used in creating icon

 * @return {GMarker} Marker created

 */

function cm_createMarker(point, title, html, rank) {

  var markerOpts = {};

  var nIcon = new GIcon(cm_baseIcon);

  if(rank > 0 && rank < 100) {

    nIcon.imageOut = "http://gmaps-samples.googlecode.com/svn/trunk/" +

        "markers/" + param_iconType + "/marker" + rank + ".png";

    nIcon.imageOver = "http://gmaps-samples.googlecode.com/svn/trunk/" +

        "markers/" + param_iconOverType + "/marker" + rank + ".png";

    nIcon.image = nIcon.imageOut; 

  } else { 

    nIcon.imageOut = "http://gmaps-samples.googlecode.com/svn/trunk/" +

        "markers/" + param_iconType + "/blank.png";

    nIcon.imageOver = "http://gmaps-samples.googlecode.com/svn/trunk/" +

        "markers/" + param_iconOverType + "/blank.png";

    nIcon.image = nIcon.imageOut;

  }

  markerOpts.icon = nIcon;

  markerOpts.title = title;      

  var marker = new GMarker(point, markerOpts);

  GEvent.addListener(marker, "click", function() {

    marker.openInfoWindowHtml(html);

  });

  GEvent.addListener(marker, "mouseover", function() {

    marker.setImage(marker.getIcon().imageOver);

  });

  GEvent.addListener(marker, "mouseout", function() {

    marker.setImage(marker.getIcon().imageOut);

  });

  GEvent.addListener(marker, "infowindowopen", function() {

    marker.setImage(marker.getIcon().imageOver);

  });

  GEvent.addListener(marker, "infowindowclose", function() {

    marker.setImage(marker.getIcon().imageOut);

  });

  return marker;

}

/**

 * Creates a script tag in the page that loads in the 

 * JSON feed for the specified key/ID. 

 * Once loaded, it calls cm_loadMapJSON.

 */

function cm_getJSON() {

  // Retrieve the JSON feed.

  var script = document.createElement('script');

  script.setAttribute('src', 'http://spreadsheets.google.com/feeds/list'

                         + '/' + param_ssKey + '/' + param_wsId + '/public/values' +

                        '?alt=json-in-script&callback=cm_loadMapJSON');

  script.setAttribute('id', 'jsonScript');

  script.setAttribute('type', 'text/javascript');

  document.documentElement.firstChild.appendChild(script);
}

setTimeout('cm_load()', 500); 

//]]>

</script>
<body onLoad="FP_preloadImgs(/*url*/'button18.jpg', /*url*/'button19.jpg'); if (document.getElementById('zoom_searchbox')) {document.getElementById('zoom_searchbox').focus();}" bgcolor=#969696>
<div id="junaid"></div>
<div class="body_main">

<div class="banner_contianer">
                <div class="banner_bg"><img src="<?=base_url()?>banners/properties.png" alt="" /></div>
                <div class="banner_btm_flear"></div></div>

                <div class="body_left_cont">
                    <div class="welcome_message">
                        <h1><?=$page_data['heading']?></h1>
                  </div>
                        <div class="tabs_main_cont" >
                <div class="tabs_md_show"><img src="<?=base_url()?>images/search-top-bg.png" alt="" /></div>
                    <div class="tabs_data_cont">
                            <div class="tabs_repeat_inner">
                                <div class="show_detail_contianer">
                                    <div class="show_In_cont">
                                    <div class="show_In_properties">
                                        <table bgcolor="#FFFFFF" id="cm_mapTABLE"> 

      <tbody> <tr id="cm_mapTR">

          <td> <div id="cm_map" style="width:530px; height:860px"></div> </td>

      </tr> </tbody>

    </table>
                                       </div> 
                                    </div>
                                </div>
                            </div>
                           <div class="tabs_md_show"><img src="<?=base_url()?>images/search-btm-bg.png" alt="" /></div>           
              </div>

                    </div>

                        </div>

                </body>

                        <?PHP
//$this->load->view("inc/right_panel");
?>

                            <div class="opportunities">We Do Business In Accordance With The Federal Fair Housing Law Equal Housing Opportunity</div>
                </div>

        <?PHP
$this->load->view("inc/footer");
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T19:49:33.680

这很简单。一变：

1.  修改[电子表格](https://docs.google.com/spreadsheet/ccc?key=t63uNv1JYAjjbdSo2NVr0ew)

此电子表格包含所有地址描述和坐标。您可能需要向作者请求访问权限。

添加新条目后 - 确保提要包含新条目

仅供参考 [Feed url](https://spreadsheets.google.com/feeds/list/t63uNv1JYAjjbdSo2NVr0ew/od6/public/basic)

电子表格键是

```
t63uNv1JYAjjbdSo2NVr0ew 
```

它会自动被代码拾取，只需刷新一个页面。

# ruby-on-rails - RSpec / Webmock 身体响应

> ID：10235336
> 
> 赞同：2
> 
> 时间：2012-04-19T19:26:23.857
> 
> 标签：ruby-on-rails, ruby, rspec

我正在使用带有 rspec 的 webmock gem，并且正在测试一些将图像上传到远程 API 的功能。我想存根上传请求，说它将接受正文的任何​​内容。这可能吗？

例如类似的东西

```
 it "uploads a photo" do
    image = "test_image.jpg"
    @meh.upload_image(image)
    stub_request(:post, "http://myurl").
         with(:body => *).
         to_return(:status => 200, :body => "", :headers => {})
  end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T19:52:55.947

您可以忽略该`with(:body => *)`部分。如果要确保正文不为空，可以使用正则表达式，即`with(:body => /.+/)`

# php - 有一个公式在服务器端和客户端有不同的结果吗？

> ID：10235342
> 
> 赞同：1
> 
> 时间：2012-04-19T19:26:53.020
> 
> 标签：php, javascript

我已经编写了一个函数来计算我的网站中的支付费用，但它在 javascript 和 php 中给出了不同的结果。您应该将此代码复制到 htm/html 文件中。

bug.php 中的代码：

```
<table style="background-color:#ccc; width:600px; font-family:Tahoma">
<tbody><tr style="background-color:#00CCFF"><td>original number</td><td>phpToFixed()</td><td>jsToFixed()</td><td>phpCalc</td><td>jsCalc</td></tr>
<script>
function jsToFixed(i) {
return(Math.floor(i * 100) / 100);
}
function jsCalc(ob){
    val=jsToFixed(ob);
    if(val>0&&val!=''){
    result = jsToFixed(0.95*ob);
    }else{

    result = 0;
    }
    if(result==val&&result!=0){
    result-=0.01;
    }
return result;
}
<?php
function phpToFixed($amount){
$inp= floor($amount * 100) / 100;
return $inp;
}
function phpCalc($amount){
$inp= phpToFixed($amount);

    if($inp>0&&$inp!=''){
$result = phpToFixed($amount*0.95);

    }else{
$result = 0;
    }
if($result==$inp&&$result!=0){
$result-=0.01;
}
return $result;
}
for($i=0;$i<1;$i+=0.009){
?>
document.write("<tr><td class='org'><? echo $i; ?> </td><td class='fix'> <? echo phpToFixed($i); ?> </td><td class='fix'>"+jsToFixed(<? echo $i; ?>)+"</td><td class='calc'>"+jsCalc(<? echo $i; ?>)+"</td><td class='calc'>"+<? echo phpCalc($i); ?>+" </td></tr> ");
<?php
}
?>
</script>
</tbody>
</table> 
```

任何人都可以弄清楚吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T19:31:03.290

在处理货币时，总是使用整数数学。例如，如果您的货币是美元，则始终以美分计算价格。

浮点数不能`0.01`准确表示。因此，您遇到问题也就不足为奇了。

然而，整数`1`可以精确表示，当你完成计算时，你可以除以 100 并[`round`](http://php.net/round)保留两位小数 - 任何 FP 错误都会太小而不会产生任何影响。

# iphone - IOS/JSON。UIImage 的 URL 字符串

> ID：10235350
> 
> 赞同：0
> 
> 时间：2012-04-19T19:27:18.053
> 
> 标签：iphone, ios, json, url, uiimage

哇，差点放弃了。。。。

这是我解析 JSON 的日志，

```
NSLog(@"http://example.com%@",url1);

2012-04-20 04:14:37.686 Dolls[11070:707] http://example.com/uploads/ed_1.png 
```

和

```
NSString *stringURL = [NSString stringWithFormat:@"http://example.com%@",url1];
NSURL *url = [NSURL URLWithString:stringURL];
NSData *imgData = [[NSData alloc] initWithContentsOfURL:url];
image = [UIImage  imageWithData:imgData]; 
```

最后......（我正在使用AQGrid......所以）

```
[cell.imageView setImage:image]; 
```

*单元格图像仍然是空白的。我做错了什么？*

=======

找出在“图像”仍在下载之前加载的 cell.imageview。

在这种情况下，如何在图像下载（或下载）后重新加载 [setImage:] 方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T05:42:00.220

您好，如果您将图像保存在本地目录中，那么您可以使用以下代码从那里加载图像：

```
- (NSString *)applicationDocumentsDirectory {
    return [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
}

-(void)loadimage{
    NSString *workSpacePath=[[self applicationDocumentsDirectory] stringByAppendingPathComponent:@"your image-name"];
UIImage *imgLocal = [UIImage imageWithData:[NSData dataWithContentsOfFile:workSpacePath]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T05:53:34.963

[SDWebImage lib](https://github.com/rs/SDWebImage)将彻底解决您的问题。

写吧：

```
NSString *stringURL = [NSString stringWithFormat:@"http://xxx.com%@",url1];
NSURL *url = [NSURL URLWithString:stringURL];
[cell.imageView setImageWithURL:url]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-18T04:31:29.487

这应该有效：

```
[[cell imageView] setImage:[UIImage imageWithData:imgData]]; 
```

# javascript - 使用 Python 将 HTML/CSS/Javascript 文件转换为 PDF？

> ID：10235354
> 
> 赞同：2
> 
> 时间：2012-04-19T19:27:24.247
> 
> 标签：javascript, python, html, css, pdf

我需要将 HTML+CSS+Javascript 文件从 Django 视图转换为 PDF，因此需要使用 Python。

我可以使用 xhtml2pdf/PISA，但它只支持 HTML 和 CSS，不支持 Javascript，这是必需的。

另一种选择是 py-wkhtmltox，但它已经很老了，我还不能让它工作，我只是得到“ImportError：libwkhtmltox.so.0：无法打开共享对象文件：没有这样的文件或目录”，不知道从哪里获取该文件，而不是突然将 libwkhtmltox.so 重命名为 libwkhtmltox.so.0，但后来我得到：

```
Traceback (most recent call last):
  File "pdf_test1.py", line 5, in <module>
    pdf.set_object_setting('path', 'http://www.google.com')
  File "wkhtmltox.pyx", line 118, in wkhtmltox.Pdf.__getattr__ (wkhtmltox.c:1228)
AttributeError: 'wkhtmltox._Pdf' object has no attribute 'set_object_setting' 
```

另一种选择是使用 webkit ( [http://bharatikunal.wordpress.com/2010/01/31/converting-html-to-pdf-with-python-and-qt/](http://bharatikunal.wordpress.com/2010/01/31/converting-html-to-pdf-with-python-and-qt/) ) 但我不能执行 "sys .exit(app.exec_())" 来自 Django 视图。

我现在唯一能想到的就是从 django 视图创建一个单独的 webkit python 脚本和 os.system 它，使“sys.exit(app.exec_())”成为可能，从而生成 PDF。但我对其他建议持开放态度，从 django 视图使用 os.system 有点奇怪。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T20:27:47.287

我建议使用[wkhtmltopdf](https://code.google.com/p/wkhtmltopdf/)。它可以作为 linux 的静态二进制文件使用，因此您不应该遇到任何共享对象问题。wkhtmltopdf 包装了 webkit 并支持 javascript，您甚至可以告诉它在渲染发生之前运行任何 JS 代码的时间。我已经成功地使用它制作了页面的 PDF，这些页面上有一些复杂的图表生成代码。只需使用`subprocess.call()`.

# asp.net - ASP.NET 应用程序 - 调试步骤

> ID：10235360
> 
> 赞同：0
> 
> 时间：2012-04-19T19:27:39.003
> 
> 标签：asp.net, debugging, iis-6, visual-studio-debugging

我开发的一个应用程序每周大约崩溃 2 次。当它崩溃时，它会关闭整个应用程序，直到应用程序池被回收。我无法在开发环境中重现该错误。

下面我粘贴了导致崩溃的代码和来自应用程序事件查看器的错误消息。**使应用程序崩溃的行以 ~~~~ 开头**。该消息指出我有一个打开的 DataReader，但我检查了我的代码并且我总是关闭我的数据读取器和连接。

我不知道我应该采取什么步骤来解决这个错误。任何帮助将不胜感激。谢谢你！

```
 public bool open() {
        //-- check if connection is closed
        if (this.dbconn.State == System.Data.ConnectionState.Closed) {
            try {
                this.dbconn.Open();
            }
            catch (Exception ex) {
                this.errorCode = (int)DatabaseErrorType.DBOpenFailed;
                this.errorMessage = System.Web.HttpUtility.HtmlEncode(ex.Message);
                throw ex;
            }
        }
        return true;
    }

/// <summary> closes connection object</summary>
    public bool close() {
        if (!(this.dbconn == null)) {
            if (!(this.dbconn.State == System.Data.ConnectionState.Closed)) {
                try {
                    this.dbconn.Close();
                }
                catch (Exception ex) {
                    this.errorCode = (int)DatabaseErrorType.DBCloseFailed;
                    this.errorMessage = System.Web.HttpUtility.HtmlEncode(ex.Message);
                    return false;
                }

            }
        }
        return true;
    }
        // GET MULTI Accounts
    public List<DTO.DTOAccount> GetAccounts(DTO.DTOAccount objAcc) {
        //-- reset error variables
        resetError();

        // make sure the connection is open
        if (this.open()) {

            SqlDataReader sqlReader = null;

            try {

                SqlCommand sqlProcedure = new SqlCommand("[dbo].[sp_Select_ONECARD_ACCOUNTS]", this.dbconn);
                sqlProcedure.CommandType = System.Data.CommandType.StoredProcedure;
                sqlProcedure.Parameters.Add(new SqlParameter("@ACCOUNT"             , objAcc.AccountId));
                sqlProcedure.Parameters.Add(new SqlParameter("@UDEF_4"              , objAcc.UDEF_4));

                ~~~~sqlReader = sqlProcedure.ExecuteReader();

                List<DTO.DTOAccount> Accounts = new List<DTO.DTOAccount>();
                // iterate through all values returned
                while (sqlReader.Read()) {
                    DTO.DTOAccount tmpAccount               = new ca.eyecode.onecard.DTO.DTOAccount();
                    tmpAccount.AccountId                    = (String)sqlReader["ACCOUNT"];
                    tmpAccount.Category                     = (String)sqlReader["CATEGORY"];
                    tmpAccount.Groups                       = (String)sqlReader["GROUPS"];
                    tmpAccount.Suffix                       = (String)sqlReader["SUFFIX"];
                    tmpAccount.UDEF_1                       = ((String)sqlReader["UDEF_1"]).Trim();
                    tmpAccount.UDEF_4                       = ((String)sqlReader["UDEF_4"]).Trim();
                    tmpAccount.FirstName                    = ((String)sqlReader["FNAME"]).Trim();
                    tmpAccount.LastName                     = ((String)sqlReader["LNAME"]).Trim();
                    tmpAccount.Picture                      = (sqlReader["PICTURE"] == DBNull.Value ? String.Empty : (String)sqlReader["PICTURE"]).Trim();
                    // add account items
                    tmpAccount.AccountItems.Add (new DTO.DTOAccountItem() { Account= AccountType.ONEcardCash, Balance= Convert.ToDouble((Decimal)sqlReader["BALANCE_1"])});
                    tmpAccount.AccountItems.Add (new DTO.DTOAccountItem() { Account= AccountType.Department, Balance= Convert.ToDouble((Decimal)sqlReader["BALANCE_2"])});
                    tmpAccount.AccountItems.Add (new DTO.DTOAccountItem() { Account= AccountType.BookStore, Balance= Convert.ToDouble((Decimal)sqlReader["BALANCE_3"])});
                    tmpAccount.AccountItems.Add (new DTO.DTOAccountItem() { Account= AccountType.TechBalance, Balance= Convert.ToDouble((Decimal)sqlReader["BALANCE_4"])});
                    tmpAccount.AccountItems.Add (new DTO.DTOAccountItem() { Account= AccountType.Bonus1, Balance= Convert.ToDouble((Decimal)sqlReader["BALANCE_5"])});
                    tmpAccount.AccountItems.Add (new DTO.DTOAccountItem() { Account= AccountType.MealPlanExtra, Balance= Convert.ToDouble((Decimal)sqlReader["BALANCE_6"])});
                    tmpAccount.AccountItems.Add (new DTO.DTOAccountItem() { Account= AccountType.MealPlanDollars, Balance= Convert.ToDouble((Decimal)sqlReader["BALANCE_7"])});
                    tmpAccount.AccountItems.Add (new DTO.DTOAccountItem() { Account= AccountType.AramarkCredit, Balance= Convert.ToDouble((Decimal)sqlReader["BALANCE_8"])});
                    tmpAccount.AccountItems.Add (new DTO.DTOAccountItem() { Account= AccountType.AramarkEmployees, Balance= Convert.ToDouble((Decimal)sqlReader["BALANCE_9"])});
                    // Combine Totals to One Meal PLAN
                    tmpAccount.AccountItems[5].Balance += tmpAccount.AccountItems[6].Balance;
                    tmpAccount.AccountItems[5].Balance += tmpAccount.AccountItems[8].Balance;
                    tmpAccount.AccountItems[6].Balance = 0;
                    tmpAccount.AccountItems[8].Balance = 0;

                    Accounts.Add(tmpAccount);
                }
                return Accounts;
            }
            finally {
                try {
                if (sqlReader != null)  {
                    sqlReader.Close();
                }
                }
                catch {}
                this.close();
            }

        }
        return null;
    } 
```

错误

```
 Event code: 3005 
Event message: An unhandled exception has occurred. 
Event time: 4/19/2012 11:30:39 AM 
Event time (UTC): 4/19/2012 5:30:39 PM 
Event ID: 7715c17b872240829c3dfb562268998e 
Event sequence: 1253 
Event occurrence: 1 
Event detail code: 0 

Application information: 
    Application domain: /LM/W3SVC/997719702/Root-1-129793277036652335 
    Trust level: Full 
    Application Virtual Path: / 
    Application Path: 
    Machine name: 

Process information: 
    Process ID: 820 
    Process name: w3wp.exe 
    Account name: 

Exception information: 
    Exception type: InvalidOperationException 
    Exception message: There is already an open DataReader associated with this Command which must be closed first.
   at System.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at System.Data.SqlClient.SqlCommand.ValidateCommand(String method, Boolean async)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader()
   at ca.eyecode.onecard.DAO.DAOAccount.GetAccounts(DTOAccount objAcc) in C:\inetpub\wwwroot\ONEcard\OneAccount\OneAccount\Models\ca.eyecode\onecard\DAO\DAOAccount.cs:line 47
   at ca.eyecode.onecard.BL.BLAccount.AccountsGet(DTOAccount objAcc) in C:\inetpub\wwwroot\ONEcard\OneAccount\OneAccount\Models\ca.eyecode\onecard\BL\BLAccount.cs:line 228
   at ca.eyecode.onecard.BL.BLAccount.AccountLogin(String CCID, String Password) in C:\inetpub\wwwroot\ONEcard\OneAccount\OneAccount\Models\ca.eyecode\onecard\BL\BLAccount.cs:line 171
   at ca.eyecode.onecard.BL.BLFacade.AccountLogin(String CCID, String Password) in C:\inetpub\wwwroot\ONEcard\OneAccount\OneAccount\Models\ca.eyecode\onecard\BL\BLFacade.cs:line 36
   at ca.eyecode.onecard.Controllers.HomeController.Index(String inpCCID, String inpPASS) in C:\inetpub\wwwroot\ONEcard\OneAccount\OneAccount\Controllers\HomeController.cs:line 77
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClassd.<InvokeActionMethodWithFilters>b__a()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)
   at System.Web.Mvc.Controller.ExecuteCore()
   at System.Web.Mvc.MvcHandler.<>c__DisplayClass8.<BeginProcessRequest>b__4()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass1.<MakeVoidDelegate>b__0()
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)

Request information: 
    Request URL: 
    Request path: / 
    User host address: 
    User:  
    Is authenticated: False 
    Authentication Type:  
    Thread account name: 

Thread information: 
    Thread ID: 9 
    Thread account name:  
    Is impersonating: False 
    Stack trace:    at System.Data.SqlClient.SqlInternalConnectionTds.ValidateConnectionForExecute(SqlCommand command)
   at System.Data.SqlClient.SqlCommand.ValidateCommand(String method, Boolean async)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader()
   at ca.eyecode.onecard.DAO.DAOAccount.GetAccounts(DTOAccount objAcc) in C:\inetpub\wwwroot\ONEcard\OneAccount\OneAccount\Models\ca.eyecode\onecard\DAO\DAOAccount.cs:line 47
   at ca.eyecode.onecard.BL.BLAccount.AccountsGet(DTOAccount objAcc) in C:\inetpub\wwwroot\ONEcard\OneAccount\OneAccount\Models\ca.eyecode\onecard\BL\BLAccount.cs:line 228
   at ca.eyecode.onecard.BL.BLAccount.AccountLogin(String CCID, String Password) in C:\inetpub\wwwroot\ONEcard\OneAccount\OneAccount\Models\ca.eyecode\onecard\BL\BLAccount.cs:line 171
   at ca.eyecode.onecard.BL.BLFacade.AccountLogin(String CCID, String Password) in C:\inetpub\wwwroot\ONEcard\OneAccount\OneAccount\Models\ca.eyecode\onecard\BL\BLFacade.cs:line 36
   at ca.eyecode.onecard.Controllers.HomeController.Index(String inpCCID, String inpPASS) in C:\inetpub\wwwroot\ONEcard\OneAccount\OneAccount\Controllers\HomeController.cs:line 77
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClassd.<InvokeActionMethodWithFilters>b__a()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)
   at System.Web.Mvc.Controller.ExecuteCore()
   at System.Web.Mvc.MvcHandler.<>c__DisplayClass8.<BeginProcessRequest>b__4()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass1.<MakeVoidDelegate>b__0()
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:58:00.997

To be sure, you can just start using a `using` statement around your `SqlDataReader`. Do the same for the other elements. That way you're sure they're always being disposed and closed.

Next to that, make sure you don't nest SqlDataReaders. Close them as soon as you can, and do your data access sequential. That should fix the issue.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T18:51:12.027

The issue was that I had a try finally block in my code. Within a handled exception, the associated finally block is guaranteed to be run. However, if the exception is unhandled, execution of the finally block is dependent on how the exception unwind operation is triggered. That, in turn, is dependent on how your computer is set up.

To make sure the finally block is executed every time you can not omit the catch block. [http://msdn.microsoft.com/en-us/library/zwc8s4fz(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/zwc8s4fz(v=vs.100).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T19:52:55.273

除非您真的需要其他地方的连接对象，否则我会将方法重构为：

```
public List<DTO.DTOAccount> GetAccounts(DTO.DTOAccount objAcc)
{
    //-- reset error variables
    resetError();

    List<DTO.DTOAccount> Accounts = new List<DTO.DTOAccount>();

    try
    {
        using (SqlConnection dbconn = new SqlConnection("your-connection-string"))
        {
            using (SqlCommand sqlProcedure = new SqlCommand("[dbo].[sp_Select_ONECARD_ACCOUNTS]", dbconn))
            {
                sqlProcedure.CommandType = System.Data.CommandType.StoredProcedure;
                sqlProcedure.Parameters.Add(new SqlParameter("@ACCOUNT", objAcc.AccountId));
                sqlProcedure.Parameters.Add(new SqlParameter("@UDEF_4", objAcc.UDEF_4));
                dbconn.Open();
                using (SqlDataReader sqlReader = sqlProcedure.ExecuteReader())
                {
                    while (sqlReader.Read())
                    {
                        DTO.DTOAccount tmpAccount = new ca.eyecode.onecard.DTO.DTOAccount();
                        tmpAccount.AccountId = (String)sqlReader["ACCOUNT"];
                        tmpAccount.Category = (String)sqlReader["CATEGORY"];
                        tmpAccount.Groups = (String)sqlReader["GROUPS"];
                        tmpAccount.Suffix = (String)sqlReader["SUFFIX"];
                        tmpAccount.UDEF_1 = ((String)sqlReader["UDEF_1"]).Trim();
                        tmpAccount.UDEF_4 = ((String)sqlReader["UDEF_4"]).Trim();
                        tmpAccount.FirstName = ((String)sqlReader["FNAME"]).Trim();
                        tmpAccount.LastName = ((String)sqlReader["LNAME"]).Trim();
                        tmpAccount.Picture = (sqlReader["PICTURE"] == DBNull.Value ? String.Empty : (String)sqlReader["PICTURE"]).Trim();
                        // add account items
                        tmpAccount.AccountItems.Add(new DTO.DTOAccountItem() { Account = AccountType.ONEcardCash, Balance = Convert.ToDouble((Decimal)sqlReader["BALANCE_1"]) });
                        tmpAccount.AccountItems.Add(new DTO.DTOAccountItem() { Account = AccountType.Department, Balance = Convert.ToDouble((Decimal)sqlReader["BALANCE_2"]) });
                        tmpAccount.AccountItems.Add(new DTO.DTOAccountItem() { Account = AccountType.BookStore, Balance = Convert.ToDouble((Decimal)sqlReader["BALANCE_3"]) });
                        tmpAccount.AccountItems.Add(new DTO.DTOAccountItem() { Account = AccountType.TechBalance, Balance = Convert.ToDouble((Decimal)sqlReader["BALANCE_4"]) });
                        tmpAccount.AccountItems.Add(new DTO.DTOAccountItem() { Account = AccountType.Bonus1, Balance = Convert.ToDouble((Decimal)sqlReader["BALANCE_5"]) });
                        tmpAccount.AccountItems.Add(new DTO.DTOAccountItem() { Account = AccountType.MealPlanExtra, Balance = Convert.ToDouble((Decimal)sqlReader["BALANCE_6"]) });
                        tmpAccount.AccountItems.Add(new DTO.DTOAccountItem() { Account = AccountType.MealPlanDollars, Balance = Convert.ToDouble((Decimal)sqlReader["BALANCE_7"]) });
                        tmpAccount.AccountItems.Add(new DTO.DTOAccountItem() { Account = AccountType.AramarkCredit, Balance = Convert.ToDouble((Decimal)sqlReader["BALANCE_8"]) });
                        tmpAccount.AccountItems.Add(new DTO.DTOAccountItem() { Account = AccountType.AramarkEmployees, Balance = Convert.ToDouble((Decimal)sqlReader["BALANCE_9"]) });
                        // Combine Totals to One Meal PLAN
                        tmpAccount.AccountItems[5].Balance += tmpAccount.AccountItems[6].Balance;
                        tmpAccount.AccountItems[5].Balance += tmpAccount.AccountItems[8].Balance;
                        tmpAccount.AccountItems[6].Balance = 0;
                        tmpAccount.AccountItems[8].Balance = 0;

                        Accounts.Add(tmpAccount);
                    }
                }
            }
        }
    }
    catch
    {
        // do some error handling.
    }

    return Accounts;
} 
```

# playframework-2.0 - 从请求绑定表单并登录用户

> ID：10235362
> 
> 赞同：0
> 
> 时间：2012-04-19T19:27:43.510
> 
> 标签：playframework-2.0

我又来这里问关于 Play2.0 的问题 :-)。

我有一个模型叫`Task`. 此任务包含一个名为 的字段`createdBy`。必须使用**登录用户填充此字段。**

我的字段声明如下所示：

```
@ManyToOne
@Constraints.Required
public User createdBy; 
```

我呈现了一个表单，登录用户可以在其中从下拉框中输入*描述*和*优先级。*提交表单后，我调用我的`save()`方法。在保存方法中，我有以下代码：

```
Form<Task> taskForm = form(Task.class).bindFromRequest();

if (taskForm.hasErrors()) {
    return badRequest(views.html.tasks.taskCreate.render(taskForm));
}
taskForm.get().save(); 
```

显然，`Task`永远不会保存，因为该字段`createdBy`不包含任何（有效）用户。对用户的唯一引用是我保存了他的唯一**代码**，而不是会话中的主键。

*只有当我删除Required*约束并将用户后填到保存的任务时，我才能让它工作。必须有更好的方法将表单和用户绑定在一起，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T21:05:20.407

Play2.0 希望您做的是区分您的“数据库模型”和“表单 bean”。我也认为应该有更好的解决方案。但另一方面，它非常干净。所以你应该做的是：

1.  例如，创建一个名为 的“表单 bean” `TaskForm`。此类仅包含表单中显示的字段，以及正确的注释和验证。
2.  `toTask(User user)`在您的方法中创建一个`TaskForm`返回`Task`.
3.  将控制器中的代码更改为：

    ```
    Form<TaskForm> taskForm = form(TaskForm.class).bindFromRequest();

    if (taskForm.hasErrors()) {
      return badRequest(views.html.tasks.taskCreate.render(taskForm));
    }
    taskForm.get().toTask(user).save(); 
    ```

4.  将注释/验证保留在“模型类”`Task`中，但将它们视为数据库验证，而不是表单验证。

编辑：

*   一些额外的解释：我在 Play 组中讨论了这个验证/绑定问题：[讨论](https://groups.google.com/d/topic/play-framework/MSx5rGW6Z9g/discussion)1 ，[讨论](https://groups.google.com/d/topic/play-framework/Ll7SYwabI4o/discussion)2 。据我了解，Play Developers 的想法是使用 Form 类进行绑定/验证。这个 Form 类包装了一个现有的类。我认为他们认为这个包装的类是表单的一对一表示并没有错。唯一的问题是，Scala 语言比 Java 语言更容易做到这一点。在 Java 中，您必须创建许多“表单表示类”，而在 Scala 中，您可以使用“映射”和“案例类”之类的东西（[参见 ScalaForms](http://www.playframework.org/documentation/2.0/ScalaForms)）。因此，我完全同意您在评论中的观点，即可能不值得为一个不同的属性编写一个新的“表单 bean”，您宁愿在一个地方进行验证。但这就是它的设计方式。我希望他们要么自己更改 API，要么其他人仔细查看并提交拉取请求。但是现在，这就是框架希望您进行绑定/验证的方式。

*   例子：

    ```
    public class Task extends Model {

        @Constraints.Required
        public String description;

        @Constraints.Required
        public Integer priority;

        @ManyToOne
        @Constraints.Required
        public User createdBy;

        public Task() {
        }

        public Task(final TaskForm taskForm, final Long userCode) {
            description = taskForm.description;
            userCode = taskForm.userCode;
            createdBy = User.findByCode(userCode);
        }

    }

    public class TaskForm {

        @Constraints.Required
        public String description;

        @Constraints.Required
        public Integer priority;

        public toTask(final Long userCode) {
            return new Task(this, userCode);
        }

    }

    public class Tasks extends Controller {

        public static Result save() {
            Form<TaskForm> taskForm = form(TaskForm.class).bindFromRequest();

            if (taskForm.hasErrors()) {
                return badRequest(views.html.tasks.taskCreate.render(taskForm));
            }
            taskForm.get().toTask(session("userCode")).save();
        }

    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:08:20.347

从模型中删除所需的注释并分两步绑定新任务：

```
Form<Task> taskForm = form(Task.class).bindFromRequest();

if (taskForm.hasErrors()) {
    return badRequest(views.html.tasks.taskCreate.render(taskForm));
}

Task newTask = taskForm.get();
newTask.createdBy = someObjectOfUserModel;
newTask.save();

return ok("New user added"); 
```

# c# - 图表控件不可用？

> ID：10235369
> 
> 赞同：0
> 
> 时间：2012-04-19T19:28:31.140
> 
> 标签：c#, asp.net, visual-studio-2010

我刚刚开始使用图表控件并从这篇 technet 文章开始。 [http://msdn.microsoft.com/en-us/library/dd489237.aspx](http://msdn.microsoft.com/en-us/library/dd489237.aspx) 不幸的是，尽管选择了所需的命名空间，但图表控件并未显示在数据下的工具箱中。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:32:03.480

我们还在使用网络表单吗？您可以省去很多麻烦，只需使用这样的 javascript 解决方案，您的服务器肯定会因此而爱上您。

[http://www.highcharts.com/](http://www.highcharts.com/)

我对这个解决方案很幸运，它确实意味着理解 javascript，但它不是火箭科学。

# matlab - GCC 编译器问题

> ID：10235371
> 
> 赞同：0
> 
> 时间：2012-04-19T19:28:48.597
> 
> 标签：matlab, gcc

我正在尝试按照[http://home.wlu.edu/~levys/software/ardrone_autopylot/](http://home.wlu.edu/~levys/software/ardrone_autopylot/)中的教程将 MATLAB 与 ardrone 连接。在做“make”之后，我遇到的问题是 gcc 编译器，但我不确定。

做make后的输出：

```
在 /usr/local/MATLAB/R2011b/extern/include/matrix.h:293 包含的文件中，
                 来自 /usr/local/MATLAB/R2011b/extern/include/engine.h:44，
                 来自 matlab_agent.c:29：
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/include/stddef.h:149：错误：在 'typedef 之前需要'='、','、';'、'asm' 或 '__attribute__' '
在 /usr/local/MATLAB/R2011b/extern/include/matrix.h:294 包含的文件中，
                 来自 /usr/local/MATLAB/R2011b/extern/include/engine.h:44，
                 来自 matlab_agent.c:29：
/usr/local/MATLAB/R2011b/extern/include/tmwtypes.h:798：错误：在“mwSignedIndex”之前需要“=”、“,”、“;”、“asm”或“__attribute__”
matlab_agent.c：在函数“agent_comm_act”中：
matlab_agent.c:90：警告：从不兼容的指针类型初始化
制作：[matlab_agent.o] 错误 1

```

上面这几行看起来像是 GCC 编译器错误，遇到过此类问题的任何人请分享您的经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:46:07.473

没有你的源代码，就不可能准确地知道发生了什么；我确实注意到`typedef`第 149 行是相关包含文件中的第一个实际 C 代码，这让我认为您在包含之前的某个地方有无意的垃圾。例如，查看以下代码段会发生什么：

```
int
#include <stddef.h> 
```

（这不会产生完全相同的错误，至少在我的系统上是这样；我不知道什么令牌会这样做。）

# caching - 在 Lazyload 中再次加载缓存的图像

> ID：10235372
> 
> 赞同：0
> 
> 时间：2012-04-19T19:28:49.733
> 
> 标签：caching, lazy-loading

好吧，我在这里使用延迟加载[http://bloghutsbeta.blogspot.com/2012/03/testing-2_04.html](http://bloghutsbeta.blogspot.com/2012/03/testing-2_04.html) 延迟加载与流沙 jquery 结合使用。并且由于流沙需要回调，所以在流沙中也添加了一个lazyload的回调函数（就像你点击自行车、摩托车等按钮，那么流沙需要回调函数）这里是回调函数：

```
$(&quot;img&quot;).lazyload({
        effect : &quot;fadeIn&quot;
    });
}); 
```

现在我的问题是，即使所有图像都被缓存，您单击例如板球按钮然后它再次加载图像，这对用户来说很烦人，因为他们加载图像并且当他们单击按钮时它会一次又一次地加载图像你点击按钮。所以，我在想什么可以解决它？

*请不要告诉我使用其他 jquery 代替lazyload 或流沙，因为这不是我的选择*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T01:52:20.953

一次又一次地显示加载没有问题。（图像被缓存，所以没有附加请求）

但是，如果您真的不想显示缓存图像的加载，您可以将缓存图像保存在一个数组中，并在不在该数组中的图像中应用延迟加载。

# java - android选项卡布局错误

> ID：10235373
> 
> 赞同：0
> 
> 时间：2012-04-19T19:28:55.630
> 
> 标签：java, android, tabs

我正在尝试制作标签布局。我正在使用教程代码（如下），但它不起作用。LogCat 给出了这个错误：

*04-19 19:02:16.297: 错误/AndroidRuntime(455): java.lang.RuntimeException: 无法启动活动 ComponentInfo{jusbrz.bakalauras/jusbrz.bakalauras.FilesTabsActivity}: java.lang.RuntimeException: 您的内容必须有id 属性为 'android.R.id.tabhost' 的 TabHost*

我添加了新的活动来表现。

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="match_parent"
android:layout_height="match_parent">
<LinearLayout 
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<TabWidget 
android:id="@+id/tabs"
android:layout_width="fill_parent"
android:layout_height="wrap_content" >
</TabWidget>
<FrameLayout 
android:id="@+id/tabcontent"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
</FrameLayout>
</LinearLayout>     
</TabHost> 
```

在主要活动中使用此代码：

```
package jusbrz.bakalauras;
import android.app.TabActivity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TabHost;
public class FilesTabsActivity extends TabActivity{
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.files_tabs_layout);

    TabHost tabHost = getTabHost();  // The activity TabHost
    TabHost.TabSpec spec;  // Resusable TabSpec for each tab
    Intent intent;  // Reusable Intent for each tab

    // Create an Intent to launch an Activity for the tab (to be reused)
    intent = new Intent().setClass(this, AllFilesTabActivity.class);

    // Initialize a TabSpec for each tab and add it to the TabHost
    spec = tabHost.newTabSpec("Visi").setIndicator("Visi").setContent(intent);
    tabHost.addTab(spec);
}
} 
```

那么问题可能出在哪里？

**已编辑**

```
import android.app.TabActivity;
import android.os.Bundle;

public class AllFilesTabActivity extends TabActivity{
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.all_files_tab_layout);

        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:32:16.577

您在布局中缺少 tabhost id。请将您的布局更新为：

```
<TabHost
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:id="@android:id/tabhost"> 
```

更新你的类*FilesTabsActivity*：

```
TabHost tabHost = (TabHost)findViewById(android.R.id.tabhost);
TabSpec firstTabSpec = tabHost.newTabSpec("Visi");
firstTabSpec.setIndicator("Visi").setContent(new Intent(this,AllFilesTabActivity.class));
/** Add tabSpec to the TabHost to display. */
tabHost.addTab(firstTabSpec); 
```

如果你是如果你正在动态添加标签：

```
setContentView(R.layout.files_tabs_layout); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T19:34:55.697

如果你要使用`TabActivity`，你需要使用`@android:id/tabhost`作为你的 android ID 值`TabHost`。

浏览 StackOverflow 上的其他一些问题，似乎执行“Projects --> Clean”并重新启动 Eclipse 也可能会有所帮助。

# eclipse - 如何在 Eclipse 中更改 Maven 本地存储库

> ID：10235374
> 
> 赞同：55
> 
> 时间：2012-04-19T19:29:04.057
> 
> 标签：eclipse, maven

我正在从另一台服务器 A 上共享驱动器上的根目录中导入一个多模块 Maven 项目。在服务器 A 上，将成功运行，并且 Maven 使用和in`mvn install`正确设置。`repository/``settings.xml``/home/user/.m2`

但是，在我的工作站 PC 上将项目导入 Eclipse（实际上是 STS）后，我无法`mvn build`运行（我安装了 m2e 插件），这主要是由于缺少来自其他模块的依赖项。我意识到 Eclipse 正在我的工作站 PC 上使用`settings.xml`和`repository/`，因此 .m2 缓存中不会安装任何模块构建。

我正在尝试修改 Maven 以使用服务器 A 上的 .m2 目录。我只能将 settings.xml 设置为服务器 A 上的那个，但我无法更改本地存储库。我唯一的选择是“重新索引”。

有没有办法将本地存储库更改为服务器 A 上的存储库，或者是否有更好的方法在一台服务器上拥有代码，并在另一台 PC 上的 Tomcat 上编辑/构建/测试？

![在此处输入图像描述](../Images/06e54edadf59637ef9bf22b58065a3b3.png)

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-04-20T00:10:40.933

位置可以在 Maven->Installation -> Global Settings 中指定：settings.xml

![在此处输入图像描述](../Images/07052324daddff70dc6f2cda05dfc58b.png)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-08-24T14:56:30.393

在较新版本的 Eclipse 中，全局配置文件可以设置在

Windows > 首选项 > Maven > 用户设置 > 全局设置

*不要打败我为什么可以在用户设置中配置全局设置...可能是因为您需要在 Windows 上按“开始”关闭您的 PC 的相同原因...*：D

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-09-30T16:33:11.683

一般来说，这些回答了以下问题：如何更改您的用户设置文件？但我想回答的问题是如何更改我的本地 Maven 存储库位置。答案是您必须编辑*settings.xml*。如果文件不存在，则必须创建它。**您可以在Window > Preferences > Maven > User Settings**中设置或更改文件的位置。这是**用户设置**条目

[![Maven 用户设置对话框](../Images/0cec8794e0b0ecd7e8fd4bc35bea1332.png)](https://i.stack.imgur.com/uOddL.png)

这是第二个文件输入；第一个包含信息。

如果不清楚，`[redacted]`应替换为 .m2 文件夹的本地文件路径。

如果单击“打开文件”链接，它将打开*settings.xml*文件以在 Eclipse 中进行编辑。

如果您还没有*settings.xml*文件，以下内容会将本地存储库设置为名为 mdfst13 的用户的 Windows 10 默认值：

```
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
                              https://maven.apache.org/xsd/settings-1.0.0.xsd">

  <localRepository>C:\Users\mdfst13\.m2\repository</localRepository>
</settings> 
```

您应该将其设置为适合您系统的值。我还没有测试过，但我怀疑在 Linux 中，默认值是`/home/mdfst13/.m2/repository`. 当然，您可能不想将其设置为默认值。如果您正在阅读本文，您可能希望将其设置为其他值。如果您想要默认值，您可以将其删除。

将设置文件中元素的名称 [归功于@ejaenv](https://stackoverflow.com/users/599971/ejaenv)的此[评论](https://stackoverflow.com/questions/10235374/how-to-change-maven-local-repository-in-eclipse#comment18579976_10238586)： . 有关更多信息，请参阅[Maven — 设置参考](https://maven.apache.org/settings.html)。 `<localRepository>`

感谢@Ajinkya[的回答](https://stackoverflow.com/a/52252903/6660678)，用于在 Eclipse Photon 中指定用户设置值的位置。

如果您已经有一个 settings.xml 文件，您应该将它合并到您现有的文件中。即`<settings`并且`<localRepository>`应该只在文件中出现一次，并且您可能希望保留已经存在的任何设置。或者换一种说法，编辑任何现有的本地存储库条目（如果存在），或者只将该行添加到文件中（如果不存在）。

我必须重新启动 Eclipse 才能将数据加载到新的存储库中。“更新设置”和“重新索引”都不够。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-10T07:21:43.870

在**Eclipse Photon**中导航到***Windows > Preferences > Maven > User Settings > User Setting***

对于“用户设置”，浏览到 maven 的 settings.xml。前任。在我的例子中，它位于路径上`C:\Program Files\Apache Software Distribution\apache-maven-3.5.4\conf\Settings.xml`

根据 Settings.xml，本地存储库会自动配置到指定位置。 [![点击这里查看屏幕截图](../Images/933e9eb1ed7a8497c79eabc0dc0e35d6.png)](https://i.stack.imgur.com/xeCDS.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-04T12:26:33.867

我发现即使按照上述所有步骤操作，我仍然收到错误消息说我的 Maven 依赖项（即 pom.xml）指向不存在的 jar 文件。

查看“问题”选项卡中的错误，由于某种原因，这些错误仍然指向我的存储库的旧位置。这可能是因为我在创建工作区和项目后更改了 Maven 存储库的位置。

这可以通过从 Eclipse 工作区中删除项目，然后通过 Package Explorer -> R/Click -> Import... -> Existing Projects 重新添加来轻松解决。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2018-02-11T11:29:19.180

这里是`settings.xml`--> `C:\maven\conf\settings.xml`

# jquery - JQuery ZURB Reveal Plugin - 在任何关闭方法上停止视频

> ID：10235375
> 
> 赞同：2
> 
> 时间：2012-04-19T19:29:17.150
> 
> 标签：jquery

我正在使用 JQuery Reveal 插件以非常成功的方式显示带有简单 Flash 后备的 HTML5 视频。Reveal 在 IE8、IE9、Firefox、Chrome、Safari、Win XP、Win 7、OS X、iPad 2 和 Android 2.3 上运行良好。

它仅用于显示视频，并且在一页上显示许多视频时也可以正常工作。

我在模式窗口中有一个“关闭”链接，它的作用与 Esc 键和单击背景一样。然而 。. . 我只能通过在 HTML 页面中添加以下脚本来找到如何暂停关闭链接的关闭视频

```
$('.close-reveal-modal').click(function() {
    $('video, audio').each(function() {
        $(this)[0].pause();    
    });
}); 
```

如何添加代码以使其也暂停 Esc 键和背景点击的视频？

当模式窗口被关闭时，暂停视频会阻止它继续播放，这就是我需要做的。

显然，我什至不是 JavaScript 中的 n00b，因为我查看了关联的 jquery.reveal.js 文件并查看了所有关闭事件，但不知道如何添加它（哈哈，很多人都在戳它，要么完全破坏它，要么不影响任何更改！）。

谢谢！

[http://subquark.com/html5/lightbox/course.htm](http://subquark.com/html5/lightbox/course.htm)当前测试样本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:49:25.230

我刚刚为使用 YouTube iframe 在灯箱中显示视频的网站修复了类似的问题。我从这里更改了代码：

```
 modal.bind('reveal:close', function () {
    if(!locked) {
        lockModal();
        if(options.animation == "fadeAndPop") { 
```

对此：

```
 modal.bind('reveal:close', function () {
    if(!locked) {
        lockModal();
        modal.children('iframe').remove(); // Remove iframes.
        if(options.animation == "fadeAndPop") { 
```

这解决了我遇到的 iframe 在 Chrome 中仍然可见的问题，并停止播放视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T01:17:52.000

我刚刚遇到了同样的问题，并想出了在哪里编辑源代码。在文件`jquery.reveal.js`中，第 95-124 行：

```
 modal.bind('reveal:close', function () {
    if(!locked) {
        lockModal();
        if(options.animation == "fadeAndPop") {
            modalBG.delay(options.animationspeed).fadeOut(options.animationspeed);
            modal.animate({
                "top":  $(document).scrollTop()-topOffset + 'px',
                "opacity" : 0
            }, options.animationspeed/2, function() {
                modal.css({'top':topMeasure, 'opacity' : 1, 'visibility' : 'hidden'});
                unlockModal();
            });                 
        }   
        if(options.animation == "fade") {
            modalBG.delay(options.animationspeed).fadeOut(options.animationspeed);
            modal.animate({
                "opacity" : 0
            }, options.animationspeed, function() {
                modal.css({'opacity' : 1, 'visibility' : 'hidden', 'top' : topMeasure});
                unlockModal();
            });                 
        }   
        if(options.animation == "none") {
            modal.css({'visibility' : 'hidden', 'top' : topMeasure});
            modalBG.css({'display' : 'none'});  
        }       
    }
    //ADD YOUR EXTRA EVENTS HERE!
    modal.unbind('reveal:close');
  }); 
```

在我标记的地方（最后）添加您的额外代码。

希望这可以帮助！

# c - 在宏中输出注释

> ID：10235377
> 
> 赞同：1
> 
> 时间：2012-04-19T19:29:18.950
> 
> 标签：c, c-preprocessor

我想要一组宏来声明这样的东西：

```
#define DECL_ITEM( var_name, type, array, flags, comment )  \
        type    var_name array,     ///< comment 
```

不幸的是，预处理器将剥离`///< comment`. 有什么技巧可以让我的宏输出变量声明及其注释吗？

我希望

```
DECL_ITEM( var1, int, [ 10 ], 0, "What var1 stands for." ) 
```

输出如下：

```
int var1[ 10 ], ///< What var1 stands for. 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:33:56.403

预处理器不打算在编译器的输入阶段以外的任何环境中运行，因此不提供仅对独立使用有意义的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T20:55:43.103

我理解您的想法，但建议您使用 PHP 之类的脚本语言而不是 CPP 作为代码生成器。

一个例子是：

```
class   MetaInfo
{
    public $name;
    public $type;
    public $arr_w;
    public $flags;
    public $comment;

    public function __construct( $n, $t, $a, $f, $c )
    {
        $this->name     = $n;
        $this->type     = $t;
        $this->arr_w    = $a;
        $this->flags    = $f;
        $this->comment  = $c;
    }
};

function decl_db( $db_defs )
{
echo '
struct dataBase
{
';
    foreach( $db_defs as $def )
    {
        if ( $def->arr_w == "" )
            $decl="\t$def->type $def->name;             ///< $def->comment\n";
        else
            $decl="\t$def->type $def->name[ $def->arr_w ];      ///< $def->comment\n";
        print $decl;
    }
echo '
};
';
}
// ------------------------------------------------------------
// Custom DB definitions.

$db_defs = array(
    new MetaInfo( "var1",   "int",  "10",   "0",    "What var1 stands for." ),
);

decl_db( $db_defs ); 
```

它应该输出：

```
struct dataBase
{
    int var1[ 10 ], ///< What var1 stands for.
}; 
```

# iphone - 创建 iOS Facebook SDK 静态库

> ID：10235380
> 
> 赞同：1
> 
> 时间：2012-04-19T19:29:21.373
> 
> 标签：iphone, ios, facebook

我试图通过构建静态库来理解它们的含义和方式，但我无法理解它？

我在这里检查过[链接](https://stackoverflow.com/questions/9493640/facebook-ios-sdk-how-to-build-static-library-for-xcode-4-3)，似乎对大多数人来说都解释得很好，但也许我只是个白痴什么的。

我在这里看到我应该将 .sh 更改为此...

`XCODEBUILD_PATH=/Applications/Xcode.app/Contents/Developer/usr/bin`

然后它说要在外壳中构建...什么是外壳以及如何构建外壳？也是`Xcode.app`我的 xcode 项目的名称吗？如果是这样，我里面没有任何 .app 文件......

有人可以带我完成这个步骤吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:12:52.333

壳就是壳。好的，我知道。在 mac 下，您可以通过多种方式访问​​它，最简单的可能是终端应用程序（在实用程序下）。它是一个程序，可让您以用户身份对操作系统进行命令行访问（这不是纯粹的描述，但考虑到您不知道它是什么，我能做的最好的）。

静态库是可以直接链接到应用程序的库。动态库在运行时加载。这就是在设备上运行时加载 iOS 框架库的方式。它们已经存在，您将在应用程序运行时加载它们。

静态库实际上作为应用程序的一部分链接到应用程序中......访问非苹果库的唯一批准方式。

Xcode.app 是 Xcode 应用程序的名称。

# c++ - 创建一个整数二维数组（与字符串二维数组相比）而不提及维度

> ID：10235382
> 
> 赞同：2
> 
> 时间：2012-04-19T19:29:26.670
> 
> 标签：c++, c, arrays, multidimensional-array, stack

我试图创建一个`2d array`而不提及如下尺寸：

```
int m1[][] = {{1,2}, {3,4}}; 
```

编译时出现以下错误：

```
error: array type has incomplete element type 
```

不提及and就不能`2d array`在`stack`( 与动态内存分配相反) 上创建 a吗？`heap``row``column`

如果编译器无法确定整数二维数组的维度，它如何确定字符串二维数组的空间要求。例如，

```
char *keywords[] = {"auto", "static", "extern", "volatile"}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T19:31:41.810

正确，b/c 编译器将 a) 无法确定要分配多少空间，并且 b) 无法确定给定元素在数组中的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T19:31:56.460

您可以省略外部维度，但不能省略内部维度。所以这没关系

```
int m1[][2] = {{1,2}, {3,4}}; 
```

* * *

对于你的第二个问题：`char *keywords[]`不是二维数组！它是一个指针数组。指针不是数组；数组不是指针！（只是数组*衰减*为指向数组第一个元素的指针，如果用作右值）。

更新：要实际回答您的问题：字符串通常会在只读存储中静态“分配”（例如直接写入目标文件/您的程序）。所以将你的数组声明为也是错误的`char *[]`- 它应该是一个`const char *[]`.

# c# - 给定一个 .net 控件，我可以获得工具提示吗？

> ID：10235387
> 
> 赞同：5
> 
> 时间：2012-04-19T19:29:58.407
> 
> 标签：c#, .net, winforms

我有一个 .net 控件（好的，很多）。我可以在任何给定控件上调用方法，但不能创建新控件或访问我没有控件的类的静态方法。我无权访问任何工具提示对象。有什么方法可以获取给定控件的工具提示对象？

（我们在 Java 中使用一个相当受限的测试自动化框架来访问用 C#.net 编写的应用程序的控件，这是这个奇怪查询背后的背景）

ETA：也许我没有说清楚。我不是要设置工具提示，而是要**获取**现有的工具提示。而且我无法创建新控件，因此包括在内的任何内容`new Foo()`都不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T09:05:32.123

```
string text = toolTip1.GetToolTip(yourControl); 
```

这将为您提供 yourControl 工具提示上的文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T16:31:20.823

看来这是不可能的。:( 要获得控件的工具提示，我需要访问 ToolTip 类，如果我正在对控件进行编程但没有真正公开，这很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T19:34:32.683

你可以这样做

```
System.Windows.Forms.ToolTip ToolTip1 = new System.Windows.Forms.ToolTip();
ToolTip1.SetToolTip(this.textBox1, "Hello"); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-07T22:32:47.063

添加弹出事件。下面的代码正在获取为工具提示设置的值，并在 MDIForm 上将其显示为状态文本框。

```
 private void toolTip1_Popup(object sender, PopupEventArgs e)
    {
        Control TheControl = e.AssociatedControl;
        cls_Global.gf_MDIForm.DisplayMsg(this.toolTip1.GetToolTip(TheControl) + "");
    } 
```

# html - 使用嵌入代码创建 HTML 文件 -- Google 日历

> ID：10235394
> 
> 赞同：0
> 
> 时间：2012-04-19T19:30:27.453
> 
> 标签：html, google-api, google-calendar-api, html4

好的，所以我最近设置了一个 Google 帐户以用于我的工作。我们正在使用 Google 日历来设置会议室的日程安排。我一直在做的是使用 XML 使事件对任何人都可见。但是，我想使用嵌入代码来创建一个 HTML 文件（因为日历具有更好的 UI，不像 XML 那样无聊的事件列表）。

XML/HTML 文件存储在我们服务器上的公用文件夹中，因此任何人都可以访问它并随时查看日程安排。

我的问题是我的编程很糟糕（我只上过两门课），所以我不知道如何设置一个身份验证系统来“登录”并使日历可见（尤其是不能在 HTML 中） . 我可以通过公开日历来解决这个问题，但我不希望这样做。有没有办法在 HTML 代码中包含帐户用户名和密码，也许使用 Google API？具体来说，我一直在尝试使用 HTML4 Strict，但我当然愿意接受其他选择。

如果有人有任何提示或可以引导我完成整个过程，那就太棒了！♥</p>

编辑：这是我到目前为止的代码。只要我先登录谷歌，它就可以工作。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html/strict.dtd">
<html>
   <head>
      <title>Training Room Schedule</title>
   </head>
   <iframe src="embed_URL_is_here"></iframe>
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T22:07:11.300

您执行此操作的最简单方法是公开日历（如您所述），然后按照[此处](http://support.google.com/calendar/bin/answer.py?hl=en&answer=41207)的说明进行操作。

如果您不能将其公开，我建议您查看[FullCalendar](http://arshaw.com/fullcalendar/)，它具有 GCal 扩展并且包含您正在寻找的功能。该文档有一个[嵌入 Google Calendar 的示例](http://arshaw.com/fullcalendar/docs/google_calendar/)。

# ios - 是否可以循环 UIScrollView/UIPageControl？

> ID：10235402
> 
> 赞同：1
> 
> 时间：2012-04-19T19:31:26.207
> 
> 标签：ios, uiscrollview, uipagecontrol

想知道是否有可能让一个页面控件/滚动视图循环。

示例：从最后一页向右滑动时，将转到第一页。或者从第一页向左滑动，它会转到最后一页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:30:26.143

您可以为此使用[iCarousel 控件](https://github.com/nicklockwood/iCarousel)。它`iCarouselTypeLinear` 看起来很像分页滚动视图。

实现委托方法`- (BOOL)carouselShouldWrap:(iCarousel *)carousel;`以返回 YES。

# java - 在运行时初始化对象

> ID：10235405
> 
> 赞同：2
> 
> 时间：2012-04-19T19:31:33.590
> 
> 标签：java, hashmap

**编辑：**

似乎我的要求还不够清楚，我将尝试更好地解释。

我有一堂课叫`Board`

这个类将有一个用整数填充的二维数组，数组中的每个整数值都对应于某个类（例如，1 可以是 String 的简写）。

这个类也将有一些方法来获取这个二维数组，循环它并创建一些类的新实例。

我需要能够自定义二维数组以及不同整数对应的类。

我做了一个小图像来尝试想象我想要的东西：http: [//i.imgur.com/bZXrw.png](http://i.imgur.com/bZXrw.png)

连同一些伪代码：

```
class Board:
   Integer[][] some_array = {{1,2,1},{1,2,1}}
   someStructure = {1 : createThing, 2 : createSomeOtherThing};

   generateObjects():
        List[Thing] container = []
        for y in some_array:
            for x in y:
                container.add(someStructure[x]())
        return container 
```

**旧配方：**

我有一个名为的类`Map`，它应该包含一个`Integer[][]`对象，整数数组对象中的值对应于一些需要初始化的对象。

现在，在像 Python 这样的语言中，我可以有一个字典，它有一些整数值作为键和一些函数，这些函数在调用时创建并返回新对象，然后循环遍历 2d 列表并调用字典返回的函数。我将如何使用 Java 来做到这一点？

我虽然想拥有一个 HashMap 并进行某种反思，但我真的不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T19:51:06.353

Java 没有闭包或指向函数的指针，但是您可以拥有一系列实现接口的类，并且每个类都有一个方法（例如，称为“run”或“makeObject”的方法，无论在你的上下文）。这些方法将创建您需要的不同对象。您可以将这些类存储在字典中。

这是一些快速而肮脏的伪代码，未经测试：

```
/**
* root for your object hierarchy
*/
public class MyObject
{
    // yadayada
}

/**
* The interface
*/
interface ObjCreator
{
    public MyObject makeObject();
}

/**
* Classes to create specific objects
*/
public class ObjMaker_1
    implements ObjCreator
{
    public MyObject makeObject()
    {
        return new Object1();
    }
}

...

public class ObjMaker_n
    implements ObjCreator
{
    public MyObject makeObject()
    {
        return new Objectn();
    }
}

/** your dictionary */
Map<Integer, ObjCreator> dict = new HashMap<Integer, ObjCreator>();

dict.add(new Integer(1), new ObjMaker_1);
dict.add(new Integer(2), new ObjMaker_2);
...
dict.add(new Integer(n), new ObjMaker_n); 
```

如果对象创建函数又短又简单，最好用匿名类而不是完全定义的类来填充字典。

# c++ - 传递函数指针 - 语义

> ID：10235406
> 
> 赞同：0
> 
> 时间：2012-04-19T19:31:33.570
> 
> 标签：c++

> **可能重复：**
> [为什么所有这些疯狂的函数指针定义都有效？到底发生了什么？](https://stackoverflow.com/questions/6893285/why-do-all-these-crazy-function-pointer-definitions-all-work-what-is-really-goi)

我将不胜感激在代码中解释原因

```
void f(int& i)
{
  i++;
}

void g(void (passed_f)(int&),int& a)   //`passed_f` equivalent to `*passed_f`
{
  passed_f(a);
}

int main()
{
  int n=0;
  g(f,n);                              //`f` is equivalent to `&f`
} 
```

从不产生任何错误并给出完全相同的结果的意义上说，这两个等式都成立`1`。看来，我们是否接受`g`指向函数的指针或函数本身并不重要......我还认为 [c]-tag 是合适的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T19:35:38.663

`passed_f`确实等同于`*passed_f`，编译器将从两者创建相同的输出。区别只是惯用的。有些人更喜欢后一种形式，因为它更清楚地表达了我们有一个指向函数的指针，并且这种表示法与用于其他类型的指针表示法更一致。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T19:43:49.557

函数指针在 C 中是特殊的：

*   函数的名称，比如说`f`是*函数指示符*，`&f`而是函数指针；
*   间接函数指针计算为函数指示符；
*   间接函数指示符对函数指示符本身求值；
*   因此，您可以将函数指针`f`称为`f()`、`(*f)()`、`(**f)()`等。

如果您将函数名称视为几乎所有用途的指针，这是有道理的。尝试编译这个版本的 Hello World：

```
int main()
{
    // try replacing * with & or adding more *s
    (*printf)("Hello, world!\n");
    return 0;
} 
```

在 C 标准中，这在第 6.3.2.1 段中有所涵盖。不确定 C++ 标准。

# javascript - 在 jQuery 中使用 pushstate 和 load 进行后退导航

> ID：10235413
> 
> 赞同：0
> 
> 时间：2012-04-19T19:31:56.927
> 
> 标签：javascript, jquery

我目前正在使用 jQuery 将内容动态加载到持有者 div 中，然后使用 pushstate 更新 url。

到目前为止，我有以下代码（例如简单性排除了一些代码）：

```
$("body").on("click", "a:not(.noclick)", function(){

    history.pushState({path: $(this).attr("href")}, "", $(this).attr("href"));

    $("#main").load($(this).attr("href"));

    return false
}); 
```

它按预期工作，并且 url 更改为在新内容加载时应该是什么，但返回按钮当前不起作用，当按下返回时，url 更改为前一个但没有其他任何反应。

我的页面以一种方式构建，您可以使用带有 jQ​​uery 的站点来加载没有标题或没有任何 javascript 的内容，并且页面从它们的 url 显示，所以这部分没有问题。

有没有办法可以使用后退导航加载来加载最后的 pushstate 历史记录？我宁愿不使用散列，但不确定是否可以不使用？

如果这有帮助，Facebook 似乎会用他们的导航来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T02:30:24.057

您需要一个`popstate`事件处理程序。

但是为什么不通过使用[jquery-pjax](http://github.com/defunkt/jquery-pjax)来解决这个问题。

包含 pjax 脚本后，以下内容可能就足够了：

```
$(function() {
  $("a:not(.noclick)").pjax("#main", { fragment: "#main" });
}); 
```

这种特殊用法不需要​​任何服务器处理来删除非`#main`内容，但 pjax 也支持您引用的部分内容。

# java - 使用 JNLP 启动 Applet 时找不到类

> ID：10235419
> 
> 赞同：2
> 
> 时间：2012-04-19T19:32:22.027
> 
> 标签：java, jsp, applet, jnlp, next-generation-plugin

尝试使用 JNLP 启动 jar 文件时遇到问题。我们之前在没有任何问题的情况下启动了没有 JNLP 的小程序。我们要启动三个不同的 jar，它们与 jnlp 文件一起保存在同一目录中。所有的 jars 都被下载了，但是当我们尝试从一个外部 jars（即不是主要的 jars）加载一个类时，我们会看到一个 classNotFoundError。应用程序一直运行，直到发生这种情况，所以我们的主 jar 似乎正在执行。JNLP 文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<jnlp spec="1.0+" href="/jars/file.jnlp">
<information>
    <title>Client</title>
    <vendor>My Vendor</vendor>
    <description>Description</description>
    <description kind="short">Desc</description>
    <offline-allowed />
</information>
<security>
    <all-permissions />
</security>

<resources>
    <j2se version="1.6+" />
    <jar href="mainJar.jar" main="true" download="eager"/>
    <jar href="extJar1.jar" main="false" download="eager"/>
    <jar href="extJar2.jar" main="false" download="eager" />
</resources>
<applet-desc 
    name="MyApp" 
    main-class="path-to-main-class"
    width="1"
    height="1">
</applet-desc>
</jnlp> 
```

然后从 HTML 文件启动小程序，如下所示：

```
<applet
    code="com.mycompany.net.MyMainClass" 
    name="MyApp" 
    archive="/jars/extJar1.jar, /jars/extJar2.jar, /jars/mainJar.jar" 
    id="myId" 
    width="1" 
    height="1" 
    mayscript
    alt="The java plugin must be installed.">
            <param name="jnlp_href" value="/jars/file.jnlp"/>
    Java 1.5 or higher required.  
</applet> 
```

我已经用 Janela 检查了 jnlp，它没有给我任何错误。它可以在没有 jnlp 文件的情况下从 Eclipse 运行小程序。它还可以从 javaws 打开 jnlp 文件，指定文件或文件的 url。这让我认为这是不正确的html。然而，据我所知。我尝试使用以下 javascript 启动，结果相同：

```
<script src="http://www.java.com/js/deployJava.js"></script>
<script>
var attributes = {
        id:'myId', 
  code:'com.mycompany.net.MyMainClass', 
  width:1, 
  height:1, 
  name:"MyApp"
};
    var parameters = {
        jnlp_href:"/jars/file.jnlp",
        archive:"/jars/extJar1.jar, /jars/extJar2.jar, /jars/mainJar.jar",
    };
deployJava.runApplet(attributes, parameters, '1.6'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T22:38:03.077

My JNLPs use external jars, and I defined the `codebase="http://example.com/full/path/to/jars/"` as well as `href="http://example.com/full/path/to/jars/file.jnlp"` in the `<jnlp>` tag.

**Edit** Try my [working example - click the `Lancer le planificateur` button](http://profs.etsmtl.ca/cfuhrman/planif/PlanificateurJNLP.shtml) to see it in action.

**edit2** check out [JNLP as a Applet in HTML page](https://stackoverflow.com/questions/7313317/jnlp-as-a-applet-in-html-page) to see if `Object` rather than `Applet` will help.

# objective-c - 在 Core Data 中检查对象是否存在

> ID：10235421
> 
> 赞同：-2
> 
> 时间：2012-04-19T19:32:34.527
> 
> 标签：objective-c, ios, core-data

我在回答另一个问题时找到了这段代码：

```
NSError *error = nil;
NSUInteger count = [managedObjectContext countForFetchRequest:request error:&error];
[request release];

if (!error){
  return count;
}
else
  return 0; 
```

问题是，我不知道我的 fetch 请求是什么，以便让它只可能返回我的对象​​，而不是其他对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:07:01.433

该请求是一个 NSFetchRequest。您创建一个，并使用它来查找您的对象。例如...

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Person"];
request.predicate = [NSPredicate predicateWithFormat:@"ssan = %@", ssan]; 
```

现在，您使用该获取请求，它将找到所有具有与字符串变量匹配的属性“sean”的“Person”实体。

如果您只想查找一个对象，则需要某种类型的唯一标识符进行搜索。

# android - 具有用于定位的可选/条件关系的 RelativeLayout

> ID：10235425
> 
> 赞同：2
> 
> 时间：2012-04-19T19:32:37.977
> 
> 标签：android, xml

我有 4 个按钮`A,B,C,D`。`RelativeLayout`

按钮 C 有时可见，有时不可见 - 取决于每次在布局出现之前明确设置的某些条件。

如果所有按钮都可见，我喜欢这样放置按钮：

一种

乙

C

D

否则，如果 C 像这样不可见

一种

乙

D

由于我使用`android:layout_below="@+id/buttonX"`定位按钮，我不知道如何处理条件 C 和 D 按钮。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:39:32.033

虽然我不喜欢嵌套视图，但一个简单的解决方案是将底部的两个按钮包含在 LinearLayout

前任。

```
<RelativeLayout>

     <A>
     <B>

     <LinearLayout android:orientation="vertical">
       <C>
       <D>
     </LinearLayout>

</RelativeLayout> 
```

这样，您可以将 LinearLayout 设置在 B 以下，并且缺少 C 或 D 无关紧要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-25T18:22:47.273

就我而言，我使用以下代码以编程方式设置父级：

```
RelativeLayout.LayoutParams lp = (RelativeLayout.LayoutParams) view.getLayoutParams();

if (reliantViewVisible) {
  lp.addRule(RelativeLayout.BELOW, R.id.reliantView);
} else {
  lp.addRule(RelativeLayout.BELOW, R.id.fallbackView);
} 
```

如果下一个元素是初始父元素，这可能适用于 XML

`android:layout_alignWithParentIfMissing="true"`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-19T21:16:52.430

RelativeLayout 已经为您做您想做的事情。如果 C 的可见性“消失”，它将自动将 D 置于 B 之下。

# svg - Imagemagick 在 Ubuntu 上丢失图像的渐变

> ID：10235426
> 
> 赞同：1
> 
> 时间：2012-04-19T19:32:38.380
> 
> 标签：svg, png, imagemagick, gradient

我正在使用 Ubuntu 11.10。我已经从最新的源包安装了 ImageMagick。这是“convert -version”的输出

```
Version: ImageMagick 6.7.6-6 2012-04-19 Q16 http: // www.imagemagick.org
Copyright: Copyright (C) 1999-2012 ImageMagick Studio LLC
Features: OpenMP 
```

我正在尝试将 svg 转换为 png 效果很好，除非我在图像的某些部分有渐变。

这是我正在运行的命令：

```
convert RedPoweredByPenguins.svg redpenguin.png 
```

这是 SVG： http: [//gamepsychos.com/penguinCheckers/redPenguin.svg](http://gamepsychos.com/penguinCheckers/redPenguin.svg)

这是它创建的 png：http: [//gamepsychos.com/penguinCheckers/redpenguinfail.png](http://gamepsychos.com/penguinCheckers/redpenguinfail.png)

当我在 Fedora 16 上运行相同的命令时，我不会丢失渐变。我认为 ImageMagick 使用的库之一可能不一样，但我不确定。有人有想法么？

工作系统上的版本输出为：

```
Version: ImageMagick 6.7.6-6 2012-04-19 Q16 http: //www.imagemagick.org
Copyright: Copyright (C) 1999-2012 ImageMagick Studio LLC
Features: OpenMP 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T03:38:33.120

经过一些额外的研究，我发现“故障”机器使用的 SVG 代表与工作机器上的机器不同。

为了纠正这个问题，我安装了 rsvg。

```
apt-get install librsvg2-bin 
```

然后我将 ImageMagick 的配置更改为使用 rsvg 而不是默认委托。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:43:15.723

使用这个 ImageMagick，我在 Mac 上得到的输出与您的“错误”输出完全相同：

```
Version: ImageMagick 6.7.6-0 2012-03-17 Q16 http://www.imagemagick.org
Copyright: Copyright (C) 1999-2012 ImageMagick Studio LLC
Features: OpenMP OpenCL 
```

所以，我认为 SVG 文件不正确。尝试验证它？

# arrays - AS 2 - 在按钮的循环中从多个数组中提取信息

> ID：10235427
> 
> 赞同：1
> 
> 时间：2012-04-19T19:32:38.627
> 
> 标签：arrays, for-loop, actionscript-2

我有 3 个数组。

**- 数组 1**按钮名称

**- 阵列 2** x 位置

**- 阵列 3** y 位置

我在舞台上有所有带有按钮名称的影片剪辑和一个名为 test 的影片剪辑。我试图让每个 mc 按钮将“测试”电影剪辑移动到特定位置。

我能够遍历按钮，但无法获取数组中用于 x 和 y 坐标的按钮的当前编号。

任何帮助是极大的赞赏！

```
 var hrN:Array = new Array(bHRSD,bMASP,bGLD,bGRBDS,bWIe,bGC,bGHCM,bMCRGB,bCE);
            var hrNX:Array = new Array(10,20,30,40,50,60,70,80,90);
            var hrNY:Array = new Array (10,20,30,40,50,60,70,80,90);

            for(var i=0; i<hrN.length; i++) {
                hrN[i].button = i;
                hrN[i].onRelease = function()   {
                    test._x = hrNX[trying to get the current number of the hrN array here];
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T20:03:59.323

你难以置信地接近：

```
var hrN:Array = new Array(bHRSD,bMASP,bGLD,bGRBDS,bWIe,bGC,bGHCM,bMCRGB,bCE);
var hrNX:Array = new Array(10,20,30,40,50,60,70,80,90);
var hrNY:Array = new Array (10,20,30,40,50,60,70,80,90);

for(var i=0; i<hrN.length; i++) {
    hrN[i].button = i;//you're storing the index here as the button property
    hrN[i].onRelease = function()   {
        //so use it here
        test._x = hrNX[this.button];
    }
} 
```

# netbeans - 有没有办法保存 Netbeans 窗口/选项卡组状态？

> ID：10235429
> 
> 赞同：7
> 
> 时间：2012-04-19T19:32:49.437
> 
> 标签：netbeans

我在 Netbeans 中打开了几十个文件，它们整齐地平铺并组织在选项卡组中。如果 Netbeans 崩溃，我会丢失我打开的文件的当前状态、它们是如何平铺的以及哪些选项卡组。同样，如果网络出现故障或出现故障，并且我丢失了我的坐骑，Netbeans 将丢弃所有上述状态信息。

如果我可以将该信息导出到一个文件，或者在磁盘上找到包含状态信息的文件（如果存在这种情况），我就可以避免重新打开所有以前打开的文件并重新平铺它们的麻烦并将它们组织成选项卡组。当您打开 50 多个文件并丢失它们时，这真的很痛苦。:-(

理想情况下，如果该信息保存在 Netbeans 项目文件中会很好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-03-10T10:18:12.413

使用窗口 -> 文档组功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T14:42:43.450

您可以使用“项目组”。见主菜单`File -> Project group`。打开的文件也会自动保存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-13T11:22:01.807

重置窗口属性

TOP 菜​​单 窗口 >> 重置窗口

# php - mktime 将秒转换为日期

> ID：10235430
> 
> 赞同：0
> 
> 时间：2012-04-19T19:32:49.690
> 
> 标签：php

我被困在如何使用 mktime 上。我如何知道解除禁令的日期？

```
$time = strtotime($banrow['time']); //when user got banned

    //1 week

        $banduration = 60*60*24*7;
        $newtime = $time+$banduration;

        echo date('Y-m-d',mktime()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T19:34:26.550

这就是`date("Y-m-d",$newtime);`你所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-04T19:16:12.790

使用下面的代码作为示例，看看它是如何工作的

```
$time = mktime(11, 14, 54, 8, 12, 2014);
//mktime(hour,minute,second,month,day,year) as the right order

echo "Create time is ".date('Y-m-d h:i:s',$time);// year first
echo "<br>";
echo "Create time is ".date('d-m-Y h:i:s',$time);//day first
echo "<br>";
echo "Year is ".date('Y',$time);//Just print Year
echo "<br>";
echo "Month is ".date('m',$time);//just print month
//use date(format,optional)
//the format can be what you want it to be display 
```

输出是

```
 Create time is 2014-08-12 11:14:54
  Create time is 12-08-2014 11:14:54
  Year is 2014
  Month is 08 
```

?>

# tomcat - 无法使用 maven 插件将战争部署到 tomcat

> ID：10235433
> 
> 赞同：4
> 
> 时间：2012-04-19T19:32:57.487
> 
> 标签：tomcat, maven, deployment

如果我手动将我的网络应用程序部署到 tomcat 6，一切正常。但是当我尝试对 maven6-tomcat-plugin 做同样的事情时，它不会部署。随后出现主机错误，其中任何一个都没有任何意义（来自 catalina.out 日志文件）：

1.  信息： validateJarFile(/var/lib/tomcat6/webapps/spring_sec/WEB-INF/lib/servlet-api-2.5.jar) - jar 未加载。这是不正确的; 我解压缩了war文件，文件清晰存在。

2.  严重：创建命名上下文失败：javax.naming.NamingException：上下文是只读的。

3.  严重：部署 Web 应用程序存档 spring_sec.war java.lang.NoClassDefFoundError 时出错：org/springframework/beans/factory/Aware。另一个不真实的陈述；解压缩war包后，我找到了包含所需类的WEB-INF/lib/spring-beans-3.1.1.RELEASE.jar 文件。

手动将war文件部署到tomcat和使用maven插件是一样的吗？

**命令 mvn tomcat6:deploy 的 Maven 输出在 mvn clean 之后：**

```
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building SpringSec 0.1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] >>> tomcat6-maven-plugin:2.0-beta-1:deploy (default-cli) @ spring_sec >>>
[INFO]
[INFO] --- maven-resources-plugin:2.3:resources (default-resources) @ spring_sec ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /media/winchester/spring_sec/src/main/resources
[INFO]
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ spring_sec ---
[INFO] Compiling 1 source file to /media/winchester/spring_sec/target/classes
[INFO]
[INFO] --- maven-resources-plugin:2.3:testResources (default-testResources) @ spring_sec ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /media/winchester/spring_sec/src/test/resources
[INFO]
[INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ spring_sec ---
[INFO] Nothing to compile - all classes are up to date
[INFO]
[INFO] --- maven-surefire-plugin:2.10:test (default-test) @ spring_sec ---
[INFO] No tests to run.
[INFO] Surefire report directory: /media/winchester/spring_sec/target/surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------

Results :

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0

[INFO]
[INFO] --- maven-war-plugin:2.2:war (default-war) @ spring_sec ---
[INFO] Packaging webapp
[INFO] Assembling webapp [spring_sec] in [/media/winchester/spring_sec/target/spring_sec-0.1.0-SNAPSHOT]
[INFO] Processing war project
[INFO] Copying webapp resources [/media/winchester/spring_sec/src/main/webapp]
[INFO] Webapp assembled in [40 msecs]
[INFO] Building war: /media/winchester/spring_sec/target/spring_sec-0.1.0-SNAPSHOT.war
[INFO] WEB-INF/web.xml already added, skipping
[INFO]
[INFO] <<< tomcat6-maven-plugin:2.0-beta-1:deploy (default-cli) @ spring_sec <<<
[INFO]
[INFO] --- tomcat6-maven-plugin:2.0-beta-1:deploy (default-cli) @ spring_sec ---
[INFO] Deploying war to ***:8080/spring_sec
Uploading: ***:8080/manager/html/deploy?path=%2Fspring_sec
3211/3211 KB
Uploaded: ***:8080/manager/html/deploy?path=%2Fspring_sec (3211 KB at 50171.2 KB/sec)
[INFO] FAIL - Failed to deploy application at context path /spring_sec
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 4.280s
[INFO] Finished at: Thu Apr 19 22:07:39 EEST 2012
[INFO] Final Memory: 15M/144M
[INFO] ------------------------------------------------------------------------ 
```

** Maven pom：**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.denarced</groupId>
  <artifactId>spring_sec</artifactId>
  <version>0.1.0-SNAPSHOT</version>
  <packaging>war</packaging>

  <name>SpringSec</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency> 
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context-support</artifactId>
        <version>3.1.1.RELEASE</version>
    </dependency>
  </dependencies>

  <build>
    <plugins>
      <plugin>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.2</version>
      </plugin>
      <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.3.2</version>
        <configuration>
          <source>1.6</source>
          <target>1.6</target>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.apache.tomcat.maven</groupId>
        <artifactId>tomcat6-maven-plugin</artifactId>
        <version>2.0-beta-1</version>
        <configuration>
          <server>lapserver</server>
          <url>http://192.168.11.7:8080/manager/html</url>
        </configuration>
      </plugin>
    </plugins>
  </build>
</project> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T23:35:34.650

1.  Tomcat 不会加载 servlet-api.jar，因为它是 Tomcat 的核心部分（并且已经存在于 $TOMCAT_HOME/lib 文件夹中），这个“信息”语句只是告诉你 Tomcat 忽略了 jar 文件

2.  当你说如果你手动部署它工作正常 - 你是什么意思？您是手动将战争文件放在 $TOMCAT_HOME/webapps 文件夹中，还是使用管理器 Web 应用程序并在部署页面上上传战争。您能否确认您能够通过管理器应用程序“手动”部署（这是 maven-tomcat6-plugin 包装的内容 - 一个 PUT 到管理器 webapp，发布您的战争文件

3.  你能验证解压后的war文件（在$TOMCAT_HOME/webapps/spring_sec/WEB-INF/lib中）是否包含spring-beans-3.1.1.RELEASE.jar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:36:33.707

您也可以使用 cargo 插件。有关详细信息，请参阅[http://tshikatshikaaa.blogspot.nl/2012/07/how-to-deploy-war-to-tomcat-7-during.html 。](http://tshikatshikaaa.blogspot.nl/2012/07/how-to-deploy-war-to-tomcat-7-during.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T03:35:44.420

问题已在 Chris White 的帮助下得到解决，这是必不可少的。似乎 Tomcat 保留了一些旧版本的 webapp，它由旧版本的 Spring 组件组成。关闭 Tomcat 并手动删除打包和未打包的 webapp 文件后，我可以通过 maven 插件再次部署。

# ios - iOS：我的应用程序已经在应用商店中之后，在哪里更改它的名称？

> ID：10235434
> 
> 赞同：0
> 
> 时间：2012-04-19T19:33:02.927
> 
> 标签：ios, xcode, app-store, app-store-connect

我读过其他帖子说这是可能的，我需要做的就是提交更新。但是，在提交更新的过程中，我在哪里输入新名称？

添加新的应用程序版本时，我看不到输入新名称的地方。我不仅要更改跳板名称，还要更改出现在应用商店和搜索中的名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T19:42:07.823

据我所知，更改应用名称的唯一方法是在 Info.plist 中再次提交更改名称的应用。对于 AppStore 上显示的名称，它是在 iTunes Connect 上完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T19:54:26.460

在应用程序更新“添加版本”页面的元数据表单中输入将出现在应用商店中的名称。图标下方显示的名称输入到应用程序的 Info.plist 中。

# sql-server-2000 - 两个不同表中的like操作

> ID：10235438
> 
> 赞同：0
> 
> 时间：2012-04-19T19:33:14.117
> 
> 标签：sql-server-2000

我使用 SQL 2000 服务器。我有两张桌子；表 1 和表 2。表1有客户的全名、地址、电话，表2只有简称。我想显示 table1 中的全名、地址、电话，其中名称中有短名称 (table2)。

表格1

```
Frank Wisely
Albert Smith
Tony Gonzalez
Peter Nicholas
Andrew Wonder
Adams Tony 
```

表2

```
Tony
Smith
Wonder 
```

我想要得到的结果是

```
Tony Gonzalez
Adams Tony
Albert Smith
Andrew Wonder 
```

你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:45:06.373

我希望您的列不仅仅是`name`表格中的列！您需要连接这些表，因此，它们需要有一个共享相同值的列。像这样的东西：

```
table1
------
PK Name
-- ----------------
1  Frank Wisely
2  Albert Smith
3  Tony Gonzalez
4  Peter Nicholas
5  Andrew Wonder
6  Adams Tony

table2
------
PK Name
-- ----------------
2  Smith
5  Wonder
6  Tony 
```

以下是如何加入他们：

```
select
   a.*
    FROM Table2            b
        inner join Table1  a ON a.pk=b.pk 
```

如果您没有要加入的 PK 类型列，则可以尝试加入子字符串，但由于错误匹配，您很可能会在结果中出现错误。当您的样本数据有 6 行时看起来都很好，但是当您有 john smith、bill smith、mike smith、john brown 和 mike brown 时会发生什么？你怎么找到约翰？您可以使用 LIKE 加入表，这样做似乎很奇怪。

此查询将执行您的要求：

```
select
   a.*
    FROM Table2            b
        inner join Table1  a ON a.Name like '%'+b.Name+'%' 
```

工作示例：

```
create table Table1  (name varchar(100), junk varchar(5))
insert into Table1 values ('Frank Wisely','aaa')
insert into Table1 values ('Albert Smith','bbb')
insert into Table1 values ('Tony Gonzalez','ccc')
insert into Table1 values ('Peter Nicholas','ddd')
insert into Table1 values ('Andrew Wonder','eee')
insert into Table1 values ('Adams Tony','fff')

Create table Table2 (name varchar(100))
insert into Table2 VALUES ('Tony')
insert into Table2 VALUES ('Smith')
insert into Table2 VALUES ('Wonder')

select
   a.*
    FROM Table2            b
        inner join Table1  a ON a.Name like '%'+b.Name+'%' 
```

输出：

```
name             junk
---------------- -----
Albert Smith     bbb
Tony Gonzalez    ccc
Andrew Wonder    eee
Adams Tony       fff

(4 row(s) affected) 
```

# matlab - 为什么我的 sprintf 不能在 matlab 中工作？

> ID：10235439
> 
> 赞同：0
> 
> 时间：2012-04-19T19:33:17.723
> 
> 标签：matlab, printf

我对编程完全陌生，不知道自己在做什么。我整天都在试图让 sprintf 命令工作。如果我理解正确，我需要初始化我希望它写入的文件，如下所示：

```
recalltest = strcat('DRMRecall_',num2str(subNo),'.log');
fopen(recalltest, 'wt');
if recalltest == -1
    error('Error opening log file');
end 
```

然后，定义我想写入文件的变量：

```
 recall1 = GetEchoString(w, 'List 1: ', 20, 800, 1); 
```

然后我尝试将该变量写入我的日志文件：

```
sprintf(recalltest, '%s,', recall1);
fclose('all'); 
```

每一个之间都有很多东西，但我希望这些都是相关的部分。日志文件被创建，但无论我做什么，我都无法写入任何内容。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:21:32.997

对代码的一些修复：

% 测试代码。

```
recalltest = strcat('DRMRecall_',num2str(subNo),'.log');
FileID = fopen(recalltest, 'wt');
if FileID == -1
    error('Error opening log file');
end 
```

% 测试代码结束。

% 这是你的`GetEchoString`函数调用。如果这段代码失败，原因可能在于这个函数调用或函数本身。

% 未测试的代码。

```
recall1 = GetEchoString(w, 'List 1: ', 20, 800, 1); 
```

% 未测试代码结束。

你`'%s,'`在你的电话中，它在 string 之后`fprintf`打印。如果这是您的目的，请放回下一个代码行。但是您也可以在打印前使用它来添加它。`,``recall1``,``recall1``strcat`

% 测试代码。

```
fprintf(FileID, '%s', recall1);
fclose(FileID); 
```

% 测试代码结束。

通常，您可以`fprintf`用于所有打印，包括文件和屏幕。要打印到文件，`fprintf`函数调用中的第一个参数必须是`FileID`，这通常`fid`在 MATLAB 文档和其他地方调用。`FileID`or`fid`不是文件名，`fopen`只是. 它不是与特定文件或文件内容相关的常量，因此您必须存储always 的返回值才能读取或写入文件。`fopen``fclose``fopen`

`sprintf`不会在任何地方打印任何东西，既不会打印到屏幕上也不会打印到任何文件，它只会将数据格式化为字符串，正如它在`sprintf`文档中所说的那样。`sprintf`输出（它的第一个返回值，第二个是`err`）可以通过使用打印在屏幕上`disp`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T19:35:07.043

[`sprintf`](http://www.mathworks.com/help/techdoc/ref/sprintf.html)将数据格式化为字符串；我很惊讶代码完全运行。你想[`fprintf`](http://www.mathworks.com/help/techdoc/ref/fprintf.html)输出到一个文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T20:54:34.840

```
recalltest = sprintf('DRMRecall_%d.log', subNo); % usage of sprintf to create a string
fid = fopen(recalltest, 'wt');
assert(fid ~= -1, 'Error opening log file'); % save if...
recall1 = GetEchoString(w, 'List 1: ', 20, 800, 1);
fprintf(fid, '%s\n', recall1); % usage of fprintf to write to a file
fclose(fid); 
```

# javascript - JavaScript 错误：IE8 中 window.open 上的“调用的对象已与其客户端断开连接”

> ID：10235441
> 
> 赞同：0
> 
> 时间：2012-04-19T19:33:23.607
> 
> 标签：javascript, internet-explorer, internet-explorer-8

```
$('#intent').click(function (e) {
  e.preventDefault();
  window.open(e.target.href, 'intent', 'width=560,height=520,location=0,resizable=0,scrollbars=0,startus=0,titlebar=0,toolbar=0');
}); 
```

在 Internet Explorer 8 中，此代码引发 JavaScript 错误：“调用的对象已与其客户端断开连接。” 代码非常简单。我觉得我以前写过几乎完全一样的东西。我不确定为什么它现在会抛出错误。

这是HTML：

```
<a href="https://twitter.com/intent/user?screen_name=iancmyers" id="intent">@iancmyers</a> 
```

IE8 调试工具说错误是在 window.open 上抛出的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-24T12:22:06.840

如果有人正在研究这个问题，我发现在 IE11 中，如果我传递给 window.open() 的目标 URL 执行重定向到另一个 URL，就会出现这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T19:42:33.093

我的猜测是锚标签的默认行为（导航到它`href`）和你的点击事件之间的冲突。尝试`href`从锚点中删除该属性，在您的 javascript 中对其进行硬编码（至少目前是这样），看看是否有帮助。

# cakephp - Cakephp 2.0 中的多种语言

> ID：10235444
> 
> 赞同：2
> 
> 时间：2012-04-19T19:33:27.407
> 
> 标签：cakephp

我在 cakephp 2.0 中有一个具有多种语言的应用程序。它是英语和另一种语言。菜单和相应数据等所有内容都是从数据库中生成的。我已经完成了英语，但不知道如何在另一种语言中拥有相同的内容。我应该创建两个单独的数据库还是有其他方法来解决 cakephp 2.0 中的此功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T19:38:55.997

这是 CakePHP 2.0 的国际化和本地化的链接。

这将使您对如何解决该问题有所了解。

[http://book.cakephp.org/2.0/en/core-libraries/internationalization-and-localization.html](http://book.cakephp.org/2.0/en/core-libraries/internationalization-and-localization.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T16:00:22.877

我刚刚创建了一个多语言网站 - 边写博客，与语言设置相关的条目[在这里](http://markfightscode.blogspot.co.uk/2012/04/day-9-of-30-day-startup.html) 我可以确认已经提到的食谱很有帮助，就像这篇文章[本地化日本一样。](http://www.localizingjapan.com/blog/2011/11/10/localizing-a-cakephp-application/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-09T10:42:11.417

把这段代码 app->config->config.php

数组('eng','ger','tha'),'default'=>'eng'); put appcontrol 放这段代码 if ($this->_checkLanguage()) { $this->redirect($this->referer()); } if ($this->Session->check('Config.language')) { Configure::write('Config.language', $this->Session->read('Config.language')); // $this->redirect($this->referer()); } 如何访问 ctp 页面

你做了三种语言你去项目->应用程序->本地->默认情况下只有一个文件夹eng。但是制作三种语言，如ger，thai，所以你制作这个文件夹eng，ger，thai，在文件夹里面你把这个代码像 [![当地的](../Images/f314e60372b02d4ae49545ff8ab56396.png)](https://i.stack.imgur.com/5JEn5.png) 图像no1 for eng。 [![在此处输入图像描述](../Images/ba3d75e9e7ae86d3815eb003b8430984.png)](https://i.stack.imgur.com/SCavC.png) img no2.for ger。 [![在此处输入图像描述](../Images/662adc25764b3f0103636801347574d2.png)](https://i.stack.imgur.com/RlAwd.png) img no 3for 泰语。 [![在此处输入图像描述](../Images/266e415f9653d9fc773db4d013d975c6.png)](https://i.stack.imgur.com/7vClC.png)

# ruby - 在 Ruby 中读取流并根据关键词提取行

> ID：10235446
> 
> 赞同：0
> 
> 时间：2012-04-19T19:33:30.887
> 
> 标签：ruby, file

我想扫描一个流并只检索那些包含关键字的行，这就是我到目前为止所得到的......

```
ERROR_WORDS = ['Error','Invalid','Out of Range']

error_stream = stderr.read
errors = nil
unless error_stream.nil?
   errors = ERROR_WORDS.detect{ |e| error_stream.include? e } 
```

假设`error_stream`包含这个...

```
4/19/12 - 9:00am: Last check, status ok
4/19/12 - 9:15am: File # 456 received contained Error
4/19/12 - 9:30am: Last check, status ok
4/19/12 - 9:45am: File # 457 is has an Invalid timestamp 
```

...我想扫描流并`errors`仅返回具有 in 中的任何关键字的那些行（完整）`ERROR_WORDS`，因此，在这种情况下，只有第 2 行和第 4 行包含错误词

我需要`errors`，再想一想，它可能需要是一个数组，才能拥有......

```
4/19/12 - 9:15am: File # 456 received contained Error
4/19/12 - 9:45am: File # 457 is has an Invalid timestamp 
```

我的代码返回这个...

```
Error
Invalid 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:48:19.850

如果您首先将输入读取为行而不是一个大字符串，则会更容易。

你有几个不同的选择来做测试。您可以每次循环遍历 ERR​​OR_WORDS 数组，但构建正则表达式可能会更有效：

```
ERROR_REGEXP = Regexp.new(ERROR_WORDS.join '|') 
```

然后您的代码如下所示：

```
error_lines = stderr.readlines
errors = error_lines.find_all { |line| line =~ ERROR_REGEXP } 
```

如果您仍然需要将整个错误流作为一个大字符串，您可以构建它：

```
error_stream = error_lines.join "\n" 
```

另一方面，如果你只需要匹配的行，你可以一次完成整个事情：

```
errors = stderr.readlines.find_all { |line| line =~ ERROR_REGEXP } 
```

# c# - CommonServiceLocator 的评论中环境一词的含义是什么？

> ID：10235461
> 
> 赞同：4
> 
> 时间：2012-04-19T19:34:31.773
> 
> 标签：c#, comments, common-service-locator

我想猜测“环境容器”与它是一个静态类这一事实有关，但这只是一个猜测。

或者这是指标准模式？（即我真的需要阅读 GoF 书的封面）

```
namespace Microsoft.Practices.ServiceLocation
{
    /// <summary>
    /// This class provides the ambient container for this application. If your
    /// framework defines such an ambient container, use ServiceLocator.Current
    /// to get it.
    /// </summary>
    public static class ServiceLocator
    {
        private static ServiceLocatorProvider currentProvider;

        /// <summary>
        /// The current ambient container.
        /// </summary>
        public static IServiceLocator Current
        {
            get { return currentProvider(); }
        }

        /// <summary>
        /// Set the delegate that is used to retrieve the current container.
        /// </summary>
        /// <param name="newProvider">Delegate that, when called, will return
        /// the current ambient container.</param>
        public static void SetLocatorProvider(ServiceLocatorProvider newProvider)
        {
            currentProvider = newProvider;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T19:45:44.577

是的，“环境”的意思应该是“共享的，可供所有人使用”。

如果您需要来自 DI 周围某处的参考，请搜索“环境上下文”模式，例如在 Mark Seemann 的“.NET 中的依赖注入”一书中进行了描述。

# java - SOAPException 服务器暂时不可用

> ID：10235464
> 
> 赞同：0
> 
> 时间：2012-04-19T19:34:37.330
> 
> 标签：java, soap, client-server

这是什么异常？我尝试用谷歌搜索，但没有相关项目。启动时的服务尝试绑定到一个端口，然后与远程计算机上的服务器通信。它工作正常，突然它出现在所有运行它的 Windows 7 64 位机器上。

Electric.util.WrappedExeption：SOAPException（服务器：服务暂时不可用。）在electric.proxy.handler.Proxy.getCompatibleException（未知来源）在electric.proxy.handler.Proxy.invoke（未知来源）在$Proxy0.sendCommand（未知来源） )

# c - 在 C 中以尽可能最短的方式（和无忧的方式）读取整个文件内容

> ID：10235466
> 
> 赞同：-2
> 
> 时间：2012-04-19T19:34:44.423
> 
> 标签：c, file

> **可能重复：**
> [在 C 中获取文件内容的最简单方法](https://stackoverflow.com/questions/174531/easiest-way-to-get-files-contents-in-c)

我看到了这篇[文章](https://stackoverflow.com/questions/174531/easiest-way-to-get-files-contents-in-c)，但我仍然觉得它涉及`fseek`等等`ftell`。我看到了一些其他使用`feof+fgetc`组合的方法，但他们说`feof`这不是循环条件的好选择。还有一些人建议`fgets`逐行使用和阅读，我认为这很乏味。

还有其他更短的方法来读取整个文件内容吗？

PS：更短的意思是代码行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T19:36:30.513

要么使用，要么[`mmap()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/mmap.html)自己做。

大致省略错误检查：

```
int fd = open(filename, O_RDONLY);
struct stat sb;
fstat(fd, &sb);
char *contents = mmap(0, sb.st_size, PROT_READ, MAP_PRIVATE, fd, 0); 
```

这是文件的只读副本，分配在内核选择的地址处。如果您使用的是 32 位系统，您可能不得不担心大于 2 GiB 的文件。我认为您无法避免使用诸如`fstat()`获取文件大小之类的东西。如果要增大文件，可以根据 POSIX 规范指定大于文件大小的大小。

如果你DIY，那么前三行是一样的。然后你使用：

```
char *contents = malloc(sb.st_size);
read(fd, contents, sb.st_size); 
```

如前所述，这些示例中省略了所有错误检查；不要在生产就绪的代码中冒险。

* * *

我去挖掘一些更接近生产就绪的代码，这些代码使用`mmap()`并发现：

```
static int sqs_mapfile(const char *file)
{
    int   fd;
    void *vp;
    struct stat sb;

    if (file == 0)
        return(SQS_NOSQSFILE);
    if ((fd = open(file, O_RDONLY, 0)) < 0)
        return(SQS_OPENFAIL);
    if (fstat(fd, &sb) != 0)
    {
        close(fd);
        return(SQS_STATFAIL);
    }
    vp = mmap(0, sb.st_size, PROT_READ, MAP_PRIVATE, fd, 0);
    close(fd);
    if (vp == MAP_FAILED)
        return(SQS_MMAPFAIL); 
```

“SQS_xyz”代码特定于它来自的程序（函数名称也是如此）。此代码使用 3 参数`open()`调用，其中 2 参数版本就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T19:48:24.407

我认为有可能实际工作的最短方法是以下顺序：

```
char *buffer;
size_t size;

fseek(your_file, 0, SEEK_END);
size = ftell(your_file);
rewind(your_file);
buffer = malloc(length);
fread(buffer, 1, length, your_file); 
```

当然，您只需要一次：

```
char *read_file(FILE *file) { 
    char *buffer;
    size_t size;

    fseek(your_file, 0, SEEK_END);
    size = ftell(your_file);
    rewind(your_file);
    buffer = malloc(length);
    if (buffer) fread(buffer, 1, length, your_file);
    return buffer;
} 
```

那么它只是：`char *file_content = read_file(some_file);`

# asp.net - 使用 LINQ 和下拉列表将新记录输入 SQL 数据库

> ID：10235469
> 
> 赞同：1
> 
> 时间：2012-04-19T19:34:47.643
> 
> 标签：asp.net, sql, vb.net, linq

大家好，我是新手，我正在为我的 asp.net 网站苦苦挣扎，我们的职责是制作兽医手术预订系统。

我有一个包含 4 个字段的 asp.net 页面，其中一个字段根据下面的 vb 代码在页面加载时填充。

我正在尝试获取下拉列表控件的选定值（或文本）并将其用作记录中第一个字段的值，但是每次我在下拉列表中选择第二个或第三个值并单击提交按钮时，新的创建的记录在下拉列表中插入第一个值。

希望你能帮忙。

```
Imports System.Linq
Imports System.Data.Linq

Partial Class _Default
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load
        Dim db As New LinQTASK5DataContext
        Dim mu As MembershipUser = Membership.GetUser()
        Dim g As Guid = mu.ProviderUserKey
        Session.Item("uGUID") = g.ToString
        Dim animal = From a In db.pets Where g = a.userGuid Select a.petName
        Dim valSelec = animal
        DropDownList1.DataSource = animal
        DropDownList1.DataBind()
        RangeValidator1.MinimumValue = DateTime.Now.ToString("dd/MM/yyyy")
        RangeValidator1.MaximumValue = New DateTime(2100, 1, 1).ToString("dd/MM/yyyy")
    End Sub
    Protected Sub Button1_Click(sender As Object, e As System.EventArgs) Handles Button1.Click
        Dim db As New LinQTASK5DataContext
        Dim b As New booking With {.petName = DropDownList1.SelectedItem.Text, .VetID = cmbVet.Text, .Date = lblDate.Text, .slotID = cmbSlot.Text}
        db.bookings.InsertOnSubmit(b)
        db.SubmitChanges()
        Response.Redirect("~/customers/viewbookings.aspx")
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T20:25:57.570

每次页面加载时，您都会重新绑定下拉列表。您应该将绑定封装在 if 语句中。

```
If Not Page.IsPostBack Then
   // your code here
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:27:21.420

您需要更改 Page_Load 函数并测试回发：

```
if not IsPostBack then
   //do your all your  initialization stuff
end if 
```

如果您不这样做，那么当您单击提交时，所有代码都会再次运行，并且您的下拉列表将重置为其初始值。if 语句确保您仅在第一次加载页面时进行初始化，以便获得新值。

# tomcat - 如何在不修改 web.xml 文件的情况下配置 tomcat 以独立提供静态内容？

> ID：10235471
> 
> 赞同：1
> 
> 时间：2012-04-19T19:34:54.790
> 
> 标签：tomcat, web.xml, static-content

我们有一个非常小的 web 应用程序，其前端由一个经常使用 Javascript 的小组构建。事实上，他们拥有如此多的 Javascript，以至于常见的“外部”Javascript（不是特定于应用程序）的 Javascript 目录为 13.2 MB。

构建时，需要一段时间（尤其是在完成干净构建的情况下）将此 javascript 传输到 WAR 文件中。我希望能够从构建脚本中删除外部目录并静态提供它，从而消除此复制步骤，但我不知道如何在不使用“默认”servlet 的情况下从 Tomcat 提供静态内容，这需要更改 web.xml 文件。

如何在不更改 web.xml 文件或当前 WAR 文件中的任何代码的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T15:40:03.590

看看 Tomcats [VirtualWebApp](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Virtual_webapp)（页面底部的示例）和[VirtualDirContext](http://tomcat.apache.org/tomcat-7.0-doc/config/resources.html#VirtualDirContext_implementation)。

# crystal-reports - 以编程方式从 Crystal Reports .rpt 文件中获取报告表

> ID：10235474
> 
> 赞同：1
> 
> 时间：2012-04-19T19:35:00.423
> 
> 标签：crystal-reports

我想要完成的是找出大量报告（大约 5,000 个）实际使用的视图。为了帮助我做到这一点：

有人可以显示 C# 或 VB 代码来列出 .rpt 文件中的表吗？

这些报告大部分是在 CR XI 下创建的，有些是在 2011 年创建的。

这些报告也在 SAP Central Management Console 下。但我不认为这给了我任何交互式使用的东西。如果有一种从管理控制台获取表格的编程方式，我也会对此感兴趣。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T13:59:07.450

谢谢 Lee 和 Craig，但我要回答我自己的问题……使用 Intellisense Oriented Design 我发现：

参考

```
 CrystalDecisions.CrystalReports.Engine
 CrystalDecisions.Data.AdoDotNetInterop
 CrystalDecisions.Shared

 CrystalDecisions.CrystalReports.Engine.ReportDocument doc;
 doc = new CrystalDecisions.CrystalReports.Engine.ReportDocument();
 doc.Load(@"C:\temp\mftrailers.rpt");
 foreach (CrystalDecisions.CrystalReports.Engine.Table t in doc.Database.Tables)
 {
    Console.WriteLine(t.Name);
 } 
```

这是 2008 年的情况，我没有后来的 VS 来查看 SAP 现在制作的库是否具有相同的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T10:12:58.570

这有什么好处吗？：[http ://www.ml-consult.co.uk/cryst-07.htm](http://www.ml-consult.co.uk/cryst-07.htm)

“CR Doc 是一个简单的免费软件程序，它列出了一个或多个报告中使用的所有数据库表和字段。”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T11:57:46.207

尝试[RPTtoXML](http://code.google.com/p/rpttoxml/)。

# wcf - WCF 流媒体服务

> ID：10235479
> 
> 赞同：0
> 
> 时间：2012-04-19T19:35:12.010
> 
> 标签：wcf, service, real-time

我想在 WPF 客户端的图表中显示一些实时数据。数据应来自 WCF 服务。现在，它可以与基本的 WCF 服务 (wsHttpBinding) 一起使用，但它不能满足我对实时绘图的需求。我异步调用服务，然后更新我的 UI，但我需要消除等待服务调用完成的时间。

我希望能够每 40 毫秒从服务流中读取一个值，并更新我的图表。使用 WCF 执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:52:09.487

如果您绝对要求 40 毫秒的旧数据，那么 WCF 可能不是正确的选择。WCF 保护您免受管道的影响，但这是有代价的。您可以直接使用套接字获得更好的性能。

有关如何在 WCF 中使用流式传输的示例，请参阅：http: [//msdn.microsoft.com/en-us/library/ms789010.aspx](http://msdn.microsoft.com/en-us/library/ms789010.aspx)

Infragistics 也有一些用于显示实时数据的 WPF 控件。请参阅： http: [//www.infragistics.com/dotnet/netadvantage/wpf/data-visualization.aspx#Overview](http://www.infragistics.com/dotnet/netadvantage/wpf/data-visualization.aspx#Overview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:50:36.320

到目前为止，您有一些代码吗？

我只需打开一个双工客户端代理并收听 wcf 服务回调。但老实说，我不知道它有多快。

# c# - NHibernate 在一对多集合中生成奇数 sql

> ID：10235480
> 
> 赞同：0
> 
> 时间：2012-04-19T19:35:13.383
> 
> 标签：c#, nhibernate

给定以下配置：

```
<class name="CategoryPerm" table="CUS_BCDynamicContent_CategoryPerms" lazy="true" >
    <id name="Id">
        <generator class="guid.comb" />
    </id>
    <many-to-one class="BCDynamicContent.Entities.Category, BCDynamicContent, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" name="Category">
        <column name="CategoryID" sql-type="uniqueidentifier" not-null="true" />
    </many-to-one>
    <property name="PortalGroupId">
        <column name="PortalGroupID" sql-type="uniqueidentifier" />
    </property>
    <bag name="GroupMemberships" cascade="none">
        <key column="ParentPrincipalID" property-ref="PortalGroupId" />
        <one-to-many class="BCDynamicContent.Entities.GroupMembership, BCDynamicContent, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null" />
    </bag>
</class>
<class name="GroupMembership" table="FWK_GroupMembership" lazy="true" mutable="false" >
    <id name="Id">
    </id>
    <property name="ParentPrincipalId">
        <column name="ParentPrincipalID" sql-type="uniqueidentifier" not-null="true" />
    </property>
    <property name="MemberPrincipalId">
        <column name="MemberPrincipalID" sql-type="uniqueidentifier" not-null="true" />
    </property>
</class> 
```

和课程：

```
public class Entity
{
    public virtual Guid Id { get; set; }
}

public class CategoryPerm : Entity
{
    public virtual Category Category { get; set; }
    public virtual Guid PortalGroupId { get; set; }
    public virtual IList<GroupMembership> GroupMemberships { get; set; }

    public CategoryPerm()
    {
        GroupMemberships = new List<GroupMembership>();
    }
}

public class GroupMembership : Entity
{
    public virtual Guid ParentPrincipalId { get; private set; }
    public virtual Guid MemberPrincipalId { get; private set; }

} 
```

以及以下 linq 查询：

```
var categories = (from x in nhs.Linq<CategoryPerm>() where x.GroupMemberships.Any(y => y.MemberPrincipalId == PortalUser.Current.ID) select x ).ToList() ; 
```

为什么 NH 提出的 sql 看起来像这样：（问题之一是“exists()”部分“where this_0_.Id = ParentPrincipalID”<-- 不应该那样做）

```
SELECT this_.Id            as Id290_0_,
       this_.CategoryID    as CategoryID290_0_,
       this_.PortalGroupID as PortalGr3_290_0_
FROM   CUS_BCDynamicContent_CategoryPerms this_
WHERE  this_.Id in (SELECT this_0_.Id as y0_
                    FROM   CUS_BCDynamicContent_CategoryPerms this_0_
                           inner join FWK_GroupMembership y1_
                             on this_0_.PortalGroupID = y1_.ParentPrincipalID
                    WHERE  exists(select 1
                                  from   FWK_GroupMembership
                                  where  this_0_.Id = ParentPrincipalID)
                           and y1_.MemberPrincipalID = 'b32f5d6c-490c-45e9-874a-c4d27d2862b8' /* @p0 */) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:50:58.610

看起来这是 NH 2.x Linq 提供程序中的错误。我最终去了 ICriteria，现在它就像一个魅力。

```
nhs.CreateCriteria<CategoryPerm>("a").CreateCriteria("a.Category", "b").CreateCriteria("a.GroupMemberships", "c").Add(
                Restrictions.Eq("c.MemberPrincipalId", PortalUser.Current.ID.AsGuid)).List<CategoryPerm>(); 
```

# php - Magento：选项卡内的网格在保存时提供无效的选项卡数据

> ID：10235483
> 
> 赞同：1
> 
> 时间：2012-04-19T19:35:24.753
> 
> 标签：php, magento

您好，我有一个扩展客户编辑页面的选项卡小部件。在一个选项卡中，我想显示产品网格

```
 $this->addTab('vendorproducts', array(
                'label'     => Mage::helper('customer')->__('Products'),
                'class'     => 'ajax',
                'url'       => $this->getUrl('namespace/adminhtml_tabs/products', array('_current' => true)),
        )); 
```

然后在该函数中，我按原样加载产品网格块。但是，当我加载选项卡并尝试保存客户时，它会将错误 css 类添加到选项卡以阻止它保存，我也尝试将网格复制到一个新文件并从那里加载它，但它仍然给我一个错误，有没有办法避免magento附加错误类，或者我需要添加到网格块中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T01:17:20.753

错误是因为 _prepareMassaction 创建的字段和产品网格上的导出方法，您应该创建产品的自定义网格并且不要使用此方法。

# forms - 尽管经过验证，为什么 Symfony2 表单仍显示默认错误值？

> ID：10235484
> 
> 赞同：1
> 
> 时间：2012-04-19T19:35:26.330
> 
> 标签：forms, symfony, annotations, doctrine-orm, validation

我正在继续研究 Symfony2 并发现了新的“问题”！

让我描述一下这个问题。我有一个在 Doctrine Entity 上构造表单的类。它与[官方文档此页面中](http://symfony.com/doc/current/bundles/DoctrineMongoDBBundle/form.html)描述的注册表单示例相同。唯一的区别是我使用 Doctrine 而不是 MongoDB。

现在，我将以下字段添加到 User 类中

```
 /**
 * @Assert\Type(type="integer", message="Not an integer.")     
 * @ORM\Column(type="smallint", name="num")
 * 
 * @var Smallint $num
 * 
 */
protected $num; 
```

然后，我通过添加以下行更新了*UserType*类中的函数*buildForm ：*

 *```
public function buildForm(FormBuilder $builder, array $options)
{
    ...
    $builder->add('num', 'integer', array(
        'label' => 'Insert a number',
        ));
} 
```

这是问题所在。尽管我通过注释提供了自定义消息，但字段*num*（即字符串值）的错误输入会返回以下错误代码：“**此值无效**”而不是“**非整数**”。

关于自定义错误消息的这种错过解释的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T06:52:25.760

尝试添加

```
'invalid_message' => "Not an integer' 
```

在`buildForm`方法。*

# html - SQL Server - 使用正则表达式导出数据？

> ID：10235487
> 
> 赞同：-1
> 
> 时间：2012-04-19T19:35:35.597
> 
> 标签：html, sql, sql-server, regex

我有一个表，我正试图从 SQL Server 数据库中导出。其中一个专栏让我很难过，导入和导出向导抛出各种错误。删除此列后，导出将完美运行。

数据库中的列将完整的 HTML 文档存储为文本数据类型。我想在没有 HTML 的情况下从 DIV 标记之间的该列中仅导出每个字段的文本。

例如：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
    <STYLE type=text/css> P, UL, OL, DL, DIR, MENU, PRE { margin: 0 auto;}</STYLE>
    <META content="MSHTML 6.00.2900.3429" name=GENERATOR>
</HEAD>
<BODY leftMargin=1 topMargin=1 rightMargin=1>
    <FONT face=Tahoma size=2>
        <DIV>[REDACTED TEXT THAT I WANT TO EXPORT]</DIV>
    </FONT>
</BODY>
</HTML> 
```

那是从其中一条记录中粘贴出来的副本。记录中的每一行都有相同的 HTML，但我只想导出编辑后的文本。

撇开设计这个数据库/应用程序的人是个白痴不谈，我如何获取这些数据？如果我能让导出向导工作，我什至会满足于使用 HTML 提取完整记录。

**编辑：**这是导入和导出向导报告错误：

> 操作已停止...
> - 初始化数据流任务（成功）
> - 初始化连接（成功）
> - 设置 SQL 命令（成功）
> - 设置源连接（成功）
> - 设置目标连接（成功）
> - 验证（成功）
> - 准备执行（ Success)
> - 预执行 (Success)
> - Executing (Warning)
> 消息
> * 警告：准备 SQL 任务 1：多步 OLE DB 操作产生错误。检查每个 OLE DB 状态值（如果可用）。没有做任何工作。（SQL Server 导入和导出向导）
> * 警告：准备 SQL 任务 1：多步 OLE DB 操作产生错误。检查每个 OLE DB 状态值（如果可用）。没有做任何工作。（SQL Server 导入和导出向导）
> 
> *   复制到`Query`（错误）
>     消息
> *   错误 0xc0202009：数据流任务 1：SSIS 错误代码 DTS_E_OLEDBERROR。发生 OLE DB 错误。错误代码：0x00040EDA。
>     
>     
> *   错误 0xc0209029：数据流任务 1：SSIS 错误代码 DTS_E_INDUCEDTRANSFORMFAILUREONERROR。“输入“目标输入”(45)”失败，因为发生了错误代码 0xC020907B，并且“输入“目标输入”(45)”上的错误行处置指定错误失败。指定组件的指定对象发生错误。在此之前可能会发布错误消息，其中包含有关失败的更多信息。
>     
>     
> *   错误 0xc0047022：数据流任务 1：SSIS 错误代码 DTS_E_PROCESSINPUTFAILED。处理输入“目标输入”(45) 时，组件“目标 - 查询”(34) 上的 ProcessInput 方法失败，错误代码为 0xC0209029。已识别的组件从 ProcessInput 方法返回错误。该错误是特定于组件的，但该错误是致命的，将导致数据流任务停止运行。在此之前可能会发布错误消息，其中包含有关失败的更多信息。
>     
>     
> *   错误 0xc02020c4：数据流任务 1：尝试向数据流任务缓冲区添加行失败，错误代码为 0xC0047020。
>     
>     
> *   错误 0xc0047038：数据流任务 1：SSIS 错误代码 DTS_E_PRIMEOUTPUTFAILED。组件“Source”上的 PrimeOutput 方法
>     
>     
> *   Query"(1)返回错误码0xC02020C4。当管道引擎调用PrimeOutput()时组件返回了一个失败码。失败码的含义由组件定义，但是错误是致命的并且管道停止执行。可能有在此之前发布错误消息，其中包含有关失败的更多信息。
>     
>     
> *   执行后（成功）
>     消息
>     
>     
> *   信息 0x4004300b：数据流任务 1：“组件“目的地 - 查询”(34)”写入了 7465 行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T20:04:54.070

在该字段的选择语句中，仅提取您想要使用 SUBSTRING 和 CHARINDEX 剪切标签之间的部分的部分，假设每个字段确实只有一个这样的标签。下面，[HTML] 实际上是将您的字段转换为 VARCHAR，因此在您看到 [HTML] 的地方，您将放置以下内容：

```
CAST([YourHTMLFieldName] AS VARCHAR(MAX)) 
```

这基本上是说“给我和之间的文字：

```
SELECT SUBSTRING([HTML], CHARINDEX('<DIV>', [HTML]), CHARINDEX([HTML], '</DIV>') - CHARINDEX([HTML], '<DIV>')) 
```

您可能需要稍微尝试一下，例如，如果输出错误地包含“”标签，您可以将其更改为“CHARINDEX('') + 5”。

# iphone - Sudzc deserializeAsDictionary：重写字典

> ID：10235496
> 
> 赞同：-1
> 
> 时间：2012-04-19T19:36:20.933
> 
> 标签：iphone, objective-c, ios5, sudzc

Sudzc 生成的代码为反序列化节点编写了一个字典。如果我使用 NSLog(@"The Child Node: %@", [[[element children] objectAtIndex:0] stringValue]); 每次通过时，它都会写出正确的项目。当我尝试在代码中检索结果时，只有最后一个可用（Jackson 3）。我究竟做错了什么？

```
// Deserializes the element in a dictionary.
+(id)deserializeAsDictionary:(CXMLNode*)element {

if([element childCount] == 1) {
    CXMLNode* child = [[element children] objectAtIndex:0];
    if([child kind] == CXMLTextKind) 
    {
         NSLog(@"The Child Node: %@", [[[element children] objectAtIndex:0] stringValue]);
        return [[[element children] objectAtIndex:0] stringValue];

    }
}

NSMutableDictionary* d = [NSMutableDictionary dictionary];
for(CXMLNode* child in [element children]) {
    id v = [Soap deserialize:child];
    if(v == nil) { v = [NSNull null]; }
    [d setObject:v forKey:[child name]];
}
return d;
} 
```

NS日志：

```
2012-04-19 14:13:07.802 Management[3043:10703] Hopefully Child: Allen
2012-04-19 14:13:07.803 Management[3043:10703] Hopefully Child: 1
2012-04-19 14:13:07.804 Management[3043:10703] Hopefully Child: John
2012-04-19 14:13:07.804 Management[3043:10703] Hopefully Child: 2
2012-04-19 14:13:07.805 Management[3043:10703] Hopefully Child: Jackson
2012-04-19 14:13:07.805 Management[3043:10703] Hopefully Child: 3 
```

XML:

```
<TC diffgr:id="TC1" msdata:rowOrder="0">
 <CSHR_POS_NAME>Allen</CSHR_POS_NAME>                            
    <CSHR_NUM>66</CSHR_NUM>
</TC>

<TC diffgr:id="TC2" msdata:rowOrder="1">                                    
  <CSHR_POS_NAME>John</CSHR_POS_NAME>
    <CSHR_NUM>2</CSHR_NUM>
    </TC>

<TC diffgr:id="TC3" msdata:rowOrder="2">
<CSHR_POS_NAME>Jackson</CSHR_POS_NAME>
<CSHR_NUM>3</CSHR_NUM>
</TC> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T13:35:53.807

解决（改变了soap.m）：

```
[d setObject:v forKey:[child name]]; 
NSString* key = [child name]; 
id check = [d objectForKey:key]; 
if( check != nil ) { 

    NSInteger next = 1; 
    key = [NSString stringWithFormat:@"%@%d", [child name], next]; 
    check = [d objectForKey:key]; 
    while( check != nil ) { 

        next++; 
        key = [NSString stringWithFormat:@"%@%d", [child name], next]; 
        check = [d objectForKey:key]; 
    } 
    [d setObject:v forKey:key]; 
} 
[d setObject:v forKey:[child name]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:27:44.243

我发现您还必须放入一个 else 块：

```
if( check != nil ) {             
    NSInteger next = 1;             
    key = [NSString stringWithFormat:@"%@%04d", [child name], next];
    check = [d objectForKey:key]; 
    while( check != nil ) {                 
        next++; 
        key = [NSString stringWithFormat:@"%@%04d", [child name], next]; 
        check = [d objectForKey:key]; 
    } 
    [d setObject:v forKey:key]; 
} else {
    [d setObject:v forKey:[child name]];
}
//End Extension 
```

否则 'd' 中的元素将被覆盖，因为 setObject 被调用了两次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T01:36:05.447

一旦我得到足够的代表点，我会的，但我确实注意到代码的开头和结尾是

```
 [d setObject:v forKey:[child name]]; 
```

对我来说，我必须删除初始行，并为我修复它，所以代码如下所示：

```
// Deserializes the element in a dictionary.
 +(id)deserializeAsDictionary:(CXMLNode*)element {

if([element childCount] == 1) {
    CXMLNode* child = [[element children] objectAtIndex:0];
    if([child kind] == CXMLTextKind) {            
    return [[[element children] objectAtIndex:0] stringValue];
    }
}   
NSMutableDictionary* d = [NSMutableDictionary dictionary];

for(CXMLNode* child in [element children]) {

id v = [Soap deserialize:child];
if(v == nil) { v = [NSNull null]; }

//[d setObject:v forKey:[child name]]; //seems to be duped (maybe my bad)
    //Extended by iDev on StackOverflow
    //http://stackoverflow.com/questions/10235496/sudzc-deserializeasdictionary-over-written-dictionary/10358458#10358458
    NSString* key = [child name]; 
    id check = [d objectForKey:key]; 
    if( check != nil ) {             
        NSInteger next = 1;             
        key = [NSString stringWithFormat:@"%@%04d", [child name], next];
        check = [d objectForKey:key]; 
        while( check != nil ) {                 
            next++; 
            key = [NSString stringWithFormat:@"%@%04d", [child name], next]; 
            check = [d objectForKey:key]; 
        } 
        [d setObject:v forKey:key]; 
    } 
    [d setObject:v forKey:[child name]]; 
    //End Extension
}
return d; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T01:13:50.760

我在上面的代码中遇到了问题——它每次都会覆盖第一个条目——即我会得到一个包含 4 个项目的列表，而第一个和第四个将被重复。

经过大量累人的代码（不喜欢递归代码），我发现了我认为的问题；

我的代码如下：

```
 if( check != nil ) {
        NSInteger next = 1;
        key = [NSString stringWithFormat:@"%@%04d", [child name], next];
        check = [d objectForKey:key];
        while( check != nil ) {
            next++;
            key = [NSString stringWithFormat:@"%@%04d", [child name], next];
            check = [d objectForKey:key];
        }
        [d setObject:v forKey:key];  
    }
    else
    {
          [d setObject:v forKey:[child name]];
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T22:04:04.020

我不确定你是如何应用你的修复的，你是替换 deserializeAsDictionary 中的整个代码*还是*附加到代码的末尾？

看到代码行有一个 for 循环

```
 [d setObject:v forKey:[child name]]; 
```

找到了，所以我猜你只是扩展了它，而不是关闭 for 循环，你只是在这里扩展它，对吗？

# php - php 拍卖采取相同的出价同时提交

> ID：10235497
> 
> 赞同：2
> 
> 时间：2012-04-19T19:36:25.050
> 
> 标签：php, mysql, database

我正在开发一个拍卖网站。我已经编写了自己的拍卖系统。拍卖会在特定的时间段内运行，用户会出价。结束时间出价最高的人赢得拍卖（就像 ebay 一样）。当用户出价时，数据库检查是否是最高出价，如果是，则出价，否则不出价。

一切都很好，但问题是，我把两台笔记本电脑放在一边，从不同的账户登录，并在准确的时间提交了出价，两个出价都被放置（两个出价都高于当前的最高价，而且都是平等的）。不能对同一个产品进行两次相同的投标，对吗？如果两个用户同时提交投标，就会发生这种情况。

谁能说出摆脱这个问题的逻辑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T19:42:29.180

您需要实现一种方法来管理对数据库的并发写入。有几种方法可以实现这一目标。我建议你从这里开始：[http ://en.wikipedia.org/wiki/Lock_%28database%29](http://en.wikipedia.org/wiki/Lock_%28database%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T19:43:16.123

我认为，如果您使用时间戳来确定提交投标的确切时间点，您将无法在完全相同的时间提交投标。时间戳以毫秒为单位，这将是一个小奇迹。

但如果发生这种情况，您可以在两个出价之间随机选择。

# iphone - 网站和 iphone 应用程序更新到同一个数据库

> ID：10235499
> 
> 赞同：1
> 
> 时间：2012-04-19T19:36:26.760
> 
> 标签：iphone, sql, database, xhtml

我是制作网站的新手，但我需要一些关于我的项目的帮助。我已经对如何创建网站进行了一些研究和一些分析，但我有一个问题。我想创建一个社交照片共享网站，用户可以在其中通过应用程序将照片从他们的 iphone 上传到网站。我正在考虑使用可用于应用程序和网站的数据库引擎，或者我应该为两个站点使用不同的数据库。我需要建议如何解决这个问题。

吐鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:40:46.840

您不需要单独的数据库。您的网站应该只是 LAMP 服务器（Linux、Apache、MySQL、PHP）之类的前端。您将需要开发自己的私有数据库 API 来插入和检索项目。

在您的应用程序中，您可能会使用 NSURLConnection 向您的 PHP api 发送异步请求。您应该研究一些开放的 JSON 框架来编码和解码响应。

你的问题范围很广，应该分成几个。希望这能让你走上正轨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:03:48.633

@Justin Amberson 说的是真的。您可以查看本教程，了解如何为您的应用构建它。我希望这对你有帮助。[http://www.raywenderlich.com/2941/how-to-write-a-simple-phpmysql-web-service-for-an-ios-app](http://www.raywenderlich.com/2941/how-to-write-a-simple-phpmysql-web-service-for-an-ios-app)

# c++ - 链接在代码块中不起作用！？（未定义的引用 ...）

> ID：10235503
> 
> 赞同：-1
> 
> 时间：2012-04-19T19:36:36.760
> 
> 标签：c++, codeblocks

我对 10.05 版的代码块有疑问。我做了一个c++项目，我写了一个这样的程序：

主文件

```
#include <iostream>
#include "vectorddd.hpp"

using namespace std;

int main()
{

    vector3D<int> tesztinttomb;
    tesztinttomb.saveout("igen.dat");
    return 0;
} 
```

头文件（vectorddd.hpp）：

```
#ifndef VECTORDDD_HPP_INCLUDED
#define VECTORDDD_HPP_INCLUDED

#include <iostream>

template <class T>
class vector3D  {
    T *x;
    T *y;
    T *z;
    int meret;
public:
    void saveout(char* FileName);

    vector3D(int Meret=0) :  x(new T[meret]), y(new T[Meret]), z(new T[Meret]), meret(Meret) {}

    ~vector3D()  { delete [] x; delete [] y; delete [] z; }
};

#endif // VECTORDDD_HPP_INCLUDED 
```

实现文件（vectorddd.cpp）：

```
#include "vectorddd.hpp"

template <class T>
void vector3D<T>::saveout(char* FileName) {
    int i=0;// I know this is stupid... but the emphasis is on the linking problem

} 
```

它只是没有联系在一起。我知道我必须检查 .cpp 文件链接并在 properties->build options 中编译设置。而且我没有发现任何问题，只是写总是一样的：

```
In function `main':
undefined reference to `vector3D<int>::saveout(char*)'
||=== Build finished: 1 errors, 0 warnings ===| 
```

如果我将 .cpp 文件实现放入我的 .hpp 文件中，它可以正常工作。但这不是代码块应该如何工作的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T19:40:59.433

你的模板需要在你的头文件里，想想看，如果模板在cpp文件里，怎么实例化呢？

你应该把这个：

```
template <class T>
void vector3D<T>::saveout(char* FileName) {
    int i=0;// I know this is stupid... but the emphasis is on the linking problem

} 
```

在您的标头 vectorddd.hpp 文件中

请参阅类似的 SO 帖子：[将 C++ 模板函数定义存储在 .CPP 文件中](https://stackoverflow.com/questions/115703/storing-c-template-function-definitions-in-a-cpp-file)

# macos - mdls 命令：“kMDItemTotalBitRate”属性值问题

> ID：10235504
> 
> 赞同：2
> 
> 时间：2012-04-19T19:36:42.267
> 
> 标签：macos, bash, spotlight

所有，
我在 Mac OS X 上有一个 shell 脚本，它使用`mdls`命令来获取所有媒体文件（mp3、mov、m4v 等）的总比特率元属性。我想将输出与设定的阈值 (XY Kbps) 进行比较，如果媒体文件的比特率超过 XY，则引发一个标志。问题是输出不表示它是 Kbps 还是比特每秒。例如，我在 2 个音频文件 test1.m4a 和 test2.mp3 上运行了 mdls 命令：

```
 mdls -name kMDItemTotalBitRate test1.m4a   
   Output -> kMDItemTotalBitRate = 249

   mdls -name kMDItemTotalBitRate test2.mp3   
   Output -> kMDItemTotalBitRate = 192000 
```

在检查 iTunes 时，我看到前者的数字是 249 kbps，后者的数字是 192 kbps。如何强制`mdls`命令仅以比特/秒为单位输出 kMDItemTotalBitRate，以便所有文件的输出一致并消除混淆？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:03:12.253

正如[Ken Thomases](https://stackoverflow.com/users/1312143/ken-thomases)在他的评论中正确指出的那样，在使用 Spotlight 属性时，您将受到存储值的 Spotlight 导入器的支配。注意[Apple 的 MDItem 文档](http://developer.apple.com/library/mac/#documentation/Carbon/Reference/MetadataAttributesRef/Reference/CommonAttrs.html#//apple_ref/doc/uid/TP40001694-SW1)`kMDItemTotalBitRate`省略了应该测量原始数值的单位的所有指示。人们可能在逻辑上期望这是 bps，因为 bps 是基本比特率单位，但如果导入器另有决定，则无法将存储的值标准化为 bps。

依赖 Spotlight 的替代方法是使用[MediaInfo](http://mediainfo.sourceforge.net/)之类的实用程序（可以使用[homebrew](https://github.com/mxcl/homebrew)安装）分析文件。命令

```
mediainfo '--Inform=General;%BitRate%' "/path/to/your/media file" 
```

[将返回任何支持的媒体文件](http://mediainfo.sourceforge.net/Support/Formats)的比特率，可靠地以 bps 为单位。

# ruby-on-rails - 自定义路由似乎忽略了 Rails 控制器代码

> ID：10235506
> 
> 赞同：0
> 
> 时间：2012-04-19T19:36:47.380
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个非常奇怪的场景，在 Rails 应用程序中似乎忽略了控制器操作方法。我假设这是不可能的，但我需要有人帮助我看到“树木的森林”:) 这就是我所拥有的。首先是自定义路线：

```
 match 'topusers/:skill', :to => 'skills#topusers', :as => :top_users 
```

然后在我的控制器中，我将其缩减为以下内容：class SkillsController < ApplicationController

```
class SkillsController < ApplicationController

        ....

    def top_users
        @skills = Skill.all
    end

        ....
end 
```

我的观点已简化为以下

```
<% @skills.each do |skill| %>
   <%= skill.name %>
<% end %> 
```

有了这个，我在@skills.each 行上收到“nil:NilClass 的未定义方法 `each'”的错误。我知道技能表中有数据，我可以通过 rails 控制台看到。为了排除故障，我做了一个渲染：text => @skills.to_yaml，它似乎被忽略了。这让我很困惑，所以我完全删除了 top_users 方法，但仍然遇到同样的错误，这让我很困惑，因为我认为 rails 会因为没有 top_users 方法而对我大喊大叫。然后我认为 rails 可能正在查看不同的控制器，因此我将控制器的名称从 SkillsController 更改为 SkillsXXXController。这次 rails 确实对我大喊大叫，告诉它找不到控制器，所以我知道它至少在寻找正确的控制器。

那么，知道为什么我会看到这种行为吗？我的自定义路线看起来正确吗？有没有人见过这种行为？

提前致谢

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:52:50.883

您在比赛路线中缺少下划线吗？'技能#topusers'。看起来你已经在 top_users 定义了你的控制器方法。

# c# - 确定哪些 SQL 数据类型需要引用值？

> ID：10235507
> 
> 赞同：5
> 
> 时间：2012-04-19T19:36:50.417
> 
> 标签：c#, .net, tsql, ado.net, sql-server-2008-r2

我需要向数据库发送命令。我知道受影响表中所有字段的名称和数据类型，我需要使用它们生成命令。我唯一的问题是确定哪些列值是需要 TSQL 中的引号的数据类型 - 例如，如果字段是`Hello World`type的字符串`varchar`，我需要引用它，但如果它是`int`, 5，我不会需要引用它。

我可以使用类似下面的代码，但它似乎非常低效。有人能指出一个更好的方法——可能使用内置的 SQL 服务器或 C# 功能吗？

```
public string QuoteStringIfDatatypeRequires(string columnName)
{
    if (DataTypes[columnName].Contains("date") || DataTypes[columnName].Contains("time") ||
        DataTypes[columnName].Contains("char") || DataTypes[columnName].Contains("text") ||
        DataTypes[columnName].Contains("binary") || DataTypes[columnName].Contains("image"))
    {
        return "'" + columnName + "'";
    }

    return columnName;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T19:43:28.427

您可以引用所有内容，这将由数据库本身转换为适当的数据类型。

但这将是不正确的。相反，您需要使用参数化查询并按原样发送值：

```
command.Parameters.AddWithValue("@name", value); 
```

或者

```
command.Parameters.Add("@name", type, size).Value = value; 
```

请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.add.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-12-20T21:08:01.830

> 您可以引用所有内容，这将由数据库本身转换为适当的数据类型。

我想指出这不一定是真的（参考 Binary 和 BigInt 类型）。您将获得将 VARCHAR 转换为某些值类型的异常。我只能使用以下方法解决这些异常：

```
public string RenderField(string fieldValue, string fieldType)
{
    // Null check
    if (fieldValue == null || fieldValue.Trim() == string.Empty)
    {
        // Not there
        return null;
    }

    // Switch on type
    switch (fieldType)
    {
        // Cases
        case "TimeSpan":
            return ToolOperations.QuotedValue(fieldValue);
        case "String":
            return ToolOperations.QuotedValue(fieldValue);
        case "Char[]":
            return ToolOperations.QuotedValue(fieldValue);
        case "DateTime":
            return ToolOperations.QuotedValue(fieldValue);
        case "DateTimeOffset":
            return ToolOperations.QuotedValue(fieldValue);
        case "Guid":
            return ToolOperations.QuotedValue(fieldValue);
        case "Boolean":
            return ToolOperations.QuotedValue(fieldValue);
        case "Int64":
            return fieldValue;
        case "Byte[]":
            return fieldValue;            
        case "Decimal":
            return fieldValue;
        case "Double":
            return fieldValue;
        case "Int32":
            return fieldValue;
        case "Single":
            return fieldValue;
        case "Int16":
            return fieldValue;
        case "Byte":
            return fieldValue;
        default:
            ToolOperations.Log("WARNING => UNSUPPORTED SQL TYPE: " + fieldType, false);
            return ToolOperations.QuotedValue(fieldValue);
    }
} 
```

# database-design - 如何在 Cassandra 或 Riak 中查询值为集合的数据？

> ID：10235508
> 
> 赞同：1
> 
> 时间：2012-04-19T19:36:56.470
> 
> 标签：database-design, cassandra, data-modeling, riak

如果对象中键的值是列表，我如何查询 cassandra 或 riak 中的数据

> example=> Genre[Key] : Pop, rock [Values]

我想列出所有类型为摇滚等的歌曲。

我可以使用 Cassandra/Riak 的二级索引来做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T18:58:09.777

是的，Riak 的[二级索引](http://wiki.basho.com/Secondary-Indexes.html)可以为您处理这个问题。

您只需将对象存储在 Riak 中并使用适当的流派对其进行索引。

假装你的数据看起来像这样（JSON）：

```
{ "song":"My awesome song", "genres":["rock", "alternative"] } 
```

您将存储对象并使用流派的二进制索引（使用 curl 的示例）：

```
curl -v -X PUT \
-d '{ "song":"My awesome song", "genres":["rock", "alternative"] }' \
-H "Content-Type: application/json" \
-H "x-riak-index-genre_bin: rock" \
-H "x-riak-index-genre_bin: alternative" \
http://127.0.0.1:8098/riak/mybucket/mykey1 
```

要让所有歌曲都被“摇滚”索引，你可以这样做：

```
curl http://127.0.0.1:8098/buckets/mybucket/index/genre_bin/rock 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T16:58:27.063

[Riak Search](http://wiki.basho.com/Riak-Search.html)可以轻松处理这个问题，但您可能需要确保您的条目被正确索引，例如通过将列表连接到二进制字符串。

# javascript - 主干路由 - 检测浏览器后退按钮按下

> ID：10235509
> 
> 赞同：12
> 
> 时间：2012-04-19T19:36:57.410
> 
> 标签：javascript, backbone.js

我试图找到一种方法来检测用户何时按下浏览器中的后退/前进按钮。

我正在使用主干来处理路由，以及使用主干来呈现我的视图。

问题是我无法从任何地方挂钩此页面更改事件。

我尝试在我的视图的初始化函数中添加一个日志..但是当我使用后退按钮时它没有被触发。

我真的不确定如何检测此页面更改。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-31T13:55:24.580

您可以将回调绑定到 Backbone`route`事件：

```
 Backbone.history.on('route', function () {
        // Do your stuff here
    }); 
```

你可以`Backbone.history.getFragment()`用来知道你是站着的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-11T18:33:45.380

当按下后退按钮时，会触发**popstate**事件。

我正在使用这段代码：

```
// listening for the browser's back button
window.addEventListener('popstate', function(e) {
    router.navigate(Backbone.history.getFragment(), { trigger: true, replace: true });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T19:44:03.020

您可以扩展`Backbone.Router`and 重载`route`and`open`方法。您可以在这两种方法中处理所有页面更改。所以只需从主干文件中重新复制它们，然后使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T19:40:31.960

显然，即使 GitHub 也不知道如何检测按下了哪个按钮；）他们使用以下代码：

```
slideTo: function (a) {
      var b = this.pathFromURL(a),
         c = this.frameForPath(b),
         d = $("#slider .frame-center").attr("data-path") || "";
      c.is(".frame-center") || (d == "/" || b.split("/").length > d.split("/").length ?
        this.slideForwardTo(a) : this.slideBackTo(a))
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-19T19:56:08.327

您应该使用`Backbone.Router`并确保`Backbone.history.start()`在启动应用程序时不要忘记。

一些有用的信息可以在[这里](http://backbonetutorials.com/what-is-a-router/)和[这里找到](http://lostechies.com/derickbailey/category/backbone/)

其实第二个链接不是文章，而是博客。写它的人似乎真的很了解这个话题。

UPD：这个想法是，当您的 url 更改时，主干的路由器会触发绑定方法。所以你应该把你的逻辑放在这个方法上，这样你就可以跟踪它。也许这不是非常自动的方式，需要编写一些代码，但我认为它应该可以工作。

# javascript - facebook like 按钮未在 webview 中显示（ios 和 android）

> ID：10235510
> 
> 赞同：5
> 
> 时间：2012-04-19T19:37:18.413
> 
> 标签：javascript, facebook, html, uiwebview, webview

我有一个在 webview 中运行 html 文件的简单应用程序。当我在 android 浏览器或 iphone 浏览器 safari 中运行它时，我可以看到 facebook like 按钮。

但是当涉及到两个平台中的 webviews 时，like 按钮不会显示。

**我的 html 文件**

```
.
.
.
<body>

    <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
.
.
. 
```

**我的 javascript 文件**

```
this.getItems().items[0].setHtml('<div class="fb-like" data-href="http://test.com" data-send="true" data-layout="button_count" data-width="450" data-show-faces="true"></div>'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T10:17:24.697

当我添加`https:`到时解决`//connect.facebook.net/en_US/all.js#xfbml=1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T03:35:18.770

他们正在中断[http://connect.facebook.net/en_us/all.js](http://connect.facebook.net/en_us/all.js)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T03:49:43.547

来自[https://developers.facebook.com/live_status/](https://developers.facebook.com/live_status/)

connect.facebook.net 今天晚上 8:30 发布

我们目前看到用户连接到 connect.facebook.net 的问题。这会导致 JS SDK 无法正确加载。我们已经意识到这个问题并正在努力解决这个问题。

# reporting-services - SSRS 2008 R2 如何创建一个包含两个图表系列但只对其中一个进行分组的图表？

> ID：10235517
> 
> 赞同：1
> 
> 时间：2012-04-19T19:37:37.857
> 
> 标签：reporting-services, charts, ssrs-2008, grouping, series

在 SSRS 2008 R2 中，我需要创建一个带有趋势线的堆积条形图。

![图表示例](../Images/9811c8342e14f7100a0f79401bb28085.png)

我有一个系列组，可以根据需要分解堆积条形图，但它也分解出上图所示的趋势线。我不希望它对驱动趋势线的图表系列进行分组，我只希望图表显示 1 条趋势线。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:34:31.400

经过几天的工作，我终于意识到了一种适用于我自己的数据的方法。根据数据的排列方式，可能需要 SQL 查询中的其他步骤。

这是我需要绘制图表的数据的一个小伪样本。

```
select Department, SUM(Scrapped * OperationCost) As ScrapValue, TransactionDate
from MonthlyScrap
where TransactionDate between '03-01-2013' and '03-31-2013'
group by Department, TransactionDate 
```

正如预期的那样，这给出了一个名为 Department、ScrapValue 和 TransactionDate 的三个字段的输出数据集。将其放入 SSRS 中的堆叠图表很简单。只需将 TransactionDate 拖到类别中，将部门拖到系列组中，并将 ScrapValue 拖到图表数据控件上的值字段中。

但是，OP 还希望将值的总和绘制成图表，在这种情况下，ScrapValues 作为单线绘制到图表上。由于数据在查询和图表中的分组方式，这将不起作用。如果您再次将数据添加为值（请注意，由于堆叠图表样式，第一次添加时它已经被求和），那么由于您对系列进行分组的方式，它只会为每个单独的部门显示一条线。即使再次对它求和也没有效果。因此，为了完成这项工作，您必须在 SQL 查询中转置（枢转）您的数据（感谢 Dave ;)）以便正确分组。

这是新的查询。

```
select *
from (select Department As Dept, SUM(Scrapped * OperationCost) As ScrapValue, TransactionDate
    from MonthlyScrap
    where TransactionDate between '03-01-2013' and '03-31-2013'
    Group by Department, TransactionDate) As Datatable
PIVOT
(
    SUM(ScrapValue)
    FOR Dept IN ([Molding], [Machining], [Grinding])
) AS p Order by p.TransactionDate 
```

现在您有一个数据集，其中包含按天分组的字段 TransactionDate、Molding、Machining 和 Grinding（每天一行，每个部门下有值），这使得为 Totals 添加最终计算字段变得容易（=Fields！Grinding .Value + Fields!Molding.Value + Fields!Machining.Value)。现在，当您创建堆叠图表时，您将 TransactionDate 拖到类别中，并将所有其他字段拖到值中。您不再需要系列分组，因为查询已经解决了这个问题。最后，将计算字段的图表类型更改为折线图，您现在有一个堆积柱形图，其中一条线代表总计！

（注意：图像在辅助 y 轴上显示运行总计，而不仅仅是总计，但它仍然使用相同的底层方法）

[图表图像](http://i.imgur.com/R3Yo5pB.png)

这是我的最终查询，我在其中添加了一些动态 SQL 来获取图表值并将其转换为存储过程调用以允许使用日期时间参数。

```
DECLARE @columns NVARCHAR(4000)

SELECT @columns = COALESCE(@columns + ',[' + cast( [Department] as varchar) + ']',
 '[' + cast([Department] as varchar)+ ']')
 FROM MonthlyScrap
 GROUP BY [Department]

DECLARE @query NVARCHAR(4000)
DECLARE @startdt DATETIME
DECLARE @enddt DATETIME

SET @startdt = '20130301'
SET @enddt = '20130331'

SET @query = '
select *
from (  select [Department] As Dept, SUM(Scrapped * OperationCost) As ScrapValue, [TransactionDate]
    from MonthlyScrap
    where TransactionDate between @startdt and @enddt
    Group by [Department], [TransactionDate]) As Datatable
PIVOT
(
    SUM(ScrapValue)
    FOR Dept IN (' + @columns + ')
) AS p Order by p.[TransactionDate]'

EXECUTE sp_ExecuteSQL @query,
N'@startdt datetime, @enddt Datetime',
@startdt, @enddt 
```

# database - 架构更新后删除了 Fluent NHibernate 数据

> ID：10235519
> 
> 赞同：3
> 
> 时间：2012-04-19T19:37:47.970
> 
> 标签：database, nhibernate, fluent-nhibernate, fluent

我正在使用 Fluent NHibernate 来处理我的数据库。

运行以下代码时，有些事情会起作用。一个函数更新了表结构，这也有效，但我的数据不见了。

```
ISessionFactory result = Fluently.Configure()
    .Database(MySQLConfiguration.Standard.ConnectionString(connectionString))
    .Mappings(m => m.FluentMappings.AddFromAssemblyOf<Page>())
    .ExposeConfiguration(cfg => new SchemaExport(cfg).Create(true, true))
    .BuildSessionFactory(); 
```

有谁知道如何解决这个问题？必须更新表，但不得删除数据。

在 fluent NH 的 wiki 上，我找不到更多关于`ExposeConfiguration`.

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-19T19:43:25.547

`SchemaExport(cfg).Create(true, true))`是做什么的。我没有使用 Fluent，但根据我刚刚看过的一个项目，我认为它应该类似于`SchemaUpdate(cfg).Execute(true,true)`

编辑：由于这个答案似乎仍然对人们有所帮助，所以这里有一个冗长的解释。

这里的主要区别是我们正在创建的对象。`SchemaExport`实例生成 DDL 来创建数据库。该`Create`方法生成脚本，第二个参数告诉它是否对数据库运行该脚本。 `Create`调用`Execute`，传递额外的参数，包括一个说“不要只是删除表，删除它并重新创建它”的参数。此类中没有不首先删除表的选项。

该`SchemaUpdate`实例是一个更复杂的野兽（内部），因为它查看现有表并在当前表和配置中指定的表之间生成一个增量（我找不到这个参考，我没有看在代码中，我只知道它有效）。但是，在这两种情况下，参数基本相同。第一个是“输出 ddl 到控制台”，第二个是“实际运行数据库”。

# java - 每个发件人的消息队列

> ID：10235520
> 
> 赞同：0
> 
> 时间：2012-04-19T19:38:01.497
> 
> 标签：java, jakarta-ee, ejb-3.1, smack

我正在使用带有 EJB 3.1 架构的 Glassfish 3.1.1 和 smack 库来处理传入的 XMPP 数据包。

为此，我有一个从单例开始的线程，它处理我的传入数据包。

```
Packet packet = collector.nextResult();
if (packet != null)
  processPacket(packet); // here i lookup my processing EJB and start working 
```

我需要的是一个队列，它将数据包排队，以便**一次处理每个发送者一个数据包**。目前我并行处理每个收到的数据包，这使我无法保持数据包的顺序。

有什么想法可以尽可能优雅地解决这个问题吗？

问候米

PS：第一种方法是存储当前正在处理数据包的客户端，然后我遍历收集的数据包并查找未处理任何内容的发送方。但是如果缓冲区中的任何数据包都不允许被处理，我担心这会花费很多迭代。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T20:09:45.410

如果您提前知道发送者，那么您可以注册一个匹配每个发送者的[PacketFilter 。](http://www.igniterealtime.org/builds/smack/docs/latest/javadoc/org/jivesoftware/smack/filter/PacketFilter.html)因此，每个收集器将对来自每个发送者的数据包进行排队。

如果您不知道，那么您可以完成同样的事情，但您必须自己路由消息。使用[PacketListener](http://www.igniterealtime.org/builds/smack/docs/latest/javadoc/org/jivesoftware/smack/PacketListener.html)代替收集器，并在收到每条消息时将它们路由到发送者队列中。如果队列尚不存在，您可以按需创建队列。

# doctrine - 具有多种类型的 Doctrine mongoDB ODM 字段

> ID：10235523
> 
> 赞同：1
> 
> 时间：2012-04-19T19:38:28.247
> 
> 标签：doctrine, doctrine-odm

我需要在一个字段中存储整数和字符串值。我应该在映射中使用什么类型？当我使用字符串时，我在 mongo 文档中将整数值作为字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-14T12:30:02.610

只需使用`@ODM/Field(type="raw")`注释： [https ://www.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/basic-mapping.html#doctrine-mapping-types](https://www.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/basic-mapping.html#doctrine-mapping-types)

```
/**
 * @ODM/Field(type="raw")
 */
protected $value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T00:52:27.023

使用字符串映射。然后，如果您需要返回不同的类型，请在该字段的 getter 中。使用这样的东西

```
public function getTransgenderField() {
    if (is_numeric($this->transgenderField)) {
        return (int) $this->transgenderField;
    }
    return $this->transgenderField;
} 
```

# html - 什么时候可以使用 Id 进行样式设置？

> ID：10235524
> 
> 赞同：2
> 
> 时间：2012-04-19T19:38:35.217
> 
> 标签：html, css

我经常听到我不应该`id`在 HTML 元素上使用属性来在 CSS 中进行样式设置。然而，情况总是如此吗？假设您的应用程序 ( `ul`) 中有多个列表，它们都有一个类`horizontal-list`。但是，您想为每个应用一些独特的样式，`ul`然后您可以添加`id`并像这样使用它吗？

```
#food .horizontal-list {

}

#food .horizontal-list li {

} 
```

在这里，您仅使用它来分隔元素。或者您是否应该为每个唯一列表创建一个类。“不要`id's`用于样式目的”是否仅在您这样使用时才适用？

```
#food {
    /* loads of attributes */
} 
```

有人可以解释什么时候可以使用 id 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T19:48:46.623

我认为这篇文章[CSS Lint 中的表述很好是有害的](http://mattwilcox.net/archive/entry/id/1054/)

> ID 非常有用，您绝对应该使用它们。它们是浏览器选择给定元素的最快方式。它们对于页内锚定很有用，如果它们已经存在于标记中，则将它们用作样式挂钩。奇怪的是，只要它们在任何给定页面上只是该 ID 的一个实例，它们就可以完全正确地使用。
> 
> 关于“选择器特异性”的论点充其量只是为一个糟糕的规则辩护。正确地创作你的 CSS，你就不会陷入任何特殊性陷阱。在为各种不同类型和规模的网站编写 CSS 和 HTML 为生的 6 年中，我可以数出这对我来说是个问题的次数。
> 
> 只有当您使用 ID 来设置特定 HTML 块的样式以允许其在站点上的任何位置使用时，才能将此规则称为准确。例如，如果您使用它来设置 HTML 图库小部件的样式，用户可以通过他们的 CMS 将其包含在任何页面上。他们可以在一页上指定多个。但是，这是唯一一次也是唯一一次令人担忧的事情。

您在示例中使用它的方式是正确的，可以在您的 css 中多次声明它，您只是不想`id`在元素上使用多次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T19:45:41.130

ID 和类都非常适合用于 CSS 样式。

*   对唯一元素使用**ID**。换句话说，每个 ID 不应该被多次使用。
*   使用**类**对元素进行分类和标记。更多细节：[HTML/CSS 的最佳实践](https://stackoverflow.com/a/9717316/675065)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T19:50:36.167

来自[http://webdesign.about.com/cs/css/qt/tipcssclassvsid.htm](http://webdesign.about.com/cs/css/qt/tipcssclassvsid.htm)

> 在以下情况下使用类标签：
> 
> 1.  该样式在整个文档的各个地方都使用过。
> 2.  风格很一般。
> 
> 在以下情况下使用 id 标签：
> 
> 1.  该样式仅在文档中使用一次。
> 2.  样式特定于文档的某个区域。
> 
> 请记住，一个 id 在任何 HTML 文档中只能出现一次。一旦您使用了该 ID，就不应在该页面上再次使用它。

[http://css-tricks.com/the-difference-between-id-and-class/](http://css-tricks.com/the-difference-between-id-and-class/)有更长的解释

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T19:41:46.437

你应该有一个基本布局的基类和其他类来对其进行额外的更改。只有在需要引用元素时才应使用 id，例如用于 ajax 请求或表单。使用多个类没有问题，并且使更改更容易。

还要记住：使用 id 两次会导致无效标记。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-19T19:42:40.923

id 用于设置特定元素的样式，例如您的示例。它非常适合在您只需要将样式限制为特定元素的情况下使用 ID

# oracle - 如何加快查询中的 substr 搜索

> ID：10235526
> 
> 赞同：0
> 
> 时间：2012-04-19T19:38:42.990
> 
> 标签：oracle, substr, substring

我将其用作子选择（在连接其他 2 个表的简单查询中），您可以想象它需要一段时间才能运行。到目前为止，持续了 6 小时以上。这是唯一的方法吗？我知道做另一个 JOIN 而不是子选择可能会有所帮助。但主要瓶颈是所有这些 OR 和子字符串。

```
SELECT ex_array
FROM   service_x 
WHERE  
   ( substr(ex_array,1,2) = 'FW' OR substr(ex_array,3,2) = 'FW' OR substr(ex_array,5,2) = 'FW' OR substr(ex_array,7,2) = 'FW' OR substr(ex_array,9,2) = 'FW' OR substr(ex_array,11,2) = 'FW' ) 
OR ( substr(ex_array,1,2) = 'IL' OR substr(ex_array,3,2) = 'IL' OR substr(ex_array,5,2) = 'IL' OR substr(ex_array,7,2) = 'IL' OR substr(ex_array,9,2) = 'IL' OR substr(ex_array,11,2) = 'IL' )  
OR ( substr(ex_array,1,2) = 'IN' OR substr(ex_array,3,2) = 'IN' OR substr(ex_array,5,2) = 'IN' OR substr(ex_array,7,2) = 'IN' OR substr(ex_array,9,2) = 'IN' OR substr(ex_array,11,2) = 'IN' )  
OR ( substr(ex_array,1,2) = 'IK' OR substr(ex_array,3,2) = 'IK' OR substr(ex_array,5,2) = 'IK' OR substr(ex_array,7,2) = 'IK' OR substr(ex_array,9,2) = 'IK' OR substr(ex_array,11,2) = 'IK' )  
OR ( substr(ex_array,1,2) = 'IH' OR substr(ex_array,3,2) = 'IH' OR substr(ex_array,5,2) = 'IH' OR substr(ex_array,7,2) = 'IH' OR substr(ex_array,9,2) = 'IH' OR substr(ex_array,11,2) = 'IH' )  
OR ( substr(ex_array,1,2) = 'KP' OR substr(ex_array,3,2) = 'KP' OR substr(ex_array,5,2) = 'KP' OR substr(ex_array,7,2) = 'KP' OR substr(ex_array,9,2) = 'KP' OR substr(ex_array,11,2) = 'KP' )  
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T19:44:02.890

您可以尝试的一件事是使用基于[函数的 index](http://www.akadia.com/services/ora_function_based_index_2.html)。具体来说，在 substr(ex_array,3,2) 和 substr(ex_array,9,2) 等上创建基于函数的索引。

虽然它可能有很多索引，所以你必须通过运行一些测试来衡量它有多大帮助。但这是一个开始的想法。

我假设您使用的是 8i 或更高版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T20:36:21.440

也许使用[regexp_like](http://docs.oracle.com/cd/B14117_01/server.101/b10759/conditions018.htm)：

```
REGEXP_LIKE(ex_array, '^(.{2}){0,5}(FW|IL|IN|IK|IH|KP).*$') 
```

（正则表达式可能可以写得更好......）

您还可以按照**dcp**的建议添加基于函数的索引（尽管您只需要一个）：

```
create index fbIndex on service_x (REGEXP_INSTR(ex_array, '^(.{2}){0,5}(FW|IL|IN|IK|IH|KP).*$')); 
```

并更改要使用的查询：

```
REGEXP_INSTR(ex_array, '^(.{2}){0,5}(FW|IL|IN|IK|IH|KP).*$') = 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T20:01:47.910

这个结构怎么样...

```
INSTR( ex_array, 'FW' ) IN (1,3,5,7,9,11) 
```

那么至少你只会做一次字符串解析......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T20:32:49.297

鉴于我建议的可用信息，鉴于您需要的查询的选择性：

1) ex_array 上的索引（最好只是 ex_array，或者 ex_array 在索引的前沿。

2）修改查询。如果您附加其他过滤条件：

... 和 (Ex_array like '%FW%' OR ex_array like '%IL%' or ex_aray like .... 等涵盖了六种情况中的每一种。有了索引，这应该启用索引范围扫描以减少1220 万行只包含您感兴趣的六个字符串之一。只有这些行才会应用您的 substr 逻辑，留下预期的 175K。

原则上，这应该会提高效率。不过，它确实很大程度上取决于数据分布（例如，所有 1200 万行都可能包含六个字符串之一，只是不在原始查询中指定的位置。在这种情况下，我建议的更改可能比原始的效率低询问）。可能还有其他选择，但我需要更多信息，包括更准确地解释计划。

希望这有帮助，祝你好运！！

# java - 当我启动我的 java 应用程序时，我可以在我的 linux 控制台上获取路径吗？

> ID：10235528
> 
> 赞同：1
> 
> 时间：2012-04-19T19:38:55.393
> 
> 标签：java, linux, path

当我从命令行启动 Java 应用程序时，我想知道在调用脚本之前控制台在文件系统中的位置。我基本上想从Java应用程序中知道我的密码，这可能吗？我在 System.getProperty("") 中看不到任何内容。user.dir 属性不起作用，它只是为我提供了 .project 文件在 Eclipse 项目中的位置。

我可以使用 os.getcwd() 在我的 python 脚本中获得正确的路径，但我还不知道如何将该路径放入我的 Java 程序中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T19:43:44.113

尝试这个：

```
 File f = new File(".");
    f.getCanonicalPath(); // returns the path you are looking for 
```

您还可以使用：

```
System.getProperty("user.dir") 
```

以下问题有一些很好的答案可能会有所帮助： [获取应用程序的路径](https://stackoverflow.com/questions/218061/get-the-applications-path)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T20:06:10.947

我通常使用这个：

```
System.out.println(getClass().getClassLoader().getResource(".")
                .getPath()); 
```

返回与@kevingreen 建议的结果相同的结果

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T19:42:17.997

尝试这个：

```
CodeSource cs = getClass().getProtectionDomain().getCodeSource(); 
```

然后`cs.getLocation();`

那将是您执行时的 PWD。

ED：CodeSource 是这个库的一部分：`import java.security.CodeSource;`

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-19T19:44:02.173

尝试这个：

```
System.getProperty("user.home") 
```

# c# - 记录代码更改

> ID：10235530
> 
> 赞同：2
> 
> 时间：2012-04-19T19:38:57.313
> 
> 标签：c#, java, coding-style

记录代码更改的不同方式有哪些？我目前正在编写正在经历大量更改的代码。当前记录代码更改的约定类似于

```
//Begin add by xxxx for feature/bug xxxx <Date>
........
........
//End add by xxxxx for feature/bug XXXX <Date> 
```

这种草率的评论方式造成了很多混乱。我们通过粗注释寻找实际的代码行。我们不想在版本控制软件的签入注释部分记录更改。我正在考虑在文件的开头维护一个更改日志，其中记录了所有更改。你们用什么方法来记录变化？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-19T19:43:25.327

你会发现在实践中，重要的信息是代码*现在*做了什么，而不是它是如何到达那里的。通过使用这些注释来掩盖当前代码，您会使代码更难阅读和使用。

在您需要返回并查看*为什么*做了某事的情况下，最好在版本控制中捕获所有信息。不要试图在代码本身中捕捉历史。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-19T19:44:10.227

你的版本控制系统应该是变更信息的主要来源。关于代码中非显而易见功能的注释应作为注释记录下来，无论出于何种原因，即是否用于更改。

更改代码的程序员、导致更改的相关错误/功能以及更改时间所有这些都已编码在您的版本控制系统创建的文件的更改日志中！任何更多手动添加的更改日志，它都会过时，并且会使文件变得混乱。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-19T19:44:50.383

我永远不会在代码中这样做。永远不能。注释应该是最少的，并且只是为了使代码中的混乱逻辑更加清晰（或者，更经常地，指出约定）。始终单独提交每个更改。写一个简洁的最大 79chars 提交消息。您可以在每个数据包（产品）的根目录中保留重组后的文本 - 例如 CHANGES.rst。我们就是这样做的——你可以看[这里](http://svn.eionet.europa.eu/projects/Naaya/browser/trunk/eggs/Naaya/CHANGELOG.rst)。

您还可以使用票务/pm 系统并在提交消息中提及票证。

# salesforce - 澄清选项列表值和配置文件

> ID：10235540
> 
> 赞同：0
> 
> 时间：2012-04-19T19:39:50.457
> 
> 标签：salesforce

我是 Salesforce 新手，我想确保我了解配置文件和选项列表值。

# 设置

我的公司有很多个人资料。对于联系人对象中的选项列表字段，他们想要添加几个选项。

# 问题

我想确保我添加到 PL 的选项可用于所有配置文件。当我为 PL 添加选项时，我没有选择任何选项“要将新值添加到特定记录类型的选项列表值，请选中下面的相应框。”

# 问题

1.  通过不选择任何内容，我是否保证该选项将显示在所有配置文件中？（我很确定这一点）

2.  假设有一些配置文件无法访问该字段，那么会发生什么？当且仅当配置文件可以看到该字段时，他们才能看到我添加的值是否有效？

谢谢，
-el noobre

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T20:03:00.970

配置文件与值无关。只是他们是否可以看到该领域。重要的是记录类型。对于给定的记录类型，可以使部分或全部主要字段选项列表值可用。

因此，如果您向选项列表字段添加新值，您可以确保所有配置文件都可以看到它。同样重要的是记录类型，而不是配置文件。

我不确定我是否理解第二个问题。如果他们不了解该领域，那么就他们而言，它不存在。为什么选择列表具有什么值很重要？

# php - yii 使用下拉列表对 CListView 进行排序

> ID：10235544
> 
> 赞同：3
> 
> 时间：2012-04-19T19:40:04.340
> 
> 标签：php, javascript, jquery, ajax, yii

所以我有一个 CListView，我可以使用我在 sortableAttributes 中设置的属性进行排序，当它只是 ASC 和 DESC 排序时这很好。但我也想按类别对 CListView 进行排序。在我的模型中，我有一个类别，范围为 0-8。我做了一个显示类别的下拉选择。

我想做的是在选择下拉列表中的一个选项时更新我的​​ CListView，我可以为此编写自己的 jQuery 代码，但我猜有一些聪明的 yii 方法可以做到这一点。

谢谢

```
<?php $this->widget('zii.widgets.CListView', array(
    'dataProvider'=>$model->search(),
    'sortableAttributes'=>array('views','create_time','release_time'),
    'id'=>'#videos',
    'itemView'=>$view,
    'pager'=>array('cssFile'=>'/css/pager.css'),
)); ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:00:12.873

为了将来参考，这就是我最终这样做的方式。

```
Yii::app()->clientScript->registerScript('category', "
$('#category').change(function(){
    $.fn.yiiListView.update('videos', {
        data: $(this).serialize()
    });
    return false;
});
"); 
```

重要的部分是 dropDownList 的 htmlOptions 中的 id，因为您不能使用“Video[category]”作为 $.fn.yiiListView.update 函数的 id。但是需要它作为选择的名称，才能使用已经存在的搜索能力。

```
<?php echo CHtml::dropDownList(
    'Video[category]',
    0,
    Lookup::items('VideoCategory'),
    array('id' => 'category')
); ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T06:20:26.327

经过一番辛劳：

你必须做两件事。首先，我们需要来自服务器的修改数据，因为您可以修改模型的搜索功能，因为它是为 CListView 提供数据提供者的功能。

因此，在`search()`您的模型的功能中，您可以添加一个`if`条件来修改`$criteria`数据提供者的，例如：

```
public function search() {

     // Warning: Please modify the following code to remove attributes that
     // should not be searched.

     $criteria=new CDbCriteria;

     // added the following if condition to modify the criteria to include only videos of a certain category
     if (isset($_GET['category']))
           $criteria->compare('category',$_GET['category'],true);// my category is string, hence the third attribute
     else
           $criteria->compare('category',$this->category,true);// we need the else part, coz the search function is used for actual searching also, for instance in gridview filters/search

     $criteria->compare('id',$this->id);
     // your other attributes follow    

     return new CActiveDataProvider($this, array(
            'criteria'=>$criteria,
     ));
} 
```

**注意**：我不确定在比较之前是否绝对有必要对 $_GET['category'] 进行清理。

其次，我们需要更新可以使用其功能的 CListView `$.fn.yiiListView.update`。例如：

```
<div id="categoryupdating">
<?php 
    echo CHtml::dropDownList('dropit', '', 
     array('1'=>'Cateogry1','2'=>'Category2','3'=>'Category3','4'=>'Category4'),
     array('onchange'=>"$.fn.yiiListView.update('videos', {url: '".Yii::app()->createUrl('controller/action')."?category='+$('#dropit option:selected').val()})"));
?>
</div> 
```

在这里，您当然应该使用可能的函数动态填充下拉列表的数据`CHtml::listData`，并且控制器/动作应该是 CListView 的控制器/动作。

查看*jquery.yiilistview.js*文件以了解更多关于 yii 的 listview 小部件的 javascript 函数的信息。

**注意**：$.fn.yiiListView.update 将`id`列表视图的 和`url`调用更新的 ，作为参数。

**编辑**：还添加了`else`条件，因为搜索功能用于在 gridview 和其他地方进行实际搜索。

# ruby-on-rails-3 - 让 FactoryGirl 和黄瓜说话 ArityMismatchError

> ID：10235547
> 
> 赞同：1
> 
> 时间：2012-04-19T19:40:39.107
> 
> 标签：ruby-on-rails-3, cucumber, factory-bot

我有一个全新的 Rails 3.2 应用程序，我无法让第一步定义工作。我的黄瓜导轨是（1.3.0），factory_girl_rails（3.1.0）。他们都在测试环境中。根据良好的黄瓜实践，这个应用程序还没有编写模型、生成器或视图。我正在等待测试的推动来推动需要做的事情。

这是第一个功能：

```
Background: 
   Given a School "Murfree High School" exists 
```

这是步骤定义.rb

```
 Given /^a School "([^"]*)" exists$/ do 
    #Factory(:school)  #fails
    school = FactoryGirl.create(:school)
 end 
```

这是我的规范/factories.rb

```
 require 'factory_girl'
 FactoryGirl.define do
   factory :school do
     name "Murfree High School"
   end
 end 
```

所以我得到了一个不匹配的错误，因为我想让那个步骤定义成为一个通用步骤，这样我就可以换成学校的任何名称。但我认为工厂的重点是确定一个记录生成，以便我可以在其他定义中重用该工厂，并可能随着字段数量的增长而增长它。通常我的步骤定义是 Given /^a School "([^"]*)" exists$/ do |name| 但是当我有一个工厂准备好生成该测试记录时，没有地方可以放置该参数。如果我删除了特征中高中名称周围的引号，以便该定义与该工厂“绑定”，我从黄瓜得到黄色响应。这引出了一个问题：因为我没有要生成的模型，为什么我没有收到红色错误消息？

在协调 factoryGirl 和黄瓜中的通用步骤定义时，我忽略了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T17:07:47.150

FactoryGirl 包含一组步骤定义，其中一个会自动创建一个名为`a school exists with a name of "([^"]+)"`. 有关原始公告，请参见[http://robots.thoughtbot.com/post/284805810/gimme-three-steps](http://robots.thoughtbot.com/post/284805810/gimme-three-steps)。

PS：我还创建[了 FG 步骤定义模块的副本](https://gist.github.com/1513688)，它做的事情完全相同，只是还根据正在生成的工厂的名称创建实例变量。`@school`在您的情况下，将创建实例变量。

# vb.net - 我应该将全局常量放在 .NET 库中的什么位置？

> ID：10235550
> 
> 赞同：3
> 
> 时间：2012-04-19T19:40:49.117
> 
> 标签：vb.net, constants

我正在使用一个以 name=value 格式吐出大量数据的 API。起初，我通过简单的字符串比较来处理所有内容：

```
Sub ProcessData(ByVal name As String, ByVal value As String)
    If name = "thisname" Then
        DoThis(value)
    ElseIf name = "thatname" Then
        DoThat(value)
    End If
End Sub 
```

但是要处理超过 20 种不同的可能名称，这很快就变得难以维护。我的下一步是将字符串移动到私有子类中定义的常量：

```
 Private Class Parameters
     Private Sub New()
     End Sub

     Public Const ThisName As String = "thisname"
     Public Const ThatName As String = "thatname"

 End Class 
```

我的方法看起来像这样：

```
 Sub ProcessData(ByVal name As String, ByVal value As String)
        If name = Parameters.ThisName Then
            DoThis(value)
        ElseIf name = Parameters.ThatName Then
            DoThat(value)
        End If
    End Sub 
```

这已经是一个巨大的飞跃，但现在我发现自己需要能够在其他类中使用这些常量。我对将它们转移到全球课程犹豫不决，但我只是看不到其他选择。

全局常量去哪了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T20:02:34.347

常量应该是 Private 或 Friend。失败模式是它们的值被编译到 IL 中。因此，如果您为一个程序集创建错误修复并更改公共常量，那么*其他*使用您更新的程序集的程序集仍然使用旧值。非常讨厌的故障模式。

如果您需要一个公共常量值，那么您应该使用 ReadOnly 关键字。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T19:59:09.327

这些是常数。这意味着没有人可以改变他们的价值。
你应该问问自己这些常数代表什么。
如果它们是程序中到处都需要的全局信息，那么将它们放在全局共享类中是没有异议的。
为了更好地理解它们的含义，我将使用 XML 注释对它们进行注释并继续进行编码。

# c++ - C++ 中的哈希映射 (int, string[])

> ID：10235553
> 
> 赞同：2
> 
> 时间：2012-04-19T19:40:52.733
> 
> 标签：c++, arrays, string, map, hashmap

对于以下情况，有人可以告诉我在 C++ 中开始使用 Hashmap 的代码：

我想要（int，string []）的（key，value）映射。

所以，我的地图应该有一个指向某个大小的字符串数组的 int 键。如何在 C++ 中为此声明和使用哈希映射。

请帮我解决一下这个。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T19:43:21.447

您可以使用 a of s of s，但在 C++ 中提供了更好的选择。它允许您为同一个键存储多个项目，而无需在每个映射条目中管理向量。~~`std::map`~~ [`std::unordered_map`](http://www.cplusplus.com/reference/stl/unordered_map/)`std::vector``std::string`[`unordered_multimap`](http://www.cplusplus.com/reference/stl/unordered_multimap/)

以下是使用地图的示例：

```
using namespace std;

int main(int argc, const char* argv[]) {
    unordered_map<int,vector<string>> mvs;
    vector<string> items1;
    items1.push_back("hello");
    items1.push_back("world");
    vector<string> items2;
    items2.push_back("quick");
    items2.push_back("brown");
    items2.push_back("fox");
    mvs[1] = items1;
    mvs[200] = items2;
    mvs[4].push_back("another_one");
    for(unordered_map<int,vector<string>>::const_iterator iter = mvs.begin() ; iter != mvs.end() ; iter++) {
        cout << iter->first << ":";
        for (vector<string>::const_iterator jter = iter->second.begin() ; jter != iter->second.end() ; jter++) {
            cout << *jter << " ";
        }
        cout << endl;
    }
    return 0;
} 
```

*编辑提及哈希图。*

# asp.net-mvc - Html 渲染不正确，并且没有使用 Ajax.ActionLinks 设置 Viewbag.Title

> ID：10235554
> 
> 赞同：2
> 
> 时间：2012-04-19T19:40:55.627
> 
> 标签：asp.net-mvc, jquery, actionlink

**_ViewStart.cshtml**

```
@{
    Layout = Request.IsAjaxRequest() ? null : "~/Views/Shared/_Layout.cshtml";     
} 
```

**_Layout.cshtml**

```
...
</head>
<body>
    <div id="NavigationPanel">
        @{ AjaxOptions options = new AjaxOptions
       {
           InsertionMode = InsertionMode.Replace,
           UpdateTargetId = "ContentPanel",
           OnBegin = "OnBeginAnimateContentPanel",
           OnComplete = "OnCompleteAnimateContentPanel",
       };}
        <div>
            <p>@Ajax.ActionLink("Users", "Index", "User", options)</p>
            <p>@Ajax.ActionLink("Groups", "Index", "Group", options)</p>
            <p>@Ajax.ActionLink("Permissions", "Index", "Permission", options)</p>
        </div>
    </div>
    <div id="ContentPanel">
        @RenderBody()
    </div>
</body>
</html> 
```

**全球.Asax.cs**

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = "Main", action = "Index", id = UrlParameter.Optional }
    );
} 
```

**MainController.Index 动作：**

```
public ActionResult Index()
{
    return View();
} 
```

**主视图索引.cshtml**

```
@{
    ViewBag.Title = "Test-Index";
}

this is the Index View of the MainController 
```

用户/组/权限控制器的索引视图 + 操作类似于 MainController 的索引。为 ViewBag 和一些小测试文本设置了标题。

这里有一个问题。

每个视图（用户/组/权限）的标题永远不可见，尽管当我单击其中一个 Ajax.ActionLInks 时视图在#ContentPanel 中正确呈现...但是当我检查 html 源代码时：

ContentPanel 中的内容是索引视图中的内容？？？

**为什么会这样？如何为每个 Ajax.ActionLink 设置 View 的标题？**

```
<body>
  <div id="NavigationPanel">
    <p><a data-ajax="true" data-ajax-begin="OnBeginAnimateContentPanel" data-ajax-complete="OnCompleteAnimateContentPanel" data-ajax-mode="replace" data-ajax-update="#ContentPanel" href="/User">Users</a></p>
    <p><a data-ajax="true" data-ajax-begin="OnBeginAnimateContentPanel" data-ajax-complete="OnCompleteAnimateContentPanel" data-ajax-mode="replace" data-ajax-update="#ContentPanel" href="/Group">Groups</a></p>
    <p><a data-ajax="true" data-ajax-begin="OnBeginAnimateContentPanel" data-ajax-complete="OnCompleteAnimateContentPanel" data-ajax-mode="replace" data-ajax-update="#ContentPanel" href="/Permission">Permissions</a></p>
  </div>
  <div id="ContentPanel">
    this is the text within the Index View of the MainController
  </div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:59:06.383

查看源代码时，您正在查看*最初加载*的源代码；通过 AJAX 加载的内容不会出现。但是，如果您使用 DOM 检查器，它将显示动态加载的内容。至少这是它在 Chrome 中的工作方式；我想其他浏览器是一样的。

检查 DOM 检查器，看看代码是否符合您的预期（右键单击，Chrome 和 Firefox 上的“检查元素”）。

至于设置标题，这不能用 AJAX 来完成，至少在没有一些 Javascript 帮助的情况下不能。在您的部分视图中，尝试以下 Javascript：

```
<script>
  document.title = "My New Title Here";
</script> 
```

# addclass - 如何向 jQuery 主题添加新的按钮类

> ID：10235557
> 
> 赞同：1
> 
> 时间：2012-04-19T19:41:16.063
> 
> 标签：addclass, jquery-ui-button

我是 jQuery 的新手，所以请耐心等待。我想添加一个单独的按钮类，但不能使悬停和默认值一起用于新的按钮类。ui-button-blue 是默认设置，使用蓝色渐变背景图像。ui-button-orange 是悬停并使用橙色渐变背景图像。

我可以强制新的默认蓝色按钮正确显示，方法是为我的主题的默认 ui-button 属性重置 ui-button-blue 的 css 属性——但悬停只应用边框属性（橙色）而不是新的橙色背景图像。

我可以通过将 ui 按钮重置为其主题默认值来使 ui 按钮橙色（悬停）工作。

如果将 ui 按钮设置为主题默认值，则此 css 使按钮橙色用于悬停：

```
.ui-state-hover, 
.ui-button-orange { 
    border: 1px solid #ff7f00; 
    height: 24px; 
    display: inline-block; 
    position: relative; 
    padding: 0px 0px 0px 0px; 
    margin-right: .1em; 
    text-decoration: none !important; 
    cursor: pointer; 
    text-align: center; 
    zoom: 1; 
    overflow: hidden; 
    *overflow: visible; 
    background-image: url(images/ but_01_orange.png); 
    background-repeat:repeat-x; 
    color:#fff; 
} 
```

但我不能让他们一起工作。我已经尝试了一些自定义 .js 来超越 jQuery css 和 .js，但也无法让它工作。

```
$(document).ready(function() {
    $("button").button();
    $("button").hover(
        function () {
            $(this).removeClass();
           $(this).addClass('ui-button-orange ui-widget ui-state-default ui-corner-all  ui-button-text-only ui-button-blue');//hover
        },
        function () {
            $(this).removeClass();
            $(this).addClass('ui-button-blue ui-widget ui-state-default ui-corner-all ui-button-text-only-ui-button-blue');
        }
    );
}); 
```

# javascript - 从 json 对象创建定义列表

> ID：10235560
> 
> 赞同：0
> 
> 时间：2012-04-19T19:41:25.823
> 
> 标签：javascript, json, list, structure

我尝试创建一个有效的 json-object 结构来创建一个定义列表。看看我在这里尝试做什么： [jsfiddle](http://jsfiddle.net/hoffs/DzAsa/14/)

```
var x =
[{
    "dl":
    {
        "dt":"head 1"
        {
            "dd":
            [
                "listitem 1",
                "listitem 1",
                "listitem 1",
                "listitem 1",
                "listitem 1"
            ]
        },
       "dt":"head 2"
        {
            "dd":
            [
                "listitem 2",
                "listitem 2"
            ]
        }
    }      
}]
; 
```

通过执行这个 JS 片段，我尝试从 JSON 对象创建标记：

```
$.each(x["dl"], function(i,v){
    console.log(this.dt, this.dd);
}); 
```

使用变量 x 我尝试创建以下标记：

```
<dl>
    <dt>head 1</dt>
    <dd>listitem 1</dd>
    <dd>listitem 1</dd>
    <dd>listitem 1</dd>
    <dd>listitem 1</dd>
    <dd>listitem 1</dd>

    <dt>head 2</dt>
    <dd>listitem 2</dd>
    <dd>listitem 2</dd>   
</dl>

<dl>
    <dt>head 1</dt>
    <dd>listitem 1</dd>
    <dd>listitem 1</dd>
    <dd>listitem 1</dd>
    <dd>listitem 1</dd>
    <dd>listitem 1</dd>

    <dt>head 2</dt>
    <dd>listitem 2</dd>
    <dd>listitem 2</dd>   
</dl> 
```

标记是我需要创建的。我的 JSON 结构做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T20:08:19.130

首先，这*不是*JSON。这只是一个 JavaScript 对象。JSON 是JavaScript 对象的*字符串表示形式。*

其次，您的对象不正确。你不能有多个`dt`属性，我建议把它做成一个数组。 `"dt":"head 1" {`无效。此外，`x`应该是一个对象，而不是一个（对象的）数组。

我建议让你的对象是这样的：

```
var x = {
    "dl": [{
        "dt": "head 1",
        "dd": ["listitem 1", "listitem 1", "listitem 1", "listitem 1", "listitem 1"]
    }, {
        "dt": "head 2",
        "dd": ["listitem 2", "listitem 2"]
    }]
}; 
```

`x`是一个包含`dl`属性的对象。 `x.dl`是一个包含对象的数组。这些对象包含`dt`和`dd`属性。

现在您的代码段将正常工作：

```
$.each(x["dl"], function(i,v){ // you can also use "x.dl"
    console.log(this.dt, this.dd);
}); 
```

从这个对象很容易制作你想要的 HTML。

# javascript - 无法使用 img 标签显示静态图片

> ID：10235561
> 
> 赞同：1
> 
> 时间：2012-04-19T19:41:26.603
> 
> 标签：javascript, html

我正在尝试使用 img 标签显示文件夹中的一些静态图像

首先尝试使用

```
<img border="0" src="E:\\liferaytomcat\\liferay-portal-6.1.0-ce-b4\\tomcat-7.0.22\\Uploaded Files\\1146Wj.jpeg" alt="Pulpit rock" wid`th="304" height="228" /> 
```

也试过了

```
<img border="0" src="/E:/liferaytomcat/liferay-portal-6.1.0-ce-b4/tomcat-7.0.22/Uploaded Files/1146Wj.jpeg" alt="Pulpit rock" width="304" height="228" /> 
```

也试过了

```
<img border="0" src="E:\liferaytomcat\liferay-portal-6.1.0-ce-b4\tomcat-7.0.22\Uploaded Files\1146Wj.jpeg" alt="Pulpit rock" width="304" height="228" /> 
```

但结果总是作为 alt 值（即 Pulpit rock ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:44:36.017

试试这个：

```
file:///e:/.... 
```

这是 Windows 系统上绝对路径所需的 URL 格式。

这假设 HTML 文件也来自您的文件系统，而不是远程网络服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T19:45:35.900

据微软称：

```
file:///E|/liferaytomcat/liferay-portal-6.1.0-ce-b4/tomcat-7.0.22/Uploaded Files/1146Wj.jpeg 
```

但是网站无法访问本地机器上的文件，除非该站点*由*本地机器提供服务：

> Internet Explorer 6 Service Pack 1 (SP1) 不再允许从 Internet 区域浏览本地计算机。例如，如果 Internet 站点包含指向本地文件的链接，则当用户单击该链接时，Internet Explorer 6 SP1 会显示一个空白页面。以前版本的 Windows Internet Explorer 遵循指向本地文件的链接。

参考：

*   [文件协议](http://msdn.microsoft.com/en-us/library/aa767731%28v=vs.85%29.aspx)。

# c# - 线程池 - 限制对某些方法的调用

> ID：10235562
> 
> 赞同：4
> 
> 时间：2012-04-19T19:41:30.260
> 
> 标签：c#, multithreading, c#-4.0

有没有办法告诉线程池管理器只有*x*个线程调用特定方法或方法组？

我有一个应用程序，我在整个地方都使用线程池工作线程，并且它可以流畅地工作；但是，我委托给工作线程的任务之一是 Web 服务调用，它将拒绝超过 5 个并发请求。我不想将线程池限制为 5 个线程，因为许多其他东西使用线程并且可以处理更多。

有没有办法“划分”线程池来表示“在任何时间点，你将有最多*x 个*线程在做这个特定的事情，但其余的线程可以去做其他事情”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T19:59:11.843

使用信号量将稀缺资源的访问限制为最大。5.

一个 Semaphore 可以配置为只允许 N 个线程的并发访问。您需要将 Semaphore 配置为 N=5 并让所有线程在调用 web 服务之前等待它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T19:49:43.140

创建另一个线程池和 SetMaxThreads(5) - 这是最简单的方法。

好的，你不能用 Threadpool 类来做。

就这样我没有被否决：

```
public abstract class Task {
    public EventHandler FonComplete;
    public ThreadPool myPool;
    protected int param;
    public Exception error;
    public Task(int inParam, EventHandler OnDone) { param = inParam; FonComplete = OnDone; }
    public abstract void run();
};

public class PoolThread{
private
    BlockingCollection<Task> FinQueue;
public
    PoolThread(BlockingCollection<Task> inQueue)
    {
       FinQueue=inQueue; 
    }
    Task inMess;
    public void run(){
        while(true){
            inMess=FinQueue.Take();
            if(inMess==null) return;
            try
            {
                inMess.run();
                inMess.error = null;
            }
            catch (Exception e)
            {
                inMess.error = e;
            }
            inMess.FonComplete(inMess, null);
        }
    }
};

public class ThreadPool {
    int FthreadCount;
    BlockingCollection<Task> queue;
    void startThread(){
            PoolThread thisPoolThread=new PoolThread(queue);
            Thread thisThread=new Thread(new ThreadStart(thisPoolThread.run));
            thisThread.Priority = ThreadPriority.BelowNormal;
            thisThread.IsBackground = true;
            thisThread.Start();
    }
    void SetThreadCount(int newCount){
        while(FthreadCount<newCount){startThread();};
        while(FthreadCount>newCount){
            queue.Add(default(Task));
            FthreadCount--;
        };
    }
    public ThreadPool(int initThreads){
        queue=new BlockingCollection<Task>();
        for(FthreadCount=0;FthreadCount<initThreads;FthreadCount++) startThread();
    }
    public int threadCount{
        get{return FthreadCount;}
        set
        {
            while (FthreadCount < value) {
                startThread();
                FthreadCount++;
            };
            while (FthreadCount > value)
            {
                queue.Add(default(Task));
                FthreadCount--;
            }
        }
    }

    public void submit(Task task){
        task.myPool=this;
        queue.Add(task);
    }
};

} 
```

它不像'真正的' System.Threading.Threadpool，但它是一个具有固定数量线程的线程池

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T19:45:48.290

您可以使用多个线程池。拥有最多 5 个线程的线程池 A 用于对您的 Web 服务的请求，而线程池 B 具有更高的最大值用于其他一切。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T20:58:24.283

首先，使用`Task`类而不是`ThreadPool`直接使用。启动一个父任务，该任务循环遍历您的每个工作项并启动一个子任务。父任务将使用信号量来限制并发子任务的数量。

这比让您的子任务在信号量上等待要好得多，因为现在我们只有一个池线程在等待信号量而不是很多。

```
var parent = Task.Factory.StartNew(
  () =>
  {
    var semaphore = new SemaphoreSlim(5, 5);
    foreach (var workitem in YourWorkItems)
    {
      var capture = workitem;
      semaphore.Wait();
      Task.Factory.StartNew(
        () =>
        {
          try
          {
            CallWebService(capture);
          }
          finally
          {
            semaphore.Release();
          }
        }, TaskCreationOptions.AttachedToParent);
    }
  }, TaskCreationOptions.LongRunning);

// Optionally wait for the parent to complete here.
// Because our child tasks are attached this will wait until everything is done.
parent.Wait(); 
```

# php - (htaccess) 如何使文件只能由主机服务器访问并防止直接访问？

> ID：10235563
> 
> 赞同：4
> 
> 时间：2012-04-19T19:41:39.633
> 
> 标签：php, apache, .htaccess, mod-rewrite, hotlinking

我正在使用 Apache，假设“images/sample.jpg”中有一个文件。

*   使用**.htaccess**，我怎样才能让它**出现**在网站上，**然后防止**通过 url 直接访问（*例如，直接 url，如“http://www.abc.com/images/sample.jpg”*）？

*   如果可能的话，我还希望解决方案影响“.htaccess”文件下的所有子文件夹。

*附加说明：
在得到以下答案一天后，我发现所有解决方案在逻辑上都有效，但 Firefox 存在问题。我的意思是，下面的答案在每个浏览器上进行测试时给出了解决方案，但在 Firefox 上没有。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T19:46:55.017

这被称为“热链接”——我建议先阅读它，因为它不仅仅是一行或 .htaccess 中的代码。这个页面很不错：[http ://altlab.com/htaccess_tutorial.html](http://altlab.com/htaccess_tutorial.html)

```
RewriteEngine On
RewriteCond %{HTTP_REFERER} !^http://(.+\.)?mysite\.com/ [NC]
RewriteCond %{HTTP_REFERER} !^$
RewriteRule .*\.(jpe?g|gif|bmp|png)$ http://i.imgur.com/qX4w7.gif [L] 
```

这将显示来自 imgur 的图像，但是我有时喜欢更进一步并托管来自我自己的主机的替代图像 - 例如，如果它是竞争对手，你可以有很多乐趣；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T19:50:09.033

使用这段代码来防止盗链：

```
RewriteEngine on 
RewriteCond %{HTTP_REFERER} !^http://(www\.)?mydomain.com [NC] 
RewriteCond %{HTTP_REFERER} !^http://(www\.)?mydomain.com.*$ [NC] 
RewriteRule \.(gif|jpg)$ - [F] 
```

这可以帮助你：[http ://www.selfseo.com/story-18469.php](http://www.selfseo.com/story-18469.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T19:50:55.873

不完全确定，但这应该可以指导您：

```
RewriteEngine on
RewriteCond %{HTTP_REFERER} !^http://(.+\.)?mysite\.com/ [NC]
RewriteRule (images/sample.jpg)$ - [R=404,L] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T20:47:37.467

与 .htaccess 规则相比，防止图像盗链的措施还有很多。但是，您希望在 htaccess 中防止图像盗链的基础是：

```
RewriteCond %{HTTP_REFERER} !^http://(www\.)?example.com/.*$      [NC]
RewriteRule .*\.(jpg|jpeg|png|bmp)$ - [F,NC] 
```

[Apache 重写指南](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-19T20:47:54.527

根据您的评论，这就是您所需要的：

```
RewriteCond %{HTTP_REFERER} !^http://(www\.)?localhost/ [NC] 
RewriteRule \.(jpe?g|gif|bmp|png)$ - [F,NC] 
```

我已经在我的本地主机上对其进行了测试，它似乎工作正常。

# database - 如果表只有 1 个主键，那么数据库是否默认为 2NF？

> ID：10235566
> 
> 赞同：1
> 
> 时间：2012-04-19T19:41:51.180
> 
> 标签：database, primary-key, database-normalization, relational

即有一个表只有一个主键（没有复合键）。默认是2NF吗？假设已经是1NF

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:08:44.240

[http://en.wikipedia.org/wiki/Second_normal_form](http://en.wikipedia.org/wiki/Second_normal_form)

在您的示例中，PatNo 不是主键，因为 PatNo 可能会看到不止一位医生，或者有多个 appNo。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T18:44:39.640

我想现在明白了。

在我的示例中，如果有超过 1 位医生，那么医生也部分取决于患者编号，因为医生必须看到正确的患者。这只是令人困惑，因为医生也通过 appNo 传递依赖于 patNo。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-07T01:41:37.193

也许这个迟到的回应可能对其他人有帮助。我们被教导（可能是错误地）不相关的数据也属于 2NF。所以`animal(phylum, class, order, family, genus, species, greek_phoneme)`不会出现在 2NF 中，因为希腊音素与 Animals 无关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T20:25:14.230

松散地说，一个表在 2NF 中当且仅当它是

*   在 1NF 中，并且
*   没有部分关键依赖关系。

这与说具有单列主键的表在 2NF 中并不完全相同。像这样的表

```
person_id  full_name       phones
--
-43        Ericka Cimini   555-222-1515
                           555-232-6100
-18        Julio Martina   555-123-4567 
```

有一个单列主键（“person_id”），但它不在 1NF 中。（有关详细信息，请参阅[维基百科](http://en.wikipedia.org/wiki/First_normal_form#Repeating_groups)。）由于它不在 1NF 中，它不可能在 2NF 中。

# c# - C# 对象空检查

> ID：10235570
> 
> 赞同：8
> 
> 时间：2012-04-19T19:42:05.307
> 
> 标签：c#, asp.net, .net, sql, datareader

我使用 DataReader 读取我的数据库。

并且某些行没有 fdate 值。

所以当我将空日期转换为 DateTime 时，就会发生错误。

如何检查该字段是否为空？

```
AdsCommand cmd = conn.CreateCommand();
cmd.CommandText = "select name,fdate from abc";

AdsDataReader reader = cmd.ExecuteReader();

DateTime flsdate = (reader["fdate"].Equals(null))? Convert.ToDateTime(reader["fdate"]) : DateTime.Today; 
```

我尝试使用 Equals，但它不起作用。

有人知道如何检查空对象以避免转换错误吗？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-19T19:45:35.750

正如每个人都向您指出了如何解决该问题，我正在尝试为您提供有关 NULL 和 DBNull 之间有什么区别的信息。

*   `null`和 DBNull 不同。

*   `null`不是任何类型的实例。DBNull 是具有一个实例的单例类：`DBNull.Value`.

*   `null`表示无效引用，其中 as`DBNull.Value`表示 DB 中不存在的值。

*   `DBNull.Value`是 db 提供程序为表中不存在的值提供的内容。

在这种背景下`(reader["fdate"].Equals(null))`，在这里使用是不正确的。你必须用`DBNull.Value`. 如果它是 type `DBNull`，或者如果它等于`DBNull.Value`，则分配您喜欢的任何值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-19T19:44:02.207

使用 DbNull：

[http://forums.asp.net/t/1383849.aspx/1](http://forums.asp.net/t/1383849.aspx/1)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-19T19:54:32.183

在这种情况下，我喜欢使用引用类型（varchar 的字符串）或 Nullable 包装值类型（DateTime？）来表示可空数据库列。这样，您就可以更准确地表示程序中的数据库模式。

这也允许您使用以下格式更清晰地编写转换逻辑：

```
DateTime? fdate = datareader["fdate"] as DateTime?; 
```

如果 datareader 结果是 DbNull 并且 fdate 将设置为默认值（DateTime？），则此转换将失败，即为空。此时，您可以通过检查可空类型是否有值 (fdate.HasValue) 来获得您真正想要的值，如果没有，则使用您的默认值 - DateTime.Today。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-19T19:43:27.403

```
DateTime flsdate = reader["fdate"].Equals(DBNull.Value)
    ? Convert.ToDateTime(reader["fdate"])
    : DateTime.Today; 
```

但是将日期默认为`Today`. 我会这样做：

```
DateTime? flsdate = reader["fdate"].Equals(DBNull.Value)
    ? Convert.ToDateTime(reader["fdate"])
    : (DateTime?)null; 
```

此外，如果列的底层 tpe`fdate`已经是 DateTime，则不要使用 System.Convert：

```
DateTime? flsdate = reader["fdate"].Equals(DBNull.Value)
    ? (DateTime?)reader["fdate"])
    : null; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-19T19:43:31.523

尝试以下操作：

```
DateTime flsdate = reader["fdate"] != null && reader["fdate"] != System.DbNull.Value
    ? DateTime.ParseExact(reader["fdate"]) 
    : DateTime.Today; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-19T19:45:55.000

```
DateTime flsdate = DateTime.Today;
if(reader["fdate"] != null)
    flsdate = Convert.ToDateTime(reader["fdate"]) 
```

# c# - c# 数据库错误

> ID：10235577
> 
> 赞同：1
> 
> 时间：2012-04-19T19:42:31.007
> 
> 标签：c#, database, sql-server-express

```
SqlConnection con = new SqlConnection(@"Server=.\SQLEXPRESS;AttachDbFilename='C:\HashTags.mdf';Integrated Security=True;User Instance=True");

con.Open();
String queryStr = "SELECT name FROM ttable WHERE name LIKE '*%'";
SqlCommand com = new SqlCommand(queryStr, con);
SqlDataReader sdr = com.ExecuteReader();

while (sdr.Read())
{
    this.trendingBx.Text = sdr.GetValue(0).ToString();
}

sdr.Close(); 
```

谁能告诉我为什么会出现此错误：

> 存在同名数据库，或无法打开指定文件，或位于 UNC 共享上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:51:00.763

您确定数据库尚未附加吗？如果是，您应该使用：

```
Data Source=.\SQLEXPRESS;Database=your database name;Integrated Security=SSPI 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T19:47:28.337

假设您已经检查过“指定的文件无法打开，或者它位于 UNC 共享上”`.mdf`并且该位置确实存在，我认为您不需要在连接字符串中使用引号：

```
AttachDbFilename='C:\HashTags.mdf' 
```

应该：

```
AttachDbFilename=C:\HashTags.mdf (no single quotes) 
```

这应该适用于国际海事组织。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T19:47:33.313

你应该使用：

```
Integrated Security=SSPI 
```

**不是**

```
Integrated Security=True 
```

在您的连接字符串中。

# python - 502 Bad Gateway 使用 Beautiful Soup、Python/Django

> ID：10235579
> 
> 赞同：1
> 
> 时间：2012-04-19T19:42:36.390
> 
> 标签：python, django, beautifulsoup

Beautiful Soup 使用 Django 在 Python shell 中工作。我也可以成功导入`from bs4 import BeautifulSoup`views.py，但是当我调用类似的东西时`soup = BeautifulSoup(xml)`，我得到一个502 Bad Gateway错误。我和我的主人谈过，他们找不到问题。有任何想法吗？

请注意 xml 是`xml = urllib2.urlopen("http://isbndb.com/api/books.xml?access_key=000000&results=details&index1=isbn&value1=0000").read()`，但它可以在 Python shell（在 myproject 文件夹中）中工作，所以我认为这不是问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T01:46:58.620

[这听起来像是在此处](https://techknowhow.library.emory.edu/blogs/branker/2010/07/30/django-lxml-wsgi-and-python-sub-interpreter-magic)描述的 Cython 和 mod_wsgi 之间的交互，并在[此处](https://bugs.launchpad.net/beautifulsoup/+bug/948577)在 Beautiful Soup 上下文中进行了探索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T19:46:01.970

尝试将该 URL 复制并粘贴到浏览器中。我收到访问密钥错误；解决这个问题，你的问题就解决了。

# ruby - 参考没有模块名称的 ruby 类

> ID：10235582
> 
> 赞同：6
> 
> 时间：2012-04-19T19:42:44.560
> 
> 标签：ruby

ruby 有没有办法加载包含许多类的模块，并且能够访问这些类而不用模块名称作为前缀？考虑 foo.rb 和 bar.rb：

foo.rb：

```
require 'bar'
bar = BarModule::Bar.new() 
```

bar.rb

```
module BarModule
  class Bar
  end
end 
```

基本上，我希望能够从 foo.rb 中引用类“Bar”，而无需在每次引用它时都指定它的模块。用 java 术语来说，我正在寻找类似于：

```
import BarModule.*; 
```

有这样的东西存在吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T19:46:23.003

模块可以相互混合。要将 BarModule 用作 mixin，您需要`include BarModule`.

# javascript - NodeJs 以字节为单位获取变量的大小

> ID：10235583
> 
> 赞同：5
> 
> 时间：2012-04-19T19:43:11.767
> 
> 标签：javascript, node.js, readfile

我有一个变量“img”，它是一个已通过以下方式加载的图像文件：

```
var img = fs.readFileSync('./tmp.png'); 
```

如何确定“img”变量的字节数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T19:48:41.270

就像`img`是一个缓冲区，你可以简单地使用`img.length`，它会给你八位字节的大小（8位字节）

# java - Android App需要很长时间才能加载

> ID：10235584
> 
> 赞同：-2
> 
> 时间：2012-04-19T19:43:15.393
> 
> 标签：java, android

我正在使用下面的代码连接到 wifi。当应用程序加载时，它只显示黑屏，然后按钮将显示与 wifi 断开连接。有没有办法让按钮立即可见？还有一种方法可以显示应用程序加载的进度，这样用户就不会认为它挂了？

```
import java.util.List;

import android.app.Activity;
import android.os.Bundle;
import android.content.Context;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.net.wifi.WifiConfiguration;
import android.net.wifi.WifiManager;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;

import android.widget.Button;
import android.widget.TextView;

public class TestActivity extends Activity {
/** Called when the activity is first created. 
 * @return */

@Override
public void onCreate(Bundle savedInstanceState) {    
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);
    Button OffWifi = (Button)findViewById(R.id.offwifi);
    OffWifi.setOnClickListener(new OnClickListener() { 
      public void onClick(View v) {                 
          WifiManager wifiManager = (WifiManager)getBaseContext().getSystemService(Context.WIFI_SERVICE);
            wifiManager.setWifiEnabled(false);          
          }        
      });

    TextView tv = new TextView(this);       
    TextView status = new TextView(this);                  

    WifiManager wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE); 
    WifiConfiguration wc = new WifiConfiguration();  
    wc.SSID = "\"Test\""; //IMP! This should be in Quotes!! 

    wc.hiddenSSID = true; 
    wc.status = WifiConfiguration.Status.ENABLED;      
    wc.priority = 10; 
    wc.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.WPA_PSK); 
    wc.allowedProtocols.set(WifiConfiguration.Protocol.RSN);  
    wc.allowedProtocols.set(WifiConfiguration.Protocol.WPA); 
    wc.allowedAuthAlgorithms.set(WifiConfiguration.AuthAlgorithm.OPEN); 
    wc.allowedAuthAlgorithms.set(WifiConfiguration.AuthAlgorithm.SHARED); 
    wc.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.CCMP); 
    wc.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.TKIP); 
    wc.preSharedKey = "\"Password\""; 
    WifiManager  wifiManag = (WifiManager) this.getSystemService(WIFI_SERVICE); 
    boolean res1 = wifiManag.setWifiEnabled(true); 
    int res = wifi.addNetwork(checkPreviousConfiguration(wc)); 
    Log.d("WifiPreference", "add Network returned " + res ); 
    boolean es = wifi.saveConfiguration(); 
    Log.d("WifiPreference", "saveConfiguration returned " + es ); 
    boolean b = wifi.enableNetwork(res, true);    
    Log.d("WifiPreference", "enableNetwork returned " + b );   

    tv.setText("You are now connected!  " +
            "Version 1.1");

    status.setText("The was an error connecting, please try again.");

       //@Override

    try {

        Thread.sleep(5000);

         ConnectivityManager connec = (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE); 

         if (connec != null && (connec.getNetworkInfo(1).getState() == NetworkInfo.State.CONNECTED) ||(connec.getNetworkInfo(0).getState() == NetworkInfo.State.CONNECTED)){  
                //You are connected, do something online. 
                setContentView(tv);

            }else if (connec.getNetworkInfo(0).getState() == NetworkInfo.State.DISCONNECTED ||  connec.getNetworkInfo(1).getState() == NetworkInfo.State.DISCONNECTED ) {              
                //Not connected.         
               setContentView(status);
            }  

    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

public WifiConfiguration checkPreviousConfiguration(WifiConfiguration wc) {
WifiManager wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE); 
 List<WifiConfiguration> configs = wifi.getConfiguredNetworks();     
    for(WifiConfiguration config : configs) {         
        if(config.SSID.equals(wc.SSID)) return config;     
        }     
    return wc; 
    } 

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T19:50:25.920

我想这`Thread.sleep(5000)`是延迟的原因。

基本上，您是在告诉应用程序停止 5 秒钟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T20:17:15.810

如上所述，它是导致延迟的 Thread.sleep(5000) 。因为 OnCreate 是从 UI 线程调用的，所以整个事情都暂停了。如果您创建一个可运行对象，然后在新线程的实例中使用它，您可以在不阻塞 UI 线程的情况下随时调用 sleep()。这是许多“XXX 没有响应”错误的主要原因。或者，如果您不想进入线程，请查看 Android 提供的 ASyncTask。

编辑：

如果您只想显示一条消息，那么 Toast 是最好的选择。从另一个线程访问 UI 有点麻烦，但并非不可能。一种方法是将整个 try 块打包成一个可运行文件，如下所示：

```
Runnable r = new Runnable(){
    @Override
    public void run(){
            try {

                Thread.sleep(5000);

                ConnectivityManager connec =(ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE); 

                if (connec != null && (connec.getNetworkInfo(1).getState() == NetworkInfo.State.CONNECTED) ||(connec.getNetworkInfo(0).getState() == NetworkInfo.State.CONNECTED)){  
                    //You are connected, do something online. 
                    //Have to edit the UI on the UI thread
                    Runnable tempRun = new Runnable(){
                        @Override
                        public void run(){
                            setContentView(tv);
                        }
                    }
                    runOnUiThread(r);
                }else if (connec.getNetworkInfo(0).getState() == NetworkInfo.State.DISCONNECTED ||  connec.getNetworkInfo(1).getState() == NetworkInfo.State.DISCONNECTED ) {              
                    //Not connected. 
                    //NEEDS TO BE SAME AS ABOVE.        
                    setContentView(status);
                }  

           } catch (InterruptedException e) {
               // TODO Auto-generated catch block
               e.printStackTrace();
           }
     }
} 
```

然后你可以调用`Thread t = new Thread(r);`and `t.start();`。我没有测试过，但我很确定那是准确的。setContentView 调用将更改整个布局，这可能不是您想要的，但超出了这个问题的范围。

# labview - LabVIEW中Zaber设备的错误处理

> ID：10235591
> 
> 赞同：1
> 
> 时间：2012-04-19T19:43:30.487
> 
> 标签：labview, motion, zaber

在编写LabVIEW VI来控制Zaber设备进行长时间测试时，它能否从错误中恢复并继续测试，同时在字段中显示错误文本？VI 使用[Zaber LabVIEW 驱动程序](http://www.zaber.com/wiki/Software/Labview_Driver)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:43:41.937

National Instruments 网站上有[一篇关于处理错误的文章。](http://www.ni.com/gettingstarted/labviewbasics/handlingerrors.htm)基本技术是将每个 VI 的错误输出连接到下一个 VI 的输入。任何在其输入行上发现错误的 VI 都应跳过其函数并传递错误。

要从错误中恢复，您只需清除错误行并继续您的常规程序。当然，您可能想要检查错误代码以确保它是您想要从中恢复的代码，并且您可能想要将错误记录在日志或其他内容中。您可能还希望执行一些逻辑以将 Zaber 设备移回其起始位置和设置。

在[我们网站的这个示例中](http://www.zaber.com/software/LabVIEWErrorHandling.zip)，基本例程是继续执行 MoveRelative 命令来扩展设备。显然，它最终会用完空间并返回错误。发生错误时，错误消息会显示在一个字段中，并且设备会移回位置 0，在此基本例程可以重新开始。

![LabVIEW错误处理](../Images/8d17f86862888a9547824d0be3d981c6.png)

# c++ - 按 myvector[i][0] 对向量进行排序

> ID：10235597
> 
> 赞同：1
> 
> 时间：2012-04-19T19:43:46.030
> 
> 标签：c++, algorithm

我有一个向量的向量，如下所示：

```
vector< vector<int> > intervals; 
```

基本上，我需要使用 STL 的 sort () 对向量进行排序，但我需要对间隔 [i] [0] 进行排序。因此，按每个对象的 [0] 元素对向量对象进行排序。

我怎样才能做到这一点？先感谢您。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T19:47:23.947

[std::sort](http://en.cppreference.com/w/cpp/algorithm/sort)将 object 的比较器函数作为第三个参数，因此您可以定义一个小于运算符，该运算符接受两个向量并比较它们的第一个元素。

```
bool foo(const std::vector<int>& a, const std::vector<int>& b) {
  // in real life you may want to check vectors aren't empty.
  // in real life you wouldn't call this foo either.
  return a[0]<b[0];
}

int main() {
  std::vector<std::vector<int>> v = ...;
  std::sort(v.begin(), v.end(), foo);
} 
```

# powershell - 使用 Powershell 复制时跳过隐藏文件

> ID：10235600
> 
> 赞同：4
> 
> 时间：2012-04-19T19:43:49.600
> 
> 标签：powershell

这是我目前的剧本...

```
copy '.\Alfresco Development Config Files\*' C:\Alfresco\tomcat\shared\classes -rec -force 
```

我将如何改变这样隐藏的文件被跳过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:34:33.790

如果您不反对使用本机命令，那么

```
robocopy '.\Alfresco Development Config Files' C:\Alfresco\tomcat\shared\classes /s /XA:H 
```

（可能需要为源提供完整路径，因为当前 PowerShell 目录和进程的当前工作目录不是一回事（在一般情况下也不能））。

修复以前的 PowerShell 变体可能是可能的，但很麻烦。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-19T20:33:28.357

可能有更简洁的方法，但也许这会有所帮助：

```
$NonHiddenObjects = Compare -IncludeEqual `
 -Diff (Dir ".\Alfresco Development Config Files\" -Rec -Force | Select -Exp FullName) `
 -Ref  (Dir ".\Alfresco Development Config Files\" -Rec | Select -Exp FullName) `
 | ?{$_.SideIndicator -eq "=="} `
 | Select -Exp InputObject

copy $NonHiddenObjects C:\Alfresco\tomcat\shared\classes -force 
```

# sphinx - Sphinx MVA 中的错误查询

> ID：10235608
> 
> 赞同：0
> 
> 时间：2012-04-19T19:44:10.020
> 
> 标签：sphinx

我有带有应用程序表的 mysql 数据库。每个应用程序可以有一个或多个开发人员，因此在 Sphinx 中我想创建多值属性以通过开发人员 ID 搜索应用程序，我尝试以这种方式创建属性：

sql_attr_multi = 来自查询的 uint 开发人员；\ SELECT id, name FROM apps_developers WHERE app_id = $id

但是当我尝试构建索引 sphinx 服务器时告诉我错误：

错误：索引“应用程序”：多值属性“开发者”查询失败：“where 子句”中的未知列“$id”。

在我看来 $id 必须包含来自源查询的每个应用程序的 id 值？我是对的吗？为什么会发生这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:41:28.417

MVA 查询应返回所有应用程序的结果（即结果集中的第一列，与 document_id 匹配）

```
sql_attr_multi = uint developers from query; \
   SELECT app_id, id FROM apps_developers ORDER BY app_id 
```

# php - MySQL将数字列加一

> ID：10235610
> 
> 赞同：2
> 
> 时间：2012-04-19T19:44:22.957
> 
> 标签：php, mysql

在我的 PHP 代码中，我有以下 SQL 语句：

$query = "更新用户 SET num_logins = num_logins+1, last_login='$timeStamp' WHERE id = $id";

我最近为项目管理员实现了 num_logins 列，这样他就可以看到经常使用的用户是谁。看起来它大部分时间都在工作，但是，我注意到两个用户的 num_logins = 0 并且 last_login 字段中的时间戳值在我实施更改的日期之后。

num_logins 列的默认值为零，因此，如果他们成功登录，并且上述查询是唯一更新其 last_login 字段的查询，那么当他们的 last_login 字段已更新时，num_logins 仍然为零（这两个字段都没有在任何地方更新） else 在代码中，我是唯一的数据库管理员）？

引擎=InnoDB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:48:59.830

需要考虑的一些场景：

1.  您确定 $id 在更新查询中正确匹配吗？也许记录没有被更新。
2.  您确定 num_logins 的所有值都不为空吗？该列是否可以为空？默认值可能为 0，但您应该检查以确保没有任何空值。请记住，null + any 始终为 null。
3.  您确定查询实际上是在您的代码中执行的吗？您可以添加一些工具（例如日志记录）来确保这一点吗？也许查询并未在所有情况下都运行。

# asp.net - 交易明细中的 Paypal 数量错误

> ID：10235611
> 
> 赞同：1
> 
> 时间：2012-04-19T19:44:25.967
> 
> 标签：asp.net, vb.net, paypal

当用户从我的网站转到贝宝页面时，订单会出现：

```
quantity 2
price 20$
Total 40$ 
```

而在交易详情中的贝宝账户中，出现的是：

```
quantity 1
price 40$
total 40$ 
```

我如何解决这个问题以在贝宝帐户中有数量 2？我正在使用 Paypal api 设置快速结帐：

```
 Dim caller As New CallerServices
        Dim profile As IAPIProfile = ProfileFactory.createSignatureAPIProfile()
        '
        '            WARNING: Do not embed plaintext credentials in your application code.
        '            Doing so is insecure and against best practices.
        '            Your API credentials must be handled securely. Please consider
        '            encrypting them for use in any production environment, and ensure
        '            that only authorized individuals may view or modify them.
        '            
        ' Set up your API credentials, PayPal end point, and API version.
        profile.APIUsername = AppSettings("APIUsername")
        profile.APIPassword = AppSettings("APIPassword")
        profile.APISignature = AppSettings("APISignature")
        profile.Environment = AppSettings("Environment")
        caller.APIProfile = profile
        ' Create the request object.
        Dim pp_request As New SetExpressCheckoutRequestType()
        pp_request.Version = AppSettings("APIVersion")
        ' Add request-specific fields to the request.
        ' Create the request details object.
        pp_request.SetExpressCheckoutRequestDetails = New SetExpressCheckoutRequestDetailsType()
        pp_request.SetExpressCheckoutRequestDetails.PaymentAction = paymentAction
        pp_request.SetExpressCheckoutRequestDetails.PageStyle = color
        'Enum for PaymentAction is  PaymentActionCodeType.Sale
        pp_request.SetExpressCheckoutRequestDetails.PaymentActionSpecified = True
        pp_request.SetExpressCheckoutRequestDetails.OrderDescription = type
        pp_request.SetExpressCheckoutRequestDetails.PaymentDetails = New PaymentDetailsType()
        pp_request.SetExpressCheckoutRequestDetails.PaymentDetails.Custom = DateTime.Now.ToLongTimeString
        Dim items(1) As PaymentDetailsItemType
        Dim item1 As PaymentDetailsItemType = New PaymentDetailsItemType
        item1.Name = dealName
        item1.Number = OfferID
        item1.Amount = New BasicAmountType()
        item1.Amount.Value = price

        item1.Amount.currencyID = currencyCodeType
        item1.Quantity = qnt
        items(0) = item1
        pp_request.SetExpressCheckoutRequestDetails.PaymentDetails.PaymentDetailsItem = items
        pp_request.SetExpressCheckoutRequestDetails.OrderTotal = New BasicAmountType()
        pp_request.SetExpressCheckoutRequestDetails.OrderTotal.currencyID = currencyCodeType
        'Enum for currency code is  CurrencyCodeType.USD
        pp_request.SetExpressCheckoutRequestDetails.OrderTotal.Value = paymentAmount
        pp_request.SetExpressCheckoutRequestDetails.CancelURL = cancelURL
        pp_request.SetExpressCheckoutRequestDetails.ReturnURL = returnURL
        '' Execute the API operation and obtain the response.
        Dim pp_response As New SetExpressCheckoutResponseType()
        pp_response = DirectCast(caller.[Call]("SetExpressCheckout", pp_request), SetExpressCheckoutResponseType)
        token = pp_response.Token
        resp = pp_response
        Return pp_response.Ack
    End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:31:50.363

可用于快速结账的唯一折扣选项是运费折扣，但您可以将负值商品作为折扣传递。我在下面有一个例子：

```
VERSION = 84.0
METHOD = SetExpressCheckout
RETURNURL = test/index.php?action=ECreturn
CANCELURL = test/index.php?action=ECcancel
PAYMENTREQUEST_0_AMT = 0.99
PAYMENTACTION = Sale
L_PAYMENTREQUEST_0_NAME0 = Test
L_PAYMENTREQUEST_0_DESC0 = Test
L_PAYMENTREQUEST_0_AMT0 = 1.00
L_PAYMENTREQUEST_0_NUMBER0 =11111
L_PAYMENTREQUEST_0_QTY1 =1
L_PAYMENTREQUEST_0_NAME1 = Discount item
L_PAYMENTREQUEST_0_DESC1 = DIscount
L_PAYMENTREQUEST_0_AMT1 = -0.01
L_PAYMENTREQUEST_0_NUMBER1 =22222
L_PAYMENTREQUEST_0_QTY1 =1 
```

# jquery - 获取 HTML 元素的高度 jQuery

> ID：10235620
> 
> 赞同：2
> 
> 时间：2012-04-19T19:44:51.007
> 
> 标签：jquery, html, height

我为我的应用程序创建了一个漂亮的小模态消息窗口，但我似乎无法找到注入叠加层的容器的高度。

```
function load_shipping_message (title, message) {
   var left = (($(window).width() / 2) - 300) + 'px';
   var height = $(document).height();
   var overlay = $('<div id="overlay" style="display:none;height:'+height+'px;"></div>').appendTo($('body'));
   var atc = $('<div class="atc-container" style="width:600px;"></div>').appendTo($('#overlay'));
   var mess = $('<div class="atc-msg"><div class="success">'+title+'</div><p>'+message+'</p><p class="clearfix"><a class="button" style="float:right;"><span>Close</span></p></div>');
   atc.html(mess);
   var top = (($(window).height() / 2) - (atc.height() / 2)) + 'px';
   atc.css ({
      'top': top,
      'left': left  
   });
   overlay.fadeIn('slow', function () {
      overlay.click (function() {
         overlay.fadeOut ('slow', function () {
            overlay.remove();   
         });    
      });
   });
} 
```

在上面的 atc.height() 的值总是返回 0，即使它包含内容。

除此之外，它还可以完美地工作，它只是将消息框的顶部设置为视口的中点，因为 atc.height() 始终为零。只是想正确居中，框的高度明显不同，具体取决于内容的长度。

也许是因为覆盖是隐藏的？

谢谢。

-文斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:50:44.703

是的，如果它的父级被隐藏，它将显示 0。尝试将覆盖移出用户视图，margin-top: -10000px 或类似的东西而不是显示 none，以便 DOM 仍在渲染它，即使用户可以没看到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T19:54:32.640

如果一个元素有`display:none`，它及其所有后代的高度（和宽度）将为零。

要解决此问题，请执行以下操作：

```
set display to block
get height
set display back to none 
```

由于 JS 会阻止页面重绘，因此在测量高度时用户永远不会看到正在显示的元素。

# php - 比较 PHP/Javascript 中的时间戳

> ID：10235621
> 
> 赞同：1
> 
> 时间：2012-04-19T19:44:53.470
> 
> 标签：php, javascript, xml, timestamp

我正在开发一个基于 Web 的应用程序，用于检查服务器上的更新并通知用户是否有任何更新。这是 push 方法的替代方法；应用程序中的后台进程每小时检查一次 PHP 文件，以查看 MySQL 数据库中是否有新添加。如果有它会在主屏幕上通知用户。

我遇到问题的部分是比较时间戳。我保留了`"lastUpdate"`告诉手机最后一次访问 JavaScript 文件中本地存储中的 PHP 文件的变量。每次电话连接时，它都会将变量传递到上次连接的时间，如果数据库中有任何新条目的时间戳大于上次更新的时间戳，则通知计数将增加。

PHP：

```
$lastUpdate = $_GET["q"];
//connect to server

mysql_select_db("dbr", $con);
$sql="SELECT * FROM notification";
$result = mysql_query($sql);

$updateCount = 0;
if ($lastUpdate == "1970-01-01 01:00:00")
{  $compareTime = time();}
else
{  $compareTime = intval($lastUpdate); }

while($row = mysql_fetch_array($result))
{
    $rowTime = strtotime($row['timeAdded']);
    if ($rowTime >= $compareTime) 
    {   
        $updateCount++;
    }
}
echo json_encode( array('lastUpdate' => $compareTime, 'numUpdates' => $updateCount,     'passedValue' => $compareTime) ); 
```

JavaScript：

```
var timedLoop;
var timer_is_on=0;
localStorage.lastUpdate = "1970-01-01 01:00:00";
localStorage.numUpdates = 0;
localStorage.passedValue = ""; //used it for debugging

function timedCount()
{
    document.getElementById('testContent').innerHTML = "lastUpdate: " + localStorage.lastUpdate;
    document.getElementById('testContent2').innerHTML = "numUpdates: " + localStorage.numUpdates;
    document.getElementById('testContent3').innerHTML = "passedValue: " + localStorage.passedValue;

    contactServer(localStorage.lastUpdate);
    if(Number(localStorage.numUpdates)>0)
    {       
        alert("NOTIFICATIONS AVAILABLE");
        notifyUser();
        localStorage.numUpdates = 0;
    }
    document.getElementById('txt').value=new Date();
    timedLoop=setTimeout("timedCount()",10000);
}

function contactServer(update)
{
    if (window.XMLHttpRequest){ xmlhttp=new XMLHttpRequest();}
    else{xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");}

    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            var result = JSON.parse(xmlhttp.responseText);
            localStorage["lastUpdate"] = result["lastUpdate"];
            localStorage["numUpdates"] = result["numUpdates"];
            localStorage["passedValue"] = result["passedValue"];
        }
    }
    xmlhttp.open("GET","address.php?q="+update,true);
    xmlhttp.send();
} 
```

问题是它不适合我。我对此很陌生，所以我不确定我是否做得正确。函数 timedCount() 通过“onload”加载到主体中，因此它在开始时运行，在这种情况下每 10 秒运行一次。但时间戳值在前两个循环后停止变化。如果我尝试稍微更改代码，我会得到完全出乎意料的结果。我已经有一段时间了，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T22:44:30.577

1）您开始`localStorage.lastUpdate = "1970-01-01 01:00:00";`并将该值作为名为 的 GET 参数发送到服务器`q`。

2）这第一次匹配您的 if 语句并被`$compareTime = time();`执行。此值（当前时间戳）作为`lastUpdate`JSON 属性返回给 JavaScript。

3) 在 JavaScript 中，您选择该值并运行`localStorage["lastUpdate"] = result["lastUpdate"];`以保存它。十秒钟过去了，您发出另一个请求，现在使用以前的时间戳作为`q`参数。

4) 你的 PHP 的 else 语句启动并将给定的 -- 前一个 -- 时间戳分配给 `$compareTime 变量。因此，您在接下来的 while 循环中再次使用相同的数据。

简单地返回`'lastUpdate' => time()`那个 json_encode() 就可以了。否则它将继续一遍又一遍地请求相同的时间。

但是我很好奇你如何混合这些格式。time() 给出了一个实际的时间图，如 1335048166，它与“1970-01-01 01:00:00”的格式完全不同。如果您在数据库中也有时间戳，我建议您在整个应用程序中坚持使用这种格式。

# soundcloud - SoundCloud 组记录器小部件返回的信息

> ID：10235622
> 
> 赞同：-1
> 
> 时间：2012-04-19T19:44:59.617
> 
> 标签：soundcloud

我在这里 (http://grouprecorder.soundcloudlabs.com) 看到了 SoundCloud 组录音小部件，它看起来很棒。我想知道一旦用户完成上传，小部件是否会返回轨道的 ID。我之所以这样问，是因为我想将小部件放在一个更大的表单中，其中包含图片、文本等字段，然后将用户上传的 Soundcloud 曲目与存储在我网站数据库中的其他字段相关联。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T23:30:18.370

小部件本身不会提供对 id 的访问。但是您可以使用它的源代码作为基础来为自己构建自定义版本：

[https://github.com/soundcloudlabs/soundcloud-group-recorder](https://github.com/soundcloudlabs/soundcloud-group-recorder)

SC.recordUpload 回调将包含完整的轨道对象，包括它的 id。

# apache-flex - flex 移动应用程序中的软键盘屏幕不平移

> ID：10235626
> 
> 赞同：1
> 
> 时间：2012-04-19T19:45:30.320
> 
> 标签：apache-flex, air, soft-keyboard

我创建了一个使用 softKeyboardBehavior“pan”的 flex 移动应用程序，该应用程序到目前为止运行良好。我注意到在 Android 设备上，软键盘在大多数情况下都可以很好地平移屏幕。不过，在一个视图中，我有一个 List，它在每个项目渲染器中都包含一个 TextArea。当我在这些 TextAreas 中编辑文本时，软键盘不会向上平移屏幕，这会隐藏在屏幕下半部分的项目渲染器中键入的文本。这种缺乏平移似乎只发生在 Android 上的列表中。它在 iOS 和黑莓上运行良好。如果我将 softKeyboardBehavior 更改为“none”，那么所有设备上都会发生相同的行为。在列表中编辑文本时，我可以做些什么来使屏幕平移？

# java - 应用程序只是在使用线程时挂起？

> ID：10235644
> 
> 赞同：0
> 
> 时间：2012-04-19T19:46:22.613
> 
> 标签：java, android, ssl

已设置 ssl 连接应用程序，已使用单线程在客户端和服务器之间设置连接。由于我的应用程序处理远程桌面访问，我正在尝试实现线程。

不知道为什么应用程序在创建套接字后就停止了，它既没有失败也没有执行 SSLhandshake。在单线程下执行相同的代码可以顺利运行，但在多线程下则不行。已经尝试过logcat，它无法帮助我。在 10-15 次尝试中，应用程序运行良好 1 次，但进入无响应模式。

知道我在哪里打错了吗？这是代码。任何答案请分享。

主要活动：

```
 Thread t = new Thread() {
        public void run() {
            try{
                Log.d(TAG, "Opening RFB socket");
                rfb = new rfbProtocol(ip, port, RFB_ClientActivity.getContext());
                txt_notify.append("Connection done");
                Log.d(TAG, "RFB socket openned");
                handler.post(new Runnable() {

                    @Override
                    public void run() {
                        // TODO Auto-generated method stub
                        progress.setMessage("Connection established..\nPlease wait");
                    }
                });
                processProtocol(progress);
            }catch(Exception e){
                if(maintainConnection){
                    if(progress.isShowing())
                        progress.dismiss();
                    txt_notify.append( "Connection failure:\n" + e.getMessage() );
                    Log.d(TAG,"RFB socket failure");
                    e.printStackTrace();
                }
            }
        }
    };
    t.start(); 
```

rfb协议：

```
rfbProtocol(String h, int p, Context c) throws Exception {
    // TODO Auto-generated constructor stub
    host = h;
    port = p;
    cont = c;
    try {
        // Setup the SSL context to use the truststore and keystore
        Log.d(TAG, "Initializing SSL connection");
        SSLContext ssl_context = createSSLContext(cont);              
        SSLSocketFactory socketFactory = (SSLSocketFactory) ssl_context.getSocketFactory();
        Log.d(TAG,"Creating RFB socket");
        socket = (SSLSocket) socketFactory.createSocket(host, port);
        Log.d(TAG,"RFB Socket created");
        dataOut = socket.getOutputStream();
        dataIn = new DataInputStream(new BufferedInputStream(socket.getInputStream(), 16384));
        close = false;
        Log.d(TAG,"SSL connection done");
    } catch (Exception e) {
        // TODO Auto-generated catch block
        throw(e);
    }
}

private SSLContext createSSLContext(final Context cont) throws Exception{
    SSLContext ssl_cont = null;
    try {
        // Setup truststore
        Log.d(TAG, "TrustStore - Initializing");   
        KeyStore trustStore = KeyStore.getInstance("BKS");
        TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
        InputStream trustStoreStream = cont.getResources().openRawResource(R.raw.clienttruststore);
        trustStore.load(trustStoreStream, "client".toCharArray());
        trustManagerFactory.init(trustStore);
        Log.d(TAG, "TrustStore - Initialized");

        // Setup keystore
        Log.d(TAG, "KeyStore - Initializing");
        KeyStore keyStore = KeyStore.getInstance("BKS");
        KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());
        InputStream keyStoreStream = cont.getResources().openRawResource(R.raw.client);
        keyStore.load(keyStoreStream, "client".toCharArray());
        keyManagerFactory.init(keyStore, "client".toCharArray());
        Log.d(TAG, "KeyStore - Initialized");

        ssl_cont = SSLContext.getInstance("TLS");
        ssl_cont.init(keyManagerFactory.getKeyManagers(), trustManagerFactory.getTrustManagers(), null); 
    } catch (Exception e) {
        // TODO Auto-generated catch block
        throw(e);
    }
    return ssl_cont;
} 
```

应用程序只是在“创建 RFB 套接字”之后挂起，然后是 logcat 中意图记录的活动。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T15:02:04.540

由于使用了 ssl 服务器套接字并且我有自己的 java 主机，因此需要手动启动握手协议。这对我有用！

# javascript - 这个函数在 Facebook 的 JavaScript 源代码中有什么作用？

> ID：10235646
> 
> 赞同：4
> 
> 时间：2012-04-19T19:46:26.277
> 
> 标签：javascript

我正在阅读一些 Facebook 的 JavaScript，遇到了一个奇怪的函数，我无法弄清楚它的目的：

```
function bagof(a) {
    return function () {
        return a;
    };
} 
```

*据我所知*：

*   `bagof`是一个接受参数的函数`a`。
*   `bagof`立即返回一个匿名函数。
*   返回的函数然后返回原始参数`a`。

我会假设的用法是`bagof`这样的：

```
newFunction = bagof("This is the data");
​console.log( newFunction() );​ //Logs "This is the data"​​​​​​​​​​​​ 
```

重点是什么？为什么不直接使用或存储传入的任何变量或函数`a`？

[源文件](http://jsbin.com/upuken/edit#javascript)看起来包含许多应用程序的实用功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T19:49:42.800

该`bagof()`方法可以用作创建常量函数的工厂（函数总是返回相同的值）。

即使您在这种情况下使用：

```
var randomFun = bagof(Math.random()); 
```

的调用`randomFun()`将始终返回相同的值，因为`Math.random()`只评估一次（急切地）。我猜它是当某些 API 需要一个方法并且我们只是想传递常量值时使用的实用方法。代替：

```
giveMeCallback(function() {return 42}) 
```

你可以简单地说：

```
giveMeCallback(bagof(42)) 
```

# html - 重定向到 /user/"searchterm"/ 的简单搜索

> ID：10235648
> 
> 赞同：0
> 
> 时间：2012-04-19T19:46:37.273
> 
> 标签：html, forms

目前我正在使用：

```
<form action="/user/" method="get">
<input type="text" name="" id="" size="20" value="">
<input type="submit" value="Search">
</form> 
```

但是，这个重定向到`/user/?=searchterm`
我希望它重定向到`/user/searchterm`
我知道这很容易我只是想不通。

编辑：如果我不清楚。我希望表单使用输入的参数并将浏览器重定向到 /user/(parameter)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T20:05:31.083

它不能（也不应该！）在常规 HTML 中完成。您需要使用**JavaScript**来**伪造**表单提交（通过根据搜索词重定向到链接，并使用**URL 重写**来指向正确的`$_GET`变量地址）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T20:30:37.800

您将有两种选择来执行此操作。

1.  提交后将用户重定向到正确的页面（使用 PHP 的示例）：

    ### HTML

    ```
    <form action="/usersearch/" method="post">
      <input type="text" name="user" id="" size="20" value="">
      <input type="submit" value="Search">
    </form> 
    ```

    ### PHP

    ```
    if (!isset($_REQUEST['user'])) {
        header('Location: http://example.com/search'); //redirect back to search page
        exit();
    }

    header('Location: http://example.com/user/' . $_REQUEST['user']);
    exit(); 
    ```

2.  使用 javascript 来捕获提交和重定向（我使用 jQuery，因为我是懒惰的 ATM，但使用 vanilla JS 也可以）：

    ```
    ​(function($) {
        $('form').submit(function() {
            window.location = "http://example.com/user/" + $('input[name="user"]', this).val();

            return false;
        });
    })(jQuery)​ 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T19:53:08.940

改变这个：

```
<form action="/user/" method="get"> 
```

对此：

```
<form action="/user/" method="post"> 
```

通过使用`get`，将值添加到 URL。通过使用`post`这些值不会添加到 URL。

编辑：误读的问题...

我不确定你为什么要这样做，它会使链接有点像页面链接，但无论如何，如果你使用的是 Apache ，我建议使用[mod_rewrite 。](http://www.4webhelp.net/tutorials/misc/mod_rewrite.php)这里还有另一个问题，有一个很好的答案可能会有所帮助。你只需要拥有价值

[https://stackoverflow.com/a/4674388/1076164](https://stackoverflow.com/a/4674388/1076164)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T20:32:24.370

将 '/user/?=searchterm' 更改为 '/user/searchterm' 很难做到；使用 .htaccess 文件或 mod-rewrite 将 '/user/q=searchterm' 更改为 '/user/searchterm' 更容易。
查询字符串应始终采用格式 '?q=a'; 以 '?=a' 格式保存它没有多大意义。

# jquery - Jquery手风琴禁用进一步点击滑动

> ID：10235649
> 
> 赞同：0
> 
> 时间：2012-04-19T19:46:39.867
> 
> 标签：jquery, events, click, accordion

我是 jquery 的新手，我已经实现了一个手风琴，它根据“点击”的 div 和其他 div slidesup 向下滑动。但是，一旦 div 向下滑动，我不想再触发任何点击事件。如何实现这一点？

我有很多像下面这样的 div -

```
<div class=tutorial> 
<div class =trigger>
<h1 class = "head"><img src="image.png" alt="" class = "image">First accordion</h1>
</div>
<div class=content> </div>
</div> 
```

jQuery：

```
$(document).ready(function() {
$('.content').hide();
$('.trigger').click(function() {
$('.content').slideUp("fast");                                                                                   $('.trigger').not(this).children('.head').children('.image').attr('src','help_arrowUp.png')
$(this).siblings('.content').slideDown('normal');
$(this).children('.head').children('.image').attr('src', 'help_arrowDown.png');
});
}); 
```

感谢任何帮助。谢谢你。：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:54:45.803

```
$('.content').not(this).slideUp("fast");                                                                                        
$(this).slideDown('normal'); 
```

像这样使用它

# javascript - 为什么 `mystring[0]` 在 IE 中不返回任何内容？

> ID：10235650
> 
> 赞同：3
> 
> 时间：2012-04-19T19:46:40.677
> 
> 标签：javascript, internet-explorer

所以在我的javascript中，我有以下代码：

```
 var wholeHash = window.location.hash.substring(1);
    var data = new Object();

    // Remove the bang or slash if one appears at the beginning
    if (wholeHash[0] == '!') { wholeHash = wholeHash.substring(1); }
    if (wholeHash[0] == '/') { wholeHash = wholeHash.substring(1); } 
```

当它即将运行时，`wholeHash`其值为`"/search/&&stype=quick"`。但是，`wholeHash[0]`不返回任何内容，这会导致`wholeHash[0] == '!'`错误。这只是在 IE 中的情况。

为什么是这样？我知道我可以改用`startswith`，但我通常很感兴趣，为什么 IE 不能获取字符串的单个字符，而其他浏览器可以。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T19:48:55.913

因为使用数组样式索引对字符串进行索引是新的，而旧版本的 IE 缺少这一点。相反，`mystring.charAt(0)`如果您需要在 8 之前支持 IE，则需要使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T19:50:42.520

不久前我遇到了类似的问题。在我的情况下，它与在 Intranet 页面上自动打开的兼容性视图有关。检查[这个问题](https://stackoverflow.com/q/3985605/419436)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T19:50:38.523

从字符串中获取字符的“正确”方法是使用`mystring.charAt(x)`.

但是，您可以使用 将字符串分解为数组`mystring.split("")`。

看你喜欢哪个。

# java - java中构造函数的工作原理

> ID：10235653
> 
> 赞同：-4
> 
> 时间：2012-04-19T19:46:51.093
> 
> 标签：java

我试图了解类中java中的以下构造函数有什么区别

```
Box
{
    Box(Box ob)
    {
     width = ob.width;
     height = ob.height;
     depth = ob.depth;
    }

    Box(double w, double h, double d)
    {
     width = w;
     height = h;
     depth = d;
    }

    Box()
    {
     width = 0;
     height = 0;
     depth = 0;

    }

    Box(double width, double height, double depth)
    {
     this.width = width;
     this.height = height;
     this.depth = depth;
    }
} 
```

大家干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T19:59:50.807

首先是复制构造函数，用于在初始化期间将一个对象的值复制到另一个对象。

Second 和 Fourth 是一个参数化构造函数，其中包含该类的所有数据成员。但建议使用第四个，大多数 IDE（我所知道的）将自动生成第四个，因为它更易于阅读并且具有相同的上下文

第三个是默认构造函数。用于设置默认值。看到它不接受任何输入（作为参数）

```
Box b = new Box();//Default constructor
Box b1 = new Box(1.0,2.0,3.0);//Parameterized constructor completely defining the object
Box b2 = new Box(b1);//Copy constructor will copy the values but both will have a different reference
b2 = b1;//b2 now refers to object referenced by b1\. So the earlier reference for b2 will be taken by GC(garbage Collector) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T19:55:56.347

第一个通常称为复制构造函数，这意味着您将值从现有实例复制到新实例中。第二个和第四个（相同）正在创建一个新实例，从显式原始值初始化每个字段。当您不想显式提供任何内容时，第三个似乎是尝试使用字段的默认值创建实例。

顺便说一句，第 2 次和第 4 次之间的细微差别在于，在第 2 次中，您使用的参数名称与字段名称不同，因此您不必`"this.fieldname"`在左侧说。在第 4 个中，参数与字段名称具有相同的名称，因此您必须`"this,fieldname"`在左侧使用来表示您正在从参数复制到字段，而不是反之亦然（或从参数复制到自身） ，或从字段到自身）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T20:17:59.407

好的，我首先假设您没有`class`用 Box 编写关键字，并且还省略了宽度、高度和深度声明，只是为了节省输入。

在 Java 中，如果您不提供任何构造函数，则默认存在一个不带任何参数的默认构造函数。因此，如果您没有在下面的类 Box 中编写任何内容，您仍然可以在 main 中调用其基本构造函数：

```
class Box{
}

class CallingClass{
    public static void main(String args[]){
        Box box = new Box(); // this would work.
    }
} 
```

如果您甚至提供了一个其他构造函数，那么在您明确声明之前，未声明的默认构造函数将不再可用。

```
class Box{
    public Double height;

    public Box(Double height){
        this.height = height;
    }
}

class CallingClass{
    public static void main(String args[]){
        Box box = new Box((double)50); // this would work.
        Box anotherBox = new Box(); // this will give you an error.
    }
} 
```

快速结束构造函数：

```
public Box(){...} // default constructor in which you allow caller to not worry about initialization.

public Box(Box boxToCopy){...} // copy constructor for creating a new box from the values of an old one.

public Box(double height, double width, double depth){...} // should create a box with specified dimensions. 
```

# wcf - WCF 服务因自定义数据类型而中断

> ID：10235655
> 
> 赞同：0
> 
> 时间：2012-04-19T19:46:56.403
> 
> 标签：wcf, pollingduplexhttpbinding, custom-data-type

我遇到了 WCF 服务正常工作的问题。我正在尝试创建一个双工服务，但每当我尝试返回自定义数据类型时，它都会破坏客户端。

如果我删除 GetTestData 一切正常。当我添加它时，客户端的一切都会中断。似乎我可以通过取消选中“在引用的程序集中重用类型”来修复它，但我不确定这样做是否有负面影响。

这是代码

ITestService.cs

```
namespace MyApp.Server
{
    [ServiceContract(Namespace = "http://www.mysite.net", CallbackContract = typeof(IDuplexTestClient))]
    public interface ITestService
    {
        [OperationContract]
        string Hello();

        [OperationContract]
        TestData GetTestData();
    }

    public interface IDuplexTestClient
    {
        [OperationContract(IsOneWay = true)]
        void TestCallback(string message);
    }
} 
```

测试服务.cs

```
namespace MyApp.Server
{
    [ServiceBehavior(Namespace = "http://www.mysite.net")]
    public class TestService : ITestService, ICrossDomainPolicyResponder
    {
        public string Hello()
        {
            return "Hello";
        }

        public TestData GetTestData()
        {
            return new TestData();
        }

        #region ICrossDomainPolicyResponder Members
        public Stream GetSilverlightPolicy()
        {
            string result = @"<?xml version=""1.0"" encoding=""utf-8""?>
                <access-policy>
                    <cross-domain-access>
                        <policy>
                            <allow-from http-request-headers=""*"">
                                <domain uri=""*""/>
                            </allow-from>
                            <grant-to>
                                <resource path=""/"" include-subpaths=""true""/>
                            </grant-to>
                        </policy>
                    </cross-domain-access>
                </access-policy>";
            return StringToStream(result);

        }

        public Stream GetFlashPolicy()
        {
            string result = @"<?xml version=""1.0""?>
                            <!DOCTYPE cross-domain-policy SYSTEM ""http://www.macromedia.com/xml/dtds/cross-domain-policy.dtd"">
                            <cross-domain-policy>
                                <allow-access-from domain=""*"" />
                            </cross-domain-policy>";
            return StringToStream(result);
        }

        private Stream StringToStream(string result)
        {
            WebOperationContext.Current.OutgoingResponse.ContentType = "application/xml";
            return new MemoryStream(Encoding.UTF8.GetBytes(result));
        }
        #endregion
    }
} 
```

测试数据.cs

```
namespace MyApp.SDK 
{
    [DataContract(Namespace = "http://www.mysite.net")]
    public class TestData
    {
        [DataMember]
        public string TestString { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T21:10:57.840

您的类型 TestData 在服务器端声明。

为了让客户端使用返回 TestData 的服务，它必须知道 TestData 的样子。

这是在您执行添加服务引用时设置的。

有两种方法可以做到。

*   客户端引用了包含 TestData 的 dll
*   添加服务引用在客户端生成类型

“在引用的程序集中重用类型”表示您要使用第一个选项。

没有“正确”的方法可以做到这一点。如果您可以控制客户端和服务器，则可以重用 dll，因此在类型更改时无需更新服务引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T19:56:38.613

我仍然不是 100% 确定这里发生了什么，但我找到了一个适合我的解决方案。我可以使用“在指定的引用程序集中重用类型”来获得我需要的功能。这解决了问题，但仍然允许我在客户端和服务器之间共享 MyApp.SDK 类。

# java - 更新 SQL 抛出异常

> ID：10235656
> 
> 赞同：0
> 
> 时间：2012-04-19T19:46:59.787
> 
> 标签：java, android, sqlite

我正在尝试更新我在 android 上的 sqlite 数据库上的一整行。但是由于某种原因引发了异常。

更新我的数据库的方法是：

```
public void updateEvent(long rowId,Evento evento){
        int row=(int)rowId;
        ContentValues eventValues=createContentValues(evento);
        db.update(TABLE,eventValues,KEY_ROWID+"="+row,null);
    } 
```

createContentValues 方法是这样的：

```
private ContentValues createContentValues(Evento evento){
        ContentValues val=new ContentValues();
        val.put(KEY_ROWID,evento.getIdEvento());
        val.put(KEY_SUMMARY,evento.getSummario());
        val.put(KEY_DAY,evento.getFecha().getDia());
        val.put(KEY_MONTH,evento.getFecha().getMes());
        val.put(KEY_YEAR,evento.getFecha().getAnho());
        val.put(KEY_STATUS,evento.getStatus());
        val.put(KEY_NOTES, evento.getNota());
        return val;
    } 
```

调用更新方法的方法是：

```
private void acceptAction(Evento evnt,String note){
        DbAdapter dbConn=new DbAdapter(this.getApplicationContext());
        evnt.setNota(note);
        try{
        dbConn.updateEvent(evnt.getIdEvento(), evnt);
        }catch(Exception e){
            Toast.makeText(this.getApplicationContext(), "Error al Actualizar tu Evento", Toast.LENGTH_SHORT).show();
            //Log.e("Error Candelaria", e.getMessage());
        }
    } 
```

注释日志条目行是因为异常对象不包含任何信息，我不能这样做，`printStackTrace()`因为 println 抛出 NullPointerException。

更新：Logcat：

```
04-19 13:53:15.910: E/AndroidRuntime(4934): java.lang.NullPointerException
04-19 13:53:15.910: E/AndroidRuntime(4934):     at com.siitne.candelaria.data.DbAdapter.updateEvent(DbAdapter.java:48)
04-19 13:53:15.910: E/AndroidRuntime(4934):     at com.siitne.candelaria.ImportantList.acceptAction(ImportantList.java:130)
04-19 13:53:15.910: E/AndroidRuntime(4934):     at com.siitne.candelaria.ImportantList.access$3(ImportantList.java:126)
04-19 13:53:15.910: E/AndroidRuntime(4934):     at com.siitne.candelaria.ImportantList$1$1.onClick(ImportantList.java:113) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T19:49:58.210

假设 KEY_ROWID 是整数，则不需要单引号。

```
db.update(TABLE,eventValues,KEY_ROWID+"="+row+"",null); 
```

如果不是整数那么

```
db.update(TABLE,eventValues,KEY_ROWID+"= '"+row+"'",null); 
```

您不需要打印堆栈跟踪。有一个视图叫做 Logcat。这将显示完整的错误堆栈跟踪。

编辑：这是 NullpointerException，而不是 sqlexception。您还需要确保**db**也不为**空**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T19:50:06.200

KEY_ROWID+"='"+行

你错过了封闭的'

应该读

KEY_ROWID+"='"+行+"'"

# objective-c - 格式化大量

> ID：10235657
> 
> 赞同：1
> 
> 时间：2012-04-19T19:46:59.820
> 
> 标签：objective-c, nsnumberformatter

大家好，这是我的第一个问题，我想对你来说很容易，我想把这个 NSString "42031692.7810" 转换成这样的东西：$4,2031,692.78，我有这个代码：

```
NSString *element = @"42031692.7810";
    NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
    [formatter setNumberStyle:NSNumberFormatterCurrencyStyle];
    [formatter setGeneratesDecimalNumbers:YES];
    [formatter setMaximumFractionDigits:2];
    NSNumber *temp = [formatter numberFromString:element];
    NSLog(@"formatter%@",[temp stringValue]); 
```

但输出是这样的：

```
2012-04-19 14:43:42.467 HelloWorld[5663:f803] formatter(null) 
```

我该如何解决这个问题？？？希望你能帮我！！

问候！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T19:55:44.660

你有 string `@"42031692.7810"`，并且你有一个`NSNumberFormatter`集合来接受被样式化为货币的东西。 `@"42031692.7810"`不被样式化为货币。因此它正在返回`nil`。

您必须将数字格式化程序设置为接受十进制输入，将字符串`NSNumber`转换`NSNumber`为`NSString`.

# python - 从内存中的 url 下载图像并在内存中创建 zip 存档以发送到浏览器

> ID：10235662
> 
> 赞同：2
> 
> 时间：2012-04-19T19:47:21.783
> 
> 标签：python, django, zip

在我的 django 项目中，我需要将一个 zip 文件发送到客户端进行下载。这个 zip 文件将包含从各种 url 下载的图像。

是否可以在不将图像文件写入磁盘的情况下将图像下载到内存中，然后将它们添加到内存本身的 zip 文件中，再次不将 zip 文件写入磁盘，最后将 zip 文件发送到客户端进行下载？

我知道 urllib2 可用于图像下载，而 zipfile 可用于处理 zip 文件，但在内存本身中执行这些操作时遇到问题。因此，非常感谢您提供一些示例。

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T19:53:48.590

使用 urllib2 下载文件。打开一个新的 ZipFile 进行写入（您需要一个 StringIO 对象）。将 url 的输出写入 ZilpFile.writestr。将 zip 文件附加到 django 响应。

```
import urllib2
from StringIO import StringIO

url = urllib2.urlopen('http://example.com/foo.jpg')
f = StringIO()
zip = zipfile.ZipFile(f, 'w')
zip.writestr('foo.jpg', url.read())
response = HttpResponse(f.getvalue(), content_type="application/zip")
response['Content-Disposition'] = 'attachment; filename=foobar.zip'
return response 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T19:54:11.487

您可以这样做，只需：

```
response = urllib2.urlopen('http://..')
img_bytes = response.read() 
```

然后使用 ZipFile.writestr 将这些字节写入文件，在您之前创建的 Zip 中传递一个 StringIO 处理程序而不是真正的文件处理程序。完成写入文件后，将其作为 HTTPResponse 返回，设置正确的 mimetype 和内容处置。

但我不会为此使用 RAM。为什么不使用 tempfile.NamedTemporaryFile？

# jquery - jQuery 滑块 > 在屏幕上淡入淡出幻灯片而不是 animate()

> ID：10235677
> 
> 赞同：0
> 
> 时间：2012-04-19T19:48:15.717
> 
> 标签：jquery, slider

我已经修改了这个滑块脚本，以便不是从右到左为幻灯片设置动画，而是一个在另一个之上。我需要做什么来应用溶解/淡入淡出效果？

换句话说，我想在下一张幻灯片出现时淡出上一张幻灯片

```
 a.fn.calculateSlidePos = function () {
            var b = 2;
            a(this).find("dt").not(":first").each(function () {
                var c = dtWidth * activeID;
                if (b <= activeID) {
                    var d = dtWidth * (b - 1);
                    /*a(this).animate({left: d});*/
                    a(this).css({left: d});
                    if (b < activeID) {
                       a(this).next().fadeIn().css({
                            left: d + dtWidth
                        })
                    } else {
                        /*a(this).next().animate({left: c})*/
                        a(this).next().css({left: c})
                    }
                } else {
                    var e = dlWidth - dtWidth * (slideTotal - b + 1);
                    a(this).animate({
                        left: e
                    });
                    var f = e + dtWidth;
                    /*a(this).next().animate({left: f})*/
                    a(this).next().css({left: f})
                }
                b = b + 1
            });
            setTimeout(function () {
                a(".easy-accordion").find("dd").not(".active").each(function () {
                    a(this).css({
                        display: "none"
                    })
                })
            }, 400)
        }; 
```

# c++ - 从文本文件中获取指令

> ID：10235682
> 
> 赞同：0
> 
> 时间：2012-04-19T19:48:26.090
> 
> 标签：c++, c

我有一个家庭作业。我必须创建一个哈希表并使用链表来解决冲突。哈希表工作得很好。部分任务是读取文件并解析内容以获取指令。

文件内容：

```
Load("Via Lactea", "Galaxia")

Load("Galaxia", "Sistema Solar", "Sol")

Load("Via Lactea", "Hoyo negro", "001")

Find("Via Lactea","Luna")

Delete("Via Lactea","Jupiter")

Show() 
```

我的问题是创建 C/C++ 程序以读取文件内容并解析操作我的程序的指令的最佳（也是最简单）方法是什么。我是 C/C++ 新手，所以我不确定解决这个问题的最佳方法是什么。

我如何阅读一行并知道什么样的指令？

我想知道一些想法

（我的哈希表代码在这里[http://pastebin.com/yVEeqvzG](http://pastebin.com/yVEeqvzG)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T09:51:32.943

由于您的作业的主要目标是哈希表部分，您可能想要进行快速而肮脏的 hack 来解析您的文件，这样您就可以快速开始主要部分。

以下是用 C 编写的，尽管它也可以在 C++ 中使用。

```
char line[100], command[100], word1[100], word2[100], word3[100];
FILE* f = fopen("whatever", "rt");

while (fgets(line, sizeof(line), f)) // read one line of text from file
{
    // The following is a format string for scanf.
    // It matches an opening quote, some text, and a closing quote.
    #define WORD "\"%[^\"]\""

    // Try to parse the line of text, applying all possible patterns.
    if (sscanf(line, "Load("WORD", "WORD", "WORD")\n", word1, word2, word3) == 3)
    {
        ...
    }
    else if (sscanf(line, "Load("WORD", "WORD")\n", word1, word2) == 2)
    {
        ...
    }
    else if (sscanf(line, "Find("WORD", "WORD")\n", word1, word2) == 2)
    {
        ...
    }
    else if (strcmp(line, "Show()\n") == 0)
    {
        ...
    }
} 
```

强制性说明：尽管您可能不关心它，但这种用法`sscanf` [存在安全漏洞。](https://stackoverflow.com/a/5873453/509868)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:07:19.017

这个基本片段能够逐行加载文件。如何管理解析是你的职责，我会去，`strtok_s`但你必须关心修剪空间，检查适量的参数，从字符串中提取双引号等等。

```
#include <iostream>
#include <fstream>
using namespace std;

int main () {
  filebuf fb;
  fb.open("data.txt",ios::in);
  istream is(&fb);
  char buffer[256];

  while ((is.rdstate() & ifstream::eofbit) == 0) {
    is.getline(buffer,256);

    // handle your parsing here
  }

  fb.close();
  return 0;
} 
```

# sitemap - 通过 Selenium2 的处理程序访问的站点地图上的安全修整

> ID：10235693
> 
> 赞同：0
> 
> 时间：2012-04-19T19:49:07.987
> 
> 标签：sitemap, selenium-webdriver

我使用 NUnit 和 Selenium2 的组合成功地测试了一个 ASP.NET 网站。我那里没有问题。我正在针对测试网站运行测试；测试系统和测试站点是分开的，尽管它们可能在同一台机器上——它们通过 HTTP 进行通信。

我想做的一件事是从我的测试目标站点中提取站点地图（有几个）并自动依次点击每个页面，只是检查异常等。

显然 .sitemap 文件不能通过 HTTP 拉取。但是我已经有一个用于 GoogleSitemaps 的小 ashx 处理程序，它通过 HTTP 返回 ASP.NET .sitemap 文件的 XML 版本。如果您没有登录，您将获得站点地图的“安全修剪”版本。但是，如果您登录，此处理程序会根据您的角色返回您可以看到的站点地图。

问题是： - 我可以从 Selenium2 驱动登录和注销，并且安全修剪工作完美：Selenium2 可以看到它应该看到什么，看不到它不应该看到什么。- 但是，即使我已登录，我也会看到未登录用户的站点地图版本：它已被修剪！然而，我已经登录并且测试用户有权精确地查看已被修剪掉的东西。

我当时在想...... ASP.NET“知道”我通过HTTP“登录”的方式必须是那些包含（看起来）一些安全令牌和会话ID的cookie。这就是网页如何“知道”测试用户是谁以及他们已经过身份验证的方式。处理程序，**ashx**，那个野兽大概没有得到 cookie。我想如果有足够的时间，我可以用 Fiddler 嗅探它，但即使我证明 cookie 不见了，我也不知道如何把它弄进去。显然我`new FirefoxDriver();`正在将 cookie 传递给 aspx 页面，那么 ashx 页面是怎么回事？

无论如何，也许我是在错误的树上吠叫。有没有人设法让这种类型的东西工作？请注意，即使来自 Selenium2，我的站点地图也可以正常工作：这个问题专门针对 Selenium2 和使用处理程序时的站点地图修剪。

# jsf - 基于布尔值有条件地切换组件属性的值

> ID：10235694
> 
> 赞同：2
> 
> 时间：2012-04-19T19:49:08.460
> 
> 标签：jsf, components, conditional-rendering

我有一个 JSF 数据表，其中一列包含艺术家列表以及每个我想在单击链接时显示或隐藏特定艺术家制作的专辑的 commandLink。

我刚刚开始了解 JSF，我想知道在单击链接时让 commandLink 的值在“显示专辑”和“隐藏专辑”之间切换的最佳做法是什么？不使用javascript可以做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T00:48:39.817

为此，您可以使用`?:`EL 中的条件运算符。如果布尔表达式计算`true`为 ，则执行第一条语句，否则执行第二条语句。

```
<h:commandLink ... value="#{bean.showAlbums ? 'Show' : 'Hide'} Albums" /> 
```

您甚至可以使用与显示/隐藏实际专辑相同的条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T05:46:40.903

你的链接

```
<a4j:commandLink value="#{myBean.value}" action="#{myBean.toggleValue}" reRender="myLink" id="myLink"/> 
```

你的豆子

```
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;

@ManagedBean(name="myBean")
@ViewScoped
public class MyBean {
  boolean show = true;

  public void toggleValue() {
    this.show = !this.show;
  }

  public String getValue() {
    return this.show ? "Show" : "Hide";
  }
} 
```

# android - Android 布局问题 - 在屏幕上显示 xml

> ID：10235696
> 
> 赞同：0
> 
> 时间：2012-04-19T19:49:09.020
> 
> 标签：android, android-layout, android-widget

好的，所以我已经编写了我的主 xml 文件，我很确定它是正确的，但我不知道如何在屏幕上显示我的布局。我尝试为所有不同的小部件创建变量并将它们设置为与 R.id.main 中的相同，但它没有在屏幕上显示任何内容。基本上我不明白如何在屏幕上显示我在 xml 中得到的内容。这是我的代码，请有人解释我哪里出错了。

```
public class MinesweeperActivity extends Activity {

private TableLayout all;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    all = (TableLayout)findViewById(R.id.all);

    }
}

// this is my xml

<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/all"
android:stretchColumns="*" 
android:background="@drawable/bground"                                   

>

<TableRow>
    <TextView
    android:id="@+id/Timer"
    android:layout_column="0"
    android:text="000" />
     <TextView
    android:id="@+id/Counter"
    android:layout_column="2"
    android:text="000" />  
    <ImageButton 
    android:id="@+id/Face"
    android:layout_column="1"
    android:background="@drawable/faces"
    android:layout_height="50px" />
</TableRow>
<TableRow>
    <TextView                      
        android:layout_column="0"
        android:layout_height="50px"
        android:layout_span="3"
        android:padding="10dip"/> 
</TableRow>
<TableRow>
    <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/Mines"
        android:layout_width="260px"
        android:layout_height="260px"
        android:gravity="bottom"
        android:stretchColumns="*"
        android:layout_span="3"        
        android:padding="5dip" >
    </TableLayout>
</TableRow>                          
</TableLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T04:16:54.227

I tried with your code and i found the error in logcat is `**java.lang.RuntimeException: Binary XML file line #2: You must supply a layout_width attribute.**` I think the mistake is this..Try once it may solve your problem.You must give layout widh and height attributes to the table layout.

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/all"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/bground"
    android:stretchColumns="*" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:07:21.007

Replace `R.layout.main` with `R.layout.<your xml filename>` in setContentView. If you inspect the value of `all` in the debugger it should be null because findViewById() looks in the current content view for a view with that id, and your current content view is `R.layout.main`. If you need to build a view in your Activity from an xml resource use a LayoutInflater to build a view from a layout resource.

# c++ - 当我将 int 数据成员的初始化值更改为 1 以外的任何值时程序崩溃

> ID：10235703
> 
> 赞同：0
> 
> 时间：2012-04-19T19:49:34.903
> 
> 标签：c++, design-patterns, initialization

之前我将一些数据移动到一个单例对象 GamePropertiesManager。在这个类中，我定义了一个名为 _gameSpeed 的变量，在类构造函数中，我使用初始化列表将其设置为默认值 1。

在另一堂课中，我有一个更新循环（在我的控制之外），它总是会尽可能频繁地更新。我打算并成功地使用了“速度”变量来减慢更新速度。例如，将其设置为 2 游戏只会更新对 onUpdate 的所有其他调用。如果您查看下面 PlayState::onUpdate() 的内容，我可能会说得通（我在建议下发布了整个 cpp评论者）：

```
#include "PlayState.hpp"
#include "PlayerController.hpp"
#include "AIController.hpp"

#include <stdlib.h>
#include <time.h>

//testin
#include <iostream>

/// Implement PlayState

PlayState::PlayState()
{}
PlayState::~PlayState()
{}

bool PlayState::onCreate()
{
   _gameProperties = GamePropertiesManager::GetInstance();

   _frameCounter = 0;
   application.addKeyListener( *this );
   _collisionFlag = false;

   //snakes created, intialising a pointer to fruit managaer, controller and opposing snake
   _player1 = new Snake();
   _player2 = new Snake();
   _player1->Initialise(&_fruitManager, new PlayerController(_player1), _player2);
   _player2->Initialise(&_fruitManager, new AIController(_player2), _player1);

   return true;
}
bool PlayState::onDestroy()
{
   return true;
}

void PlayState::onEntry()
{
   //seed to randomise food positions later
    srand ( time(0) );
}

void PlayState::onExit()
{

}

void PlayState::onUpdate()
{
   //TODO: rename _snake speed and maybe make it global gamespeed
   ++_frameCounter; //FrameCounter can be used to slow the snake down
   if(_frameCounter >= _gameProperties->GetGameSpeed())
   {

       //updating
       _fruitManager.UpdateFruits();
      _player1->Update(&_collisionFlag);
      _player2->Update(&_collisionFlag);

      if (_collisionFlag)
         application.setState("gameover");

      _frameCounter = 0;
   }

}

void PlayState::onRender( Canvas& c )
{
   _player1->Draw(c);
   _player2->Draw(c);

    _fruitManager.DrawFruits(c);
}

bool PlayState::onKey (const KeyEvent& key)
{
if( key.key_state == KeyEvent::KB_DOWN ){

    switch (key.key){
         case KeyEvent::KB_ESC_KEY:
            application.exit();
            break;
        case 'p':
            application.setState("pause");
            break;
      }
}
   return true;
} 
```

_gameProperties 是一个指向我在 PlayState::onCreate() 中分配的 GamePropertiesManager 的指针，当我的类 PlayState 首次创建时..

实际的 GamePropertiesManager 类如下所示：

```
#include "GamePropertiesManager.hpp"

GamePropertiesManager* GamePropertiesManager::_instance = NULL;

GamePropertiesManager* GamePropertiesManager::GetInstance()
{
   if (!_instance) //instance not yet created
      _instance = new GamePropertiesManager();

   return _instance;
}

void GamePropertiesManager::Destroy()
{
   delete _instance;
   _instance = 0;
}

GamePropertiesManager::GamePropertiesManager() :
   _gameMode(PLAYERVSCOM), _player1Name("Player 1"), _player2Name("Player 2"),
      _player1Score(0), _player2Score(0), _matchSurvivor("NONE"), _gameSpeed(1)
{

}

unsigned int GamePropertiesManager::GetGameSpeed()
{
   return _gameSpeed;
} 
```

**我的问题是，当我将初始化列表中 _gameSpeed 的值更改为除 (1) 之外的任何值时，我的程序在运行时崩溃。**我发现这特别奇怪，因为我之前将 _frameCounter 与 1 以外的硬编码值和设置为 1 以外的值的速度变量进行比较，并且程序按预期运行良好。关于这个问题的任何想法？

希望我能很好地解释自己，感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:08:42.133

原因几乎可以肯定是因为对于 1 以外的任何值，在第一次调用`PlayState::onUpdate`检查`if`时都不会运行，很可能会留下一些未初始化的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T20:09:55.350

如果您的进程是多线程的，并且有多个线程使其成为`onUpdate`，那么您需要添加足够的锁定`GetInstance`，以确保两个竞争线程无法在第一次（并发）调用时创建独立实例，更重要的是，让一个线程发布由另一个线程启动的未完全初始化的实例。

# javascript - 在 Backbone.js 中使用模型过滤/排序集合

> ID：10235714
> 
> 赞同：0
> 
> 时间：2012-04-19T19:50:14.073
> 
> 标签：javascript, backbone.js

经过几天的阅读教程和搜索谷歌我碰壁了......

我正在使用backbone.js 创建一个应用程序，该应用程序具有一个项目模型/项目集合和各种视图来显示项目。该应用程序的一部分将允许用户创建组（并使用现有组）以显示项目集合的子集。

将有一个组模型/组集合，其中包含各种视图以显示组并允许用户将项目与特定组相关联。

问题是每个项目可以属于一个、多个或不属于任何组，我无法弄清楚如何使用组模型根据与之关联的项目来获取项目集合的子集，或者这甚至是正确的做法。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T20:38:47.237

根据您实际拥有的模型数量、存储它们的位置以及它们在 UI 中的呈现方式，将取决于您如何处理这一点。

如果有许多模型存储在远程服务器上的数据库中，并且组的项目将单独呈现，则一种方法是按需加载组的项目。也许像...

```
var Item = Backbone.Model.extend({});
var ItemColleciton = Backbone.Collection.extend({
  url: '/load-items',
});

var Group = Backbone.Model.extend({
  items: new ItemCollection(),
  initialize: function() {
    // load the groups items as the group is initialized
    this.items.fetch({data:{groupID:this.id}});
  }
}); 
```

或者，如果您的模型较少，您可能希望一次加载它们，并使用过滤来填充组。像这样的东西...

```
var Item = Backbone.Model.extend({});
var ItemColleciton = Backbone.Collection.extend({
  url: '/load-groups',
});

var Group = Backbone.Model.extend({
  initialize: function() {
    // load the groups items as a subset of the already loaded group collection
    this.items = new ItemCollection(allItems.filter(function(item) {
      return item.GroupID = this.id;
    }, this));
  }
});

// in your router init ...
var allItems = new ItemCollection();
allItems.fetch(); 
```

以上只是示例方法。我在使用了一段时间后发现，它确实可以解释，并且可以完全不同地实现以解决不同的问题。

You may also wish to check out [backbone relational](https://github.com/PaulUithol/Backbone-relational). I've not used it myself, but believe it has added support for mapping relationships between models and collection.

# map - 如何在地图上显示更多点（GeoPoint）？

> ID：10235715
> 
> 赞同：0
> 
> 时间：2012-04-19T19:50:21.143
> 
> 标签：map, point

目前，我可以在代码中创建的第一个点显示一个点（pointStatie），但我想同时显示两个点。我想显示我所在的点以及我从另一个类传递坐标的另一个点。

我目前的代码是：

```
package aexp.elistcbox;

import android.os.Bundle;
import android.provider.SyncStateContract.Constants;

import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
import com.google.android.maps.MapController;
import com.google.android.maps.GeoPoint;
import android.content.Context;
import android.content.Intent;
import android.content.res.Resources;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.location.Criteria;
import android.util.Log;
import android.widget.Toast;
import android.location.Geocoder;
import android.location.Address;
import java.util.List;
import java.util.Locale;
import java.io.*;
import com.google.android.maps.Overlay;
import com.google.android.maps.OverlayItem;
import android.graphics.Canvas;
import android.graphics.Point;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.drawable.Drawable;

public class GPSLocatorActivity extends MapActivity 
{
    public MapView mapView;
    public MapController mapController;
    public LocationManager locationManager;
    public LocationListener locationListener;
    public String best;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.map_view);

    mapView = (MapView) findViewById(R.id.mapView);

    mapView.setSatellite(false);

    mapView.setBuiltInZoomControls(true);

    mapController = mapView.getController();
    mapController.setZoom(13); 

      locationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);  

      locationListener = new GPSLocationListener();

      Bundle extras = getIntent().getExtras(); 
      if(extras !=null)
      {
       double longitudine = extras.getDouble("long");
       double latitudine = extras.getDouble("lat");

       ((GPSLocationListener) locationListener).setLongitudine(longitudine);
       ((GPSLocationListener) locationListener).setLatitudine(latitudine);

       Log.e("longitudine", "* " + ((GPSLocationListener) locationListener).setLongitudine(longitudine));
       Log.e("latitudine", "* " + ((GPSLocationListener) locationListener).setLatitudine(latitudine));
      }

      String provider = null;

      if (locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
          provider = LocationManager.GPS_PROVIDER;
      } else 
          if(locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)) {
              provider = LocationManager.NETWORK_PROVIDER;
          }

      if(provider != null) {
          locationManager.requestLocationUpdates(provider, 60000, 15, locationListener);
      }

      Criteria crit = new Criteria();
      crit.setAccuracy(Criteria.ACCURACY_FINE);
      best = locationManager.getBestProvider(crit, false);
      locationManager.requestLocationUpdates(best, 60000, 15, locationListener);

      Location loc = locationManager.getLastKnownLocation(provider);
      locationListener.onLocationChanged(loc);

  }

  @Override
  protected boolean isRouteDisplayed() {
    return false;
  }

  @Override
  protected void onResume() {
      super.onResume();
      //locationManager.requestLocationUpdates(best, 10000, 1, locationListener);
      Toast.makeText(this, "GPS tracking started",
                Toast.LENGTH_SHORT).show();

         // Start location updates; 5s/5m
            LocationManager locManager = (LocationManager)getSystemService(
                Context.LOCATION_SERVICE);
            locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
                    60000, 15, locationListener);

            Criteria crit = new Criteria();
            crit.setAccuracy(Criteria.ACCURACY_FINE);
            String provider = locManager.getBestProvider(crit, true);
            Location loc = locManager.getLastKnownLocation(provider);
  }

  @Override
  protected void onPause() {
      super.onPause();
      //locationManager.removeUpdates(locationListener);

      Toast.makeText(this, "GPS tracking stopped", 
          Toast.LENGTH_SHORT).show();

      LocationManager locManager = (LocationManager)getSystemService(
              Context.LOCATION_SERVICE);
          locManager.removeUpdates(locationListener);

  }

  private class GPSLocationListener implements LocationListener 
  {
    double longitudine;
    double latitudine;

    public double setLongitudine(double longitudine) {
        return this.longitudine = longitudine;
    }

    public double setLatitudine(double latitudine) {
        return this.latitudine = latitudine ;
    }

    public void onLocationChanged(Location location) {  
       Toast.makeText(GPSLocatorActivity.this, "Te plimbi",
                Toast.LENGTH_SHORT).show();

      if (location != null) {
       Log.e("longitudine", "*2 " + longitudine);
       Log.e("latitudine", "*2 " + latitudine);
          GeoPoint pointStatie = new GeoPoint(
                  (int) (latitudine * 1E6), 
                  (int) (longitudine * 1E6));

        GeoPoint point = new GeoPoint(
            (int) (location.getLatitude() * 1E6), 
            (int) (location.getLongitude() * 1E6));

        // afisaza coordonatele
        /*
        Toast.makeText(getBaseContext(), 
            "Latitude: " + location.getLatitude() + 
            " Longitude: " + location.getLongitude(), 
            Toast.LENGTH_SHORT).show();
         */     
        mapController.animateTo(point);
        mapController.animateTo(pointStatie);
        mapController.setZoom(13);
        //mapView.invalidate();

        // add marker for people point
        MapOverlay mapOverlay = new MapOverlay();
        mapOverlay.setPointToDraw(point);
        mapOverlay.setPointToDraw(pointStatie);

        List<Overlay> listOfOverlays = mapView.getOverlays();
        listOfOverlays.clear();
        listOfOverlays.add(mapOverlay);

        String address = ConvertPointToLocation(point);
        Toast.makeText(getBaseContext(), address, Toast.LENGTH_SHORT).show(); 

        String addressStatie = ConvertPointToLocation(pointStatie);
        Toast.makeText(getBaseContext(), addressStatie, Toast.LENGTH_SHORT).show();
      }

    }

    public String ConvertPointToLocation(GeoPoint point) {   
        String address = "";
        Geocoder geoCoder = new Geocoder(
            getBaseContext(), Locale.getDefault());
        try {
          List<Address> addresses = geoCoder.getFromLocation(
            point.getLatitudeE6()  / 1E6, 
            point.getLongitudeE6() / 1E6, 1);

          if (addresses.size() > 0) {
            for (int index = 0; 
        index < addresses.get(0).getMaxAddressLineIndex(); index++)
              address += addresses.get(0).getAddressLine(index) + " ";
          }
        }
        catch (IOException e) {        
          e.printStackTrace();
        }   

        return address;
      }

    class MapOverlay extends Overlay
    {
      private GeoPoint pointToDraw;

      public void setPointToDraw(GeoPoint point) {
        pointToDraw = point;
      }

      public GeoPoint getPointToDraw() {
        return pointToDraw;
      }

      @Override
      public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when) {
        super.draw(canvas, mapView, shadow);           

        // convert point to pixels
        Point screenPts = new Point();
        mapView.getProjection().toPixels(pointToDraw, screenPts);

        // add marker
        Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.mark_red);
        canvas.drawBitmap(bmp, screenPts.x, screenPts.y-50, null);    
        return true;
      }
    }

    public void onProviderDisabled(String provider) {
    }
    public void onProviderEnabled (String provider) {
    }
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:53:15.693

显然，您将创建类似于第一个的新点

```
GeoPoint point2 = new GeoPoint(
    (int) (location2.getLatitude() * 1E6), 
    (int) (location2.getLongitude() * 1E6)); 
```

然后将其添加到叠加层

```
mapOverlay.setPointToDraw(point2); 
```

# java - 使用 FutureTask 和回调实现异步调用

> ID：10235716
> 
> 赞同：0
> 
> 时间：2012-04-19T19:50:24.387
> 
> 标签：java, asynchronous, callback, futuretask

所以现在，我正在尝试实现一个异步调用，它调用我的 BasicHttpClient 从互联网获取 Http 响应，当 Http 客户端完成其工作时，它调用 Callee 类的方法之一。

一般来说，我的实现是这样的。

```
public class BasicHttpClientAsync {
    private OnRequestFinishedListener mListener;

    public interface OnRequestFinishedListener {
        public void onRequestFinished(HttpResponse httpResponse);

        public void onRequestFinished(ClientProtocolException e);

        public void onRequestFinished(IOException e);
    }

    public BasicHttpClient(OnRequestFinishedListener listener) {
        this.mListener = listener;
    }

    private Runnable task = new Runnable() {
        @override
        public void run() {
            HttpClient httpClient = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(URL);
            HttpResponse httpResponse = httpClient.execute(httpGet);

            mListener.onRequestFinished(httpResponse);
        }
    };

    public void getResponse() {
        ExecutorService executor = Executors.newSingleThreadExecutor();
        FuturkTask<?> futureTask = new FutureTask<Object>(task, null);
        executor.execute(futureTask);
    }
}

public class Callee implements OnRequestFinishedListener {
    public void getResult() {
        BasicHttpClientAsync httpClient = new BasicHttpClientAsync(this);
        httpClient.getResponse();
    }

    @override
    public void onRequestFinished(HttpResponse httpResponse) {
        System.out.println(httpResponse.toString());
    }
} 
```

代码已大大简化，main() 方法调用 Callee 类的 getResult() 方法。顺便说一句，所有异常都已处理，并使用回调发送回被调用者。

但是，Callee 类中的“onRequestFinished”似乎永远不会被调用。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T19:57:33.053

一种可能性是`run`抛出异常内部的某个地方，因此执行流程永远不会到达对侦听器的调用。

顺便说一句，您不需要`executor`在每次调用时都创建，这会削弱执行程序将预先创建的线程池化以等待传入工作的优势。使`BasicHttpClientAsync`构造函数参数的执行器参数：

```
public class Callee implements OnRequestFinishedListener {
      private final ExecutorService executor = Executors.newSingleThreadExecutor();
 ...
      BasicHttpClientAsync httpClient = new BasicHttpClientAsync(this, executor);
 ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T02:11:40.883

原来是因为我没有将 apache 的 HttpComponents 的所有 jars 添加到我的 Java Build Path 中，这导致 HttpClient mHttpClient = new DefaultHttpClient() 抛出异常。但是，我使用的是 Runnable，所以我无法捕捉到该异常。

# gwt - GWT DatePicker 默认为中午

> ID：10235727
> 
> 赞同：3
> 
> 时间：2012-04-19T19:51:04.840
> 
> 标签：gwt, datepicker

DatePicker 返回您单击的日期。但是，Date 对象时间设置为中午。有没有办法将它从中午更改为不同的时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T21:18:02.693

您可以在支持代码中更改对象的值。

```
Datepicker dp;
//UI does some stuff
Date offset = new Date(somemilliseconds); //replace somemilliseconds with the value you want to roll forward or backwards
dp.setValue(dp.getValue()+offset); //or minus 
```

但是 DatePicker UI 元素本身没有时间选择时间（它只是一个日历）来与您的日期一起使用，您将不得不使用不同的 UI 元素来更改您使用 DatePicker 设置的对象（如果您不想使用像上面这样计算的偏移量。）

# java - 无需 I/O 将 BufferedImage 转换为 byte[]

> ID：10235728
> 
> 赞同：13
> 
> 时间：2012-04-19T19:51:05.057
> 
> 标签：java, bufferedimage, javax.imageio, in-memory

您好我在内存中有一个 BufferedImage 实例，出于性能考虑，我想将其转换为 byte[] 以编码为 base64 字符串而无需 I/O 操作。我正在使用以下 API：

```
ByteArrayOutputStream baos = new ByteArrayOutputStream ();
ImageIO.write(image,"png",baos);
return baos.toByteArray(); 
```

但是这个API还是会隐式的将镜像写入OS temp目录，这样会导致底层OS temp目录已满，无法创建temp文件的情况下失败。堆栈跟踪：

```
Caused by: java.io.IOException: No space left on device
    at java.io.RandomAccessFile.write(RandomAccessFile.java:493)
    at javax.imageio.stream.FileCacheImageOutputStream.write(FileCacheImageOutputStream.java:134)
    at javax.imageio.stream.ImageOutputStreamImpl.write(ImageOutputStreamImpl.java:66)
    at com.sun.imageio.plugins.png.PNGImageWriter.write_magic(PNGImageWriter.java:376)
    at com.sun.imageio.plugins.png.PNGImageWriter.write(PNGImageWriter.java:1115)
    at javax.imageio.ImageWriter.write(ImageWriter.java:628)
    at javax.imageio.ImageIO.write(ImageIO.java:1480)
    at javax.imageio.ImageIO.write(ImageIO.java:1554) 
```

是否有一种有效的（如内存转换或高效的 I/O）方式来进行没有 I/O 的转换？请指教。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-19T20:02:07.333

[通过ImageIO.setUseCache()](http://docs.oracle.com/javase/7/docs/api/javax/imageio/ImageIO.html#setUseCache%28boolean%29)方法禁用 ImageIO 缓存：

```
ImageIO.setUseCache(false); 
```

根据 javadoc，默认情况下它是打开的：

> 设置一个标志，指示在创建 ImageInputStreams 和 ImageOutputStreams 时是否应使用基于磁盘的缓存文件。
> 
> 从标准 InputStream> 读取时，可能需要将先前读取的信息保存在缓存中，因为底层流不允许重新读取数据。类似地，当写入标准 OutputStream 时，可以使用缓存来允许更改先前写入的值，然后再将其刷新到最终目的地。
> 
> 缓存可以驻留在主内存或磁盘上。将此标志设置为 false 将禁止将磁盘用于未来的流，这在处理小图像时可能是有利的，因为创建和销毁文件的开销被消除了。
> 
> **在启动时，该值设置为 true。**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-13T16:18:37.877

两次提及`ImageIO.setUseCache(false)`都是正确的。但是，如果您不喜欢全局禁用 ImageIO 的磁盘缓存，另一种方法是将流显式包装在 a 中`MemoryCacheImageOutputStream`（它执行内存缓存而不是磁盘缓存）：

```
ByteArrayOutputStream baos = new ByteArrayOutputStream ();
ImageOutputStream stream = new MemoryCacheImageOutputStream(baos);
ImageIO.write(image, "png", stream);
stream.close();
return baos.toByteArray(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-19T20:02:30.640

默认情况下，即使您只使用流，ImageIO 也会将其缓存写入磁盘。尝试使用以下方法禁用缓存：

```
ImageIO.setUseCache(false); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T23:33:46.573

`((DataBufferByte)img.getRaster().getDataBuffer()).getData()`如果您的图像是字节格式，则自动返回一个字节数组。根本不需要任何 IO。

# sencha-touch-2 - 如何将搜索栏添加到嵌套列表？

> ID：10235735
> 
> 赞同：0
> 
> 时间：2012-04-19T19:52:18.493
> 
> 标签：sencha-touch-2

如何创建带有搜索栏的嵌套列表，该搜索栏应位于标题下方。例如，在第四个 Sencha 嵌套列表示例中，我将如何插入一个搜索栏（下面的代码），使其看起来像这个图像：

[煎茶示例](http://docs.sencha.com/touch/2-0/#!/guide/nested_list)

![在此处输入图像描述](../Images/7de02d74eef7836e66ada28ebff82f9f.png)

示例搜索栏：

```
Ext.define('Sencha.view.SearchBar', {
    扩展：'Ext.Toolbar'，
    xtype : '搜索栏',
    要求：['Ext.field.Text', 'Ext.field.Search'],

    配置：{
        ui: '搜索栏',
        布局：'vbox'，

        项目： [
            {
                xtype：'标题'，
                标题：“搜索”
            },
            {
                xtype: '搜索域',
                placeHolder: '搜索...'
            }
        ]
    }
});

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:09:04.087

您需要在嵌套列表实例化*后*添加它，因此停靠位置正确。

```
var nestedList = Ext.create('Ext.NestedList', {
    ...
});

nestedList.add({
    docked: 'top',
    xtype: 'searchbar',
    height: 100
}); 
```

# c# - Windows 窗体控件不会被隐藏的代码更新

> ID：10235736
> 
> 赞同：0
> 
> 时间：2012-04-19T19:52:19.707
> 
> 标签：c#, winforms, controls, code-behind

我的 Windows 表单项目中的某个表单存在问题。只有一种形式有问题；还有其他几个使用相同类型的引用没有这个问题。

问题是通过后面的代码修改控件实际上并没有在表单上更新它们。从添加从数据库中提取的值到组合框的 Items 集合（通过`.Items.Add()`方法），设置文本框或复选框是否启用，设置文本框的文本或复选框的选中状态的任何操作...没有任何作用。我已经尝试注释掉所有方法中的所有代码，除了为某些控件实际设置启用状态的代码，以确保在我不知道的情况下没有其他任何东西在运行，但问题仍然存在。

正如调试器所示，更改启用状态的代码肯定会被命中，并且启用状态设置正确，取决于条件是真还是假。应该禁用的控件仍然是可编辑的，并且看起来仍然是可编辑的。代码最初是使用智能感知自动填写控件名称编写的，因此从后面的代码链接到表单上的正确控件应该没有任何问题。我还尝试将表单放大并放入空白面板，上面有一个新的文本框和复选框，并通过相同的方法将面板设置为启用或禁用，当它运行时，控件也没有被后面的代码改变了。

关于我可能遗漏的任何建议？这是 Windows 表单的基本功能，我不知道可能是什么问题，而且通过谷歌搜索或搜索此站点也找不到任何类似的问题。

谢谢！

编辑：这是一个应该工作的代码示例，但事实并非如此。类似的代码在其他一些表单上使用没有问题。

当检查一个名为Chkdisable的复选框时，此事件将运行：

```
 private void chkDisable_CheckedChanged(object sender, EventArgs e)
    {
        SetControlsEnabledStatus(!((CheckBox)sender).Checked);
    }

    private void SetControlsEnabledStatus(bool enabledStatus)
    {
        textBox1.Enabled = enabledStatus;
        textBox2.Enabled = enabledStatus;
    } 
```

我 100% 确定此事件连接正确，触发正确，并且文本框的启用状态设置正确。没有其他方法具有可以覆盖它的未注释代码。但是，只要单击复选框后再次加载表单，文本框就会始终处于启用状态。

EDIT2：如果有人因为自己的问题遇到这个问题，这就是导致我的问题的原因：

我不得不从头开始创建一个新表格，才能最终找到它。事实证明，在构造函数和 FormLoad 事件中都调用了 InitializeComponent()。基本上，我创建了一个带有相同控件的新表单，只运行了禁用事件，当我复制加载代码时，禁用停止工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:55:24.487

尝试清理您的解决方案并重新构建一切以开始。（：

如果这不起作用，您可以发布一些代码吗？

**编辑：**

好的，这里没有可查看的代码，...我将提供一些基本建议。

开始将 MessageBox.Show("I executed!") 放在整个表单中。把它放在构造函数/初始化事件中。将它放在单击事件等中。您可能正在某处处理异常，并且更新表单的代码永远没有机会执行。

显然有问题，直到我们可以排除问题存在于您的代码中，我们将假设它存在。如果您发布代码，我们可以将其复制并粘贴到我们自己的项目中，然后查看它的行为。如果可以，那么我们可以确认代码是好的，问题一定存在于其他地方。

希望能有所帮助。（：

**编辑：**

好的，使用您提供的代码，我创建了一个沙盒项目：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WinFormsSandbox
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void chkDisable_CheckedChanged(object sender, EventArgs e)
        {
            SetControlsEnabledStatus(!((CheckBox)sender).Checked);
        }

        private void SetControlsEnabledStatus(bool enabledStatus)
        {
            textBox1.Enabled = enabledStatus;
            textBox2.Enabled = enabledStatus;
        }
    }
} 
```

![在此处输入图像描述](../Images/5ac8650d6187fff303252a1b5f3d8956.png)

![在此处输入图像描述](../Images/8335c555bf04da79861c63fe80bb2582.png)

这个对我有用。您发布的代码中不得存在错误。

**编辑：**

你知道，我讨厌放弃寻找问题的根本原因，但如果这是一个对时间敏感的问题，那么从头开始创建新表单并复制功能可能会更快。（：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T20:32:41.370

我遇到过类似的问题，他们通过在我的表单中添加一个 OnShown 处理程序得到了帮助，该处理程序翻转了一个保护其他事件处理代码的布尔值。这个想法是初始化过程中的某些事情导致控件的事件以您不希望发生的方式触发。这并不理想，但至少作为调试措施可能值得尝试。

# linq - 使用 LINQ 根据字段的值删除重复项

> ID：10235737
> 
> 赞同：-2
> 
> 时间：2012-04-19T19:52:24.937
> 
> 标签：linq

请看以下内容：

```
 DataTable newTable = new DataTable();
        DataColumn colRMID = new DataColumn();
        colRMID.DataType = typeof(System.Int32);
        colRMID.ColumnName = "RMID";

        DataColumn colCpty = new DataColumn();
        colCpty.DataType = typeof(System.String);
        colCpty.ColumnName = "Cpty";

        newTable.Columns.Add(colRMID);
        newTable.Columns.Add(colCpty);

        DataRow r1 = newTable.NewRow();
        r1["RMID"] = 1234;
        r1["Cpty"] = "Internal";
        newTable.Rows.Add(r1);

        DataRow r2 = newTable.NewRow();
        r2["RMID"] = 5678;
        r2["Cpty"] = "Wales Fargo";
        newTable.Rows.Add(r2);

        DataRow r3 = newTable.NewRow();
        r3["RMID"] = 1234;
        r3["Cpty"] = "External";
        newTable.Rows.Add(r3);
        DataRow r4 = newTable.NewRow();
        r4["RMID"] = 9876;
        r4["Cpty"] = "Internal";
        newTable.Rows.Add(r4); 
```

我想删除“Cpty”=“Internal”的所有重复行（具有相同的“RMID”）。所以我在数据表中的最终输出应该是：

```
RMID  Cpty
5678 "Wales fargo"
1234 "External"
9876 "Internal" 
```

我需要使用 LINQ

谢谢， 阿比纳夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T22:04:22.980

这并不完全有效，但它很冗长并展示了这个概念。它还会产生您想要的结果。我相信你可以清理它以更好地满足你的需要。

```
 var excludes = newTable
            .AsEnumerable()
            .GroupBy(row => row.Field<int>("RMID"))
            .Select(groupedRows => new { Rows = groupedRows, Count = groupedRows.Count() })
            .Where(groupedRows => groupedRows.Count > 1)
            .Select(groupedRows => groupedRows.Rows.Single(row => row.Field<string>("Cpty") == "Internal"))
            .Select(row => new { Rmid = row.Field<int>("RMID"), Cpty = row.Field<string>("Cpty") });

        var filteredSet = newTable
            .AsEnumerable()
            .Select(row => new { Rmid = row.Field<int>("RMID"), Cpty = row.Field<string>("Cpty") })
            .Except(excludes); 
```

# asp.net - 如何在军事时间将网格视图中的 varchar 格式化为标准时间

> ID：10235738
> 
> 赞同：0
> 
> 时间：2012-04-19T19:52:26.297
> 
> 标签：asp.net, vb.net, formatting

数据库表中有一个`varchar`格式为军事时间 1230 或 1750 或 1320 的列，该字段被填充到 asp 中的网格视图中。我需要将该字符串转换为标准时间。我已经尝试过 DateFormatString ，但似乎没有任何效果。

asp是

```
<asp:BoundColumn DataField="ScanTime" SortExpression="ScanTime" ReadOnly="True" 
     HeaderText="Scan Time" DataFormatString="{0:hh}:{0:mm} {tt}">
<ItemStyle Width="80px"></ItemStyle>
</asp:BoundColumn> 
```

这`DateFormatString`导致输入字符串的格式不正确。错误。

请帮助我尝试过`hh:mm`类似的组合，但因为它`varchar`我认为它失败了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T21:44:55.313

试一试：

```
Dim myTime as String = "105"
Dim realTime As DateTime = DateTime.Parse(myTime.PadLeft(4, "0")) 
```

# java - 我需要我的 textView 在一行中适合屏幕。android中的任何东西都有自动调整大小功能吗？

> ID：10235740
> 
> 赞同：3
> 
> 时间：2012-04-19T19:52:43.963
> 
> 标签：java, android, fonts, resize, textview

在我的最后一个活动中，我得到了一个 textView，如果它太大，它就会保持相同的大小并转到下一行。有没有办法让我的 textView 缩小，如果它太大，它可以放在一条线上？

所以而不是：

ABCDEFGHIJ（两行大字体）
HIJK

我想：

abcdefghijk（一行小字体）

所以这一切都适合从左到右在 fone 内的一条线上

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-10-28T09:10:24.577

如果您想在 TextView 上自动调整大小，请使用：

```
<TextView
        android:layout_width="60dp"
        android:layout_height="48dp" 
        android:lines="2"
        android:text="Hello world"
        android:autoSizeTextType="uniform"/> 
```

非常重要的是不要使用 android:singleLine="true" 因为它已被弃用。Ans 有一个固定的大小，以便文本的自动调整大小将正常工作。你也可以选择你想要的行数。

另请注意，最小尺寸为 12sp，最大尺寸为 112sp，粒度为 1px。但是如果你想自定义这些尺寸，你可以使用：

```
android:autoSizeMinTextSize="8sp"
android:autoSizeMaxTextSize="100sp"
android:autoSizeStepGranularity="2sp" 
```

您可以添加到上面的 xml 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T08:05:47.170

android:singleLine="true" 文本视图中的这个属性会有所帮助，它不会减小文本的大小，但允许在单行中显示文本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T09:50:47.277

这是自定义 View 子类的工作。创建 View 子类非常容易，在这种情况下，您只需要重写 onDraw 方法，因为您不需要实现任何特殊的用户交互。基本上以参考点大小测量文本的宽度，然后根据绘制文本的大小选择缩放的点大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-14T14:16:47.520

1）将 android:lines="1" 放入您的
文本视图 2）如果您想在行尾添加 3 个点，则将 android:ellipsize="end" 放入您的文本视图

**注意：**
不要使用 android:singleLine="true"，因为它现在已被弃用。

# ffmpeg - 使用 ffmpeg 从 ogg 文件中删除一部分

> ID：10235747
> 
> 赞同：0
> 
> 时间：2012-04-19T19:53:43.230
> 
> 标签：ffmpeg

我使用这个命令来裁剪音频文件：

```
ffmpeg -ss 50 -i "input.ogg" -acodec copy -y -t 100 "output.ogg" 
```

这工作正常。但是现在，我想从音频文件中删除一个部分——最好不要重新压缩它。

示例：input.ogg 的持续时间为 60 秒，删除部分 [10s:20s] => output.ogg 的持续时间为 50 秒，并包括 input.ogg 中的 [0:10s] 和 [20s:60s] 部分。

是否可以使用一个命令或者我必须将文件分成两部分然后再加入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T20:41:21.110

我发现 SoX 可以使用 trim 命令做到这一点，但只能通过重新压缩文件。

# qt - 打印 QWebview 的文本，QPrintDialog 不出现

> ID：10235748
> 
> 赞同：0
> 
> 时间：2012-04-19T19:53:46.467
> 
> 标签：qt, qwebview

我试过这个：

```
QPrintDialog printdia(MyWevView);

printdia.exec(); 

QPrinter* printer = printdia.printer();

QPainter painter(printer);      

MyWevView->render(&painter, MyWevView->pos(),MyWevView->visibleRegion()); 
```

我知道我不检查用户是否接受，但这不是问题......每次，我都看不到对话框，它只是打印

所以首先我不明白为什么 QPrintDialog 没有出现，其次为什么它知道我的打印机并直接打印文本

我想解决我的第一个问题将解决我的第二个问题......

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T10:06:20.893

以下是使用 打印的完整工作示例`QWebView`，`QPrintDialog`可以正常工作：

**赢.h**

```
#ifndef _WIN_H_
#define _WIN_H_

#include <QtGui>
#include <QtWebKit>

class TestWindow : public QMainWindow
{
    Q_OBJECT
    public:
        TestWindow();

    private slots:
        void doPrint();
        void doPrintVis();

    private:
        QWebView* mView;
        Q_DISABLE_COPY(TestWindow)
};

#endif 
```

**赢.cpp**

```
#include "win.h"

TestWindow::TestWindow() :
    QMainWindow(),
    mView(new QWebView())
{
    setCentralWidget(mView); // Takes ownership

    mView->load(QUrl::fromUserInput("http://qt-project.org/doc/qt-4.8/qwebview.html"));

    QToolBar* tools = addToolBar("Tools");
    QAction* printAction = tools->addAction("Print");
    QAction* printVisAction = tools->addAction("Print Visible");

    connect(printAction, SIGNAL(triggered(bool)), this, SLOT(doPrint()));
    connect(printVisAction, SIGNAL(triggered(bool)), this, SLOT(doPrintVis()));
}

void TestWindow::doPrint()
{
    qDebug() << "TestWindow::doPrint()";

    QPrinter printer;
    QPrintDialog printDlg(&printer);
    if (printDlg.exec() == QDialog::Rejected)
        return;

    mView->print(&printer);
}

void TestWindow::doPrintVis()
{
    qDebug() << "TestWindow::doPrintVis()";

    QPrinter printer;
    QPrintDialog printDlg(&printer);
    if (printDlg.exec() == QDialog::Rejected)
        return;

    QPainter painter(&printer);
    mView->render(&painter, mView->pos(), mView->visibleRegion());
} 
```

**测试.cpp**

```
#include <QtGui>
#include <QtWebKit>

#include "win.h"

int main(int argc, char** argv)
{
    QApplication app(argc, argv);

    TestWindow win;
    win.show();

    return app.exec();
} 
```

**test.pro**

```
QT += core gui webkit
SOURCES=test.cpp win.cpp
HEADERS=win.h 
```

# c#-4.0 - 如何使用 Dapper ORM 获取子对象的值？

> ID：10235750
> 
> 赞同：6
> 
> 时间：2012-04-19T19:53:51.390
> 
> 标签：c#-4.0, orm, dapper

我正在使用以下内容检索个人资料详细信息：

```
var profiles = connection.Query<Models.PROFILE>(
    "SELECT * FROM PROFILES WHERE ID=@ID", 
    new { ID = profileID }); // IEnumerable
var profile = profiles.First<Models.PROFILE>(); 
```

profile 对象包含其他集合，例如 profileImages。问题是每个子对象的项目计数为零。另外，我只想获取 profileImages 的数据。

是否需要设置一些东西来查询子对象，如果是，是否可以指定哪一个以及多少级别？

我也尝试过多重映射：

```
var profiles = connection.Query<Models.PHOTOS_PERMISSIONS,
                                Models.PROFILE,
                                Models.PHOTOS_PERMISSIONS>(sql,
                    (p1, p2) => { p1.ID = profileID; return p1; }, 
                    new { ID = profileID }, 
                    splitOn: "OWNER_PROFILESIDFK, ID").AsQueryable();

PHOTOS_PERMISSIONS.OWNER_PROFILESIDFK = PROFILE.ID 
```

并得到以下错误：

> 使用多映射 API 时，如果您有除 Id 以外的键，请确保设置 splitOn 参数名称：splitOn

我已经尝试了我的 splitOn 文本中的内容的变体，但仍然得到相同的错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T08:25:07.130

Dapper 不支持开箱即用的一对多映射。看看这个问题，它可能会有所帮助。

[多映射，一对多](https://stackoverflow.com/questions/6379155/help-with-multi-mapper-to-create-object-hierarchy#6380756)

如果您的 PROFILEIMAGES 表在 PROFILES ID 上有一个 FK - 您可以发出 2 个查询并使用 GridReader。

```
var sql = 
@"
select * from PROFILES where profileId= @id
select * from PROFILEIMAGES where OWNER_PROFILESIDFK = @id";

using (var multi = connection.QueryMultiple(sql, new {id=selectedId}))
{
   var profile = multi.Read<Models.PROFILE>().Single();
   profile.ProfileImages = multi.Read<Model.PROFILEIMAGES>().ToList();
} 
```

# c# - 如何将 C# 变量传递给 Access 2010 查询

> ID：10235751
> 
> 赞同：1
> 
> 时间：2012-04-19T19:53:51.690
> 
> 标签：c#, ms-access, variables

我编写了一个程序，该程序可以在 Access 数据库中读取和写入信息。

**（请参阅下面的屏幕截图和代码）**，效果很好，没有问题但是，我想扩展它，以便能够单击一个附加按钮，并让它检索所有记录，但提示输入日期（或日期范围）第一的。我已经知道如何让 Access 表单或 Access 报表提示，但我希望 C# 程序提示输入日期，并将其传递给查询；然后显示在结果窗口中，如图所示。当报表或表单的表单打开时，这应该消除用户打开 Access。任何帮助表示赞赏，并提前感谢任何建议！

![在此处输入图像描述](../Images/ac24241ca3511ea4ae9fda8463d34206.png)

```
namespace Health_Direct_Receiving
{
    public partial class Form1 : Form
    {

        OleDbConnection vcon = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;data source=C:\Receiving\Database.accdb");

        public Form1()
        {
            InitializeComponent();
        }

        private void label1_Click(object sender, EventArgs e)
        {

        }

        private void Form1_Load(object sender, EventArgs e)
        {
            {
                vcon.Open();
            }
        }

        private void button1_Click(object sender, EventArgs e)
            {
                {
                    if (textBox1.Text == "" || textBox2.Text == "" || textBox3.Text == "")
                        {
                            MessageBox.Show("You must fill in all fields.");
                            return;
                        }
                    else
                        {   
                            OleDbCommand dbCommand;
                            OleDbDataReader dbReader;
                            new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;data source=C:\Receiving\Database.accdb");
                            dbCommand = new OleDbCommand("select count(*) as Record_Count from script_received", vcon);

                            dbReader = dbCommand.ExecuteReader();
                            if (dbReader.Read() == true)
                                rowCount = dbReader["Record_Count"].ToString();
                            else
                            return;

                            var date = DateTime.Now.ToString("MM/dd/yyyy");

                            {
                                using(OleDbCommand command = new OleDbCommand("INSERT INTO script_received (script, qty, emp_id, received_Date) VALUES (@script,@qty,@emp_Id,@rec_date)")) 
                                  {
                                      command.CommandType = CommandType.Text;
                                      command.Parameters.Add("@script", OleDbType.Integer).Value = textBox1.Text; 
                                      command.Parameters.Add("@qty", OleDbType.VarChar).Value = textBox2.Text;
                                      command.Parameters.Add("@emp_id", OleDbType.VarChar).Value = textBox3.Text;
                                      command.Parameters.Add("@rec_date", OleDbType.Date).Value = date; 
                                      command.Connection = vcon;

                                      //vcon.Open();

                                      command.ExecuteNonQuery();
                                  }

                                    this.textBox1.Clear();
                                    this.textBox2.Clear();
                                    this.textBox1.Focus();
                        }
                    }
                }
            }

        private void button2_Click(object sender, EventArgs e)
            {
                new Form2().Show();
            }

        private void button3_Click(object sender, EventArgs e)
            {
                new Form3().Show();
            }

        private void button4_Click(object sender, EventArgs e)
            {
                Application.Exit();
            }
        public object rowCount { get; set; }
    }
} 
```

* * *

## 表格2

```
namespace Receiving
           {
              public partial class Form2 : Form
                 { 
                   public Form2() 
                      {
                         InitializeComponent();
                      }
                   private void Form2_Load(object sender, EventArgs e)
                      {
                   this.script_receivedTableAdapter.Fill(this.DatabaseDataSet.script_received);
                      }
                   private void button2_Click(object sender, EventArgs e)
                      {
                         this.Close();
                  }
            }
       } 
```

* * *

表格 3

* * *

```
namespace Receiving 
    {
        public partial class Form3 : Form
            {
                public Form3()
                    {
                        InitializeComponent();
                    }
                private void Form3_Load(object sender, EventArgs e)
                    {                 this.script_All_ReceivedTableAdapter.Fill(this.DatabaseDataSet.script_All_‌​Received); 
                    }
                private void button2_Click(object sender, EventArgs e)
                    {
                        this.Close(); 
                    }
            }
    } 
```

# python - 从 Python 中的子目录导入 csv

> ID：10235752
> 
> 赞同：2
> 
> 时间：2012-04-19T19:54:09.550
> 
> 标签：python

我的项目有一堆 csv 文件，可能会或可能不会根据用户输入调用。我想将这些文件存储在一个子目录中，以保持我的项目文件夹整洁。我对如何做到这一点感到非常困惑。我挖掘的大多数资源都涉及从子目录而不是基本数据文件导入模块或包。

导入我的 csv 的代码行当前如下所示：

```
target_doc = csv.reader(open('sample.csv', 'rU'), delimiter=",", quotechar='|') 
```

我假设解决方案将涉及设置路径变量，使用 import os 和 import sys，并且可能将这条线分成多个部分？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T19:55:59.467

您可以通过文件路径打开文件。只需使用`open('/path/to/file')`.

仅模块和包需要导入 - Python 源代码。

这里唯一真正的注意事项是使用[`os.path.join()`](http://docs.python.org/library/os.path.html#os.path.join)where 连接路径，以便在不同的操作系统和文件系统之间实现良好的兼容性。无论涉及文件，该[`os.path`](http://docs.python.org/library/os.path.html)模块的其余部分也值得一看。Windows 路径的另一个常见陷阱是使用反斜杠转义字符，因此您必须转义反斜杠 ( `"some\\file"`) - 一个丑陋的选项，使用原始字符串 ( `r"some\file"`)，使用正斜杠（Python 实际上会自动处理这个），或者 - 最好的选择，将您的路径作为参数传递给上述`os.path.join()`.

还可能值得注意的是，使用[该`with`语句](http://docs.python.org/reference/compound_stmts.html#the-with-statement)会改进您的代码。

例如：

```
with open(os.path.join("path", "to", "file.csv"), 'rU') as file:
    target_doc = csv.reader(file, delimiter=",", quotechar='|')
    ... 
```

使用`with`确保您的文件被关闭 - 即使发生异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T19:59:04.073

您可以使用

```
import os
cwd = os.path.dirname(__file__) # get current location of script 
```

然后使用 os.path.join(cwd, 'some/../path') 构造到您喜欢的任何位置的绝对路径；因此，您的路径仅与您的脚本位置相关，而与 python 解释器的当前工作目录无关。如果您不想依赖 unix 的“/”约定，Mai 也可以使用 os.sep。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T20:01:50.307

你走错了路。Python 路径和导入仅用于将其他 Python 代码“链接”到您的系统中。通过指定文件的完整路径来访问系统用作资源的其他文件：

```
 target_doc = csv.reader(open('/resources/csv_files/sample.csv', 'rU'), delimiter=",", quotechar='|') 
```

或运行 python 文件的相对路径：

```
 target_doc = csv.reader(open('csv_files/sample.csv', 'rU'), delimiter=",", quotechar='|') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-15T12:35:06.937

你为什么不简单地使用：

path_in = '/directory_whatever_it_is/sample_data.csv'

sample_data = pd.read_csv(path_in)

# c# - 了解在多线程代码中捕获异常并进行延续

> ID：10235754
> 
> 赞同：0
> 
> 时间：2012-04-19T19:54:14.400
> 
> 标签：c#, multithreading, .net-4.0, exception-handling, task-parallel-library

我正在检查我正在做的一些工作，并认为我会更多地关注它。我在生产中的代码给我们带来了麻烦。它使用多线程，我*对该*领域比较陌生。我采用了我认为有问题的代码，并试图将其隔离到其核心，并一直在摆弄我的“模型”。这是我想出的。我希望有人愿意分享任何反馈。提前致谢。

```
 static void Main(string[] args)
    {
        var semaphoreSlim = new SemaphoreSlim(3);

        Console.WriteLine("Starting loop");

        var foo = new[] {1, 2, 3, 4, 5, 6};

        foreach (var i in foo)
        {
            Console.WriteLine("Queueing task {0}", i);

            var j = i;
            var sl = i*1000;

            var task = Task.Factory.StartNew(() =>
            {
                semaphoreSlim.Wait();

                try
                {
                    Console.WriteLine("Task {0} started - sleep {1} ms", j, sl);
                    Thread.Sleep(sl);
                    if (j == 2 || j == 5) throw new Exception("error");
                    Console.WriteLine("Task {0} done", j);
                }
                catch (Exception)
                {
                    Console.WriteLine("Caught exception {0}", j);
                    throw;
                }
                finally
                {
                    semaphoreSlim.Release();
                }
            });

            task.ContinueWith(x => Console.WriteLine("Continuation: Completed {0}", j),
                                       TaskContinuationOptions.OnlyOnRanToCompletion);

            task.ContinueWith(x => Console.WriteLine("Continuation: Faulted {0}", j),
                                       TaskContinuationOptions.OnlyOnFaulted);
        }

        Console.WriteLine("Finished loop");

        Console.ReadLine();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-09T05:44:28.887

“进程似乎跳过了一些成员”问题是如何出现的？

如果您在输出中看到“已完成循环”时认为流程已完成，原因是您的任务可能尚未完成。

在编写“完成循环”之前等待创建的任务完成。

# android - 用于拉出类似 Spinner 的菜单的按钮

> ID：10235760
> 
> 赞同：0
> 
> 时间：2012-04-19T19:54:45.813
> 
> 标签：android, button, spinner

我想设置一个按钮，单击该按钮时将从我的数据库中提取数据并填写一个列表（例如使用微调器时）。我以前使用过弹出菜单，但还没有找到让它们浮动的方法（任何人都知道如何将大小设为浮动而不是像素）。有没有办法让按钮像微调器一样拉出列表，或者改变我的 ui 以拥有微调器而不是使用可点击的图像按钮对我来说更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T20:11:35.693

您可以创建一个对话框，该对话框采用您的项目适配器

```
YourCustomAdapter adapter = new YourCustomAdapter(/**whatever args you need to get your content**/);
int selectedItem = -1; //somehow get your previously selected choice
Builder builder = new Builder(context);
builder.setSingleChoiceItems(adapter, selectedItem, new DialogInterface.OnClickListener() {

    @Override
    public void onClick(DialogInterface dialog, int which)
    {
         //handle the item you clicked here

    }
};
builder.setTitle("Select Attachments").setCancelable(true);

Dialog dialog = builder.create(); 
```

请注意，如果您需要选择多个项目，则有多种选择项目的方法。builder.setMultipleChoice...

# c++ - 实现混合列表，模板问题

> ID：10235761
> 
> 赞同：3
> 
> 时间：2012-04-19T19:55:01.390
> 
> 标签：c++, templates

我正在尝试实现一个混合列表，所以例如我可以这样做：

```
mylist* l= new mylist();
l.push_back<int> (4);
l.push_back<string> ("hello"); 
```

这是一个练习，因此不是使用其他库（如 boost）的有效解决方案。这是仍然很少有方法的类：

```
template <class T>
class node
{
private:

    void* next;
    void* prev;
    T data;

public:

    node(T data)
    {
        this->data=data;
    }

    template <class R>
    void link_to (node<R>& other)
    {
        next=&other;
        other.prev=this;
    }

}; 
```

因为我不知道如何管理使用 void 指针这一事实，所以我无法真正转换它的真实类所指向的数据。使用 dynamic_cast 我应该尝试所有类型（节点、节点等），所以它不是一个可接受的解决方案。因此，例如，如果我想打印一系列节点，我不能这样做：

```
int main(int argc, char** argv)
{
// for this example let's suppose that node fields were public
    node<int> a(1),c(2);
    node<std::string> b; 
    a.linkTo(b);
    b.linkTo(c);
    std::cout << a.data;  // this is ok but I need to print also other nodes
// let's suppose that b and c were unreachable and that I want to reach them
// by iterating into the list
    void* ptr=a.next; //public field
    cout << ptr->data; //can't do that in C++
} 
```

整个问题是我不知道我迭代到的每个元素的类型是什么。所以下一个可以是节点或节点或节点等......但是如何解决这个问题？我将能够知道每个节点的类型，但我不能。那么如何实现混合列表呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T23:57:01.483

由于您不知道要存储哪种对象，我认为最简单的方法是将 void 指针存储到对象的已分配副本。

接下来，您将需要与对象一起存储某种类型的标签。您也许可以使用.`type_info`返回的对象的地址`typeid`。

我看到其他一些我不知道如何解决的问题。要销毁列表，您需要为每个元素创建一个析构函数。当您知道类型时，也许您可​​以在元素创建期间存储析构函数的地址。

# sql-server - 来自控制台应用程序的命名管道错误 40

> ID：10235762
> 
> 赞同：0
> 
> 时间：2012-04-19T19:55:04.387
> 
> 标签：sql-server, visual-studio, sql-server-2005, console-application

我在从我的开发机器连接到 sql 2005 实例时遇到了一些困难。数据库服务器在开放的互联网上。数据库服务器在非标准端口上运行，所以我在 sql config manager 中配置了一个别名。

我一直在使用这个数据库来开发 Web 应用程序。我可以从我的开发机器上通过 Visual Studio + cassini 运行的 Web 应用程序连接到它。此外，我可以使用 sql server management studio 连接到它（通过别名）。

然而，当我运行我的控制台应用程序时，我在尝试打开连接时收到命名管道错误 40 错误。我正在使用相同的连接字符串和相同的代码。

我正在撕扯我的头发 - 当你在谷歌上搜索如何处理这个错误时，那里有很多东西，但它通常是它有效或无效的情况 - 它在管理工作室和网络应用程序中不起作用，但不是控制台应用程序。

有没有人有类似的事情，或者有任何可能有帮助的指针？

谢谢

滑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T23:18:54.280

可能您帐户的[客户端协议配置](http://technet.microsoft.com/en-us/library/ms181035%28v=sql.105%29.aspx)已启用命名管道协议并且优先级高于 TCP（这是默认情况），而 Web 服务帐户已禁用它或优先级低于 TCP（这是曾经明确进行更改的事情）它从默认）。您可以从您自己的帐户客户端协议设置中禁用命名管道（上面的链接显示了如何），或者最好从连接字符串中显式强制 TCP，请参阅[如何在连接字符串中使用服务器名称参数来指定客户端网络图书馆](http://support.microsoft.com/kb/313295)。

# actionscript-3 - 我可以将对象列表放在数组或类似的东西中吗？AS3

> ID：10235764
> 
> 赞同：0
> 
> 时间：2012-04-19T19:55:16.680
> 
> 标签：actionscript-3, flash, actionscript

我对编码很陌生，我想知道是否可以将对象列表放入数组中以进行碰撞。

而不是写...如果 player.hitTestObject(wall1) 然后是墙 2 然后是墙 3？

我可以将它们全部放在一个数组或其他东西中，所以我可以说如果 player.hitTestObject(everywall)

谢谢。我的代码看起来像这样，我有大约 30 面墙。

如果有人发布示例，我将不胜感激。

```
function keydown(event:KeyboardEvent) :void {

switch(event.keyCode){

    case Keyboard.LEFT :

    hero.x -= 10;

    if(hero.hitTestObject(w1) || hero.hitTestObject(w2) || hero.hitTestObject(w3) || hero.hitTestObject(w4)){
    hero.x +=10;}
    break;

    case Keyboard.RIGHT:
    hero.x +=10;
    if(hero.hitTestObject(w1) || hero.hitTestObject(w2) || hero.hitTestObject(w3) || hero.hitTestObject(w4)){
    hero.x -=10;}
    break;

    case Keyboard.UP:
    hero.y -=10;
    if(hero.hitTestObject(w1) || hero.hitTestObject(w2) ||  hero.hitTestObject(w3) || hero.hitTestObject(w4)){
    hero.y +=10;}

    break;

    case Keyboard.DOWN:
    hero.y += 10;
    if(hero.hitTestObject(w1) || hero.hitTestObject(w2) ||  hero.hitTestObject(w3) || hero.hitTestObject(w4)){
    hero.y -=10;}
    break;

    default  :
    break;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T20:01:43.457

如[Actionscript Docs](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#hitTestObject%28%29)所示，`hitTestObject()`将 a`DisplayObject`作为参数，而不是任何类型的列表。

如果你愿意，你可以自己实现这种功能。

```
function myHitTest(obj:DisplayObject, arr:Array):Boolean {
    for (var i:int = 0; i < arr.length; ++i) {
    //for (var item:DisplayObject in arr) {
        var item:DisplayObject = arr[i]
        if (obj.hitTestObject(item)) {
            return true;
        }
    }

    return false;
} 
```

然后你可以使用它...

```
if(myHitTest(hero,[w1,w2,w3]))
    ... 
```

或者

```
var everywall:Array = [w1,w2,w3];
...
if(myHitTest(hero,everywall))
    ... 
```

# php - in_array 函数没有给出预期的结果

> ID：10235767
> 
> 赞同：2
> 
> 时间：2012-04-19T19:55:24.763
> 
> 标签：php, arrays, newline

如果值存在，我正在使用`in_array`在数组中搜索。我的代码如下：

```
$file = 'domains.txt'; //reading txt file
$lines = file($file);//file in to an array

if (in_array("yahoo.com", $lines)) {
    echo "Got Domain";
} 
```

但是，它不起作用，它只显示一个空白页面，但 yahoo.com 在 domain.txt 中可用，所以它应该返回 true，但我坚持下去，请帮助，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T19:56:48.390

调用时添加`FILE_IGNORE_NEW_LINES`标志[`file()`](http://php.net/file)：

```
$lines = file($file, FILE_IGNORE_NEW_LINES); 
```

当读取 yahoo.com 的行时，它被存储为：

```
"yahoo.com\n" 
```

上面的标志将告诉[`file()`](http://php.net/file)不要将换行符 ( `\n`) 附加到返回数组中的每个字符串。

# php - 组合 PHP 函数

> ID：10235771
> 
> 赞同：0
> 
> 时间：2012-04-19T19:55:42.073
> 
> 标签：php

我继承了一些解析 xml 文件以填充一个充满无序列表的页面的 php，并且想知道是否有一种方法可以整合 php 函数以提高它们的效率。

大约有 25 个函数，如下所示：

```
function oaAccounting(){

  // load SimpleXML
  $term = new SimpleXMLElement('training_list.xml', null, true);
  echo <<<EOF
  <ul>
EOF;

  foreach($term as $term)
  {
     if(preg_match("/accounting/i", $term->keyword)){
        echo <<<EOF
        <li>{$term->name}</li>
EOF;
     }
  }
  echo '</ul>';
} 
```

每个人都扫描 xml 文件以查找它正在搜索的术语/关键字，并将该术语作为列表元素添加到特定于该函数的无序列表中。下一个函数执行相同的操作，但使用不同的术语/关键字并将其添加到单独的无序列表中。

有没有办法将所有这些结合起来以防止必须连续执行 25 次 foreach 和 if ？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:00:35.300

**抽象**你的功能。

将**文件**和**搜索词**作为参数传递给函数，然后使用它。

就像是：

```
function parse_xml_file($file, $terms) 
```

然后在调用函数时使用 pass`$file`和。`$terms`

有关详细信息，请参阅**[大坏手册](http://il.php.net/manual/en/language.functions.php)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T19:57:36.463

这个修改后的函数接受一个参数，即要查找的单词，然后在 preg_match() 函数中使用它。因此，要使用它，您需要做的就是用您要搜索的术语来调用它。这应该替换所有硬编码功能。

```
function searchXML($search){

    // load SimpleXML
    $terms = new SimpleXMLElement('training_list.xml', null, true);
    echo <<<EOF
    <ul>
    EOF;
    foreach($terms as $term)
    {
        if(preg_match("/$search/i", $term->keyword)){
            echo <<<EOF
            <li>{$term->name}</li>
        EOF;
    }}
    echo '</ul>';
} 
```

# php - 使用 php 和 MWS 检索库存

> ID：10235777
> 
> 赞同：6
> 
> 时间：2012-04-19T19:56:05.613
> 
> 标签：php, amazon-web-services, inventory, amazon-mws

我需要创建一个 PHP 脚本，用于从亚马逊检索和更新我的库存到我的个人网页。这可以用 MWS 或任何 WS 完成吗？并且还需要在我的网站前面显示我在亚马逊拥有的所有产品，并显示一个链接供用户通过亚马逊购买这些商品。

有什么帮助吗？

干杯，非常感谢提前

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T13:43:32.907

是的。

使用亚马逊 mws api，特别是[此处的报告部分](https://developer.amazonservices.com/gp/mws/api.html?ie=UTF8&section=reports&group=bde&version=latest)

您应该（通过 RequestReport）请求“公开列表报告”。几分钟后，亚马逊会给您一个 CSV，其中包含您的所有商品，包括 SKU、ASIN、数量和价格。

当您想要显示这些列表时，您需要自己显示它们。您可以使用一些图片链接到 ASIN，因此您可能需要自己获取这些图片和标题（可能使用其他 ReportType）。

您可以在[亚马逊 MWS Scratchpad](https://mws.amazonservices.com/scratchpad/index.html)中使用该 API 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-28T22:41:36.243

对于使用亚马逊 FBA 的任何人；使用 Fulfillment Inventory API：[http ://docs.developer.amazonservices.com/en_US/fba_inventory/](http://docs.developer.amazonservices.com/en_US/fba_inventory/)

（至少；检索您当前的库存；也许不是 100% 提问者的要求，但几年后我到达此页面寻找相同的东西，但使用 FBA）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T20:00:29.723

亚马逊 MWS 仅用于创建新产品并将其同步到您的亚马逊卖家中心或从您的网站自动更改价格或获取报告或订单处理。我不认为您可以使用在您的网站上显示亚马逊商店。

*   [https://developer.amazonservices.co.uk/doc/bde/feeds/v20090901/php.html](https://developer.amazonservices.co.uk/doc/bde/feeds/v20090901/php.html)
*   [https://developer.amazonservices.co.uk/gp/mws/docs.html](https://developer.amazonservices.co.uk/gp/mws/docs.html)
*   [http://www.amazonsellercommunity.com/forums/forum.jspa?forumID=43](http://www.amazonsellercommunity.com/forums/forum.jspa?forumID=43)

# linux - scp 从 Linux 到 Windows

> ID：10235778
> 
> 赞同：99
> 
> 时间：2012-04-19T19:56:05.837
> 
> 标签：linux, windows, path, file-transfer, scp

我在 Windows 机器上运行 putty 客户端以成功连接到 Linux 机器。现在我希望能够将文件从 Linux 机器复制`/home/ubuntu/myfile`到`C:/Users/Anshul/Desktop`本地计算机上的路径下。Windows 机器上的用户是`anshul`. 我在腻子上给出以下命令，但它不起作用：

```
scp /home/ubuntu/myfile ip_address_of_windows_machine:C:/Users/Anshul/Desktop 
```

我认为Windows机器的路径是错误的。请帮忙，因为我已经在大量论坛上敲了敲头，但似乎没有一个为 Windows 服务器提供正确的路径。不要建议其他选项，例如`WinScp`

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2018-03-12T06:04:34.890

这个对我有用。

```
scp /home/ubuntu/myfile username@IP_of_windows_machine:/C:/Users/Anshul/Desktop 
```

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2016-06-08T20:49:28.780

`pscp`从[Putty 下载页面下载](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)，然后从 Windows 命令行使用它，`CMD`如下所示：

```
pscp username_linux_machine@ip_of_linux_machine:/home/ubuntu/myfile.ext C:\Users\Name\Downloads 
```

一旦您输入 Linux 机器的密码，复制就会开始。

* * *

## 回答 #3

> 赞同：65
> 
> 时间：2014-06-10T11:57:21.950

试试这个，真的很管用。

```
$ scp username@from_host_ip:/home/ubuntu/myfile /cygdrive/c/Users/Anshul/Desktop 
```

并用于复制所有文件

```
$ scp -r username@from_host_ip:/home/ubuntu/ *. * /cygdrive/c/Users/Anshul/Desktop 
```

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2019-01-04T13:18:57.957

通过 Git Bash 控制台从 Windows 访问（也适用于 CMD 和 PowerShell）：

```
scp user@ip:/dir1/dir2/file "D:\dir1\dir2" 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2015-02-16T23:58:46.520

你可以使用类似下面的东西

```
scp -r linux_username@linux_address:path/to/file path/to/local/directory 
```

这将复制到您当前正在使用的系统上`file`的指定本地。`directory`

如果远程是目录，则该`-r`标志告诉`scp`递归复制。`file`

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-04-19T19:59:47.407

Windows 本身不支持`SSH/SCP/SFTP`。您是否在该 Windows 服务器上运行 SSH 服务器应用程序？如果是这样，则配置选项之一可能是根所在的位置，您将指定相对于该根的路径。无论如何，请检查您在 Windows 中运行的 SSH 服务器应用程序的文档。

或者，使用`smbclient`将文件推送到 Windows 共享。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-02-19T12:09:39.390

您的代码不起作用，因为 c:/ 或 d:/ 对于**linux 是完全错误的，只需使用 /mnt/c 或 /mnt/c**

**在本地 windows10-ubuntu bash 中使用以下命令：**

**下载：（** 从您的远程服务器文件夹到 d:/ubuntu）：

```
scp username@ipaddress:/folder/file.txt /mnt/d/ubuntu 
```

然后在需要时输入您的远程服务器密码。

**上传：（** 从 d:/ubuntu 到远程服务器）：

```
scp /mnt/d/ubuntu/file.txt username@ipaddress:/folder/file.txt 
```

然后在需要时输入您的远程服务器密码。注意：我测试过并且有效。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-10-03T12:31:01.113

对于所有使用“Git Bash”完全安装了 Git 的人：你可以写：

```
scp login@ip_addres:/location/to/folders/file.tar . 
```

（末尾有空格和点以复制到当前位置）。不仅仅是添加证书（y），写密码就可以了。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-12-14T12:47:07.323

下载并安装腻子后，我必须像上面的 Hesham 帖子一样使用 pscp。我在 Windows 上从 Linux 对 Windows 进行了操作，所以我输入了以下内容：

```
c:\ssl>pscp username@linuxserver:keenan/ssl/* . 
```

这会将keeanan/ssl 文件夹中的所有内容复制到您从(c:\ssl) 执行此命令的本地文件夹(.)。keenan/ssl 将指定用户名用户的主文件夹，例如完整路径为 /home/username/keenan/ssl。您可以使用正斜杠 (/) 指定不同的文件夹，例如

```
c:\ssl>pscp username@linuxserver:/home/username/keenan/ssl/* . 
```

因此，您可以使用`:/`.

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-03-15T06:00:38.183

**将文件从 windows 发送到 linux 系统**

*scp path-to-file user@ipaddress:/path-to-destination*

例子：

```
scp C:/Users/adarsh/Desktop/Document.txt root@127.0.0.1:/tmp 
```

请记住，Windows 路径中的文件需要使用正斜杠（/）代替反斜杠（\），否则将显示错误

> C:UsersadarshDesktopDocument.txt：没有这样的文件或目录

. 执行 scp 命令后，您将在 linux 机器中询问**root 用户的密码**。你去...

**将文件从linux发送到windows系统**

*scp -r user@ipaddress:/path-to-file path-to-destination*

例子：

```
scp -r root@127.0.0.1:/tmp/Document.txt C:/Users/adarsh/Desktop/ 
```

并提供您的 linux 密码。您必须在此命令中添加的唯一一个是**-r**。谢谢。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-06-27T03:37:37.557

正如@Hesham Eraqi 建议的那样，它以这种方式对我有用（从Ubuntu转移到Windows（我试图在该答案中添加评论，但由于声誉，我不能））：

```
pscp -v -r -P 53670 user@xxx.xxx.xxx.xxx:/data/genetic_map/sample/P2_283/* \\Desktop-mojbd3n\d\cc_01-1940_data\ 
```

在哪里：

`-v`: 显示详细信息。
`-r`: 递归复制目录。
`-P`: 连接到指定端口。
`53670`: 连接 Ubuntu 服务器的端口号。
`\\Desktop-mojbd3n\d\genetic_map_data\`: 我需要转移到外部硬盘，因此我必须授予此设备的共享权限。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-08-28T12:47:19.293

以下是使用 ssh 无需密码的 SCP 将文件从 Linux 复制到 Windows 的解决方案：

1.  在 Linux 机器上安装 sshpass 以跳过密码提示

2.  脚本

    `sshpass -p 'xxxxxxx' scp /home/user1/*.* testuser@x.x.x.x:/d/test/`

细节：

```
sshpass -p 'password' scp /source_path/*.* windowsusername@windowsMachine_ip:/destination_drive/subfolder/ 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-04-07T06:02:24.713

打开 bash 窗口。**最好是 git bash**。写

**scp 用户名@remote_ip:/directory_of_file/filename 'windows_location_you_want_to_store_the_file'**

例子：

假设你的用户名是**gem**

你的 IP 是**176.35.96.32**

您的远程文件位置是**/usr/local/forme**

你的文件名是**logs.zip**

并且您想存储在您的**Windows PC 的 D 驱动器窗体文件夹** 中，那么命令将是

**scp Jewel@17​​6.35.96.32:/usr/local/forme/logs.zip 'D:/forme'**

**将本地文件目录保留在单引号内。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2016-07-29T00:35:02.257

我知道这很旧，但我也在为此苦苦挣扎。我还没有找到更改目录的方法，但是如果您只想使用 C 驱动器，则 scp 默认为 C。要从 Ubuntu scp 到 Windows，我最终不得不使用（注意双反斜杠）：

> scp /local/file/path user@111.11.11.111:Users\\Anshul\\Desktop

希望这可以帮助某人。

* * *

## 回答 #15

> 赞同：-7
> 
> 时间：2013-01-12T02:50:40.807

尝试这个：

```
scp /home/ubuntu/myfile C:\users\Anshul\Desktop 
```

* * *

## 回答 #16

> 赞同：-11
> 
> 时间：2012-09-04T07:38:22.000

如果要将粘贴文件从 Unix 复制到 Windows 和 Windows 到 Unix，只需使用端口 22 的 filezilla。

# android - 有没有办法让 TabHost 的标签表现得像 View.GONE？

> ID：10235780
> 
> 赞同：0
> 
> 时间：2012-04-19T19:56:12.857
> 
> 标签：android

我想知道如何以编程方式执行此操作。将所有标签更改为空字符串将是一场噩梦。我正在寻找可以切换的偏好。

# sql-server - 如何使用函数从 SQL Server 中的字符串中删除所有 HTML（em/strong 除外）？

> ID：10235781
> 
> 赞同：0
> 
> 时间：2012-04-19T19:56:15.200
> 
> 标签：sql-server, sql-server-2005, function, substring

我有这个功能：

```
CREATE FUNCTION [dbo].[udf_StripHTML]
(@HTMLText VARCHAR(MAX))
RETURNS VARCHAR(MAX)
AS
BEGIN
DECLARE @Start INT
DECLARE @End INT
DECLARE @Length INT
SET @Start = CHARINDEX('<',@HTMLText)
SET @End = CHARINDEX('>',@HTMLText,CHARINDEX('<',@HTMLText))
SET @Length = (@End - @Start) + 1
WHILE @Start > 0
AND @End > 0
AND @Length > 0
BEGIN
SET @HTMLText = STUFF(@HTMLText,@Start,@Length,'')
SET @Start = CHARINDEX('<',@HTMLText)
SET @End = CHARINDEX('>',@HTMLText,CHARINDEX('<',@HTMLText))
SET @Length = (@End - @Start) + 1
END
RETURN LTRIM(RTRIM(@HTMLText))
END 
```

我需要剥离除标签之外`<em>`的所有内容。`<strong>`

谢谢

托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T19:58:59.980

通过 clr 函数进行 xslt 转换（例如，来自 MDS 程序集的那个）

**更新**

这是使用 XSLT 转换方法的答案：[How to remove all tags except some using Nokogiri](https://stackoverflow.com/questions/4885300/how-to-remove-all-tags-except-for-some-using-nokogiri)

**更新 2**

那么剩下的唯一选择就是使用正则表达式。再次通过 CLR 函数。

[去除除链接之外的所有 HTML 标签](https://stackoverflow.com/questions/44078/strip-all-html-tags-except-links)

**MDS 组件的安装**

[在没有 MDS 的情况下部署 SQL 2008 R2 MDS 函数](https://stackoverflow.com/questions/3604371/deploy-sql-2008-r2-mds-functions-without-mds)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:29:25.447

编辑：以下是我用于解决问题的内容，因为我的 HTML 非常具体。我最初的问题的正确答案是我在上面被丹尼斯接受的那个。

我使用的数据非常具体。

我需要删除的标签都是大写字母，即：

我想保留的是小写，即：

所以我可以用 PATINDEX 而不是 CHARINDEX 轻松做到这一点：

```
ALTER FUNCTION [dbo].[udf_StripHTMLlinks]
(@HTMLText VARCHAR(MAX))
RETURNS VARCHAR(MAX)
AS
BEGIN
DECLARE @Start INT
DECLARE @End INT
DECLARE @Length INT
SET @Start = PATINDEX('%<[/ABCDEFGHIJKLMNOPQRSTUVWXYZ][/ABCDEFGHIJKLMNOPQRSTUVWXYZ    >]%',@HTMLText COLLATE SQL_Latin1_General_CP1_CS_AS)
SET @End = CHARINDEX('>',@HTMLText,PATINDEX('%<[/ABCDEFGHIJKLMNOPQRSTUVWXYZ][/ABCDEFGHIJKLMNOPQRSTUVWXYZ >]%',@HTMLText COLLATE SQL_Latin1_General_CP1_CS_AS))
SET @Length = (@End - @Start) + 1
WHILE @Start > 0
AND @End > 0
AND @Length > 0
BEGIN
SET @HTMLText = STUFF(@HTMLText,@Start,@Length,'')
SET @Start = PATINDEX('%<[/ABCDEFGHIJKLMNOPQRSTUVWXYZ][/ABCDEFGHIJKLMNOPQRSTUVWXYZ >]%',@HTMLText COLLATE SQL_Latin1_General_CP1_CS_AS)
SET @End = CHARINDEX('>',@HTMLText,PATINDEX('%<[/ABCDEFGHIJKLMNOPQRSTUVWXYZ][/ABCDEFGHIJKLMNOPQRSTUVWXYZ >]%',@HTMLText COLLATE SQL_Latin1_General_CP1_CS_AS))
SET @Length = (@End - @Start) + 1
END
RETURN LTRIM(RTRIM(@HTMLText))
END 
```

感谢您的输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-30T16:54:25.727

您可以使用 SQL 函数，例如：

```
ALTER FUNCTION [dbo].[StripOutHTML]
(
    @HTMLText VARCHAR(max),
    @stripDisallowedOnly BIT
)
returns VARCHAR(max) 
AS 
  BEGIN 
      DECLARE @Start INT
      DECLARE @End INT
      DECLARE @Length INT 

      -- Replace the HTML entity & with the '&' character (this needs to be done first, as  
      -- '&' might be double encoded as '&amp;')  
      SET @Start = Charindex('&amp;', @HTMLText) 
      SET @End = @Start + 4 
      SET @Length = ( @End - @Start ) + 1 

      WHILE ( @Start > 0 
              AND @End > 0 
              AND @Length > 0 ) 
        BEGIN 
            SET @HTMLText = Stuff(@HTMLText, @Start, @Length, '&') 
            SET @Start = Charindex('&amp;', @HTMLText) 
            SET @End = @Start + 4 
            SET @Length = ( @End - @Start ) + 1 
        END 

      -- Replace the HTML entity < with the '<' character  
      SET @Start = Charindex('&lt;', @HTMLText) 
      SET @End = @Start + 3 
      SET @Length = ( @End - @Start ) + 1 

      WHILE ( @Start > 0 
              AND @End > 0 
              AND @Length > 0 ) 
        BEGIN 
            SET @HTMLText = Stuff(@HTMLText, @Start, @Length, '<') 
            SET @Start = Charindex('&lt;', @HTMLText) 
            SET @End = @Start + 3 
            SET @Length = ( @End - @Start ) + 1 
        END 

      -- Replace the HTML entity > with the '>' character  
      SET @Start = Charindex('&gt;', @HTMLText) 
      SET @End = @Start + 3 
      SET @Length = ( @End - @Start ) + 1 

      WHILE ( @Start > 0 
              AND @End > 0 
              AND @Length > 0 ) 
        BEGIN 
            SET @HTMLText = Stuff(@HTMLText, @Start, @Length, '>') 
            SET @Start = Charindex('&gt;', @HTMLText) 
            SET @End = @Start + 3 
            SET @Length = ( @End - @Start ) + 1 
        END 

      -- Replace the HTML entity & with the '&' character  
      SET @Start = Charindex('&amp;amp;', @HTMLText) 
      SET @End = @Start + 4 
      SET @Length = ( @End - @Start ) + 1 

      WHILE ( @Start > 0 
              AND @End > 0 
              AND @Length > 0 ) 
        BEGIN 
            SET @HTMLText = Stuff(@HTMLText, @Start, @Length, '&') 
            SET @Start = Charindex('&amp;amp;', @HTMLText) 
            SET @End = @Start + 4 
            SET @Length = ( @End - @Start ) + 1 
        END 

      -- Replace the HTML entity   with the ' ' character  
      SET @Start = Charindex('&nbsp;', @HTMLText) 
      SET @End = @Start + 5 
      SET @Length = ( @End - @Start ) + 1 

      WHILE ( @Start > 0 
              AND @End > 0 
              AND @Length > 0 ) 
        BEGIN 
            SET @HTMLText = Stuff(@HTMLText, @Start, @Length, ' ') 
            SET @Start = Charindex('&nbsp;', @HTMLText) 
            SET @End = @Start + 5 
            SET @Length = ( @End - @Start ) + 1 
        END 

      -- Replace any <P>, </P>tags with a <BR>, so they will be replaced with a new line in next step  
      SET @HTMLText = REPLACE(@HTMLText, '<P>', '<br>') 
      SET @HTMLText = REPLACE(@HTMLText, '</P>', '<br>') 

      -- Replace any <BR> tags with a newline  
      SET @Start = Charindex('<br>', @HTMLText) 
      SET @End = @Start + 3 
      SET @Length = ( @End - @Start ) + 1 

      WHILE ( @Start > 0 
              AND @End > 0 
              AND @Length > 0 ) 
        BEGIN 
            SET @HTMLText = Stuff(@HTMLText, @Start, @Length, 
                            Char(13) + Char(10)) 
            SET @Start = Charindex('<br>', @HTMLText) 
            SET @End = @Start + 3 
            SET @Length = ( @End - @Start ) + 1 
        END 

      -- Replace any  tags with a newline  
      SET @Start = Charindex('<br/>', @HTMLText) 
      SET @End = @Start + 4 
      SET @Length = ( @End - @Start ) + 1 

      WHILE ( @Start > 0 
              AND @End > 0 
              AND @Length > 0 ) 
        BEGIN 
            SET @HTMLText = Stuff(@HTMLText, @Start, @Length, 
                            'CHAR(13) + CHAR(10)') 
            SET @Start = Charindex('<br/>', @HTMLText) 
            SET @End = @Start + 4 
            SET @Length = ( @End - @Start ) + 1 
        END 

      -- Replace any  tags with a newline  
      SET @Start = Charindex('<br />', @HTMLText) 
      SET @End = @Start + 5 
      SET @Length = ( @End - @Start ) + 1 

      WHILE ( @Start > 0 
              AND @End > 0 
              AND @Length > 0 ) 
        BEGIN 
            SET @HTMLText = Stuff(@HTMLText, @Start, @Length, 
                            'CHAR(13) + CHAR(10)') 
            SET @Start = Charindex('<br />', @HTMLText) 
            SET @End = @Start + 5 
            SET @Length = ( @End - @Start ) + 1 
        END 

      -- Remove anything between  tags  
      SET @Start = Charindex('<', @HTMLText) 
      SET @End = Charindex('>', @HTMLText, Charindex('<', @HTMLText)) 
      SET @Length = ( @End - @Start ) + 1 

      WHILE ( @Start > 0 
              AND @End > 0 
              AND @Length > 0 ) 
        BEGIN 
            IF @stripDisallowedOnly = 1 
              BEGIN 
                  IF ( Upper(Substring(@HTMLText, @Start, 2)) <> '<B' ) 
                     AND ( Upper(Substring(@HTMLText, @Start, 3)) <> '</B' ) 
                     AND ( Upper(Substring(@HTMLText, @Start, 2)) <> '<U' ) 
                     AND ( Upper(Substring(@HTMLText, @Start, 3)) <> '</U' ) 
                     AND ( Upper(Substring(@HTMLText, @Start, 2)) <> '<I' ) 
                     AND ( Upper(Substring(@HTMLText, @Start, 3)) <> '</I' ) 
                    BEGIN 
                        SET @HTMLText = Stuff(@HTMLText, @Start, @Length, '') 
                    END 
                  ELSE 
                    BEGIN 
                        SET @Length = 0 
                    END 
              END 
            ELSE 
              BEGIN 
                  SET @HTMLText = Stuff(@HTMLText, @Start, @Length, '') 
              END 

            SET @Start = Charindex('<', @HTMLText, @End - @Length) 
            SET @End = Charindex('>', @HTMLText, Charindex('<', @HTMLText, 
                                                 @Start) 
                       ) 
            SET @Length = ( @End - @Start ) + 1 
        END 

      -- Remove any leading space/carriage return 
      DECLARE @trimchars VARCHAR(10)
      SET @trimchars = CHAR(9)+CHAR(10)+CHAR(13)+CHAR(32)
         IF @HTMLText LIKE '[' + @trimchars + ']%' SET @HTMLText = SUBSTRING(@HTMLText, PATINDEX('%[^' + @trimchars + ']%', @HTMLText), LEN(@HTMLText))
      RETURN Ltrim(Rtrim(@HTMLText)) 
  END 
```

您需要更改以下行以保留`em`类似于以下的标签`Upper(Substring(@HTMLText, @Start, 2)) <> '<B' )`：在正确的方向。`<BR>``<P>`

```
WHILE ( @Start > 0 
      AND @End > 0 
      AND @Length > 0 ) 
BEGIN 
    IF @stripDisallowedOnly = 1 
      BEGIN 
          IF ( Upper(Substring(@HTMLText, @Start, 2)) <> '<B' ) 
             AND ( Upper(Substring(@HTMLText, @Start, 3)) <> '</B' ) 
             AND ( Upper(Substring(@HTMLText, @Start, 2)) <> '<U' ) 
             AND ( Upper(Substring(@HTMLText, @Start, 3)) <> '</U' ) 
             AND ( Upper(Substring(@HTMLText, @Start, 2)) <> '<I' ) 
             AND ( Upper(Substring(@HTMLText, @Start, 3)) <> '</I' ) 
            BEGIN 
                SET @HTMLText = Stuff(@HTMLText, @Start, @Length, '') 
            END 
          ELSE 
            BEGIN 
                SET @Length = 0 
            END 
      END 
    ELSE 
      BEGIN 
          SET @HTMLText = Stuff(@HTMLText, @Start, @Length, '') 
      END 

    SET @Start = Charindex('<', @HTMLText, @End - @Length) 
    SET @End = Charindex('>', @HTMLText, Charindex('<', @HTMLText, 
                                         @Start) 
               ) 
    SET @Length = ( @End - @Start ) + 1 
END 
```

# actionscript-3 - AS3 将位图跟踪为“[对象形状]”/错误或功能，正在运行

> ID：10235783
> 
> 赞同：5
> 
> 时间：2012-04-19T19:56:41.750
> 
> 标签：actionscript-3, flash

我需要在影片剪辑中的对象上使用 GetPixel32。

为了到达我使用的那个对象：

```
var bitmap=clip.getChildAt(0);
//and then 
bitmap.bitmapData.getPixel32(x, y); 
```

然而，即使 childobject 是 png 我得到一个错误并使用

```
trace(clip.getChildAt(0)); 
```

痕迹“[对象形状]”

Flash 是否会将某些位图转换为形状？

请参阅此 fla ( [http://www.sendspace.com/file/uycmm5](http://www.sendspace.com/file/uycmm5) ) 自行测试。

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-19T20:05:19.673

放置在 Flash 时间轴中的位图在编译（**更新**）时转换为形状（使用位图填充），除非库中的图像具有链接名称，在这种情况下，它按预期工作并编译为位图对象。

但是，您可以使用该形状绘制一个新的位图：

```
var shape:DisplayObject = clip.getChildAt(0);
var bmp:BitmapData = new BitmapData(shape.width, shape.height, true, 0);
bmp.draw(shape);
bmp.getPixel32(x, y); 
```

# php - phpbb网站整合

> ID：10235788
> 
> 赞同：-1
> 
> 时间：2012-04-19T19:57:23.257
> 
> 标签：php, phpbb

我正在尝试使 phpbb 成为我当前页面的一部分，但我遇到了问题。每当我将用户重定向到不同的站点时，$user->data 都会被重置，我似乎无法弄清楚原因。

```
<?php
define('IN_PHPBB', true);
$phpbb_root_path = 'forum/';
$phpEx = "php";
include($phpbb_root_path . 'config.' . $phpEx);
include($phpbb_root_path . 'common.' . $phpEx);

// Start session management
$user->session_begin();
$auth->acl($user->data);
$user->setup();

if(isset($_GET["p"]) && $_GET["p"]=="login"){
    $result=$auth->login("username", "123456");

    if ($result['status'] == LOGIN_SUCCESS) {

        echo "You're logged in";

        header("location: test.php?p=test");

    } else {

        echo $user->lang[$result['error_msg']];

    }

}

if(isset($_GET["p"]) && $_GET["p"]=="test"){
    $user->session_begin();
    $auth->acl($user->data);
    $user->setup();
    if($user->data['is_registered']){
        echo "logged in!";
    }
    else{
        echo "not logged in!";
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:00:51.347

找到了解决方案，我在本地运行，并且使用了不同的 cookie 域。所以解决方案就是在 phpbb 设置中更新 cookie 域

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-31T22:40:11.963

我也在做一个类似的项目，对我来说，它只需将用户数据保存在 a 中`$_SESSION`，然后在每个页面上都有

```
session_start(); 
```

# iphone - 当我的 viewDidDisappear 尝试释放我的表时。当我回到视野时仍然在那里

> ID：10235790
> 
> 赞同：0
> 
> 时间：2012-04-19T19:57:35.767
> 
> 标签：iphone, objective-c, ios, xcode

我这样声明我的表：

```
 CGRect cgRct = CGRectMake(5, 5, 310, 363);
videoTable = [[UITableView alloc] initWithFrame:cgRct style:UITableViewStylePlain];
videoTable.backgroundColor = [UIColor clearColor];
videoTable.separatorColor = [UIColor whiteColor];
videoTable.separatorStyle = UITableViewCellSeparatorStyleSingleLine;
videoTable.dataSource = self;
videoTable.delegate = self;
videoTable.alwaysBounceVertical = NO;
videoTable.bounces = NO;
videoTable.allowsSelection = YES;
//self.videoTable.layer.zPosition = -1;
//table.dragging = NO;
[self.view addSubview:videoTable]; 
```

当我们离开视图时，我删除了我的桌子

```
-(void) viewDidDisappear:(BOOL)animated
{
[super viewDidDisappear:animated];
NSLog(@"*viewDidDisappear");
if (videoTable)
{
    NSLog(@"removing table");
    [videoTable removeFromSuperview];
    videoTable.delegate = nil;
    [videoTable release];
   // self.videoTable = nil;
}
} 
```

当视图再次加载时，没有表格的迹象，但是..它仍然存在，因为

```
-(void) viewWillAppear:(BOOL)animated
{
[super viewWillAppear:animated];
[self populateFileList];

if (videoTable)
{
    NSLog(@"table still here");
}
else
{
    NSLog(@"No table");
}
} 
```

谁能解释我错过了什么？我希望表完全消失，所以我可以分配一个新表。

非常感谢，-代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:00:12.070

您需要在释放后将 nil 分配给表，否则该变量仍然有一个值（对表对象的旧引用）：

```
[videoTable release];
videoTable = nil; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:15:14.050

如果 videoTable 不同于 nil，则 if (videoTable) 为真。因此，您需要在释放表后将其分配为零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T20:05:31.290

你可以试试这个：

```
-(void)viewDidUnload{
    [super viewDidUnload];
    [self setVideoTable:nil];
} 
```

# powershell - Windows Server 2008 与 Windows XP 上的 Powershell？

> ID：10235795
> 
> 赞同：0
> 
> 时间：2012-04-19T19:57:56.780
> 
> 标签：powershell, syntax-error

我正在为特定客户端编写 PowerShell 脚本。我在我们的几台台式机上测试了该脚本，并在客户端系统上尝试了该脚本。我遇到了以下问题：

### 问题 #1

作为一个优秀的小蜜蜂，我定义了一堆帮助文本，所以当你运行`Get-Help`我的脚本时，它会给你详细的帮助。我使用了以下语法：

```
<#
Get-Help

.SYNOPSIS
  C> FileWatcher.ps1 -FilePath <FileName> -SenderEmail Bob@Foo.com ^
    -ToEmail Joe@Bar.com -SmtpServer smtp.foo.com

.DESCRIPTION
Blah, blah, blah...
#> 
```

在我的机器上，它可以工作，这被认为是评论。但是，在客户端的机器上，一旦它看到`C>`它认为是重定向的，就会产生一个错误。去掉`#>`and`<#`并`#`在每行前面加上这个问题就解决了这个问题，给我们带来了问题 #2。

### 问题 #2

我定义了一堆这样的参数：

```
Param (
    [ValidateScript({Test-Path $_ -PathType 'Leaf'})]
    [Parameter(
        Position=0,
        HelpMessage="File you want to watch")]
        $FilePath = "\\rke032\QuickCon\wincommlog.000",

    [String]
    [Parameter(
    blah, blah, blah 
```

PowerShell 咳嗽`[ValidateScript({Test-Path $_ -PathType 'Leaf'})]`说它不是一个有效的类型。

正如我所说，我们在各种 Windows 机器上对此进行了测试。我有一台 Windows XP 机器。它是 PowerShell 版本 # 6.0.6002.1811。在另一台运行 Windows 7 的计算机上，PowerShell 版本为 6.1.7600。

在给我们这些错误的客户端机器（Windows 2008 Server）上，版本是 6.0.6001.18000。

我们通过打开一个 PowerShell 窗口来运行 Powershell 脚本，然后输入脚本的名称。ExecutionPolicy 设置为无限制。该脚本的末尾有一个 *.ps1 后缀。我不敢相信修订版 6.0.6002 和 6.0.6001 之间存在无法识别的语法问题之间的巨大差异。还有其他事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:14:22.597

比较输出`$PSVersionTable`而不是构建版本。特别是该`PSVersion`属性是有趣的。我猜你在一台机器上有 PS1，在另一台机器上有 PS2。该扩展`.ps1`与 PowerShell 版本无关。

通过注意到块注释不起作用并且参数属性也不起作用，这种猜测得到了加强。

# php - 使用 CakePHP 显示要连接到另一个表的记录列表

> ID：10235800
> 
> 赞同：4
> 
> 时间：2012-04-19T19:58:13.083
> 
> 标签：php, cakephp, cakephp-2.1

我有一个存储帖子和主题并使用 Topic_Posts 表连接它们的应用程序。

该应用程序的关联如下：

```
Post.php
class Post extends AppModel
{
    public $name = 'Post';

    public $belongsTo = 'User';

    public $hasMany = array('Answer');

    // Has many topics that belong to topic post join table... jazz
    public $hasAndBelongsToMany = array(
        'Topic' => array('with' => 'TopicPost')
    );
}

Topic.php
class Topic extends AppModel
{
    public $hasMany = array(
        'TopicPost'
    );
}

TopicPost.php
class TopicPost extends AppModel {
    public $belongsTo = array(
        'Topic', 'Post'
    );
} 
```

例如，当用户查看主题时`/topics/view/topicname`，我想显示包含该主题的所有帖子。

到目前为止，我的 TopicsController 中有以下方法用于视图：

```
public function view ( $slug )
{
    $topic = $this->Topic->find('first', array('conditions'=>array('Topic.slug'=>$slug)));
    $this->set('topic', $topic);
    $this->set('title_for_layout', $topic['Topic']['title'] . ' &ndash; Topics');

    $this->paginate = array
    (
        'Post' => array
        (
            'limit'=>15,
            'conditions'=>array
            (
                'Post.status'=>array(1,2),
                'TopicPost.topic_id' => $topic['Topic']['id'],
            ),
            'order'=>array('Post.datetime'=>'desc'),
            'contain'=>array('User'=>'Profile', 'TopicPost')
        )
    );

    $posts = $this->paginate('Post'); // this one

    $this->set('posts', $posts); 
```

}

这样我就可以使用我添加的 Posts 和 TopicPosts：`public $uses = array('Topic','TopicPost','Post');`到控制器的顶部，并使所有模型都作为可包含的。

所以基本上我需要在数据库模型 TopicPosts 中找到与我正在查看的主题的 id 匹配的帖子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T22:11:38.237

我只是无法让它以“正确”的方式工作。我不确定这是否是蛋糕中的错误或其他什么，但 paginate 函数只是拒绝让步。. 正确的方法可能是在 Post 模型中编写自己的 paginate 函数，有一些关于如何在食谱中做到这一点。

同时，我为您提供以下解决方法。它不是最佳的（至少在没有缓存的情况下不是），但它可以工作。当/如果您遇到性能问题时，您可以以正确的方式执行此操作，但在此之前，下面的代码应该可以执行此操作。

```
public function view ( $slug )
{
    $topic = $this->Topic->find('first', array('conditions'=>array('Topic.slug'=>$slug)));
    $this->set('topic', $topic);
    $this->set('title_for_layout', $topic['Topic']['title'] . ' &ndash; Topics');

    // step 1: get post IDs related to your topic
    $postIDs = $this->Topic->TopicPost->find
        (
            'list',
            array
            (
                'fields'        => array('TopicPost.post_id'),
                'conditions'    => array('TopicPost.topic_id' => $topic['Topic']['id'])
            )
        );

    $this->paginate = array
    (
        'Post' => array
        (
            'limit'=>15,
            'conditions'=>array
            (
                'Post.status' => array(1,2),
                // step 2: include them in your paginate conditions
                'Post.id' => $postIDs,
            ),
            'order' => array('Post.datetime'=>'desc'),
        )
    );

    $posts = $this->paginate('Post');

    $this->set('posts', $posts);
} 
```

（请注意，我在测试中删除了一些东西，因为我在你的应用程序中没有一些东西，所以不要忘记把它放回去）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T12:05:26.580

我认为你的模型关系有问题，我不明白为什么你在帖子模型上有一个 HABTM 关系，当你实际上在模型本身上模拟这个（[使用 Has-many-through 方法](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasmany-through)）时。`TopicPost`如果你不想使用 cake 内置的 HABTM 行为（我不怪你），你应该像这样设置关系：

```
class PostTopic extends AppModel { // note PostTopic, name should be alphabetical
    public $belongsTo = array('Post', 'Topic');
}

class Post extends AppModel {
    public $hasMany = array('PostTopic');
}

class Topic extends AppModel {
    public $hasMany = array('PostTopic');
} 
```

然后要获取相关帖子或主题的 ID，您只需加载`PostTopic`类并进行搜索：

```
// ie in Post Controller
$this->paginate($this->Post->PostTopic, array('PostTopic.topic_id' => $post['PostTopic']['topic_id'])); 
```

我的网站上有一个类似的设置，用户可以在其中将产品添加到他们的库存中，这是一种 HABTM 关系，但附加了更多数据。有关更复杂的[示例](https://github.com/Dunhamzzz/Consumer-Love/tree/master/Model)，请参见此处的产品、库存和用户模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T17:38:17.247

从问题评论：

> 还要注意数据库结构和关系工作正常，因为我可以使用 TopicPost 将主题拉到一个帖子中，所以我知道这是可行的，它只是为一个似乎不起作用的主题获取帖子......

对，因为您为 Post->Topic 设置了[HABTM](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasandbelongstomany-habtm)，但没有为 Topic->Post 设置。2.0 书定义了一个与您的示例类似的示例（但使用配方和成分）来描述用例。

> hasMany 和 HABTM 之间的主要区别在于，HABTM 中的模型之间的链接不是排他的。例如，我们即将使用 HABTM 将我们的食谱模型与成分模型结合起来。使用西红柿作为我奶奶的意大利面食谱的配料不会“用完”配料。我也可以用它来做沙拉食谱。

`Post`使用 a `Topic`（标签/类别的名称）也可以这样说。就像他们的例子一样：

> 如果您想在使用成分模型时获取配方数据，请记住在成分模型中定义 HABTM 关联。

或者，在您的情况下，主题模型。

所以这里是你应该使用的模型：

```
class Post extends AppModel
{
    public $name = 'Post';

    public $belongsTo = 'User';

    public $hasMany = array('Answer');

    // Has many topics that belong to topic post join table... jazz
    public $hasAndBelongsToMany = array(
        'Topic' => array('with' => 'TopicPost')
    );
}

class Topic extends AppModel
{
    // Has many posts that belong to topic post join table... jazz
    public $hasAndBelongsToMany = array(
        'Post' => array('with' => 'TopicPost')
    );
} 
```

现在，除非您正在做一些特别的事情，否则您实际上并不需要`TopicPost`，但这很好。而且，尽管您可以使用该模型将`Topic`s 添加到帖子中（反之亦然），但我建议您使用内置方法来处理 HABTM 保存。查看[此页面](http://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-habtm)以获取有关保存 HABTM 的详细信息。

如果您决定删除它，请确保根据文档为每个模型中的 HABTM 选项定义连接表和[条件](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasandbelongstomany-habtm)

# database-design - ERD 中不相关的表

> ID：10235803
> 
> 赞同：1
> 
> 时间：2012-04-19T19:58:26.240
> 
> 标签：database-design, erd

简单的问题 - 您是否在 ERD 中包含不相关的表。不相关是指与数据库中的任何其他表不相关的表。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T14:28:30.897

是的，当然 - 假设图表的目的是传达有关这些实体类型的信息（属性名称、键、其他约束等）。既然你问了这个问题，我猜它们实际上以某种重要的方式“关联”，但它们恰好不涉及任何通常在 ER 图上显示为线条的相当有限的关系类型。如果您发现这样做有用，将它们放在图表中并没有错。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T20:00:53.613

不，您不能在 ER 图中包含不相关的实体。实体应至少参与一种关系才能存在于 ERD 中。

# javascript - 单击表格单元格时，获取隐藏的 div 以显示在表格单元格下方

> ID：10235804
> 
> 赞同：0
> 
> 时间：2012-04-19T19:58:49.207
> 
> 标签：javascript, html, css

我有一个 div，当单击表格单元格时，我想直接显示在表格单元格下方。到目前为止，这是我的代码示例...

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<script type="text/javascript">
    function toggleDownloadSelectionDialog(divToggle,divId,event){
        pos_x = event.offsetX?(event.offsetX):event.pageX-document.getElementById(divToggle).offsetLeft;
        pos_y = event.offsetY?(event.offsetY):event.pageY-document.getElementById(divToggle).offsetTop;

        alert(pos_y+"  "+pos_x+" "+divId);

        document.getElementById(divId).style.top = pos_y;
        document.getElementById(divId).style.left = pos_x;
        document.getElementById(divId).style.display = 'block';

    }
</script>
</head>

<body>
<div class="div_downloadDialog" id="div_hidden1" style="display: none; top: 0; left: 0; position: absolute;">This div is hidden</div>

<table class="Oligo_Diversity">

<tr>
<td>blah</td><td>blah</td><td>blah</td>
</tr>

<tr>
<td><div id="div_toggle1" onclick="toggleDownloadSelectionDialog('div_toggle1','div_hidden1',event);">click here for download dialog</div></td>
<td>blah</td>
<td>blah</td>
</tr>

</table>

</body>
</html> 
```

我希望隐藏的下载 div 直接显示在单击它的表格单元格下方。我的 javascript 似乎获得了位置，但我无法将此信息传递给 div。删除 DOCTYPE 将使这项工作有效，但对于我正在处理的项目，我需要一个 doctype。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:58:40.380

我建议您使用 css display 属性来显示或隐藏您的 div，而不是弄乱绝对定位。这将允许 html 自动定位 div。这是一些示例代码：

```
<html>

<head>
<script type="text/javascript">
    function expand(id) {
        document.getElementById(id).style.display = 'block';
    }
    function hide(id) {
        document.getElementById(id).style.display = 'none';
    }
</script>
</head>

<body>
<table><tr>
    <td valign="top">
        <div style="cursor:pointer" onclick="expand('expand1')">Click to Expand td 1</div>
        <div id="expand1" style="cursor:pointer;display:none" onclick="hide('expand1')">
            Click to  hide td 1 expansion
        </div>
    </td>
    <td valign="top">
        <div style="cursor:pointer" onclick="expand('expand2')">Click to Expand td 2</div>
        <div id="expand2" style="cursor:pointer;display:none" onclick="hide('expand2')">
            Click to hide td 2 expansion
        </div>
    </td>
</tr></table>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:01:44.283

也设置`position:absolute`为 div。`z-index`如果需要，也很好。:) [http://www.w3schools.com/cssref/pr_class_position.asp](http://www.w3schools.com/cssref/pr_class_position.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T20:10:07.233

设置`position: absolute`为`DIV`如sv_in 所说。

此行也可能在 IE 中引起问题：

```
pos_x = event.offsetX?(event.offsetX):event.pageX-document.getElementById(divToggle).offsetLeft; 
```

如果你在 IE 中运行它，三元运算符会找到条件 true 并`true`在`?`.

将线路切换到：

```
pos_x = (event.offsetX)?event.offsetX:event.pageX-document.getElementById(divToggle).offsetLeft; 
```

下一行也是如此`pos_y`。

使用时，`<!DOCTYPE html>`还必须在样式定义中使用单位：

```
document.getElementById(divId).style.left = pos_x+'px';
document.getElementById(divId).style.top = pos_y+'px'; 
```

# sql-server - 在 SQL 上将行转换为字符串

> ID：10235809
> 
> 赞同：2
> 
> 时间：2012-04-19T19:59:08.723
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2

我有一个关于 Sql 的表：

```
ID    User       Observation
========================================
1     John       This is correct!
----------------------------------------
2     Michael    I got an error!
----------------------------------------
3     Joshua     This is incorrect!
---------------------------------------- 
```

我想要的是一个函数 thar 返回一个带有字符串数据的 varchar

像这样：

**编辑：** 这是我期望的结果：

```
John says: This is correct!\r\nMichael says: I got an error!\r\nJoshua says: This is incorrect 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T20:08:44.880

作为单列和单行，您可以执行此操作

```
DECLARE @out as varchar(max)

SET @Out = ''

SELECT @Out = @Out +  [User] + ' says: ' + Observation + CHAR(13) + CHAR(10)  
FROM Table1

SELECT @out 
```

[看这里](http://sqlfiddle.com/#!3/c7b71/4)

这是 SSMS 中的输出（使用文本输出）

```
-------------------------------
John says: This is correct!
Michael says: I got an error!
Joshua says: This is incorrect!

(1 row(s) affected) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-19T20:02:03.440

如果要连接由回车符+换行符分隔的所有行：

```
declare @UserObservation Table(ID int, [User] varchar(20), Observation varchar(100));
insert into @UserObservation values(1, 'John' ,'This is correct!');
insert into @UserObservation values(2, 'Michael' ,'I got an error!');
insert into @UserObservation values(3, 'Joshua' ,'This is incorrect!');

DECLARE @WhatAllUserSay VARCHAR(8000) ;
SELECT @WhatAllUserSay = 
    COALESCE(@WhatAllUserSay + CHAR(13) + CHAR(10), '') + [User] + ' says: ' + Observation 
FROM @UserObservation

PRINT @WhatAllUserSay; 
```

[`COALESCE`](http://msdn.microsoft.com/en-us/library/ms190349%28v=sql.105%29.aspx)

输出：

```
John says: This is correct!
Michael says: I got an error!
Joshua says: This is incorrect! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T20:02:37.813

SELECT [User] + ' 说：' + [Observation] FROM [TableName]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T20:02:49.290

```
SELECT User +' says: ' + Observation AS USER_SAID
FROM TABLE; 
```

# java - JOGL 在 3d 立方体上使用 2d 纹理

> ID：10235812
> 
> 赞同：0
> 
> 时间：2012-04-19T19:59:23.553
> 
> 标签：java, opengl, jogl

我使用以下代码在 JOGL 中创建了一个 3d 立方体：

```
/**
 * Function used to draw a cube
 */
public void drawCube(GL gl) {

    gl.glBegin(gl.GL_QUADS);

    //gl.glColor3f(1, 0, 0);
        gl.glTexCoord3f(0, 0, 0);
        gl.glVertex3f(0, 0, 0);
        gl.glTexCoord3f(4, 0, 0);
        gl.glVertex3f(1, 0, 0);
        gl.glTexCoord3f(4, 4, 0);
        gl.glVertex3f(1, 1, 0);
        gl.glTexCoord3f(0, 4, 0);
        gl.glVertex3f(0, 1, 0);
    gl.glEnd();

    gl.glBegin(gl.GL_QUADS);
        gl.glTexCoord3f(0, 0, 0);
    // gl.glColor3f(0, 1, 0);
        gl.glVertex3f(0, 0, 0);
        gl.glTexCoord3f(0, 4, 0);
        gl.glVertex3f(0, 1, 0);
        gl.glTexCoord3f(0, 4, 4);
        gl.glVertex3f(0, 1, 1);
        gl.glTexCoord3f(0, 0, 4);
        gl.glVertex3f(0, 0, 1);
    gl.glEnd();

    gl.glBegin(gl.GL_QUADS);
    //  gl.glColor3f(0, 0, 1);
        gl.glTexCoord3f(0, 4, 0);
        gl.glVertex3f(0, 1, 0);
        gl.glTexCoord3f(4, 4, 0);
        gl.glVertex3f(1, 1, 0);
        gl.glTexCoord3f(4, 4, 4);
        gl.glVertex3f(1, 1, 1);
        gl.glTexCoord3f(0, 4, 4);
        gl.glVertex3f(0, 1, 1);
      gl.glEnd();

    gl.glBegin(gl.GL_QUADS);
    //  gl.glColor3f(1, 1, 0);
        gl.glTexCoord3f(4, 4, 0);
        gl.glVertex3f(1, 1, 0);
        gl.glTexCoord3f(4, 0, 0);
        gl.glVertex3f(1, 0, 0);
        gl.glTexCoord3f(4, 0, 4);
        gl.glVertex3f(1, 0, 1);
        gl.glTexCoord3f(4, 4, 4);
        gl.glVertex3f(1, 1, 1);
    gl.glEnd();

     gl.glBegin(gl.GL_QUADS);
    // gl.glColor3f(1, 0, 1);
        gl.glTexCoord3f(4, 0, 0);
        gl.glVertex3f(1, 0, 0);
        gl.glTexCoord3f(0, 0, 0);
        gl.glVertex3f(0, 0, 0);
        gl.glTexCoord3f(0, 0, 4);
        gl.glVertex3f(0, 0, 1);
        gl.glTexCoord3f(4, 0, 4);
        gl.glVertex3f(1, 0, 1);
    gl.glEnd();

     gl.glBegin(gl.GL_QUADS);
    //   gl.glColor3f(0, 1, 1);
        gl.glTexCoord3f(0, 4, 4);
        gl.glVertex3f(0, 1, 1);
        gl.glTexCoord3f(4, 4, 4);
        gl.glVertex3f(1, 1, 1);
        gl.glTexCoord3f(4, 0, 4);
        gl.glVertex3f(1, 0, 1);
        gl.glTexCoord3f(0, 0, 4);
        gl.glVertex3f(0, 0, 1);

     gl.glEnd(); 
```

立方体在屏幕上，现在我试图在每个面上放置一个纹理，如下所示：

```
public void init(GLAutoDrawable gld) {
    //Init the gl
    GL gl = gld.getGL();

    //Init the glu
    GLU glu = new GLU();

    gl.glMatrixMode(GL.GL_PROJECTION);
    gl.glLoadIdentity();
    glu.gluPerspective(90, 1.6, 0.6, 30.0);
    glu.gluLookAt(0, 0, 10, 0, 0, 0, 0, 2, 0);

    gl.glEnable(gl.GL_TEXTURE_2D);

    int id_textura = Gen_Textura(gl);

    gl.glBindTexture(gl.GL_TEXTURE_2D, id_textura);

    gl.glTexParameteri(gl.GL_TEXTURE_2D, gl.GL_TEXTURE_MAG_FILTER, gl.GL_LINEAR);
    gl.glTexParameteri(gl.GL_TEXTURE_2D, gl.GL_TEXTURE_MIN_FILTER, gl.GL_LINEAR);
} 
```

问题是纹理只出现在立方体的一个面上，而不是全部 6 个面上。

如何在立方体的所有面上绘制纹理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T20:59:38.443

*根据我上面的评论回答。*

您应该使用`glTexCoord2f`, 因为您使用的是 2D 纹理。此外，纹理坐标通常在范围内`[0, 1]`。

# c# - 为什么实体框架不让 SQL Server 生成主键？

> ID：10235818
> 
> 赞同：2
> 
> 时间：2012-04-19T19:59:49.577
> 
> 标签：c#, sql-server, database, entity-framework-4

我很确定这是一个简单的配置错误，但我缺乏经验使我无法修复它。基本上我想`EMPLOYEE`使用实体框架将一个添加到表中。

这是我的方法：

```
 public void createEmployee(CreateEmployeeModel model)
    {
        EMPLOYEE emp = new EMPLOYEE() {
            emp_name = model.Name,
            emp_email = model.Email,
            emp_cell_phone = model.CellPhone,
            emp_adr = model.Address
        };

        _db.AddToEMPLOYEES(emp);
        _db.SaveChanges();
    } 
```

我在通话中收到以下错误`_db.SaveChanges();`：无法在具有唯一索引“R18_SDE_ROWID_UK”的对象“dbo.EMPLOYEES”中插入重复的键行。重复键值为 (0)。

这是`emp_id`EMPLOYEE 实体的列属性：

```
StoreGeneratedPattern : Identity
Concurrency Mode : None
Default Value :  (None)
Entity Key : True
Name: emp_id
Nullable: False
Type : Int32 
```

这是`emp_id`SQL Server 上 EMPLOYEES 表的列属性：

![在此处输入图像描述](../Images/632bbbfc516c6e2b92f01bdab6ccc5be.png)

我不确定为什么当表中已经有 4 名员工时，主键总是生成为 0。(0,1,2,3)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T20:18:23.817

如果您必须手动更改模型的属性，则很可能您没有将该列设置为数据库本身的 Identity 列。

如果您已将数据库设置为标识列，则删除该实体并重新添加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:05:58.670

我认为你可能需要做一些事情来正确设置`_db.EMPLOYEES.CreateObject()`一个新的实例。`EMPLOYEE`

```
var emp = _db.EMPLOYEES.CreateObject();
//set values

_db.EMPLOYEES.AddObject(emp);
_db.SaveChanges(); 
```

# django - 相同的字符串不同的翻译

> ID：10235822
> 
> 赞同：32
> 
> 时间：2012-04-19T20:00:09.747
> 
> 标签：django, internationalization, translation

我有一个字符串，可以用两种不同的方式在我的代码的不同部分进行翻译。

现在如果使用 django-admin makemessages -l 它

我进入 django.po 这个：

```
#: pingapi/ping.py:17 pingapi/nots.py:10
msgid "may"
msgstr "maggio" 
```

但我想要两种不同的翻译：

```
#: pingapi/ping.py:17 
msgid "may"
msgstr "posso"

#: pingapi/nots.py:10
msgid "may"
msgstr "maggio" 
```

如果我在发布翻译文件的情况下运行 django-admin compilemessage，我会得到：

```
Error: errors happened while running msgmerge
 error 'duplicate message definition' 
```

任何提示？我正在使用 Django。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-23T11:18:13.200

您可以为此使用 gettext 的上下文。Django 在 1.3 版本（代码）和 1.4（模板）中添加了对它的支持，请参阅[https://docs.djangoproject.com/en/dev/topics/i18n/translation/#contextual-markers](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#contextual-markers)

更新：

例如下面的代码：

```
from django.utils.translation import pgettext, ugettext

month = pgettext("month name", "May")
month = pgettext("fifth month", "May")
month = ugettext("May") 
```

转换为：

```
#: foo/views.py:4
msgctxt "month name"
msgid "May"
msgstr ""

#: foo/views.py:5
msgctxt "fifth month"
msgid "May"
msgstr ""

#: foo/views.py:6
msgid "May"
msgstr "" 
```

每条消息都是不同的，可以不同地翻译。

# python - 狮子安装上的matplotlib

> ID：10235825
> 
> 赞同：0
> 
> 时间：2012-04-19T20:00:15.287
> 
> 标签：python, matplotlib, osx-lion

我是编程新手。我正在尝试在 Mac OS X 上安装 matplotlib 模块。我有 lion 操作系统和 python 2.7，我还下载了 mac 端口。我需要在终端中输入什么来获取 Mac 端口以下载并在我的计算机上安装 matplotlib？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T07:56:13.813

我希望你已经解决了你的问题。但是对于那些没有遇到过麻烦的人，可以使用这个 shell 脚本来安装所有东西：http: [//fonnesbeck.github.com/ScipySuperpack/](http://fonnesbeck.github.com/ScipySuperpack/)。所有疯狂的依赖都神奇地实现了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:21:20.443

据我记得，我在 Lion 上所要做的就是：

```
sudo easy_install matplotlib 
```

macports 根本不需要。

# jquery-mobile - JqueryMobile动态css不渲染

> ID：10235826
> 
> 赞同：0
> 
> 时间：2012-04-19T20:00:31.413
> 
> 标签：jquery-mobile

我的文档中有 2 页。活动页面显示一个列表，单击该列表，我显示第二页。第二页的**`content`**div 是动态添加的，还有一些 JS 中的自定义 css。下面的 Java 脚本完成了这项工作，但我无法获得 css 渲染。

```
$("#showmore").live("click", function(event, param1){       
        getUrl = $(this).attr('data-href');
        $.post(getUrl, function(data){  
            $.mobile.hidePageLoadingMsg(); 
            $('#more').html(data);
            $.mobile.activePage.page().trigger('refresh');
        });    
    }); 
```

我也试过`$.mobile.activePage.trigger('create');`了。这行得通，但我来回翻了两页。但是当我第二次点击列表时，内容根本没有被渲染。它是一个只有标题的空白页！

任何人都可以分享您的专业知识，了解我如何使用 css 将动态内容添加到辅助页面并在同一页面上显示我想多次显示的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:10:27.380

您只需要调用`.trigger('create')`要替换的元素：

```
$("#showmore").live("click", function(event, param1){       
    var getUrl = $(this).attr('data-href');//don't unnecessarily create global vars
    $.post(getUrl, function(data){  
        $.mobile.hidePageLoadingMsg();

        //since you are only changing this HTML, you only have to initialize this HTML
        $('#more').html(data).trigger('create');
    });    
}); 
```

我遇到了这似乎不起作用的情况，但我成功地分别初始化了每种类型的小部件，如下所示：

```
$("#showmore").live("click", function(event, param1){       
    var getUrl = $(this).attr('data-href');//don't unnecessarily create global vars
    $.post(getUrl, function(data){  
        $.mobile.hidePageLoadingMsg();

        $('#more').html(data).find('a[data-role="button"]').button().end()
                             .find('ul[data-role="listview"], ol[data-role="listview"]').listview().end()
                             ...
    });    
}); 
```

这是一个动态添加 HTML 到 DOM 的演示，然后让 jQuery Mobile 初始化 HTML 中的小部件：http: [//jsfiddle.net/csKtX/](http://jsfiddle.net/csKtX/)

另外，请确保您将`data-role="button"`（等）添加到小部件中，以便 jQuery Mobile 知道初始化它们（我上面的代码假设您已经完成了此操作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T21:21:38.443

我最近在 jQuery 中也有类似的经历，动态内容没有在 Firefox 中呈现。我让我的网站正常工作，我认为问题可能出在这一行： $('#more').html(data);

尝试用 innerHTML 方法替换它，看看是否可行。

干杯

# sql - 更改表分区中的范围值

> ID：10235828
> 
> 赞同：1
> 
> 时间：2012-04-19T20:00:40.043
> 
> 标签：sql, oracle, partitioning, toad, plsqldeveloper

我有一张带分区的大桌子。前任：

```
CREATE TABLE cust_order (
cust_id     NUMBER(10), 
start_date   VARCHAR2(25), 
amount_sold NUMBER(10,2))
PARTITION BY RANGE (START_DATE)
(  
PARTITION MAY VALUES LESS THAN ('20120601'),
PARTITION DEF VALUES LESS THAN(MAXVALUE)); 
```

我想更改表，以便`MAY`分区包含小于“20120501”的值，并且从“20120501”到“20120601”的数据存储在`DEF`分区中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T20:04:45.133

首先，您应该始终将日期存储在`DATE`列中。将日期存储在`VARCHAR2(25)`列中是导致问题的秘诀——有人将不可避免地插入具有意外格式的字符串。

`MAY`其次，假设和分区之间没有分区，则`DEF`可以拆分`MAY`分区

```
ALTER TABLE cust_order
  SPLIT PARTITION may AT ('20120501')
   INTO( PARTITION may,
         PARTITION june_temp )
 UPDATE GLOBAL INDEXES; 
```

然后合并`JUNE_TEMP`和`DEF`分区

```
ALTER TABLE cust_order
  MERGE PARTITIONS june_temp, def
   INTO PARTITION  def 
```

但是，我不确定我是否看到了这样做的智慧……默认分区通常不应该存储任何数据——它通常只存在于那里，以便插入不会出错，如果它们有一个意外的大分区键. 因此，将已经在一个分区中的数据移动到默认分区中似乎很奇怪。如果您`JUNE`将来只是要创建一个分区，我不确定您为什么不将分区拆分为一个`MAY`和`JUNE`分区。

# python - 使用opencv为应用程序创建可执行文件？

> ID：10235829
> 
> 赞同：6
> 
> 时间：2012-04-19T20:00:44.743
> 
> 标签：python, windows, opencv, exe, py2exe

我在 Windows 下用 Python 设计了一个使用 opencv 的小应用程序。我正在尝试创建一个可执行文件，以便任何人都可以安装和使用它，而无需安装 python/opencv/numpy 。. .

我尝试为此使用 py2exe。它实际上创建了一个 .exe 文件，即使我在构建过程中收到警告：

```
*** copy dlls ***
copying C:\Windows\system32\MSVFW32.dll -> 
...
The following modules appear to be missing
['cv2.cv'] 
```

当我尝试使用命令行运行 .exe 文件时，我看到以下消息：

```
ImportError: numpy.core.multiarray failed to import 
```

我的 setup.py 文件非常简单：

```
# creating executable here
from distutils.core import setup
import py2exe, sys, os

sys.argv.append('py2exe')

setup(
    options = {'py2exe': {'bundle_files': 1}},
    console=['facemovie.py'],
    zipfile = None,
) 
```

知道如何解决这个问题吗？这是我第一次想部署，我可能会遗漏一些东西。

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T21:14:57.557

我还建议使用[PyInstaller](http://www.pyinstaller.org/)。我将它用于我的一个引用 pycrypto 和 twisted 的项目，它就像一个魅力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T20:47:41.223

根据[这篇文章](https://stackoverflow.com/a/169913/176769)，**py2exe**没有检测到 ZIP 存档中需要这个模块。我不知道正确的语法，所以你必须检查文档，但你可以尝试：

```
python setup.py py2exe -p cv2 
```

或者您可以尝试调整`setup.py`以下内容：

```
options = {'py2exe': {'bundle_files': 1, 'packages': 'cv2' } }, 
```

如果您愿意尝试完全不同的东西，请查看[**bbfreeze**](http://pypi.python.org/pypi/bbfreeze/)：

> 从 python 脚本创建独立的可执行文件

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T23:14:39.190

谢谢karlphilip，你让我走上了正轨。

我想避免“更改我的软件实用程序”解决方案，所以我坚持使用 py2exe。

实际上，opencv 是正确找到的，但是库本身有一个 numpy 依赖，没有检测到。

所以我的工作解决方案最终是： options = {'py2exe': {'bundle_files': 1, 'includes': 'numpy' } },

最终的可执行文件相当大，但运行平稳。

我没有在另一台电脑上尝试，虽然没有安装软件，所以可能会有惊喜。

谢谢你们的帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-05T15:55:09.677

我遇到了同样的问题。我通过将图像文件移动到创建可执行文件的文件夹来解决它。这适用于 py2exe 和 pyinstaller。

# c++ - 逐个字符读取是否为数字

> ID：10235830
> 
> 赞同：1
> 
> 时间：2012-04-19T20:00:48.200
> 
> 标签：c++, string, character

我需要有关此 if 语句的帮助。我试图读取每个字符以查看它是否是数字。如果它不是一个数字，那么如果它继续阅读到下一个字符，就说它不是一个数字。例如，如果用户输入 54gr 21 gr42 134 3f3。唯一可以计算的是 21 和 134。

```
#include <iostream> // libraries
#include <iomanip>
#include <string>

using namespace std;

int main()
{

    char string[80];
    // char num[80];
    // char good[80];
    cout << "enter a string "; // prompting user 
    cin.getline(string,80); // geting line
    // int i = 0;
    // int j = 0;
    int count = 0;
    {

    while(string[count] != '\0') {

        if(string[count] >= '0' && string[count] <= '9' )
            cout << count << endl;
            }
           ++ count;
    }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T20:14:43.287

我不会尝试逐个字符地做这个。`5`问题是，在您阅读到非空格字符字符串的末尾以验证*所有*内容是否合法地是数字的一部分之前，您现在并不认为它真的是数字的一部分。

因此，我认为您需要/想要将输入分解为“单词”，然后检查每个完整的单词是否可以完全转换为数字。您可以阅读“单词”`some_stream >> some_string;`

一旦你有了一个“单词”，你检查你是否可以将它完全转换为一个数字。假设您想要整数，您`strtol`可以（尝试）将其转换为数字。这将为您提供一个指向它无法转换为数字的第一个字符的指针。如果那不是字符串的结尾，那么那个“单词”就不是一个数字（即使它以/包含一个或多个数字开头）。

# objective-c - 在 iOS 上使用 Facebook API 请求超时

> ID：10235831
> 
> 赞同：2
> 
> 时间：2012-04-19T20:00:48.517
> 
> 标签：objective-c, xcode, cocoa-touch, facebook-graph-api

我有一堆批量发送的 URL 请求，然后是一个接收结果的“捕手”类。我通过 facebook 的图形 API SDK 执行此操作，因此我无法控制实际的 NSURL。我的问题是，在所有请求都回来之前，我不会触发下一个结果协议，但有时，尤其是在 3G 上，它们并不总是回来（尤其是当你有几百个请求时）。什么是“放弃”给定请求的好方法？对于那些不熟悉 FB api 的人来说，实际请求的工作方式是初始化一个 facebook 对象，然后从中请求数据，然后指定一个返回委托。因此，对于每个单独的请求，我都有一个 returnDelegate（捕手），我可以针对每个请求进行初始化。

**更新：来自 FB-API 的一些代码**

```
- (FBRequest*)requestWithMethodName:(NSString *)methodName
                          andParams:(NSMutableDictionary *)params
                      andHttpMethod:(NSString *)httpMethod
                        andDelegate:(id <FBRequestDelegate>)delegate {
    NSString * fullURL = [kRestserverBaseURL stringByAppendingString:methodName];
    return [self openUrl:fullURL
                  params:params
              httpMethod:httpMethod
                delegate:delegate];
}

- (FBRequest*)openUrl:(NSString *)url
               params:(NSMutableDictionary *)params
           httpMethod:(NSString *)httpMethod
             delegate:(id<FBRequestDelegate>)delegate {

    [params setValue:@"json" forKey:@"format"];
    [params setValue:kSDK forKey:@"sdk"];
    [params setValue:kSDKVersion forKey:@"sdk_version"];
    if ([self isSessionValid]) {
        [params setValue:self.accessToken forKey:@"access_token"];
    }

    [self extendAccessTokenIfNeeded];

    FBRequest* _request = [FBRequest getRequestWithParams:params
                                               httpMethod:httpMethod
                                                 delegate:delegate
                                               requestURL:url];
    [_requests addObject:_request];
    [_request addObserver:self forKeyPath:requestFinishedKeyPath options:0 context:finishedContext];
    [_request connect];
    return _request;
}

- (void)connect {

    if ([_delegate respondsToSelector:@selector(requestLoading:)]) {
        [_delegate requestLoading:self];
    }

    NSString* url = [[self class] serializeURL:_url params:_params httpMethod:_httpMethod];
    NSMutableURLRequest* request =
    [NSMutableURLRequest requestWithURL:[NSURL URLWithString:url]
                            cachePolicy:NSURLRequestReloadIgnoringLocalCacheData
                        timeoutInterval:kTimeoutInterval];
    [request setValue:kUserAgent forHTTPHeaderField:@"User-Agent"];

    [request setHTTPMethod:self.httpMethod];
    if ([self.httpMethod isEqualToString: @"POST"]) {
        NSString* contentType = [NSString
                             stringWithFormat:@"multipart/form-data; boundary=%@", kStringBoundary];
        [request setValue:contentType forHTTPHeaderField:@"Content-Type"];

        [request setHTTPBody:[self generatePostBody]];
    }

    _connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    self.state = kFBRequestStateLoading;
    self.sessionDidExpire = NO;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T15:53:35.723

如上所述，您可以通过实例化一个在经过一定时间时向委托对象发出信号的方法来*实现您自己的超时。*`NSTimer`

# regex - 电话号码的正则表达式，允许强制 10 位数字和 `+`、`()`、空格字符

> ID：10235834
> 
> 赞同：2
> 
> 时间：2012-04-19T20:01:06.317
> 
> 标签：regex

在正则表达式中搜索电话号码，允许强制 10 位数字和 +、()、空格字符，

我尝试了下面的代码，但它不起作用：

```
"^[0-9]{10,10}[' '+()]$" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T20:23:26.107

尝试 `^[ ()+]*([0-9][ ()+]*){10}$`

这将与输入中任何其他位置的任意数量的`, `(`, `)`,`+`字符精确匹配 10 位数字。`

 `* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:08:16.903

尝试使用`^[0-9\ \(\)\+]{10}$``

# excel - 将对象的特征保存在 Excel 文件中，以便使用 Accord.Net 使用 svm 进行训练

> ID：10235841
> 
> 赞同：0
> 
> 时间：2012-04-19T20:01:44.347
> 
> 标签：excel, svm, surf, object-detection, accord.net

我查看了一致库示例中的 Surf 和 SVM 示例。我想知道如何将我从“SURF”中获得的特征保存在 excel 文件中，因为特征（即兴趣点）是包含一些字段和数组的记录浮点数（描述符），在 SVM 样本中，所有列都只是一个值，没有记录包含列表，例如在 XOR 分类中，输入（一个特征）是

`(x =0 , y=0 , G=1)`

但在这里我有一个包含下一个字段的记录：

```
( Laplacian  : int ,    Orientation  : float    , Response  : float     ,Scale : float ,    X  :  float , Y   : float  , Descriptor   : [] float   ) 
```

我不确定，但如果我想像 XOR 问题一样，我应该添加一个 object name 的字段。我发现 SVM 需要一个矩阵，我不知道如何才能使这两个样本之间具有这种兼容性，我希望我的问题很清楚。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T04:26:17.730

这个问题有点不清楚，但我会提出一个解决方案。作为免责声明，为了避免进一步的复杂化，我应该说我是这个库的作者。

如果您只想使用 SURF 功能训练 SVM，那么您可以跳过 Excel 部分。创建图像的视觉词袋表示，然后存储此表示而不是 SURF 特征应该更有用。这个问题似乎是在图像分类示例应用程序发布*之前*提出的，所以如果您仍然对答案感兴趣，请查看它。

在任何情况下，bag-of-visual-words 模型都能够将可变长度的特征数量转换为固定长度的向量，这应该更容易管理，如果您想训练 SVM 或者只是将其存储在文件中. 下面是一个关于如何使用 BoW 模型提取固定长度特征的示例：

```
// Create bag-of-words (BoW) with the given number of words
BagOfVisualWords bow = new BagOfVisualWords(numberOfWords);

bow.Compute( ... ); // pass all images in the training set

// And then you can create a fixed-length 
// representation of an given image using
double[] featureVector = bow.GetFeatureVector(image); 
```

我将避免在此处发布任何链接，因此看起来我不会进一步推广我自己的项目，但分类示例应用程序在您的开始菜单下都可用，如果您已使用可执行安装程序进行安装；并在项目的网站上。

# node.js - 在nodejs中更新变量

> ID：10235842
> 
> 赞同：0
> 
> 时间：2012-04-19T20:01:46.893
> 
> 标签：node.js

我在 node js 中编写了一个简单的服务器。

```
var tls = require("tls"), fs = require("fs"), sys = require("sys");
//Number of messages received
var received=0;

var options = {
    key: fs.readFileSync("certs/keys/server.key"),//Server private key
    cert:fs.readFileSync("certs/certs/server.crt"),//Server cert.
    requestCert: true,//Require client to send it's certificate
    rejectUnauthorized:true,
    ca:fs.readFileSync("certs/certs/userA.crt") //Root certificate,
};

//Server instance with connection request callback
var server = tls.createServer(options,function(socket){ 
    //Add a listener for receiving data packets
    socket.addListener("data", function(data){      
        received++;     
    });
}).listen(2195,function(){
    console.log("Server started");
}); 
```

我还有 java 客户端应用程序，它与服务器建立多个 (300) 连接并发送消息。问题是变量“received”的值与 java 端的“send”值不匹配。为了。例如，如果我从 java 应用程序发送 100,000 条消息，服务器显示收到的值为 80,000，即使服务器成功接收了所有消息。

我认为问题是收到的变量同时被多个回调更新，因此最终值变得混乱。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T23:01:27.807

TCP/IP 不保证发送的数据包数量与接收的数据包数量相匹配。因此，两个或多个连续发送的数据包可能会“组合”成一个。（参见 -> [Nagle 的算法](http://en.wikipedia.org/wiki/Nagle%27s_algorithm)）或者如果它们不适合[MTU](http://en.wikipedia.org/wiki/Maximum_transmission_unit)，它们就会被拆分（参见 -> [IP 分段](http://en.wikipedia.org/wiki/IP_fragmentation)） 。

# asp.net-mvc - 新的 MVC 4 Web 应用程序 - 更新包时出现 javascript 错误

> ID：10235850
> 
> 赞同：0
> 
> 时间：2012-04-19T20:01:58.330
> 
> 标签：asp.net-mvc

使用 MVC4 测试版：

*   创建一个新的 mvc 4 web 项目（选择例如 internet 应用程序）
*   构建，运行，看看怎么没有JS错误
*   在 nuget 中，运行“Update-Package”来更新包
*   构建，运行 - 查看错误 - “未定义不是函数”

任何人都知道是什么库导致了这个问题以及如何解决？

# c++ - 将数字读入向量

> ID：10235852
> 
> 赞同：0
> 
> 时间：2012-04-19T20:02:05.583
> 
> 标签：c++, input, vector

我正在努力解决这个问题。基本上，我必须先阅读一个数字：

```
int n;
scanf("%d", &n); 
```

然后我必须将 N 个区间读入一个向量：

```
vector< vector<int> > intervals;
int a, b;
for (int i = 0; i < n; i++) {
  scanf("%d %d", &a, &b);
  intervals.at(i).at(0) = a;
  intervals.at(i).at(1) = b;
} 
```

使用 GDB 调试器，我得到了这个：

```
3
1 4
terminate called after throwing an instance of 'std::out_of_range'
  what():  vector::_M_range_check

Program received signal SIGABRT, Aborted.
0x00007ffff7260c35 in raise () from /lib/libc.so.6
(gdb) 
```

知道我做错了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T20:04:08.060

您`at`用于存储尚不存在的向量元素。

最简单的解决方法是使用`push_back`将新元素放入向量中 - 这就是它的设计目的。由于您有两个维度，因此您需要使用它两次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T20:04:23.080

```
intervals.at(i).at(0) = a; 
```

是非法的，因为您的向量最初是空的。您可以使用`push_back`或预分配向量。

我会预先分配向量，因为这不需要进一步重新分配`push_back`：

```
vector< vector<int> > intervals(n);
int a, b;
for (int i = 0; i < n; i++) {
  scanf("%d %d", &a, &b);
  intervals.at(i).push_back(a);
  intervals.at(i).push_back(b);
} 
```

# serialization - 如何使用 Protobuf-Net 序列化 .Net 异常？

> ID：10235854
> 
> 赞同：4
> 
> 时间：2012-04-19T20:02:08.033
> 
> 标签：serialization, protocol-buffers, protobuf-net

谁能给我一个例子或指向我如何使用 Protobuf-Net 序列化/反序列化一些内置系统类的资源？

具体来说，我只是试图序列化/反序列化基异常类和从它继承的所有其他异常类。我是否必须创建一个新的 RunTypeModel 来指定我需要序列化的每个可能的异常类，或者我可以以某种方式告诉 Protobuf-Net 以相同的方式序列化它们而不列出每一个？

非常感谢任何帮助，因为我是 Protobuf-Net 的新手，我仍在努力理解这一切。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T21:52:24.360

protobuf-net 旨在序列化 DTO 模型，但不是例外 - 非常类似于 XmlSerializer 等（但显然是二进制而不是 xml）。目前还没有内置序列化异常。可能会破解一些东西，但这并不是一个真正的设计功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T13:36:08.323

你真的不能像这样序列化一个类

```
public class MyTest
{
    [ProtoMember(1)]
    public Exception MyException { get; set; }
} 
```

但是做一个小改动就可以序列化

```
public class MyTest
{
    [ProtoMember(1, DynamicType = true)]
    public Object MyException { get; set; }
} 
```

这是我发现序列化异常的唯一方法。

# windows - 端口监听错误的网络接口

> ID：10235855
> 
> 赞同：0
> 
> 时间：2012-04-19T20:02:08.373
> 
> 标签：windows, networking, amazon-ec2, windows-server-2008, msmq

我在服务器（aws-ec2 机器）上安装了 Hamachi，我正在尝试在机器上为 msmq 打开一个端口。

我使用了以下命令：

```
netsh advfirewall firewall add rule name="open port 1801" dir=in action=allow protocol=TCP localport=1801 
```

我还允许传入的 TCP 连接到 AWS 安全组中的 1801。

我的问题是当我运行命令`netstat -ao`查看正在侦听的端口时，我只看到在 Hamachi 分配给计算机的 IP 地址上侦听的端口。但它没有监听本地私有 IP 地址（10.xxx）。

有人知道如何让它监听本地IP吗？一直在谷歌搜索没有成功的答案。

感谢所有能给我一些建议的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T07:36:32.293

听起来问题在于它没有绑定到正确的界面。您可能必须更改适配器的绑定顺序，以便首选具有本地 IP 的适配器。

说明在这里：

[http://support.microsoft.com/kb/894564](http://support.microsoft.com/kb/894564)

# telerik - 网格列排序

> ID：10235859
> 
> 赞同：0
> 
> 时间：2012-04-19T20:02:30.930
> 
> 标签：telerik, radgrid

我有一个由可查询数据源和模板列组成的网格。

```
 <telerik:RadGrid ID="rulesGrid" runat="server" AutoGenerateColumns="true">
      <MasterTableView>
      <Columns>
      <telerik:GridTemplateColumn HeaderText="Status" UniqueName="statusResult">
       </telerik:GridTemplateColumn>
       </Columns>
      </MasterTableView>

     </telerik:RadGrid> 
```

并在 page_load

```
 var ruleset = (from s in (this.Page as BasePage).DbContext.ProductEventChecks
                       where s.Sequence!=0
                       orderby s.Sequence
                       select new
                       {
                           Description = s.Description
                       });

        rulesGrid.DataSource = ruleset;
        rulesGrid.DataBind(); 
```

所以，问题是状态字段（模板列）出现在描述字段之前。但我希望首先显示描述。你能帮我完成这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:00:15.587

请检查下面的代码片段。

.aspx

```
 <telerik:RadGrid ID="RadGrid1" runat="server" OnNeedDataSource="RadGrid1_NeedDataSource"
    AllowPaging="True" OnPreRender="RadGrid1_PreRender" 
    AutoGenerateColumns="true" oncolumncreated="RadGrid1_ColumnCreated">
    <PagerStyle AlwaysVisible="true" />
    <MasterTableView>

    </MasterTableView>
</telerik:RadGrid> 
```

.aspx.cs

```
protected void RadGrid1_NeedDataSource(object sender, GridNeedDataSourceEventArgs e)
{
    dynamic data = new[] {
            new { ID = 1, Name ="Name1"}
        };

    RadGrid1.DataSource = data;
}
protected void RadGrid1_ColumnCreated(object sender, GridColumnCreatedEventArgs e)
{
    if (e.Column.UniqueName == "ID")
    {
        e.Column.OrderIndex = 1;
    }
    else if (e.Column.UniqueName == "Name")
    {
        e.Column.OrderIndex = 0;
    }

} 
```

# android - 安卓4.0日历api

> ID：10235860
> 
> 赞同：2
> 
> 时间：2012-04-19T20:02:33.727
> 
> 标签：android, android-calendar

我无法在 Android 操作系统上列出 Google 日历中的所有活动。我用[了这个教程](http://www.techrepublic.com/blog/app-builder/programming-with-the-Android-40-calendar-api-the-good-the-bad-and-the-ugly/825)

但每次我只有 98 个事件（我有更多）。

每个事件都是从 2012 年 1 月到 3 月（我有 2011 年的事件）。

这是我的代码：

```
{
  private static final String LOG = "service";
  private Cursor mCursor = null;
  private static final String[] COLS = new String[]
{ CalendarContract.Events.TITLE, CalendarContract.Events.DTSTART, CalendarContract.Events.DURATION, CalendarContract.Events.DESCRIPTION};
  Uri uri=CalendarContract.Events.CONTENT_URI;
  mCursor = getContentResolver().query(uri, COLS, null, null, CalendarContract.Events.DTSTART +" ASC");
  Calendar date = Calendar.getInstance();
  Log.i(LOG,mCursor.getCount()+"");
  while(mCursor.moveToNext()){
    date.setTimeInMillis(mCursor.getLong(1));   
    Log.i(LOG,mCursor.getString(0)+" "+date.get(Calendar.DATE)+"-"+date.get(Calendar.MONTH)+"-  "+date.get(Calendar.YEAR)+" "+date.get(Calendar.HOUR_OF_DAY)+" "+date.get(Calendar.MINUTE));
  }
  return super.onStartCommand(intent, flags, startId);
} 
```

我正在尝试将 Android 4.0 API 用于日历。谁能帮我从日历中获取所有事件？有教程之类的吗？

# opencv - jni调用android

> ID：10235865
> 
> 赞同：0
> 
> 时间：2012-04-19T20:02:43.100
> 
> 标签：opencv, android-ndk, java-native-interface

我想知道android上的jni调用是否很慢。

我正在使用冰淇淋三明治，并使用 C 和 openCV 进行眨眼检测。我基本上从 PreviewCallback 调用了我的 blinkDetect 函数。所以我希望它像 20 fps，但它更像是 5 fps，有明显的延迟。

我在 macbook pro 上运行我的 openCV 代码，我很容易获得 30 fps，所以我试图找出问题所在。

谢谢，托马斯

# javascript - MongoDB 日期对象在转换为字符串时返回 EDT

> ID：10235868
> 
> 赞同：0
> 
> 时间：2012-04-19T20:02:57.440
> 
> 标签：javascript, date, mongodb, object

我在 MongoDB 中有一个日期字段，它在 GMT 中返回一个看起来像这样的对象。

`Fri, 20 Apr 2012 22:13:30 GMT`

当我将其转换为字符串（在 Handlebar.js 模板中）时，它更改为：

`Fri Apr 20 2012 18:13:30 GMT-0400 (EDT)`

这显然行不通。将其转换为字符串时如何维护 GMT 的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T20:38:34.723

.toGMTString() 方法是否返回所需的结果？

```
> now = new Date()
ISODate("2012-04-19T20:36:12.817Z")
> now.toGMTString()
Thu, 19 Apr 2012 20:36:12 GMT
> 
```

希望答案就这么简单。如果我误解了你的问题，请告诉我！

# iphone - iPhone：如何在不更新位置/在后台运行 GPS 的情况下在地图视图上显示用户位置？

> ID：10235869
> 
> 赞同：0
> 
> 时间：2012-04-19T20:03:00.917
> 
> 标签：iphone, gps, location, mkmapview, power-management

如何在不运行 GPS 更新位置（根本）时在 mapView 中显示用户位置？将要

```
mapView.userTrackingMode = kCLLocationAccuracyNearestTenMeters; 
```

做这项工作还是GPS仍然会在后台烧电池？

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T21:02:51.347

鉴于信息有限，我将尽力回答您的问题。

GPS有3种主要模式，从低功率到高功率，从低精度到高精度。

*   位置跟踪关闭
*   后台位置更新（使用手机信号塔和 wifi）
*   GPS位置更新

如果`MKMapView`您设置`showsUserLocation`为，则会为用户位置显示一个蓝点`YES`。将`MKMapView`使用所有可用的定位方法尽可能准确地找到用户位置，并在设置为 YES 时不断更新它。

中的跟踪是`MKMapView`一种将用户位置保持在屏幕中心的模式，随着用户的移动移动可见的地图区域，并且在 iOS5 中可用。您有 3 个`MKUserTrackingMode`s 可供选择。从文档：

> MKUserTrackingModeNone：地图不跟随用户位置。
> 
> MKUserTrackingModeFollow：地图跟随用户位置。
> 
> MKUserTrackingModeFollowWithHeading：地图跟随用户位置，随着航向变化而旋转。

因此，将其设置`kCLLocationAccuracyNearestTenMeters`为不起作用，因为在这种情况下它不是可用的选项。

在后台显示位置会烧电池吗？这取决于你所说的背景。当用户点击主页按钮时，`MKMapView`系统会强制停止使用 GPS。当应用程序正在运行并且 MKMapView 处于活动状态并且`showsUserLocation`设置了属性时`YES`，它将继续使用任何可用的方法（包括 GPS）来更新位置。你有几个策略来减少这种情况。

1) 假设用户需要在地图显示在屏幕上时看到他们的位置更新。在这种情况下，保持`showsUserLocation`设置为 YES 直到地图移出屏幕或设备被锁定，然后将其设置为`NO`

2）假设用户只需要从特定时间点看到他们位置的静态标记，例如打开应用程序时。在这种情况下，您需要创建一个`CLLocationManager`对象，询问它`startUpdatingLocation`，过滤委托消息以获得所需的准确性，然后关闭位置更新 ( `stopUpdatingLocation`)。然后，您可以添加一个`MKAnnotation`以`MKMapView`向用户显示他们的位置。

如您所见，第 2 项工作量更大，但非常省电。数字 1 很简单，但在地图可见时会消耗更多电池。由您决定用户期望的行为并相应地实施您的应用程序。

# android - Android 电子邮件问题

> ID：10235871
> 
> 赞同：0
> 
> 时间：2012-04-19T20:03:12.273
> 
> 标签：android, email

我放弃了发送后台电子邮件的任务……我尝试了很多东西，但似乎都没有奏效。

我在我爸爸的外卖店工作。我的应用程序应该向我们的服务器发送一封包含用户订单的电子邮件。

我尝试在按下按钮（没有 gmail 界面）后直接从我的活动中发送电子邮件。我无法做到这一点，所以我想问你任何其他方式来做这样的事情。

如果没有办法，我正在考虑使用默认的 gmail 界面。在这种情况下，我想知道是否有任何选项可以避免用户修改电子邮件内容、地址和主题，只需查看它，然后按发送按钮。

谢谢你。

# android - onPrepared 导致一位用户出错

> ID：10235872
> 
> 赞同：0
> 
> 时间：2012-04-19T20:03:23.273
> 
> 标签：android, media-player

我已经有这个简单的程序大约两个月了，前几天晚上，一个错误出现在用户面前，我不明白为什么。

```
public class mainmenu extends Activity implements OnPreparedListener {
    private PopupWindow pw;
    public static int RandomNum;
    public static String quickStart;
    private dbadapter mydbhelper;
    MediaPlayer mpButtonClick;
    Intent intent;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mainmenu);

    Button bsound = (Button) findViewById(R.id.bCategories);
    bsound.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            quickStart = "Cate";
            onPrepared(mpButtonClick);
            intent = new Intent ("wanted.pro.madlibslite.CATEGORIES");
            intent.putExtra("quickStart", quickStart);
            startActivity(intent);
        }
    });

    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            moveTaskToBack(true);
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }

    //Menu Items
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.layout.mainmenu, menu);
        return true;
    }

    public boolean onOptionsItemSelected(MenuItem item) {
        // Handle item selection
        switch (item.getItemId()) {
             case R.id.help:
               showHelp();
                return true;
           }
        return false;
    }

        private void showHelp() {
            LayoutInflater inflater = (LayoutInflater)
                       this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                     pw = new PopupWindow(
                       inflater.inflate(R.layout.help, null, false), 
                       LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT, 
                       true);
                     pw.showAtLocation(this.findViewById(R.id.bCategories), Gravity.CENTER, 0, 0); 
        }
        public void onClickHelp(View helper){pw.dismiss();

        }   
        //QuickStart
        public void onClickQuick(View main) {
            Toast.makeText(this, "Quick Start only available in full version.", 1000).show();
            //RandomNum = (int) (Math.random()*101);
            //quickStart = "Quick";
            //mpButtonClick.start();
            //startActivity(new Intent("wanted.pro.madlibslite.INPUTPAGE"));

        }

        public void onPrepared(MediaPlayer player) {
            mpButtonClick.setOnPreparedListener(this);
            try {
                mpButtonClick.prepare();

            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            mpButtonClick.start();
        }

        @Override
        protected void onResume() {
            mydbhelper = dbadapter.getInstance(mainmenu.this);
            mydbhelper.open();
            mpButtonClick = MediaPlayer.create(this, R.raw.button50);
            super.onResume();
        }

        @Override
        protected void onPause() {
            mpButtonClick.release();
            super.onPause();
        }

} 
```

有问题的错误...

```
java.lang.NullPointerException
at wanted.pro.madlibslite.mainmenu.onPrepared(mainmenu.java:107)
at wanted.pro.madlibslite.mainmenu$1.onClick(mainmenu.java:45)
at android.view.View.performClick(View.java:2485)
at android.view.View$PerformClick.run(View.java:9089)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3806)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method) 
```

可悲的是，我没有他们使用的设备。但是希望这里的某人可能会看到我做错的事情，这会导致 onprepared 出错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T01:15:38.417

在 onPrepared 方法中唯一可能导致 NullPointerException 的变量是：`mpButtonClick`。所以让我们试着弄清楚怎么`mpButtonClick`可能是空的......

在 onResume 方法中，您将创建一个新的 MediaPlayer，并将其分配给变量 mpButtonClick。但是，您可能错过的是有时可能无法创建 MediaPlayers。正如Android文档所说的静态方法[`MediaPlayer.create(Context context, int resid)`](http://developer.android.com/reference/android/media/MediaPlayer.html#create%28android.content.Context,%20int%29)：

> **退货**
> 
> 一个 MediaPlayer 对象，如果创建失败，则返回 null

没错——该方法不一定总是返回有效的 MediaPlayer。每当无法创建 MediaPlayer 时，它将返回 null。然后导致您的 onPrepared 方法访问一个空变量 - 因此是 NullPointerException。

# jquery - 使用 jQuery 模拟 AJAXy 点击选择菜单

> ID：10235874
> 
> 赞同：2
> 
> 时间：2012-04-19T20:03:26.487
> 
> 标签：jquery, ajax, onclick

我环顾四周，我想我已经接近了，但我真的很挣扎。

我们有一个页面通过 AJAX 拉入内容以填充下拉菜单。

您从一个下拉列表开始，您选择的内容将获取下一组等。

我希望能够通过在后面的菜单之一中单击链接在下拉列表中选择一个选项（即，最初不可见），并且我认为由于 AJAX 存在一些 jQuery 绑定奇怪，但我想不通如何做到这一点。

我的 html （此处的选择列表在填充 AJAX 之前不存在）

```
<form>
<select name="myList">
   <option value="1">Option 1</option>
   <option value="2">Option 2</option>
   <option value="3">Option 3</option>
</select>
<a href="javascript:void(0)" id="option1">Select option 1</a>
<a href="javascript:void(0)" id="option2">Select option 2</a>
<a href="javascript:void(0)" id="option3">Select option 3</a>
</form> 
```

我的jq：

```
$('#option1').click(function() {
    $('select[name=myList] option[value=1]').attr('selected', 'selected');
});
$('#option2').click(function() {
    $('select[name=myList] option[value=2]').attr('selected', 'selected');
});
$('#option3').click(function() {
    $('select[name=myList] option[value=3]').attr('selected', 'selected');
}); 
```

现在这适用于选择选项，但它不模拟鼠标点击，我需要它（出于某种原因），这是显示下一个内容所必需的（即，不仅仅是选择正确的选项，它*必须*被点击on。在这里我的意思是，我得到 onClick 事件来触发，但这仍然没有得到下一个要加载的内容。我不能遗憾地改变这个：/）。

我试图在这里实现一些东西[http://docs.jquery.com/Frequently_Asked_Questions#Why_do_my_events_stop_working_after_an_AJAX_request.3F](http://docs.jquery.com/Frequently_Asked_Questions#Why_do_my_events_stop_working_after_an_AJAX_request.3F)

但没有取得任何成功。感谢您的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:06:19.423

您总是可以自己模拟点击吗？尽管这是您想要的更改事件，但只需执行以下操作：

**演示：http: [//jsfiddle.net/xsP2A/](http://jsfiddle.net/xsP2A/)**

```
$('#option1').click(function() {
    $('select[name=myList] option[value=1]').attr('selected', 'selected');
    $('select[name=myList]').change();
});
$('#option2').click(function() {
    $('select[name=myList] option[value=2]').attr('selected', 'selected');
    $('select[name=myList]').change();
});
$('#option3').click(function() {
    $('select[name=myList] option[value=3]').attr('selected', 'selected');
    $('select[name=myList]').change();
}); 
```

# android - 找不到 build.xml (Android)

> ID：10235882
> 
> 赞同：8
> 
> 时间：2012-04-19T20:04:22.303
> 
> 标签：android, netbeans

我一直在寻找这个问题的答案一段时间，但我似乎找不到它。我通过 perfoce 移动了一个 NeBeans Android 项目，现在我收到以下错误

```
 ****\ZYAndroidAPP\build.xml:81: Cannot find F:\Program Files (x86)\Android\android-sdk\tools\ant\build.xml imported from ****\ZYAndroidAPP\build.xml 
```

似乎来自Android的构建信息没有被适当地设置

```
 <import file="${sdk.dir}/tools/ant/build.xml" /> 
```

在项目的构建脚本中。我尝试将其设置为 SDK 的正确路径，但它给了我同样的错误。

以前有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-30T18:23:50.793

检查两件事...

A. 确保在`local.properties`文件中正确设置路径

`sdk.dir=/Users/me/Documents/android-sdk-macosx/`

B. 确保您的环境变量设置正确：

`echo $ANDROID_HOME`

如果没有，那么设置它：

`export ANDROID_HOME=/Users/me/Documents/android-sdk-macosx/`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T16:17:54.677

正如@Justin Breitfeller 所说，local.properties 的 sdk 路径不好

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T02:44:47.200

如果您正在寻找这个问题的答案，请检查您的应用程序是哪个 android 版本以及 SDK 中可用的版本。如果没有匹配的 SDK 版本，netbeans 会抛出此错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-18T15:53:51.543

第一种方法：找到local.properties并将sdk.dir更改为安装Android SDK的正确路径。第二种方式：更改`<import file="..." />`为SDK的正确路径。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-21T17:46:03.333

我遇到了同样的问题，我找到了解决方案：目录 {sdk_dir}\tools 不在这里，所以：

*   从官网下载sdk
*   在第一个 sdk 目录上复制/粘贴 \tools 目录

# php - 谷歌日历事件 API 抛出错误

> ID：10235885
> 
> 赞同：0
> 
> 时间：2012-04-19T20:04:30.630
> 
> 标签：php, google-calendar-api

我使用 OAuth 对我的应用程序进行了身份验证 - 我已经使用日历 API 对其进行了测试。一切正常。我还为事件 API 使用了“快速添加”方法，效果很好。但是当我尝试使用以下代码插入时

```
$event = new Event();
$event->setSummary('hello there');
$event->setLocation('America/Los_Angeles');
$start = new EventDateTime();
$start->setDateTime('2012-04-19');
$event->setStart($start);
$createdEvent = $cal->events->insert('myemail@gmail.com', $event); 
```

我收到以下错误：

> 致命错误：未捕获的异常“apiServiceException”和消息“调用 POST 时出错
> [https://www.googleapis.com/calendar/v3/calendars/myemail@gmail.com/events?key=AIzaSyBddYIgnZJrXHuT8gvX-0tEypxsycw99rA](https://www.googleapis.com/calendar/v3/calendars/myemail@gmail.com/events?key=AIzaSyBddYIgnZJrXHuT8gvX-0tEypxsycw99rA): (400) Bad Request' 在 C:\xampp\htdocs\uis\google-api-php-client\src\io\apiREST.php:86 堆栈跟踪：#0 C:\xampp\htdocs\uis\google- api-php-client\src\io\apiREST.php(56): apiREST::decodeHttpResponse(Object(apiHttpRequest)) #1 C:\xampp\htdocs\uis\google-api-php-client\src\service\ apiServiceResource.php(187): apiREST::execute(Object(apiServiceRequest)) #2 C:\xampp\htdocs\uis\google-api-php-client\src\contrib\apiCalendarService.php(493): apiServiceResource-> __call('insert', Array) #3 C:\xampp\htdocs\uis\google-api-php-client\examples\calendar\cal.php(44): EventsServiceResource->insert('paine1591@gmail... ', Object(Event)) #4 {main} 在第 86 行的 C:\xampp\htdocs\uis\google-api-php-client\src\io\apiREST.php 中抛出

myemail@gmail.com 是我日历的 ID。它适用于其他一切。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T22:16:07.033

您似乎没有设置活动的参加者。

例子：

```
$end = new EventDateTime();
$end->setDateTime('2011-06-03T10:25:00.000-07:00');
$event->end = $end;

$attendee1 = new EventAttendee();
$attendee1->email = 'attendeeEmail';

$attendees = array($attendee1, ...);
$event->attendees = $attendees; 
```

# android - 尝试在 Android 中打开文件的错误路径

> ID：10235888
> 
> 赞同：1
> 
> 时间：2012-04-19T20:04:38.763
> 
> 标签：android, file, path

我正在尝试用这个打开一个文件：

```
document = builder.parse(new File("Data.xml")); 
```

我收到了这条消息：

> /Data.xml：打开失败：ENOENT（没有这样的文件或目录）

该文件位于android项目的根目录中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T20:11:41.907

您正在尝试打开位于`/`（在 linux 中这是文件系统的根目录）中的文件。相反，您应该尝试在 SDCard 上或在应用程序的本地存储目录中创建文件。

请参阅此以获得更多说明：http: [//developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T20:15:55.910

移动`Data.xml`到`assets`项目的文件夹中。然后要获取文件引用，请调用`getResources().getAssets().openFd( "Data.xml" )`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T20:35:06.447

您可能应该尝试为构建器使用文件输入流构造函数，并使用 openFileInput( String fileName ) 来获取它，它只使用您的应用程序的数据目录。

[使用持久存储](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)

[打开文件输入（）](http://developer.android.com/reference/android/content/Context.html#openFileInput%28java.lang.String%29)

# c# - 如何在运行时将文本框存储到数组中

> ID：10235889
> 
> 赞同：1
> 
> 时间：2012-04-19T20:04:40.677
> 
> 标签：c#, .net, windows-8

情况是这样的：我有多个文本框。在发生 textChanged 事件时，文本框应存储在数组中，以便我可以在其他功能中使用它。

```
private void txt_TextChanged(object sender, TextChangedEventArgs e)
    {
        TextBox t;
        t = (TextBox)sender;
    } 
```

现在我有了负责该事件的文本框。现在我必须将这个和更多存储在一个数组中，以便可以在另一个函数的其他地方访问这些。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T20:12:29.623

如果你愿意，你可以把它放在一个列表中。不知道为什么你真的想这样做......

```
List<TextBox> txtbxList = new List<TextBox>();

private void txt_TextChanged(object sender, TextChangedEventArgs e)
    {
        TextBox t;
        t = (TextBox)sender;
        txtbxList.Add(t);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T20:12:55.533

### 描述

我不知道您为什么需要将 TextBoxes 存储在 List 或 Array 中，但您可以使用通用 List 来实现。

> 表示可以通过索引访问的对象的强类型列表。提供搜索、排序和操作列表的方法。

### 样本

```
List<TextBox> myTextBoxes = new List<TextBox>();
// Add a TextBox
myTextBoxes.Add(myTextBox);
// get a TextBox by Name
TextBox t = myTextBoxes.Where(x => x.Name == "TextBoxName").FirstOrDefault(); 
```

### 更多信息

*   [MSDN - 列表类](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T20:15:15.470

假设您要存储 TextBoxes 中的文本，您可以使用这样的字典：

```
private Dictionary<string, string> dictionary = new Dictionary<string, string>();

private void txt_TextChanged(object sender, TextChangedEventArgs e)
{
    TextBox textBox = (TextBox)sender;
    string key = textBox.Name;
    string value = textBox.Text;
    if (!dictionary.ContainsKey(key))
    {
        dictionary.Add(key, value);
    }
    else
    {
        dictionary[key] = value;
    }
} 
```

# .htaccess - 重定向 http://www.saledresses.net/index.php?p=home 到 http://www.saledresses.net/

> ID：10235891
> 
> 赞同：0
> 
> 时间：2012-04-19T20:04:43.023
> 
> 标签：.htaccess, redirect, mod-rewrite, rewrite, pinnacle-cart

我正在使用巅峰购物车购物车。我已经能够重定向 index.php 但无法将[http://www.saledresses.net/index.php?p=home](http://www.saledresses.net/index.php?p=home)重定向到[http://www.saledresses.net/](http://www.saledresses.net/)。我觉得这很重要，因为这是与网站每个页面上的主页按钮链接的 URL。

谢谢你，

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:21:01.893

就像是：

```
RewriteCond %{REQUEST_URI} ^/index\.php$ [NC]
RewriteCond %{QUERY_STRING} ^p=home$ [NC]
RewriteRule - http://www.salesdress.net/ [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:58:48.823

在管理方面，有一个选项可以添加您的主页 URL - 我猜它是在主页设置或 SEO 设置中

# c# - 用客户端替换服务器端的自定义验证器

> ID：10235893
> 
> 赞同：0
> 
> 时间：2012-04-19T20:04:45.810
> 
> 标签：c#, javascript, asp.net, validation, active-directory

我有一个服务器端 customvalidator。因为它没有触发，所以我想使用客户端来验证一个文本框。它包括活动目录的东西。我不确定我们可以将代码转换为客户端吗？

```
<td class="style4">
            <asp:TextBox ID="TextUserName" runat="server"></asp:TextBox>
        </td><td><asp:CustomValidator ID="CustomValidatorUser" runat="server" ControlToValidate="TextUserName"
                                ErrorMessage="Minimum of 6 (six) alphanumeric characters." 
                OnServerValidate="ValidateUser" Display="Dynamic"
                                ValidateEmptyText="True" ></asp:CustomValidator></td> 
```

和

```
 protected void ValidateUser(object source, ServerValidateEventArgs args)
 {
        string UserNameCreated = TextUserName.Text;
        string AD_Server = System.Configuration.ConfigurationManager.AppSettings["AD_Server"];
        DirectoryEntry entry = new DirectoryEntry(AD_Server);
        entry.AuthenticationType = AuthenticationTypes.Secure;

        DirectorySearcher deSearch = new DirectorySearcher(entry);
        deSearch.Filter = "(&(objectClass=user)(samaccountname=" + UserNameCreated + "))";

        SearchResultCollection results = deSearch.FindAll();
        Match match = Regex.Match(args.Value, @"^[a-zA-Z0-9]{6,}$",
    RegexOptions.IgnoreCase);
            if (results.Count > 0)
            args.IsValid = false;
        else if (match.Success)
            args.IsValid = true;
        // true means that it is validated. 
        else
            args.IsValid = false;
 } 
```

我的想法：

拳头：

```
<td class="style4">
            <asp:TextBox ID="TextUserName" runat="server"></asp:TextBox>
        </td><td><asp:CustomValidator ID="CustomValidatorUser" runat="server" ControlToValidate="TextUserName"
                                ErrorMessage="Minimum of 6 (six) alphanumeric characters." 
                ClientValidatationFunction="ValidateUser" Display="Dynamic"
                                ValidateEmptyText="True" ></asp:CustomValidator></td> 
```

第二

```
<script language="javascript"> 
function ValidateUser(source, arguments)
{
    var RegularExpression = /^[a-zA-Z0-9]{6,}$/;
    if (arguments.Value.test(RegularExpression) == 0 ){
        arguments.IsValid = true;
    } else {
        arguments.IsValid = false;
    }
}
</script> 
```

那么AD呢？也许这是一个错误的问题！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:10:27.017

我不知道您打算如何使用此代码，如果它与任何方面的身份验证有关，您应该在服务器端执行所有验证，因为客户端代码很容易被破解。

话虽如此，如果安全不是问题，您可以在服务器上使用 Web 方法来获取结果计数。您可以通过 ajax 调用调用此 Web 方法。

# ios - 如何在不使用 UIWebView 的情况下计算 HTML 页面的滚动宽度以获得固定高度

> ID：10235895
> 
> 赞同：3
> 
> 时间：2012-04-19T20:04:51.993
> 
> 标签：ios, uiwebview

我们可以使用下面的方法来计算一个 HTML 页面在一个固定高度的 UIWebView 中的 scrollWidth。

```
[webView stringByEvaluatingJavaScriptFromString:@"document.documentElement.scrollWidth"] 
```

是否可以在不将请求加载到 UIWebView 的情况下对本地 HTML 页面进行此评估？

希望这发生在一个单独的线程上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T21:18:09.510

**不**（有点）。需要以某种能力呈现 html 才能获得任何类型的测量值。**原因在于 html/css/javascript 协同工作的方式**（javascript 修改 html/css 属性，css 修改 html）。如果您**必须**在不使用 UIWebView 的情况下获得宽度，您将被以下两个选项之一困住：

1.  **自己渲染页面**，无论是使用您的自定义代码（数千工时，不要这样做）还是一些开源库。我怀疑这会比 UIWebView 更快，并且可能会引入意想不到的错误。
2.  **在后台测量页面，并将该值存储在某处**。这基本上是一种缓存大小的形式。如果页面在您发货时是静态的，则只需手动执行并对其进行硬编码。如果它们是动态的，请编写一个类以在启动时测量它们并存储值。动态测量**需要 UIWebView**

**编辑：**

您是否尝试这样做是因为 UIWebView 阻塞了您的主线程，从而导致您的应用程序出现抖动？如果是这样，您是否考虑过尝试这样的事情？：

```
 UIWebView *webview = [[UIWebView alloc] initWithFrame:CGRectMake(0,0,320,460)];
 webview.delegate = self;
 [webview loadRequest: [NSURLRequest requestWithURL:[NSURL urlFromString:@"/path/to/file.html"]]]; 
```

……然后后来……

```
 - (void) webViewDidFinishLoad:(UIWebView *)webView 
 {
    // run your code to get scroll width of page
 } 
```

# java - JPA 在持久化实体时忽略字段

> ID：10235899
> 
> 赞同：1
> 
> 时间：2012-04-19T20:05:03.097
> 
> 标签：java, jpa, entity

我在 JPA 实体类中有问题。该实体正常工作，但今天我添加了另一个字段（一个简单的字符串，数据库中的 varchar(255) NOT NULL）。当我尝试坚持一个新实体时，我得到一个

```
java.sql.SQLException: Field 'companyLogoUrl' doesn't have a default value 
```

嗯，这是真的。该列没有默认值。但在我的代码中，我为它设置了值。当我查看生成的插入语句时，该字段不存在。

```
INSERT INTO COMPANY (ACCOUNTNUMBER, ACCOUNTOWNER, BANK, BANKCODE, CHANGEDAT, 
COMPANYNAME, CREATEDAT, addressId) 
```

变量的名称与列名匹配，因此没有可能导致错误的注释。它就像其他工作正常的字段/列一样被对待。

提前感谢您的帮助！

编辑：

这是类（一个groovy类）：

```
@Entity
class Company extends KupiumEntity
{

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
final int companyId

String companyName
String bank
String bankCode
String accountNumber
String accountOwner

String companyLogoUrl

@ManyToOne(cascade=CascadeType.PERSIST)
@JoinColumn(name="addressId")
Address address = new Address()

@OneToMany(cascade = CascadeType.ALL)
@JoinColumn(name="companyId")
List<Invoice> invoices = new ArrayList<Invoice>()

@OneToMany(cascade = CascadeType.ALL)
@JoinColumn(name="companyId")
List<Kupon> kupons = new ArrayList<Kupon>()

@OneToMany(cascade = CascadeType.ALL)
@JoinColumn(name="mandatorId")
List<Mandator> mandators = new ArrayList<Mandator>()

@OneToMany(cascade = CascadeType.ALL)
@JoinColumn(name="companyAppId")
List<CompanyApp> companyApps = new ArrayList<CompanyApp>()
} 
```

编辑2：很抱歉造成混乱。表中的字段和列名为“companyLogoUrl”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:23:44.797

好吧，我今天解决了这个问题，虽然我仍然不知道原因是什么。

我试图运行我的 unitTests，这些告诉我他们在这个项目中找不到 pom.xml。这有点令人惊讶，因为它不是 Maven 项目，所以我不明白他为什么要寻找它。无论如何，我创建了一个新项目，将源代码从旧项目复制到新项目，然后......它可以工作。

我仍然很难弄清楚为什么 eclipse 甚至会认为它是一个 maven 项目（他为什么还要寻找 pom.xml？）

再次对字段/列名称的混淆表示歉意。谢谢你们的帮助，伙计们！

# java - 在主要活动中创建一个类

> ID：10235900
> 
> 赞同：0
> 
> 时间：2012-04-19T20:05:11.820
> 
> 标签：java, android, class, oncreate

`onCreate`在活动声明中加载类的最佳方法是什么？我有两个类，一个（标题为第二个）是在主要活动开始时“加载”。希望我的示例代码能更好地解释我想说的：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.somelayout);
    <some class here>;
} 
```

我一直在尝试一些事情，例如：`Date.class.cast(null);`

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T20:10:09.073

我不完全确定您要做什么，但是您所描述的是实例化一个类。你可以这样做：

```
MyClass instance = new MyClass(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:10:03.850

要加载一个类，你只需要使用它。如果您想要的只是对您可以使用的类的引用

```
Class myClass = MyClass.class; 
```

# rake - 为什么即使 rake 似乎存在，bundler 也无法安装 rake？

> ID：10235902
> 
> 赞同：0
> 
> 时间：2012-04-19T20:05:20.263
> 
> 标签：rake, bundler, rbenv

我在使用 rbenv 和 bundler 时遇到了一些问题。当我在我的应用程序上捆绑安装时，我收到一条错误消息，指出安装 Rake 时发生错误。

我认为这与 rbenv 没有指向 gems 的写入路径有关——但我并不积极。

为什么当 rake 出现时，bundler 无法安装 rake？

**控制台输出**

```
deploy@telemed-test:/u/apps/telemed_solutions/current$ bundle install
Fetching gem metadata from http://rubygems.org/.......
Fetching gem metadata from http://rubygems.org/..

NoMethodError: private method `open' called for Gem::Package:Class
An error occured while installing rake (0.9.2), and Bundler cannot continue.
Make sure that `gem install rake -v '0.9.2'` succeeds before bundling.
deploy@telemed-test:/u/apps/telemed_solutions/current$ 

deploy@telemed-test:/u/apps/telemed_solutions/current$ rbenv version
1.9.3-p125 (set by /home/deploy/.rbenv/version)

deploy@telemed-test:/u/apps/telemed_solutions/current$ gem list

*** LOCAL GEMS ***

bigdecimal (1.1.0)
bundler (1.1.3)
io-console (0.3)
json (1.6.6, 1.5.4)
minitest (2.12.1, 2.5.1)
rake (0.9.2)
rdoc (3.12, 3.9.4) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T20:09:35.640

可能是时候升级 ruby​​gems 了。某些规范文件可能正在调用您的版本中不存在的 ruby​​gems 方法。

运行`gem --version`以检查您当前的版本。

并`gem update --system`升级到最新。

# android - 将 Proguard 应用于 Google Play 上的现有应用

> ID：10235904
> 
> 赞同：4
> 
> 时间：2012-04-19T20:05:25.987
> 
> 标签：android, proguard

事实证明，我没有在已发布到 Google Play 商店的实时应用程序上激活 Proguard。这不是世界末日，因为我在应用程序中没有任何敏感内容（而且我发现即使应用 Proguard 我也可以很好地反编译应用程序）。

我的问题是：如果我应用 Proguard，然后将新的 .apk 上传到 Google Play，当我的用户更新时，他们会遇到问题吗？

我问的一个原因是因为我了解到更改应用程序中的 LAUNCHER 活动可以使用户创建的快捷方式在更新版本中无效的艰难方法，所以我试图防止给我的用户带来更多不便。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T20:07:12.160

> 如果我应用 Proguard，然后将新的 .apk 上传到 Google Play，当我的用户更新时，他们会遇到问题吗？

不会。您的用户获得的是应用程序的编译版本，而不是原始源代码。

只要包名称保持不变并且您使用相同的密钥库对包进行签名，您就不会有任何问题。

# http - Socket.io 未设置 CORS 标头

> ID：10235905
> 
> 赞同：7
> 
> 时间：2012-04-19T20:05:28.993
> 
> 标签：http, node.js, websocket, socket.io, cors

我知道这个问题已经被问过几次了。
但是，我无法让任何这些解决方案发挥作用。
我正在运行 node.js 和 socket.io 的标准安装。（来自 Amazon EC2 上
的 yum）问题是 Chrome 正在回退到 xhr 轮询，并且这些请求需要有效的 CORS 配置。但是，我似乎无法让它工作。我的 Web 服务器在端口 80 上运行，node.js(socket.io) 在端口 81 上运行。如您所见，我试图让 socket.io 使用源策略。我也尝试过使用“*：*”作为来源，但没有运气。
这是我的代码：

```
var http = require('http');
var io = require('socket.io').listen(81, {origins: '*'});

io.configure( function(){
    io.set('origin', '*');
});
io.set("origins","*");

var server = http.createServer(function(req, res) {
    io.sockets.emit("message", "test");
res.writeHead(200);
    res.end('Hello Http');
    console.log("Message recieved!");
});
server.listen(82);

io.sockets.on('connection', function(client)  {
    console.log("New Connection");
}); 
```

非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T23:58:38.827

这是我必须用来让 CORS 与 socket.io 一起使用的语法：

```
io.set( 'origins', '*domain.com*:*' ); 
```

如果涉及到它，请使用`console.log`以确保您在`Manager.prototype.handleHandshake`inside输入此代码块`./lib/manager.js`：

```
 if (origin) {
    // https://developer.mozilla.org/En/HTTP_Access_Control
    headers['Access-Control-Allow-Origin'] = '*';

    if (req.headers.cookie) {
      headers['Access-Control-Allow-Credentials'] = 'true';
    }
  } 
```

# javascript - Firefox 不会调用 HTML5 视频的 canplay/canplaythrough 事件。为什么？

> ID：10235919
> 
> 赞同：26
> 
> 时间：2012-04-19T20:06:30.277
> 
> 标签：javascript, jquery, html5-video

我正在构建一个用于管理 HTML5 视频的 jQuery 插件。我正在尝试捕获 canplay 和 canplaythrough 事件。在 Chrome 中，事件被触发没有问题。在 Firefox 中，有时会触发，有时不会。

我在这里稍微简化了我的代码：

```
$('#my_video').on('canplay canplaythrough', function(){
    console.log('canplay event fired');
}); 
```

我也尝试使用本机 javascript .addEventListener() 但它不起作用。

知道为什么没有在 Firefox 上调用该事件以及如何解决这个问题吗？

注意：请不要告诉我使用已经可用的插件之一，如 jplayer 和 video-js，我知道它们存在并且运行良好，但我必须构建一个内部解决方案。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2014-09-25T09:01:42.003

问题是您的元素在您注册事件处理程序之前`video`触发了事件。`canplaythrough`

正如您在自己的答案中指出的那样，您可以将脚本放在 中`<head>`，但这对您的页面性能不利。

解决问题的更好方法是检查`readystate`属性并在这种情况下手动执行函数：

```
var $video = $('video'),
    videoElement = $video[0];

$video.on('canplaythrough', callback);

// If the video is in the cache of the browser,
// the 'canplaythrough' event might have been triggered
// before we registered the event handler.
if (videoElement.readyState > 3) {
  callback();
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-12T23:45:10.810

您看到此问题的最可能原因可能与时间问题有关。您在接受的答案中表示，将 jQuery 放在头部而不是页脚可以解决问题。这告诉我问题在于 DOM 解析和脚本执行顺序。最可能的罪魁祸首是“canplay”和“canplaythrough”事件在 jquery 和您的页面脚本被解析并添加事件处理程序之前被触发 - 但只是有时，取决于网络流量和加载时间。通过将脚本放在头部，您强制在创建 DOM 元素之前发生事件绑定，从而确保您不会错过任何事件。

顺便说一句，将脚本元素放在页面底部的性能优势值得商榷。如果您真的想调整页面性能，请使用 LABjs 之类的东西来管理并行脚本加载。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-10-22T20:46:31.230

就我而言，这是由`preload`为元素指定的属性确定的。我根本没有指定它，所以不同的浏览器选择做不同的事情。

一旦我指定`preload="auto"`，`on("canplay")`事件处理程序就可以正常/按预期工作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-24T19:41:35.890

即使我的问题没有引起任何关注，我认为为将来可能偶然发现此问题的人提供解释是个好主意...

问题真的很奇怪：如果 jQuery 核心包含在页脚中，则某些视频事件不起作用。如果 jQuery 核心包含在文档的头部，则所有事件都被正确调用。

所以解决方案是在 html 头部包含 jQuery 核心，即使优化的“最佳实践”建议将所有脚本放在正文的末尾以加快加载时间。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-06-07T16:31:08.593

我也确实认为这是一个竞争条件。我绕过它的方式如下：

在视频元素的 HTML 中添加属性 preload="metadata" - 仅预加载视频元数据。所以：

```
<video id="myVideo" width="640" height="480" preload="metadata" /> 
```

接下来，在 JS 内部：

```
var $vid = $("#myVideo");
$vid.bind("canplaythrough", console.log("can play through full video"));
$vid.get(0).load(); 
```

这在 Chrome 中为我记录了消息-尚未在其他地方进行测试。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-10-17T18:06:09.930

如果您希望 Firefox 在触发后加载整个音频，`load`那么它不会这样做。它会触发`loadstart`但不会下载任何东西。`progress`不会触发任何事件。它实际上不会对该文件提出任何请求。您可以在 Firebug 中看到这种行为。

Firefox 只会在您触发“播放”后开始加载文件。

[证明](http://jsbin.com/wenukugedo/6/)。请参阅控制台输出。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-01-07T19:07:55.513

添加：

```
var video = $('video');
video.trigger('load'); 
```

**添加 canplaythrough 事件侦听器后**，我在 Firefox 和 Safari 上修复了它。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-05-23T09:26:30.947

经过 1.5 天从这里尝试不同的方法（香草）。带有 addEventListner 的事件“canplay”和“canplaythrough”在 Edge 中不起作用。它们在其他所有浏览器中都能正常工作。所以我最后用 setTimout 检查了“就绪状态”:-(。不是很优雅，但它对我有用。

```
Controller.prototype.backGroundControl = function () {
var vid = document.querySelector('#bgvid');
var bgImg = document.querySelector('#bgimg');
_this = this;

if (vid.readyState === 4){
    bgImg.style.opacity = "0"
} else{
    setTimeout(function(){
        _this.backGroundControl();
    },500)
} 
```

}

# css - 移动设备上的双倍字体大小

> ID：10235920
> 
> 赞同：2
> 
> 时间：2012-04-19T20:06:30.643
> 
> 标签：css, mobile

也许这个问题很简单，但我不知道如何解决这个问题，也没有真正的想法我应该在谷歌输入什么;）

在我的 CSS 中，我有以下声明：

```
body { font-size: 100%; } 
```

不，因为新的高密度设备显示我的字体非常小，我希望将该声明设置为：

```
body { font-size: 200%; } 
```

在不创建/链接其他文件或对用户代理进行一些服务器端处理的情况下，最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T20:18:21.030

Use a mobile browser detection (either server-side or client-side). You can find this at [http://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/). If the browser is mobile, add the class `mobile` to the body tag.

E.g. if you use the jQuery code from Detect Mobile Browsers:

```
$(document).ready(function()
{
    if(jQuery.browser.mobile)
    {
        $('body').addClass('mobile');
    }
}); 
```

Then, in your CSS, you can use `body.mobile {}` and `.mobile .something {}` to apply mobile specific styles.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T01:30:23.257

```
html {-webkit-text-size-adjust: none;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T20:20:37.730

“智能”高密度手机会自动为您处理此问题（例如带有 Retina 显示屏的 ios 设备）。不太聪明的人不会，但请注意，用户已经习惯了这一点，因此您可能根本不想调整他们的字体，因为他们自己可能已经这样做了。

# c++ - C++ Boost Graph Library：输出自定义顶点属性

> ID：10235927
> 
> 赞同：3
> 
> 时间：2012-04-19T20:07:03.673
> 
> 标签：c++, boost, graphviz, boost-graph

我正在努力让自定义属性编写器与 BGL 一起工作。

```
struct IkGraph_VertexProperty {
    int id_ ;
    int type_ ;
    std::pair<int,int> gaussians_ ; // Type of Joint, Ids of Gaussians
};

struct IkGraph_VertexPropertyTag
{
typedef edge_property_tag kind;
static std::size_t const num; 
};

std::size_t const IkGraph_VertexPropertyTag::num = (std::size_t)&IkGraph_VertexPropertyTag::num;

typedef property<IkGraph_VertexPropertyTag, IkGraph_VertexProperty> vertex_info_type; 
```

...在方法中定义的自定义图

```
typedef adjacency_list<setS, vecS, bidirectionalS, vertex_info_type, IkGraph_EdgeProperty> TGraph ;
TGraph testGraph ;
std::ofstream outStr(filename) ;
write_graphviz(outStr, testGraph, OurVertexPropertyWriter<TGraph,IkGraph_VertexPropertyTag, IkGraph_VertexProperty>(testGraph)); 
```

...

```
template <class Graph, class VertexPropertyTag, class VertexProperty>
struct OurVertexPropertyWriter {

  OurVertexPropertyWriter(Graph &g_) : g(g_) {}

 template <class Vertex>
 void operator() (std::ostream &out, Vertex v) {

    VertexProperty p = get (VertexPropertyTag(), g, v);
      out << "[label=" << p.gaussians_.first << "]";

  }

 Graph &g;
}; 
```

这会产生一连串错误。

我真正想做的（不知道这是否可能）是能够概括这一点并传递存在哪些自定义属性/我想输出哪些自定义属性。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T10:32:17.980

我不会更正您的代码，因为我无法验证它是否会按预期工作。但是由于我遇到了同样的问题，我将发布我的代码的相关部分作为你和其他人的示例。我希望这可能会有所帮助。

**图的定义**

```
typedef boost::adjacency_list<boost::vecS, 
                              boost::vecS, 
                              boost::bidirectionalS, 
                              boost::no_property, 
                              EdgeProp, //this is the type of the edge properties
                              boost::no_property, 
                              boost::listS> Graph; 
```

**边属性**

```
struct EdgeProp
{
        char name;
        //...

}; 
```

**边缘的属性编写器**

```
template <class Name>
class myEdgeWriter {
public:
     myEdgeWriter(Name _name) : name(_name) {}
     template <class VertexOrEdge>
     void operator()(std::ostream& out, const VertexOrEdge& v) const {
            out << "[label=\"" << name[v].name << "\"]";
     }
private:
     Name name;
}; 
```

属性必须提前附加到边缘。 **例如**

```
EdgeProp p;
p.name = 'a';
g[edge_descriptor] = p; 
```

**调用boost以创建graphviz文件**

```
myEdgeWriter<Graph> w(g);
ofstream outf("net.gv");
boost::write_graphviz(outf,g,boost::default_writer(),w); 
```

对于顶点属性编写器，我们只使用默认编写器。

# c++ - Windows：DLL 中的元信息

> ID：10235930
> 
> 赞同：1
> 
> 时间：2012-04-19T20:07:15.630
> 
> 标签：c++, windows, dll, metadata

我需要在 Windows 上用 C++ 实现一个简约的类似 osgi 的模块化框架。与 Java 类似，我想将模块作为独立的单元，作为动态链接库。虽然 .jar 文件实际上是容器，但 .dll 文件实际上是一些已编译的代码块。因此，甚至可以将元数据存储在 .dll 文件中并在 C++ 程序中访问它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:19:17.240

最简单的方法是将元数据作为资源存储在 DLL 中。然后，您可以使用 Windows API 资源函数来提取元数据。您甚至不需要将 DLL 作为代码模块加载，只需将其加载为数据模块，然后提取元数据资源即可。

用于[`LoadLibrary`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175.aspx)加载库。然后您可以使用[`FindResource`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648042.aspx)和[`LoadResource`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648046.aspx)提取您的元数据。

# ravendb - 在 Map 函数中使用 SelectMany 时，RavenDB 索引不起作用

> ID：10235935
> 
> 赞同：2
> 
> 时间：2012-04-19T20:07:54.817
> 
> 标签：ravendb

根据 Ayende 的这篇[文章](http://www.google.de/url?sa=t&rct=j&q=ravendb%20full%20text%20search&source=web&cd=3&ved=0CD4QFjAC&url=http://ayende.com/blog/152833/orders-search-in-ravendb&ei=5muQT47jMpGfOsqDnYgE&usg=AFQjCNEAoIL8ceiNcS8SzHJjVq66nV791w)，我创建了以下索引定义

```
public class ProductsSearch : AbstractIndexCreationTask<Product, ProductsSearch.Result>
{
    public class Result
    {
        public string Query { get; set; }
    }

    public ProductsSearch()
    {
        Map = products => from product in products
                          select new
                          {
                              Query = new object[]
                              {
                                  product.Title,
                                  product.Tags.Select(tag => tag.Name),
                                  product.Tags.SelectMany(tag => tag.Aliases, (tag, alias) => alias.Name)
                              }
                          };

        Index(x => x.Query, FieldIndexing.Analyzed);
    }
} 
```

一个区别是我必须使用 SelectMany 语句来获取标签的别名。一个标签可以有很多别名（即标签：鼠标别名：指针设备）

我不知道为什么 SelectMany 行会破坏索引。如果我删除它，索引就会起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T21:15:09.160

这应该有效：

```
Map = products => from product in products
                  from tag in product.Tags
                  from alias in tag.Aliases
                      select new
                      {
                          Query = new object[]
                          {
                              product.Title,
                              tag.Name,
                              alias.Name
                          }
                      }; 
```

# iphone - 不要在 transitionWithView 中为属性设置动画

> ID：10235936
> 
> 赞同：0
> 
> 时间：2012-04-19T20:07:57.970
> 
> 标签：iphone, ios, uiviewanimation

我目前正在使用`UIView transitionWithView: duration: options: animations: completion:`和切换动画块内的图像来翻转 UIImageView。它正在切换的两个图像之一是横向，另一个是纵向，因此它还可以旋转和调整图像视图的大小，以便它们都填满屏幕。

我想不通的是如何为翻转设置动画，并在适当的时间旋转它，但不为旋转设置动画。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T22:11:00.217

您也可以尝试使用 setDisableActions:TRUE 将您不想在 CATransaction 开始/提交中动画化的更改。（在您的动画块内。）我不知道它是否有效，但值得一试。

# javascript - 如何使用部分文本表单输入来添加并使其转到 url？

> ID：10235940
> 
> 赞同：1
> 
> 时间：2012-04-19T20:08:04.970
> 
> 标签：javascript, forms, window.location

标题可能不清楚，但我会在这里解释一下。我是一个新手，我对 JS 几乎一无所知，所以请清楚。

我的主要代码在这里：

```
function goTo()
{
    var url = "http://myurl.com/";
    var name = document.forms[0].name.value;
    window.location = url+name;
    return false;
} 
```

该代码使用了一个设置的url和一个表单值，然后如果我按下发送按钮，它会跳转到预设的url+表单值。但我想要的是只获取输入的最后一部分，例如，这是我的输入：

```
http://lolsite.com/testing/files/HAfg76SDA 
```

而且我希望代码在“/”之后获得输入部分，所以成品将是“HAfg76SDA”。现在我想在我预设的网址末尾剪掉这个产品，所以当我按下提交按钮时，它会转到：

```
http://myurl.com/HAfg76SDA 
```

我想知道这是否可能，如果是，我会找到一个我可以立即使用的代码。顺便提一句。我试着用

```
function goTo()
{
    var url = "http://myurl.com/";
    var name = document.forms[0].name.value.(lastIndexOf("/")+1);
    window.location = url+name;
    return false;
} 
```

但它似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T20:15:22.830

```
function goTo()
{
    var url = "http://myurl.com/";
    var name = document.forms[0].name.value;
    window.location = url+name.substr(name.lastIndexOf('/')+1);
    return false;
} 
```

# php - 如何在具有相应图像的页面上显示所有类别？

> ID：10235952
> 
> 赞同：0
> 
> 时间：2012-04-19T20:08:47.797
> 
> 标签：php, html, css, wordpress

我正在尝试在带有缩略图的“产品”页面上显示产品自定义帖子中所有类别的列表。这样做的代码是什么，我可以使用类别描述作为缩略图的图像源吗？

我不确定我应该显示什么代码，但我有一个我正在尝试修改的 wordpress 主题。我需要一个显示“产品类别”的页面，该页面显示我标记的所有不同类别的产品。因此，我将“自行车”和“汽车”标记为“交通工具”，我需要使用代表链接到类别页面的交通工具的缩略图来显示交通工具。

# ruby-on-rails - 如何在 .js.haml 文件中构建 html？

> ID：10235954
> 
> 赞同：1
> 
> 时间：2012-04-19T20:09:05.877
> 
> 标签：ruby-on-rails, coffeescript, haml

我想知道如何在我的 ajax 调用中雄辩地返回以下调用？我可以在 append 函数内有断线等？

```
$(".q#{@question_id}.result_to_response")
.html("#{escape_javascript(@resp)}")
.append('<div><a href="#" class="continue_button">Continuez to next question</a></div>'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T20:29:02.450

我对你的建议就是使用[jQuery 模板](http://api.jquery.com/category/plugins/templates/)或类似的 smthng。这样，您可以轻松地使用 haml 生成所有模板，然后在 html 正文中附加 .tmpl() 返回值。

生成内联 javascript 是应用程序设计不佳的标志。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-19T20:19:23.433

Haml 并不真正适合生成 JavaScript。它实际上只适用于 HTML 和 XML（这非常好）。

此外，您根本不应该动态生成 JS/CoffeeScript 文件。你的 JS 文件应该是静态的（就像你的 Ruby 文件一样）。

此外，您`escape_javascript`在 HTML 中使用的事实让我怀疑您正在尝试生成内联 JavaScript。如果是这种情况，请不要这样做。JS 和 CoffeeScript 只属于静态外部文件。

如果您可以提供有关您的用例的更多信息，我将尝试提出具体建议。

# python - django 1.4 如何从客户端自动获取用户的时区

> ID：10235956
> 
> 赞同：15
> 
> 时间：2012-04-19T20:09:12.937
> 
> 标签：python, django, timezone

我想知道是否有办法从客户端自动检索用户的时区。特别是在登录期间。

我尝试在登录页面中添加它（使用`auth.login`）：

```
{% get_current_timezone as TIME_ZONE %} 
```

然后将其添加到登录表单中

```
<input type="hidden" name="next" value="/redirect/?tz={{ TIME_ZONE }}"> 
```

但`tz`始终是服务器的时区。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-07-17T09:21:04.223

我进一步简化了它，你可以在这里插入：[https](https://github.com/Miserlou/django-easy-timezones) ://github.com/Miserlou/django-easy-timezones 或 [http://gun.io/blog/django-easy-timezones/](http://gun.io/blog/django-easy-timezones/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-19T20:13:44.703

从[文档](https://docs.djangoproject.com/en/1.4/topics/i18n/timezones/)中：

> 选择当前时区
> 
> 当前时区相当于翻译的当前语言环境。但是，Django 无法使用 Accept-Language HTTP 标头来自动确定用户的时区。相反，Django 提供了时区选择功能。使用它们来构建对您有意义的时区选择逻辑。

[您可以尝试使用getTimezoneOffset](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/getTimezoneOffset)函数通过 javascript 设置时区 cookie，或者尝试做一些 geoip 魔术并按位置计算时区。可能最可靠的方法是直接询问用户并将此信息保存在用户配置文件/会话中。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-06-20T08:38:56.483

昨天我正在四处寻找相同的东西。最后，我最终根据 BluesRockAddict 的建议将 Django 应用程序放在一起（即使用 getTimezoneOffset）：

[https://github.com/adamcharnock/django-tz-detect](https://github.com/adamcharnock/django-tz-detect)

我希望有人觉得这很有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-08T13:12:31.217

django 有一个不错的 APP 可以激活时区[https://pypi.python.org/pypi/django-visitor-information-middleware/0.1.0](https://pypi.python.org/pypi/django-visitor-information-middleware/0.1.0)。其中有两个中间件

**时区中间件**

*中间件为经过身份验证的用户激活时区。*

**访客信息中间件**

*该中间件将以下键添加到 request.visitor 字典中：*

country - 访问者所在的国家/地区。

city - 访问者所在的城市

location.timezone - 位置访问者使用的时区基于

location.unit_system - 位置访问者使用的单位系统基于

user.timezone - 当前认证用户的时区

user.unit_system - 当前认证用户的单位系统。

cookie_notice - 如果应为当前访问者显示 cookie 同意通知，则为真。

```
Note: Location of the user is determined based on the user's IP address. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-20T09:14:02.810

我目前创建了一个中间件类（遵循 Django 的文档），我在其中依赖 MaxMind geoip 数据库（[http://dev.maxmind.com/geoip/legacy/geolite](http://dev.maxmind.com/geoip/legacy/geolite)）和 GeoDjango （[https://docs.djangoproject.com/en /1.5/ref/contrib/gis/](https://docs.djangoproject.com/en/1.5/ref/contrib/gis/)）检索用户的国家代码，然后使用 pytz 动态设置时区：

```
class TimezoneMiddleware(object):

    def __getUserTimeZone(self, request):
        info = IPResolver(request).getGeoInfo()
        return pytz.country_timezones[info['country_code']][0]

    def process_request(self, request):
        try:
            tz = self.__getUserTimeZone(request)
            timezone.activate(tz)
            logger.debug('Time zone "%s" activated' % str(tz))
        except Exception as e:
            logger.error('Unable to set timezone: %s' % str(e)) 
```

`pytz.country_timezones`返回给定国家/地区可用的时区集合，所以我基本上选择返回的第一个。

`IPResolver`是我写在上面的个人实用类`django.contrib.gis.utils.GeoIP`

# c# - 在 WinRT 上，Amazon REST 调用的 HMAC 签名不正确

> ID：10235959
> 
> 赞同：0
> 
> 时间：2012-04-19T20:09:37.407
> 
> 标签：c#, amazon, windows-8, microsoft-metro, windows-runtime

亚马逊有一些使用 HMAC 签署 REST 调用的[示例](http://docs.amazonwebservices.com/AWSECommerceService/2011-08-01/DG/rest-signature.html)。但是，在 Metro / WinRT 应用程序中使用以下代码时，签名不匹配。

HMAC的计算方法：

```
internal string CreateHMAC(
        string message,
        string algorithmName,
        string key)
    {
        MacAlgorithmProvider macAlgorithmProvider = MacAlgorithmProvider.OpenAlgorithm(algorithmName);
        var binaryMessage = CryptographicBuffer.ConvertStringToBinary(message, BinaryStringEncoding.Utf8);
        var binaryKeyMaterial = CryptographicBuffer.ConvertStringToBinary(key, BinaryStringEncoding.Utf8);
        var hmacKey = macAlgorithmProvider.CreateKey(binaryKeyMaterial);
        var binarySignedMessage = CryptographicEngine.Sign(hmacKey, binaryMessage);
        var signedMessage = CryptographicBuffer.EncodeToBase64String(binarySignedMessage);
        return signedMessage;
    } 
```

测试检查示例：

```
var hmac = this.Amazon.CreateHMAC("GET\nwebservices.amazon.com\n/onca/xml\nAWSAccessKeyId=AKIAIOSFODNN7EXAMPLE&ItemId=0679722769&Operation=ItemLookup&ResponseGroup=ItemAttributes%2COffers%2CImages%2CReviews&Service=AWSECommerceService&Timestamp=2009-01-01T12%3A00%3A00Z&Version=2009-01-06", "HMAC_SHA256", "1234567890");
var encoded = WebUtility.UrlEncode(hmac);
Assert.AreEqual("Nace%2BU3Az4OhN7tISqgs1vdLBHBEijWcBeCqL5xN9xg%3D", encoded); 
```

实际结果是：

```
M%2fy0%2bEAFFGaUAp4bWv%2fWEuXYah99pVsxvqtAuC8YN7I%3d 
```

有没有其他人在 WinRT 上成功创建了 HMAC？或者你能看到我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T07:36:42.873

亚马逊文档不正确/过时 - 使用[ecs.amazonaws.com](http://ecs.amazonaws.com)而不是[webservices.amazon.com](http://webservices.amazon.com)

所以签这个：

> GET\necs.amazonaws.com\n/onca/xml\nAWSAccessKeyId=AKIAIOSFODNN7EXAMPLE&ItemId=0679722769&Operation=ItemLookup&ResponseGroup=ItemAttributes%2COffers%2CImages%2CReviews&Service=AWSECommerceService&Timestamp=2009-01-01T12%3A00%3A00Z06&Version=2009-01-

对不起，这是一个非常快速的回复！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T01:20:53.390

amazon 中的键是 Base64 字符串，因此您需要将此字符串转换为 IBuffer 对象，但从已公开为 Base 64 字符串的二进制内容开始。您正在将普通字符串转换为二进制，但情况并非如此。尝试这个

```
var algorithmProvider = MacAlgorithmProvider.OpenAlgorithm(algorithmName);

var binaryKeyMaterial = CryptographicBuffer.DecodeFromBase64String(key);
var hmacKey = algorithmProvider.CreateKey(binaryKeyMaterial ); 
```

在这篇博客文章中，我写了关于[如何从 WinRT 创建签名的](http://blogs.msdn.com/b/juank/archive/2012/12/11/como-usar-mecanismos-firma-digital-windows-8-winrt.aspx)内容是西班牙语，但代码是通用的，您可以通过 bing 翻译器或其他一些工具对其进行翻译。

# qt - 将所有按钮、文本、检查按钮更改事件合并到一个插槽中

> ID：10235963
> 
> 赞同：1
> 
> 时间：2012-04-19T20:09:58.723
> 
> 标签：qt, qt4

有没有办法在不为每个小部件使用 connect() 函数的情况下将所有 gui 事件（如按钮单击、文本更改、复选框切换）捕获到同一个插槽中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T01:44:40.520

如果您的小部件是表单的一部分，并且您希望将更改提交到模型（或 SQL 数据库），则使用 a`QDataWidgetMapper`可能比您想要的更适合。

无论如何，除了`clicked`不可检查按钮的按钮信号之外，这些信号都被声明为属性的`NOTIFY`信号`USER`（在[`Q_PROPERTY`](http://qt-project.org/doc/qt-4.8/qobject.html#Q_PROPERTY)声明中）。

您可以使用 Qt 的元对象系统来连接列表中的所有小部件：

```
void connectChanged(QWidgetList list, QObject *target, const char *targetSlot) {
    foreach(QWidget *widget, list) {
        const QMetaObject * mo = widget->metaObject();
        QMetaProperty property = mo->userProperty();
        // Skip non user-editable widgets (QLabel, QGraphicsScene...)
        if(!property.isValid() || !property.hasNotifySignal()) {
            qDebug() << "Skipped" << mo->className();
            continue;
        }

        // Non checkable buttons have to be handled separately
        QAbstractButton *button = qobject_cast<QAbstractButton*>(widget);
        if (button && !button->isCheckable()) {
            QObject::connect(button, SIGNAL(clicked()), target, targetSlot);
        } else {
            // QMetaMethod notifySignal() returns the raw signal signature
            // for instance "toggled(bool)", we need the signature that would be
            // returned by the macro SIGNAL: "2toggled(bool)"
            QByteArray signalSignature;
            signalSignature.append(char('0' + QSIGNAL_CODE));
            signalSignature.append(property.notifySignal().signature());

            QObject::connect(widget, signalSignature, target, targetSlot);
        }
    }
}

// connect all child widgets to a slot:
connectChanged(this->findChildren<QWidget*>(), this, SLOT(dataChanged())); 
```

PS：这也会将 s 的`QScrollBar::valueChanged(int)`信号连接`QTextEdit`到您的插槽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T22:31:09.993

`QCoreApplication::notify`可能是你想要的。它的文档详细介绍了其他一些可能更好的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T13:00:11.437

看看这段[代码](http://cep.xor.aps.anl.gov/software/qt4-x11-4.2.2-browser/dd/d5d/qsignaldumper_8cpp-source.html)。它使用 Qt QObject 系统的未记录（私有）部分。据我所知，这在 Qt4 中没有更改或删除。但由于它是无证/私有部分，它可能会在未来的某些 Qt4 版本或 Qt5 中消失或更改。它会基本通知您发出的每个可能的信号，因此您可以进行一些自省并检查您收到的信号是否是您需要的。

# mysql - 如何在 MySQL 中获取用户交互的总时间差异

> ID：10235969
> 
> 赞同：0
> 
> 时间：2012-04-19T20:10:21.183
> 
> 标签：mysql

我有一个包含以下字段的 mysql 表：

`_id`, `userId`, `objectId`,`timeStamp`

我想计算所有用户与对象交互的总时间。

我创建了计算行与其后续行之间的时间差的查询，但这没有考虑给定用户的操作顺序。该查询如下所示：

```
SELECT A._id, A.USERID, A.objectid, A.timeStamp,
    SUBSTRING(A.timeStamp, 12, 2) as hourOfDay,
    TIME_TO_SEC(TIMEDIFF(B.timeStamp, A.timeStamp)) as diff 
FROM InteractionsTBL A 
INNER JOIN InteractionsTBL B ON B._id = (A._id + 1) and B.USERID = A.USERID 
where A.timeStamp > '2012-04-18 1:00:00'
and A.timeStamp < '2012-04-18 23:59:00' 
group by hourOfDay, A.objectid 
ORDER BY A._id ASC 
```

如何计算按一天中的时间和 objectId 分组的所有用户与对象交互的总时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T17:46:47.793

我最终写了一个珍珠脚本，在事后计算这个差异。我不确定这是否可以通过 SQL 实时实现。

# php - 如何将动态添加的文本框（JavaScript）中的多个数据保存到 MySQL 数据库中？

> ID：10235971
> 
> 赞同：2
> 
> 时间：2012-04-19T20:10:34.413
> 
> 标签：php, javascript, mysql, html

我一直在为此努力，但没有成功。我正在使用 PHP、HTML、JavaScript 和 MySQL。这是我的 HTML 代码：

```
<div id="Author">
    <LI>Author</LI> 
    <input type = "text" name="Author[]" value = "1\. "/>
    <input type="button" value="+" id="Authorbutton" onclick="addAuthor()" />
</div> 
```

如果单击添加按钮，将出现另一个文本框，用户输入另一个名称。这是我的 JavaScript：

```
var counter3 = 0;
function addAuthor() {
    // Get the main Div in which all the other divs will be added
    var mainContainer = document.getElementById('Author');

    // Create a new div for holding text and button input elements
    var newDiv = document.createElement('div');

    // Create a new text input
    var newText = document.createElement('input');
    newText.type = "text";
    //var i = 1;
    newText.name = "Author[]";
    newText.value = counter3 + 2 + ". ";

    //Counter starts from 2 since we already have one item
    //newText.class = "input.text";
    // Create a new button input
    var newDelButton = document.createElement('input');
    newDelButton.type = "button";
    newDelButton.value = "-";

    // Append new text input to the newDiv
    newDiv.appendChild(newText);
    // Append new button input to the newDiv
    newDiv.appendChild(newDelButton);
    // Append newDiv input to the mainContainer div
    mainContainer.appendChild(newDiv);
    counter3++;
    //i++;

    // Add a handler to button for deleting the newDiv from the mainContainer
    newDelButton.onclick = function() {
        mainContainer.removeChild(newDiv);
        counter3--;
    }
} 
```

这是我的PHP代码：

```
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db($database, $con);

$sql="INSERT INTO savetest (type, number)
VALUES
('$_POST[type]','$_POST[Author]')";

if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
echo "1 record added";

mysql_close($con);
echo "Thank you for submitting your details!"; 
```

我听说很多人可以通过使用数组来实现这一点，但我存储在数据库中的数据是`Array`. 我创建了多少个文本框并不重要，只需`Array`.

我使用正确的方法吗？我应该将这组数据保存在一个数据库字段中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T09:40:20.043

```
if (!$con){
   die('Could not connect: ' . mysql_error());
}

mysql_select_db($database, $con);

$authors = $_POST['Author'];
foreach($authors as $author) :
    $sql="INSERT INTO savetest (type, number) VALUES ('{$_POST['type']}','{$author}')";

    if (!mysql_query($sql,$con)){
       die('Error: ' . mysql_error());
    }
endforeach; 
```

# python - 修改与局部变量同名的全局变量

> ID：10235973
> 
> 赞同：22
> 
> 时间：2012-04-19T20:10:38.887
> 
> 标签：python, global-variables

假设我有一个全局变量`a`。在函数定义中，我们还有一个名为 的局部变量`a`。有没有办法将全局变量的值分配给局部变量的值？

```
a = 'foo'

def my_func(a = 'bar'):
    # how to set global a to value of the local a? 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-19T20:21:05.540

使用[内置函数`globals()`](http://docs.python.org/library/functions.html#globals)。

> **`globals()`**
> 
> *返回表示当前全局符号表的字典。这始终是当前模块的字典（在函数或方法中，这是定义它的模块，而不是调用它的模块）。*

```
a = 'foo'

def my_func(a = 'bar'):
    globals()['a'] = a 
```

顺便说一句，值得一提的是，全局只是模块范围内的“全局”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T20:23:03.383

```
>>> a = 'foo'
>>> def my_func(a='bar'):
...     return globals()['a']
...
>>> my_func()
'foo' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-19T20:25:29.503

不要一开始就混淆全局和本地命名空间。尽可能尝试使用局部变量而不是全局变量。如果您必须在作用域之间共享变量，您仍然可以传递变量而无需全局占位符。局部变量的引用也比全局变量更有效地访问。

几个链接：

[在 Python 中共享变量](http://effbot.org/pyfaq/how-do-i-share-global-variables-across-modules.htm)

[可变性能](http://wiki.python.org/moin/PythonSpeed/PerformanceTips#Local_Variables)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T20:13:04.410

让python知道你想要全局版本；

```
def my_func():
    global a
    a = 'bar' 
```

# magento - 优惠券代码出现但未包含在 Magento 网站的计算中

> ID：10235974
> 
> 赞同：0
> 
> 时间：2012-04-19T20:10:41.240
> 
> 标签：magento

![在此处输入图像描述](../Images/f9382bcae2abb0e8bfb782ad4ee22ce8.png)

这张图总结了。折扣代码正在被识别并出现在从查看购物车页面一直到出现在管理区域中的订单的所有总框中。但是它没有出现在计算中。

任何人都有任何线索可能导致这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T23:21:08.493

您的后端是否启用了 mage_tax 模块？

`System > Configuration > Advanced > Enable the Mage_Tax module`

如果是这样，并且您使用的是 Mage 1.4，请尝试此修复

1.  在您的 Magento 发行版中创建以下文件夹：`app/code/local/Mage/CatalogRule`/Model

2.  复制`app/code/core/Mage/CatalogRule/Model/Observer.php`到`app/code/local/Mage/CatalogRule/Model`

3.  打开新的/复制的文件并转到第 105 行。更改此代码：

从

```
if ($observer->hasCustomerGroupId()) {
    $gId = $observer->getEvent()->getCustomerGroupId();
} elseif ($product->hasCustomerGroupId()) {
    $gId = $product->hasCustomerGroupId();
} else {
    $gId = Mage::getSingleton('customer/session')->getCustomerGroupId();
} 
```

至

```
if ($observer->hasCustomerGroupId()) {
    $gId = $observer->getEvent()->getCustomerGroupId();
} elseif ($product->hasCustomerGroupId()) {
    $gId = $product->getCustomerGroupId();
} else {
    $gId = Mage::getSingleton('customer/session')->getCustomerGroupId();
} 
```

# php - 通过索引、增量向数组添加元素？

> ID：10235978
> 
> 赞同：0
> 
> 时间：2012-04-19T20:11:02.893
> 
> 标签：php, arrays, indexing

嘿，我只是偶然发现了一些东西，只要没有副作用，这将为我节省很多工作，也就是说你有这个文件

```
0
0
0 
```

而且您需要向其中添加数字，有点像计数，但您还想修改字符串中的特定字符，而不是添加它们....但是您想添加到末尾而不是修改任何不存在的字符指数...

因此，如果您采用上面的这些行之一，并在其上使用 str_split，然后尝试通过编号索引添加一些内容，它似乎不会感到困惑！

比如说我想修改该文件第 2 行的第 20 个索引。由于没有第 20 个索引，它只会自动将元素添加到数组的末尾。

我可以让这张幻灯片，还是让它这样做有风险？就像我不知道的副作用之类的......

伙计，如果我有任何问题需要关闭，因为他们不明白我在问什么......：P

对不起，但我想不出还能用什么词来形容它。

好的，这是一些代码

```
$change_str = str_split($array_change[$list_num]);
UltraDB($change_str, "Change String BEFORE");
$change_str[20] = '5';
$array_change[$list_num] = implode('', $change_str);
foreach($array_change as $v){
file_put_contents("file.txt", $v . "\n", FILE_APPEND);
}
UltraDB($array_change, "File is now."); 
```

UltraDB 只是我结合 var_dump 回显和换行符的调试功能

编辑：好的，只是想如何更好地表达我的问题：当由 str_split 制成的数组中不存在索引时，但您想添加该数组的某个索引，如果该索引尚不存在，是否正常因为它只是将您要添加的内容添加到结束索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T20:14:30.947

我没有正确理解它，但这里是您可以安全地编辑第 20 行的方法，而无需任何需要的值，只需通过行号：

```
$file = file('file.txt');
$file[19] = $file[19]++; // the index starts with so for line 20 we take index 19

// and saving it
file_put_contents('file.txt', implode(PHP_EOL, $file)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T22:25:08.497

以上内容令人困惑，但我认为这就是您要问的。未经测试所以是的......无论如何......

```
$d=' '; //delimiter

$x=20;  //how many lines in
$y=10;  //how many values out
$z=4;   //value to insert at X/Y

$file = file('file.txt');
$tmp = explode($d, $file[$x]);

if($file[$y]) {
    $file[$y]=$z;
} else {
    $file[]=$z;
}

foreach($file as &$line){
    $line = implode($d, $line);
}

file_put_contents('file.txt', implode(PHP_EOL, $file)); 
```

# java - 已经捕获异常，仍然报错

> ID：10235983
> 
> 赞同：0
> 
> 时间：2012-04-19T20:11:36.733
> 
> 标签：java, exception

我正在尝试设置我的 GUI 的外观和感觉。我已经捕获了 UnsupportedLookAndFeelException，但是当我编译时，我收到一个错误，指出必须捕获或声明要抛出 UnsupportedLookAndFeelException。错误在这一行： Ne r = new Ne();

这是代码：

```
public static void main(String[] args)  {

   try{
      UIManager man = new UIManager();
      man.setLookAndFeel("javax.swing.plaf.nimbus.NimbusLookAndFeel")  ;
   }
   catch(UnsupportedLookAndFeelException ex){}
   catch(Exception ex){}

   SwingUtilities.invokeLater(new Runnable() {
      public void run()  {
         Ne r = new Ne();
         r.setVisible(true);
      }
   });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T23:32:26.707

我建议阅读更多关于 try catch 语句的内容：

[http://docs.oracle.com/javase/tutorial/essential/exceptions/](http://docs.oracle.com/javase/tutorial/essential/exceptions/)

总而言之，似乎并非所有可以引发异常的代码都被 try.catch 块包围

如果 Ne r = new Ne()... 出现错误，请将其移至 try catch 语句。

```
public static void main(String[] args)  {

   try{
      UIManager man = new UIManager();
      man.setLookAndFeel("javax.swing.plaf.nimbus.NimbusLookAndFeel")  ;
      SwingUtilities.invokeLater(new Runnable() {
         public void run()  {
            Ne r = new Ne();
            r.setVisible(true);
         }
      });
   }
   catch(UnsupportedLookAndFeelException ex){}
   catch(Exception ex){}
} 
```

如果您使用 IDE（例如 eclipse），它有一些内置的错误修复方法，这些方法将围绕您需要的代码，这是弄清楚需要在 try catch 块中设置什么的良好开端

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:25:47.010

我看不出您的代码将如何捕获 new Ne() 引发的 UnsupportedLookAndFeelException。为什么不把 try-catch 放在正确的水平上呢？IE：

```
public void run()
{
    try
    {
        Ne r = new Ne();
        r.setVisible(true);

    } catch (UnsupportedLookAndFeelException e)
    {
       // Put some code here to do the right thing.
    }
 } 
```

# mysql - 具有主/从写入/读取配置的 Django get_or_create

> ID：10235986
> 
> 赞同：2
> 
> 时间：2012-04-19T20:11:44.557
> 
> 标签：mysql, django, database-replication

我有一个使用复制服务器的 django 应用程序，并配置为使用主服务器作为只写，从服务器作为只读。但是当我开始监控我的数据库负载时，我发现主服务器有很多读取流量，经过一番调查，我发现了这一点：

```
def get_or_create(self, **kwargs):
    # Update kwargs with the related object that this
    # ForeignRelatedObjectsDescriptor knows about.
    kwargs.update({rel_field.name: instance})
    db = router.db_for_write(rel_model, instance=instance)
    return super(RelatedManager, self.db_manager(db)).get_or_create(**kwargs)
get_or_create.alters_data = True 
```

因此，从该代码中，我认为它使用写入数据库进行 get_or_create 所需的读取和写入操作，而不是使用从属读取和主控按预期“创建”，有人遇到过这个问题吗？除了重写 get_or_create 函数之外，还有其他方法可以解决它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T20:33:18.030

`get_or_create`在主从之间拆分是非常糟糕的主意。这将导致竞争条件。您将获得重复项或数据库抛出重复键错误。

问题是复制延迟。使用标准的 MySQL 主从设置，复制是异步的。这意味着[**最终**的一致性](http://en.wikipedia.org/wiki/Eventual_consistency)，slave 将拥有 master 所做的一切，但有一个滞后。这种滞后通常非常低，但它始终存在。

# c++ - 将向量滑过向量的算法

> ID：10235988
> 
> 赞同：1
> 
> 时间：2012-04-19T20:12:00.667
> 
> 标签：c++, algorithm, vector, matrix

我一直在问有关矩阵的问题，并将它们分成块-但这显然不起作用，所以我采取了另一条路线。

假设在这个例子中我有一个 4x4 的矩阵（向量）：

M1 =

```
 0 1 0 1
    1 1 1 0
    0 0 0 1
    0 1 1 1 
```

M2 =

```
 0 1
   1 0 
```

现在，我需要确定 M1 中的哪个块最适合 M2 中的块。所以基本上，在一个大矩阵中识别一个小矩阵。

我需要帮助的算法基本上是在矩阵 1 上滑动小矩阵，直到发现它最适合或匹配。（我正在使用相关性/相似性度量）

我一直认为它需要一次滑动一个像素/值。但是，显然我不想检查每个值的相关性。

这是将矩阵 1（在当前位置）与矩阵 2 进行比较的函数：

这是比较矩阵的函数：

```
 bool compareMatrix(vector<double> &theMatrix1, vector<double> &theMatrix2, int 
   startRow, int startCol)
   {
      cout << theMatrix1[startRow*4+startCol]; // This prints out the particular block
   } 
```

现在我在想的是制作一个临时向量，它存储 matrix1 的值（在当前位置），然后将 matrix1 的值（在当前位置）推入临时向量，然后传递这个临时向量到相关函数，然后将返回一个值。

我的问题是：如何将“theMatrix1[startRow*4+startCol]”的内容推送到临时向量？

例如（这行不通）：

```
vector<double> temp(2*2, 0);
temp.push_back(theMatrix1[startRow*4+startCol]);

double corr = correlation(temp, matrix2, 4, 4); 
return corr; 
```

我希望我已经解释得够多了（注意：这与以前的帖子不同）。

希望有人能帮忙，

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T04:22:58.623

将一个对象扫描到另一个对象的一种方法是反转一个对象 (h'(x, y) = h(-x, -y)。然后使用卷积定理 - 参见[http://en.wikipedia.org /wiki/Convolution_theorem](http://en.wikipedia.org/wiki/Convolution_theorem)并查看[http://www-structmed.cimr.cam.ac.uk/Course/Convolution/convolution.html](http://www-structmed.cimr.cam.ac.uk/Course/Convolution/convolution.html)了解在二维中起作用的东西。关于卷积定理的要点是，做 FFT 只是n log n，因此对于某些参数，它要快得多。

这在信号处理中被广泛使用的事实也向我表明，如果你真的需要相关性，你不会找到比这更快的捷径。如果您对某些时候缺少的东西感到满意，也许您可​​以做一些事情，例如在两个矩阵中查找特征，找到特征匹配，然后检查这些匹配建议的对齐方式。

# c - 是否可以更改虚拟内存页面大小？

> ID：10235990
> 
> 赞同：6
> 
> 时间：2012-04-19T20:12:01.977
> 
> 标签：c, linux, x86-64

是否可以更改虚拟内存页面大小？我问这个是因为在[维基百科上 MMU 文章的 X86_64 部分中](http://en.wikipedia.org/wiki/Memory_management_unit#x86-64)，它谈到了不同的页面大小。如果页面大小确实可以改变，它是如何改变的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T20:58:09.303

[在 x86_64 上，您可以借助hugetlbfs](http://lwn.net/Articles/375096/)显式请求 2 MiB 页面，而不是通常的 4 KiB 页面。在具有透明大页面支持的现代内核上，小页面可以在后台自动连接到大页面，因为内存碎片不是很大并且仍然有足够的内存可用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T20:49:16.327

据我所知，没有操作系统允许应用程序请求页面大小。x86_64 分页系统提供了混合不同大小页面的能力，但这通常仅在一次分配大量内存时使用。

在 x86_64（和 x86）上，虚拟地址通过一系列页表映射到物理地址。每个表为物理虚拟地址提供一定数量的位。x86_64 目前每个映射最多可以使用 4 个表，每个表提供 9 个虚拟地址位，低 12 位指定页内的偏移量。前3个表每个指向下一个表的物理地址，最后一个指向实际页的物理地址。

```
| PML4T entry |-+
                V
  +-| PDPT entry |
  V
 | PDT entry |-+
               V
     | PT entry |-> Physical address (4kB page) 
```

但是，第二个和第三个表条目也包含一个位，如果设置该位，则表示没有其他表，并且该条目提供物理地址。发生这种情况时，将由其他表提供的位被移动到物理页面偏移量中，对于每个被删除的表，页面大小乘以 512。

```
| PML4T entry |-+
                V
  +-| PDPT entry |
  V
 | PDT entry (PS=1) | -> Physical address (2MB page) 
```

通过更改用于映射到给定虚拟地址的表的数量，操作系统可以创建 4kB（4 个表）、2MB（3 个表）或 1GB（2 个表）的页面。由于在每个表条目中都提供了该位，因此可以混合不同的页面大小，例如，一个 2MB 的页面可以跟一个 4kB 的页面。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T20:33:42.840

以下是有关此主题的一些有趣链接...

[http://linuxgazette.net/155/krishnakumar.html](http://linuxgazette.net/155/krishnakumar.html)

[http://unixfoo.blogspot.com/2007/10/hugepages.html](http://unixfoo.blogspot.com/2007/10/hugepages.html)

[http://forums.opensuse.org/english/get-technical-help-here/install-boot-login/437078-chang-pagesize-kernel.html](http://forums.opensuse.org/english/get-technical-help-here/install-boot-login/437078-changing-pagesize-kernel.html)

[http://forums.opensuse.org/english/get-technical-help-here/install-boot-login/437078-chang-pagesize-kernel.html](http://forums.opensuse.org/english/get-technical-help-here/install-boot-login/437078-changing-pagesize-kernel.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-19T20:50:22.190

是和不是。

页面大小是固定的。但是虚拟内存区域的大小不是（在 x86 架构上）。当您创建一个大小不等于页面大小的虚拟内存区域时，它被称为段。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-19T20:14:21.077

Windows： http: [//windows.microsoft.com/en-US/windows-vista/Change-the-size-of-virtual-memory](http://windows.microsoft.com/en-US/windows-vista/Change-the-size-of-virtual-memory)

Linux：

在 /usr/src/linux/include/asm-generic/page.h 中，您可以找到以下几行：

/* PAGE_SHIFT 确定页面大小 */

定义 PAGE_SHIFT 12

下面的文章在评论部分进行了解释。

[http://www.cyberciti.biz/faq/linux-check-the-size-of-pagesize/](http://www.cyberciti.biz/faq/linux-check-the-size-of-pagesize/)

/proc/sys/vm/swappiness 参数，它改变了换出运行时内存之间的平衡，而不是从系统页面缓存中删除页面。

# javascript - jQuery：从数组中设置复选框值

> ID：10235992
> 
> 赞同：0
> 
> 时间：2012-04-19T20:12:16.347
> 
> 标签：javascript, jquery

我正在编写一个脚本，用于根据存储在数组中的值设置复选框（允许用户将表单恢复为其初始值的较大脚本的一部分）。代码基本上是这样的：

```
$("#myForm :checkbox[name='myName[]']").each(function(){
    if($.inArray($(this).val(),initValues)!=-1){
        $(this).prop("checked",true);
    } else {
        $(this).prop("checked",false);
    }
}); 
```

initValues 包含最初选中的框的值属性。

该脚本检查第一个元素，`$("#myForm :checkbox[name='myName[]']")`但后续元素似乎都未选中。Firebug 显示该`checked`属性正在更改，但该框本身未选中。

我已经尝试了非常多的排列来`attr()`代替`prop()`所有结果，并且脚本在 OS X 上的 Firefox 11.0 和 Chrome 18.0 中的行为方式相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:55:39.470

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var initValues = ['eee', 'mec', 'csc'];

            $('#btnResetCheckBox').click(function () {
                $('#myForm').find(':checkbox[name^="myName"]').each(function () {
                    $(this).prop("checked", ($.inArray($(this).val(), initValues) != -1));
                });

                //Or 

                //                $('#myForm').find(':checkbox[name^="myName"]').prop('checked', false);
                //                $.each(initValues, function (i, val) {
                //                    $('#myForm').find(':checkbox[name^="myName"][value="' + val + '"]').prop("checked", true);
                //                });
            });

            $('#btnResetCheckBox').trigger('click');
        });
    </script>
</head>
<body>
    <form id="myForm" action="">
    <div>
        <input type="checkbox" name="myName[1]" value="eee" />eee<br />
        <input type="checkbox" name="myName[2]" value="ece" />ese<br />
        <input type="checkbox" name="myName[3]" value="it" />it<br />
        <input type="checkbox" name="myName[4]" value="csc" />csc<br />
        <input type="checkbox" name="myName[5]" value="mec" />mec<br />
    </div>
    <input type="button" id="btnResetCheckBox" value="Reset Check Box" />
    </form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-11-21T20:37:07.540

还有另一种方法。如果您为每个复选框提供相同的类，您实际上可以将一个数组传递给该类的 .val 。

```
jQuery(".nameInput").val(initValues); 
```

它简单、优雅且有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T12:07:08.087

如果未设置为字符串，则 html 属性可能会混乱。

我建议更换：

```
$(this).prop("checked",true); 
```

经过

```
$(this).prop("checked","checked"); 
```

* * *

或者

```
$(this).prop("checked",false); 
```

经过

```
$(this).prop("checked",""); 
```

# ios - 架构 armv7 的未定义符号，ld：未找到架构 armv7 的符号 - 怎么办？

> ID：10235993
> 
> 赞同：7
> 
> 时间：2012-04-19T20:12:16.910
> 
> 标签：ios, cocoa-touch

我已经阅读了很多关于 SO 的帖子，但没有一个建议的解决方案对我有用。我希望对解释错误有更多了解的人可以提供帮助。

我的应用程序一直运行良好（现在仍然运行良好），但是在使用某个类“iCarousel”时遇到了问题，该类是 Cover Flow 的实现。

有趣的是：当打开 iCarousel 的示例项目时，它在我的 iPhone 上运行良好。我的应用程序（在一个单独的项目中）也运行良好。它们都使用`armv6 armv7` 架构并在 iOS 5.1 上运行。

然后我将该类复制到我自己的项目中并添加所有必要的框架。还没有错误。但是当我构建并运行时，我得到一个错误：

```
Ld /Users/Sooper/Library/Developer/Xcode/DerivedData/TestApp-
ejfsezvwxyxhqpanwwrcmsbkslxi/Build/Intermediates/TestApp.build/Debug-
iphoneos/TestApp.build/Objects-normal/armv7/TestApp normal armv7

    cd "/Users/Sooper/Developer/TestApp v1.0"
    setenv IPHONEOS_DEPLOYMENT_TARGET 5.0
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:
    /Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"

/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch armv7 -isysroot 

/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk
 -L/Users/Sooper/Library/Developer/Xcode/DerivedData/TestApp-ejfsezvwxyxhqpanwwrcmsbkslxi/Build/Products/
Debug-iphoneos -F/Users/Sooper/Library/Developer/Xcode/DerivedData/TestApp-ejfsezvwxyxhqpanwwrcmsbkslxi/Build/Products/
Debug-iphoneos -filelist /Users/Sooper/Library/Developer/Xcode/DerivedData/TestApp-ejfsezvwxyxhqpanwwrcmsbkslxi/Build/Intermediates/TestApp.build/
Debug-iphoneos/TestApp.build/Objects-normal/armv7/TestApp.LinkFileList -dead_strip -miphoneos-
version-min=5.0 -lz -framework QuartzCore -framework CoreGraphics -framework 
SystemConfiguration -lxml2.2.7.3 -framework Security -framework CoreMedia -framework Accounts 
-framework CoreFoundation -framework AudioToolbox -framework AVFoundation -framework Twitter -
framework MediaPlayer -framework UIKit -framework Foundation -o 
/Users/Sooper/Library/Developer/Xcode/DerivedData/TestApp-
ejfsezvwxyxhqpanwwrcmsbkslxi/Build/Intermediates/TestApp.build/Debug-
iphoneos/TestApp.build/Objects-normal/armv7/TestApp 
```

在此之下：

```
Undefined symbols for architecture armv7:
  "_OBJC_CLASS_$_ArtworkScrollerViewController", referenced from:
      objc-class-ref in TestAppViewController.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

如果我删除类的实例，错误就会消失并且应用程序会运行。我完全糊涂了。为什么它会单独工作而不是在另一个项目中工作？

将不胜感激一些指导。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-19T20:20:29.287

确保将 ArtworkScrollerViewController.m 添加到您正在构建的目标中

# java - 在 Java 中实现地图

> ID：10235996
> 
> 赞同：1
> 
> 时间：2012-04-19T20:12:33.773
> 
> 标签：java, variable-assignment

我目前正在处理一项让我在 Java 中创建 Map 类的任务，并且在使用我似乎无法修复的“put”方法时遇到了错误。本质上，当测试运行时，地图中的新节点不会被创建，我似乎无法弄清楚为什么。先感谢您！

班级：

```
public class MyMap<K extends Comparable<K>, V> {
private class MapNode {
    private K key;
    private V value;
    private MapNode left;
    private MapNode right;

    public MapNode(K theKey, V theValue) {
        key = theKey;
        value = theValue;
        left = null;
        right = null;
    }
}

private MapNode root;

public MyMap() {
    root = null;
}

/**
 * Associates key to value and stores mapping If key exists, replaces value
 * with a new value
 * 
 * @param key
 * @param value
 * @return value replaced; null if no value
 */

public V put(K key, V value) {
    return put(key, value, root);
}

private V put(K key, V value, MapNode ref) {
    V temp;
    if (ref == null) {
        ref = new MapNode(key, value);
        return null;
    } else {
        if (ref.key.compareTo(key) == 0) {
            temp = ref.value;
            ref.value = value;
            return temp;
        } else if (key.compareTo(ref.key) < 0)
            return put(key, value, ref.left);
        else
            return put(key, value, ref.right);
    }
}

/**
 * Return value to which key is mapped
 * 
 * @param key
 * @return value of key; null
 */

public V get(K key) {
    return get(key, root);
}

private V get(K key, MapNode ref) {
    if (ref == null) {
        return null;
    } else {
        if (ref.key.compareTo(key) == 0)
            return ref.value;
        else if (key.compareTo(ref.key) < 0)
            return get(key, ref.left);
        else if (key.compareTo(ref.key) > 0)
            return get(key, ref.right);
        else
            return null;
    }
}

/**
 * Returns true if Map already uses the key
 * 
 * @param key
 * @return true; false
 */

public boolean containsKey(K key) {
    return containsKey(key, root);
}

private boolean containsKey(K key, MapNode ref) {
    if (ref == null) {
        return false;
    } else {
        if (ref.key.compareTo(key) == 0)
            return true;
        else if (key.compareTo(ref.key) < 0)
            return containsKey(key, ref.left);
        else if (key.compareTo(ref.key) > 0)
            return containsKey(key, ref.right);
        else
            return false;
    }
}
} 
```

测试：

```
import org.junit.Test;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertFalse;
import static org.junit.Assert.assertTrue;

public class MyMapTest {
@Test
public void testMyMap(){
    MyMap<String, Integer> m = new MyMap<String, Integer>();

    assertFalse(m.containsKey("one"));
    assertEquals(null, m.get("one"));
    assertEquals(null, m.put("one", 1));
    assertTrue(m.containsKey("one"));
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T20:17:34.480

在您的`put(K key, V value, MapNode ref)`方法中，您分配一个新的 MapNode 以`ref`包含您要添加的节点。

我看到您通过传递来调用该方法`root`。这存储了与存储在**中****相同的引用。`root``ref`**这意味着，如果`root`它们不为空，它们将指向同一个对象。但是，按原样`root`，`null`它们都指向`null`。

分配时`ref = new MapNode(key, value);`，您指向`ref`新节点，但`root`仍指向 null。

您需要指向`root`新的 MapNode，指向`ref`它不会为您做这件事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T20:17:50.343

您遇到的问题是您不会在任何地方更改根目录，因此您的 Map 不会有任何内容。您是按值传递，而不是按引用传递，因此当您这样做时会`ref = new MapNode()`更改您的局部变量，而不是调用者的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T20:18:04.463

您的问题是您忘记了 Java 不是按引用传递的事实——它按值传递引用。当你说 时`ref = new MapNode(...)`，你实际上并没有改变任何东西。您需要明确地使父节点指向新创建的节点。