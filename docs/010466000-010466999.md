# StackOverflow 问答 10466000-10466999

# jqgrid - jqGrid 添加行不起作用

> ID：10466004
> 
> 赞同：1
> 
> 时间：2012-05-05T21:08:58.287
> 
> 标签：jqgrid

获取、编辑和删除都可以正常工作。但是 add 不会调用我的 ActionResult 方法。我正在使用显示新记录值的模式表单的内联添加。似乎很少有例子说明这如何与最新 jqGrid 版本中提供的寻呼机/表单方法一起工作。我在这里添加/插入缺少什么？

html:

```
 $("#grid").jqGrid({
                url: 'ABC.Admin/CourseAdmin/GetLocationData/',
                datatype: 'json',
                jsonReader: { repeatitems: false },
                mtype: 'GET',
                colNames: ['Location Id', 'Name', 'Address Line 1'],
                colModel: [
              { name: 'LocationId', index: 'LocationId', width: 40, key: true },
              { name: 'LocationName', index: 'LocationName', width: 150, editable: true },
              { name: 'AddressLine1', index: 'AddressLine1', width: 150, editable: true },
              ],
                pager: jQuery('#pager'),
                rowNum: 20,
                sortname: 'Name',
                sortorder: "asc",
                viewrecords: true,
                caption: '***Testing***',
                height: 200,
                loadonce: true, // needs to be true for client side paging to work
                autowidth: true,
                loadtext: 'Loading...'
            })
            $("#grid").jqGrid('navGrid', '#pager', { edit: true, add: true, del: true },
            { // edit options 
                url: 'ABC.Admin/CourseAdmin/SaveLocation/',
                closeAfterEdit: true
            },
            { // add
                url: 'ABC.Admin/CourseAdmin/Create/'
            },
            { //delete
                url: 'ABC.Admin/CourseAdmin/DeleteLocation/',
                closeOnEscape: true
            }
        ); 
```

控制器：

~~public ActionResult Create(int id, string locationName, string addressLine1)~~

```
[HttpPost]
public ActionResult CreateLocation(string oper, string id, string locationName, string addressLine1)        {
            //Models.LocationProvider lp = new Models.LocationProvider();
            //bool saved = lp.InsertLocation(location);
            bool saved = false;
            if (!saved)
            {
                Response.StatusCode = 500;
                return Content("Record not saved!");
            }
            else
            {
                return Json(false);
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T21:48:59.923

我搞定了。Create 方法 sig 中的参数类型不匹配。它们必须是所有字符串。将我的控制器更改为以下作品。我还注意到*id*和*oper*参数是按名称而不是顺序提取的 - 所以我可以将它们放在签名中的第一个或最后一个（或任何位置），它们会得到正确的值 - 太棒了！我将使用此更正编辑我的原始帖子。

```
 public ActionResult Create(string oper, string id, string locationName, string addressLine1) 
```

对于其他正在寻找 jqGrid 添加/插入示例的人，我希望这个对您有所帮助。

# javascript - 如何使用预定义的属性设置 cookie

> ID：10466006
> 
> 赞同：0
> 
> 时间：2012-05-05T21:09:08.690
> 
> 标签：javascript

我是 JavaScript 新手，所以我有一个简单的问题，我想使用带有 name=username、value=id 和 expiry date=30days 的 JavaScript 设置 cookie。我尝试了一些示例，但是当我通过浏览器检查 cookie 时，它​​显示名称：未定义内容：未定义过期：在会话结束时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T21:14:28.567

如果您在 jquery 世界中，您可能想查看[jquery cookie 插件](https://github.com/carhartl/jquery-cookie)- 您可以在其中说：

$.cookie('the_cookie', 'the_value', { expires: 7, path: '/' });

并且设置参数相对轻松。

使用 cookie 时，记住您设置查询的域和路径很重要。从将查询设置为 path: '/' 和 domain: 'yourdomain.com' 开始可能是安全的（以便它适用于所有子域）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T21:14:33.383

试试这样：

```
var now = new Date();
var expire = new Date(now.getTime() + (30 * 24 * 60 * 60 * 1000));
document.cookie = 'username=id' + ';expires=' + expire.toGMTString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T21:12:06.163

一个例子是：

```
function setCookie(name, value, expires, path, domain, secure) {
    document.cookie = name + "=" + escape(value) +
        ((expires) ? "; expires=" + expires : "") +
        ((path) ? "; path=" + path : "") +
        ((domain) ? "; domain=" + domain : "") +
        ((secure) ? "; secure" : "");
}

var expires = new Date(new Date().getTime()+30*24*60*60*1000).toGMTString();
setCookie("username", "id", expires); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T22:14:49.507

确保您使用的是根域以确保 cookie 可跨子域访问（例如：domain.com 而不是 www.domain.com）。

您是否收到所有浏览器的相同结果，或者这只是 Internet Explorer 问题？

我经常使用这两个功能而没有问题：

```
function n__readCookie(n__name)
{
    var n__nameEQ = n__name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++)
    {
        var c = ca[i];

        while (c.charAt(0)==' ') 
        {  c = c.substring(1,c.length);  }

        if (c.indexOf(n__nameEQ) == 0) 
        {  return c.substring(n__nameEQ.length,c.length);  }
    }
    return false;
}

function n__createCookie(n__name, n__value, n__days, n__domain)
{
    if (n__days)
    {
        var n__date = new Date();
        n__date.setTime(n__date.getTime()+(n__days*24*60*60*1000));
        var n__expires = "; expires="+n__date.toGMTString();
    }
    else
    {
        var n__expires = "";
    }
    document.cookie = n__name+"="+n__value+n__expires+"; path=/;domain=" + n__domain;
} 
```

# ruby-on-rails - 如何在 ruby on rails 中创建新用户时自动向现有表中添加一行？

> ID：10466008
> 
> 赞同：0
> 
> 时间：2012-05-05T21:09:26.960
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1, ruby-on-rails-3.2

我想`photo_albums`在我的数据库中的表中添加一行，其中包含用户 ID`current_user`和专辑标题 "Posts Album" `before_create`。

*   用户有很多相册
*   相册属于用户

`before_create :build_profile`我使用在我的配置文件表中为用户个人信息构建一个空行来实现类似的功能。此代码在我的用户模型中。

我想在我的`photo_albums`桌子上实现类似的东西。在创建用户时，在`photo_albums`表中创建一个相册，该相册将存储所有与微博相关的图像。在创建用户时，我只需要一行`album title = "post album"`和他们的用户 ID。

### 模型片段

```
class User < ActiveRecord::Base
  has_one  :profile, :autosave => true
  has_many :photo_albums
  has_many :microposts

  before_create :build_profile 
```

### 控制器的`create`动作

```
def create
  @user = User.new(params[:user])   
  respond_to do |format|
    if @user.save 
      login @user
      UserMailer.join_confirmation(@user).deliver
      format.js { render :js => "window.location = '#{root_path}'" } 
    else
      format.js { render :form_errors }
    end
  end
end 
```

我怎样才能做到这一点？请注意，用户有很多相册，所以我无法使用`build_photo_album`. 我已经阅读了指南中的一些信息，但仍然无法弄清楚。将不胜感激一个解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T22:50:43.690

我没有更好的解决方案，然后像这样创建一个自定义回调：

**更新**（你甚至不需要`user_id => self.id`在`PhotoAlbum.create`参数中定义，它会自动设置）

```
after_create :build_default_photo_album

def build_default_photo_album
  self.photo_albums << PhotoAlbum.create(:title => "post album")
end 
```

# z3 - 支持列表理论

> ID：10466012
> 
> 赞同：2
> 
> 时间：2012-05-05T21:09:31.673
> 
> 标签：z3

我很好奇Z3是否有内置列表排序？从 C API 看来确实如此，但我有兴趣以 SMTLIB / SMTLIB-2 格式输入而不是使用 C API，所以我想知道 Z3 是否提供任何此类支持。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T21:50:39.297

是的，Z3 有一个内置的列表排序。引用[Z3 指南，递归数据类型部分](http://rise4fun.com/Z3/tutorial/guide)：

> List 递归数据类型是 Z3 内置的。空列表为 nil，构造函数 insert 用于构建新列表。访问器的头部和尾部像往常一样定义。

这是该部分的一个示范性示例：[http](http://rise4fun.com/Z3/qXj9) ://rise4fun.com/Z3/qXj9 。

# c++ - 如何让 eclipse 运行当前的开源文件？

> ID：10466013
> 
> 赞同：5
> 
> 时间：2012-05-05T21:09:36.787
> 
> 标签：c++, eclipse

问这个问题我感到很尴尬，但我花了最后半个小时试图弄清楚如何在 eclipse 中运行特定的源文件，但没有运气。

我创建了一个 c++ 项目，然后创建了一个源文件夹和一个 c++ 源文件。该文件工作正常，但是当我将第二个文件添加到文件夹中时，它似乎没有运行。我知道这一点，因为正在输出第一个源文件中的“hello world”。奇怪的是，如果我的第二个文件中有错误，那么我会收到错误，但是在我更正它们之后，我仍然只能得到第一个文件的输出。

是否可以运行当前在 eclipse 中打开的源文件（有点像它在 Java 中的作用）？我的目标是为我工作的 C++ 书籍的每个练习创建一个新的源文件，并让它们彼此独立运行，而不必为每个练习创建新项目。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T15:20:38.430

我刚刚使用 Eclipse 为 lynda.com（此处的信息：http: [//cpp.bw.org/](http://cpp.bw.org/)）创建了一个在线 C++ 课程，因为它是跨平台的，人们可以在许多不同平台上进行练习。这是我解决这个问题的方法：

首先了解 Eclipse CDT 是如何工作的——一个项目中的所有文件都被编译并链接在一起。`main()`这意味着您在整个项目中只能有一个。所以将一堆练习文件放在一个项目中是行不通的。这是一个简单的解决方案：

创建一个新项目，然后选择 General -> Project 作为项目类型。在该通用项目中，链接到包含所有练习文件的目录。（右键单击项目，选择新建->文件夹，在对话框中按高级，选择“链接到备用位置”。）如果目录有子目录，那很好——它工作得很好。这将作为您易于访问的存储库，并且不会被编译。

现在创建另一个项目并选择 C++ 项目作为项目类型（我称之为“工作”）。现在，对于每节课，将您将使用的文件（或多个文件）从常规项目复制到工作项目中。做你的练习，玩文件，等等。你仍然有原始文件，因为你正在处理副本，所以随意犯很多错误。

完成每个练习后，只需从 Working 中删除文件并从 Project 菜单中运行 Clean（此步骤在使用 MingW 的 Windows 上尤其重要），然后将下一组练习文件复制到 Working。

我发现这个工作流程非常适合这个目的。

//账单

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T22:51:41.997

您可能需要为每个练习创建一个新项目，或者查看运行配置设置并指定要运行的文件。单击绿色运行按钮旁边的小下拉箭头以创建或编辑运行配置

# java - 映射 Servlet 参数

> ID：10466015
> 
> 赞同：1
> 
> 时间：2012-05-05T21:09:48.490
> 
> 标签：java, servlets, web, mapping

所以我正在尝试建立一个像这样工作的简单网站。

**通常：** www.XYZ.com/hello?id=912（在这种情况下，输入的参数是 id，即 912） 在这种情况下，“hello”类扩展了 HTTPServlet

**首选方式：** www.XYZ.com/hello/912（在此附加在正斜杠之后的网址本身中）

我会在这里做什么？而不是扩展另一个 HTTPServlett

感谢您的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T21:14:38.063

将您的 servlet 映射到 /hello 并解析 HttpServletRequest.getPathInfo() 的结果

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T21:18:54.847

你应该看看 Spring MVC。它为控制器提供了 @RequestMapping 注释，这使得这非常容易完成。并且它允许您干净地分离应用程序的不同层（数据层、控件层和表示层），而不会大惊小怪。

这是一个很好的介绍：[http](http://www.mkyong.com/spring3/spring-3-mvc-hello-world-example/) ://www.mkyong.com/spring3/spring-3-mvc-hello-world-example/更具体地说是[http://www.mkyong.com/spring-mvc/spring-3-休息你好世界示例/](http://www.mkyong.com/spring-mvc/spring-3-rest-hello-world-example/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T21:14:27.317

我希望我不是在这里用大炮射击苍蝇，但是，您是否考虑过使用像[restlet](http://www.restlet.org/)这样的框架，以便您可以更灵活地将 URL 关联到方法？

# php - 添加到仅给定位置的值和子键的多维数组

> ID：10466021
> 
> 赞同：1
> 
> 时间：2012-05-05T21:10:03.997
> 
> 标签：php, multidimensional-array

```
Array
(    [Fixed Assets] => Array
    (
        [0] => 150
        [1] => Array
            (
                [Equimpent] => Array
                    (
                        [0] => Office Computer
                        [1] => Office Printer
                    )
            )
        [2] => Array
            (
                [Furniture and Fixtures] => Array
                    (
                        [0] => Desk
                        [1] => Desk Chair
                    )
            )
    )
) 
```

作为分层帐户命名和编号模式，Account Numbers 可以从上面的示例数组中派生出来，如下所示...

*   **固定资产**（*父帐户*）# **150**
*   **设备**（*固定资产的子项*）# **150-1**
*   **家具和固定装置**（*固定资产的子项*）# **150-2**
*   **桌椅**（*家具和固定装置的孩子*）# **150-2-1**

我的难题是如何仅在给定所需的新帐户名称及其目标父帐户的派生帐号的情况下将新帐户添加到数组中。

例如...

```
<?php  
//Chart of Accounts
$coa = array('Fixed Asset'=>array(150,array('Equimpent'=>array('computer','printer')),array('Furniture and Fixtures'=>array('desk','chair'))));
//global $coa;
$new_account ="Office File Cabinet";//from ajax post
$target_base_no ="150-2";//from ajax post
//won't know if or how many subkeys will may be included 
//but would result in something like...

$coa['unknown_parent_of_acct_no_150'][2][] = $new_account;
?> 
```

我完全被封锁了...相反，我想我可能会问...我如何确定帐户# 150-2 的帐户名称？这是上下文中的 COA 数组。

```
Array
(
[Cash Bank] => Array
    (
        [0] => 100
        [1] => Checking
        [2] => Paypal
        [3] => Petty Cash
        [4] => Savings
        [5] => Deposits Pending
    )

[Accounts Receivable] => Array
    (
        [0] => 110
        [1] => AR-AlternaMart
    )

[Inventory] => Array
    (
        [0] => 120
    )

[Other Current Assets] => Array
    (
        [0] => 130
        [1] => Pre-Paid Hosting
    )

[Fixed Assets] => Array
    (
        [0] => 150
        [1] => Array
            (
                [Equipment] => Array
                    (
                        [0] => Computer
                        [1] => Printer
                    )

            )

        [2] => Array
            (
                [Furniture And Fixtures] => Array
                    (
                        [0] => Desk
                        [1] => Desk Chair
                    )

            )

    )

[Accumulated Depreciation] => Array
    (
        [0] => 160
        [1] => AD-Computer
        [2] => AD-Printer
        [3] => AD-Desk
        [4] => AD-Desk Chair
    )

[Accounts Payable] => Array
    (
        [0] => 200
        [1] => AP-Unearned Shipping
    )

[Credit Cards Payable] => Array
    (
        [0] => 210
        [1] => Wells Fargo Visa
    )

[Sales Tax Payable] => Array
    (
        [0] => 220
        [1] => CO
        [2] => 80227
        [3] => 80214
        [4] => IL
    )

[Accrued Payroll Taxes] => Array
    (
        [0] => 230
    )

[Other Current Liabilities] => Array
    (
        [0] => 240
    )

[Loans Payable] => Array
    (
        [0] => 270
    )

[Notes Payable] => Array
    (
        [0] => 280
    )

[Capital] => Array
    (
        [0] => 300
    )

[Drawing] => Array
    (
        [0] => 320
    )

[Sales] => Array
    (
        [0] => 400
    )

[Other Income] => Array
    (
        [0] => 401
        [1] => Shipping
    )

[Commissions] => Array
    (
        [0] => 402
        [1] => AlternaMart Commissions
    )

[Sales Discounts] => Array
    (
        [0] => 450
    )

[Sales Returns and Allowances] => Array
    (
        [0] => 451
    )

[Shipping Discounts] => Array
    (
        [0] => 452
    )

[Reimbursed Shipping] => Array
    (
        [0] => 453
    )

[Cost of Goods Sold] => Array
    (
        [0] => 500
        [1] => COGS Shipping
    )

[Expense] => Array
    (
        [0] => 600
        [1] => BSC Checking
        [2] => Paypal Transaction Fees
        [3] => Alternamart Transaction Fees
        [4] => Commissions Expense
        [5] => Interest Expense
        [6] => Internet Service
        [7] => Web Hosting
        [8] => Rent Expense
        [9] => Telephone
        [10] => Utilities
        [11] => Postage
        [12] => Office Supplies
        [13] => Miscellaneous Supplies
        [14] => Advertising
        [15] => Salaries And Wages
        [16] => Payroll Taxes
        [17] => Dues And Subscriptions
        [18] => Miscellaneous Expenses
        [19] => Legal And Accounting
        [20] => Insurance
        [21] => Vehicles Expense
        [22] => Depreciation Expense
        [23] => Travel And Entertainment
        [24] => Bad Debt Expense
        [25] => Ask Accountant
    )

[Ask Accountant] => Array
    (
        [0] => 900
    ) 
```

)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T21:37:09.527

如果我猜对了：...

拆分`$target_base_no`方式 -`$arr = explode('-', $target_base_no)` 在你的`$coa`数组中搜索 value = 150 ($arr[0])，像这样：

```
 foreach($coa as $row) {
       if ($arr[0] == $row[.....]
    } 
```

使用第二个拆分值 ($arr[1]) 来确定插入的位置。

编辑：您应该创建一个反向索引数组以直接访问正确的值。我们将数字值保存为键，将文本值保存为值（可用作`$coa`数组的索引：

```
$index = array();
foreach($coa as $key => $value) {
     $index[$value[0]] = $key;
} 
```

之后您只需访问您的数据`$coa[$index[$arr[0]]]`（您应该检查该字段是否存在）

# c# - 如何在 C# 中引发静态事件线程安全？

> ID：10466022
> 
> 赞同：1
> 
> 时间：2012-05-05T21:10:09.877
> 
> 标签：c#, multithreading, events

我可以提出一个安全的静态事件线程吗？（我不完全确定这甚至意味着什么。）整个事情是音频应用程序的一部分，所以我（至少）有音频处理线程和 UI 线程。

RaisePrintEvent 从处理音频和其他消息的非托管 C 代码中调用。引发事件的调用可以从音频处理线程和 UI 线程发生。

```
public static event ProcessPrint Print = delegate {};

private static void RaisePrintEvent(string e)
{
    Print(e);
} 
```

我如何确保事件调用是同步的？或者可能只是在主线程中调用..

**编辑**：在这里阅读[一个聪明的解决方案](https://stackoverflow.com/questions/10467318/can-you-think-of-an-event-pattern-with-synchronization-context-in-net)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T21:17:28.210

您必须确保 UI 操作都在主/UI 线程上执行。

最好的方法是将消息从音频线程排队到某种形式的队列中，然后从主 UI 线程（`Forms.Timer`例如事件）中取出并显示它。

`Invoke()`不会让你走得太远，因为你在音频处理中的时间会被打破。如果你尝试它，并且你正在用你的 GUI 做一些事情，你可能会在音频中抽搐，因为 Invoke()-ing 其他线程上的某些东西会阻塞，直到其他线程处理用于执行 Invoke 的窗口消息'在引擎盖下'。

如果您不了解上述部分或全部内容，请尝试使用队列来接收消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T21:17:29.710

您需要将处理程序复制到局部变量，以避免在您调用它时另一个线程取消订阅事件时出现竞争条件（有关详细信息，请参见[此处](http://blogs.msdn.com/b/ericlippert/archive/2009/04/29/events-and-races.aspx)）：

```
private static void RaisePrintEvent(string e)
{
    var handler = Print;
    if (handler != null)
    {
        handler(e);
    }
} 
```

如果您希望事件一次仅由一个线程引发，只需将调用锁定：

```
private static readonly object _printLock = new object();
private static void RaisePrintEvent(string e)
{
    lock(_printLock)
    {
        var handler = Print;
        if (handler != null)
        {
            handler(e);
        }
    }
} 
```

# python - 有哪些 Kivy 教程可用

> ID：10466023
> 
> 赞同：40
> 
> 时间：2012-05-05T21:10:27.427
> 
> 标签：python, kivy

有哪些 Kivy 教程和学习辅助工具？Kivy 的列表在哪里？

这是除了他们网站上的乒乓教程吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-07T13:11:37.797

正如其他人所建议的那样，kivy_installation 目录中的[示例](https://github.com/kivy/kivy/tree/master/examples)可以帮助程序员了解如何使用 kivy 完成基本任务。

还有这个[片段 wiki](http://wiki.kivy.org/)，我们鼓励人们将片段放在[用户片段](http://wiki.kivy.org/User%20Snippets)部分。

您还可以查看[编程指南中](http://kivy.org/docs/guide-index.html)[的第一个小部件](http://kivy.org/docs/guide/firstwidget.html)部分

我想我们需要更好地解释这一点。有一个新[的开始](http://kivy.org/docs/gettingstarted/index.html#doc-introduction)努力，旨在帮助介绍文档的不同部分，否则对新手来说不太明显，欢迎提出建议。[您可以在github](http://github.com/kivy/kivy/issues)上打开一个 issue 以获取文档，我们还将在文档中添加一个建议部分。

# ios - 子类化 UIImage

> ID：10466026
> 
> 赞同：2
> 
> 时间：2012-05-05T21:10:50.530
> 
> 标签：ios, uiimageview, uiimage

我想创建我自己的子类，`UIImage`这将允许我创建一个可实现/可拉伸的图像，在四个边的每一边都有帽子。

iOS 5`resizableImage`不适合我的需要，因为它不允许我拉伸中间部分，现在也不推荐使用`stretchableImage`，因为它只允许我重复一个像素，而我可能想要重复某种渐变。

到目前为止一切正常，我实现了自己的绘图代码`-drawInRect:`，它的行为符合预期。
但是，当将我的自定义子类实例分配为`UIImageView`的图像时，我的代码会中断。图像被渲染为正常的 UIImage 会。（在所有方向上缩放，没有任何上限）

我尝试在所有四种绘图方法（`drawInRect`, `drawAtPoint`，都是独立的加上 with`blendMode:`但它们似乎没有被调用。

在没有子类化的情况下`UIImage`使用它时，有没有办法提供自定义绘图代码？`UIImageView``UIImageView`

另外，我担心性能。默认的可拉伸图像在动画期间效果很好，但我想知道在为我的`UIImageView`. 我的渲染代码会在每一帧都被调用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T05:19:14.323

在[Apple 文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIImageView_Class/Reference/Reference.html)中，它明确表示您不能覆盖`-drawRect:`a `UIImageView`，因此子类化`UIImageView`也不起作用。你必须实现你自己的`UIView`类。

子类`UIImage`化也不起作用，我已经尝试过了，根本没有调用公共方法，甚至没有调用`CGImage`. 我认为您需要覆盖一些私有 API 才能使其工作。

不要担心调整大小，您的渲染代码只会在最后一帧被调用。尽管如此，在大多数情况下，性能还是比使用`UIImageView`. Apple 优化了该类，使其在 GPU 上运行。

# asp.net-mvc-3 - 将 Web.Config 文档上传到我的主机后，如何在 ASP.NET MVC 3 中为简单的 Web 应用程序配置 Web.Config 文档

> ID：10466030
> 
> 赞同：1
> 
> 时间：2012-05-05T21:11:11.210
> 
> 标签：asp.net-mvc-3

我在 ASP.NET MVC 3 中构建了一个默认 Web 应用程序，并将其上传到我的主机。

一切正常，但是当我尝试登录或使用默认数据库“ASPNETDB.MDF”执行操作时，我收到以下错误：

```
Sorry, an error occurred while processing your request. 
```

主机支持 SQL Server 2008，这是由 visualstudio 2010 SP1（ASP.NET MVC 3，Framework 4.0）在 Web.Config 文档中创建的默认连接字符串：

```
<add name="ApplicationServices"
     connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true"
     providerName="System.Data.SqlClient" /> 
```

我将不胜感激任何帮助。

谢谢你

# android - 有没有办法将 ContentProvider 的 uri 直接加载到 queryBuilder 中？

> ID：10466035
> 
> 赞同：0
> 
> 时间：2012-05-05T21:12:06.583
> 
> 标签：android, android-contentprovider, android-source

在构建 a 的大多数情况下，`ContentBuilder`您必须在清单中注册它并提供它，`authority`以便它知道在您调用时在哪里查找 db `query()`。

我们有一个奇怪的案例。我们正在修改 android 源代码，并希望操作系统本身能够与应用程序的数据库进行通信。所以我们构建了一个`ContentProvider` *供操作系统*使用的。现在唯一的问题是`ContentProvider`由于操作系统中没有清单，因此无处可注册。

我们有没有办法`query()`简单地将它传递给`uri`它，`querybuilder`所以它知道在哪里寻找数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:06:58.610

我认为您可以创建自己的数据库，在其中可以将所有 URI 存储到内容提供者。或者，也许我不明白你的问题。

# c - 幻灯片算法

> ID：10466036
> 
> 赞同：1
> 
> 时间：2012-05-05T21:12:15.947
> 
> 标签：c, arrays, scroll, slide

我正在寻找算法滚动号例如；

我有一个包含数字 1、2、3、4 的数组。我想让我的新数组 4,1,2,3。

有谁知道如何做到这一点？

但不仅仅是 D[4]；可以是 1,2,3,4,5,6,7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T21:16:02.883

使用模运算可能是最优雅的方法。例如，您可以这样做：

```
int a[size];
int b[size];

for (int n=0; n<size; n++) 
  b[(n+1)%size] = a[n]; 
```

如果您需要将元素移动多个位置，您可以更改`b[(n+1)%size]`to`b[(n+2)%size]`等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T21:26:16.947

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

/* Assumed slide is >= 0 and < arr_len. */
void slide_arr(int * arr, int arr_len, int slide)
{
  int i;
  /* If you are using C99, variable length array would be useful. */
  int * tmp_arr = malloc(arr_len * sizeof(int));
  memcpy(tmp_arr, arr, arr_len * sizeof(int));

  for(i = 0; i < arr_len; i++) {
    arr[i] = tmp_arr[(slide + i) % arr_len];
  }

  free(tmp_arr);
}

int main(void)
{
  int i;
  int arr[] = {1, 2, 3, 4, 5};
  slide_arr(arr, _countof(arr), 2);

  for(i = 0; i < _countof(arr); i++) {
    printf("%d, ", arr[i]);
  }

  return EXIT_SUCCESS;
} 
```

给定数组`{1, 2, 3, 4, 5}`, as 1 将给出：`slide_arr()``slide`

```
{5, 1, 2, 3, 4} 
```

对于`slide`2，它将给出：

```
{4, 5, 1, 2, 3} 
```

我是用 VC++ 写的。如果您使用 GCC 进行编译，请`ARRAY_SIZE`使用`_countof`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T21:31:10.553

就地版本：

```
#include <stdio.h>

void swap(int* a, int* b){
int temp = *a;
*a = *b;
*b = temp;
}

int main(){
int i;
int size = 4;
int arr[4] = {1,2,3,4};
for(i = 0; i < size; i++){
  printf("%d, ", arr[i]);
}
printf("\n");
for( i = size-1; i > 0; i-- ){
  swap(&arr[i],&arr[i-1]);
}
for(i = 0; i < size; i++){
  printf("%d, ", arr[i]);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T21:32:09.673

对于足够小的列表，您可以将列表加倍在一个大数组中，并让指针遍历大数组。我不确切知道如何在 C 中做到这一点，但希望一个 C++ 示例能够理解这一点。

```
int x[] = { 1, 2, 3, 4, 1, 2, 3 }; 
```

然后，您可以让第二个指针向上移动数组，如下所示：

```
int* noshift = x;
int* oneshift = x + 1;
int* twoshift = x + 2;
int* threeshift = x + 3; 
```

在本例中，第四次移位与不移位相同。这将占用更多的内存。对于`n`元素数组，这将占用数组中的元素`2*n-1`，但时间与内存以及所有这些爵士乐。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T05:23:42.127

```
#include <stdio.h>
int main(){
 int i;
 int len = 5;
 int arr = {1,2,3,4,5};

 int last = arr[len-1]; // Last element of the array example(5)

 for(i = len - 1; i > 0 ; i--)
   arr[i] = arr[i-1];

 arr[0] = last;

 retrurn 0;
} 
```

# php - PHP会话变量未正确传递

> ID：10466040
> 
> 赞同：1
> 
> 时间：2012-05-05T21:12:59.910
> 
> 标签：php, session, scope

我无法理解这个逻辑：

我正在使用 JavaScript 检测浏览器宽度，并使用以下代码将该值作为会话变量传递给 PHP。

```
<?php
    session_start()
    if (empty($_SESSION['layoutType'])) {
        echo '<script type="text/javascript"> var session=false; var layoutType;</script>';
    } else {
        echo '<script type="text/javascript"> var session=true; var layoutType=' . $_SESSION['layoutType'] . ';</script>';
    }
    if (!empty($_SESSION['layoutType'])) {
        $layoutType = $_SESSION['layoutType'];
        if ( $layoutType <= 219 ) {
            $layout = 'mobile';
        } else if ($layoutType >= 220 && $layoutType <= 1024 ) {
            $layout = 'tablet';
        } else {
            $layout = 'desktop';
        }
    }
    echo $layout; 
```

这会根据浏览器宽度正确显示值`mobile`或`tablet`或。`desktop`但是当我尝试使用相同的变量并将以下代码粘贴到上述代码下方时，它会更改 的值`$layout`：

```
 function getFevicons(){
        if ( $layout = 'mobile' ); {
            echo '
            <link rel="apple-touch-icon" href="cdn/images/apple-touch-icon.png">
            <link rel="apple-touch-icon" sizes="72x72" href="cdn/images/apple-touch-icon-72.png">
            <link rel="apple-touch-icon" sizes="114x114" href="cdn/images/apple-touch-icon-114.png">
            ';
        }
        echo $layout;
    }
?> 
```

即使布局是针对桌面的，它现在也给出了输出，`mobile`并且它也呼应了上面的[favicon](http://en.wikipedia.org/wiki/Favicon)链接。为什么？

难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T21:15:18.957

像这样调用你的函数（`getFevicons($layout);`）：

```
function getFevicons($layout){
    switch ($layout) {
        case 'mobile':
            echo '<link rel="apple-touch-icon" href="cdn/images/apple-touch-icon.png"><link rel="apple-touch-icon" sizes="72x72" href="cdn/images/apple-touch-icon-72.png"><link rel="apple-touch-icon" sizes="114x114" href="cdn/images/apple-touch-icon-114.png">';
            break;

        case 'desktop':
            echo 'whatever';
            break;

        case 'tablet':
            echo 'whatever';
            break;

        default:
            // This will absolutely do nothing
    }
    echo $layout;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T21:20:25.177

因为您的函数引入了一个新的[变量范围](http://php.net/manual/en/language.variables.scope.php)。函数外的变量在函数内是不可见的。您必须[将它们作为参数传递](http://php.net/manual/en/functions.arguments.php)：

```
function getFevicons($layout){
    ...
    echo $layout;
} 
```

并将您的函数称为：

```
getFevicons($layout); 
```

* * *

您也可以使用[`global`](http://php.net/manual/en/language.variables.scope.php#language.variables.scope.global)关键字，但这通常被认为是不好的做法，因为它会导致代码库更难维护并且依赖关系不明确。

```
function getFevicons(){
    global $layout;
    ...
    echo $layout;
} 
```

# c# - 如何从 Entity Framework 4.3 代码优先模型生成 DDL 脚本？

> ID：10466041
> 
> 赞同：4
> 
> 时间：2012-05-05T21:13:03.387
> 
> 标签：c#, .net, entity-framework, ef-code-first, entity-framework-4.3

我有一个正在尝试部署的项目，并且正在使用便宜的主机开始。作为托管包的一部分，我有一个 SQL Server 数据库，但我没有删除或创建权限，我只能使用他们为我创建的数据库。既然如此，我想获得 DDL，以便我可以手动运行它。

我知道我可以从 SQL Management Studio 为数据库创建脚本编写脚本，这最终可能会正常工作，但我想尽可能地自动化这个过程，所以如果我可以获得 Entity Framework 创建的脚本，那将是理想的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T01:06:15.267

您可以使用[Entity Framework Power Tools](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)。

我还为此编写了一个小型开源工具[EFScripter](https://github.com/diegose/EFScripter)。

它有两个参数：连接字符串（它可以像`"Integrated Security=SSPI"`你有一个本地 SQL Server 实例一样简单），以及包含 DbContext 的 dll。

它将脚本写入标准输出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T21:19:31.633

您可以使用生成脚本

```
Update-Database -Script 
```

（来自包管理器控制台）

[您可以在本演练](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx)中找到更多详细信息，其中还描述了您可能需要的一些附加选项。

# iphone - 在 UITableView 中显示多种行类型

> ID：10466042
> 
> 赞同：0
> 
> 时间：2012-05-05T21:13:08.003
> 
> 标签：iphone, ios, xcode, uitableview, rows

我一直在尝试创建一个显示多行的 UITableView（现在更具体的是 2 行），问题是，我需要从 XIB 文件中加载这 2 个自定义单元格。我已经创建了两个 UITableViewCell，但是当尝试让它工作时，应用程序会崩溃（SIGARBRT），我只能认为这是下面代码中的错误：

```
- (UITableViewCell *)tableView:(UITableView *)atableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    static NSString *CellIdentifier1 = @"ACell";
    ACell *cell1 = (ACell *)[userSettingsTableView dequeueReusableCellWithIdentifier:CellIdentifier1];

    static NSString *CellIdentifier2 = @"BCe;;";
    BCell *cell2 = (BCell *)[userSettingsTableView dequeueReusableCellWithIdentifier:CellIdentifier2];

    if([indexPath row] == 0) return cell1;
    if([indexPath row] == 1) return cell2;
    return nil;

    return cell1;
} 
```

错误信息：

```
2012-05-05 18:21:49.256 StrangeThings[4388:f803] *** Assertion failure in -[UITableView _createPreparedCellForGlobalRow:withIndexPath:], /SourceCache/UIKit_Sim/UIKit-1914.84/UITableView.m:6061
2012-05-05 18:21:49.258 StrangeThings[4388:f803] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'UITableView dataSource must return a cell from tableView:cellForRowAtIndexPath:'
*** First throw call stack:
(0x13cf022 0x1560cd6 0x1377a48 0x9b02cb 0xb3d28 0xb43ce 0x9fcbd 0xae6f1 0x57d42 0x13d0e42 0x1d87679 0x1d91579 0x1d164f7 0x1d183f6 0x1da5160 0x29f30 0x13a399e 0x133a640 0x13064c6 0x1305d84 0x1305c9b 0x12b87d8 0x12b888a 0x19626 0x1af2 0x1a65 0x1)
terminate called throwing an exception(lldb) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T21:46:51.370

首先是更改您的单元格标识符，不要将其命名为您的类，在开始时使用带有小写字母的 like、cellA、cellB 并避免使用特殊字符。

其次是您没有为任何单元格分配内存，如果队列中没有单元格表视图将重用，那么它将不会返回任何单元格，请使用：

```
- (UITableViewCell *)tableView:(UITableView *)atableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    static NSString *CellIdentifier1 = @"cellA";
    ACell *cell1 = (ACell *)[userSettingsTableView dequeueReusableCellWithIdentifier:CellIdentifier1];
if (cell1== nil) cell1 = [ACell alloc] init.........// your ACell class initlizer
    static NSString *CellIdentifier2 = @"cellB";
    BCell *cell2 = (BCell *)[userSettingsTableView dequeueReusableCellWithIdentifier:CellIdentifier2];
if(cell2== nil) cell2 = [BCell alloc] init.........// BCell initializer
    if([indexPath row] == 0) return cell1;
    if([indexPath row] == 1) return cell2;
    return nil;

    return cell1;
} 
```

# jquery - simplemodal 自动弹出窗口出现一次

> ID：10466043
> 
> 赞同：0
> 
> 时间：2012-05-05T21:13:10.747
> 
> 标签：jquery, simplemodal, modalpopupextender, setcookie

我有这个脚本有一个弹出窗口出现在页面中 5 秒。但是，每次用户进入该页面时，我怎样才能阻止它弹出，因为它很烦人。

```
jQuery(function($) {
    // Load dialog on page load
    setTimeout(function() {
        $('#basic-modal-content').modal({
            position: ["22%"]
        });

        // Load dialog on click
        $('.salesSlider .basic').click(function(e) {
            var content = '#' + this.id + '-content';
            $(content).modal();

            return false;
        });
    }, 5000);
});​ 
```

有人可以指出我正确的方向。

# css - 为什么这个 CSS 过渡在 OPERA 中运行不流畅，为什么它在结束时很慢（所有浏览器）？

> ID：10466044
> 
> 赞同：1
> 
> 时间：2012-05-05T21:13:11.133
> 
> 标签：css, css-transitions

我有这个小提琴[http://jsfiddle.net/WbbdQ/17/](http://jsfiddle.net/WbbdQ/17/)在 OPERA 中运行，并且不像 CHROME/SAFARI 那样运行流畅。

另一个问题，为什么在过渡结束时（在所有浏览器中）它会降低速度？请注意，他花费的时间不超过规定的时间（10 秒），他只是开始缓慢，变得更快，然后在结束时再次减速。

我在 1920 像素的显示器上运行，您将测试是否可以尽可能水平地增加结果选项卡。

在 OPERA 中这种行为正常吗？结束/开始的减速也正常吗？

**关于我的歌剧：**

版本：11.62；建造：1347；平台：Win32；系统：Windows 7；

Opera/9.80 (Windows NT 6.1; WOW64; U; en) Presto/2.10.229 版本/11.62

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T21:23:40.120

> 结束/开始的减速也正常吗？

是的，这很正常，您可以在[CSS 过渡规范](http://www.w3.org/TR/2012/WD-css3-transitions-20120403/#transition-timing-function-property)中阅读。`transition-timing-function`默认为（这`ease`意味着慢开始和慢结束）。如果您将其设置为`linear`（这意味着从开始到结束正常），它不会在开始/结束时减速。

* * *

我不知道第二个问题的答案。我认为唯一的问题是持续时间很长（`10s`）的事实。过渡太慢了，不能完美地工作，它可能会扼杀 Opera，你会得到一个缓慢的过渡。

# asp.net-mvc-3 - MVC 3 - 简化路由：我该怎么做？单个 MapRoute 中的多个 URL 匹配

> ID：10466050
> 
> 赞同：0
> 
> 时间：2012-05-05T21:14:37.160
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4

在我的 Global.asax.cs 路由中，我有一堆这样的路由条目：

```
 routes.MapRoute(
           name: "About",
           url: "about",
           defaults: new { controller = "Home", action = "About" }
       );

        routes.MapRoute(
           name: "Buy",
           url: "buy",
           defaults: new { controller = "Home", action = "Buy"}
       );

        routes.MapRoute(
           name: "Blog",
           url: "blog",
           defaults: new { controller = "Home", action = "Blog"}
       ); 
```

依此类推——我可以拥有 facebook、twitter 等，这样当人们访问 [http://www.mywebsite.com/blog](http://www.mywebsite.com/blog)或 /twitter 或 /facebook 等时，我会将它们重定向到实际链接。

我是否遗漏了一些明显的东西，或者是否有更简单的方法将所有这些组合在一个条目中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T21:16:20.953

这是路由参数的用途：

```
routes.MapRoute("Default", "{action}", new { controller = "home" }); 
```

当然，这将捕获任何单个单词的 URL，然后在主控制器中不存在该操作时发出抱怨。您可以在此之前映射其他路线，它们将优先。

# php - 数据库设计 - 借出系统 - 客户借出多个项目

> ID：10466057
> 
> 赞同：3
> 
> 时间：2012-05-05T21:15:45.850
> 
> 标签：php, sql, database

我正在实施一个贷款系统，并想找出用于贷款记录的最有效/数据库标准结构技术。让我从基础开始：

我有两张桌子：

**Customer_Record** (id, f_name, l_name, p_number)

**Loaner_Pool** (id, model, serial_n, status)

这个想法是，借用池由一系列设备组成，例如：鼠标/键盘/笔记本电脑/电池/相机/等。状态表示项目是否已预订。**我想知道的是如何设计将保存客户个人贷款的贷款记录表。我有两个这样做的想法**：

# 理念一

有一个记录条目，其中有一个名为“gear_list”的列，该列将保存客户预订的所有齿轮的 ID，用“，”之类的符号分隔，例如：

**表**：贷款（id、customer_id、gear_list、日期、状态）

**示例贷款**：

贷款[102, 30001, "23, 34, 949, 293", 时间戳, "out"]

有了这个想法，我一直保持我的进入低。但是，我必须每次在 PHP 中处理“gear_list”列，以便分离借出的齿轮的 id 值，然后执行单独的 SELECT 获取数据。

# 想法 2

将客户想要借出的每件商品作为单独的条目放在表中。该表看起来与想法 1 相同，但“gear_list”只会为每个借出的项目保存一个 id。

**表**：贷款（id、customer_id、loan_pool_id、日期、状态）

**贷款示例**：贷款[102, 30001, "23", timestamp, "out"]

贷款[102, 30001, "34", 时间戳, "out"]

贷款[102, 30001, "949", 时间戳, "out"]

贷款[102, 30001, "293", 时间戳, "out"]

对于这个想法，在处理了许多贷款后，记录的数量将增加很多。列“gear_list”变为“loan_pool_id”，因为它只包含一个 id。好处是能够在“loan_pool”中只有一个 id 以便于操作/报告。

有没有更好的方法来处理这种情况？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T21:23:29.323

您的第二个选择是关系数据库系统的正确选择。

您正在确定数据库需要存储的关键实体，然后使用正确的属性设计它们。

第一种方法是在单个字段中存储多个内容，这通常表明设计不佳。

# c++ - SendInput 不适用于保持键 C++

> ID：10466062
> 
> 赞同：4
> 
> 时间：2012-05-05T21:16:12.253
> 
> 标签：c++, simulator, keydown, sendinput

我有这段代码使用 SendInput 发送按键，但是当我想长按一个键时它不起作用（例如，长按'a'会在记事本中返回'aaaaaaaa'）。

现在我已经查看了整个谷歌，我能看到解决这个问题的唯一方法是如果我想要长时间保持发送输入。我不想这样做，因为这只会模拟'a'被一遍又一遍地按下。

```
keyboard.wVk = 0;
keyboard.wScan = MapVirtualKey(key, 0);

keyboard.dwFlags = KEYEVENTF_SCANCODE;

if (index_vector_no)
    pressed[index_vector_no] = true;

keyboard.dwExtraInfo = 0;

input.type = INPUT_KEYBOARD;
input.ki = keyboard;

SendInput(1, &input, sizeof (input)); 
```

所以我想回答以下问题：

A）我是否认为使用 SendInput 无法解决这个问题，为什么它不能长时间保持？

B) 什么是能够成功发送按键向下和按键向上信号的替代方法。最好将密钥发送到 Windows 而不仅仅是特定的应用程序。

C）是否有一个很好的轻量级 C++ 库我可以使用来处理全局键盘和鼠标模拟？

提前致谢！=)

编辑：看看这篇文章了解我的问题的更多细节：[http ://www.experts-exchange.com/Programming/Languages/Visual_Basic/Q_20833788.html](http://www.experts-exchange.com/Programming/Languages/Visual_Basic/Q_20833788.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T22:43:17.393

重复击键是键盘控制器的功能，而不是 Windows 或 SendInput 的功能。您当然可以使用计时器来模拟它，重复调用 SendInput()。

# mysql - 根据数据库中的数据检查复选框

> ID：10466071
> 
> 赞同：0
> 
> 时间：2012-05-05T21:17:31.837
> 
> 标签：mysql, vb.net, winforms

我想`CheckListBox`根据从数据库返回的字段的值是否与`CheckListBox`.

这是我做的循环：

```
 While (myReader.Read())
            For I = 0 To clbMyBox.Items.Count - 1
                If clbMyBox.Items(I).ToString = myReader.GetString(0) Then
                    clbMyBox.SetItemChecked(I, True)
                End If
            Next
        End While 
```

不幸的是，这只检查所有复选框。我知道其余的工作，并且`myReader.GetString(0)`确实返回了我想要的数据。

# android - 是否可以随机设置 Android NFC 设备 ID？

> ID：10466072
> 
> 赞同：1
> 
> 时间：2012-05-05T21:18:16.360
> 
> 标签：android, nfc

我对使用 NFC 进行匿名交易很感兴趣，但一个必要的属性是不能链接单独的交易。我注意到 NFC 协议涉及设备标识符，*可以*在每次交易中随机选择，但在大多数情况下是唯一且稳定的。

Android 中是否有任何方法可以指定或匿名化设备的 NFC 标识符？我无法通过查看 Android 文档找到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T21:34:19.053

这是 NFC 硬件和固件的属性。没有用于配置此的 Android API。

# java - JavaFx 2.0：控制舞台元素的 Z 顺序

> ID：10466076
> 
> 赞同：5
> 
> 时间：2012-05-05T21:18:54.980
> 
> 标签：java, javafx, javafx-2

JavaFx 2 内置了一些控制 z 顺序的方法，但它们的粒度不是很细。您可以调用 toFront() 或 toBack()。但是如果你想插入一个视觉元素，比如说，就在第 4 层之上呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T21:55:59.987

您可以通过获取`ObservableList`父节点的子节点并操作它们来实现它，例如`add(int index, Node element)`：

```
parent.getChildren().add(4, visualElement); 
```

AFAIK toFront() 和 toBack() 以相同的方式工作。

# objective-c - MapKit 范围缩放

> ID：10466077
> 
> 赞同：0
> 
> 时间：2012-05-05T21:18:57.323
> 
> 标签：objective-c, xcode, mapkit

有没有办法根据您拥有的注释范围查看地图？这样就不会留下任何引脚

```
//Map
mapView = [[MKMapView alloc] initWithFrame:CGRectMake(0, 0, 299, 406)];
[mapView setMapType:MKMapTypeStandard];
[mapView setZoomEnabled:YES];
[mapView setScrollEnabled:YES];
MKCoordinateRegion region = { {0.0, 0.0 }, { 0.0, 0.0 } }; 
region.center.latitude = [latitudeNumber doubleValue];
region.center.longitude = [longitudeNumber doubleValue];
region.span.longitudeDelta = 0.01f;
region.span.latitudeDelta = 0.01f;
[mapView setRegion:region animated:YES]; 
[mapView setDelegate:self];
[self.view addSubview:mapView]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T23:56:24.573

请参阅这篇文章： [定位 MKMapView 以一次显示多个注释](https://stackoverflow.com/questions/1336370/positioning-mkmapview-to-show-multiple-annotations-at-once)

根据您添加的注释数量，您可能需要调整链接答案中的代码以循环遍历所有注释以找到 lat/long 的最小/最大值。

# java - 导入 csv 到 JTable

> ID：10466079
> 
> 赞同：3
> 
> 时间：2012-05-05T21:19:02.453
> 
> 标签：java, swing, jtable

我有一个 csv 文件，我想将它导入到 JTable 中。

是否有一个简单的示例显示如何将 csv 文件导入 JTable？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T21:32:54.967

使用 OpenCSV：

```
CSVReader reader = new CSVReader(new FileReader("yourfile.csv")); 
List myEntries = reader.readAll();
JTable table = new JTable(myEntries.toArray()); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-18T01:37:16.170

最后一个答案对我不起作用，因为 JTable 想要一个 Object[][] 和一个 String[] （列名）......我不得不做这样的事情：

```
import com.opencsv.CSVReader;
import java.util.List;
import javax.swing.table.DefaultTableModel;
import javax.swing.JTable; 
import java.io.FileReader;

Object[] columnnames;
transient CSVReader CSVFileReader;
CSVFileReader = new CSVReader(new FileReader(csvFile));
List myEntries = CSVFileReader.readAll();
columnnames = (String[]) myEntries.get(0);
DefaultTableModel tableModel = new DefaultTableModel(columnnames, myEntries.size()-1); 
int rowcount = tableModel.getRowCount();
for (int x = 0; x<rowcount+1; x++)
{
    int columnnumber = 0;
    // if x = 0 this is the first row...skip it... data used for columnnames
    if (x>0)
    {
        for (String thiscellvalue : (String[])myEntries.get(x))
        {
            tableModel.setValueAt(thiscellvalue, x-1, columnnumber);
            columnnumber++;
        }
    }
}

JTable MyJTable = new JTable(tableModel); 
```

此外，如果您想在数据中保留反斜杠字符，请将其用作构造函数：

```
CSVFileReader = new CSVReader(new FileReader(csvFile), ',', '"', '\0'); 
```

这会将“\0”设置为转义字符。我认为这将转义字符设置为空。看到这个线程：[opencsv in java ignores backslash in a field value](https://stackoverflow.com/questions/6008395/opencsv-in-java-ignores-backslash-in-a-field-value)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-22T08:32:00.463

如果你想/需要避免使用 CSVReader，你也可以使用 BufferedReader。它当然不像 CSVReader 那样简单。你肯定可以改进它，因为我只是 Java 文件管理的初学者。

[这部分是从https://www.youtube.com/watch?v=L2xczUN9aI0](https://www.youtube.com/watch?v=L2xczUN9aI0)上的“JAVA IO - How To Import Text File Data To JTable In Java [ with source code]”中借用的

```
import java.io.*;
import java.util.*;
import javax.swing.JTable;
import javax.swing.table.*;

public class test {
    public static void main(String[] args) {
        String inputFileName;
        File inputFile;
        String firstRow;
        Vector<Vector<String>> vectorVectorStringsData = new Vector<Vector<String>>();
        Vector<String> vectorStrings = new Vector<String>();
        Vector<String> vectorColumnIdentifiers = new Vector<String>();
        String[] columnIdentifiers;
        DefaultTableModel model = new DefaultTableModel();
        JTable jTable;

        inputFileName = "yourFileName.csv";
        inputFile = new File(inputFileName);
        try (FileReader fr = new FileReader(inputFile);
            BufferedReader br = new BufferedReader(fr)) 
        {
            firstRow = br.readLine().trim();
            if (firstRow != null) {
                // headers:
                columnIdentifiers = firstRow.split(",");

                vectorColumnIdentifiers = new Vector<String>();
                for (int j =0; j < columnIdentifiers.length; j++) {
                    vectorColumnIdentifiers.add(columnIdentifiers[j]);
                }
            }
            // rows
            Object[] tableLines = br.lines().toArray();
            // data rows
            for (int i = 0; i < tableLines.length; i++) {
                System.out.println("4");
                String line = tableLines[i].toString().trim();
                String[] dataRow = line.split(",");
                vectorStrings = new Vector<String>();
                for (int j =0; j < dataRow.length; j++) {
                    vectorStrings.add(dataRow[j]);
                }
                vectorVectorStringsData.add(vectorStrings);
            }

            fr.close();
        }
        catch (IOException ioe) {
            System.out.println("error: " + ioe.getMessage());
        }

        model.setDataVector(vectorVectorStringsData, vectorColumnIdentifiers);
        jTable = new JTable(model);
    }
} 
```

# android - 以非 1 的值递减？

> ID：10466082
> 
> 赞同：1
> 
> 时间：2012-05-05T21:19:30.560
> 
> 标签：android

我将如何使以下代码更快地降低 alpha 值；即一个大于一的值，每个刻度？

```
 @Override
   public boolean tick() {
       if ( level.alpha > 0 )
           --level.alpha;

   [...]

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T21:20:41.097

`level.alpha -= 2;`

你肯定见过`+=`还是`-=`以前见过？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T21:21:17.543

您可以使用

```
 level.alpha-=n; 
```

n 你想要的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T21:22:19.583

我猜你不希望你的变量的值变成负数，如果它从 1 开始并且你减去一个大于 1 的数字，就会发生这种情况。

如果变量变为负数，这会将变量设置为 0：

```
level.alpha = Math.max(0, level.alpha - 2); 
```

或等效地：

```
level.alpha -= 2;
if (level.alpha < 0) { level.alpha = 0; } 
```

# c - 在 Autoconf 项目中强制执行严格的 C99

> ID：10466084
> 
> 赞同：10
> 
> 时间：2012-05-05T21:20:06.500
> 
> 标签：c, gcc, c99, autotools, autoconf

我有一个用 C 编写的程序，它使用 Autoconf。它使用where 与 gcc 一起使用时转换为`AC_PROG_CC_C99`编译器选项。该程序严格按照 C99 规范编写，不使用任何 GNU 扩展。`configure.ac``-std=gnu99`

我们应该如何设置 Autoconf 以使编译器强制执行该操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T09:38:43.293

我通常使用一个 m4 宏来检查给定的编译器是否接受某个 CFLAG。

将以下内容放入您的 aclocal.m4 （我通常使用 m4/ax_check_cflags.m4 代替）：

```
# AX_CHECK_CFLAGS(ADDITIONAL-CFLAGS, ACTION-IF-FOUND, ACTION-IF-NOT-FOUND)
#
# checks whether the $(CC) compiler accepts the ADDITIONAL-CFLAGS
# if so, they are added to the CXXFLAGS
AC_DEFUN([AX_CHECK_CFLAGS],
[
  AC_MSG_CHECKING([whether compiler accepts "$1"])
  cat > conftest.c++ << EOF
  int main(){
    return 0;
  }
  EOF
  if $CC $CPPFLAGS $CFLAGS -o conftest.o conftest.c++ [$1] > /dev/null 2>&1
  then
    AC_MSG_RESULT([yes])
    CFLAGS="${CFLAGS} [$1]"
    [$2]
  else
    AC_MSG_RESULT([no])
   [$3]
  fi
])dnl AX_CHECK_CFLAGS 
```

并从 configure.ac 中调用它，例如

```
AX_CHECK_CFLAGS([-std=c99 -pedantic]) 
```

# c# - Lucene.net 和经常更新字段

> ID：10466085
> 
> 赞同：0
> 
> 时间：2012-05-05T21:20:18.633
> 
> 标签：c#, asp.net-mvc, lucene.net

我有保存到数据库和 Lucene 以进行全文搜索的内容实体。在那个实体中，我有字段评级，当用户 + 或 - 评级时更新。所以评级可以随时更新，我需要显示正确的评级值如何做得更好？我应该将评级保存到 Lucene 文档并在每次用户更新时更新它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T08:27:57.843

通常方法如下：

*   在 Lucene 中存储实体 ID，因此您可以通过此 ID 从数据库或缓存中轻松加载实体。
*   存储实体字段，您将通过这些字段进行搜索、过滤或排序。例如，如果您按用户名搜索，请存储用户名。如果要按用户名和用户简介搜索，请存储这两个字段。但是，如果您不需要在此字段中进行任何搜索，请不要存储例如用户年龄或用户电话。与评级相同 - 如果您不需要按评级搜索（假设您不需要执行以下查询：搜索评级 > 100 或评级！= 0 等的所有用户）不要在 Lucene 中存储评级。而是在 Lucene 中进行搜索，获取实体 ID，然后从数据库或缓存中检索评级。这样，您只需要在数据库中更新评级，并且仅在少数字段（如用户名或用户简介）更改的情况下更新 Lucene 索引。

# asp.net - 从母版页访问 ControlsPlace 持有者

> ID：10466089
> 
> 赞同：1
> 
> 时间：2012-05-05T21:20:57.093
> 
> 标签：asp.net, master-pages, webforms

您好我已经被这种情况困扰了很长一段时间了？在这里寻求帮助？

我已经定义了嵌套母版页（WebApp 的 1 个默认值和其他引用默认值的自定义母版页）

以下是使用我的自定义母版页的内容页面（比如 content.aspx）的代码片段

在 aspx 源代码中，我包括：

```
%@ MasterType   VirtualPath="~/NestedMasterPage1.master" %> 
```

并在文件后面的代码中，即。custom.aspx.cs（这就是问题所在）：

```
ContentPlaceHolder masterContentPlaceHolder = (ContentPlaceHolder)Page.Master.Master.FindControl("MainContent"); //works well
ContentPlaceHolder nestedContentPlaceHolderHeading = (ContentPlaceHolder)masterContentPlaceHolder.FindControl("NestedMasterHeading"); //works well
Label NewsHeadLines = (Label)nestedContentPlaceHolderHeading.FindControl("lblSubSectionHeader"); //returns null?? The Control ID is all checked and is the same in the Nested Master Page.
**NewsHeadLines.Text = "Testing";** //System.NullReferenceException: 
```

你调用的对象是空的。

发生这种情况是因为我将控件（此处为标签）嵌套在 HTML 表、行和列中吗？请指教？我已经仔细检查了控件名称或 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T21:56:21.263

我相信您可能缺少一两个嵌套容器。尝试这个; 与其试图找出嵌套容器，不如尝试使用通用的编程逻辑来获取它们。看看 Rick Strahl 的[博客文章](http://www.west-wind.com/weblog/posts/2006/Apr/09/ASPNET-20-MasterPages-and-FindControl)

# c++ - `cname` 和 `name.h` 中的类型可以是不同的类型吗？

> ID：10466096
> 
> 赞同：6
> 
> 时间：2012-05-05T21:21:31.457
> 
> 标签：c++, standards-compliance, language-lawyer, standard-library

这个代码*标准符合*吗？

```
#include <stdio.h>
#include <cstdio>

int main() {
    FILE *f1 = 0;
    std::FILE *f2 = f1;
} 
```

**解释：**标准说[标题]：

> [...] 每个标题的内容`cname`应与相应标题的内容相同`name.h`[...] 如同被包含一样。然而，在 C++ 标准库中，声明 [...] 在 namespace 的命名空间范围 (3.3.6) 内`std`。**未指定这些名称是否首先在全局命名空间范围内声明，然后通过显式*****使用声明*****(7.3.3)****注入命名空间。`std`**

 *因此，如果它们不是通过显式使用声明注入的，它们可能是*不同的*类型吗？我不认为“好像通过包含”短语是决定性的，因为文本的另一半显然与此要求相矛盾，要求名称在`std`命名空间内。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T21:32:14.763

是的，这是符合标准的：在、in 中`FILE*`声明，并且由于您引用的段落，两者是相同的。`stdio.h``std::FILE*``cstdio`

（唯一未指定的是，如果您*只*包含，您是否在全局命名空间中`<cstdio>`也有相同的内容。）`FILE*`

* * *

更新：我相信这些类型*实际上*是相同的，并且每种类型只声明一次，然后通过`using`声明注入另一个命名空间。唯一未指定的是哪个先出现。相应的相反标准引用是 D.5(2)：

> 每个 C 标头（每个都具有 name.h 形式的名称）的行为就好像每个由相应 cname 标头放置在标准库命名空间中的名称都放置在全局命名空间范围内一样。未指定这些名称是否首先在命名空间 std 的命名空间范围 (3.3.6) 内声明或定义，然后通过显式使用声明 (7.3.3) 注入全局命名空间范围。

基本上，这意味着两种实现是可能的：

**“C先来”：**

```
// foo.h

struct Gizmo { /* ... */ }; 
```

```
// cfoo

#include "foo.h"
namespace std { using ::Gizmo; } 
```

**“具有 C 兼容性的 C++：**

```
// cfoo

namespace std 
{
    struct Gizmo { /* ... */ };
} 
```

```
// foo.h

#include <cfoo>
using std::Gizmo; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T09:50:17.757

我不相信那段说它们必须相同。它只是对原始 (C++98) 段落的修订，该段落说：

> 每个 C 头文件，每个都有一个*name.h*形式的名称，其行为就像每个由相应*cname*头文件放置在标准库名称空间中的名称也被放置在名称空间的名称空间范围内，`std`并且后跟显式*使用声明*(7.3.3)

这是难以理解的，因为它与大多数系统上现有的*真实*C 头文件相冲突。因此，在 C++11 中，文本已更改为您引用的文本。它允许以相反的方式实现它，就像他们*在实践*中一直所做的那样 - 使用现有系统提供的 C 头文件并将名称导入到 namespace `std`。

但是，还有一段说无论实现方式如何，标题中的名称都必须表示相同的含义：

> `T`对于标准 C 库中的每种类型，类型`::T`和`std::T`保留给实现，并且在定义`::T`时应与`std::T`. ([extern.types], 17.6.4.3.4)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T21:24:47.310

是的，它们可以是不同的类型。使用 C++ 类型；C 头文件只是为了兼容性。

考虑是否如上述答案的评论所暗示的那样，C++ 标头被实现为`namespace std { #include "stdio.h" }`; 那么`::FILE`和`std::FILE`将代表不同的类型。*

# python - 用于提取年份的正则表达式

> ID：10466097
> 
> 赞同：1
> 
> 时间：2012-05-05T21:21:51.533
> 
> 标签：python, regex

给定一个字符串，我如何提取所有**正好**4 位数字的序列？

也就是说，因为`1234 12 12345 1bc5 9876`我想得到`[1234, 9876]`.

我做到了`re.findall('\D\d\d\d\d\D')`，但是在文本边界上失败了（当匹配之前/之后没有字符时）。

* * *

解决方案最好使用 Python 2.7，但我想这很笼统，任何语言都可以。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T21:24:25.470

一般答案非常复杂，请参阅[此处](https://stackoverflow.com/questions/10319696/match-exactly-n-repetitions-of-the-same-character)了解更多信息。但是在这种特殊情况下，我们可以简单地使用词边界断言`\b`：

```
re.findall(r'\b\d{4}\b', ....) 
```

# c# - 在 .NET .config 文件中读取和写入值

> ID：10466098
> 
> 赞同：2
> 
> 时间：2012-05-05T21:22:10.207
> 
> 标签：c#, .net, configuration, configuration-files, configurationmanager

我想为 user.config 文件使用自定义路径，而不是让 .NET 从默认位置读取它。

我正在打开这样的文件：

```
ExeConfigurationFileMap configMap = new ExeConfigurationFileMap();
configMap.ExeConfigFilename = String.Format("{0}\\user.config",AppDataPath);
Configuration config = ConfigurationManager.OpenMappedExeConfiguration(configMap, ConfigurationUserLevel.PerUserRoamingAndLocal); 
```

但是我不知道如何实际从中读取设置，我收到一个编译错误，指出当我尝试通过 AppData 或 ConfigurationSection 获取值时无法访问这些值。

我是否需要创建某种包装类来正确使用数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T03:46:43.907

我最近接到了类似问题的任务，我不得不将读取设置文件的位置从 AppData 中的默认位置更改为应用程序目录。我的解决方案是创建我自己的设置文件，这些设置文件从指定自定义[SettingsProvider的](http://msdn.microsoft.com/en-us/library/system.configuration.settingsprovider.aspx)[ApplicationSettingsBase](http://msdn.microsoft.com/en-us/library/system.configuration.applicationsettingsbase.aspx)派生。虽然这个解决方案一开始感觉有点矫枉过正，但我​​发现它比我预期的更加灵活和可维护。

**更新：**

示例设置文件：

```
public class BaseSettings : ApplicationSettingsBase
{
    protected BaseSettings(string settingsKey)
       { SettingsKey = settingsKey.ToLower(); }

    public override void Upgrade()
    {
         if (!UpgradeRequired)
             return;
         base.Upgrade();
         UpgradeRequired = false;
         Save();
    }

    [SettingsProvider(typeof(MySettingsProvider)), UserScopedSetting]
    [DefaultSettingValue("True")]
    public bool UpgradeRequired
    {
         get { return (bool)this["UpgradeRequired"]; }
         set { this["UpgradeRequired"] = value; }
    }
} 
```

示例设置提供者：

```
public sealed class MySettingsProvider : SettingsProvider
{
    public override string ApplicationName { get { return Application.ProductName; } set { } }
    public override string Name { get { return "MySettingsProvider"; } }

    public override void Initialize(string name, NameValueCollection col)
         { base.Initialize(ApplicationName, col); }

    public override void SetPropertyValues(SettingsContext context, SettingsPropertyValueCollection propertyValues)
    {
       // Use an XmlWriter to write settings to file. Iterate PropertyValueCollection and use the SerializedValue member
    }

    public override SettingsPropertyValueCollection GetPropertyValues(SettingsContext context, SettingsPropertyCollection props)
    {
       // Read values from settings file into a PropertyValuesCollection and return it
    }

    static MySettingsProvider()
    {
        appSettingsPath_ = Path.Combine(new FileInfo(Application.ExecutablePath).DirectoryName, settingsFileName_);

        settingsXml_ = new XmlDocument();
        try { settingsXml_.Load(appSettingsPath_); }
        catch (XmlException) { CreateXmlFile_(settingsXml_); } //Invalid settings file
        catch (FileNotFoundException) { CreateXmlFile_(settingsXml_); } // Missing settings file
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T21:51:16.543

一些改进：

1）加载它有点简单，不需要其他行：

```
var config = ConfigurationManager.OpenExeConfiguration(...); 
```

2）`AppSettings`正确访问：

```
config.AppSettings.Settings[...]; // and other things under AppSettings 
```

3）如果您想要自定义配置部分，请使用此工具：[http ://csd.codeplex.com/](http://csd.codeplex.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T13:34:28.370

我从来没有让配置管理器方法工作。在混了半天没有进展之后，我决定推出自己的解决方案，因为我的需求是基本的。

这是我最后提出的解决方案：

```
public class Settings
{
    private XmlDocument _xmlDoc;
    private XmlNode _settingsNode;
    private string _path;

    public Settings(string path)
    {
        _path = path;
        LoadConfig(path);
    }

    private void LoadConfig(string path)
    {
       //TODO: add error handling
        _xmlDoc = null;
        _xmlDoc = new XmlDocument();
        _xmlDoc.Load(path);
        _settingsNode = _xmlDoc.SelectSingleNode("//appSettings");
    }

    //
    //use the same structure as in .config appSettings sections
    //
    public string this[string s]
    {
        get
        {
            XmlNode n = _settingsNode.SelectSingleNode(String.Format("//add[@key='{0}']", s));
            return n != null ? n.Attributes["value"].Value : null;
        }
        set
        {
            XmlNode n = _settingsNode.SelectSingleNode(String.Format("//add[@key='{0}']", s));

            //create the node if it doesn't exist
            if (n == null)
            {
                n=_xmlDoc.CreateElement("add");
                _settingsNode.AppendChild(n);
                XmlAttribute attr =_xmlDoc.CreateAttribute("key");
                attr.Value = s;
                n.Attributes.Append(attr);
                attr = _xmlDoc.CreateAttribute("value");
                n.Attributes.Append(attr);
            }

            n.Attributes["value"].Value = value;
            _xmlDoc.Save(_path);
        }
    }
} 
```

# android - 适用于 Android 和 iOS 的无服务器嵌入式 noSQL

> ID：10466100
> 
> 赞同：5
> 
> 时间：2012-05-05T21:22:37.267
> 
> 标签：android, ios, nosql, embedded-database, document-store

我正在为（主要）Android 和 iOS 寻找无服务器嵌入式 noSQL 文档存储数据库。
为了简化，我需要一个基于文档的 SQLite ：P

MongoDB很棒，有很多驱动程序，但它需要一个服务器......
也许它的精简版本可能会很好......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T12:30:48.120

iBoxDB for java可以在Android上运行，它可以存储对象。如果用于存储 HashMap，它可以作为文档存储数据库[https://github.com/iboxdb/forjava](https://github.com/iboxdb/forjava)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T20:52:55.423

我无法在 Android 方面为您提供帮助，但请查看已移植（包装）到 iOS 的键/值数据库：

*   LevelDB（端口：[NULevelDB](https://github.com/nulayer/NULevelDB)）：由 Google 制造，它似乎是目前最快的之一。
*   TokyoCabinet（端口：[TSDocDB](https://github.com/isaact/TSDocDB)）：非常快，但似乎有点过时，官方页面指出有一个更快的新版本（称为KyotoCabinet），但是没有端口（据我所知） . 并且，被许可为 LGPL（它似乎与 AppStore 不完全兼容）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-05T23:05:39.053

你应该考虑 Parse.com。它非常易于使用。它不是无服务器的，但他们提供了服务器，这是非常值得的。对于少量 API 请求，它是免费的。

顺便说一句，它使用运行 Ruby 和 MongoDB 的 EC2 服务器，并且具有令人难以置信的可扩展性。它几乎不需要任何工作，并且适用于 iOS 和 Android。

# android - Android的图像处理库？

> ID：10466102
> 
> 赞同：27
> 
> 时间：2012-05-05T21:22:49.153
> 
> 标签：android, image-processing

一位在医学界工作的朋友让我尝试为 Android 编写一个可以拍照的小应用程序，根据颜色和大小对其进行分析，以便我们知道它自上次快照以来是如何演变的，并据此提出建议进化。

我才刚刚开始使用 Android，并且想知道是否有人知道可以做到这一点并节省开发时间的好库。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-05T21:44:22.413

[OpenCV](http://opencv.org/)（用于开放计算机视觉）是一个 C++ 图像处理库，被图像处理、计算机视觉、机器人技术的研究人员广泛使用......（至少对于那些不使用 matlab 的人来说）。它确实正式支持 Android，并且正在积极开发中。

此外，它具有许多高级功能，您可以在以后需要时使用它们。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-05T22:00:51.890

我发现[JavaCV](http://code.google.com/p/javacv/)更适合 Android，因为它导出 Java API。它还支持其他图像处理库。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-10T14:04:43.317

您可能会查看 Imagemagick。它有几个 Android 端口（我知道的两个端口之一见[https://github.com/puelocesar/android-lib-magick](https://github.com/puelocesar/android-lib-magick)），我很确定我读到它支持做你想做的事。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-25T09:52:50.887

使用 JavaCV，是 OpenCV 的包装器。JavaCV 包含了 OpenCV 包含的所有大部分功能。尽管 JavaCV 没有任何丰富的文档，但您可以使用 OpenCV 文档来查找可用于项目的函数。JavaCV 与 OpenCV 具有相同的方法签名（并非全部）。

*   [JavaCV 主页 - 下载以及如何在 Android 环境 (Eclipse) 上进行设置](https://github.com/bytedeco/javacv)
*   [OpenCV 文档](https://docs.opencv.org/3.4.0/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T19:21:12.370

我找到了 JHLabs 库，它非常易于使用，并且可以使用基本的图像处理过滤器。 [https://code.google.com/p/android-jhlabs/](https://code.google.com/p/android-jhlabs/) -> 未找到此链接

[https://github.com/finebyte/android-jhlabs](https://github.com/finebyte/android-jhlabs)

# objective-c - 如何将 PickerView 委托从一个控制器更改为另一个？

> ID：10466104
> 
> 赞同：0
> 
> 时间：2012-05-05T21:23:05.730
> 
> 标签：objective-c, ios, uipickerview, uiapplicationdelegate

使用情节提要，我构建了一个带有“添加”按钮的 ViewController1。单击添加显示一个 PopoverView（在 ViewController2 中），其中只有一个 Picker。

所以我的 PickerView 的委托在 ViewController 2 中，但我希望它在 ViewController1 中......有没有简单的方法可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T22:30:27.363

In your ViewController1 prepareForSegue method, try this:

```
if ([segue.identifier isEqualToString:@"MySegue"])
{
    ViewController2* vc2 = segue.destinationViewController;
    vc2.pickerView.delegate = self;
} 
```

It basically assigns the delegate of the pickerview to ViewController1 before the segue is finished being called.

This of course is assuming your pickerview is setup as a property.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T21:28:53.887

在您的 ViewController1.h 文件中，将您的界面标题更改为此；

```
@interface ViewController1 : UIViewController <UIPickerViewDelegate, UIPickerViewDataSource>; 
```

这使您的 ViewController1 负责代表。然后在 ViewController1.m 文件中添加你想要的方法。此外，将 UIPickerView 的委托设置为您的 ViewController1 实例：

```
[yourPickerview setDelegate:ViewController1]; 
```

# asp.net-mvc-3 - 如何直接在布局中获取视图模型？

> ID：10466105
> 
> 赞同：0
> 
> 时间：2012-05-05T21:23:06.063
> 
> 标签：asp.net-mvc-3, layout, model

我正在做一个练习，我在静态文件中缩小我的大部分 javascript，然后每个视图都有这样的东西：

```
@section Script
{
    @Html.Action("MinifyJavaScript", "Resource", new { viewPath = "~/Views/User/Register.Js.cshtml", model = Model })
} 
```

反过来，它会呈现微小的、非静态的 javascript 代码，如下所示：

```
@model UserRegisterModel
<script>
    (function ($, b) {
        $(function () {
            b.views.user.register('@Url.Action("ValidateInput", "User")');
        });
    })(jQuery, bruttijjimo);
</script> 
```

这允许我在视图中更频繁地缓存 javascript，因为只有随模型变化的部分可以更改（并且通常被视为部分视图）

现在我想通过删除布局部分的需要来进一步升级这种做法，并且按照惯例，在视图之后立即渲染 javascript 部分视图（与视图传递相同的模型）。我已经创建了在视图中压缩 javascript 的方法。还有一个约定，视图的 javascript 必须在`.js.cshtml`文件中，并与视图共享模型。

我需要的是从布局中获取视图的模型，以及视图的名称，然后在那里渲染。

这仅对实际视图有效或需要，因为如果需要发出 javascript，partials 会使用脚本管理器。

那么：如何从布局中获取视图模型？其余的我可以弄清楚，但这一个正在躲避我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T21:26:30.773

> 那么：如何从布局中获取视图模型？

`@Model`应该给你你正在寻找的东西。

话虽这么说，我不太明白你在做什么，但事实上你的视图中有javascript，而不是把它放在一个单独的javascript文件中，把缓存的东西留给浏览器，重新发明一些轮子感觉不对。

# ruby - 让 Rubytest 与 MacVim 一起工作

> ID：10466106
> 
> 赞同：1
> 
> 时间：2012-05-05T21:23:25.217
> 
> 标签：ruby, vim, macvim

我正在尝试让 Rubytest.vim 与我的 Macvim 安装一起使用。

我已将 ruby​​test.vim 脚本放到 ~/.vim/plugin 文件夹中。

由于与其他映射冲突，我不得不将 ruby​​test 使用的键从 \t 重新映射到 \r 。

在尝试使用 \r 运行单个测试时，Macvim 显示文本

```
 :call SNR<82>_Run(1) 
```

在底部，没有其他事情发生。

不知道发生了什么。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:20:03.187

似乎您忘记了`<CR>`重新映射结束时的 ，因此映射不完整并等待命令行中的输入。

# cocoa - 创建目录 - 什么替代 createDirectoryAtPath？

> ID：10466110
> 
> 赞同：1
> 
> 时间：2012-05-05T21:23:58.263
> 
> 标签：cocoa, deprecated, file-manager

我的程序中有以下代码行，这些代码取自 Stephen G. Kochan 的《Objective-C 编程》一书的第四版：

```
[fileManager createDirectoryAtPath:DATABASE_DIRECTORY attributes:nil]; 
```

注意：“fileManager”是我的 fm 变量，DATABASE_DIRECTORY 是我的路径的#define。

虽然它工作得很好（我运行的是 OSX 10.6.8），但每次编译时都会提醒我：

```
"createDirectoryAtPath:attributes:" is deprecated 
```

我查看了文件管理器的参考文档，对于 Cocoa 编程的新手来说，这有点不知所措。无论如何，我能找到的唯一文件管理器参考文档中不再列出该特定方法（https://developer.apple.com/library/mac/#documentation/Carbon/Reference/File_Manager/Reference/reference.html）甚至没有被列为“弃用”。它根本不存在。

显然，它仍然有效，但显然这个想法是利用一种不同且更现代的方式来创建目录（我注意到文件管理器引用是 Carbon vs. Cocoa 引用。我还没有尝试在 Lion 上运行它，看看是否它仍然有效。）

这种不推荐使用的方法有直接替代品吗？

如果不是，Apple 是否试图取消路径名并完全切换到 Unicode？（如果我对这个问题和术语有点困惑，请原谅我......自 80 年代后期以来我没有编写过代码......）我过去从未真正将 Unicode 用于任何事情，所以我不知道在哪里开始。

如果有人可以推荐一本关于 Unicode 和/或编程代码以在 Cocoa 中读/写文件的良好*当前*入门读物，我们将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T05:05:57.327

苹果正在做的是从路径转向 URL——我不知道它们是否会一路走下去，但他们似乎确实贬低了很多路径方法，转而支持 URL 方法。createDirectoryAtPath:attributes: 的替换是 createDirectoryAtURL:withIntermediateDirectories:attributes:error:

我不确定为什么您在文档中找不到它，如果您搜索 createDirectoryAtPath:attributes: 它会将您带到折旧的方法，并在该引用中将您指向替换。

# webserver - MPI_SEND 在 MPI_BARRIER 之后停止工作

> ID：10466119
> 
> 赞同：2
> 
> 时间：2012-05-05T21:25:09.667
> 
> 标签：webserver, mpi, distributed, send, barrier

我正在用 C/MPI 构建一个分布式 Web 服务器，在我的代码中的第一个 MPI_BARRIER 之后，点对点通信似乎完全停止工作。标准 C 代码在屏障之后工作，所以我知道每个线程都会通过屏障。点对点通信在障碍之前也可以正常工作。但是，当我将与屏障之前的行相同的代码复制粘贴到屏障之后的行中时，它会完全停止工作。SEND 将永远等待。当我尝试改用 ISEND 时，它会通过线路，但从未收到过消息。我一直在谷歌上搜索这个问题，每个对 MPI_BARRIER 有问题的人都被告知屏障正常工作，他们的代码是错误的，但我终生无法弄清楚为什么我的代码是错误的。

这是一个示例程序，演示了这一点：

```
#include <mpi.h>
#include <stdio.h>

int main(int argc, char *argv[])
{
  int procID;
  int val;
  MPI_Status status;

  MPI_Init(&argc, &argv);
  MPI_Comm_rank(MPI_COMM_WORLD, &procID);
  MPI_Barrier(MPI_COMM_WORLD);

  if (procID == 0)
  {
    val = 4;
    printf("Before send\n");
    MPI_Send(&val, 1, MPI_INT, 1, 4, MPI_COMM_WORLD);
    printf("after send\n");
  }

  if (procID == 1)
  {
    val = 1;
    printf("before: val = %d\n", val);
    MPI_Recv(&val, 1, MPI_INT, MPI_ANY_SOURCE, MPI_ANY_TAG, MPI_COMM_WORLD, &status);
    printf("after: val = %d\n", val);
  }

  MPI_Finalize();
  return 0;
} 
```

将这两个`if`语句移动到屏障之前会导致该程序正确运行。

**编辑**- 无论类型如何，第一次通信似乎都有效，并且所有未来的通信都失败了。这比我一开始想的要笼统得多。不管第一次通信是障碍还是其他消息，以后的通信都不会正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T18:33:40.777

当 Open MPI 使用 TCP/IP 进行通信时，它有一个已知功能：它尝试使用**所有已**配置的处于“UP”状态的网络接口。如果无法通过所有这些接口访问其他一些节点，则会出现问题。这是 Open MPI 采用的贪婪通信优化的一部分，有时，就像您的情况一样，会导致问题。

似乎至少第二个节点有多个接口处于启动状态，并且在协商阶段将这一事实引入第一个节点：

*   一个配置了 128.2.100.167
*   一个配置了 192.168.109.1 （你的机器上是否有隧道或 Xen 运行？）

屏障通信发生在第一个网络上，然后下一个`MPI_Send`尝试通过第二个网络发送到第二个地址，这显然不连接所有节点。

最简单的解决方案是告诉 Open MPI 仅使用连接节点的网络。您可以使用以下 MCA 参数告诉它这样做：

```
--mca btl_tcp_if_include 128.2.100.0/24 
```

（或无论您的通信网络是什么）

如果在所有机器上都相同，您还可以指定网络接口列表，例如

```
--mca btl_tcp_if_include eth0 
```

或者您可以告诉 Open MPI 专门排除某些接口（但如果这样做，您必须始终告诉它排除环回“lo”）：

```
--mca btl_tcp_if_exclude lo,virt0 
```

希望对您和其他在 SO 周围似乎有同样问题的人有所帮助。看起来最近几乎所有的 Linux 发行版都开始默认提供各种网络接口，这可能会导致 Open MPI 出现问题。

PS 请把这些节点放在防火墙后面！

# javascript - 如何使用 javascript 隐藏 Bootstrap 模式？

> ID：10466129
> 
> 赞同：323
> 
> 时间：2012-05-05T21:26:19.603
> 
> 标签：javascript, jquery, twitter-bootstrap, modal-dialog

我已经阅读了这里的帖子，Bootstrap 网站，并且疯狂地用谷歌搜索 - 但找不到我确定是一个简单的答案......

我有一个从 link_to 助手打开的 Bootstrap 模式，如下所示：

```
<%= link_to "New Contact", new_contact_path, {remote: true, 'data-toggle' => 'modal', 'data-target' => "#myModal",  class: "btn btn-primary"} %> 
```

在我的`ContactsController.create`操作中，我有创建`Contact`然后传递给`create.js.erb`. 在`create.js.erb`中，我有一些错误处理代码（ruby 和 javascript 的混合）。如果一切顺利，我想关闭模态。

这就是我遇到麻烦的地方。当一切顺利时，我似乎无法关闭模态。

我试过`$('#myModal').modal('hide');`了，这没有效果。我也尝试过`$('#myModal').hide();`导致模态消失但离开背景的方法。

关于如何关闭模式和/或从内部消除背景的任何指导`create.js.erb`？

**编辑**

这是 myModal 的标记：

```
<div class="modal hide" id="myModal" >
  <div class="modal-header">
    <a class="close" data-dismiss="modal">×</a>
    <h3>Add Contact</h3>
    <div id="errors_notification">
    </div>
  </div>
  <div class="modal-body">
    <%= form_for :contact, url: contacts_path, remote: true do |f| %>  
      <%= f.text_field :first_name, placeholder: "first name" %>
      <%= f.text_field :last_name, placeholder: "last name" %>
      <br>
      <%= f.submit "Save", name: 'save', class: "btn btn-primary" %>
      <a class="close btn" data-dismiss="modal">Cancel</a>
    <% end %>
  </div>
  <div class="modal-footer">
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：547
> 
> 时间：2012-05-07T11:55:48.633

在浏览器窗口中打开模式，使用浏览器的控制台尝试

```
$('#myModal').modal('hide'); 
```

如果它有效（并且模式关闭），那么您知道您关闭的 Javascript*没有*正确地从服务器发送到浏览器。

如果它不起作用，那么您需要进一步调查客户端发生了什么。例如，确保没有两个元素具有相同的 id。例如，它在页面加载后第一次工作，但不是第二次？

浏览器的控制台：firefox的firebug，Chrome或Safari的调试控制台等。

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2014-06-30T06:09:20.297

要关闭引导[**模式**](http://getbootstrap.com/javascript/#modals)，您可以将**“隐藏”**作为选项传递给模式方法，如下所示

```
$('#modal').modal('hide'); 
```

请在**[此处查看工作小提琴](http://jsfiddle.net/subodhghulaxe/MGbXk/)**

bootstrap 还提供了可以挂钩到[模态](http://getbootstrap.com/javascript/#modals)功能的事件，例如，如果您想在模态完成对用户隐藏时触发事件，您可以使用**hidden.bs.modal**事件，您可以在此处阅读有关模态方法和事件的更多信息**[文档](http://getbootstrap.com/javascript/#modals)**

如果上述方法都不起作用，请为您的关闭按钮提供一个 ID 并触发点击关闭按钮。

* * *

## 回答 #3

> 赞同：62
> 
> 时间：2016-09-09T04:08:35.077

使用引导程序隐藏和显示模式的最佳形式

```
// SHOW
$('#ModalForm').modal('show');
// HIDE
$('#ModalForm').modal('hide'); 
```

* * *

## 回答 #4

> 赞同：54
> 
> 时间：2015-04-10T11:30:24.810

我使用 Bootstrap 3.4 对我来说这不起作用

`$('#myModal').modal('hide')`

无奈之下，我这样做了：

```
$('#myModal').hide();
$('.modal-backdrop').hide(); 
```

也许它不优雅，但它有效

* * *

## 回答 #5

> 赞同：47
> 
> 时间：2014-11-30T21:13:30.857

我遇到了同样的错误，这行代码对我很有帮助。

```
$("[data-dismiss=modal]").trigger({ type: "click" }); 
```

* * *

## 回答 #6

> 赞同：28
> 
> 时间：2017-01-02T09:35:32.027

```
$('#modal').modal('hide'); 
//hide the modal

$('body').removeClass('modal-open'); 
//modal-open class is added on body so it has to be removed

$('.modal-backdrop').remove();
//need to remove div with modal-backdrop class 
```

* * *

## 回答 #7

> 赞同：27
> 
> 时间：2016-01-02T12:34:14.080

我找到了正确的解决方案，您可以使用此代码

```
$('.close').click(); 
```

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2012-11-01T23:18:33.403

我遇到了我认为是类似的问题。`$('#myModal').modal('hide');`很可能会通过该功能并达到目标

```
if (!this.isShown || e.isDefaultPrevented()) return 
```

问题是即使显示模态并且值应该为真，isShown 的值也可能未定义。我已将引导代码稍微修改为以下

```
if (!(typeof this.isShown == 'undefined') && (!this.isShown || e.isDefaultPrevented())) return 
```

这似乎在很大程度上解决了这个问题。如果背景仍然存在，您可以随时添加调用以在隐藏调用之后手动将其移除`$('.modal-backdrop').remove();`。一点也不理想，但确实有效。

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2014-04-29T20:08:47.063

（参考 Bootstrap 3），隐藏模态使用：`$('#modal').modal('hide')`. 但是（对我而言）背景出现的原因是因为我在“隐藏”完成之前破坏了模态的 DOM。

为了解决这个问题，我将隐藏事件与 DOM 删除联系起来。就我而言：`this.render()`

```
var $modal = $('#modal');

//when hidden
$modal.on('hidden.bs.modal', function(e) { 
  return this.render(); //DOM destroyer
});

$modal.modal('hide'); //start hiding 
```

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2014-07-17T16:31:18.043

在“显示的”回调发生后，我最好能拨打电话：

```
$('#myModal').on('shown', function () {
      $('#myModal').modal('hide');
}) 
```

这确保了在调用 hide() 之前完成了模式加载。

* * *

## 回答 #11

> 赞同：10
> 
> 时间：2016-09-16T18:28:31.680

我们发现在调用我们的服务器代码和返回成功回调之间只有一点延迟。如果我们在处理程序中包装对服务器的调用`$("#myModal").on('hidden.bs.modal', function (e)`，然后调用该`$("#myModal").modal("hide");`方法，浏览器将隐藏模式，然后调用服务器端代码。

再次，不优雅但实用。

```
 function myFunc(){
        $("#myModal").on('hidden.bs.modal', function (e) {
            // Invoke your server side code here.
        });
        $("#myModal").modal("hide");
 }; 
```

如您所见，当`myFunc`被调用时，它将隐藏模态，然后调用服务器端代码。

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2020-11-19T15:49:40.420

隐藏模态背景是有效的，但随后任何模态和背景的打开都不会像应有的那样隐藏。我发现这始终有效：

```
// SHOW
$('#myModal').modal('show')
$('.modal-backdrop').show();

// HIDE
$('#myModal').modal('hide');
$('.modal-backdrop').hide(); 
```

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2019-05-11T12:06:50.377

我使用了这个简单的代码：

```
$("#MyModal .close").click(); 
```

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2013-07-11T19:51:08.823

我遇到了同样的问题，经过一些实验，我找到了解决方案。在我的点击处理程序中，我需要阻止事件冒泡，如下所示：

```
$("a.close").on("click", function(e){
  $("#modal").modal("hide");
  e.stopPropagation();
}); 
```

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2016-06-06T12:36:07.200

```
$('.modal-backdrop').hide(); // for black background
$('body').removeClass('modal-open'); // For scroll run
$('#modal').modal('hide'); 
```

* * *

## 回答 #16

> 赞同：6
> 
> 时间：2015-11-06T17:07:44.603

这是文档： http: [//getbootstrap.com/javascript/#modals-methods](http://getbootstrap.com/javascript/#modals-methods)

这是方法： $('#myModal').modal('hide')

如果您需要多次打开不同内容的模态，我建议添加（在您的主js中）：

```
$('body').on('hidden.bs.modal', '.modal', function () {
      $(this).removeData('bs.modal');
    }); 
```

因此，您将为下一次打开清理内容并避免一种缓存

* * *

## 回答 #17

> 赞同：6
> 
> 时间：2017-02-27T17:34:36.880

`$('#modal').modal('hide');``data-dismiss="modal"`除非我在取消按钮上有一个属性，否则它的变体对我不起作用。像你一样，我的需求是可能关闭/可能不关闭基于一些额外的逻辑，所以点击一个链接`data-dismiss="modal"`完全不会做。我最终得到了一个隐藏按钮`data-dismiss="modal"`，我可以通过它以编程方式调用点击处理程序，所以

```
<a id="hidden-cancel" class="hide" data-dismiss="modal"></a>
<a class="close btn">Cancel</a> 
```

然后在单击处理程序中取消当您需要关闭您可以拥有的模式时

```
$('#hidden-cancel').click(); 
```

* * *

## 回答 #18

> 赞同：5
> 
> 时间：2016-10-10T14:30:06.930

即使我有同样的问题。这对我帮助很大

```
$("[data-dismiss=modal]").trigger({ type: "click" }); 
```

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2015-08-20T12:31:40.840

我们需要处理事件冒泡。需要添加一行代码

```
$("#savechanges").on("click", function (e) {
        $("#userModal").modal("hide");
        e.stopPropagation(); //This line would take care of it
    }); 
```

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2016-03-19T00:40:39.487

我意识到这是一个老问题，但我发现这些都不是我真正想要的。这似乎是由于在显示完成之前试图关闭模式引起的。

我的解决方案基于@schoonie23 的回答，但我不得不改变一些事情。

首先，我在脚本顶部声明了一个全局变量：

```
<script>
    var closeModal = false;
    ...Other Code... 
```

然后在我的模态代码中：

```
$('#myModal').on('show.bs.modal', function (event) {
    ...Some Code...
    if (someReasonToHideModal) {
        closeModal = true;
        return;
    }
    ...Other Code... 
```

然后这个：（请注意名称“shown.bs.modal”表示模态已完全显示，而不是在调用显示事件时触发的“显示”。（我最初只尝试了“显示”，但它不起作用。 )

```
$('#myModal').on('shown.bs.modal', function (event) {
    if (closeEditModal) {
        $('#myModal').modal('hide');
        closeModal = false;
    }
}); 
```

希望有一天这可以为某人节省额外的研究。在我想出这个之前，我花了一些时间寻找解决方案。

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2019-05-09T19:28:13.947

我使用了这段代码 -

使用淡出隐藏具有平滑效果的模态。

```
$('#myModal').fadeOut();

$('.modal-backdrop').fadeOut();

$('.modal-open').css({'overflow': 'visible'}); 
```

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2020-05-04T20:49:58.843

document.getElementById('closeButton').click(); // 添加一个 data-dismiss="modal" 属性到 modal 中的一个元素并给它这个 id

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2019-04-07T16:57:05.867

如果您在模态中使用 close 类，则以下内容将起作用。根据您的用例，如果有多个具有关闭类的模式，我通常建议仅过滤可见模式。

```
$('.close:visible').click(); 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2022-01-18T09:23:40.213

有时

```
$('#myModal').modal('hide');
$('#myModal').hide(); 
```

没有完成工作，因此您需要将其添加到模态的页脚：

```
<button type="button" id="close_cred_modal" class="btn btn-secondary" data-dismiss="modal">Close</button> 
```

然后添加此行以关闭模式

```
$('#close_cred_modal').click(); 
```

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2016-10-07T07:26:49.287

这是不好的做法，但您可以使用此技术通过在 javascript 中调用关闭按钮来关闭模式。这将在 3 秒后关闭模式。

```
<!DOCTYPE html>
<html lang="en">
<head>
<title>Bootstrap Example</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<script>
window.onload=function()
{
setInterval(function(){ 

$("#closemodal").click();
}, 3000);

}
</script> 
</head>
<body>

   <div class="container">
 <h2>Modal Example</h2>
<!-- Trigger the modal with a button -->
<button type="button" class="btn btn-info btn-lg" data-toggle="modal"   data-target="#myModal">Open Modal</button>

<!-- Modal -->
<div class="modal fade" id="myModal" role="dialog">
<div class="modal-dialog">

    <!-- Modal content-->
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal">&times;</button>
      <h4 class="modal-title">Modal Header</h4>
    </div>
    <div class="modal-body">
      <p>Some text in the modal.</p>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-default" data-dismiss="modal" id="closemodal">Close</button>
    </div>
  </div>

</div>
</div>

 </div>

</body>
</html> 
```

# jquery - 清除客户端验证中的错误消息 rails gem

> ID：10466132
> 
> 赞同：2
> 
> 时间：2012-05-05T21:26:41.203
> 
> 标签：jquery, ruby-on-rails, client-side-validation

我在我的应用程序中使用客户端验证 rails gem v3.1.0。我在需要验证的 jquery 对话框中显示了一个表单。在该表单上启用了客户端状态验证。验证一切正常，但是当用户取消对话框（不提交）时，我想清除任何现有的验证错误。这样，当用户再次触发对话框时，验证错误不会出现在表单上。

我试图通过在对话框关闭时为每个元素触发客户端状态验证传递事件来实现这一点 - 它通过删除包装错误字段和标签来工作。一个问题是后续验证在此代码之后不起作用。我觉得绑定事件被删除并且不再触发。

有没有更好的方法来实现这一目标？

我的jQuery对话框：

```
$('#create_dialog').dialog({
            height: 260,
            width: 420,
            title: "title",
            buttons: {"<%= I18n.t("create") %>": function(e) {
                $('#new_segment').submit();
                },
                Cancel: function() {
                    var form = $('#new_segment');
                    form.find('[data-validate]:input').each(function() {
                        $(this).trigger('element:validate:pass');
                    });
                    $(this).dialog("close");

                    }
                }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-29T09:01:46.190

不是一个干净的方式，但这有效

```
/**
 * Remove Embedded validation perfectly that is compatible with validation gem
 * @param field
 * @returns {boolean}
 */
function removeValidationMessage(field) {
  var $field = $(field) || field;
  /**
   * First wrap the previously occurring label in wrapper div with class 'field_with_errors'
   * Then Wrap the field within a wrapper div of same class
   * Then add validation message after the field with class name 'message'
   */
  if ($field.siblings('.message').length > 0) {
    $field.parent().prev('.field_with_errors').find('label').unwrap();
    $field.unwrap();
    $field.next('.message').remove();
    return true;
  }
  return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T20:55:07.220

[https://github.com/bcardarella/client_side_validations/issues/328](https://github.com/bcardarella/client_side_validations/issues/328)

来自客户端验证 gem 的开发者 Brian Cardarella：

不幸的是，现在没有一种干净的方法可以做到这一点。这将在 4.0 中改变

# mysql - 除了 mysql 在哪里存储信息

> ID：10466135
> 
> 赞同：1
> 
> 时间：2012-05-05T21:27:13.427
> 
> 标签：mysql

我的 php 脚本从某个页面上的 mysql 数据库中提取了大约 1000 个名称。这些名称用于 javascript 自动完成脚本。

我认为有更好的方法来做到这一点。我想每天使用一次 cronjob (php) 更新名称并将名称本地存储在文本文件中？我还能在哪里存放它？这不是敏感信息。

它应该是 php 可读可写的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T21:28:56.590

从文本文件中读取不太可能比数据库查询快得多——MySQL 已经做了很多缓存，这应该可以让你的查询更快。

如果您需要经常进行此查询并且性能通常是一个问题，您可以考虑使用 PHP 的缓存模块。

**有关的**

*   [PHP缓存的最佳方式](https://stackoverflow.com/questions/4502597/the-best-way-of-php-caching)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T21:31:23.033

你可以试试 Memcache。但这可能就像用大锤敲碎坚果一样。

*编辑*如何将数据存储为简单文件并让用户（JavaScript）下载它。客户端不会查询服务器的每个按键，因为他们可以自己搜索匹配的值。格式可以是 JSON，因为它很简单并且是 JavaScript 原生的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T21:37:07.367

由于您每天只需要更新一次数据，因此让一个 cron 脚本在某个固定位置生成一个静态 json 文件。然后在客户端上使用 ajax 读取它，并确保它在客户端上缓存它。

或者可能在数据库更新时生成文件（如果适用，我不知道您的应用程序）

# c++ - 可变参数的有效汇编模式

> ID：10466136
> 
> 赞同：7
> 
> 时间：2012-05-05T21:27:25.330
> 
> 标签：c++, linux, gcc, assembly, 32-bit

我认为我的问题可能看起来有点奇怪，但就是这样；我正在尝试在 C++ 中动态创建一个程序（主要是为了好玩，但也出于编程原因），它并不像听起来那么难。为此，您必须像这样在运行时使用程序集：

```
byte * buffer = new byte[5];
*buffer = '0xE9'; // Code for 'jmp'
*(uint*)(buffer + 1) = 'address destination'; // Address to jump to 
```

这比看起来要容易得多，因为我只针对一个平台和编译器；带有 Linux 32 位的 GCC（也只有*一个*调用约定，cdecl）。所以我试图创建一个动态汇编函数来重定向来自触发器的调用，所以我可以使用类方法作为回调（即使使用 C API 库（当然使用 cdecl））。我只需要它来支持指针和本机类型（char、int、short 等......）。

```
ANYTHING MyRedirect(ANY AMOUNT ARGUMENTS)
{
    return MyClassFunc('this', ANY AMOUNT ARGUMENTS);
} 
```

上面的函数是我想在纯汇编中创建的函数（在 C++ 的内存中）。由于该函数非常简单，因此它的 ASM 也很简单（取决于参数）。

```
55                      push   %ebp
89 e5                   mov    %esp,%ebp
83 ec 04                sub    $0x4,%esp
8b 45 08                mov    0x8(%ebp),%eax
89 04 24                mov    %eax,(%esp)
e8 00 00 00 00          call   <address>
c9                      leave
c3                      ret 
```

所以在我的程序中，我创建了一个 ASM 模式生成器（因为我不是特别了解 ASM，所以我搜索模式）。这个函数可以通过指定函数需要的参数数量来生成汇编代码（以字节为单位，对于上面的确切情况，即重定向和返回的函数）。这是我的 C++ 代码的一个片段。

```
std::vector<byte> detourFunc(10 + stackSize, 0x90); // Base is 10 bytes + argument size

// This becomes 'push %ebp; move %esp, %ebp'
detourFunc.push_back(0x55);     // push %ebp
detourFunc.push_back(0x89);     // mov
detourFunc.push_back(0xE5);     // %esp, %ebp

// Check for arguments
if(stackSize != 0)
{
    detourFunc.push_back(0x83);     // sub
    detourFunc.push_back(0xEC);     // %esp
    detourFunc.push_back(stackSize);    // stack size required

    // If there are arguments, we want to push them
    // in the opposite direction (cdecl convention)
    for(int i = (argumentCount - 1); i >= 0; i--)
    {
        // This is what I'm trying to implement
        // ...
    }

    // Check if we need to add 'this'
    if(m_callbackClassPtr)
    {

    }
}

// This is our call operator
detourFunc.push_back(0xE8);     // call

// All nop, this will be replaced by an address
detourFunc.push_back(0x90);     // nop
detourFunc.push_back(0x90);     // nop
detourFunc.push_back(0x90);     // nop
detourFunc.push_back(0x90);     // nop

if(stackSize == 0)
{
    // In case of no arguments, just 'pop'
    detourFunc.push_back(0x5D); // pop %ebp
}

else 
{
    // Use 'leave' if we have arguments
    detourFunc.push_back(0xC9); // leave    
}

// Return function
detourFunc.push_back(0xC3);     // ret 
```

如果我指定零作为`stackSize`这将是输出：

```
55                      push   %ebp
89 e5                   mov    %esp,%ebp
e8 90 90 90 90          call   <address>
5d                      pop    %ebp
c3                      ret 
```

如您所见，这是完全有效的 32 位 ASM，如果它的参数为零且不需要“this”指针，它将充当“MyRedirect”。问题是，我想实现生成 ASM 代码的部分，具体取决于我指定的“重定向”函数将接收的参数数量。我已经在我的小 C++ 程序中成功地做到了这一点（破解了模式）。

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char * argv[])
{
    int val = atoi(argv[1]);

    printf("\tpush %%ebp\n");
    printf("\tmov %%esp,%%ebp\n");

    if(val == 0)
    {
        printf("\tcall <address>\n");
        printf("\tpop %%ebp\n");
    }

    else
    {
        printf("\tsub $0x%x,%%esp\n", val * sizeof(int));

        for(int i = val; i > 0; i--)
        {
            printf("\tmov 0x%x(%%ebp),%%eax\n", i * sizeof(int) + sizeof(int));
            printf("\tmov %%eax,0x%x(%%esp)\n", i * sizeof(int) - sizeof(int));
        }

        printf("\tcall <address>\n");
        printf("\tleave\n");
    }

    printf("\tret\n");
    return 0;
} 
```

此函数打印出与“objdump”生成的 ASM 代码完全相同的模式。所以我的问题是；如果我*只*想要上述重定向功能，无论参数如何，如果它仅在 Linux 32 位下，这在所有情况下都有效，还是我需要了解任何陷阱？例如; 生成的 ASM 是否会与“shorts”或“chars”不同，或者这会起作用（我只用整数测试过），以及如果我调用一个返回“void”的函数（这将如何影响 ASM）？

我可能已经解释了一切有点模糊，所以请询问而不是任何误解:)

注意：我不想知道替代方案，我喜欢我当前的实现，并认为这是一个非常有趣的实现，我非常感谢你在这个主题上的帮助。

编辑：如果有兴趣，这里是上述 C++ 代码的一些转储：[链接](http://pastebin.com/gLxVzwya)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T09:14:26.277

正如 Dan 建议的那样，您需要将内存标记为可执行文件。[我写了一些你可以使用的代码](http://codepad.org/oUg4y6Pe)。（它适用于 GNU/Linux 和 Windows。）如果您打算从不支持 ARM、x86-64 或其他平台，那么我看不到您的代码有任何缺陷（添加了可执行部分），而且似乎它应该“始终有效”。（当然，假设其他一切都正常工作。）

```
#include <sys/mman.h>

...

n = <size of code buffer>;
p = mmap(0, n, PROT_READ|PROT_WRITE|PROT_EXEC, MAP_ANON|MAP_PRIVATE, 0, 0); 
```

'fish' 建议你使用[asmjit](http://code.google.com/p/asmjit/)。我必须同意这一点；它比你的方法更便携。但是，您说您对替代品不感兴趣。

您可能对一种叫做“ [Thunking](http://www.codeproject.com/Articles/16785/Thunking-in-Win32-Simplifying-Callbacks-to-Non-sta) ”（一种）的东西感兴趣。它基本上试图完成“用 C++ 方法替换 C 回调”。这实际上非常有用，但对于您的应用程序来说并不是一个好的设计。

希望有帮助。

# jsf - Myfaces CODI DefaultErrorView - 任何地方的示例？

> ID：10466137
> 
> 赞同：0
> 
> 时间：2012-05-05T21:27:30.180
> 
> 标签：jsf, codi

我在 Myfaces CODI 中看到了对[DefaultErrorView](https://cwiki.apache.org/confluence/display/EXTCDI/JSF+Usage#JSFUsage-%28Security%29Errorpages)的引用，但像往常一样，文档将一切都留给了想象。我真的发现 CODI 是一个很棒的 JSF 插件，但它会从一些示例中受益匪浅。

可能我天真地希望能够使用以下代码捕获可怕的 ViewExpiredException：

```
@Page(basePath = "/defaultErrorPage.xhtml")
public final class DefaultErrorPage extends DefaultErrorView {

} 
```

...但是会话超时后发生的所有事情是，当我尝试发出 get 请求（单击 ah:link）时，容器安全性会将我带到登录页面。有谁知道我可以用这个 DefaultErrorView 做什么，有人举个例子吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T00:52:46.573

在 DefaultErrorView 的 JavaDoc 中，您会看到：

> ...
> 
> 扩展此类的类也将用作错误视图以防安全违规（如果没有通过 {@link org.apache.myfaces.extensions.cdi.core.api.security.Secured 配置的特殊错误视图#errorView()})

在 Wiki 中，您会看到例如：

> @安全
> 
> ...
> 
> 如果发生违规，CODI 将使用 DefaultErrorView 作为导航目标（如果已配置）。
> 
> ...

和

> （安全）错误页面
> 
> 以下示例显示了如何创建默认错误页面。只允许为每个应用程序提供一个默认错误页面。需要实现 DefaultErrorView 接口，而不是实现 ViewConfig。
> 
> ...

以及手动使用：

> ...
> 
> this.viewNavigationHandler.navigateTo(DefaultErrorView.class);
> 
> ...

Wiki 还链接了一个很好的示例，您可以在其中找到： [http ://code.google.com/a/apache-extras.org/p/myfaces-codi-examples/source/browse/community/src/main/java/ org/apache/extras/myfaces/codi/examples/community/view/config/Pages.java](http://code.google.com/a/apache-extras.org/p/myfaces-codi-examples/source/browse/community/src/main/java/org/apache/extras/myfaces/codi/examples/community/view/config/Pages.java)

**-> 文档中的一切都很好；-)**

# windows - 如何在pygtk中将默认对齐方式更改为左对齐？

> ID：10466138
> 
> 赞同：0
> 
> 时间：2012-05-05T21:27:50.343
> 
> 标签：windows, gtk, pygtk, glade

我使用 pygtk 制作的每个程序默认情况下都是右对齐的（可能是因为我的默认语言是从右到左的语言？）我该如何更改它？ ![pygtk 右对齐示例](../Images/3d20325474e18151b4efec2ca0f806cb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T13:46:59.543

容器中小部件的方向取决于语言环境。您可以通过设置 LANG 环境变量来更改 Windows 上的区域设置。

```
set LANG=en_US
something.py 
```

在 Linux 上，您可以使用以下命令执行相同操作

```
export LANGUAGE=en_US
something.py 
```

或者干脆

```
LANGUAGE=en_US something.py 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T01:07:03.537

如果您想调整小部件（例如窗口）内小部件的方向，无论系统区域设置如何：

```
widget.set_direction(gtk.TEXT_DIR_LTR) 
```

并更改应用程序内所有内容的默认方向：

```
gtk.widget_get_default_direction(gtk.TEXT_DIR_LTR) 
```

或 gtk.TEXT_DIR_RTL 而不是 LTR

# php - 是什么导致php中的文件上传限制问题？

> ID：10466140
> 
> 赞同：2
> 
> 时间：2012-05-05T21:28:06.640
> 
> 标签：php, file-upload

我正在 Linux 中阅读这一行。但是，当我在浏览器中回显这个时，什么都没有出现。我使用回声线的方式有问题吗？

```
// relevant code snippets
$mypic = $_FILES['upload']['name'];
$temp = $_FILES['upload']['tmp_name'];
$type = $_FILES['upload']['type'];

/*$finfo=finfo_open(FILEINFO_MIME_TYPE);
$type=finfo_file($finfo,$temp);
finfo_close($finfo);*/

echo "<pre>"; print_r($_FILES);
echo $mypic."<br />";
echo $type."<br />";
echo $_FILES['upload']['error']."<br />";
echo var_dump($type)."<br />"; 
```

如果您怀疑我在另一个文件中处理文件输入的方式有问题，我已将该 php 文件包含在[此链接](https://gist.github.com/aa70d1d4fee856ac3e86)中。

```
<form ENCTYPE="multipart/form-data" method="post" action="insert.php">

Name: <input type="text" name="name" maxlength="15" /><br />
Email: <input type="text" name="email" maxlength="30" /><br />
Password: <input type="password" name="password" maxlength="15" /><br />
Confirm Password: <input type="password" name="cpassword" maxlength="15" /><br />

<input type="hidden" name="MAX_FILE_SIZE" value="10000">
Choose your picture: <input type="file" name="upload"><p>
<input type="submit" name="submit" value="Register" /><br />

<p>
<center><h3><?php include("links.php"); ?></h3></center>

</form> 
```

这是我看到的打印输出：

> 数组（[上传] => 数组（[名称] => 抗议.jpg [类型] => [tmp_name] => [错误] => 2 [大小] => 0）
> 
> ) 抗议.jpg
> 
> 2字符串（0）“”

------------------更新至 2012 年 5 月 5 日晚上 9:40------------------ ----

试了一个图标，发现除了权限设置没有问题（我觉得暂时可以自己解决）。但是，我仍然坚持设置文件大小。我按照彼得斯图尔特的指示得到了以下打印输出：

![在此处输入图像描述](../Images/6387b6f549b8b88852f219f1569b542b.png)

显然，这两个设置中的文件大小限制足以处理我拥有的原始图像（小于 200 kb）。我不知道在这种情况下我还能做些什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T22:08:13.133

文件类型为空，原因与文件大小为 0 错误为 2 相同。

从[错误消息解释](http://us.php.net/manual/en/features.file-upload.errors.php)：

> UPLOAD_ERR_FORM_SIZE 值：2；上传的文件超出了 HTML 表单中指定的 MAX_FILE_SIZE 指令。

您将最大大小设置为`10000`，以字节为单位，因此大约为 10Kb。如果它是在任何现代数码相机（超过 4mgpx）上拍摄的照片，它可能需要至少是该尺寸的十倍。暂时忽略最大尺寸，直到您获得人们提交的图像尺寸的粗略平均值。PHP 有自己的最大上传大小，以避免占用太长时间。

为避免将来出现此类问题（不知道文件上传是否成功），您可能希望将代码包装在以下内容中：

```
$upload_error[0] = "AOK";
$upload_error[1] = "Server says: File too big!";
$upload_error[2] = "Browser says: File too big!";
$upload_error[3] = "File upload didn't finish.";
$upload_error[4] = "Ummm.... You forgot the file.";
$upload_error[6] = "Oops.  Webmaster needs to fix something.";
$upload_error[7] = "Server says: I'm stuffed. Email webmaster.";
$upload_error[8] = "Server says: Not gonna do it.  Webmaster needs to fix something.";

if($_FILES['upload']['error'] == 0) {
   //do your thing and move it to the database.
} else {
    $error_num = $_FILES['upload']['error'];
    echo $upload_error[$error_num];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T22:12:28.420

我会在你的 PHP ini 文件中检查你的 PHP 上传大小限制。它可能会导致不利的问题:)

如果您创建或进入您的 php.ini 文件并确保设置如下：

```
upload_max_filesize = 5M

post_max_size = 5M 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-13T19:28:17.783

这个问题已经有 7 年了，但我没有找到明确的程序来理解它。这就是我控制它的方式：

缺点是我可以上传小图像（小于 2MB）但不大于 2MB。完美识别错误很重要。在这种情况下，"UPLOAD_ERR_FORM_SIZE:" DEBUG 中的错误是***$_FILES["image"]["type"] = ""***，（荒谬）我知道那肯定是一个 .JPG 图像。

解决方案：使用 XAMPP，停止它。配置 php.ini，转到“upload_max_filesize=2M”，这意味着您尝试上传的文件有 2 MB 的限制，因此您将其更改为（例如）3M。之后，我再次启动 XAMPP，并继续上传 2.5 MB 的图像，并且成功。

抱歉，我的状态无法在此评论中显示配置图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-26T17:25:40.053

设置的顺序也很重要，应该是这样的

```
upload_max_filesize = 5M
post_max_size = 5M 
```

`post_max_size`而且我在之前放置 时总是遇到最大尺寸错误`upload_max_filesize`。

# matlab - Matlab 编辑文本框 - 显示提示？

> ID：10466143
> 
> 赞同：2
> 
> 时间：2012-05-05T21:28:20.680
> 
> 标签：matlab, user-interface

使用 Matlab GUI 时，有没有办法在编辑文本框中放置“提示”？也就是说，一旦用户开始输入，文本就会消失？我在 Android 中使用过类似的功能，但我对其他 GUI 不太熟悉，所以我不确定这个功能的普及程度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T17:34:48.733

这在 Matlab 中是可能的，但您必须定义一个 custom `MouseClickCallback`，它只能使用Yair Altman 的[findjobj](http://www.mathworks.com/matlabcentral/fileexchange/14317)访问（使用链接从 Matlab File Exchange 下载它并将其保存在您的 Matlab 路径中的某个位置）。

因为我喜欢这个想法，所以我编写了一个函数来方便地处理所有这些。它会创建一个灰显的斜体帮助文本，一旦单击编辑框就会消失。

![在此处输入图像描述](../Images/b75e07cba5f284bf28de7c1b60737bce.png)

```
function setInitialHelp(hEditbox,helpText)
%SETINITIALHELP adds a help text to edit boxes that disappears when the box is clicked
%
% SYNOPSIS: setInitialHelp(hEditbox,helpText)
%
% INPUT hEditbox: handle to edit box. The parent figure cannot be docked, the edit box cannot be part of a panel.
%       helpText: string that should initially appear as help. Optional. If empty, current string is considered the help.
%
% SEE ALSO uicontrol, findjobj
%
% EXAMPLE   
%           fh = figure;
%           % define uicontrol. Set foregroundColor, fontAngle, before 
%           % calling setInitialHelp
%           hEditbox = uicontrol('style','edit','parent',fh,...
%             'units','normalized','position',[0.3 0.45 0.4 0.15],...
%             'foregroundColor','r');
%           setInitialHelp(hEditbox,'click here to edit')
%

% check input
if nargin < 1 || ~ishandle(hEditbox) || ~strcmp(get(hEditbox,'style'),'edit')
    error('please supply a valid edit box handle to setInitialHelp')
end

if nargin < 2 || isempty(helpText)
    helpText = get(hEditbox,'string');
end

% try to get java handle
jEditbox = findjobj(hEditbox,'nomenu');
if isempty(jEditbox)
    error('unable to find java handle. Figure may be docked or edit box may part of panel')
end

% get current settings for everything we'll change
color = get(hEditbox,'foregroundColor');
fontAngle = get(hEditbox,'fontangle');

% define new settings (can be made optional input in the future)
newColor = [0.5 0.5 0.5];
newAngle = 'italic';

% set the help text in the new style
set(hEditbox,'string',helpText,'foregroundColor',newColor,'fontAngle',newAngle)

% add the mouse-click callback
set(jEditbox,'MouseClickedCallback',@(u,v)clearBox());

% define the callback "clearBox" as nested function for convenience
    function clearBox
        %CLEARBOX clears the current edit box if it contains help text

        currentText = get(hEditbox,'string');
        currentColor = get(hEditbox,'foregroundColor');

        if strcmp(currentText,helpText) && all(currentColor == newColor)
            % delete text, reset color/angle
            set(hEditbox,'string','','foregroundColor',color,'fontAngle',fontAngle)
        else
            % this is not help text anymore - don't do anything
        end

    end % nested function

end % main fcn 
```

# iphone - Sqlite for iOS - fts 表中的重音（波浪号）不敏感匹配

> ID：10466144
> 
> 赞同：0
> 
> 时间：2012-05-05T21:28:24.800
> 
> 标签：iphone, ios, sqlite

我在 iphone 的 sqlite 中启用了 fts 并尝试了这个并且工作正常，虽然很慢：

```
SELECT field FROM table_fts WHERE replace(replace(replace(replace(replace(lower(field), 'á','a'),'é','e'),'í','i'),'ó','o'),'ú','u') LIKE replace(replace(replace(replace(replace(lower('%string%'), 'á','a'),'é','e'),'í','i'),'ó','o'),'ú','u') 
```

但是当我想使用 MATCH 时它不起作用，它没有给我带来结果并且没有错误

```
SELECT field FROM table_fts WHERE replace(replace(replace(replace(replace(lower(field), 'á','a'),'é','e'),'í','i'),'ó','o'),'ú','u') MATCH replace(replace(replace(replace(replace(lower('string'), 'á','a'),'é','e'),'í','i'),'ó','o'),'ú','u') 
```

是否有任何错误或是否有任何其他方法可以让我进行波浪号不敏感搜索？我在网上查看了答案，但没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T03:33:55.153

两种方法：

首先，您可以违反标准格式并将列添加到包含可搜索字段的仅 ASCII 表示的表中。此外，在对这个辅助搜索列进行搜索之前，您还可以从正在搜索的字符串中删除国际字符（这样您就可以在具有仅 ASCII 表示的字段中查找仅 ASCII 字符串）。

顺便说一句，如果您想要使用 ASCII 对国际字符进行更通用的转换，您可以尝试以下操作：

```
- (NSString *)replaceInternationalCharactersIn:(NSString *)text
{    
    NSData *stringData = [text dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

    return [[[NSString alloc] initWithData:stringData encoding:NSASCIIStringEncoding] autorelease];
} 
```

其次，您大概可以`sqlite3_create_function()`用来编写您自己的函数（大概调用上述的排列），您可以在您的 SQL 语句本身中使用它。请参阅[SQLite 文档](http://www.sqlite.org/faq.html#q18)。

**更新：**

顺便说一句，鉴于您正在执行 FTS，该`sqlite3_create_function()`方法可能是不可能的，但令我震惊的是，您可以在包含纯 ASCII 字符串的字段上执行 FTS，或者编写自己的[标记](http://sqlite.org/fts3.html#tokenizer)器来执行这些操作.

# r - R中的网络连接图

> ID：10466151
> 
> 赞同：2
> 
> 时间：2012-05-05T21:29:09.260
> 
> 标签：r, geolocation, social-networking

我想在 R 中创建一个网络连接世界地图。我有一个节点的经度和纬度，但我只有另一个节点的城市和州/国家。ggplot 或 RGoogleMaps 仍然可以使用它吗？我应该怎么办？我在 Windows 中工作。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-06-05T12:56:44.237

If you have the city and state/country for the other node, you can get the longitude and latitude using the Googlemaps API in Python. Suppose you have your list of city names in a CSV file, then you can just loop through them one at a time, retrieving the longitude and latitude and writing it to a new file. The results can then be loaded into R as a data frame.

Here is the sample Python code:

```
from googlemaps import GoogleMaps
import csv

ifile=csv.reader(open('CapitalCities.csv','rb'),delimiter=',')
ofile=open('CapCoordinates.csv','wb')

w=csv.writer(ofile,delimiter=',')
w.writerow(['Name','State','Latitude','Longitude'])

gmaps=GoogleMaps(API_KEY)

count=0

for row in ifile:
   if count!=0:
      address=str(row[0])+" "+str(row[1])
      lat, lng = gmaps.address_to_latlng(address)
      w.writerow([str(row[0]),str(row[1]),str(lat),str(lng)])
      print row[0],lat,lng

   count+=1

ofile.close() 
```

There are also methods for doing the same thing in R. A quick read of this post might prove useful: [http://forgetfulfunctor.blogspot.com.au/2012/02/undiscovered-country-tutorial-on.html](http://forgetfulfunctor.blogspot.com.au/2012/02/undiscovered-country-tutorial-on.html)

# security - 使用 PhoneGap 创建移动应用程序时的安全注意事项

> ID：10466154
> 
> 赞同：13
> 
> 时间：2012-05-05T21:30:18.380
> 
> 标签：security, cordova

我是使用 phonegap 创建移动应用程序的初学者。在使用 phonegap 创建移动应用程序时，我对安全方面有一些疑问。

1.  我想创建一个访问 Web 服务的应用程序，例如使用 Jersey 创建的 REST 服务。现在，我认为黑客可以很容易地看到使用的安全密钥/身份验证机制，通过服务器（将使用 REST API）对客户端（在移动应用程序上）进行身份验证，我是否正确？

2.  一般来说，黑客能否轻松访问移动应用程序（使用 phonegap 创建的）发送的所有数据？

3.  黑客可以拆解phonegap应用程序以获取原始代码吗？他不会得到本机代码（例如，在 ios 的情况下是 Objective C）吗？或者他甚至可以将其反编译成原始的phonegap代码（即html + js）？如何防止我的代码被反编译？这种情况是否与大多数其他语言相同，即拥有强大 PC 的黑客可以入侵几乎任何程序/软件？有什么方法可以防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-07T15:03:50.210

好吧，先深呼吸。你可能不会喜欢我的一些答案，但你会遇到和我们一样的问题。

1.  在这种情况下，最好的办法是使用[KeyChain](https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/Keychain)插件之类的东西从本机端检索您的安全密钥。

2.  您可以将 PhoneGap 排除在外，因为它适用于您在客户端和服务器之间发送未加密数据的任何情况。任何人都可以使用包括 Wireshark 或 Ethereal 在内的多种工具轻松收听。如果您需要与服务器通信，则应在加密的 HTTPS 或 SSL 连接上完成。

3.  首先，我认为您误以为 PhoneGap 会将您的 HTML/JS 代码编译成 Obj-C。它不是。如果用户解压缩您的应用程序，他们将能够读取您的 HTML/JS。此外，他们还能够反编译您的 Obj-C 代码。这不需要强大的 PC 甚至是经验丰富的黑客。几乎任何人都可以做到。

我给你的建议是不要担心。花时间创建一个真正出色的应用程序。为它买单的人会为它买单。反编译它的人无论如何都不会购买该应用程序。您尝试与黑客作战所花费的时间越多，您可以用来使您的应用程序变得更好的时间就越少。此外，大多数反黑客措施只会让实际用户的生活更加艰难，因此实际上它们会适得其反。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-15T05:51:20.233

**TLDR -** 考虑到您正在编写一个网站，并且所有代码（html 和 js）对于使用 [Crtl+Shift+i 的用户来说都是可见的，就像在浏览器](https://www.howtogeek.com/416108/how-to-view-the-html-source-in-google-chrome/#:%7E:text=Inspect%20Source%20Using%20Developer%20Tools&text=Open%20Chrome%20and%20head%20to,the%20webpage%20you%27re%20viewing.)
中一样 确保最大安全性的一些要点

1.  如果您使用后端，请重新检查来自应用程序的所有内容

2.  [网站上所有可能的攻击（XSS、重定向到恶意网站、克隆网站等都是可能的）](https://research.securitum.com/security-problems-of-apache-cordova-steal-the-entire-contents-of-the-phone_s-memory-card-with-one-xss/)

3.  发送到应用程序的所有数据最终将在一些 js 变量/资源文件中可用，因为所有变量都可以被黑客访问，所以即使您使用最安全的数据传输机制，所有发送到应用程序的数据也是如此

4.  正如西蒙在他的回答中正确所说，phonegap 或 cordova 不会*将*html/js 转换为本地代码。Html / Js 按原样可用*Cordova*
    在其官方声明中也明确提到了这一点

> **不要假设您的源代码是安全**
> 的 由于 Cordova 应用程序是由打包在本机容器中的 HTML 和 JavaScript 资产构建的，因此您不应认为您的代码是安全的。可以对 Cordova 应用程序进行逆向工程。

5.主要是网站用来防止其代码被克隆/易于理解的所有技术即使在这里也适用（主要包括将js代码转换为难以阅读的格式-混淆代码）
6.比较原生应用程序与cordova/phonegap应用程序原生应用程序，我会说科尔多瓦对黑客来说更容易，只是因为科尔多瓦开发人员之间缺乏意识，他们没有采取足够的措施来保护它，并且缺乏现成的（一键式）机制来直接混淆代码与 android proguard

**示例 Cordova 应用程序黑客（注意：Phonegap 也以类似的方式工作）**

我将展示一个示例来展示黑客破解cordova应用程序是多么容易（开发人员没有努力混淆代码）
基本上我们从解压缩apk文件开始（apk可以像zip文件一样解压缩）
内容内部将与此类似 [![在此处输入图像描述](../Images/5bd3f29b2c124cab81b76bbf436d68d2.png)](https://i.stack.imgur.com/jgUtj.jpg) Cordova 应用程序的源代码存在于 /assets/www/ 文件夹中 您可以看到所有内容，包括与应用程序一起打包的任何数据库都是可见的（请参见最后 2 行有一个 db 文件） 除了它，任何其他资源也直接可见（文本文件/js/html/音频/视频/等）所有视图/控制器也是可见和可编辑的进一步探索内容我们找到一个 PaymentController.js 文件 ***打开它我们可以直接查看js代码和其他注释***[![在此处输入图像描述](../Images/4165838ea60d45dcee8fe00b8b83b891.png)](https://i.stack.imgur.com/ll4Qq.jpg)

[![在此处输入图像描述](../Images/22257b4ef92c52c7ecb8b22365831c6d.png)](https://i.stack.imgur.com/GChoh.jpg)

 **[![在此处输入图像描述](../Images/2cd64b56fae0fc608d109102b4dda743.png)](https://i.stack.imgur.com/ZPPab.jpg)
这里我们注意到，在用户执行支付后，如果成功则调用successCallback，否则调用cancelCallback。** 

 **黑客可以简单地替换这两个函数，以便在支付不成功时调用successCallback。
在没有其他检查的情况下，黑客已成功绕过付款。**

# html - @fontface 不适用于 IE9

> ID：10466155
> 
> 赞同：1
> 
> 时间：2012-05-05T21:30:24.727
> 
> 标签：html, css, internet-explorer, font-face

我的网页菜单有字体。除 Internet Explorer 外，所有浏览器都可以正常加载。这是我在我的css中使用的：

```
@font-face{
   font-family: 'MyriadProSemibold';
   src: url('fonts/MyriadPro-Semibold.eot');
   src: local(MyriadPro-Semibold), url('fonts/MyriadPro-Semibold.otf') format('opentype');
} 
```

字体位于名为 fonts 的文件夹中，该文件夹与 css 文件位于同一文件夹中。我不知道如何调试这个问题是否有人可以指出需要做什么才能使它们适用于 IE9？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T21:35:25.667

我建议您将 opentype 文件放入[font-face generator](http://www.fontsquirrel.com/fontface/generator)。单击生成并下载`.zip`您获得的文件。

将字体复制到您的虚拟主机并将 stylesheets.css 中的 CSS 样式复制到您的样式表中，您可以更改名称并且需要将路径更正为新路径。现在它可以在 FireFox 3.5+、Chrome4+、Opera10+、iPad、iPhone、IE4+ (!) 和 Safari3.1+ 上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T21:36:33.033

这是我使用的字体格式：

```
@font-face {font-family: 'MyriadProSemibold';
src: url('MyriadProSemibold.eot');src: url('MyriadProSemibold.eot?#iefix') format('embedded-opentype'),url('MyriadProSemibold.woff') format('woff'),url('MyriadProSemibold.ttf') format('truetype');} 
```

# jquery - JQuery 多网站预览

> ID：10466156
> 
> 赞同：0
> 
> 时间：2012-05-05T21:30:38.480
> 
> 标签：jquery, this, each

我制作了一个处理 URL 并返回给定 url 的 Title、FirstImage 和 Description 的 php 脚本。在我的网站中，我想用预览替换的所有链接都有“replaced_link”类。我想这个功能应该可以工作，但它不能：

```
var $alinks = $('a.replaced_link');
$alinks.each(function(){
            $this=$(this);
            url = $this.attr('href');
                     $.ajax({
                            type:"GET",
                            url:"data.php?getlink="+url,
                            beforeSend: function(){
                                    $this.append('<img align=center src="images/loader_dark.gif">');
                            },
                            success: function(data){
                                    if (data) {
                                            $this.after(data);
                                            $this.remove();
                                    }
                            },
                            error: function(){
                                    $this.find('img').remove();
                            }
                    }); 
```

});

在单个链接上，它工作正常。如果有多个“a.replaced_link”，则所有先前的都将保持旋转加载，并且只有最后一个采用第一个链接（！！！）。如果我删除“$this.remove()”，所有链接都将附加在最后一个 a.replaced_link 中！我希望清楚.... 似乎 $this 没有拆分为“.each”上的不同对象如何解决？

Ps 我想删除对象，因为我可能需要多次触发此功能......而且我不想重新加载每个 URL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T21:34:13.377

[隐式全局](http://blog.niftysnippets.org/2008/03/horror-of-implicit-globals.html)在房子里！说

```
var $this = $(this); 
```

代替

```
$this = $(this); 
```

与 url obv 相同。

# php - 多个 INNER JOIN 不起作用

> ID：10466157
> 
> 赞同：1
> 
> 时间：2012-05-05T21:30:38.143
> 
> 标签：php, sql, join, pdo

我无法让两个 INNER JOINS 工作。当我只使用第一个 INNER JOIN 时正在显示数据，但当我添加第二个 INNER JOIN 时没有显示任何内容。

这是我在网址所在的位置使用的代码：**website.com/matchdetails/season/match_id**

```
 <?php
     $db = new PDO('mysql:host=db.xx.xx;dbname=xx','xx','xx'); 

     $sth = $db->prepare("
     SELECT *
     FROM 
         matchdetails AS md 
     INNER JOIN 
         players AS p
             ON 
             (p.player_id = md.player_id) 
     INNER JOIN
         matches AS m
             ON
             (m.match_id = md.match_id) 
              WHERE (CONCAT_WS('/', season, match_id)) = :season");
     $sth->execute(array(':season' => substr($_SERVER['PATH_INFO'], 1)));
     foreach($sth as $row) {?>
     <?php echo 'Name '. $row['name'] . '<br/>'; ?> 
     <?php echo 'Goals ', $row['goals'] . '<br/>'; ?> 
     <?php echo 'Assists ',$row['assists'] . '<br/>'; ?> 
     <?php echo 'VVO Score ',$row['vvo_score'] . '<br/>' . '<br/>'; ?> 
     <?php }?> 
```

我的数据库结构是：

**表匹配**

![在此处输入图像描述](../Images/aa3999bc57da6bf10034ed708cb2af74.png)

**表匹配详情**

![在此处输入图像描述](../Images/a18587961e82ec6c5b96ba41a97d163f.png)

**桌上玩家**

![在此处输入图像描述](../Images/84f070f6ee9053fdd6aec64623bfd653.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T23:02:48.340

在`ON (p.player_id = m.player_id)`中，m 是表 'matches' 并且 'matches' 没有名称为 'player_id' 的列。

# java - 通过在 JSP 页面中使用预先挂起的“get”来别名对象方法

> ID：10466159
> 
> 赞同：1
> 
> 时间：2012-05-05T21:30:58.907
> 
> 标签：java, jsp, jstl

我有一个`ArrayList`定制的豆子。我想通过调用 the 的方法然后覆盖它包含的对象来使用 jstl`join`函数。`ArrayList``toArray``ArrayList``toString`

有人说，没有什么能真正阻止我扩展类以包含我想向 JSP 公开的方法/属性的“get”。

所以，对于这个例子：

```
class MyArrayList extends ArrayList
{
  public Object[] getToArray()
  {
     return this.toArray();
  }
} 
```

好主意？

我一直在创建这样的类，考虑到可重用性，这让我想知道：是否存在一个库，它通过将有用的方法别名为“get”版本来简单地扩展许多核心 Java 类，以便可以使用它们在 JSP 中？

当然，这可能是我不太了解有关 JSP 的一些基本概念的另一种情况，但我认为只有具有“get”样式方法名称的 bean 类型类才能在 JSP 页面中使用，这纯粹是一种不便。如果是这样，请随时告诉我为什么这样的图书馆是个坏主意。基本上，如果像我描述的那样的库不存在，为什么不呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T23:00:28.917

至于您的具体功能要求，您可以创建一个自定义 EL`join()`函数，该函数采用`List`or `Collection`。

例如

```
package com.example;

import java.util.Collection;

public final class Functions {

     private Functions() {}

     public static <E> String join(Collection<E> collection, String separator) {
         StringBuilder builder = new StringBuilder();

         for (E element : collection) {
             if (builder.length() > 0) {
                 builder.append(separator);
             }

             builder.append(element);
         }

         return builder.toString();
     }

} 
```

您在文件中注册如下`/WEB-INF/functions.tld`：

```
<?xml version="1.0" encoding="UTF-8" ?>
<taglib 
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-jsptaglibrary_2_1.xsd"
    version="2.1">

    <tlib-version>1.0</tlib-version>
    <short-name>Custom Functions</short-name>
    <uri>http://example.com/functions</uri>

    <function>
        <name>join</name>
        <function-class>com.example.Functions</function-class>
        <function-signature>java.lang.String join(java.util.Collection, java.lang.String)</function-signature>
    </function>
</taglib> 
```

最终可以用作

```
<%@taglib prefix="f" uri="http://example.com/functions" %>

${f:join(bean.list, ', ')} 
```

或者，如果您碰巧在类路径中已经有[Apache Commons Lang](http://commons.apache.org/lang)，只需委托给它。

```
 <function>
        <name>join</name>
        <function-class>org.apache.commons.lang.StringUtils</function-class>
        <function-signature>java.lang.String join(java.util.Collection, java.lang.String)</function-signature>
    </function> 
```

至于您最初的问题，我宁愿不将自定义公共方法添加到现有接口的自定义实现中，而是依赖于该自定义实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T07:55:11.817

EL 2.2 - 允许您调用任意方法（在 Tomcat 7 及更高版本中可用） - 应该可以满足您的需求。例如 ${someListObject.toArray()} 应该返回一个数组

# ruby - Ruby String.encode 仍然给出“UTF-8 中的无效字节序列”

> ID：10466161
> 
> 赞同：7
> 
> 时间：2012-05-05T21:31:11.567
> 
> 标签：ruby, encoding

在 IRB 中，我正在尝试以下操作：

```
1.9.3p194 :001 > foo = "\xBF".encode("utf-8", :invalid => :replace, :undef => :replace)
 => "\xBF" 
1.9.3p194 :002 > foo.match /foo/
ArgumentError: invalid byte sequence in UTF-8
from (irb):2:in `match' 
```

任何想法出了什么问题？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-05T21:50:59.967

我猜它`"\xBF"`已经认为它是用 UTF-8 编码的，所以当你调用 时`encode`，它认为你正在尝试用 UTF-8 编码一个 UTF-8 字符串并且什么都不做：

```
>> s = "\xBF"
=> "\xBF"
>> s.encoding
=> #<Encoding:UTF-8> 
```

`\xBF`不是有效的 UTF-8，所以这当然是胡说八道。但是，如果您使用 的三个参数形式[`encode`](http://ruby-doc.org/core/String.html#method-i-encode)：

> **编码（dst_encoding，src_encoding [，选项]）→ str**
> 
> [...] 第二种形式返回`str`转码 from `src_encoding`to的副本`dst_encoding`。

`encode`您可以通过告诉忽略字符串认为其编码是什么并将其视为二进制数据来强制解决此问题：

```
>> foo = s.encode('utf-8', 'binary', :invalid => :replace, :undef => :replace)
=> "�" 
```

从上面认为它是 UTF-8 的`s`在哪里。`"\xBF"`

您也可以使用[`force_encoding`](http://ruby-doc.org/core/String.html#method-i-force_encoding)on`s`强制它为二进制，然后使用两个参数`encode`：

```
>> s.encoding
=> #<Encoding:UTF-8>
>> s.force_encoding('binary')
=> "\xBF"
>> s.encoding
=> #<Encoding:ASCII-8BIT>
>> foo = s.encode('utf-8', :invalid => :replace, :undef => :replace)
=> "�" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-30T03:19:20.623

如果您只使用 ascii 字符，则可以使用

```
>> "Hello \xBF World!".encode('utf-8', 'binary', :invalid => :replace, :undef => :replace)
=> "Hello � World!" 
```

但是如果我们对在 ascii 中无效的有效 UTF8 字符使用相同的方法会发生什么

```
>> "¡Hace \xBF mucho frío!".encode('utf-8', 'binary', :invalid => :replace, :undef => :replace)
=> "��Hace � mucho fr��o!" 
```

哦哦！我们希望 frío 保持口音。这是一个保留有效 UTF8 字符的选项

```
>> "¡Hace \xBF mucho frío!".chars.select{|i| i.valid_encoding?}.join
=> "¡Hace  mucho frío!" 
```

同样在 Ruby 2.1 中有一个新方法`scrub`可以解决这个问题

```
>> "¡Hace \xBF mucho frío!".scrub
=> "¡Hace � mucho frío!"
>> "¡Hace \xBF mucho frío!".scrub('')
=> "¡Hace  mucho frío!" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T18:41:41.047

如果您使用显式代码页阅读源文本文件，则此问题已修复：

```
File.open( 'thefile.txt', 'r:iso8859-1' ) 
```

# windows-phone-7 - UI线程中的Live SDK Windows Phone 7 GetCompleted回调？

> ID：10466168
> 
> 赞同：0
> 
> 时间：2012-05-05T21:32:17.447
> 
> 标签：windows-phone-7

```
public class SyncHelper
{
    private LiveConnectClient client;
    public event EventHandler SyncStarted;
    public event EventHandler SyncCompleted;

    public SyncHelper(LiveConnectClient client)
    {
        this.client = client;
    }

    public void TrySync()
    {
        Debug.WriteLine("Beginning sync");
        OnSyncStarted();
        client.GetCompleted += OnGetCompleted;
        client.GetAsync("me/skydrive/files");
    }

    private void OnGetCompleted(object sender, LiveOperationCompletedEventArgs e)
    {
        Thread.Sleep(10000);
        Debug.WriteLine("Get Completed");
        client.GetCompleted -= OnGetCompleted;
        OnSyncCompleted();
        Debug.WriteLine("Sync completed");
    }

    private void OnSyncStarted()
    {
        if (SyncStarted != null)
            SyncStarted(this, new EventArgs());
    }

    private void OnSyncCompleted()
    {
        if (SyncCompleted != null)
            SyncCompleted(this, new EventArgs());
    }
} 
```

正在 UI 线程中调用 OnGetCompleted 函数，并且 UI 无响应。据我所知，我认为这些回调将在不同的线程中工作，我们必须使用调度程序将其发布到 UI 线程。有什么想法吗？帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:14:30.773

该`GetAsync`调用可能使用后台线程进行实际提取，但随后它试图通过在原始线程上下文中调用 Completed 回调来帮助您，因此您不必使用 Dispatcher。

你为什么要进入睡眠（10000）呢？回调说“嘿，我完成了”。此时，您应该根据需要更新 UI。如果您需要进行需要大量时间的进一步处理，请生成后台线程、线程池任务或使用另一个异步调用和另一个回调。

# php - 如何在我的 formHandler 中访问注入的服务？

> ID：10466171
> 
> 赞同：1
> 
> 时间：2012-05-05T21:32:58.713
> 
> 标签：php, symfony

我正在尝试在我的（FOSUserBundle）profileFormHandler 中使用 ewz_search.lucene 服务。我已经将 ewz_search.lucene 服务注入到 formHandler 服务中，如下所示：

```
application_sonata_user.form.handler.profile:
    class: Application\Sonata\UserBundle\Form\Handler\ProfileFormHandler
    arguments: ["@fos_user.profile.form", "@request", "@fos_user.user_manager", "@ewz_search.lucene"]
    scope: request
    public: false 
```

我想在处理程序中访问此服务，以便可以向用户名字段添加索引，我尝试过类似 $this->lucene->updateIndex()，但它不知道属性 $lucene。

参考资料： [https](https://github.com/excelwebzone/EWZSearchBundle) ://github.com/excelwebzone/EWZSearchBundle http://symfony.com/doc/current/book/service_container.html#referencing-injecting-services

# clips - 剪辑简单规则

> ID：10466173
> 
> 赞同：0
> 
> 时间：2012-05-05T21:33:40.567
> 
> 标签：clips

有没有人知道为什么会这样：

```
(defrule initx
      (declare(salience 90))
      =>
      (assert (blabla 10))
)

(defrule gigel
    (declare(salience 89))
      =>
      (printout t "test" crlf)
) 
```

不管用？当我删除第一条规则时，它起作用了。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T22:41:59.113

你看到的行为是什么？无论是否存在 initx 规则，gigel 规则的行为都是相同的。

```
CLIPS> 
(defrule initx
  (declare(salience 90))
  =>
  (assert (blabla 10)))
CLIPS> 
(defrule gigel
  (declare(salience 89))
  =>
  (printout t "test" crlf))
CLIPS> (reset)
CLIPS> (run)
test
CLIPS> (facts)
f-0     (initial-fact)
f-1     (blabla 10)
For a total of 2 facts.
CLIPS> (clear)
CLIPS> 
(defrule gigel
  (declare(salience 89))
  =>
  (printout t "test" crlf))
CLIPS> (reset)
CLIPS> (run)
test
CLIPS> (facts)
f-0     (initial-fact)
For a total of 1 fact.
CLIPS> 
```

# java - Android 无法使用 InputStreamReader 从 Url 返回的信息

> ID：10466182
> 
> 赞同：2
> 
> 时间：2012-05-05T21:35:05.607
> 
> 标签：java, android, url

我正在通过 url 将信息发送到 php 文件。当我在浏览器中键入 url 时，会显示正确的信息，但是我没有通过 InputStreamReader 获取此信息。

这是我的代码。

```
 try {
          URL url = new URL("http://example/example.php?userImage="
         + URLEncoder.encode(userImageString, "UTF-8") + "&userHeight="
         + URLEncoder.encode(userHeight,"UTF-8" ));
          Log.d("url", "" + url);
          Scanner in = new Scanner(new InputStreamReader(url.openStream()))
            .useDelimiter("\n");

          Log.d("hasnext?", "" + in.hasNext());
      while (in.hasNext()) 
      {
          Log.d("sent", in.next());
      }
      in.close();
    }
      catch(Exception e)
      {
          e.printStackTrace();
      }
 } 
```

HasNext 返回 false，它应该返回 true。有什么建议么？

我应该注意 userImageString 是 Base64 编码的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T22:44:22.093

1）你有访问互联网的权限吗？

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

2）我认为你可以用这个答案解决你的问题： [Make an HTTP request with android](https://stackoverflow.com/questions/3505930/make-in-http-request-with-android)

3）这是一个返回响应的有效http请求：

```
public String request(String fUrl){
    String page = "";
    try
    {
        HttpClient hc = new DefaultHttpClient();
        HttpPost post = new HttpPost(fUrl);
        HttpResponse response = hc.execute(post);

        if(response.getStatusLine().getStatusCode() == HttpStatus.SC_OK)
        {
            page = EntityUtils.toString(response.getEntity());
        }
    } catch(IOException e) {
        e.printStackTrace();
        System.out.println("Exception Thrown");
    }
    return page;
} 
```

# java - UI 在 Eclipse RCP 中使用 SWT 做了一些奇怪的事情

> ID：10466183
> 
> 赞同：0
> 
> 时间：2012-05-05T21:35:13.110
> 
> 标签：java, eclipse, swt, rcp

我已经绝望了，因为我无法在 Eclipse RCP 中修复我的用户界面。所以我希望你能帮助我。这是屏幕，我想很明显是什么在困扰我：http: [//imgur.com/QOf0O](http://imgur.com/QOf0O)

这是没有标签和文本的代码（我发布了第一个标签和文本，其余部分相同，setSize() 仅在每个部分的第一个标签上完成）：

```
Composite c = this.toolkit.createComposite(parent);
    c.setLayoutData(new GridData(GridData.FILL_HORIZONTAL));

    ColumnLayout columnLayout = new ColumnLayout();
    columnLayout.minNumColumns = 2;
    columnLayout.maxNumColumns = 2;
    c.setLayout(columnLayout);

Section leftUpSection = this.toolkit.createSection(c,
            Section.DESCRIPTION | Section.TITLE_BAR | Section.TWISTIE
                    | Section.EXPANDED);
    leftUpSection.addExpansionListener(new ExpansionAdapter() {
        @Override
        public void expansionStateChanged(ExpansionEvent e) {
            KundeEditor.this.form.reflow(true);
        }
    });
    leftUpSection.setText("Daten");
    leftUpSection
            .setLayoutData(new ColumnLayoutData(ColumnLayoutData.FILL));
    Composite leftUp = this.toolkit.createComposite(leftUpSection);
    leftUp.setLayout(new GridLayout(2, false));
            lblNachname.setSize(230, lblNachname.getSize().y);
        this.txtNachname = this.toolkit.createText(leftUp,
                this.kunde.getNachname(), SWT.LEFT | SWT.BORDER);
        this.txtNachname.setLayoutData(new GridData(GridData.FILL_HORIZONTAL));
        this.txtNachname.addModifyListener(listener);

Section leftDownSection = this.toolkit.createSection(c,
            Section.DESCRIPTION | Section.TITLE_BAR | Section.TWISTIE
                    | Section.EXPANDED);
    leftDownSection.addExpansionListener(new ExpansionAdapter() {
        @Override
        public void expansionStateChanged(ExpansionEvent e) {
            KundeEditor.this.form.reflow(true);
        }
    });
    leftDownSection.setText("Kontoinformation");
    leftDownSection.setLayoutData(new ColumnLayoutData(
            ColumnLayoutData.FILL));
    Composite leftDown = this.toolkit.createComposite(leftDownSection);
    leftDown.setLayout(new GridLayout(2, false));

Section rightSection = this.toolkit.createSection(c,
            Section.DESCRIPTION | Section.TITLE_BAR | Section.TWISTIE
                    | Section.EXPANDED);
    rightSection.addExpansionListener(new ExpansionAdapter() {
        @Override
        public void expansionStateChanged(ExpansionEvent e) {
            KundeEditor.this.form.reflow(true);
        }
    });
    rightSection.setText("Kontaktinformation");
    rightSection.setLayoutData(new ColumnLayoutData(ColumnLayoutData.FILL));
    Composite right = this.toolkit.createComposite(rightSection);
    right.setLayout(new GridLayout(2, false));

Section rightDownSection = this.toolkit.createSection(c,
            Section.DESCRIPTION | Section.TITLE_BAR | Section.TWISTIE
                    | Section.EXPANDED);
    rightDownSection.addExpansionListener(new ExpansionAdapter() {
        @Override
        public void expansionStateChanged(ExpansionEvent e) {
            KundeEditor.this.form.reflow(true);
        }
    });

    rightDownSection.setText("Mitgliedsinformation");
            rightDownSection.setLayoutData(new ColumnLayoutData(
            ColumnLayoutData.FILL));
    Composite rightDown = this.toolkit.createComposite(rightDownSection);
    rightDown.setLayout(new GridLayout(2, false)); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T03:23:58.230

我看不出您的代码有任何明显错误，但这是我对如何进行的建议：

1.  更改您的外部布局以使用具有两列的 GridLayout。没有理由使用 ColumnLayout。
2.  确保所有内容的命名一致（rightSection -> rightDownSection）。
3.  确保所有内容的格式一致

我认为，如果您仔细执行这些步骤，您会发现错误，这可能是一个简单的错误。我经常发现问题只是清理和简化代码。

# flash - 尽管坐标正确，但对象未添加到正确的位置

> ID：10466185
> 
> 赞同：1
> 
> 时间：2012-05-05T21:35:30.200
> 
> 标签：flash, actionscript, flash-cs5, tween, coordinate

我在 Actionscript 3 (Flash CS5) 中创建了一个程序，当您单击时，它会在舞台上生成一个 Egg（现在是一个圆圈），然后使用（编码）补间将 Egg 发送到您单击的位置。此外，它会对其进行缩放以尝试产生 3D 错觉。

我将 TweenEvent.MOTION_FINISH 添加到 Egg 的其中一个补间中，以检查运动何时完成。当它发生时，我创建一个新对象（称为 Splat），其坐标与原始鼠标单击的坐标相同。

**问题 1：** Splat 对象未添加到正确的位置，如下图所示。我检查了坐标，它们在 Egg 类和 Splash 类中都匹配。我还确保两个对象的注册点都在它们的中间。最后，我检查了是否是导致问题的比例，但即使我删除了补间比例，我也会遇到同样的问题。

（编辑：鸡蛋被放置在正确的位置。鼠标点击的原始坐标应该是它们应该是的。似乎只有星星物体被移位了。）

[http://i45.tinypic.com/24bj1h3.png](http://i45.tinypic.com/24bj1h3.png)

**问题 2：** Splat 对象按与 Egg 对象相同的比例缩小。为什么是这样？我没有（打算）使 Splash 依赖于 Egg。

这是相关的代码：

```
package  
{
import flash.display.MovieClip;
import flash.utils.Timer;
import flash.events.MouseEvent;

public class eggMain extends MovieClip
{
    import flash.events.Event;

    public function eggMain() 
    {
        stage.addEventListener(MouseEvent.CLICK, spawn);
    }

    function spawn(event)
    {
        for(var i:int = 0; i<1; i++)
        {
            trace("mX in main class = " + mouseX);
            trace("mY in main class = " + mouseY);
            var e:Egg = new Egg(mouseX, mouseY);
            addChild(e);

        }
    }
}
}

package  
{
import flash.display.MovieClip;
import fl.transitions.Tween;
import fl.transitions.easing.*;
import fl.transitions.TweenEvent;

public class Egg extends MovieClip 
{
    var stageWidth:int = 550;
    var stageHeight:int = 400;
    var buffer:int = 100;
    var mX = 0;
    var mY = 0;

    public function Egg(moX:int, moY:int) //mouseX, mouseY
    {
        mX = moX;
        mY = moY;
        trace("mX in Egg constructor: " + mX);
        trace("mY in Egg constructor: " + mY);

        spawnAtFixedPoint();
        animate();
    }

    function spawnAtFixedPoint()
    {
        this.x = stageWidth + buffer;
        this.y = stageHeight - buffer;
    }

    //Moves the egg in from the spawn point using tweens. Scales down on the way to give 3D illusion.
    function animate()
    {
        var xMovement:Tween;
        var yMovement:Tween;
        var xScale:Tween;
        var yScale:Tween;

        trace("mX in animate() = " + mX);
        trace("mY in animate() = " + mY);
        xMovement = new Tween(this, "x", Regular.easeOut, this.x, mX, 1, true); //obj, property, ease function, start, time, in seconds (true)
        yMovement = new Tween(this, "y", Regular.easeOut, this.y, mY, 1, true);
        xScale = new Tween(this, "scaleX", Regular.easeIn, 1, 0.1, 1, true);
        yScale = new Tween(this, "scaleY", Regular.easeIn, 1, 0.1, 1, true);

        //Checks when the object has finished animating (which mean the egg has landed)
        xMovement.addEventListener(TweenEvent.MOTION_FINISH, splat);
    }

    //Spawns a splat (currently a star) at the same coordinates as the egg
    function splat(event)
    {
        trace("mX in splat() = " + mX);
        trace("mY in splat() = " + mY);
        var s = new Splat(mX, mY);
        addChild(s);
    }

}
} 
```

**更新**：我创建了一个自定义 SplatEvent 并让我的主类监听它。偶数在 MOTION_FINISHED 处理程序中调度。有用！

虽然，我必须通过在主类中使用公共静态变量来传回 Egg 着陆的原始坐标来使其工作。就像在主类中一样：

```
public static var splatX:int;
public static var splatY:int; 
```

在 Egg 类中是这样的：

```
eggMain.splatX = mX;
eggMain.splatY = mY; 
```

我可以忍受它，但我不想使用全局变量。对此提出建议，尽管主要问题已得到解答。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T22:01:03.840

您正在鸡蛋实例中创建 splat，然后将其添加到鸡蛋的显示列表中。这意味着 splat（星形）是在蛋的坐标空间中创建的，因此会被蛋在舞台上的位置偏移。这也意味着 splat 继承了您对鸡蛋所做的任何转换，例如比例，因为它是转换后的鸡蛋实例的子对象。

更好的方法是在主类中监听鸡蛋的运动完成事件（看看事件冒泡）或从运动完成处理程序触发的自定义事件。收到该事件后，创建一个 splat 实例并将其添加到主类的显示列表中。

# ios - UIStoryBoard - 相同的 ViewController/Xib，不同的 segue 路径

> ID：10466187
> 
> 赞同：0
> 
> 时间：2012-05-05T21:36:10.787
> 
> 标签：ios, xcode, uistoryboard

这是我的场景：我有一个使用故事板的带有 TabBar 和 NavigationController 的应用程序。TabBar 有 item A 和 item B，两者都是相同的 UITableViewController 和单元格原型，它只从不同的位置获取信息。

如何识别它来自哪个 UIStoryBoardSegue？或者有更好的方法来做到这一点（可能重复 Xib 和 UIViewController）？

这是我的 UIStoryBoard 的图片：![UIStoryBoard](../Images/356d50a51d67f5f24e543bb96215d2e8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T21:41:13.533

我最近在做一个结构相同的项目，我添加了两个表格视图。但我认为可以有一个带有两个不同源视图的 tableview。您可以尝试使用导航控制器，当您推送到表格视图时，“返回”按钮会将您带回原点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T15:34:08.347

有两个导航控制器指向同一个表视图似乎很奇怪。为什么不直接复制 Story Board 中的 Table View 并使用相同的类？

# android - 自定义 CursorAdapter 不会显示数据

> ID：10466191
> 
> 赞同：0
> 
> 时间：2012-05-05T21:36:41.813
> 
> 标签：android, cursor, android-listview, android-cursoradapter

我已经实现了一个自定义`CursorAdapter`. 该适配器从 a 获取数据`Cursor`并将大部分数据存入`ListView`. 其中一个字段`ListView`需要来自不同表的数据，因此我需要再次查询数据库以在视图中设置该部分。我的`ListView`似乎正在工作，就像以前我在数据库中没有数据一样，它正确显示了我的空标签，`"no data in the db"`. 现在数据库中有数据，`ListView`什么都没有显示！这是我的自定义适配器：

```
 public class ScheduleAdapter extends CursorAdapter {

    private LayoutInflater mInflater;
    private int mHomeAway, mOppFK, mLocation, mWhen, mOutcome, mType, mPlayed;
    private String teamName;

    public ScheduleAdapter(Context context, Cursor c) {
        super(context, c);
        // TODO Auto-generated constructor stub

        mHomeAway = c.getColumnIndex(ScoreMasterDB.KEY_SCHHOMEAWAY);
        mOppFK = c.getColumnIndex(ScoreMasterDB.KEY_SCHOPPFK);
        mLocation = c.getColumnIndex(ScoreMasterDB.KEY_SCHLOCATION);
        mWhen = c.getColumnIndex(ScoreMasterDB.KEY_SCHWHEN);
        mOutcome = c.getColumnIndex(ScoreMasterDB.KEY_SCHOUTCOME);
        mType = c.getColumnIndex(ScoreMasterDB.KEY_SCHTYPE);
        mPlayed = c.getColumnIndex(ScoreMasterDB.KEY_SCHPLAYED);

        mInflater = LayoutInflater.from(context);
    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        // TODO Auto-generated method stub
        return mInflater.inflate(R.layout.schedule_main_list, parent);
    }

    @Override
    public void bindView(View view, Context context, Cursor cursor) {
        // TODO Auto-generated method stub

        TextView homeAway = (TextView) view.findViewById(R.id.tvVsAt);
        TextView oppName = (TextView) view.findViewById(R.id.tvScheduleListOpponent);
        TextView location = (TextView) view.findViewById(R.id.tvScheduleListLocation);
        TextView outcomeWhen = (TextView) view.findViewById(R.id.tvScheduleDateTimeResult);
        TextView gameType = (TextView) view.findViewById(R.id.tvScheduleType);

        ScoreMasterDB dbInfo = new ScoreMasterDB(context);
        try {
            dbInfo.open();
            teamName = dbInfo.getTeamName(cursor.getInt(mOppFK));
            dbInfo.close();

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        homeAway.setText(cursor.getString(mHomeAway));
        oppName.setText(teamName);
        location.setText(cursor.getString(mLocation));

        //set game time or outcome
        if(cursor.getInt(mPlayed) == 0){
            outcomeWhen.setText(cursor.getString(mWhen));

            //set text style for outcome
            if(cursor.getInt(mOutcome) == 1){
                outcomeWhen.setTextAppearance(context, R.style.greenWinText);
            }
        }

        gameType.setText(cursor.getString(mType));

    }
} 
```

这是我对这个适配器的调用：

```
// get schedule cursor
            scheduleInfo = dbInfo.getScheduleCursor(teamID, seasonID);
            startManagingCursor(scheduleInfo);

            ScheduleAdapter scheduleAdapter = new ScheduleAdapter(ScheduleMain.this, scheduleInfo);
            setListAdapter(scheduleAdapter); 
```

编辑：调用自定义适配器的活动应该显示团队的日程安排。它首先显示一个对话框来选择球队，然后显示另一个对话框来选择合适的赛季。然后它在数据库中查询具有匹配的 teamID 和 seasonID 的时间表。自定义adapter的原因是schedule会将对手列为整数外键，所以我需要查询adapter中的db来为对手获取合适的队名。

这是活动（有很多代码）

```
 package com.scoremaster.pro;

import android.app.Dialog;
import android.app.ListActivity;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.AdapterView.OnItemLongClickListener;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import android.widget.TextView;
import android.widget.Toast;

public class ScheduleMain extends ListActivity implements OnItemClickListener,
        OnClickListener, OnItemLongClickListener {

    Dialog selectTeam, selectSeason, newSeason;
    Cursor teamInfo, seasons, scheduleInfo;
    ScoreMasterDB dbInfo;
    ListView diaList, diaSeason;
    int teamID, seasonID;
    String teamNameG;
    Button addNewSeason;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setContentView(R.layout.schedule_main);

        selectTeam = new Dialog(ScheduleMain.this);
        selectTeam.setContentView(R.layout.schedule_main_dialog);
        selectTeam.setTitle("Select Team");

        dbInfo = new ScoreMasterDB(this);
        try {
            dbInfo.open();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        teamInfo = dbInfo.getTeamsCursor();
        startManagingCursor(teamInfo);

        if (teamInfo.getCount() == 0) {
            Intent createTeamIntent = new Intent(
                    "com.scoremaster.pro.CREATETEAM");
            createTeamIntent.putExtra("fromSchedule", true);
            startActivity(createTeamIntent);
        }

        String[] columns = { ScoreMasterDB.KEY_TEAMNAME };
        int[] to = { R.id.tvTeamSelectList };

        //Bundle scheduleBundle = getIntent().getExtras();
        //int whatToDo = scheduleBundle.getInt(")

        diaList = (ListView) selectTeam.findViewById(R.id.lvScheduleDialog);
        SimpleCursorAdapter teamListAdapter = new SimpleCursorAdapter(
                ScheduleMain.this, R.layout.team_select_list, teamInfo,
                columns, to);
        diaList.setAdapter(teamListAdapter);
        diaList.setOnItemClickListener(this);
        selectTeam.show();

    }

    // listview onClick events
    public void onItemClick(AdapterView<?> parent, View view, int position,
            long id) {
        // TODO Auto-generated method stub
        switch (parent.getId()) {
        case R.id.lvScheduleDialog:
            selectTeam.dismiss();
            teamInfo.moveToPosition(position);

            // set data on ScheduleMain
            TextView teamName = (TextView) findViewById(R.id.tvScheduleTeam);
            TextView teamAbbrev = (TextView) findViewById(R.id.tvScheduleAbbrev);
            TextView teamLevel = (TextView) findViewById(R.id.tvScheduleLevel);
            LinearLayout layTeam = (LinearLayout) findViewById(R.id.layScheduleTeam);
            Button bAddSchedule = (Button) findViewById(R.id.bAddGame);

            teamNameG = teamInfo.getString(1);

            teamName.setText(teamInfo.getString(1));
            teamAbbrev.setText(teamInfo.getString(2));
            teamLevel.setText(teamInfo.getString(3));
            bAddSchedule.setText("Add Game to Schedule");
            bAddSchedule.setClickable(true);

            teamID = teamInfo.getInt(0);

            // set button if no team
            if (teamInfo.getCount() == 0) {

            }

            // set listeners for bAddGame and laySheduleTeam
            bAddSchedule.setOnClickListener(this);
            layTeam.setOnClickListener(this);

            // get season information
            selectSeason = new Dialog(ScheduleMain.this);
            selectSeason.setContentView(R.layout.schedule_season_dialog);
            selectSeason.setTitle("Select Season");
            seasons = dbInfo.getSeasonsCursor(teamID);
            startManagingCursor(seasons);

            String[] columns = { ScoreMasterDB.KEY_SEANAME };
            int[] to = { R.id.tvTeamSelectList };

            // set select season dialog listview elements
            diaSeason = (ListView) selectSeason
                    .findViewById(R.id.lvSeasonDialog);
            SimpleCursorAdapter seasonListAdapter = new SimpleCursorAdapter(
                    ScheduleMain.this, R.layout.team_select_list, seasons,
                    columns, to);
            diaSeason.setAdapter(seasonListAdapter);
            diaSeason.setOnItemClickListener(this);
            diaSeason.setOnItemLongClickListener(this);

            // set add button listenter
            Button addSeason = (Button) selectSeason
                    .findViewById(R.id.bAddSeason);
            addSeason.setOnClickListener(this);

            // show dialog
            selectSeason.show();
            break;
        case R.id.lvSeasonDialog:
            // get seasonID
            selectSeason.dismiss();
            seasons.moveToPosition(position);
            seasonID = seasons.getInt(0);

            // get schedule cursor
            scheduleInfo = dbInfo.getScheduleCursor(teamID, seasonID);
            startManagingCursor(scheduleInfo);
            //scheduleInfo.moveToFirst();

            //String[] columns1 = {ScoreMasterDB.KEY_SEANAME};
            //int[] to1 = {R.id.tvScheduleAddVsAt};
            //SimpleCursorAdapter scheduleAdapter = new SimpleCursorAdapter(ScheduleMain.this, R.layout.schedule_main_list, seasons, columns1, to1);
            ScheduleAdapter scheduleAdapter = new ScheduleAdapter(ScheduleMain.this, scheduleInfo);
            setListAdapter(scheduleAdapter);
            break;

        }

    }

    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch (v.getId()) {
        case R.id.bAddSeason:
            selectSeason.dismiss();
            newSeason = new Dialog(ScheduleMain.this);
            newSeason.setContentView(R.layout.schedule_new_season);
            newSeason.setTitle("New Season");

            TextView teamName = (TextView) newSeason
                    .findViewById(R.id.tvNewSeasonTeamName);
            teamName.setText("Create new season for the " + teamNameG);

            addNewSeason = (Button) newSeason
                    .findViewById(R.id.bSubmitNewSeason);
            addNewSeason.setOnClickListener(this);
            newSeason.show();
            break;
        case R.id.bSubmitNewSeason:
            TextView seasonName = (TextView) newSeason
                    .findViewById(R.id.etNewSeasonName);
            String submitSeason = seasonName.getText().toString();
            if (submitSeason.equalsIgnoreCase("")) {
                Toast.makeText(ScheduleMain.this, "Please enter a season name",
                        Toast.LENGTH_SHORT).show();
            } else {
                try {
                    dbInfo.insertSeason(teamID, submitSeason);
                } catch (Exception e) {
                    e.printStackTrace();
                } finally {
                    Intent intent = getIntent();
                    finish();
                    startActivity(intent);

                }
            }

            break;
        case R.id.bAddGame:
            Intent addGame = new Intent("com.scoremaster.pro.ADDGAME");
            addGame.putExtra("teamID", teamID);
            addGame.putExtra("seasonID", seasonID);
            startActivity(addGame);

            break;
        case R.id.layScheduleTeam:
            selectTeam.show();
            break;
        }

    }

    public boolean onItemLongClick(AdapterView<?> parent, View view,
            int position, long id) {
        // TODO Auto-generated method stub
        if (parent.getId() == R.id.lvSeasonDialog) {
            seasons.moveToPosition(position);
            int rowID = seasons.getInt(0);
            dbInfo.removeSeason(rowID);
            selectSeason.dismiss();
            Intent intent = getIntent();
            finish();
            startActivity(intent);
            return true;

        } else {
            return false;

        }
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);
    }

} 
```

这是 DB 类中的 getScheduleCursor() 方法

```
 public Cursor getScheduleCursor(int teamID, int seasonID){
    String[] columnsSch = {KEY_ROWID, KEY_SCHHOMEAWAY, KEY_SCHOPPFK, KEY_SCHLOCATION,  KEY_SCHWHEN, KEY_SCHOUTCOME, KEY_SCHTYPE, KEY_SCHPLAYED}; 
    Cursor c = scoreMasterDB.query(DB_SCHEDULE_TABLE, columnsSch, KEY_SCHTEAMFK + "=" + teamID + " AND " + KEY_SCHSEASON + "=" + seasonID, null, null, null, null); 

    return c;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T01:14:38.103

在`ScheduleAdapter`，当膨胀视图时，使用`inflate()`不附加到根视图的版本：

```
@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    // TODO Auto-generated method stub
    return mInflater.inflate(R.layout.schedule_main_list, parent, false);
} 
```

另请注意，如果您`teamName`在原始游标中包含 （连同或替换`mOppFK`）而不是创建与数据库的新连接以在绑定视图时获取它会更好，因为您正在建立新连接并查询数据库对于添加到`ListView`.

**编辑：**您可以改进的事情：

**A）**`OnItemClickListener`当您需要将其传递给时，请使用匿名类型，而不是让您的活动实现（和其他接口） `setOnItemClickListener`：

```
diaList.setOnItemClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {

                }
            }); 
```

**B）**要执行`JOIN`（并避免在适配器内打开新连接），请使用 a`SQLiteQueryBuilder`来构建查询表达式：

```
SQLiteQueryBuilder qb = new SQLiteQueryBuilder();
qb.setTables("foo LEFT OUTER JOIN bar ON (foo.id = bar.foo_id)")

Cursor cursor = qb.query(...); 
```

**C）**不确定您要在这里做什么：

```
Intent intent = getIntent();
finish();
startActivity(intent); 
```

你想重新开始你的活动吗？为什么不再次打开第一个对话框？

**D）**`Intent`我觉得以这种方式创建一个新的更舒服：

```
Intent createTeamIntent = new Intent(this, CREATETEAM.class)); 
```

如果您在侦听器中，则不能使用`this`它作为上下文传递（因为它不引用活动）。在这种情况下，您可以在活动中声明一个属性：

```
Context context; 
```

初始化它`OnCreate`：

```
this.context = this; 
```

然后在需要时使用它，只需调用`context`.

# cassandra - Cassandra：备份整个密钥空间

> ID：10466192
> 
> 赞同：15
> 
> 时间：2012-05-05T21:36:54.653
> 
> 标签：cassandra, backup

我只是想知道在 Cassandra 中备份整个密钥空间的最佳方法是什么……你怎么看？

以前我只是将数据文件夹复制到我的备份硬盘中，但是在更新后我无法恢复数据库。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-05T23:32:02.913

最好的方法是做快照 ( `nodetool snapshot`)。[您可以在此Datastax 文档](https://docs.datastax.com/en/cassandra/2.0/cassandra/tools/toolsSnapShot.html)中了解有关其工作原理以及如何最好地使用它的很多信息（免责声明：我为 Datastax 工作）。

您需要确保已启用 JNA（可以在[此页面](https://docs.datastax.com/en/cassandra/2.0/cassandra/install/installJnaRHEL.html)上找到一些相关说明）。如果这样做，快照会*非常*快；它们只是与现有稳定器的硬链接。无需进行复制。如果您想以特定方式跟踪备份，您可以将快照与其他备份工具（或仅 rsync、cp 等）结合使用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-14T17:00:18.400

我编写了一个简单的 python 工具来自动化集群快照和备份并将它们存储在 S3 上。

[https://github.com/tbarbugli/cassandra_snapshotter](https://github.com/tbarbugli/cassandra_snapshotter)是 github 页面，在那里你也可以找到文档

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-06-03T00:33:50.157

除了阅读[Datastax 文档](http://www.datastax.com/docs/1.2/operations/backup_restore)之外，我还发现文章[“使用 amanda 增量备份 cassandra”](http://www.grulic.org.ar/~mdione/glob/posts/incrementally-backing-up-cassandra-with-amanda/)很有见地。这是关于如何使用增量备份和快照。

最后，它建议以下程序：

1.  完全备份
    *   删除旧的增量文件和符号链接。
    *   `nodetool snapshot`
    *   将所有快照文件符号链接到备份目录
    *   备份该目录取消引用符号链接。
    *   `nodetool clearsnapshot`并删除符号链接。
2.  增量备份（不要与 cassandra 的内置增量备份混淆）：
    *   `nodetool flush`
    *   将所有增量文件符号链接到备份目录。
    *   备份该目录取消引用符号链接。
3.  恢复
    *   恢复上次完整备份和所有增量。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-01-15T03:49:22.240

另一种选择是监视正在写入的 sstables，并增量备份这些文件。

例如，查看[表格快照](https://github.com/synack/tablesnap)。

从文档中：

Tablesnap 是一个脚本，它使用 inotify 来监控目录中的 IN_MOVED_TO 事件，并通过生成一个新线程将该文件上传到 Amazon S3 以及一个 JSON 格式的列表中的其他文件在目录中的时间来响应它们副本。

在运行 Cassandra 集群时，此行为非常有用，因为它允许对 SSTable 进行自动时间点备份。从理论上讲，tablesnap 应该适用于将文件写入某个临时位置，然后在将数据写入磁盘后移动到其最终位置的任何应用程序。Tablesnap 还假设文件一旦写入就不可变。

# jquery - 视频滑块的动画工作一次，然后失败

> ID：10466195
> 
> 赞同：1
> 
> 时间：2012-05-05T21:37:45.400
> 
> 标签：jquery, ios, html, function, ios5

我有一个视频滑块，当您单击相应的缩略图时，视频应该会淡入。当我在 chrome 中预览它时它可以工作，但是当我在 iPad (iOS5) 上尝试它时它会在一次后停止工作。

如果我删除淡入淡出（它实际上是一个动画），它会起作用，并且当它在使用时，视频仍然会播放，但它的 div 是黑色的。功能是

```
$(window).load(function(){
$('li', '.thumbs').on('click', function() {
    var numb = $(this).index(),
        videos = ['images/intro01.m4v', 'images/clip2.m4v', 'images/intro01.m4v', 'images/clip2.m4v', 'images/intro01.m4v', 'images/clip2.m4v'],
        myVideo = document.getElementById('myVid');
        myVideo.src = videos[numb]; 
        $('#myVid').hide();

    $(myVideo).animate({
        'opacity': '0'
        }, 000, function() {

        myVideo.load();
        $('#myVid').show();
        myVideo.play();

        $(myVideo).animate({
            'opacity': '1'
        }, 1000); 

    });
  });
}); 
```

我需要重置它还是什么？如果您能提供帮助，那将不胜感激，因为我在截止日期前，这是最后一部分。

基本上，它不是淡入淡出而是变成黑色。

# mysql - 写入后立即从数据库中选择

> ID：10466196
> 
> 赞同：1
> 
> 时间：2012-05-05T21:38:00.400
> 
> 标签：mysql, select

我需要在写入后立即选择插入数据库的最后一行。我有一个表单，在提交时会生成一个自动递增的密钥。然后我需要选择此密钥，以便我可以将其通过电子邮件发送给提交者。我尝试在执行插入后查询数据库，但我没有得到任何结果。我已经仔细检查了我的查询，它们本身是正确的。我错过了什么吗？我的代码如下所示：

```
$query = "INSERT INTO users VALUES (NULL, '".$name."', '".$email."')";
$result = $db->query($query);
$query = "SELECT MAX(userid) as userid FROM users";
$result = $db->query($query); 
```

我的问题是第二个`$result`不返回任何结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T21:39:51.320

$query = "SELECT LAST_INSERT_ID();";

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T21:40:06.937

你可以得到这样的值：

```
SELECT LAST_INSERT_ID(); 
```

[http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T21:41:07.707

使用这个函数，它选择最后插入的`auto_increment`id

```
mysql_insert_id(); 
```

# c# - 在运行时使用反射将事件标记为 NonSerialized

> ID：10466199
> 
> 赞同：1
> 
> 时间：2012-05-05T21:38:49.560
> 
> 标签：c#, serialization, reflection

如果我使用这些类型在 WPF 中显示数据，我在序列化通过 WCF mex 端点获取的类型时遇到问题。

这是因为自动生成的类型确实实现了 INotifyPropertyChanged 接口，并且因为 WPF 绑定订阅了它。

执行此操作的正常方法是将 [field: NonSerialized] 添加到事件声明中。我不想这样做，因为这些类是自动生成的。

我也不想切换到 DataContractSerializer，主要是因为我发现在所有其他情况下我使用的 BinaryFormatter 都相当方便。

我想做的是找到一个字段，在其中存储事件数据并将其标记为 NonSerialized 在序列化开始使用反射之前。

以下是我的问题：

1.  是否可以在运行时添加属性？
2.  如何找到与事件关联的字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T01:25:05.067

以下是我脑海中的一些想法。

1.  在序列化时使用 CodeDom 或 ILGenerator 创建动态代理类（不实现 INotifyPropertyChanged）。然后使用 AutoMapper 之类的东西将您的原始对象图映射到这些代理类上。

2.  如果您唯一真正的问题是事件订阅......并且您知道这些类是自动生成的（因此它们没有任何类型的事件特殊实现，也就是说，它们只使用普通的底层字段委托）。 ..您可以在序列化时暂时删除然后重新添加事件订阅。随机谷歌参考：[如何从 EventInfo 中获取委托对象？](https://stackoverflow.com/questions/3783267/how-to-get-a-delegate-object-from-an-eventinfo). 基本上，您可以获取所有当前事件订阅，清除委托，然后重新添加订阅.....或者您可以将底层委托字段设为空，然后在序列化完成后重新设置它。

3.  如果您不太关心性能，您可以使用 ISerializationSurrogate [http://msdn.microsoft.com/en-us/library/system.runtime.serialization.iserializationsurrogate.getobjectdata.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.iserializationsurrogate.getobjectdata.aspx) 反映您的所有 FieldInfos 对象和确保忽略委托类型的字段。

# android - 从电子邮件中打开附加的文本文件

> ID：10466200
> 
> 赞同：3
> 
> 时间：2012-05-05T21:38:51.320
> 
> 标签：android, android-intent

我想做的事情似乎很简单，但是我在某处遗漏了一些细节。我的目标是创建一个可以打开附加到电子邮件的文本文件的应用程序。我给自己发了一封电子邮件，其中附有一个文本文件，文件扩展名为 TRE。我创建了一个 android 应用程序，其意图在清单中指定，它将启动该应用程序。它做得很好。我在 OnCreate 函数中有代码来从意图中读取数据以获取文件名。这就是它变得奇怪的地方。当我打开电子邮件时，它会将附件保存到 temp-10.tre。但是，当应用程序打开时，它说文件名是 /4/4731/RAW。当然，当我尝试打开这个文件时，它说它无法打开它。我怀疑这个文件名不正确。

下面是清单代码：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".TREViewerActivity"
        android:label="@string/app_name" android:screenOrientation="landscape">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <intent-filter> 
            <action android:name="android.intent.action.VIEW" /> 
            <category android:name="android.intent.category.DEFAULT" /> 
            <data android:mimeType="*/*" /> 
            <data android:pathPattern=".*\\.tre" />     
        </intent-filter> 

    </activity>
</application> 
```

下面是我用来获取文件名的代码：

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    strFilename = "Not set";
    Intent intent = getIntent();
    if(intent != null)
    {
        Uri uri = intent.getData();
        if(uri != null)
        {
            strFilename = intent.getData().getPath();
            readFile();             
        }
    } 
```

以下是我用来打开文件的内容：

```
private void readFile()
{
    try
    {
        FileInputStream inFile = new FileInputStream(strFilename);
        inFile.close();
        Toast.makeText(getApplicationContext(),"File opened ok",Toast.LENGTH_SHORT).show();         
    }
    catch(Exception e)
    {
        Toast.makeText(getApplicationContext(),e.toString() +   e.getMessage(),Toast.LENGTH_SHORT).show();          
    }

} 
```

任何想法我做错了什么？

# arrays - 如何将对象数组中的属性 mongoexport 导出到 CSV？

> ID：10466203
> 
> 赞同：8
> 
> 时间：2012-05-05T21:39:53.607
> 
> 标签：arrays, mongodb, csv

我需要将数组中对象的值导出到 CSV。假设我的文件是：

```
{
    名称：“测试”，
    类型：[
        {类型：“A”}，
        {类型：“B”}，
                {类型：“C”}
    ]
}

```

我的目标是产生如下输出：

```
“测试”，“A”
“测试”，“B”
“测试”、“C”

```

以下也是可以接受的：

```
“测试”、“A、B、C”

```

我正在尝试通过 mongoexport 使用：

```
mongoexport -h localhost -d mydb -c mycollection -f name,types.type --csv
```

不幸的是，我得到：

```
“测试”，
```

我找到了有关引用特定数组元素的文档，例如“types.0.type”，但我的数组的长度是未知的。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T03:39:04.297

您必须编写一个自定义脚本，以迭代集合并以所需格式导出文档。内置的 mongoexport 不是为像你这样的用例而设计的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-18T00:18:32.340

您可以通过使用 MongoDb 的聚合管道操作来构建一个临时集合，其中包含您要导出的形状的数据，从而完成您正在尝试做的事情：

```
use mydb
db.mycollection.aggregate([ 
                          {$unwind: "$types"}, 
                          {$project: { _id: 0, name: 1, type: "$types.type" } }, 
                          {$out: "tmp4csv"} 
                          ]); 
```

这将创建一个 tmp4csv 集合，其中包含数组每个元素的文档

即在您的示例中（并添加一个 _id 值，因为在我建议的解决方案中必须考虑该值）

```
{   
    _id: ObjectId("54e3ce75cb87e6d036287cc6"),
    name:"test",
    types:[
        {type:"A"},
        {type:"B"},
        {type:"C"}
        ]
} 
```

通过使用 $unwind 运算符变为

```
{ _id: ObjectId("54e3ce75cb87e6d036287cc6"), name:"test", types:[ {type:"A"} ] },
{ _id: ObjectId("54e3ce75cb87e6d036287cc6"), name:"test", types:[ {type:"B"} ] },
{ _id: ObjectId("54e3ce75cb87e6d036287cc6"), name:"test", types:[ {type:"C"} ] } 
```

接下来，$project 运算符用于稍微改造数据 - 将 types.type 解包为 type 并为每个文档提供一个新的唯一 _id 值。

最后，聚合管道生成的文档使用 $out 运算符输出到“tmp4csv”集合中。如果没有在上一步中创建唯一的 _id 值，此步骤将由于重复键而失败。

然后，您可以将数据导出到输出文件：

```
mongoexport -h localhost -d mydb -c tmp4csv -f name,type --csv --out output.csv 
```

为了保持一切干净，我将删除作为其中一部分创建的 tmp4csv 集合：

```
use mydb
db.tmp4csv.drop() 
```

这应该会给你一个带有你喜欢的输出格式的 csv 文件。

参考：聚合管道文档：[http](http://docs.mongodb.org/manual/aggregation/) : //docs.mongodb.org/manual/aggregation/ 展开运算符，因为这是关键：[http ://docs.mongodb.org/manual/reference/operator/aggregation/unwind/](http://docs.mongodb.org/manual/reference/operator/aggregation/unwind/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T12:58:18.777

**如果您对Perl**感到满意，那么下[一篇文章](http://www.experts-exchange.com/A_10413.html)中的 ARJsonLib.pm 库将提供您创建自己的小玩具所需的大部分功能。请注意，文章中的版本是来自我一起破解的玩具的存根，它完全可以满足您的需求以及其他一些东西，但由于不是 mongoDB 文章，它缺少您需要的一个功能，它可以找到字段/键mongoDB 集合，并将它们存储在一个数组中，但重构起来很简单，只需给自己写一些东西，从你的集合中提取*n 个*文档，将它们推入一个数组并调用 findKeysInJsonColl()。无论如何，一些函数将使用 MongoDB 游标作为参数，并且：

```
convertToDojoGrid()
convertToExcel() 
```

**CSV**输出再次丢失，但添加回 convertToExcel() 很简单。

例如

```
...
my $iRows  = convertToExcel("/tmp/test.xlsx", $oMongoData, "", \@aOutFields, "xlsx");
... 
```

其中：$oMongoData 是一个 MongoDB 游标引用，@aOutFields 是一个数组，其中包含您希望出现在工作表中的字段/键，

# c# - 匹配 % 和 % 之间的任何 10 个字母数字组合

> ID：10466206
> 
> 赞同：1
> 
> 时间：2012-05-05T21:40:08.963
> 
> 标签：c#, regex

我有一个包含各种符号的字符串，但我需要一个位于 % 和 % 之间的 10 个字母数字子字符串 - 但一个字符串中可能有多个 % 和 % 的组合

示例：%bla1234bla% 或 %12aa22bb33% 等（我不需要 %）

我试过这个：

```
String resultString = Regex.Match(lnk, @"\[%\](.*?)\[%\]{10}").Value; 
```

它不起作用

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T21:40:57.967

试试这个正则表达式：

```
@"%[0-9a-zA-Z]{10}%" 
```

或这个：

```
@"%[^\W_]{10}%" 
```

> 我不需要 %

您可以使用捕获组来指定要捕获的部分：

```
@"%([0-9a-zA-Z]{10})%" 
```

在线查看它：[ideone](http://ideone.com/FIyuI)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T21:44:59.873

试试这个：

```
@"%[\da-zA-Z]{10}%" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T21:56:52.413

```
(?<=%)[\da-zA-Z]{10}(?=%) 
```

通过向前看和向后看，这将匹配 % 字符之间的 10 个字母数字字符，而不实际匹配 % 字符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-06T04:02:53.947

不确定是否需要正则表达式，但这似乎有效......

```
string[] stringArray = testString.Split('%')
                                 .Where(s => s.Length == 10)
                                 .ToArray(); 
```

# python - 类属性或参数的默认值

> ID：10466207
> 
> 赞同：3
> 
> 时间：2012-05-05T21:40:16.763
> 
> 标签：python

我在 Python 中找到了以下开源代码：

```
class Wait:

  timeout = 9

  def __init__(self, timeout=None):

    if timeout is not None:
        self.timeout = timeout
    ... 
```

我试图了解上面的代码与使用默认参数的值是否有优势：

```
class Wait:

   def __init__(self, timeout=9):
     ... 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-05T21:47:57.760

可以通过这种方式更改默认值：

```
Wait.timeout = 20 
```

这意味着，如果未设置，则默认值为 20。

例如：

```
>>> class Wait:
...     timeout = 9
...     def __init__(self, timeout=None):
...         if timeout is not None:
...             self.timeout = timeout
... 
>>> a = Wait()
>>> b = Wait(9)
>>> a.timeout
9
>>> b.timeout
9
>>> Wait.timeout = 20
>>> a.timeout
20
>>> b.timeout
9 
```

这利用了 Python 在找不到实例属性时会查找类属性的事实。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T22:06:00.020

从语义上讲，类属性就像将默认超时设置为类的公共接口的一部分。根据文档，可能会鼓励最终用户阅读或可能更改默认值。

相反，使用默认参数值强烈表明特定的默认值是一个实现细节，不要被类的最终用户摆弄。

# php - 用 PHP 替换 xml 节点的内容

> ID：10466211
> 
> 赞同：-1
> 
> 时间：2012-05-05T21:42:11.243
> 
> 标签：php, xml, replace, nodes

> **可能重复：**
> [一个简单的程序来 CRUD 节点和 xml 文件的节点值](https://stackoverflow.com/questions/4906073/a-simple-program-to-crud-node-and-node-values-of-xml-file)

所以我有这段代码，它位于 settings.xml 中：

```
<?xml version="1.0"?>
<settings>
    <user id="140">
        <about>About me</about>
        <music>My music</music>
        <interests>My interests</interests>
        <font>Arial</font>
        <theme>Default</theme>
    </user>
</settings> 
```

并且我想将 about ('About me') 的内容替换为 ('This is about me')，然后将其保存到原始文件中，因此之后它将包括以下内容：

```
<?xml version="1.0"?>
<settings>
    <user id="140">
        <about>This is about me</about>
        <music>My music</music>
        <interests>My interests</interests>
        <font>Arial</font>
        <theme>Default</theme>
    </user>
</settings> 
```

使用 PHP 怎么可能做到这一点？我尝试了一些东西，但它们没有按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T21:57:11.023

使用[SimpleXML](http://php.net/simplexml)轻松读取 XML 文件，您可以像编辑变量值一样编辑文本。要获取具有 id 的元素，`140`您需要使用 XPath，[一些解释](https://stackoverflow.com/a/4736714/1149495)。

# ios - NSNotificationCenter 标准实践？

> ID：10466213
> 
> 赞同：1
> 
> 时间：2012-05-05T21:42:32.100
> 
> 标签：ios, nsnotifications

是平衡“addObserver”的标准：

```
[[NSNotificationCenter defaultCenter] removeObserver:self] 
```

在 viewWillDisappear 方法中？

例如，当通过数据管理器类注册接收 NSURLConnection 事件的结果时，由 TabBar 的不同选项卡（单独的控制器）触发。每个控制器在 viewDidLoad 中注册以接收到“通知”结果。每个控制器也应该注销吗？看来，如果所有人的通知的名称相同，那么当Tab的视图重新出现时，可能会造成灾难？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T21:50:43.900

每个 addObserver 都应该有一个删除观察者。当已经添加了观察者时，您应该非常小心不要添加观察者，例如在 viewDidAppear 中，可以多次添加观察者，然后您的观察选择器将被多次调用。

老实说，从您解释的示例中，您应该考虑委托协议。在这里看到：

[http://mobiledevelopertips.com/objective-c/the-basics-of-protocols-and-delegates.html](http://mobiledevelopertips.com/objective-c/the-basics-of-protocols-and-delegates.html)

# iphone - 如何提高 iPhone 上的 OpenCV 性能？

> ID：10466217
> 
> 赞同：4
> 
> 时间：2012-05-05T21:43:23.397
> 
> 标签：iphone, performance, opengl-es, opencv, convolution

我使用 AVFoundation 来捕捉视频以及 OpenCV 在 iPhone 上进行图像处理。但是，我正在考虑使用 OpenGL 着色器对 192x144 灰度图像进行计算（卷积）。

我的问题是：使用 OpenGL 是否有意义，我的意思是：渲染到 IplImage 中（甚至可能吗？）太慢了吗？或者，有没有一种方法可以加快卷积速度？

**编辑**

在 OpenCV 中，我正在使用

```
IplConvKernel* kernel = cvCreateStructuringElementEx(3, 3, 1, 1, CV_SHAPE_CROSS, NULL); 
```

与`cvMorphologyEx`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T03:01:20.677

即使通过 Accelerate 框架（OpenCV 目前不使用它，如果我没有遗漏什么）使用 NEON 矢量操作，在运行简单的 3x3 卷积内核时，也很难超越着色器的性能。例如，我可以在 iPhone 4 上使用着色器在 2.5 毫秒内对 640x480 帧视频运行 Sobel 边缘检测内核，这对于实时图像处理来说已经足够快了。此外，OpenGL ES 着色器在处理显示时具有显着优势，因为您可以将所有内容始终保留在 GPU 端，并避免绘制事件的昂贵数据传输。

如果你想要一个简单的方法来做到这一点，我的开源[GPUImage](https://github.com/BradLarson/GPUImage)框架有一些非常快速的内置卷积，比如 Sobel 边缘检测或图像锐化内核，它可以让你很容易地创建自己的 3x3 卷积内核。它为您包装了所有 OpenGL ES，因此您无需了解任何相关信息（除非您想编写自己的自定义效果，但即便如此，您也只需要了解一点 GLSL）。

例如，要仅执行 Sobel 边缘检测内核的 X 分量，您可以使用以下代码设置卷积滤波器：

```
GPUImage3x3ConvolutionFilter *filter = [[GPUImage3x3ConvolutionFilter alloc] init];
[filter setConvolutionKernel:(GPUMatrix3x3){
    {-1.0f,  0.0f, 1.0f},
    {-2.0f,  0.0f, 2.0f},
    {-1.0f,  0.0f, 1.0f}
 }]; 
```

然后，您只需将其附加到相机、图像或电影输入和显示、原始数据或电影录像机输出，框架将处理其余部分。为了获得最佳性能，您可以选择编写自己的自定义实现，该实现针对您要运行的特定内核进行了优化，就像我为 GPUImageSobelEdgeDetectionFilter 所做的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T23:17:39.343

我无法找到任何相关材料，所以我想无法确定使用该算法的着色器的实现是否会对像 192x144 这样的小图像有更好的性能。

由于这不是一个复杂的实现，如果您有时间，我鼓励您这样做并衡量两种实现的性能增益。

如果您决定走这条路，请向我们报告您的发现。

# javascript - lazyload 动态驱动器内容选项卡

> ID：10466219
> 
> 赞同：0
> 
> 时间：2012-05-05T21:43:45.540
> 
> 标签：javascript, jquery, tabs, lazy-loading

[我使用动态驱动器标签内容](http://www.dynamicdrive.com/dynamicindex17/tabcontent.htm)创建任何标签内容。如果我有`4 tabs`内容`4 div`，所有 div 内容选项卡会立即加载。这不有趣。实际上，更好的方法：`load first tabs 1 (div content1) then tabs 2 (div content2) then tabs 3 (div content3) then tabs 4 (div content4)`。我认为[jquery lazyload 插件](http://www.appelsiini.net/projects/lazyload)可以提供帮助。这个问题的任何方法，方式/解决方案！？谢谢。

html:

```
<ul id="flowertabs" class="shadetabs">
<li><a href="#" rel="tcontent1" class="selected">Tab 1</a></li>
<li><a href="#" rel="tcontent2">Tab 2</a></li>
<li><a href="#" rel="tcontent3">Tab 3</a></li>
<li><a href="#" rel="tcontent4">Tab 4</a></li>
</ul>

<div style="border:1px solid gray; width:450px; margin-bottom: 1em; padding: 10px">

<div id="tcontent1" class="tabcontent">
Tab content 1 here<br />Tab content 1 here<br />
</div>

<div id="tcontent2" class="tabcontent">
Tab content 2 here<br />Tab content 2 here<br />
</div>

<div id="tcontent3" class="tabcontent">
Tab content 3 here<br />Tab content 3 here<br />
</div>

<div id="tcontent4" class="tabcontent">
Tab content 4 here<br />Tab content 4 here<br />
</div>

</div> 
```

JS 来源：[这里](http://www.dynamicdrive.com/dynamicindex17/tabcontent/tabcontent.js)

```
<script type="text/javascript">

var myflowers=new ddtabcontent("flowertabs") //enter ID of Tab Container
myflowers.setpersist(true) //toogle persistence of the tabs' state
myflowers.setselectedClassTarget("link") //"link" or "linkparent"
myflowers.init()

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T21:48:51.530

您是否考虑过使用[JQuery UI Tabs](http://jqueryui.com/demos/tabs/)插件？

它为几乎任何带有标签的任务提供了灵活而强大的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T22:03:38.053

因此，您想在用户单击选项卡时加载选项卡内容，对吗？如果这就是您想要做的，您可以将一个侦听器附加到链接元素，并在单击一个侦听器时将内容动态加载到选项卡内容区域中。

```
// Example using jQuery
var urls = {
    'tcontent1': 'url-to-content-1'
  , 'tcontent2': 'url-to-content-2'
  , 'tcontent3': 'url-to-content-3'
  , 'tcontent4': 'url-to-content-4'
}
$('#flowertabs a').on('click', function() {
    var tabContentId = this.attr('del')
    if (this.attr('loaded') !== undefined) {
        $.ajax(urls[tabContentId]).done(function(html) {
            $('#' + tabContentId).html(html).attr('loaded','loaded')
        })
    }
}) 
```

# php - 我在哪里可以找到有关 v2 Git 包索引文件格式的文档？

> ID：10466226
> 
> 赞同：0
> 
> 时间：2012-05-05T21:45:01.620
> 
> 标签：php, git

我正在研究 Git 的一个简单的 PHP 只读实现，并且大部分时间都在工作，但我无法弄清楚 Git 包索引文件（版本 2）的确切格式是什么。到目前为止，我发现的所有文档要么含糊不清，只专注于用 Git 本身来解释它们，要么只适用于版本 1，据我了解，版本 1 有很大不同。不能选择为 PHP 使用现有的 Git 实现（我已经尝试了一些，并且不断遇到问题）。

我基本上需要一些关于 v2 包索引文件格式的简单通用文档，没有特定于 PHP 的文档。我在哪里可以找到这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T00:45:29.293

[Git 源代码中包含](https://github.com/git/git/blob/master/Documentation/technical/pack-format.txt)的文档似乎对 v1 和 v2 包文件格式有相当完整的描述。

当然，还有许多其他软件实现可以理解这种格式，包括Python 的 dulwich，当然[还有C 的](https://www.samba.org/~jelmer/dulwich/)[libgit2](http://libgit2.github.com/)。如果技术文档不清楚，研究这些可能有助于您理解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T21:47:47.670

每个人似乎都将下面的链接 #1 作为 git packfile 格式的权威文档。我发现它非常稀疏，我不太了解它。花了很多时间挖掘，但我最终找到了链接 #2。它更全面，更容易理解。我看不出如何使用链接 #1 中的文档来实现该格式。我想我可以通过链接 #2 做到这一点。

我希望你能成功，最好有一个比目前存在的更完整的纯 PHP git 实现。

1.  [http://git.kernel.org/?p=git​​/git.git;a=blob;f=Documentation/technical/pack-format.txt;h=1803e64e465fa4f8f0fe520fc0fd95d0c9def5bd;hb=HEAD](http://git.kernel.org/?p=git/git.git;a=blob;f=Documentation/technical/pack-format.txt;h=1803e64e465fa4f8f0fe520fc0fd95d0c9def5bd;hb=HEAD)

2.  [http://home.cofares.net/GIT/book/7_the_packfile.html](http://home.cofares.net/GIT/book/7_the_packfile.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T00:48:22.490

Git packfile 格式不是特别容易处理 - 通过 libgit2 操作它可能比直接读取它更容易 - 查看[php-libgit2](https://github.com/libgit2/php-git)。

# jquery-ui - Jquery UI Datepicker 不起作用

> ID：10466229
> 
> 赞同：2
> 
> 时间：2012-05-05T21:45:28.987
> 
> 标签：jquery-ui, datepicker

我尝试了所有方法，但没有显示 Jquery ui datepicker。

这是我的代码

头

```
<link type="text/css" href="css/ui-lightness/jquery-ui-1.8.20.custom.css" rel="Stylesheet" />   
<script type="text/javascript" src="script/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="script/jquery-ui-1.8.19.custom.min.js"></script> 
```

HTML

```
<input type="text" id="date" name="date"/>

<script>
$( "#date" ).datepicker();
</script> 
```

我做错了什么。？？

谢谢。！

**我刚刚发现了问题：jquery-ui-1.8.19.custom.min.js 似乎有一个错误，因为它不适用于 jquery-1.7.1.min.js。我从 Jquery 重新下载了文件，它们现在是： jquery-1.7.2.min.js jquery-ui-1.8.20.custom.min.js 现在 datepicker 工作得很好。PD。我是否删除了这个问题，或者可能对其他人有好处。？？感谢您的回答和时间。！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T21:53:59.887

您需要将此代码放在此代码中：

```
$(function(){
    $('#date').datepicker();    
}); 
```

否则它将无法正常工作。这会等到您的 DOM 完全加载后再应用 datepicker 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-26T19:42:49.593

解决方案是同时使用**DOM** Ready 函数和 Bootstrap 代码，以避免与 jQuery 冲突：

```
var datepicker = $.fn.datepicker.noConflict();
$.fn.bootstrapDP = datepicker;

$(document).ready(function($) {
  $('#date_from').datepicker();
  $('#date_to').datepicker();
}); 
```

这是唯一对我有用的技巧，我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-05T21:57:45.753

您可能需要文档就绪功能

```
<script>    
$(document).ready(function() {
   $('#date').datepicker();
});
</script> 
```

# rake - rake 使用 Octopress 生成错误

> ID：10466230
> 
> 赞同：0
> 
> 时间：2012-05-05T21:45:41.663
> 
> 标签：rake

我的 Octopress 博客已部署，但在运行“rake generate”时我无法弄清楚 YAML 问题。有什么建议么？谢谢你的帮助！

* * *

dubipod$ **rake 生成**

'## 使用 Jekyll 生成站点'

删除 .sass-cache/

删除源/样式表/screen.css

创建源/样式表/screen.css

/Users/dubipod/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/psych.rb:148:in `parse': 无法在第 67 行第 14 列解析 YAML（心理： :语法错误)

来自 /Users/dubipod/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/psych.rb:148:in `parse_stream'

来自 /Users/dubipod/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/psych.rb:119:in `parse'

来自 /Users/dubipod/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/psych.rb:106:in `load'

来自 /Users/dubipod/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/psych.rb:205:in `load_file'

来自 /Users/dubipod/.rvm/gems/ruby-1.9.2-p318/gems/jekyll-0.11.0/lib/jekyll.rb:119:in `configuration'

来自 /Users/dubipod/.rvm/gems/ruby-1.9.2-p318/gems/jekyll-0.11.0/bin/jekyll:207:in `'

来自 /Users/dubipod/.rvm/gems/ruby-1.9.2-p318/bin/jekyll:23:in `load'

来自 /Users/dubipod/.rvm/gems/ruby-1.9.2-p318/bin/jekyll:23:in `'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T06:55:02.780

我遇到了类似的错误，为了修复它，我从我的 Twitter 用户名中删除了 @ 符号，语法错误就消失了。输出准确地说明了您的错误在哪里：“无法在第 67 行第 14 列解析 YAML (Psych::SyntaxError)”

**语法错误**

```
66 # Twitter
67 twitter_user: @joshschmelzle 
```

**固定的**

```
66 # Twitter
67 twitter_user: joshschmelzle 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-11T07:24:45.550

就我而言，我只是编辑

```
 twitter_user:twitterName 
```

**到**

```
 twitter_user: twitterName 
```

# javascript - 无法将字符串保存到stackmob上的字符串数组

> ID：10466233
> 
> 赞同：1
> 
> 时间：2012-05-05T21:46:13.790
> 
> 标签：javascript, backbone.js, coffeescript, stackmob

我对这个软件有问题[http://dev.wikidiscussion.ozfraier.stackmobapp.com](http://dev.wikidiscussion.ozfraier.stackmobapp.com)

这是 todos coffeescript 示例的变体[http://jasongiedymin.github.com/backbone-todojs-coffeescript/docs/coffeescript/todos.html](http://jasongiedymin.github.com/backbone-todojs-coffeescript/docs/coffeescript/todos.html)

一个列表元素称为 Proposition，它有两个字符串数组，负数和正数。

在每个元素上找到的正负输入框中输入的字符串应保存到这些数组中，并显示在元素下。当我使用 Backbone/localstorage（对不起，如果我混淆了这些术语）作为我的数据存储时，这一切都奏效了。但是当我将它移到 Stackmob 时，它停止工作，在 POST 上生成此错误

> {"error":"字段负数是不兼容的类型，请检查您的架构；它是作为 ClientDataString() 传入的"}

和 PUT 上的这个错误

> {"error":"positive 的类型无效，请检查您的架构"}

我检查了我的模式是否有负面和正面，它说 array[string]

这是我保存字符串的代码：

```
 savepos: (el) ->
       @save (positive: @get('positive') + el) 
```

在类 Proposition 中找到扩展 StackMob.Model

这是在 savepos 函数中调用的函数

```
 pushPosOnEnter: (e) ->
        if e.keyCode != 13 
           return
        Propositions.create( @newAttributesP() ) 
        @model.savepos ("<a href =\"#" + @inputp.val() + "\"><ul>" + @inputp.val() +   "</a></ul>") 
        @inputp.val('') 
```

在 PropositionView 类中找到扩展 Backbone.View

我编写的整个代码将作为评论添加，因为我没有足够的声誉来发布 4 个链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T22:24:08.000

> 一个列表元素称为 Proposition，它有两个字符串数组，负数和正数。

`positive`数组也是如此。然后你这样做来添加另一个元素：

```
@save (positive: @get('positive') + el) 
```

`el`这是一个字符串，`@get('positive')`是一个数组，`array + string`是另一个字符串，它解释了错误消息。

我想你想这样做：

```
a = _(@get('positive')).clone()
a.push(el)
@save(positive: a) 
```

或者，如果您不介意在模型`positive`不知道的情况下更改模型的属性：

```
a = @get('positive')
a.push(el)
@save(positive: a) 
```

请注意，它`get`返回对`model`'s中某些内容的引用，`attributes`因此您可能希望在通过调用更改返回的数组之前克隆返回的数组`push`。如果您使用第二种方法，那么`@attributes['positive']`将被更改，`push`但底层的 Backbone 东西不会知道它，这对您来说可能是也可能不是问题。即使[`save`](http://documentcloud.github.com/backbone/#Model-save)调用应该触发所有预期的事件，我也会谨慎行事并克隆它。

# ruby-on-rails-3 - 如何使用 Formtastic 添加与模型无关的输入

> ID：10466235
> 
> 赞同：11
> 
> 时间：2012-05-05T21:46:31.360
> 
> 标签：ruby-on-rails-3, formtastic

对于订阅表单，我需要一个未映射到我的用户对象的字段。

此字段仅用于向用户询问邀请代码，该代码在控制器的创建操作中与邀请列表进行检查，但未保存在任何地方，并且与此用户对象无关。

我试过 ：

```
<%= semantic_form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
  <%= f.input :invitation_key, :input_html => {:name => 'invitation_key', :id => 'invitation_key'} %> 
```

但它不起作用。

使用 Formtastic 执行此操作的正确方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T21:25:59.873

你可以做这样的事情而不是 f.input。我找不到使用特定于 Formtastic 的助手的方法：

```
<li>
    <%= label_tag 'Invitation Key' %>
    <%= text_field_tag :invitation_key %>
</li> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-06T11:14:12.947

Melinda 的回答很好，但是由于额外的属性与 User 模型有些相关，我会在 User 上创建一个访问器（实际上，我会创建一个 Signup 模型，但这是题外话）：

```
class User
  attr_accessor :invitation_key
end 
```

然后修改您的控制器以检查`@user.invitation_key`或`params[:user][:invitation_key]`。

# php - 每个请求是否有新的 CSRF 令牌？

> ID：10466241
> 
> 赞同：42
> 
> 时间：2012-05-05T21:46:54.713
> 
> 标签：php, csrf

所以我正在阅读并且对拥有一个 CSRF 令牌感到非常困惑，无论我应该为每个请求生成一个新令牌，还是每小时生成一个新令牌？

```
$data['token'] = md5(uniqid(rand(), true));
$_SESSION['token'] = $data['token']; 
```

但是假设最好每小时生成一个令牌，那么我需要两个会话：令牌，到期，

我将如何处理表格？只需将 echo $_SESSION['token'] 放在隐藏值表单上，然后在提交时进行比较？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-06T09:45:27.667

如果您根据表单请求执行此操作 - 那么您基本上消除了发生 CSRF 攻击的能力并且您可以解决另一个常见问题：多个表单提交

简而言之 - 如果用户在提交之前询问表单，您的应用程序将仅接受表单输入。

**正常情况：** 用户A访问您的网站，并要求提供表格A，并获得表格A加上表格A的唯一代码。当用户提交表格A时，他/她必须包含仅用于表格A的唯一代码。

**CSRF 攻击场景：**用户 A 访问您的网站，并要求提供表格 A。与此同时，他们访问了另一个“不良”网站，该网站尝试对他们进行 CSRF 攻击，让他们提交伪造的表格 B。

但是您的网站知道用户 A 从未要求提供表格 B - 因此即使他们有表格 A 的唯一代码，表格 B 也会被拒绝，因为他们没有表格 B 唯一代码，只有表格 A 代码。您的用户是安全的，您可以在晚上轻松入睡。

但是，如果您将其作为通用令牌进行，持续一个小时（就像您在上面发布的那样） - 那么上面的攻击可能会起作用，在这种情况下，您的 CSRF 保护并没有取得太多成就。这是因为应用程序一开始并不知道表单 B 从未被要求。它是一个通用令牌。CSRF预防的全部要点是使每个表单令牌对该表单唯一

**编辑：因为您要求提供更多信息：** 1 - 您不必根据表单请求执行此操作，您可以每小时/会话等执行此操作。重点是提供给用户的秘密值，并在返回时重新提交。此值不为其他网站所知，因此无法提交虚假表格。

因此，您可以为每个请求或每个会话生成令牌：

```
// Before rendering the page:
$data['my_token'] = md5(uniqid(rand(), true));
$_SESSION['my_token'] = $data['my_token'];

// During page rendering:
<input type="hidden" name="my_token" id="my_token" value="<? php echo $_SESSION['my_token']?>" />

// After they click submit, when checking form:
if ($_POST['my_token'] === $_SESSION['my_token'])
{
        // was ok
}
else
{
          // was bad!!!
} 
```

并且因为它是“按表单” - 你不会得到双重表单提交 - 因为你可以在第一次提交表单后擦除令牌！

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-06T10:28:16.910

通常，每个用户或每个会话拥有一个令牌就足够了。重要的是，令牌只绑定到一个特定的用户/会话，而不是全局使用。

如果您担心令牌可能会泄漏到攻击站点（例如通过 XSS）或被攻击站点获取，您可以将令牌的有效性限制在某个时间范围、某个表单/URL 或一定数量的使用范围内。

但是限制有效性的缺点是它可能导致误报，从而限制可用性，例如。G。合法请求可能使用刚刚失效的令牌，因为令牌请求太早了，或者令牌已经被使用得太频繁了。

所以我的建议是每个用户/会话只使用一个令牌。如果您想要进一步的安全性，请为每个用户/会话的每个表单/URL 使用一个令牌，这样如果一个表单/URL 的令牌被泄露，其他的仍然是安全的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T00:40:19.203

您的问题的答案是：视情况而定。

而且您不需要将会话用于定时令牌，您只需使用服务器时间和服务器上的密钥即可。

> 但是假设最好每小时生成一个令牌，那么我需要两个会话：令牌，到期，

不，您需要一个能够在某个时间范围内生成令牌的例程。假设您将时间划分为每 30 分钟。您在表单中为当前 30 分钟创建一个令牌。

提交表单时，您现在和之前的 30 分钟期间验证令牌。因此，令牌的有效期为 30 分钟到一小时。

```
$token = function($tick = 0) use($secret, $hash) {
    $segment = ((int) ($_SERVER['REQUEST_TIME'] / 1800)) + $tick;
    return $hash($secret . $segment);
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-02T04:53:38.500

在[owasp](http://cheatsheetseries.owasp.org/cheatsheets/Cross-Site_Request_Forgery_Prevention_Cheat_Sheet.html#synchronizer-token-pattern)网站它提到

> 每个请求令牌比每个会话令牌更安全，因为攻击者利用被盗令牌的时间范围很小。但是，这可能会导致可用性问题。

它的结论是

> CSRF 令牌应该是：
> 
> *   每个用户会话唯一。
> *   秘密
> *   不可预测（安全方法生成的大随机值）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T21:03:20.310

您可以使用这两种方法。

1）每个请求的随机令牌。并且为了解决令牌不同步的问题，您可以使用服务器发送的事件[http://www.w3.org/TR/eventsource/](http://www.w3.org/TR/eventsource/)或 websockets [http://www.w3.org/TR/websockets/](http://www.w3.org/TR/websockets/)通信技术来更新每个页面的实时令牌。

2）您可以为每个用户会话使用一个更易于实施的令牌（无需每小时执行一次）。你不会有同步的问题，但如果令牌不是太强，它可以被猜到。当然，如果令牌是非常随机的，那么受恶意攻击的人将很难真正进行请求伪造。

PS第一种方法是最安全的，但它更难实现并且使用更多的资源。

# .net - XSD 定义 .NET 枚举（名称和值）

> ID：10466242
> 
> 赞同：0
> 
> 时间：2012-05-05T21:47:05.087
> 
> 标签：.net, enums, xsd

我正在寻找一种通过 XSD 来表达枚举定义的方法。如您所知，在 .NET 中，您可以通过列出各个别名来定义枚举，但您也可以为任何别名分配一个值：

```
enum DataLevel
{
  Aarea = 1,
  Outlet = 2
} 
```

我知道在 XSD 中表示枚举的唯一方法是允许指定名称而不是指定的值：

```
<xs:simpleType name="DataLevel">
  <xs:restriction base="xs:string">
    <xs:enumeration value="Area"/>
    <xs:enumeration value="Outlet"/>
  </xs:restriction>
</xs:simpleType> 
```

你能帮我表达给定的枚举，以便别名和 te valies 由 XSD 表示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T21:51:47.627

XML Schema (XSD) 无法做到这一点。它没有 .NET 意义上的枚举概念。

# windows - 使用 C# 或 C++ 永久删除文件

> ID：10466243
> 
> 赞同：2
> 
> 时间：2012-05-05T21:47:05.287
> 
> 标签：windows, file-io, erase

> **可能重复：**
> [C# - 永久删除文件](https://stackoverflow.com/questions/3330427/c-sharp-deleting-a-file-permanently)

我读了一些文章数据恢复软件是如何工作的。他们说删除的文件仍然在[硬盘](http://en.wikipedia.org/wiki/Hard_disk_drive)上，但对操作系统是不可见的。这些文件位于相同的位置（内存），但指针不同，这就是操作系统无法看到它们的原因。

我想用 C# 或 C++ 构建一个程序，它可以帮助我完全擦除我定义的文件。使用`remove()`（C++）永久删除文件是否足够？我应该从哪里开始我的文档或我应该做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T21:50:35.507

尝试创建一个文件流，用很多 0 的文件覆盖整个文件，然后删除该文件？然后，任何文件恢复程序都会恢复很多零。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T21:50:06.253

删除文件会删除文件系统条目（即告诉文件系统文件数据在磁盘上的位置的记录）。它指向的数据仍然在磁盘盘片上（尽管它最终可能会被覆盖）。

如果要从磁盘盘片中删除数据，请在删除文件记录之前用随机数覆盖它。

这就像从目录中删除您的地址一样；你的家还存在，人们只是无法再查找它的位置。如果他们足够敬业，他们可以找到你的房子。如果您绝对需要确保他们永远找不到它，请用推土机将其平整。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T21:54:19.563

简单地说，当文件被删除时，指向第一个数据块的“指针”被删除。但数据仍在磁盘上。如果随后对磁盘执行写入，则数据有可能被覆盖。

这很简单地告诉了“不安”程序的作用。他们在磁盘中搜索存在的数据，但在文件系统的数据结构中没有“指针”。

通常需要的是覆盖数据块。

这可以多次执行，以确保无法恢复数据。

已经有很多程序可以做到这一点，我认为我不希望 C# 可以做到（不诉诸非托管代码）。

有关详细信息，请参阅[C# - 永久删除文件](https://stackoverflow.com/questions/3330427/c-sharp-deleting-a-file-permanently)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T21:58:50.417

现代操作系统在构建文件时分配实际扇区的不透明方式，以及固态硬盘驱动器透明地重新映射逻辑扇区以在操作系统破坏页面文件时分散物理扇区上的负载，这是保证您的数据的唯一可靠方法永远无法恢复的方法是在硬盘驱动器上钻孔，然后将其烧毁。要么对所有相关文件使用加密密钥，要么永远不要将它们存储在硬盘驱动器上（即，将它们存储在用户的大脑中）。另请注意，您需要在使用后立即将加密中使用的所有 RAM 归零，以确保它不会被分页到磁盘。

# php - 从 PHP 执行 root 命令...有安全的方法吗？

> ID：10466249
> 
> 赞同：8
> 
> 时间：2012-05-05T21:47:48.437
> 
> 标签：php, command, root

我正在考虑制作一个基于 Web 的小型 Linux 控制面板（只是为了好玩）。

我想到的第一个潜在问题是我需要授予 Apache 的用户 root 级别的权限来运行这些命令，这会危及整个系统的安全性。

为系统安装专用的 Web 服务器并不是一个真正的选择。

也许我可以运行第二个 Apache 实例（为普通用户保留第一个）但甚至不确定是否可能。

那么，你们怎么看？我在这里最好的选择是什么？

提前感谢您的任何意见。

编辑：好的，谢谢大家的建议，我会记住的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T21:54:44.367

编写可以以 root 身份运行的特定脚本并使用 setuid 位来执行此操作，以便 Apache 可以仅以 root 身份运行这些脚本。IE

```
#! /usr/bin/php (or wherever your php binary is)
<?php
   // Some PHP code that takes in very limited user input,
   // validates it carefully, and does a sequence of actions
   // that you need to run as root.

   // This could easily be a shell script (or whatever else you want)
   // instead of PHP. That might be preferable in many situations.
?> 
```

然后确保该脚本由 root 拥有并由 Apache 运行的用户分组：

```
chown root:www-data myscript.php 
```

然后让它以所有者身份运行：

```
chmod u+s myscript.php 
```

并确保 Apache 可以执行它：

```
chmod g+x myscript.php 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T21:59:15.047

通过网络服务器执行 root 命令对我来说似乎是一个疯狂的想法，但无论如何。

您可以使用[`sudo`](http://linux.die.net/man/8/sudo)which 来确保您不会运行任何不需要的命令。

取自[这里](http://www.linuxhomenetworking.com/wiki/index.php/Quick_HOWTO_%3a_Ch09_%3a_Linux_Users_and_Sudo)的小例子，sudo config：

```
peter, %operator ALL= /sbin/, /usr/sbin, /usr/local/apps/check.pl 
```

在 php 中：

```
exec( 'sudo /usr/local/apps/check.pl ...'); 
```

请务必正确转义所有参数，依此类推。

或者您可以像这样构建数据库表：

```
commands (
    action,
    serialized_parameters.
    result,
    return_code
) 
```

使用 php 将命令插入此表和另一个脚本，该脚本将由不同的用户在 cron 中运行。你不会有实时结果（但你可以让他们有 30 秒的时间）但是 apache 用户将不能直接使用任何命令（当然你可以在读取记录时轻松地限制操作）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-20T10:01:49.353

我最近发布了一个项目，它允许 PHP 获取并与真正的 Bash shell 交互（如果需要，作为 root 用户），它解决了 exec() 和 shell_exec() 的限制。在这里获取：[https ://github.com/merlinthemagic/MTS](https://github.com/merlinthemagic/MTS)

下载后，您只需使用以下代码：

```
$shell    = \MTS\Factories::getDevices()->getLocalHost()->getShell('bash', true);
$return1  = $shell->exeCmd('yourFirstCommand');
//the return will be a string containing the return of the command
echo $return1; 
```

就安全性而言，它比以 root 身份运行 apache 要好得多。但是让 PHP 靠近根目录总是很棘手。

我构建的项目通过以下两种方式之一实现了 root bash shell：

1）您允许apache有权sudo python。

或者

2) 每次需要具有 root 设置的 shell 时，都将 root 凭据传递给对象。

选择你的毒药。:) 阅读文档。

# jquery - 鼠标悬停暂停图像幻灯片

> ID：10466254
> 
> 赞同：0
> 
> 时间：2012-05-05T21:48:20.170
> 
> 标签：jquery, html, css, web

我有一个可以工作的图像幻灯片，但是我需要制作它，以便当您用鼠标滑过时，幻灯片会在特定图像处停止，然后当您释放时，再次开始幻灯片。这是我的功能：

```
$(function(){
$(this).mouseover(function(){
    $(this).toggle();
});
$('.fadein img:gt(0)').hide();
setInterval(function(){
  $('.fadein1 :first-child').fadeOut()
     .next('img').fadeIn()
     .end().appendTo('.fadein1');}, 
  3000);
  }); 
```

有人可以帮忙吗？现在真的很烦我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T22:50:50.587

您需要更改幻灯片功能以更好地跟踪图像，这样应该可以工作：

```
$(function(){
    var timer, elm=0, images = $('img', '.fadein1');
    images.not(':first').hide().end().on({
         mouseenter: function() {
             clearInterval(timer);
         },
         mouseleave: function() {
             timer = setInterval(slider, 3000);
         }
   });

   timer = setInterval(slider, 3000);

   function slider() {
     var image = images.eq(elm);
     image.fadeOut();
     elm = elm!=images.length-1 ? image.next('img').index() : 0;
     images.eq(elm).fadeIn();
   }
 });​ 
```

[小提琴](http://jsfiddle.net/adeneo/KSRaN/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T22:02:51.223

试试这个 ...

```
var interval;

function slide(){
    interval = setInterval(function(){
      $('.fadein1 :first-child').fadeOut()
         .next('img').fadeIn()
         .end().appendTo('.fadein1');}, 
      3000);
  });

  $(function(){

    $('.fadein1').hover(function(){
        clearInterval(interval);
    },function(){
      slide();
    });

    $('.fadein img:gt(0)').hide();
    slide();

  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T22:04:56.227

当你想这样做时，你通常只需设置一个信号量来说“嘿，我暂停了”。然后，在你的 setInterval 函数中，你说 if(paused) {return;} 并且只有在没有暂停时才继续。

# java - 是否可以使用 sendredirect() 重定向到子目录中的页面

> ID：10466256
> 
> 赞同：0
> 
> 时间：2012-05-05T21:48:43.180
> 
> 标签：java, servlets, redirect

我正在尝试从我的 servlet 重定向到 jsp 页面。当我将页面直接放在`WebContent`文件夹中时重定向有效，但我需要将其放在子文件夹中，即；`WebContent/Web-INF/view`

以下不起作用：

```
resp.sendRedirect(resp.encodeRedirectURL("WEB-INF/view/welcome.jsp")); 
```

在使用请求调度程序时...

想知道是否有一种方法可以`sendRedirect()`用于子文件夹中的页面？

我的 servlet 的位置是：Java Resources/src/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T21:50:07.410

您不能重定向到`WEB-INF`. 根据设计，该目录中的所有资源对浏览器都是不可见的。

要么将 JSP 保留在 之外`WEB-INF`，要么添加一个转发到 JSP 的 servlet，然后重定向到 servlet。

> 我需要把它放在一个子文件夹中

这通常是很好的做法，但为什么*需*要这样做呢？

# java - Neuroph 图像识别插件是否正确地将 RGB 图像转换为黑白图像？

> ID：10466260
> 
> 赞同：2
> 
> 时间：2012-05-05T21:49:08.470
> 
> 标签：java, image-processing, artificial-intelligence, neural-network

我有一个关于`FractionRgbData`Neuroph 2.6 的 Neuroph ImageRecognition 类的问题。我不完全了解静态`FractionRgbData.convertRgbInputToBinaryBlackAndWhite(double[] inputRGB)`方法的实现（请参阅下面的方法副本）。更具体地说，我不明白为什么在for循环条件下输入数组的长度除以3，而for循环变量`i`每次迭代也增加3？我认为将输入数组除以 3 就足够了。

请注意，此方法在[`ImageRecognitionHelper`](http://neuroph.svn.sourceforge.net/viewvc/neuroph/tags/neuroph-2.6/src/org/neuroph/contrib/imgrec/ImageRecognitionHelper.java?revision=1271&view=markup)类中使用，并且此类显示`inputRGB`double 来自`FractionRgbData.getFlattenedRgbValues()`可以在[此处](http://neuroph.svn.sourceforge.net/viewvc/neuroph/tags/neuroph-2.6/src/org/neuroph/contrib/imgrec/FractionRgbData.java?revision=1271&view=markup)看到的。据我了解，`inputRGB`双数组依次包含图像的红色、绿色和蓝色通道。

希望有人可以对这个实现有所了解！

提前致谢，

巴里荷兰

```
/**
 * Converts image rgb data to binary black and white data
 * @param inputRGB flatten rgb data
 * @return binary black and white representation of image
 */
public static double[] convertRgbInputToBinaryBlackAndWhite(double[] inputRGB) {
    double inputBinary[]= new double[inputRGB.length/3];

    for(int i=0; i<inputRGB.length/3; i+=3) {
        if (inputRGB>0) inputBinary = 0;
            else inputBinary = 1;
    }

    return inputBinary;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:51:28.897

Neuroph 开发人员已在 Neuroph 的支持论坛上回答了上述问题。可以在[这里](http://sourceforge.net/projects/neuroph/forums/forum/862858/topic/5247473)找到。

简而言之，开发人员说实现不正确并且没有正确转换为黑白。

# tsql - 从 SQLCMD 执行 CREATE VIEW & ALTER VIEW

> ID：10466261
> 
> 赞同：4
> 
> 时间：2012-05-05T21:49:12.627
> 
> 标签：tsql, sqlcmd

我正在尝试使用 sql cmd 执行具有以下内容的 sql 文件。

```
sqlcmd -S localhost\dbInstance -i Sample.sql -v  filepath="C:\Sql\" 
```

***Sample.sql 内容：***

```
USE Sample_db
GO
BEGIN
 BEGIN TRANSACTION; 
  BEGIN TRY
   CREATE VIEW [dbo].[Test_View]
   AS SELECT * from Sample_table;   

   ALTER VIEW [dbo].[Sample_View]   
   AS SELECT * FROM table_9;        

   ALTER TABLE [Sample_Table_2] ADD Col_4 VARCHAR(20);

  END TRY 
 BEGIN CATCH     
  SELECT  ERROR_NUMBER() AS ErrorNumber         ,
    ERROR_SEVERITY() AS ErrorSeverity         ,
    ERROR_STATE() AS ErrorState         ,
    ERROR_PROCEDURE() AS ErrorProcedure         ,
    ERROR_LINE() AS ErrorLine         ,
    ERROR_MESSAGE() AS ErrorMessage;     

  IF @@TRANCOUNT &gt; 0         
   ROLLBACK TRANSACTION; 

 END CATCH;

 IF @@TRANCOUNT &gt; 0     
  COMMIT TRANSACTION;

END  
GO 
```

***当我执行 sqlcmd 时，它会引发以下错误：***

```
C:\Sql&gt;sqlcmd -S localhost\dbInstance -i Sample.sql -v  filepath="C:\Sql\"
Changed database context to 'Sample_db'.
Msg 156, Level 15, State 1, Server localhost\dbInstance, Line 5
Incorrect syntax near the keyword 'VIEW'. 
```

***问题：*** 为什么我不能从 sqlcmd 创建视图和更改视图，而我可以更改表？当我注释掉 CREATE VIEW 和 ALTER VIEW 语句时，脚本执行得很好。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-06T00:12:05.877

# sql - 如何创建具有多个聚合函数计数和求和的视图？

> ID：10466270
> 
> 赞同：1
> 
> 时间：2012-05-05T21:50:41.573
> 
> 标签：sql, oracle

我正在尝试为我的 oracle 表单创建摘要。该摘要将存储每个部门的员工人数。记录**不**存储在一个表中，该表将是指示部门名称的不同列（例如 hr，it ...）代码：

```
create table cleaners
(
ceno INTEGER,
cname VARCHAR(5)
);

create table drivers
(
eno INTEGER,
dname VARCHAR(5)
);

create table mechanics
(
eno INTEGER,
mname VARCHAR(5)
);

INSERT INTO cleaners VALUES ('1','3');
INSERT INTO cleaners VALUES ('2','3');
INSERT INTO cleaners VALUES ('3','3');
INSERT INTO cleaners VALUES ('4','2');
INSERT INTO cleaners VALUES ('5','2');

INSERT INTO drivers VALUES ('5','3');
INSERT INTO drivers VALUES ('4','3');
INSERT INTO drivers VALUES ('3','3');
INSERT INTO drivers VALUES ('2','2');
INSERT INTO drivers VALUES ('1','2');

INSERT INTO mechanics VALUES ('5','3');
INSERT INTO mechanics VALUES ('4','3');
INSERT INTO mechanics VALUES ('3','3');
INSERT INTO mechanics VALUES ('2','2');
INSERT INTO mechanics VALUES ('1','2');

create view summary as select
count(cleaners.eno) as numberofcleaners,
count(drivers.eno) as numberofdrivers,
count(mechanics.eno) as numberofmechanics,
from  cleaners, drivers, mechanics; 
```

所以我的目标是让每个部门的所有数字都有一行。但是查询返回相乘结果。应该怎么做？我正在使用Oracle6i，这是一个没有商业用途的学校项目。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-05T22:40:24.037

由于这是一项家庭作业，我想就如何以适当的方式设计表格提供一些意见。只是我的两分钱。

### 设计建议

我会建议你改变表设计。您的所有表基本上都包含相同的数据：

*   一个号码
*   姓名

与其拥有多个表，不如按照这一思路设计数据库，只包含两个表。

```
Department
----------
dept_no   INTEGER
dept_name VARCHAR(30)

Person
------ 
person_no   INTEGER
person_name VARCHAR(30)
dept_no     INTEGER 
```

### 创建带约束的表

您应该设计具有适当约束的表。这里有几点需要注意。

*   顾名思义，该约束`PRIMARY KEY`将在表上创建一个主键以保持数据的唯一性，这样您就不会得到多个具有相同值的 id。

*   约束`FOREIGN KEY`是在表 Department 和 Person 之间创建关系。

*   对于此示例，这些键可能不是必需的，但在现实世界的应用程序中，使用外键约束定义适当的关系始终是最佳实践。您可以在网络上搜索许多其他`PRIMARY KEY`内容`FOREIGN KEY`。

*   您无法切换这些表的创建顺序。换句话说，您不能先创建 Person 表，然后再创建 Department 表。原因是 Person 表正在创建一个引用 Department 表的约束。如果您先创建 Person 表，您将收到错误`Failed: ORA-00942: table or view does not exist`。

*   您还可以将`dept_no`and`person_no`设为自动递增的数字，这样您就不必手动插入这些数字。我使用 SQL Server。所以，我不太熟悉 Oracle 语法来创建一个自动递增数字的列。搜索 Oracle 的序列号，你可能会找到一些东西。

*脚本*：

```
CREATE TABLE Department
(
    dept_no   INTEGER 
  , dept_name VARCHAR(30)
  , CONSTRAINT pk_department PRIMARY KEY (dept_no)
);

CREATE TABLE Person
(
    person_no   INTEGER
  , person_name VARCHAR(30)
  , dept_no     INTEGER
  , CONSTRAINT  pk_person PRIMARY KEY (person_no)
  , CONSTRAINT  fk_person_dept FOREIGN KEY (dept_no)
      REFERENCES Department (dept_no)
); 
```

### 填充表格

*   下面给出的脚本首先填充 Department 表，然后填充 Person 表。

*   它实际上是同时向表中插入多个值，而不是为每一行调用 INSERT INTO。

*   ***dual***是 Oracle 中的单行虚拟表。[**在这个关于双重的 SO 答案中阅读此处。**](https://stackoverflow.com/questions/73751/what-is-the-dual-table-in-oracle)

*脚本*：

```
INSERT ALL
  INTO Department (dept_no, dept_name) VALUES (1, 'Cleaner')
  INTO Department (dept_no, dept_name) VALUES (2, 'Driver')
  INTO Department (dept_no, dept_name) VALUES (3, 'Mechanic')
SELECT * FROM dual;

INSERT ALL
  INTO Person (person_no, person_name, dept_no) VALUES (1,  'Cleaner 1',   1)
  INTO Person (person_no, person_name, dept_no) VALUES (2,  'Cleaner 2',   1)
  INTO Person (person_no, person_name, dept_no) VALUES (3,  'Cleaner 3',   1)
  INTO Person (person_no, person_name, dept_no) VALUES (4,  'Cleaner 4',   1)
  INTO Person (person_no, person_name, dept_no) VALUES (5,  'Driver 1',    2)
  INTO Person (person_no, person_name, dept_no) VALUES (6,  'Driver 2',    2)
  INTO Person (person_no, person_name, dept_no) VALUES (7,  'Driver 3',    2)
  INTO Person (person_no, person_name, dept_no) VALUES (8,  'Mechanic 1',  3)
  INTO Person (person_no, person_name, dept_no) VALUES (9,  'Mechanic 2',  3)
  INTO Person (person_no, person_name, dept_no) VALUES (10, 'Mechanic 3',  3)
  INTO Person (person_no, person_name, dept_no) VALUES (11, 'Mechanic 4',  3)
  INTO Person (person_no, person_name, dept_no) VALUES (12, 'Mechanic 5',  3)
  INTO Person (person_no, person_name, dept_no) VALUES (13, 'Mechanic 6',  3)
SELECT * FROM dual; 
```

### 如何让我的数据按部门分组？

*   现在您已经有了表和数据，是时候查询信息了。

*   您的要求是获取所有部门的列表以及每个部门的人数。

*   如果您运行以下查询，您将只获得部门列表，但这不是您所需要的。

*简单选择*：

```
SELECT  dept_no
    ,   dept_name 
FROM    Department; 
```

*输出*：

```
DEPT_NO  DEPT_NAME
-------  ---------
   1     Cleaner
   2     Driver
   3     Mechanic 
```

*   所以，你可能会问‘*我怎样才能得到这些信息？*'。嗯，该信息在表 Person 中。因此，我们需要连接两个表以找到所需的数据。我们将使用`INNER JOIN`在一个公共字段上连接两个表。在这种情况下，两个表中的公共字段是**dept_no**。

### 将为您提供所需输出的查询

*脚本*：

```
SELECT      d.dept_no
        ,   d.dept_name 
        ,   COUNT(p.person_no) AS No_of_employees
FROM        Department d
INNER JOIN  Person p
ON          p.dept_no = d.dept_no
GROUP BY    d.dept_no
        ,   d.dept_name
ORDER BY    d.dept_no; 
```

*输出*：

```
DEPT_NO  DEPT_NAME  NO_OF_EMPLOYEES
-------  ---------  ---------------
   1     Cleaner           4
   2     Driver            3
   3     Mechanic          6 
```

### 解释

*   该查询使用了很多东西，例如 INNER JOIN、GROUP BY、COUNT 和 ORDER BY。让我们来看看其中的每一个。

*   *INNER JOIN*基于公共字段连接表，在本例中为 dept_no。

*   *COUNT*函数将允许查询按部门编号和部门名称对所有员工计数进行分组。

*   `COUNT`是一个聚合函数。当您对非聚合列使用聚合函数时，您需要使用 GROUP BY 子句。这里的 dept_no 和 dept_name 是非聚合列。`SUM`, `MAX`. `MIN`是一些聚合函数。

*   最后，我们应用**ORDER BY**子句按**dept_no**列对输出进行排序。

### 演示

[**单击此处查看 SQL Fiddle 中的演示。**](http://sqlfiddle.com/#!4/c83fc/5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T21:58:53.373

您正在查询中进行交叉连接。试试这个：

```
create view summary 
    as 
    select 
    (select count(cleaners.eno) from cleaners) as numberofcleaners, 
    (select count(drivers.eno) from drivers ) as numberofdrivers, 
    (select count(mechanics.eno) from mechanics) as numberofmechanics
from dual; 
```

# forms - 停止用户提交的表单上的文本溢出

> ID：10466272
> 
> 赞同：0
> 
> 时间：2012-05-05T21:50:51.607
> 
> 标签：forms, text, overflow

[http://www.vidyasocks.com/forums.php?id=16&id=16](http://www.vidyasocks.com/forums.php?id=16&id=16)

正如您在此处看到的，我遇到了文本溢出问题。我能做些什么来阻止它溢出？当用户提交表单时，如何在容器的最大宽度处停止文本并让它换行到下一行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T21:53:30.620

您需要添加

```
word-wrap: break-word; 
```

To `div#postcenter > div`，所以你最终得到这个：

```
div#postcenter > div {
    word-wrap: break-word;
} 
```

`word-wrap: break-word`始终确保长的、不间断的单词在行尾换行（至少在支持它的浏览器中）。

# python - 尝试递归查看文件夹时出现错误 5

> ID：10466274
> 
> 赞同：0
> 
> 时间：2012-05-05T21:51:08.423
> 
> 标签：python, recursion

我正在尝试用 Python 编写一个递归文件列表程序。当我运行程序而最后没有捕获异常代码时，它返回错误号 5，表示对某些 Windows 文件夹的访问被拒绝。我拥有管理员权限和一切，但它仍然不断向我抛出这个错误。是否有可能解决这个问题并列出这些目录中的文件？

```
import os

def wrapperList():
    mainList = []
    fileList = os.listdir("C:")
    for file in fileList:
        path = os.path.join("C:\\", file)
        if (os.path.isdir(path)):
            mainList.append(recurList(path))
        else:
            mainList.append(path)
    print mainList
def recurList(directory):
    try:
        fileList = os.listdir(directory)
        tempList = []
        for file in fileList:
            path = os.path.join(directory, file)
            if (os.path.isdir(file)):
                tempList.append(recurList(path))
            else:
                tempList.append(file)
        return tempList
    except:
        return ["Access Denied"]

wrapperList() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T21:56:46.977

[`os.walk`](http://docs.python.org/library/os.html#os.walk)这是一个示例，使用它比尝试自己实现相同的东西要好得多。

例如：

```
import os

for root, dirs, files in os.walk("/some/path"):
    ... 
```

至于错误，如果您的权限被拒绝，那么您可能真的被拒绝访问那里。我不是windows用户，所以我不确定，但是您需要以管理员权限运行程序吗？（相当于以root身份运行，或者`sudo`在linux下运行）。

# objective-c - 如何从一个简短的 URL 中检索完整的 URL？Xcode

> ID：10466278
> 
> 赞同：3
> 
> 时间：2012-05-05T21:51:40.687
> 
> 标签：objective-c, xcode, macos, url

我需要一些关于如何从一个简短的 URL 中检索完整 URL 的帮助。
例如：[http](http://tinysong.com/HJ9h)
: //tinysong.com/HJ9h 如果您单击该链接，它将打开一个grooveshark url。如何检索原始的grooveshark url？
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T22:09:04.887

短 URL 通过 HTTP 重定向工作。您可以`NSURLConnection`使用短 URL 设置请求并设置委托。在委托中，实现方法：

```
- (NSURLRequest *)connection:(NSURLConnection *)connection willSendRequest:(NSURLRequest *)request redirectResponse:(NSURLResponse *)response; 
```

如果`response`是非`nil`，它是一个重定向。您可以检查响应。您可以检查它是否实际上是`NSHTTPURLResponse`using的实例，`-isKindOfClass:`然后从中获取其他数据。

此外，您可以查看建议的新`request`内容`NSURLConnection`。它的`URL`属性将是服务器将您的连接请求重定向到的新 URL。

如果您被重定向并且您有理由相信您不会被进一步重定向并且这就是您感兴趣的全部，您可以通过调用`-cancel`连接对象来取消连接请求。

* * *

更新。这是一些示例代码：

```
#import <Foundation/Foundation.h>

static BOOL stop;

@interface MyDelegate : NSObject
@end

@implementation MyDelegate

- (NSURLRequest *)connection:(NSURLConnection *)connection willSendRequest:(NSURLRequest *)request redirectResponse:(NSURLResponse *)response
{
    NSLog(@"request %@", request);
    NSLog(@"response %@", response);
    return response ? nil : request;
}

- (void) connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    NSLog(@"%s: error %@", __func__, error);
    stop = TRUE;
}

- (void) connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSLog(@"%s", __func__);
    stop = TRUE;
}

@end

int main (int argc, const char * argv[]) {
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];

    NSURLRequest* req = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://tinysong.com/HJ9h"]];
    MyDelegate* del = [[MyDelegate alloc] init];
    [NSURLConnection connectionWithRequest:req delegate:del];
    while (!stop)
        [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];

    [pool drain];
    return 0;
} 
```

产生这个输出：

```
request <NSURLRequest http://tinysong.com/HJ9h>
response (null)
request <NSURLRequest http://grooveshark.com/#!/s/~/3Xl6OQ?src=11>
response <NSHTTPURLResponse: 0x103500340>
-[MyDelegate connectionDidFinishLoading:] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T22:05:33.003

您可以使用例如[LongURL](http://longurl.org/api)或[Untiny](http://untiny.me/api/)的 API 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T22:11:18.067

从终端执行此操作的简单方法

```
curl --head shorturl 
```

这将只显示短标题，您可以在其中看到 url。

例如

```
$ curl --head http://tinysong.com/HJ9h
HTTP/1.1 301 Moved Permanenty
Server: sharkattack!
Date: Sat, 05 May 2012 22:13:10 GMT
Content-Type: text/html; charset=UTF-8
Connection: close
Set-Cookie: TinysongSessionID=4518ef13c93199344a23bb9fe9af3e98; expires=Sat, 02-May-2015 22:13:10 GMT; path=/
Location: http://grooveshark.com/#!/s/~/3Xl6OQ?src=11
Cache-Control: max-age=300
Expires: Sat, 05 May 2012 22:18:10 GMT
Vary: Accept-Encoding
X-Hostname: rhl082
X-N-Hostname: RHL082 
```

`Location`您可以在该字段中看到它指向的 url 。

因此，将其与 NSTask 一起使用将为您提供可以使用的结果字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T22:14:37.763

如果服务使用 HTTP 301,302 一个 303 重定向，您可以向初始 URL 发出 HTTP 请求...

如果响应标头再次返回 301,302 或 303，则向标头中指定的新位置发出另一个请求...然后您将重复此操作，直到状态代码为其他内容，即 200...

然后你可以从响应头和vola中读取主机和路径，你有你的长URL..

现在在获取标头方面......我使用 ASIHTTPRequest 来满足我所有的网络需求...... [http://allseeing-i.com/ASIHTTPRequest/How-to-use](http://allseeing-i.com/ASIHTTPRequest/How-to-use)它有一个跟随重定向的选项，所以我想如果你发出请求，然后您将能够读取 ResponseHeaders 并获取长 URL。

希望这有点道理

# lotus-notes - 重命名 Lotus Notes 文档

> ID：10466281
> 
> 赞同：1
> 
> 时间：2012-05-05T21:52:54.613
> 
> 标签：lotus-notes

我有一个数据库（通过代理）创建文档的 5 个副本并使用新表单名称存储它们（因此原始表单名称是“MasterProfile”，代理制作文档的 5 个副本并将它们命名为 UserProfile - 使用 XXXX .Form = "用户配置文件")。效果很好，当我查看 Ytria 中的表单/文档时，一切看起来都很好，表单“UserProfile”下有 5 个文档

现在在 UserProfile 文档中有一个热点，它从用户那里获取文档响应并使用

@If(@Command([FileSave]);@Command([FileCloseWindow]);"")

我遇到的问题是，当 @Command[FileSave] 运行时，它将文档保存回原始名称“MasterProfile”。我尝试将表单字段设置为正确的名称

FIELD Form := "UserProfile";

但这无济于事。

有谁知道我可能会错过什么？为什么复制的文档不保留为 UserProfile 而不是转换回 MasterProfile？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T03:00:56.620

在跳到解决方案之前，我认为重要的是要解决您关于导致问题的问题的问题。有几个可能的原因：

1）您在数据库设计中没有名为“UserProfile”的表单，而“MasterProfile”表单是数据库中的默认表单。如果是这种情况，那么每次您在 Notes UI 中打开文档时，您都会默认加载 MasterProfile 表单。因此，当您保存文档时，Form 字段中的值将更改为加载的表单名称，即“MasterProfile”。

2) 您在数据库中有一个“UserProfile”表单，但它的别名设置为“MasterProfile”。当您在 Notes UI 中保存文档时，Form 项实际上是根据表单的别名而不是主名称设置的，因此这会导致 Form 字段更改为“MasterProfile”。

3）您在数据库中有一个“UserProfile”表单，但您在表单上有一个名为“Form”的计算字段，该字段的公式实际上是“MasterProfile”。当您在 Notes UI 中保存文档时，Form 字段的计算值将覆盖已加载表单的名称和别名，因此这将导致 Form 字段更改为“MasterProfile”。

4) 您的应用程序使用了一个很少使用的 Notes 功能，称为“表单公式”。即，您从中打开文档的视图设计有一个表单公式，其值为“MasterProfile”。视图中的表单公式会导致 UI 使用公式结果来覆盖存储在文档中的表单字段。使用表单公式的一个令人讨厌的副作用是，当您保存文档时，表单字段中的值将被更改为覆盖的名称，即“MasterProfile”。

实际上还有其他几种可能性，但我认为它们比上述任何一种可能性都小。

#1 的解决方案是创建一个名为“ProfileSubform”的子表单并将“MasterProfile”的全部内容（字段和事件脚本）复制到它。然后彻底清除 MasterProfile 表单并将新的子表单插入其中。然后创建一个“UserProfile”表单并将 MasterProfile 表单也插入其中。（Ken Pepisa 的建议也很好，但是我建议的优点是您可以在不对您的应用程序进行任何其他更改的情况下做到这一点。）

#2 的解决方案是去掉或更正“UserProfile”表单的别名。

#3 的解决方案是去掉或更正“UserProfile”表单上的表单字段。

＃4的解决方案更有问题。如果您可以摆脱视图中的表单公式，那么就这样做......但它可能是有原因的。你可能不得不让它更聪明，和/或你可能不得不接受 Ken 的建议之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T23:07:40.380

您应该设置另一个字段而不是使用表单字段。当文档保存在 UI 中时，表单字段将始终由 Notes 设置。

例如，您可以创建一个 DocType 字段并将其设置为 MainProfile 或 UserProfile。然后在任何适当的 Notes 视图中，您可以添加该 DocType 列来代替您正在显示的 Form 列。我不确定 Ytria 是如何工作的，但希望您可以通过表单字段之外的另一个字段进行查看。

如果您绝对需要为此目的使用 Form 字段，您可以尝试通过 PostSave 事件更新 Form 字段，但我不确定这是否可能。

# c# - 为什么使用 Debug.WriteLine 可以获得结果但分配不在 Asyncallback C# 中

> ID：10466282
> 
> 赞同：0
> 
> 时间：2012-05-05T21:53:10.993
> 
> 标签：c#, multithreading, windows-phone-7, asynchronous

将结果分配给 json 但是如果我使用 Debug.WriteLine(GETUserList()); 它打印给我；但我尝试分配 json 并获取 json 的值它返回 null

`String json = GETUserList();`

```
namespace PhoneApp3
{
    public partial class MainPage : PhoneApplicationPage
    {
        // Constructor
        const String url = "http://hackathon.kimhieu.info/flashcard/index.php/api/";
        const String ContentType = "application/x-www-form-urlencoded";
        public String username;
        public String password;

        public MainPage()
        {
            InitializeComponent();
            username = "a";
            password = "a";        
           String  json = GETUserList();        
           MessageBox.Show(json);
        }           

        GET user;   

            public String GETUserList()
            {
              user  = new GET();
              user.urlAdress = url + "user";
               user.username = username;
               user.password = password;               
               user.Completed += OutUser;
               user.sendGETRequest();
               return user.result;
            }       

        // OUT GET
            void OutUser()
            {
                Debug.WriteLine(user.result);
            }                  
        }

} 
```

GET 类提供从服务器获取数据的功能

```
public class GET
{
    public static event Action Completed;
    public static String result = String.Empty;
    public static String username;
    public static String password;
    public static string myRequestData = string.Empty;
    public static  String urlAdress;
    public static void sendGETRequest()
    {
        System.Uri targetUri = new System.Uri(urlAdress);
        HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(targetUri);
        request.Method = "GET";
        request.Headers["X_USERNAME"] = username;
        request.Headers["X_PASSWORD"] = password;
        request.BeginGetResponse(new AsyncCallback(ReadWebRequestCallback), request);       
    }

    private static void ReadWebRequestCallback(IAsyncResult callbackResult)
    {           
        HttpWebRequest myRequest = (HttpWebRequest)callbackResult.AsyncState;
        HttpWebResponse myResponse = (HttpWebResponse)myRequest.EndGetResponse(callbackResult);

        using (StreamReader httpwebStreamReader = new StreamReader(myResponse.GetResponseStream()))
        {
            result = httpwebStreamReader.ReadToEnd();                
        }
        myResponse.Close();
        if (Completed != null)
            Completed();
    }
} 
```

因为我在进程中看到它在调用一段时间后返回字符串。如何将结果分配给变量。感谢提前

如果我打电话

```
Debug.WriteLine("Hellllllllllll" + json + "HHHHHHHHHHHHHH");

            JsonParsing jsonParsing = new JsonParsing(json);
            Debug.WriteLine("Hllllllllllll" + json + "HHHHHHHHHHHHHH");
            jsonParsing.GetListCardSet(); 
```

**结果是**

```
HllllllllllllHHHHHHHHHHHHHH
HllllllllllllHHHHHHHHHHHHHH
[{"id":"3","username":"a","password":"a"},{"id":"4","username":"bbbb\n","password":"aaa"},{"id":"5","username":"ab","password":"ab"},{"id":"6","username":"abc","password":"abc"},{"id":"7","username":"abc","password":"abc"},{"id":"8","username":"abcd","password":"abcd"},{"id":"9","username":"abcde","password":"abcde"},{"id":"10","username":"abcdef","password":"abcdef"},{"id":"11","username":"abcdef","password":"abcdef"},{"id":"12","username":"abcdef","password":"abcdef"},{"id":"13","username":"abcdef","password":"abcdef"},{"id":"14","username":"abcdef","password":"abcdef"},{"id":"15","username":"abcdef","password":"abcdef"},{"id":"16","username":"abcdef","password":"abcdef"},{"id":"17","username":"abcdef", 
```

# java - 如何处理拦截器绑定中的属性

> ID：10466284
> 
> 赞同：7
> 
> 时间：2012-05-05T21:53:45.443
> 
> 标签：java, java-ee-6, interceptor

我有一个注释：

```
@Inherited
@InterceptorBinding
@Retention(RUNTIME)
@Target({METHOD, TYPE})
public @interface Example {
} 
```

以及一个用于处理它的拦截器类：

```
@Interceptor
@Example
public class ExampleInterceptor implements Serializable {
...
} 
```

我想添加一个参数文本：

```
public @interface Example {
    String text();
} 
```

但是我不知道如何处理拦截器类中的参数。如何修改类的注解？

```
@Interceptor
@Example(text=???????)
public class ExampleInterceptor implements Serializable {
...
} 
```

如果我写`@Example(text="my text")`，拦截器只会在方法/类被注释时被调用`@Example(text="my text")`。但我希望拦截器在参数值上被独立调用 - `@Example(text="other text")`。

以及如何获取参数值？我必须使用反射还是有更好的方法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-15T10:51:29.830

使用注解时，每个属性值都会调用拦截器`@Nonbinding`。

注解：

```
public @interface Example {
    @Nonbinding String text() default "";
} 
```

拦截器：

```
@Interceptor
@Example
public class ExampleInterceptor implements Serializable {
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T22:21:38.453

首先，如果您只有一个参数，您可以命名它`value`，然后可以跳过参数名称（默认），=> 可以跳过 text= 部分，例如：

```
@Example("my text") //instead of @Example(test="My text")
public class ... 
```

要访问注解，您可以使用 、 或 type 上的方法，您`getAnnotation`必须先获得该方法。然后你会得到一个注解的实例，你可以在上面调用你的方法。`Class``Method``Field``Constructor`

```
Example example = getClass().getAnnotation(); //if you are inside the interceptor you can just use getClass(), but you have to get the class from somewhere
example.value(); //or example.text() if you want your annotation parameter to be named text. 
```

# php - SQL语法错误，不知道为什么

> ID：10466288
> 
> 赞同：-1
> 
> 时间：2012-05-05T21:54:16.767
> 
> 标签：php, sql

我正在尝试运行 PHP 脚本，但每当我运行它时我都会收到此错误。

错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''id', 'firstname', 'lastname', 'email', 'username', 'password', 'hash', 'active'' at line 1 
```

PHP：

```
<?php
require('includes/connect.php');

if($_POST['submit'] == true) {

    $firstname = mysql_real_escape_string($_POST['firstname']);
    $lastname = mysql_real_escape_string($_POST['lastname']);
    $email = mysql_real_escape_string($_POST['email']);
    $username = mysql_real_escape_string($_POST['username']);
    $password = mysql_real_escape_string($_POST['password']);
    $hash = mysql_real_escape_string(md5(uniqid(rand(), true)));
    $active = mysql_real_escape_string(0);

    $query = mysql_query(" INSERT INTO users_main ( 'id', 'firstname', 'lastname', 'email', 'username', 'password', 'hash', 'active' ) VALUES ( '', '" . $firstname . "', '" . $lastname . "', '" . $email . "', '" . $username . "', '" . $password . "', '" . $hash . "', '" . $active . "' ) ") or die(mysql_error());

} else {

}

?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T21:55:52.423

不要用单引号引用列名。MySQL 使用反引号来引用列和表标识符。

如果用作标识符，[一些特殊关键字需要用反引号引起来，但您没有使用任何这些。](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)您的所有专栏都不需要引用。

```
 $query = mysql_query(" INSERT INTO users_main ( id, firstname, lastname, email, username, password, hash, active ) VALUES ( '', '" . $firstname . "', '" . $lastname . "', '" . $email . "', '" . $username . "', '" . $password . "', '" . $hash . "', '" . $active . "' ) ") or die(mysql_error()); 
```

# google-maps - 以marker为中心，谷歌地图api

> ID：10466294
> 
> 赞同：0
> 
> 时间：2012-05-05T21:55:06.063
> 
> 标签：google-maps, events, google-maps-markers

我正在尝试在 Google 地图上显示几个标记，并允许用户在单击该标记时将地图置于标记的中心。

但是，当用户单击任何标记时，地图始终以我在代码中创建的最后一个标记为中心。

这是我正在使用的完整代码：

```
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0; padding: 0 }
  #map_canvas { height: 100% }
</style>
<script type="text/javascript"
  src="http://maps.googleapis.com/maps/api/js?key=MY_API_KEY&sensor=false">
</script>
<script type="text/javascript">
function initialize() {
var myOptions = {
  center: new google.maps.LatLng(-34, 150),
  zoom: 8,
  mapTypeId: google.maps.MapTypeId.ROADMAP
};
var map = new google.maps.Map(document.getElementById("map_canvas"),
    myOptions);

var myLatLng = new google.maps.LatLng(34,-150);

var marker = new google.maps.Marker({
    position: myLatLng,
    map: map,
    title:'test' + 1
});

google.maps.event.addListener(marker, 'click', function(){map.setCenter(marker.getPosition());});

myLatLng = new google.maps.LatLng(20,-87);

var marker = new google.maps.Marker({
    position: myLatLng,
    map: map,
    title:'test' + 2
});

google.maps.event.addListener(marker, 'click', function(){map.setCenter(marker.getPosition());});

}
</script>
</head>
<body onload="initialize()">
<div id="map_canvas" style="width:100%; height:100%"></div>
</body>
</html> 
```

花了一段时间，咨询了谷歌地图 api 参考，但就是不知道为什么它不起作用。

任何见解表示赞赏 - 谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-14T11:37:12.767

> ```
> mMap.setOnMarkerClickListener(new OnMarkerClickListener() 
>       {
>           @Override
>           public boolean onMarkerClick(Marker marker)
>           {
>               int yMatrix = 200, xMatrix =40;
> 
>               DisplayMetrics metrics1 = new DisplayMetrics();
>               getWindowManager().getDefaultDisplay().getMetrics(metrics1);
>               switch(metrics1.densityDpi)
>               {
>               case DisplayMetrics.DENSITY_LOW:
>                   yMatrix = 80;
>                   xMatrix = 20;
>                   break;
>               case DisplayMetrics.DENSITY_MEDIUM:
>                   yMatrix = 100;
>                   xMatrix = 25;
>                   break;
>               case DisplayMetrics.DENSITY_HIGH:
>                   yMatrix = 150;
>                   xMatrix = 30;
>                   break;
>               case DisplayMetrics.DENSITY_XHIGH:
>                   yMatrix = 200;
>                   xMatrix = 40;
>                   break;
>               case DisplayMetrics.DENSITY_XXHIGH:
>                   yMatrix = 200;
>                   xMatrix = 50;
>                   break;
>               }
> 
>               Projection projection = mMap.getProjection();
>               LatLng latLng = marker.getPosition();
>               Point point = projection.toScreenLocation(latLng);
>               Point point2 = new Point(point.x+xMatrix,point.y-yMatrix);
> 
>               LatLng point3 = projection.fromScreenLocation(point2);
>               CameraUpdate zoom1 = CameraUpdateFactory.newLatLng(point3);
>               mMap.animateCamera(zoom1);
>               marker.showInfoWindow();
>               return true;
>           }
>       }); 
> ```

# vb.net - 设置 ListBox 项的标记

> ID：10466298
> 
> 赞同：2
> 
> 时间：2012-05-05T21:55:49.900
> 
> 标签：vb.net, winforms

是否可以设置`Tag`单个项目的属性，`ListBox`而不仅仅是整个控件？

我试过

```
listbox.Items(i).Tag = "Test" 
```

不幸的是没有任何运气。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T23:12:05.250

这不是 ListBox 的工作方式。它没有像 TreeView 或 ListView 那样的专用项目类型，也没有 ListBoxItem 类。所以也没有 Tag 属性。

ListBox 更为通用，它在其 Items.Add() 方法中接受*任何对象。*规则是您添加的任何对象都需要覆盖 ToString() 方法。这就是 ListBox 用来显示项目文本的方法。这也消除了对 Tag 属性的需要。只需将您返回的对象`listBox1.Items[listBox1.SelectedIndex]`转换回您的类类型即可。

如果这很难处理，请考虑 ListView，将其 View 属性设置为 List 也会为您提供一个列表框。使用您添加的 ListViewItems 的 Tag 属性。

# objective-c - Objective-c 中的贝塞尔曲线算法需要调整

> ID：10466302
> 
> 赞同：3
> 
> 时间：2012-05-05T21:56:02.257
> 
> 标签：objective-c, bezier

[我在objective-c](https://stackoverflow.com/questions/10458596/bezier-curve-algorithm-in-objective-c)中问了一个快速的问题贝塞尔曲线算法似乎解决了我的问题。我在问这个新问题，因为我认为它足够不同，而不是重新利用旧问题。

我有一个看起来像工作贝塞尔曲线算法的东西，但与内置`NSBezierPath`版本相比，存在一些主要问题。看起来某些类型的曲线非常扭曲。

![示例问题](../Images/15b285ec7476ce270117dc7bbb7dfdca.png)

从上图中可以看出区别，红线是我的功能，浅色是内置版本。我*并不*期待和 exat 匹配，像素对像素，但正如你所看到的，红线有时会偏离轨道。

我列出的第一个方法是调用 2 Bezier 方法，它表明两个版本的输入相同。

```
- (void)MakeBezier
{
    int x1 = [self getMegaNumber:2];
    int y1 = self.frame.size.height - [self getMegaNumber:2];
    int x2 = [self getMegaNumber:2];
    int y2 = self.frame.size.height - [self getMegaNumber:2];
    int x3 = [self getMegaNumber:2];
    int y3 = self.frame.size.height - [self getMegaNumber:2];
    int x4 = [self getMegaNumber:2];
    int y4 = self.frame.size.height - [self getMegaNumber:2];
    int cnt = [self getMegaNumber:2]; 

    NSBezierPath *bezierPath = [[NSBezierPath alloc] init];
    [bezierPath setLineWidth:1.0f];
    [bezierPath moveToPoint:NSMakePoint(x1, y1)];
    [bezierPath curveToPoint:NSMakePoint(x4, y4) controlPoint1:NSMakePoint(x2, y2) controlPoint2:NSMakePoint(x3, y3)];

    // Draw path to image with build in NSBezierPath
    [self drawPath:bezierPath fill:NO];

    // Draw path with custom algorithm    
    [self drawBezierFrom:NSMakePoint(x1, y1) to:NSMakePoint(x4, y4) controlA:NSMakePoint(x2, y2) controlB:NSMakePoint(x3, y3) sections:cnt color:4];
} 
```

下一个方法是用于在示例图像中绘制红线的自定义算法。

```
- (void)drawBezierFrom:(NSPoint)from to:(NSPoint)to controlA:(NSPoint)a controlB:(NSPoint)b sections:(NSUInteger)cnt color:(NSUInteger)color
{
    float qx, qy;
    float q1, q2, q3, q4;
    int lastx = - 1, lasty;
    int plotx, ploty;
    float t = 0.0;

    while (t <= 1)
    {
        q1 = t*t*t*-1 + t*t*3 + t*-3 + 1;
        q2 = t*t*t*3 + t*t*-6 + t*3;
        q3 = t*t*t*-3 + t*t*3;
        q4 = t*t*t;

        qx = q1*from.x + q2*a.x + q3*to.x + q4*b.x;
        qy = q1*from.y + q2*a.y + q3*to.y + q4*b.y;

        plotx = round(qx);
        ploty = round(qy);

        if (lastx != -1)
            [self drawLineFrom:NSMakePoint(lastx, lasty) to:NSMakePoint(plotx, ploty) color:color];
        else
            [self drawLineFrom:NSMakePoint(from.x, from.y) to:NSMakePoint(plotx, ploty) color:color];

        lastx = plotx;
        lasty = ploty;
        t = t + (1.0/(cnt + 0.0f));
    }
    [self drawLineFrom:NSMakePoint(lastx, lasty) to:NSMakePoint(to.x, to.y) color:color];
} 
```

所以我的问题是；自定义算法是否存在问题，或者它只是缺少特定类型线条的边缘情况，还是其他什么？无论哪种方式，在修复算法方面的任何帮助都将非常感激。重申一下，我*不是*在寻找像素完美匹配，而是希望曲线能够排列在一起。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T22:17:33.013

[在这里查看](http://en.wikipedia.org/wiki/Bezier_curve#Cubic_B.C3.A9zier_curves)维基百科页面，您的 q1-q4 系数似乎不正确。它们不应该是对称的吗？

似乎 to.x 和 bx 也应该交换：

```
qx = q1*from.x + q2*a.x + q3*to.x + q4*b.x;
qy = ... 
```

# soap - Mule 中的字段掩蔽

> ID：10466303
> 
> 赞同：1
> 
> 时间：2012-05-05T21:56:02.670
> 
> 标签：soap, esb, mule, masking

在将某个字段记录到文件时，我希望能够从 Mule 中的当前消息有效负载中屏蔽某个字段。我要屏蔽的字段是 SOAP 有效负载中的敏感值（例如帐号或社会保险号）。这是为了消除安全风险。但是，我还需要稍后在屏蔽它之后使用该值。

**我目前的做法**

我将当前的 #[payload] 存储在会话中，然后使用 XSLT 转换器修改当前的有效负载以用 * * * * 替换敏感数据。现在，我可以将有效负载添加到日志中，敏感数据将不会完整显示。然后，当我需要数据时，我会从会话中读取它。

这种方法感觉有些不对劲。感觉更像是一种解决方法。有没有更好的方法在骡子中进行掩蔽？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T18:58:57.390

写入日志听起来不像是你必须同步做的事情。

你不能只是“异步”xslt 转换器和记录器吗？这将使原始消息在异步之外保持不变。

# wpf - WPF/Prism 应用程序中初始化完成时的事件

> ID：10466304
> 
> 赞同：3
> 
> 时间：2012-05-05T21:56:08.910
> 
> 标签：wpf, prism

在非 Prism WPF 应用程序中，如果我想在初始化后运行代码（例如执行命令行参数指定的任务），我可以`Loaded`在主窗口的事件中执行。但是对于 Prism，模块是在显示主窗口后初始化的，即在和`IModule.Initialize()`之后调用。在这种情况下，我应该使用哪个事件/覆盖？`Bootstrapper.CreateShell()``Bootstrapper.InitializeShell()`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T22:15:00.063

最后调用的`UnityBootstrapper.Run(bool runWithDefaultConfiguration)`是`InitializeModules()`（除了调用 Logger.Log）。所以覆盖 Run(...)。

```
class Bootstrapper : UnityBootstrapper
{
    ...
    public override void Run(bool runWithDefaultConfiguration)
    {
        base.Run(runWithDefaultConfiguration);

        // modules (and everything else) have been initialized when you get here
    }
} 
```

# google-apps-script - 如何向 Gmail 中的 HTML 按钮添加功能

> ID：10466312
> 
> 赞同：2
> 
> 时间：2012-05-05T21:57:18.153
> 
> 标签：google-apps-script

我最近制作了一个在 Google 表单的提交上运行的 Google Apps 脚本。它会自动将表单中捕获的信息以 html 格式通过电子邮件发送给审批经理。

我试图通过在电子邮件中包含两个按钮来添加额外的工作流程——“批准”和“拒绝”。但是，我无法将功能附加到这些按钮（例如，提交按钮会将电子邮件转发到 X 等）。

如果有人能帮助我解决这个问题，我将不胜感激 - 我无法找到/理解在线解决方案，我担心我可能会在这方面不知所措。下面是我的代码：

```
 function notfiy(e) {

  var username = e.values[1].toString();
  var requestfor =  e.values[2].toString();
  var location =e.values[3].toString();
  var department = e.values[4].toString();
  var phonenumb = e.values[5].toString();
  var extension = e.values[6].toString();
  var approver = e.values[7].toString();
  var computer = e.values[8].toString();
  var monitor = e.values[10].toString();
  var accessories = e.values[12].toString();

  var html = 
    '<body>' +
    +'<h2>'+ username + ' has submitted a request to purchase equipment for ' + requestfor + ' </h2>' + '<br>' + '<br>' +
    'Location: ' + location +
    '<br> Department: ' + department +
    '<br> Phone Number: ' + phonenumb +
    '<br> Extension: ' + extension +
    '<br> <br> The following materials have been requested for purchase: ' +
    '<br> <br> Software: ' +
    '<br> Computer: ' + computer +
    '<br> Monitor: ' + monitor +
    '<br> Computer Accessories: ' + accessories + '<br> <br> The ship to location for said materials is :' + '<br> <br> <br> <br>' +

    '<input type="submit" value="Approve" />' + '<br>'+
    '<input type="submit"  value="Deny" />' +
    '</body>'; 

    MailApp.sendEmail(approver, "Equipment Request: " + username, 'No html body);', {htmlBody: html});

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T15:16:47.340

我添加了有关如何完成此操作的视频教程： [https ://sites.google.com/site/scriptsexamples/home/announcements/emailapprovalusinggooglescriptandaform](https://sites.google.com/site/scriptsexamples/home/announcements/emailapprovalusinggooglescriptandaform)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T23:31:50.810

您只需在 html 正文中使用一个表单，但是，我有一些奇怪的行为，您进行了一次批准并且工作正常，但在下一个 Gmail 认为您已经发送它并且不会再次打开对话框。

我一直在做的是使用可以看起来像按钮的标准链接（锚点）。这些将带您进入已发布的 UiApp 页面，其中选择添加到 url 的末尾。批准=真。

这是在 e.parameter 中传递的，因此：

```
doGet(e){
 var approve = e.parameter.approve;
 //do something with the info. 
} 
```

您可以在本教程中看到一些这种行为：http: [//googlescriptexamples.com/tickets](http://googlescriptexamples.com/tickets)和 Google Script Book 中的工作流程章节的工作方式是这样的。

# c# - Nancy 测试项目找不到视图

> ID：10466315
> 
> 赞同：6
> 
> 时间：2012-05-05T21:57:36.453
> 
> 标签：c#, unit-testing, nancy

尝试从测试项目中测试 Nancy 模块时遇到了一些障碍。我的测试代码看起来很标准：

```
[TestMethod]
public void Should_return_status_ok_when_route_exists()
{
    // Given
    var bootstrapper = new DefaultNancyBootstrapper();
    var browser = new Browser(bootstrapper);

    // When
    var result = browser.Get("/", with =>
    {
        with.HttpRequest();
    });

    // Then
    Assert.AreEqual(result.StatusCode, HttpStatusCode.OK);
} 
```

当我的模块尝试渲染视图时，我得到一个无法找到视图异常。如果我正常运行项目，模块会找到视图。只有在从测试项目中调用时，模块才能找到它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T06:29:32.050

问题是视图不在您的测试项目附近，并且由于 IRootPathProvider 指向错误的位置，因此无法找到它们。解决这个问题的两种方法是使用 ConfigurableBootstrapper （它或多或少与默认的相同，但在初始化时可以覆盖东西）并告诉它使用您的自定义根路径提供程序

```
var bootstrapper = new ConfigurableBootstrapper(with => {
    with.RootPathProvider<CustomRootPathProvider>();
}); 
```

然后，您将实施`public class CustomRootPathProvider : IRootPathProvider`并将其指向正确的位置。

第二种解决方案是将您的视图设置为始终复制到输出目录，我相信这也应该解决它

# iphone - 重用 nsdateformatter 将日期显示为字符串

> ID：10466321
> 
> 赞同：2
> 
> 时间：2012-05-05T21:58:16.670
> 
> 标签：iphone, nsdateformatter

抱歉，如果这是一个菜鸟问题，但是当我开始学习编程时，我被一些简单的事情绊倒了。如果我在我的一个 ViewController 中使用 NSDateFormatter 以某种格式显示我想要的日期，并且格式没有改变，那么将 NSDateFormatter 声明为我的类的 ivar 或我的类的属性是“最佳实践”吗并在 viewDidLoad 中对其进行初始化，以便我可以在不同的方法中重用它？现在我只是在需要它时在一个处理显示的方法中实例化一个，并且想知道是否最好继续声明它，或者声明一次并在整个 viewController 类中使用它。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T22:26:12.057

这不是一个“菜鸟问题”；这是一个有合理答案的合理问题。

从纯粹的效率角度来看，您过早地进行了优化。别担心，开心就好。如果你正确地管理内存（这样你就不会泄漏 NSDateFormatters），那么你如何获得一个特定的实例并不重要，特别是考虑到这是一个如此轻量级的对象。如果你在一个循环中创建一个新的 NSDateFormatter 1000 次，那你就傻了，但如果你不时地创建对象，当你需要它并且它会正常地恢复存在时，这没什么大不了的。

另一方面，从架构的角度来看，请确保您所做的是 DRY。如果日期格式化程序根本需要任何配置，请不要在每次创建时重复自己；编写一个方法，每次都以相同的方式提供日期格式化程序，以便配置代码都在一个地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T22:17:59.017

实例化新对象总是以内存和计算时间为代价的，所以如果可以不费力气，你应该尝试声明一次然后重用它，至少在同一个类中。`NSDateFormatter`但是，它不是线程安全的，因此您不能简单地在不同线程之间共享一个实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T22:24:41.147

对于任何对象，最佳实践是在运行时声明它，使用它并释放它，以便该对象在内存中占用的时间保持最大。

当我们需要该 ivar 的值在整个班级中相同时，我们会创建一个 ivar，就像员工的任何年龄一样，它将在不同的方法中进行检查，如资历、ageWise 类别等。如果这个 iVar 是一个对象，那么在 iPhone 中，始终将其用作属性是一个好习惯，这样内存管理问题就会转移到编译器端。

现在，在您的情况下，您可以生成一个简单的方法，该方法将获取日期对象并返回字符串，或任何字符串作为参数并返回日期对象，在那里创建一个 NSDateFormater 并使用它。无需将其设为 iVar。

# iphone - UITableView 分组样式更改单元格角半径

> ID：10466322
> 
> 赞同：1
> 
> 时间：2012-05-05T21:58:23.567
> 
> 标签：iphone, ios, uitableview

如何更改分组样式 UITableView 内的单元格角半径？

# android - 如何处理 Android 设备上的物理相机按钮

> ID：10466326
> 
> 赞同：0
> 
> 时间：2012-05-05T21:58:51.920
> 
> 标签：android, camera

我有一个 Droid X，它有一个物理相机按钮。我正在使用这里使用的示例：http: [//marakana.com/forums/android/examples/39.html](http://marakana.com/forums/android/examples/39.html)

该应用程序的作品。屏幕上的按钮捕获并显示预览图像。但是如果我按下物理相机按钮，应用程序就会崩溃。

我应该如何处理这个问题，更重要的是 - 这是否会在不同的有/没有物理按钮的设备上引起问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T22:04:47.660

你需要覆盖`onKeyDown`你的`Activity`

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {

    if(event.getAction() == KeyEvent.ACTION_DOWN)
    {
        switch(keyCode)
        {
        case KeyEvent.KEYCODE_CAMERA:
           // handle the event here
        }
    }

    return super.onKeyDown(keyCode, event);
} 
```

# java - 绘制两次时的Java小程序2d图形绘制问题（黑色部分）

> ID：10466328
> 
> 赞同：0
> 
> 时间：2012-05-05T21:59:02.800
> 
> 标签：java, applet, drawing, 2d

所以我做了一个控制台游戏，我想把它做成 2d 的。到目前为止一切都很好。我有运动和其他工作正常。画得很好，直到我有了这个想法。

（我的“地图”是一个 Tile[][] ）我想在创建一个代表图层的类时，一个可播放的地图将是一个 Layer[] 并且我会将这些图层相互绘制，并可能将一些存储在内存中更快的绘图。

我认为这是一个“好”/“好”的主意。（如果有人能告诉我这是否是个好主意，我将不胜感激）

问题是当我使用 2 层时，第二层总是弄乱第一层。我用来绘制“地图”的代码如下所示：

```
 for (TileLayer layer : layers)
        g.drawImage(layer.getImage(), 0, 0, null); 
```

layer.getImage() 是正确的（可以肯定的是，仅适用于一层）。问题是，当我绘制 2 层时，第二层将第一层中的所有内容都涂黑。我有这样的图层绘制代码：

```
 BufferedImage img = new BufferedImage(tiles.length * Tile.TILE_SIZE,
                                          tiles[0].length*Tile.TILE_SIZE, 
                                          ColorSpace.TYPE_RGB);

    for (int x = 0; x < tiles.length; x++) {
        for (int y = 0; y < tiles[0].length; y++) {
            //System.out.println("ID:" + tiles[x][y].getId());
                img.getGraphics().drawImage(tiles[x][y].getImage(),
                                        x * Tile.TILE_SIZE,
                                        y * Tile.TILE_SIZE,
                                        null);
        }
    } 
```

它是一个 java 小程序，我覆盖了“paint”，我已经改变了它。我尝试使用透明图像来表示“空气”（认为这应该工作可能搞砸了）。尝试添加一个条件以防止在不应该绘制的情况下绘制。

我可能做了一些以错误方式工作的东西。帮助以正确的方式做到这一点会很好。（或者告诉我哪里可能错了）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T22:51:58.323

在示例中，您似乎使用了错误的常量作为 BufferedImage 类型。

如果您希望 BufferedImage 允许透明，请将最后一个参数设置为 BufferedImage.TYPE_INT_ARGB（或 BufferedImage 上最后一位具有“A”的类型常量之一）。

# c# - 无法让控制器工作的多个参数

> ID：10466330
> 
> 赞同：1
> 
> 时间：2012-05-05T21:59:05.920
> 
> 标签：c#, jquery, asp.net-mvc-3, parameters, controller

这是我认为的jquery：

```
 $("#btnSelect1").click(function () {
        var donationTypeID = $(this).closest('p').find('#selectList').val();
        var id = parseInt(donationTypeID);
        var id2 = $('#person').val();
        var persId = parseInt(id2);

        // var personName 
        var route = '/Donation/ContinueDonation/' + id + '?personId =' + persId;

        $("#donationSection1").load(route, function () {...});... 
```

这是控制器方法

```
 public ActionResult ContinueDonation(int id, int personId)
    {} 
```

关于如何让它发挥作用的任何想法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T02:54:03.160

我实际上认为以前的答案并不完全正确。如果查询字符串命中了 MVC 建立的默认路由，该路由与 {controller}/{action}/{id} 之类的 URL 匹配，则您的查询字符串是正确的。

真正发生的事情是您弄乱了路由，而您的查询要么没有达到默认路由，要么您更改了它。

我要做的是获取 RouteDebugger（只需通过 nuget 获取）并查看您的查询字符串命中哪个路由。您可以为您希望的任何 URL 设置路由（类似于友好 URL 的全部要点），因此如果您希望路由为 /ContinueGiving/{id}/{personId} 您可以通过添加路由来做到这一点在路由的开头添加如下定义：

```
 routes.MapRoute(
    name: "ContinueDonation",
    url: "ContinueGiving/{id}/{personId}",
    defaults: new { controller = "Donation", action = "ContinueDonation" },
    constraints: new { id = @"\d+", personId = @"\d+" }
); 
```

如果框架可以在发布的值、查询字符串等中找到任何匹配项，则您未指定的任何参数都将被映射。

约束确保该路由仅在传递的参数是数字时才匹配。

所以以前的答案有效，因为不知何故，带有 id 的路线不匹配，但这不是你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T22:01:11.363

您没有提供 id 值的键：

```
var route = '/Donation/ContinueDonation/?id=' + id + '&personId =' + persId; 
```

* * *

顺便说一句，该`var persId = parseInt(id2);`行是多余的，因为使用 HTTP 发送的每个参数都是一个字符串，因此`"234"`和`234`完全相同。

# c# - c#在datagrid中显示数字，带小数点分隔符

> ID：10466339
> 
> 赞同：0
> 
> 时间：2012-05-05T22:01:10.447
> 
> 标签：c#, winforms, datagrid, decimal

我打赌我看起来不太好，但我似乎找不到以下问题的答案：

我有一个 Datagrid，它将显示多个带有数字的列，有些列将超过千位，但我似乎无法让它显示小数分隔符，我将数字保存为十进制值，但它不会显示它。

感谢您花时间看我的问题:)

编辑：这是关于在 Windows 窗体的数据网格中显示它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T22:14:22.773

尝试[`Format`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridtextboxcolumn.format.aspx)在您的`DataGridTextBoxColumn`. 您所追求的格式大概是`"N0"`，它显示千位分隔符但没有小数位。

```
 DataGridTextBoxColumn textColumn = new DataGridTextBoxColumn();
 textColumn.HeaderText = "My Numbers";
 textColumn.ReadOnly = true;
 textColumn.Format = "N0";
 text 
```

**编辑**：如果您希望您的数字始终保持一致的格式，无论运行应用程序的机器的文化如何，那么您也应该设置`FormatInfo`。

> [`CultureInfo`](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.aspx)用于计算机确定实际货币格式。您可以通过将属性设置为使用适当的文化 ID 构造的新实例来更改`CultureInfo`for a 。`DataGridTextBoxColumn`[`FormatInfo`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridtextboxcolumn.formatinfo.aspx)`CultureInfo`

例如，如果您在德国并且总是希望千位分隔符显示为句点（例如`12.345.678`）而不是逗号（例如`12,345,678`），请使用：

```
 textColumn.FormatInfo = new CultureInfo("de-DE"); 
```

您可以通过在启动时设置[Application.CurrentCulture](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.currentculture.aspx)属性来更改整个应用程序的文化，从而获得更好的一致性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-16T09:32:28.643

对于 DataGridView，其 DataGridViewTextBoxColumn 没有 Format 属性，我们需要设置格式如下：

```
var col = new DataGridViewTextBoxColumn();
var colFormat = new DataGridViewCellStyle();
colFormat.Format = "N0";
col.DefaultCellStyle = colFormat; 
```

# android - Android 显示数据，如 Guardian 应用

> ID：10466345
> 
> 赞同：2
> 
> 时间：2012-05-05T22:02:46.840
> 
> 标签：android

我正在寻找一个简单的示例，说明如何以与 Guardian 应用程序相同的方式（包括左侧的图像）在屏幕上显示数据，我从 php 页面中提取数据，如下面的屏幕截图所示。我只是在互联网上找不到任何符合此描述的示例。

[https://play.google.com/store/apps/details?id=com.guardian&hl=en](https://play.google.com/store/apps/details?id=com.guardian&hl=en)

对不起，这似乎是一个简单的问题:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T22:26:59.583

我认为这些应该有所帮助。

在 stackoverflow 上，除其他外：
[SO - ListView 和 images](https://stackoverflow.com/questions/3616971/listview-and-images)，它们还链接到
[SO - 在 ListView 中延迟加载图像](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview/3068012#3068012)

外部：
[vogella.com - Android ListView 和 ListActivity - 教程](http://www.vogella.com/articles/AndroidListView/article.html)
[Ben 的博客 - 在 Listview 中延迟加载图像](http://negativeprobability.blogspot.co.uk/2011/08/lazy-loading-of-images-in-listview.html)

# javascript - JavaScript / Safari 扩展检查应用程序可用性

> ID：10466348
> 
> 赞同：2
> 
> 时间：2012-05-05T22:03:23.997
> 
> 标签：javascript, safari, safari-extension, url-scheme

我构建了一个 Safari 扩展。它可以通过自定义 URL-Type 打开我的原生 Mac 应用程序。

是否可以检查我要打开的应用程序是否安装在计算机上（我可以打开网址`myapp://`）吗？关于如何在 JavaScript 中实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T22:27:40.590

是的

使用 window.location.assign(" *URL* ");

# xcode - XCODE 故事板，横向视图

> ID：10466349
> 
> 赞同：0
> 
> 时间：2012-05-05T22:03:30.337
> 
> 标签：xcode, nib, landscape

我使用 Storyboards 创建了一个应用程序，并将其设计为横向。

在视图 controller.m 文件中，我放置了以下代码：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
{
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft) ||
        (interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

我也尝试了该代码的一百万种变体，结果都相同。

此外，我还更改了 info.plist 中支持的方向，当然也制作了情节提要横向。但是，当我模拟时，最初的启动是横向的，然后子导航窗口会恢复为纵向。所以，我的问题是，如何在使用情节提要时覆盖肖像默认值（意思是，没有笔尖）？我是制作应用程序的新手——所以对于你们和你们的大脑来说，这可能是一件非常简单的事情，所以我认为这值得一问。我准备好接受你的笑声和对我新手行为的指指点点。=]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T23:39:11.277

您是否将您的自定义控制器类（您已覆盖 shouldAutorotateToInterfaceOrientation 方法）与情节提要中的场景相关联？如果不是，您需要确保在情节提要编辑器中场景的身份检查器的自定义类部分中引用了此类。

我喜欢在 shouldAutorotateToInterfaceOrientation 方法中使用这条指令来确保只支持横向：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return UIDeviceOrientationIsLandscape(interfaceOrientation);
} 
```

您可以查看本教程作为 ios5 中故事板的介绍：http: [//blogs.interknowlogy.com/2012/01/16/introduction-to-ios-5-storyboards-part-1/](http://blogs.interknowlogy.com/2012/01/16/introduction-to-ios-5-storyboards-part-1/)

# cocoa-touch - 在我的 iPad 应用程序中拖放

> ID：10466350
> 
> 赞同：1
> 
> 时间：2012-05-05T22:03:30.570
> 
> 标签：cocoa-touch, drag-and-drop, uikit, uiimageview

我已经从 SO 上的另一位绅士那里改编了这段代码。到目前为止它工作得很好，但是在我的应用程序中，我计划有很多可以移动的图像视图/按钮。实现这一点的最佳方法是什么？也许将对象放入数组并使用枚举器？如果其他人做过类似的事情，我们将非常感谢您朝正确的方向轻推！顺便说一句，它们在视图中都有不同的坐标

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.

UIPanGestureRecognizer *panGesture = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(dragGesture:)];

[dragImage addGestureRecognizer:panGesture];
[dragImage setUserInteractionEnabled:YES];
}

#pragma mark -
#pragma mark UIPanGestureRecognizer selector
- (void) dragGesture:(UIPanGestureRecognizer *) panGesture{

CGPoint translation = [panGesture translationInView:self.view];

switch (panGesture.state) {
    case UIGestureRecognizerStateBegan:{
        originalCentre = dragImage.center;
    }
        break;
    case UIGestureRecognizerStateChanged:{
        dragImage.center = CGPointMake(dragImage.center.x + translation.x,
                                       dragImage.center.y + translation.y);
    }
        break;
    case UIGestureRecognizerStateEnded:{            
        if (((dragImage.center.x >= 280) && (dragImage.center.y >= 280) &&
            (dragImage.center.x <= 450) && (dragImage.center.y <= 450))) {

            dragImage.center = CGPointMake(300, 300);
            [dragImage setUserInteractionEnabled:NO];
            break;
        }
        [UIView animateWithDuration:0.5 
                         animations:^{
                             dragImage.center = originalCentre;
                         }
                         completion:^(BOOL finished){
                         }];
    }
        break;
    default:
        break;
}

[panGesture setTranslation:CGPointZero inView:self.view];
}

-(IBAction)clear{
[UIImageView animateWithDuration:0.5 animations:^{
dragImage.center = CGPointMake(100, 200);
}];

[dragImage setUserInteractionEnabled:YES];
} 
```

非常感谢您花时间阅读这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T22:09:05.100

您可以使用`recognizer.view`来确定正在移动的视图。不要总是改变`drawImage`，只需使用`recognizer.view`. *当识别器开始时，如果它是您不想*拖放的子视图，请确保取消它（通过设置`enabled`为`NO`then ）。`YES`

 *您可能需要根据要移动的视图更改其中的一些神奇数字。*

# jquery - jQuery：单击功能未捕获超链接上的单击事件

> ID：10466353
> 
> 赞同：5
> 
> 时间：2012-05-05T22:04:51.677
> 
> 标签：jquery, click

我有以下一段代码

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>
        $('body').on('click', 'a.wishlist_item', function(){
            alert('asas');
            return false;
        })
    </script>
</head>
<body>
<a class="wishlist_item" id="wishlist_item" href="#" >Add to wishlist</a>
</body>
</html> 
```

当我单击带有wishlist_item 类的超链接时，代码应该会发出警报。但它不起作用..在这段代码中我可能做错了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T22:06:55.043

您必须在元素存在后绑定事件。加载所有页面时使用`ready`事件运行代码：

```
$(document).ready(function(){
  $('body').on('click', 'a.wishlist_item', function(e){
    alert('asas');
    e.preventDefault();
  });
}); 
```

# ruby - Mac OS 是否支持 Ruby 1.9.3？还是我应该坚持使用 1.8.7？

> ID：10466357
> 
> 赞同：1
> 
> 时间：2012-05-05T22:05:02.720
> 
> 标签：ruby, macos, ruby-1.9.3

Mac OS 是否支持 Ruby 1.9.3？还是我应该坚持使用 1.8.7？我是 OS X 的新手，正在设置我的 Ruby 开发环境。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T04:17:36.540

从技术上讲，没有。所以我对你的问题+1，目前有两个反对意见。

根据 Ruby 在[Supported Platforms](http://bugs.ruby-lang.org/projects/ruby-trunk/wiki/SupportedPlatforms)上的 wiki 页面，OS X 不是“支持”的，而仅仅是 Ruby 1.9.3 和 Ruby 1.9.1 的“尽力而为”。Ruby 1.9.3 没有“支持”平台，Ruby 1.9.1 仅支持 IA32 上的 Debian GNU/Linux 4.0。

[然而，就MRI Ruby 团队而言](http://bugs.ruby-lang.org/issues/4996)，Ruby 1.8.7 很快就会走到生命尽头，我不会指望 Apple 会对 Ruby 1.8.7 进行太多维护。所以无论如何都要使用 1.9.3。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T22:18:36.107

是的。

您可以从[源代码](https://ftp.ruby-lang.org/pub/ruby/1.9/)或使用[Homebrew](https://brew.sh/)安装它，或者使用[rbenv](https://github.com/rbenv/rbenv)或[RVM](https://rvm.io//)来管理多个 Ruby 版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T04:22:58.263

我也投了赞成票。这是一个很好的问题。

我几乎所有的开发工作都使用 Ruby 1.9.3。我强烈推荐使用它。

Ruby 1.8.7 较旧、速度较慢，并且已没有时间提供支持。

我还建议使用 RVM（Ruby 版本管理器）在您的机器上安装所有 Ruby。这是安装它的链接：

[https://rvm.io//rvm/install/](https://rvm.io//rvm/install/)

安装 RVM 后（其网页上的步骤很好），然后键入以下内容来安装 Ruby 1.9.3：

```
rvm install ruby-1.9.3-p125 
```

这将为您带来最新版本的 Ruby 1.9.3 并在您的机器上安装它。

# java - 可扩展的自动电子邮件分类服务

> ID：10466360
> 
> 赞同：3
> 
> 时间：2012-05-05T22:05:17.147
> 
> 标签：java, ruby, email, scalability

我们目前正在开发一个应用程序，使用户能够注册一个或多个电子邮件帐户，以便他的电子邮件可以自动分类。前端已经使用 Ruby 实现，但是后端（电子邮件分类器）是用 java 编写并使用 WEKA API。问题是我们如何以可扩展的方式（同时处理大量用户）将前端（用 Ruby 编写的 Web 界面）与后端（用 java 编写的电子邮件分类器）集成在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T22:24:43.777

我不确定什么是电子邮件分类器。但在任何类似问题中，我建议为您的 java 服务创建一个 RESTful API 的最佳解决方案。这可以使用正确的工具非常优雅地完成。API 应该通过返回 JSON 的 HTTP。使用像[Jackson](http://jackson.codehaus.org/)这样序列化为 JSON 的库。

在 ruby​​ 方面，您可以轻松解析 JSON 并反序列化。

这是一个非常可扩展的解决方案，因为 HTTP 调用是无状态的并且已经可扩展。线程被使用并被丢弃。如果您需要更多电力，那么只需添加更多机器。

Rails 应用程序也可以开始缓存一些调用。但这是过早的优化。

如果没有逻辑并且只有一个公共数据库，那么只需在两个应用程序之间共享该公共数据库即可。但听起来 Java 应用程序需要做一些工作。这是 API 的常用方法。它也不限制您使用 Ruby。您可以为 AJAX 或任何其他可以理解 JSON 的客户端创建 JSONP 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:51:51.100

随着您用于训练分类器的数据量的增长，您可能会发现您可能想要使用集成算法（其中一组 n 个节点形成集成）并将训练数据拆分到每个 n 个节点上.

要对新数据点进行分类，您可以使用投票系统，其中 n 个节点中的每一个节点都可以“投票”决定新数据点应该被分类为什么。得票最多的分类获胜。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T09:07:29.600

如果您想要一个新的电子邮件警报，只需反转您正在公开的 RESTful API。与其将 Java 应用程序公开为 RESTful API，不如公开 Rails 应用程序 API。例如`/user/ID/newmail`.

然后，当收到新电子邮件时，Java 应用程序将调用 Rails 应用程序。

顺便提一句：

您是如何在 Java 中实现一个可扩展的系统来检查 1000 个电子邮件帐户的？

# javascript - slideToggle 隐藏高度不为零

> ID：10466366
> 
> 赞同：0
> 
> 时间：2012-05-05T22:05:33.357
> 
> 标签：javascript, jquery, css, height, slidetoggle

我目前正在 jQuery 中获取#rightDesc 的高度并使用它来决定#rightHistory 的高度，这两个都是div。

```
$('#rightHistory').height($('#rightMiddleCenter').innerHeight() - $('#rightDesc').outerHeight() - $('#rightDescToggle').outerHeight()); 
```

布局如下：

```
<div id="rightMiddleCenter">
    <div id="rightDesc">
    </div>
    <div id="rightDescToggle">
        Toggle Descriptions
    </div>
    <div id="rightHistory">
    </div>
</div> 
```

CSS：

```
#rightMiddleCenter{
float:left;
height:100%;
width:260px;
}
#rightDesc{
padding:0 0 10px;
}
#rightDescToggle{
padding:5px 5px 5px 0;
cursor:pointer;
}
#rightHistory{
} 
```

我现在决定让#rightDesc 可以使用slideToggle 切换，但是当它隐藏时，jQuery 仍然返回它的完整高度。这导致#rightHistory 的高度不会改变，也不会占用应有的空间量。任何人都可以提出解决方案吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T22:15:49.163

当您使用`visibility:hidden`or`display:none`方式隐藏元素时，元素的高度和宽度不会改变，只是不可见。

编辑：我建议为您的特定操作使用自定义数据属性，并将这些属性用于您的高宽使用。或者只是构建你的计算有点不同，并检查一个元素是否可见，这样用 0 代替高度和宽度。

# php - 当用户授权网站时，您如何使用来自 facebook 的范围函数数据

> ID：10466368
> 
> 赞同：0
> 
> 时间：2012-05-05T22:06:07.257
> 
> 标签：php, sql, facebook

我在我的网站上有一个 facebook 登录，当你点击它时，它会弹出一个用户登录 Facebook 的弹出窗口，如果他们没有授权我的网站，它会这样做。我知道您可以使用 Facebook 范围函数请求数据，但我如何获取这些数据并将其存储在数据库中，以便我可以保存他们的电子邮件地址等。我有一个使用 Facebook 的注册函数，它将数据保存到我的数据库中，但我想知道如果我可以通过这种方式简化登录和授权？如果是这样，我会怎么做？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T22:53:04.617

您可以使用会话。

首先在这里下载 Facebook PHP SDK：[https ://github.com/facebook/php-sdk](https://github.com/facebook/php-sdk)

将 facebook.php 和 base_facebook.php 放入文件夹“facebook”中

将 dbconfig.php 放在文件夹“config”中。资源：

```
<?php

define('DB_SERVER', 'localhost');
define('DB_USERNAME', 'username');
define('DB_PASSWORD', 'password');
define('DB_DATABASE', 'db_name');
$connection = mysql_connect(DB_SERVER, DB_USERNAME, DB_PASSWORD) or die(mysql_error());
$database = mysql_select_db(DB_DATABASE) or die(mysql_error());

?> 
```

文件夹“config”中的functions.php。资源：

```
<?php

require 'dbconfig.php';

class User {
    function checkUser($uid, $username, $email) 
    {
        $query = mysql_query("SELECT * FROM `users` WHERE oauth_uid = '$uid'") or die(mysql_error());
        $result = mysql_fetch_array($query);
        if (!empty($result)) {
            # User is already present
        } else {
            #user not present. Insert a new Record
            $query = mysql_query("INSERT INTO `users` (id, oauth_uid, username, email) VALUES ('', $uid, '$username', '$email')") or die(mysql_error());
            $query = mysql_query("SELECT * FROM `users` WHERE oauth_uid = '$uid'");
            $result = mysql_fetch_array($query);
            return $result;
        }
        return $result;
    }
}

?> 
```

文件夹“config”中的 fbconfig.php。资源：

```
<?php

define('APP_ID', 'xxxxxxxxxxxxxx');
define('APP_SECRET', 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx');

?> 
```

logout.php 源码：

```
<?php

if (array_key_exists("logout", $_GET)) {
    session_start();
    unset($_SESSION['id']);
    unset($_SESSION['username']);
    session_destroy();
    header("location: home.php"); // or anywhere where you want them to redirect them to
}
?> 
```

示例用法 login.php。资源：

```
<?php

require 'facebook/facebook.php';
require 'config/fbconfig.php';
require 'config/functions.php';

$facebook = new Facebook(array(
            'appId' => APP_ID,
            'secret' => APP_SECRET,
            ));

$user = $facebook->getUser();

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
        error_log($e);
        $user = null;
  }
    if (!empty($user_profile )) {
        # User info ok? Let's print it (Here we will be adding the login and registering routines)

        $username = $user_profile['name'];
        $uid = $user_profile['id'];
        $email = $user_profile['email'];
        $user = new User();
        $userdata = $user->checkUser($uid, $username, $email);
        if(!empty($userdata)){
            session_start();
            $_SESSION['id'] = $userdata['id'];
            $_SESSION['oauth_id'] = $uid;
            $_SESSION['username'] = $userdata['username'];
            $_SESSION['email'] = $userdata['email'];
            header("Location: home.php");
        }
    } else {
        # For testing purposes, if there was an error, let's kill the script
        die("There was an error.");
    }
} else {
    # There's no active session, let's generate one
    $login_url = $facebook->getLoginUrl(array( 'scope' => 'email')); // you can add more scopes
    header("Location: " . $login_url);
}
?> 
```

示例用法 home.php。资源：

```
<?php

//Always place this code at the top of the Page
session_start();
if (!isset($_SESSION['id'])) {
    // Not logged in? Redirect to main page
    header("location: index.php");
}

echo '<h1>Welcome</h1>';
echo 'id : ' . $_SESSION['id'];
echo '<br /><img src="https://graph.facebook.com/' . $_SESSION['oauth_id'] . '/picture?type=large">';
echo '<br />Name : ' . $_SESSION['username'] . ' (' . $_SESSION['oauth_id'] . ')' ;
echo '<br />Email : ' . $_SESSION['email'];
echo '<br />You are login with : ' . $_SESSION['oauth_provider'];
echo '<br />Logout from <a href="logout.php?logout">' . $_SESSION['oauth_provider'] . '</a>';

?> 
```

使用您自己的详细信息编辑 fbconfig.php 和 dbconfig.php。这是我自己文件的复制/粘贴，但它们会让您了解如何通过 facebook 验证和登录用户，并使用 facebook 提供的信息创建用户。

祝你好运！

# javascript - 获取作为某些 div 的子级的 div 的计数

> ID：10466369
> 
> 赞同：0
> 
> 时间：2012-05-05T22:06:26.537
> 
> 标签：javascript, jquery

我想计算一些 div 的数量。这是我的页面结构作为图片。我想获得 cityUnderText div 的计数。

![在此处输入图像描述](../Images/3a1beb0fa801d50d5e449b0f47af9a7f.png)

我正在使用这些脚本代码，但我得到**0**但我只需要**6**。

```
var h = $("div.cityUnderText").length;
alert(h);

var h = $(".cityUnderText").length;
alert(h); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T22:08:08.460

试试`$(".cityundertext").length`。

[JavaScript 是一种区分大小写的语言](https://developer.mozilla.org/en/Case_Sensitivity_in_class_and_id_Names)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T22:11:44.167

```
var count=$(".cityundertext").size(); // jquery's method 
```

或者

```
var count=$(".cityundertext").length; 
```

**或者更具体**

```
var count=$("#content_pnlDestinations .cityundertext").size(); // jquery's method 
```

或者

```
var count=$("#content_pnlDestinations .cityundertext").length; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T22:31:11.757

You can use `document.querySelectorAll('div > div').length`, which is faster than jQuery, because it's native (2x to 3x faster).

# c# - 如何在我的 Pong 代码中修复此 System.StackOverFlow 异常？

> ID：10466371
> 
> 赞同：-2
> 
> 时间：2012-05-05T22:06:30.160
> 
> 标签：c#, xna-4.0

我正在尝试使用 Paddle 和 Ball 类在 XNA/C# 中制作 Pong

游戏1.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace Pong
{

    public class Game1 : Microsoft.Xna.Framework.Game
    {
        GraphicsDeviceManager graphics;
        SpriteBatch spriteBatch;

        Paddle Paddle1 = new Paddle();

        public Game1()
        {
            graphics = new GraphicsDeviceManager(this);
            Content.RootDirectory = "Content";
        }

        protected override void Initialize()
        {
            // TODO: Add your initialization logic here

            base.Initialize();
        }

        protected override void LoadContent()
        {
            // Create a new SpriteBatch, which can be used to draw textures.
            spriteBatch = new SpriteBatch(GraphicsDevice);

        }

        protected override void Update(GameTime gameTime)
        {

            if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
                this.Exit();

            // TODO: Add your update logic here

            base.Update(gameTime);
        }

        protected override void Draw(GameTime gameTime)
        {
            GraphicsDevice.Clear(Color.Black);

            Paddle1.Draw();
            base.Draw(gameTime);
        }
    }
} 
```

桨.cs：

```
namespace Pong
{
    class Paddle
    {
        SpriteBatch spriteBatch;
        ContentManager Content;

        Texture2D paddle1;
        Texture2D paddle2;

        Vector2 Paddle1;
        Vector2 Paddle2;

        public void LoadContent()
        {
            paddle1 = Content.Load<Texture2D>("pongpaddle1");

            Paddle1 = new Vector2();
            Paddle1.X = 50;
            Paddle1.Y = 50;
        }

        public void Draw()
        {
            spriteBatch.Begin(); //Causes NullReferenceException was unhandled, Object reference not set to an instance of an object.
            spriteBatch.Draw(paddle1, Paddle1, Color.White);
            spriteBatch.End();
        }
    }
} 
```

我还没有 Ball 类中的任何内容，但它将使用与 Paddle.cs 类似的方法

每次我运行代码时，只要遇到 Game1.cs 中的这行代码，我就会不断收到 System.StackOverFlow 异常：

```
Paddle Paddle1 = new Paddle(); 
```

我该如何解决？我不明白它是如何内存不足的。

编辑：更新的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T22:13:32.873

```
 public class Game1 : Microsoft.Xna.Framework.Game
    {
         Paddle Paddle1 = new Paddle();
         Paddle Paddle2 = new Paddle();
    ...
     protected override void LoadContent()
        {
            // Create a new SpriteBatch, which can be used to draw textures.
            spriteBatch = new SpriteBatch(GraphicsDevice);

            Paddle1.LoadContent();
        }
    ...
    }

    class Paddle : Game1
    {
    ...
        protected override void LoadContent()
        {
            Paddle1 = new Vector2();
            Paddle1.X = 50;
            Paddle1.Y = 50;
            base.LoadContent();
        }
    ...
    } 
```

这里有两个大问题，有一个递归的 LoadContent 调用。更不用说你的桨有桨有桨......为什么你的桨继承自 Game1？几乎**绝对不**应该。

此外，您的 paddle 实例实例化了**其他 paddle 实例**，因此您处于实例化其他 paddle 类的循环中。似乎您可能想退后一步，先习惯一些基本代码？值得一提的是，几年前我为了好玩在 xna 中[写了 pong ，它有点乱，但它可能会给你一些开始的帮助。](http://unclearthoughts.net/tag/pong)

这是一个基于 DrawableGameComponent 类的 paddle 类的示例（以原始形式绘制，因此有点冗长）：

```
public class Paddle : DrawableGameComponent
{
    private readonly VertexPositionColor[] _vertices = new VertexPositionColor[6];
    private readonly float _width;
    private readonly float _height;

    private IndexBuffer _indexbuffer;
    private VertexBuffer _vertexbuffer;

    public Vector3 Position { get; set; }
    public Vector3 Direction { get; set; }
    public float Speed { get; set; }

    public Paddle(Game game, float width, float height)
        : base(game)
    {
        _width = width;
        _height = height;
    }

    protected override void LoadContent()
    {
        base.LoadContent();

        _vertices[0].Position = new Vector3(0, 0, 0);
        _vertices[0].Color = Color.Red;

        _vertices[1].Position = new Vector3(_width, _height, 0);
        _vertices[1].Color = Color.Green;

        _vertices[2].Position = new Vector3(0, _height, 0);
        _vertices[2].Color = Color.Blue;

        _vertices[3].Position = new Vector3(_width, 0, 0);
        _vertices[3].Color = Color.Green;

        _vertexbuffer = new VertexBuffer(GraphicsDevice, typeof(VertexPositionColor), _vertices.Length, BufferUsage.WriteOnly);
        _vertexbuffer.SetData(_vertices);

        var indices = new short[6];
        indices[0] = 0;
        indices[1] = 1;
        indices[2] = 2;
        indices[3] = 0;
        indices[4] = 3;
        indices[5] = 1;

        _indexbuffer = new IndexBuffer(GraphicsDevice, typeof(short), 6, BufferUsage.WriteOnly);
        _indexbuffer.SetData(indices);
    }

    public BoundingBox GetBoundingBox()
    {
        return new BoundingBox(Position, Position + new Vector3(_width, _height, 0));
    }

    public override void Draw(GameTime gameTime)
    {
        base.Draw(gameTime);

        GraphicsDevice.SetVertexBuffer(_vertexbuffer);
        GraphicsDevice.Indices = _indexbuffer;
        GraphicsDevice.DrawIndexedPrimitives(PrimitiveType.TriangleList, 0, 0, 4, 0, 2);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T22:14:32.623

这里发生的是`Paddle`继承`Game1`. `Game1`创建`new Paddle`s：

```
Paddle Paddle1 = new Paddle();
Paddle Paddle2 = new Paddle(); 
```

那些`Paddle`s 是`Game`需要初始化自己的 s 集合的`Paddle`s。无限递归！我不确定 XNA 是如何工作的，但如果继承应该是这样，只需将您的初始化移动到`Initialize()`：

```
// TODO: Add your initialization logic here

base.Initialize();
this.Paddle1 = new Paddle();
this.Paddle2 = new Paddle(); 
```

不过，我有点怀疑游戏对象是否应该从游戏本身继承。这似乎是一个相当糟糕的设计决定。

# python - 如何在第一行显示句子的行号（多行）？

> ID：10466374
> 
> 赞同：0
> 
> 时间：2012-05-05T22:07:43.467
> 
> 标签：python

在 test.txt 中，我有 2 行句子。

```
The heart was made to be broken.
There is no surprise more magical than the surprise of being loved. 
```

在代码中：

```
import re
file = open('test.txt','r')#specify file to open
data = file.readlines()
file.close()

print "---------------------------------------------------"
count = 0
for line in data:
    line_split = re.findall(r'[^ \t\n\r, ]+',line)
    count = count + 1
    def chunks(line_split, n):
        for i in xrange(0, len(line_split), n):
            yield line_split[i:i+n]

    separate_word = list(chunks(line_split, 8))

    for i, word in enumerate(separate_word, 1):
        print count, ' '.join(word)
    print "---------------------------------------------------" 
```

代码的结果：

```
---------------------------------------------------
1 The heart was made to be broken.
---------------------------------------------------
2 There is no surprise more magical than the
2 surprise of being loved.
--------------------------------------------------- 
```

有没有办法只在第一行显示句子的数量？

期待结果：

```
---------------------------------------------------
1 The heart was made to be broken.
---------------------------------------------------
2 There is no surprise more magical than the
  surprise of being loved.
--------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T22:10:05.753

只需检查它是否是第一行：

```
for i, word in enumerate(separate_word):
    if i == 0:
        print count, ' '.join(word)
    else:
        print " ", ' '.join(word) 
```

我强烈建议您使用[该`with`语句](http://docs.python.org/reference/compound_stmts.html#the-with-statement)打开文件。这更具可读性，并为您处理关闭文件，即使在异常情况下也是如此。

另一个好主意是直接遍历文件 - 这是一个更好的主意，因为它不会一次将整个文件加载到内存中，这不是必需的，并且可能会导致大文件出现问题。

你也应该[`enumerate()`](http://docs.python.org/library/functions.html#enumerate)像你在这里所做的那样使用循环结束`data`，因为这样你就不会手动处理`count`。

你也是在`chunks()`重复定义，这有点没有意义，最好在开始时定义一次。在调用它的地方，也不需要列出一个列表——我们可以直接遍历生成器。

如果我们纠正所有这些，我们就会得到更清洁：

```
import re

def chunks(line_split, n):
    for i in xrange(0, len(line_split), n):
        yield line_split[i:i+n]

print "---------------------------------------------------"

with open("test.txt", "r") as file:
    for count, line in enumerate(file, 1):
        line_split = re.findall(r'[^ \t\n\r, ]+',line)
        separate_word = chunks(line_split, 8)
        for i, word in enumerate(separate_word):
            if i == 0:
                print count, ' '.join(word)
            else:
                print " ", ' '.join(word)

        print "---------------------------------------------------" 
```

还值得注意的是变量名称有点误导`word`，例如，不是一个词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T22:44:40.013

Python 内置了文本换行。我承认下面的格式并不完美，但你会明白的 :-)

```
#!/usr/bin/env python

import sys
import textwrap

with open('test.txt') as fd:
    T = [line.strip() for line in fd]

for n, s in enumerate(T):
    print '-'*42
    sys.stdout.write("%d " % n)
    for i in textwrap.wrap(s, 45):
        sys.stdout.write("%s\n" % i)
print '-'*42 
```

输出：

```
------------------------------------------
0 The heart was made to be broken.
------------------------------------------
1 There is no surprise more magical than the
surprise of being loved.
------------------------------------------ 
```

# php - 安装 pdo_mysql 时缺少 mysql_query

> ID：10466375
> 
> 赞同：1
> 
> 时间：2012-05-05T22:08:07.477
> 
> 标签：php, pdo, centos

我正在尝试在我的 CentOS 服务器上安装 pdo_mysql。我已经安装了 PDO；phpinfo() 告诉我 pdo_sqlite 处于活动状态。

所以我运行命令

```
pecl install pdo_mysql 
```

但是，这与消息错误

```
checking for MySQL support for PDO... yes, shared
checking for mysql_config... /usr/bin/mysql_config
checking for mysql_query in -lmysqlclient... no
configure: error: mysql_query missing!? 
```

我还确保在我的 php.ini 中声明了扩展。

我在网上四处看了看，找不到任何帮助。

哦，如果重要的话，我正在运行 PHP 5.3.3。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T09:15:50.580

我会在这里发布解决方案，以防它帮助其他人。

我试着跑步

```
yum install php-mysql 
```

但一直收到错误

```
Error: php53-common conflicts with php-common 
```

解决方案很简单（起初对我来说并不明显）只需运行

```
yum install php53-mysql 
```

Apache 重启和 PDO_mysql 工作。

# android - 可滑动和可替换的选项卡、片段和操作栏

> ID：10466376
> 
> 赞同：1
> 
> 时间：2012-05-05T22:08:08.473
> 
> 标签：android, fragment

正如主题所述，我正在尝试使用 Fragments 和 ActionBar 实现可滑动的选项卡。我已经使用 ActionBarSherlock 和 TabsAdapter 类（FragmentPageAdapter 的子类）的示例中的代码成功地实现了它。一些片段应该能够在同一个标​​签spor中显示一个新标签，这就是问题出现的地方。我真的不知道如何用新的片段替换寻呼机中的片段。我用谷歌搜索并尝试了很多东西。

我可以替换在 FragmentPageAdapter 中保存片段类的内部集合中的片段，从而使新的片段可用于 getItem 方法，但这并没有这样做，因为我不知道如何更新寻呼机以显示新的分段。即使在切换到另一个选项卡并返回后，我仍然会得到旧的片段，我认为它正被寻呼机缓存在某处。那么有没有办法通知寻呼机的更新？

也许我应该忘记使用 FragmentPageAdapter ？在那种情况下，实现所有这些功能的正确方法是什么？

PS如果您想查看我的代码，请告诉我，但它与示例中的基本相同，而且我认为问题更普遍

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T22:43:05.490

When you use a `ViewPager` it keeps the visible page/fragment in memory in addition to pages/fragments that you can navigate to. In addition to this, if the `ViewPager` is using a `FragmentPagerApdapter` it keeps the views in memory for the life of the activity.

I answered a similar post to yours above removing a fragment which can be found here. Your case is an extension of this, removing and then adding something else.

[https://stackoverflow.com/a/10399127/629555](https://stackoverflow.com/a/10399127/629555)

Basically, you need to use a `FragmentStatePagerAdapter`, override the `getItemPosition` method to return `PagerAdapter.POSITION_NONE` and make sure you call `.notifyDataSetChanged();` on your adapter when you want it changed.

The answer to the link above covers this in much more detail and provides a code example.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T17:24:07.310

使用 FragmentStatePagerAdapter 保持对我自己的适配器中的片段的引用怎么样？然后我将它们都保存在内存中，但也可以完全控制删除。这种方法有什么不好的地方吗？以后会遇到问题吗？我也进行了更改，因此片段作为对象而不是类传递，从而将启动留在寻呼机之外。这有什么问题吗？

附上我的适配器代码：

```
public static class TabsAdapter extends FragmentStatePagerAdapter  implements
ActionBar.TabListener, ViewPager.OnPageChangeListener {
    private final Context mContext;
    private final ActionBar mActionBar;
    private final ViewPager mViewPager;
    private final ArrayList<Fragment> mTabs = new ArrayList<Fragment>();

    public TabsAdapter(SherlockFragmentActivity activity, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mActionBar = activity.getSupportActionBar();
        mViewPager = pager;
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public void addTab(ActionBar.Tab tab, Fragment fragment) {          
        tab.setTag(fragment);
        tab.setTabListener(this);
        mTabs.add(fragment);
        mActionBar.addTab(tab);

        notifyDataSetChanged();
    }           

    public void replaceTab(ActionBar.Tab tab, Fragment fragment, int position) {

        tab.setTag(fragment);
        tab.setTabListener(this);
        mTabs.set(position, fragment);
        notifyDataSetChanged(); 
    } 

    @Override
    public int getCount() {
        return mTabs.size();
    }

    @Override
    public Fragment getItem(int position) {
        return mTabs.get(position);
    }

    @Override
    public void onPageScrolled(int position, float positionOffset,
            int positionOffsetPixels) {
    }

    @Override
    public void onPageSelected(int position) {
        mActionBar.setSelectedNavigationItem(position);
    }

    @Override
    public void onPageScrollStateChanged(int state) {
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        Object tag = tab.getTag();
        for (int i = 0; i < mTabs.size(); i++) {
            if (mTabs.get(i) == tag) {
                mViewPager.setCurrentItem(i);
            }
        }
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }

    @Override
    public int getItemPosition(Object object){
        return PagerAdapter.POSITION_NONE;
    }
} 
```

# ruby - 用于 nil:NilClass 的 Mongomapper 和 Sinatra 未定义方法“update_attributes”

> ID：10466381
> 
> 赞同：1
> 
> 时间：2012-05-05T22:08:27.503
> 
> 标签：ruby, sinatra, mongomapper

将 Sinatra 与 MongoMapper 一起使用时，我收到错误**“nil:NilClass 的未定义方法 `update_attributes'” 。**

**模型：**

```
class Publication 
include MongoMapper::Document

key :page, String
key :title, String
key :body, String
end 
```

和我得到错误的**代码：**

```
post '/edit' do 
@article = Publication.update({:page => 'main'}, {$set => {:title => params[:title], :body => params[:body]}})
end 
```

我试图在**mongo 控制台**中进行更新，它已成功更新：

```
> db.publications.update({page: 'main'},{$set: {body: '333', title: '111'}})
> db.publications.find({page: 'main'})
{ "_id" : ObjectId("4fa45046530a6978e3000003"), "body" : "333", "page" : "main", "title" : "111" } 
```

完整**的堆栈跟踪**：

```
[2012-05-06 03:04:22] INFO  WEBrick 1.3.1
[2012-05-06 03:04:22] INFO  ruby 1.8.7 (2010-01-10) [universal-darwin11.0]
== Sinatra/1.3.2 has taken the stage on 4567 for development with backup from WEBrick
[2012-05-06 03:04:23] INFO  WEBrick::HTTPServer#start: pid=32266 port=4567
localhost - - [06/May/2012:03:04:27 MSK] "GET /edit HTTP/1.1" 200 193
- -> /edit
localhost - - [06/May/2012:03:04:27 MSK] "GET /favicon.ico HTTP/1.1" 404 447
- -> /favicon.ico
NoMethodError - undefined method `update_attributes' for nil:NilClass:
/Library/Ruby/Gems/1.8/gems/mongo_mapper-  0.11.1/lib/mongo_mapper/plugins/querying.rb:118:in `update_single'
/Library/Ruby/Gems/1.8/gems/mongo_mapper-0.11.1/lib/mongo_mapper/plugins/querying.rb:117:in `tap'
/Library/Ruby/Gems/1.8/gems/mongo_mapper-0.11.1/lib/mongo_mapper/plugins/querying.rb:117:in `update_single'
/Library/Ruby/Gems/1.8/gems/mongo_mapper-0.11.1/lib/mongo_mapper/plugins/querying.rb:45:in `update'
main.rb:48:in `POST /edit'
/Library/Ruby/Gems/1.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:1211:in `call'
/Library/Ruby/Gems/1.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:1211:in `compile!'
/Library/Ruby/Gems/1.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:785:in `[]'
/Library/Ruby/Gems/1.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:785:in `route!'
/Library/Ruby/Gems/1.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:801:in `route_eval'
/Library/Ruby/Gems/1.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:785:in `route!'
/Library/Ruby/Gems/1.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:822:in `process_route'
/Library/Ruby/Gems/1.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:820:in `catch'
/Library/Ruby/Gems/1.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:820:in `process_route'
/Library/Ruby/Gems/1.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:784:in `route!'
/Library/Ruby/Gems/1.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:783:in `each'
/Library/Ruby/Gems/1.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:783:in `route!'
/Library/Ruby/Gems/1.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:886:in `dispatch!'
/Library/Ruby/Gems/1.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:719:in `call!'
/Library/Ruby/Gems/1.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:871:in `invoke'
/Library/Ruby/Gems/1.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:871:in `catch'
/Library/Ruby/Gems/1.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:871:in `invoke'
/Library/Ruby/Gems/1.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:719:in `call!'
/Library/Ruby/Gems/1.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:705:in `call'
/Library/Ruby/Gems/1.8/gems/rack-protection-1.2.0/lib/rack/protection/xss_header.rb:22:in `call'
/Library/Ruby/Gems/1.8/gems/rack-protection-1.2.0/lib/rack/protection/path_traversal.rb:16:in `call'
/Library/Ruby/Gems/1.8/gems/rack-protection-1.2.0/lib/rack/protection/json_csrf.rb:17:in `call'
/Library/Ruby/Gems/1.8/gems/rack-protection-1.2.0/lib/rack/protection/base.rb:47:in `call'
/Library/Ruby/Gems/1.8/gems/rack-protection-1.2.0/lib/rack/protection/xss_header.rb:22:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.4.1/lib/rack/logger.rb:15:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.4.1/lib/rack/head.rb:9:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
/Library/Ruby/Gems/1.8/gems/sinatra-1.3.2/lib/sinatra/showexceptions.rb:21:in `call'
/Library/Ruby/Gems/1.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:1334:in `call'
/Library/Ruby/Gems/1.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:1416:in `synchronize'
/Library/Ruby/Gems/1.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:1334:in `call'
/Library/Ruby/Gems/1.8/gems/rack-1.4.1/lib/rack/handler/webrick.rb:59:in `service'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/webrick/server.rb:82:in `start'
/Library/Ruby/Gems/1.8/gems/rack-1.4.1/lib/rack/handler/webrick.rb:13:in `run'
/Library/Ruby/Gems/1.8/gems/sinatra-1.3.2/lib/sinatra/base.rb:1295:in `run!'
/Library/Ruby/Gems/1.8/gems/sinatra-1.3.2/lib/sinatra/main.rb:25
main.rb:53 
```

任何人都可以说我没有在 ruby​​ 代码中正确更新的原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T22:24:06.030

您可能打算使用`:$set`而不是`$set`作为您的密钥：

```
@article = Publication.update({:page => 'main'}, {:$set => {:title => params[:title], :body => params[:body]}}) 
```

您所拥有的是使用全局变量`$set`作为键，即`nil`（因为所有全局变量默认为`nil`）。例如：

```
{ $set => "something" }  #=> {nil=>"something"}
{ :$set => "something" } #=> {:$set=>"something"} 
```

# java - 创建一个通用数组列表

> ID：10466383
> 
> 赞同：1
> 
> 时间：2012-05-05T22:08:31.200
> 
> 标签：java, generics

这是一个两部分的问题。

我有两个类：`Animal`我`Vehicle`将把它们实例化为对象。`Animal`包含两个实例变量：`numLegs`和`animalName`，并且`Vehicle`包含一个实例变量：`numTires`，这两个类都包含 getter 和 setter。

我有一个通用类`Box`，它包含一个`Animal`或一个`Vehicle`.

假设我想创建一个`Arraylist`盒子。凡`Box`在所说的`Arraylist`将持有排他式`Animal`或排他式`Vehicle`。

例如：在完全是动物的情况下，这看起来有点像：

```
List<Box<Animal>> list = new ArrayList<Box<Animal>>(); 
list.add( new Box<Animal>( new Animal( "fluffy", 4 ) ) ); 
```

(1)。盒子类应该是什么样子的？

另外，假设我想对列表中的动物执行吸气剂。如：`System.out.println(list.get(0).getName());`

(2)。我该如何正确处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T22:13:41.797

我不确定你在追求什么，但如果你想要一个通用类型的`Box`类，它可能需要看起来像这样：

```
public class Box<T extends SuperclassOfAnimalAndVehicle> {
  T myModeOfTransport;

  Box(T myModeOfTransport) {
    this.myModeOfTransport = myModeOfTransport;
  }

  public T getModeOfTransport() {
    return myModeOfTransport;
  }
} 
```

这条线：`list.get(0).getName()`但是不会。您必须获取`Box`包含的对象。因此，使用我的示例，它将是`list.get(0).getModeOfTransport().getName()`, 假设`Vehicle`并且`Animal`两者都有`getName()`方法。

说了这么多，我真的很困惑为什么这是必要的。也许如果您解释更大的图景，我可以给您更完整的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T22:34:08.450

If you want to have a list containing two or more entities with nothing in common then you will always need to specialize your code to address each of them. This `Box` class is completlly useless.

```
Object o = list.get(0);
if(o instanceof Animal) {
   System.out.println(((Animal)o).getName());
} 
```

# google-maps - GoogleMaps：自定义信息窗口中的默认街景图像

> ID：10466392
> 
> 赞同：1
> 
> 时间：2012-05-05T22:09:51.157
> 
> 标签：google-maps

当我以匿名用户身份使用 Google 地图时，当我找到我正在为其建立网站的公司时，Google 会向我显示该地点的某种默认街景照片。这非常好，我希望这张照片也出现在我正在使用 API3 准备的自定义信息窗口中。有没有一种方法或者我应该嗅探并使用它的源路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T22:44:58.123

您可以像这样嵌入街景全景图，或在信息窗口内容中嵌入截屏图像 ( `<img src="...">`) 您也可以设置标记`visible: false`

[http://jsfiddle.net/sST8z/](http://jsfiddle.net/sST8z/)

```
<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
      html, body { margin: 0; padding: 0; height: 100% }
      #map_canvas { margin: 0; padding: 0; width: 500px; height: 300px }
      #street { margin: 0; padding: 0; width: 150px; height: 150px }

    </style>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">
      var map;
      var mapOptions = { center: new google.maps.LatLng(0.0, 0.0), zoom: 2,
        mapTypeId: google.maps.MapTypeId.ROADMAP };

      function initialize() {
        map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
        street = new google.maps.StreetViewPanorama(document.getElementById("street"), { 

        position: new google.maps.LatLng(40.72982797782924, -73.98622512817383),
        zoomControl: false,
        enableCloseButton: false,
        addressControl: false,
        panControl: false,
        linksControl: false
      });

      var infow = new google.maps.InfoWindow({ content: document.getElementById("street") });
      var myLatLng = new google.maps.LatLng(40.72982797782924, -73.98622512817383);
      var marker = new google.maps.Marker({ position: myLatLng, map: map, visible: true });

      infow.open(map, marker);
      map.setCenter(myLatLng);

      }
      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <div id="street"></div>
    <div id="map_canvas"></div>

  </body>
</html> 
```

# clojure - 带有 swank clojure 和崩溃恢复能力的“热交换”代码

> ID：10466395
> 
> 赞同：4
> 
> 时间：2012-05-05T22:10:11.687
> 
> 标签：clojure, swank, swank-clojure

我一直在用 clojure 开发游戏，而我一直非常兴奋的一件事是代码中的热交换。

我一直在使用带有`lein-swank`插件的 swank clojure 和 emacs。

我的主要问题是错别字。假设我更新了一个函数，犯了一个小错误，然后按 Ctrl-C Ctrl-C 将其发送到 REPL：

`(if (> (rand) .5) (println "yay") (println "boo"))`

（我应该写`0.5`，不是`.5`。）

在那种情况下，整个程序只会崩溃和烧毁，我需要重新启动整个程序。热插拔很棒，但如果我连一个小错误都不能犯，那又有什么意义呢？

那么这里的工作流程到底是什么？我错过了什么吗？或者有没有办法让 swank clojure 对这些小错误更有弹性？（我想最好的办法就是重置到以前的工作状态，尽管这可能有点困难。）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T08:29:19.497

程序不应该“崩溃和烧毁”——它应该引发一个异常并将你扔到调试器中，你可以通过点击`Q`( `sldb-quit`) 将其关闭。关闭调试器后，程序应该继续正常运行。如果这不是发生的情况，那么您的 SLIME 配置可能会以某种方式损坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T23:11:57.003

我个人推荐 CMx 而不是 Cc Cc。不过，我认为任何一个都不应该遇到您遇到的问题，因此切换可能无法解决它。

# java - Java条件问题

> ID：10466397
> 
> 赞同：2
> 
> 时间：2012-05-05T22:10:25.677
> 
> 标签：java, debugging, conditional, conditional-statements

无论我做什么，当用户在控制台输入 1 时，这段代码永远不会评估为真......我很困惑为什么它评估为假......非常感谢任何帮助。

```
import java.io.*;
public class Default 
{
    public static void main(String [] args)
    {
        System.out.println("Welcome to the CS conversation game\n");
        System.out.println("Choose your game\n1)Hex to Decimal\n2)Binary to Decimal");
        Hex2Decimal PlayHex = new Hex2Decimal();
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));

        String GameSelection = null;
        try 
        {
            GameSelection = br.readLine();
        }
        catch (IOException ex) 
        {
            ex.printStackTrace();
        }
        if(GameSelection == "1")
        {
            PlayHex.Play();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T22:12:17.407

应该是`"1".equals(GameSelection)`，`==`比较对象的引用，同时`equals`比较内容。

此外，Java 命名约定是以小写开头的变量名。（例如`gameSelection`，`playHex`等等）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-05T22:12:45.823

你需要：

```
if(GameSelection.equals("1")) 
```

代替：

```
if(GameSelection == "1") 
```

`==`用于检查 2 个引用是否引用内存中的同一对象，同时`equals()`检查 2 个引用是否引用内存中的同一对象**或**2 个不同但具有相同值的对象（这 2 个字符串是等价的）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-05T22:12:21.713

Java 没有运算符重载。

您将不得不使用`.equals(...)`. 否则，您正在比较参考地址。

```
if(GameSelection.equals("1"))
{
   PlayHex.Play();
} 
```

# xamarin.ios - 使用 MonoGame 支持多种屏幕尺寸/分辨率/纵横比

> ID：10466402
> 
> 赞同：2
> 
> 时间：2012-05-05T22:11:08.147
> 
> 标签：xamarin.ios, xamarin.android, monogame

在 iPad、iPhone、Windows Phone 和 Android 手机/平板电脑等设备上支持多种屏幕分辨率/纵横比的推荐方法是什么？我应该为每个设备简单地#if/#else 特定代码吗？我不知道这会有多好。尤其适用于各种尺寸的 Android 手机/平板电脑。任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:22:22.703

以下是我们正在为我们的游戏做的事情：

*   所有菜单或 ui 元素都根据屏幕大小定位（我们实现水平和垂直对齐）
*   所有级别都会滚动，因此在某些设备上，您一次只能看到较少的级别
*   我们的关卡还会在需要时放大较小的设备
*   设计固定关卡（不滚动的关卡），以便在屏幕边缘留出一些未使用的空间。这样它可以在某些设备上被裁剪没问题。
*   制作 3 种尺寸的图像：小 (3GS)、中 (iPhone 4、Android、WP7、iPad)、大 iPad3
*   根据图像大小定位 sprites/ui 元素
*   利用图像的@2x 命名方案
*   我们制作了一个仅限 iPhone 和 iPad 的应用程序版本，这有助于在每个应用程序中只放置 2 组图像

使用屏幕尺寸进行定位是您最好的选择。一般来说，能够居中或停靠在屏幕的底部或右侧也很有帮助。

我可以说更多，但我还不能透露我们游戏的细节。

# python - Pygame 显示模块初始化和退出

> ID：10466411
> 
> 赞同：3
> 
> 时间：2012-05-05T22:12:42.727
> 
> 标签：python, pygame

打开一扇`pygame.display`窗户，我召唤`pygame.display.quit()`它来摧毁窗户。
因为需要再次打开窗口，所以调用了`pygame.display.init()`and `pygame.display.set_mode()`，但是调用了这两个函数之后，什么也没有发生。
谁能指出我这个问题的根源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T23:01:53.623

这是带有 gui 模块的示例代码...每当您调用`screen_off()`时，显示就会退出。每当您想恢复显示时，请键入您之前使用的所有内容以将其打开。

如果需要，请使用`pygame.display.quit()`，而不将它放在`screen_off()`函数内部。我建议把你用来打开显示器的所有代码放入一个函数中，这样你就不必在它被杀死后再次输入它来打开它。

```
from pygame import *
from pygame.locals import *
import pygame, pygame.locals

from easygui import *

def screen_off():
    pygame.display.quit()

pygame.init()
canvas = pygame.display.set_mode((400,400),0,32)
red = (255,0,0)
canvas.fill(red)
pygame.display.update()
screen_off() #display is now OFF...

choice = ['Yes', 'No']
cc = buttonbox('Continue?', "Options", choice)
if cc == "Yes":
    #if you don't want to type these arguments below again to turn on the display then
    #put them into a function and call it
    pygame.init()
    canvas = pygame.display.set_mode((400,400),0,32)
    purple = (204,0,204)
    canvas.fill(purple)
    pygame.display.update()
    #display is now ON... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T17:29:38.200

它应该是：

```
pygame.init() 
```

所以我假设：

```
pygame.quit() 
```

工作相同

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-28T05:46:00.507

您是否尝试过调用 just`pygame.quit()`或`pygame.init()`？我不相信有一个`pygame.display.quit()`。

# jquery - Jquery：追加克隆导致元素被推送（仅限IE）

> ID：10466420
> 
> 赞同：0
> 
> 时间：2012-05-05T22:14:12.890
> 
> 标签：jquery

你可以在这里看到这个问题：http: [//jsfiddle.net/qQ6ws/36/](http://jsfiddle.net/qQ6ws/36/)

我正在使用 shift 来切换我的克隆功能，该功能由可拖动项目上的“开始”回调调用。

我遇到了事件处理程序不活动的问题，除非我首先左键单击内容框架（右下角）然后按字母键。（Lclick + D 键）例如。

一旦事件处理程序处于活动状态，只需单击并拖动测试框以克隆它。这在 Firefox 中效果很好。

Internet Explorer 9 和 10 都有问题。每次将测试框附加到文档时，测试框都会不断偏移，整个事情都会变得一团糟。

我尝试了各种方法，但无法解决这个问题。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T23:21:31.363

显着简化，我得到：

```
var dragOptopns = {
    start: function(e, ui) {
        if (e.shiftKey) {
            $(this).clone().prependTo('body').draggable(dragOptopns);
        }
    }
};

$(".myClass").draggable(dragOptopns); 
```

`click-drag`拖动或`shift-click-drag`留下克隆。

参见[小提琴的叉子](http://jsfiddle.net/bnpNP/)

在 Opera 11.62 和 IE9 中运行良好。

# c# - C# 中的 GBA 模拟器 wp7

> ID：10466425
> 
> 赞同：1
> 
> 时间：2012-05-05T22:14:40.503
> 
> 标签：c#, windows-phone-7, emulation, gameboy

我想为 WP7 做一个 GameBoy Advance 模拟器，但我不知道从哪里开始。任何人都可以指出我正确的方向吗？我知道GB有一个，也许从那里开始会是个好主意。任何图书馆或资源？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T22:34:15.453

您可以在此处下载 VisualBoyAdvance 的源代码：http: [//sourceforge.net/projects/vba/files/VisualBoyAdvance/1.7.2/](http://sourceforge.net/projects/vba/files/VisualBoyAdvance/1.7.2/)

它是最著名和最可靠的 GBA 模拟器之一，它是用 C++ 编写的，因此移植起来应该不会太难。

# actionscript-3 - “^”是 Math.pow() 的简写吗？

> ID：10466429
> 
> 赞同：2
> 
> 时间：2012-05-05T22:15:04.493
> 
> 标签：actionscript-3, actionscript

Actionscript 3`4 ^ 2`之间有区别吗？`Math.pow(4, 2);`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-05T22:17:32.707

> `4 ^ 2`和之间有区别吗`Math.pow(4, 2);`

是的，`^`是二元[异](http://en.wikipedia.org/wiki/Exclusive_or)或运算符，而`Math.pow(x, y)`提高`x`了`y`幂。

```
4[10] ^ 2[10] == 6[10] // 0100[2] xor 0010[2] == 0110[2]

Math.pow(4, 2) == 16 // 4² == 16
```

从 ES2016 开始，简写`Math.pow(x, y)`为`x**y`

```
console.log('Using `Math.pow(4, 2)`:', Math.pow(4, 2))
console.log('Using `4**2`:', 4**2)
```

# c++ - 从多个类中检索集合的值，正确的方法是什么？

> ID：10466430
> 
> 赞同：1
> 
> 时间：2012-05-05T22:15:13.950
> 
> 标签：c++, oop, design-patterns, global-variables

在此之前，感谢您的阅读！

我正在用 C++ 开发一个应用程序，我想要关于设计问题的建议。让我解释：

我的应用程序的主类有一些集合，但其他类最终需要从其中一个集合中获取值。像这样的东西：

```
class MainClass { 
private:
   // Collections are internally implemented as QHash
   Collection<Type1> col1;
   Collection<Type2> col2;
};
class RosterUnit {
public:
   RosterUnit() {
      /* This method needs to get a specific value from col1 and
         initialize this class with that data */
   }
};

class ObjectAction {
public:
    virtual void doAction() = 0;
};

class Action1 : public ObjectAction {
public:
    void doAction() {
       // This needs a specific value from col2
    }
};

class Action2 : public ObjectAction {
public:
    void doAction() {
       // This needs a specific value from col1
    }
}; 
```

我的第一种方法是在需要时将整个集合作为参数传递，但对于 ObjectAction 子类来说不是很好，因为我必须传递这两个集合，如果我稍后创建另一个 ObjectAction 子类并且它需要从其他对象获取元素集合（假设 col3），我将不得不修改每个 ObjectAction 子类的 doAction() 签名，我认为这不太灵活。另外，假设我有一个 Dialog 并想从那里创建一个 RosterUnit。我必须将集合传递给对话框才能创建 RosterUnit。

接下来，我决定在 RosterUnit 和 ObjectAction 中使用指向集合的静态变量，但我对这个解决方案不太满意。我认为它不够灵活。

我一直在阅读有关设计模式的内容，我首先认为带有 get 函数的 Singleton 可能是一个不错的选择，但经过更多调查后，我认为这不是适合我的案例的设计。如果我使用全局变量会更容易并且或多或少相同，这似乎不是正确的方法。

那么，请您给点建议好吗？

非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T22:19:35.100

您可能想要使用迭代器，它们的存在正是为了从特定容器中抽象出序列。

如果您的问题是如何将迭代器传递给首先需要它们的代码，请不要屈服于使用全局变量的诱惑。如果您必须传入参数，它可能看起来更加复杂，但您的代码对于它来说更加解耦。如果您想了解有关此主题的更多信息，“依赖注入”是一个很好的关键字。

我还建议您检查 std::function 或 boost::function 而不是从 ObjectAction 继承。函数式风格在现代 C++ 中变得越来越普遍，而不是像 Java 这样的语言通常采用的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T00:58:39.107

这里没有足够的信息来说明您要做什么。你让它听起来像“在未来的某个时候，这个静态创建的动作需要这些被遗忘的数据。” 这有什么意义？我会说要么*使用数据*构造动作，例如使用 Future 或 Callable），要么让命令请求下一条数据，在这种情况下，你只是实现了一个工作队列。

听起来你正在尝试做类似线程池的事情。如果这些操作以任何方式相关，那么您应该在一些组合对象中实现类似**模板方法**模式的东西，例如 execute() 是抽象的，并且以固定的顺序调用一些其他方法并且不能被覆盖，其他方法必须是（协议执行）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T09:36:48.260

如前所述，迭代器非常适合抽象出集合的细节。但是走这条路意味着使用迭代器的对象需要知道集合中的内容。这意味着他们需要知道如何决定他们需要 Collection 中的哪个对象，从而增加耦合。（工厂段落中的更多详细信息）这是您需要考虑的事情。

另一种方法是在 MainClass 上创建获取某种键并从 Collection (findObject(key)) 返回一个对象的访问器方法。MainClass 方法在内部将搜索容器并返回适当的对象。但是，要使用这种方法，您将需要访问 MainClass，或者通过前面提到的依赖注入，或者可能将其设为 Singleton（但在这种情况下不推荐）。

使用目前提供的信息，您的 ObjectAction 工厂可能更好地引用 MainClass，并且作为 ObjectAction 创建逻辑的一部分，调用适当的 MainClass 访问器并将结果传递给 ObjectAction，从而解耦ObjectAction 来自 MainClass 的对象。

# macos - OS X 10.8 上的 Spotify appNotFound，已启用开发者菜单

> ID：10466431
> 
> 赞同：0
> 
> 时间：2012-05-05T22:15:25.710
> 
> 标签：macos, apache, spotify, osx-mountain-lion

spotify:app:tutorial 显示元数据失败，错误 appNotFound 我有开发菜单。该文件夹位于 ~/Spotify/tutorial 我已经重新启动了 spotify，重新安装了 spotify。现在我认为它与山狮有关。其他运行 10.8 且没有此问题的人吗？

我还在 /etc/resolvers 中使用 .build 和 .dev tld 设置运行 dnsmasq + apache。有谁知道 Spotify 是否正在为本地开发设置一个迷你网络服务器？

我想在拆除我的开发堆栈之前我会问

[http://i.imgur.com/8GHlv.png](http://i.imgur.com/8GHlv.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T00:43:34.630

在 0.8.3 中，您必须在清单中添加 BundleIdentifier。本教程没有此内容（将更新），因此未加载该应用程序。

另请注意，目录名称变得无关紧要，现在始终根据标识符找到应用程序。

# facebook - 使用 Facebook 登录后获取用户的 FID、姓名和电子邮件

> ID：10466435
> 
> 赞同：0
> 
> 时间：2012-05-05T22:15:52.280
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我想在使用 Javascript 登录后获取用户的 FID、电子邮件和姓名，所以我进行了 Ajax 调用并将它们保存到数据库中。

这是当前登录用户的代码：

```
 if (response.status === 'connected') { // the user is logged in and connected to your application
        var uid = response.authResponse.userID;
        var accessToken = response.authResponse.accessToken;
        // Alert with fid, email and name
        } else { //the user isn't logged in to Facebook or isn't connected to the application
        FB.login(function(response) {
            if (response.authResponse) {
                accessToken = response.authResponse.accessToken;
                // Alert with fid, email and name
                }
            }, {scope: 'email'});
        } 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T10:53:18.763

称呼

```
https://graph.facebook.com/me 
```

或者

```
https://graph.facebook.com/USER_ID 
```

或者

```
https://graph.facebook.com/fql?q=SELECT uid,name,email FROM user WHERE uid=me() 
```

你需要

```
email 
```

允许

# javascript - JavaScript forEach 实现

> ID：10466436
> 
> 赞同：7
> 
> 时间：2012-05-05T22:16:06.020
> 
> 标签：javascript

我在教程网站上找到了一个函数的代码片段，除了检查是否在数组中`forEach`的行之外，一切对我来说都很有意义：`i`

```
 if (i in this) { 
```

如果我们已经有一个具有停止条件的 for 循环，为什么还要麻烦呢？

```
if (!Array.prototype.forEach) {
Array.prototype.forEach = function(fun /*, thisp*/) {
    var len = this.length >>> 0;
    if (typeof fun != "function") {
        throw new TypeError();
    }

    var thisp = arguments[1];
    for (var i = 0; i < len; i++) {
        if (i in this) {
            fun.call(thisp, this[i], i, this);
        }
    }
};
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T22:21:27.340

# 两个原因：

## 1\. 回调突变

调用`fun`可能会更改数组，因为`fun`完全是用户定义的。所以你需要再次检查。

例子：

```
array.forEach(function (el, i) { delete array[i + 1]; }); 
```

## 2.稀疏数组

另一个问题是可能存在稀疏数组：例如

```
3 in ["a", "b", "c", , "e", "f"] === false
// even though
3 in ["a", "b", "c", undefined, "e", "f"] === true 
```

在这些情况下，您不想调用`fun`该索引/元素，因为该索引处没有任何内容。

```
["a", "b", "c", , "e", "f"].forEach(function (el, i) {
    console.log(el + " at " + i);
});
// => "a at 0" "b at 1" "c at 2" "e at 4" "f at 5" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T22:22:49.360

因为数组可能有孔，因此您可以迭代长度，并非所有值都会存在。

```
x = new Array()
[]

x[0] = "zero"
"zero"

x[5] = "five"
"five"

x
["zero", undefined × 4, "five"]

3 in x
false

x.length
6

for (var i = 0; i < x.length; i++) { console.log(i, i in x, x[i])}
0 true "zero"
1 false undefined
2 false undefined
3 false undefined
4 false undefined
5 true "five" 
```

# iphone - 为什么我的精灵在第一次移动后会转到错误的坐标？

> ID：10466438
> 
> 赞同：0
> 
> 时间：2012-05-05T22:16:30.377
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

这是我的运动方法：

```
- (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{
    UITouch *touch = [touches anyObject];
    location = [touch locationInView: [touch view]];
    CGPoint location_ = [[CCDirector sharedDirector] convertToGL:location];
    NSLog(@"Click Position = (%f,%f)",location_.x,location_.y);

    float moveSpeed = 40.0;
    float moveDist = sqrt(pow(abs(location_.x - sprite.position.x),2) + pow(abs(location_.y - sprite.position.y),2));
    float moveTime = (moveDist / moveSpeed);

    [sprite runAction:[CCMoveTo actionWithDuration:moveTime position:location_]];
} 
```

这是我的初始化方法。

```
-(id) init
{
    // always call "super" init
    // Apple recommends to re-assign "self" with the "super" return value
    if( (self=[super init])) {
        self.isTouchEnabled = YES;
        // create and initialize a Label

        [self scheduleUpdate];  // available since v0.99.3
        [self schedule: @selector(update:) interval:0.5];

        CGSize size = [[CCDirector sharedDirector] winSize];

        bg = [CCSprite spriteWithFile:@"testBG.png"];
        bg.position = ccp(  size.width /2 , size.height/2 );
        [self addChild: bg];

        sprite = [CCSprite spriteWithFile:@"testSprite.png"];
        sprite.position = ccp(  size.width /2 , size.height/2 );
        [self addChild: sprite];

        [self runAction:[CCFollow actionWithTarget:sprite]];
    }
    return self;
} 
```

我的窗口跟随精灵四处走动，但就像我说的那样，精灵会在第一次触摸后到达与触摸不同的点。谁能告诉我发生了什么事？

编辑：我认为这可能与坐标系本身有关，或者可能与

`[touches anyObject];`? 我的搜索结果很少。

编辑2：我发现如果我再次将我的精灵返回到 bg 精灵的中间，它会从那里再次正常运行，直到它离得太远。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-13T19:14:41.900

我相信问题出在`[self runAction:[CCFollow actionWithTarget:sprite]];`.

`self`是您不想移动的**场景。**

这样做的模式是添加一个`CCNode`你会称之为 your`_contentNode`的`scene`东西，并添加你小时候想要移动的所有东西。

然后你会打电话`[_contentNode runAction:[CCFollow actionWithTarget:sprite]];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T06:06:17.490

在这我会建议你一个简单的事情......在添加新动作之前，停止精灵上的前一个动作......

在您的 ccTouchesBegan 方法中

```
[sprite stopAllActions];

[sprite runAction:[CCMoveTo actionWithDuration:moveTime position:location_]]; 
```

我认为这会有所帮助，因为一旦你触摸你的精灵就会停止..

在当前情况下，它正在进行一个动作。假设它的持续时间是 2 秒。在下一次触摸时，您运行 1 秒的动作。然后它会转到错误的点，因为之前的动作还没有完成。

希望这可以帮助.. ：）

# ios - 核心数据结构

> ID：10466439
> 
> 赞同：0
> 
> 时间：2012-05-05T22:16:32.297
> 
> 标签：ios, core-data

我即将将持久层添加到我的应用程序中，我决定试一试核心数据。目前我将所有模型映射到实体，这似乎工作得很好。但是在我当前的实现中，我使用了一些我称之为“集合”（模型）的东西，例如我在游戏中有一组瓷砖插槽。

这个 SlotsCollection 类具有 findNextInSameRow() findAvailableSlot() 等方法。我对核心数据所做的是我创建了一个 Game 实体并向 Slot 实体添加了多个关系，有没有办法定义一个集合的类插槽应该被实例化，所以我可以把我的逻辑放在里面？或者有没有更好的方法来组织事情。我想我可以在我的游戏实体中创建“经理”并在初始化时交出插槽

```
SlotManager* manager = [SlotManager alloc] initWithSlots:self.slots];
Slot* slot = [manager findAvailableSlot]; 
```

同样在我将所有模型“迁移”到实体之后，我有很多没有任何属性但只包含对其他实体的引用的实体。我有点害怕我在构建核心数据时使用了错误的心态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T10:09:58.810

具有该集合的类应该具有该集合的逻辑。

如果您有从 A 到 B 的一对多关系，那么您会将有关此关系的逻辑放入 A 类中 - 并且可能将其中一些放在 B 类中（取决于您的需要）。

注意：如果您正在迭代关系，则需要注意错误行为等。每当 Core Data 必须执行实际的数据库工作时，都会对性能造成影响。这与普通的旧 SQL 没有什么不同。如果您不必“转至磁盘”，事情会非常快。如果您使用 fetch 请求，您将*始终*进行数据库工作，并且事情总是（相对）昂贵。

# jquery - jQuery 覆盖在高于 1.2.6 的版本上不起作用

> ID：10466441
> 
> 赞同：0
> 
> 时间：2012-05-05T22:16:38.210
> 
> 标签：jquery

我一直在使用似乎只适用于 jQuery 版本 1.2.6 或更低版本的 jQuery 覆盖。覆盖代码来自 jQueryTools：http: [//jquerytools.org/demos/overlay/index.html](http://jquerytools.org/demos/overlay/index.html)。它不是插件，我只需要包含 jQuery 库即可使其工作。

我用来显示叠加层的代码是：

```
<a rel="#account_overlay">Open Overlay</a>

<div class="simple_overlay" id="account_overlay">
// content
</div>

<script>
$("a[rel]").overlay({
mask: '#000000',
close: "a.close_overlay_btn",
closeOnClick: true,
closeOnEsc: true
});
</script> 
```

当然有一种方法可以修改它以在最新版本的 jQuery 上工作，我不明白为什么它不能。关于如何修改它以在 1.7+ 上工作的任何建议？

在控制台中，我看到此错误：

> 未捕获的类型错误：对象 [对象对象] 没有方法“覆盖”

我不想替换我项目中的所有叠加层，因为太多了，我只想修改它，以便我可以使用最新版本的 jQuery。所以，我不想看到交换服务/插件/用户界面等的建议，我只想知道这是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T22:22:16.663

我很确定您需要包含 jQuery 工具才能使叠加层正常工作，因为 jQuery 和 jQuery UI 都没有内置的叠加层功能。甚至示例页面都指向`<script src="http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js"></script>`

# gitpython - 检查对象是否在 gitpython 的仓库中

> ID：10466449
> 
> 赞同：5
> 
> 时间：2012-05-05T22:17:59.363
> 
> 标签：gitpython

我正在开发一个将在 git repo 中添加和更新文件的程序。由于我无法确定我正在使用的文件当前是否在 repo 中，我需要检查它的存在 - 这个操作似乎比我想象的要难。

'in' 比较似乎不适用于 gitpython 中树的非根级别。前任。

```
>>> repo = Repo(path)
>>> hct = repo.head.commit.tree
>>>> 'A' in hct['documents']
False
>>> hct['documents']['A']
<git.Tree "8c74cba527a814a3700a96d8b168715684013857"> 
```

所以我想知道，人们如何在尝试处理给定文件之前检查给定文件是否在 git 树中？尝试访问不在树中的文件的对象将引发 KeyError，因此我可以尝试捕获。但这感觉像是在例行存在检查中使用异常处理很糟糕。

我错过了一些非常明显的事情吗？如何使用 gitpython（或 Python 中的任何库/方法）检查​​提交树中是否存在文件？

**自我回答**

好的，我在[Tree 类](https://github.com/gitpython-developers/GitPython/blob/master/git/objects/tree.py)中四处挖掘，看看 __contains__ 做了什么。事实证明，在子文件夹中搜索时，必须使用来自 repo 根目录的完整相对路径来检查文件是否存在。所以我上面所做的检查的工作版本是：

```
>>> 'documents/A' in hct['documents']
True 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-21T16:07:25.497

[EricP 的答案](https://stackoverflow.com/a/14364527/241211)有一个错误。这是一个固定版本：

```
def fileInRepo(repo, filePath):
    '''
    repo is a gitPython Repo object
    filePath is the full path to the file from the repository root
    returns true if file is found in the repo at the specified path, false otherwise
    '''
    pathdir = os.path.dirname(filePath)

    # Build up reference to desired repo path
    rsub = repo.head.commit.tree

    for path_element in pathdir.split(os.path.sep):

        # If dir on file path is not in repo, neither is file. 
        try : 
            rsub = rsub[path_element]

        except KeyError : 

            return False

    return(filePath in rsub) 
```

用法：

```
file_found = fileInRepo(repo, 'documents/A') 
```

这与 EricP 的代码非常相似，但会处理包含文件的文件夹不在 repo 中的情况。在这种情况下， EricP 的函数会引发 a `KeyError`。此函数返回`False`.

（我提出编辑 EricP 的代码但被拒绝了。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T17:46:29.547

扩展 Bill 的解决方案，这是一个确定文件是否在 repo 中的函数：

```
def fileInRepo(repo,path_to_file):
    '''
    repo is a gitPython Repo object
    path_to_file is the full path to the file from the repository root
    returns true if file is found in the repo at the specified path, false otherwise
    '''
    pathdir = os.path.dirname(path_to_file)

    # Build up reference to desired repo path
    rsub = repo.head.commit.tree
    for path_element in pathdir.split(os.path.sep):
        rsub = rsub[path_element]
    return(path_to_file in rsub) 
```

示例用法：

```
file_found = fileInRepo(repo, 'documents/A') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-14T22:10:01.567

如果你想省略 catch 尝试，你可以检查对象是否在 repo 中：

```
def fileInRepo(repo, path_to_file):
    dir_path = os.path.dirname(path_to_file)
    rsub = repo.head.commit.tree
    path_elements = dir_path.split(os.path.sep)
    for el_id, element in enumerate(path_elements):
        sub_path = os.path.join(*path_elements[:el_id + 1])
        if sub_path in rsub:
            rsub = rsub[element]
        else:
            return False
    return path_to_file in rsub 
```

或者您可以遍历 repo 中的所有项目，但它肯定会更慢：

```
def isFileInRepo(repo, path_to_file):
    rsub = repo.head.commit.tree
    for element in rsub.traverse():
        if element.path == path_to_file:
            return True
    return False 
```

# haskell - 解析器跳过行

> ID：10466450
> 
> 赞同：2
> 
> 时间：2012-05-05T22:18:01.690
> 
> 标签：haskell, pug, parsec

我想为[Jade](http://jade-lang.com/)的一个子集编写一个简单的解析器，生成一些[XmlHtml](http://hackage.haskell.org/package/xmlhtml)以供进一步处理。

解析器非常简单，但与[Parsec](http://hackage.haskell.org/package/parsec)一样，有点长。因为我不知道是否允许我发布这么长的代码帖子，所以我在[这里](https://gist.github.com/2605850)有完整的工作示例。

我以前涉足过 Parsec，但很少成功。现在，我不太明白为什么它似乎吞下了以下几行。例如，jade 的输入

```
.foo.bar
    | Foo
    | Bar
    | Baz 
```

用 测试`parseTest tag txt`，返回：

```
Element {elementTag = "div", elementAttrs = [("class","foo bar")], elementChildren = [TextNode "Foo"]} 
```

我的解析器似乎能够处理任何类型的嵌套，但绝不会超过一行。我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T23:26:26.077

如果 Parsec 无法匹配剩余的输入，它将在该点停止解析并简单地忽略该输入。这里的问题是，在解析了一个标签之后，您不会在下一个标签之前消耗行首的空格，因此 Parsec 无法解析剩余的输入和保释。（可能还有其他问题，我现在无法测试代码）

有很多方法可以添加一些消耗空格的东西，但我不熟悉 Jade，所以我不能告诉你哪种方式是“正确”的方式（我不知道缩进语法是如何工作的），但只是`whiteSpace`在某处添加结束`tag`应该这样做。

顺便说一句，您应该考虑将解析器拆分为 Lexer 和 Parser。Lexer 产生一个类似的令牌流`[Ident "bind", OpenParen, Ident "tag", Equals, StringLiteral "longname", ..., Indentation 1, ...]`，解析器解析该令牌流（是的，Parsec 可以解析任何东西的列表）。我认为这会让你的工作更轻松/更少混乱。

# java - JList 仅显示有限的行数

> ID：10466455
> 
> 赞同：0
> 
> 时间：2012-05-05T22:18:39.970
> 
> 标签：java, swing, user-interface, jlist

我的 JList 只显示有限数量的行，但我的 listData-vector 有超过 70 项。

我对一个列表项使用 jpanel 并将其添加到向量 -> 之后 -> mylist.setListData(theVector);

visibleRowCount 可以设置为 100 或 8，没关系...

**编辑：我在 JScrollPane 中有我的 JList，因为我将它拖到我的布局设计器中**

**EDIT2：一些代码..**

```
private void initSubjectList() {
    try {
        Vector listData = new Vector();
        Vector<Subject> subjects = Subject.loadFromDB();
        for (Subject actSubject : subjects) {
            ListPanel listPanel = new ListPanel();
            listPanel.setSubject(actSubject);
            JLabel textLabel = new JLabel();
            // ... Some properties of my label...
            listPanel.setLayout(new BorderLayout());
            listPanel.add(textLabel, BorderLayout.WEST);

            listData.add(listPanel);
        }

        this.list_subjects.setListData(listData);
        this.list_subjects.setSelectedIndex(0);
        this.list_subjects.updateUI();
        initGradeList(grades, 0);
    } catch (Exception ex) {
        _parent.showError(ErrorPanel.TYPE_OKAY, ErrorPanel.TEXT_SQLEXCEPTION);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T22:26:11.700

将您的 JList 放在 JScrollPane 中：

```
JList list = new JList();
// ...
JScrollPane scrollPane= new JScrollPane(list);

// add scrollpane instead of list to hierarchy. 
```

* * *

这是一个完整的工作示例：

```
import java.util.Vector;

import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;

public class Test2 {
    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                initUI();
            }
        });
    }

    protected static void initUI() {
        JFrame frame = new JFrame("test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        Vector<String> data = new Vector<String>();
        for (int i = 1; i < 100; i++) {
            data.add("Entry " + i);
        }
        JList list = new JList(data);
        list.setVisibleRowCount(8);
        JScrollPane scrollPane = new JScrollPane(list);
        frame.add(scrollPane);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T22:27:01.540

我想知道您是否只是没有将 myList 添加到允许它调整大小的布局中，所以它太小了。或者你不显示到底是什么意思？例如，如果您将它添加到 BorderLayout 的中心，那么它是否有效，至少在您调整窗口大小的情况下？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-23T12:27:35.373

尝试增加 JList 的高度

# jquery - jQuery - 从 live() 更改为 on()

> ID：10466465
> 
> 赞同：0
> 
> 时间：2012-05-05T22:21:04.460
> 
> 标签：jquery, methods, live

我有以下代码，并想从使用 live() 方法更改为使用 on() 方法：

```
$('.commenttext').live('keydown', function(e) {
    if ((e.which == 13) && !e.shiftKey) {
        comment($(this));
        return false;
    }
}); 
```

它是关于评论一篇文章 - 也是使用 on() 方法动态创建的一篇文章。如果我像这样仅将“live”一词更改为“on”

```
$('.commenttext').on('keydown', function(e) {
    if ((e.which == 13) && !e.shiftKey) {
        comment($(this));
        return false;
    }
}); 
```

那么它只适用于不是即时创建的项目。

更新 1

我将代码更改为以下内容：

```
$('.commentsDiv').on('keydown', '.commenttext', function(e) {
    if ((e.which == 13) && !e.shiftKey) {
        comment($(this));
        return false;
    }
}); 
```

commentsDiv 是 commenttext 的父元素，但它仍然不适用于动态创建的元素。例如，以下函数动态创建 commentsDiv：

```
$('#postDiv').on('keydown', '#posttext', function(e) {
    if (e.which==13 && !e.shiftKey) {
        post($(this));
        return false;
    }
}); 
```

有谁知道如何正确调整？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T22:23:16.400

该`live`表单实际上是一个使用 的委托`document`，因此新格式为：

```
$(document).on('keydown', '.commenttext', function...); 
```

通常，最好使用`.commenttext`不随内容变化的选择器的更接近一致的父级（在这种情况下），但`document`应该适用于大多数情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T22:32:47.857

您需要将回调附加到 .commenttext 静态父级的静态意味着页面加载时存在。

例子：

```
$('body').on('keydown', '.commenttext', function(e) {
    if ((e.which == 13) && !e.shiftKey) {
        comment($(this));
        return false;
    }
}); 
```

或者：

```
$('{staticParentElement}').on('keydown', '.commenttext', function(e) {
    if ((e.which == 13) && !e.shiftKey) {
        comment($(this));
        return false;
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T22:22:34.850

您可以使用最近的*静态*父元素作为事件持有者。但是，您也可以使用`body`：

```
$('body').on('keydown', '.commenttext', function(e) {
    if ((e.which == 13) && !e.shiftKey) {
        comment($(this));
        return false;
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T22:23:02.917

```
$('parentElement').on('keydown', '.commenttext', function(e) {
    if ((e.which == 13) && !e.shiftKey) {
        comment($(this));
        return false;
    }
}); 
```

将“parentElement”替换为 .commenttext 的父元素。

# c# - 如何在 Winforms 应用程序的 DataGridView 中进行删除

> ID：10466469
> 
> 赞同：2
> 
> 时间：2012-05-05T22:21:48.517
> 
> 标签：c#, winforms, datagridview

来自[主持人的这个 MSDN 论坛的回答。](http://social.msdn.microsoft.com/Forums/en-US/winformsdatacontrols/thread/75a312ed-de73-406a-bec5-64b62ab66925)要删除一行，**用户可以选择整行，然后只需使用“删除”键即可删除该行**。我被这句话弄糊涂了。这是否意味着当我单击鼠标选择的行并按键盘上的“DEL”键时？如果是，它只是从网格中删除了该行，但根本没有将其保存在数据库中。

我怀疑答案是错误的。如何删除datagridview中的行？我正在使用 C# 4.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T22:25:37.830

它不会从数据库中删除该行。您必须实现自己的逻辑。
请按照这篇文章[在 C# 中使用 DataGridView 控件插入、更新、删除（Windows 应用程序）](http://khanrahim.wordpress.com/2010/04/10/insert-update-delete-with-datagridview-control-in-c-windows-application/)

# php - 似乎无法同时发送 404 和 Location 标头

> ID：10466477
> 
> 赞同：5
> 
> 时间：2012-05-05T22:23:20.903
> 
> 标签：php, header, http-headers, http-status-code-404

当数据库结果为空（它是产品页面）时，我试图发送两者。

我现在使用的代码有效：

```
 header("Status: 404 Not Found");
    include_once("404.html");
    exit; 
```

我最初尝试的代码不起作用：

```
 header("Status: 404 Not Found");
    header("Location: 404.html");
    exit; 
```

使用后一个代码，我可以使用其中任何一个，但不能同时使用两者。换句话说，我可以发送 404 标头并看到它显示在 Wireshark 中，或者我可以发送 Location 标头并重定向，但如果我尝试同时发送两者，则只会发送 404 并且 Location 标头不会重定向。

我已经用一个可行的解决方案解决了问题，但我想知道为什么会这样。

带有 FastCGI 的 Linux 上的 PHP 5.2。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T23:00:32.223

您不能同时发送两者，因为它们是互斥的。

根据[header() 的文档](http://php.net/manual/en/function.header.php)：

> 第二种特殊情况是“Location:”标头。它不仅将此标头发送回浏览器，而且还会向浏览器返回一个 REDIRECT (302) 状态代码，除非已经设置了 201 或 3xx 状态代码。

所以发送两者都是无稽之谈。您会对浏览器说，“该文档不存在。此外，该文档已移至以下位置”。这些是矛盾的。

您找到的解决方案不是“解决方法”——它是正确的方法™</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T22:27:36.610

后一个代码不起作用，因为 404.html 实际上存在于服务器上。您正在发送 404 状态代码，然后重定向到现有页面，从而产生 200（已找到）状态代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T11:52:39.897

在 PHP 5.1.6 中，我碰巧在我的测试机器上使用`header()`命令的顺序来确定返回的状态。因此，如果在 Location 之后设置了状态，则可以返回 HTTP 404 以及 Location 标头：

```
header("Location: ...");
header("HTTP/1.1 404 Not Found"); 
```

# php - iOS NSURLConnection - 来自响应的错误描述

> ID：10466479
> 
> 赞同：0
> 
> 时间：2012-05-05T22:23:21.287
> 
> 标签：php, ios, web-services, nsurlconnection

使用 NSURLConnection，我可以获取我的 php web 服务返回的错误代码，但是有没有办法获取错误描述呢？要获取错误代码，我使用以下代码：

```
int code = [httpResponse statusCode]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T22:34:39.790

`NSHTTPURLResponse`不包含您在[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSHTTPURLResponse_Class/Reference/Reference.html)中看到的错误代码描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T22:30:19.543

`NSMutableData`假设您的服务在响应正文中返回错误描述，您可以使用委托方法将其累积到一个`connection:didReceiveData:`，就像您对正常响应所做的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T22:31:49.340

希望有帮助：

```
NSString *error = [NSHTTPURLResponse localizedStringForStatusCode:[httpResponse statusCode]]; 
```

# windows-phone-7 - 隔离存储问题 WP7

> ID：10466481
> 
> 赞同：0
> 
> 时间：2012-05-05T22:23:39.310
> 
> 标签：windows-phone-7, isolatedstorage

我只是在尝试使用一些基本的独立存储功能，并且在此行的 SaveData 函数中不断收到无效操作：

```
IsolatedStorageFileStream fs = savegameStorage.OpenFile(Filename, FileMode.Open); 
```

这是我正在使用的两个主要功能。

```
public static void OpenData() 
{ 
    IsolatedStorageFile savegameStorage = IsolatedStorageFile.GetUserStoreForApplication(); 
        if (savegameStorage.FileExists(Filename)) 
        { 
            using (IsolatedStorageFileStream fs = savegameStorage.OpenFile(Filename, System.IO.FileMode.Open)) 
            { 
                if (fs != null) 
                { 
                    if (fs.Length == 0) 
                    { 
                        fs.Close(); 
                        fs.Dispose(); 
                        SaveData(); 
                        return; 
                    } 

                    // Reload the saved high-score data. 
                    byte[] saveBytes = new byte[6 * (50)]; 
                    int count = fs.Read(saveBytes, 0, (6 * 50) + 8); 
                    ByteStream BS = new ByteStream(ByteStreamMode.Read, saveBytes, 0); 

                    LevelData.LastStage = BS.ReadInt32(); 
                    LevelData.LastLevel = BS.ReadInt32(); 

                    for (int i = 0; i < 6; ++i) 
                        for (int x = 0; x < 5; ++x) 
                            for (int y = 0; y < 10; ++y) 
                                LevelData.LevelComplete[i][x, y] = BS.ReadBool(); 
                } 
                else 
                { 
                    fs.Close(); 
                    fs.Dispose(); 
                    savegameStorage.CreateFile(Filename); 
                    SaveData(); 
                } 

                fs.Close(); 
            } 
        } 
        else 
        { 
            SaveData(); 
        } 
    } 
public static void SaveData() 
{ 
    IsolatedStorageFile savegameStorage = IsolatedStorageFile.GetUserStoreForApplication(); 
    IsolatedStorageFileStream fs = savegameStorage.OpenFile(Filename, FileMode.Open); 

    if (fs != null) 
    { 
        ByteStream BS = new ByteStream(ByteStreamMode.Write, null, 0); 

        BS.WriteInt32(LevelData.LastStage); 
        BS.WriteInt32(LevelData.LastLevel); 

        for (int i = 0; i < 6; ++i) 
            for (int x = 0; x < 5; ++x) 
                for (int y = 0; y < 10; ++y) 
                    BS.WriteBool(LevelData.LevelComplete[i][x, y]); 

        fs.Write(BS.StreamBuffer, 0, BS.StreamBuffer.Length); 
    } 

    fs.Close(); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T03:28:26.197

我认为问题可能是由于文件流被用作方法调用'savegameStorage.CreateFile(FileName); 将一个引用返回到一个独立存储文件流到创建的文件，然后是你的 SaveData(); 继续尝试打开最近创建的文件，该文件仍在使用该流。

如果你想保持没有参数的静态调用，我会创建一些类似于 SaveNewData(); 而不是调用 open 方法调用 CreateFile。像下面的东西。

```
public static void SaveNewData() 
{ 
    IsolatedStorageFile savegameStorage = IsolatedStorageFile.GetUserStoreForApplication(); 
    IsolatedStorageFileStream fs = savegameStorage.CreateFile(Filename);
    //Continue with existing code.
} 
```

希望有帮助。

# regex - perl 中的解析函数

> ID：10466483
> 
> 赞同：1
> 
> 时间：2012-05-05T22:23:51.250
> 
> 标签：regex, perl, parsing

我正在从另一个脚本生成函数调用列表，如下所示：

```
<<START>>set('element','prop','value');get('element','value');alert('something');run('script','params',return');<<END>> 
```

整个语言都是带有一些参数的函数，仅此而已。我想按顺序执行它们，就像它们一样。

所以我这样做：

```
my $result;
my $script= 'the script written above';
while ( $script =~ m/(\w)\(\'.+\'\);/i){
      callfunction($1,$2,$result); #the function that handles the calls
} 
```

（我认为这有效，未检查）

但问题是我需要它更健壮，我认为必须有一个替代正则表达式的方法，并且能够检查错误的语法、删除空格和添加注释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T08:47:50.833

如果你想变得更健壮，也许看看[RPC](http://en.wikipedia.org/wiki/Remote_procedure_call) - [JSON-RPC](http://en.wikipedia.org/wiki/JSON-RPC)或[XML-RPC](http://en.wikipedia.org/wiki/XML-RPC)都受益于底层健壮的解析器和规范。

# ios - 如何更改用于创建按钮/标签的默认字体？

> ID：10466487
> 
> 赞同：2
> 
> 时间：2012-05-05T22:24:19.547
> 
> 标签：ios, xcode, cocoa-touch, uikit

我正在为我的应用程序制作许多按钮和标签，不得不为每个应用程序更改字体、大小、颜色等非常令人沮丧。我知道我可以在代码中绘制它们，但是您可以更改 Interface Builder 中的默认值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T22:39:29.823

它对我有用，只需用鼠标在 xib 文件中选择所有这些，然后在“属性检查器”中进行编辑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T22:59:00.133

您可以在 IB 中使用 复制控件`cmd+D`。这样，偏好就会延续。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T01:20:30.750

您还可以创建 UIButton 的自定义子类，并在它的 init 方法中编写代码来设置您想要的自定义属性。让我们将您的自定义按钮称为 MyFontsButton。

然后，在 IB 中，创建一个按钮，然后转到身份检查器并将按钮的类从 UIButton 更改为 MyFontsButton。

该按钮将自动使用您在 init 方法中设置的属性。

# c++ - Outputting specific values from an array and getting the correct values

> ID：10466493
> 
> 赞同：1
> 
> 时间：2012-05-05T22:24:58.533
> 
> 标签：c++, arrays

I've run into another issue while writing this code (with MUCH help from programmers here) and I'm having an issue with the program outputting the correct values. beadArrayTop should output something looking like this:

```
 4   *    4    *   4   *   4   *   4   *   4    * 
```

instead it outputs that, only with 0's where the 4's should be.

beadArrayBottom does much of the same. I've tried putting the function printArray before beadArrayTop and beadArrayBottom, and even putting beadArrayTop and beadArrayBottom inside of printArray, but to no avail. Any hints on what I should do in order to make my output correct? Here is the code:

```
 #include <iostream>
#include <iomanip>

using namespace std;

const int MAX = 14;
void line (int &cycleCounter, int &starCounter); //outputs a star followed by six spaces
void solidLine (); //outputs a solid line of stars
void smallerLine (); //ouputs a smaller line of stars
void board (); //outputs the mancala board, with numbers indicating the bins.
void binNumbersTop (); //outputs numbers indicating the bin # (Top only).
void binNumbersBottom (); //outputs numbers indicating the bin # (Bottom only).
void beadArrayTop (); //outputs the array for the top.
void beadArrayBottom (); //outputs the array for the bottom.
void beadArrayMiddle (); //outputs the array for the end bins.
void startArray (int beadArray [MAX]); //Creates an array of 14, with 4 in every slot except for 6 and 13.
void printArray (); //Outputs the array mentioned above
int beadArray[MAX];

int main ()

{

    board ();
    cout<<endl;

    cout<<endl;
    system("pause");
    return 0;

}

//**********************************************//
void line ()
{
    int cycleCounter = 9;
    int starCounter = 6;

    while (cycleCounter > 0)
    {
        cout<<"*";

        int spaceCounter = 1;

        while (spaceCounter > 0)
        {
            cout<<"      ";
            spaceCounter = spaceCounter - 1;
            starCounter = starCounter - 1;
            cycleCounter = cycleCounter - 1;
        }
    }
}

//************************************************//
void solidLine()

{
    int loopCounter;
    loopCounter = 57;

    while (loopCounter > 0)
    {
        cout<<"*";
        loopCounter = loopCounter - 1;
    }

}   
//************************************************//
void smallerLine ()
{
    int loopCounterTwo;
    loopCounterTwo = 43;
    cout<<"*  13  ";
    while (loopCounterTwo > 0)
    {
        cout<<"*";
        loopCounterTwo = loopCounterTwo - 1;
    }
    cout<<"   6  *";
}   
//************************************************//
void binNumbersTop ()
{
    cout<<"*";
    int topNumbers = 1;
    cout << setw (7)<<"*";
    cout <<setw (4)<< 0;
    cout << setw (3)<<"*";

    while (topNumbers < 6)
    {
        cout <<setw (4)<< topNumbers;
        cout <<setw (3)<<"*";
        topNumbers = topNumbers + 1;
    }

    cout << setw (7)<<"*"<<endl;

}

//**********************************************//
void binNumbersBottom ()
{
    cout<<"*";
    int bottomNumbers = 11;
    cout << setw (7)<<"*";
    cout <<setw (4)<< 12;
    cout << setw (3)<<"*";

    while (bottomNumbers >= 7)
    {
        cout <<setw (4)<< bottomNumbers;
        cout <<setw (3)<<"*";
        bottomNumbers = bottomNumbers - 1;
    }

    cout << setw (7)<<"*"<<endl;

}

//**********************************************//

void beadArrayTop ()
{

    cout<<"*";
    cout <<setw (7)<<"*";
    cout <<setw (4) <<beadArray[0];
    cout <<setw (3) <<"*";
    cout <<setw (4) <<beadArray[1];
    cout <<setw (3) <<"*";
    cout <<setw (4) <<beadArray[2];
    cout <<setw (3) <<"*";
    cout <<setw (4) <<beadArray[3];
    cout <<setw (3) <<"*";
    cout <<setw (4) <<beadArray[4];
    cout <<setw (3) <<"*";
    cout <<setw (4) <<beadArray[5];
    cout <<setw (3) <<"*";
    cout <<setw (7) <<"*";

}
//***********************************************//
void beadArrayBottom ()
{

    cout<<"*";
    cout <<setw (4)<<beadArray[13];
    cout <<setw (3)<<"*";
    cout <<setw (4) <<beadArray[12];
    cout <<setw (3) <<"*";
    cout <<setw (4) <<beadArray[11];
    cout <<setw (3) <<"*";
    cout <<setw (4) <<beadArray[10];
    cout <<setw (3) <<"*";
    cout <<setw (4) <<beadArray[9];
    cout <<setw (3) <<"*";
    cout <<setw (4) <<beadArray[8];
    cout <<setw (3) <<"*";
    cout <<setw (4) <<beadArray[7];
    cout <<setw (3) <<"*";
    cout <<setw (4) <<beadArray[6];
    cout<< setw (3) <<"*";

}
//***********************************************//

void board ()
{

solidLine ();
cout<<endl;

line ();
cout<<endl;

binNumbersTop ();

line ();
cout<<endl;
beadArrayTop ();

cout<<endl;
line ();
cout<<endl;

smallerLine();
cout<<endl;
line ();
cout<<endl;

binNumbersBottom ();

line ();
cout<<endl;
beadArrayBottom ();
cout<<endl;
line ();
cout<<endl;

solidLine ();
cout<<endl;

}

//*********************************************//

void startArray (int beadArray[MAX])
{
    for(int i=0; i<MAX; ++i)
    {
        beadArray[i]=4;
    }
    beadArray[6]=0;
    beadArray[13]=0;
}
//*********************************************//
void printArray ()
{
    startArray (beadArray);
    for(int i=0; i<MAX; i++)
    cout << beadArray[i];
    cout<<endl<<endl;
}
//*********************************************// 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T22:31:51.530

You are [shadowing the variable](http://en.wikipedia.org/wiki/Variable_shadowing) `beadArray`:

```
void printArray ()
{
    int beadArray[MAX];
    startArray (beadArray); 
```

Remove the `int beadArray[MAX]` declaration here, then the global value will be in scope, and you will be modifying it instead.

Normally, a compiler would warn you about this. If your compiler did not warn you about this, turn up the warnings. (For `gcc`, I like `-Wall -Wextra`, though other people like to turn up the warnings even further. This is a good minimum.)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T22:33:26.967

Your problem is that you're creating two arrays, one on the stack and one global array.

```
int beadArray[MAX];

void printArray ()
{
    int beadArray[MAX];
    startArray (beadArray);

    ...
} 
```

When you call startArray, it uses the local beadArray because it shadows the global array in printArray's scope.

You may want to learn about references and limit the scope of your variables as much as possible to avoid mistakes like this in the future.

# c# - 是否可以在 C# 中使用别名指令声明递归？

> ID：10466499
> 
> 赞同：2
> 
> 时间：2012-05-05T22:26:15.917
> 
> 标签：c#, using-directives, type-alias

此示例给出“找不到类型或命名空间名称‘MyType’（您是否缺少 using 指令或程序集引用？）”

```
using MyType = System.Func<System.Int32, System.Tuple<System.Int32, MyType>>; 
```

是否可以声明这样的递归类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T22:37:45.313

不，我不认为这是可能的。语句的右侧`using`需要解析为真实类型，然后才能为其分配别名。在您的情况下，为了解析右侧，编译器必须完全定义别名...这需要它来解析右侧。这个递归问题没有结局，所以编译器显然不会去打扰。

为了使这里的问题更清楚：让我们假设编译器设法编译您的别名，我这样做了：

```
MyType mytype = x => Tuple<int, MyType>.Create(x, ???); 
```

我可以在函数体中放入什么来定义返回值？最终我需要在某处返回一个可构造的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T22:33:16.223

假设您正在谈论 using 指令（在文件顶部）并且 MyType 存在，是的，这是可能的。例如，这是完全合法的：

```
using System;
using String = System.Func<System.String>;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            String myString = () => "Foo";
            // myString is now a function returning the string "Foo".  Yikes.
        }
    }
} 
```

也就是说，它永远不会通过我的代码审查。谈论混乱。

# mysql - 带有子评论的评论

> ID：10466500
> 
> 赞同：2
> 
> 时间：2012-05-05T22:26:41.380
> 
> 标签：mysql

我正在尝试使用一个查询显示评论和子评论，子评论只嵌套一次，所以我不能有子评论的子评论。下面是我拥有的代码，但是当有多个子注释时，它只会给我一个子注释。我只使用 * 来解决这个问题。

```
SELECT c.*, sc.* 
FROM
comments c 
LEFT JOIN
sub_comments sc 
ON c.coment_id = sc.snippet_id 
WHERE
c.post_id = '" . $cat_id_var . "' 
GROUP BY
c.comment_id 
```

我知道必须有一个简单的答案，但无法弄清楚。我想在那之后所有的评论和子评论也应该在同一张桌子上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T23:54:29.510

同意@Set Sail Media，你绝对应该考虑改变你的数据库结构。但是在您的示例中，“只有一个子评论”的原因在`GROUP BY`参数中。只需将其删除，您将立即获得所有子评论。

# android - 当我长按列表活动中的按钮时创建对话框

> ID：10466511
> 
> 赞同：1
> 
> 时间：2012-05-05T22:28:04.737
> 
> 标签：android, android-dialog

我有一个活动扩展了 listactivity，我在 onitemclicklistener 上实现了它。它相应地工作我想要的。但是我想产生额外的工作。我想长按列表中的一个按钮并生成一个对所有按钮都相同的对话框。我怎样才能做到这一点？

谢谢

# excel - 如何使用 VBA 在 Excel 中合并行？

> ID：10466514
> 
> 赞同：1
> 
> 时间：2012-05-05T22:28:23.347
> 
> 标签：excel, vba

**问题：** 这是针对 Excel 2010

如果它们具有共同的值（在这种情况下是 PN#），我很少需要合并多行的结果，虽然有几列相似但不相同（描述和名称），而数量在不同的列会自动求和。不过，有这样的能力也不错。

这可以使用 SUMIF 多次解释预期结果来完成：

![在此处输入图像描述](../Images/2eec0b9f627167060745f486b54b7496.png)

**可用资源：** [如何使用 VBA 在 Excel 中求和/合并相似的行？](https://stackoverflow.com/questions/6409738/how-to-sum-merge-similar-rows-in-excel-using-vba)

宏运行时，我想： 1\. 指定范围，包括标题 2\. 选择用于比较名称的主列（PN#） 3\. 选择不会求和但只需简单选择的列第一次出现（描述和名称） 4\. 其他列将被求和 5\. 选择我可以放置结果表的位置

**我尝试过/做过什么：**

1.  我能够从选择中获得范围。但希望我能做一些像 Excel 必须选择范围的事情

![在此处输入图像描述](../Images/939bda0695232a779b9c52c688ffff93.png)

2.  输入框让用户选择要用于比较的列，选择第一次出现 PN# 的列，以及要汇总的列。

我的主要问题是如何合并行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T00:41:16.580

据我所知，无法使用内置范围对话框。但是，您可以使用 InputBox 来询问范围，例如

```
dim rRange as Range
Set rRange = Application.InputBox("Please choose a range", "Specify Range", Type:=8) 
```

之后要为您的标签添加标题，您可以使用以下内容：

```
lblYourLabel.Caption = rRange.Address 
```

您可能希望为其添加一些错误处理并查阅有关 InputBox 的手册，但这应该可以帮助您入门。

希望有帮助，斯特凡

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T01:00:40.353

如果您围绕*用户表单*设计功能，则可以添加一个控件来执行此操作：`RefEdit.Ctrl`
它允许用户选择一个范围并返回该范围地址。

# error-correction - 用于标记代码或水印代码纠错的库或代码

> ID：10466515
> 
> 赞同：4
> 
> 时间：2012-05-05T22:28:28.280
> 
> 标签：error-correction, forwarderrorcorrection

是否有人知道任何库或免费可用的代码来编码/解码标记代码或水印代码？只要它可以在普通的 Linux 机器上运行，我并不真正关心这种语言。

对可以执行水印/标记纠错码的程序的任何引用也很好。到目前为止，我能找到的都是关于这个主题的论文，它们没有发布他们的源代码，也没有提供演示程序。

一般来说，我正在寻找插入/删除感知纠错码。

# maven - 实现插件时如何设置比较器以比较 Maven 工件版本？

> ID：10466517
> 
> 赞同：1
> 
> 时间：2012-05-05T22:28:49.950
> 
> 标签：maven, versioning, maven-plugin, artifact

最初我想使用versions-maven-plugin来自动更新maven工件的版本，但后来我发现它不适合我们公司使用的版本。我想修改这个插件或创建我自己的目标以包含在其中（或创建一个新插件），以便我可以自动更新版本。所以这是我的问题：

我将如何实现我自己的工件比较器，以便我可以使用现有的版本 Maven 插件 API 从存储库中获取最新版本？例如，

```
org.codehaus.mojo.versions.api.AbstractVersionDetails 
```

有`getNewestVersion`获取最新版本的方法，但是如何指定如何比较工件？

谢谢你的时间。

**编辑**

这是我们用于版本控制的格式：MAJOR.MINOR.INCREMENTAL.BUILD-SNAPSHOT。这里，MAJOR 是 XX，MINOR 是 Y，INCREMENTAL 是 Z，build 是 AB，其中 X,Y,Z,A,B 是数字。对于埃克斯。54.1.0.1-快照。最重要的是，更新版本时，当前版本和更新版本的 MAJOR.MINOR.INCREMENTAL 部分必须相同，这是因为分支。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T08:58:41.107

[您已在此处](http://mojohaus.org/versions-maven-plugin/version-rules.html)阅读该文档。

# java - Hibernate Validator 不使用 Spring

> ID：10466519
> 
> 赞同：1
> 
> 时间：2012-05-05T22:29:35.597
> 
> 标签：java, spring, hibernate, hibernate-validator

我正在使用休眠验证器来验证表单。但是验证器似乎没有工作。下面是模型

```
 package com.wallstreet.model;

import javax.persistence.Column;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Entity;
import org.hibernate.validator.constraints.Range;
import org.hibernate.validator.constraints.NotEmpty;

@Entity
public class Company {

public static final String[] COLUMN_NAMES = { "Company Id", "Share Id",
        "Name", "Primary Industry", "Secondary Industry",
        "Price", "Activity",  "Rise  Probability",
        "Move Amount Proabbility", "Range Percent"};
public static final int NO_COLUMNS = COLUMN_NAMES.length;

@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(name = "COMPANY_ID")
@NotEmpty
private int id;

@NotEmpty   
@Column(name = "SHARE_ID", unique = true)
private String shareID;

@NotEmpty
@Column(name = "COMPANY_NAME", unique = true)
private String companyName;

@NotEmpty
@Column(name = "PRIMARY_INDUSTRY")
private String primaryIndustry;

@Column(name = "SECONDARY_INDUSTRY")
private String secondaryIndustry;

@NotEmpty
@Range(min = 0)
@Column(name = "CURRENT_PRICE")
private double currentPrice;

@Range(min = 0, max=1)
@Column(name = "ACTIVITY")
private double activity;

@Range(min = 0, max=1)
@Column(name = "RISE_PROBABILITY")
private double riseProbability;

@Range(min = 0, max=1)
@Column(name = "MOVE_AMOUNT_PROBABILITY")
private double moveAmountProbability;

@Range(min = 0)
@Column(name = "RANGE_PERCENT")
private double rangePercent;

public Company() {
}

public int getId() {
    return id;
}

public void setId(int id) {
    this.id = id;
}

public String getShareID() {
    return shareID;
}

public void setShareID(String shareID) {
    this.shareID = shareID;
}

public String getCompanyName() {
    return companyName;
}

public void setCompanyName(String companyName) {
    this.companyName = companyName;
}

public String getPrimaryIndustry() {
    return primaryIndustry;
}

public void setPrimaryIndustry(String primaryIndustry) {
    this.primaryIndustry = primaryIndustry;
}

public String getSecondaryIndustry() {
    return secondaryIndustry;
}

public void setSecondaryIndustry(String secondaryIndustry) {
    this.secondaryIndustry = secondaryIndustry;
}

public double getCurrentPrice() {
    return currentPrice;
}

public void setCurrentPrice(double currentPrice) {
    this.currentPrice = currentPrice;
}

public double getActivity() {
    return activity;
}

public void setActivity(double activity) {
    this.activity = activity;
}

public double getRiseProbability() {
    return riseProbability;
}

public void setRiseProbability(double riseProbability) {
    this.riseProbability = riseProbability;
}

public double getMoveAmountProbability() {
    return moveAmountProbability;
}

public void setMoveAmountProbability(double moveAmountProbability) {
    this.moveAmountProbability = moveAmountProbability;
}

public double getRangePercent() {
    return rangePercent;
}

public void setRangePercent(double rangePercent) {
    this.rangePercent = rangePercent;
} 
```

}

下面是我的控制器

```
@RequestMapping(value="admin/registercompanies.html", method= RequestMethod.POST)
public ModelAndView saveCompany(@Valid Company company,BindingResult result, SessionStatus status){
    if(result.hasErrors()){
        System.out.println("1");
        return new ModelAndView("admin/company/register");
    }
    else{
        companyService.addCompany(company);
        return new ModelAndView("admin/company/registered");
    }
} 
```

1 没有打印出来，公司正在注册。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T23:10:42.293

也许您忘记在配置文件中声明某些内容。你能添加你的 dispatcher-servlet 配置文件吗？这是我的参考，我的验证工作正常。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:p="http://www.springframework.org/schema/p"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xsi:schemaLocation="http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/mvc 
        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver" 
        p:prefix="/WEB-INF/jsp/" p:suffix=".jsp" /> 
    <context:annotation-config />

    <context:component-scan base-package="com.dlinx90" />

    <mvc:annotation-driven /> 

    <import resource="hibernate-context.xml" />

    <mvc:interceptors>  
        <bean class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor"/>  
    </mvc:interceptors>  

    <bean class="org.springframework.web.servlet.i18n.CookieLocaleResolver"  
        id="localeResolver" /> 

    <bean class="org.springframework.context.support.ResourceBundleMessageSource"  
        id="messageSource">  
        <property name="basename" value="messages" />  
    </bean>

</beans> 
```

希望这可以帮助！

# python - Django _set 错误：“'Campaign' 对象没有属性 'charity_set'”

> ID：10466522
> 
> 赞同：0
> 
> 时间：2012-05-05T22:30:42.583
> 
> 标签：python, django

我有一个与 Campaign 有 ManyToManyField 关系的 Charity 模型，如下所示：

```
class Charity(models.Model):
    name = models.CharField(max_length=200)
    description = models.TextField(blank=True,null=True)
    tag_line = models.CharField(max_length=160, blank=True,null=True)
    campaigns = models.ManyToManyField(Campaign, related_name='campaign_charity')
    ... 
```

ManyToManyField 工作正常，并且campaigns.all() 返回与慈善机构相关的正确活动集。当我尝试使用 object.charity_set 获取对象的反向集时，出现以下错误：

```
Traceback (most recent call last):
  File "<console>", line 1, in <module>
AttributeError: 'Campaign' object has no attribute 'charity_set' 
```

知道为什么吗？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-05T23:15:52.800

我相信该`related_name`属性会覆盖默认`model_set`属性。

我会尝试：

```
object.campaign_charity.all() 
```

如果您想查看对象运行的所有属性/方法`dir(object)`

# iphone - 让 UIRotationGestureRecognizer 更明智

> ID：10466523
> 
> 赞同：0
> 
> 时间：2012-05-05T22:31:01.243
> 
> 标签：iphone, objective-c, uigesturerecognizer, ios5

我已将以下手势识别器添加到我的用户控件中：

```
UIRotationGestureRecognizer *rotate = [[UIRotationGestureRecognizer alloc]
          initWithTarget:self
          action:@selector(ViewRotated:)];
[[self view] addGestureRecognizer:rotate];

-(void)ViewRotated:(UIRotationGestureRecognizer *)sender{
    NSLog(@"rotated");
} 
```

到目前为止，一切都很好，每当我在 iOS 设备上旋转手指时，手势都会快速响应。

* * *

**现在，将捏合手势识别器添加到同一视图时，问题就来了。当我添加：**

```
 UIPinchGestureRecognizer* pch = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(ViewPinched:)];
[[self view] addGestureRecognizer:pch];
//...
// ...

-(void)ViewPinched:(UIPinchGestureRecognizer *)sender{
     NSLog(@"Pinched");
} 
```

**该 pch 事件在 70% 的时间内触发。我必须以完美的方式真正旋转我的手指，以便触发旋转手势而不是捏合手势。如何使旋转手势更明智，以便更容易触发？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T22:46:56.907

您可以设置手势识别器的委托并`YES`从`gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:`方法返回。这允许多个手势识别器同时工作。

# iphone - 以编程方式调用 segue 不起作用

> ID：10466526
> 
> 赞同：2
> 
> 时间：2012-05-05T22:31:15.817
> 
> 标签：iphone, ios, ios5

如果用户第一次使用我的应用程序，我正在尝试打开一个特殊的 viewController。我以前在其他情况下也可以使用它，但由于某种原因，它现在不起作用。我尝试了两种不同的方法，但都没有奏效。我尝试的第一件事是直接从 appDelegate 检查并执行它...然后我尝试检查它是否是第一次从根视图控制器 viewDidLoad 方法以及是否是第一次调用序列以打开特殊注册页面. Niether 正在工作，我不知道为什么.....这是我正在使用的一些代码：

这是在根视图控制器内部。当我这样做时，它会在日志上打印出“主要是第一次”，所以我知道它正在那里。我仔细检查了情节提要中的segue，它被正确命名并往返于正确的地方......

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    if([appDelegate firstTime])
    {
    [self performSegueWithIdentifier:@"mToRegister" sender:self];
        NSLog(@"Main is First time");
    }
    // Do any additional setup after loading the view.
} 
```

在 appDelegate 内部：

NSUserDefaults *standardUserDefaults = [NSUserDefaults standardUserDefaults];
BOOL hasused = [standardUserDefaults boolForKey:@"haveused"];

```
if(haveused){       
    //NOT THEIR FIRST TIME
    //Handle scenario
    firstTime = NO;

    NSString* guid = [[NSMutableString alloc]initWithString:[self getMacAddress]];
    //interest = [appDelegate interest];

    NSString *splitter = [[NSString alloc]initWithString:@"&"];
    NSMutableString *post = [[NSMutableString alloc]initWithString: @"user_read=1&guid="];
    [post appendString:guid];
    NSLog(@"String for Post is %@", post);
    NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
    [request setValue:@"Basic ==" forHTTPHeaderField:@"Authorization"];
    [request setURL:[NSURL URLWithString:@"http://something.com/app/usercrud.php"]];
    [request setHTTPMethod:@"POST"];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody:postData];

    theConnection = [[NSURLConnection alloc]initWithRequest:request delegate:self];
}
else {
        NSLog(@"This is the First time");
        firstTime = YES;
        //THEIR FIRST TIME
        //Handle scenario

//        UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone"
//                                                                 bundle: nil];
//        
//        UIViewController *controller = (UIViewController*)[mainStoryboard 
//                                                           instantiateViewControllerWithIdentifier: @"register"];
//        UIViewController *root = (UIViewController *)self.window.rootViewController;
//        [root presentModalViewController:controller animated:YES]; 
        [self.window.rootViewController performSegueWithIdentifier:@"mToRegister" sender:self];        

    } 
```

任何想法为什么它不会工作？如果没有人知道处理这种情况的更好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T22:53:40.313

我的事情你的应用程序委托没有得到妥善管理，使用 NSDefaults 存储任何唯一的身份并在下次启动时检查，如果 NSDefaults 中存在，那么这不是第一次，如果它不存在，则不是第一次。测试是否存在，如果仍然存在 prblm，那么也从应用程序委托中发布您的 if 部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T00:22:37.157

你用的是什么类型的segue？模态？我相信推送需要导航控制器是我问的原因。

您在 RootViewController 的 viewDidLoad 中使用的代码**应该**像我希望用户登录到我的应用程序时所做的类似操作一样工作。所以我唯一的问题是如何设置 segue 并确保它是有效的等等。

也许尝试删除segue并重新创建它？

也离题了，但最好不要在 AppDelegate 本身中放置大量代码，最好将其重构为单独的对象/单例。

# sql-server - updating SqlClient dataset table with OracleClient dataset table

> ID：10466528
> 
> 赞同：1
> 
> 时间：2012-05-05T22:31:51.150
> 
> 标签：sql-server, vb.net, oracle, datatable

I use a dbDataAdapter to populate a DataTable from an unlinked oracle database.

I have a dbDataAdapter that I want to insert rows into an SQL Server table using SQLCommandBuilder.

I have been trying all day to update the DataTable that references the SQL Server table with the data from the Oracle DataTable so that I can insert the rows.

I've been googling all afternoon with no satisfaction. Anyone know how to do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:49:30.930

如果有人偶然发现这一点，我使用 DataTable.Load(OracleDataReader) 填充 DataTable，然后使用 SQLBulkCopy 将行插入数据库。

无需链接服务器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T04:06:02.720

为什么不使用链接服务器从 SQL 服务器到 oracle，然后使用简单的选择语句。

# php - mySQLi 准备好的语句无法 get_result()

> ID：10466530
> 
> 赞同：8
> 
> 时间：2012-05-05T22:31:54.657
> 
> 标签：php, mysqli, prepared-statement

我完全被 mySQLi 搞糊涂了。尽管多年来我一直在使用过程 mysql 调用，但我想习惯于为它提供的 db security/mySQL 注入保护制作准备好的语句。我正在尝试编写一个简单的选择语句（是的，我知道为此进行程序调用可以增强性能）。运行时，我得到所有回声，直到我碰到`$result = $stmt->get_result();`组件。这一切对我来说似乎都相当简单，但是在阅读了几个小时的 mySQLi 手册后，我不知所措。任何想法为什么这会失败？

*注意：这是一个测试环境，虽然没有对字符进行清理/转义，但我只是将有效内容传递给变量 $username 和 $email。而且，我已经查看了所有内容以找到解决我的问题的方法。

```
function checkUsernameEmailAvailability($username, $email) {
    //Instantiate mysqli connection
    @$mysqli = new mysqli(C_HOST,C_USER,C_PASS,C_BASE) or die("Failed to connect to MySQL database...");
    if (!$mysqli)
    {
        echo 'Error: Could not connect to database.  Please try again later...';
        exit;
    } else {
        echo 'mysqli created';
    }

    /* Create a prepared statement */   
    if($stmt = $mysqli -> prepare("SELECT username,email FROM tb_users WHERE username=? OR email=?")) {
        echo '<br />MYSQLi: ';

        /* Bind parameters s - string, b - boolean, i - int, etc */
        $stmt -> bind_param("ss", $username, $email);
        echo '<br />paramsBound...';

        /* Execute it */
        $stmt -> execute();     
        echo '<br />Executed';

        $result = $stmt->get_result();
        echo '<br />Result acquired';

        /* now you can fetch the results into an array - NICE */
        $myrow = $result->fetch_assoc();
        echo '<br />Fetched';

        /* Close statement */
        /$stmt -> close();
        echo '<br />Done mysqli';
    }
} 
```

另外，每次调用函数时都必须实例化 mysqli 吗？我假设它们不是像程序 mysql 中那样持久的数据库连接。是的，我知道这是一个范围问题，不，我无法理解此类变量的范围。当我在函数之外声明它时，当我进入函数时它不可用。

*如果* 我将第 12 行更改为：

```
if($stmt = $mysqli -> prepare("SELECT username,email FROM tb_users WHERE username=? OR email=?")) { 
```

到：

```
 $stmt = $mysqli->stmt_init();
    if($stmt = $mysqli -> prepare("SELECT username,email FROM tb_users WHERE username=? OR email=?")) {
        if(!stmt) echo 'Statement prepared'; else echo 'Statement NOT prepared'; 
```

我得到声明没有准备好。现在我更加困惑了......

***更新：*** 我联系了我的托管服务提供商，显然支持 mySQLi，并且存在 mysqlnd 驱动程序。也许有一种方法可以简单地测试这个？尽管他们过去通常给了我非常有见识的答案。

***更新...再次：***我自己检查了我的服务器功能并发现，虽然 mysqli 和 PDO 存在，但 mysqlnd 不存在。因此，我明白为什么 get_result() 不起作用（我认为需要 mysqlnd），我仍然不明白为什么准备好的语句本身不起作用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-06T06:38:50.027

通过一些检查，即使我的主机上安装了 mysqli，但显然 mysqlnd 驱动程序不存在。因此，不能使用 get_result()（php 手册将 get_result 定义为依赖于 mysqlnd），而是需要进行额外的编码来按照我想要的方式处理我的结果。

因此，我决定尝试学习 PDO 的工作原理，并在几分钟内，瞧！！！

将上面的代码替换为：

```
function checkUsernameEmailAvailability($username, $email) {

echo 'pdo about to be created';

$dsn = 'mysql:dbname='.C_BASE.';host='.C_HOST;
$user = C_USER;
$password = C_PASS;

try {
    $dbh = new PDO($dsn, $user, $password);
} catch (PDOException $e) {
    echo 'Connection failed: ' . $e->getMessage();
}

$params = array(':username' => $username, ':email' => $email);

try{
$sth = $dbh->prepare('SELECT username,email FROM tb_users WHERE username = :username OR email = :email ');
} catch(PDOException $e) {
    echo 'Prepare failed: ' . $e->getMessage();
}

try{
$sth->execute($params);
} catch(PDOException $e) {
    echo 'Execute failed: ' . $e->getMessage();
}
$result = $sth->fetch(PDO::FETCH_ASSOC);
print_r($result);
} 
```

尽可能多的错误检查，并且首先破解它没有任何问题！

***最终代码***

```
function checkUsernameEmailAvailability($username, $email) {
    $dsn = 'mysql:dbname='.C_BASE.';host='.C_HOST;
    $user = C_USER;
    $password = C_PASS;
    new PDO($dsn, $user, $password);

    $params = array(':username' => $username, ':email' => $email);

    $sth = $dbh->prepare('SELECT username,email FROM tb_users WHERE username = :username OR email = :email ');
    $sth->execute($params);
    $result = $sth->fetch(PDO::FETCH_ASSOC);

    print_r($result);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-04T15:36:12.580

mysqli_stmt :: get_result 仅适用于**mysqlnd**包。删除 php5-mysql 包并安装 php5-mysqlnd

# android - Android PhoneGap App - 按“返回”时强制关闭

> ID：10466539
> 
> 赞同：0
> 
> 时间：2012-05-05T22:34:16.357
> 
> 标签：android, jquery, cordova, forceclose

我正在开发的 phonegap / jquerymobile 应用程序有问题。一切正常，除非您打开应用程序并在导航到任何其他页面之前按下后退按钮，它会强制关闭应用程序并说意外强制关闭。如果您导航到应用程序的任何其他页面，然后按返回，它将按原样转到上一页。

这是我的日志在按下时抛出的内容..

```
05-05 22:29:29.878: E/AndroidRuntime(1524): FATAL EXCEPTION: main
05-05 22:29:29.878: E/AndroidRuntime(1524): android.app.SuperNotCalledException: Activity {com.slammednavigator/com.slammednavigator.SlammedNavigatorActivity} did not call through to super.onDestroy()
05-05 22:29:29.878: E/AndroidRuntime(1524):     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3101)
05-05 22:29:29.878: E/AndroidRuntime(1524):     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3130)
05-05 22:29:29.878: E/AndroidRuntime(1524):     at android.app.ActivityThread.access$1200(ActivityThread.java:123)
05-05 22:29:29.878: E/AndroidRuntime(1524):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1180)
05-05 22:29:29.878: E/AndroidRuntime(1524):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-05 22:29:29.878: E/AndroidRuntime(1524):     at android.os.Looper.loop(Looper.java:137)
05-05 22:29:29.878: E/AndroidRuntime(1524):     at android.app.ActivityThread.main(ActivityThread.java:4424)
05-05 22:29:29.878: E/AndroidRuntime(1524):     at java.lang.reflect.Method.invokeNative(Native Method)
05-05 22:29:29.878: E/AndroidRuntime(1524):     at java.lang.reflect.Method.invoke(Method.java:511)
05-05 22:29:29.878: E/AndroidRuntime(1524):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-05 22:29:29.878: E/AndroidRuntime(1524):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-05 22:29:29.878: E/AndroidRuntime(1524):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T22:42:06.970

没有代码，我只能猜测您需要添加：

```
super.onDestroy(); 
```

到您的主要活动中覆盖的 onDestroy() 函数。

# iphone - 从现有网站制作移动应用程序

> ID：10466540
> 
> 赞同：11
> 
> 时间：2012-05-05T22:34:27.840
> 
> 标签：iphone, ios, mobile

我已经开发了一个功能齐全的网站，我们的团队正在寻求将这个网站导出到 iPhone 应用程序（以及最终其他平台）。我能给出的最好的例子是我基本上已经制作了 Facebook，现在我想制作 Facebook 的应用程序（从 iPhone 的主屏幕启动的应用程序，而不是从浏览器启动的应用程序）。所以，很明显，我们已经有了这个功能，我们只需要把它转换到另一个平台上。这有多难？我们是否必须制作一个全新的软件并且基本上忽略我们已经拥有的所有现有 PHP 代码？该应用程序基本上与网站相同，除了一些布局更改。我们可能希望它能够访问相机功能并且绝对能够上传图片，我认为这会排除移动应用程序？我还是不 不了解制作移动应用程序和从 iPhone 主屏幕启动的应用程序之间的界限。你们对从哪里开始以及这一切会有多困难有什么建议吗？如果我们能够获得我们想要的功能，并通过使用现有代码让我们自己更轻松，我们会很激动。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-05T23:31:36.830

让我们从基础开始。

移动网站是通过手机的网络浏览器访问的网站。HTML 页面由 Web 服务器提供（并且 UI 针对手机布局进行了优化）。

本机应用程序（通常称为“应用程序”）本质上是下载到手机的可执行应用程序。对于 iPhone，这些是用 Objective-C 编写的。对于 Android，它们是用 Java 编写的。对于 Windows Mobile，它们是用 C# 等编写的。

这是您面临的坏消息：

-为了让您的应用程序从 iPhone 的“主屏幕”启动，它必须使用 Objective C 进行编译。与 Android/Java 相同。

-为了访问相机，它需要使用Objective C（或Java for Android）编译。

所以这里有一些好消息给你：

- 您可以轻松地将本机应用程序编写为纯粹的 UI 前端，并使用 REST API 模型调用现有的服务器端代码以实现业务逻辑。您只需要公开您需要向应用程序公开的功能。所以这是重用现有代码库并使应用程序更简单的一种方法。有像 RESTKit 这样的优秀 Objective C 框架可以让这变得非常简单。

- 你可以让你的应用程序变得非常俗气，基本上让它成为你网站的网络浏览器，但如果你不为 iPhone 定制它，那可能不会得到 Apple 的批准。对于期望应用程序像应用程序一样运行的 iPhone 用户来说，这将是一个糟糕的体验。我不会推荐这个。

- 如果你打算发布到多个平台，或者真的不想维护一个 Objective C 项目（以及未来的 Java 项目），你可以使用 PhoneGap、Appcelerator Titanium 或 Sencha Touch 之类的东西。这些包装器将采用 Web 技术 (HTML 5) 编写的应用程序并将它们编译成本机应用程序。这些 HTML 5 应用程序可以访问相机等。您现有的开发人员不必学习 Objective-C 并且可以使用他们已经拥有的 HTML/JavaScript 技能。这些技术有很多好处。缺点是您的应用程序看起来/感觉不如原生应用程序或使用手机的任何“酷”功能。它将像一个好的移动网站一样执行。如果您有优秀的 UI/设计人员，您可以使用这些 Web 技术创建一些非常好的东西。

如果您使用 Google 原生应用程序与 phonegap（或 sencha touch）进行比较，则会有大量关于利弊的信息。这可能是您开始学习的好地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T23:13:32.277

请参阅 App Store 审核指南第 2.12 条

[https://developer.apple.com/appstore/resources/approval/guidelines.html#functionality](https://developer.apple.com/appstore/resources/approval/guidelines.html#functionality)

> ...应用程序只是捆绑为应用程序的网站...可能会被拒绝

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T23:49:00.020

除了@Joel 的良好反应，你应该先了解你应该为用户提供什么样的功能，如果主要功能只能查看网站使用[`UIWebView`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)只是为了能够在商店分发应用程序，正如@Teofilo 所说[，这是不允许](https://stackoverflow.com/q/7421002/251513)的。目前有不同的跨平台应用程序开发解决方案（即[PhoneGap](http://phonegap.com/)），允许您通过UIWebViews使用html5、ajax等技术开发不同平台的应用程序。
这取决于你想提供给用户的功能类型，在原生开发的情况下性能肯定是最好的，因为你对应用程序和设备有更多的控制权，但使用交叉可能仍然很方便-平台解决方案，如果共享功能易于实现，以便在不同平台上获得相同的结果。你在后端使用什么样的技术也没那么重要，重要的是使用标准格式/协议进行通信（即http / json）。这只是我的观点，我希望有人能就这个话题发表他的看法，因为我注意到今天很常见。
不过好问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T22:54:28.093

这取决于。您基本上可以使用 UIWebViews 和自定义样式表使应用程序成为网站的门户，我相信 facebook 应用程序会这样做。它的性能不如真正的本机应用程序，但它可以很好地满足您的目的，并且维护较少。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-30T19:09:14.793

为许多设备优化转换后的应用程序非常困难。如果我是你，我不会一个人这样做。只需使用 Jamblam 来转换您的网站，而不是自己动手。资料来源： [https ://www.jamblamapps.eu](https://www.jamblamapps.eu)

# asp.net - ASP.NET membership model for multiple Company accounts, each with multiple Users

> ID：10466542
> 
> 赞同：1
> 
> 时间：2012-05-05T22:35:12.983
> 
> 标签：asp.net, asp.net-membership, membership-provider

Tyring to design a membership system for multiple company accounts, each with multiple users (as opposed to just unique users ala default ASP.NET Membership provider).

Seems like a very common scenario, but can find NO guidance. **How is this usually implemented?** ARGH!!

Company Account A [CompanyID]; User 1 [UserID]; User 2 [UserID];...

Company Account B [CompanyID]; User 3 [UserID]; User 4 [UserID];...

Can I use ASP.NET 2.0 Membership Provider (as is or modified?), or do I need to roll my own from scratch?

Planning SaaS application in ASP.NET 4.x Web Forms, C#, SQL Server 2008/12, shared DB + shared schema. Customers will sign-up for Accounts (auto-provisioned), then setup their own users manually (or approve sign-ups).

I believe I understand the DB aspect (CompanyID + UserID), just not the Membership provider. I plan to use email address as UserName (always unique), which will then identify which Company user belongs to, so no messing around with URLs needed.

Any guidance greatly appreciated!

# c - LED Matrix using AVR Controller

> ID：10466545
> 
> 赞同：4
> 
> 时间：2012-05-05T22:35:52.097
> 
> 标签：c, matrix, microcontroller, led

I have created a 8x8 LED Matrix that is controlled by a mircocontroller (specifically Atmega8), an 8-bit shift register (HEF4794), and a driver array (MIC2981). The problem I having is that the pattern that is supposed to be displayed is not centered. It needs to be shifted to the left one column and down two rows. Any help would be much appreciated.

I got the idea for this project from here: [http://www.instructables.com/id/LED-matrix-using-shift-registers/](http://www.instructables.com/id/LED-matrix-using-shift-registers/)

```
/*
 * AVRGCC3.c
 *
 * Created: 4/28/2012 1:39:29 PM
 *  Author: Scott
 */ 

#define F_CPU 12000000UL

#include <avr/io.h>
#include <avr/interrupt.h>
#include <util/delay.h>
#include <avr/pgmspace.h>
#include "font8x8.h"

#define ShiftPort   PORTC
#define ShiftDDR    DDRC
#define LatchPin    (1 << 0)
#define DataPin     (1 << 1)
#define ClkPin      (1 << 2)
#define OE          (1 << 3)

#define RowPort     PORTD
#define RowDDR      DDRD
#define RowPin0     (1 << 0)
#define RowPin1     (1 << 1)
#define RowPin2     (1 << 2)
#define RowPin3     (1 << 3)
#define RowPin4     (1 << 4)
#define RowPin5     (1 << 5)
#define RowPin6     (1 << 6)
#define RowPin7     (1 << 7)

#define ScrollSpeed 75  //How many milliseconds to pause before shifting columns left

typedef unsigned char u8;
typedef unsigned int u16;

u8 row_track = 0;

volatile u8 row_buffer[8] = { 0, 0, 0, 0, 0, 0, 0, 0 };

void Delay_ms(int cnt)  //Function delays a give number of milliseconds.  Depends on F_CPU being defined
{
  while (cnt-->0) _delay_ms(1);
}   

static inline void InitPorts(void)  //Function used once to initialize the ports
{
  ShiftDDR |= (LatchPin | ClkPin | DataPin | OE);   //Setup shift register control pins
  RowDDR |= (RowPin0 | RowPin1 | RowPin2 | RowPin3 | RowPin4 | RowPin5 | RowPin6 | RowPin7); //Setup row driver pins

  ShiftPort |= OE;
  RowPort |= RowPin0;               //Drive first row and enable shift registers

  ShiftPort |= LatchPin;                //Set latch pin high
  ShiftPort &= ~(ClkPin | DataPin);             //Set ClkPin and DataPin low
}

static inline void InitTimers(void) //Function used once to set up the timer
{
  TCCR1B |= 1<<WGM12 | 1<<CS11 | 1<<CS10;       //Start timer1 in CTC mode with prescaler of 64
  TIMSK |= 1<<OCIE1A;                   //Enable compare match interrupt
  OCR1A = 0x00BB;                   //Set compare value for 1 mSec
  sei();                        //Enable global interrupts
}

void Shift_Int(u8 shiftData)        //Function used to shift in data
{
  ShiftPort &= ~(LatchPin | ClkPin | DataPin);      //All pins low: LatchPin low signals a write operation

  for (char i=0; i<8; i++)
  {
    ShiftPort &= ~ClkPin;               //Set ClkPin low

    if (shiftData & (1<<i)) ShiftPort |= DataPin;       //Set DataPin high if current bit is 1
    else ShiftPort &= ~DataPin;             //Set DataPin low if current bit is 0

    ShiftPort |= ClkPin;                //Set ClkPin high to increment shift register
    ShiftPort &= ~DataPin;              //Set DataPin low to prepare for next write
  }

  ShiftPort |= LatchPin;                //Set LatchPin high to signal end of write operation
  ShiftPort &= ~(ClkPin | DataPin);             //Reset ClkPin and DataPin to low
}

void Write_Char(u8 pattern)     //Function that writes one pattern to the LED Matrix
{
  //Writes a char to the led matrix
  //Patterns come from font8x8[] in progmem (font8x8.h)
  pattern -= 32;                        
  char temp;
  for (char i=0; i<8; i++)              //Read one column of char at a time
  {
    temp = pgm_read_byte((char *)((int)font8x8 + (8 * pattern) + i));   //Get column from progmem
    for (char j=0; j<8; j++)                        //Cycle through each bit in column
    {
      //Write bits to appropriate row_buffer location
      if (temp & (1<<j)) row_buffer[8-j] |= 1<<(8-i);
      else row_buffer[8-j] &= ~(1<<(8-i));
    }
  }
}

int main(void)
{
    InitPorts();
    InitTimers();
    while(1)
    {
        for (char x = 0; x<255; x++)
        {
            Write_Char(x);
            Delay_ms(500);
        }

    }
}

ISR(TIMER1_COMPA_vect)              //Interrupt Service Routine handles the display.
{
  if(++row_track == 8) row_track = 0;       //Row tracking
  Shift_Int(row_buffer[row_track]);     //Shift in data for next row

  ShiftPort &= ~OE;             //Used to prevent ghosting
  if (row_track == 0)               //Shut down high side controller
  {
    RowPort &= ~(1<<7);             //If Row0 is next, shutdown Row7
  }
  else
  {
    RowPort &= ~(1<<(row_track-1));     //Shutdown previous row
  }

  ShiftPort |= LatchPin;            //Latch low side shift registers
  RowPort |= (1<<row_track);            //Drive high side controller
  ShiftPort |= OE;              //Used to prevent ghosting
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T05:56:32.557

看来您应该能够更改此代码：

```
 //Write bits to appropriate row_buffer location
  if (temp & (1<<j)) row_buffer[8-j] |= 1<<(8-i);
  else row_buffer[8-j] &= ~(1<<(8-i)); 
```

也许对此，只是一个猜测：

```
 //Write bits to appropriate row_buffer location
  if (temp & (1<<j)) row_buffer[6-j] |= 1<<(7-i);
  else row_buffer[6-j] &= ~(1<<(7-i)); 
```

将行的 8 更改为 6，将列的 8 更改为 7。有可能你可能不得不弄乱循环，这样你就不会最终写入越界内存，但这看起来像是在设置像素，所以只要看看改变行号和列号会做什么，你应该能够弄清楚如何将其居中。

# java - getting parent object without passing its reference

> ID：10466554
> 
> 赞同：0
> 
> 时间：2012-05-05T22:37:24.857
> 
> 标签：java, inheritance

Is there a way to get the parent object which is aaaa in this case without passing it explictly to B?

```
class A {
    B b = new B();
}

class B {
    public void getParent(){
}

A aaaa = new A(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T22:52:17.923

您可以将 aaaa 作为参数传递给 B 的构造函数

```
class A {
    B b = new B(this);
}

A aaaa = new A();

class B {
    private A parent;
    public B(A parent) {
        this.parent = parent;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T23:45:46.153

如果您的意思是创建当前实例的对象（而不是持有引用的对象，因为可能有很多对象引用该对象），您可以导航调用堆栈以在构造函数中找到实例化对象。

# mysql - Rails 将日期时间存储在 GMT 中，尽管它已转换为本地时间

> ID：10466555
> 
> 赞同：2
> 
> 时间：2012-05-05T22:37:26.797
> 
> 标签：mysql, ruby-on-rails, ruby, activerecord, timezone

我的 MySQL 将日期时间戳存储在 GMT 中，尽管服务器的时间是 EST。在添加到 MySQL 之前，我将我的日期时间转换为本地（服务器的日期时间 EST），但它存储它 GMt 而不是 EST。这里有什么问题？

```
item.update_attributes({:request_datetime => Time.parse(date+" "+time+" "+timezone).localtime}) # this becomes EST
puts Time.parse(date+" "+time+" "+timezone).localtime.to_s # prints correct time zone, EST.

mysql> SELECT request_datetime,NOW(),TIMESTAMPDIFF(MINUTE,request_datetime,NOW()) FROM items Where item='2542';
+---------------------+---------------------+----------------------------------------------+
| request_datetime    | NOW()               | TIMESTAMPDIFF(MINUTE,request_datetime,NOW()) |
+---------------------+---------------------+----------------------------------------------+
| 2012-05-05 22:30:02 | 2012-05-05 18:30:05 |                                         -239 |
+---------------------+---------------------+----------------------------------------------+
1 row in set (0.00 sec)

mysql> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T22:51:49.770

默认情况下，Rails 以 UTC/GMT 存储所有时间，并在必要时将其转换为本地时间，这使得无论您的服务器如何都可以更轻松地获得正确时间，或者允许您基于每个用户建立时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T03:16:59.423

`application.rb`在作品中添加以下内容

```
config.time_zone = 'Eastern Time (US & Canada)'
config.active_record.default_timezone = 'Eastern Time (US & Canada)' 
```

# python - Importing Python egg module to Google App Engine

> ID：10466562
> 
> 赞同：0
> 
> 时间：2012-05-05T22:39:04.147
> 
> 标签：python, django, google-app-engine

I am building a system on Google App Engine which uses ideone module which is a pure module in egg file. When i try to import it, the GAE says they cannot access the module:

```
[Errno 13] file not accessible: 'C:\\Python27\\lib\\site-packages\\ideone-0.1.4-py2.7.egg' 
```

I have tried to put the egg in the project root and include the `__init__.py` but it still does not work , any idea to solve it?

The ideone module has dependency to module `suds-0.4-py2.7.egg`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T04:25:17.510

从 egg 中提取 ideone 目录，并将其放在应用程序的主目录中，这样你就有了`ideone/__init__.py`. 然后就可以了`import ideone`。

# macos - NSImage TIFFRepresentation 不会随 ARC 一起发布

> ID：10466563
> 
> 赞同：0
> 
> 时间：2012-05-05T22:39:22.797
> 
> 标签：macos, cocoa, memory, memory-leaks, automatic-ref-counting

我有一个处理数千张图像的 OSX Cocoa ARC 项目。为了减少图像的数量，我们扫描图像以查看它们是否是统一的颜色，如果是，我们丢弃图像并跟踪其颜色。

获得纯色的代码是：

```
- (NSColor *)getSolidColor:(NSImage *)image
{
NSBitmapImageRep* raw_img = [NSBitmapImageRep imageRepWithData:[image TIFFRepresentation]];

int Bpr = [raw_img bytesPerRow],spp = [raw_img samplesPerPixel];
unsigned char *data = [raw_img bitmapData];
int w = [raw_img pixelsWide],h = [raw_img pixelsHigh];

uint32_t mask = 0x00FFFFFF;
uint32_t color = *((uint32_t *)data) & mask;

    for( int y=0; y<h; y++ ) 
    {
    unsigned char *p = data + Bpr*y;

        for( int x=0; x<w; x++ ) 
        {
            if( color != (*((uint32_t *)p) & mask) )
                return( nil );
            p += spp;
        }
    }

    return( [raw_img colorAtX:0 y:0] );
} 
```

（为简洁起见，删除了一些错误检查 - 上面的代码假设每个像素有 3 个样本。）

调用它的代码基本上是：

```
NSString *imageFile;
while( imageFile = [self getNextImageFile] )
{
NSImage *image = [[NSImage alloc] initWithContentsOfFile:imageFile];
    if( [image isValid] && [self getSolidColor:image] )
        [fileManager removeItemAtPath:imageFile error:nil];
} 
```

问题是应用程序消耗了大量的内存。当我在分析器中运行它时，它表明所用内存的 90% 是由 [NSImage TIFFRepresentation] 分配的（上面加粗。）

即 TIFFRepresentation 数据和 NSBitmapImageRep 永远不会被释放，即使它们在函数返回后立即超出范围。

为什么？我应该/可以做些什么来强制 ARC 释放这些块？

使用非ARC的“旧方式”，我只需在图像的while循环中放置一个自动释放池，这样就可以解决问题。ARC有这样的概念吗？

谢谢。

（PS. NSZombies 未启用。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T22:55:51.020

ARC 在概念上仍然可以使用自动释放池，只是不能再使用`NSAutoreleasePool`该类。

改用 new`@autoreleasepool`关键字：

```
@autoreleasepool {
   //Do stuff that you previously would have wrapped in an NSAutoreleasePool...
} 
```

# ruby-on-rails - Rails 教程：捆绑安装时出现 nokogiri-1.5.2 错误

> ID：10466566
> 
> 赞同：30
> 
> 时间：2012-05-05T22:40:05.160
> 
> 标签：ruby-on-rails, rubygems, nokogiri, railstutorial.org

[在完成Ruby on Rails 教程](http://ruby.railstutorial.org/chapters/static-pages)第 3 章的 RVM 设置、rspec 和保护部分之后，每当我运行时，`bundle install`我都会收到以下错误转储：

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

    /usr/bin/ruby1.9.1 extconf.rb 
/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mkmf (LoadError)
from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from extconf.rb:5:in `<main>'

Gem files will remain installed in /home/dan/.bundler/tmp/17577/gems/nokogiri-1.5.2 for inspection.
Results logged to /home/dan/.bundler/tmp/17577/gems/nokogiri-1.5.2/ext/nokogiri/gem_make.out
An error occured while installing nokogiri (1.5.2), and Bundler cannot continue.
Make sure that `gem install nokogiri -v '1.5.2'` succeeds before bundling. 
```

在 gem_make.out 中：

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

    /usr/bin/ruby1.9.1 extconf.rb 
/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file --mkmf (LoadError)
from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from extconf.rb:5:in `<main>' 
```

我已经调试了一段时间，我想我被卡住了。帮助将不胜感激！

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-05-05T23:39:03.640

您需要用于为 Ruby 编译扩展模块的头文件。

您可以通过以下方式获得适合您的 ruby​​ 版本的正确版本：

`sudo aptitude install ruby-dev`

# javascript - 如何在 Chrome 扩展中删除事件监听器

> ID：10466567
> 
> 赞同：24
> 
> 时间：2012-05-05T22:40:14.193
> 
> 标签：javascript, events, event-handling, google-chrome-extension

我正在尝试在发出请求后删除`onRequest`添加的侦听器，如下所示：`chrome.extension.onRequest.addListener`

```
chrome.extension.onRequest.addListener(
    function(request){
        chrome.extension.onRequest.removeListener();
        other_function(request);
    }
); 
```

问题是我不知道这是否有效。我试过`chrome.extension.onRequest.hasListener`了，这似乎没有给出正确的答案，所以我想知道是否有其他方法可以删除`onRequest`监听器或检查监听器是否存在。

谢谢！

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-05T23:03:35.283

`removeListener`接受一个论点。您需要命名侦听器函数，然后按名称将其删除：

```
function doStuff(request){
    chrome.extension.onRequest.removeListener(doStuff);
    other_function(request);
}
chrome.extension.onRequest.addListener(doStuff); 
```

或者，更简洁地说：

```
chrome.extension.onRequest.addListener(
    function doStuff(request){
        chrome.extension.onRequest.removeListener(doStuff);
        other_function(request);
    }
); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-11-02T07:42:11.983

使用匿名函数时的另一种简单直接的方法：

```
chrome.runtime.onMessage.addListener(function(msg, sender, reply) {
    chrome.runtime.onMessage.removeListener(arguments.callee);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-01T21:51:14.807

```
// define listener(s)
const createListener = (id, bookmark) => {
  // do something
};

React.useEffect(() => { 
  // Add listener(s)
  chrome.bookmarks.onCreated.addListener(createListener);

  // Return a function that removes listener(s)
  return () => {
    chrome.bookmarks.onCreated.removeListener(createListener);
  };
}, []); 
```

# java - 从 PNG 图像或 Java 面板创建 PDF

> ID：10466569
> 
> 赞同：2
> 
> 时间：2012-05-05T22:40:31.883
> 
> 标签：java, image, pdf, pdf-generation

我正在寻找一个可以获取图像（PNG）并创建 PDF 的 Java 库。或者直接从已绘制的 Java 面板创建 PDF。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T06:27:39.217

[您可以使用 Gnostice PDFOne for Java ( http://www.gnostice.com/PDFOne_Java.asp](http://www.gnostice.com/PDFOne_Java.asp) )来实现这一点。

在下面找到从 PNG 图像创建 PDF 文档的代码片段。

```
PdfDocument doc = new PdfDocument();

// Read the image as BufferedImage object
BufferedImage bufImg = ImageIO.read(new File(
    "SampleImage.PNG"));

// Create PdfImage object using the above BufferedImage object
PdfImage img = PdfImage.create(bufImg);

// Create a PdfPage of image size (image width x image Height)
PdfPage page1 = new PdfPage(img.width(), img.height());

// draw the image at 0, 0
page1.drawImage(img, 0, 0);

// add the page to the document object
doc.add(page1);

// save the document to the output file
doc.save("PNGImageToPDF.pdf");
doc.close(); 
```

要从 JPanel 创建 BufferedImage，您可以使用以下代码片段。

```
int w = jpanel.getWidth();
int h = jpanel.getHeight();
BufferedImage bi = new BufferedImage(w, h,
    BufferedImage.TYPE_INT_RGB);
Graphics2D g2 = bi.createGraphics();
jpanel.paint(g2);
g2.dispose(); 
```

从 JPanel 创建 BuffereImage 后，您可以使用第一个代码片段来创建 PDF。

我希望你会发现这很有用。

免责声明：我为 Gnostice 工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T20:22:05.857

试试[xsPDF](http://code.google.com/p/xspdf/)：

```
BufferedImage image = ImageIO.read(new File(imageFileName));
int width = image.getWidth(), height = image.getHeight();
XSPDF.getInstance()
.setPageSize(width, height)
.setPageMargin(NO_MARGIN)
.setImage(image, 0, 0, width, height, 0)
.createPdf(pdfFileName); 
```

# java - “跟随”一个对象

> ID：10466570
> 
> 赞同：0
> 
> 时间：2012-05-05T22:40:37.767
> 
> 标签：java, python, sql, nosql, nlp

我正在尝试开发实时提要，但遇到了两难境地。我有标准事件，以用户为主题-

*   **人**现在**行动**。[例如，“**约翰**现在**与史蒂夫联系在一起**”。]

当我关注的人做某事时，就会发生此事件。

此外，我还有一个依赖于非用户对象的事件，即“生产”-

*   **生产**现在是**行动**[例如，**泰坦尼克号**现在**在其演职员表中包括凯特温斯莱特**。

换句话说，用户可以关注其他 1) 用户或 2) 作品。但是，这两个事件可能会相互碰撞。假设以下示例。

1)

*   David 没有关注用户 Steve。
*   大卫正在关注泰坦尼克号的制作
*   泰坦尼克号有一个新事件，其中涉及用户史蒂夫。
*   由于大卫关注的是泰坦尼克号而不是史蒂夫，因此大卫的提要会说：
    “**泰坦尼克号**现在在其演职员表中包括**史蒂夫**”。
*   现在大卫开始跟随史蒂夫，上面的语法有效，但假设这种情况：

2)

*   大卫现在追随史蒂夫，但不是泰坦尼克号。
*   史蒂夫加入制作泰坦尼克号。在大卫的提要上会这样说：
    “**史蒂夫**加入了**泰坦尼克号**的制作”。
*   现在大卫开始追随泰坦尼克号，上述语法有效，但与 1) 基于事件的顺序相冲突。

这似乎就是为什么像 Facebook/LinkedIn 这样的网站**总是**有一个一致的对象作为事件的主题（在他们的情况下是用户）。

是否可以同时拥有用户和产品？我知道这会更困难，但怎么能做到呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T23:32:55.653

> 是否可以同时拥有用户和产品？

几种方式：

*   数据库：设置或清除状态标志（在行动与否）
*   Python：要么使用状态标志的多重继承，要么使用带委托的组合
*   Java：带委托的组合

考虑这个问题的另一种方法是使用[面向角色的编程](http://en.wikipedia.org/wiki/Role-oriented_programming)技术。

# sql - 元组变量 - 有人可以向我解释以下 SQL 语句

> ID：10466576
> 
> 赞同：-8
> 
> 时间：2012-05-05T22:41:40.340
> 
> 标签：sql

```
SELECT c1.address
FROM users c1, users c2
WHERE c1.address = c2.address
AND c2.first_name =  'John' 
```

我不明白第三行在做什么。我不明白，因为这个查询返回两个单独的地址，即使在它说地址 1 必须匹配地址 2 的条件下？

我错过了什么？

**编辑：**

该表有三个用户记录。其中两个用户共享相同的名字“约翰”

**编辑：**

另外，为什么我们需要这样做，而不是以下？

```
SELECT address
FROM users
WHERE first_name =  'John' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T22:49:04.087

考虑到您只选择`address`，这些选择是等效的。它返回两个地址，因为有两个“约翰”。

加入地址可以让你弄清楚你还有谁*和*约翰住在一起。例如：

```
SELECT c2.first_name
FROM users c1, users c2
WHERE c1.address = c2.address
AND c1.first_name =  'John'
AND c2.first_name != 'John' 
```

会告诉你每个和“约翰”住在一起的人的名字。

# plpgsql - plpgsql - 字节没有正确解包

> ID：10466580
> 
> 赞同：0
> 
> 时间：2012-05-05T22:42:21.720
> 
> 标签：plpgsql

我在 plpgsql 中写了一个函数，函数中`unpack_numeric_bytes`最重要的部分是：

```
FOR i IN 1..v_length LOOP
    v_val := v_val + (get_byte(v_bytes, v_byte_index) << v_bit_shift);
    v_bit_shift := v_bit_shift + 8;
    v_byte_index := v_byte_index + 1;
END LOOP; 
```

它一直运行良好，直到我发现它没有正确解码的价值......它可能太明显了，但我没有看到它。

电话是：`select unpack_numeric_bytes(E'g\\363I\\274', array[4], 'f');`

代码`v_length`中有 4 个字节，它会尝试解码`E'g\\363I\\274'` ：`{-1136004249}`.. 我注意到 2^32 - 1136004249 = 3158963047，这就是我正在寻找的正确答案！（使用python解包功能对其进行了测试）。

什么是扔掉它？我做错了什么？这是该功能第一次让我失望。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T16:56:44.647

发现问题出在哪里：

```
select ('10111100000000000000000000000000'::bit(32))::integer;
int4 | -1140850688
-- versus
select (('10111100000000000000000000000000'::bit(32))::bigint);
int8 | 3154116608 
```

修复了这一行：

```
v_val := v_val + (get_byte(v_bytes, v_byte_index)::BIGINT << v_bit_shift)::BIGINT; 
```

# java - 无法在 apache POI 中实现 xlsx 文件扩展名

> ID：10466582
> 
> 赞同：0
> 
> 时间：2012-05-05T22:42:30.857
> 
> 标签：java, apache-poi, xlsx, xssf

我无法使用 apache POI 在 java 中创建 XSSF 对象。我有一个保存为字符串数组的文件目录列表，如“list []”。xls (HSSF) 工作正常，没有错误。

**使用以下代码：**

```
String s = list[i]; //line 205
InputStream input = new FileInputStream(s);  //line 206 
Workbook wb = new XSSFWorkbook(input); //line 207 
```

**我得到错误：**

```
Exception in thread "main" java.lang.NoSuchMethodError: org.apache.xmlbeans.XmlOptions.setSaveAggressiveNamespaces()Lorg/apache/xmlbeans/XmlOptions;
    at org.apache.poi.POIXMLDocumentPart.<clinit>(POIXMLDocumentPart.java:56)
    at FileTest.skim(FileTest.java:207)
    at FileTest.main(FileTest.java:125) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T00:13:04.400

这似乎是一个图书馆混淆。我刚刚检查了 xmlbeans-2.3.0 并且它具有您缺少的方法。确保您对正在使用的 POI 版本具有正确的依赖关系。

# javascript - 为什么 Google Plus 使用 XHR 加载 CSS 并将其附加到 instead using <link>?

[问问题](https://stackoverflow.com/questions/ask)问问题 2012-05-05T22:43:12.0271290 次This question shows research effort; it is useful and clear3This question does not show any research effort; it is unclear or not usefulBookmark this question.Show activity on this post.

Analyzing the new Google Plus's javascripts, I realized that Google Plus instead of using `<link>` to reference a CSS file, it uses XHR to load it from a file, then creates a `<style>` and then loads the CSS content to `<style>`.

What is the reason that Google uses this method to load the CSS?

**Proof:**

```
D = function(a) {
 var b = document.createElement("style");
 b.type = "text/css";
 document.getElementsByTagName("head")[0].appendChild(b);
 b.styleSheet ? b.styleSheet.cssText = a : b.appendChild(document.createTextNode(a))
};

var ia = function(a, b) {
 if(4 == b.readyState) {
 var d = window;
 $("xcl");
 b.onreadystatechange = k;
 var c = b.status;
 if(400 > c) {
 try {
 var e = b.getResponseHeader("X-Framework-CSS-Blocks"), f = b.responseText;
 if(e) {
 for(var e = e.split(","), g = c = 0;g < e.length;g++) {
 var V = Number(e[g]);
 D(f.substr(c, V));
 c += V
 }
 c < f.length && D(f.substr(c))
 }else {
 D(f), ha() && C("css", a, d.OZ_lang, "nooffsets")
 }
 d.setTimeout(function() {
 for(var b = i, c = 0, e = document.styleSheets.length;c < e;c++) {
 var g = document.styleSheets[c], g = g.cssRules || g.rules;
 0 < g.length && "sentinel" == g[g.length - 1].selectorText && (b = !0)
 }
 b || C("css", a, d.OZ_lang, "truncated." + f.length)
 }, 1E3)
 }catch(W) {
 throw d.console && d.console.warn(W), C("css", a, d.OZ_lang, "error"), W;
 }
 }else {
 C("css", a, d.OZ_lang, "status." + c)
 }
 $("xcr")
 }
}, ja = function() {
 var a = window.OZ_cssUrl;
 $("xcs");
 var b = ga();
 b.open("GET", a, !0);
 b.onreadystatechange = function() {
 ia(a, b)
 };
 b.send(h)
}

window.OZ_cssUrl && ja() 
```

[javascript](/tags/javascript "show questions tagged 'javascript'")[css](/tags/css "show questions tagged 'css'")[google-plus](/tags/google-plus "show questions tagged 'google-plus'")4

## 3 回答 3

This answer is useful6

Loading CSS via dynamic link tags are unreliable as link tags don't have consistent browser support for [load](http://www.quirksmode.org/dom/events/load.html) and [error](http://www.quirksmode.org/dom/events/error.html) events. Dynamic link tags does work but you don't know if and when the CSS loaded. Plus the fact that they are async, you don't know which came in first and you might end up with the wrong style cascade order.

Instead, it loads it via AJAX as a string, since AJAX has a reliable success and fail events. Then when the string is received, you then append it to a style tag. Since you know the events, you know which came in and which ones did not.

This sacrifices cross-domain CSS for the ability to know if and when the CSS loads.

于 2012-05-05T22:56:04.057 回答This answer is useful4

This is the answer given by Mark Knichel, an engineer on the Google+ infrastructure team.

"you may have noticed that we load our CSS via a XHR instead of a style tag - that is not for optimization reasons, that’s because we hit Internet Explorer’s max CSS selector limit per stylesheet!"

Read the whole thing at [https://plus.google.com/u/0/115060278409766341143/posts/ViaVbBMpSVG](https://plus.google.com/u/0/115060278409766341143/posts/ViaVbBMpSVG)

于 2013-09-20T15:53:56.250 回答This answer is useful2

Regard this there have been current developments where a google developer reported a huge performance gain by switching away from XHR to normal `<link>` inclusion.

> In SPDY capable browsers this resulted in a big latency improvement. In Chrome 27 we saw a 4x speedup at the median, and 5x at 25th percentile. In Firefox 21 we saw a 5x speedup at median, and 8x at 25th percentile. No significant impact was seen at the 99th percentile.

Source: [https://plus.google.com/+IlyaGrigorik/posts/G6W7XVHXiED](https://plus.google.com/+IlyaGrigorik/posts/G6W7XVHXiED)

于 2013-06-18T00:04:57.047 回答

#### Related

[0](/questions/10982505 "Question score (upvotes - downvotes)")[python - 没有 root 的 HPC（suse linux）上的 Python（安装问题）](/questions/10982505)[1](/questions/10982509 "Question score (upvotes - downvotes)")[mysql - MYSQL - 如何避免主 ID 浪费？](/questions/10982509)[3](/questions/10982512 "Question score (upvotes - downvotes)")[c++ - QToolButton 和颜色](/questions/10982512)[2](/questions/10982514 "Question score (upvotes - downvotes)")[extjs - Sencha: Uncaught SyntaxError: Unexpected Identifier](/questions/10982514)[2](/questions/10982517 "Question score (upvotes - downvotes)")[c# - 我应该使用哪种类型/类来映射不同的值？](/questions/10982517)[2](/questions/10982523 "Question score (upvotes - downvotes)")[c# - WPF模式窗口作为WinForms中的工具窗口消失](/questions/10982523)[2](/questions/10982525 "Question score (upvotes - downvotes)")[php - 获取 SQL 表的唯一值并使用 PHP 回显](/questions/10982525)[1](/questions/10982529 "Question score (upvotes - downvotes)")[ruby-on-rails-3 - 咖啡脚本中的for循环](/questions/10982529)[1](/questions/10982535 "Question score (upvotes - downvotes)")[cakephp - CakePHP HABTM – 列出所有相关项目](/questions/10982535)[1](/questions/10982536 "Question score (upvotes - downvotes)")[entity-framework - 更新数据库后实体框架崩溃](/questions/10982536)

#### Reference

[php](https://php.github.net.cn) × 1429865[c/c++](https://c-cpp.com) × 756500[nginx](https://nginx.github.net.cn) × 49975[mongodb](https://mongodb.net.cn) × 159057[mybatis](https://mybatis.net.cn) × 3233[anaconda](https://anaconda.org.cn) × 13410[pycharm](https://pycharm.net.cn) × 14671[python](https://python.github.net.cn) × 1902243[vscode](https://vscode.github.net.cn) × 56040[docker](https://dockerdocs.cn) × 110988[github](https://github.net.cn) × 49000[flask](https://flask.github.net.cn) × 49129[ffmpeg](https://ffmpeg.github.net.cn) × 24037[jmeter](https://jmeter.net) × 16910[matplotlib](https://matplotlib.net) × 63493[bootstrap](https://getbootstrap.net) × 54641[](https://stackoverflow.com)

##### [Stack Overflow 中文网](https://stackoverflow.org.cn)

遵从 CC BY-SA 知识共享许可协议。

> ID：10466585
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# php - How to create a simple JavaScript pagination? (like "see more results")

> ID：10466586
> 
> 赞同：1
> 
> 时间：2012-05-05T22:43:12.587
> 
> 标签：php, javascript, ajax, pagination

As the title says, I've been searching the whole internet for a good solution using simple javascript/jquery for this kind of pagination.

I've got this:

```
<div class="gallery">
<?php
    if (mysql_numrows($sqlstr) != 0) {
        while ($row = mysql_fetch_array($sqlstr)) {
?>
     <a id="<?php echo $row['Ano']; ?>" class="thumbsObras" href="">
        <img src="<?php echo "includes/autores/thumbs/".$row['path']; ?>" width="225" height="225" />
     </a>
<?php
        }
    }
?>
</div> 
```

Basically, the gallery is the container of the repeat zone with the data from the DB. It creates several images.

I wish to have a button that says "see more 12 results" and pressing it automatically displays the next 12 results, so it would have 24 results on the screen. Then if the user wants even more, there's the button again (like App Store in the iPhone), and so on. iIs that possible?

# python - 隐藏 pygame 显示

> ID：10466590
> 
> 赞同：6
> 
> 时间：2012-05-05T22:44:02.693
> 
> 标签：python, pygame

有什么方法可以隐藏 'pygame.display' 的屏幕并使其在之后可见而不调用 'pygame.display.quit()'？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-09-27T03:07:58.900

```
import os
os.environ["SDL_VIDEODRIVER"] = "dummy" 
```

就足够了。看：

[http://www.pygame.org/wiki/HeadlessNoWindowsNeeded](http://www.pygame.org/wiki/HeadlessNoWindowsNeeded)
[https://github.com/ntasfi/PyGame-Learning-Environment/issues/26#issuecomment-330440199](https://github.com/ntasfi/PyGame-Learning-Environment/issues/26#issuecomment-330440199)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-05T23:31:51.180

不，没有。您所能做的就是使用`pygame.display.iconify()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-22T16:52:58.367

如果您实际上不需要使屏幕不可见，那么：

我用这个：

```
 screen = pygame.display.set_mode((1280,1024), pygame.FULLSCREEN) 

        #Run my game

        screen = pygame.display.set_mode((200,200))
        pygame.display.flip()

        call('I CALL AN EXTERNAL PROGRAM HERE')

        screen = pygame.display.set_mode((1280,1024), pygame.FULLSCREEN)
        pygame.display.flip() 
```

从全屏退出，以便可以看到我的第二个应用程序。它很方便，因为它会在返回全屏之前等待第二个应用程序关闭。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-25T03:04:11.167

您可以在 set_mode中使用`pygame.SHOWN`and`pygame.HIDDEN`

隐藏显示：

```
screen = pygame.display.set_mode((800, 600), flags=pygame.HIDDEN) 
```

显示显示：

```
screen = pygame.display.set_mode((800, 600), flags=pygame.SHOWN) 
```

# jquery - 滚动页面时加载内容的 Ajax 请求

> ID：10466595
> 
> 赞同：3
> 
> 时间：2012-05-05T22:45:31.497
> 
> 标签：jquery, ajax

我已经尝试并搜索但没有找到...如何更改我编写的以下方法以使用 on() 方法？

```
//Get old posts when scrolling down
$(window).scroll(function(){
  if($(window).scrollTop()==($(document).height()-$(window).height())){
    //Get older posts
    $.ajax({
        type: 'POST',
        url: 'action/getoldposts.php',
        success: function(oldposts){
            //Append #postsDiv
            $('#postsDiv').append(oldposts);
        }
    });
  } 
}); 
```

提前致谢！

丹尼斯

更新 1

我将代码更改为以下内容，但是动态创建的东西没有功能-我是否缺少一些静态引用？

```
$(window).on('scroll',function(){
  if($(window).scrollTop()==($(document).height()-$(window).height())){
    //Get older posts
    $.ajax({
        type: 'POST',
        url: 'action/getoldposts.php',
        success: function(oldposts){
            //Append #postsDiv
            $('#postsDiv').append(oldposts);
        }
    });
  } 
}); 
```

更新 2

动态创建的元素缺少以下功能：

```
$('#postsDiv').on('keydown', '.commenttext', function(e) {
    if ((e.which == 13) && !e.shiftKey) {
        comment($(this));
        return false;
    }
}); 
```

方法 comment() 如下所示：

```
//Function to comment on a post
function comment(commenttext)
{
//Get postid
var commenttextid=commenttext.attr('id');
var postid=commenttextid.replace("commenttext", "");

//Get commenttext
var commenttext=$('#commenttext'+postid).val();

//Ajax of commenttext is not empty
if(commenttext!="")
{
    $.ajax({
        type: 'POST',
        url: 'action/comment.php',
        data: 'commenttext='+commenttext+'&postid='+postid,
        success: function(data){

            //Prepend comments
            $('#comments'+postid).hide().prepend(
                '<div class="comment"><hr/>'+commenttext.replace( /\n/g, '<br/>' )+'</div'
            ).fadeIn('slow');

            //Remove from textarea what was typed in
            $('#commenttext'+postid).val('');

            //Focus on textarea
            $('#commenttext'+postid).focus();
        }
    }).error(function(){
        alert('The comment could not be sent - please try again later.');
    });
}
else
{
    //If the commenttext is empty, focus on the textarea nonetheless
    $('#commenttext'+postid).focus();
}
} 
```

评论被附加到新加载的内容中，但显然错过了 ajax，因为当我重新加载页面时它不再存在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T22:50:42.290

1）几天前我做了一段类似的代码。在这里，我将页面滚动事件分配给一个检查用户距离底部多少像素的函数。如果用户的像素少于或等于 300，则触发 loadMoreArticles() 函数：

```
$(document).scroll(function(){
        if(($(document).height()-$(window).height()-$(document).scrollTop()) < 300){
            console.log('Scrolled to bottom');
            ArticleList.loadMoreArticles();
        } else {
            console.log('Scroll '+$(document).height()+' - '+$(window).height()+' - ' +$(document).scrollTop());
        }
    }); 
```

console.log() 函数显示它以正确的方式实现

2）您可以在添加新内容后再次添加功能。像这样：

```
$(window).on('scroll',function(){
  if($(window).scrollTop()==($(document).height()-$(window).height())){
    //Get older posts
    $.ajax({
        type: 'POST',
        url: 'action/getoldposts.php',
        success: function(oldposts){
            //Append #postsDiv
            $('#postsDiv').append(oldposts);
            //Remove all functionalities
            $('#postsDiv').off('keydown');
            //Add all functionalities again
            $('#postsDiv').on('keydown', '.commenttext', function(e) {
                if ((e.which == 13) && !e.shiftKey) {
                    comment($(this));
                    return false;
                }
            });
        }
    });
  } 
}); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-05T22:47:55.653

```
$(window).on('scroll', function(){ 
// ...
}); 
```

# c - 我的链接列表代码有什么问题？

> ID：10466597
> 
> 赞同：0
> 
> 时间：2012-05-05T22:46:15.690
> 
> 标签：c, linked-list

问题解决了:)

我希望你能帮助解释我做错了什么。

提前致谢！

**代码：**

```
#include <stdio.h>
#include <stdlib.h>

typedef struct node {
    char *data;
    struct node * previous;
    struct node * next;
} node, *nodePTR;

/* Insert into list */
void insert(char * buf, nodePTR tail) {
    nodePTR myNode;
    myNode = (node *)malloc(sizeof(node));

    myNode->data = malloc(sizeof(char) * 10);
    strcpy(myNode->data,buf);
    myNode->next = NULL;
    myNode->previous = tail;
    tail->next = myNode;
    //tail = tail->next;
}

void printlist(nodePTR head, int numElements) {
    nodePTR tmpNode;
    tmpNode = head;

    printf("\n\n");

    while(tmpNode!=NULL) {
        printf("Node data: %s\n", tmpNode->data);
        tmpNode = tmpNode->next;
    }
}

int main(void) {
    /* Variables */
    int numElements;
    int i;
    char buf[10];

    nodePTR head, tail;

    tail = (node *)malloc(sizeof(node));
    head = (node *)malloc(sizeof(node));

    tail->data = "EMPTY\0";
    tail->next = NULL;
    tail->previous = NULL;

    head = tail;

    printf("Please enter the number of elements:\n");
    scanf("%d", &numElements);

    /* Build the list */
    for(i = 0; i < numElements; i++) {
        printf("Please enter the data:");
        scanf("%s", buf);
        insert(buf, tail);
        tail = tail->next;
    }

    printlist(head, numElements);

    return 0;
} 
```

**这是我的输出：**
请输入元素数量：
3
请输入数据：n1
请输入数据：n2
请输入数据：n3

节点数据：EMPTY
节点数据：n3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T23:04:48.043

我通常尝试在插入元素之前将头部和尾部保持为 NULL，而不是尝试在整个地方检测空节点。包括我使用的一个非常简单的链表的示例。请注意，此版本适用于微控制器，因此我 malloc/释放列表函数之外的内存（有时来自预分配的节点池）：

```
struct ListNodeStruct
{
  struct ListNodeStruct* Next;
  int Value;
};
typedef struct ListNodeStruct ListNode;

struct ListStruct
{
  ListNode* Head;
  ListNode* Tail;
  int Count;
};
typedef struct ListStruct List;

List CreateList()
//creates a new List
{
  List R;
  R.Head = NULL;
  R.Tail = NULL;
  R.Count = 0;
  return(R);
}

void ListInsertFirst(List* L, ListNode* V)
//insert the object at the start of the list
{
  V->Next = L->Head;
  L->Head = V;
  if (L->Count == 0)
    L->Tail = V;
  L->Count ++;
}

void ListInsertLast(List* L, ListNode* V)
//insert the object at the end of the list
{
  V->Next = NULL;
  if (L->Tail)
    L->Tail->Next = V;
  else
    L->Head = V;
  L->Tail = V;
  L->Count++;
}

ListNode* ListRemoveFirst(List* L)
//remove the first object in the list (no memory is freed)
{
  ListNode* R = L->Head;

  if (L->Head == NULL)
    return(R);

  L->Head = L->Head->Next;
  L->Count--;
  if (L->Count == 0)
    L->Tail = L->Head;
  return(R);  
} 
```

具体到您的代码，当您将对象视为黑盒子时，可以避免一些问题，除了*允许*看到里面的函数。具体来说，您的 main 函数的开头以及第 69 行直接操作列表成员。我通常尝试使用一个专用于初始化对象的函数，因为在使用列表时，您将不得不在许多地方再次执行此操作。

在第 54 行，您将指向字符串文字的指针推送到结构中。此指针仅在当前堆栈帧上有效，这意味着当函数退出时，此指针将不再包含“EMPTY\0”。您应该调用 malloc 并将其存储在那里，并且不要忘记释放。另请注意，C 会自动以空值结尾字符串文字，因此您不需要在末尾使用 \0。

最后，它可能无法在 print 函数中正确迭代的原因是您在尾部而不是头部启动打印迭代器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T23:33:16.547

好吧，我认为您的问题是您将所有节点都指向同一个缓冲区。您每次都需要复制该缓冲区。

```
myNode->data = buf; 
```

只需将数据指向缓冲区的地址。稍后，当您更新该缓冲区时，地址保持不变，但内容会发生变化。所以一切本质上都指向同一个字符串。您需要将缓冲区的内容复制到一个新数组中并在其中指向数据。

当您循环添加节点时，这条线似乎也有问题：

```
head = head->next; 
```

插入应该照顾到这一点。

这是您的代码重新调整后的工作：

```
#include <stdio.h>
#include <stdlib.h>

typedef struct node {
    char *data;
    struct node * previous;
    struct node * next;
} node, *nodePTR;

/* Insert into list */
void insert(char * buf, nodePTR head) {
    nodePTR myNode;
    myNode = (node *)malloc(sizeof(node));

    myNode->data = malloc(sizeof(char) * 10);
    strcpy(myNode->data,buf);
    myNode->next = head->next;
    myNode->previous = head;
    head->next = myNode;
}

void printlist(nodePTR head, int numElements) {
    nodePTR tmpNode;
    tmpNode = head;

    printf("\n\n");

    while(tmpNode!=NULL) {
        printf("Node data: %s\n", tmpNode->data);
        tmpNode = tmpNode->next;
    }
}

int main(void) {
    /* Variables */
    int numElements;
    int i;
    char buf[10];

    nodePTR head, tail;

    tail = (node *)malloc(sizeof(node));
    head = (node *)malloc(sizeof(node));

    tail->data = "EMPTY\0";
    tail->next = NULL;
    tail->previous = NULL;

    head = tail;

    printf("Please enter the number of elements:\n");
    //scanf("%d", &numElements);
    numElements=3;

    /* Build the list */
    for(i = 0; i < numElements; i++) {
        printf("Please enter the data:");
        buf[0] = 60 + i;
        buf[1] = 0;
        insert(buf, head);
    }

    printlist(head, numElements);

    return 0;
} 
```

我摆脱了输入提示，所以我可以让它在键盘上工作，但想法是一样的。另外我想我不小心摆脱了跟踪尾巴。这将在头部之后插入东西所以它会开始：

头 - 尾

头 - 第一 - 尾巴

头部 - 第 2 - 第 1 - 尾巴

...

其中 2nd 是您插入的第二个元素。

至于你的

```
char * tmpBuf = buf; 
```

问题是 tmpBuf 在堆栈上，它*仍然*指向与 buf 相同的地址。您需要使用 malloc 分配一个新缓冲区（或者根据我在评论中的比喻建造一座新房子）。

这条线

```
myNode = (node *)malloc(sizeof(node)); 
```

为您在节点结构中定义的内容创建足够的空间。在您的情况下，它是***指向***字符数组、下一个节点和前一个节点的指针。所以你只有一个字符数组的地址。您的节点中实际上没有空间容纳字符数组。

```
myNode->data = malloc(sizeof(char) * 10); 
```

这个 malloc 实际上为 10 个字符的数组腾出了空间，并将数组的地址保存在节点数据字段中。如果没有第二个 malloc，您永远不会为实际数组腾出空间。当您第一次学习数据结构时，我可能会建议您使用整数作为您的数据类型。让您从正在学习的实际数据结构的工作中分心的陷阱更少。

# javascript - 为什么我的 Google 地图标记无法加载？

> ID：10466600
> 
> 赞同：0
> 
> 时间：2012-05-05T22:47:21.977
> 
> 标签：javascript, google-maps-api-3, google-maps-markers

我是 JavaScript 和 Google Maps API v3 的新手。我正在 ASP.Net 页面中尝试开发人员指南示例代码。地图按预期显示，但未加载标记。如果有人能发现我的错误，我将不胜感激：

```
<style type="text/css">
    html, body, #map_canvas { margin: 0; padding: 0; height: 100%; }
</style>
<script type="text/javascript"
    src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
    var map;
    var myLatlng = new google.maps.LatLng(-41.2954168187213,174.767133718655 )
    function initialize() {
        var myOptions = {
            zoom: 4,
            center: myLatlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById("map_canvas"),
        myOptions);
    }

    var marker = new google.maps.Marker({
        position: myLatlng,
        map: map,
        title: "Hello World!"
    });
    // The following set map made no difference.
    //The constructor above should have been enough?
    //marker.setMap(map);
    //google.maps.event.addDomListener(window, 'load', initialize);
</script>
<body  onload="initialize()">
    <div id="map_canvas"></div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T22:54:12.597

尝试将标记代码放在初始化函数中。否则标记看不到创建的地图。

# mysql - 在 Heroku 上的 Play Framework 1.2 上部署 Java 应用程序，我如何确保它可以处理更高的负载？

> ID：10466601
> 
> 赞同：1
> 
> 时间：2012-05-05T22:47:24.863
> 
> 标签：mysql, deployment, heroku, playframework, playframework-1.x

我已经免费注册了 Heroku，现在我正在尝试在其上部署我的 Play Framework 1.2 Java 应用程序。我可以添加一个 webdyno 并为共享数据库添加内存（我免费获得了 5MB），这样我就可以处理更多的并发用户并顺利处理更多的数据存储。

请分享您在 Heroku 上部署基于 Play Framework (1.x) 的生产就绪 Java 应用程序的经验

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T18:36:27.300

将应用程序部署到 Heroku 后，您可以根据需要添加更多测功机并增加数据库限额。您的应用程序代码不应受到数据库大小或运行的 dyno 数量的影响（因为 Play 是无状态架构）。

所以，回答你的问题......是的，你可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T21:56:53.733

[使用jMeter](http://jmeter.apache.org/)测试您的部署，以确定有多少并发用户可以在他们被拒绝或超时之前访问您的应用程序。如果您对自己的数字不满意，请尝试[增加您的测功机](https://devcenter.heroku.com/articles/scaling)，直到事情看起来不错。

请注意，如果您每月工作超过 750 小时或使用超过 5 MB 的数据库存储，则需要为该服务付费。数据库升级是一个[附加组件](https://addons.heroku.com/heroku-postgresql)。

# java - 排序枚举值

> ID：10466606
> 
> 赞同：4
> 
> 时间：2012-05-05T22:48:13.520
> 
> 标签：java, enums, comparable

我想知道是否有任何方法可以为不同的类订购枚举。例如，如果我有一组固定的化学物质，它们以不同的方式与其他化学物质发生反应，有些强烈，有些弱。我基本上希望能够根据该组应该反应的化学物质（即取决于类别）来切换它们的排列顺序。我知道我应该使用 Comparable 但我不知道该怎么做。如果我不够清楚，请发表评论，我会进一步解释。

谢谢。

```
public static enum Chem {
    H2SO4, 2KNO3, H20, NaCl, NO2
}; 
```

所以我有一些看起来像这样的东西，而且我已经知道每种化学物质会如何与其他化学物质发生反应。我只是想根据它会与之反应的化学物质来排列化学物质。这就是我所拥有的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-05T22:57:51.567

实现不同`Comparator`的（见[http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)）

```
Comparator comparator1 = new Comparator<MyEnum>() {

  public int compare(MyEnum e1, MyEnum e2) {
     //your magic happens here
     if (...)
       return -1;
     else if (...)
       return 1;

     return 0;
  }
};

//and others for different ways of comparing them

//Then use one of them:
MyEnum[] allChemicals = MyEnum.values();
Arrays.sort(allChemicals, comparator1); //this is how you sort them according to the sort critiera in comparator1. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-05T23:00:27.633

这是一个示例，显示根据不同条件排序的枚举的相同值：

```
import java.util.Arrays;
import java.util.Collections;
import java.util.Comparator;
import java.util.List;

public class SortEnum {

    public enum TestEnum {
        A(1, 2), B(5, 1), C(3, 0);
        private int value1;
        private int value2;

        private TestEnum(int value1, int value2) {
            this.value1 = value1;
            this.value2 = value2;
        }

        public int getValue1() {
            return value1;
        }

        public int getValue2() {
            return value2;
        }
    }

    public static void main(String[] args) {
        List<TestEnum> list = Arrays.asList(TestEnum.values());
        System.err.println(list);
        Collections.sort(list, new Comparator<TestEnum>() {
            @Override
            public int compare(TestEnum o1, TestEnum o2) {
                return o1.getValue1() - o2.getValue1();
            }
        });
        System.err.println(list);
        Collections.sort(list, new Comparator<TestEnum>() {
            @Override
            public int compare(TestEnum o1, TestEnum o2) {
                return o1.getValue2() - o2.getValue2();
            }
        });
        System.err.println(list);
    }
} 
```

输出是

> [A, B, C] [A, C, B] [C, B, A]

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T22:58:26.653

假设您有一个元素枚举：

```
enum Elements {Oxygen, Hydrogen, Gold} 
```

并且您想按给定的顺序对它们进行排序，那么我可以这样做：

```
Elements[] myElements = Elements.values();
Arrays.sort(myElements, new ElementComparator()); 
```

哪里`ElementComparator`可以是：

```
public class ElementComparator implements java.util.Comparator<Elements> {
    public int compare(Elements left, Elements right){
        return right.compareTo(left); //use your criteria here
    }
} 
```

您的问题不清楚订购标准的性质。这似乎是关于与化学反应有关的事情。我认为在`Comparator`给定化学反应的情况下，应该采用标准来决定哪个枚举元素比另一个更大。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-14T23:46:07.900

您可以根据需要在枚举中放置任意数量的比较器，请参见以下示例：

```
import java.util.Comparator;

public enum Day {
    MONDAY(1, 3),
    TUESDAY(2, 6),
    WEDNESDAY(3, 5),
    THURSDAY(4, 4),
    FRIDAY(5, 2),
    SATURDAY(6, 1),
    SUNDAY(0, 0);

    private final int calendarPosition;
    private final int workLevel;

    Day(int position, int level) {
      calendarPosition = position;
      workLevel = level;
    }

    int getCalendarPosition(){ return calendarPosition; }  
    int getWorkLevel() { return workLevel;  }

    public static Comparator<Day> calendarPositionComparator = new Comparator<Day>() {
      public int compare(Day d1, Day d2) {
        return d1.getCalendarPosition() - d2.getCalendarPosition();
      }
    };

    public static Comparator<Day> workLevelComparator = new Comparator<Day>() {
      public int compare(Day d1, Day d2) {
        // descending order, harder first
        return d2.getWorkLevel() - d1.getWorkLevel();
      }
    };
} 
```

要查看比较器的运行情况：

```
import java.util.Arrays;
import java.util.Collections;
import java.util.List;

public class EnumDayTest
{
  public static void main (String[] args) {
     List<Day> allDays = Arrays.asList(Day.values());
     System.out.println("===\nListing days in order of calendar position:");
     Collections.sort(allDays, Day.calendarPositionComparator);
     showItems(allDays);
     System.out.println("===\nListing days in order of work level:");
     Collections.sort(allDays, Day.workLevelComparator);
     showItems(allDays);
  }

  public static void showItems(List<Day> days) {
    for (Day day : days) {
      System.out.println(day.name());
    }
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T22:58:44.450

您的意思是代表您的化学品的实际对象是枚举？如果我可以说，这听起来像是一个奇怪的实现：枚举真的更适合某些东西的“属性”。

但是无论如何...如果您真的想将它们表示为枚举然后对它们进行排序，我建议您实现一个 Comparator 可以对您的特定类型的枚举进行排序，然后在其 compare() 方法中进行适当的比较，例如：

```
Comparator<Chemical> comp = new Comparator<Chemical>() {
    public int compare(Chemical o1, Chemical o2) {
        if (o1.reactivity() > o2.reactivity()) {
          return 1;
        } else if (o1.reactivity() < o2.reactivity()) {
          return -1;
        } else {
        return integer depending on whatever else you want to order by...
        }
    }
}; 
```

然后您可以将此比较器传递给所涉及的排序方法、有序集合构造函数等。

您可以扩展您的枚举子类以包含您需要的任何额外方法，例如reactivity()。

# objective-c - 目标c中的Facebook批处理请求

> ID：10466616
> 
> 赞同：3
> 
> 时间：2012-05-05T22:50:24.093
> 
> 标签：objective-c, xcode, cocoa-touch, facebook-graph-api

有人对此有任何要求吗？我不太明白，现在我正在发送 75 个单独的 HTTP 请求，这看起来并不聪明，而且我遇到了这么大的多重查询的问题。

（虽然，对于批量请求，我担心超时的可能性更大，因为它发回的结果更大，可能会在 3G 上丢失）。

有没有人能够在objective-c中编写批处理请求，或者您对非常大的查询有其他建议吗？我知道附加代码的正确形式，但我什至不知道从哪里开始。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T01:09:19.313

[如文档](https://developers.facebook.com/docs/reference/api/batch/)中所述，有一个使用 Graph API 执行批处理请求的选项：

```
curl \
    -F 'access_token=…' \
    -F 'batch=[ \
            {"method": "GET", "relative_url": "me"}, \
            {"method": "GET", "relative_url": "me/friends?limit=50"} \
        ]'\
    https://graph.facebook.com 
```

请注意，单个批处理请求的当前限制为 50 次操作。

Facebook iOS SDK 上的实现看起来有点像这样（`facebook`你的 Facebook 实例在哪里）：

```
NSString *req01 = @"{ \"method\": \"GET\", \"relative_url\": \"me\" }";
NSString *req02 = @"{ \"method\": \"GET\", \"relative_url\": \"me/friends?limit=50\" }";
NSString *allRequests = [NSString stringWithFormat:@"[ %@, %@ ]", req01, req02];
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObject:allRequests forKey:@"batch"];
[facebook requestWithGraphPath:@"me" andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

# java - 使用 HttpClient 4.x 时避免 HTTP 错误 301

> ID：10466621
> 
> 赞同：0
> 
> 时间：2012-05-05T22:51:10.650
> 
> 标签：java, apache-commons-httpclient, apache-httpclient-4.x

这个问题与[从 Commons HttpClient 迁移到 HttpComponents Client](https://stackoverflow.com/questions/10431561/migrate-from-commons-httpclient-to-httpcomponents-client)（从 HttpClient 3 迁移到 HttpClient 4）有关。

我可以在浏览器中物理访问链接，但是当我尝试使用 HttpClient 4.1.13 访问相同的链接时，我收到 HTTP 错误 301（“永久移动”）。

使用 HttpClient 3.1 访问同一链接时，我没有收到 HTTP 错误 301。

什么可能导致这种异常？可能是我在 HC 4 下缺少的设置使其表现得那样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T12:31:52.487

这可能会发生，因为源服务器对具有不同标头的请求的响应不同`User-Agent`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T04:01:46.490

首先，301 不是“错误”。3xx 响应是[“重定向”响应](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3)。4xx 和 5xx 是错误系列。

针对您的问题，根据 RFC 2616，[如果请求方法不是 GET 或 HEAD，用户代理可能不会自动处理重定向](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.2)。我猜你正在做一个POST。HttpClient 4 在遵守 HTTP 规范方面比它的前身更严格，而且它在这一点上绝对符合规范，所以这可能就是你看到这个问题的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T01:23:13.093

如果您使用的是 HC 4.x [HttpClient 服务](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/httpagent.html)，它应该会自动处理重定向。至少，这就是文档所说的。（我注意到有一些配置属性，但文档说默认情况下启用自动重定向处理。）

# jquery - jQuery Mobile - 从主屏幕启动应用程序时 Javascript 未执行

> ID：10466625
> 
> 赞同：0
> 
> 时间：2012-05-05T22:51:51.393
> 
> 标签：jquery, jquery-mobile

这真让我抓狂。我正在开发一个使用 jQuery Mobile 1.1 的 .NET MVC3 应用程序，并且正在我的 iPhone 4S 上进行测试。我进行 javascript 更改并将 .js 文件通过 FTP 传输到我的服务器，然后在我的手机上访问 safari 页面并查看更改。但是当我从主屏幕快捷方式启动应用程序时，不会反映 javascript 更改。

我删除了图标，清除了我的缓存、cookie 等，但无法正常工作。

有没有人见过这个？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T22:55:41.160

什么剧本？你用什么事件？[http://jquerymobile.com/demos/1.1.0/docs/api/events.html](http://jquerymobile.com/demos/1.1.0/docs/api/events.html)

# c# - Java 等效于 C# `StringSplitOptions.RemoveEmptyEntries` 和 Java `StringTokenizer(input2, "{},() \t")`

> ID：10466630
> 
> 赞同：0
> 
> 时间：2012-05-05T22:52:57.940
> 
> 标签：c#, java, regex, split, stringtokenizer

作为一名 Java 新手，我正在努力解决`String.split`. 试图标记以下字符串

```
"(3,3,{S,W,P},{P,W,P},{P,P,P}),(1,2,{S,E}),(2,1,{{S},{E}})" 
```

`"\\{|\\(|\\}|\\)|\\s|,"`使用 String.split的正则表达式模式。

不幸的是，它还会在发生匹配的地方返回空字符串，我想抑制类似于`StringSplitOptions.RemoveEmptyEntries`C# 中的操作。

相反，使用`StringTokenizer`效果很好，但被弃用我试图避免它。为了让我的问题更清楚，我正在尝试与`String.split`使用以下 Tokenizer的等效行为

```
new StringTokenizer(input2, "{},() \t") 
```

请建议，我应该如何进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T00:56:23.960

首先，您可以通过使用字符类而不是交替来消除大部分反斜杠。然后，正如 Christopher 所说，您可以添加一个`+`来模仿 StringTokenizer 匹配*一个或多个*分隔符的行为：

```
"[{},()\\s]+" 
```

不幸的是，当字符串以分隔符开头时，没有办法阻止第一个空标记。 *尾随*的空标记会自动删除，但您必须自己过滤掉前导的。

[当然，如果你愿意，你可以随意使用 StringTokenizer，或者像 Guava's Splitter](http://docs.guava-libraries.googlecode.com/git-history/v12.0/javadoc/index.html)这样的第三方工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T00:25:15.463

Try the commons-lang package, and look for StrTokenizer class. It will handle string splitting for you based on a delimiter and has an option for what to do with empty values (return as null, or ignore).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T22:59:28.620

试试这个正则表达式：

```
(\\{|\\(|\\}|\\)|\\s|,)+ 
```

当然：不推荐使用 StringTokenizer [https://stackoverflow.com/a/6983926/278842](https://stackoverflow.com/a/6983926/278842)

# emacs - Emacs Scheme 评估-最后-性

> ID：10466633
> 
> 赞同：1
> 
> 时间：2012-05-05T22:54:02.600
> 
> 标签：emacs, mit-scheme

我试图将这些添加到我的 .emacs 中，但它们似乎没有效果

```
(local-set-key (kbd "C-x C-e") 'scheme-send-last-sexp )
(local-set-key (kbd "C-M-x") 'scheme-send-definition ) 
```

当我在 .scm 缓冲区中尝试 Cx Ce 时，我正在使用 quack 并让 MIT-Scheme 在一个缓冲区中运行。我没有评估最后一个 s 表达式，而是得到“您必须使用 run-ilisp 启动一个劣质 LISP。” 但是，如果我手动添加快捷方式：

```
M-x local-set-key RET C-x C-e scheme-send-last-sexp RET
M-x local-set-key RET C-M-x scheme-send-definition RET 
```

有用。如何在不手动输入的情况下在 Emacs (23.3.1) 中获得此功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T23:47:01.933

## `C-h f` `local-set-key`

> local-set-key 是一个交互式编译的 Lisp 函数`subr.el`。
> 
> (local-set-key KEY COMMAND)
> 
> ……剪……
> 
> 绑定进入当前缓冲区的本地映射，在大多数情况下，该映射与同一主要模式下的所有其他缓冲区共享。

因此，当您添加`local-set-key`到您的初始化文件时，绑定是在该文件加载时使用的任何主要模式下进行的。

您需要将其添加到一种特定的主要模式。为此，您需要两条信息：

1.  主要模式的名称。
    *   `C-h v``major-mode`从已加载主模式的缓冲区中使用。
    *   让我们假设`mit-scm-mode`
    *   附加`-map`到此以获取键盘映射。
2.  定义主要模式的文件的名称。
    *   使用`C-h f``mit-scm-mode`.
    *   让我们假设`mit-scm-mode.el`。
    *   使用不带扩展名的文件名。

有了这些，您将添加：

```
(eval-after-load "mit-scm-mode"
  '(progn
     (define-key mit-scm-mode-map (kbd "C-x C-e") 'scheme-send-last-sexp )
     (define-key mit-scm-mode-map (kbd "C-M-x") 'scheme-send-definition ))) 
```

到你的初始化文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-26T03:25:04.087

基于上面的好答案，这就是我在 Debian 10 buster 上使用 Emacs 26.1 所做的事情。

```
(eval-after-load "scheme"                                                                                                                         
  '(progn                                                                                                                                         
     (load "cmuscheme")                                                                                                                           
     (define-key scheme-mode-map (kbd "C-x C-e") (lambda () (interactive) (scheme-send-last-sexp)))                                               
     (define-key scheme-mode-map (kbd "C-M-x") (lambda () (interactive) (scheme-send-definition))))) 
```

我从[这个问题](https://stackoverflow.com/questions/1250846/wrong-type-argument-commandp-error-when-binding-a-lambda-to-a-key)和一些挖掘中解决了这个问题。

# clips - 剪辑规则和功能

> ID：10466635
> 
> 赞同：3
> 
> 时间：2012-05-05T22:54:20.030
> 
> 标签：clips

你好，我有几个问题：

1.  我可以在剪辑中修改函数中的事实，还是可以使用事实而不将其作为函数调用的参数。
2.  我可以在规则中生成随机数吗？
3.  我可以在另一个规则中执行某个规则吗？
4.  我可以在函数中进行模式匹配吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T20:23:35.497

1.  你可以修改它`(modify <fact-specifier> <RHS-slot>*)`
2.  是的，有功能`(random [<start-integer-expression> <end-integer-expression>])`。也值得称道之前种下种子
3.  据我所知，你不能。规则只会从议程中删除
4.  您可以检查一个事实是否存在`(fact-existp <fact-address-or-index>)`

# asp.net - 在 asp.net 中使用 API

> ID：10466638
> 
> 赞同：0
> 
> 时间：2012-05-05T22:55:32.627
> 
> 标签：asp.net, visual-studio-2010, c#-4.0

谁能指导我如何在 asp.net 中使用 API（如 Twitter、Facebook、Tumblr 等）？我只是想要一些可以教我在我的 Web 应用程序中使用 API 的东西。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T22:59:44.907

[http://www.4guysfromrolla.com/articles/021710-1.aspx](http://www.4guysfromrolla.com/articles/021710-1.aspx)
你可以搜索他们的api。他们还有如何使用它的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T23:05:14.167

前几天我发现了这个网站，它有一个 gui 来帮助理解这些概念。 [http://apigee.com/providers](http://apigee.com/providers)

# php - 梨邮件换行符

> ID：10466643
> 
> 赞同：-1
> 
> 时间：2012-05-05T22:55:58.477
> 
> 标签：php

我`.$uType. "\n\n";`在我的 Pear Mail 中使用文本/html 的联系人类型...我需要添加`.$uType. "<br/>";`以获取换行符`.$uType. "\r\n";`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T00:35:21.480

我建议你使用

```
.$uType. "<br>\n" 
```

`<br>`由于邮件查看器的兼容性，您应该在其中使用 HTML 3.2/4.0.1（而不是 XHTML）的 HTML 邮件需要该标记。

当您查看源代码时，这`\n`将使调试更容易。

这个答案与梨邮件无关，其他邮件库也一样。

# ruby-on-rails-3 - 简单形式引导水平和内联

> ID：10466646
> 
> 赞同：8
> 
> 时间：2012-05-05T22:56:05.570
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, simple-form

我正在使用 simple_form + bootstrap，但想知道是否可以使某些字段内联，而其他字段以相同的形式在标签下。

我什至可能想将一个表格分成两列或更多列。

有没有办法通过包装器或通过不同的表单构建器或样式来实现这一点？

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-16T14:35:56.593

我找到的解决方案包括使用 bootstrap 提供的“row”和“span”类，并使用简单表单提供的“wrapper_html”将它们插入到各个字段中。

例子：

```
.container
    ...
    = simple_form_for(@stuff, :html => { :class => 'form-horizontal' }) do |f|
      = f.error_notification

      .form-inputs.row
        = f.input :name, :wrapper_html => { :class => 'span6' }
        = f.input :contact_name, :wrapper_html => { :class => 'span6' }

      .form-inputs.row
        = f.input :contact_email, :wrapper_html => { :class => 'span6' }
        = f.input :contact_phone, :as => :string, :wrapper_html => { :class => 'span6' } 
```

您可以阅读有关引导网格系统的文档：http: [//twitter.github.com/bootstrap/scaffolding.html](http://twitter.github.com/bootstrap/scaffolding.html)

或者查看一些引导程序和简单表单集成的示例： [http ://simple-form-b​​ootstrap.plataformatec.com.br/articles/new](http://simple-form-bootstrap.plataformatec.com.br/articles/new)

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T00:23:42.647

您始终可以通过修改表单元素的样式来根据自己的喜好排列字段。参考 2 列布局的任何谷歌搜索结果。例如 -[这个](http://mirificampress.com/show.php?id=106)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T11:28:01.907

您还可以将该字段附加到包装器（为我工作）：

```
 .container
     ...
     = simple_form_for(@stuff, :html => { :class => 'form-horizontal' }) do |f|
       = f.error_notification

       = f.input :postal_code, :label => 'Postal code, house number', :wrapper => :append do 
         = f.input_field :postal_code
         = f.input_field :street_number 
```

# javascript - Javascript取消选中所有复选框    我正在使用 Services[] 以便将 $_POST['Services'] 映射到 PHP 中的一个数组，其中包含所需的值。 但是，在客户端，我还需要在表单提交（到 PHP）后取消选中所有这些复选框。相当简单的 Javascript：（实际的复选框组是 8 长）。 for (j=0; j<8; j++){ fields[6][j].checked=false; } 在哪里： fields[6] = formob.Services[]; formob=document.forms["FooterQuote"]; 问题是我不能将 Services[] 放入 Javascript 数组中。我尝试过使用以下方法：（伪代码，这里只有语法） var fields=[formob.text1, formob.text2, formob.text3, formob.Services[]]; //Syntax error at Services[] var fields=new Array(formob.text1, formob.text2, formob.text3, formob.Services[]); //Syntax error at Services[] var fields=new Array(formob.text1, formob.text2, formob.text3); fields.push(formob.Services[]); //Syntax error at Services[] 所以，不幸的是，据我所知，我无法将 Services[] 推送到 Javascript 数组中。 我也尝试过使用 formob.Services ，但这也不起作用。 有没有人知道如何使复选框的 name="Services[]" 语法在 Javascript 数组中工作，所以我可以循环并取消选中它们？:) NSNotification 未在 super 上调用 在课堂上，我执行以下操作： - (void)windowDidLoad { [super windowDidLoad]; [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(windowWillClose:) name:NSWindowWillCloseNotification object:self.window]; } - (void)windowWillClose:(NSNotification *)notification { NSLog(@"closing"); } 然后我将这个类子类化。只有一个问题。当我对这个类进行子类化时，永远不会发送通知。是否有一个原因？ javascript 4 2 回答 2 This answer is useful 2 你必须解决这样的复选框： var services = document.forms['FooterQuote']['Services []'] ; 有关详细信息，请查看这篇文章：点和方括号符号。 所以要取消选中它使用： for (var i = 0; i < services.length; i++) { services[i].checked = false; } 于 2012-05-05T23:01:59.473 回答 This answer is useful 1 这是您应该使用方括号表示法的时候。 你可以做 formob["Services[]"] 或者 formob.elements["Services[]"] 于 2012-05-05T23:03:31.220 回答 Related 1 android - Android模拟器如何支持其他语言？ 3 asp.net - asp.net MVC 3的下拉列表中的多个选择 5 java - 将数据库表中的多个键值对添加到 HashMap 4 android - ListView 隐藏 EditText 4 c# - VB6中具有默认值的可选参数 4 iis - smtp;550 访问被拒绝 - HELO 名称无效（请参阅 RFC2821 4.1.1.1） 0 memory-leaks - Microsoft DTV-DVD 视频解码器内存泄漏？ 2 java - Java：我需要一种将数据解析为数组的策略 3 image - 旋转 jpg 图像文件的最快方法是什么？ 2 jquery - 使用单个 append 语句添加多个隐藏字段 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10466648
> 
> 赞同：0
> 
> 时间：
> 
> 标签：javascript

```
<label class="checkbox inline">
<input type="checkbox" name="Services[]" value="service1"> Service 1
</label>
<label class="checkbox inline">
<input type="checkbox" name="Services[]" value="service2"> Service 2
</label> 
```

我正在使用 Services[] 以便将 $_POST['Services'] 映射到 PHP 中的一个数组，其中包含所需的值。

但是，在客户端，我还需要在表单提交（到 PHP）后取消选中所有这些复选框。相当简单的 Javascript：（实际的复选框组是 8 长）。

```
for (j=0; j<8; j++){
fields[6][j].checked=false;
} 
```

在哪里：

```
fields[6] = formob.Services[];
formob=document.forms["FooterQuote"]; 
```

问题是我不能将 Services[] 放入 Javascript 数组中。我尝试过使用以下方法：（伪代码，这里只有语法）

```
var fields=[formob.text1, formob.text2, formob.text3, formob.Services[]];
//Syntax error at Services[]

var fields=new Array(formob.text1, formob.text2, formob.text3, formob.Services[]);
//Syntax error at Services[]

var fields=new Array(formob.text1, formob.text2, formob.text3);
fields.push(formob.Services[]);
//Syntax error at Services[] 
```

所以，不幸的是，据我所知，我无法将 Services[] 推送到 Javascript 数组中。

我也尝试过使用 formob.Services ，但这也不起作用。

有没有人知道如何使复选框的 name="Services[]" 语法在 Javascript 数组中工作，所以我可以循环并取消选中它们？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T23:01:59.473

你必须解决这样的复选框：

```
var services = ​document.forms['FooterQuote']['Services​[]']​; 
```

有关详细信息，请查看这篇文章：[点和方括号符号](http://www.dev-archive.net/articles/js-dot-notation/)。

所以要取消选中它使用：

```
for (var i = 0; i < services.length; i++) {
    services[i].checked = false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T23:03:31.220

这是您应该使用[方括号表示法](http://www.jibbering.com/faq/faq_notes/square_brackets.html)的时候。

你可以做

```
formob["Services[]"] 
```

或者

```
formob.elements["Services[]"] 
```

# objective-c - NSNotification 未在 super 上调用

> ID：10466649
> 
> 赞同：0
> 
> 时间：2012-05-05T22:57:10.330
> 
> 标签：objective-c, cocoa

在课堂上，我执行以下操作：

```
- (void)windowDidLoad
{
    [super windowDidLoad];

    [[NSNotificationCenter defaultCenter] addObserver:self 
                                             selector:@selector(windowWillClose:) 
                                                 name:NSWindowWillCloseNotification 
                                               object:self.window];
}

- (void)windowWillClose:(NSNotification *)notification {
    NSLog(@"closing");
} 
```

**然后我将这个类子类化**。只有一个问题。当我对这个类进行子类化时，永远不会发送通知。是否有一个原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T23:39:08.747

您的子类是否覆盖`windowDidLoad`和/或`windowWillClose:`？如果是这样，您的子类的实现是否调用`super`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T00:34:05.250

你可能会错过一些东西，请检查

1.  您是否已经在子类上覆盖了这些方法？

    `- (void)windowDidLoad`

    `- (void)windowWillClose:(NSNotification *)notification`

2.  如果你在 1\. 你写过这样的代码吗？

    `[super windowDidLoad];`或者`[super windowWillClose:param];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-24T10:59:41.887

1）在 windowDidLoad 或 awakeFromNib 处添加以下行

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(windowWillClose:) name:NSWindowWillCloseNotification object:self.window]; 
```

2）选择窗口并导航到检查的属性并选中“关闭时释放”复选框。

# c++ - 为模板类中的嵌套类专门化 std::hash

> ID：10466652
> 
> 赞同：5
> 
> 时间：2012-05-05T22:57:55.853
> 
> 标签：c++, templates, hash, nested, stdhash

我有一个`Baz`包含嵌套类的模板类`Sub`。我想通过专门化 std::hash 为这个子类定义一个哈希函数。但是，它似乎不起作用。

```
#include <functional>

struct Foo {
    struct Sub {
    };
};

template <class T>
struct Bar {
};

template <class T>
struct Baz {
    struct Sub {
        int x;
    };
};

// declare hash for Foo::Sub - all right
namespace std {
    template <>
    struct hash< Foo::Sub >;
}

// declare hash for Bar<T> - all right
namespace std {
    template <class T>
    struct hash< Bar<T> >;
}

// declare hash function for Baz<T>::Sub - doesn't work!
namespace std {
    template <class T>
    struct hash< Baz<T>::Sub >;
}

// Adding typename produces a different error.
namespace std {
    template <class T>
    struct hash< typename Baz<T>::Sub >;
} 
```

Gcc 4.5.3 抱怨：

```
$ g++ -std=c++0x -c hash.cpp
hash.cpp:34:30: error: type/value mismatch at argument 1 in template parameter list for ‘template<class _Tp> struct std::hash’
hash.cpp:34:30: error:   expected a type, got ‘Baz<T>::Sub’
hash.cpp:40:12: error: template parameters not used in partial specialization:
hash.cpp:40:12: error:         ‘T’ 
```

**更新**

我真正想做的是实现一个容器，它支持对其中元素的稳定*引用*（不是 C++ 意义上的）。我希望允许用户将这些引用插入到`std::unordered_set`类似内容中，并使用它们来有效地访问或修改现有元素。以下只是一个模型，而不是我正在实现的确切容器。问题在于为引用类型定义哈希函数。

```
template <class T>
class Container {
public:
    class Reference {
    public:
        // operator==, operator!=, operator< ...., isNull()
    private:
        size_t index; // index into m_entries (or could be anything else)
        // possibly more stuff
    };

    Reference insert (const T &value);
    Reference find (const T &value);
    void remove (Reference r);
    Reference first ();
    Reference next (Reference prev);

private:
    struct Entry { T value, ... };

    std::vector<Entry> m_entries;
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T00:15:45.593

Just pull the Reference class out of Container.

```
template <class Container>
class Reference {
public:
    typedef typename Container::value_type value_type; // etc...

    // operator==, operator!=, operator< ...., isNull()
private:
    size_t index; // index into m_entries (or could be anything else)
    // possibly more stuff
};

template <class T>
class Container {
public:
    typedef ::Reference<Container> Reference;
    friend class Reference; // If you cannot help it

    typedef T value_type;

    Reference insert (const T &value);
    Reference find (const T &value);
    void remove (Reference r);
    Reference first ();
    Reference next (Reference prev);

private:
    struct Entry { T value, ... };

    std::vector<Entry> m_entries;
}; 
```

Specialize like this:

```
namespace std {
    template <typename Container>
    struct hash<Reference<Container>>;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T23:28:51.793

这个问题的答案是，你想要做的事情根本不可能做到。编译器无法确定哪个外部类包含子类型。考虑原因：

```
struct outer1 { typedef int Sub; };
struct outer2 { typedef int Sub; }; 
```

编译器在获得 Sub 时应该如何确定您想要哪个外部？这不可以。没有办法让这个工作。

在您的情况下，虽然非常困难，但可能很可能导出 IFF Sub 依赖于 T。但这需要编译器知道 Sub 来自哪里，而它只是不知道。

所以你根本无法做到这一点。没办法，没办法。

如果您需要一些通用方法来为您的类型查找哈希函数，那么您需要创建一个元函数 get_hash。默认情况下，它可以查找“hash_type”内部类型定义，并被标准哈希覆盖。打字多...

或者，将 Sub 作为其自己的模板从包含类中取出，并在那里使用 typedef 而不是内部类。然后你可以在你的模板上专门散列。

否则，只需将您知道所需的哈希值提供给您正在使用的模板的哈希函数参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T23:09:57.073

您不能将模板专门用于这样的依赖类型。我会尝试这样的事情。

```
struct yes {};

template <typename T>
yes accept_baz_sub(typename Baz<T>::Sub&&);
void accept_baz_sub(...);

template <class T>
struct is_baz_sub : std::is_same<decltype(accept_baz_sub(std::declval<T>())), yes>
{};

template <typename BazSub>
using CheckedBazSub = typename std::enable_if<is_baz_sub<BazSub>::value, BazSub>::type;

namespace std {
    template <class BazSub>
    struct hash<CheckedBazSub<BazSub>>;
} 
```

编辑：这不太有效，根据 [temp.alias] §14.5.7.2 永远不会推断出别名模板名称。

另一种解决方案是编写自己的哈希函数对象并让容器使用它（`std::unordered_map`例如第三个模板参数）。

# c - 检查引脚上的电压并打开 LED

> ID：10466657
> 
> 赞同：1
> 
> 时间：2012-05-05T22:58:54.590
> 
> 标签：c, microcontroller, pic

我开始进入[PIC](http://en.wikipedia.org/wiki/PIC_microcontroller)微控制器，我想从简单的事情开始。我已经尝试过阅读一本书，但它更像是一本 C 书而不是微控制器书。我了解了 ADC、定时器、内存库等，但我没有得到一些实际的例子。

检查引脚上的某些电压或打开[LED](http://en.wikipedia.org/wiki/Light-emitting_diode)的基本步骤是什么？我的意思是，我要求的不是所有代码，而是如何完成这些基本任务的指南。另外，我知道代码取决于微控制器，所以我有一个 16F628A。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T23:43:48.127

像这样控制 LED 是向自己介绍微控制器和电子设备的好方法。您将学习如何阅读数据表、如何执行低级系统配置以及如何构建一些电子电路。但正如您可能已经看到的那样，即使是最简单的任务，一开始也需要一些小技巧和反复试验。好消息是，一旦您了解了基础知识，您就可以将相同的技术应用于整个微控制器类，并且您将开发自己的函数库，这将使构建新项目变得越来越容易。

* * *

16F628A 具有[内存映射 I/O](http://www.xcprod.com/titan/XCSB-DOC/physical_io.html)，这意味着其内部寄存器控制其特殊功能引脚的行为。

根据[数据表](http://ww1.microchip.com/downloads/en/devicedoc/40044f.pdf)(PDF)，28A 有两个模拟[比较器](http://en.wikipedia.org/wiki/Comparator)。每个比较器都连接到 28A 上的三个引脚。两个引脚用于输入：它们连接到您要比较的电压。第三个引脚用于输出：比较器通过将输出引脚上的电压设置为高电平或低电平来指示哪个输入电压更高。

28A 还具有连接到另一个引脚的电压参考。这可以产生一个已知电压，您可以将其连接到比较器输入之一。将您的测试电压连接到另一个比较器输入，并使用输出引脚来驱动 LED。然后，当您的测试电压高于参考电压时，LED 将打开或关闭。（28A 实际上是可配置的：您可以选择点亮 LED 的条件。）

数据表包含一些汇编代码，向您展示如何通过设置比较器控制寄存器中的相应位来配置比较器。

您还需要了解 28A 是否可以直接驱动 LED。一些设备内部包含适当的限流电路；其他人要求您自己提供。

在网络搜索“16F628A 应用说明”（用于制造商的建议）或仅“16F628A 应用程序”（用于用户创建的应用程序）时，您可能会有一些运气。[这](http://diy.viktak.com/2011/02/3-digit-binary-clock.html)看起来很有趣，作者提议将他的软件通过电子邮件发送给您。也许他也会提供一些建议。

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T23:45:11.693

实际代码将略微取决于您使用的编译器，并且很大程度上取决于您是否要使用一些包装库（我不推荐它，因为调用包装器的代码通常比设置正确的寄存器要长）。

一般来说，你要做的就是所谓的GPIO（通用输入输出），你需要做到以下几点：

1.  确保启用了 GPIO 外设时钟。对于 PIC，GPIO 没有单独的时钟，所以这里无事可做。
2.  为它们的 GPIO 功能配置引脚（大多数引脚有多种用途，可以连接到 SPI 控制器、模数转换器等）
3.  写入输出引脚的初始值。
4.  配置引脚方向。（输入或输出）
5.  配置上拉和下拉寄存器，或者没有。
6.  配置更改时中断。（如果你想使用它）
7.  安装中断处理程序。（如果您正在使用它）PIC 将中断处理程序放置在内存中的特定位置，所以这里不需要任何东西。
8.  根据您的应用程序需要读取和写入 GPIO 引脚。

# c# - 如何仅在其中一个表列中保存区分大小写的数据？

> ID：10466659
> 
> 赞同：2
> 
> 时间：2012-05-05T22:59:00.740
> 
> 标签：c#, sql-server, database, case-sensitive

我正在使用 SQL Server 数据库来存储我的应用程序的信息。

表中的一列必须存储区分大小写的数据。

我应该如何将表中的这一特定列设置为区分大小写？

**编辑：**

1）我使用 linq to sql 进行查询 2）我存储在数据库中的信息是区分大小写的

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T23:12:40.530

您可以在列级别覆盖排序规则并将其设置为**区分大小写**的排序规则。

以下脚本显示了两种不同的方式。

1.  在表创建期间设置排序规则。
2.  使用 ALTER 语句为现有列设置排序规则。

在整理`Latin1_General_CS_AS`中，**CS**代表**`CASE SENSITIVE`**

[**阅读此处以了解有关 SQL Server 排序规则的更多信息。**](http://msdn.microsoft.com/en-us/library/ms144260.aspx)

## 在创建表期间设置排序规则

### 使用排序规则创建脚本

```
CREATE TABLE textvalue
(
     caseinsensitive  VARCHAR(30)
  ,  casesensitive    VARCHAR(30)
        COLLATE Latin1_General_CS_AS
); 
```

## 在更改表期间设置排序规则

### 创建没有排序规则的脚本

```
CREATE TABLE textvalue
(
     caseinsensitive  VARCHAR(30)
  ,  casesensitive    VARCHAR(30)
); 
```

### 更改脚本以设置排序规则

```
ALTER TABLE textvalue
    ALTER COLUMN casesensitive VARCHAR(30)
    COLLATE Latin1_General_CS_AS; 
```

## 用测试数据演示的样本

### 填充表脚本

```
INSERT INTO textvalue (caseinsensitive, casesensitive) VALUES
  ('test', 'Test'),
  ('Test', 'test'),
  ('TeSt', 'TeSt'); 
```

### 在区分大小写的列上进行脚本搜索：[**SQL Fiddle 演示**](http://sqlfiddle.com/#!6/5ac27/2)

```
SELECT  caseinsensitive
    ,   casesensitive  
FROM    textvalue 
WHERE   casesensitive = 'test'; 
```

*输出*：

```
CASEINSENSITIVE  CASESENSITIVE
---------------  -------------
Test             test 
```

### 在不区分大小写的列上进行脚本搜索：[**SQL Fiddle 演示**](http://sqlfiddle.com/#!6/5ac27/3)

```
SELECT  caseinsensitive
    ,   casesensitive  
FROM    textvalue 
WHERE   caseinsensitive = 'test'; 
```

*输出*：

```
CASEINSENSITIVE  CASESENSITIVE
---------------  -------------
test             Test
Test             test
TeSt             TeSt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T23:04:52.547

有答案！看看下面的链接！

[http://blog.sqlauthority.com/2007/04/30/case-sensitive-sql-query-search/](http://blog.sqlauthority.com/2007/04/30/case-sensitive-sql-query-search/)

下面的答案当然是另一种选择，但您确实可以在单个 sql server 列上设置区分大小写的参数。

您可以做的另一件事是将值与 MD5 哈希值进行比较，因为 MD5 哈希值对于每个字符串都是唯一的。

```
// md5 hash is unique for TEST, and test
SELECT * FROM table WHERE MD5(column) = MD5("TEST") // Hash : 033bd94b1168d7e4f0d644c3c95e35bf
SELECT * FROM table WHERE MD5(column) = MD5("test") // Hash : 098f6bcd4621d373cade4e832627b4f6 
```

您可能在索引方面遇到问题，但绝对值得一试 :) 或者，您可以在列旁边存储一个 md5 哈希，例如 column_md5，然后基于该列运行搜索。唯一的缺点是您需要在每次更新列时存储散列值

# c# - 实体框架中的单向一对一关系

> ID：10466660
> 
> 赞同：3
> 
> 时间：2012-05-05T22:59:02.117
> 
> 标签：c#, .net, ef-code-first, entity-framework-4.3

下面的一对一关系示例引发异常

```
public class User
{
    public int Id { get; set; }
    public Address Address { get; set; }
}

public class Address
{
    public int Id { get; set; }
    public User User { get; set; }
} 
```

异常说：

> 无法确定类型“ConsoleApplication1.Address”和“ConsoleApplication1.User”之间关联的主体端。此关联的主体端必须使用关系流式 API 或数据注释显式配置。

如果我从地址中删除用户属性但我不想要，它会起作用。

我怎么能毫无例外地建立这样的关系？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-08T01:21:56.847

虽然 Eranga 提供的答案是正确的，并在用户和地址之间创建了一个[共享的主键关联](http://weblogs.asp.net/manavi/archive/2011/04/14/associations-in-ef-4-1-code-first-part-3-shared-primary-key-associations.aspx)，但由于此映射类型的限制，您可能不想使用它。

这是另一种创建 1:1 关联的方法，称为[一对一外键关联](http://weblogs.asp.net/manavi/archive/2011/05/01/associations-in-ef-4-1-code-first-part-5-one-to-one-foreign-key-associations.aspx)：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<Address>()
                .HasRequired(a => a.User)
                .WithOptional(u => u.Address)
                .Map(m => m.MapKey("UserId"));
} 
```

EF Code First 将此识别为 1:1 关联，因此允许您在用户和地址之间建立双向关联。

现在您需要做的就是在 UserId 列上定义一个唯一键约束，以使您的关系在数据库端成为真正的一对一关系。这样做的一种方法是使用已在自定义初始化程序类中覆盖的 Seed 方法：

```
class DbInitializer : DropCreateDatabaseAlways<Context>
{
    protected override void Seed(Context context)
    {
        context.Database.ExecuteSqlCommand("ALTER TABLE Addresses ADD CONSTRAINT uc_User UNIQUE(UserId)");
    }
} 
```

上面的代码将产生以下架构：

![在此处输入图像描述](../Images/24d45778b426f9a11ca42301c25b75d0.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T00:42:18.487

您需要使用 fluent API 将关系映射为共享主键。

```
public class MyContext : DbContext
{
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
         modelBuilder.Entity<Address>()
             .HasRequired(a => a.User)
             .WithOptional(u => u.Address);
    }
} 
```

# google-apps-script - Google 表单 - 即时条件分支

> ID：10466666
> 
> 赞同：6
> 
> 时间：2012-05-05T23:00:11.940
> 
> 标签：google-apps-script, google-forms

我正在对 Google 表单（Google Docs 的一部分）进行调查，我注意到内置了一些脚本功能。我想知道是否可以根据要点中的选择立即显示和隐藏问题列表，但不使用您打算用于条件分支的分页符方法。我们计划有很多繁琐的选择，这会占用过多的页面。

通过隐藏和显示各种`<div></div>`，我希望您可以立即更新表单。例如，您可能会到达表格并看到：

**您当地的分公司是哪家？**( ) 伦敦, ( ) 布里斯托尔, ( ) 曼彻斯特

根据您选择的问题，与您选择的分支相关的问题将立即在下方隐藏，但如果询问其他问题则不会相关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T10:10:22.880

Google Docs Forms 中似乎没有一种方法可以让您实现所需的行为。

一种解决方法是使用 Google Docs 作为“数据库”并在其他地方托管表单，这将允许您修改表单的显示方式，并使用 jQuery，您将能够显示/隐藏适用于您的问题用户。

有关更多信息，请查看[http://www.2webvideo.com/blog/customizing-google-docs-form-for-email-validation-with-free-jquery-script](http://www.2webvideo.com/blog/customizing-google-docs-form-for-email-validation-with-free-jquery-script) - 这种方法的问题之一是该表单不再由 Google 托管，您需要将带有表单的 html 页面托管在其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T00:29:51.140

不幸的是，我不明白这是怎么可能的。

这将要求提交信息，这是在表格的末尾完成的，这也使得整个事情都提交，使得无法进一步编辑它。

有一个数据捕获点，而且，在最后，它不可能对隐藏的问题做任何有用的事情（它们可以在那里，但不能被编辑）。

这可能不是您正在寻找的答案，但这是我的看法

这是社区，所以如果我错了，请随时编辑我的帖子以确保准确性，只是不要在其中发表评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-07T09:49:27.893

我过去曾试图实现同样的目标，遗憾的是这并不完全可能。我能够为预订表格获得此权利。

假设最大插槽数为 2，一旦两个人预订了一个插槽，则该值必须更改为“此会话已完全预订”。

我会说，虽然有可能，但这不是一个好的系统。很多事情都可能出错，这都是由于谷歌表单的限制。

正如上面推荐的那样，我建议研究自由形式来完成你想要做的事情。谷歌表单应该只用于简单的数据采集。

-

PS：

我能够使用谷歌表格功能来计算预订总数来实现上述目标。

# c# - 用 C++/CLI 重写这一行

> ID：10466671
> 
> 赞同：0
> 
> 时间：2012-05-05T23:00:33.143
> 
> 标签：c#, c++-cli

我在 C# 中有这样一个类和委托：

```
public delegate void Super();
public class Event
{
    public event Super activate ;
    public void act()
    {
       if (activate != null) 
           activate();
    }
} 
```

我需要用 C++/CLI 重写它。但我有一个错误 -`usage requires Event::activate to be data member`

```
public delegate void Super();
public ref class Event
{
    public:
        event Super ^activate;
        void act()
        {
            if (activate!=nullptr) 
                activate();
        }
}; 
```

是不是`activate()`通话有问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T23:17:18.397

IIRC，在 C++/CLI 中你不需要空测试，编译器会为你插入它。打电话

```
activate(); 
```

[MSDN](http://msdn.microsoft.com/en-us/library/4b612y2s%28v=vs.110%29.aspx)证实了这一点：

> 下面的代码示例演示了用于生成琐碎事件的 raise 方法的逻辑：如果事件有一个或多个订阅者，则`raise`隐式调用该方法或显式调用委托。如果委托的返回类型不是`void`并且事件订阅者为零，则该`raise`方法返回委托类型的默认值。**如果没有事件订阅者，则调用该`raise`方法只会返回并且不会引发异常。**如果委托返回类型不是`void`，则返回委托类型。

这是一件非常好的事情，因为 C# 鼓励竞争条件（您发布的代码有一个）。C++/CLI 编译器不会在 null 检查和调用之间重新读取支持字段，因此它是线程安全的，无需额外工作。与 C++/CLI 编译器生成的内容等效的正确 C# 版本是：

```
var activate_copy = activate;
if (activate_copy != null) 
    activate_copy(); 
```

# java - 线程“Thread-8”中的异常 java.lang.StackOverflowError...at java.util.Random.nextInt（未知来源）

> ID：10466672
> 
> 赞同：0
> 
> 时间：2012-05-05T23:00:48.550
> 
> 标签：java, multithreading, random, synchronization, thread-safety

```
Exception in thread "Thread-8" java.lang.StackOverflowError
    at sun.misc.Unsafe.compareAndSwapLong(Native Method)
    at java.util.concurrent.atomic.AtomicLong.compareAndSet(Unknown Source)
    at java.util.Random.next(Unknown Source)
    at java.util.Random.nextInt(Unknown Source)
        at sim.ant.colony.ants.Forager.moveTo(Forager.java:108) 
```

我正在使用一个多线程应用程序（Ant Simulation Colony），我将每个蚂蚁创建为一个线程，并且当数十个线程（蚂蚁）正在运行时，每隔几圈就会发生上述异常并且线程被杀死。我使用 Random() 的代码是；

```
Random rand = new Random();
return adjacents.elementAt(rand.nextInt(8)); 
```

这段代码写在线程的本地成员函数中。因此，假设每个线程创建数百次随机数并且有十多个线程在工作。

有人可以帮我解决这个例外吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T23:44:09.737

不是您问题的真正答案，而是您遇到的问题的更多示例，您如何跟踪它以及如何解决它。

拿下面的代码：

```
import java.util.HashMap;
import java.util.Map;

public class StackOverflowExample {

    public static void a() {
        Map<String, String> map = new HashMap<String, String>();
        map.putAll(b());

    }

    private static Map<String, String> b() {
        Map<String, String> map = new HashMap<String, String>();
        map.put("a", "a");
        a();
        return map;
    }

    public static void main(String[] args) {
        a();
    }
} 
```

它会立即产生一个 StackOverFlowError ：

```
Exception in thread "main" java.lang.StackOverflowError
    at java.util.HashMap$Entry.<init>(Unknown Source)
    at java.util.HashMap.addEntry(Unknown Source)
    at java.util.HashMap.put(Unknown Source)
    at StackOverflowExample.b(StackOverflowExample.java:14) 
```

问题不在于 HashMap，也不在于 HashMap$Entry。问题是 a() 和 b() 在没有适当停止条件的情况下递归调用对方，这意味着无限。如果您实际上在堆栈中查看下面的内容，您会立即发现该模式：

```
Exception in thread "main" java.lang.StackOverflowError
    at java.util.HashMap$Entry.<init>(Unknown Source)
    at java.util.HashMap.addEntry(Unknown Source)
    at java.util.HashMap.put(Unknown Source)
    at StackOverflowExample.b(StackOverflowExample.java:14)
    at StackOverflowExample.a(StackOverflowExample.java:8)
    at StackOverflowExample.b(StackOverflowExample.java:15)
    at StackOverflowExample.a(StackOverflowExample.java:8)
    at StackOverflowExample.b(StackOverflowExample.java:15)
    at StackOverflowExample.a(StackOverflowExample.java:8)
    at StackOverflowExample.b(StackOverflowExample.java:15)
    at StackOverflowExample.a(StackOverflowExample.java:8)
    at StackOverflowExample.b(StackOverflowExample.java:15)
    at StackOverflowExample.a(StackOverflowExample.java:8)
    at StackOverflowExample.b(StackOverflowExample.java:15)
        ... 
```

您需要找到代码中过于深入的递归。要么修复它，要么将其更改为非递归方法。

使用调试器对此有很大帮助，因为您可以单步执行每个方法调用并放置断点（在许多其他好东西中）。

# mfc - MK_CONTROL 标志在拖动复制操作期间被清除

> ID：10466674
> 
> 赞同：0
> 
> 时间：2012-05-05T23:01:38.957
> 
> 标签：mfc, drag-and-drop, ole, stingray

我在 MFC 之上使用 Stingray 目标视图作为画布编辑应用程序。我最近开始遇到一个奇怪的问题，其中控制键设置被清除以进行拖动复制操作（也就是说，如果我在画布上有一个对象并且我在移动时按住 CTRL 键应该复制而不是移动原始对象）。

奇怪的是，我发现如果我在 COleDropTarget::XDropTarget::DragOver 的开头放置一个断点，那么我可以看到始终为 dwKeyState 参数设置了 MK_CONTROL 标志，并且拖动复制工作正常。但是如果没有断点，那么通常不会设置 MK_CONTROL 标志，即使我按住 CTRL 键也是如此。

有谁知道可能导致问题的原因？

谢谢，凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T14:29:56.817

我没有使用 Stingray 软件，但是。. .

问题：它以前工作过吗？你怎么知道标志没有设置？如果设置了断点，则应该在同一内存位置设置无断点。

如果确定已清零，则必须在断点后清零。如果它之前工作并停止（假设您正在运行相同版本的代码），那么罪魁祸首很可能不是您的应用程序。

如果它在充电后停止工作，很可能是代码更改导致了这个问题；它可能是您的代码或黄貂鱼部分中的某种错误。您提到使用 COleDropTarget。如果您有黄貂鱼的来源，请查看它是否包含任何拖放自定义。

# ruby - Ruby to_ary 方法混淆

> ID：10466675
> 
> 赞同：1
> 
> 时间：2012-05-05T23:01:47.287
> 
> 标签：ruby, methods

我查找了 Array 类的 to_ary 方法。我很困惑该方法与其源文档的关系。

to_ary 方法 => 返回自身

如果我这样做：

```
1.9.3-p0 :013 > a = [1,33,42]
=> [1, 33, 42] 
1.9.3-p0 :014 > a.to_ary
=> [1, 33, 42] 
1.9.3-p0 :015 > a
=>[1, 33, 42] 
```

为什么属性静态 VALUE 是必要的？VALUE 是猎犬吗？参数之间的空格（而不是逗号）是否意味着第二个参数是接收者调用的方法？

```
static VALUE

rb_ary_to_ary_m(VALUE ary) 
{
   return ary;
} 
```

最好的，

cj3kim

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T23:08:54.967

这是 C 代码。Ruby 解释器是用 C 语言编写的。在此代码中，第一个参数用作`self`. 红宝石中的等价物是：

```
def to_ary
  return self
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-21T16:28:39.703

这里发生的事情是，它将它视为一个数组，而 IRB 正在使用 print 方法将其推送到屏幕上。Print 会将其转换`to_ary`为字符串，因此您不会看到任何差异，当您使用 puts 时会看到差异。将 uses`to_ary`置于后台，而 print 使用`to_s`.

该`to_ary`方法用于隐式转换，而`to_a`用于显式转换。一个很好的例子是方法`flatten`，它接受一个多维数组并将其展平为一个奇异维数组。除非您使用危险的方法，否则当您继续使用 flatten 方法的串联时，实际变量将保持不变。这是因为`flatten`使用`to_ary`而不是`to_a`，而`flatten!`使用`to_a`。`to_ary`将其视为该实例的数组，但不会永久更改变量。

# asp.net - ASP.NET 4.0 dropDownList 作为选择参数 - 最小化发送到数据库的查询

> ID：10466678
> 
> 赞同：1
> 
> 时间：2012-05-05T23:02:28.800
> 
> 标签：asp.net, drop-down-menu, objectdatasource

这应该是一个基本问题，我认为缺乏精确的搜索词是我找不到答案的原因。

我正在处理的数据库包含一个只有大约 6 行和 5 个字段的小表。它确实需要 CRUD 功能，因为它会偶尔更改，但几乎可以肯定永远不会扩展到超过十几行。

ASP.NET Web 应用程序具有业务逻辑和数据访问层。

我想要一个 dropDownList 作为伪“分页”控件，以选择要在 detailsView 中显示的行。

快速而讨厌的解决方案是在 ASP 中放置 2 个 objectDataSource 控件，一个带有选择参数：

```
<asp:ObjectDataSource ID="DDDataSource" runat="server" TypeName="PICUdrugs.BLL.referenceBL"
SelectMethod="getReferences"/>
<asp:DropDownList ID="RefAbrevDDL" runat="server" AutoPostBack="True" 
    DataTextField="abbrev" DataSourceID="DDDataSource" 
    DataValueField="drugReferenceID" ViewStateMode="Enabled" >
</asp:DropDownList>

<asp:ObjectDataSource ID="SelRefObjDataSrc" runat="server" SelectMethod="getReferences"
UpdateMethod="updateReference" DeleteMethod="deleteReference" TypeName="PICUdrugs.BLL.referenceBL"
OnUpdated="reference_CRUD" DataObjectTypeName="PICUdrugs.DAL.drugReference" 
ConflictDetection="CompareAllValues" OldValuesParameterFormatString="orig{0}">
    <SelectParameters>
        <asp:controlparameter name="refID" controlid="RefAbrevDDL" propertyname="SelectedValue"/>
    </SelectParameters>
</asp:ObjectDataSource>
<asp:ValidationSummary ID="ValidationSummary1" runat="server" />
<asp:DetailsView ID="DetailsView1" runat="server" AutoGenerateRows="False" DataSourceID="SelRefObjDataSrc"
    CssClass="DetailView">
    <Fields>
        <asp:DynamicField DataField="referenceDescription" HeaderText="Reference Description" />
        .....[remaining fields]..... 
```

虽然这可行，但让我感到困扰的是，我两次查询数据库以获取此类类似信息。是否有任何有效/简洁的解决方案来利用 objectDataSource（即不必为 detailsView 编写特定的事件处理程序），但在单个数据库查询上构建一个可枚举列表，并让两个控件访问同一个对象（？使用详情查看分页控件？）？后面的代码是 c#，但如果有人有任何示例/链接，vb 很好。

谢谢你的想法（即使这些想法是停止懒惰，放弃两个 objectDataSources 并手动编写 detailsview 事件处理程序） - 总是很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T20:32:35.910

想出了一个方法，但是如果觉得这有点骇人听闻，或者存在更好的解决方案，请发布一个替代方案：

在网页的代码隐藏文件中，设置一个私有变量，以便对业务层对象的引用在页面构建周期中持续存在，并设置对象创建和创建事件处理程序：

```
 private referenceBL persistentRef;
    protected void DDDataSource_ObjCreated(object sender, ObjectDataSourceEventArgs e)
    {
        persistentRef = e.ObjectInstance as referenceBL;
    }
    protected void SelRefObjDataSrc_ObjCreating(object sender, ObjectDataSourceEventArgs e)
    {
        if (persistentRef!=null)
        {
            e.ObjectInstance = persistentRef;
        }
    } 
```

在业务层，有一个私有变量指向第一个对象数据源使用的同一个可枚举列表，并按如下方式处理选择：

```
 private IEnumerable<drugReference> persistingRef;
    public IEnumerable<drugReference> getReferences()
    {
        persistingRef = DrugRefRepository.getReferences();
        return persistingRef;
    }
    public IEnumerable<drugReference> getReferences(int refID)
    {
        if (persistingRef == null)
        {
            return DAL.DrugRefRepository.getReferences(refID); //data access layer method
        }
        else
        {
            return persistingRef.Where(r => r.drugReferenceID==refID);
        }
    } 
```

当然，应该手动处理业务对象的处理，以便尽快关闭数据库连接。

我希望将相同的策略应用于 listView 中的嵌套（嵌入）objectDataSource，以便存在更新和删除功能，但最大限度地减少数据库调用的数量。

# javascript - js原型？

> ID：10466679
> 
> 赞同：-1
> 
> 时间：2012-05-05T23:02:32.517
> 
> 标签：javascript, jquery, prototype

我一直在尝试使用 JavaScript 和 html5 localStorage 创建这个简单的 ish 待办事项列表 web 应用程序来保存待办事项列表，所以我决定使用面向 obj 的编程，因为它在程序编程中变得有点混乱，但是我似乎无法让它工作，这是代码[http://jsfiddle.net/jared/sdPW2/的链接](http://jsfiddle.net/jared/sdPW2/)

另外，我正在使用 jQuery 来更轻松地创建 onClick 处理程序和动画。

那我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T23:29:00.967

让我们看看这里

首先，您永远不会在任何地方调用 createNew，那么它将如何被调用。

第二次看你的代码

```
this.createNew = createNew; 
```

和

```
Todo.prototype.createNew = function() { 
```

你是否意识到你有两件事叫同一个东西，你认为会发生什么？

# html - CSS背景图像在第一次加载时不显示？

> ID：10466680
> 
> 赞同：1
> 
> 时间：2012-05-05T23:02:37.327
> 
> 标签：html, css, background-image

此 html 脚本中的背景图像：`http://themes.googleusercontent.com/image?id=1nCEFJnjbEM1e6XClO-Dh7L-U6FJQuxivkV20FpXYmkNyRA0vQIZPfjuIp6hcROwwArvQ`不加载。但是如果这个图片首先在同一个浏览器中打开，然后将其传输到缓存中，那么背景图片就会正确显示。

HTML 如下：

```
<html>
      <head>
            <style type="text/css">
        body {
        font: normal normal 18px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
        color: #000000;
        background: #000002 url(http://themes.googleusercontent.com/image?id=1nCEFJnjbEM1e6XClO-Dh7L-U6FJQuxivkV20FpXYmkNyRA0vQIZPfjuIp6hcROwwArvQ) no-repeat fixed top center;
        }
        </style>

      </head>
      <body>
      </body>
    </html> 
```

这个问题可能看起来微不足道，但它至少在 3 个浏览器上被复制：IE、Firefox、Chrome：没有预加载图像，没有显示背景图像。如果有人能解决这个表面上非常简单的问题，那将是最有帮助的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T00:43:55.803

我认为问题在于没有内容的身体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T00:53:41.487

您的图像是 1800x1713 - 根据您的网络连接，下载可能需要一些时间。您注意到，一旦它在浏览器的缓存中，它就可以正常工作，如果它实际上是网络的话，这是有道理的。

关于图像本身，您确定您首先有权使用它吗？您将其从 Google 缓存中提取出来并且反向图像搜索出现了很多结果这一事实并不是一个好兆头。确保您没有侵犯您在网站上使用的任何图像的版权。

# prolog - YAP Prolog中的前向链接？

> ID：10466682
> 
> 赞同：4
> 
> 时间：2012-05-05T23:02:53.343
> 
> 标签：prolog

我需要在某些 Prolog 问题中使用前向链接器。我想避免使用香草元解释器从头开始实现它（但如果没有其他选项可用，我将不得不这样做），因为使用元解释器这样做会很慢，而且我我确信应该有一些好的实现。有人知道 YAP 或 SWI Prolog 是否包含原生且高效的前向链接器？如果是这种情况，将不胜感激如何安装/使用它的指针。

如果这两个 Prolog 引擎上没有本地正向链接器可用，有人可以推荐我一个基于 vanilla 元解释器的好的开源实现，我可以将其用作外部 Prolog 库吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T00:07:53.297

让我们根据最小逻辑而不是根据解析定理证明来解释后向链接和前向链接。正常的后向链接Prolog规则可以看作是最小逻辑左蕴涵引入规则的应用。所以基本上当我们有一个目标 P 和一个规则 A->P 时，组合推理规则说我们可以用目标 A 替换目标 P：

```
-------- (Id)
P |- P            G, A -> P |- A
--------------------------------- (Left ->)
        G, A -> P |- P 
```

现在可以使用相同的规则对正向链接应用程序进行建模。这次我们没有目标 P，而是在前提中实现了条件 A。当存在规则 A -> P 时，该规则也允许我们实现头部 P。组合推理规则如下：

```
------- (Id)
A |- A            G, A, A -> P, P |- B
--------------------------------------- (Left ->)
         G, A, A -> P |- B 
```

我们这个小程序的想法是完全计算正向链接过程的固定点 F(M) = M。我们所做的是计算迭代 M0、M1、M2 等。仅当过程以有限结果终止时才有效。从演绎数据库中，我们采用了仅计算 Mn+1 和 Mn 之间的增量的想法。可以找到一个 G，使得 F(Mn)\Mn = G(Mn\Mn-1,Mn-1) 相对较少的努力。

G 的当前实现可能会偶然发现循环数据，因为目前还没有消除重复。在还允许删除事实的前向链接器中，可以使用特殊的前向规则来消除重复项。成熟的前向链接系统无论如何都应该允许删除事实，然后它们甚至可以用于实现约束求解系统。

但是，让我们暂时保留简单的想法和相应的简单代码。

F函数中的G函数（delta/2）（原始规则）
[http://www.xlog.ch/jekejeke/forward/delta.p](http://www.xlog.ch/jekejeke/forward/delta.p)

具有前向链接的玩具专家系统
[http://www.xlog.ch/jekejeke/forward/expert.p](http://www.xlog.ch/jekejeke/forward/expert.p)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-06T01:07:28.877

YAP 和 SWI 都包含约束处理规则的实现 - [http://dtai.cs.kuleuven.be/projects/CHR/](http://dtai.cs.kuleuven.be/projects/CHR/) - 这是一个前向链接规则系统。

对于您的特定问题，我无法谈论它的性能，但众所周知 CHR 是有效的（请参阅从 CHR 网站链接的论文）。

CHR 还具有 Java、Haskell 和 C 实现，因此如果您以后需要更好的性能，您可以轻松地将规则移植到其中一种语言。

# macos - 如何在 mac os x 上设置 postgres 管理员用户？

> ID：10466684
> 
> 赞同：0
> 
> 时间：2012-05-05T23:03:02.037
> 
> 标签：macos, postgresql

我刚刚使用自制软件在我的 mac（lion）上安装了 postgresql，当我使用`psql postgres`（或任何其他数据库）时，它会自动让我登录。

有趣的是，即使使用`\password`命令在 psql 中更改一次密码，它仍然只是让我进入而不会提示我输入密码。

它还将我的用户名（与我的 mac os 登录名相同的用户名）显示为所有者。

有没有办法让事情更加安全？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T06:19:14.983

Postgresql 很可能被配置为信任任何人。这是在文件 pg_hba.conf 中配置的，该文件位于 postgresql 的数据目录中。我不知道自制软件将数据目录放在哪里。但是，如果您在终端中发出以下命令：

```
ps aux | grep postmaster 
```

你会得到如下响应：

```
postgres          63   0,0  0,1  2472288   4888   ??  Ss   12:19pm   0:00.85 /Library/PostgreSQL/9.0/bin/postmaster -D/Library/PostgreSQL/9.0/data 
```

-D 之后的部分是数据目录的位置。您可能需要调整终端的大小以使其适合。

使用您喜欢的编辑器打开 pg_hba.conf，例如：

```
sudo vi <datadir>/pg_hba.conf 
```

该文件包含（在我见过的所有安装中）相当多的描述设置的注释。实际设置是文件的底部。我怀疑其中一条或多条以信任结尾。将这些更改为 md5 以获取密码验证。

# c# - 如何将附加行为添加到 CollectionViewSource？

> ID：10466691
> 
> 赞同：2
> 
> 时间：2012-05-05T23:04:27.460
> 
> 标签：c#, wpf, xaml, attached-properties

我正在尝试将附加行为添加到 CollectionViewSource，以便我可以在 XAML 中的视图模型上提供过滤谓词属性。

XAML 如下所示：

```
<DataGrid ItemsSource="{Binding}">
    <DataGrid.DataContext>
        <CollectionViewSource Source="{Binding Path=Items}"
                 acb:CollectionViewSourceItemFilter.ItemFilter="{Binding Path=ItemFilter}" />
    </DataGrid.DataContext>
</DataGrid> 
```

但是，我收到一个错误：

```
A 'Binding' cannot be set on the 'SetItemFilter' property of type   
'CollectionViewSource'. A 'Binding' can only be set on a DependencyProperty of a 
DependencyObject. 
```

CollectionViewSource 似乎是一个 DependencyObject。我不确定我做错了什么。

以下是行为代码：

```
public static class CollectionViewSourceItemFilter
{
    /// <summary>
    /// Gets the property value.
    /// </summary>
    public static Predicate<object> GetItemFilter(CollectionViewSource collectionViewSource)
    {
        return (Predicate<object>)collectionViewSource.GetValue(ItemFilter);
    }

    /// <summary>
    /// Sets the property value.
    /// </summary>
    public static void SetItemFilter(CollectionViewSource collectionViewSource, Predicate<object> value)
    {
        collectionViewSource.SetValue(ItemFilter, value);
    }

    /// <summary>
    /// The ItemFilter dependency property.
    /// </summary>
    public static readonly DependencyProperty ItemFilter =
        DependencyProperty.RegisterAttached(
        "ItemFilter",
        typeof(Predicate<object>),
        typeof(ItemFilterBehavior),
        new UIPropertyMetadata(null, OnItemFilterChanged));

    private static void OnItemFilterChanged(DependencyObject depObj, DependencyPropertyChangedEventArgs e)
    {
        CollectionViewSource collectionViewSource = depObj as CollectionViewSource;
        if (collectionViewSource == null)
            return;

        if (!Equals(e.NewValue, e.OldValue))
        {
            var newFilter = (Predicate<object>)e.NewValue;

            // Remove any previous filter.
            ItemFilterBehavior oldBehavior;
            if (behaviors.TryGetValue(collectionViewSource, out oldBehavior))
            {
                oldBehavior.Unregister();
                behaviors.Remove(collectionViewSource);
            }

            if (newFilter != null)
                behaviors.Add(collectionViewSource, new ItemFilterBehavior(collectionViewSource, newFilter));
        }
    }

    private class ItemFilterBehavior
    {
        public ItemFilterBehavior(CollectionViewSource collectionViewSource, Predicate<object> filter)
        {
            _collectionViewSource = collectionViewSource;
            _filter = filter;
            _collectionViewSource.Filter += collectionViewSource_Filter;
        }

        void collectionViewSource_Filter(object sender, FilterEventArgs e)
        {
            e.Accepted = _filter(e.Item);
        }

        public void Unregister()
        {
            _collectionViewSource.Filter -= collectionViewSource_Filter;
        }

        private readonly CollectionViewSource _collectionViewSource;
        private readonly Predicate<object> _filter;
    }

    private static readonly IDictionary<CollectionViewSource, ItemFilterBehavior> behaviors = new ConcurrentDictionary<CollectionViewSource, ItemFilterBehavior>();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T04:48:06.907

在问题中发布行为代码使我弄清楚了。我的 DependencyProperty 使用 ItemFilterBehavior 而不是 CollectionViewSourceItemFilter 作为所有者类型。

# c# - 如何在段落中创建链接以中断

> ID：10466692
> 
> 赞同：0
> 
> 时间：2012-05-05T23:04:41.117
> 
> 标签：c#, asp.net

我在 asp 中有这段代码，其中有一个段落和一个链接。问题是它获得的链接超长，所以它破坏了页面的设计，无论如何让它看起来像一个盒子（就像它有一个换行符一样）。更具体地说，我有一个看起来像这样的链接

```
http://www.google.com/cewcexxwrfrgregrfref/rferfrefrferfrefrf_jerfreferfrefrefrefrefrefer_freferfwrfwefewfewfwefewfwefefwefewfwefewf909ew0fwefwefwefwefwefwefwefwefewfwefewffwefwefwefwef99we0fwef__________________fwefwefewfewfw45453rwefwef 
```

我希望它看起来与此类似，这样它就不会破坏我的页面。

```
 http://www.google.com/cewcexxwrfrgregrfref/
            rferfrefrferfrefrf_jerfreferfrefrefrefrefrefer_
            freferfwrfwefewfewfwefewfwefefwefewfwefewf909e
            w0fwefwefwefwefwefwefwefwefewfwefewffwefwefwefwef99we0f
            wef__________________fwefwefewfewfw45453rwefwef 
```

这是代码

```
 <h4 class="SubTitle">
 Follow our Instructions</h4>
 <p>
   The instructions can be found in several places but we recommend:
     <br />
       <asp:LinkButton ID="lnkUrl" runat="server" Width="100px"></asp:LinkButton>
 </p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T23:30:15.460

使用 CSS`word-wrap`属性，这样：

```
a { display: block; word-wrap: break-word; }​ 
```

你可以看到它在[这里](http://jsfiddle.net/86FEV/)工作。因此，在您的代码中可能是：

```
<h4 class="SubTitle">Follow our Instructions</h4>
<p>
    The instructions can be found in several places but we recommend:
    <br />
    <asp:LinkButton ID="lnkUrl" runat="server" Style="display: block; word-wrap: break-word; width: 100px;"></asp:LinkButton>
 </p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T23:08:38.987

你应该把它放在一个有宽度的 div 中。浏览器会自动为您包装它。

```
<p>
   The instructions can be found in several places but we recommend:
</p>
<div style="width: 100px;">
<asp:LinkButton ID="lnkUrl" runat="server" Width="100px"></asp:LinkButton>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T23:18:26.127

```
 I think this might work, apply this css class to your link
 <head>
 <style type="text/css">
 .nobreak{display:inline;}
 </style>
 </head>

 <h4 class="SubTitle">
  Follow our Instructions</h4>
  <p>
   The instructions can be found in several places but we recommend:
   <br />
  <asp:LinkButton cssClass="nobreak" ID="lnkUrl" runat="server" Width="100px">    </asp:LinkButton>
</p> 
```

# javascript - 在 javascript 中检测 [object Window] 的“Window”部分

> ID：10466696
> 
> 赞同：2
> 
> 时间：2012-05-05T23:05:23.753
> 
> 标签：javascript, node.js

在 javascript 中检测 [object Window] 的“Window”部分和/或判断代码是否在节点服务器或浏览器上运行

更多的上下文。我正在为应该在客户端和服务器上运行的 nodejs 编写一个模块。我需要在几个地方有所不同，所以我需要检测它在哪里运行。现在我将“this”传递给 init 函数，该函数在服务器上给我 [object Object]，在浏览器中给我 [object Window]。...但我不知道如何检查 Window / Object 部分。typeof 似乎只是检查领先的“对象”部分。想法？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T23:08:15.140

如果您确定会`[object Object]`在 node.js 和`[object Window]`浏览器中收到，那么只需检查

```
var isBrowser = (this.toString().indexOf('Window') != -1);
var isServer = !isBrowser; 
```

字符串的`indexOf`方法检查其参数在该字符串中的位置。返回值`-1`表示参数不作为子字符串存在。

**更新**

正如其他人建议只检查`window`对象的存在一样，您可以等效地检查您希望在浏览器中出现的其他对象，例如`navigator`或`location`。但是，上面建议的这种检查：

```
var isBrowser = (this.window == this); 
```

最终会在 node.js 中出现引用错误。正确的方法是

```
var isBrowser = ('window' in this); 
```

或者，正如我所指出的

```
var isBrowser = ('navigator' in this);
var isBrowser = ('location' in this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T23:12:18.697

`[object Window]`不可靠。一些较旧的浏览器只是说`[object]`或`[object Object]`不管对象的类型。

试试这个：

```
var isBrowser = this instanceof Window; 
```

或者，因为我从来没有使用过 Node.js，这个怎么样？

```
var isBrowser = typeof Window != "undefined"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T23:25:07.723

为简单起见，我认为您无法击败：

```
if('window' in this) {
    // It's a browser
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T02:10:01.747

基本上，您是在问如何在脚本中检测 Node.js =x

以下是从 Underscore.js 修改和扩展的，我也为我的一些客户端/服务器模块代码使用了一个变体。它基本上会扫描 node.js 独有的全局变量（除非您在客户端 =x 中创建它们）

这是为了提供一个替代答案，以防万一。

```
(function() {
    //this is runned globally at the top somewhere
    //Scans the global variable space for variables unique to node.js
    if(typeof module !== 'undefined' && module.exports && typeof require !== 'undefined' && require.resolve ) {
        this.isNodeJs = true;
    } else {
        this.isNodeJs = false;
    }
})(); 
```

或者，如果您只想在需要时调用它

```
function isNodeJs() {
    //this is placed globally at the top somewhere
    //Scans the global variable space for variables unique to node.js
    if(typeof module !== 'undefined' && module.exports && typeof require !== 'undefined' && require.resolve ) {
        return true;
    } else {
        return false;
    }
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T23:13:23.343

如果您只想知道您是否在 Node 上运行，只需查看`this === this.window`.

```
if (this === this.window) {
    // Browser
} else {
    // Node
} 
```

这比希望`toString`' 的实现是一致的更可靠，但事实并非如此。

# asp.net - 如果从 LAN/Internet 断开连接，本地 sqlserver（带别名）不响应

> ID：10466700
> 
> 赞同：-1
> 
> 时间：2012-05-05T23:06:10.360
> 
> 标签：asp.net, sql-server-2008, configuration, database-connection, alias

真的很奇怪，我配置了一个 sql server 别名（使用 2008），因为我的实例名称与同事不同，一切正常，直到我断开与 LAN/Internet 的连接

在 SQL Server 配置管理器中启用了命名管道和 TCP/IP，我也禁用了防火墙，但仍然无法正常工作。

这是我的 32 位和 64 位别名配置。

```
Alias Name: .\Dev
Protocol: Named Pipes.
PipeName: \\localhost\pipe\sql\query
server: localhost 
```

这是我在 asp.net 中收到的错误

建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

更新。

我的意图不是更改我的连接字符串以避免在 web.config 中不断合并

这是我的连接字符串

```
Data Source=.\Dev;Initial Catalog=MyDatabase;Persist Security Info=True;User ID=x;Password=x.;Pooling=False;"
         providerName="System.Data.SqlClient 
```

更新

我发现重新启动系统后一切正常，我连接到 WLAN，然后再次出现断开连接问题，似乎从 WLAN 断开连接后出现问题，别名停止工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T00:59:56.400

尝试：

```
string connectionString = "server=tcp:127.0.0.1\Dev;...other params..."; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-22T19:23:09.767

我遇到过同样的问题。将别名切换为使用协议 TCP/IP，然后指定服务器\实例解决了问题。

换句话说，将您的别名更改为以下内容：

别名：.\Dev 协议：TCP/IP 服务器：localhost

# c - 我如何在 devkitPro 上播放音频？

> ID：10466703
> 
> 赞同：2
> 
> 时间：2012-05-05T23:06:37.310
> 
> 标签：c, wii, devkitpro

我正在尝试开发一个将使用 devkitPro 工具包的应用程序。如何在 Wii 上播放音频文件？我似乎无法让他们玩。我一遍又一遍地尝试过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:25:23.570

看起来这个问题还没有回答。

devKitPro 是一个文档精美的平台，因此希望您会发现这些示例很有用。

查看：http: [//sourceforge.net/projects/devkitpro/files/examples/wii/](http://sourceforge.net/projects/devkitpro/files/examples/wii/)

在该 tarball 中，您会找到播放 .mod、.ogg 和 .mp3 文件的示例。您最好先使用 MODPlayer 测试您的控制台，以确保它不是用户端问题（安装不良的依赖项），因为其他文件格式要复杂得多[不能比四个通道简单得多]。

# mysql - 创建 mysql 转储文件，如何编辑 WordPress 站点迁移

> ID：10466704
> 
> 赞同：0
> 
> 时间：2012-05-05T23:06:53.157
> 
> 标签：mysql, database, wordpress

我在这上面花了一天多的时间。我有点卡住了！

我想我了解如何使用 PHPMYADMIN 创建转储文件。然后，我需要对其进行编辑以将 URL 更改为新站点，在这种情况下，是我计算机上的本地路径。然后我将编辑后的文件导入到新位置的数据库中。

我正在获取有关新站点位置的一些数据；一些链接，一些文字，但是没有图像。但是新站点位置已损坏：出现 php 标头错误，因此无法正常工作。然后我在新位置恢复数据库，所以这证明我可以导入数据库，所以我想我不清楚编辑数据库转储文件。

我不清楚如何编辑转储文件。我已经全局更改了 URL。但我不知道是否需要更改“家”路径或“绝对”路径。我在网上阅读了大量信息，也观看了一些视频。

顺便说一句：我在我的本地机器上运行 XAMPPLITE，在“桌面”服务器软件包下 - 因此在本地机器上运行 Apache 和 MySQL。

正如我所说，我在网上阅读了很多关于 WordPress 迁移的内容。我知道有一些插件，但如果可能的话，我宁愿手动执行此操作。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T23:21:56.420

事实证明这并不难。我能够用一条小的 SQL 语句成功地将一个实时站点克隆到我的开发系统上。 [请参阅此 WordPress 文档。](http://codex.wordpress.org/Running_a_Development_Copy_of_WordPress)

希望这可以帮助。

# java - 敌人阵列，2D Java 游戏

> ID：10466706
> 
> 赞同：0
> 
> 时间：2012-05-05T23:07:56.670
> 
> 标签：java

基本上，我正在制作一个简单的 asteroids-y 风格的横向卷轴，我有一点 Java 经验，但在某些实现方面并不出色。所以，我想创建一堆在随机时间和随机 y 位置产生的小行星。我认为最好的方法是做某种数组，但我不知道如何真正实现它，并对整个数组进行碰撞检查。这是我的敌人和运动场课程的相关部分。

任何可以帮助我让我的主题音乐正常工作的人都可以获得奖励积分！

```
import java.awt.*;
import javax.swing.ImageIcon;

public class Enemy 
{
    int x, y;
    Image img;
    boolean isAlive = true;

    public Enemy(int startX, int startY, String location)
    {
        x = startX;
        y = startY;
        ImageIcon l = new ImageIcon(location);
        img = l.getImage();
    }

    public Rectangle getBounds()
    {
        return new Rectangle(x, y, 60, 60);
    } 
```

和

```
public class Board extends JPanel implements ActionListener
{
    Player p;
    Image img;
    Timer time;
    Thread animator;
    Enemy en1, en2;
    boolean lost = false;
    static Font font = new Font("SanSerif", Font.BOLD, 24);
    public AudioClip theme;

    public static int score = 0;
    public static int lives = 3;

    public Board() 
    {
        //theme = Applet.newAudioClip(getClass().getResource("images/theme.mid"));
        //theme.play();
        p = new Player();       
        addKeyListener(new ActionListener());
        setFocusable(true);
        ImageIcon i = new ImageIcon("images/background.png");
        img = i.getImage();
        time = new Timer(5, this);
        time.start();
        int v =  172;
        en1 = new Enemy(p.x + 600, 260, "images/enemy1.png");
        en2 = new Enemy(p.x + 600, 200, "images/asteroid.gif");
    }

    public void actionPerformed(ActionEvent e)
    {
        checkCollisions();
        ArrayList bullets = Player.getBullets();

        for(int i = 0; i < bullets.size(); i++)
        {
            Bullet b = (Bullet)bullets.get(i);

            if(b.isVisible() == true)
            {
                b.move();
            }
            else
            {
                bullets.remove(i);
            }
        }

        p.move();

        if(p.x > 400)
        {
            en1.move(p.getdx());
        }
        if(p.x > 500)
        {
            en2.move(p.getdx());
        }
        repaint();
    }

    public void paint(Graphics g)
    {
        if(lost)
        {
            System.out.println("You Lose");
        }
        super.paint(g);
        Graphics2D g2d = (Graphics2D) g;
        if((p.getX() - 590) % 2400 == 0 || (p.getX() - 590) % 2400 == 1)
        {
            p.nx = 0;
        }
        if((p.getX() - 1790) % 2400 == 0 ||(p.getX() - 1790) % 2400 == 1)
        {
            p.nx2 = 0;
        }

        g2d.drawImage(img, 685-p.nx2, 0, null);

        if(p.getX() >= 590)
        {
            g2d.drawImage(img, 685-p.nx, 0, null);
        }

        g2d.drawImage(p.getImage(), p.edge, p.getY(), null);

        ArrayList bullets = Player.getBullets();
        for(int i = 0; i < bullets.size(); i++)
        {
            Bullet b = (Bullet)bullets.get(i);
            g2d.drawImage(b.getImg(), b.getX(), b.getY(), null);
        }
        if(p.x > 400)
        {
            if(en1.isAlive == true)
            {
                g2d.drawImage(en1.getImg(), en1.getX(), en1.getY(), null);
            }
        }
        if(p.x > 500)
        {
            if(en2.isAlive == true)
            {
                g2d.drawImage(en2.getImg(), en2.getX(), en2.getY(), null);
            }           
        }
    }
    public void checkCollisions()
    {
            Rectangle r1 = en1.getBounds();
            Rectangle r2 = en2.getBounds();
            ArrayList bullets = Player.getBullets();

            for (int i = 0; i < bullets.size(); i++)
            {
                Bullet m = (Bullet) bullets.get(i);
                Rectangle m1 = m.getBounds();

                if (r1.intersects(m1) && en1.isAlive())
                {
                    score++;
                    en1.isAlive = false;
                    m.visible = false;
                 }
                 else if (r2.intersects(m1)&& en2.isAlive())
                 {
                     en2.isAlive = false;
                     m.visible = false;
                 }
            }

            Rectangle d = p.getBounds();
            if (d.intersects(r1) || d.intersects(r2))
            {
            lives--;
                    if(lives < 0)
                    {
                        lost = true;
                    }
            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T00:15:18.870

A while ago, I made a little Asteroids game. There I used a Vector as a collection of Asteriord objects. Then in the LaserBeam class (the starship has an laser gun!), I have something like this:

```
// collision with an asteroid?
for (Asteroid a : getAsteroids())
    if (a.getCp().getBounds2D().intersects(xPos, yPos, width, height))  
    {
        a.newHit();
        break;
    } 
```

So the beam iterates through the asteroids and check if some one collides with the beam. In that case, the life of the beam and the asteroid ends.

If you are interested, you can find the complete source code [here](http://federicocristina.com.ar/dev/asteroids/asteroids.zip), and [here](http://federicocristina.com.ar/dev/asteroids/index.html) is the applet game.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T23:13:36.710

您可能想查看有关数组的本教程：http: [//docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)

您可能还想考虑一个 ArrayList，但由于您对数组有困难，我会先坚持基础知识。

# jquery - 自定义删除 ui-icon 在某些浏览器上投射阴影或边距

> ID：10466718
> 
> 赞同：0
> 
> 时间：2012-05-05T23:10:23.057
> 
> 标签：jquery, jquery-mobile

我正在使用自定义图标来关闭对话框。我已经删除了按钮周围的边距和阴影。但是，它仍然出现在我的 Android 2.3 设备上。它在我的 Android 4.0 和 iOS 设备上显示正确（没有阴影）。

我曾尝试使用具有透明背景的 png 以及具有白色背景的 png 来匹配对话框的背景，但它们都给了我阴影。

html:

```
<div class="custom_close_button">
    <a href="#"  data-role="button" data-rel="back" data-inline="true" >
        <img src="img/close_button.png"></img>
    </a>
</div> 
```

CSS：

```
.ui-shadow
{
    box-shadow:  0px 0px 0px 0px #FFFFFF;
    shadow: none;
    border: none;
}
.custom_close_button
{
    float: right;
    width: 50px;
        padding-right: 20px;
}
.custom_close_button .ui-btn-corner-all
{
    padding: 0px;
    margin: -1px 0 0 0;
}
.ui-corner-all {
    -moz-border-radius:    0    /*{global-radii-blocks}*/;
    -webkit-border-radius:    0    /*{global-radii-blocks}*/;
    border-radius:    0    /*{global-radii-blocks}*/;
}

.ui-btn-corner-all {
    -moz-border-radius:    0    /*{global-radii-buttons}*/;
    -webkit-border-radius:    0    /*{global-radii-buttons}*/;
    border-radius:    0    /*{global-radii-buttons}*/;
} 
```

是否有导致此问题的 Android 2.3 单独设置？下面是按钮在 Android 2.3 设备上错误显示的屏幕截图。

谢谢。

![自定义删除按钮，周围有一些阴影](../Images/6572a4c5c77c1dbb008f2ef892323779.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:53:02.590

我唯一能建议的是使用 firebug 或其他开发人员控制台，看看锚或周围元素是否应用了 .ui-icon-shadow 类。

我知道删除自动生成的类的唯一方法是通过 JS/jQuery：

```
 $(".ui-icon-shadow").removeClass('ui-icon-shadow'); 
```

或通过 CSS：

```
a.ui-shadow {
    -moz-box-shadow: none;
    -webkit-box-shadow: none;
    box-shadow: none;
} 
```

也许通过API还有其他方法......

# vb.net - 为什么 VB.net 4.0 框架应用程序（标准 EXE）会尝试写入 HKLM 中的 ASP.net 注册表项？

> ID：10466720
> 
> 赞同：4
> 
> 时间：2012-05-05T23:11:14.530
> 
> 标签：vb.net, .net-4.0

我编写了一个 .net 4.0 框架应用程序（在 VB.net 中）。这真的是一件简单的事情，基本上只是一个带有一些花里胡哨的屏幕保护程序。

但是，它确实使用 .net 的 webclient 功能来查询 Internet 上的各个站点。

但它不是一个网络应用程序。它不在 ASP 下运行，或者，据我所知，它与 ASP.net 有任何关系。

但是，当我在安装了 Comodo 防火墙的机器上运行它时，我会收到来自 Comodo 的警告弹出窗口，表明

1）程序正在尝试访问互联网（这是一件好事，这里没问题）。

但

2）该程序正在尝试创建注册表项，例如：hklm\system\controlset001\services\asp.net_4.0.30319\names{somelonghexvalue}

现在，我一直遵循这样的规则，即在 HKLM 中基本上只有安装程序才能解决问题，但这个应用程序正在尝试在那里做一些事情。它来自 .net 框架，我的应用程序根本不向注册表请求任何密钥。

我猜这是框架已被允许执行的操作，即使当前用户无权在 HKLM 中创建密钥（因为我没有收到错误，即使应用程序在权限很少的凭据下运行） .

所以，我的问题是，任何人之前都遇到过这个问题，或者知道为什么框架会在运行与 ASP.net 没有任何关系的标准 EXE 时创建 ASP.Net reg 密钥？

我确实提出了这个问题， [ASP.NET 4 注册表更改](https://stackoverflow.com/questions/4745304/asp-net-4-registry-changes) ，但在这种情况下，提问者实际上是在处理 ASP.net 应用程序。在这种情况下，我不是。

--EDIT-- 为 Clara 添加了用于执行 HTTP Get 的代码

```
Dim request As HttpWebRequest = DirectCast(WebRequest.Create(requestUri), HttpWebRequest)
Dim resultPage As String = String.Empty
Using httpWebResponse As HttpWebResponse = DirectCast(request.GetResponse(), HttpWebResponse)
    Using responseStream As Stream = httpWebResponse.GetResponseStream()
        Using reader As New StreamReader(responseStream)
            resultPage = reader.ReadToEnd()
        End Using
    End Using
End Using 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T23:28:06.753

出于某种原因，它正在更新 ASP.NET 性能计数器，尽管我不确定为什么。

该注册表项存储 ASP.NET 的命名管道名称：

> 管道名称。每个正在运行的工作进程一个。请参阅“运行时会发生什么？”。此子密钥仅出现在 32 位版本密钥上。
> 
> ...
> 
> 在运行时，每当运行 Web 应用程序并启动工作进程时，它都会加载 webengine.dll（或 .Net 4.0 中的 webengine4.dll）。除其他外，该库将在此过程中初始化性能计数器本地存储。它还将创建一个命名管道，客户端将能够连接到该管道并从中读取计数器数据。管道的名称存储在 HKLM\SYSTEM\CurrentControlSet\services\ASP.NET_x.x.xxxxx\Names 注册表项中，因此客户端可以找到它。
> 
> 命名管道的处理是异步的。该库使用来自 CLR 的 IO 完成线程，每次都会唤醒

参考：

[ASP.NET Internals - 性能计数器实现细节](http://blogs.msdn.com/b/josere/archive/2010/06/18/asp-net-internals-performance-counters-implementation-details.aspx)

# jquery - 如何拦截jQuery Dialog ESC键事件？

> ID：10466726
> 
> 赞同：15
> 
> 时间：2012-05-05T23:12:06.653
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我有一个模态 jQuery 对话框和另一个在对话框后面接受 ESC 键事件的元素。当 jQuery 对话框启动时，我不希望这个 ESC 键事件传播。现在发生的是，当我单击 ESC 时，它将关闭对话框并触发背景元素上的 ESC 事件处理程序。

当 jQuery 对话框被解除时，我如何吃掉 ESC 键事件？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-06T12:38:06.697

在内部，jQuery UI 的对话框`closeOnEscape`选项是通过将 keydown 侦听器附加到文档本身来实现的。因此，一旦 keydown 事件一直冒泡到顶层，对话框就会关闭。

因此，如果您想继续使用转义键关闭对话框，并且希望阻止转义键传播到父节点，则需要自己实现该`closeOnEscape`功能以及使用`stopPropagation`事件对象上的方法（请参阅[有关 event.stopPropagation 的 MDN 文章](https://developer.mozilla.org/en/DOM/event.stopPropagation)）。

```
(function() {
  var dialog = $('whatever-selector-you-need')
    .dialog()
    .on('keydown', function(evt) {
        if (evt.keyCode === $.ui.keyCode.ESCAPE) {
            dialog.dialog('close');
        }                
        evt.stopPropagation();
    });
}()); 
```

这样做是侦听对话框中发生的所有 keydown 事件。如果按下的键是转义键，您将正常关闭对话框，并且无论`evt.stopPropagation`调用什么，都会使 keydown 不会冒泡到父节点。

我有一个活生生的例子在这里展示 - [http://jsfiddle.net/ud9KL/2/](http://jsfiddle.net/ud9KL/2/)。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-05T23:27:16.953

你需要closeOnEscape ...

示例代码：

```
$(function() {
$("#popup").dialog({
height: 200,
width: 400,
resizable: false,
autoOpen: true,
modal: true,
closeOnEscape: false
});
}); 
```

现场观看：http: [//jsfiddle.net/vutdV/](http://jsfiddle.net/vutdV/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-18T11:30:16.637

您可以使用以下

```
 $(document).keyup(function (e) {
        if (e.keyCode == 27) {

            $('#YourDialogID').dialog('close')  
        }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T23:14:50.603

您需要修改对话框后面的元素的代码，以查看对话框是否打开并且按下了转义键并忽略这种情况。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-12T13:28:48.690

我想做一个类似但相反的事情 - 如果我们在对话框仍然打开的情况下在从对话框内部打开的模式窗口中按 ESC 键，防止 ui 对话框关闭。

因此，如果模态窗口在 ui 对话框顶部打开，则 ESC 必须只关闭模态窗口并使 ui 对话框保持打开状态。我不想为对话框禁用 closeOnEscape，如果另一个模态在它上面打开，只需抑制它。

我对 jquery-ui-1.12.1 中的 $(document).on("keydown", ...) 或 $dialog.on("keydown", ...) 不满意。我调用小部件方法 _off 和 _on 来删除原始 keydown 事件并将其替换为我自己的拦截事件，在该事件中我可以什么都不做或运行原始处理程序代码。

可能有一种更优雅的方式来调用原始 keydown 事件而不复制代码，但我还没有弄清楚。

在使用 $dialog.dialog(...) 创建它之后，我调用了 PatchCloseOnEscape($dialog)。

```
/**
 * Tedium required to prevent the jQuery-UI dialog closing when we hit the ESC key to close
 * a modal window opened from the dialog while the dialog is still open.
 */
private static PatchCloseOnEscape($dialog: JQuery): void
{
    // Get dialog widget
    let dialog = $dialog.data("ui-dialog");

    // Remove original keydown event
    dialog._off(dialog.uiDialog, "keydown");

    // Add our new keydown event
    dialog._on(dialog.uiDialog, {
        keydown: function (event)
        {
            // Only close on escape if a modal window is not showing.
            if (<check if modal window is open> == true)
            {
                return;
            }

            ////////////////////////////////////////////////////////////////////////////////
            // Copied from original keydown event in jquery-ui-1.12.1.js line 12278 - 12305

            if (this.options.closeOnEscape && !event.isDefaultPrevented() && event.keyCode &&
                event.keyCode === (<any>$).ui.keyCode.ESCAPE)
            {
                event.preventDefault();

                this.close(event);

                return;
            }

            // Prevent tabbing out of dialogs
            if (event.keyCode !== (<any>$).ui.keyCode.TAB || event.isDefaultPrevented())
            {
                return;
            }
            var tabbables = this.uiDialog.find(":tabbable"),
                first = tabbables.filter(":first"),
                last = tabbables.filter(":last");

            if ((event.target === last[0] || event.target === this.uiDialog[0]) &&
                !event.shiftKey)
            {
                this._delay(function ()
                {
                    first.trigger("focus");
                });
                event.preventDefault();
            } else if ((event.target === first[0] ||
                event.target === this.uiDialog[0]) && event.shiftKey)
            {
                this._delay(function ()
                {
                    last.trigger("focus");
                });
                event.preventDefault();
            }

            ////////////////////////////////////////////////////////////////////////////////
        }
    });
} 
```

# c# - 在 asp.net mvc 的部分视图中，foreach 中的模型为空

> ID：10466728
> 
> 赞同：0
> 
> 时间：2012-05-05T23:12:36.497
> 
> 标签：c#, ajax, asp.net-mvc, razor

此删除部分视图显示在 jquery 对话框中：

在调试模式下加载删除视图时，我看到模型的计数为 3，但是当我按下删除按钮时，我得到一个 NullReferenceException，该模型为 Null。

这个怎么可能？

```
@using (@Html.BeginForm("Delete","Template",FormMethod.Post))
{  
    <table>
    @foreach (var item in Model) {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Id)
            </td>  
            <td>
                @Html.DisplayFor(modelItem => item.Name)
            </td>      
            <td>           
                @Html.ActionLink("Delete", "Delete", new { id = item.Id, returnUrl = Request.Url.PathAndQuery })
            </td>
        </tr>
    }
    </table>
} 
```

控制器：

```
 [HttpGet]
        public ActionResult Delete()
        {
            string actionName = ControllerContext.RouteData.GetRequiredString("action");
            if (Request.QueryString["content"] != null)
            {
                ViewBag.FormAction = "Json" + actionName;

                var list = new List<Template> {
                    new Template{ Id = 1, Name = "WorkbookTest"},
                    new Template{ Id = 2, Name = "ClientNavigation"},
                    new Template{ Id = 3, Name = "Abc Rolap"},
                    };

                return PartialView(list);
            }
            else
            {
                ViewBag.FormAction = actionName;
                return View();
            }
        }

 [HttpPost]
        public JsonResult JsonDelete(int templateId, string returnUrl)
        {
            // do I get here no !
            if (ModelState.IsValid)
            {
                return Json(new { success = true, redirect = returnUrl });
            }

            // If we got this far, something failed
            return Json(new { errors = GetErrorsFromModelState() });
        } 
```

更新：

该代码有效并且正在向控制器提供正确的 templateId：

```
<table>
@foreach (var item in Model)
{
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Id)
        </td>  
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>      
        <td> 
            @using (@Html.BeginForm((string)ViewBag.FormAction, "Template"))
            {
                @Html.Hidden("returnUrl", Request.Url.PathAndQuery);
                @Html.Hidden("templateId", item.Id)               
                <input type='submit' value='Delete' />
            }
        </td>
    </tr>
}
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T02:23:22.980

~~从您的*ActionLink*的编写方式来看，控制器的*else*部分将在您单击删除后执行（因为*内容*不会在查询字符串中）。该代码返回没有模型的 View()，因此“模型为空”异常。~~

**编辑**

我可以看到两个问题：

1.  您所针对的操作需要**POST**，因此您需要使用表单回发而不是 ActionLink（使用 GET）。
2.  该操作需要**templateId**，因此路由属性必须是那个。

所以我认为这应该有效：

```
@{ using (Html.BeginForm()) {
    <input type='hidden' name='templateId' value='@item.Id' />
    <input type='submit' value='Delete' />
}} 
```

# python - 在颜色图和颜色栏中为两个（或更多）特定值添加单独的颜色

> ID：10466730
> 
> 赞同：4
> 
> 时间：2012-05-05T23:12:54.500
> 
> 标签：python, numpy, matplotlib

我想在彩色图中显示一个矩阵，并为两个或多个特殊值赋予特定的颜色。

```
import numpy as np
from pylab import *

np.random.seed(10)    
a=np.random.randint(-1,10, size=(5, 5))
print a

fig, ax = plt.subplots()
mat=ax.matshow(a, cmap=cm.jet, vmin=1, vmax=10)
colorbar(mat)
show() 
```

以下是`a`矩阵的值：

```
[[ 8  3 -1  0  8]
 [-1  0  9  7  8]
 [-1  9  7  5  3]
 [ 2 -1  3  5  7]
 [ 9  0  7  3  0]] 
```

这是情节： ![在此处输入图像描述](../Images/4ca043f5885aca4d3dee31f0db051d1e.png)
我想将黑色分配给所有 -1 条目，将白色分配给所有 0 条目，并且我希望它以两种离散颜色显示在第一号下方的颜色条上。这是一个例子，我的照片编辑能力很差，但应该清楚我想要什么（颜色条应该是按比例的）：
![在此处输入图像描述](../Images/8c2bf0507be16dcce231b62944458f3c.png) 拥有连续的`jet`颜色图对我来说并不重要，我会满足于一个解决方案我的颜色条将是离散的，例如由 10 种颜色组成，其中两种是黑色和白色，8 种来自`jet`彩色地图颜色。但是，重要的是 -1 和 0 具有不同的颜色，无论值的总范围是多少。
例如，如果值范围是从 -1 到 1000：
![在此处输入图像描述](../Images/eafc754e57290203539c546ac89049ca.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T02:03:54.980

您可以使用 ListedColormap：

```
import numpy as np
import matplotlib as mpl
from matplotlib import pyplot as plt

N = 10

np.random.seed(10)    
a=np.random.randint(-1, N, size=(5, 5))
print a

fig, ax = plt.subplots()

colors = [(0.0,0.0,0.0),(1.0,1.0,1.0)]
colors.extend(mpl.cm.jet(np.linspace(0, 1, N-1)))
cmap = mpl.colors.ListedColormap(colors)
mat=ax.matshow(a, cmap=cmap, vmin=-1, vmax=N-1)
cax = plt.colorbar(mat, ticks=np.linspace(-0.5, N-1-0.5, N+1))
cax.set_ticklabels(range(-1, N))
plt.show() 
```

![在此处输入图像描述](../Images/dc3e99c87d2b7aa2fc46b5bd09f4bf63.png)

对于值范围，您可以先将值转换为范围索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-04T18:46:56.703

回应@newPyUser 的评论...

我*认为*@HYRY 的魔法就是这样发生的……

由 2 个 RGB 元素组成的列表，即黑色 (colors[0]) 和白色 (colors[1]) `colors = [(0.0,0.0,0.0),(1.0,1.0,1.0)]` 然后将颜色空间的其余部分附加到 2 项列表的末尾，即从 0 到 N- 的值1 at step of 1 `colors.extend(mpl.cm.jet(np.linspace(0, 1, N-1)))` 最后构建从 -1 到 N-1 定义的 cmap `cmap = mpl.colors.ListedColormap(colors) mat=ax.matshow(a, cmap=cmap, vmin=-1, vmax=N-1)` 这样 -1 被映射到黑色（颜色 [0]），0 被映射到白色（颜色 [1]）

# robots.txt - 防止搜索引擎将脚本 URL 编入索引

> ID：10466732
> 
> 赞同：0
> 
> 时间：2012-05-05T23:13:21.427
> 
> 标签：robots.txt

如何防止搜索引擎将脚本 URL 编入索引，例如：

domain.tld/?[这里有什么]

机器人.txt

```
User-agent: *
Disallow: /? 
```

似乎确实有效。

但仍然允许对主页进行索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T23:25:25.773

使用 URL 编码的“？” ( `%3D`)

```
User-agent: *
Disallow: /%3D 
```

来源：[http ://www.robotstxt.org/norobots-rfc.txt](http://www.robotstxt.org/norobots-rfc.txt)

# google-maps-api-3 - google maps api v3 地图显示问题

> ID：10466737
> 
> 赞同：3
> 
> 时间：2012-05-05T23:13:40.083
> 
> 标签：google-maps-api-3

查看此页面上的地图：http: [//demo.wpconsult.net/sample/sub-page-11](http://demo.wpconsult.net/sample/sub-page-11) 如果您在地图旁边的左窗格中选择位置，则会弹出信息气泡，但它看起来已损坏。我想知道它是否与谷歌浏览器检查器中的 Mime 类型警告有关？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-05T23:16:54.957

[Google-Maps-for-Rails (gmaps4rails) 中的缩放栏变形](https://stackoverflow.com/questions/9548330/zoom-bar-disfigured-in-google-maps-for-rails-gmaps4rails)

将这些添加到您的 CSS 中。（我发现的另一个来源建议删除`img { max-width }`如果有的话。）

```
#map-canvas label { width: auto; display:inline; }
#map-canvas img { max-width: none; } 
```

ps 我认为每个人都会收到 mime 类型的警告。

# php - 我在字符串合并行中收到此错误解析错误：语法错误，意外的 T_CONSTANT_ENCAPSED_STRING

> ID：10466739
> 
> 赞同：0
> 
> 时间：2012-05-05T23:13:46.887
> 
> 标签：php, string, syntax-error

我很想让安装文件使用下面的字符串创建配置文件，但我不断收到此错误：解析错误：语法错误，意外的 T_CONSTANT_ENCAPSED_STRING in...

```
$tempcon = '
<?php
// Give Usage string for Config File
if(isset($_GET["gimi"])) {
  die('"' . str_replace('\\','\\\\',__FILE__) . '"'); // <--- The error is on this line!
}
$dbhost = "'. $_POST["dbhost"] .'";             // Database Host Address
$dbname = "'. $_POST["dbname"] .'";             // Database Name
$dbuser = "'. $_POST["dbuser"] .'";             // Database Username
$dbpass = "'. $_POST["dbpass"] .'";             // Database Password

?>'; 
```

我究竟做错了什么？

提前致谢，

罗伯特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T23:19:26.267

您需要转义`'`字符串中的 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T23:22:30.680

您的最后四个字符串分配似乎被破坏了。我建议使用 heredoc/nowdoc 来避免出现问题。

编辑：除此之外，您似乎正在使用 php 编写一个 php 文件，以动态连接到由用户控制的另一个数据库。这有一种难闻的气味......你能描述一下你想要做的更多吗？必须有更好的方法来完成它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T03:14:08.697

您（当前）遇到的解析错误是由于数组索引上的引号引起的 - 尽管您的 die() 也会给您带来麻烦，正如 Musa 指出的那样。更好的解决方案：使用[heredoc](http://php.net/heredoc)。

```
<?php
$tempcon = <<<PHPCODE
<?php
// Give Usage string for Config File
if(isset({$_GET["gimi"]})) {
    die('"' . str_replace('\\','\\\\',__FILE__) . '"'); // <--- The error is on this line!
}
$dbhost = "'. {$_POST["dbhost"]} .'";             // Database Host Address
$dbname = "'. {$_POST["dbname"]} .'";             // Database Name
$dbuser = "'. {$_POST["dbuser"]} .'";             // Database Username
$dbpass = "'. {$_POST["dbpass"]} .'";             // Database Password

?>
PHPCODE; 
```

# javascript - jQuery/Sizzle 仅选择文本节点（或者，如何将 XPath 表达式转换为 Sizzle）

> ID：10466741
> 
> 赞同：0
> 
> 时间：2012-05-05T23:14:23.140
> 
> 标签：javascript, jquery, xpath, sizzle

我有以下 XPath 表达式来获取`textNodes`元素中的所有内容。

```
var textnodes = document.evaluate('descendant::text()', element, null, XPathResult.ORDERED_NODE_ITERATOR_TYPE, null); 
```

它可以在 Chrome 和 Firefox 上完美运行，但 IE。

由于 Sizzle 是浏览器证明的，我想知道，有没有办法只使用 Sizzle/jQuery 选择 textNodes？众所周知，IE是个大问题，IE9也没有XPath（10th呢？）。

或者，换句话说，我如何将我的 XPath 表达式转换为 Sizzle？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T23:25:54.743

在 jQuery 中，您可以使用[filter](http://api.jquery.com/filter/)和[nodeType](https://developer.mozilla.org/en/nodeType)来获取元素中的文本节点：

```
var textnodes = $('*').contents().filter(function(){
    return this.nodeType === 3;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T01:35:15.930

[从这里](https://stackoverflow.com/questions/13792910/is-there-an-alternative-to-jquery-sizzle-that-supports-textnodes-as-first-clas/13830980#13830980)尝试我的解决方案。它甚至允许您在没有额外功能的情况下过滤文本节点本身，以及使用`.end()`.

# java - 遍历 ArrayList 时出现 ConcurrentModificationException

> ID：10466746
> 
> 赞同：0
> 
> 时间：2012-05-05T23:15:48.993
> 
> 标签：java

我正在尝试遍历 Integer ArrayList 并获取每个元素的值，但我在 int value = ... 处遇到错误。

不知道发生了什么。请指教。

```
Iterator<Integer> listItr = executeList.iterator(); // iterator for the execute list 
    while (listItr.hasNext()) { // iterate through list and do work!
        int robIndex = listItr.next();
        int timer = fakeRob.exeCountDown(robIndex); // decrement first then return timer
        if (timer == 0) {// check if instr finished execution
            System.out.println("timer expired. fire");
            executeList.remove(executeList.indexOf(robIndex)); // 1\. remove instr from exeList
            transitState(robIndex, EX, WB); // 2\. transit from EX state to WB state
            int tag = fakeRob.getTag(robIndex); // get producer tag
            regFile.setRdy(tag); // 3a. set register file ready flag for this tag
            fakeRob.wakeUp(tag); // 3b. wake up instructions with this tag
        }
    } 
```

错误：

```
java.util.ConcurrentModificationException
at java.util.AbstractList$Itr.checkForComodification(AbstractList.java:372)
at java.util.AbstractList$Itr.next(AbstractList.java:343)
at sim.execute(sim.java:180)
at sim.<init>(sim.java:71)
at sim.main(sim.java:270 
```

谢谢，

汉克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T23:37:05.657

如果局部变量值是您“做一些事情”的东西，并且您没有修改列表，那么当您在那里时，某个外部线程正在修改列表。

否则，[请参阅@edalorozo 提供的链接以获取一些想法](https://stackoverflow.com/questions/10431981/remove-elements-from-collection-while-iterating/10432084#10432084)

编辑添加

我从不使用这个`iterator.remove()`成语，因为我从来没有对迭代器成语那么熟悉。并且总是将它与短命且实施不善的 Enumerator 东西混为一谈。在增强 for 循环之前，我通常使用非常老式的`for (int i-0; i<foo.length; i++)`样式进行循环。并不是所有的迭代器都支持 remove()，那么有什么意义呢？

因此，即使我现在使用增强的 for 循环，我也“习惯了”“收集所有内容并在之后删除它”的风格。在您的代码中，这将是：

```
ArrayList <Integer> toBeRemoved = new ArrayList <Integer>();
for (Integer robIndex : executeList) {
   // note, I distrust auto-unboxing, (see all the Java Puzzlers books!)
   // so I'd probably add an explicit unbox here
   int robIndexi = robIndex.intValue();

   int timer = fakeRob.exeCountDown(robIndexi); // decrement first then return timer
   if (timer == 0) {// check if instr finished execution
      toBeRemoved.add(robIndex);
      // all that other stuff here...
   }
}

// remove everything now
executeList.removeAll(toBeRemoved); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T23:53:48.223

也许如果你把你正在做的事情放在循环中它会有所帮助。如果您尝试从列表中删除一个元素，您需要调用 listItr.remove() 来执行此操作。通常，您不应在循环中调用任何修改列表的函数（即 add()、set() 等...）。

以下代码将触发此

```
Iterator<Integer> it = executeList.iterator();
while (it.hasNext()) {
  Integer i = it.next();
  executeList.remove(i);
} 
```

正确的方法是：

```
Iterator<Integer> it = executeList.iterator();
while (it.hasNext()) {
  Integer i = it.next();
  it.remove();
} 
```

其他线程（如上所述）也可能是问题所在。请记住，迭代器由所有 java 提供的集合中的列表本身支持。因此，如果在您迭代时另一个线程修改了列表，您将遇到此问题。

# bash - Bash：带有变量的彩色输出

> ID：10466749
> 
> 赞同：20
> 
> 时间：2012-05-05T23:16:03.610
> 
> 标签：bash, variables

我有以下功能：

```
function pause #for prompted pause until ENTER
{

prompt="$3"
    echo -e -n "\E[36m$3" #color output text cyan
    echo -e -n '\E[0m' #ends colored output
    read -p "$*"  #read keys from user until ENTER.
    clear

}

pause "Press enter to continue..." 
```

但是，我的函数拒绝将青色应用于我传递给函数的字符串。

[在这里](https://stackoverflow.com/questions/2829276/bash-color-variable-output)问了一个类似的问题，但似乎我做的一切都是正确的......

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-05T23:58:23.953

尝试这个：

```
RESTORE='\033[0m'

RED='\033[00;31m'
GREEN='\033[00;32m'
YELLOW='\033[00;33m'
BLUE='\033[00;34m'
PURPLE='\033[00;35m'
CYAN='\033[00;36m'
LIGHTGRAY='\033[00;37m'

LRED='\033[01;31m'
LGREEN='\033[01;32m'
LYELLOW='\033[01;33m'
LBLUE='\033[01;34m'
LPURPLE='\033[01;35m'
LCYAN='\033[01;36m'
WHITE='\033[01;37m'

function test_colors(){

  echo -e "${GREEN}Hello ${CYAN}THERE${RESTORE} Restored here ${LCYAN}HELLO again ${RED} Red socks aren't sexy ${BLUE} neither are blue ${RESTORE} "

}

function pause(){
  echo -en "${CYAN}"
  read -p "[Paused]  $*" FOO_discarded
  echo -en "${RESTORE}"
}

test_colors
pause "Hit any key to continue" 
```

而且背景更有趣

```
echo -e "\033[01;41;35mTRY THIS\033[0m"
echo -e "\033[02;44;35mAND THIS\033[0m"
echo -e "\033[03;42;31mAND THIS\033[0m"
echo -e "\033[04;44;33mAND THIS\033[0m"
echo -e "\033[05;44;33mAND THIS\033[0m" 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-05T23:56:14.383

我稍微更改了您的代码：

```
#!/bin/bash

function pause() {
    prompt="$1"
    echo -e -n "\033[1;36m$prompt"
    echo -e -n '\033[0m'
    read
    clear
}

pause "Press enter to continue..." 
```

我改变了什么：

1.  当正确的参数是 $1 时，您正在将提示初始化为 $3
2.  ANSI 序列不正确。参见：[http ://tldp.org/HOWTO/Bash-Prompt-HOWTO/x329.html](http://tldp.org/HOWTO/Bash-Prompt-HOWTO/x329.html)
3.  对 read 的调用不正确，您传递了几个参数来使用 $*。在这种特殊情况下，您将丢弃输入，因此甚至不需要保存读取的结果。我建议您阅读手册页： http: [//linux.die.net/man/1/bash](http://linux.die.net/man/1/bash)以了解如何准确使用 read。如果您传入多个参数，这些参数将被映射到变量名，该变量名将包含在该行中输入的不同字段。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-01-23T17:20:10.720

为了节省别人的时间：

[https://gist.github.com/elucify/c7ccfee9f13b42f11f81](https://gist.github.com/elucify/c7ccfee9f13b42f11f81)

不需要`$(echo -ne)`到处乱写，因为上面 gist 中定义的变量已经包含控制字符。前导/尾随`\001`&`\002`告诉 bash 控制字符不应占用空间，否则在 a 中使用这些`$PS1`会混淆`readline`.

```
RESTORE=$(echo -en '\001\033[0m\002')
RED=$(echo -en '\001\033[00;31m\002')
GREEN=$(echo -en '\001\033[00;32m\002')
YELLOW=$(echo -en '\001\033[00;33m\002')
BLUE=$(echo -en '\001\033[00;34m\002')
MAGENTA=$(echo -en '\001\033[00;35m\002')
PURPLE=$(echo -en '\001\033[00;35m\002')
CYAN=$(echo -en '\001\033[00;36m\002')
LIGHTGRAY=$(echo -en '\001\033[00;37m\002')
LRED=$(echo -en '\001\033[01;31m\002')
LGREEN=$(echo -en '\001\033[01;32m\002')
LYELLOW=$(echo -en '\001\033[01;33m\002')
LBLUE=$(echo -en '\001\033[01;34m\002')
LMAGENTA=$(echo -en '\001\033[01;35m\002')
LPURPLE=$(echo -en '\001\033[01;35m\002')
LCYAN=$(echo -en '\001\033[01;36m\002')
WHITE=$(echo -en '\001\033[01;37m\002')

# Test
echo ${RED}RED${GREEN}GREEN${YELLOW}YELLOW${BLUE}BLUE${PURPLE}PURPLE${CYAN}CYAN${WHITE}WHITE${RESTORE} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-06T00:10:03.473

问题是这一行：

```
echo -e -n "\E[36m$3" #color output text cyan 
```

应该：

```
echo -e -n "\E[36m" #color output text cyan 
```

你应该消除这一行，因为你没有使用变量：

```
prompt="$3" 
```

结束序列也应该移到`read`提示中。事实上，开始顺序也可以。

结果：

```
function pause #for prompted pause until ENTER
{
    read -p $'\E[36m'"$*"$'\E[0m'  #read keys from user until ENTER.
    clear
}

pause "Press enter to continue..." 
```

颜色可以放入变量中：

```
cyan=$'\E[36m'
reset=$'\E[0m'
read -p "$cyan$*$reset" 
```

`$''`导致转义序列被解释为`echo -e`.

# php - 如何仅按第一个分隔符按分隔符拆分

> ID：10466751
> 
> 赞同：6
> 
> 时间：2012-05-05T23:16:31.363
> 
> 标签：php, string, delimiter

我有一个看起来像这样的变量：

```
$var = "Dropdown\n
  Value 1\n
  Value 2\n
  Value 3\n"; 
```

如您所见，它基本上是由换行符打破的值。

我想要做的是获取选项类型，在本例中为“下拉”并将其余值存储在另一个字符串中。

所以

```
list($OptionType, $OptionValues) = explode("\n", $var); 
```

上面的代码是我尝试过的，但这就是字符串的结果：

```
$OptionType = 'Dropdown'; //Good
$OptionValues = 'Value 1';  // Only got the first value 
```

我希望 $OptionValues 是这样的： $OptionValues = "Value 1\nValue 2\nValue 3\n";

我该怎么做这样的事情？

选项类型始终是字符串的第一部分，后面是选项值，每个选项值由换行符分隔。

它以这种方式组织，因为它来自用户输入，它使用户更容易处理。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-05T23:19:34.170

您需要使用 的第三个参数来[`explode()`](http://php.net/manual/en/function.explode.php)设置限制。

```
$var = "Dropdown\n
  Value 1\n
  Value 2\n
  Value 3\n";

list( $foo, $bar ) = explode( "\n", $var, 2 );

echo $bar; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T23:18:49.677

```
$values_array = explode("\n", $var);
$OptionType = $values_array[0];
unset($values_array[0]);
$OptionValues = implode("\n", $values_array); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T23:21:09.993

您可以使用 array_shift 自动弹出第一个爆炸的元素，然后加入剩余的元素。

```
<?
$var = "Dropdown\nValue 1\nValue 2\nValue 3\n";

$exploded = explode("\n", $var);
$OptionType = array_shift($exploded);
$OptionValues = join("\n", $exploded);

echo $OptionType . "\n";
print_r($OptionValues); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-06T00:52:11.267

你不需要数组爆炸。

这是适合您的代码：

```
$var = "Dropdown\nValue 1\nValue 2\nValue 3\n";
$the_first_element = substr($var,0,strpos($var,"\n"));
$what_i_want = substr($var,strpos($var,"\n")+1);

//returns :
//"Dropdown"
//"Value1\nValue2\nValue3\n" 
```

# c# - WP7 中印象笔记的 OAuth 代码？

> ID：10466757
> 
> 赞同：0
> 
> 时间：2012-05-05T23:17:38.863
> 
> 标签：c#, api, windows-phone-7, evernote

我正在开发一个 WP7 应用程序。所以我需要访问并创建一些带有附件的笔记。我无法完成 OAuth。与 sdk 一起提供的示例正在使用 devoloper 令牌。但我需要访问令牌。请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T02:48:04.493

正如[Seth](https://stackoverflow.com/users/97962/seth)在 Evernote 论坛的另一个问题中指出的那样：http: [//discussion.evernote.com/topic/26377-oauth-c-example/](http://discussion.evernote.com/topic/26377-oauth-c-example/)

存在使用[反应式 OAuth 库的 C#](http://reactiveoauth.codeplex.com/)[示例](https://github.com/sethhitch/csharp-oauth-sample)。

我刚刚找到它（并找到了你的问题），同时看起来和你一样。我已经下载并插入了我的 API 密钥值，并且工作起来就像一个魅力。我在沙箱中创建的帐户获得了 AuthToken。

# matlab - 保持函数的上下文

> ID：10466758
> 
> 赞同：1
> 
> 时间：2012-05-05T23:18:10.720
> 
> 标签：matlab, function

我想知道是否可以用 Matlab 做到这一点。

我有一个创建和初始化很多变量的脚本。在我的主程序中，我调用这个脚本来完成所有的初始化，然后我继续操作数据。

我想改进该脚本并使其具有类似功能：我希望程序的不同版本将使用略有不同的初始化值。

但是我不能这样做，因为我不能调用带有参数的脚本，如果我用该脚本创建一个函数，我将无法恢复函数的上下文（而且我不想修改脚本这么多我可以退货）。

所以我有点卡在这里。有谁知道我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T23:44:25.983

我可以建议几个选项：

1.  将所需的变量保存到带有`save`. 在脚本文件中，您可以`load,`根据需要删除该文件。
2.  尝试将相同的变量保存为全局变量（为此，`global`在函数调用和脚本中的所需变量前面声明）：

要执行最后一个选项：

```
global Vari
Vari = sum (....); 
```

# php - UPDATE 函数的 Where 语句附近的 SQL 语法错误

> ID：10466759
> 
> 赞同：0
> 
> 时间：2012-05-05T23:18:16.480
> 
> 标签：php, mysql, sql-update, where-clause

好的，所以我不明白发生了什么。据我所知，代码是正确的，但它抛出了一个奇怪的 SQL 语法错误，因为我在我的网站上都使用了相同的代码。我希望有人可以查看它，让我知道他们是否看到任何错误。谢谢你。

错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“WHERE id=954001”附近使用正确的语法

编码：

```
<?php session_start(); //!!!!Nothing Can Go Before Me!!!!
require_once('***********');
$id = $_SESSION['id'];

//INFO UPDATE//
$her_name = $_POST['her_name'];
$her_pic_url = $_POST['her_pic_url'];
$his_name = $_POST['his_name'];
$his_pic_url = $_POST['his_pic_url'];
$event_date = $_POST['event_date'];
$time = $_POST['time'];
$event_address = $_POST['event_address'];
$email = $_POST['email'];
$her_about = $_POST['her_about'];
$her_fb = $_POST['her_fb'];
$her_twit = $_POST['her_twit'];
$him_about = $_POST['him_about'];
$him_fb = $_POST['him_fb'];
$him_twit = $_POST['him_twit'];
$userpic_1 = $_POST['userpic_1'];
$usercap_1 = $_POST['usercap_1'];
$userpic_2 = $_POST['userpic_2'];
$usercap_2 = $_POST['usercap_2'];
$userpic_3 = $_POST['userpic_3'];
$usercap_3 = $_POST['usercap_3'];
$userpic_4 = $_POST['userpic_4'];
$usercap_4 = $_POST['usercap_4'];
$userpic_5 = $_POST['userpic_5'];
$usercap_5 = $_POST['usercap_5'];
$userpic_6 = $_POST['userpic_6'];
$usercap_6 = $_POST['usercap_6'];
$userpic_7 = $_POST['userpic_7'];
$usercap_7 = $_POST['usercap_7'];
$userpic_8 = $_POST['userpic_8'];
$usercap_8 = $_POST['usercap_8'];
$userpic_9 = $_POST['userpic_9'];
$usercap_9 = $_POST['usercap_9'];
$userpic_10 = $_POST['userpic_10'];
$usercap_10 = $_POST['usercap_10'];
$userpic_11 = $_POST['userpic_11'];
$usercap_11 = $_POST['usercap_11'];
$userpic_12 = $_POST['userpic_12'];
$usercap_12 = $_POST['usercap_12'];
$userpic_13 = $_POST['userpic_13'];
$usercap_13 = $_POST['usercap_13'];
$userpic_14 = $_POST['userpic_14'];
$usercap_14 = $_POST['usercap_14'];
$userpic_15 = $_POST['userpic_15'];
$usercap_15 = $_POST['usercap_15'];
$userpic_16 = $_POST['userpic_16'];
$usercap_16 = $_POST['usercap_16'];
$userpic_17 = $_POST['userpic_17'];
$usercap_17 = $_POST['usercap_17'];
$userpic_18 = $_POST['userpic_18'];
$usercap_18 = $_POST['usercap_18'];
$userpic_19 = $_POST['userpic_19'];
$usercap_19 = $_POST['usercap_19'];
$userpic_20 = $_POST['userpic_20'];
$usercap_20 = $_POST['usercap_20'];
$userpic_21 = $_POST['userpic_21'];
$usercap_21 = $_POST['usercap_21'];
$userpic_22 = $_POST['userpic_22'];
$usercap_22 = $_POST['usercap_22'];
$userpic_23 = $_POST['userpic_23'];
$usercap_23 = $_POST['usercap_23'];
$userpic_24 = $_POST['userpic_24'];
$usercap_24 = $_POST['usercap_24'];
$userpic_25 = $_POST['userpic_25'];
$usercap_25 = $_POST['usercap_25'];

$insert = "UPDATE ******* SET her_name = '$_POST[her_name]', her_pic_url = '$_POST[her_pic_url]', his_name = '$_POST[his_name]', his_pic_url = '$_POST[his_pic_url]', event_date = '$_POST[event_date]', time = '$_POST[time]', event_address = '$_POST[event_address]', email = '$_POST[email]', her_about = '$_POST[her_about]', her_fb = '$_POST[her_fb]', her_twit = '$_POST[her_twit]', him_about = '$_POST[him_about]', him_fb = '$_POST[him_fb]', him_twit = '$_POST[him_twit]', userpic_1 = '$_POST[userpic_1]', usercap_1 = '$_POST[usercap_1]', userpic_2 = '$_POST[userpic_2]', usercap_2 = '$_POST[usercap_2]', userpic_3 = '$_POST[userpic_3]', usercap_3 = '$_POST[usercap_3]', userpic_4 = '$_POST[userpic_4]', usercap_4 = '$_POST[usercap_4]', userpic_5 = '$_POST[userpic_5]', usercap_5 = '$_POST[usercap_5]', userpic_6 = '$_POST[userpic_6]', usercap_6 = '$_POST[usercap_6]', userpic_7 = '$_POST[userpic_7]', usercap_7 = '$_POST[usercap_7]', userpic_8 = '$_POST[userpic_8]', usercap_8 = '$_POST[usercap_8]', userpic_9 = '$_POST[userpic_9]', usercap_9 = '$_POST[usercap_9]', userpic_10 = '$_POST[userpic_10]', usercap_10 = '$_POST[usercap_10]', userpic_11 = '$_POST[userpic_11]', usercap_11 = '$_POST[usercap_11]', userpic_12 = '$_POST[userpic_12]', usercap_12 = '$_POST[usercap_12]', userpic_13 = '$_POST[userpic_13]', usercap_13 = '$_POST[usercap_13]', userpic_14 = '$_POST[userpic_14]', usercap_14 = '$_POST[usercap_14]', userpic_15 = '$_POST[userpic_15]', usercap_15 = '$_POST[usercap_15]', userpic_16 = '$_POST[userpic_16]', usercap_16 = '$_POST[usercap_16]', userpic_17 = '$_POST[userpic_17]', usercap_17 = '$_POST[usercap_17]', userpic_18 = '$_POST[userpic_18]', usercap_18 = '$_POST[usercap_18]', userpic_19 = '$_POST[userpic_19]', usercap_19 = '$_POST[usercap_19]', userpic_20 = '$_POST[userpic_20]', usercap_20 = '$_POST[usercap_20]', userpic_21 = '$_POST[userpic_21]', usercap_21 = '$_POST[usercap_21]', userpic_22 = '$_POST[userpic_22]', usercap_22 = '$_POST[usercap_22]', userpic_23 = '$_POST[userpic_23]', usercap_23 = '$_POST[usercap_23]', userpic_24 = '$_POST[userpic_24]', usercap_24 = '$_POST[usercap_24]', userpic_25 = '$_POST[userpic_25]', usercap_25 = '$_POST[usercap_25]', WHERE id=$id";

$result=mysql_query($insert) or die(mysql_error());

if ($result) {
header("location:**********");
}

else {
echo "Whoops! There seems to have been an error! Please try again! If the problem persists please contact Modern Event Productions to update your event!<a href='***************'>Click here to go back to the Vendor System and try again.</a>";
} ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T23:21:45.523

set 子句中的最后一个元素包含一个在 . 之前的尾随逗号`WHERE`。

在子句之前删除那个逗号'，'`WHERE`应该清除错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T23:22:35.673

`,WHERE id=$id`

它告诉您 SQL 语句不正确，问题`WHERE`出在语句的子句上。

摆脱`,`

# c# - 如何获取新的图像文件名

> ID：10466761
> 
> 赞同：1
> 
> 时间：2012-05-05T23:18:32.643
> 
> 标签：c#, asp.net, imageresizer

我计划使用 ImageResizer 将图像存储在文件系统上，并将图像 URL 存储在数据库中。我一遍又一遍地浏览 API，但找不到明显的方法来获取新创建的文件名以包含在 DB URL 中：

```
foreach (string fileKey in HttpContext.Current.Request.Files.Keys)
{
    HttpPostedFile file = HttpContext.Current.Request.Files[fileKey];
    if (file.ContentLength <= 0) continue; //Skip unused file controls.

    ImageJob i = new ImageJob(file, "~/eventimages/<guid>_<filename:A-Za-z0-9>.<ext>", 
        new ResizeSettings("width=200&height=133&format=jpg&crop=auto"));
    i.Build();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T23:41:52.433

从这里： http: [//nathanaeljones.github.com/resizer-docs/doxygen/class_image_resizer_1_1_image_job.html](http://nathanaeljones.github.com/resizer-docs/doxygen/class_image_resizer_1_1_image_job.html)

```
string  FinalPath [get, set]
        Contains the final physical path to the image (if 'dest' was a path - null otherwise) 
```

考虑到`dest`你的路径，我想`FinalPath`包含你需要的东西。

# haskell - 某种迭代

> ID：10466766
> 
> 赞同：0
> 
> 时间：2012-05-05T23:19:32.253
> 
> 标签：haskell, iteration

如果标题不好，请见谅...

所以我的问题是我得到了这个代码：

```
asd (a:as) (b:bs)= tail(rox(tail(rox (tail (rox (a:as) (b:bs))) (b:bs))) (b:bs))
rox [] as = as
rox as [] = as
rox (a:as) (b:bs) = map abs (a-b:rox as bs) 
```

我的类型必须是：`asd :: [Int]->[Int]->[Int]`

我花了半天时间想出一个好的解决方案，但我就是想不出一个，所以如果有人能帮助我，我会很高兴的。我想从（a：as）列表中减去（b：bs）列表，然后我想删除第一个数字并使用结果（结果-（b：bs））再次执行，直到我得到一个（长度（b：bs））-1）列表。如果（a：as）/结果低于（b：bs），例如：00101<10011 我需要将所有（b：bs）数字更改为0（如果结果再次更高，请继续使用(b:bs))。该示例在上面的代码中运行良好，但我想将它与任何列表一起使用。也许我需要使用迭代功能，但我无法弄清楚如何。

这是一个例子：

```
11010(a:as)
101(b:bs)
01110(result)
 1110(after using tail)
 101(b:bs again)
 0100(result)
  100(after tail)
  101(b:bs)
  001(result)
   01(final result after using tail, so its 1number shorter than the (b:bs) list 
```

非常感谢你的帮助！

编辑：有了这个我可以检查哪个二进制数更高，所以我可以将所有 bs 数变为 0，但我不知道如何实现它。

```
(%>=%) :: [Int] -> [Int] -> Bool
(%>=%) [] [] = True
(%>=%) as [] = True
(%>=%) [] bs = False
(%>=%) as bs
    | filter (/=0) (takeWhile (>(-1))(ro as bs))==[]=False
    | elem 1 (takeWhile (>(-1))(ro as bs))==True=True

ro :: [Int] -> [Int] -> [Int]
ro []       bs       = bs
ro as       []       = as
ro (a:as) (b:bs) = (2*a) - b: ro as bs 
```

结果：

```
asd [1,1,1,0,0,1,0,1,0,0,0,0] [1,1,0,1,1]
asd [0,1,1,1,1,0,1,0,0,0,0] [1,1,0,1,1]
asd [1,1,1,1,0,1,0,0,0,0] [1,1,0,1,1]
asd [0,1,0,1,1,0,0,0,0] [1,1,0,1,1]
asd [1,0,1,1,0,0,0,0] [1,1,0,1,1]
asd [0,1,1,0,0,0,0] [1,1,0,1,1] < here is something wrong because its: 1,1,0,1,0,0,0 and from here everything is wrong
asd [1,1,0,0,0,0] [1,1,0,1,1]
asd [1,0,0,0,0] [1,1,0,1,1]
asd [0,0,0,0] [1,1,0,1,1]
[0,0,0,0] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T23:47:06.317

似乎您正在尝试实现余数`rem`（类似于 modulo `mod`）函数，但用于二进制列表。如果将列表转换为 an`Integer`并`rem`在其上执行，速度会快得多。

首先，一个将二进制转换为 的函数`Integer`：

```
unbinary :: [Int] -> Integer
unbinary = foldl (\ a b -> a * 2 + fromIntegral b) 0 
```

然后，将一个转换`Integer`为二进制的函数：

```
binary :: Integer -> [Int]
binary = reverse . go
  where
    go 0 = []
    go d =
      let (q, r) = quotRem d 2
      in fromIntegral r : binary q 
```

最后，一个处理`rem`二进制列表的函数：

```
remBinary :: [Int] -> [Int] -> [Int]
remBinary a b = binary $ inta `rem` intb
  where
    inta = unbinary a
    intb = unbinary b 
```

该解决方案的“优点”是您可以用任何数字（3、6、13 等）替换 2，它适用于任何基数 - 而不仅仅是二进制。

* * *

要回答您的原始问题：

这确实是一个非常奇怪的功能，我**不会**使用`iterate`它。

```
asd :: [Int] -> [Int] -> [Int]
-- If there is nothing to subtract, let's assume that we should return as
asd as [] = as
asd as bs
  -- If the length of `as` is shorter than `bs`, we are done.
  | length as < length bs
  = as
  | head as == 0
  = asd (tail as) bs
  -- Otherwise, compute `rox as bs`, take its `tail`, and call `asd` recursively
  | otherwise
  = asd (tail (rox as bs)) bs

-- I simplified your version of this function a bit
rox :: [Int] -> [Int] -> [Int]
rox []       bs       = bs
rox as       []       = as
rox (a : as) (b : bs) = abs (a - b) : rox as bs 
```

最后一部分`asd`也可以这样写：

```
 = let diff = rox as bs
        tailOfDiff = tail diff
    in asd tailOfDiff bs 
```

这样，它更接近您的描述。

# ios5 - 应用程序未在设备上运行，但在模拟器中运行

> ID：10466770
> 
> 赞同：0
> 
> 时间：2012-05-05T23:19:51.033
> 
> 标签：ios5

出于某种原因，我的应用程序在模拟器上运行，而不是在设备上运行。我看到了以下链接[我的应用程序正在模拟器上运行，但不在设备上，](https://stackoverflow.com/questions/7308523/my-app-is-running-on-the-simulator-but-not-on-the-device)但我不确定构建模式是什么以及在哪里更改它。我试过产品->构建->测试。这就是他们的意思吗？它仍然没有到达设备。xcode 日志（在您看到编译一般状态的位置）显示“在 iPod 上运行”，但它从未出现在那里。似乎在那个链接中，他们说我可以为 iPod 构建，但我没有看到那个选项。我已经在这个 iPod 上运行了我的其他应用程序，但我不确定为什么这个应用程序会遇到困难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T16:25:55.927

好吧，它看起来现在正在工作。我看到这篇文章[iOS App 在模拟器上运行但不在设备上运行？](https://stackoverflow.com/questions/8192108/ios-app-runs-on-simulator-but-not-device)并看到有关重新启动 xcode 和设备的评论。我已经这样做了，但是这次我决定在重新启动设备的同时也重新启动我的 mac。另外，当我登录到 mac 时，我等待它在它首次启动并识别我的设备已连接时通过它通常执行的所有 itunes 业务（是否要同步等）。然后我启动了 xcode 并运行了我的应用程序。之后，该应用程序在设备上成功运行。之前，除了应用程序图标保留在屏幕上之外，设备上什么也没有显示。

# c# - 使用属性驱动对话框创建的替代方法

> ID：10466772
> 
> 赞同：0
> 
> 时间：2012-05-05T23:20:24.917
> 
> 标签：c#, winforms, reflection

我有一个类，它可以生成一个对话框，其中包含通过类属性上的 Attribute 定义的控件。例子：

```
public class MyClass
{
    [DialogControl("Total Amount")]
    public Int32 Total { get; set; }
} 
```

使用反射，我为属性生成了一个带有 NumericUpDown 的对话框`Total`。对话框关闭后，对话框中的值将设置到属性中。这很好用。

但是，该属性使我的班级有些混乱。我想探索其他设计或获得类似功能的可能性，而无需向类中的属性添加属性。

您将如何设计和实施这样的系统？

编辑：假设`MyClass`已经设计了类似的类并且将是面向客户的。进行类到对话框转换的代码是内部的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:25:47.300

我将使用流畅的界面。这是一段工作代码，我将其用作项目的概念证明。我也不喜欢属性，所以用这种方法你不应该注释你的类

```
var builder = new DialogBuilder<Foo>();

        var dlg = builder
            .CreateTab("Foo")
                .CreateGroup("Bar")
                    .CreateCtrl("ctrl_Id", "Id"/*[Label]*/, Align.Left)
                    .BindTo(x => x.Id)
            .Build(); 
```

此代码创建一个带有选项卡和组的表单，然后添加一个控件，该控件绑定到 Foo 类的属性 Id。（您还可以指定验证，在某些条件下显示，在某些条件下隐藏等等）正如您所见，这种方法是非侵入性的，您不必为了让您的对话框工作而触摸您的模型类。如果你愿意，你可以从这里下载整个项目

[http://www.amiralles.com.ar/descargas/fluentdialog.zip](http://www.amiralles.com.ar/descargas/fluentdialog.zip)

PS：没有文档，只有单元测试。

# c# - 异步回调函数如何等待它完成并在调用时获取结果

> ID：10466777
> 
> 赞同：0
> 
> 时间：2012-05-05T23:21:19.877
> 
> 标签：c#, multithreading, windows-phone-7, httpwebrequest

我有2个功能

```
public void sendGETRequest()
        {
            System.Uri targetUri = new System.Uri(urlAdress);
            HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(targetUri);
            request.Method = "GET";
            request.Headers["X_USERNAME"] = username;
            request.Headers["X_PASSWORD"] = password;
            request.BeginGetResponse(new AsyncCallback(ReadWebRequestCallback), request);
        }

        private void ReadWebRequestCallback(IAsyncResult callbackResult)
        {           
            HttpWebRequest myRequest = (HttpWebRequest)callbackResult.AsyncState;
            HttpWebResponse myResponse = (HttpWebResponse)myRequest.EndGetResponse(callbackResult);

            using (StreamReader httpwebStreamReader = new StreamReader(myResponse.GetResponseStream()))
            {
                result = httpwebStreamReader.ReadToEnd();                
            }
            myResponse.Close();
            if (Completed != null)
                Completed();
        }
    } 
```

当我打电话

```
 GET user;   
    public String GETUserList()
    {
      user  = new GET();
      user.urlAdress = url + "user";
       user.username = username;
       user.password = password;

       user.sendGETRequest();

       user.Completed += OutUser;

       if (Completed != null)
           Completed();

       return user.result;
    }

void OutUser()
            {
               Debug.WriteLine(user.result);
            } 
```

**如果我像这样调用 1 个操作来获取用户列表**

```
String json = GETUserList();
            Debug.WriteLine("Hllllllllllll" + json + "HHHHHHHHHHHHHH" + p.resultWords); 
```

**它返回**

```
HllllllllllllHHHHHHHHHHHHHH
[{"id":"3","username":"a","password":"a"},{"id":"4","username":"bbbb\n","password":"aaa"},{,{"id":"13","username":"abcdef","password":"abcdef"},{"id{"id":"10","word":"AAAAddddA","definition":"aaa","cardset_id":"2"},{"id":"11","word":"AAAAddddA","definition":"aaa","cardset_id":"2"},{"id":"12","word":"asdas","definition":"asdasd","cardset_id":"1"},{"id":"13","word":"asdas","definition":"asdasd","cardset_id":"1"},{"id":"14","word":"AAAAddddA","definition":"aaa","cardset_id":"2"},{"id":"15","word":"AAAAddddA","definition":"aaa","cardset_id":"2"},{"id":"16","word":"asdas","definition":"asdasd"," 
```

我认为函数 **ReadWebRequestCallback(IAsyncResult callbackResult)**是在后台运行的，当**我调用以获取用户列表时，** 它会在此之后执行（我已经调试过。如何在操作完成之前运行它？谢谢提前！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T23:31:37.517

下面是它的工作原理：

```
BeginGetResponse -> makes an asynchronous web request
asynchronous request completed -> makes a callback: ReadWebRequestCallback
ReadWebRequestCallback -> read the response 
```

因此，您似乎希望`ReadWebRequestCallback`在...中到达 return 语句之前等待，`GETUserList()`然后不要发出异步请求。做任何其他事情都会有效地破坏发出异步请求的目的。

您可以使用手动重置事件：

```
public class GETUser
{
    public ManualResetEvent mrse = new ManualResetEvent(false);
    // other fields 
} 
```

在

```
public String GETUserList()
{
    user  = new GET();
    user.urlAdress = url + "user";
    user.username = username;
    user.password = password;

    user.sendGETRequest();

    user.Completed += OutUser;

    if (Completed != null)
       Completed();

    user.mrse.WaitOne(); // <--- block until the event is raised
    return user.result;
} 
```

在回调中：

```
private void ReadWebRequestCallback(IAsyncResult callbackResult)
{           
    HttpWebRequest myRequest = (HttpWebRequest)callbackResult.AsyncState;
    HttpWebResponse myResponse = (HttpWebResponse)myRequest.EndGetResponse(callbackResult);

    using (StreamReader httpwebStreamReader = new StreamReader(myResponse.GetResponseStream()))
    {
        result = httpwebStreamReader.ReadToEnd();                
    }
    myResponse.Close();
    if (Completed != null)
        Completed();

    mrse.Signal();// <-- signal that you have finished reading
} 
```

同样，这违背了发出异步 Web 请求的目的。

# javascript - JQuery 预加载器在 Internet Explorer 中不起作用

> ID：10466779
> 
> 赞同：1
> 
> 时间：2012-05-05T23:21:41.780
> 
> 标签：javascript, jquery, image, preload

**更新：我想通了。加载 gif 图像的路径出错。当涉及到这一点时，其他浏览器更加宽容......**

我似乎在预加载图像时遇到了问题。

我有一个预加载器脚本，它可以在 IE 以外的所有浏览器中正常工作。它似乎只是在加载动画部分卡住了。

有人可以指出缺少/错误的地方吗？

谢谢！

```
// JavaScript Document
$.fn.preloader = function(options){

    var defaults = {
        delay:200,
        preload_parent:"a",
        check_timer:300,
        ondone:function(){ },
        oneachload:function(image){},
        fadein:500 
    };

    // variables declaration and precaching images and parent container
    var options = $.extend(defaults, options),
    root = $(this) , images = root.find("img").css({
        "visibility":"hidden",
        opacity:0
    }) ,  timer ,  counter = 0, i=0 , checkFlag = [] , delaySum = options.delay ,
    caseStudies =root.find('.case-study .tab').css({
        "display":"none"
    }) ,

    init = function(){
        timer = setInterval(function(){

            if(counter>=checkFlag.length)
            {
                clearInterval(timer);
                options.ondone();
                return;
            }

            for(i=0;i<images.length;i++)
            {

                if(images[i].complete==true)
                {
                    if(checkFlag[i]==false)
                    {
                        checkFlag[i] = true;
                        options.oneachload(images[i]);
                        counter++;

                        delaySum = delaySum + options.delay;
                    }

                    $(images[i]).css("visibility","visible").delay(delaySum).animate({
                        opacity:1
                    },options.fadein,
                    function(){
                        $(this).parent().removeClass("preloader");
                        if($(this).parent().parent().parent().hasClass('case-study')){
                            $(this).parent().parent().find('.tab').show('normal');
                            $(this).parent().parent().find('.tab').css({
                                'display':'block'
                            });
                        }

                    });
                }
            }

        },options.check_timer) 

    } ;

    images.each(function(){
        if($(this).parent(options.preload_parent).length==0)
            $(this).wrap("<a class='preloader' />");
        else
            $(this).parent().addClass("preloader");

        checkFlag[i++] = false;

    }); 
    images = $.makeArray(images);   
    var icon = jQuery("<img />",{

        id : 'loadingicon' ,
        src : location.href+'images/assets/loading_gif.gif'

    }).hide().appendTo("body");

    timer = setInterval(function(){

        if(icon[0].complete==true)
        {
            clearInterval(timer);
            init();
            icon.remove();
            return;
        }

    },100);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-04-16T20:03:54.300

加载 gif 图像的路径出错。其他浏览器在这方面更加宽容。

# google-maps-api-3 - 谷歌地图折线之间有空格

> ID：10466781
> 
> 赞同：0
> 
> 时间：2012-05-05T23:21:51.460
> 
> 标签：google-maps-api-3, google-polyline

在谷歌地图 API-V3 上；沿着折线所示的路径显示步骤的唯一方法是在折线接头处设置一个丑陋的标记。反而; 有没有办法缩短折线的末端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T23:29:30.443

您可以在不显示标记的情况下绘制折线，将它们设置为`visible: false`. 你能解释一下“缩短末端”吗？您的意思是沿线段移动端点以使长度减小？你将如何决定多远？百分比？

[http://jsfiddle.net/AZpPd/](http://jsfiddle.net/AZpPd/)

# ruby - Ruby - rails - 减去日期时间

> ID：10466789
> 
> 赞同：2
> 
> 时间：2012-05-05T23:22:44.883
> 
> 标签：ruby, ruby-on-rails-3

ruby/rails 中是否有一种方法可以添加/减去日期和时间以及时区，并且输出为天数、小时数、分钟数和秒数，而不是 DataTime 格式？

```
t1 = "2012-05-05 00:00:02 -0400"
t2 = "2012-05-04 00:00:00 -0500"

time_diff = (Time.now() - Time.parse(t1)).to_s
#Or
time_diff = (Time.parse(t1) - Time.parse(t2)).to_s 
```

我正在寻找`1 Day, 01:59:58` 结果应该`#of Days HH:MM:SS`格式化

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T23:50:18.190

据我所知，Ruby 或 Rails 没有任何内置功能可以做到这一点。有[`distance_of_time_in_words`](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-distance_of_time_in_words)，但它提供的时间比您看起来要寻找的要模糊（例如“大约 7 天”）。

不过，编写一个方法来做到这一点相当简单。给定以秒为单位的差异，这将为您提供差异的天数、小时数和秒数：

```
def time_length seconds
  days = (seconds / 1.day).floor
  seconds -= days.days
  hours = (seconds / 1.hour).floor
  seconds -= hours.hours
  minutes = (seconds / 1.minute).floor
  seconds -= minutes.minutes
  { days: days, hours: hours, minutes: minutes, seconds: seconds }
end

time_length(Time.parse(t1) - Time.parse(t2))
#=> {:days=>0, :hours=>23, :minutes=>0, :seconds=>2.0} 
```

# rdf - INSERT WHERE SPARQL + 4Store 的问题

> ID：10466793
> 
> 赞同：1
> 
> 时间：2012-05-05T23:23:39.300
> 
> 标签：rdf, sparql, 4store

我正在尝试使用 INSERT WHERE 插入值。我使用 4Store 作为语义存储库。

查询如下，

```
INSERT { 
    <http://some.com#test2> rdf:type <http://dbpedia.org/ontology/Floor> . 
    ?URI1257846444363706 <http://dbpedia.org/ontology/TestFloor> <http:// some.com #test2> . 
    <http:// some.com #test2> <http://dbpedia.org/ontology/floorNo> 'B11' . 
       } 
WHERE { 
    ?URI1257846444278864 rdf:type <http://dbpedia.org/ontology/Campus> . 
    ?URI1257846444278864 <http://dbpedia.org/ontology/hasCampusCode> 'ABC' . 
    ?URI1257846444363706 rdf:type <http://dbpedia.org/ontology/Building> . 
    ?URI1257846444278864 <http://dbpedia.org/ontology/Building> ?URI1257846444363706 . 
    ?URI1257846444363706 <http://dbpedia.org/ontology/hasBuildingCode> 'XYZ' . 
    } 
```

当我运行上述查询时，INSERT 中的三元组没有插入到存储中（我尝试使用 SELECT 查询检索三元组，但它不返回任何结果）。我已经检查了 WHERE 子句中的所有三元组，并且它们都存在于商店中。

```
PREFIX rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
SELECT * { 
    ?URI1257846444278864 rdf:type <http://dbpedia.org/ontology/Campus> .
    ?URI1257846444278864 <http://dbpedia.org/ontology/hasCampusCode> 'ABC' .
    ?URI1257846444363706 rdf:type <http://dbpedia.org/ontology/Building> .
    ?URI1257846444278864 <http://dbpedia.org/ontology/Building> ?URI1257846444363706 .
    ?URI1257846444363706 <http://dbpedia.org/ontology/hasBuildingCode> 'XYZ' . 

    } 
```

结果：

```
<head>
    <variable name="URI1257846444278864"/>
    <variable name="URI1257846444363706"/>
  </head>
  <results>
    <result>
      <binding name="URI1257846444278864"><uri>http://some.com/Ontology/2012.owl#ranfa1087b9-6cee-4433-a4d3-816e9b1af208</uri></binding>
      <binding name="URI1257846444363706"><uri>http://some.com/Ontology/2012.owl#ran1224548700931885</uri></binding>
    </result>
  </results> 
```

但是只有一个变量的相同 INSERT WHERE 工作正常，

```
INSERT { 
    <http://some.com#test2> rdf:type <http://dbpedia.org/ontology/Floor> . 
    ?URI1257846444363706 <http://dbpedia.org/ontology/TestFloor> <http:// some.com #test2> . 
    <http:// some.com #test2> <http://dbpedia.org/ontology/floorNo> 'B11' . 
    } 
WHERE { 
    ?URI1257846444363706 rdf:type <http://dbpedia.org/ontology/Building> . 
    ?URI1257846444363706 <http://dbpedia.org/ontology/hasBuildingCode> 'XYZ' . 
    } 
```

第一个 INSERT WHERE 有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T06:46:09.900

不看数据很难判断查询是否正确。

尝试使用 SELECT * 仅运行 WHERE 部分。这将告诉您是否有任何匹配项。

此外，您没有说明您正在运行的 4store 版本。早期的只有部分 INSERT 支持。

# php - facebook画布中的特殊字符

> ID：10466794
> 
> 赞同：1
> 
> 时间：2012-05-05T23:23:46.000
> 
> 标签：php, utf-8, facebook-php-sdk, html-encode

我在 facebook 画布中遇到特殊字符问题。

我正在检索尚未安装该应用程序的用户朋友并显示它们。但是，当我显示它们时，特殊字符看起来好像它们的编码不同。

例如，á 显示为 Ã¡，é 显示为 Ã© 等等。

我尝试了一些没有用的东西：

```
<? 
$search=array('Ã', 'Ã¡', 'Ã©','Ã­','Ã³','Ãº','Ã±');
$replace=array('&Aacute;', '&aacute;','&eacute;','&iacute;','&oacute;','&uacute;','&nacute;',);

echo str_replace($search,$replace, $friend_name) ?>

<? echo htmlentities($friend_name) ?> 
```

更多信息：我正在使用 facebook 的 php sdk，并设置 mete 标签：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

谢谢

编辑：应用 utf8_decode() 并解决了问题。没有这个功能有没有办法解决问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T23:31:29.303

闻起来像字符编码问题（UTF、cp1252 等），而不是转义问题 ( `\htmlspecialchars`)。检查您的源和目标编码；他们可能不匹配。

顺便提一下，PHP 的默认内部编码从 5.4 版本开始更改为 UTF-8，因此您可能还会遇到版本不匹配导致的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T07:39:53.280

您应该对该文档进行 UTF-8 编码。这取决于您使用它编码方式的编辑器。在记事本++ 中有一个编码选项卡，您应该使用不带BOM 的UTF-8。这解决了我的 facebook 问题。

即使您设置了元标记还不够，您应该对文档进行 UTF-8 编码。如果你这样做，它将使你不必编码/解码大多数类似的东西。

# java - Action Bar Sherlock 4 标题文本颜色 - 我哪里出错了？

> ID：10466796
> 
> 赞同：8
> 
> 时间：2012-05-05T23:24:05.840
> 
> 标签：java, android, actionbarsherlock

我很难让我的操作栏标题文本颜色变白。遵循示例后，我相信我的代码是正确的，但是文本显示为黑色。

谁能看到我做错了什么？

```
<resources>
    <style name="Theme.MyApp" parent="Theme.Sherlock.Light">
        <item name="actionBarStyle">@style/Widget.MyApp.ActionBar</item>
        <item name="android:actionBarStyle">@style/Widget.MyApp.ActionBar</item>
        <item name="titleTextStyle">@style/Widget.MyApp.TitleTextStyle</item>
        <item name="android:titleTextStyle">@style/Widget.MyApp.TitleTextStyle</item>
    </style>

    <style name="Widget.MyApp.ActionBar" parent="Widget.Sherlock.Light.ActionBar">
        <item name="background">@drawable/gradient_blue</item>
        <item name="android:background">@drawable/gradient_blue</item>
    </style>

    <style name="Widget.MyApp.TitleTextStyle" parent="Widget.Sherlock.Light.ActionBar">
        <item name="titleTextStyle">@color/white</item>
        <item name="android:titleTextStyle">@color/white</item>
    </style>
</resources> 
```

提前谢谢了！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-08T07:48:58.493

使用以下，只需自定义`actionBarStyle`属性：

```
<resources>
    <style name="Theme.MyApp" parent="Theme.Sherlock.Light">
        <item name="actionBarStyle">@style/Widget.MyApp.ActionBar</item>
        <item name="android:actionBarStyle">@style/Widget.MyApp.ActionBar</item>
    </style>

    <style name="Widget.MyApp.ActionBar" parent="Widget.Sherlock.Light.ActionBar">
        <item name="titleTextStyle">@style/Widget.MyApp.TitleTextStyle</item>
        <item name="android:titleTextStyle">@style/Widget.MyApp.TitleTextStyle</item>
    </style>

    <style name="Widget.MyApp.TitleTextStyle" parent="TextAppearance.Sherlock.Widget.ActionBar.Title">
        <item name="android:textColor">@color/white</item>
    </style>
</resources> 
```

你也可以自定义`textSize`标题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T01:40:38.690

您应该在文本样式中设置文本颜色和其他文本属性。

```
<style name="Widget.MyApp.TitleTextStyle" parent="Widget.Sherlock.Light.ActionBar">
    <item name="android:textColor">@color/white</item>
</style> 
```

# objective-c - 像 iOS5 上的 Yahoo Finance 小部件一样滚动文本

> ID：10466797
> 
> 赞同：0
> 
> 时间：2012-05-05T23:24:11.187
> 
> 标签：objective-c, ios, uiscrollview

我想构建一个 UI 控件，就像我们在 iOS5 的下拉菜单中看到的 Yahoo Finance 小部件一样。它似乎是一个滚动视图，可以连续水平滚动子视图。但是当你触摸它时，滚动停止。现在，如果您拖动手指，您可以手动滚动。但是一旦你释放它，它就会以非常流畅的方式重新开始滚动。我应该如何构建这样的控件？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T18:01:50.293

您需要阅读 Core Animation 并处理触摸事件（或使用手势识别器）。

UIScrollView 可能不是这项工作的正确工具，因为它预计其内容是有限的。您似乎描述的拉链式视图可能没有结束 - 它更像是一个连续循环，它甚至可能不会重复。使用 Core Animation，你可以以你喜欢的任何速率水平滑动你的视图。当您获得触摸或手势时停止动画并使用不同的动画让视图跟踪触摸。

# vb.net-2010 - 如何访问动态复选框

> ID：10466799
> 
> 赞同：0
> 
> 时间：2012-05-05T23:25:15.103
> 
> 标签：vb.net-2010

嘿伙计们，我动态创建了一些复选框，现在我想将它们的值设置为 False。我的问题是我无法访问它们，因为没有说明名称。

我这样创建它们：

```
 For j = 0 To column - 1

        For i = 0 To row - 1
            MyCheckboxes(counter) = New CheckBox
            MyCheckboxes(counter).Visible = True
            MyCheckboxes(counter).Checked = True
            MyCheckboxes(counter).Text = ""
            MyCheckboxes(counter).Size = New Size(15, 14)
            MyCheckboxes(counter).Name = "Check" + counter.ToString
            Me.Controls.Add(MyCheckboxes(counter))
            MyCheckboxes(counter).Location = New Point(Xpos, Ypos)
            Xpos = Xpos + 20
            counter = counter + 1
        Next i
        Ypos = Ypos + 20
        Xpos = 160
    Next j 
```

进入一个全局数组

```
 Public MyCheckboxes() As System.Windows.Forms.CheckBox 
```

现在我想在单击事件的按钮中将值设置为 False：

```
 Private Sub Button2_Click(sender As Object, e As EventArgs) Handles Button2.Click

    Dim i As Integer = 0

    Me.Controls("Check" & i).Checked = False 'Here it says: Checked is not a Member of 'System.Windows.Forms.Control'
    CheckBox0.Checked = False ' Here it says CheckBox0 is not declared. It may be inaccessible due to its protection level.

End Sub 
```

我不知道我做错了什么我搜索了近3个小时的原因。请帮我干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T23:26:40.500

只需通过您的阵列访问它们。

```
MyCheckboxes(i).Checked = False 
```

# jquery - 一个一个地显示所有的div

> ID：10466801
> 
> 赞同：2
> 
> 时间：2012-05-05T23:25:26.243
> 
> 标签：jquery

我在asp页面中有很多div，我想在页面加载后使用jquery.show（）或jquery.fadein（）一一显示我的意思是它们不会一起显示，它们应该一一显示。

```
<div class = "trip">Trip1</div>
<div class = "trip">Trip2</div>
<div class = "trip">Trip3</div>
<div class = "trip">Trip4</div> 
```

感谢您的任何回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T23:28:37.500

```
$(".trip").each(function(i,e) {
    $(this).delay(i*400).fadeIn();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T23:27:38.107

[演示](http://jsfiddle.net/k56n9/)

```
$(".trip").each(function(i) {
    $(this).delay(i * 100).fadeIn();
});​ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-05T23:28:16.877

```
$('.trip').each(function(index, element){
    $(this).delay(1000 * index).show(0);
}); 
```

[**现场演示**](http://jsfiddle.net/gdoron/RwMy7/11/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T23:30:54.833

```
$(".trip").each(function(i,o){
 $(o).delay(i*250).fadeIn();
}); 
```

演示：http: [//jsbin.com/ibupud/2/edit](http://jsbin.com/ibupud/2/edit)

# transition - 图灵机图

> ID：10466807
> 
> 赞同：1
> 
> 时间：2012-05-05T23:26:31.480
> 
> 标签：transition, diagram, turing-machines

星期一我有一个期末考试，并被作为考试问题类型的一个例子。我希望有人可以用图表、一些指针或任何相关的东西来帮助我。

我已经成功地完成了其他问题，但是，这个特殊的问题让我感到困惑。

![例子](../Images/5257b4a2e76793eb02e0b0a751d9e0ac.png)

这不是家庭作业。我不是想让你为我工作，而是帮助我学习并为我的期末考试做准备。提前致谢。

这是我做的一个图表，但它只有在 x 和 y 长度相等时才有效......

![在此处输入图像描述](../Images/3fb241a56a42d50dd396cb42fe6254a7.png)

# asp.net - 级联下拉在 Chrome 和空白字段中给出“未定义”值

> ID：10466809
> 
> 赞同：1
> 
> 时间：2012-05-05T23:26:40.670
> 
> 标签：asp.net, sql, cascadingdropdown

我正在开发一个 Web 表单，该表单使用 WebService 通过使用 Ajax Cascading DropDown 来填充 DropDownList 的数据。在 VS 中使用它自己的 IIS Express 实例对其进行调试时，它就像一个魅力。当我在 localhost 上安装 IIS 以执行完整测试时，下拉列表中填充了 Chrome 中的“未定义”值和 IE 中的空白字段。

我在下面提供了完整的代码。表单和 WebService 都驻留在名为 Query 的文件夹中。我检查了 CascadingDropDown 的路径。当我将其更改为其他任何内容时，该字段返回方法 500 错误。因此，我使用的路径是正确的，因为不会引发此错误。

在代码中，你会遇到“NoValidationDropDown”，请忽略这个，这不是错误的来源，只允许绕过验证。

我没有对 WebConfig 进行任何更改。如果这对 WebServices 的工作很重要，请告诉我。我已允许 TCP/IP 连接到我的 SQL Express 服务器数据库实例。

这是我的表单页面（Data_selector.aspx）的摘录：

```
<asp:Panel ID="Panel3" runat="server">
        <p>
            <b>Query Type</b><br />
            <asp:NoValidationDropDown ID="ddlquery" runat="server"/>
            <%--<asp:DropDownList ID="ddlquery" runat="server"/>--%>
            <ajaxtoolkit:CascadingDropDown ID="ccdquery" runat="server" Category="QueryType" TargetControlID="ddlquery"
            PromptText="Please select a query" LoadingText="Loading data" ServiceMethod="BindQueryType" ServicePath="~/Query/DropDownWebService.asmx"/>
        </p>
        <p>
            <b>Specify query type</b><br />
             <asp:NoValidationDropDown ID="ddlitem" runat="server" AutoPostBack="true" OnSelectedIndexChanged="ddlitem_SelectedIndexChanged"/>
            <%--<asp:DropDownList ID="ddlitem" runat="server" AutoPostBack="true" OnSelectedIndexChanged="ddlitem_SelectedIndexChanged"/>--%>
            <ajaxtoolkit:CascadingDropDown ID="ccditem" runat="server" Category="ItemType" TargetControlID="ddlitem" ParentControlID="ddlquery"
            PromptText="Please specify query type" LoadingText="Loading data" ServiceMethod="BindItemType" ServicePath="~/Query/DropDownWebService.asmx"/>
        </p>
        <p> 
```

这是我的 WebService.cs 文件的摘录：

```
using System.Data;
using System.Data.SqlClient;
using System.Collections.Generic;
using System.Collections.Specialized;
using System.Configuration;
using AjaxControlToolkit;
using System.Web.Services;
using System;
using System.Text;
using System.Web.Script.Services;
using System.Web.Services.Protocols;

/// <summary>
/// Summary description for CascadingDropdown
/// </summary>
[WebService(Namespace = "NewWebApp")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.Web.Script.Services.ScriptService()]
public class DropDownWebService : System.Web.Services.WebService
{
    //Database connection string
    private static string strconnection = System.Configuration.ConfigurationManager.ConnectionStrings["DefaultConnection"].ConnectionString;
    //database connection
    SqlConnection conquery = new SqlConnection(strconnection);
    public DropDownWebService()
    {

        //Uncomment the following line if using designed components
        //InitializeComponent();
    }
    /// <summary>
    /// WebMethod to Populate Query Dropdown
    /// </summary>
    [WebMethod]
    public CascadingDropDownNameValue[] BindQueryType(string knownCategoryValues, string category)
    {
        conquery.Open();
        SqlCommand cmdquery = new SqlCommand("SELECT * from QueryTypes", conquery);
        cmdquery.ExecuteNonQuery();
        SqlDataAdapter daquery = new SqlDataAdapter(cmdquery);
        DataSet dsquery = new DataSet();
        daquery.Fill(dsquery);
        conquery.Close();
        //create list and add items in it by looping through dataset table
        List<CascadingDropDownNameValue> querydetails = new List<CascadingDropDownNameValue>();
        foreach (DataRow dtrow in dsquery.Tables[0].Rows)
        {
            string Id = dtrow["Id"].ToString();
            string Query = dtrow["Query"].ToString();
            querydetails.Add(new CascadingDropDownNameValue(Query, Id));
        }
        return querydetails.ToArray();
    }
    /// <summary>
    /// WebMethod to Populate Item Dropdown
    /// </summary>
    [WebMethod]
    public CascadingDropDownNameValue[] BindItemType(string knownCategoryValues, string category)
    {
        //int Id;
        //This method will return a StringDictionary containing the name/value pairs of the currently selected values
        StringDictionary querydetails = AjaxControlToolkit.CascadingDropDown.ParseKnownCategoryValuesString(knownCategoryValues);
        string Id = querydetails["QueryType"].ToString();
        conquery.Open();
        SqlCommand cmditem = new SqlCommand("SELECT Id, Item from ItemTypes where QueryId=@QueryId", conquery);
        cmditem.Parameters.AddWithValue("@QueryId", Id);
        cmditem.ExecuteNonQuery();
        SqlDataAdapter daitem = new SqlDataAdapter(cmditem);
        DataSet dsitem = new DataSet();
        daitem.Fill(dsitem);
        conquery.Close();

        //create list and add items in it by looping through dataset table
        List<CascadingDropDownNameValue> itemdetails = new List<CascadingDropDownNameValue>();
        foreach (DataRow dtrow in dsitem.Tables[0].Rows)
        {
            string ItemId = dtrow["Id"].ToString();
            string Item = dtrow["Item"].ToString();
            itemdetails.Add(new CascadingDropDownNameValue(Item, ItemId));
        }
        return itemdetails.ToArray();
    }
} 
```

这是我的 WebService.asmx 文件：

```
<%@ WebService Language="C#" Class="DropDownWebService" CodeBehind="~/Query/DropDownWebService.cs" %> 
```

感谢大家的任何评论！

# firefox - Firefox 移动忽略视口

> ID：10466810
> 
> 赞同：3
> 
> 时间：2012-05-05T23:27:08.550
> 
> 标签：firefox, mobile, viewport

我正在使用手机和平板电脑（Android 4）上的不同浏览器测试视口设置。Firefox 似乎是唯一一个忽略我在平板电脑上的设置的。我的文档类型是 HTML5。我找不到可行的解决方案。有没有办法处理或已知问题？

# php - 带有数组键的 PHP 变量变量

> ID：10466815
> 
> 赞同：7
> 
> 时间：2012-05-05T23:27:43.183
> 
> 标签：php

只是想知道是否有办法解决这个问题（或者是否有可能）。

所以我有一段类似的代码。我有一个字符串，其值包含方括号，类似于访问数组键时使用的值。我想通过使用字符串值来创建该数组键本身。我希望这段代码更能理解我的意思。

```
// String that has a value similar to an array key
$string = 'welcome["hello"]';
$$string = 'thisworks';

// I could then print the array keys value like this
print( $welcome["hello"] );

// This would hopefully output 'thisworks'. 
```

但是，似乎无法使其正常工作。有可能（或者我还能怎么做）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T13:18:26.673

以下是一个遵循变量名称语法的示例，它也解析数组成员：

```
// String that has a value similar to an array key
$string = 'welcome["hello"]';

// initialize variable function (here on global variables store)
$vars = $varFunc($GLOBALS);

// alias variable specified by $string
$var = &$vars($string);

// set the variable
$var = 'World';

// show the variable
var_dump($welcome["hello"]); # string(5) "World" 
```

通过以下实现：

```
/**
 * @return closure
 */
$varFunc = function (array &$store) {
    return function &($name) use (&$store)
    {
        $keys = preg_split('~("])?(\\["|$)~', $name, -1, PREG_SPLIT_NO_EMPTY);
        $var = &$store;
        foreach($keys as $key)
        {
            if (!is_array($var) || !array_key_exists($key, $var)) {
                $var[$key] = NULL;
            }
            $var = &$var[$key];
        }
        return $var;
    };
}; 
```

由于您不能在 PHP 中重载变量，因此您在此处受限于 PHP 的表达能力，这意味着没有将变量引用作为函数返回值的写入上下文，这需要额外的别名：

```
$var = &$vars($string); 
```

如果这样的东西不能满足您的需求，您需要修补 PHP，如果不能，PHP 不提供您正在寻找的语言功能。

另请参阅相关问题：[使用字符串访问（可能很大）多维数组](https://stackoverflow.com/q/7003559/367456)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-05T23:38:24.027

**在[*变量变量*](http://php.net/manual/en/language.variables.variable.php)中，字符串中的字符按字面意思处理。**他们不解释字符串中的内容。因此`[]`中的字符`$string`不被视为数组表示法。而是将其视为变量名的一部分。

执行`$$string = 'thisworks';`PHP 后，会创建一个变量，其名称按`welcome["hello"]`字面意思设置为`thisworks`.

要打印它，请使用此符号，

```
print (${'welcome["hello"]'}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T23:38:19.460

不，你不能这样做。或者，您可以使用设置参考变量

```
$welcomeHello = &$welcome["hello"] 
```

然后使用

```
$welcomeHello = 'thisworks' 
```

用于设置项目内容。

这将是设置数组项的更正确甚至更快的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T23:35:08.267

您可以使用 eval，虽然我真的不建议在生产环境中使用它，但它确实有它的好处。

```
<?
$string = 'welcome["hello"]';
eval('$' . $string . " = 'thisworks';");

// This also works : eval("$$string = 'thisworks';");

// I could then print the array keys value like this
print( $welcome["hello"] ); // Prints 'thisworks' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-07T22:46:32.890

您可以使用两个变量，一个用于保存引用的变量名，另一个用于保存键：

```
<?php
$myArray = array('foo', 'bar', 'baz');
$varName = 'myArray';
$varKey  = 1;
echo ${$varName}[$varKey];
// will echo "bar" 
```

根据为什么要取消引用的花括号`$varName`：

> 为了在数组中使用可变变量，您必须解决歧义问题。也就是说，如果您编写，`$$a[1]`那么解析器需要知道您是否打算`$a[1]`用作变量，或者您是否想要`$$a`用作变量，然后是该变量的 [1] 索引。解决这种歧义的语法是：`${$a[1]}`第一种情况和`${$a}[1]`第二种情况。

（来自[https://www.php.net/manual/en/language.variables.variable.php](https://www.php.net/manual/en/language.variables.variable.php)）

# apache - mod_rewrite 捕获查询中的第一个字母并构建 url

> ID：10466816
> 
> 赞同：0
> 
> 时间：2012-05-05T23:27:47.753
> 
> 标签：apache, mod-rewrite

我试图弄清楚如何捕获一个类别的第一个字母并制作这样的网址

```
http://www.domain.com/category/t/test 
```

原来的网址是：

```
http://www.domain.com/category/category.php?category=test&category_id=1 
```

我对 mod_rewrite 不是很好，我尝试的任何方法都不起作用。我一直在尝试阅读文档等，但仍然没有成功。我什至无法在任何地方找到如何捕获第一个字母并按照我想要的方式建立链接的示例。我看到使用它的网站，但我似乎无法弄清楚或找到一个例子。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T06:19:11.703

目前尚不清楚哪个是源 URL，哪个是目标 URL。您肯定希望用户使用第一种 RESTful 类型，而在内部使用第二种吗？

无论如何，捕获字符的方法是通过 (.)。然后在目标 URL 中将其称为 $1，或者，如果您使用了多个捕获，则 $n 其中是源 URL 中的捕获编号，从左到右读取并从一开始。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-05T23:41:37.660

我不确定我对你的想法是否正确......

```
$NewUrl = "http://www.domain.com/category/".$_GET["category"][0]."/".$_GET["category"]; 
```

$_GET["category"][0] = 第一个字母

：更新：

网址： http: [//www.domain.com/category/t/test](http://www.domain.com/category/t/test)

.htaccess

```
RewriteRule ^(.*)$ index.php?param=$0 [L,QSA] 
```

.php

```
$ref = explode("/",$_GET["param"]); 
```

# c - 无效指针：free()

> ID：10466819
> 
> 赞同：1
> 
> 时间：2012-05-05T23:28:11.197
> 
> 标签：c

在第 4 行的 process_query_str 中，我调用 splitline 并返回一个包含 3 个元素的字符串数组，其中最后一个是 NULL。数组被分配，各个字符串也是如此。然后我尝试释放每个元素，然后释放数组本身（接近第一个函数的末尾）。前两个字符串被释放，但是当它释放第三个元素时，即 NULL，我在底部得到关于无效指针的错误。显然它没有被设置为 NULL 并且应该是。我尝试放置断点，但程序不会停止。

```
char * process_query_str(char *rq, char *cmd) {
    logg("In process_query_str.\n");
    int has_query = 0;
    char **tokenized_args = splitline(rq, &has_query); //Tokenize the string based on '?'
    char * query_str = rq;
    logg("has_query:");
    fprintf(stderr, "%d", has_query);
    if (has_query == 1) //Check for Query String
        if (query_str != NULL) {
            query_str = retrieve_query_str(tokenized_args);
            logg("Query String: ");
            logg(query_str);
            logg("\n");

            char* key = "REQUEST_METHOD"; //Process REQUEST_METHOD envir variable
            if (VLstore(key, cmd) == 0)
                if (VLexport(key) == 0) {
                    logg("Successfully exported ");
                    logg(cmd);
                    logg(": ");
                    logg(key);
                    logg("\n");

                    key = "QUERY_STRING"; //Process QUERY_STRING envir variable
                    if (VLstore(key, query_str) != 1) //1 signals a problem
                        if (VLexport(key) != 0) //0 signals a problem
                                {
                            logg("Successfully exported ");
                            logg(cmd);
                            logg(": ");
                            logg(key);
                            logg("\n");
                        }
                }
        }
#ifdef LOGGING //Print out environment variables
    VLlist();
#endif
    char *resource_str = newstr(tokenized_args[0], strlen(tokenized_args[0]));
    freelist(tokenized_args);
    logg("resource_str=");
    logg(resource_str);
    logg("\n");
    return resource_str;
}

char ** splitline(char *line, int*has_query)
/*
 * purpose: split a line into array of white-space separated tokens
 * returns: a NULL-terminated array of pointers to copies of the tokens
 *          or NULL if line if no tokens on the line
 *  action: traverse the array, locate strings, make copies
 *    note: strtok() could work, but we may want to add quotes later
 */
{
    //char *newstr();
    logg("In splitline\n");
    char **args;
    int spots = 0; /* spots in table    */
    int bufspace = 0; /* bytes in table */
    int argnum = 0; /* slots used       */
    char *cp = line; /* pos in string   */
    char *start;
    int len;

    if (line == NULL) /* handle special case    */
        return NULL;

    args = emalloc(BUFSIZ); /* initialize array */
    bufspace = BUFSIZ;
    spots = BUFSIZ / sizeof(char *);

    while (*cp != '\0') {
        logg("*cp=");
        fprintf(stderr, "%c", *cp);
        while (*cp == ' ') /* skip leading spaces   */
            cp++;
        if (*cp == '\0') /* quit at end-o-string    */
            break;
        /* make sure the array has room (+1 for NULL) */
        if (argnum + 1 >= spots) {
            args = erealloc(args, bufspace + BUFSIZ);
            bufspace += BUFSIZ;
            spots += (BUFSIZ / sizeof(char *));
        }

        /* mark start, then find end of word */
        start = cp;
        len = 1;
        if (*cp == '?') {
            logg("query reached.\n");
            *has_query = 1;
        }

        while (*++cp != '\0' && !(is_delim(*cp,*has_query)))
            len++;

        args[argnum++] = newstr(start, len);
    }
    logg("arg[0] =");
    logg(args[0]);
    logg("\n");
    if (argnum == 2) {
        logg("arg[1] =");
        logg(args[1]);
        logg("\n");
    }
    args[argnum] = NULL;
    fprintf(stderr, "last element is NULL.  argnum=%d", argnum);

    return args;
}

void freelist(char **list)
/*
 * purpose: free the list returned by splitline
 * returns: nothing
 *  action: free all strings in list and then free the list
 */
{
    char **cp = list;
    while (*cp && (*cp)) {
        logg("free: ");logg(*cp);logg("\n");
        free(*cp++);
    }
    logg("Now Free the list:");logg("\n");
    free(list);
    logg("Done Freeing List\n");
} 
```

我从中获得的堆栈回溯信息`glibc`是：

```
free: /index.cgifree: key=value*** glibc detected *** ./ws: free(): invalid pointer: 0x0804efa9 ***
======= Backtrace: =========
/lib/tls/i686/cmov/libc.so.6[0xb76d3d05]
/lib/tls/i686/cmov/libc.so.6(cfree+0x90)[0xb76d7770]
./ws[0x804b36f]
./ws[0x804a1fb]
./ws[0x8049de1]
./ws[0x8049757]
./ws[0x8049660]
/lib/tls/i686/cmov/libc.so.6(__libc_start_main+0xe0)[0xb767e460]
./ws[0x8049031]
======= Memory map: ========
08048000-0804d000 r-xp 00000000 00:24 8084895    /nfs/home/j/c/jcalderon/unixlin                                                                                                                     ux/wsng/ws
0804d000-0804e000 rw-p 00004000 00:24 8084895    /nfs/home/j/c/jcalderon/unixlin                                                                                                                     ux/wsng/ws
0804e000-0806f000 rw-p 0804e000 00:00 0          [heap]
b7500000-b7521000 rw-p b7500000 00:00 0
b7521000-b7600000 ---p b7521000 00:00 0
b7644000-b764e000 r-xp 00000000 68:07 1122448    /lib/libgcc_s.so.1
b764e000-b764f000 rw-p 0000a000 68:07 1122448    /lib/libgcc_s.so.1
b765c000-b7665000 r-xp 00000000 68:07 1122335    /lib/tls/i686/cmov/libnss_files                                                                                                                     -2.7.so
b7665000-b7667000 rw-p 00008000 68:07 1122335    /lib/tls/i686/cmov/libnss_files                                                                                                                     -2.7.so
b7667000-b7668000 rw-p b7667000 00:00 0
b7668000-b77b2000 r-xp 00000000 68:07 1122611    /lib/tls/i686/cmov/libc-2.7.so
b77b2000-b77b3000 r--p 0014a000 68:07 1122611    /lib/tls/i686/cmov/libc-2.7.so
b77b3000-b77b5000 rw-p 0014b000 68:07 1122611    /lib/tls/i686/cmov/libc-2.7.so
b77b5000-b77b8000 rw-p b77b5000 00:00 0
b77c2000-b77c7000 rw-p b77c2000 00:00 0
b77c7000-b77c8000 r-xp b77c7000 00:00 0          [vdso]
b77c8000-b77e2000 r-xp 00000000 68:07 1124008    /lib/ld-2.7.so
b77e2000-b77e4000 rw-p 00019000 68:07 1124008    /lib/ld-2.7.so
bfd9f000-bfdb4000 rw-p bffea000 00:00 0          [stack] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T23:52:39.147

这不能解决您的问题，但可以帮助您减少代码量。您有以下片段：

```
logg("Successfully exported ");
logg(cmd);
logg(": ");
logg(key);
logg("\n"); 
```

如果您能够编写，这会更简单：

```
logg("Successfully exported %s: %s\n", cmd, key); 
```

您可以通过修改此功能来做到这一点：

```
#include <stdarg.h>
#include <stdio.h>

void logg(const char *format, ...)
{
    va_list args;
    va_start(args, format);
    vfprintf(stderr, format, args);
    va_end(args);
} 
```

您可以在标题中声明它：

```
#ifdef __GNUC__
#define PRINTFLIKE(n,m) __attribute__((format(printf,n,m)))
#else
#define PRINTFLIKE(n,m) /* If only */
#endif /* __GNUC__ */

extern void logg(const char *format, ...) PRINTFLIKE(1, 2); 
```

然后 GCC 将发现格式转换规范与传递给函数的参数的滥用。

请注意，此版本的`logg()`本质上与前一个版本兼容。唯一存在差异的情况是，正在打印的字符串是否包含类似`%Z`- 的字符串，该字符串现在被视为转换规范，而不是以前。但是，您应该使用`logg("%s\n", argument);`或类似的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T20:25:01.917

It turned out to be a malloc problem where I didn't allocate enough space in newstr(). The last array element caused the error when I tried to free it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T23:58:13.977

我有一种感觉，这里有过度防御性的编程，并且有机会分解某些功能。

考虑一下：

```
char **tokenized_args = splitline(rq, &has_query);
char * query_str = rq;
logg("has_query:");
fprintf(stderr, "%d", has_query);
if (has_query == 1) //Check for Query String
    if (query_str != NULL) {
        query_str = retrieve_query_str(tokenized_args); 
```

`query_str`被用于两件不同的事情——其中一件是非常短暂的。你为什么要`rq != NULL`通过别名检查`query_str`？为什么不`rq != NULL`直接测试？请注意，这`has_query == 1`只会是真正的 IFF `rq != NULL`。

`has_query == 1`或其中之一`query_str != NULL`是*多余*的，应完全删除。

考虑一下：

```
 char* key = "REQUEST_METHOD";
        if (VLstore(key, cmd) == 0)
            if (VLexport(key) == 0) {
                logg("Successfully exported ");
                logg(cmd);
                logg(": ");
                logg(key);
                logg("\n"); 
```

可能这个日志记录应该包含在`VLstore()`and`VLexport()`函数中。您可以将这些行简化为：

```
if (!VLstore("REQUEST_METHOD", cmd))
    /* error */
if (!VLexport("REQUEST_METHOD"))
    /* error */

if (!VLstore("QUERY_STRING", cmd))
    /* error */
if (!VLexport("QUERY_STRING"))
    /* error */ 
```

现在，我认为给你带来麻烦的代码：

```
char *resource_str = newstr(tokenized_args[0], strlen(tokenized_args[0]));
freelist(tokenized_args); 
```

它出现在有选择地执行 if 的块的末尾`rq != NULL`。但它*也*可以执行 if `rq == NULL`，在这种情况下，`tokenized_args[0]`应该是一个`NULL`指针解引用。由于`freelist()`还会取消引用您传递的指针，因此它也会在那里爆炸*。*`NULL`

我认为你应该把这个例程改写成两个例程——一个处理案件`rq == NULL`，一个处理案件`rq != NULL`。如果用 调用此例程是错误的，请不要尝试*友好*。早点死。在您的例程顶部附近添加并删除冗余检查将大大简化此代码，使您可以更轻松地阅读它。`rq == NULL``rq == NULL``assert(rq)`

# asp.net-mvc - 如何在 MVC 项目中结合 BDD 和 TDD？

> ID：10466821
> 
> 赞同：1
> 
> 时间：2012-05-05T23:28:25.753
> 
> 标签：asp.net-mvc, unit-testing, tdd, bdd

我们正在尝试在我们的新项目中结合 BDD 和 TDD 方法。

在我们的 MVC3 项目中使用 Specflow、NUnit 和 WatiN，我试图遵循由外而内流程的逻辑。[http://msdn.microsoft.com/en-us/magazine/gg490346.aspx](http://msdn.microsoft.com/en-us/magazine/gg490346.aspx) 我想知道我正在尝试做的是正确的。

```
Feature: Commit RPI, As any user, I want to commit all RPI values

Scenario: Commit RPI values, Given I am in the RPI screen And I have entered RPI values

| Year | Month | RPI Value |    
| 2012 | 1     | 1.2       | 
```

当我想提交 RPI 值时，应该提交 RPI 值

验收测试如下：

```
[Given(@"I am in the RPI screen")]    
public void GivenIAmInTheRPIScreen()    
{    
    WebBrowser.Current.GoTo("http://localhost:8010/");    //WebBrowser is the instance of Internet Explorer created by WatiN
    Assert.AreEqual(WebBrowser.Current.Title, "RPI List");
}

***This step will initially fail as there will not be any RPI List screen. So, I’ll go to the web project, create a controller and view. When I run the test again, WatiN will be able to open up the screen and pass the test.***

[Given(@"I have entered RPI values")]    
public void GivenIHaveEnteredRPIValues(Table tblRPI)
{    
    if (tblRPI.Rows.Count > 0)   
    {
        var txtYear = (TextField) WebBrowser.Current.Elements.First(Find.ById("txtRPIYear"));

        if (txtYear != null) 
           txtYear.Value = tblRPI.Rows[0]["Year"];

        var txtMonth = (TextField)WebBrowser.Current.Elements.First(Find.ById("txtRPIMonth"));

        if (txtMonth != null)
            txtMonth.Value = tblRPI.Rows[0]["Month"];

        var txtValue = (TextField)WebBrowser.Current.Elements.First(Find.ById("txtRPIValue"));

        if (txtValue != null)
            txtValue.Value = tblRPI.Rows[0]["RPI Value"];
    }
    else    
    {
        Assert.True(false);
    }
}

[When(@"I want to commit RPI values")]    
public void WhenIWantToCommitRPIValues()
{

   var btnCommitValues = (Button)WebBrowser.Current.Elements.First(Find.ById("btnCommitValues"));

   if (btnCommitValues != null)
   {
       btnCommitValues.Focus();
   }
   else
   {
       Assert.IsTrue(btnCommitValues != null);
   }
}

[Then(@"RPI values should be committed")]
public void ThenRPIValuesShouldBeCommitted()
{
    var btnCommitValues = (Button)WebBrowser.Current.Elements.First(Find.ById("btnCommitValues"));

    if (btnCommitValues != null)
    {
        btnCommitValues.Click();
    }
    else
    {
        Assert.IsTrue(btnCommitValues != null);    
    }
} 
```

***此步骤将失败，因为不会有任何逻辑来提交值。在这个阶段，我将停止 BDD 并继续为提交逻辑编写我的单元测试用例。我将使用 NUnit 编写各种测试用例，让它们通过，这样当我回到验收测试时，就会有一个逻辑来提交已经通过我的单元测试的 RPI 值，现在验收测试也将通过。***

我的问题几乎与此类似[How do specflow features link to unit tests in asp.net webforms projects?](https://stackoverflow.com/questions/7013734/how-do-specflow-features-link-to-unit-tests-in-asp-net-webforms-projects)

如果您使用 SpecFlow、NUnit 和 MVC 做过类似的工作，请分享您的想法。.

# hibernate - JPA，使用 OneToMany 持久化实体，其中一些已经存在

> ID：10466833
> 
> 赞同：0
> 
> 时间：2012-05-05T23:30:33.203
> 
> 标签：hibernate, jpa, persist, one-to-many

我有一个 A 类与 B 类具有 OneToMany 关系的情况。B 类只包含一些属性，如 id、firstName 和 lastName。id 是通过 UUID 生成的。因为很可能 A 的很多实例将引用具有相同 firstName 和 lastName 值的 B 实例，加上 B 实例中的这些值不太可能永远改变。因此，如果其他参数相同，我决定避免重复并让 A 的实例引用到 B 的相同实例（在数据库中）。

例子：

```
b: "John Doe"
a: a1 ("Foo Bar", "John Doe"), a2 ("John Doe", "Alan Smith"). 
```

为了实现这一点，如果将新的 B 添加到 A 中，我总是检查数据库中是否存在具有相同参数的记录。如果是这样，我将用数据库中的那个覆盖 B 实例的 id 并添加之后交给A。

现在我的问题来了。一切正常，但如果我坚持一个 A，我手动更改了 B 的 ID，使其具有与数据库中已经存在的 B 相同的 ID，我将得到一个异常：

```
Caused by: org.hibernate.exception.ConstraintViolationException:
Duplicate entry '2cfa1412-5f64-4a9c-b55c-f7db1148bef9' for key 'PRIMARY' 
```

所以我的问题是：

*   如何在不忽略异常的情况下解决此问题？
*   这是满足我需要的好方法吗？

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T06:37:39.947

首先，您没有OneToMany，而是ManyToMany。

现在，要解决您的问题，不要将附加 B 的 ID 分配给您的 detachedB，而是用附加的 B 替换分离的 B：

```
Set<B> bs = new HashSet<B>(a.getBs()); // copy the list of Bs
a.getBs().clear();
for (B b : bs) {
    B existingB = searchBWithSameValuesAs(b);
    if (existingB != null) {
        a.getBs().add(existingB);
    }
    else {
        em.persist(b);
        a.getBs().add(b);
    }
} 
```

# iphone - 应用程序仅由一位用户在启动时崩溃

> ID：10466838
> 
> 赞同：0
> 
> 时间：2012-05-05T23:31:44.427
> 
> 标签：iphone, crash, crash-reports, unrecognized-selector

我试图弄清楚为什么我的应用程序在用户 iphone 3GS 上启动后立即崩溃。他似乎是唯一一个有这个问题的人。任何人都可以使用它。他的 iPhone 已越狱。我的应用程序来自 AppStore。我也使用安全模式：没有变化。

他给我发了一个崩溃日志和一个系统日志：

```
Incident Identifier: [censored]
CrashReporter Key:   6e41ab4ae027f7c34965f94ceb0685ce5e6e4f26
Hardware Model:      iPhone2,1
Process:         [the APP] [2298]
Path:            /var/mobile/Applications/B1274C37-4CE0-42E2-97B3-7425032F824E/[the APP].app/[the APP]
Identifier:      [the APP]
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  crunchy [1]

Date/Time:       2012-05-05 00:19:38.590 +0200
OS Version:      iPhone OS 4.3.3 (8J2)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x345d0a1c 0x345bf000 + 72220
1   libsystem_c.dylib               0x33fbe3b4 0x33f8b000 + 209844
2   libsystem_c.dylib               0x33fb6bf8 0x33f8b000 + 179192
3   libstdc++.6.dylib               0x33d15a64 0x33cd1000 + 281188
4   libobjc.A.dylib                 0x340ce06c 0x340c8000 + 24684
5   libstdc++.6.dylib               0x33d13e36 0x33cd1000 + 273974
6   libstdc++.6.dylib               0x33d13e8a 0x33cd1000 + 274058
7   libstdc++.6.dylib               0x33d13f5a 0x33cd1000 + 274266
8   libobjc.A.dylib                 0x340ccc84 0x340c8000 + 19588
9   CoreFoundation                  0x33c8d1b8 0x33beb000 + 663992
10  CoreFoundation                  0x33c8c642 0x33beb000 + 661058
11  CoreFoundation                  0x33c03178 0x33beb000 + 98680
12  [the APP]                            0x00057eb4 0x1000 + 356020
13  [the APP]                            0x00005f82 0x1000 + 20354
14  UIKit                           0x3374781a 0x33712000 + 219162
15  UIKit                           0x33741b5e 0x33712000 + 195422
16  UIKit                           0x337167d0 0x33712000 + 18384
17  UIKit                           0x3371620e 0x33712000 + 16910
18  UIKit                           0x33715c4c 0x33712000 + 15436
19  GraphicsServices                0x3475ce70 0x34758000 + 20080
20  CoreFoundation                  0x33c60a90 0x33beb000 + 481936
21  CoreFoundation                  0x33c62838 0x33beb000 + 489528
22  CoreFoundation                  0x33c63606 0x33beb000 + 493062
23  CoreFoundation                  0x33bf3ebc 0x33beb000 + 36540
24  CoreFoundation                  0x33bf3dc4 0x33beb000 + 36292
25  UIKit                           0x33740d42 0x33712000 + 191810
26  UIKit                           0x3373e800 0x33712000 + 182272
27  ZFirewall.dylib                 0x00295c56 0x286000 + 64598
28  [the APP]                            0x00005be2 0x1000 + 19426
29  [the APP]                            0x000021e8 0x1000 + 4584

Thread 1:
0   libsystem_kernel.dylib          0x345d13ec 0x345bf000 + 74732
1   libsystem_c.dylib               0x33fbf6d8 0x33f8b000 + 214744
2   libsystem_c.dylib               0x33fbfbbc 0x33f8b000 + 215996

Thread 2 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 2:
0   libsystem_kernel.dylib          0x345d1fbc 0x345bf000 + 77756
1   libdispatch.dylib               0x3152e032 0x31528000 + 24626
2   libdispatch.dylib               0x3152f03a 0x31528000 + 28730
3   libdispatch.dylib               0x3152e5ea 0x31528000 + 26090
4   libsystem_c.dylib               0x33fbf58a 0x33f8b000 + 214410
5   libsystem_c.dylib               0x33fbfbbc 0x33f8b000 + 215996

Thread 3 name:  WebThread
Thread 3:
0   libsystem_kernel.dylib          0x345cec00 0x345bf000 + 64512
1   libsystem_kernel.dylib          0x345ce758 0x345bf000 + 63320
2   CoreFoundation                  0x33c612b8 0x33beb000 + 484024
3   CoreFoundation                  0x33c63562 0x33beb000 + 492898
4   CoreFoundation                  0x33bf3ebc 0x33beb000 + 36540
5   CoreFoundation                  0x33bf3dc4 0x33beb000 + 36292
6   WebCore                         0x3247427e 0x3246e000 + 25214
7   libsystem_c.dylib               0x33fbe30a 0x33f8b000 + 209674
8   libsystem_c.dylib               0x33fbfbb4 0x33f8b000 + 215988

Thread 0 crashed with ARM Thread State:
    r0: 0x00000000    r1: 0x00000000      r2: 0x00000001      r3: 0x00000000
    r4: 0x3fb3e48c    r5: 0x00000006      r6: 0x0014b9cc      r7: 0x2fdfdfe0
    r8: 0x00085e30    r9: 0x00000065     r10: 0x001494c0     r11: 0x00000000
    ip: 0x00000148    sp: 0x2fdfdfd4      lr: 0x33fbe3bb      pc: 0x345d0a1c
  cpsr: 0x00000010

Binary Images:
    0x1000 -    0x71fff +[the APP] armv7  <69c79b4476773f6e96ce973ef3cfd3d3> /var/mobile/Applications/B1274C37-4CE0-42E2-97B3-7425032F824E/[the APP].app/[the APP]
   0x91000 -    0x91fff +MobileSubstrate.dylib armv6  <b8a484a95b5d30c5ab59f25362558e7c> /Library/MobileSubstrate/MobileSubstrate.dylib
   0xc8000 -    0xc9fff +SubstrateLoader.dylib armv6  <885b4713fd433c3996edfc3552109041> /Library/Frameworks/CydiaSubstrate.framework/Libraries/SubstrateLoader.dylib
  0x20c000 -   0x218fff +Activator.dylib armv6  <22da11ddbca43147a9a7880a0e78c88b> /Library/MobileSubstrate/DynamicLibraries/Activator.dylib
  0x220000 -   0x25cfff +AdBlocker.dylib armv6  <07089bfdb5563a33bee5fc772477dd33> /Library/MobileSubstrate/DynamicLibraries/AdBlocker.dylib
  0x26e000 -   0x271fff  libsubstrate.dylib armv6  <65a35eed390832b08134c3cedc6eafa2> /usr/lib/libsubstrate.dylib
  0x275000 -   0x27bfff +Backgrounder.dylib arm  <65349321d416233df984e6b6c5d32373> /Library/MobileSubstrate/DynamicLibraries/Backgrounder.dylib
  0x27f000 -   0x280fff +UAFaker.dylib armv6  <c39694ae4d403293afda4fb2fa5d404e> /Library/MobileSubstrate/DynamicLibraries/UAFaker.dylib
  0x283000 -   0x283fff +UDIDFaker.dylib armv6  <b06aea841c97cc65192b03eef252f608> /Library/MobileSubstrate/DynamicLibraries/UDIDFaker.dylib
  0x286000 -   0x29bfff +ZFirewall.dylib armv6  <854bdd6749cc331fa1fb9597ad8ca28c> /Library/MobileSubstrate/DynamicLibraries/ZFirewall.dylib
  0x2a6000 -   0x2acfff +libstatusbar.dylib armv6  <fe21097b2cb83481a70c9ab877af55e3> /Library/MobileSubstrate/DynamicLibraries/libstatusbar.dylib
0x2fe00000 - 0x2fe25fff  dyld armv7  <bb9bfc7d242331d29a79adf7ef7aaa18> /usr/lib/dyld
0x31330000 - 0x3133ffff  Notes armv7  <d9c976ca976e3d029f69febd48f17601> /System/Library/PrivateFrameworks/Notes.framework/Notes
0x31348000 - 0x3137ffff  Security armv7  <6599f42a910b3b31a0e1d98c883d61cb> /System/Library/Frameworks/Security.framework/Security
0x313ae000 - 0x313cefff  AppleAccount armv7  <4e0ac5cf93b338ab8c5f34ba3c5e2ee4> /System/Library/PrivateFrameworks/AppleAccount.framework/AppleAccount
0x313cf000 - 0x313d8fff  CoreVideo armv7  <ea847e6dba2d36b1826b255c73b39539> /System/Library/Frameworks/CoreVideo.framework/CoreVideo
0x31409000 - 0x31412fff  ITSync armv7  <ba8b48d061903e4096774344448776d0> /System/Library/PrivateFrameworks/ITSync.framework/ITSync
0x31413000 - 0x3141ffff  SpringBoardServices armv7  <c68262667ac8397a949ce4e92dfec7db> /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
0x31420000 - 0x31425fff  libnotify.dylib armv7  <9d7198e91de9386a9e5ea43608a66a57> /usr/lib/system/libnotify.dylib
0x3146c000 - 0x3146dfff  libsystem_network.dylib armv7  <39bf0f48bd8539169a77f8f61cdcd4c9> /usr/lib/system/libsystem_network.dylib
0x31528000 - 0x31535fff  libdispatch.dylib armv7  <9a0511ad5ebc3db898f1f49ed1a73d34> /usr/lib/system/libdispatch.dylib
0x315fc000 - 0x31615fff  libRIP.A.dylib armv7  <4825c3e392983aba947eca06555e4480> /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
0x3166c000 - 0x31677fff  libz.1.dylib armv7  <ac706bee36593dc683fd5a96a389d72e> /usr/lib/libz.1.dylib
0x31783000 - 0x317d1fff  CoreMotion armv7  <58c353bb7e33361f881da07c72f4cdfb> /System/Library/Frameworks/CoreMotion.framework/CoreMotion
0x317d2000 - 0x317d8fff  ProtocolBuffer armv7  <f9277ee9b85b3722975ad319a323aca0> /System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer
0x31801000 - 0x31801fff  libsystem_sandbox.dylib armv7  <f47c01d627853b328e088b3fdd08e87d> /usr/lib/system/libsystem_sandbox.dylib
0x31802000 - 0x31861fff  libBLAS.dylib armv7  <0b36b2272aa33a8c9aa22d99c89d7189> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib
0x31862000 - 0x31862fff  libdnsinfo.dylib armv7  <21415179ffa03f949fa8cc851c6c31c7> /usr/lib/system/libdnsinfo.dylib
0x31970000 - 0x31971fff  libdyld.dylib armv7  <41a7b5e5d9983449ab33affed0f635ad> /usr/lib/system/libdyld.dylib
0x31972000 - 0x319a7fff  AddressBook armv7  <3f2071a77bc134cd82065eef90d4082f> /System/Library/Frameworks/AddressBook.framework/AddressBook
0x319fa000 - 0x31a32fff  IOKit armv7  <80ae313ad69d3363935c88e51a11862d> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x31a36000 - 0x31a38fff  libAccessibility.dylib armv7  <d55f1553d14831a2a5435ae27ef75ef4> /usr/lib/libAccessibility.dylib
0x31a44000 - 0x31a47fff  CertUI armv7  <9060fe03a4943ef295531feced9a17dd> /System/Library/PrivateFrameworks/CertUI.framework/CertUI
0x31a59000 - 0x31a5bfff  IOMobileFramebuffer armv7  <683f321680763e519d61541170ba2133> /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer
0x31ba0000 - 0x31ca4fff  JavaScriptCore armv7  <61a94142e2d23dafa2964190dd46e9e3> /System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
0x31cca000 - 0x31cd0fff  liblockdown.dylib armv7  <14c89b7346433c1f8675f454531f6ca3> /usr/lib/liblockdown.dylib
0x31cd1000 - 0x31cd6fff  libsystem_dnssd.dylib armv7  <c7cfe523e2d73521abc01587313ef730> /usr/lib/system/libsystem_dnssd.dylib
0x31cd7000 - 0x31cd7fff  Accelerate armv7  <7d5ad465049136afaa1f0d89aac600bc> /System/Library/Frameworks/Accelerate.framework/Accelerate
0x31d25000 - 0x31dcefff  libxml2.2.dylib armv7  <5538d3f2c7d83b88b06168488fe6326b> /usr/lib/libxml2.2.dylib
0x320eb000 - 0x32101fff  EAP8021X armv7  <9fefc0ada30435fbb3b51818c74f6cb8> /System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X
0x3210e000 - 0x32111fff  CaptiveNetwork armv7  <fc834fd33a18341ea7506587ad895703> /System/Library/PrivateFrameworks/CaptiveNetwork.framework/CaptiveNetwork
0x321a7000 - 0x321abfff  libcache.dylib armv7  <d2f7fd2a352b3cd59c564be34b53cf80> /usr/lib/system/libcache.dylib
0x321ac000 - 0x321b3fff  libbz2.1.0.dylib armv7  <0a082e1d475432959ba93aa3dbf7fb31> /usr/lib/libbz2.1.0.dylib
0x3221a000 - 0x32261fff  MessageUI armv7  <35a81f5d4eb03467a1447db80337e570> /System/Library/Frameworks/MessageUI.framework/MessageUI
0x32262000 - 0x3228bfff  MobileCoreServices armv7  <57fef84bdc17301d8bf53ba0fb967fe6> /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices
0x3228f000 - 0x322befff  SystemConfiguration armv7  <1d73b8a159363f96bb9c039655c5eae6> /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration
0x322bf000 - 0x322f2fff  AppSupport armv7  <0217468bd9f839229a47910b7816b3d5> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x3246e000 - 0x32a79fff  WebCore armv7  <07941e59d0a33f94802c16c76238fddf> /System/Library/PrivateFrameworks/WebCore.framework/WebCore
0x32ad1000 - 0x32c25fff  AudioToolbox armv7  <6619c8c13f8d328e923e797fa8d0df23> /System/Library/Frameworks/AudioToolbox.framework/AudioToolbox
0x32c28000 - 0x32d49fff  CoreGraphics armv7  <65f6c8701b563542820a26b0dfc4f6a4> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
0x32d4a000 - 0x32d4cfff  MailServices armv7  <74ae0145ef713c6d91fd8f68885b0a61> /System/Library/PrivateFrameworks/MailServices.framework/MailServices
0x32d4d000 - 0x32d4dfff  libCVMSPluginSupport.dylib armv7  <42d8aa2a31843a6e8bfff745644a7ba5> /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib
0x32d4e000 - 0x32dd8fff  Message armv7  <2cce1aa95a493906bb0227197f9e4b96> /System/Library/PrivateFrameworks/Message.framework/Message
0x32e3a000 - 0x32e41fff  libMobileGestalt.dylib armv7  <55f29184efcc3046bb833dd72a4487e1> /usr/lib/libMobileGestalt.dylib
0x32edc000 - 0x33028fff  MediaToolbox armv7  <482b13059e8a329fa5d832baede25103> /System/Library/PrivateFrameworks/MediaToolbox.framework/MediaToolbox
0x3303f000 - 0x33041fff  CrashReporterSupport armv7  <9e7efa009730322f84bbc5d8bf1ded94> /System/Library/PrivateFrameworks/CrashReporterSupport.framework/CrashReporterSupport
0x33042000 - 0x3304cfff  AccountSettings armv7  <d083fb384dc7311eb6766b9b2d2dd9c8> /System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings
0x33215000 - 0x3331dfff  CoreData armv7  <9843a401dd1d322383e3e40021cc8b95> /System/Library/Frameworks/CoreData.framework/CoreData
0x3365f000 - 0x33661fff  libgcc_s.1.dylib armv7  <a2631ac302f4310dae8367939e16b7c2> /usr/lib/libgcc_s.1.dylib
0x33662000 - 0x336fffff  AddressBookUI armv7  <e354aeb3d96e30338e90cc3638ffe81b> /System/Library/Frameworks/AddressBookUI.framework/AddressBookUI
0x33700000 - 0x33704fff  libGFXShared.dylib armv7  <a0772a32cd8b3b9194bb0c29807c1c5b> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
0x33712000 - 0x33a9ffff  UIKit armv7  <c271b78464d93cb7bf28c6e49df293ba> /System/Library/Frameworks/UIKit.framework/UIKit
0x33aa2000 - 0x33ae8fff  CoreTelephony armv7  <af7d1e770e5a3ffd8834a57fb5d40557> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x33ae9000 - 0x33b1cfff  QuickLook armv7  <29d2d981d1d6358381f5716ee37314b4> /System/Library/Frameworks/QuickLook.framework/QuickLook
0x33b39000 - 0x33b40fff  AggregateDictionary armv7  <ab9777b39e8e3026ad64dc90323cad7e> /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary
0x33b8c000 - 0x33bc0fff  VideoToolbox armv7  <570c63dc3a273a5a8c9072fd5567f5c1> /System/Library/PrivateFrameworks/VideoToolbox.framework/VideoToolbox
0x33bc1000 - 0x33beafff  ContentIndex armv7  <ecd71782cd833360872b943ecc65d203> /System/Library/PrivateFrameworks/ContentIndex.framework/ContentIndex
0x33beb000 - 0x33cd0fff  CoreFoundation armv7  <a8444f997111304c9571b3ff974b769c> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x33cd1000 - 0x33d1bfff  libstdc++.6.dylib armv7  <b2cac408951c3f3c9ba3cf563e54ce81> /usr/lib/libstdc++.6.dylib
0x33e79000 - 0x33eb8fff  libSystem.B.dylib armv7  <33dcf9a403ae3fd5971d6030ada2fcab> /usr/lib/libSystem.B.dylib
0x33f2c000 - 0x33f6efff  CoreAudio armv7  <c972fd5f8e89333ca680b9a33587f896> /System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x33f8b000 - 0x3400cfff  libsystem_c.dylib armv7  <a7077267b6743ed3bbdd86d4380c75d9> /usr/lib/system/libsystem_c.dylib
0x3400d000 - 0x3402dfff  MobileSync armv7  <4df400c4559435889eccd88db77a110c> /System/Library/PrivateFrameworks/MobileSync.framework/MobileSync
0x3402e000 - 0x34033fff  liblaunch.dylib armv7  <f5ccc8234aea3ebd9a88bd37f0fa23ae> /usr/lib/system/liblaunch.dylib
0x3406e000 - 0x3407efff  DataAccessExpress armv7  <66d9047da79a31daa887e6d84c42ecb2> /System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress
0x340c8000 - 0x3418cfff  libobjc.A.dylib armv7  <6b51e76fde9f381bb7b3bc5badbfee3a> /usr/lib/libobjc.A.dylib
0x3419d000 - 0x3420cfff  ProofReader armv7  <6d843c6aecdd37ae84baa40af8ad7e65> /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
0x3420d000 - 0x34220fff  libmis.dylib armv7  <529ea6e3a87230ce9f6cf3285c22429c> /usr/lib/libmis.dylib
0x34229000 - 0x3422cfff  ApplePushService armv7  <015c68c15621348db9f6a012499170e1> /System/Library/PrivateFrameworks/ApplePushService.framework/ApplePushService
0x34270000 - 0x3435dfff  libiconv.2.dylib armv7  <f4146ce07e3031ea8a81fa5516fd77d0> /usr/lib/libiconv.2.dylib
0x343a7000 - 0x343e7fff  CoreMedia armv7  <8e0570582ba535bfa74f1f00eef64376> /System/Library/Frameworks/CoreMedia.framework/CoreMedia
0x343e8000 - 0x34439fff  libsqlite3.dylib armv7  <8a41cc6a6d9332308bc415d27577fd24> /usr/lib/libsqlite3.dylib
0x3443d000 - 0x34440fff  ActorKit armv7  <f7aa6cdd654231988aafcf448978f450> /System/Library/PrivateFrameworks/ActorKit.framework/ActorKit
0x3445d000 - 0x344a3fff  CoreLocation armv7  <c1924042951e3df98515c7bf36093c1c> /System/Library/Frameworks/CoreLocation.framework/CoreLocation
0x345bf000 - 0x345d6fff  libsystem_kernel.dylib armv7  <a06ec84e53bf32098b63c0caebdb45b6> /usr/lib/system/libsystem_kernel.dylib
0x345db000 - 0x34681fff  Celestial armv7  <7fbd02fa664b33babaf0327c320d1491> /System/Library/PrivateFrameworks/Celestial.framework/Celestial
0x34682000 - 0x34685fff  IOSurface armv7  <ad50e71624583d06b891344d832f9b08> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
0x34689000 - 0x346e2fff  EventKit armv7  <0d4e597ee229337183e96e921a72e30a> /System/Library/Frameworks/EventKit.framework/EventKit
0x346e3000 - 0x34720fff  CoreText armv7  <fb6a72faec2330c4b2cd33c2e9c59588> /System/Library/Frameworks/CoreText.framework/CoreText
0x3474f000 - 0x34757fff  MobileBluetooth armv7  <63f11756c4aa3262b2317ff3b8e2a977> /System/Library/PrivateFrameworks/MobileBluetooth.framework/MobileBluetooth
0x34758000 - 0x34764fff  GraphicsServices armv7  <ff78a9636e933f0dbd222f8d26209788> /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices
0x34768000 - 0x347abfff  ManagedConfiguration armv7  <f790c26852cb3cf298abe56bc9a3940b> /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration
0x347af000 - 0x347ccfff  libsystem_info.dylib armv7  <48016be86e3f3cd9aeee1c6590e1ac6f> /usr/lib/system/libsystem_info.dylib
0x348a6000 - 0x348aafff  AssetsLibraryServices armv7  <e1cbfe599c96369ca4bdb0dd99d3cd9f> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
0x348ab000 - 0x348b4fff  MobileWiFi armv7  <03d98d5cf6383695aa7d8a88da52f410> /System/Library/PrivateFrameworks/MobileWiFi.framework/MobileWiFi
0x34929000 - 0x34937fff  OpenGLES armv7  <5a76beaeaa013f0cbf16e5cb154598ab> /System/Library/Frameworks/OpenGLES.framework/OpenGLES
0x34a51000 - 0x34a89fff  libCGFreetype.A.dylib armv7  <ccea634795153164a681f0f311f4461d> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dylib
0x34ae2000 - 0x34b10fff  MIME armv7  <60de1fe0bbb134d788c09f7c34b1caa4> /System/Library/PrivateFrameworks/MIME.framework/MIME
0x34b45000 - 0x34c64fff  Foundation armv7  <09ff368178c5321c9715b9c8d491d53f> /System/Library/Frameworks/Foundation.framework/Foundation
0x34c65000 - 0x34c67fff  MobileInstallation armv7  <94b6d6c5d9883175af26764567528127> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x34c80000 - 0x34c95fff  libresolv.9.dylib armv7  <e92cfbb83f7b330db19181e797bb3f7b> /usr/lib/libresolv.9.dylib
0x34c96000 - 0x34c9bfff  MobileKeyBag armv7  <8c35c090bc373cb181fc26b961b8dba5> /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x366ef000 - 0x3670ffff  PrintKit armv7  <e5a01ca9083a36afacc08611a398e2ad> /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
0x36806000 - 0x368b5fff  QuartzCore armv7  <ef9632c9781f3101916b65e9faae1579> /System/Library/Frameworks/QuartzCore.framework/QuartzCore
0x368c6000 - 0x368f9fff  iCalendar armv7  <34ce1957082f3518b5740ac33cfc92eb> /System/Library/PrivateFrameworks/iCalendar.framework/iCalendar
0x36951000 - 0x36961fff  WebBookmarks armv7  <6956561235333e74b8ff316cb2edc93e> /System/Library/PrivateFrameworks/WebBookmarks.framework/WebBookmarks
0x36962000 - 0x36a21fff  CFNetwork armv7  <b09e0d53de9f3bc8bde494780f3cdd4f> /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x36b19000 - 0x36b47fff  DataAccess armv7  <3a2e67aa1d8834b7a8fc2fbb56654b15> /System/Library/PrivateFrameworks/DataAccess.framework/DataAccess
0x36c05000 - 0x36c14fff  MobileDeviceLink armv7  <563a09bcdb2f32369b1e22f53f58273a> /System/Library/PrivateFrameworks/MobileDeviceLink.framework/MobileDeviceLink
0x36ce3000 - 0x36ce4fff  libsystem_blocks.dylib armv7  <ccc041df3de73eafb7a59e74cdb1702b> /usr/lib/system/libsystem_blocks.dylib
0x36d08000 - 0x36d0dfff  libcopyfile.dylib armv7  <e57c2b9054b831d9a37119baaa4947cb> /usr/lib/system/libcopyfile.dylib
0x36efc000 - 0x36efdfff  libremovefile.dylib armv7  <e8858a499d663e6a9e3c188521273cc1> /usr/lib/system/libremovefile.dylib
0x36efe000 - 0x36f0bfff  libbsm.0.dylib armv7  <0a1e2bb78d5138419ecad8ba0fe42fdd> /usr/lib/libbsm.0.dylib
0x3704f000 - 0x37061fff  PersistentConnection armv7  <659ea9d5b13d3fefb37acff09016a69c> /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection
0x3709e000 - 0x370d1fff  StoreServices armv7  <d526715648f435c3aac4c42953e76d20> /System/Library/PrivateFrameworks/StoreServices.framework/StoreServices
0x37154000 - 0x37155fff  DataMigration armv7  <42e9e87a4e0735c3837e27d4f2adcf55> /System/Library/PrivateFrameworks/DataMigration.framework/DataMigration
0x371ee000 - 0x37243fff  libvDSP.dylib armv7  <0221caba81a235c5a896a835e2aac047> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
0x37244000 - 0x37531fff  libLAPACK.dylib armv7  <b855d60dac01310495453bddfd004f0d> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib
0x3753b000 - 0x37577fff  libGLImage.dylib armv7  <9d97699e44ee3651ba4ac37e5adec35b> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x37626000 - 0x376d7fff  WebKit armv7  <eb9a0d69c64b3127b2bffd71641add3b> /System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x37741000 - 0x37742fff  CoreSurface armv7  <7b83cd757da73e6e826693c29296d3fa> /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
0x37859000 - 0x3785cfff  libmacho.dylib armv7  <43311c113a9d3182b7d007129819f029> /usr/lib/system/libmacho.dylib
0x3785d000 - 0x37977fff  libicucore.A.dylib armv7  <bada0c2725bb31a483d5adf9aaf1f8df> /usr/lib/libicucore.A.dylib
0x37978000 - 0x37978fff  vecLib armv7  <0c60cd0a60f43d2791d36cb357d30e3c> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
0x379ae000 - 0x37a43fff  ImageIO armv7  <d520e3241d1130e8ac1375ee0f2c1095> /System/Library/Frameworks/ImageIO.framework/ImageIO
0x37a72000 - 0x37ac0fff  GMM armv7  <049361f664eb3f30b0d25cd56ffc1f0f> /System/Library/PrivateFrameworks/GMM.framework/GMM
0x37ac1000 - 0x37ae0fff  Bom armv7  <b178e3efb4d733c694bd5a55e57a314f> /System/Library/PrivateFrameworks/Bom.framework/Bom 
```

系统日志：

```
May  5 00:19:31 [customer iphone] syslogd[2296]: --- syslogd restarted ---
May  5 00:19:36 [customer iphone] [the APP][2298]: MS:Notice: Installing: de.creak.[the APP] [[the APP]] (550.58)
May  5 00:19:36 [customer iphone] [the APP][2298]: MS:Notice: Loading: /Library/MobileSubstrate/DynamicLibraries/Activator.dylib
May  5 00:19:36 [customer iphone] [the APP][2298]: MS:Notice: Loading: /Library/MobileSubstrate/DynamicLibraries/AdBlocker.dylib
May  5 00:19:37 [customer iphone] UIKitApplication:de.creak.[the APP][0x5134][2298]: objc[2298]: class `ADManager' not linked into application
May  5 00:19:37 [customer iphone] [the APP][2298]: MS:Warning: nil class argument
May  5 00:19:37 [customer iphone] UIKitApplication:de.creak.[the APP][0x5134][2298]: objc[2298]: class `ADSessionManager' not linked into application
May  5 00:19:37 [customer iphone] [the APP][2298]: MS:Warning: nil class argument
May  5 00:19:37 [customer iphone] UIKitApplication:de.creak.[the APP][0x5134][2298]: objc[2298]: class `ADSession' not linked into application
May  5 00:19:37 [customer iphone] [the APP][2298]: MS:Warning: nil class argument
May  5 00:19:37 [customer iphone] kernel[0]: crunchy[2298] Builtin profile: container (sandbox)
May  5 00:19:37 [customer iphone] kernel[0]: crunchy[2298] Container: /private/var/mobile/Applications/B1274C37-4CE0-42E2-97B3-7425032F824E [69] (sandbox)
May  5 00:19:37 [customer iphone] [the APP][2298]: MS:Notice: Loading: /Library/MobileSubstrate/DynamicLibraries/Backgrounder.dylib
May  5 00:19:37 [customer iphone] [the APP][2298]: MS:Notice: Loading: /Library/MobileSubstrate/DynamicLibraries/ContactPrivacy.dylib
May  5 00:19:37 [customer iphone] [the APP][2298]: MS:Error: dlopen(/Library/MobileSubstrate/DynamicLibraries/ContactPrivacy.dylib, 9): Symbol not found: _ABCGetPersonCountInSourceShowingLinks
May  5 00:19:37 [customer iphone] [the APP][2298]: MS:Notice: Loading: /Library/MobileSubstrate/DynamicLibraries/UAFaker.dylib
May  5 00:19:37 [customer iphone] [the APP][2298]: MS:Notice: Loading: /Library/MobileSubstrate/DynamicLibraries/UDIDFaker.dylib
May  5 00:19:37 [customer iphone] [the APP][2298]: *** udidfaker: Loading UDID Faker into de.creak.[the APP]
May  5 00:19:37 [customer iphone] [the APP][2298]: MS:Notice: Loading: /Library/MobileSubstrate/DynamicLibraries/ZFirewall.dylib
May  5 00:19:37 [customer iphone] [the APP][2298]: MS:Notice: Loading: /Library/MobileSubstrate/DynamicLibraries/libstatusbar.dylib
May  5 00:19:38 [customer iphone] [the APP][2298]: *** Firewall: hooking into de.creak.[the APP]
May  5 00:19:38 [customer iphone] [the APP][2298]: -[UINavigationController didMoveToParentViewController:]: unrecognized selector sent to instance 0x1494c0
May  5 00:19:38 [customer iphone] [the APP][2298]: *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UINavigationController didMoveToParentViewController:]: unrecognized selector sent to instance 0x1494c0'
May  5 00:19:38 [customer iphone] UIKitApplication:de.creak.[the APP][0x5134][2298]: terminate called after throwing an instance of '
May  5 00:19:38 [customer iphone] UIKitApplication:de.creak.[the APP][0x5134][2298]: NSException
May  5 00:19:38 [customer iphone] UIKitApplication:de.creak.[the APP][0x5134][2298]: '
May  5 00:19:38 [customer iphone] ReportCrash[2299]: MS:Notice: Installing: (null) [ReportCrash] (550.58)
May  5 00:19:38 [customer iphone] ReportCrash[2299]: MS:Notice: Loading: /Library/MobileSubstrate/DynamicLibraries/UDIDFaker.dylib
May  5 00:19:38 [customer iphone] ReportCrash[2299]: *** udidfaker: Loading UDID Faker into (null)
May  5 00:19:38 [customer iphone] ReportCrash[2299]: Formulating crash report for process [the APP][2298]
May  5 00:19:38 [customer iphone] com.apple.launchd[1] (UIKitApplication:de.creak.[the APP][0x5134][2298]): (UIKitApplication:de.creak.[the APP][0x5134]) Job appears to have crashed: Abort trap: 6
May  5 00:19:39 [customer iphone] ReportCrash[2299]: Saved crashreport to /var/mobile/Library/Logs/CrashReporter/[the APP]_2012-05-05-001938_[customer iphone].plist using uid: 0 gid: 0, synthetic_euid: 501 egid: 0 
```

它的接缝崩溃：

```
-[UINavigationController didMoveToParentViewController:]: unrecognized selector sent to instance 0x1494c0 
```

但我不知道为什么。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T00:00:51.467

无法识别的选择器是当您尝试调用不存在的方法时。`didMoveToParentViewController:`仅适用于 IOS 5.0 及更高版本，并且该用户似乎只有 4.3.3 版本。最好将所需的最低版本更改为 5.0。

# actionscript-3 - 将 Flex 应用程序转换为视图

> ID：10466842
> 
> 赞同：1
> 
> 时间：2012-05-05T23:32:11.260
> 
> 标签：actionscript-3, apache-flex, flex4.5

我正在尝试将 Flexlib 的调度示例 1 转换为视图。

[https://github.com/flex-users/flexlib](https://github.com/flex-users/flexlib)

当我将它放在视图中时，我遇到了这一行的问题：

```
<flexlib:ScheduleViewer id="scheduleViewer"  
            width="600" height="400" 
            dataProvider="{dataProvider }"       
            startDate="{startDate}" endDate="{endDate}" /> 
```

我注意到当我有这条线时：

```
xmlns:flexlib="http://code.google.com/p/flexlib/" 
```

我收到了这个错误：

```
Could not resolve <flexlib:ScheduleViewer> to a component implementation. 
```

当我将该行更改为：

```
xmlns:flexlib="libs.flexlib.scheduling.*" 
```

我收到此错误：

```
1046: Type was not found or was not a compile-time constant: ScheduleViewer. 
```

此外，我已将 flexlib.swc 放入我的 libs 文件夹中。这是整个代码：

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:mx="library://ns.adobe.com/flex/mx"  
    xmlns:s="library://ns.adobe.com/flex/spark"
    xmlns:flexlib="libs.flexlib.scheduling.*"
    creationComplete="onCreationComplete();">

<fx:Style>
    .myEntryStyle {
        fillAlphas: 1, 1;
        fillColors: #ff0000, #990000;
        timeStyleName: "myTimeStyle";
        color: #000000;
    }
    .myTimeStyle {
        fontSize: 9;
        fontWeight: bold;
        color: #ffff00;
    }
</fx:Style>

<fx:Script>
    <![CDATA[
        import flexlib.scheduling.scheduleClasses.SimpleScheduleEntry;
        import flexlib.scheduling.util.DateUtil;
        import mx.collections.ArrayCollection;

        [Bindable]         
        private var dataProvider : ArrayCollection;         
        [Bindable]
        private var startDate : Date;
        [Bindable]
        private var endDate : Date;

        private function onCreationComplete() : void
        {
            setTimeframe();
            initDataProvider();
        }

        private function setTimeframe() : void
        {
            startDate = DateUtil.clearTime( new Date() );
            endDate = getEndDate( startDate );
        }

        private function getEndDate( startDate : Date ) : Date
        {
            var duration : Number = DateUtil.DAY_IN_MILLISECONDS * 1;
            var endDate : Date = new Date( startDate.getTime() + duration );
            return endDate;
        }

        private function initDataProvider() : void
        {
            var entries : ArrayCollection = new ArrayCollection();
            var entry : SimpleScheduleEntry = new SimpleScheduleEntry();
            entry.startDate = DateUtil.clearTime( new Date() );
            entry.endDate = new Date( entry.startDate.getTime() + DateUtil.HOUR_IN_MILLISECONDS * 5 );
            entry.label = "Our first entry!";
            entries.addItem( entry );

            entry = new SimpleScheduleEntry();
            entry.startDate = DateUtil.setTime( new Date(), DateUtil.HOUR_IN_MILLISECONDS );
            entry.endDate = new Date( entry.startDate.getTime() + DateUtil.HOUR_IN_MILLISECONDS * 15 );
            entry.label = "Our second entry!";
            entries.addItem( entry );

            entry = new SimpleScheduleEntry();
            entry.startDate = DateUtil.setTime( new Date(), DateUtil.HOUR_IN_MILLISECONDS * 13 );
            entry.endDate = new Date( entry.startDate.getTime() + DateUtil.HOUR_IN_MILLISECONDS * 5 );
            entry.label = "Our third entry!";
            entries.addItem( entry );

            dataProvider = entries;
        }
    ]]>
</fx:Script>

<flexlib:ScheduleViewer id="scheduleViewer"  
                        width="600" height="400" 
                        dataProvider="{ dataProvider }"       
                        startDate="{ startDate }" endDate="{ endDate }" />
    </s:View> 
```

有人知道我将此示例转换为视图的问题是什么吗？

# c++ - Fruchterman Reingold 布局不收敛

> ID：10466843
> 
> 赞同：3
> 
> 时间：2012-05-05T23:32:36.573
> 
> 标签：c++, boost, boost-graph

我想使用 BGL 布局 RNA 折叠图，它具有保证的平面结构，并且所有边都应该具有相同的长度（有两种边：正常序列和红色键），如下所示：

[rna 二级结构 http://www.ncrna.org/frnadb/sec_structure/png/FR096703.png](http://www.ncrna.org/frnadb/sec_structure/png/FR096703.png)

```
namespace boost {
    enum vertex_position_t { vertex_position };
    BOOST_INSTALL_PROPERTY(vertex, position);
};

template<class PairIterator>
void layout(std::string seq, PairIterator begin, PairIterator end) {
    using namespace boost; using namespace std;

    // backbone edges + bonding edges
    vector<pair<size_t,size_t>> edge_list(begin, end);
    for(size_t i = 0 ; i < seq.size() - 1 ; i++)
        edge_list.push_back(make_pair(i, i + 1));

    typedef rectangle_topology<> topology;
    typedef topology::point_type point;
    boost::minstd_rand random;
    topology space(random, -1000, -1000, 2000, 2000);

    adjacency_list<vecS, vecS, undirectedS,
        property<vertex_position_t, point>
    > g(edge_list.begin(), edge_list.end(), seq.size());

    random_graph_layout(g, get(vertex_position, g), space);
    fruchterman_reingold_force_directed_layout(g, get(vertex_position, g), space,
        cooling(linear_cooling<double>(100)));

    // draw
} 
```

但是，这给了我一个非常随机的布局（冷却时间为 100、200、400）。更长的冷却时间只需将顶点压入角落（图像显示完整的布局）。边缘似乎一直太长......

![输出](../Images/f598aa5de424d43efb73b4eb2d151b1d.png)

我想为边缘指定一个目标长度，并且在达到一定余量之前不要停止模拟。

我的代码是从 boost 示例中拼凑而成的，但我不需要坚持属性映射等，我只想要一个布局而不必求助于 GraphViz。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T19:54:55.987

看起来布局开始在您最右侧的图像中起作用，但是空间太小而无法展开成正确的形状：也许尝试使用更紧凑的随机布局开始？

或者更强的吸引力也可能有所帮助。请注意，根据[文档](http://www.boost.org/doc/libs/1_49_0/libs/graph/doc/fruchterman_reingold.html)，默认吸引力函数`square_distance_attractive_force` *将*吸引力除以边缘描述符 --- 因此较小的边缘描述符意味着更接近的顶点。

* * *

您可以通过考虑到，对于布局良好的平面图，每个顶点仅靠近它通过边链接的顶点来计算边的“目标长度”（某种程度）。这与我们有两个由一条边连接的顶点的简单情况非常相似（如果你有一个规则的顶点网格，它不会超过 4 倍）：

*   （默认）排斥力函数`(vertex descriptor value, V)^2/distance`适用于所有顶点对。
*   （默认）吸引力函数`distance^2/(edge descriptor value, E)`适用于由边连接的顶点。

在以下情况下，它们处于平衡状态：

V ² / 距离 = 距离² / E

所以：

距离 = V ^((2/3)) E ^((1/3))

# c++ - 使用 boost singleton_pool 的自定义分配比默认值慢

> ID：10466845
> 
> 赞同：5
> 
> 时间：2012-05-05T23:32:52.087
> 
> 标签：c++, memory-management, memory-pool, boost-pool

我为 MyOrder 类编写了自定义运算符 new 和 operator delete。我正在使用 boost::singleton 池分配内存。这是测试性能的程序，

```
#include <boost/pool/singleton_pool.hpp>
#include <boost/progress.hpp>
#include <iostream>
#include <new>
#include <vector>

class MyOrder{
    std::vector<int> v1_;
    std::vector<double> v2_;

    std::string s1_;
    std::string s2_;

public:
    MyOrder(std::string s1, std::string s2): s1_(s1), s2_(s2) {}

    ~MyOrder(){}

    static void * operator new(size_t size); 
    static void operator delete(void * rawMemory) throw();
};

struct MyOrderTag{};
typedef boost::singleton_pool<MyOrderTag, sizeof(MyOrder)> MyOrderPool; 

void* MyOrder:: operator new(size_t size)
{
    if (size != sizeof(MyOrder)) 
        return ::operator new(size);

    while(true){
        void * ptr = MyOrderPool::malloc();
        if (ptr != NULL) return ptr;

        std::new_handler globalNewHandler = std::set_new_handler(0);
        std::set_new_handler(globalNewHandler);

        if(globalNewHandler)  globalNewHandler();
        else throw std::bad_alloc();

    }
}

void MyOrder::operator delete(void * rawMemory) throw()
{
    if(rawMemory == 0) return; 
    MyOrderPool::free(rawMemory);
}

int main()
{
    MyOrder* mo = NULL; 
    std::vector<MyOrder*> v;
    v.reserve(100000);

    boost::progress_timer howlong;
    for(int i = 0; i< 100000; ++i)
    {
        mo = new MyOrder("Sanket", "Sharma");
        v.push_back(mo);
    }

    for (std::vector<MyOrder*>::const_iterator it = v.begin(); it != v.end(); ++it)
    {
        delete *it;
    }
    return 0;
} 
```

我使用 -O2 标志编译了上述程序，并在我的 Macbook 上运行 2.26 GHz Intel Core 2 Duo，耗时 0.16 秒。然后我注释掉我声明和定义自定义运算符 new 和 operator delete 的行，使用 -O2 标志重新编译并在同一台机器上运行，耗时 0.13 秒。

使用 singleton_pool 为相同大小的对象分配和释放内存应该会加快速度。为什么让它变慢？还是创建池的开销抵消了在这个小程序中获得的性能优势？

更新：

我用一个 int 和一个 double 替换了两个 std::string 变量，这次在 3.0 GHZ AMD Phenom(tm) II X4 945 处理器上运行了两个程序，每个程序进行了 100000000 次（即之前的 1000 次）迭代。使用自定义内存分配的一项需要 3.2 秒，而使用默认内存分配的一项需要 8.26 秒。所以这次自定义内存分配获胜。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T23:36:18.103

我认为你的数字毫无意义。如果你只检查一次运行时，你发现`0.13`vs `0.16`seconds than 那是完全没有意义的，并且由开销决定。

您必须运行要测试数千次的代码段，然后比较数据以排除开销。

不，实际上，`0.03`您的进程被关闭等很容易解释秒数差异。

# mysql - $wpdb->get_results 问题

> ID：10466847
> 
> 赞同：2
> 
> 时间：2012-05-05T23:33:02.240
> 
> 标签：mysql, wordpress

我有一个 $wpdb->get_results 查询，如下所示：

```
"SELECT *
 FROM $wpdb->posts
 WHERE post_author = $current_user_id
   AND post_status = 'publish'
   AND post_type = 'event'
 ORDER BY post_date DESC" 
```

它转化为：

```
SELECT *
FROM wp_posts
WHERE post_author = 5
  AND post_status = 'publish'
  AND post_type = 'event'
ORDER BY post_date DESC 
```

如果我通过 phpmyadmin 在数据库中运行该确切的查询，它返回的结果非常好。然而，在 wordpress 实现中，它不返回任何内容。我已将其缩小到`AND post_type = 'event'`似乎正在破坏它的部分。当我离开查询时，它返回结果就好了

有谁知道为什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T20:37:28.613

据我了解，wordpress 有 5 种主要的帖子类型：（帖子、页面、附件、修订和 nav_menu_item ）

为了查找“事件”的 post_type，您需要使用该`register_post_type`函数注册此自定义帖子类型。

以下是如何创建名为“事件”的自定义帖子类型的示例

```
add_action( 'init', 'create_post_type' );
function create_post_type() {
    register_post_type( 'event',
        array(
            'labels' => array('name' => __( 'events' ),
                    'singular_name' => __( 'event' )),
            'public' => true,
        )
    );
} 
```

注意：`register_post_type($post_type, $args)`默认情况下采用 2 个参数。

`$post_type`- 是您的自定义帖子类型的名称。

`$args`- 是用于修改帖子类型默认行为的任意数量的参数。这通常应该是一个数组。

该`'labels'`参数以一般和单数形式描述帖子类型的名称。如果您更喜欢帖子类型的通用版本和单数版本，请使用显示的方法。否则，默认值就是`$post_type name`您提供的名称。

`'public'`参数说明帖子类型是否旨在供公众使用。

您还可以编写一个没有很多标签的简化版本，例如：

```
add_action( 'init', 'create_post_type' );
function create_post_type() {
    register_post_type( 'event', array( 'public' => true, 'label' => 'events' ) );
} 
```

另请注意，这`create_post_type`是您可以调用 haha​​ 的函数的自定义名称`my_super_cool_new_custom_original_post_type_creating_function`或对您的需求进行描述的名称。

在我使用的简化版本中`label`，它采用单个参数，这是帖子类型的通用名称。如果您想为您的帖子类型添加描述，您可以在名称的括号内执行此操作，并将一个下划线替换为 x，例如：

```
add_action( 'init', 'create_post_type' );
register_post_type( 'event',
    array(
        'labels' => array('name' => _x( 'events' , 'post type general name' ),
                'singular_name' => _x( 'event' , 'post type singular name' )),
        'public' => true,
    )
); 
```

警告：不要`register_post_type`在初始化之前使用。

现在，如果您已完成所有这些操作并且无法访问 post_type，请确保您已向其中添加了 public 参数。:)

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T18:16:03.007

尝试使用 `post_type like %event%`

您可以通过 WP_Query query_posts 执行相同的操作，这不是一个需要使用 $wpdb 的复杂查询，但我可能错了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T18:10:38.720

我遇到的问题来自新线路。由于某种原因，编辑器或数据库配置错误，因为它从未发生在我身上。

一旦我将查询更改为在同一行上，它就开始工作了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-01T09:26:32.800

试试下面的代码：

```
$get_post = $wpdb->query("SELECT * FROM wp_posts
WHERE post_author = ".$current_user_id."
  AND post_status = 'publish'
  AND post_type = 'event'
ORDER BY post_date DESC
"); 
```

或者

```
$wpdb->get_results("SELECT *
 FROM $wpdb->posts
 WHERE post_author = $current_user_id
   AND post_status = 'publish'
   AND post_type = 'event'
 ORDER BY post_date DESC", OBJECT); 
```

# scheme - 将文件转换为方案中的列表或字符串

> ID：10466848
> 
> 赞同：9
> 
> 时间：2012-05-05T23:33:03.803
> 
> 标签：scheme, racket

我在获取文本文件并将其转换为列表或字符串时遇到了一些问题。

假设我有“blah.txt”，其中包含：

```
3 + 4 
```

现在我想调用我知道可以通过

```
(define in (open-input-file "blah.txt")) 
```

我该从哪里拿走它？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-06T00:06:12.907

看一下[`file->list`](http://docs.racket-lang.org/reference/Filesystem.html?q=file-%3Elist#%28def._%28%28lib._racket%2Ffile..rkt%29._file-~3elist%29%29)函数 or [`file->lines`](http://docs.racket-lang.org/reference/Filesystem.html?q=file-%3Estring#%28def._%28%28lib._racket%2Ffile..rkt%29._file-~3estring%29%29)，它应该可以在 Racket 中执行您想要的操作。也就是说，类似的东西`(file->lines "blah.txt")`会给你一个文件中的行列表。更一般地，查看I/O 上的[指南条目。](http://docs.racket-lang.org/guide/i_o.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-30T09:12:44.360

给定文件名，[file->string](http://docs.racket-lang.org/reference/Filesystem.html#%28def._%28%28lib._racket%2Ffile..rkt%29._file-~3estring%29%29)加载文件并将内容作为字符串返回。

# jquery - 沿日期和时间滚动的 Javascript 滑块

> ID：10466851
> 
> 赞同：7
> 
> 时间：2012-05-05T23:34:41.507
> 
> 标签：jquery, jquery-ui, uislider, datetimepicker

我已经看到了一些很好的选择日期范围的 jQuery 滑块示例：http: [//ghusse.github.com/jQRangeSlider/stable/demo/](http://ghusse.github.com/jQRangeSlider/stable/demo/)

和时间范围： http: [//marcneuwirth.com/blog/2011/05/22/revisiting-the-jquery-ui-time-slider/](http://marcneuwirth.com/blog/2011/05/22/revisiting-the-jquery-ui-time-slider/)

但我正在寻找能够选择日期范围为月、日、分钟的东西。能够将它同时用作日期范围选择器和普通滑块会很棒。

有没有人见过这样的实现？使用 Unix 时间作为我的值的普通 jQuery UI 滑块是否有意义？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-01-23T17:26:48.167

这是我的小提琴（我也在寻找一些东西，然后决定创建一个）：http: [//jsfiddle.net/Lcrsd3jt/45/](http://jsfiddle.net/Lcrsd3jt/45/)

html:

```
 <script type='text/javascript' src='//code.jquery.com/jquery-2.0.2.js'></script>
  <script type="text/javascript" src="//code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
  <link rel="stylesheet" type="text/css" href="//code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css">
    <div id="time-range">
        <p>Time Range: <span class="slider-time"></span> - <span class="slider-time2"></span>
        </p>
        <div class="sliders_step1">
            <div id="slider-range"></div>
        </div>
    </div> 
```

js：

```
var dt_from = "2014/11/01 00:34:44";
var dt_to = "2014/11/24 16:37:43";

$('.slider-time').html(dt_from);
$('.slider-time2').html(dt_to);
var min_val = Date.parse(dt_from)/1000;
var max_val = Date.parse(dt_to)/1000;

function zeroPad(num, places) {
  var zero = places - num.toString().length + 1;
  return Array(+(zero > 0 && zero)).join("0") + num;
}
function formatDT(__dt) {
    var year = __dt.getFullYear();
    var month = zeroPad(__dt.getMonth()+1, 2);
    var date = zeroPad(__dt.getDate(), 2);
    var hours = zeroPad(__dt.getHours(), 2);
    var minutes = zeroPad(__dt.getMinutes(), 2);
    var seconds = zeroPad(__dt.getSeconds(), 2);
    return year + '-' + month + '-' + date + ' ' + hours + ':' + minutes + ':' + seconds;
};

$("#slider-range").slider({
    range: true,
    min: min_val,
    max: max_val,
    step: 10,
    values: [min_val, max_val],
    slide: function (e, ui) {
        var dt_cur_from = new Date(ui.values[0]*1000); //.format("yyyy-mm-dd hh:ii:ss");
        $('.slider-time').html(formatDT(dt_cur_from));

        var dt_cur_to = new Date(ui.values[1]*1000); //.format("yyyy-mm-dd hh:ii:ss");                
        $('.slider-time2').html(formatDT(dt_cur_to));
    }
}); 
```

CSS：

```
#time-range p {
    font-family:"Arial", sans-serif;
    font-size:14px;
    color:#333;
}
.ui-slider-horizontal {
    height: 8px;
    background: #D7D7D7;
    border: 1px solid #BABABA;
    box-shadow: 0 1px 0 #FFF, 0 1px 0 #CFCFCF inset;
    clear: both;
    margin: 8px 0;
    -webkit-border-radius: 6px;
    -moz-border-radius: 6px;
    -ms-border-radius: 6px;
    -o-border-radius: 6px;
    border-radius: 6px;
}
.ui-slider {
    position: relative;
    text-align: left;
}
.ui-slider-horizontal .ui-slider-range {
    top: -1px;
    height: 100%;
}
.ui-slider .ui-slider-range {
    position: absolute;
    z-index: 1;
    height: 8px;
    font-size: .7em;
    display: block;
    border: 1px solid #5BA8E1;
    box-shadow: 0 1px 0 #AAD6F6 inset;
    -moz-border-radius: 6px;
    -webkit-border-radius: 6px;
    -khtml-border-radius: 6px;
    border-radius: 6px;
    background: #81B8F3;
    background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgi…pZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JhZCkiIC8+PC9zdmc+IA==');
    background-size: 100%;
    background-image: -webkit-gradient(linear, 50% 0, 50% 100%, color-stop(0%, #A0D4F5), color-stop(100%, #81B8F3));
    background-image: -webkit-linear-gradient(top, #A0D4F5, #81B8F3);
    background-image: -moz-linear-gradient(top, #A0D4F5, #81B8F3);
    background-image: -o-linear-gradient(top, #A0D4F5, #81B8F3);
    background-image: linear-gradient(top, #A0D4F5, #81B8F3);
}
.ui-slider .ui-slider-handle {
    border-radius: 50%;
    background: #F9FBFA;
    background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgi…pZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JhZCkiIC8+PC9zdmc+IA==');
    background-size: 100%;
    background-image: -webkit-gradient(linear, 50% 0, 50% 100%, color-stop(0%, #C7CED6), color-stop(100%, #F9FBFA));
    background-image: -webkit-linear-gradient(top, #C7CED6, #F9FBFA);
    background-image: -moz-linear-gradient(top, #C7CED6, #F9FBFA);
    background-image: -o-linear-gradient(top, #C7CED6, #F9FBFA);
    background-image: linear-gradient(top, #C7CED6, #F9FBFA);
    width: 22px;
    height: 22px;
    -webkit-box-shadow: 0 2px 3px -1px rgba(0, 0, 0, 0.6), 0 -1px 0 1px rgba(0, 0, 0, 0.15) inset, 0 1px 0 1px rgba(255, 255, 255, 0.9) inset;
    -moz-box-shadow: 0 2px 3px -1px rgba(0, 0, 0, 0.6), 0 -1px 0 1px rgba(0, 0, 0, 0.15) inset, 0 1px 0 1px rgba(255, 255, 255, 0.9) inset;
    box-shadow: 0 2px 3px -1px rgba(0, 0, 0, 0.6), 0 -1px 0 1px rgba(0, 0, 0, 0.15) inset, 0 1px 0 1px rgba(255, 255, 255, 0.9) inset;
    -webkit-transition: box-shadow .3s;
    -moz-transition: box-shadow .3s;
    -o-transition: box-shadow .3s;
    transition: box-shadow .3s;
}
.ui-slider .ui-slider-handle {
    position: absolute;
    z-index: 2;
    width: 22px;
    height: 22px;
    cursor: default;
    border: none;
    cursor: pointer;
}
.ui-slider .ui-slider-handle:after {
    content:"";
    position: absolute;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    top: 50%;
    margin-top: -4px;
    left: 50%;
    margin-left: -4px;
    background: #30A2D2;
    -webkit-box-shadow: 0 1px 1px 1px rgba(22, 73, 163, 0.7) inset, 0 1px 0 0 #FFF;
    -moz-box-shadow: 0 1px 1px 1px rgba(22, 73, 163, 0.7) inset, 0 1px 0 0 white;
    box-shadow: 0 1px 1px 1px rgba(22, 73, 163, 0.7) inset, 0 1px 0 0 #FFF;
}
.ui-slider-horizontal .ui-slider-handle {
    top: -.5em;
    margin-left: -.6em;
}
.ui-slider a:focus {
    outline:none;
} 
```

您需要将日期时间视为时间戳，只需使用标准滑块作为整数，在滑块移动事件中动态重新计算输入（或其他任何内容）的日期时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T21:20:04.730

万一有人找到这个线程，我可以通过将时间戳转换为 unix 时间然后按月分解我的数据来实现这一点。当前月份的滑块会扩展到屏幕的全宽，因此您可以通过滑动尽可能多地进行选择。箭头键完成其余的工作。

# sql - 使用 SQL 按组和排名识别结果

> ID：10466852
> 
> 赞同：5
> 
> 时间：2012-05-05T23:34:53.957
> 
> 标签：sql, postgresql, grouping, window-functions

我有一个具有以下结构的表：

```
id          timestamp       area
717416915   18:30:53.063    25.691601
717416915   18:31:34.863    31.200506
717416915   18:32:23.665    25.690088
1994018321  18:32:45.467    37.409171
1994018321  18:33:19.612    37.409171
424164505   18:36:16.634    18.22091
424164505   18:36:36.899    18.210754
424164505   18:37:08.614    19.829266
2394018356  18:37:27.231    79.31705 
```

我想要做的是以这样一种方式总结这些值，以便我可以识别每个 的区域`id`，按 排序`timestamp`。例如，如果我想要第一个`area`值，它将如下：

```
id          timestamp       area_1
717416915   18:30:53.063    25.691601
1994018321  18:32:45.467    37.409171
424164505   18:36:16.634    18.22091
2394018356  18:37:27.231    79.31705 
```

如果我想获得第二个`area`值，`id`它将如下：

```
id          timestamp       area_2
717416915   18:31:34.863    31.200506
1994018321  18:33:19.612    37.409171
424164505   18:36:36.899    18.210754 
```

我知道我需要按时间排序，然后确定每个`id`. 我不太明白如何做到这一点。我尝试做的是以下（没有运行，因为我仍然不清楚如何使用该`OVER`功能）。

```
WITH T AS (
    SELECT * OVER(PARTITION BY a.id ORDER BY a.timestamp) AS rnk
    FROM mytable AS a
) 
SELECT area as area_1
FROM T
WHERE rnk = 1
GROUP BY a.id
ORDER BY a.timestamp; 
```

我打算使用`rnk=2`etc 来获得每个`id`.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-05T23:40:53.367

语法应如下所示：

```
SELECT RANK() OVER(PARTITION BY a.id ORDER BY a.timestamp) AS rnk 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T00:25:38.017

@dbaseman 的提示工作正常（对您的查询进行了修复）：

```
WITH t AS (
    SELECT *
         , rank() OVER(PARTITION BY id ORDER BY ts) AS rnk
    FROM tbl
) 
SELECT id, ts, area AS area1
FROM   t
WHERE  rnk = 1
ORDER  BY id, ts; 
```

有一个更短的方法：

```
SELECT DISTINCT
       id
     , nth_value(ts,   1) OVER w  AS ts
     , nth_value(area, 1) OVER w  AS area_n
FROM   tbl
WINDOW w AS (PARTITION BY id ORDER BY ts); 
```

您还必须测试它是否更快。应该执行类似的操作。
[手册中有关 PostgreSQL 的窗口函数库的更多信息。](http://www.postgresql.org/docs/current/interactive/functions-window.html)

# pdf - 在 java web 应用程序中查看和下载 pdf 文件的区别

> ID：10466856
> 
> 赞同：0
> 
> 时间：2012-05-05T23:35:52.227
> 
> 标签：pdf, spring-mvc, io, download

我需要查看和下载 .pdf 文件才能使用计算机功能。我正在使用 Spring MVC 3，视图就像将 url 指向文件的位置一样简单。

但我不确定如何使该文件可下载。我正在尝试下面的代码，但它似乎什么也没返回，并且请求永远不会完成。

```
@RequestMapping(value = "files/{fileName}")
public void downloadPDF(@PathVariable("fileName") String fileName, HttpServletRequest req, HttpServletResponse res) {
    logger.debug("Http request URL is " + req.getRequestURL());
    res.setContentType("application/pdf");
    URL pdf = null;
    try {
        pdf = new URL(req.getRequestURL().toString());
        BufferedInputStream is = new BufferedInputStream(pdf.openStream());

        IOUtils.copy(is, res.getOutputStream());
        res.flushBuffer();      
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

有人能理解为什么会这样吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T23:43:44.013

如果要使文件可下载，则需要将标题“Content-Disposition”添加到响应中。

header的格式为：Content-Disposition: attachment；文件名="fname.ext"

尝试类似的东西。

```
res.addHeader("Content-Disposition",  "attachment; filename=\"document.pdf\""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T04:39:41.537

使用下面的代码：

```
InputStream is = new FileInputStream(new File(..abcolute path...)));

response.setHeader("Content-Disposition", "attachment;filename=\""+filename+".pdf"+"\"");
IOUtils.copy(is, response.getOutputStream());     
              response.flushBuffer(); 
```

在我的应用程序中它工作正常。

# asp.net-mvc - MVC4 - 如何为总是下拉的学校名称设置模型

> ID：10466862
> 
> 赞同：0
> 
> 时间：2012-05-05T23:37:52.333
> 
> 标签：asp.net-mvc

我希望我的模型的一部分有“学校”和“学期”。它们都将是下拉菜单。将来，我希望能够轻松添加更多学校。

我只想用这个吗？如果是这样，我该如何处理下拉菜单中显示的内容。DropDownFor 被调用而不必在每个页面上制作列表？

```
 [Required(ErrorMessage = "You must select a school")]
    [Display(Name = "School")]
    public string school { get; set; } 
```

我看到了一个使用 SelectList 而不是学校的示例，但对如何使用它有点困惑，因为存储在数据库中的信息只是一个学校名称，而不是整个列表。SelectList 是在这种情况下使用的正确类型吗？除了我应该使用的选择列表和字符串之外，还有其他东西吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T08:18:59.747

您应该同时使用选择列表和字符串。`SelectList`将保留下拉选项，`school`并将保留用户选择的值

像这样的东西

```
//view model
public IEnumerable<SelectListItem> SchoolsSelectList { get; set; }
public string School { get; set; }

//controller action
public ActionResult Create()
{
     SchoolSemesterViewModel model = new SchoolSemesterViewModel();
     model.SchoolsSelectList = SchoolRepository.Schools.Select(x=> new SelectListItem()
     {
          Text = x.SchoolName,
          Value = x.SchoolName
     });

     return View(model);
}

//view

 @Html.DropDownListFor(model => model.School, Model.SchoolsSelectList) 
```

# objective-c - 如何将指向 NSObject 自定义子类的指针添加到 NSMutableArray？

> ID：10466863
> 
> 赞同：1
> 
> 时间：2012-05-05T23:37:56.857
> 
> 标签：objective-c, pointers, nsmutablearray, subclass, nsobject

对于 ViewController.m 中的以下代码片段：

```
- (IBAction)buttonAction:(id)sender
{
    CustomButton *button = (CustomButton *)sender;
    button.associatedObject = [self.sourceOfObjects.objectArray lastObject];
    [self.foo.arrayOfObjects addObject:button.associatedObject]; // this does not work?
} 
```

• CustomButton 是UIButton 的子类，并且具有@property（非原子，强）关联对象，它是指向NSObject 类型对象的指针。

• sourceOfObjects 是MyCustomObject 类型的self 的@property（非原子，强），是NSObject 的子类。

• objectArray 是NSMutableArray 类型的sourceOfObjects 的@property（非原子，强）。

• foo 是MyCustomObject 类型ViewController 的@property（非原子，强），是NSObject 的子类。

• arrayOfObjects 是NSMutableArray 类型的foo 的@property（非原子，强）。

问题：知道为什么我不能将 button.associatedObject 中的指针添加到 self.foo.arrayOfObjects 以便我在 self.foo.arrayOfObjects 中有一个指针指向与 button.associatedObject 相同的对象吗？

我期望会发生什么：如果我随后要求 [self.foo.arrayOfObjects lastObject]，它应该返回 button.associatedObject 也指向的对象。

实际发生的情况：随后要求 self.foo.arrayOfObjects.count 返回 0。我认为这不是 arrayOfObjects 初始化的问题，因为我有延迟实例化。

我希望我准确地表达了这个问题，尽量准确。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T00:33:13.487

我忘记在 MyCustomObject 类的定义中为 self.foo.arrayOfObjects 添加惰性实例化。:S 这意味着在文件 MyCustomObject.m 中缺少以下几行：

```
- (void)setArrayOfObjects:(NSMutableArray *)arrayOfObjects
{
    _arrayOfObjects = arrayOfObjects;
}

- (NSMutableArray *)arrayOfObjects
{
    if (!_arrayOfObjects) _arrayOfObjects = [[NSMutableArray alloc] init];
    return _arrayOfObjects;
} 
```

因为 arrayOfObjects 没有在 MyCustomObject 类中延迟实例化，所以从 ViewController.m 中向 self.foo.arrayOfObjects 添加一个对象没有任何作用，因为 self.foo.arrayOfObjects 仍然为 null，向 null 添加一个对象会产生一个 null 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T00:02:11.493

我在这里可能错了，但是 NSObject 和它的所有子类实际上都是指针。因此，如果您显式创建一个指向 NSObject 的指针，然后将该指针传递给`addObject`，则您将指针传递给该指针，而不是该方法所期望的指向 Object 的指针。

你怎么定义`associatedObject`？

# javascript - 强制 keydown 事件每个 keyCode 只触发一次

> ID：10466869
> 
> 赞同：5
> 
> 时间：2012-05-05T23:39:43.873
> 
> 标签：javascript, jquery

**情况**：我有一个`keydown`处理程序，它带有一个`switch`用于按下什么键的相当标准的东西，但是当按下任何键时，`keydown`事件会重复触发（而不是在实际按下键时只触发一次）。

**为什么会出现问题**：我想保持`keydown`监听器处于活动状态，即能够检测到一次按下多个键，但每次只能触发一次事件`keydown`。我会想根据上下之间的时间做一些事情，但是由于多次射击，这个时间被搞砸了`keyup`。`keyCode`

**我已经尝试过**：我目前正在保留一个`keyCodes`已关闭的列表，并检查我的`keydown`处理程序中的那些，以防止默认行为`keyCode`在我的列表中发生。但是，该事件仍然经常触发，我担心此解决方案的效率/优雅。

**实际问题**：有没有一种好方法可以将`keydown`事件的触发限制在物理按下键时，或者只监听特定的键码*？*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-06T01:15:49.517

在 keydown 处理程序中，检查键是否与最后处理的键相同。如果是，请尽早退出。在 keyup 上，忘记处理的最后一个键。

例如：

```
var lastEvent;
var heldKeys = {};

window.onkeydown = function(event) {
    if (lastEvent && lastEvent.keyCode == event.keyCode) {
        return;
    }
    lastEvent = event;
    heldKeys[event.keyCode] = true;
};

window.onkeyup = function(event) {
    lastEvent = null;
    delete heldKeys[event.keyCode];
};​ 
```

[演示在这里](http://jsfiddle.net/UXFJk/)（单击“结果”面板并按下键）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T23:55:22.603

如果按键被按下，定义一个布尔值来记录。在按键事件中将其设置为 true。让你的主循环检查值是否为真并处理事件，并将按下的键设置为假。如果键被释放（最初为假），则有另一个布尔值来记录。如果 key-up 事件触发，请将其设置为已释放。如果“释放”值也为真，则仅将按键值设置为真（在按键事件中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T00:36:21.263

这是我认为您想要实现的示例：[jsFiddle Example](http://jsfiddle.net/uxcXD/3/)

目前，组合 CTRL+B 是唯一检测到的组合。只需按一些数字即可获取活动日志。当该键已被按下时，它会检测到保持动作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-19T05:14:39.873

这是一个更简洁的版本，不易出错。当前键是否是最后一个键并不重要，因为如果 keyup 事件尚未触发，则它仍处于 keydown 状态。

```
var heldKeys = {};

window.onkeydown = function(event) {
    if (heldKeys[event.keyCode]) {
        return;
    }
    heldKeys[event.keyCode] = true;
};

window.onkeyup = function(event) {
    heldKeys[event.keyCode] = false;
};​ 
```

# objective-c - 如何获得左对齐的 cocos2d 菜单

> ID：10466870
> 
> 赞同：1
> 
> 时间：2012-05-05T23:40:12.043
> 
> 标签：objective-c, ios, xcode, cocos2d-iphone

所以我希望我的主菜单有一个 ccMenu。我尝试使用垂直对齐和 alignItemsInColumns 进行探索，但所有这些选项都将菜单中的项目居中。如果我想要看起来像这样的东西：

**标题**

```
 Option 1 has a very long name
 Option 2 is short
 Shorter 
```

而不是这个：

**标题**

```
Option 1 has a very long name
     Option 2 is short
          Shorter 
```

我怎样才能在 cocos2d 中实现这一点？谢谢您的帮助。

**编辑：**

我尝试使用此代码，但得到了以下结果：

```
CCLabelTTF * sin = [CCLabelTTF labelWithString:@"Single Player" dimensions:CGSizeMake(120,    25) alignment:UITextAlignmentLeft fontName:font fontSize:20];
CCMenuItem * item1 = [CCMenuItemLabel itemWithLabel:sin target:self selector:@selector(goToSinglePlayer:)];

CCLabelTTF * spl = [CCLabelTTF labelWithString:@"Splitscreen" dimensions:CGSizeMake(100, 25) alignment:UITextAlignmentLeft fontName:font fontSize:20];
CCMenuItem * item2 = [CCMenuItemLabel itemWithLabel:spl target:self selector:@selector(goToSplitscreen:)];

CCLabelTTF * ach = [CCLabelTTF labelWithString:@"Achievements" dimensions:CGSizeMake(130, 25) alignment:UITextAlignmentLeft fontName:font fontSize:20];
CCMenuItem * item3 = [CCMenuItemLabel itemWithLabel:ach target:self selector:@selector(goToAchievements:)];

CCLabelTTF * str = [CCLabelTTF labelWithString:@"Store" dimensions:CGSizeMake(50, 25) alignment:UITextAlignmentLeft fontName:font fontSize:20];
CCMenuItem * item4 = [CCMenuItemLabel itemWithLabel:str target:self selector:@selector(goToStore:)];

CCLabelTTF * set = [CCLabelTTF labelWithString:@"Settings" dimensions:CGSizeMake(80, 25) alignment:UITextAlignmentLeft fontName:font fontSize:20];
CCMenuItem * item5 = [CCMenuItemLabel itemWithLabel:set target:self selector:@selector(goToSettings:)];

CCMenu * mainMenu = [CCMenu menuWithItems:item1, item2, item3, item4, item5, nil];

[mainMenu setColor:ccBLACK];
[mainMenu alignItemsVerticallyWithPadding:10];
mainMenu.position =  ccp(size.width/6, size.height/2);
[self addChild:mainMenu]; 
```

![游戏画面](../Images/ae455532a5a95674d480b8ea6d61c69a.png)

好像什么都没做。代码有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T00:53:39.957

使用 CCMenuItemLabel 项目制作菜单。使用 CCLabelTTF 创建每个标签，为其提供左对齐和已知尺寸。当您将 menuItems 添加到菜单时，如果它们都具有相同的尺寸，它们将对齐。

添加 ：

```
 CGSize label = CGSizeMake(160., 45.); 
 CCLabelTTF *label1 = [CCLabelTTF labelWithString:@"Option1 for example" 
                                       dimensions:size 
                                        alignment:UITextAlignmentLeft
                                         fontName:@"pickYourOwnFont" fontSize:16.];

 CCLabelTTF *label2 = [CCLabelTTF labelWithString:@"Option2 below option 1" 
                                       dimensions:size 
                                        alignment:UITextAlignmentLeft 
                                         fontName:@"pickYourOwnFont" fontSize:16.];
CCMenuItem * item1 = [CCMenuItemLabel itemWithLabel:label1];
CCMenuItem * item2 = [CCMenuItemLabel itemWithLabel:label2];
CCMenu * leftAlignedMenu=[CCMenu menuWithItems:item1,item2,nil]; 
```

您可以为标签（颜色等）和菜单项（回调目标和选择器）设置您喜欢的任何属性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T03:40:45.290

一个更通用的解决方案（不需要使用 CCLabel）将只是调整锚点，然后垂直对齐，即

```
CCMenuItem * testItem = ...
testItem.anchorPoint = ccp(0, 0.5f);
[testItem alignItemsVertically] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T06:22:25.903

```
CCLabelTTF *label = [CCLabelTTF labelWithString:@"Hello World"
                                     dimensions:CGSizeMake(480, 100)
                                      alignment:UITextAlignmentLeft
                                       fontName:@"Marker Felt"
                                       fontSize:64];

CCMenuItemLabel *labelItem = [CCMenuItemLabel itemWithLabel:label
                                                     target:self
                                                   selector:@selector(labelPressed)]; 
```

像这样使用它...希望这会有所帮助.. :)

# haskell - 在 Haskell 上输入“=>”时出现解析错误

> ID：10466871
> 
> 赞同：0
> 
> 时间：2012-05-05T23:40:16.510
> 
> 标签：haskell, syntax

```
bmiTell :: => Double -> String
bmiTell bmi
    | bmi <= 18.5 = "You're underweight, you emo, you!"
    | bmi <= 25.0 = "You're supposeldly normal. Pffft, I bet you're ugly!"
    | bmi <= 30.0 = "You're fat! Lose some weight, fatty!"
    | otherwise   = "You are a whale, congratulations!" 
```

这段代码给了我一个错误，“输入'=>'时解析错误”我不知道为什么。有什么帮助吗？谢谢你 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T23:45:24.263

该行：

```
bmiTell :: => Double -> String 
```

具有符号`=>`，用于将类约束与包含约束类型的签名分开。但是，您没有任何限制，例如`Show a =>`. 解决方案？删除它！

```
bmiTell :: Double -> String 
```

# c# - 使用 MemoryMappedViewAccessor 写入内存映射文件？

> ID：10466878
> 
> 赞同：2
> 
> 时间：2012-05-05T23:41:48.440
> 
> 标签：c#, io, memory-mapped-files, memory-mapping

我想将数据写入内存映射文件。实际上，我想在磁盘上更改后保存它。可能吗？我搜索了互联网，但我只发现如果我调用 Write() 其他使用此 MMF 的进程将看到更改。如何保存？

我在用

```
var mmf = MemoryMappedFile.CreateFromFile("test", FileMode.Open, "myFile");
var mmfa = mmf.CreateViewAccessor(0, 10);
byte a = 0;
mmfa.Write(0, a); 
```

但磁盘上的文件没有改变。

# java - Java App Engine：“appengine-web.xml 不包含 元素”消息

> ID：10466881
> 
> 赞同：9
> 
> 时间：2012-05-05T23:43:05.700
> 
> 标签：java, eclipse, google-app-engine

当我尝试在 Eclipse 中运行 Google Web 应用程序时，我得到了`appengine-web.xml does not contain a <threadsafe> element`并且该应用程序没有运行（好吧，任何新应用程序仍然没有运行）。不难修复（我只是`true`在文件中添加了这个带有值的元素`appengine-web.xml`），但我之前没有收到这个错误。这种意外行为的原因是什么？提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-06T00:10:58.790

Google 在 1.6.4 的发行说明中宣布了这一点，并在最新版本中强制执行。

> 现在省略`<threadsafe>`appengine-web.xml 中的指令会导致警告。从 1.6.5 版本开始，省略此指令将导致错误。

[http://code.google.com/p/googleappengine/wiki/SdkForJavaReleaseNotes](http://code.google.com/p/googleappengine/wiki/SdkForJavaReleaseNotes)

# php - PHP：自动完成时间间隔

> ID：10466883
> 
> 赞同：3
> 
> 时间：2012-05-05T23:43:34.680
> 
> 标签：php, arrays

所以，我有一个具有这种结构的值的数组：

```
$values = array(
    "2012-01-01 00:15:00" => "0.01",
    "2012-01-01 00:30:00" => "0.34",
    "2012-01-01 00:45:00" => "0.51",
); 
```

如您所见，值之间的间隔为 15 分钟。有时我会得到缺失值，例如：

```
$values = array(
    "2012-01-01 00:15:00" => "0.01",
    "2012-01-01 00:30:00" => "0.34",
    "2012-01-01 01:01:00" => "0.23",
); 
```

`"2012-01-01 00:45:00"`在数组中以正确的顺序添加缺失值和像“0.00”这样的标准值的最佳方法是什么（较少的 CPU 密集型） ？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T23:57:20.907

下面的代码应该填补空白，如果您预计空白会超过 30 分钟，我可以稍微扩展一下

```
<?php
date_default_timezone_set('GMT');

$values = array(
    "2012-01-01 00:15:00" => "0.01",
    "2012-01-01 00:30:00" => "0.34",
    "2012-01-01 01:31:00" => "0.23",
    "2012-01-01 05:31:00" => "0.23",
    "2012-01-02 01:31:00" => "0.23",
);

function process_values($values) {
    $keys = array_keys($values);

    $new_values = array();

    $new_values[$keys[0]] = $values[$keys[0]];

    for($i = 1; $i < count($keys); $i++) {
        $timestamp = strtotime($keys[$i]);

        $minute_difference = ($timestamp - strtotime($keys[$i - 1])) / 60;

        $start_minutes = floor(date('i', strtotime($keys[$i - 1])) / 15) * 15;

        for($k = 1; $k < floor($minute_difference / 15); $k++) {
            $minutes = $start_minutes + $k * 15;

            $formatted_date = date('Y-m-d H:' . str_pad($minutes % 60, 2, '0') . ':00', strtotime($keys[$i - 1]) + floor($minutes / 60) * 3600);

            $new_values[$formatted_date] = '0.00';
        }

        $new_values[$keys[$i]] = $values[$keys[$i]];
    }

    return $new_values;
}

print_r(process_values($values)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T23:59:42.557

这是您的答案，我已经对其进行了测试，并且效果很好：

```
<?php
$values = array(
  "2012-01-01 00:15:00" => "0.01",
  "2012-01-01 00:30:00" => "0.34",
  "2012-01-01 01:00:00" => "0.23",
);
$values2 = array();
$passFirst = 0;
$difference = 60*15;
foreach ($values as $k => $v) {
  $tempTime = date('Y-m-d H:i:s', strtotime($k) -$difference);
  if (!isset($values[$tempTime]) && $passFirst) {
    $values2[$tempTime] = '0.00';
  }
  $values2[$k] = $v;
  $passFirst = 1;
}
/* The next two lines are for debugging, remove or comment after that */
print('<pre>');
print_r($values2); 
```

# ruby-on-rails - Rails：在创建过程中填充模型属性

> ID：10466891
> 
> 赞同：1
> 
> 时间：2012-05-05T23:44:52.047
> 
> 标签：ruby-on-rails, many-to-many

我在用户和任务模型之间有**多对多的**关系。

一个任务可以有很多用户，但它应该跟踪它的原始创建者（如果用户创建一个`@user.tasks.create`）。我想知道我怎么能这样做。

我必须在任务表中创建一个名为“creator”的新列字段。然后我可以通过以下方式初始化任务：

```
@user.tasks.create(:creator=>@user) 
```

有没有办法不必添加参数，因为创建者将始终是实例化任务的用户。

谢谢！

编辑

我的用户模型有：

```
 has_many :taskization
 has_many :tasks, :through => :taskization 
```

我的任务模型有：

```
 has_many :taskization
  has_many :users, :through => :taskization 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T02:55:39.900

我倾向于将创建者属性放在连接模型（任务化）中。如果您这样做（例如，通过此迁移），

```
class AddCreatorIdToTaskizations < ActiveRecord::Migration
  def change
    add_column :taskizations, :creator_id, :integer
  end
end 
```

然后您可以向 taskization.rb 添加回调

```
before_create do |taskization|
  taskization.creator_id  = taskization.user_id
end 
```

这会让你到达你想要的地方。如果您决定这是 creator 属性所属的地方，您可以在 Task 模型中执行类似的回调，但我还没有完全考虑过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T03:32:54.140

听起来您表示“original_creator”是任务的一个属性。对于每个任务记录，您希望跟踪最初创建它的用户。

因此，看起来您需要两者的建模：

```
# return the User object of the original task creator
@original_creator_user = @task.original_creator 
```

也

```
# get all users of this task
@users = @task.users 
```

去工作。

`Task`这需要对象和对象之间有两种不同的关系`User`。

```
class User < ActiveRecord::Base
  # tasks for this user
  has_many :taskization
  has_many :tasks, :through => :taskization

  # tasks this user was the original creator of
  has_many :created_tasks, :class_name => "Task" 

end

class Task < ActiveRecord::Base
  # users of this task
  has_many :taskization
  has_many :users, :through => :taskization

  # user who originally created this class
  belongs_to :original_creator, :class_name => "User"

end 
```

请注意，“创建者”关系不是`:through`任务，而是两个对象之间的直接关系。

# objective-c - Facebook 帮助，iOS SDK

> ID：10466892
> 
> 赞同：0
> 
> 时间：2012-05-05T23:45:03.280
> 
> 标签：objective-c, ios, facebook, facebook-graph-api, ios5

我目前正在制作一个 Facebook iOS 应用程序，并且在该应用程序中我试图让用户 Facebook 墙并将其放在 UITable 视图中。

到目前为止我有：

```
[facebook requestWithGraphPath:@"me/home" andDelegate:self]; 
```

加载视图时调用此方法。

Facebook 中的 Did Receive Response，我想用帖子填充表格视图，但这是我遇到问题的地方。我到处寻找答案，并阅读了苹果和 Facebook 文档，但它们对我的情况没有帮助。另外，如果有人发布视频或图像，我将如何在 TableView 中处理？任何帮助将不胜感激。

谢谢，维林德博拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T01:04:39.853

您需要获取响应并将其放入 NSArray。然后在你的 UITableViewDelegate 方法中加载单元格：

```
-(void)request:(FBRequest *)request didLoad:(id)result {
   // take my result and put it into an array, usually it's an NSDictionary
    NSArray *friendsFBData = [result objectForKey:@"data"];
    NSMutableArray *friendIds = [NSMutableArray arrayWithCapacity:friendsFBData.count];
    for (int x = 0; x < friendsFBData.count; x++) {
        [friendIds addObject:[((NSDictionary*)[friendsFBData objectAtIndex:x]) objectForKey:@"id"]];
    }

   // don't forget to call loadData for your tableView
   [self reloadData];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    // Grab data from array
    NSString *myName = [myArray objectAtIndex:indexPath.row];
    [myLabel setText:myName];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T00:25:47.140

如果该调用是官方的 facebook API 调用，我假设它是异步的，因此期望传入的委托来处理更新。

您的对象是否将此设置称为某种 FaceBookDelegate，然后需要一个名为 facebookDidReceiveResponse 的方法或其他方法？这可能是下一步......检索通过委托方法返回的数据。

# iphone - UISegmentedControl 在 uitableviewcontroller 中切换视图

> ID：10466899
> 
> 赞同：0
> 
> 时间：2012-05-05T23:46:20.547
> 
> 标签：iphone, uisegmentedcontrol

我有以下情况：

```
UITabBarController
--tab1
--tab2
----UINavigationController (with a UITableViewController and 3 rows)
------pushedViewController
--tab3
--tab4
--tab5 
```

好的，所以，当用户单击 UINavigationViewController 中的一个选项时，它会推送“pushedViewController”，并且在该视图控制器中，我想要一个分段控件，就像 App Store [http://i.stack.imgur.com/hrdxL上的那个一样.png](https://i.stack.imgur.com/hrdxL.png)

我怎样才能做到这一点？

我已经检查过了

```
https://stackoverflow.com/questions/1559794/changing-views-from-uisegmentedcontrol
https://stackoverflow.com/questions/5280653/uisegmentedcontrol-to-switch-views-in-uitabbarcontroller
http://www.astroryan.com/?p=19
https://stackoverflow.com/questions/8723094/using-uisegmentedcontrol-to-switch-between-two-views 
```

这可以帮助我，但我无法弄清楚如何 [使用 UISegmentedControl 在 UIViewControllers 之间切换](https://stackoverflow.com/questions/5555218/switch-between-uiviewcontrollers-using-uisegmentedcontrol)

这个用户也问了同样的问题，但它没有完整的代码 [Recreating Segmented Control from iPhone App Store](https://stackoverflow.com/questions/5128659/recreating-segmented-control-from-iphone-app-store)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T01:59:43.973

pushViewController 可以包含一个填充屏幕的 UIScrollView。启用分页，并给它三个大子视图，如下所示：

```
CGFloat width = self.view.bounds.width;
CGFloat height = self.view.bounds.height;

// it's easier to do all this this in xib/storyboard, but to illustrate...

self.scrollView.frame = CGRectMake(0,0,width,height);
self.scrollView.contentSize = CGSizeMake(width*3.0, height);  // this must be done in code
self.scrollView.pagingEnabled = YES;

UIView *subviewA, *subviewB, subviewC;

subviewA.frame = CGRectMake(0.0, 0.0, width, height);
subviewB.frame = CGRectMake(0.0, width, width, height);
subviewB.frame = CGRectMake(0.0, 2.0*width, width, height);

[self.scrollView addSubview:subviewA];
[self.scrollView addSubview:subviewB];
[self.scrollView addSubview:subviewC];

// then when the segmented control changes ...

- (IBAction)segmentedControlChanged:(UISegmentedControl *)sender {

    NSInteger page = sender.selectedSegmentIndex;
    CGFloat contentOffsetX = page*self.view.bounds.width;
    [self.scrollView setContentOffset:CGPointMake(contentOffsetX, 0.0) animated:YES];
} 
```

# php - 单选按钮表单不发送数据。什么是正确的语法？

> ID：10466900
> 
> 赞同：1
> 
> 时间：2012-05-05T23:46:22.497
> 
> 标签：php, html, forms, radio

我发布的这个单选按钮表单的正确语法是什么。没有单选按钮，表单可以正常工作，只有当我添加它们时，我会收到一条错误消息，未定义变量：where_to_search

```
<form action="" method="POST" >

<div class="control-group">
    <label class="control-label">Search By:</label>
        <div class="controls">
            <label class="radio">
                <input type="radio" name="where_to_search" id="optionsRadios1" value="1" checked>
                     Group Name
            </label>
                <label class="radio">
            <input type="radio" name="where_to_search" id="optionsRadios2" value="2">
                     Group Description
                </label>
            </div>
     </div>   

<input class="span2" name="keywords" id="appendedPrependedInput" size="15" placeholder="Search groups.." type="text"/><button class="btn" value="Go" type="submit">Go!</button>

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T23:52:48.490

试试：checked = "checked" 和 <input type="submit"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T23:53:37.547

您需要使用 $_POST 来引用变量：

```
$_POST['where_to_search'] 
```

# excel - VBA 插件：事件不起作用

> ID：10466902
> 
> 赞同：1
> 
> 时间：2012-05-05T23:46:48.580
> 
> 标签：excel, excel-addins, vba

我只想在所有工作簿（有或没有宏）中捕获打开和保存事件。据我了解，我需要带有启用 Event 的代码的 AddIn。我在互联网上找到了很多例子。我学习了 stackoverflow 示例，如下所示：[Excel Add-In 如何响应任何工作表中的事件？](https://stackoverflow.com/questions/858691/how-can-an-excel-add-in-respond-to-events-in-any-worksheet) 但它只是不起作用。没有人报告任何问题。所以，我想我在这里犯了一个简单的错误。我有下一个插件，例如：

**类模块 (ExcelEventCapture) - 私有：**

```
Option Explicit
Public WithEvents ExcelApp As Excel.Application

Private Sub Class_Initialize()
Set ExcelApp = New Excel.Application
ExcelApp.EnableEvents = True
MsgBox "ExcelApp OK"
End Sub

Private Sub ExcelApp_NewWorkbook(ByVal Wb As Workbook)
Wb.Close savechanges:=False
MsgBox "Sorry - you can't create workbooks in this system!"
End Sub 
```

**此代码放置在 ThisWorkbook 中：**

```
Option Explicit
Private ExcelEvents As ExcelEventCapture
Private Sub Workbook_Open()
Set ExcelEvents = New ExcelEventCapture
MsgBox "ExcelEvents OK"
End Sub 
```

每次保存/修改此代码后，我都会使用插件管理器来关闭/打开此插件。打开后，我看到“ExcelApp OK”、“ExcelEvents OK”。但是当我创建新工作簿时，不会发生任何事件。其他事件也不处理。我用 2007/2010 Excel 试试。结果一样。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T00:46:08.770

您的代码不太正确：

**类模块 (ExcelEventCapture)**

```
Option Explicit

Public WithEvents ExcelApp As Application

Private Sub ExcelApp_NewWorkbook(ByVal Wb As Workbook)
    Wb.Close savechanges:=False
    MsgBox "Sorry - you can't create workbooks in this system!"
End Sub 
```

**此代码放置在 ThisWorkbook 中：**

```
Option Explicit

Private ExcelEvents As New ExcelEventCapture

Private Sub Workbook_Open()
    Set ExcelEvents.ExcelApp = Application
    MsgBox "ExcelEvents OK"
End Sub 
```

# .net - GDI+ 对象泄漏（字体、画笔）

> ID：10466907
> 
> 赞同：0
> 
> 时间：2012-05-05T23:47:59.843
> 
> 标签：.net, gdi, resource-leak

我在我的应用程序中遇到 GDI 字体和画笔泄漏。如何在我的源代码中找到已创建（和已处理的）对象？

我没有任何`toHFont`电话，对 Graphics 的所有访问都封装在 using 语句中。我从 GDIView 和 .NET Memory Profiler 等工具中知道它的画笔和字体 - 但他们没有说明在我的源代码中创建泄漏对象的位置。

我在 VS2008、.NET 3.5 中使用 C#。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T02:31:34.963

一个好的做法是将字体和画笔包装在 Using / End Using 块中。

# templates - 在 Eclipse 中编辑 dotcms 模板

> ID：10466915
> 
> 赞同：3
> 
> 时间：2012-05-05T23:51:06.063
> 
> 标签：templates, dotcms

Dotcms 确实有一个不错的基于速度的模板系统，但它似乎只支持在浏览器中内联编辑速度模板，这有点糟糕。我真的很喜欢在编写速度模板时使用 Eclipse（有一些很好的速度支持，并且是一个更好的编辑器，然后是标准的浏览器文本控件）。

有没有办法从 Eclipse 编辑 dotcms 模板，然后自动将它们导入 dotcms。还是我真的必须在 Eclipse 中编写它们，然后每次编辑时将每个模板复制/粘贴到浏览器中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T09:28:48.343

我同意在 Eclipse 中工作比在浏览器中工作要好得多。这就是为什么我将所有 Velocity 代码外部化并将这些外部文件包含在我的内容中。使用 webdav，您可以将 dotcms 网站浏览器安装到 Windows 驱动器号。这样您就可以使用其他编辑器来编辑文件。我这样做：

1.  在 dotCMS 网站浏览器中创建一个文件夹：`/vtl`
2.  将所有速度放在该文件夹中的单独文件中：`/vtl/filteredProducts.vtl`
3.  在内容中放置一个[#dotparse](http://dotcms.com/docs/2.0/DynamicIncludeOfAVtlOrHTMLFile)而不是速度代码本身。`#dotParse("/vtl/filteredProducts.vtl")`
4.  dotCMS 网站浏览器中的所有文件都可以通过[webdav](http://dotcms.org/documentation/ConnectToTheDotCMSUsingWebDAV)在以下位置获得：`http://www.yourdomain.com/webdav/autopub`. 确保您在 webdav 中登录的 dotCMS 用户可以访问这些文件（您甚至可以创建一个单独的 dotCMS 角色，该角色只能访问这些文件而没有其他权限）。不要使用默认的 windows webdav 客户端，因为 irt 不允许您编辑已安装驱动器上的文件。我使用[Netdrive](http://www.netdrive.net/purchase.html)，免费供个人使用。我也听说过有关[Gladinet](http://gladinet.com/)的好消息。安装其中一个并将 webdav 文件夹安装到驱动器号。

现在您可以在 Eclipse 中编辑文件。

有几个陷阱：

1.  我发现 webdav 有点慢，所以我实际上做的是在我的本地文件系统上保留文件的副本并使用 eclipse 编辑这些文件（也适用于 svn/git 的东西）并将其与 webdav 文件夹同步。我使用[Beyond Compare](http://www.scootersoftware.com/)进行同步。它不是免费的，但 100% 物有所值。毫无疑问，那里有免费的替代品。
2.  当文件变大时，Webdav 会做一些令人毛骨悚然的事情：它们会被打乱。我不知道为什么会这样，但是当文件变大时，可能会发生这种情况。我的 vtl 文件还没有发生这种情况，但是较大的二进制文件时不时会被破坏。
3.  我相信你不必使用webdav，但我自己没有尝试过。Velocity 本身有一个#parse 函数。也许您可以使用它直接从服务器的文件系统本身解析文件。

希望这可以帮助。

# c# - 工具提示响应 PictureBox 上的鼠标移动

> ID：10466916
> 
> 赞同：2
> 
> 时间：2012-05-05T23:51:08.310
> 
> 标签：c#, tooltip, picturebox, flicker, mousemove

我正在尝试制作一个工具提示，其文本会根据您在 PictureBox 上悬停的内容而变化。我的代码是这样的：（简化以避免混淆）

```
private ToolTip tt;

private void Picture_MouseMove(object sender, MouseEventArgs e)
{
    string rollText = 
        <code to determine what text should display based on mouse coordinates>

    tt.SetToolTip(Picture, rollText);
} 
```

这可行，但问题是当您将鼠标悬停在图片上时，它会使 ToolTip 不断闪烁，因此我进行了修改以防止在不需要时重绘它：

```
private string oldRollText = "";
private ToolTip tt;

private void Picture_MouseMove(object sender, MouseEventArgs e)
{
    string rollText = 
        <code to determine what text should display based on mouse coordinates>

    if (rollText != oldRollText)
    {
        oldRollText = rollText;
        tt.SetToolTip(Picture, rollText);
    }
} 
```

但是现在它只显示几分之一秒，当你第一次滚动它时它就消失了，直到你滚出并再次滚入时才会再次消失。我尝试将`ShowAlways = true`, 所有三个`Delay`数字都设置为 0, `Active = true`, `UseFading = false`, `UseAnimation = false`，以防它一遍又一遍地重播动画的第一帧或类似的东西。没有骰子。有什么我想念的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T21:41:06.087

使用 MouseEnter 认为是更好的方法。

```
private ToolTip tt= new ToolTip();

string rollText;
int mouseX;
int mouseY; 
private void Picture_MouseEnter(object sender, MouseEventArgs e)
{

    //tt.SetToolTip(Picture, rollText);//option 1
    tt.Show();//option 2
}

private void Picture_MouseMove(object sender, MouseEventArgs e)
{   
    mouseX=e.X;
    mouseY=e.Y;
    string rollText = ("Mouse position is:  X:"+mouseX+" Y:"+mouseY);
   tt.SetToolTip(Picture, rollText);//option 2

} 
```

还使用 MouseLeave 删除工具提示。

```
private void Picture_MouseLeave(object sender, MouseEventArgs e)
    {   

       tt.Hide();

    } 
```

我已经选择了 2 个选项来尝试消除闪烁。

# java - 监控线程状态的规范方法

> ID：10466918
> 
> 赞同：2
> 
> 时间：2012-05-05T23:52:04.340
> 
> 标签：java, swing, scala, concurrency, progress-bar

我正在使用 Scala 在 Swing 中编写一个 GUI 应用程序，该应用程序启动多个线程以同时通过 HTTP 下载文件。我想使用一些`JProgressBar`s 来显示下载的状态。显然，必须从事件调度线程更新进度条，此外，我希望将 HTTP 下载代码与 GUI 分开。

我想知道最好的方法是什么？`SwingWorker`是 Swing 特有的，并且`Observable`似乎有些陈旧，因为传递给观察者的参数是一个对象，并且必须强制转换。Scala 是一种强大的现代语言，所以我希望有一种更简单的方法来做我想做的事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T00:33:07.813

让您的下载类接受您通知下载进度的 PropertChangeListener。侦听器相应地更新进度条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T23:20:19.847

通过使用 Scala 闭包实现我自己的侦听器回调系统，我实现了我想要的。以下代码位于下载类中：

```
val listeners = new ListBuffer[Int => Unit]

def registerListener(f: Int => Unit) {
  if (!listeners.contains(f)) {
    listeners.append(f)
  }
} 
```

这在 GUI 中的嵌套 SwingWorker 中进行：

```
downloader.registerListener(this.listener)

def listener(progress: Int) {
  SwingUtilities.invokeLater(new Runnable {
    def run() {
      progressBar.setValue(progress)
      table.repaint()
    }
  })
} 
```

# linux - 如何在内核模式（Linux）下从串口读取数据（字符）？

> ID：10466921
> 
> 赞同：0
> 
> 时间：2012-05-05T23:52:34.583
> 
> 标签：linux, module, serial-port

我正在开发一个 linux 内核模块，我需要从串口（字符）读取数据。我想将字符（例如：'D'、'T' 和 '-'）设置为来自串行端口的条目，并且我想读取这些条目。我花了很长时间尝试使用“inb(0x3f8)”和“termios”，但没有成功。但是，使用“outb”写入数据可以正常工作，我在我设置的 VBox 配置上的 VirtualBox 上将 Ubuntu 10.10 作为系统安装为访客：

```
 activated serial port
   port number :   COM1    IRQ 4  PORT I/O : 0x3f8
   Port/path   D:\Oracle\serial.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T01:32:43.240

我认为如果您在内核线程中运行，则可以使用 filp_open 或其他一些函数来获取文件操作指针，然后您可以通过 file_operations 指针使用“正常”调用。

这*仅*适用于您在“正常”上下文中运行 - “用户”进程或*可能*的内核线程，如果您处于某些“不寻常”上下文中，它肯定无法正常工作。

在正常任务中，这些调用可能会被阻塞，一切都会“正常工作”。我认为。我已经用套接字尝试过它并且它有效。

您可能会遇到挂载文件系统的问题，因为内核线程可能会获得一个包含很少（或没有）文件节点的命名空间。这可能意味着在用户空间中打开设备并以某种方式通过它会更容易。

还要注意内核中有限的堆栈大小。

# internet-explorer - InnerHTML 不适用于 IE？

> ID：10466926
> 
> 赞同：-1
> 
> 时间：2012-05-05T23:53:27.973
> 
> 标签：internet-explorer, select, innerhtml

我有一个问题，我有一个联系表格，它有一个下拉选择来选择联系人的主题，它在 Firefox 上工作，但在 IE 上不工作......你能帮忙吗？

JS部分：

```
<script type="text/javascript">
var jobhtml = "<td class='style1'>Job Reference:</td><td>&nbsp;</td><td><label><input type='text' name='job-reference' id='textfield4' /></label></td>";
var orderhtml = "<td class='style1'>Item Reference:</td><td>&nbsp;</td><td><label><input type='text' name='order-id' id='textfield4' /></label></td>";
function change()
{
   switch (document.getElementById("select").value)
   {
      case "job":
      document.getElementById('change').innerHTML = jobhtml;
      break;
      case "order":
      document.getElementById("change").innerHTML = orderhtml;
      break;
      default:
      document.getElementById("change").innerHTML="";
      break;
   }
}
</script> 
```

HTML 部分：

```
 <tr>
          <td><span class="style1">Subject</span></td>
          <td>&nbsp;</td>
          <td><label>
            <select name="select" id="select" onchange="change();">
              <option>Please select</option>
              <option>Meeting</option>
              <option>Call</option>
              <option value="order">Order</option>
              <option value="job">Apply for a position</option>
              <option>Testimonials</option>
              <option>Complains</option>
            </select>
          </label></td>
        </tr>
          <tr id="change" name="change">

        </tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T00:00:16.417

IE 不`innerHTML`支持`<tr>`. 像这样做：

```
<tr>
    <td><div id="change"></div></td>
</tr> 
```

[http://www.hotscripts.com/forums/javascript/46764-solved-innerhtml-tr-not-working-ie.html](http://www.hotscripts.com/forums/javascript/46764-solved-innerhtml-tr-not-working-ie.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T00:00:46.987

[微软支持问题 239832](http://support.microsoft.com/kb/239832)

您不能`innerHTML`在单元格以外的表格元素上进行设置。

有很多更好的解决方案。我会做的是这样的：

```
<table id="tbl">
  <thead>
    <tr>
      <td>Subject</td>
      <td><select onChange="change(this.value);">...</select></td>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Job Reference</td>
      <td>............</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td>Item Reference</td>
      <td>............</td>
    </tr>
  </tbody>
</table>

<script type="text/javascript">
  (function() {
    var tbl = document.getElementById('tbl'),
        tbd = tbl.tBodies;
    tbd[0].style.display = tbd[1].style.display = "none";
    window.change = function(val) {
      tbd[0].style.display = val == "job" ? "" : "none";
      tbd[1].style.display = val == "order" ? "" : "none";
    };
  })();
</script> 
```

基本上将表格划分为不同的主体，然后根据所选值显示/隐藏它们。如果 JavaScript 被禁用，这具有兼容的额外好处（尽管它需要更多的用户直觉）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T00:00:59.430

似乎这是一个已知的 BUG：http: [//support.microsoft.com/kb/276228](http://support.microsoft.com/kb/276228)

顺便说一句，我建议你使用 jquery：

document.getElementById('change').innerHTML = jobhtml;

变成了

$("#change").html(jobhtml); <--更好，不是吗？

ps：我认为jquery使用innerHTML ..所以不应该解决这个问题..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T00:02:52.603

使用 jQuery 可以更简单地完成此操作。如果你对这个想法持开放态度。

```
$(document).ready(function(){
   $('#select').change(function(){
       switch($(this).val()){
           case "job":
               $('#change').html(jobhtml);
               break;
           ...other cases...
       }
   });
}); 
```

[jsFiddle 示例](http://jsfiddle.net/VZspM/)

# lisp - 如何在鸡肉方案中打印用 defstruct 制作的数据结构的所有“部分”

> ID：10466934
> 
> 赞同：0
> 
> 时间：2012-05-05T23:54:50.000
> 
> 标签：lisp, scheme, pretty-print, chicken-scheme

假设我们有上面的代码：

```
(require-extension defstruct)

(defstruct tree height age leaf-color)

(define coconut
  (make-tree height:30
             age: 5
             leaf-color: 'green)) 
```

我知道我可以使用（树高椰子）来查看椰子的高度，但是一个命令中的所有椰子信息怎么样？我还尝试了 (tree->alist 椰子) 产生： ((height . 30) (age . 5) (leaf-color . 'green)) 但我不能使用类似的东西：（for-each pp 椰子）。是否可以这样做，或者用适当的命令编写我的打印树是唯一的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T02:07:52.653

所以这不是一个通用的解决方案，因为它使用特定的`tree->alist`程序。此外，输出不是特别漂亮。正如我在评论中提到的，如果您有非常具体的打印需求，您应该研究一下`format`鸡蛋。

```
(use defstruct)

(defstruct tree height age leaf-color)

(define coconut (make-tree height: 30 age: 5 leaf-color: 'green))

(define (pp-tree t)
  (let loop ((attr (tree->alist t)))
    (cond ((null? attr) 'done)
          (else
            (display (caar attr))(display ": ")
            (display (cdar attr))(newline)
            (loop (cdr attr)))))) 
```

# php - 在 Ruby、Python 或 PHP 中，是否在 Array 对象的中间插入需要 O(1) 时间？

> ID：10466938
> 
> 赞同：1
> 
> 时间：2012-05-05T23:55:27.707
> 
> 标签：php, python, ruby, arrays, performance

我认为通常情况下，插入到数组的中间（任何位置）可能会很昂贵——将元素移动到一个插槽上可能需要 O(n) 时间，并且可能需要为数组重新分配内存。另一方面，链接链接可能需要 O(1) 时间。

但是在 Ruby、Python 和 PHP 中，是否有一个数组对象只需要 O(1) 时间就可以在数组中间插入一个元素？

**更新：并且必须遵循在数组中的任何位置替换数组元素或访问它也是 O(1)。**

**更新：插入如下：**

```
1.9.3-p125 :001 > RUBY_DESCRIPTION
 => "ruby 1.9.3p125 (2012-02-16 revision 34643) [x86_64-darwin11.3.0]" 

1.9.3-p125 :002 > a = %w{ a b c d }
 => ["a", "b", "c", "d"] 

1.9.3-p125 :007 > a.insert(3, 123)
 => ["a", "b", "c", 123, "d"] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T23:59:47.510

在 PHP 中，您`\SplDoublyLinkedList`可以为您做到这一点。[http://php.net/manual/en/class.spldoublylinkedlist.php](http://php.net/manual/en/class.spldoublylinkedlist.php)

请注意，PHP 数组不是您在 C、C#、Java 等中看到的数组 - 它们是有序的哈希映射。[请参阅http://www.php.net/manual/en/language.types.array.php](http://www.php.net/manual/en/language.types.array.php)的介绍

根据您的用例（如果这不是家庭作业），`\SplMaxHeap`不是 O(1)，但可能是您的最佳选择。[http://php.net/manual/en/class.splmaxheap.php](http://php.net/manual/en/class.splmaxheap.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T02:59:51.707

在 Ruby 中使用内置方法是不可能做到这一点的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T00:26:01.320

鉴于讨论，在 Python 中可能[`collections.deque`](http://docs.python.org/library/collections.html#deque-objects)适合您的描述。它是一个双端队列，[似乎被实现为双向链表](http://hg.python.org/cpython/file/bc6d28e726d8/Modules/_collectionsmodule.c)。

# c# - dataGridView1_CellContentClick 随机不触发

> ID：10466939
> 
> 赞同：1
> 
> 时间：2012-05-05T23:55:32.420
> 
> 标签：c#, events, datagridview

这很奇怪。就好像网格中的某些单元格被关闭了一样。整个事情是使用“拖放”生成的，例如网格绑定到一个数据源，它几乎一直都在工作。

我可以一次又一次地单击它，它工作得很好，但是网格中的某些单元格不会触发事件。它是完全可重复的，数据集是固定的。

什么可能导致这种行为？没有抛出异常，调试器设置为中断所有...

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T11:40:59.003

[CellContentClick](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellcontentclick.aspx)事件仅在单击单元格的内容（托管控件）时触发。这意味着控件周围的空白不会导致事件触发。

这在 CheckBox 单元格中最为明显 - 触发事件的唯一方法是单击 CheckBox - 但是所有单元格类型都会发生这种情况。以 TextBoxColumn 为例，该事件仅在单击文本时触发。

如果您想知道何时单击单元格中的任何位置，请改用[CellClick](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellclick.aspx)或可能的[CellMouseDown](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellmousedown.aspx)事件。

该`CellContextClick`事件通常用于复选框、按钮或链接等列，其中鼠标与实际内容的交互，而不是空白，是您所追求的。

# jquery - 如何使用 jQuery 过滤不需要的元素

> ID：10466940
> 
> 赞同：4
> 
> 时间：2012-05-05T23:55:39.427
> 
> 标签：jquery, class, jquery-selectors

让我们以两个 div 为例，

```
<div class="main right"></div>
<div class="main"></div> 
```

而这个 jQuery 片段，如下所示：

```
$('.main').css('background-color','red'); 
```

正常情况下，这会将两个 div 的背景颜色更改为红色。我想知道如何更改只有“main”作为类而不是“main right”的 div 的颜色，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T23:57:51.963

```
$('.main:not(.right)').css('background-color','red'); 
```

或者：

```
$('.main').not('.right').css('background-color','red'); 
```

* * *

如果需要更复杂的条件，可以使用以下`filter`功能完成：

```
$('.main').filter(function(){
    return $(this).data('value') == 2 && this.innerHTML.length < 50;
}).css('background-color','red'); 
```

它将过滤掉结果`.main`并只维护它们`data-value`是 2 和它们的元素`innerHTML.length < 50`。

* * *

如果您不知道其他类可能是什么，`main`但您想要只有`main`该类的元素。

```
$('.main').filter(function(){
    return $.trim(this.className) == 'main';
}).css('background-color','red'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T23:58:07.430

使用“not()”选择器。

`$('.main:not(.right))`
或喜欢：`$('.main').not('.right')`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T00:10:20.053

在我看来，您想在应用样式之前验证“main”是*唯一*的类。您可以通过快速正则表达式测试来做到这一点：

```
$('.main').filter(function(){
    return /^\s*main\s*$/.test(this.className);
}).css('background-color','red'); 
```

# objective-c - 当在风景中时在 viewDidLoad 中呈现模态视图控制器会造成混乱

> ID：10466945
> 
> 赞同：0
> 
> 时间：2012-05-05T23:56:18.823
> 
> 标签：objective-c, modalviewcontroller

一旦应用程序启动，我会从 viewDidLoad 模态地呈现视图控制器，但是当应用程序打开时设备（或模拟器）处于横向时，模态 vc 显示不正确。当我在延迟后触发模态 vc 时，它看起来很好，这让我认为这是由于显示模态控制器而引起的，因为它下面的视图正在调整到新的方向。我无法真正描述会发生什么，所以这里有一个截图：[http](http://skit.ch/np2g) ://skit.ch/np2g 。（我太新的用户嵌入图像）

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T23:58:21.753

`viewDidLoad`为时过早。尝试在`viewDidAppear:`.

# asp.net-mvc - 在混合 MVC 和 Web 表单站点中 - 需要将 mVC 留给 ASPX Web 表单

> ID：10466947
> 
> 赞同：0
> 
> 时间：2012-05-05T23:56:24.580
> 
> 标签：asp.net-mvc, webforms

在我的站点的 MVC 部分中，我试图点击 \about_01.aspx.. 但 URL 仍保留在我的全局 .aspx 中：

```
 routes.IgnoreRoute("{resource}.axd/{*pathInfo}")
    routes.IgnoreRoute("{resource}.aspx/{*pathInfo}")
    'routes.IgnoreRoute("about_01.aspx")

    routes.MapRoute( _
        "Default", _
        "{controller}/{action}/{id}", _
        New With {.action = "about_01", .id = UrlParameter.Optional} _
    ) 
```

ASPX 页面工作正常，MVC 页面工作正常，但我不能将 MVC 留给 Webform roster/roster/#/about_01.aspx

# java - 是否可以在 jsf 项目中使用 js 库

> ID：10466952
> 
> 赞同：4
> 
> 时间：2012-05-05T23:57:49.147
> 
> 标签：java, jsf

我想在 java web 应用程序中使用 javascript 库，我想知道这在 jsf 应用程序中是否可行（例如 Ice Faces 或 Prime Faces ？？）。

在 jsf 项目中集成 js 库的使用时是否需要遵循任何规则？我应该记住什么以及如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T01:31:27.957

只有一个 JSF 框架，最新版本是 2.1，并且没有与 js 框架原生捆绑。请记住，JSF 和任何其他 Web 框架（如 Struts 或 Spring）的使命是通过提供成熟的 MVC 框架来帮助开发周期，但除此之外，它还是一个纯 Java Web 应用程序。

与任何 Web 应用程序一样，您可以添加任何需要使用的 JavaScript 框架（例如[extjs](http://www.sencha.com/products/extjs/)）。特别是在 JSF 中，您可以添加带有 ajax 功能的标签组件框架，例如[RichFaces](http://www.jboss.org/richfaces)和[PrimeFaces](http://primefaces.org/)，它们都带有 jQ​​uery，您应该在尝试添加自己的 jQuery 版本之前检查发布的版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T00:10:12.740

你可以，事实上一些 JSF 框架附带了一个 JS 库。例如，我认为 Ice Faces 附带 jQuery。尽管有可能，但您必须*非常*小心，因为 JSF 框架喜欢自己管理 DOM。

所以，是的，你*可以*，但我强烈建议不要这样做，除非你非常小心并避免以你的框架不期望的方式操作 DOM。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T02:17:26.363

这些链接会有所帮助

[http://docs.jquery.com/Using_jQuery_with_Other_Libraries](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)

[JQuery 与 Primefaces 冲突？](https://stackoverflow.com/questions/5457292/jquery-conflicts-with-primefaces)

# c# - C# 解释和 GC（垃圾回收）计数器

> ID：10466961
> 
> 赞同：0
> 
> 时间：2012-05-05T23:58:28.120
> 
> 标签：c#, debugging, optimization, garbage-collection, performancecounter

以下程序显示一个计数器，显示垃圾收集的负载。

我希望能够在一段时间内（例如每 1/60 秒帧）查看负载，例如以 MB 为单位。

```
using System;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Graphics;

namespace proj
{
    public class game : Microsoft.Xna.Framework.Game
    {
        private GraphicsDeviceManager graphics;
        private SpriteBatch sprite_batch;
        private SpriteFont font;

        public game()
        {
            graphics = new GraphicsDeviceManager(this);
        }

        protected override void Initialize()
        {
            Content.RootDirectory = "Content";
            sprite_batch = new SpriteBatch(GraphicsDevice);
            font = Content.Load<SpriteFont>("font");
            base.Initialize();
        }

        protected override void Update(
            GameTime game_time)
        {
            //base.Update(game_time);
        }

        protected override void Draw(
            GameTime gameTime)
        {
            GraphicsDevice.Clear(
                Color.DarkBlue);
            sprite_batch.Begin();
            sprite_batch.DrawString(
                font,
                ((float)GC.GetTotalMemory(true) / (1024 * 1024)).ToString(),
                //GC.GetTotalMemory(true).ToString(),
                new Vector2(20, 20),
                Color.White);
            sprite_batch.End();
            //base.Draw(gameTime);
        }
    }
} 
```

然而，我看到这个程序似乎只有 0.4MB 以上，我希望每帧在幕后创建一些新对象，但除此之外，在`((float)GC.GetTotalMemory(true) / (1024 * 1024)).ToString()`创建过程中我只能看到 Vector2 以及一些数字和字符串值。

在一个较大的程序中，在绘制和更新期间几乎没有发生类似的事情，因为我已经在注释中包装了会发生的事情，但是存在很多代码，其中一些在程序开始时运行一次，程序显示恒定负载每帧 90MB。

更重要的是，我尝试添加：

```
pos n2;
for (UInt32 n = 0; n < 100000; n++)
{
    n2 = new pos(n, 0);
    func(n2);
} 
```

在哪里

```
public class pos
{
    public pos(
        float x,
        float y)
    {
        this.x = x;
        this.y = y;
    }

    public float
        x, y;
}

private void func(
    pos p)
{
} 
```

绘制，GC值变化很小。

我是否错误地解释了这一点？如果是这样，那么我如何显示我需要的内容？

似乎 GC 对我造成了性能问题，以大约每秒一次的执行暂停形式出现。它们在 PC 上几乎看不到，但在 XBOX 上却非常明显。我这样做是为了分析是否是这种情况。

例如，我可以优化（从运行时代码的性能的角度来看）代码，例如：

```
loop()
{
    func(new pos(..., ...));
} 
```

进入如下代码：

```
pos p = new pos(0, 0);
loop()
{
    p.x = ...;
    p.y = ...;
    func(p);
} 
```

虽然它的相关性值得怀疑，但它可能会问。我对 GC 的立场是，如果没有它，我不会选择使用 OO 编程语言。我认为创建好的代码是必不可少的。

* * *

澄清。随着时间的推移，我正在寻找垃圾收集器上的负载。GC 似乎以字节的形式返回此信息，但是返回的值似乎与整个程序的总内存使用量更一致。

* * *

我看到没有人真正回答过这个问题，有一个很接近的请求，这个问题最终变得很大，我不得不不断地用明显的细节来更新它。人们似乎很容易完全忽略这一点。我不明白为什么我不能为应用程序提供应用程序内 GC 负载计数器，该计数器没有显示明显不正确的结果，例如每帧都没有发生任何事情时的 90MB。

它现在对我来说已经超出了实际用途，因为它已经很长时间了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T01:53:42.377

我刚加入，所以我无法发表评论，但看起来你想要什么：

```
"I'm looking for the load on the garbage collector over time. Not the memory useage of the whole program. The GC seems to return this information in the form of bytes" 
```

已经存在。只需使用系统上已安装的标准 .net 性能计数器。开始->控制面板->管理工具->性能监视器启动您的应用程序打开性能监视器，然后选择您的应用程序并在 .NET CLR 内存计数器下添加您需要的内容。有很多计数器可以帮助您查看您是否真的有 GC 问题，提供内存统计信息，更重要的是可以告诉您每一代中有多少内存，它们被收集分配的频率/秒等。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T00:35:51.657

首先，如果你想优化内存，你应该使用内存分析器。它将向您显示您需要的所有细节（瓶颈在哪里？我的代码是导致它还是库？）。像这样构建助手既乏味又容易出错。另外，在目前的状态下不会告诉你太多，不是吗？

其次，Vector2 是一种值类型，因此`new Vector2(20, 20)`不应导致任何垃圾（变量未关闭，没有装箱，没有迭代器块等）。如果您绘制多个字符串，请使用带有 StringBuilder 的 DrawString。

```
private StringBuilder text = new StringBuilder();

    protected override void Update(GameTime game_time)
    {
        text.Remove(0, text.Length);
        text.Append((float)GC.GetTotalMemory(true) / (1024 * 1024)));
        //base.Update(game_time);
    } 
```

> 如果是这样，那么我如何显示我需要的内容？

不确定我是否正确回答了您的问题，但是要显示一段时间内的内存使用情况以及您使用定制工具的详细信息。获取分析器。

编辑：

> 更重要的是，我尝试添加：

```
pos n2;
for (UInt32 n = 0; n < 100000; n++)
{
    n2 = new pos(n, 0);
    func(n2);
} 
```

什么是pos？它是像 Vector2 这样的值类型吗？Vector2 不应导致垃圾（通常）。

> 似乎 GC 对我造成了性能问题，以大约每秒一次的执行暂停形式出现。它们在 PC 上几乎看不到，但在 XBOX 上却非常明显。我这样做是为了分析是否是这种情况。

我知道你的痛苦。显而易见的解决方案是避免分配。如果无法避免，您可以构建一个简单的缓存机制（对象的 HashSet/Dictionary）并相应地更新值。在用户开始游戏之前尽可能多地加载。

# python - 'before_filter' 相当于 w/flask

> ID：10466962
> 
> 赞同：5
> 
> 时间：2012-05-05T23:58:31.897
> 
> 标签：python, ruby, flask, before-filter

在使用 ruby​​ 一段时间后，我又回到了 python。我正在使用烧瓶框架。

如何实现过滤器以在控制器操作开始时对请求运行方法，而不在每个控制器中放置相同的代码？我的第一个猜测是构建某种装饰器（例如@before_request，但乍一看似乎并不如此）。我刚刚（重新）熟悉python，几乎没有什么东西是遥不可及的，所以任何输入都表示赞赏。等价于 Rails 中的 before_filter 或 Sinatra 中的 before do 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T00:39:19.277

有一个`@app.before_request`可用的构造函数，如文档中给出的[SQLite 模式所示。](http://flask.pocoo.org/docs/patterns/sqlite3/)这在每个请求上运行。

# java - Android - Spinner Async 下载文件不保存

> ID：10466963
> 
> 赞同：0
> 
> 时间：2012-05-05T23:58:38.407
> 
> 标签：java, android, pdf, download, spinner

我有一些代码需要一组 url，我有一个用于文件名。url 被输入到异步下载任务中，文件名应该是它们在 SD 卡上的命名和保存方式。我相信它会尝试下载从微调器中选择的文件，但它们根本没有保存在 SD 卡上。此外，似乎我的进度条没有填充，它显示但保持为零。我假设它正在尝试下载的唯一原因是因为它位于文件进度条上的时间长度，有些长有些短。

这是代码：

```
public class SpinnerActivity extends Activity {

public static final int DIALOG_DOWNLOAD_PROGRESS = 0;
private ProgressDialog mProgressDialog;

Spinner spDownloadFrom;
private ArrayAdapter<CharSequence> spinnerArrayAdapter;
String url[] = {"http://www.becker.cl/bases.pdf",
        "http://www.pitt.edu/documents/campusmap0607.pdf", "http://www.aara.ca/reg3317/web_page_doc.pdf",
        "www.dataprotection.ie/documents/guidance/GuidanceFinance.pdf", "http://www.fmbb2012.com/JumpingQualifica1.pdf",
        "http://www.consulatdumaroc.ca/coloniefh22012.pdf", "http://www.rgrdlaw.com/media/cases/140_Complaint.pdf" };
String name[] = {"bases.pdf", "campusmap0607.pdf", "web_page_doc.pdf", "GuidanceFinance.pdf",
        "JumpingQualifica1.pdf", "coloniefh22012.pdf", "140_Complaint.pdf", };

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mProgressDialog = new ProgressDialog(SpinnerActivity.this);
    mProgressDialog.setMessage("Please be patient, file downloading...");
    mProgressDialog.setIndeterminate(false);
    mProgressDialog.setMax(100);
    mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);

    spDownloadFrom = (Spinner) findViewById(R.id.Spinner01);

    spinnerArrayAdapter = new ArrayAdapter<CharSequence>(this,
            android.R.layout.simple_spinner_item, name);
    spinnerArrayAdapter
            .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spDownloadFrom.setAdapter(spinnerArrayAdapter);

    spDownloadFrom.setOnItemSelectedListener(new SpinnerListener(
            spDownloadFrom));
}

public class SpinnerListener implements OnItemSelectedListener {
    Spinner sp;

    public SpinnerListener(View v) {
        sp = (Spinner) findViewById(v.getId());
    }

    @Override
    public void onItemSelected(AdapterView<?> parent, View v, int arg2,
            long arg3) {
        // Call to download class
        startDownload(arg2);

    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }
}

private void startDownload(int position) {
    DownloadFile downloadFile = new DownloadFile();
    downloadFile.execute(url[position]);
}

class DownloadFile extends AsyncTask<String, Integer, String> { // put your
                                                                // download
                                                                // code

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        mProgressDialog.show();
    }

    @Override
    protected void onProgressUpdate(Integer... progress) {
        super.onProgressUpdate(progress);
        mProgressDialog.setProgress(progress[0]);
    }

    @Override
    protected String doInBackground(String... aurl) {
        try {

            URL url = new URL(aurl[0]);
            URLConnection connection = url.openConnection();

            connection.connect();
            int fileLength = connection.getContentLength();
            int tickSize = 2 * fileLength / 100;
            int nextProgress = tickSize;

            Log.d(

            "ANDRO_ASYNC", "Lenght of file: " + fileLength);

            InputStream input = new BufferedInputStream(url.openStream());

            String path = Environment.getExternalStorageDirectory()
                    + "/Android/Data/"
                    + getApplicationContext().getPackageName() + "/files/" + name;
            File file = new File(path);
            file.mkdirs();
            File outputFile = file;

            OutputStream output = new FileOutputStream(outputFile);

            byte data[] = new byte[1024 * 1024];
            long total = 0;
            int count;
            while ((count = input.read(data)) != -1) {
                total += count;
                if (total >= nextProgress) {
                    nextProgress = (int) ((total / tickSize + 1) * tickSize);
                    this.publishProgress((int) (total * 100 / fileLength));
                }
                output.write(data, 0, count);
            }

            output.flush();
            output.close();
            input.close();
            mProgressDialog.dismiss();

        } catch (Exception e) {
        }
        return null;
    }

    protected void onProgressUpdate(String... progress) {
        Log.d("Downloading", progress[0]);

    }

    @Override
    protected void onPostExecute(String unused) {

        mProgressDialog.dismiss();

        File file = new File(Environment.getExternalStorageDirectory()
                + "/Android/Data/"
                + getApplicationContext().getPackageName()
                + "/files/" + name);
        Intent testIntent = new Intent(Intent.ACTION_VIEW);
        testIntent.setType("application/pdf");
        Intent intent = new Intent();
        intent.setAction(Intent.ACTION_VIEW);
        Uri uri = Uri.fromFile(file);
        intent.setDataAndType(uri, "application/pdf");
        try {
            startActivity(intent);
        } catch (ActivityNotFoundException e) {
            Toast.makeText(SpinnerActivity.this,
                    "No Application Available to View PDF",
                    Toast.LENGTH_LONG).show();
        }
    }
}
} 
```

除了打印到 LogCat 之外，这里是收到的错误：

```
05-06 00:23:39.087: E/Spinner(13841): exception
05-06 00:23:39.087: E/Spinner(13841): java.io.FileNotFoundException:     /mnt/sdcard/Android/Data/com.hellospinner/files/[Ljava.lang.String;@40517468 (Is a     directory)
05-06 00:23:39.087: E/Spinner(13841):   at     org.apache.harmony.luni.platform.OSFileSystem.open(Native Method)
05-06 00:23:39.087: E/Spinner(13841):   at     dalvik.system.BlockGuard$WrappedFileSystem.open(BlockGuard.java:232)
05-06 00:23:39.087: E/Spinner(13841):   at java.io.FileOutputStream.<init>    (FileOutputStream.java:94)
05-06 00:23:39.087: E/Spinner(13841):   at java.io.FileOutputStream.<init>    (FileOutputStream.java:66)
05-06 00:23:39.087: E/Spinner(13841):   at     com.hellospinner.SpinnerActivity$DownloadFile.doInBackground(SpinnerActivity.java:    131)
05-06 00:23:39.087: E/Spinner(13841):   at     com.hellospinner.SpinnerActivity$DownloadFile.doInBackground(SpinnerActivity.java:    1)
05-06 00:23:39.087: E/Spinner(13841):   at     android.os.AsyncTask$2.call(AsyncTask.java:185)
05-06 00:23:39.087: E/Spinner(13841):   at     java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
05-06 00:23:39.087: E/Spinner(13841):   at     java.util.concurrent.FutureTask.run(FutureTask.java:138)
05-06 00:23:39.087: E/Spinner(13841):   at     java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
05-06 00:23:39.087: E/Spinner(13841):   at     java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
05-06 00:23:39.087: E/Spinner(13841):   at java.lang.Thread.run(Thread.java:1019) 
```

固定代码：

```
public class SpinnerActivity extends Activity {

public static final int DIALOG_DOWNLOAD_PROGRESS = 0;
private ProgressDialog mProgressDialog;

Spinner spDownloadFrom;
private ArrayAdapter<CharSequence> spinnerArrayAdapter;
String url[] = {
        "http://www.becker.cl/bases.pdf",
        "http://www.pitt.edu/documents/campusmap0607.pdf",
        "http://www.aara.ca/reg3317/web_page_doc.pdf",
        "http://www.dataprotection.ie/documents/guidance/GuidanceFinance.pdf",
        "http://www.fmbb2012.com/JumpingQualifica1.pdf",
        "http://www.consulatdumaroc.ca/coloniefh22012.pdf",
        "http://www.rgrdlaw.com/media/cases/140_Complaint.pdf" };
String name[] = { "bases.pdf", "campusmap0607.pdf", "web_page_doc.pdf",
        "GuidanceFinance.pdf", "JumpingQualifica1.pdf",
        "coloniefh22012.pdf", "140_Complaint.pdf", };

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mProgressDialog = new ProgressDialog(SpinnerActivity.this);
    mProgressDialog.setMessage("Please be patient, file downloading...");
    mProgressDialog.setIndeterminate(false);
    mProgressDialog.setMax(100);
    mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);

    spDownloadFrom = (Spinner) findViewById(R.id.Spinner01);

    spinnerArrayAdapter = new ArrayAdapter<CharSequence>(this,
            android.R.layout.simple_spinner_item, name);
    spinnerArrayAdapter
            .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spDownloadFrom.setAdapter(spinnerArrayAdapter);

    spDownloadFrom.setOnItemSelectedListener(new SpinnerListener(
            spDownloadFrom));
}

public class SpinnerListener implements OnItemSelectedListener {
    Spinner sp;

    public SpinnerListener(View v) {
        sp = (Spinner) findViewById(v.getId());
    }

    @Override
    public void onItemSelected(AdapterView<?> parent, View v, int arg2,
            long arg3) {
        // Call to download class
        startDownload(arg2);

    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }
}

private void startDownload(int position) {
    DownloadFile downloadFile = new DownloadFile(position);
    downloadFile.execute(url[position]);
}

class DownloadFile extends AsyncTask<String, Integer, String> { // put your
                                                                // download
                                                                // code
    private int position;

    public DownloadFile(int position) {
        this.position = position;
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        mProgressDialog.show();
    }

    @Override
    protected void onProgressUpdate(Integer... progress) {
        super.onProgressUpdate(progress);
        mProgressDialog.setProgress(progress[0]);
    }

    @Override
    protected String doInBackground(String... aurl) {
        try {

            URL url = new URL(aurl[0]);
            URLConnection connection = url.openConnection();

            connection.connect();
            int fileLength = connection.getContentLength();
            int tickSize = 2 * fileLength / 100;
            int nextProgress = tickSize;

            Log.d(

            "ANDRO_ASYNC", "Lenght of file: " + fileLength);

            InputStream input = new BufferedInputStream(url.openStream());

            String path = Environment.getExternalStorageDirectory()
                    + "/Android/Data/"
                    + getApplicationContext().getPackageName() + "/files/";
            File file = new File(path);
            file.mkdirs();
            File outputFile = new File(file, name[position]);

            OutputStream output = new FileOutputStream(outputFile);

            byte data[] = new byte[1024 * 1024];
            long total = 0;
            int count;
            while ((count = input.read(data)) != -1) {
                total += count;
                if (total >= nextProgress) {
                    nextProgress = (int) ((total / tickSize + 1) * tickSize);
                    this.publishProgress((int) (total * 100 / fileLength));
                }
                output.write(data, 0, count);
            }

            output.flush();
            output.close();
            input.close();
            mProgressDialog.dismiss();

        } catch (Exception e) {
            Log.e("Spinner", "exception", e);
        }
        return null;
    }

    protected void onProgressUpdate(String... progress) {
        Log.d("Downloading", progress[0]);

    }

    @Override
    protected void onPostExecute(String unused) {

        mProgressDialog.dismiss();

        File file = new File(Environment.getExternalStorageDirectory()
                + "/Android/Data/"
                + getApplicationContext().getPackageName() + "/files/"
                + name[position]);
        Intent testIntent = new Intent(Intent.ACTION_VIEW);
        testIntent.setType("application/pdf");
        Intent intent = new Intent();
        intent.setAction(Intent.ACTION_VIEW);
        Uri uri = Uri.fromFile(file);
        intent.setDataAndType(uri, "application/pdf");
        try {
            startActivity(intent);
        } catch (ActivityNotFoundException e) {
            Toast.makeText(SpinnerActivity.this,
                    "No Application Available to View PDF",
                    Toast.LENGTH_LONG).show();
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T00:42:56.477

问题来自这一行：

```
String path = Environment.getExternalStorageDirectory()
                + "/Android/Data/"
                + getApplicationContext().getPackageName() + "/files/" + name;
//                                                                         ^ 
```

`name`是一个文件名数组，你想要的是单个文件名。您需要的是传递`position`via`DownloadFile`构造函数。像这样的东西：

```
private void startDownload(int position) {
    DownloadFile downloadFile = new DownloadFile(position);
    downloadFile.execute(url[position]);
}

class DownloadFile extends AsyncTask<String, Integer, String>
{
    private int position:

    public DownloadFile(int position){this.position = position;}

    // ...

    String path = Environment.getExternalStorageDirectory()
                + "/Android/Data/"
                + getApplicationContext().getPackageName() + "/files/" + name[position];
    // ...
} 
```

# nosql - NoSQL 和分析

> ID：10466966
> 
> 赞同：0
> 
> 时间：2012-05-05T23:59:24.413
> 
> 标签：nosql, analytics

我开始构建一个可能需要扩展的应用程序，所以我正在认真考虑 NoSQL。阻止我阅读 NoSQL 的一件事是我存储在其中的数据用于分析的可用性。我的应用程序的主要好处之一是趋势（年龄、位置等）。由于我无法完全将我的心态从关系型转向 NoSQL，我不确定我是否只是看错了问题，或者是否真的需要通过实时、广告提供关系数据-临时查询。

请让我直截了当！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:59:43.610

当您知道关系数据库将中断或难以使用时，应考虑选择 NoSql 解决方案：通常有两个主要原因：

1.  数据量。在谈论体积时，我们至少在谈论 500TB
2.  非结构化数据或动态模式需求

横向可扩展性只是 NoSql 引擎的结果（自动共享）

如果您没有任何这些原因，您可以使用 rdbms + sharding 来管理。在 rdbms 系统上也可以进行分析。NoSql 还没有准备好取代 RDBMS，但在某些情况下非常强大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T04:50:54.500

我最近遇到了 InfiniDB，它将 MySQL 前端放在基于 MapReduce 的后端上，专门用于分析。水平和垂直缩放，他们声称它非常快。有关 InfiniDB 的详细信息，请访问 www.calpont.com。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T23:36:36.677

> 如果确实需要通过实时、即席查询获得关系数据。

这取决于您的用例。如果您正在查看趋势，例如 90 天的滚动平均值，那么过去 6 小时的数据可能不会产生影响。但是，如果您的应用程序正在尝试为电子商务实施动态定价，那么您*将*需要第二个。

# ios - iOS解析XML中的西班牙字母出现奇怪

> ID：10466967
> 
> 赞同：2
> 
> 时间：2012-05-05T23:59:38.253
> 
> 标签：ios, xml, encoding, utf-8

我正在构建一个 iOS 应用程序，作为其功能的一部分，它解析 XML 文档并根据那里的数据设置一些标签。我在解析几个字符时遇到了几次麻烦 - 具体来说，西班牙字符`ó`显示为`√≥`. 根据文档，我正在解析的 XML 应该是 UTF-8 编码的，当我将其解析为应用程序中的 XML 文件时，我使用 NSUTF8StringEncoding，所以我不确定还有什么问题。

谢谢

# jquery - 重写选择选项值以排除特定的数组段

> ID：10466977
> 
> 赞同：0
> 
> 时间：2012-05-06T00:01:45.420
> 
> 标签：jquery, arrays, option, jquery-selectbox

这与我昨天的问题有关，@iambriansreed[在这里完美地回答了这个问题。](https://stackoverflow.com/questions/10457954/jquery-remove-select-options-based-on-attribute-array-other-select-box-select)

在试图更进一步时，我的大脑短路了。另外，jquery api 站点已关闭。

我有两个选择框；第二个中的某些选项会根据第一个的选择而被删除。每个选择框的选项值都是数组。

我现在需要做的是更改第二个选择框的值，以便删除与第一个不匹配的任何数组段。我整天都在做它，它让我头晕目眩。[所以，在这个 fiddle](http://jsfiddle.net/dilettante/3VfU4/)中，如果在#selectbox1 中选择了“室内乐”，那么#selectbox2 的选项 Chamber Music 5 的值应该变为

```
<option value="620069,1547340">Chamber Music 5</option>, 
```

因为另一个值（328874）在原始数组中不匹配。可能的？笨重？我已经在比较数组，所以已经不匹配了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T01:10:12.337

我不太确定我是否理解这个问题，特别是“ *#selectbox2 的选项 Chamber Music 5 的值应该更改为 Chamber Music 5* ”部分。我假设您要更改第二个选择框中的选项值，具体取决于第一个选择框中的选定值。

像这样的东西会起作用：http: [//jsfiddle.net/3VfU4/3/](http://jsfiddle.net/3VfU4/3/)

```
// check each value
var values = this.value.split(',');
var new_values = [];
var result = true;

for(i in values) {
    if($.inArray(values[i], selected) > -1) {
        result = false;
        new_values.push(values[i]);
    }
}

this.value = new_values.join(',');

return result; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T00:58:48.327

恐怕我对 jQuery 的熟悉程度不足以帮助你，但我想我可以分享当一个 api 站点关闭时我所做的事情。

您仍然可以通过查看 google 缓存页面来查看该页面。如果您使用的是 Chrome，它是“未找到页面”屏幕上的一个选项。

或者其他方式，看这里： http: [//www.blueglass.com/blog/everything-you-should-know-about-google-cache/](http://www.blueglass.com/blog/everything-you-should-know-about-google-cache/)

# c++ - 异常非 gérée à 0x100e3cf2 dans shervinemami.exe：0xC0000094：整数除以零

> ID：10466978
> 
> 赞同：-5
> 
> 时间：2012-05-06T00:02:06.063
> 
> 标签：c++, visual-studio-2008, opencv

帮助我如何解决它，[尝试执行我的代码时的警报窗口][1]

注意到调试很好并且成功但是当尝试执行代码时，我在输出窗口中收到一条消息；Exception non gérée à 0x100e3cf2 dans shervinemami.exe : 0xC0000094: Integer 除以零..这意味着有一个除以零的异常，这是代码：

```
 IplImage* LOULILI::cropFace(IplImage*image, CvPoint eye_left, CvPoint eye_right,double offset_pct[2], CvSize dest_sz)
          {
      //calculate offsets in original image
            double offset_h = offset_pct[0]* dest_sz.width;
            double offset_v = offset_pct[1]*dest_sz.height;
           //get the direction
           double   eye_directionX,eye_directionY;
           eye_directionX= double(eye_right.x - eye_left.x);
            eye_directionY=double(eye_right.y - eye_left.y);
          // calc rotation angle in radians
          double rotation;
          rotation =  double(-atan2(eye_directionY,eye_directionX )*180/PI);
           // distance between them
            double dist = distancePoints(eye_left, eye_right);
             //calculate the reference eye-width
             double reference = dest_sz.width - 2.0*offset_h;
           //scale factor
              double scale = dist/reference;
          //rotation par rapport à l'oeil gauche
         //matrice de rotation
      cv::Mat affine_matrix;
       affine_matrix =cv::getRotationMatrix2D( eye_left, rotation, scale );
           //mtx est la conversion de image IplImage* en matrice mtx
            cv::Mat mtx=cv::Mat(image,true); 
          cv::Mat mtx2;
         cv::warpAffine(mtx, mtx2, affine_matrix,mtx.size(),cv::INTER_LINEAR,                                cv::BORDER_CONSTANT,cv::Scalar::all(255));
  //mtx est la conversion de matrice mtx2 en  image IplImage* 
  //IplImage* image1 =&mtx2.operator IplImage();
 IplImage image1 =mtx2;
 IplImage* im22=(IplImage*)&image1;
      //crop the rotated image
         double crop_x =double(eye_left.x) - scale*offset_h;
       double crop_y =double(eye_left.y) - scale*offset_v;

 double crop_size0 = (double)dest_sz.width*scale;
  double crop_size1= (double)  dest_sz.height*scale;
         CvRect region;
       region.x=cvRound(crop_x);
       region.y=cvRound(crop_y);
        region.width=cvRound (crop_size0);
         region.height=cvRound(crop_size1);

            IplImage* im44=cropImage(im22,region);
          //crop((int(crop_xy[0]), int(crop_xy[1]), int(crop_xy[0]+crop_size[0]),                       int(crop_xy[1]+crop_size[1])))

          IplImage* image3=resizeImage(im44, dest_sz.width, dest_sz.width);
           return im44;
                  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T00:50:49.160

该代码中没有整数除法，因此我们无法提供帮助。您可能希望在调试模式下编译并将调试器设置为在 C++ 异常时中断（您可以在 Visual Studio 的“异常”窗口中执行此操作）。

# node.js - R.js and Coffeescript in Node

> ID：10466981
> 
> 赞同：4
> 
> 时间：2012-05-06T00:02:54.040
> 
> 标签：node.js, coffeescript, requirejs

New to node. Can somebody help me understand how to use/configure r.js with coffeescript in a nodejs app?

To elaborate, I'm a little lost on a few things. Where to include r.js in the project. A simple use case of require and define with r.js. Where to include cs-require in the source. Which parts can be installed with npm install I asked this question earlier but it seemed as though I was asking 10 questions so I was trying to be more concise. I was hoping someone could point me to an example git because I'm having a hard time finding any.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T03:00:11.600

You should be able to install requirejs via

```
npm install requirejs 
```

then you can use it's built-in 'r' function via the executable:

```
node_modules/bin/r 
```

which you'll probably want to use as part of your backend build-script.

# ruby - 为什么 Ruby 不能加载文件？

> ID：10466983
> 
> 赞同：0
> 
> 时间：2012-05-06T00:03:56.683
> 
> 标签：ruby

我想要一个名为“factories.rb”的文件：

```
require File.join(File.dirname(__FILE__), 'factories.rb' ) 
```

并收到此错误：

```
/home/sean/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems
/custom_require.rb:36:in `require': cannot load such file -- /home/sean/rand/test/factories.rb (LoadError) 
```

我安装了 ruby​​-1.9.3-p194。为什么在错误信息中还说 1.9.1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T00:16:38.303

通常，Factory Girl 会自动加载 factory.rb 文件（而您的文件在正确的位置）。

我经常遇到需要语法的问题（很可能只是我），可以试试这个：

```
require File.dirname(__FILE__) + '/factories' # it's okay to leave off the .rb 
```

此外，该文件夹是 1.9.1 只是因为 ruby​​ 核心团队决定在整个 1.9 发布计划中保留名称 1.9.1。我会尝试找到一个链接。

编辑：这是之前关于 SO 上关于文件夹为 1.9.1 的讨论的链接： [第一个答案很好。](https://stackoverflow.com/questions/8564210/why-are-we-installing-ruby-1-9-2-1-9-3-gems-into-a-1-9-1-folder)

# c++ - 在 C++ 中解析格式化的用户输入

> ID：10466984
> 
> 赞同：0
> 
> 时间：2012-05-06T00:04:09.703
> 
> 标签：c++, parsing, user-input

对于一个项目，我需要实现图形着色问题的解决方案。但是，输入需要具有特定的语法，我不知道如何解析以访问存储在变量中所需的数据。

输入约束是首先输入颜色的数量，然后是顶点的数量，然后是一系列边。边缘应以格式输入`(v1 v2)`。该序列以 v1 = -1 终止。所以, `(-1 0)`, `(-1 -1)`, 等等。

所以输入最终会看起来像这样的东西：

```
2 4 (0 1)(1 2)(2 3)(3 0)(-1 -1) 
```

任何帮助将不胜感激，因为我什至不知道从哪里开始！我知道这里有类似的问题，但是我不知道如何将他们的解决方案应用于这个特定的实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T00:21:37.757

尝试这样的事情：

```
#include <iostream>

static inline int error(int n) { std::cerr << "Input error!\n"; return n; }

int main()
{
    int nc, nv;  // number of colours and vertices

    if (!(std::cin >> nc >> nv)) { return error(1); }

    for (int i = 0; i != nv; ++i)
    {
        char lb, rb;
        int v1, v2;
        if (!(std::cin >> lb >> v1 >> v2 >> rb) || lb != '(' || rb != ')') { return error(1); }

        std::cout << "We have a pair [" << v1 << ", " << v2 << "]\n";
    }
} 
```

注意输入处理的关键原则：所有输入操作都出现在条件上下文中。正如@jedwards 所说，输入可以是任意的`std::istream`，例如字符串流或文件流，或者在我的示例`std::cin`中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T00:18:40.897

您可能想查看[标准输入/输出](http://www.cplusplus.com/doc/tutorial/basic_io/)。基本上，要求用户输入输入，并像这样得到它：`std::string mystr; std::getline(con, mystr);`然后使用`>>`运算符和解析它`std::stringstream`。您可以通过将其存储在字符中来跳过空格或括号。因此，要获得前两个数字，请执行以下操作：`int colors, verts; char c; stringstream(mystr) >> colors >> c >> verts;`然后您可以将其扩展为其余的输入。

# go - LiteIDE x14 是否可以正常工作？

> ID：10466988
> 
> 赞同：7
> 
> 时间：2012-05-06T00:04:55.950
> 
> 标签：go, liteide

我正在为 golang 试用 LiteIDE，没有文档可言，显然也没有论坛。我已经为我的环境设置了 Env 并开始安装。当我尝试在 hello.go 文件（作为文件或项目）上使用它时，我得到的只是

```
<action id="Run" cmd="${TARGETPATH}" args="${TARGETARGS}">
<start=" " workdir="C:/liteide.projects"/>

<error msg="process failed to start" />

</action> 
```

（抱歉格式化，但本论坛中的代码示例标签无法处理 XML 块。）

很多其他人也看到了同样的事情。

显示的 TARGETPATH 和 TARGETARGS 是什么？

有没有关于如何配置 LiteIDE 的文档？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T12:49:28.317

只是对来这里的人的更新：我开始在 Windows 7 上使用 LiteIDE X (x14.1)，它运行良好。:-) 轻巧高效...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T14:53:03.440

LiteIDE 显然不起作用。我提交[了这个错误报告](http://code.google.com/p/golangide/issues/detail?id=53)，他们的建议是尝试下一个版本的最新测试版。然而，这也不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-12T22:45:59.297

我没有足够的代表发表评论，只是想补充一点，最新版本的 x21 运行良好。这回答了您的问题“它是否有效？” 响亮的是！=D

由于项目已移至 Github，还希望提供正确的常见问题解答链接。[https://github.com/visualfc/liteide/wiki/Faq](https://github.com/visualfc/liteide/wiki/Faq)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-02T18:26:02.883

我已经使用 liteide 6 个多月了，效果很好。我正在使用的当前版本是 X27.1 并在 OpenSuSE 上运行它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-07T18:38:45.113

LiteIDE，同时版本 X30.3（2016 年 12 月），相当成熟并且仍在积极维护。我在 Windows 10、Debian Jessie 和 Ubuntu 上使用它。

它是一个简单、开源、跨平台的 Go IDE，具有其他 IDE 所没有的独特功能。我遇到的几个问题与我的 X11 环境有关，而不是与 LiteIDE 本身有关。

当前支持以下操作系统：

*   Windows x86（32 位或 64 位）
*   Linux x86（32 位或 64 位）
*   MacOS X10.6 或更高版本（64 位）
*   FreeBSD 9.2 或更高版本（32 位或 64 位）
*   OpenBSD 5.6 或更高版本（64 位）

还有一些构建指令可以让您在其他平台上构建 LiteIDE。只是不要指望对此的支持。

# javascript - 如何隐藏移动 safari 的地址栏不出现，即使是向上拖动？

> ID：10466994
> 
> 赞同：2
> 
> 时间：2012-05-06T00:06:29.697
> 
> 标签：javascript, jquery, mobile, safari, webkit

我知道这方面有很多主题，但没有一个能像 Twitter/Google 那样做。

在您的 iphone 4 上访问 m.twitter.com。当您拖动时，请注意 url 栏永远不会出现。除非您将 Twitter 的导航栏拖到顶部……然后 url 栏就会出现。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T00:09:50.143

通过滚动窗口*就够了*。我在一些生产代码中使用了以下内容。

```
if(/andro|iP[ha]/i.exec(navigator.userAgent) && !location.hash) scrollTo(0, 1); 
```

编辑：这不会阻止 URL 栏出现，但在页面加载时它不会可见。完全不显示我所知道的地址栏的唯一方法是通过元标记使网页（单个网页，记住 - 不允许 URL 导航）“启用 webapp”，并让用户将其添加到他们的主屏幕。然后，该快捷方式将打开一个没有任何 chrome 的 Safari 变体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T19:00:12.540

Twitter 使用的技巧是在设计网站时了解大多数用户可能会抓取页面的哪一部分。在大多数用例中，您将向下滚动 Twitter 流，从而使按钮栏保持原样。

现在尝试触摸并向下拖动按钮栏，您会注意到 iPhone 地址栏实际上出现在页面顶部。通过在页面加载时向下滚动整个界面（如 AKX 所述）并在时间轴上与整个页面分开响应拖动事件，您会感觉到他们已经找到了一种消除地址栏的方法实际上是这样。

# mysql - Mysql查询匹配两列

> ID：10466997
> 
> 赞同：1
> 
> 时间：2012-05-06T00:07:29.323
> 
> 标签：mysql

我有以下表结构：

```
Id, SpouseId
1, 2
2, 1 
```

基本上这告诉了两个人是否结婚。

我需要编写一个 mysql 查询，在数据库中返回已婚夫妇。

我首先想我会检查 SpouseId 是否不为空，但这还不够，因为我还需要检查 Id 是否存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T00:10:12.670

使用`INNER JOIN`反对自身返回两个伙伴都存在的对。这样，为了满足 JOIN 条件，配偶不仅必须是非空的，而且还必须有一个匹配的行 as `Id`。希望您没有任何`SpouseId`对应`SpouseId`的不是另一个的实例`Id`（即 A -> 嫁给 B -> 嫁给 C）

```
SELECT
   p.Id AS person,
   s.Id AS spouse
From 
  people p
  INNER JOIN people s ON p.SpouseId = s.Id
/* Should eliminate the duplicate, since one pair will always have 
   a higher id for the person than the spouse, and the other is lower. */
WHERE p.person > p.spouse 
```

但是请注意，这将为每对返回 2 行，因为每个伙伴都将同时出现`Id`在`SpouseId`。

### 更新

添加该`WHERE`子句是为了消除每对已婚夫妇的一行。这个想法是，对于每一对，都有一个较高的 id 和一个较低的 id。id 较高的对`person`被保留，而 id 较低的对`person`被淘汰。

# neo4j - 在 Neo4j 中 WITH 有什么作用

> ID：10466999
> 
> 赞同：2
> 
> 时间：2012-05-06T00:07:35.247
> 
> 标签：neo4j

我无法从[文档](http://docs.neo4j.org/chunked/snapshot/query-with.html)中理解这个例子：

```
START david=node(1)
MATCH david--otherPerson-->()
WITH otherPerson, count(*) as foaf
WHERE foaf > 1
RETURN otherPerson 
```

在 WITH 行中 otherPerson 和 count(*) 做了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T02:25:33.963

您在这里看到的是两个由 with 连接的查询。With 作为第一个查询的返回和第二个查询的“开始”。它设置的是传递的上下文的一部分。

```
normally you would have
START david=node(1)
MATCH david--otherPerson-->()
RETURN otherPerson, count(*) as foaf 
```

然后在您的调用代码中进行过滤。

with 可以直接在 cypher 中开始下一个查询，它只能看到 with 部分中声明的内容，在这种情况下：otherPerson 和 foaf 第一个查询的其他标识符和数据不再可用。