# StackOverflow 问答 10570000-10570999

# php - 如何使用 Symfony2 使 form_rest() 不显示字段？

> ID：10570002
> 
> 赞同：71
> 
> 时间：2012-05-13T07:22:47.963
> 
> 标签：php, forms, symfony, twig

我已经开始使用 Symfony2 但我遇到了一些问题。我想手动渲染字段，但它不起作用，因为我渲染的字段也与`form_rest()`函数一起显示，所以我有两个相同的字段。

这是我的代码：

```
<div>
     {{ form_errors(form.contenu) }}
     <textarea id="{{ form.contenu.vars.id }}" name="{{ form.contenu.vars.full_name }}">{{ form.contenu.vars.value }}</textarea>
</div> 
```

而且，在表格的最后，我必须这样写：

```
{{ form_rest(form) }} 
```

但它显示“contenu”字段:(

你知道有什么问题吗？

* * *

## 回答 #1

> 赞同：205
> 
> 时间：2012-11-21T10:08:05.553

另一种选择是将字段显式标记为已渲染：

```
{% do form.contenu.setRendered %} 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2016-05-18T13:49:41.143

*在我看来，*另一种不那么老套的方法是：

```
{{ form_widget(form._token) }} // render the CSRF Token
{{ form_end(form, {'render_rest': false}) }} // do not render anything else 
```

它来自[官方文档](http://symfony.com/doc/current/reference/forms/twig_reference.html#form-rest-view-variables)（v3.0），所以我猜这几乎是*最佳实践。*

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2012-05-13T09:49:11.223

`{{ form_rest(form) }}`在“手动”渲染每个字段之后，最后进行。如果您将它用于 CSRF 令牌，您始终可以使用以下方式渲染它：

```
{# Token CSRF #}
{{ form_widget(form._token) }} 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-05-13T11:17:26.157

您不想显示某些字段的情况表明表单设计不当。您可以将一些参数输入其中`__construct`以使其有条件（例如，包含/排除某些字段），或者您可以只创建单独`Form`的类（在我看来，这有点矫枉过正）。

几个月前，当用户插入/更新记录时形式不同时，我遇到过常见情况。是这样的：

```
...
public function __construct($isUpdateForm){
    $this->isUpdateForm= $isUpdateForm;
}

public function buildForm(FormBuilder $builder, array $options){
    ....
    $builder->add('some_filed', 'text', ..... );

    if ( $this->isUpdateForm ){
        $builder->add(.....);
    }
    ....
}
.... 
```

如果由于某些原因您无法重构表单类，您仍然可以显示不需要的字段，但将它们包装到`<div>`具有 CSS`display:none`属性的位置。这样“它们仍然存在”（并且无论如何都会正常处理）但对用户不可见。

希望这可以帮助...

# android - 增加加速度计传感器灵敏度，并在手机晃动时增加屏幕亮度

> ID：10570003
> 
> 赞同：0
> 
> 时间：2012-05-13T07:23:04.657
> 
> 标签：android, android-layout, android-intent, android-widget

我想在这段代码中实现一些指令来增加加速度传感器的灵敏度，并在手机摇晃时增加屏幕的亮度

```
sensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
sensorManager.registerListener(this,         sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER), SensorManager.SENSOR_DELAY_NORMAL);
lastUpdate = System.currentTimeMillis();

@Override
public void onSensorChanged(SensorEvent event) {
if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER) {                                     getAccelerometer(event);
}
}   
private void getAccelerometer(SensorEvent event) {
super.onResume();
float[] values = event.values;
// Movement
float x = values[0];
float y = values[1];
float z = values[2];
float accelationSquareRoot = (x * x + y * y + z * z)
/ (SensorManager.GRAVITY_EARTH * SensorManager.GRAVITY_EARTH);
long actualTime = System.currentTimeMillis();
if (accelationSquareRoot >= 2) //
{
if (actualTime - lastUpdate < 200) {            
return;
}           
lastUpdate = actualTime;            
Toast.makeText(this, "Device was shuffed", Toast.LENGTH_SHORT).show();  
if (mMediaPlayer.isPlaying() == false){ 
mMediaPlayer.start();               
}
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T07:40:50.177

```
int stretch = 50;
int boundary = 5;

float x = values[0];
float y = values[1];
float z = values[2];

x *= stretch;
y *= stretch;
z *= stretch;

if (x > 5 || x < -5) 
   x = 0;
if (y > 5 || y < -5) 
   y = 0;
if (z > 5 || z < -5) 
   z = 0; 
```

只是一个非常基本的过滤器

就屏幕亮度而言：

```
private void setBrightness(int brightness) {  
try {  
  IHardwareService hardware = IHardwareService.Stub.asInterface(  
  ServiceManager.getService("hardware"));  
  if (hardware != null) {  
    hardware.setScreenBacklight(brightness);  
  }  
} catch (RemoteException doe) {            
  }          
} 
```

# php - 在html中创建一个登录框

> ID：10570013
> 
> 赞同：0
> 
> 时间：2012-05-13T07:25:34.920
> 
> 标签：php

大家好，我正在尝试在我的 html 页面顶部创建一个登录框，我使用的是 php，因为如果用户登录然后我会显示“欢迎，（他的用户名）”，否则我会显示用户名和密码。她是代码：

```
    <?php
    session_start();

```
if(!isset($_SESSION["$username"]))
{
     print "&lt;div class=\"login\"&gt;Welcome, $username &lt;br/&gt;&lt;font Style=\"font-size:12px;\"&gt;&lt;a href=\"edit.php\"&gt;Edit Account&lt;/a&gt; | &lt;a href= \"log_out.php \"&gt;Logout&lt;/a&gt;&lt;/font&gt;";
}

else
{

    print "div class=\"login\"&gt;
    &lt;form method=\"post\" action=\"login.php\"&gt;
    Username:&lt;input type=\"text\" size=\"30\" name=\"username\"/&gt;&lt;br/&gt;
    Password:&lt;input type=\"password\" size=\"30\" name=\"password\"/&gt;&lt;br/&gt;
    &lt;font Style=\"font-size:12px;\"&gt;&lt;a href=\"forgotpass.html\"&gt; forgot  password? &lt;/a&gt; | &lt;a href= \"register.html \"&gt;Register&lt;/a&gt;&lt;/font&gt;&lt;br/&gt;
    &lt;input type=\"submit\" value=\"Login\" class=\"right\"/&gt;
    &lt;/form&gt;";
 }

 ?&gt; 
```

如果您在 .php 文件上执行此操作，则输出有点奇怪，例如登录应该是一个按钮，但结果是文本，如果打印，则为 else。谁能告诉我任何替代方案？

            回答 #1

赞同：0

时间：2012-05-13T07:31:09.210

You must change equivalent < >(html safe symbols) on special characters <>. For example:

```
echo '<div class=\"login\">Welcome, $username <br/>'; 
```

            回答 #2

赞同：0

时间：2012-05-13T07:31:20.433

Not sure what's your point without having a database but...
Try this [tutorial](http://www.webgeekly.com/tutorials/php/how-to-make-a-login-system-with-php/)

            回答 #3

赞同：0

时间：2012-05-13T07:37:31.703

Dont use `&gt; and $lt;` Replace them with `< and >`

```
<?php
    session_start();

    if(!isset($_SESSION["$username"])) {
     echo '<div class="login">Welcome, '.$username.' </div><font style="font-size:12px;"><a href="edit.php">Edit Account</a> | <a href="log_out.php">Logout</a></font>;';
    } else {

    echo '<div class="login">
            <form method="post" action="login.php">
                Username:<input type="text" size="30" name="username"/><br/>
                Password:<input type="password" size="30" name="password"/><br/>
                <font Style="font-size:12px;"><a href="forgotpass.html"> forgot  password? </a> | <a href= "register.html ">Register</a></font><br/>
                <input type="submit" value="Login" class="right"/>
            </form>
        </div>';

    }

 ?> 
```

            回答 #4

赞同：0

时间：2012-05-13T07:30:25.970

[使用htmlspecialchars_decode()](http://php.net/manual/en/function.htmlspecialchars-decode.php)替换`&gt;`和`$lt;`（文本搜索和替换）`<`和`>`或解码您的 php 字符串。

```

# java - Java 打印机状态不起作用

> ID：10570017
> 
> 赞同：3
> 
> 时间：2012-05-13T07:27:37.783
> 
> 标签：java, printing

我有一台 USB 打印机，我发现我无法知道我的打印机作业是否正确打印，因为 JobTransferComplete 方法是在作业到达打印机假脱机而不是打印机时调用的。如果我关闭打印机，JVM 会继续打印而不会发出任何通知。我对吗？

# iphone - 获取目录详细信息的 API 是什么？

> ID：10570019
> 
> 赞同：1
> 
> 时间：2012-05-13T07:28:06.370
> 
> 标签：iphone, objective-c, ipad

我是 Objective-c 的新手，我想获取本地目录的详细信息（如名称、大小、上次修改时间）。是否有任何 API 可以提供帮助？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T07:32:22.127

希望你能在这里找到你的答案：

*   [获取文件或目录的属性](http://www.techotopia.com/index.php/Working_with_Directories_in_Objective-C)

> 可以使用 **attributesOfItemAtPath**方法获取文件或目录的属性。这将目录的路径和一个可选的 NSError 对象作为参数，关于任何错误的信息将被放入其中（如果不需要此信息，可以指定为 NULL）。结果以 NSDictionary 字典对象的形式返回（有关使用字典对象的详细信息，请参阅 Objective-C 字典对象）。

这本词典的一些键：

```
NSFileType
NSFileTypeDirectory
NSFileTypeBlockSpecial
NSFileTypeUnknown
NSFileSize
NSFileModificationDate
NSFileOwnerAccountName
NSFileGroupOwnerAccountName
NSFilePosixPermissions
NSFileSystemNumber
NSFileCreationDate
NSFileOwnerAccountID
NSFileGroupOwnerAccountID 
```

**上述文章中的示例：**

*（我们可以使用以下代码摘录提取 /tmp 目录的创建日期、文件类型和 POSIX 权限）*

```
NSFileManager *filemgr;
NSDictionary *attribs;

filemgr = [NSFileManager defaultManager];

attribs = [filemgr attributesOfItemAtPath: @"/tmp" error: NULL];

NSLog (@"Created on %@", [attribs objectForKey: NSFileCreationDate]);
NSLog (@"File type %@", [attribs objectForKey: NSFileType]);
NSLog (@"POSIX Permissions %@", [attribs objectForKey: NSFilePosixPermissions]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T08:19:10.187

最前沿（2012 年 5 月 13 日）正在使用 CFURL/NSURL 属性：

```
id outName = nil;
NSString * key = NSURLNameKey;
NSError * outError = nil;

if (YES == [url getResourceValue:&value forKey:key error:&outError]) {
  NSString * name = outName;
  ...
} 
```

注意：确保您只请求您需要的内容，并注意有批量请求方法/功能可以最大限度地减少冗余请求。如果使用 NSURL，你可以使用：

```
NSArray * keys = ...;
NSError * outError = nil;
NSDictionary * properties = [url resourceValuesForKeys:keys error:&outError]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T07:31:44.020

您应该查看[NSFileManager](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsfilemanager_Class/Reference/Reference.html) API。特别是`-attributesOfItemAtPath:error:`方法。

# javascript - 使用ajax从java脚本调用restfulwebservice

> ID：10570022
> 
> 赞同：0
> 
> 时间：2012-05-13T07:29:01.437
> 
> 标签：javascript, ajax, html

我正在尝试调用一个以字符串格式返回 jsonobject 的 restful webservice ..请求被发送到服务器但在这里我没有得到响应任何人都可以帮助我吗？我在chrome浏览器中测试..

```
 xmlhttp=new XMLHttpRequest();
 var url = "http://localhost:8080/DataWeb/rest/datastore/getData";
 xmlhttp.open("GET",url,true);
 xmlhttp.send();
 var res=xmlhttp.responseText;
 xmlhttp.onreadystatechange=function() {
      if (xmlhttp.readyState==4 && xmlhttp.status==200) {
           document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
      } else {
           document.getElementById("myDiv").innerHTML=xmlhttp.readyState +","+ xmlhttp.status;
      }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T07:46:12.780

“没有回应”是什么意思？responseText 中没有字符串或 if() 中的代码永远不会执行？我个人会切换send()和xmlhttp.onreadystatechange()的顺序，先定义处理onreadystatechange的函数，然后发送请求。

要调查请求，您可以将其打印到控制台（在 onreadystatechange 内）

```
console.log(xmlhttp) 
```

看看它实际包含什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T07:49:31.107

最好先分配“onreadystatechange”处理程序，然后才调用“send”方法。否则，请求会在您处理之前执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T09:38:31.513

像这样更改您的代码：

```
var xmlhttp=new XMLHttpRequest();
var url = "http://localhost:8080/DataWeb/rest/datastore/getData";
xmlhttp.onreadystatechange=function() {
    if (xmlhttp.readyState==4 && xmlhttp.status==200) {
        document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
    } else {
        document.getElementById("myDiv").innerHTML=xmlhttp.readyState +","+ xmlhttp.status;
    }
}
xmlhttp.open("GET",url);
xmlhttp.send(); 
```

此外，请考虑使用 jQuery 等库，这样您就不必处理所有这些样板代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T14:03:21.197

试试这个 jquery 代码，

```
 $.ajax({
  type: 'GET',
  url: "http://localhost:8080/DataWeb/rest/datastore/getData",
  dataType: "xml",
  success: function(xml){
    $("#myDiv").html(xml);
  }   
}); 
```

这样可以解决不同浏览器编写不同代码的问题。

注意：在您的页面中编写上述脚本之前，请包含最新的 jquery.js 文件。

谢谢

# arrays - 从数组数据而不是范围创建图表

> ID：10570023
> 
> 赞同：21
> 
> 时间：2012-05-13T07:30:17.290
> 
> 标签：arrays, excel, vba, charts, range

是否可以不从范围，而是从数组数据创建图表（例如双 Y 轴折线图）？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-13T14:40:27.793

是的。您可以将数组分配给图表上对象的`XValues`和`Values`属性。`Series`例子：

```
Dim c As Chart
Dim s As Series
Dim myData As Variant

Set c = ActiveChart ' Assumes a chart is currently active in Excel...
Set s = c.SeriesCollection(1)

myData = Array(9, 6, 7, 1) ' or whatever
s.Values = myData 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-14T09:43:26.920

You can assign arrays to chart series in Excel 2007 onwards but in previous versions I believe there is a 255 character limit for the length of each series. A method I have used to work around this restriction is shown in the following random walk example:

```
Sub ChartArray()

Dim x(0 To 1000, 0 To 0) As Double
Dim y(0 To 1000, 0 To 0) As Double
x(0, 0) = 0
y(0, 0) = 0
For i = 1 To 1000
    x(i, 0) = i
    y(i, 0) = y(i - 1, 0) + WorksheetFunction.NormSInv(Rnd())
Next i

Charts.Add
ActiveChart.ChartType = xlXYScatterLinesNoMarkers
With ActiveChart.SeriesCollection
    If .Count = 0 Then .NewSeries
    If Val(Application.Version) >= 12 Then
        .Item(1).Values = y
        .Item(1).XValues = x
    Else
        .Item(1).Select
        Names.Add "_", x
        ExecuteExcel4Macro "series.x(!_)"
        Names.Add "_", y
        ExecuteExcel4Macro "series.y(,!_)"
        Names("_").Delete
    End If
End With
ActiveChart.ChartArea.Select

End Sub 
```

An alternative method is to assign names to the arrays (similar to above workaround) and then set the series to refer to the assigned names. This works ok in all versions as long as you save in xls format, but there appears to be a length limitation for named arrays of 8192 characters when saving to the new xlsx/xlsm/xlsb formats.

# jquery - Jquery 复合迷你图

> ID：10570026
> 
> 赞同：3
> 
> 时间：2012-05-13T07:30:29.887
> 
> 标签：jquery, composite, sparklines

我是迷你图的新手，需要一些帮助。我从 mysql 获取数据并`span`使用`class=sparks`. 该图已生成，但是当我创建另一个`span`具有相同类但不同数据（复合线）的标签时，我收到以下消息：

> 尝试将复合迷你图附加到没有现有迷你图的元素。

我的 JavaScript：

```
$(".sparks").sparkline( 'html', {
  composite:'true',
  type:'line',
  width:'900px',
  height:'400px',
  disableHiddenCheck:'true'
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:20:56.470

第二条迷你图需要应用于*相同*的跨度标签才能作为复合物工作。

然后迷你图将绘制到它在初始跨度内创建的现有画布元素上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-01T22:24:00.850

尽量避免对班级进行选择。最好画一个，然后在下一个上将标志设置`composite`为*true*。并确保所有图纸都指向同一个 div。

按照此说明，请记住设置`changeRangeMin`并`chartRangeMax` 具有相同的值。

> 注意：如果您希望每个图表上的相同值占据同一点，您通常需要使用 chartRangeMin 和 chartRangeMax 锁定两个图表上的轴。

一个工作示例：[https ://jsfiddle.net/sLphjqoc/2/](https://jsfiddle.net/sLphjqoc/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-25T07:48:09.110

我最近不得不创建一个复合线并使用以下代码：

下面Data的值为= [10,10,10,10,4,3,2,2,5,6,7,4,1,5,7,9,9,1,1,1]

HTML 和 JavaScript：

```
$('#btn_refresh_memory').click(function(){
    $.ajax({
        type: 'GET',
        url: 'http://localhost:8080/getSampleData',
        dataType: 'json',
        aysync: true,
        success: function(data) {
            $('#sparkline_view').sparkline(data, 
                  {type: 'line', composite: true, fillColor: false, 
                   lineColor: 'green',
                   changeRangeMin: 0, chartRangeMax: 10,
                   lineWidth:3, lineColor: '#008080',
                   disableHiddenCheck:'true',
                   height: '75px', width: '350px', tooltipSuffix: 'Cycles'});
        }
    });
}); 
```

# sql - MSSQL 模式匹配 [1-999] 之间的所有数字

> ID：10570027
> 
> 赞同：12
> 
> 时间：2012-05-13T07:30:53.803
> 
> 标签：sql, sql-server, sql-server-2008-r2, pattern-matching

我想要一个 SQL 模式表达式来匹配**1**到**999**之间的所有数字。

**编辑：**

在 MSSQL 中。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-13T07:37:02.880

当在 SQL 中对字符类使用 LIKE 运算符模式匹配时，不会像在正则表达式中那样重复字符类的通配符。换句话说，你不能做类似`[0-9]+`or`[0-9]{1,3}`的事情（这两个也会捕获`0`）

因此，您必须先对数字进行零填充，然后才能进行比较。

它不是直接的*模式*，但这个*表达式*部分依赖于 LIKE 运算符，适用于 1 到 999 之间的正整数：

```
RIGHT('00' + myfield, 3) LIKE '[0-9][0-9][0-9]'
AND RIGHT('00' + myfield, 3) <> '000'
AND LEN(myfield) <= 3 
```

编辑：假设您在谈论 Microsoft SQL Server，因为您没有指定。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-13T07:38:32.903

```
SELECT * FROM table WHERE field BETWEEN 1 AND 999; 
```

* * *

**编辑：** *这仅适用于 PostgreSQL。*

如果您正在寻找一个正则表达式模式来匹配字符串，那么就像这样：

```
SELECT * FROM table WHERE field ~ '[1-9][0-9]{1,2}'; 
```

查看有关正则[表达式模式](http://www.postgresql.org/docs/current/interactive/functions-matching.html#FUNCTIONS-POSIX-REGEXP)的文档。

SQL Server 不*按原样*支持正则表达式。
您可以使用以下[解决方法](http://blogs.msdn.com/b/sqlclr/archive/2005/06/29/regex.aspx)或此问题：[SQL Server 服务器中的正则表达式？](https://stackoverflow.com/questions/267921/regular-expressions-in-sql-server-servers).

# android - How install_referrer works

> ID：10570028
> 
> 赞同：0
> 
> 时间：2012-05-13T07:31:08.327
> 
> 标签：android, referrer

i am trying to use install_referrer and have a question, my app only "catches" the referrer broadcast when its open or in the memory. but when you install an app from tha play store its not getting open nor on the memory, so how can i make my app catch the broadcast on installation if its not running on the backround? thats my code:

```
public class SDK_Referrer extends BroadcastReceiver {
@Override
public void onReceive(Context context, Intent intent) {
    Log.d(TAG, "entered onRecive");
    if (intent.getAction().equals("com.android.vending.INSTALL_REFERRER")) {
        String referrer = intent.getStringExtra("referrer"); 
```

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:49:55.810

您需要将接收器添加到您的清单中，以便您的应用知道您有一些东西正在监听广播。像这样的东西：

```
<receiver android:name="com.company.cool.SDK_Referrer" android:exported="true">
    <intent-filter>
      <action android:name="com.android.vending.INSTALL_REFERRER" />
    </intent-filter>
  </receiver> 
```

# ios - NSURLConnection crash on releasing NSMutableData

> ID：10570029
> 
> 赞同：1
> 
> 时间：2012-05-13T07:31:08.773
> 
> 标签：ios, xcode, crash, nsurlconnection, nsmutabledata

I have followed the instruction from [Using NSURLConnection](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html#//apple_ref/doc/uid/20001836-BAJEAIEE) and sometimes (very very seldom) my project crashes in method.

```
- (void) connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    [connection release];
    [myNSMutableData release];
} 
```

It crashes when i try to release my `NSMutableData`. I want to know why it crashes!

Some code I use:

```
- (void) start
{
    while (1)
    {
        NSString *stringURL = @"http://www.iwheelbuy.com/get.php?sex=1";
        NSURL *url = [NSURL URLWithString:stringURL];
        NSURLRequest *request = [NSURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:5.0];
        NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
        if (connection)
        {
            getData = [[NSMutableData data] retain];
            break;
        }
        else
        {
            NSLog(@"no start connection");
        }
    }
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    if ([connection.originalRequest.URL.absoluteString rangeOfString:@"get.php"].location != NSNotFound)
    {
        [getData setLength:0];
    }
}

- (void) connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    if ([connection.originalRequest.URL.absoluteString rangeOfString:@"get.php"].location != NSNotFound)
    {
        [connection release];
        [getData release];
    }
}

- (void) connectionDidFinishLoading:(NSURLConnection *)connection
{
    if ([connection.originalRequest.URL.absoluteString rangeOfString:@"get.php"].location != NSNotFound)
    {
        [connection release];
        NSString *html = [[NSString alloc] initWithData:getData encoding:NSASCIIStringEncoding];
        [getData release];
        if ([html rangeOfString:@"id1="].location != NSNotFound && [html rangeOfString:@"id2="].location != NSNotFound)
        {
            NSLog(@"everything is OKAY");
            [html release];
        }
        else
        {
            [html release];
            [self start];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T09:01:39.367

您的代码正在执行异步调用。每次调用 start 方法时，您都会创建 NSURLConnection 对象的新实例，但您只有一个数据对象 (getData)。考虑到一些如何同时调用两个调用，当第一个调用失败时，它会释放您的连接和 getData 对象，而当第二个调用失败时，它会成功释放您的连接对象，但您的 getData 对象已经在先前的失败调用中释放，导致您的代码崩溃。

要解决此问题，请务必在释放对象后将它们设置为 nil，并在必要时执行 nil 检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T07:34:50.560

You need to release `getData` instead of `myNSMutableData`.

# java - Embedding Video Into A Java Application?

> ID：10570035
> 
> 赞同：1
> 
> 时间：2012-05-13T07:32:25.690
> 
> 标签：java, swing, video

I want to put a video on my Java Swing application.

For example, I can use...

```
g.drawString("Hello!",100,100); 
```

To draw a string. But how do I put a video there?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T07:40:32.623

如果您希望播放器能够播放各种视频，则没有“简单的方法”可以做到这一点。尝试使用来自 Google-Code 的[GStreamer for Java ...](http://code.google.com/p/gstreamer-java/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T07:37:31.677

Here do try these links

*   [DEITEL](http://www.deitel.com/articles/java_tutorials/20060422/PlayingVideowithJMF/)
*   [FMJ](http://fmj-sf.net/)

And do try to run these files, hope these can help

[MEDIA](http://gagandeepbali.uk.to/gaganisonline/swing/media/media.zip)

For this project to work, you have to download first Java Media Framework from [here](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-140239.html)

# c# - C# 中的用户代码未处理 SQLException

> ID：10570037
> 
> 赞同：0
> 
> 时间：2012-05-13T07:34:13.980
> 
> 标签：c#, asp.net, sql, sql-server-2005

我尝试检查用户是否存在。我尝试：

```
public static bool GetUser(string tblName, string UserName,string Password,string Usertype)
        {
            try
            {

                using (SqlConnection con = Connection.GetConnection())
                {
                    using (SqlCommand cmd = con.CreateCommand())
                    {
                       cmd.CommandText = "select count(UserName) from " + tblName + " where Password=" + Password + " and usertype=" + Usertype + " and username="+ UserName + "";
                        object obj = cmd.ExecuteScalar();
                        if (obj != null)
                            return true;
                        return false;
                    }
                }
            }
            catch (Exception ex)
            {
                throw ex;
            }

        } 
```

当我调用此方法时，出现以下错误。
![我的错误](../Images/7cf606ea19978779cd340a224befd563.png)
连接已成功建立，我这样调用此方法。

```
bool Check = UserLogin.GetUser("OnlineCertificationLogin", "admin", "admin", "Admin"); 
```

我的表结构是

![我的表结构](../Images/2d6f8e751e556718a52c1e3c36555c8c.png)
找不到我的错误。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T07:37:41.357

您没有引用这些值，因此您的 SQL 最终为：

```
select count(UserName) from OnlineCertificationLogin
where Password=admin and usertype=admin and username=Admin 
```

**不要**通过添加引号来解决这个问题。然后，您的代码将*适用*于给定的示例，但您很容易受到[SQL 注入攻击](http://bobby-tables.com)。相反，您应该使用参数化查询来解决此问题 -[`SqlCommand.Parameters`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)有关更多信息和示例，请参阅。

虽然您不能参数化表名，但您应该确保它只来自受信任的代码——而不是通过用户输入，例如，否则您将再次遇到完全相同的 SQL 注入问题*。*

请注意，您*也不*应该像这样以纯文本形式存储密码。

我强烈建议你拿一本关于安全性的书——《[ASP.NET 安全](https://rads.stackoverflow.com/amzn/click/com/0470743654)入门》可能就在你身边。（我有一份副本，但我承认没有读多少——不过我听过巴里谈论安全，他解释得非常清楚。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T07:35:46.087

我认为这都是关于将字符串值*注入*final 的`SQL query`。

不要使用*简单的字符串连接*，而是使用[SqlParameter](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)将值注入查询中，很可能您的问题将得到解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T07:40:25.047

你必须逃避你的参数，

此外，你不应该使用直接的 SQL 命令，你应该使用[SQL 参数化](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)

```
 using (SqlConnection con = Connection.GetConnection())
            {
                using (SqlCommand cmd = con.CreateCommand())
                {
                    cmd.CommandText = @"SELECT count(UserName) FROM" + tblName +
                    " WHERE Password=@pPass AND usertype=@pUsertype AND
                    username=@pUsername";
                    cmd.Parameters.Add("@pUsername", SqlDbType.VarChar);
                    cmd.Parameters.Add("@pPass", SqlDbType.VarChar);
                    cmd.Parameters.Add("@pUsertype", SqlDbType.VarChar);
                    cmd.Parameters["pUsername"] = UserName;
                    cmd.Parameters["pPass"] = Password;
                    cmd.Parameters["pUsertype"] = Usertype;
                    object obj = cmd.ExecuteScalar();
                    if (obj != null)
                        return true;
                    return false;
                }
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T15:00:02.083

```
cmd.CommandText = "select count(UserName) from " + tblName + " where Password='" + Password + "' and usertype='" + Usertype + "' and username='"+ UserName + "'"; 
```

试试这个，我猜你的问题是 ' 。

# maven - Maven to OBR Repositories

> ID：10570038
> 
> 赞同：3
> 
> 时间：2012-05-13T07:34:14.833
> 
> 标签：maven, osgi, obr

Since Maven cannot guarantee that a jar is also a bundle I want to use OBR as my project Repository. Of course in case of OSGi it has a lot of more nice features why I am using it :) So, are there possibilities to add jars published to a Maven Repository to an OBR Repository or could I simply add a whole Maven Repo to it? Or is it possible to address a Maven URL directly in you OBR metadata?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T09:02:17.933

您可以在部署时使用[Maven Bundle Plugin](http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html)将 OBR 元数据添加到您的存储库。

此插件会将 OBR 元数据添加到您部署的任何插件中。

我也认为 Nexus Open Source 现在支持 OBR，但我并不完全确定。

最后，[PAX URL](http://team.ops4j.org/wiki/display/paxurl/Pax+URL)库可能对您有用。使用这个库，您可以使用 Pax 将为您解析的 maven 样式 url（例如 'mvn:groupid/artifactId'）

问候，弗兰克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T08:14:34.327

最好的办法是使用存储库管理器并将适当的存储库添加到存储库管理器的配置中。此外，还可以在您的 settings.xml 文件中添加一个存储库作为补充资源。

# machine-learning - 可视化决策树（来自 scikit-learn 的示例）

> ID：10570042
> 
> 赞同：10
> 
> 时间：2012-05-13T07:35:11.113
> 
> 标签：machine-learning, python-2.7, scipy, scikit-learn

我是使用 sciki-learn 的菜鸟，所以请多多包涵。

我正在浏览这个例子： [http ://scikit-learn.org/stable/modules/tree.html#tree](http://scikit-learn.org/stable/modules/tree.html#tree)

```
>>> from sklearn.datasets import load_iris
>>> from sklearn import tree
>>> iris = load_iris()
>>> clf = tree.DecisionTreeClassifier()
>>> clf = clf.fit(iris.data, iris.target)
>>> from StringIO import StringIO
>>> out = StringIO()
>>> out = tree.export_graphviz(clf, out_file=out) 
```

显然，graphiz 文件已经可以使用了。

但是如何使用 graphiz 文件绘制树呢？（该示例没有详细说明如何绘制树）。

示例代码和提示非常受欢迎！

谢谢！

* * *

**更新**

我正在使用 ubuntu 12.04，Python 2.7.3

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T11:40:41.877

您运行哪个操作系统？你`graphviz`安装了吗？

在您的示例中，`StringIO()`对象包含 graphviz 数据，这是检查数据的一种方法：

```
...
>>> print out.getvalue()

digraph Tree {
0 [label="X[2] <= 2.4500\nerror = 0.666667\nsamples = 150\nvalue = [ 50\.  50\.  50.]", shape="box"] ;
1 [label="error = 0.0000\nsamples = 50\nvalue = [ 50\.   0\.   0.]", shape="box"] ;
0 -> 1 ;
2 [label="X[3] <= 1.7500\nerror = 0.5\nsamples = 100\nvalue = [  0\.  50\.  50.]", shape="box"] ;
0 -> 2 ;
3 [label="X[2] <= 4.9500\nerror = 0.168038\nsamples = 54\nvalue = [  0\.  49\.   5.]", shape="box"] ;
2 -> 3 ;
4 [label="X[3] <= 1.6500\nerror = 0.0407986\nsamples = 48\nvalue = [  0\.  47\.   1.]", shape="box"] ;
3 -> 4 ;
5 [label="error = 0.0000\nsamples = 47\nvalue = [  0\.  47\.   0.]", shape="box"] ;
4 -> 5 ;
6 [label="error = 0.0000\nsamples = 1\nvalue = [ 0\.  0\.  1.]", shape="box"] ;
4 -> 6 ;
7 [label="X[3] <= 1.5500\nerror = 0.444444\nsamples = 6\nvalue = [ 0\.  2\.  4.]", shape="box"] ;
3 -> 7 ;
8 [label="error = 0.0000\nsamples = 3\nvalue = [ 0\.  0\.  3.]", shape="box"] ;
7 -> 8 ;
9 [label="X[0] <= 6.9500\nerror = 0.444444\nsamples = 3\nvalue = [ 0\.  2\.  1.]", shape="box"] ;
7 -> 9 ;
10 [label="error = 0.0000\nsamples = 2\nvalue = [ 0\.  2\.  0.]", shape="box"] ;
9 -> 10 ;
11 [label="error = 0.0000\nsamples = 1\nvalue = [ 0\.  0\.  1.]", shape="box"] ;
9 -> 11 ;
12 [label="X[2] <= 4.8500\nerror = 0.0425331\nsamples = 46\nvalue = [  0\.   1\.  45.]", shape="box"] ;
2 -> 12 ;
13 [label="X[0] <= 5.9500\nerror = 0.444444\nsamples = 3\nvalue = [ 0\.  1\.  2.]", shape="box"] ;
12 -> 13 ;
14 [label="error = 0.0000\nsamples = 1\nvalue = [ 0\.  1\.  0.]", shape="box"] ;
13 -> 14 ;
15 [label="error = 0.0000\nsamples = 2\nvalue = [ 0\.  0\.  2.]", shape="box"] ;
13 -> 15 ;
16 [label="error = 0.0000\nsamples = 43\nvalue = [  0\.   0\.  43.]", shape="box"] ;
12 -> 16 ;
} 
```

您可以将其编写为[.dot 文件](http://www.graphviz.org/)并生成图像输出，如您链接的源代码所示：

`$ dot -Tpng tree.dot -o tree.png` （PNG格式输出）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T01:41:39.713

你很亲近！做就是了：

```
graph_from_dot_data(out.getvalue()).write_pdf("somefile.pdf") 
```

# java - Where is JSESSIONID stored? (JavaEE)

> ID：10570043
> 
> 赞同：7
> 
> 时间：2012-05-13T07:35:33.310
> 
> 标签：java, jsp, jakarta-ee, applet, jsessionid

I have two applications - A Java EE web application and a Java SE applet. I want to authenticate a user in the applet by means of a JSESSIONID (which is created by the web application).

So there is a problem - how to associate this JSESSIONID with a particular user?

How to check (on the web server application side) which user is represented by such JSESSIONID? In the applet I will be reading it from a cookie, and then I want to write a simple Servlet which will accept this JSESSIONID as a POST message. Thereafter I would like to write in the response nothing at all when the JSESSIONID is bad, and the user info if JSESSIONID is good (i.e. is representing someone).

Does anyone know how to do this?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-13T07:45:01.123

`JSESSIONID`是您通常不应该关心的低级机制。在服务器端，servlet 容器透明地转换`JSESSIONID`为servlet 中`HttpSession`可用的对象。会话 id 也使用`Cookie`标头或 URL 重写透明地传递给服务器。

因此，如果您在网页中单击链接或发布普通表单，浏览器会自动传递`JSESSIONID`cookie 或将其附加到 URL。

您的设计有一个重大缺陷：安全的 servlet 容器应该向cookie添加`HttpOnly`属性（请参阅：[如何在 tomcat / java webapps 中配置 HttpOnly cookie？](https://stackoverflow.com/questions/33412)）这是为了防止 JavaScript 出于安全原因读取cookie - 例如劫持用户会话。您的小程序甚至可能看不到那个 cookie！`JSESSIONID``JSESSIONID`

我对[applet](/questions/tagged/applet "显示标记为“小程序”的问题")了解不多，但我建议您以某种方式通过 Web 浏览器执行 HTTP 请求，以便自动处理安全标识（cookie）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T07:50:25.943

The Java EE container will do most of the work for you. There are a couple of short-cuts you can take depending on with authentication method you use and the details of how the container behaves. I'll ignore those short-cuts for now. I am assuming that the user provides their information to the web application in some form - for example by logging in.

When the user logs in, create a session (if one doe snot already exist) and add their user name (and any other details you like) to the session as session attributes.

When a request comes in that already has a session, just retrieve the user details from the session. The container takes care of mapping the session ID in the request to the right session object and making that available to the request.

If the session ID is invalid, the container will not associate a session object to the request.

One final thing to watch out for is HttpOnly cookies. Containers should be using these by default for session IDs (to protect against XSS attacks). For the session ID to be available to the applet you'll need to disable the HttpOnly protection for the session cookies. This means that if you application has an XSS vulnerability it will be easy for an attacker to steal user session cookies.

# php - Getting result for mysql query

> ID：10570046
> 
> 赞同：0
> 
> 时间：2012-05-13T07:36:36.383
> 
> 标签：php, mysql

```
$usr = mysql_real_escape_string($_POST['pre_name']);
$sql = mysql_query("SELECT * FROM `account` WHERE `name` LIKE '".$usr."'") or die("SQL ERROR"); 
$sqlly = mysql_fetch_array($sql);
$adminid = mysql_query("SELECT webadmin from account where name = '$name'");
$adminidresult = mysql_fetch_array($adminid);       

if($sqlly["webadmin"] == 1)
                $status = "<span class=\"pbadge sbc5\">admin</span>";       
        else
        {
            if($usertime > $timedifference)     
                $status="<img width=\"66\" height=\"13\" src=\"img/online.gif\" class=\"mb5\">";
            else 
            {
                $status="";
            }
        } 
```

Basically what I want to do is if $sqlly["webadmin"] equals 1 it will display a span with the word admin. The second if represents if the user is logged in it will display an online icon. It would only apply if $sqlly["webadmin"] equals zero. If you neeed more ifnormation I would gladly provide it. Thanks for helping me.

Oh and by the way the issue is that since I'm an admin but it displays the online button but I want it to display the admin span.

# php - 除非我点击刷新，否则重定向的 php 页面不会加载

> ID：10570047
> 
> 赞同：5
> 
> 时间：2012-05-13T07:37:01.490
> 
> 标签：php, mysql, facebook

早上好，我终于设法在 Facebook 登录后将 Facebook 用户名存储在我的数据库中。唯一的问题是用户在 Facebook 登录后被重定向到的页面需要重新加载（我第一次得到一个空页面）。您能否参考我之前的问题，因为我已经在[那里发布了所有代码](https://stackoverflow.com/questions/10569922/facebook-php-sdk-store-user-data-into-mysql-database/10569945#comment13684457_10569945)

更新：我注意到页面只需要在第一次刷新（当用户信息尚未存储在数据库中时，它会快速而漂亮地加载页面。请帮助！;-)

UPDATE2：有没有办法在添加新用户后自动刷新页面（仅一次）？非常感谢！

更新3：我发布代码....它仅在我刷新页面时才有效....有什么想法吗？

```
 <?php

          mysql_connect('host', 'username', 'password');  
           mysql_select_db('table');  

require 'library/facebook.php';

    // Create our Application instance 
   $facebook = new Facebook(array(
    'appId'  => 'MYID',
   'secret' => 'MYSECRET',
  'cookie' => true));

// Get User ID
 $user = $facebook->getUser();

   if ($user) {
     try {
   // Proceed knowing you have a logged in user who's authenticated.
   $user_profile = $facebook->api('/me');

   } catch (FacebookApiException $e) {
   error_log($e);
   $user = null;
   }
     }else{
   header('location: index.php');

    }
      $query = mysql_query("SELECT * FROM users WHERE oauth_provider = 'facebook' AND       oauth_uid = ". $user_profile['id']);  
      $result = mysql_fetch_array($query);  

    if(empty($result)){ 
      $query = mysql_query("INSERT INTO users (oauth_provider, oauth_uid, username)         VALUES ('facebook', {$user_profile['id']}, '{$user_profile['name']}')");  
       $query = msyql_query("SELECT * FROM users WHERE id = " . mysql_insert_id());  
      $result = mysql_fetch_array($query);  

       }  

    if ($user) {
     $paramsout = array('next'=>'http://www.mywebsite/test/logout.php');
     $logoutUrl = $facebook->getLogoutUrl($paramsout);
     }

     ?> 
```

更新 4 *****：我找到了解决方案。你可以看看我下面的回答。谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T07:02:51.657

当 facebook 使用下一个或重定向 URL 重定向时，它会发送 api 获取的帖子数据，但是当您手动重定向页面时，它不会获取 facebook 帖子数据，因此代码`else condition header('location: index.php');`被执行并且您被正确重定向..

第一次的问题是因为它通过了else条件并转到sql插入新记录，然后他们没有重定向..所以你需要`header('location: index.php');`在数据库中插入用户记录后将其重定向到最后

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T08:25:28.783

采用

```
header("Location: url");
exit(); 
```

经过所有必要的操作，假设您此时没有发送任何标题。否则，您可以在生成的文档中使用 META REFRESH 或 JS document.location.href。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T09:02:58.120

我认为您必须更新脚本尝试加载或获取 $user 配置文件，而不是仅加载用户 .. 可能有效

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-13T14:46:47.967

您可能需要`header("Location: $url");`在脚本末尾添加。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-17T09:37:07.427

最后我成功了。当然，这是一个重定向问题。但是在 index.php 和 user_page.php 中添加 sql 都不起作用。我最终创建了“login.php”，用户从 Facebook 页面重定向，如果它是新记录，则添加到数据库中，然后重定向到 user_page.php。这是 login.php 的代码：

```
<?php

 mysql_connect('HOST', 'USER', 'PSW');  
 mysql_select_db('MYDATABASE');

 require 'library/facebook.php';

  // Create our Application instance (replace this with your appId and secret).
   $facebook = new Facebook(array(
  'appId'  => 'MYID',
  'secret' => 'MYSECRET',
   'cookie' => true));

// Get User ID
$user = $facebook->getUser();

if($user){

 $user_profile = $facebook->api('/me');

    $query = mysql_query("SELECT * FROM users WHERE oauth_provider = 'facebook' AND oauth_uid = ". $user_profile['id']);
    $result = mysql_fetch_array($query);

    if(empty($result)){
        $query = mysql_query("INSERT INTO users (oauth_provider, oauth_uid, username) VALUES ('facebook', {$user_profile['id']}, '{$user_profile['name']}')");

        header('Location: user_page.php');
                                }else{
        header('Location: user_page.php');
         }

          }else{

        header('Location: logout.php');

        }

           ?> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-17T11:07:30.150

```
require 'lib/facebook-php-sdk/src/facebook.php';

define('APP_TITLE', 'Cool project');
define('APP_DESCRIPTION', 'Very nice project');
define('APP_ID', '168565339939940');
define('APP_SECRET', '4127eee9d3ab29a114e80h89060243a7');
define('APP_URL', 'https://localhost/project/');
define('APP_PERMISSIONS', '');

$user_id = null;
$user_profile = null;

$fb = new Facebook(array(
    'appId'  => APP_ID,
    'secret' => APP_SECRET,
    'cookie' => true,
));

$loginUrlParams = array(
  'scope' => APP_PERMISSIONS,
  'redirect_uri' => APP_URL,
);

$user_id = $fb->getUser();

if ( $user_id ) 
{
    try 
    {
        $data = $fb->api('/me');

        $user_profile = array(
            'user_id' => $user_id,
            'name' => isset($data['name']) ? he($data['name']) : null,
            'avatar' => 'https://graph.facebook.com/'.$user_id.'/picture',
        );

        unset($data);
    } 
    catch ( FacebookApiException $e ) 
    {
        header('Location: ' . $fb->getLoginUrl($loginUrlParams));
        exit;
    }
}
else
{
    header('Location: ' . $fb->getLoginUrl($loginUrlParams));
    exit;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-22T05:26:12.253

或者使用 javascript 或 jquery 会在运行时告诉你你不必重定向

# android - SecurityException: Given caller package com.android.settings is not running in process ProcessRecord

> ID：10570050
> 
> 赞同：3
> 
> 时间：2012-05-13T07:37:12.547
> 
> 标签：android, settings, activitygroup

I use ActivityGroup for TAB UI, and one Tab content is Android Settings view, I used this method to embed into:

```
final Intent settings = new Intent(android.provider.Settings.ACTION_SETTINGS);
settings.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
Window subActivity = getLocalActivityManager().startActivity("SubActivity_Settings", settings);
vSettings = subActivity.getDecorView(); 
```

And it works well in Android 2.3.3, but now I have to move to Android 4.0, Unfortunately it doesn't work with the exception like the below:

05-13 07:02:36.242: E/AndroidRuntime(1118): java.lang.RuntimeException: Unable to resume activity {com.android.settings/com.android.settings.Settings}: java.lang.SecurityException: Given caller package com.android.settings is not running in process ProcessRecord{414674b0 1118:com.gul.desktop/10040}

Can buddies tell me how to solve it, and what't the ProcessRecord?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T16:57:28.940

> 我将 ActivityGroup 用于 TAB UI

从 API 级别 11 开始正式弃用。

> 它在 Android 2.3.3 中运行良好

并不真地。*看起来*它“运行良好”，但用户实际上无法更改您自己的 UI 无法更改的任何设置。Android 4.0 只是进一步加强了安全性。

> 有大佬能告诉我怎么解决吗

编写您自己的 UI 来修改设置，这些设置是普通 SDK 应用程序可以修改的。或者，`startActivity()`使用`Intent`在 上找到的操作，通过 启动设置应用程序`android.provider.Settings`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T08:51:27.333

您收到此异常是因为在您的**清单**文件中，您可能已注册您的活动两次或多次。

例如：

```
<activity android:name=".MainActivity" android:label="@string/app_name"> 
                         ^^^^^^^^^^^^
     <intent-filter> 
         <action android:name="android.intent.action.MAIN" />
         <category android:name="android.intent.category.LAUNCHER" />
     </intent-filter>
 </activity>

<activity android:name=".MainActivity"> </activity>
                         ^^^^^^^^^^^^ 
```

删除不需要的行..希望这对你有用..！

# macos - 如何在 BBedit 中使用 SVN？

> ID：10570057
> 
> 赞同：1
> 
> 时间：2012-05-13T07:37:38.167
> 
> 标签：macos, editor, bbedit

我想将 BBedit（10.0 版）中的 SVN 同步用于 Lua 语言开发的项目。我应该下载一个 SVN 插件（如果是，从哪里下载？）还是 BBEedit 有它（如果是，它在哪个菜单中？）谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T07:52:34.427

它具有 Subversion 支持：

来自[http://www.barebones.com/products/bbedit/benefitsintegrate.html#SourceManagement](http://www.barebones.com/products/bbedit/benefitsintegrate.html#SourceManagement)

> 与 Subversion 直接集成：**BBEdit 的 Subversion 菜单**包含您进行常用操作所需的所有命令。此外，当从 BBEdit 中提交时，一个方便的提交表单使编写提交评论变得容易。

![在此处输入图像描述](../Images/fbe10d0cb97eb1189cea4b90311f2228.png)

另请注意，来自[http://pine.barebones.com/manual/BBEdit_10_User_Manual.pdf](http://pine.barebones.com/manual/BBEdit_10_User_Manual.pdf)

> 为了启用 BBEdit 的 Subversion 集成，您必须安装 Subversion 1.1 或更高版本，并且在 GUI 应用程序的 PATH 中可用（由 ~/.MacOSX/environment.plist 控制）。您还必须有一个已通过命令行签出的 Subversion 工作副本。

# php - 在 PHP 中的函数之间传递数组

> ID：10570060
> 
> 赞同：2
> 
> 时间：2012-05-13T07:38:06.483
> 
> 标签：php, arrays, class, phpexcel

我是 PHP 新手，我正在从 excel 电子表格中读取数据，我想将每一行保存为一个数组。在我拥有该数组之后，我想将该数组传递给另一个函数以“设置”具有特定标题的每个数组值。我无法弄清楚这一点，并希望有人能提供帮助。

这是第一个脚本：

```
 <?php 
include './Classes/PHPExcel.php';
include 'testCase.php';

class ExcelReader{

function getExcelFile(){
/*Get file from form*/
    echo 'Hello world' . "\n";
    $FileName = $_FILES["fileName"]["name"];

    /*Move file to server, if file already exists, don't move*/
    if(file_exists("uploadedFiles/".$_FILES["fileName"]["name"])){
        echo $_FILES["fileName"]["name"]." already exists";
    }
    else{
        move_uploaded_file($_FILES["fileName"]["tmp_name"],"uploadedFiles/".$_FILES["fileName"]["name"]);
        echo $_FILES["fileName"]["name"]." has been moved";

    }
    return $FileName;
}

function readExcelFile($FileName){

    /*Create reader object for file and read object in*/
    $PHPExcelReader= PHPExcel_IOFactory::createReaderForFile($FileName);
    $PHPExcelReader->setReadDataOnly(true);
    $PHPExcelObj=$PHPExcelReader->load($FileName);

    $PHPobjWorksheet = $PHPExcelObj->getActiveSheet();

    $topRow = $PHPobjWorksheet->getHighestRow();
    $topCol = $PHPobjWorksheet->getHighestColumn();

    $highestColIndex=  PHPExcel_Cell::columnIndexFromString($topCol);
    for($row=1;$row<=$topRow; $row++){

        $newTestCase = new testCase();
        $testIndex = $newTestCase->getTestCase($row, $highestColIndex, $PHPobjWorksheet);
        echo $testIndex."<- Test Index <br/>";
        $newTestCase->setTestCase($testIndex);
    }
 }
}

$newExcelReader = new ExcelReader;
$newFileName = $newExcelReader->getExcelFile();
$newExcelReader->readExcelFile($newFileName);

?> 
```

这是我用来获取数据的第二个类，我正在尝试设置：

```
 <?php

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 * Class for creating test cases to be sent 
 * into TestRail
 * @author Banderson
 */
class testCase {

    /*Function to get the data for each individual test case*/
    function getTestCase($row, $highestColIndex, $PHPobjWorksheet){

            echo "<br />";
            for($col=0;$col<=$highestColIndex;++$col){
                $ii=0;
                $cellValue=array($PHPobjWorksheet->getCellByColumnAndRow($col,$row)->getValue());
                echo $cellValue[$ii]. " | ";
                $ii++;

        }

    return $cellValue;

    }

    /*Function to set the data for each individual test case*/
    function setTestCase($cellValue){
                $title = $cellValue[0];
                echo $title. "<- Title"."<br/>";
                $type = $cellValue[1];
                echo $type. "<- Type"."<br/>";
                $priority = $cellValue[2];
                echo $priority. "<- Priority"."<br/>";
                $estimate = $cellValue[3];
                echo $estimate. "<- Estimate"."<br/>";
                $milestone = $cellValue[4];
                echo $milestone. "<- MileStone"."<br/>";
                $references = $cellValue[5];
                echo $references. "<- 5"."<br/>";
                $preconditions = $cellValue[6];
                echo $preconditions. "<- 6"."<br/>";
                $steps = $cellValue[7];
                echo $steps. "<- 7"."<br/>";
                $expectedResults = $cellValue[8];
                echo $expectedResults. "<- 8"."<br/>";
                $testSuit = $cellValue[9];
                echo $testSuit. "<- 9"."<br/>";

    }

}

?> 
```

最后这是我收到的错误消息：

```
 Hello world testrailtestinputV2.xlsx already exists
Title | Type | Priority | Estimate | Milestone | Reference | Preconditions | Steps | Expected Result | Section | Test Suite | | Array<- Test Index<- Title

( ! ) Notice: Undefined offset: 1 in /Applications/MAMP/htdocs/TestRailIntegration/testCase.php on line 37
Call Stack
#   Time    Memory  Function    Location
1   0.0000  635280  {main}( )   ../testRailScripting.php:0
2   0.0034  749112  ExcelReader->readExcelFile( )   ../testRailScripting.php:57
3   0.3133  5664536 testCase->setTestCase( )    ../testRailScripting.php:50
<- Type

( ! ) Notice: Undefined offset: 2 in /Applications/MAMP/htdocs/TestRailIntegration/testCase.php on line 39
Call Stack
#   Time    Memory  Function    Location
1   0.0000  635280  {main}( )   ../testRailScripting.php:0
2   0.0034  749112  ExcelReader->readExcelFile( )   ../testRailScripting.php:57
3   0.3133  5664536 testCase->setTestCase( )    ../testRailScripting.php:50
<- Priority

( ! ) Notice: Undefined offset: 3 in /Applications/MAMP/htdocs/TestRailIntegration/testCase.php on line 41
Call Stack
#   Time    Memory  Function    Location
1   0.0000  635280  {main}( )   ../testRailScripting.php:0
2   0.0034  749112  ExcelReader->readExcelFile( )   ../testRailScripting.php:57
3   0.3133  5664536 testCase->setTestCase( )    ../testRailScripting.php:50
<- Estimate

( ! ) Notice: Undefined offset: 4 in /Applications/MAMP/htdocs/TestRailIntegration/testCase.php on line 43
Call Stack
#   Time    Memory  Function    Location
1   0.0000  635280  {main}( )   ../testRailScripting.php:0
2   0.0034  749112  ExcelReader->readExcelFile( )   ../testRailScripting.php:57
3   0.3133  5664536 testCase->setTestCase( )    ../testRailScripting.php:50
<- MileStone

( ! ) Notice: Undefined offset: 5 in /Applications/MAMP/htdocs/TestRailIntegration/testCase.php on line 45
Call Stack
#   Time    Memory  Function    Location
1   0.0000  635280  {main}( )   ../testRailScripting.php:0
2   0.0034  749112  ExcelReader->readExcelFile( )   ../testRailScripting.php:57
3   0.3133  5664536 testCase->setTestCase( )    ../testRailScripting.php:50
<- 5

( ! ) Notice: Undefined offset: 6 in /Applications/MAMP/htdocs/TestRailIntegration/testCase.php on line 47
Call Stack
#   Time    Memory  Function    Location
1   0.0000  635280  {main}( )   ../testRailScripting.php:0
2   0.0034  749112  ExcelReader->readExcelFile( )   ../testRailScripting.php:57
3   0.3133  5664536 testCase->setTestCase( )    ../testRailScripting.php:50
<- 6

( ! ) Notice: Undefined offset: 7 in /Applications/MAMP/htdocs/TestRailIntegration/testCase.php on line 49
Call Stack
#   Time    Memory  Function    Location
1   0.0000  635280  {main}( )   ../testRailScripting.php:0
2   0.0034  749112  ExcelReader->readExcelFile( )   ../testRailScripting.php:57
3   0.3133  5664536 testCase->setTestCase( )    ../testRailScripting.php:50
<- 7

( ! ) Notice: Undefined offset: 8 in /Applications/MAMP/htdocs/TestRailIntegration/testCase.php on line 51
Call Stack
#   Time    Memory  Function    Location
1   0.0000  635280  {main}( )   ../testRailScripting.php:0
2   0.0034  749112  ExcelReader->readExcelFile( )   ../testRailScripting.php:57
3   0.3133  5664536 testCase->setTestCase( )    ../testRailScripting.php:50
<- 8

( ! ) Notice: Undefined offset: 9 in /Applications/MAMP/htdocs/TestRailIntegration/testCase.php on line 53
Call Stack
#   Time    Memory  Function    Location
1   0.0000  635280  {main}( )   ../testRailScripting.php:0
2   0.0034  749112  ExcelReader->readExcelFile( )   ../testRailScripting.php:57
3   0.3133  5664536 testCase->setTestCase( )    ../testRailScripting.php:50
<- 9

Title 1 | Functionalit | 1 | | | | | 1\. Turn phone on 2\. Go to main menu 3\. Push button | The screen should look like this | | | | Array<- Test Index<- Title

( ! ) Notice: Undefined offset: 1 in /Applications/MAMP/htdocs/TestRailIntegration/testCase.php on line 37
Call Stack
#   Time    Memory  Function    Location
1   0.0000  635280  {main}( )   ../testRailScripting.php:0
2   0.0034  749112  ExcelReader->readExcelFile( )   ../testRailScripting.php:57
3   0.5097  5675280 testCase->setTestCase( )    ../testRailScripting.php:50
<- Type

( ! ) Notice: Undefined offset: 2 in /Applications/MAMP/htdocs/TestRailIntegration/testCase.php on line 39
Call Stack
#   Time    Memory  Function    Location
1   0.0000  635280  {main}( )   ../testRailScripting.php:0
2   0.0034  749112  ExcelReader->readExcelFile( )   ../testRailScripting.php:57
3   0.5097  5675280 testCase->setTestCase( )    ../testRailScripting.php:50
<- Priority

( ! ) Notice: Undefined offset: 3 in /Applications/MAMP/htdocs/TestRailIntegration/testCase.php on line 41
Call Stack
#   Time    Memory  Function    Location
1   0.0000  635280  {main}( )   ../testRailScripting.php:0
2   0.0034  749112  ExcelReader->readExcelFile( )   ../testRailScripting.php:57
3   0.5097  5675280 testCase->setTestCase( )    ../testRailScripting.php:50
<- Estimate

( ! ) Notice: Undefined offset: 4 in /Applications/MAMP/htdocs/TestRailIntegration/testCase.php on line 43
Call Stack
#   Time    Memory  Function    Location
1   0.0000  635280  {main}( )   ../testRailScripting.php:0
2   0.0034  749112  ExcelReader->readExcelFile( )   ../testRailScripting.php:57
3   0.5097  5675280 testCase->setTestCase( )    ../testRailScripting.php:50
<- MileStone

( ! ) Notice: Undefined offset: 5 in /Applications/MAMP/htdocs/TestRailIntegration/testCase.php on line 45
Call Stack
#   Time    Memory  Function    Location
1   0.0000  635280  {main}( )   ../testRailScripting.php:0
2   0.0034  749112  ExcelReader->readExcelFile( )   ../testRailScripting.php:57
3   0.5097  5675280 testCase->setTestCase( )    ../testRailScripting.php:50
<- 5

( ! ) Notice: Undefined offset: 6 in /Applications/MAMP/htdocs/TestRailIntegration/testCase.php on line 47
Call Stack
#   Time    Memory  Function    Location
1   0.0000  635280  {main}( )   ../testRailScripting.php:0
2   0.0034  749112  ExcelReader->readExcelFile( )   ../testRailScripting.php:57
3   0.5097  5675280 testCase->setTestCase( )    ../testRailScripting.php:50
<- 6

( ! ) Notice: Undefined offset: 7 in /Applications/MAMP/htdocs/TestRailIntegration/testCase.php on line 49
Call Stack
#   Time    Memory  Function    Location
1   0.0000  635280  {main}( )   ../testRailScripting.php:0
2   0.0034  749112  ExcelReader->readExcelFile( )   ../testRailScripting.php:57
3   0.5097  5675280 testCase->setTestCase( )    ../testRailScripting.php:50
<- 7

( ! ) Notice: Undefined offset: 8 in /Applications/MAMP/htdocs/TestRailIntegration/testCase.php on line 51
Call Stack
#   Time    Memory  Function    Location
1   0.0000  635280  {main}( )   ../testRailScripting.php:0
2   0.0034  749112  ExcelReader->readExcelFile( )   ../testRailScripting.php:57
3   0.5097  5675280 testCase->setTestCase( )    ../testRailScripting.php:50
<- 8

( ! ) Notice: Undefined offset: 9 in /Applications/MAMP/htdocs/TestRailIntegration/testCase.php on line 53
Call Stack
#   Time    Memory  Function    Location
1   0.0000  635280  {main}( )   ../testRailScripting.php:0
2   0.0034  749112  ExcelReader->readExcelFile( )   ../testRailScripting.php:57
3   0.5097  5675280 testCase->setTestCase( )    ../testRailScripting.php:50
<- 9

Title 2 | Functionalit | 1 | | | | | 1\. Turn phone on 2\. Go to main menu 3\. Push button | The screen should look like this | | | | Array<- Test Index<- Title 
```

任何帮助都会很棒！先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T07:56:16.843

您的函数使用一个元素创建新数组，并在每次迭代时`getTestCase`将其放入变量中。`$cellValue`所以，这个函数返回的数组只包含一个元素。您应该以这种方式修复它：

```
function getTestCase($row, $highestColIndex, $PHPobjWorksheet) {
  $cellValue = array();
  for($col = 0; $col <= $highestColIndex; ++$col) {
    $v = $PHPobjWorksheet->getCellByColumnAndRow($col,$row)->getValue();
    $cellValue[] = $v; //append element to the array
  }
  return $cellValue;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T16:52:13.240

与其单独读取行中的每个单元格并自己根据这些值构建一个数组，不如让 PHPExcel 使用工作表的 toArray() 方法为您构建数组

```
/**
 * Create array from a range of cells
 *
 * @param  string   $pRange             Range of cells (i.e. "A1:B10"), or just one cell (i.e. "A1")
 * @param  mixed    $nullValue           Value returned in the array entry if a cell doesn't exist
 * @param  boolean  $calculateFormulas  Should formulas be calculated?
 * @param  boolean  $formatData         Should formatting be applied to cell values?
 * @param  boolean  $returnCellRef      False - Return a simple array of rows and columns indexed by number counting from zero
 *                                      True - Return rows and columns indexed by their actual row and column IDs
 * @return array
 */
public function rangeToArray($pRange = 'A1', $nullValue = null, $calculateFormulas = true, $formatData = true, $returnCellRef = false) 
```

只需使用标准 Excel 范围格式符号（例如 A1:Z1）指定范围

# couchdb - 通过 JavaScript 在 CouchDB 中保存 JSON 对象

> ID：10570062
> 
> 赞同：2
> 
> 时间：2012-05-13T07:38:42.847
> 
> 标签：couchdb

我在 JavaScript 中检索表单值并使用`JSON.stringify()`.

现在我想将它保存在 CouchDB 中。谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T07:49:42.013

我认为是：

```
var json = {_id:1 friends:["friend1","friend2"]}
couchdb.save(json);
var friends = couchdb.open(1).friends; 
```

希望对您有所帮助。

# c# - 允许 IIS 运行 cmd 命令

> ID：10570065
> 
> 赞同：3
> 
> 时间：2012-05-13T07:39:43.137
> 
> 标签：c#, asp.net-mvc-3, process, iis-6

在工作中构建一个 ASP.NET MVC3 应用程序，我正在尝试使用一个必须通过命令提示符启动并传递参数的程序。

目前我正在...

```
System.ComponentModel.Win32Exception (0x80004005): Access is denied 
at System.Diagnostics.Process.StartWithShellExecuteEx(ProcessStartInfo startInfo) 
at System.Diagnostics.Process.Start() 
at System.Diagnostics.Process.Start(ProcessStartInfo startInfo) 
```

这只需要网站的一个部分，我不确定在保持安全性的同时允许 IIS (6) 完成此操作的最佳过程是什么。

我认为这无关紧要，但以防万一这里是我用来启动的代码`Process()`

```
try {
    ProcessStartInfo startInfo = new ProcessStartInfo();
    startInfo.FileName = @"C:\pdftohtml\pdftohtml.exe";
    startInfo.Arguments = "-c " + NewsletterPath + @"\" + fileName + ".pdf";

    Process.Start( startInfo );
} catch( Exception ex ) {
    return ex.ToString();
} 
```

简而言之问题：

允许 IIS6 启动需要通过命令提示符传递参数同时保持安全性的新进程的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T07:42:58.553

授予运行 IIS（通常是 ASPNET）的用户对目录的访问权限`c:\pdftohtml\`，这将解决它。

# javascript - 如何与主窗口一起打印弹出窗口内容

> ID：10570068
> 
> 赞同：0
> 
> 时间：2012-05-13T07:40:28.083
> 
> 标签：javascript, jquery, printing, popup

我正在开发一个简单的基于 jQuery 的 Web 应用程序计算器，其中会出现 5 个弹出窗口及其内容。但最后当我点击主窗口的打印按钮时，只打印出主窗口的内容。但我需要打印所有弹出窗口内容以及主窗口。我在谷歌上搜索过，但没有得到任何有效的答案。

这是我的打印功能：

```
 <SCRIPT LANGUAGE="JavaScript">
    if (window.print) {
       document.write('<form> ' + '<input type=button name=print value="Print" '
                        + 'onClick="javascript:window.print();"></form>');
    }
 </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T09:22:51.280

当您调用 时，javascript 弹出窗口将关闭`window.print()`，因此显然它们不会以这种方式打印。

您可以以各种形式执行此操作，对于所有这些，您很可能必须为打印按钮的`onclick`事件创建一个函数。

最简单的方法是将 5 个弹出窗口的 html 复制到文档底部的隐藏 div 中，您可以通过 JQuery 将其复制到该 div 中，然后在发送和隐藏div 之前`.html()`调用该div。`.show()``window.print()`

打印按钮的 onclick 事件的函数可能类似于：

```
function printpage()
{
    $('#hiddendiv').html($('#popupContact_1').html() + '<br />' +  $('#popupContact_2').html() + '<br />' +  $('#popupContact_3').html() +  '<br />' + $('#popupContact_4').html() + '<br />' +  $('#popupContact_5').html());
    $('#hiddendiv').show();
    window.print();
    $('#hiddendiv').hide();
} 
```

在尝试此功能之前，不要忘记在文档底部创建一个 div，`id=hiddendiv`并在打印按钮的 onclick 事件中`style="display:none"`调用`printpage()`该功能。=)

您也可以只`.show()`为每个弹出 div调用 a`$('.a').show()`并将它们放置在页面的绝对位置 - 遍历它们`.each`以添加高于前一个的最高值 - 在调用`.print()`.

# jquery - 如何使用 jQuery 禁用/启用选择字段？

> ID：10570070
> 
> 赞同：191
> 
> 时间：2012-05-13T07:40:44.517
> 
> 标签：jquery, html, forms

我想以类似的形式创建一个选项

```
[] I would like to order a [selectbox with pizza] pizza 
```

其中选择框仅在选中复选框时启用，在未选中时禁用。

我想出了这段代码：

```
<form>
<input type="checkbox" id="pizza" name="pizza" value="yes"> <label for="pizza">
I would like to order a</label>
<select name="pizza_kind">
    <option>(choose one)</option>
    <option value="margaritha">Margaritha</option>
    <option value="hawai">Hawai</option>
</select>
pizza.
</form>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">
</script>
<script>
var update_pizza = function () {
    if ($("#pizza").is(":checked")) {
        $("#pizza_kind").removeAttr("disabled");
    }
    else {
        $("#pizza_kind").prop('disabled', 'disabled');
    }
};

$(update_pizza);
$("#pizza").change(update_pizza);
</script> 
```

我尝试了各种方法，如何使用`.prop()`、`.attr()`和设置禁用属性`.disabled=`。然而，什么也没有发生。当应用于 a`<input type="checkbox">`而不是 时`<select>`，代码可以完美运行。

如何`<select>`使用 jQuery 禁用/启用？

* * *

## 回答 #1

> 赞同：325
> 
> 时间：2012-05-13T07:55:22.887

您想使用这样的代码：

```
<form>
  <input type="checkbox" id="pizza" name="pizza" value="yes">
  <label for="pizza">I would like to order a</label>
  <select id="pizza_kind" name="pizza_kind">
    <option>(choose one)</option>
    <option value="margaritha">Margaritha</option>
    <option value="hawai">Hawai</option>
  </select>
  pizza.
</form>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
  var update_pizza = function () {
    if ($("#pizza").is(":checked")) {
        $('#pizza_kind').prop('disabled', false);
    }
    else {
        $('#pizza_kind').prop('disabled', 'disabled');
    }
  };
  $(update_pizza);
  $("#pizza").change(update_pizza);
</script> 
```

这是工作[示例](http://jsfiddle.net/VzZJA/2/)

* * *

## 回答 #2

> 赞同：129
> 
> 时间：2012-05-13T07:49:59.173

为了能够禁用/启用选择，首先您的选择需要一个 ID 或类。然后你可以做这样的事情：

**禁用：**

```
$('#id').attr('disabled', 'disabled'); 
```

**使能够：**

```
$('#id').removeAttr('disabled'); 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2015-03-25T19:37:51.557

Disabled 是[WHATWG](https://whatwg.org/faq#what-is-the-whatwg)所述的[选择元素的](https://html.spec.whatwg.org/multipage/forms.html#the-select-element)[布尔**属性**](https://html.spec.whatwg.org/multipage/forms.html#attr-fe-disabled)，这意味着使用 jQuery**禁用的正确方法是**

 **```
jQuery("#selectId").attr('disabled',true); 
```

这将使这个 HTML

```
<select id="selectId" name="gender" disabled="disabled">
    <option value="-1">--Select a Gender--</option>
    <option value="0">Male</option>
    <option value="1">Female</option>
</select> 
```

这适用于[XHTML 和 HTML（W3School 参考）](http://www.w3schools.com/tags/att_select_disabled.asp)

然而，它也可以使用它作为属性来完成

```
jQuery("#selectId").prop('disabled', 'disabled'); 
```

得到

```
<select id="selectId" name="gender" disabled> 
```

仅适用于 HTML 而不是 XTML

**注意：**禁用的元素将不会与此问题中回答的表单一起提交：[禁用的表单元素未提交](https://stackoverflow.com/questions/7875547/the-disabled-form-element-is-not-submitted)

**注意2：**禁用的元素可能会显示为灰色。

**注3：**

> 禁用的表单控件必须防止在用户交互任务源上排队的任何单击事件在元素上分派。

# **TL;博士**

```
<script>
    var update_pizza = function () {
        if ($("#pizza").is(":checked")) {
            $('#pizza_kind').attr('disabled', false);
        } else {
            $('#pizza_kind').attr('disabled', true);
        }
    };
    $(update_pizza);
    $("#pizza").change(update_pizza);
</script> 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-05-13T07:51:30.820

只需简单地使用：

```
var update_pizza = function () {
     $("#pizza_kind").prop("disabled", !$('#pizza').prop('checked'));
};

update_pizza();
$("#pizza").change(update_pizza); 
```

**[演示](http://jsfiddle.net/CpQvD/2/)** ​</p>

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-05-13T07:47:19.673

使用以下内容：

```
$("select").attr("disabled", "disabled"); 
```

或者简单地添加`id="pizza_kind"`到`<select>`标签，比如`<select name="pizza_kind" id="pizza_kind">`：[jsfiddle link](http://jsfiddle.net/psQQS/1/)

您的代码不起作用的原因仅仅是因为`$("#pizza_kind")`没有选择`<select>`元素，因为它没有`id="pizza_kind"`.

编辑：实际上，更好的选择器是`$("select[name='pizza_kind']")`：[jsfiddle link](http://jsfiddle.net/psQQS/2/)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2015-02-11T09:08:13.417

很抱歉在旧线程中回答，但我的代码将来可能会帮助其他人。我在相同的情况下，当复选框将被选中时，很少有选定的输入字段将启用其他明智的禁用。

```
$("[id*='chkAddressChange']").click(function () {
    var checked = $(this).is(':checked');
    if (checked) {
        $('.DisabledInputs').removeAttr('disabled');
    } else {
        $('.DisabledInputs').attr('disabled', 'disabled');
    }
}); 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-05-13T07:56:29.837

你`select`没有身份证，只有名字。您需要修改选择器：

```
$("#pizza").on("click", function(){
  $("select[name='pizza_kind']").prop("disabled", !this.checked);
}); 
```

演示：http: [//jsbin.com/imokuj/2/edit](http://jsbin.com/imokuj/2/edit)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-05-13T07:45:31.250

好问题 - 我认为实现这一目标的唯一方法是过滤选择中的项目。
你可以通过一个 jquery 插件来做到这一点。检查以下链接，它描述了如何实现类似于您需要的东西。感谢
[jQuery 禁用基于 Radio 选择的 SELECT 选项（需要所有浏览器的支持）](https://stackoverflow.com/questions/877328/jquery-disable-select-options-based-on-radio-selected-need-support-for-all-brow)**

# jquery - JQuery：无需按下提交按钮即可提交数据？

> ID：10570074
> 
> 赞同：1
> 
> 时间：2012-05-13T07:42:01.153
> 
> 标签：jquery

```
$(function(){
   $("input[type=text]").keypress(function(){
        $("#loader").load("saveinputtodatabase.php", {...});
   });
}); 
```

这适用于我的代码。每次用户在输入中键入内容时，它都会将数据保存在数据库中。但我知道这对服务器不公平，因为它会多次加载许多相同的文件，从而导致带宽的使用超出应有的范围。

只有在用户按下一个键后 10 秒后，我才能让它加载“saveinputtodatabase.php”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T07:45:45.053

你可以使用`setTimeout`and `clearTimeout`。

```
$(function(){
  var timeout = 10000; // 10 seconds
  var tmt = null;
  $("input[type=text]").keypress(function() {
    if (tmt) clearTimeout(tmt);
    tmt = setTimeout(function() {   
      $("#loader").load("saveinputtodatabase.php", {...});
    }, timeout);
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T07:46:59.860

```
var timeout;
$('input[type=text]').keypress(function() {
    if(timeout) {
        clearTimeout(timeout);
        timeout = null;
    }    
    timeout = setTimeout(somefunc, 10000)
});
function somefunc() {
  $("#loader").load("saveinputtodatabase.php", {...});
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T07:45:57.237

```
$(function(){
   $("input[type=text]").keypress(function(){
        var t=setTimeout(function(){
             $("#loader").load("saveinputtodatabase.php", {...})
        },10000);
   });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T07:48:11.937

**试试这个**

```
$(function(){
   $("input[type=text]").keypress(function(){
    save();        
});
});
function save(){
setTimeout($("#loader").load("saveinputtodatabase.php", {...}),10000)
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-13T07:51:31.773

查看这些 un​​derscore.js 函数：

[http://documentcloud.github.com/underscore/#throttle](http://documentcloud.github.com/underscore/#throttle)

> 创建并返回传递函数的新的、受限制的版本，当重复调用时，每等待毫秒最多只会实际调用一次原始函数。对于发生得比您跟得上快的限速事件很有用。

[http://documentcloud.github.com/underscore/#debounce](http://documentcloud.github.com/underscore/#debounce)

> 创建并返回传递函数的一个新的去抖动版本，该版本将推迟其执行，直到自上次调用以来等待毫秒过去后。对于实现仅在输入停止到达后才应发生的行为很有用。例如：渲染 Markdown 注释的预览，在窗口停止调整大小后重新计算布局等等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-13T07:54:35.080

```
$('textarea').on('keyup', _.throttle(_.debounce(function() {
$.ajax(...);
}, 2000), 60000)); 
```

这将在用户停止输入至少 2 秒后立即保存您的数据，但每分钟不超过一次。结帐 underscore.js 了解更多信息

# c# - 不在 VS 中运行时，控制台应用程序 exe 不起作用

> ID：10570076
> 
> 赞同：0
> 
> 时间：2012-05-13T07:42:21.237
> 
> 标签：c#, visual-studio-2010, console-application

我创建了一个控制台应用程序，它使用从名为 MYOB 的应用程序读取的 ODBC 访问文件。

当我在 VS 中使用 F5 运行应用程序时，它运行得很好，但是当我单击 bin 文件夹中的 exe 时，它​​不起作用。输出很长，但基本上我认为它说“无法打开连接” - 单击 .exe 并在 VS 下运行它有什么区别？

如果可能的话，任何人都可以向他们建议我可以尝试让它工作吗？

**编辑****这是控制台应用程序的输出**

```
[TRACECLIENT]
All=FATAL|SNO|ERRORS
[ODBC32]
MessagePrefix=[MYOB ODBC]
TraceFile=
TraceOptions=0
PromptForUID=0
********************************************************

**********Contents of file:<C:\MYOBODBC\schema\oadrd.ini>*********
[test_local]
Type=DB3
Schema_Path=.\test
Remarks=Test DBase III IP source
[memory_local]
Type=MEM
Connect_String=memory
Remarks=Test Memory IP source
********************************************************

**********Contents of file:<C:\MYOBODBC\schema\oainfo.ini>*********
[DAM]
1=0
8=1
11=N
14=\
16=OpenRDA
17=OpenRDA
18=5.50.20.0
19=Y
20=Y
21=Y
22=0
23=2
24=2
25=N
26=1
27=Y
28=4
29="
30=128
31=128
32=128
33=128
34=128
35=128
36=Y
37=Y
38=Y
39=owner
40=procedure
41=.
42=NULL
43=9
44=1
45=table
46=2
47=OAUSER
48=0
49=16777215
50=16547839
51=3
52=630783
53=0
54=0
55=0
56=0
57=0
58=0
59=0
60=0
61=0
62=0
63=0
64=0
65=0
66=0
67=0
68=0
69=0
70=0
71=0
72=7
73=N
74=2
75=1
78=0
79=0
80=0
81=3
82=0
83=0
84=0
85=1
86=37867
87=Y
88=2
89=HINT,IDENTIFIED
90=N
91=15
92=7
93=4
94=*(){}|:;
95=31
96=3
97=0
98=0
99=0
100=0
101=0
102=0
103=N
104=0
105=32768
106=0
107=32
108=8192
109=0
110=0
111=N
112=8192
113=Y
114=1
115=73
116=0
117=0
118=1
119=0
120=0
121=0
122=0
123=0
124=0
125=0
126=0
127=0
128=0
129=0
130=0
131=0
132=1
133=0
134=1
136=0
137=0
138=0
139=0
140=0
141=1
142=0
143=1
144=0
145=0
146=1
147=0
148=3
149=0
150=0
151=0
152=1
153=2
154=2
155=7
156=2
157=2
158=3184
159=63
160=16135
161=592
162=3184
163=11
164=238
165=0
166=1
167=1
168=0
8194=.
8195=1
8196=7
8197=1
10000=1995
10001=2
10002=Y
10003=Y
10004=ISO=8859-1
10005=128
10022=0
********************************************************

**********Environment Variables  *********
OPENRDA_INI = <NOT_SET>
PATH = <C:\Program Files (x86)\AMD APP\bin\x86_64;C:\Program Files (x86)\AMD APP
\bin\x86;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program
Files (x86)\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\NV
IDIA Corporation\PhysX\Common;C:\Windows\system32;C:\Windows;C:\Windows\System32
\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Microso
ft Team Foundation Server 2010 Power Tools\;C:\Program Files (x86)\Microsoft Tea
m Foundation Server 2010 Power Tools\Best Practices Analyzer\;C:\Program Files (
x86)\Windows Live\Shared;C:\Program Files (x86)\ATI Technologies\ATI.ACE\Core-St
atic;C:\Program Files (x86)\WinMerge;C:\Program Files (x86)\Microsoft Visual Stu
dio 10.0\VC;C:\Program Files (x86)\Common Files\Acronis\SnapAPI\;C:\Program File
s (x86)\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Serv
er\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\DTS\Binn\;C:\Progra
m Files (x86)\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\;C>
LD_LIBRARY_PATH = <NOT_SET>
SHLIB_PATH = <NOT_SET>
CLASSPATH = <.;C:\Program Files (x86)\Java\jre6\lib\ext\QTJava.zip>
ODBCINI = <NOT_SET>
********************************************************
CLI :  [TID: 37F4]:[Sun May 13 18:26:28.271 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:26:32.628 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:26:36.315 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:26:39.786 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:26:44.841 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:26:49.530 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:26:52.782 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:26:54.685 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:26:56.991 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:26:59.563 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:01.779 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:02.947 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:03.817 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:04.805 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:05.654 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:06.490 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:07.391 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:08.194 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:08.970 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:09.775 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:10.561 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:11.325 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:12.057 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:12.779 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:13.538 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:14.200 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:14.973 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:15.662 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:16.357 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:17.042 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:17.706 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:18.387 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:19.111 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:19.758 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:20.458 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:21.130 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:21.847 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:22.524 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:23.175 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:23.854 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:24.543 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:25.219 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:25.872 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:26.548 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened
CLI :  [TID: 37F4]:[Sun May 13 18:27:27.264 2012] rdacstmt.c:99: *** rda_cliAllo
cStmt: connection is not opened 
```

# asp.net - 从 ASP.Net 绘制谷歌地图

> ID：10570085
> 
> 赞同：0
> 
> 时间：2012-05-13T07:43:53.650
> 
> 标签：asp.net, css, ajax, google-maps

我正在尝试从 ASP.NET 项目中绘制地图，并且[在这里](http://www.codeproject.com/Articles/175557/Plot-Path-using-Google-Maps-JavaScript-API)找到了一个很好的教程 。 [http://www.codeproject.com/Articles/175557/Plot-Path-using-Google-Maps-JavaScript-API](http://www.codeproject.com/Articles/175557/Plot-Path-using-Google-Maps-JavaScript-API)

该项目编译良好但我仍然无法加载地图。

从之前的帖子中， [andrew](https://stackoverflow.com/questions/10546818/google-maps-v3-polyline-loading-fails)指出使用我自己的 css 对我有用。

需要帮助。源代码可在网站上找到:)。

调试 1：

```
[12:38:04.463] GET https://maps.gstatic.com/cat_js/intl/en_us/mapfiles/api-3/8/11/%7Bcommon,map,util,poly,marker%7D.js [HTTP/1.0 200 Connection established 8766ms]
    --
    [12:38:13.234] GET http://localhost:1790/GPSPath/ [HTTP/1.1 200 OK 82ms]
    [12:38:13.340] GET http://code.google.com/apis/maps/documentation/javascript/examples/default.css [HTTP/1.0 301 Moved Permanently 1052ms]
    [12:38:13.356] GET https://maps.googleapis.com/maps/api/js?key=AIzaSyD4nINMTYXMM9Mkb35C8Jy_mZ--grp9B1Y&sensor=false [HTTP/1.1 200 OK 8076ms]
    [12:38:14.396] GET https://developers.google.com/maps/documentation/javascript/examples/default.css?csw=1 [HTTP/1.1 301 Moved Permanently 1214ms]
    [12:38:15.615] GET https://developers.google.com/maps/documentation/javascript/examples/default.css [HTTP/1.1 200 OK 1478ms]
    --
    [12:38:21.473] GET https://maps.gstatic.com/intl/en_us/mapfiles/api-3/8/11/main.js [HTTP/1.1 304 Not Modified 3708ms]
    --
    [12:38:31.415] GET https://maps.gstatic.com/cat_js/intl/en_us/mapfiles/api-3/8/11/%7Bcommon,map,util,poly,marker%7D.js [HTTP/1.1 200 OK] 
```

调试 2：

```
[13:07:12.368] GET https://maps.gstatic.com/intl/en_us/mapfiles/api-3/8/11/main.js [HTTP/1.1 304 Not Modified 711ms]
[13:07:15.316] Error in parsing value for 'background'.  Declaration dropped. @ http://localhost:1790/GPSPath/
[13:07:15.413] GET https://maps.gstatic.com/mapfiles/openhand_8_8.cur [HTTP/1.1 304 Not Modified 669ms]
[13:07:15.433] GET https://maps.gstatic.com/mapfiles/transparent.png [HTTP/1.1 304 Not Modified 610ms]
[13:07:15.466] GET https://maps.gstatic.com/mapfiles/undo_poly.png [HTTP/1.1 304 Not Modified 615ms]
[13:07:15.481] GET https://mts1.googleapis.com/vt?lyrs=m@177000000&src=apiv3&hl=en-US&x=351&y=819&z=11&s=&style=api%7Csmartmaps [HTTP/1.1 200 OK 28558ms]
[13:07:15.497] GET https://mts0.googleapis.com/vt?lyrs=m@177000000&src=apiv3&hl=en-US&x=350&y=819&z=11&s=Galil&style=api%7Csmartmaps [HTTP/1.1 200 OK 28599ms]
[13:07:15.513] GET https://mts0.googleapis.com/vt?lyrs=m@177000000&src=apiv3&hl=en-US&x=352&y=819&z=11&s=Gal&style=api%7Csmartmaps [HTTP/1.1 200 OK]
[13:07:15.532] GET https://mts1.googleapis.com/vt?lyrs=m@177000000&src=apiv3&hl=en-US&x=349&y=819&z=11&s=Ga&style=api%7Csmartmaps [HTTP/1.1 200 OK 617ms]
[13:07:15.550] GET https://mts1.googleapis.com/vt?lyrs=m@177000000&src=apiv3&hl=en-US&x=353&y=819&z=11&s=Galile&style=api%7Csmartmaps [HTTP/1.1 200 OK]
[13:07:15.568] GET https://mts0.googleapis.com/vt?lyrs=m@177000000&src=apiv3&hl=en-US&x=348&y=819&z=11&s=Galileo&style=api%7Csmartmaps [HTTP/1.1 200 OK 2062ms]
[13:07:15.586] GET https://mts0.googleapis.com/vt?lyrs=m@177000000&src=apiv3&hl=en-US&x=354&y=819&z=11&s=G&style=api%7Csmartmaps [HTTP/1.1 200 OK 23675ms]
[13:07:15.605] GET https://maps.googleapis.com/maps/api/js/ViewportInfoService.GetViewportInfo?1m6&1m2&1d33.779004&2d-119.58592199999998&2m2&1d33.779005&2d-116.77204799999998&2u11&4sen-US&5e0&6sm%40177000000&7b0&8e0&9b0&callback=_xdc_._b2m4dv&token=102820 [HTTP/1.1 200 OK 613ms]
[13:07:15.735] GET https://maps.gstatic.com/mapfiles/markers2/marker_sprite.png [HTTP/1.1 304 Not Modified 548ms]
[13:07:15.771] GET https://maps.gstatic.com/mapfiles/google_white.png [HTTP/1.1 304 Not Modified 492ms]
[13:07:15.793] GET https://maps.gstatic.com/mapfiles/mv/imgs8.png [HTTP/1.1 304 Not Modified 537ms]
[13:07:15.817] GET https://maps.gstatic.com/mapfiles/cb/mod_cb_scout/cb_scout_sprite_api_003.png [HTTP/1.1 304 Not Modified 488ms]
[13:07:15.840] GET https://maps.gstatic.com/mapfiles/rotate2.png [HTTP/1.1 304 Not Modified 524ms]
[13:07:15.867] GET https://maps.gstatic.com/mapfiles/szc4.png [HTTP/1.1 304 Not Modified 8593ms]
[13:07:16.718] GET https://maps.googleapis.com/maps/gen_204?ev=api_viewport&cad=src:apiv3,ts:1336903635713 [HTTP/1.1 204 No Content 25149ms]
[13:07:17.045] GET https://maps.googleapis.com/maps/gen_204?imp=v3rmi [HTTP/1.1 204 No Content 1797ms]
[13:07:18.123] GET https://maps.googleapis.com/maps/api/js/AuthenticationService.Authenticate?1shttp%3A%2F%2Flocalhost%3A1790%2FGPSPath%2F&4sAIzaSyD4nINMTYXMM9Mkb35C8Jy_mZ--grp9B1Y&5e1&callback=_xdc_._7q1ogj&token=110396 [HTTP/1.1 200 OK 1516ms]
[13:07:19.267] GET https://maps.googleapis.com/maps/gen_204?ev=api_ads&cad=src:apiv3,ads:0 [HTTP/1.1 204 No Content 529ms]
--
[13:07:26.354] GET https://maps.googleapis.com/maps/gen_204?ev=api_marker&cad=src:apiv3,m:3,d:0,s:0 [HTTP/1.1 204 No Content 7027ms] 
```

调试（没有 https 和我自己的 css ）

```
[13:26:45.411] GET http://localhost:1790/GPSPath/ [HTTP/1.1 200 OK 33ms]
[13:26:45.469] GET http://maps.googleapis.com/maps/api/js?key=AIzaSyD4nINMTYXMM9Mkb35C8Jy_mZ--grp9B1Y&sensor=false [HTTP/1.0 200 OK 1507ms]
[13:26:47.017] GET http://maps.gstatic.com/intl/en_us/mapfiles/api-3/8/11/main.js [HTTP/1.0 304 Not Modified 3130ms]
[13:26:50.331] Error in parsing value for 'background'.  Declaration dropped. @ http://localhost:1790/GPSPath/
[13:26:50.403] GET http://maps.gstatic.com/mapfiles/openhand_8_8.cur [HTTP/1.0 304 Not Modified 1410ms]
[13:26:50.417] GET http://maps.gstatic.com/mapfiles/transparent.png [HTTP/1.0 304 Not Modified 1408ms]
[13:26:50.444] GET http://maps.gstatic.com/mapfiles/undo_poly.png [HTTP/1.0 304 Not Modified 1391ms]
[13:26:50.456] GET http://mt1.googleapis.com/vt?lyrs=m@177000000&src=apiv3&hl=en-US&x=351&y=819&z=11&s=&style=api%7Csmartmaps [HTTP/1.0 200 OK 4922ms]
[13:26:50.469] GET http://mt0.googleapis.com/vt?lyrs=m@177000000&src=apiv3&hl=en-US&x=350&y=819&z=11&s=Galil&style=api%7Csmartmaps [HTTP/1.0 200 OK 2159ms]
[13:26:50.482] GET http://mt0.googleapis.com/vt?lyrs=m@177000000&src=apiv3&hl=en-US&x=352&y=819&z=11&s=Gal&style=api%7Csmartmaps [HTTP/1.0 200 OK 6249ms]
[13:26:50.496] GET http://mt1.googleapis.com/vt?lyrs=m@177000000&src=apiv3&hl=en-US&x=349&y=819&z=11&s=Ga&style=api%7Csmartmaps [HTTP/1.0 200 OK 2783ms]
[13:26:50.510] GET http://mt1.googleapis.com/vt?lyrs=m@177000000&src=apiv3&hl=en-US&x=353&y=819&z=11&s=Galile&style=api%7Csmartmaps [HTTP/1.0 200 OK 5163ms]
[13:26:50.525] GET http://mt0.googleapis.com/vt?lyrs=m@177000000&src=apiv3&hl=en-US&x=348&y=819&z=11&s=Galileo&style=api%7Csmartmaps [HTTP/1.0 200 OK 4399ms]
[13:26:50.541] GET http://mt0.googleapis.com/vt?lyrs=m@177000000&src=apiv3&hl=en-US&x=354&y=819&z=11&s=G&style=api%7Csmartmaps [HTTP/1.0 200 OK 4457ms]
[13:26:50.557] GET http://maps.googleapis.com/maps/api/js/ViewportInfoService.GetViewportInfo?1m6&1m2&1d33.779004&2d-119.58592199999998&2m2&1d33.779005&2d-116.77204799999998&2u11&4sen-US&5e0&6sm%40177000000&7b0&8e0&9b0&callback=_xdc_._3ozhak&token=76645 [HTTP/1.0 200 OK 2786ms]
[13:26:50.677] GET http://maps.gstatic.com/mapfiles/markers2/marker_sprite.png [HTTP/1.0 304 Not Modified 4145ms]
[13:26:50.697] GET http://maps.gstatic.com/mapfiles/google_white.png [HTTP/1.0 304 Not Modified 5866ms]
[13:26:50.718] GET http://maps.gstatic.com/mapfiles/mv/imgs8.png [HTTP/1.0 304 Not Modified 6548ms]
[13:26:50.751] GET http://maps.gstatic.com/mapfiles/cb/mod_cb_scout/cb_scout_sprite_api_003.png [HTTP/1.0 304 Not Modified 8332ms]
[13:26:50.774] GET http://maps.gstatic.com/mapfiles/rotate2.png [HTTP/1.0 304 Not Modified 8333ms]
[13:26:50.803] GET http://maps.gstatic.com/mapfiles/szc4.png [HTTP/1.0 304 Not Modified 9155ms]
[13:26:51.679] GET http://maps.googleapis.com/maps/gen_204?ev=api_viewport&cad=src:apiv3,ts:1336904810659 [HTTP/1.0 204 No Content 1528ms]
[13:26:54.287] GET http://maps.googleapis.com/maps/gen_204?imp=v3rmi [HTTP/1.0 204 No Content 2254ms]
[13:26:54.317] GET http://maps.googleapis.com/maps/gen_204?ev=api_ads&cad=src:apiv3,ads:0 [HTTP/1.0 204 No Content 2221ms]
[13:26:55.187] GET http://maps.googleapis.com/maps/api/js/AuthenticationService.Authenticate?1shttp%3A%2F%2Flocalhost%3A1790%2FGPSPath%2F&4sAIzaSyD4nINMTYXMM9Mkb35C8Jy_mZ--grp9B1Y&5e1&callback=_xdc_._r427nf&token=99497
[13:26:57.673] GET http://csi.gstatic.com/csi?v=2&s=mapsapi3&action=apiboot&rt=jl.3192,mc.3219,mb.3306,vt.9667,prt.9667,plt.9640,mt.9668&size=1366x0&maptype=m [HTTP/1.0 204 No Content 1729ms]
[13:27:01.374] GET http://maps.googleapis.com/maps/gen_204?ev=api_marker&cad=src:apiv3,m:3,d:0,s:0 [HTTP/1.0 204 No Content 1703ms]
--
[13:27:20.192] GET http://maps.googleapis.com/maps/api/js/QuotaService.RecordEvent?1shttp%3A%2F%2Flocalhost%3A1790%2FGPSPath%2F&3sAIzaSyD4nINMTYXMM9Mkb35C8Jy_mZ--grp9B1Y&4e1&5e0&6u1&7s5ymgop&callback=_xdc_._ux5mz6&token=23247 [HTTP/1.0 200 OK 1736ms] 
```

**从 Firebug 调试**

我没有得到有效的“__VIEWSTATE”div 好吗？会不会是这个原因？？

```
<form name="form1" method="post" action="default.aspx" id="form1">
<div>
<input name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTE1NTM1MjUzMzUPZBYCAgEPFgIeBFRleHQFsQ48c2NyaXB0IHR5cGU9J3RleHQvamF2YXNjcmlwdCc+DQoNCiAgICAgICAgICAgIHZhciBwb2x5Ow0KICAgICAgICAgICAgdmFyIG1hcDsNCg0KICAgICAgICAgICAgZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB2YXIgY21sb2MgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKDMzLjc3OTAwNSwgLTExOC4xNzg5ODUpOw0KICAgICAgICAgICAgICAgIHZhciBteU9wdGlvbnMgPSB7DQogICAgICAgICAgICAgICAgICAgIHpvb206IDExLA0KICAgICAgICAgICAgICAgICAgICBjZW50ZXI6IGNtbG9jLA0KICAgICAgICAgICAgICAgICAgICBtYXBUeXBlSWQ6IGdvb2dsZS5tYXBzLk1hcFR5cGVJZC5ST0FETUFQDQogICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAgIG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcF9jYW52YXMnKSwgbXlPcHRpb25zKTsNCg0KDQogICAgICAgICAgICAgICAgdmFyIHBvbHlPcHRpb25zID0gew0KICAgICAgICAgICAgICAgICAgICBzdHJva2VDb2xvcjogJ2JsdWUnLA0KICAgICAgICAgICAgICAgICAgICBzdHJva2VPcGFjaXR5OiAwLjUsDQogICAgICAgICAgICAgICAgICAgIHN0cm9rZVdlaWdodDogMw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBwb2x5ID0gbmV3IGdvb2dsZS5tYXBzLlBvbHlsaW5lKHBvbHlPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBwb2x5LnNldE1hcChtYXApOw0KDQogICAgICAgICAgICAgICAgdmFyIHBhdGggPSBwb2x5LmdldFBhdGgoKTsNCg0KICAgICAgICAgICAgICAgDQoNCiAgICAgICAgICAgICAgICBwYXRoLnB1c2gobmV3IGdvb2dsZS5tYXBzLkxhdExuZygzMy43NzkwMDUsIC0xMTguMTc4OTg1KSk7DQoNCiAgICAgICAgICAgICAgICB2YXIgbWFya2VyMCA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoew0KICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvb2dsZS5tYXBzLkxhdExuZygzMy43NzkwMDUsIC0xMTguMTc4OTg1KSwNCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICcjJyArIHBhdGguZ2V0TGVuZ3RoKCksDQogICAgICAgICAgICAgICAgICAgIG1hcDogbWFwDQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBwYXRoLnB1c2gobmV3IGdvb2dsZS5tYXBzLkxhdExuZygzMy44NzkwMDUsIC0xMTguMDk4OTg1KSk7DQoNCiAgICAgICAgICAgICAgICB2YXIgbWFya2VyMSA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoew0KICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvb2dsZS5tYXBzLkxhdExuZygzMy44NzkwMDUsIC0xMTguMDk4OTg1KSwNCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICcjJyArIHBhdGguZ2V0TGVuZ3RoKCksDQogICAgICAgICAgICAgICAgICAgIG1hcDogbWFwDQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICBwYXRoLnB1c2gobmV3IGdvb2dsZS5tYXBzLkxhdExuZygzMy45NzkwMDUsIC0xMTguMjE4OTg1KSk7DQoNCiAgICAgICAgICAgICAgICB2YXIgbWFya2VyMiA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoew0KICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvb2dsZS5tYXBzLkxhdExuZygzMy45NzkwMDUsIC0xMTguMjE4OTg1KSwNCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICcjJyArIHBhdGguZ2V0TGVuZ3RoKCksDQogICAgICAgICAgICAgICAgICAgIG1hcDogbWFwDQogICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIDwvc2NyaXB0PmRkie8SLlkqGTTBQBDxeXJTGLNO6B5kIpNtL0F7eqM9j8U=" type="hidden">
</div> 
```

--- 代码被截断 ---

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T09:52:56.760

看来答案很可能和以前一样。

```
GET https://developers.google.com/maps/documentation/javascript/examples/default.css 
```

表示您正在加载 Google 的 CSS。**不要那样做。**使用你自己的（和以前一样）。

请注意，如果您希望地图画布覆盖整个页面（即`{height:100%}`） ，则**必须**确保包含它的每个元素`<div>`也定义了其高度。这至少包括`<body>`而且`<html>`还包括包含地图的所有其他元素。

对于 ASP 页面，还有一个`<form>`元素也需要定义。

`GET http://localhost:1790/GPSPath/`表示您正在使用 HTTP，但对 API 和样式表的引用使用 HTTPS。您是否使用 HTTPS 加载 API？如果您自己的页面不使用它，则不需要这样做。

# mysql - MySQL时间戳不保存在格林威治标准时间？

> ID：10570086
> 
> 赞同：0
> 
> 时间：2012-05-13T07:44:08.117
> 
> 标签：mysql, timestamp

我在 MySQL 中使用时间戳数据类型，以便将保存的任何时间戳转换为 GMT，然后在检索时从 GMT 返回。从文档来看，这一切似乎都是 MySQL 自动为我完成的；我需要做的就是使用时间戳数据类型。

但是，我注意到它似乎不起作用。我已经在我的本地机器和服务器上对此进行了测试——它似乎总是保存本地时间而不是 GMT。本地机器和服务器位于不同的时区，并且都不是 GMT。

这是我的测试插入：

```
INSERT INTO `test` (`test_id`, `stamp`) VALUES (NULL, CURRENT_TIMESTAMP); 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T07:57:05.843

尝试使用 mysql 终端访问您的数据库

1）首先输入此代码`SET time_zone = '+00:00';`

2）然后现在做你的选择来检查你的数据

您可以使用以下链接中的方法访问您的 mysql。 [如何使用 XAMPP for Windows 访问 MySQL 命令行？](https://stackoverflow.com/questions/698914/how-can-i-access-the-mysql-command-line-with-xampp-for-windows)

我希望你能理解你的情况

**注意**：

时间戳在时区中自动转换，为连接在 mysql 上的任何客户端调整。所以你不能真正看到它的原始时间，但它总是取决于你设定的时区

# r - 按分类数据分组的零售价格汇总统计

> ID：10570087
> 
> 赞同：2
> 
> 时间：2012-05-13T04:35:34.140
> 
> 标签：r

我需要一些帮助来编写一个函数，该函数接受三个分类输入并根据这些输入返回一个汇总统计向量。

该数据集包含有关零售商品的信息，这些信息可以通过零售细分、品牌名称和商品类型以及零售价格和实际售价来指定。

现在我需要编写一个函数来获取这些输入并平均、计数和计算所需的任何其他内容。

我已将功能设置如下（使用虚构的数据）：

```
dataold = data.frame(segment=c("golf","tenis","football","tenis","golf","golf"),
                   brand=c("x","y","z","y","x","a"),
                   type=c("iron","ball","helmet","shoe","driver","iron"),
                   retail=c(124,.60,80,75,150,108),
                   actual=c(112,.60,72,75,135,100))

retailsum = funtion(segment,brand,type){    
     datanew = dataold[which(dataold$segment='segment' & 
                             dataold$brand='brand' & 
                             dataold$type='type'),c("retail","actaul")]

     summary = c(dim(datanew)[1],colMeans(datanew))
     return(summary)
} 
```

函数大括号内的代码独立工作，但是一旦我将一个函数包裹在它周围，我就会开始出错，或者它只会返回`0`计数和`NaN`方法。

任何帮助将不胜感激。我在 R 方面的经验很少，所以如果这是一个微不足道的问题，我深表歉意，但我一直无法找到解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T08:01:28.993

您的代码中有很多错误，包括：

*   的拼写错误`function`
*   使用单一`=`（分配）而不是`==`（平等测试）
*   打错字`actual`
*   和在你的函数中硬编码`segment`，而不是引用参数。`brand``type`

这就是你的函数的*样子*，即它产生有效的结果：

```
retailsum <- function(data, segment,brand,type, FUN=colMeans){    
  x = with(data, data[segment==segment && brand==brand && type==type,
                      c("retail","actual")])
  match.fun(FUN)(x)
}

retailsum(dataold, "golf", "x", "iron", colMeans)
  retail   actual 
89.60000 82.43333 
```

* * *

这是使用该软件包的（可能更灵活）解决方案`plyr`。这会针对细分、品牌和类型的所有组合计算您的函数：

```
library(plyr)
ddply(dataold, .(segment, brand, type), colwise(mean))
   segment brand   type retail actual
1 football     z helmet   80.0   72.0
2     golf     a   iron  108.0  100.0
3     golf     x driver  150.0  135.0
4     golf     x   iron  124.0  112.0
5    tenis     y   ball    0.6    0.6
6    tenis     y   shoe   75.0   75.0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T08:12:11.490

Andrie 的解决方案已经相当完整。（`ddply`很酷！不知道那个功能......）

不过，只有一个补充：如果您想计算所有可能组合的汇总值，您可以使用 R 的板载函数将其作为单线执行`by`：

```
by(dataold, list(dataold$segment, dataold$brand, dataold$type), 
       function(x) summary(x[,c('retail', 'actual')])
) 
```

严格来说，这不是您所要求的，但可能仍然具有指导意义。

# jquery - 如何隐藏 jwysiwyg 上的默认控件？

> ID：10570088
> 
> 赞同：1
> 
> 时间：2012-05-13T07:44:16.603
> 
> 标签：jquery, jquery-plugins, jwysiwyg

[jwysiwyg](https://github.com/akzhan/jwysiwyg)是一个将 textarea 转换为 HTML [WYSIWG](https://en.wikipedia.org/wiki/Wysiwyg)编辑器的插件。我试图隐藏它使用 API`ControlName:{visible:false}`选项显示的默认控件，但它似乎不起作用。

这是我用来隐藏对齐控件的代码：

```
function make_wysiwyg(selector, content, settings) {
    //Create the wysiwyg thingy from a given textarea
    var default_settings = {
        autoGrow: true,
        justifyLeft:{visible:false},
        justifyRight:{visible:false},
        justifyCenter:{visible:false},
        justifyFull:{visible:false}
    };
    settings = settings || default_settings;
    $(function() {
        $(selector).wysiwyg(settings).wysiwyg("setContent", content||"");
    });
} 
```

关于为什么它没有按预期工作的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T08:42:18.490

您需要将控件放置在`controls`属性内。

```
 $("textarea").wysiwyg({
        rmUnusedControls: true,
        controls: {
            bold: { visible : true },
            html: { visible : true }
        }
    }); 
```

尝试使用`rmUnusedControls`示例中的[所有](http://akzhan.github.com/jwysiwyg/help/examples/)控件重写。

# c# - 通过单击/按下另一个控件将焦点保持在主控件上

> ID：10570089
> 
> 赞同：0
> 
> 时间：2012-05-13T07:44:20.863
> 
> 标签：c#, visual-studio, datagridview

我在 winforms 上有一个 datagridview 和 listbox 控件。我的任务不是在按下或单击列表框控件时从 datagridview 失去焦点。

我想继续关注datagridview。

**例如：** 当 datagridview 有焦点时，如果我按下或单击列表框，则 datagridview 失去焦点，但我只想在按下或单击列表框时保持焦点 datagridview。任何帮助将不胜感激。

我已经尝试过`datagridview.focus()`列表框的单击事件，但它失去了**datagridview columns1**的焦点并获得了**datagridview columns2 的焦点。**简而言之，上述事件和调用方法失去了 datagridview 的焦点。我只想继续关注**datagridview columns1**点击到**listbox**。可能吗？。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T07:50:11.403

How about calling `yourDataGridView.Focus();` immediately after processing the click event for the listbox?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:55:22.633

`Default.aspx.cs`在页面顶部尝试此`Page_Load`操作：

```
protected void Page_Load(object sender, EventArgs e)
{
    Page.MaintainScrollPositionOnPostBack = true;
} 
```

这应该回发并将焦点留在您离开的地方。

# python - 云上的刮痧

> ID：10570097
> 
> 赞同：2
> 
> 时间：2012-05-13T07:46:01.637
> 
> 标签：python, cloud, scrapy

我在想是否有可能而不是使用带有大量代理的scrapy来使用来自多个服务器的scrapy ...例如云计算。

有人试过吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T22:24:50.757

是的，这些人有：[http ://scrapinghub.com/scrapy-cloud.html](http://scrapinghub.com/scrapy-cloud.html)

# django - django 和 guppy 查找哪个导入需要更多内存

> ID：10570101
> 
> 赞同：0
> 
> 时间：2012-05-13T07:47:03.497
> 
> 标签：django, profiling

我按照本[教程](http://www.toofishes.net/blog/using-guppy-debug-django-memory-leaks/)安装 guppy 并配置我的 django 应用程序。我的 django 应用程序没有内存泄漏，但由于某种奇怪的原因，它在 Apache/mod_wsgi 环境中需要大量内存。有人告诉我，我的一个进口产品可能是导致此问题的原因。

如何使用 guppy 查看哪个导入消耗更多内存？guppy 的输出对于我的水平来说信息量不大。这里是：

```
*** Connection 1 opened ***
<Monitor> lc
CID PID  ARGV
  1 2056 ['manage.py', 'runserver']
<Monitor> sc 1
Remote connection 1\. To return to Monitor, type <Ctrl-C> or .<RETURN>
<Annex> int
Remote interactive console. To return to Annex, type '-'.
>>> hp.heap()
GC hook object was referred to from somebody!
Partition of a set of 128202 objects. Total size = 11015508 bytes.
 Index  Count   %     Size   % Cumulative  % Kind (class / dict of class)
     0  55746  43  4117640  37   4117640  37 str
     1  29278  23  1272920  12   5390560  49 tuple
     2   2457   2   777324   7   6167884  56 dict (no owner)
     3    495   0   583860   5   6751744  61 dict of module
     4   8361   7   501660   5   7253404  66 function
     5   7202   6   489736   4   7743140  70 types.CodeType
     6   1026   1   461748   4   8204888  74 type
     7   1022   1   402472   4   8607360  78 dict of type
     8    179   0   250852   2   8858212  80 dict of django.db.models.fields.CharField
     9   2599   2   156124   1   9014336  82 list
<486 more rows. Type e.g. '_.more' to view.> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T00:03:05.697

FWIW。Python Web 应用程序在 Apache/mod_wsgi 下会比在不同的 WSGI 服务器（如 uWSGI 或 gunicorn）下消耗更多内存，没有具体原因。在可比较的配置下，Web 应用程序的每个进程的内存需求应该大致相同，因为您的应用程序不会以任何不同的方式运行。唯一可能会有所不同的是服务器配置是否是多线程的，并且您正在与单线程配置进行比较。

还要注意您正在查看的内存量度。使用 RSS 而不是虚拟内存大小。看：

[http://code.google.com/p/modwsgi/wiki/ApplicationIssues#Memory_Constrained_VPS_Systems](http://code.google.com/p/modwsgi/wiki/ApplicationIssues#Memory_Constrained_VPS_Systems)

# java - 如何为字典接口实现二叉搜索树？

> ID：10570102
> 
> 赞同：-1
> 
> 时间：2012-05-13T07:47:06.533
> 
> 标签：java, generics, dictionary, binary-search-tree

我得到了一个 Dictionary 界面，如下所示：

```
public interface Dictionary<E extends Comparable<E>> extends Iterable<E> { 
```

现在我被要求使用二叉搜索树来实现这个接口，但是我不知道如何开始，因为我对上面实现 Dictionary 接口的理论概念很困惑。

这是我的实现类：

```
// Red-black binary search tree
public class DictionaryImp implements Dictionary<DictionaryImp>, Comparable<DictionaryImp> { 
```

那么，我该如何实现以下这些方法呢？DictionaryImp 类将携带哪些实例变量？

```
public boolean isEmpty();
public boolean contains(E item);
public boolean hasPredecessor(E item);
// etc. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T08:25:13.227

我不知道你对红黑树的实现，但基本上你提到的所有方法都会调用相应的红黑树方法。

isEmpty：检查树是否为空

contains(E item)：对树执行二分查找以查找元素。如果可以找到则返回 true

add(E item): if (!contains(item)) tree.add(item);

等等等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T22:36:20.247

您拥有的类声明没有多大意义。的类型参数`Dictionary`似乎是针对字典的元素类型的；这就是为什么他们要求元素与它们自身具有可比性。您的声明似乎说那`DictionaryImp`是一本字典，其元素也是`DictionaryImp`，这没有意义。您可能想要的是一个`DictionaryImp`通用的，其元素类型与自身相当，并使用相同的类型参数实现字典，如下所示：

```
public class DictionaryImp<E extends Comparable<E>> implements Dictionary<E> 
```

# algorithm - 对十亿学生列表进行排序

> ID：10570109
> 
> 赞同：2
> 
> 时间：2012-05-13T07:48:07.690
> 
> 标签：algorithm

在每次面试的问题中，我被问到“你如何根据他们在考试中的总分对十亿学生的名单进行排序？学生从 1-1B 移动的卷数和分数范围是 10-100 。” 虽然任何排序算法都可以，但什么是有效的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T07:50:35.647

只需对输入运行[计数排序](http://en.wikipedia.org/wiki/Counting_sort)`O(n)`，在这种情况下，因为范围是有界的。这也是最有效的方式，因为任何输出所有学生的方式都需要 Ω(n)。

您可以通过循环输出学生以获得可能的可用分数（例如，如果存在 90 个可能的分数，则循环遍历学生 90 次，第一次输出分数为 100 的学生，...）。

这个任务可以通过[桶排序](http://en.wikipedia.org/wiki/Bucket_sort)来完成。但首先你应该遍历输入，找到每个分数相关的学生人数，然后通过考虑学生人数为每个分数创建一个桶，然后填充桶，注意你应该为桶创建一个数组，你也应该有一个额外参数，用于保存每个桶中的当前项目数。

第一种方法（直接使用计数排序）是 O(n) 和 O(1) 额外空间，第二种方法是 O(n) 和 O(n) 额外空间，但第二种方法更快，因为它是`2*n`，而第一种方法是`90*n`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:28:18.943

使用计数排序。如果您知道该问题中满足的最大值和其他一些参数，那就太好了。它以 O(n) 排序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-11T07:19:47.577

我将使用某种分而治之的算法（例如合并排序或快速排序或桶排序），并使用这种思想在几个桶之间划分排序。当您需要将所有数据合并回一个大数组时，就会出现问题，但这只需要 O(n)，因为子数组已经排序。

```
bucket sort(L)
{
list Y[k+1]
for (i = 0; i <= k; i++) Y[i] = empty
while L nonempty
{
    let X = first record in L
    move X to Y[key(X)]
}
for (i = 0; i <= k; i++)
concatenate Y[i] onto end of L
} 
```

有两个循环花费 O(k) 时间，一个花费 O(n)，所以总时间是 O(n+k)。当 k 小于 n 时，这很好。例如，假设您想按分数对 1,000,000,000 人进行排序；n=1000000000，k=100-10，所以时间 = O(n)。

# android - 如何从 Android Gingerbread 中的 libmedia_jni 访问自己的 libmediaplayerservice 库

> ID：10570111
> 
> 赞同：6
> 
> 时间：2012-05-13T07:48:14.433
> 
> 标签：android, android-ndk, android-mediaplayer, stagefright

默认情况下，android Gigerbread 2.3 使用 PV_Player（opencore 库）。我找到了一种解决方案，它应该是修补系统 build.prop 文件，但我不想修补系统。我想使用将使用 StageFright 播放器的 android 媒体框架创建自己的库。我知道 libmediaplayerservice 决定播放器的选择。看看[媒体框架](http://rxwen.blogspot.in/2010/01/understanding-android-media-framework.html)

我想根据android框架创建库-

*   libmedia_jni_own*   libmedia_own*   libmediaplayerservice_own

    但问题是 libmedia 不直接与 libmediaplayerservice 库交互，它不直接依赖于 libmediaplayerservice 库。以至于无法创造出怯场的播放器。Libmedia 通过 Binder IPC 机制与 libmediaplayerservice 库进行通信。如何修补 libmedia 源库，以便它可以访问我的 libmediaplayerservice 库并能够创建 StageFright 播放器以及 StageFright 记录器等的所有访问权限，而不是 opencore 库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T22:04:37.283

我认为您无法修改媒体服务的工作方式而无需修补系统。由于媒体服务及其库位于系统分区上，因此您实际上无法劫持 jni 负载。如果您运行的是非 AOSP rom（如三星、HTC 等），您将无法只更换库，因为来自库存 rom 的库包含许多与专有库的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T11:20:37.190

通过查看您提到的 Binder 机制的 android 源代码，您应该查看方法“getMediaPlayerService()”并检查服务管理器如何处理媒体服务。如果您可以修补此方法并正确定义您的服务，那么您应该没问题。

```
IMediaDeathNotifier::getMediaPlayerService()
{
    LOGV("getMediaPlayerService");
    Mutex::Autolock _l(sServiceLock);
    if (sMediaPlayerService.get() == 0) {
        sp<IServiceManager> sm = defaultServiceManager();
        sp<IBinder> binder;
        do {
            binder = sm->getService(String16("media.player"));
            if (binder != 0) {
                break;
             }
             LOGW("Media player service not published, waiting...");
             usleep(500000); // 0.5 s
        } while(true);

        if (sDeathNotifier == NULL) {
        sDeathNotifier = new DeathNotifier();
    }
    binder->linkToDeath(sDeathNotifier);
    sMediaPlayerService = interface_cast<IMediaPlayerService>(binder);
    }
    LOGE_IF(sMediaPlayerService == 0, "no media player service!?");
    return sMediaPlayerService;
} 
```

有问题的方法位于： `frameworks/base/media/libmedia/IMediaDeathNotifier.cpp`

此外，通过调用设置服务：

```
 void MediaPlayerService::instantiate() {
             defaultServiceManager()->addService(
             String16("media.player"), new MediaPlayerService());
 } 
```

可以在以下位置找到：`/frameworks/base/media/libmediaplayerservice/MediaPlayerService.cpp`

# html - 创建具有切换宽度不变的文本值的按钮

> ID：10570133
> 
> 赞同：0
> 
> 时间：2012-05-13T07:51:13.927
> 
> 标签：html, css, css-position

[http://jsfiddle.net/9DDHq/](http://jsfiddle.net/9DDHq/)是我尝试制作一个按钮，其文本在两个值之间切换并且其宽度不会改变。我不知道如何使按钮保持与两个文本值中较长的一样宽。

例如，如果两个文本值是“xyz”和“x”，那么按钮应该看起来像

```
[ xyz ] 
```

或者

```
[  x  ] 
```

宽度相同，文本居中。我不想在 px 或 ems 中给按钮一个固定值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T09:03:35.287

这是你的 jsfiddle 的更新，检查[一下](http://jsfiddle.net/9DDHq/2/)

# php - PHP date_create 函数，使用时区缩写将UTC时间转换为不同的时区

> ID：10570136
> 
> 赞同：3
> 
> 时间：2012-05-13T07:51:32.647
> 
> 标签：php, datetime, date, timezone

```
$placename=timezone_name_from_abbr("", $timezone * 3600, false);
                        $date = date_create($list['stamp'], timezone_open($placename));
                        $datetimezone=new DateTimeZone('Europe/London');
                        $dateTime = new DateTime($list['stamp'],$datetimezone); 
                        $dateTime->setTimeZone(new DateTimeZone($placename)); 
```

**编辑**

我尝试了以下建议的代码作为答案，它产生的时间比它应该的时间少了 2 小时。我检查了我的数据库，数据库中的时间与 GMT 匹配。所以问题在于使用转换将其从 GMT 转换

```
$timezone=-4 
```

来自用户回答的代码，下面会产生两个小时的时间。从 GMT 转换为 America/New_York 但慢了两个小时。我检查了地名变量以确保它是 America/New_York。是什么原因造成的？

```
$placename=timezone_name_from_abbr("", $timezone * 3600, true);
$dateTime = new DateTime($list['stamp']); 
$dateTime->setTimeZone(new DateTimeZone($placename)); 
echo $dateTime->format('F d g:i a'); 
```

**原始问题**

而不是将其转换为 America/New_York 时间，而是生成了我存储在数据库中的 UTC 时间，为什么会这样，为什么不转换时间？它存储在数据库中`2012-05-13 07:30:47`

```
$placename=timezone_name_from_abbr("", $timezone * 3600, true);
$date = date_create($list['stamp'], timezone_open($placename));
echo date_format($date, 'F d g:i a'); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T07:58:29.040

```
$dateTime = new DateTime($date,new DateTimeZone('Europe/London')); 
$dateTime->setTimeZone(new DateTimeZone('America/New_York')); 
echo $dateTime->format('F d g:i a'); 
```

*请注意，我在创建`DateTime`对象时添加了第二个参数，以确保它知道我传递的是 GMT 时间，其他方式它将假定您的服务器为本地时间，并可能最终得到不同的结果。*

**到没有引号的第一个版本。**

顺便说一句，您正在（在您的代码上）分配一个不带引号的字符串，这可能会也可能不会导致错误，因为 PHP 会尝试查找一个调用的常量`America`并将其除以一个常量名`New_York`，但我假设就是这样**不是**你所追求的。

如果您有所有的警告/通知/错误显示您会看到以下内容：

```
Notice: Use of undefined constant America - assumed 'America' in line 3; 
```

其中，如果您想考虑一下，它最终会返回一个实际警告（前两个是通知），告诉您您的潜水为零。PHP 是危险的，因为它可以让你做各种疯狂的事情，而不会明显地破坏任何东西。不要误会我的意思，我喜欢 PHP，一开始你只需要小心。

我给你的代码有效:)

如果您在创建时未指定时区（作为构造函数的第二个参数），它将假定时区是您当前的时区（服务器时区），您可以通过将 GMT 传递到那里或您的任何东西来覆盖它已存储在数据库中。

但是，文档上有一条警告说：注意：

> 当 $time 参数是 UNIX 时间戳（例如 @946684800）或指定时区（例如 2010-01-28T15:00:00+02:00）时，$timezone 参数和当前时区将被忽略。

[文档](http://php.net/manual/es/class.datetime.php)

# c# - 如何用 0xFF 字节填充 MemoryStream？

> ID：10570142
> 
> 赞同：2
> 
> 时间：2012-05-13T07:52:38.637
> 
> 标签：c#, padding, memorystream

我有一个`MemoryStream`在运行时从文件创建的。

然后`MemoryStream`编辑并删除一些字节。

现在我必须维护一个常量文件大小，所以我必须`MemoryStream`用 0xFF 字节填充..

执行此操作的最快方法是什么？

我知道，我总是可以遍历`MemoryStream`大小并添加 0xFF，但我需要知道一种更快、更有效的方法来做到这一点！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T08:55:14.087

如果您有许多字节要写入流，则写入数组而不是单独写入每个字节可能更有效：

```
static void Fill(this Stream stream, byte value, int count)
{
    var buffer = new byte[64];
    for (int i = 0; i < buffer.Length; i++)
    {
        buffer[i] = value;
    }
    while (count > buffer.Length)
    {
        stream.Write(buffer, 0, buffer.Length);
        count -= buffer.Length;
    }
    stream.Write(buffer, 0, count);
} 
```

# github - DVCS（Github、BitBucket 等）如何确保私有项目代码的完整性？

> ID：10570145
> 
> 赞同：3
> 
> 时间：2012-05-13T07:53:01.657
> 
> 标签：github, dvcs, bitbucket, sensitive-data

**DVCS（Github、BitBucket 等）如何确保私有项目代码的完整性？**

当然，当您将代码上传到他们的在线存储库时，这些公司声称没有知识产权，但是如何确保项目的隐私，以便只有对此类存储库具有写入/提交访问权限的人才能真正**查看**数据？

如果您决定，比如说，将您的项目移动到私有服务器或其他主机，会发生什么？您的项目会从公共索引中“删除”还是仅“删除”？

您如何确定项目所在公司的 CEO 无法查看您的数据？

这些公司是否通过某种常规认证？还是基于信任和理解的整个交易？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T09:53:13.737

除非这些提供商明确提到提供*加密*的存储库（[Assembla 在此处提到](http://blog.assembla.com/assemblablog/tabid/12618/bid/12217/April-14-Repo-Blitz-Free-unlimited-SVN-and-GIT-and-much-more.aspx)，但它只能指 https 加密），否则您没有 100% 的保证。

增加这种安全级别的唯一方法是追求**用户控制的端到端加密**，利用 git 的 smudge/clean[过滤器驱动程序](https://stackoverflow.com/questions/2316677/can-git-automatically-switch-between-spaces-and-tabs/2316728#2316728)：

![涂抹清洁过滤器驱动程序](../Images/0737104b68721a82d6e1a8e83bd28ba2.png)

请参阅“[透明 Git 加密](https://gist.github.com/873637)”：

> 用户控制的端到端加密解决了这个问题：
> 在将数据推送到远程存储库进行存储之前，使用只有数据所有者自己知道的加密密钥对其进行加密。加密密钥和加密/解密过程的管理总是乏味且容易出错。
> 在下文中，我们将演示如何以对最终用户透明的方式使用带有加密的 Git。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T10:18:47.820

正如 VonC 所说，除了向您保证只有管理员可以访问您的数据之外，他们并不能确保任何事情。

一些托管站点可能会谈论他们如何加密磁盘上的数据。如果我们谈论的是可能最终落入坏人手中的笔记本电脑，这是有道理的，但对于位于数据中心的磁盘来说，它就没有意义了。问题是在机器上运行的服务必须能够访问未加密的数据，因此通常会在服务运行时安装卷。因此加密将不再保护数据，您将恢复正常的操作系统访问控制。

如果你真的想要，你当然可以通过[Mercurial 的解码/编码过滤器](http://www.selenic.com/mercurial/hgrc.5.html#decode-encode)运行所有数据，或者使用[Git 的等效过滤器](https://gist.github.com/873637)。这意味着您将加密数据保存在托管站点，但您**会失去 GitHub 或 Bitbucket 等站点的大部分优势**。你不能再

*   以有意义的方式在线浏览代码
*   审查拉取请求
*   提供 tarball 下载
*   等等

所以我不会推荐这种方法——如果你的数据非常敏感以至于你不能在线托管它们，那么你应该设置你自己的内部服务器。在那里我可以推荐支持 Git 和 Mercurial 的[Kallithea 。](https://kallithea-scm.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T08:04:47.043

据我所知，整个交易是基于信任、理解和你不起诉他们致死的愿望。

# python - BeautifulSoup 输出在 .strip() 之后包含空格

> ID：10570146
> 
> 赞同：3
> 
> 时间：2012-05-13T07:53:35.257
> 
> 标签：python, beautifulsoup

我有以下代码。

```
html = urllib2.urlopen(
    'https://ebet.tab.co.nz/results/CHCG-reslt05070400.html').read()

soup = BeautifulSoup(html)
data = soup.findAll('div', {'class' : 'header bold'})
match = re.search('R', data[0].text)
race_title = data[0].text[(match.start()):]
race_title = str(race_title.strip(' \t\n\r'))
print race_title 
```

我在控制台屏幕上得到的输出如下

```
Race 1 PEDIGREE ADVANCE SPRINT
                C0
                295 m 
```

我认为 strip 会消除 SPRINT 和 C0 之间的任何类型的空格，但显然我遗漏了一些东西，所以我需要帮助来理解这个结果。是因为bs4以unicode输出字符串还是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T07:56:21.337

`strip()`仅删除前导或尾随字符。如果你想删除你应该使用的换行符`replace("\n","")`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T07:56:28.280

通常 STRIP 只去除字符串开头和结尾的空格。使用 STR_REPLACE 将空格替换为“”。

> strip(s[, chars]) 返回删除了前导和尾随字符的字符串的副本。如果省略 chars 或 None，则删除空白字符。如果给定而不是 None，chars 必须是字符串；字符串中的字符将从调用此方法的字符串的两端剥离。在 2.2.3 版更改: 添加了 chars 参数。chars 参数不能在早期的 2.2 版本中传递。

# objective-c - 为什么旋转后 UIImageView 的大小会发生变化？

> ID：10570151
> 
> 赞同：6
> 
> 时间：2012-05-13T07:54:39.527
> 
> 标签：objective-c, ios, cocoa-touch, ios5

我是使用转换的新手。并且仍然对他们的工作方式感到困惑。

我想要做的是用给定的角度旋转我的 UIImageView 。但旋转后，它改变了图像的大小，变小了。我也在为 ImageView 进行缩放，所以它不会颠倒。**分配 ImageView 时，如何旋转并保持 CGRectMake 中给出的大小？**

```
 UIImageView *myImageView = [[UIImageView alloc]initWithFrame:CGRectMake(x,y,width,height)];        

    myImageView.contentMode = UIViewContentModeScaleAspectFit;

    [myImageView setImage:[UIImage imageNamed:@"image.png"]];

    myImageView.layer.anchorPoint = CGPointMake(0.5,0.5);

    CGAffineTransform newTransform;

    myImageView.transform = CGAffineTransformMakeScale(1,-1);            

    newTransform = CGAffineTransformRotate(newTransform, 30*M_PI/180);

    [self.window addSubview:myImageView]; 
```

非常感谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-13T16:38:07.437

好的，我保证我会调查它，所以这是我的答案：

我创建了一个和你的场景有点等价的场景，代码如下：

```
UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(self.view.bounds.size.width/2-100,
                                                                       self.view.bounds.size.height/2-125,
                                                                       200,
                                                                       250)];

imageView.image = [UIImage imageNamed:@"testimage.jpg"];
imageView.contentMode = UIViewContentModeScaleAspectFill;

/*
 * I added clipsToBounds, because my test image didn't have a size of 200x250px
 */
imageView.clipsToBounds = YES;

[self.view addSubview:imageView];

NSLog(@"frame: %@",[NSValue valueWithCGRect:imageView.frame]);
NSLog(@"bounds: %@",[NSValue valueWithCGRect:imageView.bounds]);    

imageView.layer.anchorPoint = CGPointMake(0.5, 0.5);
imageView.transform = CGAffineTransformMakeRotation(30*M_PI/180);

NSLog(@"frame after rotation: %@",[NSValue valueWithCGRect:imageView.frame]);
NSLog(@"bounds after rotation: %@",[NSValue valueWithCGRect:imageView.bounds]); 
```

此代码假定您使用的是 ARC。如果不添加

```
[imageView release]; 
```

在末尾。

使用此代码，日志如下所示：

```
[16221:207] frame: NSRect: {{60, 105}, {200, 250}}
[16221:207] bounds: NSRect: {{0, 0}, {200, 250}}
[16221:207] frame after rotation: NSRect: {{10.897461, 71.746826}, {298.20508, 316.50635}}
[16221:207] bounds after rotation: NSRect: {{0, 0}, {200, 250}} 
```

如您所见，界限始终保持不变。由于旋转而实际改变的是框架，因为旋转了 30°C 的图像当然比不旋转的图像更宽。由于中心点已设置为视图的实际中心，因此框架的原点也会发生变化（被推到左侧和顶部）。请注意，图像本身的大小**不会改变**。我没有使用缩放变换，因为不需要缩放就可以实现结果。

但为了更清楚，这里有一些图片给你（0°，30° 90°旋转）： ![UIImageView 的 0°、30° 和 90° 旋转](../Images/43864c9d259ae1f8da5b60fdd6648cc9.png)

他们看起来已经很相似了，对吧？我绘制了实际的框架以明确边界和框架之间的区别。下一个真的很清楚。我覆盖了所有图像，将它们旋转 UIImageView 旋转的负度数，得到以下结果： ![UIImageViews 覆盖以显示大小不会改变](../Images/7e09e7eae152413e27878fb49802bcc6.png)

因此，您会看到如何旋转图像非常简单。现在您的问题是您实际上希望框架保持不变。如果您希望最终帧具有原始帧的大小（在此示例中宽度为 200，高度为 250），那么您将必须缩放生成的帧。但这当然会导致图像缩放，这是您不想要的。我实际上认为更大的框架对您来说不是问题-您只需要知道由于旋转而必须考虑到它。

简而言之：不可能有一个 UIImageView 在旋转后具有相同的帧。这对于任何 UIView 都是不可能的。想想一个矩形。如果你旋转它，它不会是旋转后的矩形，是吗？

当然，您可以将 UIImageView 放在另一个 UIView 中，该 UIView 将具有宽度为 200、高度为 250 的非旋转框架，但这只是肤浅的，因为它不会真正改变旋转矩形具有与原版不同的宽度和高度。

我希望这有帮助。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T08:18:08.900

请勿设置 UIImageView 继承自 UIView 并根据您选择的 UIViewContentMode 进行缩放、变换、设备旋转导致 frame 变化的 contentMode。

另外，如果您只想旋转，则可以使用以下方法更改框架：-

```
[UIView beginAnimations:@"Rotate" context:nil];
    [UIView setAnimationDuration:1.0];
    [UIView setAnimationDelegate:self];
    CGRect frame=yourView.frame;
    frame.origin.y+=distance you want to rotate;
    yourview.frame=frame;
    [UIView commitAnimations];
} 
```

如果您不想要动画，只需更改框架

尝试使用这个：-

```
CABasicAnimation* animation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
animation.fromValue = [NSNumber numberWithFloat:0.0f];
animation.toValue = [NSNumber numberWithFloat: 2*M_PI];
animation.duration = 0.5f;            
animation.repeatCount = HUGE_VALF;     // HUGE_VALF is defined in math.h so import it
[self.reloadButton.imageView.layer addAnimation:animation forKey:@"rotation"]; 
```

# c# - 字符串未被识别为有效的 DateTime

> ID：10570152
> 
> 赞同：0
> 
> 时间：2012-05-13T07:54:53.100
> 
> 标签：c#, asp.net, datetime

我知道这样的问题很多，但我的情况对我来说似乎有点奇怪。

我的 aspx 页面上有一个`textbox`带有日历扩展器的控件

扩展器日期格式属性中的默认格式为“d”。当我`15th May 2012`从日历中选择我的日期时，它给了我`5/15/2012`，这很好。

由于它是一个字符串并且我的数据库字段是日期时间类型，所以我正在使用

```
Convert.ToDateTime(TextBox.Text);   // TextBox.Text = 5/15/2012 
```

但它抛出异常， `string was not recognized as valid datetime`.

然后我更改代码并使用`DateTime.Parse()`但问题仍然存在。然后我尝试像这样重新格式化日期，

```
Convert.ToDateTime(string.Format("0:MM-dd-yyyy",TextBox.Text)).Date 
```

但它仍然抛出异常..

请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T07:59:24.810

使用以下，

```
DateTime dt = DateTime.ParseExact(TextBox.Text, "dd/MM/yyyy", 
                                  CultureInfo.InvariantCulture); 
```

您的系统的 DateTime 格式和扩展器使用的 DateTiem 格式之间可能存在差异。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T07:58:51.270

我*想*您的开发机器日期时间格式不等于 MM/DD/YYYY，而是其他的（例如 DD/MM/YYYY）。查看您的计算机区域设置以查看您的系统日期时间格式。

# git - 向审查委员会或 gerrit 提出强制审查请求

> ID：10570153
> 
> 赞同：0
> 
> 时间：2012-05-13T07:55:02.413
> 
> 标签：git, gerrit, review-board

我刚刚在 git 上设置了审查委员会，还使用了 git 中的 pre-commit 挂钩脚本向审查委员会发送审查请求。但似乎没有办法强制所有开发人员在将代码推送到 git 远程服务器之前发送审查请求。

我可以使用带有 git 的审查委员会来做到这一点吗？另外，我从未尝试过gerrit，它可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T02:02:28.170

我不熟悉审查委员会。Gerrit 允许您在合并并推送到远程服务器之前强制代码经过审查，所以是的，它可以做到这一点。

# php - mysql相关字段

> ID：10570154
> 
> 赞同：3
> 
> 时间：2012-05-13T07:55:21.793
> 
> 标签：php, mysql, sql

这4个字段相互关联

![朋友 - 帖子 - 用户 - 提要](../Images/b36978152b799e0b8475c867d87015c1.png)

我希望它输出为：![在此处输入图像描述](../Images/149dd8ebef65fe4a58e04951dbde085b.png)

在我的**查询**中：

```
SELECT users.firstname, users.lastname, users.screenname, posts.post_id, posts.user_id,
posts.post, posts.upload_name, posts.post_type, 
DATE_FORMAT(posts.date_posted, '%M %d, %Y %r') AS date, 
COUNT(NULLIF(feeds.user_id, ?)) AS everybody, SUM(feeds.user_id = ?) AS you,
GROUP_CONCAT(CASE WHEN NOT likes.user_id = ? THEN 
             CONCAT_WS(' ', likes.firstname, likes.lastname)
                    END
            ) as names
FROM website.users users
INNER JOIN website.posts posts ON (users.user_id = posts.user_id)
LEFT  JOIN website.feeds feeds ON (posts.post_id = feeds.post_id)
LEFT  JOIN website.users likes ON (feeds.user_id = likes.user_id)
GROUP BY posts.pid
ORDER BY posts.pid DESC 
```

现在，我有一个问题应该加入**friends表**的哪一部分，我想显示**来自friend_id或user_id的所有帖子**以及来自当前登录的用户的帖子。如果**朋友表**上没有匹配的朋友，那么只需输出用户的所有帖子。请各位，我需要你的帮助。

Friends.friend_id = 当前用户的好友

Friends.user_id = 用户的当前好友

因此，friends.friend_id = posts.user_id 或 friends.user_id = posts.user_id

如果我的朋友表无法理解，请帮我更改它以使其更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T08:44:05.810

如果我很了解您想根据friends = user_id 加入friends 表，并且如果与friends 表的user_id 上的JOIN 不匹配，则可以尝试以下方法：

```
SELECT users.firstname, users.lastname, users.screenname, posts.post_id, posts.user_id,
posts.post, posts.upload_name, posts.post_type, 
DATE_FORMAT(posts.date_posted, '%M %d, %Y %r') AS date, 
COUNT(NULLIF(feeds.user_id, ?)) AS friends, SUM(feeds.user_id = ?) AS you,
GROUP_CONCAT(CASE WHEN NOT likes.user_id = ? THEN 
             CONCAT_WS(' ', likes.firstname, likes.lastname)
                    END
            ) as names
FROM website.users users
INNER JOIN website.posts posts ON (users.user_id = posts.user_id)
LEFT  JOIN website.feeds feeds ON (posts.post_id = feeds.post_id)
LEFT  JOIN website.users likes ON (feeds.user_id = likes.user_id)
LEFT  JOIN website.friends friends ON ((posts.user_id = friends.user_id) OR (posts.user_id = friends.friends_id) )
GROUP BY posts.pid
ORDER BY posts.pid DESC 
```

我基本上已经在您似乎想要加入的两个字段上添加了一个带有 OR 的朋友表的 JOIN ...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T09:36:26.607

您希望看到来自用户或他的朋友的帖子。因此，不要加入用户，而是加入子查询，如下所示：

```
SELECT users.firstname, users.lastname, users.screenname,
       posts.post_id, posts.user_id, posts.post, posts.upload_name,
       posts.post_type, DATE_FORMAT(posts.date_posted, '%M %d, %Y %r') AS date, 
       COUNT(NULLIF(feeds.user_id, ?)) AS everybody,
       SUM(feeds.user_id = ?) AS you,
       GROUP_CONCAT(CASE WHEN NOT likes.user_id = ? THEN 
             CONCAT_WS(' ', likes.firstname, likes.lastname) END) as names
  FROM (SELECT user_id FROM website.users WHERE user_id = ?
        UNION ALL
        SELECT user_id FROM website.friends WHERE friend_id = ?
        UNION ALL
        SELECT friend_id FROM website.friends WHERE user_id = ?) AS who
  JOIN website.users users ON users.user_id = who.user_id
  JOIN website.posts posts ON users.user_id = posts.user_id
  LEFT  JOIN website.feeds feeds ON posts.post_id = feeds.post_id
  LEFT  JOIN website.users likes ON feeds.user_id = likes.user_i)
 GROUP BY posts.pid
 ORDER BY posts.pid DESC; 
```

[在这里](http://sqlfiddle.com/#!2/8934d/11)测试输出。

# javascript - 如何在 javascript 中加载 OpenSocial 小工具库？

> ID：10570157
> 
> 赞同：1
> 
> 时间：2012-05-13T07:55:49.400
> 
> 标签：javascript, yahoo, yql, opensocial

我正在使用[YQL 代码示例](http://developer.yahoo.com/yql/guide/yql-code-examples.html#yql_javascript)中的示例代码版本来检索 Yahoo! 联系人。我的具体问题是示例代码包含 OpenSocial 小工具函数，我无法找到要包含的 javascript 库以使用函数 gadgets.io.makeRequest。最后一个问题是：为了能够执行代码 gadgets.io.makeRequest(...)，要包含在我的页面中的脚本的 url 是什么。提前致谢

# java - XmlType 默认命名空间的常量

> ID：10570164
> 
> 赞同：0
> 
> 时间：2012-05-13T07:56:38.570
> 
> 标签：java, annotations

[XmlType.namespace](http://docs.oracle.com/javaee/5/api/javax/xml/bind/annotation/XmlType.html#namespace%28%29)返回“##default”作为默认值。我想为“##default”字符串使用一些jdk常量以获得更优雅的代码。只是不想写这样的东西

```
if ("##default".equals(type.namespace())) {
     ...
} 
```

JDK中有什么常量吗？

# php - 下拉列表未在使用 PHP 数组的编辑表单上加载选项

> ID：10570169
> 
> 赞同：0
> 
> 时间：2012-05-13T07:58:00.163
> 
> 标签：php, drop-down-menu

我有一个记录列表，上面有编辑链接。当我单击该链接时，它会将我带到一个包含数据库结果的编辑页面。

我可以成功检索所有文本框的数据。

我试图通过一个无法工作的数组来实现这一点。

这是我在代码片段中的实现：

```
 # $data is from $data=mysqli_fetch_array($result)

                        $product=$data['product'];
                        echo $product.'<br />';

        #initializing array to empty
           $product_list=array("Remote"=>" ","TV"=>" ","Box"=>" ");

        if (array_key_exists($product,$product_list)){

            $product_list["'$product'"] =  'selected="selected" ';

            }

                            print_r($product_list);

        #combo box 

              <select name="products">
                        <option value="select">Select</option>
                        <option value="Remote"<?php echo @$product_list["'$product'"] ?>>Remote</option>
                        <option value="TV" <?php echo @$product_list["'$product'"] ?>> TV</option>
                        <option value="Box" <?php echo @$product_list["'$product'"] ?>> Box</option>
                    </select> 
```

如果我在具有产品“远程”的记录上点击编辑，则在显示所有记录的页面中，我得到以下输出（根据上面的回显语句）：

```
Remote
Array ( [Remote] => [TV] => [Box] => ['Remote'] => selected="selected" ) 
```

HTML 表单显示：

```
 <select name="products">                   
    <option value="select">Select</option>
        <option selected="selected" value="Remote">Remote</option>
        <option selected="selected" value="TV"> TV</option>
        <option selected="selected" value="Box"> Box</option>
</select> 
```

在编辑页面中，如果我选择具有产品“TV”的记录，则会得到以下输出：

```
 TV
 Array ( [Remote] => [TV] => [Box] => ['TV'] => selected="selected" ) 
```

HTML 输出与上面相同。**它总是将选项设置为最后一个产品“盒子”。**

有人可以建议我如何解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T08:10:41.300

这：

```
$product_list["'$product'"] =  'selected="selected" '; 
```

应该

```
$product_list[$product] =  'selected="selected" '; 
```

在其他有`$product_list["'$product'"]`你的地方也应该删除引号。

编辑：

这里

```
<select name="products">
    <option value="select">Select</option>
    <option value="Remote"<?php echo @$product_list["'$product'"] ?>>Remote</option>
    <option value="TV" <?php echo @$product_list["'$product'"] ?>> TV</option>
    <option value="Box" <?php echo @$product_list["'$product'"] ?>> Box</option>
</select> 
```

您没有使用任何循环并试图获取`$product_list[$product]`每个项目中的值 - $product 在每一行中将始终相同，并且等于从 mysql 获取的最后一个。

您必须在每一行中使用正确的索引（即。`<?php echo $product_list['TV']; ?>`）或正确的方式 - 使用循环：

```
<select name="products">
    <option value="select">Select</option>
    <?php foreach($product_list as $product_name => $selected): ?>
    <option value="<?= $product_name ?>" <?= $selected ?>><?= $product_name ?></option>
    <?php endforeach; ?>
</select> 
```

# ssis - DefaultBufferMaxRows 在 ssis 中没有改变

> ID：10570174
> 
> 赞同：1
> 
> 时间：2012-05-13T07:58:30.397
> 
> 标签：ssis

谁能告诉我，当我通过 BIDS 运行包时，DefaultBufferMaxRows 自动更改为 10000 的原因是什么。我的包只包含一个源、查找、目标任务。我想通过查找插入到目标表中的总共 100000 条记录相同的目标表（不匹配的记录）。共有 5 列通过，都是 int 类型。实际上我在运行包之前已经将 DefaultBufferMaxRows 增加到 50000 并且所有其他设置都是默认的。这是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:51:03.567

DefaultBufferMaxRows 和 DefaultBufferSize 作为限制一起工作。DefaultBufferMaxRows 默认设置为 10,000 行；DefaultBufferSize 默认设置为 10MB。如果行大小为 1k，则属性设置大致相同。对于大于 1k 的行，将首先达到 DefaultBufferSize 限制。对于小于 1k 的行，将首先达到 DefaultBufferMaxRows 限制。由于这些属性协同工作，因此您需要调整*这两个*属性以更改 SSIS 数据流任务中缓冲区的行数（或大小）。

希望这会有所帮助，安迪

# css - 制作 标签停留，没有移动

> ID：10570180
> 
> 赞同：1
> 
> 时间：2012-05-13T08:00:18.120
> 
> 标签：css, html

如何，正如标题所暗示的那样，让一个 div 不动。因此，当用户滚动我们的网页时，内容会移动，但 div 元素不会移动。如果假设我想要实现的 div 元素是一个侧边栏，我怎么能只用一个 CSS 脚本来做到这一点？（或使用 HTML5 功能）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T08:02:48.943

```
<style type="text/css">
div.fixedDiv{position:fixed;top:0;left:0;}
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T08:50:52.377

你可以试试这个...... [Jsfiddle](http://jsfiddle.net/e7GfT/)

html

```
<div class="wrapper">
<div class="fixed"></div>
</div>​ 
```

..

```
.wrapper { position: relative; height: 1500px; background:red; }
.fixed { position: fixed; left:0; top:50; width:100px; height:100px; background: green; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T08:03:15.387

```
<style>
#yourdiv{
 position:absolute;
 left:100px;
 top:150px;
}
</style>

<div id="yourdiv">Hello I'm div</div> 
```

根据需要调整左侧和顶部的坐标。

[无论如何，您可以在这里](http://www.w3schools.com/cssref/playit.asp?filename=playcss_position&preval=absolute)看到 css 定位。

# php - drupal 将我从其表中的内容类型上传的图像路径保存在哪里？

> ID：10570182
> 
> 赞同：2
> 
> 时间：2012-05-13T08:00:46.947
> 
> 标签：php, drupal

我创建了一个内容类型库。我有字段描述和图像，我想从内容类型库中检索所有数据。我不知道 drupal 从内容类型中保存图像路径的位置。如果有人可以帮助我，那就太好了。我只想要drupal保存在自定义内容中上传的图像的表名..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T03:55:42.707

我相信您要查找的表是*file_managed* (Drupal 7) 或*files* (Drupal 6)。这将为您提供上传图像的路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T12:18:04.220

Drupal 不在乎使用什么内容类型，图像在 file_managed 表中，您也可以在节点数组中找到图像 url。试试`<?php drupal_set_message('<pre>'.print_r($node, true).'</pre>');?>`你的 node.tpl.php 文件。

# c - IPC FIFO 生产者-消费者死锁

> ID：10570184
> 
> 赞同：1
> 
> 时间：2012-05-13T08:00:55.360
> 
> 标签：c, linux, process, posix, ipc

这是制作人。

```
// speak.c
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <string.h>
#include <fcntl.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <unistd.h>

#define FIFO_NAME "american_maid"

int main(void)
{
    char s[300];
    int num, fd;

    mknod(FIFO_NAME, S_IFIFO | 0666, 0);

    printf("waiting for readers...\n");
    fd = open(FIFO_NAME, O_WRONLY);
    printf("got a reader--type some stuff\n");

    while (gets(s), !feof(stdin)) {
        if ((num = write(fd, s, strlen(s))) == -1)
            perror("write");
        else
            printf("speak: wrote %d bytes\n", num);
    }

    return 0;
} 
```

这就是消费者。

```
//tick.c
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <string.h>
#include <fcntl.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <unistd.h>

#define FIFO_NAME "american_maid"

int main(void)
{
    char s[300];
    int num, fd;

    mknod(FIFO_NAME, S_IFIFO | 0666, 0);

    printf("waiting for writers...\n");
    fd = open(FIFO_NAME, O_RDONLY);
    printf("got a writer\n");

    do {
        if ((num = read(fd, s, 300)) == -1)
            perror("read");
        else {
            s[num] = '\0';
            printf("tick: read %d bytes: \"%s\"\n", num, s);
        }
    } while (num > 0);

    return 0;
} 
```

当我运行它们时，生产者输出，

```
waiting for readers... 
```

和消费者输出，

```
waiting for writers... 
```

*说话*找不到读者，*打勾*。从[这里](http://beej.us/guide/bgipc/output/html/multipage/fifos.html#fifopc)我得到的理论来看，**open()** (speak.c) 将一直​​被阻塞，直到**open()** (tick.c) 被打开。反之亦然。所以我猜有一个僵局或发生了什么事。我需要一个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T08:22:40.073

看起来您在读者和作者之间存在竞争条件。

要解决此问题，您需要一种在编写器“活动”之前不启动阅读器的方法。为此，我建议在作者准备好时制作一个管道并写入它。然后，当从 fork 的读取端读取成功时，fifo 已准备好，读取器应该工作。

您需要在此处使用分叉，因为在父进程和子进程之间协调互斥锁非常重要，并且正确完成的管道更容易。

另外，你打`mknod()`了两次电话。当然，它会返回 -1 `errno == EEXIST`，但要更加小心。为避免这种情况，请让 reader 和 writer 成为一个将路径作为参数的函数。

将您的作者重写为`int speak(const char *fifo, int pipefd)`，将您的读者重写为`int tick(const char *fifo)`.

然后像这样制作一个包装器：

```
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <unistd.h>

const char fifo_name[] /* = ... */;

int speak(const char *fifo, int pipefd);
int tick(const char *fifo);

int main() {
    int pipefd[2];
    pipe(pipefd);

    mknod(fifo_name, S_IFIFO | 0666, 0);

    if (fork() == 0) {
        close(pipefd[0]);
        return speak(fifo_name, pipefd[1]);
    } else {
        close(pipefd[1]);
        char foo;
        read(pipefd[0], &foo, 1);
        return tick(fifo_name);
    }
} 
```

修改您的编写器以在创建 fifo 之后（即在调用 之后）将一个字节（任何内容）打印到传递的 fd `open(..., O_WRONLY)`。

不要逐字使用我的代码，因为为了简洁起见，我省略了错误检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:47:56.710

它在我的环境中运行正常。如果 reader 和 writer 准备好， open 将返回。因为 open 被阻塞了，所以在我看来， mknod 函数是成功的。可能是您在不同的路径上执行这两个过程。

# numpy - 在 OS X Lion 10.7.4 和 Python 3.2.2 上安装 MatPlotLib 1.2.x

> ID：10570185
> 
> 赞同：1
> 
> 时间：2012-05-13T08:00:56.450
> 
> 标签：numpy, python-3.x, matplotlib, osx-lion

几天前我问了一个关于在同一系统上安装 numpy 的问题。值得庆幸的是，我自己设法解决了这个问题，但不幸的是，我现在一直在尝试安装 matplotlib。

我首先尝试了当前的分布式版本，但没有运气，所以我想我会下载 git 存储库并尝试一下。我已经做到了这一点：

*   更改了`make.osx`文件，以便它可以在 Python 3 中工作：
    *   `import urllib`->`import urllib.request`
    *   `urllib.urlretrieve()`->`urllib.request.urlretrieve()`

即使在那之后，我仍然无法找到 freetype2 标头。我四处搜索，发现我可以通过编辑以下行来解决这个问题`setupext.py`：

*   `'darwin' : [],`->`'darwin' : ['/usr/local'],`

`make.osx`但是，我在使用该文件时仍然收到错误消息。这是我从终端调用文件的方式：

*   `sudo make -f make.osx PREFIX=/usr/local PYVERSION=3.2 fetch deps mpl_build mpl_install`

我意识到 Python 3 尚未正式支持 matplotlib，但我认为也许某个地方的某个人至少设法让它编译/安装？

任何帮助将非常感激，

亚当。

我在下面包含了我得到的错误：

```
basedirlist is: ['/usr/local']
============================================================================
BUILDING MATPLOTLIB
            matplotlib: 1.2.x
                python: 3.2.2 (v3.2.2:137e45f15c0b, Sep  3 2011, 17:28:59)
                        [GCC 4.2.1 (Apple Inc. build 5666) (dot 3)]
              platform: darwin

REQUIRED DEPENDENCIES
                 numpy: 1.6.2rc1
             freetype2: found, but unknown version (no pkg-config)

OPTIONAL BACKEND DEPENDENCIES
                libpng: found, but unknown version (no pkg-config)
               Tkinter: Tkinter: version not identified, Tk: 8.5, Tcl: 8.5
                  Gtk+: no
                        * Building for Gtk+ requires pygtk; you must be able
                        * to "import gtk" in your build/install environment
       Mac OS X native: yes
                    Qt: no
                   Qt4: Qt: 4.7.4, PyQt4: 4.8.6
                PySide: no
                 Cairo: no

OPTIONAL DATE/TIMEZONE DEPENDENCIES
              datetime: present, version unknown
              dateutil: matplotlib will provide
                  pytz: matplotlib will provide
adding pytz

OPTIONAL USETEX DEPENDENCIES
                dvipng: no
           ghostscript: /bin/sh: gs: command not found
                 latex: no

[Edit setup.cfg to suppress the above messages]
============================================================================
pymods ['pylab']
packages ['matplotlib', 'matplotlib.backends', 'matplotlib.backends.qt4_editor', 'matplotlib.projections', 'matplotlib.testing', 'matplotlib.testing.jpl_units', 'matplotlib.tests', 'mpl_toolkits', 'mpl_toolkits.mplot3d', 'mpl_toolkits.axes_grid', 'mpl_toolkits.axes_grid1', 'mpl_toolkits.axisartist', 'matplotlib.sphinxext', 'matplotlib.tri', 'matplotlib.delaunay', 'pytz', 'dateutil', 'dateutil.zoneinfo']
running build
running build_py
copying lib/matplotlib/mpl-data/matplotlibrc -> build/lib.macosx-10.6-intel-3.2/matplotlib/mpl-data
copying lib/matplotlib/mpl-data/matplotlib.conf -> build/lib.macosx-10.6-intel-3.2/matplotlib/mpl-data

running build_ext
building 'matplotlib.ft2font' extension
gcc-4.2 -DNDEBUG -g -O3 -arch i386 -arch x86_64 -I/usr/local/include -I/usr/local/include/freetype2 -isysroot /Developer/SDKs/MacOSX10.6.sdk -DPY_ARRAY_UNIQUE_SYMBOL=MPL_ARRAY_API -DPYCXX_ISO_CPP_LIB=1 -DPYCXX_PYTHON_2TO3=1 -I/usr/local/include -I/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/site-packages/numpy/core/include -I/usr/local/include -I. -I/usr/local/include/freetype2 -I/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/site-packages/numpy/core/include/freetype2 -I/usr/local/include/freetype2 -I./freetype2 -I/Library/Frameworks/Python.framework/Versions/3.2/include/python3.2m -c src/ft2font.cpp -o build/temp.macosx-10.6-intel-3.2/src/ft2font.o
In file included from /Library/Frameworks/Python.framework/Versions/3.2/include/python3.2m/bytearrayobject.h:9,
                 from /Library/Frameworks/Python.framework/Versions/3.2/include/python3.2m/Python.h:73,
                 from ./CXX/WrapPython.h:58,
                 from ./CXX/Extensions.hxx:37,
                 from src/ft2font.h:6,
                 from src/ft2font.cpp:3:
/Developer/SDKs/MacOSX10.6.sdk/usr/include/stdarg.h:4:25: error: stdarg.h: No such file or directory
In file included from /Developer/SDKs/MacOSX10.6.sdk/usr/include/c++/4.2.1/iosfwd:45,
                 from /Developer/SDKs/MacOSX10.6.sdk/usr/include/c++/4.2.1/bits/stl_algobase.h:70,
                 from /Developer/SDKs/MacOSX10.6.sdk/usr/include/c++/4.2.1/bits/char_traits.h:46,
                 from /Developer/SDKs/MacOSX10.6.sdk/usr/include/c++/4.2.1/string:47,
                 from ./CXX/Python3/Exception.hxx:47,
                 from ./CXX/Python3/Objects.hxx:45,
                 from ./CXX/Python3/Extensions.hxx:52,
                 from ./CXX/Extensions.hxx:42,
                 from src/ft2font.h:6,
                 from src/ft2font.cpp:3:
/Developer/SDKs/MacOSX10.6.sdk/usr/include/c++/4.2.1/i686-apple-darwin11/bits/c++locale.h: In function ‘int std::__convert_from_v(int* const&, char*, int, const char*, ...)’:
/Developer/SDKs/MacOSX10.6.sdk/usr/include/c++/4.2.1/i686-apple-darwin11/bits/c++locale.h:77: error: ‘va_start’ was not declared in this scope
/Developer/SDKs/MacOSX10.6.sdk/usr/include/c++/4.2.1/i686-apple-darwin11/bits/c++locale.h:85: error: ‘va_end’ was not declared in this scope
In file included from /Library/Frameworks/Python.framework/Versions/3.2/include/python3.2m/bytearrayobject.h:9,
                 from /Library/Frameworks/Python.framework/Versions/3.2/include/python3.2m/Python.h:73,
                 from ./CXX/WrapPython.h:58,
                 from ./CXX/Extensions.hxx:37,
                 from src/ft2font.h:6,
                 from src/ft2font.cpp:3:
/Developer/SDKs/MacOSX10.6.sdk/usr/include/stdarg.h:4:25: error: stdarg.h: No such file or directory
In file included from /Developer/SDKs/MacOSX10.6.sdk/usr/include/c++/4.2.1/iosfwd:45,
                 from /Developer/SDKs/MacOSX10.6.sdk/usr/include/c++/4.2.1/bits/stl_algobase.h:70,
                 from /Developer/SDKs/MacOSX10.6.sdk/usr/include/c++/4.2.1/bits/char_traits.h:46,
                 from /Developer/SDKs/MacOSX10.6.sdk/usr/include/c++/4.2.1/string:47,
                 from ./CXX/Python3/Exception.hxx:47,
                 from ./CXX/Python3/Objects.hxx:45,
                 from ./CXX/Python3/Extensions.hxx:52,
                 from ./CXX/Extensions.hxx:42,
                 from src/ft2font.h:6,
                 from src/ft2font.cpp:3:
/Developer/SDKs/MacOSX10.6.sdk/usr/include/c++/4.2.1/i686-apple-darwin11/x86_64/bits/c++locale.h: In function ‘int std::__convert_from_v(int* const&, char*, int, const char*, ...)’:
/Developer/SDKs/MacOSX10.6.sdk/usr/include/c++/4.2.1/i686-apple-darwin11/x86_64/bits/c++locale.h:77: error: ‘va_start’ was not declared in this scope
/Developer/SDKs/MacOSX10.6.sdk/usr/include/c++/4.2.1/i686-apple-darwin11/x86_64/bits/c++locale.h:85: error: ‘va_end’ was not declared in this scope
lipo: can't figure out the architecture type of: /var/tmp//ccafJH1l.out
error: command 'gcc-4.2' failed with exit status 1
make: *** [mpl_build] Error 1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T19:14:32.860

好的......我想已经设法让**matplotlib**现在安装......

1.  首先，您需要安装**numpy**。我在另一篇文章中有执行此操作的说明：[安装 numpy](https://stackoverflow.com/questions/10557857/install-numpy-for-python-3-2-3-on-os-x-10-7-4)

2.  现在打开**终端并克隆****matplotlib**的 git 存储库（假设您已安装 git）：

    *   `git clone git://github.com/matplotlib/matplotlib.git`（这可能需要一段时间）
3.  **克隆完成后，在Finder**中打开您的用户文件夹

***   在您的用户文件夹中打开 matplotlib 目录

    *   有一个名为“make.osx”的文件用**TextEdit**（或类似的）打开它

    *   更改以下行：

    *   `MACOSX_DEPLOYMENT_TARGET=10.6`
    *   `OSX_SDK_VER=10.6`

    至：

    *   `MACOSX_DEPLOYMENT_TARGET=10.7`
    *   `OSX_SDK_VER=10.7`*   更改以下行：

    *   `${PYTHON} -c 'import urllib; urllib.urlretrieve("${ZLIBURL}", "${ZLIBFILE}")' &&\ ${PYTHON} -c 'import urllib; urllib.urlretrieve("${PNGURL}", "${PNGFILE}")' &&\ ${PYTHON} -c 'import urllib; urllib.urlretrieve("${FREETYPEURL}", "${FREETYPEFILE}")'`

    至：

    *   `${PYTHON} -c 'import urllib.request; urllib.request.urlretrieve("${ZLIBURL}", "${ZLIBFILE}")' &&\ ${PYTHON} -c 'import urllib.request; urllib.request.urlretrieve("${PNGURL}", "${PNGFILE}")' &&\ ${PYTHON} -c 'import urllib.request; urllib.request.urlretrieve("${FREETYPEURL}", "${FREETYPEFILE}")'`*   保存更改

    *   打开**idle**`setupext.py`调用的文件

    ***   找到该行`'darwin' : [],`并将其更改为`'darwin' : ['/usr/local'],`

    *   保存文件

    *   再次打开**终端**并输入以下内容：

    *   `sudo make -f make.osx PREFIX=/usr/local PYVERSION=3.2 fetch deps mpl_build mpl_install`*   一段时间后，matplotlib 应该安装在以下目录中：

    *   `/usr/local/lib/Python3.2/site-packages/`*   打开上面的目录和下面的目录：

    *   `/Library/Python/3.2/site-packages/`*   将以下目录复制/移动`/usr/local/lib/Python3.2/site-packages/`到`/Library/Python/3.2/site-packages/`：

    *   `dateutil`
    *   `matplotlib`
    *   `mpl_toolkits`*   **现在应该安装**matplotlib****

    ***   如果您打开**空闲**并键入`import matplotlib`它不应该返回错误

    *   我尝试了该`matplotlib/examples/user_interfaces/embedding_in_qt4_wtoolbar.py`文件，它似乎工作正常****** 

 ****希望其他人觉得这很有用！

再次感谢您的帮助，

亚当。****

# java - 保持循环，直到输入在 java 中可用

> ID：10570187
> 
> 赞同：3
> 
> 时间：2012-05-13T08:01:05.700
> 
> 标签：java, c++, loops

如果我还不知道输入大小，那么在 JAVA 中保持循环迭代直到可用的方法是什么。在 C++ 中，它可以按如下方式完成。

```
int main(){
    int val;
    while(cin >> val){
           //do stuff
    } 
} 
```

在java中做类似事情（如上）的方法是什么

提前致谢。山塔努

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T08:09:52.970

一种方法是使用扫描仪。

```
long val;
Scanner sc=new Scanner(System.in);
while (sc.hasNextLong() ) {
    val = sc.nextLong();
    // do stuff
} 
```

这相当于您提供的 cpp 代码。但不完全是你要求的。只要读取字符串中有合法输入，它就会循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T08:12:40.117

您应该尝试以下操作。

```
 long val;
    Scanner sc = new Scanner(System.in).useDelimiter("\n");
    while (sc.hasNext()) {
        String temp = sc.next().trim();

        val = Long.parseLong(temp);
        // do stuff
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T08:09:39.650

根据您的具体要求，使用 Scanner 类中的方法。这个读一整行。这意味着用户必须在大多数系统中按回车键。

```
public static void main(String[] args)
{
    String str=new Scanner(System.in).nextLine();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T08:10:04.323

不要实现繁忙的循环。您可能更喜欢使用流。在数据到达之前，流的方法`read()`被阻塞，因此您的代码将很简单，没有繁忙的循环，并且可以完全按照您的意愿工作：

```
while ( in.read() != -1) {
   // do your stuff
} 
```

甚至更好地使用缓冲区：

```
byte[] buf = new buf[MAX_SIZE]
while ( in.read(buf) != -1) {
   // do your stuff
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-13T08:21:32.453

我相信实现您的目的的最佳方法是通过多线程，其中一个线程将等待用户的输入，并让另一个线程知道它何时收到。与此同时，另一个线程将继续迭代循环。

# c++ - 这段代码可能会陷入无限循环吗？

> ID：10570188
> 
> 赞同：4
> 
> 时间：2012-05-13T08:01:08.163
> 
> 标签：c++, qt, concurrency

此 Qt 代码是否有可能陷入无限循环？

```
QNetworkAccessManager m;
QNetworkReply *reply = m.get(QNetworkRequest(QUrl("http://www.example.org/")));
QEventLoop loop;
QObject::connect(reply, SIGNAL(finished()), &loop, SLOT(quit()));
loop.exec();
qDebug() << reply->readAll();
delete reply; 
```

这基本上是一种显示网页内容的“同步”方式。

我没有观察到使用它的任何问题，但我考虑了以下情况：

*   的`finished`信号在创建事件循环*之前*`reply`发出，并建立和之间的信号槽连接*`finished``quit`*
**   从该点向前不会发出任何信号，因此永远不会触发`quit`*   `loop.exec()`会不断循环*

 *有可能发生这种情况，还是我不了解 Qt 事件循环的工作原理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T08:17:30.720

虽然 Qt 执行您自己的代码（例如上面的代码），但它不能处理新信号和调用槽。在您的方法执行时发出的每个信号都将在稍后处理。如果你想在你的方法中间强制处理信号，你可以调用[QCoreApplication::processEvents](http://qt-project.org/doc/qt-4.8/qcoreapplication.html#processEvents)来处理当前事件循环中的信号，或者[调用 QEventLoop::exec](http://qt-project.org/doc/qt-4.8/qeventloop.html#exec)在另一个循环中处理。

所以这段代码是安全的。如果信号来得太快，它将在事件队列中等待。

如果您正在发出信号并且有插槽使用[Qt::DirectConnection](http://qt-project.org/doc/qt-4.8/qt.html#ConnectionType-enum)连接到该信号，则这些插槽将立即执行。但这不符合你的情况。Qt 必须在发出信号之前执行一些内部代码。当您的方法正在执行时，它无法执行此代码。只有一个线程和一个调用堆栈。

请注意，当您使用 Qt 线程时，事件循环的行为更加复杂。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-13T13:25:24.807

就在运行之前`loop.exec()`，你可以检查一下`reply->isFinished()`。如果是，请不要执行循环。*

# c# - 在 Spring.net 的字典中我的班级类型

> ID：10570195
> 
> 赞同：1
> 
> 时间：2012-05-13T08:02:43.203
> 
> 标签：c#, dictionary, spring.net

我有一个使用 Spring.net 的应用程序。我想创建一个字典实例。键类型是“字符串”。值类型是“IToolsetModel”（我写的接口）。我的界面的程序集文件是“ElmoMotionControl.Activity.Model”，命名空间是“ElmoMotionControl.Activity.Model.ToolsetModel”（与程序集相同）。我在 springs xml 中写道：

```
<object id ="SystemConfigActivityDictionary" type="System.Collections.Generic.Dictionary&lt;string,ElmoMotionControl.Activity.Model.ToolsetModel.IToolsetModel>">
 <constructor-arg>
  <dictionary key-type="string" value-type="ElmoMotionControl.Activity.Model.Toolset.IToolsetModel, ElmoMotionControl.Activity.Model">
    <entry key="SystemConfigActivityToolset" value-ref="SystemConfigActivityToolset"/>
  </dictionary>
</constructor-arg> 
```

我收到错误：“无法从字符串值 'ElmoMotionControl.Activity.Model.IToolsetModel' 加载类型。”

我想念什么？

非常感谢

# jquery - 不同元素上一系列 jQuery 动画的整洁代码？

> ID：10570198
> 
> 赞同：0
> 
> 时间：2012-05-13T08:03:16.713
> 
> 标签：jquery, jquery-animate

我目前正在使用这段代码，它做我想做的事

```
$('#about-link').click(function() {
    $('#login').fadeOut(function(){
        $('#about').fadeIn(function() {
            $('#about').one('click', function() {
                $('#about').fadeOut(function(){
                    $('#login').fadeIn();
                });
            });
        });
    });
    return false;
}) 
```

然而，那里的嵌套数量是疯狂的。有没有办法以一种不那么嵌套的方式来写这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T08:19:38.093

```
$('#about-link, #about').on('click', function() {
    var el = this.id == 'about-link' ? 'login' : this.id;
    show_hide(el);
    return false;
});

function show_hide(el){
 var arr = ['login', 'about'],
     t = arr.indexOf(el) == 0 ? 1 : 0;
    $('#' + el).fadeOut(function() {
       $('#' + arr[t]).fadeIn();
    });
}
​ 
```

**[演示](http://jsfiddle.net/Dzn79/6/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T08:20:47.423

您可以将 .one('click') 从嵌套函数中移出，从而减少一个内部函数。

```
$('#about-link').click(function() {
    $('#login').fadeOut(function(){
        $('#about').fadeIn().one('click', function() {
            $(this).fadeOut(function(){
                $('#login').fadeIn();
            });
    });
    return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T07:15:34.717

[`.queue()`](http://api.jquery.com/queue/)完全符合我的要求。很干净：

```
var about = $('#about');
$('#login')
    .fadeOut()
    .queue(function(next) { about.fadeIn(next);       })
    .queue(function(next) { about.one('click', next); })
    .queue(function(next) { about.fadeOut(next);      })
    .fadeIn(); 
```

哎呀，如果您愿意放弃浏览器支持，它甚至会被缩短：

```
var about = $('#about');
$('#login')
    .fadeOut()
    .queue(about.fadeIn.bind(about))
    .queue(about.one.bind(about, 'click'))
    .queue(about.fadeOut.bind(about))
    .fadeIn(); 
```

# php - 如何在 drupal6 中创建自己的钩子？

> ID：10570200
> 
> 赞同：2
> 
> 时间：2012-05-13T08:03:51.047
> 
> 标签：php, drupal

drupal如何创建自己的钩子。同样，我想为自己定制一个钩子。我该如何进行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T08:09:09.393

可能是您正在寻找[module_invoke_all](http://api.drupal.org/api/drupal/includes!module.inc/function/module_invoke_all/6)

一些有用的链接开始：

*   [为你的 Drupal 模块创建钩子](http://web.archive.org/web/20101227170201/http://himerus.com/blog/himerus/creating-hooks-your-drupal-modules)
*   [如何使用 module_invoke_all() 调用钩子](http://www.youtube.com/watch?v=C3SoAYtdcdo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T17:25:50.490

如果你有一个通过引用传递参数的钩子，并且你不能使用 drupal_alter（例如一个传入多个参数的 presave 钩子），你可以使用 module_implements。

这样，模块可以将其实现为 modulename_foo_presave 而不是 modulename_presave_alter。当您想让模块在其生命周期的多个点上更改某些内容时，这很有用。

对于 drupal 核心中的示例，请查看 node_validate (drupal 7) 的代码。

```
foreach (module_implements('node_validate') as $module) {
  $function = $module . '_node_validate';
  $function($node, $form, $form_state);
} 
```

来自[http://api.drupal.org/api/drupal/modules%21node%21node.module/function/node_validate/7](http://api.drupal.org/api/drupal/modules%21node%21node.module/function/node_validate/7)

如果您想创建可以以这种方式实现的钩子，则相同的方法适用于 Drupal 6。

# hadoop - map-reduce 框架是否旨在实现交换函数？

> ID：10570209
> 
> 赞同：0
> 
> 时间：2012-05-13T08:05:41.727
> 
> 标签：hadoop

我偶然发现了一本关于 hadoop 的书。我在其中一个练习中看到了这个问题，“map-reduce 框架是否旨在实现交换函数？”。有人对这个问题有答案和解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T08:29:11.697

我认为答案是肯定的。
MapReduce 框架只保证所有的map 任务在reduce 任务开始之前完成，不能指定每条记录的处理顺序。因此，如果处理顺序很重要，则结果可能不是恒定的。

# php - 字符串偏移量作为数组

> ID：10570214
> 
> 赞同：0
> 
> 时间：2012-05-13T08:07:26.290
> 
> 标签：php, drupal, multidimensional-array, fatal-error

我在 drupal 6 工作，但我认为这更像是一个与 php 相关的问题，而不是一个 drupal 问题。

我正在使用正则表达式从 $node 对象中收集某些值，基于我将值分配给新数组的键，以将其传递给我的另一个函数。

有时我会收到“致命错误：不能将字符串偏移量用作数组”错误，有时我不会...

这是我正在使用的代码

```
$dynamic_acc = array();
      foreach($node as $key => $value){            
        //regular expression of the required fields
        $opt_exp = "/^(field_svm_group_and_or_)(\d*)(_qlty)$/";
        $min_exp = "/^(field_svm_group_min_acc_)(\d*)(_qlty)$/";
        $max_exp = "/^(field_svm_group_max_acc_)(\d*)(_qlty)$/";
        if(preg_match($opt_exp, $key)){
          $id_array = preg_split('/_/', $key); //$id_array['5'] will always be an integer
          $dynamic_acc[$id_array['5']]['opt'] = array(
              $key => $value['0']['value'],
              );
        }
        if(preg_match($min_exp, $key)){
          $id_array = preg_split('/_/', $key);
          $dynamic_acc[$id_array['5']]['min'] = array(
              $key => ($value['0']['value'])/(100),
              );
        }
        if(preg_match($max_exp, $key)){
          $id_array = preg_split('/_/', $key);
          $dynamic_acc[$id_array['5']]['max'] =array(
              $key => ($value['0']['value'])/(100),
              );
        }

      } 
```

我已经阅读了关于 php.net 和 stackoverflow 上的错误......但我并没有真正掌握这个概念。如果有人可以帮助我并让我对这个问题有所了解，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T08:32:10.027

很可能 $value['0'] 是一个字符串，而您正试图将其视为一个数组。

执行此操作时会出现此错误：

```
$foo = 'bar';
$foo[0] = 'barbar'; 
```

# php - 我的代码无法在 PHP 中正确提取 XPath

> ID：10570215
> 
> 赞同：0
> 
> 时间：2012-05-13T08:07:41.227
> 
> 标签：php, html, xpath

我用 PHP 编写了一些代码来从其他网站中提取某些元素的内容。这些元素由 XPath 处理。这些代码在一个网站上成功运行，但在另一个网站上却失败了。因此，我确信并非整个代码都不正确。
顺便说一句：我通过在 Firefox 中使用“检查元素”并右键单击该元素并选择“复制 XPath”来提取元素的 XPath 地址。

第二个网站有什么问题？

谢谢

这是代码：

```
//MyCode.PHP
<html>
<head>
<title>This is the title</title>
</head>
<body>

<?php 

class EmDIV
{
    public $url="";
    public $content="";
    public $name="";
    public $query="";
    public function EmDIV($CdivName,$Curl,$CQuery)
    {
        $this->name=$CdivName;
        $this->url=$Curl;
        $this->query=$CQuery;
        $html = new DOMDocument();
        @$html->loadHtmlFile($this->url);

        $bodies = $html->getElementsByTagName('body');
        assert($bodies->length === 1);
        $body = $bodies->item(0);
        $xpath = new DOMXPath( $html );
        $nodelist = $xpath->query($this->query);
        //echo @$body->saveHTML();
        if($nodelist->length==1)
        {
            $this->content=$nodelist->item(0)->textContent;
            //sanitizing
            //$this->content=Jsoup.clean($this->content, Whitelist.basic());
        }
        //echo $nodelist->item(0)->nodeName;        
        foreach ($nodelist as $node) 
            echo $node->getNodePath()."\n";     
    }
}

$emdiv=array(
//new EmDIV('parsmalaysia','http://www.parsmalaysia.com/exchange.html','/html/body/div/div[5]/div/div/div/div/div/div/div/div/div/div/table/tbody/tr/td[4]/text()'),
new EmDIV('atlas-exchange','http://atlas-exchange.com/','/html/body/div/div/table/tr/td/table/tr/td/div/div[10]/div/div/div/table/tr[3]/td[2]/text()'),
new EmDIV('usunmalaysia','http://www.usunmalaysia.com/Home.aspx','/html/body/form/table/tbody/tr[3]/td/table/tbody/tr/td/table/tbody/tr/td/table/tbody/tr[4]/td/table/tbody/tr/td/table/tbody/tr/td[2]/div/table/tbody/tr[2]/td/table/tbody/tr/td/table/tbody/tr[2]/td/table/tbody/tr[3]/td/table/tbody/tr[4]/td[2]/text()'),
);
?>

<table border="1">
<tr>
<td>Site</td>
<td>RM Price</td>
</tr>
    <?php
        foreach ($emdiv as $ed) 
        {
            echo "<tr>";
            echo "<td>".$ed->name."</td>";
            echo "<td>".$ed->content."</td>";
            echo "</tr>";
        }
    ?>
</table> 

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T21:51:06.607

在第二页中没有 tbody 元素。您必须从路径中删除所有 tbody 元素。Firefox 显示 tbody 元素，因为它们是表格内部结构的一部分，但它们不在您要检索的标记中。

# javascript - 这个选择器的原型

> ID：10570217
> 
> 赞同：1
> 
> 时间：2012-05-13T08:08:13.420
> 
> 标签：javascript, jquery, prototype

如果我使用以下功能：

```
clusters.prototype.shop_iqns_selected_class = function() {
    if(this.viewport_width < 980) {
        $(this.iqns_class).each(function() {
            $(this.iqn).on('click', function() {
                if($(this).hasClass('selected')) {
                    $(this).removeClass('selected');
                } else {
                    $(this).addClass('selected');
                }
            });
        });
    }
} 
```

要将属性添加到 clusters 函数，我知道使用`this.viewport_width`我指的是我`this.viewport_width`定义的父函数，但是当我使用 jQuery 选择器`$(this)`时，我指的是函数的父`$.on()`函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T08:10:06.023

不要`this`在整个代码中使用 all。像这样的方法`$.each`给你另一个参考：

```
$(".foo").each(function(index, element){
  /* 'element' is better to use than 'this'
     from here on out. Don't overwrite it. */
}); 
```

此外，`$.on`通过事件对象提供相同的功能：

```
$(".foo").on("click", function(event) {
  /* 'event.target' is better to use than
     'this' from here on out. */
}); 
```

当您的嵌套深入时，使用的歧义太多了`this`。当然，您会发现在积极使用的另一种方法是直接在回调中创建一个别名`that`，它等于`this`：

```
$(".foo").on("click", function(){
  var that = this;
  /* You can now refer to `that` as you nest,
     but be sure not to write over that var. */
}); 
```

我更喜欢在参数或事件对象中使用 jQuery 提供的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T08:14:18.550

在 JavaScript 中，`this`完全由*函数的调用*方式定义。jQuery 的函数以设置每个元素值`each`的方式调用您给它的迭代器函数，因此在该迭代器函数中，不再引用它在该代码的其余部分中引用的内容。`this``this`

这可以通过闭包上下文中的变量轻松修复：

```
clusters.prototype.shop_iqns_selected_class = function() {
    var self = this; // <=== The variable
    if(this.viewport_width < 980) {
        $(this.iqns_class).each(function() {
            // Do this *once*, you don't want to call $() repeatedly
            var $elm = $(this);

            // v---- using `self` to refer to the instance
            $(self.iqn).on('click', function() {
                // v---- using $elm
                if($elm.hasClass('selected')) {
                    $elm.removeClass('selected');
                } else {
                    $elm.addClass('selected');
                }
            });
        });
    }
} 
```

我继续使用它`this`来引用每个 DOM 元素，但您可以接受迭代器函数的参数，这样就不会有歧义：

```
clusters.prototype.shop_iqns_selected_class = function() {
    var self = this; // <=== The variable
    if(this.viewport_width < 980) {
        // Accepting the args -----------v -----v
        $(this.iqns_class).each(function(index, elm) {
            // Do this *once*, you don't want to call $() repeatedly
            var $elm = $(elm);

            // v---- using `self` to refer to the instance
            $(self.iqn).on('click', function() {
                // v---- using $elm
                if($elm.hasClass('selected')) {
                    $elm.removeClass('selected');
                } else {
                    $elm.addClass('selected');
                }
            });
        });
    }
} 
```

更多阅读*（我的博客`this`中关于 JavaScript 的帖子）*：

*   [*神话方法*](http://blog.niftysnippets.org/2008/03/mythical-methods.html)
*   [*你必须记住`this`*](http://blog.niftysnippets.org/2008/04/you-must-remember-this.html)

# php - $facebook -> getUser() 返回错误值？

> ID：10570219
> 
> 赞同：2
> 
> 时间：2012-05-13T08:08:39.770
> 
> 标签：php, facebook, facebook-graph-api

问题与标题相同。我正在使用最新的 php-sdk (v3.1.1) 来操作服务器端的身份验证流程。

我在 Chrome 中有 2 个标签，一个是我的 Facebook 页面，另一个是 php 测试页面。这两个问题多次发生：

*   `$facebook->getUser()`即使我登录仍然返回 0。
*   `$facebook->getUser()`即使我注销了，仍然返回一个 ID。

我必须解决这个问题：尝试使用提供的 access_token 启动图形 API 请求，并检查是否`$response->error->type == "OAuthException"`存在活动会话。

有没有办法`$facebook->getUser()`“稳定”使用？我已经通过 SO 进行了很多搜索，但尚未找到 php-sdk 3.1.1 的最佳答案。

非常感谢任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-13T08:22:09.157

1.  **登录。** 根据[FB SDK 的文档示例，](https://github.com/facebook/php-sdk/blob/master/examples/example.php)`getUser()`即使您已注销，也会返回 userId，但具有与 FB 帐户关联的 cookie 。要检测用户是否登录，您应该使用

    ```
    $user = $facebook->getUser();
    //Check Access token
    if ($user) {
         try {
            $user_profile = $facebook->api('/me');
         } catch (FacebookApiException $e) {
            $user = null;
         }
    } 
    if ($user) { 
        //logged-in
    } else {
        //not logged-in
    } 
    ```

    要登录您的应用程序，请按照此 url 让用户登录您的应用程序，而不是相邻的选项卡（确保您根据应用程序执行的预期操作传递[范围）：](https://developers.facebook.com/docs/authentication/permissions/)

    ```
    $loginUrl = $facebook->getLoginUrl(
        'scope' => ...
    ); 
    ```

2.  **登出。**似乎您的 PHP 服务器在每个会话中存储了一些访问令牌的值，因此即使您在浏览器中注销，您的服务器仍然使这些令牌有效。实际上，我不知道是错误还是功能，但在用户注销后它们不会被 Facebook 破坏。

    为了销毁这些令牌，我使用了这些：

    ```
    $facebook->destroySession(); 
    ```

    每次用户注销时我都会调用它`$facebook->getLogoutUrl()`；

# css - 页面上的 Div 中心适用于桌面，但不适用于移动设备

> ID：10570220
> 
> 赞同：1
> 
> 时间：2012-05-13T08:08:50.023
> 
> 标签：css, html

为什么是这样：

```
 <div class="page" role="main">
    <div class="gallery">
    </div>
  </div> 
```

这个CSS：

```
.page {
  width: 100%;
  height: 100%;
}

.gallery {
  margin: 0 auto;
  width: 320px;
} 
```

在桌面浏览器中工作但在 iphone sfari 中不起作用？

在桌面浏览器上它是居中的，而在移动设备上它是向右对齐的，好像没有居中一样。
有没有更好的方法使页面上的主 div 居中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T11:06:34.773

试试这个

```
.page
{ 
width: 100%;
height: 100%;
text-align:center;
margin:auto;
}

.gallery {
  margin: auto;
  width: 320px;
} 
```

# objective-c - 保存照片的数组始终返回为空

> ID：10570221
> 
> 赞同：0
> 
> 时间：2012-05-13T08:08:53.877
> 
> 标签：objective-c, photos

我正在尝试从已保存的相册中创建符合特定条件的所有图像的数组。这是它的简化代码。我将照片添加到 myImages 数组中，并通过“添加图像”日志确认记录了正确的图像。但是，函数返回的数组始终为空。对 Objective-C 来说相当新，所以任何建议都会有所帮助。

```
NSMutableArray * myImages = [NSMutableArray array];

ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];

// Enumerate just the photos by using ALAssetsGroupSavedPhotos.
[library enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos usingBlock:^(ALAssetsGroup *group, BOOL *stop) {

    // Within the group enumeration block, filter to enumerate just photos.
    [group setAssetsFilter:[ALAssetsFilter allPhotos]];

    [group enumerateAssetsUsingBlock:^(ALAsset *alAsset, NSUInteger index, BOOL *innerStop) {

                             // The end of the enumeration is signaled by asset == nil.
                             if (alAsset) {
                                 ALAssetRepresentation *representation = [alAsset defaultRepresentation];
                                 UIImage *latestPhoto = [UIImage imageWithCGImage:[representation fullResolutionImage]];

                                     NSLog(@"Added Image");
                                     [myImages addObject:latestPhoto];
                             }
                         }];
                    }
                     failureBlock: ^(NSError *error) {
                         // Typically you should handle an error more gracefully than this.
                         NSLog(@"No groups");
                     }];

return myImages; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T08:18:31.730

第一件事。你真的返回 imagesTakenOnDate 吗？在您的代码中看不到对此 ivar 的任何引用。我会说您在代码中放置了一些断点。在 gdb 调试器控制台中，您可以键入：

```
po myImages 
```

比调试器会打印出你的数组的内容。希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T08:19:53.763

什么是imagesTakenOnDate？那应该是myImages吗？如果是这样，您不能以这种方式返回它，因为块代码将在方法返回*后执行。*该方法是异步的。而不是“返回”，您有 2 个选项可以在函数外部访问修改后的数组：

选项1：使您的方法以完成块作为参数，然后在 enumerateGroupsWithTypes 块内调用完成块，并将完成块传递给数组。例如：

```
typedef void (^CompletionBlock)(id, NSError*);
-(void)myMethodWithCompletionBlock:(CompletionBlock)completionBlock; 
```

然后当你完成成功调用时：

```
completionBlock(myImages, nil); 
```

在 failureBlock 调用中：

```
completionBlock(nil, error); 
```

选项 2：使数组成为保留在父对象上的 ivar，而不是局部变量，然后将其声明为 __block 变量，以便可以在块内对其进行修改。

# c# - 事件问题

> ID：10570222
> 
> 赞同：0
> 
> 时间：2012-05-13T08:08:58.620
> 
> 标签：c#

我正在使用带有确定和取消按钮的表单。当用户单击“取消”按钮时，用户将收到一条消息以确认表单是否应该关闭。单击确定 = 关闭，但是当单击取消时，表单不应该关闭，但这就是正在发生的事情，我已经测试为表单添加一些事件代码，但仍然关闭。我该怎么做才能让它正常工作？

```
 // Button - Cancel
    private void btnCancel_Click(object sender, EventArgs e)
    {
        // Message box to confirm or not
        if (MessageBox.Show("Do you really want to cancel and discard all data?",
"Think twice!", MessageBoxButtons.YesNo, MessageBoxIcon.Question) ==     
DialogResult.Yes)  
        {
            // Yes
            //this.Close(); // Closes the contact form
            m_closeForm = false;
        }
        else
        {
            m_closeForm = false;
            // No
            // Do nothing, the user can still use the form
        }
    }

    private void ContactForm_Formclosing(object sender, FormClosingEventArgs e)
    {

        if (m_closeForm)

            e.Cancel = false; // Stänger formuläret. Inget skall hända

        else

            e.Cancel = true; // Stänger inte formuläret

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T08:30:23.633

您可以通过在表单关闭事件中添加带有对话框结果的消息框来尝试以下操作。我相信这是更好的方法：

```
 private void btnCancel_Click(object sender, EventArgs e)
    {
        if (MessageBox.Show("Do you really want to cancel and discard all data?", "Think twice!",
       MessageBoxButtons.OKCancel, MessageBoxIcon.Question) == DialogResult.OK)
        {
            this.Close();
        }
        // Form wont close if anything else is clicked
    }

    private void btnOk_Click(object sender, EventArgs e)
    {
        // PerformAction()
        this.Close();
    } 
```

我想这就是你要找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T00:14:30.313

我想您会发现在表单的 Designer.cs 文件中，您将拥有以下行：

```
this.btnCancel.DialogResult = System.Windows.Forms.DialogResult.Cancel; 
```

删除此行，无论您的客户 MessageBox 的结果如何，您的表单都将不再自动关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T08:33:11.927

要取消关闭，您可以使用`FormClosingEventArgs`属性，即`e.Cancel`to `true`。

`FormClosing`在表单事件中使用此代码。

```
if (MessageBox.Show("Do you really want to cancel and discard all data?",
"Think twice!", MessageBoxButtons.YesNo, MessageBoxIcon.Question) ==     
DialogResult.Yes)
{
    e.Cancel = false;
}
else
{
    e.Cancel = true;
} 
```

# ruby - 从Ruby中的一个长字符串中提取字符串

> ID：10570224
> 
> 赞同：0
> 
> 时间：2012-05-13T08:09:15.790
> 
> 标签：ruby

我有这个非常长的字符串，我想以列表形式从中提取特定的字符串。

字符串：

```
[#<User id: 1, login: "test", hash ... ] 
```

我想提取出现在两者之间的所有内容，`login: "`因此`",`在这种情况下，它将是单词`test`. 这个字符串可以无限长，但模式是一样的。我怎样才能以列表形式提取单词？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T08:16:11.027

```
string.scan(/login: "(.*?)",/) 
```

# ssis - 两个源的 DefaultBufferMaxRows 是什么？

> ID：10570233
> 
> 赞同：0
> 
> 时间：2012-05-13T08:10:34.010
> 
> 标签：ssis

我有 2 个关于 ssis 缓冲区的问题。1）在我的 ssis 包中，我使用 1 个数据流任务包含 2 个 oledb 源，2 个 oledb 目标。两者都是独立的。所有设置都保持默认，我们知道 DefaultBufferMaxRows 是 10000 行。所以，如果我运行这个包，是否每个缓冲区的记录数是每个 10000 还是每个 5000？

2）我尝试使用 ssis 日志记录（xml 和数据库），但我不知道，它没有显示任何东西。它正在创建 xml 文件，但没有有用的信息（除了一些 xml 标签）。也是不创建任何表。记录事件窗口也没有显示任何东西。你能帮我吗...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T14:15:00.257

解决第二个问题，因为我需要对第一个问题进行研究。

我发现登录到 SQL Server 是我的首选目的地。其他选项（文件、事件查看器、跟踪文件等）都很好，但要筛选这些数据，查询是我的工具。

你说它没有显示任何有用的东西，你期望它显示什么以及你选择了什么？

我一般选择以下事件：OnInformation、OnError、OnWarning、OnPreExecute、OnPostExecute。前三个提供了关于我的包有什么问题、可能有问题或可以改进的信息。最后两个我用来确定各种任务的持续时间。

仅在顶层检查它们。我有一位同事在包级别检查了上述事件，但在每个子任务中他们检查了一个事件。他们曾预计它将继承在根目录建立的日志记录并添加在该级别选择的单个事件。反之亦然：只记录最里面的检查项目。

一切都在哪里记录？2005 年，它将在`dbo.sysdtslog90`. 对于 2008 年以后的版本，它可以在`dbo.sysssislog`该表的主副本存在于 msdb 中找到，但是如果您将 OLEDB 连接指向不同的目录（SALES、Adventureworks 等），第一次调用包将导致该表被复制下来进入目标目录。

# com+ - Windows COM 对象的列表？

> ID：10570238
> 
> 赞同：3
> 
> 时间：2012-05-13T08:11:28.223
> 
> 标签：com+, wsh, jscript

嗨，我只想做一些 Windows 脚本宿主脚本，而且我知道可以通过使用 WScript.createObject() 方法与这个名为“COM”的东西进行交互。我不知道哪些对象可用于使用此方法进行实例化。我的 google-fu 只向我展示了可用于实例化和与 COM 对象通信的一千零一种复杂方法。有一个带有 powershell 脚本的堆栈溢出答案，该脚本应该列出 /currently available/ com 对象。我感兴趣的是一个对象列表，可以合理地预期在大多数安装了某些版本的 Windows 的机器上默认可用。这似乎是一项艰巨的任务。特别是我感兴趣的是任何 /default/ 可用的 COM 对象，它们可用于图像调整大小和裁剪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:05:32.557

您最好的选择可能是使用该 powershell 脚本（或[Microsoft 的 OLE View](http://www.microsoft.com/en-us/download/details.aspx?id=7007)）来查看全新安装 Windows 后机器上安装的内容。

不幸的是，没有“标准清单”。它甚至会根据您安装的 Windows 版本而变化。最全面的答案是安装一组 Windows 操作系统（XP、Vista、7，也许是 8 个）并找到列表的交集。

唉，这对于一个基本的调查程序来说是很多工作。如果您正试图找出某个特定组件或任务，您可能会就此提出一个新问题。或者，您可以简单地在 Windows 的一些全新安装上进行尝试。

# android - AsyncTask - 执行后，如何更新视图？

> ID：10570243
> 
> 赞同：10
> 
> 时间：2012-05-13T08:12:47.030
> 
> 标签：android, android-asynctask

在 Activity 的 onCreate() 事件中，我启动了 AsyncTask 以从数据库中检索产品数据。成功完成后，如何更新显示？

元代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.venueviewbasic);
            (..)
    new GetProductDetails().execute();

class GetProductDetails extends AsyncTask<String, String, String> {

    protected String doInBackground(String... params) {

        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                // Check for success tag
                int success;
                try {
                    // Building Parameters
                    List<NameValuePair> params = new ArrayList<NameValuePair>();
                    params.add(new BasicNameValuePair("id", vid));
        (.. retrieve and parse data and set new textview contents ..) 
```

但是，textviews 等不会更新。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-13T08:44:10.863

如果您想在完成过程后从异步更新视图，那么您可以使用

```
protected void onPostExecute(String result)
    {
        textView.setText(result);
    } 
```

但是，如果您想在运行后台进程时更新数据，请使用。例如...

```
protected Long doInBackground(URL... urls) {
         int count = urls.length;
         long totalSize = 0;
         for (int i = 0; i < count; i++) {
             totalSize += Downloader.downloadFile(urls[i]);
             publishProgress((int) ((i / (float) count) * 100));<------
         }
         return totalSize;
     }

     protected void onProgressUpdate(Integer... progress) {  <-------
         setProgressPercent(progress[0]);
     } 
```

有关更多详细信息，请参阅[此链接](http://developer.android.com/reference/android/os/AsyncTask.html) 希望这对您有所帮助...！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-07-01T17:18:29.210

我猜这个问题更多是关于如果 asyncTask 在单独的文件中，如何获取 UI 视图。

在这种情况下，您必须将上下文传递给异步任务并使用它来获取视图。

```
class MyAsyncTask extends AsyncTask<URL, Integer, Long> {

    Activity mActivity;

    public MyAsyncTask(Activity activity) {
       mActivity = ativity;
    } 
```

然后在你的 onPostExecute 使用

```
int id = mActivity.findViewById(...); 
```

请记住，您不能从“doInBackground”更新视图，因为它不是 UI 线程。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-13T08:20:15.820

在您的`AsyncTask`课程中，添加一个`onPostExecute`方法。此方法在 UI 线程上执行并且可以更新任何 UI 组件。

```
`class GetProductDetails extends AsyncTask<...> 
{
    ...
    private TextView textView;
    ...
    protected void onPostExecute(String result)
    {
        textView.setText(result);
    }
}` 
```

`（`result`参数是从`doInBackground`你的类的方法返回的值。）`

# node.js - Node.js 中的非阻塞或异步 I/O 是什么？

> ID：10570246
> 
> 赞同：152
> 
> 时间：2012-05-13T08:13:11.730
> 
> 标签：node.js, asynchronous, nonblocking, serverside-javascript

在服务器端 Javascript 引擎的上下文中，什么是非阻塞 I/O 或异步 I/O？我认为这被提及为优于 Java 服务器端实现的优势。

* * *

## 回答 #1

> 赞同：348
> 
> 时间：2012-05-13T08:14:58.250

# 同步与异步

同步执行通常是指代码按顺序执行。异步执行是指不按照它在代码中出现的顺序执行。在以下示例中，同步操作会导致警报按顺序触发。在异步操作中，虽然`alert(2)`似乎是第二个执行，但它没有。

**同步：1,2,3**

```
alert(1);
alert(2);
alert(3);
```

**异步：1,3,2**

```
alert(1);
setTimeout(() => alert(2), 0);
alert(3);
```

# 阻塞与非阻塞

阻塞是指阻塞进一步执行直到该操作完成的操作。非阻塞是指不阻塞执行的代码。在给定的示例中，`localStorage`是一个阻塞操作，因为它暂停执行以读取。另一方面，`fetch`它是非阻塞操作，因为它不会停止`alert(3)`执行。

```
// Blocking: 1,... 2
alert(1);
var value = localStorage.getItem('foo');
alert(2);

// Non-blocking: 1, 3,... 2
alert(1);
fetch('example.com').then(() => alert(2));
alert(3); 
```

# 好处

非阻塞、异步操作的一个优点是您可以最大限度地利用单个 CPU 以及内存。

## 同步阻塞示例

同步阻塞操作的一个示例是一些 Web 服务器（如 Java 或 PHP 中的 Web 服务器）如​​何处理 IO 或网络请求。如果您的代码从文件或数据库中读取，则您的代码会“阻止”执行后的所有内容。在此期间，您的机器正在为一个*不做任何事情*的线程保留内存和处理时间。

为了在该线程停止时满足其他请求取决于您的软件。大多数服务器软件所做的是产生更多线程来满足额外的请求。这需要更多的内存消耗和更多的处理。

## 异步、非阻塞示例

异步的、非阻塞的服务器——就像 Node 中的服务器——只使用一个线程来服务所有请求。这意味着 Node 实例充分利用了单个线程。创作者设计它的前提是 I/O 和网络操作是瓶颈。

当请求到达服务器时，它们一次得到一个服务。但是，当服务的代码需要查询数据库时，它会将回调发送到第二个队列*，主线程将继续运行*（它不会等待）。现在，当数据库操作完成并返回时，相应的回调从第二个队列中拉出并排在第三个队列中，它们正在等待执行。当引擎有机会执行其他操作时（例如当执行堆栈被清空时），它会从第三个队列中获取一个回调并执行它。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-08-31T16:14:52.907

```
var startTime = new Date().getTime();
var getEndTime = () => {
    var tempEndTime = new Date().getTime();
    var second = (tempEndTime - startTime)/1000
    return `took ${second} sec...to finish\n`
}

console.log('1: start App', getEndTime())
setTimeout(()=>{
    console.log('2: setTimeout', getEndTime())
}, 1000)
console.log('3: End App', getEndTime())

// console -> Process Order:  1 -> 3 -> 2 
```

[![代码示例](../Images/0dee7a145003342ba2cfb92666ab09e3.png)](https://i.stack.imgur.com/CkUzL.png)

# ios - UITableView 的淡入淡出边缘

> ID：10570247
> 
> 赞同：7
> 
> 时间：2012-05-13T08:13:12.583
> 
> 标签：ios, uitableview, uiscrollview, fade

我对我的问题进行了一些研究，不幸的是我的问题没有解决方案。最接近的是[Fade UIImageView，因为它接近 UIScrollView 的边缘，](https://stackoverflow.com/questions/10286205/fade-uiimageview-as-it-approaches-the-edges-of-a-uiscrollview)但它仍然不适合我。

我希望我的桌子在顶部应用“隐形渐变”。如果单元格距离上边缘 50 像素，它就会开始消失。越靠近上边缘，零件越不可见。单元格高度约为 200 像素，因此单元格的下部需要 100% 可见。但没关系 - 我需要一个表格视图（或表格视图容器）来执行此任务，因为类似的表格可以显示其他单元格。

如果表格是纯色视图的子视图，我可以通过添加一个水平渐变的图像来实现这一点，我可以延伸到任何宽度。该图像的顶部像素以背景的确切颜色开始，向下相同颜色具有较少的 alpha。

但是......我们有一个**透明颜色**的 UITableView 。表格下方没有纯色，而是图案图像/纹理，在应用程序的其他屏幕上也可能不同。

你有什么想法我可以实现这种行为吗？

问候

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-01-21T15:22:43.167

我学习了[本](http://www.cocoanetics.com/2011/08/adding-fading-gradients-to-uitableview/)教程并进行了一些更改和添加：

*   它现在适用于所有表格视图 - 即使它们是更大屏幕的一部分。
*   无论背景或表格视图后面的内容如何，​​它都可以工作。
*   掩码的变化取决于表格视图的位置 - 当滚动到顶部时只有底部褪色，当滚动到底部时只有顶部褪色......

**1.**首先在控制器中导入`QuartzCore` ~~和设置蒙版层~~：

**编辑：**不需要`CAGradientLayer`在课堂上参考。

```
#import <UIKit/UIKit.h>
#import <QuartzCore/QuartzCore.h>

@interface mViewController : UIViewController
.
.
@end 
```

**2.**将此添加到：（ **请*****参阅@Darren对此的评论*****）**~~`viewWillAppear`~~ `viewDidLayoutSubviews`

 *```
- (void)viewDidLayoutSubviews
{
    [super viewDidLayoutSubviews];

    if (!self.tableView.layer.mask)
    {
        CAGradientLayer *maskLayer = [CAGradientLayer layer];

        maskLayer.locations = @[[NSNumber numberWithFloat:0.0], 
                                [NSNumber numberWithFloat:0.2], 
                                [NSNumber numberWithFloat:0.8], 
                                [NSNumber numberWithFloat:1.0]];

        maskLayer.bounds = CGRectMake(0, 0,
                            self.tableView.frame.size.width,
                            self.tableView.frame.size.height);
        maskLayer.anchorPoint = CGPointZero;

       self.tableView.layer.mask = maskLayer;
    }
    [self scrollViewDidScroll:self.tableView];
} 
```

**3.**`UIScrollViewDelegate`通过将其添加到`.h`您的控制器中，确保您是代表：

```
@interface mViewController : UIViewController <UIScrollViewDelegate> 
```

**4.**最后，`scrollViewDidScroll`在您的控制器中实现`.m`：

```
#pragma mark - Scroll View Delegate Methods

- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    CGColorRef outerColor = [UIColor colorWithWhite:1.0 alpha:0.0].CGColor;
    CGColorRef innerColor = [UIColor colorWithWhite:1.0 alpha:1.0].CGColor;
    NSArray *colors;

    if (scrollView.contentOffset.y + scrollView.contentInset.top <= 0) {
        //Top of scrollView
        colors = @[(__bridge id)innerColor, (__bridge id)innerColor,
                   (__bridge id)innerColor, (__bridge id)outerColor];
    } else if (scrollView.contentOffset.y + scrollView.frame.size.height
               >= scrollView.contentSize.height) {
        //Bottom of tableView
        colors = @[(__bridge id)outerColor, (__bridge id)innerColor,
                   (__bridge id)innerColor, (__bridge id)innerColor];
    } else {
        //Middle
        colors = @[(__bridge id)outerColor, (__bridge id)innerColor,
                   (__bridge id)innerColor, (__bridge id)outerColor];
    }
    ((CAGradientLayer *)scrollView.layer.mask).colors = colors;

    [CATransaction begin];
    [CATransaction setDisableActions:YES];
    scrollView.layer.mask.position = CGPointMake(0, scrollView.contentOffset.y);
    [CATransaction commit];
} 
```

*再说一遍：大部分解决方案来自[**本**](http://www.cocoanetics.com/2011/08/adding-fading-gradients-to-uitableview/)教程的 cocoanetics。*

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-07-14T15:07:17.377

这是 Aviel Gross 对 Swift 的回答的翻译

```
import UIKit

class mViewController: UIViewController, UIScrollViewDelegate {

    //Emitted boilerplate code

    override func viewDidLayoutSubviews() {
        super.viewDidLayoutSubviews()

        if self.tableView.layer.mask == nil {

            //If you are using auto layout
            //self.view.layoutIfNeeded()

            let maskLayer: CAGradientLayer = CAGradientLayer()

            maskLayer.locations = [0.0, 0.2, 0.8, 1.0]
            let width = self.tableView.frame.size.width
            let height = self.tableView.frame.size.height
            maskLayer.bounds = CGRect(x: 0.0, y: 0.0, width: width, height: height)
            maskLayer.anchorPoint = CGPoint.zero

            self.tableView.layer.mask = maskLayer
        }

        scrollViewDidScroll(self.tableView)
    }

    func scrollViewDidScroll(_ scrollView: UIScrollView) {

        let outerColor = UIColor(white: 1.0, alpha: 0.0).cgColor
        let innerColor = UIColor(white: 1.0, alpha: 1.0).cgColor

        var colors = [CGColor]()

        if scrollView.contentOffset.y + scrollView.contentInset.top <= 0 {
            colors = [innerColor, innerColor, innerColor, outerColor]
        } else if scrollView.contentOffset.y + scrollView.frame.size.height >= scrollView.contentSize.height {
            colors = [outerColor, innerColor, innerColor, innerColor]
        } else {
            colors = [outerColor, innerColor, innerColor, outerColor]
        }

        if let mask = scrollView.layer.mask as? CAGradientLayer {
            mask.colors = colors

            CATransaction.begin()
            CATransaction.setDisableActions(true)
            mask.position = CGPoint(x: 0.0, y: scrollView.contentOffset.y)
            CATransaction.commit()
        }

    }

    //Emitted boilerplate code
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-12-28T19:05:23.737

@victorfigol 出色解决方案的 Swift 版本：

```
class FadingTableView : UITableView {
  var percent = Float(0.05)

  private let outerColor = UIColor(white: 1.0, alpha: 0.0).cgColor
  private let innerColor = UIColor(white: 1.0, alpha: 1.0).cgColor

  override func awakeFromNib() {
    super.awakeFromNib()
    addObserver(self, forKeyPath: "bounds", options: NSKeyValueObservingOptions(rawValue: 0), context: nil)
  }

  override func observeValue(forKeyPath keyPath: String?, of object: Any?, change: [NSKeyValueChangeKey : Any]?, context: UnsafeMutableRawPointer?) {
    if object is FadingTableView && keyPath == "bounds" {
        initMask()
    }
  }

  deinit {
    removeObserver(self, forKeyPath:"bounds")
  }

  override func layoutSubviews() {
    super.layoutSubviews()
    updateMask()
  }

  func initMask() {
    let maskLayer = CAGradientLayer()
    maskLayer.locations = [0.0, NSNumber(value: percent), NSNumber(value:1 - percent), 1.0]
    maskLayer.bounds = CGRect(x:0, y:0, width:frame.size.width, height:frame.size.height)
    maskLayer.anchorPoint = CGPoint.zero
    self.layer.mask = maskLayer

    updateMask()
  }

  func updateMask() {
    let scrollView : UIScrollView = self

    var colors = [CGColor]()

    if scrollView.contentOffset.y <= -scrollView.contentInset.top { // top
        colors = [innerColor, innerColor, innerColor, outerColor]
    }
    else if (scrollView.contentOffset.y + scrollView.frame.size.height) >= scrollView.contentSize.height { // bottom
        colors = [outerColor, innerColor, innerColor, innerColor]
    }
    else {
        colors = [outerColor, innerColor, innerColor, outerColor]
    }

    if let mask = scrollView.layer.mask as? CAGradientLayer {
        mask.colors = colors

        CATransaction.begin()
        CATransaction.setDisableActions(true)
        mask.position = CGPoint(x: 0.0, y: scrollView.contentOffset.y)
        CATransaction.commit()
     }
  }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-10-05T00:01:09.110

这是我通过继承 UITableView 的淡化表格视图版本。针对 iOS 7 和 8 进行了测试。

1.  不需要实现scrollViewDidScroll，可以用layoutSubviews代替。
2.  通过观察边界变化，当旋转变化时，掩码总是被正确放置。
3.  你可以使用百分比参数来改变你想要的边缘褪色程度，我发现在某些情况下，一个小值看起来更好。

**CEFadingTableView.m**

```
#import "CEFadingTableView.h"

@interface CEFadingTableView()

@property (nonatomic) float percent; // 1 - 100%

@end

@implementation CEFadingTableView

- (void)awakeFromNib
{
    [super awakeFromNib];

    self.percent = 5.0f;

    [self addObserver:self forKeyPath:@"bounds" options:0 context:nil];
}

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    if(object == self && [keyPath isEqualToString:@"bounds"])
    {
        [self initMask];
    }
}

- (void)dealloc
{
    [self removeObserver:self forKeyPath:@"bounds"];
}

- (void)layoutSubviews
{
    [super layoutSubviews];

    [self updateMask];
}

- (void)initMask
{
    CAGradientLayer *maskLayer = [CAGradientLayer layer];

    maskLayer.locations = @[@(0.0f), @(_percent / 100), @(1 - _percent / 100), @(1.0f)];

    maskLayer.bounds = CGRectMake(0, 0, self.frame.size.width, self.frame.size.height);

    maskLayer.anchorPoint = CGPointZero;

    self.layer.mask = maskLayer;

    [self updateMask];
}

- (void)updateMask
{
    UIScrollView *scrollView = self;

    CGColorRef outer = [UIColor colorWithWhite:1.0 alpha:0.0].CGColor;
    CGColorRef inner = [UIColor colorWithWhite:1.0 alpha:1.0].CGColor;

    NSArray *colors = @[(__bridge id)outer, (__bridge id)inner, (__bridge id)inner, (__bridge id)outer];

    if(scrollView.contentOffset.y <= 0) // top
    {
        colors = @[(__bridge id)inner, (__bridge id)inner, (__bridge id)inner, (__bridge id)outer];
    }
    else if((scrollView.contentOffset.y + scrollView.frame.size.height) >= scrollView.contentSize.height) // bottom
    {
        colors = @[(__bridge id)outer, (__bridge id)inner, (__bridge id)inner, (__bridge id)inner];
    }

    ((CAGradientLayer *)scrollView.layer.mask).colors = colors;

    [CATransaction begin];
    [CATransaction setDisableActions:YES];
    scrollView.layer.mask.position = CGPointMake(0, scrollView.contentOffset.y);
    [CATransaction commit];
}

@end 
```*

# php - 从mysql反序列化数据

> ID：10570248
> 
> 赞同：3
> 
> 时间：2012-05-13T08:13:18.107
> 
> 标签：php, mysql

在我的 mysql 单元中，这是使用序列化函数存储的

```
a:1:{i:0;s:275:"a:4:{s:8:"khghg_id";s:10:"foo1187";s:3:"uri";s:21:"foo/vtory/1187";s:4:"name";s:5:"nmart";s:5:"tuhlmb";a:3:{i:0;s:40:"knuujhs/201205/13_03_pceb9.jpg";i:1;s:40:"knuujhs/201205/13_03_0wlih.jpg";i:2;s:40:"knuujhs/201205/13_03_tq5wf.jpg";}}";} 
```

我正在尝试反序列化

我正在使用此代码

```
$cell =$row9['attachment'];
$list = unserialize($cell);
$info = unserialize($list[0]);
var_dump($info); 
```

当我尝试这个时，我收到错误 bool(false) 错误所以我尝试使用 parse_str 和 parse_str 我没有收到任何错误

```
 parse_str($cell,$list ); 
```

但我没有在我的数据库中获得输出我将输出存储在数据库中并且我将查询提交到数据库。除了这个反序列化值之外，所有东西都被存储了。在这里你可以注意到有

khghg_id 是 foo1187 uri 这是 foo/vtory/1187 名称是 nmart
我想将这些详细信息存储在我的数据库中，所以我正在使用

```
'.$info['khghg_id'].'   for sending the data to mysql but mysql stores everything  other than  all unsterilized  values 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T08:26:58.343

您从数据库中检索序列化文本。

您取消序列化它..更改它，然后当您将其保存回数据库时，您需要将其序列化回来

```
//retrieve serialized data from database
$arr = unserialize($row['properties']);

//get the desired value
$khghg_id = $arr['khghg_id'];

//now insert $khghg_id in database 
```

从您上面发布的代码中..我看到您正在反序列化 2 次..您真的不需要这样做

```
$cell =$row9['attachment'];
$list = unserialize($cell);
$info = $list[0]; //this line should make the difference
var_dump($info); 
```

# c# - 如何实现对表单对象的搜索？

> ID：10570252
> 
> 赞同：-1
> 
> 时间：2012-05-13T08:13:51.787
> 
> 标签：c#, c++, windows, search, listbox

我使用 c# 和 c++ builder，并且有很多菜单、按钮、复选框以及许多表单的大型应用程序。当尝试使用这些对象的功能之一时，我通过单击按钮、单击菜单并选择一些子菜单选项等来使用标准用户方法...

但是现在我想用更快的方法来使用对象的功能，想创建对象的搜索。这意味着如果我输入某个按钮的名称并按下回车，这些事件将与我单击同一个按钮时相同。我不想再点击按钮和菜单了，因为我花了太多时间才能找到它。

所以我创建了出现在快捷方式上的新表单，并且在列表框内有将用于搜索所有对象，但我不知道**在该列表框内放置什么代码显示所有对象名称？**

**如何将列表框与项目内的所有对象连接起来？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T08:26:07.223

在 C# 中，每个 Control 都有 Controls 属性，该属性返回子控件的集合。您可以遍历表单的所有“子项”并将其名称添加到列表框中。在相反的方向，当你有一个控件名称时，你可以使用[Controls.Find()](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controls.aspx)方法找到它。

对于 CBuilder 案例，请参考以下线程： [BCB : how to iterate over controls on a form？](https://stackoverflow.com/questions/2391325/bcb-how-to-iterate-over-controls-on-a-form)

# android - 编译 B2G 时生成错误（make gonk）

> ID：10570257
> 
> 赞同：1
> 
> 时间：2012-05-13T08:14:23.867
> 
> 标签：android, linux, gnu-toolchain

我正在为 Nexus S 开发 Boot2Gecko。我昨天开始根据[Boot2Gecko](https://developer.mozilla.org/en/Mozilla/Boot_to_Gecko/Building_Boot_to_Gecko)的说明编译代码。一切都很好，但它没有在一个阶段编译，我收到以下错误：

[http://pastebin.com/tPqqwdaF](http://pastebin.com/tPqqwdaF)。我认为这里有同样的错误[https://github.com/andreasgal/B2G/issues/291](https://github.com/andreasgal/B2G/issues/291)

有人可以让我知道如何解决构建错误。任何帮助将不胜感激！

# ruby-on-rails - 带有 privatepub gem 的基本私人聊天系统

> ID：10570263
> 
> 赞同：0
> 
> 时间：2012-05-13T08:16:19.050
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, faye

我已经尝试了一个多月来弄清楚如何在我的网站上设置与用户的私人对话，而不仅仅是我知道如何使用 faye 或 privatepub gem 进行的群组对话。所以我的问题是如何创建一个频道，让两个用户随时可以互相交谈，就像私人对话一样，只有这两个用户可以互相广播，然后任何时候我想与另一个用户交谈，我使用单独的频道该用户就像实时完成的普通 Facebook 聊天，但这次我想使用私人酒吧 gem。只需要一点指导来实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:34:34.207

[你在这里](http://net.tutsplus.com/tutorials/ruby/how-to-use-faye-as-a-real-time-push-server-in-rails/)有一个很好的教程。

我已经做到了，这很简单=）

本教程实现了类似 tweeter 的私人对话（例如：@user 这是给用户的私人消息）。

如果您想要像 facebook 这样的对话，您必须更改代码（只需一点点）以获得私人频道（订阅私人频道）：

```
<%= subscribe_to "/messages/private/#{session[:username]}" %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-15T07:14:37.327

我使用 private_pub gem 制作了一个基本的聊天应用程序，您可以查看它... amitejprivate-pub.herokuapp.com

您还可以在以下位置查看 github 存储库：

[https://github.com/amitej1/private_pub](https://github.com/amitej1/private_pub)

如果你想在 heroku 上设置你的应用程序，你需要一个单独的应用程序用于 faye 服务器，可以按照以下方式完成：

[https://github.com/amitej1/chatting-server](https://github.com/amitej1/chatting-server)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T08:24:59.237

你检查过[http://railscasts.com/episodes/260-messaging-with-faye](http://railscasts.com/episodes/260-messaging-with-faye)吗？

# ruby-on-rails - 使用 minitest/capybara 设置一次登录以运行 rails 测试

> ID：10570268
> 
> 赞同：2
> 
> 时间：2012-05-13T08:17:48.670
> 
> 标签：ruby-on-rails, session, integration-testing, capybara, minitest

我正在使用`capybara`with `minitest`on **Rails 2.3.14**。与大多数应用程序一样，此应用程序也需要登录才能在站点内执行任何操作。我希望每个测试套件能够登录一次，并在所有运行的测试中使用该会话。我如何将其重构为`minitest_helper`? 现在我的助手看起来像这样：

```
#!/usr/bin/env ruby

ENV['RAILS_ENV'] = 'test'
require File.expand_path(File.dirname(__FILE__) + "/../config/environment")

gem 'minitest'
gem 'capybara_minitest_spec'

require 'minitest/unit'
require 'minitest/spec'
require 'minitest/mock'
require 'minitest/autorun'
require 'capybara/rails'
require 'factory_girl'

FactoryGirl.find_definitions

class MiniTest::Spec

  include FactoryGirl::Syntax::Methods
  include Capybara::DSL
  include ActionController::URLWriter

  before(:each) do
    # .. misc global setup stuff, db cleanup, etc.
  end

  after(:each) do
    # .. more misc stuff
  end

end 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:00:28.093

这是集成测试中的多个会话和自定义 DSL 的示例

```
require 'test_helper'

class UserFlowsTest < ActionDispatch::IntegrationTest
  fixtures :users

  test "login and browse site" do

    # User avs logs in
    avs = login(:avs)
    # User guest logs in
    guest = login(:guest)

    # Both are now available in different sessions
    assert_equal 'Welcome avs!', avs.flash[:notice]
    assert_equal 'Welcome guest!', guest.flash[:notice]

    # User avs can browse site
    avs.browses_site
    # User guest can browse site as well
    guest.browses_site

    # Continue with other assertions
  end

  private

  module CustomDsl
    def browses_site
      get "/products/all"
      assert_response :success
      assert assigns(:products)
    end
  end

  def login(user)
    open_session do |sess|
      sess.extend(CustomDsl)
      u = users(user)
      sess.https!
      sess.post "/login", :username => u.username, :password => u.password
      assert_equal '/welcome', path
      sess.https!(false)
    end
  end
end 
```

来源： http: [//guides.rubyonrails.org/testing.html#helpers-available-for-integration-tests](http://guides.rubyonrails.org/testing.html#helpers-available-for-integration-tests)

# swing - Jbutton、JPanel、JFrame 和 IllegalArgumentException：将窗口添加到容器

> ID：10570269
> 
> 赞同：1
> 
> 时间：2012-05-13T08:18:00.210
> 
> 标签：swing, jframe, awt, jpanel, jbutton

我有一个 JFrame 和多个 JPanel，它们都是从公共类 ProcessedFinal 扩展 JFrame 调用的，在这里，我有我的所有动作侦听器，包括 IAgreeJB。当我单击 iagreeJB 时，PlayGameJP 应该设置为可见。它起作用了，当我调用退出 JPanel (ExitJP) 时，现在当我调用新的 JPanel (PlayGameJP) 时，我收到此错误：

线程“AWT-EventQueue-0”java.lang.IllegalArgumentException 中的异常：向容器添加窗口

这对我来说毫无意义，因为我只是用一个 JPanel 代替另一个，这可能是什么原因？

```
 if ( e.getSource() == ComputeRegistrationJP.IAgreeJB )
           {    

remove(ComputeRegistrationJP);
setVisible( false );

add( ExitJP );
setVisible(true);

  // add( PlayGameJP );
  // setVisible( true );

 } 
```

没关系的朋友，我在 PlayGameJP 中扩展了 JFrame 而不是 JPanel，仅此而已。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T09:01:56.483

我有一些问题要问你！:)

> *...我有我所有的动作监听器，包括 IAgreeJB...*

这与问题有关吗？

> *...现在当我调用新的 JPanel (PlayGameJP) 时，我收到此错误：...*

据我所知，没有像[JPanel](http://docs.oracle.com/javase/7/docs/api/javax/swing/JPanel.html)这样的构造函数`JPanel (javax.swing.JPanel)`，假设`PlayGameJP`是 JPanel。所以在这种情况下，你必须得到的错误是：

`no suitable constructor found for JPanel(javax.swing.JPanel)`

* * *

说了这么多，你贴的代码和你写的问题有什么关系？

* * *

为了获得更好的帮助，我建议您改写问题并发布您最佳尝试的[SSCCE](http://sscce.org)。或相关代码。

* * *

对于您发布的错误消息，

> *...java.lang.IllegalArgumentException：向容器添加窗口...*

当您尝试将顶级容器添加到另一个容器时，我已经看到了这一点，例如将 a 添加`JDialog`到`JFrame`

# c - gengetopt：多个参数用空格分隔，而不是逗号

> ID：10570270
> 
> 赞同：1
> 
> 时间：2012-05-13T08:18:05.413
> 
> 标签：c, parsing

将选项指定为

```
option "foo" f "" string optional multiple(1-) 
```

`foo_args`gengetopt在调用时正确构建数组：

```
./a.out -f A -f B -f C        # {"A", "B", "C"}
./a.out -f A,B,C              # {"A", "B", "C"} 
```

但这仅抓取第一个“A”，并认为“B”和“C”未命名

```
./a.out -f A B C              # {"A"} 
```

我没有使用`--unnamed-opts`，因为我没有任何未命名的参数。我想支持这种风格，因为它似乎更常见……是吗？~~容易地~~可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T12:36:57.273

您可以尝试在空格分隔的列表项周围加上引号，如下所示：`-f "A B C"`并进行额外的解析。

# c++ - MPI，通过其中一个进程产生一个孩子

> ID：10570273
> 
> 赞同：1
> 
> 时间：2012-05-13T08:18:24.927
> 
> 标签：c++, mpi

我正在使用 Open MPI 进行并行编程领域的第一步。我想要实现的是用两个进程启动一个应用程序（这可以通过 mpirun -n 2 ... 来实现）并使第一个进程从这两个进程中产生另一个自身的实例。这是c ++中的草图：

```
// mpi_spawn_cpp2.cc
#include "mpi.h"
#include <iostream>

using namespace std;

int main( int argc, char *argv[] )
{
    int rank, size;
    int errcode;
    MPI::Intercomm intercomm;

    MPI::Init( argc, argv );

    rank = MPI::COMM_WORLD.Get_rank();
    size = MPI::COMM_WORLD.Get_size();
    cout << "world size: " << size << endl;

    if (rank == 0) {
        intercomm = MPI::COMM_WORLD.Spawn("./mpi_spawn_cpp2", MPI::ARGV_NULL, 1, MPI::INFO_NULL, 0, &errcode);
        cout << "intercomm size: " << intercomm.Get_size() << endl;
    }

    MPI::Finalize();
    return 0;
} 
```

尽管它编译完美，但上述代码的问题在于它似乎没有从 Spawn 函数返回，这意味着该进程实际上并未产生。上面的代码有什么问题，应该纠正什么才能让它工作？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T08:48:54.973

`MPI_Comm_spawn`在内部通信器上是集体的，但您仅从 0 级调用它，这就是它挂起的原因。试试这个：

```
intercomm = MPI::COMM_WORLD.Spawn("./mpi_spawn_cpp2", MPI::ARGV_NULL, 1, MPI::INFO_NULL, 0, &errcode);
if (rank == 0) {
    cout << "intercomm size: " << intercomm.Get_size() << endl;
} 
```

一句忠告。由于这是您在 MPI 中的第一步，我建议您改为学习 C 绑定。C++ 绑定在当前 MPI 标准版本 2.2 中已弃用，并且将从即将发布的版本 3.0 中完全删除。

# ios - 具有背景音频会话的 iphone / ios 应用程序阻止用户接听来电

> ID：10570275
> 
> 赞同：0
> 
> 时间：2012-05-13T08:18:33.430
> 
> 标签：ios, audio, background, call, avplayer

我有一个在后台播放音频的 iPhone 应用程序（5.1 SDK）。很多时候有来电时会显示来电，但用户无法滑动滑块接听来电，从而导致未接来电。

我正在使用 - (void)beginInterruption 在来电到达时暂停所有音频，但似乎并没有阻止此问题的发生。

有没有人遇到过这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T19:41:05.370

如果您想将此标记为答案，因为这确实是您的问题，我将重新发表我的评论。

你的 beginInterruption 代码被调用了吗？如果是这样，音乐真的停止了吗？您是通过网络还是本地文件流式传输音频？你用的是什么播放器？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T12:30:16.820

```
- (void) beginInterruption {

    if (playing) {

        playing = NO;

        interruptedWhilePlaying = YES;

        [self updateUserInterface];

    }

}

NSError *activationError = nil;

- (void) endInterruption {

    if (interruptedWhilePlaying) {

        BOOL success = [[AVAudioSession sharedInstance] setActive: YES error: &activationError];

        if (!success) { /* handle the error in activationError */ }

        [player play];

        playing = YES;

        interruptedWhilePlaying = NO;

        [self updateUserInterface];

    }

} 
```

# jquery - 在 jquery 中查找活动元素

> ID：10570276
> 
> 赞同：2
> 
> 时间：2012-05-13T08:18:36.367
> 
> 标签：jquery

当我需要查找活动或当前可见横幅的 li id 时，我正在使用横​​幅旋转器这个[幻灯片框。](http://manos.malihu.gr/slidebox-jquery-banner-rotator)

`$(this).attr('class');`

相似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T08:22:51.617

您可以从以下位置获取当前索引：

```
<div class="slideboxThumbs">
  <a href="#" class="slideboxThumb" rel="1"></a>
  <a href="#" class="slideboxThumb selectedSlideboxThumb" rel="2"></a>
  <a href="#" class="slideboxThumb" rel="3"></a>
</div> 
```

在此示例中，我们可以看到当前正在显示第二张图像。

```
$(".selectedSlideboxThumb").index(".slideboxThumbs a"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T08:31:16.687

只有一种方法是获取被点击的幻灯片的位置。在[普通演示](http://manos.malihu.gr/tuts/slidebox/simple_slidebox/plain_demo.html)中，所有幻灯片的宽度均为 600 像素。主标签 — 具有以下属性：

> 宽度：2400 像素；左：0px；溢出：隐藏；

因此，当您单击幻灯片时，{left} 属性更改为 600 像素。就这样。

# java - Java：如何在 Snake 游戏中使用双缓冲来实现流畅的动画效果？

> ID：10570277
> 
> 赞同：2
> 
> 时间：2012-05-13T08:18:43.313
> 
> 标签：java, animation, double-buffering

我正在写蛇游戏。我被动画困住了，因为我想获得流畅的动画。我不知道如何加倍缓冲图像以获得双缓冲。必须做什么才能使其成为双缓冲？我使用扩展 JFrame 的主框架，在这里我添加了两个 JPanel - 一个用于状态栏，一个用于动画。以下是用于蛇动画的类：

播放器类

```
 package snake;

import java.awt.Graphics;
import java.awt.Image;
import java.awt.event.KeyEvent;
import java.util.ArrayList;

import javax.swing.ImageIcon;

public class Player 
{
private int headSizeX;
private int headSizeY;
private int tailSizeX;
private int tailSizeY;
private int x;
private int y;
private int speed = 5;
private int snakeSize = 40;
private Image[] snake = new Image[5];
private ArrayList<Integer> X,Y;
private static int imageNr = 0;
private int c = 0;

private int tmp;
private boolean death = false;
static int player;
private static boolean inverse = false;
private boolean left = false;
private boolean right = false;
private boolean up = true;
private boolean down = false;
public Player()
{
    initPlayer();
    headSizeX = snake[0].getWidth(null);
    headSizeY = snake[0].getHeight(null)-2;
    tailSizeX = snake[4].getWidth(null);
    tailSizeY = snake[4].getHeight(null);
    System.out.println("tail: "+tailSizeX+" "+tailSizeY);
    x = MainGamePanel.getSizeX()/2;
    y= MainGamePanel.getSizeY()-130;
}

public void initPlayer()
{
    int imgNr = 5;
    X = new ArrayList<Integer>();
    Y = new ArrayList<Integer>();   
    String name = "green";
    switch (player) 
    {
    case 1:
        name = "green"; break;
    case 2:
        name = "red"; break;
    case 3:
        name = "blue"; break;
    }

    for (int nr = 1; nr <= imgNr; nr++)
    {
        snake[nr-1] = new ImageIcon("img/" +name+"/snake" +nr+".png").getImage();
    }

    X.add(MainGamePanel.getSizeX()/2);
    Y.add( MainGamePanel.getSizeY()-200);
    X.add( MainGamePanel.getSizeX()/2);
    Y.add( MainGamePanel.getSizeX()/2+33);
    for (int i = 2; i < snakeSize; i++) {
        X.add( MainGamePanel.getSizeX()/2);
        Y.add( MainGamePanel.getSizeX()/2 + i*20+13);
    }
}

public void paint(Graphics g)
{
    //g.drawImage(snake[imageNr], x,y,headSizeX,headSizeY,null);

    for (int i = 0; i < snakeSize; i++) {
        if (i == 0)
            g.drawImage(snake[imageNr], X.get(i), Y.get(i), null);
        else
            g.drawImage(snake[4], X.get(i), Y.get(i), null);
    }
    /*g.drawImage(snake[4],x, y+headSizeY, tailSizeX, tailSizeY, null);
    for (int i = 1;i<snakeSize;i++)
        g.drawImage(snake[4],x, y+i*tailSizeY+headSizeY, tailSizeX,     tailSizeY, null);*/
}

public void update()
{
    y = MainGamePanel.getSizeY()-headSizeY - 35;
    for (int i = snakeSize-1; i > 0; i--) {
        X.set(i, X.get(i-1));
        Y.set(i, Y.get(i-1));
    }

    if (left) {
        tmp = X.get(0);
        X.set(0, tmp-20);
        imageNr = 3;
    }
    if (right) {
        tmp = X.get(0);
        X.set(0, tmp+20);
        imageNr = 1;
    }
    if (up) {
        tmp = Y.get(0);
        Y.set(0, tmp-20);
        imageNr = 0;
    }
    if (down) {
        tmp = Y.get(0);
        Y.set(0, tmp+20);
        imageNr = 2;
    }
}

public void keyPressed(KeyEvent e)
{
     int key = e.getKeyCode();

        if ((key == KeyEvent.VK_LEFT) && (!right)) {
            left = true;
            up = false;
            down = false;
            System.out.println("LEWO");
        }

        if ((key == KeyEvent.VK_RIGHT) && (!left)) {
            right = true;
            up = false;
            down = false;
            System.out.println("PRAWO");
        }

        if ((key == KeyEvent.VK_UP) && (!down)) {
            up = true;
            right = false;
            left = false;
            System.out.println("GÓRA");
        }

        if ((key == KeyEvent.VK_DOWN) && (!up)) {
            down = true;
            right = false;
            left = false;
            System.out.println("DÓŁ");
        }
}

public void collision()
{
    death = true;
}

public void reset()
{
    imageNr = 0;
    death = false;
}

public void setInverse(boolean set)
{
    inverse = set;
}

public void increaseSpeed(int inc)
{
    speed += inc;
}

public void decreaseSpeed(int dec)
{
    speed -=dec;
}

public int getSnakeSize()
{
    return snakeSize;
}

public void increaseSnakeSize()
{
    snakeSize += 1;
}

public void decreaseSnakeSize(int dec)
{
    snakeSize -= dec;
}
} 
```

MainGamePanel.class

```
package snake;

import java.awt.Graphics;
import java.awt.Image;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.image.BufferedImage;

import javax.swing.ImageIcon;
import javax.swing.JLabel;
import javax.swing.JPanel;

@SuppressWarnings("serial")
public class MainGamePanel extends JPanel implements KeyListener{

private Image bounds;
private Player player;
public static int sizex;
private Image tail;
private Image background;
private int lives;
private int speed;
private int levels;
private int counter = 0;
private int appleCounter = 0;
private static int level = 1;
public static int sizeX = 784;
public static int sizeY = 617;
public static int applesNumber;
private boolean gameover = false;
private boolean gameend = false;
private boolean death = false;
private boolean levelCompleted = false;
private Graphics buffer;
private BufferedImage img;
public MainGamePanel(int[] settings)
{   
    lives = settings[0];
    speed = settings[1];
    levels = settings[2];
    bounds = new ImageIcon("img/bounds.jpg").getImage();
    setFocusable(true);
    addKeyListener(this);
    //new Apple();
}

public void init()
  {
    player = new Player();
    img = new BufferedImage(sizeX, sizeY, 2);

    Levels.getLevel(1);

    this.applesNumber = Levels.getApplesNumber();
    this.background = new ImageIcon("img/bg/" + Levels.getBackground()).getImage();
  }

public void addNotify()
  {
    super.addNotify(); 
    init();
  }

public void paintComponent(Graphics g){
    super.paintComponent(g);

    buffer = img.getGraphics();
    buffer.drawImage(background, 0,0, sizeX, sizeY, null);
    player.paint(buffer);
    for (int i = 0; i <= getWidth(); i += 12) {
        buffer.drawImage(bounds, i, 0, this);
        buffer.drawImage(bounds, i, getHeight()-12, this);
    }

    for (int i = 12; i < getHeight(); i += 12) {
        buffer.drawImage(bounds, 0, i, this);
        buffer.drawImage(bounds, getWidth()-12, i, this);
    }
    g.drawImage(this.img, 0, 0, getWidth(), getHeight(), null);

    buffer.clearRect(12, 12, sizeX, sizeY);

}

public void play()
{
    if (level == this.levels) gameend = true;
    this.player.reset();
    this.counter = 0;
    this.appleCounter = 0;
    long StartTime = System.currentTimeMillis();
    player.update();
    repaint();
    /*do
    {
        Thread.yield();
    }
    while (System.currentTimeMillis() - StartTime < this.speed);*/
}

public void gameLoop()
{
    while(true)
    {
        play();
        try
        {
            Thread.sleep(150);
        }
        catch (InterruptedException ex)
        {

        }
        if (death)
        {
            lives -= 1;
            death = false; continue;
        }
        levelCompleted = false;
        level+=1;

        Levels.getLevel(level);

        applesNumber = Levels.getApplesNumber();

    }
}
public static int getApp()
{
    return applesNumber;
}

public static int getSizeX()
{
    return sizeX;
}

public static int getSizeY()
{
    return sizeY;
}

public void setGameOver()
{
    gameover = true;
}

@Override
public void keyPressed(KeyEvent e) 
{
    if (e.getKeyCode() == KeyEvent.VK_ESCAPE) System.exit(0);
    player.keyPressed(e);   
}

@Override
public void keyReleased(KeyEvent e) {}

@Override
public void keyTyped(KeyEvent e) {}
} 
```

和 JFrame 的 Game.class

```
package snake;

import java.awt.Dimension;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import java.awt.BorderLayout;

@SuppressWarnings("serial")
public class Game extends JFrame {

//public SnakeTheGame start;
private ImageIcon icon;
StatBar statbar;
private MainGamePanel start;   

public static final int WIDTH = 800;
public static final int HEIGHT = 700;
public static final int MIN_WIDTH = 450;    
public static final int MIN_HEIGHT = 450;

public Game()
{
    start = new MainGamePanel(new int[] { Settings.getLives(), Settings.getSpeed(), Settings.getLevels() });
    statbar = new StatBar();
    icon = new ImageIcon("img//icon.png");
    setBounds(200, 200, WIDTH, HEIGHT);
    setMinimumSize(new Dimension(MIN_WIDTH, MIN_HEIGHT));
    setTitle("Snake The Game");
    setIconImage(this.icon.getImage());
    setLocationRelativeTo(null);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
    setLayout(new BorderLayout());
    getContentPane().add(statbar, BorderLayout.SOUTH);
    getContentPane().add(start, BorderLayout.CENTER);
   // this.createBufferStrategy(2);
    this.start.setVisible(true);
    start.requestFocus();

}

public void start()
{
    start.gameLoop();
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T08:55:08.640

JPanel 默认是双缓冲的。您需要做的是删除循环以支持执行 60 FPS 的计时器，调用 play() 并调用其中一个重绘方法。

* * *

***示例代码***

*（从 java.util 导入。我没有使用你的名字。）*

```
private class AnimationTask extends TimerTask {

    @Override
    public void run() {
        play();
        animationPanel.repaint();
    }

}

private Timer timer;

/**
 * Creates new form AnimationDemoFrame
 */
public AnimationDemoFrame() {
    timer = new Timer();
    initComponents();
    timer.schedule(new AnimationTask(), 150);
}

private void play() {
    ;
} 
```

# java - 如何在java中为字符串打印扩展值ascii？

> ID：10570278
> 
> 赞同：-1
> 
> 时间：2012-05-13T08:19:01.650
> 
> 标签：java, character-encoding

我有一个要求，我必须为字符串打印 ascii 值，当我尝试打印其打印意外值的值时，我的程序如下所示

```
 int s=1161;

  String hex=Integer.toHexString(1161);
   hex="0"+hex;

  char firstByte = (char) (Integer.parseInt(hex.substring(0,2),16));
  char secondByte = (char) (Integer.parseInt(hex.substring(2,4),16)); 
```

如果程序是第一个字节 - 一些矩形形状的第二个字节 - 的输出？

我期望ascii代码是第一个字节-- EOT第二个字节--‰</p>

有人可以帮助我如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T08:45:27.333

您打算以一种有点复杂的方式进行以下操作：

```
String hex = String.format("%04x", s); // delivering 0489 
```

第一个字节是 0x04 = 4，一个 ASCII 控制字符、Ctrl-D 或 EOT。

第二个字节是 89，实际上超出了 7 位 ASCII 范围。取决于可能是 promil 符号的编码，但在 Unicode 中将是带有对齐的选项卡的 Unicode 控制字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T08:35:50.380

您应该尝试以下代码...

```
 int s = 1161;

    String hex = Integer.toHexString(s);
    // hex="0"+hex;

    char firstByte = (char) (Integer.parseInt(hex.substring(0, 2), 16));
    char secondByte = (char) (Integer.parseInt(hex.substring(2, 3), 16));

    System.out.println("First = " + firstByte + ", Second = " + secondByte + ", Hex " + hex); 
```

**输出**

```
First = H, Second =     , Hex 489 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T08:43:02.127

使用更可靠的输入测试您的功能。像 EOT 这样的控制字符可以用正方形或任何其他类型的占位符表示。任何高于 127 的值都不是在 ascii 中唯一定义的，所以它可能只是显示为“？”。在我看来，您的功能正常工作。

有关所有定义明确的 ascii 符号，另请参见[http://en.wikipedia.org/wiki/Ascii](http://en.wikipedia.org/wiki/Ascii)。

# javascript - tr 内部带有 php 代码的链接

> ID：10570282
> 
> 赞同：2
> 
> 时间：2012-05-13T08:19:10.967
> 
> 标签：javascript, php, html-table, tablerow

我正在尝试做一些有点奇怪的事情，我有点迷路了。

我有这个代码：

```
<tr onclick="href='<?php if (isset($_SESSION['id_usuario'])){ echo 'logado.php?'; } else { echo 'index.php?'; } ?>grupo=<?php echo $row_buscainterna['id_grupo']; ?>'"> 
```

我`<tr>`处于悬停状态，因此当用户单击它时，我想执行此“php 操作”，但无法使其工作。有人可以帮助我吗？

你怎么看待这件事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T08:29:25.123

我认为在你的 tr 标签中放置一个链接会更容易，并设置它的样式以使其与 tr 的大小相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T08:37:56.343

您想使用这样的代码：

```
<tr onclick="window.location.href='<?php if (isset($_SESSION['id_usuario'])){ echo 'logado.php?'; } else { echo 'index.php?'; } ?>grupo=<?php echo $row_buscainterna['id_grupo']; ?>'"> 
```

这是一个[例子](http://jsfiddle.net/3whmy/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T08:38:37.787

OnClick 属性应包含 javascript 代码。您的示例将全局变量设置`href` 为某个 URL。

如果您想将用户发送到此 URL，那么您应该使用`document.location`而不是`href`：

```
<tr onclick="document.location='<?php if (isset($_SESSION['id_usuario'])){ echo 'logado.php?'; } else { echo 'index.php?'; } ?>grupo=<?php echo $row_buscainterna['id_grupo']; ?>'"> 
```

# javascript - 使用javascript检查字符串是否在字符串中的任何位置包含url

> ID：10570286
> 
> 赞同：8
> 
> 时间：2012-05-13T08:20:23.583
> 
> 标签：javascript, regex

我想检查字符串是否包含使用 javascript 的 url 我从谷歌得到这段代码

```
 if(new RegExp("[a-zA-Z\d]+://(\w+:\w+@)?([a-zA-Z\d.-]+\.[A-Za-z]{2,4})(:\d+)?(/.*)?").test(status_text)) {
          alert("url inside");
        } 
```

但这仅适用于[“http://www.google.com”](http://www.google.com)和[“http://google.com”](http://google.com)之类的网址，但不适用于[“www.google.com”](http://www.google.com)。我也想提取该网址从字符串，所以我可以处理该网址。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-13T08:44:57.600

尝试：

```
if(new RegExp("([a-zA-Z0-9]+://)?([a-zA-Z0-9_]+:[a-zA-Z0-9_]+@)?([a-zA-Z0-9.-]+\\.[A-Za-z]{2,4})(:[0-9]+)?(/.*)?").test(status_text)) {
        alert("url inside");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-13T16:54:57.443

Sudhir 的回答（对我而言）与网址末尾的匹配。

这是我的正则表达式，以防止匹配超出 url 的末尾。

```
var str = " some text http://www.loopdeloop.org/index.html aussie bi-monthly animation challenge site."
var urlRE= new RegExp("([a-zA-Z0-9]+://)?([a-zA-Z0-9_]+:[a-zA-Z0-9_]+@)?([a-zA-Z0-9.-]+\\.[A-Za-z]{2,4})(:[0-9]+)?([^ ])+");
str.match(urlRE) 
```

使用 node.js 生成此输出：

```
[ 'http://www.loopdeloop.org/index.html',
'http://',
 undefined,
'www.loopdeloop.org',
 undefined,
'l',
index: 11,
input: ' some text http://www.loopdeloop.org/index.html aussie bi-monthly animation challenge site.' ] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T08:44:44.093

您可以修改正则表达式以有条件地匹配 URL 的方案，如下所示：

```
var urlCheck = new RegExp('([a-zA-Z\d]+://)?(\w+:\w+@)?([a-zA-Z\d.-]+\.[A-Za-z]{2,4})(:\d+)?(/.*)?', 'i')
if (urlCheck.test(status_text) {
    console.log(urlCheck.exec(status_text));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T08:54:23.423

```
var reg = new RegExp('([a-zA-Z\d]+://)?((\w+:\w+@)?([a-zA-Z\d.-]+\.[A-Za-z]{2,4})(:\d+)?(/.*)?)', 'i')
if (reg.test(status_text)) {
    alert(reg.exec(status_text)[2]);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-13T08:40:56.367

试试这个

```
(?<http>(http:[/][/]|www.)([a-z]|[A-Z]|[0-9]|[/.]|[~])*) 
```

# video - 我可以使用 UCMA 3.0 以编程方式建立视频通话吗？

> ID：10570291
> 
> 赞同：0
> 
> 时间：2012-05-13T08:21:13.790
> 
> 标签：video, lync, lync-2010, ucma, video-conferencing

使用 UCMA 3.0 进行视频会议是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:43:58.010

你想到了什么场景？

UCMA 通常用作基于服务器的 API，因此 UCMA 应用程序通常不会发起或接收视频呼叫（因为应用程序中没有人！），尽管我看不出不能这样做的特殊原因。我还没有这样做，但我想创建一个 UCMA 应用程序是可行的，当您调用它时，它会连接到视频设备 - 一种闭路电视联系人！如果这是您有兴趣做的事情，请告诉我，我会看看是否可以将代码示例放在一起。

但是，您也可以执行背靠背传输，其中传入的视频呼叫（传入 UCMA 应用程序）被移交给另一个用户，同时仍然给人以应用程序已应答的印象。MSDN 有一个很好的关于 B2B的[四部分系列。](http://msdn.microsoft.com/en-us/library/hh527740)

如果您更感兴趣的话，您还可以使用 UCMA 设置、邀请和管理用户之间的视频会议会话。

# spring - 此注释是否适用于 Spring 声明性事务

> ID：10570293
> 
> 赞同：1
> 
> 时间：2012-05-13T08:21:36.910
> 
> 标签：spring, proxy, aop, transactional

据我所知，Spring使用JDK为实现任何接口的类生成动态代理，而使用Cglib为不实现任何接口的类生成动态代理。对于描述性事务，Spring 使用代理来添加事务方面。请看下面的代码：

```
interface Demo {
    void methodA();
}
public class DemoImpl implements Demo{
    @Transactional
    public void updateA() {}
    @Transactional
    public void updateB() {}
} 
```

我认为 updateA 可以很好地处理事务。但是 updateB 方法呢？@Transactional 对它有用吗？可能我的理解不正确。如果能提供相关的Spring源码解释Spring是如何使用JDK/cglib代理类和接口的就好了。谢谢

我在xml中有配置：

```
<tx:annotation-driven transaction-manager="transactionManager" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T08:33:37.097

# JDK动态代理

在这种情况下，您的 bean 被一个代理实现`Demo`接口包装。从那一刻起，您只能使用该界面。尝试注入或获取`DemoImpl`类型的 bean 将导致可怕[的抽象 DAO 模式和 Spring 的“代理无法强制转换为 ...”问题！](https://stackoverflow.com/questions/3852564)

这种回答你的问题 - 你只能访问`updateA()`，这是唯一的交易方法。周围的注释`updateB()`被忽略。

但是，如果您`updateB()`从中调用`updateA()`它将是事务性的，因为*它将*绑定到由`updateA()`（使用默认事务传播）启动的事务。

# CGLIB 代理

在这种情况下，接口被忽略。[cglib](/questions/tagged/cglib "显示标记为“cglib”的问题")将创建一个子类`DemoImpl`（显然也是实现接口）并在这两个方法`Demo`上应用事务行为。`update*()`现在，如果您注入 bean 类型`DemoImpl`（在这种情况下根本不需要接口并且`Impl`后缀很丑陋），您可以安全地以事务方式调用这两种方法。

^(有关详细信息，请参阅我的文章：[Spring 陷阱：代理](http://nurkiewicz.blogspot.com/2011/10/spring-pitfalls-proxying.html)和[Spring AOP 之谜](http://nurkiewicz.blogspot.com/2009/08/spring-aop-riddle.html)。)

# javascript - 使用 javascript 在文本中查找 HTML 标记的位置，最好不使用正则表达式？

> ID：10570295
> 
> 赞同：1
> 
> 时间：2012-05-13T08:21:51.510
> 
> 标签：javascript, html, regex, dom

我有包含 HTML 标签的文本。我想找出每个标签对的开始和结束位置。即开始标签的文本位置和标签的文本位置。

因为我知道用正则表达式匹配标签很复杂（关于嵌套标签、引号等）。我想使用一些更可靠的方法——例如 DOM 函数。

我的文字示例：

```
text <tag>text text </tag> text 
```

使用我的示例文本，结果应该是两个数字 - 5（开始标签的位置）和 26（结束标签的最后一个字母的位置）

我的文本的复杂示例：

```
text <tag> text <tag2> text </tag2> text </tag> text 
```

在第二个示例中，结果应该是两个数字 - 5 和 47（第一级标签的结束位置 - 我不关心嵌套标签）

这可能吗 ？期待任何提示和帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T08:51:53.047

虽然这没有回答有关职位的问题，但您可能想查看 XMLDom。您必须人为地为文档创建一个根节点，但应该可以：

```
var txt = "text <tag> text <tag2> text </tag2> text </tag> text";
txt = '<root>' + txt + '</root>';

var parser = new DOMParser();
var xmlDoc = parser.parseFromString(txt, "text/xml");

alert(xmlDoc.firstChild.childNodes); 
```

# android - 状态栏更新的最佳实践

> ID：10570297
> 
> 赞同：2
> 
> 时间：2012-05-13T08:22:02.913
> 
> 标签：android, statusbar

我有一个执行某些文件 I/O 的服务。我想在服务通知中显示服务当前正在使用的文件。我可以根据 [http://developer.android.com/guide/topics/ui/notifiers/notifications.html#Updating](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#Updating)更新通知， 但正如[这篇博](http://www.google.de/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CH4QFjAA&url=http://www.roman10.net/frequent-custom-status-bar-notification-is-evil-on-android/&ei=Km6vT4ugGYfNsga01bW_Bg&usg=AFQjCNGHW3CdVgoOnmuIaILcRG6_KsJ_vA&sig2=7txXHfn6WX8bitutDJ19Mg)文所说，我应该小心过于频繁的更新（这可能发生在小文件）。那么什么是好的解决方案？如果用户没有拉下通知区域，我什至不需要更新。我应该检查一下吗？我应该使用更新时间吗？

更新越频繁越好（用户可以看到服务的最新活动），但 CPU 负载越高越差。

有标准模式可以使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T08:56:48.733

由于您的 IO 活动已经给 CPU 带来了沉重的负担，因此您的通知不会成为额外的负担。

反对过于频繁更新的建议主要适用于手机处于待机状态并且需要唤醒以处理每个通知的情况，这会耗尽电池电量。

但是，如果您正在处理大量小文件，则更新速度太快，用户无法阅读并且可能会出现闪烁，因此您可能只想每隔几秒更新一次。

# javascript - Javascript - 数组中索引的范围为 5

> ID：10570303
> 
> 赞同：1
> 
> 时间：2012-05-13T08:22:58.217
> 
> 标签：javascript

我想知道如何执行以下操作。

我有一个对象数组，我试图在给定索引周围检索一定数量的对象。

这是一个例子。

```
var arr = [0,1,2,3,4,5,6,7,8,9,10];
var index = 0;
var max = 5;

If the index is 0 I want [0 - 4]
If the index is 4 I want [2 - 6]
If the index is 9 I want [6 - 10] 
```

但是如果数组也小于最大值，我也希望它能够工作。例如

```
var arr = [0,1,2];
var index = 0;
var max = 5;

Any index would return [0 - 2] 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T08:36:07.430

你可能想[试试这个](http://jsfiddle.net/MJnXV/3/)

```
var arr = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10];

function getRange(array, index, range) {
    var least = index - Math.floor(range/2);
    least = (least < 0) ? 0 : least;
    return array.slice(least, least+range);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T08:27:46.923

```
var start = index - max / 2;
if (start < 0) start = 0;
var end = start + max;
if (end > arr.length) {
  end = arr.length;
  start = end - max;
  if (start < 0) start = 0;
}
var result = arr.slice(start, end); 
```

# c# - 如何获得 IEnumerable 的 T 没有变量的类型参数？

> ID：10570304
> 
> 赞同：0
> 
> 时间：2012-05-13T08:23:01.417
> 
> 标签：c#, generics, type-parameter

鉴于：

```
public T Get<T>() { ... } 
```

在哪里`T`关闭`IEnumerable<XYZ>`，我如何确定`XYZ`类型？

我没有变量可以开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T08:32:43.660

您可以使用`typeof(T)`，这将为您提供正确的类型信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T08:39:35.777

您可以使用[LINQ 中的 TypeSystem.GetElementType 方法：Building an IQueryable Provider - Part I](http://blogs.msdn.com/b/mattwar/archive/2007/07/30/linq-building-an-iqueryable-provider-part-i.aspx) to get `typeof(XYZ)`when given `typeof(IEnumerable<XYZ>)`：

```
var elementType = TypeSystem.GetElementType(typeof(IEnumerable<XYZ>));
// elementType == typeof(XYZ) 
```

在您的方法中，您可以使用`typeof(T)`来[获取](http://msdn.microsoft.com/en-us/library/system.type.aspx)表示`T`.

```
public T Get<T>()
{
    var elementType = TypeSystem.GetElementType(typeof(T));
    ...
} 
```

# python - self.attr 在 unittest.TestCase 中的测试之间重置

> ID：10570307
> 
> 赞同：7
> 
> 时间：2012-05-13T08:24:04.620
> 
> 标签：python, unit-testing

我想使用`self.attr`一个`unittest.TestCase`类，但它似乎在测试之间不是持久的：

```
import unittest

class TestNightlife(unittest.TestCase):
    _my_param = 0

    def test_a(self):
        print 'test A = %d' % self._my_param
        self._my_param = 1

    def test_b(self):
        print 'test B = %d' % self._my_param
        self._my_param = 2

if __name__ == "__main__":
    unittest.main() 
```

这给出了以下输出：

```
test A = 0
test B = 0 
```

`unittest.TestCase`测试运行之间的实例是否发生变化？为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-13T08:46:37.413

它是这样工作的，因为 unittest.main() 为每个测试创建单独的对象（在这种情况下创建了两个对象）。

关于你的动机：测试不应该改变全局状态。您应该在 tearDown 测试或测试之前将全局状态恢复为状态。如果测试正在改变全局状态，这是非常有问题的，你迟早会陷入无法预测的场景。

```
import unittest

class TestNightlife(unittest.TestCase):
    _my_param = 0

    def test_a(self):
        print 'object id: %d' % id(self)
        print 'test A = %d' % self._my_param
        self._my_param = 1

    def test_b(self):
        print 'object id: %d' % id(self)
        print 'test B = %d' % self._my_param
        self._my_param = 2

if __name__ == "__main__":
    unittest.main() 
```

输出：

```
object id: 10969360
test A = 0
.object id: 10969424
test B = 0
.
----------------------------------------------------------------------
Ran 2 tests in 0.000s

OK 
```

# c++ - 使用 STL 容器 upper_bound & lower_bound 映射

> ID：10570312
> 
> 赞同：-3
> 
> 时间：2012-05-13T08:25:17.987
> 
> 标签：c++, stl, map, upperbound

我有以下一组

```
set<int> myset;
set<int>::iterator it,itlow,itup;

for (int i=1; i<10; i++) myset.insert(i*10); // 10 20 30 40 50 60 70 80 90
itup=myset.upper_bound (50);                 // 
cout << "upper_bound at position " << (*itup) << endl;
//output: 60 
```

我如何为地图执行此操作？我认为下面的程序似乎使用地图的第一个值而不是第二个值，因此我收到错误。

**如何将其设置为使用第二个值？**

```
map<int,int> myset;
map<int,int>::iterator it,itlow,itup;

for (int i=1; i<10; i++) myset.insert(i*10); // 10 20 30 40 50 60 70 80 90
itup=myset.upper_bound (50);                 // 
cout << "upper_bound at position " << (*itup).second << endl;
//output: some random value returns 
```

与 map 一起使用时给我错误值的实际代码在我使用 set 时有效：

```
int x = 50;

map<int,int> myset;
//for (int i=1; i<10; i++) myset.insert(i*10); // 10 20 30 40 50 60 70 80 90
myset[0] = 10;
myset[2] = 20;
myset[3] = 30;
myset[4] = 40;
myset[5] = 50;
myset[6] = 60;
myset[7] = 70;

map<int,int>::iterator begin,upbound,lobound,it;
    map<int,int>::reverse_iterator end;
end = myset.rbegin();
begin = myset.begin();
upbound=myset.upper_bound(x);
lobound=myset.lower_bound(x);
lobound--;

if(myset.size()==1)
{
    cout << "upper_range = " << x <<endl;
    cout << "lower_range = " << x <<endl;

}
else if(x == (*begin).second)
{
    cout << "upper_range = " << (*upbound).second <<endl;
    cout << "lower_range = " << end->second <<endl;

}
else if(x == end->second)
{
    cout << "upper_range = " << (*begin).second <<endl;
    cout << "lower_range = " << (*lobound).second <<endl;

}
else
{
    cout << "start = " << (*begin).second <<endl;
    cout << "end = " << end->second<<endl;
    cout << "upper_range = " << (*upbound).second <<endl;
    cout << "lower_range = " << (*lobound).second <<endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T08:43:06.790

如果要在 a 中搜索`map`特定值（不是键），则必须在地图上按顺序迭代并检查每个值，因为`find()`, `lower_bound()`，`upper_bound()`都使用键。

在发布的代码中，您可以交换`value`和`key`，这将允许您搜索`map`之前`set`的搜索：

```
myset[10] = 0;
myset[20] = 2;
myset[30] = 3;
myset[40] = 4;
myset[50] = 5;
myset[60] = 6;
myset[70] = 7; 
```

# c++ - 剪贴板选择传输不起作用

> ID：10570315
> 
> 赞同：4
> 
> 时间：2012-05-13T08:26:09.393
> 
> 标签：c++, selection, clipboard, x11, xlib

我一直在将我的系统移植到 X11，但我遇到了剪贴板复制问题（粘贴已经在工作）。我遵循[了这个](http://michael.toren.net/mirrors/doc/X-copy+paste.txt)。过了一会儿，我注意到他的例子也不起作用。问题是当我尝试将它粘贴到某个地方时，而不是 XA_STRING 请求的原子 id 是 434。我找不到这个原子的用途。当我将 XA_STRING 更改为 434 时，我得到一个不同的错误。以下是代码。

```
void SetClipboardText(const std::string &text) {
   XSetSelectionOwner (display, XA_CLIPBOARD, windowhandle, CurrentTime);
   copiedtext=text;
   XFlush(display);
   std::cout<<"COPIED"<<std::endl;
}

...
case SelectionRequest:
    XEvent respond;

    std::cout<<"SELTYPE: "<<event.xselectionrequest.target<<std::endl;

    if(event.xselectionrequest.target==XA_STRING && 
        event.xselectionrequest.selection==XA_CLIPBOARD) {
        std::cout<<"REQUESTED"<<std::endl;

        XChangeProperty (display,
            event.xselectionrequest.requestor,
            event.xselectionrequest.property,
            XA_STRING,
            copiedtext.length(),
            PropModeReplace,
            (unsigned char*) copiedtext.c_str(),
            copiedtext.length()
        );
        respond.xselection.property=event.xselectionrequest.property;
    }
    else {
        respond.xselection.property= None;
    }
    respond.xselection.type= SelectionNotify;
    respond.xselection.display= event.xselectionrequest.display;
    respond.xselection.requestor= event.xselectionrequest.requestor;
    respond.xselection.selection=event.xselectionrequest.selection;
    respond.xselection.target= event.xselectionrequest.target;
    respond.xselection.time = event.xselectionrequest.time;
    XSendEvent (display, event.xselectionrequest.requestor,0,0,&respond);
    XFlush (display);
    break; 
```

用 434 替换 XA_STRING 时出现错误：

```
X Error of failed request:  BadValue (integer parameter out of range for operation)
  Major opcode of failed request:  18 (X_ChangeProperty)
  Value in failed request:  0x4
  Serial number of failed request:  33
  Current serial number in output stream:  36 
```

如果相关，我使用 KDE 4.8 并且 klipper 目前已关闭。

**编辑**：来自网站的示例。

```
#include <X11/Xlib.h> 
#include <X11/Xatom.h>
#include <assert.h>   
#include <unistd.h>   
#include <stdio.h>
#include <stdlib.h>

main()
{
Display *dpy = XOpenDisplay(NULL);
assert(dpy);
Window w = XCreateSimpleWindow(dpy, DefaultRootWindow(dpy), 0, 0, 
                 200, 100, 0, 0, 0);
XSelectInput(dpy, w, StructureNotifyMask);
XMapWindow(dpy, w);
XSelectionRequestEvent *req;
XEvent e, respond;
for(;;) {
    XNextEvent(dpy, &e);
    if (e.type == MapNotify) break;
}
XFlush(dpy);
//
Atom a1, a2, a3, type;
XSelectInput(dpy, w, StructureNotifyMask+ExposureMask);
int format, result;
unsigned long len, bytes_left, dummy;
unsigned char *data;
Window Sown;
for (int ii = 0; ii < 50; ii++) {
    XSetSelectionOwner (dpy, XA_PRIMARY, w, CurrentTime);
    XFlush (dpy);
    XNextEvent (dpy, &e);
    if (e.type == SelectionRequest)
    //
    // Somebody wants our data
    //
    {
        req=&(e.xselectionrequest);
        printf ("Selection Request from Mr %i I am %i\n",
            (int)e.xselection.requestor, (int)w);
        printf ("prop:%i tar:%i sel:%i\n", req->property,
            req->target, req->selection);
        if (req->target == XA_STRING)
        {
            XChangeProperty (dpy,
                req->requestor,
                req->property,
                XA_STRING,
                8,
                PropModeReplace,
                (unsigned char*) "It Works",
                8);
            respond.xselection.property=req->property;
        }
        else // Strings only please
        {
            printf ("No String %i\n",
                (int)req->target);
            respond.xselection.property= None;
        }
        respond.xselection.type= SelectionNotify;
        respond.xselection.display= req->display;
        respond.xselection.requestor= req->requestor;
        respond.xselection.selection=req->selection;
        respond.xselection.target= req->target;
        respond.xselection.time = req->time;
        XSendEvent (dpy, req->requestor,0,0,&respond);
        XFlush (dpy);
    }
}
} 
```

编译使用

```
gcc copytest.c -o copytest -std=c99 -lX11 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T09:58:24.560

以下是 KDE 应用程序所必需的

```
else if(event.xselectionrequest.target==XA_TARGETS && 
  event.xselectionrequest.selection==XA_CLIPBOARD) {
    Atom supported[]={XA_STRING};
    XChangeProperty (display,
        event.xselectionrequest.requestor,
        event.xselectionrequest.property,
        XA_TARGETS,
        8,
        PropModeReplace,
        (unsigned char *)(&supported),
        sizeof(supported)
    );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-20T09:09:40.770

您已传递`copiedtext.length()`给 XChangeProperty 的格式参数；这是错误的。

你应该通过`8`for`char*`和`16`for`short*`和`32`for `int*`。

# c++ - 可移植 VFS 库 C++

> ID：10570316
> 
> 赞同：5
> 
> 时间：2012-05-13T08:26:22.697
> 
> 标签：c++, file-io, filesystems, portability

有没有人遇到过满足这些要求的优秀文件系统虚拟化库？

*   跨平台：至少Win32和Linux，最好还有OSX
*   支持协议：
    *   中小企业
    *   FTP
    *   SFTP
    *   本地金融服务
*   具有基于 URL 的客户端工厂的抽象 C++ 接口：
    *   smb://[user[:password]@]host/share/path...
    *   ftp://[用户[:密码]@]主机/路径...
    *   sftp://[user[:password]@]host/path...
    *   文件路径...
*   提供方法：
    *   列出一个目录，最好返回具有 struct stat-like 属性的条目
    *   移动
    *   复制
    *   消除
    *   统计
    *   奖励：低级文件访问接口（打开、读取、写入、关闭……）

我见过一些满足这些要求子集的优秀库（用于 FTP 的 curl，用于 SFTP 的 libssh 等等），但还没有一个能够满足所有要求。有一股强烈的想要DIY的冲动，但我无法想象它已经不存在了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T02:56:32.937

它是用 C 而不是 C++ 实现的，但我很确定[GIO](http://developer.gnome.org/gio/stable/)支持其中的大部分。这是 GNOME 项目的一部分，被大多数 GNOME 应用程序用作文件系统抽象。

# git - 无法拉取，git 无法解析引用 ORIG_HEAD

> ID：10570319
> 
> 赞同：38
> 
> 时间：2012-05-13T08:26:54.583
> 
> 标签：git

从我们的中央服务器拉入我的 git 存储库时，发生了这个错误：

```
$ git pull origin master

From http://aaa/repo
 * branch            master     -> FETCH_HEAD
error: unable to resolve reference ORIG_HEAD: No such file or directory
fatal: Cannot lock the ref 'ORIG_HEAD'. 
```

我试过 git gc （使用 --prune=now ）并寻找类似的错误，不幸的是没有运气。

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2013-01-04T15:18:06.333

我遇到了这个问题，我通过删除文件 .git/ORIG_HEAD 然后再次拉取来解决它。.git/ORIG_HEAD 文件是 0 字节，而不是它应该包含的 git 引用，所以我把它去掉了。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-13T09:39:42.063

检查`git remote prune origin`除`git gc --prune=now`“[`git pull`失败”“无法解析引用”“无法更新本地引用”</a>”中提到的内容。](https://stackoverflow.com/questions/2998832/git-pull-fails-unalble-to-resolve-reference-unable-to-update-local-ref)

[](https://stackoverflow.com/questions/2998832/git-pull-fails-unalble-to-resolve-reference-unable-to-update-local-ref)

[如果您有`.git/rebase-merge`，请考虑将其删除（如“](https://stackoverflow.com/questions/2998832/git-pull-fails-unalble-to-resolve-reference-unable-to-update-local-ref)[`git rebase`并删除变基分支导致“交互式变基已启动”错误消息](https://stackoverflow.com/questions/8895915/git-rebase-and-deleted-rebasing-branches-causing-interactive-rebase-already-sta)“）

还要检查 的内容`.git/HEAD`，如[本期所示](https://github.com/tpope/vim-fugitive/issues/172)。

如果这是某种 repo 损坏（请参阅“ [Git 损坏的 master 分支](https://superuser.com/questions/422231/git-corrupt-master-branch)”），请先尝试再次克隆您的 repo，然后在该 repo 之上重新应用您当前的修改（[`git format-patch`](http://schacon.github.com/git/git-format-patch.html)如果需要的话）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-02-03T05:10:53.183

**这个答案不能解决 OP 的问题，但可以解决类似的问题。**

我有一个类似的问题（我得到了**`error: cannot lock ref ... is at ... but expected ...`**），但这是因为 repo 中有两个名称相同但大小写不同的分支。也许这个答案可以帮助到达这里的人，我无法在其他地方找到答案。我删除了其中一个分支，然后从: 中删除了其对应的引用`.git/ref/.../branch_name`，然后 git 拉了。这是因为我在一个不区分大小写的文件系统上工作，而两个分支被推送到一个区分大小写的文件系统上。

比如这两个分支是`BRANCH1`and `branch1`，并且都在`origin`remote 下。首先，删除其中一个分支，例如`BRANCH1`. 然后删除它的参考：

```
rm .git/refs/remotes/origin/BRANCH1 
```

然后`git pull`，应该没问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-11-25T14:46:09.083

当您在存储库中时创建此文件`git pull`，以便`git pull`当时不在同一个存储库中超过一个，并且在该过程完成时将其删除。如果进程死亡或变成僵尸，则文件不会被删除，您必须手动检查 git 进程是否仍然存在。如果该进程不存在，那么您必须删除该文件并`git pull`再次尝试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-25T11:40:29.973

我必须删除`.git/ORIG_HEAD.lock`，而不是（只是）`.git/ORIG_HEAD`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-26T08:32:18.153

我遇到了 Unix 权限问题，我对两个不同的用户使用了同一个 git repo（一个是`root`，另一个是我的私人用户）。

因此，我不得不将文件所有权更改`.git/ORIG_HEAD`为我的个人用户，这解决了这个问题。

```
chown myuser:mygrp .git/ORIG_HEAD 
```

# spring - 将spring bean注入JSF bean时出现代理异常

> ID：10570322
> 
> 赞同：1
> 
> 时间：2012-05-13T08:27:03.570
> 
> 标签：spring, jsf-2, dependency-injection, code-injection

我正在尝试将 spring bean 注入 JSF bean，我正在使用 Spring 3.1 和 JSF 2 (Mojarra 2.1.7)

不用多说，我的配置和代码以及以下列出的异常：

**学生服务.java：**

```
@Scope(proxyMode=ScopedProxyMode.TARGET_CLASS)
public class StudentsService extends AbstractMaqraaService {

    @Override
    public Set<Class<?>> getTypes() {
        // TODO Auto-generated method stub
        return null;
    }

    public Student registerStudent(Student student) {
        return this.store(student);
    }

} 
```

**StudentRegistrationMBean.java：**

```
@ManagedBean(name="studentRegistrationMBean") 
@SessionScoped
public class StudentRegistrationMBean extends AbstractMBean {

    private Student student;
    @ManagedProperty (value="#{studentsService}")
    private StudentsService studentsService;

    public StudentRegistrationMBean() {
        this.student = new Student();
    }

    /*Setters and getters omitted here only*/

    public String register() {

        studentsService.registerStudent(student);
        return "manageStudents";
    }
} 
```

**模块上下文 xml 文件中的 Spring bean：**

```
<bean id="abstractMaqraaService" class="org.tts.maqraa.service.AbstractMaqraaService" abstract="true"/>

<bean id="studentsService" class="org.tts.maqraa.service.StudentsService" lazy-init="default" parent="abstractMaqraaService"/> 
```

**面孔-config.xml：**

```
...
<application>
        <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>
</application>
... 
```

**接收：**

```
TRACE [http-bio-8080-exec-3] (SpringBeanELResolver.java:53) - Successfully resolved variable 'studentsService' in Spring BeanFactory
DEBUG [http-bio-8080-exec-3] (AbstractBeanFactory.java:245) - Returning cached instance of singleton bean 'studentsService'
نوار 13, 2012 11:10:45 ص com.sun.faces.application.view.FaceletViewHandlingStrategy handleRenderException
SEVERE: Error Rendering View[/teacher/registerNewStudent.xhtml]
com.sun.faces.mgbean.ManagedBeanCreationException: Unable to set property studentsService for managed bean studentRegistrationMBean
    at com.sun.faces.mgbean.ManagedBeanBuilder$BakedBeanProperty.set(ManagedBeanBuilder.java:615)
    at com.sun.faces.mgbean.ManagedBeanBuilder.buildBean(ManagedBeanBuilder.java:133)
    ...
    at java.lang.Thread.run(Unknown Source)
Caused by: javax.el.ELException: Cannot convert org.tts.maqraa.service.StudentsService@8f65bc0 of type class $Proxy10 to class org.tts.maqraa.service.StudentsService
    at org.apache.el.lang.ELSupport.coerceToType(ELSupport.java:420)
    at org.apache.el.ExpressionFactoryImpl.coerceToType(ExpressionFactoryImpl.java:47)
    at com.sun.faces.el.ELUtils.coerce(ELUtils.java:536)
    at com.sun.faces.mgbean.BeanBuilder$Expression.evaluate(BeanBuilder.java:592)
    at com.sun.faces.mgbean.ManagedBeanBuilder$BakedBeanProperty.set(ManagedBeanBuilder.java:606)
    ... 47 more

ERROR [http-bio-8080-exec-3] (MaqraaExceptionHandler.java:83) - Exception
javax.el.ELException: Cannot convert org.tts.maqraa.service.StudentsService@8f65bc0 of type class $Proxy10 to class org.tts.maqraa.service.StudentsService
    at org.apache.el.lang.ELSupport.coerceToType(ELSupport.java:420)
    ...
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

我在谷歌上做了很多搜索，发现很多问题都和我一样，但没有任何帮助，我希望我能找到我的特殊情况的解决方案！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T08:14:14.877

用于`<aop:aspectj-autoproxy proxy-target-class="true"/>`强制使用 JDK 代理而不是 CGLIB

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:46:16.773

如果您像这样注入 Spring 服务，请不要忘记为您的服务创建设置器：

```
@ManagedProperty (value="#{studentsService}")
private StudentsService studentsService;

public void setStudentsService (StudentsService studentsService)
{
    this.studentsService = studentsService;
} 
```

使用 @Autowired 注释就不需要这样做了。

看看这个[答案](https://stackoverflow.com/questions/2387431/spring-autowiring-class-vs-interface)这是关于不使用接口来使用您的代理。

# ruby - soap4r SOAP::FaultError

> ID：10570326
> 
> 赞同：0
> 
> 时间：2012-05-13T08:28:08.893
> 
> 标签：ruby, soap-client, soap4r

我是肥皂新手，我已经遇到了问题！我正在使用soap4r gem。

```
gem 'soap4r', :git => 'git://github.com/felipec/soap4r.git'
require 'soap/wsdlDriver'
require 'soap/rpc/driver'
require 'soap/mapping/mapping.rb' 
```

我初始化 rpc 驱动程序如下：

```
 def initialize
    @username = "username"
    @password = "password"
    endpoint = "https://someurl.php"
    namespace = "abc:somenamespace"
    @driver = SOAP::RPC::Driver.new(endpoint, namespace)
  end 
```

当我从浏览器访问端点时，出现此错误：

```
<SOAP-ENV:Envelope SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
<SOAP-ENV:Body>
<SOAP-ENV:Fault>
<faultcode xsi:type="xsd:string">SOAP-ENV:Client</faultcode>
<faultactor xsi:type="xsd:string"/>
<faultstring xsi:type="xsd:string">Operation '' is not defined in the WSDL for this service
</faultstring>
<detail xsi:type="xsd:string"/>
</SOAP-ENV:Fault>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

另外，当我从 irb 执行此操作时：

```
client = SOAP::WSDLDriverFactory.new("endpoint?wsdl").create_rpc_driver 
```

我收到此错误：

```
RuntimeError: part: return cannot be resolved
    from /home/sadiksha/.rvm/rubies/ruby-1.8.7-p358/lib/ruby/1.8/wsdl/soap/methodDefCreator.rb:144:in `rpcdefinedtype'
    from /home/sadiksha/.rvm/rubies/ruby-1.8.7-p358/lib/ruby/1.8/wsdl/soap/methodDefCreator.rb:56:in `collect_rpcparameter'
.
.
. 
```

但是当我这样做时：

```
client = SOAP::WSDLDriverFactory.new(endpoint).createDriver 
```

并列出方法

```
client.methods(false) 
```

我有一种方法getName。当我尝试通过 client.getName({:username => "username", :password => "password") 访问该方法时，它给了我错误提示

```
SOAP::FaultError: Username doesn't exist 
    from 
```

我很抱歉让它太长了！我已经搜索了很长时间了。但没能找到具体的答案。我希望有人能回答我的问题。我认为这可能是一些身份验证错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:02:38.740

使用以下内容可以帮助您解决问题。它将生成和接收的 XML 转储到控制台。

```
myWebServiceInstance.wiredump_dev = STDERR 
```

# jquery-ui - Ajax 刷新时 Jquery Mobile GUI 崩溃

> ID：10570327
> 
> 赞同：0
> 
> 时间：2012-05-13T08:28:16.347
> 
> 标签：jquery-ui, jquery, jquery-mobile

我有一个使用 jquery mobile 和 play 框架构建的页面。

它正在刷新自身的某些部分以检索数据。但是我的按钮样式在刷新时会丢失。我能做些什么？

```
<div id="thread" class="container_12">
 <div class="grid_6">
#{list items:servs, as:'serving'}   

        <div class="grid_2">
        <a href="@{Kitchen.served(serving.id)}" data-role="button">${serving.item.title}</a>
        </div>

        <div class="grid_2"><h2> ${serving.amount} </h2></div>

        <div class="grid_2"><h2> Masa - ${serving.dtableID} </h2></div>

 #{/list}

 </div>
<div class="grid_6">
#{list events}
    #{if _.type == '1'}
        <div class="message ${_.tableID == tableID ? 'you' : ''}">
            <h2>${_.tableID} Numaralı Masa</h2>
            <p>
                Garson çağırdı! 
            </p>
        </div>
    #{/if}
     #{if _.type == '2'}
        <div class="message ${_.tableID == tableID ? 'you' : ''}">
            <h2>${_.tableID} Numaralı Masa</h2>
            <p>
                Hesap istedi! 
            </p>
        </div>
    #{/if}
    #{if _.type == 'join'}
        <div class="message notice">
            <h2></h2>
            <p>
                ${_.tableID} numaralı masa girdi!
            </p>
        </div>
    #{/if}
    #{if _.type == 'leave'}
        <div class="message notice">
            <h2></h2>
            <p>
                ${_.tableID} numaralı masa Çıktı!
            </p>
        </div>
    #{/if}
#{/list}
</div>
</div>
<div class="clear"></div>

 #{get 'moreScripts' /}
 <script type="text/javascript" charset="${_response_encoding}">

// Reload the whole messages panel
var refresh = function() {
    $('#thread').load('@{room()} #thread', function() {

    })
}

// Call refresh every 5 seconds
setInterval(refresh, 5000)

</script> 
```

在上面它包括javascript刷新代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T21:10:28.090

我通过添加解决了我的问题

```
$('#thread').trigger('create'); 
```

# javascript - JavaScript 键盘事件未触发

> ID：10570328
> 
> 赞同：1
> 
> 时间：2012-05-13T08:28:45.720
> 
> 标签：javascript, dom-events, keyboard-events

当您按前进、空格键和左键的顺序按键时，出于某种非常奇怪的原因。Left 不会触发，而是返回空格键。三个键的任何其他组合都可以正常工作，但不是那个。关于为什么的任何线索？

```
var Ctrl = {
    init: function() {
        window.addEventListener('keydown', this.keyDown, true);
        window.addEventListener('keyup', this.keyUp, true);
    },

    keyDown: function(event) {
        console.log(event.keyCode);

        switch(event.keyCode) {
            case 37: // Left
                Ctrl.left = true;
                break;
            case 39: // Right
                Ctrl.right = true;
                break;
            case 38: // up
                Ctrl.up = true;
                break;
            case 40: // down
                Ctrl.down = true;
                break;
            case 32:
                Ctrl.space = true;
                break;
            default:
                break;
        }
    },

    keyUp: function(event) {

        switch(event.keyCode) {
            case 37: // Left
                Ctrl.left = false;
                break;
            case 39: // Right
                Ctrl.right = false;
                break;
            case 38:
                Ctrl.up = false;
                break;
            case 40:
                Ctrl.down = false;
                break;
            case 32:
                Ctrl.space = false;
                break;
            default:
                break;
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T08:54:28.180

也许您的一个关键是激活不需要的默认行为。您可以尝试添加`event.preventDefault();`到您的事件绑定。

[检查jsFiddle](http://jsfiddle.net/fguillen/evHHF/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T08:46:04.870

这取决于您的键盘型号。某些键盘不适用于某些组合键。这是正常的。

# javascript - 获取具有在视图实例中定义的特定 id 的数据

> ID：10570333
> 
> 赞同：0
> 
> 时间：2012-05-13T08:29:30.600
> 
> 标签：javascript, backbone.js

我需要`fetch`具有特定 id 的数据，
并且在视图实例中定义了哪个 id。
这里的示例，请参阅 MyModel 定义中的注释：

```
// my view instance
var myView = new MyView({
    model: {id: 12321}
}); 
```

* * *

```
MyView = Backbone.View.extends({
        initialize: function()
        { 
            myModel.fetch();
        }
}); 
```

* * *

```
MyModel = Backbone.Model.extends({
        url: function url ()  
        {
          // how to get the id passed to view instance?
          return "http:..../id/" + this.id; 
        }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T08:42:50.063

Model 不应该知道 View 的存在，所以 View 应该是`id`要获取的 Model 的那个：

```
MyView = Backbone.View.extends({
        initialize: function()
        { 
            myModel.id = this.model.id;
            myModel.fetch();
        }
}); 
```

*（我已经使用你的示例代码作为我的示例的模板，但我不得不说我觉得它有一些奇怪的东西，我想只是一个品味问题）*

## 更新：我非常个人的口味意见

这样做非常困难，但根据您的要求，我将与您分享我对您的示例代码的非常个人的代码审查。照原样接受：一个非常谦虚的意见。

### this.model 困惑

我不会使用会造成混乱的属性名称：

```
var myView = new MyView({
    model: {id: 12321}
}); 
```

在这个实例`this.model`中引用了一个*原始*的Hash，但是在 Backbone 上下文中，这违背了直觉认为这将是一个*Backbone.Model*。

我宁愿把它改成这样：

```
var MyView = Backbone.View.extend({
  initialize: function( opts ){
     this.model_id = opts.model_id;
  }
})
var myView = new MyView({ model_id: 12321 }); 
```

我觉得这个*命名*更直观。

### 关闭变量范围

此代码仅`myModel`在其范围大于应有的范围内时才有效：

```
MyView = Backbone.View.extends({
        initialize: function()
        { 
            myModel.fetch();
        }
}); 
```

我更喜欢使用更多封装的范围，即使`myModel`已在视图的外部上下文中声明，视图也应使用其私有上下文的变量。例如

```
var MyView = Backbone.View.extends({
  initialize: function( opts ) { 
    this.model = opts.model;
    this.model.fetch();
  }
});

var myView = new MyView({ model: myModel }); 
```

检查我`var`前面添加的细节，`MyView`因为如果不是，`MyView`它将是一个`window`全局变量。

### 使用主干 urlRoot

在您的示例中，这...

```
MyModel = Backbone.Model.extends({
    url: function url ()  
    {
      // how to get the id passed to view instance?
      return "http:..../id/" + this.id; 
    }
}); 
```

...可以概括为：

```
MyModel = Backbone.Model.extends({
    urlRoot: "http:..../id"
}); 
```

# umbraco - Umbraco 5 中用于媒体上传的自定义 Web 服务

> ID：10570334
> 
> 赞同：1
> 
> 时间：2012-05-13T08:29:39.353
> 
> 标签：umbraco, umbraco5

我想启用 BATCH MEDIA 上传到 UMBRACO 5。

不幸的是，所有现有的包都坏了，所以我开始创建自己的包

（跟随这个家伙的好博客在这里.. [http://heltblank.wordpress.com/2012/03/07/multiple-file-upload-for-umbraco-5-jupiter-using-uploadify/](http://heltblank.wordpress.com/2012/03/07/multiple-file-upload-for-umbraco-5-jupiter-using-uploadify/)）

我的 PREFERED 选项将使用 WCF Web 服务，但 BackOfficeController 也是一个可接受的选项...

现在的问题：

*) 如何获取 web 服务或 BackOfficeController 中的现有媒体文件夹（用于 parentId）？
*) 我如何在 web 服务或 BackOfficeController 中创建一个新的媒体项（直接通过 Hive，..），而不仅仅是像上面的博客中那样调用控制器？

我真的爱上了 Umbraco 2 年多了。但在我看来，Umbraco 5 的 API 模型似乎有点过度设计了。（Hive / Get Writer / Repository / Schema /...）所有类似的术语像这样加强开发工作..

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:19:32.000

您可能已经意识到这一点，但截至 2012 年 6 月 13 日，Umbraco 5 正式成为一个废弃的项目，因为它在架构层面存在根本缺陷并且被认为无法修复。

它是在开发者大会上宣布的……您可以在下面的博客文章中看到原因。可以说，建议您不要使用它。

[http://umbraco.com/follow-us/blog-archive/2012/6/13/v5-rip.aspx](http://umbraco.com/follow-us/blog-archive/2012/6/13/v5-rip.aspx)

或在这里观看相当令人毛骨悚然的主题演讲视频：

[http://umbraco.com/follow-us/blog-archive/2012/6/13/cg12-keynote-video.aspx](http://umbraco.com/follow-us/blog-archive/2012/6/13/cg12-keynote-video.aspx)

因此，我建议您将上述内容移至 4.X 并执行上述操作。

谢谢，

# couchdb - CouchDB 没有正确排序日期？

> ID：10570338
> 
> 赞同：1
> 
> 时间：2012-05-13T08:29:53.850
> 
> 标签：couchdb

这是我的看法：

```
function(doc) {
    if(doc.type=="mail" && doc.user_id == 116 && doc.fid == 81 ){
        emit([doc.time], doc.msg); 
    }
} 
```

我默认存储 JS Date() ，这是按降序排序的文档列表。

```
"Wed May 09 2012 00:16:02 GMT+0800 (SGT)"
"Wed May 09 2012 00:10:45 GMT+0800 (SGT)"
"Wed May 02 2012 00:59:47 GMT+0800 (SGT)"

"Tue May 08 2012 23:55:54 GMT+0800 (SGT)"
"Tue May 08 2012 21:59:42 GMT+0800 (SGT)"

"Tue May 01 2012 23:11:57 GMT+0800 (SGT)"
"Tue May 01 2012 19:00:37 GMT+0800 (SGT)"
"Tue May 01 2012 18:59:55 GMT+0800 (SGT)"

**"Sun May 13 2012 16:02:58 GMT+0800 (SGT)"**
"Sun May 13 2012 16:01:16 GMT+0800 (SGT)" 
```

如您所见，日期未正确排序并且`"Sun May 13 2012 16:02:58 GMT+0800 (SGT)"`是最后一个条目。我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T09:03:56.923

我*认为*您在数据库中的日期将被存储为字符串。如果您进入蒲团并查看页面的来源，您应该能够确认这一点。

在过去，我看到日期存储为 unix 时间戳，以便轻松按整数值排序。如果您确实将数据作为字符串存储在其中，则文档中的此部分可能会有所帮助：[http ://wiki.apache.org/couchdb/View_collat​​ion#Sorting_by_Dates](http://wiki.apache.org/couchdb/View_collation#Sorting_by_Dates)

# objective-c - 当我使用 EGOTableViewPullRefresh 时，表格单元格会重复

> ID：10570340
> 
> 赞同：1
> 
> 时间：2012-05-13T08:30:42.990
> 
> 标签：objective-c, ios, uitableview

我正在使用[本教程](http://www.raywenderlich.com/2636/how-to-make-a-simple-rss-reader-iphone-app-tutorial)开发 RSS 阅读器。所有表格单元格数据都来自一个`NSMutableArray`实例 (_allEntries)。然后我导入 `EGOTableViewPullRefresh`并添加`[self refresh]`（`-(void)reloadTableViewDataSource`是`self.refresh`一种填充 allEntries 数据的方法）。然后拉刷新作品，但每次我刷新时都会重复单元格。我试图通过两种方式解决它。

1.  从互联网下载数据时，`if (![_allEntries containsObject:entry])`之前添加`[_allEntries insertObject:entry atIndex:insertIdx]`但它不起作用，也许我应该使用`entry.title`对象中的或其他一些属性来比较但它没有效果。

2.  就像我在`-viewDidLoad`, add中所做的一样`self.allEntries = [NSMutableArray array]`，但我不知道我应该把这条线放在哪里。

有没有人可以给我一个方向？

[编辑]
viewDidLoad 中没有太多逻辑，只是

```
 self.allEntries = [NSMutableArray array];
    self.queue = [[NSOperationQueue alloc] init]; //add download&parse operation to a queue 
    self.feeds = [self getFeeds];  //load feeds from local file 
```

我将[self refresh]放在reloadTableViewDataSource中，第一次打开我的应用程序时，tableview中没有任何显示。然后我拉刷新，它的工作原理。然后再次拉动刷新，它被重复了。
这是“刷新”方法。

```
 - (void)refresh {
        for (NSString *feed in _feeds) {
            NSURL *url = [NSURL URLWithString:feed];
            ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
            [request setDelegate:self];
            [_queue addOperation:request];
        }    
    } 
```

我想重建数组，所以我再次编写 self.allEntries = [NSMutableArray array] 但结果是
**“无效更新：第 0 节中的行数无效。更新后现有节中包含的行数 (1) 必须等于更新之前该部分中包含的行数（140）”。**
如前所述，我真的很困惑我应该把这条线放在哪里。
谢谢~~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T11:24:08.293

您在 viewDidLoad 中构建数组的逻辑应移至其自己的方法 (reloadTableViewData)，然后您只需在 viewDidLoad 中调用该方法。

```
[self reloadTableViewData]; 
```

当您执行拉动刷新时，您也可以调用相同的方法。

确保您正在重建该数组，而不仅仅是将对象添加到现有数组。

# php - 是否可以使用 CURL 设置 cookie 内容？

> ID：10570341
> 
> 赞同：16
> 
> 时间：2012-05-13T08:31:05.127
> 
> 标签：php, cookies, curl

我一直在寻找一种方法来指定 CURL 的 cookie 数据。我找到了一些关于如何从访问过的页面保存 cookie 的解决方案，但这不是我需要的。我想要的是，自己为 cookie 编写数据，所以 CURL 使用它。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-13T08:34:42.270

您可以使用[`curl_setopt`](https://www.php.net/manual/en/function.curl-setopt.php)CURLOPT_COOKIE 常量：

```
<?php
// create a new cURL resource
$ch = curl_init();

// cookies to be sent
curl_setopt($ch, CURLOPT_COOKIE, "fruit=apple; colour=red"); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-05-13T08:33:59.453

您真的应该[阅读文档](http://curl.haxx.se/docs/manpage.html)- 它列出了您期望的关键字，并包含许多有用的信息：

> -b, --cookie
> 
> (HTTP) 将数据作为 cookie 传递给 HTTP 服务器。它应该是先前在“Set-Cookie:”行中从服务器接收到的数据。数据应采用“NAME1=VALUE1；NAME2=VALUE2”格式。
> 
> 如果该行中没有使用“=”符号，则将其视为文件名，用于从中读取先前存储的 cookie 行，如果它们匹配，则应在此会话中使用。使用此方法还会激活“cookie 解析器”，这将使 curl 也记录传入的 cookie，如果您将其与 -L、--location 选项结合使用，这可能会很方便。要从中读取 cookie 的文件的文件格式应该是纯 HTTP 标头或 Netscape/Mozilla cookie 文件格式。
> 
> 请注意，使用 -b, --cookie 指定的文件仅用作输入。文件中不会存储任何 cookie。要存储 cookie，请使用 -c、--cookie-jar 选项，或者您甚至可以使用 -D、--dump-header 将 HTTP 标头保存到文件中！
> 
> 如果多次设置此选项，则最后一个将是使用的那个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-13T08:33:38.650

cURL 可以使用[Netscape 格式](http://www.cookiecentral.com/faq/#3.5)的 cookie 文件。只需自己创建这样一个文件并用作`CURLOPT_COOKIEFILE`选项。

# jquery - 使用 jqueryui 将所有可拖动项目一起移动

> ID：10570344
> 
> 赞同：0
> 
> 时间：2012-05-13T08:31:32.370
> 
> 标签：jquery, jquery-ui

我有 9 个 DIV，我将它们都应用于可拖动的。现在我想让它们在其中一个被拖动时以相同的模式移动（好像我正在拖动所有这些）

```
 $(".draggable").draggable({
    drag: function(event,ui){

    //i don't know what to write here, as i don't know what event and ui are.
// an .each will solve the problem if i get to know what these 2 arguments are

    }

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T08:56:10.183

如果你想拖动多个 div 但不是所有容器，你可以看看[这里](https://stackoverflow.com/questions/5677993/how-do-i-drag-multiple-elements-with-javascript-or-jquery)。

# java - Java getAudioInputStream() 符号未找到

> ID：10570345
> 
> 赞同：0
> 
> 时间：2012-05-13T08:31:35.217
> 
> 标签：java

当我单击按钮时，我创建了一个`class`播放声音。

这是代码：

```
public void playSound()
    {
        try 
        {
            AudioInputStream audioInputStream = AudioSystem.getAudioInputStream(new File("beep-1.wav"));
            Clip clip = AudioSystem.getClip( );
            clip.open(audioInputStream);
            clip.start( );
        }
        catch(Exception e)
        {
            System.out.println("Error with playing sound.");
            e.printStackTrace( );
        }
    } 
```

但是当我编译时，我得到了这个错误：

```
error: cannot find symbol
            AudioInputStream audioInputStream = AudioSystem.getAudioInputStream(new File("beep-1.wav"));
                                                                    ^
  symbol:   class File
  location: class MemoryGame
1 error

Process completed. 
```

有什么问题`getAudioInputStream()`？

我`import javax.sound.sampled.*;`在我的程序中使用过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T08:38:53.297

你记得导入`java.io.File`吗？那是编译器说它不知道的类。

# browser - 我可以在 cookie 中存储多少数据

> ID：10570347
> 
> 赞同：13
> 
> 时间：2012-05-13T08:32:10.917
> 
> 标签：browser, cookies, size

现代浏览器对我可以在一个 cookie 中存储多少数据有任何限制吗？

我发现一篇文章说它应该至少保持 4k，但没有上限。 [http://www.faqs.org/rfcs/rfc2965.html](http://www.faqs.org/rfcs/rfc2965.html)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-12-11T15:50:23.587

以下是根据“浏览器 cookie 限制”的限制：

```
Chrome & Firefox - No limit to the number of cookies; limit of 4096 bytes per cookie.

IE8-10 - 5117 characters per cookie; limit of 10234 characters.

Safari on Mac - 4093 bytes per cookie. Limit of 4093 bytes.

Safari Mobile - 4093 bytes per cookie. Limit of 4093 bytes.

Android - 4093 bytes per cookie. No limit. 
```

来源： [http ://browsercookielimits.x64.me/#limits](http://browsercookielimits.x64.me/#limits)

如果你有一个 destkop 应用程序，我会说，如果你有 Mac 用户，则要受到 IE 甚至 Safari 的限制。如果是在手机上，肯定只有 4093 字节。如果您需要更多，您将保存到服务器或为 Safari / IE 和 Firefox / Chrome 用户创建两种不同的体验。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-13T08:39:45.790

为了符合标准，每个 cookie 存储的字节数不应超过 4096 个字节。

值得记住的另一点是，cookie 在每次请求时都会发送到匹配的域，这在 cookie 相当大的情况下是非常显着的开销（上传速度通常比下载速度慢 10 倍）。

至于每个浏览器的具体限制，我听从另一个回应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-09T09:17:08.723

这在这里也很有帮助：

[![在此处输入图像描述](../Images/3d2aa4d3f0eeff262d4800efcc8b0892.png)](https://i.stack.imgur.com/xSjDs.jpg)

# ip - Traceroute如何知道Hops的域名？

> ID：10570348
> 
> 赞同：0
> 
> 时间：2012-05-13T08:32:34.943
> 
> 标签：ip, icmp, traceroute

我正在研究 ICMP 协议和工具**traceroute**。我不明白如果在 ICMP 数据报中只能找到 IP，traceroute 如何查找 Hops 的域名。它是如何工作的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T08:36:02.667

它称为[反向 DNS](http://en.wikipedia.org/wiki/Reverse_DNS_lookup)，基本上与域到 IP 查找相反。

# asp.net - JuiceUI-draggable 如何获取新项目位置？

> ID：10570351
> 
> 赞同：0
> 
> 时间：2012-05-13T08:32:45.797
> 
> 标签：asp.net, asp.net-ajax, juice-ui

我正在尝试将动态添加的面板的新位置（并存储）到我的页面。这些面板附加了 Juice:Draggable 插件。面板 ID 保存在视图状态中以维护一些属性（颜色、大小、...）并且效果很好！

我唯一的问题是单击“保存”按钮时我无法获得新位置。即使使用相同的 id 重新创建面板，当页面重新加载时，它们似乎也没有获得最后一个位置......？

如果不掌握 ajax/javascript（我只知道 asp.net）可以解决这个问题吗？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:46:00.417

我们正在[https://github.com/appendto/juiceui/issues/22](https://github.com/appendto/juiceui/issues/22)上跟踪对此的修复，请关注此问题，并在 Twitter 上关注 @juiceui 以分别获取修复和发布公告。

# c# - 从数据库接收 null 时出错

> ID：10570352
> 
> 赞同：0
> 
> 时间：2012-05-13T08:33:07.420
> 
> 标签：c#, sql-server

当我在我的数据库上执行此命令时，有时会收到 result=null。我想在发生这种情况时输入“其他”部分，但我收到

> mscorlib.dll 中发生了“System.FormatException”类型的未处理异常。附加信息：输入字符串的格式不正确。

```
DB database = new DB();
            int reservedSeats = 0;
            using (database.sqlConnection)
            {
                database.sqlConnection.Open();
                string command = "select SUM(nrLocuri) as result from Rezervari where idRand = @idRand and idShow=@idShow";
                using (SqlCommand cmd = new SqlCommand(command, database.sqlConnection))
                {
                    cmd.Parameters.Add("@idRand", SqlDbType.Int).Value = idRand;
                    cmd.Parameters.Add("@idShow", SqlDbType.Int).Value = idShow;
                    using (SqlDataReader dr = cmd.ExecuteReader())
                    {
                        if (dr.Read())
                            if (dr["result"].ToString() != null)
                                reservedSeats = Convert.ToInt32(dr["result"].ToString());
                            else
                                return totalSeats;
                    }
                }
            }
            return totalSeats-reservedSeats; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T08:34:47.133

代替：

```
if (dr["result"].ToString() != null) 
```

做：

```
if (dr["result"] != DbNull.Value) 
```

当`dr["result"]`返回一个数据库`null`时，它的值为`DbNull.Value`- 当你尝试调用`Convert.ToInt32`这个值时，你会得到一个格式异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T08:38:59.370

尝试：

```
if(!dr.IsDBNull(i)){   //replace i with the column id

  //get the data

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T08:35:44.603

如果您想在未找到记录的情况下`SUM()`返回`0.00`，请将其替换为：

```
COALESCE(SUM(...), 0.00) 
```

COALESCE 将返回传递给它的第一个非空值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-13T08:38:46.120

尝试`isnull`：

```
string command = "select isnull(SUM(nrLocuri),0.00 )as result from Rezervari where idRand = @idRand and idShow=@idShow"; 
```

# java - 如何在opengl中画一个半圆

> ID：10570359
> 
> 赞同：4
> 
> 时间：2012-05-13T08:33:51.363
> 
> 标签：java, javascript, opengl, drawing, jogl

我使用这种方法可以完美地绘制一个完整的圆圈（可能是我从记忆中编写的代码文本中的拼写错误）：

```
drawCircle(GLAutodrawble drawble){
  GL gl = drawble.getGL();
  gl.glTranslatef(0.0f,0.0f,-7.0f);
  gl.glBeginf(GL_LINE_LOOP);
  gl.glColorf(0.0f,0.0f,0.0);
  final dobule  PI = 3.141592654;
  double angle = 0.0;
  int points = 100;
  for(int i =0; i < points;i++){
    angle = 2 * PI * i / points;
    gl.glVertexf((float)Math.cos(angle),(float)Math.sin(angle));
  }
  gl.glScalef(1.0f,1.0f,0.0f);
  gl.glEnd();
} 
```

我想使用相同的原理来制作半圆的方法，我不知道应该如何处理 cos sin 的东西。任何人都可以看看并帮助我。

感谢所有关注问题的人！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T08:40:52.657

代替 ：

```
angle = 2 * PI * i / points; 
```

和 ：

```
angle = PI * i / points; 
```

请注意，我删除了 2 乘数，因为 2*PI 是 360（以度为单位），这是一个完整的圆。PI（180度）是半圆

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T08:41:04.777

更改此行：

```
angle = 2 * PI * i / points; 
```

对此：

```
angle = 1 * PI * i / points; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T06:15:44.113

画圆就像画一条线，将它们连接起来。并且这些点应该太靠近彼此以创建平滑的曲线。您可以使用以下代码在opengl中绘制一个半圆。

```
 float PI = 3.14
 float step=5.0;// How far is the next point i.e it should be small value
 glBegin(GL_LINE_STRIP)
 for(float angle=0.0f,angle<=180; angle+=step)
 {
    float rad  = PI*angle/180;
   x  = centerX+radius*cos(rad);
   y  = centerY+radius*sin(rad);
   glVertex(x,y,0.0f);

}
glEnd(); 
```

# android - 什么情况下会在Android中重复调用View的onDraw方法？

> ID：10570366
> 
> 赞同：0
> 
> 时间：2012-05-13T08:35:05.333
> 
> 标签：android

我自己实现了一个视图，视图的onDraw方法被反复调用。这将导致严重的性能问题。代码太复杂了，这里就不贴了。谁能告诉我一些可能的原因？我没有用手指触摸视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T08:40:25.163

一个原因是您的`onDraw`方法正在调用某些（可能是间接地）使视图无效的方法。另一种可能性是你的程序中完全不相关的东西导致了重绘。试试这个实验：注释掉你的绘图代码并替换一些非常简单的东西，比如简单的线条画，只是为了表明它正在工作。如果重复的绘图消失了，那么它就是你的`onDraw`代码中的东西。只需开始一次恢复当前代码，直到问题再次出现，然后您就可以追踪它。

如果在您尝试实验时问题没有消失，那么在您的代码中的其他地方查找使您的视图无效的东西（可能是工作线程？）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T19:51:47.383

我今天遇到了同样的问题。我通过覆盖`invalidate()`我的 View 子类来解决它：

```
@Override
void invalidate() {
    super.invalidate();
} 
```

然后我在里面设置了一个断点`invalidate()`，等待它命中。当它发生时，我有一个调用的堆栈跟踪，以及有问题的调用者。2分钟内解开谜团。

如果这不起作用，请尝试覆盖 View 中的其他无效方法。

# java - java PDFPrint 和 PrintJobListener 总是返回 printJobNoMoreEvents

> ID：10570370
> 
> 赞同：2
> 
> 时间：2012-05-13T08:35:47.947
> 
> 标签：java, pdf, printing

这是我用于打印 pdf 文件并在执行打印时获取它的事件的代码。我的问题是它总是进入`printJobNoMoreEvents`而不是进入`printJobCompleted`. 可能是什么问题？我该如何解决这个问题？是否可以从`printJobNoMoreEvents`活动中检查工作是否已完成？

这是我的代码：

```
import com.qoppa.pdfPrint.PDFPrint;
import java.awt.print.PrinterJob;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.print.DocFlavor;
import javax.print.DocPrintJob;
import javax.print.PrintService;
import javax.print.SimpleDoc;
import javax.print.event.PrintJobEvent;
import javax.print.event.PrintJobListener;

public class PdfPrint implements PrintJobListener{

public static void main(String[] args) {
    try 
    {           
        // Create a printer job and get its PrintService
        PrinterJob pJob = PrinterJob.getPrinterJob();
        PrintService ps = pJob.getPrintService();

        // Load the PDF document and create SimpleDoc from it
        PDFPrint pdfPrint = new PDFPrint("C:\\temp\\file printing 1.pdf", null);
        SimpleDoc printDoc = new SimpleDoc(pdfPrint, DocFlavor.SERVICE_FORMATTED.PRINTABLE, null);

        // Get a doc print job from the service and set the listener and Printable 
        DocPrintJob docPrint = ps.createPrintJob();
        docPrint.addPrintJobListener(new PdfPrint());
        docPrint.print(printDoc, null);            

    }
    catch (Exception ex) 
    {
        Logger.getLogger(PdfPrint.class.getName()).log(Level.SEVERE, null, ex);
    }
}

@Override
public void printDataTransferCompleted(PrintJobEvent pje) {
    System.out.println("printDataTransferCompleted");
}

@Override
public void printJobCompleted(PrintJobEvent pje) {
    System.out.println("printJobCompleted");
}

@Override
public void printJobFailed(PrintJobEvent pje) {
    System.out.println("printJobFailed");
}

@Override
public void printJobCanceled(PrintJobEvent pje) {
    System.out.println("printJobCanceled");
}

@Override
public void printJobNoMoreEvents(PrintJobEvent pje) {
    System.out.println("printJobNoMoreEvents");
}

@Override
public void printJobRequiresAttention(PrintJobEvent pje) {
    System.out.println("printJobRequiresAttention");
} 
```

}

Thakn 提前了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-01-25T08:40:26.257

1）设置打印机服务改变这个

```
PrintService ps = pJob.getPrintService();
PrinterJob pJob = PrinterJob.getPrinterJob(); 
```

对此

```
PrintService ps = PrintServiceLookup.lookupDefaultPrintService(); 
```

当我从 PrintJob 类尝试 .getPrintService() 时，它只有 printDataTransferCompleted 和 printJobNoMoreEvents，它没有将 pdf 打印到打印机。

方法事件监听器说明：

> printDataTransferCompleted() 数据已成功从客户端传输到打印服务。
> 
> printJobNoMoreEvents() 此打印作业将不再调用此接口中的任何方法。
> 
> printJobCompleted() 作业已完成。

然后我尝试 PrintServiceLookup.lookupDefaultPrintService() 来获取默认打印机，它将使用 printJobCompleted 打印 pdf。

2) 要加载 PDF 文档，可以使用这个

```
 String filename = "C:\\temp\\file printing 1.pdf";
    DocFlavor flavor = DocFlavor.INPUT_STREAM.AUTOSENSE;
    FileInputStream fis = null;
    fis = new FileInputStream(filename);
    Doc printDoc = new SimpleDoc(fis, flavor, null); 
```

不需要使用qoppa

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-13T08:50:10.057

代码是标准 JPS，除了 qoppa 调用是他们的自定义组件。你问过qoppa吗？

# java - 获取来电显示

> ID：10570375
> 
> 赞同：0
> 
> 时间：2012-05-13T08:36:50.353
> 
> 标签：java, android

我正在尝试制作将记录我的来电和去电的应用程序，问题是我似乎无法使用此代码来返回呼叫者 ID（如姓名和姓氏），但它总是返回“未知”

```
public String getname(String num,String nbc ){
String namer="";
 ContentResolver cr = getContentResolver();
 Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,
        null, null, null, null);

 try {
  if (cur.getCount() > 0) {
     while (cur.moveToNext()) {
           String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
           String name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
            Log.i("",name);

           if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
                System.out.println("name : " + name + ", ID : " + id);

               // get the phone number

               Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,
                                      ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?",
                                      new String[]{id}, null);
               while (pCur.moveToNext()) {

                     String phone = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

                     System.out.println("phone" + phone);
                     if(phone==nbc||phone==num)
                    {
                         namer = name;
                         return namer;
                    }                        

               }
               pCur.close();
           }

     }       
 }
 }
 catch (Exception e) {
    // TODO: handle exception
}

     return namer; 
```

}

它不执行 this( `if(phone==nbc||phone==num)`) 部分。

您能否告诉我有什么问题或其他方法可以做到这一点，或者至少指出我正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T08:42:25.090

用来`equals`比较`Strings`

```
if(phone.equals(nbc)||phone.equals(num)) 
```

# ruby-on-rails - 为什么我的中间件会泄漏内存？

> ID：10570378
> 
> 赞同：3
> 
> 时间：2012-05-13T08:37:28.493
> 
> 标签：ruby-on-rails, ruby, multithreading, memory-leaks, rack

我已经分叉了[rack-timeout gem](https://github.com/kch/rack-timeout)，所以我可以添加一些功能——即，捕捉超时事件，记录它们，并发送 503。

[这是我的叉子](https://github.com/ganxy/rack-timeout)。

[这是我 fork 中的 Rack 应用程序/中间件](https://github.com/ganxy/rack-timeout/blob/master/lib/rack/timeout.rb#L1)。

行为符合预期。但是，自部署以来，我的应用程序的内存占用量不断增长，直到我不得不重新启动它。在它成长的同时，它的行为是正确的，它的表现看起来很正常。

当我第一次注意到这一点时，我认为这可能是因为在请求确实消失的情况下，一些线程/内存一直在徘徊。这一系列的实验导致了[这个补丁](https://github.com/ganxy/rack-timeout/commit/a2fec98440d183c7b1a1040d51fd541a74632896)。事实上，在我的本地测试中，如果没有这个补丁，当应用程序遇到（故意）超时请求时，内存会稳定增长，而有了这个补丁，内存就会保持在低水平和正常状态。

所以，我以为我解决了这个问题。但我没有——我的生产应用程序的内存仍在不断增长。（我还没有尝试在生产模式下本地测试我的应用程序——接下来我会这样做）。

什么可能导致我的 Rack 应用程序中的内存泄漏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-10T15:27:29.593

您的 Timeout 类中有一个 lambda，它是一个闭包。由于不需要它，我将只定义一个方法。不确定这是否是原因，但这绝对是内存泄漏的可能原因。

# android - 是否可以直接从 SQLite 读取联系人列表

> ID：10570385
> 
> 赞同：2
> 
> 时间：2012-05-13T08:39:20.720
> 
> 标签：android, sqlite

我想在不使用意图或内容提供者的情况下阅读联系人列表，我的意思是直接与 SQLite 通信。

有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T08:50:09.643

不，出于安全原因，您需要通过内容提供商。只有拥有数据库的应用程序（或者，在这种情况下，Android 操作系统）被允许读取它（除非它存储在共享内存中，默认联系人数据库不是这种情况）。

# php - 如何对从此数据库获得的结果进行 php 分页

> ID：10570388
> 
> 赞同：0
> 
> 时间：2012-05-13T08:39:39.847
> 
> 标签：php, mysql, pagination

我是php的初学者。我在我的 html 页面中可视化了使用此 php 代码获得的结果，现在我想对结果进行分页并将您的搜索限制为每页 6 个项目。我怎样才能得到这个？我的php代码如下：

```
<?php
$k = $_GET['k'];
$terms = explode(" ", $k);
$query = "SELECT * FROM table_name WHERE ";

$i = 0;
foreach ($terms as $each){
    $i++;
    if ($i == 1)
        $query .= "keywords LIKE '%$each%' ";
    else
        $query .= "OR keywords LIKE '%$each%' ";
}

// connect
mysql_connect("hostname","databaseUser","databasePassword");
mysql_select_db("databaseName");

$query = mysql_query($query);
$numrows = mysql_num_rows($query);

echo "<p><strong>Totale: {$numrows} risultati trovati</strong></p></br>";

if ($numrows > 0){

    while ($row = mysql_fetch_assoc($query)){
    $id = $row['id'];
    $title = $row['title'];
    $description = $row['description'];
    $keywords = $row['keywords'];
    $link = $row['link'];
    $date = $row['date'];
    $caption = $row['caption'];

    echo "<h4><a href='$link'>$title</a></h4>";
    echo "<em>$description</em></br></br>";
    echo "$caption</br>";
    echo "$link</br></br>";
    echo "<em>$date</em></br></br>";

    }

}
else
    echo "NO result found  for \"<p><strong>$k</strong></p>\"";

// disconnect
mysql_close(); 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T08:50:51.060

您需要在代码中添加一个页面变量。最简单的方法是通过 $_GET，就像你抓取关键字一样，所以你的 url 应该看起来像这样：

```
foo.php?k=keywords%20here&p=1 
```

其中 p 是当前页码。

然后你只需要在你的搜索结果中添加一个限制，这样你就只能抓住 6 个，然后是正确的 6 个。像这样的东西：

```
$query .= ' LIMIT '.(6*($pageNum - 1)).' 6'; 
```

该语句告诉 SQL 从给定页面的第一个条目开始，并获取 6 个结果。我们从页码中减去 1，以便第 1 页从条目 0 而不是条目 6 开始。

这段代码的结果：

```
page | statement  | Rows Grabbed
---------------------------------
1    | LIMIT 0 6  | 1-6
2    | LIMIT 6 6  | 7-12
3    | LIMIT 12 6 | 13-18
---------------------------------
and so on... 
```

您可能需要在将 $_GET['p'] 放入 $pageNum 之前检查它是否为整数，这样您就不会在尝试将字符串乘以 6 时遇到运行时问题。

如果您想更改每页的结果，只需将该语句中的 6 替换为所需的每页结果数，例如

```
$query .= ' LIMIT '.($numResults*($pageNum - 1)).' '.$numResults; 
```

这样你就可以用另一个变量设置你想要的结果数量，比如 $_GET['n'] 或类似的东西，并且有更好的控制。

编辑：

您可能应该添加错误检查：

```
$pageNum = (is_numeric($_GET['p']) ? intval($_GET['p']) : 1); 
```

它表示如果 GET[p] 是数字，则将 pageNum 设置为 GET[p] 的整数值。否则，将 pageNum 设置为 1。

此外，您将变量放入字符串的方式存在一些错误。有两种方法可以将变量连接到字符串中，您可以使用双引号和花括号，如下所示：

```
$string = "this string has {$variable} in it"; 
```

或者您可以使用单引号或双引号连接句点，如下所示：

```
$string = 'this string has ' . $variable . " in it"; 
```

当您附加查询时，您的 foreach 循环中存在此问题，并且在您输出结果的位置更远。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T08:57:20.033

分页是我们大多数人多年来一直试图解决的问题。

您可以构建自己的库来执行此操作，但您几乎肯定会重新发明轮子，并且可能无法发现/处理某些特殊情况。

如果您使用的是框架，我建议您使用内置的分页器，否则您可以考虑使用类似[http://pear.php.net/package/Pager](http://pear.php.net/package/Pager)的 PEAR 包。

# java - 接收表单数据

> ID：10570390
> 
> 赞同：1
> 
> 时间：2012-05-13T08:39:55.883
> 
> 标签：java, eclipse-rcp

我使用 Eclipse RCP。我创建了一个表单（ViewPart），这个表单没有提交按钮。在另一种形式中，我有一个文本区域和一个按钮。当按下这个按钮时，我需要来自第一个表单的数据来创建一个对象。如何在不手动读取所有字段并填充某些对象的字段的情况下自动检索表单数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T09:12:13.530

查看数据绑定，这正是它所做的事情，将控件与对象字段/属性相匹配。还要考虑 EditorPart 而不是 ViewPart。

以下是数据绑定的一些链接（称为 JFace 数据绑定）：

[http://wiki.eclipse.org/index.php/JFace_Data_Binding](http://wiki.eclipse.org/index.php/JFace_Data_Binding)

[http://wiki.eclipse.org/JFace_Data_Binding/Snippets](http://wiki.eclipse.org/JFace_Data_Binding/Snippets)

[http://www.eclipse.org/resources/resource.php?id=437](http://www.eclipse.org/resources/resource.php?id=437)

这应该让你开始。不幸的是，我自己从未使用过它，我只是看到了它的例子。

# http - spdy.node.js：我刚开始 324 (ERR_EMPTY_RESPONSE)

> ID：10570391
> 
> 赞同：0
> 
> 时间：2012-05-13T08:40:21.920
> 
> 标签：http, node.js, networking, spdy, server-response

我只是想使用节点包“node-spdy”来试用 SPDY。

**我的JavaScript：**

***编辑：***现在脚本包含有关证书的信息。我从 twitlog 测试应用程序中获取它们。

```
var spdy = require('spdy'),
    fs = require('fs');

var options = {
    key: fs.readFileSync(__dirname + '/keys/spdy-key.pem'),
    cert: fs.readFileSync(__dirname + '/keys/spdy-cert.pem'),
    ca: fs.readFileSync(__dirname + '/keys/spdy-csr.pem')
};

var spdy = require('spdy');

var server = spdy.createServer({}, function(req, res) {
    console.log('Send response...');
    res.writeHead(200, {
        "Content-Type": "text/plain"
    });
    res.write("Hello World!\n");
    res.end();
    console.log('Response has been sended.');
});

server.listen(3000); 
```

**我的问题：**永远不会执行回调函数，节点永远不会记录“发送响应...”或“响应已发送。”。我只是得到一个空响应，但 node.js 没有抛出异常：

> 费勒 324 (net::ERR_EMPTY_RESPONSE)

**我的服务器端配置：**我在 Windows Se7en 下使用[node.js](http://nodejs.org/)（版本 0.7.6）和[node-spdy](https://github.com/indutny/node-spdy)（commit ）。`eafd9c9fdd`

**我的客户端配置：**我使用 chromium 构建作为浏览器来测试 spdy。~~在我的测试期间，我不使用 SSL，所以我不得不更改我的配置。~~这就是你可以在下面找到的`about:net-internals/#spdy`：

```
==SPDY Status==

SPDY Enabled:               true
Use Alternate Protocol:     false
Force SPDY Always:          true
Force SPDY Over SSL:        false
Next Protocols: 
```

**我的客户端调试内容：**铬调试服务`about:net-internals/#tests`告诉我：

```
Result  Experiment                      Error                   Time (ms)
FAIL    Fetch http://localhost:3000/
        Don't use any proxy             EMPTY_RESPONSE (-324)   3022

        Fetch http://localhost:3000/
        Use system proxy settings       ?                       ? 
```

***编辑：***由于我添加了证书信息，客户端调试信息发生了一些变化。这是最新的：

```
Result  Experiment                      Error                   Time (ms)
FAIL    Fetch https://localhost:3000/
        Don't use any proxy             ABORTED (-3)            9

FAIL    Fetch https://localhost:3000/
        Use system proxy settings       ABORTED (-3)            300489

FAIL    Fetch https://localhost:3000/
        Use Firefox's proxy settings    ABORTED (-3)            4

FAIL    Fetch https://localhost:3000/
        Use system proxy settings       ABORTED (-3)            300438 
```

**我的服务器端调试内容：**这就是我收到请求时内置节点调试器告诉我的内容：

***编辑：***即使我将证书信息添加到脚本中，服务器端调试内容也不会改变。

```
debug>n
break in net.js:865
 863
 864 function onconnection(clientHandle) {
 865   var handle = this;
 866   var self = handle.socket;
 867
debug>
break in net.js:866
 864 function onconnection(clientHandle) {
 865   var handle = this;
 866   var self = handle.socket;
 867
 868   debug('onconnection');
debug>
break in net.js:868
 866   var self = handle.socket;
 867
 868   debug('onconnection');
 869
 870   if (!clientHandle) {
debug>
break in net.js:870
 868   debug('onconnection');
 869
 870   if (!clientHandle) {
 871     self.emit('error', errnoException(errno, 'accept'));
 872     return;
debug>
break in net.js:875
 873   }
 874
 875   if (self.maxConnections && self.connections >= self.maxConnections) {
 876     clientHandle.close();
 877     return;
debug>
break in net.js:880
 878   }
 879
 880   var socket = new Socket({
 881     handle: clientHandle,
 882     allowHalfOpen: self.allowHalfOpen
debug>
break in net.js:884
 882     allowHalfOpen: self.allowHalfOpen
 883   });
 884   socket.readable = socket.writable = true;
 885
 886   socket.resume();
debug>
break in net.js:886
 884   socket.readable = socket.writable = true;
 885
 886   socket.resume();
 887
 888   self.connections++;
debug>
break in net.js:888
 886   socket.resume();
 887
 888   self.connections++;
 889   socket.server = self;
 890
debug>
break in net.js:889
 887
 888   self.connections++;
 889   socket.server = self;
 890
 891   ;
debug>
break in net.js:892
 890
 891   ;
 892   self.emit('connection', socket);
 893   socket.emit('connect');
 894 }
debug>
break in net.js:893
 891   ;
 892   self.emit('connection', socket);
 893   socket.emit('connect');
 894 }
 895
debug>
break in net.js:894
 892   self.emit('connection', socket);
 893   socket.emit('connect');
 894 }
 895
 896
debug> 
```

**我的问题：**我只想使用 SPDY 向客户端返回一条简单的短信。如何使用 node.js 做到这一点？- 如果您需要更多详细信息，请告诉我。感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T20:07:12.723

ERR_EMPTY_RESPONSE 表示 Chromium 能够连接到套接字，但收到一个空响应。这很可能指向服务器配置问题，尤其是因为从未调用过回调。Chris Strom（node-spdy 作者）可能很乐意在这里为您提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T19:33:29.857

重新打开 SSL。没有它，SPDY 将无法工作。

# java - 将一个类中创建的对象访问到另一个类中

> ID：10570393
> 
> 赞同：5
> 
> 时间：2012-05-13T08:40:26.273
> 
> 标签：java, class, object

我有一个初级课程如下：

```
public class classB{

  public classC getObject(String getstring){
     return new classC(getstring);
    }
} 
```

有`classC`一个构造函数：

```
public class classC{

 String string;

 public classC(String s){
  this.string = s;
 }

 public methodC(int i){
   <using the `string` variable here>
 }
} 
```

现在我有一个`classA`将使用在`classB`其中创建的对象（当然是 的一个实例`classC`）。

```
public classA{
  int a = 0.5;

  <Get the object that was created in classB>.methodC(a);

} 
```

这是必需的，因为在用户的某些操作上创建了一个变量并存储在`classB`其中，这将在`classC`'s 方法中进一步使用。创建一个新对象会将我的变量`classB`设置为 null，这不是预期的。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T22:56:58.143

假设它`Brand`是一个轻量级对象并且`Run`是重量级的，那么为轻量级对象创建一个带有容器的字段并将其隐藏是一个好主意。

但是`Brand`访问它所属的容器的需求可以通过映射来完成，但我们只是将其注入到容器中，`Run`因此最好用 JSR330`Brand`实现或注释它。并通过正常方式`Runable`访问容器。`Run`

```
class MainClass {
  public static void main(String[] args) {
    Run r = new Run();
  }
}

class Run {
  private Container con1 = new Container();

  public Run() {
    Brand cola = new Brand("Coca Cola");
    Brand pepsi = new Brand("Pepsi");

    // Creates the container object "con1" and adds brands to container.
    add(cola);
    add(pepsi);
  }
  public void add(Brand b){
    con1.addToList(b);
    b.setRun(this);
  }

  public Container getContainer() {
    return con1;
  }
}

class Brand {
  // In this class I have a method which needs to accsess the con1 object
// containing all the brands and I need to access the method
  private String name;
  private Run run;

  public Brand(String name){
    this.name = name;

  }
  public void brandMethod() {
    if(getRun().getContainer().methodExample()) {        // Error here. Can't find "con1".**
      System.out.println("Method example returned true.");
    }
  }

  public Run getRun() {
    return run;
  }

  public void setRun(Run run) {
    this.run = run;
  }
}

class Container {
  // This class is a container-list containing all brands brands
  private ArrayList<Object> list = new ArrayList<Object>();

  public boolean methodExample(){
    return false;
  }

  public void addToList(Object o) {
    list.add(o);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-23T16:02:18.537

如果要获取在 classB 中创建的对象，则应使用静态字段

```
public class classB {

  public static objectCReference;

  public classC getObject(String getstring){
     objectCReference =  new classC(getstring);
     return objectCReference;
  }
} 
```

然后您可以访问 A 中的引用

```
public classA {
  int a = 0.5;

  if (classB.objectCReference != null) { // Make sure to null check 
    classB.objectCReference.methodC(a); 
  }

} 
```

还请遵循语言约定，并以大写字母开头您的班级名称。

# java - java.lang.Object 的源代码

> ID：10570394
> 
> 赞同：1
> 
> 时间：2012-05-13T08:40:27.723
> 
> 标签：java

是否有任何网站可以让我看到 Java 标准库的源代码？最重要的是两个类 java.lang.* 和 java.net.* ??

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T08:43:01.467

请安装Java JDK（Java Developer Kit），它与Java JRE（Java Runtime Environment）不同。

Java JDK 包含 Java 源代码。

并且您最好使用 IDE（集成开发环境）如 Eclipse 或 NetBeans 来开发 Java 程序。

您可以通过 IDE 工具查找 java 代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T08:45:09.327

当然。您可以在 JDK 中找到它，也可以在网上找到它。我也使用在线版本，因为我发现用JDK打开文件夹，浏览所有文件等更快。只需谷歌“java源对象”。

[http://www.docjar.com/html/api/java/lang/Object.java.html](http://www.docjar.com/html/api/java/lang/Object.java.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T08:44:55.797

您需要安装 JDK (JAVA SDK) 并且类库的源位于（在 Windows 上）：

```
C:\<Program Files>\Java\<JDK>\src.zip 
```

喜欢

```
C:\Program Files\Java\jdk1.7.0\src.zip 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T08:46:35.333

Java 源代码在 JDK 发行版中可用。如果你已经在你的机器上安装了 JDK，你会在 JDK 目录中找到**src.zip**。例如，在我的 Windows 机器中，源代码位于：**C:\Program Files\Java\jdk1.6.0_12**。

或者，您可以在线查找 Java 源代码：[Java 源代码](http://grepcode.com/project/repository.grepcode.com/java/root/jdk/openjdk/)

谢谢， Mrityunjoy

# html - 带有变量组合的 SCSS 中的 For 循环

> ID：10570400
> 
> 赞同：35
> 
> 时间：2012-05-13T08:41:34.097
> 
> 标签：html, css, sass

我有一堆元素：（#cp1，#cp2，#cp3，#cp4）

我想为使用 SCSS 添加背景颜色。

我的代码是：

```
$colour1: rgb(255,255,255); // white
$colour2: rgb(255,0,0); // red
$colour3: rgb(135,206,250); // sky blue
$colour4: rgb(255,255,0);   // yellow

@for $i from 1 through 4 {
    #cp#{i} {
        background-color: rgba($(colour#{i}), 0.6);

        &:hover {
            background-color: rgba($(colour#{i}), 1);
            cursor: pointer;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-05-27T22:46:35.893

`nth`您可以创建一个列表并使用该方法获取值，而不是使用插值生成变量名称。*正如hopper*`#{$i}`所提到的，为了使插值工作，语法应该是。

 *```
$colour1: rgb(255,255,255); // white
$colour2: rgb(255,0,0); // red
$colour3: rgb(135,206,250); // sky blue
$colour4: rgb(255,255,0);   // yellow

$colors: $colour1, $colour2, $colour3, $colour4;

@for $i from 1 through length($colors) {
    #cp#{$i} {
        background-color: rgba(nth($colors, $i), 0.6);

        &:hover {
            background-color: rgba(nth($colors, $i), 1);
            cursor: pointer;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-12-03T09:35:14.410

正如@hopper 所说，主要问题是您没有在插值变量前面加上美元符号，因此他的答案应该被标记为正确，但我想添加一个提示。

**对于这种特定情况，请使用`@each`规则而不是`@for`循环**。原因：

*   你不需要知道列表的长度
*   您不需要使用`length()`函数来计算列表的长度
*   您不需要使用 nth() 函数
*   `@each`规则比`@for`指令更语义化

编码：

```
$colours: rgb(255,255,255), // white
          rgb(255,0,0),     // red
          rgb(135,206,250), // sky blue
          rgb(255,255,0);   // yellow

@each $colour in $colours {
    #cp#{$colour} {
        background-color: rgba($colour, 0.6);

        &:hover {
            background-color: rgba($colour, 1);
            cursor: pointer;
        }
    }
} 
```

或者，如果您愿意，可以在 @each 指令中包含每个 $colour 而不是声明 $colors 变量：

```
$colour1: rgb(255,255,255); // white
$colour2: rgb(255,0,0);     // red
$colour3: rgb(135,206,250); // sky blue
$colour4: rgb(255,255,0);   // yellow

@each $colour in $colour1, $colour2, $colour3, $colour4 {
    #cp#{$colour} {
        background-color: rgba($colour, 0.6);

        &:hover {
            background-color: rgba($colour, 1);
            cursor: pointer;
        }
    }
} 
```

[`@each`指令的 Sass 参考](http://sass-lang.com/documentation/file.SASS_REFERENCE.html#each-directive)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-05-13T16:57:58.933

SASS 变量仍然需要在插值中以美元符号为前缀，因此您拥有的每个地方都`#{i}`应该是`#{$i}`. 您可以在 SASS 参考中看到关于[插值](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#interpolation_)的其他示例。*

# android - 如何伪造短信系统通知？

> ID：10570408
> 
> 赞同：0
> 
> 时间：2012-05-13T08:43:07.130
> 
> 标签：android

大家好，我有一个问题...我正在尝试制作我的短信伪造应用程序，我可以将假短信插入收件箱，但我无法触发有关新短信的通知...任何人都知道我该如何触发它?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T19:39:41.073

[http://developer.android.com/guide/topics/ui/notifiers/notifications.html](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)

当您阅读本文时，这很容易

# plone - 需要 Plone 4 更智能的通用设置更新

> ID：10570416
> 
> 赞同：3
> 
> 时间：2012-05-13T08:44:27.367
> 
> 标签：plone, policy, genericsetup

问题的核心是 GenericSetup 配置文件是附加的。有时产品不能通过简单的应用配置文件升级，整个配置文件链需要按照一定的顺序应用。

例如，假设我们有很多独立的站点策略（其中只有一个应用于 plone 实例）：S1、S2、....、SN。还有一些产品，比如 A 和 B。例如，所有这些 S1-SN、A 和 B 都具有元数据依赖关系，如下所示：Sn -> A -> B

假设他们处理registry.xml 并在此过程中覆盖某些内容。（typeinfo 和其他一些配置文件步骤也是如此）。如果产品 A 发生了一些变化，在 S1 中可能会或可能不会被覆盖，我们不能只为 A 执行升级步骤，因为当我们按下 S1 站点上的按钮时，它自己的策略覆盖将丢失。但是，仅仅因为 A.

**至少对于上面描述的情况，是否有任何聪明的方法来进行升级，当整个问题可以通过按特定顺序应用注册表更新来解决时，即：B、A、Sn。（即使那样，可能会有一些困难的情况）？**

由于包 A 不知道 S1（或 S2 或任何站点策略），一种解决方案是制作一些“超级包”，它可以明确了解这些升级链。**但是，除了始终将生成的配置文件放入策略之外，还有其他解决方案吗？**

*（为简单起见，让我们忘记一些更改可以通过网络完成）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:47:24.303

这实际上已经在 GS 中，尽管不幸的是，并非所有产品都使用它。解决方案在于使用 GS 的`upgradeStep`.

假设您将配置文件的元数据从版本 1 更改为 2。在您的 zcml 中，您注册一个升级步骤，如下所示：

```
 <genericsetup:upgradeStep
      title="Upgrade myproduct from revision 1 to 2"
      description=""
      source="1"
      destination="2"
      handler="myproduct.one_to_two.upgrade"
      sortkey="1"
      profile="myproduct:default"
      /> 
```

在`one_to_two.py`你会有

```
def upgrade(context):
    registry = getUtility(IRegistry)
    if 'foo' in registry:
        do_stuff() 
```

在那里，您还可以重新运行特定的导入步骤，例如：

```
context.runImportStepFromProfile('profile-myproduct:default','actions') 
```

升级产品时，*只会*应用升级步骤处理程序中指定的内容，这正是您所需要的。

[关于这里](http://collective-docs.readthedocs.org/en/latest/components/genericsetup.html#upgrade-steps)的所有文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T07:54:16.117

决定使用自定义解决方案，具有帮助功能，使常见的升级任务更容易。不能解决所有问题，但有助于部署。

# arduino - Arduino输入波动

> ID：10570423
> 
> 赞同：2
> 
> 时间：2012-05-13T08:45:13.657
> 
> 标签：arduino

使用以下代码，我得到一个如下所示的日志。这是为什么？

```
int analogPin = 5;
int val = 0;

void setup(void) {
   Serial.begin(9600);
}

void loop(void) {
   val = analogRead(analogPin);
   Serial.print("Analog reading = ");
   Serial.println(val);   
} 
```

结果：

```
Analog reading = 998
Analog reading = 981
Analog reading = 511
Analog reading = 159
Analog reading = 24
Analog reading = 108
Analog reading = 439
Analog reading = 946
Analog reading = 1023
Analog reading = 420
Analog reading = 116
Analog reading = 25
Analog reading = 151
Analog reading = 542
Analog reading = 997
Analog reading = 982
Analog reading = 513
Analog reading = 161
Analog reading = 25
Analog reading = 107
Analog reading = 437
Analog reading = 945
Analog reading = 1023
Analog reading = 421
Analog reading = 117
Analog reading = 25
Analog reading = 150
Analog reading = 541
Analog reading = 997
Analog reading = 983
Analog reading = 515
Analog reading = 162
Analog reading = 25
Analog reading = 107
Analog reading = 437
Analog reading = 945
Analog reading = 1023
Analog reading = 422
Analog reading = 117
Analog reading = 25
Analog reading = 149
Analog reading = 540
Analog reading = 997
Analog reading = 983
Analog reading = 516
Analog reading = 162
Analog reading = 25
Analog reading = 107
Analog reading = 436
Analog reading = 945
Analog reading = 1023
Analog reading = 422
Analog reading = 117
Analog reading = 25
Analog reading = 150
Analog reading = 540
Analog reading = 998
Analog reading = 982
Analog reading = 516
Analog reading = 162
Analog reading = 25
Analog reading = 108
Analog reading = 437 
```

结果只是噪音吗？

一旦我插入电缆，我就会看到以下模式：

```
Analog reading = 0
Analog reading = 0
Analog reading = 0
Analog reading = 0
Analog reading = 0
Analog reading = 0
Analog reading = 0
Analog reading = 0
Analog reading = 0
Analog reading = 72
Analog reading = 447
Analog reading = 1023
Analog reading = 1023
Analog reading = 0
Analog reading = 0
Analog reading = 0
Analog reading = 0
Analog reading = 0
Analog reading = 0
Analog reading = 0
Analog reading = 0
Analog reading = 0
Analog reading = 118
Analog reading = 849
Analog reading = 1023
Analog reading = 835
Analog reading = 0
Analog reading = 0
Analog reading = 0
Analog reading = 0
Analog reading = 0
Analog reading = 0
Analog reading = 0
Analog reading = 0
Analog reading = 40
Analog reading = 401
Analog reading = 1023
Analog reading = 1023
Analog reading = 0
Analog reading = 0
Analog reading = 0
Analog reading = 0
Analog reading = 0
Analog reading = 0
Analog reading = 0
Analog reading = 0
Analog reading = 0
Analog reading = 89
Analog reading = 475
Analog reading = 1023
Analog reading = 1023 
```

这是我的心跳还是这样？？？不知道什么会对空引脚产生如此大的影响。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T08:56:02.667

是的，未连接的模拟引脚产生随机噪声是很正常的。从[文档](http://arduino.cc/en/Reference/random)（强调我的）：

> 如果生成的一系列值`random()`不同很重要，则在随后的草图执行中，使用相当随机的输入`randomSeed()`初始化随机数生成器**，例如未连接引脚上的模拟读取（）。**

关于插入电缆时看到的值，它们是否有意义取决于您输入引脚的信号。如果有一些差异，可能值得用示波器查看信号。

另外，请参阅[在没有实际输入的情况下，analogRead 如何读取从 0 到 1023 的振荡值？](http://www.reddit.com/r/arduino/comments/rtylu/how_come_analogread_reads_oscillating_values_from/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T07:06:52.280

它是一个浮动输入。如果引脚未连接到任何东西或直接连接到 5V 电源。arduino [Button 教程](http://arduino.cc/it/Tutorial/Button)对此做了一些解释。有关更多详细信息，请查看维基百科[上拉电阻页面](http://en.wikipedia.org/wiki/Pull-up_resistor)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-02T20:56:25.597

我有 PPG 传感器板和 Arduino Mega。我在我的工具包上试过你的代码。当 PPG 传感器板检测到我的心率时，它开始全为零。让我解释一下串行监视器的输出。首先到处都是0。我的心率被检测到。现在不是0。相反，它充满了数字。这些不仅仅是噪音。这些是我现在的噪音+真实心率数字。我猜，Arduino 在其检测频率处显示图形峰值。

# android - Android：当它不存在时启动新活动

> ID：10570424
> 
> 赞同：0
> 
> 时间：2012-05-13T08:45:19.440
> 
> 标签：android

我有一个在前台工作的服务，当主活动启动它时，会使用以下代码启动通知：

```
private void showNotification() {
    Log.i(TAG, LocalService.class.getName() + "showNotification()");
    Intent notificationIntent = new Intent(getApplicationContext(), NotificationActivity.class);
    //notificationIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
    notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
    PendingIntent contentIntent = PendingIntent.getActivity(getApplicationContext(), 0, notificationIntent, 0);

    nm = (NotificationManager) getApplicationContext().getSystemService(Context.NOTIFICATION_SERVICE);
    // Set the icon, scrolling text and timestamp

    int icontouse = R.drawable.icon;
    if (app.prefs.getBoolean("prefs_useprivacyicon", false)) {
        icontouse = R.drawable.icon_privacy;
    }

    n = new Notification(icontouse, getString(R.string.voice_pro_ready), System.currentTimeMillis());

    n.contentView = getRemoteView();
    n.contentIntent = contentIntent;

    startForeground(myID, n);
    nm.notify(myID, n);
} 
```

我的问题是 PendingIntent，如果主要活动处于暂停状态，那么当单击状态栏中的通知时，它会在前面，但是如果主要活动被完成（）关闭，这不会变得可见。

我需要确保如果 Activity 在内存中变得可见，如果在内存中不可用，则启动一个新实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T08:49:01.890

```
notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP); 
```

变成 `notificationIntent.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP)`

再试一次

# c++ - 使用“>>”从文件中读取

> ID：10570425
> 
> 赞同：1
> 
> 时间：2012-05-13T08:45:19.537
> 
> 标签：c++, file

我有以下人员档案：

```
Name 0744112233 ASD 
```

和下面的一段代码

```
const string InFilePersonRepository::PFILE = "persons";

void InFilePersonRepository::load() {
        string delim = " ";
        string name, phone, address;
        ifstream fin(PFILE.c_str());
        while (fin.good()){
            fin>>name>>delim>>phone>>delim>>address;
            Person p(name,phone,address);
            persons.push_back(p);
        }
} 
```

读取完成后，name、phone、address的值分别为：name = Name、phone = ASD、address = ""，

如果文件有多行，同样的问题，文件中的第二个字段被跳过。为什么会这样？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T08:49:57.707

`>>`跳过空格，因此不需要`delim`. `fin >> name >> phone >> address`应该做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T08:52:16.370

尝试类似的东西

```
 void InFilePersonRepository::load() {
            string name, phone, address;
            ifstream fin(PFILE.c_str());
            while (fin.good()){
                fin>>name>>phone>>address;
                Person p(name,phone,address);
                persons.push_back(p);
            }
    } 
```

# c++ - c++函数不能调用两次

> ID：10570430
> 
> 赞同：-1
> 
> 时间：2012-05-13T08:46:28.193
> 
> 标签：c++, function

我有这个代码。从主函数中，我两次调用了 sportPrisevinners 函数，如果它是第一次调用此函数，它可以正常工作并且我收到正确的结果，但是当我第二次调用它时，即使我使用相同的参数传递此函数，我也会收到不正确的结果。请帮我解决这个问题，虽然它不会让我发疯。

```
const char* countries[] = {"ru", "gb", "us", "uk", "ch", "de"};
const int countriesCount = 6;
const char* sports[] = {"runing", "swiming", "baseball", "football", "jumping", "kerling"};
const int sportsCount = 6;

enum {
    Empty = 0,
    Bronse,
    Silver,
    Gold
};

struct member {
    char sport[9];
    char country[3];
    int points;
    int medal;
};

struct members {
    member* list;
    int count;
};

string medalToStr(int medal)
{
    switch (medal) {
    case Gold:
        return "Gold";
    case Silver:
        return "Silver";
    case Bronse:
        return "Bronse";
    default:
        return "Empty";
    }
}

void printMembers(members &list)
{
    for (int i = 0; i < list.count ; i++)
        cout << /*i << " " <<*/ medalToStr(list.list[i].medal) << " in "
             << list.list[i].sport << " with " << list.list[i].points
             << " from " << list.list[i].country << endl;
}

void generate()
{
    ofstream file("members.dat", ios::binary|ios::trunc);

    member temp;

    for (int i = 0; i < sportsCount ; i++)
        for (int j = 0; j < countriesCount ; j++)
        {
            int count = rand()%5+5;
            for (int k = 0; k < count ; k++)
            {
                strcpy(&temp.sport[0], sports[i]);
                strcpy(&temp.country[0], countries[j]);
                temp.points = rand()%100;
                temp.medal = Empty;

                file.write((char*)&temp, sizeof(member));
            }
        }

    file.close();
}

members sportPrisevinners(const char* sport)
{
    //reading
    ifstream file("members.dat", ios::binary);
    member* loaded = new member[60];
    int pos = 0;
    while (!file.eof())
    {
        member temp;

        file.read((char*)&temp, sizeof(member));

        static bool reading = false;
        if (strncmp(&temp.sport[0], sport, strlen(sport))==0) {
            reading = true;
            loaded[pos++] = temp;
        } else if (reading) {
            break;
        }
    }
    file.close();

    //sorting
    int count = 3;
    for (int i = 0; i < pos-1 ; i++)
    {
        for (int j = i+1; j < pos ; j++)
            if (loaded[i].points<loaded[j].points)
            {
                member temp = loaded[i];
                loaded[i] = loaded[j];
                loaded[j] = temp;
            }

        if (i<count) {
            static int last = -1;

            if (loaded[i].points==last)
                count++;

            loaded[i].medal = count-i;
            last = loaded[i].points;
        } else break;
    }

    //returning
    members result;

    result.list = new member[count];
    memcpy(result.list, loaded, count*sizeof(member));
    /*for (int i = 0; i < count; i++)
        result.list[i] = loaded[i];*/
    result.count = count;

    delete[] loaded;

    return result;
}

int main(int /*argc*/, char */*argv*/[])
{
    srand(time(0));

    generate();

    members r = sportPrisevinners(sports[4]);
    printMembers(r);
    delete[] r.list;
    members l = sportPrisevinners(sports[5]);
    printMembers(l);
    delete[] l.list;

    system("pause");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T08:53:24.170

我怀疑这是你函数中的静态局部变量。每次调用函数时它们的值都不相同，这可能会影响结果。这些变量的初始化只执行一次——它们第一次进入作用域时——所以每次调用函数时，你都会获取这些变量上次函数运行时的值。

# c++ - 如何加快非顺序数组填充？

> ID：10570434
> 
> 赞同：2
> 
> 时间：2012-05-13T08:46:41.090
> 
> 标签：c++, arrays, performance

**语境**

我有这样的代码：

```
..
vector<int> values = ..., vector<vector<int>> buckets;
//reserve space for values and each buckets sub-vector
for (int i = 0; i < values.size(); i++) {
  buckets[values[i]].push_back(i);
}
... 
```

所以我得到了一个“桶”，其中包含具有相同值的条目索引。然后在进一步处理中使用这些桶。

实际上，我正在使用本机动态数组 ( `int ** buckets;`)，但为简单起见，我在上面使用了向量。

我在装满之前知道每个桶的大小。

向量的大小约为 2,000,000,000。

**问题**

如您所见，上面的代码以随机方式访问“buckets”数组。因此，它有不断的缓存未命中，从而大大减慢了执行时间。是的，我在个人资料报告中看到了这样的失误。

**问题**

*有没有办法提高此类代码的速度？*

我试图创建一个辅助向量并将第一次出现的值放在那里，因此我可以将两个索引放在相应的存储桶中，因为我找到了第二个。这种方法没有任何加速。

**谢谢！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T08:56:10.723

您为什么假设缓存未命中会使您的代码变慢？你有没有介绍过，或者这就是你想到的？

从性能的角度来看，您的代码有很多问题。第一个也是最明显的一点是你从不保留向量大小。发生的事情是您的向量开始时​​非常小（例如，2 个元素），然后每次添加超过大小时，它都会再次调整大小*并将内容复制到新的内存位置*。如果您说有 20*亿*个条目，那么您可能会调整大小 30 次！

在查看其他改进之前，您*需要*调用该函数`vector.reserve()`（或者`vector.resize()`，取决于最适合您的行为）。

编辑

严重地？你提到你甚至没有在你的 PS 中使用矢量？我们应该如何猜测您的实际代码是什么样的以及它将如何执行？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T09:09:00.400

对于给定的间隔`foo`，至少是**可逆的和满射的吗？**然后，您可以运行该区间并`buckets[j]`完全填充`bar(j,k)`（如果`bar`是 的倒数`foo`），对于`k`in `[0,...,MAX_BAR_J)`，然后继续，`j+1`依此类推。

但是，如果`foo`具有散列属性，那么您的机会就很小，因为您无法预测下一个`i`将获得哪个索引。所以我现在看不到机会。

# iphone - 尝试为 iPhone 4.3 构建 SimpleURLConnection

> ID：10570436
> 
> 赞同：0
> 
> 时间：2012-05-13T08:48:01.243
> 
> 标签：iphone, build, cfstream

我以 SimpleURLConnections 为基础做了一些测试。一切正常，直到我尝试在我的设备上运行它并将目标构建设置为 4.3。然后我开始收到以下消息：如果您支持 5.0 之前的 iOS，则必须重新启用 CFStreamCreateBoundPairCompat。知道如何解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:24:21.797

该错误来自“PostController.m”中的#error 语句。对于 iOS，相关行是：

```
#if defined(__IPHONE_OS_VERSION_MIN_REQUIRED) && (__IPHONE_OS_VERSION_MIN_REQUIRED < 50000)
    #error If you support iOS prior to 5.0, you must re-enable CFStreamCreateBoundPairCompat.
#endif 
```

紧随其后的是“if/else”代码块，其中第一行是“if (NO)”。

'if (NO)' 是禁用 CFStreamCreateBoundPairCompat 的原因。

您应该将那些 'if/else' 行替换为 '#if/#else/#endif' 以根据您所针对的 iOS SDK 编译第一个或第二个代码块：

```
#if (__IPHONE_OS_VERSION_MIN_REQUIRED < 50000)
    CFStreamCreateBoundPairCompat(
        NULL, 
        ((inputStreamPtr  != nil) ? &readStream : NULL),
        ((outputStreamPtr != nil) ? &writeStream : NULL), 
        (CFIndex) bufferSize
    );
#else
    CFStreamCreateBoundPair(
        NULL, 
        ((inputStreamPtr  != nil) ? &readStream : NULL),
        ((outputStreamPtr != nil) ? &writeStream : NULL), 
        (CFIndex) bufferSize
    );
#endif 
```

# android - 在android Widget中更改资产目录中的字体

> ID：10570437
> 
> 赞同：-1
> 
> 时间：2012-05-13T08:48:30.940
> 
> 标签：android

由于小部件的开发，需要定义我自己的字体（有时可以通过 SharedProperties 更改）。

我在这里看到的灵魂之一是使用：

```
TextView tv=(TextView)findViewById(R.id.yearthree_view);
Typeface font = Typeface.createFromAsset(this.getAssets(), "fonts/Century_Gothic.ttf"); 
tv.setTypeface(font); 
```

但问题是：onUpdate() 方法不熟悉

> findViewById

我使用 RemoteViews 访问 TextView 以更新文本的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T08:52:24.367

创建自定义 TextView 扩展 TextView 并在初始化时设置字体。

```
public class CustomTextView extends TextView {

        public CustomTextView(Context context, AttributeSet attrs) {
            super(context, attrs);
            initTextFont(context);
        }

        public CustomTextView(Context context, AttributeSet attrs, int defStyle) {
            super(context, attrs, defStyle);
            initTextFont(context);
        }

        private void initTextFont(Context context) {
            //Set font here.
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T15:52:14.587

使用`context.getassets() ;` 上下文传入 onUpdate

```
Typeface font = Typeface.createFromAsset(context.getAssets(), "fonts/Century_Gothic.ttf"); 
```

# android - 在 Activity 之间传递变量时出错

> ID：10570448
> 
> 赞同：-1
> 
> 时间：2012-05-13T08:50:47.160
> 
> 标签：android

这是我的 Manual.java 文件：

```
public class Manual extends Activity implements OnClickListener{
    Button create;
    TextView gotAnswer, NoAnsV;
    EditText NoQues, NoAnswer;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.manualask);     
        NoQues = (EditText) findViewById (R.id.NoQues);
        NoAnswer = (EditText) findViewById (R.id.NoAnsw);
        create = (Button) findViewById (R.id.create);
        create.setOnClickListener(this);        
    }
    public void onClick(View v) {
        // TODO Auto-generated method stub      
        switch (v.getId()){     
        case R.id.create:
            Intent intent = new Intent(Manual.this, MCQSample.class);
            Bundle b = new Bundle();
            Integer Number = Integer.parseInt(NoQues.getText().toString());         
            intent.putExtras(b);
            startActivity(intent);
            finish();
            break;

    }
    }
} 
```

然后是 MCQSample.java：

```
public class MCQSample extends Activity{

    TextView title;
    String gotBread;
    int value;
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mcqsample); 
        title = (TextView) findViewById(R.id.abc);

        Bundle b = getIntent().getExtras();
        int value = b.getInt("key", 0);
        title.setText(value);
    }
} 
```

然后是 mcqsample.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center"
    android:orientation="vertical" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Text"
        android:id="@+id/abc"/>

</LinearLayout> 
```

我已经在 AndroidManifest 中添加了这两个类。

当我单击 Manual.java 上的创建按钮时，它总是崩溃。我的课有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T08:52:09.047

您没有将号码设置为捆绑包，您应该致电[`Bundle#putInt`](http://developer.android.com/reference/android/os/Bundle.html#putInt%28java.lang.String,%20int%29)：

```
Bundle b = new Bundle();
Integer number = Integer.parseInt(NoQues.getText().toString());         
b.putInt("key", number);
intent.putExtras(b); 
```

第二个问题（导致崩溃）是，您应该设置文本，而不是 int：

```
title.setText("" + value); 
```

否则，它会查找具有 id = value 的字符串，而这样的 id 不存在（请参阅 参考资料[`TextView#setText(int)`](http://developer.android.com/reference/android/widget/TextView.html#setText%28int%29)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T09:01:54.753

**手动的**

```
Intent intent = new Intent(Manual.this, MCQSample.class);
intent.putExtras("val",NoQues.getText().toString());
startActivity(intent); 
```

**MCQS示例**

```
int value= Integer.parseInt( getIntent().getExtras().getString("val") ); 
```

# assembly - 英特尔 x86 程序集 - 收集除法的余数

> ID：10570453
> 
> 赞同：1
> 
> 时间：2012-05-13T08:51:19.537
> 
> 标签：assembly, x86, intel, division, masm

如何将`div`指令的剩余部分收集到寄存器中，以便将其转换为字符串并显示到控制台。例如：

```
.386
.model flat, stdcall
option casemap :none
include \masm32\include\windows.inc
include \masm32\include\kernel32.inc
include \masm32\include\masm32.inc
includelib \masm32\lib\kernel32.lib
includelib \masm32\lib\masm32.lib
.data
  adrs1 dd 0
  adrs2 dd 0
.code
start:
  mov eax, 6        ; add 6 to eax
  mov ebx, 7        ; add 7 to ebx
  imul eax, ebx     ; multiply both numbers, result is in eax
  mov ecx, 10       ; add 10 to ecx
  idiv eax:ecx, edx ; divide eax (result of mul) by 10 so that I can separate the              digits into single characters so  I can display them.
                    ; Numbers will be 4 and 2\. Is the result of the division stored in EDX?
  mov adrs1, eax      ; mov the '4' from the '42' result of the multiplication into 'adrs'
  mov adrs2, edx      ; mov the remainder of the division to adrs2
  add adrs1, 50       ; make the result the correct ASCII character for the result
  add adrs2, 50       ; " "
  invoke StdOut, addr adrs1 ; display adrs1
  invoke StdOut, addr adrs2 ; display adrs2
  invoke ExitProcess, 0 ; exit
end start 
```

我需要显示除法的其余部分。任何帮助将不胜感激。

提前致谢，

程序

# c# - 如何在向导步骤中选择项目，DropDownList1.Items.FindByValue("-").Select？异常：空引用异常

> ID：10570454
> 
> 赞同：1
> 
> 时间：2012-05-13T08:51:23.623
> 
> 标签：c#, asp.net, .net, c#-4.0, webforms

如何在向导步骤中选择项 FindByValue **DropDownList**

例外：

> NullReferenceException
> 对象引用未设置为对象的实例。

C＃：

```
protected void Page_Load(object sender, EventArgs e)
{
    ...

    DropDownList DropDownList2 = 
       (DropDownList)Wizard1.WizardSteps[1].FindControl("DropDownList1");

    DropDownList2.Items.FindByValue(
        DataSetLoad.Tables[1].Rows[0]["a"].ToString()).Selected = true;

    ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T12:41:04.243

protected void Page_Load(object sender, EventArgs e) { ...

```
DropDownList DropDownList2 = 
   (DropDownList)Wizard1.WizardSteps[1].FindControl("DropDownList1");
DropDownList2.DataBind();
DropDownList2.Items.FindByValue(
    DataSetLoad.Tables[1].Rows[0]["a"].ToString()).Selected = true;

... 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T09:16:07.540

如果 null 异常是您的向导不工作的唯一原因，则附加一个调试器，然后使用[Visual Studio 即时窗口](http://msdn.microsoft.com/en-us/library/f177hahy.aspx)系统地检查您的每个对象以确定哪个为 null。

例如， `Wizard1.WizardSteps[1].FindControl("DropDownList1")`如果找不到您的控件，则可能返回 null。如果是这种情况，那么您可以继续问，为什么它没有找到您的控制权。

更新：

根据您提供的代码，您是否有理由不直接使用变量 DropDownList1 ？代替：

```
DropDownList DropDownList2 = 
   (DropDownList)Wizard1.WizardSteps[1].FindControl("DropDownList1");

DropDownList2.Items.FindByValue(
    DataSetLoad.Tables[1].Rows[0]["a"].ToString()).Selected = true; 
```

为什么不直接使用：

```
 DropDownList1.Items.FindByValue(
    DataSetLoad.Tables[1].Rows[0]["a"].ToString()).Selected = true; 
```

上述建议是基于您的原始问题（空引用）发生的假设，因为您的`FindControl`方法没有成功找到`DropDownList1`

# logging - 使用 Go 的日志包的默认格式的 PANIC

> ID：10570456
> 
> 赞同：1
> 
> 时间：2012-05-13T08:51:49.800
> 
> 标签：logging, formatting, go

登录 Go 时`log.Println`，我经常得到

```
2012/05/13 16:45:50 evaluating %v(PANIC=3) 
```

我不确定如何确定我做错了什么，我假设某处`fmt.Println`发生了由我自己的`Stringer`接口实现之一产生的恐慌，以免由于日志记录失败而使我的程序崩溃。

我如何弄清楚发生了什么？为什么我会收到这个错误信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T09:29:15.287

你是对的，方法中存在恐慌`String`。`log`但这与包裹无关。`Println`使用`%v`和`%v`表示运行`String`方法。在`String`方法调用中出现恐慌[`catchPanic`](https://github.com/golang/go/blob/master/src/fmt/print.go#L630)。在你的输出`3`中是你恐慌的价值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T09:22:36.800

没有代码来检查很难说。要调试它，也许尝试`log.Println("evaluating", foo)`用`log.Printf("evaluating %#v\n", foo)`. 它的工作方式有点不同：

```
package main

import "log"

type t int

func (t) String() string {
    panic(3)
}

func main() {
    var v t = 42
    log.Println("evaluating", v)
    log.Printf("evaluating %#v\n", v)
} 
```

* * *

```
$ go run main.go
2012/05/13 11:19:49 evaluating %v(PANIC=3)
2012/05/13 11:19:49 evaluating 42
$ 
```

# assembly - mov eax, [ebx+ecx*4] 在 NASM 中是什么意思？

> ID：10570458
> 
> 赞同：0
> 
> 时间：2012-05-13T08:51:57.987
> 
> 标签：assembly, x86, nasm, addressing-mode

我刚开始学习汇编，对以下表达式感到困惑。

```
mov ebx, 2

mov ecx, 3

mov eax, [ebx+ecx*4] 
```

数据将从哪个地址移动到 eax？

而且我不明白 [ebx+ecx*4] 中地址的计算结果是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T09:03:29.407

14 (= 2 + (3*4))，如果我没记错的话

# javascript - 在 Firefox 中本地存储 XML 文件

> ID：10570459
> 
> 赞同：1
> 
> 时间：2012-05-13T08:52:02.540
> 
> 标签：javascript, xml, file-io, firefox-addon

我正在为 Firefox 制作 XUL 扩展，我想在 Firefox 中本地存储一个 XML 文件，这样当我写入文件时，即使在我关闭浏览器后，数据也会永久存储到 XML 文件中。有什么办法可以使用 JavaScript 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T10:41:14.727

请参阅[https://developer.mozilla.org/en/Parsing_and_serializing_XML上的将 DOM 树序列化为文件](https://developer.mozilla.org/en/Parsing_and_serializing_XML)

其他选项是：

a）您可以尝试存储和阅读它作为首选项。至少如果您的 XML 是基于字符串的并且相当小，您可以尝试如下所示的内容。

使用偏好管理器

```
var thePrefManager = Components.classes["@mozilla.org/preferences-service;1"].getService(Components.interfaces.nsIPrefBranch); 
```

要阅读 XML：

```
var myXML = thePrefManager.getCharPref("extensions.extensionName.prefName"); 
```

要存储 XML：

```
thePrefManager.setCharPref("extensions.extensionName.prefName",myXML); 
```

有关编写首选项的更多信息，请参阅[https://developer.mozilla.org/en/Code_snippets/Preferences](https://developer.mozilla.org/en/Code_snippets/Preferences)。

b）如果您尝试在扩展程序中写入/读取文件，请查看 [https://developer.mozilla.org/en/Code_snippets/File_I%2F%2FO](https://developer.mozilla.org/en/Code_snippets/File_I//O)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T01:38:39.187

Greasemonkey 正是这样做的，它是 MIT/X11：

*   [创建 xml 并将其作为文件保存到磁盘](https://github.com/greasemonkey/greasemonkey/blob/0bace94e40dce18a26caae18cbd558b0c1e2577b/content/config.js#L92-128)

*   [在加载时读取文件](https://github.com/greasemonkey/greasemonkey/blob/0bace94e40dce18a26caae18cbd558b0c1e2577b/content/config.js#L67-90)

使用[NetUtils.jsm](https://developer.mozilla.org/en/JavaScript_code_modules/NetUtil.jsm)进行文件读/写虽然更容易。

# django - Django url reverse：不可逆的正则表达式部分：'（？='

> ID：10570463
> 
> 赞同：2
> 
> 时间：2012-05-13T08:52:33.470
> 
> 标签：django, django-urls

Django 版本：1.5（主干）

我在 url 模式 A 中使用了积极的前瞻断言，它本身就可以正常工作。但是当我尝试反转完全不相关的 url 模式 B 时，我得到：

```
ValueError: Non-reversible reg-exp portion: '(?=' 
```

示例网址：

```
url(r'^foo(?=bar)/', test, name= 'bla'),
url(r'bar/', test, name= 'bli'), 
```

触发错误：

```
from django.core.urlresolvers import reverse
reverse('bli') 
```

我找到了这张相关的票，但遗憾的是并没有让我更聪明 [https://code.djangoproject.com/ticket/17492](https://code.djangoproject.com/ticket/17492)

谁能告诉我代码有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T10:31:20.607

您的代码没问题，问题是，Django 无法反转所有可能的正则表达式。目前 Django 的正则表达式规范器的实现至少不能处理两件事：析取（`|`）和非捕获（前瞻、后瞻）模式。

因此，要解决您的问题，只需避免在您的 URL 模式中使用前瞻，您就可以开始了。毕竟，应该有可能使用简单的正则表达式而没有所有那些时髦的扩展，它可以表示任何正则语言。

# django - 如何在模板级别更改 Django 管理中的 is_staff 选项

> ID：10570464
> 
> 赞同：-1
> 
> 时间：2012-05-13T08:52:44.090
> 
> 标签：django, django-models, django-admin, django-views

我必须将 views.py 文件中的“is_staff”选项更改为禁用 Django-admin 页面，但我无法解决以下问题。每当我尝试编写“user.is_staff”时，听起来没有任何选项可以选择它（is_staff），而 is_active 存在。这是进口的问题吗？

以下是我要导入的内容：

```
from django.contrib.auth.decorators import login_required
from django.core.paginator import Paginator, EmptyPage, PageNotAnInteger
from django.contrib.auth.models import User
from django.http import HttpResponseForbidden, HttpResponse
from django.shortcuts import get_object_or_404
from django.views.generic.list_detail import object_detail
from django.views.generic.simple import direct_to_template
from django.utils.translation import ugettext as _
from django.core.mail import send_mail
from django.core.urlresolvers import reverse
from django.http import HttpResponseRedirect
from django.core.paginator import Paginator, EmptyPage, PageNotAnInteger

from django.contrib import admin
from django.contrib.auth.admin import UserAdmin 
```

以下代码我在views.py中编写：

```
def user_change_status(request, id):
user = User.objects.get(pk=id)
    if user.is_staff:
       user.is_staff = False
    else:
       user.is_active = True
return HttpResponse('') 
```

整个场景是我有一个模板，它显示了所有用户的列表以及他/她的 is_staff 选项（真/假）。当超级用户选择任何用户 is_staff 选项时我想要什么，它会改变并且页面将重定向到同一页面上。

**编辑后：** views.py中定义了两个方法：

```
def user_change_status(request, id):
user = User.objects.get(pk=id)
if user.is_active:
    user.is_staff = False
else:
    user.is_staff = True
user.save()
value2 = user.is_staff
return HttpResponse(value2) 
```

另一个是`

```
def user_block(request, id):
user = User.objects.get(pk=id)
if user.is_active:
    user.is_active = False
else:
    user.is_active = True
user.save()
value1 = user.is_active
return HttpResponse('value1') 
```

我想更改 is_staff 值和 is_active 值。方法 user_change_status 不起作用，而 user_block 起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T12:25:57.830

Python 是一种动态语言。特别是，它不是 Java 或 C++。通常，IDE 在动态语言的自动完成方面做得很差。

注意到您的 IDE 提供或不提供什么作为自动完成选项是完全错误的。有时它会做对，有时它不会。有时它会提供根本不是对象成员的选项。

使用文档，而不是您的 IDE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T11:16:05.033

`user_change_status`删除`is_staff`活动用户，但启用`is_staff`非活动用户，这是你想要做的吗？实际上不是要切换 is_staff 值吗？我问，因为`user_block`切换`is_active`值。

如果是这样，你应该更换

```
if user.is_active:
    user.is_staff = False 
```

和

```
if user.is_staff:
    user.is_staff = False 
```

# hibernate - JPA/Hibernate - 我们不能从我们的实体中检索定义为 Set 的集合吗？

> ID：10570469
> 
> 赞同：0
> 
> 时间：2012-05-13T08:53:45.170
> 
> 标签：hibernate, jpa, orm

我有一个像这样的实体：

```
@Entity
public class Book{
    int bookId;
    @ManyToMany
    Set<Page> favoritePages;
   // getters/setters
} 
```

`Page`也是一个实体。现在如果我写一个查询：

```
EntityManager em = // somehow get the entity manager
TypedQuery<Page> query = "Select favoritePages from Book where bookId=:id";
query.setParameter("id",2);

List <Page> pages = query.getResultList(); 
```

现在，这给了我一个错误

> 为 TypedQuery（页面）指定的类型与查询返回类型不兼容 [接口 java.util.Set]

***我无法将 favoritePages 的类型更改为 list***。我怎样才能找回它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T09:22:08.907

如果您没有其他选择，您可以这样做：

```
TypedQuery<Book> query = "from Book where bookId=:id";
query.setParameter("id",2);
Set<Page> pages = query.getSingleResult().getFavoritePages(); 
```

但它也有它的缺点，因为你只对查询喜欢的页面感兴趣。

# linux - 您如何在 Unix（或至少 Linux）中安全地读取内存？

> ID：10570472
> 
> 赞同：3
> 
> 时间：2012-05-13T08:54:15.927
> 
> 标签：linux, unix, memory, readprocessmemory

我想读取一个字节的内存，但不知道内存是否真正可读。您可以在 OS X 下使用 vm_read 函数执行此操作，在 Windows 下使用 ReadProcessMemory 或_try */* _catch 执行此操作。在 Linux 下，我相信我可以使用 ptrace，但前提是尚未调试。

仅供参考，我想这样做的原因是我正在编写异常处理程序状态转储代码，如果用户可以看到各种内存值是什么，或者知道它们是否无效，它将对用户有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-11T22:17:23.440

如果您不必很快（这在代码处理状态转储/异常处理程序中很常见），那么您可以在访问尝试之前放置自己的信号处理程序，并在之后恢复它。令人难以置信的痛苦和缓慢，但它完成了。

另一种方法是解析 /dev/proc//maps 的内容以构建内存映射一次，然后在每次访问时决定该地址是否在进程内部。

如果是我，我会尝试找到已经这样做的东西，如果许可证满足我的需要，我会直接重新实现或复制代码。从头开始编写是很痛苦的，而且很高兴有一些东西可以提供符号分辨率的支持跟踪。

# php - 如何获取电子邮件页面并向其提交表单数据？

> ID：10570478
> 
> 赞同：0
> 
> 时间：2012-05-13T08:54:50.520
> 
> 标签：php, javascript, autofill

我试图通过我自己的网站自动登录我的电子邮件。这是我到目前为止所管理的。我不想将我的数据保存在我的计算机上，因为它是共享的。

```
<?php

$src=file_get_contents('https://accounts.google.com/ServiceLogin?service=mail&passive=true&rm=false&continue=http://mail.google.com/mail/&scc=1&ltmpl=default&ltmplcache=2');

?>

<html>
<body>
<?php echo $src; ?>

<script>
window.onload = function() {
 document.getElementsByName('Email').item(0).value='testusername@gmail.com';
 document.getElementsByName('Passwd').item(0).value='testpassword';
 document.getElementsByName('signIn').item(0).click();
 void(0);
}
</script>

</body>
</html> 
```

为什么这不起作用？有任何想法吗？我是网络编程的新手，所以任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T09:05:53.253

这是不可能的。Google 拒绝使用脚本执行授权请求。有一些方法可以防止这种行为。我确信谷歌会为此做所有必要的事情。

我可以建议您使用 Lastpass 浏览器扩展来自动登录。里面有你必须记住的主密码。即使对于具有公共访问权限的计算机，它也足够安全。在有人获得您的主密码之前，他无法访问您保存的所有密码。

但是没有什么可以保护您免受键盘记录器和网络嗅探器的侵害。所以完全没有希望。

# python - 从 csv 检索数据，并将 x 行和 y 列的值分配给变量。Py3.2，*作业*

> ID：10570481
> 
> 赞同：1
> 
> 时间：2012-05-13T08:55:10.787
> 
> 标签：python, python-3.x

我有一个评估要做，这是我到目前为止的代码：

```
number1 = input("Number1? ")

number2 = input("Number2? ")

packages = csv.reader(open('lol.txt', newline='\n'), delimiter=',')
for PackName,PriceAdultString,PriceChildString in packages:
    n += 1
    PriceAdult = float(PriceAdultString)
    PriceChild = float(PriceChildString)
    print("%i. %17s - $%4.2d / $%4.2d" % (n, PackName, PriceAdult, PriceChild))

NameChoice = input("Which name would you like? Choose using a number: ") 
```

csv.reader 使用的lol.txt 包含以下内容：

```
herp,123,456    
derp,321,654    
hurr,213,546 
```

现在，我需要能够使用 NameChoice 从文件中检索一行，并将其中的数据用作 name、number1 和 number2，因此对于 NameChoice == 1、name = herp、number1 = 123 和 number 2 = 456 ，并且数字必须是浮点数。

我很难弄清楚这一点，如果可能的话，可以使用一些指导。

谢谢大家。

在被问到之前，我意识到我忘了提及：我已经用谷歌搜索过，并浏览了 Python 指南和我的教科书。不过，我并不完全相信我知道自己在寻找什么。

遇到一个新问题：我需要能够使用 '\n\n' 而不是 '\n' 来获取 CSV 文本，因此文本更像以下内容：

```
herp,123,456

derp,321,654

hurr,213,546 
```

我的 Li-Aung 使用的代码（非常轻微调整）版本：

```
import csv
with open ("lol.txt",'rt', newline = '\n\n') as f:
    csv_r = csv.reader (f)
    entries = [ (name, float(p1), float(p2)) for name, p1, p2 in csv_r]

for index, entry in enumerate(entries):
    print ("%2i. %-10s %5.2f %5.2f" % (index, entry[0], entry[1], entry[2]))

choice = int(input("Choose a number: "))

print (entries[choice]) 
```

返回异常：

```
Traceback (most recent call last):
  File "C:/Python32/eh", line 2, in <module>
    with open ("lol.txt",'rt', newline = '\n\n') as f:
ValueError: illegal newline value: 
```

现在，调试非常清楚 - '\n\n' 不能作为换行符指定，但我想知道是否有办法解决这个问题？

注意：搞砸了之前的编辑，使用“ newline = '\n'”的代码调试将是：

```
Traceback (most recent call last):
  File "C:/Python32/eh", line 4, in <module>
    entries = [ (name, float(p1), float(p2)) for name, p1, p2 in csv_r]
  File "C:/Python32/eh", line 4, in <listcomp>
    entries = [ (name, float(p1), float(p2)) for name, p1, p2 in csv_r]
ValueError: need more than 0 values to unpack 
```

这是因为它将每个有用行之间具有 0 值的空白区域视为一行，正如它被告知要做的那样，并且那里没有任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T09:23:55.257

@mata 有权，但我觉得有必要在评论中详细说明他们的答案。

由于您需要引用您的数据而不是仅仅打印它，所以让它以某种方式存在是有意义的。一旦达到这一点，您最需要担心的是使用什么样的数据结构——如果您选择的数据结构与您想要使用数据的方式非常匹配，那么代码就会变得非常简单。

因此，您的逻辑将如下所示：

1.  将数据解析成某种数据结构
2.  走这个数据结构打印出菜单
3.  获取用户输入，并使用它来选择正确的数据位

由于用户输入是一个数字，表示数据在文件中的位置，因此 a`list`是一个明显的选择。如果您使用现有字段之一作为查找，a`dict`会更好地为您服务。

如果你这样做：

```
data = list(csv.reader(open('lol.txt', newline='\n'), delimiter=',')) 
```

，您可以像当前使用文件一样使用它来打印菜单，除了*数据粘在周围*，并且使用您输入的数字直接有意义。

您可能更喜欢将数字存储为数字类型而不是字符串；这样做很有意义，但弄清楚如何调整上面的代码以实现它留给读者作为练习。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T09:08:32.570

例如，您可以将输入存储在 a`list`而不是仅仅打印出来。

之后，从列表中获取正确的元组并将其分配给您的变量是微不足道的......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T09:12:52.670

将整个文件存储到列表中：

```
import csv
with open ("lol.txt",'rb') as f:
    csv_r = csv.reader (f)
    entries = [ (name, float(p1), float(p2)) for name, p1, p2 in csv_r]

for index, entry in enumerate(entries):
    print ("%2i. %-10s %5.2f %5.2f" % (index, entry[0], entry[1], entry[2]))

choice = int(raw_input("Choose a number: "))

print (entries[choice]) 
```

输出：

```
 0\. herp       123.00 456.00
 1\. derp       321.00 654.00
 2\. hurr       213.00 546.00
Choose a number: 0
('herp', 123.0, 456.0)
>>> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-14T17:52:02.343

使用 open ("lol.txt",'rt', newline = '\n\n') 作为 f：

将其更改为 '\n'

使用 open ("lol.txt",'rt', newline = '\n') 作为 f：

# php - PHP:Stomp - 是否可以在“send()”上捕获错误？

> ID：10570485
> 
> 赞同：2
> 
> 时间：2012-05-13T08:55:38.247
> 
> 标签：php, stomp

我正在使用[PHP Stomp 客户端](http://www.php.net/manual/en/class.stomp.php)发送 stomp 消息。

我想在后台打开一个持久连接，偶尔发送消息。

但是，如果在打开连接后（在 send() 上）发生连接错误，我找不到处理连接错误的方法。

例如，运行时：

```
<?php
$stomp = new Stomp('tcp://localhost:61613');

sleep(5); // Connection goes down in the meantime

$result = $stomp->send('/topic/test', 'TEST');

print "send " . ($result ? "successful\n": "failed\n");
?> 
```

输出：`send successful`

即使连接在 中断开`sleep()`，也`send()`始终返回 true。

[文档](http://www.php.net/manual/en/class.stomp.php)不是很有帮助，`Stomp::error()`并且在`stomp_connect_error()`返回时也没有太大帮助`false`。

作为临时解决方案，我在每个`send()`.

有没有更好的方法来捕获连接错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:47:32.133

在 stomp 协议本身的[规范](http://stomp.github.com/stomp-specification-1.1.html#Header_receipt)中找到了答案：

> 除 CONNECT 之外的任何客户端框架都可以指定具有任意值的接收头。这将导致服务器确认接收到带有 RECEIPT 帧的帧，该帧包含此标头的值作为 RECEIPT 帧中的接收 ID 标头的值。

因此设置“receipt”标头会使请求同步，因此与服务器的连接必须是活动的。

所以代码：

```
$result = $stomp->send('/topic/test', 'TEST');
print "send " . ($result ? "successful\n": "failed\n");

$result = $stomp->send('/topic/test', 'TEST', array('receipt' => 'message-123'));
print "send " . ($result ? "successful\n": "failed\n"); 
```

给出输出：

```
send successful
send failed 
```

这似乎不是这种情况下的最佳解决方案，但它对我有用。

如果有人知道更好的方法，我会很高兴听到它。

* * *

**更新：**

最终我切换到[Stomp-PHP](http://stomp.fusesource.org/documentation/php/)（一个纯 PHP 客户端）而不是 Pecl stomp 客户端，它处理[得更好](http://stomp.fusesource.org/documentation/php/book.html#Synchronous_Operations)。

# vbscript - Excel 到 Web 自动化

> ID：10570486
> 
> 赞同：1
> 
> 时间：2012-05-13T08:55:45.237
> 
> 标签：vbscript, automation

这是我通过宏自动化尝试做的事情->

-> 我正在尝试打开网站 [url]http://www.metaboanalyst.ca/MetaboAnalyst/faces/Home.jsp[/url]

-> 然后点击“点击这里开始”

-> 然后检查“峰值强度表”的单选按钮

-> 然后点击“浏览”数据文件并手动选择一个文件（[需要选择的文件）。](http://www.mediafire.com/download.php?56pnxhb7aj9m5az)

-> 然后最后单击提交按钮（单击提交按钮时该按钮不起作用并且文件路径消失并给我一个自动化错误 ['-2147352319 (80020101)']）

这是工作正常的代码，除了提交的最后一步->

```
Sub MetaboAnn()

Dim IE As Object

Set IE = CreateObject("InternetExplorer.Application")
IE.Visible = True

IE.Navigate "http://www.metaboanalyst.ca/MetaboAnalyst/faces/Home.jsp"
Do Until IE.ReadyState = 4
DoEvents
Loop

Application.Wait (Now + TimeValue("0:00:05"))
'MsgBox "Done"
IE.Visible = True

IE.Document.getElementById("form1:groupPanel1:loginLink").Click

Application.Wait (Now + TimeValue("0:00:05"))
'MsgBox "Done"
IE.Visible = True

IE.Document.getElementById("form1:tabSet1:tab1:layoutPanel7:csvButtonGroup:csvButtonGroup_2_rb").Click

Application.Wait (Now + TimeValue("0:00:03"))
'MsgBox "Done"
IE.Visible = True

IE.Document.all("form1:tabSet1:tab1:layoutPanel7:statCsvUpload_com.sun.webui.jsf.upload").Click

Application.Wait (Now + TimeValue("0:00:03"))
'MsgBox "Done"
IE.Visible = True

IE.Document.getElementById("form1:tabSet1:tab1:layoutPanel7:csvSubmitButton").Click

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-12T14:09:06.773

如果您使用的是 IE，请尝试点击工具，然后点击兼容查看设置并添加您所在的网站。它可能与该网站上的旧代码有关。

# google-maps - 为什么getCurrentposition使用带有jquery ui map和jquery mobile的google maps会导致错误？

> ID：10570487
> 
> 赞同：0
> 
> 时间：2012-05-13T08:56:00.060
> 
> 标签：google-maps, jquery-mobile, google-maps-api-3, jquery-ui-map

我正在尝试使用 jquery-ui-map (getCurrentPoistion) 获取当前位置，但 iIkeep 收到此错误：

> 未捕获 gmap 小部件实例的此类方法“getCurrentPosition”

这是我的代码：

```
var defaultLoc = new google.maps.LatLng(-0.9516469154747268, 30.269393920898438);
$('#map_canvas_dir').gmap({ 'center': defaultLoc, 'zoom':10});
$('#submit').click( function() {
    $('#map_canvas_dir').gmap('getCurrentPosition', function(status, pos) {
        if (status === "OK") {
            var latLng = new google.maps.LatLng(pos.coords.latitude,
                                                pos.coords.longitude);
            $('#map_canvas_dir').gmap('option', 'center', latLng);
            addNewMarker( latLng, 'green' );            
        }
        else {
            console.log('shit! it failed again');
        }                    
    }, { timeout: 4000, enableHighAccuracy: true } );
}); 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T20:23:40.270

正如 Andrew Leach 提到的，getCurrentPosition 是插件的扩展。很可能您没有包含 jquery-ui-map-extensions.js

# c# - Linq 得到前 9 组加上所有其他组的总和作为第 10 组

> ID：10570491
> 
> 赞同：2
> 
> 时间：2012-05-13T08:56:21.480
> 
> 标签：c#, sql-server, linq, linq-to-sql

在 LINQ 中是否可以这样做：按字段（LineTotal）分组，仅返回前 9 个组，然后在第 10 个组中返回所有其他组的总和？

在 SQL Server 中，可以这样做：

```
with TopGroups as 
(
    select sum(sol.LineTotal) as ProductGroupSales, p.ProductGroupId,
    ROW_NUMBER() OVER(ORDER BY sum(sol.LineTotal) DESC) as Num
    from SalesOrderLines sol left join Products p on p.Id = sol.ProductId
    group by p.ProductGroupId
)
select ProductGroupSales from TopGroups where Num < 10
union all
select sum(ProductGroupSales) from TopGroups where Num >= 10 
```

这可以翻译成LINQ吗？我不确定如何转换为 LINQ `ROW_NUMBER() OVER()`。`union all`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T09:46:24.063

1.  `.Take(9)`您可以使用“ ”和“ ”翻译行号`.Skip(0).Take(1)`。
2.  `UNION ALL`映射到`seqA.Concat(seqB)`
3.  CTE 映射到仅包含查询的变量。像这样：

-

```
var q1 = SalesOrderLines.Where(...);
var q2 = q1.Concat(q1); //reused q1 multiple times for q2 like a CTE 
```

所有这些在 SQL 端基本上都没有性能成本。

# java - 邻接矩阵的图实现和初始化

> ID：10570492
> 
> 赞同：4
> 
> 时间：2012-05-13T08:56:21.877
> 
> 标签：java, algorithm, optimization, data-structures, graph

图通常使用*邻接矩阵*来表示。各种来源表明可以避免初始化成本为 |V^2| （*V*是顶点数）但我可能还没有弄清楚如何。

在 Java 中，只需声明矩阵，例如`boolean adj [][]`，运行时将*自动*初始化数组，`false`这将以*O(V^2)*为代价（数组的维度）。
我误解了吗？是否可以避免邻接矩阵初始化的二次成本，或者这只是取决于实现语言的理论？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T10:31:45.803

矩阵值的默认初始化实际上是一个特性。如果不是使用默认初始化，您是否还需要自己初始化每个字段，以便您知道它的值是什么？

邻接矩阵有这个缺点：它们在内存效率方面很差（它们需要 O(n ² ) 内存单元），并且正如您所说，它们的初始化速度较慢。然而，初始化从未被认为是最大的问题。相信我，内存分配要慢得多，所需的内存比初始化时间更受限制。

* * *

在许多情况下，人们更喜欢使用邻接列表，而不是矩阵。这样的列表需要`O(m)`内存，其中`m`是图中的边数。这更有效，尤其是对于稀疏图。这个图表示比邻接矩阵差的唯一操作是查询`is there edge between vertices i and j`。矩阵`O(1)`及时回答，列表肯定会慢很多。

然而，许多典型的图算法（如[Dijkstra](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)、[Bellman-Ford](http://en.wikipedia.org/wiki/Bellman%E2%80%93Ford_algorithm)、[Prim](http://en.wikipedia.org/wiki/Prim%27s_algorithm)、[Tarjan](http://en.wikipedia.org/wiki/Tarjan%27s_strongly_connected_components_algorithm)、[BFS](http://en.wikipedia.org/wiki/Breadth-first_search)和[DFS](http://en.wikipedia.org/wiki/Depth-first_search)）只需要迭代给定顶点的所有邻居。如果您使用邻接表而不是矩阵，所有这些算法都会受益匪浅。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T09:19:22.450

这可以通过使用邻接矩阵的稀疏矩阵表示来实现，其中仅分配“1”的位置，而不是矩阵的每个元素（可能包括大量的零）。您可能会发现[此线程](https://stackoverflow.com/questions/390181/sparse-matrices-arrays-in-java)也很有用

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-13T20:13:26.977

这个线程中有很多混乱和错误信息。事实上，有一种方法可以避免邻接矩阵（以及一般的任何数组）的初始化成本。但是，不能将该方法与 Java 原语一起使用，因为它们在后台使用默认值进行了初始化。

`data[0..n]`假设您可以创建一个未自动初始化的数组。首先，它充满了以前记忆中的垃圾。如果我们不想花费*O(n)*时间覆盖它，我们需要一些方法来区分我们添加的好数据和垃圾数据。

“诀窍”是使用辅助堆栈来跟踪包含良好数据的单元格。第一次写入时`data[i]`，我们将索引添加`i`到堆栈中。由于堆栈只会随着我们添加而增长，因此它永远不会包含我们需要担心的任何垃圾。

现在每当我们访问时`data[k]`，我们可以通过扫描堆栈来检查它是否是垃圾`k`。但是每次读取都需要*O(n)*时间，首先打败了数组的点！

`stack_check[0..n]`为了解决这个问题，我们制作了另一个也开始充满垃圾的辅助数组。该数组包含指向堆栈中元素的指针。现在，当我们第一次写入时`data[i]`，我们压入`i`堆栈并设置`stack_check[i]`为指向新的堆栈元素。

如果`data[k]`是好数据，则`stack_check[k]`指向持有`k`. 如果`data[k]`是垃圾，则垃圾值`stack_check[k]`要么指向​​堆栈之外，要么指向除此之外的某个堆栈元素`k`（因为`k`从未放入堆栈）。检查这个属性只需要*O(1)*时间，所以我们的数组访问仍然很快。

把它们放在一起，我们可以在*O(1)*时间内创建我们的数组和辅助结构，让它们充​​满垃圾。在每次读取和写入时，我们使用我们的帮助器在*O(1)*时间内检查给定单元格是否包含垃圾。如果我们正在写垃圾，我们会更新我们的辅助结构以将单元格标记为有效数据。如果我们阅读垃圾，我们可以用任何适合给定问题的方式来处理它。例如，我们可以返回一个像 0 这样的默认值（现在你甚至不能说我们没有初始化它！）或者可能抛出一个异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T11:45:43.743

我将详细说明 A_A 的答案。他建议使用稀疏矩阵，这基本上意味着您要重新维护邻接列表。

您有两个理由使用矩阵 - 如果您根本不关心性能并且喜欢它提供的简单代码，或者如果您确实关心性能但您的矩阵将相对完整（假设至少 20%完整的，为了这篇文章）。

您显然确实关心性能。如果您的矩阵将是相对空的，那么它的初始化开销可能是有意义的，并且您最好使用邻接列表。如果它会很满，初始化变得可以忽略不计 - 您需要填充矩阵中的正确单元格（这将花费更多时间而不是初始化它），并且您需要处理它们（再次，这将花费更多时间初始化它）。

# c# - 包括图像和 css 在内的所有文件的相对路径错误

> ID：10570495
> 
> 赞同：1
> 
> 时间：2012-05-13T08:56:41.003
> 
> 标签：c#, asp.net, asp.net-mvc

包括 css 和图像在内的所有文件都在我的主页/索引控制器上，因为它采用了错误的相对路径

这是我的路线：

```
 routes.MapRoute("MainRoute", "{lang}/{topic}/{sort}/{page}", new { controller = "Home", action = "Index", page = 1 }, new { lang = @"\D{2}", page = @"\d+" });

    routes.MapRoute("MyLang", "{lang}/{page}", new { controller = "Home", action = "Index", page = UrlParameter.Optional }, new { lang = @"\D{2}" });

    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapHttpRoute(name: "DefaultApi", routeTemplate: "api/{controller}/{id}", defaults: new { id = RouteParameter.Optional });

    routes.MapRoute(name: "Default", url: "{controller}/{action}/{id}", defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }); 
```

当我在路径上`http://localhost:xxxx/en/all/recent`并尝试去时，`http://localhost:xxxx/en/all/recent/2`我得到并出错，因为我的所有文件都在不断命中

```
~/en/Content/Site.css 
```

代替 `~/Content/Site.css`

所以一切都转到我的主页/索引控制器。

我真的不知道在哪里寻找问题，因为我从开始编写此代码时并没有更改路线，我最近才注意到这一点，但这似乎是路由问题，有人可以看看我的路线或指出我在哪里错误可能是。

更新：

如果我在单击返回页面时尝试忽略 css 和未找到并处理的图像，我会得到以下信息：`http://localhost:xxxx/en/all/recent/en/all/recent/1`

# php - SQL：将项目写入数据库时 出错

> ID：10570499
> 
> 赞同：-4
> 
> 时间：2012-05-13T08:57:59.837
> 
> 标签：php, mysql, database, codeigniter

我有一个问题，该问题仅发生在刚刚注册该网站并第一次尝试在我的网站上添加产品的用户身上。添加产品分两部分完成。第一个是产品描述。二是产品截图。

新用户填写产品描述并点击提交后，他们会被带到页面上传他们的产品图片。但是，在网站的标题和正文之间存在错误

> 目录 occ/54

（此数字因产品而异）

解决方案是返回菜单屏幕，转到“所有产品”视图并删除失败的条目。一旦您返回“添加产品”并重复在第一页添加产品描述的过程，第二页将不再出现错误。

显然，对于新用户，他们第一次尝试向数据库添加项目时，是在尝试写入 MySQL 数据库和 OCC 文件夹中已经存在的产品 ID。

```
<?
if ($this->tank_auth->is_logged_in())
{
    $id = $this->tank_auth->get_user_id();
    $user = $this->users_m->get_user_by_id($id);
    $profile = $this->users_m->get_user_profile($id);
$fresh = $this->dev->get_fresh_app_id($id); 
$app = $this->dev->get_app_by_id($fresh);

$user_dir = 'occ/' . $id;
$is_it = file_exists($user_dir);
if($is_it != TRUE)
    {
    $dir =  'occ/' . $id;
    echo 'dir ' . $dir;
    mkdir ($dir);
    }

else
{
    $new_dir = 'occ/' . $id . '/' . $app->id;
    $is_itt = file_exists($new_dir);
    if($is_itt != TRUE)
    {
    $dirr =  'occ/' . $id . '/' . $app->id;
    mkdir ($dirr);
    }
}

$logo_path = '../occ/'. $id . '/' . $app->id ;
?> 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:13:40.263

删除这一行：

```
echo 'dir ' . $dir; 
```

# node.js - CouchDB 部分/差异写入

> ID：10570500
> 
> 赞同：3
> 
> 时间：2012-05-13T08:58:46.960
> 
> 标签：node.js, couchdb, express

### 基本问题

我有一些大型但有逻辑组织的文档 - 并且希望仅对单个文档的子部分执行更新。

### 例子

鉴于这个简单的文件：

```
_id: 123456,
_rev: 3242342,
name: 'Stephen',
type: 'Person',
hobbies: [ 'sky-diving' ] 
```

在我的应用程序中，我可能有一个**addHobbies**方法，该方法将使用一个仅检索的视图：

```
_id: 123456,
_rev: 3242342,
hobbies: [ 'sky-diving' ] 
```

这样它就可以在`hobbies`数组中添加一个额外的爱好，然后将`PUT`这个子集数据返回到文档中。

### 问题

据我了解，CouchDB [1.2] 不允许像这样的部分更新，因此我认为有必要在保存操作期间抓取整个文档，合并我的更改，然后在每次保存时`PUT`将**整个文档返回。**

*   还有另一种方法吗（我对 CouchDB 的功能有误吗）？
*   是否有任何库（我在 node.js 上使用 express）来处理这种操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T15:28:04.437

你是对的。也就是说，实际上，*文档数据库*的含义是：签出和签入。

您可以创建（或使用）shim 代码来模拟您想要的，让您专注于重要部分。在服务器端，您可以使用[更新功能](http://wiki.apache.org/couchdb/Document_Update_Handlers)。

客户端有很多解决方案。

cradle.js 将使用 merge 方法为您提供虚假的部分更新。

> > 如果您只想更新一个或多个属性，而保持其他属性不变，则可以使用 merge() 方法：

```
db.merge('luke', {jedi: true}, function (err, res) {
    // Luke is now a jedi,
    // but remains on the dark side of the force.
}); 
```

[https://github.com/cloudhead/cradle/](https://github.com/cloudhead/cradle/)

与 Node.js 相关的还有[Transaction](https://github.com/iriscouch/txn)，用于在 CouchDB 文档上执行任意原子事务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-13T15:23:49.360

我会说 cradle 目前缺少一个真正的部分更新功能，它还支持更新字段值的 JSON 数据中的键的路径，就像 Apache[在这里](http://wiki.apache.org/couchdb/Partial_Updates)演示的那样，而不是仅限于更新文档中的单个键，像 db.merge 方法。

其实看cradle源码，看到有一个Database.prototype.update方法（在lib/cradle/document.js中），但是这个方法好像没有文档记载。

可以将其作为 cradle 的一个组成部分将是优雅的，消除了仅针对部分更新对 CouchDB 视图更新执行单独请求的需要。

# google-maps - 谷歌地图和融合表，地理感知

> ID：10570503
> 
> 赞同：0
> 
> 时间：2012-05-13T08:59:17.293
> 
> 标签：google-maps, geolocation, google-fusion-tables

我正在为面筋不耐受的人建立一个社区网站。

我有一切工作，但我被困在一点点。

该网站位于[http://gfmap.com](http://gfmap.com)

我已经对表格进行了排序，然后更新了 Fusion 表格并驱动主页上的地图。我已经对过滤器进行了排序，因此您可以只看到特定的类别，甚至可以看到搜索框。

这一切都被拼凑在一起，因为我不知道 JavaScript，但可能应该。

所以对我来说，缺少的一块拼图是**如何让地图位置感知**，即如果有人从纽约看它，他们会得到地图的纽约视图。

我可以使用 Google 网站上的示例来完成这项工作，但是图层和搜索将不起作用。

如果有人可以快速查看该网站的代码并告诉我如何做我现在可以做的所有事情，我将非常感激，但要让它知道位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:05:26.067

一旦你有了地理位置，如奥利弗的评论中所述，你只需要改变。我没有用过这个。你说你已经通过一些谷歌代码示例让它工作并将其转换为新的 google.maps.LatLng

```
map = new google.maps.Map(document.getElementById('themap'), {
    center: new google.maps.LatLng(-33.87668666121477, 151.1396026611328),
    zoom: 12
  }); 
```

使用类似的东西：

```
 center: geoLoc, 
```

这根本不会影响您的 Fusion Table 图层。

# mysql - 有没有办法找出最后一次访问 mysql 数据库的时间？

> ID：10570504
> 
> 赞同：1
> 
> 时间：2012-05-13T08:59:21.900
> 
> 标签：mysql

我有一个虚拟主机，我有简单的基于在线浏览器的 ezpanel 访问。我可以通过 phpmyadmin 管理 mysql 数据库。

我有很多旧数据库要删除。但首先，我需要知道，哪些网站仍在使用我的网站，哪些已经过时、未使用、几个月未访问。

是否可以知道上次访问数据库的时间？

我在问，是否有任何命令可以显示是否正在访问 db，正在使用中？如果每个数据库访问记录了任何信息以及显示它的任何命令？或者有什么类似的方法？

谢谢

# c# - 数据网格视图 / 数据表 | rowState 不会改变

> ID：10570505
> 
> 赞同：0
> 
> 时间：2012-05-13T08:59:42.957
> 
> 标签：c#, datagridview, datatable, bindingsource, rowstate

我在将数据绑定到 DataGridView 时遇到问题。

我有一个继承自 DataGridView 的类 MyDataGridView。我的数据网格视图数据源是一个 BindingSource 对象，其中包含一个 DataTable 作为数据源。

问题是，当我通过（我的）DataGridView 对象进行更改时 - rowState 保持在“未修改”而不是已修改；即使 DataTable 中的值发生了变化（这就是我的更新不起作用的原因，因为它将 rowState 视为未定义）。请注意，直接对 DataTable 进行更改可以正常工作。

谢谢 （：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T10:50:41.897

您必须调用包含网格的表单的 Validate 方法。此方法会影响网格，就好像您将焦点移动到网格中的另一行一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T05:24:57.267

好的，所以在使用 google 之后，我发现调用 DataTable.Rows[index].EndEdit() 可以解决问题。我不确定我是否应该这样做，但它解决了问题。（为了调用该方法，我使用 DataGridView.CellEndEdit 事件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T09:09:58.247

你能告诉我们 MyDataGrdView 类的代码吗？

我想我已经知道解决方案：您必须重新绑定数据源，以便控件知道何时更新

`DataGridView.DataBind();`每次更改数据源时调用。您也可能必须对 DataTable 执行此操作。

# android - 服务中的 Android 错误：“无法添加窗口 - 令牌 null 不适用于应用程序”

> ID：10570510
> 
> 赞同：1
> 
> 时间：2012-05-13T09:00:39.807
> 
> 标签：android, widget

我正在尝试使用小部件创建应用程序。当用户将小部件放在桌面上时，列表视图应该会显示一个项目列表。用户选择一个项目，然后使用与该项目相关的相应文本创建小部件。我认为我应该通过在服务中显示一个对话框来做到这一点，但它让我

> 原因：android.view.WindowManager$BadTokenException: Unable to add window -- token null 不适用于应用程序

到 dialog_newitem.show(); 线。为简单起见，我现在使用一个简单的警报对话框。

这是这样做的方法吗？我在网上没有找到任何关于此的信息。

```
public class UpdateWidgetService extends Service {
    private static final String LOG = "de.vogella.android.widget.example";
    public static String ACTION_WIDGET_CONFIGURE = "ConfigureWidget";
    public static String ACTION_WIDGET_RECEIVER = "ActionReceiverWidget";
    String value;
    Dialog dialog_newitem;
    EditText et_newitem;

    @Override
    public void onStart(Intent intent, int startId) {
         Toast.makeText(this, "UpdateWidgetService", Toast.LENGTH_SHORT).show();

            dialog_newitem = new Dialog(this);  //I tried UpdateWidgetService.this, too
            dialog_newitem.setContentView(R.layout.dialog_productlists_grp_capitalized);
            dialog_newitem.setTitle("Select");
            dialog_newitem.setCancelable(true);

            et_newitem = (EditText) dialog_newitem.findViewById(R.id.et_item_name);

            Button btn_Save = (Button) dialog_newitem.findViewById(R.id.btn_save_pr);
            btn_Save.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    value = et_newitem.getText().toString();
                }
                });

            Button btn_Cancel = (Button) dialog_newitem.findViewById(R.id.btn_cancel_pr);
            btn_Cancel.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    dialog_newitem.dismiss();
                }

            });
            dialog_newitem.show(); //error

         Toast.makeText(this, "value: " + value, Toast.LENGTH_SHORT).show();

    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }
} 
```

我在代码的其他部分使用了这个 alertdialog，它工作正常。我认为这与服务有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T09:02:39.107

您无法在服务中显示对话框。

如果你真的想显示一个对话框。

尝试启动一个 Activity 并将 Activity 的 Theme 设置为 Theme.Dialog。

The ApiDemo Project 中有一个演示

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-03T04:29:36.467

我知道这个线程很旧，但认为无论如何为未来的患者做出贡献是值得的。

尽管大多数人会说不建议直接从服务启动对话框，但以下解决方法对我有用。使用下面的 ServiceDialogBu​​ilder 类来构建您的 AlertDialog。与 AlertDialog.Builder 不同，这将与服务上下文一起使用，并且可以直接从服务调用 show()，而无需启动新活动。

只是要小心，这有点像黑客，所以这样做很可能会产生一些意想不到的副作用。

希望这可以帮助

```
public class ServiceDialogBuilder extends AlertDialog.Builder {

public ServiceDialogBuilder(Context context) {
    super(context);}

@Override
public AlertDialog create() {
    AlertDialog dialog=super.create();
    //Change dialog window type from TYPE_CHANGED to TYPE_SYSTEM_ALERT
    dialog.getWindow().setType(WindowManager.LayoutParams.TYPE_SYSTEM_ALERT);
    return dialog;
}

@Override
public AlertDialog show()   {
    return super.show();
}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-03T12:58:47.080

只需确保您的对话框窗口设置为 SYSTEM_ALERT：

```
dialog.getWindow().setType(WindowManager.LayoutParams.TYPE_SYSTEM_ALERT); 
```

# android - Android 扩展 Toast 导致崩溃

> ID：10570511
> 
> 赞同：0
> 
> 时间：2012-05-13T09:00:44.470
> 
> 标签：android, toast, onpause

嘿，我在下面的代码上崩溃了。我正在尝试将 Toast 扩展一段时间，并在运行时“杀死” Toast `onPause`。我究竟做错了什么？`timer.cancel()`当我添加时 发生崩溃`onPause`

```
private boolean checkInternetConnection() {

    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    // test for connection
    if (cm.getActiveNetworkInfo() != null
            && cm.getActiveNetworkInfo().isAvailable()
            && cm.getActiveNetworkInfo().isConnected()) {

        splashTread.start();
        return true;
    } else {

        timer = new CountDownTimer(20000, 1000)
        {

            public void onTick(long millisUntilFinished) {toast.show();}
            public void onFinish() {toast.cancel();}

        }.start();

        return false;
    }
}

@Override
protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
    finish();
timer.cancel():
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    finish();
    timer.cancel():

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T09:13:53.780

这是你可以做的。应用程序崩溃，因为 timer = null。计时器从未运行或设置。

在 onDestroy 和 onPause 中添加：

```
if (timer != null) {
        timer.cancel();

    } 
```

# android - 使用 x Preference Fragments 时设置 Shared Preferences 的默认值

> ID：10570513
> 
> 赞同：1
> 
> 时间：2012-05-13T09:01:27.613
> 
> 标签：android, preferences, default-value, fragment, preferenceactivity

我对设置共享首选项的默认值有点困惑......例如，我有一个带有两个或多个*PreferenceFragment的**PreferenceActivity*，每个首选项片段都有自己的 *preference_fragmentX.xml* 文件用于构建首选项视图。当我设置默认值时

```
PreferenceManager.setDefaultValues(getActivity(), R.xml.?????, false); 
```

我应该指定哪个 XML？我是否应该构建另一个 XML 首选项文件，其中包含具有默认值的 *preference_fragmentX.xml* 文件的所有首选项，并在*setDefaultValues*中使用这个文件？例如，我可能会构建一个注册广播事件的应用程序，但我不确定用户在第一次触发广播事件之前是否打开了偏好活动，所以我想在广播事件中初始化默认偏好，或者在它启动的另一个活动中.. 那么，如何初始化所有片段窗格的所有首选项？

如果我构建一个 default_preferences.xml 文件，该文件包含在所有首选项片段 XML 文件中定义的所有首选项键（我仅指定*PreferenceScreen*根标记及其下的所有首选项标记，而不指定所有其他标记，如*PreferenceCategory* ，则它可以工作。 . 此外，对于每个首选项，我只指定键和默认值属性），但我不知道这是否是执行此任务的正确方法，因为我必须复制其他 XML 文件的一部分：

**首选项_fragment1.xml：**

```
<PreferenceScreen
        xmlns:android="http://schemas.android.com/apk/res/android">

    <PreferenceCategory
            android:title="@string/my_preference_category">
            <RingtonePreference    
                android:key="preference_ringtone"
                android:ringtoneType="alarm|notification"
                android:showSilent="true"
                android:summary="@string/preference_ringtone_summary"
                android:title="@string/preference_ringtone_title" />
    <ListPreference
        android:key="preference_list"
        android:entries="@array/list_items"
        android:entryValues="@array/list_values"
                android:summary="@string/preference_list_summary"
                android:title="@string/preference_list_title" />          
    </PreferenceCategory>
</PreferenceScreen> 
```

**default_preference.xml：**

```
<PreferenceScreen
        xmlns:android="http://schemas.android.com/apk/res/android">

<RingtonePreference
        android:defaultValue="content://settings/system/notification_sound"
        android:key="preference_ringtone"/>
<ListPreference
    android:defaultValue="5"                    
        android:key="preference_list"/>          
</PreferenceScreen> 
```

# sql-server - 从视图调用远程函数 - SQL Server

> ID：10570518
> 
> 赞同：1
> 
> 时间：2012-05-13T09:02:08.967
> 
> 标签：sql-server, remote-server

我正在寻找一种调用`REMOTE FUNCTION`in`SELECT`子句的方法`VIEW`。基本上我正在尝试做这样的事情：

```
 CREATE VIEW [dbo].[View_Year_Forcast] AS
        (SELECT    BshForecast.ProjectId, 
                   BshForecast.JobTypeId,
                   Job_Type.NAME,          
                   ProjectName , 
                   ProjectManagerID,                       
                   ProjectManagerName , 

***EXEC @START_DATE  =[192.168.0.10].[LudanProjectManager].[dbo].[func_Project_Get_Start_Date] @PROJECT_ID as [Start_Date],***

                   StartBudget , 
                   AdditionalBudget , 
                   TotalBudget  , 
                   UsedBudget ,   
        FROM       BshForecast  INNER  JOIN Job_Type ON BshForecast.JobTypeId = ID                   
        WHERE   (dbo.BshForecast.Year = DATEPART(YYYY,GETDATE()))   
                AND (dbo.BshForecast.IsDeleted = 0) 
                AND (dbo.BshForecast.BranchId = 200)
                AND (dbo.BshForecast.Approved = 1) ); 
```

我想要得到的是第七列将保存每个项目的开始日期，这些项目将从远程服务器中的函数进行评估。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T09:27:30.780

我知道调用远程函数的唯一方法是`openquery`. 但`openquery`只需要一个字符串文字，所以你必须包装对`openquery`in的调用`exec`。

这是一个创建函数并通过名为“localhost”的链接服务器调用它的示例。

```
use TestDatabase
if exists (select * from sys.objects where name = 'fn_twice')
    drop function fn_twice
go
create function dbo.fn_twice(@i int) returns int as begin return 2*@i end
go
declare @i int
set @i = 21

declare @func_sql nvarchar(max)
set @func_sql = 'select @result = a.result from openquery(localhost, ' +
        '''select TestDatabase.dbo.fn_twice(' + 
        cast(@i as varchar(12)) + ') as result'') a'

declare @result int
exec sp_executesql @func_sql, N'@result int output', @result output

-- The result of the function call is now available in @result, and
-- you can use it in a query. 
```

# spring - spring3-annotation-JdbcDaoSupport

> ID：10570521
> 
> 赞同：3
> 
> 时间：2012-05-13T09:02:41.903
> 
> 标签：spring, jdbc, dao

在 dao 中使用注解

```
@Repository("testDao")
public class TestDaoImpl extends JdbcDaoSupport implements BaseDao{

@Override
public Object addObject(String sqlid, Object obj) {
    // TODO Auto-generated method stub
    return null;
} 
```

引起：java.lang.IllegalArgumentException：需要“dataSource”或“jdbcTemplate”

我不想用：</p>

```
<bean id="termsDao" class="com.manage.base.dao.impl.TestDaoImpl">
    <property name="jdbcTemplate" ref="jdbcTemplate"/>
</bean> 
```

这段代码是在xml中设置的，而“jdbcTemplate”已经在其他“spring-xml”中定义了。</p>

如何通过注解解决这个问题：“'dataSource' or 'jdbcTemplate' is required”</p>

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T14:33:00.453

您可以使用以下方法之一。第一个 - 首选/推荐使用数据源，因为您不会在公共接口中公开 SpringFramework 类。两者都会起作用。

```
@Repository("testDao")
public class TestDaoImpl extends JdbcDaoSupport implements BaseDao{

  @Autowired
  TestDaoImpl(DataSource dataSource) {
    setDataSource(dataSource);
  }
} 
```

或者

```
@Repository("testDao")
public class TestDaoImpl extends JdbcDaoSupport implements BaseDao{

  @Autowired
  TestDaoImpl(JDBCTemplate template) {
    setJdbcTemplate(template);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-13T23:35:55.513

我什至觉得将数据源作为 DAO 的构造函数注入是不必要的编码步骤。为什么不将 Spring config XML 中的数据源注入 JDBC 模板，然后在每个 DAO 中获取 jdbctTemplate 对象。

```
<bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
    <property name="dataSource" ref="dataSource"/>
</bean>
and let your DAO extend JDBCSupport class. 
```

* * *

```
public class PersonDao extends JdbcDaoSupport{
public List<Person> selectAll(){
    String selectAllSql = "SELECT * FROM PERSON;";

    return getJdbcTemplate().query(selectAllSql, new PersonRowMapper()); 
```

........ }

}

完整示例： http: [//www.studytrails.com/frameworks/spring/spring-jdbc-dao-support.jsp](http://www.studytrails.com/frameworks/spring/spring-jdbc-dao-support.jsp)

# c++ - 仅在守护线程返回后删除它

> ID：10570524
> 
> 赞同：5
> 
> 时间：2012-05-13T09:03:12.927
> 
> 标签：c++, locking, pthreads

我正在开发一个项目，其中我有一个主线程和一个守护线程来执行文件输出。在我的主线程中，我有一个`pthread_t * _daemon`要删除的字段，但显然只有在`_daemon`返回 NULL 之后（我知道使用`pthread_exit()`会导致内存泄漏）。

我怎么能在没有忙等待的情况下做到这一点？如果我尝试使用条件变量，我会遇到问题 - 当我调用`signal()`表单`_daemon`来唤醒我的主线程时，它会在返回 NULL`_daemon`之前删除。`_daemon`

我所做的只是使用一个互斥锁，该互斥锁在程序启动时锁定并在`_daemon`返回之前解锁。有没有更好的方法不会导致忙等待？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T09:17:11.033

[`pthread_detach()`](http://pubs.opengroup.org/onlinepubs/009604599/functions/pthread_detach.html)做你正在寻找的东西。听起来它会以更少的复杂性解决您的问题（不泄漏）！

因此，当您在另一个线程中完成它时，您可以安全地调用`pthread_detatch(_daemon)`它，而不必担心线程本身是否仍在运行。它不会*终止*线程，而是会在线程终止时清理线程。

从文档中：

> 该`pthread_detach()`函数应向实现指示线程线程的存储可以在该线程终止时回收。如果线程尚未终止，`pthread_detach()`则不应使其终止。

您实际上可以通过以下设置创建一个处于分离状态的线程`attr`：

```
 int pthread_create(pthread_t *thread, const pthread_attr_t *attr,
                      void *(*start_routine) (void *), void *arg); 
```

在创建时适当地。`pthread_create()`手册页说：

> 当一个分离的线程终止时，它的资源会自动释放回系统。[ *snip* ] 使线程分离对于应用程序不需要关心其退出状态的某些类型的守护线程很有用。默认情况下，新线程在可连接状态下创建，除非 attr 设置为在分离状态下创建线程（使用 pthread_attr_setdetachstate(3)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T15:42:59.140

`pthread_t`是 a `unsigned long int`，所以我真的不认为需要创建一个指针`pthread_t`（你也可以在函数中使用它的地址`pthread`），但是如果你坚持，那么你可以在创建 a 后删除它`pthread`（但是你将没有办法与它通信，因为它是许多创建的线程 - 用于加入、分离功能等）。

# java - 为自定义 JTable TableModel 制作 addRows() 方法

> ID：10570531
> 
> 赞同：1
> 
> 时间：2012-05-13T09:04:59.887
> 
> 标签：java, swing, tablemodel

我在下面的解释漫无边际，沸腾了，有没有一种方法可以在不触发事件的情况下添加行，这样我就可以添加多行并触发一个事件来一次更新所有行？无需添加代码来包含自定义模型中的表数据？

我有一个从 DefaultTableModel 扩展的自定义 TableModel，这样我就可以使用 DefaultTableModel 为我跟踪数据，同时仍然有一些我自己的自定义方法。

问题是，当我希望添加多行时，我认为使用“addRows(String[][] val)”方法可能会更快。然后我可以触发一个事件，可能是 fireTableDataChanged() 来一次更新所有行。例如，我目前的方法：

```
JTable table1 = new JTable(new dgvTableModel(new String[] {<values>},0, new String[] {<values>}));
table1.addRow(new String[] {<values here>});
table1.addRow(new String[] {<values here>});
table1.addRow(new String[] {<values here>}); 
```

然后，我会根据需要多次重复上述内容。问题是，每一个都会触发一个单独的事件。如果我可以使用我的自定义表模型来做到这一点，它会快得多（我认为）：

```
JTable table1 = new JTable(new dgvTableModel(new String[] {<values>},0, new String[] {<values>}));
table1.addRows(new String[][] {{<values1 here}, {values2 here}, . . .}}); 
```

然后在表模型中：

```
public void addRows(String[][] values) {
   for (String[] vals : values)           
       super.addRow(vals);
   }
   fireTableDataChanged();
} 
```

我可以轻松地编写代码。问题又是“super.addRow(vals);” line 每次通过都会触发一个事件。有没有办法在不添加代码的情况下让我的模型包含表数据本身，以防止每次添加行时触发该事件？这样它会等待 addRows 方法中的 fireTableDataChanged() 调用吗？

作为参考，我的自定义表格模型的代码：

```
import java.awt.Color;
import java.util.ArrayList;
import javax.swing.UIManager;
import javax.swing.table.DefaultTableModel;

public class dgvTableModel extends DefaultTableModel {
//private DataTable tableVals = new DataTable();
private ArrayList<Color> rowColors;

//private ArrayList<Object[]> data = new ArrayList<>();
//default constructor has no data to begin with.
private int[] editableColumnNames;

public dgvTableModel(String[] colNames, int rowCount)
{
    super(colNames, rowCount);
}

public dgvTableModel(String[] colNames, int rowCount, String[] editableColNames)
{
    super(colNames, rowCount);
    //this.tableVals.setColNames(colNames);
    if (editableColNames!=null && editableColNames.length >0)
    {
        editableColumnNames = new int[editableColNames.length];
        int count = 0;
        for (int i =0; i< editableColNames.length;i++)
        {
            for (String val : colNames)
            {
                if (val.equalsIgnoreCase(editableColNames[i]))
                {
                    editableColumnNames[count] = i;
                    count+=1;
                    break;
                }
            }
        }
    }
}

public dgvTableModel(String[] colNames, int rowCount, String[] editableColNames, boolean colorChanges)
{
    super(colNames, rowCount);
    Color defColor = UIManager.getDefaults().getColor("Table.background");
    if (editableColNames!=null && editableColNames.length >0)
    {
        editableColumnNames = new int[editableColNames.length];
        int count = 0;
        if (colorChanges)
        {
            rowColors = new ArrayList<>();
        }
        for (int i =0; i< colNames.length;i++)
        {
            if (colorChanges)
            {
                rowColors.add(defColor);
            }

            for (String val : editableColNames)
            {
                if (val.equalsIgnoreCase(colNames[i]))
                {
                    editableColumnNames[count] = i;
                    count+=1;
                    break;
                }
            }
        }
    }
    else if (colorChanges)
    {
        rowColors = new ArrayList<>();
        for (String val : colNames)
        {
            rowColors.add(defColor);
        }
    }
}

@Override
public boolean isCellEditable(int row, int column)
{
    if(editableColumnNames!=null && editableColumnNames.length >0)
    {
        for (int colID : editableColumnNames)
        {
            if (column==colID)
                return true;
        }
    }
    return false;
}

public void setRowColor(int row, Color c)
{
    rowColors.set(row, c);
    fireTableRowsUpdated(row,row);
}

public Color getRowColor(int row)
{
    return rowColors.get(row);
}

@Override
public Class getColumnClass(int column)
{
    return String.class;
}

@Override
public String getValueAt(int row, int column)
{
    return super.getValueAt(row, column).toString();
}
} 
```

肯定触发一个事件来显示每一行，比为每一行触发一个事件要快吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T09:59:27.290

“AbstractTableModel.fireTableDataChanged()”用于向模型（以及模型通知的 JTable UI）指示表中所有可能的数据可能已更改并需要检查。这可能（重点是 can）是一项昂贵的操作。如果您知道添加了哪些行，只需使用“AbstractTableModel.fireTableRowsInserted(int firstRow, int lastRow)”方法即可。这将确保只有效果行被视为已更改。看看[AbstractTableModel](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/AbstractTableModel.html)中的所有 fire* 方法。您可以真正对哪些行、单元格等被视为脏的进行细粒度控制。

再说一次，您所做的可能是过早的优化。除非您的 JTable 中有五万条记录，否则这可能不会引起注意。但是，如果您的 JTable 中有大量记录，则无论如何最好延迟加载它们。

# coronasdk - 如何在 Corona 中执行 sleep() 或 wait()？

> ID：10570532
> 
> 赞同：2
> 
> 时间：2012-05-13T09:05:07.470
> 
> 标签：coronasdk

我想暂停应用程序 500 毫秒。我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:35:40.690

你可以使用`timer.performWithDelay()`它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-18T13:58:52.190

```
-- Sleeps for x milliseconds
function usleep(nMilliseconds)
    local nStartTime = system.getTimer()
    local nEndTime = nStartTime + nMilliseconds

    while true do 
        if system.getTimer() >= nEndTime then
            break
        end
    end
 end 
```

那会工作:)

# c++ - C ++中的字符串[长度（）]，可以吗？

> ID：10570534
> 
> 赞同：8
> 
> 时间：2012-05-13T09:05:18.353
> 
> 标签：c++, string, c++11

我同事的代码如下所示：

```
void copy(std::string const& s, char *d) {
  for(int i = 0; i <= s.size(); i++, d++)
    *d = s[i];
} 
```

他的应用程序崩溃了，我认为这是因为访问`s`超出范围，因为条件应该只达到`s.size() - 1`.

但我旁边的其他人说，过去曾讨论过这是否合法。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-13T09:46:19.117

让我们把无效的可能性放在一边，`*d`因为这与问题的目标无关：`std::string operator[]()`在访问 index 处的“元素”时是否具有明确定义的行为`std::string::size()`。

C++03标准对`string::operator[]()`（21.3.4“`basic_string`元素访问”）有如下描述：

> ```
> const_reference operator[](size_type pos) const;
> reference operator[](size_type pos); 
> ```
> 
> 返回：如果`pos < size()`，则返回`data()[pos]`。否则，如果`pos == size()`，则 const 版本返回`charT()`。否则，行为未定义。

由于`s`在示例代码中是`const`，因此行为定义明确，`s[s.size()]`将返回一个空字符。但是，如果`s`不是 a `const string`，则行为将是未定义的。

在这种极端情况下，C++11 纠正了该版本的这种奇怪行为，该`const`行为与非 const 版本的行为如此不同。C++11 21.4.5“`basic_string`元素访问”说：

> ```
> const_reference operator[](size_type pos) const;
> reference operator[](size_type pos); 
> ```
> 
> 要求：`pos <= size()`。
> 
> 返回：`*(begin() + pos`) if `pos < size()`，否则为 T 类型对象的引用，其值为`charT()`；不得修改参考值。

因此，对于 C++11 编译器，无论是否`string`为`const`.

与问题无关，我觉得 C++11 说“不得修改引用的值”有点奇怪——我不清楚该条款是否仅适用于`pos == size()`. 我很确定有大量现有代码可以执行诸如`s[i] = some_character;`where `s`is a non-const`std:string`和`i < s.size()`. 现在是未定义的行为吗？我怀疑该条款仅适用于特殊情况`charT()`对象。

另一个有趣的事情是，这两个标准似乎都没有要求返回的对象的地址与返回的对象`s[s.size()]`的地址有任何关系`s[s.size() - 1]`。换句话说，返回的`charT()`引用似乎不必与字符串数据的末尾连续。我怀疑这是给实现者一个选择，如果需要，只返回对该标记元素的单个静态副本的引用（这也将解释 C++11 的“不得修改”限制，假设它仅适用于特殊案子）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-13T09:08:35.120

[cppreference 是这样说的：](http://en.cppreference.com/w/cpp/string/basic_string/operator_at)

> ```
> reference       operator[]( size_type pos );
> 
> const_reference operator[]( size_type pos ) const; 
> ```
> 
> 如果`pos==size()`,
> 
> *   const 版本返回对值为 CharT() 的字符（空字符）的引用。（直到 C++11）
> *   两个版本都返回对值为 CharT() 的字符（空字符）的引用。通过非常量引用修改空字符会导致未定义的行为。(C++11 起)

所以只要不修改空字符就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T09:09:45.737

如果您想这样做（您同事的代码也尝试复制终止`\0`），您可以

*   使用`c_str()`.
*   使用循环并在之后手动`i < s.size()`附加。`\0`

编辑：
好吧，从其他答案来看，我现在更倾向于认为 Abyx 的评论是正确的：数组`d`可能溢出（或者甚至可能没有被分配）。先检查一下。
但一定要确保你也复制一个`\0`！

# java - Java没有为按钮播放声音

> ID：10570537
> 
> 赞同：3
> 
> 时间：2012-05-13T09:05:34.407
> 
> 标签：java, audio, jbutton

当我单击按钮时，我创建了一个`class`播放声音。

这是代码：

```
public void playSound()
    {
        try 
        {
            AudioInputStream audioInputStream = AudioSystem.getAudioInputStream(new File("beep-1.wav"));
            Clip clip = AudioSystem.getClip( );
            clip.open(audioInputStream);
            clip.start( );
        }
        catch(Exception e)
        {
            System.out.println("Error with playing sound.");
        }
    } 
```

当我想将它实现到`ButtonListener`方法中时，似乎没有播放声音。

这里的`ButtonListener`代码：

```
private class ButtonListener implements ActionListener
    {
        public void actionPerformed(ActionEvent e) 
        {
            if (replayButton == e.getSource()) 
            {
                playSound();
            }
        }
    } 
```

代码有什么问题？

编辑 ：

基本上我正在尝试创建一个简单的记忆游戏，并且我想在单击时为按钮添加声音。

解决了 ：

好像我从[Soundjay](http://www.soundjay.com/)下载的音频文件有问题，因此无法播放音频文件。@_@

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T09:19:10.530

利用

```
SwingUtilities.invokeLater(new Runnable() {
    @Override
    public void run() {
        playSound();
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T09:22:56.550

这应该有效：

```
public class Test extends JFrame {

    public static void main(String[] args) {
        new Test();
    }

    public Test() {
        JButton button = new JButton("play");
        button.addActionListener(new  ActionListener() {
        public void actionPerformed(ActionEvent e) {
                playSound();
        }});
        this.getContentPane().add(button);
        this.setVisible(true);
    }

    public void playSound() {
        try {
            AudioInputStream audioInputStream = AudioSystem.getAudioInputStream(new File("beep.wav"));
            Clip clip = AudioSystem.getClip( );
            clip.open(audioInputStream);
            clip.start( );
        }
        catch(Exception e)  {
            e.printStackTrace( );
        }
    }
} 
```

请注意，在播放文件期间，GUI 将不负责。在你的听众中使用 Joop Eggen 的方法来纠正这个问题。它将异步播放文件。

```
SwingUtilities.invokeLater(new Runnable() {
    public void run() {
        playSound();
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-13T09:12:28.350

任何堆栈跟踪，好吗？？？您是否将侦听器添加到按钮？？？

无论如何，针对跨平台的标准方式存在一些错误。[在http://www.oracle.com/technetwork/java/javase/tech/index-jsp-140239.html](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-140239.html)使用 Java 媒体框架。

# iphone - 如何实现正确的 uinavigationbar 后退按钮功能

> ID：10570539
> 
> 赞同：4
> 
> 时间：2012-05-13T09:05:45.123
> 
> 标签：iphone, objective-c, ios

当我单击搜索显示控制器的取消按钮时，我想返回上一个视图控制器，我使用了以下代码：

```
[self.navigationController popToViewController: [self.navigationController.viewControllers objectAtIndex:0] animated:YES]; 
```

但它给了我以下错误：

> ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“搜索内容导航控制器不得在 -setActive:YES 和 -setActive:NO 之间更改”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T10:05:51.743

[self.navigationController popViewControllerAnimated:YES];

将带您回到堆叠在此导航控制器中的上一个视图控制器。那应该这样做..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T00:08:54.750

I had the same problem and found a solution.

The trick is not to give `searchDisplayController` to call `-setActive:animated:` anywhere but in `-viewWillDisappear`. So you should make your view controller a delegate of the `searchBar` (to catch taps on "cancel" button) and lay a hidden button on background when `searchDisplayController` did become active (to catch taps on empty screen space).

In your view controller implement these methods:

```
- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
    [self.searchDisplayController setActive:NO animated:animated];
}

- (void)searchBarCancelButtonClicked:(UISearchBar *)searchBar
{
    [self.navigationController popViewControllerAnimated:YES];
}

- (void)backgroundClicked:(id)sender
{
    [self.navigationController popViewControllerAnimated:YES];  
}

- (void)searchDisplayControllerDidBeginSearch:(UISearchDisplayController *)controller
{
    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    [button addTarget:self action:@selector(backgroundClicked:) forControlEvents:UIControlEventTouchUpInside];

    CGFloat searchBarHeight = controller.searchBar.frame.size.height;
    button.frame = CGRectOffset(self.view.bounds, 0.f, searchBarHeight) ;
    [self.view addSubview:button];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-13T18:23:36.593

我的问题是 uinavigator 无法设置 searchdisplay 控制器，所以我通过添加以下代码来解决我的问题：

[self.searchDisplayController setActive:NO];

[self.navigationController popViewControllerAnimated:YES];

错误是：

*** 断言失败 -[UISearchDisplayController setActive:animated:], /SourceCache/UIKit_Sim/UIKit-1914.84/UISearchDisplayController.m:617 2012-05-13 19:07:44.696 MyApp[3648:11903] ***由于未捕获的异常而终止应用程序'NSInternalInconsistencyException'，原因：'搜索内容导航控制器不得在 -setActive:YES 和 -setActive:NO 之间更改'

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T09:15:12.517

如果您只需返回上一个视图，则不需要 popToViewController，只需在导航控制器上添加一个后退按钮，您可以单击它返回：-

```
UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithTitle:@"Back"
      style:UIBarButtonItemStylePlain target:nil action:nil];
self.navigationItem.backBarButtonItem = backButton;
[backButton release]; 
```

或者，如果您真的想弹出视图，请使用：-

```
UINavigationController *navController = self.navigationController;      

    [UIView beginAnimations:nil context:NULL]; 
[UIView setAnimationDuration: 0.7];
    [UIView setAnimationTransition:<#UIViewAnimationTransitionCurlDown#> forView:navController.view cache:NO];

    [navController popViewControllerAnimated:NO];

    [UIView commitAnimations]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-13T10:01:12.660

索引 0 处的对象是根视图控制器。所以它是堆栈中的第一个对象。但你只能弹出最后一个对象。而不是使用

```
[self.navigationController popToViewController: [self.navigationController.viewControllers objectAtIndex:0] animated:YES]; 
```

利用

```
[self.navigationController popToViewController: [self.navigationController.viewControllers lastObject] animated:YES]; 
```

或者

```
[self.navigationController popToViewControllerAnimated:YES]; 
```

# php - Paypal - ExpressCheckout - 购物车项目总金额与订单金额不匹配 (10413)

> ID：10570541
> 
> 赞同：0
> 
> 时间：2012-05-13T09:06:29.117
> 
> 标签：php, error-handling, paypal, express-checkout

我正在使用以下内容并一遍又一遍地遇到相同的错误；并注意：AMT 和 ITEMAMT = $paymentAmount。

看在 $deity 的份上，我无法理解为什么金额不匹配。

```
$grandtotal = 0;
for ($i = 0;$i < $numItems;$i++) {
    $subtotal = $theBasket[$i]['item_preco'] * $theBasket[$i]['item_qty'];
    $grandtotal += $subtotal;
    echo $subtotal.'<br>';
    $mCq .= '&L_PAYMENTREQUEST_0_NAME'.$i.'='.htmlentities($theBasket[$i]['item_nome']).
        '&L_PAYMENTREQUEST_0_AMT'.$i.'='.$theBasket[$i]['item_preco'].
        '&L_PAYMENTREQUEST_0_QTY'.$i.'='.$theBasket[$i]['item_qty'];
} 
```

for 循环返回：

&L_PAYMENTREQUEST_0_NAME0=HAMSÁ 手链戒指

&L_PAYMENTREQUEST_0_AMT0=9

&L_PAYMENTREQUEST_0_QTY0=1

```
$paymentAmount = number_format($grandtotal,2);

        $nvpstr = $mCq;
        $nvpstr .= '&PAYMENTREQUEST_0_AMT='.$paymentAmount;
        $nvpstr .= '&PAYMENTREQUEST_0_ITEMAMT='.$paymentAmount;
        $nvpstr = $nvpstr . "&PAYMENTREQUEST_0_PAYMENTACTION=" . $paymentType;
        $nvpstr = $nvpstr . "&RETURNURL=" . $returnURL;
        $nvpstr = $nvpstr . "&CANCELURL=" . $cancelURL;
        $nvpstr = $nvpstr . "&PAYMENTREQUEST_0_CURRENCYCODE=" . $currencyCodeType; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T12:04:00.500

出色地。我把它修好了。问题是：它所说的错误不是“破坏链接”的错误。

而不是 10413（总金额什么的）这是“字段丢失”的简单案例；在这种情况下，`'&L_PAYMENTREQUEST_0_NUMBER'.$i.'='.$theBasket[$i]['ct_item_id']. '&L_PAYMENTREQUEST_0_DESC'.$i.'=descricao'.`那些失踪的人

# php - 获取 foreach 中数组值的序数

> ID：10570542
> 
> 赞同：0
> 
> 时间：2012-05-13T09:06:34.923
> 
> 标签：php, arrays, foreach, count

# 你好，

我想在 foreach 循环中获取数组键的序号。

# 例子

```
<?php
$array = array("id" => 2, "username" => "foobar");
foreach($array as $value){
$array_key = search_array($value, $array);
//find the ordinal number of $array_key from $array here.
echo $value;
} 
```

count 返回数组中数组键的总数，我需要获取数组键的序数。我希望你们明白我的要求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T09:16:17.427

据我了解，如果一个条目有一个字符串键，它在数组中没有序数位置。从[http://php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)：

> PHP 中的数组实际上是一个有序映射。映射是将值与键相关联的类型。这种类型针对几种不同的用途进行了优化；它可以被视为数组、列表（向量）、哈希表（映射的实现）、字典、集合、堆栈、队列等等。由于数组值可以是其他数组，因此树和多维数组也是可能的。

有序映射不会在已经存在的字符串键之上分配序号键。

但是，您可以做的是获得伪序键是增加一个变量。

```
$i=0;

foreach( $array as $key => $value ) {
    echo $i.':'.$key.':'.$value;
    $i++;
} 
```

将回显出数组中的每个序号键、键和值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T09:12:04.357

有另一个变量在每次迭代后都会增加值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T09:14:01.080

您可以像这样使用[当前](http://www.php.net/manual/en/function.current.php)函数：

```
foreach($array as $value){
$array_key = search_array($value, $array);
echo current( $array );
echo $value;
} 
```

或者您可以像这样在循环中添加一个计数器：

```
$count = 0;
foreach($array as $value){
$array_key = search_array($value, $array);
echo $count++;
echo $value;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T09:22:07.767

```
<?php
     $arry = array("id" => 2; "username" => "foobar");
     $idx = 0;
     foreach($array as $value){
         if(array_search(arry, $value)) echo "element found: ".$idx;
         $idx++;
     }
?> 
```

您需要的是另一个变量 - 上面示例中的 $idx 来计算迭代次数，因为您不能使用与它们命名的值相对应的“键”。

搜索功能也确实称为[array_search](http://php.net/manual/en/function.array-search.php)。

# java - 如何从jsp更新查询？

> ID：10570544
> 
> 赞同：2
> 
> 时间：2012-05-13T09:06:55.903
> 
> 标签：java, jsp

我想在 JSP 中通过查询将数据插入数据库。这是我的代码

```
<%@ include file="connect.jsp" %>
<%
        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
    Connection con = DriverManager.getConnection("jdbc:odbc:Driver={Microsoft Access Driver (*.mdb, *.accdb)};DBQ=" + application.getRealPath("WEB-INF/travDB.accdb"));
    Statement st = con.createStatement(1004,1008);
    String user = request.getParameter("username");
    String pass = request.getParameter("pass");
    String konf = request.getParameter("konf");
    String phone = request.getParameter("phone");
    String tribe = request.getParameter("tribe");
    String start = request.getParameter("start");
    String agree = request.getParameter("agree");
    String temp = "";

        query = "insert into msuser (username, password, email, tribe, starting position, population) values ('"+user+"','"+pass+"','"+phone+"','"+tribe+"','"+temp+"',0)";
        st.executeUpdate(query);

        response.sendRedirect("Register.jsp?err=0");

    }

%> 
```

为什么说

```
org.apache.jasper.JasperException: An exception occurred processing JSP page /JSP_H2Soal2_T213/doRegis.jsp at line 82
82:         st.executeUpdate(query); 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T11:29:09.483

```
<sql:update>
    UPDATE table_name
    SET column_name = new_value, column_name1 = new_value1
    WHERE column_name = some_value
</sql:update> 
```

久经考验，百分百有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T09:22:43.153

不要在 JSP 中执行数据库更新——在您的业务层（servlet）中执行此操作。

您应该只使用 JSP 进行演示。

但是，这不是异常的原因。您将需要检查异常的完整堆栈跟踪（同样，如果您可以从 servlet 类记录它，这会更容易）。没有它，就不可能知道问题出在哪里。

其他人也遇到过同样的问题，请参阅：

*   [http://ubuntuforums.org/showthread.php?t=1552551](http://ubuntuforums.org/showthread.php?t=1552551)
*   [http://www.dreamincode.net/forums/topic/170609-mysql-posting-errors-with-jsp/](http://www.dreamincode.net/forums/topic/170609-mysql-posting-errors-with-jsp/)

**编辑**

Asif 的评论可能会解决您的问题：在您的查询中，您有一个包含空格的列名。带有空格的列名是有问题的。检查 DBMS 的转义语法——或者，如果可以，将列名更改为不带空格的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T09:29:30.440

[executeUpdate 返回一个 int](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/Statement.html#executeUpdate%28java.lang.String%29)。

尝试以下更改：

```
int result;
result = st.executeUpdate(query); 
```

# visual-studio - Visual Studio 2008 中用于 CUDA 的 Intellisense

> ID：10570548
> 
> 赞同：0
> 
> 时间：2012-05-13T09:08:00.740
> 
> 标签：visual-studio, cuda

我已经正确安装了 VS 2008 和 CUDA 驱动程序等等。我能够编译 .cu 文件，并且我已经从 usertype.dat 文件中添加了语法突出显示，我还包括所需的头文件，但智能感知仍然无法正常工作。在 VS 2008 中我们可以在没有 Visual Assist 的情况下拥有智能感知吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T07:21:51.537

以下是我在 VS 2008 中启用 cuda 智能感知的步骤。

1.  关闭 Visual Studio。
2.  转到 CUDA 工具包目录。
3.  打开名为 extras 的文件夹。
4.  打开名为 visual_studio_integration 的文件夹。
5.  运行文件“gpucomputing_intellisense.reg”
6.  按 ok 出现提示。
7.  重新启动系统。

就这样。:)

# c++ - 如何在 Visual Studio 中使用 OpenCV 2.4 静态库？

> ID：10570551
> 
> 赞同：8
> 
> 时间：2012-05-13T09:08:41.650
> 
> 标签：c++, visual-studio-2010, opencv

我正在尝试按如下方式设置 OpenCV 2.4：

*   我已将预编译包下载并解压缩到`C:\OpenCV240`.
*   在 Visual Studio 中，我添加`C:\OpenCV240\build\include`了一个额外的包含目录。
*   此外，我添加`C:\OpenCV240\build\x86\vc10\staticlib`了一个额外的库目录。
*   我已经将所有可用的 .lib 文件指定为附加依赖项。

当我编译我的“Hello World”程序（使用 DLL 时编译得很好）时，我收到了很多这样的错误消息：

> 1>msvcprtd.lib(MSVCP100D.dll) : 错误 LNK2005: "public: __thiscall std::_Container_base12::~_Container_base12(void)" (??1_Container_base12@std@@QAE@XZ) 已经在 opencv_core240d.lib(matrix .obj)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-13T11:33:42.057

听起来您需要在程序中指定针对静态 C 运行时库的链接。

如果 OpenCV 与静态 CRT 链接，而您使用动态 CRT，则会出现这些类型的重新定义错误。

要更改此设置，请打开项目的属性并转到`Configuration Properties -> C/C++ -> Code Generation`。

`Runtime Library`从更改`Multi-threaded Debug DLL (/MDd)`为`Multi-threaded Debug (/MTd)`。对您的其他配置执行相同的操作，在适当的情况下使用非调试变体。

# iphone - 如何设置 iPhone 的振动长度？

> ID：10570553
> 
> 赞同：2
> 
> 时间：2012-05-13T09:09:02.390
> 
> 标签：iphone, iphone-vibrate

我正在使用 AudioServicesPlaySystemSound 来调用振动功能：

```
AudioServicesPlaySystemSound(kSystemSoundID_Vibrate); 
```

有什么方法可以设置振动的持续时间吗？我知道默认持续时间是 0.4 秒，但我有时想让设备振动的时间更少或更多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-06-12T09:21:13.770

您可以使用这些数字来减少振动。

```
AudioServicesPlaySystemSound(1519); // Weak 
AudioServicesPlaySystemSound(1520); // Strong 
```

您可以合并两三个振动以获得更长的振动持续时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T12:46:32.767

您不能更改振动的持续时间。如果您想要更多，则必须将其设置为在第一次完成后立即开始振动，但众所周知，Apple 会拒绝这样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-13T09:21:30.723

我认为改变振动持续时间是不可能的。即使您使用某些库来实现它，但我认为 Apple 不会对此感到高兴。您的应用程序有可能被拒绝..

# php - 使用jquery比较表中不同行中单元格的值

> ID：10570554
> 
> 赞同：0
> 
> 时间：2012-05-13T09:09:07.273
> 
> 标签：php, jquery

我有一个动态生成的 php 表，它具有相同的行。需要从第 1 行的单元格 1 和第 2 行的单元格 1 中获取值并进行比较。如果它们相同，请删除整行或隐藏...对整个表格执行此操作...感谢任何帮助..谢谢！

到目前为止：

```
var numRows = $('table#changeSubjectKatedra tr').lenght;
var i = 0;
do {
    var cur = $('input#'+i).val();
    var next = $('input#'+(i+1)).val();
    if(cur == next){
        $('tr#'+i).remove();
        }
    i++;
} while(i<numRows); 
```

表中的行如下所示：

```
<tr id='idNum'><td>someText<input type='hidden' value='someData' id='idNum'>
</td><td>someText</td></tr> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T09:20:28.613

注意 1\. 你应该在服务器端使用 PHP，而不是 JavaScript。

注意 2\. 您必须为每个元素使用唯一的 id。

注意 3\. 避免使用元素的数字 id。

注意 4\. 你根本不需要 id 来做你想做的事。

如果你仍然想用 JavaScript 做，我建议你这样做：（[现场演示在这里](http://jsfiddle.net/riateche/2AvKa/)）

```
var rows = $("#changeSubjectKatedra tr");
for(var i = 0; i <= rows.length - 2; i++) {
  if ($(rows[i]).find("input").val() ==
      $(rows[i+1]).find("input").val()) {
    $(rows[i]).remove();   
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T09:29:22.867

您可以使用 jQuery 的 .each 函数。这应该根据您提供的描述起作用：

```
$('table#changeSubjectKatedra tr').each(function() {
    if (repeat == $(this).children("input")[0].value) {
        $(this).remove();
    }
    repeat = $(this).children("input")[0].value;
}); 
```

# sql - 将查找值插入多列

> ID：10570556
> 
> 赞同：2
> 
> 时间：2012-05-13T09:09:46.483
> 
> 标签：sql, sqlite

我有以下表格：

```
Table A:
id int
v1 string
v2 string

Table B:
key int
val string

Table A_v2:
id int
v1 int
v2 int 
```

我在表 A 和 B 中加载了数据。我正在尝试将表 A 转换为表 A_v2，方法是将每个值（在列`v1`和中`v2`）替换为表 B 中的相应键。

我希望这是有道理的。如果不是我可以举个例子。
我正在使用 SQLite。

我将如何编写插入？

**编辑**
这是一个例子：

A 行：
1 | 美国广播公司 | 定义

B 中的行数：
5 | 美国广播公司 42 | 定义

A_v2 中的行应该是：
1 | 5 | 42

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T12:05:09.570

据我了解..您想用 TABLE_B 中的 VAL 列的值替换 TABLE_A 的 V1 和 V2 列。

如果是这样，您可以使用以下查询..

```
create table table_a_v2 as 
       select * from table_a where 1>1; 
```

> 并插入此表 -

```
insert into table_a_v2 
select a.id,
       (select key from table_b whare val= a.v1) v1,
       (select key from table_b whare val= a.v2) v2
 from table_a 
```

我不太确定 sqlite .. 但是这个命令是有效的并且按照 oracle 数据库工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T13:39:27.900

就个人而言，我更喜欢在 where 子句中保留连接，所以我会使用以下内容：

```
insert into A_v2(id, v1, v2)
    select a.id, bv1.key, bv2.key
    from a left outer join
         b bv1
         on a.v1 = bv1.val left outer join
         b bv2
         on a.v2 = bv2.val 
```

请注意“b”表中“key”的多个值。在这种情况下，这些值将返回多行。

您可以通过独立于“插入”运行“选择”查询来验证结果。

# python - wxPython StyleSetSpec 和 SetLexer 不工作？

> ID：10570560
> 
> 赞同：2
> 
> 时间：2012-05-13T09:10:48.117
> 
> 标签：python, wxpython, lexer, wxwidgets

好的，让我们直奔主题。我有 2 个问题
1\. 为什么 self.StyleSetSpec(stc.STC_STYLE_DEFAULT, "fore:#000000" + FontSet) 不起作用？
2\. 为什么没有应用自定义词法分析器？

这是源代码

```
import wx, re, keyword
from wx import stc

class BaseLexer(object):
  """Defines simple interface for custom lexer objects"""
  def __init__(self):
    super(BaseLexer, self).__init__()

  def StyleText(self, event):
    raise NotImplementedError

class STC_LEX_VOTONUSA(BaseLexer):
  # Define some style IDs
  STC_VOTONUSA_DEFAULT = wx.NewId()
  STC_VOTONUSA_VALUE = wx.NewId()
  STC_VOTONUSA_OBJECT = wx.NewId()
  STC_VOTONUSA_TYPE = wx.NewId()
  STC_VOTONUSA_OPERATION = wx.NewId()
  STC_VOTONUSA_COMMENT =wx.NewId()
  STC_VOTONUSA_QUALIFIER = wx.NewId()

  def __init__(self):
    super(STC_LEX_VOTONUSA, self).__init__()
    # Attributes
    self.Comment = re.compile("""
     //
     """, re.X)
    self.Types = re.compile("""
     \\b
     (void|integer|shortint|(short)?word|float|boolean|char|record|program|module)
     \\b
     """, re.I|re.X)
    self.Operation = re.compile("""
     (read|write)(line)?|if|main|case|while|use|return|exit|in_case|repeat_until
     (\+|-|\*|/|%|\*\*|:|!|<|>)?=?|
     (\{|\}|\(|\)|\[|\])
     """, re.I|re.X)
    self.Value = re.compile("""
     [(`\d*)+\'\w*\']*|\'.*\'|[\+-]*\d*\.?\d*
     """, re.I|re.X)
    self.Qualifier = re.compile("""
     interface|implementation
     """, re.I|re.X)
    self.Object = re.compile("""
     s
     """, re.I|re.X)

  def GetLastWord(self, Line, CaretPos):
    """
    Get the last word from a line
    """
    LastWord = re.search(
     """
     \s*
     (
      ".*"|                           # String data type
      \w*|                            # Any letter/number
      (\+|-|\*|/|%|\*\*|:|!|<|>)?=?|  # Assignment, Comparison & Mathematical
      (\{|\}|\(|\)|\[|\])             # Brackets
     )
     \s*\Z
     """,
     Line[:CaretPos], re.VERBOSE)
    return LastWord

  def StyleText(self, event):
    """Handle the EVT_STC_STYLENEEDED event"""
    Obj = event.GetEventObject()

    # Get Last Correctly Styled
    LastStyledPos = Obj.GetEndStyled()

    # Get Styling Range
    Line = Obj.LineFromPosition(LastStyledPos)
    StartPos = Obj.PositionFromLine(Line)
    EndPos = event.GetPosition()

    # Walk the Range and Style Them
    while StartPos < EndPos:
      Obj.StartStyling(StartPos, 0x1f)
      LastWord = self.GetLastWord(Line, CaretPos)
      if self.Comment.search(LastWord):
        # Set Comment Keyword style
        Style = self.STC_VOTONUSA_COMMENT
      elif self.Type.search(LastWord):
        # Set Type Keyword style
        Style = self.STC_VOTONUSA_TYPE
      elif self.Operation.search(LastWord):
        # Set Operation Keyword style
        Style = self.STC_VOTONUSA_OPERATION
      elif self.Value.search(LastWord):
        # Set Value Keyword style
        Style = self.STC_VOTONUSA_VALUE
      elif self.Qualifier.search(LastWord):
        # Set Qualifier Keyqord style
        Style = self.STC_VOTONUSA_QUALIFIER
      elif self.Object.search(LastWord):
        # Set Object Keyword style
        Style = self.STC_VOTONUSA_OBJECT
      # Set the styling byte information for length of LastWord from
      # current styling position (StartPos) with the given style.
      Obj.SetStyling(len(LastWord), Style)
      StartPos += len(LastWord)

class CustomSTC(stc.StyledTextCtrl):
  def __init__(self, parent):
    super(CustomSTC, self).__init__(parent)
    # Attributes
    self.custlex = None
    Font = wx.Font(12, wx.FONTFAMILY_MODERN, wx.FONTSTYLE_NORMAL, wx.FONTWEIGHT_NORMAL)
    Face = Font.GetFaceName()
    Size = Font.GetPointSize()

    # Setup
    kwlist = u" ".join(keyword.kwlist)
    self.SetKeyWords(0, kwlist)
    self.StyleClearAll()
    self.SetLexer(wx.NewId(), STC_LEX_VOTONUSA)
    self.EnableLineNumbers()
    FontSet = "face:%s, size:%d" % (Face, Size)

    self.StyleSetSpec(stc.STC_STYLE_LINENUMBER, FontSet)
    # Set Default to Black
    self.StyleSetSpec(stc.STC_STYLE_DEFAULT, "fore:#000000" + FontSet)
    # Set Comment to Pink
    self.StyleSetSpec(STC_LEX_VOTONUSA.STC_VOTONUSA_COMMENT, "fore:#ff007f" + FontSet)
    # Set Value to Green
    self.StyleSetSpec(STC_LEX_VOTONUSA.STC_VOTONUSA_VALUE, "fore:#00ff00" + FontSet)
    # Set Object to Brown
    self.StyleSetSpec(STC_LEX_VOTONUSA.STC_VOTONUSA_OBJECT, "fore:#a52a2a" + FontSet)
    # Set Type to Red
    self.StyleSetSpec(STC_LEX_VOTONUSA.STC_VOTONUSA_TYPE, "fore:#ff0000" + FontSet)
    # Set Operation to Blue
    self.StyleSetSpec(STC_LEX_VOTONUSA.STC_VOTONUSA_OPERATION, "fore:#0000ff" + FontSet)
    # Set Qualifier to Orange
    self.StyleSetSpec(STC_LEX_VOTONUSA.STC_VOTONUSA_QUALIFIER, "fore:#cc3232" + FontSet)

    # Event Handlers
    self.Bind(stc.EVT_STC_STYLENEEDED, self.OnStyle)

  def EnableLineNumbers(self, enable=True):
    """Enable/Disable line number margin"""
    if enable:
      self.SetMarginType(1, stc.STC_MARGIN_NUMBER)
      self.SetMarginMask(1, 0)
      self.SetMarginWidth(1, 25)
    else:
      self.SetMarginWidth(1, 0)

  def OnStyle(self, event):
    # Delegate to custom lexer object if one exists
    if self.custlex:
      self.custlex.StyleText(event)
    else:
      event.Skip()

  def SetLexer(self, lexerid, lexer=None):
    """
    Overrides StyledTextCtrl.SetLexer
    Adds optional param to pass in custom container
    lexer object.
    """
    self.custlex = lexer
    super(CustomSTC, self).SetLexer(lexerid)

class NUSAIPT(wx.Frame):
  def __init__(self, *args, **kwargs):
    wx.Frame.__init__(self, None, wx.ID_ANY, 'VOTO NUSA IPT')
    self.TextArea = CustomSTC(self)
    self.Show()

app = wx.App()
frame = NUSAIPT()
app.MainLoop() 
```

如果我改变

```
self.SetLexer(wx.NewId(), STC_LEX_VOTONUSA) 
```

进入

```
self.SetLexer(stc.STC_LEX_CPP) 
```

和

```
self.StyleSetSpec(STC_LEX_VOTONUSA.STC_VOTONUSA_COMMENT, "fore:#ff007f" + FontSet) 
```

进入

```
self.StyleSetSpec(stc.STC_C_COMMENT, "fore:#ff007f" + FontSet) 
```

评论突出显示有效。所以错误应该在`self.SetLexer(wx.NewId(), STC_LEX_VOTONUSA)`或`STC_LEX_VOTONUSA.STC_VOTONUSA_COMMENT`

提前致谢。希望很快能看到一些答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T08:03:07.913

昨天刚遇到同样的问题，这是我的结果。希望还为时不晚:)

首先，我将词法分析器设置为这个，并像你一样设置内部词法分析器：

```
self.SetLexer(stc.STC_LEX_CONTAINER)
self.custlex = SCT_LEX_ERLANG_IDNOISE(self) 
```

绑定到事件和 OnStyle 方法是相同的。

而且我将样式的 ID从 1 更改`wx.newId()`为仅从 1 开始的数字。没有它，我根本看不到任何样式。也`stc.STC_STYLE_DEFAULT`开始工作了。

完整清单：

```
class SCT_LEX_ERLANG_IDNOISE(BaseLexer):
    STC_ERLANG_IDNOISE_DEFAULT = 1
    STC_ERLANG_IDNOISE_VARIABLE = 2
    STC_ERLANG_IDNOISE_ATOM = 3
    STC_ERLANG_IDNOISE_MODULE = 4
    STC_ERLANG_IDNOISE_KEYWORD = 5
    STC_ERLANG_IDNOISE_COMMENT = 6
    STC_ERLANG_IDNOISE_MACROS = 7
    STC_ERLANG_IDNOISE_NUMBER = 8

    def __init__(self, control):
        super(SCT_LEX_ERLANG_IDNOISE, self).__init__(control)
        self.typeFormatDict = {}
        self.typeFormatDict["other"] = SCT_LEX_ERLANG_IDNOISE.STC_ERLANG_IDNOISE_DEFAULT
        self.typeFormatDict["variable"] = SCT_LEX_ERLANG_IDNOISE.STC_ERLANG_IDNOISE_VARIABLE
        self.typeFormatDict["atom"] = SCT_LEX_ERLANG_IDNOISE.STC_ERLANG_IDNOISE_ATOM
        self.typeFormatDict["module"] = SCT_LEX_ERLANG_IDNOISE.STC_ERLANG_IDNOISE_MODULE
        self.typeFormatDict["keyword"] = SCT_LEX_ERLANG_IDNOISE.STC_ERLANG_IDNOISE_KEYWORD
        self.typeFormatDict["comment"] = SCT_LEX_ERLANG_IDNOISE.STC_ERLANG_IDNOISE_COMMENT
        self.typeFormatDict["macros"] = SCT_LEX_ERLANG_IDNOISE.STC_ERLANG_IDNOISE_MACROS
        self.typeFormatDict["number"] = SCT_LEX_ERLANG_IDNOISE.STC_ERLANG_IDNOISE_NUMBER

    def StyleText(self, event):
        start = self.control.GetEndStyled()
        end = event.GetPosition()
        line = self.control.LineFromPosition(start)
        start = self.control.PositionFromLine(line)
        text = self.control.GetTextRange(start, end)

        self.control.StartStyling(start, 0x1f)
        lastEnd = 0
        for type, start, end, value in getHighlightRules(text):
            style = SCT_LEX_ERLANG_IDNOISE.STC_ERLANG_IDNOISE_DEFAULT
            if start > lastEnd:
                self.control.SetStyling(start - lastEnd, style)
            if type in self.typeFormatDict:
                style = self.typeFormatDict[type]
            self.control.SetStyling(len(value), style)
            lastEnd = end

class CustomSTC(stc.StyledTextCtrl):
    def __init__(self, parent):
        super(CustomSTC, self).__init__(parent)
        self.custlex = SCT_LEX_ERLANG_IDNOISE(self)

        #self.SetKeyWords(0, kwlist)

        self.SetLexer(stc.STC_LEX_CONTAINER)
        self.EnableLineNumbers()

        self.StyleSetSpec(stc.STC_STYLE_DEFAULT, ColorSchema.formats["other"])
        self.StyleClearAll()
        self.StyleSetSpec(stc.STC_STYLE_LINENUMBER, ColorSchema.lineFont)
        self.StyleSetSpec(SCT_LEX_ERLANG_IDNOISE.STC_ERLANG_IDNOISE_DEFAULT, ColorSchema.formats["other"])
        self.StyleSetSpec(SCT_LEX_ERLANG_IDNOISE.STC_ERLANG_IDNOISE_VARIABLE, ColorSchema.formats["variable"])
        self.StyleSetSpec(SCT_LEX_ERLANG_IDNOISE.STC_ERLANG_IDNOISE_ATOM, ColorSchema.formats["atom"])
        self.StyleSetSpec(SCT_LEX_ERLANG_IDNOISE.STC_ERLANG_IDNOISE_MODULE, ColorSchema.formats["module"])
        self.StyleSetSpec(SCT_LEX_ERLANG_IDNOISE.STC_ERLANG_IDNOISE_KEYWORD, ColorSchema.formats["keyword"])
        self.StyleSetSpec(SCT_LEX_ERLANG_IDNOISE.STC_ERLANG_IDNOISE_COMMENT, ColorSchema.formats["comment"])
        self.StyleSetSpec(SCT_LEX_ERLANG_IDNOISE.STC_ERLANG_IDNOISE_MACROS, ColorSchema.formats["macros"])
        self.StyleSetSpec(SCT_LEX_ERLANG_IDNOISE.STC_ERLANG_IDNOISE_NUMBER, ColorSchema.formats["number"])

        # Event Handlers
        self.Bind(stc.EVT_STC_STYLENEEDED, self.OnStyle)

    def EnableLineNumbers(self, enable=True):
        """Enable/Disable line number margin"""
        if enable:
            self.SetMarginType(1, stc.STC_MARGIN_NUMBER)
            self.SetMarginMask(1, 0)
            self.SetMarginWidth(1, 35)
        else:
            self.SetMarginWidth(1, 0)

    def OnStyle(self, event):
        if self.custlex:
            self.custlex.StyleText(event)
        else:
            event.Skip() 
```

# .net - 将试用期添加到 .NET 应用程序

> ID：10570561
> 
> 赞同：-2
> 
> 时间：2012-05-13T09:10:53.580
> 
> 标签：.net, protection, shareware

> **可能重复：**
> [需要有关实施限时试验的建议](https://stackoverflow.com/questions/197999/need-advice-on-implementing-a-time-limited-trial)

我需要将试用期添加到我的 .NET 应用程序中。听说破解.NET应用比破解原生exe应用容易。所以我不想使用付费的第三方解决方案来做到这一点，因为我认为这有点毫无意义：如果有人想破解它，他无论如何都会这样做。

但是我应该使用什么来尽可能保护应用程序不被破解呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T09:32:55.433

无论您如何打包或混淆您的程序集，互联网上总会有一些人能够破解它。如果您的程序包含从服务器接收的动态信息，您应该使用该服务器保护它，验证是否允许指定的用户/机器获取信息，他们无法破解任何服务器端内容（除非他们侵入您的服务器）。很可能需要数据库来执行此操作。

如果你没有任何动态内容（我认为你应该总是有一些，特别是在使用试用期时），我会去混淆&如果你有时间，看看如何制作你自己的混淆器，这样破解者将需要更多是时候破解您自定义的混淆方式了，如果您使用流行的混淆器之一，破解者将在 1 秒内拥有大量程序来反混淆。

如果您将任何信息存储在注册表甚至您的服务器中，您应该对其进行加密。加密并尝试隐藏加密方法（这些是您真正应该混淆的功能）。

[这个问题](https://stackoverflow.com/questions/197999/need-advice-on-implementing-a-time-limited-trial)也有一些有用的答案。

# asp.net - 如何合并数据表中具有相同值的行（VB）

> ID：10570564
> 
> 赞同：1
> 
> 时间：2012-05-13T09:11:47.123
> 
> 标签：asp.net, vb.net, datatable, datarow, merge-replication

我有一个数据表 tempDT，其值为：

```
Serial_No                      testong
---------------------------------------
DTSHCSN001205035919201         [ OUT ] <br/> Partner : 90000032 <br/> Date : 16 Feb 2012
DTSHCSN001205035919201         [ IN ] <br/> Partner : 90000032 <br/> Date : 16 Feb 2012
DTSHCSN001205035919201         [ OUT ] <br/> Partner : 80000869 <br/> Date : 31 Mar 2012
DTSHCSN001205035919201         [ IN ] <br/> Partner : 80000869 <br/> Date : 31 Mar 2012 
```

问题是我想将重复的 serial_no 合并到一行中，将 testong 的值添加到新列中。

我尝试了很多方法，但我找不到解决方案。

这是我背后的代码：

```
 Dim tempDt = GetItemDataTable()
    Dim dtData As New DataTable

    dtData.Columns.Add("Serial_No")
    Dim i As Integer = 0
    Dim row As DataRow

    For Each row In tempDt.Rows
        i += 1
        Dim dr As DataRow = dtData.NewRow
        dr("Serial_No") = row(0)
        If dr("Serial_No") = row(0) Then
            Dim colBaru As GridViewDataTextColumn = New GridViewDataTextColumn()
            colBaru.Caption = i
            colBaru.FieldName = i
            colBaru.CellStyle.HorizontalAlign = HorizontalAlign.Center
            colBaru.HeaderStyle.HorizontalAlign = HorizontalAlign.Center
            colBaru.Width = 150

            colBaru.UnboundType = DevExpress.Data.UnboundColumnType.Integer
            colBaru.VisibleIndex = grid.VisibleColumns.Count
            colBaru.PropertiesTextEdit.DisplayFormatString = "d1"
            colBaru.PropertiesTextEdit.EncodeHtml = True
            grid.Columns.Add(colBaru)
            dtData.Columns.Add(i)
            dr(i) = row(3)
            dtData.Rows.Add(dr)

        Else
            dr("Serial_No") = row(0)
            dtData.Rows.Add(dr)
        End If 
```

当我调试结果是： ![错误的结果](../Images/016ea816f127ffc33357a937a0a0d17f.png)

但我希望结果是这样的： ![在此处输入图像描述](../Images/93a9c6d42a02e90bf20fdd1fcbabc28e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T01:19:59.387

我已经更新了我的代码，所以它会查看列而不是使用变量 i

```
Dim tempDt = GetItemDataTable()
Dim dtData As New DataTable

'initial the first and second columns
dtData.Columns.Add("Serial_No")
dtData.Columns.Add("1")

Dim i As Integer = 0
Dim row As DataRow

For Each row In tempDt.Rows
    Dim dr As DataRow
    i += 1
    'check if the serial no exists in the new Data Table
    If dtData.Select("Serial_No='" & row(0) & "'").Length > 0 Then

        'If found, then get the existing row
        dr = dtData.Select("Serial_No='" & row(0) & "'")(0)

        'Create new GridViewDataTextColumn
        Dim colBaru As GridViewDataTextColumn = New GridViewDataTextColumn()
        colBaru.Caption = i
        colBaru.FieldName = i
        colBaru.CellStyle.HorizontalAlign = HorizontalAlign.Center
        colBaru.HeaderStyle.HorizontalAlign = HorizontalAlign.Center

        colBaru.UnboundType = DevExpress.Data.UnboundColumnType.Integer
        colBaru.VisibleIndex = grid.VisibleColumns.Count
        colBaru.PropertiesTextEdit.DisplayFormatString = "d1"
        colBaru.PropertiesTextEdit.EncodeHtml = False
        grid.Columns.Add(colBaru)

        'I assume you are adding the Number as the columns name
        'Only need to create if the Column doesn't exist
        If dtData.Columns.count - 1 < i Then
            dtData.Columns.Add(i.ToString) 
        End If

        'Use variable i here
        dr(i) = row(3)

        'Comment this out as you don't need to
        'dtData.Rows.Add(dr)
    Else

        'reset value of i
        i = 1

        'If not found, then create a new row  
        dr = dtData.NewRow
        ' i put this to add the serial_no value to datatable
        dr("Serial_No") = row(0)

        'for adding first value i with same row as serial_no
        Dim colBaru As GridViewDataTextColumn = New GridViewDataTextColumn()
        colBaru.Caption = i
        colBaru.FieldName = i
        colBaru.CellStyle.HorizontalAlign = HorizontalAlign.Center
        colBaru.HeaderStyle.HorizontalAlign = HorizontalAlign.Center

        colBaru.UnboundType = DevExpress.Data.UnboundColumnType.Integer
        colBaru.VisibleIndex = grid.VisibleColumns.Count
        colBaru.PropertiesTextEdit.DisplayFormatString = "d1"
        colBaru.PropertiesTextEdit.EncodeHtml = False
        grid.Columns.Add(colBaru)

        'dtData.Columns.Add("1")

        'Would be better to use back variable i if you have reset it
        dr(i) = row(3)

        dtData.Rows.Add(dr)
    End If
Next 
```

# ios - 检索 iOS 设备标准背景图像

> ID：10570566
> 
> 赞同：1
> 
> 时间：2012-05-13T09:12:03.840
> 
> 标签：ios, image, cocoa-touch

是否可以从应用程序访问 Apple 的标准背景图像（壁纸）之一？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T11:39:00.393

一些 Apple 模式可供使用。查看[`UIColor`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIColor_Class/Reference/Reference.html)“系统颜色”文档。以下是您可以使用的一些：

`groupTableViewBackgroundColor`（细条纹）
`viewFlipsideBackgroundColor`
`scrollViewTexturedBackgroundColor`（来自通知等的新亚麻纹理）
`underPageBackgroundColor`（在地图中的页面卷曲下）

像这样使用它：

```
UIColor *myBackgroundColor = [UIColor scrollViewTexturedBackgroundColor]; 
```

[请参阅此处的示例。](http://www.iphonedevwiki.net/index.php/UIColor)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T09:19:21.093

不 你不能而且你必须知道 iPhone 的沙盒环境不允许从 iPhone 上的任何其他应用程序访问任何资源，除了一些如联系人、电子邮件应用程序等。此外，如果你使用会存在版权问题相同的图像。你可以google一下图片：）

# android - 安卓。TabActivity，在选项卡之间切换而不破坏来自 tabHost 的活动

> ID：10570568
> 
> 赞同：1
> 
> 时间：2012-05-13T09:12:07.730
> 
> 标签：android, android-activity, tabactivity

我创建了一个使用 TabActivity 的应用程序。一切都还好，直到某一刻……

每次切换选项卡时，来自 tabHost 的活动都会被销毁并重新创建。我记录了 Activity 的每个状态，发现当 tab 获得焦点时被称为 methosd：onCreatr()、onStart()、onResume()，而当 tab 失去焦点时被称为 onStop()、onDestroy()

如何在不破坏和重新创建活动的情况下切换选项卡。？？？

对不起我的英语不好 ：）

主类

```
package my.pack;

import android.app.TabActivity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TabHost;

public class Main extends TabActivity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        TabHost tabHost = getTabHost();
        TabHost.TabSpec spect;
        Intent intent;

        intent = new Intent().setClass(this, ListDevice.class);
        spect = tabHost.newTabSpec("test").setIndicator("Device").setContent(intent);
        tabHost.addTab(spect);

        intent = new Intent().setClass(this, ListServer.class);
        spect = tabHost.newTabSpec("test").setIndicator("Server").setContent(intent);
        tabHost.addTab(spect);

        tabHost.setCurrentTab(0);
    }
} 
```

ListServer.class（用于tabHost）

```
package my.pack;

import java.io.File;
import java.util.ArrayList;
import android.app.ListActivity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.ListView;

public class ListServer extends ListActivity {

    private File file = new File(".");
    private ArrayList<File> values = new ArrayList<File>();
    private CopyOfMyPerformanceArrayAdapter adapter;

    public void onCreate(Bundle icicle) {
        Log.d("test","server");
        super.onCreate(icicle);
        for (File f: file.listFiles()) {
            if (f.isDirectory()) values.add(f);
        }
        for (File f: file.listFiles()) {
            if (f.isFile()) values.add(f);
        }

        View footer = getLayoutInflater().inflate(R.layout.footer, null);
        getListView().addFooterView(footer);

        adapter = new CopyOfMyPerformanceArrayAdapter(this,values);
        setListAdapter(adapter);
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        try{
        File file = (File) getListAdapter().getItem(position);

        if (file.isDirectory()) {
            adapter.clear();
            for (File f: file.listFiles()) {
                values.add(f);
            }
        adapter.notifyDataSetChanged();
        }} catch(Exception e) { Log.d("opa", "server");}

    }

    public void onRestart(){
        Log.d("ftp","onRestart");
        super.onRestart();
    }
    public void onStart(){
        Log.d("ftp","onStart");
        super.onStart();
    }
    public void onResume(){
        Log.d("ftp","onResume");
        super.onResume();
    }
    public void onPouse(){
        Log.d("ftp","onpouse");
        super.onPause();
    }
    public void onStop(){
        Log.d("ftp","onStop");
        super.onStop();
    }
    public void onDestroy(){
        Log.d("ftp","onDestroy");
        super.onDestroy();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T10:47:54.050

您可能需要考虑使用 Fragments 来创建您的选项卡，如此处所述但是，[此处](http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/) 显示的示例也会在交换选项卡内容（即片段）时破坏（在 onTabChanged() 中）。幸运的是，您可以改变这种行为。如果您注意到该示例使用了 FragmentTransaction.add() 和 FragmentTransaction.remove()，但您可以将它们更改为[FragmentTransaction.show()](http://developer.android.com/reference/android/app/FragmentTransaction.html#show%28android.app.Fragment%29)和[FragmentTransaction.hide()。](http://developer.android.com/reference/android/app/FragmentTransaction.html#hide%28android.app.Fragment%29)这样，您的 Fragment 活动在切换到视野之外时不会被破坏

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-17T13:07:20.513

为每个选项卡规范使用不同的键，

替换...这个

```
spect = tabHost.newTabSpec("test")
spect = tabHost.newTabSpec("test") 
```

和

```
spect = tabHost.newTabSpec("test1")
spect = tabHost.newTabSpec("test2") 
```

这项工作对我来说..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T15:13:03.783

您的标签具有相同的标签 - “测试”。只需指定不同的标签，一切都应该没问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T20:53:17.457

我认为 onDestroy 上的 moveTaskToBack 应该可以工作。

# c++ - wxNotebookPage 中的 wx* 布局

> ID：10570575
> 
> 赞同：1
> 
> 时间：2012-05-13T09:12:50.033
> 
> 标签：c++, wxwidgets, wxnotebook

我正在尝试为调度应用程序编程前端。在我的主选项卡中应该有两个列表（一个在另一个之上）。但这似乎是不可能的（我昨天坐了半天，今天又坐了三个小时）。所以这是我的结果：

![在此处输入图像描述](../Images/91b64cf9b1193c07825c79e03b78b004.png)

这是我的代码的共同部分：

```
 // LayoutManagement - Main
    sizer = new wxBoxSizer(wxVERTICAL);
    this->SetSizer(sizer);

    // Tabpane
    tab_pane = new wxNotebook(this,TAB_PANE);
    sizer->Add(tab_pane,1,wxEXPAND);

    // Overview tab
    wxBoxSizer *ot_sizer = new wxBoxSizer(wxVERTICAL);
    overview_tab = new wxNotebookPage(tab_pane,TAB_OVERVIEW);
    overview_tab->SetSizer(ot_sizer);
    tab_pane->AddPage(overview_tab,_("Countdown und Nachrichten"),true);

    // Schedule
    schedule_list = new wxListBox(overview_tab, SCHEDULE_LIST);
    ot_sizer->Add(schedule_list,1,wxEXPAND);

    // NewsList
    news_list = new wxListBox(overview_tab,NEWS_LIST);
    ot_sizer->Add(news_list,3,wxEXPAND); 
```

我的标题（部分）：

```
 wxListBox *schedule_list;
    wxBoxSizer *sizer;
    wxListBox *news_list;
    wxNotebook *tab_pane;
    wxNotebookPage *overview_tab, *settings_tab, *about_end_tab; 
```

我做错了什么？

问候

迈克尔

（对不起，我的英语不好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T12:58:02.023

此代码不起作用的原因是您在将小部件添加到 sizer 之前调用了 SetSizer()。您应该在将小部件添加到 sizer 之后移动对 SetSizer 的调用，或者在添加后强制 sizer 重做布局。

```
ot_sizer->Add(news_list,3,wxEXPAND);

// all widgest added to sizer, now arrange layout as specified
ot_sizer->Layout(); 
```

这应该暂时修复您的代码。

对代码结构的最后评论：您似乎在一个大代码段中构建所有内容。这不是一个好主意。当您继续向 GUI 添加元素时，它会变得非常混乱。最好对每个页面进行子类化，并在该页面的构造函数中创建属于每个页面的小部件。

```
class cOverviewTab : public wxNotebookPage
{
public:
cOverviewTab() : wxNotebookPage(tab_pane,TAB_OVERVIEW)
{
  wxBoxSizer *ot_sizer = new wxBoxSizer(wxVERTICAL);
  ot_sizer->Add( new wxListBox(overview_tab, SCHEDULE_LIST) );
  ot_sizer->Add( new wxListBox(overview_tab,NEWS_LIST) );
  SetSizer( ot_sizer );
}
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:15:09.000

我遇到了同样的问题，我花了大约 2 个小时来解决它。

没有理由更改代码中的其他行。您只需使用`wxPanel`类而不是`wxNotebookPage`为对象创建新页面`wxNotebook`。这是因为`wxNotebookPage`它只是一个`typedef`，`wxWindow`并`wxWindow`没有一些必要的功能`wxPanel`。

您的其他代码不需要修改即可工作，除了如上所述将您的页面子类化以避免 GUI 混乱会非常好。

# facebook - 分享锚链接

> ID：10570578
> 
> 赞同：3
> 
> 时间：2012-05-13T09:13:05.497
> 
> 标签：facebook, hyperlink, anchor, share

我想制作一个以这种形式共享链接的按钮：

```
http://example.com/#anchor 
```

但是当我点击它时，它只分享

```
http://example.com 
```

我怎样才能让它分享我想要的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-13T12:44:00.807

这很简单；您要共享的 URL 字符串应如下所示： http: [//www.domain.com/hello.html%23myanchor](http://www.domain.com/hello.html%23myanchor)

Facebook 会将 %23 转换为 #。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T10:53:11.163

您的问题不是很详细，而且很难准确理解您要问的是什么..

由于不推荐使用共享功能，我假设您正在谈论[Like button](http://developers.facebook.com/docs/reference/plugins/like/)。正如您在该页面中看到的那样，您可以将所需的任何网址放入“喜欢的网址”字段中，然后单击“获取代码”按钮并在您的页面中使用该代码。

您可以将代码放在任何页面中，因此如果您的页面是：“example.com/#anchor”，您仍然可以使用“http://example.com”之类的按钮或其他方式。

但是，如果您希望用户喜欢“example.com/#anchor”，但是当有人点击喜欢的链接时，他会访问“example.com”，那么这是不可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-05T15:15:51.307

我只是想到了这个（因为我有同样的问题）。我的想法是共享一个带有变量的 php 链接，让我们称它为锚点的“a”，它是**没有 #**的锚点，这样 facebook 就不会删除它。因此，您共享链接： [http](http://www.mywebpa.ge/?a=anchor1) ://www.mywebpa.ge/?a=anchor1 然后您只需使用 php 恢复 'a' 的值并添加一个小脚本，让您转到锚点。我希望它会帮助你。问候

# sql - 更新来自 2 个表的数据的 Sql 查询

> ID：10570580
> 
> 赞同：0
> 
> 时间：2012-05-13T09:13:40.260
> 
> 标签：sql, c#-4.0

我需要知道我有 3 个表，其中一个带有会话标记，主键会话 id，另一个表学生，学生 id 作为主键，第三个表数据，学生 id 和会话 id 作为外键。现在我需要在网格视图中更新每个学生的分数，以便将分数存储在会话分数表中。我正在使用这个查询

```
 string hourly1;
        string hourly2;
        string student_id;

        for (int i = 0; i < this.dataGridView1.Rows.Count - 1; i++)
        {
            hourly1 = dataGridView1[1,i].Value.ToString();
            hourly2 = dataGridView1[2,i].Value.ToString();
            student_id = Convert.ToString(dataGridView1[3, i].Value);

            SqlCommand cmd = new SqlCommand("UPDATE SessionalMarks  SET " +
            "SessionalMarks.Hourly1Marks = '" + hourly1 + "'," + "SessionalMarks.Hourly2Marks = '" + hourly2 + "'from Student,DATA  where Student.StudentId=DATA.StudentId AND Student.StudentId='" + student_id + "'", conn);

            conn.Open();
            cmd.ExecuteNonQuery();
            conn.Close(); 
```

但是此查询在需要更新放置在网格视图中的标记的每一行中添加相同的标记，我认为 where 子句中存在问题，请有人帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T16:50:20.373

非常不清楚您的 SQL 模式是什么样的，但是在您的更新语句中，之后的所有内容`FROM`都没有用于任何目的。您的`WHERE`子句没有提及`SessionalMarks`，因此每次循环遍历您的`for`循环时，您都会更新该表中的*所有*行。

如果您发布这三个表的 SQL 架构，它可能有助于我们了解您的数据的形状并帮助您编写更好的查询。按照您描述的方式，听起来`DATA`表格应该包含每个学生的分数，但您显然已经将该数据放入`SessionalMarks`表格中。

但是，除了您提到的问题之外，您的代码还有一些问题：

*   您通过将字符串连接在一起来编写 SQL 查询，看起来这些字符串可能来自用户。这会使您面临 SQL 注入攻击，或者至少如果用户键入`'`您的程序将出现错误行为。

*   您重复打开和关闭数据库连接，而不是打开一次并在完成后关闭它。

要解决这些问题，您可能应该 (a) 使用参数化 SQL 查询，以及 (b) 在循环外打开和关闭数据库连接。

这并不完美，但它是一个开始：

```
// this query needs to be fixed
string query = @"UPDATE SessionalMarks 
                SET SessionalMarks.Hourly1Marks = @hourly1
                   ,SessionalMarks.Hourly2Marks = @hourly2
                FROM Student,DATA
                WHERE Student.StudentId = DATA.StudentId
                AND Student.StudentId = @studentid";

// Make sure we dispose of the SqlCommand when we're finished with it
using (SqlCommand cmd = new SqlCommand(query, conn))
{
    // Create my three parameters, don't need a value yet
    // Need to make sure we have the right SqlDbType specified
    cmd.Parameters.Add( new SqlParameter("@hourly1", SqlDbType.Decimal) );
    cmd.Parameters.Add( new SqlParameter("@hourly2", SqlDbType.Decimal) );
    cmd.Parameters.Add( new SqlParameter("@studentid", SqlDbType.Int) );

    conn.Open();

    try
    {
        // For each row in our DataGridView
        // We could also use foreach(DataGridViewRow row in dataGridView1.Rows)
        for (int i = 0; i < this.dataGridView1.Rows.Count - 1; i++)
        {
            // Fill in our parameters with our values
            cmd.Parameters[0].Value = dataGridView1[1,i].Value.ToString();
            cmd.Parameters[1].Value = dataGridView1[2,i].Value.ToString();
            cmd.Parameters[2].Value = Convert.ToString(dataGridView1[3, i].Value);

            cmd.ExecuteNonQuery();
        }
    }
    finally
    {
        // Close our database connection even if cmd.ExecuteNonQuery() throws
        conn.Close();
    }
} 
```

# ruby - Ruby Shoes：计算一个值在数组中出现的次数

> ID：10570581
> 
> 赞同：3
> 
> 时间：2012-05-13T09:13:40.410
> 
> 标签：ruby, arrays, indexing, duplicates, shoes

当我单击按钮“Two”时，我正在使用鞋子在 Ruby 中制作 Yahtzee 游戏，该代码假设计算值 2 在数组中出现的次数。对于出现的值 2 的每个实例，分数都会增加 2。

此代码适用于选定数量的情况，但在其他情况下，如 @array = [2,1,2,2,3] # 数组中有三个 2，因此分数假定为 6，但我的代码返回4……为什么？

```
button "      twos     " do     
    @array.each_with_index do |value, index|
        if (@array[index] == 2)
            @score = @score + 2
            @points = @score + 2
        end #if     
end #loop end #button 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T09:30:52.247

这段代码看起来更好，但实际上，它做同样的事情。也许你应该检查实例变量的初始值`@score`和`@points`？

```
@array = [2,1,2,2,3]

@score = @points = 0

@score = @array.count(2) * 2
@points = @score

@score
 => 6 
@points
 => 6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T12:31:32.297

我建议您使用[Enumerable#inject](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject)方法。通过**注入**，您可以实现用于计数的抽象方法并在项目中的任何地方使用它：

```
def count_of_element array, element
  array.inject(0) { |count, e| count += 1 if e == element; count }
end

puts count_of_element [2,1,2,2,3], 2 # => 3 
```

可能有更好的解决方案——像这样为 Array 类定义方法：

```
class Array
  def count_of_element element
    inject(0) { |count, e| count += 1 if e == element; count }
  end
end

puts [2,1,2,2,3].count_of_element 2 # => 3 
```

它看起来更酷。祝你好运！

# ruby-on-rails-3 - 链接到具有友好 URL 的资源

> ID：10570583
> 
> 赞同：2
> 
> 时间：2012-05-13T09:13:48.620
> 
> 标签：ruby-on-rails-3, routes

我正在尝试在 Rails 3 中写博客，所以我有帖子。我想为这样的帖子制作漂亮的路线：`posts/year/month/day/post-title`. 所以我覆盖了 to_param`model/post.rb`并`friendly_id`用于标题：

```
extend FriendlyId
friendly_id :title, :use => :slugged

def to_param
  "#{year}/#{month}/#{day}/#{title.parameterize}"
end 
```

我将其添加到`routes.rb`：

```
resources :posts do
  collection do
    match ":year/:month/:day/:id", :action => "show"
  end
  member do
    post 'comment'
    delete 'comment/:comment_id', :action => 'destroy_comment', :as => 'destroy_comment'
  end
end 
```

在`show`这个作品中：

```
<%= link_to image_tag("/images/edit_icon.png"),            
    { :controller => 'posts', :action => 'edit' }, :id => @post %> 
```

但`index`里面说

```
routing error:
No route matches {:action=>"edit", :controller=>"posts"}. 
```

我是 Rails 的新手，我还没有设法找出导致此错误的原因。谁能帮我弄清楚我做错了什么？

# android - 我如何将默认图片放入android？（闪屏）

> ID：10570585
> 
> 赞同：1
> 
> 时间：2012-05-13T09:13:52.147
> 
> 标签：android, image, splash-screen

我正在开发一个android应用程序，我想放一张默认图片。这在 iPhone 应用程序中很常见；当应用程序启动时，它会显示开发人员的名称和应用程序的名称（例如）和图像。

我认为这是可能的，因为像 Facebook 这样的应用程序在应用程序启动之前就有这些默认屏幕。我该如何实施这些？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T09:15:14.043

你想要的是一个启动画面：

*   [如何：为 Android 创建启动画面](http://www.droidnova.com/how-to-create-a-splash-screen,561.html)
*   [一个简单的 Android 闪屏](http://www.barebonescoder.com/2010/04/a-simple-android-splash-screen/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T09:39:46.767

在您`onCreate()`的启动活动方法中，请尝试以下操作：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Thread proceed = new Thread(){

        public void run()
        {
            try {
                sleep(5000);
                Intent next = new Intent("nextActivityIntentGoesHere");
                startActivity(next);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            finally{
                finish();
            }

        }
        };
        proceed.start();
    } 
```

你`main.xml`可以如下：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@drawable/welcomescreenpicture" >
</LinearLayout> 
```

这将`welcomescreenpicture`在应用程序启动时显示 5 秒钟。

# mkmapview - MKMetersBetweenMapPoints 错误地返回以米为单位的距离

> ID：10570588
> 
> 赞同：1
> 
> 时间：2012-05-13T09:14:10.237
> 
> 标签：mkmapview, mapkit

运行此代码：

```
NSLog(@"%f", MKMetersBetweenMapPoints(MKMapPointMake(33.6523, -118.507), MKMapPointMake(34.516, -117.628))); 
```

返回这个：

```
0.015819 
```

当预期输出应为 ~136900 时。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T10:37:35.410

看起来您正在为`MKMapPointMake()`. 一个`MKMapPoint`包含和`x`和`y`值，而不是纬度和经度。

用于`MKMapPointForCoordinate(myLocation)`将您的位置转换为地图点，然后将其提供给您的`MKMetersBetweenMapPoints()`函数。

或者更简单，[`-distanceFromLocation:`](http://developer.apple.com/library/ios/DOCUMENTATION/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html#//apple_ref/occ/instm/CLLocation/distanceFromLocation%3a)与两个`CLLocation`对象一起使用。考虑到地球的曲率，它会返回以米为单位的距离。

# c++ - 专门针对指向数据成员的指针的模板成员函数

> ID：10570589
> 
> 赞同：4
> 
> 时间：2012-05-13T09:14:17.583
> 
> 标签：c++, templates, c++11, pointer-to-member

我想定义一个空值静态模板成员函数，该函数将（明确）专门用于指向数据成员的指针，并且对于每个专门化，可以具有不同的返回类型。

它应该返回有关每个属性的一些详细信息，因此我将调用此方法`trait`。返回的特征对象类型将被其他模板检查，因此整个机器必须在编译时可用。

到目前为止，我有这样的东西（当然是坏代码）：

```
class Foo{
   // some data members
   int a; std::string b; int c;
   // how to declare generic template here?
   // compile-time error should ensue if none of the specializations below is matched

   // specialization for a (aTraitExpr is expanded from macro, so it is OK to repeat it)
   template auto trait<&Foo::a>()->decltype(aTraitExpr){ return aTraitExpr; }
   // specialization for b; the return type will be different than for trait<&Foo::a>
   template auto trait<&Foo::b>()->decltype(bTraitExpr){ return bTraitExpr; }
};

// some code which queries the trait at compile-time
// e.g. supposing all possible trait types declare isSerializable
// which happens to be True for a and False for b

Foo* foo;
template<bool isSerializable> void doSerialization(...);
template void doSerialization<true>(...){ ... };
template void doSerialization<false>(...){ /* no-op */ };

doSerialization<Foo::trait<&Foo::a>()::isSerializable>(...); // -> doSerialization<true>(foo)
doSerialization<Foo::trait<&Foo::b>()::isSerializable>(...); // -> doSerialization<False>(...)
doSerialization<Foo::trait<&Foo::c>()::isSerializable>(...); // -> compile error, specialization Foo::trait<&Foo::c> not defined 
```

可以得到一些关于如何实现这一目标的提示吗？（我并不是想发明一个新的序列化系统，我已经使用了 boost::serialization；每个特征中都会有更多信息，这只是一个示例，为什么在编译时需要它）。

**编辑：**我能够得到接近我想要的东西，它显示[在 ideone.com 上](http://ideone.com/95xIt)。我放弃了`trait<Foo::a>()`（现在），所以有一个静态函数`getTrait_a()`返回对可修改类型特征的引用，但是在编译时部分固定（`Foo::TraitType_a::flags`例如，这样可以工作）。感谢所有回答的人，不幸的是我只能选择其中一个答案作为“答案”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T09:44:36.540

看起来您想要几个*重载*而不是专业化。不幸的是，您没有详细说明`xTraitExpr`它是什么，但它似乎只是一个`isSerializable`定义了成员的类型。我可能会这样

```
class Foo {
   // your members have been omitted to save space...

   template<typename T, T Foo::*M>
   struct W { };

   static decltype(aTraitExpr) trait(W<int, &Foo::a>) {
     return aTraitExpr;
   }

   static decltype(bTraitExpr) trait(W<std::string, &Foo::b>) {
     return bTraitExpr;
   }

   // other overloads for other members...

public:
   // overloads for each member type
   template<int Foo::*M> 
   static decltype(trait(W<int, M>())) trait() { 
     return trait(W<int, M>()); 
   }

   template<std::string Foo::*M> 
   static decltype(trait(W<std::string, M>())) trait()  { 
     return trait(W<std::string, M>()); 
   }
}; 
```

`trait(W<M>())`是依赖调用。依赖调用在定义和实例化时执行 ADL，仅在定义时执行非限定查找。这就是为什么使用它`W`的附加`trait`重载必须在`trait`类型重载之前而不是在它们之后定义，否则返回类型和函数主体的解析结果将不同，因为它们在不同时间解析（主体在之后被延迟解析类定义和返回类型立即解析）。

您可以创建`trait`一个`constexpr`函数并使其`xTraitExpr`成为具有适当初始化的 constexpr 构造函数的文字类`isSerializable`，或者您可以`decltype`按如下方式应用

```
doSerialization<decltype(Foo::trait<&Foo::a>())::isSerializable>(...); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T09:46:12.267

我认为在这里使用函数模板没有意义。话虽如此，使用类模板代替它也不是那么方便：您必须考虑这样一个事实，即非静态数据成员可以具有不同的类型，并且可以有多个具有相同类型的非静态数据成员. 这是一种可能性：

```
template<typename T>
struct is_serializable: std::false_type {};

struct Foo {
    int a; std::string b; int c;

    // Primary template left undefined on purpose
    // alternatively, could use a static_assert on a dependent
    // std::false_type::value for better diagnostics
    template<typename T, T t>
    struct attribute_trait;
};

// Define explicit specializations outside of class
template<>
struct Foo::attribute_trait<int Foo::*, &Foo::a>
: is_serializable<int> {};

template<>
struct Foo::attribute_trait<std::string Foo::*, &Foo::b>
: is_serializable<std::string> {}; 
```

可用作

```
doSerialization<Foo::attribute_trait<decltype(&Foo::a), &Foo::a>::value>(/* stuff */); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T09:37:14.640

定义特征类的常用方法是将结构/类包装在编译时常量表达式周围（而不是包装返回此类表达式的函数）。获取类成员函数的语法如下：

```
template
<
    SomeReturnType (SomeClass::*SomeMemberFunction)(SomeParameters)
>
class SomeTrait
{
    static const value = SomeCompileTimeConstantExpression;
}; 
```

在你的情况下，你会这样做：

```
template
<
    void (Foo::*f)()
>
class trait
{
    static const value = fTraitExpr;
}; 
```

然后，您将此特征**专门**用于 的所有成员函数`class Foo`：

```
template<>
class trait<&Foo::a>
{
    static const value = aTraitExpr;
};

// same for Foo::b and Foo::c 
```

**此外，重载**函数模板比**​​专门**化它们更惯用：

```
template<int V> struct Int2Type { enum { value = V }; };

Foo* foo;

template
<
    void (Foo::*f)()
>
void doSerialization(...)
{
    dispatch::doSerialization(Int2Type< trait<f>::value >(), ...);
}

namespace dispatch {

doSerialization(Int2Type< true >, ...) { ... };

doSerialization(Int2Type< false >, ...) { /* no-op */ };

} // namespace dispatch 
```

然后你可以这样称呼它：

```
doSerialization<&Foo::a>(...);
doSerialization<&Foo::b>(...);
doSerialization<&Foo::c>(...); 
```

# objective-c - Objective C 数学

> ID：10570591
> 
> 赞同：1
> 
> 时间：2012-05-13T09:14:23.350
> 
> 标签：objective-c, ios, math, int, double

到目前为止，我将如何计算复利：

```
 double principal = [[principalLabel text] doubleValue];
 NSLog(@"Principal: %lf",principal);
 double years = [[yearsLabel text] doubleValue];
 NSLog(@"Years: %lf",years);
 double months = [[monthsLabel text] doubleValue] / 12; 
 NSLog(@"Months: %lf",months);
 double days = ([[daysLabel text] doubleValue] / 365) / 10;
 NSLog(@"Days :%lf",days);
 double rate = ([[rateLabel text] doubleValue] / 100);
 NSLog(@"Rate: %lf",rate);
 double time = years + days + months;
 NSLog(@"Time: %lf",time);

 double total = pow(principal * (1 - rate), time);
 NSLog(@"Total: %lf",total);
 double interest = pow(principal * (1 - rate), time) - principal;
 NSLog(@"Interest: %lf",interest);
 NSString *interestString = [[NSString alloc] initWithFormat:@"%lf",interest];
 NSString *totalString = [[NSString alloc] initWithFormat:@"%lf",total];
 [interestLabel setText:interestString];
 [totalLabel setText:totalString]; 
```

如您所见，我有 5 个 UITextFields：本金、利率、年、月、日。目前，我不断得到一些与实际答案相去甚远的答案，尽管我的数学似乎正确，但我已经彻底检查了我的代码，但没有找到解决方案。

```
My desired result is: E.g.     
M = P * (1+R)^Y              
M = 1000 * (1+0.10)^2       
M = 1210 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T09:25:28.763

如果您也将 NSLog 消息的输出放在您的问题中，那么回答您的问题会更有帮助。现在下面提到了一个明显的错误：

在这行代码中

```
double total = pow(principal * (1 - rate), time); 
```

你有 1 利率，而你需要有

```
double total = pow(principal * (1 + rate), time); 
```

# iphone - 如何将带时区的日期字符串转换为 NSDate

> ID：10570593
> 
> 赞同：5
> 
> 时间：2012-05-13T09:14:46.367
> 
> 标签：iphone, objective-c, nsdate

如何将日期字符串“2012-05-03 06:03:00 +0000”转换为 NSDate。我使用下面的代码，但它不起作用：

```
NSDateFormatter *datFormatter = [[NSDateFormatter alloc] init];
[datFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss Z"];
NSDate* date = [datFormatter dateFromString:dateStr]; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-13T09:27:26.083

```
 NSString *dateStr = @"2012-05-03 06:03:00 +0000";
  NSDateFormatter *datFormatter = [[NSDateFormatter alloc] init];
  [datFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss Z"];
  NSDate* date = [datFormatter dateFromString:dateStr];
  NSLog(@"date: %@", [datFormatter stringFromDate:date]); 
```

此代码打印`date: 2012-05-03 09:03:00 +0300`

有用。另外不要忘记设置您要定位的日期格式化程序的时区

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T09:57:17.080

可以这样做： -

```
NSDateFormatter *datFormat = [[NSDateFormatter alloc] init];
[datFormat setTimeZone:[NSTimeZone timeZoneWithName:@"Yout TimeZone"]];
[datFormat setDateFormat:@"yyyy-MM-dd HH:mm:ss Z"];
NSString *string = @"2012-05-03 06:03:00 +0000";
NSDate* date = [datFormat dateFromString:string]; 
```

# solr - SolrNet 构建复合查询

> ID：10570598
> 
> 赞同：0
> 
> 时间：2012-05-13T09:15:27.310
> 
> 标签：solr, solrnet

我正在尝试使用 SolrNet 构建以下查询。

```
(type:Contact) AND ((firstName:Jason)^100) OR ((lastName: Winters)^100) 
```

我尝试使用以下代码：

```
var query = new SolrQuery("type:Contact") &&
            new SolrQuery("firstName:Jason").Boost(100) ||
            new SolrQuery("lastName:Winters").Boost(100); 
```

查看Tomcat中的Catalina日志，产生了如下查询，嵌套的括号不是我所期望的，这样对吗？

```
q=((type:Contact+AND+(firstName:Jason)^100)+OR+(lastName:Winters)^100) 
```

另外，如果我可以在 Solr 配置中使用请求处理程序嵌入此搜索逻辑，那将是完美的，有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T00:04:40.540

Mauricio 在评论中的链接回答了这个问题。

[http://groups.google.com/d/topic/solrnet/NSfX31acJ5M/discussion](http://groups.google.com/d/topic/solrnet/NSfX31acJ5M/discussion)

# iphone - 后台运行时如何监控通话状态？

> ID：10570600
> 
> 赞同：0
> 
> 时间：2012-05-13T09:15:51.227
> 
> 标签：iphone, ios, xcode

我做了一些研究，但找不到我的问题的可靠答案。

我需要开发一个能够监控通话状态的 iPhone 应用程序。我知道 CTCallCenter 对象让我的应用程序收到有关呼叫连接/断开连接事件（我需要）的通知，但是当应用程序进入后台时这些通知不起作用。

问题是我需要一直监控呼叫状态，当它发生变化时，通过互联网将状态发送到服务器......所以即使应用程序进入后台，它也必须“部分”处于活动状态。它必须始终监控呼叫状态并能够通过 Internet 发送。

我想创建一个线程并让它每秒检查一次通话状态（不使用自动通知）。但是我意识到，当应用程序进入后台时，线程会立即暂停:(。可惜。

我是 iOS 开发的新手，我不知道我想要实现的目标是否可行。请你给我建议好吗？

当有人向我发送消息时，有些应用程序（例如“Gadu-Gadu” - 一个聊天客户端）会向我显示通知 - 即使该应用程序根本没有运行。所以我想它使用了一些内置的 iOS 机制（通知中心？）。我想知道这对我来说是否是一个线索。

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T10:47:15.213

好吧，您无法从后台监控通话状态，苹果确实允许您监控所有内容。

关于通知，Gadu-Gadu 可能使用推送通知。

# hibernate - 如何通过结果访问休眠组的结果

> ID：10570603
> 
> 赞同：1
> 
> 时间：2012-05-13T09:16:56.663
> 
> 标签：hibernate

我如何按结果访问 Hibernate 组。我尝试获取按日期分组的操作计数。我的代码在这里：

```
Criteria crit = sess().createCriteria(Attendance.class);
        crit.setProjection(Projections.projectionList()
                .add(Projections.groupProperty("date"),"adate")
                .add(Projections.rowCount(),"trueCount" ));
        crit.add(Restrictions.eq("status", true));
        List l = crit.list(); 
```

正确的结果被加载到列表中。如何访问此列表中的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T10:36:53.893

它应该返回一个列表，`Object[]`其中`Object[0]`包含`adate`别名 (Date) 和`Object[1]`( `trueCount`Integer) ，因此您可以通过以下方式访问返回列表中的结果：

```
List<Object[]> l = (List<Object[]>)crit.list();

for(Object[] result: l ){
   Date adate = (Date)result[0];
   Integer trueCount = (Integer)result[1]; 
} 
```

# magento - Magento分层导航中的权重属性，目录输入类型是文本字段

> ID：10570604
> 
> 赞同：0
> 
> 时间：2012-05-13T09:17:03.370
> 
> 标签：magento

有没有办法在 Magento 分层导航中显示重量属性以过滤目录输入类型为价格属性等文本字段的产品？我知道目录输入类型为下拉或多选的属性只能在分层导航中使用，但权重必须是文本字段而不是下拉右。请回复我......

谢谢和问候， kranthi

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T10:47:38.663

我认为您应该为重量创建自定义产品属性（类型 = 下拉列表），并且您可以在产品保存时创建观察者以使用文本重量值更新此新属性。

# android - 如何突出显示搜索词

> ID：10570608
> 
> 赞同：1
> 
> 时间：2012-05-13T09:17:46.997
> 
> 标签：android, listview, search-engine, highlight

我正在创建一个搜索引擎，如 android 中的应用程序，我想知道如何在此链接中的列表视图中突出显示搜索的单词.. [http://androidbible.blogspot.com/2010/12/color-highlight-and- Whole-word-search.html](http://androidbible.blogspot.com/2010/12/color-highlight-and-whole-word-search.html)提前感谢那些想要帮助的人......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T09:21:43.560

我想你可以试试[SpannableString](http://developer.android.com/reference/android/text/SpannableString.html)

下面只是一个演示。

```
 TextView tv = (TextView) findViewById(R.id.textView1);
    SpannableString str = new SpannableString("hello");
    BackgroundColorSpan span = new BackgroundColorSpan(Color.YELLOW);
    str.setSpan(span, 0, 2, Spannable.SPAN_EXCLUSIVE_INCLUSIVE);
    tv.setText(str); 
```

# c++ - 需要用于 OGG 的简单 C++ 标签库

> ID：10570609
> 
> 赞同：3
> 
> 时间：2012-05-13T09:17:56.460
> 
> 标签：c++, ogg

我正在寻找一个可以**轻松**标记 ogg 文件的 C++ 库，这意味着使用一个简单的函数，例如

```
write_ogg_tag("file.ogg", tag_data); // where tag_data contains artist, album ... 
```

有解决办法吗？

另外，某些解决方案是否适用于 MP3、FLAC 等？（ogg就够了，只是因为好奇才问）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T09:26:27.317

我认为没有什么比[TagLib](http://developer.kde.org/~wheeler/taglib.html)更好或更简单的了。它适用于所有流行的格式。[您可以在此处](http://developer.kde.org/~wheeler/taglib/api/)找到有关 API 的详细信息。

另一种更复杂的方法是使用基本组件，例如`libogg`并使用低级格式特定 API，但这似乎不是您想要的。

# android - 适用于 Android (Air mobile) 的远程下载文件

> ID：10570611
> 
> 赞同：1
> 
> 时间：2012-05-13T09:18:30.213
> 
> 标签：android, actionscript-3, air

为了使应用程序更小，我想由用户下载特定的大文件。

想查看文件是否在目录中，如果没有，下载（给用户显示进度）并复制到指定目录。如何正确实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T13:34:37.643

该类`File`应该工作。

```
var fileToCheck:File=File.applicationStorageDirectory.resolvePath("some-file.txt");
if(!fileToCheck.exists) {
    //download file
} 
```

从 AIR 下载文件是另一个问题，这里已经回答了这个问题： [使用 Adob​​e AIR 下载文件](https://stackoverflow.com/questions/342994/download-a-file-with-adobe-air)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T09:56:04.727

看看Android的[`DownloadManager`](http://developer.android.com/reference/android/app/DownloadManager.html)类。

# python - 除了完全覆盖旧文件之外，还有其他方法可以修改/更新 xml 文件吗？

> ID：10570615
> 
> 赞同：1
> 
> 时间：2012-05-13T09:19:11.793
> 
> 标签：python, xml, lxml

我正在编写一个脚本，该脚本涉及连续分析数据并以多线程方式输出结果。因此，基本上结果文件（一个 xml 文件）会不断更新/修改（有时每秒 2-3 次）。

我目前正在使用`lxml`解析/修改/更新 xml 文件，现在工作正常。但是据我所知，您必须重写整个 xml 文件，即使有时您只需`<weather content=sunny />`在文件中的某处添加一个条目/子条目。xml 文件逐渐变大，开销也越来越大。

就效率/资源而言，还有其他方法可以更新/修改 xml 文件吗？或者当 xml 文件太大而无法解析/修改/更新时，您将不得不切换到 SQL 数据库或类似数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T09:26:52.070

不，您通常不能 - 不仅仅是 XML 文件，任何文件格式。

如果您完全覆盖字节，则只能“就地”更新（即不添加或删除任何字符，只需用相同字节长度的内容替换一些字符）。

使用某种形式的数据库听起来是个不错的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T12:41:23.060

听起来您确实需要某种数据库，正如*Li-anung Yip*所说，这将解决各种令人讨厌的多线程同步问题。

你说你的数据在逐渐增加？它是如何被消费的？客户端是否每次都被迫下载整个结果文件？

不知道您的用例，但也许您可以考虑使用[ATOM 提要](http://en.wikipedia.org/wiki/Atom_%28standard%29)来分发您的数据更改？为[Atom pub](http://atompub.org/)提供支持也将有效地支持您的数据。它仍然是 XML，但采用符合标准的格式，易于使用和轮询更改。

# c# - 从我上传到共享服务器上的 asp.net 站点发送电子邮件

> ID：10570623
> 
> 赞同：0
> 
> 时间：2012-05-13T09:20:40.857
> 
> 标签：c#, asp.net, sendmail

从我的 asp.net 站点发送电子邮件需要什么？问这个问题是因为我有一个发送电子邮件的站点，它在本地机器上工作正常，但是当我将它上传到共享服务器上时它不起作用并给我这个错误：**发送邮件失败**

现在我对这个问题有一些疑问：

1 - 通过 SMTP 发送电子邮件是否总是需要 SSL？2 - 如果我使用我的 gmail 帐户，第一个问题呢？3 - 我的主机 PleskPanel 上是否有一些配置可以发送电子邮件？4 - 与我的主机支持团队联系后，他们说我的代码有问题，但我知道我的代码是正确的，这是我的代码

```
SmtpClient client = new SmtpClient();
client.DeliveryMethod = SmtpDeliveryMethod.Network;
client.EnableSsl = false;
client.Host = "smtp.datagts.net";
client.Port = 587; // setup Smtp authentication    
System.Net.NetworkCredential credentials = new System.Net.NetworkCredential("info@datagts.net","*****");
client.UseDefaultCredentials = false;
client.Credentials = credentials;
MailMessage msg = new MailMessage();
msg.From = new MailAddress("info@datagts.net");
msg.To.Add(new MailAddress("foroughi.ali@gmail.com"));
msg.Subject = "Test";
msg.IsBodyHtml = false;
msg.Body = "Body is here";
client.Send(msg); 
```

**注意**：有关我的问题的更多信息，我问了另一个[关于](https://stackoverflow.com/q/10563397/985084)此问题的问题，但我没有得到任何正确答案

# c# - 如何使用 linq 查询获取分层数据的深度？

> ID：10570625
> 
> 赞同：7
> 
> 时间：2012-05-13T09:20:49.320
> 
> 标签：c#, linq

我有一个这样的分层数据列表：

```
var list = new List<Data>(){some data...}

class Data
{
    public int number;
    public List<Data> info;
} 
```

注意：树的叶子中的数据-->`info = null`

**例子：**

数字属于`number property`数据类

```
 --1
      --11
   --2
      --21
      --22
      --23
      --24
   --3
      --31
      --32
          --321
          --322
   --4
      --41
      --42 
```

如何使用**linq**查询（非递归方法或 for 循环）了解数据列表的树的最大深度？

在此示例中，321,322 的最高级别为 3

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T18:30:20.980

所有 Linq 运算符都以某种方式使用循环，因此如果要求没有循环，则无法使用 linq 解决。

没有递归是可能的。你只需要一个堆栈。就像是

```
public static IEnumerable<Tuple<int, T>> FlattenWithDepth<T>(T root, Func<T, IEnumerable<T>> children) {
    var stack = new Stack<Tuple<int, T>>();

    stack.Push(Tuple.Create(1, root));

    while (stack.Count > 0) {
        var node = stack.Pop();

        foreach (var child in children(node.Item2)) {
            stack.Push(Tuple.Create(node.Item1+1, child));
        }
        yield return node;
    }
} 
```

然后您的 linq 查询将是

```
FlattenWithDepth(root, x => x.info ?? Enumerable.Empty<Data>()).Max(x => x.Item1); 
```

（抱歉没有可用于验证的编译器）

** 编辑。刚刚看到你有多个根**

```
list.SelectMany(y => FlattenWithDepth(y, x => x.info ?? Enumerable.Empty<Data>()))
    .Max(x => x.Item1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T19:10:51.913

以下将起作用：

```
internal static class ListDataExtension
{
    public static int MaxDepthOfTree(this List<Data> dataList)
    {
        return dataList.Max(data => data.MaxDepthOfTree);
    }
}
internal class Data
{
    public int number;
    public List<Data> info;

    public int MaxDepthOfTree
    {
        get 
        { 
            return GetDepth(1); 
        }
    }

    int GetDepth(int depth)
    {
        if (info == null)
            return depth;
        var maxChild = info.Max(x => x.GetDepth(depth));
        return maxChild + 1;
    }
} 
```

然后只需调用：

```
var maxDepth = list.MaxDepthOfTree(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T09:41:14.687

LINQ 和 SQL 在平面数据结构上运行；它们不是为递归数据结构设计的。

使用 LINQ to Entities，我相信您不走运。将子树的深度存储在每个节点中，并在您插入/删除节点时递归更新它。

使用 LINQ to Objects，您可以定义一个递归扩展方法，该方法返回树中的所有路径并获取最长路径的长度：

```
var result = root.Paths().Max(path => path.Length); 
```

在哪里

```
public static IEnumerable<Data[]> Paths(this Data data)
{
    return Paths(data, new[] { data });
}

private static IEnumerable<Data[]> Paths(Data data, Data[] path)
{
    return new[] { path }.Concat((data.info ?? Enumerable.Empty<Data>())
    .SelectMany(child => Paths(child, path.Concat(new[] { child }).ToArray())));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T18:52:45.083

如果你应该在数据库中使用它，我建议在你的数据库中添加额外的列来保存树的深度，在某些情况下深度会发生变化：

1.  添加新元素，其深度为FatherDepth + 1。
2.  删除：如果这是级联关系，则删除没有问题，但如果不是级联，则应编写递归查询来更新子级的深度。

要查找深度，只需运行查询以查找最大深度值。

# google-apps-script - 如何将 getRange 的四参数形式与 SpreadSheetApp.openById() 一起使用？

> ID：10570629
> 
> 赞同：3
> 
> 时间：2012-05-13T09:21:38.753
> 
> 标签：google-apps-script

```
var MasterSheet = SpreadsheetApp.openById("----------------");
var count = SpreadsheetApp.getActiveSheet().getRange(2, 3, 6, 4).getNumColumns();
var count = MasterSheet.getRange("C2:F7").getNumColumns();
var count = MasterSheet.getRange(2, 3, 6, 4).getNumColumns(); 
```

第 2 行和第 3 行工作正常，但第 4 行给出错误“找不到方法`getRange(number,number,number,number)`”。它似乎`getRange(number,..)`仅适用于 Active Sheet，不适用于`openById`.

这是一个错误吗？有谁知道使用这个符号的正确方法`SpreadsheetApp.openById()`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T11:27:18.350

由于您在通过触发器运行脚本时使用 openByID，因此不会有活动工作表。但是，您正试图从 ActiveSheet 中获取范围，即未定义的获取范围。您可以先激活工作表，然后使用 getActiveSheet ，也可以使用

```
SpreadsheetApp.getSheets[0].getRange(...); //index may vary
//or 
SpreadsheetApp.getSheetByName('sheetName').getRange(...) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-13T22:08:00.957

当您直接在电子表格对象上而不是在第一张表上 getRange 时，就像您在第 3 行和第 4 行上所做的那样，您实际上是在第一张表上获得范围。

这只是一个快捷方式，您应该真正地 getSheets()[0]，或者更好的是，getSheetByName 并在其上调用 getRange（Sheet 对象）。因为，正如您所指出的，这是一条捷径，而不是标准路径。例如，您没有 getRange(int,int,int,int) 的缩写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T16:29:44.120

您总是必须选择一张表才能使用 getRange

`var count = MasterSheet.getRange("C2:F7").getNumColumns();
var count = MasterSheet.getRange(2, 3, 6, 4).getNumColumns();`

在这里你错过了`getActiveSheet()`或`getSheetByName('sheetName')`

# python - Scrapy：ImportError：没有名为项目的模块

> ID：10570635
> 
> 赞同：21
> 
> 时间：2012-05-13T09:22:36.193
> 
> 标签：python, scrapy

当我尝试运行scrapy时，出现此错误 ImportError: No module named items

我刚刚在 items.py 中添加了我想要抓取的东西的列表，在 spider.py 中我已经使用 from spider.items import SpiderItem 导入了该类

不知道为什么加载不出来...

包装布局是...

```
./spider
./spider/pipelines.py
./spider/settings.py
./spider/spiders
./spider/spiders/spider_spider.py
./spider/spiders/test.py
./spider/spiders/__init__.py
./spider/middlewares.py
./spider/__init__.py
./spider/items.py 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-13T10:01:45.993

来自[谷歌群组的这条消息](http://groups.google.com/group/scrapy-users/msg/13e4127878714417)：

您的蜘蛛模块与您的 scrapy 项目模块命名相同，因此 python 正在尝试导入与 byub.py 蜘蛛相关的项目。

您正面临 python 导入的常见遗憾，请参阅 [http://www.python.org/dev/peps/pep-0328](http://www.python.org/dev/peps/pep-0328)

快速修复：

*   将您的蜘蛛模块重命名为 byub_org.py 或类似名称。
*   或`from __future__ import absolute_import`在 byub.py 蜘蛛中使用。
*   或将您的项目重命名为 byubbot 之类的名称。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-15T10:35:12.033

我碰巧遇到了这个问题，因为我的蜘蛛名称与scrapy项目相同。

只需重命名蜘蛛名称即可。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-24T09:00:49.140

在不重命名任何文件的情况下，更改`from spider.items import SpiderItem`并`from .. import items`引用`items.SpiderItem`代码中的项目。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-13T06:48:25.137

重命名蜘蛛模块是一个很好的解决方案。

**但是不要忘记`*.pyc`在重命名后删除相关文件**，考虑到`*.pyc`文件起到**缓存**的作用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-15T11:37:44.157

很抱歉发布了墓志铭。尝试放入文件 `./spider/__init__.py`

那

```
 import items 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-15T19:57:20.613

您在 spider.py 文件中的 import 语句之后缺少以下行。

类项目名称goeshereSpider（BaseSpider）：

# objective-c - 从 ASIHTTPRequest 获取会话 ID

> ID：10570638
> 
> 赞同：2
> 
> 时间：2012-05-13T09:22:45.990
> 
> 标签：objective-c, session, asihttprequest, session-cookies

在对服务器进行身份验证后，我需要检索会话 ID。在完成块中，我尝试 NSLog 设备的所有 cookie：

```
 NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
  NSLog(@"cookies: %@", storage.cookies); 
```

但结果是一个空数组。request.responseHeaders 也不包含任何 cookie。如何获取会话 ID？

# c# - 在 ASP.NET Web Api DataController 上调用类似操作

> ID：10570639
> 
> 赞同：1
> 
> 时间：2012-05-13T09:22:48.297
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-web-api

# 语境

来自 RIA 服务背景的我已经习惯了这样一个事实，即我可以将插入、更新、删除和调用操作添加到域服务中。看到 ASP.NET 中的新 DataController API 看起来很相似，我认为它也可以在那里工作。

显然我错了，因为 DataController 的 API 中有一个 InsertAttribute、UpdateAttribute 和一个 DeleteAttribute，但没有 InvokeAttribute。

# 问题

查看新的 Web API / DataController API 是否有人知道如何在 RIA 服务中添加类似调用的功能？

# python - 插入后如何在django admn中获取记录ID？

> ID：10570647
> 
> 赞同：1
> 
> 时间：2012-05-13T09:23:13.430
> 
> 标签：python, django, django-admin

我想在 django admin 中插入后创建一个像记录 ID 这样的目录，我该如何以及在哪里可以做到这一点。

我在 save_model 中尝试，但它不起作用，Gallery.ID 返回无

模型：

```
class Gallery(models.Model):
    title = models.CharField(max_length=250)
    added = models.DateTimeField()
    active = models.BooleanField()

    def __unicode__(self):
        return self.title 
```

和 AdminModel

```
class GalleryAdmin(admin.ModelAdmin):
    save_on_top = True
    list_filter = ('active',)
    list_display = ('title','active','added')
    ordering = ['-added']
    inlines = [ImagesInline]

    def save_model(self, request, Gallery, form, change):
        if not change:
            Gallery.title = str(Gallery.id)
        Gallery.save() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T09:50:34.220

将您更改`GalleryAdmin`为此...您需要`save()`在`Gallery`实例获取其`id`.

```
def save_model(self, request, Gallery, form, change):
    Gallery.save()
    if not change:
        Gallery.title = str(Gallery.id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T10:25:35.437

```
def save_model(self, request, Gallery, form, change):
    if Gallery.id is None:
        Gallery.save()
    if not change:
        Gallery.title = str(Gallery.id)
    Gallery.save() 
```

`save()`这只是第一次做两个。

# python - 向使用 zope.formlib 构建的 Plone 表单发送 GET 请求

> ID：10570652
> 
> 赞同：2
> 
> 时间：2012-05-13T09:23:30.933
> 
> 标签：python, plone

我有一个用 zope.formlib 构建的表单。当我填写表格并推送提交时，我可以在浏览器中看到结果。现在，我想从其他地方引用这些结果，以便用户无需填写表格即可获得结果。我尝试构建一个 URL，在表单 URL 之后添加参数以执行如下 GET 请求：@@page?param1=myparam1¶m2=myparam2

这样我就无法得到负载的结果。它只显示表格。

有什么遗漏吗？zope.formlib 是否允许 GET 请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T12:45:43.387

`zope.formlib`根据请求中存在的动作名称应用动作；通常这是通过为提交按钮提供操作的名称来完成的。

通过在您的 GET 请求中包含该名称，您可以调用该操作。请注意，动作以表单标识符和“动作”关键字为前缀，因此`save`动作通常使用参数名称`form.action.save`：

@@page?param1=myparam1¶m2=myparam2&form.action.save=保存

发现动作参数的确切名称的最简单方法是查看为表单生成的输出并查找`.action.`名称。

# c++ - 有一个 .exe 的路径，我怎样才能知道它是否正在运行？

> ID：10570658
> 
> 赞同：1
> 
> 时间：2012-05-13T09:25:01.497
> 
> 标签：c++, windows, winapi

我想知道是否以及如何找出说 Calc.exe from`C:\Windows\System32`是否正在运行（在 XP 及更高版本上，不使用外部应用程序，例如`WMIC`）（类似于`System.Diagnostics`它 `Process.GetProcesses()` [为 C# 开发人员提供的](http://www.howtogeek.com/howto/programming/get-a-list-of-running-processes-in-c/)东西，但为 native提供的东西`winapi`）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T09:28:07.737

您只需要枚举进程并搜索匹配项。

要使用的 API 是[`Process32First`和`Process32Next`](http://msdn.microsoft.com/en-us/library/ms684887%28v=VS.85%29.aspx)。[示例代码在这里](http://www.installsetupconfig.com/win32programming/processstatushelperapis10_5.html)。

# jenkins - 詹金斯停止后不会启动

> ID：10570659
> 
> 赞同：0
> 
> 时间：2012-05-13T09:25:05.020
> 
> 标签：jenkins

我昨天安装了 Jenkins（连同 apache2）。詹金斯开始很好，一切都很好。然后我决定停止 jenkins 和 apache，因为我计划今天配置它们。现在当我启动 Jenkins 我得到这个错误： [Jenkins 启动错误](http://pastebin.com/8gBypFPz "这是例外")

我尝试了其他一些端口，例如 8081 或 4xxxx，但没有任何帮助。我怎样才能解决这个问题？请帮忙。

系统：

*   Debian 6.0
*   通过官方仓库安装 Jenkins。
*   除了 000-default 之外，Apache 没有虚拟主机
*   netstat 在 8080 或 4xxxx 端口上没有显示任何内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T11:46:24.330

这个问题很容易解决：

> 原因：java.net.BindException：**地址已在使用中**

这意味着对于给定的地址：端口已经有一个绑定到它的进程。请使用操作系统工具找到这个进程，并最终杀死它。然后再次启动 Jenkins。

此外，我可以补充一点，几乎可以肯定 Jenkins 没有正确停止，或者由于某些错误，没有完全停止。

# javascript - Firefox 中的 Javascript 问题，但 IE 中没有 调试问题 VIsual Studio 2010

> ID：10570666
> 
> 赞同：0
> 
> 时间：2012-05-13T09:25:43.700
> 
> 标签：javascript, asp.net, css, html

帮助 我是使用 ASP.NET 进行 Web 开发的新手。为什么我的网络应用程序在调试下面的代码时没有像 IE 那样提供所需的输出：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
<style type="text/css">
    h1{color:Blue}
    h2{color:Red}

</style>
<script type="text/javascript">
    function ShowColor() {
        alert("You selected " + SelectColor.value);
        BodyContent.style.backgroundColor = SelectColor.value;
    }
</script>
</head>
<body>
<div id="BodyContent">
    <h1>HelloWorld</h1>
    <h2>Welcome</h2>
    <p>
    This is my first Web Page</p>
    <hr />
    Please select color:
    <select id="SelectColor">
        <option value="white">white</option>
        <option value="yellow">yellow</option>
        <option value="silver">silver</option>
    </select>
    <input id="ButtonColor" type="button" value="Select" onclick="ShowColor()" />
</div>

</body>
</html> 
```

问题是当我单击“选择”按钮时 FF 不执行 javascript“ShowColor”，但 IE 执行。

![在此处输入图像描述](../Images/0a9e18282f56d70b1cd6632e11633385.png)

```
 function ShowColor() {
        alert("You selected " + SelectColor.value);
        BodyContent.style.backgroundColor = SelectColor.value;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T09:41:58.817

您的 javascript 函数应如下所示：

```
function ShowColor() {
    alert("You selected " + document.getElementById("SelectColor").value);
    document.body.style.backgroundColor = document.getElementById("SelectColor").value;
} 
```

您需要使用 javascript 选择实际元素。例如 document.gelElementById("id of element")，然后改变文档颜色。这应该适用于任何浏览器。

该函数现在显示适当的选定值并实际更改网页的背景。如果这对您有所帮助，请标记为答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T09:48:23.470

尝试这个：

```
<script type="text/javascript">
var selected;
function alertselected(selectobj) {
    selected = selectobj.selectedIndex;
}

function ShowColor() {
    alert("You selected " + selected);
    elm = document.getElementById("sample");
    document.getElementById("BodyContent").style.backgroundColor = elm.options[elm.selectedIndex].value;
} 
```

html:

```
<div id="BodyContent"><select id="sample" onChange="alertselected(this)">option>white</option><option>yellow</option><option>silver</option> 
```

```
<input id="ButtonColor" type="button" value="Select" onclick="ShowColor()" /></div> 
```

# java - 获取 NoHttpResponseException 进行负载测试

> ID：10570672
> 
> 赞同：26
> 
> 时间：2012-05-13T09:26:42.463
> 
> 标签：java, tomcat, httpclient

我正在为我的应用程序运行负载测试。我有两台服务器：一台用于我的应用程序，另一台用于获取我的响应。

在我的虚拟服务器中，我有以下 jsp 代码：

```
<%@ page import="java.util.Random" %>
<%@ page language="java" %>
<%@ page session="false" %>
<%
   String retVal = "some json string";
   Thread.sleep(50);
%> 
```

我正在使用tomcat7 运行该应用程序。我的 server.xml 连接池（在两台服务器中）如下所示：

```
<Executor name="tomcatThreadPool" namePrefix="catalina-exec-" maxThreads="1500" minSpareThreads="1000" prestartminSpareThreads="true" /> 
<Connector port="9031" protocol="HTTP/1.1" 
           connectionTimeout="20000" 
           maxConnections="4000"
           executor="tomcatThreadPool"
           redirectPort="8443" /> 
```

我从服务器运行的 java 代码是：

```
 HttpPost post = new HttpPost(bidderUrl);
 post.setHeader("Content-Type", "application/json");    
 // I'm using http client with ThreadSafeClientConnManager
 // total conn = 500,  max conn per route = 100, timeout=500millis
 HttpClient httpClient = httpClientFactory.getHttpClient();
    try {
        post.setEntity(new StringEntity(jsobBidRequest));
        HttpResponse response = httpClient.execute(post);
        ...
    catch (NoHttpResponseException e){
        log.error(e);
    } 
```

我正在用 50 个并发线程（没有循环）运行 Jmetter，并得到很多这样的异常：

```
org.apache.http.NoHttpResponseException The target server failed to respond 
```

虽然我只运行 5 或 10 个并发线程，但一切正常。

你能告诉我我的设置有什么问题吗？据我了解，我没有看到 50 个并发线程请求有任何错误。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-05-21T06:48:54.983

我找到了问题的根本原因。

由于某种原因，连接变得无效并且池不知道它。

在这种情况下，`NoHttpResponseException`抛出并且请求简单地失败。我认为这些问题应该在 HTTP 客户端池层中解决，并且对我的代码是透明的，但这并不是它的行为。

为了解决这个问题，`HttpRequestRetryHandler`应该重写 HTTP 客户端：

```
ThreadSafeClientConnManager cm = new ThreadSafeClientConnManager(schemeRegistry);
...
DefaultHttpClient httpClient = new DefaultHttpClient(cm, params);
httpClient.setHttpRequestRetryHandler(new HttpRequestRetryHandler() {
    @Override
    public boolean retryRequest(IOException exception, int executionCount, 
                                HttpContext context) {
        if (executionCount > 3) {
           LOGGER.warn("Maximum tries reached for client http pool ");
                return false;
        }
        if (exception instanceof org.apache.http.NoHttpResponseException) {
            LOGGER.warn("No response from server on " + executionCount + " call");
            return true;
        }
        return false;
      }
   }); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-01-19T16:24:34.463

此解决方案适用于 HttpClient 4.5 及更高版本。DefaultHttpClient 已弃用。

```
HttpClientBuilder clientBuilder = HttpClients.custom();
clientBuilder.setRetryHandler(new DefaultHttpRequestRetryHandler(3, false)); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-12-14T15:34:46.227

我在[https://issues.apache.org/jira/browse/HTTPCLIENT-1610](https://issues.apache.org/jira/browse/HTTPCLIENT-1610)记录的缺陷中发表了评论。如您所见，一旦我将不活动的 http 连接验证前重用时间从默认的 2000 毫秒减少到 100 毫秒，我就看不到任何 NoHttpResponseException 了。我没有测试找出阈值是多少在我的环境中使用陈旧的连接无效，但 100 毫秒在我的环境中绝对足够短。

# android - 无限播放音乐，直到单击按钮

> ID：10570678
> 
> 赞同：1
> 
> 时间：2012-05-13T09:27:34.707
> 
> 标签：android, playback, infinite, interruption

我只是想在无限循环中连续播放音乐，直到单击按钮。它工作正常但是，例如：我的声音文件是 5 秒。每 5 秒后有一个暂停，音乐再次播放。有没有办法阻止这种情况并不间断地播放音乐？我已经为那个无限循环使用**了 Setlooping(true) 。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T09:51:04.667

您的问题是您的音乐文件可能在结尾（或开头）包含短暂的停顿。您需要在声音编辑器中编辑此文件，使其更适合连续播放。

**编辑**

需要明确的是，您是要循环播放*一个特定*的声音文件，还是一般的*任何*声音文件？

# jquery - jquery动态插入的attr不起作用

> ID：10570679
> 
> 赞同：1
> 
> 时间：2012-05-13T09:27:57.410
> 
> 标签：jquery, jquery-mobile

我正在使用 jqueryMobile ：

```
 <div id="header"> 
  <h1>conent</h1>
 </div> 
```

现在在 .js 文件中：

```
 $("#header").attr("data-role","header"); 
```

这不起作用，但如果我这样做：

```
 <div id="header" data-role="header"> 
  <h1>conent</h1>
 </div> 
```

它工作正常，但是为什么当我们`data-role`通过 jquery 动态插入属性时它不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T09:45:39.697

这里重要的是您将属性添加到`#header`div 的时间。我建议您绑定到 pagebeforecreate 事件。这样，您就可以在 JQM 初始化页面之前添加属性。IE

```
​$(document).on('pagebeforecreate', function(){
    $("#header").attr("data-role","header");
});​ 
```

这是一个工作示例[http://jsfiddle.net/codaniel/wJdvK/1/](http://jsfiddle.net/codaniel/wJdvK/1/)

这是来自文档的引用。

**pagebeforecreate**

在大多数插件自动初始化发生之前，在正在初始化的页面上触发。

```
$( '#aboutPage' ).live( 'pagebeforecreate',function(event){
  alert( 'This page was just inserted into the dom!' );
}); 
```

请注意，通过绑定到 pagebeforecreate，您可以在 jQuery Mobile 的默认小部件自动初始化之前操作标记。例如，假设您想通过 JavaScript 而不是在 HTML 源中添加数据属性，这就是您要使用的事件。

```
$( '#aboutPage' ).live( 'pagebeforecreate',function(event){
  // manipulate this page before its widgets are auto-initialized
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T09:35:44.257

您是否将代码包装在`pageinit`-event 中？

查看[jQuery Mobile 文档](http://jquerymobile.com/demos/1.1.0/docs/api/events.html)。

```
$(document).bind('pagebeforecreate', function(e){
    $("#header").attr("data-role","header");
}); 
```

或者正确的方式（完全一样，只是短一点）：

```
$(document).bind('pagebeforecreate', function(e){
    $("#header").data("role","header");
}); 
```

# android - Android - inAnimation 适用于 ViewFlipper 但 outAnimation 不适用

> ID：10570681
> 
> 赞同：4
> 
> 时间：2012-05-13T09:28:17.560
> 
> 标签：android, android-animation, viewflipper

我一直在尝试实现 ViewFlipper 及其翻译动画。我可以参考很多页面，但无论我如何尝试，我都无法看到 outAnimation 发生。下面是我的项目，目前没有看到翻译动画，但如果我注释掉 vf.setOutAnimation... 部分，inAnimation 动画突然开始工作。...为什么？

```
package com.example.testview;

import android.app.Activity;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.view.animation.AnimationUtils;
import android.widget.TextView;
import android.widget.ViewFlipper;

public class TestViewActivity extends Activity implements OnTouchListener {

    private ViewFlipper vf;
    private float firstTouchX;
    private float leaveTouchX;

@Override public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    vf = (ViewFlipper) findViewById(R.id.viewFlipper1);
    vf.setOnTouchListener(this);
}

    public boolean onTouch(View v, MotionEvent event) {

        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                    firstTouchX = event.getX();
                    break;

            case MotionEvent.ACTION_UP:
                    leaveTouchX = event.getX();

                if (this.firstTouchX - 50f > leaveTouchX) {

                    vf.setInAnimation(AnimationUtils.loadAnimation(this, R.anim.right_in));
                    vf.setOutAnimation(AnimationUtils.loadAnimation(this, R.anim.left_out));
                    vf.showNext();
                }
                if (this.firstTouchX + 50f < leaveTouchX) {

                    vf.setInAnimation(AnimationUtils.loadAnimation(this, R.anim.left_in));
                    vf.setOutAnimation(AnimationUtils.loadAnimation(this, R.anim.right_out));
                    vf.showPrevious();
                }
                break;
        }
        return true;
    }
} 
```

res/anim/left_in.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<translate 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="350" 
    android:fromXDelta="-100%p" 
    android:toXDelta="0%p"  
    android:fromYDelta="0%p"
    android:toYDelta="0%p">
</translate> 
```

res/anim/left_out.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<translate
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="350"
    android:fromXDelta="0%p"
    android:toXDelta="-100%p"
    android:fromYDelta="0%p"
    android:toYDelta="0%p">
</translate> 
```

res/anim/right_in.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<translate
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="350"
    android:fromXDelta="100%p"
    android:toXDelta="0%p"
    android:fromYDelta="0%p"
    android:toYDelta="0%p">
</translate> 
```

res/anim/right_out.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<translate
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="350"
    android:fromXDelta="0%p"
    android:toXDelta="100%p"
    android:fromYDelta="0%p"
    android:toYDelta="0%p">
</translate> 
```

资源/布局/main.xml

```
<?xml version="1.0" encoding="utf-8"?>
    <ViewFlipper
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/viewFlipper1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

         <include
            android:id="@+id/first"
            layout="@layout/first" />

        <include
            android:id="@+id/second"
            layout="@layout/second" />

        <include
            android:id="@+id/third"
            layout="@layout/third" />

    </ViewFlipper> 
```

first.xml/second.xml/third.xml（只是自己的图片id不同）

```
<?xml version="1.0" encoding="utf-8"?>
<ImageView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:src="@drawable/img">
</ImageView> 
```

**大编辑**：我只是根据我的帖子构建了一个较小的项目，它似乎可以工作......也许是通过省略一些我认为不必要的代码来开始讨论导致我的问题......我真的很抱歉，如果任何人都试图回答。我会做更多的调查，并希望我可以发布可供以后参考的故障，除非模组删除了这个问题。

**大编辑2**：今天我再次尝试，它没有工作，大概是因为我使用了 Android ARM 2.2 模拟器。一旦我切换到 ARM/Inter 2.3.3，它就可以工作了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:28:37.780

试试这个，将 outAnimation 替换为 inAnimation 之类的，

```
 if (this.firstTouchX - 50f > leaveTouchX) {

                vf.setOutAnimation(AnimationUtils.loadAnimation(this, R.anim.left_out));
                vf.setInAnimation(AnimationUtils.loadAnimation(this, R.anim.right_in));
                vf.showNext();
            }
            if (this.firstTouchX + 50f < leaveTouchX) {

                vf.setOutAnimation(AnimationUtils.loadAnimation(this, R.anim.right_out));
                vf.setInAnimation(AnimationUtils.loadAnimation(this, R.anim.left_in));
                vf.showPrevious();
            }
            break; 
```

然后尝试它可能是工作！

# c# - 将 proc.HasExited 从 C#.Net 转换为 Java

> ID：10570683
> 
> 赞同：0
> 
> 时间：2012-05-13T09:28:41.587
> 
> 标签：c#, java

我有一个在 linux 和 windows ftp 服务器之间传输文件的 C#.Net 控制台应用程序代码。

代码的行为是我自动打开一个控制台来显示文件传输的状态。在与 Windows 服务器之间传输文件时，我需要显示文件传输正在进行的指示器（使用看起来像是在移动或转动的符号）。这些符号如下：“|” --> "/" --> "-" --> "\" --> "|"

使用以下代码在 C#.Net 中显示上述“指标/符号”没有问题：

```
ProcessStartInfo PSI = new ProcessStartInfo("CMD.exe", "/C [here is the call to psftp / ftp scripts]"); 

String SymbolChar = "|";
Process proc = Process.Start(PSI); 

        while (true)
        {
            Thread.sleep(20);

            if (proc.HasExited)
            {
                Console.WriteLine("\b-> Done\n");
                break;
            }
            else
            {
                SymbolChar = NextChar(SymbolChar);
                Console.Write("\b{0}", SymbolChar);
            }
        }
        StreamReader srError = proc.StandardError;
        StreamReader srOutput = proc.StandardOutput;

//method used to animate status during process
    private static String NextChar(String sCurrentChar)
    {
        String sTempChar = "";

        if (sCurrentChar.equals("|")) {
            sTempChar = "/";
        }
        else if (sCurrentChar.equals("/")) {
            sTempChar = "-";
        }
        else if (sCurrentChar.equals("-")) {
            sTempChar = "\\";
        }
        else if (sCurrentChar.equals("-")) {
            sTempChar = "\\";
        }
        else if (sCurrentChar.equals("\\")) {
            sTempChar = "|";
        }

        return sTempChar;
    } 
```

当我使用以下代码将上述代码转换为 java 时，我的问题就开始了：

```
String sParam = "bash " + [here is the call to psftp / ftp scripts];
String cmd[] = {"/bin/bash","-c",sParam};
Process proc = Runtime.getRuntime().exec(cmd); 
```

上面的代码完美运行。问题是我不知道如何显示“动画”字符了。我突然不知道（我非常需要帮助）如何转换它：

```
Process proc = Process.Start(PSI); 

        while (true)
        {
            Thread.sleep(20);

            if (proc.HasExited)
            {
                Console.WriteLine("\b-> Done\n");
                break;
            }
            else
            {
                SymbolChar = NextChar(SymbolChar);
                Console.Write("\b{0}", SymbolChar);
            }
        } 
```

您对我可以在 java 中的**“if (proc.HasExited)”**行中使用什么以便继续前进有任何想法吗？

抱歉，解释太长了。我真的，真的需要帮助。

非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T09:38:14.583

您可以使用“Process.exitValue()”并捕获异常（如果该过程尚未完成，它将引发异常）。如果值为 0，则进程正常退出。然而，恕我直言，这是相当丑陋的。

我知道在 Java 中等待进程完成的唯一“正确”方法是让当前线程块，直到进程使用“Process.waitFor()”完成。

然而，这将需要一个不同的线程来显示您的进度动画，因为您当前的线程被阻塞并等待进程完成。

# javascript - 双向无限滚动 - 向上和向下

> ID：10570684
> 
> 赞同：19
> 
> 时间：2012-05-13T09:28:46.773
> 
> 标签：javascript, jquery, html, scroll

我正在尝试创建一个向上和向下无限滚动循环的页面。

目前我正在使用 jquery 将内容从页面顶部重新定位到底部。当您向下滚动时，这会创建一个很好的无缝循环，但我希望它在用户向上滚动时也能工作。

问题似乎是，即使内容位于页面上的负垂直空间，滚动也不会延伸到该空间。据我所知，没有办法覆盖它，所以我正在寻找某种解决方法。

我想使用 javascript 来禁用滚动并使用滚动事件来重新定位元素，但是页面上已经有很多绝对定位的元素和动画，所以我担心采用这条路线的性能。

还有其他线索吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T22:02:00.773

好的...我解决了。

我修改[了这个脚本](http://jsfiddle.net/27s5y/)，当你到达底部时，它会立即将滚动位置重新定位到页面顶部，当你到达顶部时，它会立即将滚动位置重新定位到底部。

```
$(window).scroll(function() {
    if ( $(window).scrollTop() >= 18830 ) {
        $(window).scrollTop(201);
    }
    else if ( $(window).scrollTop() == 0 ) {
        $(window).scrollTop(18629);
    }    
}); 
```

然后我确保页面底部和顶部的内容是相同的。我以为这次搬迁发生时会有闪光或什么的，但它很顺利！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T20:24:41.977

我最喜欢的解决方案是[这个](http://www.jquery4u.com/demos/infinite-scrolling-demo3/)（[代码](http://www.jquery4u.com/tutorials/jquery-infinite-scrolling-demos/#d_clip_container_4)），因为它在到达底部*之前*在底部添加元素，确保滚动保持连续（即使[平滑](https://plus.google.com/116164717430356367649/posts/9rCL4QwMbqf) [滚动](https://support.mozilla.org/en-US/questions/928979)）。但是，它在滚动可以很快发生的手机上效果不佳。我推荐 Marijn Haverbeke 在 CodeMirror 中关于假滚动条的[精彩文章](http://marijnhaverbeke.nl/blog/a-pathological-scrolling-model.html)，他在其中处理了类似的问题。

我给你留下一些片段。

> 首先，一些背景。为什么我们要先伪造一个滚动条？
> 
> 为了在加载大量文档时保持响应，CodeMirror 不会渲染整个文档，而只会渲染当前滚动到视图中的部分。这意味着它创建的 DOM 节点的数量受到视口大小的限制，并且由文本更改触发的浏览器重新布局相对便宜。

而再往下...

> 然后，它会监听轮子事件，但从不对它们调用 preventDefault 或滚动响应它们。相反，它通过设置超时来响应，以观察轮事件滚动内容的像素数量，并在运行时使用它来调整其增量到像素的速率。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-13T09:32:42.887

克隆您的 HTML 正文两次（或三次）（使用 javascript 或其他方式）。从中间副本而不是顶部开始页面，然后您可以随意处理滚动。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-13T21:38:43.893

> 还有其他线索吗？

看到这些了吗？

[5 个 jQuery 无限滚动演示](http://www.jquery4u.com/tutorials/jquery-infinite-scrolling-demos/)

[我找不到来源的jsfiddle。](http://jsfiddle.net/27s5y/)（我没写也不知道是谁写的）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-13T12:38:43.960

在 Mahmoud 的回答基础上，我在几分钟内破解了这个问题。

当使用键或鼠标滚轮滚动时，它有点工作（至少在 Firefox 上），但在拖动滚动条时它会出现故障。根据`div`高度与视口高度的关系，各种烟花也可能发生。

不过，我希望这可以帮助您找到正确的方向。

```
function onScroll(){
    var SAFETY_MARGIN = 50,
        scrollPos = $(this).scrollTop(),
        docHeight = $(document.body).height(),
        winHeight = $(window).height(),
        firstDiv = $('body>div:first-child')[0],
        lastDiv = $('body>div:last-child')[0],
        lowerLimit = SAFETY_MARGIN,
        higherLimit = docHeight - SAFETY_MARGIN;

    // Scrolling too high
    if( scrollPos <= lowerLimit ){

        // Move content to top;
        $(lastDiv).prependTo(document.body);

        // Adjust scroll position to compensate
        // for the new content at the top
        $(window).scrollTop(scrollPos + $(lastDiv).height());

    }

    // Scrolling too low
    else if( scrollPos + winHeight >= higherLimit ){

        // Move content to bottom
        $(firstDiv).appendTo(document.body);

        // Adjust scroll position to compensate
        // for the missing content at the top
        $(window).scrollTop(scrollPos - $(firstDiv).height());
    } 
}

$(window).scroll(onScroll);

$(window).load(function(){
    var $body = $(document.body);
    $(window).scrollTop($body.height() / 2);
});

</script>
</head>
<body>

<div style="height: 600px; background-color: red">&nbsp;</div>
<div style="height: 600px; background-color: green">&nbsp;</div>
<div style="height: 600px; background-color: blue">&nbsp;</div>

</body>
</html> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-18T11:23:02.027

正如许多人所建议的那样，如果您的页面在顶部和底部看起来并不完全相同，您需要克隆您的内容以使其看起来像它一样。我已经使用这种非常流畅的技术做了一个例子：

```
/*
Ininite looping scroll.
Tested and works well in latest Chrome, Safari and Firefox.
*/

(function (window) {
  'use strict';

  var doc = document,
    body = doc.body,
    html = doc.documentElement,
    startElement = doc.getElementsByClassName('is-start')[0],
    clones = doc.getElementsByClassName('is-clone'),
    disableScroll = false,
    docHeight,
    scrollPos,
    clonesHeight,
    i;

  function getScrollPos() {
    return (window.pageYOffset || html.scrollTop)  - (html.clientTop || 0);
  }

  function getDocHeight() {
    return Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);
  }

  function getClonesHeight() {
    i = 0;
    clonesHeight = 0;

    for (i; i < clones.length; i += 1) {
      clonesHeight = clonesHeight + clones[i].offsetHeight;
    }

    return clonesHeight;
  }

  docHeight = getDocHeight();
  clonesHeight = getClonesHeight();

  window.addEventListener('resize', function () {
    scrollPos = getScrollPos();
    docHeight = getDocHeight();
    clonesHeight = getClonesHeight();

    if (scrollPos <= 0) {
      window.scroll(0, 1); // Scroll 1 pixel to allow upwards scrolling.
    }
  }, false);

  window.addEventListener('scroll', function () {
    if (disableScroll === false) {
      scrollPos = getScrollPos();

      if (clonesHeight + scrollPos >= docHeight) {
        // Scroll to the top when you’ve reached the bottom
        window.scroll(0, 1); // Scroll 1 pixel to allow upwards scrolling.
        disableScroll = true;
      } else if (scrollPos <= 0) {
        // Scroll to the top of the clones when you reach the top.
        window.scroll(0, docHeight - clonesHeight);
        disableScroll = true;
      }

      if (disableScroll) {
        // Disable scroll-repositioning for a while to avoid flickering.
        window.setTimeout(function () {
          disableScroll = false;
        }, 100);
      }
    }
  }, false);

  // Needs a small delay in some browsers.
  window.setTimeout(function () {
    if (startElement) {
      // Start at the middle of the starting block.
      window.scroll(0, Math.round(startElement.getBoundingClientRect().top + document.body.scrollTop - (window.innerHeight - startElement.offsetHeight) / 2));
    } else {
      // Scroll 1 pixel to allow upwards scrolling.
      window.scroll(0, 1);
    }
  });

}(this));
```

```
section {
  position: relative;
  text-align: center;
  height: 80vh;
}

.red {
  background: #FF4136;
}
.green {
  background: #2ECC40;
}
.blue {
  background: #0074D9;
}
.orange {
  background: rebeccapurple;
}

h1 {
  margin: 0;
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 100%;

  font-size: 5vw;
  color: #fff;
  text-transform: uppercase;
}

body {
  font-family: "Avenir Next", Montserrat, Helvetica, sans-serif;
  font-weight: normal;
  font-size: 100%;
}

::scrollbar {
  display: none;
}
```

```
<section class="green">
  <h1>One</h1>
</section>
<section class="red">
  <h1>For</h1>
</section>
<section class="blue">
  <h1>All</h1>
</section>
<section class="orange">
  <h1>And</h1>
</section>
<section class="blue">
  <h1>All</h1>
</section>
<section class="red">
  <h1>For</h1>
</section>

<!--
These following blocks are the same as the first blocks to get that looping illusion going. You need to add clones to fill out a full viewport height.
-->
<section class="green is-clone is-start">
  <h1>One</h1>
</section>
<section class="red is-clone">
  <h1>For</h1>
</section>
```

# c - AVCodec PTS 时间戳不是从 0 开始

> ID：10570685
> 
> 赞同：1
> 
> 时间：2012-05-13T09:28:48.577
> 
> 标签：c, ffmpeg, libavcodec

我注意到对于一些视频文件，在 AVPacket 结构中返回的 PTS 时间戳不是从 0 开始，而是在一段时间后开始的。例如在 3.128 或什么的。我测试的 99% 的视频文件都有从 0 开始的 PTS 时间戳，但很少有文件有一些从 3.128 或 1.2 或其他东西开始的奇怪时间戳。我应该如何处理这些案件？我是否应该只记录第一个数据包的 PTS 时间戳，然后从所有后续时间戳值中减去此 PTS 以获得基于 0 的 PTS 值？或者我应该如何处理这些基于非 0 的时间戳？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T16:57:32.117

Libavcodec/avformat 只是为您提供文件中的数据。不幸的是（或者幸运的是，取决于您的观点），许多文件格式不需要从 0 开始的时间戳。事实上，如果多个文件各自构成较长流的一部分并且您希望能够无损地将它们重新组合在一起。

如果您想要基于 0 的时间戳，那么就像您说的那样，您需要保存最低/第一个时间戳并从所有时间戳中减去该值。但是请注意，对于一些非常丑陋的格式（如 DVD 视频），时间戳在内容中间重置是很常见的，这甚至可能导致您的方法得到负时间戳。如果您预计自己可能会处理此类内容，则需要检测不连续性并对其进行修补。上次我使用 avcodec/avformat，他们没有自动为您执行此操作的功能，但他们现在可能。如果您认为您可能需要它，我会调查它。

# c# - 异步更新图表？

> ID：10570687
> 
> 赞同：0
> 
> 时间：2012-05-13T09:29:04.883
> 
> 标签：c#, asynchronous, graph

我正在玩 C# 中的一个想法，并且想要一些关于异步更新图中大量节点的最佳方法的建议。我还没有读过关于如何做这样的事情的任何内容，我在教科书/示例中看到的所有内容都使用节点并没有真正改变的图形。

假设我有一个包含大量节点（数千个）的图表。每个节点都有一些内部状态，该状态取决于每个邻居的一些公共属性，以及潜在的一些外部输入。

所以示意性地一个节点很简单：

```
class Node
{
    State internalState;
    public State exposedState;

    Input input;
    List<Node> neigbors;        

    void Update()
    {
        while (true)
        {
            DoCalculations(input, internalState, neighbors);
            exposedState = ExposedState(internalState);
        }
    }

    State ExposedState(State state) { ... }
    void DoCalculations() { ... }
} 
```

困难在于，我希望节点在其输入状态更改（通过订阅事件或轮询）或其邻居的状态更改时立即更新。如果我尝试以天真的方式同步执行此操作，我会遇到明显的问题：

```
Node A updates when input changes
Its neighbor B sees A has changed, updates.
Node A sees its neighbor B has changed, updates
B updates
A updates
....
Stack overflows 
```

如果我改为通过枚举所有节点并调用它们的更新方法进行更新，则节点可能会不一致地更新（例如：A 的输入更改，B 更新并且看不到 A 的更改，A 更新并更改暴露状态）。

我可以通过尝试维护一堆首先要更新的节点来进行更新，但是接下来需要更新他们的邻居，然后再更新他们的，等等，这意味着每个更新周期我都需要仔细遍历图表并确定正确的更新顺序，这可能会很慢......

天真的异步方法是让每个节点都在自己的线程中（或者更简单地说，每个节点的更新方法都会发生初始异步方法调用，该方法会在一段时间内无限期更新（true）{...}）。他的问题是拥有数千个线程似乎不是一个好主意！

看起来这应该有一个简单的解决方案；这与元胞自动机并没有太大的不同，但是我提出的任何同步解决方案要么必须更新大量的节点数，才能从一端到另一端获取消息，要么解决某种复杂的具有多个起点的图行走问题。

异步方法看起来非常简单，如果我能拥有数千个线程就好了……

那么做这样的事情的最好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T09:36:35.993

我认为 Rx ( [The Reactive Extensions](http://msdn.microsoft.com/en-us/library/hh242985%28VS.103%29.aspx) ) 将是一个很好的起点。

其他节点可能需要依赖的每条状态都以 an 形式公开，`IObserable<TState>`然后其他节点可以订阅这些 observable：

```
otherNode.PieceOfState.SubScribe(v => { UpdateMyState(v) }); 
```

Rx 为 observables 提供了许多过滤和处理功能：这些可用于过滤重复事件（但您当然需要定义“重复”）。

这是一篇介绍性文章：[http ://weblogs.asp.net/podwysocki/archive/2009/10/14/introducing-the-reactive-framework-part-i.aspx](http://weblogs.asp.net/podwysocki/archive/2009/10/14/introducing-the-reactive-framework-part-i.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T10:24:46.807

首先，您需要确保您的更新收敛。这与您如何执行它们（同步、异步、串行或并行）无关。

假设您有两个节点 A 和 B，它们是连接。A改变，触发B重新计算。B再改变，触发A重新计算。如果A的重新计算改变了A的值，就会触发B的重新计算，以此类推。您需要这一系列触发器在某一点停止 - 您需要收敛您的更改。如果他们不这样做，那么您使用的任何技术都无法修复它。

一旦你确定计算收敛并且你不会陷入无休止的重新计算，你应该从简单的单线程同步计算开始，看看它是否表现良好。如果速度够快，就停在那里。如果没有，您可以尝试并行化它。

我不会为每个计算创建一个线程，它根本无法扩展。而是使用需要执行的计算队列，并且每次*更改节点 A 的值时*，将其所有邻居都放入队列中。您可以让几个线程处理队列，使其成为更具可扩展性的架构。

如果这*还不*够快，您需要优化放入队列的内容以及处理方式。我认为现在担心这个还为时过早。

# javascript - 如何为 Firefox 和 ghroom 获取 div selectionstart 和 selectionend？

> ID：10570692
> 
> 赞同：0
> 
> 时间：2012-05-13T09:29:55.567
> 
> 标签：javascript

当我在文本区域内使用此代码时，它的工作完美但我的 div 需要它 selectionstart 和 selectionend 函数给出未定义的值 为什么有人可以帮助我这里是我的代码

```
{var textarea = document.getElementById("content_text");

if ($.browser.webkit || $.browser.mozilla) {
        var start = textarea.selectionStart;
        var end = textarea.selectionEnd;
        sel = textarea.value.substring(start, end); 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:45:41.967

如果您使用 onclik 事件，它将不起作用，因为它没有获取文本，但如果您使用 onmousdown 事件，它将起作用

# android - 访问原始联系人数据

> ID：10570694
> 
> 赞同：6
> 
> 时间：2012-05-13T09:30:03.740
> 
> 标签：android, android-contacts, android-cursor

我将一些原始联系人添加到我创建的帐户中。有谁知道我怎样才能访问它的数据字段？

这是我添加联系人的方式：

```
 Log.i(TAG, "Adding contact: " + username);
    ArrayList<ContentProviderOperation> operationList = new ArrayList<ContentProviderOperation>();

    // create the contact
    ContentProviderOperation.Builder builder = ContentProviderOperation.newInsert(RawContacts.CONTENT_URI);
    builder.withValue(RawContacts.ACCOUNT_NAME, account.name);
    builder.withValue(RawContacts.ACCOUNT_TYPE, account.type);
    builder.withValue(RawContacts.SYNC1, username);
    operationList.add(builder.build());

    // set display name
    builder = ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI);
    builder.withValueBackReference(ContactsContract.CommonDataKinds.StructuredName.RAW_CONTACT_ID, 0);
    builder.withValue(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE);
    builder.withValue(ContactsContract.CommonDataKinds.StructuredName.DISPLAY_NAME, name);
    operationList.add(builder.build());

    // set profile data
    builder = ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI);
    builder.withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0);
    builder.withValue(ContactsContract.Data.MIMETYPE, "vnd.android.cursor.item/vnd.net.myapp.android.profile");
    builder.withValue(ContactsContract.Data.DATA1, username);
    builder.withValue(ContactsContract.Data.DATA2, context.getString(R.string.app_name) + " Profile");
    builder.withValue(ContactsContract.Data.DATA3, "View profile");
    operationList.add(builder.build()); 
```

我用来获取联系人的光标是：

```
private Cursor getContactsCursor(CharSequence constraint) {
    Uri uri = RawContacts.CONTENT_URI.buildUpon().appendQueryParameter(RawContacts.ACCOUNT_NAME, getString(R.string.app_name)).appendQueryParameter(RawContacts.ACCOUNT_TYPE, getString(R.string.ACCOUNT_TYPE)).build();
    String[] projection = null;//new String[] { ContactsContract.Contacts.DISPLAY_NAME };
    String selection = null;
    if (constraint != null && constraint.length() > 0)
        selection = ContactsContract.Contacts.DISPLAY_NAME + " LIKE '%" + constraint + "%'" ;
    String sortOrder = ContactsContract.Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC";
    Cursor cursor = getContentResolver().query(uri, projection, selection, null , sortOrder);
    return cursor;
} 
```

不幸的是，我需要 Data1 字段，它不是游标列之一。我想问题出在 RawContacts.CONTENT_URI Uri 上。我应该改用什么？

# sql - 由于语法不正确，调用存储过程失败

> ID：10570696
> 
> 赞同：0
> 
> 时间：2012-05-13T09:30:17.000
> 
> 标签：sql, sql-server, tsql, stored-procedures

我有这个当前的 SP：

```
ALTER PROCEDURE [dbo].[GetHighestDrop]
  @val1 AS FLOAT ,
  @val2 AS FLOAT ,
  @val3 AS FLOAT 
AS
BEGIN
select case when @val1 < @val2 then
               case when @val1 < @val3 then @val1
               else @val3
               end
        when @val2 < @val3 then @val2
               else @val3
    end
END 
```

我用这种语法调用它：

```
SELECT
GetHighestDrop @val1=((clmnA/clmnB)-1)*100,@val2=2,@val3=3
FROM dbo.tstTable 
```

clmnA 和 clmbB 包含数字，如果我单独运行它们，例如：

```
SELECT ((clmnA/clmnB)-1)*100 FROM dbo.tstTable 
```

我得到一个结果，它是一个浮点数，但是当我通过 GetHighestDrop 运行它时，它失败了。

知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T09:39:40.867

您只能使用 调用存储过程`exec`。无法在`select`.

考虑将您的过程转换为[标量用户定义函数](http://msdn.microsoft.com/en-us/library/ms186755.aspx)。

示例函数使用（不要忘记模式名称，通常是“dbo”）：

```
select  dbo.GetHighestDrop( ((clmnA/clmnB)-1)*100, 2, 3) as Col1
from    dbo.tstTable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T09:38:43.387

可能是您的存储过程不返回任何值吗？尝试必须返回至少一个值的函数。如果你想使用存储过程，那么你必须添加一个`out`参数。

# java - Eclipse Tomcat 服务器异常行为

> ID：10570701
> 
> 赞同：0
> 
> 时间：2012-05-13T09:31:13.037
> 
> 标签：java, eclipse, tomcat

我在 Eclipse 中运行 Tomcat 服务器时遇到了一些奇怪的行为（这已经发生在我身上两次了）。

我在tomcat服务器中运行的eclipse中有一个maven web应用程序，服务器配置正常，我没有检查服务器选项：“不发布服务模块” - 虽然我更喜欢检查这个，但我在Windows 7上并且通常在 Eclipse 中的一个新项目上，如果我选中此选项，则服务器不会启动。

现在我正在处理的项目已经工作了一段时间，运行良好等，今天早上我更改了一些（休眠）域类并重新启动服务器并收到此错误： [Spring 3.0 - 无法找到 Spring NamespaceHandler for XML 模式命名空间 [http://www.springframework.org/schema/security]](https://stackoverflow.com/questions/2161050/spring-3-0-unable-to-locate-spring-namespacehandler-for-xml-schema-namespace)

现在，由于服务器一直在运行，而我所更改的只是一些小的休眠类，我知道我没有破坏任何东西（尝试了各种方法，例如刷新/mvn clean/package/etc）。

之前在另一个项目中遇到过一些奇怪的行为，我尝试将“不发布的服务模块”更改为检查并重新启动，并且工作正常！

谁能解释一下是什么突然翻转了那个开关，让我需要让它打勾才能加载？

* * *

更新：根据要求，以下是应用上下文配置顶部的声明：

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
                        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                        http://www.springframework.org/schema/security 
                        http://www.springframework.org/schema/security/spring-security-3.0.xsd"> 
```

# java - Launch4j jre 需要错误

> ID：10570702
> 
> 赞同：6
> 
> 时间：2012-05-13T09:31:22.290
> 
> 标签：java, launch4j

我第一次使用 launch4j，我得到系统编译错误（在 OSX 和 windows xp 上相同）。这是项目 xml 文件：

```
<launch4jConfig>
  <dontWrapJar>false</dontWrapJar>
  <headerType>gui</headerType>
  <jar>C:\Temp\QuotaSatellite\QuotaSatellite.jar</jar>
  <outfile>C:\Temp\QuotaSatellite.exe</outfile>
  <errTitle></errTitle>
  <cmdLine></cmdLine>
  <chdir></chdir>
  <priority>normal</priority>
  <downloadUrl>http://java.com/download</downloadUrl>
  <supportUrl></supportUrl>
  <customProcName>false</customProcName>
  <stayAlive>false</stayAlive>
  <manifest></manifest>
  <icon></icon>
  <jre>
     <path></path>
     <minVersion>1.6.0</minVersion>
     <maxVersion></maxVersion>
     <jdkPreference>preferJre</jdkPreference>
  </jre>
</launch4jConfig> 
```

这是windows xp上的日志：

```
Compiling resources
Generated resource file...

LANGUAGE 0, 1
2 RCDATA BEGIN "1.6.0\0" END
18 RCDATA BEGIN "1\0" END
21 RCDATA BEGIN "http://java.com/download\0" END
20 RCDATA BEGIN "32\0" END
101 RCDATA BEGIN "An error occurred while starting the application.\0" END
102 RCDATA BEGIN "This application was configured to use a bundled Java Runtime Environment but the      runtime is missing or corrupted.\0" END
103 RCDATA BEGIN "This application requires a Java Runtime Environment\0" END
104 RCDATA BEGIN "The registry refers to a nonexistent Java Runtime Environment installation or the     runtime is corrupted.\0" END
17 RCDATA BEGIN "true\0" END

net.sf.launch4j.ExecException: java.io.IOException: Cannot run program "C:\launch4j\bin\windres.exe": >CreateProcess error=2, Le fichier spécifié est introuvable 
```

我也尝试了清单文件并得到了同样的错误。为什么launch4j 需要我的jar 不需要的捆绑JRE？您的帮助将不胜感激

# c++ - 基类是抽象的，派生也是抽象的？

> ID：10570703
> 
> 赞同：-5
> 
> 时间：2012-05-13T09:31:26.360
> 
> 标签：c++, oop, inheritance

我有基类：

```
class CDigit
{
private:
int m_iDigit;
public:
CDigit() 
{
    m_iDigit = 0;
}
CDigit( const int digit ) 
{
    m_iDigit = digit;
}
void setDigit( const int digit )
{
    m_iDigit = digit;
}
int getDigit() const
{
    return m_iDigit;
}
virtual void output(ostream &x) = 0;
virtual bool less( CDigit *pDigit ) = 0;
}; 
```

和派生类

```
class CExpected : public CDigit
{
private:
int m_iExpFreq;
public:
CExpected() : CDigit()
{
    m_iExpFreq = 0;
}
CExpected( const int dig, const int freq) : CDigit(dig)
{
    m_iExpFreq = freq;
}
CExpected( const CExpected& ce)
{
    m_iExpFreq = ce.m_iExpFreq;
    this->setDigit( ce.getDigit() );
}
    void output(ostream &x)
{
    x<<this->getDigit()<<" "<<this->m_iObsFreq;
}
bool less( CObserved *pDigit )
{
    if( ( pDigit->getDigit() == this->getDigit() ) && (pDigit->getObserved() == this->getObserved() ) )
        return true;
    else
        return false;
}
...
}; 
```

问题是编译器告诉我 CExpected 是一个抽象类，我无法实例化它。我究竟做错了什么？

编辑：我已经实现了它们，但没有在此处添加它们

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T09:33:45.803

你还没有实现`output`and `less`。任何没有定义纯虚函数的类都不能被实例化。

一个好的编译器应该向您显示更好的信息：

```
test.cpp: In function ‘int main(int, char**)’:
test.cpp:53: error: cannot declare variable ‘c’ to be of abstract type ‘CExpected’
test.cpp:32: note:   because the following virtual functions are pure within ‘CExpected’:
test.cpp:27: note:  virtual void CDigit::output(std::ostream&)
test.cpp:28: note:  virtual bool CDigit::less(CDigit*) 
```

如果您想让它们成为可选的，请不要使用`= 0`指示*纯*虚拟方法的说明符（并且是抽象类的标记）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T09:37:59.400

在这种情况下，签名不同：

```
virtual bool less( CDigit *pDigit ) = 0;
virtual bool less( CObserved *pDigit ) 
```

（除非 CObserved 被定义为 CDigit）

问题是类型不同，如果派生，它不能匹配多态调用，因为你会期望提升——这是无效的。您的定义`CExpected`需要匹配，并声明为：

```
virtual bool less( CDigit *pDigit ) { ... } 
```

# ajax - 奇怪的行为 里面 里面

> ID：10570705
> 
> 赞同：0
> 
> 时间：2012-05-13T09:32:07.233
> 
> 标签：ajax, jsf-2, jboss-weld, hibernate-validator, uirepeat

我有一个由 ui:repeat 提供的数据表。因为我希望用户能够逐行更改数据，所以每一行都包含在一个 h:form 中。最后，每个 h:form 都有一个带有 f:ajax 标签的按钮。我的行为非常不一致。

```
<ui:repeat value="#{importManager.items}" var="item" varStatus="status">
    <h:form>
        <tr>
            <td>
                <h:outputText value="#{status.index}"/>
            </td>
            <td>
                <h:inputText id="title" value="#{item.title}" styleClass="#{item.validTitle ? 'valid' : 'invalid'}"/>
            </td>
            <td>
                <h:inputText id="artist" value="#{item.artist}" styleClass="#{item.validArtist ? 'valid' : 'invalid'}"/>
            </td>
            <td>
                <h:commandButton value="#{importMessages.submit}">
                    <f:ajax execute="@form" render="@all" listener="#{importManager.publish(item)}"/>
                </h:commandButton>
            </td>                           
        </tr>
    </h:form>
</ui:repeat> 
```

上述方法有效，但显然带宽并不便宜。

如果我将render="@all" 更改为render="@form"，Firebug 会显示部分响应发送正常，但我的浏览器（Firefox）神秘地不显示它。所以我猜它（浏览器）没有找到要更新的元素？

如果我将 execute="@form" 更改为 execute="@all" 我会得到非常奇怪的行为，即数据丢失，并且受影响的字段变为空白。

支持 bean 非常简单：

```
 public void publish(final Item item)
    {
        Set<ConstraintViolation<Item>> violations = item.validate();

        if (violations.isEmpty())
        {
            temporaryRegistry.deleteItem(item);
            registry.storeItem(item);
        }
        else
        {
            // Display error messages
        }
    } 
```

和模型：

```
@Entity
public class Item implements Cloneable
{
    @Id @GeneratedValue
    private long identifier;

    @NotNull(groups={Warning.class})
    @Length(min=1, max=80, groups={Warning.class})
    private String title;

    @NotNull(groups={Warning.class})
    @Length(min=1, max=80, groups={Warning.class})  
    private String artist;

    @NotNull(groups={Warning.class})
    @Length(min=1, max=10, groups={Warning.class})
    private String media;

    @NotNull(groups={Warning.class})
    @Length(min=1, max=5, groups={Warning.class})
    @Column(name = "_condition")
    private String condition;

// Setters and Getters

    public boolean isValidTitle()
    {
        final ValidatorFactory factory = Validation.buildDefaultValidatorFactory();
        final Validator validator = factory.getValidator();

        final Set<ConstraintViolation<Item>> violations = validator.validateProperty(this, "title", Warning.class);

        return violations.isEmpty();        
    }

    public boolean isValidCondition()
    {
        final ValidatorFactory factory = Validation.buildDefaultValidatorFactory();
        final Validator validator = factory.getValidator();

        final Set<ConstraintViolation<Item>> violations = validator.validateProperty(this, "condition", Warning.class);

        return violations.isEmpty();        
    }

    public boolean isValidArtist()
    {
        final ValidatorFactory factory = Validation.buildDefaultValidatorFactory();
        final Validator validator = factory.getValidator();

        final Set<ConstraintViolation<Item>> violations = validator.validateProperty(this, "artist", Warning.class);

        return violations.isEmpty();
    }

    @Override
    public boolean equals(final Object object)
    {   
        return (object instanceof Item) && (object != null) && (((Item) object).getIdentifier() == identifier);
    }

    @Override
    public int hashCode()
    {
        return Long.valueOf(identifier).hashCode();
    }

    public Set<ConstraintViolation<Item>> validate()
    {
        final ValidatorFactory factory = Validation.buildDefaultValidatorFactory();
        final Validator validator = factory.getValidator();

        return validator.validate(this, Warning.class);
    }
} 
```

谁能解释一下，有没有人有办法只通过ajax提交表单和表单并显示结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T12:00:53.280

您的 HTML 最终`<form>`在每个`<tr>`. 这是[非法](http://validator.w3.org/)的 HTML 语法，因此未指定浏览器行为。

你需要`<h:form>`把`<table>`. 如果您需要围绕单个“行”的表单，那么您可能需要将单个重新设计为具有固定列宽的`<table>`多个`<table>`s 或一组`<div>`s。

# php - 在sql查询中制作计数器

> ID：10570710
> 
> 赞同：0
> 
> 时间：2012-05-13T09:33:09.040
> 
> 标签：php, mysql, sql, codeigniter

我正在使用 codeigniter 并且有工作查询，可以获取用户 3 张图像。我想计数并给每个图像一个数字 1,2,3,4,5,6,7 ...并希望该查询输出

```
-number (count),
-id,
-image,
-date 
```

我的 sql 查询：

```
function bar_images_first($user_id)
{   
    $sql = "SELECT id, image, UNIX_TIMESTAMP(date) as date FROM images WHERE user_id = 3 LIMIT 3";
    $query = $this->db->query($sql, $user_id);
    return $query->result_array();
} 
```

是否可以在查询中做计数器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T09:42:11.533

可以通过将 SQL 参数设置为

```
SET @cnt := 0;
SELECT
    @cnt := @cnt + 1,
    id,
    image,
    UNIX_TIMESTAMP(date) as date 
FROM images WHERE user_id = 3 LIMIT 3"; 
```

但是这样的多个语句不能从 PHP 的`mysql_query()`方法中执行。但是，mysqli 函数`mysqli_multi_query()`也允许执行多个查询，所以*如果可能的话，使用 mysqli 方法而不是 AR 方法。*

但是，您可以一个接一个地运行多组查询。

```
$query = array(
    "SET @cnt := 0;",
    "SELECT
        @cnt := @cnt + 1,
        id,
        image,
        UNIX_TIMESTAMP(date) as date 
    FROM images WHERE user_id = 3 LIMIT 3"
);

foreach($query as $qry) {
     $result= $this->db->query($qry);
     //.........
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T10:01:45.347

作为单个查询运行：

```
SELECT @curRow := @curRow + 1 AS row_number, id, image, UNIX_TIMESTAMP(date) as date
FROM images
JOIN (SELECT @curRow := 0) r
WHERE user_id = 3
LIMIT 3 
```

这是非常特定于 MySQL 的。如果您想要更多可移植代码，我建议您在代码中制作行计数器。

**编辑**- 忘记给予应有的信用：[MySQL - 记录集中的行号？](https://stackoverflow.com/questions/9285660/mysql-row-number-in-recordset)

# javascript - 用于主持实时推文的 Twitter 小部件

> ID：10570711
> 
> 赞同：0
> 
> 时间：2012-05-13T09:33:28.970
> 
> 标签：javascript, jquery, twitter

我正在寻找一个小部件/jquery 插件/托管服务或类似服务，您可以将其放到一个 html 页面上，它会实时显示和更新包含某个主题标签的推文，但只能来自一个或多个可配置帐户 + 审核以批准其他人的推文具有相同的标签。

想想想要实时发布活动的报纸，但可以控制其他人在页面上显示的内容。

我已经搜索过，但没有找到任何合适的东西——我相信它一定存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T10:45:22.720

Hiya**演示** [http://jsfiddle.net/RGrgM/](http://jsfiddle.net/RGrgM/) **或** [http://jsfiddle.net/RGrgM/show/](http://jsfiddle.net/RGrgM/show/)

我已将某人（我的）推文与此演示相关联，但您可以链接您的：）我在推特上很懒，anyhooo：P 这将对您有所帮助。它将与实时提要一起使用。

休息一切都在那里，您可以右键单击并查看源代码并阅读以下代码。B-)

这个 [链接] 可能会派上用场：[http ://boxmodeljunkie.com/create-a-simple-twitter-widget-with-yui-3-and-yql/](http://boxmodeljunkie.com/create-a-simple-twitter-widget-with-yui-3-and-yql/)

:)

D'uh 不要忘记接受并投票！

它用：

```
 <title>Twitter Feed Widget with YUI 3 &amp; YQL - jsFiddle demo</title>

  <script type='text/javascript' src='/js/lib/yui-min-3.2.0.js'></script> 
```

**jQuery代码**

```
// top-level global namespace
YUI.namespace('CIF');

// accepts a tweet timestamp and produces relational time text
YUI.CIF.relativeTime = function ( c ) {

    var origStamp = Date.parse( c ),

        curDate = new Date(),

        currentStamp = curDate.getTime(),

        difference = parseInt( ( currentStamp - origStamp ) / 1000, 10 ),

        dateArr = c.toString().split(' ');

    // if no difference, do nothing
    if ( difference < 0 ) {
        return false;
    }

    if ( difference <= 5 ) {
        return "Just now";
    }

    if ( difference <= 20 ) {
        return "Seconds ago";
    }

    if ( difference <= 60 ) {
        return "A minute ago";
    }

    if ( difference < 3600 ) {
        return parseInt( difference / 60, 10 ) + ' minutes ago';
    }

    if (difference <= 1.5 * 3600) {
        return "One hour ago";
    }

    if ( difference < 23.5 * 3600 ) {
        return Math.round( difference / 3600 ) + ' hours ago';
    }

    if (difference < 1.5*24*3600) {
        return "One day ago";
    }

    // produce date stamp for tweets older than a day
    return dateArr[3].replace( /\:\d+$/,'' ) + ' ' + dateArr[2] + ' ' + dateArr[1] + dateArr[5] !== curDate.getFullYear().toString() ? ' ' + dateArr[5] : '';

};

// load required modules and set up YUI instance
YUI().use( 'node', 'substitute', 'yql', function ( Y ) {

    var n = Y.one( '#twitterFeed' ),

        // accepts a YQL JSON result object and produces a list of 
        // tweets using Y.substitute for templating
        formatTwitterFeed = function ( r ) {

            if (r) {

                var s = r.query.results.statuses.status,

                    // HTML markup template
                    t = '<li><span class="status-text">{sText}</span> <span ' + 
                        'class="quiet status-time">{sTime}</span></li>',

                    l = s.length,

                    f = '<ul>',

                    i;

                for ( i = 0; i < l; i++ ) {

                    // Y.substitute method to merge HTML markup and result object
                    f += Y.substitute( t, {

                        // convert usernames, hash tags and URLs to links
                        sText : s[i].text
                            .replace(/(http\S+)/i,'<a href="$1" target="_blank">$1</a>')
                            .replace(/(@)([a-z0-9_\-]+)/i,
                                '<a href="http://twitter.com/$2" target="_blank">$1$2</a>')
                            .replace(/(#)(\S+)/ig, 
                                '<a href="http://search.twitter.com/search' + 
                                '?q=%23$2" target="_blank">$1$2</a>'),

                        sTime : YUI.CIF.relativeTime( s[i].created_at )

                    } );

                }

                f += '</ul>';

                f += '<a class="button" href="http://twitter.com/tats_innit" title="Follow @Tats_innit on Twitter" target="_blank">Follow on Twitter&nbsp;&raquo;</a>';

                // append output to target parent node
                n.append( f );

            }

        };

    // YQL Twitter query limited to five results for a specified username
    Y.YQL( 'select * from twitter.user.timeline( 5 ) ' + 
            'where screen_name="@tats_innit"', formatTwitterFeed );

});
​ 
```

# python - StyledTextCtrl 样式遮罩，它是什么？

> ID：10570717
> 
> 赞同：0
> 
> 时间：2012-05-13T09:34:34.703
> 
> 标签：python, wxpython, wxwidgets, wxstyledtextctrl

我正在创建一个自定义词法分析器。然后我发现 StyledTextCtrl.StartStyling() 是开始将样式应用于文本的方法，但我不知道掩码是什么。我输入`StartStyling.__doc__`并得到了这个

```
StyledTextCtrl.StartStyling(self, int pos, int mask)
Set the current styling position to pos and the styling mask to mask.
The styling mask can be used to protect some bits in each styling byte from modification. 
```

这里的样式蒙版如何应用以及如何选择我们应该给出的蒙版编号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:26:04.377

这个页面解释了大部分内容：

[http://www.yellowbrain.com/stc/styling.html](http://www.yellowbrain.com/stc/styling.html)

> 整数参数 pos 设置您想要开始样式操作的位置。整数参数掩码指示要修改样式字节的哪些位。
> 
> 来自 Scintilla 文档：掩码允许在多个通道中进行样式设置，例如，在初始通道中完成基本样式以确保快速正确地看到代码文本，然后再进行第二次较慢的通道，检测语法错误并使用指标来显示这些错误在哪里。例如，对于 5 个样式位和 3 个指示位的标准设置，如果您正在设置文本样式并且不想更改指示符，则可以使用掩码值 31 (0x1f)。

您可能希望您的掩码为 0x1f（低 5 位），这是按照惯例。低 5 位用于样式（最多 32 种不同的样式），而高 3 位用于指标。

# jsf-2 - 如何创建一个默认为 1 行的表格

> ID：10570719
> 
> 赞同：0
> 
> 时间：2012-05-13T09:35:18.050
> 
> 标签：jsf-2

我有一个表，我希望每次运行程序时它默认显示 1 个空白行。我怎样才能做到这一点？

```
<h:dataTable cellspacing="0" value="#{editQuestion.answersData}" var="answer">
                    <h:column>
                        <f:facet name="header">ID</f:facet>
                        <h:outputText value="#{answer.answer.id}" />
                    </h:column>

                    <h:column>
                        <f:facet name="header"><h:outputText value="#{i18n['admin.edit.rightanswer']}"  /></f:facet>
                        <h:selectBooleanCheckbox value="#{answer.answer.isRight}"/>
                    </h:column>

                    <h:column>
                        <f:facet name="header"><h:outputText value="#{i18n['admin.edit.answers']}"  /></f:facet>
                        <h:inputTextarea id="answer" rows="3" cols="40" value="#{answer.text}" required="true" label ="Answer">
                            <f:validateLength maximum="500"/>
                        </h:inputTextarea>
                        <div>
                           <h:message for="answer" style ="color:red"/>  
                        </div>

                    </h:column>

                    <h:column>
                        <h:commandButton image="/resources/imgs/#{editQuestion.buttonDelete}" immediate ="true" action="#{editQuestion.deleteAnswer(answer)}" disabled="#{!editQuestion.possibleToDelete}" alt="delete" title="#{i18n['img.delete']}">
                            <f:param name="id" value="#{editQuestion.id}"/>
                        </h:commandButton>
                    </h:column>
                </h:dataTable>` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T11:54:17.527

只需在后面的 bean 的（后）构造过程中添加一个新的实例`Answer`到后面的列表中。`#{editQuestion.answerData}``#{editQuestion}`

例如在后期构建期间：

```
private List<Answer> answerData;

@PostConstruct
public void init() {
    answersData = new ArrayList<Answer>();
    answersData.add(new Answer());
} 
```

请注意，bean 需要是`@ViewScoped`为了在同一视图上的提交中保留正确的数据。

# javascript - 使用jQuery将输入字段限制为两位小数

> ID：10570722
> 
> 赞同：8
> 
> 时间：2012-05-13T09:35:51.780
> 
> 标签：javascript, jquery

我有一个要限制的输入字段，以便用户只能输入最多两位小数的数字。想要使用 jQuery 来做到这一点。

我可以以某种方式使用 jQuery **toFixed()**函数吗？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2017-08-18T06:31:37.800

使用正则表达式的另一种方法：

```
 $('#id').on('input', function () {
        this.value = this.value.match(/^\d+\.?\d{0,2}/);
    }); 
```

id 选择器可以替换为 css 选择器。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-13T10:01:50.917

```
$('input#decimal').blur(function(){
    var num = parseFloat($(this).val());
    var cleanNum = num.toFixed(2);
    $(this).val(cleanNum);
    if(num/cleanNum < 1){
        $('#error').text('Please enter only 2 decimal places, we have truncated extra points');
        }
    }); 
```

这是一个小提琴[http://jsfiddle.net/sabithpocker/PD2nV/](http://jsfiddle.net/sabithpocker/PD2nV/)

使用`toFixed`无论如何都会导致近似`123.6666 -> 123.67` 如果你想避免近似检查这个答案[显示两位小数，没有四舍五入](https://stackoverflow.com/questions/4187146/javascript-display-two-decimal-places-no-rounding)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-26T17:48:56.297

HTML5 解决方案：

```
<input type="number" step="0.01" /> 
```

[**演示**](http://jsfiddle.net/2h4TC/1/)

如果你想设置无效输入的样式（一些浏览器默认这样做），你可以使用`:invalid`选择器：

```
input:invalid {   box-shadow: 0 0 1.5px 1px red;   } 
```

请注意，这种方法不会尝试自动截断数字，但如果用户输入的十进制数字超过两位，输入将变为无效，因此不会提交表单：

![火狐上的截图](../Images/f3fbe7039df07f09632af0955280e2fc.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-07T10:11:41.897

```
<input type="text" name="amount1" id="amount1" class="num_fld Amt" onkeypress="return check_digit(event,this,8,2);" size="9" value="" maxlength="8" style="text-align:right;" /> 
```

以下功能将根据您对小数位的需要限制小数，并限制多个点

```
function check_digit(e,obj,intsize,deczize) {
    var keycode;

    if (window.event) keycode = window.event.keyCode;
    else if (e) { keycode = e.which; }
    else { return true; }

    var fieldval= (obj.value),
        dots = fieldval.split(".").length;

    if(keycode == 46) {
        return dots <= 1;
    }
    if(keycode == 8 || keycode == 9 || keycode == 46 || keycode == 13 ) {
        // back space, tab, delete, enter 
        return true;
    }          
    if((keycode>=32 && keycode <=45) || keycode==47 || (keycode>=58 && keycode<=127)) {
         return false;
    }
    if(fieldval == "0" && keycode == 48 ) {
        return false;
    }
    if(fieldval.indexOf(".") != -1) { 
        if(keycode == 46) {
            return false;
        }
        var splitfield = fieldval.split(".");
        if(splitfield[1].length >= deczize && keycode != 8 && keycode != 0 )
            return false;
        }else if(fieldval.length >= intsize && keycode != 46) {
            return false;
        }else {
            return true;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-13T09:48:21.750

```
$("#myInput").focusout(function() {
    if ($(this).val().length > 2 || isNaN(Number($(this).val())) {
        alert("Wrong number format");
    }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-23T10:15:59.553

Try this for all symbols:

**inputField.value.replace(/(\...)(.)/, "$1");**

or this for numbers:

**inputField.value.replace(/(\.[0-9][0-9])([0-9])/, "$1");**

I found this method here: [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace#Example:_Switching_words_in_a_string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace#Example:_Switching_words_in_a_string)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-22T11:42:06.943

一个类似的解决方案，退格键达到小数点后 2 位以上。

```
function limitDec(id) {
  // find elements
  var amt = $("#testdec")

  // handle keyup
  amt.on("keyup", function() {
    if (isNaN(amt.val())) {
      amt.val(0);
    }
    if (amt.val().indexOf(".") > -1 && (amt.val().split('.')[1].length > 2)) {
      amt.val(amt.val().substring(0, amt.val().length - 1));
    }
  })
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js">
</script>
<input type="text" id="testdec" onkeyup="limitDec(this.id)" />
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-01-15T13:57:21.403

```
<input type="text" id="decCheck" onkeyup="decimalCheck();"/>

<script>
function decimalCheck(){
var dec = document.getElementById('decCheck').value;
if(dec.includes(".")){
    var res = dec.substring(dec.indexOf(".")+1);
    var kl = res.split("");
    if(kl.length > 1){
     document.getElementById('decCheck').value=(parseInt(dec * 100) / 
      100).toFixed(2);
    }
  }
}
</script> 
```

# python - pramid.security.记得安全吗？

> ID：10570723
> 
> 赞同：0
> 
> 时间：2012-05-13T09:36:00.563
> 
> 标签：python, security, authentication, cookies, pyramid

我想知道这是否安全，我不知道remeber 是如何工作的。如果我通过忘记注销，我仍然可以在浏览器中查看 auth_tkt cookie，所以我认为它不可能像加密 user_id 并将它们存储在 cookie 中那么简单，是吗？

编辑：
我的登录代码：

```
headers = remember(request,user.userId)
return HTTPFound(location="/",headers=headers) 
```

注销代码：

```
headers = forget(request)
return HTTPFound(location="/login",headers=headers) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T09:52:16.727

pyramid.security.remember 使用 HMAC 对 cookie 进行签名，使其接近防篡改。 [http://en.wikipedia.org/wiki/Hmac](http://en.wikipedia.org/wiki/Hmac)

关于您关于忘记的问题，您是否将没有 cookie 的新请求传递给标头？

```
headers = forget(request)
return HTTPFound(location = request.route_url('home'),
                 headers = headers) 
```

[http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/tutorials/wiki2/authorization.html#adding-login-and-logout-views](http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/tutorials/wiki2/authorization.html#adding-login-and-logout-views)

如果您向我们展示您尝试过的内容也会有所帮助，可能包括您的注销视图代码

# drupal - 在drupal 7中，如何从视图中的url获取节点ID？

> ID：10570731
> 
> 赞同：0
> 
> 时间：2012-05-13T09:37:28.540
> 
> 标签：drupal, url, views

我想通过添加向我的视图添加评论表单

$node->nid), '评​​论'); ?>

但是，它显示了一个错误，说未定义的变量 $node->nid，然后我意识到它是一个视图而不是一个内容类型

在视图中，通过选择正确的 url，例如 /projects/{username}/{nodeid}，我只显示一个内容。

所以我想我可以通过解析url的第三个参数来获取节点id，所以问题可能是如何从视图中的url获取节点id

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T12:09:35.207

在视图页面 /projects/{username}/{nodeid}`<?php print arg(2);?>`将为您提供节点 ID。

意思是任何节点都可以有相同的标题，你需要使用另一种方式，例如/projects/{username}/{nodeurl}。但我不明白你为什么使用视图来显示单个节点？[对于每个节点，您可以使用模块http://drupal.org/project/pathauto](http://drupal.org/project/pathauto)为 url 创建特定的模式（就像 /projects/{username}/{nodetitle}），然后对节点的输出进行自定义，包括评论表单和其他部分。

# sql - 在 Derby 中根据 table_B 更新 table_A 值

> ID：10570735
> 
> 赞同：0
> 
> 时间：2012-05-13T09:38:23.667
> 
> 标签：sql, derby, multiple-tables

我有两张桌子：

表A

```
PK   TBL_A_ID   ITEM
0001 12345678   apple
0002 23456789   banana 
```

表 B

```
PK   TBL_A_ID   DESTINATION
0001 12345678   Boston
0002 23456789   London
0003 23456789   Rome
0004 12345678   Beijing 
```

如果项目是“香蕉”，我想将表 B DESTINATION 更改为“上海”。

表 B（预期结果）

```
PK   TBL_A_ID   DESTINATION
0001 12345678   Boston
0002 23456789   Shanghai
0003 23456789   Shanghai
0004 12345678   Beijing 
```

可以用一行语句完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T19:34:29.623

```
update table_b set destination='shanghai' 
  where tbl_a_id = (select tbl_a_id from table_a where  item='banana') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T09:49:50.983

```
Update Table_B set Destination = 'Shanghai'
from Table_A a Join Table_B b on
a.TBL_A_ID = B.TBL_A_ID
where a.Item = 'Banana' 
```

# c++ - 模板类的实例化错误

> ID：10570736
> 
> 赞同：0
> 
> 时间：2012-05-13T09:38:25.630
> 
> 标签：c++, templates, instantiation

g++编译器提示以下语句错误：

```
template<typename Type>
class SingleList{
public:
    SingleList()
        {
            head =  new SingleListNode<Type> () ;    //Error happens here!!!
        } 
```

错误信息是：

```
 ./inc/single_list.h: In instantiation of ‘SingleListNode<int>’:
./inc/single_list.h|39 col 13| instantiated from ‘SingleList<Type>::SingleList() [with Type = int]’ 
```

的定义`head`如下，可能问题与这里无关。

```
SingleListNode<Type> *head; 
```

`SingleList`函数中类的实例化`main`是：

```
int main()
{
    SingleList<int> list; 
```

我不知道语法错误发生在哪里，有人可以帮助我吗？谢谢！！

==================================================== =======================

以下是源文件的内容：

```
 template<typename Type> class SingleList;

template<typename Type> class SingleListNode{
private:
    friend class SingleList<Type>;

    SingleListNode() : next(NULL){}

public:
    friend ostream& operator<< <Type>(ostream& os,SingleListNode<Type>& sln);             //Error here!!

private:
    SingleListNode *next;
};

template<typename Type> ostream& operator<<(ostream& os,SingleListNode<Type>& out){
    os<<out.data;
    return os;
}

template<typename Type> class SingleList{
public:
    SingleList()
        {
            head =  new SingleListNode<Type> () ;              //Error happens here.
        }
    ~SingleList(){
        delete head;                                       //Same error
    }

private:
    SingleListNode<Type> *head;
}; 
```

g++提示的错误信息

```
|| g++ -g -I ./inc/ -c single_list_test.cpp  -o single_list_test.o
|| single_list.h: In instantiation of ‘SingleListNode<int>’:
single_list.h|25 col 13| instantiated from ‘SingleList<Type>::SingleList() [with Type = int]’
single_list_test.cpp|9 col 18| instantiated from here
single_list.h|10 col 18| error: template-id ‘operator<< <int>’ for ‘std::ostream& operator<<(std::ostream&, SingleListNode<int>&)’ does not match any template declaration
|| make: *** [single_list_test.o] Error 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T04:21:17.407

对于我的 gcc ，只需修改以下语句

```
friend ostream& operator<< <Type>(ostream& os,SingleListNode<Type>& sln) 
```

到

```
 friend ostream& operator<< (ostream& os,SingleListNode<Type>& sln) 
```

# macos - 无法在 mac os x 上构建 Google V8，汇编器问题

> ID：10570743
> 
> 赞同：0
> 
> 时间：2012-05-13T09:39:30.507
> 
> 标签：macos, gcc, v8

我正在尝试构建 Google V8 库。在[这篇](http://code.google.com/p/v8/wiki/BuildingWithGYP)文章之后，我调用了以下命令

```
$ make ia32 -j2
GYP_GENERATORS=make \
    build/gyp/gyp --generator-output="out" build/all.gyp \
                  -Ibuild/standalone.gypi --depth=. \
                  -Dv8_target_arch=ia32 \
                  -S.ia32  -Dv8_can_use_vfp_instructions=true
  CXX(target) /Projects/v8/out/ia32.release/obj.target/preparser_lib/src/allocation.o
  CXX(target) /Projects/v8/out/ia32.debug/obj.target/preparser_lib/src/allocation.o

  ... 

  CXX(target) /Projects/v8/out/ia32.debug/obj.target/cctest/test/cctest/test-bignum-dtoa.o
../test/cctest/test-assembler-ia32.cc: In function ‘void TestAssemblerIa320()’:
../test/cctest/test-assembler-ia32.cc:66: error: ‘class v8::internal::Assembler’ has no member named ‘mov’
../test/cctest/test-assembler-ia32.cc:66: error: ‘eax’ was not declared in this scope
../test/cctest/test-assembler-ia32.cc:66: error: ‘esp’ was not declared in this scope
../test/cctest/test-assembler-ia32.cc:67: error: ‘class v8::internal::Assembler’ has no member named ‘add’
../test/cctest/test-assembler-ia32.cc: In function ‘void TestAssemblerIa321()’:
../test/cctest/test-assembler-ia32.cc:95: error: ‘class v8::internal::Assembler’ has no member named ‘mov’
../test/cctest/test-assembler-ia32.cc:95: error: ‘edx’ was not declared in this scope
../test/cctest/test-assembler-ia32.cc:95: error: ‘esp’ was not declared in this scope
../test/cctest/test-assembler-ia32.cc:96: error: ‘eax’ was not declared in this scope
../test/cctest/test-assembler-ia32.cc:100: error: ‘class v8::internal::Assembler’ has no member named ‘add’
../test/cctest/test-assembler-ia32.cc:101: error: ‘class v8::internal::Assembler’ has no member named ‘sub’
../test/cctest/test-assembler-ia32.cc:104: error: ‘class v8::internal::Assembler’ has no member named ‘test’
../test/cctest/test-assembler-ia32.cc: In function ‘void TestAssemblerIa322()’:
../test/cctest/test-assembler-ia32.cc:133: error: ‘class v8::internal::Assembler’ has no member named ‘mov’
../test/cctest/test-assembler-ia32.cc:133: error: ‘edx’ was not declared in this scope
../test/cctest/test-assembler-ia32.cc:133: error: ‘esp’ was not declared in this scope
../test/cctest/test-assembler-ia32.cc:134: error: ‘class v8::internal::Assembler’ has no member named ‘mov’
../test/cctest/test-assembler-ia32.cc:134: error: ‘eax’ was not declared in this scope
../test/cctest/test-assembler-ia32.cc:139: error: ‘class v8::internal::Assembler’ has no member named ‘sub’
../test/cctest/test-assembler-ia32.cc:142: error: ‘class v8::internal::Assembler’ has no member named ‘test’
../test/cctest/test-assembler-ia32.cc:147: error: ‘class v8::internal::Assembler’ has no member named ‘mov’
../test/cctest/test-assembler-ia32.cc:148: error: no matching function for call to ‘v8::internal::Assembler::jmp(NULL, v8::internal::RelocInfo::Mode)’
../src/x64/assembler-x64.h:1222: note: candidates are: void v8::internal::Assembler::jmp(v8::internal::Label*, v8::internal::Label::Distance)
../src/x64/assembler-x64.h:1223: note:                 void v8::internal::Assembler::jmp(v8::internal::Handle<v8::internal::Code>, v8::internal::RelocInfo::Mode)
../src/x64/assembler-x64.h:1226: note:                 void v8::internal::Assembler::jmp(v8::internal::Register)
../src/x64/assembler-x64.h:1229: note:                 void v8::internal::Assembler::jmp(const v8::internal::Operand&)
../test/cctest/test-assembler-ia32.cc: In function ‘void TestAssemblerIa323()’:
../test/cctest/test-assembler-ia32.cc:180: error: ‘eax’ was not declared in this scope
../test/cctest/test-assembler-ia32.cc:180: error: ‘esp’ was not declared in this scope
../test/cctest/test-assembler-ia32.cc: In function ‘void TestAssemblerIa324()’:
../test/cctest/test-assembler-ia32.cc:215: error: ‘eax’ was not declared in this scope
../test/cctest/test-assembler-ia32.cc:215: error: ‘esp’ was not declared in this scope
../test/cctest/test-assembler-ia32.cc: In function ‘void TestAssemblerIa325()’:
../test/cctest/test-assembler-ia32.cc:244: error: ‘class v8::internal::Assembler’ has no member named ‘mov’
../test/cctest/test-assembler-ia32.cc:244: error: ‘eax’ was not declared in this scope
../test/cctest/test-assembler-ia32.cc:244: error: no matching function for call to ‘v8::internal::Operand::Operand(intptr_t, v8::internal::RelocInfo::Mode)’
../src/x64/assembler-x64.h:402: note: candidates are: v8::internal::Operand::Operand(const v8::internal::Operand&, int32_t)
../src/x64/assembler-x64.h:397: note:                 v8::internal::Operand::Operand(v8::internal::Register, v8::internal::ScaleFactor, int32_t)
../src/x64/assembler-x64.h:392: note:                 v8::internal::Operand::Operand(v8::internal::Register, v8::internal::Register, v8::internal::ScaleFactor, int32_t)
../src/x64/assembler-x64.h:386: note:                 v8::internal::Operand::Operand(v8::internal::Register, int32_t)
../src/x64/assembler-x64.h:383: note:                 v8::internal::Operand::Operand(const v8::internal::Operand&)
../test/cctest/test-assembler-ia32.cc: In function ‘void TestAssemblerIa326()’:
../test/cctest/test-assembler-ia32.cc:271: error: ‘class v8::internal::Assembler’ has no member named ‘movdbl’
../test/cctest/test-assembler-ia32.cc:271: error: ‘esp’ was not declared in this scope
../test/cctest/test-assembler-ia32.cc:272: error: ‘class v8::internal::Assembler’ has no member named ‘movdbl’
../test/cctest/test-assembler-ia32.cc:278: error: ‘class v8::internal::Assembler’ has no member named ‘sub’
../test/cctest/test-assembler-ia32.cc:279: error: ‘class v8::internal::Assembler’ has no member named ‘movdbl’
../test/cctest/test-assembler-ia32.cc:281: error: ‘class v8::internal::Assembler’ has no member named ‘add’
../test/cctest/test-assembler-ia32.cc: In function ‘void TestAssemblerIa328()’:
../test/cctest/test-assembler-ia32.cc:316: error: ‘class v8::internal::Assembler’ has no member named ‘mov’
../test/cctest/test-assembler-ia32.cc:316: error: ‘eax’ was not declared in this scope
../test/cctest/test-assembler-ia32.cc:316: error: ‘esp’ was not declared in this scope
../test/cctest/test-assembler-ia32.cc:317: error: ‘class v8::internal::Assembler’ has no member named ‘cvtsi2sd’
../test/cctest/test-assembler-ia32.cc:319: error: ‘class v8::internal::Assembler’ has no member named ‘sub’
../test/cctest/test-assembler-ia32.cc:320: error: ‘class v8::internal::Assembler’ has no member named ‘movdbl’
../test/cctest/test-assembler-ia32.cc:322: error: ‘class v8::internal::Assembler’ has no member named ‘add’
../test/cctest/test-assembler-ia32.cc: In function ‘void TestAssemblerIa329()’:
../test/cctest/test-assembler-ia32.cc:351: error: ‘esp’ was not declared in this scope
../test/cctest/test-assembler-ia32.cc:359: error: ‘class v8::internal::MacroAssembler’ has no member named ‘mov’
../test/cctest/test-assembler-ia32.cc:359: error: ‘eax’ was not declared in this scope
../test/cctest/test-assembler-ia32.cc:363: error: ‘class v8::internal::MacroAssembler’ has no member named ‘mov’
../test/cctest/test-assembler-ia32.cc:367: error: ‘class v8::internal::MacroAssembler’ has no member named ‘mov’
../test/cctest/test-assembler-ia32.cc:371: error: ‘class v8::internal::MacroAssembler’ has no member named ‘mov’
../test/cctest/test-assembler-ia32.cc:375: error: ‘class v8::internal::MacroAssembler’ has no member named ‘mov’
../test/cctest/test-assembler-ia32.cc: In function ‘void TestAssemblerMultiByteNop()’:
../test/cctest/test-assembler-ia32.cc:417: error: ‘ebx’ was not declared in this scope
../test/cctest/test-assembler-ia32.cc:418: error: ‘ecx’ was not declared in this scope
../test/cctest/test-assembler-ia32.cc:419: error: ‘edx’ was not declared in this scope
../test/cctest/test-assembler-ia32.cc:420: error: ‘edi’ was not declared in this scope
../test/cctest/test-assembler-ia32.cc:421: error: ‘esi’ was not declared in this scope
../test/cctest/test-assembler-ia32.cc:422: error: ‘class v8::internal::Assembler’ has no member named ‘mov’
../test/cctest/test-assembler-ia32.cc:422: error: ‘eax’ was not declared in this scope
../test/cctest/test-assembler-ia32.cc:423: error: ‘class v8::internal::Assembler’ has no member named ‘mov’
../test/cctest/test-assembler-ia32.cc:424: error: ‘class v8::internal::Assembler’ has no member named ‘mov’
../test/cctest/test-assembler-ia32.cc:425: error: ‘class v8::internal::Assembler’ has no member named ‘mov’
../test/cctest/test-assembler-ia32.cc:426: error: ‘class v8::internal::Assembler’ has no member named ‘mov’
../test/cctest/test-assembler-ia32.cc:427: error: ‘class v8::internal::Assembler’ has no member named ‘mov’
../test/cctest/test-assembler-ia32.cc:435: error: ‘class v8::internal::Assembler’ has no member named ‘cmp’
../test/cctest/test-assembler-ia32.cc:437: error: ‘class v8::internal::Assembler’ has no member named ‘cmp’
../test/cctest/test-assembler-ia32.cc:439: error: ‘class v8::internal::Assembler’ has no member named ‘cmp’
../test/cctest/test-assembler-ia32.cc:441: error: ‘class v8::internal::Assembler’ has no member named ‘cmp’
../test/cctest/test-assembler-ia32.cc:443: error: ‘class v8::internal::Assembler’ has no member named ‘cmp’
../test/cctest/test-assembler-ia32.cc:445: error: ‘class v8::internal::Assembler’ has no member named ‘cmp’
../test/cctest/test-assembler-ia32.cc:447: error: ‘class v8::internal::Assembler’ has no member named ‘mov’
../test/cctest/test-assembler-ia32.cc:455: error: ‘class v8::internal::Assembler’ has no member named ‘mov’
make[1]: *** [/Projects/v8/out/ia32.release/obj.target/cctest/test/cctest/test-assembler-ia32.o] Error 1
make: *** [ia32.release] Error 2
make: *** Waiting for unfinished jobs.... 
```

该命令抱怨 gcc 认为是常见的 C 语言结构的汇编程序指令。我应该如何处理这些问题？

# javascript - 同一页面上的 Dijit 小部件

> ID：10570745
> 
> 赞同：0
> 
> 时间：2012-05-13T09:39:37.813
> 
> 标签：javascript, dojo, widget

Dijit 的新手。我希望有一个页面，多个对话框将共存于同一页面中。写完之后：

```
<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>widgets</title>
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/dojo/1.6/dijit/themes/claro/claro.css" media="screen">
    <style>
        #dialog { min-width: 300px; }
    </style>
    <!-- load dojo and provide config via data attribute -->
    <script src="http://ajax.googleapis.com/ajax/libs/dojo/1.7.1/dojo/dojo.js"
            data-dojo-config="has:{'dojo-debugging-messages':true}, parseOnLoad: false, foo: 'bar', async: true">

    </script>
            <script>
            function load_widgets()
            {
                    similar_users_widget();
                    in_silico_widget();

                    require([ "dijit/focus" ], function(focusUtil){
                      var activeElement = focusUtil.curNode; // returns null if there is no focused element
                      alert(activeElement);
                    });                        
            }

            function in_silico_widget()
            {
                // Require the registry, parser, Dialog, and wait for domReady
                require(["dijit/registry", "dojo/parser", "dijit/Dialog", "dojo/domReady!",'dojo/_base/json'], function(registry, parser)
                {
            dojo.parser.parse();
            var dialog = registry.byId("in_silico_dialog");
                            var content = "Another widget";

            dialog.set("content", '<pre>' + 'Test<br>' + content + '</pre>');
            dialog.show();
                });
            }

            function similar_users_widget()
            {
                var json;

                require(["dojo/_base/xhr"], function(xhr)
                {
                    // get some data, convert to JSON
                    xhr.get({
                        url:"http://localhost:8080/DojoPlay/SocialNetworkAnalysis?op=retrieve_similar_users",
                        handleAs:"json",
                        load: function(data){
                           json = data;
                        }
                    });
                });

                // Require the registry, parser, Dialog, and wait for domReady
                require(["dijit/registry", "dojo/parser", "dijit/Dialog", "dojo/domReady!",'dojo/_base/json'], function(registry, parser)
                {
            dojo.parser.parse();
            var dialog = registry.byId("similar_users_dialog");
                            var content = "";

                            var h = json.people[0];
                            for (var k in h) {
                                // use hasOwnProperty to filter out keys from the Object.prototype
                                if (h.hasOwnProperty(k)) {
                                    content+="key is: " + k + ", value is: " + h[k] + "\n";
                                }
                            }

            dialog.set("content", '<pre>' + 'Test<br>' + content + '</pre>');
            dialog.show();
                });
            }

            require([ "dijit/focus" ], function(focusUtil){
              var handle = focusUtil.watch("curNode", function(name, oldValue, newValue){
                console.log("Focused node was", oldValue, "now is", newValue);
             });
            });

    </script>
</head>
    <body class="claro" onload="load_widgets();">
    <h1>Demo: widgets</h1>
    <div id="similar_users_dialog" data-dojo-type="dijit.Dialog" data-dojo-props="title: 'User suggestions'"></div>
    <div id="in_silico_dialog" data-dojo-type="dijit.Dialog" data-dojo-   props="title: 'In-silico dialog'"></div>                
</body>
</html> 
```

该页面加载正常，但第一个小部件加载在另一个之上，我无法单击第二个。只有在关闭第一个时，页面才会关注同一个小部件（然后我可以使用它）。

我可以在不关闭其中任何一个的情况下以某种方式加载并使用这两个小部件吗？谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T10:33:28.997

与其说是焦点，不如说是 z-indexes 的“问题”。对话框是模态的，并且不希望任何其他人同时具有焦点，因此它会在您无法单击的底层上提升自己。

考虑一下这个小提琴并弄乱它：http: [//jsfiddle.net/seeds/Z8Afg/2/](http://jsfiddle.net/seeds/Z8Afg/2/)

每当您在对话框上调用 .show() 时，您应该能够使用以下代码。你只需要知道哪个是'dia1'和'dia2'；

```
var dia1 = registry.byId("similar_users_dialog");
var dia2 = registry.byId("in_silico_dialog");
dia1.show()    
dia2.show();
var index1 = dojo.style(dia1.domNode, "zIndex");
var index2 = dojo.style(dia2.domNode, "zIndex");
var lowerindex = Math.min(parseInt(index1), parseInt(index2));
console.log('indexes:', index1, index2, lowerindex)
// get underlay from dialog which is topmost (the latter .show() call)
underlay = dojo.byId(dia2.underlayAttrs.dialogId + dia2.underlayAttrs["class"]).parentNode;
// set underlay zIndex to 1 lower then the minimum (first dialog to receive .show() call)
dojo.style(underlay, "zIndex", lowerindex - 1) 
```

# java - Java messenger（多线程和摇摆）

> ID：10570749
> 
> 赞同：0
> 
> 时间：2012-05-13T09:39:51.277
> 
> 标签：java, multithreading, swing, messenger

嘿，我在使用 java messenger 应用程序时遇到问题。我在 netbeans 和一个服务器和客户端类中制作了一个简单的 gui。当我在 gui 中创建一个新的服务器实例时，我启动一个新线程并开始在其中监听。当服务器获取某些东西并转到我想在另一个类和另一个线程（GUI）中的 JTextPane 上使用 setText（）时，就会出现问题。这是代码：

gui类中连接按钮的代码：

```
private void doConnect(java.awt.event.ActionEvent evt) {                           

        server = new mServer(1234);
        ms = new mServer(this);
        Thread t = new Thread(server);
        t.start();
        statusLine.setText("Connection established");
    } 
```

服务器类：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.nejc;

import java.io.DataInputStream;
import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JTextPane;
import javax.swing.SwingUtilities;

/**
 *
 * @author Nejc
 */
public class mServer implements Runnable{

    private int port;

    JMessenger jMsg;

    public mServer(int port){

    this.port=port;
    }

    public mServer(JMessenger in){

        jMsg = in;
    }

    public void listen(){

        try{

            ServerSocket listener = new ServerSocket(port);
            Socket server;

            while(true){

                server = listener.accept();
        handleConnection(server);
            }

        }
    catch (IOException ioe){

            System.out.println("IOException: " + ioe);
            //ioe.printStackTrace();
            System.exit(1);
    }
    }

    protected void handleConnection(Socket server) throws IOException{

        //DataOutputStream out = new DataOutputStream(server.getOutputStream());
    final DataInputStream in = new DataInputStream(server.getInputStream());

        Runnable r = new Runnable(){

            @Override
            public void run(){

                try{

                    jMsg.field.setText("Mitja: " + in.readUTF());
                }
                catch (IOException ex){

                    Logger.getLogger(mServer.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
        };
        SwingUtilities.invokeLater(r);

    //out.writeUTF(output);

        /*JTextPane field = jMsg.field;
        String mssg = in.readUTF();
        field.setText(mssg);
        * 
        */

    server.setKeepAlive(true);
    }

    @Override
    public void run(){

        listen();
    }
} 
```

对不起，我忘记了：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at com.nejc.mServer$1.run(mServer.java:70)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:705)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:675)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T10:11:54.610

我认为一个危险的想法是从`Runnable`您发送到事件调度线程的套接字输入流中读取。立即读取输入流`handleConnection`并将字符串传递给可运行对象：

```
protected void handleConnection(Socket server) throws IOException{
  final String s = new DataInputStream(server.getInputStream()).readUTF();
  SwingUtilities.invokeLater(new Runnable(){ public void run() {
    jMsg.field.setText("Mitja: " + s);
  }});
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T10:12:20.997

您正在创建 mServer 的两个实例，`server`并且`ms`. `server`'s`jMsg`所以`null`我希望你得到一个`NullPointerException`方法`run`。

*更新*

请注意 Marko 关于不从 GUI 线程上的输入流中读取的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T10:16:05.733

我想评论其他答案之一，但我不知道该怎么做。它本身并不是一个答案，但我认为值得一提的是，由于字符串和字符的问题，我所理解的 DataInputStream 已被弃用。由于消息传递应用程序的很大一部分依赖于字符串和字符，您可能想尝试使用 BufferedReader。

```
 BufferedReader br = new BufferedReader(new InputStreamReader(socket.getInputStream())); 
```

希望对您有所帮助，如果我在错误的地方发表评论，请见谅。我还在习惯这个网站的礼仪，

# javascript - popup.html 浏览器操作的 DOM 事件 - chrome 扩展

> ID：10570750
> 
> 赞同：0
> 
> 时间：2012-05-13T09:39:53.083
> 
> 标签：javascript, html, dom, google-chrome, google-chrome-extension

我正在使用我的弹出页面作为选项页面 - 我可以将信息发送到内容脚本并检索回来，但弹出窗口中的任何 DOM 事件都不起作用。
我尝试添加 onClick 事件，我尝试使用 domelement.addEventListener('click', function, false) - 没有任何效果。
但是，如果我只是在选项卡中打开 popup.html，一切都会完美运行。
这很奇怪，因为加载 popup.html 时加载的普通 javascript。我在加载文档时使用 window.alert 进行了测试。顺便说一句，setTimeout 也不起作用。
我似乎找不到其他有类似问题的人？
弹出页面的 HTML 和 CSS 工作得很好......

清单文件的片段：

```
"browser_action": {  
"default_icon": "icon.png",  
"popup": "popup.html"  
}, 
```

# wpf - 改变文化导致异常

> ID：10570751
> 
> 赞同：0
> 
> 时间：2012-05-13T09:40:04.227
> 
> 标签：wpf, localization

我试图在主窗口后面的代码中将文化更改为 es-es

```
 public MainWindow()
        {
            InitializeComponent();
            Thread.CurrentThread.CurrentUICulture = new CultureInfo("es-es");
        } 
```

并得到这个错误：

> 找不到资源“panelview.baml”。

而 panelview 是我在主窗口中使用的用户控件。有人能猜出是什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-17T04:50:33.150

尝试从 MainWindow 调用另一个页面，看看该页面中是否会出现更改。MainWindow 不会反映。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T12:53:22.170

您的`NeutralResourcesLanguage`AssemblyInfo 中的属性是否与此类似？

```
[assembly: NeutralResourcesLanguage("en-US", UltimateResourceFallbackLocation.Satellite)] 
```

如果是，请尝试删除该行并查看是否有效。

有一个类似的问题，应用程序会搜索不存在的卫星程序集。解决此问题的另一种方法可能是为 es-ES 提供资源文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T12:22:37.857

尝试

Thread.CurrentThread.CurrentUICulture = new CultureInfo("es-ES");

# ios - setMaximumFractionDigits 的问题

> ID：10570756
> 
> 赞同：4
> 
> 时间：2012-05-13T09:40:52.087
> 
> 标签：ios, objective-c, nsnumberformatter, fractions

setMaximumFractionDigits 不适用于以下代码。

```
NSString *input=@"80.90";
NSNumberFormatter *numberFormatter=[[NSNumberFormatter alloc] init];
[numberFormatter setNumberStyle:NSNumberFormatterDecimalStyle];
[numberFormatter setMaximumFractionDigits:2];
NSNumber *number=[numberFormatter numberFromString:input]; 
```

数字被转换为 80.90000000000001。但我已限制为小数点后 2 位。那么，我如何获得数字为 80.90，而不是 80.90000000000001

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-13T09:54:38.353

`setMaximumFractionDigits`并`setMinimumFractionDigits`用于格式化数字。或者换句话说，它在将数字转换为字符串时应用，即`stringFromNumber`。所以在你使用时它不会被应用`numberFromString`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T10:02:50.477

正如@SunilPandey 提到`-setMaximumFractionDigits`的用于格式化数字。所以你可以这样做：

```
float input = 80.99999;
NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
[numberFormatter setRoundingMode: NSNumberFormatterRoundDown];
[numberFormatter setNumberStyle:NSNumberFormatterDecimalStyle];
[numberFormatter setMaximumFractionDigits:2];

NSString *numberString = [numberFormatter stringFromNumber:[NSNumber numberWithFloat:input]];
[formatter release];

NSLog(@"NumberString: %@", numberString); 
```

**输出：**

`NumberString: 80.99`

# ios - 有没有办法在 iOS 中为不同的语言/区域设置不同的 Default.png（启动图像）？

> ID：10570757
> 
> 赞同：4
> 
> 时间：2012-05-13T09:41:02.190
> 
> 标签：ios, localization, splash-screen, build-settings

> **可能重复：**
> [Default.png 的本地化不起作用](https://stackoverflow.com/questions/3421868/localization-of-default-png-is-not-working)

我的启动画面中有英文文本，所以当用户设置不同的语言时，我希望能够有不同的启动图像。

这可能吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-13T10:22:26.600

是的，这是可能的。几乎与本地化所有资源的方式相同。您只需要提供一个 Default.png 图像，然后启用您感兴趣的所有语言。结果是您将获得每种语言的图像副本到相应的文件夹中。然后根据需要编辑（或覆盖）每个图像。我现在已经对其进行了测试，它运行良好（在 iOS 5 上，但我相信旧版本也是如此）。这是一个屏幕截图，方便参考：

![在此处输入图像描述](../Images/0d226e29e0f0305764e44898b712538e.png)

**编辑：** 关于这是否是一个好习惯的任何疑问，这直接来自[苹果的文档](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html#//apple_ref/doc/uid/TP40007072-CH6-SW12)：

> 除了在包的顶层包含启动图像之外，您还可以在应用程序特定语言的项目子目录中包含启动图像的本地化版本。有关在应用程序中本地化资源的更多信息，请参阅表 6-2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T09:47:33.293

~~不。~~

**编辑**：*确实，我傻眼了。就像 nevan-king 一样，我仍然会留下我的答案，因为我仍然认为这是 iOS 指南的意图（以及我个人关于本地化整个图像以本地化其文本的观点......） .*

启动画面并非旨在提供信息。启动画面只显示大约一秒钟，因此无论如何显示文本都是不可行的。

您想要做的常见做法是使用*没有文本*的图像作为启动画面，然后在几秒钟内显示带有图像和本地化文本的自定义视图。这样一来，您看起来就像有一个本地化的启动画面（并且文本出现在图像之后不久，这很好）。

但是，请记住，iOS 应用程序的理念是快速响应，因此仅在必要时才显示“启动屏幕”（出于营销原因或其他原因）。

阅读此内容以获取更多信息：http: [//developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW5](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW5)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-13T10:15:08.267

~~没有办法做到这一点。相反，制作一个没有文本的 Default.png。~~

**编辑：**我的立场是正确的。刚刚尝试了Alladinian的方法，它奏效了。我会留下我的答案，因为这是一种有用的技术。

您可以在 Photoshop 中轻松完成此操作，方法是选择一个正方形，然后将其复制并粘贴到文本上。使用 Marquee 选择图形的正方形（比如导航栏的空白部分）。然后点击“v”作为移动工具。使用 cmd-opt 并将正方形向左移动一点，然后使用 cmd-opt-shift 使其不会向上或向下移动。将方块移到文本上并松开鼠标按钮。根据需要重复。

如果您想了解 Apple 如何处理多语言启动画面，请打开地图或邮件。他们有一个没有文本的默认屏幕，然后在加载应用程序时显示文本（以任何语言）。

# css - 如何控制物体的位置

> ID：10570764
> 
> 赞同：0
> 
> 时间：2012-05-13T09:42:19.497
> 
> 标签：css, jsf, primefaces

我正在尝试学习如何在网页中使用模板。多亏了我在 stackoverflow 上找到的东西，我有了基础知识。现在我想要对格式进行一些控制。我找到了一个看起来不错的例子，所以我想我会用它来学习一些东西。我将展示 2 张图片，这样问题就很清楚了：

[![原来的](../Images/fc9c96ec125d59a032e51018b08d4bb6.png)](https://i.stack.imgur.com/wddgp.png) [![我的尝试](../Images/4b19e14ce5e969cacc145ec4efc1fbad.png)](https://i.stack.imgur.com/aaVlK.png)

我真的不关心表格本身。它只是作为学习一些东西的一个例子。有几件事我想控制： 1) 请注意，在原始文件中，公司名称相对于 jpeg 图像放置得很好。在我的情况下，它被卡在左边。2) 在原始版本中，如果我展开 Firefox 窗口，表单将保持居中并且两边都有空白。在我的情况下，Primefaces 控件占据了整个窗口并且它们太高了，切断了 jpeg 图像的一部分。

我看到原始使用 style.css 所以我尝试复制和粘贴不同的项目，但没有给我我正在寻找的控制。我将展示 style.css 中唯一有区别的东西：

```
body {
margin: 0;
padding: 0;
background: #fff url(images/header.jpg) no-repeat center top;
font-family: Arial, Helvetica, sans-serif;
font-size: 12px;
color: #7c7c7c;
} 
```

这是原始形式的开始

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="keywords" content="" />
<meta name="description" content="" />
 <meta http-equiv="content-type" content="text/html; charset=utf-8" />
 <title>Xhtml18</title>
<link href="style.css" rel="stylesheet" type="text/css" media="screen" />
</head>
<body>
<div id="wrapper">
<div id="header-wrapper">
    <div id="header">
        <div id="logo">
            <h1><a href="#">Company <span>Name</span></a></h1>
            <p>Nice Slogan Goes Here</p>
        </div>
        <div id="menu">
            <ul>
                <li class="current_page_item"><a href="#">Homepage</a></li>
                <li><a href="#">ABOUT US</a></li>
                <li><a href="#">SERVICES</a></li>
                <li><a href="#">SUPPORT</a></li>
                <li><a href="#">CONTACT</a></li>
            </ul>
        </div>
    </div>
</div> 
```

我尝试输入所有内部定义，但它们没有任何区别。我的版本要简单得多

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html">
<h:head>
<title>Master template</title>
<link href="style.css" rel="stylesheet" type="text/css" media="screen" />
</h:head>
<h:body>
<div id="logo">
    <h1><a href="#">Company <span>Name</span></a></h1>
    <p>Nice Slogan Goes Here</p>
</div>
<ui:insert name="AreaOne">Default text</ui:insert>
</h:body>
</html> 
```

最后在我的 xhtml 文件中，关键步骤允许我做模板

```
<h:body>
<ui:composition template="master.xhtml">
    <ui:define name="AreaOne"> 
```

因此，模板的主要作用似乎正在发挥作用，只是我需要对它进行更多控制。对不起，很长的信息，但我想我需要它来解释这个问题。

编辑：我不知道如何添加文件本身，所以我将其拼写为代码

```
body {
margin: 0;
padding: 0;
background: #fff url(images/header.jpg) no-repeat center top;
font-family: Arial, Helvetica, sans-serif;
font-size: 12px;
color: #7c7c7c;
}

h1, h2, h3 {
margin: 0;
padding: 0;
font-weight: normal;
color: #000;
}

h1 {
font-size: 2em;
}

h2 {
font-size: 2.8em;
}

h3 {
font-size: 1.6em;
}

p, ul, ol {
margin-top: 0;
line-height: 180%;
}

ul, ol {
}

a {
text-decoration: none;
color: #419725;
}

a:hover {
}

#wrapper {
margin: 0 auto;
padding: 0;
}

/* Header */

#header-wrapper {
height: 234px;

}

#header {
width: 950px;
margin: 0 auto;
padding: 0px 0px 0px 30px;
}

/* Logo */

#logo {
float: left;
width: 500px;
margin: 0px;
padding: 30px 0px 0px 60px;
color: #f7f7f7;

}

#logo h1, #logo p {
}

#logo h1 {
padding: 0px 0px 0px 0px;
letter-spacing: -1px;
font-size: 3.8em;
background: redc;
}

#logo h1 span {
color: #efc527;
}

#logo p {
margin: 0;
padding: 0px 0px 0px 0px;
font-size: 16px;
color: #fff;
} 

#logo a {
border: none;
background: none;
text-decoration: none;
color: #f7f7f7;
}

/* Search */

#search {
float: left;
width: 280px;
height: 40px;
padding: 0px;
}

#search form {
height: 40px;
margin: 0;
padding: 0px 0 0 10px;
}

#search fieldset {
margin: 0;
padding: 0;
border: none;
}

#search-text {
width: 170px;
padding: 6px 5px 2px 5px;
border: 1px solid #DEDEDE;
background: #FFFFFF;
text-transform: lowercase;
font: normal 11px Arial, Helvetica, sans-serif;
color: #5D781D;
}

#search-submit {
width: 50px;
height: 22px;
border: none;
background: #e4e4e4;
color: #171d21;
}

/* Menu */

#menu {
float: right;
width: 950px;
height: 50px;
margin: 0 auto;
padding: 0;
}

#menu ul {
float: left;
margin: 0;
padding: 74px 0px 0px 0px;
list-style: none;
line-height: normal;
}

#menu li {
float: left;
}

#menu a {
display: block;
margin-right: 1px;
padding: 16px 20px 15px 20px;
text-decoration: none;
text-align: center;
text-transform: uppercase;
font-family: Arial, Helvetica, sans-serif;
font-size: 12px;
font-weight: bold;
color: #fff;
border: none;
}

#menu a:hover, #menu .current_page_item a {
background: #131618;
text-decoration: none;
color: #FFFFFF;
}

#menu .current_page_item a {
}

/* Page */

#page {
width: 990px;
margin: 0 auto;
padding: 0px 0px 0px 0px;
background: url(images/img03.jpg) repeat-y left top;
}

#page-bgtop {
padding: 40px 0px 20px 0px;
background: url(images/img02.jpg) no-repeat left top;
}
/* Content */

#content {
float: left;
width: 720px;
padding: 0px 0px 0px 0px;
}

.post {
margin-bottom: 40px;
border-bottom: 1px dotted #E7E2DC;
margin-right: 10px;
}

.post .title {
height: 41px;
padding: 7px 0px 0px 30px;
letter-spacing: -.5px;
}

.post .title a {
border: none;
color: #000;
 }

.post .meta {
margin-bottom: 30px;
padding: 0px 30px 0px 30px;
text-align: left;
font-family: Arial, Helvetica, sans-serif;
font-size: 13px;
font-weight: bold;
font-style: italic;
}

.post .meta .date {
float: left;
}

.post .meta .posted {
float: right;
}

.post .meta a {
}

.post .entry {
padding: 0px 30px 20px 30px;
padding-bottom: 20px;
text-align: justify;
}

.links {
padding-top: 20px;
font-size: 12px;
font-weight: bold;
}

/* Sidebar */

#sidebar {
float: right;
width: 240px;
margin: 0px;
padding: 0px 20px 0px 10px;
color: #fff;
}

#sidebar ul {
margin: 0;
padding: 0;
list-style: none;
}

#sidebar li {
margin: 0;
padding: 0;
}

#sidebar li ul {
margin: 0px 0px;
padding-bottom: 30px;
}

#sidebar li li {
line-height: 35px;
border-bottom: 1px dotted #E7E2DC;
margin: 0px 30px;
border-left: none;
}

#sidebar li li span {
display: block;
margin-top: -20px;
padding: 0;
font-size: 11px;
font-style: italic;
}

#sidebar li li a {
padding: 0px 0px 0px 15px;
}

#sidebar h2 {
height: 38px;
padding-left: 30px;
letter-spacing: -.5px;
font-size: 1.8em;
color: #fff;
}

#sidebar p {
margin: 0 0px;
padding: 0px 30px 20px 30px;
text-align: justify;
}

#sidebar a {
border: none;
color: #efc527;
}

#sidebar a:hover {
text-decoration: underline;
}

/* Calendar */

#calendar {
}

#calendar_wrap {
padding: 20px;
}

#calendar table {
width: 100%;
}

#calendar tbody td {
text-align: center;
}

#calendar #next {
text-align: right;
}

/* Footer */

#footer {
height: 50px;
margin: 0 auto;
padding: 0px 0 30px 0;
font-family: Arial, Helvetica, sans-serif;
border-top: 5px solid #4ac221;
width: 990px;
background: #262626;
}

#footer p {
margin: 0;
padding-top: 40px;
line-height: normal;
font-size: 9px;
text-transform: uppercase;
text-align: center;
color: #fff;
}

#footer a {
color: #fff;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T09:54:21.327

你`brackground`有这个`center`属性，这就是为什么你把你的标志放在中心，而文字不在上面。

```
body {
margin: 0;
padding: 0;
background: #fff url(images/header.jpg) no-repeat center top;
font-family: Arial, Helvetica, sans-serif;
font-size: 12px;
color: #7c7c7c;
} 
```

您可以删除该`center`属性，也可以通过执行类似操作来移动文本（只是一个示例！）

```
<div align="center"><h1><a href="#">Company <span>Name</span></a></h1></div> 
```

然后，要停止 primefaces 的组件自动调整大小，您必须覆盖默认 css。

我猜你正在使用 PanelGrid，所以你可以尝试

```
<p:panelGrid columns="2" style="width: 200px !important">....</p:panelGrid> 
```

我不确定这`!important`是必需的，但基本上你必须给组件一个固定的宽度来阻止它自动调整大小

编辑：

如果要将样式应用于每个`p:panelGrid`组件，则应考虑覆盖整个 css 类。

看看这里就知道每个 primefaces 组件的 css 类名：

[http://primefaces.googlecode.com/files/primefaces_users_guide_3_2.pdf](http://primefaces.googlecode.com/files/primefaces_users_guide_3_2.pdf)

# c++ - 在对 generate_n 的连续调用之间不保留 Functor 的实例变量

> ID：10570768
> 
> 赞同：5
> 
> 时间：2012-05-13T09:44:36.010
> 
> 标签：c++, stl, functor

我使用以下结构作为 STL`generate_n`算法的输入：

```
struct GenerateNumber {     
    GenerateNumber () : i(0) {}
    int operator () (void) {        
        return  i++;
    }
private:
    int i;
}; 
```

使用此函子的代码示例是：

```
std::vector <int> v1 (3);
std::vector <int> v2 (3);
GenerateNumber generateNumber;
std::generate_n (v1.begin (), 3, generateNumber);
std::generate_n (v2.begin (), 3, generateNumber); 
```

但是，结果是两者都`v1`包含`v2`，`{0,1,2}`而不是`v2`包含`{3,4,5}`。我已经用断点验证了`GenerateNumber`' 的构造函数只被调用一次（我知道构造函数被多次调用是没有意义的，但我还是检查了它）。

我知道我可以通过制作`i`静态来解决这个问题，但我不明白这种行为。`i`为什么在连续调用之间不保留的值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T09:48:34.043

生成器对象在传递给时被复制`generate_n`。尝试使用`std::ref`，即

```
std::generate_n(v1.begin(), 3, std::ref(generateNumber));
std::generate_n(v2.begin(), 3, std::ref(generateNumber)); 
```

**编辑：**请注意，`std::ref`仅在 C++11 中可用。它在 TR1 as 中引入`std::tr1::ref`，并且在 boost as 中也可用`boost::ref`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T09:49:24.790

[std::generate_n](http://en.cppreference.com/w/cpp/algorithm/generate_n)按值获取函子，即复制它。可能是您没有检查是否调用了*复制构造函数。*

在没有 的情况下`std::ref`，并且如果您的问题在您的示例中被本地化，您可以修改您的仿函数以引用在调用范围内设置的计数器`std::generate_n`：

```
struct GenerateNumber {     
    GenerateNumber (int& i) : struct GenerateNumber {     
    GenerateNumber () : i(0) {}
    int operator () (void) {        
        return  i++;
    }
private:
    int& i;
};

int main() {
  int counter = 0;
  std::vector <int> v1 (3);
  std::vector <int> v2 (3);
  GenerateNumber generateNumber(counter);
  std::generate_n (v1.begin (), 3, generateNumber);
  std::generate_n (v2.begin (), 3, generateNumber);

} 
```

# c++ - 单个进程中的死锁-？

> ID：10570771
> 
> 赞同：3
> 
> 时间：2012-05-13T09:45:23.053
> 
> 标签：c++, multithreading, thread-safety, mutex, deadlock

单个进程/线程被阻塞试图获取相同的互斥锁时的情况可以称为“死锁”吗？

mutex_lock(&mutex) - 成功
...
mutex_lock(&mutex) - 被阻止，互斥锁未释放

似乎“不可剪切资源”的条件不适用：这里只有单个进程/线程，因此没有不可剪切资源保持和等待的情况：这里只有单个进程，因此无需等待另一个进程释放请求的资源

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T10:14:38.617

是的，这是考虑过的，或者可能会*导致死锁。

该术语不受线程或进程的约束——而是*请求*。

假设您的锁 ( `mutex`)*不是*可重入的，并且假设您的资源在变异时被锁定，并且从多个来源变异资源是错误的。当/如果您的单线程进程尝试在突变中启动数据的新突变并且请求锁定被锁定的不可重入锁时会发生什么？僵局

'潜在地'，因为您没有确切指定您正在处理的互斥锁类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-21T00:02:29.573

不，这不是死锁。

*如果四个条件同时成立，就会出现***死锁。****

 **   **互斥**：涉及的资源必须是不可共享的；否则，不会阻止进程在必要时使用资源。在任何给定时刻，只有一个进程可以使用该资源。
*   **持有并等待或资源持有**：一个进程当前持有至少一个资源并请求其他进程持有的额外资源。
*   **无抢占**：资源只能由持有它的进程自愿释放。
*   **循环等待**：每个进程必须等待一个被另一个进程占用的资源，而另一个进程又在等待第一个进程释放资源。一般来说，有一组等待进程，P = {P1, P2, ..., PN}，这样 P1 正在等待 P2 持有的资源，P2 正在等待 P3 持有的资源，依此类推，直到 PN等待 P1 持有的资源。

[更多的...](https://en.wikipedia.org/wiki/Deadlock)

对于*单个进程*，永远无法满足*循环等待条件，因此**单个进程*永远不会出现*死锁*。*

# c# - 获取谷歌浏览器窗口标题

> ID：10570772
> 
> 赞同：2
> 
> 时间：2012-05-13T09:45:26.463
> 
> 标签：c#, google-chrome, process

所以我试图弄清楚如何获取谷歌浏览器的文本/标题。我终于做到了，这看起来很有希望..

```
cur_url = Process.GetProcessesByName("chrome")[0].MainWindowTitle; 
```

cur_url 是一个旧名称的字符串。可悲的是，这不起作用。它只是返回一个空白值。这是正确的方法吗？还是有另一种更有效的方法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T11:39:47.410

看看这个答案：

[使用 c# 获取 chrome 浏览器标题](https://stackoverflow.com/questions/16958051/get-chrome-browser-title-using-c-sharp/16958798#16958798)

它会为你工作。您需要为此使用 Win32Api。

# git - git 保留历史中的文件，其他人已删除

> ID：10570776
> 
> 赞同：0
> 
> 时间：2012-05-13T09:46:09.633
> 
> 标签：git

我按照这个[http://help.github.com/remove-sensitive-data/](http://help.github.com/remove-sensitive-data/)

但仍有一些文件难以删除，我只需要保留`/lib/request.js` `/lib/response.js`在 git://github.com/visionmedia/express.git 中，其他文件应该全部删除。

在那篇文章中，我需要告诉要删除哪个文件，例如 Rakefile

`git filter-branch --index-filter 'git rm --cached --ignore-unmatch Rakefile' --prune-empty -- --all`

但我想要的是告诉要保留哪个文件。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T10:39:33.783

您确定您不应该创建一个全新的存储库并从复制的这两个文件开始吗？

```
$ mkdir my_repo
$ cd my_repo/
$ git init
Initialized empty Git repository in /Users/annelicuss/my_repo/.git/
$ wget https://raw.github.com/visionmedia/express/master/lib/request.js
--2012-05-13 20:38:08--  https://raw.github.com/visionmedia/express/master/lib/request.js
Resolving raw.github.com... 207.97.227.243
Connecting to raw.github.com|207.97.227.243|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 8878 (8.7K) [text/plain]
Saving to: `request.js'

100%[======================================>] 8,878       --.-K/s   in 0s      

2012-05-13 20:38:10 (242 MB/s) - `request.js' saved [8878/8878]

$ wget https://raw.github.com/visionmedia/express/master/lib/response.js
--2012-05-13 20:38:16--  https://raw.github.com/visionmedia/express/master/lib/response.js
Resolving raw.github.com... 207.97.227.243
Connecting to raw.github.com|207.97.227.243|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 15276 (15K) [text/plain]
Saving to: `response.js'

100%[=======================================================================================================>] 15,276      --.-K/s   in 0s      

2012-05-13 20:38:17 (280 MB/s) - `response.js' saved [15276/15276]

$ ls
request.js  response.js
$ git add *
$ git commit -m 'Add request, response from Express.'
[master (root-commit) be4a6d9] Add request, response from Express.
 2 files changed, 1059 insertions(+), 0 deletions(-)
 create mode 100644 request.js
 create mode 100644 response.js
$ git log
commit be4a6d9c82cb48b61f662e1e83a9f696a6685883
Author: Arlen Cuss <a@unnali.com>
Date:   Sun May 13 20:38:37 2012 +1000

    Add request, response from Express.
$ 
```

请注意，即使这样也可能无法满足您的要求；两者都`request.js`依赖`response.js`于，例如`util.js`在同一目录中找到。您可能只想添加 Express 作为项目的依赖项。

# python - 关于appengine索引的3个问题

> ID：10570780
> 
> 赞同：3
> 
> 时间：2012-05-13T09:46:22.890
> 
> 标签：python, google-app-engine, indexing

我得到了以下情况

```
class M(db.Model):

    a = db.ReferenceProperty(A)

    x = db.ReferenceProperty(X)
    y = db.ReferenceProperty(Y)
    z = db.ReferenceProperty(Z)

    items = db.StringListProperty()

    date = db.DateTimeProperty() 
```

我想进行过滤（a），（x，y或z）和（项目）的查询，按日期排序，即

```
mm = M.all().filter('a =', a1).filter('x =', x1).filter('items =', i).order('-date') 
```

例如，永远不会有同时对 x 和 y 进行过滤的查询。

所以，我的问题是：

1) 我应该创建多少（以及哪些）索引？

2) 我可以在项目上添加多少“字符串”？（我想添加数千个）

3) 如果有 1000 个项目，我将在单个“M”上有多少条索引记录？

我还不太了解这个索引的东西，并且正在杀死我。您的帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T18:12:42.127

本文很好地解释了索引/爆炸索引，它实际上适合您的示例：[https ://developers.google.com/appengine/docs/python/datastore/queries#Big_Entities_and_Exploding_Indexes](https://developers.google.com/appengine/docs/python/datastore/queries#Big_Entities_and_Exploding_Indexes)

您最大的问题是您可能会遇到每个实体 5000 个索引以及数千个项目的限制。如果为 a, x, items (1000 items), date 取索引：|a| *|x|* |项目|*|日期| == 1*1*1000*1 == 1000。

如果项目中有 5001 个条目，则 put() 将失败并出现相应的异常。

从您提供的示例中，您是否过滤 x、y 或其他任何内容似乎都无关紧要，因为该属性只有 1 个，因此您不会遇到爆炸索引的机会。1*1 == 1。

现在，如果你有两个列表属性，你会想要确保它们被单独索引，否则你会得到一个爆炸索引。例如，如果您有 2 个列表属性，每个属性包含 100 个项目，则会产生 100*100 个索引，除非您拆分它们，否则只会产生 200 个（假设所有其他属性都是非列表）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T19:12:49.987

1.  对于您给出的标准，您只需要创建三个复合索引：`a,x,items,-date`, `a,y,items,-date`, `a,z,items,-date`. 请注意，列表属性会为列表中的每个属性创建一个索引条目。

2.  每个实体的索引条目**总数**限制为5000 个。如果您只有三个复合索引，则它是 5000/3 = 1666（单个列表属性的上限为 1000）。

3.  仅在三个复合索引的情况下，3*1000 = 3000。

**注意：**以上假设您没有每个属性的内置索引（= 属性另存为未索引）。否则，您需要考虑 2N 的内置索引，其中 N 是单个属性的数量（2 代表 asc、desc）。在您的情况下，这将是 2*(5 + no_items)，因为`items`它是一个列表属性，并且每个条目都会创建一个索引条目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T01:44:27.053

另请参阅[https://developers.google.com/appengine/articles/indexselection](https://developers.google.com/appengine/articles/indexselection)，其中描述了 App Engine（相对较新）改进的查询计划功能。基本上，您可以将所需的索引条目数减少到：（过滤器数 + 1）*（订单数）。
不过，正如文章所讨论的，您可能仍然使用复合索引可能是有原因的——本质上，存在时间/空间权衡。

# c# - ASP.Net MVC3 中的复选框列表

> ID：10570785
> 
> 赞同：0
> 
> 时间：2012-05-13T09:47:41.113
> 
> 标签：c#, asp.net-mvc, checkbox

我的应用程序需要对带有复选框的表进行 HTTP 发布。在控制器端，我需要遍历表并对检查的每一行执行某些操作。

我需要做的事情是：

识别是否选中了一行

这是我的代码：

**看法 ：**

```
@model IEnumerable<LinqToTwitter.User>
@{
    ViewBag.Title = "Page d'accueil";
}
<h2>Twitter</h2>
<table>
    <tr>
    <td>
        <input id="Checkbox1" type="checkbox" />
    </td>
    </tr>
@foreach (var tweet in Model)
{               
    <tr>
        <td>
            <input id="rowIDs" type="checkbox" />
        </td>
        <td>
            <img alt="" src="@tweet.ProfileImageUrl" />
        </td>
        <td>
            <strong>@tweet.Name</strong>
            <br />
            Friends: <strong>@tweet.FriendsCount</strong>
        </td>
    </tr>
}
</table> 
```

**控制器 ：**

```
{.....
    string nextCursor = "-1";

    List<LinqToTwitter.User> result = new List<LinqToTwitter.User>();
    while (!string.IsNullOrEmpty(nextCursor) && nextCursor != "0")
    {
        var followers =
        (from tweet in twitterCtx.User
            where tweet.Type == UserType.Followers &&
            tweet.ID == auth.UserId &&
            tweet.Cursor == nextCursor
            select tweet).ToList();

        result.AddRange(followers);
        nextCursor = followers[0].CursorMovement.Next;
    }
    return View(result);
} 
```

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T06:12:46.037

如果要将输入标签发布到服务器，它们必须在表单标签中。那么你的 html 必须是这样的：

```
@model IEnumerable<LinqToTwitter.User>
@{
         ViewBag.Title = "Page d'accueil";
}
<h2>
    Twitter</h2>
@using (Html.BeginForm())
{
    <table>
        <tr>
            <td>
                <input id="Checkbox1" type="checkbox" />
            </td>
        </tr>
        @foreach (var tweet in Model)
        {               
            <tr>
                 <td>
                    <input id="@("chk" + @tweet.ID.ToString())" type="checkbox" name="@("chk" + @tweet.ID.ToString())"  />
                </td>
                <td>
                    <img alt="" src="@tweet.ProfileImageUrl" />
                </td>
                <td>
                    <strong>@tweet.Name</strong>
                    <br />
                    Friends: <strong>@tweet.FriendsCount</strong>
                </td>
            </tr>
        }
    </table>
} 
```

请注意如何通过 HtmlHelper 定义表单标签并定义复选框以具有唯一 ID。

和你的控制器代码是这样的：

```
Dictionary<int, bool> isChecked = new Dictionary<int, bool>();

foreach (LinqToTwitter.User item in twitterCtx.User)
{
    if (Request.Form["chk" + item.ID.ToString()] != null && Request.Form["chk" + item.ID.ToString()] == "on")
        isChecked.Add(item.ID, true);
    else
        isChecked.Add(item.ID, false);
} 
```

现在 isChecked 字典包含每个项目的 ID 以及是否检查。

# c# - 删除数据表中的一行 -> DeletedRowInaccessible

> ID：10570788
> 
> 赞同：2
> 
> 时间：2012-05-13T09:48:14.403
> 
> 标签：c#, database, winforms, exception, ado.net

所以我让这个datagridview1在数据集（db1）中填充了一个数据表（索引1），我试图通过按钮删除当前选择的行。

```
private void delempl_Click(object sender, EventArgs e){
    db1.gettable(1).Rows[dataGridView1.CurrentRow.Index].Delete()
    db1.updatedb(); //sending the changes to my DB
} 
```

每当用户更改 datagridview 中的选择时，我还将名字/姓氏写入 2 个文本框

```
private void dataGridView1_SelectionChanged(){
    lname.Text = db1.gettable(1).Rows[dataGridView1.CurrentRow.Index][2].ToString();
    fname.Text = db1.gettable(1).Rows[dataGridView1.CurrentRow.Index][1].ToString();
} 
```

删除最后一行工作正常，但是当我尝试删除中间的一个时，我得到一个 DeletedRowInaccessible 异常：

```
lname.Text = db1.gettable(1).Rows[dataGridView1.CurrentRow.Index][2].ToString(); 
```

我猜当行被删除时，选择会更改并触发 dataGridView1_SelectionChanged-Event。

有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T11:15:57.483

数据表中仍然存在已删除的行，但您无法读取其属性。
您应该检查 CurrentRow 是否被删除

```
private void dataGridView1_SelectionChanged()
{ 
    DataTable tb = db1.gettable(1);
    if(dataGridView1.CurrentRow != null && dataGridView1.CurrentRow.Index != -1 && 
       tb[dataGridView1.CurrentRow.Index].RowState != DataRowState.Deleted)
    {
        lname.Text = tb.Rows[dataGridView1.CurrentRow.Index][2].ToString(); 
        fname.Text = tb.Rows[dataGridView1.CurrentRow.Index][1].ToString(); 
    }
} 
```

# java - Java 多个数组共享父级的相同内容

> ID：10570790
> 
> 赞同：1
> 
> 时间：2012-05-13T09:48:18.567
> 
> 标签：java, arrays, memory

我正在尝试在我的应用程序中创建一个选项卡系统，它允许用户过滤每个选项卡中显示的内容（即用户选择要隐藏的项目）。所有项目都在一个数组中可用：`ArrayList<ItemInfo> mItems`. 在我的`TabInfo`课堂上，我想要这样的东西：

```
public class TabInfo {
    public int numItems;
    public ArrayList<ItemInfo> content;
} 
```

`content`数组刚刚`mItems`过滤掉。这样做的问题是我必须保留许多`ItemInfo`'s 的副本，这会浪费大量内存（选项卡之间可能有重复的项目）并且它们都只包含在`mItems`.

有没有办法`mItems`在`TabInfo`不保留重复项的情况下进行过滤？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T10:01:12.710

除非您正在做一些事情来使`content`数组包含您`ItemInfo`的 s 的副本，否则它们不会。ArrayLists 存储对对象的引用，而不是直接存储对象。

当您将同一个对象插入多个`ArrayList`s 时，不会复制该对象，而是存储多个引用。

所以你不必做任何事情。（或者，如果您在存储对象之前复制/克隆对象，则需要停止这样做。）

# java - Gradle 可以处理遗留项目的构建，而无需重组目录吗？

> ID：10570795
> 
> 赞同：5
> 
> 时间：2012-05-13T09:48:49.097
> 
> 标签：java, maven, build, build-automation, gradle

换句话说，Gradle 是否将某些目录结构强加到它管理的项目中？

我有一个遗留项目，任务是让它更容易构建和管理。它是一个多模块 Java EE 应用程序。我发现（你也会相信）当前的构建过程完全不正确，完全是浪费时间。

我相信现在是通过引入构建管理系统来理顺事情的时候了，选择是在 Maven 和 Gradle 之间。

大多数项目都使用eclipse项目的目录结构。其他几个使用不同的目录布局，直到现在我找不到背后的原因。使用 Maven，这将是一个绊脚石，因为我们需要重组目录以符合 Maven 的约定。重组目录可能是巨大的额外工作，因为我们还需要在 CVS 上对其进行分类。

因此向 Gradle 提出了问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T15:50:02.040

Gradle 使用约定优于配置，如果您遵循标准项目布局，则允许您提供最少的信息来构建项目。也就是说，一切仍然可以使用声明式样式进行配置：

```
sourceSets {
main {
    java {
        srcDir 'src/java'
    }
    resources {
        srcDir 'src/resources'
    }
} 
```

}

因为您拥有真正的编程语言，所以您几乎可以做任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T10:41:43.797

两者都可以容纳任意目录结构。IMO 在 Gradle 中更容易，在 Maven 中不值得。

也就是说，我有点喜欢强加的目录结构，而且在大多数情况下，我喜欢 Maven 结构。由于目录处理问题，CVS 很痛苦，但从长远来看，跨项目迁移到一致的结构是值得的。

# data-structures - 如何为具有负权重循环的图获取单源最短路径

> ID：10570796
> 
> 赞同：0
> 
> 时间：2012-05-13T09:48:58.207
> 
> 标签：data-structures, bellman-ford, single-source

嘿，我一直在研究“单源最短路径”问题的贝尔曼福特算法。

现在我被困在一个点上，我需要找出具有负权重循环的图形的解决方案。

但是贝尔曼福特算法在这里不起作用。

有人可以建议我该怎么做。如何解决负重循环的问题？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:11:47.820

如果有一个从原点可以到达的负循环，Bellman-Ford 可以检测到，那么你有两个选择：要么允许重复边，要么不允许。如果你允许重复边，你的最短路径可以被认为是无限负的。否则，如果您不这样做，则问题是NP完全的。来自[维基百科](http://en.wikipedia.org/wiki/Bellman%E2%80%93Ford_algorithm)：

> 最短路径问题的一个 NP-Complete 变体要求 G 中的最短路径（包含负循环），使得不重复边。

# file - 如何安装这些托管在 github 上的 Coda 模式文件？（我遵循了指示，但没有快乐）

> ID：10570799
> 
> 赞同：1
> 
> 时间：2012-05-13T09:49:15.683
> 
> 标签：file, github, mode, coda

滚动地址托管的 Coda.app 模式文件（用于语法突出显示等）带有这些说明。我在终端输入线路并点击返回，但似乎没有创建任何内容。我用我的帐户在 Safari 中登录了 github。我没有使用过 github，所以我不太了解它，除了它是一个所有酷孩子都使用的基于 Web 的版本控制系统。

[https://github.com/bobthecow/coda-modes#readme](https://github.com/bobthecow/coda-modes#readme)

## 自述文件：

> Coda 和 SubEthaEdit 的语法模式 由 bobthecow 策划的 Coda（和 SubEthaEdit）的语法模式选择。
> 
> 安装 如果您在 ~/Library/Application Support/Coda/Modes 已经有一个文件夹，请移动它（如果它是空的，则将其删除）。查看此存储库：
> 
> cd ~/Library/Application\ Support/Coda git clone --recursive git://github.com/bobthecow/coda-modes.git Modes 如果您的旧模式文件夹中有其他语法模式，请将它们复制到此文件夹中。重新启动科达。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T12:17:46.820

可以肯定的是，这里应该是*两个*命令行：

```
cd ~/Library/Application\ Support/Coda
git clone --recursive git://github.com/bobthecow/coda-modes.git Modes 
```

这应该在“”中创建一个“Modes”目录`~/Library/Application\ Support/Coda`。

如果git地址不起作用，请尝试htts：

```
git clone --recursive https://github.com/bobthecow/coda-modes.git Modes 
```

请注意， a[`git clone --recursive`](http://schacon.github.com/git/git-clone.html)使用默认设置初始化其中的所有子模块。这相当于`git submodule update --init --recursive`克隆完成后立即运行。

# asp.net-mvc-3 - 如何在 MVC3 中使用 nhibernate 执行连接

> ID：10570803
> 
> 赞同：1
> 
> 时间：2012-05-13T09:49:34.357
> 
> 标签：asp.net-mvc-3, nhibernate, nhibernate-mapping

嗨，我想在表之间执行连接，但我无法做到。

这是我的课程：

```
 public class Person
{
   public virtual LoginAccount LoginAccount { get; set; }
}

 public class LoginAccount 
{
 //fields of LoginAccount
} 
```

Person的映射文件

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly ="HobbyHomes" namespace ="HobbyHomes.Model" >
<class name ="Person">

<composite-id class="HobbyHomes.Model.LoginAccount" name="LoginAccount">
  <key-property name="LoginAccountID">
    <column name="LoginAccountID"></column>
  </key-property>
</composite-id>

//other properties

 </class> 
```

现在这是我试图从 Person 获取 LoginAccount 值的内容：

```
 public IList<Person> FetchPerson(ICollection<Learner> learner)
    {
        log.Debug("Started");
        ISession session = DataAccessLayerHelper.OpenReaderSession();
        IList<Person> person = null;
        ITransaction transaction = null;
        Disjunction dj = new Disjunction();
        try
        {
            transaction = session.BeginTransaction();

            person = session.CreateCriteria(typeof(Person), "person")
                            .CreateCriteria("person.LoginAccount", "LoginAccount", NHibernate.SqlCommand.JoinType.LeftOuterJoin)
                            .List<Person>();
            transaction.Commit();

        }
        catch (Exception ex)
        {
            if (transaction != null && transaction.IsActive)
                transaction.Rollback();
            log.Error(ex);

        }
        finally
        {
            if (transaction != null)
                transaction.Dispose();

            if (session != null && session.IsConnected)
                session.Close();
        }

        log.Debug("End");
        return person;
    } 
```

但是这样我只能获取 Person 类的字段，而不是 LoginAccount 类的字段。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:39:48.797

`person = session.CreateCriteria(typeof(Person), "person").List<Person>()`应该为您提供所有属性，因为该列`LoginAccountID`是人员表的一部分。

也许你想要的是一个关键参考

```
<composite-id>
  <key-many-to-one class="HobbyHomes.Model.LoginAccount" name="LoginAccount">
    <column name="LoginAccountID"></column>
  </key-many-to-one>
</composite-id> 
```

# jquery - 使用 getJSON 和循环打印数据

> ID：10570807
> 
> 赞同：0
> 
> 时间：2012-05-13T09:50:11.453
> 
> 标签：jquery, json

我使用 $.getJSON 从 PHP 脚本接收一些数据（JSON 编码）。它由 10 个数据集（{"key":"data",...}）组成。我想打印所有数据，首先淡出旧的刺，然后用新的刺替换它，最后淡入。这将在一个循环中发生。

处理数据集时，该函数会调用自身并获取接下来的 10 个数据集以打印它们。等等。

```
function getText(){

    $.getJSON("getText.php",
        function(data){
            for(key in data){
                //alert(key);
                if($("#wrapper").css("display") == "block")
                    $("#wrapper").fadeOut(500);

                $("#wrapper").html(data[key]).fadeIn(500); 
            }
    });
    //alert("end");

    setTimeout(function(){
        getText();
    },20000);
} 
```

有一些警报会显示正确的数据集，但没有它们只会显示数据集中的最后一个或第一个数据。有人可以帮我吗？！

简化后只有一个 div (#wrapper)。在页面加载并显示一些信息后，第一次调用函数 getText。现在调用 PHP 脚本，我们收到十个数据集。这些中的每一个都应在函数再次调用自身之前显示。例如：淡入包装，显示数据#1，淡出包装；淡入包装，显示数据#2，淡出包装，依此类推，直到显示所有数据（共十个）。循环应该以某种方式等待动画。并且包装中的文本应被替换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T10:42:34.460

鉴于你的更新试试这个：

```
function getText(){
var storage = {};
$("#wrapper").html('').fadeOut(500);
    $.getJSON("getText.php",
        function(data){
        storage.data = data;
                    });
     for (var i in storage.data)
      {
          $("#wrapper").html(storage.data[i]).fadeIn(500).delay(5000).fadeOut(500);
          if (i == storage.data.length-1)
          {
              setTimeout(function(){
                 getText();
              },50000);
          }
      }
} 
```

或者

```
setInterval('getText',20000);
function getText(){
    var storage = {};
       $.getJSON("getText.php",
            function(data){
            i = (typeof(storage.i) != "undefined") ? storage.i : 0;
         setInterval(function() {
              $("#wrapper").fadeOut(500).html(storage.data[i]).fadeIn(500);
storage.i = i+1;
},2000);

          });
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T10:34:31.667

那么，我认为，这就是您要寻找的 +/- ..

```
function getText(){
    $.getJSON("getText.php", function(data) {
       var keys = [];
       for(var key in data){
          keys.push(key);
       }

       function displayData() {
          var key = keys.pop();
          $("#wrapper").html(data[key]).fadeIn(500, function(){
             if(keys.length>0) {
                // Still some data available ..
                displayData();
             } else {
                // All data has been displayed .. get some new from server ..
                getText();
             }
          });
       }

       // If some data is available, show first ..
       if(keys.length>0) {
          displayData();
       }
   }); 
} 
```

# android - 如何将 'AT$WCDMA?\r' 转换为字符串 []

> ID：10570813
> 
> 赞同：0
> 
> 时间：2012-05-13T09:51:20.757
> 
> 标签：android, modem, at-command

我想将 AT 命令 'AT$WCDMA?\r' 转换为字符串 []。然后我想将它发送到调制解调器

```
invokeOemRilRequestStrings(java.lang.String[] strings, Message response) 
```

我试过了：

```
String[] wcdma = {"A","T","$","W","C","D","M","A","?","\r"}; 
```

或者

```
String wcdma2[] = new String[1];   
wcdma2[0] = "AT$WCDMA?\r"; 
```

但两者都不起作用。

当我使用 linux bash 时，它可以使用以下命令正常工作：

```
$ adb shell
# su
# stop ril-daemon
# echo -e 'AT$WCDMA?\r' > /dev/smd0 
```

有谁知道，我做错了什么？

干杯菲利克斯

# java - 如何使用java检测itext中的不同语言？

> ID：10570816
> 
> 赞同：0
> 
> 时间：2012-05-13T09:51:48.003
> 
> 标签：java, pdf, itext

用户在注册表单中输入他的详细信息。所以用户可以输入英文或阿拉伯文。我的要求是如果他输入阿拉伯文，我需要检测并将字体和方向设置为 RTL。如果它的英文它会显示为它是。我知道如何设置字体。但我不知道如何设置字符串的方向。它应该只改变阿拉伯语的方向。

```
BaseFont bf = BaseFont.createFont("C:\\WINDOWS\\Fonts\\ARIALUNI.TTF",BaseFont.IDENTITY_H, BaseFont.EMBEDDED);
Font font = new Font(bf, 10, 0);
String arab="آزمايش";
document.add(new Chunk(arab, font)); 
```

上面的代码将阿拉伯文本反向写入pdf中。我如何设置该字符串的方向？所以简而言之，我的要求是正确写入字符串值，如果它来自 LTR 的英文，如果它来自 RTL 的阿拉伯语。有人可以帮我解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T19:48:35.513

您可以检查此正则表达式的结果：

> “[\u0600-\u06FF,\u0590-\u05FF]”

如果结果为真，则字符串“包含”一个 RTL 单词（阿拉伯语/波斯语/希伯来语）

# c++ - 流通问题的“下限”是什么意思？

> ID：10570817
> 
> 赞同：5
> 
> 时间：2012-05-13T09:51:50.443
> 
> 标签：c++, data-structures, graph-theory, directed-graph

**问题**：循环问题允许您对通过特定弧的流量同时具有下限和上限。我理解的上限（就像管道一样，只有这么多东西可以通过）。但是，我很难理解下限的想法。这是什么意思？是否有解决问题的算法...

*   尝试确保每个具有下限的弧都至少获得那么多流量，如果找不到方法则完全失败？
*   如果无法满足下限，则简单地忽略弧？这对我来说更有意义，但意味着结果图中可能存在流量为 0 的弧，即![下 ≤ f ≤ 上 vf = 0](../Images/1f751092a3544ed782cebc505c661cf5.png)

**上下文**：我正在尝试找到一种方法来快速安排一组事件，每个事件都有一个长度和一组可以安排的可能时间。我试图将这个问题简化为一个循环问题，为此存在有效的算法。

我将每个事件作为一个节点放在有向图中，并为其提供应该填充的时隙数量。然后我将所有可能的时间也添加为节点，最后添加所有时隙，如下所示（所有弧都指向右侧）：

![我的图表](../Images/81e52b2ce8cbffb6d1a16c4cc7bf8eb9.png)

前两个事件有一个可能的时间和长度为 1，最后一个事件的长度为 4 和两个可能的时间。

这个图表有意义吗？更具体地说，被“填满”的时间段是 2 个（只有“简单”的时间段）还是 6 个，如图所示？

（如果有任何区别，我正在使用来自[LEMON库的推送重新标记算法。）](http://lemon.cs.elte.hu/trac/lemon)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T02:57:54.757

**关于一般循环问题：**

我同意@Helen；尽管设想下限的实际使用可能不那么直观，但它是一个*必须*满足的约束。我不相信你能忽视这个约束，即使那个流量为零。

flow = 0 的情况适用于更直观的最大流量问题（正如@KillianDS 所指出的）。在这种情况下，如果一对节点之间的流量为零，则它们不会影响“流量和守恒”： ![在此处输入图像描述](../Images/6f7cea78eba192847a7db9982dae0643.png)

当没有给出下限时（假设流量为非负数），零流量*不会*影响结果，因为

1.  它不能违反约束
2.  它不能影响总和（因为它添加了一个零项）。

由于某些外部约束，可能存在最小流量的实际示例（相关问题需要至少 X 水通过某个管道，正如@Helen 所指出的那样）。下限约束也可能来自等效对偶问题，该问题使流最小化以使某些边缘具有下限（并找到与具有上限的最大化问题等效的最佳等价物）。

**对于您的具体问题：**

似乎您正试图在一组固定的时隙中完成尽可能多的事件（在一个时隙中没有两个事件可以重叠）。

考虑可以分配给给定事件的时隙集：

> E1 -- { 9:10 }
> E2 -- { 9:00 }
> E3 -- { 9:20, 9:30, 9:40, 9:50 }
> E3 -- { 9:00, 9:10, 9: 20, 9:30 }

因此，您希望最大化任务分配的数量（即事件发生在“打开”的边上），结果集是成对不相交的（即没有一个分配的时隙重叠）。

我相信这是 NP-Hard 因为如果你能解决这个问题，你可以用它来解决[最大集打包问题](http://en.wikipedia.org/wiki/Set_packing)（即最大集打包减少到这个问题）。你的问题可以用整数线性规划来解决，但实际上这些问题也可以用贪心方法/分支定界很好地解决。

例如，在您的示例问题中。事件 E1 与 E3 发生“冲突”，而 E2 与 E3 发生冲突。如果 E1 被赋值（只有一个选项），那么 E3 只剩下一个可能的赋值（后面的赋值）。如果对 E3 进行此分配，则 E2 只剩下一个分配。此外，不相交的子图（不可能在资源上发生冲突的事件集）可以单独解决。

如果是我，我会从一个非常简单的贪婪解决方案开始（首先分配具有较少可能“槽”的任务），然后将其用作分支定界求解器的种子（如果贪婪解决方案找到 4 个任务分配，那么如果您的分配的递归子树不能超过 3)，则绑定。您甚至可以通过创建集合之间的成对交集图并仅在进行分配时通知相邻集合来挤出一些额外的性能。您还可以在继续分支和绑定时更新您的最佳作业数量（我认为这是正常的），所以如果您很幸运，您会很快收敛。

我用同样的想法找到了最小的一组蛋白质，可以解释一组已识别的肽（蛋白质片段），并发现它对于实际问题来说绰绰有余。这是一个非常相似的问题。

**如果您需要最前沿的性能：** 重新表述后，整数线性规划几乎可以解决您想要的任何此问题的变体。当然，在非常糟糕的情况下，它可能会很慢（实际上，它可能对您有用，尤其是在您的图形连接不紧密的情况下）。如果不是，则常规线性规划松弛近似于 ILP 的解决方案，并且通常非常适合此类问题。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T03:44:07.510

弧流的下限是硬约束。如果不能满足约束，则算法失败。在你的情况下，他们绝对不能满足。

即使有下限，您的问题也不能用纯网络流模型建模。您正试图约束流量为 0 或至少为某个下限。这需要整数变量。但是，LEMON 包确实有一个[接口](http://lemon.cs.elte.hu/pub/tutorial/a00018.html#sec_lp_mip)，您可以在其中添加整数约束。每个第一层弧的流出必须是 0 或 n，其中 n 是所需时隙的数量，或者您可以说每个“事件”中最多有一个弧具有非零流。

您的“析取”约束 ![下 ≤ f ≤ 上 vf = 0](../Images/1f751092a3544ed782cebc505c661cf5.png) 可以建模为

```
f >= y * lower
f <= y * upper 
```

y 限制为 0 或 1。如果 y 为 0，则 f 只能为 0。如果 y 为 1，则 f 可以是上下限之间的任何值。混合整数编程算法将比网络流算法慢几个数量级，但它们会为您的问题建模。

# python - 如何在python中创建嵌套矩阵

> ID：10570818
> 
> 赞同：1
> 
> 时间：2012-05-13T09:52:12.433
> 
> 标签：python, matrix, numpy, scipy

我想知道是否可以在 python 中创建嵌套矩阵。在这里我定义我的矩阵`A`

```
 A = array([[ 12.,   0.],[  0.,   4.]]) 
```

我想用一个通用的 2x2 矩阵替换零，然后用`imshow()`. 那可能吗？

我尝试以这种方式定义我的嵌套矩阵

```
 A = array([[ 12.,   array([[ 1.,   1.],[  1.,   1.]])],[  0.,   4.]]) 
```

但我收到了这个错误信息

ValueError：使用序列设置数组元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T11:48:24.630

```
>>> M = NP.empty((5, 5), dtype=NP.object)     # a 2D NumPy array
>>> M
  array([[None, None, None, None, None],
         [None, None, None, None, None],
         [None, None, None, None, None],
         [None, None, None, None, None],
         [None, None, None, None, None]], dtype=object) 
```

现在您可以插入序列，而不会收到*ValueError*

```
>>> M[2,2] = NP.array([4, 3, 5])
>>> M
  array([[None, None, None, None, None],
         [None, None, None, None, None],
         [None, None, [4 3 5], None, None],
         [None, None, None, None, None],
         [None, None, None, None, None]], dtype=object)

>>> M[2,2]
   array([4, 3, 5]) 
```

OP 的另一部分——将这样的数组传递给 Matplotlib 的***imshow***是一个问题。

***imshow 在***视觉上将 2D 数组表示为根据 x、y 索引定位在画布上的点云。基于将颜色映射到数组值的颜色图，根据不同的颜色和颜色强度指示该索引处的值。因此， *imshow 的*data 参数的有效参数是：

*   NumPy 二维数组

两个更高维度的 NumPy 数组（并且只有这两个 AFAIK），imshow 可以解释为

*   ***rgb 元组***（x，y，r，b，g）的 NumPy 2D 数组

*   NumPy 6D 数组，被解释为***rgba 元组***(x, y, r, g, b, a)的 2D 数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T11:39:09.267

numpy 数组具有数据类型。在您的第一行中，您创建`A`这样的：

```
import numpy as np
A = np.array([[ 12.,   0.],[  0.,   4.]])
A.dtype 
```

将打印`dtype('float64')`。那就是你想放在这样一个数组中的所有东西都必须能够被解释为浮点数。

在您第二次创建 A 时，这可能是问题所在。如果您改为：

```
A = np.array([[ 12.,   np.array([[ 1.,   1.],[  1.,   1.]])],[  0.,   4.]], dtype=np.object) 
```

它将被创建，但请注意`A`具有 2x2 的形状。您还应该意识到，数组必须具有所有维度的常规大小（数组中不能有任何孔）。也就是说，数组中的每个位置都被视为一个对象（其中一些恰好是数组本身）。

现在这仍然无法显示，`imshow`因为它需要一个包含可以解释为数字的元素的二维数组`A[0,1]`，例如，您的 是一个大小为 2x2 的数组本身。它不能被解释为一个数字。

`matplotlib.pyplot.imshow`因此，如果您想将数组 A 显示为图像并弄清楚您希望如何将数据放入该结构中，那么您应该将数组 A 设计为一个 2D 浮点数组。

# spring - Spring Bean 的原型是做什么用的？

> ID：10570821
> 
> 赞同：12
> 
> 时间：2012-05-13T09:52:24.590
> 
> 标签：spring, thread-safety, singleton, prototype

默认情况下，Spring 创建的 Bean 是单例的。它们是线程安全的，因为它们是无状态的。当我们希望 Spring 创建一个有状态的 Bean 时，我们需要使用原型作用域来定义 Bean。我们需要为他们处理线程安全问题。所有无状态 Bean 在被原型 bean 注入时都会被污染。所以，我只是无法想象我们可以在哪里使用原型范围。你能给出一些我们可以/需要使用原型 Spring Bean 的典型场景吗？另外，我们如何才能避免对其他单例 bean 的状态污染？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-13T10:36:12.547

使用原型作用域有很多原因，例如，任何时候你会使用“new”而不是使用单例。每个用户的 bean、每个请求的 bean、唯一 bean 的集合等等。毕竟，在任何不平凡的应用程序中，您使用非单例的次数不远多于单例吗？

单例范围的 bean 不是线程安全的，因为它们是单例的——它们必须*写成*线程安全的。它们不会神奇地变成线程安全的。bean 的作用域就是它的作用域：它不会使 bean*适合*特定的作用域——这取决于开发人员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T20:12:09.200

我认为原型范围的 bean 可以替代用于创建对象的工厂类。不同之处在于原型 bean 的情况下，spring 将为您节省一些用于依赖注入的代码，并且还会在适当的时候自动代理您的对象进行事务等。

我自己更喜欢工厂方法。我遇到的原型范围的一个合理场景是一个有状态的对象，不同的已知 bean 需要它并且每个都需要自己的副本。在这种情况下，一个专用的工厂类将是多余的，因为我不需要动态创建对象，而只需要在其他 bean 的实例化期间。

# asp.net-mvc - 使用 LinQ 从两个表（视图和列表）中获取数据并返回到一个视图（代码 MVC-C#）

> ID：10570822
> 
> 赞同：0
> 
> 时间：2012-05-13T09:52:26.060
> 
> 标签：asp.net-mvc

我有两个表：旅游和酒店我想用 join 执行查询并在视图中获取结果。

**如何查看两个表中的数据，如下图？**

[在此处输入链接描述](http://upnhanh.sieuthinhanh.com/tmpimages/images/sieuthiNHANH2012051313319mjnhntfjnw81744.jpeg)

在控制器中我有这个代码：

```
 public ActionResult DetailView(string strID)
    {
        var id_tour =  (from data1 in _db.Tours
                       join dataview2 in _db.TypeOfCosts on data1.ID_TourCost equals dataview2.ID_TourCost
                       where (data1.ID_Tour == strID) && (data1.ID_TourCost == dataview2.ID_TourCost)
                       select new
                       {
                           data1.TourName,
                           data1.ID_Tour,
                           data1.DepartureDay,
                           data1.DeparturePosition,
                           data1.AvailableRoom, 
                           dataview2.AdultCost,
                           dataview2.ChildrenCost,
                           dataview2.BabyCost,
                       }).FirstOrDefault();
        var view_tour = new DetailModels(id_tour.TourName, id_tour.ID_Tour, Convert.ToDateTime(id_tour.DepartureDay), id_tour.DeparturePosition,
            Convert.ToInt32(id_tour.AvailableRoom),
            Convert.ToInt32(id_tour.AdultCost), Convert.ToInt32(id_tour.ChildrenCost), Convert.ToInt32(id_tour.BabyCost));
        return View(view_tour);
    }
    [HttpPost]
    public ActionResult DetailView(DetailModels model)
    {
        var id_hotel = from data2 in _db.Tours
                       join dataview3 in _db.TourPrograms on data2.ID_Tour equals dataview3.ID_Tour
                       join dataview4 in _db.Programs on dataview3.ID_TourProgram equals dataview4.ID_TourProgram
                       join dataview5 in _db.Hotels on dataview4.ID_Hotel equals dataview5.ID_Hotel
                       where (data2.ID_Tour == dataview3.ID_Tour) &&
                       (dataview3.ID_TourProgram == dataview4.ID_TourProgram) && (dataview4.ID_Hotel == dataview5.ID_Hotel)
                       select new
                       {
                           dataview5.HotelName,
                           dataview5.HotelAddress,
                           dataview5.HotelPhoneNumber,
                       };
        // chuyền dữ liệu vào như thế nào
        return RedirectToAction("DetailView", "Tourpackage");
    } 
```

在模型中我有这个代码：

```
enter code here public class DetailModels
{
    public string TourName { get; set; }
    public string ID_Tour { get; set; }
    public DateTime DepartureDay { get; set; }
    public string DeparturePosition { get; set; }
    public int AvailableRoom { get; set; }
    public string HotelName { get; set; }
    public string HotelAddress { get; set; }
    public int HotelPhoneNumber { get; set; }
    public int AdultCost { get; set; }
    public int ChildrenCost { get; set; }
    public int BabyCost { get; set; }
    public DetailModels(string tourname, string idtour, DateTime dapartureday, string departureposition, int availableroom,
        int adultcost, int childrencost, int babycost)
    {
        this.TourName = tourname; this.ID_Tour = idtour; this.DepartureDay = dapartureday; this.DeparturePosition = departureposition;
        this.AvailableRoom = availableroom;
        this.AdultCost = adultcost; this.ChildrenCost = childrencost; this.BabyCost = babycost;
    } 
```

希望对大家有所帮助............谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T10:09:52.803

当您使用 MVC 时，我强烈建议您使用实体框架。如果您从不使用它，请查看：[http](http://www.pluralsight-training.net/microsoft/Courses/TableOfContents?courseName=aspdotnet-mvc3-intro) ://www.pluralsight-training.net/microsoft/Courses/TableOfContents?courseName= aspdotnet-mvc3-intro - 非常好的视频教程。我假设`Tour`-`Hotel`关系是典型的多对多。由 EF 类映射的 Tour 将具有属性`Hotels`，反之亦然。如果您通过例如`Tour`查看`@Model.Hotels`给您相关酒店的集合。顺便说一句，请做一些重构代码：）

# c# - 如何使用 WMI 获取进程描述？

> ID：10570823
> 
> 赞同：1
> 
> 时间：2012-05-13T09:52:44.853
> 
> 标签：c#, process, wmi, wmi-query

我正在使用 WMI 查询来获取所有进程的列表，但我缺少的是进程描述！当我使用“描述”属性时，它看起来像这样！

```
Name : chrome.exe            Description : chrome.exe 
```

但应该是

```
Name : chrome.exe            Description : Google Chrome 
```

那么返回进程描述的属性名称是什么？

```
public void GetProcesses()
{ 
     ManagementObjectSearcher searcher = new ManagementObjectSearcher("Select * From Win32_Process");
     ManagementObjectCollection processList = searcher.Get();
     foreach (ManagementObject obj in processList)
     {
         Console.WriteLine("Name : {0}     Description : {1}",obj["Name"],obj["Description"]);
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T10:11:17.917

您拥有[Win32_Process 类文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394372%28v=vs.85%29.aspx)中的所有属性。看起来你运气不好，使用[wbemtest](http://technet.microsoft.com/en-us/library/ee692770.aspx)在我的机器上测试一些进程，我没有看到任何适合你需要的属性。进程可能不会公开此类信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T10:20:33.793

它不是 WMI，但适用于本地计算机上的进程。

[您可能会使用GetVersionInfo](http://msdn.microsoft.com/en-us/library/system.diagnostics.fileversioninfo.getversioninfo.aspx)找到进程的描述 [原文如此]，实际上它是可执行文件的描述。比检查 FileDescription 和/或 ProductName[属性](http://msdn.microsoft.com/en-us/library/system.diagnostics.fileversioninfo.aspx)。

但请注意，不能保证此信息可用。尽管如此，这可能是您最好的选择。其他工具，如 sysinternals 进程浏览器，也会显示该信息。

# php - 提交表单后留在页面上

> ID：10570825
> 
> 赞同：-1
> 
> 时间：2012-05-13T09:52:54.027
> 
> 标签：php, jquery, ajax, html, form-submit

我试图留在提交表单的当前页面上。但不知何故，它不起作用。我在互联网上找到了一些代码和平并将它们放在一起。

这是 process.php 文件：

```
<?php
// Get Data    
$name = strip_tags($_POST['name']);
$email = strip_tags($_POST['email']);
$phone = strip_tags($_POST['phone']);
$subject = strip_tags($_POST['subject']);
$message = strip_tags($_POST['message']);

// Send Message
mail( "email@domain.com", "Contact Form testttt",
"Name: $name\nEmail: $email\nPhone: $phone\nWebsite: $url\nMessage: $message\n",
"From: Forms testtttttttt" );
?> 
```

其余代码，html 和 javascripts 可以在 jsfiddle 上找到： [jsfiddled code](http://jsfiddle.net/4zYTD/1/)

```
 $(function(){
        $('#contact').validate({
        submitHandler: function(form) {
                $(form).ajaxSubmit({
                url: 'process.php',
                success: function() {
                    $('#contact').hide();
                    $('#contact-form').append("<p class='thanks'>thanks test.</p>")
                    }
                });
            }
        });         
    }); 
```

忘了说现在发生了什么。我被重定向到 process.php 页面。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-13T10:29:16.377

使用[jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)函数提交表单而不刷新页面。你需要做这样的事情：

**测试.php：**

```
<script type="text/javascript" src="jquery-version.js"></script>
<script type="text/javascript" src="ajaxform.js"></script>

<form action='process.php' method='post' class='ajaxform'>
 <input type='text' name='txt' value='Test Text'>
 <input type='submit' value='submit'>
</form> 
```

**进程.php：**

```
<?php
      // Get your form data here in $_POST
?> 
```

**ajaxform.js**

```
jQuery(document).ready(function(){

    jQuery('.ajaxform').submit( function() {

        $.ajax({
            url     : $(this).attr('action'),
            type    : $(this).attr('method'),
            data    : $(this).serialize(),
            success : function( data ) {
                         alert('Form is successfully submitted');       
                      },
            error   : function(){
                         alert('Something wrong');
                      }
        });

        return false;
    });

}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-13T10:06:55.110

您需要返回[204 HTTP 状态](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.5)或使用 JavaScript 发出请求，而不是通过提交表单（这称为 Ajax，从[jQuery 教程页面](http://docs.jquery.com/Tutorials)链接有许多关于该主题的教程）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-13T10:06:28.793

这是一个帮助您入门的链接：

[http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/](http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/)

# javascript - Phonegap，单击导航栏按钮时如何触发功能

> ID：10570828
> 
> 赞同：0
> 
> 时间：2012-05-13T09:53:14.430
> 
> 标签：javascript, jquery, function, cordova

我正在开发一个用于学习目的的应用程序。

有一个带有 2 个按钮的标题、内容和导航栏。

body="onLoad()" 函数在应用程序启动时运行良好，但是当我单击导航栏上的另一个按钮时，我想触发一个显示页面内容的函数。但是当我在新的 HTML 文件中调用与索引文件 (body="contentLoader()") 完全相同的函数时，它不会触发！

下面是 index.html 中的代码

```
<html>
<head>
<head>
</head>

<body onload="onBodyLoad()"> 
```

现在我想点击导航栏上的“Listview”按钮，它有一个自己的 HTML 页面，也有

```
<body onload="onListLoad()"> 
```

但是我的 javascript 函数`function onListLoad() { alert("test"); }`没有触发。

我不知道为什么。这不是正常的方式吗？

提前致谢。问候，约翰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T19:35:02.760

我很确定您的子页面中的标签已在 PhoneGap 中被删除。只有主索引页面会触发其 onload 方法。

据我所知，一旦您的导航选项卡被激活，您就会尝试触发一些代码。我不确定我能告诉你“正确”的方法，但这是我所做的：

```
<div data-role="page" id="reports-browse">
    <div data-role="header"></div>
    <div data-role="navbar">
        <ul>
            <li><a href="#" onclick="$('#tab1').show(); $('#tab2').hide();" class="ui-btn-active">Tab 1</a></li>
            <li><a href="#" onclick="$('#tab1').hide(); $('#tab2').show();">Tab 2</a></li>
        </ul>
    </div>
    <div data-role="content">
        <div id="tab1">This is my first tab</div>
        <div id="tab2" style="display:none">This is my second tab.</div>
    </div>
    <script src="reports.browse.js"></script>
    <script>reports_browse.init();</script>
</div> 
```

然后我的 init() 函数执行以下操作：

```
$( document ).bind( "pagebeforeshow", function( prev_page ){
     // Populate the two tabs here.
}); 
```

希望这可以帮助。

# c++ - 字符串类中 size() 和 at() 的不正确行为

> ID：10570829
> 
> 赞同：5
> 
> 时间：2012-05-13T09:53:46.677
> 
> 标签：c++

我有这个代码：

```
string test("żaba");

cout << "Word: " << test << endl;
cout << "Length: " << test.size() << endl;
cout << "Letter: " << test.at(0) << endl; 
```

输出很奇怪：

```
Word: żaba
Length: 5
Letter: � 
```

如您所见，长度应为 4 和字母：“ż”。

如何更正此代码以正常工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T09:58:26.273

你的问题没有提到编码，所以我要在黑暗中刺一下，说这就是原因。

第一个行动方案：阅读[每个软件开发人员绝对、肯定必须了解 Unicode 和字符集的绝对最低要求（没有借口！）](http://www.joelonsoftware.com/articles/Unicode.html)。

在那之后，应该清楚的是，不存在“裸字符串”这样的东西——每个字符串都以某种方式编码。在您的情况下，它看起来非常像您使用带有变音符号的 UTF-8 编码字符串，在这种情况下，是的，字符串的长度（正确）报告为 5 ¹，并且第一个代码点可能不是可在您的平台上打印。

* * *

^(1）)注意`string::size`计算*字节*（= `char`s），而不是逻辑字符甚至代码点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-13T09:59:52.520

`std::string`在非 Windows 上通常用于存储 UTF8 字符串（这是 2010 年大多数理智操作系统上的默认编码），但它是一个“哑”容器，从某种意义上说，它不知道也不关心您存储的字节数。它可以用于读取、存储和写入；但不适用于字符串操作。

您需要使用优秀且维护良好的[IBM ICU](http://site.icu-project.org/) : International Components for Unicode。它是一个用于 *nix 或 Windows 的 C/C++ 库，已经进行了大量研究以提供一个文化感知字符串库，包括既快速又准确的不区分大小写的字符串比较。

另一个更容易为 C++ 开发人员切换到的好项目是[UTF8-CPP](http://utfcpp.sourceforge.net/)

# parsing - Antlr解析匹配固定字符串长度而不是规则

> ID：10570830
> 
> 赞同：2
> 
> 时间：2012-05-13T09:53:58.597
> 
> 标签：parsing, antlr

下面是解析输入汇编文件的语法的精简版本。我的语法中的一切都很好，直到我使用具有 3 个字符的标签（即与我的语法中的 OPCODE 长度相同），所以我假设 Antlr 将它匹配为 OPCODE 而不是 LABEL，但我怎么说“在这个位置，它应该是一个标签，而不是一个操作码”？

试用输入：

```
set a, label1
set b, abc 
```

标准装备的输出给出：

```
line 2:5 missing EOF at ','
(OP_BAS set a (REF label1)) (OP_SPE set b) 
```

当我通过 ANTLRWorks 逐步调试时，我看到它从指令规则 2 开始，但在对“abc”的引用处跳转到规则 3，然后在“，”处失败。

我可以通过大量的左分解来解决这个问题，但它使语法变得难以置信地难以理解。我试图在可读性和功能之间找到一个折衷方案（没有太多输入，全局回溯会影响性能）。

```
grammar TestLabel;

options {
    language = Java;
    output = AST;
    ASTLabelType = CommonTree;
    backtrack = true;
}

tokens {
    NEGATION;
    OP_BAS;
    OP_SPE;
    OP_CMD;
    REF;
    DEF;
}

program
    : instruction* EOF!
    ;

instruction
    : LABELDEF                  -> ^(DEF LABELDEF)
    | OPCODE dst_op ',' src_op  -> ^(OP_BAS OPCODE dst_op src_op)
    | OPCODE src_op             -> ^(OP_SPE OPCODE src_op)
    | OPCODE                    -> ^(OP_CMD OPCODE)
    ;

operand
    : REG
    | LABEL                     -> ^(REF LABEL)
    | expr
    ;

dst_op
    : PUSH
    | operand
    ;

src_op
    : POP
    | operand
    ;

term
    : '('! expr ')'!
    | literal
    ;

unary
    : ('+'! | negation^ )* term
    ;

negation
    : '-' -> NEGATION
    ;

mult
    : unary ( ( '*'^ | '/'^ ) unary )*
    ;

expr
    :  mult ( ( '+'^ | '-'^ ) mult )*
    ;

literal
    :   number
    |   CHAR
    ;

number
    :   HEX
    |   BIN
    |   DECIMAL
    ;

REG: ('A'..'C'|'I'..'J'|'X'..'Z'|'a'..'c'|'i'..'j'|'x'..'z') ;
OPCODE: LETTER LETTER LETTER;

HEX: '0x' ( 'a'..'f' | 'A'..'F' | DIGIT )+ ;
BIN: '0b' ('0'|'1')+;
DECIMAL: DIGIT+ ;

LABEL: ( '.' | LETTER | DIGIT | '_' )+ ;
LABELDEF: ':' ( '.' | LETTER | DIGIT | '_' )+ {setText(getText().substring(1));} ;

STRING: '\"' .* '\"' {setText(getText().substring(1, getText().length()-1));} ;
CHAR: '\'' . '\'' {setText(getText().substring(1, 2));} ;
WS: (' ' | '\n' | '\r' | '\t' | '\f')+ { $channel = HIDDEN; } ;

fragment LETTER: ('a'..'z'|'A'..'Z') ;
fragment DIGIT: '0'..'9' ;
fragment PUSH: ('P'|'p')('U'|'u')('S'|'s')('H'|'h');
fragment POP: ('P'|'p')('O'|'o')('P'|'p'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T10:28:58.613

解析器对词法分析器产生的标记没有影响。因此，无论解析器尝试匹配什么，输入`"abc"`都将始终被标记为 a 。`OPCODE`

您可以做的是创建一个匹配或匹配的`label`解析器规则，然后在您的规则中使用此规则：`LABEL``OPCODE``label``operand`

```
label
 : LABEL
 | OPCODE
 ;

operand
 : REG
 | label -> ^(REF label)
 | expr
 ; 
```

为您的示例输入生成以下 AST：

![在此处输入图像描述](../Images/d2e75ba0cb06716bba070cae0dd21e3d.png)

这只会匹配`OPCODE`，但不会更改令牌的类型。如果您也希望更改类型，请在将其更改为 type 的规则中添加一些自定义代码`LABEL`：

```
label
 : LABEL
 | t=OPCODE {$t.setType(LABEL);}
 ; 
```

# java - 服务器端 javascript 相对于 java 的优势

> ID：10570832
> 
> 赞同：5
> 
> 时间：2012-05-13T09:54:21.713
> 
> 标签：java, javascript, performance, server-side, serverside-javascript

我是服务器端 javascript 编程的新手，我试图了解这与传统服务器端 java 之间的区别。有哪些显着差异，为什么 SSJS 变得流行？SSJS 比 Java 好在哪里？从外行的角度来看，我认为 JS 在性能方面比 Java 慢，主要是因为它是一种解释性语言。

问候，阿南德

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T11:12:40.477

我认为 node.js 与这种现象的兴起有很大关系：

[http://nodejs.org/](http://nodejs.org/)

可以肯定的是，它一直是许多 commonjs 库开发等的推动力。

我看到评论说，当客户端和服务器端代码使用相同的语言时，它会让生活更轻松。对于我从事的节点项目，最初只有 3 名程序员负责一切，我们或多或少全权委托我们使用任何我们想要的技术。这引发了一些争论，因为每个人都有不同的背景；但是当有人建议使用 nodejs 时，它看起来是个好主意的*一个原因是 javascript 是我们所有人的共同点。*

但是，我不认为node的成功主要是因为它使用了js；这是关于设计的。与我使用过的大多数其他服务器端技术（Rails、PHP、cgi、mod_perl、mason）相比，我*更*喜欢它，而且无论界面中使用哪种语言，我都可能同样喜欢它。但是js是的。

所以这就是我的观点：我认为它与 javascript 没有什么特别的关系，而更多地与“javascript 社区”中的一些聪明的思考和发展有关，令人惊讶。考虑 PHP：我不认为 PHP 的成功与语言的设计（或性能特征）有很大关系，我认为这与它的使用方式以及人们如何构思服务器端编程有关10-15 年前，以及（密切相关的）他们必须依赖的工具。

那里的一个问题（在“聪明的思考”部门）是由节点背后的人做出的（非常有说服力的，如果你尝试一下）断言，例如，nginx，大意是异步的，事件驱动的模型是比传统的并行同步、线程驱动模型更适合服务器编程。我相信后者在 java 中占主导地位，即使我认为它也可以很容易地以另一种方式使用。另一方面，Javascript 最初旨在用于浏览器的异步、事件驱动世界，并且根本没有线程。再说一遍：*与其说是语言，不如说是文化。*

另外值得注意的是，主要使用 JSON 作为交换格式以及 NoSQL 数据库，如 couchdb（我使用过）和 mongodb（我没有使用过），它们在构建数据库时基本使用 JSON。Couchdb 还使用 js 进行一些服务器端编程（基本上是查询处理程序），大概是因为数据库文档是 JSON 格式的，这也很适合交给客户端。非常圆滑和聪明。一种语言，一种协议，从模型到视图；从某种意义上说，根本没有“交换”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-13T10:00:45.517

> 这个和传统的服务器端java的区别

首先，Java 和 JavaScript 没有任何共同之处。它们是两种完全不同的东西。记在脑子里。

*   我认为很多人喜欢服务器端 JavaScript，因为他们可以使用一种语言。他们在服务器上和客户端上都使用 JavaScript，而不是使用另一种语言（如 Java、PHP 或 Ruby）。另外，很多 web 程序员都熟悉 JavaScript（因为他们在客户端使用它），所以他们理解得很好。

*   JavaScript 也可以像 Java 一样简单。如果您只有一个小项目，那么与 JavaScript 相比，Java 的开销可能会很大。回调之类的东西在 JavaScript 中可能非常优雅。

*   此外，像 Node.js 这样的新框架使得使用这种语言很有吸引力。只要没有任何服务器端框架，你根本无法在服务器上使用 JavaScript。但是今天的语言发展得很好。

*   我认为 JavaScript 的性能还取决于服务器。我不确定这一点，但据我所知，JavaScript 也可以（及时）编译。谷歌的 chrome 正在做类似的事情。此外，在大多数网站上，性能并不是什么大问题，因为性能主要是对数据库的 IO。实际创建 HTML 页面非常简单，没什么大不了的。并且：PHP 也在许多网站上被解释和使用。Ruby 比 Java 慢得多，但 Ruby on Rails 非常流行。所以性能似乎并不那么重要。更多的是关于语言的“好”和优雅。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-13T10:37:57.390

这就像当你拥有像 JS 这样美妙的东西时，为什么要使用 GWT（来自谷歌的 java web 客户端）。

我认为这更像是一个心理学问题——人们倾向于留在自己的保存和已知区域，而不是转向未知语言。如果您在过去 5 年中使用过 java，并且知道它的所有缺陷，并且非常喜欢它，那么您就会开始说服自己，所有东西都应该用 java 编写，并且是最快的解决方案。

我不是说 Java 比 js 好（虽然我认为它更适合大型服务器端项目），但我认为大多数 js-服务器端用户使用它是因为他们已经习惯了 js，所以他们不想改变它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-13T10:00:24.020

从我的角度来看，主要优点是如果您拥有丰富的 JS 客户端界面，则可以简化客户端-服务器交互。如果您在服务器端和客户端使用相同的语言，您可以在它们之间共享公共代码（例如，如果您有一些业务逻辑，例如验证，并且它在客户端和服务器上使用，您可以在 JS 中实现一次并在多个地方）。

如果你已经了解 JS，你不应该学习一门新的语言来做服务器端的工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-07T12:05:23.527

我想在这里补充一下我的观点。
一句话：Node.js 在使用推送技术而不是 websockets 的实时 Web 应用程序中大放异彩。
**经过 20 多年基于无状态请求-响应范式的无状态 Web，我们终于有了具有实时双向连接的 Web 应用程序，客户端和服务器都可以发起通信，允许它们自由交换数据。**
这与典型的 Web 响应范式形成鲜明对比，后者总是由客户端发起通信。此外，它全部基于在标准端口 80 上运行的开放式 Web 堆栈（HTML、CSS 和 JS）。

# linux - 在中断时获取 current->pid

> ID：10570836
> 
> 赞同：3
> 
> 时间：2012-05-13T09:54:47.677
> 
> 标签：linux, linux-kernel, kernel, scheduling, interrupt-handling

我正在linux调度程序上写一些东西，我需要知道在我的中断到来之前哪个进程正在运行..当前结构是否可用？如果我在中断处理程序中执行 current->pid，我会得到我中断的进程的 pid 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T13:13:47.517

您可以，`current->pid`存在并且是被中断的进程（可能是空闲线程或任何线程）。

如果你在 Linux 调度程序中编写，你应该非常小心。`current`调度程序在选择要运行的新进程时更改它，因此它的值取决于您阅读它的确切时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T13:52:44.990

我不希望*current*在外部流程上下文中有效。如果您正在使用调度程序，也许您可​​以掌握它存储指向正在运行任务的指针的位置，例如 struct cfs_rq。

# macros - 是否可以将以下 lisp 宏编写为函数？

> ID：10570847
> 
> 赞同：2
> 
> 时间：2012-05-13T09:58:05.613
> 
> 标签：macros, common-lisp

我正在阅读[Paul Graham 的*ANSI Common Lisp*](http://www.paulgraham.com/acl.html)。在关于宏的章节中，他展示了以下示例：

```
(defmacro in (obj &rest choices)
  (let ((insym (gensym)))
   `(let ((,insym ,obj))
      (or ,@(mapcar #'(lambda (c) `(eql ,insym ,c))
                    choices))))) 
```

（如果第一个参数等于任何其他参数，则返回 true）

他认为它不能写成函数。这个功能不也有同样的功能吗？

```
(defun in (obj &rest choices)
  (reduce (lambda (x y)
            (or x (eql y obj)))
          choices
          :initial-value nil)) 
```

我看到的区别是宏只会评估参数，直到它找到一个 eql 参数。是这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T10:31:54.023

关键是，如果找到匹配项，宏版本会懒惰地评估参数（它扩展为 OR）停止。这不能通过函数来​​实现，因为 funcall 总是首先评估所有参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T11:22:18.020

```
> (macroexpand '(in 42
                    (long-computation-1)
                    (long-computation-2)
                    (long-computation-3)))

(LET ((#:G799 42))
  (OR (EQL #:G799 (LONG-COMPUTATION-1))
      (EQL #:G799 (LONG-COMPUTATION-2))
      (EQL #:G799 (LONG-COMPUTATION-3)))) 
```

要获得相同的效果，您需要编写：

```
(defun in (obj &rest choices)
  (reduce (lambda (x y)
             (or x (eql (funcall y) obj)))
          choices
          :initial-value nil)) 
```

并以这种方式使用它：

```
(in 42
    (function long-computation-1)
    (function long-computation-2)
    (function long-computation-3)) 
```

# javascript - Symfony2 和 jquery ajax

> ID：10570853
> 
> 赞同：3
> 
> 时间：2012-05-13T09:59:37.643
> 
> 标签：javascript, jquery, ajax, symfony, twig

我正在开发一个使用 Symfony2 和 Jquery 作为 JavaScript FW 的应用程序。我正在使用 Twig 作为模板。我从控制器渲染了一个模板，在使用模板中的光标进行选择后，我希望在使用提到的模板中的提交按钮提交时，将所选标签的值返回给控制器。

我使用下一个 Jquery 函数：

```
$("MatchedTag").click(function () 
 {
       $(this).toggleClass("highlight");

       var IdOfTag = this.id;  
       $.ajax({
          url: "{{ path('AcmeAcmeBundle_myaction') }}",
          type: "POST",
          data: { "tag_id" : idOfTag },
          success: function(data) {
             //(success) do something...
             //variable "data" contains data returned by the controller. 
          }
       });
}); 
```

我想在控制器中，在 myaction 中我应该使用类似 $_POST["tag_id"] 或 getrequest() ， bindrequest() 来获取值，但我真的不知道如何。有人可以给我一个例子。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T10:36:23.443

您可以尝试通过以下方式获取此参数：

```
 $request->request->get('tag_id'); 
```

**更新** *简单动作*

```
namespace Acme\HelloBundle\Controller;
use Symfony\Component\HttpFoundation\Response;

class HelloController
{
   public function indexAction($name)
   {
     $myParam = $request->request->get('tag_id');
     // write your code here
   }
} 
```

# qt - 当一个类被删除时，Qt中的信号是否会自动断开

> ID：10570857
> 
> 赞同：55
> 
> 时间：2012-05-13T09:59:56.503
> 
> 标签：qt, destructor, qt-signals

Qt 是否自动删除对象之间的连接，当一侧被删除时？

例如`connect (A .. , B ..)`，当A（指针）被删除或B被删除时，连接是否会断开？

是否有必要在析构函数中显式使用断开连接？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-13T10:02:33.753

是的，[`QObject::~QObject`](http://qt-project.org/doc/qt-4.8/qobject.html#dtor.QObject)析构函数负责：

> 进出对象的所有信号都会自动断开，并且对象的任何未决已发布事件都将从事件队列中删除。
> 但是，使用它通常[`deleteLater()`](http://qt-project.org/doc/qt-4.8/qobject.html#deleteLater)比直接删除 QObject 子类更安全。

不过要小心：

> **警告：**在挂起的事件等待传递时删除 QObject 可能会导致崩溃。如果 QObject 存在于与当前执行的线程不同的线程中，则不得直接删除它。改用 deleteLater() ，这将导致事件循环在所有未决事件都传递给它之后删除对象。

# android - Galaxy nexus 4.0.2 在 WebView.onTouchEvent 上出现异常

> ID：10570861
> 
> 赞同：2
> 
> 时间：2012-05-13T10:00:19.400
> 
> 标签：android, webview

我的 ACRA 的暗恋报告告诉我 Galaxy nexus 4.0.2 在我的应用程序中至少有 4 次出现以下异常。我怀疑用户在横向的 WebView 上进行了一些多点触控操作（从 ACRA 的报告中得知），但我不知道为什么会导致这种情况。

```
java.lang.IllegalArgumentException: pointerIndex out of range   
at android.view.MotionEvent.nativeGetPointerId(Native Method)   
at android.view.MotionEvent.getPointerId(MotionEvent.java:1927) 
at android.view.ScaleGestureDetector.onTouchEvent(ScaleGestureDetector.java:224)    
at android.webkit.WebView.handleMultiTouchInWebView(WebView.java:6530)  
at android.webkit.WebView$TouchEventQueue.handleQueuedMotionEvent(WebView.java:8088)    
at android.webkit.WebView$TouchEventQueue.enqueueTouchEvent(WebView.java:7986)  
at android.webkit.WebView.onTouchEvent(WebView.java:5963)   
at android.view.View.dispatchTouchEvent(View.java:5486) 
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1953)    
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1714)   
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1959)    
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1728)   
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1959)    
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1728)   
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1959)    
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1728)   
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1959)    
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1728)
at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1959)
at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1728)
at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1892)
at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1371)
at android.app.Activity.dispatchTouchEvent(Activity.java:2364)
at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1840)
at android.view.View.dispatchPointerEvent(View.java:5662)
at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:2863)
at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4340)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method) 
```

我从粉碎报告中看不到任何与我的代码相关的内容。我在我的应用程序的很多地方都使用了 WebView，但不确定哪里有问题。

我相信用户对此并不满意，他/她可能会认为我的应用程序设计不佳。有什么我可以做的吗？有人有这个问题吗？任何信息将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:06:35.483

Android 的 ITS 报告了同样的问题。WebView 相关的修复将在未来的版本中推出。截至目前，我们没有解决方法。

> WebView 相关问题已修复。不知道地图视图。另请注意，如果应用程序有一个触摸侦听器将一些但不是所有事件向下传递到 ScaleGestureDetector，则可能会出现此问题。ScaleGestureDetector 看到整个事件流很重要。
> 
> [问题 18990 - android - 意外异常：java.lang.IllegalArgumentException: pointerIndex out of range - Android - An Open Handset Alliance Project - Google Project Hosting](http://code.google.com/p/android/issues/detail?id=18990)

# android - 自定义元素和包名

> ID：10570863
> 
> 赞同：0
> 
> 时间：2012-05-13T10:00:38.843
> 
> 标签：android, custom-attributes

在 Android 中创建具有属性的自定义元素时，我需要将应用程序的命名空间放在布局中。

例如：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:whatever="http://schemas.android.com/apk/res/org.example.mypackage"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">

    <org.example.mypackage.MyCustomView
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:gravity="center"
      whatever:my_custom_attribute="Hello, world!" />
</LinearLayout> 
```

这是否还要求我在 Eclipse 中的项目结构与清单中定义的 Android 包的名称相同 - 根据示例？这也可以吗：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:whatever="http://schemas.android.com/apk/res/org.mycompany.myproduct"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">

    <org.example.mypackage.MyCustomView
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:gravity="center"
      whatever:my_custom_attribute="Hello, world!" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T10:29:17.897

它应该反映您的应用程序的包名称。所以像你一样使用它是正确的。

例如：

最后`xmlns:whatever="http://schemas.android.com/apk/res/org.mycompany.myproduct`一部分`org.mycompany.myproduct`应该和你的**包名**一样。并且您可以更改`xmlns:whatever`为任何类似的内容，`xmlns:theblitz`但请确保您确实`theblitz`在 xml.xml 中用作属性的前缀。

有关更多信息，请阅读[此](http://blog.infidian.com/2008/05/02/android-tutorial-42-passing-custom-variables-via-xml-resource-files/)

# android - Android拨打电话活动以检查预付费电话余额

> ID：10570871
> 
> 赞同：4
> 
> 时间：2012-05-13T10:01:56.903
> 
> 标签：android

我想做一个活动，我可以打电话给某个号码来检查我的预付费电话余额。在我的提供商中，例如 *555#，然后我会得到一个响应，例如“您的剩余电话信用额为 5 美元”。我想用这些数据（5 美元）保存在数据库中。

我只是一个初学者，有人知道如何进行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T10:28:32.217

~~您可以发出一个`CALL`意图（需要许可）并使用广播接收器来监听 SMS 响应（同样，需要许可）。~~

~~但是，这不是一个非常强大的解决方案，因为您必须检查 SMS 发件人 ID 和消息文本，将来可能会发生变化。~~

**编辑**

正如评论中所指出的，您需要为此使用 USSD 协议。这绝对是可能的，因为有一个应用程序可以做到这一点：[https](https://play.google.com/store/apps/details?id=com.iba.ussdchecker&hl=en) ://play.google.com/store/apps/details?id=com.iba.ussdchecker&hl=en 。

这些线程可能会有所帮助：

*   [在后台调用（并获得响应）USSD 代码？](https://stackoverflow.com/questions/4193343/call-and-get-the-response-for-a-ussd-code-in-the-background)
*   [如何在安卓上运行 USSD 命令？](https://stackoverflow.com/questions/7225100/how-to-run-ussd-commands-on-android)
*   [如何在 Android 上执行 USSD 请求？](https://stackoverflow.com/questions/5477597/how-is-it-possible-to-do-ussd-requests-on-android)

# delphi - 抑制 RemObjects SOAP 错误“不期望内容类型”

> ID：10570873
> 
> 赞同：1
> 
> 时间：2012-05-13T10:02:11.543
> 
> 标签：delphi, soap, delphi-xe2, remobjects

尝试使用 RemObjects SDK 创建一个使用 Web 服务的简单客户端，导入 WSDL，一切都很好，但是，当我尝试执行返回字符串的方法时，出现以下错误：

Project Project1.exe 引发异常类 EIdHTTPProtocolException，消息为 'HTTP/1.1 415 无法处理消息，因为内容类型为 'text/xml; charset=utf-8' 不是预期的类型 'application/soap+xml; 字符集=utf-8'.'.

不知道为什么会引发此异常，但我需要绕过它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T14:37:16.007

内容类型**application/soap+xml**表示 Web Service 使用**SOAP 1.2**。

> SOAP 1.2 的媒体类型已从 SOAP 1.1 中使用的 text/xml 更改为 application/soap+xml。

（来自[http://hadleynet.org/marc/whatsnew.html#S3.7.1](http://hadleynet.org/marc/whatsnew.html#S3.7.1)）

该错误消息表明您的 SOAP 客户端库使用 SOAP 1.1 而不是 SOAP 1.2。（WSDL 不指示服务器使用哪个 SOAP 版本，因此需要“手动”配置。）

验证您的客户端库是否支持 SOAP 1.2（大约在 2001 年推出），并激活它。

# ruby-on-rails - UTF-8 问题中的 Rails ActiveRecord 无效字节序列

> ID：10570875
> 
> 赞同：2
> 
> 时间：2012-05-13T10:02:27.607
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我正在使用 MSSQL 2005。

我有包含我的**zip**文件内容的**StringIO对象。**

 **这是我获取 zip 二进制数据的方法：

```
 stringio = Zip::ZipOutputStream::write_buffer do |zio|
        Eclaim.find_by_sql("SET TEXTSIZE 67108864")
        zio.put_next_entry("application.xml")
        #zio.write @claim_db[:xml]
        biblio = Nokogiri::XML('<?xml version="1.0" encoding="utf-8"?>' + @claim_db[:xml], &:noblanks)
        zio.write biblio.to_xml

        builder = Nokogiri::XML::Builder.new(:encoding => 'utf-8') do |xml|
            xml.documents {
                docs.where("ext not in (#{PROHIBITED_EXTS.collect{|v| "'#{v}'"}.join(', ')})").each{|doc|
                    zio.put_next_entry("#{doc[:materialtitle_id]}.#{doc[:ext]}")
                    zio.write doc[:efile]

                    xml.document(:id => doc[:materialtitle_id]) {
                        xml.title doc[:title]
                        xml.code doc[:code]
                        xml.filename "#{doc[:materialtitle_id]}.#{doc[:ext]}"
                        xml.extname doc[:ext]
                    }

                }
            }
        end

        zio.put_next_entry("docs.xml")
        zio.write builder.to_xml
    end

    stringio 
```

在我的**控制器**中，我尝试：

```
data.rewind
@claim.docs.create(
    :title => 'Some file',
    :ext => 'zip',
    :size => data.length,
    :receive_date => Time.now,
    :efile => data.sysread
) 
```

但是 Rails 抱怨**UTF-8 中的字节序列无效**

请帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T13:25:59.050

如果流配置为 UTF-8 流，则不能写入压缩二进制文件（可能包含*任何*值）。

我认为，`data`在写入之前设置为二进制流：

```
data.force_encoding "ASCII-8BIT" 
```

可能有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T10:55:30.317

什么是抱怨、ruby、ActiveRecord 或 SQL Server？我的猜测是 SQL Server。确保数据库中 efile 字段的数据类型是二进制 BLOB。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T14:39:49.977

您应该将问题分解为组成部分，并对较小的单元进行故障排除。消除复杂性，直到找到问题的根源。例如，您是否尝试过简单`Document.create`地使用控制台中的属性来消除您的控制器代码可能存在错误的可能性？类似的东西`Document.create :efile => File.read('sometiny.zip')`，然后从那里开始。

假设工作或中断，您的支持请求要简单得多，而且噪音与问题的比率也更低。现在我怀疑你的控制器代码，而不是 SQL Server 适配器或连接模式，因为我都已经测试了简单的二进制数据。假设上述方法不起作用，您可以转向检查较小的组件。

例如，`efile`列的数据类型是什么？在控制台中执行此操作以找出答案，`Document.columns_hash['efile']`然后查看`@sql_type`. 它是合适的`varbinary(max)`吗？

从那里继续，您在 SQL Server 适配器 TinyTDS 中使用什么连接模式？默认情况下，TinyTDS 会根据需要将所有内容转换为 UTF8，并且非常聪明。我对它进行了从二进制到许多不同编码的所有测试。顺便说一句，如果您使用的是 TinyTDS，您是否确保使用 libiconv 编译了 FreeTDS，以便它可以正确完成所有这些工作？`tsql -C`假设您的路径中有 FreeTDS 的二进制文件，您可以通过在控制台中执行以下操作轻松检查。这应该输出几行，寻找“iconv library：yes”。还要确保您运行的是 0.91 或更高版本！

最后，一点建议， SET TEXTSIZE 在那里是错误的。您只想在每个连接中执行一次。见这里[https://github.com/rails-sqlserver/activerecord-sqlserver-adapter#configure-connection--app-name](https://github.com/rails-sqlserver/activerecord-sqlserver-adapter#configure-connection--app-name)**

# asp.net-mvc - asp.net mvc 3 剃须刀和 html iframe

> ID：10570880
> 
> 赞同：0
> 
> 时间：2012-05-13T10:02:57.343
> 
> 标签：asp.net-mvc, asp.net-mvc-3, iframe, razor

我有一个页面，有一个按钮，它显示 iframe 在哪里是带有可点击行的小列表，如下所示：

```
<tr onclick="location.href = '@(Url.Action("Show", "Messages", new { id = item.FriendID }))'"> 
```

所以我的问题是当用户点击 tr 重定向工作但在 i 框架上我想重定向我的父页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T15:23:10.870

使用 top.href 或 parent.href 代替 location.href

```
<tr onclick="top.href = '@(Url.Action("Show", "Messages", new { id = item.FriendID }))'"> 
```

# html - HTML CSS：修复和拉伸宽度两列布局

> ID：10570883
> 
> 赞同：5
> 
> 时间：2012-05-13T10:03:59.417
> 
> 标签：html, css, layout

```
<div style="width: 800px; height: 600px">

    <div style="float:left; width: 100px">
        left fixed-width column
    </div>
    <div style="???">
        right stretching column (the width should be 700px in this case.)
    </div>

</div> 
```

创建两列布局的标准方法是什么，其中左侧是固定大小，右侧是伸展的？

*   我希望两列的样式都是独立的。我在这里找到了几个解决方案，但是如果我更改左列的宽度，则需要同时更改右列的样式（例如边距）。

*   我不需要支持旧浏览器。如果它是标准的，那就没问题了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T10:06:52.677

应用于`overflow: hidden`第二个 div。这将引入一个新的[块格式化上下文](http://www.w3.org/TR/CSS21/visuren.html#block-formatting)。[您可以在Can overflow:hidden 影响布局](https://stackoverflow.com/questions/6128139/can-overflowhidden-affect-layout/6128264#6128264)中找到更多信息？.

[jsFiddle 演示](http://jsfiddle.net/ruYjT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T21:04:33.167

您还可以使用 div 来包装两列（如果您愿意，将它们作为一个块居中） - 然后设置第一列的宽度，并在第二列上使用绝对定位使其左边框成为第一列的边缘它的右边界是包装的边缘。

```
<div style="width:auto; min-width:500px; margin:30px; position:relative; top:0px;">

<div style="width:100px; height:100px; padding:15px; background-color:aqua;">
</div>

<div style="height:100px; padding:15px; position:absolute; top:0px; left:100px; right:0px;  background-color:blue;">
</div>

</div> 
```

[JSFiddle](http://jsfiddle.net/G8kca/)

# java - 如何从语言环境中获取当前时间和时区？

> ID：10570884
> 
> 赞同：22
> 
> 时间：2012-05-13T10:04:05.940
> 
> 标签：java, time, timezone, locale

我有这个奇怪的问题，当我创建一个带有语言环境的日历时，时区只是恢复到本地的

```
public void start(Locale locale){
    String s = locale.getDisplayName(); 
    System.err.println(s);
    Calendar c = new GregorianCalendar(locale);
    System.err.println(c.getTimeZone());
} 
```

这是输出：

```
 español (Argentina)
 sun.util.calendar.ZoneInfo[id="Europe/Bucharest", //etc more useless date here.... 
```

我怎样才能从特定的语言环境中获得正确的时间？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-13T10:53:06.167

简短的回答：你不能。

长答案：没有“区域设置的适当时区”之类的东西。那只是因为有几个国家有多个时区（例如美国）。时区是一个不同的概念。

无论如何，您正在寻求解决您的问题。我猜您正在编写一个 Web 应用程序，并且您看到时区正在恢复为服务器默认值。这是典型的情况。两者都`Locale.getDefault()`将`TimeZone.getDefault()`返回与服务器相关的信息。JVM 无法知道“正确的”时区。所以你对此能做些什么？

1.  您可以将时区信息添加到用户配置文件（如果有），或创建时区组合框（以便用户可以在运行时切换）。然后您可以为实例分配适当的对象`DateFormat`，它会自动转换时区。
2.  [您可以通过 JavaScript 日期对象的getTimezoneOffset()](http://www.w3schools.com/jsref/jsref_gettimezoneoffset.asp)函数从客户端读取***当前***时区偏移量，并以某种方式（AJAX）将其发送到服务器。这种方法的问题是有几个时区具有该偏移量，并且所选时区可能不适合其他日期。当然，您可以通过轮询时间更改日期周围的数据来猜测时区，但这可能不是您想要做的。
3.  您可以将未格式化的时间发送给客户端（例如，编写为[ISO 8601 日期时间格式](http://en.wikipedia.org/wiki/ISO_8601)或与UTC 相关[的纪元的 Unix 时间）并为您设置](http://en.wikipedia.org/wiki/Unix_time)[Globalize](https://github.com/jquery/globalize)或[Dojo](http://dojotoolkit.org/)格式的日期和时间。

在这三个可能的选择中，我总是选择第一。通过将时区信息放入用户个人资料中，您可以确定他/她的首选时区是什么，而不管他们当前的网络浏览器等。请记住一些用户可能希望在访问其他国家/地区时使用您的应用程序...

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-12-27T06:49:22.203

# 语言环境和时区是正交问题

## `Locale`

A[`Locale`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Locale.html)代表一对：

*   一种**人类语言**，例如法语、英语或汉语。
*   一组**文化规范**，用于决定诸如大小写、缩写等格式问题、日期中的日-月-年等元素的顺序以及使用逗号与句号作为小数分隔符等问题。

**`Locale`不是地域*的***。虽然`Locale`可以使用国家或地区作为代表文化规范的一种方式，但这并不意味着用户在特定的地理区域。例如，一位来自魁北克的工程师在日本东京的一次会议上将使用语言环境，`Locale.CANADA_FRENCH`但她的时区可能是`Asia/Tokyo`她旅行期间的时间。

## `ZoneId`

[时区](https://en.wikipedia.org/wiki/Time_zone)[`ZoneId`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/ZoneId.html)表示过去、现在和未来对特定地区人民使用的[UTC 偏移量](https://en.wikipedia.org/wiki/UTC_offset)变化的历史。偏移量只是 UTC 使用的本初子午线之前或之后的几个小时-分钟-秒。世界各地的政治家都表现出经常重新定义他们的时区和改变他们的管辖区使用的偏移量的倾向。事实上，那些采用愚蠢的夏令时 (DST) 的地区每年都会改变他们的偏移量两次，大约每六个月一次。

➥ 所以，不，你不能从给定的语言环境中获得当前时间或时区。

* * *

> 当我创建带有语言环境的日历时，时区只是恢复为本地日历

您正在使用现在遗留的糟糕的日期时间类，被JSR 310 定义的现代*java.time类所取代。*

要获取 UTC 中的当前时刻（零时分秒的偏移量），请使用`Instant`. 根据定义， An`Instant`始终采用 UTC。

```
Instant instant = Instant.now() ;  // Capture the current moment in UTC. 
```

如果您想要特定时区的当前时刻，请指定`ZoneId`以获取`ZonedDateTime`对象。

```
ZoneId z = ZoneId.of( "Asia/Tokyo" ) ;
ZonedDateTime zdt = ZonedDateTime.now( z ) ;  // Capture the current moment as seen in the wall-clock time used by the people of a particular region. 
```

至于知道要申请的时区，正如我上面所说，您必须：

*   使用默认值 ( [`ZoneId.systemDefault`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/ZoneId.html#systemDefault()))，或者……</li>
*   与用户确认。

您可以通过调用获取已知时区列表[`ZoneId.getAvailableZoneIds`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/ZoneId.html#getAvailableZoneIds())。

> `Calendar c = new GregorianCalendar( locale ) ;`

`GregorianCalendar`你可能会被这个使用a 的构造函数弄糊涂，这是可以`Locale`理解的。

此构造函数是遗留日期时间类中发现的*许多糟糕且不正确的设计决策之一。*坦率地说，这些遗留类非常糟糕，是由不了解日期时间处理的复杂性和微妙性的人设计的。[Sun、Oracle 和 JCP 社区决定](https://jcp.org/en/jsr/detail?id=310)用*java.time*取代它们是有充分理由的。

`Locale`在生成表示显示给用户的日期时间对象值的文本时，与时区相交。A`Locale`指定用于翻译月份名称、星期几名称等的人类语言。并`Locale`规定了决定诸如缩写月份或星期几（名称是否大写？是否附加了句号？）、排序日、月和年等问题的文化规范。

# xcode - Xcode 在点击时切换到 IBaction 代码

> ID：10570886
> 
> 赞同：0
> 
> 时间：2012-05-13T10:04:19.637
> 
> 标签：xcode, xcode4

在 Visual Studio 中，可以选择窗体上的控件并通过单击控件事件切换到事件代码。是否可以在 Connections Inspector 中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T14:50:37.103

没有办法像 Visual Studio 那样做。

# python - imaplib - Gmail 中存档/所有邮件的正确文件夹名称是什么？

> ID：10570889
> 
> 赞同：4
> 
> 时间：2012-05-13T10:04:49.807
> 
> 标签：python, email, gmail, imaplib

我有一个脚本，可以将 Gmail 中的所有电子邮件导出为文本文件。

它适用于您选择文件夹的这一行：

```
mail.select("inbox") 
```

但我不确定 Gmail 存档的名称是什么，所有电子邮件都存储在其中。我试过存档和所有邮件和东西，但没有运气。

有谁知道正确的名字吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-13T18:07:18.503

解决了。

它是`[Gmail]/All Mail`，或者，如果您像我一样是 Gmail UK 用户，它可能是`[Google Mail]/All Mail`，因为由于商标问题，Gmail 在英国曾经被称为 Google Mail。

如果您这样做是为了一般用途，我建议您测试以查看是否`[Gmail]/All Mail`有效（最常见），如果不测试`[Google Mail]/All Mail`.

最后一个非常适合我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T11:51:27.867

这：

[https://github.com/goerz/gmail_archive.py/blob/master/libgmail/lgconstants.py](https://github.com/goerz/gmail_archive.py/blob/master/libgmail/lgconstants.py)

似乎表明它是`all`.

# mongodb - MongoDB：对多个键执行 $inc

> ID：10570890
> 
> 赞同：1
> 
> 时间：2012-05-13T10:04:53.413
> 
> 标签：mongodb, mongodb-php

我需要帮助增加*参与者*中所有键的值，而不必知道其中键的名称。

```
> db.conversations.findOne()

{
"_id" : ObjectId("4faf74b238ba278704000000"),
"participants" : {
    "4f81eab338ba27c011000001" : NumberLong(2),
    "4f78497938ba27bf11000002" : NumberLong(2)
}
} 
```

我试过类似的东西

```
$mongodb->conversations->update(array('_id' => new \MongoId($objectId)), array('$inc' => array('participants' => 1))); 
```

无济于事...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T10:40:17.810

您需要重新设计架构。拥有“随机键名”绝不是一个好主意。即使 MongoDB 是无模式的，它仍然意味着您需要定义键名。您应该将架构更改为：

```
{
    "_id" : ObjectId("4faf74b238ba278704000000"),
    "participants" : [
        { _id: "4f81eab338ba27c011000001", count: NumberLong(2) },
        { _id: "4f78497938ba27bf11000002", count: NumberLong(2) }
    ]
} 
```

遗憾的是，即使这样，您也无法在一个命令中更新所有嵌入的计数。目前有一个开放的功能请求：[https ://jira.mongodb.org/browse/SERVER-1243](https://jira.mongodb.org/browse/SERVER-1243)

为了仍然更新所有内容，您应该：

*   查询文档
*   更新客户端的所有计数
*   再次存储文档

为了防止出现这种情况，请查看[“比较和交换”](http://www.mongodb.org/display/DOCS/Atomic+Operations#AtomicOperations-%22UpdateifCurrent%22)和以下段落。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T17:50:52.650

在当前版本的 MongoDB 中，不可能一次更新所有嵌套元素。所以我可以建议使用“foreach {}”。

阅读相关主题：[如何在 mongodb 中更新多个数组元素](https://stackoverflow.com/questions/4669178/how-to-update-multiple-array-elements-in-mongodb)

我希望这个功能将在下一个版本中实现。

# python - 任意阶算术根的提取

> ID：10570891
> 
> 赞同：1
> 
> 时间：2012-05-13T10:04:56.873
> 
> 标签：python, math

如何在Python中提取任意度数的算术根？我知道那个算法：

```
z = pow(x,(1/N)) 
```

它是否正确？这是唯一的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T10:08:57.650

这确实是要走的路。但是，您需要使用`1.0/N`来确保浮点除法（除非`N`始终是浮点数）：

```
>>> import math
>>> math.pow(27, 1/3)
1.0
>>> math.pow(27, 1.0/3)
3.0
>>> math.pow(27, 1/3.0)
3.0 
```

您还可以[`from __future__ import division`](http://docs.python.org/library/__future__.html)用来制作`/`“常规”除法运算符（对于整数除法，您将使用`//`）：

```
>>> from __future__ import division
>>> import math
>>> math.pow(27, 1/3)
3.0 
```

`math.pow(x, y)`你也可以使用运算符来代替`x ** y`：

```
>>> 27**(1.0/3)
3.0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T10:11:36.503

您可以使用 ** 运算符

```
 >>>x = 32
    >>>n = 5
    >>>x**(1.0/n)
    2.0 
```

# java - java中接口和抽象接口的区别

> ID：10570894
> 
> 赞同：2
> 
> 时间：2012-05-13T10:05:38.993
> 
> 标签：java, interface, abstract

正如标题所说。Java中的接口和抽象接口有什么区别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T10:06:28.510

Java中没有抽象接口之类的东西（因为接口默认是抽象的），有抽象类。

抽象类和接口之间的主要区别在于，抽象类是继承（扩展）的，就像普通类一样，因此您不能并行扩展其中两个，而可以同时实现多个接口。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T10:08:15.397

在使用 Java 接口时，abstract 关键字已过时，因为根据定义，java 接口是抽象的；它不包含实现，只包含定义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T13:05:31.110

接口已经是抽象的。请记住与 OOP 相关的关键术语“抽象”意味着您不能创建自身的实例，您只能将其用作基类，您可以从中派生自己的对象。

接口本质上是抽象的，因为它们本身不定义任何代码，但必须由类实现，然后提供接口中方法的功能。

因此，您可以将“抽象”一词添加到界面的前面，并且不会发生任何不同的情况。即使在不久前的 java 文档中，作者也犯了一个错误，在接口的措辞中包含“抽象”。

但是你只需要知道所有接口都是抽象的，没有区别。

[检查此链接](http://www.dreamincode.net/forums/topic/95973-can-you-tell-me-the-difference-between-interface-and-abstract-interfac/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-13T10:14:54.203

抽象类是至少一个方法没有实现的类。这就是为什么`abstract`在编写方法头之前必须使用关键字“”的原因。

接口反对的是一个所有方法都是抽象的类，这就是为什么不需要使用`abstract`关键字的原因。

# sencha-touch-2 - 清空煎茶 Touch 2 列表

> ID：10570896
> 
> 赞同：2
> 
> 时间：2012-05-13T10:05:48.543
> 
> 标签：sencha-touch-2

**[完整代码的 Git Ropo](https://github.com/jiewmeng/-scraps--Learning-Sencha-Touch-2)**

我已经定义：

/应用程序/模型/待办事项：

```
Ext.define('Test.model.Todo', {
    extend: 'Ext.data.Model',
    config: {
        fields: [
            { name: 'title', type: 'string' },
            { name: 'priority', type: 'integer', defaultValue: 0 },
            { name: 'done', type: 'boolean' }
        ]
    }
}); 
```

/app/store/TodoStore

```
Ext.define('Test.store.TodoStore', {
    extend: 'Ext.data.Store',
    requires: [ 'Test.model.Todo' ],
    config: {
        model: 'Test.model.Todo',
        data: [
            { title: 'Todo Item 1', priority: 0, done: false },
            { title: 'Todo Item 2', priority: 0, done: false },
            { title: 'Todo Item 3', priority: 0, done: false },
            { title: 'Todo Item 4', priority: 0, done: false },
            { title: 'Todo Item 5', priority: 0, done: false },
            { title: 'Todo Item 6', priority: 0, done: false }
        ]
    }
}); 
```

现在，如果我只是`store: 'TodoStore'`在列表中使用，我会得到

> [WARN][Ext.dataview.List#applyStore] 找不到指定的Store

所以我也添加了 app.js

```
Ext.application({
    name: 'Test',
    ...
    stores: [ 'TodoStore' ], 
```

警告消失了，但我仍然有一个空白列表。我错过了什么吗？

* * *

**下面是旧帖**

```
Ext.define("SimpleTodo.view.Main", {
    extend: 'Ext.Panel',
    requires: [ 'Ext.TitleBar', 'Ext.dataview.List' ],
    config: {
        styleHtmlContent: true,
        items: [
            ...
            {
                xtype: 'list',
                itemTpl: '{name}',
                store: {
                    fields: ['name'],
                    data: [
                        { name: 'Todo 1' },
                        { name: 'Todo 2' },
                        { name: 'Todo 3' },
                        { name: 'Todo 4' },
                        { name: 'Todo 5' },
                        { name: 'Todo 6' }
                    ]
                }

            }
        ]
    }
}); 
```

得到：

> 在 instanceof 检查中期望一个函数，但得到了`#<Object>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T13:25:25.787

这是因为 Sencha Touch 不了解您定义商店的方式。

你应该做这样的事情，包括 3 个步骤：

定义模型

```
Ext.define('SimpleTodo.model.listitem',{
    extend: 'Ext.data.Model',
    config: {
        fields: [
            {name: 'name', type: 'string'},
        ],
    }
}) 
```

定义商店：

```
Ext.define('SimpleTodo.store.listitems', {
    extend: 'Ext.data.Store',

    config: {
        model: 'SimpleTodo.model.listitem',
        data: [
             { name: 'Todo 1' },
                        { name: 'Todo 2' },
                        { name: 'Todo 3' },
                        { name: 'Todo 4' },
                        { name: 'Todo 5' },
                        { name: 'Todo 6' }
        ],
    }
}); 
```

最后，在您的列表中：

```
store: 'listitems' 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T21:27:57.013

事实证明，您不能在面板中定义列表（但是，此视图可以是选项卡面板的一部分）。所以：

```
Ext.define("SimpleTodo.view.Main", {
    extend: 'Ext.dataview.List',
    config: {
        title: 'Simple Todo',
        itemTpl: '{name}',
        store: 'myStore'
    }
} 
```

**更新：**这是一个带有标题栏的容器中的列表示例。注意`layout: 'vbox'`容器`flex: 1`上的 和列表上的 。这些都是正确显示列表所必需的。

```
Ext.define("SimpleTodo.view.Main", {
    extend: 'Ext.Container',
    config: {
        layout: 'vbox',

        items: [
            {
                xtype: 'titlebar',
                docked: 'top',
                title: 'Simple ToDo'
            },
            {
                xtype: 'listcmp',
                flex: 1
            }
        ]
    }
} 
```

使用包含您的列表定义的单独视图。例如：

```
Ext.define('SimpleTodo.view.ListCmp', {
    extend: 'Ext.List',
    xtype: 'listcmp',

    config: {
        store: 'SimpleToDo',
        itemTpl: '{title}'
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-15T15:23:50.823

尝试提供商店的完整类路径：

```
store: 'SimpleTodo.store.listitems', 
```

我想框架仅通过类/文件名不知道您指的是什么类。

如果仍然不工作，我会怀疑列表没有显示什么，所以尝试配置列表 itemTpl 配置：

```
itemTpl: '{name}', 
```

# javascript - HTML5 视频样式的 CSS？

> ID：10570902
> 
> 赞同：3
> 
> 时间：2012-05-13T10:06:56.527
> 
> 标签：javascript, css, html, html5-video

我想知道是否有可能使用 CSS 或 JS 设置 HTML5 视频播放器的样式？喜欢的不仅仅是边框和背景，如果是这样，您可以使用哪些属性...？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T10:53:02.457

如果您想设置播放器控件的样式，您需要自己实现它们。这里有一个[使用 jQuery 实现自定义 HTML5 视频播放器控件](http://dev.opera.com/articles/view/custom-html5-video-player-with-css3-and-jquery/)的指南，应该足以让您入门。您还可以考虑使用众多[HTML5 视频库](http://html5video.org/wiki/HTML5_Player_Comparison)之一。这些将为您处理自定义播放器控件逻辑，并允许您将控件样式设置为您需要的级别。

# jquery - 使用 jQuery 根据第一个选择列表选项更改第二个选择列表

> ID：10570904
> 
> 赞同：40
> 
> 时间：2012-05-13T10:07:31.293
> 
> 标签：jquery, html, select

我有两个选择：

```
<select name="select1" id="select1">
    <option value="1">Fruit</option>
    <option value="2">Animal</option>
    <option value="3">Bird</option>
    <option value="4">Car</option>
</select>

<select name="select2" id="select2">
    <option value="1">Banana</option>
    <option value="1">Apple</option>
    <option value="1">Orange</option>
    <option value="2">Wolf</option>
    <option value="2">Fox</option>
    <option value="2">Bear</option>
    <option value="3">Eagle</option>
    <option value="3">Hawk</option>
    <option value="4">BWM<option>
</select> 
```

如果我在第一个选择中选择 Fruit，我该如何使用 jQuery 执行此操作？第二个选择只会显示水果 - 香蕉、苹果、橙子。如果我在第一个选择中选择鸟，第二个选择将只显示鸟类 - 鹰、鹰。等等...

我试图用这段 jQuery 代码来做到这一点：

```
$("#select1").change(function() {
    var id = $(this).val();
    $('#select2 option[value!='+id+']').remove();
}); 
```

不幸的是，它几乎删除了所有内容，我不知道如何恢复一些选项。我也读过一些关于克隆的东西，但我不知道在这种情况下如何使用它。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-05-13T10:36:36.127

```
$("#select1").change(function() {
  if ($(this).data('options') === undefined) {
    /*Taking an array of all options-2 and kind of embedding it on the select1*/
    $(this).data('options', $('#select2 option').clone());
  }
  var id = $(this).val();
  var options = $(this).data('options').filter('[value=' + id + ']');
  $('#select2').html(options);
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
<select name="select1" id="select1">
  <option value="1">Fruit</option>
  <option value="2">Animal</option>
  <option value="3">Bird</option>
  <option value="4">Car</option>
</select>

<select name="select2" id="select2">
  <option value="1">Banana</option>
  <option value="1">Apple</option>
  <option value="1">Orange</option>
  <option value="2">Wolf</option>
  <option value="2">Fox</option>
  <option value="2">Bear</option>
  <option value="3">Eagle</option>
  <option value="3">Hawk</option>
  <option value="4">BWM<option>
</select>
```

使用 jQuery [data()](https://api.jquery.com/jquery.data/)存储数据

> 我猜隐藏元素不能跨浏览器工作（2012），我自己没有测试过。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-16T15:19:38.683

我想制作一个使用来自单独 JSON 文件的 $.getJSON() 的版本。

演示：[**这里**](http://www.quirkscode.com/flat/forumPosts/src/updateSelect/updateSelect.html)

JavaScript：

```
$(document).ready(function () {
    "use strict";

    var selectData, $states;

    function updateSelects() {
        var cities = $.map(selectData[this.value], function (city) {
            return $("<option />").text(city);
        });
        $("#city_names").empty().append(cities);
    }

    $.getJSON("updateSelect.json", function (data) {
        var state;
        selectData = data;
        $states = $("#us_states").on("change", updateSelects);
        for (state in selectData) {
            $("<option />").text(state).appendTo($states);
        }
        $states.change();
    });
}); 
```

HTML：

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
</head>
<body>
    <select id="us_states"></select>
    <select id="city_names"></select>
    <script type="text/javascript" src="updateSelect.js"></script>
</body>
</html> 
```

JSON：

```
{
    "NE": [
        "Smallville",
        "Bigville"
    ],
    "CA": [
        "Sunnyvale",
        "Druryburg",
        "Vickslake"
    ],
    "MI": [
        "Lakeside",
        "Fireside",
        "Chatsville"
    ]
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-13T10:19:09.060

将 all`#select2`的选项存储在变量中，根据 in 中所选选项的值过滤它们，并使用in`#select1`设置它们：`.html()``#select2`

```
var $select1 = $( '#select1' ),
    $select2 = $( '#select2' ),
    $options = $select2.find( 'option' );

$select1.on('change', function() {
    $select2.html($options.filter('[value="' + this.value + '"]'));
}).trigger('change'); 
```

### [这是一个小提琴](https://jsfiddle.net/fwv18zo1/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-23T19:21:10.903

我以 sabithpocker 的想法为基础，制作了一个更通用的版本，让您可以从给定的触发器控制多个选择框。

我为我想要控制的选择框分配了类名“可切换”，并像这样克隆它们：

```
$j(this).data('options',$j('select.switchable option').clone()); 
```

并为可切换选择使用特定的命名约定，这也可以转换为类。在我的例子中，“category”和“issuer”是选择名称，“category_2”和“issuer_1”是类名。

然后我在 select.switchable 组上运行了一个 $.each ，在制作了 $(this) 的副本以在函数内部使用之后：

```
var that = this;
$j("select.switchable").each(function() { 
    var thisname = $j(this).attr('name');
    var theseoptions = $j(that).data('options').filter( '.' + thisname + '_' + id );
    $j(this).html(theseoptions);
}); 
```

通过在您要控制的那些上使用类名，该函数将安全地忽略页面上其他地方的其他选择（例如 Fiddle 示例中的最后一个）。

这是带有完整代码[的小提琴：](http://jsfiddle.net/tommcgee/TY76W/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-11T15:15:16.777

所有这些方法都很棒。我发现了另一个简单的资源，它是使用 AJAX 的“onchange”创建动态表单的一个很好的例子。

[http://www.w3schools.com/php/php_ajax_database.asp](http://www.w3schools.com/php/php_ajax_database.asp)

我只是将文本表输出修改为基于第一个下拉列表的选择填充的另一个选择下拉列表。对于我的应用程序，用户将选择一个州，然后第二个下拉列表将填充所选州的城市。很像上面的 JSON 示例，但使用 php 和 mysql。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-25T11:34:58.810

我发现解决方案如下......完美地为我工作:)

```
$(document).ready(function(){
$("#selectbox1").change(function() {
    var id = $(this).val();
    $("#selectbox2").val(id);
 });   }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-20T13:24:20.327

尝试使用它：

下拉框取决于在另一个下拉框中选择的选项。使用 jQuery 根据第一个选择列表选项更改第二个选择列表。

```
<asp:HiddenField ID="hdfServiceId" ClientIDMode="Static" runat="server" Value="0" />
<asp:TextBox ID="txtOfferId" CssClass="hidden" ClientIDMode="Static" runat="server" Text="0" />
<asp:HiddenField ID="SelectedhdfServiceId" ClientIDMode="Static" runat="server" Value="0" />
<asp:HiddenField ID="SelectedhdfOfferId" ClientIDMode="Static" runat="server" Value="0" />

<div class="col-lg-2 col-md-2 col-sm-12">
    <span>Service</span>
    <asp:DropDownList ID="ddlService" ClientIDMode="Static" runat="server" CssClass="form-control">
    </asp:DropDownList>
</div>
<div class="col-lg-2 col-md-2 col-sm-12">
    <span>Offer</span>
    <asp:DropDownList ID="ddlOffer" ClientIDMode="Static" runat="server" CssClass="form-control">
    </asp:DropDownList>
</div> 
```

在您的网页中使用 jQuery 库。

```
<script type="text/javascript">
    $(document).ready(function () {
        ucBindOfferByService();
        $("#ddlOffer").val($('#txtOfferId').val());
    });

    $('#ddlOffer').on('change', function () {
        $("#txtOfferId").val($('#ddlOffer').val());
    });

    $('#ddlService').on('change', function () {
        $("#SelectedhdfOfferId").val("0");
        SetServiceIds();
        var SelectedServiceId = $('#ddlService').val();
        $("#SelectedhdfServiceId").val(SelectedServiceId);
        if (SelectedServiceId == '0') {
        }
        ucBindOfferByService();
        SetOfferIds();
    });

    function ucBindOfferByService() {
        GetVendorOffer();
        var SelectedServiceId = $('#ddlService').val();
        if (SelectedServiceId == '0') {
            $("#ddlOffer").empty();
            $("#ddlOffer").append($("<option></option>").val("0").html("All"));
        }
        else {
            $("#ddlOffer").empty();
            $(document.ucVendorServiceList).each(function () {
                if ($("#ddlOffer").html().length == "0") {
                    $("#ddlOffer").append($("<option></option>").val("0").html("All"));
                }
                $("#ddlOffer").append($("<option></option>").val(this.OfferId).html(this.OfferName));
            });
        }
    }

    function GetVendorOffer() {
        var param = JSON.stringify({ UserId: $('#hdfUserId').val(), ServiceId: $('#ddlService').val() });
        AjaxCall("DemoPage.aspx", "GetOfferList", param, OnGetOfferList, AjaxCallError);
    }

    function OnGetOfferList(response) {
        if (response.d.length > 0)
            document.ucVendorServiceList = JSON.parse(response.d);
    }

    function SetServiceIds() {
        var SelectedServiceId = $('#ddlService').val();
        var ServiceIdCSV = ',';
        if (SelectedServiceId == '0') {
            $('#ddlService > option').each(function () {

                ServiceIdCSV += $(this).val() + ',';
            });
        }
        else {
            ServiceIdCSV += SelectedServiceId + ',';
        }
        $("#hdfServiceId").val(ServiceIdCSV);
    }

    function SetOfferIds() {
        var SelectedServiceId = $('#ddlService').val();
        var OfferIdCSV = ',';
        if (SelectedServiceId == '0') {
            $(document.ucVendorServiceList).each(function () {
                OfferIdCSV += this.OfferId + ',';
            });
        }
        else {
            var SelectedOfferId = $('#ddlOffer').val();
            if (SelectedOfferId == "0") {
                $('#ddlOffer > option').each(function () {
                    OfferIdCSV += $(this).val() + ',';
                });
            }
            else {
                OfferIdCSV += SelectedOfferId + ',';
            }
        }
    }
</script> 
```

在您的网页中使用后端代码。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        ServiceList();
    }
}

public void ServiceList()
{
    ManageReport manageReport = new ManageReport();
    DataTable ServiceList = new DataTable();
    ServiceList = manageReport.GetServiceList();
    ddlService.DataSource = ServiceList;
    ddlService.DataTextField = "serviceName";
    ddlService.DataValueField = "serviceId";
    ddlService.DataBind();
    ddlService.Items.Insert(0, new ListItem("All", "0"));
}

public DataTable GetServiceList()
{
    SqlParameter[] PM = new SqlParameter[]
    {
        new SqlParameter("@Mode"    ,"Mode_Name"    ),
        new SqlParameter("@UserID"  ,UserId         )
    };
    return SqlHelper.ExecuteDataset(new SqlConnection(SqlHelper.GetConnectionString()), CommandType.StoredProcedure, "Sp_Name", PM).Tables[0];
}

[WebMethod]
public static String GetOfferList(int UserId, String ServiceId)
{
    var sOfferList = "";
    try
    {
        CommonUtility utility = new CommonUtility();
        ManageReport manageReport = new ManageReport();
        manageReport.UserId = UserId;
        manageReport.ServiceId = ServiceId;
        DataSet dsOfferList = manageReport.GetOfferList();
        if (utility.ValidateDataSet(dsOfferList))
        {
            //DataRow dr = dsEmployerUserDepartment.Tables[0].NewRow();
            //dr[0] = "0";
            // dr[1] = "All";
            //dsEmployerUserDepartment.Tables[0].Rows.InsertAt(dr, 0);
            sOfferList = utility.ConvertToJSON(dsOfferList.Tables[0]);
        }
        return sOfferList;
    }
    catch (Exception ex)
    {
        return "Error Message: " + ex.Message;
    }
}

public DataSet GetOfferList()
{
    SqlParameter[] sqlParameter = new SqlParameter[]
        {                                                                     
            new SqlParameter("@Mode"        ,"Mode_Name"    ),
            new SqlParameter("@UserID"      ,UserId         ),
            new SqlParameter("@ServiceId"   ,ServiceId      )
        };
    return SqlHelper.ExecuteDataset(new SqlConnection(SqlHelper.GetConnectionString()), CommandType.StoredProcedure, "Sp_Name", sqlParameter);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-16T07:04:44.430

在选定的答案上，我看到最初加载页面时，第一个选项的选择是预先固定的，因此在选择 2 中提供了所有类别的选项。您可以通过在两个选择中添加以下第一个选项来避免这种情况标签：- `<option value="none" selected disabled hidden>Select an Option</option>`

```
<select name="select1" id="select1">
<option value="none" selected disabled hidden>Select an Option</option>
<option value="1">Fruit</option>
  <option value="2">Animal</option>
  <option value="3">Bird</option>
  <option value="4">Car</option>
</select>

<select name="select2" id="select2">
<option value="none" selected disabled hidden>Select an Option</option>
  <option value="1">Banana</option>
  <option value="1">Apple</option>
  <option value="1">Orange</option>
  <option value="2">Wolf</option>
  <option value="2">Fox</option>
  <option value="2">Bear</option>
  <option value="3">Eagle</option>
  <option value="3">Hawk</option>
  <option value="4">BWM<option>
</select> 
```

# android - 如何将 imagebutton 的大小设置为与其源图像完全相同的大小？

> ID：10570905
> 
> 赞同：1
> 
> 时间：2012-05-13T10:07:37.747
> 
> 标签：android, android-layout, android-widget, imagebutton

我以编程方式创建了一组 ImageButton 视图（具有透明背景）作为我的应用程序中定义的静态地图 (ImageView) 上的地图引脚。在地图上的某些位置，有一些彼此非常接近的 ImageButton。我注意到在这种情况下，即使我单击按钮 1，应用程序也会认为按钮 2 被单击，因此继续运行与按钮 2 关联的活动。关闭这些按钮的透明度表明按钮实际上是比相关的源图像大得多，因此其中一些按钮已经重叠。

如何定义图像按钮，使它们的大小与源图像的大小相同？

以下是 onCreate() 下相关代码的快照：

```
 ImageButton btnMapLoc = new ImageButton(ResultMapActivity.this);
    RelativeLayout.LayoutParams vp = new RelativeLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    vp.setMargins(x,y,0,0);  // [left, top, right, bottom] - in pixels
    btnMapLoc.setLayoutParams(vp);
    //btnMapLoc.setBackgroundColor(Color.TRANSPARENT);
    btnMapLoc.requestLayout();

    String imgNameNormal = "map_loc_" + mapLocation + "_normal"; //e.g. map_loc_10_normal
    int idNormal = getResources().getIdentifier(imgNameNormal,"drawable",getPackageName());
    String imgNameClick = "map_loc_" + mapLocation + "_click"; //e.g. map_loc_10_click
    int idClick = getResources().getIdentifier(imgNameClick,"drawable",getPackageName());
    btnMapLoc.setImageResource(idNormal);
    rl.addView(btnMapLoc, vp);

    // Change image as the state of the button changed (normal vs. clicked)
    StateListDrawable states = new StateListDrawable();
    states.addState(new int[] {-android.R.attr.state_pressed},getResources().getDrawable(idNormal)); // Note the "-"
    states.addState(new int[] {android.R.attr.state_pressed},getResources().getDrawable(idClick));
    btnMapLoc.setImageDrawable(states); 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T11:27:47.900

试试这个，它对我有用。

```
Bitmap image = BitmapFactory.decodeResource(getResources(),R.drawable.testbild);            

ImageButton btnMapLoc = (ImageButton) findViewById(R.id.imageButton1);        
LayoutParams lp = new LayoutParams(image.getWidth(), image.getHeight());
btnMapLoc.setLayoutParams(lp);

btnMapLoc.setImageBitmap(image); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T10:26:12.797

我会简单地使用一个`ImageView`代替，默认情况下它与其中的图像大小完全相同。或者有什么你需要的`ImageButton`可以做和不能做的事情`ImageView`吗？

# security - 如何唯一识别笔记本及其连接的无线接入点？

> ID：10570911
> 
> 赞同：4
> 
> 时间：2012-05-13T10:09:06.343
> 
> 标签：security, networking, wireless, identifier, mac-address

有一个笔记本 A 和一个无线接入点 B。

场景是： 1\. 笔记本 A 成功连接到无线接入点 B。 2\. 笔记本 A 向我的服务器发送“hello”消息。3\. 我的服务器收到这条消息。我的问题是我的服务器如何知道此消息是由笔记本 A（不是其他笔记本）通过无线接入点 B（而不是通过其他无线接入点）发送的。这里谁使用笔记本 A 不是我关心的问题。

我正在考虑这样一个粗略的解决方案。让我的服务器知道笔记本A的CPU序列号和无线接入点的mac地址。任何向我的服务器发送消息的计算机都需要报告其 CPU 序列号和无线网关 MAC 地址。如果这两个与我服务器保存的相同，则通过。

我知道这两个也可以伪造。请提出更好的解决方案。太感谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T15:46:36.890

设置您的接入点以运行 WPA 企业。在您的服务器上运行 RADIUS 服务器。可选择将流量从 AP 隧道传输到服务器。向每个可能的客户端颁发唯一凭据，可能基于证书。

使用来自 AP 的 RADIUS 信息和“安全”（即隧道或直接有线链路），您可以明确且安全地识别服务器上的无线客户端，前提是您信任整台机器、AP 和中间链路。

# php - 模拟攻击 while+array+objects

> ID：10570912
> 
> 赞同：0
> 
> 时间：2012-05-13T10:09:44.703
> 
> 标签：php

```
class Gunner {

    public $health;
    public $attack;

    function __construct($health, $attack) {
        $this->health = $health;
        $this->attack = $attack;
    }
}

$player = array();
$player[] = new Gunner(100, 20);
$player[] = new Gunner(100, 20);
$player[] = new Gunner(100, 20);

$enemy = array();
$enemy[] = new Gunner(100, 20);
$enemy[] = new Gunner(100, 20); 
```

只要两个数组都具有“实体”/对象，我就希望有一些循环运行。我怎么做？我想和每一个实体战斗，就像 $player[0] 会战斗（又名 rand(1,20)）然后从对立面的生命值中移除直到它为 0。当它的值为 0 或更少时，我会移除数组中的实体（对象）。

我不确定 while 循环或从数组中删除的样子。

```
while ((count($attacker) > 0) && (count($defender) > 0))
{
    $attacker_attack = rand(1, 25);

    $defender[0]->health -= $attacker_attack;

    if (!$defender[0]->IsAlive()) {
        unset($defender[0]);
        array_values($defender);
    }

    $defender_attack = rand(1, 20);

    $attacker[0]->health -= $defender_attack;

    if (!$attacker[0]->IsAlive()) {
        unset($attacker[0]);
        array_values($attacker);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T10:25:34.743

你的意思是这样的（[演示](http://codepad.org/YVBqDSeN)）？

```
class Gunner
{
    public $health;
    public $attack;

    public function __construct($health, $attack)
    {
        $this->health = $health;
        $this->attack = $attack;
    }
}

$attacker = array
(
    new Gunner(100, 20),
    new Gunner(100, 20),
    new Gunner(100, 20),
);

$defender = array
(
    new Gunner(100, 30),
    new Gunner(100, 30),
);

while ((count($attacker) > 0) && (count($defender) > 0)) // fight till death!
{
    $defender[0]->health -= $attacker[0]->attack;

    if ($defender[0]->health <= 0) // defender dead?
    {
        unset($defender[0]); $defender = array_values($defender);
    }

    if (count($defender) > 0) // are any def alive for counter-attack?
    {
        $attacker[0]->health -= $defender[0]->attack;

        if ($attacker[0]->health <= 0) // attacker dead?
        {
            unset($attacker[0]); $attacker = array_values($attacker);
        }
    }
}

print_r($attacker);
print_r($defender); 
```

**PS：**我更新了代码以反映您的最后评论，有点不清楚应该如何进行回合。

# unit-testing - 黑盒单元测试

> ID：10570915
> 
> 赞同：17
> 
> 时间：2012-05-13T10:09:58.077
> 
> 标签：unit-testing

在我的上一个项目中，我们进行了几乎 100% cc 的单元测试，因此我们几乎没有任何错误。

但是，由于单元测试必须是白盒（您必须模拟内部函数才能获得所需的结果，因此您的测试需要了解代码的内部结构）任何时候我们更改函数的实现，我们都必须也改变测试。

请注意，我们没有更改函数的逻辑，只是更改了实现。

这非常耗时，感觉好像我们的工作方式不对。由于我们使用了所有正确的 OOP 指南（特别是封装），每次我们更改实现时，我们不必更改其余代码，但必须更改单元测试。

感觉好像我们是在为测试服务，而不是他们为我们服务。

为了防止这种情况，我们中的一些人认为单元测试应该是黑盒测试。

如果我们为整个域创建一个大模拟，并在一个地方为每个类中的每个函数创建一个存根，并在每个单元测试中使用它，那将是可能的。

当然，如果一个特定的测试需要调用特定的内部函数（比如确保我们写入数据库），我们可以覆盖我们的存根。

因此，每次我们更改函数的实现（例如添加或替换对帮助函数的调用）时，我们只需要更改我们的 main big mock。即使我们确实需要更改一些单元测试，它仍然会比以前少得多。

其他人认为单元测试必须是白盒测试，因为您不仅要确保您的应用程序在特定位置写入数据库，还要确保您的应用程序不会在其他任何地方写入数据库，除非您特别期望它至。虽然这是一个有效的观点，但我认为不值得花时间编写白盒测试而不是黑盒测试。

所以总结一下，有两个问题：

1.  您如何看待黑盒单元测试的概念？

2.  您如何看待我们想要实施该概念的方式？你有更好的想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-13T10:27:02.603

您需要不同类型的测试。

*   应该是白盒测试的单元测试，就像你做的那样

*   集成测试（或系统测试），测试使用系统实际实现的能力及其与外部层（外部系统、数据库等）的通信，应该是黑盒样式的，但每个都针对特定的功能（例如 CRUD 测试）

*   验收测试应该是完全黑盒的，并且由功能需求驱动（正如您的用户所说的那样）。尽可能端到端，并且不知道您选择的实现的内部。黑盒测试的教科书定义。

请记住，在大多数情况下，代码覆盖率是没有意义的。您需要高行覆盖率（或方法覆盖率，无论您的计数方法是什么），但这通常是不够的。您需要考虑的概念是**功能覆盖**：确保您的所有需求和逻辑路径都被覆盖。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-13T10:19:20.960

> 结果我们几乎没有任何错误

如果你真的能够做到这一点，那么我认为你不应该改变任何东西。

黑盒测试在纸面上听起来很吸引人，但事实是你几乎总是需要了解被测试类的部分内部工作原理。在现实中提供输入，验证输出仅适用于简单的情况*。*大多数时候，您的测试至少需要了解一些被测方法的知识——它如何与外部协作者交互、它调用什么方法、以什么顺序等等。

模拟和 SOLID 设计背后的整个想法是避免*依赖实现更改*导致其他类测试更改/失败的情况。相反，**如果你改变了被测方法的实现细节，那么就应该改变它测试的实现细节**。这并不少见。

总的来说，如果你真的能够实现**几乎没有错误**，那么我会坚持这种方法。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-31T09:52:02.180

tl;博士版本：

1.  黑盒单元测试正是应该如何进行单元测试。
2.  黑盒单元测试正是应该如何进行单元测试。正确的 TDD 实践正是这样做的。

完整版本。

完全不需要测试对象的私有方法。它也不会影响代码覆盖率。

当您对一个类进行 TDD 时，您会编写测试来检查该类的行为。行为通过该类的公共方法来表达。你永远不应该关心这些方法是如何真正实现的。谷歌人描述的比我能做到的要好得多：http: [//googletesting.blogspot.ru/2013/08/testing-on-toilet-test-behavior-not.html](http://googletesting.blogspot.ru/2013/08/testing-on-toilet-test-behavior-not.html)

如果你犯了常见的错误并且静态地依赖于其他实体类，或者更糟糕的是，依赖于来自不同应用层的类，那么你不可避免地会发现自己处于需要在测试中检查很多东西并准备一个很多东西。为了解决这个问题，存在依赖注入原理和得[墨忒耳定律](http://c2.com/cgi/wiki?LawOfDemeter)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-13T10:26:08.583

我认为你应该继续编写单元测试——只是让它们不那么脆弱。

单元测试应该是低级的，但应该测试结果，而不是如何完成。当实现更改导致大量测试更改时，这意味着您实际上是在测试实现而不是测试需求。

有几条经验法则——比如“不要测试私有方法”和使用模拟对象。

模拟/模拟整个域通常会导致与您尝试完成的相反 - 当代码行为发生变化时，您需要更新测试以确保您的“模拟对象”行为相同 - 它变得非常困难非常快随着项目复杂性的增加。

我建议你继续编写单元测试——只要学习如何使它们更健壮和不那么脆弱。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-14T10:46:38.790

“结果我们几乎没有任何错误”——所以保持这种状态。令人沮丧的唯一原因是维护单元测试的必要性，这实际上并不是一件坏事（替代方案更糟）。只是让它们更易于维护。Roy Osherove 的“单元测试的艺术”以这种方式给了我一个良好的开端。所以1）不是一个选择。（例如，这个想法本身与 TDD 的原则相矛盾） 2）使用这种方法，您将遇到更多的维护麻烦。单元测试的理念是从其他系统中剔除 SUT，并使用存根作为输入和模拟作为输出（信号？）模拟现实生活情况（或者我只是没有抓住“我们整个领域的一个大模拟”的想法）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-08T19:16:31.063

有关黑色、白色和灰色框和决策表的详细信息，请参阅以下文章，该文章解释了所有内容。

[测试基于 Web 的应用程序：最新技术和未来趋势 (PDF)](http://web.soccerlab.polymtl.ca/log6305/protected/papers/dilucca_infsoft_2006.pdf)

# c# - PostSharp 将 k__Backing 字段插入实体类，导致数据库生成失败

> ID：10570925
> 
> 赞同：5
> 
> 时间：2012-05-13T10:12:15.270
> 
> 标签：c#, entity-framework, code-first, postsharp

我正在使用 C# 中的 Microsoft Entity Framework 和 CodeFirst 创建一个数据库。我想在 WPF 应用程序中使用数据库，因此实体类应该实现“INotifyPropertyChanged”。

这可以使用 PostSharp 方面非常优雅地完成，每次属性更改时都会自动触发 PropertyChanged 事件。如果我创建这样一个方面并在我的实体类上使用它，我会在尝试创建数据库时得到以下异常：

```
 \tSystem.Data.Entity.Edm.EdmNavigationProperty: Name: The specified name is not allowed:          '<Name>k__BackingField'. 
```

显然 PostSharp 创建了一个名为“k__BackingField”的属性，这会导致数据库创建失败，因为从 EntityFramework 的角度来看，它是一个无效的名称。有没有办法避免这个错误，而无需在每个实体类中手动实现“INotifyPropertyChanged”？

PS：英语不是我的母语，如果您告诉我我的帖子中可能存在的错误，我将非常感激。

先感谢您

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T11:00:27.847

确实 PostSharp 可以创建一个名为 k__BackingField 的属性（真实名称有点不同；您看到的是转义名称），因为我想您正在将方面应用于字段，这导致 PostSharp 将字段封装到属性中同名。因此，您可以拥有一个以该字段命名的属性。

您应该检查您是否真的要将该方面添加到该字段。也许您只是想将方面添加到属性中，但错误地将其添加到字段中。默认情况下，LocationInterceptionAspects 应用于（多播）字段*和*属性。用于`MulticastAttributeUsageAttribute.AttributeTargets`将其限制为属性。

# mysql - ResultSetImpl 抛出 NullPointerException

> ID：10570929
> 
> 赞同：4
> 
> 时间：2012-05-13T10:14:09.037
> 
> 标签：mysql, jdbc, mysql-connector, connector-j

我正在使用 mysql 5.1.18 连接器运行 mysql 5.5。一个简单的风格查询

`select * from my_table where column_a in ('aaa','bbb',...) and column b=1;`

从 java 应用程序中执行。该查询返回 25k 行的结果集，每行 8 列。在while循环中读取结果

```
while(rs.next())
{
    MyObject c= new MyObject();  
    c.setA(rs.getString("A"));
    c.setB(rs.getString("B"));
    c.setC(rs.getString("C"));
    ...
} 
```

通常在第一个循环期间引发以下异常，但从不在同一行中：

```
java.lang.NullPointerException
    at com.mysql.jdbc.ResultSetImpl.getStringInternal(ResultSetImpl.java:5720)
    at com.mysql.jdbc.ResultSetImpl.getString(ResultSetImpl.java:5570)
    at com.mysql.jdbc.ResultSetImpl.getString(ResultSetImpl.java:5610) 
```

我查看了 ResultSetImpl.java:5720 中的源代码，我看到以下内容：

```
switch (metadata.getSQLType()) 
```

元数据在哪里

```
Field metadata = this.fields[internalColumnIndex]; 
```

getSQLType 是返回 int 的无逻辑 getter。有趣的是，同一个元数据对象在上面的几行中与其他 getter 一起被多次调用，并且没有抛出异常。

顺便说一句，上面的查询直接在 mysql 中运行时没有问题。应用程序在 aws 中运行。

任何想法如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-03-12T23:51:06.590

我遇到了这个问题，使用 Spring Data CrudRepository，从运行在 AWS RDS 上的 MySql 数据库中检索结果流，并使用适度复杂的查询。

在大约 30k 行之后，它还会抛出一个不确定的行。

我通过使用@Transactional 注释调用方法解决了这个问题。

尽管您没有使用 JPA，但为您的数据库访问设置事务可能会对您的问题有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-21T07:29:28.623

根据我的经验，此错误是由于尝试从同一个表同时读取/写入时锁定表的结果。您需要为每个请求添加一个池，或者在对 MySQL 的每个操作之间添加一些等待时间。

相关答案： [Getting java.sql.SQLException: Operation not allowed after ResultSet closed](https://stackoverflow.com/questions/5840866/getting-java-sql-sqlexception-operation-not-allowed-after-resultset-closed)

# android - MediaPlayer 上的半透明层

> ID：10570930
> 
> 赞同：0
> 
> 时间：2012-05-13T10:14:15.940
> 
> 标签：android, video

如何以编程方式在我的视频播放器 (MediaPlayer) 上设置半透明层？
我需要在 onTouch() 事件中执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T10:28:06.977

例如，如果它在 a 中`FrameLayout`，您可以在其上放置一个，并更改代码 ( )`ImageView`的可见性`.setVisibility()`

# jquery - 特色帖子滑块不起作用

> ID：10570934
> 
> 赞同：0
> 
> 时间：2012-05-13T10:15:11.660
> 
> 标签：jquery, slider, wordpress, image-gallery

我的博客链接是：

[http://guruschool.org/angelsschool/](http://guruschool.org/angelsschool/)

最初滑块正在工作。但是因为我想拥有图片库，所以我安装了 WP EASY GALLERY 插件。

安装 WP EASY GALLERY 插件后，我的滑块停止工作。由于现在我的滑块导航不起作用，我也遇到了错误..

```
Uncaught TypeError: Object [object Object] has no method 'superfish'  
Uncaught TypeError: Object [object Object] has no method 'cycle' 
```

请建议我一些解决方案，因为我也想拥有图片库，所以不想删除这个插件......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T13:25:02.110

好像您的脚本未加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T19:58:27.763

是的，Jquery 的冲突是问题。我之前遇到过相同类型的冲突尝试使用下一代画廊而不是您正在使用的画廊，该画廊也会为您提供更好的选择即使您可以通过 Just Intalling LightBox 使用 Lightbox 功能加上插件并通过将图库选项中的选项设置为 Lightbox..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T07:05:43.033

我已经通过编辑我的画廊插件解决了它..

我刚刚删除了将 jquery 文件加载到文档标题的行，这样它就不会与现有的滑块文件冲突。

现在它对我来说工作正常......

# jquery - 如何在 jquery 和 jquery mobile 中正确使用 asp.net Web 表单？

> ID：10570935
> 
> 赞同：-1
> 
> 时间：2012-05-13T10:15:17.097
> 
> 标签：jquery, asp.net, jquery-mobile

我目前正在将 jquery 与 asp.net 网络表单一起使用，图像从数据库中获取并显示在列表视图中，然后当用户单击特定图像时，我想获取其在数据库中的主键 ID，但是当我单击任何图像时onClick & onSelectedIndex 事件没有引发，我不知道这是什么问题。我正在使用 jquery 滚动图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T15:34:42.980

您将属性添加到图像标签，然后使用 jquery 处理此属性的此值

# python - Python 正则表达式 re.sub：一些东西

> ID：10570937
> 
> 赞同：4
> 
> 时间：2012-05-13T10:16:17.560
> 
> 标签：python, regex

我有一个这样的程序：

```
import re

x='aaaaaaaa;aa;aaa;aaa;aaaaaaaaaa;'
x=re.sub(';','.',x, re.IGNORECASE)

print x 
```

但是输出是这样的：

```
aaaaaaaa.aa.aaa;aaa;aaaaaaaaaa; 
```

还有一些`;`没有换成a `.`，为什么？

使用 Python 2.6

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T10:18:07.527

**更新 - 在 Python 2.6 中，您可以这样做：**

```
>>> re.sub('(?i);','.',x)
'aaaaaaaa.aa.aaa.aaa.aaaaaaaaaa.' 
```

**对于 Python 2.7+ 和 3.0+**

而是这样做，第三个参数实际上是计数（要进行的替换次数）并且`re.IGNORECASE`只是一个整数，因此它使用它作为计数。

```
>>> re.sub(';','.',x, flags=re.IGNORECASE)
'aaaaaaaa.aa.aaa.aaa.aaaaaaaaaa.'

>>> re.IGNORECASE
2 
```

# facebook - 联系 Facebook 应用用户的最佳方式

> ID：10570939
> 
> 赞同：2
> 
> 时间：2012-05-13T10:16:22.133
> 
> 标签：facebook, facebook-graph-api

我有很多 Facebook 应用程序用户，但我的 Facebook 页面上的用户并不多。如何联系我的应用用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T10:47:11.027

我认为没有“最佳方法”，这取决于您要达到的目标。

查看[社交渠道指南](http://developers.facebook.com/docs/channels/)，其中列出了 facebook 允许您联系用户的不同方式。此外，请查看[请求指南](http://developers.facebook.com/docs/requests/)以获取有关请求的更多信息（在社交渠道中提到）。

除了您需要使用 facebook 的那些渠道之外，您可以向您的用户请求“电子邮件”权限，坚持下去，然后您就可以在不通过 facebook 的情况下联系您的用户。

# assembly - 如何在某处计算正弦值，然后在 Assembly 中移动到 XMM0？

> ID：10570940
> 
> 赞同：4
> 
> 时间：2012-05-13T10:16:22.183
> 
> 标签：assembly, sse

我以前用 FPU 做集成任务，现在我在 SSE 上苦苦挣扎。

我的主要问题是当我使用 FPU 堆栈时，有一个`fsin`函数可以用于堆栈顶部的数字（st0）。

现在我想计算我所有四个数字的正弦`XMM0`，或者在其他地方计算它并进入`XMM0`。我正在使用 AT&T 语法。

我认为第二个想法实际上是可能的，但我不知道如何:)

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T12:46:45.173

三个选项：

1.  使用和现有的`sin`在 SSE 向量上计算的库。
2.  `sin`使用 SSE编写您自己的向量函数。
3.  将向量存储到内存中，用于`fsin`计算每个元素的正弦值，然后加载结果。假设您的堆栈是 16 字节对齐的并且有 16 字节的空间，如下所示：

    ```
     movaps  %xmm0, (%rsp)
       mov     $3,     %rcx
    0: flds   (%rsp,%rcx,4)
       fsin
       fstps  (%rsp,%rcx,4)
       sub     $1,     %rcx
       jns     0b 
    ```

（1）几乎可以肯定是你最好的表现，也是最简单的。如果您具有编写矢量代码的丰富经验并且*先验地*知道参数属于某个范围，那么您可以使用 (2) 获得更好的性能。使用`fsin`会起作用，但如果这很重要的话，它又丑又慢而且不是特别准确。

# linq - 使用复杂映射将表达式树从一种类型转换为另一种类型

> ID：10570942
> 
> 赞同：5
> 
> 时间：2012-05-13T10:16:33.647
> 
> 标签：linq, entity-framework, expression-trees, asp.net-web-api

[受此答案](https://stackoverflow.com/a/6698824/82540)的启发，我试图将模型类上的属性映射到基于实际实体的表达式。这些是涉及的两个类：

```
public class Customer
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int Id { get; set; }
    public DateTime? BirthDate { get; set; }
    public int CustomerTypeId { get; set; }
}

public class CustomerModel
{
    ...
    public bool HasEvenId { get; set; }
} 
```

我想转换的可能表达式的一个例子是：

```
Expression<Func<CustomerModel, bool>> from = model => model.HasEvenId;
Expression<Func<Customer, bool>> to = entity => ((entity.Id % 2) == 0); 
```

问题是我必须通过 ASP.NET WebAPI 公开一个 OData 端点，但我需要先对实体进行一些操作，因此需要一个模型类，并且需要基于模型转换表达式我可以接收作为基于实体的表达式中的 OData 查询，我将使用它来查询 EF4。

这是我到目前为止的地方：

```
private static readonly Dictionary<Expression, Expression> Mappings = GetMappings();

private static Dictionary<Expression, Expression> GetMappings()
{
    var mappings = new Dictionary<Expression, Expression>();

    var mapping = GetMappingFor((CustomerModel model) => model.HasEvenId, (Customer customer) => (customer.Id%2) == 0);
    mappings.Add(mapping.Item1, mapping.Item2);

    return mappings;
}

private static Tuple<Expression, Expression> GetMappingFor<TFrom, TTo, TValue>(Expression<Func<TFrom, TValue>> fromExpression, Expression<Func<TTo, TValue>> toExpression)
{
    MemberExpression fromMemberExpression = (MemberExpression) fromExpression.Body;
    return Tuple.Create<Expression, Expression>(fromMemberExpression, toExpression);
}

public static Expression<Func<TTo, bool>> Translate<TFrom, TTo>(Expression<Func<TFrom, bool>> expression, Dictionary<Expression, Expression> mappings = null)
{
    if (expression == null)
        return null;

    string parameterName = expression.Parameters[0].Name;

    parameterName = string.IsNullOrWhiteSpace(parameterName) ? "p" : parameterName;

    var param = Expression.Parameter(typeof(TTo), parameterName);
    var subst = new Dictionary<Expression, Expression> { { expression.Parameters[0], param } };
    ParameterChangeVisitor parameterChange = new ParameterChangeVisitor(parameterName);
    if (mappings != null)
        foreach (var mapp in mappings)
            subst.Add(mapp.Key, parameterChange.Visit(mapp.Value));

    var visitor = new TypeChangeVisitor(typeof(TFrom), typeof(TTo), subst);
    return Expression.Lambda<Func<TTo, bool>>(visitor.Visit(expression.Body), param);
}

public IQueryable<CustomerModel> Get()
{
    var filterExtractor = new ODataFilterExtractor<CustomerModel>();
    Expression<Func<CustomerModel, bool>> expression = filterExtractor.Extract(Request);
    Expression<Func<Customer, bool>> translatedExpression = Translate<CustomerModel, Customer>(expression, Mappings);

    IQueryable<Customer> query = _context.Customers;

    if (translatedExpression != null)
        query = query.Where(translatedExpression);

    var finalQuery = from item in query.AsEnumerable() 
                     select new CustomerModel()
                        {
                            FirstName = item.FirstName, 
                            LastName = item.LastName, 
                            Id = item.Id, 
                            BirthDate = item.BirthDate, 
                            CustomerTypeId = item.CustomerTypeId,
                            HasEvenId = (item.Id % 2 ) == 0
                        };

    return finalQuery.AsQueryable();
} 
```

在哪里：

*   ODataFilterExtractor 是一个从我们收到的 RequestMessage 中提取 $filter 表达式的类；
*   ParameterChangeVisitor 只是将所有 ParameterExpression 更改为具有提供的字符串作为参数名称的新参数；

另外，我以这种方式更改了上面链接的答案的 VisitMember 方法：

```
protected override Expression VisitMember(MemberExpression node)
{
    // if we see x.Name on the old type, substitute for new type
    if (node.Member.DeclaringType == _from)
    {
        MemberInfo toMember = _to.GetMember(node.Member.Name, node.Member.MemberType, BindingFlags.Instance | BindingFlags.Static | BindingFlags.Public | BindingFlags.NonPublic).SingleOrDefault();
        if (toMember != null)
        {
            return Expression.MakeMemberAccess(Visit(node.Expression), toMember);
        }
        else
        {
            if (_substitutions.Select(kvp => kvp.Key).OfType<MemberExpression>().Any(me => me.Member.Equals(node.Member)))
            {
                MemberExpression key = _substitutions.Select(kvp => kvp.Key).OfType<MemberExpression>().Single(me => me.Member.Equals(node.Member));
                Expression value = _substitutions[key];

                // What to return here?
                return Expression.Invoke(value);
            }
        }
    }
    return base.VisitMember(node);
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T21:24:53.007

我冒昧地修改了你的代码，但这确实有效，

```
public class Customer
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int Id { get; set; }
    public DateTime? BirthDate { get; set; }
    public int CustomerTypeId { get; set; }
}

public class CustomerModel
{
    public string FullName { get; set; }
    public bool HasEvenId { get; set; }
}

sealed class AToBConverter<TA, TB> : ExpressionVisitor
{
    private readonly Dictionary<ParameterExpression, ParameterExpression> _parameters = new Dictionary<ParameterExpression, ParameterExpression>();
    private readonly Dictionary<MemberInfo, LambdaExpression> _mappings;

    protected override Expression VisitParameter(ParameterExpression node)
    {
        if (node.Type == typeof(TA))
        {
            ParameterExpression parameter;
            if (!this._parameters.TryGetValue(node, out parameter))
            {
                this._parameters.Add(node, parameter = Expression.Parameter(typeof(TB), node.Name));
            }
            return parameter;
        }
        return node;
    }

    protected override Expression VisitMember(MemberExpression node)
    {
        if (node.Expression == null || node.Expression.Type != typeof(TA))
        {
            return base.VisitMember(node);
        }
        Expression expression = this.Visit(node.Expression);
        if (expression.Type != typeof(TB))
        {
            throw new Exception("Whoops");
        }
        LambdaExpression lambdaExpression;
        if (this._mappings.TryGetValue(node.Member, out lambdaExpression))
        {
            return new SimpleExpressionReplacer(lambdaExpression.Parameters.Single(), expression).Visit(lambdaExpression.Body);
        }
        return Expression.Property(
            expression,
            node.Member.Name
        );
    }

    protected override Expression VisitLambda<T>(Expression<T> node)
    {
        return Expression.Lambda(
            this.Visit(node.Body),
            node.Parameters.Select(this.Visit).Cast<ParameterExpression>()
        );
    }

    public AToBConverter(Dictionary<MemberInfo, LambdaExpression> mappings)
    {
        this._mappings = mappings;
    }
}

sealed class SimpleExpressionReplacer : ExpressionVisitor
{
    private readonly Expression _replacement;
    private readonly Expression _toFind;

    public override Expression Visit(Expression node)
    {
        return node == this._toFind ? this._replacement : base.Visit(node);
    }

    public SimpleExpressionReplacer(Expression toFind, Expression replacement)
    {
        this._toFind = toFind;
        this._replacement = replacement;
    }
}

class Program 
{
    private static Dictionary<MemberInfo, LambdaExpression> GetMappings()
    {
        var mappings = new Dictionary<MemberInfo, LambdaExpression>();
        var mapping = GetMappingFor(model => model.HasEvenId, customer => (customer.Id % 2) == 0);
        mappings.Add(mapping.Item1, mapping.Item2);
        mapping = GetMappingFor(model => model.FullName, customer => customer.FirstName + " " + customer.LastName);
        mappings.Add(mapping.Item1, mapping.Item2);
        return mappings;
    }

    private static Tuple<MemberInfo, LambdaExpression> GetMappingFor<TValue>(Expression<Func<CustomerModel, TValue>> fromExpression, Expression<Func<Customer, TValue>> toExpression)
    {
        return Tuple.Create(((MemberExpression)fromExpression.Body).Member, (LambdaExpression)toExpression);
    }

    static void Main()
    {
        Expression<Func<CustomerModel, bool>> source = model => model.HasEvenId && model.FullName == "John Smith";
        Expression<Func<Customer, bool>> desiredResult = model => (model.Id % 2) == 0 && (model.FirstName + " " + model.LastName) == "John Smith";
        Expression output = new AToBConverter<CustomerModel, Customer>(GetMappings()).Visit(source);
        Console.WriteLine("The two expressions do {0}match.", desiredResult.ToString() == output.ToString() ? null : "not ");
        Console.ReadLine();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-18T08:18:33.327

另一种解决方案是使用[AutoMapper](http://automapper.org/)映射复杂类型并在执行之前使用 ExpressionTransformer 修改生成的表达式查询。我将尝试用一个完整的示例来解释：

**模型类**

一些 POCO 类仅用于保存数据。

```
public enum CostUnitType
{
    None = 0,
    StockUnit = 1,
    MachineUnit = 2,
    MaintenanceUnit = 3
}

public class CostUnit
{
    public string CostUnitId { get; set; }
    public string WorkplaceId { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }

    public CostUnitType Type { get; set; }

    public override string ToString()
    {
        return CostUnitId + " " + Name + " " + Type;
    }
}

public class StockUnit
{
    public string Id { get; set; }
    public string Name { get; set; }
}

public class MachineUnit
{
    public string Id { get; set; }
    public string Name { get; set; }
}

public class MaintenanceUnit
{
    public string Id { get; set; }
    public string Name { get; set; }
} 
```

**ExpressionTransformer 类**

大多数情况下，使用 Mapper 静态类就可以了，但有时您需要使用不同的配置映射相同的类型，因此您需要像这样显式使用 IMappingEngine：

```
var configuration = new ConfigurationStore(new TypeMapFactory(), MapperRegistry.Mappers);
var engine = new MappingEngine(configuration); 
```

创建 MappingEngine 的方法一点也不明显。我不得不深入研究源代码以了解它是如何完成的。

```
public static class ExpressionTransformer
{
    private static readonly MappingEngine Mapper;

    /// <summary>
    /// Initializes the <see cref="ExpressionTransformer"/> class.
    /// Creates an instance of AutoMapper. Initializes mappings.
    /// </summary>
    static ExpressionTransformer()
    {
        ConfigurationStore configurationStore = new ConfigurationStore(new TypeMapFactory(), MapperRegistry.Mappers);

        // Create mapping
        // Maps Id from StockUnit to CostUnitId from CostUnit
        configurationStore.CreateMap<StockUnit, CostUnit>()
            .ForMember(m => m.CostUnitId, opt => opt.MapFrom(src => src.Id));
        // Maps Id from MachineUnit to CostUnitId from CostUnit
        configurationStore.CreateMap<MachineUnit, CostUnit>()
            .ForMember(m => m.CostUnitId, opt => opt.MapFrom(src => src.Id));
        // Maps Id from MaintenanceUnit to CostUnitId from CostUnit
        configurationStore.CreateMap<MaintenanceUnit, CostUnit>()
            .ForMember(m => m.CostUnitId, opt => opt.MapFrom(src => src.Id));

        // Create instance of AutoMapper
        Mapper = new MappingEngine(configurationStore);
    }

    public static Expression<Func<TDestination, bool>> Tranform<TSource, TDestination>(Expression<Func<TSource, bool>> sourceExpression)
    {
        // Resolve mappings by AutoMapper for given types.
        var map = Mapper.ConfigurationProvider.FindTypeMapFor(typeof(TSource), typeof(TDestination));

        if (map == null)
        {
            throw new AutoMapperMappingException(string.Format("No Mapping found for {0} --> {1}.", typeof(TSource).Name, typeof(TDestination).Name));
        }

        // Transform from TSource to TDestination with specified mappings
        var visitor = new ParameterTypeVisitor<TSource, TDestination>(sourceExpression, map.GetPropertyMaps());
        var expression = visitor.Transform();

        return expression;
    }

    private class ParameterTypeVisitor<TSource, TDestination> : ExpressionVisitor
    {
        private readonly Dictionary<string, ParameterExpression> _parameters;
        private readonly Expression<Func<TSource, bool>> _expression;
        private readonly IEnumerable<PropertyMap> _maps;

        public ParameterTypeVisitor(Expression<Func<TSource, bool>> expression, IEnumerable<PropertyMap> maps)
        {
            _parameters = expression.Parameters
                .ToDictionary(p => p.Name, p => Expression.Parameter(typeof(TDestination), p.Name));

            _expression = expression;

            _maps = maps;
        }

        public Expression<Func<TDestination, bool>> Transform()
        {
            return (Expression<Func<TDestination, bool>>) Visit(_expression);
        }

        protected override Expression VisitMember(MemberExpression node)
        {
            if (node.Member.DeclaringType == typeof(TSource))
            {
                var memberName = node.Member.Name;
                var member = _maps.FirstOrDefault(p => typeof(TSource) == node.Expression.Type
                                                        && p.SourceMember.Name == memberName);
                if (member != null)
                {
                    // Return Property from TDestination
                    var expression = Visit(node.Expression);
                    return Expression.MakeMemberAccess(expression, member.DestinationProperty.MemberInfo);
                }
            }

            return base.VisitMember(node);
        }

        protected override Expression VisitParameter(ParameterExpression node)
        {
            var parameter = _parameters[node.Name];
            return parameter;
        }

        protected override Expression VisitLambda<T>(Expression<T> node)
        {
            var expression = Visit(node.Body);
            return Expression.Lambda(expression, _parameters.Select(x => x.Value));
        }
    }
} 
```

**用法**

要转换表达式，我们只需要调用 ExpressionTransformer 类的 Transform 方法

```
 Expression<Func<StockUnit, bool>> stockQuery = unit => unit.Id == "0815" && unit.Name == "ABC";

            // Call Transform<TSource, TDestination> method.
            Expression<Func<CostUnit, bool>> costUnitQuery = ExpressionTransformer.Tranform<StockUnit, CostUnit>(stockQuery); 
```

**结果**

[![结果表达式](../Images/24f7e5fb7d9ad075291d0b26a8ebb2c1.png)](https://i.stack.imgur.com/ttsrT.png)

# asp.net - EF Code First 托管

> ID：10570946
> 
> 赞同：0
> 
> 时间：2012-05-13T10:17:09.203
> 
> 标签：asp.net, ef-code-first, hosting

在托管服务上托管 asp.net 4.5 有哪些选择（以及在哪里）？

我想使用内置的会员表 + 能够自动创建一个新的

使用 EF Code First 5 的数据库

*   我想要轻松部署

*   Code First 在生产环境中是不是不错的选择？我读了很多“仅限开发”，但它是

打扰我了，如果它仅用于开发，为什么要使用 Code First...

更新 ：

我的主要问题甚至是关于 asp.net 3/4 Code-First ，哪些已知的托管服务可以让您轻松部署 CodeFirst ，含义，自动创建数据库等......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T10:37:47.217

好吧，目前您的选择非常有限。首先，据我所知，4.5 还没有发布，所以我不确定你真正期待什么托管解决方案。我听说过一些测试版的测试主机，但是.. 不了解你，但这对于我的生产应用程序来说是不够的。

其次，代码优先意味着快速开发。

您必须了解，“代码优先”只是在 .NET 中创建数据库类的另一种方式。它仍然是实体框架，所以如果它适合您，那么您何时以及如何使用它并不重要。背景层仍然与您使用代表您的数据库的“经典”自动生成的类相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T15:13:46.537

它仅依赖于 .NET Framework 4.0。

它很容易部署。

# ruby-on-rails-3 - Sqlite3：无法构建 gem 原生扩展

> ID：10570949
> 
> 赞同：0
> 
> 时间：2012-05-13T10:18:01.480
> 
> 标签：ruby-on-rails-3, sqlite, gem, centos

我第一次使用 Capistrano 并遇到了以下问题。我的 rails 应用程序在装有 CentOS Linux 6.0 的 VPS 上运行。

```
 * executing `bundle:install'
  * executing "ls -x ~/my_rails_app/releases"
    servers: ["example.com"]
    [example.com] executing command
    command finished in 1225ms
  * executing "cd ~/my_rails_app/releases/20120513095446 && bundle install --gemfile ~/my_rails_app/releases/2012051309
5446/Gemfile --path ~/my_rails_app/shared/bundle --deployment --quiet --without development test"
    servers: ["example.com"]
    [example.com] executing command
 ** [out :: example.com] /usr/lib/ruby/site_ruby/1.8/rubygems/installer.rb:483:in `build_extensions': ERROR: Failed to build gem native 
extension. (Gem::Installer::ExtensionBuildError)
 ** [out :: example.com] 
 ** [out :: example.com] /usr/bin/ruby extconf.rb
 ** [out :: example.com] checking for sqlite3.h... no
 ** [out :: example.com] sqlite3.h is missing. Try 'port install sqlite3 +universal'
 ** [out :: example.com] or 'yum install sqlite-devel' and check your shared library search path (the
 ** [out :: example.com] location where your sqlite3 shared library is located).
 ** [out :: example.com] *** extconf.rb failed ***
 ** [out :: example.com] Could not create Makefile due to some reason, probably lack of
 ** [out :: example.com] necessary libraries and/or headers.  Check the mkmf.log file for more
 ** [out :: example.com] details.  You may need configuration options.
 ** [out :: example.com] 
 ** [out :: example.com] Provided configuration options:
 ** [out :: example.com] --with-opt-dir
 ** [out :: example.com] --without-opt-dir
 ** [out :: example.com] --with-opt-include
 ** [out :: example.com] --without-opt-include=${opt-dir}/include
 ** [out :: example.com] --with-opt-lib
 ** [out :: example.com] --without-opt-lib=${opt-dir}/lib
 ** [out :: example.com] --with-make-prog
 ** [out :: example.com] --without-make-prog
 ** [out :: example.com] --srcdir=.
 ** [out :: example.com] --curdir
 ** [out :: example.com] --ruby=/usr/bin/ruby
 ** [out :: example.com] --with-sqlite3-dir
 ** [out :: example.com] --without-sqlite3-dir
 ** [out :: example.com] --with-sqlite3-include
 ** [out :: example.com] --without-sqlite3-include=${sqlite3-dir}/include
 ** [out :: example.com] --with-sqlite3-lib
 ** [out :: example.com] --without-sqlite3-lib=${sqlite3-dir}/lib
 ** [out :: example.com] --enable-local
 ** [out :: example.com] --disable-local
 ** [out :: example.com] 
 ** [out :: example.com] 
 ** [out :: example.com] Gem files will remain installed in /home/example.com/my_rails_app/shared/bundle/ruby/1.8/gems/sqlite3-1.
3.6 for inspection.
 ** [out :: example.com] Results logged to /home/example.com/my_rails_app/shared/bundle/ruby/1.8/gems/sqlite3-1.3.6/ext/sqlite3/g
em_make.out 
```

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T04:44:29.963

在 Red-hat 衍生产品上，您需要安装 sqlite 的开发包，以便构建使用本机扩展的 sqlite gem。

尝试：

```
sudo yum install sqlite-devel 
```

然后做

```
bundle install 
```

# .net - Wcf 安全令牌 (TimeBoundedCache+ExpirableItem)

> ID：10570956
> 
> 赞同：0
> 
> 时间：2012-05-13T10:19:07.447
> 
> 标签：.net, wcf, iis, wcf-security

我在 IIS 下运行的 wcf 服务遇到问题，该服务在 System.ServiceModel.Security 下使用名为 TimeBoundedCache+ExpirableItem 的对象。我调查了这些对象，发现它们在 Gen2 上存在很长时间，而且我的 wcf 内存正在增长。

我看到这些对象有 48 小时的过期时间。如何清理这些对象，或者缩短过期时间。

提前致谢 ...

# html - jQueryUI 按钮集需要唯一的 ID

> ID：10570957
> 
> 赞同：1
> 
> 时间：2012-05-13T10:19:09.027
> 
> 标签：html, jquery-ui, jquery-plugins, button, label

如果您使用 jQueryUI 创建单选框/复选框输入的按钮集，则必须使用显式标签。这意味着您必须将 a `label`by ID 与`input`.

如果您想在同一页面上使用多个相同的按钮集，这意味着您不能只对每个按钮集使用相同的代码，因为 ID 在文档中必须是唯一的。

大多数浏览器都会接受非唯一 ID，但我宁愿不要被迫打破 Web 标准，而且显然不能保证浏览器将来会继续支持非唯一 ID。

我可以为每种情况生成唯一的 ID，但这会使代码复杂化并增加了保证 ID 确实是唯一的问题。

处理多个相同按钮集的最佳方法是什么？

这说明了这个问题：http: [//jsfiddle.net/C3NyV/1/](http://jsfiddle.net/C3NyV/1/)

在我的特殊情况下，按钮集是由使用 Widget 工厂创建的插件生成的。我不知道这是否有助于解决这个特定问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T01:44:22.730

无论 jQuery UI 是什么，出于可访问性原因，您都应该将所有输入的`id`属性与带有该属性的标签匹配。`for`当屏幕阅读器遇到输入字段时，它会使用此条件查找匹配的标签。

我建议不要生成唯一标识符，而是使用更具语义的东西来区分不同的集合。它可能需要更多的工作，但它会是更标准、更易于访问和可维护的代码。

# iphone - iPhone 应用程序之间的进程间通信

> ID：10570960
> 
> 赞同：1
> 
> 时间：2012-05-13T10:19:36.080
> 
> 标签：iphone, ipc, communication

我需要在始终运行的中央应用程序和可能从该应用程序请求服务的其他应用程序之间实现通信。即使这些请求已经关闭（即加载它们以获取响应），也应该有一种方法可以与这些请求进行通信。在 iPhone 上实现它的最佳方法是什么？（在 Android 上，可以使用 StartActivity 完成解决方案）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T11:38:05.543

如果越狱是一个选项，请尝试使用 CPDistributedMessagingCenter 类。它在 iPhone Dev Wiki 上有一个非常好的文档（只需 google 即可）。您可能还想看看我是如何使用它的，我的一项调整是：[在 GitHub 上](https://github.com/H2CO3/PwnTube/blob/68c2786de5b0c0581ab2c89e6461d2c8e50b318b/PTDaemonDelegate.m)查看守护程序的实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T10:37:26.827

在同一台设备上？使用官方 API 是不可能的。

# objective-c - 在翻译过程中改变图像

> ID：10570963
> 
> 赞同：5
> 
> 时间：2012-05-13T10:20:12.000
> 
> 标签：objective-c, ios, core-animation, cabasicanimation

如何在翻译过程中使用一组图像（即在 img1 和 img2 之间切换）更改 myLayer.contents？谢谢！

```
UIImage *myImage = [UIImage imageNamed:@"img1.png"];
CALayer *myLayer = [CALayer layer];
myLayer.contents = (id)myImage.CGImage;
myLayer.Position = CGPointMake(0,0);
myLayer.Bounds=CGRectMake(0.0, 0.0, 50, 50);
[self.view.layer addSublayer:myLayer];

//translation1
CGPoint startPt = CGPointMake(10,10);
CGPoint endPt = CGPointMake(100,100);    
CABasicAnimation *transl1 = [CABasicAnimation animationWithKeyPath:@"position"];
transl1.removedOnCompletion = FALSE;
transl1.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
transl1.fromValue = [NSValue valueWithCGPoint:startPt];
transl1.toValue = [NSValue valueWithCGPoint:endPt];
transl1.duration = 3;
transl1.fillMode = kCAFillModeForwards;
transl1.beginTime = 0;
[myLayer addAnimation: transl1 forKey:  nil]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T14:35:07.387

行走的人示例：

我处理了完全相同的任务，但我必须做一个运行蜘蛛，它是 6 腿步行，有 12 帧。这实际上很难做到，我花了几个月的时间来完善。问题是，醒着的人示例通常是通过将一组图像帧（第一条腿，最后一条腿）设置为 UIImageView 的动画图像属性来完成的。然后你打开和关闭动画以及左右移动的角色，从而产生行走的错觉。现在，当您想要创建加速错觉时，就会出现大问题。在动画播放期间无法更改动画持续时间，这是一个很难克服的重大挫折。

这是我为解决此问题而生成的代码：

在这里，您定义了一个包含步行腿框架的数组，每步框架。

```
animationImagesSpider = [NSArray arrayWithObjects:
[UIImage imageNamed:@"1@2x.png"], [UIImage imageNamed:@"2@2x.png"], [UIImage imageNamed:@"3@2x.png"], [UIImage imageNamed:@"4@2x.png"], [UIImage imageNamed:@"5@2x.png"], [UIImage imageNamed:@"6@2x.png"], [UIImage imageNamed:@"6@2x.png"], [UIImage imageNamed:@"8@2x.png"], [UIImage imageNamed:@"9@2x.png"], [UIImage imageNamed:@"10@2x.png"], [UIImage imageNamed:@"11@2x.png"], [UIImage imageNamed:@"1@2x.png"], nil]; 
```

在这里，您将数组附加到 UIImageView：

```
imgViewSpider = [[UIImageView alloc] initWithFrame:CGRectMake(200,410,100,145)];
imgViewSpider.animationImages = animationImagesSpider; 
```

现在如果你简单地调用 [imgViewSpider startAnimating]; 这将以恒定速度启动动画，直到您停止它。为了克服这个问题，我使用了一个递归，它为每个步骤播放一个简短的动画，这允许调整每个步骤之间的持续时间：

```
- (void) spiderRun {

    imgViewSpider.animationDuration= 0.51-(accSp/3.5);
    [imgViewSpider setAnimationRepeatCount:222]; /// this is a dummy value that has no effect because animtion ends after the first frame
    [imgViewSpider startAnimating];
    [self performSelector:@selector(spiderRun) withObject:nil afterDelay: 0.5-(accSp/3.5)];

} 
```

通过不断改变 accSp 的值，我可以控制行走过程中的行走速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T12:01:45.320

正如另一张海报所说，创建第二个动画，将图层的内容属性设置为新图像。

我建议将两个动画放入一个动画组中，并将动画组添加到图层中。然后，您可以轻松控制两个动画的持续时间和开始时间。您可以在总持续时间的一部分内进行图像交换，定时在动画中间进行。

您将使用 beginTime 属性设置动画的开始，并使用 duration 属性设置持续时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T10:47:52.887

您将需要创建第二个动画 transl2，此动画将使图像交换。您需要将持续时间设置为 transl1 持续时间的一半，以便它位于 transl1 动画的中间。

transl1.duration = 3

transl2.duration = 1.5

# mysql - bash:scripts/mysql_install_db: 没有这样的文件或目录

> ID：10570964
> 
> 赞同：0
> 
> 时间：2012-05-13T10:20:31.333
> 
> 标签：mysql, debian

我在 debian 6.0.4 中安装 mysql-5.5.13.tar.gz。我正在按照[此处](http://dev.mysql.com/doc/refman/5.0/en/binary-installation.html) 的步骤运行该步骤时

```
脚本/mysql_install_db --user=mysql
```

我得到了一个例外

```
bash：脚本/mysql_install_db：没有这样的文件或目录
```

但文件存在于该地方。我也制作了那个可执行文件，但它不起作用。我在根终端工作。请帮我解决这个问题。

谢谢

我安装了

```
mysql-5.5.24-linux2.6-i686.tar.gz
```

现在执行命令后

```
root@server06:/usr/local/mysql# scripts/mysql_install_db --user=mysql
```

我收到了消息

```
正在安装 MySQL 系统表...
./bin/mysqld：加载共享库时出错：libaio.so.1：无法打开共享对象文件：没有这样的文件或目录系统表安装失败！检查登录
./data 了解更多信息。

您可以尝试使用以下命令启动 mysqld 守护进程：

```
shell> ./bin/mysqld --skip-grant & 
```

并使用命令行工具 ./bin/mysql
连接到 mysql 数据库并查看授权表：

```
shell> ./bin/mysql -u root mysql
mysql> show tables 
```

如果路径有问题，请尝试“mysqld --help”。使用 --log
为您提供可能有用的登录 ./data。

请查阅 MySQL 手册部分
'运行 mysql_install_db 的问题'，以及手册部分
描述您的操作系统上的问题。另一个信息来源是
MySQL 电子邮件存档可在[http://lists.mysql.com/](http://lists.mysql.com/)获得。

请在邮寄给我们之前检查以上所有内容！请记住，如果
你给我们发邮件，你必须使用 ./bin/mysqlbug 脚本！
```

并且mysql没有启动。请帮助我，我应该下载另一个吗？

我使用 apt-get 安装了“libaio”，然后安装成功。但是当我使用命令启动 mysql

```
bin/mysqld_safe --user=mysql &
```

我收到了消息

```
root@server06:/usr/local/mysql# bin/mysqld_safe --user=mysql
120514 16:10:11 mysqld_safe 记录到“/var/lib/mysql/server06.err”。
120514 16:10:11 mysqld_safe 使用 /var/lib/mysql 中的数据库启动 mysqld 守护进程
120514 16:10:13 来自 pid 文件 /var/run/mysqld/mysqld.pid 的 mysqld_safe mysqld 结束
```

在 /var/lib/mysql/server06.err 文件中，我发现以下内容

```
20514 16:15:49 [注]
120514 16:15:49 来自 pid 文件 /var/run/mysqld/mysqld.pid 的 mysqld_safe mysqld 结束
120514 16:17:57 mysqld_safe 使用 /var/lib/mysql 中的数据库启动 mysqld 守护进程
120514 16:17:57 [错误] 找不到消息文件'/usr/share/mysql/english/errmsg.sys'
120514 16:17:57 [注意] 插件 'FEDERATED' 已禁用。
120514 16:17:57 InnoDB：InnoDB 内存堆已禁用
120514 16:17:57 InnoDB：互斥锁和 rw_locks 使用 InnoDB 自己的实现
120514 16:17:57 InnoDB：压缩表使用 zlib 1.2.3
120514 16:17:57 InnoDB：使用 Linux 原生 AIO
120514 16:17:57 InnoDB：初始化缓冲池，大小 = 128.0M
120514 16:17:57 InnoDB：缓冲池初始化完成
120514 16:17:57 InnoDB：支持的最高文件格式是梭子鱼。
120514 16:17:57 InnoDB：等待后台线程启动
120514 16:17:58 InnoDB：1.1.8 已启动；日志序列号 1595675
120514 16:17:58 [错误] 中止

120514 16:17:58 InnoDB：开始关机...
120514 16:17:59 InnoDB：关闭完成；日志序列号 1595675
120514 16:17:59 [注]
120514 16:17:59 来自 pid 文件 /var/run/mysqld/mysqld.pid 的 mysqld_safe mysqld 结束
```

我对此进行了很多搜索，但找不到解决方案。任何帮助都会被告知谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-17T03:49:48.130

你需要安装`libaio-dev`

基于 Debian 的发行版的说明：

`sudo apt-get install libaio-dev`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T11:47:56.327

通过存档文件名`mysql-5.5.13.tar.gz`，我猜您可能已经下载了 MySQL 数据库的源代码版本。这就是安装过程不起作用的原因。要遵循说明，您需要一个包含二进制版本的存档，其文件名应该更像`mysql-5.5.24-linux2.6-x86_64.tar.gz`或`mysql-5.5.24-linux2.6-i686.tar.gz`（取决于架构）。

另一种识别您是否拥有正确存档的方法是查看提取的目录。一个源代码版本将有很多文件和目录，包括诸如`INSTALL-SOURCE`, `configure`, `Makefile.am`, `sql`, `mysys`,`unittest`等。二进制版本包含诸如`bin`, `sbin`,`libexec`等的目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T22:16:28.130

做

```
cd scripts
./mysql_install_db.sh 
```

如果有任何粘贴错误

# r - 如何使用 R 替换文件中的单个值？

> ID：10570966
> 
> 赞同：2
> 
> 时间：2012-05-13T10:20:46.740
> 
> 标签：r

我正在尝试将文件中的值 528.8933 替换为 -9999

```
conne <- file("C:\\PHD\\72005ready\\latitude\\latitudefloat.bin", "rb")
   a<- readBin(conne, integer(), size=2,  n=360*720, signed=F)  
           a[a == 528.8933] <- -9999 
```

我使用了上面给出的代码。但是当我检查结果并没有被取消时。请提供任何帮助

* * *

编辑：

问题还没有解决，我会说的更清楚。我正在尝试将文件中的值 528.8933 替换为 -9999：

```
 t<- file("C:\\Users\\Amin\\Desktop\\1999n_Resample11.img",    "rb")
           e=readBin(t, double(), size=4,n=720*360, signed=TRUE)
          e[e != -9999] <- e[e != -9999]*0.0099 + 77.65 -273.15 
```

上面给出的这段代码将读取一个二进制文件。然后它会对 e 做一些计算。效果很好。我再次打开文件以查看结果，发现奇怪的数字（528.8933）。

然后我使用了这条线：

```
e[e == 528.8933] <- -9999 
```

将 528.8933 的值替换为 -9999。我没有收到任何错误，但是当我再次查看这些值时，我发现它们原样（528.8933 仍然存在）。提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T11:27:15.187

好的，首先：您读错了类型。您的值不是整数，因为它们包含小数。所以你必须阅读 using`numeric()`而不是`integer()`. 请注意，这真的有很大的不同！

要再次写入数据，您需要`writeBin()`，但再次确保您的类型正确！

一个简单的例子：

让我们用整数创建一个文件：

```
a <- 1:10

myConn <- file('testBin.bin',open='wb')
writeBin(a,myConn)
close(myConn) 
```

您可以像以前一样再次阅读：

```
myConn <- file('testBin.bin',open='rb')
x <- readBin(myConn,integer(),n=10)
close(myConn) 
```

现在您可以更改一个值。请注意，通过这样做，您将类型从更改`integer`为`numeric`！

```
> is.integer(x)
[1] TRUE
> x[x==5] <- 10
> is.integer(x)
[1] FALSE 
```

您可以像以前一样再次保存：

```
myConn <- file('testBin2.bin',open='wb')
writeBin(x,myConn)
close(myConn) 
```

现在是重要的部分。如果你尝试在 using 中读取这个文件`integer()`，你会得到：

```
> myConn <- file('testBin2.bin',open='rb')
> X <- readBin(myConn,integer(),n=10)
> close(myConn)
> X
 [1]          0 1072693248          0 1073741824          0 1074266112
 [7]          0 1074790400          0 1076101120 
```

那就是你做错了。检查您的值`a`，它们不会是您所期望的。所以你需要使用`numeric()`as 类型：

```
> myConn <- file('testBin2.bin',open='rb')
> X <- readBin(myConn,numeric(),n=10)
> close(myConn)
> X
 [1]  1  2  3  4 10  6  7  8  9 10 
```

`?readBin`另请仔细阅读帮助文件。

* * *

**回答您的编辑：**

您在编辑中谈到的问题似乎是双重的：

1.  您没有使用正确的类型来读取更正的二进制文件。`class(e)`在您进行计算之后使用例如检查。可能这会告诉你`numeric`而不是`double`

2.  您期望打印的值`528.8933`正是该值。不是，它是四舍五入的，但真正的价值是别的东西。因此，您的比较`e == 528.8933`不会返回任何内容，因为真实值将是 eg `528.8933452...`。

要解决这个问题，请尝试：

```
round(e,4) == 528.8933 
```

反而。

# android - 无法从广播接收器获取资源

> ID：10570967
> 
> 赞同：5
> 
> 时间：2012-05-13T10:20:47.237
> 
> 标签：android, string, broadcastreceiver

出于某种原因，我无法获取 strings.xml 中的字符串。这是我的代码：

```
public class SDK_Referrer extends BroadcastReceiver {
@Override
public void onReceive(Context context, Intent intent) {  
String srt = context.getResources().getString(R.string.master); 
```

它无法识别“主”字符串。当我检查我在 R.string 中得到的选项时......我得到的东西是 R.string.copy、R.string.cancel 或 R.string.ok...... xml 文件。这是为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T10:40:49.883

您可能正在使用您自己的应用程序中的那个`import`；`android.R`

# android - ORMLite 重置所有表

> ID：10570968
> 
> 赞同：11
> 
> 时间：2012-05-13T10:21:53.887
> 
> 标签：android, ormlite

我有一个使用[ORMLite](http://ormlite.com/)的应用程序。我需要创建一个函数来重置整个数据库（基本上我需要从每个数据库中删除所有行，重置自动增量并重置索引）。

我可能可以通过在每个表上启动截断来做到这一点，但是 ORMLite 有一些特定的方法来做到这一点吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-13T19:01:03.317

ORMLite 没有重置整个数据库的特殊方法。它确实支持从表中删除所有行的[`TableUtils.clearTable(connectionSource, dataClass))`方法](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/table/TableUtils.html#clearTable(com.j256.ormlite.support.ConnectionSource,%20java.lang.Class))，这将清除索引，但这不会重置自动增量。另外，我不确定“重置索引”的含义不仅仅是清除它们。重置自动增量的过程将非常依赖于数据库，因此 ORMLite 很可能永远不会有本机支持。

我认为您最好的选择是使用[删除表`TableUtils.dropTable()`](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/table/TableUtils.html#dropTable(com.j256.ormlite.support.ConnectionSource,%20java.lang.Class,%20boolean))，然后使用 重新[创建它`TableUtils.createTable()`](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/table/TableUtils.html#createTable(com.j256.ormlite.support.ConnectionSource,%20java.lang.Class))。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-06T12:32:31.533

有一种可能的方法.. 删除数据库但此方法通常用于用户注销并使用另一个用户 ID 等登录时，在登录时创建数据库并在注销时删除数据库。

```
mContext.deleteDatabase("xxxxxx"); 
```

其中“xxxxx”是数据库名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T16:14:21.487

您还可以使用 TableUtils.createTableIfNotExists(source,dataClass)。测试时很有用。

# python - 如何在 Python 中解析维基百科页面？

> ID：10570969
> 
> 赞同：1
> 
> 时间：2012-05-13T10:22:22.453
> 
> 标签：python

我一直在尝试用 Python 解析一个维基百科页面，并且使用 API 非常成功。

但是，不知何故，API 文档对我来说似乎有点过于简陋，无法获取所有数据。截至目前，我正在做一个 requests.get() 调用

```
http://en.wikipedia.org/w/api.php?action=query&prop=extracts&titles=China&format=json&exintro=1 
```

但是，这只会让我返回第一段。不是整个页面。我尝试使用所有页面和搜索，但无济于事。更好地解释如何从 wiki 页面获取数据会很有帮助。所有数据，而不仅仅是前面查询返回的介绍。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T10:41:25.863

您似乎正在使用查询操作来获取页面的内容。根据它的 api 规范，它只返回一部分数据。正确的操作似乎是查询。

这是一个示例

```
import urllib2
req = urllib2.urlopen("http://en.wikipedia.org/w/api.php?action=parse&page=China&format=json&prop=text")
content = req.read()
# content in json - use json or simplejson to get relevant sections. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T10:39:29.073

您是否考虑过使用[Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/)从页面中提取内容？

虽然我没有将它用于维基百科，但其他人已经使用它来抓取其他页面，它是一个很好的工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-01T17:27:21.313

如果有人在这里寻找 python3 答案，你去：

```
import urllib.request
    req = urllib.request.urlopen("http://en.wikipedia.org/w/api.php?action=parse&page=China&format=json&prop=text")
    print(req.read()) 
```

我正在使用 python 版本 3.7.0b4。

# android - Android Google Play 应用中的精选列表？

> ID：10570971
> 
> 赞同：1
> 
> 时间：2012-05-13T10:22:48.300
> 
> 标签：android, android-layout, android-widget, google-play

我想知道 Android Google play 应用程序中的主要活动是如何实现的，它是 ListView、GridView 还是 TableLayout ？

实施此类清单的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T10:43:00.600

要检查它到底是什么，您可以使用 ADT 的 Hierarchy View 工具。

但我的看法是：

*   由于数据量恒定且很小，因此不需要ListView
*   由于每个“行”的“列”数不同，GridView 或 TableLayour 也不适合
*   因为布局总是相同的，只有内容发生变化，最明显的方法是有一个垂直的 LinearLayout 作为根，每个“行”都有一个 GridView（或水平的 LinearLayout）。

# c# - C# 3.5 中的异步编程

> ID：10570972
> 
> 赞同：5
> 
> 时间：2012-05-13T10:23:06.303
> 
> 标签：c#, asynchronous, parallel-processing

我必须在 Windows 应用程序（.net 3.5 C#）中进行异步编程，方法是在后台执行长进程并在用户界面上向用户显示进度表。我该如何做这个基于 Windows 的应用程序

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T10:46:33.757

检查[异步编程设计模式](http://blogs.msdn.com/b/thottams/archive/2009/04/11/asynchronous-delegates-and-calback.aspx)、[线程池](http://msdn.microsoft.com/en-us/library/ms228969%28v=vs.90%29)、[基于事件的异步模式](http://www.albahari.com/threading/part3.aspx#_Event-Based_Asynchronous_Pattern)、基于[事件的异步模式概述 msdn](http://msdn.microsoft.com/en-us/library/wewwczdw.aspx)和 [BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T10:26:33.047

查看[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)类：

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-13T10:26:58.117

好吧，你让你的长进程在不同的线程中异步运行并通知 UI 线程。如果您需要更多详细信息，则需要提供更多详细信息和一些代码。

# android - 首先添加的小部件不可点击。第二个是

> ID：10570973
> 
> 赞同：0
> 
> 时间：2012-05-13T10:23:45.367
> 
> 标签：android, android-widget, broadcastreceiver, clickable

在我的 Broadcastreceiver 中，它同时是一个小部件。在我安装后第一次添加小部件时，它不可点击。我添加的第二个小部件是可点击的。虽然第一个小部件仍然不可点击。

在模拟器中测试不同版本时发生此错误。我手头没有其他设备，我可以一直重置。对于测试，我总是从“擦除用户数据”开始，以确保它是全新安装。

它适用于 1.6，但不适用于 2.x

我的偏好屏幕是手动独立活动，必须单独启动。

如果您需要更多信息，请告诉我。

这是我使它可点击的代码：

```
 @Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
    super.onUpdate(context, appWidgetManager, appWidgetIds);
    Log.d(LOG_TAG, "Update");
    for (int id : appWidgetIds) {
        Intent intent = new Intent(ACTION);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, intent, 0);
        //make widget clickable
        RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.main);
        remoteViews.setOnClickPendingIntent(R.id.imageview, pendingIntent);
        appWidgetManager.updateAppWidget(id, remoteViews);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T10:37:45.370

这是一个长镜头 - 在实例`PendingIntent.getBroadcast`之间更改请求代码；`PendingIntent`我认为我的一个小部件也遇到了同样的问题，而这一变化已经解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T12:20:29.953

我发现了错误。

这是 android 模拟器别名 AVD 中的一个错误。该死的东西。希望这可以帮助其他人不要在不存在的错误上浪费太多时间。

[http://code.google.com/p/android/issues/detail?id=8889](http://code.google.com/p/android/issues/detail?id=8889)

错误 id 8889 “appWidgetManager.updateAppWidget 未更新 2.0、2.1 以下新 AVD 上的小部件”

一种解决方法是在开始擦除用户数据之后（我为此禁用了保存到快照 - 未启用测试）。比退出。比不擦就重新开始。其他人写道，您可以使用 ctrl+F11 两次更改为横向模式并返回。

# emacs - emacs 缓冲区列表中的颜色

> ID：10570974
> 
> 赞同：5
> 
> 时间：2012-05-13T10:23:58.993
> 
> 标签：emacs, emacs24

嗨，我如何为 emacs 缓冲区菜单着色，我想为不同类型的文件设置不同的颜色。这应该可以更轻松地导航大量缓冲区。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T12:39:09.847

试试`M-x``ibuffer`。它可以作为`list-buffers`( `C-x C-b`) 的替代品，具有丰富的过滤、排序等额外功能。调用后，使用`C-h m`更多细节。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T11:41:38.483

请参阅[EmacsWiki](http://emacswiki.org/emacs/BufferMenu)，它包含一些指向增强缓冲区菜单的链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-18T16:56:26.077

或者你可以找到你最好的 Keybind：

(global-set-key (kbd "Cx Cb") 'buffer-menu)

相反`C-x C-b`，如果你有另一个更好的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-20T00:32:53.433

我发现了具有我需要的所有功能的 ibuffer .. 谢谢

[http://www.emacswiki.org/emacs/IbufferMode](http://www.emacswiki.org/emacs/IbufferMode)

# python - 从电子邮件地址检测：Google 日历用户？

> ID：10570977
> 
> 赞同：0
> 
> 时间：2012-05-13T10:24:15.460
> 
> 标签：python, email, google-calendar-api

我正在做一个处理日历的小应用程序，我很想向我的用户的联系人发送邀请。

我想知道，有没有一种方法（甚至复杂，我不介意）可以让我知道某个特定联系人是否使用 Google 日历，这样我就可以向他们发送简单的电子邮件邀请或功能齐全的 Google日历邀请（他们熟悉并可以在 Gmail 中一键回复）？

*   **输入：**联系人的电子邮件地址。（例如`steve.jobs@apple.com`，，`my.mom@gmail.com`...）
*   **输出：**布尔信息“此联系人是否使用 Google 日历？”
    *   子任务：布尔信息“此联系人是否使用 Google 应用程序？”

解决子任务或多或少是可能的。谷歌使用两个域直接对程序员大喊“我们来自谷歌！！！”，即`gmail.com`和`googlemail.com`（由于某些法律限制，第二个域在英国和德国使用）。在 Python 中，就是这么简单：

```
def uses_google(email):
    return email.endswith(('gmail.com', 'googlemail.com')) 
```

好吧，还有 Google Apps。任何人都可以在自己的域上运行它们。这应该（只要 OpenID 正确安装）解决这个问题的答案：[如何检测电子邮件是否是 Google 帐户？](https://stackoverflow.com/questions/4263888/how-to-detect-if-an-email-is-a-google-account)

但是谷歌日历的使用呢？

甚至有必要解决这样的问题吗？如果我在未连接到 Google 日历的情况下向电子邮件发送邀请会怎样？有些东西告诉我这不太好（也许只注意到“Honza 向您发送了邀请，如果您想回复，请开始使用 Google 日历”）。作为日历的用户，我知道当有人通过错误的电子邮件向我发送邀请时，我什至无法回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T11:56:31.190

这里有很多问题，但我会解决这个问题。

首先，使用 Google 的邮件服务并不能保证所有者*使用*其他 Google 服务。是的，您可以假设他们具有*访问权限*并且他们将能够接受邀请，但这并不意味着他们*将*其用作他们的日历。

至于以某种方式收集有关基于非 Google 电子邮件地址使用的 Google 服务的信息，这似乎是不可能的。这些信息在客户和谷歌之间是私有的，而且我想象的也是谷歌的专有信息。

# javascript - 字符串输出中的Javascript变量？

> ID：10570978
> 
> 赞同：0
> 
> 时间：2012-05-13T10:24:35.030
> 
> 标签：javascript, facebook-graph-api, variables

变量 x 正在获取当前 url。然后我需要把这个 url 放到 xxxx 所在的位置。我该怎么做呢？

```
<script type='text/javascript'>
      function postListen()
       {
    var x = ( document.URL ); 
          FB.api(
            &#39;/me/beatmushroom:listen&#39;,
            &#39;post&#39;,
            { song:  xxxx},
            function(response) {
               if (!response || response.error) {
                  alert(&#39;Error occured&#39;);
       } else {
          alert(&#39;Listen was successful! Action ID: &#39; + response.id);
       }
    }); 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T10:27:48.093

只需在对象文字中使用变量。虽然键始终是字符串（即使没有引号），但值可以是任何 JavaScript 表达式：

```
{ recipe: x }, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T10:27:37.583

只需替换`'xxxx'`为变量`x`

```
function postCook() {
    var x = ( document.URL );
    FB.api(
        '/me/[YOUR_APP_NAMESPACE]:cook',
        'post',
        { recipe: x },
        function(response) {
           if (!response || response.error) {
              alert('Error occured');
           } else {
              alert('Cook was successful! Action ID: ' + response.id);
           }
        }
    );
} 
```

# lucene - Lucene：按特定顺序搜索短语

> ID：10570980
> 
> 赞同：0
> 
> 时间：2012-05-13T10:24:37.677
> 
> 标签：lucene

使用 lucene 我想按特定顺序搜索短语（多个单词）。我遇到了 spanquery 的示例，用于按特定顺序搜索单个术语，但这不符合我的要求，因为当 slop 不一定为零时，我想搜索文档中以特定顺序出现的“短语”。那么我们在 lucene 中有没有这样的特性呢？或者我们可以使用 spanquery 按特定顺序搜索短语吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:22:42.080

您在寻找[PhraseQuery](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/all/index.html?org/apache/lucene/search/PhraseQuery.html)吗？

# python - Pywin32 与 Eclipse

> ID：10570984
> 
> 赞同：0
> 
> 时间：2012-05-13T10:25:31.437
> 
> 标签：python, eclipse, windows-services, pywin32

参考有关 Pywin32 windows 服务（[Python win32 服务](https://stackoverflow.com/questions/4499859/python-win32-service)）的文章，我是 Python 新手，我想在 python 中构建一个 windows 服务。上面给出的文章非常有帮助。我在 Eclipse 中使用 Python2.7 并安装了 pywin32-217.win32-py2.7。当我复制代码并执行时，它运行良好，但所有导入的模块都显示为红色下划线，表示未解析导入（但它有效）。谁能帮我解决这个问题，请告诉我eclipse是否支持Pywin32的代码自动完成。如果是，请告诉我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:55:11.357

在 Windows 上：

确保您`[python root]/Lib/site-packages/win32`在`System PYTHONPATH`解释器设置中（窗口 -> 首选项 -> PyDev -> 解释器 - Python）。这应该让您完全自动完成，并让 Eclipse 识别您的 win32 导入。

希望这可以帮助。

# exception-handling - 捕获“找不到服务器”异常

> ID：10570985
> 
> 赞同：0
> 
> 时间：2012-05-13T10:25:34.017
> 
> 标签：exception-handling, xul, xulrunner

在独立的 XUL 应用程序中，我想捕捉`server not found`异常。我已经尝试通过检查状态来检查`onStateChange`，`nsIWebProgressListener`但这似乎不起作用。我的`onStateChange`事件实现如下图所示。我假设如果`STATE_START`或`STATE_STOP`没有返回有效值，则页面加载有问题，并向用户显示错误消息。

```
onStateChange: function(aProgress, aRequest, aFlag, aStatus) {
  const STATE_START = Components.interfaces.nsIWebProgressListener.STATE_START;
  const STATE_STOP = Components.interfaces.nsIWebProgressListener.STATE_STOP; 

  if(aFlag & STATE_START) {
      document.getElementById("progressBar").hidden = false;
  }
  if(aFlag & STATE_STOP) {
      setTimeout(function() { document.getElementById("progressBar").hidden = true; }, 2000);     
  }

  if(aFlag & (!STATE_START | !STATE_STOP)) {
    alert("Your connection seems to be down. Please confirm with your system admin.");    
  }
  return 0; 
```

},

有人可以告诉我我做错了什么吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T06:33:18.447

`onStateChange`指示是否存在连接错误的参数是`aStatus`。例如，您可以使用[`Components.isSuccessCode`](https://developer.mozilla.org/en/Components.isSuccessCode)：

```
if ((aFlag & STATE_STOP) && !Components.isSuccessCode(aStatus))
{
  alert("Your connection seems to be down. Please confirm with your system admin.");
} 
```

您还可以比较`aStatus`与`Components.results.NS_ERROR_UNKNOWN_HOST`“未找到服务器”错误对应的哪个。但是，如果连接断开，则可能会出现许多其他错误，例如`NS_ERROR_CONNECTION_REFUSED`（连接失败）、`NS_ERROR_UNKNOWN_PROXY_HOST`（未找到代理）、`NS_ERROR_OFFLINE`（在离线状态下尝试连接）。[您可以在nsNetError.h](http://mxr.mozilla.org/mozilla-central/source/netwerk/base/public/nsNetError.h)中找到完整的网络错误代码列表。

# javascript - Crockford 的去实体化方法 - The Good Parts 的第 41 页

> ID：10570990
> 
> 赞同：4
> 
> 时间：2012-05-13T10:25:49.410
> 
> 标签：javascript, function, module

为了自我提升，我正在阅读（并重读）Señor Crockford 的 TGP。然而，我无法理解他的去实体化方法的最中间部分。

```
...
return this.replace(...,
    function (a, b) {
       var r = ...
    }
); 
```

我想我明白：

1.  this.replace 传递了两个参数，作为搜索值的正则表达式和生成替换值的函数；
2.  b 用于访问实体对象中的属性；
3.  返回`? r : a;`位确定是按原样返回文本还是返回实体中相应属性的值。

我根本不明白 a & b 如何作为参数提供给`function (a, b)`. 什么在调用这个函数？（我知道整个事情是自动执行的，但这对我来说并没有真正清除它。我想我在问这个函数是如何被调用的？）

[如果有人有兴趣进行类似这样](https://stackoverflow.com/questions/2947749/line-by-line-explanation-of-javascript-good-parts-example)的逐次分析，我会非常感激，我怀疑其他人也可能会这样做。

为方便起见，这是代码：

```
String.method('deentityify', function ( ) {
    var entity = {
        quot: '"',
        lt: '<',
        gt: '>'
    };

    return function () {
        return this.replace(
            /&([^&;]+);/g,
            function (a, b) {
                var r = entity[b];
                return typeof r === 'string' ? r : a;
            }
        );
    };
}()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T10:31:46.737

该[`replace`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)函数可以将一个函数作为第二个参数。

然后为每个匹配调用此函数，其签名取决于正在搜索的正则表达式中的组数。如果正则表达式不包含任何捕获组，`a`则将是匹配的子字符串，`b`即整个字符串中的数字偏移量。有关更多详细信息，请参阅[MDN 文档](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_function_as_a_parameter)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-14T11:52:24.663

`a`不是数字偏移量，而是[匹配的 substring](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_function_as_a_parameter)。

`b`(在这种情况下) 是第一个分组，即匹配减去周围的`&`and `;`。

该方法检查以确保实体存在，并且它是一个字符串。如果是，那就是替换值，否则替换为原始值，减去`&`和`;`

# http - 解析时返回不同内容的页面

> ID：10570995
> 
> 赞同：2
> 
> 时间：2012-05-13T10:26:51.807
> 
> 标签：http, parsing

我必须解析这个页面：

[http://muoversiaroma.it/paline/percorso/52732?nav=3](http://muoversiaroma.it/paline/percorso/52732?nav=3)

如果通常由浏览器访问，它会返回正确的内容，但如果我尝试使用 @file_get_html($url) 或 file_get_html 解析它，它会返回看起来像默认页面的完全不同的内容。如果是这种情况，他们可能会在页面中插入什么来保护它，我该如何克服它？

谢谢，法布里齐奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T15:01:34.853

谢谢。[幸运的是，Atac 在http://beta.muovi.roma.it](http://beta.muovi.roma.it)有一个测试版网站，它提供了更好的错误消息，并且根据我的要求澄清了新版本也需要一个代理。一旦我提供了一个，测试版和主要版本都得到了正确解析。那是相关的代码：

```
$someUA = array (
"Mozilla/5.0 (Windows; U; Windows NT 6.0; fr; rv:1.9.1b1) Gecko/20081007 Firefox/3.1b1",
"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.1) Gecko/2008070208 Firefox/3.0.0",
"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US) AppleWebKit/525.19 (KHTML, like Gecko)    Chrome/0.4.154.18 Safari/525.19",
"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US) AppleWebKit/525.13 (KHTML, like Gecko) Chrome/0.2.149.27 Safari/525.13",
"Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; .NET CLR 1.1.4322; .NET CLR 2.0.50727; .NET CLR 3.0.04506.30)",
"Mozilla/4.0 (compatible; MSIE 7.0b; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.40607)",
"Mozilla/4.0 (compatible; MSIE 7.0b; Windows NT 5.1; .NET CLR 1.1.4322)",
"Mozilla/4.0 (compatible; MSIE 7.0b; Windows NT 5.1; .NET CLR 1.0.3705; Media Center PC 3.1; Alexa Toolbar; .NET CLR 1.1.4322; .NET CLR 2.0.50727)",
"Mozilla/45.0 (compatible; MSIE 6.0; Windows NT 5.1)",
"Mozilla/4.08 (compatible; MSIE 6.0; Windows NT 5.1)",
"Mozilla/4.01 (compatible; MSIE 6.0; Windows NT 5.1)"
);

function getRandomUserAgent() {
   srand((double)microtime()*1000000);
   global $someUA;
   return $someUA[rand(0,count($someUA)-1)];
 }

function atac_get_html($url, $language){
//$url='http://muovi.roma.it/paline/palina/77113?nav=4'; //manual forcing
set_include_path("/iPhone/simplehtmldom_1_5");
require_once('simple_html_dom.php');
require_once('atacurl.php');
// Create DOM from URL or file
//$atacurl=atacurl();
//$languageUrl=$atacurl."/lingua/set/".$language;

$languageUrl="http://muovi.roma.it/lingua/set/en";
if (!isset($_SESSION['ckfile'])) {
    $ckfile = tempnam ("/tmp", "CURLCOOKIE");
    $_SESSION['ckfile']=$ckfile;
/* STEP 2\. visit the homepage to set the cookie properly */
    $ch = curl_init ($languageUrl);
    curl_setopt ($ch, CURLOPT_COOKIEJAR, $ckfile); 
    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($ch, CURLOPT_USERAGENT, getRandomUserAgent());
    $output = curl_exec ($ch);
}
}
$ckfile=$_SESSION['ckfile'];
 /* STEP 3\. visit cookiepage.php */
$ch = curl_init ($url);
curl_setopt ($ch, CURLOPT_COOKIEFILE, $ckfile); 
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_USERAGENT, getRandomUserAgent());
$output = curl_exec ($ch);
curl_close( $ch );
return str_get_html($output);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T08:01:14.543

您的问题几乎肯定与标题有关。以下是您可以测试的内容（注意：我使用`file_get_contents()`而不是`file_get_html()`因为我没有[简单的 HTML DOM 解析器](http://simplehtmldom.sourceforge.net/)库，但结果应该是可比较的）：

1) 在您的 PHP 服务器上创建一个名为“test.php”的文件，其中包含这些内容（如果您愿意，可以使用另一个端口而不是 9002）：

```
<?=file_get_html('http://localhost:9002/');?> 
```

2) 从终端，​​在上面使用的任何端口上以侦听模式运行 netcat：

```
nc -lp9002 
```

3) 在您的浏览器中，点击测试页面：`http://YOUR_SITE.com/PATH/test.php`. Netcat 将显示 HTML 解析器发送的标头：

```
GET / HTTP/1.0
Host: 192.168.1.127:9002 
```

4) 现在关闭 netcat ( `CTRL+C`)，然后像第 2 步一样重新启动它。

5）这次直接从浏览器访问该端口：`http://YOUR_SITE.com:9002/`. 现在，Netcat 将显示您的浏览器正在发送哪些标头：

```
GET / HTTP/1.1
Host: harveyserv.ath.cx:9002
User-Agent: Mozilla/5.0 (Windows NT 6.0; rv:12.0) Gecko/20100101 Firefox/12.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive 
```

因此，您遇到的问题可能是这些差异中的任何内容，但对于初学者，您可以查看在`file_get_contents()`当今大多数浏览器使用 HTTP 1.1 时发送 HTTP 1.0 请求的事实（这也对应于“连接：保持活动”标题）。还有很多网站根据“User-Agent”和“Accept”标头发送不同的内容。

希望有帮助。

# php - 文件大小 imagemagick 缩略图

> ID：10570996
> 
> 赞同：0
> 
> 时间：2012-05-13T10:26:56.993
> 
> 标签：php, image, image-processing, imagemagick

我需要用 imagemagick 创建缩略图.. 但缩略图的文件大小非常大！

```
convert -resize 80x80 -quality 70 file.jpg file-thumb.jpg 
```

例子：

```
file.jpg (1100x825px, 75kb) => file-thumb.jpg (80x60px, 29kb) 
```

它只是没有任何意义，拇指最终变得如此之大！？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T11:47:29.277

改用这个：

```
convert file.jpg -thumbnail 80x80 -quality 70 file-thumb.jpg 
```

这将剥离所有 EXIF 数据等，但保留颜色配置文件。

请注意首先读取图像。

# assembly - 组装 MIPS 仅使用 BEQ 评估差异

> ID：10570999
> 
> 赞同：2
> 
> 时间：2012-05-13T10:27:11.173
> 
> 标签：assembly, mips

嗨必须编写这个循环：

```
for($6=10;$6!=0;$6--){ 
    $7=$6; 
} 
```

但有一些条件。我只能使用`BEQ`并且必须假设每个寄存器的初始值是寄存器的编号。

如何仅使用 评估这种差异`BEQ`？

我做了这个

```
main:
    add   $6,$5,$5
    for:
        add     $7,$6,$0
        sub     $6,$6,$1
        beq     $6,for 
```

但我坚持验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T00:34:15.407

1.  将 $6 设置为 10。当您要覆盖 $6 时，为什么要给它一个初始值 6？
2.  输入您的循环并将 $7 设置为 $6。
3.  如果 $6 等于 0，则递减 $6 并跳转到下一个标签，否则跳转回循环的开头。

编码：

```
li $6, 10
for:
    move $7, $6
    subi $6, $6, 1
    beq $6, $0, end
    j for
end: 
```