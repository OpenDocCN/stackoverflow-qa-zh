# StackOverflow 问答 11217000-11217999

# mysql - 在 MySQL 中工作的 SQL 语句在 Postgresql 中不起作用 - Sum & group_by rails 3

> ID：11217001
> 
> 赞同：0
> 
> 时间：2012-06-26T22:46:31.623
> 
> 标签：mysql, sql, ruby-on-rails, ruby-on-rails-3, postgresql

所以我对一般的 SQL 工作很陌生，更不用说 rails 了，但我有这个在 MySQL 中工作的语句：

```
portfolio_values.select("portfolio_values.*, SUM(portfolio_values.value) as totals").group("portfolio_values.day").map(&:totals) 
```

但是在 postgresql 中抛出了这个错误：

> GError：错误：列“portfolio_values.id”必须出现在 GROUP BY 子句中或在聚合函数中使用：从“portfolio_values”中选择“portfolio_values.*, SUM(portfolio_values.value)”作为“portfolio_values”的总计。“user_id” = 3 GROUP BY portfolio_values.day ActiveRecord::StatementInvalid: PGError: ERROR: column "portfolio_values.id" 必须出现在 GROUP BY 子句中或在聚合函数中使用

我只是不明白它在说什么我应该做不同的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:52:22.913

从 PostgreSQL **9.1**开始，列表中的主键列`GROUP BY`覆盖了整个表。因此，假设`portfolio_values.id`实际上是主键，您可以简化：

```
portfolio_values.select("portfolio_values.*, SUM(portfolio_values.value) as totals").group("portfolio_values.id").map(&:totals) 
```

我引用[9.1 发行说明](http://www.postgresql.org/docs/current/interactive/release-9-1.html#AEN107670)：

> 当在 GROUP BY 子句中指定主键时，允许查询目标列表中的非 GROUP BY 列 (Peter Eisentraut)
> 
> SQL 标准允许这种行为，并且由于主键，结果是明确的。

* * *

**但是**，在您的情况下，这两种方式都会导致**胡说八道**。

一种。`portfolio_values.id`是主键。

然后`SUM(portfolio_values.value)`就没意思了。每组只能有一行。

湾。`portfolio_values.id`不是主键。

那么您不能将其包含`portfolio_values.*`在`SELECT`列表中。

* * *

如果您想了解`*`in a的含义`SELECT`，请先[阅读此处的手册](http://www.postgresql.org/docs/current/interactive/sql-select.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T23:05:10.120

您只需将该`portfolio_values.id`列添加到`GROUP BY`语句中 - 如下所示：

```
portfolio_values.select("portfolio_values.*, SUM(portfolio_values.value) as totals").group("portfolio_values.id, portfolio_values.day").map(&:totals) 
```

## 编辑

虽然这是有效的 SQL，但它不是一个有用的查询 - 请参阅其他帖子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T15:45:14.270

您可能希望在以下方面与众不同：

[http://www.postgresql.org/docs/9.1/static/sql-select.html#SQL-DISTINCT](http://www.postgresql.org/docs/9.1/static/sql-select.html#SQL-DISTINCT)

具体如下：

从 sometable 中选择 distinct on (yourdatefield) field1, field2, field3；

# google-maps-api-3 - 如何在 AngularJS 中异步加载谷歌地图？

> ID：11217002
> 
> 赞同：5
> 
> 时间：2012-06-26T22:46:33.827
> 
> 标签：google-maps-api-3, asynchronous, angularjs, lazy-loading, angularjs-directive

现在我已经找到了一种在[Andy Joslin](https://stackoverflow.com/users/1397051/andy-joslin)的帮助下在这个 SO [initialize-google-map-in-angularjs](https://stackoverflow.com/questions/11180750/initialize-google-map-in-angularjs)中初始化 Google Maps 的方法，我正在寻找一种异步加载 Google Map Object 的方法。

[我在phonecat](https://github.com/angular/angular-phonecat)项目中找到了如何执行此操作的示例。

注意这个例子中 JS 文件是如何加载的：[​​index-async.html](https://github.com/angular/angular-phonecat/blob/00a07064623f1c0df7e03c5e38aa976695b5c899/app/index-async.html)

在加载到我的程序中的 Jade Scripts 部分中，我尝试了：

```
script(src='js/lib/angular/angular.js')
script(src='js/lib/script/script.min.js')

script
  $script([
    'js/lib/angular/angular-resource.min.js',
    'js/lib/jquery/jquery-1.7.2.min.js',
    'http://maps.googleapis.com/maps/api/js?key=AIzaSyBTmi_pcXMZtLX5MWFRQgbVEYx-h-pDXO4&sensor=false',
    'js/app.js',
    'js/services.js',
    'js/controllers.js',
    'js/filters.js',
    'js/directives.js',
    'bootstrap/js/bootstrap.min.js'
    ], function() {
      // when all is done, execute bootstrap angular application
      angular.bootstrap(document, ['ofm']);
    }); 
```

当我这样做并加载地图页面时，我得到：

```
A call to document.write() from an asycrononously-loaded 
external script was ignored. 
```

这就是现在将 Google 地图作为服务加载的方式：

```
'use strict';

var app = angular.module('ofm.services', []);

app.factory('GoogleMaps', function() {

  var map_id  = '#map';
  var lat     = 46.87916;
  var lng     = -3.32910;
  var zoom    = 15;
  var map     = initialize(map_id, lat, lng, zoom);

  return map;
});

function initialize(map_id, lat, lng, zoom) {
  var myOptions = {
    zoom : 8,
    center : new google.maps.LatLng(lat, lng),
    mapTypeId : google.maps.MapTypeId.ROADMAP
  };
  return new google.maps.Map($(map_id)[0], myOptions);
} 
```

看来这应该是从我记得读过的内容中返回的一个承诺。但是这个 AngularJS 对我来说很新。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-31T19:50:47.473

这是我在不使用 jQuery 的情况下提出的解决方案：( [Gist here](https://gist.github.com/neilsoult/7255583) )

```
angular.module('testApp', []).
    directive('lazyLoad', ['$window', '$q', function ($window, $q) {
        function load_script() {
            var s = document.createElement('script'); // use global document since Angular's $document is weak
            s.src = 'https://maps.googleapis.com/maps/api/js?sensor=false&callback=initialize';
            document.body.appendChild(s);
        }
        function lazyLoadApi(key) {
            var deferred = $q.defer();
            $window.initialize = function () {
                deferred.resolve();
            };
            // thanks to Emil Stenström: http://friendlybit.com/js/lazy-loading-asyncronous-javascript/
            if ($window.attachEvent) {  
                $window.attachEvent('onload', load_script); 
            } else {
                $window.addEventListener('load', load_script, false);
            }
            return deferred.promise;
        }
        return {
            restrict: 'E',
            link: function (scope, element, attrs) { // function content is optional
            // in this example, it shows how and when the promises are resolved
                if ($window.google && $window.google.maps) {
                    console.log('gmaps already loaded');
                } else {
                    lazyLoadApi().then(function () {
                        console.log('promise resolved');
                        if ($window.google && $window.google.maps) {
                            console.log('gmaps loaded');
                        } else {
                            console.log('gmaps not loaded');
                        }
                    }, function () {
                        console.log('promise rejected');
                    });
                }
            }
        };
    }]); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-01T01:23:52.253

如果您在 AngularJS 应用程序中使用 jQuery，请查看此函数，该函数`promise`在 Google Maps API 加载时返回一个 for：

[https://gist.github.com/gbakernet/828536](https://gist.github.com/gbakernet/828536)

我可以在 AngularJS 指令中使用它来按需延迟加载谷歌地图。工作一种享受：

```
angular.module('mapModule') // usage: data-google-map
    .directive('googleMap', ['$window', function ($window) {
        return {
            restrict: 'A',
            link: function (scope, element, attrs) {
                // If Google maps is already present then just initialise my map
                if ($window.google && $window.google.maps) {
                    initGoogleMaps();
                } else {
                    loadGoogleMapsAsync();
                }

                function loadGoogleMapsAsync() {
                    // loadGoogleMaps() == jQuery function from https://gist.github.com/gbakernet/828536
                    $.when(loadGoogleMaps())
                        // When Google maps is loaded, add InfoBox - this is optional
                        .then(function () {
                            $.ajax({ url: "/resources/js/infobox.min.js", dataType: "script", async: false });
                        })
                        .done(function () {
                            initGoogleMaps();
                        });
                };

                function initGoogleMaps() {
                    // Load your Google map stuff here
                    // Remember to wrap scope variables inside `scope.$apply(function(){...});`
                }
            }
        };
    }]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-11T10:28:53.640

看看这个我认为它更可靠

```
 var deferred = $q.defer();
                        var script = document.createElement('script');

                        $window.initMap = function() {
                            //console.log("Map  init ");

                            deferred.resolve();
                        }
                        script.src = "//maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=places&callback=initMap";
                        document.body.appendChild(script);
                        return deferred.promise; 
```

# delphi - 在一个 if 语句中组合两个或多个条件

> ID：11217003
> 
> 赞同：7
> 
> 时间：2012-06-26T22:46:47.207
> 
> 标签：delphi, delphi-7

我们可以在一个 if 语句中组合两个或多个条件吗？我知道在 C# 中，我们可以在 IF 语句中组合两个或多个条件。我们可以在德尔福做吗？

我必须检查用户是否为表单中的三个编辑控件输入了值。感谢所有的帮助

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-27T05:22:59.373

条件语句的一般形式是：

**IF** "**逻辑表达式**" **THEN** ... **ELSE** ...

“**逻辑表达式”**是任何*布尔表达式*。布尔表达式是可以评估为 TRUE 或 FALSE 的表达式。

可以使用*比较运算符*和*布尔运算符*构造布尔表达式。

比较运算符：

```
=   equals
<>  not equals
>   greater than
>=  greater than or equals
<   less than
<=  less than or equals 
```

设置比较运算符：

```
=   equals
<=  returns true, if set1 is a subset of set2
>=  returns true, if set1 is a superset of set2
in  returns true, if an element is in the set 
```

布尔运算符：

```
AND    logical and
OR     logical or
NOT    logical not
XOR    logical exclusive disjucntion 
```

例子：

```
IF A = 10 THEN ...
IF A >= B THEN ... 
IF C or D THEN ... (Note: C and D have to be logical, i.e. TRUE or FALSE)
IF NOT E THEN ...  (Note: E has to be logical, i.e. TRUE or FALSE) 
```

C、D 和 E 可以替换为任何逻辑表达式，例如：

```
IF (edit1.text = '') OR ( ISEMPTY( edit2.text ) ) THEN ...
IF NOT checkbox1.checked THEN ... 
```

请注意，可以使用布尔运算符从更简单的逻辑表达式构造逻辑表达式，例如：

```
IF ( A = 10 ) AND ( A >= B ) THEN ...
IF NOT ( ( A = 10 ) AND ( A >= B ) ) THEN ... 
```

编写逻辑表达式的常见错误是没有注意运算符优先级（首先计算哪个运算符）。布尔运算符的优先级高于比较运算符，例如：

```
IF A = 10 OR A >= B THEN ... 
```

以上是错误的，因为德尔福试图评估

`10 OR A`首先，而不是

`A = 10`. 如果 A 本身不是逻辑表达式，则会发生错误。

解决方案是使用括号，所以上面的 IF...THEN... 应该写成：

`IF (A = 10) OR (A >= B) THEN ...`

对于检查 3 个编辑控件，条件语句变为：

`IF ( Edit1.text <> '' ) AND ( Edit2.text <> '' ) AND ( Edit3.text <> '' ) THEN ...`

注意：稍微偏离主题，但相关。[Jedi JVCL 项目](http://www.delphi-jedi.org/)中的免费组件 TJvValidators、TJvValidationSummary 和 TJvErrorIndicator提供了一个很好的验证机制。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-26T22:50:58.717

当然。您可以执行以下操作：

```
if (A > 7) and (B < 13) or (C in [2, 4, 7]) then 
```

或者对于编辑控件：

```
if (Edit1.Text <> '') and (Edit2.Text <> '') and (Edit3.Text <> '') then 
```

或者，如果这是您想要的：

```
if (Edit1.Text = '') or (Edit2.Text = '') or (Edit3.Text = '') then 
```

等等等等

实际阅读一本关于 Delphi 的书可能会有所帮助，例如 Delphi 语言指南，它随每个版本的 Delphi 一起提供（在帮助中，在参考部分），或者[可以在网上找到](http://docwiki.embarcadero.com/RADStudio/en/Delphi_Language_Guide_Index)。

对于问题：通常，您可以使用`and`,`or`和组合不同的条件`not`。为了避免运算符优先级的问题，您通常应该将每个条件放在括号中，就像我在上面所做的那样。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-26T22:51:30.420

必须使用`And`and`Or`运算符来组合[if 语句中的条件](http://docwiki.embarcadero.com/RADStudio/en/Declarations_and_Statements#If_Statements)

```
 if (Edit1.Text<>'') and (Edit2.Text<>'') and (Edit3.Text<>'') then 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-27T09:12:53.747

记住表达式是从左到右计算的，这一点非常重要。

在这个例子中

```
if False and SomeFunction() then 
```

SomeFunction 不会被评估。如果你把它们转过来

```
if SomeFunction() and False then 
```

SomeFunction() 将被评估。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-21T09:31:37.437

但是，如果使用“如果不是”，则：

> 如果不是（ (edit1.Text = '2') 或 (edit2.Text = '3') ）那么......

# javascript - 如何获取浏览器不支持的 CSS 属性的值？

> ID：11217004
> 
> 赞同：3
> 
> 时间：2012-06-26T22:46:47.197
> 
> 标签：javascript, css, cssom

所以我正在寻找浏览器不支持的 CSS 属性的值。这是我想用来创建 polyfill 的东西，但我需要在任何给定时间知道属性的值。

[这是一个包含我迄今为止尝试过的所有方法的测试文件](http://jsfiddle.net/fnF2V/2/)。基本上，鉴于以下情况：

```
#element {
    transform: rotate(2deg);
} 
```

`rotate(2deg)`无论浏览器是否支持，我都希望能够通过 JavaScript 获取该值。**这可能吗？如果是这样，是否有一种预先的方法来做到这一点（我需要在旧浏览器中做很多事情）？**

如果可能的话，一些偏好：

*   宁愿从一个元素中执行此操作，而不是循环遍历样式表的规则
*   至少需要支持 IE 7（或有方法支持）
*   不应该花费 2 秒来计算。我想要一些能体面地表演的东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T00:23:05.463

我能够在 Firefox 中使用 jQuery 检索演示中的值：

```
var match = $( 'style' ).html().match( /transform:\s*(.+);?/ );
var value = match ? match[1] : ''; 
```

**现场演示：http:** [//jsfiddle.net/fnF2V/5/](http://jsfiddle.net/fnF2V/5/)

# android - 如何在android中的浏览器下载完成时获得通知（广播，意图）

> ID：11217005
> 
> 赞同：0
> 
> 时间：2012-06-26T22:46:49.547
> 
> 标签：android, browser, download, notifications, broadcast

如何在用户从网络浏览器和其他应用程序发起的下载完成时收到通知（通过一些广播或意图）？（如电子邮件客户端、蓝牙等）。
我需要这个，因为我想对用户下载的每个新文件执行一些操作。
在我看来，这*是*可能的，因为一些防病毒应用程序会做类似的事情。
我尝试使用将意图过滤器设置为 DownloadManager.ACTION_DOWNLOAD_COMPLETE 操作的广播接收器，但这样我只会收到有关从我自己的应用程序下载的通知。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T22:56:41.917

> 有没有办法（通过一些广播或意图）通知用户从网络浏览器和其他应用程序发起的下载完成？（如电子邮件客户端、蓝牙等）。

幸运的是，不，出于明显的隐私和安全原因。

# iphone - 检查视网膜图像文件丢失

> ID：11217006
> 
> 赞同：0
> 
> 时间：2012-06-26T22:46:50.427
> 
> 标签：iphone

我们有一个包含大量图像及其视网膜图像的项目。是否有一种简单的方法或工具来检查每个图像是否有其相关的视网膜图像文件？我希望它是一个软件工具或一个简单的脚本，可以告诉我错过了哪个视网膜文件

欢迎任何评论

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:48:29.970

你可以试试这个python脚本。请注意，它假定@2x 图像将与非视网膜版本位于同一目录中。如果您将视网膜图像和标准图像保存在不同的文件夹中，这将不起作用。它会按原样处理带有扩展名的文件`.png`，`.jpg`但添加更多内容很容易。

这使用 *nix`find`命令递归地获取当前工作目录中每个文件的路径。我是 python 新手，所以欢迎任何评论/修复/改进！

您可以手动运行它，也可以在 xcode 的预编译挂钩中使用它。它返回没有@2x 版本的文件的路径。

```
from subprocess import check_output
from os import path
import string

# Get all the files in the current working dir, recursively
files_raw = check_output(["find","-type","f"]) 
paths = files_raw.split("\n")

# Remove the empty last element (find command ends with a newline) 
paths.pop()

for item in paths:
    # Ignore any @2x items
    if("@2x" in item):
        continue

    # Break up the path
    filename, extension = path.splitext(item)

    # Ignore files without these extensions
    if(extension not in [".png", ".jpg"]):
        continue

    # Make the rentina path and see if it's in the list of paths
    retina = filename+"@2x"+extension
    if(retina not in paths):
        print item 
```

例如，对于这个文件夹：

```
.:
    file.txt
    john.png
    test@2x.png
    test.png    

./more:
    cool_image.jpg
    john@2x.png
    file.png

./other:
    [empty] 
```

运行（在终端中）：

```
cd /home/stecman/test-dir
python /home/stecman/missing-retina.py 
```

输出

```
./john.png
./more/cool_image.jpg
./more/file.png 
```

# php - 使用按钮 onClick 触发 PHP

> ID：11217017
> 
> 赞同：0
> 
> 时间：2012-06-26T22:48:42.303
> 
> 标签：php, html, button, onclick

我想让用户通过单击按钮从服务器中删除文件。

```
<button onclick="......">Remove file</button>" 
```

可以通过 PHP 的 unlink($filename) 函数删除文件。我可以通过 onclick 按钮以某种方式触发 PHP 代码吗？抱歉，如果问题很愚蠢，我是新手...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T04:27:14.537

如果您不想重定向页面，您可以使用 jquery $.ajax() 函数，我认为一个示例将有助于 OP，

​</p>

```
 <input type="button" id="deletefile" value="Delete">​​​​​​​​​​​​
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"/>
    <script type="text/javascript">
    $("#deletefile").click(function() {

        $.ajax({   
                        type:"POST",
                        url:"ajax/filename.php",
                        data:{fileid:deletefileid},
                        cache:false,
                });

    });​

    </script> 
```

在 filename.php 中，您可以编写代码来删除该文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-26T23:02:16.013

我不认为你不需要ajax。你的按钮被命名为“删除”：

```
if(isset($_POST['delete'])) { 
header ("Location: ./YourDeleteScript");
} 
```

# javascript - 内联 javascript 未捕获的引用错误

> ID：11217020
> 
> 赞同：0
> 
> 时间：2012-06-26T22:49:01.563
> 
> 标签：javascript, jquery

我有以下功能：

```
if ($(this).find('#sel').length == 0) {
    var before = $(this).text();
    var title_id = $(this).parent().attr('id');
    $(this).html("<select id='sel' onchange='selectdone(this, title_id=title_id)>
                   ...</select>");
} 
```

从这里我得到`Uncaught ReferenceError: title_id is not defined`。为什么`onchange`第 4 行里面的函数没有使用我之前定义的变量？我将如何正确重写上述内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T22:51:07.283

你是这个意思吗？

```
$(this).html("<select id='sel' onchange='selectdone(this, "+title_id+");'>...</select>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T22:51:37.177

在这里使用字符串连接：

```
$(this).html("<select id='sel' onchange='selectdone(this, title_id=" + title_id +");'>... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T22:51:48.860

发生这种情况是因为您将“更改”处理程序定义为字符串的一部分，因此该语言不知道其中有代码。

试试这个：

```
$(this).html($("<select/>", {
  id: 'sel',
  change: function() { selectdone(this, title_id) }
})); 
```

由于您无论如何都在使用 jQuery，因此您应该养成通过库而不是使用“onfoo”属性来管理事件处理程序的习惯。

# android - 在我自己的 Android 应用程序中阅读邮件

> ID：11217021
> 
> 赞同：0
> 
> 时间：2012-06-26T22:49:02.353
> 
> 标签：android, email

我做了一个android应用程序，现在，这个应用程序需要阅读电子邮件。我找到了这段代码：

```
 protected ArrayList<Mail> doInBackground(Void... params) {
    ArrayList<Mail> mails = new ArrayList<Mail>(32);
        boolean finish = false;

        try {
            String direcCompleta = URI_PREFIX + email;
            Uri a = Uri.parse(direcCompleta);
            Cursor  cCursor = resolver.query(a, null, null , null, null);

            while (cCursor.moveToNext() && (! finish)) {
                finish = fromTime.before(new Date(cCursor.getLong(1)));

                if (! finish){
                    String conv_id  = cCursor.getString(cCursor.getColumnIndex("_id"));
                    Uri    uri      = Uri.parse(URI_PREFIX + email + "/" + conv_id + "/messages");
                    Cursor mCursor  = resolver.query(uri, MESSAGE_PROJECTION, null, null, null);                    

                    while (mCursor.moveToNext() &&  (! finish)){
                        long mtime = mCursor.getLong(4);
                        finish = fromTime.before(new Date(mtime));
                        if (! finish){
                            mails.add(new Mail(mCursor.getString(0), mCursor.getString(2), mCursor.getString(1), mCursor.getString(4), mtime));                             
                        }
                    }                       
                }               
            }
        } catch (Exception ex){  
            Log.e("GmailReadApp", ex.toString());
            mails.add(new Mail(null, null, ex.toString(), ex.toString(), 0));
        }

        return mails;
    } 
```

但 cCursor 为空。我在应用程序中有我的邮件帐户：“电子邮件”，因为我使用 android sdk，它没有应用程序：“GMAIL”。而且android sdk没有市场。

有人可以帮助我吗？谢谢。（无论是用于 gmail、yahoo、hotmail ......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T22:55:51.667

> 我做了一个android应用程序，现在，这个应用程序需要阅读电子邮件

然后从头开始编写您自己的电子邮件客户端。有一个 JavaMail 的 Android 端口漂浮在某处。或者，获取现有的开源电子邮件客户端（例如，K9）并对其进行修改以适合。

> 我找到了这段代码

没有任何可能的价值`URI_PREFIX`被记录并支持在 Android 上使用。即使对于未记录和不受支持的值，您也无法拥有读取这些消息所需的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-10T13:15:21.077

你可以用 Kotlin 做到这一点。

1.  下载jar文件：[addinal.jar](https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/javamail-android/additionnal.jar)、[mail.jar](https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/javamail-android/mail.jar)、[activation.jar](https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/javamail-android/activation.jar)
2.  [在 android studio 的外部库中添加这些 jar](https://stackoverflow.com/questions/25660166/how-to-add-a-jar-in-external-libraries-in-android-studio)
3.  在清单文件中添加互联网权限： `<uses-permission android:name="android.permission.INTERNET" /`>
4.  [允许安全性较低的应用访问您的 Gmail](https://hotter.io/docs/email-accounts/secure-app-gmail/)

将此代码添加到您的应用程序：

```
GlobalScope.launch {
            val props = Properties()
            props.setProperty("mail.store.protocol", "imaps")
            try{
                val session = Session.getInstance(props, null)
                val store = session.store
                store.connect("imap.gmail.com", "youremail@gmail.com", "password")
                val inbox = store.getFolder("INBOX")
                inbox.open(Folder.READ_ONLY)
                Log.d("MyLog", inbox.messageCount.toString())
                val msg = inbox.getMessage(inbox.messageCount)
                val address = msg.from
                for (adr in address) {
                    Log.d("MyLog", adr.toString())
                }
                val mp = msg.content as Multipart
                val bp = mp.getBodyPart(0)
                Log.d("MyLog", bp.content.toString())
            }catch (e: Exception){
                Log.d("MyLog", "Error $e")
            }
        } 
```

# url - 数据表 - 如何在 url 中传递搜索参数

> ID：11217023
> 
> 赞同：7
> 
> 时间：2012-06-26T22:49:12.537
> 
> 标签：url, search, filter, datatables, parameter-passing

我希望能够创建一个指向带有数据表的页面的链接，该数据表将在 url 中传递搜索参数值。目标是使用搜索值参数预先过滤打开数据表的页面。

我已经设置了一个 jsfiddle 来处理一些示例数据。
[http://jsfiddle.net/lbriquet/9CxYT/10/](http://jsfiddle.net/lbriquet/9CxYT/10/)

想法是向 jsfiddle url 添加一个参数，以便页面显示时搜索输入值设置为“firefox”，例如，过滤表以仅显示搜索匹配项。

任何帮助将非常感激！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-02-05T09:39:10.313

这是一个老问题，但在寻找解决方案时仍然会弹出很高。这是我为使其工作所做的工作。

```
$(document).ready( function() {

  // First, get the search parameter. Here I use example.com#search=yourkeyword
    var searchHash = location.hash.substr(1),
        searchString = searchHash.substr(searchHash.indexOf('search='))
		                  .split('&')[0]
		                  .split('=')[1];

  $('#example').dataTable( {
    "oSearch": { "sSearch": searchString }
  } );
} )
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T13:16:12.603

您可以简单地[拥有一个读取您的 URL 变量](http://papermashup.com/read-url-get-variables-withjavascript/)然后过滤表的函数。我想你通过 q=Firefox 作为你的搜索

```
// Read a page's GET URL variables and return them as an associative array.
function getUrlVars()
{
 var vars = {};
    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
        vars[key] = value;
    });
    return vars;

}

$(document).ready(function() {
    // Get the query from the url
    var query = getUrlVars()['q'];
    // create the table
    var oTable = $('#example').dataTable();
    // Filter it
    oTable.fnFilter( query, 2 );
}); 
```

在这里[摆弄 http://fiddle.jshell.net/9CxYT/17/show/?q=Firefox](http://fiddle.jshell.net/9CxYT/17/show/?q=Firefox)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-12T13:37:51.133

这是我为使其工作所做的工作：

@Ibriquet 的第一部分从 url 获取 GET 参数，我没有改变它。很可能有更好的方法来做到这一点，但我没有研究过。

```
// Read a page's GET URL variables and return them as an associative array.
function getUrlVars()
{
 var vars = {};
    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
        vars[key] = value;
    });
    return vars;

} 
```

对于第二部分，我将其包含在`$('#tablename').DataTable( { here, right after the column setup }`

```
 initComplete: function() {
        this.api().search(getUrlVars()['search']).draw();        
      }, 
```

这会将 ?search= 之后和任何 & 之前的任何内容放入搜索字段中。

# c++ - 由于 ifstream obj 导致的分段错误。作为参考发送？

> ID：11217028
> 
> 赞同：-1
> 
> 时间：2012-06-26T22:50:00.013
> 
> 标签：c++, crash, segmentation-fault, ifstream

首先，非常抱歉，我无法提供源代码（无论如何都是我的母语）。所以，我正在做的是在（全局）函数中声明一个 ifstream 对象，然后将它发送到一个类的成员函数（将其作为引用），然后该函数将它传递给另一个成员函数在前面提到的类中使用的类（也将其作为参考）。我已经确定了在另一个类中的类中的成员函数中读取的分段错误（哦，我的上帝......），我尝试过 eof() 只是为了检查它是否被某种方式弄乱了，它返回 0（如预期的那样）而不会崩溃，只有当我尝试通过 ifstream 对象获取一些数据作为输入时它才会崩溃。

很抱歉递归描述/没有提供源代码，如果您想帮助并有任何问题，请提出，我会及时回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T22:54:06.860

> 首先，非常抱歉，我无法提供源代码（无论如何都是我的母语）。所以，我正在做的是在（全局）函数中声明一个 ifstream 对象，然后将它发送到一个类的成员函数（将其作为引用），然后该函数将它传递给另一个成员函数在前面提到的类中使用的类（也将其作为参考）。

所以，像这样：

```
class Foo {
public:
    // appropriate constructor here
    std::ifstream &stream;
};

Foo f;
void Func() {
    std::ifstream stream("whatever");
    f.stream = stream;
} 
```

是的，那很糟糕。您的流对于您的全局函数是本地的。一旦函数返回任何指向它的引用或指针都是无效的，因为它是以自动存储持续时间存储的。如果您希望事物保持活力，那么您将需要动态分配它（可能是次优的）或在类本身中构建它。

# sql - 有没有不同的方法可以将一个项目浮动到排序的名称列表的顶部？

> ID：11217030
> 
> 赞同：0
> 
> 时间：2012-06-26T22:50:13.947
> 
> 标签：sql, tsql, sql-server-2008-r2

这就是我想出的将“默认”浮动到顶部并对其余部分进行排序的方法：

```
SELECT        'default' AS name, 'AAA' AS tag
UNION
SELECT        name, name AS tag
FROM            (SELECT DISTINCT TOP (100) PERCENT name
                          FROM            AccountManager
                          WHERE        (name <> 'default')
                          ORDER BY name) AS derivedtbl_1
ORDER BY tag 
```

有没有更简单/更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T22:53:29.047

```
SELECT name 
FROM AccountManager
GROUP BY name /*To retain DISTINCT semantics from original query*/
ORDER BY CASE WHEN name = 'default' THEN 0 ELSE 1 END, name 
```

注意：

```
SELECT DISTINCT name 
FROM AccountManager
ORDER BY CASE WHEN name = 'default' THEN 0 ELSE 1 END, name 
```

`ORDER BY items must appear in the select list if SELECT DISTINCT is specified.`因此使用会失败`GROUP BY`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T22:53:33.163

您可以更改排序方式：

```
select name
from AccountManager
order by case name when 'default' then 0 else 1 end, name 
```

# java - JPA：是否可以在运行时指定 JPA 提供程序？

> ID：11217033
> 
> 赞同：0
> 
> 时间：2012-06-26T22:50:26.923
> 
> 标签：java, jakarta-ee, jpa

我们需要在运行时根据系统属性选择 JPA 提供程序（Hibernate 或 EclipseLink）。

据我了解，提供者名称必须在persistence.xml 中给出，并且不能在代码中被覆盖。如果未给出提供者名称，则默认使用类路径中的第一个提供者。另一种选择可能是使用 2 个不同的 persistence.xml 并根据系统属性的值加载其中一个。但是，这似乎也不可能（[JPA 使用替代“persistence.xml”](https://stackoverflow.com/questions/7227814/jpa-using-alternative-persistence-xml)）。

有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:53:43.773

事实证明，通过在 persistence.xml 中定义多个持久性单元，每个具有不同的提供者名称，有一种简单的方法可以做到这一点。

然后在运行时，在创建 EntityManagerFactory 时传递正确的持久性单元名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T12:57:57.360

Another way is to access the persistence provider directly, instead of through Persistence.

# ruby-on-rails - belongs_to 相同模型的基本 Rails 设计

> ID：11217035
> 
> 赞同：0
> 
> 时间：2012-06-26T22:50:33.227
> 
> 标签：ruby-on-rails, ruby-on-rails-3

有很多这样的问题，但我找不到一个似乎可以回答具体问题的问题 - 如果这是重复的，请道歉。

我有一个模型，我们称它为 Shark，定义非常简单（这里，注释：）

```
# == Schema Information
#
# Table name: sharks
#
#  id                :integer         not null, primary key
#  created_at        :datetime        not null
#  updated_at        :datetime        not null
#  origination_entry :integer
#

class Shark < ActiveRecord::Base
  belongs_to :originator, class_name: "Shark", foreign_key:"id"
  attr_accessible :origination_entry
end 
```

具体来说，数据库中的“origination_entry”列应该是指向*同一张表*Sharks的**外键。**这个想法是每个条目都可能具有这种关系，否则它将指向另一个对象，该对象是 this 的“发起者” 。（通过“发起人”，我指的是先前的例子——相信我，这在更多背景下是有意义的。）*`null``Shark``Shark``Shark`*

 *不幸的是，这似乎不起作用。

```
irb(main):001:0> shark1 = Shark.new(idnumber:"foo")
=> #<Shark id: nil, idnumber: "foo", created_at: nil, updated_at: nil, origination_entry: nil>
irb(main):002:0> shark1.save()
=> true
irb(main):003:0> 
irb(main):004:0* shark2 = Shark.new(idnumber:"foo", origination_entry:shark1.id)=> #<Shark id: nil, idnumber: "foo", created_at: nil, updated_at: nil, origination_entry: 3>
irb(main):005:0> shark2.save()
=> true
irb(main):006:0> shark2
=> #<Shark id: 4, idnumber: "foo", created_at: "2012-06-26 22:35:19", updated_at: "2012-06-26 22:35:19", origination_entry: 3>
irb(main):007:0> shark2.originator
=> nil 
```

（我剪掉了一些 SQL 查询，让我知道它们是否会有所帮助。）

为什么会回来`nil`？我怎样才能让它返回`shark1`的对象？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T23:13:07.313

试试这个。这个对我有用

```
class Shark < ActiveRecord::Base
   belongs_to :originator, class_name: "Shark", foreign_key:"origination_entry"
   attr_accessible :origination_entry
end 
```

[该](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)文档对于 AR 关联和选项非常有用；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T22:54:35.477

试试下面的：

```
class Shark < ActiveRecord::Base
  belongs_to : creator, class_name: "Shark", foreign_key:"shark_id"
  attr_accessible :origination_entry
end 
```*

# algorithm - 用于通过填充有多边形的空间进行路由的算法

> ID：11217038
> 
> 赞同：2
> 
> 时间：2012-06-26T22:50:51.930
> 
> 标签：algorithm, routing, geospatial

我有一个（地理）地图，由多边形组成，描绘了土地和一艘试图从 A 到 B 而不撞到任何土地的船。最好，它应该遵循最短的可用路径。

我有一个大部分时间都有效的算法，但它相当笨拙且效率低下。非常感谢任何对我可以使用的算法的提示或引用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T23:11:12.180

创建图表：

*   为每个多边形的每个顶点、起点和终点创建一个节点。
*   如果从一个节点到另一个节点有一条直线，则在两个节点之间创建一条边，而不是穿过任何障碍物。

使用 A* 算法 ( [http://en.wikipedia.org/wiki/A_star](http://en.wikipedia.org/wiki/A_star "一种*") ) 在结果图中找到最短路径。将距离估计为直线距离。

您可以使用任何类型的障碍物，只要您能够确定“有趣”点的集合：它们是每对障碍物的所有切线的接触点（凸多边形的几乎所有顶点都是“有趣的”。 ) 以及所有两次接触相同（非凸）障碍物的线。

# matlab - 在 Matlab 中创建更复杂的数据结构？

> ID：11217041
> 
> 赞同：3
> 
> 时间：2012-06-26T22:51:12.180
> 
> 标签：matlab, data-structures, structure

我需要一些帮助来在 Matlab 中创建数据结构。到目前为止，我需要以下内容：

```
string1 value1
string2 value2
string3 value3 
```

等等。我为此使用了一个结构：

```
mystruct = struct('mystrings', {}, 'myvalues', {}); 
```

现在除了字符串和值之外，我现在需要将几个数组（列向量，仅包含数字）分配给我的字符串值对。它可以不同，有多少个数组分配给一个字符串值对，例如

```
string1 value1 [1;2] [1;3]
string2 value2 [9;10]
string3 value3 [3;4] [2;9] [0;3] 
```

我不知道如何创建这样的数据结构。如果它现在是错误的数据结构，那么摆脱一个结构对我来说可能根本不是问题。不过，我需要帮助来创建新的数据结构。谢谢你的帮助 ：-）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T05:20:44.260

在考虑“正确”的数据结构时，总是有很多选择。一些选项：

1.  您可以为结构的每个字段分配一个元胞数组。
    你会写这样的结构：

    ```
    data.field1{1} = 'a string';
    data.field1{2} = [1 2 3 4];
    data.field1{3} = [5:2:10];
    data.field2{1} = 'another string' 
    ```

    你会这样读：

    ```
    allValueInACellArray = data.field1;
    onlyTheThirdValue = data.field1{3}; 
    ```

2.  您可以使用嵌套结构。
    然后一个写看起来像这样：

    ```
    data.field1.name = 'some name';
    data.field1.firstarray = [1 2 3 4];
    data.field1.secondarray = [5:2:10];
    data.field2.name = 'another name'; 
    ```

    看起来像这样：

    ```
    justTheFirstName = data.field1.name;
    onlyTheSecondArray = data.field1.firstArray; 
    ```

3.  我经常使用的另一个构造是结构数组。
    将其与单元格值字段结合起来，写入如下所示：

    ```
    data(1).name = 'some name';
    data(1).arrays = {[1 2 3 4]  5:2:10};
    data(2).name = 'another name';
    data(2).arrays = {[5 6 7 8]  6:3:12}; 
    ```

这个问题通常没有正确的答案。对于小程序，这并不重要，你应该选择对你来说最自然的东西。对于性能受限的应用程序，您需要考虑有效的内存分配，以及以您通常需要访问数据的方式快速访问数据。

# c# - 调试 ASP.NET 不能使用前导 .. 退出顶级目录

> ID：11217053
> 
> 赞同：3
> 
> 时间：2012-06-26T22:52:34.990
> 
> 标签：c#, asp.net, debugging

我越来越害怕了`Cannot use a leading .. to exit above the top directory.`

对我来说不幸的是它正在生成......在某个地方？....超出我的控制。是否有工具可以帮助我找出它是在哪里生成的？甚至是超链接的实际文本？也许以某种方式进行智能跟踪？

是的，有一百万个谷歌搜索结果。我知道我需要解决什么，我只是不知道问题实际发生在哪里。

我尝试覆盖渲染事件，然后在每个 HtmlLink 对象上调用 ResolveClientURL，方法是从基础遍历控制树，但这永远不会引发异常或做错任何事情。它会不会`base.render`因为我从一个页面调用 ResolveClientURL`/v5/plugins/dashboard`而基础页面在`/v5/`？

这是我为手动调试而写的。我希望这段代码会引发异常。

```
 protected override void Render(HtmlTextWriter writer)
  {
    foreach (Control c in base.Controls)
    {
      Trace.Write("New base control");
      var baseParent = c;// findBaseParent(c);
      Trace.Write(baseParent.GetType().ToString());
      renderChillunsRecursive(baseParent, 0);
    }
    base.Render(writer);
  }
  private int total;
  private void renderChillunsRecursive(Control c,int depth)
  {
    var chilluns = c.Controls;
    foreach (Control a in chilluns)
    {
      renderChillunsRecursive(a,depth +1);
      total++;
    }
    string otherString = String.Empty;
    if(c.GetType() == typeof(HtmlLink))
    {
      HtmlLink theLInk = ((HtmlLink) c);
          otherString = theLInk.Href;
      otherString += " - " + theLInk.ResolveClientUrl(theLInk.Href);
    }
    Trace.Write(String.Format("{0} - {1} - {2} - {3} - {4}",depth,total,c.GetType(),c.ToString(),otherString));
  } 
```

堆栈跟踪

```
[HttpException (0x80004005): Cannot use a leading .. to exit above the top directory.]
   System.Web.Util.UrlPath.ReduceVirtualPath(String path) +8886247
   System.Web.Util.UrlPath.Reduce(String path) +52
   System.Web.Util.UrlPath.Combine(String appPath, String basepath, String relative) +214
   System.Web.UI.Control.ResolveClientUrl(String relativeUrl) +180
   System.Web.UI.HtmlControls.HtmlLink.RenderAttributes(HtmlTextWriter writer) +74
   System.Web.UI.HtmlControls.HtmlLink.Render(HtmlTextWriter writer) +42
   System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter) +27
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter) +8703574
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer) +25
   System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children) +134
   System.Web.UI.Control.RenderChildren(HtmlTextWriter writer) +19
   System.Web.UI.HtmlControls.HtmlHead.RenderChildren(HtmlTextWriter writer) +17
   System.Web.UI.HtmlControls.HtmlContainerControl.Render(HtmlTextWriter writer) +32
   System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter) +27
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter) +8703574
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer) +25
   System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children) +134
   System.Web.UI.Control.RenderChildren(HtmlTextWriter writer) +19
   System.Web.UI.Control.Render(HtmlTextWriter writer) +10
   System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter) +27
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter) +8703574
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer) +25
   System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children) +134
   System.Web.UI.Control.RenderChildren(HtmlTextWriter writer) +19
   System.Web.UI.Page.Render(HtmlTextWriter writer) +29
   FileBasePage.Render(HtmlTextWriter writer) +2331
   FileDetails.Render(HtmlTextWriter writer) in c:\inetpub\V5 - Development\Plugins\Dashboard\FileDetails.aspx.cs:690
   System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter) +27
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter) +8703574
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer) +25
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +1266 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-01T09:50:28.287

从母版页和错误页中删除 ../ 并放置 ~/ 纠正错误-不能使用前导 .. 退出顶级目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:50:04.353

没有人回答我的实际问题-

> 是否有工具可以帮助我找出它是在哪里生成的？甚至是超链接的实际文本？也许以某种方式进行智能跟踪？

但是我们发现 IIS dll 安全性在某种程度上阻碍了我们。该命令`c:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\caspol.exe -m -ag 1 -url "file:////C:\inetpub\V5 - Development\*" FullTrust -exclusive on`修复了我们的问题 - 它类似于右键单击 dll 并选择取消阻止。（我们对这个测试服务器的远程部署包括压缩站点并将其放到服务器上，因此 windows 对其应用了一些额外的安全措施）。请参阅[http://blogs.msdn.com/b/narahari/archive/2010/06/03/system-security-securityexception-request-for-the-permission-of-type-system-web-aspnethostingpermission-system-version -2-0-0-0-culture-neutral-publickeytoken-b77a5c561934e089-failed.aspx](http://blogs.msdn.com/b/narahari/archive/2010/06/03/system-security-securityexception-request-for-the-permission-of-type-system-web-aspnethostingpermission-system-version-2-0-0-0-culture-neutral-publickeytoken-b77a5c561934e089-failed.aspx)了解更多信息。

我们认为是因为 IIS 不喜欢站点 bin 文件夹中的 DLL，所以它从 gac 中找到了一个有用的 DLL，此时 ReduceVirtualPath 失败了，因为它实际上不在网站目录附近。

# mysql - Mysql多表关系结构

> ID：11217055
> 
> 赞同：1
> 
> 时间：2012-06-26T22:52:51.590
> 
> 标签：mysql, relationship

我有一个用户表、一个资产表（例如，包含一个值等于 favourite_movie 的记录）和一个 user_to_asset 表（包含用户 ID、资产 ID 和值，例如“美国历史 x”）。

我在想是否还有一个类型 id 以及一个类型表，例如类型可能是用户偏好或用户详细信息......所以最后，user_to_asset 表将包含一个userid、typeid、assetid 和 value（当然我必须更改表名，因为我们现在在 user_to_asset 表中包含了 typeid）.. 也许它会优化我的代码，因为例如我可以通过查询来查询用户的所有首选项user_to_assets 表的 typeid 等于用户首选项，user_id 等于用户。

你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:06:12.197

我认为您需要以下表格：

*   用户（user_id、user_name、email、theme_id）
*   资产（asset_id、asset_type_id、asset_name 等）
*   user_to_asset (user_id,asset_id)
*   主题（theme_id，themestuff）
*   资产类型（资产类型ID，资产类型）

这使您可以说：

在将 Jonathan 的主题应用于结果时，向我显示用户“Jonathan”的所有类型为“movie”的资产。

# functional-programming - 游戏设计：开发经典游戏的函数式、不可变语言的方法是什么？

> ID：11217060
> 
> 赞同：-1
> 
> 时间：2012-06-26T22:53:09.903
> 
> 标签：functional-programming, immutability

想象一下经典的 2d RPG 游戏，其中有许多玩家可以每次都改变他们的位置、HP、库存、技能值、死亡名单等。

![胫骨客户端](../Images/277d439fc253f179360e2bdd5339faa7.png)

不可变语言将如何处理此类游戏的设计？也就是说，不变性因素会限制开发，因为游戏总是在变化，还是可以像使用传统语言一样有效地设计游戏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:01:07.513

看看[函数响应式编程](https://stackoverflow.com/questions/1028250/what-is-functional-reactive-programming)。它的关键概念是信号和事件，它们代表随时间变化的值。

在 Haskell Wiki上有各种 Haskell 框架和资源的列表[。](http://www.haskell.org/haskellwiki/Functional_Reactive_Programming)

我不确定它是否会直接帮助您创建游戏，但我相信学习 FRP 概念和想法会给您带来新的宝贵见解。

# google-apps-script - GUI Builder：文件上传、提交按钮和 DoPost 问题

> ID：11217063
> 
> 赞同：1
> 
> 时间：2012-06-26T22:53:18.707
> 
> 标签：google-apps-script

Apps Script GUI Builder 有一些我不明白的地方。我正在尝试进行文件上传，但无法正常工作。基本设置：表单面板、流程面板、文件上传、提交按钮。我没有在鼠标点击上放置任何事件（我知道 doPost 默认会捕获它）。

相关功能：

```
function appBVFileUpload2() {
   var mydoc = SpreadsheetApp.getActiveSpreadsheet();  
   var app = UiApp.createApplication().setTitle('File Upload');
   app.add(app.loadComponent("ImportationBV")); // load the GUI
   mydoc.show(app); 
}

function doPost(e) {
  // data returned is a blob for FileUpload Form
  var fileBlob = e.parameter.thefile; // thefile is the name of the File Upload Object
  var doc = DocsList.createFile(fileBlob); // Generate the Error <<<
  var app = UiApp.getActiveApplication();
  app.close();
  return app; 
} 
```

所以我在点击提交按钮时总是出错：

> 遇到错误：发生意外错误

**重要说明**：错误是由行产生的`var doc = DocsList.createFile(fileBlob);`。所以我怀疑来自文件上传对象的数据没有正确接收。

有趣的是，谷歌[在这里](https://developers.google.com/apps-script/class_fileupload)提供的例子对我有用。这意味着如果 GUI 是通过代码而**不是**通过 GUI 构建器完成的，则上传工作。

我对所有内容进行了三次检查，我真的很困惑，并开始认为通过 GUI Builder 上传文件可能存在错误。有什么帮助吗？

感谢您对此事的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:03:47.417

**当小部件的名称**不是应有的名称时，通常会出现此错误，您可以尝试记录 e.parameter 以查看其中的内容...`Logger.log(e.parameter);` 还要检查小部件的**名称**中是否没有意外空格...

编辑：根据您的评论，我在这里对其进行了测试，并且可以正常工作。您能否检查一下您是否有相同的设置（组件树、名称...），这是一个屏幕截图。： ![在此处输入图像描述](../Images/42e0a0cb6f200fb3c80ed8f54ce4a48e.png)

# sql - SQL LEFT JOIN 与常规连接相结合

> ID：11217070
> 
> 赞同：0
> 
> 时间：2012-06-26T22:54:00.110
> 
> 标签：sql, sql-server-2008, left-join

我有以下连接一堆表的查询。

我想从 INDUSTRY 表中获取每条记录，无论它是否与其他表匹配。我相信这需要通过 LEFT JOIN 来完成？

```
SELECT attr.industry_id        AS option_id,
       attr.industry           AS option_name,
       uj.ft_job_industry_id,
       Avg(CASE
             WHEN s.salary > 0 THEN s.salary
           END)                AS average,
       Count(CASE
               WHEN s.salary > 0 THEN attr.industry
             END)              AS count_non_zero,
       Count(attr.industry_id) AS count_total
FROM   industry attr,
       user_job_ft_job uj,
       salary_ft_job s,
       user_job_ft_job ut,
       [user] u,
       user_education_mba_school mba
WHERE  u.user_id = uj.user_id
       AND u.user_id = ut.user_id
       AND u.user_id = mba.user_id
       AND uj.ft_job_industry_id = attr.industry_id
       AND uj.user_job_ft_job_id = s.user_job_id
       AND u.include_in_student_site_results = 1
       AND u.site_instance_id IN ( 1 )
       AND uj.job_type_id = 1
       AND attr.consolidated_industry_id = 1
       AND mba.mba_graduation_year_id NOT IN ( 8, 9 )
       AND uj.admin_approved = 1
GROUP  BY attr.industry_id,
          attr.industry,
          uj.ft_job_industry_id 
```

这仅返回一行，但行业表中有 8 个匹配项，其中 encrypted_industry_id = 1。

--- 编辑：这里真正的问题是，如何将 LEFT JOIN 与常规连接结合起来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T23:03:58.847

用于`left join`可能丢失相应记录的表。将每个表的条件放在 的`on`子句中`join`，而不是放在`where`, 因为这实际上会使它们成为内部连接。就像是：

```
select
  attr.industry_id AS option_id, attr.industry AS option_name,
  uj.ft_job_industry_id, AVG(CASE WHEN s.salary > 0 THEN s.salary END) AS average, 
  COUNT(CASE WHEN s.salary > 0 THEN attr.industry END) as count_non_zero,
  COUNT(attr.industry_id) as count_total 
from
  industry attr
  left join user_job_ft_job uj on uj.ft_job_industry_id = attr.industry_id and uj.job_type_id = 1 and uj.admin_approved = 1
  left join salary_ft_job s on uj.user_job_ft_job_id = s.user_job_id 
  left join [user] u on u.user_id = uj.user_id and u.include_in_student_site_results = 1 and u.site_instance_id IN (1)
  left join user_job_ft_job ut on u.user_id = ut.user_id
  left join user_education_mba_school mba on u.user_id = mba.user_id and mba.mba_graduation_year_id not in (8, 9)
where
  attr.consolidated_industry_id = 1 
group by
  attr.industry_id, attr.industry, uj.ft_job_industry_id 
```

如果您有任何您知道总是有相应记录的表，请使用`innser join`它。

# javascript - 将 Backbone.Collection 用于分页列表？

> ID：11217073
> 
> 赞同：2
> 
> 时间：2012-06-26T22:54:12.917
> 
> 标签：javascript, collections, backbone.js, pagination

我想知道是否应该使用`ExerciseList`为我的练习页面调用的 Backbone.Collection，该页面显示`Exercise`按各种属性过滤的 s。每个`Exercise`都用`ExerciseRowView`. 那么，在这种情况下是否可行/有用`ExerciseList`？`ExerciseListView`

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T22:57:12.260

这会很好，你肯定朝着正确的方向前进。您必须在集合上创建一个分页方法。

这是一个很棒的分页组件：[https ://github.com/addyosmani/backbone.paginator](https://github.com/addyosmani/backbone.paginator)

在此处查看 Addy Osmani（插件作者）关于 Backbone 分页的文章：http: [//addyosmani.com/blog/backbone-paginator-new-pagination-components-for-backbone-js/](http://addyosmani.com/blog/backbone-paginator-new-pagination-components-for-backbone-js/)

应该可以让你走完剩下的路。

# php - 闪存登记表

> ID：11217074
> 
> 赞同：1
> 
> 时间：2012-06-26T22:54:14.210
> 
> 标签：php, mysql, flash, forms, registration

我需要有关我的 Flash 注册表单的帮助。我确保我的所有信息都是正确的，但是当我输入信息时，它似乎没有将它输入到mysql数据库中。这是闪存代码：

```
var lvSend:LoadVars = new LoadVars();
var lvReceive:LoadVars = new LoadVars();

register_btn.onRelease = function() {
var valid:Boolean = validateForm();

if(valid){
//gather information and put in loadvars object
lvSend.username = username.tInput.text;
lvSend.password = password.tInput.text;
lvSend.email = email.tInput.text;

//send information php script for insertion into database
lvSend.sendAndLoad("register.php", "POST");
}
};
function validateForm():Boolean{
if(username.tInput.text == "" || password.tInput.text == "" || email.tInput.text == ""){
    return false;       
}
    return true;
}
function clearTextFields():Void{
username.tInput.text = "";
password.tInput.text = "";
email.tInput.text = "";
} 
```

这是PHP代码：

[http://i.stack.imgur.com/cvvcO.png](http://i.stack.imgur.com/cvvcO.png)

抱歉，我的代码是图片形式。这是我能让你们阅读的最好方法。我的问题是两个代码中的所有信息似乎都是正确的。我所有的文本字段都称为用户名、密码和电子邮件，数据库列也是如此。数据库信息没有错，因为我将 php 代码与 html 一起使用，但我无法让它与 flash 一起使用。我的 php 文件名为 register.php，我的 flash 文件名为 play.swf。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:01:27.390

尝试：

```
lvReceive.onLoad = function(success:Boolean) {
if (success) {
    trace("ok");
}
else {
    trace("error");
    }

lvSend.sendAndLoad("register.php", lvReceive, "POST"); 
```

# java - Webview AppCache 未加载来源的非 html 内容

> ID：11217078
> 
> 赞同：3
> 
> 时间：2012-06-26T22:54:31.777
> 
> 标签：java, android, html, html5-appcache

我正在使用 HTML5 AppCache 创建一个可以离线运行的 Android Web 应用程序。使用 loadDataWithBaseURL() 将获取其他图像、样式表、javascript 和 iframe 的 HTML 加载到 WebView 中。不幸的是，当设备离线时，只有 iframe 中的 HTML 会从 AppCache 加载。

在这一点上，我知道：

*   该内容确实存在于 AppCache 中，因为我使用 adb shell 转储了 AppCache.db 文件的内容并在其中找到了所有内容。
*   这可能不是域问题，因为我在 loadDataWithBaseURL() 的 baseUrl 字段中指定了正确的路径。此外，如下所述，此问题的解决方法会成功且不会出现域错误。

这是一些演示代码：

```
public class ExampleActivity extends Activity {

   ...

  // HTML to be inserted into the Webview with loadDataWithBaseURL()
  public static final String ALL_HTML = 
      "<!DOCTYPE HTML><html>" +
      "<head><script src='sourced_js.js' " +
         "onload='console.log(\"sourced_js.js onload\");'>" +
      "</script>" +
      "<link rel='stylesheet' href='style.css' />" +   // doesn't load offline
      "</head><body>" +
      "<iframe src='manifest.html'></iframe>" +        // loads
      "<img src='android.jpg' />" +                    // doesn't load
      "<img src='android.gif' />" +                    // doesn't load
      "</body></html>";

  public void onCreate(Bundle savedInstanceState) {

    ...

    WebView webView = new WebView(context);
    webView.clearCache(true);

    WebSettings settings = webView.getSettings();
    settings.setAppCacheEnabled(true);
    settings.setJavaScriptEnabled(true);

    webView.loadDataWithBaseURL("http://my.website.com/path/to/content/",
        ALL_HTML, "text/html", "utf-8", null);
  }
} 
```

`manifest.html`只负责引用清单。看起来像：

```
<html manifest="manifest.appcache">
<head></head>
<body></body>
</html> 
```

`manifest.appcache`好像：

```
CACHE MANIFEST

# Explicitly cached resources
# manifest.html automatically cached
sourced_js.js
android.jpg
android.gif
style.css

NETWORK:
* 
```

在线时，所有内容都会加载。`manifest.html`离线时，仅加载iframe 。图像、样式表和 javascript 未加载。

奇怪的是，如果我在 中获取完全相同的静态内容（`sourced_js.js`, `android.jpg`, ...）`manifest.html`，当设备离线时，它们都会从 iframe 中的 AppCache 正确加载！好像这些其他资源必须从静态页面中获取。

任何线索为什么不会从 AppCache 加载此内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:37:25.253

根据规范，如果您没有为 Web 服务器中的 *.appcache 文件设置正确的 MIME 类型响应设置（文本/缓存清单），则 appcache 不应该工作。

在桌面浏览器、移动浏览器和 iOS UIWebView 中会出现相同的行为。

# php - 从复选框值 PHP 创建一个数组

> ID：11217080
> 
> 赞同：0
> 
> 时间：2012-06-26T22:54:45.490
> 
> 标签：php

我有很多复选框。我想将它们的值放入逗号分隔的数组中。如果复选框被取消选中，则值将为空，因此：

酒吧,停车场,,,,,电视等

我该怎么做？制作数组后，我将提交到数据库中。

```
 <p>
        <label for="meta_box_check_bar">bar</label>
        <input type="checkbox" id="meta_box_check_bar" name="meta_box_check_bar" value="bar" />

        <label for="meta_box_check_parking">parking</label>
        <input type="checkbox" id="meta_box_check_parking" name="meta_box_check_parking" value="parking" />

        <label for="">accessible-for-disabled</label>
        <input type="checkbox" id="meta_box_check_accessible-for-disabled" name="meta_box_check_accessible-for-disabled" value="accessible-for-disabled" />

        <label for="">air-conditioning</label>
        <input type="checkbox" id="meta_box_check_air-conditioning" name="meta_box_check_air-conditioning" value="air-conditioning" />

        <label for="">frigobar </label>
        <input type="checkbox" id="meta_box_check_frigobar" name="meta_box_check_frigobar" value="frigobar" />

        <label for="">pets</label>
        <input type="checkbox" id="meta_box_check_pets" name="meta_box_check_pets" value="pets" />

        <label for="">phone</label>
        <input type="checkbox" id="meta_box_check_phone" name="meta_box_check_phone" value="phone" />

        <label for="">tv</label>
        <input type="checkbox" id="meta_box_check_tv" name="meta_box_check_tv" value="tv" />

        <label for="">typical-local-dishes</label>
        <input type="checkbox" id="meta_box_check_typical-local-dishes" name="meta_box_check_typical-local-dishes" value="typical-local-dishes" />
    </p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T22:59:09.247

```
/* make an array for all used checkbox */
$used_checkboxes = array();

/* make an array whit all options */
$avaible_checkboxes = explode(',', "bar,parking,accessible-for-disabled,air-conditioning,frigobar,pets,phone,tv,typical-local-dishes");

/* loop troguht all avaible checkboxes */
foreach($avaible_checkboxes as $current_key)
{
   /* check if the checkbox was sent */
   if(isset($_POST["meta_box_check_{$current_key}"]))
   {
      /* if sent, add key to list */
      $used_checkboxes[$current_key] = $current_key;
   }
   else
   {
      /* if not sent, add empty value to list */
      $used_checkboxes[$current_key] = '';
   }
}

/* convert list to csv */
$used_checkboxes_csv = implode(',', $used_checkboxes); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T22:58:04.067

将您的字段命名为 checkboxes[]，然后在 PHP 中您可以使用 $_GET['checkboxes'] 获得类似的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T22:58:29.077

对我来说听起来像是 ajax 的工作。我会考虑使用 dojo 或 jquery 来收集和传递数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T22:59:05.380

您应该为名称字段赋予它们所有相同的名称，这样当您获取名称时，它将返回所有已检查值的数组。

这是您可以阅读的参考：http: [//www.html-form-guide.com/php-form/php-form-checkbox.html](http://www.html-form-guide.com/php-form/php-form-checkbox.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T23:06:32.273

如果可能，我建议您`[]`在变量名中使用来传递数组并在 PHP 文件中检索它们的值。像这样的东西：

**HTML**

```
<p>
    <label for="meta_box_check_bar">bar</label>
    <input type="checkbox" id="meta_box_check_bar" name="array[]" value="bar" />

    <label for="meta_box_check_parking">parking</label>
    <input type="checkbox" id="meta_box_check_parking" name="array[]" value="parking" />

    <label for="">accessible-for-disabled</label>
    <input type="checkbox" id="meta_box_check_accessible-for-disabled" name="array[]" value="accessible-for-disabled" />

    <label for="">air-conditioning</label>
    <input type="checkbox" id="meta_box_check_air-conditioning" name="array[]" value="air-conditioning" />

    <label for="">frigobar </label>
    <input type="checkbox" id="meta_box_check_frigobar" name="array[]" value="frigobar" />

    <label for="">pets</label>
    <input type="checkbox" id="meta_box_check_pets" name="array[]" value="pets" />

    <label for="">phone</label>
    <input type="checkbox" id="meta_box_check_phone" name="array[]" value="phone" />

    <label for="">tv</label>
    <input type="checkbox" id="meta_box_check_tv" name="array[]" value="tv" />

    <label for="">typical-local-dishes</label>
    <input type="checkbox" id="meta_box_check_typical-local-dishes" name="array[]" value="typical-local-dishes" />
</p> 
```

**PHP**

```
// Prevent errors when nothing is checked
if( ! is_array($_POST['array']) )
    $_POST['array'] = array();

// Possible items
$possible_item[] = "bar";
$possible_item[] = "parking";
$possible_item[] = "accessible-for-disabled";
$possible_item[] = "air-conditioning";
$possible_item[] = "frigobar";
$possible_item[] = "pets";
$possible_item[] = "phone";
$possible_item[] = "tv";
$possible_item[] = "typical-local-dishes";

// Starting output string
$output = '';

// Loop the possible items
foreach($possible_item as $value)
{
    // If item is in POST array, add to the output string, else put just comma if needed
    if( in_array($value, $_POST['array']) )
        $output .=  ( empty($output) ? '' : ',' ) . $value;
    else
        $output .=  ( empty($output) ? '' : ',' );
}

echo $output; 
```

# html - ParseError: Unexpected end tag - 如何清理 html 标签？

> ID：11217083
> 
> 赞同：3
> 
> 时间：2012-06-26T22:55:07.097
> 
> 标签：html, dreamweaver, pyramid, chameleon, template-tal

我开始学习网络开发，并且正在使用带有变色龙的金字塔。我只是在 Dreamweaver 中将一些网站的 html 源代码作为模板，然后将代码复制到 chameleon .pt 文件中。

html 代码在 Dreamweaver 中显示正常，但在金字塔中运行时出现此错误：

```
chameleon.exc.ParseError
ParseError: Unexpected end tag.

 - String:     "</div>" 
```

我已经尝试过 Dreamweavers 清理功能，它说它删除了 2 个空标签，但我仍然收到此错误。我的回溯都与变色龙中的错误有关，并且没有显示它在我的模板本身中存在问题的特定行。

有没有办法识别发生错误的实际行？

我不确定是否有金字塔或变色龙特定的解决方案，或者是否有在 HTML 标记中查找错误的通用方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T10:51:21.743

Chameleon 期望模板格式正确，并且不像 DreamWeaver 那样容忍不平衡的标签和不正确的属性标记。

请注意，错误并不一定意味着`</div>`标签太多。如果开头`<div>`有语法错误，例如缺少`=`属性声明（例如`<div class"foobar">`，开头标签无法识别，相应的结束标签也将被标记。

您可以通过 XML 验证器运行您的模板，网上有几个可用的（例如[http://www.validome.org/xml/](http://www.validome.org/xml/)、[http://www.xmlvalidation.com/](http://www.xmlvalidation.com/)和[http://xmlgrid.net/](http://xmlgrid.net/)，[谷歌列出了更多](http://www.google.com/search?q=online+xml+syntax+check)）。这些肯定会给你一个稍微有用的信息，告诉你你的模板有什么问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T23:04:02.060

以前从未使用过金字塔/变色龙，但看起来您必须检查代码并删除额外的`</div>`标签。当您收到删除两个空标签的消息时，这可能意味着它删除了一组标签的打开和关闭

例如`<div></div>`或`<p></p>`

浏览你的代码，每一个都`<div>`应该有一个`</div>`.

# asp.net-mvc-3 - 无法使用 Enity Framework 4.0 设置 MiniProfiler（不是代码优先）

> ID：11217084
> 
> 赞同：4
> 
> 时间：2012-06-26T22:55:17.953
> 
> 标签：asp.net-mvc-3, entity-framework, mvc-mini-profiler

我通过 nuget 在我的项目中安装了 MiniProfiler 和 MiniProfiler.EF。

在使用 MiniProfiler 之前，我会在我的模型存储库中使用它打开一个连接：

```
 public class NotificationRepository
    {
       private CBNotificationModel.CB_NotificationEntities db;

       public NotificationRepository()
       {
          db = new CB_NotificationEntities();
       }

       public NotificationContact GetNotificationContacts()
       {
          return db.NotificationContacts.ToList();
       }
    } 
```

要使用我创建的迷你分析器：

```
 public static class ConnectionHelper
    {
        public static CB_NotificationEntities GetEntityConnection()
        {
            var conn = new StackExchange.Profiling.Data.EFProfiledDbConnection(GetConnection(), MiniProfiler.Current);

            return ObjectContextUtils.CreateObjectContext<CB_NotificationEntities>(conn); // resides in the MiniProfiler.EF nuget pack
        }

        public static EntityConnection GetConnection()
        {
            return new EntityConnection(ConfigurationManager.ConnectionStrings["CB_NotificationEntities"].ConnectionString);
        }
    } 
```

模型存储库现在使用

```
db = ConnectionHelper.GetEntityConnection(); 
```

然而，这给出了错误：

mscorlib.dll 中出现“System.StackOverflowException”类型的未处理异常

我错过了一步吗？我尝试在 Application_start() 中添加 MiniProfilerEF.Initialize() 和 MiniProfilerEF.Initialize_EF42() 但这只会改变给出的错误。

似乎没有太多关于设置实体框架项目以使用 miniprofiler 的信息，除非它是 codefirst。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T16:06:59.517

我可以通过将我的 ConnectionHelper 类更改为以下内容来完成这项工作：

```
 public static class ConnectionHelper
    {
            public static CB_NotificationEntities GetEntityConnection()
            {

                var connectionString = ConfigurationManager.ConnectionStrings["CB_NotificationEntities"].ConnectionString;
                var ecsb = new EntityConnectionStringBuilder(connectionString);
                var sqlConn = new SqlConnection(ecsb.ProviderConnectionString);
                var pConn = new StackExchange.Profiling.Data.EFProfiledDbConnection(sqlConn, MiniProfiler.Current);

                var context = ObjectContextUtils.CreateObjectContext<CB_NotificationEntities>(pConn);
                return context;

          }
     } 
```

# image-processing - 霍夫变换可以在商业软件中使用吗？

> ID：11217085
> 
> 赞同：0
> 
> 时间：2012-06-26T22:55:20.980
> 
> 标签：image-processing, computer-vision

霍夫变换可以在商业软件中使用吗？

我的意思是，它是那些看起来只是研究且不稳定的事情之一。例如，您不会将它放在商业合成软件中并让用户始终依赖它。

有什么意见吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T09:44:20.267

霍夫变换已在世界各地的商业和工业应用中使用多年，甚至几十年。从[wikipedia 页面](https://en.wikipedia.org/wiki/Hough_transform)您可以看到它最初是在 1972 年开发的，基于 1962 年的早期想法。这意味着它比您用来捕获合成软件中使用的图像的[CCD更老。](https://en.wikipedia.org/wiki/Charge-coupled_device)

鉴于它对您来说“似乎只是研究且不稳定”，我建议您花一些时间[学习各种计算机视觉](https://rads.stackoverflow.com/amzn/click/com/1848829345)和[图像分析算法和技术](https://rads.stackoverflow.com/amzn/click/com/0470643854)，并在一般情况下在该领域获得良好的数学基础，然后再在商业中实现霍夫变换合成软件。

当您完成学习后，我建议您使用经过[良好测试的开源实现](http://opencv.willowgarage.com/documentation/feature_detection.html#houghlines2)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T18:37:22.680

是的。事实上，我已经为一个商业软件编写了 Hough 变换代码，该软件并不打算成为像 MATLAB 这样的研究工具。尽管我花了很多时间来研究它对特定应用程序的鲁棒性，但它工作得很好。

霍夫变换本身有时在您有一定程度噪声的应用程序中（例如在网络摄像头中）或当您需要提取的形状存在一些失真时可能不可靠。这可能就是您所看到的。在这种情况下，您可能需要对您的应用程序进行更多调整，或者尝试一些基本的图像预处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-08T16:03:50.267

我对问题的评论（由高性能标记）以及这里接受的答案中的居高临下的语气有点恼火。

首先，编程库/框架提供算法的实现并不意味着它已被使用，或者更确切地说，它适合商业应用程序（即，在不太原始的条件下稳健地完成工作）。Hough 变换是一种定义明确的算法（具有可能的用途和限制），它非常简单易懂，并且在介绍性图像处理课程中非常普遍。毫不奇怪，它已经在 Matlab、Octave 和 OpenCV 等通用库中实现。我不相信这个问题是为了讨论实现的稳健性和包含在商业图像处理框架中的可能性，而是算法本身是否非常适合最终用户软件（一个计算圆圈的应用程序，或者什么不是） .

就目前而言，公认的答案是“该算法非常古老。这是一本关于图像处理的书，这是实现它的图像处理库的链接”。另一个零分的答案似乎是关于主题的（即讨论可能的应用程序），尽管不是很具体（“为我工作”）。

那么，为什么有些人会觉得霍夫变换对形状检测不可靠呢？这是一个很好的例子：[Unreliable results with cv2.HoughCircles](https://stackoverflow.com/questions/14609980/unreliable-results-with-cv2-houghcircles)

输入似乎是非常明确的圆圈。但是，更强大的建议工作解决方案不使用霍夫变换。我在自己的项目中也有类似的经历。通常，更稳健的方法是某种对象分割、距离变换、分水岭和峰值定位。我曾经使用过 Hough 变换并取得了很好的效果吗？不，我认为它在某些情况下可能有用。特别是如果成像对象的形状被完美定义，并且部分被遮挡。

换句话说，我也很好奇最终受益于霍夫变换的商业应用程序。这就是我遇到这个问题的方式，随后对“如果你更好地理解这个主题，你就不会问这个问题”感到失望，回复。

# php - 正则表达式 Skip message to,from 模式

> ID：11217088
> 
> 赞同：1
> 
> 时间：2012-06-26T22:55:42.697
> 
> 标签：php, regex

我在 php 中有这个字符串我想跳过 ppattern

```
------------------------------------------
FROM:Andy;
SENT:Mon, Jun 18 2012 1:52pm
TO:Ali;

------------------------------------------
FROM:Ali;
SENT:Mon, Jun 18 2012 12:26pm
TO:Andy;

Some message text here 
```

我想使用正则表达式跳过前两种模式并只返回“一些消息文本......”以上两种模式可以有更多。在 PHP 中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:00:05.800

要 100% 确定你没事，请使用模式`/^.*\nSENT:[^\n]*\nTO:[^\n]*\n\n(.*)$/is`

[在此处](http://ideone.com/CZywd)查看并测试代码。

* * *

如果您可能在最后一个“TO：”行之后的空行中有一些空白字符，请使用正则表达式`/^.*\nSENT:[^\n]*\nTO:[^\n]*\n\s*\n(.*)$/is`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T22:58:15.970

```
.*TO:.*;\s*(.*) 
```

一定要设置点匹配换行符

在 php (preg) 这变成

```
if (preg_match('/.*TO:.*;\s*(.*)/s', $subject, $regs)) {
    $result = $regs[1];
} else {
    $result = "";
} 
```

# r - 子集 R 数据框取决于重复变量的值

> ID：11217091
> 
> 赞同：9
> 
> 时间：2012-06-26T22:56:05.087
> 
> 标签：r, dataframe, subset, plyr, data.table

如何对以下示例数据框进行子集化以仅返回每个 ID 的最早出现 [即 min(year)] 的一个观察值？

```
id <- c("A", "A", "C", "D", "E", "F")
year <- c(2000, 2001, 2001, 2002, 2003, 2004)
qty  <- c(100, 300, 100, 200, 100, 500)
df=data.frame(year, qty, id) 
```

在上面的示例中，“A”id 在 2000 年和 2001 年有两个观察值。在重复 id 的情况下，我希望子集数据框仅包含第一次出现的观察值（即 2000 年）重复的 ID。

```
df2 = subset(df, ???) 
```

这就是我要返回的内容：

```
df2

year qty id
2000 100  A
2001 100  C
2002 200  D
2003 100  E
2004 500  F 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T23:25:40.320

您可以聚合最小年份 + id，然后与原始数据框合并以获得数量：

```
df2 <- merge(aggregate(year ~ id, df1, min), df1)

# > df2
#   id year qty
# 1  A 2000 100
# 2  C 2001 100
# 3  D 2002 200
# 4  E 2003 100
# 5  F 2004 500 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-26T23:21:05.237

这是你要找的吗？您的第二行在我看来是错误的（这是重复的年份，而不是第一行）。

```
> duplicated(df$year)
[1] FALSE FALSE  TRUE FALSE FALSE FALSE
> df[!duplicated(df$year), ]
  year qty id
1 2000 100  A
2 2001 300  A
4 2002 200  D
5 2003 100  E
6 2004 500  F 
```

编辑1：呃，我完全误解了你的要求。不过，为了完整起见，我会将其保留在这里。

编辑2：

好的，这是一个解决方案：按年份排序（因此每个 ID 的第一个条目具有最早的年份），然后使用`duplicated`. 我认为这是最简单的解决方案：

```
> df.sort.year <- df[order(df$year), ]
> df.sort.year[!duplicated(df$id),  ]
  year qty id
1 2000 100  A
3 2001 100  C
4 2002 200  D
5 2003 100  E
6 2004 500  F 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-26T23:22:19.863

使用 plyr

```
library(plyr)
## make sure first row will be min (year)
df <- arrange(df, id, year)
df2 <- ddply(df, .(id), head, n = 1)

df2
##   year qty id
## 1 2000 100  A
## 2 2001 100  C
## 3 2002 200  D
## 4 2003 100  E
## 5 2004 500  F 
```

或使用 data.table。将键设置为 id, year 将确保第一行是年份的最小值。

```
library(data.table)
DF <- data.table(df, key = c('id','year'))
DF[,.SD[1], by = 'id']

##      id year qty
## [1,]  A 2000 100
## [2,]  C 2001 100
## [3,]  D 2002 200
## [4,]  E 2003 100
## [5,]  F 2004 500 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T23:30:58.900

这样做可能有一种更漂亮的方式，但这就是我想到的

```
# use which() to get index for each id, saving only first
first_occurance <- with(df, sapply(unique(id), function(x) which(id %in% x)[1]))
df[first_occurance,]
#  year qty id
#1 2000 100  A
#3 2001 100  C
#4 2002 200  D
#5 2003 100  E
#6 2004 500  F 
```

# email - 确认邮件

> ID：11217092
> 
> 赞同：1
> 
> 时间：2012-06-26T22:56:16.470
> 
> 标签：email, confirmation

我有这个 php 代码可以将用户信息从联系表发送到我的电子邮件地址，但我不知道如何在用户填写表单时将确认电子邮件发送回给用户。

```
<?      
 $name = $_REQUEST['name'] ; 

 $company = $_REQUEST['company'] ;

 $areacode_telephone = $_REQUEST['areacode_telephone'] ;

 $telephone = $_REQUEST['telephone'] ;

 $email = $_REQUEST['email'] ;

 $notes = $_REQUEST['notes'] ;

 $body =        " Name: ".$name."\n

                 Company: ".$company."\n

                 Area Code: ".$areacode_telephone."\n 

                 Telephone: ".$telephone."\n 

                 Email Address: ".$email."\n

                 Notes: ".$notes;

     mail( "info@axsiom.com.au", "Axsiom: Contact Us", $body, "From: $email" );

         ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T23:00:45.697

您只是使用相同的函数以不同的组合重用相同的变量，只是为了将其发送回它们。

```
mail( $email, "Thank You", "We Have Recived Your Request blablabla", "From: info@axsiom.com.au" ); 
```

多田。

要向您和他们发送相同的消息，请使用：

```
<?php      
 $name = $_REQUEST['name'] ; 

 $company = $_REQUEST['company'] ;

 $areacode_telephone = $_REQUEST['areacode_telephone'] ;

 $telephone = $_REQUEST['telephone'] ;

 $email = $_REQUEST['email'] ;

 $notes = $_REQUEST['notes'] ;

 $body =        " Name: ".$name."\n

                 Company: ".$company."\n

                 Area Code: ".$areacode_telephone."\n 

                 Telephone: ".$telephone."\n 

                 Email Address: ".$email."\n

                 Notes: ".$notes;

     mail( "info@axsiom.com.au, $email", "Axsiom: Contact Us", $body, "From: $email" );

         ?> 
```

要向您和他们发送不同的消息，请使用：

```
<?php      
 $name = $_REQUEST['name'] ; 

 $company = $_REQUEST['company'] ;

 $areacode_telephone = $_REQUEST['areacode_telephone'] ;

 $telephone = $_REQUEST['telephone'] ;

 $email = $_REQUEST['email'] ;

 $notes = $_REQUEST['notes'] ;

 $body =        " Name: ".$name."\n

                 Company: ".$company."\n

                 Area Code: ".$areacode_telephone."\n 

                 Telephone: ".$telephone."\n 

                 Email Address: ".$email."\n

                 Notes: ".$notes;

     //to you
     mail( "info@axsiom.com.au", "Axsiom: Contact Us", $body, "From: $email" );
     //to them
     mail( $email, "Thank You", "We Have Recived Your Request blablabla", "From: info@axsiom.com.au" );
         ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-26T10:13:42.983

要发送电子邮件：

```
require 'PHPMailerAutoload.php';

$mail = new PHPMailer;

$mail->isSMTP();                                      // Set mailer to use SMTP
$mail->Host = 'smtp.gmail.com';  // Specify main and backup SMTP servers
$mail->SMTPAuth = true;                               // Enable SMTP authentication
$mail->Username = 'user@gmail.com';                 // Your gmail username
$mail->Password = 'your_gmail_password';                           // SMTP password
$mail->SMTPSecure = 'tls';                            // Enable TLS encryption, `ssl` also accepted
$mail->Port = 587;                                    // TCP port to connect to

$mail->From = 'from@example.com'; // from email address
$mail->FromName = 'User1'; // whatever is the name of sender
$mail->addAddress($_POST['email'], $_POST['username']);     // Add a recipient

$mail->isHTML(true);                                  // Set email format to HTML

$mail->Subject = $subject;
$mail->Body    =  $message ;

if(!$mail->send()) {
    echo 'Message could not be sent.';
    echo 'Mailer Error: ' . $mail->ErrorInfo;
} else {
    echo 'Message has been sent';
}
?> 
```

# c# - 使用 CollectionDataContactAttribute 序列化附加字段

> ID：11217093
> 
> 赞同：1
> 
> 时间：2012-06-26T22:56:20.203
> 
> 标签：c#, .net, xamarin.ios, datacontractserializer, datamember

我有一个从集合继承的类，特别是 List<> 并且我在下面列出了该类。当我使用 DataContractSerializer 将对象序列化为 XML 时遇到的问题是我在对象中添加的附加字段没有被序列化器序列化。
这是课程：

* * *

```
[CollectionDataContract(Name = "ServiceEvents", Namespace = "")]
public class ServiceEventList : List<ServiceEvent> 
{
  [DataMember]
  public long StaleDate { get; set; }

  [DataMember]
  public long ExpirationDate { get; set; }
} 
```

* * *

当我序列化对象并写入磁盘时，这是输出（注意 StaleDate 和 ExpirationDate 都丢失了）。

* * *

```
<ServiceEvents xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><ServiceEvent><Date>2012-06-26T22:23:24.120817Z</Date><Description>A Service Event</Description><Id>634763462041210040</Id><Notes></Notes><Odometer>42</Odometer></ServiceEvent></ServiceEvents> 
```

* * *

下面是序列化对象的代码：

```
using (FileStream fs = new FileStream(path, FileMode.Create))
{
  //TODO: StaleDate is not serializing to disk
  //TODO: ExpirationDate is not serializing to disk
  DataContractSerializer ser = new DataContractSerializer(typeof(ServiceEventList));
  ser.WriteObject(fs, list);
} 
```

我的下一个想法是删除继承结构并将 List 对象嵌入到类中。我宁愿只扩展 List 但如果社区确认我的方法行不通，我不会在上面浪费更多时间。提前感谢您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T07:51:12.730

根据这篇文章：

[http://social.msdn.microsoft.com/Forums/eu/wcf/thread/57eb195a-43a9-47fe-8b1a-a9d23feb2df2](http://social.msdn.microsoft.com/Forums/eu/wcf/thread/57eb195a-43a9-47fe-8b1a-a9d23feb2df2)

问题确实是您从集合类型继承 - 在这种情况下 DataContractSerializer 仅序列化其项目，而不是任何额外的属性。

# flex-lexer - Flex 中同名的多个定义

> ID：11217096
> 
> 赞同：0
> 
> 时间：2012-06-26T22:56:49.637
> 
> 标签：flex-lexer

我是 Flex 新手，想知道是否可以在 Flex 中为同名定义多个定义。如：

```
/* DEFINITIONS */
FRUITS "APPLE" | "ORANGE" | "LEMON" 
```

另外，对于 flex 正则表达式中的字符串常量，我们可以做什么和不可以做什么？我们可以使用$和*之类的符号吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T00:08:39.777

定义的右边是一个普通的正则表达式，所以你可以写

```
FRUIT APPLE|ORANGE|LEMON 
```

也许

```
FRUIT (PINE)?APPLE|GRAPE(FRUIT)?|ORANGE|LEMON 
```

稍后在规则部分参考它

```
{FRUIT} 
```

但我怀疑你是否真的想要。这是识别关键字标记的粗略方法。

最好使用像这些示例这样的定义（将它们视为宏）：

```
LETTER [a-zA-Z]
DIGIT [0-9]
ALPHANUMERIC [a-zA-Z0-9] 
```

# iphone - 在 Xcode 中使用加速度计的不同图像

> ID：11217098
> 
> 赞同：0
> 
> 时间：2012-06-26T22:57:08.597
> 
> 标签：iphone, xcode, image, add, accelerometer

我正在尝试在 Xcode 4.3.3 中制作一个应用程序，其中当使用加速度计的 z 轴为正时显示一个图像。但是，当 z 轴变为负值时，我希望出现不同的图像。我是初学者，所以如果你能告诉我应该在哪个文件中编写代码，那就太好了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T01:45:06.820

查看以下链接以了解 UIAccelerometer

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAccelerometer_Class/Reference/UIAccelerometer.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAccelerometer_Class/Reference/UIAccelerometer.html)

[http://homepages.ius.edu/rwisman/C490/html/chapter22.htm](http://homepages.ius.edu/rwisman/C490/html/chapter22.htm)

[http://www.edumobile.org/iphone/iphone-programming-tutorials/how-to-use-accelerometer-in-iphone/](http://www.edumobile.org/iphone/iphone-programming-tutorials/how-to-use-accelerometer-in-iphone/)

[http://www.ifans.com/forums/threads/tutorial-simple-accelerometer-source-code.151394/](http://www.ifans.com/forums/threads/tutorial-simple-accelerometer-source-code.151394/)

您需要对以下功能进行更改

```
- (void)accelerometer:(UIAccelerometer *)accelerometer 
           didAccelerate:(UIAcceleration *)acceleration 
{
    if(acceleration.z<0) {
       imageview.image = //Display image to be displayed when z is negative
    }
    else {
       imageview.image = //Display image to be displayed when z is positive
    }
} 
```

# javascript - 使显示/隐藏更小

> ID：11217099
> 
> 赞同：3
> 
> 时间：2012-06-26T22:57:10.167
> 
> 标签：javascript

我如何使这段代码更小？也许是一个切换，但人们说这在 jQuery 中很容易完成。但问题是我不喜欢在我的代码中只使用 jQuery 做一件事。

```
function open() {
document.getElementById('message').style.display='block';
document.getElementById('fade').style.display='block';
}

function close() {
document.getElementById('message').style.display='none';
document.getElementById('fade').style.display='none';
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T22:59:23.660

```
var message = document.getElementById('message'),
    fade = document.getElementById('fade');

function open() {
    message.style.display = fade.style.display = 'block';
}

function close() {
    message.style.display = fade.style.display = 'none';
} 
```

或者：

```
function toggle() {
    var message = document.getElementById('message'),
        fade = document.getElementById('fade'),
        currentdisplay = getComputedStyle(message, null)['display'];

    if(currentdisplay == 'block' || currentdisplay == 'inline')
        message.style.display = fade.style.display = 'none';
    else
        message.style.display = fade.style.display = 'block'; /* or inline */
} 
```

或者：

```
function toggle() {
    var currentdisplay = getComputedStyle(arguments[1], null)['display'],
        i,
        newdisplay;

    if(currentdisplay == 'block' || currentdisplay == 'inline')
        newdisplay = 'none';
    else
        newdisplay = 'block';

    for(i = 0; i < arguments.length; i++)
        arguments[i].style.display = newdisplay;
}

var message = document.getElementById('message'),
    fade = document.getElementById('fade');

toggle(message, fade); /* hide */
toggle(message, fade); /* show */

document.body.onclick = function(){
    toggle(message, fade);
} 
```

​</p>

* * *

切换示例：

[http://jsfiddle.net/djHTq/](http://jsfiddle.net/djHTq/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T23:01:00.633

[把它擦干](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。

```
var b='block',h='none',m='message',f='fade';
function s(i,d){document.getElementById(i).style.display=d}
function open(){s(m,b);s(f,b)}
function close(){s(m,h);s(f,h)} 
```

使用空格和正确的变量名（要传递给压缩器），这看起来像：

```
var show = 'block', hide = 'none', message = 'message', fade = 'fade';

function setStyle(id, display) {
  document.getElementById(id).style.display=display;
}
function open() {
  setStyle(message, show);
  setStyle(fade, show);
}
function close() {
  setStyle(message, hide);
  setStyle(fade, hide);
} 
```

有一些与问题无关的最佳实践，但如果您的项目超出这种微不足道的情况，则值得考虑：

*   使用缩小器。我最喜欢的是[uglifyjs](https://github.com/mishoo/UglifyJS/)。这允许您在未缩小的代码中使用有意义的变量名（如第二个示例）。minifier 将输出更像（但可能甚至比）第一个示例的代码。即使使用缩小器，也要继续思考它能做什么和不能做什么 - 如果您经常使用该 API，则创建一个指向像 document.getElementById 这样长的公共 API 的私有快捷方式可以帮助缩小。查看缩小的代码以确保您无法对其进行优化。
*   如果可能的话，将你的 javascript 分成 .js 模块，这些模块与页面分开加载并且异步加载。
*   管理所有静态资产（如 .js 模块），使它们具有较长的缓存超时 - 使用 `Expires:`http 标头。然后在它们实际更改时更改它们的 URL。这样，客户端可以无限期地缓存它们，直到您更改它们，然后客户端将立即获取新版本。
*   将离散模块放在函数包装器中，这样您的变量就不会与其他代码片段冲突——无论是您自己的还是第三方模块。如果要公开变量，请明确执行：`window.pubvar =`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T23:03:46.120

```
var toggle = function(doc){
    var $ = doc.getElementById, message = $('message'), fade = $('fade'), open = true;
    return function(){
        var display = open ? 'none' : 'block';
        message.style.display = display;
        fade.style.display = display;
        open = !open;
    } 
}(document);

toggle(); // Hide both elements
toggle(); // Show both elements. Rinse and repeat. 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-26T23:01:57.813

避免污染全局范围：

```
(function() {
    var msgstl = document.getElementById('message').style,
        fdestl = document.getElementById('fade').style;
    window.open = function() {msgstl.display = fdestl.display = "block";};
    window.close = function() {msgstl.display = fdestl.display = "none";};
})(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-26T23:02:59.183

一件事是您可以创建一个辅助函数来设置元素的样式。这在您需要设置许多不同元素的情况下很有用。

```
function setStyle(element, style, value) {
    document.getElementById(element).style[style] = value;
}
function open() {
    setStyle('message', 'display', 'block');
    setStyle('fade', 'display', 'block');
}
function close() {
    setStyle('message', 'display', 'none');
    setStyle('fade', 'display', 'none');
} 
```

如果您经常使用元素，您可能还希望将元素设置为变量。

```
var message = document.getElementById('message'), fade = ... 
```

# c++ - 我可以让 C++ 预处理器在编译期间发送输出吗？

> ID：11217104
> 
> 赞同：23
> 
> 时间：2012-06-26T22:57:32.010
> 
> 标签：c++, c-preprocessor

我一直在调试一个特别隐蔽的错误，我现在认为它是由包含（或不包含）不同标头时的不同行为引起的意外更改引起的。

这不完全是我的代码的结构，但让我们看一下这个场景：

```
#include "Newly_created_header_which_accidentally_undefines_SOME_DEFINE.h"

// ...

#ifdef SOME_DEFINE
    code_which_i_believe_i_am_always_running();
#else 
    code_which_fails_which_i_have_forgotten_about(); // runtime error stack traces back here, but I don't know this... or maybe it's some strange linker error
#endif 
```

我搜索了我的 git 提交并缩小了错误的原因，无数次编译和运行我的代码，但在几个小时后才发现导致错误所需的唯一区别是包含看起来完全良性和不相关的标题。

也许这是为什么预处理器基本上很烂的一个很好的论据。

但我喜欢它。预处理器很酷，因为它可以让我们创建快捷方式。只是这些捷径中的一些，如果不小心使用，会咬我们的屁股。

所以在这个时刻，如果我可以使用一个指令，比如**在编译期间**`#echo "Running old crashy code"`我可以看到这个指令，那将会有所帮助，这样我就可以立即得到提示，开始调查为什么没有定义 SOME_DEFINE。

 **据我所知，确定是否定义了 SOME_DEFINE 的直接方法是执行类似的操作

```
#ifndef SOME_DEFINE
    printf("SOME_DEFINE not defined!!\n"); 
```

这肯定会完成工作，但没有充分的理由在运行时执行此任务，因为它完全是在编译时确定的。这只是我想在编译时看到的东西。

话虽如此，在这种情况下，使用打印（或日志甚至抛出异常）可能是可以接受的，因为我不会真正关心减慢或弄乱有问题的代码。但是，如果我有两条代码路径，这两条路径都很重要，我只想在编译时知道哪个代码路径被激活，这并不适用。我不得不担心在程序开始时运行执行预处理器条件打印的代码。

这实际上只是一种冗长的提问方式，“我可以在编译期间使用预处理器指令将字符串回显到输出吗？”

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-26T23:01:26.353

如果使用该`#error`指令，将直接打印输出并停止编译：

```
$ make days_in_month
cc     days_in_month.c   -o days_in_month
days_in_month.c:2:2: error: #error "ugly!"
make: *** [days_in_month] Error 1
$ 
```

这可能不是您想要的，但它可以快速完成工作。

```
$ cat days_in_month.c
#include <stdio.h>
#error "ugly!"
... 
```

如果您希望继续处理，您可以使用`#warning`：

```
$ make days_in_month
cc     days_in_month.c   -o days_in_month
days_in_month.c:2:2: warning: #warning "ugly!" [-Wcpp] 
```

```
$ head days_in_month.c 
#include <stdio.h>
#warning "ugly!" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-01T03:27:42.303

更符合我所寻找的答案在这里：[https ://stackoverflow.com/a/3826876/340947](https://stackoverflow.com/a/3826876/340947)

对不起@sarnold**

# macos - 无法在 Mac OS X 上使文件可编辑

> ID：11217105
> 
> 赞同：1
> 
> 时间：2012-06-26T22:57:38.347
> 
> 标签：macos, apache2, terminal

我正在尝试编辑位于 /private/etc/apache2 中的 httpd.conf 文件，但我不知道如何获得写入权限

我已经搞定了

```
$ cd /private/etc/apache2
$ sudo chown bdh httpd.conf
$ ls -lash
 0 drwxr-xr-x  13 root      wheel   442B Jun  7 00:11 .
 0 drwxr-xr-x  93 root      wheel   3.1K Jun 26 10:51 ..
 0 drwxr-xr-x  13 root      wheel   442B Jan  3 16:26 extra
24 -r--r--r--   1 bdh       wheel    24K Jun  7 00:11 httpd.conf
 ...etc...
$ vim httpd.conf 
```

它说`"httpd.conf" [readonly] 677L, 24330C`

尝试`cp`进入桌面，但我也无法获得在那里编辑它的权限

我对使用终端很陌生，还有其他可以使用的命令吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T02:51:27.327

更改访问权限以编辑文件通常是不必要且不可取的。要在不更改访问权限的情况下编辑需要管理员（或其他用户）权限的文件，请使用：

```
sudo -e /private/etc/apache2 
```

Sudo 的`-e`选项告诉它您要编辑给定的文件。

此命令复制文件并使其可写，告诉使用 SUDO_EDITOR、VISUAL 或 EDITOR 环境变量指定的编辑器（按顺序检查它们）编辑文件，当编辑器退出时，文件被复制回来在不更改其访问权限的情况下还原到原始版本。

有关详细信息，请参阅 sudo 手册页：x-man-page://8/sudo

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T23:02:07.890

chmod 命令是您正在寻找的我相信：[http](http://en.wikipedia.org/wiki/Chmod) ://en.wikipedia.org/wiki/Chmod chmod 777 将让任何人例如读取、写入或执行。

正如richardhsu 正确添加的那样，744 是RWX，R--，R--，这可能就是您想要的。

# sql - SQL 中星期数的日期值

> ID：11217106
> 
> 赞同：-1
> 
> 时间：2012-06-26T22:57:55.627
> 
> 标签：sql

> **可能重复：**
> [从 T-SQL 中的周数获取日期](https://stackoverflow.com/questions/607817/get-dates-from-a-week-number-in-t-sql)

如果我在 SQL 查询中有周数，如何获取日期值。

就像如果我通过 26，它应该给我 2012 年 6 月 24 日。如果我通过 27，我应该得到 07/01/2012

任何帮助将不胜感激 ：）

索茨

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T23:00:07.003

在 SQL Server 中

```
DECLARE @StartDate DATE, @WeekVal INT
SET @WeekVal = 26 -- Set the week number
SET @StartDate = DATEADD(YEAR, DATEDIFF(YEAR, 0, GETDATE()), 0) -- Start of current year

;WITH cte AS (
    SELECT @StartDate AS DateVal, DATEPART(wk, @StartDate) AS WeekVal, 1 AS RowVal
    UNION ALL
    SELECT DATEADD(d, 1, DateVal),  DATEPART(wk, DATEADD(d, 1, DateVal)), RowVal + 1 
    FROM cte WHERE RowVal < 365
)
SELECT MIN(DateVal) StartOfWeek
FROM cte
WHERE WeekVal = @WeekVal
OPTION (MAXRECURSION 365); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T02:12:38.607

这为您提供了一周的开始和结束日期。[对于 SQL Server]

```
Declare @week integer set @week = 26
Declare @Year Integer Set @Year = year(getdate())
declare @date datetime

-- ------------------------------------
Set @date = DateAdd(day, 0, 
            DateAdd(month, 0, 
            DateAdd(Year, @Year-1900, 0)))

set @date = Dateadd(week, @week-1, @date)

select @date startweek, DATEADD (D, -1 * DatePart (DW, @date) + 7, @date) endweek 
```

这是它的结果：

```
startweek               endweek
----------------------- -----------------------
2012-07-01 00:00:00.000 2012-07-07 00:00:00.000

(1 row(s) affected) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T23:14:28.143

```
SELECT DATEADD(week, n, '11/25/2011'); 
```

n 是周数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T23:14:57.263

如果这不起作用，请尝试使用`WEEK()`而不是`WEEKOFYEAR()`.

```
CURDATE() - INTERVAL WEEKDAY(CURDATE()) DAY + INTERVAL (WEEKNO - WEEKOFYEAR(CURDATE())) WEEK 
```

# razor - 发现同一依赖程序集的不同版本之间存在冲突。MVC3 -> MVC4 / EF4 -> EF5

> ID：11217114
> 
> 赞同：10
> 
> 时间：2012-06-26T22:58:38.187
> 
> 标签：razor, asp.net-mvc-4, .net-4.5, entity-framework-5

问题是如何解决我的项目中升级到 MVC4 和 EF5 的程序集版本之间的冲突？

问题在于我的控制器和模型可以包含 System.Data.Objects，但现在是我的视图。

我正在使用 MVC 4，我的项目是从 MVC 3 升级的。

实体框架是版本 5。

我有一个能够使用 System.Data.Objects 中的 objectcontext 的控制器。

我的使用：使用 System.Data.Objects；使用 System.Data.Entity；

当我尝试在视图表单 System.Data.Objects 中包含 using 时，我得到：

CS0234：命名空间“System.Data”中不存在类型或命名空间名称“Objects”（您是否缺少程序集引用？）

我的目标是 .net 4.5

我的构建显示此消息：C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1561,5)：警告 MSB3247：发现同一依赖程序集的不同版本之间存在冲突。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-15T01:18:50.633

您可以在诊断模式下构建解决方案，以获取有关错误的更多详细信息。

打开 VS 选项对话框（工具 > 选项），导航到“项目和解决方案”节点并选择“构建和运行”。将 MS Build 项目构建输出详细程度更改为诊断。

看看[这里](http://lehmamic.wordpress.com/2012/07/05/resolving-msb3247found-conflicts-between-different-versions-of-the-same-dependent-assembly/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T02:41:07.923

如果您查看构建消息，它指出引用了 .net 框架的 4.0 版本...您的项目文件或 web/app.config 中是否有设置指定 .net 框架的冲突版本？

你熟悉 fuslog 吗？您可以将其设置为记录 .net 在运行应用程序时所做的所有程序集绑定。然后，您应该能够看到有关何时绑定的详细信息。如果您仍然无法弄清楚，您可以随时在 web.config 中的该 .dll 上执行绑定重定向。

[http://msdn.microsoft.com/en-us/library/eftw1fys.aspx](http://msdn.microsoft.com/en-us/library/eftw1fys.aspx) -- 绑定重定向

[http://msdn.microsoft.com/en-us/library/e74a18c4(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/e74a18c4(v=vs.71).aspx) -- 融合日志查看器

设置融合记录器并查看输出是什么。如果您没有从中得到答案，请尝试绑定重定向（这至少会给您一个临时解决方案）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-07T18:56:41.347

在我发布到的目录中，有一个名为 aspnet_client 的文件夹。我移动了它（而不是删除它），重新发布了它，并且它起作用了。我不确定为什么那个文件夹突然决定给我带来麻烦。

# cuda - 相当于 CUDA 内核中的 usleep()？

> ID：11217117
> 
> 赞同：11
> 
> 时间：2012-06-26T22:59:09.357
> 
> 标签：cuda, sleep, gpu, usleep

我想`usleep()`在 CUDA 内核中调用类似的东西。基本目标是让所有 GPU 内核休眠或忙碌等待数毫秒——这是我想为 CUDA 应用程序执行的一些健全性检查的一部分。我这样做的尝试如下：

```
#include <unistd.h>
#include <stdio.h>
#include <cuda.h>
#include <sys/time.h>

__global__ void gpu_uSleep(useconds_t wait_time_in_ms)
{
    usleep(wait_time_in_ms);
}

int main(void)
{
    //input parameters -- arbitrary
    //   TODO: set these exactly for full occupancy
    int m = 16;
    int n = 16;
    int block1D = 16;
    dim3 block(block1D, block1D);
    dim3 grid(m/block1D, n/block1D);

    useconds_t wait_time_in_ms = 1000;

    //execute the kernel
    gpu_uSleep<<< grid, block >>>(wait_time_in_ms);
    cudaDeviceSynchronize();

    return 0;
} 
```

当我尝试使用 NVCC 编译它时出现以下错误：

```
error: calling a host function("usleep") from a __device__/__global__ 
       function("gpu_uSleep") is not allowed 
```

显然，我不允许`usleep()`在内核中使用主机功能。什么是一个很好的选择呢？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-27T00:56:06.243

您可以在clock() 或clock64() 上旋转。CUDA SDK concurrentKernels 示例执行以下操作：

```
__global__ void clock_block(clock_t *d_o, clock_t clock_count)
{
    clock_t start_clock = clock();
    clock_t clock_offset = 0;
    while (clock_offset < clock_count)
    {
        clock_offset = clock() - start_clock;
    }
     d_o[0] = clock_offset;
} 
```

我推荐使用clock64()。clock() 和 clock64() 是循环的，因此您必须使用 cudaDeviceProperties() 查询频率。频率可以是动态的，因此很难保证准确的自旋循环。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-27T00:53:57.213

您可以使用读取为`clock()`.

要等待至少 10,000 个时钟周期：

```
clock_t start = clock();
clock_t now;
for (;;) {
  now = clock();
  clock_t cycles = now > start ? now - start : now + (0xffffffff - start);
  if (cycles >= 10000) {
    break;
  }
}
// Stored "now" in global memory here to prevent the
// compiler from optimizing away the entire loop.
*global_now = now; 
```

注意：这是未经测试的。[@Pedro 从这个答案](https://stackoverflow.com/questions/11209228/timing-different-sections-in-cuda-kernel/11209262#11209262)中借用了处理溢出的代码。有关如何工作的详细信息，请参阅他的答案和 CUDA C 编程指南 4.2 中的 B.10 节`clock()`。还有一个`clock64()`命令。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-01-28T12:36:48.020

对于最新版本的 CUDA，以及具有 Compute Capability 7.0 或更高版本（Volta、Turing、Ampere 等）的设备，您可以使用`__nanosleep()`原语：

```
void __nanosleep(unsigned ns); 
```

这消除了旧答案中建议的忙碌睡眠的需要。

# sql - 在 ColdFusion 中，属性值周围的单引号和双引号有什么作用？

> ID：11217118
> 
> 赞同：4
> 
> 时间：2012-06-26T22:59:11.477
> 
> 标签：sql, coldfusion, cfqueryparam

例如，#Trim(FORM.fromfirstname)# 周围的“”有什么作用？我正在添加`<cfqueryparam...>`标签，想知道是否仍需要引号？

```
<CFQUERY NAME="account" DATASOURCE="#APPLICATION.centralDSN#">
    SELECT * 
    FROM users
    WHERE (firstname =<CFQUERYPARAM VALUE="#Trim(FORM.fromfirstname)#">)
        AND (lastname = <CFQUERYPARAM VALUE="#Trim(FORM.fromlastname)#">)
        AND (email = '#Trim(FORM.fromemail)#')
</CFQUERY> 
```

这是一个不使用引号的`WHERE`子句：

```
<CFIF getUser.RecordCount>
    <CFQUERY NAME="cUser" DATASOURCE="#APPLICATION.centralDSN#">
        UPDATE users
            SET mailing_list = <CFIF IsDefined("FORM.mailing_list")>#FORM.mailing_list#<CFELSE>0</CFIF>
        WHERE user_id = #getUser.user_id#
    </CFQUERY>
</cfif> 
```

编辑：如果他们不做任何事情，保留它们没有害处，对吗？在另一个文件中，我发现了类似的例子

```
 to="#ListFirst(EnglishEmailList)#"
    cc="#ListRest(EnglishEmailList)#" 
```

所以如果他们已经在那里，我会离开他们吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-26T23:47:53.447

**SQL 需要字符串的引号。**

引号是标准 SQL 语法的一部分，用于指示字符串（实际上几乎每种语言都有引号）。

如果它没有引号，那么 SQL 解析器将不知道字符串在哪里结束并且 SQL 继续。

数字不需要引号 - 值的结束位置没有歧义。

还要记住 #hashes# 与 SQL 无关——它们完全在 CFML 方面。运行 cfquery 标记时，CF 评估正文（包括它包含的任何哈希表达式）以创建 SQL 字符串，然后将其传递到数据库（以及其他设置/参数/等）。SQL 服务器不知道该字符串的哪些部分是硬编码的，以及哪些部分可能是从哈希值中计算出来的。

**cfqueryparam 不需要引号。**

当您修复查询以使用 cfqueryparam 时，您正在创建参数，并且标记处理所有必要的内容，以向 SQL 数据库指示字符串/等。（您永远不需要将 cfqueryparam 标记本身用引号括起来。）

在 cfqueryparam 标记中，无论您是否为属性使用引号，都将产生零差异——这三个都产生相同的结果：

```
<cfqueryparam value="#var#" />
<cfqueryparam value='#var#' />
<cfqueryparam value=#var# /> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T23:10:14.707

如果您正在使用，`<cfqueryparam>`那么您永远不需要使用引号。

如果您在 SQL 中比较字符串（而不是使用`<cfqueryparam>`），那么您需要使用引号。如果您要与数字进行比较（而不是使用`<cfqueryparam>`），那么您不需要引号。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T23:19:43.547

如果您不使用 queryparam 标记，则字符串仍然需要引号，并且您应该尽可能对查询中的任何变量使用 queryparams。

不使用该功能会为 SQL 注入创建一个可能的攻击点，并且几乎是一个滥用的邀请。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-26T23:53:21.900

我知道这很乏味，但是如果您在将变量插入 SQL 语句之前清理它们，则更容易理解和阅读。

这是我写这个的方法：

```
// manipulate and rescope variables as required here
// no quotes or pound signs necessary when when not outputting
<cfset VARIABLES.FirstName = Trim(FORM.fromfirstname)>
<cfset VARIABLES.LastName  = Trim(FORM.fromlastname)>
<cfset VARIABLES.Email     = Trim(FORM.fromemail)>

// stop sql inject ~ use cfqueryparam
// simplifying your sql statement will make it much easier to diagnose problems
<CFQUERY NAME="account" DATASOURCE="#APPLICATION.centralDSN#">
    SELECT * 
    FROM users
    WHERE  firstname = <CFQUERYPARAM cfqltype='cf_sql_varchar' VALUE="#VARIABLES.FirstName#"> 
        AND lastname = <CFQUERYPARAM cfqltype='cf_sql_varchar' VALUE="#VARIABLES.LastName#">
        AND email    = <CFQUERYPARAM cfqltype='cf_sql_varchar' VALUE="#VARIABLES.Email#">
</CFQUERY> 
```

在以下 SQL 语句的`WHERE`子句中，您输出的是整数，因此不需要引号。

```
 WHERE user_id = #getUser.user_id# 
```

当然，很容易搞砸你的数据库。使用 cfqueryparam 并保存您的工作...

```
 WHERE user_id = <CFQUERYPARAM  cfqltype='cf_sql_integer'  VALUE="#VARIABLES.user_id#"> 
```

不要在 SQL 语句中进行 IF/ELSE 登录，而是在之前进行，如下所示：

```
<cfif isDefined("FORM.mailing_list")>
  <cfset VARIABLES.mailing_list = trim(FORM.mailing_list)>
<cfelse>
  <cfset VARIABLES.mailing_list = 0>
</cfif>

UPDATE users
SET mailing_list = <cfqueryparam cfsqltype="cf_sql_varchar" value="#VARIABLES.mailing_list#">
WHERE user_id = #getUser.user_id# 
```

# opengl - 如何在opengl中使用纹理管理内存？

> ID：11217121
> 
> 赞同：23
> 
> 时间：2012-06-26T22:59:22.307
> 
> 标签：opengl, textures

在我的应用程序中，我广泛使用 glTexImage2D。我复制图像的一些图像并将其渲染为纹理，每次单击鼠标时我都会经常这样做。我把它作为一个字节数组来渲染。内存被吃光了，交换内存也被分配了。是内存泄漏吗？还是因为 glTexImage2D 拥有任何引用或其他任何东西。

**编辑：**

```
 //I allocate the memory once
    GLuint texName;
    texture_data = new GLubyte[width*height];

    // Each time user click I repeat the following code (this code in in callback)
    // Before this code the texture_data is modified to reflect the changes
    glGenTextures(3, &texname);
    glBindTexture(GL_TEXTURE_2D, texname);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, width, height, 0, GL_RGB, GL_UNSIGNED_BYTE,texture_data); 
```

我希望您的关闭请求和否决投票现在停止！

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-26T23:10:46.640

假设您`glGenTextures`每次调用时都会生成一个新纹理`glTexImage2D`，那么您就是在浪费内存，并且如果您不跟踪生成的所有纹理，则会泄漏内存。`glTexImage2D`获取输入数据并将其存储在视频卡内存中。您在调用之前绑定的纹理名称`glTexImage2D`- 您生成的纹理名称`glGenTextures`是该块视频卡内存的句柄。

如果您的纹理很大，并且您每次使用它时都分配新内存来存储越来越多的副本，那么您将很快耗尽内存。`glTexImage2D`解决方案是在应用程序初始化期间调用一次，仅`glBindTexture`在您想使用它时调用。如果您想在单击时更改纹理本身，只需调用`glBindTexture`和`glTexImage2D`。如果您的新图像与前一个图像大小相同，您可以调用`glTexSubImage2D`告诉 OpenGL 覆盖旧图像数据，而不是删除它并上传新图像。

**更新**

为了响应您的新代码，我正在用更具体的答案更新我的答案。您完全以错误的方式处理 OpenGL 纹理的输出`glGenTextures`is a`GLuint[]`而不是 a `String`or `char[]`。对于使用 生成的每个纹理`glGenTextures`，OpenGL 都会为您返回一个纹理句柄（作为无符号整数）。这个句柄存储你给它的状态`glTexParameteri`以及显卡上的一块内存，如果你用`glTexImage[1/2/3]D`. 存储句柄并在需要更新时向其发送新数据由您决定。如果您覆盖句柄或忘记它，数据仍然保留在图形卡上，但您无法访问它。当您只需要 1 个纹理时，您还告诉 OpenGL 生成 3 个纹理。

看到原样`texture_data`具有固定大小，您可以使用`glTexSubImage2D`而不是更新纹理`glTexImage2D`。这是您修改的代码以避免此问题导致的内存泄漏：

```
texture_data = new GLubyte[width*height]();
GLuint texname; //handle to a texture
glGenTextures(1, &texname); //Gen a new texture and store the handle in texname

//These settings stick with the texture that's bound. You only need to set them
//once.
glBindTexture(GL_TEXTURE_2D, texname);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);

//allocate memory on the graphics card for the texture. It's fine if
//texture_data doesn't have any data in it, the texture will just appear black
//until you update it.
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, width, height, 0, GL_RGB,
    GL_UNSIGNED_BYTE, texture_data);

...

//bind the texture again when you want to update it.
glBindTexture(GL_TEXTURE_2D, texname);
glTexSubImage2D(GL_TEXTURE_2D, 0, 0, 0, width, height, 0, GL_RGB,
    GL_UNSIGNED_BYTE, texture_data);

...

//When you're done using the texture, delete it. This will set texname to 0 and
//delete all of the graphics card memory associated with the texture. If you
//don't call this method, the texture will stay in graphics card memory until you
//close the application.
glDeleteTextures(1, &texname); 
```

# ios - rootViewController 设置但出现方向不正确

> ID：11217123
> 
> 赞同：2
> 
> 时间：2012-06-26T22:59:32.400
> 
> 标签：ios, nib, uiinterfaceorientation, uiapplicationdelegate

[我的情况与这个问题](https://stackoverflow.com/questions/6532894/orientation-problem-when-i-set-a-rootviewcontroller)非常相似。我有一个通用的应用程序，其中 iPhone 为纵向，iPad 为横向，我使用 appDelegate.window.rootViewController = newScreen 在所有主屏幕之间切换；iPhone 应用程序完美运行。iPad应用程序有时会以纵向而不是横向将屏幕弹出。这是一些示例转换代码：

```
AppDelegate* appDelegate = (AppDelegate*)[[UIApplication sharedApplication] delegate];
            ViewController* v = nil;
            if (IS_IPAD()) {
                v = [[ViewController alloc] initWithNibName:@"ViewController-iPad" bundle:nil];
            }else{
                v = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
            }
            [appDelegate.window setRootViewController:(UIViewController*)v]; 
```

我也从[另一个问题](https://stackoverflow.com/questions/8053832/rootviewcontroller-animation-transition-initial-orientation-is-wrong)中尝试过这个：

```
AppDelegate* appDelegate = (AppDelegate*)[[UIApplication sharedApplication] delegate];
            ViewController* v = nil;
            if (IS_IPAD()) {
                v = [[ViewController alloc] initWithNibName:@"ViewController-iPad" bundle:nil];
            }else{
                v = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
            }

            [UIView
             transitionWithView:appDelegate.window 
             duration:0.5
             options:UIViewAnimationOptionTransitionCrossDissolve
             animations:^(void) {
                 BOOL oldState = [UIView areAnimationsEnabled];
                 [UIView setAnimationsEnabled:NO];
                 [appDelegate.window setRootViewController:(UIViewController*)v];
                 [UIView setAnimationsEnabled:oldState];
             } 
             completion:nil]; 
```

但没有什么能解决它。

还尝试使用 [appDelegate.window makeKeyAndVisable] 和 [appDelegate.window makeKeyWindow]，希望这会“震撼”它做出正确的方向。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T21:57:50.170

我懂了！

这是我的过渡块的样子。我做的关键是从 CALayer 复制变换（进行实际旋转的东西）。请注意，您必须`#import <QuartzCore/QuartzCore.h>`在文件顶部包含 Quartz 框架。

```
[UIView transitionWithView:self.window 
                  duration:0.5 
                   options:UIViewAnimationOptionTransitionCrossDissolve 
                animations:^{                        
    BOOL oldState = [UIView areAnimationsEnabled];
    [UIView setAnimationsEnabled:NO];
    target.view.layer.transform = window.rootViewController.view.layer.transform;
    window.rootViewController = target;
    [UIView setAnimationsEnabled:oldState];
} completion:nil]; 
```

# zend-mail - Zend Mail 被声明为 Ratware

> ID：11217124
> 
> 赞同：0
> 
> 时间：2012-06-26T22:59:35.363
> 
> 标签：zend-mail

我在这样的包装类中使用 Zend_mail 和 SMTP：

```
//$_config has all required and valid attributes to send a mail successfully.
$tmpconfig = Array('auth' => 'login',
                    'username' => $this->_config->MAIL_LOGIN,
                    'password' => $this->_config->MAIL_PASSWORT);

$this->_transport = new Zend_Mail_Transport_Smtp($this->_config->MAIL_SMTP,$tmpconfig);
$this->_mail = new Zend_Mail();
$this->_mail->setFrom($this->_config->MAIL_ADDRESS, $this->_config->MAIL_SENDER_NAME);
...

//$_data has already all required and valid fields and values...

$this->_mail->setBodyText($this->_data['maildata']['BodyText'],'UTF-8','UTF-8');
$this->_mail->setSubject($this->_data['maildata']['Subject']);
$this->_mail->addTo($this->_data['maildata']['RecipientEmail'], $this->_data['maildata']['RecipientName']);

$this->_mail->send($this->_transport); 
```

场景 1：我将带有测试帐户的邮件发送到专有服务器，并从我的测试系统发送到测试邮件地址。将收到此邮件。

场景 2：我将带有另一个测试帐户的邮件发送到另一个专有服务器到相同的邮件地址，有两个测试系统。此邮件被视为鼠软件而被拒绝。我已经和服务器管理员谈过了，他说邮件生成不正确。没有有效的 EHLO 问候语：“远程主机在 HELO/EHLO 问候语中使用了我们的名字。”

我真的不知道它是 zend_mail 类还是测试系统中的问题。

第一个测试系统：PHP 版本 5.3.2-1ubuntu4.14，Apache/2.2.14 (Ubuntu)

第二个测试系统：PHP 版本 5.3.1，Apache/2.2.14 (Unix)（Mac OS X 上的 Apache）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T14:13:10.977

我认为您的第二个邮件服务器配置过于严格，或者您的配置方式可能有问题`Zend_Mail`。 `Zend_Mail`非常适合我，我正在使用它向多个 SMTP 服务器发送电子邮件，包括 Gmail 和流行的共享网络托管服务中的服务器。

如果您在端口 25 上发送，我相信许多邮件服务器更有可能将您的邮件视为垃圾邮件。您的第二个邮件服务器是否支持使用备用端口发送？典型的替代方案是 465 或 587。另外，您是否尝试过[通过 SSL 或 TLS](http://framework.zend.com/manual/1.11/en/zend.mail.smtp-secure.html)发送？这些也可能有助于说服服务器您的消息是合法的。

# ruby-on-rails-3 - Rails：自定义 Rake 任务错误 => rake 中止！缺少：控制器

> ID：11217126
> 
> 赞同：0
> 
> 时间：2012-06-26T22:59:43.927
> 
> 标签：ruby-on-rails-3, rake, environment, rake-task

（使用 Rails 3.1 的 RoR，gem rake 0.9.2.2）

我正在尝试运行最基本的自定义 rake 任务，如您在此处看到的：

```
task :update_me => :environment do

Product.all.each do |product|
        puts product.link
end

end 
```

我不断收到以下错误。如果我只是打印出 hello world 并取出 ":environment" 部分，该任务就会运行。我的 rake 任务似乎在其中的 ":environment" 部分遇到了问题，但我需要它来访问我的模型。

```
rake aborted!
missing :controller

Tasks: TOP => update_me => environment
(See full trace by running task with --trace) 
```

痕迹：

```
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/actionpack-3.2.3/lib/action_dispatch/routing/mapper.rb:179:in `default_controller_and_action'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/actionpack-3.2.3/lib/action_dispatch/routing/mapper.rb:76:in `normalize_options!'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/actionpack-3.2.3/lib/action_dispatch/routing/mapper.rb:59:in `initialize'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/actionpack-3.2.3/lib/action_dispatch/routing/mapper.rb:1302:in `new'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/actionpack-3.2.3/lib/action_dispatch/routing/mapper.rb:1302:in `add_route'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/actionpack-3.2.3/lib/action_dispatch/routing/mapper.rb:1282:in `decomposed_match'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/actionpack-3.2.3/lib/action_dispatch/routing/mapper.rb:1268:in `block in match'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/actionpack-3.2.3/lib/action_dispatch/routing/mapper.rb:1268:in `each'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/actionpack-3.2.3/lib/action_dispatch/routing/mapper.rb:1268:in `match'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/actionpack-3.2.3/lib/action_dispatch/routing/mapper.rb:505:in `map_method'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/actionpack-3.2.3/lib/action_dispatch/routing/mapper.rb:467:in `get'
/home/ubuntu/code/preevio/config/routes.rb:35:in `block in <top (required)>'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:282:in `instance_exec'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:282:in `eval_block'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:260:in `draw'
/home/ubuntu/code/preevio/config/routes.rb:1:in `<top (required)>'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:245:in `load'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:245:in `block in load'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:245:in `load'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/railties-3.2.3/lib/rails/application/routes_reloader.rb:40:in `block in load_paths'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/railties-3.2.3/lib/rails/application/routes_reloader.rb:40:in `each'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/railties-3.2.3/lib/rails/application/routes_reloader.rb:40:in `load_paths'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/railties-3.2.3/lib/rails/application/routes_reloader.rb:16:in `reload!'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/railties-3.2.3/lib/rails/application/routes_reloader.rb:26:in `block in updater'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/activesupport-3.2.3/lib/active_support/file_update_checker.rb:78:in `call'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/activesupport-3.2.3/lib/active_support/file_update_checker.rb:78:in `execute'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/railties-3.2.3/lib/rails/application/routes_reloader.rb:27:in `updater'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/railties-3.2.3/lib/rails/application/routes_reloader.rb:7:in `execute_if_updated'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/railties-3.2.3/lib/rails/application/finisher.rb:66:in `block in <module:Finisher>'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `instance_exec'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `run'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/railties-3.2.3/lib/rails/initializable.rb:55:in `block in run_initializers'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `each'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `run_initializers'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/railties-3.2.3/lib/rails/application.rb:136:in `initialize!'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in `method_missing'
/home/ubuntu/code/preevio/config/environment.rb:5:in `<top (required)>'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/railties-3.2.3/lib/rails/application.rb:103:in `require_environment!'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/railties-3.2.3/lib/rails/application.rb:292:in `block (2 levels) in initialize_tasks'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/home/ubuntu/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/rake-0.9.2.2/lib/rake/task.rb:176:in `block in invoke_prerequisites'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `each'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `invoke_prerequisites'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/rake-0.9.2.2/lib/rake/task.rb:157:in `block in invoke_with_call_chain'
/home/ubuntu/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/bin/rake:19:in `load'
/home/ubuntu/.rvm/gems/ruby-1.9.2-p290@rails31/bin/rake:19:in `<main>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T23:49:30.307

回溯似乎表明路由文件中存在错误，该文件在您需要环境时加载。

在这些情况下，运行`rake routes`将带来有关问题的更多信息。

# php - 我可以在 Meta Http Equiv Refresh 中传递变量吗？

> ID：11217127
> 
> 赞同：2
> 
> 时间：2012-06-26T22:59:48.000
> 
> 标签：php

我刚刚完成了这个脚本，它运行良好，但我很难将 $invite 变量传递给 register.php 页面。有人可以告诉我如何实现这一目标吗？我将其定义为 $invite = $_POST['inviteinput'];

如何从 index.php 获取用户输入以转移到 register.php？感谢您的帮助！

HTML表格：

```
 <form action="index.php" method="post">
    What is your Invite Code?<BR />
    <input class="textbox" name="inviteinput" type="text" />
    <BR />
    <input type="hidden" name="formsubmitted" value="TRUE" />
    <input name="Submit" type="submit" value="Verify" />
    </form> 
```

PHP：

```
<?PHP
include ('scripts/dbconnect.php');

if (isset($_POST['formsubmitted'])) {

if (empty($_POST['inviteinput'])) {
echo '<div class="errormsgempty"><u>ERROR</u>:<br>You must enter a valid invite code to proceed!</div>';
} else {

$invite = $_POST['inviteinput'];//else assign it a variable
$invite = stripslashes($invite);
$invite = mysql_real_escape_string($invite);

$sql = "SELECT yourMemberId FROM Register WHERE yourMemberId='$invite'";
$result = mysql_query($sql);

if(mysql_num_rows($result) > 0) {

echo '<META HTTP-EQUIV="Refresh" Content="0; URL=register.php">';   
} else { 
echo '<div class="errormsgbox"><u>ERROR</u>:<br>The Invite Code you entered ' . $invite . ' is NOT a valid invite code!</div>';
//($notvalidcode = "The Invite Code you entered <strong>" . $invite . "</strong> is NOT a valid invite code!");
}
}
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T23:03:59.280

绝对地。只需将其添加到 URL：

```
<meta http-equiv="Refresh" Content="0; url=register.php?var=value&othervar=hello" /> 
```

请注意，您最好使用：

```
header("Location: register.php?var=value&othervar=hello");
exit; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T23:04:21.690

有几种方法将其保存在会话中

```
session_start();
$_SESSION['invite'] = $invite; 
```

第二个是你可以通过 get

```
echo '<META HTTP-EQUIV="Refresh" Content="0; URL=register.php?invite=' . $invite . '">'; 
```

我会推荐选项 2。另外，你为什么要做`$invite = $_POST['inviteinput'];`两次？

# ruby-on-rails - 在 ruby on rails 中使用 xml 数据填充下拉列表

> ID：11217134
> 
> 赞同：1
> 
> 时间：2012-06-26T23:00:50.713
> 
> 标签：ruby-on-rails, ruby, xml, drop-down-menu, hash

我需要用 xml 文档中的数据填充 ruby​​ on rails 中的下拉列表。

xml 文档的格式如下：

```
<Countries>
    <Country>
        <CountryCode>US</CountryCode>
        <CountryName>United States</CountryName>
    </Country>
    ...
</Countries> 
```

然后我尝试使用以下代码转换为哈希：

```
<% countries_xml = File.read(".../countries.xml") %>
<% countries = Hash.from_xml(countries_xml) %> 
```

我得到了这样的哈希：

```
{"Countries"=>{"Country"=>[{"CountryCode"=>"US", "CountryName"=>"United States"}, ... ]}} 
```

我正在尝试使用此哈希来填充下拉列表，但我认为我被卡住了。我试过这样：

```
<% user.select :country, countries["Countries"]["Country"].each %> 
```

但这只是用哈希填充下拉列表，因为国家对象是哈希数组的哈希或类似的东西。我需要它以便 CountryNames 在下拉列表中，并且在用户发布表单时发送 CountryCodes。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:09:12.990

在此处查看选择表单构建器方法的文档：http: [//api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-select)

本质上，您需要这样做来构建选择的选项数组：

```
countries["Countries"]["Country"].collect { |c| [c['CountryCode'], c['CountryName'] } 
```

此外，您可能希望将该 xml 文件读取和解析方法从视图中取出，并将其弹出到控制器中，甚至作为类方法放入模型中。这将有助于使您的代码更易于维护，但这只是我的两分钱......

# vb6 - VB6 中的 urlDownloadToFile 错误 2147467260

> ID：11217138
> 
> 赞同：0
> 
> 时间：2012-06-26T23:01:25.063
> 
> 标签：vb6, download

我在 VB6 中使用 urlDownloadToFile API 从服务器下载可执行文件。API 返回错误代码 2147467260（事务中止）

该问题只能在特定计算机（win7）上重现。

有什么问题？是否有不涉及安装第三方下载器的快速修复？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:31:32.007

用户不是他计算机上的管理员。作为解决方案，他应该以管理员身份运行该程序。

# ios - 当我为我的 iPhone 应用程序寻找一个特定的 iPhone 功能时，我如何知道要在 Xcode 文档中寻找什么类或框架？

> ID：11217142
> 
> 赞同：0
> 
> 时间：2012-06-26T23:01:49.073
> 
> 标签：ios, xcode, api, ios5

当我为我的 iPhone/iPad 应用程序寻找特定的 iPhone 功能时，我如何知道要在 Xcode 文档中寻找什么类或框架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T23:25:14.650

Google plus iOS 开发者网站，例如：

```
video site:developer.apple.com/library/ios 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T23:33:32.667

developer.apple.com 提供了最好的文档。例如 UIAccelerometer 页面：

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAccelerometer_Class/Reference/UIAccelerometer.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAccelerometer_Class/Reference/UIAccelerometer.html)

在顶部说它是框架的一部分**/System/Library/Frameworks/UIKit.framework Framework**

# css - 在 knockout.js 中切换 css 以更改选择列表宽度

> ID：11217154
> 
> 赞同：1
> 
> 时间：2012-06-26T23:03:17.890
> 
> 标签：css, internet-explorer-8, knockout.js, selectlist, jquery-templates

我正在使用带有 jQ​​uery tmpl 插件的 Knockout.js。我定义的模板有几个选择列表。单击选择列表（以容纳列表中最长的元素）时，我需要扩展选择项的宽度（在 IE 8 上）。当用户单击选择列表以实现此目的时，我正在考虑切换 css 类，但不知道如何去做。这是我到目前为止所拥有的：

```
//CSS classes
<style>
    .bigclass
    {
        width: 200px;
    }
    .normalclass
    {
        width: auto;
    }
</style>

// Call makeBig javascript method on mouseover.
<script id='criteriaRowTemplate' type='text/html'>
    <tr>
        <td style="width: 23%"><select style="width: 100%" data-bind='event: { mouseover: makeBig, mouseout: makeNormal}, options: criteriaData, optionsText: "Text", optionsCaption: "--Select--", value: SearchCriterion' /></td>
    </tr>
</script>

var CriteriaLine = function() {
    this.SearchCriterion = ko.observable();

    //Control comes to this method. Not sure though if the element captured is correct.
    makeBig = function(element) { 
        $(element).addClass("bigclass")
    };
    makeNormal = function(element) { 
        $(element).addClass("normalclass")
    };
}; 
```

所以我的问题是：

1.  我们如何将选择列表传递给 makeBig javascript 函数？我相信我需要在我的代码中更改以下语法： data-bind='event: { mouseover: makeBig, mouseout: makeNormal

2.  我们如何将类添加到传递的选择列表中。我已经添加了代码，但它不起作用，可能是因为元素没有值。

3.  或者，是否有任何其他方法可以确保用户在 IE 8 中看到下拉列表的全文？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T20:41:39.300

这是一个自定义绑定，用于在悬停时向元素添加 CSS 类：http: [//jsfiddle.net/BL9zt/](http://jsfiddle.net/BL9zt/)

请注意，它订阅了特定于 IE 的`mouseenter`事件`mouseleave`，因此您还必须引用在其他浏览器中模拟这些事件的 jQuery。

此处描述了另一种与淘汰赛无关的方法： [http ://www.getharvest.com/blog/wp-content/uploads/2009/12/select_box_demo.html](http://www.getharvest.com/blog/wp-content/uploads/2009/12/select_box_demo.html)

# java - 如何从 SQL Query 中保存结果集以便多次使用？

> ID：11217155
> 
> 赞同：1
> 
> 时间：2012-06-26T23:03:28.873
> 
> 标签：java, resultset

我有这个问题：首先，我使用 Java 执行 SQL 查询，然后将结果存储到名为 rs 的 resultSet() 中。查询如下：

```
"select ad_id, publisher_id, date, impressions, clicks from table" 
```

然后我使用以下方法读取所有数据：

```
while(rs.next()){
    (...)
} 
```

问题是我们正在运行的代码需要多次重复使用来自 rs 的所有信息（运行随机梯度，因此有几次迭代）但是当它开始新的迭代（从迭代 1 到 2）时，rs 现在是 null我们必须再次执行 SQL 查询，这需要相当长的时间......

是否有一些“直接”的方法可以将此查询的结果保存到变量中？我们考虑创建两个 ArrayList 来保存整数数字（ad_id、publisher_id ...）和一个用于日期字段，然后遍历这些列表，但我们认为也许有更好、更简单的方法来做到这一点

在 python 中，我们所要做的就是：

```
data = cursor.fetchall() 
```

并且变量“data”可以多次使用，也许Java中有类似的东西（我还在学习Java，所以我不确定）

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T23:37:59.000

在 Java 中，ResultSet 对象是一个只能向前移动的游标，并且只能迭代一次。因此，如果您想多次使用它，您可以将结果存储到临时变量（如列表）中。

最好遵循一些面向对象的方法来存储结果，而不是在 HashMap 中使用松散耦合的数组或键值对。

首先，您应该将数据封装到 Java 对象中，例如创建这样的类

```
public class ClickInfo {
  private int ad_id;
  private int publisher_id;
  private Date date;
  private int impressions;
  private int clicks;

  // Create getter and setter functions for the instance variabless

} 
```

读取数据库并创建`ClickInfo`对象并将其存储在数组中。

```
List<ClickInfo> list = new ArrayList<ClickInfo>();

while (rs.next()) {
  ClickInfo clickInfo = new ClickInfo();
  clickInfo.setAdId(rs.getInt("ad_id"));
  ...
  list.add(clickInfo);
} 
```

现在，您可以多次遍历列表以访问数据

```
for (ClickInfo cInfo : list)
  System.out.println(cInfo.getAdId()); 
```

**编辑**：上面的示例将结果存储在 ArrayList 中，ClickInfo 对象可以存储在对您的应用程序有意义的任何数据结构中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T23:54:19.247

如果您的 JDBC ResultSet 是[可滚动](http://java.sun.com/developer/onlineTraining/Programming/JDCBook/jdbc.html#scroll)的（我认为是在 JDBC v2 中引入的），您可以通过调用 ResultSet 本身来重用`ResultSet#beforeFirst`，而不必从中复制数据。例子：

```
Statement stmt = dbconx.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE,
                                        ResultSet.CONCUR_READ_ONLY);
ResultSet rs = stmt.executeQuery(sql);
while (rs.next()) {
  // do stuff
}
// when finished you can reuse the ResultSet by calling beforeFirst()
rs.beforeFirst();

while (rs.next()) {
  // do more stuff
}
rs.beforeFirst();
// etc. 
```

我已经让它与 MySQL JDBC 驱动程序一起使用。我在 PostgreSQL 驱动程序上进行了尝试，该驱动程序不支持 Scrollable ResultSets，因此如果您的驱动程序不支持它，您需要将结果缓存在某个 Collection 中，正如此处的其他答案所描述的那样。

如果是可滚动的，也可以看上面链接中的`absolute`和`relative`方法跳转到ResultSet中的任意点，在某些场景下可能会有用。

**更新：**正如 Will 在下面的评论中指出的那样 - 您可能需要在您的附加参数`createStatement`中使 ResultSet 可滚动。我已将其添加为上面的第一行代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T23:13:53.807

您最好的选择是完全按照您所说的将其保存到多维列表中。

这是一个非常基本的功能：

数据成员：

```
List<List> multiDimensionalList = new ArrayList(); 
```

功能：

```
while(rs.next()){
//create temporary list
List tempList = new ArrayList();
//add results to temporary list
tempList.add(rs.getInt("ad_id")); 
...
//add temporary list to your multidimensionallist
multiDimensionalList.add(tempList);
} 
```

# parsing - prolog：在简单的语言解析器中解析句子并生成响应

> ID：11217165
> 
> 赞同：0
> 
> 时间：2012-06-26T23:04:48.007
> 
> 标签：parsing, syntax, prolog

到目前为止，我有以下工作：

```
gen_phrase(S1,S3,Cr) :- noun_phrase(S1,S2,Cr1), verb_phrase(S2,S3,Cr2),
                        append([Cr1],[Cr2],Cr),add_rule(Cr).

question_phrase(S1,S5,Cr) :- ist(S1,S2),noun_phrase(S2,S3,Cr1),
                             noun_phrase(S3,S4,Cr2),
                             append([Cr1],[Cr2],Cr).

add_rule([X,Y]) :-
    Fact =.. [Y, X],
    assertz(Fact). 
```

给定测试运行，代码生成以下内容：

```
1 ?- gen_phrase([the,comp456,is,a,computing,course],S3,Cr).
S3 = []
Cr = [comp456, computing_course]. 
```

add_rule(Cr) 断言存在谓词 Computing_course(comp456)。现在我想做的是问一个问题：

```
4 ?- question_phrase([is,the,comp456,a,computing,course],X,Cr).
Cr = [comp456, computing_course] . 
```

我需要做的是提取我可以做的computing_course和comp456，然后将其转换为prolog接受的形式。这应该看起来像 Y(X)，其中 Y = Computing_course 是谓词，X = comp456 是原子。结果应该类似于：

```
2 ?- computing_course(comp456).
true. 
```

然后是“什么是计算课程”之类的问题：

```
3 ?- computing_course(X).
X = comp456. 
```

我考虑过使用assertz，但是一旦构造了谓词，我仍然不知道如何调用它。我很难找到需要采取哪些步骤来实现这一目标。（使用 swi-prolog）。

编辑：我已经意识到有一个谓词调用（）。但是我想构建这样的东西：

```
ask([X,Y]) :- call(Y(X)).

2 ?- gen_phrase([a,comp456,is,a,computing,course],S3,Cr).
S3 = [],
Cr = [comp456, computing_course] 

4 ?- question_phrase([is,the,comp456,a,computing,course],X,Cr),ask(Cr).
ERROR: toplevel: Undefined procedure: ask/1 (DWIM could not correct goal) 
```

这样的 call() 在语法上似乎不正确。很高兴知道这是否可能以及如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T05:51:47.077

[call/N](http://www.swi-prolog.org/pldoc/doc_for?object=call/2)这就是你需要的（这里 N == 2）：

```
ask([X,Y]) :- call(Y,X). 
```

您也可以使用与您已经使用的非常相似的东西`add_rule/1`：

```
ask([X,Y]) :- C =.. [Y,X], call(C). 
```

第一种形式更高效，也更标准化。

# c# - 阅读安装了 MS Access 2010 的旧 V1.X MS Access 文件

> ID：11217169
> 
> 赞同：0
> 
> 时间：2012-06-26T23:05:21.347
> 
> 标签：c#, ms-access

我是新人，所以对我温柔:)

我创建了一些 C# 代码来读取 MS Access 文件的架构定义。它适用于大多数版本的 Access，但是当我尝试阅读旧版本的 Access (V1.X) 时，我收到以下错误：

> 外部数据源或使用以前版本的 Microsoft Jet 创建的数据库不支持此属性。

这是我的代码：

```
private DataTable ReadSchema(string strTable)
{

        DataTable schemaTable = new DataTable();
        try
        {
            OleDbConnection conn = new OleDbConnection("Provider= Microsoft.JET.OleDB.4.0;data source=R:\\CB Import\\CBS.MDB");

            conn.Open();
            OleDbCommand cmd = new OleDbCommand(strTable, conn);
            cmd.CommandType = CommandType.TableDirect;

            OleDbDataReader reader = cmd.ExecuteReader(CommandBehavior.SchemaOnly);
            schemaTable = reader.GetSchemaTable();
            reader.Close();
            conn.Close();

            DataColumn dcRec = new DataColumn("TableName", typeof(string));
            dcRec.DefaultValue = strTable;
            schemaTable.Columns.Add(dcRec);

            schemaTable.Columns.Add("Type", typeof(string));
            schemaTable.Columns.Add("Length", typeof(string));

            foreach (DataRow r in schemaTable.Rows)
            {
                Console.WriteLine(r["ColumnName"].ToString() + " " + r["ColumnSize"].ToString() + " " + r["DataType"].ToString() + " " + r["NumericPrecision"].ToString() + " " + r["NumericScale"].ToString());
                r["Type"] = r["DataType"];
                r["Length"] = r["ColumnSize"];

                               }
        }

        catch (Exception e)
        {
        MessageBox.Show(e.Message);
        }

        return (schemaTable);

    } 
```

它在这条线上爆炸：

```
OleDbDataReader reader = cmd.ExecuteReader(CommandBehavior.SchemaOnly); 
```

我的机器上安装了 Access 2010，即使我尝试在此版本的 Access 中打开这些旧的麻烦文件，我仍然会收到有关打开旧版本的错误。

除了我尝试阅读旧版本的 Access 时，此代码都可以正常工作。我可以通过使用 Access 2007（安装在另一台机器上）并将数据库文件保存为 2007 版本来解决它，但如果可能的话，我希望能够自动化（编码）这个？如果有另一种编码方式，或者我搞砸了，请告诉我。

任何帮助都将得到极大的欢迎，并用啤酒、巧克力、鲜花或任何漂浮在你船上的东西来回报:)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:16:05.790

好的，这就是答案 - 我自己解决了。

```
 public DataTable ReadSchema(string strTable, string strConnectionString, string strAccessFileName)
    {
       DataTable schemaTable = new DataTable();
       schemaTable.Columns.Add("ColumnName", typeof(string));
       schemaTable.Columns.Add("ColumnSize", typeof(Int32));
       schemaTable.Columns.Add("NumericPrecision", typeof(Int32));
       schemaTable.Columns.Add("NumericScale", typeof(Int32));
       schemaTable.Columns.Add("DataType", typeof(string));
       schemaTable.Columns.Add("Length", typeof(string));

       try
       {

           using (var con = new OleDbConnection(strConnectionString))
           {
               con.Open();
               using (var cmd = new OleDbCommand("SELECT * FROM [" + strTable + "]", con))
               using (var reader = cmd.ExecuteReader(CommandBehavior.SchemaOnly))
               {
                   var table = reader.GetSchemaTable();

                   foreach (DataRow row in table.Rows)
                   {
                       Console.WriteLine(row["ColumnName"].ToString() + " " + row["ColumnSize"].ToString() + " " + row["DataType"].ToString() + " " + row["NumericPrecision"].ToString() + " " + row["NumericScale"].ToString());

                       DataRow drRecord = schemaTable.NewRow();

                       drRecord["ColumnName"] = row["ColumnName"];
                       drRecord["ColumnSize"] = row["ColumnSize"];
                       drRecord["NumericPrecision"] = row["NumericPrecision"];
                       drRecord["NumericScale"] = row["NumericScale"];
                       drRecord["DataType"] = row["DataType"];

                       schemaTable.Rows.Add(drRecord); 
                   }
               }
           }
       }
       catch (Exception Ex)
       {

           string strMessage = "Selecting schema for table " + strTable + ". " + Environment.NewLine + Ex.Message;
           MessageBox.Show(strMessage, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
           tran.strErrors = tran.strErrors + strMessage + "\r\n";
           txtErrors.Text = txtErrors.Text + strMessage + "\r\n";
       }

        return (schemaTable);

    } 
```

事实证明，糟糕的“OleDbCommand cmd = new OleDbCommand(strTable, conn);” 该行不适用于旧的 V1.X 数据库文件。所以用“SELECT”代替就可以了。

给我更多的啤酒！:)

# c# - 在正则表达式中使用引号，在 C# 中使用引号

> ID：11217170
> 
> 赞同：1
> 
> 时间：2012-06-26T23:05:22.983
> 
> 标签：c#, regex, quotes

注意：本题中的所有引号实际上都是代码的一部分。

我正在学习正则表达式，我正在尝试抓取一个带有音乐的网站。我将网站的源代码放入一个名为“ytcmusic.txt”的文本文件中。这是html的示例：

```
<li><a href="angelpool%20-%20know.mp3"> angelpool - know.mp3</a></li>
<li><a href="angelpool%20-%20sellout.mp3"> angelpool - sellout.mp3</a></li>
<li><a href="angelpool%20-%20time.mp3"> angelpool - time.mp3</a></li>
<li><a href="bella%20-%20gibsons.mp3"> bella - gibsons.mp3</a></li> 
```

我将以第一行为例，我试图只抓取“angelpool%20-%20know.mp3”，这是我使用的正则表达式：“.*.mp3” ----- - 当我把它放到 C# 中时，我必须用引号将它括起来，这会破坏正则表达式中的引号。继承人的代码（它不编译，如果你删除正则表达式周围的一组引号，它会但显然不返回源的正确部分）：

```
var sr = new StreamReader("ytcmusic.txt");
        string str = sr.ReadToEnd();
        var match = Regex.Match(str, @".*.mp3"); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T23:08:09.877

这会做

```
"[^"]*" 
```

请注意，我让您保留您的示例输入，并假设标题是唯一引用的内容。如果不是这种情况，您必须在正则表达式中添加更多上下文。

如果你想在没有引号的情况下捕获，你可以像这样引入括号

```
"([^"]*)" 
```

在 C# 中，这变成

```
StringCollection resultList = new StringCollection();
Regex regexObj = new Regex("\"([^\"]*)\"");
Match matchResult = regexObj.Match(subjectString);
while (matchResult.Success) {
    resultList.Add(matchResult.Groups[1].Value);
    matchResult = matchResult.NextMatch();
} 
```

# emacs - 从交互函数内部调用 kill-rectangle

> ID：11217173
> 
> 赞同：2
> 
> 时间：2012-06-26T23:05:32.673
> 
> 标签：emacs, elisp

我正在尝试编写一个函数，它将：

1.  如果没有选择区域，则终止当前行。
2.  如果选择了一个区域，则终止点和标记之间的矩形。

(2) 我的意思是如果你运行 Mx kill-rectangle 会发生同样的事情。

这是我对该功能的尝试：

```
(defun cut-line-or-rectangle ()
  "Cut rectangle if selection exists, cut line otherwise"
  (interactive)
  (if mark-active
      (kill-rectangle (point) (mark))
    (kill-whole-line)
  )
) 
```

这将满足 (1) 但如果区域处于活动状态则不执行任何操作。在这种情况下，如何使 emacs 服从 kill-rectangle 功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T23:24:29.540

`kill-rectangle`采用`start`and`end`顺序，因此您的代码仅在 point < 标记时才有效。

做这种事情的典型方法是给你的函数`start`和`end`参数，然后使用`(interactive "r")`.

# jquery - ajax请求完成加载时的jQuery回调

> ID：11217174
> 
> 赞同：0
> 
> 时间：2012-06-26T23:05:47.953
> 
> 标签：jquery

在 jQuery 中有一个回调可以在 ajax 请求完成加载时使用。我想知道的原因是因为我想在 ajax 请求完成之前显示加载 gif。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T23:09:19.043

有关 ajax 事件，请参阅[此页面。](http://docs.jquery.com/Ajax_Events)您需要做的就是绑定`ajaxComplete`，然后您可以从那里清除加载图片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T23:10:19.137

是的，如果您查看 jQuery 文档，您可以设置一个回调值。

完成（jqXHR，textStatus）还是成功（数据，textStatus，jqXHR）？

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

只需在 ajax 调用中传入的 ajax 设置对象上设置一个名为“success”或“complete”的属性，并在请求完成时调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T23:12:17.233

是的，有[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

> success(data, textStatus, jqXHR) 请求成功时调用的函数。

或者

> error(jqXHR, textStatus, errorThrown) 请求失败时调用的函数。

甚至：

> complete(jqXHR, textStatus) 请求完成时调用的函数（在执行成功和错误回调之后）。

# javascript - JS - jQuery - 使用复选框启用禁用表单字段

> ID：11217175
> 
> 赞同：0
> 
> 时间：2012-06-26T23:06:02.783
> 
> 标签：javascript, jquery, forms

我想在单击复选框时禁用输入框和按钮。

我的标记：

```
<h4>Random or Not </h4>

    <!-- Use Random Image -->  

    <label><input name="o99_aufu_options[o99_aufu_random]" id="o99_aufu_options[o99_aufu_random]" value="1" checked="checked" type="checkbox">Use Random Image ? <em></em></label><br>  

    <!-- If the above not checked - needs to be enabled -->                         
    Upload Image <label for="upload_image"> <input id="upload_image" size="36" name="o99_aufu_options[o99_aufu_upload_image]" value="" type="text"> <input id="upload_image_button" value="Choose Image or upload" type="button"> </label> 
```

jQuery :

```
if (jQuery('#o99_aufu_options[o99_aufu_random]').is(':checked')) {
       jQuery('#upload_image :input').attr('disabled', true);
    } else {
        jQuery('#upload_image_button,#upload_image :input').removeAttr('disabled');
    } 
```

好吧-显然，如果我在这里问-它不起作用:-)

小提琴：

[http://jsfiddle.net/obmerk99/6jFMf/3/](http://jsfiddle.net/obmerk99/6jFMf/3/)

另外作为一个额外的问题 - 是否可以仅使用输入的 NAME 来做到这一点，从标记中省略 ID ？

**更新我**- 工作解决方案：

[http://jsfiddle.net/obmerk99/6jFMf/20/](http://jsfiddle.net/obmerk99/6jFMf/20/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T23:08:35.107

> > 奖金问题 - 是否可以仅使用输入的 NAME 来做到这一点，从标记中省略 ID ？

您可以在 jQuery 选择器中使用任何属性，包括名称：

```
$('[name="foo"]) 
```

由于你的名字有括号，你可能不得不转义它们：

```
$('[name="o99_aufu_options\[o99_aufu_random\]"]') 
```

如果需要，您还可以将它们限定为特定元素，或者将它们与其他选择器组合：

```
$('input.someClass[name="o99_aufu_options\[o99_aufu_random\]"]') 
```

至于您的实际问题，我的第一个猜测是……错误~~的是您的问题是空格；你有没有尝试过：~~

 ~~```
#upload_image:input 
```~~ 

~~反而？~~

我的第二个猜测也是错误~~的，问题是：~~

 ~~```
.prop('disabled', true); 
```~~ 

你有没有尝试过：

```
.prop('disabled', 'disabled'); 
```

~~?~~

好吧，我实际上看了你的小提琴，有几件事不对；这是一个工作示例，如果您有任何问题，请告诉我，但希望它是不言自明的：

```
jQuery(function() {
    jQuery('input[name="o99_aufu_options\[o99_aufu_random\]"]').click(function(){
        var isChecked = jQuery(this).is(':checked') ;
        jQuery('#upload_image:input').prop('disabled', isChecked? 'disabled' : null);
    })
}); 
```

# javascript - ajax 加载后 IE 焦点事件随机失败

> ID：11217177
> 
> 赞同：2
> 
> 时间：2012-06-26T23:06:14.327
> 
> 标签：javascript, jquery, ajax, internet-explorer-8, dom-manipulation

目前，我们只支持 IE8。

我有一个 ajax 调用，它从服务器获取数据，用响应替换容器 div 中的 HTML，然后尝试将焦点放在响应中包含的元素上。

依赖[IE魔法]？有时此代码有效，有时则无效。我需要找到可以 100% 工作的东西。console.log 语句 100% 的时间记录正确的 ID，即使焦点失败。

```
$.ajax({
    type: 'POST',
    url: that.Url,
    contentType: 'application/json; charset=utf-8',
    dataType: 'html',
    data: dataToSend,
    success: function (response) {
        $(container).html(response);
        that.initialize();

        var element = document.getElementById(elementId);
        setTimeout(function () {
            setTimeout(function () {
                setTimeout(function () {
                    setTimeout(function () {
                        setTimeout(function () {
                            setTimeout(function () {
                                console.log($(element).attr('id'));
                                element.focus();
                            }, 10);
                        }, 10);
                    }, 10);
                }, 10);
            }, 10);
        }, 10);
    } 
```

嵌套的 setTimeouts 用于查看在较早的超时期间是否有其他东西被放入堆栈。我尝试将单个 setTimeout 设置为 1000，但仍然看到随机故障。我已经尝试替换`$(container).html(response);`为`$(container)[0].innerHTML = response;`，但仍然无法始终如一地工作。我试过`document.getElementById(element)`用`$(container).find('#' + elementId)`. 我也尝试过`var element = document.getElementById(elementId);`进入 setTimeout 并且仍然看到随机失败。使用 Firefox，需要 0 个 setTimeouts 并且代码运行完美，但不幸的是，这不是我们的选择。更改`console.log`为`alert`确实可以解决问题，但这只是因为它会将焦点延迟到单击“确定”之后，但是额外的鼠标单击对于可用性来说很糟糕。

`that.initialize()`将类添加到新元素、添加事件、修改新元素的宽度/高度等……所有这些都 100% 有效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T14:49:24.010

这似乎是旧 IE 中的一个真正错误。据报道，一个有效的技巧是`.focus()`连续调用两次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T23:12:00.923

不应该`$(element).focus()`代替`element.focus()`吗？`focus`是一个 jQuery 方法，必须在 jQuery 对象上调用。

# c++ - 双倍为真/假

> ID：11217179
> 
> 赞同：6
> 
> 时间：2012-06-26T23:06:20.490
> 
> 标签：c++, if-statement, type-conversion, scoping, variable-declaration

Bjarne 建议使用 if 中的条件作为范围限制。特别是这个例子。

```
if ( double d = fd()  ) {
   // d in scope here...
} 
```

我很好奇如何以真/假的方式解释声明。

1.  这是一个宣言
2.  是双倍的。

编辑：它在 6.3.2.1 C++ 编程语言中作为推荐。

Edit2：templatetypedefs 对指针的建议，特别是动态转换，可能会给 Bjarnes 建议提供洞察力。

SteveJessop 告诉我： - 条件不是表达式，它也可以是声明，使用的值是正在评估的值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T23:11:07.660

您看到的代码是一种在`if`语句中声明变量的专用技术。你通常会看到这样的东西：

```
if (T* ptr = function()) {
    /* ptr is non-NULL, do something with it here */
} else {
    /* ptr is NULL, and moreover is out of scope and can't be used here. */
} 
```

一个特别常见的情况是使用`dynamic_cast`这里：

```
if (Derived* dPtr = dynamic_cast<Derived*>(basePtr)) {
     /* basePtr really points at a Derived, so use dPtr as a pointer to it. */
} else {
     /* basePtr doesn't point at a Derived, but we can't use dPtr here anyway. */
} 
```

在您的情况下发生的事情是您在声明中声明了`double`一个`if`。C++ 自动将任何非零值解释为`true`，将任何零值解释为`false`. 这段代码的意思是“声明`d`并设置它等于`fd()`。如果它不为零，则执行该`if`语句。”

也就是说，这是一个非常糟糕的主意，因为`double`s 会受到各种舍入错误的影响，这些错误会在大多数情况下阻止它们为 0。除非表现得非常好，否则这段代码几乎肯定会执行`if`语句的主体。`function`

希望这可以帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T23:33:47.653

在 Stroustrup 给出的示例中，`if`块中的代码将一个值除以`d`：

```
if (double d = prim(true)) {
    left /= d;
    break;
} 
```

*除以 0 是未定义的行为，因此在这种情况下*，在除以之前测试`d`该值是有意义的。`0.0`出于 Stroustrup 所述的原因，将定义置于条件中是一种方便的方法。

您的代码没有说明为什么该值`0.0`会特别，因此不清楚为什么有人会将定义`d`与该测试结合起来。仅当您定义的类型的“假”值需要特殊处理时，才使用 Stroustrup 模式。否则就这样做：

```
{
    double d = fd();
    // d in scope here...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T23:08:44.957

该`if`语句基于赋值表达式中分配给变量的值。如果 double 计算结果为 0.0 以外的任何值，它将在内部运行代码。

请注意，您不应该将双打与零进行比较，但根据我的经验，它通常有效。

基本上，你不应该这样做。

该主题的其他贡献者发现此表达式用于排除零情况，以避免被零除。这绝对是聪明的，就我而言，这种情况使这种用法合法化（但请考虑这种代码可能导致的混乱）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-26T23:11:16.547

它既是声明也是双重的。这完全等同于

```
{
    double d = fd();
    if (d) {
    }
} 
```

但是，这种模式值得用一些额外的小语法来简化，因为它非常有用且很常见。此外，一旦您开始添加 else 子句，转换就不那么明显了，因为`d`超出了它们的范围。

此外，正如其他人所指出的，它通常很有用，但与 0 相比，特定的 FP 类型存在一些问题。

# python - 未定义的变量循环

> ID：11217180
> 
> 赞同：0
> 
> 时间：2012-06-26T23:06:22.220
> 
> 标签：python

我是 Python 新手。我收到一条错误消息，显示“未定义的变量”。我想不通。代码中的语句如下：

```
Classroom1 = Classroom(FirstCourseStartTime = 8, LastCourseEndTime = 7.75)
m_count = 0 
h_count = 0
t_count = 0
l_count = 0
loopsize = 10000
Loop(Classroom1, m_count, h_count, t_count, l_count, loopsize)
def Loop(Classroom1, m_count, h_count, t_count, l_count, loopsize):
    for i in range(0, loopsize):
        Mutated = Classroom()
        Mutated = Classroom1.CopyOfClassroom(Mutated)
        Mutated.Mutate()
        HardConstraintClassroomMet = Classroom1.ComputeHardConstraint()
        HardConstraintMutatedMet = Mutated.ComputeHardConstraint()
        if HardConstraintClassroomMet == False and HardConstraintMutatedMet == False:
            h_count + 1
            t_count + 1
            Classroom1.Mutate()
            continue
        if Mutated.FitnessValue() > Classroom1.FitnessValue():
            m_count + 1
            t_count + 1
            Classroom1 = Mutated
        if Classroom1.ComputeHardConstraint() == False:
            l_count + 1
            temp = l_count*loopsize
            print "Unable to meet hard consraints in %d" % temp
        Loop(Classroom1, m_count, h_count, t_count, l_count, loopsize) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T23:08:20.823

您在`Loop()`定义函数之前调用了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:10:20.383

首先你必须组织：

```
class classroom,
    def loop 
```

在你的函数循环中写入全局变量：

```
global m_count
global h_count
global t_count 
```

最后更改 if 语句：

```
if HardConstraintClassroomMet == False and HardConstraintMutatedMet == False:
        h_count = h_count + 1
        t_count = t_count + 1 
```

# excel - Excel：在两个日期之间匹配给定日期的函数

> ID：11217181
> 
> 赞同：3
> 
> 时间：2012-06-26T23:06:25.330
> 
> 标签：excel, excel-formula

我的一张表列出了一系列阶段（当前阶段 2-12，因为阶段 1 已经完成）。每个阶段在 A 列中都有一个数字，在 B 列中有一个开始日期，在 C 列中有一个结束日期。阶段是连续的，并按从最早到最晚的顺序列出。

有没有办法让我在给定的日期返回它所处的阶段？我在 vba 中有一个函数，但我希望可能有一些内置的公式（或某种方式来判断一堆内置的公式）。基本上我想返回开始日期小于或等于给定日期，结束日期大于或等于该日期的阶段的编号。感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T02:34:31.217

您可以使用索引/匹配公式。匹配将行数返回到列中小于或等于您要查找的日期的第一个日期的范围内。然后索引使用 Match 返回的数字来找到正确的阶段。

Vlookup 在一个步骤中做了类似的事情，但它不能向左看，而且 Index/Match 更酷。请注意，您不需要结束日期。这是公式：

```
=INDEX($A$2:$A$7,MATCH($D$2,$B$2:$B$7,1)) 
```

![日期范围的索引/匹配](../Images/c3b66e2820ab4343dcbfc97a6cdc5959.png)

# python - 谷歌应用引擎计数

> ID：11217185
> 
> 赞同：3
> 
> 时间：2012-06-26T23:06:53.507
> 
> 标签：python, google-app-engine

在应用程序引擎（ndb 或 db）中处理计数的适当方法是什么？

我有两个项目，一个是 django-nonrel，另一个是纯 django 项目，但两者都需要能够进行查询并返回计数。结果可能大于 1,000。

我看到一些帖子说我可以使用[分片计数器](https://developers.google.com/appengine/articles/sharding_counters)，但他们正在计算*所有*实体。我需要能够知道有多少实体具有以下属性 x=1,y=True,z=3

```
#Is this the appropriate way?
count = some_entity.gql(query_string).count(SOME_LARGE_NUMBER) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T00:56:42.697

数据存储不擅长这种查询，因为要进行权衡以使其分布式。这些包括相当慢的读取和非常有限的索引。

如果您需要一组有限的统计数据（用户数、文章数等），那么您可以在单独的实体中继续运行总计。这意味着当某些事情发生变化时，您需要执行两次写入（放置）：一次用于更改的实体，一次用于更新 stats 实体。但是您只需要一次读取（获取）即可获取统计信息，而不是从多少实体中提取它们。

你可能对此感到不舒服，因为它违背了我们对标准化的了解，但它的效率要高得多，并且在许多情况下工作得很好。如果这很关键，您总是可以让 cron 作业定期执行查询以检查统计信息是否准确。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T01:17:15.453

由于您在此处使用[db.Model](https://developers.google.com/appengine/docs/python/datastore/modelclass)，因此这是一种方法，您可以通过某些过滤器计算所有实体，这些过滤器可能超过 1000，这是一个硬限制（如果它仍然适用）：

```
FETCH_LIMIT = 1000

def count_model(x=1, y=True, z=3):
  model_qry = MyModel.all(keys_only=True)
  model_qry.filter('x =', x)
  model_qry.filter('y =', y)
  model_qry.filter('z =', z)

  count = None
  total = 0
  cursor = None
  while count != 0:
    if cursor:
      count = model_qry.with_cursor(cursor).count()
    else:
      count = model_qry.count(limit=FETCH_LIMIT)

    total += count
    cursor = model_qry.cursor()
  return total 
```

如果您要在请求中使用上述内容，那么您可能会超时，因此请考虑改用[任务队列](https://stackoverflow.com/a/11204482/8418)。

同样正如 FoxyLad 建议的那样，出于性能原因并将上述方法作为定期运行的 cron 作业以使统计信息完美同步，最好将总计运行在单独的实体中。

# java - 使用 Android 的 XML-RPC 评论 wordpress

> ID：11217186
> 
> 赞同：1
> 
> 时间：2012-06-26T23:06:58.700
> 
> 标签：java, android, wordpress

我知道可以通过 RPC 在 wordpress 中发布帖子，但是是否可以通过 Java/Android 应用程序以类似的方式对博客帖子发表评论。

我已经尝试通过 httppost 从 android 应用程序发布评论，但它对我不起作用，因为发布请求必须包含 akismet nonce。我也在 Stackoverflow 上阅读了一些主题，但没有出现任何内容。

# javascript - Javascript将对象推入数组会改变整个数组

> ID：11217188
> 
> 赞同：11
> 
> 时间：2012-06-26T23:07:14.690
> 
> 标签：javascript, arrays, object

我正在使用特定的游戏制作框架，但我认为这个问题适用于 javascript

我试图制作一个旁白脚本，以便玩家可以看到“兽人打你”。在他的屏幕底部。我想一次显示最后 4 条消息，如果他们愿意，可能允许玩家回顾日志中的 30-50 条消息。为此，我设置了对象和一个数组以将对象推入。

所以我最初设置了一些这样的变量......

```
servermessage: {"color1":"yellow", "color2":"white", "message1":"", "message2":""},
servermessagelist: new Array(), 
```

当我通过操作 servermessage.color1 ... .message1 等多次使用此命令（如下）和事件调用的不同数据时...

```
servermessagelist.push(servermessage) 
```

它用该数据的副本覆盖整个数组......知道为什么或我能做些什么。

因此，如果我推 color1 "RED" 和 message1 "Rover".. 数据是正确的，那么如果我推 color1"yellow" 和 message1 "Bus"，则数据是 .color1:"yellow" .message1:"Bus" 的两个副本

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-26T23:11:31.880

当您推入时，您实际上（或多或少）推入了对该对象的引用`servermessage`。`servermessagelist`因此，所做的任何更改都会`servermessage`在您引用它的任何地方反映出来。听起来您想要做的是将对象的克隆推送到列表中。

声明一个函数如下：

```
function cloneMessage(servermessage) {
    var clone ={};
    for( var key in servermessage ){
        if(servermessage.hasOwnProperty(key)) //ensure not adding inherited props
            clone[key]=servermessage[key];
    }
    return clone;
} 
```

然后每次您想将消息推送到列表中时，请执行以下操作：

```
servermessagelist.push( cloneMessage(servermessage) ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T23:14:27.123

当您将对象添加到数组时，它只是对添加的对象的引用。通过将对象添加到数组中，不会复制对象。因此，当您稍后更改对象并将其再次添加到数组中时，您只需要一个包含多个对同一对象的引用的数组。

为数组的每个添加创建一个新对象：

```
servermessage = {"color1":"yellow", "color2":"white", "message1":"", "message2":""};
servermessagelist.push(servermessage);
servermessage = {"color1":"green", "color2":"red", "message1":"", "message2":"nice work"};
servermessagelist.push(servermessage); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-08-02T09:30:05.580

在将对象推入数组之前，有两种方法可以使用深度复制对象。1.通过对象方法创建新对象，然后推送。

```
servermessagelist = []; 
servermessagelist.push(Object.assign({}, servermessage)); 
```

2.  通过 JSON stringigy 方法创建对象的新引用，并使用 parse 方法推送它。

    `servermessagelist = []; servermessagelist.push(JSON.parse(JSON.stringify(servermessage));`

此方法对嵌套对象很有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T23:11:09.440

servermessagelist: new Array() 每次执行时都会清空数组。仅在最初初始化数组时执行该代码一次。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-02T16:58:27.660

我不知道为什么还没有建议使用 JSON 方法来执行此操作。您可以先对对象进行字符串化，然后再次对其进行解析以获取对象的副本。

```
let uniqueArr = [];
let referencesArr = [];
let obj = {a: 1, b:2};

uniqueArr.push(JSON.parse(JSON.stringify(obj)));
referencesArr.push(obj);

obj.a = 3;
obj.c = 5;
uniqueArr.push(JSON.parse(JSON.stringify(obj)));
referencesArr.push(obj);

//You can see the differences in the console logs
console.log(uniqueArr);
console.log(referencesArr);
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-07T04:15:25.197

我也有同样的问题。我有一些复杂的对象要推入阵列。我做了什么; 我使用 JSON.stringify() 将 JSON 对象转换为字符串并推入数组。

当它从数组返回时，我只是使用 JSON.parse() 将该字符串转换为 JSON 对象。

这对我来说很好，尽管它是更全面的解决方案。在这里发帖如果你们有其他选择

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-01-19T14:16:42.627

此解决方案也适用于包含嵌套键的对象。

在推送之前，将 obj 字符串化为

```
JSON.stringify(obj) 
```

当你使用时，解析

```
JSON.parse(obj); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-22T19:47:05.880

正如上面多次提到的，最简单的方法是将它变成一个字符串并将其转换回 JSON 对象。

```
this.<JSONObjectArray>.push(JSON.parse(JSON.stringify(<JSONObject>))); 
```

奇迹般有效。

# ruby-on-rails - MailMan 和保存附件

> ID：11217190
> 
> 赞同：3
> 
> 时间：2012-06-26T23:07:36.247
> 
> 标签：ruby-on-rails, email-attachments, mailman

我正在使用[mailmain](https://github.com/titanous/mailman) gem 来获取 pop3 邮件。该库使用[邮件](http://rdoc.info/github/mikel/mail/Mail/Message#attachments-instance_method)gem 来分解邮件正文和附件。我已经到了可以在 pry 命令行中获取附件的地步，如下所示：

```
14: Mailman.config.rails_root = '../'
15: 
16: Mailman::Application.run do
17:   to 'expenses@surveymonkey.com' do
18:     require 'debugger'; debugger
=> 19:     print message
20:   end
21: end 
```

我可以像这样得到一个单独的附件

```
[1] pry(#<Mailman::Router>)> a = message.attachments[0]
=> #<Mail::Part:70339703566060, Multipart: false, Headers: <Content-Type: image/jpeg;   name="70s-Jump-Suit.jpeg">, <Content-Transfer-Encoding: base64>, <Content-Disposition: attachment; filename="70s-Jump-Suit.jpeg"; size=38412; creation-date="Tue, 26 Jun 2012 22:11:10 GMT"; modification-date="Tue, 26 Jun 2012 22:11:10 GMT">, <Content-Description: 70s-Jump-Suit.jpeg>> 
```

所以，问题是，我如何保存这些数据？

我很接近[这种方法](http://rdoc.info/github/mikel/mail/Mail/Message#attachments-instance_method)，但我无法正确保存。

我试过这样的东西

```
[2] pry(#<Mailman::Router>)> File.open( '/tmp/output.jpg', "w+b", 0644 ) { |f| f.write a.raw_source } 
```

但输出被搞砸了。

我只是对电子邮件编码知之甚少，无法使其正常工作。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T00:52:11.173

啊，我们开始：

[http://cbpowell.wordpress.com/2011/01/17/saving-attachments-with-ruby-1-9-2-rails-3-and-the-mail-gem/](http://cbpowell.wordpress.com/2011/01/17/saving-attachments-with-ruby-1-9-2-rails-3-and-the-mail-gem/)

```
# tmail is now a Mail object
tmail.attachments.each do |tattch|
  fn = tattch.filename
  begin
    File.open( fn, "w+b", 0644 ) { |f| f.write tattch.body.decoded }
  rescue Exception => e
    logger.error "Unable to save data for #{fn} because #{e.message}"
  end
end 
```

# mysql - MySQL - 将记录组合 成字段

> ID：11217191
> 
> 赞同：0
> 
> 时间：2012-06-26T23:07:36.407
> 
> 标签：mysql, sql

我想要做的是查询一个包含关于一个人的自定义数据的表并将其放入字段中，但是我将每个单独的字段作为我的回报中的记录。

我正在使用的当前语句是

```
SELECT s.fname, s.lname, s.email, s.mobile, s.country, cf.name, ca.value FROM
standard AS s
INNER JOIN people AS p ON
(s.pid = p.pid)
INNER JOIN custom_answers AS ca ON
(ca.pid = p.pid)
INNER JOIN custom_fields AS cf ON
(cf.fieldid = ca.fieldid)
WHERE p.acctid = 'xxxxxxxxxx' 
```

这给出了 22,000 行的结果集，而我只寻找 900 行。

数据输出的一个例子是

```
fname | lname | email | mobile | country | name     | value
tom   | smith | t@t   | 0412   | AU      | state    | Vic
tom   | smith | t@t   | 0412   | AU      | position | Dept Head
tom   | smith | t@t   | 0412   | AU      | guest    | John Smith
mick  | jones | m@j   | 0411   | AU      | postnom  | AOC
mick  | jones | m@j   | 0411   | AU      | state    | NSW
mick  | jones | m@j   | 0411   | AU      | postcode | 2000 
```

而我希望它输出的是

```
fname | lname | email | mobile | country | state | position  | guest      | postnom | postcode
tom   | smith | t@t   | 0412   | AU      | Vic   | Dept Head | John Smith | null    | null
mick  | jones | m@j   | 0411   | AU      | NSW   | null      | null       | AOC     | 2000 
```

可能会或可能不会导致复杂化的是，每个人的自定义字段的数量并不相同。有些可能只有少数或自定义字段，但有些可能超过 30 个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T02:44:18.457

您必须按所有非聚合应用分组，这将创建一个汇总...因此基于将“cf.name”值与每个元素进行比较应用 MAX()，您将只获取每个“as”列的值......如果没有找到这样的记录，它将保持空白（我留下了空格，但你可以做 NULL...

```
SELECT 
      s.fname, 
      s.lname, 
      s.email, 
      s.mobile, 
      s.country, 
      MAX( if( cf.name = 'state', ca.value, '          ' )) as State, 
      MAX( if( cf.name = 'position', ca.value, '          ' )) as Position, 
      MAX( if( cf.name = 'guest', ca.value, '          ' )) as Guest, 
      MAX( if( cf.name = 'postnom', ca.value, '          ' )) as PostNom, 
      MAX( if( cf.name = 'postcode', ca.value, '          ' )) as PostCode
   FROM
      standard AS s
         INNER JOIN people AS p 
            ON s.pid = p.pid
            INNER JOIN custom_answers AS ca
               ON p.pid = ca.pid 
               INNER JOIN custom_fields AS cf
                  ON ca.fieldid = cf1.fieldid 
   WHERE 
      p.acctid = 'xxxxxxxxxx'
   group by
      s.fname,
      s.lname,
      s.email,
      s.mobile,
      s.country 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T00:44:14.900

如果我正确理解您的问题，我认为以下结构将起作用。这是我用来从与用户表分开的表中获得学校隶属关系和腰带等级的方法。

已编辑：这是针对已知数量的关联和腰带等级，我不确定您将如何针对未知数量的选项对其进行修改，并针对外部连接进行调整。

```
 SELECT test.tbl_user_accounts.*, t2.org_name as affil_one, t3.org_name as affil_two, t4.rank_name as rank_name
        FROM test.tbl_user_accounts 
        OUTER JOIN (test.tbl_organizations as t2) ON 
        (t2.org_id = test.tbl_user_accounts.affiliation_one)
        OUTER JOIN (test.tbl_organizations as t3) ON 
        (t3.org_id = test.tbl_user_accounts.affiliation_two)
        OUTER JOIN (test.tbl_ranks as t4) ON 
        (t4.id_rank = test.tbl_user_accounts.user_rank); 
```

# javascript - 未捕获的 SyntaxError 将多个值传递给函数

> ID：11217192
> 
> 赞同：0
> 
> 时间：2012-06-26T23:07:44.060
> 
> 标签：javascript, jquery

我正在尝试调用一个函数，但是在正确转义值并正确传递它方面遇到了一些困难。我目前有：

```
function selectdone(sel, title_id, status_type) {
...
}

$(function() {

$("td.status-updates").click(function() {
    if ($(this).find('#sel').length == 0) {
        var before = $(this).text();
        var title_id = $(this).parent().attr('id');
        var status_type = $(this).attr('class');
        $(this).html("<select id='sel' 
            onchange='selectdone(this," + title_id + "," + status_type +");'...
                                                <option>NS</option></select>");
    }

}); 
```

我不断从中得到的错误是`Uncaught SyntaxError: Unexpected identifier`.

但是，如果我按`'selectdone(this," + title_id + ");...`它的工作原理通过它，但如果我尝试通过三个它会引发该错误。

`status_type`注意：变量中有空格（多个类）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T23:12:43.767

jQuery 有很好的内置工具来处理事件和操作 DOM；我建议你使用这些。

```
$("td.status-updates").click(function() {
    if ($(this).find('#sel').length == 0) {
        var before = $(this).text();
        var title_id = $(this).parent().attr('id');
        var status_type = $(this).attr('class');
        $(this).empty().append(
            $('<select>').prop('id', 'sel')
            .on({
                change: function() {
                    selectdone(this, title_id, status_type);
                }
            })
            .append($('<option>').text('NS'))
        );
    }
}); 
```

[相关博文](http://minitechme.blogspot.ca/2012/01/stop-using-strings-for-html-and-embrace.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T23:13:30.757

从你的最后一个问题重复我自己：

```
$(this).html($("<select/>", {
  id: 'sel',
  change: function() {
    selectdone(this, title_id, status_type);
  }
}).append($("<option/>", { text: "NS" }))); 
```

此外，要获得“类”，最好使用“.prop()”：

```
var status_type = $(this).prop('className'); 
```

它是“类名”作为属性。在 jQuery 1.6 之后，您很少需要“.attr()”而不是“.prop()”。

# google-maps - 如何获得与 java 1.5 编译器兼容的 gwt-maps-3.0 api jar

> ID：11217194
> 
> 赞同：0
> 
> 时间：2012-06-26T23:08:03.973
> 
> 标签：google-maps, gwt

我在一家变化缓慢的大公司工作。我们正在部署到 Weblogic 10.2 环境，并且被 java 1.5 卡住了。这不是 GWT 库的问题，但是我们下载的 gwt-maps-3.0.2b.gwt22.jar 的下载版本是使用 1.6 编译器构建的。有谁知道是否有 1.5 内置版本可用？

尽管如此，是否可以使用 1.5 编译器进行重建，因为源代码在 jar 中？如果是这样，是否有人有构建脚本可以这样做？

-- 一些附加信息我们正在尝试升级一些现有的代码，这是他们在海外遇到的第一个错误。他们得到的编译错误是： o 错误：“class file has wrong version 50.0, should be 49.0”

我使用以下方法检查了jar文件。

1.  构建了以下程序：

    导入java.io.*；

    公共类 CheckVersion {
    public static void main(String[] args) throws IOException {
    for (int i=0; i < args.length; ++i) {
    checkVersion(args[i]);
    }
    }

    ```
    private static void checkVersion(String classFileName) throws IOException {
        DataInputStream in = new DataInputStream(new FileInputStream(classFileName));

        int magicNo = in.readInt();
        if (magicNo != 0xCAFEBABE) {
            System.err.println(classFileName + " is not a valid class file name");
            return;
        }
        int minor = in.readUnsignedShort();
        int major = in.readUnsignedShort();
        System.out.println(classFileName + ": " + major +"." + minor);
        in.close();
    } 
    ```

    }

2.  提取jar文件，例如。“jar xvf gwt-maps3-0.2b.jar”

3.  运行以下命令：“find .-name *.class | xargs java CheckVersion | cut -d':' -f2 | sort -u”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:58:52.453

您必须从谷歌代码下载源代码：

[http://code.google.com/p/gwt-google-maps-v3/source/checkout](http://code.google.com/p/gwt-google-maps-v3/source/checkout)

-- 不，这不起作用。页面上的所有版本都是用 1.6 构建的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:06:12.967

I was able to resolve this by downloading the source, commenting out the @Override annotations which in 1.5 require that method in the parent have an implementation, and recompiling the module.

# javascript - jQuery提交功能未触发

> ID：11217202
> 
> 赞同：-1
> 
> 时间：2012-06-26T23:08:48.943
> 
> 标签：javascript, jquery

我有一个表格

```
<form id="solicitud" action="ventas.php?content=nuevo" method="post">
...
</form> 
```

然后我必须使用 jQuery 提交我的提交，但我无法让它工作

```
 $("#nombres").click(function(){
    alert('clicked');
    $("form").submit(function(event){
         event.preventDefault();
    });
}); 
```

警报功能被调用，但我的表单没有提交，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:10:01.743

尝试 ：

```
$("#solicitud").submit(); 
```

代替 ：

```
$("form").submit(function(event){ event.preventDefault(); }); 
```

# android - Android NFC 卡模拟/使用手机作为卡

> ID：11217204
> 
> 赞同：3
> 
> 时间：2012-06-26T23:09:11.503
> 
> 标签：android, nfc, smartcard

我正在寻找一种将特定命令从手机发送到阅读器的方法。我已经读过由于安全原因，android 不支持卡仿真，但可以通过Nexus S 上的 android 2.3.4[固件补丁来实现。](http://forum.xda-developers.com/showthread.php?t=1281946)

我的主要问题是，我真的需要卡仿真来将定义的 APDU 发送到读卡器并接收答案 APDU，或者是否有任何其他可能通过滥用 android Beam？
如果我需要使用卡片模拟，有什么新见解吗？[最后的帖子](https://stackoverflow.com/questions/6611810/nfc-card-emulation-android/6690356)，我发现的[几个帖子](https://stackoverflow.com/questions/6992869/android-and-symbian-nfc-mobile-development-questions-and-answers-faq/7595889)都快一年了......

作为最后的附加信息，我将无法控制读者。

感谢您对卡片仿真的回答和任何新见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T10:53:54.967

你想要达到的目标有点坦率。在 NFC 中使用智能卡的原因是 NFC 协议的构建方式无法提前知道正确的响应。总有一个秘密，你不能随便猜。否则，所有使用非接触式智能卡的系统都会存在重大安全漏洞（建筑访问控制、

你不能只监视协议，保存交换，然后在某些软件中复制它们，在大多数应用程序上这将失败。在某个阶段会有一些随机值，并执行一些加密计算。

为了用手机模拟卡，您需要一个安全元件（手机上的智能卡芯片或手机中的 SIM 卡），并且您需要手机中的 NFC 芯片将卡模拟 APDU 路由到此安全元件（此可能是您所指的补丁正在做什么）。

有一些方法可以在 Android 应用程序中进行卡片模拟，但我怀疑这将需要大量修补，并且您将无法预测响应时间，因此您的读者可能不喜欢它。当您的手机关闭（例如电池耗尽）时，这也将阻止卡模拟工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T09:40:29.773

在 Android KitKat 4.4 中是可能的。查看此链接，我相信很快会添加更多信息。

[http://developer.android.com/guide/topics/connectivity/nfc/hce.html](http://developer.android.com/guide/topics/connectivity/nfc/hce.html)

# python - 在 python 脚本中使用 pip

> ID：11217209
> 
> 赞同：0
> 
> 时间：2012-06-26T23:09:27.513
> 
> 标签：python, svn, pip

我正在 python 中编写一个实用程序，它需要根据用户提供的标志和/或输入来检查（并在必要时安装甚至升级）目标项目/virtualenv 中的各种其他模块。我目前正在尝试直接/以编程方式使用“pip”（因为它支持我需要访问的各种 repo 类型），但我很难找到以这种方式使用它的示例或文档。

这似乎是前进的方向：

```
import pip
vcs = pip.vcs.VersionControl(url="http://path/to/repo/") 
```

......但它没有带来快乐。

我显然需要一些基础知识的帮助——比如我如何使用 pip 将 svn repo 的副本拉/导出到给定的本地目录中。最终，我还需要将它用于 git 和 mercurial checkout 以及标准 pypi 安装。任何链接、文档或指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T01:39:14.903

Pip 对 vcs url 使用特定格式。格式是

```
vcsname+url@rev 
```

@rev 是可选的，您可以使用它来引用特定的提交/标记

要使用 pip 将存储库从通用 vcs 检索到本地目录，您可以这样做

```
from pip.vcs import VcsSupport

req_url = 'git+git://url/repo'
dest_path = '/this/is/the/destination'

vcs = VcsSupport()
vc_type, url = req_url.split('+',1)
backend = vcs.get_backend(vc_type)
if backend:
    vcs_backend = backend(req_url)
    vcs_backend.obtain(dest_path)
else:
    print('Not a repository') 
```

检查[https://pip.pypa.io/en/stable/reference/pip_install/#id8](https://pip.pypa.io/en/stable/reference/pip_install/#id8)以了解支持哪些 vcs

# .net - OnClosing 事件通常从哪里引发？

> ID：11217217
> 
> 赞同：0
> 
> 时间：2012-06-26T23:10:03.690
> 
> 标签：.net, winforms, applicationcontext

我在 .NET 中创建了一个继承自 ApplicationContext 的类，我想知道在哪里最好引发我的 OnClosing 事件。现在，ApplicationContext 有一个“ThreadExit”事件，但它会在 ExitThread 和 ExitThreadCore 都运行后触发。这是一个典型的 OnClosing 事件会去的地方吗？这似乎更像是 OnClosed 事件的去向。

作为跟进，我的 OnClosed 事件应该去哪里？我认为，压倒一切并将其放在开头似乎是合理的。Dispose 的结束会安全吗？或者 OnClosed 甚至可能需要刚刚删除的东西？

编辑：所以看起来我必须使用从 ApplicationContext 继承的 ThreadExit 事件。我现在的问题是，从这里取消关闭是否安全？同样，我应该从哪里触发我的 OnClosed？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:11:17.903

我将使用 ThreadExit 事件，虽然我不喜欢这个名字。然而，我仍然想知道放置我的 OnClosed 事件的最佳地点。

# android - 我无法理解这个空指针异常

> ID：11217221
> 
> 赞同：0
> 
> 时间：2012-06-26T23:10:22.927
> 
> 标签：android, nullpointerexception

我正在学习Android，并且已经完成了自定义控件。当我把它放在一个布局中时，它工作正常。我在 itemduplicados.xml 中是这样放的：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <com.android.customViews.CtlDuplicado
        android:id="@+id/dupCancion"
        android:layout_width="match_parent"
        android:layout_height="match_parent"/>
</LinearLayout> 
```

然后我想做一个很多这样的控件的列表，所以我在listadoduplicado.xml中使用了一个listview：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<ListView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LstListadoDuplicados"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

</ListView>
</LinearLayout> 
```

一个带有 onCreate 的 Activity：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listadoduplicados);
        AdaptDuplicados adapter = new AdaptDuplicados(this, Deduplicator.deduplicate());
        final ListView lstDuplicados = (ListView) findViewById(R.id.LstListadoDuplicados);
        lstDuplicados.setAdapter(adapter);
        lstDuplicados.setVisibility(View.VISIBLE);

    } 
```

然后是一个扩展 arrayadapter 以使用 ctlduplicados 填充列表视图的类：

```
public AdaptDuplicados(Activity context, ArrayList<Duplicado> datos) {
    super(context, R.layout.itemduplicado, datos);
        this.context = context;
        this.datos = datos;
    }
    public View getView(int position, View convertView, ViewGroup parent) {
                View item = convertView;
                DuplicadoViewHolder dvh;
                if (item == null){
                    LayoutInflater li = context.getLayoutInflater();
                    item = li.inflate(R.layout.itemduplicado, null);
                    dvh = new DuplicadoViewHolder();
                    dvh.duplicado = (CtlDuplicado)item.findViewById(R.id.dupCancion);
                    item.setTag(item);
                }else{
                    dvh = (DuplicadoViewHolder)item.getTag();
                }
                dvh.duplicado.setCanciones(datos.get(position));//here is the nullpointerexception cause duplicado is null
                return (item);
            } 
```

好吧，我有一个空指针异常，因为 dvh.duplicato 是空的。

在 Eclipse 中调试我在行中看到了

```
item = li.inflate(R.layout.itemduplicado, null); 
```

该项目已创建，并且项目包含在名为 mChildren 的内部数组中良好创建的 CtlDuplicado，但是当我得到 item.findViewById(R.id.dupCancion) 时，它返回 null ...

R.id.dupCancion 在项目的 R 中定义。

有人可以告诉我发生了什么吗？

编辑：为空的 dvh.duplicato 是“if”中的那个，这个；

```
 dvh.duplicado = (CtlDuplicado)item.findViewById(R.id.dupCancion); 
```

R.id.dupCancion 存在，并且在项目的内部数组中创建了一个名为 mChildren 的 CtlDuplicado，但是当我在项目中调用 findViewById 时，它返回 null ...

实现：

我尝试访问自定义控件中的控件，并且可以通过以下方式访问它们：

```
lbltxt1 = (TextView)item.findViewById(R.id.lbltxt1);
lbltxt2 = (TextView)item.findViewById(R.id.lbltxt2);
lblSubtxt1 = (TextView)item.findViewById(R.id.lblSubtxt1); 
```

项目来自“如果”...

所以我可以访问我的控件的组件，但不能访问控件本身......

CtlDuplicado 已创建（我已通过调试器访问构造函数）其绘制正确但随后我无法通过 findViewById 访问它...但我可以通过该函数访问它们的组件... Ufff ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T01:33:47.710

您没有设置实际视图（可能是错字）

```
item.setTag(item); 
```

应该

```
item.setTag(dvh); 
```

# node.js - 使用旧版本的 Node.js Express 框架

> ID：11217222
> 
> 赞同：1
> 
> 时间：2012-06-26T23:10:28.003
> 
> 标签：node.js, express

我在使用 Node.js express 框架 3.0 时遇到了这个问题：

[https://github.com/visionmedia/express/issues/1187](https://github.com/visionmedia/express/issues/1187)

我一直在使用 express 框架 2.0，并且正在更新我的代码以使用下一个 3.0 框架。在上面的链接中，这家伙说他恢复到了 express@3.0.0beta1 版本，而不是他遇到问题的 express@3.0.0beta4 版本。我也想这样做，但我不知道如何指定 express@3.0.0beta1 ？我在哪里快递？

设置我的项目并使用时：

```
npm install express 
```

要在我的项目中安装 express 框架，我应该像这样指定版本：

```
npm install express b1 
```

任何帮助或建议将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T23:19:13.550

要安装特定版本： `npm install <name>@<version>`

所以在你的情况下： `npm install express@3.0.0beta1`

# java - 使用 LWJGL 的键盘类将 int 转换为 char？

> ID：11217226
> 
> 赞同：1
> 
> 时间：2012-06-26T23:10:54.560
> 
> 标签：java, opengl, keyboard, lwjgl

所以我想知道，在使用 LWJGL 的 Keyboard 类时，有没有一种方法可以从 int 中获取字符？我在想这样的事情：

```
 char keyF = Keyboard.getChar(Keyboard.KEY_F); 
```

会回来`f`的。

有没有这样的方法？如果是这样，它叫什么？

**注意我已经尝试从 int 转换为 char**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T00:38:02.233

除了自己为您使用的密钥创建一个方法之外，没有其他方法（我认为）可以获得它。例如，如果您只使用 X 和 Y 键，您的方法将如下所示。

```
public char getChar(int code){
    switch (code){
        case Keyboard.KEY_X: return 'x';
        case Keyboard.KEY_Y: return 'y';
    }
} 
```

但是您必须为您使用的每个密钥创建一个案例。

另请参阅[http://legacy.lwjgl.org/javadoc/org/lwjgl/input/Keyboard.html#getKeyName%28int%29](http://legacy.lwjgl.org/javadoc/org/lwjgl/input/Keyboard.html#getKeyName%28int%29) 它说明了如何将 int 转换为 String。您可能可以使用该字符串的第一个字符。请注意，这不适用于 SHIFT、F1 等键，

# mysql - 关于将产品代码链接到 MySQL 数据库中的产品的建议

> ID：11217232
> 
> 赞同：0
> 
> 时间：2012-06-26T23:11:10.693
> 
> 标签：mysql

我需要一些关于如何设置我的表的建议我目前有一个产品表和一个产品代码表。

在代码表中，我有一个 id 和一个标题，例如：

```
1 567902
2 345789
3 345678 
```

此表中可以有很多项。

在我的产品表中，我有通常的产品 ID、标题等，还有一个代码 ID 列，我目前正在为产品需要引用的任何代码存储一个逗号分隔的 ID 列表。

在该列中，我最终可能会得到如下 id：2,5,6,9

我将需要能够搜索产品表以查找特定集合的代码 id 这是我在尝试使用 id IN ($var) 或 FIND_IN_SET 时遇到问题的地方，我被告知有问题重组它我很高兴只是想知道最好的方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T23:17:35.597

听起来你有两个选择。如果这是一对多的关系，那么您需要在表中拥有外键`code`，而不是在`product`表中。

IE

```
codeId code   productId
1      567902 2
2      345789 6
3      345678 9
4      345690 9 
```

另一种选择是拥有另一个包含 productId 和 codeId （都作为外键）的表，这是一个多对多的关系。如果可以将代码分配给多个产品（我假设不是），这就是您应该采取的措施。它看起来像这样：

```
codeId productId
1      2
1      10
2      6
3      9
4      9 
```

我认为第一个选项是您需要的。

# c - C：结构中的结构

> ID：11217237
> 
> 赞同：2
> 
> 时间：2012-06-26T23:11:25.610
> 
> 标签：c, pointers, struct

我的任务是创建一个既有节点又有边的简单图。在我给定且无法修改的头文件中，我有

```
typedef struct Edge_s* Edge;
typedef struct Node_s* Node;
typedef struct Graph_s* Graph; 
```

在我的graph.c中

```
typedef struct{
  size_t w;
  struct Node_s* target;
}*Edge;

typedef struct{
  size_t value;
  Edge* edges;
  size_t s;
}*Node;

typedef struct{
  Node* nodes;
  size_t n;
  Edge* edges;
  size_t e;
}*Graph;

Edge create_edge(Node t, size_t w){
  Edge ret = malloc(sizeof(*ret));
  ret->target = t;
  ret->w = w;
  return ret;
} 
```

这会在编译时发出警告

```
warning: assignment from incompatible pointer type 
```

我在这里有点困惑，我做错了什么，我应该如何解决？该程序几乎可以运行，我遇到了一个奇怪的错误，我认为这可能是由于这个原因。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T23:21:34.843

您的 typedef 定义混淆得很厉害。我很惊讶它甚至可以编译。

您首先将 typedef-name 定义`Edge`为

```
typedef struct Edge_s* Edge; 
```

然后后来将其重新定义为

```
typedef struct{
  size_t w;
  struct Node_s* target;
}*Edge; 
```

这两个定义`Edge`以两种完全不相关的方式定义。（如果第一组声明与同一翻译单元中的第二组声明相遇，我所知道的所有 C 编译器都会立即报告错误。）

我想说你的第二个结构定义应该很简单

```
struct Edge_s {
  size_t w;
  struct Node_s* target;
}; 
```

不要尝试重新定义现有的 typedef-name。这在 C 中简直是非法的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T23:15:12.900

问问自己 ret->target 指向什么类型的对象，它是什么类型的对象？它们是相同类型的对象吗？

# javascript - SignalR 抛出 JavaScript 错误

> ID：11217239
> 
> 赞同：1
> 
> 时间：2012-06-26T23:11:49.870
> 
> 标签：javascript, asp.net-mvc, signalr

我是信号员的新手。我已经启动了一个开箱即用的 MVC 4.0 应用程序，并将我的信号器 JavaScript 连接到索引视图上。当我单击注册或登录按钮时，signalr 会引发 JavaScript 错误。

```
Unhandled exception at line 11, column 10700 in http://localhost:49172/Scripts/jquery.signalR-   0.5.1.min.js

0x800a138f - Microsoft JScript runtime error: Unable to set value of the property 'src': object is null or undefined 
```

任何建议表示赞赏。

编辑：

这是我的代码的范围：

```
$(function () {    
    var blasht = $.connection.blashtHub;    
    blasht.addMessage = function (message) {
        $('#messages').append('<li>' + message + '');
    };     

    $("#blashtIt").click(function () {
        var control = $('#blashtText');
        var control2 = $('#hiddenUserId');
        // Call the chat method on the server  
        blasht.send(control2.val(), control.val());
        control.val('');
    });

    blasht.updateTopTen = function (message) {
        //add code to update the top user's list
    };

    // Start the connection   
    $.connection.hub.start();
}); 
```

正如建议的那样，我放弃了 min ，这是它崩溃的地方，在 frame.sc = src; 线。

```
reconnect: function (connection) {
    var that = this;
    window.setTimeout(function () {
    var frame = connection.frame,
    src = transportLogic.getUrl(connection, that.name, true) + "&frameId=" + connection.frameId;
               connection.log("Upating iframe src to '" + src + "'.");
               frame.src = src;
            }, connection.reconnectDelay);
        }, 
```

SignalR，而不是我，正在调用这个重新连接函数。显然，这就是它与服务器保持连接的方式。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T20:01:46.977

这是当前版本 SignalR 中用于“Forever-Frame”实现的错误，这是 IE9 使用的错误： [https ://github.com/SignalR/SignalR/issues/446](https://github.com/SignalR/SignalR/issues/446)

一种解决方法是强制 SignalR 不使用 Forever-Frame 传输（https://github.com/SignalR/SignalR/wiki/SignalR-JS-Client）。所以改变

```
$.connection.hub.start(); 
```

至

```
$.connection.hub.start({ transport: ['webSockets', 'serverSentEvents', 'longPolling'] }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T23:20:42.180

从错误消息中，并且您没有显示任何代码，我不得不猜测您的代码如下所示：

```
foo.src = someValue; 
```

...在`foo`哪里`null`或`undefined`。这引出了***为什么***是`foo` `null`or的问题`undefined`，但没有更多的上下文，这是不可能的。逐步使用 IE8+“F12 开发人员工具”可能会帮助您查明它。

* * *

*（代码发布后更新）*

我猜测导致错误的行是`frame.src = src;`. 使用一致的缩进重新格式化该代码：

```
reconnect: function (connection) {
    var that = this;
    window.setTimeout(function () {
        var frame = connection.frame,
            src = transportLogic.getUrl(connection, that.name, true) + "&frameId=" + connection.frameId;
        connection.log("Upating iframe src to '" + src + "'.");
        frame.src = src;  // <=== Presumably this is the line failing
    }, connection.reconnectDelay);
}, 
```

似乎在调用延迟函数时，`connection.frame`是`null`或`undefined`。所以你需要找出原因。我要做的第一件事是检查`connection.frame`is`null`或`undefined`when`reconnect`被调用，或者它是否只是在延迟函数运行时才被调用（例如，在此期间有什么清除它，如果是，为什么）。

# javascript - 如何获得 Facebook cookie？(javascript)

> ID：11217243
> 
> 赞同：2
> 
> 时间：2012-06-26T23:12:08.100
> 
> 标签：javascript, facebook, post, cookies, login

我正在使用 javascript 进行 Facebook 登录和发布操作。问题是，如果我在页面 A 上登录 facebook，我无法在页面 B 上发帖，因为我丢失了所有 facebook 信息，我必须重新初始化并重新登录 facebook 才能在其他页面上发帖...我想要一个登录页面，并且在用户可以在网站上导航并从任何页面发布之后。有没有办法通过使用cookie来解决这个问题？还是别的什么？我想找回但饼干，但我仍然不知道如何......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:24:20.040

You'll want to persist the Facebook authentication token somewhere, such as a database. Then, using the javascript API to check if the user is logged in:

```
window.fbAsyncInit = ->
FB.init(appId: '<%= ENV["FACEBOOK_APP_ID"] %>', cookie: true)

$('#sign_in').click (e) ->
  e.preventDefault()
  FB.login (response) ->
    window.location = '/auth/facebook/callback' if response.authResponse 
```

There are several moving parts to a Facebook web app, including client and server authentication. You should check out this Railscast which very thoroughly describes the process:

[http://railscasts.com/episodes/360-facebook-authentication](http://railscasts.com/episodes/360-facebook-authentication)

and you can even pull source code: [http://media.railscasts.com/assets/episodes/sources/360-facebook-authentication.zip](http://media.railscasts.com/assets/episodes/sources/360-facebook-authentication.zip)

# javascript - 初始化的 JQuery 语法错误

> ID：11217245
> 
> 赞同：0
> 
> 时间：2012-06-26T23:12:10.667
> 
> 标签：javascript, jquery

嘿伙计们，我的 var url 行出现语法错误，但我似乎无法弄清楚它是什么或为什么，感谢帮助

```
SW.wmode = {
    init: function() {
    $('iframe').each(function()
        var url = $(this).attr("src")
        $(this).attr("src",url+"?wmode=transparent")
        );
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T23:16:09.000

每行的表达式后面都缺少分号，还有一些大括号。

```
SW.wmode = {
    init: function() {
        $('iframe').each(function() {
            var url = $(this).attr("src");
            $(this).attr("src",url+"?wmode=transparent");
        });
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T23:15:22.550

您缺少`each`. 您的代码应该是：

```
SW.wmode = {
    init: function() {
    $('iframe').each(function(){
        var url = $(this).attr("src")
        $(this).attr("src",url+"?wmode=transparent")
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T23:15:24.177

试试这个：

```
SW.wmode = {
  init: function() {
  $('iframe').each(function() { //you were missing the brackets
      var url = $(this).attr("src")
      $(this).attr("src",url+"?wmode=transparent")
      });
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T23:21:00.790

好吧，你错过了一些花括号......尝试通过像 jshint 或 jslint 这样的 javascript 验证器运行你的代码，以帮助你捕捉这些东西。

大多数合理的文本编辑器都会有一个插件，可以在保存时指出任何验证错误，这样您就不必在浏览器中进行奇怪的故障排除......或者在这里！;)

这是有效的代码：

```
SW.wmode = {
  init: function () {
    $('iframe').each( function() {
      var url = $(this).attr('src');
      $(this).attr('src', url+"?wmode=transparent");
    });
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T23:21:02.083

我稍微重构了你的代码：

```
SW.wmode = {
    init: function () {
        $( 'iframe' ).attr( 'src', function ( i, url ) { 
            return url + '?wmode=transparent';
        });
    }
}; 
```

# c# - 如何在 Service Stack 中跨项目共享服务？

> ID：11217246
> 
> 赞同：1
> 
> 时间：2012-06-26T23:12:11.803
> 
> 标签：c#, .net, servicestack

在 Service Stack 项目之间共享服务的最佳方式是什么？

我目前这样做的方式是从所需的服务中继承。例如：

```
// Grabbing a service from another project
public class ServiceA : AnotherNamespace.InAnotherAssembly.ServiceC
{
}

// Grabbing a service from another project
public class ServiceB : AnotherNamespace.InAnotherAssembly.ServiceD
{
}

// Business as usual
public class ServiceX : RestServiceBase<RequestPocoX>
{
    ....
}

// Business as usual
public class ServiceY : RestServiceBase<RequestPocoY>
{
    ....
} 
```

这允许服务堆栈在引用 AppHost 中的程序集时自动连接所有服务

```
public AppHost() : base("Combined Services", typeof(ServiceA).Assembly)
{
} 
```

这是一种合理的方法，还是有更好的选择？

我提出这个问题的原因是我在“ServiceD”中尝试解决服务时遇到了问题。我认为这可能是因为 IoC 找不到它。

我希望这很清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T06:20:59.587

您应该能够将多个程序集传递给构造函数：

```
public AppHost()
    : base("Combined Services", 
        typeof(ServiceX).Assembly, 
        typeof(ServiceD).Assembly)
{
} 
```

# javascript - 在动画中添加播放/暂停

> ID：11217250
> 
> 赞同：0
> 
> 时间：2012-06-26T23:12:26.640
> 
> 标签：javascript, jquery, animation, raphael

我有一个移动块的动画，但我想添加一个功能，用户可以在中间中断动画，比如暂停，然后从那里开始。

我在 raphael 参考中看到有两种方法[.stop()](http://raphaeljs.com/reference.html#Element.stop)和[.pause()](http://raphaeljs.com/reference.html#Element.pause)

但我不清楚如何实现它。

我可以知道如何在我的情况下使用它。请看[http://jsfiddle.net/kevindivdbyzero/95tmh/](http://jsfiddle.net/kevindivdbyzero/95tmh/)：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T00:28:56.133

当你想暂停它时，你可以使用 .stop() 但保存块移动的数量。然后，当您恢复动画时，减去它必须移动的总量减去它已经移动的量。

因此，如果您将块移动 100 像素并且他们将其暂停在 50 像素，那么当他们恢复它时，这次只有 50 像素的动画。然后他们可以再次将其暂停 20 像素，而您将剩下 30 像素。继续这样做直到动画完成，然后触发块完成动画。您只需要存储更多信息。

# java - 重新实现Java包时的类路径？

> ID：11217254
> 
> 赞同：1
> 
> 时间：2012-06-26T23:13:00.670
> 
> 标签：java, package

我正在努力创建自己的系统 Java 包之一的实现，但是在尝试使用该包时遇到了一些问题，即错误的类被拾取。

例如，假设我的包是：**abcDoStuff**并且现有的 Java 包具有完全相同的名称**abcDoStuff**。

在测试应用程序中使用以下代码，我可以看出系统类仍在使用（位于 /usr/lib/jvm/java-6-openjdk/jre/lib/rt.jar）而不是我自己的：

```
ClassLoader loader = test.class.getClassLoader();
System.out.println(loader.getResource("a.b.c.DoStuff.class"); 
```

我的包已经编译成一个 jar 文件（**package.jar**），我有：

1.  在我的测试文件中导入了类（import abcDoStuff;）
2.  将 package.jar 添加到我的类路径中（同时使用“export CLASSPATH ...”和使用“java -classpath ...”）

一定有什么我忽略了？关于如何取走我的包裹而不是系统包裹的任何想法？

谢谢，
克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T23:14:42.300

除非您将 jar 放在特殊的“认可”目录中，否则您无法替换标准包中的类。还有一些你根本无法更换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T03:36:46.543

谢谢，bmargulies 关于引导类路径的提示！

将我的 .jar 文件添加到引导类路径解决了我的问题。总而言之，我可以通过将包的 .jar 附加到引导类路径来使用自己的 Java 包实现：

```
java -Xbootclasspath/p:<path-to-jar> 
```

# facebook - Facebook 应用程序图片对外发布

> ID：11217259
> 
> 赞同：-1
> 
> 时间：2012-06-26T23:13:32.723
> 
> 标签：facebook, image

登录后是否有代码或此应用上使用的代码将发布在 Facebook 帐户上？

完成这些步骤后，您可以发布创建的应用程序在您的 Facebook 页面上发布图像

示例站点： [http ://www.dragulator.com/](http://www.dragulator.com/)

它与 Facebook 帐户中的 API 密钥有关吗？我希望我清楚我想要实现的目标

真挚地，

吉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T01:20:20.990

要在用户的 Facebook 墙上上传照片，您需要使用他们的 API，称为 Graph。[网上](https://stackoverflow.com/questions/11040848/how-to-use-facebook-php-api-to-upload-a-photo-to-wall-without-file-post-using)有几个安静的例子，我就不赘述了，流程是：

1.  [向应用程序 ( https://developers.facebook.com/docs/authentication/](https://developers.facebook.com/docs/authentication/) )验证用户并获取`access token`.
2.  发起帖子请求以创建帖子（[http://developers.facebook.com/docs/reference/api/post/](http://developers.facebook.com/docs/reference/api/post/)）。

# php - 计算结果集字段中包含的唯一单词总数

> ID：11217261
> 
> 赞同：0
> 
> 时间：2012-06-26T23:13:50.877
> 
> 标签：php, mysql, sql

如何计算出现在结果集字段中的单个单词？

例子

```
编号| 我的领域
1 | 梨 苹果 桃 西瓜
2 | 酸橙葡萄梨西瓜

```

我想得到 6，因为有 6 个独特的词

我不需要快速查询，它只是一个很少执行的统计计算

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T23:31:43.820

您可以在空格上拆分结果，然后将它们添加到数组中，例如

```
foreach($results as $result)
{
    $words = explode(" ", $result['myfield']);

    $array = array();
    foreach($words as $word)
       $array[$word] = true;

}   
    echo count($array); 
```

可能是更好的方法，但这又快又脏

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T23:46:13.220

```
function uniqueWords ($result, $field) {
    $words = array();
    while ($row = mysql_fetch_assoc($result)) { /* or something else if you use PDO/mysqli/some ORM */
        $tmpWords = preg_split('/[\s,]+/', $row[$field]);
        foreach ($tmpWords as $tmpWord) {
            if (!in_array($tmpWord, $words))
                $words[] = $tmpWord;
        }
    }

    return count($words);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T23:31:00.843

我想不出一个纯粹的 SQL 解决方案——MySQL 真的不喜欢将单行拆分为多行。

PHP 版本很简单：

```
$sql="CREATE TEMPORARY TABLE words (word VARCHAR(100) PRIMARY KEY)";
//run this according to your DB access framework

$sql="SELECT myfield FROM mytable";
//run this according to your DB access framework
while (true) {
  //fetch a row into $row according to your DB access framework
  if (!$row) break;
  $words=preg_split('/[\s,]+/',$row['myfield']);
  foreach ($words as $word) {
    //Escape $word according to your DB access framework or use a prepared query
    $sql="INSERT IGNORE INTO words VALUES('$word')";
    //run this according to your DB access framework
  }
}

$sql="SELECT count(*) AS wordcount FROM words";
//run this according to your DB access framework, the result is what you want

$sql="DROP TABLE words";
//run this according to your DB access framework 
```

# java - ant junit 测试的颜色（红色/绿色）控制台输出

> ID：11217275
> 
> 赞同：4
> 
> 时间：2012-06-26T23:15:22.160
> 
> 标签：java, ant, junit

我正在使用终端模拟器，`ant`而*不是*在像 Eclipse 这样的 IDE 中。`JUnit4`

 *是否有获得彩色测试结果的原生方法？谷歌搜索让我找到了[这个 python 脚本](https://github.com/eevans/color-junit)；如果可以的话，我更愿意使用“纯” `ant`。

例如，当我使用 运行测试时`ant runtests`，我想将`FAILED`测试显示为红色，将`PASSED`测试显示为绿色等。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T23:25:16.797

[Ant 手册](http://ant.apache.org/manual/index.html)中描述的[AnsiColorLogger](http://ant.apache.org/manual/listeners.html#AnsiColorLogger)应该完全符合您的要求。*

# ruby-on-rails - 覆盖 ActiveAdmin 的“application.html.erb”

> ID：11217280
> 
> 赞同：2
> 
> 时间：2012-06-26T23:15:48.383
> 
> 标签：ruby-on-rails, activeadmin

> **免责声明**：我是 RoR 的新手，但不是 Ruby（如果有道理的话）。我来自 Zend 背景，甚至更习惯于破解 Wordpress 安装，然后是基于 Drupal 的安装。我非常熟悉 MVC 模型，所以这里什么都没有。

我想使用我的站点布局，而不是我在 Rails 应用程序中实现的预打包布局，而不是使用`ActiveAdmin`. 我已经[看到了对](https://stackoverflow.com/questions/8084183/how-to-give-activeadmin-its-own-application-layout-rails-newbie)接近的东西的引用，但它并没有削减它。我希望使用我的网站`application.html.erb`来提供统一的体验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T01:13:40.650

您提供的链接有什么问题？这听起来像你所追求的。

```
render layout: '/layouts/application' 
```

这对你不起作用？

# php - 使用 PHP/curl 在 XML 中插入查询字符串变量

> ID：11217291
> 
> 赞同：-3
> 
> 时间：2012-06-26T23:18:21.243
> 
> 标签：php, xml, api, http, curl

我正在尝试从我们网站上的表单向我们的 CRM 发送一些信息，并且在将变量插入 XML 时遇到了困难。这是我的代码的简化版本。请注意我试图在 XML 变量中插入 $email 变量的位置......这是行不通的。

```
<?php

$email = $_GET["email"];

$xml = '<xmlrequest>
<details>
    <emailaddress>$email</emailaddress>
    <mailinglist>8</mailinglist>
    <format>html</format>
    <confirmed>no</confirmed>
</details>
</xmlrequest>
';

 $ch = curl_init('http://mysite.com/xml.php');
 curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
 curl_setopt($ch, CURLOPT_POST, 1);
 curl_setopt($ch, CURLOPT_POSTFIELDS, $xml);
 $result = @curl_exec($ch);
 if ($result === false) {
echo "Error performing request";
 } else {
$xml_doc = simplexml_load_string($result);
header( "Location: http://mysite.com/confirmation?email=$email" ) ;

//echo 'Status is ', $xml_doc -> status, '<br/>';
 if ($xml_doc -> status == 'SUCCESS') {
    echo 'Data is ', $xml_doc -> data, '<br/>';

} else {
    echo 'Error is ', $xml_doc -> errormessage, '<br/>';
}
}

?> 
```

如果我只是输入 API 的电子邮件地址值，则可以正常工作。但是，我对如何从 PHP 变量中动态提取它一无所知。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:47:41.873

字符串定义不好用这个

```
$xml = "<xmlrequest>
<details>
    <emailaddress>{$email}</emailaddress>
    <mailinglist>8</mailinglist>
    <format>html</format>
    <confirmed>no</confirmed>
</details>
</xmlrequest>"; 
```

或这个

```
$xml = '<xmlrequest>
<details>
    <emailaddress>' . $email . '</emailaddress>
    <mailinglist>8</mailinglist>
    <format>html</format>
    <confirmed>no</confirmed>
</details>
</xmlrequest>'; 
```

因为这个变量可能是各种字符串，我认为最好`<![CDATA[]]>`在电子邮件周围使用部分。

# javascript - 将我的 javascript 分解为模块，我这样做对吗？

> ID：11217296
> 
> 赞同：2
> 
> 时间：2012-06-26T23:19:16.623
> 
> 标签：javascript, jquery

我正在使用 javascript 模块模式，并且到目前为止：

```
var APP;
if(APP == undefined) {
  APP = {};
}

APP = (function() {
    var userId = -1;
    var privateVar = '';

    var _init = function($userId) {
       userId = $userId;
    };
    var _publicMethod = function($id){
        privateVar = id;
    };
    return {
        init = function($userId) {
             _init($userId);
         },
        publicMethod = function($id) {
           _publicMethod($id);
        }
    };
})(); 
```

然后我有一个通用的 utils 模块：

```
APP.utils = (function(){

})(); 
```

然后每个页面我都计划有一个模块，所以我不会在这些 DOM 元素不存在事件的页面上无缘无故地连接事件（按钮点击等）：

```
APP.homePage = (function(){
     return {

     };
})(); 
```

所以每个模块都会有一个 init() 方法，我将在页面上调用它来运行必须运行的东西（例如连接事件，设置变量，比如 userId 等）：

```
$(document).ready(function() {
   APP.init(<%= user.id %>);
   APP.homePage.init('abc');
}); 
```

所以现在如果文件太大，我也可以将它们分成单独的文件。

1.  如果一个模块需要调用另一个模块怎么办，我想唯一可行的方法是通过公共 api 做到这一点，对吧？例如，如果 homePage 需要 userId，我应该在 homePage#init 方法中传递它吗？

2.  我的编码风格如何，任何不被认为是最佳实践的明显风格？

3.  对此方法有何评论？总的来说好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T23:52:54.500

> 如果一个模块需要调用另一个模块怎么办，我想唯一可行的方法是通过公共 api 做到这一点，对吧？

是的

> 例如，如果 homePage 需要 userId，我应该在 homePage#init 方法中传递它吗？

不，我不会`userId`在所有模块中重复代码，而是在默认模块中为其提供公共 getter。

> 关于编码的任何评论

这段代码

```
var APP;
if(APP == undefined) {
  APP = {};
}

APP = ... 
```

是很没用的。您不需要在这里检查对象是否存在，因为无论如何您都会覆盖它。这也意味着这段代码必须是第一个执行的。如果你想让模块独立于加载顺序，你需要使用类似的东西

```
var APP = (function(a) {
    var private_vars; // ...
    a.init = ...
    a.publicMethod = ... // add them to the object instead of creating new one
    a.getPrivate = function() {
        return private_vars;
    };
    return a;
})(APP || {}); // create one iff not already existing

// other file:
var APP = APP || {};
APP.utils = ... // add object to namespace 
```

编码

```
var _publicMethod = function($id){
    privateVar = id;
}; 
```

看起来有点奇怪。首先，下划线通常表示对象的半私有（公共但不可使用）属性，不应用于变量名。这不是这里的情况，因为该函数将作为`APP`. 如果需要，请在此处使用下划线。其次，这里不需要使用函数表达式。代码在模块的本地范围内，使用函数声明既可以使其在该范围内的任何地方都可用，也可以命名函数。你应该使用

```
function publicMethod($id) {
    privateVar = id;
}
a.publicMethod = publicMethod; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T23:28:07.557

在我看来，模块模式是组织代码的一种非常好的方式。要回答您的问题：

1）是的，您的模块只能访问已在它们返回的对象中公开的其他模块的方法和属性。

2）我认为你的编码风格看起来很不错。我会做出这些改变：

```
APP = (function() {
    var _userId = -1;
    var _privateVar = '';

    var init = function($userId) {
       _userId = $userId;
    };
    var publicMethod = function($id){
        _privateVar = id;
    };
    return {
        init : init,
        publicMethod : _publicMethod
    };
})(); 
```

首先，下划线通常表示“私有”属性或方法。其次，您可以取消返回对象中的额外功能，直接指向您关心的方法或属性。这通常被称为“显示模块模式”，因为即使是公共方法也没有在返回的对象中定义——它们只是被引用。

3）这种方法绝对是封装代码的好方法。您可以从私有方法和特权方法中受益，并且通常会得到更好的 API，因为您只公开需要公开的内容。

做得好。

# knockout.js - 将新项目添加到使用 Knockout.js 的 ko.mapping 插件创建的列表中

> ID：11217298
> 
> 赞同：0
> 
> 时间：2012-06-26T23:19:48.477
> 
> 标签：knockout.js, knockout-mapping-plugin

我正在尝试找出将元素添加到使用 ko.mapping 创建的模型中的列表的规范方法。我[创建了一个 jsFiddle 来修补](http://jsfiddle.net/bmh_ca/Rgj6u/1/)：

javascript 类似于以下内容：

```
var mapping, baseModel, view_model;

mapping = {
    outer: [{
        alpha: '',
        beta: [
            {
            carotine: '',
            blockers: ''}
        ]
    }]
};

baseModel = { // add in functionality
    append_outer: function() {
        this.outer.push({});
    },
    append_beta: function(xyz) {
        this.beta.push({});
    }
};

view_model = ko.mapping.fromJS(mapping, {}, baseModel);

ko.applyBindings(view_model, $("#mapped")[0]);​ 
```

相应的 HTML[在 jsFiddle 上](http://jsfiddle.net/bmh_ca/Rgj6u/1/)。

当我使用时，`append_outer`我希望将一个新元素添加到 view_model 中，该元素与第一个元素基本相同，都带有 observables。当我使用时，`append_beta`我希望 beta 有一个新元素`[carotine: ko.observable(), blockers: ko.observable]`。我还没有看到一个明显的方法来做到这一点 - 但我希望它是一个非常常见的用例。

出于显而易见的原因，示例代码没有达到我想要的效果！当然，这正是我正在修补的东西，希望能找到一些明显的东西，例如`ko.mappingCreate`或类似的东西。唉，没有这样的运气。

可能会提到数据模型是动态的——尽管列表中的项目总是具有与其对等节点相同的数据表示。有人可能会说，用于创建视图模型 ( `mapping`) 的数据是一个原型。

我将不胜感激任何想法和方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T01:29:49.157

并不是说我会这样做……而是为将映射的各个方面作为模板的类型创建一个对象。

[http://jsfiddle.net/keith_nicholas/EEE6J/](http://jsfiddle.net/keith_nicholas/EEE6J/)

一般来说，我只是用对象定义结构，然后将 json 用于数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:54:43.693

根据基思的建议，我做了以下事情：

```
var mapping, baseModel, view_model;

mapping = {
    outer: [{
        alpha: '',
        beta: [
            {
            carotine: '',
            blockers: '',
            skittles: ''}
        ]}
    ]
};

baseModel = function(mapping) { // add in functionality
    var self = this;

    this._vm_prototype = mapping;

    console.log("Prototype: " + ko.mapping.toJSON(this._vm_prototype));

    self.append = function(target, proto_getter) {
        console.log("pg: " + proto_getter);
        var prototype = proto_getter(self._vm_prototype);

        console.log("Prototype: " + JSON.stringify(prototype));
        console.log("Target: " + ko.mapping.toJSON(target));

        this[target].push(ko.mapping.fromJS(prototype));
    };
};

view_model = ko.mapping.fromJS(mapping, {}, new baseModel(mapping));

ko.applyBindings(view_model, $("#mapped")[0]);​ 
```

不幸的是，这需要在 HTML 方面进行一些修改，例如添加一个新`beta`的必须确定它存在于原型中的哪个位置，即

```
<button data-bind='click: $root.append.bind($data, "beta", 
        function (proto) { return proto.outer[0].beta[0]; })'>
  Add another beta
</button> 
```

并且对于一个`outer`

```
<button data-bind='click: append.bind($data, "outer", 
        function (proto) { return proto.outer[0]; })'>
 Add another outer
</button> 
```

如果只是传递函数来代替函数，则该`append`函数可以变得更简洁`outer[0].beta[0]`，但随后必须解析或`eval`this。

从 jsFiddle [A](http://jsfiddle.net/bmh_ca/Rgj6u/3/)和[B](http://jsfiddle.net/bmh_ca/Rgj6u/5/)可以看出，唯一改变的是`mapping`，但两者的功能都按预期工作。

同样，我试图避免重复代码，但这很难看。我很想知道如何清理这个！

# c++ - 使用 Boost 序列化库序列化 CvKNearest 类

> ID：11217301
> 
> 赞同：0
> 
> 时间：2012-06-26T23:20:27.467
> 
> 标签：c++, boost, opencv, boost-serialization

有没有一种简单的方法可以使用 C++ API 在 OpenCV 中保存 KNN 分类器？

在将 CvKNearest 类包装在另一个类中之后，我尝试保存[此处描述的 KNN 分类器。](http://www.functionx.com/cpp/articles/serialization.htm)

它成功地保存到磁盘，但是当我从中读取时，运行*预测*方法给了我**分段错误**（核心转储）错误。

我的包装类如下：

```
class KNNWrapper
{
    CvKNearest knn;
    bool train(Mat& traindata, Mat& trainclasses)
    {

    }
    void test(Mat& testdata, Mat& testclasses)
    {

    }
} 
```

我听说 Boost 序列化库更加健壮和安全。谁能指出我可以使用 Boost 库完成此任务的适当资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T05:46:51.903

@tisch 是完全正确的，我想纠正自己。CvKNearest不会覆盖[CVStatModel](http://docs.opencv.org/modules/ml/doc/k_nearest_neighbors.html)的[加载](http://docs.opencv.org/modules/ml/doc/statistical_models.html#cvstatmodel-load)和[保存](http://docs.opencv.org/modules/ml/doc/statistical_models.html#cvstatmodel-save)功能[。](http://docs.opencv.org/modules/ml/doc/statistical_models.html#cvstatmodel)

但由于[CvKNearest](http://docs.opencv.org/modules/ml/doc/k_nearest_neighbors.html)不计算模型，因此没有内部状态可存储。当然，你要存储`cv::Mat`你通过的训练和测试数据。您可以为此使用[FileStorage](http://docs.opencv.org/modules/core/doc/xml_yaml_persistence.html#FileStorage%3a%3aFileStorage%28%29)类，在以下位置给出了很好的描述和教程：

*   [http://docs.opencv.org/modules/core/doc/xml_yaml_persistence.html](http://docs.opencv.org/modules/core/doc/xml_yaml_persistence.html)

如果您想提供与 OpenCV 中其他统计模型相同的 API（这很有意义），我想将[CvKNearest](http://docs.opencv.org/modules/ml/doc/k_nearest_neighbors.html)子类化并提供保存和加载功能，分别序列化训练/测试数据并使用[FileStorage](http://docs.opencv.org/modules/core/doc/xml_yaml_persistence.html#FileStorage%3a%3aFileStorage%28%29)反序列化它.

# sql - 使用 TOAD 从 Oracle 创建更新脚本

> ID：11217302
> 
> 赞同：4
> 
> 时间：2012-06-26T23:20:36.827
> 
> 标签：sql, oracle, toad

在 Oracle 中，使用 TOAD，我们能够从表中创建插入脚本。

但是，我需要根据每行的值创建一个 UPDATE 脚本

```
where the CLIENTID is 'blah blah' 
```

最初，我所做的是创建一个包含所有必要数据的 Excel 电子表格，对于每一行，我粘贴了一个

```
UPDATE TABLE BLAH BLAH SET COLUMN1 = "xxx", COLUMN2 = '' where CLIENT_ID = "123' 
```

..但是我在将电子表格导出到基于文本的 DOS 文件并将其转换为`.sql`as 以进行编辑时遇到了一些困难，但它是混乱且不可预测的。

有没有人有更好的想法我可以实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-01T01:33:11.483

我通常会这样做：

```
SELECT 'UPDATE <TABLE_NAME> SET status =''' || status || '''  WHERE id =' || ID ||';'
FROM <TABLE_NAME>
WHERE <condition> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T23:28:45.247

I haven't seen any feature in Toad that helps write update queries in this fashion. But loading data directly is something that Toad makes very easy.

May be you could do this.

```
create table tmp_excel_data
( column1 varchar2(100),
  column2 varchar2(100),
  client_id varchar2(100)
); 
```

Use toad to directly load data into this table. The update is simple from this point.

```
update CLIENT_DATA tgt
  tgt.column1 = (select column1
                  from tmp_excel_data src
                  where tgt.client_id = src.client_id);

--dont forget to commit. 
```

This will also let you cleanse your data (removing dups..for example) if needed.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-12T16:38:27.167

使用按钮。它丑陋但有效。

[![在此处输入图像描述](../Images/8f7e8888a6ebb1b57a72b4a53af97cfb.png)](https://i.stack.imgur.com/fBjwk.png)

# javascript - 如何更新 indexedDB 中的数据？

> ID：11217309
> 
> 赞同：16
> 
> 时间：2012-06-26T23:21:05.673
> 
> 标签：javascript, html, indexeddb

我试图从[W3C](http://www.w3.org/TR/IndexedDB/)获取一些关于更新 indexedDB 数据库中 objectStore 项的信息，但没有那么成功。我在[这里](http://dominoc925.blogspot.ro/2012/06/use-html5-indexeddb-cursors-to-update.html)找到了一种方法，但它并不适合我。

我的实现是这样的

```
DBM.activitati.edit = function(id, obj, callback){
    var transaction = DBM.db.transaction(["activitati"], IDBTransaction.READ_WRITE);
    var objectStore = transaction.objectStore("activitati");
    var keyRange = IDBKeyRange.only(id);

    objCursor = objectStore.openCursor(keyRange);
    objCursor.onsuccess = function(e){
        var cursor = e.target.result;
        console.log(obj);
        var request = cursor.update(obj);
        request.onsuccess = function(){
            callback();
        }
        request.onerror = function(e){
            conosole.log("DBM.activitati.edit -> error " + e);
        }

    }   
    objCursor.onerror = function(e){
        conosole.log("DBM.activitati.edit -> error " + e);
    }                   
} 
```

我有所有 DBM.activitati.(add | remove | getAll | getById | getByIndex) 方法工作，但我无法解决这个问题。

如果你知道我可以如何管理它，请告诉我！

谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-26T23:37:13.227

查看这个[jsfiddle](http://jsfiddle.net/taylorbuley/TLTfn/)以获取有关如何更新 IDB 记录的一些示例。我与另一个 StackOverflower 一起工作——这是一个相当不错的 IndexedDB 独立示例，它使用索引并进行更新。

您似乎正在寻找的方法是[`put`](http://www.w3.org/TR/IndexedDB/#widl-IDBObjectStore-put-IDBRequest-any-value-any-key)，如果有唯一索引，它将插入或更新记录。在该示例小提琴中，它是这样使用的：

```
 phodaDB.indexedDB.addUser = function(userObject){
        //console.log('adding entry: '+entryTxt);
        var db = phodaDB.indexedDB.db;
        var trans = db.transaction(["userData"],IDBTransaction.READ_WRITE);
        var store = trans.objectStore("userData");
        var request = store.put(userObject);

        request.onsuccess = function(e){
            phodaDB.indexedDB.getAllEntries();
        };
        request.onerror = function(e){
            console.log('Error adding: '+e);
        };
    }; 
```

对于它的价值，你有一些可能的语法错误，将“console”拼错`console.log`为“conosole”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-24T09:40:27.340

答案有点晚，但可能对其他人有帮助。我仍然偶然发现 - 正如我猜想的那样 - 相同的问题，但它非常简单：

如果您想插入或更新您使用的记录`objectStore.put(object)` [（帮助）](https://developer.mozilla.org/en-US/docs/Web/API/IDBObjectStore/put "（？）")
如果您只想插入您使用的记录`objectStore.add(object)` [（帮助）](https://developer.mozilla.org/en-US/docs/Web/API/IDBObjectStore/add "帮助")

因此，如果您使用`add(object)`，并且记录键仍然存在于 DB 中，它不会被覆盖并触发错误 0“ConstraintError：对象存储中已存在键”。

如果使用`put(object)`，它将被覆盖。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-09T08:54:30.980

这是用户对象的更新信息的情况

```
var transaction = db.transaction(["tab_user"], "readwrite");
var store = transaction.objectStore("tab_user");

var req = store.openCursor();
req.onerror = function(event) {
  console.log("case if have an error");
};

req.onsuccess = function(event) {
    var cursor = event.target.result;
    if(cursor){
        if(cursor.value.idUser == users.idUser){//we find by id an user we want to update
            var user = {};
            user.idUser = users.idUser ;
            user.nom = users.nom ;

            var res = cursor.update(user);
            res.onsuccess = function(e){
                console.log("update success!!");
            }
            res.onerror = function(e){
                console.log("update failed!!");
            }
        }
        cursor.continue();
    }
    else{
        console.log("fin mise a jour");
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-09T22:33:50.370

我迟到了几年，但认为加上我的两分钱会很好。

首先，如果您不想处理复杂的 IndexedDB API ，请查看[BakedGoods 。](https://github.com/klawson88/Baked-Goods)

它是一个建立统一接口的库，可用于在所有本地和一些非本地客户端存储设施中进行存储操作。它还保持了每个人为用户提供的灵活性和选项。哦，它确实由您维护 :) 。

有了它，在对象存储中放置一个或多个数据项可以很简单：

```
bakedGoods.set({
    data: [{key: "key1", value: "value1"}, {key: "key2", value: "value2"}),
    storageTypes: ["indexedDB"],
    complete: function(byStorageTypeResultDataObj, byStorageTypeErrorObj){}
}); 
```

* * *

现在回答实际问题...

让我们首先汇总分布在现有答案中的有价值的信息：

*   `IDBObjectStore.put()`向商店添加新记录，或更新现有记录

*   `IDBObjectStore.add()`将新记录添加到商店

*   `IDBCursor.update()`更新光标当前位置的记录

可以看出，OP 正在使用适当的方法来更新记录。然而，他/她的代码中有几处与方法无关的东西是不正确的（至少就今天的 API 而言）。我在下面识别并更正了它们：

```
var cursorRequest = objectStore.openCursor(keyRange); //Correctly define result as request

cursorRequest.onsuccess = function(e){                //Correctly set onsuccess for request
    var objCursor = cursorRequest.result;             //Get cursor from request
    var obj = objCursor.value;                        //Get value from existing cursor ref
    console.log(obj);
    var request = objCursor.update(obj);             
    request.onsuccess = function(){
        callback();
    }
    request.onerror = function(e){
        console.log("DBM.activitati.edit -> error " + e); //Use "console" to log :)
    }

}   
cursorRequest.onerror = function(e){                  //Correctly set onerror for request
    console.log("DBM.activitati.edit -> error " + e); //Use "console" to log :)
} 
```

# objective-c - -setNeedsDisplay 没有被调用来刷新 drawRect

> ID：11217310
> 
> 赞同：1
> 
> 时间：2012-06-26T23:21:11.533
> 
> 标签：objective-c, ios, uiview, uikit

我有两种从内部调用的方法`-drawRect:`

```
- (void)drawRect:(CGRect)rect  {

    if(drawScheduleFlag) {
        [self drawSchedule];
        drawScheduleFlag = false;
    }
    else
        [self drawGrid];
} 
```

`-drawGrid`在初始化时调用。另一个方法 ( `-drawSchedule`) 是从此代码调用的，它位于主线程上：

```
- (void) calendarTouched: (CFGregorianDate) selectedDate  {

//    NSLog(@"calendarTouched - currentSelectDate: %d/%d/%d", selectedDate.month, selectedDate.day, selectedDate.year);
//    NSLog(@"Main thread? %d", [NSThread isMainThread]);

    //  get data from d/b for this date (date, staff name, cust name, time, length, services required)
    //------    stub    -------
    scheduledDate.year = 2012;
    scheduledDate.month = 6;
    scheduledDate.day = 20;
    staffName = @"Saori";
    custName = @"Brian";
    startTime.hour = 11;
    duration = 2;
    servicesReqd = @"Nails";

    drawScheduleFlag = true;
    [self setNeedsDisplay];

    return;
} 
```

我知道代码正在执行，但没有任何事情来绘制时间表。为什么`-[self setNeedsDisplay]`不导致`-drawRect`被调用？

更新：我已经休息了，所以我很肯定它没有被调用。原网格绘制一次；当用户点击日历日期时，会调用 -calendarTouched 并完全执行。drawScheduleFlag 设置为 true，并且 -[self setNeedsDisplay] 被调用，但 -drawRect 没有。似乎 UIView 没有失效（应该是 -setNeedsDisplay ），因此 -drawRect 没有被调用。

更新#2：我有一个用于 UIViewController 的 .xib，其中包含两 (2) 个 UIView。第一个 UIView 占据了 iPad 屏幕的 1/3，第二个 UIView 占据了屏幕底部的 2/3。每个 UIView 都有自己的特定类；顶部 UIView 显示日历并且工作正常，捕捉触摸并更改所选日期。

底部的 UIView 应该显示在顶部 UIView 中选择的日期的时间表。这就是问题所在。由于顶部 UIView 正在工作，我将放置底部 UIView 类的代码。它基本上在第一次调用 -drawRect 时绘制计划网格。一旦用户选择了一天，它应该使 UIView 无效以在网格上绘制实际的时间表。

这是 Schedule.h 的代码：http: [//pastebin.com/NQpj0i07](http://pastebin.com/NQpj0i07)这是 Schedule.m 的代码：http: [//pastebin.com/YBbE8y0T](http://pastebin.com/YBbE8y0T) 这是控制器的代码： [http://pastebin。 com/nDqBCivj](http://pastebin.com/nDqBCivj) 请注意，从太平洋标准时间 6 月 28 日下午 5:38 起，两个 pastebin 都将在 24 小时内到期

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T01:04:19.497

重复我在评论中所说的话，您遇到的问题是您的`UIView`子类对象在`drawRect`调用执行之前被释放，这意味着持有对该对象的引用的任何东西，在这种情况下是您的控制器，在您之前释放它意思是，使用 ARC 有时会出现小问题。

在包含此视图的控制器代码中，您应该声明如下内容：

```
@property (weak, nonatomic) IBOutlet Schedule *scheduleView; 
```

并合成：

```
@synthesize scheduleView = _scheduleView; 
```

在控制器的`dealloc`方法中：

```
self.scheduleView = nil; 
```

如果您使用的是故事板，而您似乎没有使用它，因为您为此制作了一个 .xib 文件，您应该正确连接它。如果不是简单地实例化它并分配它。

扩展我之前所说的内容，我不确定您要做什么，但看看您的代码，您正在创建视图，当通知被调用时，它会被释放，因为没有人是持有对它的引用。通过执行我所说的操作并单击从控制器拖动到界面构建器中的视图并将其连接起来，它将保留对它的引用，并且您只会创建 1 个 Schedule 对象。

之后，您必须修改代码以使用此 Schedule 实例：

```
- (void) testNotification:(NSNotification *) notification  {

    //  was the calendar tapped?
    if ([[notification name] isEqualToString:@"calendarUpdated"])  {

        NSDictionary *passedData = notification.userInfo;  //  get passed data
        CFGregorianDate currentSelectDate;
        NSData *data = [passedData objectForKey:@"currentSelectDate"];
        [data getBytes:&currentSelectDate length:sizeof(CFGregorianDate)];

        [self.scheduleView calendarTouched:currentSelectDate];
    }

    return;

} 
```

如果您不使用界面生成器来设置所有内容，那么您拥有的另一个选项是您的以下内容`viewDidLoad`：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.scheduleView = [[Schedule alloc] init];
    [self.view addSubView:self.scheduleView]; // Probably some extra code for positioning it where you want

    // notify me when calendar has been tapped and CFGregorianDate has been updated
    [[NSNotificationCenter defaultCenter] removeObserver:self];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(testNotification:) name:@"calendarUpdated" object:nil ];

} 
```

最后一点，考虑到您是 iOS 开发的新手（就像我们一样），您可以去 iTunes 并在 iTunes U 上查找斯坦福大学的 iPad 和 iPhone 开发课程 (CS193P)，它是完全免费的，它会教您大部分内容在 iOS 中进行开发需要了解的内容。

# html - localstorage 是这个 webapp 的正确选择吗？

> ID：11217313
> 
> 赞同：0
> 
> 时间：2012-06-26T23:22:17.780
> 
> 标签：html, local-storage, offlineapps

我有兴趣构建一个小型离线 web 应用程序，我正在寻找一些建议。这是我想要它做的基础知识

*   创建最初只有名称和文本字段的报告
*   列出、编辑和删除这些笔记
*   理想情况下，我想稍后在报告中添加更多字段

localstorage 是在本地存储此类数据的好选择吗？如果是这样，任何人都可以指导我在javascript中与它交互的命令的完整列表吗？例如 setItem、getItem 等。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:25:12.693

localstorage will work just fine for this, but don't think of it as a robust solution.. It's just a basic key/value store and won't be very performant with thousands of complex things going on.

Check out the excellent Dive into HTML5 guide on localstorage: [http://diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T23:25:20.563

[Link to the localstorage apis](https://developer.mozilla.org/en/DOM/Storage)

Yes localstorage would be perfect for you application. It would allow your application to have no need to connect to a server at all. Keep in mind that local storage does have maximums on the amount of data that can be stored.

EDIT: Using `JSON.stringify()` on can convert complex javascript objects to json which can be storage and retrieved with ease inside of local storage.

# c# - c# ToList() 和 ToString()

> ID：11217316
> 
> 赞同：1
> 
> 时间：2012-06-26T23:22:52.143
> 
> 标签：c#

我正在调试一个`.SingleOrDefault()`抛出异常“子查询返回多个元素”的查询。

```
SomeValue = (from...
             where ....
             select ...).SingleOrDefault() 
```

我想看看它为哪个值生成了这个错误，所以我把它改成了：

```
SomeValue = ((from...
              where ....
              select ...).ToList()).ToString() 
```

问题是它没有返回列表的字符串，而是返回`"System.Collections.Generic.List1[System.String]"`

如何将列表变为以逗号分隔的元素字符串？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T23:24:24.157

```
SomeValue = string.Join( ",", (from... where... select...) ) 
```

# mongodb - List of month & years that exist in a date column

> ID：11217318
> 
> 赞同：0
> 
> 时间：2012-06-26T23:23:15.720
> 
> 标签：mongodb, mongoose

I have a collection "posts" in Mongo that has a date column, lets call it "posted_on" and I would like to get a list of the month/year combos that exist in this column.

If this was an SQL do I would do something like

```
SELECT MONTH(posted_on), YEAR(posted_on), count(*) 
FROM posts GROUP BY YEAR(posted_on), MONTH(posted_on) 
```

which would get me a list of years and months.

Preferably I would like a query in mongoose, however I can convert a mongo query easy enough.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T07:31:31.743

通过使用[Mongo Group](http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Group)功能，您可以执行相同的查询。示例如下。

```
db.posts.group(
{
    keyf: function(doc) {
        return {
            month : doc.posted_on.getMonth(), 
            year : doc.posted_on.getFullYear()
        };
    },
    reduce: function(obj,prev) {
        prev.count++
    },
    initial: {count:0}
}); 
```

# javascript - Render all Javascript code in one section using nested layouts

> ID：11217320
> 
> 赞同：7
> 
> 时间：2012-06-26T23:23:19.480
> 
> 标签：javascript, asp.net-mvc-3, html, razor

My code compiles and runs without errors; however, it doesn't render as I expected.

**The Theory:**

I want to use multiple layout pages.

The "base" layout should only include the style and javascript files that are being used by the solution.

The other layout should have the html content or wrappers. This layout seems superfluous currently, but my superior assures me it will lead to future greatness. Such as having multiple headers or the ability to not have headers or footers on certain pages. The main things is to have multiple ContentLayouts but one common BaseLayout

**The Code:**

_BaseLayout

```
<html>
   <head>
       <link href="@Url.Content("~/Content/css/main.css")" rel="stylesheet" type="text/css" />
       <script type="text/javascript" src="@Url.Content("~/Scripts/common.js")"></script>
       @RenderSection("JavaScript", false)
       @RenderSection("Css", false)
   </head>
   <body>
       @RenderBody()
   </body>
</html> 
```

_ContentLayout

```
 @{
    Layout = "~/Views/Shared/_BaseLayout.cshtml";
 }

 @RenderSection("JavaScript", false)
 @RenderSection("Css", false)

 <div class="page">
     <section class="wrapper">
       @RenderBody()
     </section>
 </div> 
```

View.cshtml

```
 @{
     Layout = "~/Views/Shared/_ContentLayout.cshtml";
 }

 @section JavaScript
 {
      <script type="text/javascript">
    (function ($) {
        $(function () {
            //do stuff;
        });
    } (jQuery));
</script>
 }

 <div>
      //html content
 </div> 
```

Like I stated earlier this works. The problem is when I view the page source the script from the view is rendered in the _ContentLayout and thus falls outside of the designated script area. Can I "kick" the script code to the next layout? This would allow all the script code to be in the same area.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T04:29:03.640

你应该发展关于`@RenderSection()`行为的观点。

每个都`@RenderSection()`呈现它的后代`@section SectionName { }`。因此，您需要按以下顺序更改视图：

**_BaseLayout.cshtml** - 保持原样。

**_ContentLayout.cshtml**：

```
@{Layout = "~/Views/Shared/_BaseLayout.cshtml";}

@section JavaScript {
    @RenderSection("JavaScriptToHead", false)
}

@section Css {
    @RenderSection("CssToHead", false)
}

<div class="page">
    <section class="wrapper">
        @RenderBody()
    </section> 
```

最后**是 View.cshtml**：

```
@{Layout = "~/Views/Shared/_ContentLayout.cshtml";}

@section JavaScriptToHead {
    //JS stuff
}

@section CssToHead {
   //Css stuff
}

<div>
    //html content
</div> 
```

# c# - Detecting fingers in Kinect for windows sdk 1.5 c#

> ID：11217323
> 
> 赞同：5
> 
> 时间：2012-06-26T23:23:27.477
> 
> 标签：c#, wpf, kinect

I'm now detecting all the skeleton in a wpf application, I want to know how to detect the fingers to appear with the skeleton? I'm using microsoft Kinect for windows sdk ver 1.5

Many thanks

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T23:29:15.087

不幸的是，Kinect 不够灵敏，无法识别手指，因此库不会将其作为骨架的一部分提供。也许传闻将与 Xbox 720 一起推出的 Kinect 2.0 将能够提供这种级别的细节。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T08:05:30.513

[Candescent NUI](http://candescentnui.codeplex.com/)可能正是您想要的。然而，正如 OpenUserX03 所说，Kinect 并不适合这项任务。也许你应该看看即将推出的[LEAP](http://leapmotion.com/)技术，它专门用于手指检测。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T05:18:14.187

Kinect 上的摄像头并不意味着能够对手部进行关节跟踪到那种细节水平。跟踪单个手指是可能的，但不会非常可靠。要在骨架中表示玩家手，您可以检查玩家手是打开还是关闭。查看手是张开还是闭合的一种可能方法是在手周围的区域进行像素检查。这样，通过一些调整，您可以计算出该区域中有多少是手（使用深度和颜色流），有多少不是。例如：如果该区域的 40% 与手关节深度相同，则手握拳。如果该区域的 70% 与手关节深度相同，则手是张开的。然后，您可以使用肘关节和腕关节的角度来表示在骨架上以该角度闭合或张开的手。

# php - how to set seperator prefrence header for mac while creating csv with php

> ID：11217332
> 
> 赞同：0
> 
> 时间：2012-06-26T23:24:40.587
> 
> 标签：php, csv

I am generating a csv file with php.

It works fine in windows, linux. But in mac (excel) it comes in a messed way.

All data comes in one column and does not get seperated by commas.

I was wondering if there is any way to pass headers for mac excel so it identifies the seperator (comma) by default.

Here are the header that I been using.

```
header("Content-type: application/vnd.ms-excel");
//header('Content-type: application/ms-excel');
//header("Content-Type: text/x-csv");
header("Content-disposition: csv" . date("Y-m-d") . ".xls");
header("Content-disposition: filename=".$filename.".xls");
header("Content-Type: application/force-download");
header("Content-Transfer-Encoding: binary");
header("Content-Length: ".strlen($csv_output));
header("Pragma: no-cache");
header("Expires: 0"); 
```

Thanks Abhi

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T01:16:35.687

使用时，

```
header("Content-type: application/vnd.ms-excel");
header("Content-disposition: csv" . date("Y-m-d") . ".xls");
header("Content-disposition: filename=".$filename.".xls"); 
```

您正在创建一个 Excel 文件并在其中插入 CSV 数据。您可以尝试将其用作标题：

```
header("Content-type: application/csv");
header("Content-Disposition: attachment; filename=file.csv"); 
```

# javascript - Retrieve size of background image after scaling with jQuery?

> ID：11217333
> 
> 赞同：2
> 
> 时间：2012-06-26T23:24:44.783
> 
> 标签：javascript, jquery

I have the following simple code to get me the background-image dimensions, but it grabs the size of the original image, not the scaled one I have in my div. I want to get pixel dimensions after scaling, is there any way to do that?

```
var actualImage = new Image();
actualImage.src = $("#chBox").css('background-image').replace(/"/g, "").replace(/url\(|\)$/ig, "");
actualImage.onload = function () {
    width = this.width;
    height = this.height;
} 
```

EDIT:

The CSS to scale the background-image:

```
#chBox {
height:100%;
width:100%;
background-repeat:no-repeat;

background-image: url(../content/frog/1.jpg);
background-position: center;
    -webkit-background-size: contain; /*for webKit*/
    -moz-background-size: contain; /*Mozilla*/
    -o-background-size: contain; /*opera*/
    background-size: contain; /*generic*/

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:42:35.433

您需要获取所需图像的`$('#someImage').css('width')`和`$('#someImage').css('height')`，而不是获取实际图像的尺寸。

编辑：

```
#someImage img {
    width: 100px;
    height: auto;
}
<td id="image">
    <img id="someImage" src="image.jpg">
    <script type="text/javascript">
        alert($('#someImage').css('width'));
    </script>
</td> 
```

上面的代码会提醒“100px”。当然，如果您使用一些 jQuery 来更改图像的宽度，例如`$('#someImage').css('width','300px')`，代码将更新并警告“300px”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T23:29:55.833

代码正在做你告诉它做的事情。我不相信有办法抓住“缩放”的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T19:56:19.887

好的，感谢大家的回复，但我想到了一些解决方法。我希望在以后的 jQuery 版本中看到这个功能（抓取缩放的宽度、高度），但通过一些数学计算，它还不错。本质上，

```
 // create a fake image and load the original from background-img src
        var actualImage = new Image();
        actualImage.src = $("#chBox").css('background-image').replace(/"/g,"").replace(/url\(|\)$/ig, "");
        actualImage.onload = function() {
            // get original values
            var origWidth = this.width;
            var origHeight = this.height;
            var width = 0;
            var height = 0;
            // need to bump it 140px as it seems the div's left comes from the super-container
            var bump = 140;
            // if the image is fat rather than tall,
            if(origWidth > origHeight){
                // set width for description to width of bg-img container
                var width = $("#chBox").width();
                // set left
                $(".description").css("left", bump);
                // calculate height and set bottom
                height = (width * origHeight) / origWidth;
                var blankSpace = $("#chBox").height() - height;
                $(".description").css("bottom", (blankSpace/2));

            } else {
                // if image is tall,
                var height = $("#chBox").height();
                // calculate width
                width = (height * origWidth) / origHeight;
                // set left
                var setLeft = $("#chBox").width();
                $(".description").css("left", (setLeft/2) - 58);    //wtf, 58?
                // set bottom to 0
                $(".description").css("bottom", 0)
            }

            $(".description").width(width);
        } 
```

那里有很多特定于站点的东西，但基本上我运行了一些代数来找到图像的比例。如果它是胖图像而不是高图像，则容器的宽度是缩放后的宽度。高度等于缩放宽度 * 原始图像高度除以原始图像宽度。出于某种原因（如果有人可以提供帮助，我将不胜感激） margin: 0 auto; 当您更改 div 宽度时，我的 CSS 的属性不起作用，因此我必须手动将其居中。

# mysql - 在 play 1.2+ 中使用存储过程的工作示例

> ID：11217335
> 
> 赞同：0
> 
> 时间：2012-06-26T23:25:03.093
> 
> 标签：mysql, playframework

我在使用带有 Play 框架 1.2.3 的 MySQL 5+ 中的存储过程时遇到问题。我猜我的方法不正确 - 我正在使用可调用语句并将参数传递给存储过程。该过程不应该返回任何输出变量（仅用于插入）。除非切换到任何 ORM 选项，否则我如何才能最好地解决此设置。

```
// con is connection to mysql
CallableStatement cs = this.con.prepareCall("{call sp_InsertTest(?,?,?,?,?,?)}");
cs.setString(1, user.value1);
cs.setString(2, user.value2);
cs.setString(3, user.value3);
cs.setString(4, user.value4);
cs.setString(5, user.value5);
cs.setString(6, user.value6);

//all values are strings 
```

当我在可调用的 stmt 上运行 executeUpdate 时，它​​会从上面提到的第一行抛出一个错误（我从下面的日志中删除了该行，从它被抛出的地方）：

```
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at play.mvc.ActionInvoker.invokeWithContinuation(ActionInvoker.java:546)
at play.mvc.ActionInvoker.invoke(ActionInvoker.java:500)
at play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:476)
at play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:471)
at play.mvc.ActionInvoker.invoke(ActionInvoker.java:159)
at play.server.PlayHandler$NettyInvocation.execute(PlayHandler.java:220)
at play.Invoker$Invocation.run(Invoker.java:265)
at play.server.PlayHandler$NettyInvocation.run(PlayHandler.java:200)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:98)
at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:206)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

欢迎大家提出意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:03:50.380

您的堆栈跟踪不完整，因此很难确切地看到您有什么错误。

就我而言，存储过程运行良好。您必须首先获得与

```
Connection conn = DB.getConnection(); 
```

然后你就可以打电话了。我没有在我的电话中加上括号

```
con.prepareCall("call sp_InsertTest(?,?,?,?,?,?)"); 
```

# ruby - Calling scp from net:ssh

> ID：11217343
> 
> 赞同：1
> 
> 时间：2012-06-26T23:25:29.283
> 
> 标签：ruby, net-ssh

Here's the setup:

I have server A, which is running my ruby scripts and servers B & C. I need to be able to transfer files from B to C.

I've experimented with using Net:SCP, but I haven't found a way to set up a transfer between the two remote servers. The best I've been able to do was go from B to A and then from A to C.

Based on some example code I've seen elsewhere, I'm trying to ssh onto B and call scp from that server:

```
Net::SSH.start(host, user, :password => pword) do |ssh| 
  ssh.exec! "scp /filename user@serverC:/filename" do |channel, stream, data|
    channel.send_data "#{pword}\n"
  end
end 
```

This is not working for me. Is this even possible?

# javascript - 在不改变 X 的情况下微调可拖动 SVG 形状的位置？

> ID：11217345
> 
> 赞同：1
> 
> 时间：2012-06-26T23:25:49.540
> 
> 标签：javascript, css, svg, draggable

我的项目的当前状态可以[**在 jsFiddle 上看到**](http://jsfiddle.net/mOrloff/ucnyz/9/)。
我想稍微按摩一下滑块的行为。
我正在寻找一种方法来轻推它们，以便 X 值从每个滑块的中心注册。

如您所见，滑块很好地设置了输入的值，但它们看起来/感觉有点不自然，因为 X 值是根据前缘而不是“中心质量”。
将滑块尽可能向左移动*感觉*就像它停止了。将它尽可能向右移动感觉就像它超出了它的边界。

我敢肯定我可以想象出一些非常讨厌的黑客，但我更喜欢更专业的方法:)
我的想法首先是 CSS（我有点希望只是稍微推动一下），但到目前为止还没有运气。
我现在的猜测是它会归结为一个 JS 解决方案。

有什么想法/想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T05:25:13.950

您可以在不通过转换更改 x 值的情况下调整位置。您只需要添加`transform`属性...

```
 <rect id="rect_slider_knob"
         class="slidable"
         width="4%"
         height="24%" 
         y="38%"
         rx="2%"
         ry="3%"
         stroke="#666" 
         transform="translate(-6, 0)"
    /> 
```

你可以在这里看到一个演示：http: [//jsfiddle.net/mzmRN/](http://jsfiddle.net/mzmRN/)

PS 这是一个非常不错的小部件，所以我忍不住改进了你小提琴的交互，希望你不介意！

# javascript - Using animate parameters with shorthand jQuery effects?

> ID：11217346
> 
> 赞同：0
> 
> 时间：2012-06-26T23:25:53.107
> 
> 标签：javascript, jquery

If I want to do a simple `slideDown()` in jQuery, such as:

```
$(".zip").delay(1000).slideDown(); 
```

But I wanted to use the `useTranslate3d` parameter (for the [jQuery.Animate-Enhanced plugin](http://playground.benbarnett.net/jquery-animate-enhanced/)), can I simply apply the parameter to the `slideDown()` function, or do I need to also call the `animate()` function like so:

```
$(".zip").delay(1000).slideDown().animate({
    useTranslate3d: true,
}); 
```

Or could I simply do:

```
$(".zip").delay(1000).slideDown({
    useTranslate3d: true,
}); 
```

# java - 用于自动生成表单的 XML 或数据库

> ID：11217347
> 
> 赞同：3
> 
> 时间：2012-06-26T23:25:53.247
> 
> 标签：java, c++, xml, database

所以我正在创建一个自动生成数据输入表单的程序。该表单由用户创建（它是一个简单的表格设置，具有合并单元格的能力）。一些单元格包含文本视图，其他单元格包含文本输入（全部基于用户绘制它的方式）。

然后将此表单发送到另一个应用程序，该应用程序将其拉回。我想知道代表表格的最佳方法是什么。我虽然要么使用 XML 来表示表单，要么使用基本上充当网格的数据库，并且数据库中的第 1 行第 1 列将匹配表单单元格第 1 行第 1 列等等（使用数据库的一种奇怪方式）。

表单创建程序是用C++编写的，表单重新生成程序是用Java编写的。

有没有更好的方法来做到这一点？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:26:09.780

我也在想同样的事情，因为我正在为我的框架创建动态表单。因此，我将与您分享一些想法。使用数据库添加新表单，例如在一个表中添加一条记录，指定表单及其在另一个表中的字段，可以选择它的字段类型，或者为每个表单创建一个表，每次创建一个新表或更改其字段（听起来很乱）.. 或者创建一个包含一堆用于表单结构的 xml 的文件夹？

说到数据库：

1.  您的应用程序受到特定数据库应用程序的限制，例如 sql server 2008 或 mysql 或 mysqli 或 oracle 等。
2.  您的应用程序正在导致网络流量，并没有那么糟糕，但它在每次您需要创建或使用表单时都会这样做。
3.  您需要一个面板来使用数据库创建这些表单，并且即使通过您的手机也可以访问它的网页。

当涉及到 XML 时：

1.  您的应用程序不受数据库版本限制。
2.  您需要模仿者有权在框架的特定目录中创建文件。
3.  即使您可以创建面板，也不需要面板，因为 XML 是人类可读的文件。因此，您可以在吃晚餐的同时制作一个并将其提供给您的系统，并且哇，您已经生成了您的表格。

这些是我现在的想法。

将在表单中使用的方法如何？这些也会是动态的吗？你怎么能指定什么叫什么？这也是你需要考虑的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:01:56.310

我认为 XML 在这里是一个更好的选择。使用数据库作为网格可能比需要的更令人头疼。您将不得不处理与拥有数据库相关的所有问题，而不会真正从数据库中获得任何好处。业界决定更多地使用 xml（xbrl 就是一个例子）。

# javascript - jQuery $('element', this) 选择器，这是什么意思？

> ID：11217351
> 
> 赞同：0
> 
> 时间：2012-06-26T23:26:45.383
> 
> 标签：javascript, jquery, selector

我在一个函数中使用了这个选择器，我什至不知道它的确切含义，但它起作用了——这是我的一段代码：

```
否则 if($(this).hasClass('list')) {
        listItem.stop(true,true).fadeOut(333, function(){
        var $this = $(this);
        if(listItem.hasClass('grid')) {
            $这个。***find('h1', this)*** .insertBefore($this.children());
        }

```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T23:31:32.370

“.find()”方法只关注一个参数，所以它的含义与

```
$this.find('h1') 
```

JavaScript 不在乎你是否向函数传递了太多参数。实际上并没有“争论太多”这样的概念。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T23:35:55.223

您可以在函数中使用上下文`$()`，如下所示：

```
$('element', this) 
```

然后它将仅在所引用元素的后代中搜索`this`。

相当于使用`find`方法：

```
$(this).find('element') 
```

但是，使用`find`两个参数是没有意义的。它只会忽略第二个参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T23:32:07.160

它是一个[替代选择器上下文](http://api.jquery.com/jQuery/#selector-context)，用于代替 jQuery 构造函数的文档根目录。

该[`.find()`方法](http://api.jquery.com/find/)将忽略选择器以外的任何其他参数。它的搜索上下文节点作为函数调用的上下文给出。

# javascript - 打开 d3 树布局以显示用户通过在搜索框中键入 request 搜索的节点

> ID：11217352
> 
> 赞同：2
> 
> 时间：2012-06-26T23:26:45.390
> 
> 标签：javascript, d3.js, tree, highlight

我使用 Mike Bostock 的[树布局](http://mbostock.github.com/d3/talk/20111018/tree.html)作为可搜索树的基础。我想知道用户是否可以在搜索框中输入名称，并且如果在树中找到它，树是否可以将其节点打开到命名节点。

```
`{
  "name": "flare",
  "children": [
     {
      "name": "analytics",
      "children": [
         {
          "name": "cluster",
          "children": [
             {"name": "AgglomerativeCluster", "size": 3938},
             {"name": "CommunityStructure", "size": 3812},
             {"name": "HierarchicalCluster", "size": 6714},
             {"name": "MergeEdge", "size": 743}
           ]
         },
         {
          "name": "graph",
          "children": [
             {"name": "BetweennessCentrality", "size": 3534},
             {"name": "LinkDistance", "size": 5731},
             {"name": "MaxFlowMinCut", "size": 7840},
             {"name": "ShortestPaths", "size": 5914},
             {"name": "SpanningTree", "size": 3416}
           ]
         },
         {
          "name": "optimization",
          "children": [
             {"name": "AspectRatioBanker", "size": 7074}
             ]
         }
     ]
}, ...etc` 
```

因此，例如节点全部关闭，只有根节点“flare”显示在屏幕上，用户搜索“MergeEdge”，该节点作为叶节点在“分析”下的“集群”下找到。然后，树将只打开那些显示“cluster”子节点所需的节点，因为那是找到“MergeEdge”的地方。我已经尝试过使用 jsonpath.js，但没有走得太远，并且我得到了这个[问题](https://stackoverflow.com/questions/9133500/how-to-find-a-node-in-a-tree-with-javascript)的答案，但只有当节点打开时才会显示我正在搜索的那个。

我想使用不同的 json 文件，这些文件可能有太多节点来一次显示所有节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:22:51.440

如果您的代码基于您链接的[示例](http://mbostock.github.com/d3/talk/20111018/tree.html)中的代码，那么这应该非常简单。

初始加载页面时，为每个节点调用该`toggle`函数以确保隐藏所有子节点。现在除了根节点之外的所有节点都被隐藏了，您需要使用`_children`每个节点的属性来查找子节点。一旦找到与搜索的名称匹配的孩子，就调用`toggle`它，每个父母都回到根目录。要使用切换节点重新显示图形，请调用`update`.

# python - Python. Read file by line from a point midway through (by byte)

> ID：11217354
> 
> 赞同：4
> 
> 时间：2012-06-26T23:27:22.110
> 
> 标签：python, file

> **Possible Duplicate:**
> [python: how to jump to a particular line in a huge text file?](https://stackoverflow.com/questions/620367/python-how-to-jump-to-a-particular-line-in-a-huge-text-file)

I'm trying to read various lines out of a large (250Mb) file.

The header tells me where certain parts are, i.e. the history subsection of the file starts at byte 241817341.

So is there a way to read the file only starting at that byte, without having to go through the rest of the file first? Something like:

```
file = open(file_name,'r')
history_line = file.readline(241817341)
while history_line != 'End':
    history_line = file.readline()
    [Do something with that line] 
```

Is that sort of thing feasible?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T23:33:53.777

```
f.seek(0)
print f.readline()
>>> Hello, world!

f.seek(4)
print f.readline()
>>> o, world! 
```

# objective-c - Coordinates in landscape mode iPad app correspond to portrait mode

> ID：11217355
> 
> 赞同：0
> 
> 时间：2012-06-26T23:27:23.033
> 
> 标签：objective-c, ios, ipad, coordinates, landscape

I'm having a weird issue with an iPad app I'm writing.

I want to add a UIToolbar to my main view controller (set as root view controller in the app delegate). Within this main view controller, I support only landscape orientations. When I set the frame for my toolbar, however, it seems that the ipad still thinks it's in portrait mode! What I mean by this is when I run this line:

`[_toolbar setFrame:CGRectMake(0, 0, [[self view] frame].size.width, 44)];`

The width of the toolbar is only 768, rather than 1024, even though the width of the screen at this point is clearly 1024, because the toolbar extends across only 2/3 of the screen. I'm having similar problems with placing subviews, and getting really weird placement on my main view controller.

Has anyone else run into problems like this? If so, how did you fix it? Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:40:54.163

您应该使用视图的边界，而不是框架，并且您不应该在视图的生命周期中**过早地执行代码。**

如果您从控件的*viewDidAppear*调用您的代码，那么我想它会起作用。但是如果你从*viewWillAppear*调用你的代码，那就太早了。

# python - Python list index out of range on return value of split

> ID：11217358
> 
> 赞同：7
> 
> 时间：2012-06-26T23:28:14.743
> 
> 标签：python, python-2.7

I'm writing a simple script that is trying to extract the first element from the second column of a .txt input file.

```
import sys

if (len(sys.argv) > 1):
    f = open(sys.argv[1], "r");
    print "file opened";

line = [];

for line in f:
    line = line.strip("\n ' '")
    line = line.split(",") 
    print line[1]

f.close(); 
```

My input file looks like this:

```
Client 192.168.1.13 said ``ACC: d0bb38f18da536aff7b455264eba2f1e35dd976f,389182.567,-0.042,-0.893,0.333''
Client 192.168.1.13 said ``ACC: d0bb38f18da536aff7b455264eba2f1e35dd976f,389182.590,-0.036,-0.905,0.273''
Client 192.168.1.13 said ``ACC: d0bb38f18da536aff7b455264eba2f1e35dd976f,389182.611,-0.046,-0.948,0.204''
Client 192.168.1.13 said ``ACC: d0bb38f18da536aff7b455264eba2f1e35dd976f,389182.631,-0.074,-0.978,0.170''
Client 192.168.1.13 said ``ACC: d0bb38f18da536aff7b455264eba2f1e35dd976f,389182.654,-0.100,-1.006,0.171'' 
```

I want my delimiter to be a comma. When I print the length of the line out, I'm getting 5 elements (as expected). However, whenever I try to index the list to extract the data (i.e., when I call `print line[1]`), I keep getting the following error:

```
file opened
Traceback (most recent call last):
  File "stats.py", line 13, in <module>
    print line[1]
IndexError: list index out of range 
```

I don't understand why it's out of range when clearly it isn't.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T23:33:10.503

我猜你的文件中某处有一个空行。如果它遍历数据然后生成异常，则空行将位于文件的末尾。

请插入

```
print len(line), line 
```

在你之前

```
print line[1] 
```

作为检查以验证是否是这种情况。

您始终可以使用此构造来测试空行，并且只处理/打印*非*空行：

```
for line in f:
    line = line.strip()
    if line:
       # process/print line further 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T23:33:15.550

当您使用列表并尝试在特定索引处获取值时，始终可以安全地看到索引在范围内

```
if len(list_of_elements) > index: 
   print list_of_elements[index] 
```

看：

```
>>> list_of_elements = [1, 2, 3, 4]
>>> len(list_of_elements)
4
>>> list_of_elements[1]
2
>>> list_of_elements[4]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IndexError: list index out of range
>>> 
```

现在你必须找出为什么你的列表没有包含你预期的那么多元素

解决方案：

```
import sys

if (len(sys.argv) > 1):
    f = open(sys.argv[1], "r")
    print "file opened"

for line in f:
    line = line.strip().strip('\n')
    # Ensure that you are not working on empty line
    if line:
        data = line.split(",") 
    # Ensure that index is not out of range
    if len(data) > 1: print data[1]

f.close() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T23:37:47.063

您的数据后可能有空行，我在没有它们的情况下运行了您的测试代码，它按预期工作。

```
$ python t.py t.txt
file opened
389182.567
389182.590
389182.611
389182.631
389182.654 
```

如果您不想删除它们，则只需检查空行。

```
for line in f:
    if line.strip(): # strip will remove all leading and trailing whitespace such as '\n' or ' ' by default    
        line = line.strip("\n ' '")
        line = line.split(",") 
        print line[1] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T00:26:00.847

捕获异常并打印违规行可能很有用

```
for line in f:
    line = line.strip("\n ' '")
    line = line.split(",") 
    try:
        print line[1]
    except IndexError, e:
        print e
        print "line =", line
        raise   # if you don't wish to continue 
```

# java - osx上完整的java类库源码

> ID：11217369
> 
> 赞同：0
> 
> 时间：2012-06-26T23:29:50.587
> 
> 标签：java, macos

我有不完整的来源，由苹果官方下载的 JDK 提供。它缺少像 com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl 这样的东西，这当然是我需要进入的。

是否有方便的源 jar 可用？我为 b14 找到了一个，但该文件的来源不匹配。

我去拿了 OpenJDK 的源代码（b25 显然是最新的），但它似乎需要下载一堆其他的东西然后组装，我不愿意在 OSX 上尝试。

OSX 版本号称是 1.6.0_33。

# java - Zhang-Suen 细化算法实现未按预期工作

> ID：11217370
> 
> 赞同：5
> 
> 时间：2012-06-26T23:29:51.927
> 
> 标签：java, algorithm

我正在尝试使用[Zhang-Suen 细化算法](http://mafahir.wordpress.com/tag/zhang-suen/)。我试图在 Java 中实现它。但问题是它发现我的边缘不是一个像素宽度的线。我第一次使用这个算法，我不知道我的逻辑有什么问题。

我想要实现的是：

![在此处输入图像描述](../Images/656b7bfa27ed3549991f242b3fea5c4f.png)

我能够实现的是：

![在此处输入图像描述](../Images/958c3db0cebd41a415a195e70b3cc8d5.png)

```
 public void thinStepI(){

     delList.clear();
    neighbor = 0;
    connectivity = 0;

     for(int i=4;i<width-4;i++)
        for(int j=4;j<height-4;j++){
            p = pixelList[i][j];
            if (p == 1){
                p1 = pixelList[i-1][j]; 
                p2 = pixelList[i-1][j+1]; 
                p3 = pixelList[i][j+1]; 
                p4 = pixelList[i+1][j+1]; 
                p5 = pixelList[i+1][j];
                p6 = pixelList[i+1][j-1]; 
                p7 = pixelList[i][j-1]; 
                p8 = pixelList[i-1][j-1];  

                neighbor = p1 + p2 + p3 + p4 + p5 + p6 + p7 + p8;

                if (p1 == 0 && p2 == 1)
                    connectivity ++;
                if (p2 == 0 && p3 == 1)
                    connectivity ++;
                if (p3 == 0 && p4 == 1)
                    connectivity ++;
                if (p4 == 0 && p5 == 1)
                    connectivity ++;
                if (p5 == 0 && p6 == 1)
                    connectivity ++;
                if (p6 == 0 && p7 == 1)
                    connectivity ++;
                if (p7 == 0 && p8 == 1)
                    connectivity ++;
                if (p8 == 0 && p1 == 1)
                    connectivity ++;

                if ( connectivity == 1 && (neighbor >= 2 && neighbor <= 6) &&
                     (p1 * p3 * p5 == 0) && (p3 * p5 * p7 == 0) ){
                    delList.add(i);
                    delList.add(j);
                }

            }      
        }

     int length = delList.size();
     if (length != 0){
        for(int i =0; i < (length - 1); i+=2){
            pixelList[delList.get(i)][delList.get(i+1)] = 0;
            System.out.println("oldu");
        }
        thinStepI();
     }

}

   public void thinStepII(){
    delList.clear();
    neighbor = 0;
    connectivity = 0;

     for(int i=4;i<width-4;i++)
        for(int j=4;j<height-4;j++){
            if (pixelList[i][j] == 1){
                p  = pixelList[i][j]; // ** Origin Pixel ** 
                p1 = pixelList[i-1][j]; 
                p2 = pixelList[i-1][j+1]; 
                p3 = pixelList[i][j+1]; 
                p4 = pixelList[i+1][j+1]; 
                p5 = pixelList[i+1][j];
                p6 = pixelList[i+1][j-1]; 
                p7 = pixelList[i][j-1]; 
                p8 = pixelList[i-1][j-1];                    

                neighbor = p1 + p2 + p3 + p4 + p5 + p6 + p7 + p8;

                if (p1 == 0 && p2 == 1)
                    connectivity ++;
                if (p2 == 0 && p3 == 1)
                    connectivity ++;
                if (p3 == 0 && p4 == 1)
                    connectivity ++;
                if (p4 == 0 && p5 == 1)
                    connectivity ++;
                if (p5 == 0 && p6 == 1)
                    connectivity ++;
                if (p6 == 0 && p7 == 1)
                    connectivity ++;
                if (p7 == 0 && p8 == 1)
                    connectivity ++;
                if (p8 == 0 && p1 == 1)
                    connectivity ++;

                if ( connectivity == 1 && (neighbor >= 2 && neighbor <= 6) &&
                     (p1 * p3 * p7 == 0) && (p1 * p5 * p7 == 0) ){
                    delList.add(i);
                    delList.add(j);
                }

            }     
        }

     int length = delList.size();
     if (length != 0){
        for(int i =0; i < (length - 1); i+=2){
            pixelList[delList.get(i)][delList.get(i+1)] = 0;
            System.out.println("oldu2");
        }
        thinStepII();
     }

} 
```

导致我得到不正确结果的逻辑错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T13:14:40.030

我认为您用于描述 ZS 算法的链接是错误的。删除前景像素的一个必要条件是其*交叉数*为 1。“交叉数”是当您按顺时针顺序遍历 8 个相邻像素时，前景像素变为背景像素的次数。您的链接中的描述似乎缺少此内容。 有关更好的讨论，请参阅： [http ://www.uel.br/pessoal/josealexandre/stuff/thinning/ftp/lam-lee-survey.pdf。](http://www.uel.br/pessoal/josealexandre/stuff/thinning/ftp/lam-lee-survey.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T04:26:36.307

您必须循环直到对位图没有任何更改。您只对算法进行了一次迭代。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T04:21:22.010

该声明

```
connectivity = 0; 
```

应该放在每个方法的两个 for 循环内。

# html - HTML5 - 渲染简单的电路

> ID：11217374
> 
> 赞同：6
> 
> 时间：2012-06-26T23:30:11.100
> 
> 标签：html, html5-canvas, circuit

我有一组相对简单的电路。小的只涉及电阻器、电容器、电感器和微调器/微调器（即：三端可变电阻器）。

我试图找到一种简单的方法来从节点电压方程的矩阵中渲染这些电路。我不需要计算电流/电压值（我已经能够做到这一点）。

我对如何在 HTML5 中渲染 2D 形状有基本的了解。在这一点上，我只需要一种简单的方法来通过线条放置和连接形状。我总是可以做一个简单的放置，但是任何关于如何避免重新发明轮子的建议都会很棒。

谢谢你。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-01T04:33:25.920

对不起，已经有一段时间了，但我已经完成了我答应你的图书馆。使用它，我可以创建如下电路：

![电路](../Images/ec17806976fead1f08a79b38497609b7.png)

我已经在 javascript 中创建了一个简化的绘图系统，供您通过构建一个简短的库来使用。将它的代码复制并粘贴到您的页面中，然后保留它。如果您想更改它，可以问我（或其他了解 Javascript 的人），或者在 W3Schools 或 Mozilla MDN 等网站上学习。该代码需要一个 ID 为“canvas”的画布元素。编码：

```
 "use strict"

        var wW=window.innerWidth;
        var wH=window.innerHeight;
        var canvasHTML=document.getElementById("canvas");
        canvasHTML.width=wW;
        canvasHTML.height=wH;
        var ctx=canvasHTML.getContext("2d");
        var ix;
        var iy;
        var x;
        var y;
        var d;
        var dx;
        var dy;

        function beginCircuit(a,b)
        {
            ctx.lineWidth=1.5;
            ctx.strokeStyle="#000";
            ctx.beginPath();
            x=a;
            y=b;
            d=0;
            dx=1;
            dy=0;
            ix=x;
            iy=y;
            ctx.moveTo(x,y);
            drawWire(50);
            drawPower();
        }

        function endCircuit()
        {
            ctx.lineTo(ix,iy);
            ctx.stroke();
        }

        function drawWire(l)
        {
            x+=dx*l;
            y+=dy*l;
            ctx.lineTo(x,y);
        }       

        function drawPower()
        {
            var n;
            drawWire(10);
            n=3;
            ctx.moveTo(x+10*dy,y+10*dx);
            ctx.lineTo(x-10*dy,y-10*dx);
            x+=dx*5;
            y+=dy*5;
            while(n--)
            {
                ctx.moveTo(x+15*dy,y+15*dx);
                ctx.lineTo(x-15*dy,y-15*dx);
                x+=dx*5;
                y+=dy*5;
                ctx.moveTo(x+10*dy,y+10*dx);
                ctx.lineTo(x-10*dy,y-10*dx);
                if(n!=0)
                {
                    x+=dx*5;
                    y+=dy*5;
                }
            }
            ctx.moveTo(x,y);
            drawWire(10);
        }

        function drawCapacitor()
        {
            drawWire(22.5);
            ctx.moveTo(x+10*dy,y+10*dx);
            ctx.lineTo(x-10*dy,y-10*dx);
            x+=dx*5;
            y+=dy*5;
            ctx.moveTo(x+10*dy,y+10*dx);
            ctx.lineTo(x-10*dy,y-10*dx);
            ctx.moveTo(x,y);
            drawWire(22.5);
        }

        function drawInductor()
        {
            var n,xs,ys;
            drawWire(9);
            n=4;
            xs=1+Math.abs(dy);
            ys=1+Math.abs(dx);
            x+=dx*6;
            y+=dy*6;
            ctx.scale(xs,ys);
            while(n--)
            {
                ctx.moveTo(x/xs+5*Math.abs(dx),y/ys+5*dy);
                ctx.arc(x/xs,y/ys,5,Math.PI/2*dy,Math.PI+Math.PI/2*dy,1);
                x+=6.5*dx;
                y+=6.5*dy;
                if(n!=0)
                {
                    if(dx>=0)
                    {
                        ctx.moveTo(x/xs-5*dx,y/ys-5*dy);
                    }

                    ctx.moveTo(x/xs-5*dx,y/ys-5*dy);
                    ctx.arc(x/xs-6.5/2*dx,y/ys-6.5/2*dy,1.5,Math.PI+Math.PI/2*dy,Math.PI/2*dy,1);
                }
            }
            ctx.moveTo(x/xs-1.75*dx,y/ys-1.75*dy);
            ctx.scale(1/xs,1/ys);
            ctx.lineTo(x,y);
            drawWire(9);
        }

        function drawTrimmer()
        {
            ctx.moveTo(x+35*dx-7*dy,y+35*dy-7*dx);
            ctx.lineTo(x+15*dx+7*dy,y+15*dy+7*dx);
            ctx.moveTo(x+13*dx+4*dy,y+13*dy+4*dx);
            ctx.lineTo(x+17*dx+10*dy,y+17*dy+10*dx);
            ctx.moveTo(x,y);
            drawCapacitor();
        }

        function drawResistor()
        {
            var n;
            drawWire(10);
            n=5;
            x+=dx*5;
            y+=dy*5;
            while(n--)
            {
                ctx.lineTo(x-5*dy,y-5*dx);
                ctx.lineTo(x+5*dy,y+5*dx);
                x+=5*dx;
                y+=5*dy;
            }
            ctx.lineTo(x,y);
            drawWire(10);
        }

        function turnClockwise()
        {
            d++;
            dx=Math.cos(1.570796*d);
            dy=Math.sin(1.570796*d);
        }

        function turnCounterClockwise()
        {
            d--;
            dx=Math.cos(1.570796*d);
            dy=Math.sin(1.570796*d);
        } 
```

然后创建一个新`<script type="text/javascript">....</script>`标签并将您的绘图代码放在标签之间。绘图代码的工作方式如下：

您首先调用函数`beginCircuit(x,y)`。在括号内，输入您想要开始电路的 x 和 y 坐标，如下所示`beginCircuit(200,100)`：这将在您指定的坐标（以像素为单位）处绘制电线和电池。电池和电线一起占据了屏幕上 100 像素的空间。

然后，您可以调用以下任何函数：

`drawWire(length)`

在回路末端绘制您指定长度的导线。占用`length`大量空间。

`turnClockwise(length)`

将下一个命令的方向顺时针旋转 90°。不占空间。

`turnCounterClockwise(length)`

将下一个命令的方向逆时针旋转 90°。不占空间。

`drawCapacitor(length)`

在电路的末端画一个电容器。占用50px。

`drawInductor(length)`

在电路末端画一个电感。占用50px。

`drawResistor(length)`

在电路的末端画一个电阻。占用50px。

`drawTrimmer(length)`

在电路的末端画一个电阻。占用50px。

画完电路后，使用功能`endCircuit()`关闭然后画电路。它会自动从您停止的点到电路的起点画一条线。

我知道要做的事情很多，但是一旦你理解了它，这确实是一种非常简单灵活的方法。如果你想看到这个，去这里：http: [//jsfiddle.net/mindoftea/ZajVE/](http://jsfiddle.net/mindoftea/ZajVE/)。请试一试，如果您有问题，请发表评论。

谢谢，希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-22T13:49:01.407

好作品！我也需要教学目的，包括电路（和力学）。如果有人喜欢 OO 风格，就把它打包成一个类。还增加了一些自定义符号的灵活性，例如标签等。[http://jsfiddle.net/michael_chnc/q01f2htb/](http://jsfiddle.net/michael_chnc/q01f2htb/)

```
` /*Basic Circuit symbol toolset, still alot missing credit to: https://stackoverflow.com/users/434421/mindoftea*/

class Circuit {   constructor(name = "canvas", ix = 50, iy = 50) {
    this.canvas = document.getElementById(name);
    this.ctx = canvas.getContext("2d");
    this.d = 0; ... }

var cc = new Circuit("canvas", 100, 100); cc.ctx.lineWidth = 2; cc.drawPower(60, 1, "E"); cc.drawCapacitor(60, "C=50 \u03bc"); cc.drawSwitch(40, 1, "S1"); cc.drawInductor(50, 4, "I=40"); cc.turnClockwise(); cc.drawTrimmer(60, "T"); cc.drawResistor(60, 3, 1, "R"); cc.turnClockwise(); cc.drawResistor(160, 3, 2, "R"); cc.save(); cc.turnCounterClockwise(); cc.drawWire(20); cc.turnClockwise(); cc.drawResistor(); cc.turnClockwise(); cc.drawWire(20); cc.restore(); cc.turnClockwise(); cc.drawWire(20); cc.turnCounterClockwise(); cc.drawResistor(50, 5, 2, "R2"); cc.turnCounterClockwise(); cc.drawWire(20); cc.turnClockwise(); cc.drawWire(80); cc.turnClockwise(); cc.drawWire(30); cc.drawSwitch(50, false, "S3");

cc.finish(true); ` 
```

# objective-c - 消息发送表达式中缺少“[”

> ID：11217377
> 
> 赞同：0
> 
> 时间：2012-06-26T23:30:47.910
> 
> 标签：objective-c, xcode4

我收到此错误消息并匹配我的括号并且找不到任何错误。你能找出问题所在吗？

谢谢你。

错误信息在相关行被注释掉；文件名是 MyHorizLine.m：

```
#import "MyHorizLine.h"

@implementation MyHorizLine

-(id)initWithCoder:(NSCoder *)decoder
{
  self [super initWithCoder:decoder]; //Missing '[' at message send expression
  if (self) {
    self.backgroundColor = [UIColor clearColor];

  }
  return self;
}

-(void)drawRect:(CGRect)rect
{
  CGContextRef c = UIGraphicsGetCurrentContext();
  CGContextMoveToPoint(c, 0, 0);
  CGContextAddLineToPoint(c, self.bounds.size.width, 0);
  CGContextStrokePath(c);

}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:33:08.210

该行应为

```
self = [super initWithCoder:decoder]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T23:33:16.443

你错过了一个`=`：

```
self [super initWithCoder:decoder]; 
```

应该

```
self = [super initWithCoder:decoder]; 
```

# php - PHP中header函数的使用

> ID：11217378
> 
> 赞同：0
> 
> 时间：2012-06-26T23:30:54.450
> 
> 标签：php, mysql

我在 add.php 页面上使用表单向我的数据库添加联系人，此表单的 INSERT 代码在另一个页面上，我们将调用 php.php 页面。在 php.php 中，我有一个标头函数，我想将用户重定向到另一个页面 edit.php?ID=100，ID=100 是刚刚输入的联系人。我将如何做到这一点，我是否需要在标头函数和 INSERT 查询之前从数据库中获取？

```
<?php

if (isset($_POST['$fname'])) {

  header("location: http://www.mydomain.com/contacts/edit/?ID=<? echo $row['ID]; ?>");

  $connect = mysql_connect (...)

  mysql_select_db ("mydb);

  $ID = $_POST['ID'];
  $fname = $_POST['fname'];
  $lname = $_POST['lname'];

  $sql = ("INSERT INTO contacts (fname, lname) VALUES ('$_POST[fname]', '$_POST[lname]')");

  mysql_query($sql,$con) or die ("Error: ".mysql_error());

  exit;
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T23:44:22.780

标头不会终止脚本的运行。如果您使用位置重定向是退出脚本的好习惯，那么您所做的就是正确的。

请注意一件事，不要将任何输出放在标头之前的标准输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T23:36:22.103

您需要在当前脚本完成您希望它执行的所有操作**后发送标头。**发送标头不一定会立即取消该脚本的执行；它仍然可以持续一段时间，但您应该在执行 SQL 调用后执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T23:54:14.547

我相信[mysql_insert_id](http://php.net/manual/en/function.mysql-insert-id.php)是您正在寻找的功能。它将返回刚刚插入的字段的 AUTO_INCREMENT ID。然后，您可以将其插入标题重定向。只需确保在插入联系人后进行标题重定向。它会工作得很好。

应该工作的代码：

```
<?php

if (isset($_POST['$fname'])) {

$connect = mysql_connect (...)

mysql_select_db ("mydb");

$ID = $_POST['ID'];
$fname = mysql_real_escape_string($_POST['fname']);
$lname = mysql_real_escape_string($_POST['lname']);

$sql = "INSERT INTO contacts (fname, lname) VALUES ('$fname', '$lname')";

mysql_query($sql,$connection) or die ("Error: ".mysql_error());

header("location: http://www.mydomain.com/contacts/edit/?ID=".mysql_insert_id($connection));

exit;
}

?> 
```

您发布的代码也容易受到 MySQL 注入的影响，因此我 mysql_real_escape_string 输入了您的输入以防止这种情况发生。始终在将输入放入查询之前对其进行清理。我鼓励您查看 PHP 必须提供的 MySQLi 函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T23:55:58.687

您不能在`header`函数 ( `<? echo $row['ID]; ?>`) 中嵌入 php 代码。为了实现你想要做的事情，你应该`INSERT`在 header 函数之前有代码。然后您应该检索您刚刚输入的联系人的 ID，然后调用 header 函数，如下所示（假设`$id`是检索到的 ID）：

```
header("location: http://www.mydomain.com/contacts/edit/?ID=".$id); 
```

要检索最后插入的行的 ID，您可以使用`mysql_insert_id`函数 ( [reference](http://php.net/manual/en/function.mysql-insert-id.php) )，但建议您使用 mysqli 版本。

# debugging - VS2008调试，控制台打开然后立即关闭

> ID：11217384
> 
> 赞同：-1
> 
> 时间：2012-06-26T23:31:39.290
> 
> 标签：debugging, visual-studio-2008, console

我尝试了许多方法来阻止控制台关闭——断点、暂停和监听函数、示例代码以及在另一个论坛上寻求帮助；仍然没有解决方案。除了，如果我使用一个新项目，那么控制台会保持打开状态。

我的直觉是，这与我在迭代器标头中实现的解决方案有关。代码编译。我希望 VS2008 中有一个设置（在 VS2005 中的行为相同）我应该更改。奇怪的是，我注释掉了所有代码并留下了一个带有断点的测试部分，但控制台仍然关闭。“不调试就开始”打开控制台但不显示测试文本。

```
int main()
{
    cout << "Welcome to the Automating from Model and Sensor Data" << endl << endl;

    while (true) {
        int choice = GetMenuChoice();
        if (choice == 0) break;
        //DoMenuChoice(lex, choice);
    }

    return 0; //goodbye!
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T00:07:47.893

在视觉工作室菜单上，你检查了 `Debug > Options`吗？

它应该打开选项对话框，在对话框的左侧，单击`Debugging`并查看设置中是否有一些看起来不正确的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:37:47.680

问题与 main.cpp 中程序的入口点有关 - 而不是 main() 函数，它必须是更复杂的入口函数。

在此处查看详细信息 [LNK2019：函数 ___tmainCRTStartup 中引用的未解析的外部符号 _main](https://stackoverflow.com/questions/11247699/lnk2019-unresolved-external-symbol-main-referenced-in-function-tmaincrtstar)

# php - 每当我打开 index.php 页面时都会出现错误消息

> ID：11217387
> 
> 赞同：0
> 
> 时间：2012-06-26T23:31:53.897
> 
> 标签：php

我在一个网站上工作，这就是我的 index.php：

```
 <?php

    $p     = $_GET['p'];
    $pages = array('home', 'culture', 'design', 'art', 'about');
    $path  = 'http://localhost:8080/projects';

    include('header.php');

    if(!isset($p) || !in_array($p, $pages)) {
        include('header.index.php');
        include('content.index.php');
    } else {
        switch($p) {
            case "home";
                include('header.home.php');
                include('content.home.php');
            break;
            case "culture";
                include('content.culture.php');
            break;
            case "design";
                include('content.design.php');
            break;
            case "about";
                include('content.about.php');
            break;
            case "art";
                include('content.art.php');
            break;
            default:
                include('content.index.php');
            break;
        }
    }
    include('footer.php');
    ?> 
```

我收到以下错误：

```
**Notice: Undefined index: p in C:\wamp\www\projects\index.php on line 3
Call Stack
#   Time    Memory  Function    Location
1   0.0523  680200  {main}( )   ..\index.php:0** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:40:30.600

最初分配 p 时， $_GET 中没有设置 p 所以你可以这样做

```
 $p     = isset($_GET['p']) ? $_GET['p'] : null; 
```

如果您不关心通知，您可以在 php.ini 中通过将 error_reporting 更改为 E_ALL 和 ~E_NOTICE 来禁用它们，但我不推荐它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T00:49:40.703

您拥有的 switch 语句有些虚假，尤其是当您已经拥有`$page`数组时。您实际上想验证页面是否存在或加载索引页面（可能？）：

```
$p     = isset($_GET['p']) ? (string) $_GET['p'] : NULL;
$pages = array('home', 'culture', 'design', 'art', 'about');
$path  = 'http://localhost:8080/projects';
if (!in_array($p, $pages)) {
    $p = 'index';
}
// include $p based on $path 
```

但是，标题仍然存在问题。所以这是一个教训：让每个包含的标题部分。您可以根据需要堆叠任意数量的包含，只需注意每个包含都包含正确的标题。然后你就完成了。而且您不会看到任何警告。

* * *

因此，遵循@hakre 建议的代码应如下所示：

```
$p     = isset($_GET['p']) ? (string) $_GET['p'] : NULL;
$pages = array('home', 'culture', 'design', 'art', 'about');
$path  = 'http://localhost:8080/projects';

include('header.php');
if (!in_array($p, $pages)) {
    $p = 'index';
    include('header.index.php');
    include('content.index.php');
} 
```

感谢@hakre 的帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T23:50:55.890

只是一个建议也许可以尝试`!empty()`

```
if(!empty($p) || !in_array($p, $pages)) {
    include 'header.index.php';
    include 'content.index.php';
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-26T23:41:19.697

这不是错误。正如日志所声称的，这是一个通知。它旨在通知您潜在的问题，但不会阻止脚本执行。

在这种情况下，解释器会告诉您数组 $_GET 不包含索引为“p”的元素。它没有被初始化，可能是因为在这种情况下它没有在请求中指定。

在尝试访问之前先尝试测试该元素是否存在。为此使用 isset()。

# dll - Azure 中的 HttpModule 本机 C++ dll

> ID：11217391
> 
> 赞同：0
> 
> 时间：2012-06-26T23:32:16.333
> 
> 标签：dll, azure, native, httpmodule, webrole

我想在 Windows azure 中运行本机 httpmodule（c++ 64 位 dll）。首先这是可能的，其次，最好的方法是什么？

我以前在 azure 中使用过本机 dll，但将其包装在托管的 c# httphandler 中，它运行良好，但这次我想直接托管本机 dll。是否可以像在 IIS 中一样在 azure 中托管本机 dll？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:59:18.807

是的，有可能，我最近不得不在我的 Azure 项目中使用一个非托管 C 库，所以我所做的就是为它创建一个 C++/CLI 包装器，并在我的 C# 项目中简单地引用它。
我相信这是最简单的方法，否则您需要使用 P/Invoke 直接从 C# 调用非托管本机代码。

请记住，在云端，Azure 使用 2008 Visual C++ 运行时库，因此您必须使用 VS2008 编译您的 C++ 项目，或者更好的选择是将[Visual C++ 2010 Redistributable Package](http://www.microsoft.com/en-us/download/details.aspx?id=14632)上传到云端并静默安装在启动时。

如果您有兴趣，我会[在此处](https://stackoverflow.com/a/11137282/1469494)列出执行此操作的 3 个简单步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T01:10:08.677

我相信您使用的是 Windows Azure Web 角色，并且在 Windows Azure Web 角色上，带有 IIS 的本机 HttpModule 配置将与其他 IIS 服务器相同，这里唯一的技巧是您将使用 Startup 任务运行 AppCmd 命令进行安装，注册并配置您的本机模块。

您在启动任务中需要的基本命令将类似于以下内容：

```
appcmd install module /name: string /image: string /add:true|false /lock:true|false 
```

例如，要使用 %windir%\system32\inetsrv 目录中的 .dll 文件注册、启用和锁定名为 ImageCopyrightModule 的模块，请在命令提示符处键入以下内容，然后按 Enter：

```
appcmd install module /name: ImageCopyrightModule /image:c:/%windir%/system32/inetsrv/ imageCopyrightModule .dll /add:true /lock:true 
```

# javascript - 离线时对多个 AJAX 请求进行排队，连接返回时发送

> ID：11217402
> 
> 赞同：1
> 
> 时间：2012-06-26T23:33:29.937
> 
> 标签：javascript, ajax, asynchronous, xmlhttprequest

我有一个 AJAX 密集型应用程序，需要快速或同时发送多个 AJAX 请求。以下代码只是一个简单的包装器，用于发送我在整个应用程序中使用的 AJAX POST 调用。有 2 个警告：

1) 我希望能够在发出请求之前测试用户的互联网连接，以便在他们的连接断开时通知他们。

2）如果他们的连接断开并且他们继续使用该应用程序，这会产生更多的 AJAX 调用，我想将这些调用排队并在连接恢复后一一发送。

连接性检查和排队工作，但是当用户重新联机时，只有他们的一些请求被发送到服务器，并且它们似乎被发送到他们原来的顺序之外。我错过了什么？为什么没有发送所有请求，为什么它们没有按顺序发送？

在任何人注意到之前，我已经看到了一些涉及 jQuery 的关于这个主题的其他解决方案。我不反对使用这些，我只是想了解为什么此代码不起作用。提前致谢。

```
window.connectionState = true
window.xhrQueue = []
window.pingInterval

function xhrPost(url, packet, before, after) {
  if (!url || typeof(url) !== "string") {
    console.log("invalid url supplied in xhr call.")
    return false
  }

  var mainRequest = function() {
    var xhr= new XMLHttpRequest()

    if (typeof(after) === "function") {
      xhr.onreadystatechange = function(){
        if (xhr.readyState == 4) {
          after(xhr)
          return true
        }
      }
    }

    if (typeof(before) === "function") {
      before()
    }

    xhr.open("POST",url,true)
      if (packet) {
        xhr.send(JSON.stringify(packet))
      }
      else {
        xhr.send()
      }
  }

  ping(mainRequest)
}

function ping(mainRequest) {

  // Create pingXhr to test connection
  var pingXhr = new XMLHttpRequest()

  pingXhr.onreadystatechange = function(){
    // If pingXhr comes back successfully...
    if (pingXhr.readyState == 4) {
      if (pingXhr.status == 200) { 
        // If pingXhr comes back from being down, update user
        if (window.connectionState !== true) {
          setTimeout(function() { alert("And we're back! Your connection seems to be working now. Keep editing.") }, 1)
        }
        // If there are requests waiting, send them in order, then remove them
        if (window.xhrQueue.length > 0) {
          for (var i in window.xhrQueue) {
            ping(window.xhrQueue[i])
            window.xhrQueue.splice(i, 1)
            clearInterval(window.pingInterval)
          }
        }
        // Otherwise, just make the singular request
        else {
          mainRequest()
        }
        // Reset xhrQueue since stuff is successful, change connection to true, and unset onbeforeunload message
        window.xhrQueue = []
        window.connectionState = true
      }
      // If there was a problem with the request
      else {
        // Notify the user their internet is down
        if (window.connectionState === true) {
          setTimeout(function() { alert("It seems you have momentarily lost internet connectivity.") }, 1)
        }
        // If there are no requests in the xhrQueue, create the timeout. Otherwise, just add to the queue
        if (window.xhrQueue.length === 0) {
          window.pingInterval = setInterval(function(){ ping() }, 3000)
        }
        // Add the request to the xhrQueue to be processed in order
        if (typeof(mainRequest) === "function") {
          window.xhrQueue.push(mainRequest)
        }
        window.connectionState = false
      }
    }
  }
  pingXhr.open("GET","/some/url/here",true)
  pingXhr.send()
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:46:42.740

这将是因为您一次将它们全部关闭，有些会比其他人需要更长的时间才能返回，因此它们的处理程序将首先运行。

我建议您一次发送一个，使用回调发送下一个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T23:48:18.407

看起来您正在使用 push() 将条目放在队列中，然后在循环中使用 splice() 来删除它们。这不太可能正常工作 - 它会跳过其中的一些/大部分，因为拼接会在您迭代它们时修改数组中的索引。

如果您将循环更改为始终关闭第一个元素，它会更好地工作。

编辑添加：您可能也不想在这里执行 for-in 循环。在迭代对象时修改对象的键通常不是一个好主意。

就像是：

```
while (window.xhrQueue.length > 0) {
    ping(window.xhrQueue[0]);
    window.xhrQueue.splice(0, 1);
} 
```

或者，您可以让 onreadystatechange 处理程序从队列中获取下一个条目并发送该请求，而不是尝试同时运行所有排队的请求。

# php - 阻止用户在其用户名中注册空间

> ID：11217410
> 
> 赞同：1
> 
> 时间：2012-06-26T23:34:10.167
> 
> 标签：php, mysql, html, trim

我遇到了一个错误，我的注册表单允许用户注册带有空格的用户名，即“用户名”，而它应该只是没有空格的“用户名”。

我已经尝试搜索和阅读许多教程，但大多数都对我没有帮助。

谁能指出我正确的工作教程方向，或者告诉我我做错了什么。

我尝试使用剥离空格，啧啧，但我不是 100% 如何做到这一点。

但这是我所做的......

注册页面

```
<?
session_start();
include("config.php");
include("clean.php");
$act = clean($_GET[act]); 
$sqlcontent = mysql_query("select * from usr_config");
$content = mysql_fetch_array($sqlcontent);
$rand = rand(0,999);
?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" href="css.css" type="text/css" />
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Usersystem Register Page &bull; <? echo("$content[site]");?></title>
</head>

<body>
    <tr>
      <? if($content[regen]==1) { 
      if($act!=register)
      { ?>
      <form action="register_new.php?act=register" method="post">
        <div align="center">Username:<br />
            <input type="text" name="username" class="login" maxlength="20" />
          <br />
          <br />
          Password:<br />
          <input type="password" name="password" />
          <br />
          <br />
          Email Address:<br />
          <input type="text" name="email" />
          <br />
          <br />
    Country:<br />
        <SELECT name="countrywhere">
    <option value="Afghanistan">Afghanistan</option>
    <option value="&#197;land&nbsp;Islands">&#197;land Islands</option>
    <option value="Albania">Albania</option>
    <option value="Algeria">Algeria</option>
    <option value="American&nbsp;Samoa">American Samoa</option>
    <option value="Andorra">Andorra</option>
    <option value="Angola">Angola</option>
    <option value="Anguilla">Anguilla</option>
    <option value="Antarctica">Antarctica</option>
    <option value="Antigua&nbsp;and&nbsp;Barbuda">Antigua and Barbuda</option>
    <option value="Argentina">Argentina</option>
    <option value="Armenia">Armenia</option>
    <option value="Aruba">Aruba</option>
    <option value="Australia">Australia</option>
    <option value="Austria">Austria</option>
    <option value="Azerbaijan">Azerbaijan</option>
    <option value="Bahamas">Bahamas</option>
    <option value="Bahrain">Bahrain</option>
    <option value="Bangladesh">Bangladesh</option>
    <option value="Barbados">Barbados</option>
    <option value="Belarus">Belarus</option>
    <option value="Belgium">Belgium</option>
    <option value="Belize">Belize</option>
    <option value="Benin">Benin</option>
    <option value="Bermuda">Bermuda</option>
    <option value="Bhutan">Bhutan</option>
    <option value="Bolivia">Bolivia</option>
    <option value="Bosnia&nbsp;and&nbsp;Herzegovina">Bosnia and Herzegovina</option>
    <option value="Botswana">Botswana</option>
    <option value="Bouvet&nbsp;Island">Bouvet Island</option>
    <option value="Brazil">Brazil</option>
    <option value="British&nbsp;Indian&nbsp;Ocean&nbsp;Territory">British Indian Ocean Territory</option>
    <option value="Brunei&nbsp;Darussalam">Brunei Darussalam</option>
    <option value="Bulgaria">Bulgaria</option>
    <option value="Burkina&nbsp;Faso">Burkina Faso</option>
    <option value="Burundi">Burundi</option>
    <option value="Cambodia">Cambodia</option>
    <option value="Cameroon">Cameroon</option>
    <option value="Canada">Canada</option>
    <option value="Cape&nbsp;Verde">Cape Verde</option>
    <option value="Cayman&nbsp;Islands">Cayman Islands</option>
    <option value="Central&nbsp;African&nbsp;Republic">Central African Republic</option>
    <option value="Chad">Chad</option>
    <option value="Chile">Chile</option>
    <option value="China">China</option>
    <option value="Christmas&nbsp;Island">Christmas Island</option>
    <option value="Cocos&nbsp;(Keeling)&nbsp;Islands">Cocos (Keeling) Islands</option>
    <option value="Colombia">Colombia</option>
    <option value="Comoros">Comoros</option>
    <option value="Congo">Congo</option>
    <option value="Congo,&nbsp;The&nbsp;Democratic&nbsp;Republic&nbsp;of&nbsp;the">Congo, The Democratic Republic of the</option>
    <option value="Cook&nbsp;Islands">Cook Islands</option>
    <option value="Costa&nbsp;Rica">Costa Rica</option>
    <option value="C&#244;te&nbsp;d'Ivoire">C&#244;te d'Ivoire</option>
    <option value="Croatia">Croatia</option>
    <option value="Cuba">Cuba</option>
    <option value="Cyprus">Cyprus</option>
    <option value="Czech&nbsp;Republic">Czech Republic</option>
    <option value="Denmark">Denmark</option>
    <option value="Djibouti">Djibouti</option>
    <option value="Dominica">Dominica</option>
    <option value="Dominican&nbsp;Republic">Dominican Republic</option>
    <option value="Ecuador">Ecuador</option>
    <option value="Egypt">Egypt</option>
    <option value="El&nbsp;Salvador">El Salvador</option>
    <option value="Equatorial&nbsp;Guinea">Equatorial Guinea</option>
    <option value="Eritrea">Eritrea</option>
    <option value="Estonia">Estonia</option>
    <option value="Ethiopia">Ethiopia</option>
    <option value="Falkland&nbsp;Islands&nbsp;(Malvinas)">Falkland Islands (Malvinas)</option>
    <option value="Faroe&nbsp;Islands">Faroe Islands</option>
    <option value="Fiji">Fiji</option>
    <option value="Finland">Finland</option>
    <option value="France">France</option>
    <option value="French&nbsp;Guiana">French Guiana</option>
    <option value="French&nbsp;Polynesia">French Polynesia</option>
    <option value="French&nbsp;Southern&nbsp;Territories">French Southern Territories</option>
    <option value="Gabon">Gabon</option>
    <option value="Gambia">Gambia</option>
    <option value="Georgia">Georgia</option>
    <option value="Germany">Germany</option>
    <option value="Ghana">Ghana</option>
    <option value="Gibraltar">Gibraltar</option>
    <option value="Greece">Greece</option>
    <option value="Greenland">Greenland</option>
    <option value="Grenada">Grenada</option>
    <option value="Guadeloupe">Guadeloupe</option>
    <option value="Guam">Guam</option>
    <option value="Guatemala">Guatemala</option>
    <option value="Guinea">Guinea</option>
    <option value="Guinea-Bissau">Guinea-Bissau</option>
    <option value="Guyana">Guyana</option>
    <option value="Haiti">Haiti</option>
    <option value="Heard&nbsp;Island&nbsp;and&nbsp;McDonald&nbsp;Islands">Heard Island and McDonald Islands</option>
    <option value="Holy&nbsp;See&nbsp;(Vatican&nbsp;City&nbsp;State)">Holy See (Vatican City State)</option>
    <option value="Honduras">Honduras</option>
    <option value="Hong&nbsp;Kong">Hong Kong</option>
    <option value="Hungary">Hungary</option>
    <option value="Iceland">Iceland</option>
    <option value="India">India</option>
    <option value="Indonesia">Indonesia</option>
    <option value="Iran,&nbsp;Islamic&nbsp;Republic&nbsp;of">Iran, Islamic Republic of</option>
    <option value="Iraq">Iraq</option>
    <option value="Ireland">Ireland</option>
    <option value="Israel">Israel</option>
    <option value="Italy">Italy</option>
    <option value="Jamaica">Jamaica</option>
    <option value="Japan">Japan</option>
    <option value="Jordan">Jordan</option>
    <option value="Kazakhstan">Kazakhstan</option>
    <option value="Kenya">Kenya</option>
    <option value="Kiribati">Kiribati</option>
    <option value="Korea,&nbsp;Democratic&nbsp;People's&nbsp;Republic&nbsp;of">Korea, Democratic People's Republic of</option>
    <option value="Korea,&nbsp;Republic&nbsp;of">Korea, Republic of</option>
    <option value="Kuwait">Kuwait</option>
    <option value="Kyrgyzstan">Kyrgyzstan</option>
    <option value="Lao&nbsp;People's&nbsp;Democratic&nbsp;Republic">Lao People's Democratic Republic</option>
    <option value="Latvia">Latvia</option>
    <option value="Lebanon">Lebanon</option>
    <option value="Lesotho">Lesotho</option>
    <option value="Liberia">Liberia</option>
    <option value="Libyan&nbsp;Arab&nbsp;Jamahiriya">Libyan Arab Jamahiriya</option>
    <option value="Liechtenstein">Liechtenstein</option>
    <option value="Lithuania">Lithuania</option>
    <option value="Luxembourg">Luxembourg</option>
    <option value="Macau">Macau</option>
    <option value="Macedonia">Macedonia</option>
    <option value="Madagascar">Madagascar</option>
    <option value="Malawi">Malawi</option>
    <option value="Malaysia">Malaysia</option>
    <option value="Maldives">Maldives</option>
    <option value="Mali">Mali</option>
    <option value="Malta">Malta</option>
    <option value="Marshall&nbsp;Islands">Marshall Islands</option>
    <option value="Martinique">Martinique</option>
    <option value="Mauritania">Mauritania</option>
    <option value="Mauritius">Mauritius</option>
    <option value="Mayotte">Mayotte</option>
    <option value="Mexico">Mexico</option>
    <option value="Micronesia,&nbsp;Federated&nbsp;States&nbsp;of">Micronesia, Federated States of</option>
    <option value="Moldova,&nbsp;Republic&nbsp;of">Moldova, Republic of</option>
    <option value="Monaco">Monaco</option>
    <option value="Mongolia">Mongolia</option>
    <option value="Montserrat">Montserrat</option>
    <option value="Morocco">Morocco</option>
    <option value="Mozambique">Mozambique</option>
    <option value="Myanmar">Myanmar</option>
    <option value="Namibia">Namibia</option>
    <option value="Nauru">Nauru</option>
    <option value="Nepal">Nepal</option>
    <option value="Netherlands">Netherlands</option>
    <option value="Netherlands&nbsp;Antilles">Netherlands Antilles</option>
    <option value="New&nbsp;Caledonia">New Caledonia</option>
    <option value="New&nbsp;Zealand">New Zealand</option>
    <option value="Nicaragua">Nicaragua</option>
    <option value="Niger">Niger</option>
    <option value="Nigeria">Nigeria</option>
    <option value="Niue">Niue</option>
    <option value="Norfolk&nbsp;Island">Norfolk Island</option>
    <option value="Northern&nbsp;Mariana&nbsp;Islands">Northern Mariana Islands</option>
    <option value="Norway">Norway</option>
    <option value="Oman">Oman</option>
    <option value="Pakistan">Pakistan</option>
    <option value="Palau">Palau</option>
    <option value="Palestinian&nbsp;Territory,&nbsp;Occupied">Palestinian Territory, Occupied</option>
    <option value="Panama">Panama</option>
    <option value="Papua&nbsp;New&nbsp;Guinea">Papua New Guinea</option>
    <option value="Paraguay">Paraguay</option>
    <option value="Peru">Peru</option>
    <option value="Philippines">Philippines</option>
    <option value="Pitcairn">Pitcairn</option>
    <option value="Poland">Poland</option>
    <option value="Portugal">Portugal</option>
    <option value="Puerto&nbsp;Rico">Puerto Rico</option>
    <option value="Qatar">Qatar</option>
    <option value="R&#233;union">R&#233;union</option>
    <option value="Romania">Romania</option>
    <option value="Russian&nbsp;Federation">Russian Federation</option>
    <option value="Rwanda">Rwanda</option>
    <option value="Saint&nbsp;Helena">Saint Helena</option>
    <option value="Saint&nbsp;Kitts&nbsp;and&nbsp;Nevis">Saint Kitts and Nevis</option>
    <option value="Saint&nbsp;Lucia">Saint Lucia</option>
    <option value="Saint&nbsp;Pierre&nbsp;and&nbsp;Miquelon">Saint Pierre and Miquelon</option>
    <option value="Saint&nbsp;Vincent&nbsp;and&nbsp;the&nbsp;Grenadines">Saint Vincent and the Grenadines</option>
    <option value="Samoa">Samoa</option>
    <option value="San&nbsp;Marino">San Marino</option>
    <option value="Sao&nbsp;Tome&nbsp;and&nbsp;Principe">Sao Tome and Principe</option>
    <option value="Saudi&nbsp;Arabia">Saudi Arabia</option>
    <option value="Senegal">Senegal</option>
    <option value="Serbia&nbsp;and&nbsp;Montenegro">Serbia and Montenegro</option>
    <option value="Seychelles">Seychelles</option>
    <option value="Sierra&nbsp;Leone">Sierra Leone</option>
    <option value="Singapore">Singapore</option>
    <option value="Slovakia">Slovakia</option>
    <option value="Slovenia">Slovenia</option>
    <option value="Solomon&nbsp;Islands">Solomon Islands</option>
    <option value="Somalia">Somalia</option>
    <option value="South&nbsp;Africa">South Africa</option>
    <option value="Spain">Spain</option>
    <option value="Sri&nbsp;Lanka">Sri Lanka</option>
    <option value="Sudan">Sudan</option>
    <option value="Suriname">Suriname</option>
    <option value="Svalbard&nbsp;and&nbsp;Jan&nbsp;Mayen">Svalbard and Jan Mayen</option>
    <option value="Swaziland">Swaziland</option>
    <option value="Sweden">Sweden</option>
    <option value="Switzerland">Switzerland</option>
    <option value="Syrian&nbsp;Arab&nbsp;Republic">Syrian Arab Republic</option>
    <option value="Taiwan,&nbsp;Province&nbsp;of&nbsp;China">Taiwan, Province of China</option>
    <option value="Tajikistan">Tajikistan</option>
    <option value="Tanzania,&nbsp;United&nbsp;Republic&nbsp;of">Tanzania, United Republic of</option>
    <option value="Thailand">Thailand</option>
    <option value="Timor-Leste">Timor-Leste</option>
    <option value="Togo">Togo</option>
    <option value="Tokelau">Tokelau</option>
    <option value="Tonga">Tonga</option>
    <option value="Trinidad&nbsp;and&nbsp;Tobago">Trinidad and Tobago</option>
    <option value="Tunisia">Tunisia</option>
    <option value="Turkey">Turkey</option>
    <option value="Turkmenistan">Turkmenistan</option>
    <option value="Turks&nbsp;and&nbsp;Caicos&nbsp;Islands">Turks and Caicos Islands</option>
    <option value="Tuvalu">Tuvalu</option>
    <option value="Uganda">Uganda</option>
    <option value="Ukraine">Ukraine</option>
    <option value="United&nbsp;Arab&nbsp;Emirates">United Arab Emirates</option>
    <option value="United&nbsp;Kingdom">United Kingdom</option>
    <option value="United&nbsp;States">United States</option>
    <option value="United&nbsp;States&nbsp;Minor&nbsp;Outlying&nbsp;Islands">United States Minor Outlying Islands</option>
    <option value="Uruguay">Uruguay</option>
    <option value="Uzbekistan">Uzbekistan</option>
    <option value="Vanuatu">Vanuatu</option>
    <option value="Venezuela">Venezuela</option>
    <option value="Viet&nbsp;Nam">Viet Nam</option>
    <option value="Virgin&nbsp;Islands,&nbsp;British">Virgin Islands, British</option>
    <option value="Virgin&nbsp;Islands,&nbsp;U.S.">Virgin Islands, U.S.</option>
    <option value="Wallis&nbsp;and&nbsp;Futuna">Wallis and Futuna</option>
    <option value="Western&nbsp;Sahara">Western Sahara</option>
    <option value="Yemen">Yemen</option>
    <option value="Zambia">Zambia</option>
    <option value="Zimbabwe">Zimbabwe</option>
        </SELECT>
          <br />
          <br />
          Username Colour:<br />
          <select name="usercolour">
        <OPTION value="#000000">Black</OPTION>
        <OPTION value="#FF0000">Red</OPTION>
        <OPTION value="#00FF00">Green</OPTION>
        <OPTION value="#0000FF">Blue</OPTION>
        <OPTION value="#FFFF00">Yellow</OPTION>
        <OPTION value="#FF00FF">Pink</OPTION>
        <OPTION value="#C0C0C0">Grey</OPTION>
        <OPTION value="#FF6600">Orange</OPTION>
        <OPTION value="#990066">Purple</OPTION>
        <OPTION value="#4682B4">Steelblue</OPTION>
        <OPTION value="#DDA0DD">Plum</OPTION>
        <OPTION value="#AFEEEE">Paleturquoise</OPTION>
        <OPTION value="#D87093">Palevioletred</OPTION>
        <OPTION value="#191970">Midnightblue</OPTION>
        <OPTION value="#8A2BE2">Blue Violet</OPTION>
        <OPTION value="#7FFF00">Chartreuse</OPTION>
        <OPTION value="#DC143C">Crimson</OPTION>
        <OPTION value="#008B8B">Dark Cyan</OPTION>
        <OPTION value="#8B0000">Dark Red</OPTION>
        <OPTION value="#FF1493">Deep Pink</OPTION>
          </select>
          <br />
          <br />
          Gender:<br />
         <SELECT name="sexmalefemale">
         <OPTION value="Boy">Boy</OPTION>
         <OPTION value="Girl">Girl</OPTION>
         </SELECT>
          <br />
          <br />
    About Yourself:<br />
        <textarea name="abouturself" cols=30 rows=5 wrap=physical></textarea>
          <br />
          <br />
          <input type="hidden" name="random" value="<? echo("$rand");?>" />
          Special word<br />
          <input type="text" name="word" />
          <input type="hidden" name="dateofjoin" value="<? print(Date("F d, Y")); ?>" />
          <input type="hidden" name="msg" value="Welcome" />
          <br />
          <br />
          Enter the number shown below<br />
          <strong><? echo("$rand");?></strong><br />
          <input type="text" name="rand" />
    <input type="hidden" name="lastedited" value="Registered an account @ <?php 

/** 
 * Just add this in your page where you 
 * want the date/time to appear 
 * 
 * For more configuration options look 
 * in the PHP manual at http://uk2.php.net/date 
 */ 

// Displays in the format Saturday, November 22, 2003 11.38 
echo date("l, F d, Y h:i" ,time()); 

?> " />
          <br />
          <br />
          <input type="submit" value="Register" />
            </div>
      </form>
      <? 
      }
      if($act==register)
      {
          $username = clean($_POST[username]);
          $username = str_replace (" ", "", $username);
          $msg = clean($_POST[msg]);
          $subject = "Welcome";
          $sendto = $username;
          $sentfrom = "admin";
          $user = "$username";
          $reason = "joining the site";
          $badge = "member.png";
          $display = "1";
          $privmsg = $msg;
      $password2 = clean($_POST[password]);
      $password = md5($_POST[password]);
      $email = clean($_POST[email]);
      $countrywhere = clean($_POST[countrywhere]);
      $avator = clean($_POST[avator]);
      $sexmalefemale = clean($_POST[sexmalefemale]);
      $usercolour = clean($_POST[usercolour]);
      $abouturself = clean($_POST[abouturself]);
      $rand = clean($_POST[rand]);
      $lastedited = clean($_POST[lastedited]);
      $random = $_POST[random];
      $word = clean($_POST[word]);
      $dateofjoin = clean($_POST[dateofjoin]);
      $check = mysql_query("select * from usr_users where username = '$username'");
      $check2 = mysql_num_rows($check);
      if($check2==0)
      {
      if($username!="" && $password!="")
      {
      if($rand==$random)
      {
          $qry = mysql_query("insert into usr_pm(subject, sendto, sentfrom, privmsg) values('$subject', '$sendto', '$sentfrom', '$privmsg')");
          $result = @mysql_query($qry);
      $gry2 = mysql_query("insert into usr_users(username, password, word, dateofjoin, email, countrywhere, avator, sexmalefemale, usercolour, abouturself, lastedited) values('$username', '$password', '$word', '$dateofjoin', '$email', '$countrywhere', '$avator', '$sexmalefemale', '$usercolour', '$abouturself', '$lastedited')");
          $result = @mysql_query($qry2);
          $qry3 = mysql_query("insert into usr_badge(user, reason, badge, display) values('$user', '$reason', '$badge', '$display')");
          $result = @mysql_query($qry3);
      echo("You are now signed up to our site!");
      if($content[emailvert]==1)
      {
      $emailbody = "Thanks for registering at the $content[site] usersystem! \n \n We'd like to take this chance to confirm all of your details, just so you know how to log in and get the most out of your experience! \n \n --- \n username: $username \n Password: $password2 \n Your secret code: $sec \n Your secret word: $word \n \n -- \n \n Thanks, \n $content[site] Management --";
     $mail =  mail($email,"Welcome to the $content[site] usersystem!", $emailbody, "From: <$content[email]>");
     if(!$mail)
     echo("<br />Could not send the email at this time, please check you filled out the previous page completely and try again..");
     else echo("<br /></br></br><b>Please go to the email you provided to us and confirm your account, after 1 week we will suspend your account if you do not confirm.</b>");
      }
      }
      else echo("The number you entered did not match that displayed!");
      }
      else echo("You have not entered filled out all the required fields, you need to do so in order to continue..");
      }
      else
      echo("username is already in use!");
      }
      ?>
      <? }
      else echo("Register disabled"); ?> 
```

clean.php （意味着去除空格）

```
<?php
function clean($str)
{
$cleaned = strip_tags(htmlspecialchars(addslashes(stripslashes( $str ))));

return $cleaned;
}
?> 
```

功能

```
/*
Clean Variables
*/
function clean($str)
{
$cleaned = strip_tags(htmlspecialchars(addslashes(stripslashes( $str ))));
return $cleaned;
}
/*
End Function
*/ 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T23:37:43.813

```
$str = str_replace(" ", "", $str); 
```

将删除所有空格。

此外，我的 PHP 有点生锈，但没有`stripslashes`做相反的`addslashes`事情，因此做一个然后另一个什么都不做？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T23:49:11.333

所以你正在寻找的是“表单验证”。

您不希望接受输入，除非它确认您对什么是有效的概念。

您有两个级别可以检查验证：一个是客户端（通过 javascript），另一个是服务器端。

在客户端，您可以使用 jQuery 表单验证插件之类的东西：

[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

在服务器端，您可以使用 substr_count() 函数。

[http://www.php.net/manual/en/function.substr-count.php](http://www.php.net/manual/en/function.substr-count.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T23:52:17.957

执行 str_replace(' ', '', $string) 这将采用 'user name' 并返回用户名。除非您不希望用户这样做，否则最容易在 php 中执行此操作。然后使用javascript。

```
function checkform(){
  var username = $('form[name = username]').val()
  var re =  /\s/g;
  if(re.test(username)){
   alert("You can't have a space") 
   return false;
   }
  } 
```

解释一下：首先我们获取用户名输入值并将其放入变量中。然后我们测试用户名，看它是否包含空格/s。如果它确实有空间，那么我们会提醒他们。var re 使用 test 方法检查字符串中的空格。Return False 停止提交表单。你看起来像

```
<form onsubmit="checkfrom()"> 
```

这是否有助于解释它。我是凭记忆做的，所以可能会关闭。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-19T05:01:48.173

对于空格，使用 str_replace

```
$string = str_replace(' ', '', $string); 
```

对于所有空白，使用 preg_replace

```
$string = preg_replace('/\s+/', '', $string); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T23:38:38.547

功能[修剪](http://php.net/manual/en/function.trim.php)应该工作。:)

# bash - 使用 bash 在 gedit 中执行一行代码

> ID：11217413
> 
> 赞同：0
> 
> 时间：2012-06-26T23:35:20.373
> 
> 标签：bash

我正在编写一个脚本来完成我正在编写的这个 GUI。

例如，您将如何执行第 3 行的变量？

例如：

```
var1='1'
var2='2'
var3='3' 
```

从终端，我想在我编写的脚本中执行第 3 行。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:42:39.913

假设你的脚本是`myscript.sh`

```
eval `head -n3 myscript.sh | tail -n1` 
```

**编辑**

按要求解释：

*   `head -n 3 myscript.sh`将检索脚本的前 3 行
*   前三行通过管道（通过`|`运算符）传送到`tail -n1`，这将只返回输入末尾的 1 行，因此您将获得前 3 行的最后一行 - 这是第 3 行
*   `eval()`将简单地运行生成的字符串，就好像它是在脚本中编写的一样 - 所以它运行第三行
*   反引号将在`eval()`运行其他命令后运行它们的**输出**

# iphone - 我在从目标 c 中的 sqlite 文件读取数据时遇到问题

> ID：11217415
> 
> 赞同：0
> 
> 时间：2012-06-26T23:35:34.860
> 
> 标签：iphone, objective-c, sqlite

我一直试图解决这个问题，问题似乎是以下代码底部的 if 语句失败：

```
sqlite3 *database;
if (sqlite3_open([[self dataFilePath] UTF8String], &database)
    != SQLITE_OK) { 

    sqlite3_close(database);
    NSAssert(0, @"Failed to open database");
}
else 
    NSLog(@"Database opened successfully");

//CREATE THE TABLE HERE IF NEEDED

NSString *createSQL = @"CREATE TABLE IF NOT EXISTS workouts "" (ROW INTEGER PRIMARY KEY, FIELD_DATA TEXT);";
char *errorMsg;
if (sqlite3_exec(database, [createSQL UTF8String], NULL, NULL, &errorMsg) != SQLITE_OK) { sqlite3_close(database);
    NSAssert(0, @"Error creating table: %s", errorMsg);
}

sqlite3_stmt *statement;

if (sqlite3_prepare_v2(database, [sqlStatement UTF8String],
                       -1, &statement, nil) == SQLITE_OK) 
```

可能是什么问题呢？我知道还有很多其他因素涉及，但任何事情都会有所帮助。只需询问您是否需要任何其他信息。感谢 StackOverflow！

编辑：我收到的错误是：没有这样的列：columnName

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T03:52:31.417

老实说，除非您有充分的理由这样做，否则我不会重新创建 Core Data 框架的任何部分。本教程可能会帮助您开始使用 Core Data 编程 [http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)

这是核心数据的参考页面： [https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdBasics.html#//apple_ref/doc/uid/TP40001650](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdBasics.html#//apple_ref/doc/uid/TP40001650)

# php - Doctrine2 抛出“身份图中没有实体”

> ID：11217416
> 
> 赞同：0
> 
> 时间：2012-06-26T23:35:37.347
> 
> 标签：php, doctrine-orm

我从数据库中拉出一个基本实体，将其克隆到循环中以创建新实体，更改一些细节，然后持久化实体。

出于某种原因，这是`No Entity in Identity Map`在调用.`addToIdentityMap``UnitOfWork``EntityManager->flush()`

我也尝试过创建一个实体并手动将所有属性设置为另一个，没有区别。

我对教义内部不是特别熟悉，这里出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-19T13:49:19.203

尝试向`__clone`实体类添加一个方法来清除标识符，以便 Doctrine 将其识别为新实体：

```
public function __clone()
{
    if ($this->id) {
        $this->id = null;
    }
} 
```

请注意，该方法是[根据 Doctrine 的文档建模的，用于安全实施`__clone`](http://doctrine-orm.readthedocs.org/en/latest/cookbook/implementing-wakeup-or-clone.html#safely-implementing-clone)

# c# - Windows 服务 / 无法为堆栈创建新的保护页面

> ID：11217419
> 
> 赞同：18
> 
> 时间：2012-06-26T23:36:00.773
> 
> 标签：c#, debugging, windows-services, clr, stack-overflow

我有一个 Windows 服务，它每分钟做一些密集的工作（实际上它每次都会启动一个新线程，在这个线程中它通过 http 同步到不同的系统）。问题是，*几天后*它突然停止而没有错误消息。

我有 NLog 并且我已经注册了`AppDomain.CurrentDomain.UnhandledException`. 文本文件日志中的最后一个条目只是一个正常条目，没有任何问题。查看事件日志，我在应用程序日志中也找不到任何消息，但是，系统日志中有两个条目。

一个基本上说该服务已意外终止。而已。第二个事件（与第一个事件同时）说：“......无法创建堆栈的新保护页面......”

根据我的阅读，这可能是堆栈溢出异常。我不解析任何 XML，也不做递归工作。我使用 Gate、Nancy 和 SignalR 托管一个网络服务器，并让 RavenDB 在嵌入式模式下运行。每分钟都会使用 .NET 4.0 中的 Taskfactory 启动一个新任务，并且我还有一个 ContinueWith ，我会在其中重新启动一个`System.Timers.Timer`以在一分钟内再次触发。

我怎样才能开始调查这个问题？这种错误的可能原因是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-27T00:29:56.833

根据您提供的信息，我至少会执行以下操作：

1.  请特别注意任何第三方呼叫，并围绕这些点添加额外的信息记录。
2.  在某些情况下对`AppDomain.CurrentDomain.UnhandledException`您无济于事-`StackOverflowException`成为其中之一。我相信 CLR 在这种情况下只会给你一个字符串而不是堆栈跟踪。
3.  在引入多个线程的区域周围要格外注意。

一个经常被忽视的例子`StackOverflowException`是：

```
private string myString;
public string MyString { get { return MyString; } }  //should be myString 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-06T08:41:47.027

我在一台特定的计算机上得到了这个，并将其跟踪到从初始化程序中引用自身的 ac# 对象

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-08T10:42:05.077

就像“物有所值”一样 - 在我的情况下，当代码尝试写入 Windows 事件日志并且交互式用户没有足够的权限时报告了此错误。这是一个小型控制台应用程序，可将异常记录到文本文件和事件日志（如果需要）。在异常情况下，正在更新文本文件，但随后引发了此错误，并且错误处理未捕获到该错误。禁用事件日志记录会停止发生的错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-04T06:59:23.813

以防万一其他人遇到同样的问题，在我的情况下，我发现我的 Windows 服务意外地陷入了无限的递归循环。因此，如果其他人有这个问题，请考虑可能导致巨大递归循环的方法调用。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-09-30T12:36:53.507

我认为为什么你们都被难住了，因为这可能是 SSD 硬件故障。我大约每 3-5 小时玩一次游戏时一直收到此错误，并且我的计算机页面文件以某种方式失败。我知道它不是 RAM，因为我更换了我的 CPU/RAM/MOBO 组合试图解决这个问题。它不是编程，因为不同的游戏和不同的应用程序都会同时失败，除非它的窗口损坏？

我可能是错的，但只是一个想法。

我在突袭中有两个三星evo

# grails - Grails 类路径问题：在 Grails 发行版中将 Grails 与较新版本的库一起使用

> ID：11217420
> 
> 赞同：0
> 
> 时间：2012-06-26T23:36:19.467
> 
> 标签：grails, maven, classpath

Grails 2.0.x 附带了大约一百个第三方 JAR——ant、AspectJ、来自 Apache Commons 的各种东西，等等。这……好，我想？

但是我想使用其中一些 JAR 的较新版本，当我尝试时，我会遇到各种兼容性问题——例如，如果我使用 1.2 中新的 Hamcrest 类编写测试，我可以，但在运行时我得到NoSuchMethodErrors 因为 1.1 Hamcrest 核心在类路径中领先于它。

我当然可以开始弄乱 grails-2.0.x/lib 目录，但这似乎是个坏主意，也意味着绕过指定依赖项的正常 Ivy / Maven 方式。（哦，额外的皱纹：我在我的 Grails 应用程序中使用 Maven，以便与我们其他代码库的互操作性。）

那么我是否坚持使用这些第三方 JAR 的 Grails 分发版本，或者有什么办法可以解决这个问题？

# objective-c - 按字典值将 NSDictionary 键排序为 NSArray

> ID：11217421
> 
> 赞同：8
> 
> 时间：2012-06-26T23:36:21.683
> 
> 标签：objective-c, ios

我已经看到很多按键对字典进行排序，然后获取值的示例，但是我将如何按值排序。

例如

```
{
blue:12;
red:50;
white:44;
} 
```

我希望这些按数字降序排序：

```
{
red:50;
white:44;
blue:12
} 
```

我尝试获取一个排序的 nsarray 键，我可以从中创建有序的 nsarray，但结果似乎仍然是无序的。

```
 NSArray* sortedKeys = [stats keysSortedByValueUsingComparator:^(id first, id second) {

    if ( first < second ) {
        return (NSComparisonResult)NSOrderedAscending;
    } else if ( first > second ) {
        return (NSComparisonResult)NSOrderedDescending;
    } else {
        return (NSComparisonResult)NSOrderedSame;
    }

  }]; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T23:55:15.277

从概念上讲，NSDictionary 是未排序的，正如 C0deH4cker 已经说过的那样。

如果您需要订单，您可以将键写入数组（但在从字典中删除键后，数组保留它可能会遇到问题，但是有教程如何[使用CFArray](https://stackoverflow.com/questions/4692161/non-retaining-array-for-delegates)）或[NSSortedSet](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSOrderedSet_Class/Reference/Reference.html)。

或者你可以继承 NSDictionary——这不是很简单，因为 NSDictionary 是一个类集群。但幸运的是，Matt 在他精彩的博文[“OrderedDictionary: Subclassing a Cocoa class cluster”](http://cocoawithlove.com/2008/12/ordereddictionary-subclassing-cocoa.html)中展示了如何使用一个小技巧，即覆盖的*has-a*关系。

* * *

请注意，您的代码

```
 NSArray* sortedKeys = [stats keysSortedByValueUsingComparator:^(id first, id second) {

    if ( first < second ) {
        return (NSComparisonResult)NSOrderedAscending;
    } else if ( first > second ) {
        return (NSComparisonResult)NSOrderedDescending;
    } else {
        return (NSComparisonResult)NSOrderedSame;
    }

  }]; 
```

当您将 C 运算符应用于对象时，不会做您希望它做的事情。现在他们的指针将被排序。

它应该是这样的

```
 NSArray* sortedKeys = [stats keysSortedByValueUsingComparator:^(id first, id second) {
    return [first compare:second];
  }]; 
```

或者，如果您想订购标量，即作为对象的包装器（即 NSNumber）

```
 NSArray* sortedKeys = [stats keysSortedByValueUsingComparator:^(id first, id second) { 
    if ([first integerValue] > [second integerValue]) 
        return (NSComparisonResult)NSOrderedDescending;

    if ([first integerValue] < [second integerValue])
        return (NSComparisonResult)NSOrderedAscending;
    return (NSComparisonResult)NSOrderedSame;
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T23:39:12.087

根据定义，字典是无序的。使用哈希表访问它们以提高速度。您能够“订购”它的唯一方法是选择不同的数据类型。bas 数据类型取决于您的意图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-18T06:28:30.817

或者您可以直接对您的 NSString 键进行排序，例如：

```
NSArray* sortedKeys = [sortedKeys sortedArrayUsingComparator:^NSComparisonResult(id _Nonnull obj1, id  _Nonnull obj2) {
        NSNumber *A = @([obj1 LongValue]);
        NSNumber *B = @([obj2 LongValue]);

        return [A compare:B];
    } ]; 
```

# java - Android 消息/处理程序机制 - 安全吗？

> ID：11217425
> 
> 赞同：0
> 
> 时间：2012-06-26T23:36:36.830
> 
> 标签：java, android, handler, messaging

我正在使用蓝牙进行数据通信，但这只是一个说明，没有直接附加到我的问题上。远程设备每毫秒向我发送 5 到 10 个字节的数据包。我正在对它们进行分类并通过消息发送到主要活动。在发件人中：

```
Bundle bundle = new Bundle();
Message msg;
if(something)
{
    bundle.putSerializable("data", aObject);
    msg = myHandler.obtainMessage(1);
}
else
{
    bundle.putSerializable("data", bObject);
    msg = myHandler.obtainMessage(2);
}
msg.setData(bundle);
mHandler.sendMessage(msg); 
```

在处理程序中；

```
switch (msg.what)
{
    // aObject
    case 1:
        AObject aObject = (AObject) message.getData().get("data");
        break;
// bObject
    case 2:
        BObject bObject = (BObject) message.getData().get("data");
        break;
    ...//There are 15 cases like that
} 
```

一段时间后，我得到了 ClassCastException。*我仔细检查了*我发送的相关数据的正确值。我在想，当我在处理程序中处理消息时，它在发件人部分被覆盖了。因为 getMessage 从全局消息池中获取消息。因此，在检查 msg.what 之后，消息的数据部分在发件人中发生了更改，我得到了 ClassCastException。

我的问题是；我的想法是对的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T23:48:00.663

消息只有在调用了回收方法后才能被重用。这是在handleMessage 方法在其上运行之后由Handler/Looper 为您完成的。

# shopify - Shopify ajax api添加错误数量的项目

> ID：11217426
> 
> 赞同：1
> 
> 时间：2012-06-26T23:36:38.323
> 
> 标签：shopify

您可以查看我在[http://pagac-group2595.myshopify.com/collections/monday](http://pagac-group2595.myshopify.com/collections/monday)设置的测试商店（使用通行证“euthuy”登录）

我们正在尝试将 ajax api 与此处的说明 (http://wiki.shopify.com/Ajax_API#You.27re_building_a_quick_order_form.3F_Beware) 一起使用到 $.post() 东西。

如果你打开你的控制台，添加一些产品（页面上几乎所有产品都是 2.50 美元，供参考）并使用页面右上角的灰色“单击提交”按钮，你可以看到我正在注销所有的字段，它们似乎都是正确的，但是当我收到 xhr 请求时，我没有看到我认为我输入的内容。即使将项目留空，似乎总是至少有 1 个生日包，2 个 mooberry， 2 星期一偏头痛，至少有其他一切。（我从没想过我会抱怨太多纸杯蛋糕。）

当你评估 $('input[data-title="Mooberry"]').val(); 从控制台，您将获得预期的值（无论表单字段中的内容），但是当我提交它时，我收到回复说我提交了 2 个。

我不太确定我在这里做错了什么，数据似乎可以通过 js 很好地输入，但我得到的响应并不是我想输入的。

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:12:35.640

我不确定这里的根本问题是什么，但我通过添加一个检查大于零的数量的条件来解决它。

```
Shopify.queue = [];

jQuery('.quantity-field').each(function() {
    var quantity = parseInt(jQuery(this).val(), 10);
    //make sure that more than 0 items are requested
    if (quantity > 0) {
        Shopify.queue.push({
            variant_id: jQuery(this).attr('data-variant'),
            quantity_amount: quantity,
            cupcake_title: jQuery(this).attr('data-title')
        });
    }
}); 
```

无论如何，我很想知道为什么将 0 数量的物品添加到购物车会使其完全进入购物车。如果您在控制台中简单地执行以下操作，则此功能是可重现的：

```
Shopify.add(a_valid_variant_id, 0, foo); 
```

然后检查来自的响应`Shopify.cart();`

这是 Shopify 的错误吗？

# asp.net-mvc - 更新部署文件后 Antlr3.runtime 访问被拒绝

> ID：11217427
> 
> 赞同：5
> 
> 时间：2012-06-26T23:36:47.090
> 
> 标签：asp.net-mvc, nhibernate, antlr3

我们有一个 ASP.NET 应用程序，它是由一位前雇员编写的，到目前为止，我一直用胶带把它放在一起。该应用程序是使用 MVC、NHibernate 和其他一些进程编写的，我们的任何其他应用程序都没有使用这些进程，所以我对如何支持这些几乎没有什么想法。更复杂的是，最初的应用程序并不是为了正确部署而构建的，所以我不得不遵循该员工的一组说明，了解哪些文件要复制到哪里手动获取更新。`C:\Inetpub\wwwroot`我今天尝试进行更新，在复制任何内容之前备份应用程序所在的整个文件夹。复制文件后，我回收了应用程序池，这通常是应用更改所需的全部内容。相反，我收到了这个错误：

**无法加载文件或程序集“Antlr3.Runtime”或其依赖项之一。访问被拒绝。**

心烦意乱但并不太沮丧，我只是将我的备份文件夹复制回应用程序的文件夹，这应该已将其重置为我尝试更新之前的方式（因为我所做的只是复制一些文件）。但是，错误仍然存​​在。我尝试了多次重新复制，重新启动应用程序池，重新启动 IIS 等，但无济于事。到目前为止，我的 Google-fu 也被证明是无用的。如果您认为它会有所帮助（对我来说看起来没有用），我可以提供完整的堆栈跟踪。我真的束手无策，因为我可以告诉服务器上没有其他任何更改，并且文件夹已恢复到其原始状态（再次，据我所知......我还没有对文件进行比较100 多个文件中的每一个）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-11T18:26:37.500

如果您不想让网站在本地运行，这可能不适用，但是，这可能会帮助某人......

我已经将我的生产服务器的 web.config 带到了我的本地工作站。我忘记了生产配置使用模拟。原来是我的问题。该用户对我的本地工作站几乎没有权限。

如果您将模拟用户添加到本地计算机的 IIS_WPG 中，您可以避免对临时 ASP.NET 文件权限等进行奇怪的操作。

对这篇让我了解这个真相[的帖子](http://blogs.msdn.com/b/sayanghosh/archive/2007/04/21/solution-to-could-not-load-file-or-assembly-or-one-of-its-dependencies-access-is-denied.aspx)脱帽致敬。

我的解决方案是从我的本地 web.config 中删除模拟行

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-08T05:47:06.643

对我来说，问题出在配置文件上。

```
<identity impersonate="true" userName="abc" password="xyz"/> 
```

这里给出的凭证不正确，要么纠正，要么在不需要时注释掉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-18T16:11:42.457

您能否在 wwwroot 文件夹和“临时 ASP.NET 文件”C:\WINDOWS\Microsoft.NET\Framework\version\Temporary ASP.NET 中检查 IIS 用户的权限？如果权限正常，请尝试清除 asp.net 临时文件夹并再次运行您的应用程序（并再次检查此文件夹的权限）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-18T16:48:08.800

刚刚修好了这个。一个新的理由：

部署文件夹上的 ACL 变得混乱（例如，`bin`文件夹显示，在 Explorer 的安全高级视图中，不是从其父级继承权限，而是从其父级的父级继承权限）。

从站点的根目录快速重置权限并重新开始工作。

# theory - 图灵机不能接受的所有已知语言有哪些？

> ID：11217429
> 
> 赞同：9
> 
> 时间：2012-06-26T23:37:04.740
> 
> 标签：theory, turing-machines, computability

例如，不接受自己编码的图灵机的语言不能被任何图灵机接受[。](http://www.cs.odu.edu/~toida/nerzic/390teched/computability/unsolv-2.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T02:57:32.363

没有 TM 可以决定的语言有无数种。事实上，“大多数”语言是不可判定的；有许多可判定的语言，但有无数种语言（因此，有无数种不可判定的语言）。

赖斯定理允许你想出许多不可判定的语言示例。参见维基百科页面：[赖斯定理](http://en.wikipedia.org/wiki/Rice%27s_theorem)

基本上，如果您有一组非平凡的语言（即，有识别集合中语言的 TM，以及识别集合中不存在语言的 TM），则无法确定任意 TM 的语言是否在 S . 例如，令 S 为由空语言组成的集合。则无法确定任意 TM 是否接受空语言，即不接受字符串。想出任何非平凡的语言集，你就有了一种新的不可判定的语言（识别集中语言的 TM 的所有编码）。

# jquery - .load 不适用于 IE 和 Opera

> ID：11217432
> 
> 赞同：0
> 
> 时间：2012-06-26T23:37:16.250
> 
> 标签：jquery, jquery-dialog

我有这个代码：

```
function openFile(_title, file, id, _height, _width)
{
    $.fx.speeds._default = 500;
    $(document).ready(function()
    {
        if (_height == '')
            _height = 250;

        if (_width == '')
            _width = 500;

        var dialogOpts = {
            title: _title,
            modal: true,
            height: _height,
            width: _width,
            draggable: false,
            resizable: false,
            show: "puff",
            hide: "puff"
        };

        $("#dialog").dialog(dialogOpts);

        $("#dialog").load(file, [], function(){ $("#dialog").dialog("open"); });
    });
} 
```

它在 Firefox 和 Chrome 中运行良好，但在 Opera 和 IE 中都没有。弹出对话框，但其中没有内容。它只显示标题。

我尝试将最后一行更改为

```
$.get(file, function(result) {
    $('#dialog').append(result);
}); 
```

和

```
$("#dialog").load(file); 
```

但这也没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T23:46:31.223

尝试更改`$("#dialog").load(file, [], function(){ $("#dialog").dialog("open"); });`为：

```
$("#dialog").load(file, [], function(response, status, xhr){
    if(status!="error")
        $("#dialog").dialog(); 
}); 
```

对话框[的默认行为是打开。](http://jqueryui.com/demos/dialog/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T23:58:35.480

我之前遇到过这个问题`.load()`，所以现在我`.get()`改用了。

快速示例：

```
 $.get(url,function(data){  $("#dialog").html(data);  }); 
```

# javascript - 为什么我会收到错误消息 Object has no method in Javascript？

> ID：11217442
> 
> 赞同：1
> 
> 时间：2012-06-26T23:38:06.157
> 
> 标签：javascript

我有以下代码但是我得到了错误`Uncaught TypeError: Object #<addThis> has no method 'returnValue' (anonymous function)`

```
function addThis() {
    this.value1 = 1;
    this.value2 = 2;

    var returnValue = function () {
        return (this.value1 + this.value2);
    }
}

//Instantiate object and write response
var simpleObject = new addThis();
document.write(simpleObject.returnValue()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:39:51.303

当您使用`this.`它时，它在范围内是*公共的。*当你使用时`var`，它是*私有*的。由于您使用`var returnValue`了 ，因此它是私有的，因此不会公开使用。

事实上，我猜你想隐藏值并暴露吸气剂，所以扭转你所做的......

```
function addThis() {
    var value1 = 1;
    var value2 = 2;

    this.returnValue = function () {
        return (this.value1 + this.value2);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T23:43:15.300

`var`将声明一个函数局部变量。我认为您打算将其分配给`this.returnValue`：

```
function addThis() {
    this.value1 = 1;
    this.value2 = 2;

    **this.**returnValue = function () {
        return (this.value1 + this.value2);
    };
}

// Instantiate object and write response
var simpleObject = new addThis();
document.write(simpleObject.returnValue());
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T23:44:53.427

因为`returnValue`只是`addThis`函数中的一个局部变量，所以它不会出现在创建的对象中。

将函数分配给对象的属性：

```
function addThis() {
  this.value1 = 1;
  this.value2 = 2;

  this.returnValue = function() {
    return this.value1 + this.value2;
  };
} 
```

或者使用对象的原型：

```
function addThis() {
  this.value1 = 1;
  this.value2 = 2;
}

addThis.prototype.returnValue = function() {
  return this.value1 + this.value2;
}; 
```

# jquery - jQuery 无法使用 setTimeout 让动画函数循环/循环？推文代码

> ID：11217443
> 
> 赞同：0
> 
> 时间：2012-06-26T23:38:14.760
> 
> 标签：jquery

我正在创建一个水平代码来滚动最新的推文。[通过云海 jQuery 插件](http://tweet.seaofclouds.com/)输入推文。

我创建了一个动画函数，我试图使用`setTimeout(doTicker, 6000);`

谁能帮我看看我做错了什么？非常感谢帮助。

请参阅下面的代码...

还创造了小提琴。[http://jsfiddle.net/motocomdigital/h4x8D/1/](http://jsfiddle.net/motocomdigital/h4x8D/1/)

![在此处输入图像描述](../Images/e9bb980b92a5196ffb5797484ebeb8d8.png)

无法让 doTicker 循环/循环

```
$(".tweetbar-ticker").tweet({

    username: "twitter",
    join_text: "auto",
    count: 1,
    auto_join_text_default: "we said,",
    auto_join_text_ed: "we",
    auto_join_text_ing: "we were",
    auto_join_text_reply: "we replied to",
    auto_join_text_url: "we were checking out",
    loading_text: "loading tweets..."

}).bind("loaded", function() {

    $('.tweetbar-ticker ul li').clone().appendTo('.tweetbar-ticker ul');

    var $tweetBar = $('.tweetbar-ticker'),
        tweetLength = $('.tweetbar-ticker ul li').outerWidth(),
        $tweetAnchor = $('.tweetbar-ticker ul li a');

    $tweetBar.css({
        'width': tweetLength * 2 + 'px'
    });

    $tweetAnchor.attr({
        target: "_blank"
    });

    function doTicker() {

        $tweetBar.animate({
            'left': '-' + tweetLength + 'px'
        }, 20000, 'linear');

        setTimeout(doTicker, 6000);
    }

    doTicker();

});​ 
```

谢谢乔什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T23:49:48.687

你有正确的代码，但是一旦它已经动画到那个值，它就不会动画 -left，所以你必须重置左 css。

其次，最好将其称为回调而不是 setTimeout ...

检查：

[http://jsfiddle.net/h4x8D/2/](http://jsfiddle.net/h4x8D/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T23:48:21.443

您是否尝试在 6 秒超时的情况下递归调用 doTicker()？

如果是这样，为什么不使用`setInterval`呢？

那将是这样的：

```
function doTicker() {
    $tweetBar.animate({
        'left': '-' + tweetLength + 'px'
    }, 20000, 'linear');
}

setInterval(doTicker,6000); 
```

# c# - 在 C# 中共享一个数据库的多个应用程序

> ID：11217444
> 
> 赞同：1
> 
> 时间：2012-06-26T23:38:25.020
> 
> 标签：c#, database, dataset, share

我制作了一个应用程序（winform - C# - .Net 3.5）这个应用程序使用数据库，我想在局域网上安装这个应用程序并使所有应用程序共享一个数据库，我不知道该怎么做，所以你能帮我吗 ？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:48:12.733

查看[ClickOnce 部署](http://msdn.microsoft.com/en-us/library/wh45kb66%28v=vs.90%29.aspx)和[选择 ClickOnce 部署策略](http://msdn.microsoft.com/en-us/library/98bcab65-ab8b-4ed1-9adc-fdacf92b8106%28v=vs.90%29)

# android - 在 Android 中从 xml 调用小部件时的正确术语是什么？

> ID：11217454
> 
> 赞同：0
> 
> 时间：2012-06-26T23:39:24.753
> 
> 标签：android, android-inflate

我对 Android 还是很陌生，但我正在尝试通过使用 YouTube 上的教程来跟上进度。一群人抛出“膨胀 xml”这个短语。我也开始使用这句话，感觉好像我做得不对。

我唯一一次说“膨胀 xml”是在告诉某人编写代码以在 java 代码中使用 xml 中的小部件时。

因此，如果我在某人的布局上看到一个按钮，其 id 为`button01`，我告诉他们“膨胀 xml”，我希望`Button mybutton = (Button) findViewById(R.id.button01);`

这是我的错吗？

**编辑：** 似乎这不是正确的短语。一个存在吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T00:24:11.003

“膨胀”布局是指让 Android 框架将 XML 格式的布局转换为与布局中不同视图对应的对象的过程。

要“膨胀”您需要的布局：

*   XML 格式的布局

    资源/布局/main.xml

*   访问充气机对象

    LayoutInflater inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);

然后你需要在布局上运行通货膨胀

```
 View view = inflator.inflate(R.layout.main) 
```

之后，您可以使用“findViewById”访问对象

```
 Button mybutton = (Button) view.findViewById(R.id.button01); 
```

Activity 类提供了一个辅助方法，它既可以获取充气机又可以充气布局

```
 setContentView(R.layout.main) 
```

使用“setContentView”方法时，活动设置一个默认视图，该视图在调用“findViewById”时使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T23:42:52.163

有点。当有人说要扩充布局（或者如您所说，扩充 xml）时，通常会想到的代码如下：

```
View view = getLayoutInflater().inflate(R.layout.mylayout, null); 
```

获得充气机的另一种方法是：

```
LayoutInflater inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
```

然后你会继续

```
Button mybutton = (Button) view.findViewById(R.id.button01); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T23:42:01.897

当您使用 Button mybutton = (Button) findViewById(R.id.button01); 时，您基本上是将您在代码中创建的按钮转换为您在 xml 中定义的按钮。

我真的不知道“膨胀”是否是正确的术语。我认为这是一种将您在 xml 布局中放置的内容与您在 java 代码中定义的功能联系起来的方法。

# c++ - 使用模板规范选择合适的类型

> ID：11217457
> 
> 赞同：2
> 
> 时间：2012-06-26T23:39:35.177
> 
> 标签：c++, templates

这是模板规范化的代码：

```
template <int i>
struct userInput{};

template <>
struct userInput<1>
{
typedef int typeName;
};

template <>
struct userInput<2>
{
typedef double typeName;
}; 
```

我想根据用户输入选择合适的模板：

```
int i;
std::cin>>i;
userInput<i>::typeName ty; 
```

但是编译器对我不满意，它需要将一个常量值传递给模板参数。所以我这样做了：

```
int i;
std::cin>>i;    
const int p = i;
userInput<p>::typeName ty; 
```

但是，有错误：模板参数'i'：'num'：局部变量不能用作非类型参数。任何人都可以帮助我吗？我会很感激的！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T23:43:29.520

非类型模板参数需要常量编译时表达式，因为它们在编译期间被实例化：

```
const int x = 1;
int y = 1;
userInput<x>::typeName a; // valid
userInput<1>::typeName a; // valid
userInput<y>::typeName b; // invalid, what should be instantiated? 
```

没有办法实现您想要做的事情，因为`p`常量将在运行时初始化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T00:40:08.257

您必须`switch`在输入中找到要馈送到模板的常量值。

```
template <int i>
void foo () {
    typename userInput<i>::typeName ty = 1;
    std::cout << ty/2 << std::endl;
}

int i;
std::cin >> i;
switch (i) {
case 1:  foo<1>(); break;
case 2:  foo<2>(); break;
default: std::cerr << "invalid type: " << i << std::endl;
} 
```

因此，如果输入为`1`，则输出为`0`。如果输入为`2`，则输出为`0.5`。对于其他人，会出现错误消息。

`foo`中的代码和您尝试编写的代码之间的区别在于`foo<1>`和`foo<2>`是两个不同的函数，每个函数都有不同的`ty`变量，每个`ty`变量都有不同的类型。相反，您的代码有一个`ty`变量，它试图同时成为两种类型的`typeName`s，有点像薛定谔的猫。编译器未能折叠波形，所以它抱怨。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T01:06:29.263

正如 mfontanini 解释的（并且您的编译器抱怨），非类型模板参数必须是编译时常量。而你试图用“const int p = i;”来愚弄它 没有帮助；p 可能是常量变量，但它不是编译时常量。C++11 编译器可以更好地告诉您这里出了什么问题，但它不能帮助您解决问题。事实上，没有直接的方法可以解决这个问题。

正如 user315052 所建议的那样，最简单的解决方案是显式切换。而且，如果您只这样做一次，并且只是打开 1 与 2，那么不值得付出更多的努力。

当然，如果您要多次进行切换，则将其包装在一个函数中是微不足道的：

```
void bar(int i) {
  switch(i) {
  case 1: foo(userInput<1>::typeName()); return;
  case 2: foo(userInput<2>::typeName()); return;
  default: throw someException;
} 
```

但是，如果您有超过 2 个案例，或者一组值在不断变化，您肯定会想要使用 Boost.Preprocessor 来自动化处理，看起来像这样：

```
#define FOO_CASES_ 50
#define FOO_PASTE_(rep, i, _) case i: foo(userInput< i >::typeName()); return;
void bar(int i) {
  switch (i) {
    BOOST_PP_REPEAT(FOO_CASES_, FOO_PASTE_, _)
    default: throw someException;
  }
}
#undef FOO_CASES_
#undef FOO_PASTE_ 
```

或者，也可以编写一个代码生成器来创建一个 .cpp 文件供您编译：

```
#!/usr/bin/env python
with file('bar.cpp', 'w') as f:
  f.write('void bar(int i) {\n')
  f.write('  switch(i) {\n')
  for i in range(50):
    f.write('    case %d: foo(userInput<%d>::typeName()); return;\n' % (i, i))
  f.write('  default: throw someException;\n')
  f.write('  }\n')
  f.write('}\n') 
```

另一种选择是创建一个查找数组（或向量），该数组使用适当的对象/函数/任何内容进行初始化，因此您可以使用 *userInputLookup[i] 代替 userInput。但是在不知道确切的用例以及是否使用 C++11 的情况下，很难提供详细信息。

# python - 一个类的多个实例同时被覆盖？（Python）

> ID：11217458
> 
> 赞同：7
> 
> 时间：2012-06-26T23:39:48.417
> 
> 标签：python, class, python-3.x, instance

这是我制作的一个非常简单的代码，用于演示我遇到的问题。这里发生的是，我正在创建同一个类的两个不同实例，但是更改一个实例的属性将更改另一个实例的相应属性。我不确定这是为什么。这在 Python 中是正常的还是我遇到了完全搞砸的东西？

```
class exampleClass(object):

    attribute1=0
    attribute2="string"

x=exampleClass
x.attribute1=20
x.attribute2="Foo"

y=exampleClass
y.attribute1=60
y.attribute2="Bar"

print("X attributes: \n")
print(x.attribute1)
print(x.attribute2)

print("Y attributes: \n")
print(y.attribute1)
print(y.attribute2) 
```

这是程序从我的控制台中出来的样子：

```
>>> 
X attributes: 

60
Bar
Y attributes: 

60
Bar
>>> 
```

我觉得应该说：

```
X attributes:

20
Foo
Y attributes:

60
Bar 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T23:41:52.113

当您需要实例属性时，您正在创建类属性。用这个：

```
class exampleClass(object):
    def __init__(self):
        self.attribute1 = 0
        self.attribute2 = "string" 
```

此外，您没有创建任何 exampleClass 实例，您需要这个：

```
x = exampleClass()
y = exampleClass() 
```

您的代码只是为类使用新名称，并更改其属性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T23:43:25.580

您已将属性设置为类属性。这意味着它们的作用域是类本身，而不是类的对象。

如果您想要对象范围，您可以执行以下操作：

```
class exampleClass(object):
        def __init__(self):
            self.attribute1=0
            self.attribute2="string"

x = exampleClass()
y = exampleClass() 
```

然后，当您更改对象的属性值时，它只会影响该特定对象，而不是该类的所有对象。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T23:42:56.637

*进行了修改，使其更清晰。*

使用您拥有的代码，您的问题是您正在使变量 x 和 y 引用类定义，而不是实例化我认为现在已经作为所有讨论和帖子的问题浮出水面的对象。

```
x = exampleClass 
```

现在意味着 x 现在指向类定义。这很有趣，因为您将 attribute1 作为 exampleClass 的变量，您可以这样做：

```
x.attribute1 = 3 
```

现在，如果您执行以下操作：

```
exampleClass.attribute1 
```

您现在将看到 3，而不是您最初设置的 0！

要实例化类的对象，您需要执行以下操作：

```
x = exampleClass()
y = exampleClass() 
```

现在两个变量都引用了新对象，每个对象都有自己的属性，所以如果你这样做了：

```
x.attribute1 = 219 
```

然后你会发现 y.attribute1 没有被修改 :) 使用类和函数的名称在 python 中很常见作为对定义的引用。所以要小心，如果你想实例化一个对象，请确保使用括号，如果你想调用一个函数，请确保你也这样做，否则使用名称是对定义的引用。

我建议您阅读 Ned Batchelder 的答案（以及现在的其他答案），因为您应该使用**init**函数以这种方式制作实例变量，因为它更干净，更符合大多数人遵循的设计标准。

但总的来说，由于它继承自 Object 类，因此您可以假设这样做会创建实例（带括号）等，因此您可以修改对象值，因为我相信即使没有“self”，它们也应该是实例变量。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-27T00:24:32.823

在 Python 中，类也是对象。因此，它们可以分配给变量并具有自己的属性，与任何其他对象相同。

您在块中绑定的所有名称都将`class`成为所创建类的属性。它们*不是*该类未来实例的属性。但是当你尝试从一个实例中读取一个属性并且该实例没有该属性时，Python 默认会查看该实例的类的属性，如果找到了就会返回该属性。这实际上就是 Python 中方法的工作方式。它们只是类的属性，当您尝试从实例中检索它们（它们不存在的地方）时，它们会通过查看类来找到。

考虑到这一点，您的程序不会像您认为的那样做。

```
class exampleClass(object):

    attribute1=0
    attribute2="string" 
```

在这里，您创建了一个名为 的类`exampleClass`，具有两个属性`attribute1`和`attribute2`。它们*不是*实例属性；这是人们学习 Python 的一个非常常见的错误。您需要训练自己摆脱这种情况，因为对于简单的示例，它通常看起来“好像”它们是实例属性。在块中绑定名称`class`会在类对象上创建属性。创建实例属性的唯一方法是在实例存在时获取对实例的引用并为其分配属性；Python 为您提供了`__init__`方法（将在创建实例时调用）作为执行此操作的地方。

所以基本的经验法则是：类块中定义的名称是类对象的属性，分配为`self`in`__init__`属性的名称是该类所有实例的属性。

另一个问题进一步加剧了您的困惑：

```
x=exampleClass
x.attribute1=20
x.attribute2="Foo" 
```

因为类和 Python 中的所有其他东西一样是对象，所以这是完全合理的 Python 代码，但它并没有按照你的想法去做。您实际上还没有创建类的实例；为此，您需要像在`exampleClass()`. 裸名`exampleClass`只是指类对象本身，因此您只需将名称绑定`x`到该对象，然后为其分配一些属性。自然，当您随后也绑定`y`到类对象并通过 为该对象分配属性时，`y`引用的对象`x`受到影响（它是同一个对象）。

# c# - C# 打开一个 .txt 文件以供查看，而应用程序已打开它并正在写入它

> ID：11217460
> 
> 赞同：0
> 
> 时间：2012-06-26T23:40:25.177
> 
> 标签：c#, windows

我的项目：我正在为机器视觉系统创建一个夜间测试系统。我希望能够看到实时结果，而不是等待所有测试完成。我们的旧系统是用 C++ 编写的，可以使用记事本或任何文本编辑器访问日志文件，以便在写入日志文件时查看 (.txt)。

我是怎么做到的：几年前，一位同事制作了一个日志文件写入类，我们的大量应用程序都在使用它。我尝试使用此类中的 dll，一切正常。但是，如果我在应用程序使用它时尝试打开其中一个日志文件，我会收到访问冲突错误：文件正在被另一个进程使用。

我是如何使它工作的：我只是从另一个项目中复制了该类并将其粘贴到我的项目的命名空间中。这解决了问题。

我的问题：为什么这行得通，但当我使用对 dll 的引用时却不行？我想“修复”或“更新”我部门中每个人都使用的 Logging 类，这样我的同事也可以在我们的 C# 应用程序中享受这个附加功能。

操作系统：Win 7 32 位/Win XP/Visual Studio 2005 和 Visual Studio 2010。

我们如何创建文件的代码如下，我们使用流写入器写入文件。

任何帮助将不胜感激。

在此先感谢， B

```
 /// <summary>
    /// Creates a file with the given file name or else uses the defualt.
    /// </summary>
    /// <param name="fileName">Name of file to create, if null use default.</param>
    /// <param name="append">Whether to append to file if it already exists</param>
    /// <returns>StreamWriter to the created file.</returns>
    private StreamWriter CreateFile(string fileName, bool append)
    {
        FileStream fsOut;
        StreamWriter sw;
        if (append)
        {
            //sw = File.AppendText(fileName);
            //just a note I tried many different modifiers of the FileAccess property and nothing seemed to work.
            fsOut = File.Open(fileName, FileMode.Append, FileAccess.Write, FileShare.ReadWrite);
        }
        else
        {
            //sw = new StreamWriter(fileName);
            fsOut = File.Create(fileName);
        }

        sw = new StreamWriter(fsOut);
        sw.AutoFlush = true;
        return sw;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T23:48:20.180

`fsOut = File.Create(fileName);`将以非共享模式打开文件。所以我怀疑你的“解决方案”与复制代码没有太大关系，而是碰巧点击“追加”代码路径而不是新的。

两个进程都应该使用兼容的 FileShare 标志打开文件，因此请确保您永远不要使用默认的“share-none”标志打开日志文件。

# php - 更改雅虎 wordpress 博客的网址

> ID：11217463
> 
> 赞同：0
> 
> 时间：2012-06-26T23:40:51.230
> 
> 标签：php, wordpress, blogs, yahoo

我在我的雅虎商店中添加了一个 wordpress 博客。我已经设置了它，所以子域 blog.domain.com 指向 /blog 的文件目录。当我去 blog.domain.com 时一切正常，但是当我开始点击我的网站时，url 更改为 site.domain.com 我认为创建一个子域可以解决这个问题，但它没有。我想保持 URL 地址一致，但是当我转到设置 > 常规选项卡并更改 WordPress 地址 (URL) 和站点地址 (URL) 时，一切都会中断。有什么建议么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:41:33.483

Wordpress 在安装时将博客的 URL 存储在数据库中。如果您事后更改它，那么您将需要更新数据库。

[http://codex.wordpress.org/Changing_The_Site_URL](http://codex.wordpress.org/Changing_The_Site_URL)

# node.js - 我需要帮助在使用 MongoDB（和猫鼬）的 NODEJS 程序中实现 Facade+Mediator 以实现持久性

> ID：11217465
> 
> 赞同：0
> 
> 时间：2012-06-26T23:40:58.320
> 
> 标签：node.js, mongodb, mongoose, mediator, facade

我非常喜欢玩 NodeJS 和 MongoDB。我想构建一些可能是一个非常大的应用程序的东西。所以我尝试尽可能多地解耦设计应用程序。

我认为抽象持久层以使业务逻辑不知道数据是如何存储的会很好（我不确定将来是否必须将 MongoDB 换成 RDBMS）。知道这一点后，我考虑过创建一个具有数据存储所需操作的 FACADE，使用 Mediator 赞助人订阅 FACADE 操作并实施它们。该中介将使用事件侦听器连接到外观，而外观将使用事件发射器。然后，订阅中介者的模型将包含所有猫鼬模式，并将负责所有数据库/持久性问题。（有意义吗？）

我看到猫鼬对数据模型非常严格。IE。我看到预计我不会有一个 Player 原型，而是一个 PlayerSchema 和一个 PlayerModel。所以：

*   我应该使用猫鼬数据模型吗？（这样做有什么限制/问题吗？-除了如果我关闭数据库就必须重写它们-）
*   我应该将猫鼬数据模型转换为我的业务逻辑原型（通过这个 FACADE 组件）吗？我应该尝试另一个 ORM 来访问 MongoDB 数据吗？

我真的很想进行这些抽象，因为我对 JavaScript、Node 和所有这些技术都很陌生（所以我想测试隔离的每个部分，并且如果我看到有更好的解决方案能够切换层）。

任何建议都将受到欢迎！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T02:08:38.670

如果你不确定你最终会使用什么数据库，你可能想看看使用[jugglingdb](https://github.com/1602/jugglingdb/)而不是 mongoose。这将提供您正在寻找的一些数据层抽象。

# javascript - 通过 Javascript 触发 asp:TextBox 的 ontextchanged() 事件

> ID：11217468
> 
> 赞同：1
> 
> 时间：2012-06-26T23:41:23.393
> 
> 标签：javascript, c#, ajax, event-handling, dom-events

我有一个`asp:TextBox`如下所示

```
<asp:TextBox runat="server" AutoPostBack="True" ID="txtG1" ontextchanged="txtG1_TextChanged" onmouseout="javascript:RefreshIt(this)"/> 
```

和一个 Javascript 函数`RefreshIt()`，每次我*鼠标移出*文本框时都会正确触发。

我试图让 mouseout 事件`ontextchanged`触发`asp:TextBox`.

各种 Stck 溢出帖子都推荐了以下技术，这些技术似乎不起作用：

```
function RefreshIt(selectObj){
 selectObj.ontextchanged();  
}

function RefreshIt(selectObj){
 selectObj.fireEvent('ontextchanged');  
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T00:13:32.607

请参阅：[https ://stackoverflow.com/a/3777/892536](https://stackoverflow.com/a/3777/892536)

使用此链接，我能够想出与您正在寻找的结果相同的东西。不确定这是否适合您的应用程序，但它有效：

## ASP:

将 RefreshIt 函数更改为使用参数进行回发：

```
 <script type="text/javascript">
    function RefreshIt(selectObj) {
      __doPostBack('<%= Page.ClientID %>', selectObj.name);
    }
  </script>

</head>
<body>
  <form id="form1" runat="server">
  <div>

    <asp:TextBox runat="server" AutoPostBack="True" ID="txtG1" OnTextChanged="txtG1_TextChanged"
      onmouseout="javascript:RefreshIt(this);" />

    <br />
    <br />
    Text Changed:&nbsp;

    <asp:Label ID="Label1" runat="server"></asp:Label>

  </div>
  </form>
</body> 
```

## 代码背后：

在页面中添加了“IPostBackEventHandler”并处理了“RaisePostBackEvent”函数：

```
public partial class _Default : System.Web.UI.Page, IPostBackEventHandler
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    public void RaisePostBackEvent(string Arg)
    {
        if (txtG1.ID == Arg)
            txtG1_TextChanged(txtG1, null);
    }

    protected void txtG1_TextChanged(object sender, EventArgs e)
    {
        Label1.Text = System.DateTime.Now.ToString();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-06T18:54:00.750

```
//OnTextChanged in JavaScript works in IE,Firefox,Edge,Chohme,Safari,Opera
//My english is not that good, my mother tongue is geman

Html.:
<FORM action="../cgi-bin/`enter your file here (sendmail-anhang.pl)'" enctype="multipart/form-data" method="post" name="onlineform"> 
<INPUT type="hidden" name="OnFocus_start" value="0">
<INPUT type="hidden" name="OnFocus_startup_value" value="">
<INPUT type="text" name="Vorname" value="*" onKeyPress="if(event.keyCode == 13){;oent('0');return false}"><BR>
<INPUT type="text" name="Name"    value="*" onblur="BlurFunction('Myname')" onFocus="FocusFunction(document.onlineform.Name,this.value)" onkeyup="KeydUpFunction(document.onlineform.Name,this.value,'Myname')" onKeyPress="if(event.keyCode == 13){;oent('1');return false}"><BR>
<INPUT type="text" name="EMail"   value="*" onKeyPress="if(event.keyCode == 13){;oent('2');return false}"><BR>
<INPUT type="submit" value="Send Request">
</FORM>

<SCRIPT>
var stopwatches1

function stopwatch(Aktion) {

if(Aktion == "ende"){   
  var ende = window.sessionStorage.getItem('Mytime')
  window.sessionStorage.removeItem('Mytime')
  clearInterval(stopwatches1)
  return ende;
  }

if(Aktion == "weiter"){ 
var MyTime1 = window.sessionStorage.getItem('Mytime')
MyTime1++ 
var MyTime2 = MyTime1 +9
window.sessionStorage.setItem('Mytime',MyTime2) 
}
}

function FocusFunction(myField,myFieldvalue){
if(document.onlineform.OnFocus_start.value ==  0){
document.onlineform.OnFocus_start.value =  1
document.onlineform.OnFocus_startup_value.value = myFieldvalue
}
;}

function KeydUpFunction(myField,myFieldvalue,iput){
if(myFieldvalue != document.onlineform.OnFocus_startup_value.value && document.onlineform.OnFocus_start.value ==  1){   
document.onlineform.OnFocus_start.value =  2
window.sessionStorage.setItem(iput,new Date().getTime())
stopwatches1 = setInterval(function(){ stopwatch("weiter") }, 10);
}
else{;
if(myFieldvalue == document.onlineform.OnFocus_startup_value.value && document.onlineform.OnFocus_start.value ==  2){
document.onlineform.OnFocus_start.value =  1
clearInterval(stopwatches1)
alert("gleich")
};}
;}

function BlurFunction(myInput) {
document.onlineform.OnFocus_start.value =  0
document.onlineform.OnFocus_startup_value.value = ""
var field16 = stopwatch("ende");    
field16 = field16/1000
window.sessionStorage.removeItem(myInput)
alert("zz  " +field16)

if(field16 <= 0.10 ){
alert("You are Roboter")
}
else{
window.sessionStorage.setItem('Evt2' + myInput,myInput + 'OK2')
}   
}
</SCRIPT>
```

```
//OnTextChanged in JavaScript

Html.:
<FORM action="../cgi-bin/`enter code here`sendmail-anhang.pl" enctype="multipart/form-data" method="post" name="onlineform"> 
<INPUT type="hidden" name="OnFocus_start" value="0">
<INPUT type="hidden" name="OnFocus_startup_value" value="">
<INPUT type="text"   name="Name" value="*" onBlur="BlurFunction()" onFocus="FocusFunction(document.onlineform.Name,this.value)" onKeyUp="KeydUpFunction(document.onlineform.Name,this.value)" onKeyPress="if(event.keyCode == 13){;EnterFunction('1');return false}">
<INPUT type="submit" value="Send Request">
</FORM>

<SCRIPT>
function FocusFunction(myField,myFieldvalue){
if(document.onlineform.OnFocus_start.value ==  0){
document.onlineform.OnFocus_start.value =  1
document.onlineform.OnFocus_startup_value.value = myFieldvalue
};}

function KeydUpFunction(myField,myFieldvalue){
if(myFieldvalue != document.onlineform.OnFocus_startup_value.value && document.onlineform.OnFocus_start.value ==  1){   
// Code... do it! 
// alert("unequal") ... "function alert()" it does not work!
}
else{
alert("equal")
};}

function BlurFunction() {
document.onlineform.OnFocus_start.value =  0
}

function EnterFunction(gezu){
document.onlineform.OnFocus_start.value =  0
docf1 =  document.onlineform.Name
docf2 =  document.onlineform.EMail
docf3 =  document.onlineform.Adresse
docf4 =  document.onlineform.Hnr
docf5 =  document.onlineform.plz
docf6 =  document.onlineform.Ort
docf7 =  document.onlineform.phone
docf8 =  document.onlineform.dieNachricht

var gezu4 = new Array(docf1,docf2,docf3,docf4,docf5,docf6,docf7,docf8)
gezu4[gezu].focus()

}
</SCRIPT>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T16:28:26.763

为什么不简单地将文本框的 AutoPostBack 属性设置为 true ，它会在每次更改文本时自动回发，从而触发 textchanged 事件！

简单的

# ruby-on-rails - 没有找到黄瓜

> ID：11217470
> 
> 赞同：0
> 
> 时间：2012-06-26T23:41:46.653
> 
> 标签：ruby-on-rails, ruby, cucumber

我正在尝试第一次运行黄瓜，但我得到以下信息：

```
 /opt/local/lib/ruby/site_ruby/1.8/rubygems/dependency.rb:247:in `to_specs': Could not find cucumber (>= 0) amongst [actionmailer-3.2.6, actionpack-3.2.6, activemodel-3.2.6, activerecord-3.2.6, activeresource-3.2.6, activesupport-3.2.6, arel-3.0.2, builder-3.0.0, bundler-1.1.4, coffee-rails-3.2.2, coffee-script-2.2.0, coffee-script-source-1.3.3, diff-lcs-1.1.3, erubis-2.7.0, execjs-1.4.0, hike-1.2.1, i18n-0.6.0, journey-1.0.4, jquery-rails-2.0.2, json-1.7.3, mail-2.4.4, mime-types-1.19, multi_json-1.3.6, polyglot-0.3.3, rack-1.4.1, rack-cache-1.2, rack-ssl-1.3.2, rack-test-0.6.1, rails-3.2.6, railties-3.2.6, rake-0.9.2.2, rdoc-3.12, rspec-2.10.0, rspec-core-2.10.1, rspec-expectations-2.10.0, rspec-mocks-2.10.1, rubygems-bundler-1.0.3, rvm-1.11.3.4, sass-3.1.19, sass-rails-3.2.5, sprockets-2.1.3, sqlite3-1.3.6, thor-0.15.3, tilt-1.3.3, treetop-1.4.10, tzinfo-0.3.33, uglifier-1.2.5] (Gem::LoadError)
    from /opt/local/lib/ruby/site_ruby/1.8/rubygems/dependency.rb:256:in `to_spec'
    from /opt/local/lib/ruby/site_ruby/1.8/rubygems.rb:1182:in `gem'
    from /opt/local/bin/cucumber:18 
```

我实际上已经使用 rvm 安装了 ruby​​ 1.9.3，当我这样做时`rvm list`，我得到了

```
 ruby-1.9.2-p320 [ x86_64 ]
    =* ruby-1.9.3-p194 [ x86_64 ]
    # => - current
    # =* - current && default
    #  * - default 
```

Cucumber 是使用`sudo gem install cucumber`.

那么，是否有一些我需要更改的黄瓜配置文件以使其指向当前使用的 ruby​​ 版本？

我刚刚注意到我的 Rails 还说我的 ruby​​ 环境是 1.8.7...我已经安装了 Rails 3.2.6。在检查 rvm 说我使用的是 1.9.3 之后，我肯定会创建 Rails 应用程序。也许两者都有关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T18:30:16.727

很高兴在评论中看到您已解决问题。但是对于面临同样问题的其他开发人员，我发布了这个答案。通过使用`sudo`安装 gem 会产生问题。[这是在 Ubuntu 中安装 ruby​​ on rails 的](https://www.digitalocean.com/community/articles/how-to-install-ruby-on-rails-on-ubuntu-12-04-lts-precise-pangolin-with-rvm)良好说明。如果你会遇到类似 command not found 'rails' 或 'cucumber' 的问题。然后你应该首先检查你的路径。这是[那个问题的答案](https://stackoverflow.com/questions/1954015/installed-rails-but-the-rails-command-says-its-not-installed)

# ruby - 有人可以在这个简短的反向代理指南中解释一下吗？

> ID：11217474
> 
> 赞同：0
> 
> 时间：2012-06-26T23:42:00.210
> 
> 标签：ruby, proxy, reverse-proxy

请原谅我的经验不足，但他指的是什么 rake 文件，我该如何运行它？

[http://overwatering.org/blog/2012/04/reverse-proxy-javascript-app/](http://overwatering.org/blog/2012/04/reverse-proxy-javascript-app/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T00:45:39.147

看起来他设置了一个 Rakefile 来启动 Apache 并在前台运行它。

在您的目录中，只需将该要点添加到名为的文件中`Rakefile`，然后从命令行运行`rake apache`。

`exec %Q`或者，如果您不想设置 rake 文件，您可以只键入块内的内容。

# php - 表单欺骗及解决方法

> ID：11217476
> 
> 赞同：1
> 
> 时间：2012-06-26T23:42:04.690
> 
> 标签：php, html, forms, security

我正在尝试开发一个表单助手来防止表单欺骗。所以我想出了这个：

```
<form...>
<?=form::secure()?>
...
</form> 
```

它使用一个令牌标记一个隐藏的表单，该表单带有一个令牌，该令牌是用户会话 id 的 md5（它是随机的，并在 1 周后更新）。然后在“动作”网址（来自表单）：

```
$token = (isset($_GET['_token'])) ? $_GET['_token'] : null;
$token = (is_null($token) and isset($_POST['_token'])) ? $_POST['_token'] : $token;
if (form::is_secure($token)) { // checks if the given token is equal to md5(user id)
    ...ok...
} else {
    ...error...
} 
```

这是否可以防止表单欺骗或我遗漏了什么？如果用户 id 在用户刚刚加载页面然后提交其表单的确切时刻过期，它只会打印一个错误，他应该再次提交表单，但这是可以接受的（很少见）。

我认为这里唯一可能出错的是，如果潜在的攻击者能够获取用户会话 ID，然后他可以将 ?_token=id 附加到它的请求并将其提供给用户进行浏览，但那时，如果攻击者拥有用户会话 ID，它无论如何都可以为所欲为。

我对吗？如果没有，我该如何编辑我的代码来实现我的目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T00:02:31.603

您实际上是在重新发明轮子，因为令牌需要有效的会话来验证，因此只会重复会话的安全层，而不添加任何额外的东西。这相当于要求某人输入他们的密码，然后再次要求确认。它可能会让每个人感觉更好，但如果密码被泄露，它只会减缓攻击，但不能阻止攻击。

这并不是说您不应该认真对待这些事情或拒绝您的尝试。我的哲学是表单的内容（通过`GET`或传递的内容）`POST`) 应与其他逻辑（例如安全性和计算）分开，并且服务器不应将用户提供的数据视为用户提供的数据以外的任何内容。理想情况下，任何人都可以将任何内容发布到表单操作，并且服务器/控制器将正确且一致地管理它。会话被验证（安全），数据被清理然后验证，当用户实际使用 Web 表单时通过 JS 生成的任何值都被重新计算/验证。理想情况下，响应足够通用，无论是重定向响应还是 Web 标准响应，以便请求者，无论是 Web 浏览器、命令行用户还是 Web 服务都可以解释它。

如果是上述情况，那么对欺骗的重视和关注就会减少，更多地强调分别增强安全层和验证层，而且最重要的是，做得好的后端控制器可以很容易地被移植/重用为一个网络服务后端。

长话短说：您的解决方案还不错，据我所知，它只是没有添加任何真正的安全性，甚至可能会暴露您的后端安全性逻辑。如果您有特定的欺骗问题/威胁，最好解决该用例并解决问题，而不是立即尝试提出一种万能的解决方案。事实证明，您的用例具有特定的解决方案/考虑因素，需要在交换的不同点解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T00:34:25.043

不要重新发明轮子。如果您不使用 Web 框架，请集成为您的项目添加 CSRF 保护的无数库之一，例如[CSRF4PHP](https://github.com/foxbunny/CSRF4PHP/)。

您的解决方案很接近，但无法正常工作，因为攻击者可以抓取会话 ID。

# objective-c - 在Cocos2D，Objective-C中，如何使动画2等待动画1完成后再执行

> ID：11217484
> 
> 赞同：0
> 
> 时间：2012-06-26T23:42:56.307
> 
> 标签：objective-c, animation, cocos2d-iphone

在我的程序中，当您在 iOS Sim 中点击屏幕时，会使用 CCMoveTo 发牌。动画需要 0.4 秒才能完成。再次点击屏幕，将发出下一组牌。第二个动画也需要 0.4 秒。我要做的就是禁止我的程序在第一个动画完成之前分发第二组卡片。尝试过 sleep() ，显然无法达到预期的效果。还尝试了 Cocos2D 的 CCDelayTime 几种不同的方法，但无法产生预期的结果。执行此操作的最简单和/或最节省内存的方法是什么？

编辑：@crackity_jones - 这是我的 HelloWorldLayer 文件和我为 CCSprite 创建的允许移动的类别：

HelloWorldLayer.h

```
#import <GameKit/GameKit.h>
#import "CCSprite+MoveActions.h"
#import "cocos2d.h"

    // globals
CCSprite *card1;
...
CCSprite *card9;

@interface HelloWorldLayer : CCLayer {
    NSMutableArray *deck;
    ...
    int touchCount;
}

...

@end 
```

HelloWorldLayer.m

```
...

-(void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    touchCount++;
    [self nextRound];
}

// one method to handle all rounds dealt
-(void)nextRound {
    if (touchCount == 1) {
        [self removeAllCards];
        [deck shuffle];
        [self dealFirstRound];
    } else if (touchCount == 2) {
        [self dealSecondRound];
    } else if (touchCount == 3) {
        [self dealThirdRound];
    } else if (touchCount == 4) {
        [self dealFourthRound];
    touchCount = 0;
    }
}

-(NSMutableArray *)makeDeck {
    // create mutable array of 52 card sprites
}

-(void)dealFirstRound {
    ...
    // declare, define, add card objects to layer at start-point here
    …
    // the "moveToPositionX" methods contain the animation code
    [firstCard moveToPosition1];
    [secondCard …2];
    [third...3];
    [fourth...4];
    }

// Also methods for removing all rounds of cards
…
@end 
```

CCSprite（移动动作）

```
#import "CCSprite+MoveActions.h"
#define kCardTravelTime .1

@implementation CCSprite (MoveActions)

-(void)moveToPosition1 {
    CGSize size = [[CCDirector sharedDirector] winSize];
    [self runAction:[CCMoveTo actionWithDuration:kCardTravelTime
                                        position:CGPointMake(size.width/2 - card1.contentSize.width/4, card1.contentSize.height/2 + holeCard1.contentSize.height/5)]];
    CCDelayTime *waitTime = [CCDelayTime actionWithDuration:.4];
    [self runAction:waitTime];
}

-(void)moveToPosition2 {
    CGSize size = [[CCDirector sharedDirector] winSize];
    CCDelayTime *delay = [CCDelayTime actionWithDuration:.2];
    CCMoveTo *move = [CCMoveTo actionWithDuration:kCardTravelTime
                                        position:CGPointMake(size.width/2 + card1.contentSize.width/4, card1.contentSize.height/2 + holeCard1.contentSize.height/5)];
    [self runAction:[CCSequence actions:delay, move, nil]];
}
// rest of the methods 3-9 look like the above, essentially

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:54:36.287

你可以试试这个！如果需要，可以在 CCSequence 动作中插入一些 CCDelaytime 动作。

```
-(void)dealFirstRound {
    id card1Move = [CCCallBlock actionWithBlock:^{
        [firstCard moveToPosition1];
    }];
    id card2Move = [CCCallBlock actionWithBlock:^{
        [secondCard moveToPosition2];
    }];
    id card3Move = [CCCallBlock actionWithBlock:^{
        [thirdCard moveToPosition3];
    }];
    id card4Move = [CCCallBlock actionWithBlock:^{
        [fourthCard moveToPosition4];
    }];
    [self runAction:[CCSequence actions:
                     card1Move,
                     card2Move,
                     card3Move,
                     card4Move,
                     nil];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T23:53:23.787

这样做`CCSequence`：

```
[<<CCNode>> runAction:[[CCSequence actions:[deal hand],[CCDelayTime actionWithDuration:.4],[deal 2nd hand].. ,nil]]; 
```

这将执行第一个动作，延迟 0.4 秒，执行第二个动作..等等..你可以添加你想要多少个动作

# .net - 为什么 Process.Threads 不包含等待线程？

> ID：11217486
> 
> 赞同：0
> 
> 时间：2012-06-26T23:43:05.997
> 
> 标签：.net, multithreading, wait

让我们编写简单的控制台应用程序：

```
 static void Main(string[] args)
    {
        IList<Thread> threads = new List<Thread>();
        Console.WriteLine((Process.GetCurrentProcess().Threads).OfType<ProcessThread>().Where(thread => thread.ThreadState == ThreadState.Wait).Count());
        for(int i=0;i<30;i++)
        {
            Thread t = new Thread(Test);
            Console.WriteLine("Before start: {0}", (Process.GetCurrentProcess().Threads).OfType<ProcessThread>().Where(thread => thread.ThreadState == ThreadState.Wait).Count());
            t.Start();
            Console.WriteLine("After start: {0}", (Process.GetCurrentProcess().Threads).OfType<ProcessThread>().Where(thread => thread.ThreadState == ThreadState.Wait).Count());
        }
        Console.WriteLine((Process.GetCurrentProcess().Threads).OfType<ProcessThread>().Where(thread => thread.ThreadState == ThreadState.Wait).Count());
        Console.ReadKey();
    }

    static void Test()
    {
        Thread.Sleep(0);
    } 
```

如您所见，我们在进程中创建了 30 个等待线程。他们在哪里？MSDN：

> 使用 ProcessThread 获取与当前进程关联的**所有线程。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T23:46:21.283

您的线程几乎立即退出。Sleep(0) 不是永远的睡眠，它只是一个收益。如果没有其他可运行线程，则对 Sleep(0) 的调用只会返回而不产生时间片。您的线程在调用 Sleep 后立即退出。

做一个更长的 Sleep() 来测试这个。

# c - OSX 命令行 Readln 等效

> ID：11217490
> 
> 赞同：0
> 
> 时间：2012-06-26T23:43:35.580
> 
> 标签：c, macos

我刚开始玩一些 OSX 编程，并尝试创建一个简单的命令行应用程序，但我似乎找不到一个好的指南。基本上我想知道如何获得一些用户输入，例如询问用户他们的年龄等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T01:06:50.687

你很幸运；OS X 提供了所有（几乎所有？）标准 C 函数的手册页；唯一的麻烦是知道哪个功能提供了您正在寻找的服务。该[`fgets()`功能](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/fgets.3.html)可能最适合一次读取一行。你会像这样使用它：

```
char buffer[MAXLINE];
if (fgets(buffer, MAXLINE, stdin) != NULL) {
    /* handle line in buffer */
} 
```

如果您真的在寻找*教程*，[C 编程语言](http://en.wikipedia.org/wiki/The_C_Programming_Language)是最好的选择之一。一定要买第二版——第一版可能很有趣，但语言变化太大，不能成为可靠​​的指南。

如果您想要参考，那么您的联机帮助页是最好的信息来源。

# ios - 如何仅使用月份和日期从核心数据中获取

> ID：11217491
> 
> 赞同：0
> 
> 时间：2012-06-26T23:43:51.783
> 
> 标签：ios, core-data

我有一个核心数据数据库，里面有人和他们的生日，这是一个 NSDate。我想取二月出生的人，没有设置一天或一年。是否可以通过仅指定月份或月份和日期而不是年份来设置谓词，或者我必须将日期保存为单独的整数。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:02:40.600

在您的特定场景中，我会在`monthDay`您的模型中添加一个新属性，例如，以保存月份和日期的组合。

正如 Daniel 已经提到的，您可以在 ManagedObject 子类中为生日属性编写自定义设置器，以便在`monthDay`每次更新生日时进行更新。

由于性能原因，拥有这个附加属性对生日应用程序很有意义，因为它`fetchRequest`几乎总是`monthDay`在它的`predicate`.

# asp.net-mvc - 这是在每个请求上添加数据而不阻塞 ASP.NET MVC 中的请求的好方法吗？

> ID：11217497
> 
> 赞同：0
> 
> 时间：2012-06-26T23:44:19.867
> 
> 标签：asp.net-mvc

我正在构建的 MVC 应用程序有一部分页面（作为部分实现）使用从 ViewData 加载的 ViewModel。我创建了一个抽象控制器，我的所有控制器都继承自（我使用的 IoC 系统使基本控制器成为最佳选择）。目前，我正在 OnActionExecuting 覆盖中设置数据。

```
protected override void OnActionExecuting(ActionExecutingContext filterContext)
{
    ViewData["OperationStatusVM"] = OperationsStatusBuilder.Get(Operations);
    base.OnActionExecuting(filterContext);
} 
```

问题是 OperationsStatusBuilder 方法运行时间相当长。我正在尝试组合一种方法来填充 ViewModel 而不会阻塞请求的其余部分。

我的第一个想法是通过 OnActionExecuting 中的 Task 开始操作，然后在 OnActionExecuted 中设置实际值。

```
protected override void OnActionExecuting(ActionExecutingContext filterContext)
{
    filterContext.RequestContext.HttpContext.Items["OperationTask"]
        = Task<OperationsStatusVM>.Factory.StartNew(() => OperationsStatusBuilder.Get(Operations));
    base.OnActionExecuting(filterContext);
}

protected override void OnActionExecuted(ActionExecutedContext filterContext)
{
    var task = filterContext.RequestContext.HttpContext.Items["OperationTask"] as Task<OperationsStatusVM>;
    ViewData["OperationStatusVM"] = task.Result;
    base.OnActionExecuted(filterContext);
} 
```

我仍在解决问题，但似乎我可能错过了使用 MVC 内置的东西的机会。我的主要要求是*必须*在呈现页面时设置 ViewData。

这种方法有意义吗？这是解决这个问题的好方法，还是有更好的方法？

谢谢，埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T00:36:07.243

听起来您在描述 MVC 中的异步控制器？虽然这将释放 IIS 以在处理长时间运行的请求时响应其他请求，但如果您希望在执行 OperationsStatusBuilder 时运行同一 Action 中的其他方法，则必须使用一些异步代码提示它们并等待让他们在将结果返回到要呈现的视图之前返回结果。如果您在托管此站点的服务器上有多个内核，则会看到最好的结果。这是我在应用程序中用于异步从数据库中提取文档的示例。

该`GetFileResult`方法（在我的控制器中被标记为非操作）是实际运行我的逻辑的方法。我将任务传回结果的原因是 Async 方法中引发的错误从未到达结果方法。通过将任务作为参数传递并`task.Wait()`作为结果方法的第一行调用，我能够使其重新抛出异常并让站点处理/显示而不是默默地忽略它们。

请注意，如果您有多个长时间运行的任务以让它们同时运行，您可以创建多个任务，并为每个任务增加一次未完成操作。只有当未完成的操作数达到 0 并且它们都已完成时，您的结果才应该得到结果。

```
public void FileAsync(Guid id)
{
    AsyncManager.OutstandingOperations.Increment();
    Action getFileAsync = () =>
        {
            FileResult fileResult = GetFileResult(id, false);
            AsyncManager.Parameters["result"] = fileResult;
            AsyncManager.OutstandingOperations.Decrement();
        };
    var task = Task.Factory.StartNew(getFileAsync);
    AsyncManager.Parameters["task"] = task;
}
public ActionResult FileCompleted(FileResult result, Task task)
{
    task.Wait(); 
    if (result == null)
        return HttpNotFound();
    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T23:48:33.750

> “问题是 OperationsStatusBuilder 方法运行时间相当长。我正在尝试 > 组合一种方法来填充 ViewModel 而不会阻塞请求的其余部分。”

这是一个请求。正如在客户端中一样，您的视图 + 部分视图的合并结果作为一个文档。你所描述的做听起来像一个插座。无论如何，我认为这样做的唯一方法是发送页面，然后在事后使用 AJAX 请求部分视图并更新页面。

还是我很困惑？

**此外：**

您不必将部分视图模型存储在 ViewData 字典中。您可以将其存储在主模型中，然后像这样调用您的部分：`@Html.Partial(Model.MyPartialViewModel)`

# java - JAWS wordnet 相似度

> ID：11217499
> 
> 赞同：0
> 
> 时间：2012-06-26T23:44:29.913
> 
> 标签：java, wordnet, jaws-wordnet

我将 JAWS 用于普通的 wordnet 来查找单词之间的相似性。

我安装了 wordnet 2.1 并添加了 jar 文件：edu.mit.jwi_2.1.4.jar 和 edu.sussex.nlp.jws.beta.11.jar 并复制了 D:\Program Files\ 中的 WordNet-2.1-InfoContent WordNet \ 2.1 但我在运行我的应用程序时遇到了这个问题

```
Loading modules
set up:
... finding noun and verb <roots>
... calculating IC <roots> ...
... ICFinder
java.io.FileNotFoundException: D:\Program Files\WordNet\2.1\WordNet-InfoContent-2.1 (Access Denied)
        at java.io.FileInputStream.open(Native Method)
... DepthFinder
at java.io.FileInputStream.<init>(FileInputStream.java:106)
        at java.io.FileInputStream.<init>(FileInputStream.java:66)
        at java.io.FileReader.<init>(FileReader.java:41)
        at edu.sussex.nlp.jws.ICFinder.setup(ICFinder.java:135)
        at edu.sussex.nlp.jws.ICFinder.<init>(ICFinder.java:44)
        at edu.sussex.nlp.jws.JWS.<init>(JWS.java:76). 
```

请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T23:41:31.843

我不确定是否可以使用 JAWS 来衡量单词之间的相似性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:12:16.083

从[http://wordnet.princeton.edu/wordnet/download/current-version/](http://wordnet.princeton.edu/wordnet/download/current-version/)下载**wordnet**

把它的内容放在这个目录下：`C:\Program Files\WordNet\2.1\`

添加了 jar 文件：`edu.mit.jwi_2.1.4.jar`和`edu.sussex.nlp.jws.beta.11.jar`.

下载了这个文件？ [http://www.d.umn.edu/~tpederse/Data/WordNet-InfoContent-2.1.tar.gz](http://www.d.umn.edu/~tpederse/Data/WordNet-InfoContent-2.1.tar.gz)

提取并复制到`C:\Program Files\WordNet\2.1` （即在 2.1 文件夹内）

# c++ - 命名空间中的全局变量 - 线程中的值不同

> ID：11217501
> 
> 赞同：5
> 
> 时间：2012-06-26T23:44:50.833
> 
> 标签：c++, multithreading, c++11, atomic

考虑以下情况：

*   2个不同的网络端口，`boost::asio`每个端口都在自己的线程中
*   1 个端口正在接收和处理数据 -`class DataConnection`包裹在`std::thread`
*   1 个端口用于发送统计信息`class StatConnection`，也包含在`std::thread`

为了计算连接（和其他小数据块），我的想法是在类似的`static`内部使用一个变量`namespace`：

```
#include <atomic>

namespace app {
 namespace status {
   static std::atomic<long> counter = 0; 
 }
} 
```

`DataConnection`这对班级来说很好。在这里，我`counter`在 c'tor 中递增并查看值递增。

但`counter`在我的`StatConnection`课上总是`0`

为什么会发生这种情况？

我尝试了一些替代方案：

*   交换`std::atomic<long>`：`static volatile long`没有任何区别。
*   使用没有`static`关键字的命名空间。

然后我得到链接器错误：

```
multiple definition of `app::status::searchtime'
./src/status/Status.o:/[...]/include/status/Status.hpp:16: first defined here
[...] 
```

那么为什么线程之间的值`count`不同呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T23:50:25.103

`static`在命名空间范围内引入了内部链接，因此每个翻译单元都有自己的副本`counter`——这与您真正想要的完全相反！

`extern`改为在标题中使用：

```
//foo.h:
#include <atomic>

namespace app {
    namespace status {
        extern std::atomic<long> counter;
    }
} 
```

**然后在一个**翻译单元中定义变量：

```
//foo.cpp:
#include "foo.h"

namespace app {
    namespace status {
        std::atomic<long> counter{0L};
    }
} 
```

# mobile - Tabris iOS 客户端是否支持图像按钮？

> ID：11217505
> 
> 赞同：0
> 
> 时间：2012-06-26T23:45:25.763
> 
> 标签：mobile

我是 Tabris 和 RAP 的新手。我正在使用从 git 存储库下载的演示项目试用 Tabris

问题：Tabris 或 Tabris iOS 客户端是否支持图像按钮？

我知道可以使用标签并为其设置图像。还可以在鼠标向下和向上更改标签图像以模仿图像按钮。但我发现图像过渡不平滑（产生闪烁效果），因此它没有产生原生效果。可能是我做错了什么。我确信应该有我不知道的解决方案。您能否提供有关如何解决此问题的建议。很想知道除了使用标签之外是否有任何正确的方法来做图像按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T12:14:17.540

对于 Tabris 来说，a 的主题性`Button`将在稍后出现。现在的重点是提供 SWT API，现在我们正在研究更抽象的导航支持、手势和传感器（相机，...） - 地理定位已经可用。

iOS 上的`Button`实现不像其他原生 iOS 应用程序那样依赖于拉伸图像 - Tabris 真正绘制/渲染按钮。这使您可以完全控制它们的颜色。

所以你是对的。目前只有带有`mouseDown`和`mouseUp`Listeners 的标签才能提供您请求的功能。但是，由于服务器周转，您在使用标签/侦听器方法时总会有一点滞后。图像传输后将缓存在客户端上。

我还想提一下，已经可以调用`setImage( image )`.`Button`

# maven - Maven传递依赖混淆

> ID：11217517
> 
> 赞同：2
> 
> 时间：2012-06-26T23:47:03.713
> 
> 标签：maven, maven-2, transitive-dependency

如果我在应用程序（例如 my.company.app）中包含一个库（例如 mycompany.model.core-SNAPSHOT），并且 mycompany.model.core 包含 Hibernate 作为依赖项，我可以在 my.company 中引用 Hibernate 类和函数吗.app 没有在应用程序中包括休眠（显式）？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T00:22:30.463

你可以，但这不被认为是好的做法。

如果你需要一个类或接口在类路径中以编译你的应用程序，你应该`<dependency>`为它添加一个。这可以保护您免受上游依赖项的更改（例如，如果您依赖的库切换到 TopLink 而不是 Hibernate）并允许 Maven 注意到您的直接和间接依赖项的版本号是否不同步。

既然您控制了库和应用程序工件，为什么不让它们都从一个共同的父级继承`pom.xml`呢？然后，您可以从一处管理依赖项的版本（例如，您的 Hibernate 版本）。

# objective-c - 如何将导航控制器添加到父视图的子视图

> ID：11217520
> 
> 赞同：0
> 
> 时间：2012-06-26T23:47:22.157
> 
> 标签：objective-c, ios, uiviewcontroller, uinavigationcontroller

我有一个设计，其中有一个主视图控制器，其中包含三个子视图。如何将 UINavigationController 添加到其中一个子视图以仅管理该子视图的视图堆栈？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:49:54.163

从 iOS 5 开始，您可以创建自定义容器视图控制器。我建议创建一个包含 3 个视图（每个都是视图控制器对象）的容器。既然`UINavigationController`是一个`UIViewController`子类，你应该能够将它添加到你的容器中。

# haskell - Haskell Monad.Writer

> ID：11217521
> 
> 赞同：1
> 
> 时间：2012-06-26T23:47:32.440
> 
> 标签：haskell

我正在为这样的排序功能编写一个记录器：

```
bubble :: (Ord a) => [a] -> Writer [String] [a]
bubble (x:y:ys)  
        | x > y = do
                tell [show x ++ " why does this not work"]
                y:bubble(x:ys)
        | otherwise = do
                tell [show y ++ " is a number"] 
                x:bubble(y:ys)
bubble [x] = do 
            tell ["nothing works"]
            return [x] 
```

但我收到此错误：

```
 Couldn't match expected type `WriterT
                                    [String] Data.Functor.Identity.Identity [a]'
                with actual type `[a0]'
    In a stmt of a 'do' block: y : bubble (x : ys)
    In the expression:
      do { tell [show x ++ " why does this not work"];
           y : bubble (x : ys) }
    In an equation for `bubble':
        bubble (x : y : ys)
          | x > y
          = do { tell [show x ++ " why does this not work"];
                 y : bubble (x : ys) }
          | otherwise
          = do { tell [show y ++ " is a number"];
                 x : bubble (y : ys) }
Failed, modules loaded: none. 
```

我已逐字阅读此错误消息，但我没有更接近问题所在？我尝试在没有减速的情况下进行编译，出现如下一组新错误：

```
q.hs:21:17:
    No instance for (MonadWriter [[Char]] [])
      arising from a use of `tell'
    Possible fix:
      add an instance declaration for (MonadWriter [[Char]] [])
    In a stmt of a 'do' block:
      tell [show x ++ " why does this not work"]
    In the expression:
      do { tell [show x ++ " why does this not work"];
           y : bubble (x : ys) }
    In an equation for `bubble':
        bubble (x : y : ys)
          | x > y
          = do { tell [show x ++ " why does this not work"];
                 y : bubble (x : ys) }
          | otherwise
          = do { tell [show y ++ " is a number"];
                 x : bubble (y : ys) }
Failed, modules loaded: none. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T23:55:09.100

朝正确的方向点头：

1.  是什么类型的`y`？
2.  是什么类型的`bubble(x:ys)`？
3.  是什么类型的`(:)`？

* * *

答案：

（在这些答案中，与中`a`的相同。）`a``bubble :: (Ord a) => [a] -> Writer [String] [a]`

1.  `y :: a`
2.  `bubble(x:ys) :: Writer [String] [a]`
    *   `bubble`是一个函数，`bubble(x:ys)`是应用`bubble`到的结果`x:ys`
3.  `(:) :: b -> [b] -> [b]`
    *   `:`是运算符；无论其第一个操作数具有何种类型，其第二个操作数必须具有“第一个操作数具有的任何类型的列表”类型，并且结果具有相同的列表类型。

鉴于您已将`y`和`bubble(x:ys)`作为 的操作数`:`，您现在能看出问题所在了吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T00:11:25.727

有点不幸的是，在这种情况下，这`Writer w a`是`WriterT w Identity a`. 它使编译器错误消息（通常信息量很大）更难解释。所以我在这里的建议是完全*忽略错误消息的内容，*假装你是类型检查器。

我认为@dave4420 提供了一个很好的提示。我将补充说：不要删除 - 的类型声明，`bubble`相反，采取相反的方式：分解`bubble`成更小的辅助函数，为每个函数提供类型声明。然后它应该变得更加清楚你的问题出在哪里。

我唯一的另一个提示是，这是编写 monadic 代码的一个常见问题：记住哪些值是 monadic 类型，哪些不是，以及何时“提升”。

# drupal - Google Maps API v3 标记未显示

> ID：11217527
> 
> 赞同：0
> 
> 时间：2012-06-26T23:48:12.967
> 
> 标签：drupal, google-maps-api-3, markers

我一直在寻找几个小时，但找不到解决方案。我的标记代码非常简单（从 api 文档中获取），但我似乎无法让标记显示在我的网站上。地图本身呈现良好（密钥包含在实际代码中）但没有标记。

任何帮助，将不胜感激。谢谢！

网站：[http ://ath-uterwinctr.its.utexas.edu/about/location](http://ath-uterwinctr.its.utexas.edu/about/location)

网站引用的文件 (gmap.js) 中的代码：

```
$(document).ready(function(){
var myLatLng = new google.maps.LatLng(30.27639, -97.732422);
var myOptions = {
    center: myLatLng,
    zoom: 16,
    mapTypeId: google.maps.MapTypeId.ROADMAP
};
var map = new google.maps.Map(document.getElementById("map-erwincenter"),
        myOptions);
    var marker = new google.maps.Marker({
    position: myLatLng,
    map: map,
    title: "Frank Erwin Center"
    });
}); 
```

引用 gmap.js 的网站代码：

```
<?php
drupal_add_js('sites/all/themes/delphic/js/gmap.js');
drupal_set_html_head('<script type="text/javascript" 
src="http://maps.googleapis.com/maps/api/js?sensor=false">
</script>'); ?>

<div id="map-frame"><div id="map-erwincenter">&nbsp;</div></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T00:59:05.937

我查看了您的实时源代码，您需要删除该行`marker.setMap()`。标记已经使用`map: map`上面定义的属性将自己放置在您的地图中。

调用`setMap`必须作为 来完成`marker.setMap(map)`，但由于`map: map`在选项中，这是多余且不必要的。我认为现在发生的事情`setMap()`被解释为`setMap(null)`并且效果正在删除您的标记。

[http://ath-uterwinctr.its.utexas.edu/sites/default/files/js/js_40f5a94093acf14755eb100d58a7a838.js](http://ath-uterwinctr.its.utexas.edu/sites/default/files/js/js_40f5a94093acf14755eb100d58a7a838.js)

**1245行**

```
$(document).ready(function(){
    var myLatLng = new google.maps.LatLng(30.27639, -97.732422);
    var myOptions = {
        center: myLatLng,
        zoom: 16,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map-erwincenter"),
            myOptions);
    var marker = new google.maps.Marker({
        position: myLatLng,
        map: map,
        title: "Frank Erwin Center"
    });
    marker.setMap();  // <-- *** This line should disappear ***
}); 
```

# c# - 使用可视化 c# backgroundworker 更新数据库？

> ID：11217535
> 
> 赞同：0
> 
> 时间：2012-06-26T23:49:01.380
> 
> 标签：c#, mysql, backgroundworker

这似乎应该很容易，但我找不到适合我正在寻找的解释。有谁知道在表单后台访问数据库并更新表单控件的方法？例如，我的可视化 C# 应用程序正在从 MYSQL Web 服务器数据库加载一些文本框和标签。当有人更新网站数据库时，我希望更改能够自动反映在 C# 应用程序中。我试过使用计时器，但是当计时器关闭并检索数据时表单会锁定。backgroundworker 控件看起来很有希望，但我似乎无法让它运行不止一次，甚至没有太多的运气让它做我想做的事。在我的情况下，后台工作人员是要走的路吗？如果是这样，是否可以设置为每隔 30 秒左右不断地访问数据库？任何建议将不胜感激！

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:56:32.163

*   在表单加载时启动一个完全独立的线程（System.Threading.Thread）并让它轮询数据库，将更改写入变量（使用 `lock()`）并在发生更改时设置一个标志。
*   在您的表单中使用计时器检查更改标志（例如每 250 毫秒），如果有，请将它们从变量复制到表单（再次使用`lock()`以避免撕裂）

# ios - ios - 如何自定义 UISwitch 以具有不同的措辞并以不同的方式显示？

> ID：11217536
> 
> 赞同：1
> 
> 时间：2012-06-26T23:49:05.217
> 
> 标签：ios, ios5, storyboard

我的故事板上有一个正在使用的 UISwitch，我无法将措辞从开/关更改为私有/公共，这是我的应用程序所需要的。此外，我希望开关是水平的并且更长，以便可以在其旁边添加简要说明。

那可能吗？我怎么做？我附上了我目前![在此处输入图像描述](../Images/949b253b9ea57f50fcc44677d47b0c30.png)拥有的屏幕截图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T00:06:19.300

在 iOS 5 下，除了 tintColor 之外，您无法自定义 UISwitch。

如果你想要 onImage 和 offImage 自定义，你可能想看看 iOS 6 带来了什么。

要像使用单选按钮一样在“公共”和“私人”之间切换，您应该使用可以根据需要自定义的 UISegmentedControl。

# ssl - MAMP 2 使用 SSL 的多个虚拟主机

> ID：11217538
> 
> 赞同：4
> 
> 时间：2012-06-26T23:49:12.113
> 
> 标签：ssl, mamp, vhosts

我目前在配置 MAMP 2 以将 SSL 与多个虚拟主机一起使用时遇到了麻烦（它与一个虚拟主机一起工作正常）。就我而言，它只会为 https-ssl.conf 文件中列出的第一个虚拟主机提供 SSL 连接。

在我的 httpd-vhosts.conf 文件中，我有几个虚拟主机设置，例如：

```
<VirtualHost *:80> 
    DocumentRoot "/Users/me/sites/something/" 
    ServerName something.local 
</VirtualHost>
<VirtualHost *:80> 
    DocumentRoot "/Users/me/sites/else/" 
    ServerName else.local 
</VirtualHost> 
```

在我的 https-ssl.conf 文件中，我有几个虚拟主机设置，例如：

```
<VirtualHost *:443>
    DocumentRoot "/Users/me/sites/something"
    ServerName something.local:443
    ServerAdmin you@example.com
    ErrorLog "/Applications/MAMP/Library/logs/error_log"
    TransferLog "/Applications/MAMP/Library/logs/access_log"

    SSLEngine on

    #   SSL Cipher Suite:
    SSLCipherSuite ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP:+eNULL

    #   Server Certificate:
    SSLCertificateFile "/Applications/MAMP/conf/apache/server.crt"
    #SSLCertificateFile "/Applications/MAMP/conf/apache/server-dsa.crt"

    #   Server Private Key:
    SSLCertificateKeyFile "/Applications/MAMP/conf/apache/server.key"
    #SSLCertificateKeyFile "/Applications/MAMP/conf/apache/server-dsa.key"

    <FilesMatch "\.(cgi|shtml|phtml|php)$">
        SSLOptions +StdEnvVars
    </FilesMatch>
    <Directory "/Applications/MAMP/Library/cgi-bin">
        SSLOptions +StdEnvVars
    </Directory>

    #   SSL Protocol Adjustments:
    BrowserMatch ".*MSIE.*" \
             nokeepalive ssl-unclean-shutdown \
             downgrade-1.0 force-response-1.0

    #   Per-Server Logging:
    CustomLog "/Applications/MAMP/Library/logs/ssl_request_log" \
                  "%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \"%r\" %b"
</VirtualHost>  
<VirtualHost *:443>
    DocumentRoot "/Users/me/sites/else"
    ServerName else.local:443
    ServerAdmin you@example.com
    ErrorLog "/Applications/MAMP/Library/logs/error_log"
    TransferLog "/Applications/MAMP/Library/logs/access_log"

    ........add'l config deleted......
</VirtualHost> 
```

在 https-ssl.conf 中列出的第一个虚拟主机提供 SSL 支持，但在它之后没有列出任何虚拟主机（ https://something.local 可以工作，但不是[https://else.local](https://else.local)）总是有效

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T23:52:50.203

每个 IP 只能有一个 HTTPS 主机 - 这是 HTTPS 的限制。尝试`<VirtualHost ip.ad.dr.es:443>`使用不同的 IP 在每个 IP 上获取 HTTPS 主机。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-11T20:35:53.293

`.conf`原始问题中的文件很*接近*但不完全在那里......

为了让 Apache 通过 SSL 识别不同的虚拟主机，您需要使用*NameVirtualHost*并关闭“Strict SNI”。本质上，您需要在`httpd-ssl.conf`文件顶部添加以下内容：

```
# Ensure that Apache listens on port 443
Listen 443

# Listen for virtual host requests on all IP addresses
NameVirtualHost *:443

# Go ahead and accept connections for these vhosts
# from non-SNI clients
SSLStrictSNIVHostCheck off 
```

然后确保您的每个虚拟主机节点都使用以下标记声明：

```
<VirtualHost *:443> 
```

**注意：您使用的浏览器也需要支持 SNI。**

所有这些都取自 Apache 文档中的此页面： [https ://wiki.apache.org/httpd/NameBasedSSLVHostsWithSNI](https://wiki.apache.org/httpd/NameBasedSSLVHostsWithSNI)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-29T15:44:33.543

`httpd-vhost.conf`如果包含，请尝试此操作`httpd.conf`

```
NameVirtualHost *:80
NameVirtualHost *:443 
```

谢谢

# python - 重定向失败 - get_absolute_url()

> ID：11217541
> 
> 赞同：0
> 
> 时间：2012-06-26T23:49:33.053
> 
> 标签：python, django

我在我的 django 应用程序中使用 haystack 和 whoosh 搜索功能。一切正常，但我面临一个问题：搜索关键字并打印出结果后，当我点击结果（标题）时，它不会将我重定向到我点击的关键字的页面，它只是静态的。我尝试添加一个 get_absolute_url 方法。然而它不起作用。我错过了什么？我想让 get_absolute_url 将用户重定向到他们必须点击标题后搜索的关键字的页面。

N:B 下面是一个让用户发布他们的数据并且他们的数据在同一页面上过滤的表单。

楷模

```
 class Meek(models.Model):
         user=models.ForeignKey(User)
         title=models.CharField(max_length=250, unique=True)
         address=models.CharField(max_length=200)
         city=models.CharField(max_length=200)
         state=models.CharField(max_length=200)
         main_view=models.ImageField(upload_to="photos",blank=True, null=True)
         side_view=models.ImageField(upload_to="photos",blank=True, null=True)
         pub_date=models.DateTimeField()

         def __unicode__(self):
             return self.title

         @models.permalink
         def get_absolute_url(self):
             findme_args = {
              'title': self.title,
              'address': self.address,
              'city': self.city,
              'state': self.state,
              'main_view': self.main_view,
              'side_view': self.side_view
         }
         return ('findme', (), findme_args) 
```

搜索/search.html

```
 {% block content %}

                 <h2>Search</h2>

               <form method="get" action=".">

                <table>
                  {{ form.as_table }}
                <tr><td>&nbsp;</td>
                <td>
                 <input type="submit" value="Search">
                </td>
                </tr>
                 </table>
               {% if query %}
                 <h3>Results</h3>
              {% for result in page.object_list %}
               <p>
                <a href= "{{ result.object.get_absolute_url }}" >{{ result.object.title }}</a> 
               </p>
                 {% empty %}
                    <p>No results found.</p>
                 {% endfor %}

               {% if page.has_previous or page.has_next %}
                     <div>
                       {% if page.has_previous %}<a href="?q={{ query }}&amp;page= {{ page.previous_page_number }}">{% endif %}&laquo; Previous{% if page.has_previous %}</a>
               {% endif%}

               {% if page.has_next %}<a href="?q={{ query }}&amp;page={{ page.next_page_number }}">{% endif %}Next &raquo;{% if page.has_next %}</a>{% endif %}</div>
               {% endif %}

                 {% else %}

                    {# Show some example queries to run, maybe query syntax, something else? #}

                {% endif %}
                 </form>

               {% endblock %} 
```

意见：

```
 def findme(request,title='title',address='address',city='city',state='state',main_view='main_view',side_view='side_view'):
               extra_data_context={}
                   #if there's nothing in the field do nothing.
               if request.method=="POST":
                  form=MeekForm(request.POST, request.FILES)
                  if form.is_valid():
                     data=form.cleaned_data
                     newmeeks=Meek(
                         user=request.user,
                         pub_date=datetime.datetime.now(),
                         title=data['title'],
                         main_view=request.FILES['main_view'],
                         side_view=request.FILES['side_view'],
                         address=data['address'],
                         city=data['city'],
                         state=data['state'])
                    newmeeks.save()
                extra_data_context.update({'MeekForm':form})
             else:
                 form = MeekForm()
                 extra_data_context.update({'MeekForm':form,'findme':True})
             extra_data_context.update({'Meeks':Meek.objects.filter(user=request.user)})
             return render_to_response('postme.html',extra_data_context,context_instance=RequestContext(request)) 
```

网址

```
 #I created a urls.py file in my project app(testapp) folder
      urlpatterns = patterns('testapp.views',
         url(r'^$', findme, name='findme'),
         url(r'^find/(?P<title>\w+)/(?P<address>\w+)/(?P<city>\w+)/(?P<state>\w+)/(?P<main_view>\w+)/(?P<side_view>\w+)/$', 'findme', name='findme_search'),

      )

     #In my project(test) folder, where the main urls.py is, I include the above url.

          urlpatterns = patterns('',
            url(r'^find/$', include('testapp.urls')),
          #haystack url where you can search
               (r'^search/', include('haystack.urls')),

         ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T02:24:08.663

如果你的最后一行`get_absolute_url`是

```
 return ('findme_search', (), findme_args) 
```

代替

```
 return ('findme', (), findme_args) 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:47:21.693

我敢打赌`self.main_view`，`self.side_view`不匹配正则`\w+`表达式。此外，它是图像。您不能将图像放入 URL 字符串中，您需要从中获取一些字符串。或者，如果它是一个对象（保存在数据库中），您可以只向您的 URL 提供一个参数，即该对象的主键。

您还应该为您的`get_absolute_url`方法编写一个测试。然后，您将能够快速获得实际错误。

# ruby - 对文件使用二进制搜索

> ID：11217544
> 
> 赞同：0
> 
> 时间：2012-06-26T23:49:51.013
> 
> 标签：ruby

我有这个包含几千行的巨大文件，每一行都包含一个数字和一个字符串。数字已经排好序了。

到目前为止，我将每一行作为一个数组扫描并将它们推入另一个数组，然后我可以在这个二维数组上执行二进制搜索。这是正确的方法吗？在效率方面呢？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T00:11:46.100

为什么做比必要的更多的工作？

假设数字是递增的，并且它们实际上只是数组的索引

我可以看到你有 3 个选择。

只需访问该文件，然后

1.  二进制搜索，一种标准的、定义良好的算法，可在线获得。

2.  如果您的字符串被定义为相同的长度，那么您只需要使用文件中的公式字节地址 = (( 数字长度 + 字符串长度 [ + CRLF ] ) * 索引) - 1 其中 CRLF 是可选的，如果您使用回车和换行来分隔行 - 1 因为文件从字节零开始而不是一

3.  将它们加载到数据库管理系统中并使用 INDEX 访问字符串

选择权在您手中，索引更快，DBMS 工作量更大但更易于管理尝试 SQLite，二分搜索使用更多时间

# sql-server - Azure 连接故障处理与 SqlException？

> ID：11217547
> 
> 赞同：1
> 
> 时间：2012-06-26T23:50:02.713
> 
> 标签：sql-server, exception, enterprise-library, azure-sql-database

我有一些 C# 代码在遇到 SqlExceptions 时会重试，该代码在 vanilla Web 服务器上运行并与 Sql2k8 数据库通信，这是标准的东西。

我有兴趣将代码移植到 Azure Web 角色，并将数据库移动到 SQL Azure。我发现了一些似乎捕捉到“连接错误”的 EntLib 东西，但我不知道企业库代码在我自己的位上提供了什么...... SqlExceptions 是 SqlExceptions，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T20:22:32.423

我想在 Grigori 的回答之上添加几件事。

瞬态故障处理应用程序块具有 SQL Azure 的默认重试策略，它将帮助您覆盖 SqlExceptions，只有 SQL 数据库将抛出（不是 SQL Server 数据库）保证连接重试。重要的原因是您应该只对保证重试的 SqlException 执行连接重试。这是使用应用程序块的好处之一。

然而......尽管应用程序块非常有用，但 SqlExceptions 只是您将在云中遇到的一种错误：由 SQL 数据库生成的错误。您可能（将）需要捕获其他类型的错误以确保连接重试的完整性，例如某些 IO 异常，这些错误是负载平衡器或位于您和 SQL 数据库之间的其他中间代理层的结果。此信息没有权威来源；只是个人经验。然而，好消息是有一种方法（或者我应该说曾经有一种方法使用原始重试框架）来自定义应用程序块以包含您希望重试策略处理的异常类型。由于我没有使用最新版本，因此请务必提出此要求……以防万一事情发生变化。

因此，应用程序块提供了一种灵活的方式来管理您的连接重试策略，而不管您连接到的 SQL 数据库引擎如何，并且可以很好地控制您实际想要重试的异常列表。对于具有非常集中的连接逻辑并且只处理 SQL 数据库的应用程序来说，这可能是一种过度杀伤，但它是一个非常强大的框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T02:52:11.840

您似乎指的是我们作为 Windows Azure 企业库集成包的一部分提供的[瞬态故障处理应用程序块。](http://msdn.microsoft.com/en-us/library/hh680934%28PandP.50%29.aspx)它不仅包括 SQL Azure 的检测策略，还包括 Windows Azure 存储、缓存和服务总线以及一组可扩展的重试策略。这个想法是在使用的多种技术中具有一致的重试行为。

当然，如果您只关心 SqlExceptions，您可以使用自己的检测代码。

# objective-c - 应用程序终止时尝试保存到 plist

> ID：11217549
> 
> 赞同：3
> 
> 时间：2012-06-26T23:50:07.173
> 
> 标签：objective-c, ios, xcode, ios5

好的，我目前有一个主从应用程序，它有一个带有导航控制器的表视图、一个详细视图和一个模式视图。导航视图显示饮品名称，详细视图显示所选饮品的详细信息，模态视图允许我创建新饮品或编辑现有饮品。一切都是从我已经移动到文档目录的 plist 中填充的，并且一切都可以正常读取。我知道这是可行的，因为我已经用一个空的 plist 进行了测试，看看我的视图是否变为空白，并且它们成功了。我所有的观点都很完美。我可以添加编辑和删除饮料，并且我的表格视图会使用新的或删除的或更改的饮料进行更新。但是它没有成功写入 plist 文件（我正在从我的 masterViewController 中名为“drinks”的数组更新我的 plist）。

```
- (void)applicationWillTerminate:(UIApplication *)application
{
    // Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.
    NSArray *searchPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [searchPaths objectAtIndex:0];
    NSString *writeableDBPath = [documentsDirectory stringByAppendingPathComponent:@"DrinkDirections.plist"];

    [self.drinks writeToFile:writeableDBPath atomically:YES];
} 
```

我通过放置 2 个 NSLogs() 对此进行了测试：一个在**我放置在**我的 masterViewController 中的 applicationWillTerminate 方法中，一个在我的 AppDelegate.m 中的 applicationWillTerminate 方法中。该日志仅显示在 AppDelegate.m 中的控制台中。所以最后我不知道如何从我的 AppDelegate.m 文件中访问我的 MasterViewController 中的饮料数组，所以我可以使用我的 appDelegate.m 中的 applicationWillTerminate 方法保存到 plist。我将在下面发布我的 appDelegate.m 代码，该代码会引发错误，因为饮料属性位于 MasterViewController 中。

AppDelegate.m（方法）

```
- (void)applicationWillTerminate:(UIApplication *)application
{
    // Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.
    NSArray *searchPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [searchPaths objectAtIndex:0];
    NSString *writeableDBPath = [documentsDirectory stringByAppendingPathComponent:@"DrinkDirections.plist"];

    [self.drinks writeToFile:writeableDBPath atomically:YES]; //THIS LINE THROWS AN ERROR BECAUSE PROPERTY DRINKS IS ONLY ON MY MASTERVIEWCONTROLLER NOT MY AppDelegate

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T03:30:52.060

首先，正如其他人在这里提到的那样，`applicationDidEnterBackground:`这可能是一个更好的地方。其次，您的视图控制器不会独自完成此调用：它是一个`UIApplicationDelegate`协议调用，而您的视图控制器不是其中之一。

你想要做的是让你的视图控制器收到`UIApplicationDidEnterBackgroundNotification`通知。 [UIApplicationDelegate 参考](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/applicationDidEnterBackground%3a)说：

> 应用程序还会在调用此方法的同时发布 UIApplicationDidEnterBackgroundNotification 通知，让感兴趣的对象有机会响应转换。

所以在你的视图控制器中你想做这样的事情（警告：把这段代码直接输入网页，没有尝试编译它）：

```
- (void) viewDidLoad
{
    [super viewDidLoad];

    // Register for notification.
    [[NSNotificationCenter defaultCenter] addObserver:self 
                          selector:@selector(applicationDidEnterBackground:) 
                              name:UIApplicationDidEnterBackgroundNotification
                            object:nil];
}

- (void) viewDidUnload
{
    [[NSNotificationCenter defaultCenter] removeObserver:self]; 
}

- (void) applicationDidEnterBackground:(NSNotification*)notification 
{
    // Do your plist saving here.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T23:55:59.757

“对于支持后台执行的应用程序，当用户退出应用程序时，一般不会调用此方法，因为在这种情况下应用程序只是移动到后台”

[http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html)

简而言之：您的应用程序永远不会“终止”，而是置于后台并在必要时在后台终止。

由于应用程序默认“支持”背景，因此您应该考虑查看：

```
- (void)applicationDidEnterBackground:(UIApplication *)application 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T00:00:12.497

您也可以尝试在`applicationDidEnterBackground`调用时保存 .plist。根据苹果的文档[here](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html)，

> 在 iOS 4.0 及更高版本中，当用户退出支持后台执行的应用程序时，将调用此方法而不是 applicationWillTerminate: 方法。您应该使用此方法来释放共享资源、**保存用户数据**、使计时器无效并**存储足够的应用程序状态信息以将您的应用程序恢复到其当前状态，以防以后终止**。您还应该禁用对应用程序用户界面的更新，并避免使用某些类型的共享系统资源（例如用户的联系人数据库）。您还必须避免在后台使用 OpenGL ES。

我强调了相关部分。希望这可以帮助！

# android - 在单个 Activity 中的 Fragment 之间切换

> ID：11217551
> 
> 赞同：11
> 
> 时间：2012-06-26T23:50:25.120
> 
> 标签：android, android-fragments, android-activity

我想创建一个`Activity`显示用户可以通过的菜单。通过单击一个项目，将显示一个新屏幕，允许用户进行更多选项（类似向导）。

我想用`Fragment`s 来实现这个，但它对我不起作用。
现在我有：

`main.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:id="@+id/main_fragmentcontainer" >

    <fragment
        android:id="@+id/mainmenufragment"
        android:name="com.myapp.MainMenuFragment"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

    <fragment
        android:id="@+id/secondmenufragment"
        android:name="com.myapp.SecondMenuFragment"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</LinearLayout> 
```

`MainMenuFragment`有一个`OnClickListener`：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.mainmenu, container, false);

    setupButton(view);
    return view;
}

/* Button setup code omitted */

@Override
public void onClick(View v) {
    SherlockFragment secondRunMenuFragment = (SherlockFragment) getSherlockActivity().getSupportFragmentManager().findFragmentById(R.id.secondmenufragment);
    FragmentTransaction transaction = getSherlockActivity().getSupportFragmentManager().beginTransaction();

    transaction.replace(android.R.id.content, secondMenuFragment); //also crashes with R.id.main_fragmentcontainer
    transaction.addToBackStack(null);
    transaction.commit();
} 
```

现在，当我按下按钮时，应用程序会因为这个 logcat 而崩溃：

> 06-27 01:45:26.309: E/AndroidRuntime(8747): java.lang.IllegalStateException: 无法更改片段 SecondMenuFragment{405e2a70 #1 id=0x7f060029} 的容器 ID：现在是 2131099689 2131099687
> 06-27 01:45 :26.309: E/AndroidRuntime(8747): at android.support.v4.app.BackStackRecord.doAddOp(Unknown Source)
> 06-27 01:45:26.309: E/AndroidRuntime(8747): at android.support.v4.app .BackStackRecord.replace(未知来源)
> 06-27 01:45:26.309: E/AndroidRuntime(8747): at android.support.v4.app.BackStackRecord.replace(未知来源)
> 06-27 01:45:26.309: E /AndroidRuntime(8747)：在 com.myapp.MainMenuFragment$MyButtonOnClickListener.onClick(MainMenuFragment.java:52)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-07-25T20:06:48.223

我创建了这个主要布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:tools="http://schemas.android.com/tools"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   android:orientation="horizontal"
   tools:context="com.example.fragmentsexample.MainActivity" >

   <FrameLayout 
      android:id="@+id/contentFragment"
      android:layout_width="fill_parent" 
      android:layout_height="fill_parent" 
      android:layout_weight="1" />

</LinearLayout> 
```

我在 FrameActivity 中补充了：

```
@Override
public void onCreate(Bundle savedInstanceState) {
  ...
  Fragment fragment = new Dashboard();
  FragmentManager fm = getSupportFragmentManager();
  FragmentTransaction transaction = fm.beginTransaction();
  transaction.replace(R.id.contentFragment, fragment);
  transaction.commit();
  ...
} 
```

我用相同的代码替换 onClick 方法，更改片段（事件仪表板）：

```
@Override
public void onClick.... {
  ...
  Fragment fragment = new Events();
  FragmentManager fm = getSupportFragmentManager();
  FragmentTransaction transaction = fm.beginTransaction();
  transaction.replace(R.id.contentFragment, fragment); //Container -> R.id.contentFragment
  transaction.commit();
  ...
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-26T23:59:38.757

就个人而言，我不会有任何`<fragment>`元素。

`<FrameLayout>`步骤#1：使用向导的可变部分填充您的活动布局，以及您的各种按钮。

步骤#2：在`onCreate()`活动中，运行 a`FragmentTransaction`将第一个向导页面加载到`FrameLayout`.

步骤#3：单击“下一步”，运行 a`FragmentTransaction`以将向导的下一页内容替换为`FrameLayout`向导的下一页。

步骤#4：添加适当的智能以在按钮不可用时禁用它们（例如，返回第一个向导页面）。

此外，您还需要考虑 BACK 按钮应如何与向导中的任何屏幕“返回”按钮一起使用。如果您希望它们的行为相同，则需要在处理“后退”按钮时将每个事务添加到后退堆栈并从后退堆栈弹出内容。

总有一天，如果没有人比我做得更好，我会尝试创建一个以片段为向导的示例，或者可能是一个可重用的组件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-19T00:24:09.767

另一种选择是使用 Roman Nurik 的[Android-WizardPager](https://github.com/romannurik/Android-WizardPager)。

主要特点：

*   分支，或向导步骤影响后续步骤可用性的能力
*   允许用户在提交之前进行审查
*   允许用户在向导步骤之间自由导航
*   支持必需和可选步骤
*   支持步骤类（从技术上讲，每个步骤都是 Java 类的一个实例，因此您可以在向导中拥有多个实例）

更多信息[在这里。](https://plus.google.com/+RomanNurik/posts/6cVymZvn3f4)

# iphone - 使用启用优化的 XCode Instruments Time Profiler

> ID：11217554
> 
> 赞同：2
> 
> 时间：2012-06-26T23:51:04.233
> 
> 标签：iphone, ios, xcode, profiling, instruments

我正在使用 C++ 进行一些数字运算，并且`-Os`在我的 Debug 构建中使用优化时，我发现 CPU % 使用率存在巨大差异。因此，我想在启用优化的情况下分析我的代码，这样我就不会浪费时间优化编译器已经优化好的代码。

当我尝试使用`-Os`优化进行分析时，我无法让 Instruments 符号化我的代码（即使我手动指定了`.dSYM`文件的位置）。它甚至不会显示我没有模板化或内联的顶级 C++ 成员函数。

`-O0`当我指定默认优化级别时，我可以让它很好地表示。

那么，是否甚至可以在启用优化的情况下进行分析？如果是这样，那么让它发挥作用的诀窍是什么？

我正在使用 XCode 4.3.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T00:50:13.527

Time Profiler 确实在使用`-Os`. 优化器的工作做得非常好，以至于我的 C++ DSP 代码被内联并加速到分析器不会在我让它运行的短时间内对其进行采样的地步。我在调用树中只能看到系统调用。

当我尝试运行探查器更长时间时，探查器捕捉到了我的 DSP 代码的一些亮点。它只显示了一些 NSOperationQueue 处理程序调用的顶级 DSP 函数。下面的其余部分似乎都是内联的。

当我使用`-O2`. 我的更多 DSP 子程序保持原样（而不是内联），因此我能够更好地判断我的 DSP 算法在哪里花费时间。但这一切都没有实际意义，因为现在我可以看到该应用程序在管理系统调用上花费的时间比在我的 DSP 代码上花费的时间要多得多。

# c# - C# XY Window 与 3D 游戏中目标的 XYZ 位置的关系

> ID：11217555
> 
> 赞同：0
> 
> 时间：2012-06-26T23:51:18.213
> 
> 标签：c#, 3d, window

> **可能重复：**
> [如何将 3D 点转换为 2D 透视投影？](https://stackoverflow.com/questions/724219/how-to-convert-a-3d-point-into-2d-perspective-projection)

我能够在 3D 游戏中获得对象的 XYZ 坐标。我想要做的是能够将光标位置设置到窗口上的这个位置。我已经熟悉鼠标移动，不需要相关信息。感谢您在此主题上提供的任何帮助。我对如何实现这个目标一无所知......

例如：假设对象 3D 位置是 (X,Y,Z) 145.435, 1765.74, 14.7 并且窗口大小是 800x600 我如何才能找到在屏幕上设置鼠标坐标以匹配对象中的位置3D 平面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T00:05:45.003

一种方法可能是使用您的碰撞系统从相机的世界坐标向点击方向投射光线。选择的第一个三角形可能具有您正在寻找的 3D 位置。

# git - 插入提交而不合并

> ID：11217558
> 
> 赞同：1
> 
> 时间：2012-06-26T23:51:47.390
> 
> 标签：git

我有现在的情况

```
A ----- D
 \
  B - C (master) 
```

现在我想在**不合并**`D`的情况下插入提交，例如**不更改***未来*提交的内容和.*****`B``C`*****

 *****基本上重写`B`提交的父母（因此上游的所有其他提交）。

最后我希望没有手动交互：

```
A - D - B - C 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T18:20:26.380

我想出了在不改变其内容（当然除了提交 SHA 之外）的情况下向历史引入新提交的正确方法是使用中间 git 移植。

在以下示例中，我假设之前没有移植：

```
# use a graft to temporarily change the parent of B to be D
echo "$SHA_B $SHA_D" > .git/info/grafts
# apply the grafts, changing the SHAs of the commits B...C
git filter-branch
# remove old pending commits
git gc
# remove the no longer needed grafts
rm .git/info/grafts 
```

这使所有提交内容（文件和文件夹）保持不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T00:13:09.497

批处理模式将对您当前分支历史记录中的内容执行。在这种情况下，您正在查看 D 的历史或您的主人的历史。在这里做的最简单的事情是：

```
git rebase D 
```

（假设您已经主检出）为什么需要在批处理模式下完成？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T23:55:02.617

您要查找的操作`rebase`处于交互模式。

```
git checkout C
git cherry-pick D # Now: A - B - C -D
git rebase -i A
<reorder commits>
git log 
```

该`--interactive / -i`选项将在您的编辑器中打开历史记录，让您可以随心所欲地混乱。您甚至可以将多个提交压缩在一起或完全消除一些。

如果你想完全平凡，你也可以这样做：

```
git checkout A
git cherry-pick D B C 
```*****

# c++ - 固定到核心的 FIFO 线程上的 std::promise::set_value 不会唤醒 std::future

> ID：11217559
> 
> 赞同：3
> 
> 时间：2012-06-26T23:52:02.087
> 
> 标签：c++, linux, c++11, real-time, scheduler

我正在尝试创建一个具有确定性实时响应的系统。

我创建了许多[`cpusets`](http://code.google.com/p/cpuset/ "谷歌代码上的 cpusets")，将所有非关键任务和未固定的内核线程移动到一组，然后将我的每个实时线程固定到它自己的 cpuset，每个 cpuset 都由一个 cpu 组成。

```
$ non-critical tasks and unpinned kernel threads
cset proc --move --fromset=root --toset=system
cset proc --kthread --fromset=root --toset=system

$ realtime threads
cset proc --move --toset=shield/RealtimeTest1/thread1 --pid=17651
cset proc --move --toset=shield/RealtimeTest1/thread2 --pid=17654 
```

我的情况是这样的：

*   线程 1: `SCHED_OTHER`, 固定到`set1`, 等待`std::future<void>`
*   线程 2: `SCHED_FIFO`, 固定到`set2`, 调用`std::promise<void>::set_value()`

**线程 1 永远阻塞。** 但是，**如果我更改线程 2`SCHED_OTHER`**，则线程 1 能够继续。

我已经运行`strace -f`以获得更多洞察力；似乎线程 1 正在等待`futex`（我假设是 的内部`std::future`），但从未被唤醒。

我绝对受阻 - 有没有办法让一个线程将自己固定到一个核心并将其调度程序设置为 FIFO ，然后使用 a`std::promise`唤醒另一个等待它完成这个所谓的实时设置的线程？

thread1创建thread2的代码如下：

```
// Thread1:
std::promise<void> p;
std::future <void> f = p.get_future();

_thread = std::move(std::thread(std::bind(&Dispatcher::Run, this, std::ref(p))));

LOG_INFO << "waiting for thread2 to start" << std::endl;

if (f.valid())
    f.wait(); 
```

thread2的*Run*函数如下：

```
// Thread2:
LOG_INFO << "started: threadId=" << Thread::GetId() << std::endl;

Realtime::Service* rs = Service::Registry::Lookup<Realtime::Service>();
if (rs)
    rs->ConfigureThread(this->Name()); // this does the pinning and FIFO etc

LOG_INFO << "thread2 has started" << std::endl;
p.set_value(); // indicate fact that the thread has started 
```

strace 输出如下：

*   线程 1 是`[pid 17651]`
*   线程 2 是`[pid 17654]`

为了简洁起见，我删除了一些输出。

```
//////// Thread 1 creates thread 2 and waits on a future ////////

[pid 17654] gettid()                    = 17654
[pid 17651] write(2, "09:29:52 INFO waiting for thread"..., 4309:29:52 INFO waiting for thread2 to start
 <unfinished ...>
[pid 17654] gettid( <unfinished ...>
[pid 17651] <... write resumed> )       = 43
[pid 17654] <... gettid resumed> )      = 17654
[pid 17651] futex(0xd52294, FUTEX_WAIT_PRIVATE, 1, NULL <unfinished ...>
[pid 17654] gettid()                    = 17654
[pid 17654] write(2, "09:29:52 INFO thread2 started: t"..., 6109:29:52 INFO thread2  started: threadId=17654
) = 61

//////// <snip> thread2 performs pinning, FIFO, etc </snip> ////////

[pid 17654] write(2, "09:29:52 INFO thread2 has starte"..., 3409:29:52 INFO thread2 has started
) = 34
[pid 17654] futex(0xd52294, FUTEX_CMP_REQUEUE_PRIVATE, 1, 2147483647, 0xd52268, 2) = 1
[pid 17651] <... futex resumed> )       = 0
[pid 17654] futex(0xd522c4, FUTEX_WAKE_PRIVATE, 2147483647 <unfinished ...>
[pid 17651] futex(0xd52268, FUTEX_WAKE_PRIVATE, 1 <unfinished ...>
[pid 17654] <... futex resumed> )       = 0
[pid 17651] <... futex resumed> )       = 0

//////// blocks here forever //////// 
```

您可以看到 pid 17651 (thread1) 报告`futex resumed`，但它是否可能在错误的 cpu 上运行并被阻塞在运行的 thread2 后面`FIFO`？

**更新：这似乎是线程*未在它们固定到的 cpus 上运行*的问题。**

`top -p 17649 -H`显示**线程 1 确实在线程 2 的 cpu**上`f,j`运行。`last used cpu`

 **```
top - 10:00:59 up 18:17,  3 users,  load average: 7.16, 7.61, 4.18
Tasks:   3 total,   2 running,   1 sleeping,   0 stopped,   0 zombie
Cpu(s):  7.1%us,  0.1%sy,  0.0%ni, 89.5%id,  0.0%wa,  0.0%hi,  3.3%si,  0.0%st
Mem:   8180892k total,   722800k used,  7458092k free,    43364k buffers
Swap:  8393952k total,        0k used,  8393952k free,   193324k cached

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  P COMMAND                                                                                                                                                                                             
17654 root      -2   0 54080  35m 7064 R  100  0.4   5:00.77 3 RealtimeTest                                                                                                                                                                                         
17649 root      20   0 54080  35m 7064 S    0  0.4   0:00.05 2 RealtimeTest                                                                                                                                                                                         
17651 root      20   0 54080  35m 7064 R    0  0.4   0:00.00 3 RealtimeTest 
```

但是，如果我查看`cpuset`文件系统，我可以看到我的任务*应该*固定在我请求的 cpu 上：

```
/cpusets/shield/RealtimeTest1 $ for i in `find -name tasks`; do echo $i; cat $i; echo "------------"; done

./thread1/tasks
17651 
------------
./main/tasks
17649 
------------
./thread2/tasks
17654
------------ 
```

显示cpuset配置：

```
$ cset set --list -r
cset: 
         Name       CPUs-X    MEMs-X Tasks Subs Path
 ------------ ---------- - ------- - ----- ---- ----------
         root       0-23 y     0-1 y   279    2 /
       system 0,2,4,6,8,10 n       0 n   202    0 /system
       shield 1,3,5,7,9,11 n       1 n     0    2 /shield
RealtimeTest1    1,3,5,7 n       1 n     0    4 /shield/RealtimeTest1
      thread1          3 n       1 n     1    0 /shield/RealtimeTest1/thread1
      thread2          5 n       1 n     1    0 /shield/RealtimeTest1/thread2
         main          1 n       1 n     1    0 /shield/RealtimeTest1/main 
```

由此我会说thread2*应该*在cpu 5上，但top说它在cpu 3上运行。

有趣的是，`sched_getaffinity`报告了什么`cpuset`- thread1 在 cpu 3 上，而 thread2 在 cpu 5 上。

然而，寻找它`/proc/17649/task`的`last_cpu`每个任务都在运行：

```
/proc/17649/task $  for i in `ls -1`; do cat $i/stat | awk '{print $1 " is on " $(NF - 5)}'; done
17649 is on 2
17651 is on 3
17654 is on 3 
```

**`sched_getaffinity`报告一件事，但现实是另一回事**

有趣的是，`main`线程 [ `pid 17649`] 应该在 cpu 1 上（根据`cset`输出），但实际上它在 cpu 2 上运行（在另一个套接字上）

所以我会说这`cpuset`不起作用？

我的机器配置是：

```
$ cat /etc/SuSE-release
SUSE Linux Enterprise Server 11 (x86_64)
VERSION = 11
PATCHLEVEL = 1
$ uname -a
Linux foobar 2.6.32.12-0.7-default #1 SMP 2010-05-20 11:14:20 +0200 x86_64 x86_64 x86_64 GNU/Linux 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T03:08:50.880

我在**SLES 11 / SP 2**盒子上重新运行了测试，并且固定工作正常。

因此，我将此标记为答案，即：这是与**SP 1相关的问题****

# javascript - 如何将新函数绑定到元素的 onclick 事件并让它在所有其他绑定函数之前运行

> ID：11217560
> 
> 赞同：0
> 
> 时间：2012-06-26T23:52:10.287
> 
> 标签：javascript, javascript-events

我们希望使用浏览器扩展向现有页面添加功能。假设一个元素已经具有绑定到其 onclick 事件的函数。我正在将一个新函数绑定到该元素的 onclick。我想让我的函数在之前绑定到该事件的所有其他函数之前运行。在我的函数完成运行之前，我不希望它们开始执行。

我想知道如何在 JavaScript 中以这种方式绑定我的新函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T00:35:51.587

你真的不能。事件侦听器通常按照它们附加到元素的顺序执行，您[无法获取那些已经添加的](https://stackoverflow.com/q/446892/1048572)。如果您的插件不会在任何其他添加侦听器的代码之前执行，那么您唯一的机会就是尽早进入事件调度过程。

我能想到的最好方法是在 dom 的最高点为捕获[阶段](http://www.w3.org/TR/DOM-Level-3-Events/#event-flow)[添加一个侦听器：](https://developer.mozilla.org/en/DOM/element.addEventListener)

```
document.documentElement.addEventListener("click", function(e) {
    if (e.target == theElementInQuestion) // or check for e.target.id...
        // do something with the event like
        e.stopImmediatePropagation();
}, true /* sic! */); 
```

# c++ - C++：禁止类改变指针成员变量所指向的值

> ID：11217569
> 
> 赞同：2
> 
> 时间：2012-06-26T23:53:09.180
> 
> 标签：c++, pointers, constants, member-variables

如果标题听起来很深奥，我深表歉意，让我举个例子来说明一下：

```
class A
{
public:
    A(int *flag) : flag_(flag) {}
    void foo();
private:
    void bar();
    int *flag_;
}; 
```

问题是：我可以阻止此类更改 flag_ 指向的值吗？

注意：我在想，也许我想写一些类似的东西`const int * flag_`，但我不想让`flag`“不可撤销”指向的值保持不变。在我的例子中，这个值是某个其他类的某个成员变量的值，可以更改。

感谢您的见解！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T23:58:47.627

`const int *flag_;`不会修改传入的实际变量的常量，它只是定义如何使用 flag_。无论你传递给 A 的构造函数，它的常量都不会改变。const 不是运行时更改，它只是防止编码器意外修改值的语法。您可以做得更好，并使其`const int *const flag_;`阻止 A 修改 *flag_ 并且 flag_ 将不可重新分配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T23:58:48.523

> 问题是：我可以阻止此类更改 flag_ 指向的值吗？
> 
> 注意：我在想，也许我想写一些类似 const int * flag_ 的东西，但我不想让 flag 指向的值“不可撤销地”保持不变。

所以......你希望它保持不变......除非你不这样做？不，我没有看到解决方案。`flag_`作为类维护者，您可以维护仅在 X 条件下更改的不变量。

编辑：我想我误解了你。只需制作指针`const`（或它指向的内容`const`）。这对其他成员变量没有任何影响，它只是控制如何`field_`使用。

顺便说一句，存储另一个类的这个成员的地址是否安全？如果另一个类的实例被移动（存储在任何向量中？在很多情况下它可以被移动，从而使您的指针无效）会发生什么？如果实例分配有自动存储持续时间并超出范围会怎样？如果您*真的*需要（是吗？）存储指针成员，这很好，但是您需要考虑一些事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T00:00:46.880

不使用`const`then no 你不能。但是，如果类 A 将标志指针声明为`const`，那应该不会影响另一个具有指向同一内存位置的指针的类修改值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T03:08:32.247

int* flag_，是私有成员；您班级的客户用户不能更改指向的 flag_ 和 flag_。

Now This is your class . Don't design to write any code like : *flag_=14;

The Scott Meyers's "Effective c++" has a few thing you want to know.

# c++ - 快速排序不排序C++

> ID：11217572
> 
> 赞同：0
> 
> 时间：2012-06-26T23:53:40.223
> 
> 标签：c++, sorting, quicksort

我正在尝试编写一个快速排序函数来对 10 到 1,000,000 个数字之间的任何地方进行排序。它遍历所有内容但不排序，只是按原样打印向量。

`while`由于某种原因，它过早地跳出了循环。我正在使用的测试输入是：（3 6 2 5 1 7 9 10 4 8）。它的输出： (1 2 6 5 3 7 9 10 4 8)

```
int main()
{
    std::cout << "Which file would you like to sort?\n";
    std::cin >> file;

    std::ifstream in(file.c_str());

    // Read all the ints from in:
    std::copy(std::istream_iterator<int>(in), std::istream_iterator<int>(),
            std::back_inserter(numbers));

    int max = numbers.size();
    quickSort(numbers, 0, max-1);

    // Print the vector with tab separators:
    std::copy(numbers.begin(), numbers.end(),
            std::ostream_iterator<int>(std::cout, "\t"));
    std::cout << std::endl;

    return 0;
}

void quickSort(vector<int> &numbers, int start, int end)
{
    int i = start;
    int j = end;
    int pivot=numbers[start];
    int temp;
    while( i != j )
    {
        while( numbers[i] < pivot && i < j)
            i++;
        while( numbers[j] >= pivot && i < j)
            j--;

        temp = numbers[i];
        numbers[i] = numbers[j];
        numbers[j] = temp;

        if( j < start )
        {
            quickSort( numbers, start, j );
        }

        if( i < start )
        {
            quickSort( numbers, i, end);
        }
    }
    return;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T23:57:22.490

这条线看起来不合适：

```
int pivot=numbers.size()/2; 
```

`numbers`无论`start`和`end`位置如何，您都在选择向量的中间元素作为枢轴。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T00:03:36.337

可能除其他外，当您移动索引以查找交换时，您实际上并没有查看向量的内容。本节：

```
 while( i < pivot && i < j)
        i++;
    while( j >= pivot && i < j)
        j--; 
```

应该改成这样：

```
 while( numbers[i] < pivot && i < j)
        i++;
    while( numbers[j] >= pivot && i < j)
        j--; 
```

正如其中一位评论者所提到的，更大的教训是学会使用一个好的调试器来单步调试你的代码。

同样，您应该选择枢轴作为数组值。例如`pivot = numbers[start]`

# java - 如何编码一个按钮以开始显示为灰色并禁用，直到填充图像视图？

> ID：11217579
> 
> 赞同：0
> 
> 时间：2012-06-26T23:55:12.870
> 
> 标签：java, android, button, imageview

我想让一个按钮变灰，直到用户使用手机图库中的所需图像填充图像视图。我将如何对此进行编码以使按钮的默认状态变灰（和禁用），但是一旦图像显示在图像视图中，按钮就会启用并且不再对用户变灰？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T00:10:46.813

`myButton.setEnabled(false);`你试过这个吗？这将使您的按钮看起来变灰并且不监听点击事件！

`myButton.setEnabled(true);`如果您想收听点击事件，请致电 并打开您的按钮

如果你想制作一个自定义按钮，你也可以看到这个[链接](http://shikii.net/blog/android-button-background-image-pressedhighlighted-and-disabled-states-without-using-multiple-images/)

# css - 在 div 中对齐标题元素（文本/徽标/导航）

> ID：11217593
> 
> 赞同：0
> 
> 时间：2012-06-26T23:56:40.103
> 
> 标签：css, html, css-float

好的，所以我承认在这方面是全新的。我首先是一名设计师，我试图通过拆解预先构建的模板并研究它们来学习如何编码。

我想要做的是 - 有一小行文本（左浮动），一个居中的徽标（其宽度/高度可能会因最终确定而有所不同）和一个文本导航（右浮动）。我正在修改一个主题。

这是我所拥有的：

```
 <header id="header" class="wrapper<?php if (get_option($prefix.'_width') == "width_full") { ?>_full<?php } ?>">

    <div class="header_top clearfix">
        <div id="logo" class="left_float">
            <a class="logotype" href="index.php"><img src="<?php echo get_option($prefix.'_logo', 'images/logo.png'); ?>" alt="Logotype"></a>  
        </div>

        <?php  if(function_exists('wp_nav_menu')) : ?>  
            <?php 

            wp_nav_menu(  
                array(  
                    'theme_location'  => 'primary-menu', 
                    'container'       => 'nav',                     
                    'container_id'    => 'nav',  
                    'container_class' => 'right_float',  
                    'menu_class'      => '', 
                    'menu_id'         => '' ,
                    'walker' => new custom_menu_output()
                ));  
            ?>  
        <?php else: ?>  
            <nav id="nav" class="right_float">  
                <ul>  
                    <?php wp_list_pages('title_li=&depth=0'); ?>  
                </ul>  
            </nav>  
        <?php endif; ?> 

    </div> 
```

下面是CSS。我试图将 .left_float 与 .center 类互换作为测试，但它最终将导航向下推。

```
.left_float { 
    float: left; 
    }

.center {
    display: block;
    margin-left: auto;
    margin-right: auto }

 .right_float { 
     float: right; 
     } 
```

长帖-对不起！任何帮助将不胜感激 - 甚至是一些我可以阅读和学习并自己开始的链接。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:06:45.857

你`wp_nav_menu`没有任何 div。Enclose 带有一个 div 并仅`class=lfloat`向所有三个`div`s 添加一个类。

```
`.lfloat{
float: left;
}` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T00:24:40.627

**第 1 部分：**首先，您的代码中没有`<div>`with 类`center`。首先将and标记之间的*所有*代码放入它自己的标记中。我假设你想要类似的东西：`left_float``right_float` `<div>``<div class="center">...</div>`

```
<header id="header" class="wrapper<?php if (get_option($prefix.'_width') == "width_full") { ?>_full<?php } ?>">

    <div class="header_top clearfix">
        <div id="logo" class="left_float">
            <a class="logotype" href="index.php"><img src="<?php echo get_option($prefix.'_logo', 'images/logo.png'); ?>" alt="Logotype"></a>  
        </div>
        <div class="center">
        <?php  if(function_exists('wp_nav_menu')) : ?>  
            <?php 

            wp_nav_menu(  
                array(  
                    'theme_location'  => 'primary-menu', 
                    'container'       => 'nav',                     
                    'container_id'    => 'nav',  
                    'container_class' => 'right_float',  
                    'menu_class'      => '', 
                    'menu_id'         => '' ,
                    'walker' => new custom_menu_output()
                ));  
            ?>  
        <?php else: ?>
        </div>
            <nav id="nav" class="right_float">  
                <ul>  
                    <?php wp_list_pages('title_li=&depth=0'); ?>  
                </ul>  
            </nav>  
        <?php endif; ?> 

    </div>
    <br clear="all" /> 
```

你会注意到我添加`<div class="center">...</div>`和添加`<br clear="all" />`（这对下一部分很重要......）

**第 2 部分：**将您的 CSS 更改为：

```
.left_float, .center, .right_float { 
    float: left; 
} 
```

但请确保`<br clear="all" />`在代码中保留新的！最后，您可以将所有 s 浮动`div`到左侧，并且它们都将彼此相邻。从那里，您可以将每个 s 的宽度修改为`div`您想要的任何内容！

好吧，我希望这会有所帮助，
Hope4You

# jquery - 在页面加载时将某些页面加载到模式框中

> ID：11217594
> 
> 赞同：0
> 
> 时间：2012-06-26T23:56:41.557
> 
> 标签：jquery, ajax

我使用 jQuery 构建了一个简单的模式，它接受一个 url，然后使用 ajax 方法加载它，并将响应 html 插入到我在模式框设计中显示在屏幕上的 div 中。简单的东西！

然而，这些页面是实际的 url，例如`domain.com/posts/add`，可以通过浏览器直接访问，而不仅仅是单击应用程序中的链接。即使用户在地址栏中键入 url，我也希望它们始终以模式显示。目前我这样做是为了如果请求不是 Ajax 则将它们重定向到主页或显示 404 以防止这种情况发生。

如果用户直接通过 HTTP 访问它们，我更愿意在模式中加载这些页面，就像 Chrome 商店那样，例如[https://chrome.google.com/webstore/detail/pjkljhegncpnkpknbcohdijeoejaedia](https://chrome.google.com/webstore/detail/pjkljhegncpnkpknbcohdijeoejaedia)

我该怎么做呢？无需做一些非常混乱的javascript？任何想法或建议将不胜感激。请注意，这应该像一个适当的应用程序一样工作，因为它允许用户使用来回按钮，并且模式应该出现和消失

至于我使用的模态代码......

它真的很简单，这是它的外观示例（注意我的比这更健壮，代码纯粹是为了简单起见）

```
$('.ajax-link').click(function(e){

e.preventDefault;

$.ajax({

url: $(this).attr('href'),
success: function(response) {
$('<div id="modal">' + response + '</div>').appendTo('body');
}
}); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T00:04:03.697

首先，我会使用[.get()](http://api.jquery.com/jQuery.get/)代替。

其次，如果您使用来自另一个域的完整 url，很可能是由于上面链接中提到的安全问题：

由于浏览器安全限制，大多数“Ajax”请求都受[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)的约束；请求无法从不同的域、子域或协议成功检索数据。

除非你正在使用`JSONP`，我怀疑你是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T00:45:10.627

Okies 想出了如何做到这一点：

它需要一个 MVC 框架才能正确执行此操作 IMO，因为由于它们的静态特性，我无法看到老式页面是如何实现的，但基本上这个想法是您的视图必须从其他视图继承，例如：

您有两个视图：人员列表和用于添加人员的表单。然而，它们都继承自另一个视图，例如列表或模式，因此当用户使用 HTTP 请求添加人员时，它会加载表单但使用继承的列表，因此它会创建所需的效果。因此，逻辑都在控制器中完成。

这里有一篇关于继承的精彩文章：http: [//mark-story.com/posts/view/view-inheritance-in-cakephp](http://mark-story.com/posts/view/view-inheritance-in-cakephp) for CakePHP，这是我使用的另一个框架。

希望这对其他想要尝试的人来说是有意义的，但只是尝试了一下，它就像一种享受！

**更新：在考虑了更多之后，我决定继承比需要的复杂得多，并且没有完全复制模态，因为让模态出现在 DOM 的底部需要......很多复杂视图中的结构！**

**我的替代计划是在控制器中进行 XMLHttp 检查，如果没有，则在列表视图中加载，而不是在表单中加载查询字符串或类似 JSON 的内容，然后使用 AJAX 从 url 加载到预期的视图中。这听起来像是对您应该获得的同一页面的双重请求，但它确实完成了工作。**

**唯一的问题是您不能同时发送视图和 JSON，告诉它在另一个视图中加载到模态中......有什么想法吗？除了传递查询字符串？**

* * *

**更新：2**

**我想得越多，做继承似乎更好，因为据我所知，虽然使用 JSON 的方式实际上不可能做到这一点......**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T00:46:24.623

您是否考虑过使用主题标签或 url 变量来表示页面应如何加载？从我在 Google Chrome 中看到的所有模式窗口都在 detail 子目录中，而其他区域是类别或搜索。该窗口位置可能表示页面的显示方式。

# ruby-on-rails - 如何编写 Rails 模型方法来返回其关联列表？

> ID：11217595
> 
> 赞同：0
> 
> 时间：2012-06-26T23:56:59.240
> 
> 标签：ruby-on-rails, model

我要做的是编写一个方法，该方法将返回该模型的所有 outing_locations，它与它有一个 has_many 关系。

```
class Outing < ActiveRecord::Base
  attr_accessible :description, :end_time, :start_time, :title, :user_id

  belongs_to :user
  has_many :outing_locations
  has_many :outing_guests
  has_one :time_range, :foreign_key => "element_id", :conditions => { :element_type => "outing" }

  validates :title, :presence => true
  validates :start_time, :presence => true # regex
  validates :end_time, :presence => true # regex

  def host_name
    return User.find(self.user_id).full_name
  end

end 
```

我正试图让这个块特别工作。

还有另一个名为 OutingInvite 的模型，其中包含特定 Outing 的 id。我需要使用它来获取正确的郊游，然后拉出所述郊游的相关郊游地点。

这是一个粗略的示例：

```
<%@outing_invites.each do |invite|%>
 ...
    <% @party = Outing.where(:id => invite.outing_id) %>
    <% @party.outing_locations.each do |location| %> 
```

然后让它输出每个位置。

但是，它说方法'outing_locations'不存在......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T23:58:25.350

`model_instance.associated_model_name.`您可以通过在示例中输入 So 来查看模型的关联模型，即`outing`has_many `outing_locations`。在你拥有一个 的实例之后，`outing`比如说`@o = Outing.find(1)`使用`o.outing_locations``outing_locations``outing.`

请参阅Ruby on Rails 指南中的[此示例](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many)。

**编辑**

您收到`method 'outing_locations' does not exist`错误的原因是因为`Outing.where(:id => invite.outing_id)`返回一个数组，并且没有`outing_locations`数组方法。您需要获取特定实例（如 with `Outing.find(invite.outing_id`）或使用该数组中的特定索引。我建议使用`Outing.find(invite.outing_id)`因为（我假设）你的每个 Outing 都有一个唯一的 ID。

# mysql - 无法编写列出所有未向特定客户销售的销售人员的查询

> ID：11217596
> 
> 赞同：1
> 
> 时间：2012-06-26T23:56:59.323
> 
> 标签：mysql, sql

我成功地编写了列出确实向特定客户销售的销售人员的查询，但不是那些没有销售的销售人员。我怀疑这是因为销售给特定客户的同一销售人员也销售给其他客户。

```
 select a.name from salesperson a inner join orders b on 
  a.salesperson_id = b.salesperson_id where cust_id="4"; 
```

我在想像这样修改相同的查询可以解决问题：

```
 .... a.salesperson_id <> b.salesperson_id where cust_id="4"; 
```

但结果列出了所有的推销员。这很可能是因为在原始查询中返回的相同销售人员也销售给了其他客户

这 3 个表如下所示：

```
 Salesperson table

                     salesperson_ID,     Name,     Age,      Salary

                         1                   Abe        61       140000
                         2                   Bob        34        44000
                         5                  Chris       34        40000
                         7                   Dan        41        52000
                         8                   Ken        57       115000
                         11                  Joe        38        38000

                   Customer table

                   cust_ID,       Name,     City           Industry Type

                      4            faralon    sacramento            H
                      6             Apple       cupertino           S
                      7            Honda       NY                   B
                      9            Kolb      Oshkosh                B

          Orders table

             Number,        Order_date,   cust_id,  salesperson_id,   Amount

            10              8/2/1996           4             2         540
             20             1/30/1999          4             8        1800
             30             7/14/1995          9             1         460
            40             1/29/1998           7             2        2400
            50             2/3/1998            6              7        600
            60             3/2/1998            6              7        720
            70             5/6/1998            9              7        150 
```

任何帮助将不胜感激。~Alpinehyker

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T00:13:00.697

你可以这样做：

```
select a.name from salesperson a 
left join orders b on a.salesperson_id = b.salesperson_id and b.cust_id="4"
where b.Number is null 
```

因此，让所有销售[`left join`](http://en.wikipedia.org/wiki/Join_%28SQL%29#Left_outer_join)人员为 customer 下订单`4`，并仅返回没有此类订单的行。

我假设这`Number`是 的主键`Orders`，或者至少是`not null`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T00:51:39.343

所有尚未销售给 customer_ID 4 的销售人员：

```
SELECT s.Name FROM Salesperson AS s
LEFT JOIN Orders AS o
ON s.salesperson_ID = o.salesperson_ID
WHERE o.customer_ID <> 4
GROUP BY o.salesperson_ID; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T00:19:09.927

也许这会奏效

```
SELECT
    s.*
FROM `Salesperson` AS s
LEFT JOIN `Orders` AS o ON o.`salesperson_id` = s.`salesperson_ID`
WHERE
    o.`cust_id` NOT IN (4)
GROUP BY s.`salesperson_ID`; 
```

回答你的第二个问题：

```
SELECT
     COUNT(*) AS num_of_orders
     ,s.`Name`
FROM `Salesperson` AS s
LEFT JOIN `Orders` AS o ON o.`salesperson_id` = s.`salesperson_ID`
GROUP BY s.`salesperson_ID`
HAVING num_of_orders >= 2; 
```

...和第三个问题。（假设你的`highAchiever`桌子准备好了）

```
INSERT INTO `highAchiever`
(`Name`,`Age`)
SELECT 
    `Name`
    ,`Age`
FROM `Salesperson`
WHERE
    `Salary` >= 100000; 
```

# json - WP7 反序列化 JSON

> ID：11217605
> 
> 赞同：0
> 
> 时间：2012-06-26T23:58:39.667
> 
> 标签：json, windows-phone-7, serialization

我是 c# 的新手，并且在下面给出 InvalidCastException 时遇到问题`Addresses address = (Addresses)serializer.ReadObject(e.Result);`：

```
namespace My_App
{
    [DataContract]
    public class Addresses
    {
        [DataMember(Name = "line1")]
        public string line1
        {
            get;
            set;
        }
        [DataMember(Name = "line2")]
        public string line2
        {
            get;
            set;
        }
        [DataMember(Name = "postcode")]
        public string rpostcode
        {
            get;
            set;
        }
        [DataMember(Name = "city")]
        public string city
        {
            get;
            set;
        }
        [DataMember(Name = "state")]
        public string state
        {
            get;
            set;
        }    
    }

    public partial class sim : PhoneApplicationPage
    {

        public sim()
        {

            InitializeComponent();
        }

        private void Button_Tap(object sender, System.Windows.Input.GestureEventArgs e)
        {
                 var webClient = new WebClient();

                    webClient.OpenReadCompleted += OnOpenReadCompleted;

                    webClient.OpenReadAsync(new Uri("http://www.myurl" UriKind.Absolute));

        } 

    }

    private void OnOpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
    {
            var serializer = new DataContractJsonSerializer(typeof(Addresses));
            Addresses address = (Addresses)serializer.ReadObject(e.Result);

    }

}
} 
```

JSON：

```
[
    {
        "@type": "accountAddress",
        "line1": " 1",
        "line2": "NORWICH ROAD",
        "postcode": "NR1 1AU",
        "city": "NORWICH",
        "state": "NORFOLK"
    },
    {
        "@type": "accountAddress",
        "line1": " 2",
        "line2": "NORWICH ROAD",
        "postcode": "NR1 1AU",
        "city": "NORWICH",
        "state": "NORFOLK"
    },
    {
        "@type": "accountAddress",
        "line1": " 3",
        "line2": "NORWICH ROAD",
        "postcode": "NR1 1AU",
        "city": "NORWICH",
        "state": "NORFOLK"
    }
] 
```

我需要它采用合适的格式才能在 listpicker 对象中使用。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T05:53:27.607

这里的问题是，您的 JSON 有一组地址，而您只是试图访问一个地址。换句话说，您的序列化程序返回一个地址列表，但您正试图将其转换为单个地址对象。

所以把你的代码改成这样，

```
List<Addresses> addressList = (List<Addresses>)serializer.ReadObject(e.Result); 
```

最终，您需要一个列表或集合来将其绑定到 ListPicker。

# perl - MediaWiki::API 中出现“无法解码 JSON”错误的原因是什么？

> ID：11217610
> 
> 赞同：0
> 
> 时间：2012-06-26T23:58:53.640
> 
> 标签：perl, mediawiki, wikipedia-api, mediawiki-api

我们在公司内部安装了私有的 MediaWiki。基于我们源代码的每日构建，我们使用 Perforce 标签更新 wiki，以便人们可以使用标记为简化流程的构建。我们尝试使用[MediaWiki::Bot](http://p3rl.org/MediaWiki%3a%3aBot)和[MediaWiki::API](http://p3rl.org/MediaWiki%3a%3aAPI)在 Windows 服务器上使用 Perl 脚本自动执行此操作。

```
use MediaWiki::Bot;
use MediaWiki::API;

my $mw = MediaWiki::API->new();
$mw->{config}->{api_url} = 'http://somewiki/w/index.php/title#feature_List';

# log in to the wiki
$mw->login({
        lgname     => 'username',
        lgpassword => 'password'
          || die $mw->{error}->{code} . ': ' . $mw->{error}->{details};

          # get a list of articles in category
          my $articles = $mw->list({
                action  => 'query',
                list    => 'categorymembers',
                cmtitle => 'Category:Perl',
                cmlimit => 'max'
            }) || die $mw->{error}->{code} . ': ' . $mw->{error}->{details};

          # and print the article titles
          foreach (@{$articles}) {
            print "$_->{title}\n";
        } 
```

输出：

```
2: Failed to decode JSON returned by http://vaporwiki/w/index.php/Executor#Execu
tor_Feature_List
Decoding Error:
malformed JSON string, neither array, object, number, string or atom, at charact
er offset 0 (before "<!DOCTYPE html PUBLI...") at C:/Perl/lib/MediaWiki/API.pm l
ine 398

Returned Data: <whole page data> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T06:42:33.910

[API](http://www.mediawiki.org/wiki/API) URL 错误。试试`http://vaporwiki/w/api.php`。

# java - Java Servlet/Jsp 图像与表单值一起上传

> ID：11217611
> 
> 赞同：0
> 
> 时间：2012-06-26T23:59:01.827
> 
> 标签：java, image, servlets, parameters, upload

我有一个 jsp 表单，它接受有关员工姓名、性别、年龄、电子邮件地址和

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T04:45:02.563

**Servlet 3.0 容器**对多部分数据具有标准支持。首先，您应该编写一个 HTML 页面，该页面接受文件输入以及其他输入参数。

```
<form action="uploadservlet" method="post" enctype="multipart/form-data">
    <input type="text" name="name" />
    <input type="text" name="age" />
    <input type="file" name="photo" />
    <input type="submit" />
</form> 
```

现在编写一个使用 Servlet 3.0 Upload API 的 UploadServlet。这是演示 API 用法的代码。首先，处理多部分数据的 servlet 应该使用以下两种方法中的任何一种来定义 MultiPartConfig：

*   `@MultiPartConfig`Servlet 类上的注释
*   通过在定义中`web.xml,`添加`<multipart-config>`条目。`<servlet>`

这是 UploadServlet，

```
@MultipartConfig
 public class UploadServlet extends HttpServlet
 {
   protected void service(HttpServletRequest request, 
       HttpServletResponse responst) throws ServletException, IOException
   {
      Collection<Part> parts = request.getParts();
      if (parts.size() != 3) {
         //can write error page saying all details are not entered
       }

       Part filePart = httpServletRequest.getPart("photo");
       InputStream imageInputStream = filePart.getInputStream();
       //read imageInputStream
       filePart.write("somefiepath");
       //can also write the photo to local storage

       //Read Name, String Type 
       Part namePart = request.getPart("name");
       if(namePart.getSize() > 20){
           //write name cannot exceed 20 chars
       }
       //use nameInputStream if required        
       InputStream nameInputStream = namePart.getInputStream();
       //name , String type can also obtained using Request parameter 
       String nameParameter = request.getParameter("name");

       //Similialrly can read age properties
       Part agePart = request.getPart("age");
       int ageParameter = Integer.parseInt(request.getParameter("age"));

    }

} 
```

**如果您没有使用 Sevlet 3.0 Container**，您应该使用 Apache Commons File Upload。以下是使用 Apache Commons File Upload 的链接：

*   [使用 Apache Commons 文件上传](http://commons.apache.org/fileupload/using.html)
*   [Apache Commons 文件上传示例](http://www.kodejava.org/browse/55.html)

**参考：**

*   [Servlet 3.0 javax.servlet.http.HttpServletRequest API](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html)
*   [Servlet 3.0 javax.servlet.http.Part API](http://docs.oracle.com/javaee/6/api/javax/servlet/http/Part.html)
*   [使用 Servlet 3.0 上传文件](http://srikanthtechnologies.com/blog/java/uploadfile.aspx)

# java - 在 JFrame 中居中图像？

> ID：11217613
> 
> 赞同：4
> 
> 时间：2012-06-26T23:59:32.377
> 
> 标签：java, swing, jframe, jlabel, imageicon

我正在为我的程序创建一个 about JFrame。我有一个用于该程序的图标，我将它显示为关于 JFrame 的第一件事，但我在尝试使图像居中时遇到问题。如果我进行某种居中，它会破坏其他所有内容的整体对齐。

我试图让除图标之外的所有 JLabels 左对齐。然后让图标与中心对齐。

我不得不删除一些个人信息，无论我删除了什么，我都将它们放在“[]”之间。

```
import java.awt.Dimension;
import java.awt.Font;

import javax.swing.BorderFactory;
import javax.swing.Box;
import javax.swing.BoxLayout;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class About extends JFrame {

    public About() {
        super("About [PROGRAM]");
        setIconImage([PROGRAM].getInstance().setIcon());

        JPanel main = new JPanel();

        main.setLayout(new BoxLayout(main, BoxLayout.Y_AXIS));
        main.setBorder(BorderFactory.createEmptyBorder(10,10,10,10));

        JLabel icon = new JLabel("", new ImageIcon(getClass().getResource(Constants.ICON_FULL)), JLabel.CENTER);        
        JLabel name = new JLabel("[PROGRAM]");
        JLabel expandedName = new JLabel("[PROGRAM DESCRIPTION]");
        JLabel copyright = new JLabel("[COPYRIGHT JUNK]");
        JLabel credits = new JLabel("[CREDITS]");

        name.setFont(new Font(name.getFont().getFamily(), Font.BOLD, 18));

        copyright.setBorder(BorderFactory.createEmptyBorder(0,0,10,0));

        main.add(icon);
        main.add(Box.createRigidArea(new Dimension(0, 10)));
        main.add(name);
        main.add(expandedName);
        main.add(copyright);
        main.add(credits);

        add(main);

        pack();
        setLocationRelativeTo(null);
        setVisible(true);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T00:27:06.253

考虑使用一些布局来帮助您。想到的包括在 BorderLayout.CENTER 位置带有图标的 BorderLayout。您可以使用使用 JPanel 的 BoxLayout 在一侧堆叠东西，该 JPanel 添加到使用 JPanel 的主 BorderLayout。

例如，

```
import java.awt.BorderLayout;
import java.awt.Font;
import java.awt.event.ActionEvent;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;

import javax.imageio.ImageIO;
import javax.swing.*;

@SuppressWarnings("serial")
public class About extends JDialog {
   public static final String IMAGE_PATH = "http://upload.wikimedia.org/wikipedia/"
         + "commons/thumb/3/39/European_Common_Frog_Rana_temporaria.jpg/"
         + "800px-European_Common_Frog_Rana_temporaria.jpg";

   public About(JFrame frame) {
      super(frame, "About [PROGRAM]", true);

      ImageIcon myIcon = null;
      try {
         URL imgUrl = new URL(IMAGE_PATH);
         BufferedImage img = ImageIO.read(imgUrl);
         myIcon = new ImageIcon(img);
      } catch (MalformedURLException e) {
         e.printStackTrace();
         System.exit(-1);
      } catch (IOException e) {
         e.printStackTrace();
         System.exit(-1);
      }

      JPanel main = new JPanel(new BorderLayout());

      main.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));

      JLabel centerLabel = new JLabel(myIcon);
      JLabel name = new JLabel("[PROGRAM]");
      JLabel expandedName = new JLabel("[PROGRAM DESCRIPTION]");
      JLabel copyright = new JLabel("[COPYRIGHT JUNK]");
      JLabel credits = new JLabel("[CREDITS]");

      name.setFont(new Font(name.getFont().getFamily(), Font.BOLD, 18));

      copyright.setBorder(BorderFactory.createEmptyBorder(0, 0, 10, 0));

      int eb = 20;
      centerLabel.setBorder(BorderFactory.createEmptyBorder(eb, eb, eb, eb));

      JPanel leftPanel = new JPanel();
      leftPanel.setLayout(new BoxLayout(leftPanel, BoxLayout.PAGE_AXIS));
      leftPanel.add(name);
      leftPanel.add(Box.createVerticalGlue());
      leftPanel.add(expandedName);
      leftPanel.add(copyright);
      leftPanel.add(credits);
      leftPanel.add(Box.createVerticalGlue());

      main.add(centerLabel, BorderLayout.CENTER);
      main.add(leftPanel, BorderLayout.LINE_START);

      add(main);

      pack();
   }

   public static void main(String[] args) {
      final JFrame frame = new JFrame("GUI");
      JPanel panel = new JPanel();
      panel.add(new JButton(new AbstractAction("About") {

         @Override
         public void actionPerformed(ActionEvent e) {
            About about = new About(frame);
            about.setLocationRelativeTo(frame);
            about.setVisible(true);
         }
      }));
      frame.add(panel);
      frame.pack();
      frame.setLocationRelativeTo(null);
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.setVisible(true);
   }
} 
```

# python - 如何在后台放置一个进程，这样它就不会中断我的返回？

> ID：11217614
> 
> 赞同：4
> 
> 时间：2012-06-26T23:59:36.990
> 
> 标签：python, multiprocessing

我在我的 Django 站点中迫切需要这个，但由于时间限制，我无法进行任何重大修改。这可能是最便宜的就地修改。

如果我们只关注其中一个`build`或`run`...

1.  `build`现在我从（或运行）取回 id 。

2.  所有繁重的工作现在都在一个单独的函数中。

'

```
import multiprocessing as mp
def main():
   id = get_build_id(....)
   work = mp.Process(target=heavy_build_fn)
   work.start()
   return id 
```

如果我在 shell 中运行它（我没有在实际的 Django 应用程序上测试过它），终端不会完全结束，直到`work`进程完成它的工作。作为一个网络应用程序，我需要立即返回 id。我可以`work`在不中断的情况下放置在背景上吗？

谢谢。

我读过这篇[如何在 Python 中运行另一个脚本而不等待它完成？](https://stackoverflow.com/questions/546017/how-do-i-run-another-script-in-python-without-waiting-for-it-to-finish)，但我想知道其他方法，例如坚持使用 MP。`Popen`解决方案可能不是我真正想要的。

* * *

```
import multiprocessing as mp
import time

def build():
    print 'I build things'
    with open('first.txt', 'w+') as f:
        f.write('')

    time.sleep(10)
    with open('myname.txt', 'w+') as f:
        f.write('3')
    return

def main():
    build_p = mp.Process(name='build process', target=build)
    build_p.start()
    build_p.join(2)
    return 18

if __name__ == '__main__':

    v = main()
    print v
    print 'done' 
```

安慰：

```
I build things
18
done
| 
```

然后等待

最后

```
user@user-P5E-VM-DO:~$ python mp3.py
I build things
18
done
user@user-P5E-VM-DO:~$ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T02:51:45.853

删除`join()`，你可能会得到你想要的。 `join()`在返回之前等待进程结束。

该值将在子进程完成之前返回，但是，您的父进程将处于活动状态，直到子进程完成。不确定这是否对您来说是个问题。

这段代码：

```
import multiprocessing as mp
import time

def build():
    print 'I build things'
    for i in range(10):
        with open('testfile{}.txt'.format(i), 'w+') as f:
            f.write('')
            time.sleep(5)

def main():
    build_p = mp.Process(name='build process', target=build)
    build_p.start()
    return 18

if __name__ == '__main__':

    v = main()
    print v
    print 'done' 
```

回报：

```
> python mptest.py
18
done
I build things 
```

如果您需要在子进程继续时允许进程结束，请在此处查看答案：

[运行进程，不要等待](https://stackoverflow.com/questions/3516007/run-process-and-dont-wait)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T00:21:00.190

不，处理您想要的最简单的方法可能是使用消息代理。Django celery 是一个很好的解决方案。它将让您排队处理并将您的 vie 权利返回给用户。然后，您的流程将按照排队的顺序执行

我相信从 Django 打开的进程与它们打开的线程相关联，因此您的视图将等待返回，直到您的进程完成

# iphone - 从 iphone SDK 中的 JSON 获取具有奇怪字符和数字的结果

> ID：11217616
> 
> 赞同：0
> 
> 时间：2012-06-26T23:59:38.910
> 
> 标签：iphone, json

我正在开发一个 iphone 应用程序，它通过 JSON 格式的 php 文件从 sql server 接收数据，在 safari 浏览器上测试它时工作正常，我也使用 SBJSON 框架在我的应用程序中开发 JSON，我在我的应用程序中收到了数据但是格式错误，如下所示：

```
["&#x0627;&#x0644;&#x062f;&#x0631;&#x0633; &#x0627;&#x0644;&#x062b;&#x0627;&#x0644;&#x062b; &#x0639;&#x0634;&#x0631; - &#x0627;&#x0644;&#x0645;&#x0624;&#x0642;&#x062a; - UIDatePicker ","&#x0627;&#x0644;&#x062f;&#x0631;&#x0633; &#x0627;&#x0644;&#x062b;&#x0627;&#x0645;&#x0646; - &#x0627;&#x0644;&#x0627;&#x0646;&#x062a;&#x0642;&#x0627;&#x0644; &#x0645;&#x0646; &#x0635;&#x0641;&#x062d;&#x0647; &#x0644;&#x0627;&#x062e;&#x0631;&#x0649; - UISwipeGestureRecognizer","&#x0627;&#x0644;&#x062f;&#x0631;&#x0633; &#x0627;&#x0644;&#x0627;&#x0648;&#x0644; - &#x0645;&#x0642;&#x062f;&#x0645;&#x0629; &#x0644;&#x062a;&#x0637;&#x0648;&#x064a;&#x0631; &#x062a;&#x0637;&#x0628;&#x064a;&#x0642;&#x0627;&#x062a; &#x0627;&#x0644;&#x0627;&#x064a;&#x0641;&#x0648;&#x0646; - introduction to Xcode ","&#x0627;&#x0644;&#x062f;&#x0631;&#x0633; &#x0627;&#x0644;&#x062b;&#x0627;&#x0646;&#x064a; - &#x0625;&#x0646;&#x0634;&#x0627;&#x0621; &#x0623;&#x0648;&#x0644; &#x062a;&#x0637;&#x0628;&#x064a;&#x0642; &#x0639;&#x0644;&#x0649; &#x0627;&#x0644;&#x0627;&#x064a;&#x0641;&#x0648;&#x0646; - create your frst app in iphone ","&#x0627;&#x0644;&#x062f;&#x0631;&#x0633; &#x0627;&#x0644;&#x062b;&#x0627;&#x0644;&#x062b; - &#x0627;&#x0633;&#x062a;&#x062e;&#x062f;&#x0627;&#x0645; &#x062d;&#x0642;&#x0644; &#x0627;&#x0644;&#x0645;&#x062f;&#x062e;&#x0644;&#x0627;&#x062a; - Using of JTextField in Xcode ","&#x0627;&#x0644;&#x062f;&#x0631;&#x0633; &#x0627;&#x0644;&#x0631;&#x0627;&#x0628;&#x0639; - &#x0627;&#x0633;&#x062a;&#x062e;&#x062f;&#x0627;&#x0645; &#x0627;&#x0644;&#x0639;&#x062f;&#x0627;&#x062f; &#x0641;&#x064a; &#x0628;&#x0631;&#x0645;&#x062c;&#x0629; &#x0627;&#x0644;&#x0627;&#x064a;&#x0641;&#x0648;&#x0646; - Using UIslider and UIstepper ","&#x0627;&#x0644;&#x062f;&#x0631;&#x0633; &#x0627;&#x0644;&#x062e;&#x0627;&#x0645;&#x0633; - &#x0627;&#x0633;&#x062a;&#x062e;&#x062f;&#x0627;&#x0645; &#x0627;&#x0644;&#x0635;&#x0648;&#x0631;&#x0629; &#x0648; &#x0627;&#x0644;&#x0633;&#x0648;&#x064a;&#x062a;&#x0634; - Using UISwitch and UIImageView ","&#x0627;&#x0644;&#x062f;&#x0631;&#x0633; &#x0627;&#x0644;&#x0633;&#x0627;&#x062f;&#x0633; - &#x0639;&#x0645;&#x0644; &#x0627;&#x0644;&#x0647; &#x062d;&#x0627;&#x0633;&#x0628;&#x0629; &#x0644;&#x0644;&#x0627;&#x064a;&#x0641;&#x0648;&#x0646; &#x062c;&#x0661; - Create Calculator for iPhone part 1 ","&#x0627;&#x0644;&#x062f;&#x0631;&#x0633; &#x0627;&#x0644;&#x0633;&#x0627;&#x062f;&#x0633; - Create Calculator for iPhone part 2 - &#x0639;&#x0645;&#x0644; &#x0627;&#x0644;&#x0647; &#x062d;&#x0627;&#x0633;&#x0628;&#x0647; &#x0644;&#x0644;&#x0627;&#x064a;&#x0641;&#x0648;&#x0646; &#x062c;&#x0662; ","&#x0627;&#x0644;&#x062f;&#x0631;&#x0633; &#x0627;&#x0644;&#x0633;&#x0627;&#x0628;&#x0639; - &#x0639;&#x0631;&#x0636; &#x0627;&#x0644;&#x0645;&#x0644;&#x0641;&#x0627;&#x062a; &#x0639;&#x0644;&#x0649; &#x0635;&#x0641;&#x062d;&#x0629; &#x0648;&#x064a;&#x0628; - Loading PDF,PPT on UIWebview ","&#x0627;&#x0644;&#x062f;&#x0631;&#x0633; &#x0627;&#x0644;&#x062a;&#x0627;&#x0633;&#x0639; - &#x0645;&#x062a;&#x0635;&#x0641;&#x062d; &#x0627;&#x0646;&#x062a;&#x0631;&#x0646;&#x062a; &#x0644;&#x0644;&#x0627;&#x064a;&#x0641;&#x0648;&#x0646; - web browser for iphone ","&#x0627;&#x0644;&#x062f;&#x0631;&#x0633; &#x0627;&#x0644;&#x062b;&#x0627;&#x0645;&#x0646; - &#x0627;&#x0644;&#x0627;&#x0646;&#x062a;&#x0642;&#x0627;&#x0644; &#x0645;&#x0646; &#x0635;&#x0641;&#x062d;&#x0647; &#x0644;&#x0627;&#x062e;&#x0631;&#x0649; - UISwipeGestureRecognizer","&#x0627;&#x0644;&#x062f;&#x0631;&#x0633; &#x0627;&#x0644;&#x0639;&#x0627;&#x0634;&#x0631; - &#x0645;&#x063a;&#x0651;&#x064a;&#x0631; &#x0627;&#x0644;&#x0642;&#x064a;&#x0645; - UISegmentedControl","&#x0627;&#x0644;&#x062f;&#x0631;&#x0633; &#x0627;&#x0644;&#x062d;&#x0627;&#x062f;&#x064a; &#x0639;&#x0634;&#x0631; - &#x062e;&#x0644;&#x0627;&#x064a;&#x0627; &#x0627;&#x0644;&#x062c;&#x062f;&#x0627;&#x0648;&#x0644; - uitableviewcell & uinavigationcontroller","&#x0627;&#x0644;&#x062f;&#x0631;&#x0633; &#x0627;&#x0644;&#x062b;&#x0627;&#x0646;&#x064a; &#x0639;&#x0634;&#x0631; -&#x0627;&#x0644;&#x062a;&#x0627;&#x0628; &#x0628;&#x0627;&#x0631; - UITabBarController"] 
```

当我尝试解析它时的另一个问题，它给了我空结果

```
 NSString *url = [[NSString alloc] initWithContentsOfURL:[NSURL URLWithString:@"http://localhost:8888/newjson.php"] encoding:NSUTF8StringEncoding error:nil];

SBJsonParser *parser = [[SBJsonParser alloc] init];
listt = [parser objectWithString:url]; 
```

列表（NSArray）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T00:18:38.983

您应该首先将一个传递`NSError *`给您的 URL 获取函数以查找错误。

您发布的 JSON 是有效的（尽管由于某种原因字符串似乎是 HTML 编码的）。如果你 NSLog 的值会发生什么`listt`？的价值`url`？

# java - Clojure：用于实现数据库持久性的 Java 文件系统原语

> ID：11217618
> 
> 赞同：3
> 
> 时间：2012-06-27T00:00:08.113
> 
> 标签：java, clojure

## 语境

这纯粹是为了教育目的。我想写一个原始数据库。重点不在于表现；但只是数据库背后的原则。我已经有关于锁定/互斥体/事务的材料。我一无所知的是写入磁盘/保证意外硬件（比如电源）故障的持久性。

为了有适当的恢复/持久性，我在将文件写入磁盘时需要一定的保证。

## 问题：

出于上述目的，我需要什么类型的文件原语（保证文件写入磁盘？保持文件打开并附加到日志？）？JVM 提供什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T00:13:44.163

这是一个很大的话题，因为现在磁盘周围有许多抽象层，尽管从 JVM 的角度来看，一旦调用 fsync，您就非常依赖**fsync 将您的位实际写入磁盘**，您依赖于磁盘上的这些位. 其余的都建立在此之上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T02:49:20.577

要在 write 调用返回之前强制将数据写入磁盘，您必须使用 FileChannel 并调用[force](http://docs.oracle.com/javase/6/docs/api/java/nio/channels/FileChannel.html#force%28boolean%29)。

# c# - 可以发送/无法读取 .NET 串口

> ID：11217619
> 
> 赞同：5
> 
> 时间：2012-06-27T00:00:09.960
> 
> 标签：c#, .net-3.5, serial-port

> **可能重复：**
> [C# 串行端口和超级终端](https://stackoverflow.com/questions/3830135/c-sharp-serialport-and-hyperterminal)

## 问题

我的串行连接有问题。我可以将数据发送到我的设备，但我无法读取数据。如果我使用 Hyperterm，一切都可以正常工作 - 我看到数据进出。

但是，使用我的代码，我的串行端口对象从不接收任何数据，但我发送的数据被设备接收。

有任何想法吗？

## 项目信息：

*   WPF
*   .NET 3.5（不是客户端配置文件版本）
*   在 Windows 7 上开发
*   视觉工作室 2010
*   DA-15 串口转 USB

## 超期设置：

*   COM20
*   每秒位数：115200
*   数据位：8
*   奇偶校验：无
*   停止位：1
*   流量控制：无

## C#代码：

```
SerialPort serial = new SerialPort();

serial.PortName = "COM20";
serial.BaudRate = 115200;
serial.DataBits = 8;
serial.Parity = Parity.None;
serial.StopBits = StopBits.One;
serial.Handshake = Handshake.None;

serial.Open();
serial.Write("Hello World\r\n");    // Echoed on device screen

while (0 == serial.BytesToRead)     // Never receive a response
    System.Threading.Thread.Sleep(100);

char[] first = new char[serial.BytesToRead];
serial.Read(first, 0, first.Length); 
```

## 编辑：

我在上面提到过，但为了确保每个人都知道，我使用的是 USB 转串口线。我认为这不是问题，因为它适用于 Hyperterm，但以防万一。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T00:35:47.057

看看他们使用单独的线程来检查数据的[MSDN 示例。](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.aspx)您还可以订阅[DataReceived 事件](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.datareceived.aspx)以查看它是否正在触发。并且有一条关于将[DTR](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.dtrenable.aspx)和[RTS](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.rtsenable.aspx)设置为 true 的社区评论，如果连接的设备需要它们，它将不会传输数据。

# java - 设计用于创建套接字的测试，TDD Java

> ID：11217624
> 
> 赞同：2
> 
> 时间：2012-06-27T00:01:02.593
> 
> 标签：java, unit-testing, tdd

我开始使用一些测试驱动的开发实践，并且在决定是否以及如何测试我的这段代码时遇到问题。

我有一个`AbstractServer`包含`ServerSocketFactory`and的类`ServerSocket`：

```
 public abstract class AbstractServer extends Thread {

    ...SNIP...
    //ServerSocket and factory. 
    private ServerSocket ss; 
    private ServerSocketFactory ssf;

    public AbstractServer ( int _port ) { 
        this.port = _port;

        try {
            ssf = ServerSocketFactory.getDefault();
            ss = ssf.createServerSocket(port);
        } catch (IOException e) {
            // Couldn't create ServerSocket, die. 
            System.exit(1);
        }
    } 
    ... SNIP ... 
```

the`ServerSocket`和 the `ServerSocketFactory`are`private`都不会暴露在这个类之外。

我的问题：

1.  我是否应该创建测试来检查我是否真的创建了`ServerSocket`和`ServerSocketFactory`？他们在`private`课堂上并没有暴露出来 - 多少测试是太多的测试？

2.  如果测试他们的创建是我应该做的事情，我如何从类外部测试私有的、非公开的（无 getter 方法）对象创建？我天真（阅读：未经测试）的假设是我会创建一个测试类`extending` `AbstractServer`；然后，我必须制作我正在测试的东西`protected`，这半挫败了制作它们`private`的初衷。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:37:03.863

首先，在单元测试期间不要考虑类的内部细节。对于您的单元测试，被测类是一个黑匣子。您没有关于其内部结构的信息。这就是单元测试的想法。

现在，问自己一个问题：您的课程公开的功能是什么？根据您的示例，它创建一个服务器套接字并开始监听它。现在使用单元测试作为指定此功能的手段（伪代码）：

```
int port = 12345;
AbstractServer server = new AbstractServer(port) { };
new Socket("localhost", port); 
```

而已。这个测试解释了你的课程是如何工作的以及它做了什么。当/如果该类停止提供该功能 - 测试将失败并指示您。这正是测试的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T00:18:11.540

1.  我不为填充类变量编写单元测试，这太微不足道了，在我看来，不需要测试。我编写单元测试来测试*例程*。例如，要确保我的`add()`方法实际添加并且我的`remove()`方法实际删除（正确的对象）。如果这些类变量由于某种原因没有正确实例化，那么我的功能测试将捕捉到这一点。
2.  至于测试`private`变量/类，我建议查看以下答案：[https](https://stackoverflow.com/a/7075965/1201423) ://stackoverflow.com/a/7075965/1201423 。它背后的基本概念是：如果它是`private`并且你需要测试它，它真的应该是`private`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T12:20:46.050

首先**测试抽象类不是一个好主意。**您应该测试具体的实现。抽象类只是删除代码重复的一种方式（通过 IS-A 关系），您可以通过许多其他方式删除重复（例如我更喜欢的是 HAS-A 关系）。

**查看您的代码和您的问题可能是这个视频： [如何编写干净、可测试的代码](http://www.youtube.com/watch?v=XcT4yYu_TTs)。** 它将告诉您为什么您采用的方法可能不是一个好主意，并会为您指出一些示例解决方案。

**通常：指定您的班级提供的场景/功能。不要测试实现细节。**

初学者的良好知识来源是：[测试驱动开发博客](http://test-driven-development.com/)。看看那里的旧帖子。

编辑：如果你想测试遗留代码，也有适用的模式。在这种情况下，一般规则是从验收开始，而不是单元测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T00:17:21.237

您实际上并不需要专门测试这个简单的构造函数。只有两个调用 - 这两个调用都是公开可访问的方法，并且可以进行测试以确保它们能够以自己的方式工作。即使在更复杂的构造器情况下，也应该使用可测试的构造器模式。

至于多少是太多，我有时可能会稍微放松封装以使测试更容易，但这确实取决于具体情况。通常，只要您彻底测试您的公共 api，您就可以确信模块中的所有代码都正常工作 - 如果公共 api 完全工作，那么任何私有代码都应该没有问题。

这是一篇关于 tdd 的文章，涉及一些更难的领域：[这里](http://www.developerfusion.com/article/9375/tdd-in-practice-dealing-with-hardtotest-areas/)

# javascript - 简单的一个？将 var 从 chrome 扩展页面传递给 PHP 页面？

> ID：11217626
> 
> 赞同：0
> 
> 时间：2012-06-27T00:01:04.993
> 
> 标签：javascript, html, javascript-events, google-chrome-extension

我正在尝试将 var 传递给 PHP 页面，然后在 chrome 扩展的新选项卡中打开它。

HTML： `<input type="button" value="open PHP" onClick="OnClickbtn()">` Javascript：

```
function OnClickbtn()
{
 window.location.href = "http://localhost/Chrome/Test.php?var=1234";
} 
```

PHP：

```
<?php
$var=$_GET['var'];

echo "Link is: ";
echo $var;

?> 
```

现在......问题是我无法将 var 发送到 PHP，即使我这样做了，我将如何从 chrome 扩展中在 chrome new TAB 中打开它？

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T01:09:38.720

你试过用`chrome.tabs.create(object createProperties, function callback)`吗？您需要在扩展清单中声明“选项卡”权限。

看看[这里](http://code.google.com/chrome/extensions/tabs.html#method-create)

编辑：正如我在评论中所说：

> 像你正在做的那样加载 URL 应该可以工作，也许你在使用具有特殊字符（如 # 或 &）的长 URL 时遇到问题（即：谷歌搜索），那是因为你必须用 `encodeURIComponent(url)`or转义 URL`escape(url)`

工作示例（至少在我的测试中有效）： `window.location.href = 'http://localhost/test.php?var=' + encodeURIComponent('https://www.google.com.ar/#hl=es-419&q=urlencode+javascript')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T00:15:51.317

您可以将侦听器事件添加到 chrome 扩展。您能否提供有关您的 chrome 扩展程序的更多信息？

# php - 如何在禁用 JavaScript 的情况下维护下拉列表的持久状态 - PHP

> ID：11217628
> 
> 赞同：0
> 
> 时间：2012-06-27T00:01:51.280
> 
> 标签：php, javascript, drop-down-menu, persistence

我正在用 PHP 编写一些表单编码，当启用 JavaScript 时，我的一切工作都很好。但是从过去的经验和其他网站在禁用 JavaScript 时表现不佳的糟糕经验来看，我认为我会在当前项目中更加关注它。

关于`input type="text"`POST 字段，这不是问题。但是对于我碰巧正在使用的下拉菜单，我无法让它持续存在。好吧，我可以，但是默认选择不正确。这是一些代码...

基本下拉结构：

```
<select id="topic" name="topic">
    <option value="Select an option">Select an option</option>
    <option value="Topic A">Topic A</option>
    <option value="Topic B">Topic B</option>
    <option value="Topic C">Topic C</option>
</select> 
```

我想也许如果我`selected`与 POST 数据混合，我可以让它像这样工作：

```
<select id="topic" name="topic">
    <option selected="selected" value="Select an option">Select an option</option>
    <option value=""><?php echo $_POST['topic']; ?></option>
    <option value="Topic A">Topic A</option>
    <option value="Topic B">Topic B</option>
    <option value="Topic C">Topic C</option>
</select> 
```

但它不会持续存在；它只会回到默认的“选择一个选项”。

尝试这个也不起作用：

```
<select id="topic" name="topic">
    <option value="Select an option">Select an option</option>
    <option selected="selected" value=""><?php echo $_POST['topic']; ?></option>
    <option value="Topic A">Topic A</option>
    <option value="Topic B">Topic B</option>
    <option value="Topic C">Topic C</option>
</select> 
```

它仍然存在，但没有正确的默认值。开始为空白（因为尚未输入 POST）。

我做了一些谷歌搜索，并没有真正找到对这种事情非常有用的东西，所以我不确定下一步该去哪里。有什么想法/建议吗？

非常感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T00:06:58.400

我通常会执行以下操作：

```
<select id="topic" name="topic">
<option value="Select an option">Select an option</option>
<?php
    $topics=Array("Topic A","Topic B","Topic C");
    foreach($topics as $topic){
        echo '<option value="'.$topic.'"'.($_POST['topic']==$topic?' selected="selected"':'').'>'.$topic.'</option>';
    }
?>
</select> 
```

正如您所描述的那样，它会打印出选择框，但它会将 selected="selected" 属性添加到与您的 $_POST 变量匹配的选项中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T00:09:38.077

```
<?php 
$topic='';
if isset($_POST)
  if is_array($_POST)
    if isset($_POST['topic'])
      $topic=$_POST['topic'];
?>

<select id="topic" name="topic">
    <option value="Select an option">Select an option</option>
    <option value="Topic A"<?php if($topic=='Topic A') echo ' selected="selected"'; ?>>Topic A</option>
    <option value="Topic B"<?php if($topic=='Topic B') echo ' selected="selected"'; ?>>Topic B</option>
    <option value="Topic C"<?php if($topic=='Topic C') echo ' selected="selected"'; ?>>Topic C</option>
</select> 
```

# excel - Excel中的4列VLOOKUP

> ID：11217630
> 
> 赞同：0
> 
> 时间：2012-06-27T00:02:13.263
> 
> 标签：excel, if-statement, vlookup

我想在 Excel 中执行以下操作

```
IF(any cell in Column D = any cell in Column C AND any cell in Column B = any cell in Column A)
Display TRUE in Column E 
```

最好在这里使用 VLOOKUP 还是 IF？

希望这能解释我需要什么！

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:15:05.547

您可以像这样使用 COUNTIF() ：

在单元格 F1 中

```
=COUNTIF(B:B,A1) 
```

并将其向下拖动到所有 F 列

在单元格 G1 中

```
=COUNTIF(D:D,C1) 
```

并将其向下拖动到所有 G 列

然后在您的结果单元格中

```
=IF(SUM(SUM(F:F),SUM(G:G)) > 0, TRUE, FALSE) 
```

# opencv - 在 C++ 中使用 OpenCV 进行对象检测

> ID：11217631
> 
> 赞同：1
> 
> 时间：2012-06-27T00:02:25.773
> 
> 标签：opencv, computer-vision, object-detection

我目前正在为我正在建造的无人机开发视觉系统。该系统的目标是在视频流中找到定义相当明确（见下文）的目标对象，该视频流将是地面的二维飞越视图。到目前为止，我已经尝试过训练并使用基于 Haar 特征的级联（la Viola Jones）来进行检测。我正在使用 5000 多张不同角度（透视偏移）和范围（框架中的大小）的目标图像进行训练，但只有 1900 张“背景”图像。这根本不会产生好的结果，因为我找不到合适数量的级联级联来平衡少量误报和少量误报。

我正在向在这方面有经验的人寻求建议，关于我是否应该：1）放弃级联，转而采用更适合由其轮廓和颜色定义的对象的东西（我读过 VJ 级联是不是）。2）改进我的级联训练集，或者通过添加正面、背景帧、更好地组织/拍摄它们等。3）我目前无法理解的其他一些方法。

目标描述：

*   主要形状：三角形、正方形、圆形、椭圆形等。
*   不同的、纯色的、原色（或接近）的颜色。
*   最小尺寸在 2 到 8 英尺之间（大到足以从几百英尺的 AGL 上轻松看到）
*   对象中心的大而单一的字母数字，具有自己独特的、纯色、原色或几乎原色。

我的目标是使用非常快速的东西，例如 VJ 级联，来找到可能的对象及其相关的边界框，然后将它们传递给更精细的处理例程以确定属性（对象的颜色和 AN，AN 的值，实际形状和 GPS 位置）。您可以为我完成此目标提供的任何建议将不胜感激。我目前拥有的源代码在这里发布有点长，但如果您想查看它以供参考，可以免费获得。提前致谢！

-JB

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:21:25.947

我建议放弃 Haar 分类，因为您对自己的对象了解很多。在这些情况下，您应该首先检查您可以使用哪些功能：

1）头顶飞行意味着，正如您所说，您基本上可以将这些视为二维平面上的固定形状。会有缩放、旋转和一些小的仿射变换，这在很大程度上取决于你的相机的广角。如果它不是特别广角，那部分可能可以忽略不计。此外，您可能知道您的高度，通过它您可能还可以对目标大小（缩放）做出很好的假设。

2）你知道颜色，这也很容易找到对象。如果这些非常定义为原色，那么您可以根据颜色过滤图像并找到这些轮廓。如果你想做一些更高级的事情（虽然对我来说似乎没有必要......）你可以做一个[backprojection](http://opencv.itseez.com/doc/tutorials/imgproc/histograms/back_projection/back_projection.html?highlight=detecting%20color)，根据我的经验，这是非常有效和快速的。请注意，如果您正在创建对象，最好使用红绿色和蓝色而不是原色（红绿色和黄色）。然后，您可以简单地将图像[拆分](http://opencv.itseez.com/modules/core/doc/operations_on_arrays.html?highlight=split#void%20split%28const%20Mat&%20m,%20vector%3CMat%3E&%20mv%29)为各自的通道并使用非常高的阈值。

3）你知道几何形状。我自己从来没有这样做过，但据我所知，选项是使用[矩](http://opencv.itseez.com/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=match%20shapes)或使用霍夫变换（虽然openCV只有直线和圆的霍夫算法，所以你必须为其他形状编写自己的.. .)。如果没有这一步，你可能已经有了足够好的结果......

如果您想要更具体的建议，上传几个示例图像会非常有用。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-07T10:29:29.003

可以解决，但我最近遇到了一篇论文，其中包含使用归一化梯度特征进行通用对象检测的开源许可证：http: [//mmcheng.net/bing/comment-page-9/](http://mmcheng.net/bing/comment-page-9/)

算法对光照、旋转和缩放的性能细节可能需要一点挖掘。我不记得原始论文在哪里。

# mysql - MySQL 基于相似领域的自我加入

> ID：11217641
> 
> 赞同：2
> 
> 时间：2012-06-27T00:04:22.617
> 
> 标签：mysql, self-join

在我们开始之前，不要怪我，我没有设计数据库。我很清楚可以在必要时*添加*列。

考虑这个 mySQL 片段：

```
SELECT r.id,
   crf.field_name,
   crf.field_value
FROM reports r
   JOIN custom_report_fields crf
     ON crf.report_id = r.id
WHERE r.id IN ( 100, 101 )
   AND field_name LIKE "service_%" 
```

这会产生这些无益的结果：

```
ID   | field_name     | field_value
------------------------------------------------
100  | service_id_1   | 20
100  | service_name_1 | "Shipping"
100  | service_cost_1 | 5.25
101  | service_id_1   | 21
101  | service_name_1 | "Handling"
101  | service_cost_1 | 7.50
101  | service_id_2   | 20
101  | service_name_2 | "Shipping"
101  | service_cost_2 | 7.75 
```

我需要一个会产生如下结果的查询：

```
Report ID | Field ID | Name       | Cost
------------------------------------------------
100       | 20       | "Shipping" | 5.25
101       | 21       | "Handling" | 7.50
101       | 20       | "Shipping" | 7.75 
```

请注意，报告可能有任意数量的成本，每个连续成本都会获得另外三个条目和增加的后缀（'service_id_x'、'service_name_x'、'service_cost_x'）。

这个问题的回答者将获得比你选择的宗教的其他追随者更优越的来世。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T00:16:22.960

试试这个解决方案。它非常笨重（考虑到设计本身的笨拙性质，它只能如此优雅！），但它有效：

```
SELECT
    a.id AS Report_ID,
    MAX(CASE WHEN b.field_name LIKE 'service_id_%' THEN b.field_value END) AS Field_ID,
    MAX(CASE WHEN b.field_name LIKE 'service_name_%' THEN b.field_value END) AS Name,
    MAX(CASE WHEN b.field_name LIKE 'service_cost_%' THEN b.field_value END) AS Cost
FROM
    reports a
INNER JOIN
    custom_report_fields b ON a.id = b.report_id
WHERE
    a.id IN (100, 101) AND
    b.field_name LIKE 'service_%'
GROUP BY
    a.id,
    SUBSTRING_INDEX(b.field_name, '_', -1) 
```

# iphone - 如何使用 UITextRange 从 UITextField 获取子字符串

> ID：11217642
> 
> 赞同：3
> 
> 时间：2012-06-27T00:04:33.687
> 
> 标签：iphone, objective-c, ios, cocoa-touch

所以我使用 selectedTextRange 从我的 UITextField 获取光标位置。我想从 TextField 文本的开头到光标位置获取一个子字符串。我该怎么做呢？我能够创建我想要的 UITextRange，但我不知道如何使用它来获取实际的子字符串，因为 substringWithRange 似乎只适用于 NSRange。任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T00:09:15.010

您需要使用`UITextInput`由所有文本视图实现的协议中的方法来执行此操作。使用文本范围，您可以简单地调用`textInRange:`以获取文本。

要获取从字段开头到所选位置的文本，您需要先创建一个文本范围`textRangeFromPosition:toPosition:`，将 传递`beginningOfDocument`给第一个参数，然后将`start`文本范围的 传递给第二个参数。

# html - 如何将 .com 地址变成电子邮件中的字符串？

> ID：11217643
> 
> 赞同：0
> 
> 时间：2012-06-27T00:04:53.403
> 
> 标签：html, email

我的代码创建了一封电子邮件，其中包含电子邮件正文`<h1>google.com</h1>`中的文本。当我查看发送的电子邮件时，它显示`google.com`为一个链接。有没有办法将它标记为不是链接，而只是通过 html 的文本？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T00:10:53.053

这几乎总是由客户完成，并且将取决于客户如何决定什么是测试，什么不是测试。类似的问题出现在带有诸如“请与 jessica@accounting 讨论”之类的文本的电子邮件中，其中它被解析为电子邮件地址。

典型的解决方案是对不应被客户端解析的文本使用 html 实体。使用您的示例：

```
 <h1>google&#46;com</h1> 
```

但是，我会考虑这样一个想法，即如果某些东西实际上是一个 URL，无论您是否打算将它作为超链接，让客户端做它所做的事情，因为用户可能已经习惯了这个功能并且喜欢点击任何 url在体内打开它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T01:26:05.930

如果它真的是一个问题，你总是可以让它成为一个图像。即使用字符串“google.com”制作 gif/jpeg

# javascript - 图像加载事件未触发

> ID：11217644
> 
> 赞同：0
> 
> 时间：2012-06-27T00:04:58.890
> 
> 标签：javascript

这应该工作吗？

```
<script type=text/javascript>

    function load_i () {
        img = new Image();
        img.onload = load_e();
        img.src = "whatever.jpg";
    }

    function load_e() { alert("loaded"); }

</script> 
```

现在图像已加载，但显然未触发 onload 事件。在 FF 和 Chrome 中尝试过。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T00:06:26.427

改变：

```
img.onload = load_e(); 
```

到：

```
img.onload = load_e; 
```

* * *

使用以下行：

```
img.onload = load_e(); 
```

您正在调用`load_e`并将结果分配`undefined`给`img.onload`.

# iphone - 在 UIImageView 上添加不透明度为 0.3 的黑色叠加层

> ID：11217654
> 
> 赞同：20
> 
> 时间：2012-06-27T00:06:40.903
> 
> 标签：iphone, objective-c, ios, ipad, calayer

我有一个 UIImageView，我想在它上面添加一个黑色叠加层。无需覆盖drawRect的最佳方法是什么？我正在考虑在它上面添加一个 CALayer。但不确定如何获得具有 0.3 alpha 的黑色 CALayer。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-06-27T00:21:58.497

像这样的东西？

```
UIView *overlay = [[UIView alloc] initWithFrame:CGRectMake(0, 0, myImageView.frame.size.width, myImageView.frame.size.height / 2)];
[overlay setBackgroundColor:[UIColor colorWithRed:0 green:0 blue:0 alpha:0.3]];
[myImageView addSubview:overlay]; 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-05-10T10:45:02.803

感谢[米克·麦卡勒姆](https://stackoverflow.com/a/11217755/1371853)

**斯威夫特 3**版本

```
let overlay: UIView = UIView(frame: CGRect(x: 0, y: 0, width: cell.imageView.frame.size.width, height: cell.imageView.frame.size.height))
overlay.backgroundColor = UIColor(red: 0/255, green: 0/255, blue: 0/255, alpha: 0.1)
cell.imageView.addSubview(overlay) 
```

我用过**Swift 2.2**

```
let overlay: UIView = UIView(frame: CGRectMake(0, 0, cell.imageView.frame.size.width, cell.imageView.frame.size.height))
overlay.backgroundColor = UIColor(red: 0/255, green: 0/255, blue: 0/255, alpha: 0.1)
cell.imageView.addSubview(overlay) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-27T06:16:49.073

MDT 的答案是正确的。这只是使用`CAGradientLayer`旁边的另一种方式`UIView`。我认为它会通过更多的图形选项来满足您的需求。

首先你应该添加

```
#import <QuartzCore/QuartzCore.h> 
```

到您`ViewController.m`和您想要将此叠加层添加到您的`UIImage`使用的任何地方：

```
CAGradientLayer *gradientLayer = [CAGradientLayer layer];
gradientLayer.frame = myImageView.layer.bounds;

gradientLayer.colors = [NSArray arrayWithObjects:
                        (id)[UIColor colorWithWhite:0.9f alpha:0.7f].CGColor,
                        (id)[UIColor colorWithWhite:0.0f alpha:0.3f].CGColor,
                        nil];

gradientLayer.locations = [NSArray arrayWithObjects:
                           [NSNumber numberWithFloat:0.0f],
                           [NSNumber numberWithFloat:0.5f],
                           nil];

//If you want to have a border for this layer also
gradientLayer.borderColor = [UIColor colorWithWhite:1.0f alpha:1.0f].CGColor;
gradientLayer.borderWidth = 1;
[myImageView.layer addSublayer:gradientLayer]; 
```

我希望这会帮助你做到

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-27T01:02:08.643

这类似于 MDT 的答案，除了使用 CALayer 属性：

```
UIView *blackOverlay = [[UIView alloc] initWithFrame: imageView.frame];
blackOverlay.layer.backgroundColor = [[UIColor blackColor] CGColor];
blackOverlay.layer.opacity = 0.3f;
[self.view addSubview: blackOverlay]; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-27T00:08:36.707

你有没有想过`UIView`在图像视图中添加一个带有黑色背景颜色和 0.3 alpha 的子视图？

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-10-30T08:03:48.103

**斯威夫特 5**版本：

```
func addOverlay(on view: UIView) {
    let overlay: UIView = UIView(frame: CGRect(x: 0, y: 0, width: view.frame.size.width, height: view.frame.size.height))
    overlay.backgroundColor = UIColor.gray
    view.addSubview(overlay)
} 
```

# php - WordPress 文件从插件“上传”

> ID：11217658
> 
> 赞同：1
> 
> 时间：2012-06-27T00:07:12.570
> 
> 标签：php, wordpress

我正在尝试创建将帖子导入 WordPress 的插件。导入的文章 (XML) 包含“图像名称”属性，并且该图像已上传到服务器。

但是，我想让 WordPress 发挥其“魔力”并将图像导入系统（创建缩略图，将其附加到帖子，将其放在 wp-uploads 目录方案下）...我找到了功能`media_handle_upload($file_id, $post_id, $post_data, $overrides)`，但它需要数组 $_FILES 填充实际上传（我没有上传文件 - 它已经放在服务器上）所以它不是很有用

你有任何提示如何进行吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T01:18:18.033

检查以下脚本以获得想法。（它确实有效。）

```
 $title = 'Title for the image';
    $post_id = YOUR_POST_ID_HERE; // get it from return value of wp_insert_post
    $image = $this->cache_image($YOUR_IMAGE_URL);
    if($image) {
        $attachment = array(
            'guid' => $image['full_path'],
            'post_type' => 'attachment',
            'post_title' => $title,
            'post_content' => '',
            'post_parent' => $post_id,
            'post_status' => 'publish',
            'post_mime_type' => $image['type'],
            'post_author'   => 1
        );

        // Attach the image to post
        $attach_id = wp_insert_attachment( $attachment, $image['full_path'], $post_id );
        // update metadata
        if ( !is_wp_error($attach_id) )
        {
            /** Admin Image API for metadata updating */
            require_once(ABSPATH . '/wp-admin/includes/image.php');
            wp_update_attachment_metadata
            ( $attach_id, wp_generate_attachment_metadata
            ( $attach_id, $image['full_path'] ) );
        }
    }

function cache_image($url) {
    $contents = @file_get_contents($url);
    $filename = basename($url);
    $dir = wp_upload_dir();
    $cache_path = $dir['path'];
    $cache_url = $dir['url'];

    $image['path'] = $cache_path;
    $image['url'] = $cache_url;

    $new_filename = wp_unique_filename( $cache_path, $filename );
    if(is_writable($cache_path) && $contents)
    {
        file_put_contents($cache_path . '/' . $new_filename, $contents);

        $image['type'] = $this->mime_type($cache_path . '/' . $new_filename); //where is function mime_type() ???

        $image['filename'] = $new_filename;
        $image['full_path'] = $cache_path . '/' . $new_filename;
        $image['full_url'] = $cache_url . '/' . $new_filename;
        return $image;
    }
    return false;
} 
```

# objective-c - 轻松从特定列表中选择用户进行消息传递 - iOS

> ID：11217659
> 
> 赞同：0
> 
> 时间：2012-06-27T00:07:15.443
> 
> 标签：objective-c, ios, ios5

我是 iOS 和 Objective-C 的新手。我正在编写一个应用程序，用户可以在其中向特定的一组朋友发送消息（从我能够获得的 Facebook 朋友列表中选择）。

我想让用户能够轻松地从此列表中选择朋友 - >有一个“收件人”框（类似于一个类型的电子邮件和电子邮件地址，其名称与用户类型一样 - >用户选择其中一个电子邮件id 的按回车，然后可以添加更多类似的内容）。这不是电子邮件（也不会将消息发送到 Facebook）。

我如何开发代码（UI），以便用户在键入电子邮件（或在 iPhone 上发送 Facebook 消息）时很容易从该列表中选择朋友？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T00:57:22.187

我认为您可以使用由通过[通讯簿](https://developer.apple.com/library/mac/#documentation/userexperience/Reference/AddressBook/Classes/ABAddressBook_Class/Reference/Reference.html)框架获得的联系人姓名填充的 UITableView，或者只使用[通讯簿 UI](http://developer.apple.com/library/ios/#documentation/AddressBookUI/Reference/AddressBookUI_Framework/_index.html)框架。

# java - Java：使窗口点击（包括文本/图像）

> ID：11217660
> 
> 赞同：9
> 
> 时间：2012-06-27T00:07:39.593
> 
> 标签：java, swing, transparent, jna, click-through

我想在 Java 中创建一个**透明**的叠加层，**始终位于顶部**，并且我可以**点击**。我发现了一些关于这个问题的[类似](https://stackoverflow.com/questions/4167664/ability-to-click-through-a-java-app) [帖子](https://stackoverflow.com/questions/10465203/opaque-components-on-transparent-java-windows)，但即使按照他们的回答，我也遇到了一个问题。

我的问题是让**整个窗口**点击通过。让它与 JFrame 一起工作没有任何问题，但是一旦我向它**添加任何组件**（JLabel 或 ImagePanel），**点击属性就不会传递**给它们。

因为我想为我的应用程序创建一个背景图像，所以这基本上使我无法查看每当我单击文本/图像覆盖的区域时窗口如何聚焦的代码。

在我展示我正在使用的代码之前，我首先想参考[这些](https://stackoverflow.com/questions/527933/how-to-make-a-click-and-see-through-always-on-top-window) [线程](https://stackoverflow.com/questions/112224/click-through-transparency-for-visual-c-sharp-window-forms)，它们基本上准确地描述了我想要的东西，除了 C#。

我的目标是创建一个带有透明 .png 图像的叠加层，顶部的一些文本会随关键事件发生变化。如果它使用 JFrame 或任何其他库都没关系。我只需要它与 Windows 兼容。

我还想提一下，我对 Java 有一些经验，但我是使用 JFrame 的新手。

```
import java.awt.BorderLayout;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingConstants;

import com.sun.jna.platform.WindowUtils;

public class Overlay {
    public static void main(String[] args) {
        JFrame frame = new JFrame("Overlay Window");
        frame.setUndecorated(true);
        frame.setAlwaysOnTop(true);
        frame.getRootPane().putClientProperty("apple.awt.draggableWindowBackground", false);
        frame.setLocation(400, 400);
        frame.getContentPane().setLayout(new java.awt.BorderLayout());

        JLabel textLabel = new JLabel("I'm a label in the window", SwingConstants.CENTER);
        frame.getContentPane().add(textLabel, BorderLayout.CENTER); 
        frame.pack();

        System.setProperty("sun.java2d.noddraw", "true");
        WindowUtils.setWindowTransparent(frame, true);
        WindowUtils.setWindowAlpha(frame, 1.0f);

        //Using AWTUtilities gives the same result as WindowUtils
        //AWTUtilities.setWindowOpaque(frame, false);
        //AWTUtilities.setWindowOpacity(frame, 1.0f);

        frame.setVisible(true);
    }
} 
```

请注意，问题**不在于窗口被聚焦**（尽管这是问题的结果），而在于**JLabel 和 ImagePanel 不是 click-through**。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-27T18:57:04.253

让窗口“点击通过”的问题在于它是在系统级别上处理的，超出了标准 API 的范围。这意味着为使窗口“点击”而编写的任何代码都将依赖于系统。话虽如此，在 Windows 上完成此操作的过程相当简单。

在 Windows 2000 和更高版本上，通过在窗口上设置标志[WS_EX_LAYERED 和 WS_EX_TRANSPARENT](https://msdn.microsoft.com/en-us/library/windows/desktop/ff700543%28v=vs.85%29.aspx)，然后单击该窗口。示例代码使用[JNA](https://github.com/twall/jna)来完成此操作：

```
public static void main(String[] args) {
    Window w = new Window(null);

    w.add(new JComponent() {
        /**
         * This will draw a black cross on screen.
         */
        protected void paintComponent(Graphics g) {
            g.setColor(Color.BLACK);
            g.fillRect(0, getHeight() / 2 - 10, getWidth(), 20);
            g.fillRect(getWidth() / 2 - 10, 0, 20, getHeight());
        }

        public Dimension getPreferredSize() {
            return new Dimension(100, 100);
        }
    });
    w.pack();
    w.setLocationRelativeTo(null);
    w.setVisible(true);
    w.setAlwaysOnTop(true);
    /**
     * This sets the background of the window to be transparent.
     */
    AWTUtilities.setWindowOpaque(w, false);
    setTransparent(w);
}

private static void setTransparent(Component w) {
    WinDef.HWND hwnd = getHWnd(w);
    int wl = User32.INSTANCE.GetWindowLong(hwnd, WinUser.GWL_EXSTYLE);
    wl = wl | WinUser.WS_EX_LAYERED | WinUser.WS_EX_TRANSPARENT;
    User32.INSTANCE.SetWindowLong(hwnd, WinUser.GWL_EXSTYLE, wl);
}

/**
 * Get the window handle from the OS
 */
private static HWND getHWnd(Component w) {
    HWND hwnd = new HWND();
    hwnd.setPointer(Native.getComponentPointer(w));
    return hwnd;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-01T20:21:37.557

为什么不直接利用现有的`JLayeredPane`? [这篇博客文章](http://rabbit-hole.blogspot.com/2006/04/decoratingoverpainting-swing.html)演示了在 JFrame 上放置各种覆盖，包括文本、图像和动态绘制的像素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T14:52:20.430

我试图制作完全“事件透明”（您称之为点击）窗口，但该技巧似乎有一些本机限制。

检查此窗口示例：

```
public static void main ( String[] args )
{
    Window w = new Window ( null );

    w.add ( new JComponent ()
    {
        protected void paintComponent ( Graphics g )
        {
            g.setColor ( Color.BLACK );
            g.fillRect ( 0, getHeight () / 2 - 10, getWidth (), 20 );
            g.fillRect ( getWidth () / 2 - 10, 0, 20, getHeight () );
        }

        public Dimension getPreferredSize ()
        {
            return new Dimension ( 100, 100 );
        }

        public boolean contains ( int x, int y )
        {
            return false;
        }
    } );

    AWTUtilities.setWindowOpaque ( w, false );
    AWTUtilities.setWindowOpacity ( w, 0.5f );

    w.pack ();
    w.setLocationRelativeTo ( null );
    w.setVisible ( true );
} 
```

窗口和组件没有任何：

1.  鼠标监听器
2.  鼠标运动监听器
3.  鼠标滚轮监听器
4.  关键听众

`contains`即使由于修改的方法而存在任何侦听器，组件也应该忽略任何类型的鼠标事件。

如您所见 - 组件上未绘制任何内容的区域是事件透明的，但填充区域不是。不幸的是，我没有找到任何解决方法来改变这种行为。似乎一些“低级”java方法正在阻止事件。

这只是一个基于 JComponent 的基本示例。我什至不说更复杂的 Swing 组件，如标签、按钮等，它们可能有自己的事件侦听器，可以阻止事件。

# ruby-on-rails - 为什么添加了迁移的列可能不会显示在 rails admin 中？

> ID：11217663
> 
> 赞同：1
> 
> 时间：2012-06-27T00:08:00.030
> 
> 标签：ruby-on-rails, rails-admin

我使用 rails 和 rake 在表中添加了一些列，但它们没有显示在 rails admin 中。这可能是什么原因？我正在使用它们成功注册新对象...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T00:51:40.020

原来我只需要重新启动 rails 服务器。

# jquery - 使用jquery根据选择的表单值显示div

> ID：11217665
> 
> 赞同：1
> 
> 时间：2012-06-27T00:08:05.707
> 
> 标签：jquery

如果选择了表单中的某个单选按钮，我想显示一个 div，但如果选择了表单中的任何其他单选按钮，则使用 jquery 隐藏该 div。

这是我的代码不起作用：

```
$("select").change(function(){
if($("#radio1").is(":selected")){
    $("#grid_9 omega").slideDown("slow");
} else { $("#grid_9 omega").slideUp("slow"); } 
}); 
```

我想要显示 div“gid_9 omega”的单选按钮的 ID 是“radio1”。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T00:35:09.333

我冒昧地认为，也许 omega 是您错误地指代的一类。

首先，这里没有选择，所以这对你不起作用。您需要对所有`input[type=radio]`.

接下来， selected 的单选按钮属性实际上是`checked=checked`，因此您需要测试您要检查的那个是否被选中。如果不是，什么也不做，如果是，显示你的 div。

**[一个 JSFiddle](http://jsfiddle.net/supermykel/GMh8z/)**

使用与以下类似的 html 结构：

```
<form id="form1" name="form1" method="post" action="">
  <p>
    <label>
      <input type="radio" name="RadioGroup1" value="radio1" id="radio1" />
      Radio 1</label>
    <br />
    <label>
      <input type="radio" name="RadioGroup1" value="radio2" id="radio2" />
      Radio 2</label>
    <br />
    <label>
      <input type="radio" name="RadioGroup1" value="radio3" id="radio3" />
      Radio 3</label>
    <br />
  </p>
</form>
<div id="grid_9" class="omega" style="display:none">show me when Radio 1 is chosen​​​​​ 
```

你的 js 看起来像这样：

```
$(document).ready(function() {
    $("input[type=radio]").on('click', function(){
        if ($('#radio1').is(':checked')){
            $("#grid_9.omega").slideDown("slow");
        } else { 
            $("#grid_9.omega").slideUp("slow");
        }
    });
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T00:20:35.207

你不应该在 ID 名称的字符之间使用空格，而且`select`元素与按钮无关`radio`，试试这个：

```
$("#radio1").change(function(){
if($(this).is(":checked")) {
    $(".omega").slideDown("slow"); // note that `omega` has no "hash" or "dot" sign and this returns undefined
} else if ($('.omega').is(':visible')) { // makes sure that omega is visible
   $(".omega").slideUp("slow"); 
} 
}); 
```

# visual-studio-2010 - VS2010 配置管理器 - 不断设置回任何 CPU

> ID：11217671
> 
> 赞同：1
> 
> 时间：2012-06-27T00:09:17.267
> 
> 标签：visual-studio-2010

我们有一些项目必须构建为 x86。所以我们去解决方案，选择属性-> 配置属性-> 配置管理器，将所有内容设置为 x86，将所有项目设置为构建，我们就可以开始了！

三天后（或多或少）我打开项目，它回到任何 CPU，以及启用或未启用哪些项目的混合。事实上，今天早上我 RDP 进入我的工作站，编辑了一些代码，将这些设置设置为 x86。然后重新启动机器，进入办公室，打开项目，它又回到了 Any CPU。

到底他妈发生了什么？我知道 x86 并不“酷”，但我们有这个要求的真正原因。

# ms-word - 从表格单元格复制/粘贴时保留列表格式的方法？

> ID：11217672
> 
> 赞同：0
> 
> 时间：2012-06-27T00:09:21.463
> 
> 标签：ms-word, office-interop

我的 Word 互操作应用程序需要从 Word 文档中的表格单元格中获取内容。问题是，某些项目的格式似乎已损坏。例如，列表的最后一项没有应用列表样式。标题只是普通文本等。

如果您创建一个表，在表中创建一个列表并尝试将列表复制/粘贴到其他地方，也会发生同样的情况。

有没有其他人遇到过这个问题，也许找到了解决方案？有什么办法可以欺骗 word 给出正确的格式？提前致谢

示例代码

```
Range range = cell.range;
range.MoveEnd(WdUnits.wdCharacter, -1);
...
range.FormattedText.copy() 
```

该范围包括不应导出的单元格结束标记。我刚刚注意到，当不更改范围时，列表格式正确，但整个单元格导出为表格，这很糟糕，因为我想将内容导入另一个文档（这将无限嵌套表格）

Word2010 v14.06.6112.5000

# xcode - 尽管所有构建设置都相反，Xcode Instruments 正在剥离符号

> ID：11217673
> 
> 赞同：13
> 
> 时间：2012-06-27T00:09:23.033
> 
> 标签：xcode, instruments, symbols, stripping

**问题**

Instruments 的 Time Profiler 正在从我的应用程序中删除除系统库之外的所有符号，尽管事实上我已在 Xcode 的所有相关构建设置中禁用了此行为 -**但仅在一台开发机器上。**另一台开发机器运行正常。

**描述**

Instruments 的 Time Profiler 正在剥离除系统库之外的所有符号，尽管事实上我已在 Xcode 的所有相关构建设置中禁用了此行为——但这仅发生在我的一台开发机器上。我有两台开发机器运行相同版本的 OS X、Xcode 和 Instruments，每台机器都使用相同 Xcode 项目的相同副本，具有相同的构建设置、方案和其他配置，并且应用程序使用相同的配置文件进行配置测试设备（iPhone 4S 最新公开版 iOS 5）。

*机器 1*
- Mac OS X
10.7.4 - Xcode 4.3.2 (4E2002)
- Instruments 4.3 (4321)

*机器 2*
- Mac OS X
10.7.4 - Xcode 4.3.2 (4E2002)
- Instruments 4.3 (4321)

**重现步骤**

1.  在每台机器上打开包含的示例项目。
2.  确保选择 iPhone 4S 作为测试设备。
3.  选择产品 > 简介
4.  当 Instruments 启动时，选择 Time Profiler 并继续。
5.  运行应用程序。
6.  请注意在 iMac（机器 1）上运行但在 MacBook Air（机器 2）上运行时符号是如何被剥离的。

**预期行为**

我自己的代码中的符号应该出现在两台机器上的 Time Profiler 中。

**回归**

我已经尝试了以下所有方法，但实际结果没有变化：

1.  重新启动机器。

2.  尝试其他 Xcode 项目

3.  删除 Xcode Organizer 中所有项目的“派生数据”。

4.  在 Instruments 中重新符号化文档（在 ~/Library/blahBlahBlah... 中仔细选择正确的 DSYM 文件）

**最后的笔记**

以下是示例项目的 .zip 文件的链接：[示例项目 .zip](http://cl.ly/HfmE)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T19:35:47.153

我终于能够通过一种与核武器和铺路方案相提并论的方法使其工作：

1.  确保为您当前的构建配置禁用所有符号剥离。如果这是为 Instruments 配置的内容，请确保您已为发布配置完成此操作。
2.  从 iOS 设备中删除应用程序。
3.  重新启动 iOS 设备。
4.  重新启动 Mac（否则我根本不相信 Xcode 或 Lion会退出*所有*相关进程）。
5.  启动 Xcode，转到 Organizer > Projects 并删除受影响项目的 Derived Data。
6.  清理你的项目。见鬼，为什么不呢？
7.  Instruments 的构建和配置文件。
8.  为清楚起见，选择 Instruments 中的 Time Profiler。
9.  第一次运行*不会*显示符号，但不要退出。让仪器运行！
10.  在 Instruments 中重新符号化文档，仔细导航到当前构建的正确 dSYM 文件。这应该更容易，因为您已在步骤 5 中删除了派生数据。
11.  现在您应该可以看到您的符号了。如果您隐藏非目标 C 符号，它会有所帮助。

为什么我建议你在第 2 步和第 3 步中删除应用并重启 iOS 设备？我怀疑 Xcode 不会对每个构建执行全新安装，但可能会安装增量，这样 Instruments 中存在的符号地址是当前构建和以前构建的混合。如果是这样，那么对于像我这样在多个 Mac 之间共享单个测试设备的人来说，这个问题就更常见了。这个假设可能是非常不正确的。

如果上述步骤对您不起作用，请在评论中告诉我。我想在未来的某个时候创建​​一份详细的雷达报告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T22:12:44.287

我不确定它是否已在 4.3 中修复，但这是 4.2 中的一个已知问题，请[参见此处](https://developer.apple.com/library/mac/#releasenotes/DeveloperTools/RN-Xcode/_index.html)

仪器 Xcode 4.2 中的 Profile 操作存在一个已知问题。在没有更改源文件的构建之后，Instruments 将无法为目标应用程序收集符号。

这会影响两个项目：

1.  为 Profile 操作选择了 Release 配置。（默认）
2.  剥离链接产品构建设置设置为“是”，或者自定义运行脚本构建阶段剥离产品。（非默认）

解决方法是执行以下任一操作：

1.  在启动配置文件操作之前对产品执行“清洁”。
2.  在进行分析时，对产品进行清理并临时将 Strip Linked Product 构建设置设置为“否”。
3.  将 Profile 操作的配置设置为 Debug。
4.  当您不需要重建时，直接从 Instruments 中运行连续的配置文件。在开发 Mac 应用程序时，使用 Instruments 中的 GC Monitor 模板可能会导致 Instruments 崩溃。要解决此问题，请考虑将您的应用程序迁移到 ARC。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T16:23:16.287

这几天我遇到了类似的问题。我能够分析调试配置，但不能分析发布。首先，我尝试制作发布配置的副本（如网络上某处所建议的那样），但该副本也不起作用。

然后我做了一个Debug的副本，将其命名为Profile，试了一下，Profile的符号显示在profiler中。伟大的！然后我将优化级别等更改为与发布相同，现在它可以工作了！只是想分享这个，因为这个评论会节省我几个小时......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T07:49:42.397

一直面临同样的问题并偶然发现了这个线程。

我意识到我首先使用发布版本对应用程序进行了分析，然后在 Xcode 中为同一应用程序更改了方案后，分析器仍然无法进行符号化。我已经尝试了您上面提到的所有明显的解决方案，但徒劳无功。

探查器不知何故仍在引用第一个构建（发布构建）的设置，因此它无法符号化。因此，我只是出于测试目的更改了应用程序的包标识符，以便完全创建一个新应用程序用于分析目的。我可以检查现在存在泄漏的代码。

试试看，让我知道这是否也适合你。仍在思考为什么 Instruments 无法象征性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-03T21:29:09.737

我有一个类似的问题，我从命令行构建的 os x 应用程序中没有符号（所以在这种情况下，它不是 iphone 或 xcode 问题）。原来问题是由于包含我的 PATH 的错误 DYLD_LIBRARY_PATH 造成的。当我摆脱所有那些非库路径（例如 /usr/bin/）时，它就起作用了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-06T19:17:54.850

我有很多第三方框架，不幸的是它们的符号和二进制文件丢失了。

此外，我的应用程序的二进制文件丢失了。

即，如果我选择文件 > 符号，单击我的目标，并找到类似名称的项目，二进制路径显示为红色。

解决方案是转到 Instruments > Preferences > Symbols，然后添加`/Users/<MY_USER>/Library/Developer/Xcode/DerviedData`到搜索路径。`Library`不被 Spotlight 索引。这样做之后，我至少有了我的应用程序的符号。当我这样做时，我的应用程序名称旁边的小圆圈会从黄色变为绿色，并且在重新启动仪器之间持续存在，这与手动设置二进制文件的其他解决方案不同。

如果你能告诉我如何为我的第三方框架获取所有这些，请告诉我。我将 Carthage 用于一些，其他手动安装。这些还没有运气。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-27T00:30:04.380

尝试打开 XCode 3 和他的 Organizer。并尝试从这个管理器添加一个设备到两台机器。

只需打开 Organizer 并等待他处理。如果您看到“用于开发”按钮，请单击他。

有时，XCode 4 无法真正添加设备以进行全面开发。

# geolocation - 如何使用信号强度计算与 Wifi 路由器的距离？

> ID：11217674
> 
> 赞同：85
> 
> 时间：2012-06-27T00:09:23.443
> 
> 标签：geolocation, wifi, signal-strength

我想计算建筑物内移动设备的确切位置（所以没有 GPS 访问）

我想使用至少 3 个固定 wifi 信号（我知道位置的 3 个固定路由器）的信号强度（以 dBm 为单位）来执行此操作

谷歌已经这样做了，我想知道他们如何根据这些数据找出确切的位置

查看这篇文章了解更多详情： http: [//www.codeproject.com/Articles/63747/Exploring-GoogleGears-Wi-Fi-Geo-Locator-Secrets](http://www.codeproject.com/Articles/63747/Exploring-GoogleGears-Wi-Fi-Geo-Locator-Secrets)

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-06-28T16:28:59.617

FSPL取决于两个参数：一是无线电信号的频率；二是无线传输距离。下面的公式可以反映它们之间的关系。

```
FSPL (dB) = 20log10(d) + 20log10(f) + K

d = distance
f = frequency
K= constant that depends on the units used for d and f
If d is measured in kilometers, f in MHz, the formula is:

FSPL (dB) = 20log10(d)+ 20log10(f) + 32.44 
```

根据 Fade Margin 方程，可以使用以下方程计算自由空间路径损耗。

自由空间路径损耗=Tx 功率-Tx 电缆损耗+Tx 天线增益+Rx 天线增益 - Rx 电缆损耗 - Rx 灵敏度 - 衰减余量

通过上述两个自由空间路径损失方程，我们可以找出以 km 为单位的距离。

```
Distance (km) = 10(Free Space Path Loss – 32.44 – 20log10(f))/20 
```

菲涅耳区是无线电波在离开天线后扩散到的视线周围的区域。您需要清晰的视线以保持强度，尤其是对于 2.4GHz 无线系统。这是因为 2.4GHz 波被水吸收，就像树木中的水一样。经验法则是 60% 的菲涅耳区必须没有障碍物。通常，20% 的菲涅耳区阻塞对链路几乎没有信号损失。超过 40% 的阻塞信号损失将变得显着。

```
FSPLr=17.32*√(d/4f)

d = distance [km]
f = frequency [GHz]
r = radius [m] 
```

来源：[http ://www.tp-link.com/en/support/calculator/](http://www.tp-link.com/en/support/calculator/)

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-08-21T14:05:40.197

要计算距离，您需要信号强度和信号频率。这是java代码：

```
public double calculateDistance(double signalLevelInDb, double freqInMHz) {
    double exp = (27.55 - (20 * Math.log10(freqInMHz)) + Math.abs(signalLevelInDb)) / 20.0;
    return Math.pow(10.0, exp);
} 
```

使用的公式是：

> 距离 = 10 ^ ((27.55 - (20 * log10(频率)) + signalLevel)/20)

示例：频率 = 2412MHz，信号电平 = -57dbm，结果 = 7.000397427391188m

该公式是[自由空间路径损耗（FSPL）](http://en.wikipedia.org/wiki/Free-space_path_loss)公式的变换形式。这里距离以米为单位，频率以兆赫为单位。对于其他措施，您必须使用不同的常数 (27.55)。阅读[这里](http://en.wikipedia.org/wiki/Free-space_path_loss#Free-space_path_loss_in_decibels)的常量。

欲了解更多信息，请阅读[此处](http://rvmiller.com/2013/05/part-1-wifi-based-trilateration-on-android/)。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-12-01T21:59:02.963

```
K = 32.44
FSPL = Ptx - CLtx + AGtx + AGrx - CLrx - Prx - FM
d = 10 ^ (( FSPL - K - 20 log10( f )) / 20 ) 
```

这里：

*   `K`- 常数（32.44，`f`以 MHz 和km 为单位时，以 MHz 和m`d`为单位时更改为 -27.55 ）`f``d`
*   `FSPL`- 自由空间路径损失
*   `Ptx`- 发射机功率，dBm（高达 20 dBm (100mW)）
*   `CLtx`, `CLrx`- 发射器和接收器的电缆损耗，dB（如果没有电缆，则为 0）
*   `AGtx`, `AGrx`- 发射机和接收机的天线增益，dBi
*   `Prx`- 接收器灵敏度，dBm（低至 -100 dBm (0.1pW)）
*   `FM`- 衰减余量，dB（超过 14 dB（正常）或超过 22 dB（良好））
*   `f`- 信号频率，MHz
*   `d`- 距离，米或公里（取决于 K 的值）

*注意：TP-Link 支持网站的公式有错误（缺失`^`）。*

用接收到的信号强度代替`Prx`，以获得与 WiFi AP 的距离。

**示例：** Ptx = 16 dBm，AGtx = 2 dBi，AGrx = 0，Prx = -51 dBm（接收信号强度），CLtx = 0，CLrx = 0，f = 2442 MHz（第 7 个 802.11bgn 通道），FM = 22\. 结果：FSPL = 47 dB，d = 2.1865 m

*注意：FM（淡入淡出）在这里似乎无关紧要，但由于原始公式，我将其保留。*

您应该考虑一下墙壁，表[http://www.liveport.com/wifi-signal-attenuation](http://www.liveport.com/wifi-signal-attenuation)可能会有所帮助。

**示例：（**以前的数据）+ 一堵木墙（5 dB，来自表格）。结果：FSPL = FSPL - 5 dB = 44 dB，d = 1.548 m

另请注意，天线增益不会增加功率 - 它描述了辐射模式的**形状**（全向天线的甜甜圈，定向天线的齐柏林飞艇等）。

这些都没有考虑到信号反射（不知道如何做到这一点）。可能噪音也不见了。所以这个数学可能只适用于粗略的距离估计。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-06-27T16:21:05.453

您的问题的简单答案是三角测量。这基本上是所有 GPS 设备中的概念，我会阅读这篇文章以了解更多关于谷歌如何做到这一点：[http ://www.computerworld.com/s/article/9127462/FAQ_How_Google_Latitude_locates_you_?taxonomyId=15&pageNumber= 2](http://www.computerworld.com/s/article/9127462/FAQ_How_Google_Latitude_locates_you_?taxonomyId=15&pageNumber=2) .

据我了解，他们使用类似于[Skyhook](http://www.skyhookwireless.com/howitworks/)的服务，这是一种定位软件，可根据您的 wifi/手机信号确定您的位置。为了达到其准确性，这些服务拥有大型数据库服务器，用于存储这些蜂窝塔和 wifi 接入点的位置信息——它们实际上会调查大都市地区以使其保持最新状态。为了让您实现类似的目标，我假设您必须使用 Skyhook 之类的服务 - 您可以使用他们的 SDK ( [http://www.skyhookwireless.com/location-technology/](http://www.skyhookwireless.com/location-technology/) )。

然而，如果你想做一些内部的事情（比如使用你自己的路由器的位置）——那么你可能必须创建一个模仿三角测量的算法。您必须找到一种方法来获取设备的`signal_strength`和`mac_address`，并使用该信息以及路由器的位置来确定位置。您可能可以通过执行与此类似的操作（[http://www.makeuseof.com/tag/check-stealing-wifi/](http://www.makeuseof.com/tag/check-stealing-wifi/)）来获取有关连接到路由器的设备的信息。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-02-28T22:10:10.747

距离 (km) = 10^((自由空间路径损耗 – 92.45 – 20log10(f))/20)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-04-18T23:07:55.890

[一般来说，由于多径干扰](https://en.wikipedia.org/wiki/Multipath_propagation)，这是一种非常糟糕的做事方式。这绝对是一个射频工程问题，而不是编码问题。

Tl;博士，wifi射频能量在从墙壁、人、地板等反弹后分散到不同的方向。没有办法单独通过三角测量来判断你在哪里，除非你在一个放置了wifi信标的空房间里完全正确的地方。

谷歌能够逃脱这一点，因为当任何安卓用户（选择加入他们的服务）进入范围时，他们基本上可以将每个 wifi SSID 的位置映射到 GPS 位置。这样，下次用户经过那里时，即使没有完美的 GPS 信号，谷歌母舰也能告诉你你在哪里。通常，他们会将其与糟糕的 GPS 信号结合使用。

我所看到的是一个 Zigbee 或 BTLE 设备网格。如果您知道它们的布局，您可以使用组合的 RSS 来确定您最接近的相对位置，然后从那里开始。

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2019-04-18T22:07:28.723

**别管你是不是版主。我不是以技术作家的身份写给我的听众的**

你们所有人都需要学习使用 GPS 之前的工具进行导航。像六分仪、八分仪、后备人员或星盘之类的东西。

如果您从 3 个不同的位置接收到信号，那么您只需要测量信号强度并从这些位置计算一个比率。简单的三角形计算，其中 a2+b2=c2。信号强度越强，设备离接收器越近。

# quaternions - 如何计算代表三角形 3D 旋转的四元数？

> ID：11217680
> 
> 赞同：2
> 
> 时间：2012-06-27T00:10:27.547
> 
> 标签：quaternions

或者以另一种方式看待它，假设我们有 2 个相同大小的三角形位于 3D 空间的不同部分并定位。您如何计算描述旋转的四元数，以便将四元数应用于三角形 A 会使其位于三角形 B？很难看出如何找到 A 和 B 的法线并从中计算四元数是如何工作的，因为法线向量不包含有关旋转的信息（或者更确切地说，它假定两个三角形法线的标准基本框架，因此丢弃有价值的信息）。看来您需要找到从每个三角形（a，b，c）到其他三角形（a，b，c）的向量，并以某种方式从中构造一个四元数。远远超出我的范围，任何数学家都可以把它哑口无言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T12:15:20.923

首先定向法向量，然后定向平面。

来源=(s1,s2,s3)

目标=(t1,t2,t3)

标准源 = (s1 - s2)cross(s1 - s3)

标准目标 = (t1 - t2)cross(t1 - t3)

Quat1 = getRotationTo (NormSource,NormTarget)

Quat2 = getRotationTo ( Quat1 * (s1 - s2),(t1 - t2) );

QuatFinal = Quat2 * Quat1

# c# - 方法没有重载，需要 0 个参数？

> ID：11217681
> 
> 赞同：4
> 
> 时间：2012-06-27T00:10:31.477
> 
> 标签：c#

我有：

```
 public static int[] ArrayWorkings() 
```

我可以在任何地方用 MyClass.ArrayWorkings() 愉快地调用它。但是我想通过需要一个参数来构建一些额外的功能，例如：

```
 public static int[] ArrayWorkings(int variable) 
```

我收到错误 ArrayWorkings 方法没有重载，需要 0 个参数。为什么是这样？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T00:12:40.177

您将函数更改为需要一个参数......所以现在所有不传递参数的旧函数调用都无效。

这个参数是绝对必要的，还是默认值？如果它是默认值，则使用默认参数或重载：

```
//`variable` will be 0 if called with no parameters
public static int[] ArrayWorkings(int variable=0)  

// pre-C# 4.0
public static int[] ArrayWorkings()
{
    ArrayWorkings(0);
}

public static int[] ArrayWorkings(int variable)
{
    // do stuff
} 
```

# javascript - 在 div 中的鼠标悬停动作中隐藏和显示图像

> ID：11217683
> 
> 赞同：2
> 
> 时间：2012-06-27T00:10:49.810
> 
> 标签：javascript, css, html, mouseover, mouseout

我试图在鼠标悬停时隐藏特定图像并显示另一个图像。鼠标移出时将完成相反的操作。下面是我写的代码，

```
<div id="console" onmouseover="$(this).find('#offer_image').css({display: none});$(this).find('#offer_image_selected').css({visibility: visible});"
     onmouseout="$(this).find('#offer_image').css({visibility: visible});$(this).find('#offer_image_selected').css({display: none});" > 
```

但是当我运行应用程序时它不起作用。谁能指出其中出了什么问题？
非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T00:17:25.560

如果你使用 jQuery 试试

```
<div id="console"
     onmouseover="$(this).find('#offer_image').hide(); $(this).find('#offer_image_selected').show();"
     onmouseout="$(this).find('#offer_image').show(); $(this).find('#offer_image_selected').hide();"> 
```

这使用jQuery 中的方法`show()`和`hide()`方法。

否则使用以下内容：

```
<div id="console"
     onmouseover="$(this).find('#offer_image').css('display', 'none'); $(this).find('#offer_image_selected').css('display', 'block');"
     onmouseout="$(this).find('#offer_image').css('display', 'block'); $(this).find('#offer_image_selected').css('display', 'none');" > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T00:19:19.957

你可以做这样的事情，使用悬停和隐藏/显示：

```
$(document).ready(function()
{
    $('#console').hover(function()
    {
        $(this).find('#offer_image').hide();
        $(this).find('#offer_image_selected').show();
    }, function()
    {
        $(this).find('#offer_image').show();
        $(this).find('#offer_image_selected').hide();
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T00:17:00.287

我实际上完全用 CSS 来做这件事。尝试以下操作：

```
#console #offer_image,#console:hover #offer_image_selected{display:block;}
#console:hover #offer_image,#console #offer_image_selected{display:none;} 
```

JSFiddle 概念证明：http: [//jsfiddle.net/86DJu/](http://jsfiddle.net/86DJu/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T00:19:17.540

一点css3怎么样？从这样的事情开始：

```
#console {
background-image: url("first-image.jpg")
-moz-transition: all 0.5s; 
-webkit-transition: all 0.5s; 
-o-transition: all 0.5s; 
transition: all 0.5s;
}

#console:hover {
background-image: url("second-image.jpg")
} 
```

[http://jsfiddle.net/2wHfN/2/](http://jsfiddle.net/2wHfN/2/)

# jquery - 从事件设置函数调用的正确方法？

> ID：11217685
> 
> 赞同：1
> 
> 时间：2012-06-27T00:10:59.917
> 
> 标签：jquery

这是设置我的事件以调用函数的方法吗？

我在文档中有这个。准备好了

```
$(document).on('change', "[data-viewlink]",
    function ()
    {
        UpdateViewLink($(this).attr("id"));
    }
); 
```

该`UpdateViewLink()`函数被 包围`function()`。这是一个电话，我想知道是否`function(){}`需要。这是设置它的正确方法吗？

我也`UpdateViewLink()`从正常功能调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T00:13:08.643

如果您真的想将 id 作为参数传递给`UpdateViewLink`.

但是，您可以改用它：

```
$(document).on('change', "[data-viewlink]", UpdateViewLink); 
```

更改元素的 id 将在内部`UpdateViewLink`作为`this.id`. 所以这取决于你是否可以修改`UpdateViewLink`。

# ios - 为什么我选择该选项后标签控制元素不换行

> ID：11217689
> 
> 赞同：4
> 
> 时间：2012-06-27T00:11:54.667
> 
> 标签：ios, interface-builder, storyboard, uilabel

我有一个跨越多行的长标签，我无法用它来换行。我选择了 5 行和 wrap-text 选项，但由于某种原因它没有发生。知道怎么做吗？:)

我附上屏幕截图。![在此处输入图像描述](../Images/ab762d642b5f803bfb3d04991463b849.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T00:14:55.570

当您将文本粘贴到标签中时，界面生成器会自动使其宽度足以容纳文本。只需将标签调整为更小的宽度；在右侧的尺寸检查器中最容易做到（标尺图标）。尝试 300px 的宽度。

![在此处输入图像描述](../Images/93bb70ce9b9e8331f3fc6ad150734319.png)

# r - 为什么 dlply 中没有进度条（在 R plyr 包中）

> ID：11217690
> 
> 赞同：1
> 
> 时间：2012-06-27T00:12:13.090
> 
> 标签：r, progress-bar, plyr

我正在使用 plyr 包来处理列表和数据框。我注意到以下行为：

示例 1 -

```
list_2 <- llply(list_1, function_1, .progress='text') 
```

这按预期工作。它从 list_1 生成 list_2 并将 function_1 应用于每个 list_1 元素，我看到了进度条。

示例 2 -

```
list_3 <- dlply(list_2, function_2, .progress='text') 
```

这也适用于我在 list_3 中得到我期望的结果，但是，我没有得到进度条。

综上所述，为什么进度条对dlply不起作用而对llply起作用。（它也适用于 ldply）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T00:23:36.553

因为你没有`data.frame`在任何事情上分裂你。如果您的第二个示例是：

```
list_3 <- dlply(df_2, .(colname2), function_2, .progress='text') 
```

那么它会起作用。plyr 中的进度表基于已完成的块数。

# api - 管理 iOS 客户端/服务器应用程序更新的最佳方式

> ID：11217691
> 
> 赞同：19
> 
> 时间：2012-06-27T00:12:13.227
> 
> 标签：api, versioning

我有一个后勤问题：我正在尝试找出管理 API 与应用程序不同步的最佳方法。解释它的最好方法是用一个例子：

假设 MyApp 版本 1.0 发布到需要 first_name、last_name 和电子邮件的“submit_feedbacK”API。

然后我将 MyApp 2.0 版提交到 App Store。该版本旨在将名字、姓氏、性别和电子邮件发布到 API。所有这些都是 API 上的必填字段。

我遇到的问题： - 如果我在新应用上线之前更新 API，它将破坏 1.0 版 - 如果我等到 2.0 版上线并远程削弱 1.0，我必须正确计时。

我猜“正确答案”是维护两个不同的 API。但是，如果两个 API 都发布到同一个实时数据库，那就有点尴尬了。

有人对如何建模有建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T19:48:10.920

这个问题可能与[iOS 消费 API 设计](https://stackoverflow.com/questions/14528576/ios-consuming-api-design/14528672#14528672)有一些共同之处。

正确的答案肯定是提供两个 API（至少在用户调整的短时间内）。您不必同时维护两个版本，因为一旦发布了较新的版本，您就可以维护该版本，只需将旧版本提供给旧用户即可。您可能需要对其进行的唯一真正更改是安全补丁或重大问题。重大更改（例如您决定重组整个数据库）可能会导致旧版本不再工作，但是更新到较新的 API 版本应该设计为允许以前的版本仍然有效。

我链接到您的另一个问题给出了有关如何让您的应用程序的不同版本访问正确版本的 API 的答案。

另一个注意事项是，您可能更容易（取决于您使用的框架）将您的 API 设计为引擎或子应用程序，并将它们简单地安装在不同的端点。我知道这很容易在 Rails 中通过使用引擎实现，在 Node 和 Express 中使用 app.use() 和子应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:41:02.670

我会使用 webservice/http 端点与您的应用程序进行通信。如果您更喜欢在应用程序的所有版本中维护相同的 URL，则在发送到服务器的所有请求/帖子中包含一个版本号，以便它知道如何处理它们。这也将使开发和测试更容易，因为新版本可以针对服务器上的新 API 进行测试。

因此，在您可以在 web 服务/服务器中调用的任何函数上，添加一个带有版本号的变量。一个 BYTE 应该就足够了，因为我认为一旦您达到相同功能的 256 个版本（如果有的话），您可以重新开始并“终止对 v1.0 的支持”。

一旦服务器接收到带有数据的请求/发布，您只需在服务器 API 中编写一个简单的开关/案例结构，以便支持适用于两个版本。

如果他们做类似的事情，但是例如。交换参数或其他东西，您可以处理所有这些服务器端，并且可以在解决方案的服务器部分维护 BAL/DAL（n 层结构）。

顺便提一句。我的回答不仅适用于 iOS 或智能设备，还适用于“正在进行中”的生产设置的客户端/服务器方法，其中所有内容都必须在线，同时仍在开发和维护中。

希望它是有道理的，否则，评论它，我将尝试进一步解释它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T22:47:00.613

仅供参考，我使用 CodeIgniter。我正在使用[https://github.com/philsturgeon/codeigniter-restserver](https://github.com/philsturgeon/codeigniter-restserver)提供的 REST 控制器。我最终决定为每个版本设置不同的端点。基本上我会为每个版本检查一个新的存储库并将其放入一个唯一的目录中。（即[http://www.mysite.com/1.0/api/method](http://www.mysite.com/1.0/api/method)，[http://www.mysite.com/1.1/api/method](http://www.mysite.com/1.1/api/method)等）试图在一个代码库下维护多个版本的 API 只是听起来太吓人了。至少当我发布一个版本时，我会知道它是一成不变的，我不必担心会破坏它。（注意：我必须使用特殊的 .htaccess 调整来让多个 CodeIgniter 实例从同一个域运行。如果你愿意，我可以分享）

# javascript - 在 OSX Lion 下的 SilkJS 上使用 MySQL

> ID：11217696
> 
> 赞同：0
> 
> 时间：2012-06-27T00:13:32.387
> 
> 标签：javascript, mysql, macos, silkjs

我想在 OSX Lion 下使用[SilkJS](http://silkjs.org/)的 MySQL ，但找不到让它工作的确切步骤。我遵循了此处的一般说明：

1.  执行 SilkJS [OSX Lion 快速安装](http://silkjs.org/installing-silkjs/)
2.  [安装 MySQL](https://stackoverflow.com/a/7141542/54426)
3.  从 SilkJS REPL[加载 MySQL](http://silkjs.org/documentation/MySQL)

下载/配置：

```
$ curl http://silkjs.org/install-osx.sh | sh
$ sudo port install mysql5-server +mysql5
$ sudo -u _mysql mysql_install_db5
$ sudo port load mysql5-server 
```

启动 SilkJS REPL，我运行：

```
$ silkjs 
SilkJS> var MySQL = require('MySQL');
undefined
SilkJS> var SQL = new MySQL();
undefined
SilkJS> SQL.connect();
interpreter line 19 (main):
 (object) :

SilkJS> SQL.startTransaction();
Caught Signal 11 for process: 77312 
```

如何在 Lion 下从 SilkJS 运行简单的 MySQL 查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T01:33:45.667

在 OSX Lion 上全新的 Silkjs 网络安装：

```
mschwartz@dionysus:~/src$ curl http://silkjs.org/install-osx.sh | sh
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  1666  100  1666    0     0   3553      0 --:--:-- --:--:-- --:--:-- 79333
Installing SilkJS in /usr/local/silkjs

You may be asked to enter your password.
This is so the /usr/local directory can be made writable for the install.

Password:
Downloading SilkJS
######################################################################## 100.0%
Installation complete.

You need to add /usr/local/bin to your PATH environment variable.
This can be done by adding this line to your .bashrc file:
export PATH=/usr/local/bin:$PATH

You can run SilkJS with the following command:
$ silkjs

You can run the SilkJS HTTP Server with the following command:
$ httpd-silk.js yourapp.js

For instructions on setting up a WWW site for httpd-silk.js, see
http://silkjs.org/http-server/ 
```

现在看看它的工作原理：

```
mschwartz@dionysus:~/src$ silkjs
SilkJS> console.dir(require('MySQL'));
undefined line 1 (eval):
 function () {
    this.queryCount = 0;
    this.handle = null;
}

undefined
SilkJS> 
```

请注意，console.dir() 显示了一个函数。其余方法定义为函数（构造函数）的属性。所以你必须构造一个 MySQL() 对象：

```
SilkJS> var mysql = require('MySQL');
SilkJS> m = new mysql();
SilkJS> console.log(m.connect)
function (host, user, passwd, db) {
        if (!this.handle) {
            host = host || Config.mysql.host;
            user = user || Config.mysql.user;
            passwd = passwd !== undefined ? passwd : Config.mysql.passwd;
            db = db || Config.mysql.db;
            this.handle = mysql.connect(host, user, passwd, db);
        }
    }
undefined
SilkJS> 
```

现在，为了连接，您必须传入主机、用户、密码和数据库。或者，如果您在 httpd 环境中运行，则设置 Config.mysql，如下所示： Config.mysql = { host: 'localhost', // 或其他运行 MySQL 服务器的主机 user: 'someuser', // 用户名在 MySQL 服务器中进行身份验证 passwd: 'whatever', // MySQL 服务器中用户名的密码 db: 'database_name" // MySQL 服务器中要连接的数据库名称 };

然后 HTTP 服务器将创建一个可从请求到请求的全局 SQL 对象。这是自动的，您可以只使用 SQL.getDataRows()、SQL.getScalar() 等。

# c# - 解析 XML 空引用异常错误？C# ASP

> ID：11217698
> 
> 赞同：0
> 
> 时间：2012-06-27T00:13:35.827
> 
> 标签：c#, asp.net, xml, linq, ebay-api

一个多星期以来，我一直坚持简单的 api 用法。这是详细信息。

尝试对 ebay.com 进行 api 调用。这是我的代码的样子......

这是起始页面代码：

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        Response.Redirect("Results.aspx?Keywords=" + searchString.Text);  
    } 
```

该页面被定向到这段代码：

```
if (Request.QueryString["Keywords"] != null){
        string keywords = Request.QueryString["Keywords"];
            string myAppID = "HIDDEN";
            var xml = XDocument.Load("http://svcs.ebay.com/services/search/FindingService/v1?OPERATION-NAME=findItemsByKeywords&SERVICE-VERSION=1.0.0&SECURITY-APPNAME=" + myAppID + "&RESPONSE-DATA-FORMAT=XML&REST-PAYLOAD&keywords=" + keywords + "&paginationInput.entriesPerPage=5");
            XNamespace ns = "http://www.ebay.com/marketplace/search/v1/services";
            var titles = from item in xml.Root.Descendants(ns + "title")
                              select new{
                                  title = xml.Descendants(ns + "title").Select (x => x.Value),
                              };
        foreach (var item in titles){
                Label1.Text += item;
            } 
        } 
```

这是xml示例：

```
<findItemsByKeywordsResponse xmlns="http://www.ebay.com/marketplace/search/v1/services">
<searchReslut count="5">
<item>
    <title></title>
</item>
<item>
    <title></title>
</item>
<item>
    <title></title>
</item> 
```

我真的宁愿将这些项目变成一个数组，而不仅仅是列出它们。只是想我会先尝试更简单的方法。我得到的错误是：我的标签的 for 循环输出如下所示：

```
{ title = System.Linq.Enumerable+WhereSelectEnumerableIterator`2[System.Xml.Linq.XElement,System.String] }{ title = System.Linq.Enumerable+WhereSelectEnumerableIterator`2[System.Xml.Linq.XElement,System.String] }{ title = System.Linq.Enumerable+WhereSelectEnumerableIterator`2[System.Xml.Linq.XElement,System.String] }{ title = System.Linq.Enumerable+WhereSelectEnumerableIterator`2[System.Xml.Linq.XElement,System.String] }{ title = System.Linq.Enumerable+WhereSelectEnumerableIterator`2[System.Xml.Linq.XElement,System.String] } 
```

输出异常是：

mscorlib.dll 中出现“System.Threading.ThreadAbortException”类型的第一次机会异常 mscorlib.dll 中出现“System.Threading.ThreadAbortException”类型的异常，但未在用户代码中处理线程“”（0x27ee4）已退出代码为 0 (0x0)。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T01:47:54.623

异常来自：

```
var titles = from item in xml.Root.Descendants(ns + "title")
             select new
             {
                 title = item.Parent.Element("title").Value,
             }; 
```

您不需要去找父母，您可以直接获取 title 的值，因为这就是您要搜索的内容：

```
xml.Descendants(ns + "title").Select (x => x.Value) 
```

另外，请看这里[Asking Better Questions](https://blog.stackoverflow.com/2010/10/asking-better-questions/)，因为它可能会让你得到更快/更好的响应。您的问题中有大量不相关的代码，并且很难解析以获取您实际需要帮助的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T15:50:19.413

这应该很容易完成。尝试使用下面的代码。我只是从您的示例中设置示例 XML 并将其解析为 XElement（注意：缺少一些结束标记，我还假设“searchReslut”节点应该是“searchResult”）。接下来，我从根节点中获取名称为“title”且值不为空的所有后代节点。然后我只是循环通过创建的 IEnumerable，并连接标签的文本。如果有任何问题，请告诉我。

```
string ns = "http://www.ebay.com/marketplace/search/v1/services";
string returnedXml = "<findItemsByKeywordsResponse xmlns=\"" + ns + "\">" +
                    "<searchReslut count=\"5\">" +
                        "<item>" +
                            "<title>Title1</title>" +
                        "</item>" +
                        "<item>" +
                            "<title>Title2</title>" +
                        "</item>" +
                        "<item>" +
                            "<title>Title3</title>" +
                        "</item>" +
                     "</searchReslut>" +
                    "</findItemsByKeywordsResponse>";
        XElement xml = XElement.Parse(returnedXml);
        IEnumerable<XElement> titleNodes = xml.Descendants("title").Where(x => x.Value != null);
        foreach (XElement t in titleNodes)
        {
            Label1.Text += t.Value;
        } 
```

# ruby - 如何使用 RSpec 在 gem 中测试 Sinatra 应用程序？

> ID：11217700
> 
> 赞同：4
> 
> 时间：2012-06-27T00:13:42.203
> 
> 标签：ruby, rspec, rubygems, sinatra

我正在编写一个包含开发人员可以扩展的 Sinatra 应用程序的 gem。例如：

```
# gem code:
require 'sinatra'
module Mygem
  class Application < Sinatra::Base
    get 'auth/login' {}
    get 'auth/logout {}
  end
end

# developer code:
require 'mygem'
class DeveloperApp < Mygem::Application
  # ..
end 
```

我也开始使用 RSpec。我应该如何配置 RSpec 来测试这个功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T06:33:46.617

上面的参考资料都提供了丰富的信息和有用的信息，但大多是特定于 Rails 的。我发现很难找到一个简单的方法来对模块化 Sinatra 应用程序进行基本测试，所以我希望这能回答其他人的问题。这是一个完全简单的、尽可能小的测试。这可能不是唯一的方法，但它适用于模块化应用程序：

```
require 'sinatra'
class Foo < Sinatra::Base
   get '/' do
    "Hello"
  end
end

require 'rack/test'

describe Foo do

  include Rack::Test::Methods

  def app
    Foo.new
  end

  it "should be testable" do
    get '/'
    last_response.should be_ok
  end

end 
```

请注意，启动测试时不需要运行服务器（我看到的一些教程暗示你这样做） - 这不是集成测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T06:34:13.593

它实际上非常简单——只需将 rspec 添加到您的 gemfile（然后捆绑安装），并在您的 gem 中创建一个名为 spec/ 的目录。完成后，添加一个文件 spec/spec_helper.rb，其中包含 rspec 的一些配置（主要需要库中的各种文件）以及为您的规范定义一些辅助方法。然后，对于每个模型和控制器，创建一个名为 my_model_name_spec.rb 或 my_controller_name_spec.rb 的文件，并在那里进行测试。

以下是开始使用 rspec 的一些有用资源：

Railscasts：

[http://railscasts.com/episodes/275-how-i-test](http://railscasts.com/episodes/275-how-i-test)

[http://railscasts.com/episodes/71-testing-controllers-with-rspec](http://railscasts.com/episodes/71-testing-controllers-with-rspec)

[http://railscasts.com/episodes/157-rspec-matchers-macros/](http://railscasts.com/episodes/157-rspec-matchers-macros/)

对于一些更高级（但解释清楚）的东西：

[http://benscheirman.com/2011/05/dry-up-your-rspec-files-with-subject-let-blocks](http://benscheirman.com/2011/05/dry-up-your-rspec-files-with-subject-let-blocks)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-08T00:13:27.627

确保包含[机架测试](https://github.com/brynary/rack-test)gem。

你的规范助手应该有：

```
require 'rack/test'
require 'foo' # or where ever your app is

# This can go in a helper somewhere
module AppHelper
  def app
    Foo.new
  end
end

RSpec.configure do |config|
  config.include Rack::Test::Methods
  config.include AppHelper
end 
```

然后，您的规格可以如下所示：

```
require 'spec_helper'

# Example app. Delete this example.
class Foo < Sinatra::Base
   get '/' do
    'Jesse Pinkman'
  end
end

describe Foo do
  it 'is testable' do
    get '/' do
      expect(last_response).to be_ok
    end
  end
end 
```

# installation - WIX：强制安装子目录

> ID：11217702
> 
> 赞同：0
> 
> 时间：2012-06-27T00:13:47.743
> 
> 标签：installation, wix

我像往常一样在 wxs 文件中有一个目录结构：

```
<Directory Id="ProgramFilesFolder">
   <Directory Id="INSTALLFOLDER" Name="$(var.ProductName)"> 
```

但我想知道有没有办法强制 INSTALLFOLDER 总是在同一个目录中结束，但仍然在安装文件夹编辑对话框中正确显示。

因此，如果我选择`C:\`作为安装文件夹，我希望它仍然安装到：`C:\{ProductName}\..`

我知道我可以做到以下几点：

```
<Directory Id="INSTALLFOLDER" Name="$(var.ProgramFiles)">
        <Directory Id="Observador" Name="$(var.ProductName)"> 
```

但随后 InstallDirDlg 中的 EditText 框显示`C:\Program Files\`而不是`C:\Program Files\{ProductName}`

# xsd - xsd中xml元素枚举属性和枚举值

> ID：11217707
> 
> 赞同：2
> 
> 时间：2012-06-27T00:15:13.270
> 
> 标签：xsd, xsd-validation

感兴趣的是以下 xml 子元素：

```
<optInItem type='MARKETING_EMAILS'>NO</optInItem> 
```

我想枚举属性“类型”的可能值（假设 2 个可能值）并枚举 optInItem 的文本值的可能值（值可能是 Yes | No）。我从以下 xsd 开始，但不确定如何添加两个单独的枚举。

```
 <xs:element name="optInItem" maxOccurs="2" minOccurs="2">
      <xs:complexType>
        <xs:simpleContent>
          <xs:extension base="xs:string">
           <xs:attribute type="xs:string" name="type" use="required"/>
          </xs:extension>
        </xs:simpleContent>
      </xs:complexType>
</xs:element> 
```

任何建议/指针将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T01:16:48.620

经过多次迭代，看起来像下面这样的伎俩：

```
<xs:element name="account">
 <xs:complexType>
  <xs:sequence>
    <xs:element type="optInItemType" name="optInItem" maxOccurs="2" minOccurs="2">
  </xs:sequence>
 </xs:complexType>
</xs:element>
<xs:complexType name="optInItemType"> 
 <xs:simpleContent> 
    <xs:extension base="elementOptInItemType">
         <xs:attribute name="type" type="attrOptInItemType"/> 
    </xs:extension> 
 </xs:simpleContent>
</xs:complexType>  
<xs:simpleType name="elementOptInItemType">
 <xs:restriction base="xs:string">
   <xs:enumeration value="YES"/>
   <xs:enumeration value="NO"/>
 </xs:restriction>
</xs:simpleType>
<xs:simpleType name="attrOptInItemType">
 <xs:restriction base="xs:string">
   <xs:enumeration value="MARKETING_EMAILS"/>
   <xs:enumeration value="UPDATE_NOTIFICATIONS"/>
 </xs:restriction>
</xs:simpleType> 
```

这比我想象的要复杂。simpleContent 扩展库允许用户定义类型，因此是将它们组合在一起的关键。

# javascript - Javascript函数没有改变 内部HTML？

> ID：11217710
> 
> 赞同：0
> 
> 时间：2012-06-27T00:15:54.503
> 
> 标签：javascript, jquery, html, blender

所以我在这里有一个简单的设置，我加载一个文件（一个搅拌机 .obj 文件）并显示它。然后我调用这个函数：

```
function parseFile(){
        var fileText = $('#file').html();
        var fileLine = fileText.split("\r\n");
        $('#file').html(fileLine[5]);
    } 
```

这应该使它显示文件的第 6 行，但它仍然显示整个文件。如何让它像在实际文件中一样拆分行？

编辑：让每个人都知道我正在加载这样的文件：`$('#file').load('model.obj');`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T00:58:25.617

调用[`.load()`](http://api.jquery.com/load/)是异步的。该方法将返回，但内容将在将来的某个时候可用。您需要使用回调：

```
$('#file').load('model.obj', function(response, status) {
    alert("Now the file is loaded");
    parseFile();
});
alert("Loading the file just began, nothing available by now"); 
```

或者更多的叙述，使用延迟接口：

```
$('#file').load('model.obj').then(parseFile); 
```

如果您无论如何都需要/想要解析服务器响应，最好[`$.ajax()`](http://api.jquery.com/jQuery.ajax/)直接使用而不是将其加载到 a 中`innerHTML`并从那里读取......您甚至可以使用专用`dataFilter`于 blender.obj 文件类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T00:21:31.423

也许这只是 '\n' 的问题

试试这个 ：

```
var fileLine = fileText.split("\n"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T00:51:13.607

尝试像这样包装你的调用`$(parseFile());`，并确保你的 HTML 实际上包含一个带有文件 id 的元素。

# mysql - mysql - 有什么方法可以帮助使用另一个索引进行全文搜索？

> ID：11217713
> 
> 赞同：6
> 
> 时间：2012-06-27T00:16:17.453
> 
> 标签：mysql, full-text-indexing, full-text-search

假设我有一个“文章”表，其中包含以下列：

```
article_text:  fulltext indexed
author_id:     indexed 
```

现在我想搜索一个出现在某个作者写的文章中的词。

所以像：

```
select * from articles 
where author_id=54 
and match (article_text) against ('foo'); 
```

这个查询的解释告诉我mysql只会使用全文索引。我相信 mysql 只能使用 1 个索引，但在全文搜索该术语之前获取特定作者首先写的所有文章似乎是一个明智的主意......那么无论如何可以帮助 mysql 吗？

例如..如果您进行了自我加入？

```
select articles.* from articles as acopy 
                  join articles on acopy.author_id = articles.author_id 
where 
    articles.author_id = 54 
and match(article_text) against ('foo'); 
```

对此的解释首先列出了 author_id 索引的使用，然后是全文搜索。

这是否意味着它实际上只对由 author_id 过滤的有限集进行全文搜索？

**附录**

解释自我加入的计划如下：

```
*************************** 1\. row ***************************
           id: 1
  select_type: SIMPLE
        table: acopy
         type: ref
possible_keys: index_articles_on_author_id
          key: index_articles_on_author_id
      key_len: 5
          ref: const
         rows: 20
     filtered: 100.00
        Extra: Using where; Using index
*************************** 2\. row ***************************
           id: 1
  select_type: SIMPLE
        table: articles
         type: fulltext
possible_keys: index_articles_on_author_id,fulltext_articles
          key: fulltext_articles
      key_len: 0
          ref: 
         rows: 1
     filtered: 100.00
        Extra: Using where
2 rows in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T00:44:52.587

好的，所以，因为

> 索引合并不适用于全文索引

[http://dev.mysql.com/doc/refman/5.0/en/index-merge-optimization.html](http://dev.mysql.com/doc/refman/5.0/en/index-merge-optimization.html)

我会尝试这种方法：（替换`author_id_index`为您在 author_id 上的索引名称）

```
select * from articles use index (author_id_index)
where author_id=54 
and match (article_text) against ('foo'); 
```

这里的问题如下：

*   确实不可能将常规索引与全文索引结合使用
*   如果将表与自身连接，则连接的每一侧都已使用索引（ON 子句将使用 author_id 列，您在这里肯定需要索引）

最有效的必须由您决定，通过一些测试用例，使用作者索引是否优于文本索引。

# c# - C# Forms 应用本地化

> ID：11217721
> 
> 赞同：0
> 
> 时间：2012-06-27T00:17:52.680
> 
> 标签：c#, localization

在引用文章的评论之后，我修改了我的问题。

我有 ac# Win forms 应用程序，其中包含一些用于用户交互的表单和对话框/消息框。我想将其本地化为一组语言。

*   大多数表单是通过表单设计器创建的，文本/字符串是通过属性设置的
*   消息框和其他运行时消息的字符串来自代码。

我在这里阅读了这篇文章 [http://msdn.microsoft.com/en-us/library/y99d1cd3(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/y99d1cd3(v=vs.71).aspx)

这指向2种方法，

*   首先是让 Visual Studio 为您创建资源文件 - 这是为表单设计器生成的代码完成的
*   第二种是手动添加资源文件并使用 GetString("strMessage") 方法访问它们的代码

我想到的问题是对于设计器生成的代码，我必须首先使用 VS 将自行创建资源文件的方法。为了本地化我的运行时消息和消息框，我必须使用第二种方法，这意味着我必须手动添加资源文件。

我将为每种语言提供两组资源文件。我可以不只使用一种方法并将两种形式的字符串都本地化在一个地方吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T05:06:52.080

没有什么能阻止你使用这两种技术的组合。通过步骤 1 创建所有语言资源文件，然后将您自己的字符串添加到这些文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:08:59.813

不幸的是，你不能（轻松地）吃掉你的蛋糕。这正是 MSFT 设计事物的方式。您不能将消息字符串添加到 VS 表单设计器生成的代码隐藏“.resx”文件中，因为这些“.resx”文件将在您对它们进行更改时由 VS 重新生成（覆盖您的消息字符串） . 如果您尝试将自己的资源添加到这些文件中（使用 VS 中的“.resx”编辑器），VS 甚至会警告您。反之亦然，也就是说，您不能将代码隐藏的“.resx”资源添加到手动创建的“.resx”文件中（没有很大的困难）。不过情况确实没那么糟糕。多年来一直以这种方式完成并且有效。虽然我个人更喜欢所有资源的中央存储库，每个系统都有其优点和缺点。顺便说一句，您应该为您的消息字符串和“.resx”文件（您自己手动添加的那些）中的任何其他资源使用“强类型”资源。不要使用“GetString()”IOW（或您可能找到的任何其他函数）。强类型资源要容易得多。谷歌了解详细信息并在学习如何使用它们（不难）之后，还搜索 Dmytro Kryvko 的强类型资源生成器（一个非常有用的 VS 工具，可以进一步改进）。强类型资源要容易得多。谷歌了解详细信息并在学习如何使用它们（不难）之后，还搜索 Dmytro Kryvko 的强类型资源生成器（一个非常有用的 VS 工具，可以进一步改进）。强类型资源要容易得多。谷歌了解详细信息并在学习如何使用它们（不难）之后，还搜索 Dmytro Kryvko 的强类型资源生成器（一个非常有用的 VS 工具，可以进一步改进）。

# c# - 按类型继承使用表时返回实体类型

> ID：11217728
> 
> 赞同：7
> 
> 时间：2012-06-27T00:18:58.190
> 
> 标签：c#, entity-framework-4

假设我有以下实体

```
public abstract class Animal
{
    public int Id {get;set;}
}

public class Cat : Animal
{
}

public class Dog : Animal
{
} 
```

是否可以在不创建实例的情况下确定实体的类型。

```
var id = 1;
var type = context.Animals.GetTypeOfAnimal(id)

public static Type GetTypeOfAnimal(this ObjectSet<Animal> source, int id)  
{
    // What shall I do here, I dont want to fetch the instance at this point...
    var animal = source.First(a => a.Id == id);
    return animal.GetType();
} 
```

我考虑过使用以下方法的一种解决方案...

```
public static Type GetTypeOfAnimal(this ObjectSet<Animal> source, int id)  
{
    var info = source.Where(a => a.Id == id).Select(a => new {IsDog = a is Dog, IsCat = a is Cat}).First();

    if(info.IsDog) return typeof(Dog);
    if(info.IdCat) return typeof(Cat);

    return null;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:58:24.070

如果不查询数据库，就无法获取此信息。您正在使用 TPT - 这意味着数据库包含 Animal、Dog 和 Cat 表。数据库中的继承是通过Animal和Dog之间以及Animal和Cat之间的一对一关系建模的。您要做的最低限度是查询该 Id 的 Animal 和 Dog 表（它只能存在于其中一个中）。第一个问题是您不能直接使用 EF 查询这些表，因为 EF 只能处理整个实体（不仅可以处理映射到单个表的部分） - 您必须使用直接 SQL。第二个问题是这种解决方案的脆弱性。如果您添加新的派生实体，则必须修复此查询（您的示例也是如此）。

TPT 查询速度慢的原因是 EF 必须查询所有继承树 = 在您的情况下`Animal`join with `Dog`concatenated with `Animal`join with `Cat`。.NET 4.5 在查询 TPT 继承树方面有一些性能改进，但它不会影响您的查询，因为它只需要查询整个结构。

# java - 重新排序 XML 标签

> ID：11217734
> 
> 赞同：3
> 
> 时间：2012-06-27T00:19:39.810
> 
> 标签：java, xml, reflection, jaxb

我正在尝试实现一些东西，用于将 java 对象的内容树写回 XML 文件（对象编组）（我知道有很多 API 可以做到这一点，但我需要），我想让用户根据他/她的需要重新排序标签，我知道使用 JAXB 之类的注释可能会解决这个问题，但我认为使用注释可能会导致很多痛苦。如果有人能提供任何好的方法，那将非常有帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T01:28:36.137

**注意：** 我是**[EclipseLink JAXB (MOXy)](http://www.eclipse.org/eclipselink/moxy.php)**负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

在[**另一个答案**](https://stackoverflow.com/a/11218017/383861)中，我描述了用于指定元素顺序的标准 JAXB 机制。在这个答案中，我将解释如何使用 MOXy 的外部映射文档来解决您问题的这一部分：

> 我想让用户按照他/她的意愿重新排序标签，我知道使用像 JAXB 这样的注释可能会解决这个问题，但我认为使用注释可能会带来很多痛苦。

**根**

在`Root`课程中，我使用`@XmlType`注释来指定排序。

```
package forum11217734;

import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlType(propOrder={"c", "b", "a"})
public class Root {

    private String a;
    private String b;
    private String c;

    public String getA() {
        return a;
    }

    public void setA(String a) {
        this.a = a;
    }

    public String getB() {
        return b;
    }

    public void setB(String b) {
        this.b = b;
    }

    public String getC() {
        return c;
    }

    public void setC(String c) {
        this.c = c;
    }

} 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要在与域模型相同的包中添加一个名为 jaxb.properties 的文件，其中包含以下条目（请参阅将[EclipseLink MOXy 指定为您的 JAXB 提供程序](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)）：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**绑定-acb.xml**

MOXy 有一个外部映射文档扩展，允许您覆盖域模型上的映射（请参阅[扩展 JAXB - 将元数据表示为 XML](http://blog.bdoughan.com/2010/12/extending-jaxb-representing-annotations.html)）。我们将使用此文档来指定另一个排序。

```
<?xml version="1.0"?>
<xml-bindings
    xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
    package-name="forum11217734">
    <java-types>
        <java-type name="Root">
            <xml-type prop-order="a c b"/>
        </java-type>
    </java-types>
</xml-bindings> 
```

**绑定-cab.xml**

我们可以使用其他映射文档来提供替代排序。

```
<?xml version="1.0"?>
<xml-bindings
    xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
    package-name="forum11217734">
    <java-types>
        <java-type name="Root">
            <xml-type prop-order="c a b"/>
        </java-type>
    </java-types>
</xml-bindings> 
```

**演示**

以下演示代码演示了如何在创建`JAXBContext`. `Root`我们将以三种不同的方式编组相同的实例。

```
package forum11217734;

import java.util.*;
import javax.xml.bind.*;
import org.eclipse.persistence.jaxb.JAXBContextFactory;

public class Demo {

    public static void main(String[] args) throws Exception {
        Root root = new Root();
        root.setA("Foo");
        root.setB("Bar");
        root.setC("Baz");

        // CBA
        JAXBContext cbaContext = JAXBContext.newInstance(Root.class);
        Marshaller cbaMarshaller = cbaContext.createMarshaller();
        cbaMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        cbaMarshaller.marshal(root, System.out);

        // ACB
        Map<String, Object> acbProperties = new HashMap<String, Object>(1);
        acbProperties.put(JAXBContextFactory.ECLIPSELINK_OXM_XML_KEY, "forum11217734/binding-acb.xml");
        JAXBContext acbContext = JAXBContext.newInstance(new Class[] {Root.class}, acbProperties);
        Marshaller acbMarshaller = acbContext.createMarshaller();
        acbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        acbMarshaller.marshal(root, System.out);

        // CAB
        Map<String, Object> cabProperties = new HashMap<String, Object>(1);
        cabProperties.put(JAXBContextFactory.ECLIPSELINK_OXM_XML_KEY, "forum11217734/binding-cab.xml");
        JAXBContext cabContext = JAXBContext.newInstance(new Class[] {Root.class}, cabProperties);
        Marshaller cabMarshaller = cabContext.createMarshaller();
        cabMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        cabMarshaller.marshal(root, System.out);
    }

} 
```

**输出**

下面是运行演示代码的输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
   <c>Baz</c>
   <b>Bar</b>
   <a>Foo</a>
</root>
<?xml version="1.0" encoding="UTF-8"?>
<root>
   <a>Foo</a>
   <c>Baz</c>
   <b>Bar</b>
</root>
<?xml version="1.0" encoding="UTF-8"?>
<root>
   <c>Baz</c>
   <a>Foo</a>
   <b>Bar</b>
</root> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T01:04:11.277

[**当内容被编组为 XML 时， JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现提供了几种不同的机制来指定 XML 元素的顺序。JAXB 在解组时不要求元素按顺序排列。

**选项 #1 - @XmlType(propOrder={"c","b", "a"})**

注释上的`propOrder`属性`@XmlType`允许您指定顺序。

***根***

```
package forum11217734;

import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlType(propOrder={"c","b", "a"})
public class Root {

    private String a;
    private String b;
    private String c;

    public String getA() {
        return a;
    }

    public void setA(String a) {
        this.a = a;
    }

    public String getB() {
        return b;
    }

    public void setB(String b) {
        this.b = b;
    }

    public String getC() {
        return c;
    }

    public void setC(String c) {
        this.c = c;
    }

} 
```

***输出***

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<root>
    <c>Baz</c>
    <b>Bar</b>
    <a>Foo</a>
</root> 
```

***了解更多信息***

*   [http://blog.bdoughan.com/2012/02/jaxbs-xmltype-and-proporder.html](http://blog.bdoughan.com/2012/02/jaxbs-xmltype-and-proporder.html)

**选项 #2 - @XmlAccessorOrder(XmlAccessOrder.ALPHABETICAL)**

您还可以使用`@XmlAccessorOrder`注释指定属性应按字母顺序编组。

***根***

```
package forum11217734;

import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorOrder(XmlAccessOrder.ALPHABETICAL)
public class Root {

    private String a;
    private String b;
    private String c;

    public String getA() {
        return a;
    }

    public void setA(String a) {
        this.a = a;
    }

    public String getB() {
        return b;
    }

    public void setB(String b) {
        this.b = b;
    }

    public String getC() {
        return c;
    }

    public void setC(String c) {
        this.c = c;
    }

} 
```

***输出***

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<root>
    <a>Foo</a>
    <b>Bar</b>
    <c>Baz</c>
</root> 
```

**演示代码**

以下演示代码用于生成上述每个选项的输出。

```
package forum11217734;

import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Root.class);

        Root root = new Root();
        root.setA("Foo");
        root.setB("Bar");
        root.setC("Baz");

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(root, System.out);
    }

} 
```

# jquery-ui - jquery ui tabs 多次调用 tabs()

> ID：11217740
> 
> 赞同：1
> 
> 时间：2012-06-27T00:20:25.860
> 
> 标签：jquery-ui, jquery-ui-tabs

我有一个页面，我将标签内容放入 div 中。

这工作正常，我可以看到标签。

后来，发生了一个事件（比如选择一个组合框值），我想更改为另一组选项卡。

我基本上做到了：

```
('#divId').empty();
someData.appendTo("#divId");
$("#divId").tabs(); 
```

这是问题所在，这第二个电话显示给我一个列表：。选项卡名称1 。tabName2 .....等

知道发生了什么，似乎对 .tabs() 的调用在我第一次加载页面时只工作一次。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-31T13:16:26.820

```
$("#detailUL").append("<li><a href='#tabs3-"+id+"'>Desc No "+m+"</a></li>");     // desc

$("#details").append("<div id='tabs3-"+id+"' class='it_detail'>"+copy+"</div>"); // detail

$("#detailPanel").tabs("refresh"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T00:29:05.130

检查 的值`someData`，它可能包含在您再次调用 jquery tabs() 方法时无法处理的无效 html。

一种方法是：

```
console.log(someData); 
```

然后，如果您使用的是 chrome，请按 F12，然后单击“控制台”。

# objective-c - 为坐标 MKMapView 添加注解

> ID：11217742
> 
> 赞同：0
> 
> 时间：2012-06-27T00:20:30.737
> 
> 标签：objective-c, xcode

我正在解析这个 JSON 文件（正确地，它适用于 UITextFields）：

```
{"longitude":["37.786793","39.388528"],"latitude":["-122.395416","-78.887734"]} 
```

ind 创建 MapViews，并以这种方式使用相应的注释：

```
NSArray *allKeys2 = [DictionaryMap allKeys];

for (int h = 0; h < [allKeys2 count]; h++) {

CGRect mapFrame = CGRectMake( 400, e, 200, 110);

MKMapView *mapView2 = [[MKMapView alloc] initWithFrame:mapFrame];
[image1 addSubview:mapView2]; 

    NSString *key2 = [allKeys2 objectAtIndex:i];
    NSObject *obj2 = [DictionaryMap objectForKey:key2];

    NSString *address = [NSString stringWithFormat:@"%@", obj2];
    float stringFloat = [address floatValue];
    float stringFloat2 = [key2 floatValue];

    CLLocationCoordinate2D anyLocation;

    anyLocation.longitude = stringFloat;

    anyLocation.latitude  = stringFloat2;

    MKPointAnnotation *annotationPoint2 = [[MKPointAnnotation alloc] init]; annotationPoint2.coordinate = anyLocation;

    annotationPoint2.title = @"Event";
    annotationPoint2.subtitle = @"Microsoft's headquarters2";
    [mapView2 addAnnotation:annotationPoint2];  

    [mapView2.userLocation setTitle:@"I am here"];

    [mapView2.userLocation addObserver:self  
                                 forKeyPath:@"location"  
                                    options:(NSKeyValueObservingOptionNew|NSKeyValueObservingOptionOld)

                                    context:NULL];

    [mapView2 setShowsUserLocation:NO];

    [MapViewArray addObject:mapView2];

    if (MapViewArray == nil)MapViewArray = [[NSMutableArray alloc]init];
    [MapViewArray addObject: mapView2];

     }}

}while(g < f); 
```

...我希望第一个地图视图显示第一个坐标图钉，第二个显示第二对坐标。但是现在，它在所有地图视图上绘制相同的图钉，对应于最后一个坐标，而不是分别对应于第一个和第二个……。此方法适用于 UITextField 文本，所以我找不到问题。

请帮忙！！

编辑：

```
NSString *filenameMap = [NSString stringWithFormat:@"%@%@Map", destDir, NavBar.topItem.title];

NSString *MapPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@Map", NavBar.topItem.title]];

[self.restClient loadFile:filenameMap intoPath:MapPath];

NSString *fileContentMap = [[NSString alloc] initWithContentsOfFile:MapPath];  

SBJsonParser *parserMap = [[SBJsonParser alloc] init];

NSDictionary *dataMap = (NSDictionary *) [parserMap objectWithString:fileContentMap error:nil];  

NSArray *MaparrayLongitude = [dataMap objectForKey:@"longitude"];
NSArray *MaparrayLatitude = [dataMap objectForKey:@"latitude"];

NSDictionary* DictionaryMap = [NSDictionary dictionaryWithObjects:MaparrayLatitude forKeys:MaparrayLongitude]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T00:24:11.803

另一种做法：

您可能不想在 DictionaryMap 中将纬度映射到经度。如何制作一个 NSDictionaries 的 NSArray，其中每个字典都有一个“纬度”键和一个“经度”键？

此外，您的代码中有两次“[MapViewArray addObject: mapView2]”。

And what is "g"? Maybe add some logging to your loop so you can see what's being created?

# wordpress - 如何在数据库驱动的网站项目中使用 GIT 进行开发？

> ID：11217744
> 
> 赞同：1
> 
> 时间：2012-06-27T00:20:38.703
> 
> 标签：wordpress, git

我喜欢对静态网站使用简单的 Git 工作流程，但我也半定期地构建 Joomla 和 Wordpress 网站。但是，我不知道如何将 Git 与数据库驱动的站点开发一起使用。

对于静态站点，我会“推送”到 dev.websitename.com，然后在开发站点签出后推送到 www.websitename.com。我将如何使用 wordpress 或 joomla 等数据库驱动的网站来模拟该过程。

提前感谢您的洞察力！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T01:08:04.727

您绝对可以将 Git 与您的网站代码一起使用，例如更改您的 WordPress 主题/插件，就像您正在开发静态网站一样。

但是，您不会将它用于您的数据库。Git 为*代码*提供版本控制，而 WordPress 和 Joomla 已经管理存储在数据库中的*内容。*另外，Git 不会理解数据库，因此它不会比定期备份有任何优势，而您应该已经这样做了。查看[运行站点的开发副本，](http://codex.wordpress.org/Running_a_Development_Copy_of_WordPress)了解如何直接从服务器下载数据库。

顺便说一句，如果你在 WordPress/Joomla 中使用 Git，你应该在 .gitignore 中添加缓存、日志、tmp 等。那里也有很多教程——尝试搜索例如[http://google.com/search?q=wordpress+git](http://google.com/search?q=wordpress+git)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:13:51.927

除了 Chris，您可能希望在不使用方便的脚本方法的情况下开始您的 Git 工作流程（至少在最初是这样）。脚本方法和使用 Git 钩子肯定看起来很性感（好吧，因为它们很方便）并且也很方便，但最初为什么不使用更手动的 cmd 行方法，这也将帮助您熟悉 Git。

一旦你完成了你的 repo 设置（GitHub、Bitbucket、其他地方）并且你已经将你的最新版本推送到它并准备好部署到生产或登台，只需登录到你的主机并从你初始化 git repo 的任何地方登录（站点根目录，例如：/site）只需执行以下操作：

```
git pull origin master 
```

这将获取并合并您的代码。在开发/登台环境中测试这个是个好主意，如果合并顺利，那么在生产中进行。

# hibernate - Hibernate - 检查是否存在定义的唯一键约束的自动和通用方法？

> ID：11217746
> 
> 赞同：2
> 
> 时间：2012-06-27T00:21:10.043
> 
> 标签：hibernate, unique-key

想象一个城市到邮政编码的关系映射。（为简单起见，不使用外键）

```
<class name="CityToPostalcode" table="city_to_postalcode" catalog="database">
    <id name="id" type="java.lang.Integer">
        <column name="id" />
        <generator class="identity" />
    </id>
    <property name="city" type="String">
        <column name="city" not-null="true"/>
    </property>
    <property name="postalcode" type="Integer">
        <column name="postalcode" not-null="true"/>
    </property>
    <properties name="businessKey" unique="true">
        <property name="city"/>
        <property name="postalcode"/>
    </properties>
</class> 
```

框架中是否有一个函数来检查给定组合的唯一键“businessKey”是否唯一（也适用于单列唯一约束）？

也许结合将“businessKey”映射到一个类？（类似于composite-id的使用）

如果确实可以自动完成，那么为每个表编写代码以检查其业务密钥就是如此多的冗余。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:16:50.080

有`natural Id`它会自动创建模式创建的唯一约束，并可用于更有效地查询它。在xml中

```
<natural-id>
    <property name="name"/>
    <property name="org"/>
</natural-id> 
```

naturalids 使用二级缓存效率更高，从 H4.1 加载时 naturalid 使用一级缓存，可以节省往返。除此之外，自然 id 就像普通属性一样。但是，您可以编写一个通用的自然 ID 检查器

1.  使用属性集创建一个新对象
2.  通过 sessionfactory 访问对象的类元数据
3.  迭代自然 id 属性并使用它们从对象中获取值并将它们设置在 using(propertyname, propertyvalue)
4.  如果发现某些东西，请复制数据，否则只需保存您刚刚创建的对象

# ios - 将图像添加到 UITableView 页脚

> ID：11217757
> 
> 赞同：0
> 
> 时间：2012-06-27T00:22:07.953
> 
> 标签：ios, ios5

有谁知道如何将图像添加到 UITable 页脚？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T00:26:48.440

[`tableView:viewForFooterInSection`](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3aviewForFooterInSection%3a)通过为您的图像创建 UIImageView 来响应。还要确保回复[`tableView:heightForFooterInSection:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3aheightForFooterInSection%3a)。

# ruby - 使用 Koala (Ruby) 收集用户的新闻提要

> ID：11217761
> 
> 赞同：3
> 
> 时间：2012-06-27T00:23:13.830
> 
> 标签：ruby, facebook, omniauth, koala

我想在用户通过身份验证后拉入用户的新闻源。我正在使用[Koala gem](https://github.com/arsduo/koala)，但如果我调用`get_connection('me', 'feed')`它，它只会返回我墙上的最后三个帖子。我想要显示在用户主页上的最后约 100 个帖子（或自 1234567 之后的帖子）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T04:13:39.230

您可以使用 FQL 在特定时间段内获取所有帖子。这是一个可以帮助您入门的示例：

```
@feed = Koala::Facebook::API.new(current_user.token)
to = Time.now.to_i
yest = 1.day.ago.to_i
@feed.fql_query("SELECT post_id, actor_id, target_id, message, likes FROM stream WHERE source_id = me() AND created_time > #{yest} AND created_time < #{to} AND type = 80 
AND strpos(attachment.href, "youtu") >= 0")

require 'koala'
@graph = Koala::Facebook::API.new("YOUR_ACCESS_TOKEN")
@graph.fql_query("SELECT post_id, actor_id, target_id, message FROM stream WHERE source_id = me() AND created_time > START_TIME AND created_time < END_TIME LIMIT 10") 
```

[从这里](http://pastebin.com/XJDGaJU8 "这里")借来的代码。

# javascript - 为什么此代码对 JavaScript 使用 .aspx 文件？

> ID：11217764
> 
> 赞同：3
> 
> 时间：2012-06-27T00:23:40.507
> 
> 标签：javascript, asp.net

我发现了一些我不确定我是否完全理解的旧代码。以下是仅包含 JavaScript 的 .aspx 页面：

```
<%@ Page Language="C#" EnableSessionState="True" CodePage="65001" uiculture="auto" %>

<%
Response.ContentType = "text/plain";
%>

var csBackgroundColor;

function testfx() {
    csBackgroundColor.setAttribute('disabled', 'disabled');
} 
```

它是这样引用的：

```
<script type="text/javascript" src="filename.js.aspx"></script> 
```

我想知道为什么它不被完全标记为 JavaScript 文件？这样做是为了让您可以包含代码块吗？以这种方式使用文件，我什至没有得到 IntelliSense。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T00:26:37.913

我第一次看到类似的东西，但你是对的，这背后的原因是让 asp.net 引擎处理文件并将其作为任何其他 aspx 页面运行，让他有机会使用服务器端代码构建 js 文件。

如果这就是文件中的所有代码，那么似乎唯一的目标就是设置字符编码（`CodePage="65001"`和内容类型（`Response.ContentType="text/plain"`））。正如您想象的那样，这没有多大意义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T00:34:01.480

`<hack>`要获得智能感知，您可以将代码包装在`<script> ... </script>`块中并在保存之前将其删除。`</hack>`

这可能是由不想、不能或没有时间编写面向对象 JavaScript 的开发人员创建的。封装逻辑并通过配置对象进行配置将允许您将代码与外部变量依赖项（例如`var foo = <%= SomeServerSideVariable %>`）分离。

# unity3d - Unity3d、Kinect + Zigfu

> ID：11217765
> 
> 赞同：1
> 
> 时间：2012-06-27T00:23:55.617
> 
> 标签：unity3d, kinect

我在我的 Mac OS10.7 上的 Unity3d 中运行 zigfu/ZDK 中的所有示例都运行良好，除了当我尝试替换封闭模型时——我尝试了许多其他模型（我自己的/搅拌机进口，其他 mixamo，mixamo-unity fbx.exports 等都在封闭场景中完美加载，我将所有骨骼骨骼定位在 zigfu 脚本上，根据正确脚本上的 zigfu 示例设置用户 + 模型目标，但仍然没有任何效果。没有错误messages.can't figure this out!任何想法？提示，建议，经验？谢谢。

# html - CSS：让页脚粘在页面底部

> ID：11217766
> 
> 赞同：5
> 
> 时间：2012-06-27T00:24:09.080
> 
> 标签：html, css

你们中的一些人会立即草拟 Ryan Fait 的粘性页脚，但这是我一直在使用的，它一直没有正常工作。

放大和缩小页面会“解除”页脚。这是一个现场测试用例：http: [//jsfiddle.net/C2u3C/](http://jsfiddle.net/C2u3C/)

HTML：

```
<!DOCTYPE html>
<html>
<head>
    <title>Andrew Louis</title>
    <link rel="stylesheet" href="fonts/stylesheet.css" type="text/css" />
    <link rel="stylesheet" href="about-me.css" type="text/css" />
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="javascript/jqueryscript.js"></script>

<body>
    <br>
    <h2>Andrew Louis</h2>

    <div class="wrapper">
        <div class="subtitle">
            About Me 
            <div class = "subtitle-text">
            <br> <!--Spacing between image and subtitle -->
            <img align="center" src="images/Profile.jpg" /><br><br>
            <p>Synth sriracha wes anderson blog etsy, pickled truffaut street art. Brooklyn wolf sriracha trust fund fap. Retro chillwave readymade master cleanse. Mixtape carles pop-up ennui, viral DIY freegan fingerstache post-ironic williamsburg organic hella single-origin coffee lomo you probably haven't heard of them. Pickled biodiesel vinyl flexitarian narwhal occupy fanny pack, butcher forage lo-fi marfa iphone wayfarers. Gastropub aesthetic brooklyn, mcsweeney's carles wayfarers pop-up viral wolf thundercats. Put a bird on it brunch direct trade dreamcatcher kale chips, before they sold out pour-over tofu chillwave fixie 8-bit flexitarian typewriter.</p>

            <br><p> Words and stuff </p> 

            <br>
            </div>
    </div>

    <div class="push"></div>
    </div>
    <div class="footer">
        <p>Copyright © 2012 Andrew Louis</p>
    </div>
</body>
</head> 
```

CSS：

```
/*The New Stuff Begins Here*/

* {
    margin: 0;
}
html, body {
    height: 100%;
}
.wrapper {
    min-height: 100%;
    margin: 0 auto -100px; /* the bottom margin is the negative value of the footer's height */
}
.footer, .push {
    clear:both;
    height: 100px; /* .push must be the same height as .footer */
}
.footer{
    font-family: 'Lobster1.3Regular';
    color:white;
    text-align: center;
    line-height: 25px;
    background:#D04D21;
}
/*

Sticky Footer by Ryan Fait
http://ryanfait.com/

*/

h2{
    font-family:'WindsongRegular';
    font-size:33px;
    color:#D04D21;
    text-align:center;
}

.subtitle{
    float:left;
    width:700px;
    font-family:'Lobster1.3Regular';
    text-shadow: 0 0 1px rgba(0,0,0,0.5);
    color:#D04D21;
    position: absolute;
    font-size:60px;
    top: 4%;
    left: 0px;
    height: 1px;
    text-align:left;
    margin-left:150px;
    margin-right:50px;  
}

.subtitle-text p{
    text-align:left;
}

.subtitle-text{
    border-right:2px solid;
    padding-right:55px;
    float:left;
    border-right:2px solid rgba(0,0,0,0.2);
    width:700px;
    font-family:'MuseoSlab500Regular';
    text-align:center;
    /*margin-left:50px;
    margin-right:50px;*/
    font-size:20px; 
    color:#D04D21;
}
.subtitle-text img{
    padding:3px;
    border-top: 3px dashed #D04D21;/*#000000;*/
    border-bottom:3px dashed #D04D21;/*#000000;*/
    border-left:3px dashed #D04D21;/*#000000;*/
    border-right:3px dashed #D04D21;/*#000000;*/
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T01:07:09.560

原因是您的字幕类中的`position:absolute;`and 。`float:left;`一旦删除了绝对定位并清除了浮动，问题就消失了。根据您希望字幕显示的确切位置，应该有其他可用选项。

**CSS**：

```
.subtitle{
    float:left;
    width:700px;
    font-family:'Lobster1.3Regular';
    text-shadow: 0 0 1px rgba(0,0,0,0.5);
    color:#D04D21;
    text-align:left;
}

.footer, .push {
    clear:both;
    height: 100px; /* .push must be the same height as .footer */
} 
```

[现场演示](http://jsfiddle.net/C2u3C/7/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T00:42:06.290

你可以使用这个：

```
.footer {
    position: fixed;
    bottom: 0;
    width: 100%;
} 
```

[http://jsfiddle.net/C2u3C/2/](http://jsfiddle.net/C2u3C/2/)

# jquery - ASP.NET jQuery 双列表框编辑和保存

> ID：11217770
> 
> 赞同：3
> 
> 时间：2012-06-27T00:24:39.027
> 
> 标签：jquery, asp.net, listbox

好的 - 所以我已经把头发拉出来太久了。希望各位大侠能帮帮忙。

我有一个表单，允许用户输入/编辑有关他们公司的数据。其中大部分是非常直接的表单字段编辑，但我有一部分允许用户选择他们的业务在什么状态下运行，然后将联系人分配给该状态。我正在使用 jQuery 和 2 个 listBox 控件，我允许用户双击他们想要操作的状态。jQuery 将所选状态移动到另一个 listBox 以及下拉控件，然后他们可以输入他们特定州的联系信息。

现在是“拔毛”部分。我已经看过很多关于从第二个 listBox 控件中获取数据，将其放入数组并将其放入隐藏表单字段的帖子 - 但是如何做到这一点的示例很少而且相差甚远。我发现我没有成功整合的少数几个。那里的任何帮助将不胜感激。

另一个难题是这个页面应该作为一个用户也可以编辑的页面 - 所以在初始加载时，我的页面应该（理想情况下）将用户已经通过 jQuery 选择的状态预加载到第二个列表框...但是进入第二个列表框的状态不应该出现在第一个列表框中。啊。任何关于如何实现这一点的指针也将不胜感激。

这是我的代码：

ASPX 文件：

```
<%@ Page Title="Mappings" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true" CodeFile="Mapping.aspx.cs" Inherits="Account_Mapping" EnableEventValidation="false" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
<script language="javascript" type="text/javascript">
    $(function () {
        var sourceState = $('#MainContent_sourceState option').clone();

        $('#stateAllA').click(function () {
            $('#MainContent_sourceState option').appendTo('#MainContent_targetState, #MainContent_contactState');
        });

        $('#stateAllR').click(function () {
            $('#MainContent_targetState option').appendTo('#MainContent_sourceState');
            $('#MainContent_contactState option').remove();
        });

        $('#MainContent_sourceState').dblclick(function () {
            $('#MainContent_sourceState option:selected').appendTo('#MainContent_targetState, #MainContent_contactState');
        });

        $('#MainContent_targetState').dblclick(function () {
            var targetList = $('#MainContent_targetState option:selected');
            var targetVal = $('#MainContent_targetState option:selected').val();
            targetList.appendTo('#MainContent_sourceState');
            $('#MainContent_contactState option[value=' + targetVal + ']').remove();
            //$('#contactState option:selected').remove();
            var foption = $('#MainContent_sourceState option:first');
            var soptions = $.makeArray($('#MainContent_sourceState option:not(:first)')).sort(function (a, b) {
                return a.text == b.text ? 0 : a.text < b.text ? -1 : 1
            });
            $('#MainContent_sourceState').html(soptions).prepend(foption);
            foption.attr("selected", true).siblings("option").removeAttr("selected");
        });

    });
</script>
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <h2>
        Admin
    </h2>
    <p>
    Please fill in all the required information and click "submit" when complete.
    </p>
    <div class="formLeft">
        <b>Company Name:</b>
    </div>
    <div class="formRight">
        <asp:TextBox ID="comp_Name" runat="server" CssClass="textEntry"></asp:TextBox>
    </div>
    <div class="formLeft">
        <b>Company Phone:</b>
    </div>
    <div class="formRight">
        <asp:TextBox ID="comp_Phone" runat="server" CssClass="textEntry"></asp:TextBox>
    </div>
    <div class="formLeft">
        <b>Main Contact Person:</b>
    </div>
    <div class="formRight">
        <asp:TextBox ID="comp_Contact" runat="server" CssClass="textEntry"></asp:TextBox>
    </div>
    <div class="formLeft">
        <b>Main Email Address:</b>
    </div>
    <div class="formRight">
        <asp:TextBox ID="comp_Email" runat="server" CssClass="textEntry"></asp:TextBox>
    </div>
    <div class="formLeft">
        <b>Company Website:</b>
    </div>
    <div class="formRight">
        <asp:TextBox ID="comp_Website" runat="server" CssClass="textEntry"></asp:TextBox>
    </div>
    <div class="formLeft">
        <b>Company Description:</b>
    </div>
    <div class="formRight">
        <asp:TextBox ID="comp_Desc" runat="server" CssClass="textAreaEntry" TextMode="MultiLine"></asp:TextBox>
    </div>
    <div class="formLeft">
        <b>Company Access:</b>
    </div>
    <div class="formRight">
        <asp:TextBox ID="comp_Access" runat="server" CssClass="textAreaEntry" TextMode="MultiLine"></asp:TextBox>
    </div>
    <hr />
    <p>
    <b>Which state(s) do you operate in?</b>
    </p>
    <div class="formLeft">
        <b>OPTIONS:</b> <a id="stateAllA" href="#" style="font-size:11px" onclick="return false;">(add all)</a><br />
        <em style="font-size:12px">(double-click an item to add it to your list)</em><br />
        <asp:ListBox ID="sourceState" runat="server" CssClass="selectEntry" SelectionMode="Multiple" DataSourceID="myDSID" DataTextField="state_name" DataValueField="state_ID"></asp:ListBox>
        <asp:SqlDataSource ID="myDSID" runat="server" 
            ConnectionString="<%$ ConnectionStrings:myDatasource %>" 
            SelectCommand="SELECT [state_ID], [state_name] FROM [states]">
        </asp:SqlDataSource>
    </div>
    <div class="formRight">
        <b>YOUR SELECTIONS:</b> <a id="stateAllR" href="#" style="font-size:11px" onclick="return false;">(remove all)</a><br />
        <em style="font-size:12px">(double-click an item to remove it from your list)</em><br />
        <asp:ListBox ID="targetState" runat="server" CssClass="selectEntry" SelectionMode="Multiple"></asp:ListBox>
        <asp:HiddenField ID="hdnStates" runat="server" />
    </div>
    <p>
    <b>Do you wish to assign state-specific contacts? If so, choose the appropriate state and fill out the info below.</b><br>
    </p>
    <p>
    <asp:DropDownList ID="contactState" runat="server"></asp:DropDownList>
    </p>
    <div align="right" style="margin-top:5px;">
        <asp:Button ID="Button1" runat="server" Text="Submit" 
            onclick="Button1_Click" />
    </div>
</asp:Content> 
```

还有我的代码隐藏：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.SqlClient;
using System.Configuration;
using System.Data;
public partial class Account_Mapping : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        //let's get our passed variables
        //the company you're editing comes from a dropdown on prev page
        string passedComp = Session["searchCompany"].ToString();

        if (!IsPostBack)
        {
            //now let's get all the relevant data from the DB

            //first, the easy stuff
            DataTable dt1 = GetBasicCompData(passedComp);

            //let's populate those fields in the form
            comp_Name.Text = dt1.Rows[0][0].ToString();
            comp_Phone.Text = dt1.Rows[0][1].ToString();
            comp_Contact.Text = dt1.Rows[0][2].ToString();
            comp_Email.Text = dt1.Rows[0][3].ToString();
            comp_Website.Text = dt1.Rows[0][4].ToString();
            comp_Desc.Text = dt1.Rows[0][5].ToString();
            comp_Access.Text = dt1.Rows[0][6].ToString();

            //state mapping
            DataTable dt2 = GetStateCompData(passedComp);

            for (int i = 0; i < dt2.Rows.Count; i++)
            {
                //targetState.DataSource = dt2;
                //targetState.DataValueField = "state_ID";
                //targetState.DataTextField = "state_Name";
                //targetState.DataBind();

                //contactState.DataSource = dt2;
                //contactState.DataValueField = "state_ID";
                //contactState.DataTextField = "state_Name";
                //contactState.DataBind();
            }
        }
    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        //breakpoint here to try and return my values 
        string myStates = hdnStates.Value;
    }

    public DataTable GetBasicCompData(string strComp)
    {
        //Query DB based on result
        string strConn = ConfigurationManager.ConnectionStrings["myConn"].ConnectionString;
        SqlConnection con = new SqlConnection(strConn);
        SqlCommand cmd = new SqlCommand();
        cmd.Connection = con;
        cmd.CommandType = System.Data.CommandType.Text;
        cmd.Parameters.AddWithValue("@Comp", strComp);
        cmd.CommandText = "SELECT companies.comp_Name, companies.comp_Phone, companies.comp_Contact, companies.comp_Email, companies.comp_Website, companies.comp_Desc, companies.comp_Access FROM companies WHERE comp_ID =  ''+ @Comp +''";
        DataSet objDs = new DataSet();
        SqlDataAdapter dAdapter = new SqlDataAdapter();
        dAdapter.SelectCommand = cmd;
        con.Open();
        dAdapter.Fill(objDs);
        con.Close();
        return objDs.Tables[0];
    }

    public DataTable GetStateCompData(string strComp)
    {
        //Query DB based on result
        string strConn = ConfigurationManager.ConnectionStrings["myConn"].ConnectionString;
        SqlConnection con = new SqlConnection(strConn);
        SqlCommand cmd = new SqlCommand();
        cmd.Connection = con;
        cmd.CommandType = System.Data.CommandType.Text;
        cmd.Parameters.AddWithValue("@Comp", strComp);
        cmd.CommandText = "SELECT states.state_ID, states.state_Name, contact_Name, contact_Phone, contact_Email FROM states INNER JOIN companies_states ON states.state_ID = companies_states.state_ID WHERE comp_ID = ''+ @Comp +''";
        DataSet objDs = new DataSet();
        SqlDataAdapter dAdapter = new SqlDataAdapter();
        dAdapter.SelectCommand = cmd;
        con.Open();
        dAdapter.Fill(objDs);
        con.Close();
        return objDs.Tables[0];
    }
} 
```

所以你有它。我知道，要消化的东西很多。我喜欢朝正确的方向踢。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T05:16:23.160

这是一种方法，我正在使用：

*   [jQuery](http://jquery.com/) , [nuget](https://nuget.org/packages/jQuery)
*   [json.net](http://james.newtonking.com/projects/json-net.aspx) , [nuget](https://nuget.org/packages/Newtonsoft.Json)
*   [淘汰赛](http://knockoutjs.com/), [nuget](https://nuget.org/packages/knockoutjs)

这是一个完整的工作示例，输出为：

![在此处输入图像描述](../Images/2f61e4a3518ed250f86435f46509c38d.png)

如您所见，每个帖子都模拟了视图状态，因此您可以在服务器代码中访问两个列表项

这是代码：

## ASPX

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true" CodeBehind="KnockoutJS1.aspx.cs" Inherits="WebApplication1.KnockoutJS1" %>
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
    <script type="text/javascript" src="Scripts/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="Scripts/knockout-2.1.0.js"></script>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <asp:HiddenField runat="server" ID="list1Values" />
    <asp:HiddenField runat="server" ID="list2Values" />
    <asp:ListBox Rows="10" Width="15%" runat="server" ID="list1" DataTextField="Name" DataValueField="ID">
    </asp:ListBox>
    <asp:ListBox Rows="10" Width="15%" runat="server" ID="list2" DataTextField="Name" DataValueField="ID">
    </asp:ListBox>
    <asp:Button Text="Save" runat="server" OnClick="saveData_Click" />
    <br /><asp:Label ID="lblMessage" runat="server" />
    <script type="text/javascript">
        function state(id, name) {
            return {
                ID: ko.observable(id),
                Name: ko.observable(name)
            };
        }
        $(function () {
            var options1 = ko.observableArray();
            var options2 = ko.observableArray();
            var list1ID = "<%= this.list1.ClientID%>";
            var list2ID = "<%= this.list2.ClientID%>";

            $("#" + list1ID).find("option").each(function () {
                options1.push(new state($(this).val(), $(this).text()));
            });
            $("#" + list2ID).find("option").each(function () {
                options2.push(new state($(this).val(), $(this).text()));
            });
            function serializeArrays(a1, a2) {
                var list1ValuesID = "<%= this.list1Values.ClientID %>";
                var list2ValuesID = "<%= this.list2Values.ClientID %>";

                $("#" + list1ValuesID).val(ko.toJSON(a1));
                $("#" + list2ValuesID).val(ko.toJSON(a2));
            }
            var viewModel = {
                states1: options1,
                states2: options2,
                states1Selected: ko.observable(),
                states2Selected: ko.observable(),
                execute1: function () {
                    this.states2.push(this.states1Selected());
                    this.states1.remove(this.states1Selected());
                    serializeArrays(this.states1(), this.states2());
                },
                execute2: function () {
                    this.states1.push(this.states2Selected());
                    this.states2.remove(this.states2Selected());
                    serializeArrays(this.states1(), this.states2());
                }
            };

            ko.applyBindings(viewModel);
        });
    </script>
</asp:Content> 
```

## 背后的代码

```
public partial class KnockoutJS1 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!this.IsPostBack)
        {
            this.list1.Attributes.Add("data-bind", "options: states1, optionsText: 'Name', value: states1Selected, event: { dblclick: execute1 }");
            this.list2.Attributes.Add("data-bind", "options: states2, optionsText: 'Name', value: states2Selected, event: { dblclick: execute2 }");

            var s = Builder<State>.CreateListOfSize(6).Build();

            this.list1.DataSource = s;
            this.list1.DataBind();
        }
        else
        {
            var states1 = JsonConvert.DeserializeObject<IEnumerable<State>>(this.list1Values.Value);
            var states2 = JsonConvert.DeserializeObject<IEnumerable<State>>(this.list2Values.Value);

            this.list1.DataSource = states1;
            this.list1.DataBind();
            this.list2.DataSource = states2;
            this.list2.DataBind();
        }
    }

    protected void saveData_Click(object sender, EventArgs e)
    {
        this.lblMessage.Text = string.Empty;

        var states1 = JsonConvert.DeserializeObject<IEnumerable<State>>(this.list1Values.Value);
        var states2 = JsonConvert.DeserializeObject<IEnumerable<State>>(this.list2Values.Value);

        foreach (var item in states1)
        {
            this.lblMessage.Text += "List1: " + item.Name + " " + item.ID.ToString() + "<br/>";
        }
        this.lblMessage.Text += "<br/><br/>";
        foreach (var item in states2)
        {
            this.lblMessage.Text += "List2: " + item.Name + " " + item.ID.ToString() + "<br/>";
        }
    }
}

public class State
{
    public int ID { get; set; }
    public string Name { get; set; }
} 
```

# ruby-on-rails - ActiveSupport::TimeWithZone 和 Date 之间的操作

> ID：11217777
> 
> 赞同：0
> 
> 时间：2012-06-27T00:25:16.120
> 
> 标签：ruby-on-rails, ruby-on-rails-3

> **可能重复：**
> [将 Date 对象转换为 TimeWithZone](https://stackoverflow.com/questions/2518398/converting-date-object-to-timewithzone)

好吧，我开始使用 Rails (3.2.6) 进行 Web 开发，目前很喜欢它：D

我需要你的帮助。我有一个`Processo`包含一些字段的模型，以及`prazo`......你知道，标准的东西迁移创建......`datetime``created_at`

我的问题是：我需要知道如何在两个字段之间进行一些数学运算。`created_at`我需要知道和之间有多少天`prazo`。

我已经尝试了几乎所有可以在这里和谷歌上搜索的东西。你能帮助我吗 ？

`prazo`有`Date`课，`created_at`有`ActiveSupport::TimeWithZone`课。

非常感谢，很抱歉只是在我的第一篇文章中偷懒。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T00:55:58.113

抱歉，重新阅读问题.. 试试 Frederick Cheung 说的

> 你想说 ['my_datetime_column >= ？和 my_datetime_column < ?', Date.today(), Date.today()+1] 这是有效的，因为我知道的 dbs 将 '2007-04-20' 处理为 '2007-04-20 00:00:00' . 如果你 db 做了一些不同的事情，你将不得不为此进行调整。

您可能需要仔细检查时区

[http://www.ruby-forum.com/topic/146579#648686](http://www.ruby-forum.com/topic/146579#648686)

# javascript - 从某一天数到今天

> ID：11217779
> 
> 赞同：2
> 
> 时间：2012-06-27T00:25:37.817
> 
> 标签：javascript

我在这里查看了一个统计页面：http: [//movies.io/i/stats](http://movies.io/i/stats)

我注意到下面有一个很酷的漂亮东西，有一个计数器，可以计算从网站诞生到今天的时间。它显示为：`It was born 1 month, 8 days, 2 hours, and 36 minutes ago.`我尝试在页面上找到代码但没有运气。

问题是，在搜索如何做时，我只发现数天。还有一个问题是刷新它......而不刷新页面。这似乎是一些严肃的编码。

如何在显示的页面上制作计数器？我不想使用 jQuery。

**如果这听起来像是一个问题，我很抱歉：嘿……在我放松的时候做我的工作。但问题是我是新手，我找不到我想做的事情的解决方案。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T17:25:01.737

以无聊的名义......这个页面应该在没有jquery的情况下更新javascript中的时间跨度。

```
<!doctype html>
<html>
<body onload="init()">
    <script type="text/javascript">
        function init() {
            updateTimespan();
            setInterval(updateTimespan, 3000);
        }

        function updateTimespan() {
            var birth = new Date(1987, 3, 20); // april 20th
            var now = new Date();
            var timespan = getTimespan(birth, now);

            var content = '' + timespan.years + ' years, ' +
                timespan.months + ' months, ' +
                timespan.days + ' days, ' +
                timespan.hours + ' hours, ' +
                timespan.minutes + ' minutes, ' +
                timespan.seconds + ' seconds.';

            var p = document.getElementById('pTimespan');
            p.innerHTML = content;
        }

    function getTimespan(start, end) {
        var seconds = end.getSeconds() - start.getSeconds();
        var minutes = end.getMinutes() - start.getMinutes();
        var hours = end.getHours() - start.getHours();
        var days = end.getDate() - start.getDate();
        var months = end.getMonth() - start.getMonth();
        var years = end.getFullYear() - start.getFullYear();

        if (seconds < 0) {
            minutes -= 1;
            seconds += 60;
        }

        if (minutes < 0) {
            hours -= 1;
            minutes += 60;
        }

        if (hours < 0) {
            days -= 1;
            hours += 24;
        }

        if (days < 0) {
            months -= 1;
            var lastMonthNumber = end.getMonth() - 1;
            if (lastMonthNumber < 0) { lastMonthNumber += 12; } // will never be Feb.
            var daysInLastMonth = new Date(end.getFullYear(), lastMonthNumber, 0).getDate();
            days += daysInLastMonth;
        }

        if (months < 0) {
            years -= 1;
            months += 12;
        }

        return {
            years: years,
            months: months,
            days: days,
            hours: hours,
            minutes: minutes,
            seconds: seconds
        };
    }
    </script>
    <p>
        Time since my birth</p>
    <p id="pTimespan">
        Will be updated</p>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T00:29:24.957

一种解决方案是获取您的网站创建的纪元时间（或近似值）。然后从中减去当前时间。然后使用该毫秒数转换为年、月、日等。这可以在 javascript 或使用 PHP 的服务器上完成。

# c# - 按键分组并使用 LINQ 将值发送到列表中

> ID：11217792
> 
> 赞同：8
> 
> 时间：2012-06-27T00:28:45.977
> 
> 标签：c#, linq

假设我有一个简单的地址类，如下所示：

```
public class Address
{
    public int AddressId { get; set; }
    public List<int> NodeIds { get; set; }
} 
```

并填充了如下地址列表：

```
List<Address> listOfAddresses = new List<Address> 
{
    new Address {AddressId=1, NodeIds=new List<int>{1}},
    new Address {AddressId=2, NodeIds=new List<int>{2}},
    new Address {AddressId=3, NodeIds=new List<int>{3}},
    new Address {AddressId=1, NodeIds=new List<int>{4}},
    new Address {AddressId=1, NodeIds=new List<int>{5}}
} 
```

并且我想按 AddressIds 分组，因此结果列表将包含 NodeIds，如果出现重复，则基本上会汇总如下：

```
listOfAddressesWithoutDupes = 
AddressId=1, NodeIds=List<int>{1,4,5},
AddressId=2, NodeIds=List<int>{2}},
AddressId=3, NodeIds=new List<int>{3} 
```

所以基本上我正在看一个 groupby 函数（或其他东西），它会让我高于结果

```
List<Address> listOfFilteredAddresses = listOfAddresses.GroupBy(x=>x.AddressId).Select(y=>new Address{AddressId=y.Key, NodeIds=?}); 
```

提前致谢..

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-27T00:31:50.017

你快到了：

```
List<Address> listOfFilteredAddresses =
    listOfAddresses
    .GroupBy(x=>x.AddressId)
    .Select(y=>new Address{
        AddressId=y.Key
    ,   NodeIds=y.SelectMany(x=>x. NodeIds).ToList()
    }); 
```

这假设`NodeIds`in`Address`是唯一的；如果不是，请在`Distinct()`之后添加`SelectMany`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-07T11:05:22.590

您可以通过以下另一种方法进行

```
 var listOfFilteredAddresses = from e in listOfAddresses
                                  group e by e.AddressId into g 
                                  select new
                                 {
                                  AddressID=g.Key,
                                  NodeIDs=g.Select(x=>x.NodeIds).ToList()
                                 }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-23T18:15:16.470

有一个更好的方法：

```
List<Address> listOfFilteredAddresses =
listOfAddresses
.GroupBy(a => a.AddressId)
.Select(g => new Address
{
    AddressId = g.Key,
    NodeIds = g.ToList()
}); 
```

# ruby - 为什么在 ruby 中创建 Rational 不需要新方法

> ID：11217793
> 
> 赞同：5
> 
> 时间：2012-06-27T00:28:48.043
> 
> 标签：ruby, keyword, rational-numbers

> **可能重复：**
> [Ruby 语法问题：Rational(a, b) 和 Rational.new!(a, b)](https://stackoverflow.com/questions/4034174/ruby-syntax-question-rationala-b-and-rational-newa-b)

我正在阅读红宝石镐书，我对创建有理数的语法感到困惑。

```
Rational(3,4) * Rational(1,2) 
```

生产

```
=> 3/8 
```

为什么`new`不需要该方法`Rational`（我也注意到例如我可以在没有新方法的情况下创建一个字符串）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T00:36:14.927

一方面，Ruby 没有`new`关键字。`new`是所有类都拥有的类方法（它们从 继承它`Class`），它创建该类的对象。当你看到类似的东西时`Rational(3,4)`，`Rational`实际上只是`Object`（定义在`Kernel`）的一个私有方法，它使得创建有理数更容易。有关这些构造方法的更多信息，请参阅我的答案：[https ://stackoverflow.com/a/9677125/1008938](https://stackoverflow.com/a/9677125/1008938)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T00:36:07.773

这是一个恰好与类同名的方法。这是 Ruby 中常见的[转换习语](http://devblog.avdi.org/2012/05/07/a-ruby-conversion-idiom/)。

# java - 从可扩展列表动态启动活动

> ID：11217795
> 
> 赞同：0
> 
> 时间：2012-06-27T00:28:59.567
> 
> 标签：java, android, iphone

我正在尝试从我的可扩展列表的子项中启动一个活动。这个框架取自 Android SDK 中的示例，是我的应用程序的核心。这是代码，我将确定哪些区域不起作用。

```
package com.soraingraven.suprRef;

import android.app.ExpandableListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Gravity;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AbsListView;
import android.widget.BaseExpandableListAdapter;
import android.widget.ExpandableListAdapter;
import android.widget.ExpandableListView;
import android.widget.TextView;

public class SuperReferenceActivity extends ExpandableListActivity {
    ExpandableListAdapter mAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // Set up our adapter
        mAdapter = new MyExpandableListAdapter();
        setListAdapter(mAdapter);
        //registerForContextMenu(getExpandableListView());
        getExpandableListView().setOnChildClickListener(this);
    }

    @Override
    public boolean onChildClick(ExpandableListView parent, View v, int groupPosition, int childPosition, long id) {
        super.onListItemClick(parent, v, groupPosition, childPosition, id);
        String testName[][] = children[groupPosition][childPosition];
        try {
            Class clazz = Class.forName("com.soraingraven.suprRef." + testName);
            Intent intent = new Intent(this, clazz);
            startActivity(intent);
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }       
        // use groupPosition and childPosition to locate the current item in the adapter
        return true;
    }

    /*@Override
    public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
        menu.setHeaderTitle("Sample menu");
        menu.add(0, 0, 0, "Sample action");
    }

    @Override
    public boolean onContextItemSelected(MenuItem item) {
        ExpandableListContextMenuInfo info = (ExpandableListContextMenuInfo) item.getMenuInfo();
        String title = ((TextView) info.targetView).getText().toString();

        int type = ExpandableListView.getPackedPositionType(info.packedPosition);
        if (type == ExpandableListView.PACKED_POSITION_TYPE_CHILD) {
            int groupPos = ExpandableListView.getPackedPositionGroup(info.packedPosition); 
            int childPos = ExpandableListView.getPackedPositionChild(info.packedPosition); 
            Toast.makeText(this, title + ": Child " + childPos + " clicked in group " + groupPos,
                    Toast.LENGTH_SHORT).show();
            return true;
        } else if (type == ExpandableListView.PACKED_POSITION_TYPE_GROUP) {
            int groupPos = ExpandableListView.getPackedPositionGroup(info.packedPosition); 
            Toast.makeText(this, title + ": Group " + groupPos + " clicked", Toast.LENGTH_SHORT).show();
            return true;
        }

        return false;
    }*/ //Context Menu Stuff May or may not use

    //Indexes for all the options
    public class MyExpandableListAdapter extends BaseExpandableListAdapter {
        private String[] groups = {"Math Formulas and Equations"};                                  //Main Menu

        private String[][] children = {                                                             //Sub Menus
                { "PerfectGasLaw" }                                                             //Math Equations Sub Menu         
        };

        public Object getChild(int groupPosition, int childPosition) {
            return children[groupPosition][childPosition];
        }

        public long getChildId(int groupPosition, int childPosition) {
            return childPosition;
        }

        public int getChildrenCount(int groupPosition) {
            return children[groupPosition].length;
        }

        public TextView getGenericView() {
            AbsListView.LayoutParams lp = new AbsListView.LayoutParams(
                    ViewGroup.LayoutParams.FILL_PARENT, 128);
            TextView textView = new TextView(SuperReferenceActivity.this);
            textView.setLayoutParams(lp);
            textView.setGravity(Gravity.CENTER_VERTICAL | Gravity.LEFT);
            textView.setPadding(128, 0, 0, 0);
            return textView;
        }

        public View getChildView(int groupPosition, int childPosition, boolean isLastChild,
                View convertView, ViewGroup parent) {
            TextView textView = getGenericView();
            textView.setText(getChild(groupPosition, childPosition).toString());
            return textView;
        }

        public Object getGroup(int groupPosition) {
            return groups[groupPosition];
        }

        public int getGroupCount() {
            return groups.length;
        }

        public long getGroupId(int groupPosition) {
            return groupPosition;
        }

        public View getGroupView(int groupPosition, boolean isExpanded, View convertView,
                ViewGroup parent) {
            TextView textView = getGenericView();
            textView.setText(getGroup(groupPosition).toString());
            return textView;
        }

        public boolean isChildSelectable(int groupPosition, int childPosition) {
            return true;
        }

        public boolean hasStableIds() {
            return true;
        }
    }
} 
```

第 31 行我无法弄清楚如何让超级引用类接受子数组，因为它被列为另一个类的私有。请帮忙。我不确定我是否需要在活动类中创建一个 2D 数组并将其传递给包含在子项中的数据或确切需要做什么。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T00:52:12.110

您正在尝试将二维字符串数组连接到字符串！去除那个 [][]

```
 String testName = children[groupPosition][childPosition];
    try {
        Class clazz = Class.forName("com.soraingraven.suprRef." + testName); 
```

# c++ - 使用 cmake 构建库

> ID：11217800
> 
> 赞同：7
> 
> 时间：2012-06-27T00:29:27.123
> 
> 标签：c++, build, cmake, shared, sfml

很抱歉打扰大家，但我对 cmake 有一点编译问题。

我有一个用于构建测试可执行文件的 CMakeLists.txt 文件和一个共享库。它们都依赖于另一个库（SFML）。

我在带有 MinGW 的窗口上使用 cmake。

我知道我正在构建的库的名称与 sfml 的名称有点混淆，但它应该是 SFML 包装器，所以，我没有找到更好的名称！

这里是 CMakeLists.txt

```
cmake_minimum_required(VERSION 2.6)
project(projectName)

set(EXECUTABLE_NAME testSFML)
set(LIBRARY_NAME    SFMLwindow)

set(EXECUTABLE_OUTPUT_PATH ${CMAKE_CURRENT_SOURCE_DIR}/bin/)

include_directories(${CMAKE_CURRENT_SOURCE_DIR}/include /
${CMAKE_CURRENT_SOURCE_DIR}/../../include
)

link_directories(${CMAKE_CURRENT_SOURCE_DIR}/../../lib/)

file(
    GLOB_RECURSE
    SRC_FILES
    src/*
)

file(
    GLOB_RECURSE
    INCLUDE_FILES
    include/*
)

add_executable(
${EXECUTABLE_NAME}
main.cpp
${SRC_FILES}
${INCLUDE_FILES}
)

target_link_libraries(
    ${EXECUTABLE_NAME}
    sfml-main
    sfml-system
    sfml-window
)

add_library(
${LIBRARY_NAME}
SHARED
${SRC_FILES}
) 
```

我在终端中得到什么：

```
"C:\MinGW\bin\mingw32-make.exe" 
-- Configuring done
-- Generating done
-- Build files have been written to: C:/Users/iksemel/docs/WorkBench/programming/projets/TestSFML/cmake
Linking CXX shared library libSFMLwindow.dll
Creating library file: libSFMLwindow.dll.a
CMakeFiles\SFMLwindow.dir/objects.a(SFMLWindow.cpp.obj):SFMLWindow.cpp:(.text+0x59):undefined reference to `_imp___ZN2sf9VideoModeC1Ejjj'
CMakeFiles\SFMLwindow.dir/objects.a(SFMLWindow.cpp.obj):SFMLWindow.cpp:(.text+0xda): undefined reference to `_imp___ZN2sf6WindowC1ENS_9VideoModeERKSsjRKNS_15ContextSettingsE'
CMakeFiles\SFMLwindow.dir/objects.a(SFMLWindow.cpp.obj):SFMLWindow.cpp:(.text+0x163): undefined reference to `_imp___ZN2sf6Window5closeEv'
CMakeFiles\SFMLwindow.dir/objects.a(SFMLWindow.cpp.obj):SFMLWindow.cpp:(.text+0x1bd): undefined reference to `_imp___ZN2sf6Window9pollEventERNS_5EventE'
CMakeFiles\SFMLwindow.dir/objects.a(SFMLWindow.cpp.obj):SFMLWindow.cpp:(.text+0x1d8): undefined reference to `_imp___ZN2sf6Window7displayEv'
collect2: ld a retourné 1 code d'état d'exécution
mingw32-make.exe[2]: *** [libSFMLwindow.dll] Error 1
mingw32-make.exe[1]: *** [CMakeFiles/SFMLwindow.dir/all] Error 2
mingw32-make.exe: *** [all] Error 2 
```

如果有人知道发生了什么，我将不胜感激！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-27T01:51:53.670

猜测一下，您的`SFMLwindow`库需要链接到部分或全部 sfml-main、sfml-system、sfml-window。

您可以尝试将 CMakeLists.txt 的结尾更改为：

```
add_library(
    ${LIBRARY_NAME}
    SHARED
    ${SRC_FILES}
    ${INCLUDE_FILES}
)

add_executable(
    ${EXECUTABLE_NAME}
    main.cpp
)

target_link_libraries(
    ${LIBRARY_NAME}
    sfml-main
    sfml-system
    sfml-window
)

target_link_libraries(
    ${EXECUTABLE_NAME}
    ${LIBRARY_NAME}
) 
```

顺便说一句，`file(GLOB_RECURSE...`通常不赞成将其作为收集来源列表的一种方式。从文档中[`file`](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command%3afile)：

> 我们不建议使用 GLOB 从源代码树中收集源文件列表。如果添加或删除源时没有 CMakeLists.txt 文件更改，则生成的构建系统无法知道何时要求 CMake 重新生成。

此外，在这种情况下[`find_library`](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command%3afind_library)应该首选。[`link_directories`](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command%3alink_directories)从文档中`link_directories`：

> 请注意，此命令很少需要。find_package() 和 find_library() 返回的库位置是绝对路径。将这些绝对库文件路径直接传递给 target_link_libraries() 命令。CMake 将确保链接器找到它们。

# python - # 错误：ImportError: No module named samples.lightIntensity #

> ID：11217801
> 
> 赞同：1
> 
> 时间：2012-06-27T00:29:37.897
> 
> 标签：python, module, maya

这是我的脚本：

```
import maya.cmds as cmds

def changeLightIntensity(percentage=1.0):
    """
    Changes the intensity of each light the scene by percentage.

    Parameters:
        percentage - Percentage to change each light's intensity. Default value is 1.

    Returns:
        Nothing.
    """
    #The is command is the list command. It is used to list various nodes
    #in the  current scene. You can also use it to list selected nodes.
    lightInScene = cmds.ls(type='light')

    #If there are no lights in the scene, there is no point running this script
    if not lightInScene:
        raise RunTimeError, 'There are no lights in the scene!'

    #Loop through each light
    for light in lightInScene:
        #The getAttr command is used to get attribute values of a node
        currentIntensity = cmds.getAttr('%s.intensity' % light)
        #Calculate a new intensity
        newIntensity = currentIntensity * percentage
        #Change the lights intensity to the new intensity
        cmds.setAttr('%s.intensity' % light, newIntensity)
        #Report to the user what we just did
        print 'Changed the intensity of light %s from %.3f to %.3f' % (light, currentIntensity, newIntensity)

import samples.lightIntensity as lightIntensity
lightIntensity.changelightIntensity(1.2) 
```

我的错误是：

> ImportError：没有名为 samples.lightIntensity 的模块

有什么问题？我可以这样做吗？解决方案是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T01:56:31.510

看来您正在关注[本](http://www.chadvernon.com/blog/resources/python-scripting-for-maya-artists/python-in-maya/)教程。您误解的是代码示例中的最后两行不应该是脚本的一部分，但它们是为了在解释器中运行以前的代码。如果您再看一下本教程，您会发现主代码示例上方有一个标题为**lightIntensity.py**，而第二个较小的代码示例前面是*“要运行此脚本，请在脚本编辑器中键入.. 。”*

所以这：

```
import samples.lightIntensity as lightIntensity
lightIntensity.changelightIntensity(1.2) 
```

不应该以这种形式出现在您的文件中。

你可以做两件事。两者都应该解决问题并允许您运行代码，尽管我更喜欢第二个以便于使用。

1.  将没有最后两行的代码另存为`lightIntensity.py`, 并在 python shell 中（启动 python，在命令行，IDLE，无论你使用什么），然后在提示符后，`import lightIntensity`输入你的脚本，并`lightIntensity.changelightIntensity(1.2)`调用函数在脚本中。

2.  或者，您可以修复脚本，使其在不尝试导入自身的情况下运行。为此，请删除该`import`行并将最后一行更改为`changelightIntensity(1.2)`

# telnet - 通过命令行确定给定电子邮件是否有效的最快方法是什么？

> ID：11217807
> 
> 赞同：1
> 
> 时间：2012-06-27T00:30:12.167
> 
> 标签：telnet, email-validation, bulk

我想自动验证大量电子邮件。

我的第一个想法是运行 telnet 并使用每封电子邮件查询 Google SMTP 服务器，但随后我必须解析输出，这会为流程增加一个额外的步骤，鉴于要运行的测试数量，这将使流程无限慢。

所以，我的问题是，什么是批量测试电子邮件有效性*的*计算成本最低的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:49:33.747

连接到 Google 邮件交换器将允许仅验证由 Google 自己处理的电子邮件地址。最重要的是，解析 SMTP 对话框并不是一件容易的事，前提是您需要处理*所有*可能的 SMTP 状态代码。此外，如果您超载其邮件交换器，以这种方式验证大量电子邮件地址将使 Google 禁止您的 IP 地址。

话虽如此，假设您在 Windows 下运行，如果您需要从命令行验证您的电子邮件地址列表，我建议使用我们的[电子邮件验证](http://cobisi.com/email-validation/.net-component)库和一个简单的 PowerShell 脚本。我们的软件通过自定义`Verify-EmailAddress`cmdlet 支持 PowerShell，或者，对于高级场景，通过一组可以在 PowerShell 中轻松使用的 .NET 类，它可以执行[高级语法检查](http://cobisi.com/email-validation/.net-component/features/syntax-validation)、DNS 验证、[邮箱存在](http://cobisi.com/email-validation/.net-component/features/mailbox-existence-check)测试[等等更多](http://cobisi.com/email-validation/.net-component/features)。

下面是一个简短的示例，展示了如何使用内置`Verify-EmailAddress`cmdlet 验证电子邮件地址列表：

```
'me@example.com', 'you@example.com' |
    ? { (Verify-EmailAddress $_ -Level MailBox).IsSuccess } 
```

最后，如果您熟悉 C#，请查看这些[代码示例](http://cobisi.com/support/kb/emailverify.net/code-samples)，您可以轻松转换为 PowerShell（请向我们寻求[帮助](http://cobisi.com/support/contact-us)）。

# c# - 正则表达式拆分地址并返回特定部分

> ID：11217808
> 
> 赞同：0
> 
> 时间：2012-06-27T00:30:13.197
> 
> 标签：c#, regex

我正在使用 C# 的 RegEx 将地址分解为特定部分，然后返回这些部分，并根据模式进行拆分。

单位编号可以定义为数字和单个字母的任意组合，或数字、空格和单个字母的任意组合

> 即2a、328b、32c都是单元号。

如果我有地址 - 例如。

> ```
> unit 32 a Smith Crescent, Johnsonville 
> ```

我想要允许我返回所有内容的正则表达式，包括单位号的最后一个实例

> 单元32a

或之后的所有内容，不包括单元号的最后一个实例

> 史密斯新月，约翰逊维尔

另一个（不切实际的）例子：

```
unit 32a Smith 3 d Crescent, Johnsonville 
```

我希望能够得到：

```
unit 32a Smith 3 d 
```

或者

```
Crescent, Johnsonville 
```

即我想在最后一个实例上匹配：

```
 "[0-9][a-z] " or "[0-9] [a-z] " 
```

我试过了：

```
var beforePattern = "^.*[0-9][a-z] ";
            var beforepatternSpace = "^.*[0-9] [a-z] ";
            var afterPattern = "[0-9][a-z] (.*)";
            var afterPatternSpace = "[0-9] [a-z] (.*)"; 
```

然而，后面的模式包括匹配字符串。另外，我不确定如何确定应该使用哪个之前/之后的匹配（除了说最长的“之前”或最短的“之后”必须是有效的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T00:36:01.037

我会在 C# 中使用它

```
(.*\d\s*[a-z])\s*(.*) 
```

第 1 组和第 2 组有你现在想要的

对两个样品进行了测试。如果某些情况不是预期的，请提供更多示例。

一些 C# 代码

```
var match = Regex.Match("unit 32a Smith 3 d Crescent, Johnsonville", @"(.*\d\s*[a-z])\s*(.*)");

var part1 = match.Groups[1].Value;
var part2 = match.Groups[2].Value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T00:42:57.590

```
var regex = new Regex( "(?<before>.*\d+\s?\w+\s)(?<after>.*)" );

var match = regex.Match( input );

var beforeString = match["before"].Value;
var afterString = match["after"].Value; 
```

由于正则表达式将尽可能匹配，因此应该可以找到您要查找的内容

# css - 在 SublimeText 2 中为新文件 ext 创建或添加语法

> ID：11217809
> 
> 赞同：2
> 
> 时间：2012-06-27T00:30:30.667
> 
> 标签：css, less, sublimetext2

我开始学习`LESS CSS Preprocessor` ，文件 ext 是 .less，当我在 Sublime Text 2 中查看文件时，编辑器选择的语法是纯文本......我可以将其更改为 css 但如何保存该设置？

**// 编辑：**就在我发布问题后的第二秒，我发现如何保存它......：D

```
View -> Syntax -> Open all with current extensions as .. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T14:25:35.203

有一个插件可以支持 ST2 中的较少突出显示。您可以使用包管理器获取它。

如果你没有包控制，你可以在这里得到它，它非常有用：[http ://wbond.net/sublime_packages/package_control](http://wbond.net/sublime_packages/package_control)

之后，只需使用它 -> CTRL+SHIFT+P -> 安装包 -> 搜索更少 -> 安装 :)

# javascript - 制作谷歌注释的时间轴为缺失的日期填充零

> ID：11217810
> 
> 赞同：4
> 
> 时间：2012-06-27T00:30:35.980
> 
> 标签：javascript, google-visualization

有没有办法让谷歌的带注释的时间线图表归零日期不在它的数据表中？

[https://developers.google.com/chart/interactive/docs/gallery/annotatedtimeline](https://developers.google.com/chart/interactive/docs/gallery/annotatedtimeline)

我想要

```
 var data = new google.visualization.DataTable();
       data.addColumn('date', 'Date');
       data.addColumn('number', 'My Number');

       data.addRows([
         [new Date(2008, 1 ,1), 1,
         [new Date(2008, 1 ,2), 2],

         [new Date(2008, 1 ,4), 4],
         [new Date(2008, 1 ,5), 5],
      ]); 
```

要和一样

```
 var data = new google.visualization.DataTable();
       data.addColumn('date', 'Date');
       data.addColumn('number', 'My Number');

       data.addRows([
         [new Date(2008, 1 ,1), 1,
         [new Date(2008, 1 ,2), 2],
         [new Date(2008, 1 ,3), 0],
         [new Date(2008, 1 ,4), 4],
         [new Date(2008, 1 ,5), 5],
      ]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T22:24:33.840

看起来现在没有办法做到这一点（除了自己修改数据） - 自 2009 年以来，此功能请求已开放：[http ://code.google.com/p/google-visualization-api-issues /issues/detail?id=25](http://code.google.com/p/google-visualization-api-issues/issues/detail?id=25)

# java - 我正在寻找 permgen 的垃圾收集策略？

> ID：11217811
> 
> 赞同：0
> 
> 时间：2012-06-27T00:30:44.787
> 
> 标签：java, tomcat, garbage-collection, permgen

我在 Debian 服务器上使用 tomcat6 和 java。有谁知道 PermGen 的一些好的和可靠的垃圾收集策略？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T02:03:04.673

如果你有证据表明你有太多加载的类的问题，特别是，如果你有很多“一次性”类可能被引用一次而不再使用的问题，你应该了解自定义类加载器.

为了对一个类进行垃圾回收，该类的所有对象都必须是可回收的，并且除了加载类加载器（还必须满足“可回收性”的标准要求）之外，不得有对该类的引用。然后类和它正在加载的类加载器将被收集在一起。

# spotify - 在 iOS 应用中使用 Spotify 的 webAPI

> ID：11217812
> 
> 赞同：1
> 
> 时间：2012-06-27T00:30:54.230
> 
> 标签：spotify

所以我正在开发一个 iOS 应用程序，我想使用 Spotify Web API 在 Spotify 中搜索和查找歌曲。但是，我真的不知道这是否是如何做到的，或者是否有更好的方法可以做到这一点，并且想在开始之前澄清一下。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:53:33.930

如果您想使用 Web API，它的工作方式与任何其他 JSON REST API 相同，因此在 iOS 上执行此操作的许多教程都会对您有所帮助。对于 JSON 和 Objective-C 数据结构之间的转换，较新的 iOS 版本有`NSJSONSerialization`，否则我可以推荐开源的`TouchJSON`.

此外，您可能还想查看 CocoaLibSpotify，它是一个 Objective-C 库，用于以比 Web API 更集成的方式与 Spotify 服务交互——包括音乐流。但是，它确实需要 Spotify 用户登录才能使用。

# python - 使用 python / popen 通过管道处理大量数据

> ID：11217825
> 
> 赞同：1
> 
> 时间：2012-06-27T00:33:15.433
> 
> 标签：python, subprocess, pipe, popen

我正在尝试观察一个过程并等待某种模式，比如：

```
open someFile id=123 
```

然后，在那之后，我想等待

```
close id=123 
```

我尝试编写脚本如下：

```
running_procs = [Popen(["process", "and", "options"], stdout=PIPE, stderr=PIPE)]

while running_procs:
    for proc in running_procs:
        retcode = proc.poll()
        if retcode is not None: # Process finished.
            running_procs.remove(proc)
            break
        else:
            while True:
                next_line = proc.stdout.readline()
                if next_line == '' and proc.poll() != None:
                    break
                m = re.search( r'someFile.*id\=([0-9]*)', next_line, re.M|re.I)
                if m:
                  print m.group(1) 
```

但它似乎执行得太慢了。关于处理管道中的大量线路有什么建议吗？有更快的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T01:09:09.017

在这个特定示例中没有任何内容表明它应该仅仅因为代码而变慢。在您的列表中只有一个进程，它会以尽可能快的速度读取行，因为该进程使它们可用。这意味着代码将依赖于子进程刷新其输出并使行可用。但这确实是可以预料的。

由于您将始终逐行阅读，因此您可能希望`bufsize=1`在 Popen 中进行设置，以确保其始终缓冲行：

```
Popen(["process"], stdout=PIPE, stderr=PIPE, bufsize=1) 
```

但是，如果您打算运行多个进程，我确实会看到一个问题，正如您正在使用可能的进程列表并从中弹出死进程这一事实所表明的那样。您的循环将一次阻塞一个进程。如果这不是您让进程连续读取的意图，那么这将导致您获取数据的速度变慢。它们并行运行，但只能串行监控。

除此之外，您还必须更详细地说明您认为结果缓慢的原因以及您期望发生的情况。

# javascript - 如何使用 JavaScript 运行 MySQL 查询

> ID：11217832
> 
> 赞同：7
> 
> 时间：2012-06-27T00:34:29.717
> 
> 标签：javascript, mysql

我想在不重新加载页面的情况下运行 MySQL 查询。我认为 JavaScript 可以做到这一点，但我不确定如何。我想要做的是有一个带有返回 id 字段的表格，当你用返回 id 填写一次表格并稍后返回并使用该返回 id 时，它会为他们填写很多内容以节省时间.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T00:37:26.190

Javascript 本身不能运行 MySQL 查询；但是，您可以使用[ajax](http://en.wikipedia.org/wiki/Ajax_%28programming%29)调用服务器来检索数据。我喜欢使用 jQuery 的[ajax()](http://api.jquery.com/jQuery.ajax/)来满足我的 ajax 需求。

以下是 jquery 的 ajax() 方法如何工作的示例：

```
$.ajax({
  url: "pathToServerFile",
  type: "POST",
  data: yourParams,
  dataType: "json"
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-27T00:37:43.350

您无法使用纯 JavaScript 进行查询。它必须通过在后端设置的钩子来完成。

这往往是用 ajax 来完成的。

此外，如果可以从客户端进行查询，那么每个人都可以看到您的连接字符串。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-27T00:37:54.887

您需要有一个后端脚本来执行查询 - JavaScript，作为一种完全客户端语言，对您的 MySQL 服务器发生的事情没有发言权。

您需要做的是通过 AJAX 将查询中所需的参数传递给您使用的任何服务器端语言，并让脚本根据需要创建和处理查询。

不要在 javascript 中创建查询并将其传递给服务器 - 这是非常不安全的，因为它允许任何人运行他们想要的任何查询。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-27T00:39:36.243

使用 ajax 就可以完成这项工作。但是您仍然需要一种服务器端语言来调用 ajax。将 jquery 与 ajax 一起使用会更快！

```
$.ajax({
  type: "POST",
  url: "someserversidelangfile",
  data: "" //pass data through this variable
}).done(function( msg ) {
  //do so
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-21T13:43:46.777

每个人都在关注`ajax`，所以这里有一个关于如何使用 vanilla JavaScript 发送数据并取回响应的示例。这将是一个无意义的示例，将使用非 PDO MySQL 连接。后端是 PHP，但 script.js 文件实际上与 NODE.js 后端相同。

## 脚本.js

```
 /* mode options are cors, no-cors (only send, no response) and same-origin */
fetch('not-ajax.php', {
  method: 'post',
  mode: 'same-origin',
  credentials: 'same-origin',
  headers: {
    'Content-Type': 'application/json',  // sent request
    'Accept':       'application/json'   // expected data sent back
  },
  body: JSON.stringify({
    /**
     * FYI: For this particular case you would actually prefer to have this snippet
     * just before ending </body> tag so it get's actual width of the window minus
     * the width of the scrollbar if there is one. If you use it in an external
     * script it's the same as using window.innerWidth and window.innerHeight.
     **/
    'screen_width': document.documentElement.clientWidth,
    'screen_height': document.documentElement.clientHeight
  })
})
/**
 * You need this part as well if you send json-encoded data back from backend.
 **/
.then(response => response.json())
.then(data => {
  console.log('Success:', data);
})
.catch((error) => {
  console.error('Error:', error);
}); 
```

## 非ajax.php

```
<?php
  include 'connection.php';

  $contentType = isset($_SERVER["CONTENT_TYPE"]) ? trim($_SERVER["CONTENT_TYPE"]) : '';
  if ($contentType === "application/json") {

    // Receive the RAW post data.
    $content = trim(file_get_contents("php://input"));
    // $decoded can be used the same as you would use $_POST with ajax
    $decoded = json_decode($content, true);

    /**
     * Sure enough you can use a SELECT statement, get the data from the database,
     * manipulate it to your heart's content, and then send it back to fetch
     * function in JavaScript for further manipulation and usage.
     **/
    $sql =
      "INSERT INTO used_screen_dimensions (
      ) VALUES ( ?, ? )";
    $statement = $connection->prepare($sql);
    /**
     * first parameter is a string with characters
     *   'i' for integer,
     *   'd' for double,
     *   's' for string,
     *   'b' for blob
     * in the respective order to all other binded parameters
     **/
    $statement->bind_param('ii', $decoded['screen_width'], $decoded['screen_height']);
    $result = $statement->get_result();
    $statement->close();

    /**
     * You may only echo out one thing, but it doesn't have to be a boolean.
     * You can (and should) echo an object with more info including what error
     * it is.
     **/
    if(! is_array($decoded)) {
      echo 0; //If json_decode failed, the JSON is invalid.
      return;
    } else {
      // Send error back to fetch.
      if (!$result) {
        echo 0; // couldn't insert to database
        return;
      }
      echo 1; // Success
    }
  } else {
    echo 0; // Wrong content type
  } 
```

不知道为什么我去手写这个答案。难免有错误。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-08-31T06:40:08.850

JavaScript 无法运行 MySql 命令。您可以将 JQuery 与 Ajax 一起使用。像这样 ：

```
$.ajax({
  type: "POST",
  url: url,
  data: data,
  success: success,
  dataType: dataType
});
```

# php - 使用多个内部连接进行 MySQL 过滤

> ID：11217835
> 
> 赞同：0
> 
> 时间：2012-06-27T00:35:30.730
> 
> 标签：php, mysql, sql, pdo

我目前正在努力寻找解决我所处情况的解决方案。我会给你一些关于数据库结构的背景知识：表'**实体**'有列**Ent_ID** (AI, Int), **Ent_Type** (Enum, 'Locations, Characters, Houses, Armies') 和**Obj_ID** (Int)。Obj_ID 与相关表中的 ID 匹配。例如，“ **Locations** ”表具有 Obj_ID (AI, Int)、**Loc_Name** (Text) 和**Loc_Desc** (Text) 列。

根据日期，字符可以位于不同的位置，所以我有一个“ **TimeSensitives** ”表来存储这些东西。该表具有列**TS_ID** (AI, Int)、**Ent_ID** (Int)、**TS_Start** (Float)、**TS_End** (Float) 和**TS_Content** (Text)。Ent_ID是**哪个**字符是一些信息（例如位置）。该位置的 Ent_ID 进入**TS_Content**。

因此，正如您可能想象的那样，我有许多地点，每个地点在不同的日期都有不同的字符。我的问题是我想搜索一个位置，该位置要么具有名称 LIKE 搜索过滤器，要么有一个名称具有名称 LIKE 搜索过滤器的字符。

到目前为止，我已经遍历了类型为“Locations”的每个实体，然后对于每个实体，我都遍历了当前存在的所有字符。这是我的代码：

```
SELECT * 
FROM Entities 
INNER JOIN Locations 
ON Entities.Obj_ID=Locations.Obj_ID 
WHERE Entities.Ent_Type='Locations' 
    AND Loc_Name LIKE ? 
```

然后对于每一个：

```
SELECT * 
FROM TimeSensatives 
INNER JOIN Entities 
ON TimeSensatives.Ent_ID=Entities.Ent_ID 
INNER JOIN Characters 
ON Entities.Obj_ID=Characters.Obj_ID 
WHERE TS_Type='Location' 
    AND TS_Content=? 
    AND TS_Start<=? 
    AND TS_End>=? 
```

因此，您可能已经看到，目前这仅在选择地点时考虑了搜索过滤器。我现在也想在字符上实现搜索过滤器，但它需要显示不一定具有匹配名称但确实具有匹配名称的字符的位置。我希望这是有道理的。我当前的代码不会选择没有匹配名称的任何位置，因此没有机会搜索匹配的字符名称。

有没有办法把它组合成一个sql语句？或者有人能想出一种方法来实现我想要做的事情吗？

任何帮助将不胜感激，如果您需要更多信息，请询问:) Kallum

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T00:52:37.813

```
SELECT
  Entities.*,
  Locations.Loc_Name as Loc_Name
FROM
  Entities
  INNER JOIN Locations ON Entities.Obj_ID=Locations.Obj_ID 
WHERE
  Entities.Ent_Type='Locations' 
  AND Loc_Name LIKE ?

UNION

SELECT
  LocEnt.*,
  Locations.Loc_Name as Loc_Name
FROM 
  TimeSensatives
  INNER JOIN Entities AS CharEnt ON TimeSensatives.Ent_ID=CharEnt.Ent_ID
  INNER JOIN Characters ON Entities.Obj_ID=Characters.Obj_ID
  INNER JOIN Entities AS LocEnt ON TS_Content.Ent_ID=LocEnt.Ent_ID
  INNER JOIN Locations ON LocEnt.Obj_ID=Locations.Obj_ID 
WHERE
  TS_Type='Location' 
  AND TS_Start<=?
  AND TS_End>=?
  AND Char_Name LIKE ? 
```

会给你所有需要的位置加上他们的名字

# postgresql - 将 Postgresql 8.4 迁移到 9.1

> ID：11217842
> 
> 赞同：0
> 
> 时间：2012-06-27T00:36:17.133
> 
> 标签：postgresql, postgis

我目前在 Centos 6 上运行 Postgres 8.4。我需要在 Windows 机器上迁移到 Postgres 9.1。我有我的理由......无论如何，将数据从一个数据库移动到另一个数据库而不中断服务和丢失任何功能的最佳方法是什么，尤其是 PostGIS？与 9.1 一起安装的 PostGIS 版本 (2.0) 有一些我想利用的功能，但同时我不想失去 8.4 中的任何功能。任何人都可以对此提供一些见解吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T03:04:29.523

据我所知，唯一能让您在不停机的情况下升级的是基于触发器的复制系统，例如[Slony-I](http://slony.info/)。

# android - 水平进度条未正确显示

> ID：11217851
> 
> 赞同：1
> 
> 时间：2012-06-27T00:38:39.737
> 
> 标签：android, progress-bar

我创建了一个包含水平 ProgressBar 的 XML 文件，但它显示如下图所示：

![进度条图片](../Images/946e15469a56daf0563edb0df91fd688.png)

这是我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <ProgressBar
        android:id="@+id/progress"
        style="@android:style/Widget.ProgressBar.Horizontal"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:max="100"
        android:progress="50" />

</LinearLayout> 
```

怎么了？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T00:47:50.640

通常，您应该在布局中获得一个水平进度条，但尝试

将 ProgressBar 小部件中的样式标签更改为此

```
style="?android:attr/progressBarStyleHorizontal"

<ProgressBar
    android:id="@+id/progress"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:max="100"
    android:progress="50" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T00:43:23.177

它被扭曲到你给它的尺寸

```
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
```

尝试使用 wrap_content 或设置 layout_weight。此外，您似乎对 XML 布局没有很好的理解。我建议仔细阅读这篇文章：http: [//developer.android.com/guide/topics/ui/declaring-layout.html](http://developer.android.com/guide/topics/ui/declaring-layout.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-15T10:12:53.003

我建议在活动文件中添加这个

```
pbSurvey.getProgressDrawable().setColorFilter(Color.parseColor("#0668A1"), PorterDuff.Mode.SRC_IN); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-10-21T10:07:56.887

您是否尝试将 android:indeterminate="false" 添加到您的 XML 文件中？您的进度条 XML 应如下所示：

```
<ProgressBar
    android:id="@+id/progress"
    style="@android:style/Widget.ProgressBar.Horizontal"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:max="100"
    android:indeterminate="false"
    android:progress="50" /> 
```

旋转轮用于“不确定”模式，当总进度未知时（即您只是让用户知道他们需要等待，但您不确定要等待多长时间）。

# python - 将四边形分割成最大面积的子区域

> ID：11217855
> 
> 赞同：1
> 
> 时间：2012-06-27T00:39:01.710
> 
> 标签：python, math, geometry, gis

将矩形/正方形分割成更小的区域并强制每个子区域的最大面积非常容易。您可以将该区域划分为边长为 sqrt(max_area) 的区域，并小心处理剩余部分。

但是，对于四边形，我很难过。假设我不知道任何角落的角度。我们还假设所有四个点都在同一平面上。此外，我不需要小区域的大小都相同。我唯一的要求是每个单独区域的面积小于最大面积。

我可以使用特定的数据结构来简化此操作吗？
有没有我找不到的算法？

我可以使用四叉树来做到这一点吗？我对树木并不是非常精通，但我确实知道如何实现这种结构。

当我这样做时，我会考虑 GIS 工作，但我相当有信心这不会影响分割四边形的算法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T00:49:39.273

您可以递归地将四边形在长边上一分为二，直到得到的区域足够小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T12:21:00.700

如果你的四边形是凸的，那么实际上你可以把它分成两个面积相等的部分，同时具有相等的周长！这称为*公平分区*，并在[The Open Problems Project](http://cs.smith.edu/~orourke/TOPP/P67.html#Problem.67)中进行了描述（它对更多的部分开放，但解决了两部分）。

对于非凸四边形，不难找到一条线将其分成两个相等的部分。
我相信这会奏效：将一条线穿过一个反射顶点，然后围绕该顶点旋转它，直到它平均划分该区域。如果您的唯一目标是将区域分成相等的两半，则相同的方法适用于凸多边形。

通用问题（对于任意多边形）称为“多边形的火腿三明治切片”。事实上，我写了一篇具有确切标题的论文。

# ruby-on-rails - 用于文本比较的 Ruby gem

> ID：11217858
> 
> 赞同：7
> 
> 时间：2012-06-27T00:39:07.203
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在寻找一种可以比较两个字符串（在这种情况下是文本段落）并能够衡量它们在内容上相似的可能性（可能只有几个单词重新排列、更改）的 gem。我相信 SO 在用户提交问题时会使用类似的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T00:54:25.837

我可能会使用 Diff::LCS 之类的东西：

```
>> require "diff/lcs"
>> seq1 = "lorem ipsum dolor sit amet consequtor".split(" ")
>> seq2 = "lorem ipsum dolor amet sit consequtor".split(" ")
1.9.3-p194 :010 > Diff::LCS.diff(seq1, seq2).length
 => 2 
```

它使用[最长公共子序列](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem)算法（使用 LCS 获取 diff 的方法在[wiki 页面](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem#Print_the_diff)上有描述）。

# php - Google 身份工具包 HTTPS 问题

> ID：11217860
> 
> 赞同：0
> 
> 时间：2012-06-27T00:39:20.563
> 
> 标签：php, javascript, git, google-openid

主页 URL 是 http
登录 URL 是 https

我发现如果我更改登录 URL，尽管它说您提交的是不安全的数据，但这些功能仍然有效。但是，在 https 中，这些函数什么都不做，我无法调试它以查看发生了什么。

```
window.google.identitytoolkit.notifyFederatedSuccess({ "email": "email@domain.com", "registered": true }); 
```

什么也没做。页面加载并且用户登录到站点，但模式窗口仍处于打开状态，需要刷新站点以向用户显示他们已登录。

所有窗口 Google 命令什么都不做。知道为什么吗？

页面代码：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
     <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.2/jquery-ui.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/googleapis/0.0.4/googleapis.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/jsapi"></script>
    <script type="text/javascript">           
        google.load("identitytoolkit", "1.0", {packages: ["notify"]});
    </script>

<script type="text/javascript">
window.google.identitytoolkit.notifyFederatedSuccess({ "email": "email@domain.com", "registered": true });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T21:52:53.743

使用谷歌身份工具包让一个域将您登录到另一个域是一团糟。IE 公司网站将您登录到产品网站，但这是非常值得的。它涉及构建 2 个会话引擎。

# c# - 应用程序启动时未加载主页索引

> ID：11217861
> 
> 赞同：0
> 
> 时间：2012-06-27T00:39:28.403
> 
> 标签：c#, asp.net-mvc-3

我正在开发一个 ASP.NET MVC3 应用程序。

在视图中，我创建了一个名为 Home 的文件夹和一个名为 Index 的视图。

然后我创建了一个控制器 HomeController。

在控制器中我添加了：

```
 public ActionResult Index()
    {
        return View();
    } 
```

但是当我运行应用程序时，我得到了这个错误：

```
The resource cannot be found.
Description: HTTP 404\. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is temporarily unavailable.  Please review the following URL and make sure that it is spelled correctly.

Requested URL: / 
```

如果我添加到地址栏：/Home/Index 视图会正常加载。

如何使应用程序在加载时自动转到主页/索引？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T00:47:22.670

您需要将路由添加到指向您的路径的 Global.asax 文件。

```
routes.MapRoute("Default", "{controller}/{action}/{id}",
            new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

# php - 通过 POST 使用 SecurityServiceProvider 进行用户身份验证

> ID：11217868
> 
> 赞同：3
> 
> 时间：2012-06-27T00:41:31.350
> 
> 标签：php, silex

我想做的是

1.  验证*bar* .com 上的用户和
2.  将他们的凭据发布到 foo.com/login 并重新对其进行身份验证，而无需再次登录。

目前，为了在 foo.com 上获取安全页面，我正在使用基于表单的访问，`SecurityServiceProvider`以及支持 db 的[`UserProvider`](http://silex.sensiolabs.org/doc/providers/security.html#defining-a-custom-user-provider)身份验证。效果很好：任何加载安全路由的尝试都会被防火墙拦截，然后在成功验证后重定向。

我不知道如何将 POST 变量（用户名和密码）传递给`provider`实例并将用户转发到提供的路由。

存根 POST 路由：

```
$app->post('/login', function(Request $req) use ($app) {
    $route    = $req->request->filter('route');
    $username = $req->get('username');
    $password = $req->get('password');

    /* magic happens...? */ 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:17:30.410

这是使用用户提供程序加载用户检查密码匹配然后在安全服务中设置令牌的示例。因此，如果您将此代码放入路由中，您可以访问请求您的用户名和密码。

```
$userProvider = $app['security.user_provider.default'];

$user = null;
try {
   $user = $userProvider->loadUserByUsername($username);
} catch (UsernameNotFoundException $e)
{
   ;
}
$encoder = $app['security.encoder_factory']->getEncoder($user);

// compute the encoded password
$encodedPassword = $encoder->encodePassword($password, $user->getSalt());

// compare passwords
if ($user->password == $encodedPassword)
{
   // set security token into security
   $token = new UsernamePasswordToken($user, $password, 'yourProviderKeyHere', array('ROLE_USER'));
   $app['security']->setToken($token);

   // redirect or give response here
} else {
   // error feedback
} 
```

# r - ggplot柱形图 - brewer对象中的颜色顺序无效

> ID：11217869
> 
> 赞同：3
> 
> 时间：2012-06-27T00:41:32.857
> 
> 标签：r, ggplot2

我正在尝试更改 ggplot 柱形图上的颜色。谷歌搜索后，我认为以下代码可以工作：

```
require(ggplot2)
require(RColorBrewer)
State <- c(rep("NSWTC",5), rep("TCV",5), rep("QTC",5), 
           rep("WATC",5), rep("SAFA",5), rep("Other",5))

Year  <- rep(c("11-12","12-13","13-14","14-15","15-16"),6)

##some random data
Funding.Programme <- abs(rnorm(30))

df <- data.frame(State, Year, Funding.Programme)

##this line makes the graph in the order you inputted it, rather than alphabetical
df$State <- factor(df$State, levels=unique(df$State))

##ugly coloured
bars <- ggplot(df) + 
            aes(x=Year ,y=Funding.Programme, fill=Year) + 
            geom_bar(stat='identity') + 
            facet_grid(facets=~State) + 
            scale_y_continuous('Gross Issuance Requirements')

##nicely coloured
blues <- brewer.pal(5, "Blues")
blues <- rev(blues)
##the following two graphs have the same colours
bars <- ggplot(df) + 
            aes(x=Year ,y=Funding.Programme, fill=Year) + 
            geom_bar(stat='identity') + 
            facet_grid(facets=~State) + 
            scale_y_continuous('Gross Issuance Requirements') + 
            scale_fill_brewer(blues)
bars
bars <- ggplot(df) + 
            aes(x=Year ,y=Funding.Programme, fill=Year) + 
            geom_bar(stat='identity') + 
            facet_grid(facets=~State) + 
            scale_y_continuous('Gross Issuance Requirements') + 
            scale_fill_brewer(blues.rev)
bars

##and this does not adjust the default colours
bars <- ggplot(df)+ 
            aes(x=Year,y=Funding.Programme, fill=Year) + 
            geom_bar(stat='identity') + 
            facet_grid(facets=~State) + 
            scale_y_continuous('Gross Issuance Requirements') + 
            scale_colour_manual(values = blues.rev)
bars 
```

但是最后一种方法不起作用，并且生成的倒数第二张和倒数第三张图表是相同的，尽管对象中的颜色顺序颠倒了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T01:02:36.753

您想要`scale_fill_manual(values = blues)`或相反`blues.rev`（您实际上并没有在示例代码中创建它，我认为这是一个错字）。

仅`scale_*_brewer`在您按名称选择默认调色板之一时使用。否则，`scale_*_manual`用于这种事情。

最后一个不起作用，因为您使用的是颜色而不是填充。

最后，回车和制表符：爱它们，珍惜它们，使用它们！

# eclipse - 如何在 Eclipse 中修改类路径？

> ID：11217870
> 
> 赞同：11
> 
> 时间：2012-06-27T00:41:47.227
> 
> 标签：eclipse, classpath

再次，我看到了这句话：

> 此处提供了可以包含在项目的 .classpath 中的 .classpath 文件片段（即链接）。请仅使用您实际需要的类路径条目（详见下文）。

这些句子是什么意思，如何在 eclipse 中将该代码段添加到我的类路径文件中？

请帮忙。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-27T00:43:43.783

我理解这一点，因为您想找到类路径*文件*。转到 Eclipse 并按`CTRL`+ `SHIFT`+ `R`。键入`.classpath`并选择项目中的文件。

注意：如果您正在修改此文件并且您不知道它是什么，我建议您要格外小心:)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-27T00:48:42.697

尽管您可以修改 .classpath 文件，但 Eclipse 会在您每次更改项目的 Java Build Path 属性时自动为您管理该文件。这是比手动更改文件更好的方法。

# jsp - 如何在 JSP 中显示图像？

> ID：11217873
> 
> 赞同：0
> 
> 时间：2012-06-27T00:42:52.263
> 
> 标签：jsp, jakarta-ee, servlets, jstl, el

我正在尝试在用户个人页面（JSP）上显示存储在数据库中的用户头像，这就是我所做的

1- 我有一个 servlet 处理登录请求并产生用户 Bean 对象。（用户头像作为字节数组，它可能会在不同的页面和位置多次出现，这就是为什么我更喜欢会话属性而不是每次都从数据库中读取它们）

2- 用户 bean 作为属性存储在会话中。

3-我想要另一个 JSP 或 Servlet 随时将此字节数组头像显示为图像。

4-我也希望这个 Servlet 可以用于其他图标图像，这就是为什么我认为它不能依赖会话属性来传递字节数组？（我不太确定这一点）

那么有什么设计可以实现我想要的吗？还是我应该简单地使用会话属性来传递数据？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T00:54:45.293

> *如何在 JSP 中显示图像？*

使用 HTML`<img>`元素。

* * *

> *有什么设计可以实现我想要的吗？*

您可以为此创建一个独立的 servlet。方法中只有 2 或 3 行代码`doGet()`。诚然，这个 servlet 并不能真正用于直接从数据库中流式传输图像，但您可以创建另一个。恕我直言，这不是主要问题。

* * *

> *还是我应该简单地使用会话属性来传递数据？*

仅当它真正代表会话范围的数据并且您基于性能测量确认将用户的头像保持在会话中比每次从数据库中流式传输时更快。请记住，会话范围内的任何数据都会累积服务器的内存，因此请确保这些图像不超过特定的文件大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T06:23:04.830

如果头像不是什么非常秘密的东西，我会创建一个 servlet，它接受一个用户 ID 参数并从数据库中获取图像数据。嵌入看起来像：

> `<img src="/avatarservlet?userid=XXX"/>`

这将解决几乎所有问题，除了性能问题。您有两个选择，而不是在会话中传递图像数据（baaaaaad 想法）：

1.  在您的 servlet 中添加 expires/cache 标头，以便浏览器进行缓存。
2.  由于您的 servlet 将是无状态的，因此它是方法缓存的理想选择。见[http://ehcache.org/documentation/recipes/spring-annotations](http://ehcache.org/documentation/recipes/spring-annotations)

# function - 在 Haskell 中，(+) 是一个函数，((+) 2) 是一个函数，((+) 2 3) 是 5。到底发生了什么？

> ID：11217874
> 
> 赞同：12
> 
> 时间：2012-06-27T00:42:55.953
> 
> 标签：function, haskell, functional-programming, programming-languages, partial-application

1.  这怎么可能，那里发生了什么？

2.  有这个名字吗？

3.  还有哪些其他语言具有相同的行为？

4.  任何没有强大的打字系统？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-27T01:20:07.263

如果您查看类型，则此行为非常简单直观。为了避免中缀运算符（如 ）的复杂性`+`，我将改用该函数`plus`。我还将专门`plus`研究`Int`，以减少 typeclass 线路噪音。

假设我们有一个`plus`类型的函数`Int -> Int -> Int`。一种阅读方式是“`Int`返回一个”的两个 s的函数`Int`。但是那个符号对于那个阅读来说有点笨拙，不是吗？返回类型在任何地方都没有特别指出。为什么我们要这样写函数类型签名？因为`->`是右结合的，所以等效类型是`Int -> (Int -> Int)`. 这看起来更像是在说“一个从一个`Int`到的函数（一个从一个`Int`到一个的函数`Int`）”。但这两种类型实际上是完全一样的，后一种解释是理解这种行为是如何工作的关键。

Haskell 将所有函数视为从单个参数到单个结果。您可能会想到计算结果取决于两个或多个输入（例如`plus`）的计算。Haskell 说该*函数* `plus`是一个接受单个输入并产生一个输出的函数，该输出是*另一个函数*。第二个函数接受一个输入并产生一个数字输出。因为第二个函数是由 first 计算的（并且对于第一个函数的不同输入会有所不同），“最终”输出可以取决于两个输入，因此我们可以使用这些函数实现具有多个输入的*计算*，这些函数只接受单个输入.

我保证如果您查看类型，这将非常容易理解。以下是一些示例表达式，其类型已显式注释：

```
plus       :: Int -> Int -> Int
plus 2     ::        Int -> Int
plus 2 3   ::               Int 
```

如果某个东西是一个函数并且你将它应用到一个参数上，那么你需要做的就是从函数的类型中移除直到第一个箭头的所有东西。如果留下一个有更多箭头的类型，那么你仍然有一个函数！当您在表达式的右侧添加参数时，您会从其类型的左侧删除参数类型。类型立即清楚所有中间结果的类型是什么，为什么`plus 2`是一个可以进一步应用的函数（它的类型有箭头）和`plus 2 3`不是（它的类型没有箭头）。

“柯里化”是将两个参数的函数转换为一个参数的函数的过程，该函数返回另一个参数的函数，该函数返回原始函数返回的任何内容。它也用于指代像 Haskell 这样的语言的属性，这些语言自动使所有功能都以这种方式工作；人们会说 Haskell“是一种柯里化语言”或“具有柯里化”或“具有柯里化功能”。

请注意，这特别优雅，因为 Haskell 的函数应用语法是简单的令牌邻接。您可以自由阅读to 2 个参数的应用，或 to 的应用`plus 2 3`，然后将结果应用到; 你可以以最适合你当时正在做的事情的方式在心理上对其进行建模。`plus``plus``2``3`

在带有括号的参数列表的类 C 函数应用程序的语言中，这有点崩溃。`plus(2, 3)`与 非常不同`plus(2)(3)`，并且在具有这种语法的语言中，所`plus`涉及的两个版本可能具有不同的类型。因此，具有这种语法的语言往往不会一直对所有函数进行柯里化，甚至不会对您喜欢的任何函数进行自动柯里化。但这些语言在历史上也往往不具有作为一流价值的功能，这使得缺乏柯里化成为一个有争议的问题。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-27T04:47:42.367

在 Haskell 中，**所有函数都只接受 1 个输入，并且只产生 1 个输出**。有时，一个函数的输入或输出可以是另一个函数。函数的输入或输出也可以是元组。您可以通过以下两种方式之一模拟具有多个输入的函数：

*   使用元组作为输入
    `(in1, in2) -> out`

*   使用函数作为输出*
    `in1 -> (in2 -> out)`

同样，您可以通过以下两种方式之一模拟具有多个输出的函数：

*   使用元组作为输出*
    `in -> (out1, out2)`

*   将函数用作“第二个输入”（la function-as-output）
    `in -> ((out1 -> (out2 -> a)) -> a)`

*这种方式通常受到 Haskellers 的青睐

该`(+)`函数模拟以典型的 Haskell 方式将 2 个输入作为输出来生成函数。（专门`Int`为了方便沟通：）
`(+) :: Int -> (Int -> Int)`

为了方便，`->`是右关联的，所以类型签名`(+)`也可以写成
`(+) :: Int -> Int -> Int`

* * *

`(+)`是一个函数，它接受一个数字，并从一个数字到另一个数字产生另一个函数。

`(+) 5`是应用于`(+)`参数的结果`5`，因此，它是一个从数字到数字的函数。

`(5 +)`是另一种写法`(+) 5`

`2 + 3`是另一种写法`(+) 2 3`。函数应用是左关联的，所以这是另一种写法`(((+) 2) 3)`。换句话说：将函数`(+)`应用于输入`2`。结果将是一个函数。获取*该*函数，并将其应用于 input `3`。结果*是*一个数字。

因此，`(+)`是一个函数，`(5 +)`是一个函数，`(+) 2 3`是一个数。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-27T00:45:59.490

在 Haskell 中，您可以获取两个参数的函数，将其应用于一个参数，然后获取一个参数的函数。实际上，严格来说，+ 不是两个参数的函数，它是一个参数的函数，它返回一个参数的函数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-27T00:48:25.663

1.  用外行的话来说，`+`是实际的函数，它正在等待接收**一定数量的参数**（在本例中为 2 个或更多），直到它返回。如果你不给它两个或更多参数，那么它将保持一个等待另一个参数的函数。
2.  这叫做[柯里化](http://en.wikipedia.org/wiki/Currying)
3.  许多函数式语言（Scala、Scheme 等）
4.  大多数函数式语言都是*强类型*的，但这最终是好的，因为它减少了错误，这在企业或关键系统中运行良好。

作为旁注，Haskell 语言以 Haskell Curry 命名，他在研究组合逻辑时重新发现了函数式柯里化现象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-21T03:57:43.323

Haskell 或 OCaml 等语言的语法特别适合于柯里化，但您可以在其他具有动态类型的语言中做到这一点，例如[Scheme 中的柯里](https://stackoverflow.com/a/6697201/400277)化。

# python - Python 2.7 结合 abc.abstractmethod 和 classmethod

> ID：11217878
> 
> 赞同：32
> 
> 时间：2012-06-27T00:43:39.213
> 
> 标签：python, google-app-engine, python-2.7

如何在 Python 2.7 中为抽象类方法创建装饰器？

是的，这类似于[这个问题](https://stackoverflow.com/questions/4474395/staticmethod-and-abc-abstractmethod-will-it-blend)，除了我想结合`abc.abstractmethod`and `classmethod`，而不是`staticmethod`. 此外，它看起来像是[在 Python 3](http://bugs.python.org/issue5867)`abc.abstractclassmethod`中添加的（我认为？） ，但我使用的是 Google App Engine，所以我目前仅限于 Python 2.7

提前致谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-27T02:12:24.883

*这是一个从 Python 3.3 的abc*模块中的源代码派生的工作示例：

```
from abc import ABCMeta

class abstractclassmethod(classmethod):

    __isabstractmethod__ = True

    def __init__(self, callable):
        callable.__isabstractmethod__ = True
        super(abstractclassmethod, self).__init__(callable)

class DemoABC:

    __metaclass__ = ABCMeta

    @abstractclassmethod
    def from_int(cls, n):
        return cls()

class DemoConcrete(DemoABC):

    @classmethod
    def from_int(cls, n):
        return cls(2*n)

    def __init__(self, n):
        print 'Initializing with', n 
```

这是运行时的样子：

```
>>> d = DemoConcrete(5)             # Succeeds by calling a concrete __init__()
Initializing with 5

>>> d = DemoConcrete.from_int(5)    # Succeeds by calling a concrete from_int()
Initializing with 10

>>> DemoABC()                       # Fails because from_int() is abstract    
Traceback (most recent call last):
  ...
TypeError: Can't instantiate abstract class DemoABC with abstract methods from_int

>>> DemoABC.from_int(5)             # Fails because from_int() is not implemented
Traceback (most recent call last):
  ...
TypeError: Can't instantiate abstract class DemoABC with abstract methods from_int 
```

请注意，最后一个示例失败，因为`cls()`不会实例化。 *ABCMeta*防止未定义所有必需抽象方法的类的过早实例化。

*当调用 from_int()*抽象类方法时触发失败的另一种方法是让它引发异常：

```
class DemoABC:

    __metaclass__ = ABCMeta

    @abstractclassmethod
    def from_int(cls, n):
        raise NotImplementedError 
```

设计*ABCMeta*不努力防止在未实例化的类上调用任何抽象方法，因此您可以通过调用`cls()`类方法通常执行的操作或通过引发*NotImplementedError*来触发失败。无论哪种方式，你都会得到一个很好的、干净的失败。

编写一个描述符来拦截对抽象类方法的直接调用可能很诱人，但这与*ABCMeta*的整体设计不一致（这完全是在实例化之前检查所需的方法，而不是在调用方法时） .

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-06-04T18:50:04.910

另一种可能的解决方法：

```
class A:
    __metaclass__ = abc.ABCMeta

    @abc.abstractmethod
    def some_classmethod(cls):
        """IMPORTANT: this is class method, override it with @classmethod!"""
        pass

class B(A):
    @classmethod
    def some_classmethod(cls):
        print cls 
```

现在，在实现“some_classmethod”之前，仍然无法从 A 实例化，如果您使用类方法实现它，它就可以工作。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-02-12T03:39:43.070

您可以升级到**Python 3**。

从**Python 3.3**开始，[可以组合](https://docs.python.org/3/library/abc.html#abc.abstractmethod) `@classmethod`和`@abstractmethod`：

```
import abc
class Foo(abc.ABC):
    @classmethod
    @abc.abstractmethod
    def my_abstract_classmethod(...):
        pass 
```

感谢@gerrit 向我指出这一点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-30T06:17:29.903

我最近遇到了同样的问题。也就是说，我需要抽象类方法，但由于其他项目限制而无法使用 Python 3。我想出的解决方案如下。

abcExtend.py：

```
import abc

class instancemethodwrapper(object):
    def __init__(self, callable):
        self.callable = callable
        self.__dontcall__ = False

    def __getattr__(self, key):
        return getattr(self.callable, key)

    def __call__(self, *args, **kwargs):
        if self.__dontcall__:
            raise TypeError('Attempted to call abstract method.')
        return self.callable(*args,**kwargs)

class newclassmethod(classmethod):
    def __init__(self, func):
        super(newclassmethod, self).__init__(func)
        isabstractmethod = getattr(func,'__isabstractmethod__',False)
        if isabstractmethod:
            self.__isabstractmethod__ = isabstractmethod

    def __get__(self, instance, owner):
        result = instancemethodwrapper(super(newclassmethod, self).__get__(instance, owner))
        isabstractmethod = getattr(self,'__isabstractmethod__',False)
        if isabstractmethod:
            result.__isabstractmethod__ = isabstractmethod
            abstractmethods = getattr(owner,'__abstractmethods__',None)
            if abstractmethods and result.__name__ in abstractmethods:
                result.__dontcall__ = True
        return result

class abstractclassmethod(newclassmethod):
    def __init__(self, func):
        func = abc.abstractmethod(func)
        super(abstractclassmethod,self).__init__(func) 
```

用法：

```
from abcExtend import abstractclassmethod

class A(object):
    __metaclass__ = abc.ABCMeta    
    @abstractclassmethod
    def foo(cls):
        return 6

class B(A):
    pass

class C(B):
    @classmethod
    def foo(cls):
        return super(C,cls).foo() + 1

try:
    a = A()
except TypeError:
    print 'Instantiating A raises a TypeError.'

try:
    A.foo()
except TypeError:
    print 'Calling A.foo raises a TypeError.'

try:
    b = B()
except TypeError:
    print 'Instantiating B also raises a TypeError because foo was not overridden.'

try:
    B.foo()
except TypeError:
    print 'As does calling B.foo.'

#But C can be instantiated because C overrides foo
c = C()

#And C.foo can be called
print C.foo() 
```

这里有一些 pyunit 测试，它们提供了更详尽的演示。

testAbcExtend.py：

```
import unittest
import abc
oldclassmethod = classmethod
from abcExtend import newclassmethod as classmethod, abstractclassmethod

class Test(unittest.TestCase):
    def setUp(self):
        pass

    def tearDown(self):
        pass

    def testClassmethod(self):
        class A(object):
            __metaclass__ = abc.ABCMeta            
            @classmethod
            @abc.abstractmethod
            def foo(cls):
                return 6

        class B(A):
            @classmethod
            def bar(cls):
                return 5

        class C(B):
            @classmethod
            def foo(cls):
                return super(C,cls).foo() + 1

        self.assertRaises(TypeError,A.foo)
        self.assertRaises(TypeError,A)
        self.assertRaises(TypeError,B)
        self.assertRaises(TypeError,B.foo)
        self.assertEqual(B.bar(),5)
        self.assertEqual(C.bar(),5)
        self.assertEqual(C.foo(),7)

    def testAbstractclassmethod(self):
        class A(object):
            __metaclass__ = abc.ABCMeta    
            @abstractclassmethod
            def foo(cls):
                return 6

        class B(A):
            pass

        class C(B):
            @oldclassmethod
            def foo(cls):
                return super(C,cls).foo() + 1

        self.assertRaises(TypeError,A.foo)
        self.assertRaises(TypeError,A)
        self.assertRaises(TypeError,B)
        self.assertRaises(TypeError,B.foo)
        self.assertEqual(C.foo(),7)
        c = C()
        self.assertEqual(c.foo(),7)

if __name__ == "__main__":
    #import sys;sys.argv = ['', 'Test.testName']
    unittest.main() 
```

我还没有评估这个解决方案的性能成本，但到目前为止它已经达到了我的目的。

# javascript - 匹配字段的函数

> ID：11217880
> 
> 赞同：1
> 
> 时间：2012-06-27T00:44:01.827
> 
> 标签：javascript, jquery

我试图返回一个值（ID），匹配数组中的另一个字段（类型）。

对象数组：

```
a: Array[3]
0: Object
1: Object
Desc: "Desc"
ID: "V000002"
Type: "SK"
__proto__: Object
2: Object
length: 3 
```

查找方法：

```
ns.find = function (a) {
        $.each( a, function (k, v) {
                if (v.Type == 'SK') {
                    return v.ID
                }
            }
        );
        return "";
    }  ; 
```

即使有比赛，它也不起作用。怎么了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T00:51:43.103

```
ns.find = function (a) {
    var val = '';
    $.each( a, function (k, v) {
        if (v.Type == 'SK') {
            val = v.ID;
            return false;
        }
    );
    return val;
}; 
```

里面的`return`语句`jQuery.each`不会脱离你的`ns.find`方法，只是当前的循环迭代。要想突围`jQuery.each`，就需要回归`false`；

# .net - TinyIoC：在单个实例上注册多个接口

> ID：11217884
> 
> 赞同：9
> 
> 时间：2012-06-27T00:44:42.307
> 
> 标签：.net, inversion-of-control, tinyioc

Autofac 允许使用 .AsImplementedInterfaces() 或链式 .As<>() 调用与 .SingleInstance() 一起非常轻松地将多个接口解析为同一个实例。这也可以用 TinyIoC 完成吗？我只找到了如何注册同一接口的多个实现，但没有办法链接注册等。

据我了解，这对于 IoC 容器来说是一个非常重要的特性，不是吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T09:39:31.850

如果我理解正确，你有类似的东西

```
public class MyThing : IFoo, IBar
{
} 
```

并且您希望以下内容彼此返回相同的实例：

```
Resolve<IFoo>();
Resolve<IBar>(); 
```

如果是这样，这是可能的，但它有点难看：

```
container.Register<IFoo, MyThing>();
container.Register<IBar>((c,p) => c.Resolve<IFoo>() as IBar); 
```

如果您愿意，您可能可以将其包装成更好的语法，但工厂委托实际上就是在幕后发生的事情。

# windows - 为什么使用 Win32::Console 在 Perl 中输入密码需要按两次 Enter？

> ID：11217888
> 
> 赞同：2
> 
> 时间：2012-06-27T00:45:06.197
> 
> 标签：windows, perl, windows-console

我对 Perl 相当陌生，并且很难掌握以下密码输入代码片段的行为：

```
use Win32::Console;

my $StdIn = new Win32::Console(STD_INPUT_HANDLE);
my $Password = "";

$StdIn->Mode(ENABLE_PROCESSED_INPUT());
local $| = 1;

print "Enter Password: ";
while (my $Data = $StdIn->InputChar(1)) {
    if ("\r" eq $Data ) {
        last;
    } 
    elsif ("\ch" eq $Data ) {
        if ( "" ne chop( $Password )) {
            print "\ch \ch";
        }
        next;
    }
    $Password .=$Data;
    print "*";
}

while (my $Data = $StdIn->InputChar(1)) {
    print "\nShow password? [y/n] ";
    if ("n" eq $Data) {
        last;
    }
    elsif ("y" eq $Data) {
        print "\nPassword: $Password\n";
        last;
    }
} 
```

基本上发生的情况是脚本提示用户输入密码并按`*`预期显示每个字符输入，但需要`Enter`按两次才能接受输入。但是，如果我删除第二个 while 循环（或用`print $password`语句替换），输入只需要按一次`Enter`.

我还注意到，在第二个 while 循环中，提示用户输入`y`或`n`（无需按`Enter`）如果用户输入“y”，则`Show password? [y/n]`在显示密码之前重复该行。

对此行为的一些见解将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T02:36:11.233

第一个`Enter`让你脱离第一个`while`循环。然后第二个`while`循环在显示提示之前等待另一个字符。您应该在询问另一个字符之前显示提示（并且只显示一次）。

将事物分解为子例程有助于构建基本块。

```
use strict; use warnings;
use Win32::Console;

run();

sub run {
    my $StdIn = Win32::Console->new(STD_INPUT_HANDLE);
    $StdIn->Mode(ENABLE_PROCESSED_INPUT);

    my $Password = prompt_password($StdIn, "Enter Password: ", '*');

    if ( prompt_echo($StdIn, "\nShow password? [y/n] ") ) {
        print "\nPassword = $Password\n"
    }

    return;
}

sub prompt_password {
    my ($handle, $prompt, $mask) = @_;
    my ($Password);

    local $| = 1;
    print $prompt;

    $handle->Flush;

    while (my $Data = $handle->InputChar(1)) {
        last if "\r" eq $Data;

        if ("\ch" eq $Data ) {
            if ( "" ne chop( $Password )) {
                print "\ch \ch";
            }
            next;
        }

        $Password .= $Data;
        print $mask;
    }

    return $Password;
}

sub prompt_echo {
    my ($handle, $prompt) = @_;

    local $| = 1;
    print $prompt;
    $handle->Flush;

    while (my $Data = $handle->InputChar(1)) {
        return if "n" eq $Data;
        return 1 if "y" eq $Data;
    }

    return;
} 
```

# ios - iOS - 如何使文本字段高于 1 行？

> ID：11217891
> 
> 赞同：0
> 
> 时间：2012-06-27T00:45:27.193
> 
> 标签：ios, uitextfield

我正在制作我的第一个文本字段，并且我正在寻找更多该人可以填写的文本区域。Xcode 为我禁用了将其扩展到多行的能力。是否可以？如果是这样，我该怎么做？

谢谢！![在此处输入图像描述](../Images/6bac23f924b943c56e012200bc575ed0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T00:57:56.450

您需要一个`UITextView`，这是一个可编辑的字段，可以容纳多行文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T00:58:35.493

多行`UITextField`由 实现[`UITextView`](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextView_Class/Reference/UITextView.html)并确保其`editable`属性设置为`YES`。

> 该类`UITextView`实现了可滚动的多行文本区域的行为。

# actionscript-3 - Flex / AS3：如何在 ActionScript 中设置 spark Rect 的属性？

> ID：11217892
> 
> 赞同：1
> 
> 时间：2012-06-27T00:45:30.467
> 
> 标签：actionscript-3, apache-flex

我有一个 Flex 应用程序，在其中我使用以下方法绘制一个矩形：

```
<s:Rect height="20" width="115" top="1" id="myRect">
    <s:stroke>
        <s:SolidColorStroke color="#FF0000" weight="2" alpha="0"/>
    </s:stroke>
</s:Rect> 
```

我想动态设置`alpha`for的值`myRect`。是否可以`alpha`使用 Actionscript 进行设置？如果是这样，如何访问该`alpha`属性？

我认为这样的事情会起作用，但我收到错误`Access of undefined property SolidColorStroke`：

```
searchRect.stroke.SolidColorStroke.alpha=1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T00:55:00.530

给出`s:SolidColorStroke`一个 id，如下所示：

```
<s:SolidColorStroke id="stroke" 
```

然后你可以设置 alpha 如：

```
 stroke.alpha = 0.5; 
```

此示例基于滑块更新 alpha：

![滑块](../Images/b79470217346f859ced7073711878dbe.png)

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:mx="library://ns.adobe.com/flex/mx">

    <s:layout>
        <s:VerticalLayout />
    </s:layout>

    <s:Rect height="20"
            width="115"
            top="1"
            id="myRect">
        <s:stroke>
            <s:SolidColorStroke id="stroke"
                                color="#FF0000"
                                weight="2"
                                alpha="0" />
        </s:stroke>
    </s:Rect>

    <s:HSlider id="slider"
               valueCommit="{stroke.alpha = slider.value}"
               value="0.5"
               minimum="0"
               maximum="1"
               stepSize="0.1"
               snapInterval="0.1" />

</s:Application> 
```

# pyqt4 - 创建自定义插槽和信号旧样式

> ID：11217895
> 
> 赞同：0
> 
> 时间：2012-06-27T00:45:39.477
> 
> 标签：pyqt4

我正在尝试创建自己的自定义信号，但无论出于何种原因，它都没有进入函数。有什么想法我哪里出错了吗？

```
def __init__(self):
    ...
    self.connect( self, QtCore.SIGNAL( 'dagEvent(type, *args)' ), self.OnDagEvent)

def someFunc(self, ...):
    ...
    self.emit(QtCore.SIGNAL('dagEvent()'), type, *args)

def OnDagEvent( self, eventType, eventData ):
    print 'Test' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T17:50:43.013

问题在于您为自定义信号创建签名的方式。有几种方法可以让你做到这一点，但你现在拥有它的方式不是其中之一。

定义连接时，您的操作方式应该会导致引发错误：

```
# not a valid type of signature
QtCore.SIGNAL( 'dagEvent(type, *args)' ) 
```

即使允许创建它，当您稍后发出时，您也不会引用相同的签名：

```
# if it were even allowed, would have to be: dagEvent(type, *args)
self.emit(QtCore.SIGNAL('dagEvent()'), type, *args) 
```

* * *

### [旧式信号和插槽支持](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/old_style_signals_slots.html)

从 PyQt 创建自定义信号的最简单方法是仅使用可调用名称：

```
self.connect(self, QtCore.SIGNAL('dagEvent'), self.OnDagEvent)
...
# "type" is a builtin. I renamed it to type_
self.emit(QtCore.SIGNAL('dagEvent'), type_, *args) 
```

这种方法不关心你决定传递什么参数。你可以通过任何你想要的东西。

如果要专门控制签名，可以定义内置类型：

```
self.connect(self, QtCore.SIGNAL('dagEvent(int,str,int)'), self.OnDagEvent)
...
self.emit(QtCore.SIGNAL('dagEvent(int,str,int)'), i1, s2, i3) 
```

如果你没有在发射中使用正确的签名，它将不会被调用，并且发射时传递错误的类型会引发错误。

现在，如果您想在某种程度上定义一个签名，但不将其限制为任何基本类型，并允许任何 python 对象，您可以这样做：

```
self.connect(self, QtCore.SIGNAL('dagEvent(PyQt_PyObject)'), self.OnDagEvent)
...
self.emit(QtCore.SIGNAL('dagEvent(PyQt_PyObject)'), foo) 
```

这将允许传递任何单个 python 对象，但特别说明它需要 1 个参数。

# javascript - 如何将返回的对象变成字符串？

> ID：11217898
> 
> 赞同：0
> 
> 时间：2012-06-27T00:46:00.760
> 
> 标签：javascript, jquery

我正在使用一个输入，该输入接受用户输入的数字，并在触发模糊事件时将其转换为美元金额。

我遇到的问题是浏览器似乎保持以前提交的值完好无损，并带有美元符号。因此，如果用户从下拉列表中选择先前输入的值“$25000”，当模糊事件再次触发时，它会添加“$”，所以我得到“$$25000”

为了阻止这种情况，我对字符串值进行了调整，如果它在模糊中包含 2 个“$”：

HTML：

```
<input type="text" value="$5,000" id="dollar-amount-goal" /> 
```

Javascript：

```
var valueOnBlur = $('#dollar-amount-goal').val();

if(valueOnBlur.charAt(1) === '$'){
    valueOnBlur = $('#dollar-amount-goal').val(valueOnBlur.substr(1));
}

console.log(typeof( valueOnBlur )); 
```

运行字符串检查时，上述 typeof 语句的结果是 'object'。在它以“字符串”形式出现后的任何时间（这就是我想要的）。

我的问题：如何让`"valueOnBlur = $('#dollar-amount-goal').val(valueOnBlur.substr(1));"`语句在运行时返回一个字符串？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T00:47:54.890

尝试改变这个：

```
valueOnBlur = $('#dollar-amount-goal').val(valueOnBlur.substr(1)); 
```

对此：

```
valueOnBlur = $('#dollar-amount-goal').val(valueOnBlur.substr(1)).val(); 
```

您想要返回的值`$('#dollar-amount-goal')`而不是 jQuery 对象`$('#dollar-amount-goal')`

# asp.net - Asp.Net aspparse 循环引用错误仅在命令行构建

> ID：11217900
> 
> 赞同：3
> 
> 时间：2012-06-27T00:46:11.770
> 
> 标签：asp.net, visual-studio-2010, cruisecontrol.net, msbuild-4.0

我有一个 Asp.Net 网站项目，该项目使用 VS2010 在本地构建良好，并从命令行使用`msbuild`. 问题是它在我们的构建服务器（CruiseControl.net）上失败了这个循环文件​​参考问题

```
 /tms/_master/help.master(1): error ASPPARSE: Circular file references are not allowed. [C:\ccnet\working\master\Tms.Rms.Website\tms.metaproj]
  /tms/_master/reporting-detail.master(2): error ASPPARSE: Circular file references are not allowed. [C:\ccnet\working\master\Tms.Rms.Website\tms.metaproj]
  /tms/_master/mvc.master(1): error ASPPARSE: Circular file references are not allowed. [C:\ccnet\working\master\Tms.Rms.Website\tms.metaproj] 
```

正如与此错误相关的其他问题中所建议的那样，我没有看到任何关于页面/文件夹/或控件的布局方式的明显内容，并且我在本地从 VS2010 获得的反馈为零，因为它根本没有问题。（它构建正常）

任何人都知道我如何在本地跟踪此问题，或者机器之间构建结果不同的原因可能是什么？

本地构建环境：vs2010，msbuild 4.0，自己构建构建服务器环境：msbuild 4.0，构建为ccnet服务帐户（未安装或可用vs2010）

我在本地也有相同版本的 ccnet 设置，并且成功构建了相同的配置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T15:55:56.747

值得注意的是，上述循环引用错误似乎发生在具有 MasterPageFile 属性的“嵌套”母版页上。例如

```
<%@ Master MasterPageFile="~/_master/base.master" CodeFile="help.master.cs" Inherits="_master_help" %> 
```

# linux - RabbitMQ Shovel 无法启动

> ID：11217902
> 
> 赞同：0
> 
> 时间：2012-06-27T00:46:38.927
> 
> 标签：linux, rabbitmq

我有一对运行带有rabbitmq消息队列的arch linux的计算机，我想使用铲子将消息从第一台计算机的队列移动到第二台计算机的队列。不幸的是，我似乎无法创建铲子，甚至无法验证我的 rabbitmq.config 文件是否正在被读取。

计算机 1 的 IP 地址为 192.168.6.66

/etc/rabbitmq/rabbitmq-env.conf

```
NODENAME=bunny
NODE_IP_ADDRESS=192.168.6.66
NODE_PORT=5672

LOG_BASE=/var/log/rabbitmq
MNESIA_BASE=/var/lib/rabbitmq/mnesia
RABBITMQ_PLUGINS_DIR=/usr/lib/rabbitmq/lib/rabbitmq_server-2.7.1/plugins 
```

/etc/rabbitmq/rabbitmq.conf

```
[   {mnesia, [{dump_log_write_threshold, 100}]},
    {bunny, [{vm_memory_high_watermark, 0.3}]},
    {rabbitmq_shovel,
        [{shovels,
            [{test_shovel,
                [{sources, [{broker, "amqp://shoveluser:shoveluser@192.168.6.64:5672/"}]},
                 {destinations, [{broker, ""}]},
                 {queue, <<"observation2">>}
                ]
            }]

        }]
    }
]. 
```

计算机 2 的 IP 地址为 192.168.6.64

/etc/rabbitmq/rabbitmq-env.conf

```
NODENAME=bunny
NODE_IP_ADDRESS=0.0.0.0
NODE_PORT=5672

LOG_BASE=/var/log/rabbitmq
MNESIA_BASE=/var/lib/rabbitmq/mnesia
RABBITMQ_PLUGINS_DIR=/usr/lib/rabbitmq/lib/rabbitmq_server-2.7.1/plugins 
```

当我在计算机 1 上重新启动 rabbitmq-server 时，这是输出：

```
[root@test_toshiba ~]# /etc/rc.d/rabbitmq-server restart
:: Stopping rabbitmq-server daemon                                                                                                                            [BUSY] Stopping and halting node bunny@localhost ...
...done.
                                                                                                                                                              [DONE]
:: Starting rabbitmq-server daemon                                                                                                                            [BUSY] Activating RabbitMQ plugins ...

********************************************************************************
********************************************************************************

9 plugins activated:
* amqp_client-2.7.1
* erlando-2.7.1
* mochiweb-1.3-rmq2.7.1-git
* rabbitmq_management-2.7.1
* rabbitmq_management_agent-2.7.1
* rabbitmq_mochiweb-2.7.1
* rabbitmq_shovel-2.7.1
* rabbitmq_shovel_management-2.7.1
* webmachine-1.7.0-rmq2.7.1-hg 
```

我希望看到这个“配置文件：/etc/rabbitmq/rabbitmq.config”给出配置文件文档的描述[here](http://www.rabbitmq.com/configure.html)

在 rabbitmq-server 启动后，我运行这个命令并没有看到铲子：

```
[root@test_toshiba ~]# rabbitmqctl eval 'rabbit_shovel_status:status().'
[]
...done. 
```

这是rabbitmq状态

```
[root@test_toshiba ~]# rabbitmqctl status
Status of node bunny@localhost ...
[{pid,14225},
 {running_applications,
     [{rabbitmq_shovel,"Data Shovel for RabbitMQ","2.7.1"},
      {erlando,"Syntax extensions for Erlang","2.7.1"},
      {rabbitmq_shovel_management,"Shovel Status","2.7.1"},
      {rabbitmq_management,"RabbitMQ Management Console","2.7.1"},
      {rabbitmq_management_agent,"RabbitMQ Management Agent","2.7.1"},
      {amqp_client,"RabbitMQ AMQP Client","2.7.1"},
      {rabbit,"RabbitMQ","2.7.1"},
      {os_mon,"CPO  CXC 138 46","2.2.9"},
      {sasl,"SASL  CXC 138 11","2.2.1"},
      {rabbitmq_mochiweb,"RabbitMQ Mochiweb Embedding","2.7.1"},
      {webmachine,"webmachine","1.7.0-rmq2.7.1-hg"},
      {mochiweb,"MochiMedia Web Server","1.3-rmq2.7.1-git"},
      {inets,"INETS  CXC 138 49","5.9"},
      {mnesia,"MNESIA  CXC 138 12","4.7"},
      {stdlib,"ERTS  CXC 138 10","1.18.1"},
      {kernel,"ERTS  CXC 138 10","2.15.1"}]},
 {os,{unix,linux}},
 {erlang_version,
     "Erlang R15B01 (erts-5.9.1) [source] [smp:4:4] [async-threads:30] [hipe] [kernel-poll:true]\n"},
 {memory,
     [{total,18530752},
      {processes,6813815},
      {processes_used,6813800},
      {system,11716937},
      {atom,428361},
      {atom_used,414658},
      {binary,182176},
      {code,8197217},
      {ets,911776}]},
 {vm_memory_high_watermark,0.39999999942574066},
 {vm_memory_limit,417929625}]
...done. 
```

/var/log/rabbitmq 的日志中没有任何错误消息。

如何验证我的配置文件是否正在使用，为什么我的铲子无法启动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T11:09:00.303

您需要定义铲子的目的地。

```
    [ {mnesia, [{dump_log_write_threshold, 100}]},
        {兔子，[{vm_memory_high_watermark，0.3}]}，
        {rabbitmq_shovel，
            [{铲子，
                [{test_shovel，
                    [{来源，[{经纪人，“amqp://shoveluser:shoveluser@192.168.6.64:5672/”}]}，
                     {目的地，[{经纪人，“amqp://shoveluser:shoveluser@192.168.6.66:5672/”}]}，
                     {队列，>}
                    ]
                }]

            }]
        }
    ]。

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T23:22:35.823

我认为“”不足以指定本地主机代理（在“目的地”中）术语。我相信“amqp://”是必需的。

因此，您的目的地术语应为：

{目的地，[{经纪人，“amqp://”}]}

指定本地代理的用户名和主机名（另一个答案）也可能有效，但我认为没有必要。

# linq-to-sql - linq-sql 连接两个表

> ID：11217903
> 
> 赞同：0
> 
> 时间：2012-06-27T00:47:02.007
> 
> 标签：linq-to-sql, join, lambda

我正在尝试根据两个表（模型和制造商）中存在的两个值来连接我的数据库中的两个表，由于各种原因，这些值在数据库中没有 fk 关系。

到目前为止，我有以下内容：

```
var modelManufacturer = DataContext.Assets_ND.Select(a => new {a.ModelNo, a.Manufacturer}).Distinct();

var masterPMs = DataContext.MasterPlannedMaintenances.Where(pm => pm.PlantId == model.PlantId);

var joined = modelManufacturer.Join(masterPMs.AsEnumerable(), a => new {a.ModelNo, a.Manufacturer},pm => new {pm.Model, pm.Manufacturer}, x => new {x.ModelNo, x.Manufacturer, x.Id}); 
```

这不会编译并且有错误

> 错误 7 方法 'System.Linq.Queryable.Join(System.Linq.IQueryable, System.Collections.Generic.IEnumerable, System.Linq.Expressions.Expression>, System.Linq.Expressions.Expression>, System. Linq.Expressions.Expression>)' 不能从用法中推断出来。尝试明确指定类型参数。

这就是我对如何指定值有点困惑的地方，我尝试了一些组合， `modelManufacturer.Join<Asset, MasterPlannedMaintenance....>`但智能感知似乎表明这是不对的，或者至少我放入它们的顺序不正确。

我做错了什么，或者基于两个字符串字段连接这两个表并从左表（型号，制造商）返回 2 个值，从右表（id）返回一个值的更好方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:40:59.660

```
var joined = (from a in dc.table1
              join b in dc.table2 on a.id equals b.id into temp
              from t in temp.DefaultIfEmpty()
              select new {
                  a.Model,
                  a.Manufacturer,
                  t.ID
               }); 
```

这将对两个表进行左连接，并且只从表 1 中选择两个值，从表 2 中选择 1。

# javascript - 如何使用 dojo 优雅地构建请求/回调链？

> ID：11217904
> 
> 赞同：0
> 
> 时间：2012-06-27T00:47:12.920
> 
> 标签：javascript, ajax, dojo, deferred

我已经使用过很多dojo，但并没有完全理解`dojo.Deferred`（或者至少我没有使用所有可用的功能）。我一直在阅读它，并想知道以下场景是否适合使用 Deferred 作为更优雅的方法？或者，如果不是 Deferred，`Promise`dojo 中是否有其他类型的链接技术可以以更具可读性/顺序性的方式实现以下目标？

```
var _this = this;

var secondCallback =  function( res ) {
    console.debug('All is complete Result [' + res +']');
};

var firstCallback = function( res ) {
    if(res == 'true') 
        my.lib.processRPC( my.rpc.module.DoSecondStep( _this.user_id ), secondCallback );
};

my.lib.processRPC( my.rpc.module.CheckFirstStep(), firstCallback ); 
```

如果是这样，这看起来如何？Deferred 在这里如何使用？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T10:22:18.907

我用简单的 window.setTimeout 模拟了您的 RPC 模块，以模拟网络延迟后的异步回调，并将 _this.user_id 替换为 _this_user_id，并可能进行其他调整。

可运行示例：[http ://dojo-sandbox.net/public/4c296/0](http://dojo-sandbox.net/public/4c296/0)

```
/* In resopnse to http://stackoverflow.com/questions/11217904/how-to-elegantly-structure-a-chain-of-requests-callbacks-using-dojo */
require([
  "dojo/_base/Deferred"
], function(Deferred) {

  var my_lib = function() {};
  my_lib.processRPC = function(value, def) {
    // simulate a long lived network call or whatever
    window.setTimeout(function() {
      console.log("rpc  has fired");
      def.resolve(value);
    }, 1000);
  }

  var my_rpc_module = function() {};
  my_rpc_module.CheckFirstStep = function() {
    console.log("CheckFirstStep here.");
    return 'true';
  }
  my_rpc_module.DoSecondStep = function(userid) {
    console.log("CheckSecondStep here for userid " +userid + ".");
    return 'finished';
  }

  var _this_user_id = "Mr Blobby";

  var secondCallback = new Deferred();

  secondCallback.then(function(res) {
    console.debug('All is complete Result [' + res +']');
  });

  var firstCallback = new Deferred();
  firstCallback.then(function( res ) {
    if(res == 'true') {
        my_lib.processRPC( my_rpc_module.DoSecondStep( _this_user_id ), secondCallback );
    }
  });

  my_lib.processRPC( my_rpc_module.CheckFirstStep(), firstCallback );

}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:45:13.817

`my.lib.processRPC`需要返回一个[Promise](http://dojotoolkit.org/documentation/tutorials/1.6/promises/)进行处理。[“Deferred”](http://dojotoolkit.org/documentation/tutorials/1.6/deferreds/)是拒绝/履行承诺的接口，您可能不想导出这些方法 - 您只从私有范围的 Deferred 返回一个 Promise，可以在其上安装回调。

我不是 Dojo 专家，您可能需要将以下代码调整为确切的语法。一个接近你的场景的实现——我希望`my.rpc.module.DoSecondStep( _this.user_id )`只有一个函数来创建选项对象——看起来像这样：

```
my.lib.processRPC = function(options)
    var d = new Deferred();
    // ...
    return d.getPromise();
    // do some heavy and/or asynchronous processing and call
    d.resolve(result) // somewhen in the future
};

// narrative code:
my.lib.processRPC( my.rpc.module.getFirstStep() ).then(function(result) {
    if (result)
        return my.lib.processRPC( my.rpc.module.getSecondStep( _this.user_id ) )
          .then( function( res ) {
            console.debug('All is complete Result [' + res +']');
          });
     else
        return /* false */ result;
}).addCallback(console.log.bind(console, "everything finished")); 
```

但我建议该`doStepX`功能确实应该自己进行处理。所以他们应该返回 Deferreds/Promises（最终通过`processRPC`内部调用），并在不成功时拒绝它们。Deferred 将“冒泡”此类错误。

```
my.rpc.module.doFirstStep = function() {
    var d = new Deferred();
    // ...
    return d.getPromise();
    // do some heavy and/or asynchronous processing and call
    d.resolve(result) // or
    d.reject(error) // somewhen in the future
};
my.rpc.module.doSecondStep = function(id) {
    // returning a Promise, as above
};

// really narrative code:
my.rpc.module.doFirstStep()
  .then(my.rpc.module.doSecondStep)
  .addCallbacks(function( res ) {
    console.log('All is complete Result [' + res +']');
  }, function (err) {
    console.log('Something happened: [' + err +']');
  }); 
```

请注意，`doSecondStep`接收第一个 deferred 作为参数的（成功）结果。如果您不希望这样或需要在不调用的情况下指定其他参数，则需要使用类似[`.bind()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)或包装函数的东西：

```
...then(function firstCallback() {
    return my.rpc.module.DoSecondStep( _this.user_id );
})... 
```

# jquery - 关于 jquery 自定义队列的出队的困惑

> ID：11217906
> 
> 赞同：0
> 
> 时间：2012-06-27T00:47:29.550
> 
> 标签：jquery, queue

首先我有一个工厂函数来改变背景颜色，该函数正在推送一个自定义队列：

```
var changeBack = function (delay, color) {
    $('div').queue('custom', function (next) {
        setTimeout(function () {
            $('div').css({
                'background-color': color
            })
        }, delay)   
    })    
} 
```

然后我想多次更改背景颜色，然后`dequeue`是队列：

```
$(function () {
    changeBack(1000, "yellow");
    changeBack(1000, "black");
    changeBack(1000, "blue");
    changeBack(1000, "gray");
    var custom = $('div').queue('custom');
    $('div').dequeue('custom');
}) 
```

但是`div`只是变成黄色背景色，这意味着只执行第一个功能？但是我已经将另一个功能推入队列，我该如何执行另一个功能？这是[演示](http://jsfiddle.net/hh54188/uVjQ4/5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:40:23.983

延迟的正确方法不是`setTimeout`，而是[**`$.fn.delay`**](http://api.jquery.com/delay/)：http: [//jsfiddle.net/uVjQ4/8/](http://jsfiddle.net/uVjQ4/8/)

```
var changeBack = function (delay, color) {
    var $div = $('div'); //<-- Cached selector, so that the selected element(s) 
                         // are same throughout the whole function.
    $div.delay(delay, 'custom').queue('custom', function (next) {
        ....
        next(); // Trigger next
    });
};

....
// Initialize 
    $('div').dequeue('custom'); 
```

# svn - 为什么 subversion 不将某些文件夹添加到版本控制中？

> ID：11217908
> 
> 赞同：0
> 
> 时间：2012-06-27T00:47:39.847
> 
> 标签：svn, version-control

我正在与我办公室的其他人共享一个颠覆性回购。今天我检查了 repo，添加了一个以前从未受过版本控制的文件夹（一个 Drupal 安装，如果你必须知道的话），然后键入`svn add [foldername]`. 这似乎具有添加所有文件夹的效果，一直递归到其中的大多数。在手动添加了第一次没有自动添加的内容后，我发现没有添加两个看似随机的文件夹，但认为它们是，有点？

```
Ensign-Ro:sites bbinkovitz$ svn add default/
svn: warning: 'default' is already under version control

Ensign-Ro:sites bbinkovitz$ svn add default/*
svn: 'default' is not a working copy 
```

该文件夹中似乎没有，也没有 .svn/ 目录。

我该怎么办？是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:29:18.200

只需尝试不带斜杠的命令，

```
"svn add default" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:53:57.993

我最终解决了这个问题，将默认值移至默认值 1，添加默认值 1，签入，然后`svn mv default1 default`再次执行并签入。

# sockets - trigger.io 可以打开 TCP 套接字吗？

> ID：11217912
> 
> 赞同：2
> 
> 时间：2012-06-27T00:48:02.790
> 
> 标签：sockets, tcp, trigger.io

有没有一种简单的方法可以打开 TCP 套接字来连接 TCP 服务器？我应该使用 socketjs、jsocket 还是其他东西？

我尝试开发一个跨平台应用程序来连接到 TCP 服务器并从中提取数据。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T00:05:32.490

不，我们目前没有相应的 API。但是你可以在 iOS 上使用 WebSockets，以及像 socket.io 这样的库，它们可以在 Android 上使用长轮询。

如果您通过 support@trigger.io 给我们发送电子邮件，我们可以就您的具体要求提供建议，看看提供原生 API 是否有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T22:31:47.720

我是[trigger.io-tcp](https://github.com/vintasoftware/trigger.io-tcp)的作者，这是一个仅限 android 的 trigger.io 本机模块，允许您打开 TCP 套接字以发送/接收数据。

如果您只需要用于 Android 的套接字或将其分叉并编写 iOS 部分，则可以使用它。

# java - java覆盖不起作用

> ID：11217915
> 
> 赞同：1
> 
> 时间：2012-06-27T00:48:45.943
> 
> 标签：java

我是 Java 的初学者，我使用过 PHP、C++ 和 Lua，从来没有遇到过这个问题，我做了两个类只是为了锻炼`Facto`，`MyFacto`第一个确实找到了一个阶乘，第二个应该找到阶乘，而不是通过添加，而是通过倍增。不要因为愚蠢和毫无意义的代码而责备我，我只是在测试并试图掌握 Java 的窍门。

主要的：

```
public class HelloWorld {
public static void main(String[] args) {

    Facto fc = new Facto(5);
    fc.calc();
    System.out.println(fc.get());   

    MyFacto mfc = new MyFacto(5);
    mfc.calc();
    System.out.println(mfc.get());

}
} 
```

事实.java：

```
public class Facto {
private int i;
private int res;

public Facto(int i) {
    this.i = i;
}

public void set(int i) {
    this.i = i;
}

public int get() {
    return this.res;
}

public void calc() {
    this.res = this.run(this.i);
}

private int run(int x) {
    int temp = 0;
    if(x>0) {
        temp = x + this.run(x-1);
    }
    return temp;
}
} 
```

MyFacto.java：

```
public class MyFacto extends Facto {
public MyFacto(int i) {
    super(i);
}

private int run(int x) {
    int temp = 0;
    if(x>0) {
        temp = x * this.run(x-1);
    }
    return temp;
}
} 
```

我认为结果应该是 15 和 120，但我得到 15 和 15。为什么会这样？它与`calc()`未被覆盖的方法有关吗？它使用了类中的`run()`方法`Facto`？我该如何解决这个问题或覆盖这样的事情的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T01:04:08.170

您遇到问题的原因是[成员访问可见性](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)。

简而言之：

*   `public`允许*任何*Java 类查看字段/函数，只要它可以访问。
*   `<package>`，或者没有明显的修饰符，允许任何 Java 对象（但不是子类）查看字段/函数，只要它们位于同一目录或包中。
*   `protected`允许声明的类和*所有其他子类*访问该字段/函数，以及同一目录/包中的任何类。
*   `private`**只**允许声明的类访问该字段/函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T01:11:01.910

为了扩展@Makoto 所说的内容，您遇到了一个问题，因为`calc()`of 的方法`Facto`无法访问 of 的`run()`方法`MyFacto`，所以它使用的是自己的`run()`方法。将它们都更改为`protected`而不是`private`应该可以解决问题。

此外，您可能应该学习使用`@Override`注释。将它放在您要覆盖的任何方法之上是一种很好的做法。这样，如果您拼写错误或参数不匹配，您将收到警告。此外，它使您和/或读者清楚。例如：

MyFacto.java#运行：

```
@Override
protected int run(int x) {
    int temp = 0;
    if(x>0) {
        temp = x * this.run(x-1);
    }
    return temp;
} 
```

祝 Java 好运！

# sql - 是否可以使用 SQL Case 语句来测试是否应使用 Join 语句？

> ID：11217916
> 
> 赞同：0
> 
> 时间：2012-06-27T00:48:46.603
> 
> 标签：sql, select, join, nested, case

我正在尝试使用java做的是：

*   访问数据库
*   从表“Target_stats”中读取记录
*   如果字段“threat_level”= 0，doAction1
*   如果字段“threat_level”> 0，则从另一个表“Attacker_stats”和 doAction2 中获取附加字段
*   读取下一条记录

现在我拥有了我需要的一切，但经过深思熟虑的 SQL 语句只允许我只通过数据库一次，如果这不起作用我怀疑我将需要使用两个单独的 SQL 语句并再次通过数据库. 我对 case 语句没有清楚的理解，所以我只提供使用 if 语句的伪代码。

```
SELECT A.1, A.2, A.3
   if(A.3 > 0){
      SELECT A.1, A.2, A.3, B.1, B.3 
      FROM A 
      JOIN B 
      ON A.1 = B.1
      }
FROM A 
```

任何人都可以了解我的情况吗？

编辑：谢谢你们的时间和精力。我理解你的两个评论，我相信我正朝着正确的方向前进，但是，我仍然遇到了一些麻烦。我以前不了解 SQLfiddle，所以我现在继续制作了一个示例数据库并试图证明我的目的。这是链接：[http](http://sqlfiddle.com/#!3/ea108/1) : //sqlfiddle.com/#!3/ea108/1 我在这里要做的是选择 target_stats.server_id, target_stats.target, target_stats.threat_level where interval_id=3 and if thethreat_level>0 I要检索attack_stats.attacker，attack_stats.sig_name 其中interval_id=3。再次感谢您的时间和精力，这对我非常有用

编辑：经过一番修修补补，我想通了。非常感谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T01:13:15.007

正如@Ocelot20 所说，SQL*不是*过程代码。它基于基于集合的操作，而不是每行操作。这样做的一个直接后果是`SELECT`您的伪示例中的 是错误的，因为它依赖于具有不同列列表的同一结果集中的行。

`NULL`也就是说，如果您可以容忍无法连接的值，您可以非常接近您的伪代码示例。

这是一个示例（无论如何对我而言）似乎与您的驾驶目标很接近：

```
select *
from A 
  left outer join B 
    on A.a = B.d and A.a > 2 
```

[你可以在这个 SQLFiddle](http://sqlfiddle.com/#!3/7d3db/3)中看到它的实际效果，它应该会告诉你期望什么样的输出。

请注意，这实际上是这样说的：

> 从 table 中获取所有记录，并从 table 中`A`获取任何记录，`B`其列与table 中的`d`列相同，前提是 value大于 2。`a``A``A.a`

（这是为了方便而选择的。在我相当人为的示例中，移动条件列不会影响输出，如[这里](http://sqlfiddle.com/#!3/7d3db/4)所示）。

# java - 使用 java 反射从 MainActivity 类访问私有属性 - 字段

> ID：11217917
> 
> 赞同：1
> 
> 时间：2012-06-27T00:48:57.970
> 
> 标签：java, android

我正在尝试使用反射来使用 MainActivity 类的私有属性，但我不知道我做错了什么。有人可以帮忙吗。这是我的代码：MainActivity 类，这是我从异常中得到的错误：java.lang.IllegalArgumentException: object is not an instance of the class

```
public class MainActivity extends Activity {
/** Called when the activity is first created. */

private  Controller scheduleFor = new Controller();
private TextView display ;
private TextView title ;
   OnClickListener monListener = new OnClickListener(){

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub      
        scheduleFor.handleRequest("monday");}};
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    display = (TextView)findViewById(R.id.scheduleView);
    title = (TextView)findViewById(R.id.day);

    ImageButton monButton = (ImageButton)findViewById(R.id.monbutton);
            monButton.setOnClickListener(monListener);
}

public void onStart(){
    super.onStart();
    display.setText("");
    title.setText("Get your schedule");
}
}

public class MonHandler implements Handler {

private static final String TAG = "Scheduler";

@Override
public void handleIt(Object... args){
    // TODO Auto-generated method stub

    try{                                                             
        Class<?> mainActivityClass =  Class.forName("freesoft.nex.ec.MainActivity");

        Field fDisplay = mainActivityClass.getDeclaredField("display");
        Field fTitle = mainActivityClass.getDeclaredField("title");

        fDisplay.setAccessible(true);
        fTitle.setAccessible(true);

        TextView dSchedule = (TextView) fDisplay.get(mainActivityClass);
        TextView dTitle    = (TextView)fTitle.get(mainActivityClass);

        String schedule =   
                " 07h00  Breakfast\n" +
                        " 08h00  Department Metting\n" +
                        " 09h00  Class CIT 310\n"   +       
                        " 10h015 Class CIT 356\n"   +       
                        " 11h30  Class CIT 499\n"   +       
                        " 12h45  Lunch\n"   +       
                        " 14h00  Labs\n"    +
                        " 17h00  Back home\n" +
                        " 21h00  F.H.E - ??\n";

        String sDay = "Monday";

        dSchedule.setText(schedule);
        dTitle.setText("Schedule for " + sDay); 

    }catch (ClassNotFoundException e) {
        e.printStackTrace();        
        Log.d(TAG, "-->" + e);
    }catch(NoSuchFieldException x){
        x.printStackTrace();
        Log.d(TAG, "-->" + x);
    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        Log.d(TAG, "--> " + e.getMessage());
        Log.d(TAG, "--> " + e.getCause());
        Log.d(TAG, "-->" + e.getLocalizedMessage());
    } catch (IllegalAccessException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        Log.d(TAG, "-->" + e);
    }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T01:16:00.717

问题似乎是您误解了类中[`.get(...)`](http://developer.android.com/reference/java/lang/reflect/Field.html#get%28java.lang.Object%29)方法的用法`Field`。

```
TextView dSchedule = (TextView) fDisplay.get(mainActivityClass);
TextView dTitle    = (TextView) fTitle.get(mainActivityClass); 
```

您正在传递对类的引用，而是应该根据文档和您看到的异常提供该类型的正在运行的实例/对象。所以，你真正想要的是传递一个`freesoft.nex.ec.MainActivity`. 现在，假设它实际上与`MainActivity`您的代码所在的类相同，您可能需要做的就是将上述语句更改为：

```
TextView dSchedule = (TextView) fDisplay.get(MainActivity.this);
TextView dTitle    = (TextView) fTitle.get(MainActivity.this); 
```

请注意，您不能只提供`this`，因为它将引用`MonHandler`内部类的实例。

# python - 循环复制列表并从原始列表中删除从复制列表中删除

> ID：11217922
> 
> 赞同：0
> 
> 时间：2012-06-27T00:49:39.407
> 
> 标签：python

搞砸的代码片段：

```
equ2 = ['+', '10', '+', '2', '-', '2', '+', '4']
flag4 = [ ]

for k in equ2[:]:
    if equ2[equ2.index(k)-1] == '+':
        del(equ2[equ2.index(k)])
        flag4.append('-' + k)
    elif equ2[equ2.index(k)-1] == '-':
        del(equ2[equ2.index(k)])
        flag4.append('+' + k)
print flag4 
```

*编辑：我搞砸了变量，对此感到抱歉：x

*Edit2：再次抱歉 D：jedwards，这是我得到的输出，我通过从复制的列表中删除得到了另一个输出

我得到的输出：

```
['-10', '-2', '--', '-2', '-4'] 
```

我想要的输出：

```
['-10', '-2', '+'2, '-4'] 
```

我发现当它到达'-'时，它会检查原始列表（现在修改为+ - 2 + 4），并看到'-'之前的项目是'+'，所以它附加了'- -'，然后再次检查原始列表（现在 + 2 + 4）并在 2 之前看到“+”，因此它附加了“-2”（在那之后自行修复）。它是否一直在检查原始列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T01:04:21.283

从列表中删除第一个元素后，您尝试修改的索引不同步。

有更好的成对循环方法，但我不清楚在一般情况下循环应该做什么

例如。

```
>>> flag4 = [dict(['+-','-+'])[i] + j for i,j in zip(*[iter(equ2)]*2)]
>>> print flag4
['-10', '-2', '+2', '-4'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T01:12:40.397

我真的不相信这是最好的方法，下面的作品

```
equ2 = ['+', '10', '+', '2', '-', '2', '+', '4']
flag4 = list()

chgsgn = dict([('+','-'), ('-','+')])

while len(equ2):
    sgn = equ2.pop(0)
    num = equ2.pop(0)

    flag4.append(chgsgn[sgn] + num)

print flag4 
```

哪个输出

```
['-10', '-2', '+2', '-4']

```

***编辑：***或者，使用列表推导而不修改`equ2`：

```
chgsgn = dict([('+','-'), ('-','+')])
flag4 = [chgsgn[sgn]+num for (sgn,num) in zip(*[iter(equ2)]*2)]
print flag4 
```

这也输出

```
['-10', '-2', '+2', '-4']

```

# backup - NSIS 不会备份所有文件

> ID：11217924
> 
> 赞同：1
> 
> 时间：2012-06-27T00:49:43.183
> 
> 标签：backup, nsis, move

NSIS 安装程序会创建一个相当大的文件夹结构。当安装程序启动时，它会检查注册表以查看是否安装了当前版本...

然后它会询问您是否要备份当前文件夹。

它大部分时间都可以工作，但有时在备份旧版本时，它不会复制整个目录，而只会复制图标。

```
!insertmacro un.MoveFolder "$INSTDIR" "${BACKUP_FOLDER}" "*.*" 
```

参考： http: [//nsis.sourceforge.net/MoveFileFolder](http://nsis.sourceforge.net/MoveFileFolder)

```
!insertmacro MoveFolder "$INSTDIR\[path\]source-folder[\]" "$INSTDIR\[path\]destination-folder[\]" "file-mask" 
```

之后，它移动到删除部分......

难道是没有时间去做吗？它在完成移动之前开始下一个过程？

还有什么可能导致它不复制整个文件夹？

在安装过程中，我看到

```
Create folder c:\backup_folder
Moving files: c:\current_folder\*.* to c:\backup_folder\
Delete file: c:\current_folder\file1......... 
```

最后，backup_folder 只有图标（不是所有文件）

编辑：解决方案 - 请在此处查看我的帖子[NSIS 移动文件夹困难](https://stackoverflow.com/questions/11937466/nsis-difficulty-moving-folders)- $INSTDIR 确实是一个特殊文件夹，因此我不得不将卸载程序移动到 $TEMP 文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T03:30:11.493

有什么理由不能使用内置`CopyFiles`命令吗？

要对此进行调试，我建议您在函数`DetailPrint`顶部附近添加一个。`.MoveFolder_Locate_moveFile`如果您看到所有文件名都过去了，那么问题出在该函数中的移动操作，如果没有，则问题出在`${Locate}`此代码使用的宏中。

另一种选择是使用[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)观察文件系统操作......

# java - Java 异常 - 第 n 次尝试返回“try”语句块

> ID：11217928
> 
> 赞同：1
> 
> 时间：2012-06-27T00:50:30.500
> 
> 标签：java, exception, exception-handling

我正在尝试进行可能由于服务器关闭而引发异常的调用。这就是我想要完成的：

```
Server server = serverQueue.poll();
try {
     if (server==null){return null}
     server.makeConnection();

} catch (Exception e) {
     // try another server
     server = serverQueue.poll();
     // now return to try block?

} 
```

所以我有 5 台服务器，也许在后期我会添加更多。所以我想以这种方式与他们中的任何人联系。我怎样才能返回到 try 块？java中有没有像下面这样的语句？：

```
Server server = serverQueue.poll();
outerBlock:
try {
     if (server==null){return null}
     server.makeConnection();

} catch (Exception e) {
     // try another server
     server = serverQueue.poll();
     continue outerBlock;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T01:02:07.200

基本上是一个循环：

```
Server server = serverQueue.poll();
boolean connected = false;
while (!connected) {
    if (server == null) {
        return null;
    }
    try {
         server.makeConnection();
         connected = true;
    } catch (Exception e) {
         // Presumably log something here, for management info

         // try another server
         server = serverQueue.poll();
    }
} 
```

或者为了避免重复：

```
Server server;
boolean connected = false;
while (!connected) {
    server = serverQueue.poll();
    if (server == null) {
        return null;
    }
    try {
         server.makeConnection();
         connected = true;
    } catch (Exception e) {
         // Presumably log something here, for management info
    }
} 
```

您可能会考虑将其中的“查找服务器”部分隔离到它自己的功能中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T01:02:33.027

你可以使用 for 循环

```
 Server server;     

for(int i=0;i<=numberOFServers-1;i++){
   server = serverQueue.poll();
      try {
           if (server==null){return null}
           server.makeConnection();

          } catch (Exception e) {

             System.out.println("Server : " +i+ " could not establish connection");
          }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T00:56:02.193

你需要把你的`try`块放在一个简单的循环中，要么`while`要么`for`.

# android - 如何设置实际有效的 Timer.scheduleAtFixedRate()？

> ID：11217930
> 
> 赞同：2
> 
> 时间：2012-06-27T00:50:46.753
> 
> 标签：android, timer

我正在使用适用于 Android 的 Eclipse。我正在尝试制作一个延迟很短的简单重复计时器。它将在单击 TextView timerTV 后启动。此代码在 onCreate 方法中：

```
 timerTV = (TextView) findViewById(R.id.timerTV);
    timerTV.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {

              Timer gameTimer = new Timer();
              TimerTask doThis;

              int delay = 5000;   // delay for 5 sec.
              int period = 1000;  // repeat every sec.
              doThis = new TimerTask() {
                public void run() {
                               Toast.makeText(getApplicationContext(), "timer is running", Toast.LENGTH_SHORT).show();
                }
              };
              gameTimer.scheduleAtFixedRate(doThis, delay, period); 
```

每次我尝试运行它时，都会弹出一个“类文件编辑器”并显示错误：“找不到源” JAR 文件 C:\Program Files\Android\android-sdk\platforms\android-8\android.jar 没有源附件。您可以通过单击下面的附加源来附加源： [附加源...] 当我单击此按钮时，Eclipse 要求我选择包含“android.jar”的位置文件夹，我试图这样做，但无法一直导航到无论如何它所在的文件夹。

我认为问题出在我的代码中。我一直在寻找几个小时，甚至多次复制和粘贴代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T14:07:18.097

将实际的 Timer (java.util.Timer) 与 runOnUiThread() 结合使用是解决此问题的一种方法，下面是如何实现它的示例。

```
public class myActivity extends Activity {

private Timer myTimer;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.main);
    myTimer = new Timer();
    myTimer.schedule(new TimerTask() {
        @Override
        public void run() {
            TimerMethod();
        }

    }, 0, 1000);
}

private void TimerMethod()
{
    //This method is called directly by the timer
    //and runs in the same thread as the timer.

    //We call the method that will work with the UI
    //through the runOnUiThread method.
    this.runOnUiThread(Timer_Tick);
}

private Runnable Timer_Tick = new Runnable() {
    public void run() {

    //This method runs in the same thread as the UI.               

    //Do something to the UI thread here

    }
};
} 
```

资料来源：[http ://steve.odyfamily.com/?p=12](http://steve.odyfamily.com/?p=12)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T00:59:57.817

尝试使用 Project -> Clean 然后右键单击您的项目并找到 Fix Project Properties。检查您的构建路径。它可能是这些东西中的任何一种。重新启动 eclipse，确保您的 Android Manifest 是针对正确的 API，我假设 8？

# ios - iOS - 按下按钮时，如何让系统远程调用我的服务器？

> ID：11217932
> 
> 赞同：0
> 
> 时间：2012-06-27T00:51:00.980
> 
> 标签：ios, ios5, storyboard

我一直在使用故事板，并且我对代码的了解不多，现在似乎是时候了。

我有一个表单，当按下提交按钮时，是否需要将处理该表单的代码放入 .h 或 .m 文件中？另外，是否有处理按钮和进行远程调用的示例，我可以在某处引用这些示例？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T00:57:07.863

您可能会发现 Apple 的[Your First iOS App](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhone101/Articles/00_Introduction.html#//apple_ref/doc/uid/TP40007514-CH1-SW1)文档很有帮助；它涵盖了将按钮连接到代码中的操作。

至于拨打远程电话；有很多方法。我建议您将 NSURLConnection 和朋友作为一个说明的地方，但是有很多很多库可以帮助解决这个问题，例如 RESTKit。

# android - Android ScrollView如何在滚动到屏幕顶部时将组件保留在屏幕上？

> ID：11217933
> 
> 赞同：5
> 
> 时间：2012-06-27T00:51:03.673
> 
> 标签：android, scrollview

我有一个这样的 ScrollView 布局，例如：

```
<ScrollView> 
    <Component1>
    <Component2>
    <Component3>
    <Component4>
    ...
</ScrollView> 
```

在 ScrollView 我有一些组件，每个组件都可以是 LinearLayout，RelativeLayout，TableRow，... 现在我想要的是滚动视图，当`<Component2>`到达屏幕顶部时，它将保持在屏幕上和`<Component3>`, `<Component4>`... 将一直滚动到页面末尾。当我向下滚动时，只有在所有内容都可见`<Component2>`时才会滚动。`<Component3>`我在一个 Iphone 应用程序上看到了这一点，并想知道如何在 Android 上实现这一点。

我不知道我描述得够不够清楚，但和这个视频一样

[http://www.youtube.com/watch?v=jXCrM1rzLZY&feature=player_detailpage#t=71s](http://www.youtube.com/watch?v=jXCrM1rzLZY&feature=player_detailpage#t=71s)

当标签向上滚动到顶部时，它留在那里。当像在那个视频中那样向下滚动时`1:36`，它会一直呆在那里，直到下面的所有内容都在屏幕上可见。

有人知道如何在 Android 上执行此操作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T02:28:51.717

我猜你可以在 Component2 的坐标低于 ScrollView 的顶部（Android 从顶部绘制）时，在设置为 setVisible(true) 的 RelativeLayout 中创建 Component2 的隐藏副本。当 Component2 的坐标高于 ScrollView 的顶部时（.getTop()），Component2Copy.setVisible(false)。

您可能还希望在更改其可见性时禁用它们。祝你好运。

# ios - 可调整大小的 UIImage，其中外部延伸和内部保持相同

> ID：11217935
> 
> 赞同：2
> 
> 时间：2012-06-27T00:51:26.260
> 
> 标签：ios, ios5, uiimageview, uiimage

我正在尝试为我的应用程序中的垂直条创建一个“抓地力”，以向用户显示他们可以在视图上滑动。我想只使用图像的一个小版本，它有手柄，上下各 1 px，这是栏其余部分的背景。所以：

```
ssss          ssss
gggg  becomes ssss
ssss          gggg
              ssss
              ssss 
```

该方法`resizableImageWithCapInsets:`允许您告诉 iOS 不调整外边缘，但有没有办法告诉它不调整内部并与外部一起拉伸？

我已经尝试指定一个超大的帽子插图，`UIEdgeInsetsMake(29.0f, 0.0f, 29.0f, 0.0f)`这导致手柄位于图像框架的顶部，但否则就是我正在寻找的正确拉伸行为。我只需要将握把部分放在框架的中心。

感兴趣的人的完整代码（这导致在整个长度上重复抓握）：

```
gripBar = [[UIImageView alloc] initWithImage:[[UIImage imageNamed:@"grip"] resizableImageWithCapInsets:UIEdgeInsetsMake(1.0f, 0.0f, 1.0f, 0.0f)]];
gripBar.frame = CGRectMake(0, 0, gripWidth, fullHeight);
[view gripBar]; 
```

**更新：**基于所选答案的工作代码

```
@implementation GripBar

- (id)init {
    self = [super init];
    if (self) {
        UIImageView *bar = [[UIImageView alloc] initWithImage:[[UIImage imageNamed:@"gripback"] resizableImageWithCapInsets:UIEdgeInsetsMake(0.0f, 0.0f, 1.0f, 0.0f)]];
        bar.autoresizingMask = UIViewAutoresizingFlexibleHeight;
        [self addSubview:bar];

        UIImageView *grip = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"grip"]];
        grip.contentMode = UIViewContentModeCenter;
        grip.autoresizingMask = UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin;
        [self addSubview:grip];
    }
    return self;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T01:01:27.910

最简单的方法可能是让您的夹点部分成为背景拉伸或平铺的较大条形视图的（小高度，但全宽）子视图。例如，您可以通过自动调整蒙版大小使夹点部分在大视图中居中。

# html - div 浮动与全宽时的不同填充

> ID：11217943
> 
> 赞同：0
> 
> 时间：2012-06-27T00:52:06.760
> 
> 标签：html, css

如果将#container 的宽度更改为 99px，则蓝色 div 将浮动在红色 div 下方，因为宽度太小。

是否可以添加填充或边距，以便当蓝色 div 在红色 div 下方时红色和蓝色 div 之间有一个空间，并确保容器和 div 之间的顶部和底部空间（填充）保持相等（他们现在是 10 像素）？

如果 #container 设置回 100px，红色和蓝色 div 会完美地排列在顶部/底部吗？

[http://jsfiddle.net/86F2A/49/](http://jsfiddle.net/86F2A/49/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T00:57:02.887

也许在两个容器中添加*margin-bottom*并且不要在主容器上使用*padding-bottom 。*

[http://jsfiddle.net/86F2A/52/](http://jsfiddle.net/86F2A/52/)

# javascript - jQuery SVG插件变换动画错误

> ID：11217946
> 
> 赞同：0
> 
> 时间：2012-06-27T00:52:11.527
> 
> 标签：javascript, jquery, svg

我正在尝试使用 jQuery SVG 插件来为一些东西制作动画——缩放等等。我对 SVG 完全陌生。

```
var params = {};
params['svgTransform'] = ['scale(1)', 'scale(1.5)'];
$('#TX', svg.root()).animate(params); 
```

这几乎是从*插件的开发者那里**逐字*复制的。

 *然而，当它运行时，我得到了这个：

```
4TypeError: 'undefined' is not a function (evaluating 'f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration)') 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:30:37.080

也许它不支持动画 arg 对象内的数组。你能试一下吗 ：

```
var params = {};
params['svgTransform'] = 'scale(1.5)';
$('#TX', svg.root()).animate(params); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:01:59.100

我认为您应该检查 SVG 文档中是否存在 ID="TX" 的元素。

无论如何，我必须说，有时我发现*很难*记住*在哪里*编写特定行为的代码：有很多选择，在 XML（纯 SVG）、纯 JavaScript+DOM（但是什么 DOM？）、jQuery 特定、jQuery+SVG 中。 ......所有这些以及他们的细节......这令人生畏！我希望它最终会有所回报。

顺便说一句，我发现 Chrome 为锻炼问题提供了一个很好的 IDE（我现在在 Linux 上......）。按 Ctrl+Shift+I 进入调试器并查看任何错误...*

# r - 调用 sapply() 在交互模式下工作，而不是在批处理模式下

> ID：11217948
> 
> 赞同：1
> 
> 时间：2012-06-27T00:52:17.860
> 
> 标签：r

我需要以批处理模式执行一些命令（例如，通过 Rscript）。它们以交互模式工作，但不能以批处理模式工作。这是一个最小的例子：`sapply(1:3, is, "numeric")`. 为什么这在交互模式下工作但在批处理模式下返回错误？有没有办法让这样的命令在批处理模式下工作？

更具体地说，我需要编写脚本并以批处理模式运行它们。他们需要调用如下所示的函数（我没有编写也无法编辑）：

```
testfun <- function (...)
{
  args <- list(...)
  if (any(!sapply(args, is, "numeric")))
    stop("All arguments must be numeric.")
  else
    writeLines("All arguments look OK.")
} 
```

我需要将一个列表传递给这个函数。类似的命令`testfun(list(1, 2, 3))`在交互模式下工作。但是在批处理模式下，它会产生错误：`Error in match.fun(FUN) : object 'is' not found`. 我试图`debugger()`解决这个问题，但它没有给我任何洞察力。我还查看了 r-help、R 常见问题解答、R Inferno，但我找不到任何与此问题相关的内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T00:58:57.217

Rscript 默认不加载方法包，因为它需要很多时间。从*详细信息*部分`?Rscript`：

```
 ‘--default-packages=list’ where ‘list’ is a comma-separated list
      of package names or ‘NULL’.  Sets the environment variable
      ‘R_DEFAULT_PACKAGES’ which determines the packages loaded on
      startup.  The default for ‘Rscript’ omits ‘methods’ as it
      takes about 60% of the startup time. 
```

您可以使用参数使其加载方法`--default-packages`。

```
> Rscript -e 'sapply(1:3, is, "numeric")' --default-packages='methods'
[1] TRUE TRUE TRUE 
```

# django - Django：向对象添加“创建者”字段

> ID：11217951
> 
> 赞同：0
> 
> 时间：2012-06-27T00:53:32.543
> 
> 标签：django, django-models, django-forms

我需要在数据库中存储正在创建特定对象的用户，如下所示：

（模型.py）

```
class Address(models.Model):
createdBy = models.ForeignKey(User)
address1 = models.CharField("Address Line 1", max_length=40)
address2 = models.CharField("Address Line 2", max_length=40, blank=True)
city = models.CharField(max_length=20)
state = models.CharField(max_length=3)
zipCode = models.CharField("Postal Code", max_length=10) 
```

我处理表单的观点在这里（views.py）：

```
def handlePopAdd(request, addForm, field):
if request.method == "POST":
    form = addForm(request.POST)
    if form.is_valid():
        try:
            newObject = form.save(request)
        except forms.ValidationError, error:
            newObject = None
        if newObject:
            return HttpResponse('<script type="text/javascript">opener.dismissAddAnotherPopup(window, "%s", "%s");</script>'% (escape(newObject._get_pk_val()), escape(newObject)))
else:
    form = addForm()
pageContext = {'form': form, 'field': field}
return render_to_response("address_popup.html", pageContext, context_instance=RequestContext(request)) 
```

最后，这是我的表单代码：（forms.py）

```
class AddressForm(forms.ModelForm):

def __init__(self, *args, **kwargs):
    self.request = kwargs.pop('request', None)
    return super(AddressForm, self).__init__(*args, **kwargs)

def save(self, *args, **kwargs):

    obj = super(AddressForm, self).save(commit=False)
    if self.request:
        obj.createdBy = self.request.user
    obj.save()

class Meta:
    model = Address
    exclude = ('createdBy',) 
```

我正在使用[这个问题](https://stackoverflow.com/questions/862522/django-populate-user-id-when-saving-a-model)建议的最佳答案，并且在盯着这个洞几个小时后撞到了墙上。

这是我的回溯。错误是**/app/address/add/ 处的 IntegrityError（1048，“列 'createdBy_id' 不能为空”）**

```
Traceback:
File "/usr/local/lib/python2.6/dist-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/usr/local/lib/python2.6/dist-packages/django/contrib/auth/decorators.py" in _wrapped_view
  23\.                 return view_func(request, *args, **kwargs)
File "/home/matthew/lessonhelper/../lessonhelper/lessons/views.py" in address_add
  78\.   return handlePopAdd(request, AddressForm, 'address')
File "/usr/local/lib/python2.6/dist-packages/django/contrib/auth/decorators.py" in _wrapped_view
  23\.                 return view_func(request, *args, **kwargs)
File "/home/matthew/lessonhelper/../lessonhelper/lessons/views.py" in handlePopAdd
  66\.               newObject = form.save(request)
File "/home/matthew/lessonhelper/../lessonhelper/lessons/forms.py" in save
  29\.       obj.save()
File "/usr/local/lib/python2.6/dist-packages/django/db/models/base.py" in save
  460\.         self.save_base(using=using, force_insert=force_insert, force_update=force_update)
File "/usr/local/lib/python2.6/dist-packages/django/db/models/base.py" in save_base
  553\.                     result = manager._insert(values, return_id=update_pk, using=using)
File "/usr/local/lib/python2.6/dist-packages/django/db/models/manager.py" in _insert
  195\.         return insert_query(self.model, values, **kwargs)
File "/usr/local/lib/python2.6/dist-packages/django/db/models/query.py" in insert_query
  1436\.     return query.get_compiler(using=using).execute_sql(return_id)
File "/usr/local/lib/python2.6/dist-packages/django/db/models/sql/compiler.py" in execute_sql
  791\.         cursor = super(SQLInsertCompiler, self).execute_sql(None)
File "/usr/local/lib/python2.6/dist-packages/django/db/models/sql/compiler.py" in execute_sql
  735\.         cursor.execute(sql, params)
File "/usr/local/lib/python2.6/dist-packages/django/db/backends/util.py" in execute
  34\.             return self.cursor.execute(sql, params)
File "/usr/local/lib/python2.6/dist-packages/django/db/backends/mysql/base.py" in execute
  86\.             return self.cursor.execute(query, args)
File "/usr/lib/pymodules/python2.6/MySQLdb/cursors.py" in execute
  166\.             self.errorhandler(self, exc, value)
File "/usr/lib/pymodules/python2.6/MySQLdb/connections.py" in defaulterrorhandler
  35\.     raise errorclass, errorvalue

Exception Type: IntegrityError at /app/address/add/
Exception Value: (1048, "Column 'createdBy_id' cannot be null" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T01:26:47.193

您专门定义了将请求添加到表单的逻辑，但没有使用它。

您需要将表单实例`request`化为关键字参数（根据您的代码）。

```
form = addForm(request.POST, request=request) 
```

`save(request)`对请求不做任何事情。

大多数人更喜欢只接受`save()`.

```
def save(self, request):
    obj = super(AddressForm, self).save(commit=False)
    obj.createdBy = request.user
    obj.save() 
```

最后，如果不能为空`if`，则 save 方法中的块没有意义：它是必需的。`createdBy`没有“如果”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T01:13:15.397

您排除了`createdBy`表单中的字段，根据您的模型定义，这是一个必填字段，因为您使用的是 ModelForm。

# c# - 根据从第一个列表框中选择的值填充第二个列表框

> ID：11217952
> 
> 赞同：0
> 
> 时间：2012-06-27T00:53:36.913
> 
> 标签：c#, asp.net, listbox

我有 2 个列表框。

```
 <asp:ListBox ID="ListBox_Region" runat="server" 
              DataTextField="arregion" DataValueField="arregion" AutoPostBack="True" 
             Height="96px" 
             Width="147px" DataSourceid="sqldatasource1"></asp:ListBox>
            <asp:ListBox ID="ListBox_Area" runat="server"  
            DataTextField="ardescript" DataValueField="ardescript"     
             AutoPostBack="True"              
             OnSelectedIndexChanged="ListBox_Area_SelectedIndexChanged" 
             Height="96px" 
             Width="147px" > 
```

因此，当我从 ListBox_Region 中选择一个值时，相应的值会以这种方式在 ListBox_Area 中更新：

```
 protected void ListBox_Region_SelectedIndexChanged(object sender, EventArgs e)
    {
        this.ListBox_Area.Items.Clear();
        string selectedRegion = ListBox_Region.SelectedValue;
        var query = (from s in DBContext.areas
                     where s.arregion == selectedRegion
                     select s);
        ListBox_Area.DataSource = query;
        ListBox_Area.DataBind();

    } 
```

ListBoxRegion_SelectedIndexChaged 的​​事件写在页面加载中。

但是，问题在于初始页面加载，默认情况下应该选择 ListBox_Region 的第一个值。第二个列表框应该更新为相应的值，但这应该发生在所选索引更改被触发之前。那么，你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T01:06:05.977

将逻辑`ListBox_Region_SelectedIndexChanged`移到一个单独的方法上，并`page_load`在回发为假时调用它。

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!Page.IsPostBack)
    {
          // Bind ListBox_Region and set the first value as selected
          ...
          //
          BindAreaList();
    }
}

protected void ListBox_Region_SelectedIndexChanged(object sender, EventArgs e)
{
    BindAreaList();
}

protected void BindAreaList()
{
    this.ListBox_Area.Items.Clear();
    string selectedRegion = ListBox_Region.SelectedValue;
    var query = (from s in DBContext.areas
                 where s.arregion == selectedRegion
                 select s);
    ListBox_Area.DataSource = query;
    ListBox_Area.DataBind();     
} 
```

# javascript - 向主干模型添加更多功能

> ID：11217959
> 
> 赞同：2
> 
> 时间：2012-06-27T00:55:24.287
> 
> 标签：javascript, node.js, backbone.js

我正在尝试向主干添加一些功能，以便我可以与 mongodb 进行通信。现在我知道这在客户端不起作用；但是，我也喜欢主干的服务器端模型逻辑功能。我注意到，如果我继续为每个模型添加相同的功能，我会做大量重复工作，因此我决定在服务器端创建一个“app_model”文件来扩展主干。我也不想覆盖标准的 Backbone 函数，因为它们将是有用的客户端。

所以让我们以这个用户类为例：

```
var Backbone = require('./app_model');

var User = Backbone.Model.extend({
    name : "users",
    defaults: function() {
        return {
            username: "default",
            role: 2,
            created: new Date(),
            updated: new Date(),
            logged: new Date()
        };
    },
    idAttribute: "username",
    /**
     * A predefined listing of user roles
     */
    userRoles: [
        "admin",  //0
        "author", //1
        "user"    //2
    ],
    initialize: function() {
        if(!!app) {
           this.svrInit();
        }
    }
});

module.exports = User; 
```

我想通过使用我的“app_model.js”文件将函数附加到主干上，该文件目前看起来像这样：

```
var Backbone = require('backbone'),
  Deferred = require('Deferred'),
  when = Deferred.when;

Backbone.Model.prototype.svrInit = function() {
    //TODO: perhaps the code below should be made static some how so we don't have a bunch of instances of collection
    var model = this;
    if(!!app.db){
        app.db.collection(this.name,function(err,collection){
            model.collection = collection;
        });
    }
};

Backbone.Model.prototype.svrSave = function() {
    var model = this.toJSON();
    var dfd = new Deferred();
    this.collection.insert(model, {safe:true}, function(err, result){
        dfd.resolve();
    });
    return dfd;
};

Backbone.Model.prototype.svrFind = function(options) {
    var model = this.toJSON();
    var dfd = new Deferred();
    this.collection.find(options, {safe:true}, function(err, result){
        dfd.resolve();
    });
    return dfd;
};

module.exports = Backbone; 
```

当我把它抽象出来时，我运行了我的测试，它似乎工作正常。有没有更好的方法来做到这一点？有坑掉吗？我正在使用全局“app”变量，这很糟糕吗？如果是这样，有什么方法可以解决它？我确实觉得我不得不`this.svrInit()`在模型级别的 init 函数中放入它很难看，无论如何在创建后自动实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T13:44:28.173

所以我已经考虑这个问题几天了，我想出的最干净的东西是这样的：

```
var MyModel = function( attributes, options ) {
  Backbone.Model.apply( this, arguments );
  this.specialInitializer();
};

MyModel.extend = Backbone.Model.extend;

_.extend( MyModel.prototype, Backbone.Model.prototype, {
  specialInitializer: function() {
    // called after the users 'initialize'
    console.log("MyModel initialized.", this);
  },
  otherNewMethod: function() {
    // this is just like any other instance method,
    // just as if Backbone.Model implemented it
  }
} ); 
```

所以这基本上是制造一种全新的“种类” `Backbone.Model`。一个也叫`specialInitializer`. 如果您在构造函数定义之后查看[主干源代码](http://backbonejs.org/docs/backbone.html)`Backbone.Model`，您会发现这是一个类似的策略。

*   构造实例。
*   调用实现者应该定义的初始化器。
*   使用功能扩展原型（在他们的情况下`Backbone.Events`，在我们的情况下，`Backbone.Model`）。

您的新初始化程序当然可以调用它需要的任何其他内容，等等。

至于您关于静态集合内容和全局 app 变量的其他问题，恐怕我没有完全了解那里发生的事情，因为我没有看到定义`app`并且不知道您使用的是什么收藏为。

这是[一个小提琴](http://jsfiddle.net/q3cgz/)，它通过一些额外的日志记录等来证明这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-21T21:54:26.830

我正在开发一个相当大的代码库，视图中有 4-5 级继承。这是我正在使用的模式：

```
var BaseView = Backbone.Model.extend({
  somefunc: function() {
    //contents
  },

  otherfunc: function(a,b,c) {
    //contents
  },
  //...
});

var User = BaseView.extend({
  // things in user view can now access somefunc and otherfunc
}); 
```

[这是jsfiddle](http://jsfiddle.net/mqZ4u/1/)中的一个快速示例（注意 doSearch 函数被继承）

# linq - 使用 LINQ 从嵌套集合中选择 Single

> ID：11217965
> 
> 赞同：2
> 
> 时间：2012-06-27T00:56:19.637
> 
> 标签：linq, collections, nested, linq-to-objects, observablecollection

我有两个类 - **MyBaseClass**和**BaseClassContainer** - 声明如下：

```
public class MyBaseClass
{
    private Guid id;
    public Guid ID
    {
        if (id == Guid.Empty)
        {
            id = Guid.NewGuid();
        }
        return id;
    }
    //...Other Properties omitted for brevity
} 
```

和

```
public class BaseClassContainer : INotifyPropertyChanged
{
    private ObservableCollection<MyBaseClass> baseClasses;
    public ObservableCollection<MyBaseClass> BaseClasses
    {
    //...Omitted for brevity...
    }
} 
```

然后在我的代码中，我有一个 BaseClassContainer ( *BaseClassContainerCollection* ) 类型的 ObservableCollection。我想弄清楚的是如何使用 LINQ 从 ObservableCollection 中选择一个 BaseClassContainer，其中一个 MyBaseClass.ID 与特定的 Guid 匹配。我使用 Single() 方法的原因是因为我知道它们都是独一无二的。

我尝试了以下方法，但它不起作用：

```
var result = BaseClassContainerCollection.Single(container => container.BaseClasses.Single(baseClass => baseClass.ID == specificGuid)); 
```

我收到一条错误消息： *无法将类型 'MyBaseClass' 隐式转换为 'bool'*。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T01:10:24.533

让我们分解您的查询：

```
BaseClassContainerCollection.Single(yourPredicate); 
```

`Single`，就像这里使用的那样，基本上是说“在这个谓词上过滤 BaseClassContainerCollection”（一个“过滤器”函数，用于判断是否将其包含在结果中）。您不是说返回 true/false 的函数，而是说您希望它评估为 MyBaseClass，这没有意义。您的内部调用`Single`是有道理的，因为`x => x.Id == guid`它是一个返回真/假的函数，并且仅过滤那些符合条件的元素（然后声明您知道结果中只会有其中一个元素，否则会引发异常）。

您想要做的是`Select`来自内部查询的单个 MyBaseClass 结果，然后在结果上调用 Single （没有谓词），因为您知道结果应该只返回一个项目。我相信您正在寻找：

```
BaseClassContainerCollection.Select(container => container.BaseClasses.Single(baseClass => baseClass.ID == specificGuid)).Single(); 
```

# http - 如何知道何时解析referer

> ID：11217974
> 
> 赞同：0
> 
> 时间：2012-06-27T00:57:22.217
> 
> 标签：http, node.js

我在我的服务器上工作，遇到了实现使用的需求。`request.headers.referer`当我进行测试并读取标头以确定如何编写解析函数时，我无法确定从来自服务器外部的链接调用的请求之间的区别，在目录之外，或者从给定的 HTML 响应中调用本地资源。例如，

从 localhost/dir1 到 localhost/dir2 使用`<a href="http://localhost/dir2">`将产生响应标头：

`referer:"http://localhost/dir1" url:"/dir2"`

而从 localhost/dir2 发送的 HTML 文件使用本地 URI 请求资源`style.css`将产生：

`referer:"http://localhost/dir2" url:"/style.css"`

并且涉及图像的相同情况可能会结束

`referer:"http://localhost/dir2" url:"/_images/image.png"`

如何防止 url 和 referer 之间的错误解析被意外解析为`http://localhost/dir1/dir2`or`http://localhost/_images/image.png`等​​等？有没有办法判断浏览器引用 URI 的方式，以及浏览器或服务器如何识别`http://localhost/dir2/../dir1`预期目的地的时间？

# java - java.net.InetAddress 获取 localhost 地址错误 (WinXP)

> ID：11217989
> 
> 赞同：0
> 
> 时间：2012-06-27T00:59:39.313
> 
> 标签：java, networking, groovy

我在 Groovy 1.8.6 中工作，在 JDK 1.6.0u33 上运行。当我的程序启动时，它会尝试通过连接到主机地址上的 telnet 端口来连接到同一主机上的另一个进程。它使用标准 Java 类 InetAddress 来确定本地主机地址。但是，由于某种原因，当我在 Windows XP VM 上启动程序时，主机地址解析为垃圾并且连接失败。

启动脚本包含此行用于诊断信息： `def serverAddress = "http://${InetAddress.localHost.hostAddress}:${config.ServerPort}/DigitizerService?wsdl"`

`serverAddress`打印到终端 时的输出为：`http://0.1.0.5:8989/DigitizerService?wsdl`

地址并不总是相同的 - 另一次它是`0.2.0.5`. 但它总是以甚至不是有效地址的形式出现，更不用说该主机的实际地址了。

这个相同的代码库正在大量的盒子上生产，我从来没有见过这样的问题，所以我猜它一定是特定于这个新的 devbox 的——或者它是新的错误JDK。

有谁知道*什么*可能导致像这样基本的东西输出垃圾？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T02:01:00.790

虽然我在发布这个问题之前尝试重新启动（当然，这毕竟是 Windows），但它没有帮助，VM 的第二次重新启动似乎已经解决了这个问题。它正在安装大量 Windows 更新，因为它是一个我刚刚清理过的旧虚拟机，所以我想这可能会以某种方式扰乱操作系统内部的东西。

所以我仍然很困惑这是如何发生的，但我想我可以得出结论，这不是 Java 的错。大概。

# java - 将字符串数组更改为列表 - Java/安卓

> ID：11217990
> 
> 赞同：2
> 
> 时间：2012-06-27T00:59:49.283
> 
> 标签：java, android, string, list

我正在更新自定义适配器，并且必须将值从字符串数组更改为列表。

这是代码：

```
private final List<String> values;

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View rowView = inflater.inflate(R.layout.comments_listadapter, parent, false);
    TextView textView = (TextView) rowView.findViewById(R.id.comments_label);
    ImageView imageView = (ImageView) rowView.findViewById(R.id.comments_menu);
    textView.setText(values[position]); // Needs to Change!

    String s = values[position]; // Needs to Change!

    imageView.setImageResource(R.drawable.up_down);

    return rowView;
} 
```

我已经标记了需要更改的两行（我不确定将其更改为列表是否需要更多更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-29T06:17:00.593

```
List<String> mStringList = Arrays.asList(values); 
```

其中 values 是一个字符串数组。数组类在`java.util package`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T01:03:50.967

如果我正确理解您的问题，您正在寻找：

```
String s = values.get(position);
textView.setText(s); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T01:03:29.113

试试这个

```
String s = getItem(position);
textView.setText(s); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T01:04:25.940

所以听起来你有`String[] values`你想要的东西`List<String> values`。

以下是如何进行转换：

```
List<String> listValues = new ArrayList<String>();

for(String s : values) {
    listValues.add(s);
} 
```

然后代替`values[position]`，你做`listValues.get(position)`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T01:04:38.950

你的问题到底是什么？你的意思是你必须改变你的参考

```
mList.get(position);
mList.add(position, string); 
```

# android - 当我尝试在我的应用程序中获取 admob 时，我的应用程序会强制关闭

> ID：11217996
> 
> 赞同：-1
> 
> 时间：2012-06-27T01:00:18.940
> 
> 标签：android

嗨，我第一次尝试为我的应用添加 admob。我已经阅读了很多信息（包括 stackOverFlow）。但是我仍然没有运气。我的应用程序强制关闭。这是我到目前为止的尝试方式。

Androidmanifest.xml

我在应用程序标签中添加了这些行

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

而且我之前还添加了以下行

```
<Meta-Data android:value="a14f9xxxxx(id from admob)" android:name="ADMOB_PUBLISHER_ID"/> 
```

属性.xml

```
<?xml version="1.0" encoding="utf-8"?>
  <resources>
    <declare-styleable name="com.admob.android.ads.AdView">            
       <attr name="backgroundColor" format="color" />
       <attr name="primaryTextColor" format="color" />
       <attr name="secondaryTextColor" format="color" />
       <attr name="keywords" format="string" />
       <attr name="refreshInterval" format="integer" />
    </declare-styleable>
  </resources> 
```

frontpage.xml（我的首页活动的布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:myapp="http://schemas.android.com/apk/res/simple.stocktaketrial"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:orientation="vertical" >
...
some other layout and components here
...

<com.admob.android.ads.AdView     
       android:id="@+id/ad" 
       android:layout_width="fill_parent" 
       android:layout_height="wrap_content"
       myapp:backgroundColor="#000000"
       myapp:primaryTextColor="#FFFFFF"
       myapp:secondaryTextColor="#CCCCCC"
/>
</LinearLayout> 
```

我在 lib 文件夹中添加了 GoogleAdMobAdsSdk-6.0.0 并构建了通行证。

我做错了什么？？

我已经阅读了在布局中在xml中添加admob的方式比在java中添加代码更好。因此，如果这是真的，我想保留它。

提前感谢您的帮助。

这是输出的logcat。

```
06-27 12:24:56.630: E/AndroidRuntime(25265): FATAL EXCEPTION: main
06-27 12:24:56.630: E/AndroidRuntime(25265): java.lang.RuntimeException: Unable to start activity ComponentInfo{simple.stocktaketrial/simple.stocktaketrial.FrontPage}: android.view.InflateException: Binary XML file line #77: Error inflating class com.admob.android.ads.AdView
06-27 12:24:56.630: E/AndroidRuntime(25265):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
06-27 12:24:56.630: E/AndroidRuntime(25265):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
06-27 12:24:56.630: E/AndroidRuntime(25265):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
06-27 12:24:56.630: E/AndroidRuntime(25265):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
06-27 12:24:56.630: E/AndroidRuntime(25265):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-27 12:24:56.630: E/AndroidRuntime(25265):    at android.os.Looper.loop(Looper.java:123)
06-27 12:24:56.630: E/AndroidRuntime(25265):    at android.app.ActivityThread.main(ActivityThread.java:4627)
06-27 12:24:56.630: E/AndroidRuntime(25265):    at java.lang.reflect.Method.invokeNative(Native Method)
06-27 12:24:56.630: E/AndroidRuntime(25265):    at java.lang.reflect.Method.invoke(Method.java:521)
06-27 12:24:56.630: E/AndroidRuntime(25265):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
06-27 12:24:56.630: E/AndroidRuntime(25265):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
06-27 12:24:56.630: E/AndroidRuntime(25265):    at dalvik.system.NativeStart.main(Native Method)
06-27 12:24:56.630: E/AndroidRuntime(25265): Caused by: android.view.InflateException: Binary XML file line #77: Error inflating class com.admob.android.ads.AdView
06-27 12:24:56.630: E/AndroidRuntime(25265):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:576)
06-27 12:24:56.630: E/AndroidRuntime(25265):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
06-27 12:24:56.630: E/AndroidRuntime(25265):    at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
06-27 12:24:56.630: E/AndroidRuntime(25265):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
06-27 12:24:56.630: E/AndroidRuntime(25265):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
06-27 12:24:56.630: E/AndroidRuntime(25265):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
06-27 12:24:56.630: E/AndroidRuntime(25265):    at android.app.Activity.setContentView(Activity.java:1647)
06-27 12:24:56.630: E/AndroidRuntime(25265):    at simple.stocktaketrial.FrontPage.onCreate(FrontPage.java:25)
06-27 12:24:56.630: E/AndroidRuntime(25265):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-27 12:24:56.630: E/AndroidRuntime(25265):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
06-27 12:24:56.630: E/AndroidRuntime(25265):    ... 11 more
06-27 12:24:56.630: E/AndroidRuntime(25265): Caused by: java.lang.ClassNotFoundException: com.admob.android.ads.AdView in loader dalvik.system.PathClassLoader[/data/app/simple.stocktaketrial-2.apk]
06-27 12:24:56.630: E/AndroidRuntime(25265):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
06-27 12:24:56.630: E/AndroidRuntime(25265):    at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
06-27 12:24:56.630: E/AndroidRuntime(25265):    at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
06-27 12:24:56.630: E/AndroidRuntime(25265):    at android.view.LayoutInflater.createView(LayoutInflater.java:466)
06-2 7 12:24:56.630: E/AndroidRuntime(25265):   at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:565)
06-27 12:24:56.630: E/AndroidRuntime(25265):    ... 20 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T01:08:29.733

看起来您缺少 AndroidManifest.xml 中的活动以及“元数据”的不正确大小写...

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
   package="...." android:versionCode=".." android:versionName="...">
   <application android:icon="...." android:label="....">
      <activity ..... >
      </activity>
      <meta-data android:value="a14f9xxxxx(id from admob)" android:name="ADMOB_PUBLISHER_ID"/>
      <activity android:name="com.google.ads.AdActivity" android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/>
   </application>
</manifest> 
```

上述 configChanges 属性适用于 Android SDK 级别 14 及以上。

对于较低的，使用这个：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
       package="...." android:versionCode=".." android:versionName="...">
   <application android:icon="...." android:label="....">
      <activity ..... >
      </activity>
      <meta-data android:value="a14f9xxxxx(id from admob)" android:name="ADMOB_PUBLISHER_ID"/>
      <activity android:name="com.google.ads.AdActivity" android:configChanges="keyboard|keyboardHidden|orientation"/>
    </application>
</manifest> 
```

那里的活动在 Admobs 库中，无需做任何额外的事情 :)

# c# - 阅读 MSDN 页面

> ID：11217997
> 
> 赞同：3
> 
> 时间：2012-06-27T01:00:23.097
> 
> 标签：c#, msdn

> **可能重复：**
> [为什么首先需要 GUID 属性？](https://stackoverflow.com/questions/1067538/why-is-guid-attribute-needed-in-the-first-place)

我知道这个问题对你们所有人来说似乎都超级简单（您可以随意分配负分），但我个人不知道如何处理 MSDN 页面：

```
[ComVisibleAttribute(true)]
[GuidAttribute("496B0ABF-CDEE-11d3-88E8-00902754C43A")]
public interface IEnumerator 
```

它说是一个可见的 COM 或组件对象模型属性。它还具有唯一的 id 属性。这令人困惑，不知道它在哪里派上用场。剩下的很简单，它是一个公共接口，所以我知道它的标题是 SYNTAX，但不知道如何找到它的应用程序。

有人可以给我一些线索，我可以如何阅读这篇文章以及我可以从中获得什么样的好处？

# java - 继承会破坏封装吗？

> ID：11217999
> 
> 赞同：13
> 
> 时间：2012-06-27T01:01:25.863
> 
> 标签：java, inheritance, encapsulation

假设我有一个 CSV 文件，我创建了一个名为的类`CsvFile`，它从`java.io.File`. 此类可以解析 CSV 文件并返回一些数据，例如文件中有多少列。它也可以用于`java.io.File`作为输入的函数。像 F `ileUtils.copyFile(File from, File to)`。

我的同事认为我从继承中暴露了太多。他的想法是`java.io.File`通过将其保存在私有财产中来包装，而不是继承它。他认为从文件中断封装中公开所有公共方法/属性，但我认为这是一个好处，因为我们可以`java.io.File`免费获得所有功能。

你怎么看？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-27T01:12:00.750

我宁愿同意你同事的观点：继承`java.util.File`会暴露不适用于`CsvFile`对象的方法，例如`list()`, `listFiles()`,`setExecutable()`等。

在getter`java.util.File`后面创建一个属性听起来是一个更好的选择：它不会向您的类的用户透露不相关的操作，并允许您从您选择的基类继承。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T01:12:47.020

我认为这完全取决于课程的目的。如果你真的想扩展这种行为，那么我会说这是有道理的。如果您没有扩展 File 的行为，而只是制作一个 CSV 对象，那么封装会将其行为限制在其意图的范围内。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T01:18:34.880

这实际上是一场大辩论。你的同事在这件事上站在历史的正确一边。一般来说，继承问题归结为 is-a 与 has-a 的关系。一般来说，使用组合比使用继承更灵活。在你的情况下，这是一个近距离的电话。毕竟一个csv文件是一个文件。说 csvfile has-a file 甚至听起来都不对。也可以考虑进行继承，而不是包装继承的文件，以便仅公开您想要的那些 CSV 文件方法。我还将研究一些您希望从 A 继承但向世界公开更有限接口的设计模式。我几乎可以肯定有一个设计模式。就是想不起来名字了。。。。

“要么，要么我认为不是，但将两者结合起来是一种方式。首先继承是为了不重新发明轮子，而不是封装模式，以便轮子服务于它的目的。”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T01:17:41.223

您还可以考虑使其更通用，以便它可以接受来自无法（或不容易）发送到文件系统的各种来源的 CSV 格式的 InputStream 或 Reader。为方便起见，您仍然可以使用 java.io.File 设置器/构造器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-05T12:14:04.140

至于你的问题

> 继承会破坏封装吗？

然后，根据 Joshua Bloch 的 Effective Java，继承总是会破坏封装：

> 与方法调用不同，继承违反了封装 [Snyder86]。换句话说，子类的正确功能取决于其超类的实现细节。

关于你应该使用继承还是组合，正如许多人已经说过的，这取决于你的`CsvFile`is-a 文件，在`java.util.File`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-27T08:38:50.560

您的同事提到的方法还有一个好处，即您的 API 变得非常小，只需公开您真正需要的方法 - 这使用户清楚如何使用您的类（您可以将公共 API 视为某种文档） .

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-27T01:28:01.147

也许我的观点过于自由，但是......封装和继承是有原因的。（观看从汇编程序到高级语言的“进化”。）原因是程序员。使用更高级别的抽象/范式，您可以编写更好的代码。诀窍当然是定义“更好”。对我来说，这是可维护性、自我文档和代码重用。这就是为什么我会在您的特定情况下选择封装而不是继承。编写一次可能需要更多的工作，但将来维护起来会容易得多。（当然，假设这个 CSV 文件是更大项目的一部分。）