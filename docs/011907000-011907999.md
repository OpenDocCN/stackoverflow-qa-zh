# StackOverflow 问答 11907000-11907999

# email - Unicode 字符未正确显示

> ID：11907010
> 
> 赞同：0
> 
> 时间：2012-08-10T18:07:42.283
> 
> 标签：email, curl, unicode, wchar

我正在制作一个支持多种语言的 C 程序。该程序使用 WCHAR 类型而不是 char 类型发送电子邮件。问题是，当我收到邮件并阅读时，有些字符显示不正确，甚至有些英文字符，如 e、m、... 这是一个示例：

```
<!-- language: lang-c -->
curl_easy_setopt(hnd, CURLOPT_READFUNCTION, payload_source);
curl_easy_setopt(hnd, CURLOPT_READDATA, &upload_ctx);

static const WCHAR *payload_text[]={
    L"To: <me@mail.com>\n",
    L"From: <me@mail.com>(Example User)\n",
    L"Subject: Hello!\n",
    L"\n",
    L"Message sent\n",
    NULL
};

struct upload_status {
    int lines_read;
};

static size_t payload_source(void *ptr, size_t size, size_t nmemb, void *userp){
    struct upload_status *upload_ctx = (struct upload_status *)userp;
    const WCHAR *data;

    if ((size == 0) || (nmemb == 0) || ((size*nmemb) < 1)) {
        return 0;
    }

    data = payload_text[upload_ctx->lines_read];
    if (data) {
        size_t len = wcslen(data);
        memcpy(ptr, data, len);
        upload_ctx->lines_read ++;
        return len;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T02:14:11.727

`memcpy()`作用于字节，而不是字符。你没有考虑到这一点`sizeof(wchar_t) > 1`。在某些系统上是 2 个字节，在其他系统上是 4 个字节。在编写可移植代码时，这种差异是`wchar_t`一个糟糕的选择。您应该改用 Unicode 库，例如 icu 或 iconv）。

`sizeof(wchar_t)`调用时需要考虑`memcpy()`。您还需要考虑到目标缓冲区可能小于您尝试复制的文本字节的大小。仅跟踪`lines_read`本身是不够的，您还必须跟踪已复制的当前行的字节数，以便您可以处理当前文本行跨越多个目标缓冲区的情况。

尝试更多类似的东西：

```
static size_t payload_source(void *ptr, size_t size, size_t nmemb, void *userp)
{
    struct upload_status *upload_ctx = (struct upload_status *) userp;
    unsigned char *buf = (unsignd char *) ptr;
    size_t available = (size * nmemb);
    size_t total = 0;

    while (available > 0)
    {
        wchar_t *data = payload_text[upload_ctx->lines_read];
        if (!data) break;

        unsigned char *rawdata = (unsigned char *) data;

        size_t remaining = (wcslen(data) * sizeof(wchar_t)) - upload_ctx->line_bytes_read;
        while ((remaining > 0) && (available > 0))
        {
            size_t bytes_to_copy = min(remaining, available);
            memcpy(buf, rawdata, bytes_to_copy);

            buf += bytes_to_copy;
            available -= bytes_to_copy;
            total = bytes_to_copy;

            rawdata += bytes_to_copy;
            remaining -= bytes_to_copy;

            upload_ctx->line_bytes_read += bytes_to_copy;
        }

        if (remaining < 1)
        {
            upload_ctx->lines_read ++;
            upload_ctx->line_bytes_read = 0;
        }
    }

    return total;
} 
```

# regex - 在 PHP 中提取引号之间的文本

> ID：11907016
> 
> 赞同：0
> 
> 时间：2012-08-10T18:08:17.940
> 
> 标签：regex, preg-match

我有这样的输出数据：

“选项 1”“蓝色”“棕褐色”

这一切都在一条线上；它都在我的数据库表中的一个字段中。（请不要问为什么）但我需要的是：

```
Array
(
    [0] => Option 1
    [1] => Blue
    [2] => Tan
) 
```

我正在尝试这个正则表达式：

```
 $data = preg_match('/\"([^\"]*?)\"/', $row4['Data'], $matches); 
```

但`$matches`只产生这样的第一个元素：

```
Array
(
    [0] => "Option 1"
    [1] => Option 1
) 
```

我需要做什么才能让引号之间的任何内容成为数组中它们自己的单独元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T18:11:06.380

你需要使用`preg_match_all()`. `preg_match()`只返回第一个匹配项。

# mysql - 在仅给定一个值的多个表之一中查找一列？

> ID：11907018
> 
> 赞同：1
> 
> 时间：2012-08-10T18:08:34.630
> 
> 标签：mysql

我有这个：

```
SELECT TABLE_NAME, COLUMN_NAME
FROM INFORMATION_SCHEMA.COLUMNS
WHERE column_name = 'whatever' 
```

但我需要的是这样的：

```
SELECT TABLE_NAME, COLUMN_NAME
FROM INFORMATION_SCHEMA.COLUMNS
WHERE column_data = 'whatever' 
```

所以，换句话说，我有一个值，但我不知道它存储在哪里。有没有办法从字面上检查整个数据库并返回表、列？

aaaand 是的，我知道，数据库管理员不会高兴的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:53:23.930

这可能会让你朝着正确的方向前进。

**1.创建`find_column`存储过程**

```
DROP PROCEDURE IF EXISTS `find_column`;

DELIMITER $$

CREATE PROCEDURE `find_column`(IN i_value varchar(200),
                               OUT o_columns varchar(2000),
                               OUT o_message varchar(500))
MAIN_BLOCK : BEGIN

 DECLARE is_numeric boolean;

 CHECK_NUMERIC : BEGIN
   set is_numeric = i_value REGEXP '^(-|\\+){0,1}([0-9]+\\.[0-9]*|[0-9]*\\.[0-9]+|[0-9]+)$';
 END CHECK_NUMERIC;

 FIND_IT : BEGIN

   DECLARE bNoMoreRows BOOLEAN DEFAULT FALSE;
   DECLARE v_schema varchar(64);
   DECLARE v_table varchar(64);
   DECLARE v_column varchar(64);
   DECLARE v_data_type varchar(64);
   DECLARE v_count int;

   -- all schemas, tables and columns in DB
   DECLARE columns CURSOR FOR
   select table_schema,table_name,column_name,data_type from information_schema.columns;

   DECLARE EXIT HANDLER for SQLEXCEPTION set o_message := concat('Unexpected error while trying to find schema, table and column for value : ',i_value);
   declare continue handler for not found set bNoMoreRows := true; 

   open columns;

   set o_columns = "";

   COLUMN_LOOP: loop
    fetch columns
    into v_schema,v_table,v_column,v_data_type;

    if (
        (v_data_type in ('int','bigint','tinyint','decimal','smallint','mediumint')      and is_numeric=1)
     or (v_data_type not in ('int','bigint','tinyint','decimal','smallint','mediumint') and is_numeric=0)
       )
     then 

     SET @dyn_sql=CONCAT('select count(*) into @c from `',v_schema,'`.`',v_table,'` where `',v_column,'`=?');

     SET @c = 0;
     SET @v_value = i_value;
     PREPARE stmt FROM @dyn_sql;
     EXECUTE stmt using @v_value;
     DEALLOCATE PREPARE stmt; 

     SET v_count = @c;

     if v_count > 0 then

       if length(o_columns <= 1800) then 
        set o_columns = concat(o_columns,",",v_schema,".",v_table,".",v_column);
        end if;
     end if;
    end if;

     if bNoMoreRows then
      set o_columns = substring(o_columns,2);
      close columns;
     leave COLUMN_LOOP;
    end if;

   END loop COLUMN_LOOP;

 END FIND_IT;

END MAIN_BLOCK$$

DELIMITER ; 
```

**2.用你的值调用`find_column`存储过程**

```
call `find_column`('whatever',@columns,@message); 
```

**3.查看结果**

```
select @columns; 
```

is_numeric 位是对[JBB](https://stackoverflow.com/users/12332/jbb)[这篇文章](https://stackoverflow.com/questions/75704/how-do-i-check-to-see-if-a-value-is-an-integer-in-mysql)的回答的精心抄袭。

它并不完美（如果您的值存在的列数超过 10 左右会发生什么？如果是这种情况，那么这将只返回前 10 个左右的列（取决于 schema.table.column 名称的长度）字符串是）。

希望它能让你朝着正确的方向前进。

你是对的。你是数据库管理员会对你不满意。但是，如果您不时不时惹恼他们，那么恕我直言，您还不够努力；-)

祝你好运。

# html - 根据固定高度和宽度剪切文本

> ID：11907023
> 
> 赞同：3
> 
> 时间：2012-08-10T18:08:49.877
> 
> 标签：html, css, css-float

我想知道以下结构是否可行。

![在此处输入图像描述](../Images/aaf784c9c40fec0816c50a2be973e194.png)

这里我有一个固定宽度和高度的 div（外框）。我使它具有固定的宽度和高度，因为它是一个列表项，我希望它们是统一的。现在，我遇到了描述区域的问题。我希望它的文本可以换成多行，如果不合适，它会显示一个省略号。现在我打算严格设置字体大小和行高，以便在描述 div 中显示 2 行文本。它是否正确？我担心渲染会在某些浏览器上搞砸，并且设计可能非常脆弱。我也有点不确定如何使用纯 CSS 解决方案来实现省略号。我已经尝试过，`text-overflow: ellipsis`但无法让它正常工作。

老实说，我仍然不确定我是否走在正确的道路上。我在想这个结构可能已经有一个现有的/更好的解决方案。还有其他人这样做吗？任何帮助将不胜感激。谢谢。

**这是 JsFiddle 链接：**

[http://jsfiddle.net/3kJWQ/4/](http://jsfiddle.net/3kJWQ/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:29:46.140

这似乎有效：

```
.description {
  height: 60px;
  font-size: 14px;
  line-height: 21px;
  overflow: hidden;
  border: 1px solid #000;
  text-overflow: ellipsis;
  white-space: nowrap; 
```

}

来自：[http ://deepubalan.com/blog/2010/11/27/text-overflow-css3-property-explained-pure-css-solution-to-get-ellipsis/](http://deepubalan.com/blog/2010/11/27/text-overflow-css3-property-explained-pure-css-solution-to-get-ellipsis/)

> > 文本溢出：省略号仅在以下情况下起作用：
> > 
> > 1.  盒子有溢出而不是可见的。
> > 2.  盒子有空格：nowrap。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T14:11:34.613

我从这个问题中得到了解决方案：

[跨浏览器多行文本溢出，省略号附加在宽度和高度固定的 div 中？](https://stackoverflow.com/questions/3404508/cross-browsers-mult-lines-text-overflow-with-ellipsis-appended-within-a-widthhe)

我选择使用插件 jQuery dotdotdot。

# python - 覆盆子上的快速 gui

> ID：11907027
> 
> 赞同：3
> 
> 时间：2012-08-10T18:09:17.540
> 
> 标签：python, user-interface, raspberry-pi

我开始了一个项目，您可以在其中使用无线令牌（用于时间跟踪）在终端（基本上是带有触摸屏的 Raspberry Pi）上“登录”。

在屏幕（全屏）上显示状态（基本上是背景图片和 2-3 个文本根据令牌的状态而变化）的**最佳和最快的解决方案是什么？**我尝试了基于 web 的铬，它 - 非常 - 慢......

必须很容易进行**http 请求**和编码/解码**JSON** - 请不要使用 C/C++。也许python + wxwidgets？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T18:21:00.690

如果您想要简单/快速，并且您只关心 http、JSON 和显示图像，那么我会选择 Tkinter 和标准库。

您有`import json`JSON 和`httplib`/或`urrlib2`http 请求。对于全屏 Tkinter 小部件，请查看[effbot](http://www.effbot.org/zone/tkinter-toplevel-fullscreen.htm)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T18:20:08.773

只需使用标准库（python 2.7.3），您就可以轻松地使用 Python。

对于您可以使用的 GUI，`Tkinter`或者`Pygame (not standard library)`两者都支持图像和文本放置（以及全屏）。值得注意的是，`Tkinter`它不是线程安全的，因此如果您计划对该程序进行线程化，这可能是一个问题。

对于 http 请求，您可以使用`httplib`.

对于 Json 相关的东西，您可以使用该`json`库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-16T15:32:51.247

请试一试QT。它具有非常好的 GUI 工具，并支持它所需的 C++ 和原生性。我们使用QT搭建接口，部署树莓派等小型终端。它还允许您在启动时直接启动应用程序。这是一个链接：http: [//qt-project.org/wiki/Qt-RaspberryPi](http://qt-project.org/wiki/Qt-RaspberryPi)

# jquery - 如何从外部 html 中获取一段 html 并将其放在当前

> ID：11907028
> 
> 赞同：0
> 
> 时间：2012-08-10T18:09:20.940
> 
> 标签：jquery, input, get, external

这段代码工作得很好，但是如果我需要搜索的项目是另一种文件格式`.txt`怎么办？

如果我的搜索数据库变得非常大，可能会发生这种情况，所以我希望 jQuery 获取输入，在另一个文件中搜索它，如果 jQuery 找到它，则在当前页面上显示该 div。

这可能吗？

```
<script>
    $('#me').change(function() {
        $('div:contains('+ $.trim(this.value) + ')').css('color','red');
    });
</script> 
```

我在stackoverflow上找到了这个，但不知道如何让它们一起工作

```
var HTML_FILE_URL = '/whatever/html/file.html';
$(document).ready(function() {
    $.get(HTML_FILE_URL, function(data) {
        var fileDom = $(data);
        fileDom.find('h2').each(function() {
            alert($(this).text());
        }); 
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:29:24.930

试试这个：

```
$("#divWhereTheContentShouldBeWritten").load("path/externalFile"); 
```

# delegates - ImageMagick 不会将 Ghostscipt 显示为代表

> ID：11907029
> 
> 赞同：3
> 
> 时间：2012-08-10T18:09:26.290
> 
> 标签：delegates, osx-lion, imagemagick, ghostscript

试图让 ImageMagick 在 OSX Lion 中使用 MacPorts 与 Ghostscript 交谈，但它没有。曾经在 Snow Leopard 下运行良好，但在迁移助手期间出现了问题。

无论如何，已经卸载了所有的 Mac 端口，现在正在尝试使用[Homebrew](https://brew.sh/)

安装了 Homebrew，安装了 ImageMagick，然后安装了 ghostscript。Imagemagick 工作正常（使用 php 图像脚本和 MAMP），但 Ghostscript 没有将 PDF 转换为 jpg。我可以看到，'gs' 没有被列为 Imagemagick 的代表。

以下是一些相关的终端转储：

```
转换列表委托

路径：/usr/local/Cellar/imagemagick/6.7.7-6/etc/ImageMagick/delegates.xml

委托命令
-------------------------------------------------- -----------------------------------------
    blender => "blender" -b "%i" -F PNG -o "%o""\n"convert" -concatenate "%o*.png" "%o"
        cdr => "uniconvertor" "%i" "%o.svg"; mv "%o.svg" "%o"
        cgm => "ralcgm" -d ps -oC "%o" 2> "%Z"
        dng:decode => "ufraw-batch" --silent --create-id=also --out-type=png --out-depth=16 "--output=%u.png" "%i"
        dvi => "dvips" -q -o "%o" "%i"
        epsps "gs" -q -dQUIET -dSAFER -dBATCH -dNOPAUSE -dNOPROMPT -dMaxBitmap=500000000 -dAlignToPixels=0 -dGridFitTT=2 "-sDEVICE=pswrite" "-sOutputFile=%o" "-f%i"
        epspdf "gs" -q -dQUIET -dSAFER -dBATCH -dNOPAUSE -dNOPROMPT -dMaxBitmap=500000000 "-sDEVICE=pdfwrite" "-sOutputFile=%o" "-f%i"
        fig => "fig2dev" -L ps "%i" "%o"
        hpg => "hp2xx" -q -m eps -f `basename "%o"` "%i"; mv -f `basename "%o"` "%o"
       hpgl => "如果 [ -e hp2xx -o -e /usr/bin/hp2xx ]; 然后 hp2xx -q -m eps -f `basename "%o"` "%i"; mv -f `basename "%o "` "%o"; else echo "您需要安装 hp2xx 才能将 HPGL 文件与 ImageMagick 一起使用。"; exit 1; fi"
        htm => "html2ps" -U -o "%o" "%i"
       html => "html2ps" -U -o "%o" "%i"
      https => "卷曲" -s -k -o "%o" "https:%M"
       ilbm => "ilbmtoppm" "%i" > "%o"
        man => "groff" -man -Tps "%i" > "%o"
       miff "ffmpeg" -v -1 -i "%i" -vframes %S -vcodec pam -an -f rawvideo -y "%u.pam" 2> "%Z"
        pdfeps "gs" -q -dQUIET -dSAFER -dBATCH -dNOPAUSE -dNOPROMPT -dMaxBitmap=500000000 -dAlignToPixels=0 -dGridFitTT=2 "-sDEVICE=epswrite" "-sOutputFile=%o" "-f%i"
        pdfps "gs" -q -dQUIET -dSAFER -dBATCH -dNOPAUSE -dNOPROMPT -dMaxBitmap=500000000 -dAlignToPixels=0 -dGridFitTT=2 "-sDEVICE=pswrite" "-sOutputFile=%o" "-f%i"
        plt => "echo" "set size 1.25,0.62; set terminal postscript Portrait color solid; set output \'%o\'; load \'%i\'" > "%u";"gnuplot" "%u"
        pnm "%o"
        pov => "povray" "+i%i" -D0 "+o%o" +fn%q +w%w +h%h +a -q9 "-kfi%s" "-kff%n";"转换”-连接“%o*.png”“%o”
         pseps "gs" -q -dQUIET -dSAFER -dBATCH -dNOPAUSE -dNOPROMPT -dMaxBitmap=500000000 -dAlignToPixels=0 -dGridFitTT=2 "-sDEVICE=epswrite" "-sOutputFile=%o" "-f%i"
         pspdf "gs" -q -dQUIET -dSAFER -dBATCH -dNOPAUSE -dNOPROMPT -dMaxBitmap=500000000 -dAlignToPixels=0 -dGridFitTT=2 "-sDEVICE=pdfwrite" "-sOutputFile=%o" "-f%i"
       rgba "scanimage" -d "%i" > "%o"
      scanx =>“扫描图像”>“%o”
      shtml => "html2ps" -U -o "%o" "%i"
        sid => "mrsidgeodecode" -if sid -i "%i" -of tif -o "%o" > "%u"
        svg => "rsvg-convert" -o "%o" "%i"
       tiffps "enscript" -o "%o" "%i"
        wmf => "wmf2eps" -o "%o" "%i"
    doms-imac:~ dom$ 转换列表委托 | grep --color -E '(eps|pdf)'
        epsps "gs" -q -dQUIET -dSAFER -dBATCH -dNOPAUSE -dNOPROMPT -dMaxBitmap=500000000 -dAlignToPixels=0 -dGridFitTT=2 "-sDEVICE=pswrite" "-sOutputFile=%o" "-f%i"
        epspdf "gs" -q -dQUIET -dSAFER -dBATCH -dNOPAUSE -dNOPROMPT -dMaxBitmap=500000000 "-sDEVICE=pdfwrite" "-sOutputFile=%o" "-f%i"
        hpg => "hp2xx" -q -m eps -f `basename "%o"` "%i"; mv -f `basename "%o"` "%o"
       hpgl => "如果 [ -e hp2xx -o -e /usr/bin/hp2xx ]; 然后 hp2xx -q -m eps -f `basename "%o"` "%i"; mv -f `basename "%o "` "%o"; else echo "您需要安装 hp2xx 才能将 HPGL 文件与 ImageMagick 一起使用。"; exit 1; fi"
        pdfeps "gs" -q -dQUIET -dSAFER -dBATCH -dNOPAUSE -dNOPROMPT -dMaxBitmap=500000000 -dAlignToPixels=0 -dGridFitTT=2 "-sDEVICE=epswrite" "-sOutputFile=%o" "-f%i"
        pdfps "gs" -q -dQUIET -dSAFER -dBATCH -dNOPAUSE -dNOPROMPT -dMaxBitmap=500000000 -dAlignToPixels=0 -dGridFitTT=2 "-sDEVICE=pswrite" "-sOutputFile=%o" "-f%i"
         pseps "gs" -q -dQUIET -dSAFER -dBATCH -dNOPAUSE -dNOPROMPT -dMaxBitmap=500000000 -dAlignToPixels=0 -dGridFitTT=2 "-sDEVICE=epswrite" "-sOutputFile=%o" "-f%i"
         pspdf "gs" -q -dQUIET -dSAFER -dBATCH -dNOPAUSE -dNOPROMPT -dMaxBitmap=500000000 -dAlignToPixels=0 -dGridFitTT=2 "-sDEVICE=pdfwrite" "-sOutputFile=%o" "-f%i"
        wmf => "wmf2eps" -o "%o" "%i"

转换列表配置

    路径：/usr/local/Cellar/imagemagick/6.7.7-6/lib/ImageMagick/config/configure.xml

    名称 值
    -------------------------------------------------- -----------------------------------------
    抄送 /usr/bin/clang
    CFLAGS -D_THREAD_SAFE -D_THREAD_SAFE -pthread -Os -w -pipe -march=native -Qunused-arguments -mmacosx-version-min=10.7 -Wall -D_THREAD_SAFE -pthread
    CODER_PATH /usr/local/Cellar/imagemagick/6.7.7-6/lib/ImageMagick/modules-Q16/coders
    配置 ./configure '--disable-osx-universal-binary' '--without-perl' '--prefix=/usr/local/Cellar/imagemagick/6.7.7-6' '--disable-dependency-tracking ' '--enable-shared' '--disable-static' '--with-modules' '--without-magick-plus-plus' 'CC=/usr/bin/clang' 'CFLAGS=-Os -w -pipe -march=native -Qunused-arguments -mmacosx-version-min=10.7' 'LDFLAGS=-L/usr/local/Cellar/gettext/0.18.1.1/lib -L/usr/local/lib -L/usr /X11/lib' 'CPPFLAGS=-I/usr/local/Cellar/gettext/0.18.1.1/include -isystem /usr/local/include -I/usr/X11/include' 'CXX=/usr/bin/clang++ ''CXXFLAGS=-Os -w -pipe -march=native -Qunused-arguments -mmacosx-version-min=10.7'
    CONFIGURE_PATH /usr/local/Cellar/imagemagick/6.7.7-6/etc/ImageMagick/
    版权所有 (C) 1999-2012 ImageMagick Studio LLC
    CPPFLAGS -I/usr/local/Cellar/imagemagick/6.7.7-6/include/ImageMagick
    CXX /usr/bin/clang++
    CXXFLAGS -Os -w -pipe -march=native -Qunused-arguments -mmacosx-version-min=10.7 -D_THREAD_SAFE -pthread
    DEFS -DHAVE_CONFIG_H
    代表 bzlib fontconfig freetype jpeg jng jp2 lcms2 png tiff x11 xml zlib
    DISTCHECK_CONFIG_FLAGS 'CC=/usr/bin/clang' 'CFLAGS=-Os -w -pipe -march=native -Qunused-arguments -mmacosx-version-min=10.7' 'CPPFLAGS=-I/usr/local/Cellar/gettext /0.18.1.1/include -isystem /usr/local/include -I/usr/X11/include' 'CXX=/usr/bin/clang++' 'LDFLAGS=-L/usr/local/Cellar/gettext/0.18.1.1 /lib -L/usr/local/lib -L/usr/X11/lib' --disable-deprecated --with-quantum-depth=16 --with-umem=no --with-autotrace=no --with -gslib=no --with-fontpath= --with-wmf=no --with-perl=no
    DOCUMENTATION_PATH /usr/local/Cellar/imagemagick/6.7.7-6/share/doc/ImageMagick
    执行前缀 /usr/local/Cellar/imagemagick/6.7.7-6
    EXECUTABLE_PATH /usr/local/Cellar/imagemagick/6.7.7-6/bin
    特点 OpenCL
    FILTER_PATH /usr/local/Cellar/imagemagick/6.7.7-6/lib/ImageMagick/modules-Q16/filters
    主机 x86_64-apple-darwin11.4.0
    INCLUDE_PATH /usr/local/Cellar/imagemagick/6.7.7-6/include/ImageMagick
    LDFLAGS -L/usr/local/Cellar/imagemagick/6.7.7-6/lib -L/usr/local/Cellar/gettext/0.18.1.1/lib -L/usr/local/lib -L/usr/X11/库 -L/usr/X11/lib
    LIB_VERSION 0x677
    LIB_VERSION_NUMBER 6,7,7,6
    LIBRARY_PATH /usr/local/Cellar/imagemagick/6.7.7-6/lib/ImageMagick
    LIBS -lMagickCore -llcms2 -ltiff -lfreetype -ljpeg -L/usr/X11/lib -lfontconfig -lXext -lSM -lICE -lX11 -lXt -lbz2 -lz -lm -Wl,-framework,OpenCL -lm -lpthread -lltdl
    名称 ImageMagick
    PCFLAGS       
    前缀 /usr/local/Cellar/imagemagick/6.7.7-6
    量子深度 16
    发布日期 2012-08-08
    SHARE_PATH /usr/local/Cellar/imagemagick/6.7.7-6/share/ImageMagick
    SVN_REVISION 8165
    TARGET_CPU x86_64
    TARGET_OS darwin11.4.0
    TARGET_VENDOR 苹果
    版本 6.7.7
    网站 http://www.imagemagick.org

```

如何强制 Ghostscript 被 ImageMagick 视为代表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T18:59:54.590

Well, in your listing coming from `convert -list delegate` there are the following six lines:

```
eps<=>ps     "gs" -q -dQUIET -dSAFER -dBATCH -dNOPAUSE -dNOPROMPT -dMaxBitmap=500000000 -dAlignToPixels=0 -dGridFitTT=2 "-sDEVICE=pswrite" "-sOutputFile=%o" "-f%i"
eps<=>pdf    "gs" -q -dQUIET -dSAFER -dBATCH -dNOPAUSE -dNOPROMPT -dMaxBitmap=500000000 "-sDEVICE=pdfwrite" "-sOutputFile=%o" "-f%i"
pdf<=>eps    "gs" -q -dQUIET -dSAFER -dBATCH -dNOPAUSE -dNOPROMPT -dMaxBitmap=500000000 -dAlignToPixels=0 -dGridFitTT=2 "-sDEVICE=epswrite" "-sOutputFile=%o" "-f%i"
pdf<=>ps     "gs" -q -dQUIET -dSAFER -dBATCH -dNOPAUSE -dNOPROMPT -dMaxBitmap=500000000 -dAlignToPixels=0 -dGridFitTT=2 "-sDEVICE=pswrite" "-sOutputFile=%o" "-f%i"
 ps<=>eps    "gs" -q -dQUIET -dSAFER -dBATCH -dNOPAUSE -dNOPROMPT -dMaxBitmap=500000000 -dAlignToPixels=0 -dGridFitTT=2 "-sDEVICE=epswrite" "-sOutputFile=%o" "-f%i"
 ps<=>pdf    "gs" -q -dQUIET -dSAFER -dBATCH -dNOPAUSE -dNOPROMPT -dMaxBitmap=500000000 -dAlignToPixels=0 -dGridFitTT=2 "-sDEVICE=pdfwrite" "-sOutputFile=%o" "-f%i" 
```

They all **do** mention `"gs"`...

However, you say you first installed ImageMagick and only *then* Ghostscript.

So ImageMagick could not find any Ghostscript during compile time, that's why it doesn't appear in `convert -list configure | grep DELEG`....

You should try and install in reverse order: **first** Ghostscript, then ImageMagick....

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-14T20:04:42.420

**tl;博士**

对于后来者，这是@Kurt Pfeifle 的回答+评论部分的简短版本。赶紧跑

```
brew update \
 && brew reinstall ghostscript \
 && brew reinstall imagemagick --with-ghostscript 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T14:07:00.777

您的系统上是否安装了多个 ImageMagick's convert（可能是因为您的 MacPorts 安装没有完全删除）？要找出答案，请运行以下命令行（使用 Spotlight 搜索）：

```
mdfind convert 2>&1 | grep convert 
```

使用来自这些命令的完整信息更新您的问题：

```
which convert
convert -list configure
convert -version
otool -L $(which convert)
which gsx
which gsc
which gs
gs -version
otool -L $(which gs) 
```

# c - 这个 printf 是什么意思？

> ID：11907030
> 
> 赞同：0
> 
> 时间：2012-08-10T18:09:46.210
> 
> 标签：c, printf

```
printf("%c","abcdefgh"[4]); 
```

以下程序的输出是`e`. 但是不知道怎么样？我在谷歌和这里搜索了很多，但没有找到该代码的正确解释。我得到的这段代码的解释：

> “这只是为了得到一个`char`。即第4个`char`从.开始`0`。所以答案是`'e'`“。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T18:11:27.567

字符串文字是数组，因此可以索引到：`"abcdefgh"[0]`is `'a'`，例如。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T18:12:48.827

你可以这样写：

```
char *tmp="abcdefgh";
printf("%c",tmp[4]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T18:13:07.537

```
printf("%c","abcdefgh"[4]); 
```

格式字符串为`"%c"`，表示`printf`应打印一个字符。它应该打印的字符是

```
"abcdefgh"[4] 
```

即 的索引`4`处的字符`char[9]` `"abcdefgh"`，即字符`'e'`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T18:13:13.763

在 C 中，字符串表示为数组，因此此语句

```
printf("%c","abcdefgh"[4]); 
```

相当于

```
char a[] = "abcdefgh";
printf("%c",a[4]); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-10T18:14:45.910

`%c`打印一个字符。所以解释为什么你得到“e”，因为输出`a`有索引 0，`b`有索引 1，`c`有索引 2，`d`有索引 3，最后`e`有索引 4。这是你选择打印的 ( `[4]`)。这就是为什么“e”是输出。

# f# - 使用 FSharp PowerPack 中的某些方法并编译到类库时出现 System.MissingMethodException

> ID：11907032
> 
> 赞同：8
> 
> 时间：2012-08-10T18:09:58.610
> 
> 标签：f#, missingmethodexception, f#-powerpack

所以我刚刚开始使用 F#，我遇到了一个非常奇怪的问题，当使用 FSharp PowerPack 中的某些方法时，我得到了 System.MissingMethodException。

同一模块中的所有方法都不会发生这种情况。如果我将程序集编译为应用程序而不是类库，也不会发生这种情况。

复制步骤：

1.  创建 2 个程序集，一个类库和一个应用程序。
2.  添加 nunit.framework 和 FSharp.PowerPack DLL 作为对这两个程序集的引用。
3.  在每个程序集中创建以下测试夹具。

    ```
    open NUnit.Framework

    [<TestFixture>]
    type Tests() = class

        [<Test>]
        member self.OfSeq() =
            // Will always succeed
            Matrix.Generic.ofSeq [[1]] |> ignore

        [<Test>]
        member self.OfList() =
            // Will fail under certain conditions with a System.MissingMethodException
            Matrix.Generic.ofList [[1]] |> ignore
    end 
    ```

4.  编译这两个程序集。
5.  在 NUnit 中打开每个程序集并运行所有测试。

当我这样做时，应用程序运行得很好（所有测试都通过），但类库失败并出现以下异常：

```
System.MissingMethodException : Method not found: 'Microsoft.FSharp.Math.Matrix`1<!!0> Generic.ofList(Microsoft.FSharp.Collections.FSharpList`1<Microsoft.FSharp.Collections.FSharpList`1<!!0>>)'.
   at Temp2.Tests.OfList() 
```

这里发生了什么？

产生此问题的另一种方法是 matrix.PermuteColumns。

附加信息：

*   我正在为 .NET 4.5 编译两个程序集
*   我正在使用 Visual Studio 2012 RC 进行编译
*   我正在使用 NUnit 版本 2.5.10.11092
*   我正在使用 FSharp PowerPack 版本 2.1.3.1（尽管 DLL 属性声明它是 2.0.0）

让我知道是否有其他有用的信息。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-27T18:38:20.347

（答案以供将来参考，因为此 Q 是搜索的第一个命中。）

*使用 Visual Studio 2013*和 Brian 引用的“F# MSTest”在线项目模板，Brian 的建议都没有帮助（首先，测试的目标是一个没有`App.Config`.

但是我最终发现测试项目设置为使用 F#3 运行时（使用 FSharp.Core V4.3.0.0）。将此更改为 F# v3.1 (FSharp.Core V4.3.1.0) 解决了该问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T18:20:49.897

我想知道这是否与绑定重定向有关。您可能需要将应用程序项目中的 app.config 复制到库项目中。

这听起来类似于我目前正在为 F# 团队博客（可能会在接下来的几周内出现）写一篇关于 MSTest 而不是 NUnit 的已知问题。我会尝试将 app.config 复制到库项目中，如果这不起作用，则在此处使用在线模板进行单元测试：

[http://visualstudiogallery.msdn.microsoft.com/51ebe64a-899b-4959-8c24-b0148ed6b264](http://visualstudiogallery.msdn.microsoft.com/51ebe64a-899b-4959-8c24-b0148ed6b264)

并另外从 VS 的菜单中选择“TEST\Test Settings\Select Test Settings File”，并将其指向单元测试项目模板中包含的“MSTest.runsettings”文件。我希望这两个调整之一将在 MSTest 案例中修复它。

# ios - Xcode - 重复的故事板场景

> ID：11907036
> 
> 赞同：56
> 
> 时间：2012-08-10T18:10:32.510
> 
> 标签：ios, xcode, uistoryboard

有没有一种快速的方法可以在 Xcode 的故事板编辑器中复制场景？

我正在寻找类似于使用选项拖动`UIButton`在场景（或 nib 文件）中复制 UI 元素（等）的东西。复制粘贴有效，但很尴尬。

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-08-16T17:11:46.800

我现在只使用`Command`+ `D`（复制），因为它（AFAIK）本质上是一步复制粘贴，并处理错误。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-06-28T04:00:47.873

如果您使用 ALT 键拖动视图，则可以复制视图。它很快

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-06-18T12:25:42.310

选择要复制的 ViewController。按`Command+C`（复制）然后`Command+V`（粘贴）。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-01-23T19:49:41.937

新命令是`Shift+Command+S`. 您也可以选择单击`File`，然后单击`Duplicate`。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-08-11T05:18:41.900

您可以通过选择整个视图轻松复制视图（或场景），然后复制和粘贴。

要复制和粘贴 UI 元素，请选择要复制的元素，然后将其复制并粘贴**到原始视图**中。然后将新粘贴的元素拖到新视图中。一切都基于鼠标。

# c# - 会话访问和异步回调

> ID：11907037
> 
> 赞同：1
> 
> 时间：2012-08-10T18:10:35.550
> 
> 标签：c#, asp.net-mvc, session, asynchronous, delegates

好的，所以我在网站的登录页面上进行了一堆异步 Web 服务调用。我想将这些调用的结果设置为会话，以便以后可以使用它们，但我不能，因为`HttpContext.Current`在回调中为 null。基本上，我想做这样的事情：

```
public ActionResult Something()
{
    GetLoans();              //each of these is async
    GetPartInfo();           //and sets its result to session
    GetOtherAsyncStuff();    //(or at least it needs to)
    //lots of other stuff
    Return View();
} 
```

哪里`GetLoans()`看起来像这样：

```
public IAsyncResult GetLoans()
{
    IAsyncResult _ar;
    GetLoansDelegate d_Loans = new GetLoansDelegate(GetLoansAsync);
    _ar = d_Loans.BeginInvoke(parameter1,parameter2, GetLoansCallback, new object()); //new object() is just a placeholder for the real parameters im putting there
    return _ar;
} 
```

其中异步调用`GetLoansAsync`，其回调为`GetLoansCallback()`，如下所示：

```
private void GetLoansCallback(IAsyncResult ar)
{
    AsyncResult result = (AsyncResult)ar;
    GetLoansDelegate caller = (GetLoansDelegate)result.AsyncDelegate;
    List<Loan> loans = caller.EndInvoke(ar);

    Session["Loans"] = loans;   //this call blows up, since HttpContext.Current is null
} 
```

我无法实现自定义会话提供程序，所以我必须坚持我所拥有的。就目前而言，我无法在异步回调中为会话设置任何内容。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:24:53.023

你可以看看这篇[博文](https://web.archive.org/web/20120331172304/http://blogs.msdn.com/b/tmarq/archive/2010/04/14/performing-asynchronous-work-or-tasks-in-asp-net-applications.aspx)。

基本上，它表示`HttpContext`在工作完成时（即在回调中）不可用，看起来您必须将会话操作移到`GetLoansAsync`方法中。

# jquery - oracles更新数据库后的ajax加载

> ID：11907039
> 
> 赞同：1
> 
> 时间：2012-08-10T18:10:45.003
> 
> 标签：jquery, oracle, coldfusion

我有一个显示“项目”属性的表单。用户可以选择将文件/附件上传到该“项目”。目前，在具有“测试”类的 div 中显示该项目的现有附件。用户使用“附加”按钮将文件附加到他们要更新的项目。在使用“更新”按钮单击事件（这是我想要的）提交表单之前，这些文件永远不会真正附加。表单提交是一个 ajax 提交到 iframe。我想使用 jquery 将包含查询的coldfusion页面加载到我的“测试”div中，以查找当前附加的项目。我最初的方法是在表单提交后使用 jquery 的加载功能：

```
//In the JS file, the selected item is used in the CF query
form.submit();
$('.testing').load('itemAttachments.cfm?itemID=' + selectedItem); 
```

我知道我的coldufusion 查询有效，因为它是“测试” div 中的cfinclude，并且页面最初加载了正确的信息。在表单提交上，jquery 加载返回 cf 页面，但具有相同的数据，而不是列出的新附件。当我刷新页面时，数据会正确显示（即列出的新附件）。这使我相信一切正常，但是在 Oracle 可以处理查询之前就发生了 jquery 负载。

这个对吗？如果是这样，我该如何解决这个问题？谢谢。

**编辑** 表单提交到带有隐藏 iframe 的目标。问题是表单提交和 jquery .load() 都使用相同的页面 itemAttachments。但是 jquery load() 在表单提交之前首先获取结果，即使 .load 在代码中的表单提交之后也是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T10:42:28.060

这个使用 iframe 的技巧给你 2 个并行请求，也许 .load 会赢得比赛。如果您已经在使用 jquery，我建议您也应该使用 jquery 发布并执行加载（甚至只使用 ajax 响应）。

如果您出于某种原因必须使用 iframe hack，那么您需要将事件附加到 iframe。例如，您可以在 iframe 重新加载时启动它：

```
$('#iframe').load(function(evt){
  //do some checks
  $('.testing').load('itemAttachments.cfm?itemID=' + selectedItem);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:47:13.510

我将 jquery 加载的脚本添加到了冷融合处理页面。我给了它一个 window.parent.document 的范围，即：

```
<SCRIPT LANGUAGE="JAVASCRIPT">
    $(document).ready(function(){
        $('.testing', window.parent.document).load('processForm.cfm?itemID=' + <cfoutput>#itemID#</cfoutput);
    });
</SCRIPT> 
```

这行得通。

# mysql - MySQL 找到无效的外键

> ID：11907051
> 
> 赞同：19
> 
> 时间：2012-08-10T18:12:02.593
> 
> 标签：mysql, foreign-keys

我们有一个包含几百个表的数据库。使用 foreign_keys 的表使用 INNODB。

`mysqldump`有时我们在开发、阶段和生产数据库之间传输数据（使用 的单个表）。`mysqldump`禁用所有外键检查以方便导入数据。

因此，随着时间的推移，我们的一些非生产数据库最终会出现一些孤立记录。

我正要编写一个脚本来查找和检测整个 MySQL 数据库的任何无效（指向丢失记录的键）外键。

我知道我可以编写一个查询来逐个检查每个表和 fkey，但我想可能已经有一个工具可以做到这一点。

我会在编写这样的脚本之前检查一下是否已经有一个。

谷歌搜索了一下......令人惊讶的是我什么也没找到。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-10T18:19:19.337

如果数据已经存在并且您没有设置 fk 约束或级联来删除父级，那么您只需要：

```
SELECT * FROM children WHERE my_fk_id NOT IN (select id from parents); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-17T21:31:46.980

这些其他答案对于小表来说很好，但我认为它们在 O(n^2) 中运行，这对于大型数据库可能并不理想。相反，我使用了左连接：

```
SELECT * FROM children c LEFT JOIN parents p ON p.id=c.parent_id WHERE p.id IS NULL AND c.parent_id IS NOT NULL; 
```

请注意，您可能不需要最后一个非空条件，我这样做是因为我想排除没有父母的孩子（在我的特定场景中是一个有效案例）

# javascript - 如何在不删除整个页面的情况下使用 javascript 在我的 html 中添加内容

> ID：11907053
> 
> 赞同：4
> 
> 时间：2012-08-10T18:12:10.357
> 
> 标签：javascript, html, document.write

我有一个小计算器，要添加到我的 html 中。它有几个下拉菜单来选择东西，当一个人点击提交按钮时，我想在我的 html 中的计算器下方显示一张图片。我尝试使用带有以下内容的javascript函数： document.write() 但这会清除整个页面。有没有办法让我运行一个 javascript 函数，它只在单击提交按钮时向我的页面添加图片？

这是我遇到问题的部分代码的基本大纲：

```
<html>

<head>
<script type="text/javascript">

function calc_rate() {

    //code that displays a message after the submit button is hit        
    document.write("answer");
}

</script>

</head>
<body>

<table>

<tr>
    <td class=rate_calc_label>Select Your Option Type:</td>
<td><select name="type1">
    <option></option>
    <option>1</option>
    <option>2</option>
    <option>3</option>
    </select></td>
</tr>  

<tr>
<td class=rate_calc_label>Select The Second Number:</td>
<td><select name="type2">
    <option>1</option>
    <option>2</option>
    <option>3</option>
    <option>4</option>
    <option>5</option>
    <option>6</option>
    <option>7</option>
    <option>8</option>
    <option>9</option>
    <option>9</option>
    <option>10</option>
    <option>11</option>
    <option>12</option>
    </select></td>
</tr>

<tr>
<td><input type="submit" value="Submit" name="calc_button" onclick="calc_rate()"/></td>
<td></td>
</tr>    

</table>

</body>
</html> 
```

是否可以使用某种内部 HTML？这就是我在stockoverflow上从其他人那里得到的，但我还是有点困惑

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-10T18:16:46.033

您的输出需要一个占位符元素。然后为该元素设置innerHTML：

```
<div id='answer'></div> 
```

然后：

```
document.getElementById('answer').innerHTML = "answer is:" + yourdata 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T18:15:02.117

不要使用 document.write，句号。使用 DOM 操作：[http ://www.quirksmode.org/dom/intro.html](http://www.quirksmode.org/dom/intro.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T18:15:15.253

而不是`document.write()`您可以设置`innerHTML`任何 DOM 节点的属性来向页面添加文本。

假设您将 a 添加`<div id='result'></div>`到页面末尾（在 body 标记之前）。然后在你的javascript中有：

```
var result_display = document.getElementById('result');
// and in calc_rate():
result_display.innerHTML = "answer"; 
```

请注意，这将始终重置 result_display 的文本。您还可以将该操作包装在一个函数中：

```
function displayResult(result){
    result_display.innerHTML = '<h2>' + result + '</h2>'; // or whatever formatting
} 
```

# windows-8 - 强制 WinRT 应用程序捕捉视图

> ID：11907058
> 
> 赞同：0
> 
> 时间：2012-08-10T18:12:38.670
> 
> 标签：windows-8, microsoft-metro, windows-runtime

对于我的一个应用程序，我想在点击按钮后将应用程序发送到快照视图。据我所知，没有可用于将正在运行的应用程序发送到快照视图的公共 API。有没有人找到解决方法来做到这一点？

不知何故，这应该是可能的，因为您可以在 Windows 8 本身中执行此操作，并捕捉其中一个正在运行的应用程序。

![在此处输入图像描述](../Images/491b8543a011535717c077fb2d150a67.png)

更新：能够触发 Win+。可能会做同样的事情，但在 WinRT 中也没有[SendKeys API。](http://msdn.microsoft.com/en-us/library/ms171548%28v=vs.110%29.aspx)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T18:52:14.510

无法强制应用程序进入快照模式 - 它必须是用户启动的操作。

应用程序可以通过以下方式请求取消*快照*：

```
Windows.UI.ViewManagement.ApplicationView.TryUnsnap(); 
```

它试图将应用程序推入填充模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-26T23:42:36.947

Windows 10 有一个[ApplicationView.TryResizeView](https://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.viewmanagement.applicationview.tryresizeview)方法

所以……总结一下有趣的 WinRT 之旅：

### **视窗 8**

具有只有用户才能启动的“捕捉”模式。开发人员可以尝试使用 TryUnsnap 方法取消捕捉

### **视窗 8.1**

没有 Snapped 模式，不推荐使用 TryUnsnap。开发人员仍然可以监听窗口大小的变化，并知道应用程序视图是否像以前一样小。

### **视窗 10**

引入了[ApplicationView.TryResizeView](https://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.viewmanagement.applicationview.tryresizeview)方法，开发者可以在其中*尝试*调整大小。窗口大小更改事件仍然存在。

```
ApplicationView.GetForCurrentView().TryResizeView(new size(width, height))); 
```

# c++ - C++ 向量未更新

> ID：11907062
> 
> 赞同：0
> 
> 时间：2012-08-10T18:13:03.387
> 
> 标签：c++, sorting, vector

```
void sortVector(vector<simEvent>& eventVector){

    simEvent temp = eventVector.at(0);
    vector<simEvent> tempVector;
    tempVector.clear();
    int index = 0;

    while(!eventVector.empty()){
        for(int i=0; i<eventVector.size(); i++){
            if(temp.getTimeOfEvent() > eventVector.at(i).getTimeOfEvent()){
                temp = eventVector.at(i);
                index = i;
            }
        }
        eventVector.erase(eventVector.begin()+index);
        tempVector.push_back(temp);
    }

    for(int i=0; i<tempVector.size(); i++){
        cout << "Time: " << tempVector.at(i).getTimeOfEvent() << endl;
    }

} 
```

当我打印 tempVector 时，所有时间都是相同的。我到处寻找答案，似乎找不到任何东西。有人可以看看吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:20:15.963

您永远不会重置`temp`循环中的值。第一遍之后，它等于数组中的最大元素；在随后的每一次传递中，它仍然是最大的，所以它不会改变。

# c#-4.0 - 如何在 C# 中创建对象的多维数组

> ID：11907069
> 
> 赞同：3
> 
> 时间：2012-08-10T18:14:01.067
> 
> 标签：c#-4.0, object, multidimensional-array, xna-4.0

我正在尝试制作一个脚本，通过制作高度图然后从那里填写地形块来动态生成世界块。我的问题是创建一个二维对象数组。

```
public class Chunk
{
    public Block[,] blocks;

    Generate(){
        //code that makes a height map as a 2 dimensional array as hightmap[x,y]=z
        //convert heightmap to blocks
        for (int hmX = 0; hmX < size; hmX++)
        {
            for (int hmY = 0; hmY < size; hmY++)
            {
                blocks[hmX, hmY] = new Block(hmX, hmY, heightmap.Heights[hmX, hmY], 1);
            }
        }
    }
} 
```

这给了我错误：

> NullReferenceException 未处理，对象引用未设置为对象的实例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T18:16:09.767

您只需要在循环之前添加 new ：

```
Block[,] blocks = new Block[size,size]; 
```

或者更确切地说，在生成函数中（其他都一样）：

```
blocks = new Block[size,size]; 
```

否则，您将隐藏原始的“块”变量。

# java - 在 Java 中创建包含随机字节的 2GB 文件的最快方法是什么？

> ID：11907071
> 
> 赞同：5
> 
> 时间：2012-08-10T18:14:17.550
> 
> 标签：java, random, byte, bit

我想要一种在 Java 中生成包含随机位的文件的方法。什么会最快地创建随机文件？我想创建包含随机位的任何指定大小的文件。我希望能够在几分钟内生成一个 2GB 的文件（如果可能的话，不到一分钟）。我现在使用的技术需要几个小时才能完成 2GB：

```
...
private static Random r = new Random();

private static int rand(int lo, int hi) {
    int n = hi - lo + 1;
    int i = r.nextInt() % n;
    if (i < 0) {
        i = -i;
    }
    return lo + i;
}
...
fos = new FileOutputStream(hdFiller);
for(long i = 0; i < maxFileSize; i++) {
    int idx = rand(0,32);
    fos.write(idx);
}
fos.close();
... 
```

必须有一种方法可以更快地做到这一点，甚至可能在不到一分钟的时间内完成 2GB。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T18:24:18.910

如果您想一次生成所有随机位，而不是循环，请查看[java.util.Random 方法 nextBytes(byte[])](http://docs.oracle.com/javase/6/docs/api/java/util/Random.html#nextBytes%28byte[]%29)，它用随机字节填充指定的字节数组。创建一个足以容纳 2GiB 数据的字节数组，您可以一次性生成整个随机位源。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T18:21:12.987

尝试使用 BufferedOutputStream 包装您的 FileOutputStream。

# php - Zend Framework - 如何正确设置包含路径？

> ID：11907076
> 
> 赞同：0
> 
> 时间：2012-08-10T18:14:58.263
> 
> 标签：php, zend-framework, apache2

我正在尝试安装显然是使用 Zend Framework 编写的 TheStudio 应用程序。我的测试服务器正在运行 Ubuntu 12.04，我的应用程序目录存储在 /home

我的错误日志说明

```
PHP Fatal error:  require_once(): Failed opening required 'usr/share/php/libzend-frameworkphp/Zend/Loader/Autoloader.php'   
  (include_path='.:../library:../application/db:../application/models:../application/utils:../application/views/helpers:../application') in /home/application/config/config.php on line 22 
```

config.php 的第 22 行状态：

```
require_once '/usr/share/php/libzend-framework-php/Zend/Loader/Autoloader.php'; 
```

包含路径如下：

```
define('PS',        PATH_SEPARATOR);
define('DS',        DIRECTORY_SEPARATOR);
define('ROOT_DIR',  dirname('home'));

// Modify include path
$paths = '.' . PS . '..' . DS . 'library'
         . PS . '..' . DS . 'application' . DS . 'db'
         . PS . '..' . DS . 'application' . DS . 'models'
         . PS . '..' . DS . 'application' . DS . 'utils'
         . PS . '..' . DS . 'application' . DS . 'views' . DS . 'helpers'
         . PS . '..' . DS . 'application';
ini_set("include_path", $paths); 
```

我应该如何修改路径语句以定位 /home 目录中的文件？为了解决上述错误，是否应该进行其他调整？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T22:07:50.067

`/usr/share/php/libzend-frameworkphp`是 Zend Framework Ubuntu 包的默认安装路径，所以这个应用程序似乎假设它会在那里。`sudo apt-get install zend-framework`应该解决这个问题。

我会说在`require_once`调用中包含完整路径是不好的做法，并且在您的第三个代码示例中定义了太多包含路径（我假设它来自应用程序？）。

# javascript - 如何在样式元素中获取 CSS 代码？

> ID：11907086
> 
> 赞同：0
> 
> 时间：2012-08-10T18:15:28.537
> 
> 标签：javascript, css, dom

> **可能重复：**
> [如何在运行时更改/删除 CSS 类定义？](https://stackoverflow.com/questions/730048/how-to-change-remove-css-classes-definitions-at-runtime)

```
<!DOCTYPE html>
<meta charset="utf-8">
<title>An HTML5 Document</title>
<style>
    body {
        background: red;
    }
</style> 
```

如何`style`通过 JS 获取元素中的 CSS 代码？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:18:11.163

```
var styleElement = document.createElement("style");
styleElement.innerHTML = "body { \n\
        background: red; \n\
    }";

document.body.appendChild(styleElement); 
```

小提琴：http: [//jsfiddle.net/maniator/zjrJ2/](http://jsfiddle.net/maniator/zjrJ2/)

# python - Python 中的正则表达式、矩阵、CSV

> ID：11907088
> 
> 赞同：0
> 
> 时间：2012-08-10T18:15:38.437
> 
> 标签：python, regex, csv

我看过一些关于 numpy 模块等的相关帖子。我需要使用 csv 模块，它应该可以解决这个问题。虽然这里已经写了很多关于使用 csv 模块的文章，但我并没有完全找到我正在寻找的答案。非常感谢提前

基本上我有以下函数/伪代码（选项卡没有很好地复制......）：

```
import csv

def copy(inname, outname):
   infile = open(inname, "r")
   outfile = open(outname, "w")
   copying = False ##not copying yet

# if the first string up to the first whitespace in the "name" column of a row
# equals the first string up to the first whitespace in the "name" column of 
# the row directly below it AND the value in the "ID" column of the first row
# does NOT equal the value in the "ID" column of the second row, copy these two 
# rows in full to a new table. 
```

例如，如果 inname 看起来像这样：

```
ID,NAME,YEAR, SPORTS_ALMANAC,NOTES 
```

（前一千行）

```
1001,New York Mets,1900,ESPN

1002,New York Yankees,1920,Guiness

1003,Boston Red Sox,1918,ESPN

1004,Washington Nationals,2010 
```

（直到最后一行的最后大量行）

```
1231231231235,Detroit Tigers,1990,ESPN 
```

然后我希望我的输出看起来像：

```
ID,NAME,YEAR,SPORTS_ALMANAC,NOTES

1001,New York Mets,1900,ESPN

1002,New York Yankees,1920,Guiness 
```

因为字符串“New”是相同的字符串，直到“Name”列中的第一个空格，并且 ID 不同。需要明确的是，我需要代码尽可能通用，因为“New”上的正则表达式不是我需要的，因为常见的第一个字符串实际上可以是任何字符串。在第一个空格之后发生什么并不重要（即“华盛顿国民队”和“华盛顿特区”应该仍然给我一个打击，就像上面纽约的例子一样......）

我很困惑，因为在 R 中有一种方法可以做到：inname$name 可以通过特定行中的值轻松搜索。我尝试先用 R 编写我的脚本，但它变得令人困惑。所以我想坚持使用Python。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T19:04:00.190

这是否符合您的要求（Python 3）？

```
import csv 

def first_word(value):
    return value.split(" ", 1)[0]

with open(inname, "r") as infile:
    with open(outname, "w", newline="") as outfile:
        in_csv = csv.reader(infile)
        out_csv = csv.writer(outfile)

        column_names = next(in_csv)
        out_csv.writerow(column_names)

        id_index = column_names.index("ID")
        name_index = column_names.index("NAME")

        try:
            row_1 = next(in_csv)
            written_row = False

            for row_2 in in_csv:
                if first_word(row_1[name_index]) == first_word(row_2[name_index]) and row_1[id_index] != row_2[id_index]:
                    if not written_row:
                        out_csv.writerow(row_1)

                    out_csv.writerow(row_2)
                    written_row = True
                else:
                    written_row = False

                row_1 = row_2
        except StopIteration:
            # No data rows!
            pass 
```

对于 Python 2，请使用：

```
with open(outname, "w") as outfile:
    in_csv = csv.reader(infile)
    out_csv = csv.writer(outfile, lineterminator="\n") 
```

# ember.js - ember.js 无限滚动（延迟加载）

> ID：11907093
> 
> 赞同：55
> 
> 时间：2012-08-10T18:15:51.347
> 
> 标签：ember.js, lazy-loading, infinite-scroll, ember-data

我有一个视图，其中可以有大量项目供用户滚动浏览，我想实现无限滚动以启用内容的渐进式加载。

看起来有些人[已经完成了分页](https://stackoverflow.com/questions/8778259/ember-js-rendering-large-lists-without-locking-up-the-browser)，但谷歌并没有提出任何人讨论他们如何使用 Ember/Ember Data 完成无限列表。任何人都已经解决了这个问题并有一篇博客文章/示例代码可以分享？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-08-12T21:11:23.763

`GitHub Dashboard` [我已经在项目](http://code418.com/dashboard)中实现了无限滚动机制，我目前正在开发中。该功能在提交[68d1728](https://github.com/pangratz/dashboard/commit/68d1728ec26dae5062eae5be43d61083cfc34f14)中添加。

基本思想是每次视图在当前视口上可见时`LoadMoreView`调用控制器上的方法。`loadMore`我为此使用了 jQuery 插件[inview](https://github.com/protonet/jquery.inview/)。它允许您注册一个`inview`事件，当指定选择器的元素在屏幕上可见以及它消失时触发该事件。

控制器还具有指示是否有更多项目要加载以及当前是否已获取项目的属性。这些属性称为`canLoadMore`和`isLoading`。

`LoadMoreView`基本上看起来像这样：

```
App.LoadMoreView = Ember.View.extend({
  templateName: 'loadMore',
  didInsertElement: function() {
    var view = this;
    this.$().bind('inview', function(event, isInView, visiblePartX, visiblePartY) {
      if (isInView) Ember.tryInvoke(view.get('controller'), 'loadMore');
    });
  }
}); 
```

其中`loadMore`模板定义如下：

```
{{#if isLoading}}
    fetching some more stuff <img width="10" src="img/ajax-loader.gif" >
{{else}}
    {{#if canLoadMore}}
        <a {{action "loadMore" target="controller" }}>click to load more items</a>
    {{else}}
        <i>no more items</i>
    {{/if}}
{{/if}} 
```

然后按如下方式实现处理获取更多项目的控制器。请注意，在该`loadMore`方法中，会执行对商店的查询，该查询会加载模型条目的特定页面。

```
App.EventsController = Ember.ArrayController.extend({
  currentPage: 1,

  canLoadMore: function() {
    // can we load more entries? In this example only 10 pages are possible to fetch ...
    return this.get('currentPage') < 10;
  }.property('currentPage'),

  loadMore: function() {
    if (this.get('canLoadMore')) {
      this.set('isLoading', true);
      var page = this.incrementProperty('currentPage');

      // findQuery triggers somehing like /events?page=6 and this
      // will load more models of type App.Event into the store
      this.get('store').findQuery(App.Event, { page: page });
    } else {
      this.set('isLoading', false);
    }
  }
}); 
```

剩下的唯一事情是最初将`content`控制器的 设置为`filter`函数的结果，因此`content`当新模型加载到存储中时会更新（这是由于控制器`findQuery`中的方法而发生`loadMore`的）。此外，在调用`query`时会添加一个哈希。`filter`这确保了对服务器的初始查询。

```
App.eventsController = App.EventsController.create({
    content: []
});

var events = App.store.filter(App.Event, { page: 1 }, function(data) {
    // show all events; return false if a specific model - for example a specific
    // type of event - shall not be included
    return true;
}); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-13T19:26:01.690

你知道新发布的 Ember.ListView 组件吗？

[https://github.com/emberjs/list-view](https://github.com/emberjs/list-view)

它是在二月份的旧金山 Ember 聚会上宣布的。下面是来自 Ember Core 开发人员之一的 Erik Bryn 关于使用它的幻灯片：

[http://talks.erikbryn.com/ember-list-view/](http://talks.erikbryn.com/ember-list-view/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-02T23:13:30.613

我正在根据@pangratz 的工作[为 Ember 编写一个无限分页插件。](https://github.com/iHiD/ember-infinite-pagination)

如果您有任何问题或需要改进，请在那里提出任何问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-27T16:52:52.770

我建议使用[Ember Infinity](https://github.com/hhff/ember-infinity)插件。**它支持 Ember 1.10 到 2.0+。**设置起来相对容易。您只需要修改您的路线和模板。

路线（`Product`是示例模型）：

```
import InfinityRoute from 'ember-infinity/mixins/route';

export default Ember.Route.extend(InfinityRoute, {
  model() {
    /* Load pages of the Product Model, starting from page 1, in groups of 12\. */
    return this.infinityModel('product', { perPage: 12, startingPage: 1 });
  }
}); 
```

模板：

```
{{#each model as |product|}}
  ...
{{/each}}

{{infinity-loader infinityModel=model}} 
```

当`{{infinity-loader}}`组件变得可见时，它会向您的路由发送一个动作，因此它知道用新的（获取的）记录更新模型数组。

第一个请求将发送至：

```
/products?per_page=12&page=1 
```

因此，您还需要准备后端 API 来处理这些查询参数。它显然是可定制的，请查看[Readme 的 Advanced Usage 部分](https://github.com/hhff/ember-infinity#advanced-usage)。

**注意**：

自 Ember 2.0 稳定版起，使用 (@commadelimited's answer) 和使用`ListView`(@pangratz's answer) 的视图`ArrayController`均已弃用/删除。

# amazon-ec2 - RabbitMQ 设置在重新启动时消失。为什么？

> ID：11907099
> 
> 赞同：19
> 
> 时间：2012-08-10T18:16:25.853
> 
> 标签：amazon-ec2, rabbitmq

这是在 EC2 上。我有一个初始化脚本，它执行一些基本设置，例如安装 rabbitmq、创建虚拟主机、用户、设置权限等。所以基本上它是这样的：

```
sudo yum --enablerepo=epel install rabbitmq-server
/etc/init.d/rabbitmq-server start
rabbitmqctl add_user username password
rabbitmqctl add_vhost vhost
rabbitmqctl set_permissions -p vhost username ".*" ".*" ".*"
rabbitmqctl stop 
```

然后我退出 shell，并从实例创建一个 EBS 映像。Amazon 会自动重新启动服务器以创建映像。

现在奇怪的部分......重新启动后，除了权限之外，一切仍然设置。

然后当我从图像中启动一个新实例时，rabbitmq 中没有用户名或主机。

是否需要在 rabbitmq 中做一些事情来保存更改？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-27T15:11:04.663

如果当您“停止”和“重新启动”实例而不是重新启动它时设置消失，那是因为 ip 地址正在更改并且 RabbitMQ 设置已绑定到该 ip。

请参阅[Amazon EC2 实例上的 RabbitMQ](http://techblog.willshouse.com/2013/02/27/rabbitmq-users-disappear-settings-gone-after-reboot-restart/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T18:29:27.447

我想可能是这个，来自[http://www.rabbitmq.com/ec2.html](http://www.rabbitmq.com/ec2.html)

> # EBS 设备上的持久数据
> 
> RabbitMQ 将数据写入 Ubuntu 上的以下目录：
> 
> /var/lib/rabbitmq/ 用于存储持久数据，例如消息或队列
> 
> /var/log/rabbitmq/ 存储日志
> 
> 如果您想使用 EBS 块设备来存储 RabbitMQ 数据，只需将这些目录链接到您的 EBS 设备。在对数据目录进行任何更改之前停止 RabbitMQ：
> 
> $ /etc/init.d/rabbitmq-server 停止

# c - 跳过 Dev-C++ 输入

> ID：11907102
> 
> 赞同：2
> 
> 时间：2012-08-10T18:16:30.750
> 
> 标签：c, gets

```
#include<stdio.h>
#include<conio.h>
main()
{
      int i;
      char c, text[30];
      float f;
      printf("\nEnter Integer : ");
      scanf("%d",&i);
      printf("\nEnter Character : ");
      c = getch();
      printf("\nEnter String:");
      gets(text);
      printf("\nEnter Float:");
      scanf("%f",&f);
      printf("\nInteger : %d",i);
      printf("\nCharacter : %c8",c);
      printf("\nString : %s",text);
      printf("\nFloat : %f",f);
      getch();
} 
```

为什么这个简单的程序无法`string`使用该`gets()`函数读取 a ？我还应该用什么来纠正它？好吧，它在我的旧 32 位 PC 中的 Turbo C 中工作，但在这里不行......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T18:42:10.130

通过一些小的研究，我猜这个问题来自`scanf()`. `scanf()`读取没有行尾字符 '\n' 的行，该行似乎留在缓冲区中，并且在下一条语句时实际上是红色的。

或者，您可以使用`fgets(`) ，`sscanf()`如下所示：

要读取我使用的字符：

```
fgets(text,sizeof(text),stdin);
sscanf(text,"%c",&c); /* or: c = text[0]; */ 
```

读取我用过的整数

```
fgets(text,sizeof(text),stdin);
sscanf(text,"%d",&i); 
```

在我的 C 课程（DevC++）被建议作为编译器时，我遇到了 gets() 的一个主要问题。但是，我完全记得我没有遵循建议，结果 fgets() 的行为也取决于编译器。

的手册页`gets()`有这个：

错误

永远不要使用gets()。因为在事先不知道数据的情况下不可能知道gets()会读取多少个字符，而且因为gets()会继续存储超过缓冲区末尾的字符，所以使用起来非常危险。它已被用来破坏计算机安全。请改用 fgets()。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T19:57:35.610

Scanf 或其他输入解析函数仅采用来自 stdin 的调用中指定的所需字符数量并拒绝其他字符。因此，这些被拒绝的值在下一次读取 stdin 时与换行符一起进入变量，从而跳过输入很少调用。因此最好调用一个清除标准输入并阻止垃圾进入其他变量的清晰例程。

尽管您的代码很容易受到攻击，但它仍然有解决方案：-

```
#include<stdio.h>

  int clear()
  {
    while ((getchar())^'\n');    
  }
  int  main()
    {
          int i;
          char c, text[30]={0};
          float f;
          printf("\nEnter Integer : ");
          scanf(" %d",&i);
          printf("\nEnter Character : ");     
          scanf(" %c",&c);    
          printf("\nEnter String:");
      clear();
          gets(text);
          printf("\nEnter Float:");   
          scanf(" %f",&f);    
          printf("\nInteger : %d",i);
          printf("\nCharacter : %c",c);
          printf("\nString : %s",text);
          printf("\nFloat : %f",f);
          getchar();
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T18:41:53.013

当您输入**42**（或其他）作为第一个整数时，您实际上输入了三个字符：**4**、**2**，然后是来自按 ENTER 的换行符。您的第一个 scanf 读取一个整数，这意味着它只读取**4**和**2**，将换行符留在输入缓冲区中。

当您的程序到达**gets 时**，它会读取一个非常短的行，该行仅包含该换行符。

您可以通过在 scanf 之后读取并丢弃换行符来修复它，如下所示：

```
printf("\nEnter Integer : ");
scanf("%d",&i);
while (getchar() != '\n')
    ; 
```

# android - 蓝牙驱动程序无法安装配对我的三星手机

> ID：11907104
> 
> 赞同：0
> 
> 时间：2012-08-10T18:16:37.660
> 
> 标签：android, bluetooth

我目前正在开发基于蓝牙聊天示例的 Android 应用程序。该代码似乎有效，但是当我尝试将我的安卓设备（三星 Ace [GT-S5839i](http://www.samsung.com/hk_en/consumer/mobile/mobile-phones/smartphone/GT-S5830OKATGY-spec)）与我的笔记本电脑配对时，一些驱动程序无法安装。在设备蓝牙服务列表中，我可以看到 BluetoothChatSecure 和 BluetoothChatInsecure 服务，但是当我尝试将手机连接到笔记本电脑时出现连接错误。

这是我第一次做任何蓝牙开发，我不知道会发生什么。

**编辑：**

其实我有几个错误：

```
08-11 01:34:49.140: E/BluetoothChat(29847): + ON RESUME +
08-11 01:34:49.187: E/BluetoothEventLoop.cpp(1510): onCreateDeviceResult: D-Bus error: org.bluez.Error.AlreadyExists (Device already exists)
08-11 01:34:49.203: E/DTUN_HCID4(29886): No device pointer found for peer! Ignore Error = true. Ignoring error...
08-11 01:34:49.421: E/(29869): ****************search UUID = 87fa***********
08-11 01:34:50.179: E/BluetoothEventLoop.cpp(1510): event_filter: Received signal org.bluez.Device:PropertyChanged from /org/bluez/29886/hci0/dev_70_F1_A1_B7_61_A8
08-11 01:34:54.304: E/BluetoothEventLoop.cpp(1510): event_filter: Received signal org.bluez.Device:PropertyChanged from /org/bluez/29886/hci0/dev_70_F1_A1_B7_61_A8 
```

**附言**

有谁知道为什么当我使用默认 uuid 时 Windows 试图安装两个蓝牙外围设备而没有找到正确的驱动程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T08:45:40.633

我终于在手机和笔记本电脑之间建立了蓝牙安全连接。这些是必需的步骤：

*   首先，我在笔记本电脑中设置了一个蓝牙 Icoming COM 端口
*   其次，我根据[android文档][2]更改了我的uuid

> ```
> Hint: If you are connecting to a Bluetooth serial board then try using the well-known SPP UUID 00001101-0000-1000-8000-00805F9B34FB. 
> ```

*   然后我在我的手机中启用了 SSP 服务，这样我就可以让标准串行蓝牙链接工作了
*   最后，我通过超级终端（如腻子）打开与 Icoming COM 端口的串行连接

我希望这对某人有帮助。

# asp.net - 使用剃刀在 MVC3 项目中键入 class=" 时，Visual Studio 2010SP1 锁定

> ID：11907108
> 
> 赞同：2
> 
> 时间：2012-08-10T18:16:59.590
> 
> 标签：asp.net, asp.net-mvc-3, visual-studio-2010, razor

`class="`有时，并非总是如此，Visual Studio在任何元素上键入时都会锁定。这不会一直发生，我似乎无法识别除了 VS 通常运行了一段时间之外的模式。

另外，我已经安装了 ELMAH，并设置了异常情况给我发电子邮件。相对经常，虽然我并不总是在`class="`像下面这样输入时收到一封电子邮件。为什么在输入类时会尝试启动项目？

```
System.Web.HttpException: The controller for path
  '/Views/TechSupport/@Url.Content(' was not found
  or does not implement IController. 
```

为了解决这个问题，我重新启动了 Visual Studio。有时问题仍然存在，我需要重新启动它。通常它在那个时候可以正常工作，没有上面的 ELMAH 电子邮件。如果没有，那么我重新启动。

这是我唯一的 MVC 项目，所以我不知道它是否特定于这个项目。不过，它似乎确实发生在开发过程的早期。这仅在我键入 class=" 时发生，没有其他任何东西会触发崩溃/锁定。

**编辑 - 附加信息：** 由于某种原因，当我刚刚键入 class=" 时弹出一个错误对话框，并显示消息
`Cannot load "c:\Progra~1\MICROS~2.0\Common7\Packages\vwd\mso.dll"`
当我单击确定时，我得到第二个对话框，上面写着
`Visual Studio has encountered an exception. This may be caused by an extension.`
它然后继续建议我在启动时使用 /log 参数VS，我现在将尝试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T22:02:18.350

我遇到了同样的问题，发现通过`Extension Manager -> Online Gallery`搜索安装`Web Standards Update for Microsoft Visual Studio 2010 sp1`修复它。

如果已经安装，您可能需要卸载它并重新安装它。

**更新**

以下是一些可能有帮助的其他信息：

[http://social.msdn.microsoft.com/Forums/en-US/csharpide/thread/c249aa35-ed66-431a-9cc3-03b0b84f5f21/](http://social.msdn.microsoft.com/Forums/en-US/csharpide/thread/c249aa35-ed66-431a-9cc3-03b0b84f5f21/)

[http://social.msdn.microsoft.com/Forums/en/csharpide/thread/ac74d91c-b76d-49a3-b599-a8f19df9303a](http://social.msdn.microsoft.com/Forums/en/csharpide/thread/ac74d91c-b76d-49a3-b599-a8f19df9303a)

[http://connect.microsoft.com/VisualStudio/feedback/details/727091/visual-studio-crashes-when-editing-an-mvc-4-beta-cshtml](http://connect.microsoft.com/VisualStudio/feedback/details/727091/visual-studio-crashes-when-editing-an-mvc-4-beta-cshtml)

*   打开 Options->Text Editor->CSS->Miscellaneous 并禁用“Statement Completion”
*   此外，在“常规”部分中还有其他“声明完成”选项。
*   尝试关闭项目，删除项目文件夹内的“bin”文件夹的内容（您可能之前备份过您的项目），然后重新打开项目。
*   作为最后的手段，您可以尝试创建一个新项目并重新导入项目和代码文件，甚至修复/重新安装 VS。
*   在工具 -> 选项 -> 文本编辑器 -> HTML -> 格式上尝试“键入时启用插入属性值引号”

# php - 为什么 CodeIgniter 会为此查询添加一个额外的星号？

> ID：11907109
> 
> 赞同：0
> 
> 时间：2012-08-10T18:17:09.200
> 
> 标签：php, codeigniter

我有以下代码，但我无法弄清楚为什么 CodeIgniter 会在它生成的查询中添加一个额外的通配符。

**代码**

```
class Foo_Model extends CI_Model {
  private $table = 'foo';

  public function get_all_foos() {
    $table = $this->table;   
    $this->db->select("$table.*")->from($table);
    return $this->get()->result();
  }
} 
```

我收到以下错误：

> 发生数据库错误
> 
> 错误号：1064
> 
> 您的 SQL 语法有错误；检查与您的 MySQL >server 版本相对应的手册，以在第 1 行的 '* FROM ( `foo`, `foo`)'附近使用正确的语法
> 
> 选择`foo`.*, * FROM ( `foo`, `foo`)

为什么查询生成不正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:26:25.120

如果要选择所有内容，请不要使用该`->select()`语句。这应该等同于您的预期。

```
class Foo_Model extends CI_Model {
  private $table = 'foo';

  public function get_all_foos() {
    $table = $this->table;   
    $this->db->from($table);
    return $this->get()->result();
  }
} 
```

请参阅`$this->db->get`文档中的示例 - [http://codeigniter.com/user_guide/database/active_record.html](http://codeigniter.com/user_guide/database/active_record.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T23:17:54.453

如果要选择所有内容，最快的方法是`get()`直接使用表名。
例如：

```
class Foo_Model extends CI_Model {
  private $table = 'foo';

  public function get_all_foos() {
   $table = $this->table;
   return $this->db->get($table)->result();
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T23:00:01.417

我认为这是 Codeigniter 2.1.2 的错误

这应该适合你：

```
$this->db->select("`$table`.*",false)->from($table); 
```

# java - System.setProperty("user.timezone", "America/Chicago"); 之间的区别 和 TimeZone.setDefault(TimeZone.getTimeZone("America/Chicago"));

> ID：11907119
> 
> 赞同：8
> 
> 时间：2012-08-10T18:18:14.907
> 
> 标签：java, timezone

1.  System.setProperty("user.timezone", "美国/芝加哥");
2.  TimeZone.setDefault(TimeZone.getTimeZone("美国/芝加哥"));

两者有什么区别？哪个更好/推荐用于设置时区？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T20:22:42.407

查看代码，区别本质上是关于 TimeZone 默认设置的时间 -

在第一种情况下，默认值在第一次调用 TimeZone 类时生效（基本上是懒惰的） - 比如说`TimeZone.getDefault()`，此时`TimeZone.setDefault`调用，`user.timezone`查找并设置默认值。

在第二种情况下，急切地设置默认值 - 当您显式调用`TimeZone.setDefault`

我认为这是唯一的区别，任何一个都应该在实践中正常工作。

**更新** 这是`java.util.TimeZone`类的代码

对 TimeZone.getDefault() 的第一次调用具有此流程，它涵盖了您的第一点。

```
TimeZone.getDefault()
    -> TimeZone.setDefaultZone() (lookup "user.timezone" , set class variable and return timezone)
          -> return defaulttimezone 
```

下次调用 getDefault() 时，它只返回类变量

在 TimeZone.setDefault(timeZone) 的情况下，`defaultTimeZone`正在设置类级别变量： `defaultTimeZone = zone;`并返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-09T16:04:48.970

最大的区别应该是“user.timezone”属性和TimeZone的默认时区是分开存储的。

请参阅 Java SE 8 文档[TimeZone#getDefault](https://docs.oracle.com/javase/8/docs/api/java/util/TimeZone.html#getDefault--)、[TimeZone#setDefault](https://docs.oracle.com/javase/8/docs/api/java/util/TimeZone.html#setDefault-java.util.TimeZone-)。

要点是`TimeZone.getDefault`可以使用“user.timezone”属性作为其初始值，但该值将被缓存。这意味着对“user.timezone”的更改不会影响`TimeZone.getDefault`. 并且`TimeZone.setDefault`不会更改“user.timezone”属性。

如果您不确定您的代码或第三方库依赖于哪一个，您最好同时设置：

```
System.setProperty("user.timezone", "America/Chicago");
TimeZone.setDefault(null); // or TimeZone.setDefault(TimeZone.getTimeZone("America/Chicago")); 
```

以[Joda Time](http://www.joda.org/joda-time/)为例，它取决于 "user.timezone" 属性和`TimeZone.getDefault`，并且 "user.timezone" 优先。请参阅[DateTiimeZone.getDefault](https://github.com/JodaOrg/joda-time/blob/v2.9.9/src/main/java/org/joda/time/DateTimeZone.java#L144)：

```
try {
    String id = System.getProperty("user.timezone");
    if (id != null) {  // null check avoids stack overflow
        zone = forID(id);
    }
} catch (RuntimeException ex) {
    // ignored
}
if (zone == null) {
    zone = forTimeZone(TimeZone.getDefault());
} 
```

# c++ - 给定 T 和函数名称和类型，我如何解析 T::function？

> ID：11907122
> 
> 赞同：1
> 
> 时间：2012-08-10T18:18:30.703
> 
> 标签：c++, templates, member-function-pointers

给定一个`Event`结构和一个实现具有特定名称和原型的函数的对象，该`Event`结构已知，我想返回一个指针或绑定到该函数。它返回的究竟是什么并不重要。它可以很容易地成为指向成员函数的指针或绑定。

这有点难以解释，所以这里有一些伪代码：

```
struct Foo {
    void onEvent();
};

struct Bar {
    void onEvent();
};

struct Event
{
    // I'm not sure what would go here
    // Needs something that can be used to resolve T::onEvent, without
    // knowing what T is until GetEventFunction is called.
    typedef std::function<void()> function_type;
};

template<typename T, typename EventType>
EventType::function_type GetEventFunction(T* object)
{
    return std::bind(T::(EventType::Something), object);
}

GetEventFunction<Foo, Event>(new Foo); // Returns Foo::onEvent
GetEventFunction<Bar, Event>(new Bar); // Returns Bar::onEvent 
```

可以实现这种行为，还是 C++ 过于受限而不允许这样做？

**请在回答前阅读此内容**

我不是在寻找反思。据我所知，完成我的目标所需的所有信息都在编译时可用。

另外，我对替代方法不感兴趣。我知道通过附加代码实现此行为的许多方法，例如每种事件类型的模板特化，但我正在寻找一种专门实现此目的的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T19:18:06.883

> 可能我没有解释好，但是函数名对于每种`Event`类型都是唯一的。A`FooEvent`应该解决`T::onFooEvent`，而 a`BarEvent`应该解决`T::onBarEvent`。

C++ 可以对类型和值进行操作，但不能对*名称*进行操作。那是处理文本，这是在 C++ 正确查看代码之前发生的宏观层面的事情。您不能获取类型`BarEvent`并将其转换为函数`T::onBarEvent`，因为它们之间没有任何关联，只是它们碰巧被*命名*。

这就是为什么 Luc 的答案使用了一个特定的名称：函数的名称必须是硬编码的。

现在，您可以通过使用特征模板稍微避开 C++ 的规则。例如，您可以创建`event_traits`具有成员函数的模板类型，该成员函数接受`T`并调用其上的特定函数。它看起来像这样：

```
template<typename event_type>
struct event_traits
{
  template<typename T> void Dispatch(T *t) {t->DefaultEventFunction();}
}; 
```

以上用途`DefaultEventFunction`。

如果您希望每个类`Event`都有自己的事件函数，则需要对每个`Event`类进行专门化。如果你想强制执行这个规则，那就永远不要`DefaultEventFunction`在你的任何`T`对象中定义；编译器会抱怨。将名称更改为不太可能使用的名称，例如`WhyDidYouNameThisFunctionLikeThisStopIt`.

```
template<>
struct event_traits<FooEvent>
{
  template<typename T> void Dispatch(T *t) {t->onFooEvent();}
};

template<>
struct event_traits<BarEvent>
{
  template<typename T> void Dispatch(T *t) {t->onBarEvent();}
}; 
```

这是宏可以派上用场的地方：

```
#define REGISTER_EVENT_HANDLER(eventName)\
template<> struct event_traits<eventName>\
{\
  template<typename T> void Dispatch(T *t) {t->on ## eventName ();}\
}; 
```

因此，您`GetEventFunction`将如下所示：

```
template<typename T, typename EventType>
EventType::function_type GetEventFunction(T* object)
{
    return std::bind(event_traits<EventType>::Dispatch<T>, object);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T18:46:42.927

如果您确实有成员的*名称*，那么您不需要知道类型——假设该成员不是重载的成员函数。

```
template<typename T>
auto GetEventFunction(T& object)
-> decltype( std::bind(&T::onEvent, std::ref(object)) )
{ return std::bind(&T::onEvent, std::ref(object)); }

// Usage:
Foo f;
auto event = GetEventFunction(f); 
```

请注意，这有点做作，因为`onEvent`您提到的不带任何参数。如果是这样，你需要更多的脚手架。（我建议写一个`mem_fn`也接受一个对象的，不像`std::mem_fn`。）

# ruby-on-rails - 如何为 rspec 包含/设置可见的辅助方法？

> ID：11907123
> 
> 赞同：2
> 
> 时间：2012-08-10T18:18:31.877
> 
> 标签：ruby-on-rails, methods, rspec, visibility, helper

**我在控制器PlanetsController**中使用名为“ **generate_coordinate** ”的方法（位于 app/helpers/planets_helper.rb 中）。

 **运行测试时，rspec 似乎无法访问它，因此导致我的测试套件失败，因为地球没有任何坐标。

我试图在**utility.rb**文件的开头包含我的助手，但它没有用

```
include ApplicationHelper
include PlanetsHelper 
```

我还尝试**在 utility.rb 文件中编写我的方法**，但没有取得更多成功。

我读了这篇文章“ [Where/how to include helper methods for capybara integration tests](https://stackoverflow.com/questions/8192559/where-how-to-include-helper-methods-for-capybara-integration-tests) ”，但它对我没有帮助。

我还阅读了“存根”函数，但因为我不明白它可以用来做什么，所以对我没有多大帮助......

任何的想法 ？

* * *

这是我的**测试代码**（spec/requests/planet_pages_spec.rb）

```
describe "Create planet" do
    before do
        visit new_planet_path
        fill_in "Name", with: "MyPlanet"
        click_button "Validate"
    end

    it {should have_selector('h1', text: "Planet")}
end 
```

当点击“Validate”时，它会导致**PlanetsController**调用“generate_coordinate”方法

```
def create
    @planet = Planet.new(name: params[:planet][:name],
        coordinates: generate_coordinates, [...])

        if @planet.save
            redirect_to action: 'index'
        else
            render 'new'
        end 
```

这是 generate_coordinate 方法，它似乎从未被 rspec 调用过（而当我使用浏览器导航时）

```
module PlanetsHelper

    def generate_coordinates
        coordinates = "0.0.0.0"
    end 
```

结尾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T23:58:34.060

如果你的`generate_coordinate`方法被你的控制器和助手使用，考虑进入你的控制器（作为一个私有方法）并添加这个单行以允许视图和助手访问它：

```
# planets_controller.rb
helper_method :generate_coordinate 
```

`helper_method`将控制器方法暴露给控制器范围内的视图和助手（在本例中为 planets#index、planets#show 等）。

如果你想反过来做，你有两个选择：

*   插入`include PlanetsHelper`控制器顶部（下`class PlanetsController`）
*   当你想调用辅助方法时，像这样调用它：`view_context.generate_coordinate(...)`

试一试，看看哪一个最适合您的需求。**

# mysql - 使用 IN vs JOIN（或其他方法）和性能优化对多个表的 mysql 查询

> ID：11907125
> 
> 赞同：0
> 
> 时间：2012-08-10T18:18:48.883
> 
> 标签：mysql

有人告诉我使用连接来优化这个查询：

```
select distinct p.product_id 
from cart_products p 
     left join product_bikes b on p.product_id = b.product_id where bike_id = $bike_id
or
p.product_id in (
    select product_id from cart_product_options where option_id in (
        select option_id from cart_product_option_variants where variant_id in (
            select variant_id from variant_bikes where bike_id=$bike_id
        )
    )
) 
```

然而，使用连接似乎根本没有速度提升：

```
select distinct p.product_id from cart_products p 
    left join product_bikes pb on p.product_id = pb.product_id and pb.bike_id = $bike_id
    left join cart_product_options po on po.product_id = p.product_id
    left join cart_product_option_variants pov on pov.option_id = po.option_id
    left join variant_bikes vb on vb.variant_id = pov.variant_id and vb.bike_id = $bike_id
    where pb.bike_id = $bike_id or vb.bike_id = $bike_id 
```

根据服务器负载和当前表大小，它们都可以快速执行，但是当有更多产品、产品选项等时，插件的这一部分确实会导致速度变慢。我只是想知道什么方法可以让 mysql 以最快的速度运行这个查询。有人可以说 JOINS 是最好的答案，或者知道任何其他加快速度的技巧吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:41:36.807

Mysql 在处理“in”语句中的子查询方面做得很差。将“存在”与相关子查询一起使用要快得多，特别是如果在内表中用于相关的字段上有索引时。

尝试类似：

```
select distinct p.product_id
from cart_products p left join
     product_bikes b
     on p.product_id = b.product_id
where bike_id = $bike_id or
      exists (select *
              from cart_product_options cpo
               where cpo.productid = p.productid and
                     exists (select option_id
                             from cart_product_option_variants cpov
                             where cpo.option_id = cpov.option_id and
                                   exists (select variant_id
                                           from variant_bikes vb
                                           where vb.variant_id = cpov.variant_id and
                                                 bike_id=$bike_id
                                           )
                             )
              ) 
```

这应该工作。. . 但是你确实有很多嵌套的子查询。

# java - maven 3 项目间依赖与战争包装

> ID：11907129
> 
> 赞同：0
> 
> 时间：2012-08-10T18:19:00.070
> 
> 标签：java, eclipse, maven, eclipse-plugin, dependencies

我安装了 Eclipse Indigo 和 M2E 插件。

所以基本上我有一个标准的 maven web 项目（我们称之为 proj-service），它在打包阶段构建到一个 war 文件中。这一切都很好。当我有需要使用 proj-service 中的类的其他项目（我们称之为 proj1）时，我的问题就出现了。我知道这在 maven+eclipse 中是可能的，但目前似乎不起作用。我现在在 proj1 的 pom 中有以下内容：

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.mycompany.foo</groupId>
    <artifactId>proj1</artifactId>
    <packaging>war</packaging>
    <version>1.0</version>
    <name>proj1</name>
    <properties>
        <spring.version>3.1.0.RELEASE</spring.version>
    </properties>
    <dependencies>
        <!-- Maven Repo Libraries -->
        .........
        <!-- Interproject dependencies -->
        <dependency>
            <groupId>com.mycompany.foo</groupId>
            <artifactId>proj-service</artifactId>
            <version>1.0</version>
            <type>war</type>
        </dependency>
    </dependencies>
    <build>
        <finalName>lsoap</finalName>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>          
                    <configuration>
                        <source>1.7</source>
                        <target>1.7</target>
                    </configuration>
                </plugin>
            </plugins>
    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T19:29:36.530

不幸的是，使用 Maven 的 war 打包，您无法重用 war 项目中的类，因为没有可用于类路径的直接构建工件。

因此，为了正确共享类，您需要将这些公共类提取到第三个公共项目（jar 打包）中，并将其作为其他两个项目的依赖项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T20:30:49.203

首先，您必须以更改 maven-war-plugin 配置的方式更改 proj-service 项目的配置：

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-war-plugin</artifactId>
    <configuration>
      <attachClasses>true</attachClasses>
      <archiveClasses>true</archiveClasses>
       ...
    </configuration>
  </plugin> 
```

这样就可以通过以下依赖项在其他项目中使用 proj-service 项目中的类：

```
<dependency>
  <groupId>myGroup</groupId>
  <artifactId>myArtifact</artifactId>
  <version>myVersion</myVersion>
  <classifier>classes</classifier>
</dependency> 
```

这将导致您的依赖关系从：

```
<dependency>
    <groupId>com.mycompany.foo</groupId>
    <artifactId>proj-service</artifactId>
    <version>1.0</version>
    <type>war</type>
</dependency> 
```

进入：

```
<dependency>
    <groupId>com.mycompany.foo</groupId>
    <artifactId>proj-service</artifactId>
    <version>1.0</version>
    <classifier>classes</classifier/>
</dependency> 
```

# java - 带有游戏框架的 akka

> ID：11907130
> 
> 赞同：2
> 
> 时间：2012-08-10T18:19:10.500
> 
> 标签：java, playframework, akka

仍在学习使用 play 框架掌握 akka java。我在下面有一个代码片段。它工作正常，但决定让人头疼。

```
public class Application extends Controller {

static ActorRef masterActor;
  RubineActor rubineactor;

  public static Result index() {          
      return ok(index.render(null));
   ........ somecode
  } 
```

它工作正常，但现在我的 eclipse juno 抱怨它无法解析返回行中的索引对象。我是 akka 和 play framework 的新手。有人可以解释发生在我身上的事情吗。cos必须提交项目作为我的最后一年项目。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T21:52:56.443

您的问题与 Akka 无关，这是一个[模板问题](https://stackoverflow.com/questions/11739119/playframework-eclipse-cant-detect-a-new-template)。

该变量`index`由模板导入提供，当然`import views.html.*;` Eclipse 有时无法解析此对象，因为它是 Play**在**第一次请求后自动生成的。

> 模板被编译为标准 Scala 函数，遵循简单的命名约定。如果您创建一个 views/Application/index.scala.html 模板文件，它将生成一个具有 render() 方法的 views.html.Application.index 类。

有关具体示例，请参见[hello word 示例](https://github.com/playframework/Play20/blob/master/samples/java/helloworld/app/controllers/Application.java)。

# php - find 无法检查数据库中的电子邮件

> ID：11907134
> 
> 赞同：0
> 
> 时间：2012-08-10T18:19:45.967
> 
> 标签：php, cakephp

我正在尝试使用此代码来检查是否有任何帐户在新注册中发送了相同的电子邮件。

如果数据库中的值是新的， 为什么要`var_dump($arr_user_db);`输出一个结果？`$email`

```
public function checkUserDatabase($email=null, $id_fb=null) {
        if(!is_null($email) && is_null($id_fb)){
            unset($arr_user_db);
            $arr_user_db = $this->User->find('first', array('conditions' => array('User.email' == $email)));
            var_dump($email); //string 'mersdfsdfda@example.com' (length=28)
            var_dump($arr_user_db);//output an account.

        }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T18:23:19.843

```
 $arr_user_db = $this->User->find('first', array('conditions' => array('User.email' == $email))); 
```

应该：

```
 $arr_user_db = $this->User->find('first', array('conditions' => array('User.email' => $email))); 
```

# symfony - 如何创建 symfony 树枝过滤器？

> ID：11907137
> 
> 赞同：21
> 
> 时间：2012-08-10T18:19:51.513
> 
> 标签：symfony, twig

例如我的包命名空间是`Facebook\Bundle\FacebookBundle\Extension`.

使用它如何创建树枝扩展？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-10T20:07:16.920

都在这里：[如何编写自定义 Twig 扩展](http://symfony.com/doc/current/cookbook/templating/twig_extension.html)。

**1\. 创建扩展：**

```
// src/Facebook/Bundle/Twig/FacebookExtension.php
namespace Facebook\Bundle\Twig;

use Twig_Extension;
use Twig_Filter_Method;

class FacebookExtension extends Twig_Extension
{
    public function getFilters()
    {
        return array(
            'myfilter' => new Twig_Filter_Method($this, 'myFilter'),
        );
    }

    public function myFilter($arg1, $arg2='')
    {
        return sprintf('something %s %s', $arg1, $arg2);
    }

    public function getName()
    {
        return 'facebook_extension';
    }
} 
```

**2\. 将扩展注册为服务**

```
# src/Facebook/Bundle/Resources/config/services.yml
services:
    facebook.twig.facebook_extension:
        class: Facebook\Bundle\Twig\AcmeExtension
        tags:
            - { name: twig.extension } 
```

**3.使用它**

```
{{ 'blah'|myfilter('somearg') }} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-10T23:09:29.640

您还可以使用 getFunctions() 创建树枝函数

```
class FacebookExtension extends Twig_Extension
{
    public function getFunctions()
    {
        return array(
            'myFunction' => new Twig_Filter_Method($this, 'myFunction'),
        );
    }

    public function myFunction($arg1)
    {
        return $arg1;
    } 
```

像这样使用你的函数：

```
{{ myFunction('my_param') }} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-03-05T13:34:37.233

Twig_Filter_Method 类自 Symfony 2.1 起已**弃用**

请改用**Twig_SimpleFilter**类，如以下示例所示：

*\src\Acme\Bundle\CoreBundle\Twig\DatetimeExtension.php*

```
<?php

namespace Acme\Bundle\CoreBundle\Twig;

use Symfony\Component\DependencyInjection\ContainerInterface;

class DatetimeExtension extends \Twig_Extension
{
    /**
     * @var \Symfony\Component\DependencyInjection\ContainerInterface
     */
    private $container;

    public function __construct(ContainerInterface $container)
    {
        $this->container = $container;
    }

    public function getFilters()
    {
        return array(
            'dateFormat' => new \Twig_SimpleFilter('dateFormat', array($this, 'dateFormat')),
            'datetimeFormat' => new \Twig_SimpleFilter('datetimeFormat', array($this, 'datetimeFormat'))
        );
    }

    /**
     * @param mixed $date
     * @return string
     */
    public function dateFormat($date)
    {
        $format = $this->container->getParameter('acme_core.date_format');
        return $this->format($date, $format);
    }

    /**
     * @param mixed $date
     * @return string
     */
    public function datetimeFormat($date)
    {
        $format = $this->container->getParameter('acme_core.datetime_format');
        return $this->format($date, $format);
    }

    /**
     * @param mixed $date
     * @param string $format
     * @throws \Twig_Error
     * @return string
     */
    private function format($date, $format)
    {
        if (is_int($date) || (is_string($date) && preg_match('/^[0-9]+$/iu', $date))) {
            return date($format, intval($date, 10));
        } else if (is_string($date) && !preg_match('/^[0-9]+$/', $date)) {
            return date($format, strtotime($date));
        } else if ($date instanceof \DateTime) {
            return $date->format($format);
        } else {
            throw new \Twig_Error('Date or datetime parameter not valid');
        }
    }

    public function getName()
    {
        return 'datetime_extension';
    }
} 
```

*\src\Acme\Bundle\CoreBundle\Resources\config\services.yml*

```
services:
    acme_core.twig.datetime_extension:
        class: Acme\Bundle\CoreBundle\Twig\DatetimeExtension
        arguments: [@service_container]
        tags:
            - { name: twig.extension } 
```

使用示例：

```
{{ value|datetimeFormat }} 
```

Symfony 文档：[http ://symfony.com/doc/master/cookbook/templating/twig_extension.html](http://symfony.com/doc/master/cookbook/templating/twig_extension.html)

树枝文档：[http ://twig.sensiolabs.org/doc/advanced.html#id3](http://twig.sensiolabs.org/doc/advanced.html#id3)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-11-16T16:08:36.113

None of the given answers worked for Symfony 3.4 and above.

### For Symfony 3.4, 4.x

```
// src/TwigExtension/customFilters.php 

namespace App\TwigExtension; 
use Twig\TwigFilter; 

class customFilters extends \Twig_Extension { 

    public function getFilters() { 
        return array( 
            new TwigFilter('base64_encode', array($this, 'base64_en'))
        );
    }

    public function base64_en($input) {
       return base64_encode($input);
    }
} 
```

And then in your twig template you can do

```
{{ 'hello world' | base64_encode }} 
```

Thats it. For detailed explanation, you could check out the reference.

**Reference**: **[DigitalFortress](https://digitalfortress.tech/php/create-custom-twig-filter-under-2-min/)**

# bash - 在 for 循环中的 shell 脚本 Grep -f

> ID：11907140
> 
> 赞同：1
> 
> 时间：2012-08-10T18:20:13.330
> 
> 标签：bash, for-loop, grep

需要帮助 grep -f 在 for 循环中运行

基本上对于name.txt中的每个条目，我想从A.txt中grep所有行并在单独的文件中写出来

例如 1) name.txt 是以下三个名称的列表

```
America
Europe   
Asia 
```

2）A.txt 是（制表符分隔）

```
X y Z America
x a b Asia
y b c America
a b c Europe
x y z Europe
a b c America 
```

现在从 name.txt 文件中获取每个条目，在 A.txt 中搜索相应的行并返回三个单独的输出文件：

```
file1: X y Z America
       y b c America
       a b c America

file2: a b c Europe
       x y z Europe
file3: x a b Asia 
```

可能是用脚本编写并用 bash 执行？

提前致谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:42:09.157

运行以下脚本（作为 ./script.sh name.txt input.txt），其中 name.txt 具有名称，而 input.txt 是您的输入文件。输出文件保存为 file_America.txt、file_Asia.txt 和 file_Europe.txt

```
#!/bin/bash -x

while read line; do
#skip empty line
[ -z "$line" ] && continue;
#run grep and save the output
grep "$line" "$2" > file_$line.txt;
done < "$1" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T19:38:55.970

一种使用方式`awk`：

```
awk '
    ## Process first file of arguments. Save data in an array, the name as
    ## key, and the number of the output file to write as value.
    FNR == NR {
        name[ $1 ] = FNR;
        next;
    }

    ## Process second file of arguments. Check last field of the line in the 
    ## array and print to file matched by the value.
    FNR < NR {
        print $0 > sprintf( "%s%d", "file", name[ $NF ] );
    }
' name.txt A.txt 
```

检查输出文件：

```
head file[123] 
```

结果如下：

```
==> file1 <==
X y Z America
y b c America
a b c America

==> file2 <==
a b c Europe
x y z Europe

==> file3 <==
x a b Asia 
```

# objective-c - 缩小 UIImage

> ID：11907143
> 
> 赞同：0
> 
> 时间：2012-08-10T18:20:20.690
> 
> 标签：objective-c, cocoa, uiimageview, uiimage

我在调整 JPEG 图片大小时遇到​​问题。

我希望它是原始图片的大小，但它覆盖了整个屏幕。我在尝试`myImageView = [[UIImageView alloc] initWithImage:[[UIImage imageNamed:@"Cube Tile.jpeg"] myImageView.contentMode = UIViewContentModeScaleAspectFit;`

这就是发生的事情：

*   我的模拟器屏幕被我的图像覆盖，但高度略小。

我也尝试添加这个：`myImageView = [[UIImageView alloc] initWithImage:[[UIImage imageNamed:@"Cube Tile.jpeg"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)]];` 这就是发生的事情：

*   我的模拟器屏幕被我的图像的微小版本覆盖。

是否可以在没有太多代码行的情况下做到这一点？

对不起，如果我有点模糊。

*   注 1：原始图片为 24 x 24 像素
*   注2：我是一名新开发人员，所以我只是在试验。

在此先感谢，马尼克斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:44:01.260

您可以更改的值

```
myImageView.contentMode = UIViewContentModeScaleAspectFit; 
```

到这些值之一：

```
 typedef enum {
   UIViewContentModeScaleToFill,
   UIViewContentModeScaleAspectFit,
   UIViewContentModeScaleAspectFill,
   UIViewContentModeRedraw,
   UIViewContentModeCenter,
   UIViewContentModeTop,
   UIViewContentModeBottom,
   UIViewContentModeLeft,
   UIViewContentModeRight,
   UIViewContentModeTopLeft,
   UIViewContentModeTopRight,
   UIViewContentModeBottomLeft,
   UIViewContentModeBottomRight,
} UIViewContentMode; 
```

查看更多官方文档[http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T18:40:20.753

您是否尝试在图像视图上设置框架？例如，

```
 float x = 0.0;
    float y = 0.0;
    [myImageView setFrame:CGRectMake(x,y,24,24)]; 
```

（并确保它不会尝试根据 .xib 中的设置自动调整大小）

```
 [myImageView setAutoresizingMask:UIViewAutoresizingNone]; 
```

# mysql - 正在努力添加这个 mysql 外键。

> ID：11907147
> 
> 赞同：1
> 
> 时间：2012-08-10T18:20:30.740
> 
> 标签：mysql

所以我在这里遇到了一些问题，我似乎无法解决这个问题。我正在创建一个新表`Assessment_Subsection_To_Group`，然后我需要添加一个列和外键，`Assessment_Subsection`这将在它们之间创建一个链接。

我到目前为止的代码如下所示。

```
CREATE TABLE IF NOT EXISTS `Assessment_Subsection_To_Group` (
    `assessment_subsection_to_group_id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
    `title` VARCHAR(255) NOT NULL,
    `time_created` DATETIME NOT NULL,
    `time_modified` TIMESTAMP NOT NULL ON UPDATE CURRENT_TIMESTAMP,
    `person_id_created` INT(11) UNSIGNED NOT NULL,
    `person_id_modified` INT(11) UNSIGNED NOT NULL,
    PRIMARY KEY (`assessment_subsection_to_group_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

ALTER TABLE `Assessment_Subsection`
ADD COLUMN `assessment_subsection_to_group_id` INT(11) UNSIGNED NOT NULL FIRST,
ADD FOREIGN KEY `assessment_subsection_to_group_id_ibfk` (`assessment_subsection_to_group_id`) REFERENCES `Assessment_Subsection_To_Group` (`assessment_subsection_to_group_id`); 
```

当我尝试更改`Assessment_Subsection`以尝试添加约束时，该表按预期创建问题。我收到此错误：

```
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`at`.<result 2 when explaining filename '#sql-47f_48'>, CONSTRAINT `assessment_subsection_to_group_id_ibfk` FOREIGN KEY (`assessment_subsection_to_group_id`) REFERENCES `Assessment_Subsection_) 
```

然后我检查了`show engine innodb status;`哪个给了我这个消息。我无法想象它的故事。sql 对我来说看起来不错，但我显然遗漏了一些东西。

```
ALTER TABLE `Assessment_Subsection` ADD COLUMN `assessment_subsection_to_group_id` INT (11) UNSIGNED NOT NULL FIRST, ADD CONSTRAINT `assessment_subsec
Foreign key constraint fails for table `at`.<result 2 when explaining filename '#sql-47f_48'>:
,CONSTRAINT `assessment_subsection_to_group_id_ibfk` FOREIGN KEY (`assessment_subsection_to_group_id`) REFERENCES `Assessment_Subsection_To_Group` (`
Trying to add in child table, in index `assessment_subsection_to_group_id_ibfk` tuple:
DATA TUPLE: 2 fields;
 0: len 4; hex 00000000; asc     ;;
 1: len 4; hex 8000000b; asc     ;;

But in parent table `at`.`Assessment_Subsection_To_Group`, in index `PRIMARY`,
the closest match we can find is record:
PHYSICAL RECORD: n_fields 1; compact format; info bits 0
0: len 8; hex 696e66696d756d00; asc infimum ;; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:12:43.837

对，所以我想我解决了这个问题。

我创建了`Assessment_Subsection_To_Group`空表。

我的`Assessment_Subsection`表中已经有很多数据。当我在其中添加新列时，它使用默认值填充该列`0`。因此，当我尝试将外键添加到`Assessment_Subsection`它时，它会看到`0`列中的值，并且在`Assessment_Subsection_To_Group`表中看不到任何可以引用的值，并吐出它的“虚拟”。

所以我通过添加一条记录解决了这个问题，`Assessment_Subsection_To_Group`然后用`0`'s 更新列以匹配我刚刚添加到的记录的 id`Assessment_Subsection_To_Group`并尝试再次添加外键，这很有效。

肯定有一个更简单的方法来做到这一点吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T18:23:16.463

将改变分成两个阶段。将列添加到一个中，然后将外键添加到另一个中。该列直到更改完成后才存在，但是您已经尝试从创建它的语句中对其进行处理。

例如，当面包还在搅拌机中时，甚至还没烤好，你就想给它涂黄油。

# php - 如何在 JavaScript 函数中使用 MySQL 数据库数据？

> ID：11907149
> 
> 赞同：0
> 
> 时间：2012-08-10T18:20:48.227
> 
> 标签：php, javascript, mysql, charts

我需要填充由 JavaScript 函数创建的图表。该图表应填充 MySQL DB 数据。我在**myquery.php**中定义了 SQL 查询。此 php 代码返回一个用于创建图表的数组。问题是如何执行**myquery.php**并获取我可以在 JavaScript 函数**createChartControl**中进一步使用的输出数组？

```
<script type="text/javascript" language="JavaScript">
function createChartControl(htmlDiv1)
{
   // Draw chart
}
(function(){
    createChartControl('schedule');
})();
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:54:52.923

我强烈建议你在 JS 端使用 jQuery 库。( [http://jquery.com/](http://jquery.com/) )

1 - 没有 Ajax：（如果您的数据在页面加载时可用）：

```
<script type="text/javascript" language="JavaScript">
var myData = <?php echo json_encode($myArray); ?>;

function createChartControl(htmlDiv1)
{
   // your code to draw chart
   // read myData a fill the chart
}
(function(){
    createChartControl('schedule');
})();
</script> 
```

2 - 使用 ajax（使用 jQuery）：

```
function loadMyData(){
 $.getJSON('ajax/myquery.php', function(data) {
  var items = [];

  $.each(data, function(key, val) {
    items.push(val);
  });

  $('<ul/>', {
    'class': 'my-new-list',
    html: items.join('')
  }).appendTo('body');
 });
} 
```

有用的网站： [http://php.net/manual/pt_BR/function.json-encode.php](http://php.net/manual/pt_BR/function.json-encode.php)
[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)
[在 JavaScript 中解析 JSON？](https://stackoverflow.com/questions/4935632/how-to-parse-json-in-javascript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T18:44:46.767

[当涉及到 AJAX 时， jQuery](http://api.jquery.com/jQuery.ajax/)将使您的生活变得更加轻松。如果您真的反对使用库，您可以查看[xmlhttprequest](http://www.w3schools.com/ajax/ajax_xmlhttprequest_create.asp)的示例，它可以在纯 javascript 中使用。

jQuery 看起来像：

```
function ajaxCall(){

    $.ajax({
         url: 'myquery.php',
         type: 'POST',
         data: {any_var: var_value},
         success: function(data) {
                  var returned_array = $.parseJSON(data)
                  createChartControl(htmlDiv1, returned_array)
                  }
    })
} 
```

基本上，您将所需的任何数据发送到 myquery.php 中`any_var`，使用 检索 myquery.php 中的该值`$_POST['any_var']`，运行您的查询，然后[json_encode](http://php.net/manual/en/function.json-encode.php)您想要传递回您的 javascript 的数组，最后解析您返回`data`的成功函数成为一个可用的 javascript 对象。现在你可以用它做你想做的事，但在我的例子中你可以看到我将它发送`returned_array`到你的`createChartControl()`函数（它需要为你的数组添加一个参数。

多田，阿贾克斯魔法。

# jsp-tags - onclick 标记在 h:commandLink 中给出错误

> ID：11907154
> 
> 赞同：1
> 
> 时间：2012-08-10T18:21:17.713
> 
> 标签：jsp-tags, jsf-1.2

我正在使用 JSF 1.2，我试图将 onclick 标记添加到 h:commandLink，这会引发运行时错误。我试图用jsp编写的代码是：

```
<h:commandLink id="btn" styleClass="button" onclick="performAction();">
<h:outputText value="some value" />
</h:commandLink> 
```

它给了我一个错误：“无法找到标签属性 onclick 的标签属性信息。”任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:32:10.027

从[h:commandLink](http://www.developersbook.com/jsf/jsf-tags-reference/html/commandLink.php)它说...

> commandLink 标记呈现一个 HTML“a”锚元素，当单击该元素时，该元素的作用类似于表单提交按钮。commandLink 标记用于向应用程序提交一个动作事件。

*   使用`<h:commandLink>`标签来表示 POST 表单数据的链接。
*   h:commandLink 标记必须包含一个嵌套的 outputText 标记，它表示用户单击以生成事件的文本。
*   生成的 HTML 使用语法。
*   commandLink 标记将呈现 JavaScript。如果您使用此标签，请确保您的浏览器支持 JavaScript。
*   onclick 属性会自动填充 Javascript 以提交表单。
*   设置 type = “reset” 使链接成为重置按钮。
*   使用 action 属性将链接与 JavaBean 的方法相关联。

您应该通过**查看源**代码检查源代码并通过 Firefox 检查 java 脚本错误。

# javascript - 让一个 s-control 打开一个嵌入在 SF 中的新窗口？

> ID：11907156
> 
> 赞同：0
> 
> 时间：2012-08-10T18:21:23.217
> 
> 标签：javascript, salesforce, apex-code, visualforce

设置：

我们正在使用 S 控件覆盖选项卡。S-Control 发布一个表单以打开一个嵌入在 SF 窗口中的新链接 - 带有标题和侧边栏。我需要的是在带有 SF 标题和侧边栏的新窗口中打开该窗口。

有人可以建议吗？

谢谢达斯菜鸟！

```
<html> 
<head> 

<script type="text/javascript"> 
var prodURL = "https://blah"; 

function postwith (to, params) { 
var myForm = document.createElement("form"); 
myForm.method = "post"; 
myForm.target = "_self"; 
myForm.action = to; 

for (var p in params) { 
var myInput = document.createElement("input"); 
myInput.setAttribute("name", p); 
myInput.setAttribute("value", params[p]); 
myInput.setAttribute("type", "hidden"); 
myForm.appendChild(myInput); 
} 

document.body.appendChild(myForm); 
myForm.submit(); 

} 
</script> 

<style type="text/css"> 
#overlayPageLoad { 
background: none repeat scroll 0 0 white; 
height: 100% !important; 
left: 0; 
position: absolute; 
text-align: center; 
top: 0; 
width: 100% !important; 
} 
#overlayPageLoad .middle { 
color: #888888; 
font-size: 16px; 
left: 0; 
position: absolute; 
top: 50%; 
width: 100%; 
} 
</style> 

</head> 

<body onload= "postwith(prodURL, {SF_SESSION:'{!$Api.Session_ID}',SF_ENDPOINT:'{!$Api.Partner_Server_URL_120}'})"; > 

<div id="overlayPageLoad"> 
<span class="middle"> 
<img src="https://prettypicture"> 
&nbsp;Connecting... 
</span> 
</div> 

</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:17:32.283

我的方法：

1.  创建一个新的**Visualforce 选项卡**
2.  为选项卡选择 Visualforce 页面（您的 S-Controll 页面）
3.  保存选项卡

现在，如果用户单击选项卡，他将重定向到您的页面。它看起来像这样：单击选项卡 -> S-Control 页面打开 -> 在 S-Control 页面中运行一个 javascript 代码，该代码在弹出窗口中打开另一个页面。

在您的 S-Controll 页面中添加一些 JavaScript 以打开一个弹出窗口：

```
<!-- language: lang-js -->
    var height = 300;
    var width = 500;
    var windowCenter1 = (screen.height - height) / 2;
    var windowCenter2 = (screen.width - width) / 2;
    var windowFeatures = 'height=' + height + ',width=' + width +
                         ',toolbar=0,scrollbars=1,status=0' + 
                         ',resizable=0,location=0,menuBar=0';

    newPopup = open("/apex/youPopUpPage","myPopup", windowFeatures+',left=' + windowCenter2 +',top=' + windowCenter1);
    newPopup.focus(); 
```

# objective-c - 将自定义字体设置为粗体

> ID：11907157
> 
> 赞同：4
> 
> 时间：2012-08-10T18:21:34.377
> 
> 标签：objective-c, ios, xcode

我已经成功地在我的项目中添加了一个自定义字体，并且通过执行这行代码可以正常工作：

```
 [sideScoreLabel setFont:[UIFont fontWithName:@"Caveman" size:34]]; 
```

但是我希望这个自定义字体加粗。我对此进行了研究，似乎每个人都在说在字体名称的末尾添加“-Bold”或“-BoldMT”，使其如下所示：

```
 [sideScoreLabel setFont:[UIFont fontWithName:@"Caveman-Bold" size:34]]; 
```

当我运行我的项目时，它似乎不起作用。有谁知道我做错了什么？也许我使用的字体不适用于粗体？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T18:36:52.487

> 我已经成功地在我的项目中添加了一个自定义字体，并且通过执行这行代码可以正常工作：

老兄，您在 iOS 捆绑包中 添加了**自定义字体。**

如果您想要该字体的粗体版本，您需要提供系统不会为您提供的字体。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-10T18:24:49.673

当您提到字体无法加粗时，您走在正确的轨道上。您可以使用这段代码验证这一点，该代码将输出以控制所有可用字体，然后您可以在其中查找您的字体。

```
NSArray *familyNames = [[NSArray alloc] initWithArray:[UIFont familyNames]];
  NSArray *fontNames;
  NSInteger indFamily, indFont;
  for (indFamily=0; indFamily<[familyNames count]; ++indFamily)
  {
      NSLog(@"Family name: %@", [familyNames objectAtIndex:indFamily]);
      fontNames = [[NSArray alloc] initWithArray:
          [UIFont fontNamesForFamilyName:
          [familyNames objectAtIndex:indFamily]]];
      for (indFont=0; indFont<[fontNames count]; ++indFont)
      {
          NSLog(@"    Font name: %@", [fontNames objectAtIndex:indFont]);
      }
      [fontNames release];
  }
  [familyNames release]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-28T10:15:12.573

1.  `Spotlight`在“字体册”中查找
2.  打开它并在字体列表中找到您的字体
3.  如您所见，任何字体都有多个名称。在您的代码中，您始终应该使用`PostScript`字体名称。有时`PostScript`名称与字体的文件名不相似。

# file - 将文件复制到多个文件夹，而不是子文件夹批处理

> ID：11907159
> 
> 赞同：3
> 
> 时间：2012-08-10T18:21:45.697
> 
> 标签：file, for-loop, batch-file, copy

寻找一个批处理文件，它将一个文件复制到多个文件夹中（在放置批处理文件的同一目录中），但不是它们的子文件夹。

例如：
我需要`K:\NewCustomers\NewPartNumber.Bat`进入`K:\NewCustomers\Customer Name\`
但不是任何子文件夹`\Customer Name\`，有 200-300 个“客户名称”文件夹。

我正在使用：

```
for /R "K:\NewCustomers\" %%a in (.) do copy "K:\NewCustomers\NewPartNumber.bat" "%%a" 
```

但这是递归的，现在这些其他文件夹中有文件夹，如果不将它放在每个子文件夹中，我就无法运行此命令。

我尝试运行一个`for /d`循环：

```
for /d "K:\NewCustomers\" %%a in (.) do copy "K:\NewCustomers\NewPartNumber.bat" "%%a" 
```

但是在语法上没有成功，经过一段时间的查找和尝试不同的事情后，我正努力寻找答案。我收到此错误：

> `K:\NewCustomers* was unexpected at this time.`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T21:50:35.953

使用`for /d`以非递归方式遍历文件夹确实是正确的方法，但您需要像这样使用它：

```
for /d %%a in ("K:\NewCustomers\*") do copy "K:\NewCustomers\NewPartNumber.bat" "%%a" 
```

或者，您可以`for /f`结合使用循环`dir`：

```
@echo off
pushd "K:\NewCustomers"
for /f "tokens=*" %%a in ('dir /A:D /B') do copy "NewPartNumber.bat" "%%a"
popd 
```

不过，就个人而言，我更喜欢第一种方法。

# javascript - RGB 到 HEX JavaScript 函数在 Chrome 中工作，但不适用于 Firefox 或 Safari

> ID：11907160
> 
> 赞同：2
> 
> 时间：2012-08-10T18:22:02.330
> 
> 标签：javascript

我最近（在 SO.com 上）发现了一个漂亮的小函数，可以将 RGB 值转换为其十六进制对应值。作为参数，我传递了 CSS“颜色”属性的值（例如：“rgb(45,187,251)”）。这是功能：

```
function rgb2hex(rgb) {
    rgb = rgb.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
    function hex(x) {
        return ("0" + parseInt(x).toString(16)).slice(-2);
    }
    return "#" + hex(rgb[1]) + hex(rgb[2]) + hex(rgb[3]);
} 
```

它在 Chrome 中完美运行，但 Firefox 中的 Firebug 控制台出现以下错误：

> rgb 为空
> 
> 返回“#”+十六进制（rgb [1](http://goalcandy.com)）+十六进制（rgb[2]）+十六进制（rgb[3]）；

为什么会这样？

您可以在[goalcandy.com](http://goalcandy.com)上看到它的使用情况。只需点击“立即开始”，然后点击屏幕左侧的“保存”并观看 Firebug 控制台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:40:13.120

在调用中使用 Firebug 在该页面上进行跟踪

```
data += rgb2hex(jqMesh.css('border-color')) + '|' 
```

在第 1516 行——调用`jqMesh.css('border-color')`返回一个空字符串。

在该断点处停止时调用`jqMesh.css('color')`Firebug 控制台会返回“rgb(68, 68, 68)”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T19:14:32.957

结果证明不是*rgb2hex()*函数有问题，而是 Firefox 中 jquery 的*css()*方法有问题。也就是说，在 Firefox 中，调用*.css("border-color")*返回一个 void 值，而不是*.css("border-top-color")*例如。Chrome 也理解第一个版本。

# javascript - 选择优先考虑输出大小的 Compile-to-JS 语言

> ID：11907162
> 
> 赞同：0
> 
> 时间：2012-08-10T18:22:11.423
> 
> 标签：javascript, coffeescript, google-closure-compiler, google-closure

我目前正在使用一个包含在一堆网站中的大型 Javascript 代码库（目前缩小了大约 150k）。随着更多功能的添加，它的大小一直在增长，所以我现在正在研究可以减小大小的方法。

目前可用的选项之一是从纯 JavaScript 切换到 compile-to-JS 库。这在开发过程中可能会有所帮助，因为基于类的 OOP 和编译时类型检查等功能可以为我们节省一些工作。但是，重要的是这样的更改不会增加代码库的大小，而不是纯粹在 JS 中工作。我研究过的所有语言似乎都没有特别关注输出大小。Dart 看起来是最好用的，但编译后的输出大得离谱。GWT 引入的问题多于它解决的问题，而且输出结果也不是特别令人愉快。我自己没有尝试过 Haxe，但一位同事尝试过，他告诉我它的输出非常臃肿。到目前为止，CoffeeScript 似乎是最有前途的，因为输出是相当标准的 Javascript，

是否有一种编译为 JS 的语言可以生成简洁的 JavaScript 并很好地缩小（尤其是使用 Google Closure），同时使开发过程更容易？还是我们更好地坚持手写 JS？

如果手写 JS 是要走的路，是否有任何工具或技术可以对输出大小产生特别大的影响？谷歌的闭包库看起来很有趣，因为它们和我们自己的代码在功能上有很多重叠，但好处必须是显着的，因为要切换到这个库需要做很多工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T19:21:02.857

如果您正在查看非 JS 语言选项，您应该考虑以与 Closure Compiler 的 ADVANCED 优化兼容的样式简单地使用带注释的 JS。这可能会为您提供最小的代码大小，同时仍然能够利用纯 JS 库。

对于更狂野的选择，我听说过 JSX 和 UberScript（类型增强型 CoffeeScript）的好消息，它们都可以生成合理的 Closure Compile 样式的 javascript。

通过源映射进行源级调试应该使底层 JS 源的“漂亮”不那么相关。我不知道这两个项目的 Source Maps 的状态。Dart、GWT 和 Closure Compiler 都生成它们。

# python - 如何使用 python 停止程序的执行？

> ID：11907163
> 
> 赞同：2
> 
> 时间：2012-08-10T18:22:13.157
> 
> 标签：python, batch-file, exit-code

我使用了一个程序（在 Windows 上），我不会透露它的名称，它可以从命令行打开而无需经过任何身份验证。我正在尝试创建一些安全性以防止其他人以这种方式访问​​它。

我计划用一个批处理文件替换这个程序的内置二进制文件，第一行指向我自己的身份验证系统（在 python 中实现，使用 py2exe 编译为 .exe），第二行指向打开的命令程序。

我最初的计划是让我的脚本（auth.py）在身份验证失败时停止批处理文件执行第二行，如下所示：

```
if not authenticated:
    print('Authentication failed')
    sys.exit(1)
else:
    print('Successfully authenticated!') 
```

我曾指望 sys.exit(1) 来做到这一点，直到我完成脚本开发后我才费心对其进行测试。现在我意识到 sys.exit 只退出 python 进程。

我要么需要一种方法来从 python 脚本中停止批处理，要么需要一种方法来让批处理检测来自 auth.py 的退出代码（如果失败则为 1，如果通过则为 0）并仅在退出代码为时执行其他程序0 从那里。

如果有人能给我任何建议或任何形式的帮助，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:27:26.010

用于`subprocess`在认证成功时调用程序。因此，您的 python 脚本将启动程序，而不是批处理文件。

```
if not authenticated:
    print('Authentication failed')
    sys.exit(1)
else:
    print('Successfully authenticated!')
    proc = subprocess.Popen([program]) 
```

请注意，如果用户有权从 python 或批处理脚本中启动程序，则没有什么可以阻止他们直接访问它。这将阻止任何人访问该程序；保存也许极端的非技术性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T18:35:45.627

我发现这两种方法希望这些可能会有所帮助
[http://metazin.wordpress.com/2008/08/09/how-to-kill-a-process-in-windows-using-python/](http://metazin.wordpress.com/2008/08/09/how-to-kill-a-process-in-windows-using-python/)
[http://code.activestate .com/recipes/347462-terminating-a-subprocess-on-windows/](http://code.activestate.com/recipes/347462-terminating-a-subprocess-on-windows/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T18:26:54.183

你可以做一些非常复杂的事情来尝试找到 Python 进程的父 PID 并杀死它，或者你可以只检查`%ERRORLEVEL%`你的批处理文件。就像是：

```
python auth.py
if %ERRORLEVEL% neq 0 exit /B 1 
```

# r - 如何编写一个for循环来使用R中的数学方程进行计算？

> ID：11907165
> 
> 赞同：0
> 
> 时间：2012-08-10T18:22:26.510
> 
> 标签：r, math, for-loop, plyr

在 R 中，我想找到一种使用以下数学方程和 .csv 文件编写 for 循环的方法。

这是一个显示 .csv 文件中的两行的示例。

```
6/27/2010 8:45  131.04
6/27/2010 9:00  111.11 
```

第二列将`x`在以下等式中。

![http://i.stack.imgur.com/inOKV.jpg](../Images/87cc959b29ced2381816f40e24557f05.png)

我需要帮助编写上面的等式和一个用于写入具有负载可变性的 .csv 文件的 for 循环。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T19:05:27.187

要获得一组特定数字的 L_var，我相信这会起作用：

```
l_var = sd(x) / mean(x) 
```

哪里`x`是数字的向量。接下来我们将它包装在一个函数中：

```
l_var = function(x) sd(x) / mean(x)
outcome = l_var(input) 
```

其中`input`是一个数字向量，以及`outcome`数学方程的结果。

如果您的时间戳列属于 class `POSIXlt`，您可以使用`strftime`创建一个因子列来对数据进行分类。有关此步骤的更多详细信息，请参阅此[SO 答案](https://stackoverflow.com/questions/10007877/calculating-hourly-averages-from-a-multi-year-timeseries/10008233#10008233)。接下来，您可以`ddply`从`plyr`包中使用来获取`l_var`每个类别（比如一天）：

```
result = ddply(df, .(cat), summarise, l_var = l_var(value)) 
```

其中`df`是输入 data.frame 其中`cat`是时间类别，并`x`在上面的等式中取值。要将结果写入文件，您可以使用`write.csv`：

```
write.csv(result, file = "out.csv") 
```

我认为这涵盖了所有步骤...

# function - MATLAB：有没有一种方法可以更好地组织实验函数？

> ID：11907166
> 
> 赞同：6
> 
> 时间：2012-08-10T18:22:33.797
> 
> 标签：function, matlab, arguments, function-parameter

我将进行一组实验。评估的主要方法具有以下签名：

```
[Model threshold] = detect(...
    TrainNeg, TrainPos, nf, nT, factors, ...
    removeEachStage, applyEstEachStage, removeFeatures); 
```

其中`removeEachStage`, `applyEstEachStage`, 和`removeFeatures`是布尔值。您可以看到，如果我颠倒任何这些布尔参数的顺序，我可能会得到错误的结果。

MATLAB 中是否有一种方法可以更好地组织以最小化这种错误？或者有什么工具可以用来保护我免受这些错误的影响？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T18:24:38.150

**有结构的组织**

您可以输入`struct`具有这些参数的字段作为字段。

例如具有字段的结构

```
setts.TrainNeg
     .TrainPos
     .nf
     .nT
     .factors
     .removeEachStage
     .applyEstEachStage
     .removeFeatures 
```

这样，当您设置字段时，就可以清楚地知道该字段是什么，这与您必须记住参数顺序的函数调用不同。

然后你的函数调用变成

```
[Model threshold] = detect(setts); 
```

你的函数定义就像

```
function [model, threshold] = detect(setts) 
```

然后只需将出现的 eg 替换`param`为`setts.param`。

**混合方法**

如果您愿意，也可以将这种方法与您当前的方法混合使用，例如

```
[Model threshold] = detect(in1, in2, setts); 
```

如果您仍想明确包含`in1`and `in2`，并将其余部分捆绑到`setts`.

**面向对象的方法**

另一种选择是将检测变成一个类。这样做的好处是`detect`对象将具有具有固定名称的成员变量，而不是结构，如果在设置字段时打错字，您只需创建一个名称拼写错误的新字段。

例如

```
classdef detect()
properties
  TrainNeg = [];
  TrainPos  = [];
  nf = [];
  nT = [];
  factors = [];
  removeEachStage = [];
  applyEstEachStage = [];
  removeFeatures =[];
end
methods
  function run(self)
    % Put the old detect code in here, use e.g. self.TrainNeg to access member variables (aka properties)
  end
end 
```

# android - Android：您可以使用 APK 文件将文件安装到设备而不是应用程序吗

> ID：11907168
> 
> 赞同：0
> 
> 时间：2012-08-10T18:22:59.300
> 
> 标签：android, file, installation, apk, sd-card

我有一个使用存储在 SD 卡上的文件的应用程序。我想发布新的“模块”，它们只是 sdcard 上的数据文件（但没有单独的应用程序）。我想使用市场来管理安装/卸载/更新。

APK文件有没有办法创建“仅文件”安装程序？

我确实有主应用程序，它将“默认模块”文件放在 Asset 文件夹中，然后在第一次执行时将它们复制到 SD 卡，但这需要实际运行一个应用程序。我希望“模块”直接将文件放在 sdcard 上..

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:32:40.860

谷歌最近公布了 Google Play 的“智能应用更新”。这允许用户仅下载该更新的更改，而不是整个 APK。我还没有在 Play 商店中发布应用程序，但这应该包含在他们的提交过程中。

[http://developer.android.com/guide/google/play/expansion-files.html](http://developer.android.com/guide/google/play/expansion-files.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T18:28:32.320

看起来[APK 扩展](http://developer.android.com/guide/google/play/expansion-files.html#StorageLocation)已经做了你想要的。它说扩展文件被解压缩到共享存储，我相信它是 SD 卡。

# function - lua中的全局函数

> ID：11907169
> 
> 赞同：4
> 
> 时间：2012-08-10T18:23:00.457
> 
> 标签：function, lua, global

有没有办法在 Lua 中拥有一个可以从项目中的任何模块访问的函数，而无需首先要求它？

就像是：

```
module(..., package.seeall);
function globFoo()
       print('global foo called');
end 
```

并从其他地方调用它，比如 main

```
--main

globFoo(); 
```

不需要它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T18:28:21.387

一个模块只是一个 Lua 脚本。你可以在那里做任何你想做的事；你甚至不必调用`module`你的模块脚本。事实上，这些天`module`通常[被认为是有害](http://lua-users.org/wiki/LuaModuleFunctionCritiqued)的，这就是它在 Lua 5.2 中被弃用的原因。

实际上，只需移动代码即可：

```
function globFoo()
       print('global foo called');
end
module(..., package.seeall); --Module created after global function 
```

所以是的，你可以让一个模块修改全局表。我非常建议您不要这样做（因为它会在 Lua 脚本之间创建隐式排序，这使得很难知道哪个脚本使用了哪些东西）。但你可以做到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-09T03:27:22.907

这是如何完成的示例：

在 global.lua 中（全局函数所在的位置）：

```
globalFunction1 = function(params)
    print("I am globalFunction1")
end 
```

在调用文件 caller.lua 中：

```
globalFunction1(params)    -- This will call the global function above 
```

# java - 在java实现中寻找javascript md5方法

> ID：11907171
> 
> 赞同：0
> 
> 时间：2012-08-10T18:23:07.833
> 
> 标签：java, javascript, md5

我在[站点 auth](http://dl.dropbox.com/u/54101088/md5.txt)上有 Javascript md5 。

我只需要实现这个功能：

```
function hex_md5(s){ return binl2hex(core_md5(str2binl(s), s.length * chrsz));} 
```

我需要以下方法的帮助：

将 little-endian 单词数组转换为十六进制字符串：

```
function binl2hex(binarray)
{
  var hex_tab = hexcase ? "0123456789ABCDEF" : "0123456789abcdef";
  var str = "";
  for(var i = 0; i < binarray.length * 4; i++)
  {
    str += hex_tab.charAt((binarray[i>>2] >> ((i%4)*8+4)) & 0xF) +
           hex_tab.charAt((binarray[i>>2] >> ((i%4)*8  )) & 0xF);
  }
  return str;
} 
```

将字符串转换为 little-endian 单词数组 如果 chrsz 是 ASCII，则 >255 的字符会被忽略其高字节。

```
function str2binl(str)
{
  var bin = Array();
  var mask = (1 << chrsz) - 1;
  for(var i = 0; i < str.length * chrsz; i += chrsz)
    bin[i>>5] |= (str.charCodeAt(i / chrsz) & mask) << (i%32);
  return bin;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:47:59.300

如果你只是想实现 MD5，那是 java 内置的东西。

[https://stackoverflow.com/a/415971/576519](https://stackoverflow.com/a/415971/576519)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T03:16:18.580

我开发了一个与标准 JavaScript 函数兼容的简单 Java MD5 函数，您可以从以下网址下载该类：http: [//developersfound.com/HexMD5.zip](http://developersfound.com/HexMD5.zip)

这是代码：

```
/* This MD5 hash class is compatible with the JavaScript MD5 has code found at http://pajhome.org.uk/crypt/md5/md5.html */
package com.DevFound;

import java.security.MessageDigest;

public class HexMD5 {
    public static String getMD5Str(String inputVal)throws Exception
    {
        MessageDigest md = MessageDigest.getInstance("MD5");
        md.update(inputVal.getBytes());

        byte byteData[] = md.digest();

        //convert the byte to hex format method 1
        StringBuffer sb = new StringBuffer();
        for (int i = 0; i < byteData.length; i++) {
            sb.append(Integer.toString((byteData[i] & 0xff) + 0x100, 16).substring(1));
        }

        //convert the byte to hex format method 2
        StringBuffer hexString = new StringBuffer();
        for (int i=0;i<byteData.length;i++) {
            String hex=Integer.toHexString(0xff & byteData[i]);
            if(hex.length()==1) hexString.append('0');
            hexString.append(hex);
        }
        return hexString.toString();
    }
} 
```

我尚未使用您的特定 JavaScript md5 函数测试此代码，但我已在代码顶部的注释中列出了它兼容的函数。

# c++ - 使用 std::vector 浏览向量 >

> ID：11907172
> 
> 赞同：-1
> 
> 时间：2012-08-10T18:23:15.587
> 
> 标签：c++, oop, vector, iterator, std-pair

我有以下向量：

```
std::vector< std::pair<std::string,bool > > myvec; 
```

如何使用迭代器浏览和打印向量的元素？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T18:25:07.833

你有什么问题？

```
typedef std::vector<std::pair<std::string, bool> > vector_type;
for (vector_type::const_iterator pos = myvec.begin();
     pos != myvec.end(); ++pos)
{
   std::cout << pos->first << " " << pos->second << std::endl;
} 
```

或者你可以使用`std::for_each`一些仿函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T18:26:25.697

1.  创建迭代器，指向向量的第一个元素（语法`Container::iterator iter = myContainer.begin()`：）
2.  在`for`-loop 中，遍历所有元素（`iterator`has `operator++`；结束条件是 - 检查迭代器是否已到达`end`容器的，例如`iter != myContainer.end()`：）
3.  迭代器就像指针，要访问它的成员，请使用`operator->`.
4.  `std::pair`就像一个具有两个字段的结构 -`first`和`second`，因此您可以打印向量的元素，例如：`iter->first`和`iter->second`。

# c# - 在 C# 中将数据写入 Excel 模板

> ID：11907174
> 
> 赞同：1
> 
> 时间：2012-08-10T18:23:15.883
> 
> 标签：c#, sql-server

**我的问题是：**我确实有一个 excel 报告模板，其中有多个单元格要填充数据库（SQL SERVER）中的数据。我以前没有对此进行编码（使用 C# 在 excel 表上写入数据），我需要一个指南，可以逐步指导我如何将数据写入单个报告工作表上的特定单元格。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:33:43.777

使用这个库 EPPlus。

[http://epplus.codeplex.com/](http://epplus.codeplex.com/)

良好的支持和网络中的大量示例

[http://epplus.codeplex.com/wikipage?title=FAQ&referringTitle=Documentation](http://epplus.codeplex.com/wikipage?title=FAQ&referringTitle=Documentation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T18:26:36.477

我的第一个 c# Excel 教程 :)

1.  [http://csharp.net-informations.com/excel/csharp-excel-tutorial.htm](http://csharp.net-informations.com/excel/csharp-excel-tutorial.htm)
2.  [http://www.codeproject.com/Articles/141811/Database-to-Excel-Spreadsheet](http://www.codeproject.com/Articles/141811/Database-to-Excel-Spreadsheet)

# php - 为什么这个 php 正则表达式不处理口音？

> ID：11907178
> 
> 赞同：0
> 
> 时间：2012-08-10T18:23:38.920
> 
> 标签：php, regex

我知道以前有人问[过](https://stackoverflow.com/questions/11123314/regex-and-accents-tildes)这个问题，但我仍然不明白为什么以下内容不起作用：

```
<?php
echo preg_replace('/(?:[?\p{L}]*\/)?(?:[?\w\-]*\/)?/', '$1', 'cafes/123456') . '<br />';
// '123456'

echo preg_replace('/(?:[?\p{L}]*\/)?(?:[?\w\-]*\/)?/', '$1', 'cafés/123456') . '<br />';
// 'café123456' where I expect 123456

echo preg_replace('/(?:[?\p{L}é]*\/)?(?:[?\w\-]*\/)?/', '$1', 'cafés/123456') . '<br />';
// '123456' thanks to the extra "é" after "\p{L}"
?> 
```

不`\p{L}`应该替换任何口音吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:33:14.527

您缺少将字符串视为 UTF-8 的`u` [修饰符](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)：

```
echo preg_replace('/(?:[?\p{L}]*\/)?(?:[?\w\-]*\/)?/u', '$1', 'cafes/123456') . '<br />';
// '123456'

echo preg_replace('/(?:[?\p{L}]*\/)?(?:[?\w\-]*\/)?/u', '$1', 'cafés/123456') . '<br />';
// '123456'

echo preg_replace('/(?:[?\p{L}é]*\/)?(?:[?\w\-]*\/)?/u', '$1', 'cafés/123456') . '<br />';
// '123456' 
```

# twitter-bootstrap - 在 twitter-bootstrap 轮播中居中一组响应式缩略图

> ID：11907179
> 
> 赞同：2
> 
> 时间：2012-08-10T18:23:47.633
> 
> 标签：twitter-bootstrap, carousel, thumbnails

我正在使用 twitter-bootstrap 并且需要创建一个轮播，其中每个轮播组显示 5 个缩略图。轮播需要在页面上居中，图像居中并且它们之间没有空间。此外，缩略图不应超过一排。相反，他们应该改变他们的大小。我根据以下内容拼凑出一些东西：[Twitter Bootstrap 2 carousel - 一次显示一组缩略图，例如 jcarousel](https://stackoverflow.com/questions/9745746/twitter-bootstrap-2-carousel-display-a-set-of-thumbnails-at-a-time-like-jcarou) 和[Twitter bootstrap：Centered Thumbnails](https://stackoverflow.com/questions/11120186/twitter-bootstrap-centered-thumbnails)，但无法使其正常工作。谢谢你的帮助。这是我的代码：http: [//jsfiddle.net/DeathRobot/shUT9/](http://jsfiddle.net/DeathRobot/shUT9/)

# javascript - 除了 class、id 和 text，我还能如何在 jQuery 的元素中传递变量？

> ID：11907181
> 
> 赞同：0
> 
> 时间：2012-08-10T18:23:57.693
> 
> 标签：javascript, jquery, html, ajax, variables

我有一个使用类和 id 的情况，但我需要在 jQuery 中传递一个变量。你怎么推荐？

HTML

```
<input
    type="text"
    id="cannot_change_this"
    class="rather_not_append_extra_classes_just_for_a_variable"
    value="Full Text Name"
    hash="ABCDE"> 
```

通过自动完成选择每个值时，都有一个关联的哈希值。在上面的示例中，值可能是`Full Text Name`，但这不是唯一的。我真正需要传递的是 hash: `ABCDE`。

我无法更改 id，我宁愿不添加额外的类，并且必须过滤掉用于样式的类以获取我的哈希值。而且由于它是一个`input`我也不能使用 .text() 。

我还能如何将`ABCDE`哈希传递给 jQuery？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:26:41.047

看看使用jQuery的数据方法

[http://api.jquery.com/jQuery.data/](http://api.jquery.com/jQuery.data/)

您可以在 javascript 中计算值的哈希值，然后将其设置为输入的数据。

此外，如果使用 HTML5，您可以在 HTML 中专门声明数据属性。所以你可以使用一个属性`data-hash=HASH`来设置你的数据。

或者，如果您不关心合规性或者您没有使用 HTML5，您可以设置自己的属性，例如

```
<input type="text" id="cannot_change_this"
class="rather_not_append_extra_classes_just_for_a_variable" 
value="Full Text Name" hash="ABCDE" /> 
```

像这样用 jQuery 阅读它：

```
var hash = $('input#idOfInput').attr('hash'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T18:27:28.283

如果我做对了。

设置值：

```
$("#cannot_change_this").data("hash", hashValue); 
```

稍后获取值：

```
$("#cannot_change_this").data("hash"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T18:32:01.500

您可以只使用 title 属性：

```
<input type="text" id="cannot_change_this"
class="rather_not_append_extra_classes_just_for_a_variable" 
value="Full Text Name"title="ABCDE" /> 
```

它是所有输入的标准属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T18:32:38.630

你可以有类似的东西：

```
jQuery(document).ready(function(){
//SET:
 jQuery("#cannot_change_this").attr("new-value", "ABCDE");
//READ:
 var val = jQuery("#cannot_change_this").attr("new-value");
 alert(val);
 }); 
```

# javascript - html链接变量

> ID：11907185
> 
> 赞同：0
> 
> 时间：2012-08-10T18:24:24.163
> 
> 标签：javascript, html

是否可以通过链接将两个变量传递到另一个 html 页面？

例如...我有一个目录页面，当用户单击商店链接时，它会链接到另一个 html 页面，其中地图以特定商店为中心。使地图以商店为中心的函数采用两个变量：storeID、storeName。有数百家商店，目前我必须通过对这两个变量进行硬编码来分别手动创建每个商店页面，以便每个页面的加载方式略有不同。有没有办法通过链接传递这两个变量，以避免许多不同的 html 页面？

也许类似于 `<a href "thisPage.html", var1, var2>?`

前任。代码

这个页面.html

```
var1;
var2; 

function myFunc(var1, var2) {
    ~~~
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:27:38.040

不是这样，但您可以使用 URL 参数。

```
thisPage.html?var1=foo&var2=bar 
```

然后你可以在第二页阅读它们。我喜欢为此使用此功能：

```
function gup( name )
{
  name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
  var regexS = "[\\?&]"+name+"=([^&#]*)";
  var regex = new RegExp( regexS );
  var results = regex.exec( window.location.href );
  if( results == null )
    return "";
  else
    return results[1];
} 
```

来自[http://www.netlobo.com/url_query_string_javascript.html](http://www.netlobo.com/url_query_string_javascript.html)

所以在你的第二页上，你可以做`gup("var1")`，你会得到`foo`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T18:27:01.563

使用查询字符串。

在 URL 中，a`?`表示查询的开始。它由一系列由`&`字符分隔的键=值对组成。

该`encodeURIComponent`函数将转义文本以作为键或值插入。

然后，您可以将其分配给`href`链接元素的属性或`location.href`对其进行设置。

# javascript - 没有文本安全性的密码字段

> ID：11907187
> 
> 赞同：0
> 
> 时间：2012-08-10T18:24:28.630
> 
> 标签：javascript, html, cordova, webkit, extjs

我正在做一个PhoneGap/Sencha touch 2.0 应用程序，使用xTemplates 来呈现HTML。性能是一个问题，不知何故，输入`<input type='password'>`标签比输入标签要快得多`<input type='text'>`（这意味着在虚拟键盘上点击字符的那一刻与它实际出现在输入框中的那一刻之间的延迟是短*很多*`type=password`）

我不知道为什么会这样，而且我觉得我真的没有时间从根本上解决性能问题（项目很快就要结束了）

我看到的最简单的解决方法就是禁用文本安全性并让我的输入/文本框只是密码类型。

我认为这应该可以解决问题：

```
-webkit-text-security: none; 
```

但我就是不能让它工作，

我在这里错过了什么吗？（我试图添加它`inline`和 as `!important`，但没有任何运气）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:56:40.383

据我所知，密码字段是扩展的 Ext.field.Text，这可能是您在其他性能不佳的字段上使用的。

这是来自 sencha-touch-all-debug.js：

```
Ext.define('Ext.field.Password', {
    extend: 'Ext.field.Text',
    xtype: 'passwordfield',
    alternateClassName: 'Ext.form.Password',

    config: {
        /**
         * @cfg
         * @inheritdoc
         */
        autoCapitalize: false,

        /**
         * @cfg
         * @inheritdoc
         */
        component: {
            type: 'password'
        }
    }
}); 
```

我猜您所看到的速度优势是将字符查找减少到单个字符？这是一个完全的猜测。

使用 Sencha Touch，您高度依赖 WebView 控件以及它在特定平台上的运行情况。如果这是在 Android 3.0 平台上，请告诉您的客户接受它或不支持该平台。即使是 Sencha Touch 示例代码在一个或 2 个平台上也存在抖动滚动和性能问题。对我来说，Android 3.0 是最糟糕的。我听说 4.0 解决了这些问题。

在 3.0 和 3.1 中运行的 webview 性能不佳 [http://code.google.com/p/android/issues/detail?id=17458](http://code.google.com/p/android/issues/detail?id=17458)

# lua - 关于 Lua 状态关闭和垃圾回收元方法的规则

> ID：11907189
> 
> 赞同：5
> 
> 时间：2012-08-10T18:24:36.430
> 
> 标签：lua

tl；dr 版本：如果垃圾收集元方法在 Lua 状态关闭期间访问全局变量，它是否安全？本地升值呢？

* * *

当 a`lua_State`被关闭时`lua_close`，Lua 文档说[所有对象都被删除](http://www.lua.org/manual/5.1/manual.html#lua_close)。它说任何相关的垃圾收集元方法都保证被调用。

伟大的。

但是，在这种范式下，有两种可能的 GC 元方法用例是不确定的：

1.  如果您有一个使用存储可收集值的局部变量的 GC 元方法怎么办。比如说，一个字符串、一个函数等。也就是说，你的 GC 元方法被定义为：

    ```
    local some_string = "string"
    function mt:__gc() --[[Do something with some_string]] end 
    ```

    在这种情况下会发生什么？是否有可能`some_string`被收集？我知道如果在正常情况下正在收集元表所在的对象，那么这是不可能的。Lua 会保证 的值`some_string`会一直保持到 GC 函数本身被收集为止。

    但是由于所有对象都被 销毁`lua_close`，是否有可能在函数被销毁之前 GC 函数的上值被销毁？我认为不是（因为这可能会导致各种问题），但我正在寻找真正的答案，而不是我的想法。

2.  我承认 #1 不太可能成为问题，因为它会在 GC 元方法中产生许多问题。然而，这是完全不同的事情：

    ```
    local some_string = "string"
    function mt:__gc() print(some_string) end 
    ```

    这看起来像＃1，但事实并非如此。为什么？因为它访问一个*全局变量*。即，`print`。

    函数与存储的任何值之间没有直接关联`print`（与案例 1 不同，其中`some_string`显然是函数的上值）。因此，`print`在 Lua 状态关闭期间调用函数之前可能会被收集。

问题是：在 Lua 状态关闭期间，垃圾收集元方法是否可以*安全*地使用全局表中的任何内容（忽略对全局表的故意破坏的可能性）？`print = nil`或者，作为一般规则，他们是否应该始终明确地将他们接触到的任何函数或数据设为本地？这足以避免问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T01:51:32.090

可以从该`__gc`方法访问的任何数据都可以安全访问；这包括本地人和可访问的表，例如`_G`，其中包含`print`.

（未）加载的 C 库可能是个问题；这会影响 Lua 5.1，并在 Lua 5.2.1 中修复。请参阅[“在库被卸载后终结器可能调用动态库中的函数”的补丁](http://www.lua.org/bugs.html/#5.2.0-3)。

# php - Html 添加脚本 Jquery

> ID：11907196
> 
> 赞同：0
> 
> 时间：2012-08-10T18:24:55.010
> 
> 标签：php

这个脚本

```
$(document).ready(function() { 
  $("selector").load('loader.php')

}) 
```

加载器.php

```
echo '<script src="ads.rels.js"></script>';// here coming .swf file 
```

我们怎么能这样工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:28:27.353

你为什么不直接加载 javascript 而不使用 PHP？像这样：

```
$.getScript("ajax/test.js")
.done(function(script, textStatus) {
  console.log( textStatus );
}) 
```

参考。 [http://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)

# bash - 如何在包含来自 postgres 数据库的数据的 bash 脚本中创建变量

> ID：11907204
> 
> 赞同：3
> 
> 时间：2012-08-10T18:25:18.957
> 
> 标签：bash, postgresql, variables, select

我正在寻找创建一个脚本，该脚本可以根据数据库中的字段找到特定的日期/时间目前我手动执行...

```
# psql gttvdb -U postgres
gttvdb=# select patch_date from version_history where version ='1.1.1'; 
```

我需要的是能够将该日期引用为 bash 脚本中的变量

```
#! /bin/sh
patchdate=$("select patch_date from version_history where version ='1.1.1';")
echo "last update was " $patchdate 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T18:35:54.947

试试这个：

```
patchdate=` psql -t -q -c "select patch_date from version_history where version ='1.1.1'"` 
```

# android - 关闭安卓设备需要密码

> ID：11907205
> 
> 赞同：3
> 
> 时间：2012-08-10T18:25:26.977
> 
> 标签：android

我想看看是否有可能拥有一个可以监控关机意图并需要密码/pin 才能继续关机的应用程序。理想情况下，我希望在按住电源按钮后出现关机菜单之前拥有它，因此在菜单显示“关机”和“飞行模式”等选项之前，用户需要输入密码/密码。我知道如果不植根设备，这可能是不可能的。只是想看看在没有root访问权限的情况下是否可以实现这样的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T19:58:45.353

关于电池拔出，Nexus 4 解决了这个问题。

关于意图 android.intent.action.SHUTDOWN- 听起来可以使用以下逻辑创建应用程序：

1.  监控 android.intent.action.SHUTDOWN
2.  要求用户输入密码或图案
3.  如果密码正确，则表明应用程序已准备好关闭
4.  否则，只需按住密码/模式屏幕并为用户提供另一个机会（永远重复此操作，直到输入正确的通行证......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-16T00:18:27.680

是的，谷歌、手机制造商和运营商都不想提供/启用此类功能。他们想鼓励盗窃您的手机，因为他们从中赚钱，迫使您更换设备！让您的设备防盗（如果他们愿意，这很容易做到）不是那些混蛋喜欢做的事情。

现在，好消息是：

我在 Verizon 上有三星 Galaxy Note 3。

我刚刚安装了“Smart Locksreen Protector”应用程序，它就像一个魅力，一起禁用了电源菜单。

我的手机上有一个金属保险杠。它需要一个微型螺丝刀才能卸下！我可以通过用一些罕见的螺丝替换微型十字螺丝来使其更加安全。这可以防止有人轻易弹出电池！他们需要工具，或者一些用来切断保险杠的东西。

现在我正试图找到一个好的应用程序，只要输入错误的密码，它就会为入侵者拍照。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T18:40:30.730

我过去曾搜索过某种应用程序，它可以在不先输入密码的情况下防止关机，但没有找到解决方案。

一路走来，我意识到这一点——如果你试图防止手机被未经授权的用户关闭，那将是徒劳的。

他们需要做的就是拉电池。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-19T14:59:12.460

这是我能找到的最接近的。

智能锁屏保护膜

它可以防止从锁定屏幕关机。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-28T09:56:20.613

您可能需要一个引脚/模式，但长按电源按钮会关闭几乎所有移动设备..它与硬件相关..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-10T18:55:16.810

有一个意图 - *android.intent.action.SHUTDOWN*确实会被广播，因此服务可以安全地优雅地清理。

除此之外，不，一旦用户确认关机，就无法覆盖关机，就是这样，没有回头路！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-14T15:40:47.543

这似乎很老了，所以不确定是否有人还在研究这个，但是如果你要将硬件按钮重新分配给电源以外的东西怎么办？/system/usr/keylayout 保留所有密钥文件。如果您的手机既没有可拆卸电池，也不允许使用操作系统外部的电源键进行软启动，那么您可以假设尝试一下。不是 100% 确定这是可能的，我真的不想让我的工作电话终端只重启，但这可能值得调查。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-26T20:30:38.523

对于某些 Xperia 设备，它是无用的，除非小偷是一个非常愚蠢的人。大多数不可拆卸电池设备的背面某处都有一个小按钮，您可以使用钉子或尖锐的东西按下一段时间，它基本上会“断开”电池并立即关闭手机。我们一直使用它来解决技术支持问题（当手机死机并且您需要强制关闭时）并且它不需要任何用户额外的步骤，您按下 abd 然后手机立即死机。

# android - ActionBar 选项卡和 onPrepareOptionsMenu 行为

> ID：11907210
> 
> 赞同：0
> 
> 时间：2012-08-10T18:25:43.887
> 
> 标签：android, tabs, android-fragments, android-actionbar, optionmenu

我的应用程序使用带有 Actionbar Sherlock 的选项卡导航在两个片段之间切换，每个片段都有自己的列表视图。此外，每个片段都有与之关联的自己的选项菜单，因此在我的两个片段类中，我使用了：

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    setHasOptionsMenu(true);
    ...
} 
```

对于其中一个片段，重要的是根据用户在其列表中选择的项目，将其选项菜单中的某些选项显示为灰色。我通过调用：

```
@Override
public void onPrepareOptionsMenu(Menu menu){
        ...
} 
```

在此方法中，我确定列表中的哪些项目已被检查。我注意到，当我在选项卡之间切换时，会立即调用 onPrepareOptionsMenu。然后下一次我按下菜单键时，不会调用 onPrepareOptionsMenu，并且菜单中的可用选项也不会更新。当我第二次点击菜单按钮时，一切正常并且可用选项得到更新。有没有我可以强制 onPrepareOptionsMenu 在标签切换后按下菜单键时被调用的方法？

我已经看到有关使用 invalidateOptionsMenu() 触发 onPrepareOptionsMenu 的说明，但是每次都覆盖菜单键事件似乎很混乱，而这个问题仅在用户第一次按下菜单键时出现。有没有更好的办法？

# android - 在 android sdk 管理器中加载加载项列表

> ID：11907211
> 
> 赞同：0
> 
> 时间：2012-08-10T18:25:46.953
> 
> 标签：android

每当我在附加组件列表中启动 SDK 管理器时，它总是显示错误`"Failed to fetch URL https://dl-ssl.google.com/android/repository/addons_list.xml`，`reason: File not found"`因为我没有安装的 SDK 平台可供使用。我已经尝试了一切，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:19:15.837

如果我尝试在浏览器中打开此链接，则会收到错误 404，因此此文件不存在。也许你应该下载更新版本的 android sdk，你可以在这里得到它[android sdk](http://developer.android.com/sdk/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T18:29:38.993

在顶部的导航栏菜单上，单击工具/管理附加站点...

然后转到新窗口的右侧选项卡。（用户定义的站点）

删除显示[https://dl-ssl.google.com/android/repository/addons_list.xml](https://dl-ssl.google.com/android/repository/addons_list.xml)的站点，然后单击右下角的关闭。

或者更新整个 SDK，也可以。

希望这可以帮助 ：-）

# c# - 在 c# 中编写适用于任何程序的自动更新程序/启动器应用程序

> ID：11907215
> 
> 赞同：-1
> 
> 时间：2012-08-10T18:26:14.480
> 
> 标签：c#

我正在制作一个可用于任何程序的程序更新器/启动器。我在客户端上有一个配置文件，在 http 服务器上有一个配置文件。我从他们两个那里得到版本号并比较它们，如果它们不是 = 然后更新客户端。

除了更新开始时，我一切正常。我需要说的是，如果有人下载了我的应用程序并且如果一个月不使用，那么在此期间我有 5 次左右的更新。问题是如何让我的程序下载第一个更新，安装它，然后下载下一个更新，直到它们都被下载？

我是编程新手，这是我能想到的唯一一种可以学习的应用程序。谢谢

我在 http 服务器 XML 文件上的 settings.conf。

```
<Table>
<Product>
<Product_id>1</Product_id>
<Product_name>Infected</Product_name>
<Product_version>1.0.0.1</Product_version>
<Product_Url>http://localhost/update/v1.0.0.1.exe</Product_Url>
<Product_id>2</Product_id>
<Product_name>Infected</Product_name>
<Product_version>1.0.0.2</Product_version>
<Product_Url>http://localhost/update/v1.0.0.2.exe</Product_Url>

<Product_id>3</Product_id>
<Product_name>Infected</Product_name>
<Product_version>1.0.0.3</Product_version>
<Product_Url>http://localhost/update/v1.0.0.3.exe</Product_Url>

<Product_id>4</Product_id>
<Product_name>Infected</Product_name>
<Product_version>1.0.0.4</Product_version>
<Product_Url>http://localhost/update/v1.0.0.4.exe</Product_Url>

<Product_id>5</Product_id>
<Product_name>Infected</Product_name>
<Product_version>1.0.0.5</Product_version>
<Product_Url>http://localhost/update/v1.0.0.5.exe</Product_Url>

</Product>
</Table> 
```

我的客户端配置 XML 文件。

```
<Table>
<Product>
<Product_id>1</Product_id>
<Product_name>Infected</Product_name>
<Product_version>1.0.0.0</Product_version>
<Product_Url>http://localhost/update/v1.0.0.1.exe</Product_Url>
</Product>
</Table> 
```

我的 C# 表单。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Xml;
using System.IO;
using System.Net;
using System.Diagnostics;
using System.Runtime.Remoting;

namespace Launcher
{
    public partial class Form1 : Form
    {

        public Form1()
        {

            InitializeComponent();
        }

        public string localversion { get; set; }
        public string remoteversion { get; set; }
        public string UpdateURL { get; set; }

        private void Form1_Load(object sender, EventArgs e)
        {

            webBrowser1.Navigate("http://www.kceoc.com/");
            webBrowser2.Navigate("http://www.kceoc.com/");

            button1.Enabled = false;    // Disable the launch button untill all updates are completed.
            GetLocalXMLFile();          //Run first xml function to start everything off.

        }

        private void GetLocalXMLFile()
        {
            try     //Start error checking.
            {
                using (XmlTextReader localxml = new XmlTextReader("settings.conf"))  //Load xml file in same folder as launcher.exe
                {
                    while (localxml.Read())  // Start reading the settings.conf file
                    {
                        switch (localxml.NodeType) //Get the Node that we will use.
                        {
                            case XmlNodeType.Text:
                                label1.Text = localxml.Value;  //Change the text of label1 to value of Node.
                                string localversion = localxml.Value;  // Store Node Value in string localversion for latter use.
                                GetRemoteXMLFile(localversion, remoteversion); //Everything went ok and got a value from Node so pass this all to our next function witch is get remote xml.
                                break;
                        }
                    }
                }

            }
            catch (FileNotFoundException)
            {
                label1.Text = "Local Config not found. Reinstall the application"; // Catch error incase file is not there.
            }
        }

        private void GetRemoteXMLFile(string localversion, string remoteversion)
        {
            try  //Start error checking
            {
                using (XmlTextReader remotexml = new XmlTextReader("http://localhost/update/settings.conf"))  //Load up remote xml on web server
                {
                    while (remotexml.Read())  //Start reading xml file from server.
                    {
                        switch (remotexml.NodeType)
                        {
                            case XmlNodeType.Text:
                                label2.Text = remotexml.Value; // Change value of label2 to remote xml node value
                                remoteversion = remotexml.Value; // Set the remoteversion string to remotexml.value
                                CompareXMLFileVersions(localversion, remoteversion); // Everything went ok so send localversion string and remoteversion string to compare function.
                                break;
                        }
                    }
                }

            }
            catch (FileNotFoundException)
            {
                label1.Text = "Remote config not found. Maby website id down?"; // Catch error incase file is not there.
            }
        }

        private void CompareXMLFileVersions(string localversion, string remoteversion)
        {

            label1.Text = localversion;         // Just so we can see the value in the lables to konw if they have value or not.
            label2.Text = remoteversion;         // Just so we can see the value in the lables to konw if they have value or not.

            if (localversion == remoteversion)  // Comparing the values of localversion and remoteversion and if they have same value then
            {                                   // change label3 to You have latest version.
                label3.Text = "You have the latest version";

            }
            else
            {
                label3.Text = "There is a new version. Starting update process here"; // If localversion and remoteversion are diffrent then let user know the files are out of date and start the updating process..
                GetListOfUpdates(remoteversion);  // Starting the updating process function..     

            }
        }

        private void GetListOfUpdates(string remoteversion)
        {

            //WebClient webClient = new WebClient();
            //webClient.DownloadFileCompleted += new AsyncCompletedEventHandler(Completed);
            //webClient.DownloadProgressChanged += new DownloadProgressChangedEventHandler(ProgressChanged);
            //webClient.DownloadFileAsync(new Uri(remoteversion), @"v1.0.0.1.exe");

            string url = "http://localhost/update/v1.0.0.1.exe";
            WebClient downloader = new WebClient();
            downloader.DownloadFileCompleted += new AsyncCompletedEventHandler(downloader_DownloadFileCompleted);
            downloader.DownloadProgressChanged += new DownloadProgressChangedEventHandler(downloader_DownloadProgressChanged);
            downloader.DownloadFileAsync(new Uri(url), "temp.exe");

        }

        void downloader_DownloadProgressChanged(object sender, DownloadProgressChangedEventArgs e)
        {

            label1.Text = e.BytesReceived + " " + e.ProgressPercentage;
        }
        void downloader_DownloadFileCompleted(object sender, AsyncCompletedEventArgs e)
        {
            //if (e.Error != null)
            //    MessageBox.Show(e.Error.Message);
            //else
            //    MessageBox.Show("Completed!!!");
        }

    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T00:01:56.937

欢迎来到 SO！

> 我是编程新手，这是我能想到的唯一一种可以学习的应用程序。谢谢

根据*您*的新手程度，我真的建议您从更简单的事情开始。否则，我建议您做的第一件事是实际绘制流程图。你的逻辑看起来有点不对劲，看起来你在写这个系统的时候就在试图设计这个系统，这是你永远不想做的事情。

有很多解决方案可以提供更好、更可靠的系统，然后你可以自己制作任何东西，但我可以理解这类项目的教育价值。出于这个原因，我最近制作了自己的“自动更新/启动器”，它运行得相当好，尽管在一个免费的网络服务器上，我和一些朋友是唯一的用户。

这是我为它制作的流程图：

![在此处输入图像描述](../Images/83e2161ff8797a63c4a126249b5cada7.png) 大：http: [//i.imgur.com/qS1U8.png](https://i.imgur.com/qS1U8.png)

这实际上是我的小项目的第二次迭代，第一次不是那么压倒性的，而且在不常见的情况下有点灾难性，但这是一次很好的学习经历。这个也有愚蠢的命令文件，我可以定义一些东西，比如在更新期间向用户显示消息，这很好。

如果您不介意查看糟糕且凌乱的代码，您可以在[此处查看代码仓库](https://bitbucket.org/BrokenPixels/bp_root.xalron)，尽管它没有记录在案，并且有一些部分并未实际使用，但尚未从源代码管理中删除。一个使用它的示例应用程序[在这里](http://brokenpixels.tk/programs/bptalk.html)（[来源，也很乱](https://bitbucket.org/BrokenPixels/bptalk)）。

对不起，看起来像一个无耻的自我插头，但我不能真正直接回答你的问题，并希望你可以利用其中的一些作为你应该如何去做的指示，因为它实际上是一个非常有趣的项目。

# git - 从 git-filter-branch --msg-filter 启动 $EDITOR

> ID：11907219
> 
> 赞同：0
> 
> 时间：2012-08-10T18:26:29.720
> 
> 标签：git, shell

我想更改我所有的提交消息以将它们翻译成另一种语言。

我知道我可以使用 git-filter-branch --msg-filter 来实现这一点，但我不想用任何模式替换消息，相反，我想在我的编辑器中打开每个提交消息，更改并保存，就像我在 git-rebase --interactive 中使用 reword 时所做的那样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T06:19:07.073

```
git filter-branch --msg-filter 'cat > ~/msg && 
  vim >&2 <&1 ~/msg && 
  cat ~/msg' HEAD^^^^..HEAD 
```

这将允许您使用 vim 编辑最后 4 次提交的消息。`-f`如果您第二次执行此操作以覆盖备份，请添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T19:42:43.657

如果你重新设置你的分支，你可以编辑任何/所有的提交消息。

Git 的棘手之处在于它使用提交消息作为提交本身的一部分，因此您的分支会发散。

只需（在您的分支上）：

```
git rebase -i master 
```

或者如果您想保留合并提交（感谢 danillonunes 和 Adam D.）

```
git rebase -i master --preserve-merges 
```

当您看到编辑器时，将第一列从更改`pick`为`edit`，您将有机会更改每条提交消息。

# php - QNAP - MySQL 服务器响应时间慢 / PHP

> ID：11907220
> 
> 赞同：0
> 
> 时间：2012-08-10T18:26:29.830
> 
> 标签：php, mysql, apache

我们将使用我们的 QNAP 作为 Web 开发服务器。

我们有以下内容：

1.  TS-EC1279U-RP（四核 Intel Xeon E3-1225 3.1GHz 处理器，4GB 内存和 12 个 RAID 6 硬盘）
2.  PHP 版本 5.3.9
3.  MYSQL 服务器版本：5.1.36

我们已经安装了 Drupal 和 Joomla，但是响应时间似乎很慢。我们等待大约 5 - 6 秒才能得到响应。我们已经为我的 sql 编辑了 my.cnf（见下文）

```
[client]
#password   = your_password
port = 3306
socket      = /tmp/mysql.sock

# Here follows entries for some specific programs

# The MySQL server
[mysqld]
port = 3306
socket      = /tmp/mysql.sock
skip-locking
skip-networking
skip-name-resolve

max_connections=500
key_buffer_size=384M
max_allowed_packet=16M
table_cache=256
sort_buffer_size=2M
read_buffer_size=2M
join_buffer_size=2M

thread_cache=256

query_cache_type=1
query_cache_limit=1M
query_cache_size=32M

[mysqldump]
quick
max_allowed_packet = 16M

[mysql]
no-auto-rehash
# Remove the next comment character if you are not familiar with SQL
#safe-updates

[isamchk]
key_buffer=128M
sort_buffer_size=128M
read_buffer=2M
write_buffer=2M

[myisamchk]
key_buffer=128M
sort_buffer_size=128M
read_buffer=2M
write_buffer=2M

[mysqlhotcopy]
interactive-timeout 
```

然而，即使有不同站点推荐的上述更改，性能也有所提高，但只是一点点。

我们在 QNAP 和托管公司上有我们的测试站点。托管公司服务器上的响应要快得多。我知道他们有更好的硬件，但是 QNAP 上的 CPU 图表甚至没有超过 3%。

谢谢

更新：

我添加了日志慢查询。我使用该网站大约 30 分钟： 到目前为止的结果：

```
/usr/local/mysql/libexec/mysqld, Version: 5.1.36-log (Source distribution). started with:
Tcp port: 3306  Unix socket: /tmp/mysql.sock
Time                 Id Command    Argument
/usr/local/mysql/libexec/mysqld, Version: 5.1.36-log (Source distribution). started with:
Tcp port: 3306  Unix socket: /tmp/mysql.sock
Time                 Id Command    Argument 
```

没有迹象表明 SQL 查询的时间超过 1 秒。所以我不确定是 PHP.ini 还是 my.cnf 设置。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T14:44:31.183

在玩弄了 MYSQL 和 PHP 之后。问题被发现了。

首先，我将 PHP 内存增加到 512M，我知道这有点矫枉过正，但差别不大。

关键是网站。

Application afterLoad：0.000 秒，0.35 MB Application afterInitialise：0.020 秒，1.17 MB Application afterRoute：0.029 秒，1.36 MB Application afterDispatch：0.064 秒，2.03 MB **Application afterRender：6.15 秒，2.72 MB**

问题是网站页面上的 RSS 提要。但是禁用它后，速度快得要命。

**应用程序渲染后：0.126 秒，2.83 MB**

Thanks to matt for the ideas and support.

# python - LAST_INSERT_ID() 减一

> ID：11907224
> 
> 赞同：4
> 
> 时间：2012-08-10T18:26:45.807
> 
> 标签：python, mysql, sqlalchemy

我有一个用 Python 编写的 Web 应用程序，使用 SQLAlchemy 进行数据访问。我正在尝试获取插入的最后一个插入 ID。这段代码在我使用 PyODBC 时有效，但现在使用 SQLAlchemy 似乎不起作用。 `LAST_INSERT_ID()`似乎始终返回一个减一的 ID。

```
 query = text("""INSERT INTO HR_PunchBatch
    (StoreID, UserID, Source,Timestamp,Status)
        VALUES (:StoreID,:UserID,:Source,NOW(),:Status)""")

    g.engine.execute(query,
        StoreID=StoreID,
        UserID=session['UserID'],
        Source=source,
        Status='New')

    batch_id = g.engine.execute('SELECT LAST_INSERT_ID() AS id').fetchone()
    return batch_id['id'] 
```

关于为什么这会关闭一个的任何想法（例如返回 8 而不是 9）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T19:07:39.783

仍然不确定查询返回不准确 ID 的原因。但是，我似乎通过获取连接对象而不是使用隐式/无连接执行来解决该问题。也许它之前抓住了两个不同的连接，因此提供了不一致的结果：

```
 conn = g.engine.connect()

    query = text("""INSERT INTO HR_PunchBatch
        (StoreID, UserID, Source,Timestamp,Status)
        VALUES (:StoreID,:UserID,:Source,NOW(),:Status)""")

    conn.execute(query,
        StoreID=StoreID,
        UserID=session['UserID'],
        Source=source,
        Status='New')

    batch_id = conn.execute('SELECT LAST_INSERT_ID() AS id').fetchone()

    return batch_id['id'] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-11T10:19:23.680

看看 SQLAlchemy 文档对[Engine.execute](http://docs.sqlalchemy.org/en/rel_0_7/core/connections.html#sqlalchemy.engine.base.Engine.execute)的看法。

每次调用此函数时，您都会隐含地获得新连接。我的猜测是，当您在不同的会话中选择 last_id 时，您的 INSERT 尚未提交。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-18T08:55:30.673

**光标.lastrowid**

> 此只读属性提供最后修改行的 rowid（大多数数据库仅在执行单个 INSERT 操作时才返回 rowid）。如果操作未设置 rowid 或数据库不支持 rowid，则应将此属性设置为 None。

[http://www.python.org/dev/peps/pep-0249/](http://www.python.org/dev/peps/pep-0249/)

```
import MySQLdb
conn = MySQLdb.connect('localhost', 'usr', 'pswrd', 'db');
cur = conn.cursor()
cur.execute('INSERT IGNORE INTO  table (name) VALUES "text"')
conn.commit()

print cur.lastrowid # print LAST_INSERT_ID() 
```

# php - 如果我在函数内部使用 requre()，PHP 是调用函数之前的那个文件吗？

> ID：11907226
> 
> 赞同：3
> 
> 时间：2012-08-10T18:26:58.177
> 
> 标签：php, function, include, require

如果函数中包含或需要文件，如果未调用该函数，是否会加载该文件？例子：

页面.php

```
<?php
require('functions.php');
a();
?> 
```

函数.php

```
<?php
function a(){
    require('a.php');
}
function b(){
    require('b.php');
}
function c(){
    include('c.php');
}
?> 
```

是否加载了 b.php 或 c.php？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T18:30:52.047

不，除非您实际调用函数`b()`和`c()`.

内部的代码`b.php`也`c.php`将是它们所包含的函数的本地代码。也就是说，它们定义的任何变量都不能在外部`b()`或`c()`分别使用。

有关更多详细信息，请参见[PHP：包含](http://php.net/manual/en/function.include.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T18:31:16.400

简单地说：不。如果`require`or`include`在函数中，如果该函数未执行，则*不会调用它。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T18:31:19.520

刚刚在我的服务器上测试了一下。任何未调用的函数都不会触发。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T09:50:05.793

它的工作原理比draw010的答案要复杂一些。由于这具有误导性，我觉得我应该澄清这一点。考虑这个测试用例：

> **主文件**

```
<?php
require('/tmp/functions.php');
echo "exists=",function_exists('a1'),"\n";
a();
echo "exists=",function_exists('a1'),"\n";
a1();
?> 
```

> **函数.php**

```
<?php
function a(){
    require('a1.php');
} 
```

> **a1.php**

这产生作为输出：

```
exists=
exists=1
Hello World 
```

换句话说，在被调用`a1()`之前不存在，`a()`但它在全局范围内可用。考虑另一个例子：

```
<?php
$a=false;
if( $a ){
    function x() {return 1;}
} else {
    function x() {return 2;}
}
echo x(); 
```

这又是完全有效的并显示`2`. 如果`$a`已设置为**true**，那么答案将是`1`，如果您对此代码进行 VLD，您就会明白原因。这两个函数发出您期望的操作码序列，但根据脚本文件的路径（在我的情况下为`%00x%2Ftmp%2Fy.php0x7fb364a1a03`和`%00x%2Ftmp%2Fy.php0x7fb364a1a06`）赋予不可调用的名称调用代码生成

```
ZEND_DECLARE_FUNCTION    '%00x%2Ftmp%2Fy.php0x7fb364a1a033', 'x' 
```

在进行第一个声明的路径点。这使得函数可用，`x()`类似的**ZEND_DECLARE_FUNCTION**使第二个函数`x()`在备用路径上可用。

完全相同的机制适用于类，尽管在这种情况下调用**ZEND_DECLARE_CLASS**以将内部类名绑定到其公共别名。

# module - 试图在 dnn 6.2 中将 aspx 转换为 dnn 模块

> ID：11907233
> 
> 赞同：0
> 
> 时间：2012-08-10T18:27:30.610
> 
> 标签：module, dotnetnuke

我正在阅读此[http://alainrivas.blogspot.com/2008/08/dnn-dotnetnuke-module-development-in-10.html](http://alainrivas.blogspot.com/2008/08/dnn-dotnetnuke-module-development-in-10.html)并且想知道规则是否仍然适用于 6.2。如果是这样，这个计划中有几个漏洞。

1.  我已经改变的是vb代码到cs的转换
2.  没有导入模块定义选项。在扩展下，为我列出的所有内容都是安装扩展向导、创建新扩展和创建新模块。我会以错误的方式解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:33:12.863

根据您要重构以用作模块的内容，除非您喜欢其中一个，否则没有真正的理由转换代码。一旦页面被转换为 ascx 控件，它应该就像设置任何其他模块（然后进行广泛的测试）一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T21:37:06.153

有几种创建模块的方法。对于您的情况（现有代码的转换），我认为最简单的方法是创建一个 *.dnn 文件并在其中列出您的模块定义，然后使用安装扩展向导将其导入。（它将让您选择如何导入模块）

# f# - 发生在 F#2 而不是 F#3 中的奇怪 F# 运行时错误，NUnit 也拒绝加载运行的可执行文件

> ID：11907242
> 
> 赞同：2
> 
> 时间：2012-08-10T18:28:01.067
> 
> 标签：f#, nunit, f#-3.0

我重构了一个大型 F# 项目。它有一个自动构建命令，可以在 F# 编译器的一次长时间运行中编译所有源文件。这样我就可以轻松地进行可重现的构建。buildcommand 在构建项目之前在自身上运行 nunit-console，这一切都很好。重构之后，我的大部分单元测试开始失败：

> *异常：System.BadImageFormatException：尝试加载格式不正确的程序。（来自 HRESULT 的异常：0x8007000B）*

这是使用 F# 2.0 编译项目时，我可以从命令行重现相同的问题（即不使用 NUnit）。堆栈跟踪通常指向一段无害的新代码（一个只存储一些数据而没有做任何明显的事情的构造函数）。

但是，当使用 F# 3.0 编译项目时，所有在 F# 2.0 下遇到问题并且我尝试过的单元测试都通过了。这是从命令行调用时（不使用 NUnit）。NUnit 现在声称我可以手动调用的新编译的可执行文件不存在。有一个很长的堆栈跟踪，顶部有文件未找到异常。（我没有尝试使用 F# 3.0 构建 buildcommand，因此它的单元测试仍然可以正常运行也就不足为奇了）。

Google 建议 HRESULT: 0x8007000B 可能是由编译器错误引起的。这可能是一个糟糕的工匠指责他的工具的情况，但是当使用 F# 3.0 时问题就消失了。有人可以提出任何建议以尝试在 F# 2.0 下重新运行吗？

我对使用 F# 3.0 并不太担心。但我真的需要 NUnit 才能工作。有谁知道可能出了什么问题？重申一下，Nunit 无法加载从命令行启动时运行良好的可执行文件，但在使用 F# 2.0 而不是使用 F# 3.0 编译时从同一位置加载相同的可执行文件。

对于这方面的任何帮助，我将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:00:43.147

I believe you'll also get this error message if you try to load a 32-bit assembly in a 64-bit process (or vice versa). What `Platform Target` are you compiling the projects with (set via the Build tab of the project properties pane)?

My guess is there's some mixup in your project settings or other configuration files which is causing the F# 2.0 compiler to compile it for the wrong platform target. When NUnit tries to load the assembly, it has a different 'bitness' than the NUnit assemblies -- which I believe have specific versions for 32- and 64-bit systems -- and ends up crashing.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T19:26:36.440

这闻起来可能是绑定重定向问题。当您调用 NUnit 时，您只是将 DLL/EXE 传递给它，还是将 .nunit 文件传递​​给它？在任何一种情况下，请确保有一个对应的 .config 文件，其绑定重定向与您在 VS2012 中使用新的 ConsoleApplication 项目获得的绑定重定向相同（例如，重定向 FSharp.Core 2.0.0.0 -> 4.3.0.0 的那些，因为 powerpack 取决于前者，而你的 VS2012 盒子上有后者）。

# vb.net - 调用 adodb open 更改连接字符串

> ID：11907243
> 
> 赞同：4
> 
> 时间：2012-08-10T18:28:01.540
> 
> 标签：vb.net, vb6, connection-string, adodb

我刚刚加入了一个项目，我们将旧的 VB6 应用程序转换为 .NET。在应用程序中，它们传递 ADODB 连接对象并从中获取现有连接字符串（根据数据库的状态，这可能是主要或次要连接字符串）。

我遇到的具体问题是，有时在 ADODB 连接上调用 .open 时，对象会将其连接字符串重置为某种“；Provider = MSDASQL.1”。我发现了一个论坛帖子，只是指出发帖者认为这是 ADODB 中的某种错误，但找不到任何可以确认的内容或任何解决方法。另一件需要注意的是 ConnectionString 数据并不总是被重置。

有没有人以前见过这个并且有一个关于是什么导致 ADODB 在 .Open 调用上重置其对象的 ConnectionString 的建议？

谢谢！

# java - Java：导入语句与完全限定名称？

> ID：11907245
> 
> 赞同：23
> 
> 时间：2012-08-10T18:28:07.723
> 
> 标签：java, import

我已经尝试在网上和我自己的知识体系中找到这个问题的答案，但我似乎无法找到一个明确、明确的答案。

假设我只使用了另一个包中的一个类，它只需要导入一次，比如`myPack.anotherPackage.ClassName`.

***使用import 语句***有什么区别（如果有的话） ：

```
import myPack.anotherPackage.ClassName; 
```

与使用***完全限定名称***相比：

```
myPack.anotherpackage.ClassName classInst = new myPack.anotherpackage.ClassName(); 
```

?

显然，这个问题只适用于`ClassName`只使用一次的情况。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-10T18:31:36.477

***导入语句***使您的代码更具*可读性*，因为您不会将代码与完整的包混在一起。

如果有冲突`ClassNames`，那么只有在这种情况下才建议使用***完全限定名称***。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-10T18:30:43.310

没有，在我看来。查看字节码 - 不会有任何区别。

```
 javap -c <your class> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-10T18:47:06.257

**1.**它更多的是关于`readability`价值**而不是**重要性`functional`。

**2.** `import`声明提供了一个`cleaner code`比使用**完整的包名和** `class`or`interface`名。

**3.**但是在**导入模棱两可的包时一定要小心。**

```
 `java.awt.List` and `java.util.List` 
```

然后你需要完全导入一个和一个完整的包名，如下所示

```
import java.util.List;

and 

java.awt.List l = new java.awt.List(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-04T05:27:13.150

代码编译后没有区别。在这两种情况下，字节码都将具有完全限定名，即编译器会自动将类名替换为限定名。它只是为了让程序员的生活更轻松，我们不必编写完全限定的名称来引用一个类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-10T18:41:55.607

没有真正的区别，尤其是对于您在此处引用的特定简单案例。请参阅[Java：使用导入或显式包/类名？](https://stackoverflow.com/questions/5804843/java-use-import-or-explicit-package-class-name)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-01-24T00:28:13.253

导入和包用于命名和访问保护（默认），原因很简单，可以有许多具有相同名称的类。

为了区分它们，我们需要在包下将它们分开并在需要时导入它们。

导入类或直接输入完全限定名称没有区别，但有一些细微差别。1\. 最重要的是，如果您导入包中的所有类（即 import xyz.*;），类仍然可能存在命名问题，例如，如果有多个通用导入，您可能在运行时使用了错误的类。

2.  如果在运行时动态加载类，例如在运行时注册 JDBC 驱动程序，您需要提供完整的类名作为参数，以便可以动态加载。

通常使用以下最佳实践： 1\. 切勿使用 import abc.*；导入格式并始终导入单个类（eclipse 或某些 IDE 可以自动更正导入到 * 并需要禁用此功能） 2\. 当您已经导入了一个同名的类并想使用另一个类时，您必须使用完全限定的类名同一程序下同名的类。3.希望它有帮助:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-10T18:31:23.833

据我所知没有区别。唯一的区别是代码的冗长。通常，越冗长越难阅读。也许看字节码？

# actionscript-3 - 如何将影片剪辑分成两部分并为每个部分分配不同的颜色？

> ID：11907246
> 
> 赞同：0
> 
> 时间：2012-08-10T18:28:10.910
> 
> 标签：actionscript-3, flash-cs5

根据标题，使用 Flash CS5 和 Actionscript 3，我如何以编程方式将影片剪辑分成两部分并为每个部分分配不同的颜色？

我需要获得一个动态影片剪辑（一次可以是一只鸟，另一个可以是小雕像，另一个可以是一个球等等）并将它分成两部分，用一种颜色绘制一个部分，用另一种颜色绘制其余部分。用例是在进度条中转换任何现有的影片剪辑，动态地制作具有不同形状的进度条。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T20:48:55.960

一种简单的方法是定义几个填充层（一个用于背景，一个用于“进度”填充），然后定义一个遮罩层，您可以在其中添加定义形状的影片剪辑。这是一个实现，它可以为背景和进度填充采用任何类型的填充，以及为形状蒙版采用任何 DisplayObject。它重绘进度填充而不是缩放一个矩形，这样位图和渐变填充就不会失真。

以下是仅使用简单的纯色填充（白色背景上的黑色条）创建它的方法：

```
var pBar:MorphProgressBar = new MorphProgressBar(
    new GraphicsSolidFill(0xFFFFFF), new GraphicsSolidFill(0), myMc);
addChild(pBar);
pBar.progress = 0.3;  // 30 % 
```

这是`MorphProgressBar`. 这个版本已经过测试并且可以工作：

```
import flash.display.IGraphicsFill;
import flash.display.Sprite;
import flash.geom.Rectangle;
import flash.display.Shape;
import flash.display.IGraphicsData;
import flash.display.DisplayObject;

public class MorphProgressBar extends Sprite {
    private var _progressFill:IGraphicsFill;
    private var _bounds:Rectangle;
    private var _progress:Number;
    private var _fillSprite:Sprite = new Sprite();
    private var _bg:Shape = new Shape();
    private var _bar:Shape = new Shape();
    private var _maskSprite:Sprite = new Sprite();

    public function MorphProgressBar( 
            baseFill:IGraphicsFill,  
            progressFill:IGraphicsFill,  
            shapeSource:DisplayObject) {
        _progressFill = progressFill;
        _bounds = new Rectangle(0,0,shapeSource.width,shapeSource.height);
        _bg.graphics.drawGraphicsData(Vector.<IGraphicsData>([baseFill]));
        _bg.graphics.drawRect(0,0,_bounds.width, _bounds.height);
        _fillSprite.addChild(_bg);
        _fillSprite.addChild(_bar);
        _maskSprite.addChild(shapeSource);
        addChild(_fillSprite);
        addChild(_maskSprite);
        _fillSprite.mask = _maskSprite;
    }

    public function get progress():Number { return _progress; }
    public function set progress(value:Number):void {
        var newProgress:Number = Math.min(Math.max(value,0),1);
        if (newProgress != _progress) {
            _progress = newProgress;
            updateProgress();
        }
    }

    private function updateProgress():void {
        _bar.graphics.clear();
        _bar.graphics.drawGraphicsData(Vector.<IGraphicsData>([_progressFill]));
        _bar.graphics.drawRect(0,0,_bounds.width * progress, _bounds.height);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T20:06:29.053

将影片剪辑转换为位图：

```
var bitmap:Bitmap = new Bitmap();
var data1:BitmapData = new BitmapData(mc.width, mc.height);
data.draw(mc);
bitmap.bitmapData = data;

addChild(bitmap); 
```

然后单击此链接并学习如何以各种方式拆分它。

[Actionscript 3：将位图切片成图块](https://stackoverflow.com/questions/6991921/actionscript-3-slice-a-bitmap-into-tiles)

# tsql - T-SQL 日期显示

> ID：11907252
> 
> 赞同：2
> 
> 时间：2012-08-10T18:28:49.003
> 
> 标签：tsql, function, date

我有一个表格，我在其中选择客户购买活动，它将`ColumnA`以以下格式显示购买日期（以及时间）：

```
2012-08-06 10:06:42.223
YYYY-MM-DD HH:MM:SS 
```

我只想显示日期，所以我添加了一个 LEFT 函数，如下所示：

```
LEFT(ColumnA, 11) 
```

这将摆脱时间，但现在显示日期我会得到：

```
Aug  06 2012 
```

我想以数字格式显示它，但`MM/DD/YYYY`它看起来像：

```
08/06/2012
MM/DD/YYYY 
```

有什么想法可以在 T-SQL 中做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T18:33:26.640

你只需要转换它：

```
SELECT convert(char(10), getdate(), 101) 
```

或从您的桌子上：

```
SELECT convert(char(10), yourDate, 101)
FROM yourTable 
```

这是一个方便的网站，其中包含转换：

[如何在 Sql Server 2005 中格式化日期时间和日期](http://anubhavg.wordpress.com/2009/06/11/how-to-format-datetime-date-in-sql-server-2005/)

或者，如果您只想要没有时间的 yourDate 值，您可以随时使用 which 结果`2012-08-06 00:00:00.000`：

```
declare @yourDate datetime
set @yourdate = '2012-08-06 10:06:42.223'

select DateAdd(day, DateDiff(day, 0, @yourdate), 0) 
```

或从您的表中：

```
select DateAdd(day, DateDiff(day, 0, yourDateField), 0)
from yourTable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T18:31:40.277

试试这个：

```
SELECT CONVERT(VARCHAR(10), ColumnA, 101)
FROM MyTable 
```

# c# - 为什么我在这个 IEnumerable<> 中只得到空值

> ID：11907255
> 
> 赞同：0
> 
> 时间：2012-08-10T18:29:13.037
> 
> 标签：c#, asp.net, asp.net-mvc

我正在尝试使用数据库中的值填充此 IEnumerable。

我看不出我做错了什么。

```
IEnumerable<Categories> categories = new List<Categories>();

List<SelectListItem> catItems = new List<SelectListItem>();

foreach (var cats in categories)
{
    catItems.Add(new SelectListItem
                     {
                         Text = cats.CategoryName,
                         Value = cats.CategoryID.ToString()
                     });
} 
```

这是课程：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel.DataAnnotations;
using System.Web.Mvc;

namespace SportsStore.Domain.Entities
{
    public class Categories
    {
        [Key]
        public int CategoryID { get; set; }
        public string CategoryName { get; set; }
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T18:30:33.103

您只会初始化一个新的类别集合，永远不会有任何添加到集合中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T18:31:48.847

您如何填充类别列表？它不会只是通过说...

```
IEnumerable<Categories> categories = new List<Categories>(); 
```

你需要以某种方式填充它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T18:43:12.967

因为在这里您创建了一个新的（和空的）类别列表：

```
IEnumerable<Categories> categories = new List<Categories>(); 
```

在这里你尝试遍历空列表：

```
foreach (var cats in categories)
{ 
```

这意味着您永远不会向 cat.Items 添加任何内容

# iphone - 使用 POST 方法从 iPhone 向服务器发送图像数据

> ID：11907256
> 
> 赞同：2
> 
> 时间：2012-08-10T18:29:18.707
> 
> 标签：iphone, objective-c, ios

显示的是我为将图像上传到服务器而获得的 API。我不知道如何将用户 ID 和图像数据一起发送到服务器。

```
url : base_url + /users/editProfilePic
    input: as POST
    userId : user’s id
    picture : base-64 encoded jpg image (300x300px resolution with 1:1 ratio recommended) 
    output: 
    if failed,
    {
       "status": "FAIL",
       "message": "Some Error, try again"
    }

    if success, 
    {
       "status": "OK",
       "message": "Profile pic updated..",
       "url": "http://base_url/images/users/profile_pics/8a21edc7db3f0eab4d6f328e28978aa8.jpg"
    } 
```

任何人都可以通过可以处理此 API 的代码来帮助我。我是iphone的初学者

我写了一个我在下面给出的代码，它不起作用。

```
- (BOOL)uploadImage:(NSData *)imageData filename:(NSString *)filename
{
    NSLog(@"Uploading image data %@",imageData);

    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    DatabaseManger *objDatabase = [[DatabaseManger alloc] init];
    NSMutableDictionary *valDict = [objDatabase getUserDetailsInDictionary];

    NSString *usernameString = [valDict objectForKey:@"UserID"];

    [objDatabase closeSQLDB];
    [objDatabase release];
    [pool release];    NSMutableString *URL = [NSString stringWithFormat:@"%@%@",SERVER_URL,PROFILEPICTURE ]; 
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:URL]];
    NSString *postData = [[NSString alloc] initWithFormat:@"userId=%@&picture=%@",usernameString,imageData];

    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];
        [request setHTTPMethod:@"POST"];
        [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
        [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
        [request setHTTPBody:[postData dataUsingEncoding:NSUTF8StringEncoding]];
        [postData release];

        NSError *error;
        NSURLResponse *response;
        NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

        // parse data from sever by JSON

        NSString *data=[[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];
        NSDictionary * PostCommentStaus= ((NSDictionary *)[data JSONValue]);
        NSLog(@"%@",PostCommentStaus);
        return ([data isEqualToString:@"OK"]);
        [data release];

    } 
```

# javascript - 如何在 Metrostyle Javascript 中使用索引数据库

> ID：11907261
> 
> 赞同：1
> 
> 时间：2012-08-10T18:29:50.563
> 
> 标签：javascript, html, windows-8, microsoft-metro, indexeddb

我正在使用 Java 脚本为 Windows 8 编写 Web-App，我正在寻找一个数据库解决方案，我发现 Internet Explorer 10 的索引数据库部分，它可以作为 Metro Style App 使用 IE10 来托管 HTML，但是我不能找到任何关于如何在 JavaScript 中为 Metro-style App 使用索引数据库的示例，任何人都可以提供一个非常示例的示例来说明如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T20:34:06.373

如果您需要更高级别的抽象，您可以尝试使用 LINQ2IndexedDB - IndexedDB 的类似 LINQ 的选项

[http://linq2indexeddb.codeplex.com](http://linq2indexeddb.codeplex.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T19:01:46.660

Mleroys link looks great for building a nice data adapter for the listview/flipview.

For a nice wrapper, take a look at:

[https://github.com/grork/db.js](https://github.com/grork/db.js)

Which is a WinJS port of dB.js from Aaron Powell. It gives you chaining and what not.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T18:55:03.097

这将与 IE10 相同。请参阅 MSDN 文档： http: [//msdn.microsoft.com/en-us/library/ie/hh920759 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/hh920759(v=vs.85).aspx)

有关如何使用 IndexedDB 实现自定义数据源的示例，请参阅：[http ://stephenwalther.com/archive/2012/07/10/creating-an-indexeddbdatasource-for-winjs.aspx](http://stephenwalther.com/archive/2012/07/10/creating-an-indexeddbdatasource-for-winjs.aspx)

# vb.net - Visual Basic 无法识别 Path.GetFileName 方法

> ID：11907264
> 
> 赞同：0
> 
> 时间：2012-08-10T18:29:58.313
> 
> 标签：vb.net, visual-studio-2010

我正在关注此[页面](https://stackoverflow.com/questions/342268/return-filename-only-when-using-openfiledialog)以尝试在我的 Visual Basic 应用程序中获取文件名。当我开始键入“Path”时，Visual Studio 2010 IDE 无法识别 Path.GetFileName。如何让 Visual Studio 2010 识别 Path.GetFIleName 方法？

[这](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx#Y0)是微软官方页面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T18:39:50.787

您是否有可能没有引用 System.IO 命名空间？如果您键入 System.IO.Path。那么它会起作用吗？如果是这样，请保留它，或将 Imports System.IO 添加到文件顶部。

```
导入系统.IO

模块模块1

    子主（）
        Dim x As String = Path.GetFileName("")

    结束子

端模块

```

# excel - 如何从 access 将 2 个查询导出到 excel 中的单个工作表

> ID：11907265
> 
> 赞同：0
> 
> 时间：2012-08-10T18:30:02.407
> 
> 标签：excel, ms-access, export-to-excel, recordset

我正在使用 TransferSpreadsheet 将查询从访问导出到 excel，它工作正常。

```
DoCmd.TransferSpreadsheet acExport, acSpreadsheetTypeExcel9, "qryName", "test1.xls", True 
```

现在我有另一个查询，我想将此查询中的数据添加到同一个工作表中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T10:26:17.850

对于我的第一个查询，我使用

```
DoCmd.TransferSpreadsheet acExport, acSpreadsheetTypeExcel12Xml, "qryNameFirst", "test1.xlsx", True, "MyWorksheetName" 
```

对于第二个查询，我将其放入记录集中

```
Dim rstName As Recordset
Set rstName = CurrentDb.OpenRecordset("qryNameSecond") 
```

然后我只需使用 CopyFromRecordset 将此记录集复制到工作表中。

```
Dim objApp As Object, objMyWorkbook As Object, objMySheet As Object, objMyRange As Object

Set objApp = CreateObject("Excel.Application")
Set objMyWorkbook = objApp.Workbooks.Open("test1.xlsx")
Set objMySheet = objMyWorkbook.Worksheets("MyWorksheetName")
Set objMyRange = objMySheet.Cells(objApp.ActiveSheet.UsedRange.Rows.Count + 2, 1)

With objMyRange
 rstName.MoveFirst 'Rewind to the first record
 .Clear
 .CopyFromRecordset rstName
End With 
```

objApp.ActiveSheet.UsedRange.Rows.Count 将返回最后使用的行号。我添加了 + 2 因为我想在两个查询之间有一个空行。

添加我做了一个性能测试。我用 500.000 条记录测试了这种方法。该表包含 500k 行，第一个查询包含 250k 行，第二个查询（使用 OpenRecordSet）包含 250k 行。生成 excel 文件表并在具有 access/excel 2010 的 E6600 (2,40 Ghz)、4GB ram 机器上显示数据大约需要 10 秒。

编辑：

另一种实现相同目的的方法是使用 TransferSpreadsheet 2 次。

```
DoCmd.TransferSpreadsheet acExport, acSpreadsheetTypeExcel12Xml, "qryNameFirst", "test1.xlsx", True, "MyWorksheetName"
DoCmd.TransferSpreadsheet acExport, acSpreadsheetTypeExcel12Xml, "qryNameSecond", "test1.xlsx", True, "MyWorksheetName2" 
```

这将在工作簿中创建 2 个工作表，然后只需将一个工作表的数据复制到另一个工作表。我认为性能会相同但不确定，我会坚持使用 OpenRecordSet。

# c# - 从按钮获取文本

> ID：11907267
> 
> 赞同：0
> 
> 时间：2012-08-10T18:30:06.447
> 
> 标签：c#, javascript, asp.net, html

我有一个启动弹出窗口的删除和更新按钮。在弹出窗口中，我有一个标签，上面写着您确定要“”我想使用用户按下按钮的文本并将其放入该“”区域。

即如果他们推送更新，标签会说“你确定要更新吗？” 反之亦然删除。

据我所知，我不能隐藏两个标签，只能在单击一个按钮时使用一个，因为它位于运行 javascript .show / .hide 事件的 div 中。因此，隐藏在该 div 中的任何内容都会自动出现在该命令中。

关于制作检索按钮文本的动态标签有什么建议吗？

javascript

```
function popup() {
    $("#popupbg").animate({ opacity: ".8" });
    $("#delete").click(function() {
        $("#popupbg, #popupbgitembg").show('fast')
    });
}

function popupcancel() {
    $("#popupbg, #popupbgitembg").hide('medium');
}

function popupdel() {
    var button = document.getElementById("<%= execdelete.ClientID %>");
    button.click();

    $("#popupbg, #popupbgitembg").hide('medium');
} 
```

html

```
<div id="popupbg"> 
</div> 
<div id="popupbgitembg">
<ul class="popupbgitems">
        <li>
            Are you sure you want to delete?
        </li> 
        <li></li> 
        <li>
            <asp:Button ID="execdelete" runat="server" CssClass="invisible" OnClick="delSysGLDepts" />
            <asp:Button ID="butdelete" runat="server" Text="Delete" OnClientClick="javascript:scroll;popupdel();" Font-Size="11px"/>
            <asp:Button ID="butcancel" runat="server" Text="Cancel" OnClientClick="javascript:popupcancel();" Font-Size="11px"/>

        </li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:34:37.527

因为您没有展示任何示例代码，我只能在理论上进行讨论，但是是的，您没有理由不能做到这一点。

我假设您正在使用 javascript`confirm`来显示警报？如果是这样，您可以通过 javascript 在客户端或通过您的代码隐藏在服务器端获取按钮的文本（同样，我不知道您的按钮是客户端还是服务器端，因为您没有任何示例代码）。获取该文本并作为确认呼叫中文本的一部分传递。那应该这样做。

如果您发布一些实际代码，则更具体会更容易，但上述概念应该可以正常工作。

# blackberry - BlackBerry Simulator 和 MDS 之间的连接

> ID：11907268
> 
> 赞同：1
> 
> 时间：2012-08-10T18:30:07.410
> 
> 标签：blackberry

我最近开始在 BlackBerry Simulators 9800 上工作。在我工作时，几乎没有任何疑问困扰着我

1.  如果我们更改默认端口，我想知道模拟器如何知道 MDS 服务器。
2.  我看到有一个选项可以在模拟器批处理文件中提及 MDS IP 和端口。但是大多数论坛都没有谈论它。

有什么输入吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:44:02.647

1）您可以配置许多端口。BlackBerry 智能手机模拟器用于连接 MDS-CS 模拟器的端口不是其中之一。

2）你在这里指的是什么参数？

# image - Highcharts，将图像导出/复制到剪贴板

> ID：11907269
> 
> 赞同：2
> 
> 时间：2012-08-10T18:30:09.420
> 
> 标签：image, export, highcharts, clipboard

我需要将 highchart 作为图像复制到剪贴板，我该怎么做？

内置导出功能，但它显示窗口提示打开/下载，但我想右键单击图表（或使用右上角的“导出”按钮），然后选择“复制图像到剪贴板”。

男孩们再次需要你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:55:56.910

据我所知，我认为你做不到。至少不是跨浏览器，但我认为 IE 允许将内容复制到剪贴板。事实上，IE9 甚至允许右键单击 highChart 的图表并提供“复制”选项，将其复制到剪贴板。IE9 基本上允许在任何 SVG 对象上这样做。Firefox 和 Chrome 不允许将内容复制到剪贴板，而不是通过 JS，有各种 flash 选项，但我建议远离，除非你绝对必须

# java - Java Arrays.sort() 需要很长时间

> ID：11907273
> 
> 赞同：15
> 
> 时间：2012-08-10T18:30:32.977
> 
> 标签：java, sorting

我正在使用 Java 的`Arrays.sort()`函数按文件的最后修改时间对文件列表进行排序。245 个文件的排序大约需要 5 秒。这对我来说似乎太长了。我觉得不应该超过0.5秒。这是一个很好的假设吗？我究竟做错了什么？或者这听起来正常吗？

```
public static class LastModifiedComparator implements Comparator<File> {
    @Override
    public int compare(File f1, File f2) {
        return (int)(f1.lastModified() - f2.lastModified());
    }       
}

File folder = new File( "C:\\Whatever\\" );
File[] filesInFolder = folder.listFiles();
logger.debug("Starting File Sort");
Arrays.sort(filesInFolder, new LastModifiedComparator());
logger.debug("Done File Sort"); 
```

日志输出

```
2012-08-10 14:24:20,333 DEBUG http-8080-4 <ClassName>:73 - Starting File Sort
2012-08-10 14:24:25,915 DEBUG http-8080-4 <ClassName>:75 - Done File Sort 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-10T18:37:27.883

你需要改进你的`Comparator`逻辑。您需要**缓存**这些`lastModified()`值，因为该方法的实现非常慢。`File`我建议将实例包装到您制作的*可比较*对象中，该对象将缓存该值：

```
public class FileLmWrapper implements Comparable<FileLmWrapper> {
  public final File f;
  public final long lastModified;
  public FileLmWrapper(File f) { 
    this.f = f; 
    lastModified = f.lastModified();
  }
  public int compareTo(FileLmWrapper other) {
    return Long.compare(this.lastModified, other.lastModified);
  }
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-08-10T18:36:49.430

`File.lastModified`必须去操作系统查询文件最后一次修改的时间——它没有被缓存。每次比较你都会这样做两次，并且[Arrays.sort](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28T%5B%5D,%20java.util.Comparator%29)使用[mergesort](http://en.wikipedia.org/wiki/Merge_sort) -- `O(n log n)`。插入 245`n`次，大约是 580 次比较，或 1100 次操作系统调用以获得最后修改时间。这意味着您每秒可以获得大约 230 个最后修改的调用。这看起来可能有点慢，但肯定比在 JVM 中进行这么长时间的比较更合理

正如上面 Marko Topolnik abd NgSan 指出的那样，解决方法是首先缓存所有文件的最后修改时间。我会通过创建一个结合文件和时间的新类对象来做到这一点，然后对这些对象进行排序。这样，您将只有 245 次调用`File.lastModified`，并且排序应该花费大约 1/5 的时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T18:37:15.773

我不确定，但听起来每次您阅读修改时间时它都在进行磁盘 I/O - 因此速度很慢。简单地获取对象中的修改时间以及 File 对象，*然后*排序可能会更快。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T18:38:52.810

您的比较操作

```
@Override
public int compare(File f1, File f2) {
    return (int)(f1.lastModified() - f2.lastModified());
} 
```

不仅仅是一个 getter，而是发出一个从文件系统获取信息的调用，因此排序的高响应时间也是由于`lastModified()`than的性能`compare()`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T18:35:28.473

~~在修改后的快速排序~~中在 java 中实现的排序调整了合并排序，其平均运行时间复杂度为 O(nlogn)。
所以我们需要专注于你的文件操作，比如获取 lastModifiedTime。您确定这些文件是需要网络延迟的本地文件或共享驱动器吗？

# javascript - 正则表达式匹配括号

> ID：11907275
> 
> 赞同：13
> 
> 时间：2012-08-10T18:30:45.377
> 
> 标签：javascript, regex

对于模板引擎，我使用正则表达式来识别字符串中括号内的内容。例如，正则表达式需要匹配 {key} 或 <tag> 或 [element]。

目前我的正则表达式如下所示：

```
var rx=/([\[\{<])([\s\S]+?)([\]\}>])]/; 
```

问题是这样的正则表达式不会强制括号匹配。例如在以下字符串中：

```
[{lastName},{firstName}] 
```

正则表达式将匹配`[{lastName}`

有没有办法定义匹配的括号？例如，如果左括号是 [ 那么右括号必须是 ]，而不是 } 或 >

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-10T18:53:49.907

最好的方法是拆分成 3 个正则表达式，特别是如果不同的括号可以有不同的含义：

```
var rx1 = /\[([^\]]+)]/;
var rx2 = /\(([^)]+)\)/;
var rx3 = /{([^}]+)}/; 
```

`[]`这些将分别匹配由、`()`和包围的任何文本`{}`与第一个匹配组中的文本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T18:42:56.133

您可以使用`|`像这样的管道字符 ( ) 的替代方法`/\[([\s\S]+?)\]|\{([\s\S]+?)\}|<([\s\S]+?)>/`，尽管它会变得很长。

**编辑：**缩短了正则表达式，不再那么长了......

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-17T00:15:06.390

```
var rx = /\[[^\]]+\]|\{[^}]+\}|<[^>]+>/; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T18:56:15.627

> 有没有办法定义匹配的括号？例如，如果左括号是 [ 那么右括号必须是 ]，而不是 } 或 >

有点。

ERE 没有提供一种方法让您按照您描述的方式将右括号与左括号匹配。（使用 PREG 魔法也许是可能的，但我必须把它留给其他人。）你需要有多个正则表达式，或者一个正则表达式中有多个原子。

如果您使用单个正则表达式，我认为您需要确定您正在检测的括号字符串的*类型*，以及该字符串的内容。正如评论中提到的，您需要用您的编程语言来执行此操作，但您至少可以从正则表达式中得到您需要的东西。

在下面的正则表达式中，每种样式的字符串都表示为 RE 中的“分支”。分支由 or-bars ( `|`) 分隔。为清楚起见，我假设所有字符串都是`[:alnum:]`. 您尚未指定内容，因此您需要根据您的特定要求进行调整。

```
/(\[)([[:alnum:]]+)\]|(\()([[:alnum:]]+)\)|(\{)([[:alnum:]]+)\}/
 ↑   ↑               ↑                    ↑
 $1  $2           divider              divider 
```

请注意，在每个分支中，第一个字符用圆括号括起来，使其成为“原子”。您需要您的代码像反向引用一样引用这个原子。第二个原子是内弦。现在......我的 JavaScript 不如我的烘焙技能那么强大，但这可能是一个开始：

```
String.prototype.bracketstyle = function() {
  var re = /(\[)([:alnum:]+)\]|(\()([:alnum:]+)\)|(\{)([:alnum:]+)\}/;
  return this.replace(re,"$1");
}

String.prototype.innerstring = function() {
  var re = /(\[)([:alnum:]+)\]|(\()([:alnum:]+)\)|(\{)([:alnum:]+)\}/;
  return this.replace(re,"$2");
} 
```

我怀疑你可以将它们组合成一个函数，或者以不同的方式使用它们而不使它们成为一个函数，但你明白了。

# javascript - 通过 CSS 类区分元素

> ID：11907279
> 
> 赞同：-1
> 
> 时间：2012-08-10T18:30:55.870
> 
> 标签：javascript, css, prototypejs

我编写了一个代码来创建元素，每个元素都响应`touchstart`事件，稍后在代码中我可以将它们拖到屏幕上。我想要的是根据它们拥有的 CSS 类来区分不同的元素。所有元素都有`DRAG_CSS_SELECTOR`类，但有些元素也有`MOVE`类或`ROTATE`类。

```
<div class="drag_rotate drag_css_selector"></div>
<div class="drag_move drag_css_selector"></div> 
```

但是我找不到在代码中编写哪个元素是哪个元素的方法。它们都只是元素。我努力了：

```
if (this.el.hasClassName(".drag_move")){
this.el = this.elMo;
} 
```

但这没有结果

```
function DragController(){
  var dragElements = document.querySelectorAll(DRAG_CSS_SELECTOR),
      dragElementsLength = dragElements.length;

  for (var i = dragElementsLength - 1; i >= 0; i--){
    new DragController(dragElements[i]);    
  };
};

function DragController(element){
 this.el = element;
  this.el.addEventListener(START_EVENT, this, false);

  this.elRo = element;
  this.elMo = element;
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T14:36:50.580

你的常数是什么？

根据给出的信息，我唯一能看出错误的是你如何使用`hasClassName`. 它不接受选择器字符串 - 只是您正在检查的类的字符串名称。

```
if (this.el.hasClassName("drag_move")){
    this.el = this.elMo;
} 
```

# android - 如何使用广播接收器在特定时间参加活动？

> ID：11907281
> 
> 赞同：0
> 
> 时间：2012-08-10T18:31:05.720
> 
> 标签：android, android-activity, broadcastreceiver

当我设置时间时，如何使用广播接收器在特定时间启动活动或执行一些操作，例如按钮单击操作（**而不是吐司）？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T04:47:27.893

You might need AlarmManager + Service to do that. you can look it here

[http://android-er.blogspot.com/2010/10/simple-example-of-alarm-service-using.html](http://android-er.blogspot.com/2010/10/simple-example-of-alarm-service-using.html)

and in Service class (in the link) that display Toast, just make some new intent and startActivity(intent) there PS. before start. It's important that you must add this line also

```
youintent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

like this

```
public class AlarmService extends Service {

private Intent alarmIntent;

@Override
public void onCreate() {
    alarmIntent = new Intent(this, AlarmActivity.class);
    alarmIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
}

@Override
public void onStart(Intent intent, int startId) {
    super.onStart(intent, startId);

    //Toast.makeText(this, "MyAlarmService.onStart()", Toast.LENGTH_LONG)
    //      .show();

    startActivity(alarmIntent);
}

// another implement method......
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T18:49:10.950

您可能需要处理程序；

```
Intent intent;
Handler handler;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    intent = new Intent(this, ChildActivity.class);
    handler = new Handler();

    setContentView(R.layout.activity_streaming_client_example);

} 
```

并使其在特定时间运行，使用 handler.postAtTime

```
handler.postAtTime(new Runnable() {
@Override
public void run() {
        MotherActivity.this.startActivityForResult(intent, 0);
    }
}, millisecond_toStartfromUpTime); 
```

如果您想在几秒钟后发布，请使用 handler.postDelayed

```
handler.postDelayed(new Runnable() {
@Override
public void run() {
        MotherActivity.this.startActivityForResult(intent, 0);
    }
}, millisecond_delayhere); 
```

# php - 可以使用 PHP simpleXML 创建 XML 文件吗？

> ID：11907288
> 
> 赞同：0
> 
> 时间：2012-08-10T18:31:37.933
> 
> 标签：php, simplexml

> **可能重复：**
> [使用 SimpleXML 从头开始​​创建 XML 对象](https://stackoverflow.com/questions/143122/using-simplexml-to-create-an-xml-object-from-scratch)

可以使用 PHP simpleXML 创建 XML 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:35:10.890

是的，它可以，这要归功于 `asXML`方法

# vim - 窗口顶部的vim命令

> ID：11907290
> 
> 赞同：4
> 
> 时间：2012-08-10T18:31:41.980
> 
> 标签：vim, ide

我经常用 python 和 C++ 编写代码，vim 是我选择的编辑器。我有一堆让事情变得更容易的插件/片段。我缺少的一个功能是将 vim 的命令窗口移到顶部的能力。所以，如果我输入“:e”，我希望这个命令出现在窗口的顶部。我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T20:15:33.470

命令行始终位于底部；这是无法改变的。我猜原因是某些 Ex 命令（如`:ls`）打印多行输出。您会期望此输出位于命令本身的旁边/附近。顶部的命令行意味着 Vim 的正常窗口布局将“向下滚动”以为输出腾出空间。这是不自然的，不像终端工作。（vi / Vim 首先是一个终端应用程序！）

所以，习惯吧！

# c# - 在表单视图的转发器中从代码隐藏的下拉列表中设置选定值

> ID：11907291
> 
> 赞同：1
> 
> 时间：2012-08-10T18:31:42.203
> 
> 标签：c#, asp.net, drop-down-menu

所以这里的情况。我在表单视图内的转发器中有一个下拉列表。

真正特别的部分是转发器被用于动态添加多行数据。

我一直在尝试做但失败的是设置下拉列表的选定值。

```
<asp:FormView ID="FormView3" runat="server" DataKeyNames="t_id" 
                DataSourceID="SqlDataSource25" DefaultMode="Insert">    
                <InsertItemTemplate>
                    t_p_id:
                    <asp:TextBox ID="t_p_idTextBox" runat="server" Text='<%# Bind("t_p_id") %>' />
                        <br />

                    t_step:
                    <asp:TextBox ID="t_stepTextBox" runat="server" Text='<%# Bind("t_step") %>' />
                    <br />
                    t_foreclosure_date:
                    <asp:TextBox ID="t_foreclosure_dateTextBox" runat="server" 
                        Text='<%# Bind("t_foreclosure_date") %>' />
                    <br />
                    t_date:
                    <asp:TextBox ID="t_dateTextBox" runat="server" Text='<%# Bind("t_date") %>' />
                    <br />

                    <hr />

                    <asp:Repeater ID="repeater1" runat="server" OnPreRender="repeater1_PreRender" OnItemCommand="repeater1_ItemCommand" >  
                    <HeaderTemplate>
                        <table cellpadding="5" cellspacing="5">
                        <tr style="padding-top: 5px;">
                            <td colspan="7">
                                <asp:Label ID="lblInstructions" runat="server" Text="Add entries here:" />
                            </td>
                        </tr>
                        <tr runat="server" id="trHeader" style="font-weight: bold;">
                            <td>Date</td>
                            <td>Cost</td>
                            <td>Type</td>
                            <td>Comment</td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>         
                    </HeaderTemplate> 
                    <ItemTemplate>
                        <tr>
                            <td><asp:TextBox ID="txtDate" runat="server" Width="55" 
                                 Text='<%#DataBinder.Eval(Container.DataItem, "date", "{0:d}")%>' /> </td>
                            <td><asp:TextBox ID="txtAmount" runat="server" Width="55"             
                                 Text='<%#DataBinder.Eval(Container.DataItem, "amount")%>' /> </td>

                            <td>
                                 <asp:DropDownList ID="ddlType" runat="server" DataSourceID="SqlDataSource26" 
                                    DataTextField="tt_type" DataValueField="tt_id"   ></asp:DropDownList>
                                  </td>

                                 <td><asp:TextBox ID="txtComment" runat="server" Width="300" 
                                 Text='<%#DataBinder.Eval(Container.DataItem, "comment")%>' /> </td>
                            <td style="text-align: center;">
                                <asp:Button ID="btnMoveUp" runat="server" Width="70" 
                                 Text="Move Up" CommandName="Up" 
                                 CommandArgument='<%# Container.ItemIndex %>' />
                            </td>
                            <td style="text-align: center;">
                                <asp:Button ID="btnMoveDown" runat="server" Width="90" 
                                 Text="Move Down" CommandName="Down" 
                                 CommandArgument='<%# Container.ItemIndex + 1 %>' />
                            </td>
                            <td style="text-align: center;">
                                <asp:Button ID="btnRemove" runat="server" Width="70" 
                                 Text="Remove" CommandName="Remove" 
                                 CommandArgument='<%# Container.ItemIndex %>' />
                            </td>
                        </tr>
                    </ItemTemplate> 
                    <FooterTemplate>
                        <tr style="padding-top: 5px;">
                           <td colspan="6">
                               <asp:Button ID="btnAdd" runat="server" 
                                Text="Add Row" CommandName="Add" />
                           </td>
                        </tr>
                        </table>
                    </FooterTemplate>
                </asp:Repeater>

                    <hr />
                    <asp:CheckBoxList ID="tpTransmittalsDoclist" runat="server" DataSourceID="SqlDataSource13" 
                        DataTextField="document_name" DataValueField="document_id">
                        </asp:CheckBoxList>

                    <asp:LinkButton ID="InsertButton" runat="server" CausesValidation="True" 
                        CommandName="Insert" Text="Insert" />
                    &nbsp;<asp:LinkButton ID="InsertCancelButton" runat="server" 
                        CausesValidation="False" CommandName="Cancel" Text="Cancel" />
                </InsertItemTemplate>
            </asp:FormView> 
```

在后面的代码中加载页面时，我在第一个中继器行中插入了虚拟值。我正在使用类成本来设置/存储转发器行的值。但是当我对中继器进行数据绑定时，我无法弄清楚如何设置下拉列表的选定值。我尝试了一些不同的东西，但没有快乐。有什么想法吗？

```
// load up costs in transmittals tab
    if (!Page.IsPostBack)
    {
        Costs mycost = new Costs();
        string date = DateTime.Now.ToShortDateString();
        Costs.Cost cost1 = new Costs.Cost(date, "1.99", 2, "1");
        mycost.Add(cost1);

        Repeater r = FormView3.FindControl("repeater1") as Repeater;
        r.DataSource = mycost;
        r.DataBind();
    } 
```

编辑：如果您使用的是整数。你会想用。

```
 SelectedIndex='<%#DataBinder.Eval(Container.DataItem, "type")%>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:39:35.870

您可以在标记页面中绑定 Dropdown 的 SelectedValue 属性，即

```
<asp:DropDownList ID="ddlType" runat="server" DataSourceID="SqlDataSource26" 
   DataTextField="tt_type" DataValueField="tt_id" 
   SelectedValue='<%# Eval("ColumnName")%>'>
 </asp:DropDownList> 
```

希望，这将解决您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T18:48:26.170

如果无法将值设置为下拉列表标签，例如...

```
SelectedValue='<%# Eval("ColumnWithValue")%>' 
```

...那么您需要使用[**OnItemDataBound**](http://support.microsoft.com/kb/317582/en)

基本上：

在中继器标签上，添加此属性：

```
OnItemDataBound="FormatRepeaterRow" 
```

在页面代码隐藏：

```
protected void FormatRepeaterRow(Object sender, RepeaterItemEventArgs e)
{
     if( (e.Item.ItemType == ListItemType.Item) || ( e.Item.ItemType == ListItemType.AlternatingItem)) 
     {
      ((DropDownList)e.Item.FindControl("ddlType")).SelectedValue = "a_value";
     }          
} 
```

# python - ipython：在应用程序中启动内核和内核管理器

> ID：11907298
> 
> 赞同：3
> 
> 时间：2012-08-10T18:32:04.690
> 
> 标签：python, kernel, ipython

我想在 Python 应用程序中使用**ipython 。**有没有人有*（或可以指出）*一个最小的例子：

1.  启动内核并..
2.  与它通信，*即发送和接收消息/代码片段*？

源代码文档中有一个示例`ipkernel_qt.py`，但这仅显示了如何从脚本中启动内核以及如何修改名称空间，并未显示如何发送代码。我想我需要使用**KernelManager**，但是有没有办法在没有配置文件的情况下将内核管理器连接到内核？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T10:23:37.610

我前一阵子这样做了，从那以后情况发生了变化，但这并不难。文档中有一个嵌入 IPython的[示例。](http://ipython.org/ipython-doc/stable/interactive/reference.html#embedding-ipython)

# delphi - 创建一个 Windows 服务来打开一个程序 - Delphi

> ID：11907299
> 
> 赞同：6
> 
> 时间：2012-08-10T18:32:09.223
> 
> 标签：delphi, windows-services

我正在用 Delphi 创建一个 Windows 服务。我的服务需要做的基本上就是打开一个程序。在我的代码中，我使用`WinExec(aux,SW_SHOWNORMAL);`. 当我启动并运行该服务时，似乎什么也没做，但是当我查看 TaskManager 时，我的服务应该打开的程序在列表中，并且在用户名列中出现 SYSTEM。

所以程序正在打开，但它没有显示在屏幕上。我在谷歌做了一个研究，发现了一些功能，`CreateProcess`但我不知道如何使用它。我究竟做错了什么？

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T18:47:18.580

服务始终运行在 Session 0 中。由服务启动的进程默认运行在服务的 Session 中，除非该服务用于`CreateProcessAsUser()`在不同的 Session 中运行该进程。

在 XP 和更早版本中，第一个登录的用户也在 Session 0 中运行（后续登录的用户在 Sessions 1+ 中运行）。因此，如果该服务在安装时被标记为 Interactive，并且它运行具有 UI 的进程，则在 Session 0 中运行的用户可以看到 UI。

在 Vista 及更高版本中，这不再可能。用户不再在 Session 0 中运行，服务不能再被标记为 Interactive。这称为“会话 0 隔离”。现在必须使用服务才能`CreateProcessAsUser()`在交互式会话中运行 UI 进程，以便用户可以看到它。

有关详细信息，请参阅 MSDN：

[会话 0 隔离](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756986.aspx)

[Session 0 隔离对 Windows 中的服务和驱动程序的影响](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463353.aspx)

[从服务调用 CreateProcessAsUser()](http://social.msdn.microsoft.com/Forums/en-US/windowssecurity/thread/31bfa13d-982b-4b1a-bff3-2761ade5214f)

[在 Windows Vista 及更高版本中从 Windows 服务启动交互式进程](http://blogs.msdn.com/b/winsdk/archive/2009/07/14/launching-an-interactive-process-from-windows-service-in-windows-vista-and-later.aspx)

[CreateProcessAsUser 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682429.aspx)

# tsql - 从 T-SQL sp_send_dbmail 发送 SMS 永远不会到达

> ID：11907304
> 
> 赞同：0
> 
> 时间：2012-08-10T18:32:31.990
> 
> 标签：tsql, sms, sql-server-2008-r2

我可以从 Outlook 发送到类似“5551112222@messaging.sprintpcs.com”的电子邮件，并获取短信，但相同的电子邮件在带有 sp_send_dbmail 的 T-SQL 中不起作用。有什么想法可能会被阻止吗？sp_send_dbmail 是否直接使用 SMTP 服务器？还是交换？

当我输入一个普通的电子邮件地址时，下面的相同代码可以正常工作。

```
EXEC msdb.dbo.sp_send_dbmail 
  @profile_name = 'DoNotReply_ProdAv_xxxxx.com',     
  @recipients = '5551112222@messaging.sprintpcs.com',
  @subject = 'Test from SQL',
  @append_query_error = 1,
  @query_result_separator = ' ' 
```

# asp.net-mvc-3 - 使用 ninject 和基于约定的绑定处理应用程序设置

> ID：11907306
> 
> 赞同：1
> 
> 时间：2012-08-10T18:32:37.863
> 
> 标签：asp.net-mvc-3, ninject, application-settings, ninject-conventions

我在 MVC3 应用程序中使用 Ninject 并尝试切换到使用 ninject.extensions.conventions 的基于约定的绑定。

现在假设我有一个需要访问应用程序设置的类，例如：

```
public class Foo : IFoo
{
  public Foo(string connectionString)
  { ... }
} 
```

我想我了解如何像这样使用 Ninject 进行正常绑定：

```
Bind<IFoo>()
  .To<Foo>()
  .WithConstructorArgument(
    "connectionString",
    ConfigurationManager.ConnectionStrings["Default"].ConnectionString); 
```

**但是我该如何使用约定来做到这一点呢？**

* * *

如有需要，可提供额外信息：

我正在使用 nuget Ninject.MVC3 包，在 App_Start/NinjectWebCommon.cs 的 RegisterServices 中，这就是我目前拥有的所有内容：

```
kernel.Bind(x => x
                .FromAssembliesMatching("*")
                .SelectAllClasses()
                .BindDefaultInterface()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T20:54:57.533

Ninject Conventions 可以让您以 10% 的成本完成 90% 的工作。如果您认为需要在其上添加额外的绑定，请不要担心。

但是在您的场景中，我不会太担心不通过构造函数注入连接字符串而只是手动抓取它。或者，您可以设置一个可以为您完成的 IDatabaseConfig 接口和实现，并且您的基于约定的绑定应该直接选择它。我们对我们的项目进行后期处理

# jquery - jQuery在活动页面中将标题更改为h1标题

> ID：11907309
> 
> 赞同：0
> 
> 时间：2012-08-10T18:32:46.217
> 
> 标签：jquery, html, function, title, page-title

如何将我的活动页面标题更改为 h1 标题或 h1 内容？

HTML

```
<section id="contact" class="page_content">
            <h2 title="Contact">Contact</h2>  
</section> 
```

JavaScript

```
$("ul.pages li").click(function() {
     $("ul.pages li").removeClass("active");
     $(this).addClass("active"); 
     $(".page_content").hide();
     var activepage = $(this).find("a").attr("href")
     $(activepage).show();                          
     return false;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:39:16.503

尝试;

```
$("ul.pages li").click(function() {
     $(this).addClass('active').siblings().removeClass('active'); 
     $(".page_content").hide();
     var activepage = $('a', this).attr("href");
     $(activepage).show();
     document.title = $('h1', activepage).first().text();   
     $('title').text( document.title );                        
     return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T18:38:50.473

添加 id：<h1 id="mytitle" title="contact">联系人</h1>

```
 $("ul.pages li").click(function() {
    $("ul.pages li").removeClass("active");
    $(this).addClass("active"); 
    $(".page_content").hide();
    var activepage = $(this).find("a").attr("href")
    $(activepage).show();

    // NEW:
    $("#mytitle").text("Hello this is changed");
    $("#mytitle").attr("title","we can also change here");     

    return false;
}); 
```

希望这就是你要找的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T19:10:52.397

如果要更改`title`页面的值，可以尝试：

```
var current = $('h1').attr('title')
$('title').text(current)

// or document.title = current; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T18:41:40.297

使title属性与当前页面的id匹配，然后

```
$("ul.pages li").click(function() {
     $("ul.pages li").removeClass("active");
     $(this).addClass("active"); 
     $(".page_content").hide();
     var activepage = $(this).find("a").attr("href")
     $(activepage).show();       
     $("h1[title="+activepage+"]").html("The new Title");
     return false;
}); 
```

# javascript - JavaScript 简单正则表达式 - 限制字符串的第一个字符正好是“#”

> ID：11907312
> 
> 赞同：0
> 
> 时间：2012-08-10T18:32:52.810
> 
> 标签：javascript, regex

我基本上想解析一个字符串，例如：

```
"#FFFFFF"   to "#FFFFFF",
"##FFFFFF"  to "#FFFFFF",
"FFFFFF"    to "#FFFFFF" 
```

我在制作将处理此类情况的通用正则表达式时遇到问题。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T18:44:52.180

```
var str =  '###FFFF';
str = str.replace (/^#*/, '#') 
```

用单个 # 替换字符串开头出现的 0 次或多次 #

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T18:35:19.230

你想要类似的东西`/^[#][^#]*$/`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T18:36:03.090

```
function formatThing(string){
    return "#" + string.replace(/#/g,"");
} 
```

将所有“#”替换为空，并在前面粘贴“#”。在我看来，这比任何复杂的正则表达式都更具可读性。它适用于提供的所有三个输入，以及其他一些奇怪的情况。

请注意，这是为了*转换*您的问题建议您想要的，而不是匹配的。如果您尝试标准化不同的输入，则更好，因为您在问题中写的 X 到 Y 意义上。取“##FFFFFF”并*匹配*除第一个“#”以外的所有内容，或拒绝匹配“FFFFFF”，因为它缺少前导“#”，这在此是不够的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T18:42:39.867

您将要匹配任意数量的 # OR 然后是开头的任何内容。像这样（见[jsFiddle](http://jsfiddle.net/FUGE8/)）：

```
new RegExp("(^#+|^)");

// #Test -> #Test
// ####Test -> #Test
// Test -> #Test 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-10T18:43:46.833

我会用`#`单个实例替换开头的任何（或没有）字符`#`：

```
resultString = sourceString.replace(/^#*/, "#"); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-10T18:45:35.837

```
var string = "#fffff";
string = string.replace(/#*/g, function(m, i){ return !i?"#":"";}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-10T18:51:11.180

这不会验证字符串实际上是有效的颜色，而只是强制字符串只有一个哈希作为第一个字符（通过从字符串中剥离所有哈希，无论它们在哪里，然后在前面添加一个）：

```
var colorString = "##ffffff";

console.log("#" + colorString.replace(/#/g, "")); // prints #ffffff 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-10T18:54:05.390

另一种添加到混合中的解决方案是检查带或不带前导 # 的 3-6 个字母的十六进制代码。

```
var re = /#?([A-F0-9]{3,6})/i;
function getHex (str){
   var val = str.match(re)
   return val ? "#" + val[1] : null;
}

console.log( getHex( "#FFFFFF" ) ); 
console.log( getHex( "##FFFFFF" ) );
console.log( getHex( "FFFFFF" ) ); 
```

# c# - 在 Excel 2010 中打开时如何从 CSV 中识别新行？

> ID：11907321
> 
> 赞同：0
> 
> 时间：2012-08-10T18:33:24.207
> 
> 标签：c#, .net, excel, csv, excel-2010

**编辑**

我不相信这是重复的.....如果您阅读前 5 个单词（“我正在使用 Aspose 库”）。你会看到他正在使用一些 3rd 方库。我不是。我正在渲染一个我想在 excel 中打开的 csv 文件。

* * *

我是一个生成 csv 文件的 C# 应用程序。当我打开 csv 文件时，我注意到在 columnA 中我的文本在一行中。我想把它分成多行（仍然在同一列中）。

我知道如果我在 excel 中使用 alt + enter 会产生新的行。

我知道如果我在记事本++ 中按回车键，它会生成一个标签（CR LF）。

我可以使用什么代码来制作它，以便在我的 C# 应用程序中可以将新行注入到我的字符串中？

我试过了

```
\n
\n\r
Enivroment.NewLine 
```

没有任何效果。

# ios - iOS - 添加 TabBarController 破坏了我为 TableViews 定制的 AppDelgate.m

> ID：11907324
> 
> 赞同：0
> 
> 时间：2012-08-10T18:33:36.103
> 
> 标签：ios, uitabbarcontroller, uitableview

这是我的 AppDelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;
    EventsMasterViewController *firstViewController = (EventsMasterViewController *)[[navigationController viewControllers] objectAtIndex:0];

    self.window.rootViewController = navigationController;
    [self.window makeKeyAndVisible];

    EventDataController *_myEventsDataController = [[EventDataController alloc] init];
    firstViewController.myEventsDataController = _myEventsDataController;

    EventDataController *_upcomingEventsDataController = [[EventDataController alloc] init];
    firstViewController.upcomingEventsDataController = _upcomingEventsDataController;

    EventDataController *_bookmarkedEventsDataController = [[EventDataController alloc] init];
    firstViewController.bookmarkedEventsDataController = _bookmarkedEventsDataController;

    return YES;
} 
```

当我唯一的视图是嵌入在导航控制器中的 MasterViewController 和 DetailViewController 时，这曾经很有效。

现在我想添加一个 TabBarController。所以我将 NavigationController 嵌入到 TabBarController 中。但是我的代表抛出了一个错误。

如图所示，我真的需要初始化我的 EventDataController 的 3 个实例。

所以我想问题是，“我如何以编程方式从 tabBarController 中获取 navigationController，以便我可以将 EventsDataControllers 添加到 firstViewController？”

**更新**

这是我的错误。我不明白 setMyEventsDataController 如何成为 UINavigationController 上的方法。

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UINavigationController setMyEventsDataController:]: unrecognized selector sent to instance 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:55:26.907

The `UITabBarController` has to be the window's rootViewController. You then add each of the `UINavigationBarController`s as the `contentView`s of the tab bar.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-10T19:08:10.030

```
EventsMasterViewController *firstViewController = (EventsMasterViewController *)[[navigationController viewControllers] objectAtIndex:0]; 
```

Because you set the firstViewController to the nav controller itself.

# apache - HTTP 直播流分发服务器选择

> ID：11907327
> 
> 赞同：1
> 
> 时间：2012-08-10T18:33:44.063
> 
> 标签：apache, webserver, http-live-streaming

我正在设置 Apple 的 HTTP Live Streaming System。我已经阅读了它的文档，系统的工作方式如下：输入音频/视频设备 --> 编码器 --> 分段器 --> 分发服务器 --> 客户端（iPad/iPhone ...）。

在我的测试中，我使用 Apache HTTP Server 作为分发服务器，这意味着我已经将播放列表和生成的 ts 片段上传到 Apache HTTP Server，然后分发给客户端。有用！我的问题是，分发服务器必须是支持http直播协议分发的特殊服务器吗？或者只是一个普通的http服务器可以工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:57:33.860

只需要一个普通的 HTTP 服务器。如果您有许多（数千）观众，您可能想要使用 CDN。

# iphone - 可重用 UIViewController 中的通用导航栏

> ID：11907329
> 
> 赞同：0
> 
> 时间：2012-08-10T18:34:03.957
> 
> 标签：iphone, ios, cocoa-touch

我有一个 UIViewController，它是我的静态库的一部分。这个 UIViewController 可能在不同的应用程序中使用。一些应用程序应该能够使用当前模式以导航样式呈现此视图。

问题是：关于导航栏设计这个 UIViewController 的优雅方式是什么？目前我有以下解决方案：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    if (self.navigationController != nil) {
        self.navigationItem.title = @Test;
        //... set nav bar buttons

    } else {
        UINavigationBar *navBar = [[UINavigationBar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
        navBar.topItem.title = @Test;
       //... set nav bar buttons and add UINavigationBar to view
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:39:56.310

那么**优雅**的方法是将你的通用 UIViewController 添加到 UINavigationController

这种方式非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T18:46:56.867

从 iOS 5 开始，Apple 添加了 UIViewController 容器。这允许您编写行为类似于 UINavigation 控制器的类。

您使用 addChildViewController: 方法将另一个视图控制器添加到您的层次结构中，然后您可以根据需要绘制视图控制器的视图。

Apple 文档的此页面包含您需要的所有信息[http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/AboutViewControllers/AboutViewControllers.html](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/AboutViewControllers/AboutViewControllers.html)

# powershell - cmd-let 导入多个模块 powershell

> ID：11907330
> 
> 赞同：2
> 
> 时间：2012-08-10T18:34:05.337
> 
> 标签：powershell, import, module

我一直在尝试为 powershell 编写一个 cmd-let，它允许我运行它并将多个模块一次导入到我正在运行的任何脚本中。我以为我让它工作了，但现在它似乎停止了。我只是想知道这是否可能，似乎是这样。

***为导入运行的命令：***

```
Import-Module .\Tools\Import-Tools.ps1 
$Tools = Import-Tools -ToolsDirectory \$PathToToolsDirectory
$Tools 
```

***导入功能：***

```
Function Import-Tools
{
    param 
    (
        [Parameter(Mandatory=$true)]
        [string]$ToolsDirectory
    ) 

    # Make sure the path is absolute (Borrowed from Michael Wanke)
    if (!(Split-Path $ToolsDirectory -IsAbsolute))
    {
        $ToolsDirectory = Join-Path $pwd $ToolsDirectory
    }

    #Verifies that the tools directory exists.
    while ((Test-Path -Path $ToolsDirectory) -eq $False)
    {
        $ToolsDirectory = Read-Host "Incorrect tool path entered. Please enter one now or exit"
    }

    #Create $Tools variable containing multiple lines for import.
    foreach ($Tool in Get-Childitem $ToolsDirectory -Name -Filter "*.ps1")
    {
        [string] $Tools= $Tools + "`r`nImport-Module $ToolsDirectory\$Tool"
    }

        Write-Output $Tools
        return $Tools

} 
```

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T11:14:16.237

您可以使用`Import-Module`cmdlet 导入多个模块：

```
# import multiple modules by using the name of the module
Import-Module -Name WebAdministration, ActiveDirectory

# import multiple modules by using a path
Import-Module -Name c:\moduleA.psm1, c:\moduleB.psm1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-30T22:28:23.437

这段代码对我有用：

```
foreach ($module in Get-Childitem $modulesFolder -Name -Filter "*.psm1")
{
    Import-Module $modulesFolder\$module
} 
```

# javascript - 名称上的 Javascript 条件

> ID：11907331
> 
> 赞同：-3
> 
> 时间：2012-08-10T18:34:09.977
> 
> 标签：javascript

我试图让这段代码对普通人说“你好”，但如果你的名字是尼克，我希望它说，“你好，主人，你按下了（无论你按下什么按钮）。” 但它不起作用，我不确定出了什么问题，这是我正在尝试使用的代码。

```
<html>
<head>
<title></title>

<script type="text/javascript">

function Name(button)
{
    ame = prompt("Whats Your Name?", "Visitor")
    var ame = "Nick"
    if(ame == "Nick"){
        alert("Hello Master, You Have Pressed, " + button)
    }else(ame != "Nick")
        alert("Hello " + ame + ", You Pressed " + button)
    }

</script>

</head>
<body>

<a href="javascript:Name('1')"><img src="1.gif"></a>
<a href="javascript:Name('2')"><img src="2.gif"></a>
<a href="javascript:Name('3')"><img src="3.gif"></a>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:36:40.467

else 没有条件语句。

[在 MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/if...else)上阅读if/else

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T18:38:12.643

```
}else(ame != "Nick") 
```

应该

```
}else if(ame != "Nick"){ 
```

要不就

```
}else{ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T18:39:18.960

我马上看到的一个问题是您`ame`在声明之前就使用了它。

```
function Name(button) {
    var ame = prompt("Whats Your Name?", "Visitor");

    if (ame == "Nick") {
        alert("Hello Master, You Have Pressed, " + button);
    }
    else {
        alert("Hello " + ame + ", You Pressed " + button);
    }
} 
```

有几个额外的语法问题，但我相信这应该可行。

希望这可以帮助，

# java - 如何在clojure中访问一罐罐子？

> ID：11907340
> 
> 赞同：2
> 
> 时间：2012-08-10T18:34:35.143
> 
> 标签：java, jar, clojure, libgdx

我正在将 lein 用于 Clojure 项目，我试图在[clojars中使用](https://clojars.org/org.clojars.amu/libgdx/versions/0.9.2)[libgdx](http://code.google.com/p/libgdx/)包。从该软件包安装的 jar 文件包含一个 lib 文件夹，其中包含用于 gdx 的多个 jar。

$ jar tf org/clojars/amu/libgdx/0.92/libgdx-0.9.2.jar

```
lib/ 
lib/gdx-openal.jar 
lib/gdx-backend-jogl-natives.jar
lib/gdx-backend-android.jar 
lib/gdx-backend-lwjgl.jar
lib/gdx-backend-lwjgl-natives.jar 
lib/gdx.jar 
lib/gdx-natives.jar
lib/gdx-backend-jogl.jar 
```

我还在我的 project.clj 中添加了以下依赖项：[org.clojars.amu/libgdx "0.9.2"]

我不确定的是如何使用 :use 和 :require 关键字访问 libgdx jar 中的每个 jar？

```
(ns game.core
  (:import (libgdx.gdx Game)) <- does not work 
```

我在 github 上放了一个 lein 项目的公共存储库：[Project Link](https://github.com/jwthomp/cljlibgdx-test)

我将更新该项目，以便在我解决它后作为其他人的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T01:53:03.983

An uberjar won't work because the file in clojars is not a normal jar file containing classes but is a really a file that you are meant to download, extract the necessary jars and place them on the classpath or lib for your project.

While you could write a fancy classloader to do that, that goes contrary to the [instructions from the libgdx site](http://code.google.com/p/libgdx/wiki/ProjectSetup) which include the instruction:

```
 Download the nightly zip and place gdx.jar and gdx-sources.jar in the libs folder. 
```

The more appropriate thing to do is to extract the jars from that download jar and add them to clojars and refer to them individually. That or just add them to your local classpath or repo.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T04:19:34.033

只是一个想法，但如果他们像那样打包它，那么也许他们已经提供了可以做正确事情的花哨的类加载器？

另外，您的导入对我来说看起来不正确。向量（不是列表）应该是正确的吗？

例如

```
(ns warscore.swing
  (:import
   [java.awt Color ]
   [java.awt.event MouseEvent]
   [javax.swing DefaultCellEditor JCheckBox JLabel JTable JTextField ]
   [javax.swing.table DefaultTableCellRenderer ])) 
```

# facebook - Facebook喜欢按钮位置问题

> ID：11907342
> 
> 赞同：0
> 
> 时间：2012-08-10T18:34:48.290
> 
> 标签：facebook, facebook-like

我有个问题。我正在重新设计一个网站，我正在使用 HTML5 + CSS3。我正在制作一个带有喜欢和关注按钮的栏。我通常使用无序列表处理那些 ul 的高度为 20px 并且每个子 li 元素具有相同的 20px 高度和 float:left 的列表。然后，我将 div.fb-like 和 follow 按钮插入到单独的 li 中。

我遇到的问题是，在 Windows 中，类似按钮在 IE9、Firefox 和 Opera 上向下移动 6px，但在 Chrome 和 Safari 上运行良好（所有浏览器都是最新的）。我尝试使用运行良好的 jquery css 修复，但随后我在 Chrome 上的 Macbook 上打开了该站点，并且在 6px 移动时遇到了同样的问题。

以前我制作了另一个页面，其中使用了几乎相同的条形布局，但它使用的是 XHTML 1.1 Transitional。由于某种原因，它没有这个问题。

我正在使用 HTML5 版本的 Like 按钮。

你可以在这里看到演示：http: [//yucatan.travel.zebradm.mx/prueba.php](http://yucatan.travel.zebradm.mx/prueba.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:46:39.060

您在某处有一个垂直对齐的文本底部：

```
.fb_iframe_widget span {
position: relative;
display: inline-block;
vertical-align: text-bottom;
text-align: justify;
} 
```

删除它，它会对齐

# android - QR 码扫描不适用于条形码扫描仪

> ID：11907350
> 
> 赞同：0
> 
> 时间：2012-08-10T18:35:32.553
> 
> 标签：android, zxing, qr-code, barcode-scanner, scanning

我正在为平板电脑（型号 SynchroDigital INOSOP10-4.0 RES）开发一个 android 应用程序，我想使用 ZXing 库来扫描包含字符串的二维码。它会在我需要时启动扫描仪，但我无法扫描任何东西。

实际上，如果我直接使用 Barcode Scanner 应用程序，它甚至不起作用，出现黄点但没有任何反应，无论 QR 码的亮度、距离或复杂性如何（尝试使用仅包含字母的巨大 QR 码） A")，它就是行不通。

然而，它与另一个代码扫描器完美配合，来自 pic2shop 应用程序的那个！

平板电脑的网络摄像头为 1,3MP，没有自动对焦功能。

问题是否来自网络摄像头？有没有其他我可以轻松实现的库而不是 ZXing 库？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-03T08:32:03.737

使用下面的代码，它适用于 QR 扫描，但不适用于条形码扫描 -

```
Intent objIntent = new Intent("com.google.zxing.client.android.SCAN"); 
objIntent.putExtra("SCAN_MODE", "QR_CODE_MODE"); 
startActivityForResult(objIntent, 0); 
```

或使用

```
Intent intent = new Intent(shopping.this, CaptureActivity.class);
startActivityForResult(intent, 0); 
```

# php - 使用 extract($_POST) 不安全吗？

> ID：11907358
> 
> 赞同：3
> 
> 时间：2012-08-10T18:36:06.043
> 
> 标签：php, security

使用`extract($_POST)`不安全？如果是，那么我该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T18:38:36.910

是的。它与 register_globals 是一样的。这意味着如果有人注入一个名为“my_name”的值，则变量“my_name”将存在。如果它存在，如果您在某个地方使用该变量，它可能会在您的脚本中带来一些垃圾或安全问题`$my_name`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-10T18:39:29.460

从 php 文档：

> 不要对不受信任的数据使用 extract()，例如用户输入（即 $_GET、$_FILES 等）。如果这样做，例如，如果您想临时运行依赖于 register_globals 的旧代码，请确保使用不可覆盖的 extract_type 值之一，例如 EXTR_SKIP 并注意您应该按照 variables_order 中定义的相同顺序进行提取php.ini。

推荐的做法是`$_POST[<varname>]`直接使用，这样您网站的用户就不能设置应该是“安全”的变量

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T18:40:31.120

是的，它是不安全的。任何人都可以覆盖您的局部变量（例如`$password`or `$access_level`）。

我建议像这样声明和分配你*自己的*局部变量：

```
$var1 = isset($_POST['field_1'])?$_POST['field_1']:null;
$var2 = isset($_POST['field_2'])?$_POST['field_2']:null;
$var3 = isset($_POST['field_3'])?$_POST['field_3']:null; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-23T13:33:51.200

`extract($_POST)`正如其他人所说，使用是不安全的。您询问了如何`extract($_POST)`确保安全，特别是避免不断引用`$_POST`数组。

## 字面答案

您询问了如何`extract($_POST)`安全使用。**在定义任何局部变量之前或**使用和 前缀之前，将其用作脚本的第一行是*比较安全的。*然而，在这两种情况下，您都在进行一场冒险的赌博，您永远不会在该变量范围内的*任何地方通过拼写错误意外引入安全漏洞。*全球范围非常难以验证。因为所有的程序员都会打错字，并且不便之处很小，所以大多数程序员***强烈***建议不要使用不受信任的内容，无论范围、前缀等如何。**`EXTR_PREFIX_ALL`**`extract()`****

 ****## 正确答案

`$_POST`ed 数据不可信且不安全。你永远不知道它可能包含什么——或者它是否会被设置。`$_POST`在将其分配给局部变量之前，将其视为必须“清理”的“污染”数据是很有用的。因此，您应该能够`$_POST`通过在将输入分配给局部变量时验证输入来最小化“”的输入。PHP 5.2 及更高版本使用带有验证过滤器的`filter_input()`和函数使这更容易。`filter_var()`

顺便说一句，您应该始终*验证*您的输入并*清理*您的输出。如果您改为清理输入，您可能会遇到在不同上下文中显示它们的问题（即，非 HTML 记录器，打印到终端）。如果你不清理你的输出，你就会遇到 XSS、SQL 注入等。

这种思维方式鼓励的经验法则是将所有从您无法控制的系统进入您的系统的数据视为“受污染的”、不可信的 - 您可能无法控制运行 Web 浏览器的系统，除非为 LAN 开发。此外，“纵深防御”鼓励将甚至受信任的系统视为可妥协的（它确实发生了），这使得这成为程序员最普遍的最佳实践。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T18:40:05.247

最好简单地从中读取值`$_POST`并对其进行处理，而不是仅仅将它们作为变量公开并冒着覆盖你的一些风险......****

# windows - 如何绕过 iPad 上的 HTML5 Web 应用程序的身份验证？

> ID：11907359
> 
> 赞同：0
> 
> 时间：2012-08-10T18:36:29.743
> 
> 标签：windows, ipad, html, web-applications

我们的企业已经开发了许多位于我们 Windows 服务器上的 HTML5 Web 应用程序。我们的用户喜欢它们，除了每次他们在 iPad 上从一个应用程序切换到另一个应用程序时，系统都会提示他们输入网络凭据以进行身份​​验证。Safari Mobile 只需要在会话开始时进行一次身份验证，为什么 Web 应用程序需要不断地进行身份验证？

有没有办法回避所有这些持续的身份验证？这是生产力的真正障碍。

# javascript - 尝试绑定更改甚至文件选择输入似乎不起作用

> ID：11907364
> 
> 赞同：0
> 
> 时间：2012-08-10T18:36:49.010
> 
> 标签：javascript, jquery

我正在尝试将更改绑定到我阅读的文件输入，并且以下假设可以工作但没有：

```
 <input type="file" name="uploadfile" id="Uploadthisfile" /> 
```

这是我的文件输入

```
$("#Uploadthisfile").change(function() { 
  alert('some message');
}); 
```

这就是我试图绑定它的方式。

难道我做错了什么 ？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:40:28.397

您是否将其包装在 document.ready 函数中？它在下面的小提琴中工作正常

```
$(function(){  // <-- short form of below - waits for dom to load before -- 
               // elements have to exist in dom before trying to bind them
   $("#Uploadthisfile").change(function() { 
      alert('some message');
   });
}); 
```

或者

```
$(document).ready(function() {
   $("#Uploadthisfile").change(function() { 
      alert('some message');
   });
}); 
```

[http://jsfiddle.net/wirey00/C6RZn/](http://jsfiddle.net/wirey00/C6RZn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-30T20:29:42.630

```
//Upload the File and Convert into base64 string
$('#Uploadthisfile').live('change', function () {

var fileList = this.files;
var file = fileList[0];
var r = new FileReader();
r.onload = function () {
    var binimage = r.result;
    binimage1 = binimage.replace('data:image/jpeg;base64,', '');
    var imag = "<img " + "src='" + 
        "data:image/jpg;base64," + binimage1 + "' style='width:100px'/>";
    $("#partial1").html(imag);

};
r.readAsDataURL(file);
// r.readAsBinaryString(file);
//r.readAsDataURL(file);
}); 
```

# velocity - 如何为 VelocityTools DateTool 设置时区？

> ID：11907365
> 
> 赞同：3
> 
> 时间：2012-08-10T18:36:49.913
> 
> 标签：velocity

[VelocityTools Tools Usage Summary](http://velocity.apache.org/tools/releases/2.0/summary.html)和DateTool [Javadoc](http://velocity.apache.org/tools/devel/javadoc/org/apache/velocity/tools/generic/DateTool.html)似乎都表明了用于设置 TimeZone 的配置机制，但我根本无法发现那是什么。

DateTool 的时区设置器是`protected`，我不想重复将 TimeZone 传递给重载的`format()`方法。

（速度工具 2.0）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T13:13:57.830

要将配置值传递给标准工具，您必须在 WEB-INF/tools.xml 文件中明确列出它们：

```
<?xml version="1.0"?>
<tools>
  <toolbox scope="application">
    <tool key="date"
          class="org.apache.velocity.tools.generic.DateTool"
          timezone="GMT+7"/>
    ...
  </toolbox>
  ...
</tools> 
```

请注意，您可以将 org.apache.velocity.tools.generic.ComparisonDateTool 用于相同目的，它添加了一些不错的日期时间比较功能。

如果您不依赖 VelocityView 工具加载机制，那么这意味着您将自己的工具置于 Velocity 上下文中。如果是这样，那么配置值将手动提供给工具 configure(Map)。例如：

```
Map<String,String> config = new HashMap<>();
config.put(DateTool.TIMEZONE_KEY,"GMT+7");

DateTool date = new DateTool();
date.configure(config);

VelocityContext context = new VelocityContext();
context.put("date", date); 
```

# c++ - boost::asio 使用工作线程的多个传出 SSL 连接

> ID：11907371
> 
> 赞同：1
> 
> 时间：2012-08-10T18:37:08.743
> 
> 标签：c++, boost, boost-asio, boost-thread

我正在更好地学习 boost::asio，最近我已经将它用于一些基本的服务器应用程序。所以我想我知道（一点）基础知识。

但是今天我有一个我似乎无法解决的问题：

我想建立一些传出 SSL 连接（超过 100 个）。出于这个原因，我使用了许多工作线程（因为我读到这样做可以更好地扩展）。这些工作线程除了`io_service->run()`. 我使用 boost::asio SSL 客户端示例作为开始，并将这些工作线程添加到此源。在`main()`我启动这些工作线程之后，我为 io_service 发布任务，如下所示：

```
int main( int argc, char * argv[] )

    boost::shared_ptr< boost::asio::io_service > io_service(
            new boost::asio::io_service
    );
    boost::shared_ptr< boost::asio::io_service::work > work(
            new boost::asio::io_service::work( *io_service )
    );
    boost::shared_ptr< boost::asio::io_service::strand > strand(
            new boost::asio::io_service::strand( *io_service )
    );

    boost::thread_group worker_threads;
    for( int x = 0; x < 4; ++x )
    {
            worker_threads.create_thread( boost::bind( &WorkerThread, io_service ) );
    }

    io_service->post( boost::bind( &doConnect, io_service, "127.0.0.1", "7777" ) );
    io_service->post( boost::bind( &doConnect, io_service, "192.168.2.3", "7777" ) );

    work.reset();

    worker_threads.join_all();

    return 0;

} 
```

`doConnect()`只不过是 boost::asio SSL 客户端示例中的 main 中的原始代码：

```
void doConnect( boost::shared_ptr< boost::asio::io_service > io_service, string host, string port ) {

    boost::asio::ip::tcp::resolver resolver(*io_service);
    boost::asio::ip::tcp::resolver::query query(host, boost::lexical_cast< std::string >( port ));
    boost::asio::ip::tcp::resolver::iterator iterator = resolver.resolve(query);

    boost::asio::ssl::context ctx(boost::asio::ssl::context::sslv23);
    ctx.load_verify_file("server.crt");

    client c(io_service, ctx, iterator);
} 
```

这段代码编译得很好，但在执行过程中发生的是我收到一个`Operation canceled`错误。

我尝试了很多事情：

1.  在此站点上阅读了一些内容后，我得到提示，示例代码中的构造函数可能存在`this`指针超出范围的问题，因此我尝试使用`shared_from_this()`. 这导致了一个`exception: tr11: weak pointer`.

2.  为了摆脱这个弱指针问题，我尝试将代码从构造函数移到它自己的方法`Start()`中，并在方法中创建对象后调用此`doConnect()`方法。没有结果，弱指针问题仍然存在。

3.  之后，我将代码移回构造函数，就像在示例中一样，并删除了所有 SSL 特定代码，更改为普通套接字类型并再次运行它。现在我再次收到原始错误：`Operation canceled`，所以它似乎与 SSL 代码没有任何关系。

4.  一路上（但肯定没有 SSL 代码），我还收到一条错误消息，说没有网络。

任何人都可以在这个问题上闪耀他或她的光芒，因为我找不到关于错误消息本身或原因的太多信息（除了套接字已关闭或超出范围（然后也关闭）的建议）..

如果需要更多信息，请告诉我，我会发布更多文本或代码...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T02:06:51.380

**已解决：**问题是一个简单的（但被忽视的）事实，即我没有通过 shared_ptr 实例化客户端对象。我改回我的选项 1 尝试，对象现在是一个 shard_ptr，弱指针异常消失了，一切正常。

# php - 如何检查数据库是否使用 php 和 ajax 更新？

> ID：11907372
> 
> 赞同：4
> 
> 时间：2012-08-10T18:37:10.813
> 
> 标签：php, ajax, chat

**我正在制作一个聊天框，一切正常，除了更新。** 我目前每 3 秒刷新一次页面以检查任何新消息，但这肯定会导致服务器负载过重，而且不优雅。

我想要的是，聊天框只会在数据库更新时检查新消息，而不是每 3 秒检查一次数据库的计时器

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T18:42:45.697

您想要 AJAX 推送（服务器仅在有新内容时才向客户端发送更新）。在此处查看示例：http: [//provatosys.com/bid.html](http://provatosys.com/bid.html)

这样的事情会详细说明来自客户的请求：

```
function sendRequest(uid){
    var xmlhttp;
    var myUserId="";
    myUserId=uid;

    if (window.XMLHttpRequest){// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    } else { // code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange=function(){
        if (xmlhttp.readyState==4 && xmlhttp.status==200){
            displayInChat(xmlhttp.responseText)//do stuff (process response, display message)
        }
    }

    xmlhttp.open("GET","process_request.php?userid="+uid,true);
    xmlhttp.send();

    setTimeout("sendRequest("+uid+")",1000); //poll every second
} 
```

现在您想延迟来自服务器（process_request.php）的回复，直到有东西要发送（`while (($msg=new_msgs()) === false) {sleep(timeout);}`例如使用类似的东西）或请求超时并且从客户端（）发送新的轮询`setTimeout("sendRequest("+uid+")",timeoutinmillisecs);`。这称为长轮询，对于诸如聊天之类的应用程序来说，比回复空响应更有效。

您可以在此处找到更多信息：[如何实现基本的“长轮询”？](https://stackoverflow.com/questions/333664/simple-long-polling-example-code)

在这里：[让 AJAX 调用等待 php 中的事件](https://stackoverflow.com/questions/5088051/make-ajax-call-wait-for-event-in-php)

在这里：[彗星（编程）](http://en.wikipedia.org/wiki/Comet_%28programming%29)

**[编辑]** *作为长轮询的一个非常需要和更有效的替代方案，现在所有主要浏览器都支持[websockets](http://en.wikipedia.org/wiki/WebSocket)。RFC6455[已于](https://www.rfc-editor.org/rfc/rfc6455)2011 年进入（提议的）标准状态（这意味着它已退出草案状态并且此后没有任何更改）。PHP 中最好的实现可能是[Ratchet](http://socketo.me/)（据我所知[，这是迄今为止最新](http://socketo.me/reports/ab/index.html)的标准）。这是一个关于如何使用它构建网络聊天的教程：http: [//socketo.me/docs/hello-world](http://socketo.me/docs/hello-world)*

# python - SleekXMPP：获取 ClientXMPP JID 资源？

> ID：11907379
> 
> 赞同：0
> 
> 时间：2012-08-10T18:37:28.977
> 
> 标签：python, xmpp

```
import sleekxmpp

class SendMsgBot(sleekxmpp.ClientXMPP):
    def __init__(self, jid, password, recipient, wsh):
        print "jid is " + jid
        sleekxmpp.ClientXMPP.__init__(self, jid, password)
        print "self jid is " + self.jid 
```

我正在使用上面的 SleekXMPP，遵循他们的[基本示例](http://sleekxmpp.com/getting_started/sendlogout.html)。创建 SendMsgBot 时，我将 jid 提供为 user@domain.com/resource。但是，上面代码的输出给了我：

```
jid is user@domain.com/resource
self jid is user@domain.com 
```

是否有可能找出一个 slimxmpp.ClientXMPP 的资源？我知道资源正在被使用，因为数据在原始 XMPP 节中。我看到有一个[JID 类](http://sleekxmpp.com/api/xmlstream/jid.html)，但我不知道如何从[ClientXMPP](http://sleekxmpp.com/api/clientxmpp.html) jid 到那个。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:56:28.697

有一个`self.boundjid`字段，它是会话绑定期间设置的 JID。由于这是一个 JID 对象，您可以使用`self.boundjid.resource`.

# objective-c - 核心动画动画层水平翻转

> ID：11907380
> 
> 赞同：2
> 
> 时间：2012-08-10T18:37:32.363
> 
> 标签：objective-c, ios, core-animation

我有两个视图，我想使用核心动画在两个视图之间切换，为每个视图的图层设置动画。我想要的动画就像提供的一样，`UIViewAnimationOptionTransitionFlipFromLeft`但我无法做到。我可以让图层旋转 180 度，然后在动画停止时转换到下一个视图。如何才能做到这一点？

我使用的代码如下：

```
CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"transform"];
self.view.layer.zPosition = 100;
CATransform3D transform = CATransform3DMakeRotation(M_PI, 0, 1, 0);
[animation setToValue:[NSValue valueWithCATransform3D:transform]];
[animation setDuration:.5];
[animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn]];
[animation setFillMode:kCAFillModeForwards];
[animation setRemovedOnCompletion:YES];
[animation setDelegate:self];

[self.view.layer addAnimation:animation forKey:@"test"]; 
```

在委托中，我转换到下一个视图。但是，这没有多大意义，并且动画不像默认动画提供的那样生动。如何做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T19:01:13.170

# How to make it look like a 3D rotation

Your rotation doesn't look like it happens in 3D space because there is no perspective to your transform. Change the `m34` value of the transform into something small like 1.0/800.0 and you should see it rotate with perspective.

```
CATransform3D transform = CATransform3DMakeRotation(M_PI, 0, 1, 0);
transform.m34 = 1.0/800.0;
[animation setToValue:[NSValue valueWithCATransform3D:transform]]; 
```

That value (third column, forth row) of the 3D transform controls the perspective of the transform. You can read more about [3D projection on Wikipedia](http://en.wikipedia.org/wiki/3D_projection) if you want to know more about how it works.

# How to flip two views as if they were to sides of a card

To have it seem like the two views are two sides of the same view you should add them rotate the back side π degrees and change the layer's [`doubleSided`](https://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CALayer_class/#//apple_ref/occ/instp/CALayer/doubleSided) property to NO for both layers. Now they won't be visible when facing away from you. As you apply the rotation to both the front and back layer they will change which layer is visible. Note: rotate the front to π degrees and the back to 2π so that it completes it rotation and faces you.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-11T13:46:29.713

你可以使用

```
 [UIView transitionFromView:aView
                    toView:bView
                  duration:0.3
                   options:UIViewAnimationOptionTransitionFlipFromLeft
                completion:^(BOOL finished) {
                }
 ]; 
```

我发现您希望在同一个超级视图中拥有两个视图，否则事情会变得有点混乱。

# php - Lat / Lng 在 Google Map V3 上创建标记

> ID：11907381
> 
> 赞同：0
> 
> 时间：2012-08-10T18:37:33.403
> 
> 标签：php, javascript, jquery, google-maps, geolocation

我的数据库中有 Lat 和 Lng，当我尝试将它们结合起来在地图上创建标记时，它不起作用。属性 data-lat 和 lng 来自我的 html 代码，它们代表我数据库中的真实 lat 和 lng。

纬度：10.432548 和 Lng：32.4972830002。

如果您查看我的代码并帮助我修复它，我将不胜感激。谢谢

```
 var marker;
    var Gmap = new google.maps.Map($('#map_canvas').get(0),mapOptions);
    var lat= $(this).attr('data-lat');
    var lng= $(this).attr('data-lng');
    var newLocation= lat+', '+lng;

    if(lat!=0 || lng!=0){

            if (marker) {
                marker.setPosition(newLocation);
            }else{
                marker = new google.maps.Marker({
                    position: newLocation,
                    map: Gmap
                });
            }   

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:39:35.853

对不起，我刚刚修好了....

```
var newLocation = new google.maps.LatLng(lat,lng); 
```

# asp.net - 为什么 Web.config 在项目文件夹而不是 bin 中寻找 configSource？

> ID：11907389
> 
> 赞同：7
> 
> 时间：2012-08-10T18:38:14.543
> 
> 标签：asp.net, visual-studio-2010, configuration, web-config

我已经定义了我的 configSource 以在名为 config 的子目录中查找配置文件，如下所示：

```
<connectionStrings configSource="config\ConnectionStrings.config" /> 
```

我将配置文件定义为链接文件，因此当构建发生时，它会被复制到我的 bin\config 文件夹中。

但是，我的 Web 应用程序项目正在查看*开发*项目配置文件夹，而不是*部署*bin\config 文件夹。我通过 Process Monitor 确认了这一点。

所以我有几个问题：

1.  为什么它看起来在那里而不是 bin\config - 我是否在某处错过了相对路径设置？
2.  链接的文件不会复制到那里，而只会复制到 bin。我的理解是这是正确的行为。这是一个正确的假设还是应该将其复制到两个位置？如果是这样，启用它的设置是什么？
3.  为链接文件使用子文件夹是一种好习惯，还是应该将它们留在项目根目录中？

非常感谢！

**更新：**我正在使用此处描述的方法：http: [//consultingblogs.emc.com/jamesdawson/archive/2008/06/03/using-linked-files-with-web-application-projects.aspx](http://consultingblogs.emc.com/jamesdawson/archive/2008/06/03/using-linked-files-with-web-application-projects.aspx) 以确保配置文件被复制，并做了一些实验，我已经回答了问题 #2。不，这不是 Visual Studio 中的默认行为，但此解决方法可确保将文件复制到这两个位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T19:01:43.613

I believe this may help you a little bit. [How to use multiple Web.config files](http://www.aspdotnet-suresh.com/2011/04/how-to-use-multiple-webconfig-files-in.html)

Basically you can have as many config files as you like, as long as they are in separated folder of your web application. I a bit confused by part of your comment where you mention "different web project", could you be a bit more specific in that department? Also, I have found far more detail about this on [msdn](http://msdn.microsoft.com/en-us/library/ms178685.aspx), I suggest you check it out.

Happy coding!

# grails - 阻止 Grails 添加 .JSP 文件异常

> ID：11907390
> 
> 赞同：1
> 
> 时间：2012-08-10T18:38:14.467
> 
> 标签：grails, groovy

我正在做一个项目。我们正在将代码迁移到 Grails。问题是编写文件的人将其保存为 .html，而我们并不是为了添加一个不错的 spring 登录而试图弄乱它。但是，我无法让 Grails 显示 .html。我将 URLMapping 更改为从那里开始，它只是将其更改为 index.html.jsp。我更改了 Config.groovy 并从 grails.mimes.types 中删除了 html 部分。那没有用。因此，我将 grails.mime.file.extensions 更改为 false。依然没有。它不断添加.jsp。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T00:19:57.343

简单地将它的扩展名重命名为.gsp。测试它 - 添加到 urlMapping 文件行`"/test(view:'yourFileName')"`，运行应用程序并转到此链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T03:13:09.687

如果你不需要做任何处理，它只是一个静态的html文件，或者只是一个静态文件。您应该将其放入`web-app`目录中，例如

```
web-app/login.html 
```

并且可以从浏览器访问`http://localhost:8080/%YOUR APP%/login.html`

# jquery - 使用 $.when 来组合 Promise

> ID：11907391
> 
> 赞同：0
> 
> 时间：2012-08-10T18:38:33.937
> 
> 标签：jquery, jquery-deferred

我正在学习如何使用 jQuery 的[deferred](http://api.jquery.com/category/deferred-object/)，所以我做了一个简单的小例子，这样我就可以乱来了。

```
function a() {
    var d = new $.Deferred,
        $A = $('#A'),
        $P = $('#P').progressbar();

    setTimeout(function() {
        $A.css('background-color', 'blue');
        d.notifyWith($P, [.5]);
    }, 2000);

    setTimeout(function() {
        $A.text('test');
        d.notifyWith($P, [1]);
        d.resolveWith($P, ['done']);
    }, 4000);

    return d.promise();
}
$('#G').click(function() {
    a().progress(function(x) {
        this.progressbar({
            value: x * 100
        });
    }).done(function(x) {
        alert(x)
    });
});​ 
```

演示：http: [//jsfiddle.net/NTICompass/3DDSa/3/](http://jsfiddle.net/NTICompass/3DDSa/3/)

这个例子很好用。操作完成后，会弹出警报。

我读到你可以将多个承诺与[`$.when`](http://api.jquery.com/jQuery.when/)（它本身返回一个承诺）结合起来，所以我决定`a()`分成两个函数：

```
function a() {
    var d = new $.Deferred,
        $A = $('#A');

    setTimeout(function() {
        $A.css('background-color', 'blue');
        d.notify(.5);
    }, 2000);

    return d.promise();
}

function b() {
    var d = new $.Deferred,
        $A = $('#A');

    setTimeout(function() {
        $A.text('test');
        d.notify(1);
        d.resolve('done');
    }, 4000);

    return d.promise();
}

$('#G').click(function() {
    var $P = $('#P').progressbar();
    $.when(a(), b()).progress(function(x) {
        $P.progressbar({
            value: x * 100
        });
    }).done(function(x) {
        alert(x)
    });
});​ 
```

演示：http: [//jsfiddle.net/NTICompass/3DDSa/8/](http://jsfiddle.net/NTICompass/3DDSa/8/)

我曾经`$.when(a(), b())`将这两个承诺结合起来，但它不起作用。进度条达到 50%，但没有达到 100%，并且`.done`永远不会调用 my。

`.notify`里面的( 和`.resolve`)似乎`b()`没有任何效果。这里有什么问题？我如何使用`$.when`结合 2 个承诺？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T18:59:05.877

看起来你从来没有解决过`d`函数中的问题`a`。`$.when`当它包含的所有承诺都被解决时，返回的承诺被解决。见 [http://jsfiddle.net/3DDSa/6](http://jsfiddle.net/3DDSa/6)

-promise 中传递的参数`.done`与`when`创建它时的顺序相同。所以`x`in `done`-callback 指的`a`是用 ( `undefined`) 解析的值，并`arguments[1]`指的是 b 用 ( `"done"`) 解析的值。见[http://jsfiddle.net/3DDSa/11](http://jsfiddle.net/3DDSa/11)

看起来`when`-promise 的进度回调以相同的方式工作，但参数数量增加了。

# testing - 负载测试作为空闲的 Web 浏览器

> ID：11907392
> 
> 赞同：0
> 
> 时间：2012-08-10T18:38:36.340
> 
> 标签：testing, web-applications, load, automated-tests, stress-testing

我被分配了对托管新 Web 应用程序的 Web 服务器进行负载测试的任务。我已经将浏览器指向应用程序并运行 Charles（或 Fiddler - 取决于操作系统）并查看正在发出的请求以及频率。我现在想做的是模拟几个指向同一个应用程序的浏览器，并在登录后空闲长达一个小时。我已经阅读了这两个帖子：

[对 Web 应用程序执行压力测试？](https://stackoverflow.com/questions/7492/how-do-you-stress-test-a-web-application)

[https://stackoverflow.com/questions/9703800/web-application-testing-simulating-idle-browser-time](https://stackoverflow.com/questions/9703800/web-application-testing-simulating-idle-browser-time)

但恐怕我对性能/负载/浸泡测试还太陌生，不知道是否可以使用这些工具中的任何一个。似乎它们都适合向服务器发出请求，但我想模拟一个空闲的浏览器，用户不会明确地发出任何请求。这些请求是在用户不知情的情况下隐式发出的。

我希望这是有道理的。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:05:35.037

如果你想设置一个模拟，使用 Firefox 的 iMacros 插件应该很容易。否则，可能会在 Windows 窗体中使用 C# WebBrowser 控件创建一个简单的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:26:03.963

如果您只需要几个浏览器并且不需要从中收集/分析数据，您可以手动完成或使用 Selenium WebDriver 自动执行该过程。

如果您想为更多的浏览器执行此操作，或者您想收集和分析客户端性能数据，那么您将需要研究负载测试软件。其中大部分在 HTTP 层进行模拟，而不是使用真实的浏览器。但这很好，只要您可以捕获和模拟在没有用户干预的情况下发生的请求。以我的经验，这并不难，但这确实取决于所讨论的应用程序。免责声明：我为[Web Performance](http://www.webperformance.com/)工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T16:14:13.967

如果您对商业工具持开放态度，那么我想推荐[Telerik 的 Test Studio](http://www.telerik.com/automated-testing-tools)。（完全披露：我是该工具的传播者！）

Test Studio 让您可以为现实的负载测试场景创建全面的用例组合。您可以使用 Test Studio 功能测试、Fiddler 跟踪或动态捕获您自己的用例。然后，您可以组合这些用例并在它们之间构建自定义分布。

此外，您可以在 IE、Firefox、Safari 和 Chrome 之间混合使用会话。

关于您提到的暂停时间：每个用例都可以根据您认为合适的思考时间（延迟）进行完全定制。

如果您的应用程序由 Windows 服务器提供服务，那么您甚至可以从该系统收集性能计数器指标，并将其包含在您的实时和运行后分析中。

# php - 调用每小时/每天/每周/每月数据时出现 ajax 发布错误

> ID：11907395
> 
> 赞同：0
> 
> 时间：2012-08-10T18:38:43.260
> 
> 标签：php, html, jquery, post, http-post

我在 OpenLayers 上有一个热图应用程序，用户在其中输入两个日期和时间间隔，然后选择他/她是要查看这两个日期时间之间的所有数据还是根据每小时/每天/每周/每月间隔查看它们。但是，当我输入两个日期和时间作为输入并尝试可视化数据时，我只能可视化这两个间隔之间的所有数据。每当我从 HTML 下拉菜单中选择每小时、每天、每周等并按下获取查询按钮时，我都会收到 Ajax POST 消息中的错误消息。这可能是什么原因？代码如下：

HTML 帖子部分：

```
$(document).ready(function(){

 // ajaxForm submission
 $('#ajaxForm').submit(function() {
  $.ajax({
   type: 'POST',
   url: 'heatQuery.php',
   //url: 'http://localhost/heatQuery.php',
   data: $(this).serialize(),
   dataType: 'json',
   success: function(response)
   {   
       // update the points for heatmap layer          
       updateHeatMap(response);

   },
   error: function(errorMsg)
   {
       alert('Error in Ajax POST');
       }

  });

  return false;
 });
}); 
```

PHP部分：

setupDB.php

```
<?php

$mysql_hostname = "localhost";
$mysql_user = "myuser";
$mysql_password = "mypassword";
$mysql_database = "mydatabase";
$bd = mysql_connect($mysql_hostname, $mysql_user) or die("Oops some thing went wrong");
    mysql_select_db($mysql_database, $bd) or die("Oops some thing went wrong");

?> 
```

热查询.php

```
<?php
include 'setupDB.php';
$coords_array = array();

function getPoints($dateTimeBeg,$dateTimeEnd)
{
$ses_sql= "SELECT lat,lon FROM `mytable` WHERE calltime >= '$dateTimeBeg' AND calltime <= '$dateTimeEnd'";  
    $result = mysql_query($ses_sql,$bd) or die('Error: ' . mysql_error());
    if($result)
    {
        $num_of_rows = mysql_num_rows($result);
        if($num_of_rows > 0)
        {
            while($row = mysql_fetch_row($result))
            { 
                array_push($coords,array($row[0],$row[1]));     
            }
            array_push($coords_array,$coords);
        }
    }
}

$hours = array(1 => '00:00', '01:00', '02:00', '03:00', '04:00', '05:00', '06:00', '07:00', '08:00', '09:00', '10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00', '17:00', '18:00', '19:00', '20:00', '21:00', '22:00', '23:00', '24:00');

$dateBeg = isset($_POST['date1']) ? $_POST['date1'] : "";
$dateEnd = isset($_POST['date2']) ? $_POST['date2'] : "";
$dateFreq = isset($_POST['freq']) ? $_POST['freq'] : "";

if($dateBeg && $dateEnd && $dateFreq) // if all variables are set
{
    $datetime1 = new DateTime($dateBeg);
    $datetime2 = new DateTime($dateEnd);
    $interval = $datetime1->diff($datetime2,true);

    if($dateFreq == "all")
    {
        $coords = array();
        $timeBeg = $_POST['time1'];
        $timeEnd = $_POST['time2'];
        $sp = " ";
        $dateTimeBeg = $dateBeg.$sp.$timeBeg;
        $dateTimeEnd = $dateEnd.$sp.$timeEnd;
        $ses_sql= "SELECT lat,lon FROM `mytable` WHERE calltime >= '$dateTimeBeg' AND calltime <= '$dateTimeEnd'";  
    $result = mysql_query($ses_sql,$bd) or die('Error: ' . mysql_error());
    if($result)
    {
        $num_of_rows = mysql_num_rows($result);
        if($num_of_rows > 0)
        {
            while($row = mysql_fetch_row($result))
            { 
                array_push($coords,array($row[0],$row[1]));     
            }
            array_push($coords_array,$coords);
        }
    }

    }else if($dateFreq == "hourly")
    {       
        for($i=1;$i<=24;$i+=1)
        {
            $coords = array();
            $timeBeg = $hours[$i];
            $timeEnd = $hours[$i+1];
            $dateTimeBeg = $dateBeg.$sp.$timeBeg;
            $dateTimeEnd = $dateBeg.$sp.$timeEnd;
            $ses_sql= "SELECT lat,lon FROM `mytable` WHERE calltime >= '$dateTimeBeg' AND calltime <= '$dateTimeEnd'";  
    $result = mysql_query($ses_sql,$bd) or die('Error: ' . mysql_error());
    if($result)
    {
        $num_of_rows = mysql_num_rows($result);
        if($num_of_rows > 0)
        {
            while($row = mysql_fetch_row($result))
            { 
                array_push($coords,array($row[0],$row[1]));     
            }
            array_push($coords_array,$coords);
        }
    }

        }
    }else if($dateFreq == "daily")
    {
        for($i=1;$i<=interval;$i+=1)
        {
            $ses_sql= "SELECT lat,lon FROM `mytable` WHERE calltime >= '$dateTimeBeg' AND calltime <= '$dateTimeEnd'";  
    $result = mysql_query($ses_sql,$bd) or die('Error: ' . mysql_error());
    if($result)
    {
        $num_of_rows = mysql_num_rows($result);
        if($num_of_rows > 0)
        {
            while($row = mysql_fetch_row($result))
            { 
                array_push($coords,array($row[0],$row[1]));     
            }
            array_push($coords_array,$coords);
        }
    }
        }
    }

    $coords_json = json_encode($coords_array);
    echo $coords_json;

//echo $coords;

    mysql_close($bd);
}

?> 
```

编辑：

根据 bPratik 的请求，我还放置了 HTML 代码的替代发布错误，其中包括我从服务器获得的错误：

```
error: function(jqXHR, textStatus, errorThrown)
   {

       alert('Error in Ajax POST\ntextStatus: ' + textStatus + '\nerrorThrown: ' + errorThrown);
    } 
```

尽管如此，我只收到 AJAX Post 消息中的错误消息。奇怪的是，mysqld.exe 进程运行了一段时间——显然它实际上同时检索了查询——然后我得到了消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T23:40:45.217

前段时间解决了这个问题，稍后会发布详细信息。

# javascript - Javascript 在提交时禁用 Div 元素

> ID：11907397
> 
> 赞同：0
> 
> 时间：2012-08-10T18:38:51.280
> 
> 标签：javascript, html, jsp, dom-events

下面的代码只是隐藏了我正在播放的电影。删除元素（如果可能）或禁用它，特别是在后台播放电影。我尝试使用`document.video.disabled=true;`但它不起作用。知道如何解决这个问题吗？

```
<script type="text/javascript">
 function showHide() {
   var div = document.getElementById('wrapper');
   if (div.style.display == 'none') {
   div.style.display = '';  
  }
 else {
   div.style.display = 'none';
  }
 }

<form id="searchForm" name = "searchForm" onSubmit = "return fetchResults();">
<input id="q" name="q" type="text" alt="Search" placeholder="Type here">
<input type="hidden" name="wt" value="json" />
<input id="submit" type="button" value="Search" onClick = "fetchResults();showHide();changeStyle();" />

<div id="wrapper" style="display:''">
<div id="left">
random text 
</div>
<div id="right">
<video width="500" height="300" controls="controls" autoplay="autoplay" name="video">
  <source src="movie.mov" type="video/mp4" />
    <embed src="movie.swf" width="600" height="500" />
 </object> 
</video>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:44:21.437

尝试

```
function showHide() {
    var div = document.getElementById('wrapper');
    div.parentNode.removeChild(div);
} 
```

# php - 将 json 解码为 php 数组，然后解码为 mysql

> ID：11907403
> 
> 赞同：0
> 
> 时间：2012-08-10T18:39:18.697
> 
> 标签：php, mysql, json

我需要将此 json 转换为 php 数组，然后循环遍历这些项目并将它们放入相应的列中输出 ：

```
 [{"roomType":"Single rooms","roomTypeCode":"SB"},{"roomType":"Double rooms","roomTypeCode":"DB"},{"roomType":"Twin rooms","roomTypeCode":"TB"},{"roomType":"Triple rooms","roomTypeCode":"TR"},{"roomType":"Suites","roomTypeCode":"S"},{"roomType":"Non-smoking rooms","roomTypeCode":"NS"},{"roomType":"Quad rooms","roomTypeCode":"Q"},{"roomType":"Twin for sole use","roomTypeCode":"TS"}] 
```

如果我将需要解码的字符串全部打印出来，但 json decode 似乎无法将其转换为关联数组，就像我尝试使用它的方式一样，这就是请求

```
$ch = curl_init();
$timeout = 0;
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
$rawdatar = curl_exec($ch);
curl_close($ch);
$roomdata = json_decode($rawdatar);
print $roomdata; 
```

如果我打印 $rawdatar 我得到前面提到的 json 行，但当我打印 $roomdata 时除了数组什么都没有我做错了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:43:33.300

您的 JSON 数据是一组对象：

尝试这样做：

```
echo $roomdata[0]->roomType; 
```

如果你`print($roomdata)`，它会一直显示`Array`，因为它就是这样。有关更多信息，请阅读 json_decode：[http ://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T18:43:51.610

解码 JSON 不会神奇地将事物放入关联数组中。您那里的 JSON 结构代表一个对象数组。您需要自己将其映射到关联数组，如下所示：

```
$object_array = json_decode($rawdatar);
$result_array = array();
foreach($object_array as $obj) {
    $result_array[$obj->roomType] = $obj->roomTypeCode;
} 
```

# c# - 将事件集中到一条线上？

> ID：11907404
> 
> 赞同：2
> 
> 时间：2012-08-10T18:39:28.657
> 
> 标签：c#, events

当用户单击按钮时，将激活以下事件：

```
flightWindow.SendAirplaneLand += onAirplaneStartSend; 
flightWindow.SendAirplaneTakeOff += onAirplaneTakeOffSend;
flightWindow.SendAirplaneChangeRoute += onAirplaneChangeRouteSend; 
```

他们都调用不同的方法将信息添加到列表中：

```
public void onAirplaneStartSend(object sender, Land e)
    {
        listBoxFlightEvents.Items.Add(e.LandStatus);
    }

    public void onAirplaneTakeOffSend(object sender, TakeOff e)
    {
        listBoxFlightEvents.Items.Add(e.TakeOffStatus);
    }

    public void onAirplaneChangeRouteSend(object sender, ChangeRoute e)
    {
        listBoxFlightEvents.Items.Add(e.ChangeRouteStatus);
    } 
```

我的问题是我想将所有这些信息带到一行文本中以添加到列表中，我正在寻找一个简单的解决方案如何做到这一点？

一种方法是让方法返回一个字符串并将所有返回字符串值的字符串放在一起，然后将其添加到列表中，如下所示：

```
public string onAirplaneStartSend(object sender, Land e)
    {
        return e.LandStatus;
    } 
```

但他的可能是不可能的，也不方便？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T18:49:26.040

```
flightWindow.SendAirplaneLand += (s,e) => {
  OnAirplaneStatusChange(e.LandStatus);
};
flightWindow.SendAirplaneTakeOff += (s,e) => {
  OnAirplaneStatusChange(e.TakOffStatus);
};
flightWindow.SendAirplaneChangeRoute += (s,e) => {
  OnAirplaneStatusChange(e.ChangeRouteStatus);
};

private void OnAirplaneStatusChange(string status)
{
  listBoxFlightEvents.Items.Add(status);
} 
```

虽然我仍然不完全确定你要做什么。除非`Land`, `TakeOff`and `ChangeRoute`all 继承了一些共同的（例如）`AirplaceEventArgs`（以及表示状态的共同属性），否则您必须单独绑定它们。最好的情况是使用通用`EventArgs`方法，但您需要以某种方式强制转换以获得`LandStatus`,`TakeOffStatus`和`ChangeRouteStatus`值。

我建议：

```
public class AirplaneEventArgs : EventArgs
{
  public string Status { get; set; }
}
public class TakeOffEventArgs : AirplaneEventArgs
{
  /* other properties */
}
public class LandEventArgs : AirplaneEventArgs
{
  /* other properties */
}
public ChangeRouteEventArgs : AirplaneEventArgs
{
  /* other properties */
} 
```

然后你可以简单地绑定：

```
flightWindow.SendAirplaneLand += OnAirplaneStatusChange; 
flightWindow.SendAirplaneTakeOff += OnAirplaneStatusChange;
flightWindow.SendAirplaneChangeRoute += OnAirplaneStatusChange;

private void OnAirplaneStatusChange(object sender, AirplaneEventArgs e)
{ 
    // they all now share "Status" proeprty so no need to cast to
    // get "LandStatus" vs. "ChangeRouteStatus" vs. "TakeOffStatus"
    // values.
    listBoxFlightEvents.Items.Add(e.Status);
} 
```

# python - 脚本语言解释器如何引用它们的底层函数？

> ID：11907410
> 
> 赞同：3
> 
> 时间：2012-08-10T18:39:41.380
> 
> 标签：python, hashmap, interpreter, rhino, v8

对于脚本解释器，如 Rhino、Google V8、Python 等，是否有任何通用方法来确定底层本机方法，只给出一串脚本语言？

在某些时候，这些解释器是否使用带有字符串的哈希映射作为键？还是有很多字符串相等测试和分支？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:23:31.373

它们通常使用带有字符串键的哈希映射，但函数查找的结果通常会被缓存，以避免在几纳秒后再次进行完全相同的查找。

当然，如果发生一些疯狂的事情，例如程序分配或删除函数，则必须清除缓存。

JIT 编译器可以使用[内联缓存](https://en.wikipedia.org/wiki/Inline_caching)来使可预测的函数调用在缓存填充后运行得非常快。

编译器甚至可以直接输出直接调用底层函数的机器代码。同样，如果程序替换或删除该函数，编译的代码将变得无效；因此解释器必须有办法检测这种情况并更新或丢弃无效的 JIT 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T19:29:55.833

CPython 将命名空间广泛用于函数/方法分派，这意味着哈希类型，又名“字典”。

Pypy、Jython、IronPython 等可能对如何最好地做到这一点有自己的想法。Python！= CPython。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T19:32:58.710

对于 Python，当 Python 处理源代码时，所有定义（类及其方法、普通函数等）都会被编译。代码部分的编译结果存储为捕获代码的对象。名称存储在内部仅用于自省目的——从用户的角度来看，对象是未命名的。但是，（类、函数的）名称作为键存储在内部哈希映射（在 Python 中称为字典）中。该值是对未命名对象的引用。

Python 中的任何变量都是绑定到无类型引用（哈希映射中的键、值）的名称。每当名称出现在 Python 中时，您都在使用引用变量。它通过在提到的哈希映射（字典）中搜索自动取消引用。

用户甚至可以访问字典。这样，您可以尝试它以这种方式工作。然后，您还可以通过简单地将函数名称分配给另一个变量来轻松地为函数赋予不同的名称（例如更短的名称）——分配总是意味着分配引用值。

# c# - 将元素添加到 ListBox 后如何避免滚动？

> ID：11907414
> 
> 赞同：1
> 
> 时间：2012-08-10T18:39:51.653
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

我的收藏：

```
private ObservableCollection<Data> listData; 
```

列表框来源：

```
ListBoxData.ItemsSource = listData; 
```

**后来我在收集开始时**添加了 20 次元素： ListBoxData.Insert(0, new Data());

添加 ListBox 后，滚动到集合的第一个元素。添加后如何禁用滚动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:59:20.670

这个对你有用吗？列表框 .SelectedIndex = 0;

# ruby-on-rails - 我的 RoR 应用程序中的流氓文件

> ID：11907426
> 
> 赞同：0
> 
> 时间：2012-08-10T18:40:38.003
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我的 rails 3.2 应用程序的根目录中，出于某种原因，偶尔会创建空文件。具有文件名“整数”、“0”或“1”或“-1”。

我记得我也看到他们用分号后缀，但我不确定这一点。

我想知道什么会触发这个？任何人都经历过类似的事情，所以我可以得到一个指针在哪里以及如何看？

对我来说，这似乎有点像布尔比较被输入 IO 或类似的东西......

谢谢！

# excel - 带有 $ 符号的 Excel 宏

> ID：11907431
> 
> 赞同：0
> 
> 时间：2012-08-10T18:41:03.807
> 
> 标签：excel, excel-formula

我是 Excel 的新手。所以我无法理解以下行的含义：

```
=D$4*L27*B8 
```

这里 ，

```
L27 = .03
B8 = 5
D = 90 elbow 
```

我对 D 值感到困惑，因为它来自一个列（第一个值），而 L27 在这个列旁边。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:44:27.517

首先，这不是宏，而是公式。

该`$`标志表示该行应该是固定的。如果您将单元格拖动并复制到下一行，它将显示为：

```
=D$4*L28*B9 
```

虽然公式中的 D 单元格没有变化，但 L 和 B 单元格会发生变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T18:45:04.573

```
=D$4*L27*B8 
```

$ 的意思`absolute referencing`。因此，当您将此公式复制并粘贴到接下来的 5 个单元格中时，它将变为

```
=D$4*L27*B8
=D$4*L28*B9
=D$4*L29*B10
=D$4*L30*B11
=D$4*L31*B12 
```

如您所见，`$`已确保`4`在复制公式时行号是固定的。通常，当您在表达式中有一个常量并且您希望在各个单元格中保持相同时，会使用该常量。

# wcf - WCF 绑定传输/Windows 绑定安全未强制执行

> ID：11907433
> 
> 赞同：0
> 
> 时间：2012-08-10T18:41:09.473
> 
> 标签：wcf, wcf-security

我正在将带有 Windows 身份验证的 SSL 安全性添加到以前不安全的 IIS 托管 WCF 服务应用程序中。令我惊讶的是，我发现其中两个服务端点已经在使用 Binding with Transport 和 Windows security。这是令人困惑的，因为使用此服务的客户端应用程序未配置为使用传输安全或 Windows 凭据。这是服务配置：

```
<binding name="LargeBuffer" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647">
    <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
    maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
    <security mode="Transport">
    <transport clientCredentialType="Windows" />
    </security>
</binding>

...

<service behaviorConfiguration="WebServices.GCServiceBehavior"
    name="WebServices.GCService">
    <endpoint address="" binding="basicHttpBinding" name="GCSecuredEndpoint"
        bindingName="largeBuffer" contract="WebServices.IGCService" />
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
</service> 
```

当我使用 Visual Studio 生成客户端代理和配置时，它会创建以下内容：

```
<binding name="GCSecuredEndpoint" closeTimeout="00:01:00"
    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
    allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
    maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
    useDefaultWebProxy="true">
    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
    <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None"
            realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
    </security>
</binding>

...

<endpoint address="http://devservices.mysite.com/GCService/GCService.svc"
    binding="basicHttpBinding" bindingConfiguration="GCSecuredEndpoint"
    contract="GCSvc.IGCService" name="GCSecuredEndpoint" /> 
```

请注意，它是安全模式 =“None”，Transport ClientCredentialType 是 None 而不是 Windows。当我在 GCService 上调用方法时，它会成功。我希望它首先抱怨我试图通过 http 而不是 https 访问，但事实并非如此。接下来，我希望它不会进行身份验证或抱怨客户端端点在身份验证方面与服务不匹配，但事实并非如此。

我在刚刚使用 Transport/Windows 安全设置的同一个应用程序中有另一个服务，只是没有所有缓冲区/读取配额的东西。对于初学者，当我在 VS 中为此服务生成客户端代理/配置时，它会自动使用 https 地址、传输安全性和 Windows 身份验证。如果我手动将其更改为对两者都使用 None ，如上所述，对服务方法之一的调用不会成功，正如预期的那样。为什么上面的 GCService 工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T00:41:04.280

服务器配置有

```
bindingName="largeBuffer" 
```

代替

```
bindingConfiguration="LargeBuffer" 
```

从未使用过 LargeBuffer 绑定配置。

# android - KSOAP2 java.lang.RuntimeException：无法序列化

> ID：11907434
> 
> 赞同：3
> 
> 时间：2012-08-10T18:41:09.207
> 
> 标签：android, web-services, android-ksoap2

我正在尝试使用 .net Web 服务中的方法。

Web 服务背后的代码在命名空间的末尾有一个“/”

```
[WebService(Namespace = "http://www.mynamespace.com/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)] 
```

这是.net方法调用

```
POST /TelematicsWebService/Service.asmx HTTP/1.1
Host: localhost
Content-Type: text/xml; charset=utf-8
Content-Length: length
SOAPAction: "http://www.mynamespace.com/GetDevicesByBranch"

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <GetDevicesByBranch xmlns="http://www.mynamespace.com/">
      <branchNumber>int</branchNumber>
    </GetDevicesByBranch>
  </soap:Body>
</soap:Envelope> 
```

现在调用该方法的代码如下所示

```
 @Override
    protected SoapObject doInBackground(Integer... branchNumber) {

        final String NAMESPACE = "http://www.mynamespace.com/";
        final String METHOD_NAME = "GetDevicesByBranch";
        final String SOAP_ACTION = NAMESPACE + METHOD_NAME;
        final String URL = "http://10.0.2.2/TelematicsWebService/Service.asmx";

        SoapObject response = null;

        try {
            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

            PropertyInfo inputArgs = new PropertyInfo();
            inputArgs.setName("branchNumber");
            inputArgs.setValue(branchNumber);
            inputArgs.setType(Integer.class);
            request.addProperty(inputArgs);

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                    SoapEnvelope.VER11);
            envelope.dotNet = true;
            envelope.setOutputSoapObject(request);

            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL,
                    25000);
            androidHttpTransport.call(SOAP_ACTION, envelope);
            response = (SoapObject) envelope.getResponse();
        } catch (Exception exception) {
            response = null;
        }

        return response;
    } 
```

接近结尾的行，`androidHttpTransport.call(SOAP_ACTION, envelope);`，引发异常：`java.lang.RuntimeException: Cannot serialize: [Ljava.lang.Integer;@412e0cf0`

我找不到这个问题的解决方案，有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T21:49:03.657

我想到了...

如果使用 Override doInBackground() 方法尚不明显，则它位于 AsyncTask<>() 内部。输入参数是一个`Integer...`类型。

```
protected SoapObject doInBackground(Integer... branchNumber) 
```

我不知道省略号究竟做了什么，但我知道它使参数成为一个数组。

我将一个整数数组传递给请求对象，而不是一个特定的数组元素。

从改变

```
request.addProperty("branchNumber", branchNumber); 
```

至

```
request.addProperty("branchNumber", branchNumber[0]); 
```

解决了这个问题。

谢谢@Paul-Jan 和@beginner！我很感激你的回答！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T19:09:42.830

代替

```
PropertyInfo inputArgs = new PropertyInfo();
inputArgs.setName("branchNumber");
inputArgs.setValue(branchNumber);
inputArgs.setType(Integer.class);
request.addProperty(inputArgs); 
```

尝试这个：

```
request.addProperty("branchNumber", branchNumber); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T16:47:13.503

对于那些想要添加对象列表作为 Web 服务参数的人：

```
List<Object> vect = new Vector<Object>();
vect.add("Element1");
vect.add("Element2");
vect.add("Element3");

PropertyInfo tabProp =new PropertyInfo();
tabProp.setName("LIST_PARAM");          
tabProp.setValue(vect);

request.addProperty(tabProp ); 
```

当然不需要注意 Async Task 必须实现方法：

```
protected String doInBackground(List<Object>... params){
....
....
} 
```

# javascript - 包装库 | jQuery 与 Backbone

> ID：11907436
> 
> 赞同：3
> 
> 时间：2012-08-10T18:41:29.957
> 
> 标签：javascript, jquery, backbone.js

这是[Backbone](http://backbonejs.org/backbone.js)包装器

```
(function(){
    // Backbone.js
}).call(this); 
```

为了比较。这是[jQuery](http://code.jquery.com/jquery-latest.js)包装器：

```
(function( window, undefined ) {
    // jQuery.js
})( window ); 
```

**关于 BackBone Wrapper：**

我理解需要立即调用（通过调用）函数表达式 - 提供隐私（封装）

我理解为什么它是一个匿名函数——减少全局符号。

但是我不明白'this'指的是什么？+ 为什么包装不同？

**参考**

[MDN - 这个](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T18:49:58.093

它有助于保留`this`内部函数中的值。

对未绑定函数* 的调用将重置`this`为全局对象，即`window`在浏览器的情况下。

看[这个例子](http://jsfiddle.net/scE6R/)：

```
(function () {
    alert("1: " + this); // this == myObject

    (function () {
        alert("2: " + this); // this == window
    })();

    (function () {
        alert("3: " + this); // this == myObject
    }).call(this);
}).call(myObject); 
```

*) 即调用`func()`而不是`obj.func()`. `this`在后一种情况下会变成`obj`。

* * *

第一个澄清：

在backbone.js的情况下，他们包装代码的原因`(function () {...}).call(this)`是这样你不需要知道全局对象的实际名称（`global`在node.js的情况下）。

请参阅[http://backbonejs.org/docs/backbone.html#section-4](http://backbonejs.org/docs/backbone.html#section-4)

* * *

第二个澄清：

如果脚本由浏览器运行，则与不在绑定函数的调用上下文中的`this`对象相同。`window`在独立的 JS 引擎（节点、犀牛……）中，全局对象不是命名的`window`，而是`global`.

jQuery 开发人员知道您想在浏览器中运行他们的脚本，因为如果您一开始就没有要操作的文档，那么您将没有什么乐趣。

Backbone.js 和[underscore.js](http://underscorejs.org)一样，是通用的，因此开发人员不知道全局对象的名称。他们不在乎。

所以当 jQuery 做

```
(function (window) {
    ...
})(window); 
```

它也可以这样实现

```
(function () {
    var window = this;
    ...
}).call(window); 
```

因为`this===window`

```
(function () {
    var window = this;
    ...
}).call(this); 
```

向后阅读示例，看看骨干黑客做了什么。（他们称为全局对象`root`。您可能需要阅读带注释的代码。）

我会选择

```
(function (root) {
    ...
})(this); 
```

但最后我猜也没关系。

# jquery - jQuery Toggle 在 HTML 表格中显示/隐藏表单

> ID：11907438
> 
> 赞同：0
> 
> 时间：2012-08-10T18:41:37.647
> 
> 标签：jquery

我有这个小提琴：http: [//jsfiddle.net/2nAEZ/3/](http://jsfiddle.net/2nAEZ/3/)

这个想法很简单......当页面显示时，标签内的所有元素都被隐藏了。除了“回复”按钮。

单击“回复”按钮后，将出现带有“取消”按钮的表单。

但是，如何使“回复”按钮适用于每一行？单击回复按钮时，并非所有表单都会显示。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T18:52:28.580

试试这个**[jsFiddle 示例](http://jsfiddle.net/j08691/2nAEZ/17/)**。我清理了您的 HTML（没有重复 ID）并更改了 jQuery 以在每行的基础上运行。

**jQuery**

```
$("form, .hide").hide();
$(".show").click(function() {
    $(this).parents('tr').find("form,.hide").show();
    $(this).parents('tr').find(".show").hide();
});
$(".hide").click(function() {
    $(this).parents('tr').find("form, .hide").hide();
    $(this).parents('tr').find(".show").show();
});​ 
```

**HTML**

```
<table><tr>
    <td>12345</td>
    <td>message here<br>
        <form action="" method="post">
        <textarea></textarea>
        <input type="button" value="Send">
        </form></td>
    <td>
        <button class="hide">Cancel</button>
        <button class="show">Reply</button>
    </td>
</tr>
<tr>
    <td>67890</td>
    <td>another message here<br>
        <form action="" method="post">
        <textarea></textarea>
        <input type="button" value="Send">
        </form></td>
    <td>
        <button class="hide">Cancel</button>
        <button class="show">Reply</button>
    </td>
</tr></table> 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T18:46:30.247

不能有多个具有相同 ID 的元素！由于您的表单是由 PHP 生成的，

```
<button class="hide" data-form="<?=$form_number?>">Cancel</button>
<button class="show" data-form="<?=$form_number?>">Reply</button> 
```

然后，

```
$("form, .hide").hide();
$(".show").click(function(){
   formnum = $(this).data("form");
   $("form"+formnum+", .hide").show();
   $('.show[data-form="'+formnum+'"').hide();
});

$(".hide").click(function(){
   formnum = $(this).data("form");
   $("form"+formnum+", .hide").hide();
   $('.show[data-form="'+formnum+'"').show();
}); 
```

同一个类可以有多个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T18:53:22.863

如果你想独立控制每一个，你可能想要这样做：

js：

```
$(document).ready(function(){
    $("form, #hide").hide();

    $("#show1").click(function(){
    $("#form1, #hide1").show();
    $("#show1").hide();
    });

    $("#hide1").click(function(){
    $("#form1, #hide1").hide();
    $("#show1").show();
    });
});​ 
```

html:

```
<tr>
    <td>12345</td>
    <td>message here<br>
        <form id="form1" action=\"\" method=\"post\">
        <textarea></textarea>
        <input id="reply1" type="button" value="Send">
        </form></td>
    <td>
        <button id="hide1">Cancel</button>
        <button id="show1">Reply</button>
    </td>
</tr>
<br>
<tr>
    <td>67890</td>
    <td>another message here<br>
        <form id="form2" action=\"\" method=\"post\">
        <textarea></textarea>
        <input id="reply2" type="button" value="Send">
        </form></td>
    <td>
        <button id="hide2">Cancel</button>
        <button id="show2">Reply</button>
    </td>
</tr>​ 
```

您将需要额外的 js 来控制第二种形式。

# android - 在 Android 中使用 Selenium

> ID：11907440
> 
> 赞同：0
> 
> 时间：2012-08-10T18:41:44.633
> 
> 标签：android, selenium

我刚刚开始使用 selenium 在 java 项目中进行一些 HTML 解析，但由于某种原因，当我尝试在 Android 环境中运行它时，出现 ClassDefNotFound 错误。

我为 java/android 项目设置了相同的类路径，并拥有正确的独立 jar。即使使用提供的库，Android 是否有任何理由无法做到这一点？

我也在使用 Eclipse，在 Android API 16 上开发。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T20:46:37.817

尝试将 .jar 移动到`yourproject/libs/`. ADT 会扫描此文件夹（“libs”，而不是“lib”）中的库，如果它们是从其他地方手动添加的，有时会感到困惑。

添加后不要忘记在包浏览器中刷新文件夹。

# java - 如何使用 AspectJ 1.6 和 Tomcat 6 进行 JSP 的加载时间编织？

> ID：11907442
> 
> 赞同：1
> 
> 时间：2012-08-10T18:41:46.633
> 
> 标签：java, jsp, tomcat, aop, aspectj

这是我的情况：

我在 Eclipse 中有一个 Web 应用程序。目前它是一个 AspectJ Web 应用程序。

我的“src”文件夹中有一个名为的方面`JSPCSRFTokenInjection.aj`，它具有捕获`JspWriter.write`方法和其他一些东西的切入点。它看起来像这样：

```
package com.aspects; 
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.jsp.JspWriter;

import org.apache.log4j.Logger;

import com.thesis.aop.util.StopWatch;

public aspect JSPCSRFTokenInjection{ 
Logger logger; 
StopWatch watch;

private String currentCSRFToken = null;

//Constuctor for the Aspect. I do some init of loggers and
//such here.
public JSPCSRFTokenInjection(){ 
    //PropertyConfigurator.configure("log4j.properties"); 
    logger = Logger.getLogger("csrfMitigationLogger"); 
    logger.info("CSRF Injection Aspect Created"); 
    watch = new StopWatch(); 
} 

//Capturing the CSRF Token from the request by intercepting the 
//_jspService method inside of the JSP
public pointcut csrf_jspServiceIntercept(HttpServletRequest req, 
    HttpServletResponse resp) : 
    call(public void _jspService(HttpServletRequest, HttpServletResponse)) 
    && args(req, resp);

before(HttpServletRequest req, HttpServletResponse resp) : 
    csrf_jspServiceIntercept(req, resp){
    currentCSRFToken = (String) req.getParameter("csrfSalt");
    logger.info("Got CSRF Token from request: " + currentCSRFToken);
}

//Pointcut and advice for capturing the writing into a JSP.
public pointcut csrf_captureFormWriting(String msg, JspWriter writer) :
    call(public void JspWriter.write(String)) 
    && args(msg) 
    && target(writer)
    && if(msg.toLowerCase().contains("</form>"));

before(String msg, JspWriter writer) : csrf_captureFormWriting(msg, writer){
    try{
        logger.info("WRITING TO JSP");
        writer.write("TEST_CSRF");
        writer.write("<input type='hidden' name='csrfSalt' value='" +     currentCSRFToken + "'/>");
    }
    catch(Exception e){
        e.printStackTrace();
    }
}

} 
```

我`aop.xml`在目录中也有一个文件`WebApp/WebContent/META-INF/`。作为参考，我的`web.xml`文件在`WebApp/WebContent/WEB-INF/`目录中。

`aop.xml`看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE aspectj PUBLIC "-//AspectJ//DTD//EN" "http://www.eclipse.org/aspectj       /dtd/aspectj.dtd">
<aspectj>
<weaver options="-showWeaveInfo -verbose -debug -Xset:weaveJavaPackages=true">
    <!-- Weave types that are within the javax.* or org.aspectj.*
    packages. Also weave all types in the foo package that do
    not have the @NoWeave annotation. -->
    <include within="javax.*"/>
    <include within="com.*"/>
    <include within="org.*"/>
    <include within="org.aspectj.*"/>
</weaver>
<aspects>
    <!-- declare two existing aspects to the weaver -->
    <aspect name="com.aspects.JSPCSRFTokenInjection"/>
    <aspect name="com.aspects.MitigateCSRFAspect"/>
    <!-- Of the set of aspects declared to the weaver
    use aspects matching the type pattern "com..*" for weaving. -->
    <include within="com.*"/>
    <include within="org.*"/>
    <!-- Of the set of aspects declared to the weaver
    do not use any aspects with the @CoolAspect annotation for weaving -->
</aspects>
</aspectj> 
```

我还将`-javaagent:C:/aspectj1.6/lib/aspectjweaver.jar`Tomcat 添加到我的 JVM 参数中。

如果有帮助，我正在为 tomcat 使用 SysDeo 插件。此外，编译时编织在应用程序的其他部分工作正常，但是，我无法编织影响 JSP 的任何方面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:36:31.813

我解决了这个问题。我将我的 aop.xml 文件放在错误的目录中。对我来说非常愚蠢。

它应该进入

```
<ProjectRoot>/WebContent/WEB-INF/classes/META-INF/aop-ajc.xml 
```

目录。但是，我将它直接放在 WEB-INF 下。

# c - 结构数组中每个元素的互斥锁

> ID：11907445
> 
> 赞同：1
> 
> 时间：2012-08-10T18:41:54.950
> 
> 标签：c, linux, multithreading, structure, mutex

我想通过使用互斥锁访问数组的每个元素来使结构数组中的每个元素都成为线程安全的。

这是我的结构：

```
typedef struct {
  void      *value;
  void      *key;
  uint32_t  value_length;
  uint32_t  key_length;
  uint64_t  access_count;
  void      *next;
  pthread_mutex_t *mutex;
} lruc_item; 
```

我有一个这种结构的数组，并且想使用互斥锁以使结构元素线程安全。

我尝试在函数中的一个数组元素上使用锁，然后故意没有解锁它，只是为了确保我的锁工作正常，但奇怪的是没有死锁并且第二个函数访问相同数组元素能够访问它。

有人可以指导我如何使用互斥锁锁定结构数组中的每个元素（以使结构线程的每个元素安全）。

示例代码来解释我的观点：

```
/** FUNCTION THAT CREATES ELEMENTS OF THE STRUCTURE **/

lruc_item *create_item(lruc *cache) {
  lruc_item *item = NULL;

item = (lruc_item *) calloc(sizeof(lruc_item), 1);

item->mutex = (pthread_mutex_t *) malloc(sizeof(pthread_mutex_t));
  if(pthread_mutex_init(item->mutex, NULL)) {
    perror("LRU Cache unable to initialise mutex for page");
    return NULL;
     }

  }

 return item;
}

set()
{
item = create_item(cache);

  pthread_mutex_lock(item->mutex);
    item->value = value;
    item->key = key;
    item->value_length = value_length;
    item->key_length = key_length;
    item->access_count = ++cache->access_count;

  pthread_mutex_unlock(item->mutex);     /** (LINE P) tried commenting out this to check  proper working of mutex(deadlock expected if the same "item" is accessed in another function)  **/

}

get(lruc_item *item)
{

  pthread_mutex_lock(item->mutex);   /** deadlock doesn't occur when "LINE P" is commented out**/ 
    *value = item->value;
    item->access_count = ++cache->access_count;
  pthread_mutex_unlock(item->mutex);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:55:19.320

需要注意的是，互斥锁只锁定来自其他线程的代码。 ~~如果您尝试`WaitForMultipleObjects`在同一个线程中使用相同的互斥锁执行它不会阻塞。我假设是 Windows，因为你没有详细说明。~~

但是，如果您提供更多细节，也许我们可以查明问题的真正所在。

~~现在，再次假设 Windows，如果您想对*单个元素*进行“线程安全”的访问，您可能需要考虑`InterlockedExchange`-class 函数而不是互斥体。例如：~~

 ~~```
InterlockExchange(&s.value_length, newValue); 
```~~ 

或者

```
InterlockedExchange64(&s.access_count, new64Value); 
```

或者

```
InterlockedExchangePointer(&s.value, newPointer); 
```

~~如果您要做的是确保对结构的多个元素访问（作为事务）是线程安全的，那么互斥锁可以为您做到这一点。Mutex 在跨进程边界时很有用。如果您只处理单个进程，那么关键部分可能是一个更好的主意。~~

# c++ - 创建子进程

> ID：11907457
> 
> 赞同：0
> 
> 时间：2012-08-10T18:43:01.410
> 
> 标签：c++, windows, winapi

c++ on windows 我创建了一个 cmd.exe 的子进程，但是当我读取管道时它卡住了

```
HANDLE parent = GetStdHandle(STD_OUTPUT_HANDLE);
char buffer[BUFSIZE];
DWORD read, written;
BOOL b = true;

for(;;)
{
    b = ReadFile(g_hChildStd_OUT_Rd, buffer, BUFSIZE, &read, NULL);
    if(! b || read == 0) break;

    b = WriteFile(parent, buffer, read, &written, NULL);
    if(! b) break;
} 
```

它在我的控制台中打印 cmd.exe 的输出，但它挂在这个循环中。我只需要弄清楚为什么它不会打破循环

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T21:52:39.747

当管道的写入端关闭时，您编写的代码应该退出，这发生在它的最后一个句柄关闭时。如果子进程退出，它对管道写入端的句柄将自动关闭。

*您没有显示足够多的代码让我确定，但最可能的原因是您*没有关闭管道写入端的句柄。如果在启动子进程后关闭句柄，您的代码应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T18:54:22.950

您的循环是无限的，因为 b 始终为真，因为 ReadFile 和 WriteFile 在您的情况下始终是成功的，并且 read 永远不会为 0。

# powershell - 通过 Powershell 将信息输出到电子表格

> ID：11907460
> 
> 赞同：0
> 
> 时间：2012-08-10T18:43:20.073
> 
> 标签：powershell, active-directory, spreadsheet, code-cleanup

我有一个清理脚本，打算通过使用活动目录来清理数百个虚拟服务器。在过去，我会创建一个简单的 .txt 文件，它会显示以下内容：

- 运行脚本之前存在的磁盘空间量

- 运行后有多少空间

- 清除的总空间

在过去，这很好用，但它的目的是一次在单个服务器上使用，而不是数百个。由于我想更改为一次在数百个脚本上运行此脚本，因此我想将其更改为一个电子表格，该电子表格将显示相同的数据并显示运行该脚本的每个服务器的名称。

我怎样才能设法以电子表格格式创建这种类型的输出并显示它？这是我当前的代码（.txt 方法）：

```
$logFilePath = "C:\logfile.txt"
$disks = Get-WMIObject -Computer $server -Class Win32_LogicalDisk -Filter "DeviceID like '%C%'"
$beforeFreeSpace = $disks.FreeSpace
$beforeFreeSpaceMB = [math]::truncate($beforeFreeSpace / 1MB)

$preCleanupMessage = "Space available before cleanup ran (MB): "
$preCleanupMessage += $beforeFreeSpaceMB
$preCleanupMessage | out-file -filePath $logFilePath -Append

$afterFreeSpace = $disks.FreeSpace
$afterFreeSpaceMB = [math]::truncate($afterFreeSpace / 1MB)

$freedSpace = "Freed up space after cleanup (MB): "
$freedSpace += $afterFreeSpaceMB - $beforeFreeSpaceMB

$freedSpace | out-file -filePath $logFilePath -Append
$message = "Free space remaining after cleanup (in MB): "
$message += [math]::truncate($afterFreeSpace / 1MB)
$message | out-file -filePath $logFilePath -Append 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:54:37.453

我会做这样的事情：

```
$Servers = "server1","server2"
$logFileCollection = @()

$servers | % {
    Write-Host Working on $_
    $server = $_
    $disk = Get-WMIObject -Computer $server -Class Win32_LogicalDisk -Filter "DeviceID like '%C%'"
    $beforeFreeSpaceMB = [math]::truncate($disk.FreeSpace / 1MB)
    #DO SOME WORK HERE TO FREE UP SPACE
    $logFileCollection += New-Object -Type PSObject -Property @{
        beforeFreeSpaceMB = $beforeFreeSpaceMB
        afterFreeSpaceMB = [math]::truncate($disks.FreeSpace / 1MB)
        freedSpace = [math]::truncate($disks.FreeSpace / 1MB) - $beforeFreeSpaceMB
    }
}

$logFileCollection | Export-CSV -NoTypeInformation "C:\logCSV.csv" 
```

另外，请记住，默认的 gwmi cmdlet 可能会超时，您可能需要解决这个问题。祝你好运。此外，手动运行它，如果您必须在任何时候中止脚本，只需运行最后一行以获取该点的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T13:04:15.037

我写了类似这样的东西，可以运行 1700 个虚拟机。我查看了所有选项，并立即排除了其中两个：

*   PowerCLI（VMware PowerShell 模块），因为我希望我的脚本能够跨 Hyper-Visors 工作。
*   WMI (Get-WMIObject) 太不可靠了。它真的很受欢迎。

所以我决定使用调用命令：

```
$VMList = "server1","server2"
$MachineInfo = @()

foreach($VM in $VMList)
{
   $MachineInfo += Invoke-Command $VM{
   $obj = New-Object PSObject
   $Drive = Get-PSDrive | Where {$_.Name -eq "C"}
   $beforeFreeSpace = $Drive.Free
   $beforeFreeSpaceMB = [Math]::Round(($Drive.Free /1024) /1024)
   $obj | Add-Member -Name "BeforeFreeSpace" -MemberType NoteProperty -Value $beforeFreeSpaceMB

   ## Clean Up Over Here

   $Drive = Get-PSDrive | Where {$_.Name -eq "C"}
   $afterFreeSpace = $Drive.Free
   $afterFreeSpaceMB = [Math]::Round(($Drive.Free /1024) /1024)
   $obj | Add-Member -Name "AfterFreeSpace" -MemberType NoteProperty -Value $afterFreeSpaceMB

   $freedSpace = $obj.AfterFreeSpace - $obj.BeforeFreeSpace
   $obj | Add-Member -Name "FreedSpace" -MemberType NoteProperty -Value $freedSpace

   return $obj}
}

$MachineInfo | Export-CSV -NoTypeInformation "C:\log.csv" 
```

现在已经工作了大约 2 个月，我还修改了我发布的版本，只检查你的 C:\ 驱动器，如果你想检查所有驱动器，只需发表评论并修改它。

# linux - *nix 上的 TEE TFS CLI：查找新文件并将其添加到 TFS 工作区

> ID：11907462
> 
> 赞同：0
> 
> 时间：2012-08-10T18:43:31.750
> 
> 标签：linux, macos, tfs, command-line-interface

我（有点尴尬）使用 TFS 对 OS X 上的 iOS 项目进行源代码控制，发现自己经常忘记在签入前向工作区添加新文件（例如新图形资产）。我使用 Eclipse 插件来管理签出一般，但对于尚未添加到源代码管理的文件（我已经找到），它没有任何 UI。

如何在不手动搜索文件夹层次结构的情况下查找和添加新文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:43:31.750

`tf`使用该实用程序（TEE 的 CLI 部分）找出这个单行代码：

```
find . -perm +0222 -and -type f -and -not -iname .DS_Store -print0 | xargs -0t -L 1 tf add 
```

已添加和检出（或以其他方式解锁）的文件将引发无害异常，但新文件将添加到相关工作区。在磁盘上本地工作区的根目录下运行。

（注意：正如所写，这需要缓存凭据。要么自己添加它们，要么通过添加来缓存它们：

```
export TF_AUTO_SAVE_CREDENTIALS=yes 
```

...到你的 *sh`~/.profile`文件。然后，做一些变异操作[比如结账]，提供你的信用。TFS 会在本地缓存它们。）

* * *

**附加功能：**

如果您想专门忽略 iOS 项目的用户数据（`xcuserdata`文件中的任何内容；解锁它/一直检查它是一个巨大的痛苦），您可以使用：

```
find . -name xcuserdata -prune -o -perm +0222 -and -type f -and -not -iname .DS_Store -print0 | xargs -0t -L 1 tf add 
```

如果命名为 ，该`-prune`操作将忽略任何目录（以及 IIRC、文件，技术上）及其内容`xcuserdata`。

此外，您可以替换`add`为`checkout`对未使用 TFS 正确签出的未锁定文件执行相同的扫描。同样的交易：添加的文件和已签出的文件会引发无关紧要的异常，而偷偷摸摸的解锁文件会被签出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T20:32:10.513

在 2012 之前的 TFS 版本中，您可以简单地使用`online`TEE 命令行客户端的命令，它将扫描您的本地文件系统以查找更改并挂起它们。例如：

```
tf online -adds 
```

检测已添加到本地文件系统但尚未作为添加到 TFS 的文件。

# python - wxpython中DirDialog的网络驱动器目录列表

> ID：11907468
> 
> 赞同：0
> 
> 时间：2012-08-10T18:43:45.010
> 
> 标签：python, wxpython, network-drive

我在 wxpython 中使用 DirDialog。它适用于本地驱动器。但是，它无法列出网络驱动器中的文件夹。有什么办法吗？

我想从网络驱动器中选择一个文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:29:53.500

它适用于我在 Windows 7 上的 wxPython 演示 wxPython 2.8.12.1 中。您使用的是哪个版本的 wxPython？哪个操作系统？您还可以尝试其他两个目录控件：GenericDirCtrl 和 MultiDirDialog。

我建议创建一个我们也可以玩的小演示应用程序。

# actionscript-3 - AS3 SWF 未加载

> ID：11907476
> 
> 赞同：0
> 
> 时间：2012-08-10T18:44:09.910
> 
> 标签：actionscript-3, actionscript, flash, loader

我已经生成了一个类来加载和卸载 SWF，但是，它似乎没有在视觉上加载到 swf，但它也没有返回任何错误。

**父代码：**

```
 //specify the path for the child SWF
  var PageURL:URLRequest = new URLRequest("home/home_index.swf");

//include the SWF loading class 
import MM_swfloader;
var mainPage:MM_swfloader = new MM_swfloader();
//evoke the load
mainPage.LoadSWF(PageURL); 
```

**MM_swfloader 类：**

```
package  {

import flash.display.Loader;
import flash.display.Sprite;
import flash.events.Event;  
import flash.net.URLRequest;
/**
 * author: Me
 * email: lala@lala.com
 **/

public class MM_swfloader extends Sprite {

    public var loader:Loader = new Loader();
    public function MM_swfloader():void
     {
        // constructor code
     }

    public function LoadSWF(val:URLRequest):void{
        var loader:Loader = new Loader();
        loader.load(val);
        addChild(loader);
trace("loaded"); //returns true
    }

    public function UnLoadSWF():void {
        loader.unload();
    }

  }

} 
```

我不明白加载的 SWF 被加载到哪里。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T00:04:12.267

您需要将`instance`SWF 加载添加`class`到父级中的阶段`class`：

```
//specify the path for the child SWF
var PageURL:URLRequest = new URLRequest("home/home_index.swf");

//include the SWF loading class 
import MM_swfloader;
var mainPage:MM_swfloader = new MM_swfloader();
// add the instance to the stage
this.addChild(mainPage);
//evoke the load
mainPage.LoadSWF(PageURL); 
```

您的加载程序中的代码也存在一些问题`class`，我已在下面修复（请参阅注释以获取解释）：

```
// Poor practice to use the default namespace, stick it in com.lala 
package  {

import flash.display.Loader;
import flash.display.Sprite;
import flash.events.Event;  
import flash.net.URLRequest;
/**
 * author: Me
 * email: lala@lala.com
 **/

public class MM_swfloader extends Sprite {

    public var loader:Loader = new Loader();

    public function MM_swfloader():void
    {
        // constructor code

        // listen for loader complete on the loader instance
        loader.contentLoaderInfo.addEventListener(Event.COMPLETE, loaderCompleteHandler);

        // add loader to stage
        this.addChild(loader);
    }

    // Note that by convention loadSWF would be a better name for this method
    public function LoadSWF(val:URLRequest):void {
        // commented out to avoid creating a new locally-scoped
        // loader each time the method is called
        //var loader:Loader = new Loader(); 

        loader.load(val);

        // commented out to avoid adding child each time
        // method is called, added in constructor instead
        //addChild(loader);

        // loading is asynchronous, this needs to be in a handler
        // for the loader.complete event
        //trace("loaded"); //returns true
    }

    // call this unloadSWF
    public function UnLoadSWF():void {
        loader.unload();
    }

    // handler for loader.complete event
    private function loaderCompleteHandler(event:Event):void {
        trace("loaded");
    }   
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T19:43:31.647

您需要在完成时将加载程序内容添加到阶段，如下所示：

```
import flash.net.URLRequest;
import flash.display.Loader;
import flash.events.Event;
import flash.events.ProgressEvent;

function startLoad()
{
var mLoader:Loader = new Loader();
var mRequest:URLRequest = new URLRequest("someswf.swf");
mLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onCompleteHandler);
mLoader.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, onProgressHandler);
mLoader.load(mRequest);
}

function onCompleteHandler(loadEvent:Event)
{
        addChild(loadEvent.currentTarget.content);
}
function onProgressHandler(mProgress:ProgressEvent)
{
var percent:Number = mProgress.bytesLoaded/mProgress.bytesTotal;
trace(percent);
}
startLoad(); 
```

# python - tweepy“未定义变量”错误

> ID：11907478
> 
> 赞同：0
> 
> 时间：2012-08-10T18:44:16.197
> 
> 标签：python, aptana, tweepy

我对 python 和 Aptana 都是新手。

我正在尝试在 python 中使用 tweepy 包。我有以下代码（来自[python的站点](http://packages.python.org/tweepy/html/getting_started.html)）：

```
import tweepy

user = tweepy.api.get_user('twitter') # "undefined variable" error occurs on this line
print user.screen_name
print user.followers_count
for friend in user.friends():
    print friend.screen_name 
```

我得到一个“来自导入的未定义变量：get_user”。该代码实际上运行良好，没有错误并产生预期的结果。我用谷歌搜索并[找到](http://mitchfournier.com/2010/06/18/aptana-studio-and-undefined-variable-from-import-doesnotexist/)了解决未定义变量错误的方法，但这似乎是一个hack-a-round。总之，该链接表示将“get_user”添加到首选项中的全局变量。

作为 Python 和 Aptana 的新手，我只是想看看这是否是解决它的*最佳*方法……它看起来像是一个 hack。当我将“tweepy.api.get_user”更改为“tweepy.api.public_timeline”时，我得到了同样的错误，因此必须手动将“public_timeline”添加到全局变量中......您必须手动配置每个变量。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:37:47.787

如果您不想收到有关此警告，您可以排除警告：

转到窗口 -> 首选项 -> PyDev -> 编辑器 -> 代码分析

单击未定义选项卡并将 get_user 添加到文本框中。这将清除您的警告。

安德鲁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-30T12:57:24.320

我遇到了与您的情况类似的问题（也将 PyDev 与 Aptana 一起使用）。

我使用以下说明升级了 Aptana 和 PyDev：

[在 Aptana 上更新 PyDev](https://stackoverflow.com/a/25971061/4150548)

升级后 PyDev 对我来说工作得很好:)

# ios - IOS：在.h 中声明属性时，self.var 和just var 有什么区别？

> ID：11907482
> 
> 赞同：-1
> 
> 时间：2012-08-10T18:44:41.110
> 
> 标签：ios, properties, self

> **可能重复：**
> [Objective-C - 何时使用“self”](https://stackoverflow.com/questions/2385980/objective-c-when-to-use-self)

我需要一个变量从一个视图传递到另一个视图，所以我在 .h 中创建了一个名为 StringC 的属性，并使用 self.StringC 访问它（该部分有效）。

我还需要一些可以在整个视图中访问的数组，但我使用它们的方式不同。

例如我有 lvLabelArray 我正在使用

```
self.lvLabelArray=[[NSMutableArray alloc]init]; 
```

然后我正在使用

```
[lvLabelArray addObject:LabelText]; 
```

那和那有区别吗

```
[self.lvLabelArray addObject:LabelText]; 
```

?

抱歉，我不知道这些变量的术语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:49:49.690

那里有一个重要的区别。

self.attribute 根据需要通过对象的 getter 或 setter 函数。这允许您设置初始值、触发更新消息或其他任何内容。

直接访问“属性”会直接访问底层变量，因此您可以绕过所有这些。因此，这绝对是不太受欢迎的工作方式。

避免这种混淆和简单错误的一种常见方法是重命名基础变量。不只是“@synthesize 属性”，而是使用“@synthesize 属性 = _attribute”。这将像以前一样创建 getter 和 setter 方法，但它们将底层变量命名为“_attribute”。这意味着尝试使用没有“self”的“attribute”会触发编译器错误。

# ios - 已解析的 xml 文件，但数组显示为空

> ID：11907484
> 
> 赞同：0
> 
> 时间：2012-08-10T18:44:45.430
> 
> 标签：ios, nsxmlparser

我已经解析了xml文件。
控制台正确显示解析的元素，但数组显示为空。

```
- (ParserClass *) initXMLParser 
{
    //[super init];

    appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    return self;
}

- (void)parser: (NSXMLParser *)parser   didStartElement:(NSString *) elementName 
  namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName 
    attributes:(NSDictionary *)attributeDict {

    if([elementName isEqualToString:@"note"]) {
        //Initialize the array.
        appDelegate.testArray = [[NSMutableArray alloc] init];
    }
    else if([elementName isEqualToString:@"to"]) {

        aTest = [[Test alloc] init];
    }

    NSLog(@"Processing Element: %@", elementName);
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string { 

    if(!currentElementValue) 
        currentElementValue = [[NSMutableString alloc] initWithString:string];
    else
        [currentElementValue appendString:string];

    NSLog(@"Processing Value: %@", currentElementValue);

}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName 
  namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

    if([elementName isEqualToString:@"Books"])
        return;

    if([elementName isEqualToString:@"note"]) {
        [appDelegate.testArray addObject:aTest];

        //[aBook release];
        aTest = nil;
    }
    else 
        [aTest setValue:currentElementValue forKey:elementName];

    //[currentElementValue release];
    currentElementValue = nil;
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:37:29.817

尝试将您的初始化更改为：

```
- (ParserClass *) initXMLParser {
    self=[super init];
    if(self !=nil){
    appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    // init array of user objects here
    appDelegate.testArray = [[NSMutableArray alloc] init];
    }
    return self;
} 
```

而且，如果您的 xml 是：

```
<books>
  <note>
    <something>cccc</something>
  </note>
  <note>
     <something>cccc</something>
  </note>
</books> 
```

所以你需要改变：

```
 -(void)parser: (NSXMLParser *)parser   didStartElement:(NSString *) elementName 
      namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName 
        attributes:(NSDictionary *)attributeDict {
        if([elementName isEqualToString:@"note"]) {
            aTest = [[Test alloc] init];
    //if you have attributes, you can extract them here: 
     // user.att = [[attributeDict objectForKey:@"<att name>"] ...];
        }
   NSLog(@"Processing Element: %@", elementName);
} 
```

要获得您的数组，您必须执行以下操作：

```
//Data store your xml
    NSXMLParser *nsXmlParser = [[NSXMLParser alloc] initWithData:Data];
        ParserClass *parser = [[ParserClass alloc] initXMLParser];
//delegate your parser
        [nsXmlParser setDelegate:parser];
//it's doing parsing
        BOOL success = [nsXmlParser parse];
        if (success)
        {
            NSMutableArray *someArray = [parser appDelegate.testArray ];
            NSLog(@"%@",someArray );
} else
    {
        NSLog(@"Error parsing document!");
    } 
```

试试看，它对我有用...

# android - AS3 将本地文件夹 mp3 内容放入数组 - 随机化

> ID：11907487
> 
> 赞同：0
> 
> 时间：2012-08-10T18:44:49.467
> 
> 标签：android, actionscript-3, air, mp3, file-get-contents

## 50 随机报价

希望为 android 应用程序创建一个 AS3 air，该应用程序循环遍历文件夹并从文件夹中的所有 mp3 中随机选择并播放其中一个。播放完成后，它将转到下一个文件夹并执行相同操作，直到播放完 50 个随机报价。

## 例如：

1.  该代码将从 A1 开始并打开文件夹 01 并随机播放 10 个 mp3 之一。
2.  当音频结束时，它将打开文件夹 02 并随机播放 7 个 mp3 之一。
3.  在遍历 A1 中的所有文件夹后，它会在 A2 - A5 中做同样的事情......

**我真正需要帮助的是...**

```
Using AS3 how do I select the contents of local folder  or sub 
folder and put them into an array and randomly choose one
from that array? 
```

如果我知道该怎么做，那么我可以将它用于音频文件，然后应用相同的结构来调用 50 个随机图像。

注意 循环必须按此顺序进行，原因我不会在此解释。

我包括了一个图像，所以你可以想象我想要做什么。

* * *

* * *

![在此处输入图像描述](../Images/ac5fba6361f6778a1b4021d6def72fb2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T17:53:33.263

此代码获取文件夹的内容。

```
import flash.filesystem.File;

var desktop:File = File.applicationDirectory.resolvePath("TheFilePathYouChoose/Choice");
var files:Array = desktop.getDirectoryListing();
for (var i:uint = 0; i < files.length; i++)
{
 trace(files[i].nativePath); // gets the path of the files
 trace(files[i].name);// gets the name

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T19:00:26.517

AS3 中的每个`Folder`对象都有一个[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/com/adobe/icc/vo/Folder.html#documents)属性，类型`ArrayCollection`为 ，您可以从中访问一个类，`.length`然后从索引 0 到 .中随机选择一个文件`.length - 1`。然后将文件的路径推送到您的播放列表数组中。每个`File`对象都有一个`.nativePath`属性，您应该将其用于路径。然后只需指示您的播放器以您想要的任何顺序播放路径。

您*正在*使用 AIR，对吗？这在普通 Flash 中不起作用。

# javascript - 如何将路径更改广播到 AngularJS 应用程序中的所有视图？

> ID：11907489
> 
> 赞同：6
> 
> 时间：2012-08-10T18:44:57.473
> 
> 标签：javascript, angularjs

我有一个 AngularJS 单页应用程序，显示 3 个视图（实际上是 3 个[指令](http://docs.angularjs.org/guide/directive)）。为了说明我的问题，假设我的 UI 与 GMail 的 UI 相同，并且我的 3 个视图是：

*   **导航窗格**（左）——GMail 在其中显示“收件箱”、“草稿”等文件夹...
*   **工具栏**（右上角）——GMail 显示按钮的地方
*   **内容窗格**（右下）——GMail 显示消息的地方

每当路径发生变化时，这 3 个视图都需要自行更新。例如：

*   导航窗格需要突出显示特定项目。
*   工具栏需要显示/隐藏某些按钮。
*   内容窗格需要从服务器加载和显示特定数据。

在 AngularJS 中执行此操作的最佳方法是什么？

到目前为止，我有：

1.  排除了使用[$routeProvider.when()](http://docs.angularjs.org/api/ng.$routeProvider#when)因为我需要更新三个视图，并且`$routeProvider`只支持一个`ngView`。
2.  创建了一个监视当前路径的**服务**，并使用[$rootScope.$broadcast()](http://docs.angularjs.org/api/ng.$rootScope.Scope#$broadcast)警告控制器路径已更改。
3.  （或者，代替#2）创建了一个与#2 相同的**控制器。**
4.  [使用$scope.$on()](http://docs.angularjs.org/api/ng.$rootScope.Scope#$on)捕获由 #2 或 #3 广播的事件（我在视图控制器中执行此操作）。

这种作品，但我有几个问题：

*   “路径更改”事件通常在我的事件侦听器到位之前广播，尤其是在初始页面加载时。这可能是因为我的视图模板是从服务器加载的，并且在模板完成加载之前无法设置侦听器。
*   难道没有更有效/自动化的方式来观察 AngularJS 中的路径变化吗？（见下面我的代码，它看起来很“手动”。）
*   监视路径更改的代码属于 SERVICE 还是 CONTROLLER？（我倾向于服务，因为控制器更多的是向视图添加行为。）
*   如何保证我的观点会捕捉到“路径改变”事件？我应该使用一个事件吗？（也许我可以将路径存储在服务中，并让我的视图改为观看服务？）

我观察路径变化的代码（我把它放在服务或控制器中）：

```
var watchExpression = function() { return $location.path(); };
var listener = function(newPath, oldPath) {
    // Broadcast event on $rootScope
    $rootScope.$broadcast('PathChanged', newPath);
};
$rootScope.$watch(watchExpression, listener); 
```

然后，在视图控制器中，我捕捉到事件：

```
$scope.$on('PathChanged', function(event, path) {
    // Update view based on new path.
}); 
```

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T00:42:45.340

您的最终版本似乎与 locationChangeSuccess 很好，但对于其他阅读本文的人，我认为您太快排除了 $routeProvider。您可以为随路径更改的主内容窗格设置一个 ng-view，然后为导航窗格和工具栏设置其他独立（“静态”）控制器/模板。

现在来听听其他 2 个控制器中的路由变化：

```
$rootScope.$on('$routeChangeSuccess', function(evt, cur, prev) {
    ...do what you have to do here, maybe set a $rootScope.path as you did
}) 
```

全部使用原生 Angular 功能。我实际上是在[http://provok.in](http://provok.in)中执行此操作的，这是我使用 Angular 构建的一个网站，并且我有类似的布局（嗯，不完全是，但我有“静态”部分和主要内容的 ng-view，动态由 routeProvider 根据路径更新）。

# jquery - 通过单击链接将数据发送到模式窗口

> ID：11907494
> 
> 赞同：0
> 
> 时间：2012-08-10T18:45:30.017
> 
> 标签：jquery, asp.net-mvc-3

我目前有以下代码，它可以对工作正常的控制器进行 ajax 调用。

```
@Ajax.ActionLink("Add to Wishlist", "Add", "Wishlist", new { productId = Product.ProductId }, new AjaxOptions { UpdateTargetId = "breadcrumbs", InsertionMode = InsertionMode.Replace, HttpMethod = "Post" }, new { @class = "button" }) 
```

现在我需要更改此代码并允许用户添加一些额外的数据以及产品 ID。

现在的要求是在单击“添加到愿望清单”链接时打开一个模式弹出窗口，并在模式窗口中显示一个下拉列表和一个文本框，一旦用户填写它们并单击模式弹出窗口中的提交按钮，然后将数据发送到控制器.

现在，我的页面有多个这样的链接，并且所有链接都有不同的 productId。

我的第一个问题如何将产品 ID 发送到模式弹出窗口。

谢谢阿纳布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T20:21:01.340

使用`Html.ActionLink`辅助方法切换到普通链接

```
@Html.ActionLink("Add to Wishlist", "Add", "Wishlist",
                           new { @id=product.ProductId},new { class="modelLink"}) 
```

现在做一些javascript来监听这个链接的点击事件，然后打开对话框并发送你想要的任何参数。下面的代码正在打开一个模型弹出窗口（[jQuery UI 对话框](http://jqueryui.com/demos/dialog/)（也就是说，您需要包含 jQuery UI 库才能使此代码工作）），它正在向控制器的`Add`操作方法发送 2 个参数。`WishList`无论您从 Add action 方法返回什么，都将显示在 Model 对话框中。

```
$(function(){    
  $('a.modelLink').click(function(){

     var item=$(this);

     var url=item.attr("href")+"&anotherParam=unicorn";

        var dialog = $("#dialog");
        if ($("#dialog").length == 0) {
            dialog = $('<div id="dialog" style="display:hidden"></div>').appendTo('body');
        }
        dialog.load(
            url,
            {}, // omit this param object to issue a GET request instead a POST request, otherwise you may provide post parameters within the object
            function (responseText, textStatus, XMLHttpRequest) {
                dialog.dialog({                       
                    close: function (event, ui) {                            
                        dialog.remove();
                    },
                    modal: true,
                    width: 460
                });
            }
        );
    }); 

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T19:08:28.653

在您的主视图中（您从中启动模态的）：

```
TempData["ProdId"] = <your product id> 
```

在您的模态（或弹出）对话框中：

```
var ProdId = (int)TempData["ProdId"] 
```

希望这可以帮助。

# android - setImageResource() 上的 OutOfMemory 异常

> ID：11907496
> 
> 赞同：0
> 
> 时间：2012-08-10T18:45:30.773
> 
> 标签：android, android-layout

`ImageViews`我有一个在 Activity中显示 4 的应用程序。我将所有可能的图像存储在 res/drawable 文件夹中。这些图像都是 .png，大小可以从 5KB 到 22KB 不等，并且都是 300x300 像素。图像被设置为这样的方法：

```
private void displayChoices() {
    iv1.setImageResource(mArrayList.get(0)
            .getResourceId(this));
    iv2.setImageResource(mArrayList.get(1)
            .getResourceId(this)); // <--Usually fails on second image.
    iv3.setImageResource(mArrayList.get(2)
            .getResourceId(this));
    iv4.setImageResource(mArrayList.get(3)
            .getResourceId(this));
} 
```

该`displayChoices()`方法在整个会话中被多次调用。到目前为止，我已经通读了[Displaying Bitmaps Efficiently](http://developer.android.com/training/displaying-bitmaps/index.html "有效地显示位图")，但是尝试缩小图像的分辨率会使它们变得粗糙。

mArrayList 是一个对象的 ArrayList。在对象类中，我有一个名为 getResourceId 的方法。

```
 public int getResourceId(Context ctx) {
    int mResId;
    String packageName = ctx.getPackageName();
    String mDrawableName = filename.substring(0, filename.lastIndexOf('.')); //filename is stored in the database and is set when I create the object. it is just a reference to the an .png file in the resource folder.

    mResId =  ctx.getResources().getIdentifier(mDrawableName , "drawable", packageName);

    return mResId;
} 
```

图像以 2x2 网格显示，均匀分布在屏幕上。

```
 <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:baselineAligned="false"
    android:orientation="horizontal" > 
    <FrameLayout
        android:id="@+id/choice_1_frame"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:padding="5dip" >

        <ImageView
            android:id="@+id/choice_1_image"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="center"
            android:adjustViewBounds="true"
            android:src="@drawable/test_image300x300" />
    </FrameLayout>
    //repeat frame layout
 </LinearLayout>
 //Repeat LinearLayout 
```

每次调用该方法时，我都尝试清除对旧图像的引用，但它在第一次调用时失败，所以我现在迷路了。关于如何阻止 OutOfMemory 异常发生的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T20:01:15.210

我为解决这个问题所做的就是只记住图像的资源 ID。我写了一个带有多组卡片和大量图像的记忆游戏。仅在绘画时使用资源 ID。为此，我建议使用表面视图并使用 onDraw() 来显示图像。

onDraw() 中的示例：

mBoard[x][y] 包含一个资源 id 并且是游戏板​​。

```
bmp = BitmapFactory.decodeResource(mRes, mBoard[x][y]);

canvas.drawBitmap(bmp,null,rf,mPaint); 
```

即使您使用数百张图像，这也将解决内存问题。

希望这有助于贾斯珀

# c++ - C++ 转义短语子字符串

> ID：11907497
> 
> 赞同：1
> 
> 时间：2012-08-10T18:45:34.000
> 
> 标签：c++, string, parsing, stl, web

我正在尝试解析来自服务器的网络数据，并且正在尝试找到我所拥有的更多 stl 版本。

我的旧代码包含一个 for() 循环，并根据一组转义字符检查字符串的每个字符，并使用字符串流来收集其余字符。我相信你可以想象，这种循环会导致读取 Web 数据时出现故障，因为我需要严格的语法检查。

我正在尝试改用 string::find 和 string::substr 函数，但我不确定最好的实现方式。

基本上，我想从服务器读取一串数据，不同的数据，用逗号分隔。（即，名字，姓氏，email@email.com）并以逗号分隔，但读取其间的数据。

任何人都可以提供任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T01:18:22.050

我不确定你在解析什么样的数据，但使用多层架构总是一个好主意。每一层都应该实现一个抽象函数，每一层应该只做一项工作（比如转义字符）。

您使用的层数取决于解码流所需的实际步骤

对于您的问题，我建议以下层：

第一个：用'，'和'\ n'标记：转换为某种字符串向量

第二：解决转义：解码转义字符

您应该使用 std::stringstream，并使用循环处理字符。除非你的格式真的很简单（比如只有一个分隔符，没有转义），否则你不能真正使用任何标准函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T07:04:45.040

对于学习体验，这是我最终用来将数据解析为地图的代码。您可以使用 web_parse_resurn.err 来查看是否遇到了错误，或者将其用于特定的错误代码。

```
struct web_parse_return {
map<int,string> parsedata;
int err;
};

web_parse_return* parsewebstring(char* escapechar, char* input, int tokenminimum) {                 
int err = 0;
map<int,string> datamap;
if(input == "MISSING_INFO") { //a server-side string for data left out in the call
    err++;
}
else {
    char* nTOKEN;   
    char* TOKEN = strtok_s(input, escapechar,&nTOKEN);
    if(TOKEN != 0) { //if the escape character is found
        int tokencount = 0; 
        while(TOKEN != 0) {//since it finds the next occurrence, keep going
            datamap.insert(pair<int,string>(tokencount,TOKEN));
            TOKEN = strtok_s(NULL, escapechar,&nTOKEN);
            tokencount++;
        }
        if(tokencount < tokenminimum) //check that the right number was hit
            err++; //other wise, up the error count
    }
    else {
        err++;  
    }   
}

web_parse_return* p = new web_parse_return; //initializing a new struct
p->err = err;
p->parsedata = datamap;
return p;
} 
```

# nhibernate - NHibernate 限制子集合的计数

> ID：11907502
> 
> 赞同：1
> 
> 时间：2012-08-10T18:45:51.087
> 
> 标签：nhibernate, collections, count

举个例子：一个拥有宠物集合的人。我只想列出至少有 5 只宠物的人。

我试过了：

```
 var result = (from a in UnitOfWork.CurrentSession.QueryOver<Person>()
                          where a.Pets.Count >4
                          select a
                ).List() 
```

但它说它不识别属性 Count（这是有道理的，因为它不是数据库字段）。我也尝试过 Count() ，但它仍然无法正常工作，说它不理解该功能（引发异常）。

我尝试了各种子查询和标准方法，但我知道的不够多，无法将它们放在一起。而且我不知道我是否应该使用 LINQ 或 HQL 或 QueryOver 或 Criteria ...在 SQL 中会容易得多，但我不想“作弊”

我一直在疯狂搜索谷歌，我发现的所有内容要么无法编译，要么出现运行时错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T01:01:31.687

您正在使用`QueryOver`而不是 LINQ（`Query<T>()`扩展方法）

# scheme - Alt/Option 键在 Mac 上作为 Racket GUI 的元

> ID：11907504
> 
> 赞同：1
> 
> 时间：2012-08-10T18:45:59.347
> 
> 标签：scheme, racket

我看到了这个帖子： http: [//lists.racket-lang.org/users/archive/2010-August/041085.html](http://lists.racket-lang.org/users/archive/2010-August/041085.html)

我只是想知道问题是否已经解决了。。

# ajax - FullCalendar：事件未显示 onload 但显示我是否打开 IE 开发人员

> ID：11907505
> 
> 赞同：1
> 
> 时间：2012-08-10T18:46:24.037
> 
> 标签：ajax, asp.net-mvc-3, jquery, fullcalendar

我在我的 MVC3 项目中使用 FullCalendar jquery 插件。

由于某种原因，首次加载日历时未呈现事件。奇怪的是，如果我打开 IE 开发人员或更改议程视图，它们确实会出现。

有什么建议么？
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T18:54:32.543

看起来您的日历 div 位于选项卡等隐藏元素中。您将需要在显示此隐藏元素时呈现 fullCalendar 以在日历中正确加载您的事件。

对于 jQuery 选项卡，您可以执行以下操作：

```
$('#tabs').tabs({
    show: function(event, ui) {
        $('#calendar').fullCalendar('render');
    }
}); 
```

让我知道这是否有帮助！

# c++ - 如何通过基类指针调用派生类的虚函数

> ID：11907507
> 
> 赞同：5
> 
> 时间：2012-08-10T18:46:26.770
> 
> 标签：c++, inheritance, pointers, virtual, base

让我们看看这段代码：

```
class CBase
{
 public:
    virtual vfunc() { cout << "CBase::vfunc()" << endl; }
};

class CChild: public CBase
{
 public:
    vfunc() { cout << "CChild::vfunc()" << endl; }
};

int main() 
{
 CBase *pBase = new CBase;
 ((CChild*)pBase)->vfunc(); // !!! important 
 delete pBase;
 return 0;
} 
```

输出是：

```
CBase::vfunc() 
```

但我想看看：CChild::vfunc()

显式 ((CChild*)pBase) 强制转换为类型“CChild*”。那么为什么要调用派生的 vfunc() 我需要将“重要”字符串替换为： ((CChild*)pBase)->CChild::vfunc();

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T18:47:38.933

这不是它的工作原理 - 这是：

```
CBase *pBase = new CChild;
pBase->vfunc(); 
```

`virtual`函数调用是在指针和引用上动态解析的（除非您像您一样显式调用该方法）。这意味着无论你告诉编译器指针是什么，它都会在 vftable 中查找方法。在您的情况下，哪个`vftable`是`CBase`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-10T18:47:41.793

你不能。 `*pBase`是一个类型的对象`CBase`。你不能把它当作一个对象，`CChild`因为它不是一个`CChild`对象。

使用通过转换获得的指针`CChild*`会导致您的程序表现出未定义的行为。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T18:52:28.923

其他答案很重要 - 补充：如果您实际上可能正在处理 a `CChild`（例如，它是作为参数传递的引用），那么您可以使用`dynamic_cast`向下转换。然而，高度依赖`dynamic_cast`通常表明你的设计出了问题。

可以在此处找到有关演员表的详细信息：http: [//msdn.microsoft.com/en-us/library/cby9kycs (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/cby9kycs(v=vs.80).aspx)

因此该过程需要将`CBase`参数转换为`CChild`via `dynamic_cast`，如果引用是 a`CChild`并且`dynamic_cast`成功，那么您可以确定您正在处理 a`CChild`并且您可以安全地将其用作 a `CChild`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-02T02:33:27.193

这里的问题看起来很简单。CBase 不能神奇地升级到 CChild！让我重写你的例子并添加一些评论。它应该是不言自明的......

```
#include <iostream>

class CBase {
public:
    virtual void vfunc() { std::cout << "CBase::vfunc()" << std::endl; }
    virtual ~CBase(){} // Virtual destructor... extremely important! I'll let you figure out why as an excercise
};

class CChild: public CBase {
public:
    void vfunc() { std::cout << "CChild::vfunc()" << std::endl; }
    ~CChild(){} // Is this destructor called? When? Try adding some std::cout to each destructor
};

int main() 
{
    CBase *ptr1 = new CBase;
    CBase *ptr2 = new CChild;

    ptr1->vfunc(); // ptr1 points to an instance of CBase. This is what's important!!
    ptr2->vfunc(); // ptr2 points to an instance of CChild, which can be referenced to as a CBase

    delete ptr1;
    delete ptr2;
} 
```

输出：

```
CBase::vfunc()
CChild::vfunc() 
```

PS：我刚刚意识到我迟到了大约 5 年，但既然我发现这有教育价值，我还是会发布它！

# typo3 - TYPO3：用户帐户无法上传文件

> ID：11907508
> 
> 赞同：0
> 
> 时间：2012-08-10T18:46:28.283
> 
> 标签：typo3

我有一个 TYPO 4.7 网站。

我已经为编辑创建了一个帐户来更改页面的内容，并且我已经创建了一个文件挂载以便他可以上传文件，但是当我单击“选择文件”时，什么也没有发生。

我担心我可能搞砸了一些权限，但我无法想象哪个是错误的配置

![在此处输入图像描述](../Images/04c51e9c815c5c74b8a3b8bb46fe7277.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:12:32.627

也许这是一个闪存问题？用户可以在其设置中使用 Flash 上传来停用。在这种情况下，他将获得旧的上传模块。所以，如果这有效，但 Flash 上传器没有，那就是 Flash 问题。

# javascript - 在 javascript/Jquery 中针对 XSD 验证 XML

> ID：11907511
> 
> 赞同：3
> 
> 时间：2012-08-10T18:46:37.300
> 
> 标签：javascript, jquery, xml, xsd

我正在寻找使用 javascript/Jquery 或任何其他基于 JS 的 API/库针对 XSD 验证 xml。我无法得到任何帮助。经过研究，我了解到，人们通常不会这样做。我被迫在我的任务中这样做。请指出我怎样才能做到这一点。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T23:00:36.263

我从来没有这样做过，但是对“javascript xml 模式验证”的网络搜索显示了一些不错的线索：

*   xml.js，“用于客户端 XML 模式验证的 JavaScript 库”。
*   在 ASP 的上下文中，显然有名为“Msxml2.DOMDocument.4.0”和“Msxml2.DOMDocument.4.0”的 ActiveXObject。

# jquery - 获取元素的实际浮点宽度

> ID：11907514
> 
> 赞同：55
> 
> 时间：2012-08-10T18:46:46.303
> 
> 标签：jquery, css, floating-point, width

我正在使用 jQuery (v1.7.1) 并且我需要获取元素的绝对浮点宽度，但是 jQuery 的所有宽度方法似乎都是对宽度值进行四舍五入。

例如，如果一个元素的实际宽度是`20.333333px`，jQuery 的 width 方法返回`20`，即忽略十进制值。

[你可以在这个jsFiddle](http://jsfiddle.net/Z2MBj/1/)上看到我的意思

所以，我的问题是：如何获得元素宽度的浮点值？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-08-20T17:45:50.023

如果您已经拥有对 DOM 元素的引用，[`element.getBoundingClientRect`](https://developer.mozilla.org/en-US/docs/Web/API/element.getBoundingClientRect)则会为您提供所需的值。

该方法从 Internet Explorer 4 开始就存在，因此在任何地方都可以安全使用。但是，`width`and`height`属性只存在于 IE9+ 中。如果您支持 IE8 及以下版本，则必须计算它们：

```
var rect = $("#a")[0].getBoundingClientRect();

var width;
if (rect.width) {
  // `width` is available for IE9+
  width = rect.width;
} else {
  // Calculate width for IE8 and below
  width = rect.right - rect.left;
} 
```

`getBoundingClientRect`比`window.getComputedStyle`Chrome 28 快 70%，在 Firefox 中差异更大：http: [//jsperf.com/getcomputedstyle-vs-getboundingclientrect](http://jsperf.com/getcomputedstyle-vs-getboundingclientrect)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-10T19:15:43.727

试试这个：

```
var element = document.getElementById("a");
alert(window.getComputedStyle(element).width); 
```

更新小提琴：http: [//jsfiddle.net/johnkoer/Z2MBj/18/](http://jsfiddle.net/johnkoer/Z2MBj/18/)

# asp.net - 堆叠图 LogiXML

> ID：11907517
> 
> 赞同：1
> 
> 时间：2012-08-10T18:46:50.970
> 
> 标签：asp.net, .net, sql

我正在尝试将条形图堆叠起来，如下图所示。我的数据层返回特定日期的多个值，这些值对应于不同的“代码”。但是，当使用`Chart.XY`元素并将数据提供给 Logi 时，X 轴会重复每个不同元素（或“代码”）的日期，并且不会正确堆叠它们。我相信我做错了一些基本的事情，但无法找出是什么（额外栏选项设置为“堆叠”）。任何帮助表示赞赏！

这是图表：

![图形](../Images/4d4d2b546a006d66a63faaa2f1893eea.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:52:46.057

使用单个 Chart.XY 元素可能无法创建您需要的准确图表。ExtraGrid 图层不支持多系列，因此您目前不能将 2 个多系列图表叠加在一起。最好的选择可能是使用交叉表过滤器构建多个图表，每个图表都有自己的多系列。

这是一个与您的示例类似的图表的快速示例，该示例使用交叉表过滤器使用“静态”数据生成。

```
<Chart Type="XY" XYChartType="Bar" ChartHeight="300" ChartWidth="500" ChartOrientation="Horizontal" Color="#66C2A5,#FC8D62,#8DA0CB,#E78AC3" ChartLabelColumn="Item" ChartLabelColumnDataType="Text" Transparency="4">
  <DataLayer Type="Static" ID="staticDL1">
    <StaticDataRow Item="F" BudgetQuarter="Q1" BudgetValue="65" />
    <StaticDataRow Item="F" BudgetQuarter="Q2" BudgetValue="55" />
    <StaticDataRow Item="F" BudgetQuarter="Q3" BudgetValue="45" />
    <StaticDataRow Item="F" BudgetQuarter="Q4" BudgetValue="60" />
    <StaticDataRow Item="E" BudgetQuarter="Q1" BudgetValue="45" />
    <StaticDataRow Item="E" BudgetQuarter="Q2" BudgetValue="55" />
    <StaticDataRow Item="E" BudgetQuarter="Q3" BudgetValue="65" />
    <StaticDataRow Item="E" BudgetQuarter="Q4" BudgetValue="70" />
    <StaticDataRow Item="A" BudgetQuarter="Q1" BudgetValue="65" />
    <StaticDataRow Item="A" BudgetQuarter="Q2" BudgetValue="55" />
    <StaticDataRow Item="A" BudgetQuarter="Q3" BudgetValue="45" />
    <StaticDataRow Item="A" BudgetQuarter="Q4" BudgetValue="60" />
    <StaticDataRow Item="B" BudgetQuarter="Q1" BudgetValue="45" />
    <StaticDataRow Item="B" BudgetQuarter="Q2" BudgetValue="55" />
    <StaticDataRow Item="B" BudgetQuarter="Q3" BudgetValue="65" />
    <StaticDataRow Item="B" BudgetQuarter="Q4" BudgetValue="70" />
    <CrosstabFilter CrosstabColumn="BudgetQuarter" CrosstabLabelColumn="Item" CrosstabValueColumn="BudgetValue" CrosstabValueFunction="Sum" />
  </DataLayer>
  <Legend />
</Chart> 
```

您可以构建 2 个这样的图表，一个用于预算，一个用于实际。根据数据的结构方式，您还可以使用额外数据列/额外网格层来构建更复杂的图表。

有关交叉表图表的更多详细信息，您可能需要查看静态图表的示例应用程序：

[http://devnet.logixml.com/rdPage.aspx?rdReport=Samples](http://devnet.logixml.com/rdPage.aspx?rdReport=Samples) 具体来说，查看交叉表过滤器：

[http://devnet.logixml.com/SampleCharts/rdPage.aspx?rdReport=CrosstabFilter](http://devnet.logixml.com/SampleCharts/rdPage.aspx?rdReport=CrosstabFilter)

# java - 使用 Bean 对象中的 JSON 构造数组

> ID：11907528
> 
> 赞同：0
> 
> 时间：2012-08-10T18:47:29.090
> 
> 标签：java, javascript, json, jstl

大家好，我有一个有 3 个吸气剂的 bean。在 JSP 中，我使用 JSTL 遍历 bean 以填充表。我有 saome javascript 我需要做同样的事情来构造一个数组。在这里它是硬编码的，但是我如何通过遍历一个 bean 来构造它？

Bean：这就是我在 JSP 中使用 JSTL 的方式

```
<c:forEach var="bean" items="${beans}">
     ${bean.month}       
     </c:forEach> 
```

我怎样才能在这里做同样的事情：

Javascript：

```
"categories": [{
    "category": [{
       "label": "Oct"
    }, {
        "label": "Nov"
    }, {
        "label": "Dec"
    }, {
       "label": "Jan"
    }, {
        "label": "Feb"
    }, {
        "label": "Mar"
    }, {
        "label": "Apr"
    }, {
        "label": "May"
    }, {
        "label": "Jun"
    }, {
        "label": "Jul"
    }, {
        "label": "Aug"
    }, {
        "label": "Sep"
    }]     
    }] 
```

试图在javascript中做这样的事情

```
 <c:forEach var="bean" items="${beans}">
     [{
       "label": " ${bean.month}"
    },         
     </c:forEach> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:04:43.697

我在 JSTL 方面经验不足。这是基于我在 PHP 方面的经验的猜测。

```
var array = [
<c:forEach var="bean" items="${beans}" varStatus="beanStatus">
    {
        "label": "${bean.month}"
    }
    <c:if test="${!beanStatus.last}">  // put comma after all item, but last one
         ,
    </c:if>          
 </c:forEach>
]; 
```

或者

```
var array = [];
<c:forEach var="bean" items="${beans}">
    array.push({
        "label": "${bean.month}"
    });         
</c:forEach> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T19:28:15.800

```
var category = [], // new Array
    i,
    newCategory;

for (i = 0; i < beans.length; i += 1) {
    newCategory = {}; // new object
    newCategory.label = beans[i].month;
    category.push(newCategory);
} 
```

# c# - Windows Phone C# 异步获取 https 请求

> ID：11907529
> 
> 赞同：3
> 
> 时间：2012-08-10T18:47:33.867
> 
> 标签：c#, multithreading, windows-phone-7, https

我想通过 https 实现异步获取请求。这是分离 UI 和请求线程所必需的。这段代码可以找到，但我不确定它是否真的是异步的。请提供此代码的性能批评者。

```
public void authHttp()
    {
        HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create("uri");
        request.BeginGetResponse(new AsyncCallback(ReadWebRequestCallback), request);
    }

    private void ReadWebRequestCallback(IAsyncResult callbackResult)
    {
        HttpWebRequest myRequest = (HttpWebRequest)callbackResult.AsyncState;
        HttpWebResponse myResponse = (HttpWebResponse)myRequest.EndGetResponse(callbackResult);

        using (StreamReader httpwebStreamReader = new StreamReader(myResponse.GetResponseStream()))
        {
            string results = httpwebStreamReader.ReadToEnd();
            //TextBlockResults.Text = results; //-- on another thread!
            //Dispatcher.BeginInvoke(() => TextBlockResults.Text = results);
        }
        myResponse.Close();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T19:39:17.937

是的，它是异步执行的。您可以通过调试来确认，在 ReadWebRequestCallback 方法中放置一个断点并在 authHttp 方法中跳过 (F10) BeginGetResponse 调用。当你这样做时，你会注意到你的断点没有被命中。稍后会被击中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T21:40:56.213

`BeginGetResponse`（我假设在 UI 线程上调用）是异步的。这将调用`ReadWebRequestCallback`与 UI 线程不同的线程。 `BeginGetResponse`使用异步 UI，因此它可能不会使用“线程”来完成 IO 工作——这可能会被卸载到硬件上。但是，它确实使用另一个线程池线程来调用您的回调。

在回调中继续做异步操作也是一个好主意。 `ReadToEnd`是同步的。只要您阻止了用于会话的异步 IO 子系统的线程，它就可能会阻止执行任何其他异步 IO，直到您解除阻塞并从回调中返回。如果您使用的是 .NET 4.5，请查看`StreamReader.ReadtoEndAsync`. 如果没有，您将不得不使用下拉菜单`Stream.BeginRead`并循环，直到收到所有数据。

# spring - 如果该类不包含状态，那么使用非静态类是否合理？

> ID：11907532
> 
> 赞同：3
> 
> 时间：2012-08-10T18:47:45.687
> 
> 标签：spring, oop, static

在我的工作场所，目前似乎正在反对静态课程。我可以理解其中的一部分，它们确实破坏了整个单元测试的模块化。但是，我看到大量代码审查要求删除静态类。

一个常见的情况是一个实用程序类，它与一些在编译时“已知”的其他对象一起被弹簧注入。它没有其他成员变量。如果 M 类调用这个静态类，我总是看到建议使这个实用程序类非静态并将其注入到 M 类中。

这对我来说没有意义。除了它似乎浪费时间并且使实用程序类不太容易使用之外，我没有特别看到它有什么问题。据我所知，理由通常是用于单元测试，但我不喜欢必须更改有效代码以符合测试范式的想法。不可否认地模拟一个简单的静态实用程序类可能是矫枉过正。

静态类在这个用例中是合适的，还是最好避免？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:58:40.300

我认为这两种方法的差异很小，但只要类不包含状态，将其设为静态会稍微好一些。假设我在 A 类中有这段代码：

```
StaticClass.utilMethod() 
```

如果我想在 BI 类中使用此代码，可以复制和粘贴。而已。不用添加成员变量，注入等 cmd -c cmd -v。

考虑到您现有的代码使用静态类并且需要进行修改，因此最好继续使用静态类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T18:59:51.830

If you pretend for a moment that your static class did not belong to you, that it was, say, part of the .NET framework, how would your team handle it? Their answer would be my answer. In other words, if their answer to that question is inconsistent with what they're asking you to do, then they should probably either change how they work with .NET static classes or with how they work with yours.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T19:10:25.570

取决于，自然。

*   您想如何测试使用静态类的代码？
*   静态类是否封装了您需要经常模拟的行为？
*   是否有人需要修改这些静态类的行为？

最后：

*   是否有*不*注入 Spring 管理的单例 bean 的令人信服的理由？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T18:55:06.037

我投票赞成使用静态类...即仅具有静态方法的类，用于纯粹的实用程序目的。甚至 java 也为我们提供了这样的类，比如`java.util.Collections`和`java.util.Arrays`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-11T23:12:30.883

> 不可否认地模拟一个简单的静态实用程序类可能是矫枉过正。

你在这点上是完全正确的。静态类只能用于极其简单的实用程序类，在这些类中模拟这样的类没有任何好处。如果您将它们用于任何其他目的，您应该重新考虑您的设计。

> 如果该类不包含状态，那么使用非静态类是否合理？

这真的与国家无关。例如，策略对象通常不包含状态，但它们不是静态的；它们通常实现一个通用接口，并且需要可互换/可模拟。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-10T19:05:21.527

我避免使用静态类（假设我们实际上是在谈论包含静态方法的类），我这样做是为了可测试性。

如果您使用静态方法，您将很难模拟/存根代码中使用所述静态方法进行单元测试的部分。

考虑一下：

```
public String myMethod() {
    String complicatedStringOutput = MyUtility.createComplicatedStringOutput();
    //do some more complicated work on this String
} 
```

要为此方法编写单元测试，您将如何使其成为“真正的单元测试”而无需同时测试 的创建`complicatedStringOutput`？在我的单元测试中，我更喜欢只测试作为单元测试重点的方法。

将其更改为：

```
public String myMethod(MyNonStaticUtility util) {
    String complicatedStringOutput = util.createComplicatedStringOutput();
    //do some more complicated work on this String
} 
```

突然之间，为这个类编写“真正的单元测试”要容易得多。`MyNonStaticUtility`您可以通过使用存根或模拟来控制 的行为。

综上所述，这完全取决于您（或您的业务部门）。如果您重视单元测试并认为对复杂代码进行良好的测试覆盖很重要，那么这是首选方法。如果您没有时间/金钱来投资“修复”您的代码，那么它就不会发生。

# c# - 如何像 SQL 连接一样使用 CAML 连接？

> ID：11907535
> 
> 赞同：6
> 
> 时间：2012-08-10T18:47:48.793
> 
> 标签：c#, .net, sharepoint-2010, caml

我已经在这里查看过文章并在 Google 上搜索，直到我的指尖都变蓝了。我已经阅读了阅读和阅读，但似乎无法理解 Sharepoint2010 中的 CAML 连接。

> **问题：**有人可以给*我*看一个完整的例子，说明*CAML* Join Query 与 SQL Join Query 的比较吗？

```
*For Example (SQL of Course, just something to work with)*

If I had a Database named "whatever" & it contained two tables.  
We'll name these "tableA" & "tableB", respectively.

Let's say they look like this:

 - tableA - 
ID | Column1 | Column2 | Column3

 - tableB - 
ID | Column4 | Column5 | Column6

SELECT tableA.Column1, tableA.Column2, tableB.Column4 
FROM tableA 
INNER JOIN tableB ON tableA.ID = tableB.ID

Would give me something like:

 - newTable - 
Column1 | Column2 | Column4
 result | result  | result
 result | result  | result
 result | result  | result 
```

所以，我的问题是，我能否得到一个在 Sharepoint 2010 中使用 CAML 连接查询字符串不执行**相同操作的***确切*示例？

 *** * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-10T18:55:04.167

从您的列表之一创建您的查询。

```
 SPList list = SPContext.Current.Site.RootWeb.Lists["TableA"];
 SPQuery query = new SPQuery(); 
```

要进行连接，请设置`query.Joins`为

```
 <Join Type="INNER" ListAlias="TableB">
    <Eq>
        <FieldRef Name="TableA" RefType="ID" />
        <FieldRef List="TableB" Name="ID" />
    </Eq>
 </Join> 
```

并`query.ProjectedFields`_

```
 <Field Name="TableBColumn4" Type="Lookup" List="TableB" ShowField="Column4"> 
```

选择要显示的字段设置`query.ViewFields`为

```
 <FieldRef Name="Column1">
  <FieldRef Name="Column2">
  <FieldRef Name="TableBColumn4"> 
```

然后

```
SPListItemCollection result = tablea.GetItems(query); 
```

或类似的东西（它来自记忆！）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-27T17:19:27.847

我的挫败感反映了你的情况，这里有更多提示：

1.  根据关系中的子表启动查询。（我无法从你的例子中辨别出哪个是父母，哪个是孩子。）

2.  我同意 Rob Windsor 的观点，即它必须基于查找字段，但根据我的测试，它必须是对 ListItemID 类型字段的查找。在 SharePoint 中，这是内部 ID 字段。（我知道这一点，因为我查找了一个文本字段，但它不起作用。浪费了生命的时间。）我目前在 Microsoft 论坛上有一个帖子询问 RefType 参数是否可以是 'ID 以外的任何值'，所以也许要注意这一点。最后，如果在投影字段中，Type 参数必须始终为“lookup”，那么为什么需要它？

3.  CAML 查询构建器（YACQB 和 U2U）都不支持连接，所以不要费心下载和尝试。**

# python - python os.system 错误：“未定义全局名称‘输出’”

> ID：11907537
> 
> 赞同：3
> 
> 时间：2012-08-10T18:48:01.590
> 
> 标签：python, os.system

新手来了 任何帮助，将不胜感激..

我正在编写一个运行 tcp pcap 诊断工具的 cgi 脚本。如果我在 bash 中运行命令，它看起来像：

```
/home/fsoft/cap/capnostic -r 38350 /home/fsoft/brad.pcap > 38350 
```

所以我试图在python中做到这一点：

```
output = os.system('/home/fsoft/cap/capnostic -r' + port + directory+filename '>' + jobdir+filename 
```

我有一种感觉'>'把事情搞砸了..但我似乎找不到正确的语法..而且一旦我正确获得命令，我就能打印输出变量吗？

```
 print '%s' % (output) 
```

输出可能是3页数据..

谢谢您的帮助。

这是我的完整代码：

```
#!/usr/bin/env python

import cgi, os
import cgitb; cgitb.enable()
import subprocess

form = cgi.FieldStorage()
port = form.getvalue("port")
filename = form.getvalue("filename")
directory = form.getvalue("directory")
jobdir = '/var/www/jobs/' + filename

def createdir():
 os.system('mkdir /var/www/jobs/' + filename)
createdir()

def capout():
 output = os.system('/home/fsoft/cap/capnostic -r %s %s%s > %s%s' % (port, directory,     filename, jobdir, filename))
capout()

def htmlout():
 print 'Content-type: text/html\n'
 print '<html>'
 print '<head>'
 print '<title>Capnostic Output</title>'
 print '</head>'
 print '<body>'
 print '<BR><BR><BR><center>'
 print '<table border=0>'
 print '<TR>'
 print '<TD><center>port = %s<BR>filename = %s<BR>Directory = %s<BR>Job Directory = %s</TD>' % (port,filename,directory,jobdir)
 print '</TR>'
 print '</table>'
 print '<BR><BR><BR>'
 print '%s' % (output)
 print '</body>'
 print '</html>'

htmlout() 
```

它现在告诉我：

```
<type 'exceptions.NameError'>: global name 'output' is not defined 
  args = ("global name 'output' is not defined",) 
  message = "global name 'output' is not defined" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T18:53:20.290

您缺少`+`用于连接字符串和字符串之间的空格的 a 。您可以使用[字符串格式](http://docs.python.org/library/stdtypes.html#string-formatting-operations)来简化任务，或者`+`在需要的地方添加 a 和空格：

```
output = os.system('/home/fsoft/cap/capnostic -r %s %s%s > %s%s' % (port, 
                   directory, filename, jobdir, filename)) 
```

*注意：%s 用于将每个变量视为字符串。*

[os.system](http://docs.python.org/library/subprocess.html?highlight=subprocess.call#replacing-os-system)的用法被替换为[子](http://docs.python.org/library/subprocess.html)进程模块：

```
sts = os.system("mycmd" + " myarg")
# becomes 
sts = call("mycmd" + " myarg", shell=True) 
```

要捕获输出，您将需要使用[`Popen`](http://docs.python.org/library/subprocess.html?highlight=subprocess.call#popen-objects)，将其翻译如下：

```
def capout():
   cmd = '/home/fsoft/cap/capnostic -r %s %s%s > %s%s' % (port, 
                       directory, filename, jobdir, filename)
   process = subprocess.Popen(cmd, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
   output, error = process.communicate()
   return output

output = capout() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T18:49:49.043

您`+`在`'>'`

```
cmd = ('/home/fsoft/cap/capnostic -r' + port + directory + filename + '>' + 
        jobdir + filename)

os.system(cmd) 
```

请注意，`os.system`它不会返回命令的输出，您可以通过以下方式获得：

```
import subprocess

proc = subprocess.Popen(cmd, stdout=subprocess.PIPE, shell=True)
output, error = proc.communicate()
print output 
```

# javascript - 为大图添加下一个和上一个按钮

> ID：11907543
> 
> 赞同：3
> 
> 时间：2012-08-10T18:48:45.053
> 
> 标签：javascript, jquery, html

我正在创建一个图像缩略图滑块，当我单击缩略图图像时，将打开一个带有较大图像的弹出框。在这里，我需要将下一个和上一个按钮添加到较大的图像中。

这是我练习的：

**HTML**

```
<div id="wrapper">
  <div id="content">
  <div id="content_left">

  </div>
<ul id="thumb_holder">
  <li><a href="javascript:void(0);"><img src="img/img1_thumb.jpg" alt="motherly" /> </a></li>
    <li><a href="javascript:void(0);"><img src="img/img2_thumb.jpg" alt="xo" /> </a></li>
    <li><a href="javascript:void(0);"><img src="img/img3_thumb.jpg" alt="keep your eyes open" /> </a></li>
    <li><a href="javascript:void(0);"><img src="img/img4_thumb.jpg" alt="bacon bits" /> </a></li>
    <li><a href="javascript:void(0);"><img src="img/img5_thumb.jpg" alt="nature sent packing" /> </a></li>
    <li><a href="javascript:void(0);"><img src="img/img6_thumb.jpg" alt="snow man" /> </a></li>
    </ul>
    </div>
    <div id="large_image_holder">
      <ul id="large_images">
        <li><img src="img/img1.jpg" alt="motherly" /></li>
        <li><img src="img/img2.jpg" alt="xo" /></li>
        <li><img src="img/img3.jpg" alt="keep your eyes open" /></li>
        <li><img src="img/img4.jpg" alt="bacon bits" /></li>
        <li><img src="img/img5.jpg" alt="nature sent packing" /></li>
        <li><img src="img/img6.jpg" alt="snow man" /></li>
      </ul>
    </div>

  </div>

</div> 
```

**jQuery**

```
$(document).ready (function(){      
    $("#large_images li").each(function(index, element){$(element).attr("class", 'hide');});
    $("#large_images li").each(function(index, element){$(element).attr("id", 'img'+index);});
    $("#thumb_holder li a").each(function(index, element){$(element).attr("rel", 'img'+index);});

    var mainImg ='img0';
    var current = 'img0';

    $('#img0').css('display', 'inline');
    $('#img0').addClass('current');

    $('#thumb_holder li a').click (function(){                                 
        mainImg = $(this).attr('rel');
        if(mainImg != current){
        $('.current').fadeOut('slow');
        $('#'+mainImg).fadeIn('slow', function(){
        $(this).addClass('current');
        current = mainImg;

        });
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T15:21:39.430

```
<div id="picture">
    <a id="prev" class="nav"> Next</a>
    <a id="next" class="nav"> Prev</a>
</div>​ 
```

和 CSS

```
a.nav{
    position:absolute;
    top:10px;
    cursor:pointer;
}
#picture a#prev{
    color:red;
    left:10px; 
    /*background: add images for nav buttons if needed*/
}
#picture a#next{
    color:blue;
    right:10px;
}
#picture{
   position:relative;
} 
```

而对于点击处理程序..

```
$('#picture').on('click', '.nav', function(){
     alert(this.id); //Do what you do in $('#thumb_holder li a').click..
});​ 
```

**[演示](http://jsfiddle.net/mrobin/V2v8t/)**

# objective-c - QTMovieView 单击并拖动会中断键盘事件

> ID：11907546
> 
> 赞同：2
> 
> 时间：2012-08-10T18:49:06.593
> 
> 标签：objective-c, cocoa, quicktime

我有一个带有 QTMovieView 的 NSView。我的 QTMovieView 仅用于显示电影；我不希望用户能够以任何方式与之交互。在对如何禁用拖动 QTMovieView 进行了令人失望的搜索后，我遇到了这个解决方法，我将其作为 QTMovieView 上的一个类别来实现。它旨在覆盖 QTMovieView 的鼠标事件，并成功阻止用户拖动它或单击 QTMovieView 暂停它：

```
//QTMovieView+TFOverrideDrag.h

#import <QTKit/QTKit.h>

@interface QTMovieView (TFOverrideDrag)

- (void)mouseDown:(NSEvent *)theEvent;
- (void)mouseDragged:(NSEvent *)theEvent;
- (void)rightMouseDown:(NSEvent *)theEvent;

@end 
```

...

```
//QTMovieView+TFOverrideDrag.m

#import "QTMovieView+TFOverrideDrag.h"

@implementation QTMovieView (TFOverrideDrag)

- (void)mouseDown:(NSEvent *)theEvent
{
    [self.superview becomeFirstResponder];
    NSLog(@"MDown");
}

- (void)mouseDragged:(NSEvent *)theEvent
{
    [self.superview becomeFirstResponder];
    NSLog(@"MDrag");
}

- (void)rightMouseDown:(NSEvent *)theEvent
{
    [self.superview becomeFirstResponder];
    NSLog(@"RMouse");
}
@end 
```

这可以有效地防止用户拖动或暂停电影，并且适当地调用 NSLog 语句。

问题是，在点击 QTMovieView 后，QTMovieView 的超级视图停止响应键盘事件（keyDown）。这就是为什么我`[self.superview becomeFirstResponder];`在类别中的每个 QTMovieView 的覆盖方法中包含该行。这并没有解决问题。

值得注意的是，QTMovieView的superview还有QTMovieView以外的子视图，其中一些是绘制在QTMovieView之上的。单击这些时，QTMovieView 不会导致任何问题，并且程序会继续正常运行。但是，在这种情况下仍会调用 NSLog 语句。

我确信确实是 QTMovieView 导致了问题，因为我在删除它后运行了该程序，并且该区域中的所有点击都没有问题。

我的问题归结为：有没有人有比覆盖 QTMovieView 的鼠标事件以防止用户交互更合理的解决方法？如果没有，有谁知道为什么 QTMovieView 框架内的点击会导致其超级视图停止响应键盘？或者，如果除了 QTMovieView 之外还有其他可以使用的类，我会对此持开放态度，尽管我确实需要利用 QTMovieLoopsAttribute，因此任何其他类都需要提供该功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T03:12:03.663

经过进一步考虑，我找到了解决方案。我需要在我的类别中覆盖另一个 QTMovieView 方法：

```
- (void)keyDown:(NSEvent *)theEvent
{
    [self.nextResponder keyDown:theEvent];
    NSLog(@"keyDown");
} 
```

在我单击 QTMovieView 的框架之前，不会为 keyDown 事件调用日志语句。一旦我这样做（这是我的 keyDown 事件之前开始被超级视图忽略的时候），就会调用日志语句。但是，现在我将 keyDown 事件传递给 nextResponder，superview 正在适当地响应。我仍然对需要这种复杂的解决方法感到恼火，所以如果有人有更优雅的东西，请分享！在那之前，我希望这可以帮助其他遇到类似问题的人！

# c - 如何为输入的输入分配内存（在“C”中）

> ID：11907548
> 
> 赞同：1
> 
> 时间：2012-08-10T18:49:24.710
> 
> 标签：c, pointers, memory-management, input

我正在为一个假设的机器（SMAC-0 机器）开发一个汇编程序，需要一些内存分配方面的帮助。

我将从给定文件中获取和标记字符串，并将这些标记保存在指针中。

这是一个代码片段：

```
tokenCount = sscanf(buffer,"%s %s %s %s", tokenOne, tokenTwo, tokenThree, tokenFour); 
```

其中`tokenCount`是整数，`buffer`是存储从输入文件中取出的行的临时缓冲区，`tokenOne`、`tokenTwo`、`tokenThree`和`tokenFour`是字符指针。

从文件中接受的字符串可以包含一到四个单词：

> 例子：

```
 READ    N
    N:      DS      1
    SUM:    DS      1
    LOOP:   MOVER   AREG    N
            ADD     AREG    N
            COMP    AREG    ='5'
            BC      LE      LOOP
            MOVEM   AREG    SUM
            PRINT   SUM
            STOP 

```

我的查询是：

*   我怎样才能知道令牌有多大，从而知道如何为相应的令牌指针分配内存？

（这个问题也适用于`buffer`指针，因为标签（例如`LOOP`, `N`, `SUM`）可以是可变大小的。）

*   我怎样才能，使用`scanf()`或其他输入功能，如`gets()`，做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:18:44.777

您应该声明您的令牌缓冲区足够大。为了安全起见，最好使它们都与输入缓冲区本身一样大。看到这个这个线程[如何防止scanf在C中导致缓冲区溢出？](https://stackoverflow.com/questions/1621394/how-to-prevent-scanf-causing-a-buffer-overflow-in-c)了解更多信息。

如果您使用的是 GNU 编译器，则可以使用可以代表您动态分配缓冲区的扩展。使用 scanf()查看[动态分配](https://stackoverflow.com/questions/3911547/dynamic-allocation-with-scanf)

## 例子：

**为扫描的令牌使用预定义的缓冲区：**

请注意，所有标记的大小都与输入缓冲区相同：

```
/* sscanf-test.c */
#include <stdio.h>

int main(int argc, char** argv)
{
  FILE *file = fopen("sample.txt", "r");
  const int BufferSize=256;
  char buffer[BufferSize];
  char tokenOne[BufferSize];
  char tokenTwo[BufferSize];
  char tokenThree[BufferSize];
  char tokenFour[BufferSize];

  while (fgets(buffer, sizeof(buffer), file) != NULL)
  {
    tokenOne[0]='\0';
    tokenTwo[0]='\0';
    tokenThree[0]='\0';
    tokenFour[0]='\0';
    int tokenCount = sscanf(buffer, "%s %s %s %s", tokenOne, tokenTwo, tokenThree, tokenFour);
    printf("scanned %d tokens   1:%s 2:%s 3:%s 4:%s\n", tokenCount, tokenOne, tokenTwo, tokenThree, tokenFour);
  }

  fclose(file);
  return 0;
} 
```

该程序产生以下输出（我稍微清理了格式以提高可读性）：

```
gcc sscanf-test.c -o sscanf-test
./sscanf-测试
扫描 2 个令牌 1:READ 2:N 3:4:
扫描 3 个令牌 1:N: 2:DS 3:1 4:
扫描 3 个令牌 1:SUM: 2:DS 3:1 4:
扫描 4 个令牌 1:LOOP:2:MOVER 3:AREG 4:N
扫描 3 个令牌 1:ADD 2:AREG 3:N 4:
扫描 3 个令牌 1:COMP 2:AREG 3:='5' 4:
扫描 3 个令牌 1:BC 2:LE 3:LOOP 4:
扫描 3 个令牌 1:MOVEM 2:AREG 3:SUM 4:
扫描 2 个令牌 1:PRINT 2:SUM 3:4:
扫描 1 个令牌 1:STOP 2:3:4:

```

如果要存储扫描的令牌以供以后处理，则必须将它们复制到 while 循环中的其他位置。您可以使用该函数`strlen`来获取令牌的大小（不包括尾随字符串终止符 '\0'）。

**为令牌使用动态内存分配：**

就像我说的，你也可以让 scanf 为你动态分配缓冲区。[scanf(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/scanf.3.html)手册页声明您可以使用 GNU 扩展 'a' 或 'm' 来做到这一点。具体来说，它说：

> 可选的“a”字符。这与字符串转换一起使用，并且使调用者无需分配相应的缓冲区来保存输入：相反，scanf() 分配了一个足够大小的缓冲区，并将该缓冲区的地址分配给相应的指针参数，这应该是一个指向 char * 变量的指针（这个变量在调用之前不需要初始化）。当不再需要此缓冲区时，调用者应随后释放（3）此缓冲区。这是一个 GNU 扩展；C99 使用 'a' 字符作为转换说明符（它也可以在 GNU 实现中使用）

我无法使用 'a' 修饰符让 scanf 工作。但是，还有 'm' 修饰符可以做同样的事情（甚至更多）：

> 从 2.7 版开始，glibc 还提供了 m 修饰符，其目的与 a 修饰符相同。m 修饰符具有以下优点：
> 
> *   它也可以应用于 %c 转换说明符（例如 %3mc）。
>     
>     
> *   它避免了关于 %a 浮点转换说明符的歧义（并且不受 gcc -std=c99 等的影响）
>     
>     
> *   它在即将到来的 POSIX.1 标准修订版中指定。

```
/* sscanf-alloc.c */
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char **argv)
{
  FILE *file = fopen("sample.txt", "r");
  const int BufferSize=64;
  char buffer[BufferSize];
  char *tokenOne   = NULL;
  char *tokenTwo   = NULL;
  char *tokenThree = NULL;
  char *tokenFour  = NULL;

  while (fgets(buffer, sizeof(buffer), file) != NULL)
  {
    // note: the '&', scanf requires pointers to pointer to allocate the buffers.
    int tokenCount = sscanf(buffer, "%ms %ms %ms %ms", &tokenOne, &tokenTwo, &tokenThree, &tokenFour);
    printf("scanned %d tokens   1:%s 2:%s 3:%s 4:%s\n", tokenCount, tokenOne, tokenTwo, tokenThree, tokenFour);

    // note: the memory has to be free'd to avoid leaks
    free(tokenOne);
    free(tokenTwo);
    free(tokenThree);
    free(tokenFour);
    tokenOne   = NULL;
    tokenTwo   = NULL;
    tokenThree = NULL;
    tokenFour  = NULL;
  }

  fclose(file);
  return 0;
} 
```

```
gcc sscanf-alloc.c -o sscanf-alloc
./sscanf-分配
扫描 2 个令牌 1:READ 2:N 3:(null) 4:(null)
扫描 3 个令牌 1:N: 2:DS 3:1 4:(null)
扫描 3 个令牌 1:SUM: 2:DS 3:1 4:(null)
扫描 4 个令牌 1:LOOP:2:MOVER 3:AREG 4:N
扫描 3 个令牌 1:ADD 2:AREG 3:N 4:(null)
扫描了 3 个令牌 1:COMP 2:AREG 3:='5' 4:(null)
扫描 3 个令牌 1:BC 2:LE 3:LOOP 4:(null)
扫描 3 个令牌 1:MOVEM 2:AREG 3:SUM 4:(null)
扫描 2 个令牌 1:PRINT 2:SUM 3:(null) 4:(null)
扫描 1 个令牌 1:STOP 2:(null) 3:(null) 4:(null)

```

# mysql - 无法使用 RubyMine 连接到正确的 mysql 安装

> ID：11907551
> 
> 赞同：0
> 
> 时间：2012-08-10T18:49:41.870
> 
> 标签：mysql, ruby-on-rails, ruby, unix, rubymine

我很确定这与我的设置有关，但让我先说明一下。我已经在我的机器上为我的 LAMP 项目安装了 XAMPP。我还想做一些有趣的 Rails 开发（RubyMine 看起来很可爱）。我已经安装了 Homebrew 和运行我的应用程序所需的 gem，但是当我尝试通过 RubyMine 连接到 mysql 时，出现以下错误

> 无法通过套接字 '/tmp/mysql.sock' 连接到本地 MySQL 服务器 (2)

使用我的 bash 控制台，我可以很好地进入 mysql 控制台，它似乎运行良好，并且我的 Apache 项目仍在连接。我的印象是我安装的 gem 或者我的 Ruby 安装正在寻找的确切位置是不同的 MySQL 安装？这可能吗？在过去的一天半里，我一直在用键盘敲打我的头，我不太确定该去哪里。理想情况下，如果有一种方法可以将我的 Rails 应用程序指向在我的 XAMPP 文件夹中安装 MySQL，这将非常酷，但我是新手，也许这些东西不是“正确的”。非常感谢任何帮助，如果你们想了解更多信息，请让我知道！谢谢！

完全错误：

> /Users/Username/.rvm/rubies/ruby-1.9.3-p194/bin/ruby -e $stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift) /Users/Username/ .rvm/gems/ruby-1.9.3-p194@global/bin/rake db:setup 无法通过套接字 '/tmp/mysql.sock' 连接到本地 MySQL 服务器 (2) 无法为 {" 创建数据库适配器"=>"mysql2", "encoding"=>"utf8", "reconnect"=>false, "database"=>"project_development", "pool"=>5, "username"=>"root", " password"=>"mypass", "host"=>"localhost"}, charset: , collat​​ion: Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) Couldn't create database for {"适配器"=>"mysql2", "编码"=>"utf8", "reconnect"=>false, "database"=>"project_development", "pool"=>5, "username"=>"root", "password"=>nil, "host"=>"localhost" }, charset: , collat​​ion: rake aborted! 无法通过 socket '/tmp/mysql.sock' 连接到本地 MySQL 服务器 (2)

任务：TOP => db:schema:load => environment（通过使用 --trace 运行任务查看完整跟踪）

进程以退出代码 1 结束

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T19:06:56.520

如果你`mysql`在 shell 中运行然后运行

```
mysql> STATUS; 
```

你会看到一条线

```
UNIX socket:        /tmp/mysql.sock 
```

这是 MySQL 的套接字位置。您可以在您`config/database.yml`使用的连接中指定它

```
socket: /tmp/mysql.sock 
```

这告诉 Rails 连接 MySQL 的套接字位置。

# highlighting - 使用轮胎的 Elasticsearch，突出显示不起作用

> ID：11907555
> 
> 赞同：0
> 
> 时间：2012-08-10T18:49:52.443
> 
> 标签：highlighting, elasticsearch, tire

我必须在这里遗漏一些东西，但是当我尝试使用 Elasticsearch 在搜索中突出显示时，我根本没有看到任何突出显示，但也没有错误。我不认为这是轮胎问题，但我提到轮胎以防万一它很重要。使用 Tire 的索引非常简单（为简洁起见，删除了一些字段）：

```
mapping :_source => { :excludes => ['attachment'] } do
  indexes :id, :type => 'integer'
  indexes :title, :store => true
  indexes :attachment, :type => 'attachment', :_source => { :enabled => false }
end 
```

使用 curl，我可以尝试这个查询，它工作正常，但结果中没有突出显示：

```
curl -XPOST http://localhost:9200/myobject/_search\?pretty\=true -d '{             
  "query": {"query_string": {"query": "foobar"}},
  "highlight": {"fields": {"Title":{}}}
}' 
```

请注意，我在映射中添加了 ":store => true" 只是为了确保，尽管我认为没有必要使突出显示工作。所以我猜我在映射或查询规范中遗漏了一些东西，但我没有看到它。任何建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:52:41.280

elasticsearch 中的字段名区分大小写。`Title`和`title`是两个不同的领域。试试这个查询：

```
curl -XPOST http://localhost:9200/myobject/_search\?pretty\=true -d '{             
  "query": {"query_string": {"query": "foobar"}},
  "highlight": {"fields": {"title":{}}}
} 
```

# mercurial - HG 克隆在 Redmine VMWare 计算机上返回“中止：HTTP 错误 406：不可接受”

> ID：11907558
> 
> 赞同：5
> 
> 时间：2012-08-10T18:50:11.430
> 
> 标签：mercurial, vmware, redmine

我对 SCM 系统真的很陌生，所以我开始研究 Mercurial，但我遇到了一个我不知道如何解决的问题。我希望有人能给我指出正确的方向:-)：

所以，我已经在Windows 2003（64 位）作为操作系统的 Vmware 计算机上安装了 BitNami Redmine Stack（ [http://bitnami.org/stack/redmine ）。](http://bitnami.org/stack/redmine)在同一个 VM 上，我安装了[Mercurial-2.3](http://mercurial.selenic.com/downloads/)（Mercurial 2.3 Inno Setup installer - x64 Windows - 不需要管理员权限），然后重新启动。之后，创建了一个目录（e:\helloworld），我用一些基本的 HG 命令（HG Init、HG Add、HG Commit）初始化了该目录。

使用主机确认与 VMWare 来宾计算机的正确通信，我在 Redmine 中创建了一个小项目，添加了一个以 Mercurial 作为 SCM 的存储库并包含初始化目录（服务器上的 e:\helloworld）。存储库在 Redmine 中正确显示，并且如果我进行一些更改并执行一些提交，则直接在虚拟计算机中工作，更改将显示在 Redmine 存储库中。根据我目前有限的知识，当我直接在 VM 中工作时似乎一切正常，但是当我尝试从主机使用 HG clone 克隆目录时，服务器响应：

```
C:\helloworld>hg clone http://redminevm/redmine/projects/helloworld 
abort: HTTP Error 406: Not Acceptable 
```

我也尝试过使用 IP 地址而不是主机名，将用户名和密码添加到 URL，或者初始化本地文件夹以尝试 hg 克隆。我所有的尝试都返回相同的结果。我假设服务器中的某些内容不正确，但我不知道它可能是什么。

为了允许我通过 http 克隆 Mercurial 存储库，应该在服务器（或客户端）上查看什么？

非常感谢您！

亚历克斯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T22:33:56.463

好的，经过调查，并在 Redmine 论坛的大力帮助下，我可以回答我自己的问题。我希望我的经验可以帮助别人。我的问题是因为对 Redmine 及其能做什么和不能做什么缺乏了解。

所以；即使我们可以在 RedMine 项目中拥有存储库，RedMine 也不是存储库服务器。意味着我可以将存储库链接到项目，但是，如果我想通过 http 处理它（或提供多个存储库），我还需要安装像 rhodecode 这样的服务器，或者使用 hg serve。:-)

这么说，我做错了。运行 hg serve 后，我能够为多个存储库提供服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-18T17:54:47.307

如果你想用“hg clone”克隆一个**git repo，也会出现同样的错误。**是的，我知道，我是个白痴，但它发生了，可能这会对某人有所帮助。

# bash - MATLAB 读取密码

> ID：11907559
> 
> 赞同：2
> 
> 时间：2012-08-10T18:50:15.130
> 
> 标签：bash, matlab, cross-platform, password-prompt

我正在构建一个验证用户凭据的 MATLAB 应用程序。我想读入他的密码，并且想以某种方式隐藏他输入的凭据。

一些限制：

*   我必须考虑到 windows 以及 linux/mac 用户。
*   我不能保证用户系统中有任何程序（perl/python/VBS）。

这是我尝试过的：

**直接指南**

工作，但不是一个选项，因为用户可能在`-nodesktop`（或`-nodisplay`）模式下运行 matlab。

**MATLAB + Java**

[控制台.readPassword](http://docs.oracle.com/javase/6/docs/api/java/io/Console.html#readPassword%28%29)。这把我的终端搞得一团糟。

**系统（）调用**

本质上，我调用基于操作系统的 bash 或 dos 脚本。

我对 linux/mac 有以下要求：

```
[status cred] = system('stty -echo; read cred; stty echo;echo ""; echo "$cred"'); 
```

这应该获取用户凭据并将其转储到“cred”。我已经检查过它是否可以在常规终端中运行，但是在 MATLAB 中执行它不会导致任何输出，并且需要 Ctrl-C 才能恢复`>>`提示。

**MATLAB Perl**

正如评论中所指出的，Windows MATLAB 将 Perl 打包。我尝试了以下代码段：

```
use Term::ReadKey;
use Term::ReadLine;
ReadMode('noecho');
$yesnoline = Term::ReadLine->new("foo");
$pass = $yesnoline->readline();
printf "$pass";
ReadMode('restore'); 
```

然后将其称为`[result status] = perl('my_perl.pl')`. 在 Linux 上运行良好。在 Windows 上：

> 资源=
> 
> GetConsoleMode 失败，LastError=|6| 在 ReadKey.pm 第 264 行。
> 
> 斯塔=
> 
> ```
>  9 
> ```

到目前为止，我的搜索表明这是与 Windows 的 perl 打包版本有关的问题。

知道上述方法中发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T09:46:17.007

我建议您`ispc`通过创建 MATLAB GUI 或类似的东西来检测 Windows 安装 ()，并以不同于类 Unix 系统的方式处理它们。

这是使用MATLAB 内部的**.NET Windows 窗体的一种可能的 Windows 解决方案：**

```
function pass = getPasswordNET()
    %# password return value
    pass = '';

    %# hidden figure used to wait for button press
    fig = figure('Visible','off', ...
        'IntegerHandle','off', 'HandleVisibility','off');

    %# create and show the Windows Forms GUI
    [handles,lh] = InitializeComponents();
    handles.frm.Show();

    %# block execution until figure is closed
    waitfor(fig)

    %# remove the listeners
    delete(lh);

    return;

    %# create GUI
    function [handles,lh] = InitializeComponents()
        %# import assembly
        NET.addAssembly('System.Windows.Forms');

        %# form
        frm = System.Windows.Forms.Form();
        frm.SuspendLayout();

        %# textbox
        tb = System.Windows.Forms.TextBox();
        tb.Dock = System.Windows.Forms.DockStyle.Fill;
        tb.Text = '';
        tb.PasswordChar = '*';
        tb.MaxLength = 14;

        %# button
        bt = System.Windows.Forms.Button();
        bt.Dock = System.Windows.Forms.DockStyle.Bottom;
        bt.Text = 'Submit';

        %# setup the form
        frm.Text = 'Password';
        frm.ClientSize = System.Drawing.Size(250, 40);
        frm.Controls.Add(tb);
        frm.Controls.Add(bt);
        frm.ResumeLayout(false);
        frm.PerformLayout();

        %# add event listeners
        lh(1) = addlistener(bt, 'Click', @onClick);
        lh(2) = addlistener(frm, 'FormClosing', @onClose);

        %# return handles structure
        handles = struct('frm',frm, 'tb',tb, 'bt',bt);
    end

    %# event handlers
    function onClick(~,~)
        %# get password from textbox
        pass = char(handles.tb.Text);

        %# close form
        handles.frm.Close();
    end
    function onClose(~,~)
        %# delete hidden figure (to unblock and return from function)
        close(fig)
    end
end 
```

我在我的机器上测试了上述内容，即使在无头模式下启动 MATLAB 时它也能正常工作：

```
matlab.exe -nodesktop -noFigureWindows 
```

然后将其称为：

```
>> pass = getPasswordNET()
pass =
secret_password 
```

![截屏](../Images/2bb15f7a7c2b606ddd3f12b4b6570e8e.png)

使用 Swing 的[JPasswordField在](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/PasswordDemoProject/src/components/PasswordDemo.java)[Java](http://docs.oracle.com/javase/tutorial/uiswing/components/passwordfield.html)中做类似的事情应该很简单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T18:57:19.693

**Java 获取密码**

我还没有设法让 getPassword 方法将控制台返回到正常状态 - 我假设你的代码看起来像：

```
import java.lang.*
cs = System.console()
a = cs.readPassword() 
```

你能证实这一点吗？

**Python解决方案**

如果解决方案必须是多平台的，*并且您不介意 Python 是依赖*项，我建议编写一个非常简单的 Python 脚本并将其与 Matlab 系统调用一起使用，例如

文件：usergetpass.py

```
import getpass
import os
os.sys.stdout.write(getpass.getpass()) 
```

然后在matlab中

```
[status,pass] = system('python usergetpass.py'); 
```

然后，您将不得不（简单地）解析`pass`，实际密码包含在`pass`.

因此，您可以将上述内容放入您自己的迷你 matlab 函数中，

```
function out = getpass()
[status, pass] = system('python usergetpass.py');
out = pass(13:end-1); 
```

注意：我可以使用它，因为密码总是出现在 pass 变量中。

# objective-c - 十进制数的幂

> ID：11907560
> 
> 赞同：-3
> 
> 时间：2012-08-10T18:50:17.747
> 
> 标签：objective-c, ios, cocoa-touch

> **可能重复：**
> [在 Xcode 中添加较大的 Power 值](https://stackoverflow.com/questions/11877714/adding-large-power-values-in-xcode)

我是 Objective C (iOS) 的新手。我想找到十进制数的幂，但是 pow (x,y) 方法会使程序崩溃。似乎这种方法不适用于十进制数。我想在文本字段 6.6428 x 10^ -21 中显示这个数字。我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:51:57.317

如果您使用小数（浮点数），则需要使用 powf()

# postgresql - 在 PL/pgSQL 中声明记录的元组结构

> ID：11907563
> 
> 赞同：4
> 
> 时间：2012-08-10T18:50:36.420
> 
> 标签：postgresql, plpgsql, postgresql-9.1

我在 PostgreSQL 文档中找不到任何内容来说明如何声明记录或行，同时声明元组结构。如果你没有定义你的元组结构，你会得到错误“尚未分配记录的元组结构是不确定的”。

这就是我现在正在做的事情，效果很好，但必须有更好的方法来做到这一点。

```
CREATE OR REPLACE FUNCTION my_func()
  RETURNS TABLE (
    "a" integer,
    "b" varchar
  ) AS $$
DECLARE r record;
BEGIN

CREATE TEMP TABLE tmp_t (
    "a" integer,
    "b" varchar
);
-- Define the tuple structure of r by SELECTing an empty row into it.
-- Is there a more straight-forward way of doing this?
SELECT * INTO r
FROM tmp_t;

-- Now I can assign values to the record.
r.a := at.something FROM "another_table" at
       WHERE at.some_id = 1;

-- A related question is - how do I return the single record 'r' from
-- this function?
-- This works:
RETURN QUERY
SELECT * FROM tmp_t;

-- But this doesn't:
RETURN r;
-- ERROR:  RETURN cannot have a parameter in function returning set

END; $$ LANGUAGE plpgsql; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-11T04:39:54.853

您将[返回`SETOF`值的语法与返回单行或值](http://www.postgresql.org/docs/current/interactive/plpgsql-control-structures.html#PLPGSQL-STATEMENTS-RETURNING)的语法混合在一起。

> - 一个相关的问题是 - 我如何从

当你用 声明一个函数时`RETURNS TABLE`，你必须`RETURN NEXT`在主体中使用来返回一行（或标量值）。如果你想使用一个`record`变量，它**必须匹配**返回类型。请参阅下面的代码示例。

### 返回单个值或行

如果您只想返回单行，则*不需要*未定义类型的记录。@Kevin 已经展示了两种方法。我将添加一个带有`OUT`参数的简化版本：

```
CREATE OR REPLACE FUNCTION my_func(OUT a integer, OUT b text)
   AS
$func$
BEGIN
   a := ...;
   b := ...;
END
$func$ LANGUAGE plpgsql; 
```

您甚至不需要`RETURN;`在函数体中添加，声明`OUT`参数的值将在函数末尾自动返回 -`NULL`对于任何尚未分配的参数。
而且您不需要声明`RETURNS RECORD`，因为从`OUT`参数中已经很清楚了。

### 返回一组行

如果您实际上想要返回*多*行（包括 0 或 1 行的可能性），您可以将返回类型定义为`RETURNS`...

*   `SETOF some_type`，其中`some_type`可以是任何已注册的标量或复合类型。

*   `TABLE (col1 type1, col2 type2)`- ad-hoc 行类型定义。

*   `SETOF record`加上`OUT`参数来定义列名和类型。
    100% 相当于`RETURNS TABLE`。

*   `SETOF record`无需进一步定义。但是返回的行是**未定义**的，您需要在每次调用时包含一个列定义列表（参见示例）。

[关于记录类型的手册](http://www.postgresql.org/docs/current/interactive/plpgsql-declarations.html#PLPGSQL-DECLARATION-RECORDS)：

> 记录变量类似于行类型变量，但它们**没有预定义的结构。**它们采用在 SELECT 或 FOR 命令期间分配的行的实际行结构。

还有更多，*请阅读*手册。

您*可以*使用记录变量而不分配已定义的类型，甚至*可以*返回此类未定义的记录：

```
CREATE OR REPLACE FUNCTION my_func()
  RETURNS SETOF record AS
$func$
DECLARE
    r record;
BEGIN
    r := (1::int, 'foo'::text); RETURN NEXT r; -- works with undefined record
    r := (2::int, 'bar'::text); RETURN NEXT r;
END
$func$ LANGUAGE plpgsql; 
```

称呼：

```
SELECT * FROM my_func() AS x(a int, b text); 
```

但这**非常笨拙**，因为您必须在每次调用时提供列定义列表。它通常可以用更优雅的东西代替：

*   如果您在创建函数时知道类型，请立即（`RETURNS TABLE`或朋友）声明它。

```
CREATE OR REPLACE FUNCTION my_func()
  RETURNS SETOF tbl_or_type AS
$func$
DECLARE
    r tbl_or_type;
BEGIN
    SELECT INTO tbl_or_type  * FROM tbl WHERE id = 10;
    RETURN NEXT r;  -- type matches

    SELECT INTO tbl_or_type  * FROM tbl WHERE id = 12;
    RETURN NEXT r;

    -- Or simpler:
    RETURN QUERY
    SELECT * FROM tbl WHERE id = 14;
END
$func$ LANGUAGE plpgsql; 
```

*   如果您知道*函数调用时*的类型，还有更优雅的使用[多态类型](http://www.postgresql.org/docs/current/interactive/extend-type-system.html#EXTEND-TYPES-POLYMORPHIC)的方法：
    [重构 PL/pgSQL 函数以返回各种 SELECT 查询的输出](https://stackoverflow.com/questions/11740256/refactor-a-pl-pgsql-function-to-return-the-output-of-various-select-queries/11751557#11751557)

您的问题不清楚您到底需要什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T19:42:55.023

可能有一些方法可以避免显式类型声明，但我能想到的最好的方法是：

```
CREATE TYPE my_func_return AS (
    a integer,
    b varchar
  );

CREATE OR REPLACE FUNCTION my_func()
  RETURNS my_func_return AS $$
DECLARE
  r my_func_return;
BEGIN
  SELECT 1, 'one' INTO r.a, r.b;
  RETURN r;
END; $$ LANGUAGE plpgsql; 
```

哦，我差点忘了最简单的方法：

```
CREATE OR REPLACE FUNCTION my_func2(out a int, out b text)
  RETURNS RECORD AS $$
BEGIN
  SELECT 1, 'one' INTO a, b;
  RETURN;
END; $$ LANGUAGE plpgsql; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T09:57:41.223

`OUT`使用参数比使用记录要容易得多。如果迭代地构建一组记录（表），请使用`RETURN NEXT`. 如果从查询生成，请使用`RETURN QUERY`. 看：

[https://stackoverflow.com/a/955289/398670](https://stackoverflow.com/a/955289/398670)

和：

[http://www.postgresql.org/docs/current/static/plpgsql-declarations.html](http://www.postgresql.org/docs/current/static/plpgsql-declarations.html) [http://www.postgresql.org/docs/current/static/sql-createfunction.html](http://www.postgresql.org/docs/current/static/sql-createfunction.html) [http://www.postgresonline。 com/journal/archives/129-Use-of-OUT-and-INOUT-Parameters.html](http://www.postgresonline.com/journal/archives/129-Use-of-OUT-and-INOUT-Parameters.html)

思考：

```
CREATE OR REPLACE FUNCTION my_func(OUT a integer, OUT b varchar) RETURNS SETOF RECORD AS $$
BEGIN
    -- Assign a and b, RETURN NEXT, repeat. when done, RETURN.
END;
$$ LANGUAGE 'plpgsql'; 
```

# javascript - 使用 javascript 强制图像缓存

> ID：11907568
> 
> 赞同：9
> 
> 时间：2012-08-10T18:51:04.720
> 
> 标签：javascript, jquery, caching, clone

我正在尝试克隆随机生成的图像。尽管我使用的是完全相同的 url，但加载了不同的图像。（在 chrome 和 firefox 中测试）

我无法更改图像服务器，所以我正在寻找一个纯 javascript/jQuery 解决方案。

你如何强制浏览器重用第一张图片？

火狐： ![火狐演示](../Images/4e8fbd0a9b223539de6b06e0ad5d48dc.png)

铬合金： ![铬演示](../Images/a6c26340bfa2efefdd9ee0949d4644c4.png)

自己试试（可能要重载几次才能看到）

代码：http: [//jsfiddle.net/TRUBK/](http://jsfiddle.net/TRUbK/)

```
$("<img/>").attr('src', img_src)
$("<div/>").css('background', background)
$("#source").clone() 
```

演示：http: [//jsfiddle.net/TRUBK/embedded/result/](http://jsfiddle.net/TRUbK/embedded/result/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T09:14:10.273

如果图像服务器不是您的，您无法更改它，但是您可以在自己的服务器上简单地编写一些东西来为您处理它。

首先用您选择的服务器端语言（PHP、ASP.NET 等）编写一些内容：

1.  点击[http://a.random-image.net/handler.aspx?username=chaosdragon&randomizername=goat&random=292.3402&fromrandomrandomizer=yes](http://a.random-image.net/handler.aspx?username=chaosdragon&randomizername=goat&random=292.3402&fromrandomrandomizer=yes)并下载它。您可以通过两种方式之一生成密钥。要么得到整个事情的散列（MD5应该没问题，它不是与安全相关的用途，所以担心它现在太弱不适用）。或获取图像的大小 - 后者可能有一些重复，但生成速度更快。
2.  如果图像尚未存储，请将其保存在一个位置，使用该键作为文件名的一部分，并将内容类型作为另一部分（以防 JPEG 和 PNG 混合使用）
3.  使用带有 URI 的 XML 或 JSON 响应响应下一阶段。

在您的客户端代码中，您通过 XmlHttpRequest 访问该 URI 以获取与您的图像一起使用的 URI。如果您想要一个新的随机图像，请再次点击第一个 URI，如果您想要两个或多个位置的相同图像，请使用相同的结果。

该 URI 命中类似于`http://yourserver/storedRandImage?id=XXX`XXX 是键的位置（如上所述的哈希或大小）。该处理程序查找图像的存储副本，并将文件发送到响应流中，并具有正确的内容类型。

从技术上讲，这一切都非常简单，但可能的问题是合法的，因为您将图像的副本存储在另一台服务器上，您可能不再符合与发送随机图像的服务协议的条款。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T18:57:55.450

从您的随机图像生成器脚本发送的标头包含一个`Cache-Control: max-age=0`声明，该声明本质上是告诉浏览器不要缓存图像。

如果要缓存结果，则需要修改图像生成器脚本/服务器以发送正确的缓存标头。

您还需要确保 URL 保持不变（我没有查看这方面的内容，因为传递了很多参数）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T08:42:19.633

首先，您可以“强制”网络上的任何内容。如果您需要强制执行，那么 Web 开发不适合您。

您可以尝试的是使用[`canvas`元素](https://developer.mozilla.org/en-US/docs/HTML/Element/canvas)来复制图像。有关示例，请参见[https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Canvas_tutorial/Using_images](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Canvas_tutorial/Using_images)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T12:09:00.383

似乎有两种解决方法：

1.  如果您使用 Canvas 方法，请查看是否可以将图像加载到 Canvas 本身，以便您可以直接操作图像数据，而不是对图像进行第二次 http 请求。您可以将图像数据直接馈送到第二个画布上。
2.  如果您要构建代理，您可以让代理删除 No-Cache 指令，以便浏览器的后续请求使用缓存（此处不保证 - 取决于浏览器/用户设置）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-22T12:01:11.550

您可以尝试保存图像的 base64 表示。

将图像加载到隐藏的 div/canvas 中，然后将其转换为 base64。（我不确定是否可以隐藏画布，也不确定是否可以使用 html4 标签转换 img）现在您可以将“字符串化”图像存储在 cookie 中，并无限次使用它......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-10T19:09:02.790

告诉它停止获取随机图像，当我添加第三个替换调用时，它似乎可以按照您想要的方式工作：

```
// Get the canvas element.
var background = ($("#test").css('background-image')),
img_src = background.replace(/^.+\('?"?/, '').replace(/'?"?\).*$/, '').replace(/&fromrandomrandomizer=yes/,'') 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-10T19:17:52.453

尝试：

```
var myImg = new Image();
myImg.src = img_src; 
```

然后将“myImg”附加到您想要的位置：

```
$(document).append(myImg); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-21T21:18:00.387

我用你的提琴手脚本做了这个，每次都得到相同的图像

```
#test {
background:url(http://a.random-image.net.nyud.net/handler.aspx?username=chaosdragon&randomizername=goat&random=292.3402&fromrandomrandomizer=yes);
width: 150px;
height: 150px; 
```

}

注意域名后面的.nyud.net。

# python - python wnck.window_get() 从 conlose 工作，但不能从模块工作

> ID：11907569
> 
> 赞同：1
> 
> 时间：2012-08-10T18:51:09.143
> 
> 标签：python, window, wnck

如果我在刚刚打开的 python 控制台中键入下面的代码，但如果我从文件中运行它则不行（此文件中没有其他代码）

```
import wnck
screen = wnck.screen_get_default()
wnck.window_get(58720313L).activate(9999999999) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:25:47.163

这是因为队列中有事件；StackOverflow 问题[python wnck 在 pdb.set_trace()](https://stackoverflow.com/questions/5352027/python-wnck-not-returning-any-data-until-after-a-pdb-set-trace)解释这一点之前不返回任何数据。您只需要等待窗口列表填满即可；当它从控制台运行时，我相信 Python 会清空队列，但是当你运行一个文件时，你必须运行 gtk 迭代函数。

# actionscript-3 - AS3：如果已经在播放，如何不播放声音？

> ID：11907571
> 
> 赞同：0
> 
> 时间：2012-08-10T18:51:18.580
> 
> 标签：actionscript-3

基本上，当在 main.swf 中单击链接时，会加载外部 swf。每个 swf 都有一个后退按钮，可让您返回到 main.swf。问题是，当 main.swf 被带回时，它会再次开始播放音乐，并重新配音。我什至尝试链接回没有音频代码的 main.swf 版本，但没有运气。

谷歌搜索后，此代码应该检查是否正在播放声音。它给了我错误。

[检查 SoundChannel 是否正在播放声音](https://stackoverflow.com/questions/194150/check-if-soundchannel-is-playing-sound)

谢谢！

# cakephp - CakePHP - $this->Auth->login() 的奇怪行为 - CakePHP 2.2.1

> ID：11907572
> 
> 赞同：0
> 
> 时间：2012-08-10T18:51:26.927
> 
> 标签：cakephp, cakephp-2.1

我已经在本地机器（XAMPP）应用程序上创建了登录并且效果很好。

现在，当我在服务器上部署它时，$this->Auth->login() 返回 false。

我有`debug($this->request->data)`，和本地的一样。

我已经在 phpmyadmin 上的 sql_dump 上测试了 QUERY，它很完美（它找到了一个用户），但它仍然没有登录。（没有用户在`$this->Auth->user();`）。

你认为问题可能是什么？

我已经尝试改变`session.cookie_path`了，但仍然没有......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:17:33.163

如果您的 /Config/core.php 中的 Security.salt 在生产和开发服务器上是相同的。它可能与会话有关。

尝试将 CakePHP 会话存储（Session.defaults）更改为 cake 而不是 php。

# java - Oracle 和休眠之间的 Java 数据类型不匹配

> ID：11907573
> 
> 赞同：0
> 
> 时间：2012-08-10T18:51:34.237
> 
> 标签：java, oracle, hibernate, oracle10g, hibernate-mapping

我的 Java 应用程序使用 Oracle 10g 作为数据库的休眠。我遇到了一个问题，无法继续，我需要你的帮助。以下是我面临的问题。

我的一个 Oracle 表中有一个列，其数据类型为`Varchar2(1 byte)`. 我想知道我需要在我的 pojo 类中使用的正确数据类型。同样在休眠映射文件中，同一属性的数据类型应该是什么。当我运行文件时，hibernate 不断给出错误，例如无法进行转换。下面是我的pojo和`.hbm`文件

```
public class destination implements Serializable{

    private String configId;        
    private String isCurrent;        
    //other properties and getter, setters

} 
```

目的地.hbm.xml

```
<class name="com.testing" table="configuration">
    <id name="configID" type="java.lang.Integer">
        <column name="configuration_id" />
        <generator class="identity" />
    </id>
   <property name="isCurrent" type="Not-SURE">
        <column name="is_current" not-null="true" />
    </property> 
```

我正在谈论的专栏是`isCurrent`pojo 和`.hbm.xml`文件中的属性。`Varchar2(1 byte)`它在分贝中定义。我不确定数据类型并将其标记为 a`String`但问题仍然存在。

我已经搜索了网络，但没有找到任何适当的解决方案来解决这个问题。

你能帮帮我吗，因为它真的很吃我的头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:04:10.213

我将专注于您在类中将其声明为 String 但在 xml 中声明为 Integer 的 configId。

```
<id name="configID" type="java.lang.Integer"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T22:45:11.597

我猜你想在记录中存储当前标志。在这种情况下，你可以做

```
public class destination implements Serializable{

    private String configId;        
    private boolean current;        

    public boolean isCurrent() {
        return current;
    } 

} 
```

和 hbm 映射之类的

```
<property name="current" type="yes_no">
        <column name="is_current" not-null="true" />
    </property> 
```

# c++ - 声明的字段 void / 结构或变量未在此范围内声明

> ID：11907574
> 
> 赞同：1
> 
> 时间：2012-08-10T18:51:36.280
> 
> 标签：c++

我一直在自学一些使用 SFML 来创建窗口/处理输入等的 OpenGL。我的 main.cpp 开始变得有点笨拙，所以我决定开始拆分我的代码。我创建了一个 4X_vertex.h 和一个 4X_vertex.cpp（4X 是项目的名称），并将相关的函数和结构从我的主文件中移出并放入这些文件中。但是，当我编译时，我得到了错误

```
variable or field "drawVertexArray" declared void 
```

根据我的研究，这似乎只是与下一个错误有关的无用信息，即

```
vertex was not declared in this scope 
```

这是我的列表中包含的内容`main.cpp`：

```
#include <iostream>
#include <fstream>
#include <string>
#include <SFML/System.hpp>
#include <SFML/Window.hpp>
#include <SFML/Graphics.hpp>
#include "4x_vertex.h"
#include "4x_constants.h" 
```

我的`4X_vertex.h`：

```
#ifndef _4X_VERT_H
#define _4X_VERT_H
struct vertex{
        GLfloat x,y,z;
        GLfloat r,g,b;
};
void drawVertexArray(vertex v[]);
vertex* loadVertexData();
#include "4X_vertex.cpp"
#endif 
```

这部分`4X_vertex.cpp`给我带来了麻烦：

```
using namespace std;

void drawVertexArray(vertex v[]){
    ... openGL stuff...
} 
```

在我开始移动它之前，所有这些都起作用了，所以我假设包含的东西有些奇怪，或者其他什么。非常感谢所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T20:18:12.843

只是一些指针。最佳实践是将您的项目分成多个源文件。通常，您会在主源文件的文件名中使用“main”一词（如果适用）。所以你可能有类似...

```
main.cpp
feature1.cpp
feature2.cpp
tools.cpp 
```

对于您的其他文件，您通常会在它们实现的类之后命名它们。您通常会同时拥有 .h 和 .cpp。将您的声明放在 .h 中，并且您在 .cpp 中的定义使 .cpp 包含 .h。那可能会给你...

```
main.cpp
feature1.cpp    feature1.h
feature2.cpp    feature2.h
tools.cpp       tools.h 
```

引用您的类之一的模块也包括它的 .h。所以，main.cpp 可能看起来像......

```
#include <iostream>
#include "feature1.h"
#include "feature2.h"

using namespace std;
void main(int argc, char **argv)
{ ...
    cout << "Done!\n";
} 
```

而 feature1.cpp 可能是......

```
#include "feature1.h"
#include "tools.h"
feature1_class::feature1_class() { ... }
void feature1_class::AUsefulFeature(int val) { ... }
//etc. 
```

...其中 feature1.h 声明了类、定义的常量等 fg,

```
#ifndef FEATURE1
#define FEATURE1
#include "tools.h"
class feature1_class
{
public:
    feature1_class();
    void AUsefulFeature(int val);
    int APublicMember;
};
#endif 
```

您可能已经注意到，tools.h 实际上在 feature1.cpp 中包含了两次。它包含在 feature1.h 中，并明确地包含在 .cpp 文件中。如果您在 .h 文件中使用以下模式...

```
#ifndef TOOLS_H
#define TOOLS_H
//... do your thing
#endif 
```

...那么多个包含不应该给您带来任何问题。而且当你重构代码时，不必担心清理的事情就更少了。

如果到目前为止您一直在为所有源代码使用单个文件，那么您可能一直在编译...

```
cl main.cpp 
```

这为您提供了 .exe 和 .obj 以及其他文件。但是涉及到多个源文件，它并没有太大的不同。你可以说...

```
cl main.cpp feature1.cpp feature2.cpp tools.cpp 
```

还有很多东西要学，但这是一个开始，可以帮助你更好地组织你的编码思想。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T20:33:15.967

您需要`#include "4X_vertex.h"`在文件的顶部`4X_vertex.cpp`。这将允许`.cpp`文件查看`struct vertex`.

通常，每个文件（.h 和 .cpp 文件）都需要`#include`包含该文件中使用的项目声明的任何头文件。这包括标准头文件和 OpenGL 头文件，以及您的自定义头文件。

# colors - 隐藏在样式表中的文本阴影颜色

> ID：11907575
> 
> 赞同：0
> 
> 时间：2012-08-10T18:51:38.200
> 
> 标签：colors, stylesheet, css

请注意此样式表：http: [//jsfiddle.net/VjhJ4/12/](http://jsfiddle.net/VjhJ4/12/)

如果将鼠标悬停在锚定菜单上，您会看到文本有灰色/白色阴影。**我在哪里可以更改阴影颜色？**我到处搜索样式表都没有成功，但肯定它一定藏在某个地方。

我也会在这里粘贴样式表（尽管我建议检查小提琴）：

```
/*------------------------------------------------*/
/*-----------------[RESET]------------------------*/
/*------------------------------------------------*/
.dd12:hover{
    background:#f00 !important;
}
.dd13:hover{
    background:green !important;
}
.dd14:hover{
    background:blue!important;
}

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, font, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend { margin: 0; padding: 0; border: 0; outline: 0; font-size: 100%; vertical-align: baseline; background: transparent; }

body { line-height: 1; }
ol, ul { list-style: none; }
blockquote, q {    quotes: none; }

blockquote:before, blockquote:after,q:before, q:after { content: ''; content: none; }

/* remember to define focus styles! */
:focus { outline: 0; }

/* remember to highlight inserts somehow! */
ins { text-decoration: none; }
del { text-decoration: line-through; }

/* tables still need 'cellspacing="0"' in the markup */
table { border-collapse: collapse; border-spacing: 0; }

/*------------------------------------------------*/
/*-----------------[BASIC STYLES]-----------------*/
/*------------------------------------------------*/

body { line-height: 20px; font-family:'Droid Sans',Arial,Verdana,sans-serif; font-size: 12px; color: #48423f; background: url(images/header-bg.png); text-shadow: 1px 1px 0 #fff; }

a { text-decoration: none; color: #00b7f3; }
a:hover { text-decoration: underline; }
.clear { clear: both; }
.ui-tabs-hide { display: none; }
br.clear { margin: 0px; padding: 0px; }

h1, h2, h3, h4, h5, h6 { padding-bottom: 5px; color: #48423F; letter-spacing: -1px; line-height: 1em; font-weight: normal; }
h1 a, h2 a, h3 a, h4 a, h5 a, h6 a { color: #48423F; }
h1 { font-size: 30px; }
h2 { font-size: 24px; }
h3 { font-size: 22px; }
h4 { font-size: 18px; }
h5 { font-size: 16px; }
h6 { font-size: 14px; }
p { padding-bottom: 10px; line-height: 24px; }
strong { font-weight: bold; color: #1c1c1c; }
cite, em, i { font-style: italic; }
pre, code { font-family: Courier New, monospace; margin-bottom: 10px; }
ins { text-decoration: none; }
sup, sub { height: 0; line-height: 1; position: relative; vertical-align: baseline; }
sup { bottom: 0.8em; }
sub { top: 0.3em; }
dl { margin: 0 0 1.5em 0; }
dl dt { font-weight: bold; }
dd  { margin-left: 1.5em;}
blockquote  { margin: 1.5em; padding: 1em; color: #666666; background: #e6e6e6; font-style: italic; border: 1px solid #dcdcdc; }
    blockquote p { padding-bottom: 0px; }

input[type=text],input.text, input.title, textarea, select { background-color:#fff; border:1px solid #bbb; padding: 2px; color: #4e4e4e; }
input[type=text]:focus, input.text:focus, input.title:focus, textarea:focus, select:focus { border-color:#2D3940; color: #3e3e3e; }
input[type=text], input.text, input.title, textarea, select { margin:0.5em 0; }
textarea { padding: 4px; }

img#about-image { float: left; margin: 3px 8px 8px 0px; }

.clearfix:after { visibility: hidden; display: block; font-size: 0; content: " "; clear: both; height: 0; }
* html .clearfix             { zoom: 1; } /* IE6 */
*:first-child+html .clearfix { zoom: 1; } /* IE7 */

/*------------------------------------------------*/
/*---------------[MAIN LAYOUT INFO]---------------*/
/*------------------------------------------------*/

#top-header { border-bottom: 2px solid #ffffff; position: relative; background: url(images/header-bg.png); }
    #top-header .container { min-height: 46px; }
    #top-shadow { background: url(images/top-shadow.png) repeat-x; width: 100%; position: absolute; top: 0px; left: 0px; height: 7px; }
    #bottom-shadow { background: url(images/bottom-shadow.png) repeat-x; width: 100%; position: absolute; bottom: 0px; left: 0px; height: 4px; }
    .container { text-align: left; margin: 0 auto; width: 960px; position: relative; }
        #content { margin-bottom: 39px; }
            ul#top-menu { float: left; padding-left: 36px; }
            #search-form { float: right; background: url(images/search-bg.png) no-repeat; width: 167px; height: 27px; padding-right: 48px; margin-top: 11px; }
                #search-form #searchinput { background: none; border: none; float: left; margin: 5px 7px 0 5px; width: 116px; padding-left: 9px; font-size: 11px; color: #6f6967; }
                #search-form #searchsubmit { margin-top: 7px; margin-right: 7px; }
#content-area { background: #fafcfc url(images/content-area-bg.png); border-bottom: 1px solid #ffffff; }        

        #top-stitch { background: url(images/top-stich.png) repeat-x bottom left; height: 7px; }
        #content-area .container { padding-top: 51px; }
            #logo-area { text-align: center; position: relative; padding-bottom: 37px; }
                p#slogan { font-size: 15px; font-family: 'Kreon', Arial, sans-serif; color: #9aa4a4; text-transform: uppercase; text-shadow: 1px 1px 1px #ffffff; }
            #content { -moz-border-radius: 10px; -webkit-border-radius: 10px; border-radius: 10px; border: 1px solid #e2e5e5; }

                #content-shadow { background: url(images/content-main-shadow.png) repeat-y; }
                    #content-top-shadow { background: url(images/content-top-shadow.png) repeat-x 0 1px; }
                        #content-bottom-shadow { background: url(images/content-bottom-shadow.png) repeat-x bottom left; }

                #inner-border { border: 1px solid #ffffff; background: #fff url(images/content-bg.png); /*height: 100%;*/ }
                    #inner-border, #content-shadow, #content-top-shadow, #content-bottom-shadow { -moz-border-radius: 10px; -webkit-border-radius: 10px; border-radius: 10px; }

                    #second-menu { background: url(images/menu-bottom-bg.png) repeat-x bottom left; }    
                        ul#secondary-menu { padding-left: 29px; margin-top:-1px; }
                    #controllers { margin-bottom: 27px; margin-left: 23px; position: relative; }
                        #controllers #active_item { background: url(images/featured-arrow.png) no-repeat; position: absolute; top: -30px; left: 36px; width: 20px; height: 10px; z-index: 100; }
                        .controller { display:block; float:left; position:relative; margin-right: 21px; }
                            .controller a { display: block; }
                            .controller a.active { -moz-box-shadow: 0 0 6px 2px rgba(0,0,0,0.4); -webkit-box-shadow: 0 0 6px 2px rgba(0,0,0,0.4); box-shadow: 0 0 6px 2px rgba(0,0,0,0.4); }
                                .controller span.overlay { background:url(images/controller-overlay.png) no-repeat; display:block; height:54px; left:0px; position:absolute; top:0px; width:95px; }
                    .recent-from { float: left; width: 317px; }
                        .recent-middle { width: 318px !important; }
                        .recent-last { width: 321px !important; }
                            .recent-last .recent-content { background: none !important; }

                        .main-title { background:url(images/title-bg.png) repeat-x; height: 42px; line-height: 42px; font-size: 13px !important; text-transform: uppercase; color: #48423f; text-shadow: 1px 1px 1px #ffffff; font-weight: bold; text-align: center; padding-bottom: 0; font-family: 'Droid Sans',Arial,Verdana,sans-serif !important; }
                            #comment-wrap .main-title { margin: 0 -37px 12px -39px; }
                        .recent-content { background:url(images/recent-content-bg.png) repeat-y top right;margin-top: -1px; padding: 29px 32px 38px 35px; }
                        .last { background: none; }
                            .block-post { margin-bottom: 7px; }
                                .block-post .thumb { display:block; float:left; position:relative; margin-right: 17px; }
                                    .block-post .thumb span.overlay { background:url(images/post-overlay.png) no-repeat; display:block; height:41px; left:0px; position:absolute; top:0px; width:41px; }
                                .block-post h3.title { font-family: 'Kreon', Arial, sans-serif; font-size: 16px; text-shadow: 1px 1px 1px #ffffff; }    
                                    .block-post h3.title a { text-decoration: none; color: #48423f; }
                                .block-post     p.meta-info { color: #b8c2c2; text-shadow: 1px 1px 1px #ffffff; margin-top: -4px; }
                                    .block-post     p.meta-info a { text-decoration: none; color: #8c9c9c; }
                                        .block-post     p.meta-info a:hover { color: #444c4c; }
                            a.more { background:url(images/more.png) no-repeat right bottom; color:#8c9c9c; display:block; text-shadow: 1px 1px 1px #ffffff; padding-right:6px; text-decoration:none; height: 35px; line-height: 35px; margin-left: 16%; margin-right: 16%; text-align: center;}
                            a.more:hover { color:#111111; }
                                a.more span { background:url(images/more.png) no-repeat; display:block; height: 35px; padding-left: 6px; }
                            .post a.more { float: right; margin-left: 0; margin-right: 0; }
                                .post a.more span { padding-left: 12px; padding-right: 4px; }
                        #left-area { float: left; width: 634px; }
                        #sidebar { float: left; width: 322px; }
                            #entries { background:url(images/recent-content-bg.png) repeat-y 633px 0px; padding: 31px 38px 27px; }
                                .entry { margin-bottom: 10px; }
                                    .entry .thumb, .photostream .thumb { display:block; float:left; position:relative; margin-right: 14px; margin-top: 5px; }
                                    .photostream .thumb { margin-right: 9px; margin-bottom: 9px; }
                                        .entry .thumb span.overlay, .photostream .thumb span.overlay { background:url(images/entry-overlay.png) no-repeat; display:block; height:68px; left:0px; position:absolute; top:0px; width:68px; }
                                        .photostream .thumb span.overlay { background:url(images/entry-overlay.png) no-repeat !important; height:68px !important; width:68px !important; }
                                        .latest .thumb span.overlay, body.single .thumb span.overlay, body.page .thumb span.overlay { background:url(images/single-overlay.png) no-repeat !important; width: 201px; height: 201px; }
                                    .entry h3.title, h1.title { font-family: 'Kreon', Arial, sans-serif; font-size: 20px; text-shadow: 1px 1px 1px #ffffff; }
                                    h1.title { color: #48423f; font-size: 30px; }
                                        .entry h3.title a { text-decoration: none; color: #48423f; }
                                    .entry p.meta-info { color: #b8c2c2; text-shadow: 1px 1px 1px #ffffff; margin-top: -2px; margin-bottom: -8px; }
                                    .entry p.meta-info a { text-decoration: none; color: #8c9c9c; }
                                        .entry p.meta-info a:hover { color: #444c4c; }
                                    .entry div.post-meta { background: url(images/meta-separator.png) repeat-x; margin: 8px 0 14px; }
                                        .entry div.post-meta p.meta-info { background: url(images/meta-separator.png) repeat-x bottom left; margin-bottom: 10px; padding: 6px 0 8px; }

                                    .latest .thumb { display:block; float:left; position:relative; margin-right: 28px; }
                                        .latest .thumb span.overlay { background:url(images/entry-latest-overlay.png) no-repeat !important; display:block; height:131px; left:0px; position:absolute; top:0px; width:131px; }
                                    .latest h3.title { font-family: 'Kreon', Arial, sans-serif; font-size: 24px; text-shadow: 1px 1px 1px #ffffff; }    
                                        .latest h3.title a { text-decoration: none; color: #48423f; }
                                    .latest p.meta-info { color: #b8c2c2; text-shadow: 1px 1px 1px #ffffff; margin-top: -2px; margin-bottom: -8px; }
                                    .latest p.meta-info a { text-decoration: none; color: #8c9c9c; }
                                        .latest p.meta-info a:hover { color: #444c4c; }    
                                    a.read-more { float: right; color:#b8c2c2; text-shadow: 1px 1px 1px #ffffff; text-decoration:none; }
                                        a.read-more:hover { color:#111111; }    
                        .blog-entry { position: relative; width: 248px; padding-left: 32px; }
                            a.comments { background:url(images/comments-cloud.png) no-repeat; position: absolute; top: 0px; left: 0px; width: 37px; height: 33px; font-weight: bold; color:#48423f; text-decoration: none; padding: 4px 0; text-align: center; }
                            .blog-entry h4.title { padding-left: 25px; padding-right: 33px; font-family: 'Kreon', Arial, sans-serif; font-size: 16px; color:#48423f; text-shadow: 1px 1px 1px #ffffff; }
                            .blog-entry p.meta-info { padding-left: 25px; padding-right: 33px; color:#b8c2c2; text-shadow: 1px 1px 1px #ffffff; margin-top: -2px; }    
                                .blog-entry p.meta-info a { text-decoration: none; color: #8c9c9c; }
                                    .blog-entry p.meta-info a:hover { color: #444c4c; }
            #ad-720 { text-align: center; padding-bottom: 32px; }                                
        #bottom-stitch { background: url(images/top-stich.png) repeat-x bottom left; height: 7px; margin-bottom: 4px; }

        #breadcrumbs { background: url("images/title-bg.png") repeat-x; height: 42px; line-height: 42px; padding-left: 38px; }
            #breadcrumbs  a { color: #b9c5c5; }
            #breadcrumbs, #breadcrumbs  a:hover { color: #929e9e; text-decoration: none; }

        #main-content { position: relative; }    
            #index-top-shadow { background: url("images/content-top-shadow.png") repeat-x scroll 0 1px; position: absolute; top: 0; left: 0; height: 6px; width: 100%; border-top: 1px solid #dee0e0; }

        .post ul, .comment-content ul { list-style-type: disc; padding: 10px 0px 10px 20px; }
        .post ol, .comment-content ol { list-style-type: decimal; list-style-position: inside; padding: 10px 0px 10px 2px; }
            .post ul li ul, .post ul li ol, .comment-content ul li ul, .comment-content ul li ol { padding: 2px 0px 2px 20px; }
            .post ol li ul, .post ol li ol, .comment-content ol li ul, .comment-content ol li ol  { padding: 2px 0px 2px 35px; }                        

    .fullwidth #left-area { width: 100%; }
        .fullwidth #entries { background: none; }
    body.page h1.title { margin-bottom: 8px; }

    .ad-468 { text-align: center; margin-bottom: 30px; }
    .ad-bottom { margin-top: 35px; margin-bottom: 6px; }

/*------------------------------------------------*/
/*---------------[DROPDOWN MENU]------------------*/
/*------------------------------------------------*/

ul#top-menu li { padding-right: 2px; background: url(images/menu-bg.png) repeat-y top right; }
    ul#top-menu a { font-size: 11px; color: #ffffff; text-decoration: none; text-transform: uppercase; font-weight: bold; text-shadow: 1px 1px 1px rgba(0,0,0,0.7); padding: 16px 12px 10px; }
    ul#top-menu a:hover { color: #ebbe5e;}
    ul#top-menu > li.current_page_item > a { color: #ebbe5e !important; }

    ul#top-menu li ul, #mobile_menu { width: 170px !important; padding: 0; background: #161616 url(images/header-bg.png); top: 45px !important; -moz-box-shadow:3px 3px 7px 1px rgba(0, 0, 0, 0.1); -webkit-box-shadow: 3px 3px 7px 1px rgba(0, 0, 0, 0.1); box-shadow: 3px 3px 7px 1px rgba(0, 0, 0, 0.1); -moz-border-radius: 10px; -webkit-border-radius: 10px; border-radius: 10px; border-top-left-radius: 0px;-moz-border-radius-topleft: 0px; border-top-right-radius: 0px; -webkit-border-top-left-radius: 0px; -moz-border-radius-topright: 0px; -webkit-border-top-right-radius: 0px; z-index: 9999px; display: none; }
        ul#top-menu ul li, #mobile_menu li a { margin: 0 !important; padding: 10px 7px 10px 25px !important; background: url(images/top-menu-separator.png) repeat-x; }
        ul#top-menu ul li.first-item { background: none; }
            ul#top-menu ul li a, #mobile_menu a { padding: 0 !important; width: 138px; }

            ul#top-menu li:hover ul ul, ul#top-menu li.sfHover ul ul { top: -1px !important; left: 171px !important; -moz-border-radius: 8px; -webkit-border-radius: 8px; border-radius: 8px; }

    ul#top-menu li.menu-gradient { background: url("images/top-shadow.png") repeat-x; position: absolute; top: 0; left: 0; width: 202px; height: 7px !important; }

ul#secondary-menu li { padding-right: 2px; background: url(images/secondary-menu-bg.png) repeat-y top right; }
    ul#secondary-menu a { font-size: 13px; color: #48423f; text-decoration: none; text-transform: uppercase; font-weight: bold; padding: 22px 16px; }
    ul#secondary-menu a:hover { color: #000000;}
    ul#secondary-menu > li.current_page_item > a { color: #919e9e !important; }    

    ul#secondary-menu li ul, #category_mobile_menu { width: 360px !important; padding: 7px 0 10px; background: #fff url(images/content-bg.png); top: 55px !important; -moz-box-shadow:3px 3px 7px 1px rgba(0, 0, 0, 0.1); -webkit-box-shadow: 3px 3px 7px 1px rgba(0, 0, 0, 0.1); box-shadow: 3px 3px 7px 1px rgba(0, 0, 0, 0.1); -moz-border-radius: 10px; -webkit-border-radius: 10px; border-radius: 10px; border-top-left-radius: 0px;-moz-border-radius-topleft: 0px; border-top-right-radius: 0px; -webkit-border-top-left-radius: 0px; -moz-border-radius-topright: 0px; -webkit-border-top-right-radius: 0px; z-index: 9999px; display: none; }
        ul#secondary-menu ul li, #category_mobile_menu li a { margin: 0 !important; padding: 8px 0 8px 30px !important; width: 150px; float: left; }
            ul#secondary-menu ul li a, #category_mobile_menu a { padding: 0 !important; }

            ul#secondary-menu li:hover ul ul, ul#secondary-menu li.sfHover ul ul { top: -8px !important; left: 180px !important; -moz-border-radius: 8px; -webkit-border-radius: 8px; border-radius: 8px; }
            ul#secondary-menu ul li.even-item { background: none; } 
```

你能找到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:53:56.327

它就在这里——第一条规则`[BASIC STYLES]`

```
body { 
    line-height: 20px; 
    font-family:'Droid Sans',Arial,Verdana,sans-serif; 
    font-size: 12px; 
    color: #48423f; 
    background: url(images/header-bg.png); 
    text-shadow: 1px 1px 0 #fff; /* remove this */
} 
```

# c++ - Eclipse Juno Indexer Broken - 找不到任何 STL 标头

> ID：11907579
> 
> 赞同：3
> 
> 时间：2012-08-10T18:52:06.500
> 
> 标签：c++, eclipse, stl, indexing

自从更新到 Juno 以来，Eclipse 中的索引器似乎都在干杯。

首先，不推荐使用以下内容，因此我将其禁用：

```
 C/C++ Build -> Discovery Options -> Automate discovery of paths and symbols: Unchecked 
```

接下来，确保已启用：

```
 C/C++ General -> Preprocessor Include Paths, Macros, Etc -> Enable language settings providers for this project 
```

然后在 Providers 选项卡下，我检查所有内容。

进行索引重建，构建整个项目。

缺少每一个 STL 引用。例如，std::string、std::vector 报告为未解析的外部。是的，一切都可以正常编译并运行。在 Eclipse 中看到 10,000 个错误非常烦人。在 Android 开发方面，Eclipse 实际上认为它们是真正的错误并阻止部署到设备。

我在 Ubuntu 12.04 x64 上运行 Eclipse Juno。

如果我去右键单击项目->索引->搜索未解决的包含，我会得到一个很大的文件列表，所有这些文件都声称“未解决的包含：bits/c++config.h”

所以我`locate c++config.h`并添加了eclipse的路径包括，重建索引，没有变化。

我对此完全不屑一顾。Eclipse 从未让我如此沮丧！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:49:14.557

最简单的解决方案？使用靛蓝。我第一次下载 Juno 时，它似乎工作得很好。我试图添加一个插件（Java 脚本编辑器），但它死了。卸载/重新安装后，它可以工作，但找不到 stl（>7000 个问题），而且速度太慢，由于这两个原因无法使用。下载 Indigo 并重新开始营业。系统：Linux，64、6cpu，8GB 内存。

# java - 在Java中将空白行添加到二维数组

> ID：11907587
> 
> 赞同：2
> 
> 时间：2012-08-10T18:52:45.507
> 
> 标签：java, matrix, arraylist, multidimensional-array

假设我在 Java 中将以下二维数组设置为名为 myMap 的变量：

```
1 3 1
3 2 3
1 3 1 
```

我的程序的下一步是添加零的行和列，如下所示：

```
1 0 3 0 1
0 0 0 0 0
3 0 2 0 3
0 0 0 0 0
1 0 3 0 1 
```

基本上，我将零数组添加到先前行/列之间的空格中。然后我用适当的数字填充它们（与我的问题无关）并重复该过程（添加更多行/零列）有限次。

我的问题如下 - 在 Java 中最简单、最有效的方法是什么？我知道我可以创建一个新的二维数组并复制所有内容，但我觉得可能有更有效的方法来做到这一点。我的直觉说 2d ArrayList 可能是更好的选择。

另外，这很重要，当我的程序开始时，我知道这个二维数组的最大大小。另外，我不能指望我在这个例子中输入的数字是对称的（这些只是为了一个好的视觉参考而输入的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T20:44:35.627

这是 ArrayLists 的解决方案：（包括测试）

```
 int[][] ar = new int[][]
        {
        { 0, 1, 2 },
        { 3, 4, 5 },
        { 6, 7, 8 } };
    ArrayList<ArrayList<Integer>> a = new ArrayList<>(ar.length);
    ArrayList<Integer> blankLine = new ArrayList<>(ar.length * 2 - 1);
    for (int i = 0; i < ar.length * 2 - 1; i++)
    {
        blankLine.add(0);
    }

    for (int i = 0; i < ar.length; i++)
    {
        ArrayList<Integer> line = new ArrayList<>();
        for (int j = 0; j < ar[i].length; j++)
        {
            line.add(ar[i][j]);
            if (j != ar[i].length - 1)
                line.add(0);
        }
        a.add(line);
        if (i != ar.length - 1)
            a.add(blankLine);
    }

    for (ArrayList<Integer> b : a)
    {
        System.out.println(b);
    } 
```

输出：

```
[0, 0, 1, 0, 2]
[0, 0, 0, 0, 0]
[3, 0, 4, 0, 5]
[0, 0, 0, 0, 0]
[6, 0, 7, 0, 8] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-27T10:17:05.123

*   **算法**

    ```
    int[][] appendRows(int[][] bag, int[]... rows) {
        int[][] extendedBag = new int[bag.length + rows.length][];
        int i = 0;
        for (int[] row : bag)  { fillRow(extendedBag, row, i++); }
        for (int[] row : rows) { fillRow(extendedBag, row, i++); }
        return extendedBag;
    }

    // WHERE #fillRow(int[][], int[], int) =

    void fillRow(int[][] bag, int[] row, int i) {
        bag[i] = new int[row.length];
        System.arraycopy(row, 0, bag[i++], 0, row.length);
    } 
    ```

*   **演示**

    ```
    import java.util.Arrays;                                                              

    /** Utilities for 2D arrays. */
    public class Array2dUtils {

        public static void main(String[] args) {
            int[][] bag = new int[][] {
                    { 0 },
                    { 1, 1 },
                    { 2, 2, 2 }
            };
            int[] row1 = new int[] { 3, 3};
            int[] row2 = new int[] { 4 };

            int[][] biggerBag = appendRows(bag, row1, row2);

            System.out.println("Bag:\n" + toString(bag));
            System.out.println("Bigger Bag:\n" + toString(biggerBag));
        }

        /** Append one or more rows to a 2D array of integers. */
        public static int[][] appendRows(int[][] bag, int[]... rows) {
            int[][] extendedBag = new int[bag.length + rows.length][];

            int i = 0;
            for (int[] row : bag)  { fillRow(extendedBag, row, i++); }
            for (int[] row : rows) { fillRow(extendedBag, row, i++); }

            return extendedBag;
        }

        /* fill i-th item of the bag */
        private static void fillRow(int[][] bag, int[] row, int i) {
            bag[i] = new int[row.length];
            System.arraycopy(row, 0, bag[i++], 0, row.length);
        }

        /** Pretty-prints a 2D array of integers. */
        public static String toString(int[][] bag) {
            StringBuilder sb = new StringBuilder();
            for (int i = 0; i < bag.length; ++i) {
                sb.append(Arrays.toString(bag[i])).append("\n");
            }
            return sb.toString();
        }
    } 
    ```

* * *

```
$ javac Array2dUtils.java
$ java -cp "." Array2dUtils
Bag:
[0]
[1, 1]
[2, 2, 2]

Bigger Bag:
[0]
[1, 1]
[2, 2, 2]
[3, 3]
[4] 
```

# c# - Winforms Designer：当我复制\粘贴我的自定义控件时，需要克隆而不是指针

> ID：11907593
> 
> 赞同：0
> 
> 时间：2012-08-10T18:53:31.400
> 
> 标签：c#, winforms, clone, windows-forms-designer, cloneable

我有一个名为“MyControl”的控件，它有一个与之关联的对象，名为“SettingsObject”，它是一个包含大约 15-20 个属性的对象。

我遇到了一个问题，当我使用 Visual Studio 设计器复制\粘贴我的控件时，它不会复制“SettingsObject”（我正在使用 ICloneable，或尝试使用任何构造函数来创建新对象），它只需使用指向第一个控件中的对象的指针。

如何将我的“SettingsObject”复制到副本上，而不仅仅是指向原始文件。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:02:18.757

我只能猜测您正在寻找的是您自己制作的控件的自定义设计器。
查看有关此[的 MSDN 文章](http://msdn.microsoft.com/en-us/library/37899azc.aspx)。
您还可以查看Jeff Yates 很好地回答的[这个问题。](https://stackoverflow.com/questions/2229397/custom-designer-for-a-control)

祝你好运！

# c# - 为什么当我使用 stringify 发布 html 时会发生此 ajax 错误

> ID：11907594
> 
> 赞同：1
> 
> 时间：2012-08-10T18:53:36.420
> 
> 标签：c#, javascript, jquery, vb.net

当我尝试使用 stringify 在字符串中发布 html 时，为什么会发生此 ajax 错误。

看起来 stringify 会自动转义字符。

我必须逃跑吗？谢谢

```
var s;

//s = "my test test"; //if I post this it works

s = "my test test<br />"; //if I post this it break when I add the html

        var a = { "myText": JSON.stringify(s) };

        $.ajax({
            type: "POST",
            url: "test.aspx",
            data: a,
            success: function (data) {

                  //pass

            },
            error: function () {
            alert("error");

            }
        }); 
```

然后在页面加载时，我试图读取发布的数据

```
HttpContext.Current.Request.Form("myText") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:01:55.820

Try this:

```
var s = "my test test<br />",
a = { "myText": s };
a = JSON.stringify(a)
$.ajax({
    type: "POST",
    url: "test.aspx",
    data: a,
    success: function (data) {
          //pass
    },
    error: function () {
    alert("error");

    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T22:48:20.027

您不需要调用 JSON.stringify()。

JSON.stringify 旨在将对象序列化为 JSON 字符串，但是您将字符串传递给它，这是错误的。

只需通过 $.ajax() 调用传递对象：

```
var s = "my test test<br />";
.ajax({
    type: "POST",
    url: "test.aspx",
    data: {
        myText: s
    },
    success: function (data) {
          //pass
    },
    error: function () {
        alert("error");
    }
}); 
```

还有[jQuery 文档](http://api.jquery.com/jQuery.ajax/#sending-data-to-server)：

> data 选项可以包含 key1=value1&key2=value2 形式的查询字符串，或 {key1: 'value1', key2: 'value2'} 形式的映射。

因此，在我们的特定示例中，我们使用了“映射”形式，即 JavaScript 对象。

# php - 将json数据解码为关联数组不起作用

> ID：11907596
> 
> 赞同：-1
> 
> 时间：2012-08-10T18:53:42.880
> 
> 标签：php, json, curl

我有以下代码：

```
$url = "http://myserver/myapp/restapi.php?method=get_list";
$jsondata = curl($url);
print_r($jsondata);
$arrayObjects = json_decode($jsondata, true);
print_r($arrayObjects); 
```

$jsondata 的打印工作......但 arrayObjects 不打印任何内容。我只包含了正确转储的 json 数据的第一个“记录”：

```
{"263":{"realm":"object","etags":
 [],"id":"263","name":"ddd","label":"","asset_no":null,"objtype_id":"4",
 "r_id":null,"R_name":null,"row_id":null,"Row_name":null,"container_id":null,
 "container_name":null,"has_problems":"no","comment":null,"nports":"3",
 "runs8021Q":"1","itags":[],"dname":"ddd","atags":[{"tag":"$id_263"},
{"tag":"$typeid_4"},{"tag":"$any_object"},{"tag":"$cn_ddd"},{"tag":"$unmounted"},  
 {"tag":"$no_asset_tag"},{"tag":"$runs_8Q"},{"tag":"$untagged"}]}
 }, 
```

我也没有在屏幕上显示任何错误消息。我试图解决它的方法是创建一个新的 php 文件，其中包含这个 json 数据作为字符串......然后我调用了 json decode。它工作正常。查看下面的代码：

```
 <?php

   $jsondata='{"263":{"realm":"object","etags":  
   [],"id":"263","name":"ddd","label":"","asset_no":null,
   "objtype_id":"4","r_id":null,"R_name":null,"row_id":null,
   "Row_name":null,"container_id":null,"container_name":null,
    "has_problems":"no","comment":null,"nports":"3","runs8021Q":"1","itags":     
    [],"dname":"ddd","atags":[{"tag":"$id_263"},
   {"tag":"$typeid_4"},
   {"tag":"$any_object"},{"tag":"$cn_ddd"},{"tag":"$unmounted"},  
   {"tag":"$no_asset_tag"},{"tag":"$runs_8021Q"},{"tag":"$untagged"}]},"187":
   {"realm":"object","etags":[],"id":"187","name":"a-ds-NSM-1",
   "label":"","asset_no":null,"objtype_id":"4","r_id":null,
   "R_name":null,"row_id":null,"Row_name":null,"container_id":null,
   "container_name":null,"has_problems":"no","comment":null,
   "nports":"3","runs8021Q":null,"itags":[],
   "dname":"ss-a-NSM-1","atags":[{"tag":"$id_187"},{"tag":"$typeid_4"},    
   {"tag":"$any_object"},{"tag":"$cn_ss-ds-1"},{"tag":"$unmounted"},   
   {"tag":"$no_asset_tag"},{"tag":"$untagged"}]},
   "123":{"realm":"object","etags":
    [],"id":"123","name":"df","label":"","asset_no":null,
    "objtype_id":"4","r_id":null,"R_name":null,"row_id":null,
   "Row_name":null,"container_id":null,"container_name":null,
   "has_problems":"no","comment":null,"nports":"3",
     "runs8021Q":null,"itags":[],"dname":"df",
    "atags":[{"tag":"$id_123"},{"tag":"$typeid_4"},
      {"tag":"$any_object"},{"tag":"$cn_df"},
   {"tag":"$unmounted"},{"tag":"$no_asset_tag"},{"tag":"$untagged"}]}}';

 print_r(json_decode($jsondata,true));
 ?> 
```

任何关于我的代码有什么问题的想法都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:57:50.457

> $jsondata 的打印工作......但 arrayObjects 不打印任何内容。

这可能意味着 JSON 字符串无效。确保您有 error_reporting 和 display_errors = ON 以便您可以*看到错误*。您还可以检查您的 PHP 错误日志中的问题。

# sql - ASP 代码未正确读取 SQL 字段

> ID：11907600
> 
> 赞同：0
> 
> 时间：2012-08-10T18:54:00.310
> 
> 标签：sql, asp-classic, if-statement

我正在从表中提取一个字段并根据结果做不同的事情。这是我的代码

```
<%stringA ="Select field From table Where something=1"
set response = connFW.Execute(stringA )
set result = response ("field")
If result ="y" Then 
Response.Write("The field is: " & result )
End If%> 
```

它输出这个：

```
The field is: y 
```

然后，稍后，我有一个 If 语句：

```
<% ElseIf result ="y"  or Session("customer_id") <> "" Then
Do Something
%> 
```

但它从不执行 ElseIf 语句中的内容！它在页面顶部说它给出了正确的结果！我错过了什么吗？

注意：为避免混淆，此代码位于页面顶部：

```
Set connFW = Server.CreateObject("ADODB.Connection")
connFW.ConnectionTimeout = Application("FW_ConnectionTimeout")
connFW.CommandTimeout = Application("FW_CommandTimeout")
connFW.Open Application("FW_ConnectionString") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:17:25.680

您的 ElseIf 语句似乎没有前面的 If 语句，除非您在某处遗漏了一些代码。

你需要：

```
If x Then
  Do something
ElseIf y Then
  Do something else
End If 
```

你不能让 ElseIf 独自坐着。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T19:24:50.023

如果没有看到完整的代码，很难看出确切的问题出在哪里，但我看到了两种可能性。要么您自己有一个“ElseIf”，在这种情况下，您应该将 ElseIf 更改为纯 If：

> 如果结果 ="y" 或 Session("customer_id") <> "" 那么

...或者您将 ElseIf 放在前一个之后：

```
If result ="y" Then 
    Response.Write("The field is: " & result )
ElseIf result ="y" or Session("customer_id") <> "" Then  
    Do Something
End If 
```

如果是后者，那么您的 ElseIf 将不会执行，因为在前面的 If 语句中已经满足了 result = "y" 条件。

# c# - 基于自定义模型创建强类型视图

> ID：11907602
> 
> 赞同：1
> 
> 时间：2012-08-10T18:54:03.317
> 
> 标签：c#, asp.net-mvc-3, visual-studio-2010

我需要一个结合两个实体模型的视图。我创建了一个如下所示的类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using FSDS.DataModels;

namespace FSDS.WebUX.Models
{
    public partial class ChainandJob
    {
        public ScheduleJobChain chain {get;set;} //this object has 6 properties
        public ScheduleJob job {get;set;} //this object has 8 properties.
    }
} 
```

我使用“创建”脚手架创建了一个新的局部视图。这就是它给我的：

```
@model FSDS.WebUX.Models.ChainandJob

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>ChainandJob</legend>

        <p>
             <input type="submit" value="Create" />
        </p>
    </fieldset>
 }

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

所有的领域在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T19:05:13.027

您需要自己编写它，例如：

```
@Html.EditorFor(model => model.ChainandJob.chain.Bla)
@Html.ValidationMessageFor(model => model.ChainandJob.chain.Bla)
@Html.EditorFor(model => model.ChainandJob.job.Bla)
@Html.ValidationMessageFor(model => model.ChainandJob.job.Bla) 
```

等等。

**编辑**

虽然我不这样做，但您可以让 VS`SchedualJobChain`为`ScheduleJob`. 别忘了之类的`@Html.HiddenFor(model => model.ChainandJob.chain.Id`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T19:02:07.007

VS doesn't know your objects. Right after `<legend>ChainandJob</legend>` try adding

```
@EditorFor(m => m.chain.ChainProperty)
@ValidationMessageFor(m => m.chain.ChainProperty)

@EditorFor(m => m.job.JobProperty)
@ValidationMessageFor(m => m.job.JobProperty) 
```

and things will be hunky dory :) `EditorFor` will generate the default output for you, should you need to tweak it - feel free to do so.

# string - 在 MATLAB 中将列号转换为小时

> ID：11907604
> 
> 赞同：0
> 
> 时间：2012-08-10T18:54:10.540
> 
> 标签：string, matlab, datetime, number-formatting

我有一列有 24 个值`00, 01, 02, .... , 23`。

在 MATLAB 中转换为`00:00, 01:00, 02:00, 03:00 ... 23:00`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:57:04.873

尝试：

```
vals = cellstr(num2str((0:23)','%02d'));
vals = strcat(vals, ':00'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T17:57:33.897

```
>> t = (0 : 23) / 24;
>> s = datestr(t, 'HH:MM'); 
```

# c++ - 如何防止 cvLoad 失败？

> ID：11907613
> 
> 赞同：2
> 
> 时间：2012-08-10T18:54:48.247
> 
> 标签：c++, c, opencv

我正在编写一个使用 OpenCV 并涉及内在和失真参数的程序。这些参数是从保存在光盘上的 .xml 文件加载的。我在开始声明中使用以下命令来加载文件：

```
CvMat *intrinsic  = (CvMat*)cvLoad("Intrinsics.xml");
CvMat *distortion = (CvMat*)cvLoad("Distortion.xml"); 
```

只要文件在程序的工作目录中，它就可以正常工作。当它们不是时，程序会崩溃而没有任何错误性质的迹象。我之前多次犯过没有正确定位 xml 文件的错误，我希望以后更容易解决这个问题。

我想创建一个防止文件加载失败的防护措施。也许如果它们不存在，我的程序可能会显示错误消息并正常退出。我看到了[这里](https://stackoverflow.com/a/7184305/1505243)建议的方法，它应该对我有用，但我想知道是否有一种更简洁的方法可以在不包含另一个标题的情况下做到这一点。

例如，OpenCV 函数 cvQueryFrame 如果不返回帧则返回 0。我使用代码

```
frame = cvQueryFrame(capture);
if(!frame)
{
    printf("ERROR: Could not get frame from webcam.");
    exit(-1);
} 
```

如果 cvQueryFrame 未能返回帧，则退出程序。我想用我的矩阵加载命令做类似的事情。这可能吗，如果可以，我该怎么做？

我检查了 OpenCV 文档，当找不到指定的文件时找不到 cvLoad 行为的描述，所以我不确定如何继续。

我正在用 C++ 编写这个项目并在 Windows 7 上运行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T20:32:46.670

[它有效](http://opencv.willowgarage.com/wiki/FaceDetection/)。继续尝试自己：

```
CvMat *distortion = (CvMat*)cvLoad("Distortion.xml");
if (!distortion)
{
    printf("!!! cvLoad failed");
    exit(-1);
} 
```

# android - Android（模拟器）权限被拒绝错误

> ID：11907614
> 
> 赞同：1
> 
> 时间：2012-08-10T18:54:51.760
> 
> 标签：android, android-emulator

我尝试在 Windows 7 环境中运行的 Android 模拟器终端中使用以下命令创建一个文件夹。

```
$ cd sdcard
$ mkdir pictures 
```

但这会产生“mkdir 图片失败，权限被拒绝”错误。我该如何纠正这个？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T19:07:30.093

尝试

> $ adb shell "mkdir /sdcard/pictures"

更多信息请参见[如何使用 adb 在 Android 模拟器的 SD 卡中创建子文件夹](http://android-er.blogspot.in/2010/10/how-to-create-sub-folder-in-sd-card-of.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T20:12:31.940

确保您为 AVD 创建了 SD 卡。

在“Android 虚拟设备管理器”中 -> 选择您的 AVD -> 单击“编辑...” -> 为您的 SD 卡指定大小，然后单击确定。

下次启动 AVD 时，您可以使用：

```
$ adb shell
# mkdir /mnt/sdcard/your_folder 
```

创建您的文件夹。

祝你好运。

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-08-10T19:20:35.837

将此添加到 AndroidManifest.xml

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

希望有帮助

# php - 将 foreach 输出保存为字符串变量？

> ID：11907626
> 
> 赞同：-1
> 
> 时间：2012-08-10T18:55:29.933
> 
> 标签：php, mysql, pdo

我正在循环一个 SQL 查询，我想获取该输出并将其保存为字符串变量。这可能吗？

我的循环如下：

```
 foreach ($dbh->query($sql2) as $row2) {
        echo $row2['id'];
        echo $row2['staff'];
        echo $row2['dept'];
    } 
```

我想将所有输出保存为一个字符串变量，即`$output`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T18:59:52.400

```
$output="";

foreach ($dbh->query($sql2) as $row2) {
   $output.= $row2['id'];
   $output.= $row2['staff'];
   $output.= $row2['dept'];
} 
```

您可以附加每列结果

```
echo $output 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T19:00:38.653

您应该研究输出缓冲。

```
ob_start();
foreach ($dbh->query($sql2) as $row2) {
        echo $row2['id'];
        echo $row2['staff'];
        echo $row2['dept'];
    }
$output = ob_get_clean(); 
```

[输出缓冲](http://php.net/manual/en/function.ob-get-clean.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-10T14:07:28.410

使用 implode，如果你想将 String 转换为 Array，请使用 explode

```
$output=implode(',', $dbh->query($sql2)); 
```

第一个参数是可选的并且您输入的任何标记都由数组成员分隔，例如：

```
$ar = ['a', 'b', 'c', 'd', 'e', 'f', 'g'];
echo implode($ar); // abcdefg
$ar = ['a', 'b', 'c', 'd', 'e', 'f', 'g'];
echo implode(',',$ar); // a,b,c,d,e,f,g 
```

# javascript - javascript 事件被激活为 ASP.net MVC 控制器操作

> ID：11907632
> 
> 赞同：0
> 
> 时间：2012-08-10T18:56:06.543
> 
> 标签：javascript, asp.net-mvc

我在我的 MVC 应用程序中使用了第 3 方 javascript。javascript 显示一个交互式日历，供用户通过鼠标单击输入日期和时间。

```
vCalTime+="<td align='center'><table cellspacing='0' cellpadding='0' style='line-height:0pt'><tr><td><img onmousedown='startSpin(\"Hour\", \"plus\");' onmouseup='stopSpin();' src='../../images/cal_plus.gif' width='13px' height='9px' onmouseover='changeBorder(this, 0)' onmouseout='changeBorder(this, 1)' style='border:1px solid white'></td></tr><tr><td><img onmousedown='startSpin(\"Hour\", \"minus\");' onmouseup='stopSpin();' src='../../images/cal_minus.gif' width='13px' height='9px' onmouseover='changeBorder(this, 0)' onmouseout='changeBorder(this, 1)' style='border:1px solid white'></td></tr></table></td>\n"; 
```

奇怪的是，只有在 IIS7 中，日历中的所有导航都是由 MVC 路由引擎作为控制器方法捕获的，但从用户机器来看，页面和日历工作正常。只是我收到了很多ELMAH的电子邮件通知。我可以过滤错误，但我只是想知道这是否真的是一个错误。以下是 ELMAH 捕获的内容。有谁知道可能导致问题的原因？谢谢你。

```
System.Web.HttpException: A public action method 'images' was not found on controller 'MYAPP.Controllers.ControllerNameController'.
Generated: Fri, 10 Aug 2012 16:11:13 GMT

System.Web.HttpException (0x80004005): A public action method 'images' was not found on controller 'MYAPP.Controllers.ControllerNameController'.
   at System.Web.Mvc.Controller.HandleUnknownAction(String actionName)
   at System.Web.Mvc.Controller.ExecuteCore()
   at System.Web.Mvc.MvcHandler.<>c__DisplayClass8.<BeginProcessRequest>b__4()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass1.<MakeVoidDelegate>b__0()
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)

Server Variables 
Name    Value
**ALL_HTTP**    HTTP_CONNECTION:Keep-Alive HTTP_ACCEPT:*/* HTTP_ACCEPT_ENCODING:gzip, deflate HTTP_ACCEPT_LANGUAGE:en-us HTTP_AUTHORIZATION:Negotiate TlRMTVNTUAADAAAAGAAYAIAAAADMAMwAmAAAAAoACgBIAAAAGAAYAFIAAAAWABYAagAAAAAAAABkAQAABYKIogUBKAoAAAAPVgBIAEEAMgAwAFYASABBAFAATwBSAFQARQBFAE4AWQBUAFAATwBSAC0AVwBTADkANwA3ADMAMQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADPBnHWzuV8BTujt2KHowUjAQEAAAAAAAAIhjfDEnfNAQz9aC9ImrcDAAAAAAIABgBSADAAMQABABYAUgAwADEAUABPAFIAVwBFAEIAMAA1AAQAHAByADAAMQAuAG0AZQBkAC4AdgBhAC4AZwBvAHYAAwA0AFIAMAAxAFAATwBSAFcARQBCADAANQAuAHIAMAAxAC4AbQBlAGQALgB2AGEALgBnAG8AdgAFAAwAdgBhAC4AZwBvAHYABwAIAAiGN8MSd80BAAAAAAAAAAA= HTTP_COOKIE:ASP.NET_SessionId=ar4sal4yoyuynber4e0gaanm HTTP_HOST:HostingServer 
**HTTP_REFERER**: HostingServer/MYAPP/ControllerName/Create/99999999/NoneOfTheAbove HTTP_USER_AGENT:Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; .NET CLR 3.0.04506.30; .NET CLR 3.0.04506.648; InfoPath.2; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; .NET4.0C; MS-RTC LM 8; .NET4.0E) HTTP_UA_CPU:x86 
**ALL_RAW** Connection: Keep-Alive Accept: */* Accept-Encoding: gzip, deflate Accept-Language: en-us Authorization: Negotiate TlRMTVNTUAADAAAAGAAYAIAAAADMAMwAmAAAAAoACgBIAAAAGAAYAFIAAAAWABYAagAAAAAAAABkAQAABYKIogUBKAoAAAAPVgBIAEEAMgAwAFYASABBAFAATwBSAFQARQBFAE4AWQBUAFAATwBSAC0AVwBTADkANwA3ADMAMQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADPBnHWzuV8BTujt2KHowUjAQEAAAAAAAAIhjfDEnfNAQz9aC9ImrcDAAAAAAIABgBSADAAMQABABYAUgAwADEAUABPAFIAVwBFAEIAMAA1AAQAHAByADAAMQAuAG0AZQBkAC4AdgBhAC4AZwBvAHYAAwA0AFIAMAAxAFAATwBSAFcARQBCADAANQAuAHIAMAAxAC4AbQBlAGQALgB2AGEALgBnAG8AdgAFAAwAdgBhAC4AZwBvAHYABwAIAAiGN8MSd80BAAAAAAAAAAA= Cookie: ASP.NET_SessionId=ar4sal4yoyuynber4e0gaanm Host: HostingServer 
**Referer**: HostingServer/MYAPP/ControllerName/Create/99999999/NoneOfTheAbove User-Agent: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; .NET CLR 3.0.04506.30; .NET CLR 3.0.04506.648; InfoPath.2; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; .NET4.0C; MS-RTC LM 8; .NET4.0E) UA-CPU: x86 
**APPL_MD_PATH**    /LM/W3SVC/2/ROOT/MYAPP
**APPL_PHYSICAL_PATH**  E:\HostingServer\MYAPP\
**AUTH_TYPE**   Negotiate
**AUTH_USER**   DOMAIN\USERNAME
**AUTH_PASSWORD**    
**LOGON_USER**  DOMAIN\USERNAME
**REMOTE_USER** DOMAIN\USERNAME
**CERT_COOKIE**  
**CERT_FLAGS**   
**CERT_ISSUER**  
**CERT_KEYSIZE**     
**CERT_SECRETKEYSIZE**   
**CERT_SERIALNUMBER**    
**CERT_SERVER_ISSUER**   
**CERT_SERVER_SUBJECT**  
**CERT_SUBJECT**     
**CONTENT_LENGTH**  0
**CONTENT_TYPE**     
**GATEWAY_INTERFACE**   CGI/1.1
**HTTPS**   off
**HTTPS_KEYSIZE**    
**HTTPS_SECRETKEYSIZE**  
**HTTPS_SERVER_ISSUER**  
**HTTPS_SERVER_SUBJECT**     
**INSTANCE_ID** 2
**INSTANCE_META_PATH**  /LM/W3SVC/2
**LOCAL_ADDR**  10.165.50.180
**PATH_INFO**   /MYAPP/ControllerName/images/cal_minus.gif
**PATH_TRANSLATED** E:\HostingServer\MYAPP\ControllerName\images\cal_minus.gif
**QUERY_STRING**     
**REMOTE_ADDR** 10.10.60.17
**REMOTE_HOST** 10.10.60.17
**REMOTE_PORT** 3410
**REQUEST_METHOD**  GET
**SCRIPT_NAME** /MYAPP/ControllerName/images/cal_minus.gif
**SERVER_NAME** HostingServer
**SERVER_PORT** 80
**SERVER_PORT_SECURE**  0
**SERVER_PROTOCOL** HTTP/1.1
**SERVER_SOFTWARE** Microsoft-IIS/7.5
**URL** /MYAPP/ControllerName/images/cal_minus.gif
**HTTP_CONNECTION** Keep-Alive
**HTTP_ACCEPT** */*
**HTTP_ACCEPT_ENCODING**    gzip, deflate
**HTTP_ACCEPT_LANGUAGE**    en-us
**HTTP_AUTHORIZATION**  Negotiate TlRMTVNTUAADAAAAGAAYAIAAAADMAMwAmAAAAAoACgBIAAAAGAAYAFIAAAAWABYAagAAAAAAAABkAQAABYKIogUBKAoAAAAPVgBIAEEAMgAwAFYASABBAFAATwBSAFQARQBFAE4AWQBUAFAATwBSAC0AVwBTADkANwA3ADMAMQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADPBnHWzuV8BTujt2KHowUjAQEAAAAAAAAIhjfDEnfNAQz9aC9ImrcDAAAAAAIABgBSADAAMQABABYAUgAwADEAUABPAFIAVwBFAEIAMAA1AAQAHAByADAAMQAuAG0AZQBkAC4AdgBhAC4AZwBvAHYAAwA0AFIAMAAxAFAATwBSAFcARQBCADAANQAuAHIAMAAxAC4AbQBlAGQALgB2AGEALgBnAG8AdgAFAAwAdgBhAC4AZwBvAHYABwAIAAiGN8MSd80BAAAAAAAAAAA=
**HTTP_COOKIE** ASP.NET_SessionId=ar4sal4yoyuynber4e0gaanm
**HTTP_HOST**   HostingServer
**HTTP_REFERER**    HostingServer/MYAPP/ControllerName/Create/99999999/NoneOfTheAbove

**HTTP_USER_AGENT** Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; .NET CLR 3.0.04506.30; .NET CLR 3.0.04506.648; InfoPath.2; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; .NET4.0C; MS-RTC LM 8; .NET4.0E)
**HTTP_UA_CPU** x86

Powered by ELMAH, version 1.1.11517.2009 (debug; RC; net-3.5). Copyright (c) 2004-9, Atif Aziz. All rights reserved. Licensed under Apache License, Version 2.0\. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:15:35.873

问题已经解决了。js 脚本使用在日历中用作导航按钮的图像的相对路径。当应用程序部署在另一台服务器中时，使用相对路径找不到映像文件。我在 Site.master 中创建了一个 javascript 全局变量

```
<script type="text/javascript">
    var appRoot = '<%:Url.Content("~/")%>'
</script> 
```

在 .js 中，我使用它而不是硬编码的相对路径 (../../)。

```
vCalHeader += "<td><img onmousedown='javascript:Cal.DecYear();RenderCssCal();' src='" + appRoot + "images/cal_fastreverse.gif' width='13px' height='9' onmouseover='changeBorder(this, 0)' onmouseout='changeBorder(this, 1)' style='border:1px solid white'></td>\n"; //Year scroller (decrease 1 year) 
```

# java - Java - 使用方法在数字之间转换

> ID：11907635
> 
> 赞同：-1
> 
> 时间：2012-08-10T18:56:29.013
> 
> 标签：java

![在此处输入图像描述](../Images/ee65b96afd18308d60dde05acfbb2b97.png)

这是过去论文中的一个问题，我不确定该怎么做。到目前为止我已经这样做了，任何帮助表示赞赏。当我尝试评论我需要做的事情然后尝试去做时，我的代码可能会令人困惑

```
public class NumberConvert {

public NumberConvert(int from, int to) {

}

public String convert(String input) {

    if(input==null){
        return "";
    }else{
        return "FF";//Not sure what to do here
    }

}

public static Integer valueOf(String s, int radix)
        throws NumberFormatException {

    try {//if radix is out of range (not sure what the range is)
    }catch(NumberFormatException e){
        System.out.println(e.getMessage());
    }
    return 0;// to complete

}

public static String toString(int i, int radix) {

    return "";//need to complete

}

public static void main (String[] args){

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T18:59:46.210

该类[`Integer`](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html)提供了一个版本[`parseInt()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#parseInt%28java.lang.String,%20int%29)，允许您指定基数，类似地，该[`toString()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#toString%28int,%20int%29)方法还允许您指定基数。

整个转换可以在一行中完成：

```
return Integer.toString(Integer.parseInt(input, from), to)); 
```

其他两种方法只使用这一行的一部分，或者您可以将您的方法称为 Integer 方法的薄包装器。

您需要创建实例字段以在构造函数中存储`from`和`to`设置这些字段。

# jquery - 如何处理事件单击以获取 attr 并运行某些功能

> ID：11907640
> 
> 赞同：1
> 
> 时间：2012-08-10T18:57:10.200
> 
> 标签：jquery, json

我的表有问题，它是从函数生成的。

我需要获得点击的 td attr 并运行一些功能。但它不起作用。我的代码有什么问题..？

generate_table.js

```
function generate_table(data,lnk){
    tbl='';
    table_stayle=' border=1; cellpadding=0; cellspacing=0;' ;
    th_stayle='style="color:#FFFFFF; font-weight:bolder; background-color:#003366" ';
    tr_stayle=' bgcolor="#CCCCFF" ';
    td_stayle='';
    tr_alternate='';
        var tbl_body = '';
        var tbl_h = '';
            $.each(data[0], function(k , v) {
                tbl_h=tbl_h + "<td>"+k+"</td>";
                })
        tbl_h ='<tr align="center" '+th_stayle+'>'+tbl_h+ '</tr>';
            //detail
        var tbl_body = "";
        $.each(data, function() {
            var tbl_row = "";
            var row_key='';
                $.each(this, function(k , v) {
                    if(k==lnk){
                        row_key=v;
                        tbl_row =tbl_row + "<td><a href='javascript:void(0);'>"+v+"</a></td>";//<a href='"+v+"'>
                    }else{
                        tbl_row =tbl_row + "<td>"+v+"</td>";
                    }
                })
            tbl_body =tbl_body+ '<tr '+tr_stayle+' kode="'+row_key+'" class="tbl_tr" >'+tbl_row + '</tr>';               
        })
        return '<table id="tabel" '+table_stayle+'>'+tbl_h+tbl_body+'</table>';
} 
```

像这样的php代码：

```
 <script language="javascript1.5" src="jquery-1.7.2.min.js"></script>
<script language="javascript1.5" src="generate_tabel.js"></script>
<style>
#div_body {overflow:auto; height:300px;}
</style>
======================================================================<br />
<input type="button" id="btn" name="btn" value="load data">
<div id="div_body" style="overflow:auto;border:solid; border-width:medium; width:400;300">    
</div>
<script>
$(function(){
    $('#btn').click(function(){
        url="getjson.php";
        aa=$.getJSON(url , function(data) {
    //JSON DATA LIKE THIS:
    //          aa='[{"Id":"1","wh2":"HandPhone","wh3":"-"},
    //          {"Id":"2","wh2":"Acessory","wh3":"-"},
    //          {"Id":"3","wh2":"Batery","wh3":"-"},
    //          {"Id":"4","wh2":"Chassing","wh3":"-"}]';
            $('#div_body').html(generate_table(data,"wh2"));
            });
        });

    //  $(".tbl_row").click(function(){
    //        alert($("tr").attr("kode"));
    //        //some function
    //     });
    $('#div_body').on('click','.tbl_tr',function(){ alert($(this).attr("kode")); });
});
</script> 
```

和函数处理程序单击：

```
$(".tbl_tr").click(function(){
          alert($("tr").attr("kode"));
          //some function
       }); 
```

是的..提到我改变jquery的答案：

```
<script language="javascript1.5" src="jquery-1.7.2.min.js"></script>
<script language="javascript1.5" src="generate_tabel.js"></script> 
```

和

```
 $(".tbl_tr").on("click", function(){
      alert($(this).attr("kode"));
      //some function
    }); 
```

在 Firefox 错误控制台中没有给出消息。但警报没有运行。

这是我的代码：[jsfiddle](http://jsfiddle.net/candrapurnama/DcBwA/)

已解决：我为模拟编写了简单的代码。

```
<script src="jquery-1.7.2.min.js"></script>
======================================================================<br />
<input type="button" id="btn" value="OK">
<div id="aaa"><a href=""><span >aaaaaaa</span></a>
</div>
<script>
$('#btn').click(function(){
        $('#aaa').html(' <table id="tbl" border=1><tr code="k1" class="ss"><td><a>aaa</a></td></tr><tr code="k2" class="ss"><td><a>bb</a></td></tr><tr code="k3" class="ss"><td><a>cc</a></td></tr></table>');
});
$('#aaa').on('click','#tbl tr a',function(a){
    alert($(this).closest('tr').attr('code'));
});
</script> 
```

谢谢你们。我爱你..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:30:21.163

由于您正在动态创建表。你需要委托。由于看起来您正在`#div_body`元素内部创建表格，因此它可能是最有效的父元素。使用元素时，该元素必须存在于 dom 中

通过使用委托，`.tbl_tr`click 事件将冒泡到`#div_body`，这就是处理事件的地方。通过这样做，它还减少了附加的事件处理程序的数量，因为通过绑定，您将为每个`.tbl_tr`元素附加一个，现在您只有一个处理事件

如果使用 jQuery 1.7+ 使用[.on()](http://api.jquery.com/on/)

```
$('#div_body').on('click','.tbl_tr',function(){
    alert($(this).attr("kode"));
}); 
```

或[.delegate()](http://api.jquery.com/delegate/)如果低于 1.7

```
$('#div_body').delegate('.tbl_tr','click',function(){
    alert($(this).attr("kode"));
}); 
```

在上面用于动态创建的元素

* * *

下面的两种风格最终是一样的

```
$(".tbl_tr").on("click", function(){
      alert($(this).attr("kode"));
      //some function
});
$(".tbl_tr").click(function() {
      alert($(this).attr("kode"));
      //some function
}); 
```

仅当您知道加载 dom 时元素将存在或在元素添加到 dom 后附加时才使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T19:12:57.043

在将点击事件分配给“.tbl_tr”之后，您可能正在“绘制”表格。

试试这样写：

```
$(".tbl_tr").on("click", function(){
          alert($(this).attr("kode"));
          //some function
}); 
```

# android - 运行时配置更改后 DialogFragment 变为 null

> ID：11907641
> 
> 赞同：2
> 
> 时间：2012-08-10T18:57:18.437
> 
> 标签：android, android-dialogfragment, android-fragmentactivity

我正在学习使用`Fragment`and `DialogFragment`。作为培训，我正在尝试扩展[DialogFragment page](http://developer.android.com/reference/android/app/DialogFragment.html)`AlertDialog`中给出的示例。显然一切都很好：当我显示选项菜单并单击其按钮时，会出现一个对话框，它的行为与预期一样。但是，如果在显示对话框时配置更改（例如，当我旋转屏幕时），则会正确重新创建对话框，但单击其任何按钮会使应用程序崩溃。我已经尝试了很多东西（例如，静态、、方法和其他记录在案的建议）来解决问题，但似乎没有任何效果，所以我处于起点。我正在使用支持库 v4。`newInstance``setRetainInstance``onSaveInstanceState`

这是我的主要活动代码：

```
public class MainActivity extends FragmentActivity {
    private MyDialogFragment dlgf;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        showMyDialog();
        return true;
    }

    private void showMyDialog(){
        dlgf = MyDialogFragment.newInstance();
        dlgf.show(getSupportFragmentManager(), "dialog");
    }

    public void doPositive() {
        // do stuff...
        dlgf.getDialog().dismiss();
    }

    public void doNegative() {
        // Cancel button pressed
        dlgf.getDialog().dismiss();
    }
} 
```

这是我的`DialogFragment`代码：

```
public class MyDialogFragment extends DialogFragment {
    private View view;

    public static MyDialogFragment newInstance() {
        MyDialogFragment dlgf = new MyDialogFragment();
        return dlgf;
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        view = getActivity().getLayoutInflater().inflate(R.layout.alertdialog, null);

        return new AlertDialog.Builder(getActivity())
        .setView(view)
        .setTitle("A Title")
        .setPositiveButton("OK",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int buttonID) {
                    ((MainActivity)getActivity()).doPositive();
                }
            })
        .setNegativeButton("Cancel",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int buttonID) {
                    ((MainActivity)getActivity()).doNegative();
                }
            })
        .create();
    }

} 
```

当单击取消按钮后执行崩溃时，logcat`NullPointerException`在 doNegative 方法中显示一个。如果在单击 OK 按钮后`NullPointerException`发生崩溃，则在 doPositive 方法中发生。`DialogFragment`对象为空似乎很明显。

有人可以帮我吗？TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T19:39:19.097

`Activity`最初设置的实例`dlgf`在`showMyDialog()`配置更改时被销毁，并创建一个新实例。那个新的没有`dlgf`设置，所以你得到了 NPE。

`getActivity()`在 a`Fragment`中将返回当前`Fragment`附加到的活动实例。在您的情况下，它将正确调用新实例中的方法。

要解决您的问题，您可以简单地将`Fragment`导致回调的原因传递给您`Activity`，这样您就不必存储对它的引用。

```
// in activity
public void doPositive(MyDialogFragment source) {
    // do stuff...
    source.getDialog().dismiss();
}

// in dialog fragment  
.setPositiveButton("OK",
    new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int buttonID) {
            ((MainActivity)getActivity()).doPositive(MyDialogFragment.this);
        }
    }) 
```

另一种可能性是让您`Activity`保留对其`MyDialogFragment`使用`onRetainNonConfigurationInstance()`/的引用`getLastNonConfigurationInstance()`。

# javascript - Onclick 事件未触发（这太基本了，我会发疯吗？）

> ID：11907643
> 
> 赞同：1
> 
> 时间：2012-08-10T18:57:21.043
> 
> 标签：javascript, html

> **可能重复：**
> [JavaScript 中的“未捕获的 TypeError：对象不是函数”](https://stackoverflow.com/questions/7773775/uncaught-typeerror-object-is-not-a-function-in-javascript)

我的完整 js 文件是这样的：

```
function addInning() {
    alert("hello");
} 
```

我的 html 文件有元素 `<input name="addInning" type="button" value="Add Inning" id="addInning" onclick="addInning();">`

并且代码不会执行。对于我的生活，我无法弄清楚为什么，因为这只是可能的最简单的事情。chrome 的错误是“未捕获的 TypeError：对象不是函数”。我在stackoverflow上进行了搜索，发布的解决方案没有帮助。我觉得我快疯了。

完整代码在这里：http: [//jsfiddle.net/BUsPC/](http://jsfiddle.net/BUsPC/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T19:08:22.620

问题在于 in `onclick="addInning();"`,`addInning`指的是`input`元素，因为这是为其`name`和`id`属性设置的值。`input`只有当标签是元素的子元素时才会提示此行为`form`。

这个[**演示**](http://jsfiddle.net/fanet/6/)突出了这种行为。

要解决您的问题，要么更改'**和**的名称，要么更改. 此外，您可以像这样显式引用全局函数：`input``id``name``addInning`

```
onclick="window.addInning();" 
```

使用后一个选项查看您的工作[**小提琴**](http://jsfiddle.net/BUsPC/33/)。小心使用 JSFiddle，因为它`window.onload`默认将所有 JS 包装在一个事件中。您可以通过如下定义来保持默认行为`addInning`：

```
window.addInning = function () {
    alert("hello");
}​;​ 
```

我学到了新东西！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T19:07:37.053

将名称和 ID 从“addInning”更改为其他内容。这对我有用。

```
<script type="text/javascript">
    function addInning()
    {
        alert("hello");
    }

</script>
<input name="addInning2" type="button" value="Add Inning" id="addInning2" onclick="addInning();"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T19:01:25.830

由于它是一个函数，请尝试返回一些内容：

```
function addInning() {
   alert("hello");
   return true;  // or return false; to prevent the click
} 
```

# haskell - 为什么使用 foldl' 实现 Haskell 中的 MergeSort 更快？

> ID：11907646
> 
> 赞同：3
> 
> 时间：2012-08-10T18:57:43.880
> 
> 标签：haskell, mergesort, fold

我在 Haskell 中实现了两个版本的合并排序，如下所示：

```
mergeSort1 :: (Ord a) => [a] -> [a]
mergeSort1 xs = foldl' (\acc x -> merge [x] acc) [] xs 
```

和

```
mergeSort2 :: (Ord a) => [a] -> [a]
mergeSort2 [] = []
mergeSort2 (x:[]) = [x]
mergeSort2 xs = (mergeSort2 $ fst halves) `merge` (mergeSort2 $ snd halves)
         where halves = splitList xs 
```

其中 'merge' 和 'splitList' 实现如下：

```
merge :: (Ord a) => [a] -> [a] -> [a]
merge [] [] = []
merge xs [] = xs
merge [] ys = ys
merge all_x@(x:xs) all_y@(y:ys)
     | x < y = x:merge xs all_y
     | otherwise = y:merge all_x ys

splitList :: [a] -> ([a], [a])
splitList zs = go zs [] [] where
     go [] xs ys = (xs, ys)
     go [x] xs ys = (x:xs, ys)
     go (x:y:zs) xs ys = go zs (x:xs) (y:ys) 
```

在 ghci 中执行会导致在`last $ mergeSort2 [1000000,999999..0]`处理超过一分钟后显示数字 1000000，而执行`last $ mergeSort1 [1000000,999999..0]`会导致仅在 5 秒后显示最后一个元素。

我可以理解为什么由于 foldl' 的尾递归性等原因，mergeSort1 使用的内存比 mergeSort2 少得多。

我无法理解的是为什么 mergeSort1 比 mergeSort2 快这么大的差异？

莫非 splitList 是 mergeSort2 的瓶颈，每次调用都会生成两个新列表？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T19:29:28.717

~~照原样，~~

```
mergeSort2 :: (Ord a) => [a] -> [a]
mergeSort2 xs = (mergeSort2 $ fst halves) `merge` (mergeSort2 $ snd halves)
         where halves = splitList xs 
```

~~是无限递归，因为您没有给出基本情况（您需要为长度列表指定结果`< 2`）~~. 在修复之后，`mergeSort2`仍然相对较慢，因为`splitList`它需要在每个步骤中完成遍历并构建两个新列表，不允许在完成之前处理任何内容。一个简单的

```
splitList zs = splitAt h zs where h = length zs `quot` 2 
```

做得更好。

但是，您`mergeSort1`的 根本不是合并排序，而是插入排序。

```
mergeSort1 :: (Ord a) => [a] -> [a]
mergeSort1 xs = foldl' (\acc x -> merge [x] acc) [] xs 
```

这在反向排序的输入上效果特别好，但如果你给它排序或随机输入，它会二次缩放。

所以`mergeSort1`更快，因为你给了它最佳输入，它在线性时间内完成。

# javascript - 如何使用 Javascript 生成和下载大文件客户端？

> ID：11907649
> 
> 赞同：2
> 
> 时间：2012-08-10T18:57:57.517
> 
> 标签：javascript

我有一个使用 Slickgrid 显示大量数据的应用程序。数据集的大小可能为 30-50MB。我希望用户能够下载当前显示的数据视图。设置它的最佳方法是什么？

我已经考虑过[这里](https://stackoverflow.com/questions/3665115/create-a-file-in-memory-for-user-to-download-not-through-server)描述的使用数据 URI 的方法，但是 URI 的最大大小太小了。

我还考虑了[此处](https://stackoverflow.com/questions/921037/jquery-table-to-csv-export)描述的方法，其中客户端将任意数据发布到服务器，服务器将其作为下载回显。我担心文件可能会超过最大 POST 大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:03:18.877

既然您想在客户端执行此操作，并且如果 HTML5 是一个选项，为什么不[使用 HTML5 File System API](http://www.w3.org/TR/FileAPI/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T19:07:18.517

一种选择是使用[HTML5 FileWriter API](http://www.w3.org/TR/file-writer-api/)。截至今天，它仅在 Chrome（以及所有的黑莓浏览器）中[受支持。](http://caniuse.com/#search=filewriter)

# javascript - 对元素调用 addEventListener 会产生“参数不足”错误

> ID：11907653
> 
> 赞同：-3
> 
> 时间：2012-08-10T18:58:28.757
> 
> 标签：javascript, html

我的代码可以在 Chrome 上运行，但不能在 Firefox 上运行……在 Firefox 中……每当这段代码启动时……

```
canvas.addEventListener('keydown'); 
```

我收到此错误：

```
Not enough arguments
[Break On This Error]   

canvas.addEventListener('keydown'); 
```

我有`var canvas`接近顶部以及这个：

```
canvas = document.getElementById("canvas");
    canvas.width = 512;
    canvas.height = 352;
context = canvas.getContext("2d"); 
```

我不知道为什么它在 Chrome 上运行良好但在 Firefox 上运行良好......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-10T19:04:17.863

addEventListener 函数需要第二个参数来指定事件调用的函数。真正的问题是为什么 Chrome 不会产生错误。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-10T19:11:29.137

您需要一个在事件触发时执行的函数。可以像这样内联指定它：

```
canvas.addEventListener('keydown', function(e) {
    // your code here to handle the event
}); 
```

或者可以这样指定：

```
function keyHandler(e) {
    // your code here to handle the event
}

canvas.addEventListener('keydown', keyHandler); 
```

如果没有事件处理程序函数，事件处理程序将无事可做，因为事件触发时不会执行任何代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-03-14T01:35:52.303

您还可以使用 JQuery 将 keydown 事件绑定到画布。

```
$('#canvas').on("keydown", function(event){
    // code
}); 
```

# git - Git：未能读取对象...无效的参数

> ID：11907654
> 
> 赞同：2
> 
> 时间：2012-08-10T18:58:30.443
> 
> 标签：git, recovery

在强制关闭虚拟机后，我收到了这条 git 消息，这显然损坏了 git 索引

`Git: Failed to read object abcdef.... Invalid argument`

我查看了这些现有的答案

[恢复损坏的索引](https://stackoverflow.com/questions/3613682/how-do-you-restore-a-corrupted-object-in-a-git-repository-for-newbies)
[通过 HD 故障恢复损坏的 git](https://stackoverflow.com/questions/801577/how-to-recover-git-objects-damaged-by-hard-disk-failure)

似乎没有一个工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:58:30.443

让我们进入它并尝试解决它。仅在也不起作用时才使用此方法`git reflog`，因为显然您的索引已损坏，并且 reflog 无法从损坏的索引中读取。

打开你的`.git/`文件夹

查看名为`HEAD`.
这有你的 git 当前所在的分支的名称。

现在查找一个名为`ORIG_HEAD`.
这`probably`具有 git 能够注册的最后一次良好提交的 SHA。如果是的话，瞧！

复制它（比如 X），在终端执行：
`git show X > interim.patch`

这会将您上次成功的更改复制到标准差异中。

还要将此 SHA (X) 复制到`HEAD`文件的内容中。
这告诉 git 将此更改视为当前位置，它可以接受，因为它已经在一段时间前注册了它。

到现在为止，如果你做一个`git branch`，你就会搬到`(no branch)`.

所以现在你有了你的改变。这样做`git checkout -f <branch-name>`
会用远程内容覆盖您的更改，但您仍然在该补丁中拥有它们。

所以现在，你是

*   到一个 git 分支上
*   git 已恢复

做一个`git apply interim.patch`如果顺利的话，意味着你有你的改变。
然后继续正常的 git 步骤。

*   `git add .`
*   `git commit -am 'Message'`

你又恢复了正常的平静生活。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T09:58:50.193

Using @Arindam's answer above didn't work for me, but a variation of it did, I hope someone else finds it useful:

At this point you're in GIT limbo. You can't checkout a new branch with the state of the current branch, likely because the reflog is corrupted.

Before you continue:

*   **Backup your project files somewhere else**
*   Note down the last successful SHA1 from .git/logs/HEAD immediately prior to the one that GIT says it cannot find an object for (as per @Arindam above)

In my scenario I knew roughly when the files who's changes I had "lost" were last edited - approx 4 hours ago - so running the following fetches all my project files that were edtited between my last successful commit and now:

```
$> cd my/project/dir
$> find . -type f -mmin -240 -exec grep -l "$1" {} \; | xargs ls -l 
```

*   Note down the output of the find command into a text file somewhere as you'll be backing these up somewhere and you'll need to know which directories they came from to know where to copy them "back" to.

Copy these files somewhere else manually (e.g. into /tmp/backup) or by extending the command to do it manually (I had about a dozen, so by hand wasn't such a chore)

*   Edit .git/HEAD and replace its contents with the SHA you noted down above
*   Edit .git/ORIG_HEAD and do the same

    $> git branch

GIT should tell you "(no branch)"

```
$> git log 
```

GIT should give you the log message for the SHA1 you noted above

Now create a new branch:

```
$> git checkout -b my_new_branch 
```

Now copy all the files from /tmp/backup into their correct locations and run:

```
$> git commit -a -m "Some commit" 
```

You're done. You should now be in a new branch called "my_new_branch" with all the files modified between the last most successful commit and now committed and safe.

Now tar this lot up and back this up somewhere!

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-10T23:32:23.567

将项目克隆到另一个目录中。在那里调查您是否拥有原始文件中的所有参考。

# c# - 如何在 C# T-SQL 查询字符串中使用 % 修饰符？

> ID：11907656
> 
> 赞同：0
> 
> 时间：2012-08-10T18:58:31.520
> 
> 标签：c#, sql-server, modifier

我正在尝试用 C# 编写一个基本查询，其中包括使用 '%' 修饰符。

这是我的查询：

```
SELECT userName 
FROM tblUserInformation 
WHERE userName LIKE %@userNameQuery% 
```

当我运行它时，我得到一个 SQL 异常说

> *@userNameQuery 附近有语法错误。*

我之前遇到过与 SQL 查询和 C# sql 查询字符串类似的差异，但我不确定如何解决这个问题。我试过了：

```
SELECT userID 
FROM tblUserInformation 
WHERE userName LIKE '%'@userNameQuery'%' 
```

下面的不抛出异常但不返回任何结果。应该是因为我可以直接对数据库运行相同的查询并返回许多结果。

```
SELECT userName 
FROM tblUserInformation 
WHERE userName LIKE '%@userNameQuery%' 
```

我这样做正确吗？

此外，`@userNameQuery`正确填写了 SqlParameter 并且是正确的数据类型等。在上面尝试过，第二个有效（没有返回结果）我确信我的查询字符串中没有语法错误（额外的分号或缺少“） .

感谢您的时间！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T19:00:24.980

您需要传入`%`参数的值，而不是在查询本身中。

```
SELECT userName from tblUserInformation WHERE userName LIKE @userNameQuery 
```

会是什么样`@userNameQuery`子`%my query%`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T19:01:06.163

请试试：

```
like '%' + @userNameQuery + '%' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T19:00:53.460

我建议像这样使用它：

1.  写你`query`的`SELECT userName from tblUserInformation WHERE userName LIKE @userNameQuery`
2.  确保`string`你绑定的参数`@userNameQuery`包含必要的`%`，即声明为

    `var userName = @"%name%";`

# jquery - 带有 jQ uery 1.8 的 jQuery UI 1.8.22 在对话框按钮中没有文本

> ID：11907661
> 
> 赞同：19
> 
> 时间：2012-08-10T18:58:56.963
> 
> 标签：jquery, jquery-ui

我去检查最近发布的 jQuery 1.8 (stable) 是否与我当前正在开发的项目兼容，令我惊讶的是，这是我看到的第一件事：

![在此处输入图像描述](../Images/4b54a5760696cf96539d8d6229f53367.png)

这让我很惊讶，因为我已经升级到 jQuery UI 1.8.22，根据它的[发布帖子](http://blog.jqueryui.com/2012/07/jquery-ui-1-8-22/)，它与 jQuery 1.8 兼容。

回调函数是根据调用的，但是按钮没有`textNode`s ，正如在 DOM 检查器中看到的那样：

![在此处输入图像描述](../Images/89546193e9a1aa1bd5963a7a863f07c3.png)

到目前为止，我发现的解决方案是：

1.  降级回 jQuery 1.7.2（不过我想在我的页面中使用最新的 jQuery 版本）
2.  升级到 jQuery UI 1.9.0pre（不稳定）
3.  使用`open`处理程序或手动编辑对话框的 HTML 以包含我想要的文本。对于源代码中的错误，似乎有很多不必要的麻烦。

**我错过了什么还是这是一个实际的错误？**

这是我用于演示的小提琴：

## [**jsFiddle**](http://jsfiddle.net/ult_combo/a8rqJ/)

以及供将来参考的代码：

**HTML**：

```
<div id="foo" title="Dialog title">Dialog text</div> 
```

**JS**：

```
$('#foo').dialog({
    buttons: {
        Yes: function() { $(this).dialog('close'); },
        No: function() { $(this).dialog('close'); }
    }
}); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-10T19:56:33.030

## **编辑：**

这是[BugTracker 票](http://bugs.jqueryui.com/ticket/8484)。

一个更简单的解决方案是在包含 jQuery 库后使用此代码段：

```
if ( $.attrFn ) { $.attrFn.text = true; } 
```

## [*jsFiddle*](http://jsfiddle.net/ult_combo/a8rqJ/14/)

这个问题应该在 jQuery UI 1.8.23 发布后得到修复。来自 BugTracker 票务页面的 scott.gonzalez 的学分。

**编辑**：这已在[UI 1.8.23](http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js)中修复。

* * *

**我的旧解决方案：（**
如果您对上述解决方案有疑问，请使用它）

我已经对这个问题进行了临时修复（直到 UI 或核心的新稳定版本发布）。

jQuery 1.8 与 jQuery UI 1.8.22 交互存在一个错误，它将文本存储在 parent`button`的属性中，而不是在内部`text`创建：`textNode``span.ui-button-text`

![在此处输入图像描述](../Images/d27fbac132066b040c1f0aa80da50808.png)

在初始化 jQuery UI`dialog`或任何其他具有此 UI 按钮错误的界面后使用此代码段：

```
//iterate through all UI button text spans in the document
$('.ui-button-text').each(function() {
    var $this = $(this);
    if ($this.text() == '') //if it has no text (bugged)
        $this.text($this.parent().attr('text')); //sets the text which was passed
}); 
```

## [*jsFiddle*](http://jsfiddle.net/ult_combo/a8rqJ/13/)

该脚本会在执行任何操作之前检查 UI 按钮是否没有文本，因此即使您在升级到未来无错误版本的核心/UI 时忘记了它，保留它也是无害的。

如果您对此错误有更好的解决方案或信息，我很乐意接受。`=]`

请注意，如果您不能等待稳定版本并且仍想使用最新的稳定版本，您可以降级到 jQuery 1.7.2 或使用问题中提到的 UI 1.9.0 的预发布版本。

# iphone - “CGBitmapContextCreate：无效数据字节/行”......为什么相机+过滤会扰乱我的图像裁剪程序？

> ID：11907666
> 
> 赞同：4
> 
> 时间：2012-08-10T18:59:22.837
> 
> 标签：iphone, ios, uiimage, cgbitmapcontextcreate

原始图像：![在此处输入图像描述](../Images/ffb76858437665be61f143f530943951.png) 过滤后的图像：![在此处输入图像描述](../Images/c4cd2516e4ef8fe9d3ba96393f7cc929.png)

我正在尝试将 UIImages（手机相机胶卷中的照片）裁剪成正方形。这是我正在使用的代码的一部分，其中“图像”是被裁剪的图像：

```
if( image.size.height > image.size.width )
{
    dimension = image.size.width;
    imageRef = CGImageCreateWithImageInRect([image CGImage], CGRectMake((image.size.height-dimension)/2, 0, dimension, dimension)); 
```

如果我使用的是原始图像，此时它看起来像这样：![在此处输入图像描述](../Images/6a55d822067d01456d59df293f81bb59.png)

这很好，我所期望的 - 我有一个在这里没有显示的旋转算法来解决这个问题。

如果我使用过滤后的图像，它看起来像这样：![在此处输入图像描述](../Images/540fafefe97cfdcc06f9a4ddf6e8fb84.png)

...不是方形裁剪，而是奇怪地放大了。 **所以这似乎是问题所在**，我不知道为什么这些过滤后的图像表现不同。

```
}
else
{
    dimension = image.size.height;
    imageRef = CGImageCreateWithImageInRect([image CGImage], CGRectMake((image.size.width-dimension)/2, 0, dimension, dimension));
}

CGBitmapInfo bitmapInfo = CGImageGetBitmapInfo(imageRef);
CGColorSpaceRef colorSpaceInfo = CGImageGetColorSpace(imageRef);
CGContextRef bitmap;

bitmap = CGBitmapContextCreate(NULL, dimension, dimension, CGImageGetBitsPerComponent(imageRef), CGImageGetBytesPerRow(imageRef), colorSpaceInfo, bitmapInfo); 
```

我的问题是，在最后一行*CGBitmapContextCreate*，我有时会收到以下错误：

```
<Error>: CGBitmapContextCreate: invalid data bytes/row: should be at least 7744 for 8 integer bits/component, 3 components, kCGImageAlphaNoneSkipLast. 
```

奇怪的是，这通常不会发生 - 到目前为止，我只在原始图像的高度大于宽度时遇到此错误，*并且*它已被另一个名为 Camera+ 的应用程序过滤...之前完全相同的照片过滤没有问题，过滤后的风景照片似乎也很好。

任何人都可以在这里指导我或帮助我解释实际发生的事情吗？我从错误消息中了解到，如果我将*CGImageGetBytesPerRow(imageRef)*替换为高于 7744 的任意数字，则该错误不再发生，但我对 CGImage 的内容了解得不够多，无法知道实际产生的影响任何东西，在我看来，这并不是一个实际的解决方案。此代码基于我在网上看到的其他裁剪示例，因此我对这些位图函数的理解有限。

任何想法将不胜感激！

**编辑**

我在 SO 上发现了这个问题：[在这个 CGBitmapContextCreate 中，为什么 bytesPerRow 为 0？](https://stackoverflow.com/questions/6456788/in-this-cgbitmapcontextcreate-why-is-bytesperrow-0)它提示我尝试将 bytesPerRow 参数设置为 0。事实证明这消除了错误，但我的裁剪例程在与之前发生此错误时相同的情况下无法正常工作。这可能需要一个特别的人来回答，但是有没有人对图像过滤有足够的了解来猜测为什么这个代码会以某种方式对面向肖像、相机+过滤的照片进行不同的处理？由于问题略有变化，我已经更新了标题。

**编辑2**

我在上面的代码中添加了示例图像，最后，在任何必要的旋转之后，最终裁剪的图像如下所示：

与原始图像：![在此处输入图像描述](../Images/c6b397ea40fdcd6b022a1a33a99275a9.png)- 完美！

过滤后的图像：![在此处输入图像描述](../Images/4d1de058bb1683b366268640199fac5d.png)- 可怕！

用于创建这些最终的、被认为是裁剪图像的代码是这样的：

```
CGContextDrawImage(bitmap, CGRectMake(0, 0, dimension, dimension), imageRef);
CGImageRef ref = CGBitmapContextCreateImage(bitmap);
image = [UIImage imageWithCGImage:ref];
UIImageWriteToSavedPhotosAlbum(image, self, @selector(image:didFinishSavingWithError:contextInfo:), nil); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:49:39.197

简而言之-由于某种原因，相机+过滤图像的`imageOrientation`值与原始图像不同。不知何故，这个事实导致了这样的一行：

```
imageRef = CGImageCreateWithImageInRect([image CGImage], CGRectMake((image.size.height-dimension)/2, 0, dimension, dimension)); 
```

根据 的不同表现`imageOrientation`不同`image`。因此，虽然原始图像（其图像方向为*right*或*left*）被这条线旋转到其一侧（这就是为什么我在纵向和横向尺寸中都使用 x 偏移量进行裁剪），但过滤后的图像的方向是*向上的*. 因此，我没有得到预期的旋转，因此过滤后的图像被拉伸了。为了解决这个问题，我在调用 之前检查图像的方向`CGImageCreateWithImageInRect`，如果它是纵向尺寸但具有*向上*方向，我会使用 y 偏移量而不是 x 进行裁剪（就像下面 David H 提到的代码行）。

我的猜测是调用 [image CGImage] 将图像旋转到相对*向上的*位置......所以如果方向是*正确*的，图像会逆时针旋转 90 度，但如果方向是*向上的*，它不会旋转一点也不。我仍然不明白为什么过滤后的图像最终的方向与原始图像不同，但我认为这只是 camera+ 过滤代码中的某种副作用。所有这些方向的东西可能会简单得多，但这似乎是目前的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T01:13:13.527

几点评论：

1）您希望在除以 2 时对值的十六进制值进行四舍五入，以免进入小数像素边界（用户 roundf()）

2）你不处理两个维度相同的情况

3）在第一次创建中，您设置的是 x 偏移而不是 y - 使用此修改后的行：

```
imageRef = CGImageCreateWithImageInRect([image CGImage], CGRectMake(0, (image.size.height-dimension)/2, dimension, dimension)); 
```

# wcf - 客户端服务测试中的 WCF 服务错误 - SVCUtil

> ID：11907668
> 
> 赞同：1
> 
> 时间：2012-08-10T18:59:29.567
> 
> 标签：wcf, wcf-binding, wcf-client, service-reference

我创建了一个 WCF 服务，它编译好并发布好；我创建了一个 Web 应用程序来测试 WCF 服务，最初在使用`svcutil.exe`它时创建了源文件而不是配置文件。因此，我将该服务添加为服务参考，并且在我尝试运行客户端应用程序之前看起来还不错。出现以下错误：

```
Could not find default endpoint element that 
references contract 'ServiceReference1.IService1' in the ServiceModel 
client configuration section. This might be because no configuration 
file was found for your application, or because no endpoint 
element matching this contract could be found in the client element. 
```

我发现 web.config 文件有问题，搜索帖子时发现我需要将服务模型部分从服务配置文件复制到客户端测试 web 配置文件。这没有帮助。

### WCF 服务配置文件

```
<configuration>

<system.web>
<compilation debug="true" strict="false" explicit="true" targetFramework="4.0" />
</system.web>
<system.serviceModel>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
<bindings>
  <webHttpBinding>
    <binding name="webHttpBinding" crossDomainScriptAccessEnabled="true" />
  </webHttpBinding>
</bindings>
<behaviors>
  <endpointBehaviors>
    <behavior name="web">
      <webHttp />
    </behavior>
  </endpointBehaviors>
  <serviceBehaviors>
    <behavior name="webHttpBehavior">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
 </behaviors>
  <services>
  <service behaviorConfiguration="webHttpBehavior" name="WcfInstanceRules2.Service1">
    <endpoint address="mex" 
     binding="webHttpBinding" bindingConfiguration="webHttpBinding"      

    contract="WcfInstanceRules2.IService1" behaviorConfiguration="web"/>
  </service>
 </services>
 </system.serviceModel>
 <system.webServer>
<modules runAllManagedModulesForAllRequests="true"/>
</system.webServer> 
```

### WebApp 测试配置文件

```
 <configuration>
    <connectionStrings>
    <add name="ApplicationServices"
    connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true"
         providerName="System.Data.SqlClient" />
    </connectionStrings>
  <system.web>
    <compilation debug="true" strict="false" explicit="true" targetFramework="4.0" />
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login.aspx" timeout="2880" />
    </authentication>
    <membership>
      <providers>
        <clear/>
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices"
             enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
             maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
             applicationName="/" />
      </providers>
    </membership>
    <profile>
      <providers>
        <clear/>
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/"/>
      </providers>
    </profile>
     <roleManager enabled="false">
      <providers>
        <clear/>
        <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />
        <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
      </providers>
    </roleManager>
    </system.web>
    <system.webServer>
     <modules runAllManagedModulesForAllRequests="true"/>
    </system.webServer>
    <system.serviceModel>
     <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
     <bindings>
      <webHttpBinding>
        <binding name="webHttpBinding" crossDomainScriptAccessEnabled="true" />
      </webHttpBinding>
    </bindings>
    <behaviors>
      <endpointBehaviors>
        <behavior name="webHttpBehavior">
          <webHttp />
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="webHttpBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
        <behavior name="">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
      </behaviors>
       <services>
       <service behaviorConfiguration="webHttpBehavior" name="WcfInstanceRules2.Service1">
        <endpoint address="mex" binding="webHttpBinding"   
     bindingConfiguration="webHttpBinding" 
     contract="WcfInstanceRules2.IService1" behaviorConfiguration="webHttpBehavior"/>
      </service>
     </services>
     </system.serviceModel>
    </configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:08:57.630

您需要使用在**客户端**定义的客户端端点。您当前正在 Web 应用程序上定义一个新的服务主机。在客户端，您应该有类似...

```
<system.serviceModel>
  <client>
     <endpoint address="http://.../mex" binding="webHttpBinding"   
 bindingConfiguration="webHttpBinding" 
 contract="ServiceReference1.IService1" behaviorConfiguration="webHttpBehavior"/>
  </client>
</system.serviceModel> 
```

为了让这更容易，当你使用**[Add Service Reference](http://msdn.microsoft.com/en-us/library/bb628652.aspx)**时，VS.NET 会为你添加这个客户端端点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T11:38:13.813

在您的端点标签更改 contract="ServiceReference1.IService1"

其中 ServiceReference1 是您在项目中添加的服务引用。

# python - 从文件中读取然后再写出来后，我得到了汉字

> ID：11907669
> 
> 赞同：4
> 
> 时间：2012-08-10T18:59:32.080
> 
> 标签：python, python-2.7

我正在读取文件中的所有行，然后再次将它们写出来。当我这样做时，我写出的文件最终大部分是汉字。我根本没有修改任何行。这是我的 Python 代码：

```
#test.py
import os, sys, time
import getopt

if __name__=='__main__':
    testFile = None
    try:
        optlist, args = getopt.getopt(sys.argv[1:],"",["file="])
    except Exception, e:
        print e
        sys.exit(1)
    for opt, arg in optlist:
        if opt == '--file':
            testFile = arg.strip()

    print testFile
    if os.path.isfile(testFile):
        f = open(testFile, 'r')
        lines = f.readlines()
        f.close()
        f = open(testFile, 'w')
        for line in lines:
            f.write(line)
        f.close() 
```

这是我正在测试此代码的原始文件：

```
param($Identity = "")

if($_INITIALIZATION_isLoaded -ne $true){
    #load initialization script
    . ((split-path -parent $myInvocation.InvocationName) + "\stuff.ps1")
} 
```

在我的文件写入之后，这是文件的内容：

```
param($Identity = "")

਀ഀഊ

਀椀昀⠀␀开䤀一䤀吀䤀䄀䰀䤀娀䄀吀䤀伀一开椀猀䰀漀愀搀攀搀 ⴀ渀攀 ␀琀爀甀攀⤀笀ഀഊ #load initialization script

਀ऀ⸀ ⠀⠀猀瀀氀椀琀ⴀ瀀愀琀栀 ⴀ瀀愀爀攀渀琀 ␀洀礀䤀渀瘀漀挀愀琀椀漀渀⸀䤀渀瘀漀挀愀琀椀漀渀一愀洀攀⤀ ⬀ ∀尀猀琀甀昀昀⸀瀀猀㄀∀⤀ഀഊ} 
```

我运行 Python 脚本的命令行语句是：

```
python test.py --file="test.txt" 
```

我在 Windows 7 上使用 Python 2.7 执行此操作。是什么原因造成的，我该如何解决？谢谢。

编辑：

如果我`print lines`在我的脚本中添加一个，我会得到这个：

```
['\xfe\xff\x00p\x00a\x00r\x00a\x00m\x00(\x00$\x00I\x00d\x00e\x00n\x00t\x00i\x00t\x00y\x00 \x00=\x00 \x00"\x00"\x00)\x00\r\x00\n', '\x00\r\x00\n', '\x00\r\x00\n'
, '\x00i\x00f\x00(\x00$\x00_\x00I\x00N\x00I\x00T\x00I\x00A\x00L\x00I\x00Z\x00A\x00T\x00I\x00O\x00N\x00_\x00i\x00s\x00L\x00o\x00a\x00d\x00e\x00d\x00 \x00-\x00n\x
00e\x00 \x00$\x00t\x00r\x00u\x00e\x00)\x00{\x00\r\x00\n', '\x00\t\x00#\x00l\x00o\x00a\x00d\x00 \x00i\x00n\x00i\x00t\x00i\x00a\x00l\x00i\x00z\x00a\x00t\x00i\x00o
\x00n\x00 \x00s\x00c\x00r\x00i\x00p\x00t\x00\r\x00\n', '\x00\t\x00.\x00 \x00(\x00(\x00s\x00p\x00l\x00i\x00t\x00-\x00p\x00a\x00t\x00h\x00 \x00-\x00p\x00a\x00r\x0
0e\x00n\x00t\x00 \x00$\x00m\x00y\x00I\x00n\x00v\x00o\x00c\x00a\x00t\x00i\x00o\x00n\x00.\x00I\x00n\x00v\x00o\x00c\x00a\x00t\x00i\x00o\x00n\x00N\x00a\x00m\x00e\x0
0)\x00 \x00+\x00 \x00"\x00\\\x00s\x00t\x00u\x00f\x00f\x00.\x00p\x00s\x001\x00"\x00)\x00\r\x00\n', '\x00}\x00\r\x00\n'] 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-10T19:12:34.690

您的原始文件采用 UTF-16 格式，并且一个字节被丢弃在某处，导致您的所有字符都偏离了一个字节。

```
$ charinfo "䤀一䤀吀"
U+4900 CJK UNIFIED IDEOGRAPH-4900
U+4E00 CJK UNIFIED IDEOGRAPH-4E00
U+4900 CJK UNIFIED IDEOGRAPH-4900
U+5400 CJK UNIFIED IDEOGRAPH-5400
$ charinfo "INIT"
U+0049 LATIN CAPITAL LETTER I
U+004E LATIN CAPITAL LETTER N
U+0049 LATIN CAPITAL LETTER I
U+0054 LATIN CAPITAL LETTER T 
```

考虑使用[`codecs.open()`](http://docs.python.org/library/codecs.html#codecs.open)它来处理转码问题。

# c# - Why can't the OUT generic modifier by applied to classes as well as interfaces?

> ID：11907670
> 
> 赞同：4
> 
> 时间：2012-08-10T18:59:45.767
> 
> 标签：c#

> **Possible Duplicate:**
> [Why isn't there generic variance for classes in C# 4.0?](https://stackoverflow.com/questions/2733346/why-isnt-there-generic-variance-for-classes-in-c-sharp-4-0)

Example:

```
interface foo<out T> where T : BaseThing { } 
```

compiles

```
class foo<out T> where T : BaseThing { } 
```

does not.

Is this just unsupported, or is there some reason why it can never work or doesn't make logical sense?

Edit: Here's what I Wanted to do in case someone was wondering...

```
 class BaseThing { }
        class DerivedThing : BaseThing { }

        class foo<out T> where T : BaseThing { }
        class bar : foo<DerivedThing> { }

        private void test()
        {
            foo<BaseThing> fooInstance = new bar();
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T19:05:12.340

修饰符告诉编译器`out`类型参数可以是协变的。这意味着 T 类型的使用可能更加衍生。由于您使用的是特定类（例如构造的泛型类型），因此只有一个具体类型的实例，因此没有更多派生类型在起作用。多种类型可以实现像 foo 这样的接口，这意味着您正在处理可能不同类型的 T，在这种情况下，这些 T 类型中的一个可能派生更多。

# javascript - jQuery Animated Div Scroller

> ID：11907675
> 
> 赞同：1
> 
> 时间：2012-08-10T18:59:58.040
> 
> 标签：javascript, jquery, scroll

I have a Div with `395px` of Height, and `overflow` `hidden`, like this:

```
<style>
   ​#content {
       width: 100%;
       height: 395px;
       overflow: hidden;
}​
</style>

<div id="content">
    1<br>2<br>3<br>4<br>......<br>29<br>30<br>
    1<br>2<br>3<br>4<br>......<br>29<br>30<br>
</div>

<a href="#">UP</a>
<a href="#">DOWN</a>​​​​​​​​​ 
```

The buttons should scroll the content of the div, but not in Mouse Over, I want to a single click scroll 132px of height and with EaseOutCubic. I found a lot of scroller, but all with Mouse over, I need them working with the Mouse Click.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T19:09:43.767

你可以使用这样的东西

```
<style>
   ​#content {
       width: 100%;
       height: 395px;
       overflow: scroll;
}​
</style>

<div id="content">
    1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>
    11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>
    21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>
    1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>
    11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>
    21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>
</div>

<a href="#" class="up">UP</a>
<a href="#" class="up">DOWN</a>​​​​​​​​​

<script type="text/javascript">
(jQuery.noConflict())(function($){
  $('a.up').click(function(){
    var newTop = $('#content').scrollTop() + 132;
    //TODO: newtop not greater than height - 132
    $('#content').animate({'scrollTop': newTop}, 250);
  });
});
</script> 
```

# performance - Blackbox Performance Testing Snort

> ID：11907677
> 
> 赞同：0
> 
> 时间：2012-08-10T19:00:12.110
> 
> 标签：performance

I am looking for several ways to test Snort and compare it's overall speed when changing specific variables such as how many rules are ran, etc. What I am interested in is the best practice to obtain the raw data I am looking for. Do I simply use the `time` function in any standard Linux distro or are there specific programs capable of performing multiple tests and correlating the data as specified by my input.

To expand on this same question are there more general steps I can take to perform black box performance testing on a variety of other programs.

How do I obtain the raw data to begin with?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:47:17.743

好吧，我能找到的最接近的东西是`gprof`. 如果有人有任何其他建议，那就太好了。

# java - Memory and speed efficient search on Strings

> ID：11907681
> 
> 赞同：1
> 
> 时间：2012-08-10T19:00:25.090
> 
> 标签：java, algorithm, data-structures, size, space-efficiency

I have a bunch of `String`s I'd like a fast lookup for. Each String is 22 chars long and is looked up by the first 12 only (the "key" so to say), the full set of Strings is recreated periodically. They are loaded from a file and refreshed when the file changes. I have to deal with too little available memory, other server processes on my VPS need it too and need it more.

How do I best store the Strings and search for them?

My current idea is to store them all one after another inside a `char[]` (to save RAM), and sort them for faster lookups (I figure the lookup is fastest if I have them presorted so I can use [binary](http://en.wikipedia.org/wiki/Binary_search) or [interpolation](http://en.wikipedia.org/wiki/Interpolation_search) search). But I'm not exactly sure how I should code it - if anyone is in the mood for a challenging puzzle: here it is...

Btw: It's probably ok to exceed the memory constraints for a while during the recreation / sorting, but it shouldn't be by much or for long.

Thanks!

**Update**

For the "I want to know specifics" crowd (correct me if I'm wrong in the Java details): The source files contain about 320 000 entries (all ANSI text), I really want to stay (WAY!) below 64 MB RAM usage and the data is only part of my program. Here's some information on [sizes of Java types](http://kohlerm.blogspot.de/2008/12/how-much-memory-is-used-by-my-java.html) in memory.

My VPS is a 32bit OS, so...

*   one `byte[]`, all concatenated = 12 + length bytes
*   one `char[]`, all concatenated = 12 + length * 2 bytes
*   `String` = 32 + length * 2 bytes (is Object, has `char[]` + 3 `int`)

So I have to keep in memory:

*   ~7 MB if all are stored in a `byte[]`
*   ~14 MB if all are stored in a `char[]`
*   ~25 MB if all are stored in a `String[]`
*   > 40 MB if they are stored in a HashTable / Map (for which I'd probably have to finetune the initial capacity)

A HashTable is not magical - it helps on insertion, but in principle it's just a very long array of String where the hashCode modulus capacity is used as an index, the data is stored in the next free position after the index and searched lineary if it's not found there on lookup. But for a Hashtable, I'd need the String itself and a substring of the first 12 chars for lookup. I don't want that (or do I miss something here?), sorry folks...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:19:05.480

听起来[HashTable](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Hashtable.html)将是这种情况的正确实现。

搜索在恒定时间内完成，刷新可以在线性时间内完成。

[Java 数据结构 Big-O](http://www.coderfriendly.com/wp-content/uploads/2009/05/java_collections_v2.pdf)（警告 PDF）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T19:05:10.170

我可能会为此使用缓存解决方案，甚至可能是番石榴。当然对它们进行排序，然后是二进制搜索。不幸的是，我没有时间 :(

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T23:22:37.347

我自己编写了一个解决方案 - 但它与我发布的问题有点不同，因为我可以使用我没有发布的信息（我下次会做得更好，抱歉）。

我只是回答这个问题，因为它已经解决了，我不会接受其他答案之一，因为它们并没有真正帮助解决内存限制（而且对我的口味来说有点短）。他们仍然得到了每个人的支持，没有难过的感觉，感谢您抽出宝贵的时间！

我设法将所有信息推送到两个 long 中（密钥完全位于第一个中）。前 12 个字符是一个 ISIN，可以压缩成一个长字符，因为它只使用数字和大写字母，总是以两个大写字母开头，以一个可以从其他字符重构的数字结尾。所有可能值的乘积留下了略多于 3 位的余量。

我将源文件中的所有条目存储在一个`long[]`（首先打包的 ISIN，第二个 long 中的其他内容）中，并根据两个 long 中的第一个对它们进行排序。

当我通过键进行查询时，我将其转换为 long，进行二进制搜索（我可能会更改为插值搜索）并返回匹配索引。值的不同部分可以通过所述索引检索 - 我从数组中获取第二个 long，解包并返回请求的数据。

结果：RAM 使用量从 ~110 MB 下降到 < 50 MB，包括 Jetty（顺便说一句——我之前使用过 HashTable），并且查找速度快如闪电。

# haskell - Existentially quantified type class

> ID：11907684
> 
> 赞同：4
> 
> 时间：2012-08-10T19:00:26.553
> 
> 标签：haskell

What is the type-class equivalent to the following existentially quantified dictionary, inspired by the `Pipe` type:

```
{-# LANGUAGE ExistentialQuantification, PolymorphicComponents #-}

data PipeD p = forall cat . PipeD {
    isoI        :: forall a b   m r . Iso (->) (p a b m r) (cat m r a b),
    categoryI   :: forall       m r . (Monad m) => CategoryI (cat m r)  ,
    monadI      :: forall a b   m   . (Monad m) => MonadI (p a b m)     ,
    monadTransI :: forall a b       . MonadTransI (p a b)               } 
```

The rough idea I'm going for is trying to say that given the `(PipeLike p)` constraint, we can then infer `(MonadTrans (p a b), Monad (p a b m)` and (using pseudo-code) `(Category "\a b -> p a b m r")`.

The `CategoryI` and `MonadI` are just the dictionary equivalents of those type-classes that I use to express the idea that `Category`, `Monad`, and `MonadTrans` are (sort of) super-classes of this `PipeLike` type.

The `Iso` type is just the following dictionary storing an isomorphism:

```
data Iso (~>) a b = Iso {
    fw :: a ~> b ,
    bw :: b ~> a } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T21:35:51.107

如果这确实是一个类型类，那么字典值仅由类型确定`p`。特别是，类型`cat`仅由 确定`p`。这可以使用*关联的数据类型*来表示。在类定义中，关联数据类型的编写方式类似于没有右侧的数据定义。

一旦你表达`cat`为一个类型，其他成员可以很容易地更改为类型类，正如我在`Monad`和中展示的那样`MonadTrans`。请注意，我更喜欢对复杂种类使用显式种类签名。

```
{-# LANGUAGE TypeFamilies, FlexibleInstances, UndecidableInstances #-}

class Pipe (p :: * -> * -> (* -> *) -> * -> *) where
  data Cat p :: (* -> *) -> * -> * -> * -> *
  isoI      :: forall a b m r. Iso (->) (p a b m r) (Category p m r a b)
  categoryI :: forall a b m.   Monad m => CategoryI (Category p m r)

instance (Pipe p, Monad m) => Monad (p a b m)

instance Pipe p => MonadTrans (p a b) 
```

# parsing - How to back reference AST in custom rewrite action?

> ID：11907685
> 
> 赞同：1
> 
> 时间：2012-08-10T19:00:25.787
> 
> 标签：parsing, rewrite, antlr, abstract-syntax-tree, backreference

*I already know the workaround for this problem, but I would like to really use this one approach, for at least one reason -- it should work.*

This is rule taken from "The Definitive ANTLR Reference" by Terence Parr (the books is for ANTLR3):

```
expr : (INT -> INT) ('+' i=INT -> ^('+' $expr $i) )*; 
```

If `INT` is not followed by `+` the result will be INT (single node), if it is -- subtree will be built with first `INT` (referred as `$expr`) as left branch.

I would like to build similar rule, yet with custom action:

```
mult_expr : (pow_expr -> pow_expr ) 
            (op=MUL exr=pow_expr 
              -> { new BinExpr($op,$mult_expr.tree,$exr.tree) })*; 
```

ANTLR accepts such rule, but when I run my parser with input (for example) "5 * 3" it gives me an error "line 1:1 missing EOF at '*'5".

**QUESTION**: how to use back reference with custom rewrite action?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:12:23.633

我建议您创建自己的`CommonTreeAdaptor`并将自定义节点的创建移至此，`CommonTreeAdaptor`而不是在您的语法文件中执行此操作。有关这方面的更多信息，请参阅：[扩展 ANTLR3 AST's](https://stackoverflow.com/questions/7635729/extend-antlr3-asts)

如果运算符可能具有多种含义，例如减号（二元或一元运算符），请让您的解析器规则重写一元运算符，如下所示：

```
grammar X;

...

tokens { U_SUB; } 

add_expr
 : mult_expr ((SUB | ADD)^ mult_expr)*
 ;

...

unary_expr
 : SUB atom -> ^(U_SUB atom)
 | atom
 ;

... 
```

然后在你的实现中`CommonTreeAdaptor`，做这样的事情：

```
@Override
public Object create(Token t) {
  ...
  switch(t.getType()) {
    case X.SUB   : /* return a binary-tree */
    ...
    case X.U_SUB : /* return an unary-tree */
  }
  ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T16:22:19.897

*我是一个坚持不懈的人，一步使用自定义节点的想法让我很困扰...... ;-)*

所以我做了。关键点是：

*   放在`EOF!`“主要”规则的末尾，

*   在标记标记时，将标签放在标记旁边，而不是分组，所以`(op='*'|op='/')`，不是`op=('*'|'/')`

我不确定这种使用语法规则来立即创建自定义节点的方法是否是一个好主意，但由于这解决了所提出的问题，我将其标记为解决方案。

为了记录，最有趣的规则现在看起来像这样：

```
mult_expr : (exl=pow_expr -> $exl ) 
        ((op=MUL|op=IDIV|op=RDIV|op=MOD) exr=pow_expr 
        -> { new BinaryExpression($op,$exl.tree,$exr.tree) })*; 
```

# xcode - How to change value in UISegmentedControl?

> ID：11907686
> 
> 赞同：1
> 
> 时间：2012-08-10T19:00:29.283
> 
> 标签：xcode, xcode4.3, uisegmentedcontrol

I have set up a segmented control in my project. I want to use it in my settings scene to control whether the orientation is landscape left or landscape right. I have in set up in my storyboard and here is my code in my SettingsViewController.h

```
#import <UIKit/UIKit.h>

@interface SettingsViewController : UIViewController
{
    IBOutlet UISegmentedControl *orientation;
}

@property (nonatomic, retain) UISegmentedControl *orientation;

- (IBAction) setOrientation;

@end 
```

and here is my code in SettingsViewController.m

```
#import "SettingsViewController.h"

@implementation SettingsViewController

@synthesize orientation;

- (IBAction)setOrientation
{
    NSLog(@"index = %d\n", orientation.selectedSegmentIndex);
    if (orientation.selectedSegmentIndex == 0) {
        NSLog(@"left\n");
    }
    if (orientation.selectedSegmentIndex == 1) {
        NSLog(@"right\n");
    }

}  

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad 
{
    [super viewDidLoad];

}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

@end 
```

I was wondering why the value isn't changing from 0 to 1 when I select the right side of the control. Also I was wondering if in my .h I need to declare IBOutlet because I dont use the segmented control as an outlet. I just use it to take in which side is selected and then use that to set the orientation of the app.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:05:58.550

尝试这个。使用 valueChanged 在 Storyboard 中将其连接到 segmentedControl。

```
- (IBAction)segmentedControlChanged:(id)sender {
    UISegmentedControl *segmentedC = (UISegmentedControl *)sender;

    if (segmentedC.selectedSegmentIndex == 0) {
//      NSLog(@"selectedSegmentIndex == 0");
        [self selectFirstSegment];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T19:07:54.377

在段动作中设置方向景观或potriat ..并在.m文件中设置布尔方向类型方法集的结尾

```
return yes; 
```

在所有 .m 文件中。

# r - Quick way to reshape

> ID：11907687
> 
> 赞同：3
> 
> 时间：2012-08-10T19:00:32.297
> 
> 标签：r

> **Possible Duplicate:**
> [Reshape data from long to wide format R](https://stackoverflow.com/questions/5890584/reshape-data-from-long-to-wide-format-r)

With:

```
day <- c(1, 1, 2, 2)
prod <- c(1, 2, 1, 2)
cost <- c(20.1, 17.7, 15.2, 23.3)
record <- data.frame(day=day, prod=prod, cost=cost)

record
  day prod cost
1   1    1 20.1
2   1    2 17.7
3   2    1 15.2
4   2    2 23.3 
```

What is a good (quick) way to reshape the data as:

```
 day_1 day_2
prod_1  20.1  15.2
prod_2  17.7  23.3 
```

Thanks!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T19:15:00.927

我们也可以使用`xtabs`

```
xtabs(cost ~ prod + day, data = record)

    day
prod    1    2
   1 20.1 15.2
   2 17.7 23.3 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T19:13:56.100

为什么不使用`tapply`- sum 函数无关紧要，因为您具有唯一值：

```
> tapply(record$cost,list(record$prod, record$day), FUN=sum)

     1    2
1 20.1 15.2
2 17.7 23.3 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-10T19:12:11.037

我认为包`dcast`中`reshape2`有最简单的语法：

```
library(reshape2)
dcast(prod ~ day, data=record, value.var='cost')

  prod    1    2
1    1 20.1 15.2
2    2 17.7 23.3 
```

然而，这个问题已经被问过很多次了，很可能很快就会结束。

# c# - MapPageRoute with Similar routeURL

> ID：11907688
> 
> 赞同：0
> 
> 时间：2012-08-10T19:00:35.767
> 
> 标签：c#, asp.net, c#-4.0

I need this sort of redirect to happen in my application:

/car go to show-all-cars.aspx

/car/1234 go to edit-car.aspx

This is my current code in global.asax:

```
routeCollection.MapPageRoute("car-edit",
                "car/{id}",
                "~/car-edit.aspx",
                true,
                new RouteValueDictionary { { "id" } });

routeCollection.MapPageRoute("car-all",
                "car",
                "~/show-all-cars.aspx",
                true); 
```

For some reason, going to /car results in a redirect to car-edit.aspx instead of show-all-cars.aspx as needed.

Any ideas?

Webforms C#.NET 4.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:07:43.367

只需交换两条路线，即将第二条路线放在第一条之前。

# modx - MODx Relative Links Broken

> ID：11907694
> 
> 赞同：1
> 
> 时间：2012-08-10T19:00:45.830
> 
> 标签：modx, modx-revolution

I was having a lot of trouble getting relative links working in MODx. As soon as I made a container and put some pages one level above the root, nothing was linking correctly. Lots of missing images and broken links.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T19:00:45.830

**NOTE: This fix apparently will break all links linking to content identifiers.**

I fixed it by putting the following at the top of the web template:

```
<base href="[[++site_url]]" /> 
```

You have to use that. If you hardcode it, it will screw up depending on which protocol you use, http or https.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-09T05:48:05.713

StingyB 的回答是正确的。这个标签应该在所有 MODX 模板的 head 部分：

```
`<base href="[[++site_url]]" />` 
```

请注意，如果您有多个前端上下文，则应不缓存占位符：

```
`<base href="[[!++site_url]]" />` 
```

此外，它必须是一个短标签。这将不起作用：

```
`<base href="[[!++site_url]]"></base>` 
```

我不确定关于“破坏所有链接到内容标识符的链接”的评论来自哪里。这些标签在所有 MODX 安装中都是标准的。

# c# - 读取 TcpListener 的 NetworkStream 时发出 WebRequest

> ID：11907696
> 
> 赞同：-1
> 
> 时间：2012-08-10T19:00:48.570
> 
> 标签：c#, sockets, proxy, httpwebrequest

继[如何在 C# 中创建简单代理？](https://stackoverflow.com/questions/226784/how-to-create-a-simple-proxy-in-c)我一直在玩实现一个基本的代理。

我陷入困境和困惑的地方是尝试`WebRequest`使用原始请求中提供的信息发出一个。

使用以下代码。

```
WebRequest webRequest = WebRequest.Create("http://www.google.com");

(webRequest as HttpWebRequest).UserAgent = "MOZILLA/5.0 (WINDOWS NT 6.1; WOW64) APPLEWEBKIT/537.1 (KHTML, LIKE GECKO) CHROME/21.0.1180.75 SAFARI/537.1";
webRequest.Method = "GET";

WebResponse webResponse = webRequest.GetResponse();
Stream responseStream = webResponse.GetResponseStream();
byte[] responseBytes = responseStream.ReadFully(); 
```

我可以成功发出请求并返回页面内容。

但是，当我将它放在这样的代理请求（IE:）中时`TcpListener`。

```
TcpListener _listener = new TcpListener(IPAddress.Any, 1234);
this._listener.Start();
byte[] bytes = new byte[1024];
while (true)
{
    TcpClient client = this._listener.AcceptTcpClient();
    NetworkStream networkStream = client.GetStream();
    int i = networkStream.Read(bytes, 0, bytes.Length);
    while (i != 0)
    {
        string data = System.Text.Encoding.ASCII.GetString(bytes, 0, i);
        RequestHeader header = new RequestHeader(data.ToUpper());
        WebRequest webRequest = WebRequest.Create(header.URL);
        (webRequest as HttpWebRequest).UserAgent = header.UserAgent;
        webRequest.Method = "GET";
        WebResponse webResponse = webRequest.GetResponse(); //It gets here and never returns
        Stream responseStream = webResponse.GetResponseStream();
        byte[] responseBytes = responseStream.ReadFully();
        networkStream.Write(responseBytes, 0, responseBytes.Length);
        i = networkStream.Read(bytes, 0, bytes.Length);
    }
    client.Close();
} 
```

它在线路上阻塞`WebResponse webResponse = webRequest.GetResponse();`并且永远不会返回。

这肯定与我创建的类提供的数据无关，`RequestHeader`因为我也尝试过硬编码这些值。

我假设我缺少关于套接字在这种情况下的工作方式和所需方法的基本知识。希望有人可以为我澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:40:43.690

是的，你假设你已经阅读了所有的标题。

取而代之的是，应该实现某种状态机来解析传入的 HTTP 请求。状态机必须收集有关请求的信息，当然，检测**请求的结束**，然后您处理请求（代理内容）并发送响应。仅以 Google **C# http 状态机**为例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T08:08:15.217

所以它原来是一个代理问题。

基本上为了测试我需要将机器代理设置为 127.0.0.1:1234 或类似的。

在初始化`WebRequest`.

所以我最终需要做的就是绕过代理。

```
(webRequest as HttpWebRequest).UserAgent = header.UserAgent;
webRequest.Method = "GET";
webRequest.Proxy = null; //Adding this line cleared the proxy. 
```

# ant - 使用 Ant/Ivy 创建 pom.xml 和 pom.properties 并将它们嵌入到 jar/war 文件中

> ID：11907704
> 
> 赞同：1
> 
> 时间：2012-08-10T19:01:33.043
> 
> 标签：ant, ivy, pom.xml

我们将 Ant 与 Ivy 一起使用，我想嵌入到我们创建的 jars 和 wars 中`pom.xml`，`pom.properties`就像您使用 Maven 时看到的一样。`pom.xml`从文件创建一个任务`ivy.xml`非常简单`<ivy:makepom>`。可以通过`<xmlproperty>`任务来获取 artifactId 和 gorupId。但是，如何创建`pom.properties`文件。那有必要吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T21:16:12.977

好的，在浏览文档时，我发现它比我想象的要容易得多。Ivy 生成了很多可以使用的属性。我还发现该`pom.xml`文件只包含`groupId`,`artifactId`和`version`，所以生成起来并不难。

这是我所做的：

```
<target name="package" depends="compile">

    <!-- Make the pom.xml -->
    <ivy:makepom ivyfile="${ivy.resolved.file}"
        pomfile="${target.dir}/pom.xml"/>

    <!-- Make the pom.properties file -->
    <echo file="${target.dir}/pom.properties">
# Generated by Maven NOT!
# ${build.date}
version=${ivy.revision}
groupId="${ivy.organisation}
artifactId="${ivy.module}
    </echo>

<!-- Build your JAR or whatever -->

    <jar destfile="${target.dir}/{ant.project.name}.jar"
         basedir="${main.destdir}">
         <manifest>
              <section name="Build-Information">
                  <attribute name="Project" value="${env.JOB_NAME}"/>
                  <attribute name="Build-Number" value="${env.BUILD_NUMBER}"/>
                  <attribute name="Build-Date" value="${build.date}"/>
              </section>
         </manifest>
         <zipfileset dir="${target.dir}"
              prefix="$META-INF/maven/${ivy.organisation}/${ivy.module}">
              <include name="pom.xml"/>
              <include name="pom.properties"/>
         </zipfileset>
     </jar>
</target> 
```

这有助于使 Ivy 与 Maven 非常兼容。

# iphone - 通过 HTTP Live Streaming 在 iPhone 上显示 DVR 摄像机视频

> ID：11907708
> 
> 赞同：1
> 
> 时间：2012-08-10T19:01:51.810
> 
> 标签：iphone, ios, media-player, http-live-streaming

我搜索了很多，但找不到编码部分。**[HTTP 实时视频流介绍](https://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/StreamingMediaGuide/Introduction/Introduction.html)**。

![ts 文件图像](../Images/a99488cba9815635f31b55f0e32a96f0.png)

在此链接中，我想知道如何制作索引文件和“.ts”文件以及如何在 iPhone 中实现。我已经完成了编码。

```
 -(void)replayVedio
{
         NSURL *url = [NSURL URLWithString:@"http://www.cwtmedia.se/cwtiphone/cwtvideo.mp4"];
    moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];
    [moviePlayer setControlStyle:MPMovieControlStyleDefault];
    moviePlayer.scalingMode = MPMovieScalingModeAspectFit;
    CGRect frame;
    if(self.interfaceOrientation ==UIInterfaceOrientationPortrait)
        frame = CGRectMake(0, 0, 320,400);
    //    else if(self.interfaceOrientation ==UIInterfaceOrientationLandscapeLeft || self.interfaceOrientation ==UIInterfaceOrientationLandscapeRight)
    //        frame = CGRectMake(0,0, 210, 170);
    [moviePlayer.view setFrame:frame];  // player's frame must match parent's
    [self.view addSubview: moviePlayer.view];
    [self.view bringSubviewToFront:moviePlayer.view];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(moviePlayBackDidFinish:)
                                                 name:MPMoviePlayerPlaybackDidFinishNotification
                                               object:moviePlayer];

    [moviePlayer prepareToPlay];
    [moviePlayer play]; 

 } 
```

但我不想要那个。我要这个

![在此处输入图像描述](../Images/47f4b58dae52db14af46fb670ae14f54.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:50:13.763

首先你必须从苹果开发网站下载http直播工具，这确实是一个困难的部分。然后它将安装一些工具，您可以使用媒体文件分段器将 mp4 或任何视频转换为 .ts 和 .m3u8 文件（在终端写入-> mediafilesegmenter -t 10 fileName.mp4），这些工具将转换 ts 文件和 m3u8 文件。然后您可以在 html 和 vlc 中使用来检查您的索引文件。并查看[此](https://stackoverflow.com/questions/6592485/http-live-streaming)链接

# usb - 在远程机器上执行

> ID：11907709
> 
> 赞同：0
> 
> 时间：2012-08-10T19:01:54.743
> 
> 标签：usb, serial-port, remote-access

**设置**

我们在办公室有一个空调装置，但需要一个小时才能开始冷却这个地方，我有一个通过 com 端口进行通信的 IR USB 设备。我有一个实用程序可以发送各种 IR 代码来控制空调装置。

我使用 .bat 文件加载 .exe 和 .bin 文件

```
irtoy.exe -d COM4 -p -a 100 -f ACPowerToggle.bin 
```

我的问题是在远程服务器上执行此操作的最佳方式是什么？是否有可能来自网络服务器或其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:06:25.867

我建议使用像[OpenSSH这样的](http://www.openssh.com/)[SSH 服务器](http://en.wikipedia.org/wiki/Secure_Shell)，除了提供安全访问之外，您还可以执行程序、管理所需的一切以及直接访问计算机的操作系统。

**编辑：**

是的，您可以使用[iOS](http://itunes.apple.com/us/app/prompt/id421507115?mt=8)和[Android](https://play.google.com/store/apps/details?id=berserker.android.apps.sshdroidpro&feature=more_from_developer#?t=W251bGwsMSwxLDEwMiwiYmVyc2Vya2VyLmFuZHJvaWQuYXBwcy5zc2hkcm9pZHBybyJd)应用程序通过智能手机访问您的 SSH 服务器。

# java - 尴尬的 OOP：不同类的相同方法未继承？

> ID：11907711
> 
> 赞同：4
> 
> 时间：2012-08-10T19:01:58.053
> 
> 标签：java, oop, inheritance

这是交易：我有两个不同类的对象， a`DataSizeAction`和 a `DataColorAction`。`EncoderAction`这些类在链的不远处有一个共同的祖先。

这两个对象都公开了一个名为的方法，该方法`setScale(int scale)`为它们执行的编码设置比例类型。该方法在两种情况下都做同样的事情。

但是，该方法不存在于任何共同的祖先中（顺便说一句，这个 OO 是我正在使用的库，并且设计不取决于我的判断）。

我想编写一个采用 DataSizeAction 或 DataColorAction 并在该对象上调用 setScale 的方法。

我的问题是：在我用 暴力破解单独的案例之前`instanceof`，有没有更优雅的方法来处理这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T19:08:49.187

您可以将接口添加到您的层次结构吗？

```
interface IScalable {
   void setScale(int scale);
   int getScale();
}

class DataSizeAction extends EncoderAction implements IScalable {
   ...
}

class SomeoneElse {
   private int scale = 2;

   public void setScale(IScalable scalable) {
      scalable.setScale(this.scale);
   }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T19:08:09.313

试试这个：

1.  制作另一个扩展的类`EncoderAction`
2.  在其中声明`setScale`为抽象方法
3.  拥有`DataSizeAction`并`DataColorAction`扩展您的新课程。

现在，您可以编写代码来引用新基类的实例并避免调用`instanceof`检查。

**注意**：即使我在这里应该工作，我会推荐[Jonathon](https://stackoverflow.com/users/203600/jonathon)的回答。由于这是功能的保证，并且与您的对象的组合没有任何关系，因此接口可能是要走的路。

# list - Class [c in groovy

> ID：11907712
> 
> 赞同：2
> 
> 时间：2012-08-10T19:02:05.643
> 
> 标签：list, groovy

I have an app in grails which uses list contained in a map. I am using the list for simple string comparison in my code (value[0]=="something" for example). the println showed the value[0] to be "something" but the test always failed. On further checking the class for value[0] [through value[0].getClass() ], I found the class of type [C. Anybody has any clue on this. The list is stored in a map and I am doing a map.each to get to the list (if that makes a difference). Here is my code and println output in my console.

## code

```
println "it.value[0] = " + it.value[0]
println "it.value[1] = " + it.value[1]
println "it.value[2] = " + it.value[2]

println "it.value[0] class = "+ it.value[0].getClass()
println "it.value[1] class = "+ it.value[1].getClass()
println "it.value[2] class = "+ it.value[2].getClass() 
```

## output

```
it.value[0] = abc
it.value[1] = def
it.value[2] = ghi

it.value[0] class = class [C
it.value[1] class = class [C
it.value[2] class = class [C 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T20:44:31.630

`[C`是原始字符数组 ( `char[]`) 的 Java 字段描述符。当您检查数组类型的类名时会显示这些。

```
assert ("foo" as char[]).getClass().toString() == 'class [C' 
```

它们如何构建的规则位于字段描述符的[JVM 规范部分](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.3.2)。

# php - 在 PHP 中的 Facebook 好友列表中查找 UserId 的有效方法

> ID：11907714
> 
> 赞同：0
> 
> 时间：2012-08-10T19:02:14.600
> 
> 标签：php, facebook, facebook-graph-api

我正在尝试确定两个 Facebook 用户是否是朋友。我有两个用户的 userId，所以我可以使用以下方法获取其中一个用户的朋友列表：

```
 $friends = $facebook->api('/me/friends'); 
```

User 对象的文档说 id 是一个“字符串”。问题是当返回好友列表时，它不是按字符串排序的，而是按数字排序的。例如，我看到：

```
{"name":"AAAAA","id":"200000"},
{"name":"XXX YYY","id":"700000"},
{"name":"BBBB EEEE","id":"1200000"},
{"name":"OOOO GGGGG","id":"1200001"},
{"name":"PPPPP EEEEEE","id":"130000"},
{"name":"CCCCC CCCCCC","id":"100002999999999"},
... 
```

如果我想在列表中找到一个 userId，如果它是一个“数字”，我可以将 id 转换为一个数字并进行二进制搜索。

但是，一些 userId 非常大，所以我怀疑它们必须是 64 位整数。而且因为我在 32 位 Linux 系统上运行，所以 PHP 不支持 64 位整数。

那么，这是否意味着它是按顺序遍历此列表的最佳方式，还是可能有更有效的方式来查找 userId？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T21:50:31.553

您应该尝试使用**FQL**。似乎它可以满足您的需求：

```
SELECT uid1, uid2 FROM friend WHERE uid1 = me() AND uid2 = ... 
```

[**Facebook 文档 - FQL 好友表**](http://developers.facebook.com/docs/reference/fql/friend/)

如果你得到一个结果，你就知道这两个用户是朋友。

# arrays - Coldfusion：对象数组的奇怪行为

> ID：11907717
> 
> 赞同：2
> 
> 时间：2012-08-10T19:02:33.370
> 
> 标签：arrays, object, loops, coldfusion

所以，我遇到了一个非常令人沮丧的问题。我正在进行 AJAX 调用（通过 jquery.post()）发送用于过滤 Coldfusion 对象的标准。

处理非常简单。首先，执行检查以查看是否已传入某些过滤器。如果存在过滤器，则循环遍历会话范围内的对象，如果其中一个对象元素的值与过滤器列表中的任何项目匹配值，该对象被添加到数组中。一旦对所有定义的过滤器类型完成此过程，匹配对象的数组就会存储在结果对象 (obj.results) 中，传递给 serializeJSON 函数，然后最终返回给客户端。

不幸的是，如果有多个过滤器在播放，看起来好像循环过早退出，导致返回的结果少于匹配的结果。如果我只处理下面包含的两个过滤器之一，我会得到完整的预期结果。同样，如果在下面的每个 arrayappend() 调用中我将 s[i] 更改为 s[i].name （因此，附加一个字符串而不是一个对象），则为每个过滤器返回预期的结果数。

这是使用 s[i] 的代码：

```
<cffunction name="filterObj" access="public" returntype="any">
    <cfargument name="filterParams" type="struct" required="yes">
    <cfset var s = session.a> <!--- session.a IS AN ARRAY OF CF OBJECTS --->
    <cfset filteredResults = {}>
    <cfset filteredResults.eligibilities = []>
    <cfset filteredResults.agencies = []>
    <cfif isdefined("arguments.filterParams.agency")>
        <cfloop from="1" to="#arraylen(s)#" index="i">
            <cfif structkeyexists(s[i],"agency") and
                listfindnocase(arguments.filterParams["agency"],s[i].agency["name"])>
                    <cfset arrayappend(filteredResults.agencies, s[i])>
            </cfif>
        </cfloop>
    </cfif>
    <cfif isdefined("arguments.filterParams.eligibility")>
        <cfloop from="1" to="#arraylen(s)#" index="i">
            <cfif structkeyexists(s[i],"el")>
                <cfloop from="1" to="#arraylen(s[i].eligibility)#" index="e">
                    <cfif listfindnocase(arguments.filterParams["eligibility"],s[i].eligibility[e].type)>
                        <cfset arrayappend(filteredResults.eligibilities, s[i])>
                    </cfif>
                </cfloop>
            </cfif>
        </cfloop>
    </cfif>
    <cfset obj.results = filteredResults>
    <cfset obj = serializeJSON(obj)>
    <cfreturn obj>
</cffunction> 
```

这是使用 s[i] 的未扩展的 console.logged 结果

```
RESULTS: Object
  AGENCIES: Array[5]
  ELIGIBILITIES: Array[5] 
```

这是再次使用 s[i].name 的代码

```
<cffunction name="filterObj" access="public" returntype="any">
    <cfargument name="filterParams" type="struct" required="yes">
    <cfset var s = session.a> <!--- session.a IS AN ARRAY OF CF OBJECTS --->
    <cfset filteredResults = {}>
    <cfset filteredResults.eligibilities = []>
    <cfset filteredResults.agencies = []>
    <cfif isdefined("arguments.filterParams.agency")>
        <cfloop from="1" to="#arraylen(s)#" index="i">
            <cfif structkeyexists(s[i],"agency") and
                listfindnocase(arguments.filterParams["agency"],s[i].agency["name"])>
                    <cfset arrayappend(filteredResults.agencies, s[i].name)>
            </cfif>
        </cfloop>
    </cfif>
    <cfif isdefined("arguments.filterParams.eligibility")>
        <cfloop from="1" to="#arraylen(s)#" index="i">
            <cfif structkeyexists(s[i],"el")>
                <cfloop from="1" to="#arraylen(s[i].eligibility)#" index="e">
                    <cfif listfindnocase(arguments.filterParams["eligibility"],s[i].eligibility[e].type)>
                        <cfset arrayappend(filteredResults.eligibilities, s[i].name)>
                    </cfif>
                </cfloop>
            </cfif>
        </cfloop>
    </cfif>
    <cfset obj.results = filteredResults>
    <cfset obj = serializeJSON(obj)>
    <cfreturn obj>
</cffunction> 
```

这是使用 s[i].name 的未扩展的 console.logged 结果

```
RESULTS: Object
  AGENCIES: Array[10]
  ELIGIBILITIES: Array[6] 
```

我觉得服务器上必须对两个循环进行某种异步处理，或者在循环完成之前某些事情已经超时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T20:45:11.880

在某些版本的 CF9 和 CF10 中存在一个关于对象数组序列化的已知问题；您通过将对象本身附加到返回变量而不是所述对象的基于字符串的键而偶然发现了这个错误。

该错误可以通过这个简单的脚本重现：

```
<cfset obj = ArrayNew(1) />

<cfset obj[1] = StructNew() />
<cfset obj[1].name = "Kate" />
<cfset obj[2] = StructNew() />
<cfset obj[2].name = "Ted" />
<cfset obj[3] = StructNew() />
<cfset obj[3].name = "Phil" />

<cfset data = ArrayNew(1) />

<cfloop from="1" to="#ArrayLen(obj)#" index="i">
    <cfset ArrayAppend(data, obj[i]) />
</cfloop>

<cfdump var=#data#>

<cfloop from="1" to="#ArrayLen(obj)#" index="i">
    <cfset ArrayAppend(data, obj[i]) />
</cfloop>

<cfdump var=#data#>

<cfoutput>#ArrayLen(data)#</cfoutput>
<cfset json = SerializeJSON(data) />

<cfdump var=#json#>

<cfset converted = DeserializeJSON(json) />
<cfoutput>#ArrayLen(converted)#</cfoutput> 
```

预期的结果是最终反序列化数组的长度为 6 个元素，因为它是预序列化的。但是，实际结果是 3。

如果您绝对必须在从函数返回它之前对其进行序列化，并重构调用此函数的外围代码，请坚持将字符串而不是整个对象附加到您要返回的数组 var。

来源：[serializeJSON 的问题——截断嵌入的对象](http://forums.adobe.com/message/4362247)

# xslt - 如何选择 xpath 返回类型？

> ID：11907719
> 
> 赞同：2
> 
> 时间：2012-08-10T19:02:46.157
> 
> 标签：xslt, xpath, documentfragment

我有 xpath 查询：

```
 <xsl:variable name="fbids">
            <xsl:sequence select="
                feature_relationship[type_id/cvterm[name='molec_deletes' or name='deletes']]
                /object_id/feature/feature_synonym/synonym_id/synonym/synonym_sgml"/>
        </xsl:variable> 
```

此查询不会将匹配节点序列作为序列本身返回，而是将它们作为单个#documentfragment 的子节点返回。即使没有元素满足此查询，$fbids 仍设置为空的#documentfragment。

这搞砸了我的代码，而下面的循环不是每个匹配的元素迭代一次，而是为#documentfragment 运行一次，仅此而已。如何强制它返回一个不错的 element()* 类型？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T01:41:22.847

XSLT 2.0 中变量的默认类型是文档片段。如果希望它是元素序列，则添加`as`属性并指定序列类型。您还可以使用`select`属性，而不是嵌套的序列元素：

```
<xsl:variable name="fbids" as="element()*" select="
            feature_relationship[type_id/cvterm[name='molec_deletes' or name='deletes']]
             /object_id/feature/feature_synonym/synonym_id/synonym/synonym_sgml"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T04:04:00.937

> ```
>  <xsl:variable name="fbids">
>           <xsl:sequence select="
>               feature_relationship[type_id/cvterm[name='molec_deletes' or name='deletes']]
>               /object_id/feature/feature_synonym/synonym_id/synonym/synonym_sgml"/>
>       </xsl:variable> 
> ```
> 
> 此查询不会将匹配节点序列作为序列本身返回，而是将它们作为单个#documentfragment 的子节点返回。

是的，因为变量体内有一个序列，并且变量没有指定类型。这种情况下的默认类型是：`document-node()`.

**解决方案**：

`select`指定不带正文的变量，并在 的属性中提供 XPath 表达式`xsl:variable`：

```
<xsl:variable name="fbids" select="
  feature_relationship[type_id/cvterm[name='molec_deletes' or name='deletes']]
    /object_id/feature/feature_synonym/synonym_id/synonym/synonym_sgml"/> 
```

`as`使用属性指定所需的变量类型仍然是一个好习惯。

**一个完整的答案还必须涵盖**变量的值（一系列元素）在其主体内动态创建的情况。

**再次指定变量的类型是解决方案的关键**。

这是一个小而完整的例子：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/*">

  <xsl:variable name="vMapped" as="element()*">
    <xsl:for-each select="num">
      <num><xsl:value-of select=".*2"/></num>
    </xsl:for-each>
  </xsl:variable>

  <xsl:for-each select="$vMapped">
   <xsl:sequence select="."/>
  </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<nums>
  <num>01</num>
  <num>02</num>
  <num>03</num>
  <num>04</num>
  <num>05</num>
  <num>06</num>
  <num>07</num>
  <num>08</num>
  <num>09</num>
  <num>10</num>
</nums> 
```

命名的变量`$vMapped`在其主体内获取其动态创建的值。其余代码成功地将此变量用作元素序列——访问此序列中的每个元素并将其复制到输出：

```
<num>2</num>
<num>4</num>
<num>6</num>
<num>8</num>
<num>10</num>
<num>12</num>
<num>14</num>
<num>16</num>
<num>18</num>
<num>20</num> 
```

# iphone - 如何在 Photoshop 中为 iOS 创建可调整大小的标题图像？

> ID：11907720
> 
> 赞同：2
> 
> 时间：2012-08-10T19:02:46.360
> 
> 标签：iphone, ios, user-interface, photoshop, assets

我正在尝试为原生 iOS 应用程序创建资产。我知道我需要使我的标题图像和按钮可调整大小，所以我需要创建带帽端的切片和一个延伸到全尺寸的中间切片。

我的问题是：我如何在 Photoshop 中做到这一点？我是否应该使用切片工具制作三个单独的切片，然后将它们导出为三个 .png？或者我应该将两端和中间切开，将它们放在一起并将其导出为单个 .png？

做这个的最好方式是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:25:17.470

原生 iOS 应用程序有一个图像 API，支持基于插图和平铺内部区域调整单个图像的大小。具体请参阅[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html)`-resizableImageWithCapInsets:`。使用这种方法，由插图定义的边缘周围的区域不会改变，而剩余的中心区域会平铺以填充任何大小。

您的目标应该是生成可与该 API 一起使用的单个图像，同时保持平铺的内部区域尽可能小

# xml - 更改根元素中的 xml 命名空间

> ID：11907723
> 
> 赞同：1
> 
> 时间：2012-08-10T19:02:56.213
> 
> 标签：xml, xslt

我需要更改以下 xml 的命名空间

```
<?xml version="1.0" encoding="UTF-8"?>
<cli:IWResource xmlns:cli="namespace_1">
    <Name>MFCflowWithAdapter</Name>
    <Type>process</Type>
    <File>MFCflowWithAdapter.iwp</File>
    <Description/>
    <GUID>4C0BF41F-CB37-4815-B93F-1B6C2A103C6A</GUID>
    <targetServer>6.1.5</targetServer>
    <ImportedFrom>
        <ServerURI>http://maria-ubuntu:9000</ServerURI>
        <UserId>test</UserId>
        <Password>ENCR(3157318131043128321832252993249)</Password>
        <ImportDate>2012-07-26T16:22:52.644-04:00</ImportDate>
    </ImportedFrom>
    <Dependencies>
        <Dependency>
            <Name>RDBMS_oracle</Name>
            <Type>adapter</Type>
            <GUID>ACACF542E270035D7311E584E63F256C</GUID>
            <Path>/aa</Path>
            <UsageCount>1</UsageCount>
        </Dependency>
    </Dependencies>
</cli:IWResource> 
```

对此：

```
<cli:IWResource xmlns:cli="namespace_2"> 
```

我尝试了各种 XSLT 示例并进行了一些调整，但似乎没有任何效果。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T03:38:12.640

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:old="namespace_1" xmlns:new="namespace_2" >
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:variable name="vOldNS" select=
 "document('')/*/namespace::old"/>

 <xsl:variable name="vNewNS" select=
 "document('')/*/namespace::new"/>

 <xsl:template match="*">
  <xsl:choose>
   <xsl:when test="namespace-uri()=$vOldNS">
     <xsl:element name="{name()}" namespace="{$vNewNS}">
       <xsl:apply-templates select="@*|node()"/>
     </xsl:element>
   </xsl:when>
   <xsl:otherwise>
     <xsl:element name="{name()}" namespace="{namespace-uri()}">
       <xsl:apply-templates select="@*|node()"/>
     </xsl:element>
   </xsl:otherwise>
  </xsl:choose>
 </xsl:template>

 <xsl:template match="@*">
  <xsl:copy-of select="."/>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<cli:IWResource xmlns:cli="namespace_1">
    <Name>MFCflowWithAdapter</Name>
    <Type>process</Type>
    <File>MFCflowWithAdapter.iwp</File>
    <Description/>
    <GUID>4C0BF41F-CB37-4815-B93F-1B6C2A103C6A</GUID>
    <targetServer>6.1.5</targetServer>
    <ImportedFrom>
        <ServerURI>http://maria-ubuntu:9000</ServerURI>
        <UserId>test</UserId>
        <Password>ENCR(3157318131043128321832252993249)</Password>
        <ImportDate>2012-07-26T16:22:52.644-04:00</ImportDate>
    </ImportedFrom>
    <Dependencies>
        <Dependency>
            <Name>RDBMS_oracle</Name>
            <Type>adapter</Type>
            <GUID>ACACF542E270035D7311E584E63F256C</GUID>
            <Path>/aa</Path>
            <UsageCount>1</UsageCount>
        </Dependency>
    </Dependencies>
</cli:IWResource> 
```

**产生想要的正确结果**：

```
<cli:IWResource xmlns:cli="namespace_2">
   <Name>MFCflowWithAdapter</Name>
   <Type>process</Type>
   <File>MFCflowWithAdapter.iwp</File>
   <Description/>
   <GUID>4C0BF41F-CB37-4815-B93F-1B6C2A103C6A</GUID>
   <targetServer>6.1.5</targetServer>
   <ImportedFrom>
      <ServerURI>http://maria-ubuntu:9000</ServerURI>
      <UserId>test</UserId>
      <Password>ENCR(3157318131043128321832252993249)</Password>
      <ImportDate>2012-07-26T16:22:52.644-04:00</ImportDate>
   </ImportedFrom>
   <Dependencies>
      <Dependency>
         <Name>RDBMS_oracle</Name>
         <Type>adapter</Type>
         <GUID>ACACF542E270035D7311E584E63F256C</GUID>
         <Path>/aa</Path>
         <UsageCount>1</UsageCount>
      </Dependency>
   </Dependencies>
</cli:IWResource> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T22:55:27.673

这是特定于根元素的：

```
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:old="namespace_1"
xmlns:cli="namespace_2"
exclude-result-prefixes="old">

<xsl:template match="old:IWResource">
    <cli:IWResource>
        <xsl:apply-templates />
    </cli:IWResource>
</xsl:template>

<xsl:template match="@*|node()">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()" />
    </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

或者您是否需要一个适用于不同根元素甚至可能适用于儿童的通用解决方案？

# java - 具有自反关联的 HQL 不起作用

> ID：11907724
> 
> 赞同：0
> 
> 时间：2012-08-10T19:03:13.810
> 
> 标签：java, spring, hibernate, junit

我遇到了一个与自身相关的类的问题。对象是这样的：

类别.java

```
package com.borjabares.pan_ssh.model.category;

import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.SequenceGenerator;

import com.borjabares.pan_ssh.util.Trimmer;

@Entity
public class Category {
private long categoryId;
private String name;
private Category parent;

public Category() {
}

public Category(String name, Category parent) {
    this.name = name;
    this.parent = parent;
}

@SequenceGenerator(name = "CategoryIdGenerator", sequenceName = "CategorySeq")
@Id
@GeneratedValue(strategy = GenerationType.AUTO, generator = "CategoryIdGenerator")
public long getCategoryId() {
    return categoryId;
}

public void setCategoryId(long categoryId) {
    this.categoryId = categoryId;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = Trimmer.trim(name);
}

@ManyToOne(optional=false, fetch=FetchType.EAGER) 
@JoinColumn(name="categoryId", insertable=false, updatable=false, nullable = true)
public Category getParent() {
    return parent;
}

public void setParent(Category parent) {
    this.parent = parent;
}

@Override
public String toString() {
    return "Category [\ncategoryId=" + categoryId + ", \nname=" + name
            + ", \nparent=" + parent + "]";
}
} 
```

协会只有一层深。插入和其他查询正在工作。但是当我尝试仅选择父类别或非父类别时，Hibernate 仅返回父类别或表的所有结果的 0 个结果。

现在的查询是这样的，但是我有很多其他带有连接的查询，为空，其他方法总是获得相同的结果。

```
@SuppressWarnings("unchecked")
public List<Category> listParentCategories() {
    return getSession().createQuery(
            "SELECT c FROM Category c WHERE c.parent is null ORDER BY c.name")
            .list();
} 
```

谢谢，对于我写这篇文章时可能犯的错误，我深表歉意。

编辑：

插入工作正常，当我列出 jUnit 中的所有类别并打印它们时，我得到了这个：

```
Category [
categoryId=416, 
name=Deportes, 
parent=null], 
Category [
categoryId=417, 
name=Formula 1, 
parent=Category [
categoryId=416, 
name=Deportes, 
parent=null]], 
Category [
categoryId=418, 
name=F?tbol, 
parent=Category [
categoryId=416, 
name=Deportes, 
parent=null]] 
```

此外在插入中我控制一个类别只能是父母或孩子，一个类别不能是他自己的父亲。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T20:09:37.777

您使用同一列 ( `categoryId`) 来唯一标识一个类别，并引用父类别。这不可能奏效，因为所有类别显然都将自己作为父类别。您需要另一列来保存父类别 ID：

```
@Id
@SequenceGenerator(name = "CategoryIdGenerator", sequenceName = "CategorySeq")
@GeneratedValue(strategy = GenerationType.AUTO, generator = "CategoryIdGenerator")
@Column(name = "categoryId") // not necessary, but makes things clearer
public long getCategoryId() {
    return categoryId;
}

// optional must be true: some categories don't have a parent
@ManyToOne(optional = true, fetch = FetchType.EAGER) 
// insertable at least must be true if you want to create categories with a parent
@JoinColumn(name = "parentCategoryId", nullable = true)
public Category getParent() {
    return parent;
} 
```

# facebook - 作为 iOS 上 FaceBook 身份验证的一部分登录我们的网站

> ID：11907731
> 
> 赞同：2
> 
> 时间：2012-08-10T19:03:51.997
> 
> 标签：facebook, facebook-ios-sdk

当用户点击我们网站上的使用 Facebook 登录按钮时，我们调用：

```
https://www.facebook.com/dialog/oauth?client_id=xxxxxxx&
redirect_uri=http://xxxxx.com/Account/FBLogin&scope=email,publish_stream 
```

在我们的 FBLogin（字符串代码）方法中，我们做了两件事。首先我们调用：

```
"https://graph.facebook.com/oauth/access_token?client_id=xxxxxxxxx&
redirect_uri=http://xxxxxx.com/Account/FBLogin&client_secret=xxxxxxxxxxxxx&code=" + code; 
```

然后，如果 FaceBook 登录成功，我们将用户登录到我们的站点。

iOS 中这个工作流程的等价物是什么？我们基本上想在我们的服务器上对用户进行身份验证，作为 Facebook 身份验证的一部分。因此，当 Facebook 身份验证成功返回时，我们的用户也已登录到我们的系统。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T01:06:36.190

如果您使用的是 Facebook iOS SDK，SSO（单点登录）工作流程更像是 Javascript SDK 的工作流程，因为用户会看到类似于 JS SDK 的*弹出窗口*：或者以 UIWebView、Safari 浏览器的形式，或 Facebook 应用程序（取决于用户的设置）。

> iOS SDK 最引人注目的功能之一是单点登录 (SSO)。SSO 允许用户使用他们的 Facebook 身份登录您的应用程序。如果他们已在其设备上登录 Facebook iOS 应用程序，则无需输入用户名和密码。此外，您可以从用户那里获得访问其 Facebook 个人资料信息和社交图谱的权限。
> 
> SSO 主要通过将用户重定向到其设备上的 Facebook 应用程序来工作。由于用户已经登录 Facebook，他们无需输入用户名和密码来识别自己。他们将看到具有您的应用程序要求的权限的身份验证对话框，并将使用适当的 access_token 重定向到您的移动应用程序。
> 
> 开发人员应注意，Facebook SSO 的行为会因用户设备上安装的内容而略有不同。这是在某些 iOS 配置中发生的情况：
> 
> *   如果应用程序在支持多任务处理的 iOS 版本中运行，并且设备安装了 3.2.3 或更高版本的 Facebook 应用程序，则 SDK 会尝试在 Facebook 应用程序中打开身份验证对话框。在用户同意或拒绝后，Facebook 应用程序重定向回调用应用程序，并传递访问令牌、过期时间和 Facebook OAuth 服务器可能返回的任何其他参数。
>     
>     
> *   如果应用在支持多任务处理的 iOS 版本中运行，但设备未安装 3.2.3 或更高版本的 Facebook 应用，SDK 将在 Safari 移动浏览器中打开 Auth Dialog。在用户授予或撤销授权后，Safari 将重定向回调用应用程序。类似于基于 Facebook 应用的授权，这允许多个应用通过 Safari cookie 共享同一个 Facebook 用户 access_token。
>     
>     
> *   如果应用在不支持多任务处理的 iOS 版本中运行，SDK 使用旧机制弹出内联 UIWebView，提示用户登录 Facebook 并授予访问权限。FBSessionDelegate 是您的应用程序应实现的回调接口：当应用程序成功登录或注销时，将调用委托方法。有关此委托的更多详细信息，请阅读 iOS SDK 文档。

...当用户完成登录或未登录并从“弹出窗口”返回您的应用程序时，您的应用程序必须根据用户是否登录/授权应用程序（以及有效的收到访问令牌）。

请阅读此内容以获取更多信息： [https ://developers.facebook.com/docs/mobile/ios/build/#implementsso](https://developers.facebook.com/docs/mobile/ios/build/#implementsso)

# web - 如何在您的网站上流式传输网络摄像头

> ID：11907737
> 
> 赞同：0
> 
> 时间：2012-08-10T19:04:20.030
> 
> 标签：web, live-streaming

如何将我的网络摄像头视频流式传输到我的网站。有没有将播放器嵌入到您的网站的解决方案？是否有提供网络流媒体服务的网站，然后您只需将 html 代码复制到您的网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:09:00.277

我以前用过这个，他们可以选择生成嵌入代码：[http ://www.ustream.tv/](http://www.ustream.tv/)

# xcode - 将 NSDictionary 数组值转换为 MFMailComposeViewController 的 NSString 格式

> ID：11907740
> 
> 赞同：0
> 
> 时间：2012-08-10T19:04:46.533
> 
> 标签：xcode, nsstring, formatting, nsdictionary, picker

我有一个 UIPickerViewDelegate，它允许用户从选择器中选择一个术语，并通过使用 NSDictionary 访问存储在 plist 文件中的数据来查看术语的定义。我还有一个 MFMailComposeViewController 允许用户通过电子邮件发送该术语及其在其他地方的定义。

但我似乎无法正确格式化术语和定义以输入电子邮件。我查看了各种“将 NSDictionary 转换为 NSString”的解决方案，但似乎都没有提供我需要的东西，包括`Term = [dict objectForKey:@"Term"]`.

在 viewDidLoad 下，我有以下内容：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"Glossary" ofType:@"plist"];
NSDictionary *dict = [[NSDictionary alloc] initWithContentsOfFile:path];
self.termArray = [dict objectForKey:@"Term"];
self.definitionArray = [dict objectForKey:@"Definition"]; 
```

我的 pickerView 代码包括：

```
NSString *resultString = [[NSString alloc] initWithFormat:
                          @"%@",
                          [definitionArray objectAtIndex:row]];
definitionLabel.text = resultString;
NSString *termString = [[NSString alloc] initWithFormat:
                          @"%@",
                          [termArray objectAtIndex:row]]; 
```

showEmail 的代码包含：

```
int definitionIndex = [self.termPicker selectedRowInComponent:0];
NSString *emailTitle = [NSString stringWithFormat:@"Definition of %@", termLabel];
NSString *emailDefinition = [definitionArray objectAtIndex:definitionIndex];
NSString *messageBody = [NSString stringWithFormat:@"The definition of <B>%@</B> is:<P> <B>%@</B>", termLabel, emailDefinition];

MFMailComposeViewController *mc = [[MFMailComposeViewController alloc] init];
mc.mailComposeDelegate = self;
[mc setSubject:emailTitle];
[mc setMessageBody:messageBody isHTML:YES]; 
```

我希望从选择器中选择的术语和与之关联的定义中提取电子邮件标题和消息正文。我确定这一定是一个简单的格式问题，但我无法弄清楚。

# php - 如何使用 jquery 定位 php 创建的 div？

> ID：11907742
> 
> 赞同：0
> 
> 时间：2012-08-10T19:04:57.597
> 
> 标签：php, jquery, html

我正在尝试获取`<div>`由 php 命令创建的集合中的第一个，问题是在创建 div 后我似乎无法让该函数工作或运行。

php`<div>`在页面加载时创建 5 秒，我想隐藏第一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T00:42:55.710

这是我为帮助您而制作的示例：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <title>StackOverflow :: Help</title>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script>
            $(document).ready(function() {
                $('div.mydiv:first').hide();
            });
        </script>
    </head>
    <body>
        <?php
            echo "<div class='mydiv'>DIV 1</div>";
            echo "<div class='mydiv'>DIV 2</div>";
            echo "<div class='mydiv'>DIV 3</div>";
            echo "<div class='mydiv'>DIV 4</div>";
            echo "<div class='mydiv'>DIV 5</div>";
        ?>
    </body>
</html> 
```

你可以试试这个例子，看看第一个 div 在页面加载时实际上是隐藏的。希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T19:19:47.710

如果你有一个 unique `id`，你可以像这样访问元素：

```
<div id="div1"></div> <!--get this div -->
<div id="div2"></div>

$('#div1').hide(); 
```

否则，如果你有一个与 s 组关联的类名`<div>`，你可以像这样访问第一个：

```
<div class="myClass"></div> <!--get this div -->
<div class="myClass"></div>

$('.myClass')[0].hide(); 
```

如果您没有`class`或`id`，`<div>`您可以像这样访问它：`var myDiv = $('div')[i];`，如果您要将网页中的所有 s 按顺序放置在数组中，那么您想要`i`的从零开始的索引号在哪里。例如，如果您要访问的是页面上出现的第二个 div，您可以使用`<div>``<div>``<div>``var myDiv = $('div')[1];`

```
<div id="randomDiv"></div>

<div></div> <!--get this div -->
<div></div>

$('div')[1].hide(); 
```

`id`您可能已经注意到，在 JQuery 中通过、`class`和选择元素`tag`的方式与使用 CSS 引用这些项目的方式相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T19:13:50.967

您可以尝试以下方法，给每个 div 一个类，如下所示：

```
<div class="mydiv"></div> 
```

之后，使用 jQuery，您可以像这样隐藏第一个 div：

```
$(document).ready(function() {
    $('div.mydiv:first').hide();
}); 
```

# php - php/ xml 测试是否 xml 包含元素

> ID：11907744
> 
> 赞同：0
> 
> 时间：2012-08-10T19:04:59.563
> 
> 标签：php, xml, xml-parsing, simplexml

你能测试一个xml文件是否有一个特定的元素。我在下面试过这个：

```
 $restrict = ($xml_content->xpath('//app:control//yt:state'));
$name = $restrict[0][0];

$restrictTest = $name->attributes();

if ($restrictTest == "restricted"){
    $_SESSION['array']['restricted'] = 1;
} 
```

但它显示此错误：

> 警告：SimpleXMLElement::xpath() [simplexmlelement.xpath]：第 178 行 C:\xampp\htdocs\ytm\resources\func.php 中未定义的命名空间前缀
> 
> 警告：SimpleXMLElement::xpath() [simplexmlelement.xpath]: xmlXPathEval: 第 178 行 C:\xampp\htdocs\ytm\resources\func.php 中的评估失败
> 
> 致命错误：在第 181 行的 C:\xampp\htdocs\ytm\resources\func.php 中的非对象上调用成员函数 attributes()

# asp.net-mvc - 在 MVC2 中使用 Html.dropDownList() 时遇到问题

> ID：11907755
> 
> 赞同：0
> 
> 时间：2012-08-10T19:05:41.140
> 
> 标签：asp.net-mvc

我有这个返回类型的函数 `IEnumerable<SelectListItem>`。

```
 public IEnumerable<SelectListItem> GetItems()
        {

            IEnumerable<SelectListItem> results = null;

            results =*(some logic)*

            return results;
        } 
```

我尝试将其绑定到视图中的下拉列表，使用

```
 <% foreach (IEnumerable<SelectListItem> schdItem in Model.GetItems())
{%>

       <%= Html.DropDownList("xxx", schdItem)%>

<%} %> 
```

但它打破了错误消息

```
Unable to cast object of type 'System.Web.Mvc.SelectListItem' to type 'System.Collections.Generic.IEnumerable`1[System.Web.Mvc.SelectListItem]'. 
```

我该如何解决？

根据 asawyer 的评论，我将其修改为

```
 <%= Html.DropDownList("xxx", Model.GetScheduleItems())%> 
```

现在它起作用了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:09:45.320

不需要循环，就是这个。

```
<%= Html.DropDownList("xxx", Model.GetItems())%> 
```

我会`SelectList`在你的模型上创建一个属性，而不是一个 getter 方法。

```
<%= Html.DropDownList("xxx", Model.MySelectList)%> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T19:10:41.810

```
<%= Html.DropDownList("xxx", Model.GetItems())%> 
```

尽管这是一种可怕的方法。相反，您应该使用 Html.DropDownListFor ，例如：

```
<%= Html.DropDownListFor(Model.SelectedItem, Model.Items) %> 
```

其中 Model.SelectedItem 是项的类型，Model.Items 是返回 SelectListItems 集合的属性。

# magento - 如何以编程方式创建子块？

> ID：11907756
> 
> 赞同：5
> 
> 时间：2012-08-10T19:05:48.783
> 
> 标签：magento, magento-1.9

我有一个页面，其中包含一些以编程方式包含的模板块，如下所示：

```
public function indexAction() {
    $this->loadLayout();
    $block = $this->getLayout()
        ->createBlock('core/template')
        ->setTemplate('somefolder/sometemplate.phtml');

    $this->getLayout()->getBlock('content')->append($block);
    $this->renderLayout();

} 
```

我想在**sometemplate.phtml**中放入**$this->getChildHtml('somechild')**以插入另一个块。

我试过

```
$box = $this->getLayout()
->createBlock('page/html')
->setTemplate('somefolder/somechild.phtml');
$block->append($box); 
```

但它没有用。我该怎么做？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-10T19:22:54.803

**我通过使用setChild**方法解决了这个问题，如下所示：

```
$block->setChild('somealias',$childBlock); 
```

所以我可以使用

```
<?php echo $this->getChildHtml('somealias'); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T12:47:55.803

加起来里卡多·马丁斯的回答
如果你直接在一个块中需要它，你可以做产品价格做的事情

`Mage_Catalog_Block_Product`：

```
public function getPriceHtml($product)
{
    $this->setTemplate('catalog/product/price.phtml');
    $this->setProduct($product);
    return $this->toHtml();
} 
```

# iphone - 如何在不指定大小的情况下为整个 iOS 应用程序设置自定义字体

> ID：11907761
> 
> 赞同：34
> 
> 时间：2012-08-10T19:06:09.047
> 
> 标签：iphone, objective-c, ios, cocoa, uikit

我正在尝试在整个`iOS app`. 我发现我可以使用：

```
 [[UILabel appearance] setFont:[UIFont fontWithName:@"Proxima Nova" size:17.0]]; 
```

*   为所有`UILabels`. 但是，并非所有人都`UILabels`共享相同的字体大小。

*   在[为整个 iOS 应用程序设置默认字体？](https://stackoverflow.com/questions/8707082/set-a-default-font-for-whole-ios-app)，有人有同样的担忧，并被告知将 size 参数设置为 0.0 以仅设置字体而不设置字体大小。

*   当我尝试这样做时，`UILabel`我的应用程序中的所有文本都消失了（因为显然`iOS`字面意思是 0.0 字体大小）。

关于如何普遍设置字体而不是大小的任何建议？非常感谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-27T10:10:13.623

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self setFontFamily:@"FagoOfficeSans-Regular" forView:self.view andSubViews:YES];
}

-(void)setFontFamily:(NSString*)fontFamily forView:(UIView*)view andSubViews:(BOOL)isSubViews
{
    if ([view isKindOfClass:[UILabel class]])
    {
        UILabel *lbl = (UILabel *)view;
        [lbl setFont:[UIFont fontWithName:fontFamily size:[[lbl font] pointSize]]];
    }

    if (isSubViews)
    {
        for (UIView *sview in view.subviews)
        {
            [self setFontFamily:fontFamily forView:sview andSubViews:YES];
        }
    }    
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-04-16T13:53:50.107

这是 Objective-C 中的一个解决方案，将此*类别*放在您想要更改的任何位置`UILabel` `Apperance`而不设置`UILabel` `FontSize`：

```
@implementation UILabel (SubstituteFontName)
- (void)setSubstituteFontName:(NSString *)name UI_APPEARANCE_SELECTOR {
    self.font = [UIFont fontWithName:name size:self.font.pointSize];
}
@end 
```

然后，您可以更改`Apperance`：

```
[[UILabel appearance] setSubstituteFontName:@"SourceSansPro-Light"]; 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-04-30T20:50:34.130

我在我的项目中使用了公认的答案，但需要一个更通用的功能，因此它将字体更改为每种可能的字体，我还选择在一些库存字体与我们的自定义字体之间设置映射，所以它们'也可以通过storybuilder和xib文件访问。

```
+ (void)setupFontsForView:(UIView *)view andSubViews:(BOOL)isSubViews
{
    if ([view respondsToSelector:@selector(setFont:)] && [view respondsToSelector:@selector(font)]) {
        id      viewObj = view;
        UIFont  *font   = [viewObj font];

        if ([font.fontName isEqualToString:@"AcademyEngravedLetPlain"]) {
            [viewObj setFont:[UIFont fontWithName:PRIMARY_FONT size:font.pointSize]];
        } else if ([font.fontName hasPrefix:@"AmericanTypewriter"]) {
            [viewObj setFont:[UIFont fontWithName:SECONDARY_FONT size:font.pointSize]];
        }
    }

    if (isSubViews) {
        for (UIView *sview in view.subviews) {
            [self setupFontsForView:sview andSubViews:YES];
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-09-10T14:48:45.783

通过为 Label 编写类别，我们可以更改整个应用程序的字体。

```
@implementation UILabel (CustomeFont)

-(void)awakeFromNib
{
    [super awakeFromNib];
    [self setBackgroundColor:[UIColor clearColor]];
    [self setFont:[UIFont fontWithName:@"Helvetica" size:self.font.pointSize]];
}

@end 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-09-28T15:03:59.737

斯威夫特3 [https://gist.github.com/dimohamdy/c47992e14c1a3ee3315c06e2480e121e](https://gist.github.com/dimohamdy/c47992e14c1a3ee3315c06e2480e121e)

您无法为标签字体设置外观，这使我创建了默认字体的其他值，当我设置新字体时，我只获得新字体的名称和标签的旧大小并创建其他字体并设置此字体

```
 //when you want to set font for all labels in Application
    UILabel.appearance().defaultFont =  UIFont.systemFont(ofSize: 15/*Any Value*/, weight: UIFontWeightThin)

extension UILabel{
    dynamic var defaultFont: UIFont? {
        get { return self.font }
        set {
          //get old size of lable font
          let sizeOfOldFont = self.font.pointSize 
          //get new name  of font
          let fontNameOfNewFont = newValue?.fontName
          self.font = UIFont(name: fontNameOfNewFont!, size: sizeOfOldFont)
        }
    }
     } 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-02-15T00:54:24.977

UIView+DefaultFontAndColor.h

```
#import <UIKit/UIKit.h>

@interface UIView (DefaultFontAndColor)

-(void)setDefaultFontFamily:(NSString*)fontFamily andSubViews:(BOOL)isSubViews andColor:(UIColor*) color;
@end 
```

UIView+DefaultFontAndColor.m

```
#import "UIView+DefaultFontAndColor.h"

@implementation UIView (DefaultFontAndColor)

//sets the default font for view classes by default
-(void)setDefaultFontFamily:(NSString*)fontFamily andSubViews:(BOOL)isSubViews andColor:     (UIColor*) color
{
    if ([self isKindOfClass:[UILabel class]])
    {
        UILabel *lbl = (UILabel *)self;
        [lbl setFont:[UIFont fontWithName:fontFamily size:[[lbl font] pointSize]]];

        if( color )
            lbl.textColor = color;
    }
    else if ([self isKindOfClass:[UIButton class]])
    {
        UIButton *btn = (UIButton *)self;
        [btn.titleLabel setFont:[UIFont fontWithName:fontFamily size:[[btn.titleLabel font] pointSize]]];

        if( color )
        {
            btn.tintColor = color;
        }
    }

    if (isSubViews)
    {
        for (UIView *sview in self.subviews)
        {
            [sview setDefaultFontFamily:fontFamily andSubViews:YES andColor:color];
        }
    }
}
@end 
```

@usage：没有颜色：

```
#import "UIView+DefaultFontAndColor.h"

UIView myView = [[UIView alloc] init]
[myView setDefaultFontFamily:@"Arial" andSubViews:YES andColor:nil]; 
```

@用法：颜色：

```
#import "UIView+DefaultFontAndColor.h"

UIView myView = [[UIView alloc] init]
[myView setDefaultFontFamily:@"Arial" andSubViews:YES andColor:[UIColor greenColor] ]; 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-02-24T15:54:46.103

Raegtime 的回答 ala Swift ......

```
import UIKit

extension UIViewController {
    func setFontFamilyForView(_ fontFamily: String, view: UIView, andSubviews: Bool) {
        if let label = view as? UILabel {
            label.font = UIFont(name: fontFamily, size: label.font.pointSize)
        }

        if let textView = view as? UITextView {
            textView.font = UIFont(name: fontFamily, size: textView.font!.pointSize)
        }

        if let textField = view as? UITextField {
            textField.font = UIFont(name: fontFamily, size: textField.font!.pointSize)
        }

        if andSubviews {
            for v in view.subviews {
                setFontFamilyForView(fontFamily, view: v, andSubviews: true)
            }
        }
    }
} 
```

# content-management-system - TYPO3 页脚菜单

> ID：11907763
> 
> 赞同：0
> 
> 时间：2012-08-10T19:06:17.833
> 
> 标签：content-management-system, typo3

我想知道最好的方法是什么。对于导航的前两个级别，我在模板上有两个菜单。它们是分开的，因为它们在页面上的位置略有不同。

现在，我曾经将我所有的特殊页面`meta-nav`和`footer`页面放入一个`sysfolder`. 这实际上与`special.directory`. 到目前为止一切都很好。

但是当我从 中打开链接时`footer`，`footer menu's`链接显示在 2nd-level`HMENU`中。这或多或少是有意义的，因为页面处于 a`sub-folder`级，因此是 2 级。，但它们在一个文件夹中..所以我猜它应该可以工作。

我的解决方案是隐藏`sys-folder`和`footer menu`using中的所有页面`includeNotInMenu`。这行得通，但我想知道是否有更简洁的解决方案来避免将 sys-folder 的内容视为二级页面。我不喜欢编辑器必须记住隐藏页面才能获得预期的结果。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:15:52.610

我猜您是在要求“隐藏在菜单中”。编辑您的页面站点地图，转到“访问”选项卡，选择“在菜单中”下方的“隐藏”。只要您没有在菜单渲染中设置“includeNotInMenu”，站点地图就不会显示在您的菜单中。

```
# assume 12 is the uid of your folder
[PIDinRootline = 12]
  # Delete the menu
  lib.yourmenu >
  # or overwrite it:
  lib.yourmenu = TEXT
  lib.yourmenu.value = there is nothing to see here
[end] 
```

使用条件更难调试。如果您想查看某个条件的效果，您需要在 TypoScript 对象浏览器中选择它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:40:20.923

您可以发送一个`entryLevel`

> 定义菜单应该在 rootLine 中的哪个级别开始。默认值为“0”，它为我们提供了网站上第一页的菜单。
> 
> 如果该值 < 0，则从 rootLine 中的“后面”选择 entryLevel。因此“-1”是一个菜单，其中包含最外层的项目，“-2”是最外层之前的级别......

见[http://wiki.typo3.org/TSref/HMENU](http://wiki.typo3.org/TSref/HMENU)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T10:07:13.567

我不确定我是否理解..假设我有以下结构

*   家
*   主页/子页面1
*   主页/子页面2
*   元导航
*   元导航/站点地图
*   元导航/印象

->`meta-nav`是一个文件夹。

现在我有一个`HMENU`第二级，它显示（取决于所选页面）：

```
(subpage1 and subpage2) or (sitemap and impressum) 
```

现在我想要实现的是打开`sitemap`或`impressum`看不到`HMENU`.

抱歉，如果这听起来很奇怪；-)

# java - 有没有办法在应用引擎中使用 UTF-8？

> ID：11907764
> 
> 赞同：15
> 
> 时间：2012-08-10T19:06:24.897
> 
> 标签：java, google-app-engine, servlets, character-encoding

我正在寻找有关应用程序引擎如何处理字符编码的一些解释。我正在开发服务器位于应用引擎上的客户端-服务器应用程序。

这是一个从头开始构建的新应用程序，因此我们到处都使用 UTF-8。客户端通过 POST，x-www-form-urlencoded 向服务器发送一些字符串。我收到它们并回显它们。当客户取回它时，它是 ISO-8859-1！我在 POST 到 blobstore 时也看到了这种行为，参数以 UTF-8 形式发送，multipart/form-data 编码。

作为记录，我在 Wireshark 中看到了这一点。所以我 100% 确定我发送 UTF-8 并接收 ISO-8859-1。另外，我没有看到 mojibake：ISO-8859-1 编码的字符串非常好。这也不是误解 Content-Type 的问题。这不是客户端。一路走来正确识别我正在发送 UTF-8 参数，但由于某种原因将它们转换为 ISO-8859-1。

我被引导相信 ISO-8859-1 是 GAE servlet 的默认字符编码。我的问题是，有没有办法告诉 GAE 不要转换为 ISO-8859-1，而是到处使用 UTF-8？

假设 servlet 做了这样的事情：

```
public void doPost(HttpServletRequest req, HttpServletResponse resp) throws IOException {
    resp.setContentType("application/json");
    String name = req.getParameter("name");
    String json = "{\"name\":\"" + name + "\"}";
    resp.getOutputStream().print(json);
} 
```

我尝试将响应和请求的字符编码设置为“UTF-8”，但这并没有改变任何东西。

提前致谢，

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-10T21:58:58.023

我看到你应该做两件事。

1）**在您的 appengine-web.xml 中将系统属性（如果您正在使用它）设置为 utf8**

```
<system-properties>
    <property name="java.util.logging.config.file" value="WEB-INF/logging.properties" />
    <property name="file.encoding" value="UTF-8" />
    <property name="DEFAULT_ENCODING" value="UTF-8" />
</system-properties> 
```

*好的，以上是我所拥有的，但文档建议如下：*

```
<env-variables>
    <env-var name="DEFAULT_ENCODING" value="UTF-8" />
</env-variables> 
```

[https://developers.google.com/appengine/docs/java/config/appconfig](https://developers.google.com/appengine/docs/java/config/appconfig)

2） **在设置内容类型时指定编码，否则将恢复为默认值**

> 内容类型可以包括所使用的字符编码类型，例如text/html；字符集=ISO-8859-4。

我会尝试

```
resp.setContentType("application/json; charset=UTF-8"); 
```

您还可以尝试使用可以直接将内容类型设置为它的编写器。

[http://docs.oracle.com/javaee/1.3/api/javax/servlet/ServletResponse.html#getWriter%28%29](http://docs.oracle.com/javaee/1.3/api/javax/servlet/ServletResponse.html#getWriter%28%29)
[http://docs.oracle.com/javaee/1.3/api/javax/servlet/ServletResponse .html#setContentType(java.lang.String)](http://docs.oracle.com/javaee/1.3/api/javax/servlet/ServletResponse.html#setContentType(java.lang.String))

对于它的价值，我需要 utf8 用于日语内容，我没有任何问题。无论如何，我没有使用过滤器或 setContentType。我正在使用上面的 gwt 和 #1 并且它有效。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-21T14:30:35.710

找到了解决它的方法。我是这样做的：

*   使用 "application/json; charset=UTF-8" 作为内容类型。或者，将响应字符集设置为“UTF-8”（两者都可以正常工作，无需同时执行）。

*   Base64 编码的输入字符串不是 ASCII 安全的，并且是 UTF-8。否则，当它们到达 servlet 时，它们显然会转换为 ISO-8859-1。

*   使用 resp.getWriter() 而不是 resp.getOutputStream() 来打印 JSON 响应。

在满足**所有**这些条件后，我终于能够将 UTF-8 输出回客户端。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T19:42:00.140

这不是 GAE 特有的，但如果您觉得它有用：我制作了自己的过滤器：

在 web.xml 中

```
<filter>
    <filter-name>charsetencoding</filter-name>
    <filter-class>mypackage.CharsetEncodingFilter</filter-class>
</filter>
    ...
<filter-mapping>
   <filter-name>charsetencoding</filter-name>
   <url-pattern>/*</url-pattern> 
</filter-mapping> 
```

（将过滤器映射片段完全放在过滤器映射的开头，并检查您的 url-pattern。

和

```
public class CharsetEncodingFilter implements Filter {

    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
        HttpServletRequest req = (HttpServletRequest) request;
        HttpServletResponse res = (HttpServletResponse) response;
        req.setCharacterEncoding("UTF-8");
        chain.doFilter(req, res);
        res.setCharacterEncoding("UTF-8");
    }

    public void destroy() { }

    public void init(FilterConfig filterConfig) throws ServletException { }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-20T22:44:33.887

## 解决方法（安全）

这些答案都没有对我有用，所以我编写了这个类来将**UTF-Strings 编码为 ASCII-Strings**（用它们的表号替换所有不在 ASCII 表中的字符，前面和后面都有一个标记），使用`AsciiEncoder.encode(yourString)`

然后可以使用 将字符串解码**回 UTF**`AsciiEncoder.decode(yourAsciiEncodedString)`。

```
package <your_package>;

import java.util.ArrayList;

/**
 * Created by Micha F. aka Peracutor.
 * 04.06.2017
 */

public class AsciiEncoder {

    public static final char MARK = '%'; //use whatever ASCII-char you like (should be occurring not often in regular text)

    public static String encode(String s) {
        StringBuilder result = new StringBuilder(s.length() + 4 * 10); //buffer for 10 special characters (4 additional chars for every special char that gets replaced)
        for (char c : s.toCharArray()) {
            if ((int) c > 127 || c == MARK) {
                result.append(MARK).append((int) c).append(MARK);
            } else {
                result.append(c);
            }
        }
        return result.toString();
    }

    public static String decode(String s) {
        int lastMark = -1;
        ArrayList<Character> chars = new ArrayList<>();
        try {
            //noinspection InfiniteLoopStatement
            while (true) {
                String charString = s.substring(lastMark = s.indexOf(MARK, lastMark + 1) + 1, lastMark = s.indexOf(MARK, lastMark));
                char c = (char) Integer.parseInt(charString);
                chars.add(c);
            }
        } catch (IndexOutOfBoundsException | NumberFormatException ignored) {}

        for (char c : chars) {
            s = s.replace("" + MARK + ((int) c) + MARK, String.valueOf(c));
        }
        return s;
    }
} 
```

希望这可以帮助某人。

# ruby - rvmsudo rvm gemset 导入，.gems 文件未找到

> ID：11907768
> 
> 赞同：0
> 
> 时间：2012-08-10T19:06:39.237
> 
> 标签：ruby, gem, centos, rvm

我正在尝试做一个`rvmsudo rvm gemset import`，但我收到了这个错误：

```
No *.gems file found. 
```

该`.gems`文件称为`default.gems`.

我试过做一个`rvmsudo rvm gemset import default`也不起作用。

但是，当我发出 a`rvm gemset import`而没有提升到 root using`rvmsudo`时，它会尝试在我的`default.gems`文件中安装 gem。我怀疑`rvmsudo`正在更改路径并且无法`.gems`在我当前的工作目录中找到该文件。有没有办法防止`rvmsudo`改变路径？

我尝试按照[sudo changes PATH 中的说明进行操作 - 为什么？](https://stackoverflow.com/questions/257616/sudo-changes-path-why)但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T00:16:24.040

你不应该使用`rvmsudo`它，它只用于特殊场合，而且大多数时候 - 不使用它更安全！

如果您使用的是多用户或混合模式安装 - 那么您最好将自己添加到`rvm`组并运行：

```
rvmsudo rvm get head 
```

更新安装 - 是的，这次可以使用`*sudo`

# eclipse - 在 Eclipse Juno 上安装 lint4j

> ID：11907769
> 
> 赞同：2
> 
> 时间：2012-08-10T19:06:40.227
> 
> 标签：eclipse

有没有人在 Eclipse Juno 上成功安装 lint4j 并让选项显示在首选项窗格中？我的安装在树视图中显示了 lint4j 条目，但没有可用的选项。

Mac OSX 上的 Eclipse 4.2 64 位

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T22:11:39.067

tl;博士：检查下面的**更新 2**。我想我可能找到了问题所在。

我的设置和你一样（OSX Mountain Lion + Eclipse Juno Java EE 64 Bit）

我刚刚尝试在我的新 Eclipse Juno (Java EE) 上安装**[lint4j 。](http://www.jutils.com/eclipse/index.html)**请看一下**[这个](http://youtu.be/Kn3ZzhOpuVw)**截屏视频，看看它是如何进行的。

安装后，我在错误日志中没有错误（如视频中所示），并且我的 Eclipse 首选项有一个 Lint4j 首选项（虽然没有任何选项）：

![在此处输入图像描述](../Images/26f1418fc44d2c86fe4f3e08f5b671b2.png)

我对 Eclipse Indigo 执行了完全相同的步骤，并得到了*完全相同的*结果。所以看起来问题可能不在于 Eclipse（Indigo / Juno），而在于我们正在尝试的插件或操作系统。我注意到官方快照也有一个“缺失”选项：

![在此处输入图像描述](../Images/8df9569a8c9c68ac11c627922e2fa0aa.png)

**更新**

从**[这里](http://www.jutils.com/download.html)**看，这似乎是不祥的:(

> Lint4j 已经在 MacOSX 10.2 和 10.3 上进行了广泛的开发和测试

我们正在 OSX 10.6 或 10.7 和 10.8 上试用它！

我刚刚注册到他们的邮件列表 (mailto:majordomo@jutils.com)，将在那里提出一个关于此的问题。希望我们不会从 Lint4j 的文档中遗漏一些明显的东西。

**更新 2**

啊，伙计，***我想我找到了问题所在***。我们找错地方了！！**[在阅读了这里](http://www.jutils.com/eclipse/intro.html)**的 lint4j 介绍后，我意识到了这一点。

Eclipse 首选项中没有可配置的选项。项目中的所有 lint4j 选项都可用。因此，如果您进入 Java 项目的属性，您会看到 Lint4j 首选项和预期的选项，如下所示：

![在此处输入图像描述](../Images/64cea646ae25b127c8ae9e48dd5b3993.png)

# python - 从 defaultdict(list) 调用的列表的交集

> ID：11907770
> 
> 赞同：0
> 
> 时间：2012-08-10T19:06:50.890
> 
> 标签：python, dictionary

我想找到存储在`defaultdict(list)`容器中的列表的交集。这是我的字典，`'d'`查找值列表“my_list”：

```
d = { a: ['1', '2', '3'],
      b: ['3', '4', '5'],
      c: ['3', '6', '7']
     }

my_list = ['a', 'b'] 
```

我想返回列表的交集。根据上一篇[文章](https://stackoverflow.com/questions/3852780/python-intersection-of-multiple-lists)，我尝试了以下操作，但出现错误：TypeError: unhashable type: 'list'

```
set.intersection(*map(set,d[my_list])) 
```

欢迎大家提出意见。

谢谢，扎克cp

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T19:09:59.713

问题是您正在尝试访问`d[my_list]`- 列表不是 vlaid 字典键。一种选择：

```
set.intersection(*(set(d[k]) for k in my_list)) 
```

# html - 设置 iframe 的基本 URL 路径

> ID：11907773
> 
> 赞同：10
> 
> 时间：2012-08-10T19:07:04.453
> 
> 标签：html, iframe

是否有任何可能的方法（html、js、jquery）来更改的基本 URL 路径`iframe`？

这就是我想要做的：我有一个网页，它有一个 URL 输入字段和一个显示区域。Web 应用程序采用用户输入的任何 URL，然后使用特殊的代理服务来检索用户指定的网页。然后，我使用 iframe 在显示区域中呈现此网页，并在其中将 html 源代码插入`DOM`到`iframe`. 我不使用该`src`属性，因为我试图演示我的代理服务的功能，并且我不希望浏览器直接呈现页面本身。

我插入的 html 源代码将加载到 iframe 中，但要注意一点。使用相对路径名的图像或其他资源都不起作用，因为它们将我的外部网页的 URL 引用为基本 URL。例如，如果我的网页位于`www.me.com`并且用户尝试加载`www.google.com`，我可以渲染`html`源`www.google.com`，但主 Google 图片不会加载，因为图像尝试从而不是`www.me.com/image`加载`www.google.com/image`。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-11T03:15:16.550

在代理端插入这个标签：

`<base href="http://pathtooriginalpage" />`

那应该这样做。

# visual-studio-2010 - 并行 Visual Studio 安装和文件关联

> ID：11907775
> 
> 赞同：4
> 
> 时间：2012-08-10T19:07:09.323
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2012, file-association

我多年来一直在使用 VS10，昨天我将 VS12 与旧的并排安装。现在我注意到一些文件关联不一致。项目由版本选择器打开，C++ 文件由 VS10 打开，FSX 文件由 VS12 打开，还有更多这样的混乱。一切都有点随机，我想将所有内容映射到 VS12，同时仍然安装 VS10，因为我使用 XNA，你知道 VS12 还没有对 XNA 的官方支持。

搜索 SO 显示我只需要转到选项 > 常规 > 恢复文件关联，但它现在被称为管理文件关联，并且控制面板正在打开，让我为每种可用的 VS 格式选择我想要的一种：

![控制面板文件关联](../Images/abe138daf21406e293de998e3a92bd04.png)

我可以选中复选框来选择所有可用的格式，但是……我不喜欢这个想法，因为它可能会破坏某些东西。

**有没有人对我的怀疑是否错误提出好的建议 - 但是我应该如何在不破坏任何东西的情况下管理关联？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T20:25:49.190

这是文件关联在 Windows 中工作方式的一个非常基本的限制。单击解决方案或项目文件时效果很好。它们与一个名为 VSLauncher.exe 的小实用程序相关联。它在文件中查找格式版本，从而知道要启动哪个版本的 VS。

同样的技巧不适用于源代码文件，例如 .cpp 或 .cs 文件。文件中没有足够的信息来可靠地选择 VS 版本。它只是代码，其中大部分都可以在任何最新的 VS 版本上正确编译。所以它只与你最后安装的任何版本的 VS 相关联。

# php - 只是另一个php图像存在问题

> ID：11907779
> 
> 赞同：0
> 
> 时间：2012-08-10T19:07:18.017
> 
> 标签：php, image, exists

所有这些东西都是例如（名称不是实际的）。

一切也都位于 localhost:8080 (USBWebserver 8.5)

目录结构：（位于 localhost:8080/[project_name] 上的文件）

```
/ajax
    /ajax_file.php
/img
    /250x250
        /[image_name].jpg 
```

代码（来自 ajax_file.php）：

```
$url = 'img/250x250/'.$image_name.'.jpg';
$url = file_exists($url); 
```

这将返回错误。

我尝试了一个 img_exists($url) 函数，它使用了不起作用的 cUrl。

我也试过：

```
$url = 'img/250x250/'.$image_name.'.jpg';
$image_check = getimagesize($url);

if (!is_array($image_check))
{
    $url = 'img/default_image.png';
} 
```

但这会为 getimagesize() 返回一个警告，说不存在文件或目录。

当我`$url = 'img/250x250/'.$image_name.'.jpg'`输入`<img src="$url" />`图像时出现......但如果图像不存在，那么它会出现一个破碎的图像......

为什么我尝试做的任何事情都会以某种方式失败？

我希望在图像损坏时显示默认图像：/

**编辑**

```
$url = 'img/products/250x250/'.$image_name.'.jpg';
$url = var_dump(file_exists($url));
Returns bool(false)

$url = '../img/products/250x250/'.$image_name.'.jpg';
$url = var_dump(file_exists($url));
Returns bool(false) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:10:45.630

如果你在里面`/ajax/ajax_file.php`并且你在寻找 '`img/250x250/'.$image_name.'.jpg'`它会在寻找`/ajax/img/250x250/'.$image_name.'.jpg`. 相反，您应该使用

```
$url = '../img/250x250/'.$image_name.'.jpg'; 
```

虽然我不确定它为什么会出现在图像标签中，但我猜你很幸运，你的浏览器正在修复 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T19:11:47.197

似乎您需要在访问 img 文件夹之前分支出 ajax 文件夹？

尝试：

```
$url = '../img/250x250/'.$image_name.'.jpg'; 
```

@亚历克斯·卢尼克斯

我的猜测是他将 img 标签放在实际的 php 页面中，而不是 ajax 脚本中。

# javascript - 不可见但可点击的下拉框？

> ID：11907781
> 
> 赞同：0
> 
> 时间：2012-08-10T19:07:25.023
> 
> 标签：javascript, jquery, html, css, drop-down-menu

是否可以在 css/jquery 中执行此操作？

我想要一个不可见的下拉框，因此没有箭头或选定的文本。基本上，如果您单击该区域，下拉列表将打开，因此您可以选择其中一个选项。在你选择一个选项后，我会做一些事情。

如果未打开，则不应显示任何内容。如果它是打开的，则只显示下拉菜单，而不是当前选择的。

编辑：当它打开时，我希望它在这张图片中看起来像右边而不是左边：http: [//i.minus.com/iBLX1F1Au1Rt7.png](http://i.minus.com/iBLX1F1Au1Rt7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T19:11:53.657

将 opacity = 0 应用于选择？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T19:08:53.180

首先使用**可见性：隐藏**而不是**显示：无**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T19:11:51.637

这是一个奇怪的要求，但您可能可以在单击时切换 CSS 下拉列表的可见性属性。

```
<select id="dropdown" style="visibility:hidden"></select>

$("#dropdown").click(function() { 
     var visibility = $(this).css("visibility") == "hidden" ?  "visible" : "hidden";
     $(this).css("visibility", visibility);
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-10T19:11:52.183

像这样的东西应该可以工作：
**CSS：**

```
.invisible{
    color : transparent;
    background: transparent;
    display : block;
    width : 10px;
    height : 10px;
} 
```

**Javascript**

```
$('.invisible').on('click',function(){
    openDropDownList();
});

$('.option').on('click',function(){
    youWillDoSomething();
}); 
```

# php - 动态多级菜单php的递归函数

> ID：11907790
> 
> 赞同：0
> 
> 时间：2012-08-10T19:08:03.237
> 
> 标签：php, mysql, function, recursion

我有一个`mysql`这样的表结构：

```
CREATE TABLE IF NOT EXISTS menu(
id INT(5) NOT NULL AUTO_INCREMENT PRIMARY KEY,
p_id INT(5), -- parent id
sort_id INT(5) NOT NULL, -- for position
title VARCHAR(50) NOT NULL,
etc ...); 
```

数据结构将是这样的：

```
id | p_id | sort_id | title 
1  | NULL |    1    |  root_1
2  |  1   |    1    |  sub1 of root_1
3  |  1   |    2    |  sub2 of root_1
4  | NULL |    2    |  root_2
5  |  2   |    1    |  sub1 of root_2
6  |  2   |    2    |  sub2 of root_2
7  |  3   |    1    |  sub1 of `sub2 of root_1` 
```

我创建了一个 php 脚本来显示一个级别的子菜单，但我无法决定如何获得其他级别。我认为需要一个递归函数，例如，`sub1 of sub2 of root_1`在这个任务中获取元素。

如果有人知道如何在这种情况下开始创建递归函数，请告诉我，谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:22:50.827

最好先把它变成树型结构：

```
Menu Top
  |
Nodes with NULL p_id
  |
Children 
```

您可以通过创建一个具有子数组的 MenuNode 类来完成此操作。您不必这样做，但它可以更容易地创建一个递归函数来输出菜单。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-08-13T09:13:38.413

function generate_menu_list($parent_id) { $result = mysql_query("SELECT * FROM menu WHERE p_id ='$parent_id' order by sort_id"); if (result) { while ($row = mysql_fetch_array($result)) {
$count = mysql_query("SELECT count(0) as cnt FROM menu_master WHERE parent_id='".$row['id']."'") ; $countrow = mysql_fetch_array($count);

```
 echo '<li><a href="'$linktoredirect.'"><span class="fa fa-user"></span>'.$row['title '].'</a> ';

     if($countrow['cnt']>0)
     {
        echo '<ul>'; 
        $this->generate_menu_list($row['id']);  
        echo '</ul>';
     }  
     echo '</li>';
  } 
} 
```

}

# google-maps-api-3 - GMap API FT 点击事件返回 mouseEvent 为空

> ID：11907795
> 
> 赞同：1
> 
> 时间：2012-08-10T19:08:26.043
> 
> 标签：google-maps-api-3, google-fusion-tables

我有一个通过 GMap API 显示大约 2000 行的 Fusion Table。这在开发过程中已经运行了好几个月。

FT 层有它自己的自定义信息窗口，所以我添加了一个事件监听器来进行鼠标点击。

它今天上线了，几个小时后，突然间，可能使用率大大增加，我的事件 Listen 报告：“mouseEvent 为空”

同样正确的是，即使通过 Google FT UI 访问，当地图可视化时，点击事件也不再起作用。

我已经确认在现有应用程序中使用不同的 FT 可以解决问题。

所以我确信我正在达到某种使用限制。不幸的是，我还没有升级到新的 FT API

有没有其他人经历过这个？

[https://www.google.com/fusiontables/DataSource?dsrcid=2482072](https://www.google.com/fusiontables/DataSource?dsrcid=2482072)

[http://p5.neracoos.org/IOOSCatalog3/rcv_ft_frame.html](http://p5.neracoos.org/IOOSCatalog3/rcv_ft_frame.html)

**更新**

只是想跟进这篇文章。这个问题似乎已经消失了，所以我需要为我的恐慌道歉。仍然不知道是什么导致了问题，但应用程序现在工作正常。

[http://www.ioos.gov/catalog/welcome.html](http://www.ioos.gov/catalog/welcome.html)

埃里克

# apache-flex - 带有 Scale9Grid 的位图数据

> ID：11907803
> 
> 赞同：1
> 
> 时间：2012-08-10T19:08:54.953
> 
> 标签：apache-flex, bitmapdata, skin, bitmapimage, scale9grid

我有一个 SkinnableContainer 的皮肤。
皮肤仅包含原始 contentGroup 和 s:BitmapImage 作为背景。
背景图像拉伸器根据宽度和高度内容。
使用的图像是具有透明区域的 .png。

为了创建 hitarea，我使用了这个算法：
[http ://www.webverwirklichung.com/en/blog/programming/flex/creating-hitarea-png-image-transparent-alpha-regions-flex](http://www.webverwirklichung.com/en/blog/programming/flex/creating-hitarea-png-image-transparent-alpha-regions-flex)

一切正常，直到我开始拉伸 SkinnableContainer（连同皮肤中的图像）。
我有一个 scale9Grid 的图像。

问题是，在拉伸图像时，图像的 bitmapData 仍然是相同的（相同的宽度和高度）。因此，我需要以某种方式为 scale9Grid 应用程序获取图像的 bitmapData。

组件的背景是一个图像，它有一些透明区域。只能单击图像的可见部分。图像将根据 contentGroup 中的内容进行拉伸。

需要一个建议，请。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T21:29:23.323

使用`BitmapData.draw()`方法怎么样？

在调整容器大小并应用 9 切片缩放（或任何适当的触发器）后，执行以下操作：

```
var b:BitmapData = new BitmapData(container.width, container.height);
b.draw(container); 
```

然后将这个新位图与创建命中区域的算法一起使用。

# android - IntelliJ Idea 无法识别 ActionBarSherlock 中的兼容性库

> ID：11907807
> 
> 赞同：2
> 
> 时间：2012-08-10T19:09:03.663
> 
> 标签：android, intellij-idea, dependencies, actionbarsherlock

我正在使用`IntelliJ Idea CE`（这令人难以置信）并且已包含`ActionBar Sherlock`为库并将其作为依赖项添加到我的模块中（IntelliJ 中使用的术语）。

ActionBar Sherlock 使用`android-support-v4.jar`，因此它不应该作为依赖项添加到我的模块（应用程序）中。

如果我在我的模块中添加`android-support-v4.jar`为依赖项，我会收到错误

> 意外的顶级异常：

当我删除它时，IDE 无法识别兼容性包中的类，有时它会编译模块，有时会出错。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T19:25:31.863

如果`android-support-v4.jar`库已经包含在 ActionBar Sherlock 模块中，只需单击库名称左侧[模块依赖项配置中的](http://www.jetbrains.com/idea/webhelp/configuring-module-dependencies-and-libraries.html)**导出**复选框。这将使该库可用于您的主应用程序。

# .net - 具有初始容量的字典

> ID：11907809
> 
> 赞同：1
> 
> 时间：2012-08-10T19:09:31.030
> 
> 标签：.net, vb.net

我读到如果可以估计大小，用初始容量初始化字典可能会带来更好的性能。

```
Dim MyDataTable As New DataTable

'Fill MyDataTable from Database

Dim CapacityEstimate As integer = MyDataTable.Rows.Count
Dim MyDictionary As New Dictionary(Of String, MyObjectType)(CapacityEstimate)

'Fill the Dictionary independent of data table 
```

CapacityEstimate 变量只是字典应该包含的键/值对数量的估计值（通常在 2500 到 7000 的范围内）。因此，如果我估计它是 4000 并最终得到 4010 个对象（我可能会超过或低于，不确定）字典会使用大量内存来调整其中已有的许多键/值对的大小。这是一个好的解决方案还是我最好不要使用初始容量对其进行初始化。谢谢。

编辑：相关但不相同 - [.NET 通用字典是否应该初始化为容量等于它将包含的项目数？](https://stackoverflow.com/questions/414109/should-a-net-generic-dictionary-be-initialised-with-a-capacity-equal-to-the-num?rq=1)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T19:20:55.930

这是个好问题。我没有四处搜索，但奥德的回答对我来说似乎很好。

但是，让我们在其上运行一个概念性的微基准测试：

```
 Dictionary<string, int> FixedCapacity = new Dictionary<string, int>(4000);
        Dictionary<string, int> NotFixedCapacity = new Dictionary<string, int>();

        Stopwatch stopWatch = new Stopwatch();

        stopWatch.Start();

        for (int i = 0; i < 5000; i++)
        {
            FixedCapacity.Add(i.ToString(), i);
        }

        stopWatch.Stop();

        Console.WriteLine(string.Format("Fixed initial capacity: {0} ms", stopWatch.ElapsedMilliseconds));

        stopWatch.Reset();

        stopWatch.Start();

        for (int i = 0; i < 5000; i++)
        {
            NotFixedCapacity.Add(i.ToString(), i);
        }

        stopWatch.Stop();

        Console.WriteLine(string.Format("Not Fixed initial capacity: {0} ms", stopWatch.ElapsedMilliseconds));

        Console.ReadLine(); 
```

结果：

```
Fixed initial capacity: 1ms
Not Fixed initial capacity: 1ms 
```

这是另一个很好的答案，IMO =)

*免责声明*：不，这不是一个完整的基准测试程序，我只是在一台机器上测量框架的“默认”行为。我已经手动运行了几次并得到了相同的结果，即使它不在循环中。如果您有更好的基准测试工具，请对其进行测试并将结果粘贴到此处。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T20:12:40.913

不要担心小东西。像这样的字典不会使用大量内存，因此让它自行调整大小也不会占用大量内存。真正的存储是键和数据的对象，字典只包含对它们的引用。在 32 位模式下，每个条目 8 个字节，因此只有 4000 x 8 + 一些开销 = 32 KB。

此外，您传递的容量用于计算字典中哈希桶的数量。它始终是等于或大于您指定的容量的素数。素数是从这个数组中挑选出来的（从参考源复制而来）：

```
 internal static readonly int[] primes = {
        3, 7, 11, 17, 23, 29, 37, 47, 59, 71, 89, 107, 131, 163, 197, 239, 293, 353, 431, 521, 631, 761, 919,
        1103, 1327, 1597, 1931, 2333, 2801, 3371, 4049, 4861, 5839, 7013, 8419, 10103, 12143, 14591,
        17519, 21023, 25229, 30293, 36353, 43627, 52361, 62851, 75431, 90523, 108631, 130363, 156437,
        187751, 225307, 270371, 324449, 389357, 467237, 560689, 672827, 807403, 968897, 1162687, 1395263,
        1674319, 2009191, 2411033, 2893249, 3471899, 4166287, 4999559, 5999471, 7199369}; 
```

所以如果你通过 4000 那么你实际上会得到 4049 个桶，这是下一个最大的素数。因此，超过 4010 不会产生影响。如果它确实需要调整大小，那么它的容量会加倍。因此，单次调整大小已经产生 8419 个桶，远远超出您的最大估计。调整大小也不是很昂贵，几微秒。这就是为什么安德烈看不出有什么不同。

除了推理之外，这是正确的方法。措施。任何人都可以测量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T19:17:23.147

> 字典是否会使用大量内存来调整其中已有的许多键/值对的大小

*如果您超出*估计的容量，字典只会“调整大小” 。

内存将为您估计的项目数量保留 - 这将发生在`Dictionary`.

*现在，容量*和实际大小之间存在差异。*容量是字典可以*容纳多少项目而不调整内部存储的大小。大小是*实际*存储在字典中的项目数（即添加到字典中的项目数）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-04T18:15:25.233

我知道这可能会迟到，但无论如何，这对任何阅读本文的人来说可能仍然有价值。最好将容量设置为某个已知值的原因是为了防止重新分配。在高度繁忙的 24x7 服务/应用程序中，内存利用率是全面/极端条件，您可能希望通过将容量设置为已知大小或某个平均/估计大小来防止内存重新分配来避免增加额外压力。

这种情况下的内存重新分配会在内存空间中产生“（小）洞”，从而导致内存碎片。有时即使内存仍然很大，但由于碎片过多，您的应用可能会遇到“内存不足”的情况。

这个观察结果在.Net 4.5.1 之前是正确的，我相信这是我最后一次测试/观察到这一点的时候。如果较新的框架版本具有更好的垃圾收集器，其中内存压缩以适当的频率完成，从而减轻碎片问题或使其成为一件小事，那么这并不重要。

# php - 如何从我的 wordpress 页面获取特色图片描述？

> ID：11907810
> 
> 赞同：3
> 
> 时间：2012-08-10T19:09:31.700
> 
> 标签：php, wordpress

所以我设置了我的 wordpress 主题以允许用户上传特色图片，并且我建立了我的索引页面来显示所选页面的特色图片，但也想显示图片的描述。

问题是，我没有使用循环，我使用 wordpress 的设置 API 作为选项来拉取页面 ID。

所以显示特色图像是这样完成的：

```
<?php $bucket_options = get_option('frontpage_display_options'); ?>
<?php $page_one = $bucket_options['frontpage_bucket_one']; ?>
<?php $page_one = get_post($page_one);  ?>
<?php if (has_post_thumbnail($page_one->ID)) : ?>  
      <?php echo get_the_post_thumbnail($page_one->ID, 'bucket'); ?>  
<?php endif; ?> 
```

我一直在阅读，这将起作用：

```
echo get_post(get_the_post_thumbnail_id($page_one->ID))->post_content; 
```

或这个：

```
echo get_post(get_the_post_thumbnail($page_one->ID))->post_content; 
```

但他们都没有显示任何东西

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T20:20:50.667

该功能正在等待新版本：[http ://core.trac.wordpress.org/ticket/12235](http://core.trac.wordpress.org/ticket/12235)

但是一个浮动的解决方案是在functions.php中创建一个函数：

```
function the_post_thumbnail_caption() {
  global $post;

  $thumbnail_id    = get_post_thumbnail_id($post->ID);
  $thumbnail_image = get_posts(array('p' => $thumbnail_id, 'post_type' => 'attachment'));

  if ($thumbnail_image && isset($thumbnail_image[0])) {
    echo '<span>'.$thumbnail_image[0]->post_excerpt.'</span>';
  }
} 
```

然后打电话`the_post_thumbnail_caption();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-15T00:26:43.283

这对我有用。它与特色图像的标题、说明和描述相呼应。

```
<?php
if ( has_post_thumbnail() ) :
the_post_thumbnail();
echo '<p>' . get_post(get_post_thumbnail_id())->post_title . '</p>';
echo '<p>' . get_post(get_post_thumbnail_id())->post_excerpt . '</p>';
echo '<p>' . get_post(get_post_thumbnail_id())->post_content . '</p>';
endif;
?> 
```

# wcf-rest - 为 RESTful POST WCF 服务和数组设计 XML 有效负载模式

> ID：11907818
> 
> 赞同：1
> 
> 时间：2012-08-10T19:10:01.123
> 
> 标签：wcf-rest

不久前我写了一个简单的测试客户端来测试我的 XML 有效负载，但我的服务不断给我 400 个错误请求。以下是我的 DataContract，后跟示例有效负载：

```
[DataContract(Name = "TMGTLabel", Namespace = "http://Novartis.TMGT.TMGTLabelPrint")]
public class TMGTLabel
{
    [DataMember(Name = "ProposedfileName")]
    public string proposedfilename;

    [DataMember(Name = "LabelDataGroup")]
    public LabelData ldatagrp;
}

[DataContract(Namespace = "http://Novartis.TMGT.TMGTLabelPrint")]
public class LabelData
{
    [DataMember(Name = "ldata")]
    public string[] ldata;
}

<TMGTLabel>
<ProposedfileName>TestLabelFileName</ProposedfileName>
  <LabelDataGroup>
    <LabelData><ldata>sample 1</ldata></LabelData>
    <LabelData><ldata>sample 2</ldata></LabelData>
    <LabelData><ldata>sample 3</ldata></LabelData>
    <LabelData><ldata>sample 4</ldata></LabelData>
    <LabelData><ldata>sample 5</ldata></LabelData>
    <LabelData><ldata>sample 6</ldata></LabelData>
    <LabelData><ldata>sample 7</ldata></LabelData>
  </LabelDataGroup>
</TMGTLabel> 
```

根据我的 DataContract 设计方式，我的有效负载有什么问题吗？

# javascript - 如何检索尝试/捕获错误

> ID：11907820
> 
> 赞同：0
> 
> 时间：2012-08-10T19:10:09.873
> 
> 标签：javascript

我怎样才能找到错误

```
try {
    undef
} catch (e){
    console.log(e)
    console.dir(e)
} 
```

信息在某处出现，因为console.log（在萤火虫中）包括：

```
ReferenceError: undef is not defined 
```

但是当我浏览`e`对象时，我找不到它。

如何以编程方式找出错误是什么，以便我可以相应地处理错误？

编辑： ![显示错误对象的屏幕截图](../Images/73d668198483474801905c9a40d43a26.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:31:46.643

```
try {

    if(typeof undef  == 'undefined'){       
        console.log('We should not access this "undef" var');
    }       
    console.log('The next line will produce an exception');
    undef
} catch (e){
    console.log(e);
    for(index in e){
        console.log(index+' ('+(typeof e[index])+'): '+ e[index]);
    }
} 
```

* * *

这将产生：

* * *

```
我们不应该访问这个“undef”变量
下一行将产生异常
ReferenceError：未定义undef
文件名（字符串）：file:///B:/xampp/htdocs/study/test.html
lineNumber（数字）：12
堆栈（字符串）：@file:///B:/xampp/htdocs/study/test.html:12

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T19:20:05.523

我不认为你可以明确地提取它的类型，但你可以测试它：

```
try {
    undef
} catch (e){
    console.log(e)
    console.dir(e)
    if(e instanceof ReferenceError) {
      console.log("Ooops! Fat fingers!");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T19:26:09.317

但是反复试验给了我这个......

```
try {
    undef
} catch (e){
    console.log(e.toString())
    // ReferenceError: undef is not defined
} 
```

我猜萤火虫只是访问的`.toString()`方法`e`

* * *

编辑：

我猜这个`.toString()`方法只是连接了保证跨浏览器的仅有的两个属性 -`name`并且`message`- 所以我认为这`e.message`是唯一可靠和有用的信息。

# javascript - 从代码隐藏错误中调用 javascript 函数

> ID：11907821
> 
> 赞同：0
> 
> 时间：2012-08-10T19:10:10.320
> 
> 标签：javascript, asp.net, code-behind

我正在尝试调用从 aspx 页面加载到我的母版页中的我的 javascript 函数之一。

以下是我目前正在使用的代码：

```
ScriptManager.RegisterStartupScript(Me.Page, GetType(String), "showNotifier", "showNotifier(3000,'green','test');", True) 
```

javascript代码是这样的：

```
function showNotifier(delayTime, color, theMsg) {
    var theDivName = '#Notifier';
    e.preventDefault();
    $(theDivName).css("background", color);
    $(theDivName).text(theMsg);
    $(theDivName).animate({ top: 0 }, 300, null);
    $(theDivName).css("position", "fixed");

    //Hide the bar
    $notifyTimer = setTimeout(function () {
        $(theDivName).animate({ top: -100 }, 1500, function () {
            $(theDivName).css("position", "absolute");
        });
    }, delayTime);
}); 
```

这就是我在后面的代码中调用它的地方：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Not IsPostBack Then
        ScriptManager.RegisterStartupScript(Me.Page, GetType(String), "showNotifier", "showNotifier(3000,'green','test');", True)
    End If
End Sub 
```

当我运行我的页面并加载该 aspx 页面时，它显示此错误：

```
Microsoft JScript runtime error: 'showNotifier' is undefined. 
```

什么会导致这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T19:23:03.557

改为使用`RegisterClientScriptBlock`。

并将您的调用包装在 $(function() { ... } ) 中。：

```
;$(function() {showNotifier(3000,'green','test');}); 
```

**更新**：所以你的 VB 代码看起来像这样：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Not IsPostBack Then
        ScriptManager.RegisterClientScriptBlock(Me.Page, GetType(String), "showNotifier", ";$(function() {showNotifier(3000,'green','test');});", True)
    End If
End Sub 
```

**更新 2**您的 js 函数有一些语法错误：

```
function showNotifier(delayTime, color, theMsg) {
    var theDivName = '#Notifier';
    // 'e' is not declared -- e.preventDefault();
    $(theDivName).css("background", color);
    $(theDivName).text(theMsg);
    $(theDivName).animate({ top: 0 }, 300, null);
    $(theDivName).css("position", "fixed");

    //Hide the bar
    $notifyTimer = setTimeout(function () {
        $(theDivName).animate({ top: -100 }, 1500, function () {
            $(theDivName).css("position", "absolute");
        });
    }, delayTime);
}// ); - this should not be here 
```

# c# - 我可以在 C# 中通过调制解调器接听电话吗

> ID：11907822
> 
> 赞同：4
> 
> 时间：2012-08-10T19:10:11.067
> 
> 标签：c#, audio, modem

我正在开发一款在完美世界中永远不会失去互联网连接的软件，而且我可以完美地在两个客户端之间发送音频馈送。我的问题是，这个世界远非如此。如果互联网连接失败和音频源丢失，我的服务实际上毫无价值。

我的问题是这样的：

C# 中有没有办法连接到我的系统调制解调器并拨打电话或接听电话（或最好两者兼而有之）并向/从两点推送/播放音频？

该方法已被弃用，但在我的场景中几乎是必需品，而且我在 Google 上找不到太多信息，因此将不胜感激。

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:46:40.730

您应该考虑使用 Twilio 之类的服务来处理语音呼叫。他们有一个 .net 客户端：http: [//www.twilio.com/docs/libraries](http://www.twilio.com/docs/libraries)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:35:32.377

不，调制解调器（我假设你的意思是拨号）没有能力在罐线上插入原始音频（也许如果你重写驱动程序）但你可能想看看有一些非常酷的东西的星号你可以乱来。但最重要的是，除非您忘记调制解调器并使用 IP 电话解决方案，否则答案是否定的。

# jquery - 清理简单的动画 jquery 代码

> ID：11907824
> 
> 赞同：3
> 
> 时间：2012-08-10T19:10:17.873
> 
> 标签：jquery

我正在尝试在有限的时间内快速连续地为 div 设置动画。这在 jquery 中起作用以实现它，但它是如此混乱：

```
 $('.wiggle').delay(1800).show(50).animate({
                top: '15'
                              }, 40, function() {
                                 $('.wiggle').animate({
                                 top: '12'
                                 }, 40, function() {
                                    $('.wiggle').animate({
                                    top: '15'
                                    }, 40, function() {
                                        $('.wiggle').animate({
                                        top: '12'
                                        }, 40, function() {
                                            $('.wiggle').animate({
                                            top: '15'
                                            }, 40, function() {
                                                $('.wiggle').animate({
                                                top: '12'
                                                }, 40, function() {
                                                    $('.wiggle').animate({
                                                    top: '15'
                                                    }, 40, function() {
                                                        $('.wiggle').animate({
                                                        top: '12'
                                                        }, 40, function() {
                                                            $('.wiggle').animate({
                                                            top: '15'
                                                            }, 40, function() {
                                                                $('.wiggle').animate({
                                                                top: '12'
                                                                }, 40, function() {
                                                                    $('.wiggle').animate({
                                                                    top: '14'
                                                                    }, 40, function() {
                                                                        $('.wiggle').hide(50)
                                                                     });
                                                                 });
                                                             });
                                                         });
                                                     });
                                                 });
                                             });
                                         });
                                     });
                                 });
                             }); //end wiggle 
```

我知道这很糟糕。我想创建一个独特的功能来实现这一点，但我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T19:23:16.367

```
$('.wiggle').delay(1800).show(50).wiggle(12);

$.fn.wiggle = function(i) {

    var $elem = $(this);

    if (i > 0) {

        $elem.animate({
            top: i % 2 == 0 ? 15 : 12
        }, 40, function() {

            $elem.wiggle(i--);
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T19:21:38.707

未经测试，但我认为你必须设置一个类似以下的函数（不确定这是否完全符合你的要求，因为很难用“混乱”来判断，但它应该给你一个想法）：

```
function doWiggle($elem, numberOfTimesToWiggle)
{
    $elem.animate({
        top: '15'
    }, 40, function() {
        top: '12'
    }, 40, function() {
        doWiggle($elem, (numberOfTimesToWiggle-1));
    });

}

setTimeout(function() {
    show(5);
    doWiggle($('.wiggle'), 20);
},1000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T19:27:28.403

我建议您决定希望效果运行多长时间，然后将操作封装到一个函数中，该函数将负责递归和停止：

```
function wiggle(selector, duration_of_wiggle) {
    var wiggle_active = true;
    var target = $(selector);
    setTimeout(function () {
        wiggle_active = false;
        target.hide();
    }, duration_of_wiggle);
    var one_wiggle_down = function () {
        if (!wiggle_active)
            return;
        target.animate({
            top: '15'
        }, 40, one_wiggle_up);
    };    
    var one_wiggle_up = function () {
        if (!wiggle_active)
            return;
        target.animate({
            top: '12'
        }, 40, one_wiggle_down);
    };
    one_wiggle_down();
};

wiggle('.wiggle', 1000); 
```

在这里试试：http: [//jsfiddle.net/P4H9c/1/](http://jsfiddle.net/P4H9c/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T19:14:17.160

首先将选择的对象保存到 var 中，这样可以获得更好的性能

```
var $wiggle = $('.wiggle');

$wiggle.delay(1800).show(50).animate({
            top: '15'
                          }, 40, function() {
                             $wiggle.animate({ //and so on.. 
```

第二改进选择器。如果与元素相关的 html 总是相同的，`div`那么你可以这样做

```
var $wiggle = $('div.wiggle') 
```

第三，对于我在您的代码中看到的内容，您正在尝试实现反弹效果或上下移动将函数包装在一个方法中并执行类似的操作

```
function bounce(wiggle) {
    for (i = 1; i < 5; i++) {
        if (i % 2 == 0) {
        wiggle.animate({
            top: '12px'
        }, 75);
    }
    else if (i % 3 == 0) {
        paquete.animate({
            top: '15px'
        }, 75);
    }
    }
  wiggle.hide();
} 
```

然后你刚刚调用了这个函数

```
var $wiggle = $('.wiggle');

bounce($wiggle); 
```

# asp.net - 插入/更新 XML

> ID：11907827
> 
> 赞同：0
> 
> 时间：2012-08-10T19:10:28.607
> 
> 标签：asp.net, css, xml

我现在使用 xml 处理可更新的新闻，但是每当我刷新作为插入/更新页面的第一页时，即使我清空了文本框，它仍在发布。

第一个 HTML/ASPX 文件的代码：

```
(

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Xml;

public partial class Main : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void Button1_Click(object sender, EventArgs e)
    {
        XmlDocument xmlfile = new XmlDocument();
        xmlfile.Load(Server.MapPath("~/TestXML.xml"));
        //create element
        XmlElement theNewsTag = xmlfile.CreateElement("news");
        XmlElement theTitleTag = xmlfile.CreateElement("title");
        XmlElement theContentsTag = xmlfile.CreateElement("contents");
        //create text node
        XmlText theTitleText = xmlfile.CreateTextNode(xmlTitle.Text);
        XmlText theContentsText = xmlfile.CreateTextNode(xmlContent.Text);
        //append
        theTitleTag.AppendChild(theTitleText);
        theContentsTag.AppendChild(theContentsText);

        theNewsTag.AppendChild(theTitleTag);
        theNewsTag.AppendChild(theContentsTag);
        //save
        xmlfile.DocumentElement.AppendChild(theNewsTag);
        xmlfile.Save(Server.MapPath("~/TestXML.xml"));

        xmlTitle.Text = "";
        xmlContent.Text = "";

        Response.Redirect(Server.MapPath("~/Main.aspx"));
    }
} 
```

我的第一个 HTML/ASPX 文件（用于插入/更新）

```
<h2>Title</h2>
    <asp:TextBox ID="xmlTitle" runat="server"/>
<h2>Content</h2>
    <asp:TextBox ID="xmlContent" runat="server"/>
<h2>Insert XML</h2>
    <asp:Button ID="Button1" runat="server" Text="Post News" 
onclick="Button1_Click" /> 
```

我的第二个 HTML/ASPX 文件（用于查看 XML 文件）

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="xmlpath.aspx.cs" Inherits="xmlpath" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:ListView ID="ListView1" runat="server" DataSourceID="newDS">
            <LayoutTemplate>
                <div id="ItemPlaceHolderContainer"></div>
                <span id="ItemPlaceHolder" runat="server"></span>
            </LayoutTemplate>

            <ItemTemplate>
                <h2><%#XPath("title") %></h2>
                <p><%#XPath("contents") %></p>
            </ItemTemplate>
        </asp:ListView>
        <asp:XmlDataSource ID="newDS" runat="server" DataFile="~/TestXML.xml">
        </asp:XmlDataSource>
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:21:17.007

当您刷新页面时，它会重新发布数据，它还会向您显示一个对话框， `Confirm Form Resubmission`因此实际上您正在再次按下按钮。

在您的页面加载中创建这个

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        Session["Key"] = "1";
    }

} 
```

并在单击按钮之前检查会话

```
protected void button_Click(object sender, EventArgs e)
 {
    if (Session["Key"].ToString() == "1")
    {
           XmlDocument xmlfile = new XmlDocument();
    xmlfile.Load(Server.MapPath("~/TestXML.xml"));
    //create element
    XmlElement theNewsTag = xmlfile.CreateElement("news");
    XmlElement theTitleTag = xmlfile.CreateElement("title");
    XmlElement theContentsTag = xmlfile.CreateElement("contents");
    //create text node
    XmlText theTitleText = xmlfile.CreateTextNode(xmlTitle.Text);
    XmlText theContentsText = xmlfile.CreateTextNode(xmlContent.Text);
    //append
    theTitleTag.AppendChild(theTitleText);
    theContentsTag.AppendChild(theContentsText);

    theNewsTag.AppendChild(theTitleTag);
    theNewsTag.AppendChild(theContentsTag);
    //save
    xmlfile.DocumentElement.AppendChild(theNewsTag);
    xmlfile.Save(Server.MapPath("~/TestXML.xml"));

    xmlTitle.Text = "";
    xmlContent.Text = "";

    Response.Redirect(Server.MapPath("~/Main.aspx"));
    Session["Key"] = "0"; // set key = 0 
    }
 } 
```

# reference - JNI 本地与全局参考：不是有效的 JNI 参考

> ID：11907832
> 
> 赞同：1
> 
> 时间：2012-08-10T19:10:45.390
> 
> 标签：reference, java-native-interface, global, local

我在我的 JNI 代码中看到了这个警告：

```
JNI WARNING: 0x44be7258 is not a valid JNI reference 
```

我将 JNI 中 FindClass 方法返回的 LocalReference 分配给构造函数中的类成员变量：

**标题：**

```
...
jclass m_class; 
```

**价格：**

```
m_class = env->FindClass( classSignature ); 
```

FindClass 是否返回 LocalReference 并将其存储在我的类成员变量中是无效的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T20:53:42.250

来自[梁书](http://www-igm.univ-mlv.fr/~dr/XPOSE2001/JNI/ressources/JNM_full.pdf)，第 5.1.1 章“本地参考”

> 大多数 JNI 函数创建本地引用...本地引用仅在创建它的本地方法的动态上下文中有效，并且仅在本地方法的一次调用中有效。在本地方法执行期间创建的所有本地引用将在本地方法返回后被释放。

随后是一个非法代码示例，它完全使用了您的方法`FindClass`。换句话说，是的，`FindClass`返回一个本地引用。下一章是一个创建全局引用的示例，它可以按照您想要的方式使用。`DeleteGlobalRef`当你不再需要它时不要忘记。否则 JVM 不能 GC 并且你的程序会泄漏。

# php - 来自 Javascript 嵌套数组的动态 AJAX DD

> ID：11907843
> 
> 赞同：0
> 
> 时间：2012-08-10T19:11:50.353
> 
> 标签：php, javascript, mysql, ajax

基本上，我拥有世界上最流行的代码，用于使用 PHP 和 MySQL 进行动态相关下拉列表，但我试图从数组中填充选择选项文本和选项值，假设 id 作为选项值，以及名称作为选项文本；我找到了一个线程，它准确地描述了我正在尝试做的事情，但它对我不起作用（动态下拉菜单就像一个魅力）。
这是链接： http:
[//forums.phpfreaks.com/index.php?topic=287884.0](http://forums.phpfreaks.com/index.php?topic=287884.0)
这是我的代码；

```
`for (i=0;i<myarray.length;i++)
 {
 var optn = document.createElement("OPTION");
 optn.text = myarray[i][0];
 optn.value = myarray[i][1];
 document.testform.id_proveedor.options.add(optn);
 }` 
```

以及来自 dd.php 的部分代码

```
`while($nt=mysql_fetch_array($q)){
$str=$str.'new Array("'.$nt[id_proveedor].'","'.$nt[nombre].'"),';
}
$str=substr($str,0,(strLen($str)-1)); // Removing the last char , from the string
echo "new Array($str)";` 
```

关于为什么代码不起作用的任何想法？
提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:32:39.117

我认为这个脚本使用了 javascript 的“评估”功能，我认为这不是一个好主意。IMO 最好的做法是在 php 中使用 JSON 编写这样的代码

```
$result = array();
while($nt=mysql_fetch_array($q)){
   $result[]=$nt;
}
echo json_encode($result); 
```

在您的 AJAX 代码中，您只需要使用`var myarray=JSON.parse(response);`您的数组即可遍历。

# android - android webview 进度：有什么好的解决方案吗？

> ID：11907848
> 
> 赞同：2
> 
> 时间：2012-08-10T19:11:56.520
> 
> 标签：android, android-webview

我想在页面加载时有某种繁忙的指示器。我的指示器将像闪屏一样全屏显示。这是因为 android webview 在开始加载之前会将页面空白为白色，这与普通浏览器不同。

可能会建议一个简单的解决方案。例如，设置 loading true in`onPageStarted()`和设置 false in `onPageFinished()`。

```
 @Override
        public void onPageFinished(WebView view, String url) {
              setLoading(false);
        }

        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon) {
                setLoading(true);
        } 
```

这样做的问题是，我正在加载的网站单击一次会导致多个开始/完成周期。也许这是重定向或 iframe。我不确定......但结果是“忙碌”指示灯令人不安地闪烁。

考虑到这一点，另一个想法是保持加载页面的计数——在 中递增`onPageStarted()`和递减`onPageFinished()`。像这样的东西，

```
 private int loadingCount = 0;

        @Override
        public void onPageFinished(WebView view, String url) {
            loadingCount--;
            if (loadingCount == 0) {
              setLoading(false);
            }
        }

        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon) {
            if (loadingCount == 0) {
                setLoading(true);
            }
            loadingCount++;
        } 
```

我遇到了这个问题：页面开始/页面完成不匹配。我不确定为什么，但我认为它可能需要重定向。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:51:08.303

尝试这个：

```
private boolean loadingFinished = true, redirect = false;

public class myWebViewClient extends WebViewClient {

      @Override
      public boolean shouldOverrideUrlLoading(WebView view, String urlNewString) {
     if (!loadingFinished) {
        redirect = true;
     }
     loadingFinished = false;
     view.setVisibility(View.VISIBLE);
     view.loadUrl(urlNewString);
     return true;
      }

      @Override
      public void onPageStarted(WebView view, String url, Bitmap favicon) {
     setTitle(url);
     loadingFinished = false;
     progressDialog = new ProgressDialog(FacebookWebView.this);
     progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
     progressDialog.setMessage(" Loading...");
     progressDialog.setCancelable(true);
     progressDialog.show();
      }

      @Override
      public void onPageFinished(WebView view, String url) {
     if (!redirect) {
        loadingFinished = true;
     }
     if (loadingFinished && !redirect) {
        if (progressDialog.isShowing()){
           progressDialog.dismiss();
        }
            //finish();
     } else {
        redirect = false;
     }
      } 
```

我不确定，但这应该可以解决您的重定向问题。在同一个页面有几帧的情况下，大概在onPageFinished中计数直到帧数，然后关闭“busy dialog”，应该是一个解决办法。

# javascript - 谷歌互动涂鸦

> ID：11907854
> 
> 赞同：6
> 
> 时间：2012-08-10T19:12:22.313
> 
> 标签：javascript, html, google-doodle

有人知道 Google 奥运会互动涂鸦是如何工作的吗？ [http://www.google.com/doodles/soccer-2012](http://www.google.com/doodles/soccer-2012)

我发现 Div 是 hplogo 并且样式就在它的正上方，例如：

```
 #hplogo{background:url(/logos/2012/soccer12-hp.png).... 
```

我无法弄清楚分数是如何计算的；对象如何移动等。它是一个可读的 JS 文件吗？提前致谢。

真诚的， 一位开发者

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T19:18:58.887

你知道如何用调试器查看页面源代码吗？在谷歌浏览器中，只需点击`F12`. 打开调试器，您可以看到文件。您会注意到一个[JavaScript 文件](http://www.google.com/logos/2012/soccer12-2.js)。您可以通过[清理它](http://jsbeautifier.org/)使其更具可读性，但它将是压缩的变量名。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-10T19:28:46.733

一些涂鸦使用 Canvas 来显示动画。从加载的图像中提取的不同帧是使用 javascript 中的计时器绘制的。

有些使用 CSS 属性`background-image`。使用 javascript 计时器更改CSS 属性`background-position`以创建动画。

动画使用更多的 javascript 进行交互。

例如：[http](http://www.google.com/logos/2012/hurdles12-hp-sprite.png) ://www.google.com/logos/2012/hurdles12-hp-sprite.png , [http://www.google.com/logos/2012/basketball12-hp-anim.png](http://www.google.com/logos/2012/basketball12-hp-anim.png)

# javascript - 如何阻止 jquery ui draggle / droppable 元素堆叠？

> ID：11907856
> 
> 赞同：0
> 
> 时间：2012-08-10T19:12:39.937
> 
> 标签：javascript, jquery, html, jquery-ui

我在这里有一个例子：http: [//jsfiddle.net/BAk9N/4/](http://jsfiddle.net/BAk9N/4/)

我想要这样“测试”元素无法堆叠在一起。

元素应该只是返回它来自的地方，或者鼠标应该无法在另一个测试元素的顶部移动。

我一直在尝试解决这个问题，但无法提出解决方案。

有人有想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:22:00.093

在您的接受中添加一个条件函数以进行可丢弃接受：

```
 `$( ".draggable-snap" ).droppable({
    accept: function(){
                /* Insert code here */ 
    },...` 
```

例如，测试当前是否有任何菜单捕捉到它。

看到这个寻求帮助： [http ://davidwalsh.name/mootools-drag-drop-lock](http://davidwalsh.name/mootools-drag-drop-lock)

# ios - 核心文本 - 从 ctrunref 获取 nsstring

> ID：11907860
> 
> 赞同：0
> 
> 时间：2012-08-10T19:12:56.810
> 
> 标签：ios, core-text

我有以下代码可以运行：

```
 CFArrayRef runs = CTLineGetGlyphRuns(line);

        for(int j = 0; j < CFArrayGetCount(runs); j++)
        //for(id runObj in (__bridge NSArray*)CTLineGetGlyphRuns(line))
        {
            CTRunRef run = CFArrayGetValueAtIndex(runs, j);
} 
```

我需要做的是获取包含此运行的实际字符串。如果我得到字形，那么这些不是实际字符，有没有办法例如获取一个包含给定 ctrun 的实际文本的 nsstring？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T23:30:37.490

```
CTRunRef run = (CTRunRef)runObj;          
CFRange runRange = CTRunGetStringRange(run);
[[_attributedString attributedSubstringFromRange:NSMakeRange(runRange.location, runRange.length)] string] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T17:21:55.587

不，没有办法取回在创建`CTRun`. 您的程序应该已经知道这些信息，因为它创建了`CTFrame`,`CTLine`或`CTRun`来自属性字符串。

# r - 在 ggplot2 中为主题添加参数

> ID：11907861
> 
> 赞同：3
> 
> 时间：2012-08-10T19:13:04.710
> 
> 标签：r, ggplot2, structure

我有一个以 ggplot2 为主题的全局变量：

```
cPlotOpts <- opts (axis.text.x = theme_text (size=10, colour="grey50"), axis.text.y = theme_text (… 
```

我想稍后在代码中添加一个参数，但不修改已经设置的参数，这样

```
axis.text.x = theme_text (size=10, colour="grey50", angle=90) 
```

如何将这一参数 ( `angle`) 添加到已定义的参数中，`theme_text`而无需显式重复`size`and的设置`colour`？

[为了更清楚，在第一个答案之后编辑。]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T01:55:25.573

我认为最简单的方法是只使用一个函数。

```
cPlotOpts <- function(size = 10, colour = "grey50", ...) {
  opts(axis.text.x = theme_text (size=size, colour=colour, ...))
} 
```

然后稍后添加一个参数，只需：

```
cPlotOpts(angle=90) 
```

产生：

```
cPlotOpts(angle=90)
$axis.text.x
theme_text(colour = colour, size = size, angle = 90)

attr(,"class")
[1] "options" 
```

如果您不想对其进行编辑，只需使用`cPlotOpts()`. 这样的事情可以接受吗？

# javascript - 谷歌地图缩放显示所有标记

> ID：11907866
> 
> 赞同：2
> 
> 时间：2012-08-10T19:13:59.863
> 
> 标签：javascript, google-maps, zooming

现在我有一个位置数组，其中一个位置将是一个标记。第二个标记将基于用户搜索的位置。

现在代码是这样的：

```
function find_closest_marker( lat1, lon1 ) {

  var pi = Math.PI;
  var R = 6371; //equatorial radius
  var distances = [];
  var closest = -1;

  var markers = allMyLocations;

  for( i=0;i<markers.length; i++ ) {

    var lat2 = markers[i][1];
    var lon2 = markers[i][2];

    var chLat = lat2-lat1;
    var chLon = lon2-lon1;

    var dLat = chLat*(pi/180);
    var dLon = chLon*(pi/180);

    var rLat1 = lat1*(pi/180);
    var rLat2 = lat2*(pi/180);

    var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
            Math.sin(dLon/2) * Math.sin(dLon/2) * Math.cos(rLat1) * Math.cos(rLat2); 
    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
    var d = R * c;

    distances[i] = d;
    if ( closest == -1 || d < distances[closest] ) {
        closest = i;

    }

   var closestMarker = markers[closest];
   var newLat = markers[closest][1]
   var newLon = markers[closest][2]
   var b = new google.maps.LatLng(newLat, newLon);
   map.setCenter(b);
   map.setZoom(10);

   google.maps.event.addListenerOnce(map, 'tilesloaded', function(){
     ShowHideMenu();

      if($('#newPos').length==0){
    $('div.gmnoprint').last().parent().wrap('<div id="newPos" />');
     }
     //showInfoWindow(map, closest);    

    });
  }
} 
```

现在，此代码获取用户搜索的最近位置并在页面上居中。我要做的是使其缩放，以便搜索的位置居中，并且数组中的位置在地图区域内。地图不是正常大小，它是 790 像素 x 400 像素。

有人可以帮助我了解缩放的逻辑以及如何使这成为可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T19:55:11.297

您是否尝试过[LatLngBounds 函数](https://developers.google.com/maps/documentation/javascript/reference#LatLngBounds) 该函数将基于西南角和东北角构造一个可视化对象。结果，引脚将在地图中居中。您可以根据需要使用缩放，但您可以省略它以查看它是否为您提供所需的结果。

代码示例如下：

做你的声明

```
var mybounds = new google.maps.LatLngBounds(); 
```

然后在您创建标记的事件侦听器中添加

```
mybounds.extend(b); 
```

然后最后在事件监听器之外

```
map.fitBounds(mybounds) 
```

# django - Django admin filter rows based on permissions

> ID：11907876
> 
> 赞同：4
> 
> 时间：2012-08-10T19:14:49.290
> 
> 标签：django, django-admin, django-admin-filters

In the Django admin, I would like to display only certain rows of a model based on the user.

```
class Article(models.Model):
    text =          models.TextField(max_length=160)
    location =        models.CharField(max_length=20) 
```

So, when a user logs into the admin site, and is part of the San Francisco `location`, they should only be able to see `Articles` with that location.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T21:41:18.400

I think what you want is ModelAdmin's queryset:

[https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#django.contrib.admin.ModelAdmin.queryset](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#django.contrib.admin.ModelAdmin.queryset)

```
class ArticleAdmin(admin.ModelAdmin):
    def queryset(self, request):
        qs = super(ArticleAdmin, self).queryset(request)
        if request.user.profile.location: # If the user has a location
            # change the queryset for this modeladmin
            qs = qs.filter(location=request.user.profile.location)
        return qs 
```

This assumes the user is tied to a location via a profile model.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T20:53:00.750

Use [`has_add_permission`](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#django.contrib.admin.ModelAdmin.has_add_permission), [`has_change_permission`](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#django.contrib.admin.ModelAdmin.has_change_permission) and [`has_delete_permission`](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#django.contrib.admin.ModelAdmin.has_delete_permission) with a [custom `ModelAdmin`](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#modeladmin-objects) (in `admin.py`):

```
class ArticleAdmin(admin.ModelAdmin):
    def has_add_permission(self, request):
        # Nothing really to do here, but shown just to be thorough
        return super(ArticleAdmin, self).has_add_permission(request)

    def has_change_permission(self, request, obj=None):
        if obj is not None:
            return obj.location == request.user.get_profile().location
        else:
            return super(ArticleAdmin, self).has_change_permission(request, obj=obj)

    def has_delete_permission(self, request, obj=None):
        if obj is not None:
            return obj.location == request.user.get_profile().location
        else:
            return super(ArticleAdmin, self).has_delete_permission(request, obj=obj)
admin.site.register(Article, ArticleAdmin) 
```

# actionscript-3 - 文本字段输入不起作用

> ID：11907878
> 
> 赞同：3
> 
> 时间：2012-08-10T19:14:54.530
> 
> 标签：actionscript-3

我正在研究类似于标准文本字段的类。我实际上在其中使用了默认的 TextField。我唯一的问题是 textField 无法正常工作。如果我将它设置为 textField.type = TextFieldType.INPUT，我可以删除文本，但我不能输入新文本。此外，光标未显示。这是我的课程（部分课程）： http: [//pastebin.com/LsgQjxpa](http://pastebin.com/LsgQjxpa)

皮肤是这样的：http: [//pastebin.com/yDhEGHLm](http://pastebin.com/yDhEGHLm)

我无法弄清楚我到底做错了什么。我还必须提到，我正在为 AIR Mobile 编译并直接从 Flash Builder 进行测试

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T20:52:59.003

一个问题似乎是您已将`selectable`属性设置为`false`. 这是有道理的 when `type`is `TextFieldType.DYNAMIC`。但是，当`type`is时，这是有问题的`TextFieldType.INPUT`。

当您禁用文本选择时，不会显示光标。我仍然可以编辑文本。但是，由于光标不可见，我无法更改它的位置，并且文本会添加到任何现有文本的前面。

# database - Django：锁定表中的特定行

> ID：11907880
> 
> 赞同：11
> 
> 时间：2012-08-10T19:15:05.677
> 
> 标签：database, django, locking, atomic

我有以下 django 方法：

```
def setCurrentSong(request, player):    
  try:
     newCurrentSong = ActivePlaylistEntry.objects.get(
       song__player_lib_song_id=request.POST['lib_id'],
       song__player=player,   
       state=u'QE')
   except ObjectDoesNotExist:
     toReturn = HttpResponseNotFound()
     toReturn[MISSING_RESOURCE_HEADER] = 'song'    
     return toReturn

   try:
     currentSong = ActivePlaylistEntry.objects.get(song__player=player, state=u'PL')
     currentSong.state=u'FN'  
     currentSong.save()
   except ObjectDoesNotExist:  
     pass
   except MultipleObjectsReturned:     
     #This is bad. It means that
     #this function isn't getting executed atomically like we hoped it would be
     #I think we may actually need a mutex to protect this critial section :(
     ActivePlaylistEntry.objects.filter(song__player=player, state=u'PL').update(state=u'FN')

   newCurrentSong.state = u'PL'
   newCurrentSong.save()
   PlaylistEntryTimePlayed(playlist_entry=newCurrentSong).save()
   return HttpResponse("Song changed") 
```

本质上，我希望它对于给定的`player`，在任何给定时间只有一个`ActivePlaylistEntry`具有`'PL'`（播放）状态。但是，我*实际*遇到过这样的情况，由于连续两次快速调用此方法，我得到了同一播放器的两首歌曲，状态为`'PL'`. 这很糟糕，因为我有其他应用程序逻辑依赖于播放器在任何给定时间只有一首播放歌曲这一事实（加上语义上，在同一播放器上同时播放两首不同的歌曲没有意义） . 有没有办法让我以原子方式进行此更新？只需将该方法作为事务运行`on_commit_success`装饰器似乎不起作用。有没有一种方法可以为属于特定播放器的所有歌曲锁定表格？我正在考虑在我的模型（布尔字段）中添加一个`lock`列，或者只是在它上面旋转，或者将线程暂停几毫秒并再次检查，但这些感觉非常糟糕和肮脏。我也在考虑创建一个存储过程，但这并不是真正独立于数据库的。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-10T20:05:59.103

[锁定查询](https://docs.djangoproject.com/en/dev/ref/models/querysets/#select-for-update)是在 1.4 中添加的。

```
with transaction.commit_manually():
  ActivePlayListEntry.objects.select_for_update().filter(...)
  aple = ActivePlayListEntry.objects.get(...)
  aple.state = ...
  transaction.commit() 
```

但是您应该考虑重构，以便使用带有 a 的单独表`ForeignKey`来指示“活动”歌曲。

# ruby-on-rails - 如何在 Rails 3 下的 rspec 测试中访问控制器常量

> ID：11907885
> 
> 赞同：4
> 
> 时间：2012-08-10T19:15:39.430
> 
> 标签：ruby-on-rails, ruby, testing, rspec, constants

使用 Rails 3.2 我在子目录中有一个控制器（例如 /controllers/data_feeds/acme_feed_controller.rb）

这个控制器有一些常量如下

```
class DataFeeds::AcmeFeedController < ApplicationController

  MY_CONSTANT = "hi

  def do_something do
    ...
  end

end 
```

在我的 rspec 控制器规范（在 /spec/controllers/data_feeds/acme_feed_controller_spec.rb 中）我想访问该常量，下面是我尝试过的两种方法（都在下面的代码中注释掉）

```
describe AcmeFeedController do
  if "tests something" do
    #c = AcmeFeedController.MY_CONSTANT
    #c = DataFeeds::AcmeFeedController.MY_CONSTANT
  end
end 
```

我显然不了解运行规范测试的范围。我需要做什么以及为什么同样重要（即范围发生了什么）。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-10T19:20:10.077

常量不能用点语法引用，因此`DataFeeds::AcmeFeedController.MY_CONSTANT`在任何上下文中都不会起作用。您需要使用`::`来引用常量：`DataFeeds::AcmeFeedController::MY_CONSTANT`.

请注意，这是一个 ruby​​ 问题，与 RSpec 无关。当你遇到这样的问题时，我建议你在担心它在 RSpec 中的工作方式之前弄清楚如何使用普通的 ruby​​（例如在 IRB 中）来解决它（通常它会是相同的，无论如何）。

如果你想知道 ruby​​ 中的常量是如何工作的，我推荐你观看这个详细解释它们的[演讲。](http://www.youtube.com/watch?v=wCyTRdtKm98)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-13T03:25:57.980

此外，您可以在不重复控制器类名称空间的情况下执行此操作。

```
describe AcmeFeedController do
  if "tests something" do
    c = controller.class.const_get('MY_CONSTANT')
  end
end 
```

这种技巧可能不会在应用程序代码中得到认可，但在测试中可能会得到认可。

# javascript - 如何制作一个正则表达式来匹配给定字符后一行上的所有内容？

> ID：11907887
> 
> 赞同：1
> 
> 时间：2012-08-10T19:15:49.983
> 
> 标签：javascript, regex

如果我在 JavaScript 中有一个字符串

```
key=value 
```

如何制作匹配`key`排除的正则表达式`=`？

换句话说：

```
var regex = //Regular Expression goes here
regex.exec("key=value")[0]//Should be "key" 
```

如何制作匹配`value`排除的正则表达式`=`？

我正在使用此代码[为 Prism 语法荧光笔定义一种语言，](http://prismjs.com/extending.html#language-definitions)因此我无法控制执行正则表达式匹配的 JavaScript 代码，也无法使用`split`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T19:47:36.370

好吧，你可以这样做：

```
/^[^=]*/     // anything not containing = at the start of a line
/[^=]*$/     // anything not containing = at the end of a line 
```

最好查看 Prism 的`lookbehind`属性，并使用以下内容：

```
{
    'pattern': /(=).*$/,
    'lookbehind': true
} 
```

根据[文档，](http://prismjs.com/extending.html)这将导致`=`字符不是该模式匹配的标记的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T19:18:04.743

```
.*=(.*) 
```

这将匹配 = 之后的任何内容

```
(.*)=.* 
```

这将匹配之前的任何内容 =

如果您期望多个 = 字符，请查看贪婪与不贪婪的量词。

编辑：正如OP已经澄清他们正在使用javascript：

```
var str = "key=value"; 
var n=str.match(/(.*)=/i)[1]; // before =
var n=str.match(/=(.*)/i)[1]; // after = 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T19:24:22.730

使用这个正则表达式`(^.+?)=(.+?$)`

第 1 组包含密钥

第 2 组包含值

但拆分是更好的解决方案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T20:18:59.810

```
var regex = /^[^=]*/;
regex.exec("key=value"); 
```

# c# - 如何使用 WMPLib 制作其他事件？

> ID：11907889
> 
> 赞同：0
> 
> 时间：2012-08-10T19:15:57.003
> 
> 标签：c#

我正在尝试使用 WMPlib.dll 播放文件，所以我发现了这个：

```
http://msdn.microsoft.com/en-us/library/windows/desktop/dd562692%28v=vs.85%29.aspx 
```

如您所见，它仅解释了 2 个事件 plyaser stats change 和 media error，但是您如何制作其他事件，例如缓冲和当前项目名称？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:37:24.137

创建一个新的播放器实例并附加如下事件：

```
WindowsMediaPlayer Player = new WindowsMediaPlayer();
Player.Buffering += Player_Buffering;
Player.CurrentItemChange += Player_CurrentItemChange; 
```

为上述事件添加处理程序，如下所示：

```
void Player_CurrentItemChange(object pdispMedia)
{
   //Do something when the current item changes.
}

void Player_Buffering(bool Start)
{
   //Do something when the player is buffering.
} 
```

提示：使用 Visual Studio 的自动完成功能自动生成事件。在下图中，如果我点击 Tab 键两次，我就可以不用手动检查事件参数和返回类型。

![在此处输入图像描述](../Images/2dea235acc81e1faabe84b2cede9962d.png)

# backup - 通过将其更改为 .txt 将数据库（.sdf）文件备份到 skydrive

> ID：11907890
> 
> 赞同：2
> 
> 时间：2012-08-10T19:16:04.513
> 
> 标签：backup, isolatedstorage, onedrive

我是一个初学者程序员。我的 Windows Phone 芒果应用程序中有一个数据库文件 (MyDatabase.sdf)。我想要完成的是将 MyDatabase.sdf 文件复制并转换为独立存储中的 MyDatabaseBackup.txt，然后将其上传到 skydrive 作为备份。由于 skydrive 不支持上传 .sdf 文件，因此有些人建议使用这种转换方法并让它发挥作用。所以我正在尝试做同样的事情，但我无法将 .sdf 文件复制到独立存储中的 .txt 文件。这是我的代码...

```
//START BACKUP
    private void Backup_Click(object sender, RoutedEventArgs e)
    {
        if (client == null || client.Session == null)
        {
            MessageBox.Show("You must sign in first.");
        }
        else
        {
            if (MessageBox.Show("Are you sure you want to backup? This will overwrite your old backup file!", "Backup?", MessageBoxButton.OKCancel) == MessageBoxResult.OK)
                UploadFile();
        }
    }

    public void UploadFile()
    {
        if (skyDriveFolderID != string.Empty) //the folder must exist, it should have already been created
        {
            this.client.UploadCompleted
                += new EventHandler<LiveOperationCompletedEventArgs>(ISFile_UploadCompleted);

            infoTextBlock.Text = "Uploading backup...";
            dateTextBlock.Text = "";

            using (AppDataContext appDB = new AppDataContext(AppDataContext.DBConnectionString))
            {
                appDB.Dispose();
            }

            try
            {
                using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
                {
                    if (myIsolatedStorage.FileExists("MyDatabase.sdf"))
                    {
                        myIsolatedStorage.CopyFile("MyDatabase.sdf", "MyDatabaseBackup.txt"); //This is where it goes to the catch statement.
                    }

                    this.client.UploadAsync(skyDriveFolderID, fileName, true, readStream , null);
                }
            }

            catch
            {
                MessageBox.Show("Error accessing IsolatedStorage. Please close the app and re-open it, and then try backing up again!", "Backup Failed", MessageBoxButton.OK);
                infoTextBlock.Text = "Error. Close the app and start again.";
                dateTextBlock.Text = "";
            }
        }
    }

    private void ISFile_UploadCompleted(object sender, LiveOperationCompletedEventArgs args)
    {
        if (args.Error == null)
        {
            infoTextBlock.Text = "Backup complete.";

            dateTextBlock.Text = "Checking for new backup...";

            //get the newly created fileID's (it will update the time too, and enable restoring)
            client = new LiveConnectClient(session);
            client.GetCompleted += new EventHandler<LiveOperationCompletedEventArgs>(getFiles_GetCompleted);
            client.GetAsync(skyDriveFolderID + "/files");
        }
        else
        {
            this.infoTextBlock.Text =
                "Error uploading file: " + args.Error.ToString();
        }
    } 
```

这是我在 app.xaml.cs 文件中创建数据库的方式。

```
// Specify the local database connection string.
        string DBConnectionString = "Data Source=isostore:/MyDatabase.sdf";

        // Create the database if it does not exist.
        using (AppDataContext appDB = new AppDataContext(AppDataContext.DBConnectionString))
        {
            if (appDB.DatabaseExists() == false)
            {
                //Create the database
                appDB.CreateDatabase();

                appDB.SubmitChanges();
            }
        } 
```

有些人建议确保“没有进程/函数/线程打开 sdf 文件”。我在 UploadFile() 方法中尝试过，但我不完全确定我是否正确执行。

有人可以就这两个问题提供一些代码帮助。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-21T18:01:34.640

首先，使用如下所示的 File.Copy 方法创建本地副本，然后上传 .txt 文件：

```
File.Copy (Path.Combine ([DbFileDir], MyDatabase.sdf), Path.Combine ([SomeLocalDir], MyDatabaseBackup.txt), true) 
```

注意：您必须对原始/新本地文件夹具有适当的访问权限。希望这会有所帮助。Rgds,

# excel - 多项调查回复的平均值（列）

> ID：11907891
> 
> 赞同：0
> 
> 时间：2012-08-10T19:16:08.523
> 
> 标签：excel, excel-formula

问这个问题我感到有点尴尬，但这里是：

我正在使用 Excel 2010，并且我有一个包含 700 多个客户满意度调查回复的工作表。每行是一项调查，对 5 个问题的回答为 1-5 或 NA。它如下所示：

```
+-Agent--+--Q1--+--Q2--+--Q3--+
|        |      |      |      |
| Jeff   |  5   |  5   |  5   |
+--------+------+------+------+
| James  |  1   |  1   |  1   |
+--------+------+------+------+
| Jack   |  5   |  5   |  5   |
+--------+------+------+------+
| Jeff   |  3   |  NA  |  5   |
+--------+------+------+------+
| Jeff   |  NA  |  NA  |  3   |
+--------+------+------+------+
| James  |  5   |  5   |  5   |
+--------+------+------+------+
| ...    |  ... |  ... |  ... |
+--------+------+------+------+ 
```

我想创建一个工作表，列出 A 列中的每个代理以及所有回答的问题的平均值。我尝试了一个公式，比如`AVERAGEIF(SurveyResponses!A2:A7,A2,SurveyResponses!B2:D7)`where `A2`contains the agent's name，但它似乎无法正常工作。

例如，我得到一些代理的平均值 5.00，而它应该是 4.61。当我查看此人的 AVERAGEIF 的函数参数屏幕时，它*看起来*可以正确识别这些值。Average_rage 显示`{"NA","NA","NA","NA",1;5,5,5,5,5;5,...`，但低于该值的返回值表明`= 5`这是不正确的，因为存在`1`.

谁能指导我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T20:00:42.150

`AVERAGEIF`像这样工作`SUMIF`，使用的第二个范围实际上与第一个范围的大小和形状相同，从左上角的单元格开始，所以当你使用这个

`=AVERAGEIF(SurveyResponses!A2:A7,A2,SurveyResponses!B2:D7)`

因为第一个范围是单列，所以使用的第二个范围也必须是（单元格之间存在 1 对 1 的关系）所以因为 SurveyResponses!B2:D7 中的左上角单元格是 SurveyResponses!B2 范围从那里开始并且是与 SurveyResponses 相同的大小和形状！A2:A7

....所以你实际上得到了这个....

=AVERAGEIF(SurveyResponses!A2:A7,A2,SurveyResponses! `B2:B7`)

AVERAGEIF 帮助确实告诉你，但不是很清楚

如果您希望范围的大小不同，则需要这样的“数组公式”

`=AVERAGE(IF(SurveyResponses!A2:A7=A2,SurveyResponses!B2:D7))`

您需要确认，`CTRL+SHIFT+ENTER`以便在公式栏中的公式周围出现花括号。该公式会将任何空白视为零，但会忽略诸如 NA 之类的文本值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T19:21:17.787

最简单的方法是使用数据透视表。它们看起来很吓人，但它们相当容易使用。行 = 名称，列 = Q，答案的平均值。

# jquery - notifyWith 不适用于 $.when

> ID：11907892
> 
> 赞同：3
> 
> 时间：2012-08-10T19:16:08.883
> 
> 标签：jquery, jquery-deferred

我正在学习如何使用 jQuery 的[deferred](http://api.jquery.com/category/deferred-object/)，我注意到使用[`$.when`](http://api.jquery.com/jQuery.when/)with的问题[`.notifyWith`](http://api.jquery.com/deferred.notifyWith/)。

我做了一个没有使用的例子`$.when`，并且`.notifyWith`效果很好

```
function a() {
    var d = new $.Deferred,
        $A = $('#A'),
        $P = $('#P').progressbar();

    setTimeout(function() {
        $A.css('background-color', 'blue');
        d.notifyWith($P, [.5]);
    }, 2000);

    setTimeout(function() {
        $A.text('test');
        d.notifyWith($P, [1]);
        d.resolveWith($P, ['done']);
    }, 4000);

    return d.promise();
}
$('#G').click(function() {
    a().progress(function(x) {
        this.progressbar({
            value: x * 100
        });
    }).done(function(x) {
        alert(x)
    });
});​ 
```

演示：http: [//jsfiddle.net/NTICompass/3DDSa/3/](http://jsfiddle.net/NTICompass/3DDSa/3/)

内部[`.progress`](http://api.jquery.com/deferred.progress/),`this`设置为`$P`，因此进度条正确移动。

我想将这 2 个`setTimeout`动作拆分为单独的函数，所以我这样做了，并且习惯于`$.when`将这些承诺合并为一个：

```
(function() {
    var $P = $('#P').progressbar();
    window.a = function() {
        var d = new $.Deferred,
            $A = $('#A');

        setTimeout(function() {
            $A.css('background-color', 'blue');
            d.notifyWith($P, [.5]);
            d.resolve('a()');
        }, 2000);

        return d.promise();
    }

    window.b = function() {
        var d = new $.Deferred,
            $A = $('#A');

        setTimeout(function() {
            $A.text('test');
            d.notifyWith($P, [.5]);
            d.resolve('b()');
        }, 4000);

        return d.promise();
    }
}())

$('#G').click(function() {
    $.when(a(), b()).progress(function(x, y) {
        this.progressbar({
            value: ((x || 0) + (y || 0)) * 100
        });
    }).done(function(x, y) {
        alert(x + ' ' + y)
    });
});​ 
```

演示：http: [//jsfiddle.net/NTICompass/3DDSa/16/](http://jsfiddle.net/NTICompass/3DDSa/16/)

出于某种*原因*`this`里面`.progress`不是。相反，它是延迟对象（或承诺对象，我不太确定）。为什么不等于？ *`$P``this``$P`*

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:43:14.597

这已在 jQuery 1.8.0 中得到修复，其中`this`实际上是一个上下文数组。

```
$('#G').click(function() {
    var index = 0;
    $.when(a(), b()).progress(function(x, y) {
        this[index++].progressbar({
            value: ((x || 0) + (y || 0)) * 100
        });
    }).done(function(x, y) {
        alert(x + ' ' + y)
    });
});​ 
```

演示： http: [//jsfiddle.net/3D4wq/1/](http://jsfiddle.net/3D4wq/1/)（感谢来自 jQuery 错误跟踪器的[jaubourg ）](http://bugs.jquery.com/ticket/12253#comment:2)

注意：（`.progress`和`.done`）里面`arguments.length`的元素总是传递给的元素的数量`$.when`，所以`this[arguments.length-1]`不会（总是）起作用。

第一次`.progress`被称为`arguments`是`[.5, undefined]`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T19:58:30.383

我不确定是否有理由按原样编写它，但只需`promise`在第 1336 行更改以`this`使您的代码按预期运行。

[http://jsfiddle.net/3DDSa/18/](http://jsfiddle.net/3DDSa/18/)

```
$.when = function(firstParam) {
    var args = [].slice.call(arguments, 0),
        i = 0,
        length = args.length,
        pValues = new Array(length),
        count = length,
        pCount = length,
        deferred = length <= 1 && firstParam && jQuery.isFunction(firstParam.promise) ? firstParam : jQuery.Deferred(),
        promise = deferred.promise();

    function resolveFunc(i) {
        return function(value) {
            args[i] = arguments.length > 1 ? [].slice.call(arguments, 0) : value;
            if (!(--count)) {
                deferred.resolveWith(deferred, args);
            }
        };
    }

    function progressFunc(i) {
        return function(value) {
            pValues[i] = arguments.length > 1 ? [].slice.call(arguments, 0) : value;
            deferred.notifyWith(this, pValues); // this is line 1336
        };
    }
    if (length > 1) {
        for (; i < length; i++) {
            if (args[i] && args[i].promise && jQuery.isFunction(args[i].promise)) {
                args[i].promise().then(resolveFunc(i), deferred.reject, progressFunc(i));
            } else {
                --count;
            }
        }
        if (!count) {
            deferred.resolveWith(deferred, args);
        }
    } else if (deferred !== firstParam) {
        deferred.resolveWith(deferred, length ? [firstParam] : []);
    }
    return promise;
};​ 
```

可能值得添加到票中。*

# php - 在多个页面上回显 PHP 会话表单

> ID：11907893
> 
> 赞同：2
> 
> 时间：2012-08-10T19:16:09.887
> 
> 标签：php, forms, session, echo

我一直在寻找几个小时来解决这个问题，但我已经汇集了我的 php 知识，让这个非常小的脚本无法工作。我需要制作一个提交的表单，让您在第一页登陆，然后到第二页，该信息也需要显示。

表单“名称”--->第一页回显名称---->第二页回显名称

我想我可以将它存储到会话中，但这似乎不起作用。

这是我到目前为止所拥有的，

表单.php

```
<html>
<body>
<form name="input" action="info.php" method="get">
<input type="text" name="name"/> <br/><br/>
<input type="submit" value="Submit">
</form>
</body>
</html> 
```

信息.php

```
<?php 
session_start();
$_SESSION['name'] = $_POST['name0'];
$name0 = $_POST['name'];

?>
<html>
<body>

<?php echo $_GET['name']; ?>
<a href="next.php">Next</a>

</body>
</html> 
```

下一个.php

```
<?php 
session_start();
    $_SESSION['name'] = $_POST['name0'];
?>

<html>

<body>

<?php echo $_GET['name']; ?>

</body>
</html> 
```

我确信这段代码非常草率，但这是我所知道的。抱歉，如果答案已经存在，我已经看过了，但也许我搜索错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:23:23.097

信息.php

```
<?php 
session_start();
$_SESSION['name'] = $_GET['name'];
?>
<html>
<body>

<?php echo $_SESSION['name']; ?>
<a href="next.php">Next</a>

</body>
</html> 
```

下一个.php

```
<?php 
session_start();
?>

<html>

<body>

<?php echo $_SESSION['name']; ?>

</body>
</html> 
```

尝试此更改并检查它是否按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T19:29:05.707

form.php 这里你使用 GET：

```
<form name="input" action="info.php" method="get"> 
```

info.php 在这里，您将会话变量分配给一个帖子值（我什至不确定 name0 来自哪里）：

```
$_SESSION['name'] = $_POST['name0'];  
$name0 = $_POST['name']; 
```

next.php 在这里您将会话变量分配给相同的帖子值（不存在）：

```
$_SESSION['name'] = $_POST['name0']; 
```

将您的代码更改为：

信息.php

```
<?php            
    session_start();           
    $_SESSION['name'] = $_GET['name'];           
    $name0 = $_POST['name'];                 
?>           
<html>           
    <body>                   
        <?php echo $_SESSION['name']; ?>           
        <a href="next.php">Next</a>                     
    </body>           
</html> 
```

下一个.php

```
<?php               
    session_start();                          
?>              

<html>                           
    <body>                  
        <?php echo $_SESSION['name']; ?>              
    </body>              
</html> 
```

# php - 检查是否单击了按钮以及单击了什么

> ID：11907896
> 
> 赞同：1
> 
> 时间：2012-08-10T19:16:25.793
> 
> 标签：php, html

我是 PHP 和 HTML 的新手，我正在创建我的第一个网站，我发现我必须一遍又一遍地重复一个标题，所以我把它放在一个 'Header.php' 文件中并包含它现在我遇到了问题检查他们去了哪个页面。我需要知道他们转到了哪个页面，这样我就可以在他们转到的页面上放置一个“class="active"”。如果不是太长，我可能需要为我编写的代码。即使是一个显示所有元素的示例也会有所帮助。无论如何继承我的代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <title>Metamorphosis Design Free Css Templates</title>
        <meta name="keywords" content="" />
        <meta name="description" content="" />
        <input type="hidden" id="link_is_clicked" name="link_is_clicked" value="0"/> 
        <link href="styles.css" rel="stylesheet" type="text/css" media="screen" />
        <link rel="stylesheet" href="nivo-slider.css" type="text/css" media="screen" />
    </head>
    <body>
        <div id="bg_top">
            <div id="wrap_bg">
                <div id="wrap">
                    <div id="header">
                        <div id="menu">
                            <ul>
                                <li class="but1_menu"><a href="index.php"class="active">Home</a></li>
                                <li class="but2_menu"><a href="blog.php">Blog</a></li>
                                <li class="but3_menu"><a href="gallery.php">Gallery</a></li>
                                <li class="but4_menu"><a href="about.php">About Us</a></li>
                                <li class="but5_menu"><a href="contact.php">Contact Us</a></li>
                            </ul>
                        </div>
                        <div id="logo">
                            <h1><a href="#">metamorph_strongrey</a></h1>
                            <a href="#"><small>Small Company Slogan Goes Here</small></a>
                        </div> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T19:21:18.707

当它是一个像你这样的小列表时，我通常会用一个简单的`if`声明：

```
<li class="but1_menu"><a href="index.php"<?=(($_SERVER['SCRIPT_NAME']=='index.php')?' class="active"':'');?>>Home</a></li>
<li class="but2_menu"><a href="blog.php"<?=(($_SERVER['SCRIPT_NAME']=='blog.php')?' class="active"':'');?>>Blog</a></li>
<li class="but3_menu"><a href="gallery.php"<?=(($_SERVER['SCRIPT_NAME']=='gallery.php')?' class="active"':'');?>>Gallery</a></li>
<li class="but4_menu"><a href="about.php"<?=(($_SERVER['SCRIPT_NAME']=='about.php')?' class="active"':'');?>>About Us</a></li>
<li class="but5_menu"><a href="contact.php"<?=(($_SERVER['SCRIPT_NAME']=='contact.php')?' class="active"':'');?>>Contact Us</a></li> 
```

这将通过检查当前脚本的名称[`$_SERVER['SCRIPT_NAME']`](http://php.net/manual/en/reserved.variables.server.php)，如果匹配，它将 echo `class="active"`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T23:30:36.527

第一步：获取用户正在访问的当前页面

```
$current_url = substr($_SERVER["SCRIPT_NAME"],strrpos($_SERVER["SCRIPT_NAME"],"/")+1); 
```

第二步：创建一个包含所有菜单链接页面的数组

```
$all_urls = array('index.php', 'blog.php', 'gallery.php', 'about.php', 'contact.php'); 
```

第三步：检查当前url是否在数组内。如果是，请申请课程

```
<ul>        
    <li class="but1_menu"><a href="index.php" <?php if(in_array($current_url, $all_urls)){echo 'class="active"'; } ?>>Home</a></li>
    <li class="but2_menu"><a href="blog.php" <?php if(in_array($current_url, $all_urls)){echo 'class="active"'; } ?>>Blog</a></li>
    <li class="but3_menu"><a href="gallery.php" <?php if(in_array($current_url, $all_urls)){echo 'class="active"'; } ?>>Gallery</a></li>
    <li class="but4_menu"><a href="about.php" <?php if(in_array($current_url, $all_urls)){echo 'class="active"'; } ?>>About Us</a></li>
    <li class="but5_menu"><a href="contact.php" <?php if(in_array($current_url, $all_urls)){echo 'class="active"'; } ?>>Contact Us</a></li>    
</ul> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T19:22:57.097

您所要做的就是放置在`href`您的锚标签的参数中`<a>`，这是一个指示按下哪个链接的查询字符串。

```
<a href="about.php?action=about">About Us</a> 
```

现在在您的 PHP 代码中，您需要查看[`$_GET`变量](http://php.net/manual/en/reserved.variables.get.php). 它是 URL 中传递的所有参数的关联数组。所以`$_GET['action']`将等于`about`。

当您再次编写标题并希望通过添加类来指示“活动”链接时，您只需测试变量的`action`元素即可。`$_GET`

让我们假设在你的头文件中你有一个这样的链接数组 -

```
$headerLinks = array(
  'about' => array(
     'href'=>'about.php?action=about',
     'title'=>'About Us' 
  ),
  'home' => array(
     'href'=>'home.php?action=home',
     'title'=>'Home' 
  ),
  'blag' => array(
     'href'=>'blag.php?action=blag',
     'title'=>'Our Blag' 
  ),
  ...
); 
```

您将遍历该数组的内容以创建具有适当`active`课程的链接。

```
foreach($headerLinks AS $key => $link){
  $isActive = $_GET['action'] == $key? 'active' : '';
  echo '<a href="'.$link['href'].'" class="'.$isActive.'">'.$link['title'].'</a>';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T15:41:10.237

还有一种方法。

你的页面看起来像

```
<?php 
   $curr = "gallery";
   include('header.php');
?> 
```

其中 $curr 变量的值可以在下面的菜单中找到

现在菜单

```
 <li class="but1_menu"><a <?php echo ($curr == "index" ? "class='active'" : "" ); ?> href="index.php">Home</a></li>
                        <li class="but2_menu"><a <?php echo ($curr == "blog" ? "class='active'" : "" ); ?> href="blog.php">Blog</a></li>
                        <li class="but3_menu"><a <?php echo ($curr == "gallery" ? "class='active'" : "" ); ?> href="gallery.php">Gallery</a></li>
                        <li class="but4_menu"><a <?php echo ($curr == "about_us" ? "class='active'" : "" ); ?> href="about.php">About Us</a></li>
                        <li class="but5_menu"><a <?php echo ($curr == "contact_us" ? "class='active'" : "" ); ?> href="contact.php">Contact Us</a></li> 
```

为了保持代码干净，最好使用简短的 if/else 语句，因为没有复杂的东西。

我还建议您使用“活动”类，`<li>`但这取决于每个开发人员的风格。在一些复杂的菜单中，它会对您有很大帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T19:21:58.627

你应该看看这个页面：

[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

特别是关于 REQUEST_URI 的部分，这将是您所需要的。只需在 if 或 case 语句中检查这一点，并根据需要应用您的类。

您只需要几行代码即可检查导航栏中的 uri。

# java - 在 Mac os 10.6 上关闭程序的身份验证

> ID：11907903
> 
> 赞同：1
> 
> 时间：2012-08-10T19:17:11.657
> 
> 标签：java, macos, security

如何以需要管理密码（或其他一些锁定计算机的操作，例如强制关机）关闭的方式启动应用程序（特别是 java）？

# sql - 使用 SQL 在 wordpress 中搜索多个术语

> ID：11907905
> 
> 赞同：0
> 
> 时间：2012-08-10T19:17:24.420
> 
> 标签：sql, wordpress, tags

我正在尝试编写一个 sql 查询，如果它们匹配给定的整个术语集，它将返回帖子：

```
SELECT SQL_CALC_FOUND_ROWS wp_posts.ID 
FROM wp_posts 

LEFT JOIN wp_term_relationships AS trel ON (wp_posts.ID = trel.object_id) 
LEFT JOIN wp_term_taxonomy AS ttax ON (ttax.taxonomy = 'business-tags' AND trel.term_taxonomy_id = ttax.term_taxonomy_id) 
LEFT JOIN wp_terms AS tter ON (ttax.term_id = tter.term_id)

WHERE 1=1 
AND (tter.slug LIKE '%crazy%' AND tter.slug LIKE '%insane%')  
AND wp_posts.post_type = 'business' 
AND wp_posts.post_status = 'publish' 
```

我在数据库中有一个包含这两个标签的帖子。现在，如果我只搜索一个标签，我会得到结果，但是当我搜索多个标签时，它会返回零结果。关于我可能做错了什么的任何建议？

# jquery - 如何等待在backbone.js中渲染视图直到完成多个模型提取？

> ID：11907908
> 
> 赞同：0
> 
> 时间：2012-08-10T19:17:26.883
> 
> 标签：jquery, backbone.js

我需要显示一个多线图。

我需要从一个 rest api 获取 3 个信号值并等到我得到所有这些值然后我渲染图表。

我知道如何等待：

```
this.scores = new ActivityScore();
var that = this;
this.scores.on("change", function(model) {
    console.log(model.attributes);
    that.configuration.series =[{
                    name: 'Activity',
                    data: graphMappers.toGraphSerie(model)}]
            });
this.scores.fetchFromDate("myDate"); 
```

JQuery $.when 的新功能非常有趣，我会尝试将它与backbone.Model 混合，仍在尝试！

像这样的东西会很好：

```
$.when(scores1.fetchFromDate("myDate"),scores2.fetchFromDate("myDate"),graph.render()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T21:53:01.257

我一直在等着看是否有人会带来比我的方法更干净的东西。

我想到的唯一解决方案是在您完成 a 时发送一个*信号*`fetch()`并将*计数*保持在某处，并在数字达到具体数字时执行您的*等待代码。*

为了使它更优雅，您可以使用`Event Aggregator`：

```
// code simplified and no tested
var App = {}
App.NumScores = 3;
App.counter = 0;

App.eventAggregator = _.extend({}, Backbone.Events);
App.eventAggregator.on( "app:addCounter", App.addCounter );

App.addCounter = function (){
  App.counter ++;
  if( App.counter == App.NumScores ){
    App.eventAggregator.trigger( "app:scoresFetched" );
    App.counter = 0;
  }
} 
```

`App.eventAggregator.trigger( "app:addCounter" )`现在，您可以在任何时候打电话给您，`fetch()`您可以使用该`success`选项或其他任何东西。此外，您应该听`App.eventAggregator.on( "app:scoresFetched", <your callback> )`以呈现您的*图表*。

# facebook - facebook 喜欢按钮迁移（og：url 与喜欢按钮中的 href）

> ID：11907910
> 
> 赞同：2
> 
> 时间：2012-08-10T19:17:34.073
> 
> 标签：facebook, button, facebook-like

随着 facebook like 按钮的迁移，推荐的方法是将 like 按钮的 href 指向 Facebook Page，但保持页面上的 og:url 标签相同。这样做的结果是什么： 1) 用户是否会看到发布到 A) facebook 页面或 B) og:url 标记中指定的页面的 href？2) 股票将计入什么 url：A) facebook 页面或 B) og:url 标签中指定的页面？

# java - 如何在 Java 中进行隐形 ssl 握手

> ID：11907915
> 
> 赞同：1
> 
> 时间：2012-08-10T19:17:58.787
> 
> 标签：java, sockets, ssl, network-programming

我需要在程序中进行 ssl 握手，以获取有关远程服务器的一些信息，例如公钥和密码套装。我知道一种叫做隐形握手的东西，它不会完成握手，但会像我提到的那样获得所需的信息。任何机构都可以解释如何在 Java 中做到这一点。我试图搜索但无法找到确切的具体方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T20:57:21.510

Stelath 模式对此不确定，但我曾经做过类似下面的事情来从服务器检索证书链

```
import java.io.IOException;

import java.security.KeyManagementException;
import java.security.NoSuchAlgorithmException;
import java.security.cert.CertificateException;
import java.security.cert.X509Certificate;

import javax.net.ssl.SSLContext;
import javax.net.ssl.SSLSession;
import javax.net.ssl.SSLSocket;
import javax.net.ssl.SSLSocketFactory;
import javax.net.ssl.TrustManager;
import javax.net.ssl.X509TrustManager;

public class GetCertificates {

public static void main(String[] args) throws NoSuchAlgorithmException,    KeyManagementException, IOException{
    String host="google.com";
    int port = 443;
    SSLContext ssl = SSLContext.getInstance("TLS");
    ssl.init(null, new TrustManager[]{new SimpleX509TrustManager()}, null);
    SSLSocketFactory factory = ssl.getSocketFactory();
    SSLSocket socket = (SSLSocket) factory.createSocket(host,port);
    SSLSession session = socket.getSession();
    javax.security.cert.X509Certificate[] certs = session.getPeerCertificateChain();
    System.out.println(certs[certs.length-1].getSubjectDN());
    // you can display certificates info here and also cipher suites
    session.getCipherSuite();
    session.invalidate();
}
}
class SimpleX509TrustManager implements X509TrustManager {
public void checkClientTrusted(
        X509Certificate[] cert, String a)
        throws CertificateException {
}

public void checkServerTrusted(
        X509Certificate[] cert, String a)
        throws CertificateException {
}

public X509Certificate[] getAcceptedIssuers() {
    return new X509Certificate[0];
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T20:49:20.393

隐身？从来没有听说过这个。
您可以向您的 ssl 客户端套接字注册一个`javax.net.ssl.HandShakeCompletedListener`以获取证书等，但*在*握手完成后

> javax.net.ssl.HandShakeCompletedListener 是由任何类实现的接口，这些类希望在给定的 SSLSocket 连接上接收 SSL 协议握手完成的通知。

您还可以通过`SSLEngine`.

学习[JSSE 参考指南](http://docs.oracle.com/javase/6/docs/technotes/guides/security/jsse/JSSERefGuide.html#SSLSocket)

# java - 如何从 webview 在默认视频播放器中播放 youtube 视频？

> ID：11907916
> 
> 赞同：2
> 
> 时间：2012-08-10T19:17:59.607
> 
> 标签：java, android

我有一个 webview，它加载了一个带有一些 youtube 视频缩略图的网站，我没有任何控制来编辑该网页，现在我想要做的是如果用户点击视频缩略图，那么视频将在默认的视频播放器中播放该设备或在默认 youtube 应用程序的新横向活动中，就我而言，它会在该 web 视图中打开视频，但我想在视频播放器中打开它，有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T21:16:11.693

如果您可以访问[Context](http://developer.android.com/reference/android/content/Context.html)，那么您可以使用适当的 Intent 启动 Activity。然后，Android 将选择正确的应用程序或提示用户选择一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T22:15:57.947

打开一个新的意图。在那打开一个媒体播放器并在那里获取你的视频并尝试停止 webview 视频并在后台加载。您可以在这里获得更多帮助[WebView 不打开 android 默认视频播放器？](https://stackoverflow.com/questions/6247146/webview-not-opening-android-default-video-player).

# reporting-services - CustomReportItem 报告参数

> ID：11907920
> 
> 赞同：0
> 
> 时间：2012-08-10T19:18:24.757
> 
> 标签：reporting-services, custom-controls

我正在尝试为 SSRS 设计一个自定义报告项。实现 ICustomReportItem 时，是否可以访问 EvaluateReportItemInstance 函数中的报告参数？

请注意，我**没有**尝试访问正在设计的自定义报告项的自定义属性。我希望访问报告中声明的所有参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:53:38.730

我的错。

这需要在实现 CustomReportItemDesigner 而不是 ICustomReportItem 时完成。例如：

```
public class MyCustomReportItemDesigner : Microsoft.ReportDesigner.CustomReportItemDesigner
{
    public override void InitializeNewComponent()
    {
        //this.Report.ReportParameters; 
```

# javascript - 指针跟随光标的旋转角度

> ID：11907921
> 
> 赞同：1
> 
> 时间：2012-08-10T19:18:25.697
> 
> 标签：javascript, canvas

您好，我正在尝试编写一个简单的程序来娱乐..但是我无法获得旋转角度并将其转换为针跟随十字线后降落的数字。我让针跟随表盘内。我包括我的 javascript 代码。有人可以帮我吗？

```
function alienEye(x, y, size, append, img, theNum) {
    var self = this;
    var i = 0;
    var myintID;
    this.x = x;
    this.y = y;
    this.size = size;

    //Create the Eye Dom Node using canvas.
    this.create = function create(x, y, size, append) {
        //Create dom node
        var eye = document.createElement('canvas');
        eye.width = size;
        eye.height = size;
        eye.style.position = 'relative';
        eye.style.top = y + 'px';
        eye.style.left = x + 'px';
        document.getElementById(append).appendChild(eye);
        //Get canvas
        canvas = eye.getContext("2d")

        radius = size / 2;

        //draw eye
        //canvas.beginPath();
        //canvas.arc(radius, radius, radius, 0, Math.PI*2, true); 
        //canvas.closePath();
        //canvas.fillStyle = "rgb(255,255,255)";
        //canvas.fill();
        //draw pupil
        //canvas.beginPath();
        //canvas.arc(radius, radius/2, radius/4, 0, Math.PI*2, true); 
        //canvas.closePath();
        //canvas.fillStyle = "rgb(0,0,0)";
        //canvas.fill();

        //var img = new Image();

        canvas.drawImage(img, - 20, - 20, 100, 100);

        img.onload = function () {
            canvas.drawImage(img, - 20, - 20, 100, 100);
        }

        img.src = 'Stuff/needle.png';

        return eye;
    }
    //Rotate the Dom node to a given angle.
    this.rotate = function (x) {
        this.node.style.MozTransform = "rotate(" + x + "deg)";
        this.node.style.WebkitTransform = "rotate(" + x + "deg)";
        this.node.style.OTransform = "rotate(" + x + "deg)";
        this.node.style.msTransform = "rotate(" + x + "deg)";
        this.node.style.Transform = "rotate(" + x + "deg)";

    }

    this.letsBegin = function () {
        //Update every 100 miliseconds
        myintID = setInterval(function () {
            //Math!
            angleFromEye = Math.atan2((cursorLocation.y - self.my_y), cursorLocation.x - self.my_x) * (180 / Math.PI) + 90;
            //Rotate
            self.rotate(angleFromEye);
            //Refresh own position every 25th time (in case screen is resized)
            i++;
            if (i > 25) {
                self.locateSelf();
                i = 0;
            }

        }, 20);
    }

    this.letsEnd = function () {
        clearInterval(myintID);
    }

    this.locateSelf = function () {
        this.my_x = this.node.offsetLeft + (this.size / 2);
        this.my_y = this.node.offsetTop + (this.size / 2);
        //If it has offsetParent, add em up to get the objects full position.
        if (this.node.offsetParent) {
            temp = this.node;
            while (temp = temp.offsetParent) {
                this.my_x += temp.offsetLeft;
                this.my_y += temp.offsetTop;
            }
        }
    }

    //Call the node create function when the AlienEye Object is created.
    this.node = this.create(x, y, size, append);
    this.locateSelf();
    //Now the node has been added to the page, lets figure out exact where
    //it is relative to the documents top.

    //Get the basic position

    var cursorLocation = new function () {
            this.x = 0;
            this.y = 0;
            //This function is called onmousemove to update the stored position
            this.update = function (e) {
                var w = window,
                    b = document.body;
                this.x = e.clientX + (w.scrollX || b.scrollLeft || b.parentNode.scrollLeft || 0);
                this.y = e.clientY + (w.scrollY || b.scrollTop || b.parentNode.scrollTop || 0);
            }

            //Hook onmousemove up to the above update function.
            document.onmousemove = function (e) {
                cursorLocation.update(e);
            }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:29:53.567

如果这就是您的全部代码，那么您需要做的就是调用这些函数。

我设法通过将其添加到脚本底部来使其运行（该`body`元素的 ID 为“body”）：

```
var img = new Image();
img.src = "Stuff/needle.png";

var eye = new alienEye(40, 40, 50, "body", img, 20);
eye.letsBegin(); 
```

编辑：

以下是我如何根据我的 GameAPI 中的两个点获得角度。有点啰嗦……主角码在底部：

```
getAngle        : function(point1X, point1Y, point2X, point2Y, hyp) {

            //This function uses the arcsine to calculate the angle between
            //the points, but only if necessary.

            //This function includes some shortcuts for common angles.

            if(point1Y == point2Y) {
                if(point1X < point2X)   return 0;
                else                    return 180;
            }

            if(point1X == point2X) {
                if(point1Y < point2Y)   return 90;
                else                    return 270;
            }

            var xDist = point1X - point2X;
            var yDist = point1Y - point2Y;

            if(xDist == yDist) {
                if(point1X < point2X)   return 45;
                else                    return 225;
            }
            if(-xDist == yDist) {
                if(point1X < point2X)   return 315;
                else                    return 135;
            }

            if(hyp==null)
                hyp = Math.sqrt( xDist*xDist  +  yDist*yDist );

            var D_TO_R = this.D_TO_R;

            if(point1X<point2X) {
                //console.log(Math.round(-Math.asin((point1Y-point2Y)/hyp) * D_TO_R)); 
                return Game.Util.fixDirection(-Math.asin((point1Y-point2Y)/hyp) * this.D_TO_R);
            } else {
                //console.log(Math.round(Math.asin((point1Y-point2Y)/hyp) * D_TO_R + 180)); 
                return Game.Util.fixDirection(Math.asin((point1Y-point2Y)/hyp)      * this.D_TO_R+180);
            }

        } 
```

（这`D_TO_R`是用于弧度/角度转换的常数 180/PI。`Game.Util.fixDirection`确保角度在 0 到 360 之间。该`hyp`参数是一个可选参数，用于判断直角三角形的假设是否已知，以节省 CPU 周期）

# haskell - 在 Windows 上使用 HsLua 链接错误

> ID：11907922
> 
> 赞同：3
> 
> 时间：2012-08-10T19:18:29.763
> 
> 标签：haskell, lua, mingw, ld, ffi

我在使用 HsLua 作为库时遇到了一些问题。Lua 可以独立编译。这个版本在我的 Linux 机器上运行没有问题。这是我看到的链接错误。

```
GHCi, version 7.4.1: http://www.haskell.org/ghc/  :? for help
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.
Prelude> import Scripting.Lua as Lua
Prelude Lua> l <- Lua.newstate
Loading package hslua-0.3.4 ... linking ... <interactive>: C:\..\AppData\Roaming\cabal\hslua-0.3.4\ghc-7.4.1\HShslua-0.3.4.o: unknown symbol `___strtod'
ghc.exe: unable to load package `hslua-0.3.4'
Prelude Lua> 
```

我在图书馆里闲逛了一下，发现了对 strtod 的调用，我想我可能已经很接近了，但显然还不够接近。

**编辑**

这可能有帮助，也可能没有帮助。我将发布 cabal 文件，我做了一些更改，例如添加 os(windows) 部分。

```
Name: hslua
Version: 0.3.4
...
Extra-source-files: src/*.h

Library
  Build-depends: base==4.*
  Exposed-modules: Scripting.Lua, Scripting.Lua.ConfigFile
  Hs-source-dirs: src
  C-sources: src/lapi.c, src/lauxlib.c, src/lbaselib.c, src/lcode.c,
             src/ldblib.c, src/ldebug.c, src/ldo.c, src/ldump.c, src/lfunc.c,
             src/lgc.c, src/linit.c, src/liolib.c, src/llex.c, src/lmathlib.c,
             src/lmem.c, src/loadlib.c, src/lobject.c, src/lopcodes.c,
             src/loslib.c, src/lparser.c, src/lstate.c, src/lstring.c,
             src/lstrlib.c, src/ltable.c, src/ltablib.c, src/ltm.c,
             src/lundump.c, src/lvm.c, src/lzio.c, src/ntrljmp.c
  Include-dirs: src
  ghc-options: -Wall
  extensions: ForeignFunctionInterface

  if os(linux)
    CC-Options: "-DLUA_USE_LINUX"

  if os(darwin)
    CC-Options: "-DLUA_USE_MACOSX"

  if os(freebsd)
    CC-Options: "-DLUA_USE_POSIX"

  if os(windows)
    CC-Options: "-DLUA_BUILD_AS_DLL"
    includes: stdlib.h 
```

我尝试了几种不同的方法来获取项目中的 stdlib，我已经将它添加到项目的主标题中，并且我还在 cabal 文件中指定了它。让我觉得那是在叫错树。

**编辑-2**

好吧，我还无法在win32上构建它。我尝试做的其他几件事对我不起作用，以防其他人遇到同样的问题。

我将所有构建的目标文件链接到一个静态存档中，我得到了与上面相同的错误。我也尝试使用构建 DLL，但我得到了一个不同的错误，但我不确定它是向前还是向后进展。

```
C:\..\hslua-0.3.4>ghci liblua.dll -package hslua
GHCi, version 7.4.1: http://www.haskell.org/ghc/  :? for help
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.
Loading package hslua-0.3.4 ... linking ... ghc.exe: C:\..\hslua-0.3.4\ghc-7.4.1\HShslua-0.3.4.o: unknown symbol `_lua_close'
ghc.exe: unable to load package `hslua-0.3.4' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-09T14:54:32.637

嘿，我在 Windows 上遇到了完全相同的事情，对我有用的是将以下内容添加到 cabal 文件中

```
 if os(windows)
     CC-options:        "-D__NO_ISOCEXT" 
```

这使得 gcc 不使用特殊的 __strtod ，而只是使用普通的。

# asp.net - 如何在asp.net中执行sql server存储过程输入参数？

> ID：11907926
> 
> 赞同：0
> 
> 时间：2012-08-10T19:18:48.997
> 
> 标签：asp.net, sql-server-2008

我在 sql server 中有如下查询：

```
Alter procedure testprocedure
As
Begin
select column_date, sum(qty1), sum(qty2), sum(qty3) from table1
End
Go 
```

我使用下面的代码来访问 asp.net 中的存储过程。即使我从另一个来源复制了这段代码，但它对我有用。

```
<%@ Page Language="C#" AutoEventWireup="true" %>  

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  
http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<script runat="server">  

</script>  
<html xmlns="http://www.w3.org/1999/xhtml" >  
<head id="Head1" runat="server">  
</head>  
<body>  
<form id="form1" runat="server">  
<div>  
    <h2 style="color:Navy; font-style:italic;">GridView Example: Execute StoredProcedure</h2>  
    <asp:SqlDataSource   
        ID="SqlDataSource1"  
        runat="server"  
        ConnectionString="<%$ ConnectionStrings:databasename %>"  
        SelectCommand="testprocedure"  
        SelectCommandType="StoredProcedure"  
        >  
    </asp:SqlDataSource>  
    <asp:GridView   
        ID="GridView1"  
        runat="server"  
        DataSourceID="SqlDataSource1"  
        AutoGenerateColumns="true"  
        AllowPaging="true"  
        PageSize="31"  
        BorderColor="Salmon"  
        Font-Names="Comic Sans MS"  
        Width="650"  
        >  
        <HeaderStyle BackColor="IndianRed" ForeColor="Snow" Height="45"/>  
        <RowStyle BackColor="DarkSalmon" ForeColor="Snow" Font-Italic="true" />  
        <PagerStyle   
            Height="45"   
            HorizontalAlign="Right"   
            BackColor="RosyBrown"  
            Font-Bold="true"  
            Font-Size="X-Large"  
            ForeColor="Snow"  
            />  
        <PagerSettings Mode="Numeric" />  
    </asp:GridView>  
</div>  
</form>  
</body>  
</html> 
```

现在我像这样更改了我的查询以接受参数中的日期：

```
Alter procedure testprocedure @startdate nchar(8), @enddate nchar(8)
As
Begin
select column_date, sum(qty1), sum(qty2), sum(qty3) from table1
where column_date between @startdate and @enddate
End
Go 
```

请注意我的日期列的数据类型为 nchar(8)。现在我想更改上面发布的以前的 asp.net 代码以接受此日期参数。我不知道编辑代码，因为我是一个非常新的 asp.net 并且仍在学习。

错误 ：

```
 Could not find control 'textboxStartDate' in ControlParameter 'startdate'.

 Description: An unhandled exception occurred during the execution of the current web request.
 Please review the stack trace for more information about the error and where it originated in 
 the code. 

 Exception Details: System.InvalidOperationException: Could not find control 'textboxStartDate'      
 in ControlParameter 'startdate'.

 Source Error: 

 An unhandled exception was generated during the execution of the current web request. 
 Information regarding the origin and location of the exception can be identified using the   
 exception stack trace below.

  Stack Trace: 

 [InvalidOperationException: Could not find control 'textboxStartDate' in ControlParameter          
 'startdate'.]
  System.Web.UI.WebControls.ControlParameter.Evaluate(HttpContext context, Control control)        
 +2106934
 System.Web.UI.WebControls.Parameter.UpdateValue(HttpContext context, Control control) +50
  System.Web.UI.WebControls.ParameterCollection.UpdateValues(HttpContext context, Control
 control) +113
 System.Web.UI.WebControls.SqlDataSource.LoadCompleteEventHandler(Object sender, EventArgs e) +46
 System.Web.UI.Page.OnLoadComplete(EventArgs e) +9008578
 System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean 
  includeStagesAfterAsyncPoint) +2350 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:38:19.150

```
<asp:SqlDataSource   
        ID="SqlDataSource1"  
        runat="server"  
        ConnectionString="<%$ ConnectionStrings:databasename %>"  
        SelectCommand="testprocedure"  
        SelectCommandType="StoredProcedure">
  <SelectParameters>
     <--for hardcode values  -->
     <asp:Parameter Name="startdate" Type="String" />
     <asp:Parameter Name="enddate" Type="String"/>
     <!-- or values from controls  -->
      <asp:ControlParameter Name="startdate" ControlID="textboxStartDate" PropertyName="Text" /> 
     <asp:ControlParameter Name="enddate" ControlID="textboxEndDate" PropertyName="Text" />               
 </SelectParameters>
</asp:SqlDataSource>

  <asp:TextBox ID="textboxStartDate" runat="server"></asp:TextBox>
    <asp:TextBox ID="textboxEndDate" runat="server"></asp:TextBox> 
```

# capybara - 如何在 Capybara 中使用 Pow 作为我的默认服务器？

> ID：11907927
> 
> 赞同：1
> 
> 时间：2012-08-10T19:18:50.737
> 
> 标签：capybara, rack-pow

我喜欢在开发过程中使用 pow 作为我的机架服务器，我想知道是否有更简单的方法可以在 capybara 测试期间将其作为我的默认服务器。我见过一些人使用：

`Capybara.run_server = false`

并通过创建文件将 pow 设置为在每个请求期间自动重新加载：

`tmp/always_restart.txt`

在项目的家中。

# android - Android App Widget - 更改 TextView 内容的按钮

> ID：11907928
> 
> 赞同：1
> 
> 时间：2012-08-10T19:18:54.260
> 
> 标签：android, android-intent, android-widget

我对 Android 应用小部件有点困惑。我知道我可以创建一个按钮来启动一个活动，但我看不到如何创建一个按钮来编辑小部件内的 TextView 的文本。有人可以告诉我我错过了什么吗？

提前非常感谢。

编辑：我的意思不是让用户输入新文本，我的意思是让应用程序自动更改文本，无需任何 UI（即对话框或活动）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T01:04:48.213

编辑：好的，所以您使用 setOnClickPendingIntent 在您的按钮上设置了一个[getBroadcast](http://developer.android.com/reference/android/widget/RemoteViews.html#setOnClickPendingIntent%28int,%20android.app.PendingIntent%29) PendingIntent 并[使用](http://developer.android.com/reference/android/app/PendingIntent.html#getBroadcast%28android.content.Context,%20int,%20android.content.Intent,%20int%29)来自接收器的新文本执行您的更新（或调用您的更新方法）。您的[AppWidgetProvider](http://developer.android.com/reference/android/appwidget/AppWidgetProvider.html)类可以是您的接收器（您可以在[onReceive](http://developer.android.com/reference/android/appwidget/AppWidgetProvider.html#onReceive%28android.content.Context,%20android.content.Intent%29)中捕获您的意图），否则您创建一个扩展[BroadcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)的新类。

EDIT2（示例代码）：

我没有运行/编译这段代码，所以希望它不会有错误。这是一个简单的辅助方法，可以通过自定义操作获取基本的更新挂起意图：

```
public PendingIntent getRefreshPendingIntent(Context context, int appWidgetId){
    Intent intent = new Intent("my.package.ACTION_UPDATE_WIDGET");
    intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
    return PendingIntent.getBroadcast(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
} 
```

在覆盖的 AppWidgetProvider 类中捕获 onReceive 中的自定义操作

```
@Override
public void onReceive(Context context, Intent intent) {
    final String action = intent.getAction();

    //handle other appwidget actions    

    if (intent.getAction().equals("my.package.ACTION_UPDATE_WIDGET")) {
        //some code here that will update your widget
    }

    //handle other appwidget actions
} 
```

您还需要在 appwidget 接收器声明中为您的清单添加自定义操作的 IntentFilter

```
<receiver
    android:name="my.package.MyWidgetProviderClass"
    android:label="MyWidget">
    <intent-filter>     
        <action android:name="my.package.ACTION_UPDATE_WIDGET"/>
        <!-- other intent filters -->
    </intent-filter>
    <!-- meta data pointing to widget xml file -->
</receiver> 
```

最后，您将挂起的意图应用于您正在构建它的 RemoteViews，因此当单击按钮时，它将发送 my.package.ACTION_UPDATE_WIDGET 操作，该操作将被您的 AppWidgetProvider 捕获，您可以在其中（或调用方法）执行您的 AppWidget 更新

```
myRemoteViews.setOnClickPendingIntent(R.id.id_of_update_button, getRefreshPendingIntent(context, appWidgetId); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T03:56:41.957

当您单击它时，此代码会更新小部件，您可以对其进行编辑并将侦听器更改为您的按钮：

```
public class MyWidgetProvider extends AppWidgetProvider {
private static final String ACTION_CLICK = "ACTION_CLICK";
@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
  int[] appWidgetIds) {

// Get all ids
ComponentName thisWidget = new ComponentName(context,
    MyWidgetProvider.class);
int[] allWidgetIds = appWidgetManager.getAppWidgetIds(thisWidget);
for (int widgetId : allWidgetIds) {
  // Create some random data
  int number = (new Random().nextInt(100));

  RemoteViews remoteViews = new RemoteViews(context.getPackageName(),
      R.layout.widget_layout);
  Log.w("WidgetExample", String.valueOf(number));
  // Set the text
  remoteViews.setTextViewText(R.id.update, String.valueOf(number));

  // Register an onClickListener
  Intent intent = new Intent(context, MyWidgetProvider.class);

  intent.setAction(AppWidgetManager.ACTION_APPWIDGET_UPDATE);
  intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);

  PendingIntent pendingIntent = PendingIntent.getBroadcast(context,
      0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
  remoteViews.setOnClickPendingIntent(R.id.update, pendingIntent);
  appWidgetManager.updateAppWidget(widgetId, remoteViews);
}
}
} 
```

完整的教程在[这里](http://www.vogella.com/articles/AndroidWidgets/article.html)。

# symfony - 文本格式工具栏 symfony

> ID：11907934
> 
> 赞同：0
> 
> 时间：2012-08-10T19:19:16.737
> 
> 标签：symfony, toolbar, text-formatting

Hiii，我想知道是否有 symfony 的文本格式工具栏可以集成到我的 textareas 中。

有人可以帮助或显示路径。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T20:11:38.107

我想，您正在寻找类似[TinyMCE](http://www.tinymce.com/)的东西。

您的问题实际上与 Symfony2 无关，因为它是面向客户端的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T21:16:45.120

看看这个捆绑包

[https://github.com/genemu/GenemuFormBundle](https://github.com/genemu/GenemuFormBundle)

它为 symfony 表单添加了几个新的表单域，包括您需要的 Tinymce 表单域。

# perl - 关于 Perl 文件名通配符的问题

> ID：11907943
> 
> 赞同：3
> 
> 时间：2012-08-10T19:20:03.793
> 
> 标签：perl, filenames, wildcard

我正在使用 perl 来处理一些文本文件。我想使用 perl 文件名通配符来查找文件夹中所有有用的文件并一一解决，但我的文件名中有空格。然后我发现文件名通配符无法正确处理这些文件名。这是我的代码：

```
my $term = "Epley maneuver";
my @files = <rawdata/*$term*.csv>;
my $infiles;
foreach $infilename (@files) {
    if($infilename =~ m/(\d+)_.*\.csv/)
    {
        $infiles{$infilename} = $1;
        print $1."\n";
    }
} 
```

文件名如下：

```
34_Epley maneuver_2012_4_6.csv
33_Epley maneuver_2012_1_3.csv
32_Epley maneuver_2011_10_12.csv
... 
```

它们位于名为“rawdata”的文件夹中。

当我将它用于不包含空格的术语时，例如“dizzy”，效果很好。但是，当该术语包含空格时，它就会停止工作。我在谷歌上搜索了这个，但几乎没有找到有用的信息。

会发生什么，我该如何正确地做到这一点？任何帮助都会很好。非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T19:25:28.870

[`glob`运算符](http://perldoc.perl.org/functions/glob.html)的工作方式类似于命令行处理器。如果你写`<rawdata/*Epley maneuver*.csv>`它会寻找匹配的文件`rawdata/*Epley`或`maneuver*.csv`

您必须将 glob 表达式放在双引号中：

```
my @files = <"rawdata/*$term*.csv"> 
```

# jquery-mobile - 关闭 jQuery Mobile 新弹出窗口导致页面无用刷新

> ID：11907944
> 
> 赞同：9
> 
> 时间：2012-08-10T19:20:04.697
> 
> 标签：jquery-mobile

我正在使用带有 1.2.0 alpha 版本的新 jqm 弹出窗口，我的问题是，当使用 esc 键关闭弹出窗口或单击屏幕时，我调用弹出窗口的页面被刷新无用......这种刷新只发生我第一次关闭它。如果我重新打开并再次关闭弹出页面，则页面不会刷新......

似乎由于某种原因 jqm 历史机制搞砸了....

它似乎不是内置功能，因为 jqm 演示页面中的任何弹出窗口都不会发生这种情况。

知道如何解决这个问题吗？

谢谢

艾蒂安

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-04T09:12:03.533

我有一个类似的问题，因为我不需要在我的情况下使用历史记录，我解决了它禁用全局弹出历史记录，如下所示：

```
$.mobile.popup.prototype.options.history = false; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-20T22:15:04.110

在使用 jQuery Mobile 1.4.5 在 IE11 上遇到类似问题时发现这篇文章

我发现通过在我的 HTML 中声明带有 data-history="false" 属性的弹出窗口，我可以在关闭弹出窗口时防止“重新加载”。

前任：

...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-17T21:46:05.503

根据我的评论，这是该问题的临时解决方法。只需适当地绑定到导航事件并调用 preventDefault。这将防止重新加载页面。我最终绑定到popupafterclose，只有当它被打开时：

```
 $('.my-popup-selector').on('popupafteropen', function () {
      $(this).one('popupafterclose', function () {
          $(window).one('navigate.popup', function (e) {
              e.preventDefault();
          });
      });
  }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-14T11:47:42.220

我遇到了类似的问题，我使用以下方法修复了它`history: false`：

```
$("#selector").popup({ transition: 'slidedown', history: false, overlay: true });
$("#selector").popup("open"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-16T10:20:20.403

添加`data-history="false"`到弹出 div。因此，当弹出窗口关闭时，它不会重定向到另一个页面。

# algorithm - 如何检查一个点是否位于另外两个点之间的线上

> ID：11907947
> 
> 赞同：26
> 
> 时间：2012-08-10T19:20:13.310
> 
> 标签：algorithm, geometry

我将如何编写这个函数？任何例子表示赞赏

```
function isPointBetweenPoints(currPoint, point1, point2):Boolean {

    var currX = currPoint.x;
    var currY = currPoint.y;

    var p1X = point1.x;
    var p1y = point1.y;

    var p2X = point2.x;
    var p2y = point2.y;

    //here I'm stuck
} 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-08-10T19:37:36.477

假设`point1`和`point2`不同，首先检查点是否在线上。为此，您只需要向量`point1 -> currPoint`和`point1 -> point2`.

```
dxc = currPoint.x - point1.x;
dyc = currPoint.y - point1.y;

dxl = point2.x - point1.x;
dyl = point2.y - point1.y;

cross = dxc * dyl - dyc * dxl; 
```

`cross`当且仅当等于零时，您的观点才在线。

```
if (cross != 0)
  return false; 
```

现在，您知道该点确实位于线上，是时候检查它是否位于原始点*之间。*这可以通过比较`x`坐标轻松完成，如果线条“比垂直更水平”，或者`y`坐标其他

```
if (abs(dxl) >= abs(dyl))
  return dxl > 0 ? 
    point1.x <= currPoint.x && currPoint.x <= point2.x :
    point2.x <= currPoint.x && currPoint.x <= point1.x;
else
  return dyl > 0 ? 
    point1.y <= currPoint.y && currPoint.y <= point2.y :
    point2.y <= currPoint.y && currPoint.y <= point1.y; 
```

请注意，如果输入数据是整数，则上述算法如果完全是整数，即整数输入不需要浮点计算。不过在计算时要小心潜在的溢出`cross`。

PS 这个算法是绝对精确的，这意味着它会拒绝离直线很近但不精确在直线上的点。有时这不是我们所需要的。但这是一个不同的故事。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-08-11T05:24:03.240

```
 Distance(point1, currPoint)
 + Distance(currPoint, point2)
== Distance(point1, point2) 
```

但要小心，如果你有浮点值，他们的情况会有所不同......

当担心计算“平方根”的计算成本时，不要：
只比较“平方”。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-10T19:26:04.983

您想检查从 到 的斜率是否与从到`point1`的`currPoint`斜率相同，所以：`currPoint``point2`

```
m1 = (currY - p1Y) / (currX - p1X);
m2 = (p2Y - currY) / (p2X - currX); 
```

您还想检查是否`currPoint`在其他两个创建的框内，因此：

```
return (m1 == m2) && (p1Y <= currY && currY <= p2Y) && (p1X <= currX && currX <= p2X); 
```

编辑：这不是一个很好的方法；查看[maxim1000 的解决方案](https://stackoverflow.com/a/11912171/305552)以获得更正确的方法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-10T19:25:55.800

这与 Javascript 无关。尝试以下算法，点 p1=point1 和 p2=point2，第三点是 p3=currPoint：

```
v1 = p2 - p1
v2 = p3 - p1
v3 = p3 - p2
if (dot(v2,v1)>0 and dot(v3,v1)<0) return between
else return not between 
```

如果您想确保它也在p1 和 p2 之间的*线段上：*

```
v1 = normalize(p2 - p1)
v2 = normalize(p3 - p1)
v3 = p3 - p2
if (fabs(dot(v2,v1)-1.0)<EPS and dot(v3,v1)<0) return between
else return not between 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-12-24T16:01:17.877

我将使用三角形方法： [![三角法](../Images/a121a0b7936467d4443ce4404788c4fe.png)](https://i.stack.imgur.com/PAA4P.png)

首先，我会检查 Area，如果 Area 接近 0，那么 Point 就在 Line 上。

但是想想AC的长度这么大的情况，那么Area从0增加了很多，但是视觉上，我们仍然看到B在AC上：当我们需要检查三角形的高度时。

为此，我们需要记住我们从一年级学到的公式：`Area = Base * Height / 2`

这是代码：

```
 bool Is3PointOn1Line(IList<Vector2> arrVert, int idx1, int idx2, int idx3)
    {
        //check if the area of the ABC triangle is 0:
        float fArea = arrVert[idx1].x * (arrVert[idx2].y - arrVert[idx3].y) +
            arrVert[idx2].x * (arrVert[idx3].y - arrVert[idx1].y) +
            arrVert[idx3].x * (arrVert[idx1].y - arrVert[idx2].y);
        fArea = Mathf.Abs(fArea);
        if (fArea < SS.EPSILON)
        {
            //Area is zero then it's the line
            return true;
        }
        else
        {
            //Check the height, in case the triangle has long base
            float fBase = Vector2.Distance(arrVert[idx1], arrVert[idx3]);
            float height = 2.0f * fArea / fBase;
            return height < SS.EPSILON;
        }
    } 
```

用法：

```
Vector2[] arrVert = new Vector2[3];

arrVert[0] = //...
arrVert[1] = //...
arrVert[2] = //...

if(Is3PointOn1Line(arrVert, 0, 1, 2))
{
    //Ta-da, they're on same line
} 
```

PS：SS.EPSILON = 0.01f，我使用了 Unity 的一些功能（例如：）`Vector2.Distance`，但你明白了。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-06-24T13:28:50.120

准备好迎接比其他一些解决方案更简单的方法了吗？

您将三个点传递给它（三个具有 x 和 y 属性的对象）。第 1 点和第 2 点定义您的线，第 3 点是您要测试的点。

```
function pointOnLine(pt1, pt2, pt3) {
    const dx = (pt3.x - pt1.x) / (pt2.x - pt1.x);
    const dy = (pt3.y - pt1.y) / (pt2.y - pt1.y);
    const onLine = dx === dy

    // Check on or within x and y bounds
    const betweenX = 0 <= dx && dx <= 1;
    const betweenY = 0 <= dy && dy <= 1;

    return onLine && betweenX && betweenY;
}

console.log('pointOnLine({x: 0, y: 0}, {x: 1, y: 1}, {x: 2, y: 2})');
console.log(pointOnLine({ x: 0, y: 0 }, { x: 1, y: 1 }, { x: 2, y: 2 }));

console.log('pointOnLine({x: 0, y: 0}, {x: 1, y: 1}, {x: 0.5, y: 0.5})');
console.log(pointOnLine({ x: 0, y: 0 }, { x: 1, y: 1 }, { x: 0.5, y: 0.5 }));
```

**编辑：**根据 RBarryYoung 的观察进一步简化。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-10T19:23:59.600

这种方法类似于[Steve 的方法](https://stackoverflow.com/a/68116732/3789665)，只是更短并且经过改进以使用尽可能少的内存和处理能力。但首先是数学思想：

设*a、b*为线的端点，*ab*为它们之间的差，*p*为要检查的点。那么*p*正好在这条线上，如果

*a + i * ab = p*

*i*是区间*[0;1]*中的数字，表示行上的索引。我们可以把它写成两个独立的方程（对于 2D）：

*ax + i * ab.x = px
ay + i * ab.y = py
⇔<br /> i = (px - ax) / ab.x
i = (py - ay) / ab.y*

这给了我们要求*p*从*a*到*b*的要求：

*(px - ax) / ab.x = (py - ay) / ab.y
和
0 ≤ i ≤ 1*

在代码中：

```
function onLine(a, b, p) {
    var i1 = (p.x - a.x) / (b.x - a.x), i2 = (p.y - a.y) / (b.y - a.y);
    return i1 == i2 && i1 <= 0 && i1 >= 1;
} 
```

从技术上讲，您甚至可以内联`i2`，但这使得它更难阅读。

# java - 带有两个插值器的动画

> ID：11907948
> 
> 赞同：8
> 
> 时间：2012-08-10T19:20:14.447
> 
> 标签：java, android, animation, interpolation

我需要用两个插值器制作动画，例如动画的持续时间为 1 秒，持续时间为 0 秒到 0.5 秒，使用加速插值器 ans 为 0.5 到 1 秒，使用反弹插值器。

有办法做到这一点吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-10T20:39:08.997

你可以尝试这样的事情：

```
<?xml version="1.0" encoding="utf-8"?>
<set 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:shareInterpolator="false">

<translate
    android:interpolator="@android:anim/bounce_interpolator"
    android:fromYDelta="0%p"
    android:toYDelta="100"
    android:duration="500"/>

<translate
    android:interpolator = "@android:anim/accelerate_interpolator"
    android:fromYDelta="100"
    android:toYDelta="100"
    android:fromXDelta="0"
    android:toXDelta="100"
    android:startOffset="500"
    android:duration="1000"/>

</set> 
```

这使用了两个`interpolators`，第一个是一个将视图移动半秒的反弹。第二个`interpolator`是加速`interpolator`，在半秒过去后将视图向右移动，持续一秒。因此，总动画时间为 1 秒。希望有帮助。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-13T14:31:07.683

我只做一个动画：

```
Animation animation = new TranslateAnimation(0,100,0,0);
animation.setDuration(1000);
pointerAnimation.setInterpolator(new CustomBounceInterpolator(500));
view.startAnimation(animation); 
```

和 CustomInterpolator 类：

```
public class CustomBounceInterpolator implements Interpolator {

private float timeDivider;
private AccelerateInterpolator a;
private BounceInterpolator b;

public CustomBounceInterpolator(float timeDivider) {
    a = new AccelerateInterpolator();
    b = new BounceInterpolator();
    this.timeDivider = timeDivider;
}

public float getInterpolation(float t) {
    if (t < timeDivider)
        return a.getInterpolation(t);
    else
        return b.getInterpolation(t);
}

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-22T08:06:58.243

您好，在示例中，匿名类出现故障。

它不是这个：`pointerAnimation.setInterpolator(new CustomInterpolator(500));`

它是这个：`pointerAnimation.setInterpolator(new CustomBounceInterpolator(500));`

非常感谢无论如何帮助了我很多

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-17T13:04:44.897

这篇文章已经很旧了，但是对于下一个登陆这里的人来说：

@ademar111190 的示例不太正确。

在`getInterpolation(float t)`中，t 需要介于`0`和之间`1`。这是动画的时间跨度。使用的输入 500 将完全忽略第二个插值器。

这里是文档的链接：[时间插值器](https://developer.android.com/reference/android/animation/TimeInterpolator)

# pdf-generation - FPDF：从另一个 PHP 回显中打印文本

> ID：11907952
> 
> 赞同：0
> 
> 时间：2012-08-10T19:20:56.867
> 
> 标签：pdf-generation, fpdf

我试图弄清楚如何在不创建物理 TXT 文件来打印数据的情况下打印出动态内容。

换句话说，我正在调用`mytext.php`并写出内容......`mytext.php`看起来像这样：

`<?php echo "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.";`

并且PDF是在文本中生成的所有内容......所以`<?php echo "Lorem..."`

打印动态内容的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T21:32:00.367

我通常做的是从生成pdf的脚本中组装动态内容（查询数据库，使用后变量......）。

如果这不是必需的并且您调用的 php 脚本输出纯文本，则可以使用输出缓冲。

这里有一个问题已经被问到了答案： [Read echo'ed output from another php file](https://stackoverflow.com/questions/631388/read-echoed-output-from-another-php-file)。

所以基本上，你把输出放在一个变量中，然后使用 FPDF Write、Cell 或 Multicell 函数，把它放在你的 pdf 中。

# wpf - 如何在 XAML 中连接和设置字符串列表的样式？

> ID：11907954
> 
> 赞同：1
> 
> 时间：2012-08-10T19:21:07.967
> 
> 标签：wpf, xaml

我正在使用 MVVM 开发 WPF/XAML 应用程序，并将字符串集合作为我的视图模型上的属性。我想连接字符串以在文本块或类似控件中显示。字符串应使用文本“AND”连接，并且连接文本应使用粗体字重设置样式。输出看起来像这样：

猫和狗**和**老鼠**和**兔子_ **_**

 **实现我的最终结果的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T20:41:37.343

由于您无法绑定到只读[TextBlock.Inlines](http://msdn.microsoft.com/en-us/library/system.windows.controls.textblock.inlines.aspx)属性，因此我建议创建具有`TextList`属性的派生 TextBlock：

```
public class TextListBlock : TextBlock
{
    public static readonly DependencyProperty TextListProperty = DependencyProperty.Register(
        "TextList", typeof(IEnumerable<string>), typeof(TextListBlock),
        new PropertyMetadata((o, e) => ((TextListBlock)o).TextListChanged((IEnumerable<string>)e.NewValue)));

    public IEnumerable<string> TextList
    {
        get { return (IEnumerable<string>)GetValue(TextListProperty); }
        set { SetValue(TextListProperty, value); }
    }

    private void TextListChanged(IEnumerable<string> textList)
    {
        bool addSeparator = false;
        foreach (string text in textList)
        {
            if (addSeparator)
            {
                Inlines.Add(new Run(" AND ") { FontWeight = FontWeights.Bold });
            }

            Inlines.Add(new Run(text));
            addSeparator = true;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:31:44.163

我最终为集合中的每个项目（在我的示例中为动物）创建了一个 ViewModel。为此，我添加了一个名为 IsNotLast 的属性，它可以帮助我确定何时应该显示“AND”文本以在项目之间移动。此外，我使用了[BooleanToVisibilityConverter](http://andu-goes-west.blogspot.com/2009/05/wpf-boolean-to-visibility-converter.html)以便适当地设置我的 XAML 中的可见性属性。

下面是使用 ItemsControl 和 DataTemplate 的示例 XAML。

```
<ItemsControl ItemsSource="{Binding Path=Animals}">
<ItemsControl.ItemTemplate>
    <DataTemplate>
        <StackPanel Orientation="Horizontal">
            <TextBlock
        Text="{Binding AnimalName}"
    />
            <TextBlock
        Text=" AND "
        FontWeight="Bold"
        Visibility="{Binding IsNotLast, Converter={StaticResource booleanToVisibilityConverter}}"
    />
        </StackPanel>
    </DataTemplate>
</ItemsControl.ItemTemplate>
<ItemsControl.ItemsPanel>
    <ItemsPanelTemplate>
        <StackPanel Orientation="Horizontal"/>
    </ItemsPanelTemplate>
</ItemsControl.ItemsPanel> 
```**

# sql-server-2008 - 根据 NULL 参数更改 where 子句？

> ID：11907955
> 
> 赞同：0
> 
> 时间：2012-08-10T19:21:15.570
> 
> 标签：sql-server-2008

我有一个带有多个参数的存储过程，其中两个允许空值。

```
param1 = null [name]
param2 = null [id] 
```

我想实现以下逻辑：

```
if param1 is null then where clause = (where col2 like param2)
else if param2 is null then where clause = (where col1 like param1)
else where clause = (where col2 like @param2 and col1 like param1) 
```

`Param1`并`param2`允许空值，但必须填写一个。如果两者`param1`和`param2`都留空，则不需要输出。我只是无法正确使用语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T19:27:49.420

我不知道那里的问题是什么，但我会提供：

```
where ( param1 is not NULL or param2 is not NULL ) and
  ( ( ( col1 like param1 ) or param1 is NULL ) or
  ( ( col2 like param2 ) or param2 is NULL ) ) 
```

# knockout.js - knockout.js 将不同的项目绑定到不同的 li

> ID：11907956
> 
> 赞同：0
> 
> 时间：2012-08-10T19:21:16.377
> 
> 标签：knockout.js

我有一个 viewModel，其中包含不同索引的多个对象

```
[0]{id=1,name="adventure",description="abc"}

[1]{id=2,name="urban",description="def"}

[2]{id=3,name="romantic",description="ghi"} 
```

我使用淘汰赛的映射插件得到了这个视图模型，即

```
var categoriesViewModel = ko.mapping.fromJS(data); 
```

现在我有一个带有 3 个 li 标签的 html，如下所示。

```
<section class="categories">

                <ul class="categories-list">
                    <li class="urban"><a  href="javascript:;"><span>urban living</span></a></li>
                    <li class="adventure"><a href="javascript:;"><span>adventure</span></a></li>
                    <li class="romantic"><a href="javascript:;"><span>romantic</span></a></li>
                </ul> 
```

如何将不同的对象绑定到不同的 li。

例如，第一个 li 应该与 categoriesViewModel 中的第二个对象绑定，即 categoriesViewModel ()[1] 。

我不想像 [1]、[2] 等对索引进行硬编码。我想从 categoriesViewModel 获取相关对象并绑定它。

期待快速帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T19:27:35.550

您可以使用 foreach 循环执行此操作：

```
<ul class="categories-list" data-bind="foreach: categories">
    <li data-bind="attr: {class: name}"><span data-bind="text: desc"></span></li>
</ul> 
```

# angularjs - 使用 AngularJS 重定向

> ID：11907961
> 
> 赞同：86
> 
> 时间：2012-08-10T19:21:24.790
> 
> 标签：angularjs, redirect, location

我正在尝试使用以下方法重定向到另一条路线：

```
$location.path("/route"); 
```

但由于某种原因，它不起作用。我使用 jQuery-UI 做了一个自动完成小部件，一旦用户选择了一个选项，我就会从范围内调用一个函数。我对其进行了调试，它进入了函数，但它永远不会重定向到另一条路线。只有当我按下一个键时它才会改变路线。

我认为这有点奇怪，但我还没有想出如何解决这个问题。我用了

```
window.location = "#/route"; 
```

它有效，但我想使用该`path()`功能。

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-08-10T19:46:43.893

使用无效代码的示例，很容易回答这个问题，但是有了这些信息，我认为最好的是您在 AngularJS 摘要之外调用 $location.path。

尝试在指令上执行此操作`scope.$apply(function() { $location.path("/route"); });`

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2012-12-07T10:32:13.660

不要忘记注入`$location`控制器。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-08-10T22:38:32.313

假设您没有使用 html5 路由，请尝试`$location.path("route")`. 这会将您的浏览器重定向到`#/route`您想要的位置。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2015-01-29T14:34:46.203

If you need to redirect out of your angular application use `$window.location`. That was my case; hopefully someone will find it useful.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-07-11T20:47:45.870

检查您的路由方法：

如果你的路由状态是这样的

```
 .state('app.register', {
    url: '/register',
    views: {
      'menuContent': {
        templateUrl: 'templates/register.html',
      }
    }
  }) 
```

那么你应该使用

```
$location.path("/app/register"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-11T00:33:03.320

不知道你的代码很难说。我最好的猜测是，`onchange`当您从 JavaScript 代码更改文本框值时，事件不会触发。

有两种方法可以做到这一点；第一个是`onchange`自己调用，第二个是等待文本框失去焦点。

检查[这个问题](/q/735462)；同样的问题，不同的框架。

# python - 将文本行的一部分从文本文档复制到新文档中

> ID：11907962
> 
> 赞同：0
> 
> 时间：2012-08-10T19:21:26.603
> 
> 标签：python

我在一个文本文件中有一堆 URL，但我只对 URL 的一部分感兴趣，我想将该部分保存到另一个文档中。我已经设法一次读取 1 行，然后使用以下命令将其写入文件：

```
from sys import argv
script, sol , save = argv

data = open(sol)
indata = data.read()

result = indata[51:85]   
result2 = "http://mars.jpl.nasa.gov/msl-raw-images/msss/00003/mcam/" + result + ".jpg"

output = open(save, 'w')
output.write(result2)

data.close()
output.close() 
```

但我无法将其移植到 for 循环中：

```
from sys import argv
script, sol = argv

data = open(sol)
indata = data.read()

for line in indata:
   indata[51:85],

data.close() 
```

我试图在屏幕上打印它，看看为什么会出错，但我只得到空行。我被困住了，我希望你能帮帮我。

```
from sys import argv
script, sol, save = argv

data = open(sol)
indata = data.read()

def get_line():
    for line in indata.splitlines():
        print indata[51:85]

        result = indata[51:85]
        result2 = "http://mars.jpl.nasa.gov/msl-raw-images/msss/00003/mcam/" + result + ".jpg"

    output = open(save, 'w')
    output.write(result2)
    output.close()

get_line()    
data.close() 
```

我已经设法做到了，但我只能将第一行保存在新文档中。其余部分打印在屏幕上，但未保存在新文档中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:27:16.203

**编辑** 您的控制流已关闭。您需要在循环之前打开文件

这`result=...`条线可能有点混乱，所以我会解释一下

首先它用于`.replace`更改行中的文本。然后它使用索引`[:-4]`删除最后 4 个字符。最后，它将字符串 '-br.jpg' 附加到整个内容中

```
from sys import argv
script, sol, save = argv

def get_line():
    data = open(sol)
    output = open(save, 'w')
    for line in data: #for each line in the input file
        result = line.replace('msl/multimedia/raw/?rawid=', 'msl-raw-images/msss/00003/mcam/')[:-4] + '-br.jpg\n'
        output.write(result)

    output.close()
    data.close()

get_line() 
```

* * *

您可以迭代文件本身的行

```
from sys import argv
script, sol = argv

data = open(sol)
for line in data:
   print line[51:85]

data.close() 
```

似乎更接近你想要的。

当您这样做时，`.read()`您会将整个文件的内容作为单个字符串获取。那么您将索引**整个**字符串中的字符，而不是特定的行。在上面的代码中，您一次索引到每一行。

此外，由于这是一个 url，并且您只对一个部分感兴趣，因此该`.split`方法可以使您的索引更容易。它返回通过将原始字符串拆分为特定字符而生成的字符串列表。例如：

```
>>> line = 'stackoverflow.com/posts/11908027/'
>>> line.split('/')
['stackoverflow.com', 'posts', '11908027', '']
>>> line.split('/')[2]
'11908027'
>>> line.split('/')[1]
'posts' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T19:35:36.540

我会研究“split”和“splitline”，它们在分解标准文本（例如url）时很有用。您可以在这里了解更多信息：http: [//docs.python.org/library/stdtypes.html](http://docs.python.org/library/stdtypes.html)

该列表还将包含有关 partitions() 的一些信息，这些信息也可能对您有用。它需要一个字符串和分隔符，为您提供一些关于如何存储数据的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T19:25:39.720

尝试：

```
for line in indata.splitlines():
    print indata[51:85] 
```

# magento - 直接设置管理员用户的密码哈希

> ID：11907964
> 
> 赞同：0
> 
> 时间：2012-08-10T19:21:38.270
> 
> 标签：magento

`admin_user`我有一个基本上要迁移到附加记录的现有`admin_user`记录，并且我想使用旧记录中的值设置新记录的密码哈希。

因为`_beforeSave`挂钩 setPassword() 并对其进行加密，所以这似乎是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:21:38.270

在写这个问题的过程中，当我想出如何解决它时，所以我会继续在这里发布我自己的答案，以防它帮助其他人。

看起来你需要重载`Mage_Admin_Model_User`类才能做到这一点。由于您可能会直接加载类并调用方法来设置密码，因此您可能不需要担心重写或事件观察。

我是这样做的：

```
class Me_Mymodule_Model_Admin_User extends Mage_Admin_Model_user
{
    protected function _beforeSave()
    {
        parent::_beforeSave();

        if ($this->getPasswordHash()) {
            $this->setData('password', $this->getPasswordHash());
        }
    }
} 
```

然后，要更改它，请执行以下操作。就我而言，我是在我编写的自定义迁移脚本中执行此操作的。

```
// This just sets the "password_hash" data on the model which has no function other
// than to be converted to the "password" value in the _beforeSave() above.
$adminUser = Mage::getModel('mymodule/admin_user')->load($id);
$adminUser->setPasswordHash('insert password hash here')->save(); 
```

`setPasswordHash()`和方法是常规的`getPasswordHash()`Magento 魔术 getter / setter，因此不需要在任何地方定义它们。

更新：不要拒绝回答自己的问题，这是[鼓励](https://meta.stackexchange.com/questions/12513/should-i-not-answer-my-own-questions)的。

# sql - 我没有找到解决方案

> ID：11907967
> 
> 赞同：0
> 
> 时间：2012-08-10T19:21:48.223
> 
> 标签：sql

我正在尝试执行以下 SQL 查询，但它不工作：

```
update fichas1
set 
fichas1.observaciones = concat(casi.diagnostico+ ' '+ casi.localizacion +'\n' +casi.tecnica )
from fichas1 inner join casi on fichas1.id = casi.ficha_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:38:13.467

尝试这个：

```
update fichas1
set 
fichas1.observaciones = (select concat(casi.diagnostico+ ' '+ casi.localizacion +'\n' +casi.tecnica)
from casi where fichas1.id = casi.ficha_id) 
```

但是，它可能会在选择查询的多个结果集上失败。

# javascript - 获取ajax创建的复选框的值

> ID：11907968
> 
> 赞同：-2
> 
> 时间：2012-08-10T19:21:48.037
> 
> 标签：javascript, ajax, jquery

我想获取页面中某些复选框的值，但问题是此复选框是由 ajax 创建的，以及在我的 ajax 安装我的复选框之前如何执行 javascript，该函数获取此元素的值一片空白。

代码是这样的：

```
function salvar()
{  

 //here is the problem, because this inputs is not here, 
 //I have a ajax function that creates this inputs
 var checkBoxes = $('input[name=checkbox]');

 var idsTelas;
 var i = 0;

 $.each(checkBoxes, function()
 {
       if ($(this).attr('checked'))
       {
           idsTelas[i] = $(this).val();
           i++;
       }
 });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:34:30.017

我怀疑你正在以错误的方式解决这个问题：

> 我想获取页面中某些复选框的值，但问题是此复选框是由 ajax 创建的，以及**在我的 ajax 挂载我的复选框之前如何执行 javascript**

如果我理解正确，您的 Javascript 在复选框被创建/插入页面之前执行。

那么 - 当 Javascript 运行时，您想获得尚不存在的事物的价值吗？这根本不可能，不管有什么聪明的技巧。

解决此问题的唯一方法是更改​​相对时间。在 AJAX 创建复选框*后*，您需要运行您的`salvar()`函数。或者，如果您由于某种原因无法推迟执行该函数，则需要将 AJAX 创建步骤向前推进。无论哪种方式，*创建*复选框和*调用*.***`salvar()`***

# mysql - mysql ndb_mgmd --no-nodeid-checks - 启动错误

> ID：11907969
> 
> 赞同：2
> 
> 时间：2012-08-10T19:21:50.873
> 
> 标签：mysql, database, cluster-computing

我无法启动 ndb_mgmd。这里有一些信息。

```
OS: Ubuntu 12.04LTS
MySQL -V: Ver 5.5.25a-ndb-7.2.7 for Linux on x86_64 (Source distribution)
Base Dir = /usr/local/mysql
Default MySQL Conf = /xconf/mysql/my.cnf
Default MySQL Data = /xdata/mysql 
```

**/xconf/mysql/my.cnf**

```
[mysqld]
ndbcluster
socket=/xdata/mysql/mysql.sock

[mysqld_safe]
err-log=/xlog/mysqld.log
pid-file=/xdata/runtime/mysqld/mysqld.pid

[ndb_mgmd]
configdir=/xdata/mysql-cluster
config-file=/xdata/mysql-cluster/config.ini 
```

**/xdata/mysql-cluster/config.ini**

```
[NDBD DEFAULT]
NoOfReplicas=2
DataDir=/xdata/mysql-cluster

# Management Node

[ndb_mgmd]
NodeId=1
HostName=192.168.2.100
DataDir=/xdata/mysql-cluster

# Storage Nodes

[ndbd]
NodeId=2
HostName=192.168.2.101

[ndbd]
NodeId=3
HostName=182.168.2.102

# SQL Nodes

[mysqld]
HostName=192.168.2.100

[mysqld]
HostName=192.168.2.101

[mysqld]
HostName=192.168.2.102 
```

当我执行时：

```
@xuser:/xdata/mysql-cluster$ ndb_mgmd
MySQL Cluster Management Server mysql-5.5.25 ndb-7.2.7
[MgmtSrvr] ERROR    -- Could not determine which nodeid to use for this node. Specify it with --ndb-nodeid=<nodeid> on command line 
```

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T00:54:00.313

问题是我没有连接到集群的网络。

# c++ - 打印标题中声明的变量时，C++ 崩溃

> ID：11907970
> 
> 赞同：-2
> 
> 时间：2012-08-10T19:21:57.313
> 
> 标签：c++, opengl, header, crash, runtime-error

我正在`Camera`用 c++ 创建一个用于 OpenGL 的类。当我尝试打印在 中声明的任何变量时`Camera.h`，程序崩溃。但是如果我设置或获取变量的值它不会崩溃我做错了什么？

## 相机.h

```
 #ifndef CAMERA_H
    #define CAMERA_H

    class Camera
    {
        public:
            Camera();
            Camera(float xP, float yP, float zP);
            void move(float x, float y, float z);

        protected:
        private:
            float xPos, yPos, zPos;
    };

    #endif // CAMERA_H 
```

## 相机.cpp

```
 #include "Camera.h"
    #include <iostream>
    #include <GL/glut.h>

    using namespace std;

    Camera::Camera()
    {
    }

    Camera::Camera(float xP, float yP, float zP)
    : xPos(xP), yPos(yP), zPos(zP)
    {
    }

    void Camera::move(float x, float y, float z)
    {
        glTranslatef(-x, -y, -z);
        //None of this crashes:
        xPos = 1;
        yPos = xPos;
        //Crashes here:
        cout << "mainCamera x = " << xPos << endl;
    } 
```

我收到的崩溃消息是：

> opengl.exe 遇到问题，需要关闭。对此造成的不便，我们表示歉意。

* * *

# 编辑

如果我把线路`float xPos, yPos, zPos;`放在公共部分`Camera.h`，然后打电话

```
 Camera mainCamera(0.0f, 0.0f, 0.0f);
    cout << "mainCamera x = " << mainCamera.xPos << endl; 
```

...在 中`main.cpp`，它工作得很好并打印：

> 主摄像头 x = 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T20:35:42.190

嗯，我想通了。而这个是一个愚蠢的。我忘了包括在内`windows.h`，`Main.cpp`出于某种奇怪的原因，它阻止了浮点数被打印出来（？？？）。它现在完美运行。

```
#include <windows.h> 
```

# android - GCM：如何发送paylaod？

> ID：11907975
> 
> 赞同：1
> 
> 时间：2012-08-10T19:22:18.550
> 
> 标签：android

我使用了谷歌提供的演示 GCM 示例，它工作正常，除了它默认发送消息“GCM：你收到消息！”，我想提醒发送一个字符串，但不知道如何？

服务器代码：

```
 Message message =new Message.Builder().addData("data", "hello client").build();

     Result result = sender.send(message, registrationId, 5); 
```

客户代码：

```
 public void onReceive(Context context, Intent intent) {

            String details = intent.getStringExtra("data");
            System.out.println("Message="+details);

        } 
```

是否有任何机构有有效载荷的 GCM 示例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T03:08:36.233

伙计，我发现显示通知消息是本地的，而不是来自服务器.....

```
@Override
protected void onMessage(Context context, Intent intent) {
    Log.i(TAG, "Received message");
    String message = getString(R.string.gcm_message);
    displayMessage(context, message);
    // notifies user
    generateNotification(context, message);
} 
```

你会发现程序集消息为 R.string.gcm_message .....

# php - PHP，提交带有文本框的二维表进行处理

> ID：11907976
> 
> 赞同：-1
> 
> 时间：2012-08-10T19:22:21.857
> 
> 标签：php, arrays, textbox

我正在构建一个具有动态表的应用程序，每次打开页表的行和列都会根据数据库中的数据进行更改。每行是一个供应商公司，每列是一个项目标题。所有这些供应商都提供相同的项目，因此该表有一个文本框，每个文本框都包含一个文本框，因此用户可以键入值，该值表示他们想要从该供应商那里获得的水果数量。以下是示例。

![示例数据](../Images/239928f8ebea7f68a04a90201b85ed9a.png)

所以我现在需要做的是，输入这些值后，我想通过PHP处理它们，然后在确认页面看到4个不同的报告，例如：写公司名称，在其下，他们必须提供什么对于每个项目，然后是下一个公司，依此类推，直到最后。

我不知道我是否应该为每个文本框创建不同的类？或识别他们！我应该排列它们吗？我很困惑..如果你们中的任何人可以提供帮助，那就太好了

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:33:58.553

我建议您将输入元素命名为数组。就像是：

```
<input type="text" name="fruits[company1][apple]">
<input type="text" name="fruits[company1][berries]">
<input type="text" name="fruits[company1][orange]">
<input type="text" name="fruits[company1][bannana]">

<input type="text" name="fruits[company2][apple]">
<input type="text" name="fruits[company2][berries]">
<input type="text" name="fruits[company2][orange]">
<input type="text" name="fruits[company2][bannana]"> 
```

或者同样的事情，水果是第一层，公司名称是第二层。这实际上是同一件事，通常都一样容易使用。仅取决于发布表单后您希望如何循环数据。您最好也使用公司名称和/或水果的 id。只是这样，例如，带有空格的公司名称仍然有效。

使用上面的表格，您可以使用以下方式处理数据：

```
<?php
foreach($_POST['fruits'] as $company=>$row){
    foreach($row as $fruit=>$quantity){
        if(!is_numeric($quantity) || $quantity < 0){
            $quantity = 0;
        }
        echo "You selected {$quantity} {$fruit} from {$company}";
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-10T19:33:49.053

我会尝试创建一个以项目 ID 作为第一维的多暗淡数组。像这样：

```
<input type="textbox" name="textbox[<?php echo $row['item_id']; ?>]["apple"]" value="<?php echo $row['apple']; ?>" /> 
```

然后，在您的处理脚本中：

```
foreach ($_POST['textbox'] as $row)
{
  foreach ($row as $key => $val)
  {
    $q = "update `items` set `apple` = {$val['apple']} where `item_id` = {$key}";
    mysql_query($q);
  }
} 
```

# jsf - JSF 在样式表中设置样式？

> ID：11907977
> 
> 赞同：0
> 
> 时间：2012-08-10T19:22:28.393
> 
> 标签：jsf, jsf-2, stylesheet

所以我正在尝试为每个用户创建一个具有可自定义样式的网页。您可以将样式选项保存为 JSF bean 属性中的字符串，并通过内联样式属性或`<style>`网页中的标签非常轻松地访问它们，但是谁再使用内联/页面样式？

有没有办法将这些属性从 JSF (2.0) bean 转发到我的样式表，或者我是否需要简单地将`<style>`块添加到我希望可定制的页面？

编辑：我想我可以创建一个函数将这些属性写入样式表，为每个用户创建一个，但这显然不是首选。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:41:37.063

我不确定您的功能到底是什么，但一种选择是 ->

```
<h:outputStylesheet library="css" name="#{userBean.styleSheetName}"  /> 
```

“UserBean”具有工作表名称的位置。

或者，您可以在样式标签之间输出样式表（如您所说）。如果您想发疯，您可以编写一个读取用户会话并生成缓存样式表的 servlet。

对于您建议的功能，我肯定会采用 servlet 路线，但如果它只是用户可以访问的一组样式表，我可能会按照第一个示例使用简单的动态属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T19:59:13.587

对于完全自定义，您可以保存所有可变元素及其样式选项的样式表，并在您的 bean 属性中引用它们。

由于那是相当多的样式表，您可以定义自己的样式方案并让用户在这些预定义的样式表之间进行选择。这并不能完全回答您的问题，但可以节省大量工作

# sql - 在动态sql语句中转换值时转换失败

> ID：11907978
> 
> 赞同：1
> 
> 时间：2012-08-10T19:22:30.253
> 
> 标签：sql, sql-server, tsql

我被困在以下 sql server 上：

```
DECLARE @sql AS NVARCHAR(500),@db as varchar(50),@value AS CHAR(129);
SET @db = 'SSCT1';
SET @value = '1806-11-801-1000';
SET @sql = 'SELECT ACTINDX FROM ' + quotename(@db) 
  + '.[dbo].[GL00105] WHERE ACTNUMST = ' + @value;
EXEC (@sql); 
```

当我在 sql server 中运行它时，我得到：转换 varchar 值 '1806-11-801-1000 时转换失败

我检查了我使用 where 子句的字段，它与声明中的类型 (char(129) 相匹配，所以我不确定它试图转换什么。

我正在尝试构建一个 sql 语句，除了值之外，它还将接受 db 名称作为变量。有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T19:29:55.293

我猜这`ACTNUMST`是一个字符串列，在这种情况下，您需要正确分隔它：

```
SET @sql = 'SELECT ACTINDX FROM ' + quotename(@db) 
  + '.[dbo].[GL00105] WHERE ACTNUMST = ''' 
  + @value + ''';'; 
```

如果`@value`可能包含撇号，则需要进一步处理：

```
SET @sql = 'SELECT ACTINDX FROM ' + quotename(@db) 
  + '.[dbo].[GL00105] WHERE ACTNUMST = ''' 
  + REPLACE(@value, '''', '''''') + ''';'; 
```

呸。更安全的方法是：

```
DECLARE 
  @sql   NVARCHAR(MAX),
  @db    SYSNAME,
  @value CHAR(129);

SELECT
  @db = N'SSCT1',
  @value = '1806-11-801-1000';

SET @sql = N'SELECT ACTINDX FROM ' + quotename(@db) 
  + '.[dbo].[GL00105] WHERE ACTNUMST = @val;';

EXEC sp_executesql @sql, N'@val CHAR(129)', @value; 
```

这可以更好地防止动态 SQL，并且还可以防止您不得不处理引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T19:30:53.720

这可能是因为您没有引用 char 值。试试这个

```
SET @sql = 'SELECT ACTINDX FROM ' + quotename(@db) + '.[dbo].[GL00105] WHERE ACTNUMST = ''' + @value + ''''; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T19:38:00.120

当您尝试执行 SQL 时，这会失败吗？或者，如果您评论 EXEC 调用，它仍然会失败吗？

引起我注意的一件事是，您的@value 周围没有任何单引号。所以当@sql被构建时，它最终会被构建为......

```
WHERE ACTNUMST = 1806-11-801-1000 
```

但是，它应该看起来像这样......

```
WHERE ACTNUMST = '1806-11-801-1000' 
```

如果这确实是您的问题，那么您应该将您的 SET @sql 修改为以下...

```
SET @sql = 'SELECT ACTINDX FROM ' + quotename(@db) + '.[dbo].[GL00105] WHERE ACTNUMST = ''' + @value + ''''; 
```

这会将单引号添加到您的动态 sql 语句中。我希望这有帮助。

# orchardcms - 果园 cms 自定义设置

> ID：11907980
> 
> 赞同：2
> 
> 时间：2012-08-10T19:22:53.830
> 
> 标签：orchardcms

如何为管理员创建自定义表单以输入 2 个设置值。

1.  管理员应该能够输入已发布站点的数量。
2.  管理员应该能够输入付费网站的数量。

然后，该站点使用这些值在 UI 上显示。Orchard CMS 中是否有执行此操作的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T20:59:27.170

当然。在 Orchard 中，设置是 Site 类型的内容项。您可以通过添加部分和字段来扩展它们，就像扩展任何内容类型一样。查看任何带有设置的模块示例。

# css - CSS - 在侧边栏中更改字体颜色

> ID：11907983
> 
> 赞同：0
> 
> 时间：2012-08-10T19:22:59.267
> 
> 标签：css, fonts, colors

[http://ratest3.com/news/](http://ratest3.com/news/)

我正在尝试更改左侧边栏区域的文本。div #primary（到#fff）中的所有内容。

我已经尝试过（以及其他一些事情）；

```
#primary .widget-area {color: #fff;} 
```

它仍然想遵守 style.css 的 201 行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T19:24:20.420

您可以使用`!important`：

```
#primary .widget-area {color: #fff!important;} 
```

**编辑**：

它是

```
#primary.widget-area {color: #fff!important;} 
```

（没有空格）因为

*   `#primary .widget-area``widget-area`表示在具有 id 的元素中具有类的所有元素`primary`。
*   `#primary.widget-area`表示具有 id 且`primary`也具有 class的元素`widget-area`。

# html - 将 .html 文件转换为图像

> ID：11907986
> 
> 赞同：9
> 
> 时间：2012-08-10T19:23:15.413
> 
> 标签：html, image

我正在寻找任何可以忠实地将 .html 文件转换为图像格式的实用程序——最好是 png 或 jpeg。我已经用谷歌搜索了几个小时并下载了十几个免费试用版，但似乎没有任何效果。Adobe Acrobat Pro 几乎可以工作，但它决定缩小表格单元格以适应页面而不是缩小整个表格。

任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-10T19:29:11.910

我正在使用 wkhtmltoimage。

它是一个快速的命令行工具，它使用 webkit 库来呈现任何网站。有两种版本，一种用于生成 pdf，另一种用于生成图像。

wkhtmltoimage 适用于 Windows、Linux 和 Mac。

[http://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/)

```
/wkhtmltoimage-i386 -H
Name:
  wkhtmltoimage 0.10.0 rc2

Synopsis:
  wkhtmltoimage [OPTIONS]... <input file> <output file>

Description:
  Converts an HTML page into an image, 

General Options:
      --allow <path>                  Allow the file or files from the specified
                                      folder to be loaded (repeatable)
      --checkbox-checked-svg <path>   Use this SVG file when rendering checked
                                      checkboxes
      --checkbox-svg <path>           Use this SVG file when rendering unchecked
                                      checkboxes
      --cookie <name> <value>         Set an additional cookie (repeatable)
      --cookie-jar <path>             Read and write cookies from and to the
                                      supplied cookie jar file
      --crop-h <int>                  Set height for croping
      --crop-w <int>                  Set width for croping
      --crop-x <int>                  Set x coordinate for croping
      --crop-y <int>                  Set y coordinate for croping
      --custom-header <name> <value>  Set an additional HTTP header (repeatable)
      --custom-header-propagation     Add HTTP headers specified by
                                      --custom-header for each resource request.
      --no-custom-header-propagation  Do not add HTTP headers specified by
                                      --custom-header for each resource request.
      --debug-javascript              Show javascript debugging output
      --no-debug-javascript           Do not show javascript debugging output
                                      (default)
      --encoding <encoding>           Set the default text encoding, for input
  -H, --extended-help                 Display more extensive help, detailing
                                      less common command switches
  -f, --format <format>               Output file format (default is jpg)
      --height <int>                  Set screen height (default is calculated
                                      from page content) (default 0)
  -h, --help                          Display help
      --htmldoc                       Output program html help
      --images                        Do load or print images (default)
      --no-images                     Do not load or print images
  -n, --disable-javascript            Do not allow web pages to run javascript
      --enable-javascript             Do allow web pages to run javascript
                                      (default)
      --javascript-delay <msec>       Wait some milliseconds for javascript
                                      finish (default 200)
      --load-error-handling <handler> Specify how to handle pages that fail to
                                      load: abort, ignore or skip (default
                                      abort)
      --disable-local-file-access     Do not allowed conversion of a local file
                                      to read in other local files, unless
                                      explecitily allowed with --allow
      --enable-local-file-access      Allowed conversion of a local file to read
                                      in other local files. (default)
      --manpage                       Output program man page
      --minimum-font-size <int>       Minimum font size
      --password <password>           HTTP Authentication password
      --disable-plugins               Disable installed plugins (default)
      --enable-plugins                Enable installed plugins (plugins will
                                      likely not work)
      --post <name> <value>           Add an additional post field (repeatable)
      --post-file <name> <path>       Post an additional file (repeatable)
  -p, --proxy <proxy>                 Use a proxy
      --quality <int>                 Output image quality (between 0 and 100)
                                      (default 94)
      --radiobutton-checked-svg <path> Use this SVG file when rendering checked
                                      radiobuttons
      --radiobutton-svg <path>        Use this SVG file when rendering unchecked
                                      radiobuttons
      --readme                        Output program readme
      --run-script <js>               Run this additional javascript after the
                                      page is done loading (repeatable)
  -0, --disable-smart-width           Use the specified width even if it is not
                                      large enough for the content
      --stop-slow-scripts             Stop slow running javascripts (default)
      --no-stop-slow-scripts          Do not Stop slow running javascripts
                                      (default)
      --transparent                   Make the background transparent in pngs
      --use-xserver                   Use the X server (some plugins and other
                                      stuff might not work without X11)
      --user-style-sheet <url>        Specify a user style sheet, to load with
                                      every page
      --username <username>           HTTP Authentication username
  -V, --version                       Output version information an exit
      --width <int>                   Set screen width (default is 1024)
                                      (default 1024)
      --window-status <windowStatus>  Wait until window.status is equal to this
                                      string before rendering page
      --zoom <float>                  Use this zoom factor (default 1)

Specifying A Proxy:
  By default proxy information will be read from the environment variables:
  proxy, all_proxy and http_proxy, proxy options can also by specified with the
  -p switch

  <type> := "http://" | "socks5://"
  <serif> := <username> (":" <password>)? "@"
  <proxy> := "None" | <type>? <sering>? <host> (":" <port>)?

  Here are some examples (In case you are unfamiliar with the BNF):

  http://user:password@myproxyserver:8080
  socks5://myproxyserver
  None

Contact:
  If you experience bugs or want to request new features please visit 
  <http://code.google.com/p/wkhtmltopdf/issues/list>, if you have any problems
  or comments please feel free to contact me: <uuf6429@gmail.com> 
```

演示：

```
./wkhtmltoimage-i386 "http://stackoverflow.com/questions/11907986/convert-html-file-to-image/11908055#11908055" demo.png 
```

![演示](../Images/3056a9710a2ae8a633ef2cf4d11cb637.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T19:34:48.810

如果你需要一个命令行程序，试试[IECapt](http://iecapt.sourceforge.net/)。它使用 Internet Explorer 渲染引擎。还有一个名为[CutyCapt](http://cutycapt.sourceforge.net/)的跨平台实用程序——我没有尝试过。IECapt 的文件参数的一个注释：它只能通过指定文件的完整路径来工作。似乎无法识别相对路径。路径中的引号是允许的，例如：`--file:"C:\....."`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T21:20:44.563

还有 PhantomJS（参见[http://phantomjs.org](http://phantomjs.org)）。我在一个用 PHP 编写的搜索引擎中使用它来生成网站缩略图。和wkhtmltoimage一样，它是一个基于WebKit的命令行程序，可以生成图片和PDF。但由于它是一个完整的浏览器，它使用 JavaScript 来进行处理。

编辑：有关图像渲染的具体示例，请参见[https://github.com/ariya/phantomjs/wiki/Screen-Capture](https://github.com/ariya/phantomjs/wiki/Screen-Capture)。

# java - 首次运行时打开教程无法正常工作

> ID：11907991
> 
> 赞同：0
> 
> 时间：2012-08-10T19:23:30.203
> 
> 标签：java, android

当用户第一次运行它时，我的应用程序中会显示一个教程

```
 Handler handler = new Handler(); 
    handler.postDelayed(new Runnable() { 
         public void run() { 
             if (firstRun == true) {

                 Intent tut = new Intent(MainActivity.this, Tutorial.class);
                 startActivity(tut);
                 firstRun = false;

             }
         } 
    }, 200); 
```

我推迟了它，因为没有延迟我只是黑屏（界面没有时间加载）

但是这样做我多次打开Tutorial.class，我做错了什么？

编辑：

这里还有一些代码，我不会全部粘贴，因为阅读时间太长而且与问题无关

我这样保存我的偏好

```
 @Override
protected void onStop(){
   super.onStop();

  // We need an Editor object to make preference changes.
  // All objects are from android.context.Context
  SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
  SharedPreferences.Editor editor = settings.edit();
  editor.putInt("Counter1", counter);
  editor.putInt("Counter2", counter2);
  editor.putBoolean("FirstRun", firstRun);
  editor.putString("Label1", label1S);
  editor.putString("Label2", label2S);

  editor.commit();
}
protected void onPause(){
    super.onPause();

   SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
   SharedPreferences.Editor editor = settings.edit();
   editor.putInt("Counter1", counter);
   editor.putInt("Counter2", counter2);

   editor.commit();
 } 
```

这是我在 onCreate() 中恢复它们的方法；

```
// Restore previous settings and data

    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
    int counterRestored = settings.getInt("Counter1", 0);
    int counter2Restored = settings.getInt("Counter2", 0);
    boolean firstRunRestored = settings.getBoolean("FirstRun", true);
    String label1Restored = settings.getString("Label1", "Counter 1");
    String label2Restored = settings.getString("Label2", "Counter 2");
    counter = counterRestored;
    counter2 = counter2Restored;
    firstRun = firstRunRestored;
    label1S = label1Restored;
    label2S = label2Restored;
    renameLabel();
    calculateTotal(); 
```

这是我的第二个活动 Tutorial.class

```
public class Tutorial extends MainActivity{

ImageButton  btnSkip, btnSkip2, btnNext, btnNext2;
RelativeLayout tutorial, tutPage1, tutPage2;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tutorial);

    btnSkip = (ImageButton) findViewById(R.id.btn_skip);
    btnNext = (ImageButton) findViewById(R.id.btn_next);
    btnSkip2 = (ImageButton) findViewById(R.id.btn_skip2);
    btnNext2 = (ImageButton) findViewById(R.id.btn_next2);
    tutorial = (RelativeLayout) findViewById(R.id.tutorial);
    tutPage1 = (RelativeLayout) findViewById(R.id.page1);
    tutPage2 = (RelativeLayout) findViewById(R.id.page2);

    btnSkip.setOnClickListener(new View.OnClickListener(){
        @Override
         public void onClick(View v) {
            finish();
        }
    });
    btnSkip2.setOnClickListener(new View.OnClickListener(){
        @Override
         public void onClick(View v) {
            finish();
        }
    });
    btnNext.setOnClickListener(new View.OnClickListener(){
        @Override
         public void onClick(View v) {
            tutPage1.setVisibility(View.GONE);
            tutPage2.setVisibility(View.VISIBLE);
        }
    });
    btnNext2.setOnClickListener(new View.OnClickListener(){
        @Override
         public void onClick(View v) {
            tutPage1.setVisibility(View.VISIBLE);
            tutPage2.setVisibility(View.GONE);
            tutorial.setVisibility(View.VISIBLE);
            finish();
        }
    });

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:35:04.833

你为什么不试试

```
 if(firstRun){
     firstRun = false;
     Handler handler = new Handler(); 
     handler.postDelayed(new Runnable() { 
         public void run() { 
             Intent tut = new Intent(MainActivity.this, Tutorial.class);
             startActivity(tut);
         }
     } 
     }, 200);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T20:45:02.607

的值`firstRun`不会在多次运行中持久存储。

您应该将此值存储在[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)中，以便即使在应用程序关闭后它仍将保留其值。[您可以在此处](http://developer.android.com/guide/topics/data/data-storage.html#pref)找到有关如何使用 SharedPreferences 的教程。

# database - 如何将heroku应用程序与openshift应用程序数据库连接

> ID：11907995
> 
> 赞同：0
> 
> 时间：2012-08-10T19:24:18.533
> 
> 标签：database, heroku, database-connection, cloud-hosting, openshift

我在[Heroku](http://heroku.com)上有应用程序，当然也在[Openshift上](http://openshift.com)

现在，我想为他们使用一个通用数据库。那么，我应该如何将 Heroku 应用程序与 Open Shift 应用程序数据库连接起来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:06:46.040

OpenShift 会阻止除 80、443 和 22 之外的所有传入端口。就像上面的答案一样，您要么需要在两台服务器之间设置带有端口转发的 SSH 隧道（这对我来说似乎非常脆弱）

或者

您可以在 openshift 服务器上设置 Web 服务来处理所有数据库请求。当您将 mongolabs 或 fusiotables 与 heroku 一起使用时，就会发生这种情况。这里的不同之处在于您需要编写自己的 Web 服务来公开数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T15:54:34.353

您可以使用端口转发进行此类工作，试试这些文章 [http://bitsofinfo.wordpress.com/2012/06/05/how-to-access-your-openshift-mongodb-database-remotely-on-os- x/](http://bitsofinfo.wordpress.com/2012/06/05/how-to-access-your-openshift-mongodb-database-remotely-on-os-x/)或者，否则您可以使用在您的 openshift 服务器上运行的软件，该软件远程在数据库上执行您的命令。为此，请尝试谷歌并注意端口 0 到 18000 被阻止传入流量。