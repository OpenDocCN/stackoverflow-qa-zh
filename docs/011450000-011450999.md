# StackOverflow 问答 11450000-11450999

# c# - 如何在 LINQ 中执行数学运算

> ID：11450009
> 
> 赞同：0
> 
> 时间：2012-07-12T10:35:43.073
> 
> 标签：c#, asp.net-mvc, linq

我需要`Select`在 LINQ 中为包含字段 A、B、C 的表形成查询。我需要获取值`A`和`A - B`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:37:13.357

试试这个：

```
 from t in yourTable
 select t.A, t.A - t.B 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T10:37:37.973

尝试`Select(r = new { r.A, Difference = r.A - r.B })`

# node.js - Mongoose.js 如何检查连接是否成功？

> ID：11450010
> 
> 赞同：3
> 
> 时间：2012-07-12T10:35:44.807
> 
> 标签：node.js, mongoose

> **可能重复：**
> [是否有猫鼬连接错误回调](https://stackoverflow.com/questions/6676499/is-there-a-mongoose-connect-error-callback)

我使用 mongoose.createConnection 创建连接，它在异步模式下工作。

如何检查连接是否成功，如果没有如何得到错误？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T13:19:51.587

[有没有猫鼬连接错误回调](https://stackoverflow.com/questions/6676499/is-there-a-mongoose-connect-error-callback)有解决方案，你也可以这样做：

```
mongoose.connection.on('error', function (err) {
 // Do something
}); 
```

来源：[https ://github.com/LearnBoost/mongoose/blob/master/lib/connection.js](https://github.com/LearnBoost/mongoose/blob/master/lib/connection.js)

# datepicker - DatePicker 不显示在 Wp7 中的 ChildWindow 顶部

> ID：11450015
> 
> 赞同：0
> 
> 时间：2012-07-12T10:36:11.197
> 
> 标签：datepicker, childwindow

我开发了子窗口控件，它具有日期选择器选项。当我单击日期选择器时，它打开了子窗口控件后面的日期选择器屏幕，因此我无法选择日期。

如何在子窗口控件上显示日期屏幕？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:59:59.303

我找到了这个查询的替代方法。

```
Event : datepicker1_ManipulationCompleted

this.close(); // this is close to strat the date manipulation

Event :datePicker1_ValueChanged

this.show() ;// Again i shows the my closed child window 
```

# c - 不同硬币上的硬币变化有不同的上限？

> ID：11450016
> 
> 赞同：-1
> 
> 时间：2012-07-12T10:36:14.143
> 
> 标签：c, algorithm, coin-change

样本输入：20 10 2 5 2

样本输出：2

说明：20的数量可以通过2种方式制作：10*2 10*1 + 5*2

我想找出用给定硬币制作特定数量的方法的数量。在示例输入中，20 是要制作的数量，下一行显示硬币价值和该价值的硬币数量，即 2 个有价值的硬币10.输出有20种可以用这些硬币制作的方法。我尝试了递归解决方案，但无法正常工作。我应该使用什么算法来解决这个问题？

```
 #include<stdlib.h>
#include<limits.h>
#include<stdio.h>
typedef int (*compfn)(const void*, const void*);

struct pair
{
  int coin;
  int numberofcoin;

};
int compare(const struct pair *elem1 ,const struct pair *elem2)
{

   if ( elem2->coin > elem1->coin && elem2->numberofcoin>0)
return 1;
else
return -1;
}

void print(struct pair a[],int ncoin)
{
    int i=0;
     putchar('\n');
    for(i=0;i<ncoin;i++)
    {
        printf("%d\t%d\n",a[i].coin,a[i].numberofcoin);
    }
    putchar('\n');
}

int wa(int n,struct pair a[],int numberofdenominations,int current)
{print(a,numberofdenominations);
printf("the amount here %d\n",n);
    int ans=0;
    if(n==0)
     {        puts("case 1\n");
return 1;}
     int i=0;
     int small=INT_MAX;
    for(i=0;i<numberofdenominations;i++)
    {
        if(small>a[i].coin&&a[i].numberofcoin)
        {
            small=a[i].coin;
        }
    }
    if(n<small||n<0)
    {
                puts("case 2\n");

        return 0;
    }
    else
    {
        puts("case 3\n");
        print(a,numberofdenominations);
         qsort(a, numberofdenominations, sizeof(a),  (compfn)compare);
         puts("after sort\n");
         print(a,numberofdenominations);
         int j=0;
         for(j=0;j<numberofdenominations;j++)
         {
             if(a[j].numberofcoin>0&&a[j].coin<=current)
             {
                 puts("case if\n");
                a[j].numberofcoin--;
                ans+=wa(n-a[j].coin,a,numberofdenominations,a[j].numberofcoin);
                a[j].numberofcoin++;
             }
         }
    }
    return ans;
}
int main()
{
#ifndef ONLINE_JUDGE
freopen("in.txt","r",stdin);
freopen("out.txt","w",stdout);
#endif
int nc=0;
scanf("%d",&nc);
int amount=0;
int coin[50];
int numberofcoin[50];
struct pair a[51];
int i=0;
for(i=0;i<nc;i++)
{
    //scanf("%d%d",&c[i],&numberofcoin[i]);
scanf("%d%d",&a[i].coin,&a[i].numberofcoin);
}

scanf("%d",&amount);
for(i=0;i<nc;i++)
{
    a[i].numberofcoin=amount/a[i].coin;

}
//printf("%d\n",ways(amount,coin,numberofcoin,nc,10,amount,0));
printf("%d\n",wa(amount,a,nc,10));
    return 0;
} 
```

出于某种原因，我总是得到 0 作为答案。请提供所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T12:57:53.473

您的代码存在一些问题：

```
int compare(const struct pair *elem1 ,const struct pair *elem2)
{
    if ( elem2->coin > elem1->coin && elem2->numberofcoin>0)
        return 1;
    else
        return -1;
} 
```

此比较函数不适合传递给`qsort`. 对于相等的参数，它不会返回 0，并且`compare(x,y) == -1 == compare(y,x)`可能会发生。因此`qsort`可能会使用该比较函数循环，或产生不正确的结果。但是，根据您获得的数据，这可能不会对您不利。

```
for(i=0;i<nc;i++)
{
    a[i].numberofcoin=amount/a[i].coin;
} 
```

该循环背后的想法是什么？我无法理解它。删除该循环有助于获得示例测试用例的正确结果并且更有意义，因为您会对该面额的可用硬币感兴趣。

```
if(a[j].numberofcoin>0&&a[j].coin<=current)
{
    puts("case if\n");
    a[j].numberofcoin--;
    ans+=wa(n-a[j].coin,a,numberofdenominations,a[j].numberofcoin);
    a[j].numberofcoin++;
} 
```

`a[j].numberofcoin`作为参数传递`current`给递归调用没有意义。为什么您只考虑面额小于某些（可能是其他）面额的硬币数量的硬币？照原样，这就是使递归调用中的测试失败的原因，因此递归永远不会超出`amount - one_coin`示例中的范围。在这里传递`a[j].coin`对修剪重复项是有意义的。

```
printf("%d\n",wa(amount,a,nc,10)); 
```

为什么您将考虑的面额限制为最多 10 英寸`main`？如果有更大的面额可用，您将不会考虑使用它们的任何解决方案。

# android - Android 在 ExpandableListView 中检测 ChildClick

> ID：11450027
> 
> 赞同：1
> 
> 时间：2012-07-12T10:37:02.513
> 
> 标签：android, expandablelistview

![在此处输入图像描述](../Images/4dcbbf7d6c97033fb2e6797b6c5bdbef.png)

这是我的应用程序的屏幕截图，当在 ExpandableListView 中单击任何子项时，特定条目的详细信息将显示在右侧。

用户可以在右侧编辑每个孩子的详细信息，并使用 BackButton 保存详细信息。

现在，我想要实现的是，当用户点击另一个孩子时，也应该保存对上一个条目所做的编辑。

我没有附上我的代码，因为代码真的很长很复杂。为了简化问题，假设我将所有条目存储在一个名为“SlotList”的二维数组中，每当单击任何子项时，我都会将该子项的详细信息复制到一个对象（名为 CurrentSlot）中，并对数据成员执行编辑当前插槽。现在，当用户按下 BackButton 时，我通过 SaveCurrentSlot(Slot object) 保存 CurrentSlot 的详细信息。

当用户单击 ExpandableList 中的另一个子项时，我想要做的是调用 SaveCurrentSlot(Slot obj)。

关于我应该如何做的任何建议/提示？

提前致谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:54:52.190

我认为最好使用**onChildClick**方法来满足您的要求。

```
 >>Basing on the child click position you can set data to layout right. 
```

使用这个方法

```
 public boolean onChildClick( ExpandableListView parent, View v, int groupPosition,int childPosition,long id) {
    System.out.println("Inside onChildClick at groupPosition = " + groupPosition +" Child clicked at position " + childPosition);

    //ur code here

    return true;
} 
```

有关子项的更多详细信息，请单击可展开的列表视图，请访问[此](http://developer.android.com/reference/android/widget/ExpandableListView.OnChildClickListener.html)

# php - 如何将字符串中的数字数据替换为不同的数字？

> ID：11450028
> 
> 赞同：1
> 
> 时间：2012-07-12T10:37:03.077
> 
> 标签：php

有一个包含数字数据的字符串变量，比如说`$x = "OP/99/DIR";`。数字数据的位置可以在任何情况下根据用户的需要在应用程序中修改，斜线可以被任何其他字符改变；但数字数据是强制性的。如何将数字数据替换为不同的数字？示例`OP/99/DIR`更改为`OP/100/DIR`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:44:38.630

假设这个数字只出现一次：

`$content = str_replace($originalText, $numberToReplace, $numberToReplaceWith);`

仅更改第一次出现：

`$content = str_replace($originalText, $numberToReplace, $numberToReplaceWith, 1);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T10:46:46.300

使用正则表达式和 preg_replace

```
$x="OP/99/DIR";
$new = 100;
$x=preg_replace('/\d+/e','$new',$x);

print $x; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T10:46:58.197

```
$string="OP/99/DIR";
$replace_number=100;
$string = preg_replace('!\d+!', $replace_number, $string);

print $string; 
```

输出：

```
OP/100/DIR 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T10:50:16.450

最灵活的解决方案是使用 preg_replace_callback() 这样你就可以对匹配做任何你想做的事情。这匹配字符串中的单个数字，然后将其替换为数字加一。

```
root@xxx:~# more test.php
<?php
function callback($matches) {
  //If there's another match, do something, if invalid
  return $matches[0] + 1;
}

$d[] = "OP/9/DIR";
$d[] = "9\$OP\$DIR";
$d[] = "DIR%OP%9";
$d[] = "OP/9321/DIR";
$d[] = "9321\$OP\$DIR";
$d[] = "DIR%OP%9321";

//Change regexp to use the proper separator if needed
$d2 = preg_replace_callback("(\d+)","callback",$d);

print_r($d2);
?>
root@xxx:~# php test.php
Array
(
    [0] => OP/10/DIR
    [1] => 10$OP$DIR
    [2] => DIR%OP%10
    [3] => OP/9322/DIR
    [4] => 9322$OP$DIR
    [5] => DIR%OP%9322
) 
```

# javascript - 使用 html5 在画布内移动文本

> ID：11450030
> 
> 赞同：4
> 
> 时间：2012-07-12T10:37:08.380
> 
> 标签：javascript, html, canvas

我是 html5 开发的新手，谁能告诉我如何使文本在画布内水平移动到另一侧..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T11:04:59.177

这是一个如何在屏幕上来回动画文本的示例：

```
<html>
   <head>
   <title>HTML 5 Animated Text</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">
        var context;
        var text = "";
        var textDirection ="";

        $(function()
        {
            context = document.getElementById("cvs").getContext("2d");            
            setInterval("animate()", 30);

            textDirection ="right";
            textXpos = 5;
            text = "Animation!";    
        });  

        function animate() {            
            // Clear screen
            context.clearRect(0, 0, 500, 500);
            context.globalAlpha = 1;
            context.fillStyle = '#fff';
            context.fillRect(0, 0, 500, 500);    

            var metrics = context.measureText(text);
            var textWidth = metrics.width;

            if (textDirection == "right") {
                textXpos += 10;

                if (textXpos > 500 - textWidth) {
                    textDirection = "left";
                }
            }
            else {
                textXpos -= 10;

                if (textXpos < 10) {
                    textDirection = "right";
                }                    
            }

            context.font = '20px _sans';
            context.fillStyle = '#FF0000';
            context.textBaseline = 'top';
            context.fillText  ( text, textXpos, 180);    
          }    
          </script>
      </head>
      <body> 
         <div id="page">
            <canvas id="cvs" width="500" height="500">
               Your browser does not support the HTML 5 Canvas. 
            </canvas>
         </div>
      </body>
   </html> 
```

在行动：http: [//jsfiddle.net/bS79G/](http://jsfiddle.net/bS79G/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T08:57:14.553

您还可以使用画布的 store()、translate() 和 restore() 方法为文本设置动画。假设如果要将文本从右侧移动到左侧，则可以使用以下代码段：

参考网站：[http ://www.authorcode.com/text-animation-in-html5/](http://www.authorcode.com/text-animation-in-html5/)

var can, ctx, step, steps = 0, delay = 20;

```
 function init() {
        can = document.getElementById("MyCanvas1");
        ctx = can.getContext("2d");
        ctx.fillStyle = "blue";
        ctx.font = "20pt Verdana";
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";
        step = 0;
        steps = can.height + 50;
        RunTextRightToLeft();
    }

    function RunTextRightToLeft() {
        step++;
        ctx.clearRect(0, 0, can.width, can.height);
        ctx.save();
        ctx.translate(can.width / 2, step);
        ctx.fillText("Welcome", 0, 0);
        ctx.restore();
        if (step == steps)
            step = 0;
        if (step < steps)
            var t = setTimeout('RunTextRightToLeft()', delay);
    } 
```

# mysql - 需要帮助设计我的发票数据库结构

> ID：11450032
> 
> 赞同：2
> 
> 时间：2012-07-12T10:37:19.710
> 
> 标签：mysql, database-design

我有一个网站，客户可以在其中购买订阅。
客户可以随时查看付款历史记录并查看已购买的内容。

我正在尝试设计用于创建发票的数据库，但有些东西似乎不适合我。

我当前的设置如下所示：

```
+-----------+--------------+---------+
|  Invoice  | invoice_item | product |
+-----------+--------------+---------+
| id        | id           | id      | 
| fk_userID | desc         | name    |
|           | quantity     | price   |
|           | sum          |         |
|           | fk_invoiceID |         |
+-----------+--------------+---------+ 
```

`invoice_item`有一个引用的外键似乎是合乎逻辑的`product`。
但是如果产品被删除会发生什么？如果它们相关，则 item_list 中的行将被删除或设置为空。

如果您想查看旧发票并且产品不再可用，这将不起作用。

那么，应该`Product`和`Item_list`相关吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T11:22:49.950

一旦定义了产品，您就无法删除它，因此向产品添加一个 Status 字段 - 在此示例中，我使用的是枚举，尽管它很容易是一个 INT 或一组布尔值（即存档），我使用[参数枚举表](http://chateau-logic.com/content/parameter-enumeration-tables)，但这是一个单独的答案。

最重要的是确保发票行具有在订购时取自产品的定价（和描述），以确保任何未来的定价更改或产品名称更改不会影响预先存在的发票。

我使用的另一种技术（非常成功）是在数据库中引入*取代*实体的概念 - 以便保留原始记录并在数据更改时插入新版本。为此，我添加了以下字段：

*   当前ID
*   由Id取代
*   上一个 ID

它使查询更加麻烦 - 但特别是对于地址，必须确保发票保持不变并且地址更改不会反映在发票中 - 例如，更改公司名称不应更改以前提出的发票。

![在此处输入图像描述](../Images/53e29c68e97790e634598fc009bcd7ce.png)

```
CREATE TABLE `Invoice` (
`id` INTEGER NOT NULL AUTO_INCREMENT ,
PRIMARY KEY (`id`)
);

CREATE TABLE `Invoice Item` (
`id` INTEGER NOT NULL AUTO_INCREMENT ,
`desc` VARCHAR(200) NOT NULL ,
`value` DECIMAL(11,3) NOT NULL ,
`quantity` DECIMAL(11,3) NOT NULL ,
`total` DECIMAL(11,3) NOT NULL ,
`fk_id_Invoice` INTEGER NOT NULL ,
`fk_id_Product` INTEGER NOT NULL ,
PRIMARY KEY (`id`)
);

CREATE TABLE `Product` (
`id` INTEGER NOT NULL AUTO_INCREMENT ,
`Price` DECIMAL(11,3) NOT NULL ,
`Name` VARCHAR(200) NOT NULL ,
`Status` ENUM NOT NULL ,
PRIMARY KEY (`id`)
);

ALTER TABLE `Invoice Item` ADD FOREIGN KEY (fk_id_Invoice) REFERENCES `Invoice` (`id`);
ALTER TABLE `Invoice Item` ADD FOREIGN KEY (fk_id_Product) REFERENCES `Product` (`id`); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:45:08.213

您只需要在产品表中添加一个作为 no_of_stock 的列。如果产品在库存中为空或当前未使用，则不应删除该列的值，而是将该列的值设置为 0。这意味着该产品虽然当前无法销售，但之前已销售，具有过去的存在感

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T10:46:40.577

如果您希望人们能够看到他们的旧发票，无论它们是多久以前生成的，并且包括所有信息，那么您不应该删除产品。只需添加一个包含`ENUM('active', 'inactive') NOT NULL`或类似的列，以区分您当前提供的产品与仅保留旧参考的产品。

# c++ - 在 Metro C++ 中将图像从内容加载到 StorageFile^

> ID：11450034
> 
> 赞同：3
> 
> 时间：2012-07-12T10:37:21.630
> 
> 标签：c++, windows-8, windows-runtime, windows-store-apps, c++-cx

我正在尝试使用 Share Charm 在 Windows 8 Metro C++ 应用程序中共享图像。为此，我需要先将图像加载到 StorageFile^。我认为它应该看起来像：

```
create_task(imageFile->GetFileFromPathAsync("Textures/title.png")).then([this](StorageFile^ storageFile)
    {
        imageFile = storageFile;
    }); 
```

`imageFile`头文件中定义的位置

```
Windows::Storage::StorageFile^ imageFile; 
```

这个实际的代码会抛出这个异常

```
An invalid parameter was passed to a function that considers invalid parameters fatal. 
```

这似乎很琐碎，但是关于在 Metro 中共享的文档很少，并且唯一的 Microsoft 示例显示了如何使用 FilePicker 进行共享。

如果有人知道如何正确地做到这一点，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T21:55:52.253

如果“纹理”来自您的应用程序包，您应该使用 StorageFile::GetFileFromApplicationUriAsync 代替：

```
Uri^ uri = ref new Uri("ms-appx:///Assets/Logo.png");

create_task(StorageFile::GetFileFromApplicationUriAsync(uri)).then([](task<StorageFile^> t)
{
    auto storageFile = t.get();
    auto f = storageFile->FileType;
}); 
```

您还可以使用基于任务的延续（如上所示）以便更仔细地检查异常信息。在您的情况下，内部异常是：指定路径 (Assets/Logo.png) 包含一个或多个无效字符。

这是由于正斜杠造成的，如果将其更改为反斜杠，您将看到：指定的路径 (Assets\Logo.png) 不是绝对路径，并且不允许使用相对路径。

如果你想使用 GetFileFromPathAsync 我会推荐使用

```
Windows::ApplicationModel::Package::Current->InstalledLocation 
```

找出您的应用程序的安装位置并从那里构建您的路径。

# vb.net - 如何使用 Visual Basic 2010 创建 pdf 打印输出？

> ID：11450036
> 
> 赞同：0
> 
> 时间：2012-07-12T10:37:27.447
> 
> 标签：vb.net, visual-studio-2010, pdf

我读了一个网页（[链接](http://www.vb6.us/tutorials/visual-basic-tutorial-pdf)）。它展示了如何使用 VB 创建 pdf 文件。但是，在我按照网页创建自己的pdf程序后，VB显示了很多错误。例如

mjwPDF.cls(1)：错误 BC30188：需要声明。

不知道是不是VB版本差异问题。有谁知道另一个免费的pdf创建者？

谢谢

# android - Android：我如何在 runOnUiThread 方法中调用 onKeyDown？

> ID：11450037
> 
> 赞同：0
> 
> 时间：2012-07-12T10:37:35.537
> 
> 标签：android, android-asynctask

我有这个 onKeyDown 方法的代码：

```
 @Override
 public boolean onKeyDown(int keyCode, KeyEvent event) {
     if (keyCode == KeyEvent.KEYCODE_VOLUME_UP) 
    { 
           int index = seekbar.getProgress(); 
           seekbar.setProgress(index + 1); 
           return true; 
    } else if (keyCode == KeyEvent.KEYCODE_VOLUME_DOWN)
     {
           int index = seekbar.getProgress(); 
           seekbar.setProgress(index - 1); 
           return true; 
    }
     return super.onKeyDown(keyCode, event); 
    } 
```

问题是我想在`AsyncTask`, on中执行此操作，`postExecute`并且我认为在 runOnUiThread 中，但我不确定。

关于这样做的任何想法或建议？

谢谢！

编辑：

我在对话框中有一个 seekBar，它是在 AsynTask 的 postExecute 中创建并显示的，我需要像这样更新 seekbar 拇指位置：[当用户按下设备音量键时 seekbar thumb position change](https://stackoverflow.com/questions/3215791/seekbar-thumb-position-change-when-user-press-device-volume-keys)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:22:24.853

```
 class ABC {

        Context mContext;

        ABC(Context c)
        {
        mContext=c; 
        }

        public void launchIntent() {
           CurrentClass.this.runOnUiThread(new Runnable() {
              @Override
              public void run() {

                call your method stub here
                } 
            }
           });
        }
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:18:45.347

取一个布尔变量

```
boolean myboolean=false; 
```

然后在你的`postExecute()`

并将您的`onKeyDown()`方法编辑为

```
@Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
    if(myboolean)
    {
        if (keyCode == KeyEvent.KEYCODE_VOLUME_UP) 
        { 
            int index = seekbar.getProgress(); 
            seekbar.setProgress(index + 1); 
            return true; 
        } 
        else if (keyCode == KeyEvent.KEYCODE_VOLUME_DOWN)
        {
            int index = seekbar.getProgress(); 
            seekbar.setProgress(index - 1); 
            return true; 
        }
    }
    return super.onKeyDown(keyCode, event); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T10:41:15.053

`postExecute`不需要`runOnUiThread`你可以更新 UI 元素`postExecute`

有关更多信息，请阅读[此内容。](http://developer.android.com/reference/android/os/AsyncTask.html)

# wcf - WCF NetNamedPipeBinding 延迟通道打开

> ID：11450047
> 
> 赞同：2
> 
> 时间：2012-07-12T10:38:24.077
> 
> 标签：wcf, soa, named-pipes, performance, netnamedpipebinding

我目前正在开发一个具有 SOA 架构的应用程序，服务公开为 WCF 服务（.Net 4.0），托管在 Windows Server 2008 R2 Datacenter x64 VM 上的 IIS 7.5 中（它实际上是 Amazon EC2 上的 m1.small 实例）。这些服务在机器上本地相互通信，因此我已将它们设置为使用 netNamedPipeBinding 以获得最佳性能。实例化模式是每次调用，并发设置为多个。

目前我遇到了两个问题，即在打开 200 毫秒到 1 秒之间的通道时出现间歇性延迟，这是不可接受的，因为正常速度似乎约为 2 毫秒。

我启用了 WCF 跟踪，我看到延迟表现为以下错误：

> System.IO.PipeException：写入管道时出错：管道正在关闭。(232, 0xe8)。

之后它出现 WCF 重试并成功连接（因此延迟）。第二个症状是执行活动时延迟半秒：

> 处理操作“http://tempuri.org/IConnectionRegister/ValidateUriRoute”

我唯一能找到的就是有些人认为它可能与 TCP 端口共享有关，但我使用的是命名管道。我尝试禁用 TCP 端口共享服务，但这没有任何区别。

***出于兴趣，我还尝试将所有端点更改为使用 net.tcp 在同一随机端口上的 localhost 上侦听，并且ValidateUriRoute***活动中的半秒延迟仍然间歇性地发生。

我的 WCF 配置与此类似：

```
<system.serviceModel>

    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"
                               multipleSiteBindingsEnabled="false">

      <serviceActivations>

        <add relativeAddress="ConfigurationHost.svc" service="Core.ConfigurationHost" factory="Core.ConfigurationHostFactory" />
        <add relativeAddress="RoutingHost.svc" service="Core.RoutingHost" factory="Core.RoutingHostFactory" />
        <add relativeAddress="AuthenticationHost.svc" service="Core.AuthenticationHost" factory="Core.AuthenticationHostFactory" />

      </serviceActivations>

    </serviceHostingEnvironment>

    <services>

      <service name="Core.ConfigurationHost"
               behaviorConfiguration="Unthrottled">

        <endpoint address="net.pipe://localhost/ConfigurationHost.svc"
                  binding="netNamedPipeBinding"
                  bindingConfiguration="customNetNamedPipeBinding"
                  contract="Core.IConfiguration" />

      </service>

      <service name="Core.RoutingHost"
               behaviorConfiguration="Unthrottled" >

        <endpoint address="net.pipe://localhost/RoutingHost.svc"
                  binding="netNamedPipeBinding"
                  bindingConfiguration="customNetNamedPipeBinding"
                  contract="Core.IRouting" />

      </service>

      <service name="Core.AuthenticationHost"
               behaviorConfiguration="Unthrottled">

        <endpoint address="net.pipe://localhost/AuthenticationHost.svc"
                  binding="netNamedPipeBinding"
                  bindingConfiguration="CustomNetNamedPipeBinding"
                  contract="Core.IAuthentication" />

      </service>

    </services>

    <behaviors>

      <serviceBehaviors>

        <behavior  name="Unthrottled">

          <serviceThrottling maxConcurrentCalls="100"
                             maxConcurrentSessions="100"
                             maxConcurrentInstances="100" />

        </behavior>

      </serviceBehaviors>

    </behaviors>

    <client>

      <endpoint address="net.pipe://localhost/ConfigurationHost.svc"
                binding="netNamedPipeBinding"
                bindingConfiguration="customNetNamedPipeBinding"
                contract="Core.IConfiguration"
                name="Configuration" />

      <endpoint address="net.pipe://localhost/RoutingHost.svc"
                binding="netNamedPipeBinding"
                bindingConfiguration="customNetNamedPipeBinding"
                contract="Core.IRouting"
                name="Routing" />

      <endpoint address="net.pipe://localhost/AuthenticationHost.svc"
                binding="netNamedPipeBinding"
                bindingConfiguration="customNetNamedPipeBinding"
                contract="Core.IAuthentication"
                name="Authentication" />

    </client>

    <bindings>

      <netNamedPipeBinding>

        <binding name="customNetNamedPipeBinding"
                 maxReceivedMessageSize="2147483647"
                 sendTimeout="00:00:30"
                 receiveTimeout="infinite"
                 closeTimeout="00:00:30"
                 openTimeout="00:00:30"
                 maxConnections="500">

          <security mode="None"/>

          <readerQuotas maxDepth="200"
                        maxStringContentLength="2147483647"
                        maxArrayLength="2147483647"
                        maxBytesPerRead="2147483647"
                        maxNameTableCharCount="2147483647" />

        </binding>

      </netNamedPipeBinding>

    </bindings>

  </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T13:47:10.707

我认为这两个操作时间的间歇性信号很可能是命名管道和 TCP 绑定都使用的连接池机制的副产品。连接池有一个最大空闲时间，在此之后空闲连接将从池中删除。这会产生固有的竞争条件：有时可能会在另一方刚刚丢弃为空闲的连接上尝试建立 WCF 通道。

我自己没有尝试过，但是如果您更关心时间的一致性而不是绝对时间，您可以尝试调整[绑定的传输绑定元素上的连接池设置](http://msdn.microsoft.com/en-us/library/system.servicemodel.channels.namedpipeconnectionpoolsettings.aspx)，以禁用池（set `MaxOutboundConnectionsPerEndpoint`= 0）或减少空闲连接的发生率（更改`IdleTimeout`值）。

如果您无法完成这项工作，或者如果您认为延迟发生的时间比它们应该更长，甚至考虑到连接池引入的固有可变性，您可能需要 Microsoft 工程师的帮助，因为这些东西深入 WCF 实现的内部。

# android - 什么是 XML 中的根布局？

> ID：11450048
> 
> 赞同：3
> 
> 时间：2012-07-12T10:38:24.087
> 
> 标签：android

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/rootLayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="wrap_content"
        android:layout_height="80dp"
        android:scrollbars="none"
        android:layout_x="0dp"
        android:layout_y="0dp"
        android:fillViewport="true" >

        <LinearLayout
            android:id="@+id/linearLayout1"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_x="0dp"
        android:layout_y="0dp"
        android:src="@drawable/background" />
        </LinearLayout>

    </ScrollView>

    </LinearLayout> 
```

这是我的 xml 文件。可惜很简单。我的意图是动态增加滚动视图的高度，并且图像（与滚动视图一起）视图将逐渐显示。所以我该怎么做以及这里的 rootLayout 是什么以及如何从我的代码中调用 rootLayout ？

```
final Timer timer = new Timer();
        timer.scheduleAtFixedRate(new TimerTask() {
            public void run() {

                runOnUiThread(new Runnable()
                {
                    public void run() {

                        secondCounter++;
                        yourNewHeight += 10;

                        sv.getLayoutParams().height = yourNewHeight;

                        LinearLayout root = (LinearLayout)      findViewById(R.id.rootLayout);
                        root.invalidate();
                        Log.v("", "" +sv.getLayoutParams().height);

                        if(secondCounter == 20){
                            timer.cancel();
                        }
                    }
                });
            }
        }, delay, period); 
```

这是我在 java 文件中的代码。但它不起作用。伙计们你能帮帮我吗..!!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:42:03.620

此布局的根是`AbsoluteLayout`.

您可以使用如下调用获取对该根`View`及其所有子项的引用：`Activity`

```
mRootView = ((ViewGroup)findViewById(R.id.rootLayout)); 
```

请注意，它`AbsoluteLaoyut`已长期贬值，您可能希望将其替换为替代品`ViewGroup`，例如 a `LinearLayout`、`RelativeLayout`等，具体取决于您的布局的其余部分以及您想要如何做事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:43:20.637

如果您在代码中适当地扩展了您的 XML（即称为`setContentView()`），您应该能够使用以下方法引用 rootLayout：

```
AbsoluteLayout root = (AbsoluteLayout) findViewById(R.id.rootLayout); 
```

虽然如果你只是想增加 的高度，`ScrollView`直接调用更有意义：

```
ScrollView scroll = (ScrollView) findViewById(R.id.scrollView1); 
```

如上所述，您可能应该使用 a`RelativeLayout`或`LinearLayout`而不是`AbsoluteLayout`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T10:43:47.213

由于 ScrollView 中只能有一个 Child，因此您可以将 ScrollView 本身用作根元素，并将 LinearLayout 作为直接且唯一的子元素，您可以在其中添加所需的任何视图。

并且 AbsoluteLayout 已被弃用，我建议不要使用它

# php - 阻止对文件的访问

> ID：11450051
> 
> 赞同：0
> 
> 时间：2012-07-12T10:38:33.393
> 
> 标签：php, file-access

> **可能重复：**
> [防止直接访问 php 文件](https://stackoverflow.com/questions/6930664/preventing-direct-access-to-php-files)

我想阻止对某些文件的直接访问，以便它们只能由 PHP 通过`include`或使用`require`。

我在每个文件的第一行所做的是：

```
<?php
if(stristr(__FILE__,substr($_SERVER['PHP_SELF'],strrpos($_SERVER['PHP_SELF'],"/")+1))){
   header("HTTP/1.0 404 Not Found");
   exit;
}
?> 
```

这是这样做的好方法，还是有更好的方法？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:04:36.770

一种更好的选择是将文件从网站公共区域移出到私有目录中，然后使用[set_include_path](http://php.net/manual/en/function.set-include-path.php)（或等效的服务器配置）来允许`include`并`requre`找到它们。

# eclipse - 在 Eclipse 插件中启用/禁用菜单项

> ID：11450052
> 
> 赞同：6
> 
> 时间：2012-07-12T10:38:38.207
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp, menuitem, popupmenu

我用一个菜单项制作了一个弹出菜单，我只想在右键单击某个类类型的树项时启用它，否则禁用它。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T13:41:25.147

您可以添加一个使用**activeWhen**的处理程序并将其与该菜单的命令 ID 相关联。

这是一个处理程序，仅当当前选择不为空时才使命令处于活动状态，并且选择是可以适应**Widget**类型的对象的项：

```
<extension point="org.eclipse.ui.handlers">
  <handler class="com.myproject.handlers.ExportWidgetHandler"
           commandId="com.myproject.commands.exportWidget">
     <activeWhen>
        <with variable="selection">
           <iterate ifEmpty="false" operator="and">
              <adapt type="com.myproject.objects.Widget"/>
           </iterate>
        </with>
     </activeWhen>
  </handler>
</extension> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-10T10:14:13.337

我们可以通过重写 Handler 类的 isEnabled 方法来启用或禁用菜单项。下面是示例代码：

```
@Override
public boolean isEnabled() {
    return false;
} 
```

# iphone - 在 NSDocumentDirectory 中删除

> ID：11450054
> 
> 赞同：2
> 
> 时间：2012-07-12T10:38:41.450
> 
> 标签：iphone, ios, xcode, ipad

我这样保存`NSDocumentDirectory`：

```
NSLog(@"%@", [info objectAtIndex:i]);
NSArray *paths = NSSearchPathForDirectoriesInDomains( NSDocumentDirectory,    NSUserDomainMask ,YES );
NSString *documentsDir = [paths objectAtIndex:0];
NSString *savedImagePath = [documentsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"Images%d.png", i]];

ALAssetRepresentation *rep = [[info objectAtIndex: i] defaultRepresentation];
UIImage *image = [UIImage imageWithCGImage:[rep fullResolutionImage]];

//----resize the images
image = [self imageByScalingAndCroppingForSize:image toSize:CGSizeMake(256,256*image.size.height/image.size.width)];

NSData *imageData = UIImagePNGRepresentation(image);
[imageData writeToFile:savedImagePath atomically:YES]; 
```

我知道如何删除`NSDocumentDirectory`.

但我想知道如何删除所有名称为`oneSlotImages`.

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T10:59:37.213

试试这个，只需复制此代码，您的名为 oneSlotImages 的图像将从 DocumentDirectory 中删除，它很简单：

```
NSArray *directoryContents =  [[NSFileManager defaultManager] contentsOfDirectoryAtPath:[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)lastObject] error:NULL];

    if([directoryContents count] > 0)
    {
        for (NSString *path in directoryContents)
        {
            NSString *fullPath = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)lastObject] stringByAppendingPathComponent:path];

            NSRange r =[fullPath rangeOfString:@"oneSlotImages"];
            if (r.location != NSNotFound || r.length == [@"oneSlotImages" length])
            {
                [[NSFileManager defaultManager] removeItemAtPath:fullPath error:nil];
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T10:45:43.857

你看过 NSFileManager 的方法吗？也许这样的事情会在你所有的图像的循环中调用。

```
[[NSFileManager defaultManager] removeItemAtPath:imagePath error:NULL]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T10:56:32.473

使用喜欢，

```
NSArray *dirFiles = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:strDirectoryPath error:nil];
NSArray *zipFiles = [dirFiles filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"self CONTAINS[cd] %@", @"oneSlotImages"]]; 
```

该数组`zipFiles`包含我们过滤的所有文件的名称。因此，通过在循环中附加带有文档目录完整路径的文件名，您可以制作数组中所有过滤文件的完整文件路径。然后您可以使用循环并调用`NSFileManager`对象的方法，如下所示

```
[fileManager removeItemAtPath: strGeneratedFilePath error: &err]; 
```

从目录中删除路径中的 itm。

通过这种方式，您可以过滤掉包含`oneSlotImages`. 所以你可以更喜欢删除这些。希望这对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-08T12:30:56.037

由于这是一个老问题，而且上面的答案也显示了如何按图像名称删除。如果我想一次性从 NSDocumentDirectory 中删除所有内容，请使用以下代码。

```
// Path to the Documents directory
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
if ([paths count] > 0)
{
  NSError *error = nil;  
  NSFileManager *fileManager = [NSFileManager defaultManager];

  // Print out the path to verify we are in the right place
  NSString *directory = [paths objectAtIndex:0];
  NSLog(@"Directory: %@", directory);

  // For each file in the directory, create full path and delete the file
  for (NSString *file in [fileManager contentsOfDirectoryAtPath:directory error:&error])
  {    
    NSString *filePath = [directory stringByAppendingPathComponent:file];
    NSLog(@"File : %@", filePath);

    BOOL fileDeleted = [fileManager removeItemAtPath:filePath error:&error];

    if (fileDeleted != YES || error != nil)
    {
      // Deal with the error...
    }
  }

} 
```

# excel - 当我将 excel(dd/mm/yyyy) 中的日期格式导入 msaccess 时，它显示非日期值

> ID：11450055
> 
> 赞同：3
> 
> 时间：2012-07-12T10:38:43.793
> 
> 标签：excel, ms-access, ms-access-2007, excel-2007

当我以日期格式（dd/mm/yyyy）导入 excel 文件以访问它时，它显示非日期值是什么问题。

例如：27/3/2012 到 33765 这里 33765 是一个非日期值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T12:24:23.003

原因是 MS Office 世界中的所有日期实际上都是数值，例如，您在 2012 年 3 月 27 日以上给出的日期等于 40995。

使用导入向导创建新表时，Access 会自动将其读取为真实数值并将列类型设置为如此。

幸运的是，它很容易修复，打开表格的设计视图，将相关列修改为日期格式并保存表格，现在应该正确显示所有值。

或者，设置一个空白表格，其中列已设置为日期数据类型，然后将电子表格导入现有表格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T11:53:53.347

默认情况下，Access 认为来自 Excel 的日期采用美国日期格式 (mm/dd/yyyy) 而不是欧洲 (dd/mm/yyyy)。

您看到的数字是 excel 存储日期的方式。（自 1990 年 1 月 1 日以来的每一天都是 +1）。当日期采用欧洲格式时，Access 在导入期间不会将它们识别为日期，并且可能会加载其原始序列日期编号。

此外，请确保将这些要导入的访问列设置为“日期”。我想你可能已经这样做了，但我想检查一下。

# regex - 部分使用正则表达式替换多个单词

> ID：11450058
> 
> 赞同：1
> 
> 时间：2012-07-12T10:38:52.567
> 
> 标签：regex

我想在我们的代码迁移后处理大量文件。迁移工具可以处理正则表达式，我们编写如下内容：
'# Replace ".Columns(", ".Columns.Item("
这将所有出现的 ".Columns(" 替换为 ".Columns.Item("。

作为一个我们的要求我想用双引号替换 NullString 单词，即“”
例如 Optional ByVal strID2 As String = NullString
应该成为
Optional ByVal strID2 As String = “”

这是必需的，因为 VB6 中的 NullString 现在正在成为一个类变量，而在函数声明中它需要是一个常量。
所以，我需要一个具有以下标准之一的正则表达式：

1.  确保它在函数声明中，即有单词“Function”，然后是它的名称并打开一个括号“（”。然后任何出现的 [= NullString] 都应该替换为 [= “”] 直到我们点击右括号“）”，如声明可以在多行上。
2.  只要看看它的可选参数。因此，匹配单词“Optional”，然后匹配“As String = NullString”，并将 NullString 替换为“”。

我可以使用 2 之一作为标准，但无法编写 RegEx。下面是我的示例文件，我已经解释了我想要的每一行。

* * *

## **我的示例文件内容**

***第 1***行：`Public Function getAllAddresses(ByVal lngObjectType As String, ByVal strID1 As String, Optional ByVal strID2 As String = NullString, Optional ByVal strID3 As String = NullString, Optional ByVal blnExtraAddresses As Boolean = False, Optional ByRef objDataRequest As CDataRequest = Nothing) As ADORecordset`
***第 2 行***：Dim s as String
***第 3***行：`s = NullString`
***第 4 行***（空白）：
***第 5***行：`Public Function getDefaultPaymentAddress(ByVal lngObjectType As Integer, ByVal strID1 As String, ByVal strID2 As String, Optional ByRef objDataRequest As CDataRequest = Nothing) As typAddress`
***第 6***行：`Public Function myfunc(Optional ByVal strID2 As String = NullString, _`
***第 7***行：                  `Optional ByVal strID3 As String = NullString, _`
***第 8***行：                  `Optional ByVal blnExtraAddresses As Boolean = False, _`
***第 9***行：                  `Optional ByRef objDataRequest As CDataRequest = Nothing) As String`
***第 10***行：*直到文件末尾的*`'Some code comments with = NullString`
***更多行***：

 ** * *

每行的预期***输出***：

1.  **第 1 行**：作为一条大行，只需输出整个声明，并将 NullString 替换为引号，即“”。
2.  **第 2 行**：原样
3.  **第 3 行**：原样 [*注意 NullString 不应被替换*]
4.  **第 4 行**：原样，即空白
5.  **第 5 行**：原样。这里没有 NullString 所以不匹配
6.  **第 6 到 9 行**：2 个 NullString 替换为双引号（第 6 和 7 行）
7.  **第 10 行**：原样。这只是一个评论。
    我可能有类似的东西`If myVar = NullString Then`，但它不应该被匹配和替换。
    在此先感谢您的帮助。
    问候，
    尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:25:28.377

不可能用一个正则表达式进行所有更改。

您可以尝试以下方法：

```
' Repeat this until there are no more changes.
Search: (Function +\w+ *\([^)]*?)\bNullString\b
Replace: $1""

' Use a multiline match for this one.
Search: ^([ \t]*\w+ *= *)NullString\b
Replace: $1"" 
```*

# facebook - Graph API 返回 App Insight Data 的空数据集

> ID：11450059
> 
> 赞同：1
> 
> 时间：2012-07-12T10:38:54.463
> 
> 标签：facebook, facebook-graph-api, facebook-fql, facebook-opengraph

我正在尝试使用 Graph API 和 FQL 从我的 FB App Insight 获取 App Insights，例如发布展示次数、点击次数等，但没有获得任何数据。那里的响应有一个空数据数组。

对此有任何指示吗？

此外，获取应用程序对任何故事的印象数的 FQL 是多少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:36:53.923

我知道的一件事是，对于 Facebook 粉丝页面的帖子的一些见解，一个页面需要至少 30 个用户（喜欢）。

一天后，您的页面洞察数据可能会显示出来。

# ios - 如何在绘图中存储 CGLayers

> ID：11450061
> 
> 赞同：0
> 
> 时间：2012-07-12T10:39:01.053
> 
> 标签：ios, drawing, core-graphics, quartz-2d, cglayer

我正在使用 CgLayers 在 iOS 中绘图，现在我想存储这些图层并稍后检索它，所以我想知道有哪些可用选项。我尝试使用 NSMutableDictionary，下面是代码，

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{   
    CGLayerRef testLayer = CGLayerCreateWithContext(UIGraphicsGetCurrentContext(),   self.bounds.size, NULL);

    CGContextRef context = CGLayerGetContext(testLayer);

    CGContextDrawLayerAtPoint(context, CGPointZero, myLayerRef); 

// here myLayerRef is my original layer

    NSValue *layerCopy = [NSValue valueWithPointer:testLayer];

    NSDictionary *lineInfo = [NSDictionary dictionaryWithObjectsAndKeys:layerCopy, @"IMAGE",
                              nil]; 

    [m_pathArray addObject:lineInfo];    

}

-(void) retrieve
{
    NSDictionary *lineInfo = [m_pathArray lastObject];

    NSValue *val = [lineInfo valueForKey:@"IMAGE"];

    CGLayerRef layerRef = (CGLayerRef) [val pointerValue];

    CGContextRef context1 = CGLayerGetContext(layerRef);
    CGContextDrawLayerAtPoint(context1, CGPointMake(00, 00),layerRef);
    [self setNeedsDisplayInRect:self.bounds];   
} 
```

问候兰吉特

# javascript - 将“Table”转换为“Div”时处理rowspan和colspan

> ID：11450064
> 
> 赞同：4
> 
> 时间：2012-07-12T10:39:08.297
> 
> 标签：javascript, jquery, html, css

我正在使用以下代码将表格结构化数据转换为 div。

```
$('#content').html($('#content').html()
             .replace(/<tbody/gi, "<div id='table'")
             .replace(/<tr/gi, "<div style='overflow:auto;padding-top:15px;'")
             .replace(/<\/tr>/gi, "</div>")
             .replace(/<td/gi, "<span  style='float:left;margin-right:20px;'")
             .replace(/<\/td>/gi, "</span>")
             .replace(/<\/tbody/gi, "<\/div")); 
```

除了 ROWSPAN 和 COLSPAN 情况外，它在所有情况下都运行良好。

在将 Table 转换为 Div 时如何处理该设计问题？我陷入了困境。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T10:46:37.693

也许这会让你朝着正确的方向前进：

```
.replace(/rowspan="/gi, 'class="rowspan-')
.replace(/colspan="/gi, 'class="colspan-') 
```

然后为类制作样式（例如 rowspan-2 或 colspan-3 等）。但是，这并不能解决一个元素同时具有 row- 和 colspan 的情况，但这是一个开始。

更好的方法是：

```
var copyAttr = function(old, $new) {
  for(var i = 0,
        attributes = old.attributes;
    i < attributes.length; i++) {

    $new.attr(attributes[i].name, attributes[i].value);
  }
  return $new;
}

$('#content').find('tbody').each(function() {
  var $new = copyAttr(this, $('<div id="table"></div>');
  $(this).replaceWith($new);
}).end().find('tr').each(function() {
  var $new = copyAttr(this, $('<div class="tr"></div>');
  $(this).replaceWith($new);
}).end().find('td').each(function() {
  var $new = copyAttr(this, $('<span class="td"></span>');
  $(this).replaceWith($new);
}); 
```

所以现在你已经用 divs 和 spans 替换了整个表结构，以及表元素所具有的所有属性。接下来，您可以将 row- 和 colspan 属性更改为类。

```
$('#table .td').each(function() {
  var $t = $(this);
  $t
    .addClass('rowspan-'+$t.attr('rowspan'))
    .removeAttr('rowspan')
    .addClass('colspan-'+$t.attr('colspan'))
    .removeAttr('colspan');
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T10:56:40.473

为什么要将表格结构化数据转换为 div 而不是首先输出 div 结构化数据？我真的不明白

您可以尝试使用 CSS：

```
.tablewrapper
{
  position: relative;
}
.table
{
  display: table;
}
.row
{
  display: table-row;
}
.cell
{
  display: table-cell;
  border: 1px solid red;
  padding: 1em;
}
.cell.empty
{
  border: none;
  width: 100px;
}
.cell.rowspanned
{
  position: absolute;
  top: 0;
  bottom: 0;
  width: 100px;
} 
```

您应该得到的一些示例表：

```
<div class="tablewrapper">
  <div class="table">
    <div class="row">
      <div class="cell">
        Top left
      </div>
      <div class="rowspanned cell">
        Center
      </div>
      <div class="cell">
        Top right
      </div>
    </div>
    <div class="row">
      <div class="cell">
        Bottom left
      </div>
      <div class="empty cell"></div>
      <div class="cell">
        Bottom right
      </div>
    </div>
  </div>
</div> 
```

在您的情况下，这将如下所示：

```
.replace(/rowspan="/gi, 'class="rowspanned cell') 
```

此示例适用于除 Internet Explorer 7 之外的所有主要浏览器。

# joomla - joomla 前端显示的组件部分

> ID：11450067
> 
> 赞同：0
> 
> 时间：2012-07-12T10:39:20.983
> 
> 标签：joomla, components

如何在 Joomla 2.5 的前端显示表单，就像前端显示的创建文章表单一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:14:56.200

您显然可以在文章中创建一个表单，但这将毫无意义，因为该表单需要 PHP 函数，而这些函数无法在文章中编写。

您最好的选择是开发一个简单的模块，您可以将其嵌入文章中或从[Joomla Extensions Directory](http://extensions.joomla.org/extensions/contacts-and-feedback)下载免费形式的扩展。

# postgresql - Postgres SSL 错误

> ID：11450069
> 
> 赞同：10
> 
> 时间：2012-07-12T10:39:35.650
> 
> 标签：postgresql, drupal, postgresql-8.4

我正在尝试通过 SSH 和 drush（命令行 shell）运行 Drupal 迁移，将数据从 postgres 数据库复制到 mysql。

它可以正常工作一段时间（约 5 分钟左右），但随后出现错误：

```
SQLSTATE[HY000]: General error: 7 SSL [error] SYSCALL error: EOF detected 
```

postgres 数据库连接似乎已经消失，我只是得到错误：

```
SQLSTATE[HY000]: General error: 7 no [error] connection to the server 
```

它在本地运行良好，所以我认为问题一定出在 postgres 并通过 SSH 运行脚本 - 但是谷歌搜索这些错误没有任何用处。有谁知道这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T08:40:04.563

可能是超时。首先检查日志（可能更改 ssl_renegotiation_limit）

顺便说一句：IIRC，重新协商不会在固定时间后发生，而是在一定数量的传输字符（2GB？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T11:58:06.947

您应该检查 PostgreSQL 和 MySQL 日志以获取更多潜在详细信息。如果 PostgreSQL 日志中没有太多内容，请查看 postgresql.conf 中的[log_min_error_statement](http://www.postgresql.org/docs/current/static/runtime-config-logging.html)。正如您将通过该链接找到的那样，您可以对其进行调整以增加日志记录的数量。如果 PostgreSQL 日志中仍然没有线索，我会查看系统中的其他组件是否存在问题。

# c# - 从另一个窗体调用 MouseEventHandler

> ID：11450074
> 
> 赞同：0
> 
> 时间：2012-07-12T10:40:00.273
> 
> 标签：c#, winforms

我以 Main 形式创建了一个 MouseEventHandler：

```
 public Home()
        {
            InitializeComponent();

            this.KeyPreview = true;
            this.MouseMove += new MouseEventHandler(Home_MouseMove);
        }

        public static void Home_MouseMove(object sender, MouseEventArgs e)
        {
            bomb.Stop();
            bomb.Start();
        } 
```

如何从另一个表单调用 MouseEventHandler？

还有什么好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:04:01.870

首先，您必须将 Home_MouseMove 事件更改为非静态：

```
public void Home_MouseMove(object sender, MouseEventArgs e)
    {
        bomb.Stop();
        bomb.Start();
    } 
```

转到 program.cs 文件并更改以下代码：

```
static class Program
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new FrmMain());
    }
} 
```

到这段代码：

```
static class Program
{
    public static FrmMain MainForm;// add this line
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        MainForm = new FrmMain();// add this line
        Application.Run(MainForm);
    }
} 
```

现在在 form2 上，您可以像这样在主窗体中调用 MouseMove：

```
public partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();   
    }

    private void button1_Click(object sender, EventArgs e)
    {
        // call MouseMove event in main form
        Program.MainForm.FrmMain_MouseMove(null, null);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T10:18:14.713

我已经测试过了。有用。主要形式的代码是：

```
public partial class FrmMain : Form
{
    public FrmMain()
    {
        InitializeComponent();
    }

    public void FrmMain_MouseMove(object sender, MouseEventArgs e)
    {
        this.label1.Text = DateTime.Now.ToString();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        new Form1().Show();
    }
} 
```

Form1 代码为：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Program.MainForm.FrmMain_MouseMove(null, null);
    }
} 
```

它有一个带有点击事件的按钮。当您单击按钮时，会引发主窗体中的鼠标移动事件

最后 program.cs 代码是

```
static class Program
{
    public static FrmMain MainForm;
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        MainForm = new FrmMain();
        Application.Run(MainForm);
    }
} 
```

我已经测试过它和它的话。如果需要，我可以发送项目

# java - 如何将android连接到远程数据库

> ID：11450075
> 
> 赞同：1
> 
> 时间：2012-07-12T10:40:02.140
> 
> 标签：java, php, android, mysql, web-services

我正在开发一个必须将数据存储在数据库中的 Android 应用程序。该数据库还必须由 iPhone 应用程序和 Web 应用程序访问。我想为此使用 Mysql，因为它是开源的。

我正在寻找有关此的一些信息，显然我需要创建一个连接到数据库的 Web 服务。可能在php中，但我对php没有任何经验......

如何编写此 Web 服务以及将其存储在哪里？我在哪里创建和存储数据库？...

谁能帮我解决这个问题？

tnx

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T10:42:44.423

使用 SQL Server 管理桌面上的数据并在 Visual Studio 上的 .Net 中创建 Web 服务。

然后连接到应用程序中的 Web 服务并从数据库中设置/获取数据。

关于如何在 .NET 中创建 Web 服务的链接（不包括 Android 中的实现）：[http ://srikanthtechnologies.com/blog/dotnet/wsdaljava.aspx](http://srikanthtechnologies.com/blog/dotnet/wsdaljava.aspx)

关于如何将您的服务与 Android 连接的链接：http: [//seesharpgears.blogspot.in/2010/11/basic-ksoap-android-tutorial.html](http://seesharpgears.blogspot.in/2010/11/basic-ksoap-android-tutorial.html)

[http://www.codeproject.com/Articles/304302/Calling-Asp-Net-Webservice-ASMX-From-an-Android-Ap](http://www.codeproject.com/Articles/304302/Calling-Asp-Net-Webservice-ASMX-From-an-Android-Ap)

[http://adrianandroid.blogspot.in/2012/05/access-c-net-web-service-in.html](http://adrianandroid.blogspot.in/2012/05/access-c-net-web-service-in.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T10:53:58.277

**我的自定义类将联系本地主机服务器（WAMP 或 XAMP 服务器）**

CustomHttpClient.java

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.URI;
import java.util.ArrayList;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.conn.params.ConnManagerParams;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.params.HttpConnectionParams;
import org.apache.http.params.HttpParams;

public class CustomHttpClient {
    /** The time it takes for our client to timeout */
    public static final int HTTP_TIMEOUT = 30 * 1000; // milliseconds

    /** Single instance of our HttpClient */
    private static HttpClient mHttpClient;

    /*
     * Get our single instance of our HttpClient object.
     * 
     * @return an HttpClient object with connection parameters set
     */
    private static HttpClient getHttpClient() {
        if (mHttpClient == null) {
            mHttpClient = new DefaultHttpClient();
            final HttpParams params = mHttpClient.getParams();
            HttpConnectionParams.setConnectionTimeout(params, HTTP_TIMEOUT);
            HttpConnectionParams.setSoTimeout(params, HTTP_TIMEOUT);
            ConnManagerParams.setTimeout(params, HTTP_TIMEOUT);

        }
        return mHttpClient;
    }

    /*
     * Performs an HTTP Post request to the specified url with the specified
     * parameters.
     * 
     * @param url The web address to post the request to
     * 
     * @param postParameters The parameters to send via the request
     * 
     * @return The result of the request
     * 
     * @throws Exception
     */ 
    public static String executeHttpPost(String url,
    ArrayList<NameValuePair> postParameters) throws Exception {

        BufferedReader in = null;
        try 
        { 
            HttpClient client = getHttpClient();
            HttpPost request = new HttpPost("http://192.168.1.38/" +url (pathoffilenameyouarecalling));
            UrlEncodedFormEntity formEntity = new UrlEncodedFormEntity(postParameters);
            request.setEntity(formEntity);
            HttpResponse response = client.execute(request);
            in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));

            StringBuffer sb = new StringBuffer("");
            String line = "";
            String NL = System.getProperty("line.separator");
            while ((line = in.readLine()) != null) 
            {
                sb.append(line + NL);
            }

            in.close();

            String result = sb.toString();
            return result;
        } finally {
            if (in != null) {
                try {
                    in.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    }

    /**
     * Performs an HTTP GET request to the specified url.
     * 
     * @param url
     *            The web address to post the request to
     * @return The result of the request
     * @throws Exception
     */
    public static String executeHttpGet(String url) throws Exception {
        BufferedReader in = null;
        try {
            HttpClient client = getHttpClient();
            HttpGet request = new HttpGet();
            request.setURI(new URI(url));
            HttpResponse response = client.execute(request);
            in = new BufferedReader(new InputStreamReader(response.getEntity()
                    .getContent()));

            StringBuffer sb = new StringBuffer("");
            String line = "";
            String NL = System.getProperty("line.separator");
            while ((line = in.readLine()) != null) {
                sb.append(line + NL);
            }
            in.close();

            String result = sb.toString();
            return result;
        } finally {
            if (in != null) {
                try {
                    in.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    }
} 
```

**调用它的类将以这种方式实现。**

```
ArrayList<NameValuePair> postParameter = new ArrayList<NameValuePair>();
postParameter.add(new BasicNameValuePair("parametertobesent",value));
respons = CustomHttpClient.executeHttpPost("urlofservice",postParameter); 
```

**php 文件应该存在于 XAMP 服务器的 htdocs 中**

# mysql - 如何在mysql中根据点添加排名

> ID：11450079
> 
> 赞同：1
> 
> 时间：2012-07-12T10:40:13.450
> 
> 标签：mysql

我可以对这个查询使用一些帮助。

这是我的桌子：

```
id      name    point
1       yogi      5
2       sasi     10
3       white     5
4       black     8 
```

我的查询是：

```
SELECT * FROM points ORDER BY point DESC 
```

结果是：

```
id      name    point
 2      sasi      10
 4      black      8
 1      yogi       5
 3      white      5 
```

但我想要如下结果。请指导我。

```
id      name    point  rank
 2      sasi      10     1
 4      black      8     2
 1      yogi       5     3
 3      white      5     4 
```

这可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:47:31.467

试试这个

```
SET @rank = 0;
SELECT *, @rank:=@rank+1 AS rank 
    FROM points ORDER BY point DESC 
```

作为单行查询，如下所示

```
SELECT *, @rank:=@rank+1 AS rank 
   FROM points, (SELECT @rank:=0) temp
   ORDER BY point DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:47:30.870

```
SELECT 
    *,
    @rank:=@rank+1 'rank' FROM points, (select @rank:=0) r
ORDER BY 
    point DESC 
```

来源：[在 MySQL 中显示行号（rownum）](http://jimlife.wordpress.com/2008/09/09/displaying-row-number-rownum-in-mysql/)

# python - python程序中的退出函数

> ID：11450080
> 
> 赞同：3
> 
> 时间：2012-07-12T10:40:14.697
> 
> 标签：python

我有一个在 Python 中运行的程序，没有控制台（也就是说，我使用 py2exe 编译了它）。我希望人们能够从主菜单中退出，或者通过游戏中的特定按键（比如 Shift+Q）退出。虽然我正在编译 Linux/Mac 版本，但我目前正在 Windows 中运行它。如果似乎没有运行“while”循环，则按下 X 按钮可以正常工作，并且可以正确关闭它，否则它似乎会“存储”关闭命令，直到当前循环关闭。

至于菜单选项，我已经彻底查看了文档和 Stackoverflow，并尝试了 quit()、exit()、sys.exit() 以及我能找到的所有组合，但每次我得到：

```
Traceback (most recent call last):
  File "alphatime.pyw", line 61177, in <module>
  File "alphatime.pyw", line 53970, in place_menu
NameError: global name 'sys' is not defined 
```

如果我尝试 sys.exit，然后：

```
Traceback (most recent call last):
  File "alphatime.pyw", line 61177, in <module>
  File "alphatime.pyw", line 53970, in place_menu
NameError: global name 'quit' is not defined 
```

如果我尝试“退出（）”。我听说过“提高”诸如需要关闭程序之类的事情，但我不清楚这意味着什么（我是 Python 新手）以及我将如何去做。

所以，我的问题有两个。

首先，我可以在循环中放入一些东西来识别按键，这些东西可以识别“X”被点击并关闭吗？

其次，是否有适当的命令可以关闭程序？我不知道为什么这些命令不起作用，而且我收到很多使用该程序的人抱怨它崩溃，或者他们必须 ctrl-alt-del 它，或其他什么。我相信

```
import os
try:
  os._exit(return_code)
except:
  pass 
```

会起作用，但在这一点上，我不确定我是否有足够的能力在 python 上适当地部署它。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T10:42:55.270

你有没有机会

```
import sys 
```

因为那应该工作！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T10:43:45.570

> NameError：未定义全局名称“sys”

在你可以使用之前`sys.exit()`，你必须`import sys`。

这是退出程序的最佳方式。以开头的函数名被认为是内部的，除非你*真的*想做一些奇怪的事情，`_`否则不应该使用它。

# c++ - 多次调用 C++ 析构函数

> ID：11450084
> 
> 赞同：1
> 
> 时间：2012-07-12T10:40:20.023
> 
> 标签：c++, object, reference, stack, destructor

我正在为 sqlite 制作一个小包装类。为了从数据库中获取数据，我有一个名为 SQLiteValue 的类。当为查询绑定数据时，SQLiteValue 实例会在堆栈上创建并传递一些函数。类的骨架大纲如下。

```
class SQLiteValue : public SQLiteObject
{
private:            
    // stores a pointer to the data contained (could be of varying types)
    union 
    {
        int* i;
        double* d;
        std::string* s;
        std::wstring* ws;
        BYTE* b;
    } pdata;
            int type;

public:

    SQLiteValue(const char* val);
    SQLiteValue(const wchar_t* val);
    .. and so on for varying types
    virtual ~SQLiteValue();
}; 
```

该对象由几个重载的构造函数之一创建。构造函数根据其类型实例化 pdata 的“成员”。这对这门课来说很重要。现在，问题。我重载了构造函数，所以我得到了干净的方法调用，不需要显式调用 SQLiteValue(xxx)。因此，我真的不想对函数使用引用，所以我将它们定义为。

```
void BindValue(const char* name, SQLiteValue value)
query->BindValue(":username", "user2"); // the "clean" method call 
```

像这样声明它们会导致每次实例化一个新对象（或类似的东西？）我调用一个函数，因此析构函数释放为 pdata 分配的内存。这是不好的。

我想知道的是这个。在保留干净的方法调用的同时，有没有更好的方法来实现我想要做的事情？目前我有通过引用操作的私有函数，可以解决这个问题，但我不太喜欢这种方法。我很容易忘记参考，我最终会再次追踪同样的问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:31:06.767

这是右值引用可以提供帮助的情况。它不会减少调用的构造函数/析构函数的数量，但允许在右值 (&&) 复制构造函数或 operator= 中“窃取”临时类实例的内部资源。在此处查看详细信息：http: [//blogs.msdn.com/b/vcblog/archive/2009/02/03/rvalue-references-c-0x-features-in-vc10-part-2.aspx](http://blogs.msdn.com/b/vcblog/archive/2009/02/03/rvalue-references-c-0x-features-in-vc10-part-2.aspx)

右值引用复制构造函数只是将另一个实例内部资源移动到“this”实例，并将另一个实例资源重置为 0。因此，它不是分配、复制和释放，而是复制一个指针或句柄。您的代码中的“user2”就是这样的临时实例 - 右值引用。

这可以应用于任何实现 C++0x 标准的 C++ 编译器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:51:34.203

更改 BindValue 以通过 const 引用获取参数。

```
void BindValue(const char* name, const SQLiteValue &value) 
```

# c# - 是否存在具有默认 C# 目标的文件 Microsoft.CSharp.targets 的文档？

> ID：11450085
> 
> 赞同：1
> 
> 时间：2012-07-12T10:40:21.720
> 
> 标签：c#, visual-studio, msbuild

当我在 Visual Studio 2010 中创建 C# 项目时，`Microsoft.CSharp.targets`包含文件。

有任何可用的文档吗？
其中有哪些目标，使用了哪些属性？

在没有 VS 的情况下手动编辑构建脚本时特别有用。

可以手动调查带有目标的文件（我不时这样做）。
但在这种情况下，不清楚什么是变化问题，什么是规范，什么不是。

每次我需要一些东西时，`Microsoft.CSharp.targets`我都会在不同的地方找到它。
我还没有找到所有描述的“一个地方”。

有完整的参考吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T11:26:02.543

我不知道具体的文档，它是 C# 项目的实现细节。您可以在 MSDN 库中找到大量有关 MSBuild 的文档，Microsoft.CSharp.targets 文件仅包含特定于构建 C# 项目的目标。

它实现的最重要的目标是构建、清理和重建。它们直接对应于您在 VS 构建菜单中找到的命令。.csproj 文件仅设置影响一般目标结果的属性。所有这些都可以在您的机器上轻松获得，您可以使用编辑器查看 .targets 文件。它有很多，而且并不那么容易阅读，XML 作为一种编程语言的概念有点，嗯，有缺陷。也没有调试器。

# mysql - 更改大型 MySQL InnoDB 表

> ID：11450089
> 
> 赞同：43
> 
> 时间：2012-07-12T10:40:38.550
> 
> 标签：mysql, performance, optimization

对于 MySQL 中超过 1000 万行的大型 innodb 表，添加新列或添加新索引可能需要数小时和数天。在这两种情况下，提高大型 innodb 表性能的最佳方法是什么？更多内存，调整配置（例如增加[sort_buffer_size](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_sort_buffer_size)或[innodb_buffer_pool_size](http://dev.mysql.com/doc/refman/5.5/en/innodb-parameters.html#sysvar_innodb_buffer_pool_size)），还是某种技巧？与其直接更改表，不如创建一个新表，对其进行更改，然后将旧数据复制到新表中，就像这样对[ISAM 表](http://www.rndblog.com/don%E2%80%99t-alter-table-do-copy-and-rename/)和[多项更改](http://onehub.com/blog/posts/adding-columns-to-large-mysql-tables-quickly/)很有用：

```
CREATE TABLE tablename_tmp LIKE tablename;
ALTER TABLE tablename_tmp ADD fieldname fieldtype;
INSERT INTO tablename_tmp SELECT * FROM tablename;
ALTER TABLE tablename RENAME tablename_old;
ALTER TABLE tablename_tmp RENAME tablename; 
```

它是否也适用于 innodb 表，或者它只是 ALTER TABLE 命令所做的吗？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-07-12T11:03:27.383

**2016 年编辑：**我们最近（2016 年 8 月）发布了`gh-ost`，修改了我的答案以反映它。

今天有几个工具可以让你为 MySQL 做在线修改表。这些是：

*   **2016 年编辑：** [gh-ost](https://github.com/github/gh-ost)：GitHub 的无触发模式迁移工具（免责声明：我是该工具的作者）
*   [Oak-online-alter-table](http://openarkkit.googlecode.com/svn/trunk/openarkkit/doc/html/oak-online-alter-table.html)，作为*openark-kit*的一部分（免责声明：我是这个工具的作者）
*   [pt-online-schema-change](http://www.percona.com/doc/percona-toolkit/2.1/pt-online-schema-change.html)，作为*Percona 工具包的一部分*
*   Facebook 的[MySQL 在线架构更改](http://www.facebook.com/notes/mysql-at-facebook/online-schema-change-for-mysql/430801045932)

### 让我们考虑“正常”的 `ALTER TABLE`：

一张大桌子要花很长时间`ALTER`。`innodb_buffer_pool_size`很重要，其他变量也很重要，但在非常大的桌子上它们都可以忽略不计。只是需要时间。

MySQL 对`ALTER`表所做的就是创建一个具有新格式的新表，复制所有行，然后切换。在此期间，表完全锁定。

### 考虑你自己的建议：

它很可能会在所有选项中表现最差。这是为什么？因为您使用的是 InnoDB 表，所以`INSERT INTO tablename_tmp SELECT * FROM tablename`会产生事务。一笔**巨额**交易。它会产生比正常更多的负载`ALTER TABLE`。

此外，您必须在那时关闭您的应用程序，以便它不会将 ( `INSERT`, `DELETE`, `UPDATE`) 写入您的表。如果是这样 - 您的整个交易毫无意义。

### 在线工具提供什么

这些工具并非都一样。但是，基础是共享的：

*   他们用改变的模式创建了一个“影子”表
*   他们创建并使用触发器将更改从原始表传播到幽灵表
*   他们*慢慢地*将所有行从您的表复制到影子表。他们分块进行：比如说，一次 1,000 行。
*   当您仍然能够访问和操作原始表时，它们会执行上述所有操作。
*   满意后，他们使用`RENAME`.

openark *-kit*工具已经使用了 3.5 年。Percona 工具已有几个月的历史，但可能比前者经过更多测试。据说 Facebook 的工具适用于 Facebook，但没有为普通用户提供通用解决方案。我自己没用过。

**Edit 2016：** `gh-ost`是一个无触发的解决方案，它显着减少了主控上的主控写入负载，将迁移写入负载与正常负载解耦。它是可审计的、可控的、可测试的。我们在 GitHub 内部开发了它并作为开源发布；我们正在通过`gh-ost`今天进行所有生产迁移。[在这里](http://githubengineering.com/gh-ost-github-s-online-migration-tool-for-mysql/)查看更多。

每个工具都有其自身的局限性，请仔细查看文档。

### 保守的方式

保守的方法是使用主动-被动主-主复制，`ALTER`在备用（被动）服务器上执行，然后切换角色并`ALTER`在以前的主动服务器上再次执行，现在变成被动服务器。这也是一个不错的选择，但需要额外的服务器和更深入的复制知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-08T22:23:10.463

重命名会破坏引用的表。

如果你有说`table_2`哪个是child to `tablename`，on`ALTER TABLE tablename RENAME tablename_old;` `table_2`会开始指向`tablename_old`。

现在不改变 table_2 你不能把它指向`tablename`. 您必须继续在每个子表和引用表中进行更改。

# visual-studio - 相当于 VS 中控制台/Winforms 应用的网站发布？

> ID：11450092
> 
> 赞同：6
> 
> 时间：2012-07-12T10:40:48.747
> 
> 标签：visual-studio, build, publish

我有一个网站和一个控制台应用程序可以一起工作。

该网站根据发布配置文件发布到大约 10 个不同服务器中的任何一个。对于生产，这是 MSDeploy，但对于 Dev/Test/UAT/etc... 它是一个简单的 UNC 文件路径副本。

我希望能够轻松发布 CLI（至少发布到“本地”服务器）。我想要的是单击发布，选择配置文件/服务器并对其进行编译并将 bin 文件夹中的输出复制到`\\Server\ApplicationName`

我知道我可以将复制作为构建后步骤执行，但并不*总是*想要进行复制，并且绝对不总是希望它到同一个地方。

控制台/WinForms 应用程序存在的发布选项似乎以一键发布为中心，这不是我所追求的（我不希望应用程序每次都打电话回家寻找新版本，我想明确推送特定服务器的特定版本）。

我知道，如果应用程序在尝试发布期间正在运行，则会出现问题。

这是可以实现的吗？

# java - 定义的参数评估顺序导致次优代码？

> ID：11450093
> 
> 赞同：6
> 
> 时间：2012-07-12T10:40:52.580
> 
> 标签：java, c++, c, evaluation

众所周知，c 和 c++ 中的参数评估顺序没有定义：例如：`foo(a(),b())`在上面的调用中，由编译器的实现来决定选择哪个评估顺序，从而决定首先执行哪个函数。最近我的一位朋友问为什么在 C 或 C++ 中未指定评估顺序。当我用谷歌搜索它时，我开始知道指定评估顺序会导致代码生成不理想。但怎么会这样呢？为什么定义的参数评估顺序会导致次优代码？当我提到 Java 的参数评估顺序时。我在规范中找到了以下内容。

> 15.7.4\. 参数列表从左到右求值
> 
> 在方法或构造函数调用或类实例创建表达式中，参数表达式可能出现在括号内，用逗号分隔。每个参数表达式似乎在其右侧的任何参数表达式的任何部分之前都已被完全评估。如果参数表达式的求值突然完成，其右侧的任何参数表达式的任何部分似乎都没有被求值？

在这种情况下，Java 有一个定义的参数评估顺序，但是如果指定了这样的行为，说 C 或 C++ 编译器会产生次优代码似乎有点奇怪。你能对此有所了解吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T10:50:56.620

这部分是历史性的：例如，在寄存器很少的处理器上，一种传统（且简单）的优化技术是首先评估需要最多寄存器的子表达式。例如，如果一个子表达式需要 5 个寄存器，而另一个需要 4 个，则可以将需要 5 的结果保存在需要 4 的不需要的寄存器中。

这可能与通常认为的不太相关。如果表达式没有副作用，或者重新排序不会改变程序的可观察行为，编译器可以重新排序（即使在 Java 中）。现代编译器能够比二十多年前的编译器更好地确定这一点（当时制定了 C++ 规则）。据推测，当他们无法确定这一点时，您在每个表达式中都做得足够，以至于额外的内存溢出无关紧要。

至少，这是我的直觉。至少有一个实际从事优化器工作的人告诉我，这会产生重大影响，所以我不会说我对此很确定。

编辑：

只是添加一些关于 Java 模型的评论。在设计 Java 时，它被设计为一种解释性语言。极致性能不是问题；目标是极端的安全性和可复制性。因此，它非常精确地指定了许多东西，因此无论平台如何，任何编译的程序都将具有完全相同的行为。应该没有未定义的行为，没有实现定义的行为，也没有未指定的行为。不计成本（但相信这可以在任何最普遍的机器上以合理的成本完成）。C（以及间接的 C++）的一个初始设计目标是，不必要的额外运行时成本应该最小化，平台之间的一致性不是目标（因为当时，即使是常见的平台也有很大差异），以及安全性，虽然令人担忧，但并不是最初的。虽然态度已经发生了一些变化，但仍有一个目标是能够有效地支持任何可能存在的机器。无需最新、最复杂的编译器技术。而不同的目标自然会导致不同的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T11:01:58.413

Java 假定了一个基于堆栈的虚拟机，在该虚拟机中重新排序操作数没有任何优势。根据 James Kanze 的回答，C 和大多数完全编译的语言都假定了一种寄存器架构，其中寄存器“溢出”到内存是昂贵的，并且可以极大地避免，因此最好对操作数重新排序，实际上是做各种东西，以最大限度地提高寄存器使用率并最大限度地减少溢出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T16:13:31.930

我认为我们过度分析了它。真正的答案**可能是**，在 C 标准之前，当 K&R 成为事实上的标准时，没有人会费心指定评估参数的顺序，并且不同的编译器实现以不同的方式进行。

从人类的角度来看，*逻辑*方法是从左到右评估参数（正如 Java 所做的那样）。从编译器的角度来看，最*简单*的方法是从右到左进行参数评估。这样一来，一旦对参数进行评估，就不需要将其保存在任何地方，它可以被压入堆栈以供调用。大多数使用堆栈作为参数的 C 实现需要以相反的顺序推送它们。这是因为如果一个函数没有在同一个源文件中定义，并且程序员过去常常利用它来提供可变参数函数的原始形式，K&R C 无法让编译器计算出一个函数需要多少个参数。

因此，标准编写者面临选择以“正确”方式（从左到右）执行它，并且可能会破坏大量代码或以大多数现存编译器的方式执行它，并且可能会破坏一些其他代码或坚持使用现状并让编译器设计人员选择要做什么。

无论如何，这是我的观点，不是基于任何事实。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T12:05:19.870

不是针对您的示例的函数评估，而是对于简单的表达式，这两个表达式甚至可以并行执行。现代架构是流水线的，同时（几乎）同时提供两条流水线会更有效，这样必须执行的操作重叠。

此外，您似乎认为只有两个表达式可以评估参数，但有四个：`a`、`b`和。函数调用总的偏序是从左到右`a()``b()`

```
 a -- a()
             \
         f --- f(a(), b())
             /
    b -- b() 
```

正如您从图片中看到的那样，有很多潜在的并行性，现代编译器可以通过没有规定的评估顺序来获得一些东西。

**编辑：**鉴于讨论的一些额外细节。如果`a()`和`b()`是函数调用，标准保证这些函数调用不会交错，即使函数是内联的。所以上面的图片应该有一个附加约束，`a()`并且`b()`必须以某种方式排序。（我不知道如何把它放在图片中。）

另一方面，如果它们是其他表达式，例如宏评估，则如果有增益，这些表达式可能（并且可能会）交错。

# c# - 使用 XML 文件中的不同子节点和子节点填充 TreeView

> ID：11450103
> 
> 赞同：0
> 
> 时间：2012-07-12T10:41:27.370
> 
> 标签：c#, xml, visual-studio-2008, treeview

如何从 xml 文件填充树视图中不同的子节点和子子节点？

# iphone - 将目录的内容复制到 NSArray

> ID：11450104
> 
> 赞同：1
> 
> 时间：2012-07-12T10:41:30.863
> 
> 标签：iphone, objective-c, ios, ipad, nsfilemanager

**我在名为Wallpaper**的文件夹中有许多 jpg 格式的图像。我正在尝试使用以下代码读取目录的内容并将它们存储在一个数组中：

```
NSFileManager *manager = [NSFileManager defaultManager];
NSArray *fileList = [manager contentsOfDirectoryAtPath:@"/Wallpaper" error:NULL]; 
```

但它不工作。我无法将它们提取到数组中。谁能告诉我这有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T10:45:38.453

您需要指定目录的完整路径。我假设您的文件夹`Wallpaper`位于文档目录中。

```
NSFileManager   *fileManager        =   [NSFileManager defaultManager];
NSString        *documentsPath      =   [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString        *extractDirPath     =   [documentsPath stringByAppendingString: @"/Wallpaper"];
NSArray         *extractsList       =   [fileManager contentsOfDirectoryAtPath: extractDirPath error: nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:46:34.120

您使用的是绝对路径“/Wallpaper”，但我猜您的墙纸文件夹不在 / 中？

```
NSArray *fileList = [manager contentsOfDirectoryAtPath:@"/Wallpaper" error:NULL]; 
```

并尝试这样：

```
NSError *error = nil;
NSArray *fileList = [manager contentsOfDirectoryAtPath:@"/Wallpaper" error:&error];
NSLog(@"load wallpaper error: %@", error); 
```

这将为您提供发生的实际错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T10:49:53.847

试试这个：

```
NSFileManager *filemgr= [NSFileManager defaultManager];

NSArray *filelist = [filemgr contentsOfDirectoryAtPath:Pathwithfoldername error:nil]; 
```

# python - BeautifulSoup 在遇到未转义的括号时解析失败

> ID：11450105
> 
> 赞同：1
> 
> 时间：2012-07-12T10:41:30.973
> 
> 标签：python, parsing, html-parsing, beautifulsoup

我在加载包含文字（未转义）电子邮件标签的页面时遇到问题，例如

```
<html>
    <head>
            <title>Testing</title>
    </head>
    <body>
            <p>Testing testing.</p>
            <p>This is an email address for <joe@somewhere.com></p>
    </body>
</html> 
```

遇到该块时解析失败：

文件“/tools/oss/packages/x86_64-rhel5/python/2.7.1/lib/python2.7/HTMLParser.py”，第 115 行，错误引发 HTMLParseError(message, self.getpos()) HTMLParseError: malformed start标签，第 748 行，第 82 列

我不敢相信我是第一个遇到这个问题的人，但我无法立即找到任何帮助或有用的文档。我错过了一些明显的东西吗？

谢谢，

——保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:51:55.143

始终如一 - 当您发布问题后，您会突然找到答案。

看起来我遇到了[http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=516824](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=516824)中描述的错误- 更新到稍后的 BeautifulSoup 确实可以解决问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-12T10:53:12.477

这是 BeautifulSoup 的常见问题。它不处理格式错误的标签，因为它使用正则表达式来检测标签。

为 python 尝试 lxml。这是值得的，因为它类似于 BeautifulSoup。

[http://lxml.de/elementsoup.html](http://lxml.de/elementsoup.html)

PS：更新 BeautifulSoup 也可能会有所帮助。

# mongoose - Mongoose：每个模块使用一个连接是否正确？

> ID：11450108
> 
> 赞同：3
> 
> 时间：2012-07-12T10:41:33.323
> 
> 标签：mongoose

我有几个模块实际上为不同的实体定义了 mongoDB 的 REST 服务。

1）我可以在每个模块中创建连接 var mongoose = require('mongoose'); mongoose.connect(mongoURL);

2) 我可以在模块之外创建一个连接，然后将其作为参数传递到那里

最好的方法是什么？

# ios - 如何使缩放与 CABasicAnimation 保持一致

> ID：11450110
> 
> 赞同：3
> 
> 时间：2012-07-12T10:41:48.570
> 
> 标签：ios, ipad

我正在我的应用程序上创建一些动画，下面的代码会缩小一个对象直到它消失。我不知道如何使对象消失并保持这种状态，即。如何使动画在完成后保持不变。有什么问题吗？干杯!

```
 CABasicAnimation* zoomOut = [CABasicAnimation animationWithKeyPath:@"transform.scale"];
        zoomOut.duration = 1;
        zoomOut.toValue = [NSNumber numberWithFloat:0];
        [draggedObject addAnimation:zoomOut forKey:nil]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T11:02:43.233

我找到了。它还需要以下两种方法：

```
 zoomOut.removedOnCompletion = NO;
        zoomOut.fillMode = kCAFillModeForwards; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T11:02:39.117

好的，这是因为动画实际上并没有改变底层属性，这就是它在动画完成后跳回的原因。

尝试在开始动画的行之前添加此行 - zoomOut.removedOnCompletion = NO;

# javascript - 视差，作为主页横幅

> ID：11450113
> 
> 赞同：0
> 
> 时间：2012-07-12T10:41:59.937
> 
> 标签：javascript, html, css, transitions, parallax

这是一个非常模糊的问题，但我不知道从哪里开始，所以如果有人能给我一些想法，那你很棒。

我想在我的网站主页上制作视差效果，但我不确定如何创建这种效果。我想要的效果在这里[http://davegamache.com/chase-happiness/](http://davegamache.com/chase-happiness/)和这里[http://themetrust.com/demos/hero/](http://themetrust.com/demos/hero/)。它们都使用类似于向下滚动图像和文本以不同速度移动并淡出的原理。

所以基本上我的问题是，有谁知道我应该从哪里开始创建这个或任何你可以获得的下载来创建效果。

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:50:23.407

看起来并不难，只需查看他们的源代码：http: [//themetrust.com/demos/hero/wp-content/themes/hero/js/theme_trust.js](http://themetrust.com/demos/hero/wp-content/themes/hero/js/theme_trust.js) 在底部有一个名为：Parallax

# mysql - 在外键上连接表：MySQL 性能

> ID：11450116
> 
> 赞同：2
> 
> 时间：2012-07-12T10:42:07.103
> 
> 标签：mysql, query-optimization

我有两个表之间有外键约束

```
Table event
mysql> describe event;
+------------+------------------+------+-----+---------+-------+
| Field      | Type             | Null | Key | Default | Extra |
+------------+------------------+------+-----+---------+-------+
| sid        | int(10) unsigned | NO   | PRI | NULL    |       |
| cid        | int(10) unsigned | NO   | PRI | NULL    |       |
| signature  | int(10) unsigned | NO   | MUL | NULL    |       |
| timestamp  | datetime         | NO   | MUL | NULL    |       |
| is_deleted | tinyint(1)       | NO   | MUL | 0       |       |
+------------+------------------+------+-----+---------+-------+
5 rows in set (0.00 sec)

Table signature
mysql> describe signature;
+--------------+------------------+------+-----+---------+----------------+
| Field        | Type             | Null | Key | Default | Extra          |
+--------------+------------------+------+-----+---------+----------------+
| sig_id       | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
| sig_name     | varchar(255)     | NO   | MUL | NULL    |                |
| sig_class_id | int(10) unsigned | NO   | MUL | NULL    |                |
| sig_priority | int(10) unsigned | YES  |     | NULL    |                |
| sig_rev      | int(10) unsigned | YES  |     | NULL    |                |
| sig_sid      | int(10) unsigned | YES  |     | NULL    |                |
| sig_gid      | int(10) unsigned | YES  |     | NULL    |                |
+--------------+------------------+------+-----+---------+----------------+
7 rows in set (0.00 sec) 
```

event.signature 是外键并链接到 signature.sig_id。两者都有索引

表事件很大（比如 1M 条记录），而表签名相对较小（最多几千）

访问任何签名属性的联合查询需要很长时间才能执行。一看解释

```
mysql> explain select event.sid,event.cid,signature.sig_name from event join signature on signature.sig_id=event.signature;
+----+-------------+-----------+------+--------------------------------+-----------------------+---------+-------------------------+------+--------------------------+
| id | select_type | table     | type | possible_keys                  | key                   | key_len | ref                     | rows | Extra                    |
+----+-------------+-----------+------+--------------------------------+-----------------------+---------+-------------------------+------+--------------------------+
|  1 | SIMPLE      | signature | ALL  | PRIMARY,index_signature_sig_id | NULL                  | NULL    | NULL                    |  127 |                          |
|  1 | SIMPLE      | event     | ref  | index_event_signature          | index_event_signature | 5       | snorby.signature.sig_id |   68 | Using where; Using index |
+----+-------------+-----------+------+--------------------------------+-----------------------+---------+-------------------------+------+--------------------------+
2 rows in set (0.00 sec) 
```

而如果没有访问签名属性

```
mysql> explain select event.sid,event.cid from event join signature on signature.sig_id=event.signature;
+----+-------------+-----------+-------+--------------------------------+------------------------+---------+-------------------------+------+--------------------------+
| id | select_type | table     | type  | possible_keys                  | key                    | key_len | ref                     | rows | Extra                    |
+----+-------------+-----------+-------+--------------------------------+------------------------+---------+-------------------------+------+--------------------------+
|  1 | SIMPLE      | signature | index | PRIMARY,index_signature_sig_id | index_signature_sig_id | 4       | NULL                    |  127 | Using index              |
|  1 | SIMPLE      | event     | ref   | index_event_signature          | index_event_signature  | 5       | snorby.signature.sig_id |   68 | Using where; Using index |
+----+-------------+-----------+-------+--------------------------------+------------------------+---------+-------------------------+------+--------------------------+
2 rows in set (0.00 sec) 
```

可以看出，如果查询 Signature 属性，它会使用 ALL 连接类型进行全面扫描。

是否可以重写查询以更快？我问这个是因为这是多表连接的一部分，并且带有签名的连接事件是极大地减慢查询速度的瓶颈

我使用 5.1.52 MySQL 和 SQLAlchemy 0.7.8 作为 ORM

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:10:42.927

根据定义，您的查询*确实*需要全面扫描。

也就是说，你没有给出过滤条件。不`... WHERE sig_rev = 17`，例如。

因此，这里没有太多需要改进的地方。MySQL 选择一个表开始，进行全扫描，然后每行从第二个表中获取匹配的行。

所以扫描是必不可少的。但是你可以把它变成索引扫描而不是表扫描。我假设您仅在列上有索引`signature`，并且仅在`sig_id`列上。

您可以做的是在 上创建一个附加索引`sig_id, sig_name`，如下所示：

```
ALTER TABLE signature ADD UNIQUE INDEX(sig_id, sig_name); 
```

根据定义，该索引是唯一的，因为它比 更广泛`PRIMARY KEY`，但这超出了重点。

您现在可能获得的是与您发布的第二个示例类似的执行计划：对 进行索引扫描`signature`，然后对事件进行索引查找。

确保比较并验证您确实在此特定查询上获得了性能提升。检查新索引是否不会损害`INSERT`性能等。

祝你好运。

# c++ - c++中的while和for循环

> ID：11450117
> 
> 赞同：1
> 
> 时间：2012-07-12T10:42:09.380
> 
> 标签：c++, for-loop, while-loop

1)

```
 i = 0;

 while(i < N){

   j = i+1;

   while(j < N && p[i].first == p[j].first && p[j].second - p[i].second < K) j++;

     i = j; res++;

             } 
```

2)

```
for(i=0;i<N;i++){

   j = i+1;

   while(j < N && p[i].first == p[j].first && p[j].second - p[i].second < K) j++;

     i = j; res++;
                 } 
```

第一个代码和第二个代码的不同之处仅在于 1) 中的 while 循环和 2) 中的 for 循环。但是根据我的说法，由于它们的输出应该是相同的，但它是不同的。以上两个代码都只是总代码的一部分。但我应该告诉你，由于 1) 的输出是 2，而由于 2) 是 3。

我不知道为什么答案不同，因为发生的一切都是一样的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T10:45:47.053

for 循环将 i 递增两次。一旦在 for 循环定义本身 ( `i++`) 中，然后通过`j`.

while 循环仅通过`j`. 所以这两个例子是不一样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T10:47:44.223

我认为要使等于循环，您应该省略 for 中的增量：

```
for(i=0; i<N; ){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T12:21:35.677

在你的 for 循环中，变量 i 在你的代码中增加了两次：第一次在

```
for(i=0;i<N;i++){ 
```

第二次在

`j = i+1`其次是`i = j`

# android - ExpandableListView 包含来自各种表的数据

> ID：11450119
> 
> 赞同：1
> 
> 时间：2012-07-12T10:42:22.267
> 
> 标签：android, expandablelistview, sqlite

我想用我的 SQLite 数据库中的数据制作一个可扩展的列表视图。

但我只想从各种表中获取子列表的数据，并且组将始终相同。

然后将每个表的数据放入相关组的子列表中。

有可能的？有一些例子吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:55:41.870

好的，有点引导。我从中提取这个示例的项目是一个购物清单应用程序。可以有多个购物清单，具有不同的项目和数量。

因此，使用了三个表。杂货清单表，它只是一个带有 id 和名称的表。然后是一个项目表，其中包含 id、项目名称、计量单位、类别、通道和价格。最终的表是列表表，包含列表中的id、列表id、商品id和数量。

我希望能够按类别或过道排序，所以我创建了一些游标方法，它们接受参数来指定要使用的列。

三件事使这项工作......首先您在组游标查询中使用 DISTINCT 以确保您为要分组的每个单独项目获得一条记录。其次，您将它们设置为`_id`. 最后，您可以`JOIN`使用各种表格将所需的信息放入单个游标中。

**dbhelper 可扩展列表游标**

```
public Cursor fetchGroup(String group, long list) {
    String query = "SELECT DISTINCT "
            + group
            + " AS _id FROM "
            + LISTITEM_TABLE
            + " JOIN "
            + ITEM_TABLE
            + " ON list_items.item_id=items._id WHERE list_items.list_id = "
            + list;
    return mDb.rawQuery(query, null);
}

public Cursor fetchChildren(String column, String token, long list) {
    String query = "SELECT list_items._id, list_items.item_qty, items.name, items.cost, items.unit, list_items.checked FROM list_items JOIN items ON list_items.item_id=items._id WHERE "
            + column
            + "='"
            + token
            + "' AND list_items.list_id = "
            + list
            + " ORDER BY list_items.checked, items.name";
    return mDb.rawQuery(query, null);
} 
```

**设置展开列表**

```
 ExpandableListView lv;
    mGroupsCursor = mDbHelper.fetchGroup(group,
            ListFragment_ShopList.listId);
    getActivity().startManagingCursor(mGroupsCursor);
    mGroupsCursor.moveToFirst();

    lv = (ExpandableListView) getActivity().findViewById(android.R.id.list);

    mAdapter = new MyExpandableListAdapter(mGroupsCursor, getActivity(),
            R.layout.rowlayout_expgroup, R.layout.rowlayout_itemlist_exp,
            new String[] { "_id" }, new int[] { android.R.id.text1 },
            new String[] { GroceryDB.ITEM_NAME, GroceryDB.LISTITEM_QTY,
                    GroceryDB.ITEM_UNIT }, new int[] { R.id.ListItem1,
                    R.id.ListItem3, R.id.ListItem2 });
    lv.setAdapter(mAdapter);

public class MyExpandableListAdapter extends SimpleCursorTreeAdapter {

    public MyExpandableListAdapter(Cursor cursor, Context context,
            int groupLayout, int childLayout, String[] groupFrom,
            int[] groupTo, String[] childrenFrom, int[] childrenTo) {
        super(context, cursor, groupLayout, groupFrom, groupTo,
                childLayout, childrenFrom, childrenTo);
    }

    @Override
    protected Cursor getChildrenCursor(Cursor groupCursor) {
        Cursor childCursor = mDbHelper.fetchChildren(GroceryListMain.group,
                groupCursor.getString(groupCursor.getColumnIndex("_id")),
                ListFragment_ShopList.listId);
        getActivity().startManagingCursor(childCursor);
        childCursor.moveToFirst();
        return childCursor;
    }

    protected void bindChildView(View view, Context context, Cursor cursor,
            boolean isLastChild) {

        TextView name = (TextView) view.findViewById(R.id.ListItem1);
        TextView qty = (TextView) view.findViewById(R.id.ListItem3);
        TextView unit = (TextView) view.findViewById(R.id.ListItem2);
        TextView cost = (TextView) view.findViewById(R.id.ListItem4);

        name.setTextColor(MyApplication.shoplistitem_name);
        unit.setTextColor(MyApplication.shoplistitem_desc);
        qty.setTextColor(MyApplication.shoplistitem_qty);
        cost.setTextColor(MyApplication.shoplistitem_desc);

        name.setText(cursor.getString(2));
        qty.setText(cursor.getString(1));
        unit.setText(cursor.getString(4));

        DecimalFormat df = new DecimalFormat("0.00");
        Double hold = Double.valueOf(cursor.getString(3));
        Double qtyhold = Double.valueOf(cursor.getString(1));
        Double total = hold * qtyhold;

        cost.setText("$" + df.format(total));
    }
} 
```

希望这能说明你需要什么。如果您有任何问题，请给我留言，我会尽力澄清。

# c# - 在 USB 上读/写，C#

> ID：11450120
> 
> 赞同：0
> 
> 时间：2012-07-12T10:42:30.170
> 
> 标签：c#, usb

我使用[LibUsbDotNet](http://libusbdotnet.sourceforge.net/V2/Index.html)通过以下代码从 USB 读取数据：

```
public static UsbDeviceFinder MyUsbFinder = new UsbDeviceFinder(Convert.ToInt32(0x046D), Convert.ToInt32(0xC06A));  
public static UsbDevice MyUsbDevice;  
MyUsbDevice = UsbDevice.OpenUsbDevice(MyUsbFinder); 
```

它不起作用。找不到我的 USB 设备。
你能帮助我吗？！[您可以从这里](http://libusbdotnet.sourceforge.net/V2/Index.html)
下载库和示例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:04:33.383

您是否安装了必要的驱动程序？LibUsbDotNet 的帮助文件说：

> 在 LibUsbDotNet 可以访问 Windows 操作系统上的 USB 设备之前，该设备必须安装有 WinUSB 或 libusb-win32 USB 驱动程序。

否则，与示例相比，我看不出您的代码有任何问题。

* * *

顺便说一句，您的使用`Convert.ToInt32()`是多余的。这将做同样的事情：

```
public static UsbDeviceFinder MyUsbFinder = new UsbDeviceFinder(0x046D, 0xC06A); 
```

但这与你的问题无关。

# php - PHP PDO 安全性

> ID：11450121
> 
> 赞同：0
> 
> 时间：2012-07-12T10:42:34.430
> 
> 标签：php, mysql, security, pdo

我第一次尝试使用 PDO，我只是想知道我正在做的事情有多安全，我也是 PHP 新手。

我有一个查询，当用户通过我的页面时，页面使用 GET 获取一个变量，然后运行。

使用 PHP，我一直使用 mysql_real_escape 来清理我的变量。

任何人都可以看到这个安全漏洞吗？

```
// Get USER ID of person
$userID = $_GET['userID'];

// Get persons
$sql = "SELECT * FROM persons WHERE id =$userID";
$q = $conn->query($sql) or die($conn->error());
while($r = $q->fetch(PDO::FETCH_LAZY)){
    echo '<div class="mis-per">';
    echo '<span class="date-submitted">' . $r['date_submitted'] . '</span>';
   // MORE STUF
    echo '</div>';
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T10:47:58.810

不要使用查询，使用准备：

[http://php.net/manual/de/pdo.prepare.php](http://php.net/manual/de/pdo.prepare.php)

```
$userID = $_GET['userID'];

$sql = "SELECT * FROM persons WHERE id = :userid";

$q = $conn->prepare($sql)
$q->execute(array(':userid' => $userID ));

while($r = $q->fetch(PDO::FETCH_ASSOC)){ 
    echo '<div class="mis-per">'; 
    echo '<span class="date-submitted">' . $r['date_submitted'] . '</span>'; 
   // MORE STUF 
    echo '</div>'; 
} 
```

SQL 语句可以包含零个或多个命名 (:name) 或问号 (?) 参数标记，在执行语句时将替换它们的实际值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T10:47:01.323

对于你使用的任何东西，重要的是你**如何**使用它，而不是你使用**什么**。我认为 PDO 本身是非常安全的，只要你正确使用它。

```
$sql = "SELECT * FROM persons WHERE id =$userID"; 
```

那很糟 *。更好的 ：

```
$sql = "SELECT * FROM persons WHERE id = " . $conn->quote($userID); 
```

更好的 ：

```
$q = $conn->prepare('SELECT * FROM persons WHERE id = ?')->execute(array($userID)); 
```

* * *

* 这很糟糕，这是因为如果`$userID`是`"1 OR 1"`，则查询`SELECT * FROM persons WHERE id =1 OR 1`将始终返回`persons`表中的所有值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T10:49:28.473

正如评论所说：ATM 对 SQLI 没有任何安全性。PDO 为您提供（如果数据库驱动程序支持它（mysql 支持））**[Prepared Statements](http://www.php.net/manual/de/pdo.prepare.php)**。把它想象成一个查询模板，它被编译/传递给 dbms，然后用值填充。这是一个使用示例：

```
$sql = 'SELECT name, colour, calories
  FROM fruit
  WHERE calories < :calories AND colour = :colour';

 //Prepare the Query

$sth = $dbh->prepare($sql);

     //Execute the query with values (so no tainted things can happen)
$sth->execute(array(':calories' => 150, ':colour' => 'red'));
$red = $sth->fetchAll(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T10:51:27.427

调整如下（您可以使用`:userId`或简单地使用`?`Tom van der Woerdt 建议的方法，即使我认为第一个更清晰，尤其是当参数不止一个时）：

```
$sql = "SELECT * FROM persons WHERE id =:userID";
$q = $conn->prepare( $sql );
    $q->bindValue( ":userID", $userID, PDO::PARAM_INT ); // or PDO::PARAM_STR, it depends
    $q->execute();
    $r = $st->fetch();
...
... 
```

# cucumber - 有没有办法检查哪个黄瓜场景称为某个步骤？

> ID：11450126
> 
> 赞同：2
> 
> 时间：2012-07-12T10:42:52.700
> 
> 标签：cucumber, capybara

我在两个不同的功能文件中有两个场景，但两个场景都测试搜索功能，但在我页面的不同部分。我的场景看起来像这样：

```
Scenario Outline: Search items from QuickSearch
Given that the following items
  | id | title       | 
  | 1  | Item1       | 
  | 2  | Item2       |
When I search for <criteria> in this search
Then I should get <result>
And I should not get <excluded>

Examples:
|criteria|result    | excluded  |
| 1      | 1        | 2         |
| 2      | 2        | 1         | 
```

和：

```
Scenario Outline: Using a filter
Given that I have the following things:
 |id |name     |
 |1  | thing1  |
 |2  | thing2  |
When I use the <filter> filled with <criteria>
Then I should obtain these <results>
And I should not obtain these <exclusions>

Examples:
|filter     |criteria   |results    |exclusions |
|name       |thing      |1,2        |           |
|id         |1          |1          |2          | 
```

正如您在第二个场景中所说的那样，我已经更改了 get to get 一词，以便为这两个场景编写单独的步骤。我需要两个不同步骤的唯一原因是因为 2 个不同场景中的 id 映射到不同的名称（不，我不能对两者都使用相同的名称，并且不想在第二个中从 id 3 开始）

因此，我正在考虑这两种情况的通用步骤（至少在涉及到 then 步骤时），并且我想要一个哈希映射 id 和 name 一起进行验证，但我希望哈希根据不同而有所不同哪个场景称为步骤。

那么，在 Cucumber + capybara 中有没有一种方法可以告诉我哪个场景称为步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:19:14.480

我不知道从 Cucumber 步骤直接访问场景名称的方法。但是，您可以在 before 挂钩中访问该名称并将其存储在一个变量中，以便您的步骤可以使用它。

在钩子之前添加这个到你的`env.rb`：

```
Before do |scenario|
    case scenario
        when Cucumber::Ast::OutlineTable::ExampleRow
            @scenario_name = scenario.scenario_outline.name
        when Cucumber::Ast::Scenario
            @scenario_name = scenario.name
        else
            raise('Unhandled scenario class')
    end
end 
```

**编辑**：如果您使用的是更新版本的 Cucumber，请尝试：

```
Before do |scenario|
  case scenario.source.last
  when Cucumber::Core::Ast::ExamplesTable::Row
    @scenario_name = scenario.scenario_outline.name
  when Cucumber::Core::Ast::Scenario
    @scenario_name = scenario.name
  else
    raise('Unhandled scenario class')
  end
end 
```

然后，您的步骤可以使用 . 检查方案名称`@scenario_name`。例子：

```
Then /I should get (.*)/ do |result|
  if @scenario_name == 'Search items from QuickSearch'
    # Do scenario specific stuff
  elsif @scenario_name == 'Using a filter'
    # Do scenario specific stuff
  end

  # Do any scenario stuff
end 
```

# android - android中的自定义意图过滤器

> ID：11450128
> 
> 赞同：0
> 
> 时间：2012-07-12T10:42:56.303
> 
> 标签：android, android-intent, intentfilter

我目前试图实现的是：
在一个活动中添加一条记录并将其显示在另一个活动中。单击显示活动上的编辑按钮，它会将用户带回到第一页以编辑数据。
问题是我不能为此使用 Intent.putextra() 因为添加页面与其他页面链接，所以它给了我错误。
也考虑过使用共享首选项，但我认为这对我没有多大帮助，因为如果在共享首选项中设置了一个值，它将在加载活动时可用，所以我无法知道我从哪里进入活动。所以想到使用意图过滤器。谁能帮我这个 ？而且我不想为编辑目的创建另一个类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T13:38:09.547

为什么不检查...

```
<pre>
<code>
    if (getIntent() != null && getIntent().getSerializableExtra("Id") != null)
    {
       //get the data here becuz it's not null here....
    }
</code>
</pre> 
```

还要注意[getIntExtra()](http://developer.android.com/reference/android/content/Intent.html#getIntExtra%28java.lang.String,%20int%29)也存在......

# c# - Selenium ChromeDriver 在 Quit() 上停止工作

> ID：11450134
> 
> 赞同：1
> 
> 时间：2012-07-12T10:43:25.880
> 
> 标签：c#, visual-studio-2010, mstest, selenium-chromedriver

在 Visual Studio 中使用 MSTest，我遇到了 Selenium WebDriver 的问题，尤其是 ChromeDriver。每当我在 ChromeDriver 上调用退出时，我都会收到消息“chromedriver.exe”已停止工作”并且程序冻结。

我试图在所有测试结束时关闭我的每个驱动程序，在类清理中：

```
[ClassCleanup]
        public static void ClassCleanup() {
            drivers.ForEach(x => x.Quit());
        } 
```

Firefox 驱动程序正常关闭，但 Chrome 驱动程序总是停止工作。谁能帮我这个？

编辑：为了清楚起见，我的代码多一点（路径指向我已添加到我的解决方案中的 chromedriver.exe 程序）：

```
static IWebDriver driver;
        static IWebDriver chromeDriver;
        static string baseURL;
        static List<IWebDriver> drivers;

[ClassInitialize]
    public static void ClassInitialize(TestContext context) {
        drivers = new List<IWebDriver>();
        driver = new FirefoxDriver();
        chromeDriver = new ChromeDriver(path);
        drivers.Add(driver);
        drivers.Add(chromeDriver);
        baseURL = "http://localhost:4444/";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:20:08.247

[此处](https://stackoverflow.com/questions/11187172/how-to-close-a-chromedriver-when-running-on-grid)发布的答案解决了我的问题。

驱动程序的早期版本[（20.0.1133.0）](http://code.google.com/p/chromedriver/downloads/list?can=1&q=&colspec=Filename%20Summary%20Uploaded%20ReleaseDate%20Size%20DownloadCount)退出并关闭没有任何问题，这解决了我的问题。

# javascript - 使用 Internet Explorer 检索 XML DOM 对象的 URI

> ID：11450136
> 
> 赞同：4
> 
> 时间：2012-07-12T10:43:27.780
> 
> 标签：javascript, xml, internet-explorer, dom

在 Firefox 和 Chrome 中`documentURI`，如果 XML DOM 的文档节点对象是使用该`XMLHTTPRequest`对象创建的，则该属性将返回 DOM 的 URI。

Internet Explorer DOM 是否有等效的属性，如果有，它是什么？、`documentURI`和属性`url`都返回 null`URL`或`baseURI`undefined。

该属性的[MSXML 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms767669%28v=vs.85%29.aspx)让*`url`*我希望这将返回创建 DOM 的 HTTP 请求中使用的 URL - 但给出的示例没有使用`XMLHTTPRequest`.

我用来创建 DOM 然后测试属性的代码如下：

```
function getXslDom(url) {
    if (typeof XMLHttpRequest == "undefined") {
        XMLHttpRequest = function () {
            return new ActiveXObject("Msxml2.XMLHTTP.6.0");
        };
    }
    var req = new XMLHttpRequest();
    req.open("GET", url, false);
    req.send(null);
    var status = req.status;
    if (status == 200 || status == 0) {
        return req.responseXML;
    } else {
        throw "HTTP request for " + url + " failed with status code: " + status;
    }
};
var xslDom = getXslDom('help.xsl');
// the following shows "undefined" for IE
window.alert(xslDom.documentURI); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:48:16.663

使用您链接的 MSXML 页面中的示例，我设法让它工作：

```
<script>

  var getXslDom = function(url) {
    if(typeof ActiveXObject === 'function') {
      var xmlDoc = new ActiveXObject("Msxml2.DOMDocument.3.0");
      xmlDoc.async = false;
      xmlDoc.load(url);
      if (xmlDoc.parseError.errorCode != 0) {
         var myErr = xmlDoc.parseError;
         throw "You have error " + myErr.reason;
      } else {
         return xmlDoc;
      }
    } else {
      var req = new XMLHttpRequest();
        req.open("GET", url, false);
        req.send(null);
        var status = req.status;
        if (status == 200 || status == 0) {
            return req.responseXML;
        } else {
            throw "HTTP request for " + url + " failed with status code: " + status;
        }
    }
  }

  var dom = getXslDom('help.xsl')
  alert(dom.documentURI || dom.url)

</script> 
```

这是[一个演示](http://bijtel.com/stackoverflow/xsl/)。

干杯!

*PS：*我使用“alert”只是因为 OP 似乎使用它，我个人更喜欢“console.log”，我也向 OP 推荐。

# windows - 如何使用 ffmpeg 从图像创建幻灯片？

> ID：11450145
> 
> 赞同：0
> 
> 时间：2012-07-12T10:44:23.420
> 
> 标签：windows, linux, ffmpeg

我想从图像创建幻灯片，其中每个图像将显示一段时间（几秒钟）。

我怎么做？

目前我正在尝试使用 ffmpeg 对短片进行编码，然后将它们缝合在一起`mencoder`：

```
 foreach (var item in filePattern)
        {
            var otpt = item.Key + ".mpg";
            Process.Start("ffmpeg",
                string.Format("-y -r 25 -f image2 -vframes 75 -i {0} {1}", item.Value, otpt)//-loop 1
                ).WaitForExit();
        } 
```

`ffmpeg -y -r 25 -f image2 -vframes 75 -i input-pattern output`确实创建了一个包含 1 帧的文件，而`ffmpeg -y -loop 1 -r 25 -f image2 -vframes 75 -i input-pattern output`在 Windows 上永远不会完成（需要 ctrl+c 停止）；第二个命令为我在 linux 上工作。

我需要在 Windows 上使这项工作成为主要工作。我应该使用哪些参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T10:25:52.620

只需添加-t 3：

-y -r 25 -f image2 -vframes 75 -i {0} -t 3 {1}

# php - Magento：为后端操作生成 url（带密钥）

> ID：11450146
> 
> 赞同：19
> 
> 时间：2012-07-12T10:44:31.823
> 
> 标签：php, url, magento

我正在开发一个演示 Magento 商店（CE v1.7）

我想为模块（Mymodule）的控制器（索引）的操作（索引）生成链接，我想在主页中显示链接，以便我可以直接访问 Mymodule 功能

我怎样才能实现这一点（不禁用密钥生成）？

我已经尝试过以下代码，但我被缩减到仪表板：

```
<?php $key = Mage::getSingleton('adminhtml/url')->getSecretKey("acompany_mymodule/index/","index"); ?>
    <a href="<?php echo Mage::helper("adminhtml")->getUrl("acompany_mymodule/index/index/",array("key" => $key)); ?>">My action </a> 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-07-12T11:52:25.467

使用时应自动将密钥添加到 URL

```
Mage::helper("adminhtml")->getUrl("acompany_mymodule/index/index") 
```

前提是在系统配置中启用了密钥。

无论如何，在这部分代码中：

```
<?php 
      $key = Mage::getSingleton('adminhtml/url')
             ->getSecretKey("acompany_mymodule/index/","index"); 
 ?> 
```

您将带有控制器的路由作为第一个参数，其中该方法只是在等待控制器名称。

除了作为 url 的开头之外，不要使用任何其他内容`adminhtml/`，因为 magento 1.9.2.2 禁止其他所有内容。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-12T13:40:37.240

使用以下代码获取带有密码的 url

```
Mage::helper("adminhtml")->getUrl("adminshipper/process/index"); 
```

请参考以下文章：[Generating Backend-Admin URL With Key and Parameters in Magento](http://subeshpokhrel.github.io/blog/2010/03/24/generating-backend-admin-url-key-parameters-magento/)。

除了作为 url 的开头之外，不要使用任何其他内容`adminhtml/`，因为 magento 1.9.2.2 禁止其他所有内容。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-03-21T11:55:33.337

其他解决方案对我不起作用，因为它们不包含管理面板基本 URL（默认为*admin*）。我必须这样做才能获得正确的 URL：

```
Mage::helper('adminhtml')->getUrl('adminhtml/name_of_custom_extension/name_of_controller/'); 
```

# .net - Bash 的 `set -e` 的 Powershell 类似物

> ID：11450153
> 
> 赞同：13
> 
> 时间：2012-07-12T10:44:48.173
> 
> 标签：.net, bash, powershell

如何使 Powershell 的行为与带有标志的 Bash 一样`set -e`？`set -o errexit`制作一个 Bash 脚本“如果一个简单的命令以非零状态退出，则立即退出”。

我以为我可以通过设置来做到这一点，`$ErrorActionPreference="Stop"`但这似乎不起作用。假设我有一个脚本`a.ps1`

```
$ErrorActionPreference="Stop"
& cmd /c "exit 1"
echo "cmd exited `$LastExitCode=$LastExitCode and `$?=$?" 
```

如果我运行它

```
.\a. ; echo "a.ps1 exited `$LastExitCode=$LastExitCode `$?=$?" 
```

令我惊讶的是它打印

```
cmd exited $LastExitCode=1 and $?=False
a.ps1 exited $LastExitCode=1 $?=True 
```

这是怎么回事？！我希望 a.ps1 在第一行之后退出，抛出错误并设置 $? 为假。

有没有解释 $ErrorActionPreference 的官方文档？我发现的只是关于咖啡的博客上的这篇文章[。](http://blogs.technet.com/b/heyscriptingguy/archive/2010/03/08/hey-scripting-guy-march-8-2010.aspx)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-12T11:28:32.950

`$ErrorActionPreference`按预期工作，只是本机程序的退出代码不如 PowerShell cmdlet 表现得那么好。

对于一个`cmdlet`错误条件很容易确定：是否发生了异常？因此，以下内容不会达到set to的`Write-Host`语句：`$ErrorActionPreference``Stop`

```
Write-Error blah 
```

或者

```
Get-ChildItem somepathwhichsurelydoesntexisthere 
```

对于本机程序，退出代码为零*通常*表示没有发生错误，但这只是一种约定，非零退出代码表示错误也是如此。你会说如果`choice`存在退出代码为 1 是错误的吗？

处理此问题的唯一可靠方法是在运行本机命令后检查退出代码，并在需要时自行处理。PowerShell 不会尝试猜测结果的含义，因为在这种情况下，约定不足以保证默认行为。

如果你想让你的生活更轻松，你可以使用一个函数：

```
function Invoke-NativeCommand {
  $command = $args[0]
  $arguments = $args[1..($args.Length)]
  & $command @arguments
  if ($LastExitCode -ne 0) {
    Write-Error "Exit code $LastExitCode while running $command $arguments"
  }
} 
```

但总的来说，许多程序需要不同的处理，因为它们不遵守上述约定。

# html - GWT 包装一个 html 表格并添加 cels

> ID：11450157
> 
> 赞同：0
> 
> 时间：2012-07-12T10:44:54.337
> 
> 标签：html, gwt, html-table

我在我的网络应用程序中使用 gwt，并且我有一个包含`<table>`. 我选择这样做而不是 flextable，因为在将其设置为无法执行时会出现一些烦人的问题`<tbody valign="top">`。

我想知道是否可以包装一个 html 表格

```
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Path</th>
      <th>Type</th>
    </tr>
  </thead>
</table> 
```

在像 Flextable 这样的类中，我可以通过 Java 轻松控制行和列？

就像是

```
Label.wrap("id"); 
```

但对于桌子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T12:23:22.020

您还可以在**FlexTable**中格式化数据。

您可以使用`flexTable.getRowFormatter()`或。`flexTable.getColumnFormatter()``flexTable.getColumnFormatter()`

您可以使用上面的**FlexTable**属性将对齐、样式应用于行、列和单元格。

如果您在使用**FlexTable**时遇到任何问题，请提供一个独立的测试用例。

# python - 如何在 python webdriver 中为 chrome 设置代理？

> ID：11450158
> 
> 赞同：59
> 
> 时间：2012-07-12T10:44:59.500
> 
> 标签：python, google-chrome, proxy, webdriver

我正在使用这段代码：

```
profile = webdriver.FirefoxProfile()
profile.set_preference("network.proxy.type", 1)
profile.set_preference("network.proxy.http", "proxy.server.address")
profile.set_preference("network.proxy.http_port", "port_number")
profile.update_preferences()
driver = webdriver.Firefox(firefox_profile=profile) 
```

在 python webdriver 中为 FF 设置代理。这适用于FF。如何在 Chrome 中设置这样的代理？我找到了这个[例子](http://seleniumhq.org/docs/04_webdriver_advanced.html#using-a-proxy)，但不是很有帮助。当我运行脚本时，没有任何反应（Chrome 浏览器未启动）。

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-08-06T02:00:23.817

```
from selenium import webdriver

PROXY = "23.23.23.23:3128" # IP:PORT or HOST:PORT

chrome_options = webdriver.ChromeOptions()
chrome_options.add_argument('--proxy-server=%s' % PROXY)

chrome = webdriver.Chrome(options=chrome_options)
chrome.get("http://whatismyipaddress.com") 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-06-12T11:30:40.353

它为我工作...

```
from selenium import webdriver

PROXY = "23.23.23.23:3128" # IP:PORT or HOST:PORT

chrome_options = webdriver.ChromeOptions()
chrome_options.add_argument('--proxy-server=http://%s' % PROXY)

chrome = webdriver.Chrome(chrome_options=chrome_options)
chrome.get("http://whatismyipaddress.com") 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-06-16T05:38:00.550

我有同样的问题。ChromeOptions 非常奇怪，因为它没有像您想象的那样与所需的功能集成。我忘记了确切的细节，但基本上 ChromeOptions 会根据您是否传递了所需的功能字典，将某些值重置为默认值。

我做了以下猴子补丁，它允许我指定自己的 dict 而不必担心 ChromeOptions 的复杂性

更改 /selenium/webdriver/chrome/webdriver.py 中的以下代码：

```
def __init__(self, executable_path="chromedriver", port=0,
             chrome_options=None, service_args=None,
             desired_capabilities=None, service_log_path=None, skip_capabilities_update=False):
    """
    Creates a new instance of the chrome driver.

    Starts the service and then creates new instance of chrome driver.

    :Args:
     - executable_path - path to the executable. If the default is used it assumes the executable is in the $PATH
     - port - port you would like the service to run, if left as 0, a free port will be found.
     - desired_capabilities: Dictionary object with non-browser specific
       capabilities only, such as "proxy" or "loggingPref".
     - chrome_options: this takes an instance of ChromeOptions
    """
    if chrome_options is None:
        options = Options()
    else:
        options = chrome_options

    if skip_capabilities_update:
        pass
    elif desired_capabilities is not None:
        desired_capabilities.update(options.to_capabilities())
    else:
        desired_capabilities = options.to_capabilities()

    self.service = Service(executable_path, port=port,
        service_args=service_args, log_path=service_log_path)
    self.service.start()

    try:
        RemoteWebDriver.__init__(self,
            command_executor=self.service.service_url,
            desired_capabilities=desired_capabilities)
    except:
        self.quit()
        raise 
    self._is_remote = False 
```

所有改变的是“skip_capabilities_update”kwarg。现在我这样做是为了设置我自己的字典：

```
capabilities = dict( DesiredCapabilities.CHROME )

if not "chromeOptions" in capabilities:
    capabilities['chromeOptions'] = {
        'args' : [],
        'binary' : "",
        'extensions' : [],
        'prefs' : {}
    }

capabilities['proxy'] = {
    'httpProxy' : "%s:%i" %(proxy_address, proxy_port),
    'ftpProxy' : "%s:%i" %(proxy_address, proxy_port),
    'sslProxy' : "%s:%i" %(proxy_address, proxy_port),
    'noProxy' : None,
    'proxyType' : "MANUAL",
    'class' : "org.openqa.selenium.Proxy",
    'autodetect' : False
}

driver = webdriver.Chrome( executable_path="path_to_chrome", desired_capabilities=capabilities, skip_capabilities_update=True ) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2022-02-01T08:33:16.017

这很简单！

首先，定义您的代理网址

```
proxy_url = "127.0.0.1:9009"
proxy = Proxy({
    'proxyType': ProxyType.MANUAL,
    'httpProxy': proxy_url,
    'sslProxy': proxy_url,
    'noProxy': ''}) 
```

然后，创建 chrome 功能设置并为其添加代理

```
capabilities = webdriver.DesiredCapabilities.CHROME
proxy.add_to_capabilities(capabilities) 
```

最后，创建 webdriver 并传递所需的功能

```
driver = webdriver.Chrome(desired_capabilities=capabilities)
driver.get("http://example.org") 
```

总而言之，它看起来像这样

```
from selenium import webdriver
from selenium.webdriver.common.proxy import *

proxy_url = "127.0.0.1:9009"
proxy = Proxy({
    'proxyType': ProxyType.MANUAL,
    'httpProxy': proxy_url,
    'sslProxy': proxy_url,
    'noProxy': ''})

capabilities = webdriver.DesiredCapabilities.CHROME
proxy.add_to_capabilities(capabilities)

driver = webdriver.Chrome(desired_capabilities=capabilities)
driver.get("http://example.org") 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-10-30T13:27:26.747

这对我来说就像一个魅力：

```
proxy = "localhost:8080"
desired_capabilities = webdriver.DesiredCapabilities.CHROME.copy()
desired_capabilities['proxy'] = {
    "httpProxy": proxy,
    "ftpProxy": proxy,
    "sslProxy": proxy,
    "noProxy": None,
    "proxyType": "MANUAL",
    "class": "org.openqa.selenium.Proxy",
    "autodetect": False
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-07-12T06:15:53.580

对于那些询问如何在需要身份验证的 chrome 中设置代理服务器的人来说，应该遵循这些步骤。

1.  在您的项目中创建一个 proxy.py 文件，使用此[代码](https://gist.github.com/rajat-np/5d901702a33e7b4b5132b1acee5d778e "代码")
    并在 每次需要时从 proxy.py调用 proxy_chrome 。您需要传递代理服务器、端口和用户名密码等参数进行身份验证。

* * *

## 回答 #7

> 赞同：-14
> 
> 时间：2013-12-03T19:58:19.700

```
from selenium import webdriver
from selenium.webdriver.common.proxy import *

myProxy = "86.111.144.194:3128"
proxy = Proxy({
    'proxyType': ProxyType.MANUAL,
    'httpProxy': myProxy,
    'ftpProxy': myProxy,
    'sslProxy': myProxy,
    'noProxy':''})

driver = webdriver.Firefox(proxy=proxy)
driver.set_page_load_timeout(30)
driver.get('http://whatismyip.com') 
```

# regex - 电子邮件子域匹配的正则表达式

> ID：11450167
> 
> 赞同：3
> 
> 时间：2012-07-12T10:45:39.067
> 
> 标签：postgresql, regex, email, postgresql

任何人都知道只匹配包含子域的电子邮件的正则表达式吗？

**例如，**

`name@subdomain.domain.com`或者`name@subdomain.domain.edu.au`

最好在[postgresql](/questions/tagged/postgresql "显示标记为“postgresql”的问题")中使用。

**我试过这个：**

```
^[-+.0-9A-Z_a-z]+@[-+.0-9A-Z_a-z]+\.[A-Za-z]{2,4}$ 
```

但它也匹配`name@test.org`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T14:16:39.277

不要，无论如何都不是为了验证目的。它只会以痛苦告终。

验证电子邮件地址的唯一合理正则表达式是查找“@”符号和至少一个句点的正则表达式。没有其他的; 随着[IDN](http://en.wikipedia.org/wiki/Internationalized_domain_name)的出现，即使是字母数字也毫无意义。

至少您需要准确定义“子域”的含义。一切都是子域。什么的子域？什么被排除，什么被包含？

您如何定义“子域”与“顶级”？您的意思是“[对公众注册开放的域](http://publicsuffix.org/learn/)的子域”？“对公共注册开放的域的子域的子域”？在什么级别的授权下，它会成为您的子域？

那么政府域名呢，可以注册域名的“公众”非常有限，而 subdomains-of-subdomains-of-subdomains 是常态？你想匹配什么？

您将如何应对[新 gTLD](http://newgtlds.icann.org/en/)以及列表将随时间变化的事实？还是添加/删除 ccTLD？如果 ccTLD 更改其政策，开始销售直系后代域（例如“myname.au”）而不是仅销售特定的子注册管理机构（例如“myname.org.au”），那该怎么办？您是否会动态更新您的正则表达式，如果是，您将如何处理曾经有效但不再有效的地址，反之亦然？

我遇到了愚蠢的电子邮件验证系统，它甚至拒绝了我的主要电子邮件地址 ringerc@ringerc.id.au（当它已经遍布整个网络时，没有必要再修改它），尽管它是一个完全有效的 .id.au 域。

请不要再创建一个。如果您的意图不是验证，那很酷，但*请*不要尝试使用正则表达式验证电子邮件地址域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T22:59:17.523

这个简单的正则表达式不能保证有效的电子邮件地址，但它可靠地消除了许多废话：如果表达式产生`FALSE`，则地址实际上是无效的：

```
SELECT 'name@subdomain.domain.edu.au' ~ E'^\\S+@subdomain\\.\\S{2,}+$' 
```

```
^  .. start of string
\S+ .. one or more non-space characters
@subdomain .. literally
\. .. a literal dot
\S{2,}+ two or more non-space characters
$ .. end of string 
```

[转义字符串语法](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-CONSTANTS)全部`\`加倍。 而且，与其他答案不同，它适用于 PostgreSQL。使用 v9.1.4 测试。手册中的详细信息在[这里](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-CONSTANTS)。

就像@Craig 写道：尝试可靠验证是徒劳的。但是你仍然可以消除很多废话。

更进一步，消除多个`@`：

```
E'^[^[:space:]@]+@subdomain\\.[^[:space:]@]{2,}+$' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T11:58:16.640

使用这个：

```
(\w+@[\w.]+\w) 
```

解释：

```
\w+      word characters (a-z, A-Z, 0-9, _) 
         (1 or more times (matching the most amount possible))

@                        '@'

[\w.]+   any character of: word characters (a-z, A-Z, 0-9, _), '.' 
         (1 or more times (matching the most amount possible))

\w       word characters (a-z, A-Z, 0-9, _) 
```

对于**PostgreSql** ，请参阅[此链接](http://planetearthsolution.com/binodsblog/2011/02/07/regular-expression-in-postgresql/)和[此](http://blog.sinjakli.co.uk/2011/02/13/email-address-validation-please-stop/)。（似乎不可能）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T14:52:26.577

我想你可以自己做，在网站上尝试：

正则表达式测试器[http://regexpal.com/](http://regexpal.com/)

你可以上网试试...

问候，
Victor Zurita M.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T10:52:21.800

如果所有顶级域及其结构，您需要一个列表。Mozilla 项目有这样一个列表；它有数百行，因此将其合并到正则表达式中可能会很麻烦，尽管肯定不是不可能的。[https://wiki.mozilla.org/TLD_List更新：被](https://wiki.mozilla.org/TLD_List)[http://publicsuffix.org/](http://publicsuffix.org/)取代

基本上它是一个链接解析器。它需要查看文本（来自数据库），找到与电子邮件地址或 URL 匹配的任何文本并将它们转换为链接

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-06T21:15:04.807

您应该编写正则表达式以匹配子域以及域名及其后面的点。像这样：

`(([a-z0-9]+\.)*[a-z0-9]{2,}\.)`

为了匹配整个电子邮件 ID，这是正则表达式：

`([a-z]+[a-z0-9]*[_\.]?[a-z0-9]+)@(([a-z0-9]+\.)*[a-z0-9]{2,}\.)+[a-z]{2,}`

```
naveed@comquest:~$ echo -e "a_mb1@a.bc.abc.com\na2bc.xyz@a.bb.123.fr\na.123@abc.com.sg" | grep -E "([a-z]+[a-z0-9]*[_\.]?[a-z0-9]+)@(([a-z0-9]+\.)*[a-z0-9]{2,}\.)+[a-z]{2,}"
a_mb1@a.bc.abc.com
a2bc.xyz@a.bb.123.fr
a.123@abc.com.sg 
```

[你可以在这里](http://comquest.blog/grep-regular-expression-to-match-any-valid-email-id/)找到详细的解释

# c++ - 如何添加基于时间的限制以防止 Windows 用户登录？

> ID：11450170
> 
> 赞同：0
> 
> 时间：2012-07-12T10:45:45.300
> 
> 标签：c++, windows, login, user-accounts, login-control

我正在尝试向 Windows 登录屏幕添加一些修改，仅允许用户在当天有剩余时间时登录。我还想让他们通过与无线设备的连接来增加时间。

我见过类似的事情，华硕人脸登录和蓝牙登录，我写代码没有问题，但我如何在登录屏幕上设置限制？

我是否正确地假设这也只能使用 C++ 来完成？如果是这样，我主要用java编程，那么你什么时候推荐forC++？

任何建议和资源链接表示赞赏！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:35:57.610

我不太确定，但可以按如下方式完成：windows 中有任务调度程序，它为用户提供了在登录时运行特定程序的功能。因此，您可以开发一个在登录时运行的程序。

程序可以是这样的：首先，它将获取当前用户，检查用户可用的时间。这可以通过节省用户在内部数据库或文件中花费的时间来完成。

如果用户超过了指定的限制，那么它将在文件/数据库中写入详细信息并触发系统（“注销”）命令。注销是用于注销的 windows 命令。

此外，在每次成功登录时，它将保持登录时间，并在注销时更新文件/数据库中的时间差。

这就是我认为它可以实现的方式。如果你有更好的方法请分享。

# c# - for 循环中内联 if 语句的最佳实践

> ID：11450173
> 
> 赞同：2
> 
> 时间：2012-07-12T10:46:03.480
> 
> 标签：c#, .net

我想将 Listbox 项复制到 StringCollection。如果列表框项目包含空字符串，则忽略

为什么我可以这样做：

```
foreach (string item in lstModelUsers.Items)
{
    if (string.IsNullOrEmpty(item))
        continue;
    else
        Options.Default.ModelRemoveUsers.Add(item);
} 
```

但不是这个：

```
foreach (string item in lstModelUsers.Items)
    string.IsNullOrEmpty(item)
        ? continue
        : Options.Default.ModelRemoveUsers.Add(item); 
```

尽管两者看起来相等，但内联`if`语句会产生语法错误。
最佳做法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T10:48:37.033

你不能像那样使用[条件运算符](http://msdn.microsoft.com/en-us/library/ty67wk28.aspx)。它只接受*表达式*作为其操作数。您的代码无法编译，因为[`continue`](http://msdn.microsoft.com/en-us/library/923ahwt1%28v=vs.71%29.aspx)只能用作*语句*，而不是表达式。

更好的方法是否定`if`表达式，这样您就不需要`continue`：

```
foreach (string item in lstModelUsers.Items)
{
    if (!string.IsNullOrEmpty(item))
    { 
        Options.Default.ModelRemoveUsers.Add(item);              
    }
} 
```

你也可以使用`Where`：

```
var itemsToAdd = lstModelUsers.Items
    .Cast<string>()
    .Where(item => !string.IsNullOrEmpty(item));

foreach (string item in itemsToAdd)
{
    Options.Default.ModelRemoveUsers.Add(item);   
} 
```

如果幸运的话，你甚至可能会发现它`ModelRemoveUsers`有一个`AddRange`方法，那么你根本不需要循环：

```
var itemsToAdd = lstModelUsers.Items
    .Cast<string>()
    .Where(item => !string.IsNullOrEmpty(item));

Options.Default.ModelRemoveUsers.AddRange(itemsToAdd); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T10:49:48.963

我会使用 LINQ：

```
foreach (string item in lstModelUsers.Items.Where(user => !string.IsNullOrEmpty(user))
{
    Options.Default.ModelRemoveUsers.Add(item);
} 
```

根据你的类型，`ModelRemoveUsers`你可以把它变成一行

```
Options.Default.ModelRemoveUsers.AddRange(
    lstModelUsers.Items.Where(user => !string.IsNullOrEmpty(user)); 
```

但我更喜欢 Mark Byers 非单行版本，因为它更具可读性，因此随着时间的推移更容易维护。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T10:48:46.197

您不能`continue`在条件运算符中使用。

条件运算符的两个“分支”需要返回相同的类型或可以隐式相互转换的类型。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-12T10:49:00.440

不，他们不相等。条件运算符 ( `? :`) 要求两个结果部分以一个值结尾（`continue`没有值）。另外，这两个值都需要是相似的类型。

# android - 在活动中访问 SQLiteDatabase 对象的最佳方式是什么

> ID：11450177
> 
> 赞同：0
> 
> 时间：2012-07-12T10:46:11.483
> 
> 标签：android, sqlite

在活动中快速获取`SQLiteDatabase`对象以快速运行 rawQuery()的最佳方法是什么？我正在使用 MotoDev 工作室生成的 ContentProvider，这可能是生成 CP 和其他数据库代码的更快方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:52:02.767

使用 Content Providers，这是访问数据库的最佳方式。在 Android 2.3.3 源代码中，他们可以使用相同的方法访问数据库更多信息请参阅此链接 [http://developer.android.com/reference/android/content/ContentProvider。 html](http://developer.android.com/reference/android/content/ContentProvider.html)

[http://developer.android.com/guide/topics/providers/content-providers.html](http://developer.android.com/guide/topics/providers/content-providers.html)

[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:22:02.550

您是否尝试过生成 SQLiteOpenHelper？MOTODEV Studio 可以为您做到这一点，它允许您使用 getReadableDatabase() 方法获取 SQLiteDatabase。

# javascript - 将画布绘制到另一个画布不起作用

> ID：11450178
> 
> 赞同：4
> 
> 时间：2012-07-12T10:46:16.237
> 
> 标签：javascript, css, html, html5-canvas

我正在尝试在另一个画布上绘制通过 javascript 创建的画布。但这对我不起作用，

这是我的代码，

```
 <!DOCTYPE HTML>
<html>
  <head>
    </script>
       <script>
        window.onload = function(){  
        var can1 = document.createElement('canvas');
        can1.width = 150;
        can1.height = 140;
        can1.style.cssText = 'top:2px;left:2px;border:2px  solid black;';

        var ctx1 = can1.getContext('2d');
        var img=new Image();
        img.src="images/211.jpg"
        ctx1.drawImage(img,0,0);

        var can = document.getElementById("c");
        var ctx = can.getContext('2d');
        ctx.drawImage(can1,0,0);
        var canvas =  document.getElementById("c"); 
        window.open(canvas.toDataURL());
        }

    </script>
</head>
<body >
    <canvas id="c" style = "position:absolute;top:150px;width:250px;height:350px;left:500px; border:2px  solid black;"></canvas>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T13:50:00.090

我认为问题在于，当您尝试将该图像绘制到画布中时，图像还没有准备好。所以如果你这样做，它会完美地工作：

```
<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
      #myCanvas {
        border: 1px solid #9C9898;
      }
    </style>
    <script>
      window.onload = function() {

        var imageObj = new Image();
        imageObj.src = "http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg";

        var dynamicCanvas = document.createElement("canvas");
        var dynamicContext = dynamicCanvas.getContext("2d");
        dynamicCanvas .height="400";
        dynamicCanvas.width="578";

        var canvas = document.getElementById("myCanvas");
        var context = canvas.getContext("2d");

        imageObj.onload = function() {
          dynamicContext.drawImage(imageObj, 69, 50);
          context=context.drawImage(dynamicCanvas,69,50);
          window.open(canvas.toDataURL());
        };
      };

    </script>
  </head>
  <body>
    <canvas id="myCanvas" width="578" height="400"></canvas>
  </body>
</html> 
```

您可以调整动态画布的高度和宽度。

如果你删除那个 window.open 语句，它就完美了。

但有一个问题`canvas.toDataURL()`

当您尝试对`canvas.toDataURL()`本地文件执行操作时，它会出现安全错误（如果您通过 google chrome 检查它），即

```
Uncaught Error: SECURITY_ERR: DOM Exception 18 
```

您可以了解有关此错误的更多信息：[here](https://stackoverflow.com/questions/2704929/uncaught-error-security-err-dom-exception-18/ "这里") （查看您是否收到此错误）。无论如何，根本原因已经解决，现在完全有一个新问题：D..无论如何，祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-25T10:21:54.100

使用 MJQ 的原始代码显示不正确的图像的问题在于，他没有直接通过属性说明第二个画布的大小 - 仅通过样式。因此浏览器创建了一个默认大小的画布（FF 为 300x150），然后将其拉伸到 250x350。

所以下面的修改将解决图像显示：

```
<canvas id="c" width="250" height="350" style = "position:absolute;top:150px;width:250px;height:350px;left:500px; border:2px  solid black;"></canvas> 
```

也许这将有助于将来的某人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T10:55:28.590

你在做什么？您的代码正在运行。

（如果你的问题是正确的）我在后面添加了以下几行

```
can1.style.cssText='border:2px solid black;'; 
```

：

```
 var ctx1 = can1.getContext('2d');
        ctx1.rect(50, 50, 500, 500);
        ctx1.fillStyle = '#8ED6FF';
        ctx1.fill(); 
```

执行后，我看到里面有一个漂亮的矩形！你用的是支持html5的浏览器吗？？

# c# - 我想在文本框中不断显示文本

> ID：11450179
> 
> 赞同：-4
> 
> 时间：2012-07-12T10:46:17.457
> 
> 标签：c#, .net, wpf, wpf-controls

```
for(int a=0;a<10;a++)
{
txtblck =txtblk+ a.ToString();
} 
```

在此，txtbox 最后显示所有文本。我想一一显示文本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T10:49:59.777

你可以试试这个

```
 for (int a = 0; a < 10; a++)
    {
        txtblck.Text = txtblck.Text + a.ToString();
        Application.DoEvents();
        System.Threading.Thread.Sleep(1000);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T10:48:17.623

发生这种情况是因为`for`循环运行得如此之快，以至于您实际上无法看到`TextBox`更改的文本。使用[System.Threading.Thread.Sleep](http://msdn.microsoft.com/en-us/library/d00bd51t.aspx)方法暂停循环一段时间，以便您可以看到文本的变化：

```
for(int a = 0; a < 10; a++)
{
    txtblck =txtblk + a.ToString();
    System.Threading.Thread.Sleep(1000);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T20:29:04.490

尝试这样的事情：（我假设您使用的是 WPF，但任何计时器都可以）

```
System.Windows.Threading.DispatcherTimer timer;
int a, count;

void start() {
    timer = new System.Windows.Threading.DispatcherTimer();
    a = 0;
    count = 10;
    timer.Tick += timer_Tick;
    timer.Interval = new TimeSpan(0, 0, 1);
    timer.Start();
}

void timer_Tick(object sender, EventArgs e) {
    updateString();
}

void updateString() {
    if (a < count) {
        txtblck.Text += a.toString();
        a++;
    }
    else {
        timer.Stop();
    }
} 
```

# wordpress - 如何重写现有站点上的特定 URL 以从安装在子目录中的 WordPress 加载页面？

> ID：11450180
> 
> 赞同：1
> 
> 时间：2012-07-12T10:46:17.893
> 
> 标签：wordpress, .htaccess, mod-rewrite, url-rewriting, rewrite

我在 example.com 上有一个使用 CodeIgniter 构建的现有网站。

我在 example.com/wp 上安装了 WordPress。网址如下所示：example.com/wp/my-page

我试图弄清楚如何重写 example.com/my-page 以显示 example.com/wp/my-page 的内容，同时仍将 URL 显示为 example.com/my-page。

CodeIgniter 控制 index.php 文件，所以我不能在根目录下使用 WordPress 的 index.php。

我已经完成了一半，我让它处理一个纯 HTML 文件，但是让 WordPress 参与会将 url 重写到 /wp 子目录。

这是我在 example.com 根目录中使用的内容：

```
<IfModule mod_rewrite.c>
RewriteEngine On
Options FollowSymLinks

RewriteBase /

RewriteRule ^my-page /wp/my-page [P]

</IfModule> 
```

当我访问 example.com/my-page 时，我最终到达了 example/wp。

我想它与 /wp/ 目录中的标准 WordPress .htaccess 有关，如下所示：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /wp/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /wp/index.php [L]
</IfModule>
# END WordPress 
```

我尝试将 [P] 标志添加到 WordPress 规则中，但没有成功，我也尝试不将重写基础设置为 /wp/。

问题是我对这些东西的理解不够详细，无法弄清楚我的问题，或者不知道这是否可能。

总之，我想我正在尝试重写一个重写的 URL，而不进行重定向（因此有 [P] 标志）。

这可以做到吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:18:16.600

**$猫.htaccess**

```
RewriteEngine on
RewriteBase /
RewriteRule ^my-page wp/my-page [L] 
```

**$树-a wp**

```
wp
|-- .htaccess
`-- index.php 
```

**$ 猫 wp/.htaccess**

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /wp/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /wp/index.php [L]
</IfModule>
# END WordPress 
```

**$ 猫 wp/index.php**

```
<pre><?php print_r($_SERVER); ?></pre> 
```

* * *

结果：

浏览器中可见的 URL：`http://example.com/my-page` 输出：

```
Array
(
[REDIRECT_REDIRECT_STATUS] => 200
[REDIRECT_STATUS] => 200
[HTTP_HOST] => example.com
[HTTP_USER_AGENT] => Mozilla/5.0 (Windows NT 6.1; WOW64; rv:13.0) Gecko/20100101 Firefox/13.0.1
[HTTP_ACCEPT] => text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
[HTTP_ACCEPT_LANGUAGE] => en-us,en;q=0.5
[HTTP_ACCEPT_ENCODING] => gzip, deflate
[HTTP_CONNECTION] => keep-alive
[PATH] => /usr/local/bin:/usr/bin:/bin
[SERVER_SIGNATURE] => Apache/2.2.16 (Debian) Server at example.com Port 80
[SERVER_SOFTWARE] => Apache/2.2.16 (Debian)
[SERVER_NAME] => example.com
[SERVER_ADDR] => 1.2.3.4
[SERVER_PORT] => 80
[REMOTE_ADDR] => 4.3.2.1
[DOCUMENT_ROOT] => /www/vhosts/example.com/
[SERVER_ADMIN] => webmaster@example.com
[SCRIPT_FILENAME] => /www/vhosts/example.com/wp/index.php
[REMOTE_PORT] => 57775
[REDIRECT_URL] => /wp/my-page
[GATEWAY_INTERFACE] => CGI/1.1
[SERVER_PROTOCOL] => HTTP/1.1
[REQUEST_METHOD] => GET
[QUERY_STRING] => 
[REQUEST_URI] => /my-page
[SCRIPT_NAME] => /wp/index.php
[PHP_SELF] => /wp/index.php
[REQUEST_TIME] => 1342091732
) 
```

* * *

因此，如果在此之后您仍然看到重定向，那是由 wordpress **php 代码完成的**

# ios - 是否使用 GCD？

> ID：11450203
> 
> 赞同：1
> 
> 时间：2012-07-12T10:47:42.727
> 
> 标签：ios, multithreading, user-interface, grand-central-dispatch

我有一个 iPhone 应用程序，它几乎是一个网站的移动应用程序。它所做的几乎所有事情都是从我们的服务器调用 API 方法。该应用程序检索用户的信息，并使用 API 不断更新服务器。

我和我的同事讨论了是否将 GCD 引入应用程序的下载方面。我的同事认为，由于 UI 需要等待下载完成才能显示图片、文本或其他内容，因此绝对不需要 GCD。我的观点是，我们应该让主线程忙于 UI 渲染（即使没有数据），并将 GCD 引入应用程序以创建其他线程以供下载。

哪个论点是正确的？就我而言，如果 UI 呈现没有数据，会不会有某种滞后？哪个会产生更清洁、更时尚、更快速的应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T10:57:54.217

一种说法是：当下载失败并因为服务器端出现问题而超时时会发生什么？

*   如果没有 GCD，应用程序将保持被阻止状态，并在超时后崩溃，因为 UI 不能被阻止超过 20 秒。
*   使用 GCD，应用程序仍然可以正常工作，但不会下载任何数据，应用程序也不会崩溃。

其他需要考虑的方面是：

*   您正在使用的对象的线程安全性
*   您如何处理由于用户离开页面而不再需要的下载

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T11:00:23.923

我不认为在主线程中进行耗时的操作是一个好主意。

即使用户必须等待下载数据才能做任何有意义的事情，他仍然不希望 UI 被阻塞。

假设您有一个导航器视图，并且在用户点击某个按钮后，您将一个新视图推送到它并开始下载一些东西。如果用户突然决定他不想再等待，他点击“返回”按钮。如果您的下载操作阻塞了 UI，用户将不得不等待它结束，这真的很糟糕。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T11:32:27.753

一个更合适的问题可能是您应该异步下载还是在应用程序的主线程上下载，因为在 iOS 上有几种不同的异步下载方法（例如使用 NSThread、NSOperation 或 GCD）。实现目标的一种简单方法是使用[AFNetworking](https://github.com/AFNetworking/AFNetworking/)库。它使多线程网络/互联网代码非常容易实现和理解。

就我个人而言，我非常喜欢 GCD，并建议您尽快学习它，尽管与 AFNetworking 之类的库（我相信它在底层使用 GCD）相比，它本身并不适合异步下载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-18T22:38:07.000

这是关于使用 NSOperationQueues（在幕后使用 GCD）下载图像的好读物。您还可以查看一些 Github 代码。当用户移动到应用程序的不同部分时，他们有一个优雅的解决方案来暂停下载并将新的下载加入队列。

[http://eng.alphonsolabs.com/concurrent-downloads-using-nsoperationqueues/?utm_medium=referral&utm_source=pulsenews](http://eng.alphonsolabs.com/concurrent-downloads-using-nsoperationqueues/?utm_medium=referral&utm_source=pulsenews)

使用 GCD / NSOperationQueues 而不是使用 NSThreads。您将很好地学习核心基础知识，同时创建一个架构良好的应用程序。:)

# vba - 在表单中存储隐藏的、不可编辑的变量。字 97 兼容

> ID：11450210
> 
> 赞同：1
> 
> 时间：2012-07-12T10:48:01.050
> 
> 标签：vba, ms-word

我需要一个可以在 vba 中读取的 word 形式的不可编辑字段。

目前我使用一个隐藏的文本字段。如：

```
ActiveDocument.FormFields("DocID").Select
    Selection.Font.Hidden = false
//do read then re-hide it. 
```

但是，用户仍然可以在此文本字段中“制表”并覆盖那里的文档 ID，从而使 vba 宏无效。不幸的是，这就是发生的事情。

我可以将文本字段属性 'Fill-in enabled' 设置为 false，从而在表单中提供所需的效果，即用户无法对其进行编辑。但是现在这个文本字段无法在 vba 中读取。

```
ActiveDocument.FormFields("DocID").SomeProperty 
//throws error 'The requested member of the collection does not exist' 
```

所以我的问题是，**有没有一种方法可以将隐藏变量存储为可以在 vba 宏中读取的单词形式？**

不幸的是，这必须是与 Word-97 兼容的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T01:48:38.040

您可以改用自定义文档属性，请参见此处：

[http://msdn.microsoft.com/en-us/library/aa537154(v=office.11​​).aspx](http://msdn.microsoft.com/en-us/library/aa537154(v=office.11).aspx)

# ruby-on-rails - Rails - HABTM 关联， 检查是否存在？数组中的任何对象

> ID：11450211
> 
> 赞同：3
> 
> 时间：2012-07-12T10:48:02.627
> 
> 标签：ruby-on-rails, associations, has-and-belongs-to-many

我想检查数组中是否存在任何 HABTM 关系，如果存在则返回 true。

目前，我能看到的唯一方法是：

```
result = false
[1,2,3,4].each do |i|
  if user.parents.exists?(i)
    result = true
    break
  end
end 
```

我尝试按如下方式传入数组，但出现异常

```
result = true if user.parents.exists?([1,2,3,4])

NoMethodError: undefined method `include?` for 1:Fixnum 
```

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T10:53:31.980

```
[1,2,3,4].inject(false) {|res, i| res ||= user.parents.exists?(i)} 
```

几乎相同的逻辑，只是使用注入语法的更多 ruby​​-ish 代码。

**更新：**

没有测试过。但这也可能有效：

```
user.parents.exists?(:id => [1,2,3,4]) 
```

# javascript - 通过在 div 中使用 html 注释来显示/隐藏文本

> ID：11450219
> 
> 赞同：0
> 
> 时间：2012-07-12T10:48:54.303
> 
> 标签：javascript, jquery

如何使用 html 注释在 div 中拆分一些文本。Lats 说我嗬嗬：

```
<div id="id1">Some first text <!--more--> here.</div>
<a id=id1>Show/Hide</a>
<div id="id2">Some second text is <!--more--> right here.</div>
<a id=id1>Show/Hide</a> 
```

我不会使用 jquery 或 javascript 来显示或隐藏`<!--more-->`. 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:35:37.753

你可以尝试这样的事情：

给定标记：

```
<div id="id1">Some first text <!--more--> here.</div>
<a>Hide</a>
<div id="id2">Some second text is <!--more--> right here.</div>
<a>Hide</a>​ 
```

添加以下javascript：

```
//1\. On page load, wrap text to be hidden in <span>
$(function() {
    $("div").each(function() {
        var html = $(this).html();
        $(this).html(html.replace('<!--more-->', '<span class="hiddenText">', html) + '</span>');
    });

    // 2\. Toggle visibility of span tags when clicking link
    $('a').click(function() {
        if ($(this).html() == 'Hide') {
            $(this).prev('div').children('.hiddenText').hide();
            $(this).html('Show');
        } else {
            $(this).prev('div').children('.hiddenText').show();
            $(this).html('Hide');
        }
    });
}); 
```

检查我的[jsFiddle](http://jsfiddle.net/7GCCa/1/)以获取工作示例。

**更新**：更新的解决方案不依赖单独的 CSS 类来隐藏/显示文本。

# objective-c - 使用 Objective-C 从服务器解析 .csv 文件

> ID：11450222
> 
> 赞同：1
> 
> 时间：2012-07-12T10:49:08.023
> 
> 标签：objective-c, xcode, ipad, ios5, csv

我已经寻找了很长时间的答案，但仍然没有找到答案，所以我想我会自己问这个问题。

在我的 iPad 应用程序中，我需要能够解析 .csv 文件以填充表格。我正在使用[http://michael.stapelberg.de/cCSVParse](http://michael.stapelberg.de/cCSVParse)来解析 csv 文件。但是，我只成功解析了本地文件。我一直在尝试从服务器访问文件，但无处可去。

这是我解析本地 .csv 文件的代码：

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 1)
    {
        //UITextField *reply = [alertView textFieldAtIndex:buttonIndex];
        NSString *fileName = input.text;
        NSLog(@"fileName %@", fileName);
        CSVParser *parser = [CSVParser new];
        if ([fileName length] != 0)
        {
            NSString *pathAsString = [[NSBundle mainBundle]pathForResource:fileName ofType:@"csv"];
            NSLog(@"%@", pathAsString);

            if (pathAsString != nil)
            {
                [parser openFile:pathAsString];
                NSMutableArray *csvContent = [parser parseFile];
                NSLog(@"%@", csvContent);
                [parser closeFile];
                NSMutableArray *heading = [csvContent objectAtIndex:0];
                [csvContent removeObjectAtIndex:0];

                NSLog(@"%@", heading);

                AppDelegate *ap = [AppDelegate sharedAppDelegate];
                NSManagedObjectContext *context = [ap managedObjectContext];

                NSString *currentHeader = [heading objectAtIndex:0];
                NSString *currentValueInfo = [heading objectAtIndex:1];
                NSManagedObject *newObject = [NSEntityDescription insertNewObjectForEntityForName:@"Field" inManagedObjectContext:context];
                [newObject setValue:@"MIS" forKey:@"header"];
                [newObject setValue:currentHeader forKey:@"fieldName"];

                for (NSArray *current in csvContent)
                {
                    NSManagedObject *newField = [NSEntityDescription insertNewObjectForEntityForName:@"Field" inManagedObjectContext:context];
                    [newField setValue:currentHeader forKey:@"header"];
                    [newField setValue:currentValueInfo forKey:@"valueInfo"];
                    NSLog(@"%@", [current objectAtIndex:0]);
                    [newField setValue:[current objectAtIndex:0] forKey:@"fieldName"];
                    [newField setValue:[NSNumber numberWithDouble:[[current objectAtIndex:1] doubleValue]] forKey:@"value"];
                }
                NSError *error;
                if (![context save:&error]) 
                {
                    NSLog(@"Couldn't save: %@", [error localizedDescription]);
                }
                [self storeArray];
                [self.tableView reloadData];
            }
        }
    }
    input.text = nil;
} 
```

原谅奇怪的开始和结束括号缩进。：/

无论如何，这就是我从用户那里获取输入并在本地访问文件的代码，我相信你们已经意识到了。现在我想知道如何在我的服务器中获取文件的路径。

另外，如果你们发现任何其他错误，例如写作风格和其他不良习惯，请告诉我，因为我是 iOS 新手。

非常感谢您！如果您不理解我的问题，请澄清，因为我有时不善于解释自己！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:48:17.250

正如我猜测的那样，您正在尝试从服务器的 .csv 文件中获取数据，并希望在表格视图列表中显示该数据。

所以我建议您尝试在 NSData 中获取该 .csv 文件数据，然后进行处理。

```
NSData *responseData = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"serverUrl"]];
NSString *csvResponseString = [[[NSString alloc] initWithData:responseData   encoding:NSUTF8StringEncoding] autorelease];
NSLog(@"responseString--->%@",csvResponseString); 
```

现在尝试使用 nsstring 的方法 ( `componentsSeparatedByString`) 和 coma (')

```
arrSepratedData = [[responseString componentsSeparatedByString:@","]; 
```

现在使用这个 arr 来`UITableView`填充数据。

# logging - 如何将 jboss-client.jar 作为模块引用？

> ID：11450224
> 
> 赞同：0
> 
> 时间：2012-07-12T10:49:10.533
> 
> 标签：logging, jboss7.x

我正在使用 jboss 7.1.1.final，并且我编写了一个日志记录模块，它扩展`org.jboss.logmanager.ExtHandler`并将日志写入 DB，问题是 ExtHandler 类位于 JBOSS_HOME/bin/client 下的 jboss-client.jar 中。

所以我需要从我的日志模块中引用它，但是在模块下复制它似乎是错误的，因为它会创建重复，有没有更好的方法让我的日志模块知道它依赖于这个 jar？

这是我的module.xml：

```
<?xml version="1.0" encoding="UTF-8"?>

<!-- Represents the OG-Logging module -->
<module xmlns="urn:jboss:module:1.1" name="com.mycomp">
    <resources>
        <resource-root path="OG-Logging-1.0.jar" />
    </resources>

    <dependencies>

        <system export="false">
            <paths>
                <path name="javax/naming" />
                <path name="javax/naming/directory" />
                <path name="javax/naming/event" />
                <path name="javax/naming/ldap" />
                <path name="javax/naming/spi" />
                <path name="javax/sql" />
            </paths>
        </system>
        <module name="org.apache.log4j" />
        <module name="org.apache.commons.lang" />
        <module name="com.oracle.ojdbc" />
    </dependencies>
</module> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T07:53:26.320

简短回答：阅读 JBOSS_HOME/bin/client/README.txt

长答案：

将这些部门添加到您的 module.xml 中：

```
org.jboss.logging:jboss-logging
org.jboss.logmanager:jboss-logmanager 
```

# c# - 如何在代码隐藏中处理 json 对象

> ID：11450227
> 
> 赞同：2
> 
> 时间：2012-07-12T10:49:20.013
> 
> 标签：c#, asp.net, json, jquery

我有 -`var JsonObj = [];`我将一些数据推入其中并使用方法将其发送到代码隐藏`JQuery.ajax()`。我能够接收具有这样参数的方法

```
[WebMethod]
public static void SaveInfo(List<Object> userEnteredDetails)
{
} 
```

我遍历集合以获取类似这样的数据，

```
foreach (object item in userEnteredDetails)
{
Dictionary<string, object> details = item as  Dictionary<string, object>;

string name = details["customerName"] as string;
} 
```

这里的问题是，我收到了超过 10 件收藏品。所以我无法在上面的 for 循环中读取另一个属性。像这样的东西，

```
foreach (object item in userEnteredDetails)
{
Dictionary<string, object> details = item as  Dictionary<string, object>;

string name = details["customerName"] as string;
string city= details["city"] as string;
} 
```

第一次 city 会抛出错误，下次 customername 会抛出错误。因为 item 变量一次只有一个变量。由于我们没有属性，如何有效地读取所有超过 10 条记录，但只能通过索引器读取 (details["customerName"])。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T10:59:55.450

试试这个：

```
string name = String.Empty;
string city = String.Empty;
foreach (object item in userEnteredDetails)
{
 Dictionary<string, object> details = item as  Dictionary<string, object>;
if (details.ContainsKey("customerName"))
 name = details["customerName"] as string;
if (details.ContainsKey("city"))
 city= details["city"] as string;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T11:00:14.010

您可以枚举详细信息字典。

```
foreach(var kvp in details)
  {
// do something with kvp.Key and kvp.Value
  } 
```

编辑：要首先获得一个合并的详细信息字典，您可以尝试以下操作：

```
var details = list.Select(item => item as Dictionary<string, object>).SelectMany(d => d).ToDictionary(kvp => kvp.Key, kvp => kvp.Value); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T10:59:38.900

一件事你可以有一个类型，其中的字段映射到对象列表。在使 ajax 调用字符串化 json 对象时。在您的网络方法中，将其作为字符串接收。使用 Json Deserializer 并将其反序列化为您创建的类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T11:11:53.690

有一个非常灵活的 json 框架 ( **JSON.NET ) 可以帮助解决这个问题，如果您使用 JSON** [http://json.codeplex.com/](http://json.codeplex.com/)进行大量工作，则值得考虑定义

# vba - VBA宏（Excel）中的错误过程太大

> ID：11450232
> 
> 赞同：11
> 
> 时间：2012-07-12T10:49:44.253
> 
> 标签：vba, excel, excel-2003

我正在`Procedure too Large Error`使用 VBA 宏。

我正在使用 MS-Excel 2003。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-12T11:34:07.787

如果您的程序超过 64kb，您将收到该错误。这些是您可以压缩代码的一些东西

**1）**摆脱重复的代码。看这个例子

```
Sub Sample()
    Range("A1") = "Blah Blah"
    Range("A2") = "Blah Blah"
    Range("A3") = "Blah Blah"
    Range("A4") = "Blah Blah"
    Range("A5") = "Blah Blah"
    Range("A6") = "Blah Blah"
    Range("A7") = "Blah Blah"
End Sub 
```

这段代码可以写成

```
Sub Sample()
    For i = 1 To 7
        Range("A" & i) = "Blah Blah"
    Next i
End Sub 
```

另一个例子

```
Sub Sample()
    Range("A1") = (Range("A1") * 10) + (Range("A1") + 30) + (Range("A1") / 30)
    Range("A5") = (Range("A5") * 10) + (Range("A5") + 30) + (Range("A5") / 30)
    Range("A11") = (Range("A11") * 10) + (Range("A11") + 30) + (Range("A11") / 30)
    Range("A6") = (Range("A6") * 10) + (Range("A6") + 30) + (Range("A6") / 30)
    Range("A8") = (Range("A8") * 10) + (Range("A8") + 30) + (Range("A8") / 30)
    Range("A56") = (Range("A56") * 10) + (Range("A56") + 30) + (Range("A56") / 30)
End Sub 
```

这段代码可以写成

```
Sub Sample()
    Range("A1") = GetVal(Range("A1"))
    Range("A5") = GetVal(Range("A5"))
    Range("A11") = GetVal(Range("A11"))
    Range("A6") = GetVal(Range("A6"))
    Range("A8") = GetVal(Range("A8"))
    Range("A56") = GetVal(Range("A56"))
End Sub

Function GetVal(rng As Range) As Variant
    GetVal = (rng.Value * 10) + (rng.Value + 30) + (rng.Value / 30)
End Function 
```

这将确保您减少空间并且不编写重复的代码。

**2）**如果您通过宏生成代码，那么您可能会得到类似的东西。摆脱无用的代码，例如`ActiveWindow.ScrollRow = 8968`

```
Option Explicit

'~~> This procedure fills Excel's 10000 cells with random values and then removes the duplicates
Sub FillExcelCells()
    Dim rowCount As Long

    '~~> Activate the necesary Sheet
    Sheets("Sheet1").Activate

    '~~> Loop through all the cells and store random numbers
    For rowCount = 1 To 10000
        Sheets("Sheet1").Range("A" & rowCount).Select
        Sheets("Sheet1").Range("A" & rowCount).Value = Int((10000 - 1) * Rnd() + 1)
    Next rowCount

    '~~> Sort the Range
    Sheets("Sheet1").Range("A1").Select
    Sheets("Sheet1").Range(Selection, Selection.End(xlDown)).Select
    Application.CutCopyMode = False

    Range(Selection, Selection.End(xlDown)).Select
    ActiveWindow.SmallScroll Down:=-39
    ActiveWindow.ScrollRow = 9838
    ActiveWindow.ScrollRow = 9709
    ActiveWindow.ScrollRow = 9449
    ActiveWindow.ScrollRow = 8968
    ActiveWindow.ScrollRow = 8319
    ActiveWindow.ScrollRow = 7245
    ActiveWindow.ScrollRow = 6003
    ActiveWindow.ScrollRow = 4818
    ActiveWindow.ScrollRow = 4040
    ActiveWindow.ScrollRow = 3317
    ActiveWindow.ScrollRow = 3076
    ActiveWindow.ScrollRow = 2521
    ActiveWindow.ScrollRow = 2298
    ActiveWindow.ScrollRow = 2113
    ActiveWindow.ScrollRow = 1724
    ActiveWindow.ScrollRow = 1372
    ActiveWindow.ScrollRow = 1038
    ActiveWindow.ScrollRow = 872
    ActiveWindow.ScrollRow = 668
    ActiveWindow.ScrollRow = 538
    ActiveWindow.ScrollRow = 464
    ActiveWindow.ScrollRow = 446
    ActiveWindow.ScrollRow = 427
    ActiveWindow.ScrollRow = 409
    ActiveWindow.ScrollRow = 390
    ActiveWindow.ScrollRow = 353
    ActiveWindow.ScrollRow = 334
    ActiveWindow.ScrollRow = 297
    ActiveWindow.ScrollRow = 279
    ActiveWindow.ScrollRow = 242
    ActiveWindow.ScrollRow = 223
    ActiveWindow.ScrollRow = 205
    ActiveWindow.ScrollRow = 168
    ActiveWindow.ScrollRow = 149
    ActiveWindow.ScrollRow = 112
    ActiveWindow.ScrollRow = 94
    ActiveWindow.ScrollRow = 57
    ActiveWindow.ScrollRow = 20
    ActiveWindow.ScrollRow = 1

    Selection.Sort Key1:=Sheets("Sheet1").Range("A1"), Order1:=xlAscending, Header:=xlGuess, _
    OrderCustom:=1, MatchCase:=False, Orientation:=xlTopToBottom, _
    DataOption1:=xlSortNormal

    '~~> Delete duplicates
    For rowCount = 10000 To 2 Step -1
        Sheets("Sheet1").Range("A" & rowCount).Select
        If Range("A" & rowCount).Value = Range("A" & rowCount - 1).Value Then
            Sheets("Sheet1").Rows(rowCount).Delete shift:=xlUp
        End If
    Next rowCount
End Sub 
```

上式可以写成

```
'~~> This procedure fills Excel's 10000 cells with random values and then removes the duplicates
Sub FillExcelCells()
    Dim rowCount As Long

    With Sheets("Sheet1")
        '~~> Loop through all the cells and store random numbers
        For rowCount = 1 To 10000
            .Range("A" & rowCount).Value = Int((10000 - 1) * Rnd() + 1)
        Next rowCount

        '~~> Sort Range
        .Range("A1:A10000").Sort Key1:=.Range("A1"), Order1:=xlAscending, Header:=xlGuess, _
        OrderCustom:=1, MatchCase:=False, Orientation:=xlTopToBottom, DataOption1:=xlSortNormal

        '~~> Delete duplicates
        For rowCount = 10000 To 2 Step -1
            If .Range("A" & rowCount).Value = .Range("A" & rowCount - 1).Value Then
                .Rows(rowCount).Delete shift:=xlUp
            End If
        Next rowCount
    End With
End Sub 
```

**3）**声明你的对象，这样你就不必继续重复它们。看这个例子

```
Sub Sample()
    Range("A1").Select
    ActiveCell.FormulaR1C1 = "sdasds"
    Range("A1").Select
    With Selection.Interior
        .Pattern = xlSolid
        .PatternColorIndex = xlAutomatic
        .Color = 65535
        .TintAndShade = 0
        .PatternTintAndShade = 0
    End With
    Selection.Font.Bold = True
    Selection.Font.Italic = True
    Selection.Font.Underline = xlUnderlineStyleSingle
    With Selection
        .HorizontalAlignment = xlGeneral
        .VerticalAlignment = xlBottom
        .WrapText = True
        .Orientation = 0
        .AddIndent = False
        .IndentLevel = 0
        .ShrinkToFit = False
        .ReadingOrder = xlContext
        .MergeCells = False
    End With
End Sub 
```

这可以写成

```
Sub Sample()
    Dim ws As Worksheet, rng As Range

    Set ws = Sheet1

    Set rng = ws.Range("A1")

    With rng
        .FormulaR1C1 = "sdasds"
        With .Interior
            .Pattern = xlSolid
            .PatternColorIndex = xlAutomatic
            .Color = 65535
            .TintAndShade = 0
            .PatternTintAndShade = 0
        End With
        .Font.Bold = True
        .Font.Italic = True
        .Font.Underline = xlUnderlineStyleSingle
        .HorizontalAlignment = xlGeneral
        .VerticalAlignment = xlBottom
        .WrapText = True
        .Orientation = 0
        .AddIndent = False
        .IndentLevel = 0
        .ShrinkToFit = False
        .ReadingOrder = xlContext
        .MergeCells = False
    End With
End Sub 
```

**4）**如果需要，打破你的程序。并从第一个调用第二个程序

**5)**避免使用`.Select`and`.Activate`它们不仅会使你的代码变慢，而且如果广泛使用它们也会在你的代码中占用大量空间。[如何避免在 Excel VBA 宏中使用 Select](https://stackoverflow.com/questions/10714251/how-to-avoid-using-select-in-excel-vba-macros)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-10T00:30:13.253

宏大小限制为 64kb，之后您会从 Excel 中收到一条错误消息。

我遇到了一个问题，没有来自 Excel 的解释或错误消息，当我编写一个调用多个其他宏的宏时，Excel 无法完全计算工作簿的资源不足。

我假设需要考虑链中所有宏的长度总和。

# map - 尝试获取地理位置时找不到提供商

> ID：11450240
> 
> 赞同：0
> 
> 时间：2012-07-12T10:50:27.423
> 
> 标签：map, android-logcat

我正在尝试在 android 上制作地理定位代码。即使我在模拟器中得到结果，我也会在 logcat 窗口中收到以下错误。

```
07-12 10:45:24.300: E/ActivityThread(237): Failed to find provider info for com.google.settings
07-12 10:45:24.310: E/ActivityThread(237): Failed to find provider info for com.google.settings
07-12 10:45:24.371: E/ActivityThread(237): Failed to find provider info for com.google.settings 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:06:33.440

您可能没有授予应用程序访问这些提供程序的权限。

我不知道您的实现，因为您没有提供任何代码，但我认为您可能需要互联网、粗略位置和精细位置。我添加了一些额外的以防万一：

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />
<uses-permission android:name="android.permission.CONTROL_LOCATION_UPDATES" />
<uses-permission android:name="android.permission.INTERNET" /> 
```

将这些放在清单文件中，就在`<application ..>`标签之前。

如果您使用的是地图，请确保它在您的`<application ..>`标签内：

```
<uses-library android:name="com.google.android.maps" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T01:45:08.103

它有点工作，但现在我有以下错误：

07-13 01:37:07.171: E/QemuSensors(333): data_poll *: len=-1, errno=9: 错误文件号 07-13 01:37:07.171: E/QemuSensors(333):* data_poll: len=-1, errno=9: 错误文件号 07-13 01:37:07.211: E/QemuSensors(333): data_poll *: len=-1, errno=9: 错误文件号 07-13 01:37: 07.211: E/QemuSensors(333):* data_poll: len=-1, errno=9: 错误文件号 07-13 01:37:07.211: E/QemuSensors(333): data_poll *: len=-1, errno= 9: 错误文件号 07-13 01:37:07.211: E/QemuSensors(333): data* _poll: len=-1, errno=9: 错误文件号 07-13 01:37:07.511: E/QemuSensors(333 ): data_poll *: len=-1, errno=9: Bad file number 07-13 01:37:07.646: E/QemuSensors(333): data* _poll: len=-1, errno=9: Bad file number 07- 13 01:37:07.646：E/QemuSensors（333）：data_*poll: len=-1, errno=9: 错误文件号 07-13 01:37:07.661: E/QemuSensors(333): data* _poll: len=-1, errno=9: 错误文件号 07-13 01: 37:07.661: E/QemuSensors(333): data_poll *: len=-1, errno=9: 错误文件号 07-13 01:37:07.670: E/QemuSensors(333):* data_poll: len=-1, errno=9: 错误的文件号

这是代码

```
 package com.android.map;

    import android.location.Location;
    import android.location.LocationListener;
    import android.location.LocationManager;
    import android.os.Bundle;
    import android.view.KeyEvent;
    import android.widget.Toast;

    import com.google.android.maps.GeoPoint;
    import com.google.android.maps.MapActivity;
    import com.google.android.maps.MapController;
    import com.google.android.maps.MapView;
    import com.google.android.maps.MyLocationOverlay;

     public class HelloGoogleMapActivity extends MapActivity implements LocationListener
     {

 private MapView mapView = null;
 private LocationManager lm = null;
 private double lat = 0;
 private double lng = 0;
 private MapController mc = null;
 private MyLocationOverlay myLocation = null;

@Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);          
    mapView = (MapView) this.findViewById(R.id.mapView);
    mapView.setBuiltInZoomControls(true);

    lm = (LocationManager) this.getSystemService(LOCATION_SERVICE);
    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 10000, 0, this);
    lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 10000, 0, this);

    mc = mapView.getController();
    mc.setZoom(12);
    myLocation = new MyLocationOverlay(getApplicationContext(),mapView); 
    myLocation.runOnFirstFix(new Runnable(){
     public void run(){
         mc.animateTo(myLocation.getMyLocation());
         mc.setZoom(17);
     }
    });

    mapView.getOverlays().add(myLocation);
    myLocation.enableMyLocation();
    myLocation.enableCompass();
}

@Override
protected boolean isRouteDisplayed()
{
    return false;
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event)
{
    if (keyCode == KeyEvent.KEYCODE_S)
    {
        mapView.setSatellite(!mapView.isSatellite());
        return true;
    }
    return super.onKeyDown(keyCode, event);
}

@Override
public void onLocationChanged(Location location) {
    // TODO Auto-generated method stub
    lat = location.getLatitude();
     lng = location.getLongitude();
     Toast.makeText(getBaseContext(),
     "Location change to : Latitude = " + lat + " Longitude = " + lng,
     Toast.LENGTH_SHORT).show();
     GeoPoint p = new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6));
     mc.animateTo(p);
     mc.setCenter(p);
}

@Override
public void onProviderDisabled(String arg0) {
    // TODO Auto-generated method stub

}

@Override
public void onProviderEnabled(String arg0) {
    // TODO Auto-generated method stub

}

@Override
public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
    // TODO Auto-generated method stub

} 
```

}

谢谢你的帮助

# php - PHP中文件的错误处理

> ID：11450241
> 
> 赞同：0
> 
> 时间：2012-07-12T10:50:33.610
> 
> 标签：php, zend-framework, error-handling

PHP中文件的错误处理

```
$path = '/home/test/files/test.csv';
fopen($path, 'w') 
```

在这里，我想通过在“未找到文件或目录”和“没有创建文件的权限”上抛出异常来添加错误处理。

我正在使用 Zend 框架。

通过使用**fopen**和**写入**模式，我可以创建一个文件。但是当对应的文件夹不存在时如何处理呢？
即如果`files`文件夹不存在于根结构中。

不允许创建文件的权限时如何抛出异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T11:03:10.050

这样的事情应该让你开始。

```
function createFile($filePath)
{
  $basePath = dirname($filePath);
  if (!is_dir($basePath)) {
    throw new Exception($basePath.' is an existing directory');
  }
  if (!is_writeable($filePath) {
    throw new Exception('can not write file to '.$filePath);
  }
  touch($filePath);
} 
```

然后打电话

```
try {
  createFile('path/to/file.csv');
} catch(Exception $e) {
  echo $e->getMessage();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:53:33.653

我建议，你看看这个链接：[http](http://www.w3schools.com/php/php_ref_filesystem.asp) ://www.w3schools.com/php/php_ref_filesystem.asp 特别是方法`file_exists`和`is_writable`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T10:53:54.390

像这样：

```
try
{
  $path = '/home/test/files/test.csv';
  fopen($path, 'w')
}
catch (Exception $e)
{
  echo $e;
} 
```

PHP 将在那里出现`echo` *任何错误。*

* * *

虽然您也可以使用`is_dir`or`is_writable`函数分别查看文件夹是否存在并具有权限：

```
is_dir(dirname($path)) or die('folder doesnt exist');
is_writable(dirname($path)) or die('folder doesnt have write permission set');
// your rest of the code here now... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T11:15:33.670

> 但是当对应的文件夹不存在时如何处理呢？

当文件夹不存在时..尝试创建它！

```
$dir = dirname($file);
if (!is_dir($dir)) {
    if (false === @mkdir($dir, 0777, true)) {
        throw new \RuntimeException(sprintf('Unable to create the %s directory', $dir));
    }
} elseif (!is_writable($dir)) {
    throw new \RuntimeException(sprintf('Unable to write in the %s directory', $dir));
}

// ... using file_put_contents! 
```

# c# - LINQ如何使用In与数字？

> ID：11450244
> 
> 赞同：0
> 
> 时间：2012-07-12T10:50:47.250
> 
> 标签：c#, .net, linq, entity-framework

我有一个简单的 LINQ 查询，我想在其中实现类似 SQL`in`的功能。我发现谷歌搜索`Contains(string[])`是这个的替代品。

请指导我如何`in`在 LINQ where 子句中使用类似的功能`int`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T10:53:40.390

您仍然可以使用包含。假设您有一个产品类，例如：

```
class Product
{
    public int ID { get; set; }
    public string Name { get; set; }
} 
```

和几个元素：

```
 static void Main(string[] args)
        {
            int[] productList = new int[] { 1, 2, 3, 4 };
            List<Product> products = new List<Product>();
            products.Add(new Product { ID = 1, Name = "Test" });
            products.Add(new Product { ID = 2, Name = "Test" });
            products.Add(new Product { ID = 6, Name = "Test" }); 
```

然后你可以这样做：

```
 var myProducts = from p in products
                         where productList.Contains(p.ID)
                         select p; 
```

这将为您提供 ID 为 1 和 2 的两个项目，而不是 ID 为 6 的项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:58:50.233

使用 Contains(int[]) 与使用 Contains(string[]) 相同。这是一个平等问题，而不是类型问题。

为了提高性能，请尝试使用[ToLookup](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.tolookup.aspx)。

# c - C 结构数组输入

> ID：11450250
> 
> 赞同：1
> 
> 时间：2012-07-12T10:50:57.437
> 
> 标签：c, printf, scanf, gets, puts

我有以下结构

```
typedef char String[256];

typedef struct
{
    String name;
    int year;
    float price;
} Book; 
```

书籍阵列

```
int main(int argc, const char * argv[])
{    
    Book books[5];

    for (int i=0; i<5; i++) {
        books[i] = inputBook();
    }

    return 0;
} 
```

inputBook() 函数

```
Book inputBook()
{
    Book myBook;

    //Name
    puts("Enter Book Name:");
    gets(myBook.name);

    //Publishing Year
    puts("Enter Book Publishing Year:");
    scanf("%i", &myBook.year);

    //Price
    puts("Enter Book Price:");
    scanf("%f", &myBook.price);

    return myBook;
} 
```

由于某种原因，第一本书的输入进展顺利，但是当尝试输入第二本书和第二次调用`inputBook()`我可以设置书名时，它会直接跳转到年份导入。

问题是什么 ？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T11:06:00.420

要更正，请替换：

```
gets(myBook.name); 
```

和：

```
scanf("%255s", myBook.name); /* 255 as name is 256 chars. */ 
```

as`scanf()`将跳过任何空白字符，但`gets()`不会。`stdin`换行符被认为是一个空白字符，并且在输入之后会有一个换行符，`price`导致`gets()`读取换行符并且实际上什么也没读。

值得一读：[警告：gets 函数很危险](https://stackoverflow.com/questions/2843073/warninggets-function-is-dangerous)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T10:58:12.113

这是因为变量 myBook 仅在 inputBook 范围内有效，并且在函数退出时立即销毁。

您应该将要初始化的书籍项目作为函数的参数传递。

函数输入书（）...

```
void inputBook(Book *ptBook )
{
    if( ptBook==NULL )
        return;

    //Name
    puts("Enter Book Name:");
    gets(ptBook->name);

    //Publishing Year
    puts("Enter Book Publishing Year:");
    scanf("%i", &ptBook->year);

    //Price
    puts("Enter Book Price:");
    scanf("%f", &ptBook->price);
} 
```

主要功能...

```
int main(int argc, const char * argv[])
{    
    Book books[5];

    for (int i=0; i<5; i++) {
        inputBook( &books[i] );
    }

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T11:04:05.043

我认为您需要在下一次迭代之前刷新标准输入。您的标准输入流中有 orevious CRLF。

使用 fflush(stdin); 在循环的开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T10:57:01.443

也许您可以在输入之前尝试 fflush(stdin) 。

```
Book inputBook()
{
    Book myBook;

    fflush(stdin);

    // rest of the code
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T12:10:47.827

```
#include <stdio.h>

typedef char String[256];

typedef struct
{
    String name;
    int year;
    float price;
    } Book;
Book inputBook()
{
    Book myBook;

    //Name
    puts("Enter Book Name:");
    getchar();
    gets(myBook.name);

    //Publishing Year
    puts("Enter Book Publishing Year:");
    scanf("%i", &myBook.year);

    //Price
    puts("Enter Book Price:");
    scanf("%f", &myBook.price);

    return myBook;
}
int main(int argc, const char * argv[])
{
    Book books[5];

int i = 0; for (i=0; i<5; i++) {
    books[i] = inputBook();
}

return 0;
} 
```

# objective-c - 覆盖 initWithCoder 时的无限循环

> ID：11450258
> 
> 赞同：14
> 
> 时间：2012-07-12T10:51:39.787
> 
> 标签：objective-c, ios, ios5, interface-builder, storyboard

我有`UIViewController`一些控制器和一些视图。其中两个视图（网格单元）是其他 nib。我有从网格单元到文件所有者的出口，但它们不会自动加载。

所以我尝试覆盖`GridCell.m`. `initWithCoder`这将启动一个无限循环。

我知道可以`initWithFrame`从代码中覆盖和添加子视图，但这不是我想要的。我希望能够在 Interface Builder 中移动视图并让 Xcode 使用正确的框架初始化视图。

我该如何实现这一目标？

**编辑 1**

我正试图在亚历山大的帮助下让它工作。这就是我现在设置它的方式：MainView 具有 UIView，其自定义类设置为 GridCell。它在 MainView/File's Owner 中有一个出口。

![图一](../Images/0c21cce84b3c407f418660400cd7b45a.png)

从 GridCell.m 中删除所有初始化代码并为我的自定义类设置一个出口

![图二](../Images/12d1d5204607ae7fc04d1bf363ce90d7.png)

![图 3](../Images/b965bcd942cb4f8599a157a8f1630a48.png)

MainView 仍然不显示 GridCell。没有错误，只是一个孤独的、空白的地方，红色开关应该在的地方。我究竟做错了什么？

我非常接近以编程方式执行此操作。不过，我很想用笔尖学习如何做到这一点。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-31T15:33:12.090

加载 nib 会导致再次调用 initWithCoder，因此如果子类当前没有任何子视图，您只想这样做。

```
-(id)initWithCoder:(NSCoder *)aDecoder {
    self = [super initWithCoder:aDecoder];
    if (self) {
        if (self.subviews.count == 0) {
            UINib *nib = [UINib nibWithNibName:NSStringFromClass([self class]) bundle:nil];
            UIView *subview = [[nib instantiateWithOwner:self options:nil] objectAtIndex:0];
            subview.frame = self.bounds;
            [self addSubview:subview];
        }
    }
    return self;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-12T11:22:54.870

加载一个笔尖会导致相应的所有者在一个

```
 -(id) initWithCoder:(NSCoder *) coder; 
```

称呼

因此，您在此方法中的代码：

```
self = [[[NSBundle mainBundle] loadNibNamed: @"GridCell"
owner: self
options: nil] objectAtIndex:0]; 
```

将再次调用 initWithCoder 方法。那是因为您尝试再次加载笔尖。如果你定义一个自定义 UIView 并创建一个 nib 文件来布置它的子视图，你不能只是将一个 UIView 添加到另一个 nib 文件，将 IB 中的类名更改为你的自定义类并期望 nib 加载系统能够解决它。您可以执行以下操作：

您的自定义视图的 nib 文件需要将“文件的所有者”类设置为您的自定义视图类，并且您需要在自定义类中有一个名为“toplevelSubView”的插座连接到您的自定义视图 nib 文件中的视图，该视图充当所有子视图的容器。向您的视图类添加额外的出口并将子视图连接到“文件所有者”（您的自定义 UIView）。（见[https://stackoverflow.com/a/7589220/925622](https://stackoverflow.com/a/7589220/925622)）

**编辑** 好的，要回答您编辑的问题，我将执行以下操作：

转到要包含自定义视图的 nib 文件，并使用它的 nib 文件对其进行布局。不要进入自定义视图 (GridCell) 本身，而是创建一个包含网格单元格的视图（例如，gridCellContainer，但它应该是 UIView） 在自定义视图中自定义 initWithFrame 方法，就像在 initWithCoder 中所做的那样：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"GridCell" owner:self options:nil];    
        self = [nib objectAtIndex:0];
        self.frame = frame;
    }
    return self;
} 
```

然后，在 viewController 中，它是要包含自定义视图（具有 gridCellContainer 视图的视图）的视图的 fileOwner，在 viewDidLoad 中执行此操作，例如

```
//...
GridCell *gridCell = [[GridCell alloc] initWithFrame:self.viewGridCellContainer.bounds];
[self.viewGridCellContainer addSubview:gridCell]; 
```

现在一切都应该按您的预期工作

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-25T00:03:53.740

文件的**所有者不会接到电话**

```
 -(id) initWithCoder:(NSCoder *) coder; 
```

加载 xib 时。

但是，**该 xib 中定义的每个视图都会调用**

```
-(id) initWithCoder:(NSCoder *) coder; 
```

加载 xib 时。

如果您在 xib 中定义了 UIView 的子类（即 GridCell），并且还尝试在子类的 initWithCoder 中加载相同的 xib，您将最终陷入无限循环。**但是，我看不到用例会是什么。**

通常，您在一个 xib 中设计 UIView 的子类（即 GridCell），然后在视图控制器的 xib 中使用该子类。

此外，看不到您的自定义视图将在其 initWithCoder 中包含子视图的用例，即

```
-(id)initWithCoder:(NSCoder *)aDecoder {
    self = [super initWithCoder:aDecoder];
    if (self) {
        if (self.subviews.count == 0) {
            UINib *nib = [UINib nibWithNibName:NSStringFromClass([self class]) bundle:nil];
            UIView *subview = [[nib instantiateWithOwner:self options:nil] objectAtIndex:0];
            subview.frame = self.bounds;
            [self addSubview:subview];
        }
    }
    return self;
} 
```

除非您希望能够在其他一些 xib 中按需覆盖其视图层次结构。哪个 IMO 假定一个外部依赖项（即在另一个 xib 中定义的层次结构）并且有点违背了首先拥有可重用 UIView 的目的。

请记住，在加载 xib 时，将实例作为文件的所有者传递，将设置其所有 IBOutlet(s)。在这种情况下，您将用 GridCell.xib 中的任何根视图替换 self（即 GridCell），从而在此过程中丢失所有 IBOutlet 连接。

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"GridCell" owner:self options:nil];    
        self = [nib objectAtIndex:0];
        self.frame = frame;
    }
    return self;
} 
```

有一篇关于“[如何实现可重用的 UIView](http://qnoid.com/2013/03/20/How-to-implement-a-reusable-UIView.html) ”的更详细的帖子。它也更详细地介绍了一些内容，并希望能把事情弄清楚。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T11:07:40.010

loadNibNamed:: 将调用 initWithCoder:

你为什么不遵循这个模式？

```
-(id)initWithCoder:(NSCoder *)coder
{

    if (self = [super initWithcoder:coder]) {

       // do stuff here ... 

    }

    return self;                 
} 
```

做`[super initWithcoder:coder]`你想避免的事情吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T11:32:19.070

当我尝试覆盖`initWithsomething`方法时，我遇到了同样的问题，我们需要

```
-(id)initWithsomething:(Something *)something
{
    if (self = [super initWithsomething:something]) {
       // do stuff here ... 
    }

    return self; 
} 
```

反而

```
-(id)initWithsomething:(Something *)something
{
    if (self = [super init]) {
       // do stuff here ... 
    }

    return self;
} 
```

# javascript - 附加名称后获取字符串长度

> ID：11450259
> 
> 赞同：0
> 
> 时间：2012-07-12T10:51:45.177
> 
> 标签：javascript

如果我向字符串名称添加一个值，我想获取字符串的长度而不是字符串名称的长度。

```
var wordlist3 = "ABC";
var xc = 3;
var num_words = ('wordlist' + xc).length; 
```

使用上面的代码，当 wordlist3.length 应该是 3 时，我得到了 9。我如何附加一个字符串名称，以便它引用 wordlist3 中字符串的长度，而不使其成为全局变量？

我期待答案：

```
num_words = 3 
```

不是

```
num_words = 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:54:32.310

最好的方法是将您的单词列表放入数组中。

```
var wordlist = [];
wordlist[0] = 'ABC';
wordlist[0].length;//3 
```

如果它在正确的范围内，您也可以使用窗口对象来获取它

```
window['wordlist' + xc].length;//gives 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:54:35.573

为此使用它：

```
eval('wordlist' + xc).length; 
```

# android - 亚马逊应用商店如何知道哪个设备安装了应用程序？

> ID：11450261
> 
> 赞同：0
> 
> 时间：2012-07-12T10:51:50.167
> 
> 标签：android, amazon

对于为亚马逊应用商店及其应用内购买制作应用程序，我并不陌生。

我的问题是这样的：

我的应用程序具有亚马逊应用内购买功能。现在一切正常，但我想知道亚马逊如何知道哪个设备安装了应用程序。他们是获取设备 ID，还是通过 Amazon ID 知道？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:05:18.340

据我所知，这将是亚马逊 ID，因此用户无需多次购买该应用程序。此外，如果它是按设备 ID 完成的，比如 mac 代码，那么只有一个人可以在亚马逊商店中使用该设备。

# javascript - 使用 ajax 将数据发布到另一个域

> ID：11450262
> 
> 赞同：-1
> 
> 时间：2012-07-12T10:51:52.970
> 
> 标签：javascript, jquery, json, ajax, cross-domain

我需要使用 ajax 将一些 json 数据发布到外部（另一个域）API，如果成功应该返回一些 json 数据。

此 API 不支持 GET，仅支持 POST，我无法控制它，这意味着我无法执行 JSONP 或启用 CORS。

知道如何绕过跨域限制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T10:52:58.140

将数据发布到您自己的服务器。从您的服务器向 API 发出 HTTP 请求。转发响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T10:57:23.957

您必须使用代理页面：您将 ajax 帖子发送到代理页面，该代理页面必须位于同一域中，并且代理页面将负责将数据发布到最终目的地。

一个 php 示例：http: [//jquery-howto.blogspot.it/2009/04/cross-domain-ajax-querying-with-jquery.html](http://jquery-howto.blogspot.it/2009/04/cross-domain-ajax-querying-with-jquery.html)

Java 示例：[http ://snipplr.com/view/17987/](http://snipplr.com/view/17987/)

# asp.net-mvc - 动态 Telerik TabStrip

> ID：11450265
> 
> 赞同：0
> 
> 时间：2012-07-12T10:52:10.683
> 
> 标签：asp.net-mvc, dynamic, tabs, telerik, strip

我正在开发一个动态 Telerik Tab Strip。

每个选项卡都有一个网格，我需要将一个参数传递给操作以过滤我的模型，但该参数始终为空。

看法：

```
 @{ Html.Telerik().TabStrip()
            .Name("TabStripDetailArticle")
            .Items(tabstrip =>
                {

        //Know how Many Zones are there
            var zones = Model.Articles.GroupBy(e => e.Zone);

        //For each Zone I need a Tab,
                foreach (var inZone in zones)
                {
                    tabstrip.Add()
                        .Text(inZone.Key)
                        .Content(() =>
                                     {
                    //On each tab there's a Grid and I need to pass the zone to filter my model.
                                         @Html.Action("TabStripSelected", Controllers.Valoration, new { idZone = inZone.Key });
                                     });
                 }

        }
        )

        .SelectedIndex(0)
        .Render();
} 
```

控制器：

```
 public ActionResult TabStripSelected(string idZone)
    {

       return PartialView("_GridArticlesByZone",CurrentHvm.Articles.Where(e => e.Zone == idZone));

    } 
```

我想知道是否有另一种方法可以做到这一点，或者我是否遗漏了什么。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T08:30:20.253

我发现了问题！:)

控制器：

```
 foreach (var inZone in zones)
                {
                     //!! Missing!
                    **IGrouping<string, Article> zone = inZone;**
                    tabstrip.Add()
                        .Text(inZone.Key)
                        .Content(() =>
                                     {
                                         @Html.Action("TabStripSelected", Controllers.Valoration, new { id = **zone.Key** });
                                     });
                 } 
```

谢谢！

# glassfish-3 - 安装玻璃鱼 3.1.2 时出现 Java 路径错误

> ID：11450269
> 
> 赞同：7
> 
> 时间：2012-07-12T10:52:27.633
> 
> 标签：glassfish-3

我在我的服务器上安装了 JDK 7 update 5（64 位）（服务器有 64 位 Windows 操作系统）。设置环境路径。当我做**java -version**。我得到了输出`java version 1.7_0_05`，但是当我尝试安装玻璃鱼时，我得到了错误`This application needs version 1.6 or higher of the Java (TM)2 Runtime Environment`。我已经在我的环境路径上设置了 JDK bin 文件夹和 JRE bin 文件夹。为什么我得到这个？

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-12T12:05:25.303

我没有更新环境变量，但我认为路径应该是 JDK 内部的 JRE，就像我尝试过的那样，它有效

`D:\Basit>ogs-3.1.2-windows.exe -j "c:\Program Files\Java\jdk1.7.0_05\jre"`.

希望这个答案也能帮助其他人。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-03T12:26:34.400

1.  打开 cmd 确保你 cd 到你 glassfish 安装文件的路径：cd C:\Users\John\Downloads

2.  找到应该在 jdk1.7x 中的 jre 文件：C:\Program Files\Java\jdk1.7.0_11\jre

3.  在 cmd 中粘贴： glassfish-3.1.2.2-windows.exe -j "C:\Program Files\Java\jdk1.7.0_11\jre"

确保您拥有正确的版本

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-11-03T12:10:00.200

就我而言，问题是“程序文件”中的一个空格（是的，我设置了 JAVA_HOME）您可以从 cmd 运行安装并进行论证（不要忘记引号） -j "c:/.../java path" 示例从我的情况来看：

> c:\Users\Kryst\Downloads>glassfish-4.0-web-windows.exe -j "C:\Program Files\Java\jdk1.7.0_ 79\jre"

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-22T07:28:40.967

固定的。

*   Java版本 > Java v1.6
*   打开下载的文件夹并选择shift+右键单击+open-command-window-here
*   输入下载文件的确切文件名 -j 和 JRE 路径

就我而言

*   ogs-3.1.2.2-windows.exe -j "c:\Java\jdk1.8.0_31\jre

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T10:55:15.453

尝试将 JAVA_HOME 环境变量设置为 JDK 根文件夹。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-04T06:43:39.783

或者只需下载一个捆绑包，例如[http://netbeans.org/downloads/](http://netbeans.org/downloads/)，然后单击 Java EE 或 ALL 类别

# android - 使用新的 Google Cloud Messaging 的 Flash Air ANE 推送通知

> ID：11450273
> 
> 赞同：1
> 
> 时间：2012-07-12T10:52:48.850
> 
> 标签：android, push, air-native-extension, google-cloud-messaging

我尝试使用此 ANE 注册到新 GCM： [https](https://github.com/freshplanet/ANE-Push-Notification) ://github.com/freshplanet/ANE-Push-Notification iOS 推送正常，但 Android 版本冻结并显示此跟踪消息：无法识别的事件注册

## 这是我的 xml 描述符：

```
<?xml version="1.0" encoding="utf-8" standalone="no"?>
<application xmlns="http://ns.adobe.com/air/application/3.2">
    <id>com.arthesis.xxxxxxxx</id>
<filename>testPushNotification</filename>
<name>testPushNotification</name>
<versionNumber>1.0</versionNumber>
<initialWindow>
    <content>xxxxxxxx.swf</content>
    <autoOrients>false</autoOrients>
    <fullScreen>true</fullScreen>
    <visible>true</visible>
    <renderMode>auto</renderMode>
    <aspectRatio>landscape</aspectRatio>
</initialWindow>
<icon>
    <image48x48>icones/icon-48.png</image48x48>
    <image72x72>icones/icon-72.png</image72x72>
</icon>
<iPhone>
    <InfoAdditions><![CDATA[<key>UIDeviceFamily</key><array><string>1</string><string>2</string></array>]]></InfoAdditions>
    <requestedDisplayResolution>high</requestedDisplayResolution>
    <Entitlements><![CDATA[
            <key>get-task-allow</key>
            <false/>
            <key>aps-environment</key>
            <string>production</string>
            <key>application-identifier</key>
            <string>XXXXXXXXX.com.arthesis.xxxxxxxx</string>
            <key>keychain-access-groups</key>
            <array>
                <string>XXXXXXXXX.*</string>
            </array>
        ]]></Entitlements>
</iPhone>
<android>
    <manifestAdditions><![CDATA[<manifest android:installLocation="auto">
        <uses-permission android:name="android.permission.INTERNET"/>
        <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
        <uses-permission android:name="android.permission.READ_PHONE_STATE"/>
        <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
        <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
        <uses-permission android:name="android.permission.CAMERA"/>
        <uses-permission android:name="android.permission.RECORD_AUDIO"/>
        <uses-permission android:name="android.permission.DISABLE_KEYGUARD"/>
        <uses-permission android:name="android.permission.WAKE_LOCK"/>
        <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
        <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>

        <!-- Only this application can receive the messages and registration result --> 
        <permission android:name="air.com.arthesis.xxxxxxxx.debug.permission.C2D_MESSAGE" android:protectionLevel="signature" />
        <uses-permission android:name="air.com.arthesis.xxxxxxxx.debug.permission.C2D_MESSAGE" />

        <!-- This app has permission to register and receive message -->
        <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />

        <application>
            <!-- Only C2DM servers can send messages for the app. If permission is not set - any other app can generate it -->
            <receiver android:name="com.arthesis.xxxxxxxx.C2DMBroadcastReceiver"
                android:permission="com.google.android.c2dm.permission.SEND">

                <intent-filter>
                    <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                    <category android:name="air.com.arthesis.xxxxxxxx.debug" />
                </intent-filter>

                <intent-filter>
                    <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
                    <category android:name="air.com.arthesis.xxxxxxxx.debug" />
                </intent-filter>

            </receiver>
        </application>

        </manifest>]]></manifestAdditions>
</android>
<supportedLanguages>fr</supportedLanguages>
<versionLabel></versionLabel>
<extensions>
    <extensionID>com.freshplanet.AirPushNotification</extensionID>
</extensions> 
```

## 

应用程序是使用 Flash Pro CS6 构建的。

谁来帮帮我 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T08:14:49.037

他们肯定需要为您更新扩展。有一些微妙的变化。如果您有兴趣，我们刚刚[在此处更新了我们的 distriqt 原生扩展包。](http://labs.distriqt.com/post/1214)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T10:57:40.790

这意味着他们仍在使用 C2DM 并且 android 已停止接受新的 C2DM 注册。

您需要等到freshplanet 为GCM 构建一个解决方案。

我希望你明白。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-02-20T08:22:05.093

[您可以使用我在 Git hub 上的示例](https://github.com/VishnuGShephertz/App42-Push-Notification-on-Flash-Android)轻松地将推送通知集成到您的 Android Flash 应用程序中，按照自述文件中编写的步骤进行操作

# python - 具有多个参数的复杂排序？

> ID：11450277
> 
> 赞同：6
> 
> 时间：2012-07-12T10:53:00.257
> 
> 标签：python

我有一个元组列表：

```
li = [('fink', 3), ('flip', 3), ('flock', 4), ('foo', 12), ('foot', 20), ('football', 20), ('futz', 10), ('flip', 3), ('flank', 3), ('flop', 3)] 
```

如何先按下降号对列表进行排序，然后按字母顺序降序？结果将是：

```
('foot', 20)
('football', 20)
('foo', 12)
('futz', 10)
('flock', 4)
('fink', 3)
('flip', 3)
('flake', 3)
('flop', 3)

from operator import itemgetter

sorted_li = sorted(li, key=itemgetter(1,0), reverse=True) 
```

虽然上面的代码正确地按数字降序排序，但单词没有按字母顺序排序。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T10:55:00.147

这对于单个`itemgetter`. 改用`lambda`：

```
sorted_li = sorted(li, key=lambda x: (-x[1], x[0])) 
```

它的速度与使用 的两个连续排序大致相同`itemgetter`，但它的代码更少并且可能更具可读性。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-12T10:54:56.840

由于 Python 的排序是稳定的，所以最容易排序两次：

```
sorted_li  = sorted(li, key=itemgetter(1), reverse=True)
sorted_li.sort(key=itemgetter(0)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-10T22:48:49.017

由于 Python 的排序是稳定的，所以最容易排序两次：

```
sorted_li  = sorted(li, key=itemgetter(0))
sorted_li.sort(key=itemgetter(1), reverse=True) 
```

但请注意，您必须首先使用您的最低优先级顺序，然后其他基于优先级。最高优先级的顺序必须是最后一个。当您尝试使用 Sorted 功能时，这是您必须考虑的最重要的事情。

# python - 如何使用 repoze.who（和 bottle.py）处理注销？

> ID：11450282
> 
> 赞同：4
> 
> 时间：2012-07-12T10:53:19.453
> 
> 标签：python, bottle, repoze.who

我正在尝试让bottle.py 与repoze.who 一起工作，到目前为止，我已经设法组合了以下非常简单的程序来使其工作，并结合了我找到的各种示例。显然这不是我在生产中运行的东西，我只是想尽可能地制作最简单的代码，以便我可以学习如何使用它 - 但不幸的是，使用 bottle.py 和 repoze.who 的教程是很少而且相差甚远。

下面的示例有效，并允许某人使用 admin/admin 的用户名/密码登录。我应该如何处理 repoze.who 以使 logout() 函数工作？我收集了一个可能用于此目的的忘记功能，但我无法弄清楚我应该如何调用它。

谢谢。

```
from bottle import route, run, app, get, abort, request

from StringIO import StringIO
import repoze
from repoze.who.middleware import PluggableAuthenticationMiddleware
from repoze.who.interfaces import IIdentifier
from repoze.who.interfaces import IChallenger
from repoze.who.plugins.basicauth import BasicAuthPlugin
from repoze.who.plugins.auth_tkt import AuthTktCookiePlugin
from repoze.who.plugins.cookie import InsecureCookiePlugin
from repoze.who.plugins.form import FormPlugin
from repoze.who.plugins.htpasswd import HTPasswdPlugin
from repoze.who.classifiers import default_request_classifier
from repoze.who.classifiers import default_challenge_decider    

import logging, sys
import pprint

@route('/')
def root():
    if request.environ.get('repoze.who.identity') is None:
        abort(401, "Not authenticated")
    return "Authenticated"

@route('/hello')
def index():
    identity = request.environ.get('repoze.who.identity')
    if identity == None:
        abort(401, "Not authenticated")

    user = identity.get('repoze.who.userid')
    return '<b>Hello %s!</b>' % user

@route('/logout')
def logout():
    # I have no idea what to put here
    pass

io = StringIO()
salt = 'aa'

for name, password in [ ('admin', 'admin'), ('paul', 'paul') ]:
    io.write('%s:%s\n' % (name, password))
io.seek(0)

def cleartext_check(password, hashed):
    return password == hashed

htpasswd = HTPasswdPlugin(io, cleartext_check)
basicauth = BasicAuthPlugin('repoze.who')
auth_tkt = AuthTktCookiePlugin('secret', 'auth_tkt')
form = FormPlugin('__do_login', rememberer_name='auth_tkt')
form.classifications = { IIdentifier:['browser'],
                         IChallenger:['browser'] }
identifiers = [('form', form),('auth_tkt',auth_tkt),('basicauth',basicauth)]
authenticators = [('htpasswd', htpasswd)]
challengers = [('form',form), ('basicauth',basicauth)]
mdproviders = []

log_stream = None
import os
if os.environ.get('WHO_LOG'):
    log_stream = sys.stdout

middleware = PluggableAuthenticationMiddleware(
    app(),
    identifiers,
    authenticators,
    challengers,
    mdproviders,
    default_request_classifier,
    default_challenge_decider,

    log_stream = log_stream,
    log_level = logging.DEBUG
    )

if __name__ == '__main__':
    run(app=middleware, host='0.0.0.0', port=8080, reloader=True)
else:
    application = middleware

run(host='0.0.0.0', port=8080) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T12:26:18.023

如果可以的话，我会使用`RedirectingFormPlugin`而不是`FormPlugin`. `RedirectingFormPlugin`允许您注册注销 URL。有了它，您不必为您实现`/logout`处理程序，例如`RedirectingFormPlugin`拦截请求并处理忘记的调用等。我已经将它与 Bobo 和 appengine 一起使用，并且效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T15:52:26.170

如果您仍然想在旧的 repoze.who v1 中以不受欢迎的方式进行操作，以下对我有用：

```
from bottle import response # , redirect
# ...
@route('/logout')
def logout():
    identity = request.environ.get('repoze.who.identity')
    if identity:
        for (i_name, i) in identifiers:
            hdrs = i.forget(request.environ, identity)
            [ response.add_header(*h) for h in hdrs ]
    ## following would be nice, but does not work,
    ## since redirect is not using defined response headers
    # rfr = request.get_header('referer', '/')
    # redirect(rfr)
    ## so we do just this:
    return "you have been hopefully logged out" 
```

# vbscript - 如何指示字符串是否具有数值

> ID：11450288
> 
> 赞同：6
> 
> 时间：2012-07-12T10:53:41.823
> 
> 标签：vbscript

我循环遍历`data`可能具有整数数值的字符串变量，例如`"123"`. 如果这个字符串变量有数值，我想指出它并考虑使用这样的：

```
If IsNumeric(CInt(data)) Then 
    WScript.Echo "Number"
Else
    WScript.Echo "String"
End If 
```

但`CInt()`每次`data`变量无法转换为整数时都会引发错误：

`Type mismatch: 'CInt'`

如何指示字符串在 vbscript 中是否具有整数值？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T11:21:38.080

[VB脚本的IsNumeric](http://msdn.microsoft.com/en-us/library/ehs9h2x9%28v=vs.84%29.aspx)函数可以用来判断一个表达式是否可以计算为一个数字。它根据表达式返回布尔值

请注意，如果表达式是日期表达式，则 IsNumeric 返回 False。

现在，在您的代码中，您误认为即使它不是数字，您也试图将其转换为整数

你可以像这样在你的代码中使用它——

```
If IsNumeric(data) Then       
   WScript.Echo "Number"
Else
   WScript.Echo "String"
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T11:13:18.937

仅适用于整数：

```
If VarType(data) = vbInteger Then
    WScript.Echo "Integer"
Else
    WScript.Echo "Something else"
End If 
```

对于数字：

```
If IsNumeric(data)
    WScript.Echo "Number"
Else
    WScript.Echo "string"
End If 
```

# python - 我应该如何在 Python 中使用 Mocks 进行测试？

> ID：11450292
> 
> 赞同：9
> 
> 时间：2012-07-12T10:53:59.450
> 
> 标签：python, unit-testing, mocking, tdd, python-mock

我可以看到两种不同的方法将模拟注入到我想要测试的 python 代码中：

1.  依赖注入：

    允许协作类传入被测对象的构造函数，并传入模拟对象（以及必要的工厂，如 Java）

2.  猴子补丁：

    使用模拟对象工厂将被测模块中的协作类存根（这样构建协作类实际上会创建一个模拟对象）。我不需要让它们通过构造函数注入或创建任何工厂。

[python 模拟库（例如mox](http://code.google.com/p/pymox/)或[mock](http://www.voidspace.org.uk/python/mock/) ）似乎支持这两种方法。我应该在 Python 中使用哪种方法，其中一种是明智的还是有更好的方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-04-10T15:30:29.897

*注意：这个问题的任何答案都将同样适用于传递其他类型的双打（模拟，假货，存根等）。*

关于这个话题有很多宗教信仰，所以这个问题的标准答案是：“做对你的应用程序实用的事情，并使用你的代码嗅觉。” 虽然我也倾向于拒绝非此即彼的方法，但这个答案让我觉得对任何真正提出这个问题的人（即我自己）本质上是无用的。这是我正在使用的决策过程，以及我在开发过程中所做的一些考虑：

## 事先评估

1.  你的代码能从更多的*函数式编程*中受益吗？如果您可以排除依赖项和副作用，则无需模拟任何内容。
2.  可以对单元进行有意义的单元测试吗？也许它需要重构，或者它只是无法进行有效单元测试的“胶水代码”（但*必须*由系统测试覆盖）。
3.  你*真的*需要模拟依赖吗？如果运行你的真实代码仍然允许你有意义地测试行为并且既不慢也不破坏性，让它运行。

## 模拟策略

*   **如果特定的依赖项对单元[至关重要](http://plato.stanford.edu/entries/essential-accidental/)**，请在产品中对其进行硬编码，并在测试中使用猴子补丁。
    *   *例外*：如果在测试中使用生产依赖项可能对您的系统有害，请将其作为位置参数注入。
    *   *例外*：如果猴子补丁存在应用在另一个单元的依赖项中的风险并且这是不可取的，则将其作为位置参数注入。
*   **如果同一类型的依赖项对单元至关重要，**则将其作为必需的位置参数注入。
*   **如果依赖项对单元不是必需的，**则将其作为可选的关键字参数注入。

* * *

# 术语

*依赖注入*：在 Python 的上下文中，这个术语通常特指[构造函数注入](http://en.wikipedia.org/wiki/Dependency_Injection#Constructor_injection)。

*Monkey Patching*：在运行时[将名称](http://nedbatchelder.com/text/names.html)（在被测代码中）绑定到与模块中绑定的不同对象。在实践中，这通常意味着使用[`mock.patch`](http://mock.readthedocs.org/en/latest/patch.html).

## 例子

假设我们有一个在测试期间具有副作用的函数，无论是破坏性的（向我们的生产数据库写入废话）还是烦人的（即，速度慢）。这是后一种情况及其测试的示例：

```
def foo():
    ...
    time.sleep(5)
    ...
    return "bar"

...

def foo_test():
    assertEqual(foo(), "bar") 
```

我们的测试有效，但至少需要五秒钟。我们可以通过替换为什么都不`time.sleep`做[的模拟对象](http://mock.readthedocs.org/en/latest/mock.html)来避免等待。这样做的两种策略是这个问题的主题：

### 依赖注入

```
def foo(wait=time.sleep):
    ...
    wait(5)
    ...
    return "bar"

...

def foo_test():
    assertEqual(foo(wait=mock.Mock()), "bar") 
```

### 猴子补丁

```
def foo():
    ...
    time.sleep(5)
    ...
    return "bar"

...

@mock.patch('time.sleep')
def foo_test():
    assertEqual(foo(), "bar") 
```

# 为什么要依赖注入？

我发现猴子补丁的优缺点更直接，因此我将分析重点放在依赖注入上。

## 混乱的界面*只是*为了可测试性？

依赖注入非常明确，但需要修改产品代码。猴子补丁不是明确的，但不需要修改产品代码。

程序员的本能反应是在修改产品代码进行测试之前做出许多牺牲。在考虑了注入所有依赖项后您的应用程序会是什么样子，对猴子补丁的偏好似乎是不费吹灰之力。正如[迈克尔·福特所说](http://lists.idyll.org/pipermail/testing-in-python/2010-October/003462.html)：

> [E] 甚至内部 API 仍然需要开发人员阅读/使用，我也不喜欢搞砸它们。
> 
> ...
> 
> 我的观点是， Python从来*不需要**仅仅*为了可测试性而进行的依赖注入，也很少比其他技术更可取。很多时候，依赖注入本身作为一种结构/架构很有用。

 *虽然这个话题在编写单元测试时自然会出现，但对那些提倡依赖注入的人的慈善解释得出的结论是，可测试性不是他们的主要动机。[Ned Batchelder 发现 (25:30)](http://blip.tv/pycon-us-videos-2009-2010-2011/pycon-2010-tests-and-testability-188-3280697)猴子补丁“使代码有点难以理解，我宁愿在某个地方看到：我们现在正在测试，所以这就是你获得时间的方式。” 他详细阐述（3:14）：

> 当我坐下来查看我的代码并思考“我怎样才能更好地测试它？” 我更改了产品代码以使其更具可测试性，它实际上是更好的产品代码。我认为这是因为，如果你必须写一些东西来做一件事，它可以把那件事做好，但是如果你写的东西能做好两件事，那就更好了。做好测试，除了成为一个好的产品外，还能让代码变得更好。通过有两种用途，您必须真正考虑该 API，并且您必须真正考虑那段代码在做什么。通过让它做好这两件事，你就有了一个更好的、模块化的、更抽象的设计，从长远来看，这对你的产品会更好。

### 界面污染问题

不，不仅仅是视觉污染。假设我们随着时间的推移意识到，在极端情况下，我们需要一个更复杂的算法来确定`foo`上面函数中的等待时间：

```
-- bar = foo()
++ bar = foo(wait=mywait) 
```

但是一段时间后，对于我们的主要用途来说，等待变得不必要了`foo`。我们一直使用依赖注入模式，因此我们假设我们可以删除命名参数而不会产生任何后果。

```
-- def foo(wait=time.sleep):
++ def foo(): 
```

我们现在需要追踪我们的极端情况以避免 TypeError。看起来即使这些参数只是为了测试目的而添加的，它们*也*将在生产中使用，并且这种方法通过在接口中放置实现细节来限制您重构的能力。

但是[Aaron Maxwell 有一个解决方案](http://lists.idyll.org/pipermail/testing-in-python/2009-December/002476.html)：

> 在实际代码中，我倾向于用下划线前缀标记“仅测试挂钩”参数 - 所以签名将是： `__init__(self, rel_url, _urlopen=urlopen)` 然后在该方法的文档字符串中，我明确表示它是一个测试挂钩，可能会在没有警告的情况下消失。（是的，在这种情况下，我一定会写一个文档字符串 :) 下划线只是我以某种方式将参数突出显示为特殊的方式。
> 
> 当然，那是我希望它仅用于测试的情况。如果这是我们决定要在该上下文之外提供的东西，并承诺保留，我不会贴出这样的“禁止”标志:)

虽然这种方法确实解决了污染问题，但对我来说，所有这些杂乱无章的东西——首先是添加到界面中，其次是确保您实际上不使用界面——都有异味。

但是[，Augie Fackler 和 Nathaniel Manista 的立场](https://www.youtube.com/watch?v=Xu5EhKVZdV8#t=20m34s)要求位置参数比可选的关键字参数更安全，这将使污染问题变得毫无意义。[他们详细说明](https://www.youtube.com/watch?v=Xu5EhKVZdV8#t=27m13s)：

> 如果它正在控制一个关键的行为，比如它将写入其持久数据的位置，我们发现将其作为必需参数并始终指定它会更安全。我们发现，在对象关系的情况下，第一个对象没有意义，除非它也有第二个对象——因此，用户配置文件没有意义，除非它具有用户凭据——我们发现显式构造参数对我们来说是最强大的解决方案...[可选参数]适用于以微妙方式改变对象行为的事物。

如果不忙于评估他们更广泛的测试策略，我们应该很容易同意的一点是，*关键组件不应该作为可选参数传递*。

但是，我不明白为什么当关系具有 *特定*依赖项时不应该对“关键”依赖项进行硬编码。抽象的实质是它与其他抽象的关系。因此，如果一个抽象的基本属性是与应用程序中另一个抽象的关系，那么它是硬编码的主要候选者——无论两个抽象中的实现细节有多少变化，它们都是永久耦合的。

部分区别在于对系统构成风险的依赖关系和不构成风险的依赖关系。如果依赖项负责写入数据库、推送给客户端或投下炸弹，那么除非我们正在编写无人机软件，否则我们不能[犯错误](http://drones.pitchinteractive.com/)。

值得注意的是，注入位置参数会使“观望”策略代价高昂。如果我们决定有一天需要在构造函数中选择我们的硬编码依赖项之一，那么将其添加为位置参数将破坏向后兼容性。如果我们后来决定删除一个必需的参数，也会遇到类似的问题，因此非必要的依赖项必须是可选参数，这样我们就可以自由地更改接口。

## 依赖关系不好，可以吗？

[构造函数注入](http://en.wikipedia.org/wiki/Dependency_Injection#Constructor_injection)是依赖注入的几种方法之一。根据维基百科：“依赖注入是一种实现控制反转并允许程序设计遵循依赖反转原则的软件设计模式。”

> [控制反转](http://en.wikipedia.org/wiki/Inversion_of_control)服务于以下设计目的：
> 
> *   将任务的执行与实现分离。
> *   使模块专注于其设计的任务。
> *   将模块从关于其他系统如何做他们所做的事情的假设中解放出来，而是依赖于合同。
> *   防止更换模块时产生副作用。

.

> [依赖倒置原则](http://en.wikipedia.org/wiki/Dependency_inversion_principle)的目标是将应用程序胶水代码与应用程序逻辑解耦......
> 
> 该原则规定：
> 
> *A. 高级模块不应该依赖于低级模块。两者都应该依赖于抽象。B. 抽象不应该依赖于细节。细节应该取决于抽象。*
> 
> 该原则*颠倒*了一些人对面向对象设计的看法，规定高级和低级对象*都必须依赖于相同的抽象。*

[考虑到它的 value 存在争议的状态，这](http://en.wikipedia.org/wiki/Talk:Inversion_of_control)与我想用这个术语得到的一样具体。但正是这些类型的担忧激励了 Martelli（[尤其是他 2007 年的演讲证明了](https://www.youtube.com/watch?v=0vJJlVBVTFg)这一点）。

[依赖注入](http://en.wikipedia.org/wiki/Dependency_Injection#Advantages?=_)的优点，可以提炼为*可重用性*。无论是通过全局配置、动态算法还是不断发展的应用程序开发，将函数/方法/类的抽象与其依赖项的实现细节*解耦*允许这些组件中的每一个（尽管在这种情况下，特别是抽象）都有可能在编写时未计划的组合中耦合，无需修改。测试就是一个很好的例子，因为*可测试性就是可重用性*。

还记得对更改产品代码以满足测试代码需求的直觉反应吗？好吧，您应该对更改抽象以满足生产实现的特定需求也有相同的反应！

所有这些理论的实际收获是将**无法进行单元测试的“胶水代码”与您想要进行单元测试的逻辑分开**。虽然他们对这一原则的具体实现特别感兴趣，但我认为 Fackler 和 Manista 提供[了一个很好的例子](https://www.youtube.com/watch?v=Xu5EhKVZdV8#t=21m47s)。一个人可能有的地方：

```
class OldClass(object):
    ...
    def EnLolCat(self, misspelt_phrases):
        lolcats = []
        for album in self.albums:
            for photo in album.Photos():
                exif = photo.EXIF()
                for text in misspelt_phrases:
                    geoText = text.Geo(exif)
                    if photo.canCat(geoText)
                        lolcat = photo.Cat(geoText)
                        self.lolcats = lolcats 
```

他们会建议：

```
def Lol(albums, misspelt_phrases):
    lolcats = []
    for album in albums:
        for photo in album.Photos():
            exif = photo.EXIF()
            for text in misspelt_phrases:
                geoText = text.Geo(exif)
                if photo.canCat(geoText)
                    lolcat = photo.Cat(geoText)
                    return lolcats

class NewClass(object):
    ...
    def EnLolCat(self, misspelt_phrases):
        self.lolcats = Lol(
             self.albums, misspelt_phrases) 
```

我们可能会发现自己为了测试而模拟对象实例`EnLolCat`，现在我们发现自己在我们的类中使用胶水代码，以及一个我们可以轻松测试的自由函数，因为它**没有副作用**并且是完全**确定**的。换句话说，我们正在做更多的[函数式编程](http://www.ibm.com/developerworks/library/l-prog/l-prog-pdf.pdf)。

`NewClass`但是在测试方法时，我们的情况不一样吗？[不一定](https://www.youtube.com/watch?v=Xu5EhKVZdV8#t=32m15s)。

> 我相信对软件的行为部分进行强大的测试，比如功能、计算、状态变化等事情，我不相信程序集的单元测试：当你启动应用程序时，当你将一个对象连接到另一个对象，或者当您构建某些东西时——您可能会认为它是胶水代码。它很简单，并且您的集成测试将涵盖它。这个当代类示例`NewClass`（这种方法，所以测试这个实例方法也没有太多的增量好处。

依赖项对被测代码不利，因此如果每个依赖项都使您的代码变得更丑陋一点，这可能是一件好事。丑陋的成本低于紧耦合的成本，但开发人员更有可能认真对待。

# 最后的笔记

*   甚至在紧急情况下， [Alex Martelli 也会打补丁](https://www.youtube.com/watch?v=bPJKYrZjq10#t=51m02s)。
*   除非他真的需要，否则即使[Michael Foord 也不会模拟组件 (22:00) 。](http://blip.tv/pycon-us-videos-2009-2010-2011/pycon-2011-testing-with-mock-4899484)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T11:05:23.487

尽可能多地使用 DI 通常很有用，但有时它只是不可行，因为您：

*   使用内置函数或对象（如文件）
*   第三方功能
*   使用不确定的对象/调用等。

那是你不得不求助于猴子修补的时候。

您应该能够在几乎所有情况下避免它，理论上您可以 100% 避免它，但有时做出猴子补丁例外更为合理。*

# sql-server - 执行 sp_executesql 时出错

> ID：11450301
> 
> 赞同：-2
> 
> 时间：2012-07-12T10:54:28.770
> 
> 标签：sql-server, stored-procedures, execute

```
exec sp_executesql N'SELECT (STUFF (( SELECT '',''+ NAME from Project WHERE ProjectTypeID=1 and OutputHierarchyID IN (SELECT DISTINCT HierarchyID from HierarchyNode'+ @TextVal +''''
+ N')FOR XML PATH('''')), 1, 1, ''''))AS INDUSTRIES',  
N'@Industries NVARCHAR(100) output', @Industries output; 
```

我收到错误

> '+' 附近的语法不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:29:09.113

你有额外的单引号。尝试这个

```
exec sp_executesql N'SELECT (STUFF (( SELECT '',''+ NAME from Project WHERE ProjectTypeID=1 and OutputHierarchyID IN (SELECT DISTINCT HierarchyID from HierarchyNode'+ @TextVal +''
+ N')FOR XML PATH('''')), 1, 1, ''''))AS INDUSTRIES',  
N'@Industries NVARCHAR(100) output', @Industries output; 
```

将动态查询分配给变量并使用该变量执行也是一种很好的做法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T12:48:35.047

您不能在任何过程的参数中包含表达式，包括`sp_executesql`（这意味着您不能在那里做诸如连接字符串之类的事情）。尝试以下方法，它还允许您以更简单的方式调试语句（我不相信您的查询是正确的，因为我不知道您为什么要添加`'`after `@TextVal`，我认为这是一些表后缀）：

```
DECLARE @sql NVARCHAR(MAX), @Industries NVARCHAR(100);

SET @sql = N'SELECT @Industries = STUFF((SELECT '','' + NAME 
    from Project WHERE ProjectTypeID = 1 
    and OutputHierarchyID IN 
    (
      SELECT DISTINCT HierarchyID from HierarchyNode' + @TextVal + '
    ) FOR XML PATH('''')), 1, 1, '''');';

PRINT @sql;

--EXEC sp_executesql @sql, N'@Industries NVARCHAR(100) output', @Industries output; 
```

虽然我认为这个版本会稍微更有效率：

```
DECLARE @sql NVARCHAR(MAX), @Industries NVARCHAR(100);

SET @sql = N'SELECT @Industries = STUFF((SELECT '','' + NAME 
    from Project AS p WHERE ProjectTypeID = 1 
    AND EXISTS 
    (
      SELECT 1 from HierarchyNode' + @TextVal + ' 
      WHERE HierarchyID = p.OutputHierarchyID
    ) FOR XML PATH('''')), 1, 1, '''');';

PRINT @sql;

--EXEC sp_executesql @sql, N'@Industries NVARCHAR(100) output', @Industries output; 
```

您可以检查该语句并确保它是正确的，而不是盲目地将它扔给 SQL Server 并试图弄清楚错误消息可能意味着什么。如果您将输出复制并粘贴到顶部窗格中，则错误消息将指向您实际可以看到的行号，并且可以更轻松地排除语法故障。当您认为它产生了正确的输出时，请评论`PRINT`并取消评论`EXEC`.

如果您认为有必要`+''''+`，`@TextVal`请告诉我们`@TextVal`您希望该查询针对的表的值和名称。

# javascript - 在提交时更改 HTML Post 参数

> ID：11450307
> 
> 赞同：2
> 
> 时间：2012-07-12T10:54:45.013
> 
> 标签：javascript, jquery, html, forms, submit

我有 1 个表单，有 2 个提交按钮。

当我单击一个按钮时，我希望发布某些值。当我单击其他按钮时，我希望发布其他值。

这是我尝试过的，没有用：

```
<form action="/test" method="post">

    <input type="hidden" id="bool" name="bool" value="" />

    <input type="submit" value="Yes" onclick="test()" />
    <input type="submit" value="No" onclick="test1()" />

</form>

<script type="text/javascript">
    function test() {
        document.getElementById('bool').value = "true";
    }
    function test1() {
        document.getElementById('bool').value = "false";
    }
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T11:00:16.623

```
<form action="/test" method="post" name="myform">

    <input type="hidden" id="bool" name="bool" value="" />

    <input type="button" value="Yes" onclick="test()" />
    <input type="button" value="No" onclick="test1()" />

</form>

<script type="text/javascript">
    function test() {
        document.getElementById('bool').value = "true";
        document.myform.submit();
    }
    function test1() {
        document.getElementById('bool').value = "false";
        document.myform.submit();
    }
</script> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-12T10:58:05.227

改用这个：

```
<form action="/test" method="post" onsubmit="document.getElementById('bool').value = 'true'; return true;">

    <input type="hidden" id="bool" name="bool" value="" />

    <input type="submit" value="Yes" onclick="test()" />
    <input type="submit" value="No" onclick="test1()" />

</form> 
```

# c# - 我们翻译网站的方式会导致性能问题吗？

> ID：11450323
> 
> 赞同：7
> 
> 时间：2012-07-12T10:55:44.803
> 
> 标签：c#, asp.net-mvc-3, entity-framework, translation

**背景**

我们的网站是一个新闻网站，被全球许多人浏览。显然，这意味着我们将以尽可能多的语言对网站进行本地化。每种语言都将聘请专业翻译。

**我们的网站目前如何运作**

我们计划这样做的方法是将页面的每个元素的翻译存储在由 Guid 链接的数据库中。因此，当页面加载时，使用 Guid 和用户的语言首选项将字符串从数据库中提取出来。

我们的项目中有几个包含英文翻译的文档。比如这样：

```
public class StandardButtonToken : LocalisationToken
{
    protected StandardButtonToken(string defaultText, Guid key) : base(defaultText, key)
    {
    }

    public static readonly LocalisationToken Update = new StandardButtonToken("Update", Guid.Parse("8a999f5b-7ca1-466d-93ca-377321e6de00"));
    public static readonly LocalisationToken Go = new StandardButtonToken("Go", Guid.Parse("7a013ecc-0772-4f87-9f1f-da6a878a3c99"));
    public static readonly LocalisationToken Edit = new StandardButtonToken("Edit", Guid.Parse("c31be427-5016-475d-997a-96fa5ff8b51f"));
    public static readonly LocalisationToken New = new StandardButtonToken("New", Guid.Parse("f72d365c-b18f-4f01-a6e4-b0cd930dc730"));
    public static readonly LocalisationToken More = new StandardButtonToken("More", Guid.Parse("bd4da7df-afd2-481e-b6b6-b4a989324758"));
    public static readonly LocalisationToken Delete = new StandardButtonToken("Delete", Guid.Parse("ab00ec14-4414-4cda-a8e2-4f03c9e7c5a8"));
    public static readonly LocalisationToken Add = new StandardButtonToken("Add", Guid.Parse("01e44600-a556-4a07-8a2a-e69a1ea79629"));
    public static readonly LocalisationToken Confirm = new StandardButtonToken("Confirm", Guid.Parse("4c50e91e-3e2f-42fa-97aa-9f1f6f077f09"));
    public static readonly LocalisationToken Send = new StandardButtonToken("Send", Guid.Parse("24121766-f424-4d73-ac58-76f90d58b95c"));
    public static readonly LocalisationToken Continue = new StandardButtonToken("Continue", Guid.Parse("dd2ca0e5-8a35-4128-b2e8-db68a64a6fe5"));
    public static readonly LocalisationToken OK = new StandardButtonToken("OK", Guid.Parse("9a359f93-7c23-44ad-b863-e53c5eadce90"));
    public static readonly LocalisationToken Accept = new StandardButtonToken("Accept", Guid.Parse("3206a76b-1cd7-4dc3-9fff-61dfb0992c75"));
    public static readonly LocalisationToken Reject = new StandardButtonToken("Reject", Guid.Parse("f99c6a9c-6a55-4f55-ac4b-9581e56d18d3"));
    public static readonly LocalisationToken RequestMoreInfo = new StandardButtonToken("Request more info", Guid.Parse("19f3d76b-dafa-47ae-8416-b7d61546b03d"));
    public static readonly LocalisationToken Cancel = new StandardButtonToken("Cancel", Guid.Parse("75617287-5418-466b-9373-cc36f8298859"));
    public static readonly LocalisationToken Publish = new StandardButtonToken("Publish", Guid.Parse("efd87fd4-e7f1-4071-9d26-a622320c366b"));
    public static readonly LocalisationToken Remove = new StandardButtonToken("Remove", Guid.Parse("f7db5d81-5af8-42bf-990f-778df609948e"));
} 
```

每次我们创建一个页面时，我们确保按钮使用这些标记而不是手动编写文本。因此，如果我们决定需要一个新按钮，我们将在下面的文件中添加一个新令牌，当网站第一次运行时，它将检查它是否存在于数据库中，如果不存在，它将被创建。

因此，在翻译方面，我们会将这些标记发送给翻译人员，他们只会更改文本。然后它将以相关语言添加到站点中，并且页面将根据所选语言调用正确的翻译。

**问题/问题**

我们的翻译标记将默认文本作为字符串，但我担心服务器必须在启动时将所有这些文本字符串加载到内存中。它们实际上只用于将翻译存储在数据库中，从未在代码中使用过，所以我认为这可能有点浪费。相反，我相信我们可以在需要时单独调用这些翻译，也许来自某种不在内存中的查找表。

所以问题是。我们目前这样做的方式是否会导致性能问题？

如果是这样，任何人都可以提出更好的解决方案吗？

在我们的网站中总共有 1000 个这些令牌。

在这种情况下，谷歌对我的帮助不是很大，所以任何建议都将不胜感激。我已经尽我所能把这句话说得通了。它不是一个容易解释的。

提前感谢人们可以提供的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T14:56:12.593

忽略其他实现并专注于您正在使用的设置，答案是“是”和“否”。

是的，如果传入请求的数量增加，尤其是随着令牌数量的增加，您所遵循的方法可能会出现性能问题。这种关系可以很容易地解释为“进来的请求越多，服务器要做的工作就越多。存在的令牌越多，服务器要做的工作就越多。如果请求和令牌都增加，你就爆炸了服务器必须完成的工作量。”

“否”可以通过添加到您当前的解决方案来完成。您可以将缓存添加到您的设置中，以保存已翻译的页面，以便服务器无需查询数据库或按请求翻译每个页面。例如，如果您有一个`mypage.aspx`包含 20 个可翻译标记的页面 - 让服务器第一次翻译它，然后将翻译后的文件保存为`/localized/mypage.EN.html`所有未来的请求（如果原始页面没有被修改或新的标记没有'未添加）只会发送缓存页面，而不是每次都重新翻译。

此外，您可以让服务器在更新页面或更新令牌时生成所有翻译，而不是等待客户端请求进入。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T17:56:24.317

我目前正在与一个团队合作开展一个我们遇到类似情况的项目。我们的项目是一个基于客户端/服务器的应用程序。我们翻译的数据库位于服务器上，我们所有的控件都有默认的英文值。最初，当打开任何新窗口时，我们会读取数据库并拉下任何必要的翻译并翻译控件。这样，只有我们需要的值在内存中翻译，并且只要该窗口需要它们。当窗口关闭时，内存将使用垃圾收集回收。

我们发现，即使是每个按钮、标签、列标题等的所有翻译……整个系统都被加载到内存中，我们只处理了几百 K。最后我们所做的是：

1.  用户登录：
    *   如果他们默认使用除英语之外的另一种语言，则会在内存中设置一个数据表，并填充来自服务器的我们系统中所有用户控件的翻译。
    *   该数据表被赋予一个主键以帮助改进针对它的查询。只要应用程序打开，此数据表就存在。
    *   每当用户控件被实例化时，就会运行一个查找翻译并应用它的方法。

用户登录所需的时间确实增加了，但平均只增加了几毫秒。

说了这么多，我想知道你是否可以使用类似的设计。这个想法将使服务器不必跟踪每个会话的翻译。它只会将页面提供给用户。

1.  用户登录：
    *   一个数据表对象填充了网站的所有翻译
    *   调用 WriteXML()
    *   生成的 XML 被发送到客户端
2.  当用户导航到新页面时：
    *   调用客户端脚本，该脚本使用 XML 来翻译客户端机器上的页面。

您可以添加一些缓存，以便仅在更新站点时替换 XML，或者您可以让每个用户每次登录时下载 XML。无论哪种方式，它都会减轻服务器的负担。

# javascript - JavaScript - 从脚本中的单词列表创建 html 表格或网格

> ID：11450325
> 
> 赞同：-1
> 
> 时间：2012-07-12T10:55:58.757
> 
> 标签：javascript, jquery

如何获取单词列表并从中创建一个 html 表？

```
 <script>
   $('.wordcontainer').html('<ul><li></li></ul>');
   var listofwords = {"mat","cat","dog", "pit", "pot", "fog", "log", "pan", "can", "man"};
 </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:58:55.833

像这样的东西应该可以解决问题。

```
var listOfWords = ["mat","cat","dog", "pit", "pot", "fog", "log", "pan", "can", "man"];
var innerTable = '';
for (var i = 0, len = listOfWords.length; i < len; i++) {
  innerTable += '<tr><td>'+listOfWords[i]+'</td></tr>';
}
$('<table>'+innerTable+'</table>').appendTo('body'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:01:43.237

也许将您的代码更改为：

```
var listofwords = ["mat","cat","dog", "pit", "pot", "fog", "log", "pan", "can", "man"];
var table = "<table>";
for (var i = 0; i < listOfWords.length; i++) {
   table += '<tr><td>'+listOfWords[i]+'</td></tr>';
}
table += "</table>";
$("body").append(table); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T11:02:57.393

只需使用[$.each()](http://api.jquery.com/jQuery.each/)。

```
var listOfWords = ['foo', 'bar', 'sigma'];
var $list       = $('<ul/>');
$.each(listOfWords, function () { $list.append('<li>'+this+'</li>'); }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T11:03:23.207

伙计尝试自己动手。不是每次你都会得到帮助。
祝你好运

```
<script>
       $('.wordcontainer').html('<ul><li></li></ul>');
       var listofwords = ["mat","cat","dog", "pit", "pot", "fog", "log", "pan", "can", "man"];
       var stringTable = '';
      foreach(var word in listofwords)
      {
         stringTable += '<tr><td>'+word+'</td></tr>';
      }
    $("body").append('<table>'+stringTable+'</table>')
    });
     </script> 
```

# php - 如何将 WordPress 类别选择限制为一个？

> ID：11450327
> 
> 赞同：5
> 
> 时间：2012-07-12T10:56:11.473
> 
> 标签：php, wordpress, wordpress-theming

我有一个自定义帖子类型和一个自定义分类设置 - 非常标准的东西。

但是，我想知道如何限制我的客户在每个帖子中选择多个分类？

我不介意他们能够创建和删除分类类型，但我不希望他们选择多个。因为这些是复选框，所以它们可以。也许单选按钮可能有用？

我已经看到解决方案使用 jQuery 来更改这些字段，但它们似乎有点 hacky。执行此操作的最佳实践方法是什么？

附件是我的自定义分类框的屏幕截图。

![自定义分类](../Images/7eac4736f11d816d9e68dd79b3d2ee26.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:38:59.460

我意识到这不是一个完整的答案，但是像使用下拉列表列出类别（或分类术语）这样简单的事情就可以了。我个人不知道，但必须有插件可以做到这一点。没有冒犯，但这确实让我觉得这是一个以前解决过的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-07T03:20:00.600

据我所知，我们必须使用 jQuery。它是“hacky”但很容易工作，如果我的记忆很好的话，一个纯 PHP/WP 解决方案真的很复杂。
这是必要的代码：

```
jQuery("#categorychecklist input").each(function(){
    this.type = 'radio';
}); 
```

我们必须在页面`/wp-admin/post.php`和`/wp-admin/post-new.php`. 它应该在加载时运行，然后在创建新类别时再次运行。为了解决新类别问题，我使用了[`MutationObserver`](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver)：

```
foreach( array( 'post', 'post-new' ) as $hook )
    add_action( "admin_footer-$hook.php", 'convert_cats_to_radio' );

function convert_cats_to_radio(){
    global $post;
    if( $post->post_type !== 'post') // select your desired Post Type
        return;

    ?>
    <script type="text/javascript">
    function makeRadioButtons(){
        jQuery("#categorychecklist input").each(function(){
            this.type = 'radio';
        });
    }
    function newCategoryObserver(){
        // Example from developer.mozilla.org/en-US/docs/Web/API/MutationObserver
        var targetNode = document.getElementById('categorychecklist');
        var config = { attributes: true, childList: true, subtree: true };
        var callback = function(mutationsList) {
            for(var mutation of mutationsList) {
                if (mutation.type == 'childList') {
                    makeRadioButtons();
                }
            }
        };
        var observer = new MutationObserver(callback);
        observer.observe(targetNode, config);
    }
    newCategoryObserver();
    makeRadioButtons();
    </script>
    <?php
} 
```

* * *

**相关**：[这个旧插件](https://wordpress.org/plugins/category-checklist-tree/)仍然可以完美地解决子类别层次结构的问题。By default in WP, when one sub-category is selected it doesn't show under its parent category but on top of the list. 它也是一个 jQuery 解决方案，由当时的主要 WP 核心开发人员编写。

# c# - RDLC 交替行

> ID：11450331
> 
> 赞同：2
> 
> 时间：2012-07-12T10:56:25.773
> 
> 标签：c#, asp.net-mvc-3, webforms, rdlc

我一直在开发一个 MVC3 应用程序，最近的一个要求是它有几个动态生成的报告。所以我添加了一个带有reportviewer 和几个报告（.rdlc）的webbform。但是当我尝试设置条件行填充时，例如

```
=IIf(RowNumber(Nothing) Mod 2, "Blue", "Red") // Won't acctually use those colors but you get the gist 
```

但生成的背景仍然是白色的。我在一个真正的蓝色 Webform 应用程序中尝试了完全相同的 Webform，并从那里正确呈现。我检查了我的 MVC 项目是否包含我的 Webforms 测试项目中使用的每个引用，并将 .aspx 和 .rdlc 添加到“Global.asax.cs”中被忽略的路由。

为什么是混合恐怖？
由于性能原因，我不能从客户端报告生成更改为服务器端，也不能使用不同/远程服务器，因为环境（是复数）缺乏带宽和连接性。而且我宁愿不必仅为报告查看器添加单独的应用程序池（再次是性能问题）。

编辑1：

全球.asax

```
public class MvcApplication : System.Web.HttpApplication {
    public static void RegisterGlobalFilters ( GlobalFilterCollection filters ) {
        filters.Add(new HandleErrorAttribute());
    }

    public static void RegisterRoutes ( RouteCollection routes ) {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
        routes.IgnoreRoute("{resource}.aspx/{*pathInfo}");
        routes.IgnoreRoute("{resource}.rdlc/{*pathInfo}");

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

    }

    protected void Application_Start () {
        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);
    }
} 
```

报告.aspx ....

```
</rsweb:ReportViewer>
<asp:XmlDataSource ID="reportsDS" runat="server" 
        DataFile="~/Reporting/ReportSettings/Reportlist.xml" 
        XPath="Reports/Report" />
<asp:ScriptManager ID="scriptmanager" runat="server" />
.... 
```

报告.aspx.cs

```
// Some configuration initialization and the regular Page_Init + Page_Load assigning
// default values

protected void changeReport() {
    ReportViewer.Reset();
    ReportDataSource RDS = new ReportDataSource( /* grabbed from a combination of applicationsettings and input parameters */
    ReportViewer.LocalReport./* adding datasource and setting paths, names, etc. */
} 
```

EDIT2：添加了代码以更好地了解我正在做的事情，但看到代码在从 Webforms 项目发布时确实有效，我猜 ReportViewer 执行 Global.asax 不是特别喜欢的某种 Blackmagic 请求的。但是，尽管我尽了最大的努力，我还没有找到那个魔法品牌。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:26:39.400

我设法通过修改 Page_Init 解决了这个问题

```
protected void Page_Init( object sender, EventArgs e ) {
    ...
    ReportViewer.LocalReport.SetBasePermissionsForSandboxAppDomain(new PermissionSet(PermissionState.Unrestricted));
    ...
} 
```

感觉像个黑客，所以我会等一两天才能接受这个答案

# jsp - 如何在 JSP 中将一组对象添加到模型映射中

> ID：11450333
> 
> 赞同：1
> 
> 时间：2012-07-12T10:56:31.457
> 
> 标签：jsp, attributes

我正在将一组对象添加到 ModelMap 对象中

```
 set<Contacts> contacts=user.getContacts();
  modelmap.addAttribute("objects",contacts); 
```

如何让对象在 JSP 中显示。我正在使用这种方法，但无法获得确切的使用方式

```
 <c:foreach items="${objects}" var="xyz">
    <h1> ${xyz.name} </h1>
  </c:foreach> 
```

如何获得添加的对象集。

什么时候

```
 modelmap.addAttribute("object","hello"); 
```

和

```
 <h2>"object name is"</h2>
  <h1> ${object} </h1> 
```

然后它显示

对象名称是你好

现在，如果我添加联系人列表，我需要访问这些联系人以显示

# php - PageViews，类似于 Google Analytics 或 Alexa 的动态页面访问计数器？

> ID：11450335
> 
> 赞同：1
> 
> 时间：2012-07-12T10:56:33.250
> 
> 标签：php, mysql, tracking, pageviews

我想在每个动态页面上为我的网站[http://www.deerpages.co](http://www.deerpages.co)放置一个命中计数器或访问显示。我正在使用 PHP 和 MySQL。但是，我在想，一旦我将每个跟踪都放入插入的每行中，那么该表很快就会被填满。

我们有什么外部方法可以做到这一点吗？我的意思是，像谷歌分析或 Alexa 类型的跟踪？并且能够显示它们吗？

任何帮助，将不胜感激。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:07:21.710

当您在内容上放置页面计数器时，您会更改数据库中计数器的值，而不是每次都为其插入新行。

假设您的表看起来像这样：

```
contentTable
+------+---------+
| ID   | Counter |
|------|---------|
| 1    | 35      |
| 2    | 54      |
+------+---------+ 
```

您可以像这样更新 ID 为 1 的行：

`update contentTable set Counter=Counter+1 where ID=1;`

假设您将每个页面链接到数据库中的一个 ID。您还可以轻松地将所有内容保存在同一个数据库表中。

编辑：如果要存储有关每个访问者的其他数据，请按照以下几行创建一个单独的 hitCounter 表：

```
 CounterTable
+----+---------+----------+---------|
| ID | Counter | HTTP_REf | Country |
|----+---------+----------+---------|
| 1  | 46      | SomeData | USA     |
| 2  | 28      | Data2    | Aus     |
+----+---------+----------+---------+ 
```

并根据用户的个人数据列根据需要更新数据，例如： `insert into counterTable (ID, Counter, HTTP_Ref, Country) values (null, 1, '".$HTTP_REF."', '".$country."') On Duplicate Key update set counter=counter+1;`

（假设 ID、HTTP_Ref 和 Country 的键）

话虽如此，我建议要么考虑使用数据库上的一些空间（实际上，您将需要*大量*的点击来“填满表格”），或者简单地将基本计数器与列出 Country 的统计表分开、Referrer等放到不同的表中。

# image - 当没有设置时，发布到页面的链接现在包括缩略图

> ID：11450339
> 
> 赞同：0
> 
> 时间：2012-07-12T10:56:48.743
> 
> 标签：image, facebook-graph-api, thumbnails, posts

截至今天早上（7 月 12 日），我们用于自动向 facebook 页面添加更新的服务器脚本包含网站徽标的缩略图。

如果有合适的图像，我们会自己添加图像 - 否则将图片变量留空。

截至今天，Facebook 会抓取网页 og:image 设置中设置的图像（或者如果禁用该设置，则为页面上的第一个）并将其添加到帖子更新中。

最终结果是，今天早上的每篇文章都有网站徽标作为图像，看起来一团糟。

问题 - 我如何将图像变量设置为 NULL（或等效），以便它不会尝试生成未明确定义的缩略图？

谢谢

（我进行的每个帮助搜索都会返回解释如何添加缩略图的结果 - 我想摆脱它！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:10:08.227

一个轻微的解决方法是将缩略图定义为 1x1 png 文件，这会强制它使用该文件，而不是从链接的网页上抓取网站徽标。

尽管如此，仍然希望找到一种强制它根本不使用缩略图的方法——就像几天前的默认行为一样。

# android - Logcat 在设备上连续记录

> ID：11450343
> 
> 赞同：0
> 
> 时间：2012-07-12T10:56:59.010
> 
> 标签：android, debugging, device, logcat

昨天，一旦设备连接，logCat 突然开始记录大量设备事件。之前，它只是记录了我在应用程序中出于调试目的而记录的所有内容。有谁知道，我做了什么来启用这种行为？以及如何再次禁用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:01:11.310

您可以设置 logcat "过滤器" 以仅从您的应用程序中过滤掉消息。您可以根据标签、pid 等设置过滤器。

使用此链接了解有关如何设置 logcat 过滤器的更多信息： [过滤 logcat 输出](http://jtomlinson.blogspot.in/2010/04/android-ddms-and-formatting-logcat.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:03:02.480

您必须已将LogCat的**过滤器更改为****verbose**。

您可以通过选择 LogCat 窗口右上角的下拉列表来更改要在 LogCat 上显示的消息的过滤器。

# c# - 如何计算 Postscript 中的页数

> ID：11450351
> 
> 赞同：0
> 
> 时间：2012-07-12T10:57:46.780
> 
> 标签：c#, postscript

我正在开发一个 C# 控制台应用程序，并且必须计算 PostScript 文件的页数。除了解析文件中的文本之外，有没有更简单的方法来计算页面数。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:40:43.310

如果文件包含任意 PostScript 程序，唯一的方法是执行该文件，也许在重新定义`showpage`运算符以计算页数之后。

如果文件遵循 DSC 约定，那么您可以计算`%%Page`评论或直接使用（`%%Pages`如果存在）。

另请参阅[http://en.wikibooks.org/wiki/PostScript_FAQ#How_to_count_pages_in_a_PS_file.3F](http://en.wikibooks.org/wiki/PostScript_FAQ#How_to_count_pages_in_a_PS_file.3F)。

# facebook - 获取发布在用户墙上的帖子的永久链接

> ID：11450352
> 
> 赞同：3
> 
> 时间：2012-07-12T10:57:48.207
> 
> 标签：facebook, dialog, fbml

使用 Facebook 对话框，应用程序用户可以分享故事。我希望能够为已发表的故事构建一个永久链接，并提供作为查看帖子的链接。我们收到的响应是 post_id，仅靠它看起来还不够。

是否可以单独基于 post_id 构建一个永久链接，如果没有，还有什么其他方法是可能的？

非常感谢您的时间。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-10T22:50:56.217

您可以使用以下模式在 URL 中使用 post_id 构建指向原始帖子的链接：

```
http://www.facebook.com/7683938373/posts/7938393003 
```

`post_id`在哪里`7683938373_7938393003`。（这是一个编造的 post_id）

请注意：您还可以从流表中访问永久链接字段。

约翰尼

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:05:09.557

当您通过 API 中的 ID 访问帖子时，它不是在响应中吗？对象中应该有一个永久链接`actions`，您可以引导用户访问该链接，以便他们喜欢/评论新帖子

# javascript - 浏览器忽略中间人 content_for 添加的 javascript

> ID：11450353
> 
> 赞同：0
> 
> 时间：2012-07-12T10:57:48.693
> 
> 标签：javascript, middleman

我正在开发客户端应用程序，为此我使用[中间人](http://middlemanapp.com/)

**在我的索引页面上，我有可选的脚本，我通过content_for**助手将这些脚本添加到 body 标签底部的其余脚本中到最终布局中。（如果 content_for :js 在那里，我调用 yield_content :js）

什么也没有发生。

ubuntu 1204 上的最新 chrome 和 ff 只是忽略此脚本标签 - 没有加载和执行任何内容，并且在 chrome 的开发工具中，脚本标签的 src 属性没有被突出显示。

虽然在同一个地方手动添加相同的脚本工作正常。

正如我所看到的 - 这与将 html 流式传输到浏览器有关（我根本没有资格从事此类事情）

有什么想法吗？

这是来自 layout.erb 的块：

```
<script src="js/libs/jquery.query-yql.js"></script>
<script src="js/libs/moment.min.js"></script>
<script src="js/libs/ru.js"></script>

<%= yield_content :js if content_for? :js%> 
```

这是我在 chrome 开发工具中得到的。我特意保留了硬编码脚本（最上面的脚本），以便您可以将它们与 content_for - **jquery.query-yql.js**和**moment.min.js**的结果进行比较：

![浏览器忽略脚本标签](../Images/91b04f1926a0fa4126b5ca1fd8c5e0c6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T03:56:30.713

您的产量内容块中有一个轻微的错字，“scr”应该是“src”

# java - GWT 错误！org.w3c.dom.Node 类型没有可用的源代码

> ID：11450357
> 
> 赞同：4
> 
> 时间：2012-07-12T10:58:08.583
> 
> 标签：java, xml, gwt, rpc

我在 GWT 编译期间遇到了这个编译错误。我正在使用它来解析 XML 文档。

```
[ERROR] Line 24: No source code is available for type org.w3c.dom.Node; did you forget to     inherit a required module?
[ERROR] Line 28: No source code is available for type org.w3c.dom.NodeList; did you forget to inherit a required module?
[ERROR] Aborting compile due to errors in some input files 
```

从我对此所做的任何研究来看，它都说类路径可能丢失了，但是因为这将默认包含在 gwt-user.jar 和 JRE7 中，而且我也没有包含任何外部 jar，所以没有重复的情况！而且您不能在客户端代码中包含这些类型的代码，因为它将被转换为 javascript

我有一个在我的共享文件夹（GWT Model View Presenter Project structure）中使用这个节点的类，它基本上是一个模型！

1.  将代码移动到服务器端是唯一可能的解决方案吗？
2.  如果 1 为真，我将如何重构访问此模型的客户端演示者，而无需每次都进行 RPC 调用的开销？

3.  有没有其他方法可以解决这个问题？

* * *

我的 GWT 配置文件。

```
 <module rename-to='xxxxx'>
 <inherits name='com.google.gwt.user.User'/>

 <inherits name='com.google.gwt.user.theme.standard.Standard'/> 
 <inherits name="com.google.gwt.xml.XML" />

  <entry-point class='com.xxxx.xxxxx.gwt.client.ProjectEntry'/>

  <source path='client'/>
  <source path='shared'/>

 </module> 
```

编辑：我现在已经包含了 xml 继承！它的工作

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T11:04:53.197

在您的代码库中的某个地方，您正在使用 org.w3c.dom.Node 和 org.w3c.dom.NodeList 这些不是白名单。换句话说，你不能使用这些类！看;

[https://developers.google.com/web-toolkit/doc/latest/RefJreEmulation](https://developers.google.com/web-toolkit/doc/latest/RefJreEmulation)

您应该将这些包用于 xml；

```
import com.google.gwt.xml.client.Document;
import com.google.gwt.xml.client.Element;
import com.google.gwt.xml.client.Node;
import com.google.gwt.xml.client.NodeList;
import com.google.gwt.xml.client.XMLParser; 
```

# c++ - std::string::append(std::string) 错误输出

> ID：11450364
> 
> 赞同：0
> 
> 时间：2012-07-12T10:58:24.437
> 
> 标签：c++, string, append

我正在尝试制作一个简单的文本加密器（并非所有功能都是完整的），但我有一个特定的问题需要帮助。我在编码的这一点上停下来并添加了一些注释文档以进行测试：

在函数 algorithm() 中：第 16-25 行将 std::string ck[] 的索引附加到*嵌套*循环内的 std::string KEY 中。*外部*循环正在运行以测量 PASSWORD.size() 并针对所有 ck[] 检查每个 PASSWORD.substr(...)。

但是，输出结果只是 PASSWORD 的第一个和最后一个字符的索引值。例如。如果 PASSWORD=abc KEY 输出 0002。我希望整个 PASSWORD 成为 KEY（按照指示）。

```
#include <string.h>
#include <iostream>
#include <stdlib.h>
#include <sstream>

std::string PASSWORD, KEY, ENCRYPTED_TEXT;

void algorithm(std::string note){
    ENCRYPTED_TEXT.append(note);

    /**STANDARD RULESET**/
    std::string ck[] = { "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9" };

    for(int x=0;x<PASSWORD.size();x++){
        for(int y=0;y<sizeof(ck)/4;y++){ 
            if(PASSWORD.substr(x,x+1)==ck[y]){
                std::stringstream ind;
                if(y>9) ind << y+1;
                else ind << "0" << y;
                KEY.append(ind.str());
            }
        }
    }
    std::cout << "\nKey is " << KEY;

    //make_file(ENCRYPTED_TEXT);
}

void qn_setup(){
    bool ask=true;
    while(ask=true){
        std::string check1="", check2="";
        std::cout << "Type a password:\n";
        std::cin >> check1;
        std::cout << "Confirm password:\n";
        std::cin >> check2;
        if(check1==check2) { 
            PASSWORD=check1;
            ENCRYPTED_TEXT=check1;
            ask=false; 
            break; }
        else { std::cout << "\nPasswords did not match.\n"; }
    }
}

int main(){
    qn_setup();
    algorithm(""); //testing key
} 
```

没有任何语法错误，只有逻辑错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:20:14.590

> 字符串 substr ( size_t pos = 0, size_t n = npos ) const;
> 
> ```
> Generate substring
> 
> Returns a string object with its contents initialized to a substring of the 
> current object.
> 
> This substring is the character sequence that starts at character position 
> pos and has a length of n characters. 
> ```

所以你的支票必须是：

```
PASSWORD.substr(x,1)==ck[y] /* instead of PASSWORD.substr(x,x+1) */ 
```

# jquery - jquery mobile刷新标题栏

> ID：11450367
> 
> 赞同：3
> 
> 时间：2012-07-12T10:58:36.053
> 
> 标签：jquery, jquery-mobile

我正在使用 jQuery Mobile 制作我的网站的移动版本，并且对刷新缓存页面有疑问。我有一个标题栏，并在上面放置了一个登录按钮。如果用户单击按钮并成功登录，我将登录按钮（在服务器端）替换为注销按钮。问题是，如果我按下浏览器后退按钮，登录按钮仍然显示。随后加载的（非缓存）页面正确显示注销按钮。

我假设这是因为当我按下时，页面来自缓存？有没有办法刷新标题栏，以便在缓存页面上也显示注销按钮？我认为我不能只刷新有问题的整个页面，因为我不知道用户在登录之前访问了哪些页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T06:49:14.357

有多种选择：

1）禁用页面缓存（浏览器后退和前进按钮）：

```
$.mobile.hashListeningEnabled = false; 
```

2）创建事件捕获当前页面名称，然后操纵标题：（类似于...）：

```
$("#PageName").live("pagebeforeshow", function (event, data) {

    // get current URL
    var pageName = $(location).attr("href").split("#")[1];

    // manipulate by the page name
    if(pageName == XXX){

       Header....

    }
} 
```

# javascript - javascript 变量变量名和全局范围（pinesnotify）

> ID：11450369
> 
> 赞同：2
> 
> 时间：2012-07-12T10:58:38.740
> 
> 标签：javascript, jquery, asp.net

我正在使用 pines notify（我想这与我的问题有点无关）来创建有关下拉列表更改事件的通知。在服务器端，将更改保存到数据库，然后在保存完成后 - 我希望删除通知（或根据结果执行其他操作）。

问题在于以我以后可以引用它（以删除它）的方式创建通知对象。

我的预期解决方案将获取下拉列表的 id，在其前面加上“pn”并将其用作变量名，就像

```
var pnid = 'pn' + $('#mydropdown').attr('id');
notifications[pnid] = createNotification(); 
```

在代码隐藏中，我可以创建知道通知对象将被调用的 javascript 代码。但是，我正在为我的“通知”对象而苦苦挣扎。我已经尝试过 this[notifications]、window[notifications] 等，但均无济于事（即我以后无法引用此对象与它进行交互）。我正在像这样的任何函数之外创建该对象

```
var notifications = {}; 
```

我会以完全错误的方式解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:03:36.057

您可以在到达`notifications`对象之前使用这条线。

```
window.notifications = window.notifications || {}; 
```

如果它未定义，这将帮助您创建对象，并且如果它已经存在，它还将阻止您覆盖它。

*注意：我假设您必须将此对象用作全局变量。*

# javascript - Sencha Touch 2 - 安卓性能

> ID：11450370
> 
> 赞同：6
> 
> 时间：2012-07-12T10:58:44.127
> 
> 标签：javascript, android, performance, cordova, sencha-touch-2

我们正在开发一个 Sencha Touch 2 应用程序，该应用程序利用 Phonegap 能够将其安装为应用程序并访问设备的存储。这在 iPad 2 和 iPad 3 上运行良好。但是，当我们尝试在 Android 设备上运行该应用程序时，性能非常缓慢。减慢系统速度的主要因素是列表和轮播。当我们尝试通过 chrome 浏览器测试相同的应用程序时，性能与 iPad 相当。

您对我们可以做些什么来提高 android 的性能有什么建议，甚至可能放弃 Phonegap 以获得更好的东西。或者如果我们可以强制 phonegap 作为 chrome 浏览器运行。

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-12T11:06:11.110

您在这里遇到的问题是 Android 浏览器不使用图形硬件加速。这意味着 Sencha（和其他 HTML5 库，如 jQueryMobile、iScroll 等）使用标准技巧来提供良好的滚动性能，例如 CSS 3D 转换以使您的列表在单独的层中呈现，这可以然后在硬件上翻译，不会在Android上工作。相反，列表滚动将完全在软件中执行，这会很慢！

然而，Chrome 浏览器确实提供 GPU 加速。Android 设备不仅能够提供良好的 HTML5 体验，只是标准浏览器还没有利用 GPU 硬件。

除非您可以强制最终用户使用 Chrome（我对此表示怀疑），否则唯一的选择是降低用户体验，并为 Android 用户提供稍微简单的 UI。

有关详细信息，请参阅[“提高 HTML5 应用程序的性能”](http://www.html5rocks.com/en/tutorials/speed/html5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:08:03.817

尝试在您的 AndroidManifest.xml 中设置此标志：android:hardwareAccelerated="true"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-13T15:29:59.577

**更新：**现在使用 ST2 的时间更长了，Android 上的性能挑战只是你必须接受的事情。您可以采取许多措施来避免性能问题，例如减少侦听器和事件、保持 DOM 轻量级（低于 2000 个节点）以及通常避免任何 CSS3 转换和效果（尤其是这些在 Android 上表现不佳）

要考虑的另一件事是，您可以使用 CrossWalk 浏览器并将其嵌入到 APK 中，而不是使用内置的 WebView。

[https://crosswalk-project.org](https://crosswalk-project.org)

它为您的 APK 增加了一点大小（15-20MB），但它的性能比内置的 WebView 更好，并为非常分散的平台带来了稳定性和一致性。考虑一个现实，Android 上的每个 WebView 取决于设备、供应商和操作系统版本可能在细微的方面有所不同。CrossWalk 将允许您在所有 Android 4.0+ 设备上拥有完全相同的版本，并消除任何设备或供应商特定的问题。

Android 上的性能没有灵丹妙药。图形加速不会提高纯 javascript 执行或 DOM 操作的性能。如果您想了解原因，请从这里开始：

[回流和重绘有什么区别？](https://stackoverflow.com/questions/2549296/whats-the-difference-between-reflow-and-repaint)

**Older Answer (may still be valid):**

For ICS and above the following setting on the webview will significantly improve rendering performance for Sencha Touch on Android:

```
mWebView.setLayerType(WebView.LAYER_TYPE_HARDWARE, null); 
```

However in my experience this will introduce artifacts into CSS rendering depending on the device and platform variation. I haven't specifically found a reason for this and I don't expect Google will resolve it as the webview component will be getting replaced with a newer and better version in Android 4.4.

[https://developers.google.com/chrome/mobile/docs/webview/overview](https://developers.google.com/chrome/mobile/docs/webview/overview)

# windows - 使用 7z 或替代 .tar.gz 压缩 Windows CMD 文件/文件夹

> ID：11450372
> 
> 赞同：2
> 
> 时间：2012-07-12T10:58:49.677
> 
> 标签：windows, compression, cmd, gzip, 7zip

我搜索了如何在 windows cmd 上使用 7z 压缩文件/文件夹，我找到了压缩到的方法：zip、tar、7z、..etc 但不是 .tar.gz 或 .tar.bz2

这是我使用的文档：http: [//www.dotnetperls.com/7-zip-examples](http://www.dotnetperls.com/7-zip-examples)

这是我使用的命令：

```
for /d %%X in (*) do "c:\Program Files\7-Zip\7z.exe" a -t7z "%%X.7z" "%%X\" 
```

将 "%%X.7z" "-t7z" 中的 "7z" 更改为所需的扩展名，即可获得所需的结果。但不幸的是，这种方式不适用于 .tar.gz

我需要使用 gzip 压缩 & 不知道如何，当然是在 CMD 上。反正？我确定有办法使用 7z bot 如何？如果有替代品就好了。。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T16:11:58.973

解决了。您可以通过编写包含以下内容的 CMD 批处理文件来完成此操作：

```
for /d %%X in (*) do "c:\Program Files\7-Zip\7z.exe" a -ttar "%%X.tar" "%%X\"
for %%X in (*.tar) do "c:\Program Files\7-Zip\7z.exe" a -tgzip "%%X.gz" "%%X" 
```

请注意，`%`如果您尝试在交互式 CMD 控制台中直接执行此操作，则应删除双符号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-22T14:33:46.357

使用 7-Zip 9.20，您可以避免 for 循环，只需在名称末尾添加 \，这对我有用：

`set "_dir=%1"` `set "_7zexe=c:\<my-7z-dir>\7z.exe"` `"%_7zexe%" a -ttar %_dir%.tar %_dir%\` `"%_7zexe%" a -tgzip %_dir%.gz %_dir%.tar`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T11:11:36.800

`.tar.gz`实际上是两种格式。 `TAR`是一个包含多个文件的未压缩存档。 `GZIP`是包含单个文件的压缩`tar`文件。

所以你需要在命令行上分两步完成

例如，将文本文件添加到`files.tar.gz`

```
7z.exe a -ttar files.tar *.txt 
7z.exe a -tgzip files.tar.gz files.tar 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-28T20:47:48.167

这是一个单行：

```
7za a dummy -ttar -so @filelist | 7za a pack.tgz -sipack.tar -tgzip -mx9 
```

或者

```
for /d %%X in (*) do ( 7za a dummy -ttar -so "%%X\" | 7za a %%X.tgz -tgzip -si%%X.tar ) 
```

# java - ProGuard 的“保持”论点的概括

> ID：11450376
> 
> 赞同：1
> 
> 时间：2012-07-12T10:59:07.590
> 
> 标签：java, android, scala, proguard, sbt-android-plugin

[ProGuard在这里](http://proguard.sourceforge.net/index.html#manual/usage.html#classspecification)定义了它的“保留”语法。

```
[@annotationtype] [[!]public|final|abstract|@ ...] [!]interface|class|enum classname
    [extends|implements [@annotationtype] classname]
[{
    [@annotationtype] [[!]public|private|protected|static|volatile|transient ...] <fields> |
                                                                      (fieldtype fieldname);
    [@annotationtype] [[!]public|private|protected|static|synchronized|native|abstract|strictfp ...] <methods> |
                                                                                           <init>(argumenttype,...) |
                                                                                           classname(argumenttype,...) |
                                                                                           (returntype methodname(argumenttype,...));
    [@annotationtype] [[!]public|private|protected|static ... ] *;
    ...
}] 
```

是否可以继续使用广义修饰符和类型？
例如`-keep * * my.package.MySomething { *; }` The 1st`*`表示任何来自 this part:的内容`[!]public|final|abstract|@ ...]`，而
2nd`*`表示来自 this part:的任何内容`[!]interface|class|enum`。

更深入一点，我正在尝试动态生成 ProGuard 参数，但我不知道`my.package.MySomething`是 an `abstract class`or`public enum`还是其他任何东西。

有没有办法，ProGuard 中的一个选项可以帮助我完成这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T22:39:51.590

配置

```
-keep class my.package.MySomething { *; } 
```

做你想做的事。如果您想进一步限制匹配项（例如公共；或接口而不是类），您只需要添加访问修饰符。

# .net - 无法将 .net 框架 4 dll 与 BIDS 2008 一起使用

> ID：11450377
> 
> 赞同：1
> 
> 时间：2012-07-12T10:59:11.567
> 
> 标签：.net, ssis, bids

我正在尝试使用 BIDS 2008 创建一个 SSIS 包，其中一些我想在其中使用的应用程序 dll 内置在 .net 框架 4 中。

但是当我试图在 BIDS 2008 中引用这些 dll 时，我无法添加它们，也没有抛出错误。有人知道如何在 BIDS 2008 中使用 .net framework 4 dll 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:04:36.417

我想你会发现你做不到。在 SQL Server 2008 中，您使用 .net 3.5。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T11:07:05.687

不，你不能，它必须是 3.5。

要验证它，进入脚本任务，选择视图 -> 项目资源管理器并双击 proprieties 文件夹。你会看到的：

![在此处输入图像描述](../Images/2da3989fb2ce033c969044735626176f.png)

# java - 将 PMD 默认规则与属性一起使用

> ID：11450383
> 
> 赞同：0
> 
> 时间：2012-07-12T10:59:47.007
> 
> 标签：java, rules, pmd

如何将默认规则与 PMD 中的属性一起使用。

现在我使用默认规则

```
<rule ref="rulesets/basic.xml/UselessOperationOnImmutable"/> 
```

这工作正常，但像 Codesize 中的“NPathComplexity”这样的规则使用属性，因此我们也可以配置默认规则。如何配置这个。有人请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T12:33:15.497

```
<rule ref="rulesets/codesize.xml/CyclomaticComplexity">
  <properties>
     <property name="reportLevel" value="5"/>
  </properties>
</rule> 
```

工作正常。

# sql - SQL如何减去浮点时间和字符串时间？

> ID：11450388
> 
> 赞同：1
> 
> 时间：2012-07-12T11:00:06.823
> 
> 标签：sql, db2

表 DB2

```
ID       HOURS        HOURSMINUTES       
1000     480.5        30:30:00 
```

我想得到 HOURS - HOURSMINUTES

```
ID       HOURS - HOURSMINUTES
1000       450.0 
```

HOURS 是 HOURS 中的浮点值 - 所以 480.5 小时。HOURSMINUTES 是字符串值：30:30:00（30 小时 30 分 00 秒）

怎么减？

这是我的完整表达，因为我从两个表中获取值（我以这种格式获取它们，但我不能减去）。我已经从两种时间戳格式中减去 HOURS - 结果是浮点数。累积时间是字符串值。

```
select t1.id,
dec (( timestampdiff(
  4, 
  char(t1.actualfinish - t1.reportdate))/60.00),10,2) as HOURS,t2.cumulativetime as HOURSMINUTES
from t1
join t2 on t2.id=t1.id 
```

当我尝试在下面插入解决方案时，出现错误。

```
 select t1.id,
    dec (( timestampdiff(
      4, 
      char(t1.actualfinish - t1.reportdate))/60.00),10,2) as HOURS,t2.cumulativetime as HOURSMINUTES,

dec (( timestampdiff(
      4, 
      char(t1.actualfinish - t1.reportdate))/60.00),10,2)- cast(substr(t2.cumulativetime, 1, 2) as int) - 
      (cast(substr(t2.cumulativetime, 4, 2) as int) / 60.0) as diff
    from t1
    join t2 on t2.id=t1.id 
```

我也试过 Kapil 版本：

```
select t1.id,
    dec (( timestampdiff(
      4, 
      char(t1.actualfinish - t1.reportdate))/60.00),10,2) as HOURS,t2.cumulativetime as HOURSMINUTES,

(dec (( timestampdiff(
  4, 
  char(t1.actualfinish - t1.reportdate))/60.00),10,2) - (CAST(substr(t2.cumulativetime , 1, 2) AS float) + CAST(substr(t2.cumulativetime , 4, 2) AS float)/60 + CAST(substr(t2.cumulativetime , 7, 2) AS float)/3600)) as diff

from t1
    join t2 on t2.id=t1.id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:04:40.163

```
select HOURS - 
       cast(substr(HOURSMINUTES, 1, 2) as int) - 
      (cast(substr(HOURSMINUTES, 4, 2) as int) / 60.0) as diff 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T11:13:18.577

尝试这个：

```
Select  (HOURS - (CAST(substr(HOURSMINUTES , 1, 2) AS float) + CAST(substr(HOURSMINUTES , 4, 2) AS float)/60 + CAST(substr(HOURSMINUTES , 7, 2) AS float)/3600)) as diff
From table 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T13:00:06.377

以下是在兼容模式下使用 DB2 for z/OS 9.1 版的解决方案：

```
select
  t.HRS
  - cast(substr(t.HMS, 1, locate(':', t.HMS) - 1) as FLOAT)
  - (cast(substr(t.HMS, locate(':', t.HMS) + 1, locate(':', t.HMS, locate(':', t.HMS) + 1) - locate(':', t.HMS) - 1) as FLOAT) / 60.0)
  - (cast(substr(t.HMS, locate(':', t.HMS, locate(':', t.HMS, locate(':', t.HMS) + 1)) + 1) as FLOAT) / 3600.0)
from
  (
    select
      cast(480.5 as float) as HRS
      , '333:44:55' as HMS
    from
      sysibm.SYSDUMMY1
  ) as t
with ur for read only; 
```

这给出了 的结果`146.75138888888887`。

如果有可用的，您可以使用它来简化在字符串中[`LOCATE_IN_STRING`](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/topic/com.ibm.db2z9.doc.sqlref/src/tpc/db2z_bif_locateinstring.htm)查找第 n 个的过程。`:``HMS`

# iphone - iPhone 应用程序在添加 UISwitch 时崩溃

> ID：11450391
> 
> 赞同：0
> 
> 时间：2012-07-12T11:00:16.240
> 
> 标签：iphone, ios, svn, crash, uiswitch

当我`UISwitch`在 xib 中添加一个时，我的 iPhone 应用程序崩溃了。无论我在哪个视图控制器的视图上添加`UISwitch`.

有趣的是...当我推送该视图控制器时，`initWithNibName`它会被调用并且应用程序在被调用之前崩溃`viewDidLoad`！

该代码在团队的 SVN 存储库中共享。我怀疑原因可能是项目文件可能已被某人无法正确解决的 svn 冲突损坏。这是我能想到的一种可能性，但不知道在哪里可以找到这次崩溃的实际原因。

`initWithNibName`我需要专家的建议，了解这种崩溃的可能性，在哪里可以找到在调用 之后但调用之前发生崩溃的原因`viewDidLoad`。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T12:22:51.430

请检查您在 initWithNibName 后初始化时给出的名称和 XIB 名称是否相等。

例如：

```
UIViewController *YourView = [[YourViewController alloc] initWithNibName:@"YourViewController" bundle:nil]; 
```

检查 initWithNibNme 后的名称和 XIB 文件的名称是否相同

# php - Yii，不使用隐藏字段设置模型值

> ID：11450394
> 
> 赞同：3
> 
> 时间：2012-07-12T11:00:28.393
> 
> 标签：php, yii

我想在我的模型中设置字段的值。字段（源）在数据库中，但表单上没有用于捕获数据的字段。我想在不创建隐藏表单字段的情况下设置字段的值。那可能吗？

谢谢！

```
//in controller
public function actionTest()
                {
        $model=new TestForm();
        $src = 'hello';  
        $model->source($src);
        echo $model->source; // hello
        $this->render('_form',array('model'=>$model));    
                } 
```

然后提交表单，当然 $source 不在 _POST 中，因为没有字段可以捕获 $source

但是我已经设置了 $model->source 的值，但是这个值似乎并没有持续存在，因为它没有保存在数据库中。

我发现解决这个问题的唯一方法是使用隐藏字段并将 $source 的值传递给表单。

有没有办法设置 $model->source 并让这个值进入数据库而不通过表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:53:36.563

如果您需要`$source`在显示表单时设置 的值（因为例如当您手头有所需的数据时），则创建一个隐藏的输入控件。这没有什么问题。您想在模型中保留一个非默认值，而隐藏的输入元素就是这样做的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:48:55.537

那么表单必须在某个地方发布，并且在 Yii 中建议发布回同一页面。

我会这样做：

```
public function actionUpdate($id)
    {
        $model=$this->loadModel($id);

        // Uncomment the following line if AJAX validation is needed
        // $this->performAjaxValidation($model);

        if(isset($_POST['NotificationLog']))
        {
            $model->attributes=$_POST['NotificationLog'];
            if($model->save())
                $this->redirect(array('admin'));
        } else {
                  // set defaults
                  $model->source = 'hello';
            }

        $this->render('update',array(
            'model'=>$model,
        ));
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T23:57:51.377

在模型类的规则函数中执行类似的操作：

```
public function rules() {

    return array(
        .
        .
        .
        array('source', 'default', 'value' => 'hello'),
    );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T10:06:33.083

在类中使用 beforeSave。参考[http://www.yiiframework.com/doc/blog/1.1/en/post.create#customizing-x-9x-and-x-11x-operations](http://www.yiiframework.com/doc/blog/1.1/en/post.create#customizing-x-9x-and-x-11x-operations)

# android - Titanium：适用于 android 2.2 的绘图模块

> ID：11450396
> 
> 赞同：0
> 
> 时间：2012-07-12T11:00:32.933
> 
> 标签：android, module, titanium

我在市场上下载了 Paint 模块（Ti.Paint Android 版本 2.0.1），并在 Emulator Android 2.3 上运行它。没关系。但是当我在 Emulator Android 2.2(Froyo) 上运行时。这是错误：未找到请求的模块：ti.paint。在 Android 2.2 和 Android 2.3 上运行的 Paint 模块的版本是什么？或者如何在 android 2.2、2.3 上运行 Paint 模块？

谢谢，希普

信息：应用程序类型：移动 Titanium SDK：[INFO] Titanium SDK 版本：2.0.2 平台和版本：Android 2.2、2.3 设备：Android 模拟器主机操作系统：Windows XP Titanium Studio：Titanium Studio，构建：2.0.2.201205311912

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:03:20.247

我已经解决了我的问题。我想我得到了 ERR，因为我在运行之前没有清理我的项目，因为我得到了那个 ERR。

# javascript - JavaScript 事件命名约定

> ID：11450397
> 
> 赞同：35
> 
> 时间：2012-07-12T11:00:39.023
> 
> 标签：javascript, events, naming-conventions

我们刚刚讨论了事件名称是使用现在形式还是过去形式。事实是，事件通常在发生某些事情后触发：

```
store.save(object)
store.trigger("create", object) 
```

我想知道是否有任何事件命名约定？使用过去的形式会更有意义，另一方面，我的印象是使用现在的形式被更广泛地使用。

有没有关于这个主题的好资源？你知道已知的 JavaScript 库使用过去的形式来表示它的事件吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-12T11:25:25.113

我会用现在时。

大多数（如果不是全部）JavaScript 框架似乎都遵循 JavaScript DOM 事件 API 规定的约定。即对事件名称使用现在时。当我想到它时，这对我来说似乎是最自然的，尽管事实上事件是在触发后处理的。毕竟，事件是**在** *event name*上触发的。无论执行什么动作来触发事件，它都会发生在事件循环的当前迭代中。换句话说：就事件循环而言，事件和触发事件的动作同时发生。

一些框架，例如[YUI3](http://yuilibrary.com/)，提供了一个`after`钩子以及一个`on`用于自定义事件的钩子。这种区别在 YUI 的属性库中使用（除其他外）：

> `on`使用该方法注册的侦听器会在属性的存储状态更新**之前收到通知。**[...]
> 
> 由于这些侦听器在任何状态更改发生之前被调用，它们有能力防止状态更改发生 [...]
> 
> `after`使用该方法注册的侦听器会在属性的存储状态更新**后收到通知。**

来源：http: [//yuilibrary.com/yui/docs/attribute/index.html#on-vs-after](http://yuilibrary.com/yui/docs/attribute/index.html#on-vs-after)

我个人不知道任何使用过去时作为事件名称的框架，但是我并不熟悉所有这些框架。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-03T09:24:18.193

Bootstrap 为每个动作定义了两个事件。一个在开始动作时触发并使用现在时命名（例如`show`）。另一个在动作完成后触发——这个以过去分词形式 ( `shown`) 命名。

一切都在[http://getbootstrap.com/javascript/#js-events下进行了解释](http://getbootstrap.com/javascript/#js-events)

### 编辑

我想当动画开始发挥作用时，这种方法是有意义的。

# c# - DatagridView 未更新（使用 C# Windows 应用程序）

> ID：11450406
> 
> 赞同：-2
> 
> 时间：2012-07-12T11:01:16.730
> 
> 标签：c#, datagridview

> **可能重复：**
> [使用 C#.Net 更新 DataGridView](https://stackoverflow.com/questions/11437476/updating-datagridview-using-c-net)

这是我正在尝试但仍未更新的内容。

```
 con.Open();
 SqlDataAdapter da = new SqlDataAdapter("Select * from Table_Name", con);
 DataTable dt = new DataTable();
 da.Fill(dt);
 da.Update(dt);
 dataGridview1.DataSource = null;
 dataGridView1.DataSource = dt; 
```

另外，如果有任何方法使用 SQL Query 更新 DataGridView .....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T08:27:42.947

当数据适配器尝试填充数据表时，您需要调试代码以查看数据表是否实际填充了数据。

在这种情况下，您应该使用绑定源。这将确保您对数据表所做的任何更改都反映到 DataGridView 对象中。

您不需要在数据适配器上调用 Update()，只需 Fill() 就足够了。

```
 Public BindingSource bs = new BindingSource();
 Public DataTable dt = new DataTable();

 SqlDataAdapter da = new SqlDataAdapter("Select * from Table_Name", con);

 Con.Open();

 da.Fill(dt);

 Con.Close();

 bs.DataSource = dt;

 dataGridview1.DataSource = bs; 
```

这样做可以让您过滤/查询内存中的 DataTable，它会立即反映 datagridView 中的更改。

如果您的查询可以在数据表中完成，则查询数据库不是一个好习惯。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-12T11:23:41.673

试试下面的代码

```
con.Open();  
SqlDataAdapter da = new SqlDataAdapter("Select * from Table_Name", con);  
Dataset ds = new Dataset();   //changed code from datatable to dataset
da.Fill(ds);  
da.Update(ds);  
dataGridView1.DataSource = ds;
dataGridView1.DataBind(); //databinding done here. this is missing in your code 
```

# google-drive-api - 您能否阐明在我的应用上使用 Google Drive 徽标的政策？

> ID：11450407
> 
> 赞同：1
> 
> 时间：2012-07-12T11:01:21.833
> 
> 标签：google-drive-api

该文档在将徽标用作按钮方面令人困惑。具体来说，我在***Use the Drive Badge 和 Brand***下看到了这两条相互矛盾的评论：

> **在您的应用程序中**
> 
> 作为使用 Google Drive 启动操作的按钮，例如保存到 Google Drive
> 
> **不该做的事**
> 
> 请勿在按钮上使用 Google 或 Google Drive 徽标

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T23:57:31.660

对于按钮，可以使用纯文本（例如“保存到 Google Drive”）*或*带有工具提示的图标。[此处](https://developers.google.com/drive/branding#in_your_application)显示了这两种用途。

*不要*做的是在按钮内使用[“文本徽标”](https://developers.google.com/drive/branding#using_the_google_drive_brand)图像。例如，不要这样做： ![在此处输入图像描述](../Images/20821036fbbb0b46e5e5c0fe581d6289.png)

# .net - F# 多态性

> ID：11450408
> 
> 赞同：3
> 
> 时间：2012-07-12T11:01:22.627
> 
> 标签：.net, f#, polymorphism, records, multimethod

关于记录类型，有什么方法可以处理 F# 中的多态性？

举个例子，假设我们有两种地址记录类型，街道地址和邮箱地址。我认为在行为方面可以通过模式匹配来处理它们。但是引用呢，有什么方法可以从其他记录中引用（不是指对象引用）这两种类型

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T12:07:59.693

如果我正确理解您的问题，我会使用有区别的工会：

```
type StreetAddress = {. . . }
type BoxAddress = {. . .}

type Address =
  | StreetAddress of StreetAddress
  | BoxAddress of BoxAddress 
```

and then you can create and reference `Address` values.

If street and box address share some common data you could put it into a separate `BaseAddress` record type, that is then used inside `StreetAddress` and `BoxAddress`, or used directly by `Address`:

```
type BaseAddress = {. . . }
type StreetAddress = {. . . }
type BoxAddress = {. . .}

type Address =
  | StreetAddress of BaseAddress*StreetAddress
  | BoxAddress of BaseAddress*BoxAddress 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-12T11:26:12.603

所以我认为你希望能够创造出类似的东西

```
type A = {aval:int;b:B}
and B = {bval:int;a:A} 
```

现在这个定义可以很好地编译，但是您将无法实际创建它，因为记录是常量并且您无法创建所需的递归结构。然而，像

```
type A = {aval:int;b:B option}
and B = {bval:int;a:A option} 
```

实际上可以创建并且可能是您想要的

# jquery - 为什么动态创建的元素不会淡出？

> ID：11450413
> 
> 赞同：1
> 
> 时间：2012-07-12T11:01:33.747
> 
> 标签：jquery, fade

我已经动态创建了一个元素，并希望它在 Ajax`success`回调中延迟 2 秒后淡出。

```
success: function(response){
    if(response == "success")
        $("#main").prepend("<div class='success'>...</div>");
    else
        $("#main").prepend("<div class='error'>"+response+"</div>");

    window.setTimeout(
        function(){
            $(".success, .error").fadeOut()
        }, 2000);
} 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:05:14.460

由于我不清楚在您的 Ajax 方法之前或之后可能会发生什么，您可以尝试这种方法：

```
success: function(response){
    var resultDiv = $('<div />', { text: response });
    if(response == "success")
        resultDiv.addClass('success').prependTo('#main');
    else
        resultDiv.addClass('error').prependTo('#main');

    setTimeout(function(){resultDiv.fadeOut()}, 2000);
} 
```

我整理了一个粗略的 JSFiddle，似乎证明了它的工作原理：http: [//jsfiddle.net/LA7xN/](http://jsfiddle.net/LA7xN/)。我显然没有使用实际的 Ajax 调用，而是选择只传入一个值来模拟响应。

# javascript - 如何在 jQuery.load(html) 之后在 jQuery.Treeview 中选择当前元素？

> ID：11450415
> 
> 赞同：0
> 
> 时间：2012-07-12T11:01:36.387
> 
> 标签：javascript, jquery, treeview

我在**sample.html**文件中有这样的 HTML 代码：

```
<ul id='topics' class='filetree'>
<li><span class='folder'><a href='?Lang=en&TopicID=#'>Topics</a></span>
<ul>
<li><span class='folder'><a href='?Lang=en&TopicID=1'>Topic 1</a></span>
<ul>
<li><span class='file'><a href='?Lang=en&TopicID=1.1'>Topic 1.1</a></span></li>
<li><span class='file'><a href='?Lang=en&TopicID=1.2'>Topic 1.2</a></span></li>
<li><span class='file'><a href='?Lang=en&TopicID=1.3'>Topic 1.3</a></span></li>
</ul>
</li> 
```

使用**JQuery.load**我加载 html 文件以生成 Treeview

```
<div id="LtrLeftContent">
     <script language="javascript" type="text/javascript">
         $('#LtrLeftContent').load('sample.html', function () {
                $("#topics").treeview();
         });
     </script>
</div> 
```

**第一个问题：**如何找出当前节点文本。单击树节点时？
**第二个问题：**如何找出父节点+当前节点文本。单击树节点时？
**第三个问题：**如何将 CSS 设置为节点。单击树节点时？

经过几次尝试，我得到了当前元素

```
$("li span").click(function () {
    alert($(this).text());
}); 
```

完整代码如下

```
<div id="LtrLeftContent">
        <script language="javascript" type="text/javascript">  
            $('#LtrLeftContent').load('sample.html', function () {  
                $("#topics").treeview();  
                $("li span").click(function () {  
                    alert($(this).text());  
                });  
            });                 
        </script>  
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:13:35.793

```
$('a').live('click', function (e) {
    e.preventDefault();
    console.log($(e.currentTarget).text());
    console.log($(e.currentTarget).closest('.folder').text());

    // didn't quite get your last question
    // but this is how you would manipulate 
    // the current elements parent list item
    $(e.currentTarget).parents('li').css({
        'background-color': '#000'
    });
    return false;
}); 
```

# java - 增量索引 lucene

> ID：11450416
> 
> 赞同：1
> 
> 时间：2012-07-12T11:01:42.060
> 
> 标签：java, lucene, indexing, increment

我正在使用 Lucene 3.6 在 Java 中制作应用程序，并希望提高速率。我已经创建了索引，我读到你要做的就是打开现有的索引，并检查每个文档的索引和文档修改日期，看看它们是否不同，删除索引文件并重新添加。我的问题是我不知道如何在 Java Lucene 中做到这一点。

谢谢

我的代码是：

```
public static void main(String[] args) 
    throws CorruptIndexException, LockObtainFailedException,
           IOException {

    File docDir = new File("D:\\PRUEBASLUCENE");
    File indexDir = new File("C:\\PRUEBA");

    Directory fsDir = FSDirectory.open(indexDir);
    Analyzer an = new StandardAnalyzer(Version.LUCENE_36);
    IndexWriter indexWriter
        = new IndexWriter(fsDir,an,MaxFieldLength.UNLIMITED);

    long numChars = 0L;
    for (File f : docDir.listFiles()) {
        String fileName = f.getName();
        Document d = new Document();
        d.add(new Field("Name",fileName,
                        Store.YES,Index.NOT_ANALYZED));
        d.add(new Field("Path",f.getPath(),Store.YES,Index.ANALYZED));
        long tamano = f.length();
        d.add(new Field("Size",""+tamano,Store.YES,Index.ANALYZED));
        long fechalong = f.lastModified();
        d.add(new Field("Modification_Date",""+fechalong,Store.YES,Index.ANALYZED));
        indexWriter.addDocument(d);
    }

    indexWriter.optimize();
    indexWriter.close();
    int numDocs = indexWriter.numDocs();

    System.out.println("Index Directory=" + indexDir.getCanonicalPath());
    System.out.println("Doc Directory=" + docDir.getCanonicalPath());
    System.out.println("num docs=" + numDocs);
    System.out.println("num chars=" + numChars); 
```

}

* * *

谢谢 Edmondo1984，你帮了我很多。

最后我做了如下所示的代码。存储文件的哈希，然后检查修改日期。

在 9300 个索引文件中需要 15 秒，而重新索引（没有任何索引没有更改，因为没有文件）需要 15 秒。我做错了什么还是我可以优化代码以减少花费？

* * *

感谢 jtahlborn，我设法平衡了 indexReader 的创建和更新时间。您不应该更新现有索引应该更快地重新创建它吗？是否可以进一步优化代码？

```
if(IndexReader.indexExists(dir))
            {
                //reader is a IndexReader and is passed as parameter to the function
                //searcher is a IndexSearcher and is passed as parameter to the function
                term = new Term("Hash",String.valueOf(file.hashCode()));
                Query termQuery = new TermQuery(term);
                TopDocs topDocs = searcher.search(termQuery,1);
                if(topDocs.totalHits==1)
                {
                    Document doc;
                    int docId,comparedate;
                    docId=topDocs.scoreDocs[0].doc;
                    doc=reader.document(docId);
                    String dateIndString=doc.get("Modification_date");
                    long dateIndLong=Long.parseLong(dateIndString);
                    Date date_ind=new Date(dateIndLong);
                    String dateFichString=DateTools.timeToString(file.lastModified(), DateTools.Resolution.MINUTE);
                    long dateFichLong=Long.parseLong(dateFichString);
                    Date date_fich=new Date(dateFichLong);
                    //Compare the two dates
                    comparedates=date_fich.compareTo(date_ind);
                    if(comparedate>=0)
                    {
                        if(comparedate==0)
                        {
                            //If comparation is 0 do nothing
                            flag=2;
                        }
                        else
                        {
                            //if comparation>0 updateDocument
                            flag=1;
                        }
                    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T06:48:00.780

根据 Lucene 数据模型，您将文档存储在索引中。在每个文档中，您将拥有要索引的字段，即所谓的“已分析”字段和未“已分析”的字段，您可以在其中存储时间戳和以后可能需要的其他信息。

我觉得您在文件和文档之间存在一定的混淆，因为在您的第一篇文章中您谈到了文档，现在您尝试调用 IndexFileNames.isDocStoreFile(file.getName()) 它实际上只告诉文件是否是包含的文件Lucene 索引。

如果你了解 Lucene 对象模型，编写你需要的代码大约需要三分钟：

*   您必须通过简单地查询 Lucene 来检查文档是否已经存在于索引中（例如，通过存储包含唯一标识符的未分析字段）。
*   如果您的查询返回 0 个文档，您会将新文档添加到索引中
*   如果您的查询返回 1 个文档，您将获得其“时间戳”字段并将其与您尝试存储的新文档之一进行比较。然后您可以使用文档的 docId 将其从索引中删除，如有必要，添加新的。

另一方面，如果您确定要始终修改以前的值，则可以参考 Lucene in Action 中的以下代码段：

```
public void testUpdate() throws IOException { 
    assertEquals(1, getHitCount("city", "Amsterdam"));
    IndexWriter writer = getWriter();
    Document doc = new Document();
    doc.add(new Field("id", "1",
    Field.Store.YES,
    Field.Index.NOT_ANALYZED));
    doc.add(new Field("country", "Netherlands",
    Field.Store.YES,
    Field.Index.NO));
    doc.add(new Field("contents",
    "Den Haag has a lot of museums",
    Field.Store.NO,
    Field.Index.ANALYZED));
    doc.add(new Field("city", "Den Haag",
    Field.Store.YES,
    Field.Index.ANALYZED));
    writer.updateDocument(new Term("id", "1"),
    doc);
    writer.close();
    assertEquals(0, getHitCount("city", "Amsterdam"));
    assertEquals(1, getHitCount("city", "Den Haag"));
} 
```

如您所见，片段使用未分析的 ID，因为我建议保存可查询的简单属性，并使用 updateDocument 方法首先删除然后重新添加文档。

您可能想直接检查 javadoc

[http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/index/IndexWriter.html#updateDocument(org.apache.lucene.index.Term,org.apache.lucene.document。文件](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/index/IndexWriter.html#updateDocument(org.apache.lucene.index.Term,org.apache.lucene.document.Document)）

# android - 在清单文件中定义活动的正确语法是什么

> ID：11450421
> 
> 赞同：14
> 
> 时间：2012-07-12T11:02:03.830
> 
> 标签：android, android-activity, syntax, manifest

添加活动的正确方法是`AndroidManifest.xml`什么？

实际上，我在很多地方都看到过定义为的活动

```
<activity 
    android:name="MyFirstActivity" 
    android:label="@string/title_first_activity">
</activity> 
```

在某些地方作为

```
<activity 
    android:name=".MySecondActivity" 
    android:label="@string/title_second_activity">
</activity> 
```

我只是想知道**放置一个点（。）**是否是将活动添加到清单文件的正确方法。

我浏览了很多帖子，但没有找到确切的解决方案。[这](https://stackoverflow.com/questions/2337874/best-way-to-add-activity-to-an-android-project-in-eclipse)表明 dot(.) 不是必需的，而[这](https://stackoverflow.com/questions/4870937/android-manifest-xml)表明使用 dot(.)。那么正确的方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T11:06:48.827

点表示你的包名。它是更短的声明类型。

> 如果您定义一个子类，就像您几乎总是为组件类（Activity、Service、BroadcastReceiver 和 ContentProvider）所做的那样，则通过 name 属性声明子类。名称必须包含完整的包装名称。例如，一个 Service 子类可能声明如下：

```
<manifest . . . >
     <application . . . >
         <service android:name="com.example.project.SecretService" . . . >
             . . .
         </service>
         . . .
     </application> 
</manifest> 
```

> 但是，作为简写，如果字符串的第一个字符是句点，则该字符串将附加到应用程序的包名称（由元素的包属性指定）。以下分配与上述相同：

```
<manifest package="com.example.project" . . . >
     <application . . . >
         <service android:name=".SecretService" . . . >
             . . .
         </service>
         . . .
     </application> 
</manifest> 
```

> 启动组件时，Android 会创建命名子类的实例。如果未指定子类，则会创建基类的实例。

[http://developer.android.com/guide/topics/manifest/manifest-intro.html](http://developer.android.com/guide/topics/manifest/manifest-intro.html) **声明类名**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T11:23:37.610

是的，把点放在正确的方式..如果你看到它看起来像日食自我生成的活动。

```
 <activity 
        android:name=".MyFirstActivity" 
        android:label="@string/app_name">
    </activity> 
```

所以这是正确的方法，我们的ide可以理解

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-06-09T19:35:27.487

使用相对路径很好。
路径由点分隔，而不是斜线。

```
android:name=".one_path_level_down.MainActivity"
android:name=".one_path_level_down.DetailActivity" 
```

顶层是“package=”中清单文件中的包级别。类似于以下内容：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.abc.myapp1" > 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-12T11:28:26.810

为了这个目的，我们在 manifest 标记下定义了包，只是如果有任何活动驻留在同一个包中，我们就不必一次又一次地声明它。我们只从**点**开始写就知道它属于同一个包。驻留在同一个包中的所有活动都将通过此访问，如果您声明 com.example 以外的新包，请说 com.example.sample，而您只需定义 .sample.YourActivityname.thats 它。我们这样做是从正确的包装。

希望这会帮助你。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-12T11:31:02.133

> [http://developer.android.com/guide/topics/manifest/activity-element.html#nm](http://developer.android.com/guide/topics/manifest/activity-element.html#nm)
> 
> ```
> android:name
> The name of the class that implements the activity, a subclass of Activity. The attribute value should be a fully qualified class name 
> ```
> 
> （例如，“com.example.project.ExtracurricularActivity”）。但是，作为简写，如果名称的第一个字符是句点（例如，“.ExtracurricularActivity”），它会附加到 .
> 
> 所以给定ApplicationManifest.xml：
> 
> ...
> 
> 那么由于 android:name=".view.TaskListListView" 有一个领先的句号，所以它被解释为 android:name="com.stackoverflow.android.geotask.view.TaskListListView"。

[来源](https://stackoverflow.com/questions/4834122/whats-the-dot-for-when-registering-an-activity)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-12T11:04:20.323

就这样做，这意味着你在这个包中的活动`com.your.package` 我们提到`MySecondActivity`这个活动与那个包有关

```
<activity 
     android:name="com.your.package.MySecondActivity" 
     android:label="@string/title_second_activity">
</activity> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-12T11:31:52.867

点不是必需的，但它基本上意味着：活动类位于应用程序的同一个包中。因此，如果您的应用程序包是：com.your.package 那么：

1.  **.YourActivity**表示你的类在 com.your.package 中。
2.  **YourActivity**表示你的类在 com.your.package 中（同上）。

所以这意味着这基本上是同一件事

为了确认我的答案，请查看[CesarB 的答案](https://stackoverflow.com/questions/3608017/activity-name-in-androidmanifest-xml)，我还获取了 android 源 coe，我完全同意他的观点，这就是 AndroidManifest 中名称约定的工作方式：

1.  如果名称以点开头，请始终在其前面加上包。
2.  如果名称在其他任何地方（不是开头）有一个点，请不要为其添加前缀。
3.  如果名称根本没有点，还要在它前面加上包。

# mysql - 20 列表中的索引字段。一个 SQL WHERE 子句中的多个条件

> ID：11450423
> 
> 赞同：0
> 
> 时间：2012-07-12T11:02:05.560
> 
> 标签：mysql, sql, database, indexing, where-clause

我目前正在开始创建一个应用程序，其中最重要的部分是一个包含 20 列的表格。该表将来将包含 3-5-7k 条记录。我必须将此特定表中的一个 WHERE 子句中的多个列组合起来以进行过滤（小于、等于等）。这些列是 varchars、ints、decimal 和 date。所以我的问题是，如果我假设有 3k 行，如果在 WHERE 子句中使用全部或超过 10 个条件，我的查询可能会慢一点，我如何决定要索引哪些列。如何优化这样的查询。我知道 3-5-7k 行对 MySQL 来说不算什么。问题是我在表中有 20 列。另外，如果这很重要，我将在服务器上使用 PHP。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T05:08:08.983

每个表都有特定的行为。我们必须分析每个案例。

一般来说，为了使搜索快速，您应该在 where 中包含的 20 列中的每一列中创建一个索引。另一方面，这会减慢“插入”并占用大量空间索引。因此，我们应该分析是否在每一列中添加索引。

决定哪一列不应该是这个索引的一些提示：

*   避免重复列有值，执行计划不使用你的索引。
*   避免使用索引类型：varbinary。
*   具有高度更新的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T12:21:32.673

在确定主键后，这应该是一个比性能优化更好的逻辑猜测，您可能会向表中添加额外的索引。

您必须记住，在给定的表引用中，mysql 一次只能有效地使用一个索引。引擎现在确实有可能在内部合并各种索引，然后同时使用它们，但性能不是很好。（见：[http](http://www.mysqlperformanceblog.com/2009/09/19/multi-column-indexes-vs-index-merge) ://www.mysqlperformanceblog.com/2009/09/19/multi-column-indexes-vs-index-merge ）

我建议您确定一组要处理的查询（最终也与其他表连接），然后，如果过滤字段太多，请确定过滤出/入记录的最有效字段。如何知道什么是最有效的？例如，一个非空唯一字段非常适合：mysql 会像 ligtning 一样快地过滤掉这个字段。

一般来说，经验法则是选择一个高度区分的列/列集：这些值不应该重复太多次，否则索引会效率低下。

这是一个开始。

问候

# xcode4.3 - 在横向的 UIPageViewController 中将脊椎位置设置为左侧

> ID：11450425
> 
> 赞同：2
> 
> 时间：2012-07-12T11:02:14.750
> 
> 标签：xcode4.3, landscape, ios5.1, uipageviewcontroller

对不起，我是新手。我正在尝试编写一个具有翻页效果的 ipad 应用程序。我的应用程序仅支持横向视图，并且我一直在默认的基于页面的应用程序项目上测试 UIPageViewController。一切似乎都很好，但我希望每个页面只显示 1 个 viewController（即使在横向），通过在左侧放置脊椎。我试过了

```
NSDictionary *options =  [NSDictionary dictionaryWithObject:
    [NSNumber numberWithInteger:UIPageViewControllerSpineLocationMin]
         forKey: UIPageViewControllerOptionSpineLocationKey];
self.pageViewController = [[UIPageViewController alloc] 
    initWithTransitionStyle:UIPageViewControllerTransitionStylePageCurl
    navigationOrientation:UIPageViewControllerNavigationOrientationHorizontal 
    options:options]; 
```

但是脊椎仍然在中间，并且一次显示两个视图控制器......我已经查看了整个网络，但找不到解决方案。请帮忙。

PS 有谁知道如何使用情节提要中的页面视图控制器对象？即使是来自 xcode 的示例也不使用它。

我发现问题出在哪里。在 rootViewController 中，有一个

```
- (UIPageViewControllerSpineLocation)pageViewController:(UIPageViewController *)pageViewController spineLocationForInterfaceOrientation:(UIInterfaceOrientation)orientation 
```

方法，它覆盖了spineLocation。删除所有内容并保留

```
UIViewController *currentViewController = [self.pageViewController.viewControllers objectAtIndex:0];
NSArray *viewControllers = [NSArray arrayWithObject:currentViewController];
[self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:NULL];

self.pageViewController.doubleSided = NO;
return UIPageViewControllerSpineLocationMin; 
```

解决问题。

但仍然想知道......有没有人设法理清如何在情节提要上做 UIPageViewController ？

# wordpress - wordpress 如何将简码添加到主题

> ID：11450426
> 
> 赞同：0
> 
> 时间：2012-07-12T11:02:20.077
> 
> 标签：wordpress, plugins, themes, shortcode

我安装了这个插件：[http ://wordpress.org/extend/plugins/easing-slider/installation/](http://wordpress.org/extend/plugins/easing-slider/installation/)

我设法安装和配置它。我可以通过以下方式在帖子或页面中使用它：[easingslider]

现在，我目前正在测试主题二十一十一。我想用这个替换 21 的默认标题。我该怎么做呢？

已经谢谢了！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-12T12:41:41.307

您可以`do_shortcode`在模板文件中放置 a，即在 header.php 中：

```
<?php echo do_shortcode('[your-shortcode]'); ?> 
```

完全取决于插件的编码方式。

# php - 通过 PHP 使用安全 Websocket - 加密握手

> ID：11450428
> 
> 赞同：4
> 
> 时间：2012-07-12T11:02:25.607
> 
> 标签：php, security, websocket, handshake

我读到（安全）Websocket 使用的端口与 HTTP(S) 协议相同。但是，我的 PHP Websocket 服务器从客户端接收加密握手，我正在监听 12345 端口上的打开连接。

我的系统通过非安全 websocket 运行良好，但我需要添加安全功能，我不明白为什么我会收到这些加密握手。多亏了 OSI 模型，这对我来说是透明的......

如果我配置 apache 来激活 SSL 引擎并监听 12345 端口。我将无法再次将此端口用于我的 PHP Websocket 服务器，因为它将处于“已使用”状态......或者我忘记了一些东西......

我迷路了 ：（

编辑：

这是我的安全 websocket 标头（使用`wss://`）：

`Request URL:wss://localhost:12345/`

这里是我的简单 websocket 标头（使用`ws://`）：

`Request URL:ws://localhost:12345/ Request Method:GET Status Code:101 Switching Protocols Request Headersview source Connection:Upgrade Host:localhost:12345 Origin:http://localhost Sec-WebSocket-Extensions:x-webkit-deflate-frame Sec-WebSocket-Key:wovBDvKiKdy/+0Y2BQPr9w== Sec-WebSocket-Version:13 Upgrade:websocket (Key3):00:00:00:00:00:00:00:00 Response Headersview source Connection:Upgrade Sec-WebSocket-Accept:1ao7ngQG4LAa3JxFibyvoocbSAM= Upgrade:websocket (Challenge Response):00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00`

为什么我在没有安全连接的情况下得到更多？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T08:54:18.913

> 我读到（安全）Websocket 使用的端口与 HTTP(S) 协议相同

默认情况下，是的 - 但您可以通过 URL 覆盖两者中的端口，请考虑：

```
http://www.example.com:443/
https://www.example.com:8080/
http://www.example.com:12345/ 
```

如果其他东西已经在监听特定的端口/地址，那么你就不能在那里运行第二台服务器 - 所以如果你的网络服务器已经在监听端口 443 (https)，​​你将无法运行单独的 websocket 服务器同一个端口。

只需将 HTTPS 服务器留在 443 并在 12345 运行 ssl ws 服务器。

* * *

刚看到你最后的评论。

SSL 不仅仅与您侦听的端口有关 - 流量是加密的。如果你想处理 wss 流量，那么你需要一个支持 SSL 的服务器。有多种实现方式，这取决于您如何实现当前服务器。

# iphone - 在iphone中平滑绘图

> ID：11450436
> 
> 赞同：1
> 
> 时间：2012-07-12T11:02:43.127
> 
> 标签：iphone, opengl-es, drawing, line, smooth

我想在我的绘图应用程序中画线。
我想在下图显示之前画线。

![在此处输入图像描述](../Images/1ce92020a5e32f31f97607147169ff6b.png)

在这里，您可以看到顶部和底部的线宽大于中间线。根据应用程序，当用户缓慢绘制时，线宽需要增加，而当用户快速绘制时，线宽会减小。

我试过[http://www.merowing.info/2012/04/drawing-smooth-lines-with-cocos2d-ios-inspired-by-paper/](http://www.merowing.info/2012/04/drawing-smooth-lines-with-cocos2d-ios-inspired-by-paper/)

但这与我的需要相反。

对这种平滑的绘图有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:23:47.287

我在您提供的示例链接中看到了一段代码

```
- (float)extractSize:(UIPanGestureRecognizer *)panGestureRecognizer
{
    // 1
    float vel = ccpLength([panGestureRecognizer velocityInView:panGestureRecognizer.view]);
    float size = vel / 166.0f;
    size = clampf(size, 1, 40);

    // 2
    if ([velocities count] > 1) {
        size = size * 0.2f + [[velocities objectAtIndex:[velocities count] - 1] floatValue] * 0.8f;
    }
    [velocities addObject:[NSNumber numberWithFloat:size]];
    return size;
} 
```

你能试一下吗 ？将其替换为...

```
- (float)extractSize:(UIPanGestureRecognizer *)panGestureRecognizer
{
    // 1
    float vel = ccpLength([panGestureRecognizer velocityInView:panGestureRecognizer.view]);
    float size = vel / 166.0f;
    size = clampf(size, 1, 40);

    // 2
    if ([velocities count] > 1) {
        size = size * 1.2f + [[velocities objectAtIndex:[velocities count] - 1] floatValue] * 0.8f;
    }
    [velocities addObject:[NSNumber numberWithFloat:size]];
    return size;
} 
```

**编辑**：无论如何，使用这种方法应该可以得到你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T10:18:18.500

添加代码

```
size = 40 - size; 
```

如下代码完全相反。

```
- (float)extractSize:(UIPanGestureRecognizer *)panGestureRecognizer
{
  //! result of trial & error
  float vel = ccpLength([panGestureRecognizer velocityInView:panGestureRecognizer.view]);

  float size = vel / 166.0f;

  size = clampf(size/2, 1, 20);

  if ([velocities count] > 1) {
    size = size * 0.2f + [[velocities objectAtIndex:[velocities count] - 1] floatValue] * 0.8f;
  }
  [velocities addObject:[NSNumber numberWithFloat:size]];
  return size;
} 
```

# java - 将 MongoDB 服务器属性放在 context.xml 中

> ID：11450437
> 
> 赞同：1
> 
> 时间：2012-07-12T11:02:53.470
> 
> 标签：java, mongodb, tomcat

在使用后端`JAVA`托管的 Web 项目中，我们可以在下面添加类似的内容（考虑连接服务器）`Tomcat``ORACLE/MYSQL``<Resource>``Oracle`

```
<?xml version="1.0" encoding="UTF-8"?>
<Context antiJARLocking="true" path="/myProject">

  <Resource auth="Container" driverClassName="oracle.jdbc.driver.OracleDriver" 
  factory="oracle.jdbc.pool.OracleDataSourceFactory" 
  maxActive="20" maxIdle="10" 
  maxWait="-1" name="jdbc/TestDB" password="dbPAss" type="oracle.jdbc.pool.OracleDataSource" 
  url="jdbc:oracle:thin:@DBHOST:PORT:SERVICENAME" 
  user="dbUser"/>

  <Loader delegate="true"/>
</Context> 
```

在项目中，如果它连接 a 并且可以通过使用在 a 中使用`context.xml`，则仅更改一些内容`MySQL``JAVA SERVLET`

```
Context initContext = new InitialContext();
Context envContext  = (Context)initContext.lookup("java:/comp/env");
DataSource ds = (DataSource)envContext.lookup("jdbc/TestDB"); 
```

然后创建它的`Connection`对象

使用它的正确语法应该是什么`MongoDB`？

我打算为 MongoDB 服务器存储 HOST、PORT、USERNAME 和 PASSWORD。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T21:07:22.653

实际上有一个用于 MongoDB 的 JDBC 驱动程序。一个刚刚由一家名为 UnityJDBC 的公司发布。您可以在以下网址免费下载程序和驱动程序...

[http://www.unityjdbc.com/mongojdbc/mongo_jdbc.php](http://www.unityjdbc.com/mongojdbc/mongo_jdbc.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T13:52:54.757

Tomcat 在使用`<Resource>`元素时只支持 JDBC 数据源（嗯，它支持其他东西，如 SMTP 会话等，但对于数据库，它们必须是基于 JDBC 的）。MongoDB 目前没有 JDBC 驱动（因为它不是关系型数据库，JDBC API 对它没有意义）（除非你想试试这个东西：[https](https://github.com/erh/mongo-jdbc) ://github.com/erh/mongo-jdbc ），所以你必须为它管理你自己的资源池。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-19T17:00:11.177

Tomcat（或更具体地说，JNDI）实际上支持任意资源（`<Resource>`中的元素`config.xml`），包括 MongoDB 的连接信息，而不需要 MongoDB（或任何其他非 RDBMS）使用 JDBC。所需要的只是实现`javax.naming`API 来定义自定义资源的属性（请参阅Tomcat JNDI HOW-TO 参考中的[添加自定义资源工厂](https://tomcat.apache.org/tomcat-7.0-doc/jndi-resources-howto.html#Adding_Custom_Resource_Factories)）。

我最近发现[了这个 GitHub 项目](https://github.com/pozil/mongodb-jndi-datasource)，该项目旨在在使用官方 MongoDB Java 客户端时将 MongoDB 数据源连接信息存储为 JNDI 资源。

如果您使用的是 Spring，[则此其他答案](https://stackoverflow.com/questions/4076254/mongodb-via-jndi)在使用 Spring 时通过 JNDI 资源提供有关 MongoDB 数据源配置的信息（并且该代码也可以用作为 MongoDB 或您的任何其他配置属性创建自己的自定义 JNDI 资源加载器的指南与存储在 Tomcat 中`context.xml`）。

# javascript - 链接多个异步函数

> ID：11450439
> 
> 赞同：1
> 
> 时间：2012-07-12T11:02:58.817
> 
> 标签：javascript, firefox-addon, firefox-addon-sdk, promise

**介绍**

我有一个问题来自这个：

[循环调用异步函数](https://stackoverflow.com/questions/11434320/loop-calling-an-asynchronous-function)

一旦我得到一个使用类似承诺的模式（使用 SDK 开发的附加组件中的 jsdeferred 库）调用异步函数的循环。

```
var sess = ...;
Deferred.define(this);      
function asyncFunction (session) {
    Deferred.next(function() {
        var d = new Deferred();
        (new Request({
              url: form.php,
              content: "sess=" + session,
              onComplete: function (response) {
                  d.call(response.json);
              }
        })).get();
        return d;
    }).next(function(resp) {
        if (resp.id) {
            asyncFunction(session);
            console.log(resp.msg);              
        }           
    });
}

asyncFunction(sess); 
```

我想将一个新的异步函数链接到这个请求中，例如，打开浏览器的选项卡：我不想在准备好之前继续执行。

**问题**

所以我明白了：

```
var sess = ...;
Deferred.define(this);      
function asyncFunction (session) {
    Deferred.next(function() {
        var d = new Deferred();
        (new Request({
              url: form.php,
              content: "sess=" + session,
              onComplete: function (response) {
                  d.call(response.json);
              }
        })).get();
        return d;
    })
    .next(function(resp) {
        var d = new Deferred();
        // Load tab
        tabs.activeTab.url = 'http://foo.com';
        tabs.activeTab.on('ready', function() {
            console.log(resp.id);
            d.call(resp.id); 
        });
        return d;
    })
    .next(function(resp) {
        if (resp.id) {
            asyncFunction(session);
            console.log(resp.msg);              
        }           
    });
}

asyncFunction(sess); 
```

我得到的结果是，对于循环的每次迭代，它都会再次运行所有先前的请求！所以我在控制台中得到了以下日志：

```
id1
msg1
id1
msg1
id2
msg2
id1
msg1
id2
msg2
id3
msg3
... 
```

显然我的预期是：

```
id1
msg1
id2
msg2
id3
msg3 
```

**问题**

很明显，我不理解承诺模式。我在两个 API 中阅读了很多内容：

*   [jsdeferred](http://cho45.stfuawsc.com/jsdeferred/#behavior)
*   [FF 插件 sdk](https://addons.mozilla.org/en-US/developers/docs/sdk/1.8/packages/api-utils/promise.html)

第一个是我一直使用到现在的那个。当我尝试要求该库时，第二个给出错误：

```
const { defer } = require('api-utils/promise'); (+) 
```

所以，我的问题是你是否知道任何关于承诺的好教程或一些关于**链接多个异步函数**的好例子。或者如果你知道怎么做，你会怎么做。

谢谢

**编辑：给出行（+）的错误**

```
error: An exception occurred.
Traceback (most recent call last):
  File "resource://ares-at-iiia-dot-csic/api-utils/lib/promise.js", line 16, in 
    }.call(this, function(require, exports) {
  File "resource://ares-at-iiia-dot-csic/api-utils/lib/promise.js", line 6, in return     function promised
    if (typeof(define) === 'function') { // RequireJS
  File "function promisedConcat(promises, unknown) {return promises.then(function         (values) {return resolve(unknown).then(function (valu
e) {return values.concat(value);});});", line NaN, in function promisedConcat
  File "function execute(args) {return call.apply(call, args);", line NaN, in function     execute
  File "exports.reject = reject;var promised = function () {var call =     Function.call;var concat = Array.prototype.concat", line NaN, in
 exports.reject = reject;var promised = function 
  File "function reject(reason, prototype) {var deferred =         defer(prototype);deferred.reject(reason);return deferred.promise;", line NaN
, in function reject
  File "exports.resolve = resolve", line NaN, in exports.resolve = resolve
  File "function resolve(value, prototype) {var deferred =     defer(prototype);deferred.resolve(value);return deferred.promise;", line NaN
, in function resolve
  File "exports.defer = defer", line NaN, in exports.defer = defer
  File "if (pending) {pending.push([resolved, rejected]);} else {result.then(resolved,     rejected);}return deferred.promise;}}});var defe
rred = {promise: promise, resolve: function resolve(value) {if (pending) {result =     isPromise(value) ? value : resolution(value);while (
pending.length) {result.then.apply(result, pending.shift());}pending = null;}},     reject", line NaN, in if 
  File "function rejected(reason) {deferred.resolve(reject(reason));", line NaN, in     function rejected
  File "function resolved(value) {deferred.resolve(resolve(value));", line NaN, in     function resolved
  File "function defer(prototype) {var pending = [], result;prototype = prototype ||     prototype === null ? prototype : Object.prototype;
var promise = Object.create(prototype, {then: {value: function then(resolve, reject)     {var deferred = defer(prototype);resolve = resolve
 ? attempt(resolve) : resolution;reject = reject ? attempt(reject) ", line NaN, in     function defer
  File "function isPromise(value) {return value && typeof value.then === "function";",     line NaN, in function isPromise
  File "function attempt(f) {return function effort(options) {try {return f(options);}     catch (error) {return rejection(error);}};", lin
e NaN, in function attempt
  File "function rejection(reason) {return {then", line NaN, in function rejection
  File "function resolution(value) {return {then", line NaN, in function resolution
  File "((function (require, exports) {"use strict"", line NaN, in 
  File "resource://ares-at-iiia-dot-csic/api-utils/lib/globals!.js", line 75, in getter
    value: define.bind(this)
TypeError: can't redefine non-configurable property 'define' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:59:35.403

嗯，看起来有点像范围界定问题。在您的最后一个函数中，应该没有`resp`可用的变量 - 我不确定它真正记录了什么。

是的，因为你`asyncFunction`最后再次调用，只要响应中有一个 id，你可能会得到一个无限循环。

但是，让我们尝试使用[附加 sdk 的承诺](https://addons.mozilla.org/en-US/developers/docs/sdk/1.8/packages/api-utils/promise.html)（不，我以前从未使用过它们 - 但它说它是基于[CommonJS Promises/A 的](http://wiki.commonjs.org/wiki/Promises/A)）：

```
const { defer } = require('api-utils/promise');
// or whatever you need in your code to use them - I'm no addOn-developer

var sess = ...;
Deferred.define(this);      
function asyncFunction (session) {
/* returns a promise itself */

    var d = defer();
    (new Request({
        url: form.php,
        content: "sess=" + session,
        onComplete: function (response) {
            d.resolve(response.json);
        }
    })).get();
    return d.promise.then(function(resp) {
        var d = defer();
        // Load tab
        tabs.activeTab.url = 'http://foo.com';
        tabs.activeTab.on('ready', function() {
            d.resolve(resp);
        });
        return d.promise;
    }).then(function(resp) {
        console.log("request #"+resp.id+"sucessful: "+resp.msg);  
        if (resp.id) {
            asyncFunction(session); // call recursively
        }           
    });
}
asyncFunction(sess); 
```

# c++ - 从 XML 中删除了不应删除的多个空格

> ID：11450442
> 
> 赞同：3
> 
> 时间：2012-07-12T11:03:12.130
> 
> 标签：c++, whitespace, tinyxml

此 C++ 代码中有一个错误。它将单词之间的多个空格替换为一个空格。无法弄清楚它在哪里。它不应该修剪两个单词之间的空格并将它们替换为一个。这是处理空格和空白的方法。

```
const char* TiXmlBase::SkipWhiteSpace( const char* p, TiXmlEncoding encoding )
{
    if ( !p || !*p )
    {
        return 0;
    }
    if ( encoding == TIXML_ENCODING_UTF8 )
    {
        while ( *p )
        {
            const unsigned char* pU = (const unsigned char*)p;

            if (    *(pU+0)==TIXML_UTF_LEAD_0
                 && *(pU+1)==TIXML_UTF_LEAD_1 
                 && *(pU+2)==TIXML_UTF_LEAD_2 )
            {
                p += 3;
                continue;
            }
            else if(*(pU+0)==TIXML_UTF_LEAD_0
                 && *(pU+1)==0xbfU
                 && *(pU+2)==0xbeU )
            {
                p += 3;
                continue;
            }
            else if(*(pU+0)==TIXML_UTF_LEAD_0
                 && *(pU+1)==0xbfU
                 && *(pU+2)==0xbfU )
            {
                p += 3;
                continue;
            }

            if ( IsWhiteSpace( *p ) )        // Still using old rules for white space.
                p++;
            else
                break;
        }
    }
    else
    {
        while ( *p && IsWhiteSpace( *p ) )
             // while(*p)
            ++p;
    }

    return p;
} 
```

**输入：**

```
<?xml version="1.0" standalone="no" ?>
<ToDo>
        <bold>Toy                                           store!</bold>
</ToDo> 
```

**预期输出：**

```
<?xml version="1.0" standalone="no" ?>
<ToDo>
        <bold>Toy                                           store!</bold>
</ToDo> 
```

**观察到的输出：**

```
<?xml version="1.0" standalone="no" ?>
<ToDo>
    <bold>Toy store!</bold>
</ToDo> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T11:19:08.110

切换到[TinyXML-2](http://www.grinninglizard.com/tinyxml2docs/index.html)：

> TinyXML-2 的优势
> 
> *   所有未来开发的重点。
> *   更少的内存分配（1/10 到 1/100），使用更少的内存（大约是 TinyXML-1 的 40%），并且速度更快。
> *   没有 STL 要求。
> *   更现代的 C++，包括适当的命名空间。
> *   **正确和有用的空白处理**

### 白色空间

> 微软有一篇关于空白的优秀文章：http: [//msdn.microsoft.com/en-us/library/ms256097.aspx](http://msdn.microsoft.com/en-us/library/ms256097.aspx)
> 
> TinyXML-2 以几乎符合规范的（希望）理智的方式保留空白。（TinyXML-1 使用了完全过时的模型。）
> 
> 作为第一步，根据 XML 规范的要求，所有换行符/回车符/换行符都被规范化为换行符。
> 
> 文本中的空白被保留。例如：
> 
> ```
> <element> Hello,  World</element> 
> ```
> 
> 保留“Hello”之前的前导空格和逗号之后的双倍空格。保留换行符，如下例所示：
> 
> ```
> <element> Hello again,  
>           World</element> 
> ```
> 
> 但是，不会保留元素之间的空白。虽然不严格遵守，但跟踪和报告元素间空间很尴尬，而且通常没有价值。TinyXML-2 将这些视为相同的 XML：
> 
> ```
> <document>
> <data>1</data>
> <data>2</data>
> <data>3</data>
> </document>
> 
> <document><data>1</data><data>2</data><data>3</data></document> 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-16T14:51:11.313

尝试在文件中设置`bool TiXmlBase::condenseWhiteSpace`，或在运行时调用。第一个对我有用。`false``tinyxml.cpp`[`TiXmlBase::SetCondenseWhiteSpace(false)`](http://www.grinninglizard.com/tinyxmldocs/classTiXmlBase.html#0f799ec645bfb8d8a969e83478f379c1)

这可能在 2012 年不存在，但现在存在。

# android - If/Else 语句的麻烦（android）

> ID：11450444
> 
> 赞同：0
> 
> 时间：2012-07-12T11:03:23.610
> 
> 标签：android, if-statement

我在让 IF/ELSE 语句正常工作时遇到了一些麻烦。

我有以下代码：

```
 File fileOnSD=Environment.getExternalStorageDirectory();    
    String storagePath = fileOnSD.getAbsolutePath();
    Bitmap BckGrnd = BitmapFactory.decodeFile(storagePath + "/oranjelanbg.png");
    ImageView BackGround = (ImageView)findViewById(R.id.imageView1);        
    BackGround.setImageBitmap(BckGrnd);
    if (){

    }else{
    TextView text1 = (TextView) findViewById(R.id.textView1);
    TextView text2 = (TextView) findViewById(R.id.textView2);
    text1.setVisibility(View.VISIBLE);
    text2.setVisibility(View.VISIBLE);
    } 
```

我正在努力实现追随。我的应用程序将图像下载到手机并将其用作背景。但是当你第一次运行应用程序时，图片还没有下载，所以必须有一些文字代替。默认情况下，文本是不可见的，我想在图像仍在下载且尚未放置时使其可见。

我应该在 IF 语句中使用什么表达式来检查图像是否已加载？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T11:04:50.090

```
 if (BckGrnd != null){
          BackGround.setImageBitmap(BckGrnd);
    }else{
    TextView text1 = (TextView) findViewById(R.id.textView1);
    TextView text2 = (TextView) findViewById(R.id.textView2);
    text1.setVisibility(View.VISIBLE);
    text2.setVisibility(View.VISIBLE);
    } 
```

**更好的解决方案：**

使用**AyncTask**下载图像：

```
AsyncTask<Void, Void, Void> loadingTask = new AsyncTask<Void, Void, Void>() {
        @Override
        protected void onPreExecute() {                                     
        TextView text1 = (TextView) findViewById(R.id.textView1);
        TextView text2 = (TextView) findViewById(R.id.textView2);
        text1.setVisibility(View.VISIBLE);
        text2.setVisibility(View.VISIBLE);
        }

        @Override
        protected Void doInBackground(Void... params) {                 
           // Download Image Here
        }
        @Override
        protected void onPostExecute(Void result) {  
           BackGround.setImageBitmap(BckGrnd);
           text1.setVisibility(View.GONE);
           text2.setVisibility(View.GONE);
        }

    };          
    loadingTask.execute(); 
```

# vb.net - 从搜索的数据表中检查单元格的值

> ID：11450446
> 
> 赞同：0
> 
> 时间：2012-07-12T11:03:28.860
> 
> 标签：vb.net

我需要检查第一个列中的第一个单元格是否包含字符“ND”。该单元格可以包含“Rm####”或“Rm####ND”。如果单元格包含“ND”字符，则需要使表单上的图片框可见。

这是我目前用来搜索访问数据库的代码......搜索结果总是只返回数据表中的一行数据。有没有办法可以将它与搜索结合起来？

```
 Try
        Dim con As New OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source='\\SERVER\Drawings\Database\Drawing Database.accdb'")
        con.Open()
        Me.DrawingsTableAdapter.DrawingNumber2(Me.Drawing_DatabaseDataSet.Drawings, ("%" & TextBox2.Text & "%"))
        Me.Validate()
        Me.TableAdapterManager.UpdateAll(Me.Drawing_DatabaseDataSet)
        con.Close()
    Catch ex As System.Exception
        System.Windows.Forms.MessageBox.Show(ex.Message) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:39:29.367

也许你丢失了单引号
**"%'" & TextBox2.Text & "'%"**
看看它是否有效

此外，我从未见过函数'DrawingNumber2'
，也没有在互联网上找到。
自定义代码太多，不太好理解。

# java - OSGi 和性能？

> ID：11450447
> 
> 赞同：4
> 
> 时间：2012-07-12T11:03:31.030
> 
> 标签：java, performance, osgi

是否`OSGi`适用于高性能应用服务器？

`OSGi`对生成高度模块化的应用程序有很大帮助，但是由于执行模型与常规 Java 应用程序不同（因为我知道`OSGi`应用程序在特定平台上运行，因此对性能有什么影响`Apache Felix`）。

在性能方面，您对不同的实现有何经验？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T11:24:19.357

根据我的经验，将应用程序从非 OSGi 迁移到 OSGi 环境（使用 Felix）对性能没有影响。我制作的每个版本都经过压力测试；压力测试的结果表明性能没有下降。

这可能取决于您的应用程序的功能。我将不考虑*明确*的 OSGi 概念（例如服务），因为此类新代码需要您自己进行测试，并且我假设您正在询问对现有 POJO 代码的影响。

OSGi 环境的*隐含*影响主要在于类加载。正如您可能知道的那样，OSGi 要求为每个捆绑包单独的类加载器，并提供一种将捆绑包中的代码*连接*到其他捆绑包中的依赖项的方法。当包中的类调用不同包中的类时，第二个包的类加载器负责加载第二个类。

与 vanilla Java 环境中使用的默认类加载器相比，此类加载逻辑*可能会*（但可能不会）消耗一些额外的工作。但是，除非您的代码本身不断地重新创建和重新加载类（这不太可能），否则任何性能影响都可能可以忽略不计。无论如何，这只是理论上的可能性。这取决于您选择的实现是否尽可能高效。

对内存占用也有很小的影响。最好进行堆转储并使用 mat 之类的东西来分析它。

相信我，您将花费更多的时间来了解 OSGi 概念、OSGi 容器、工具、版本管理之间的差异以及等待类加载的更多时间；）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T15:00:19.453

由于更快的类加载，OSGi 可能会导致非常小的性能提升。由于多个类加载器，它还可能导致内存消耗的非常小的增加。

与您问题中的断言相反：**OSGi 不会更改 Java 执行模型**。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-12T18:42:53.477

关于类加载性能的影响，我认为总体上 OSGi 与传统类加载模型的影响不是很大。

我认为支持和反对 OSGi 的因素有两个。您通常不会受到预先的“惩罚”，这就是解决阶段。需要解析捆绑包，并连接它们的依赖关系。还有其他复杂的因素，例如 DynamicImport-Package 等。

然后是实际的类加载性能。这就是 OSGi 可能获胜的地方。在 OSGi 类加载的情况下，它是对已经连接的依赖项的非常直接的委托。在传统类加载的情况下，这将是针对您的全局类路径的线性搜索。这将适用于您加载的每个类。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-12T11:12:26.597

您可能必须计算框架的某些启动时间，但在运行时它对性能的影响基本上为零，因为简而言之它只是关于类加载。

相当多的现代应用程序服务器使用 OSGi 实现作为基础（例如 JBoss、WebSphere、WebLogic、GlassFish），因此您可以确定它是可靠的并且性能良好。请参阅此参考列表：[http ://en.wikipedia.org/wiki/OSGi#Projects_using_OSGi](http://en.wikipedia.org/wiki/OSGi#Projects_using_OSGi)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-13T13:51:57.040

我会说除非你考虑到类加载，否则不会有性能损失，但这只发生在你添加新模块（服务）或启动框架时。也许设计一个要模块化的应用程序这一事实会导致与其他架构相比性能有所下降，但这通常不会被考虑在内，因为这是 java 并且您可以制作一个可以 24/7 全天候运行的应用程序这一事实是 OSGi 的全部目的，那么您肯定可以牺牲一点性能（我会说）。

# jquery - 更新 jqxgrid 时发送到服务器的日期数据格式错误

> ID：11450449
> 
> 赞同：0
> 
> 时间：2012-07-12T11:03:34.907
> 
> 标签：jquery, asp.net-mvc-3, javascript-framework

发生更新行事件时向服务器发送的日期数据格式错误。对于发送的所有数据，它以“01.01.0001 00:00:00”的形式进入服务器。发送前客户端的行日期数据是（我通过警报看到）“Sat May 05 2012 00:00:00 GMT+0300 (GTB Daylight Time)”。有什么建议吗？

![在此处输入图像描述](../Images/e48d144512802524b6408b29ddef401c.png)

客户端代码是：

```
var gridSource = {
            datatype: "json",
            datafields: [{ name: 'KargoId' }, { name: 'Ad' }, { name: 'Soyad' },
            { name: 'YuklenmeTarihi', type: 'date' }, { name: 'Adet' }, { name: 'Fiyat'}],
            url: 'BindGrid',
            updaterow: function (rowid, rowdata) {                    

                if (selectedUrunId != undefined && selectedUrunId != -1) {
                    rowdata.UrunId = selectedUrunId;
                    selectedUrunId = -1;
                }

                alert(rowdata.YuklenmeTarihi);

                var data = $.param(rowdata);
                //alert(data);
                $.ajax({
                    dataType: 'json',
                    url: 'UpdateEditGrid',
                    data: data,
                    success: function (data, status, xhr) {
                        gridDataAdapter.dataBind();

                        /*if (data.Success == false)
                        alert(JSON.stringify(data));*/

                        /*if (data.Success == true && gridDataAdapter != undefined)
                        gridDataAdapter.dataBind();*/
                    },
                    error: function (xhr, status, error) {
                        alert(JSON.stringify(xhr));
                    }
                });
            }
        };

       var gridDataAdapter = new $.jqx.dataAdapter(gridSource, {
            downloadComplete: function (data, status, xhr) { },
            loadComplete: function (data) { },
            loadError: function (xhr, status, error) { alert(JSON.stringify(xhr)); }
        });

        // initialize jqxGrid
        $("#jqxgrid").jqxGrid(
        {
            width: 670,
            source: gridDataAdapter,
            editable: true,
            theme: theme,
            selectionmode: 'singlecell',
            columns: [
              { text: '#', datafield: 'KargoId', width: 40 },
              { text: 'Ad', columntype: 'textbox', datafield: 'Ad', width: 90 },
              { text: 'Soyad', datafield: 'Soyad', columntype: 'textbox', width: 90 },                  
              { text: 'YuklenmeTarihi', datafield: 'YuklenmeTarihi', columntype: 'datetimeinput', width: 90, cellsalign: 'right', cellsformat: 'd',
                  validation: function (cell, value) {
                      var year = value.getFullYear();
                      if (year >= 2013) {
                          return { result: false, message: "Yükleme zamanı 1/1/2013 tarihinden önce olmalı!" };
                      }
                      return true;
                  }
              },
              { text: 'Adet', datafield: 'Adet', width: 70, cellsalign: 'right', columntype: 'numberinput',
                  validation: function (cell, value) {
                      if (value < 1 || value > 15) {
                          return { result: false, message: "Adet 1-15 aralığında olmalı!" };
                      }
                      return true;
                  },
                  initeditor: function (row, cellvalue, editor) {
                      editor.jqxNumberInput({ decimalDigits: 0, digits: 3 });
                  }
              },
              { text: 'Fiyat', datafield: 'Fiyat', width: 65, cellsalign: 'right', cellsformat: 'c2', columntype: 'numberinput',
                  validation: function (cell, value) {
                      if (value < 0 || value > 15) {
                          return { result: false, message: "Fiyat 0-15 aralığında olmalı!" };
                      }
                      return true;
                  },
                  initeditor: function (row, cellvalue, editor) {
                      editor.jqxNumberInput({ digits: 3 });
                  }
              }
            ]
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T13:22:54.573

在 updaterow 函数中，在数据定义之前（var data = $.param(rowdata);) 我更改了日期数据，例如：

```
 var dateToChange = JSON.stringify(rowdata.YuklenmeTarihi);
                rowdata.YuklenmeTarihi = dateToChange.replace(/"/g, ''); 
```

然后它起作用了。`replace(/"/g, '')`如果您想知道，请修剪所有双引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:38:11.217

jqxGrid 不会向服务器发送任何数据，因为它是一个客户端小部件。小部件不处理服务器更新。检查您的更新功能以及您通过 Ajax 帖子发送的数据。

# ruby-on-rails - 在 Rails 中使用多选列表

> ID：11450451
> 
> 赞同：4
> 
> 时间：2012-07-12T11:03:36.630
> 
> 标签：ruby-on-rails, ruby

我正在尝试在 Rails 中创建一个多选列表框。我的视图代码是：

```
<div>
  <%=nested_form_for(@allocation) do|builder|%>
    <%=builder.label :song_id, "Pick a song" %>

    <%=builder.select :song_id, options_for_select(
    Song.all.collect {|s| [ [s.title, s.artist].join(" by "), s.id ] }, 
    { include_blank: true, multiple: true, size: 5 }) %>

    <%=builder.submit "Add Song", class: "btn btn-large btn-primary" %>
  <% end %>
</div> 
```

目前我只有普通的单选框，但我想将其转换为多选。任何指针将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T11:33:59.793

这在我的情况下似乎有效：

```
<%= builder.select(
    :song_id,
    options_for_select(@selections),
    {},
    {multiple: true, size: 10})
%> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T11:32:04.663

通常您需要使用 select_tag ，但是根据您从哪里获取数据，有很多不同的方式可以工作

```
<%= select_tag '@Mymodel[myattribute][]',
    options_from_collection_for_select(SelectionModel, "id", "title", @Mymodel.myattribute),
    :multiple => true, :size =>10 }
%> 
```

也许你的看起来像

```
<%= select_tag '@allocation[song_id][]',
    options_from_collection_for_select(Song.all., "id", "title", @allocation.song_id),
    { :multiple => true, :size =>10 }
%> 
```

可以看到一个例子，这里......

[http://www.gilluminate.com/2007/02/15/best-way-to-do-multiple-select-combo-boxes-in-rails/](http://www.gilluminate.com/2007/02/15/best-way-to-do-multiple-select-combo-boxes-in-rails/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-12T11:21:17.190

如果你想通过 jquery 来做，下面的链接会帮助你

[http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)

# html - 为什么 Outlook 2010 在两行显示我的标题？

> ID：11450453
> 
> 赞同：1
> 
> 时间：2012-07-12T11:03:41.020
> 
> 标签：html, outlook, newsletter

我使用模板为我的公司创建 HTML 时事通讯。我对任何编程语言都知之甚少，这就是我从模板开始的原因。我已经向我的工作电子邮件地址 (outlook 2010) 和我的个人电子邮件 (gmail) 发送了一些测试。它在我的 gmail 中看起来很棒，但在 Outlook 中，它决定将时事通讯的标题与“焦点”一词下方的“新闻”一词略微交错，真正位于下方并稍微偏左。请看这张图片以了解我的意思：![图片](../Images/e750fb9d9d3b6fe1854eae6d66e324eb.png)
我想知道如何更改代码，以便它在 Outlook 中的显示方式与在 gmail 中的显示方式一样，都在一行上？

另外我真的不知道我是否在下面显示了太多代码；还是不够，我只知道标题部分在那里，对初学者的任何帮助都会非常感激

```
<div id="SpeBkDiv" style="background-color: #ffffff;">
<!--100% body table-->
<table bgcolor="#FFFFFF" border="0" cellpadding="0" cellspacing="0" width="100%">
     <tbody>
         <tr>
             <td>
             <!--email container-->
             <table align="center" border="0" cellpadding="0" cellspacing="0" width="600">
                 <tbody>
                     <tr>
                         <td>
                         <!--header-->
                         <table border="0" cellpadding="0" cellspacing="0" width="600">
                             <tbody>
                                 <tr>
                                     <td valign="top">
                                     <img src="image url here" alt="" height="12" width="600" />
                                     <!--top links-->
                                     <table border="0" cellpadding="0" cellspacing="0" height="52" width="600">
                                         <tbody>
                                             <tr>
                                                 <td valign="middle" width="221">
                                                 <p style="font-size: 10px; font-family: Times New Roman; color: #333; margin: 0px;" align="center"><br />
                                                 </p>
                                                 </td>
                                             </tr>
                                         </tbody>
                                     </table>
                                     <!--/top links-->
                                     <!--line break-->
                                     <table border="0" cellpadding="0" cellspacing="0" height="14" width="600">
                                         <tbody>
                                             <tr>
                                                 <td valign="top" width="600">
                                                 <p>
                                                 <img src="image url here" alt="" height="10" width="600" />
                                                 </p>
                                                 </td>
                                             </tr>
                                         </tbody>
                                     </table>
                                     <!--/line break-->
                                     <!--header content-->
                                     <table border="0" cellpadding="0" cellspacing="0" height="168" width="600">
                                         <tbody>
                                             <tr>
                                                 <td>
                                                 <h1 style="color: #333 !important; margin: 0px; font-weight: normal; font-size: 30px; font-family: Verdana" align="center">
                                                 <span style="font-size: 50pt; color: #808080;">
                                                 <a title="image name" href="image url here">
                                                 <img style="text-align: left; float: left;" alt="" src="image url here" align="left" height="79" width="103" />
                                                 </a>
                                                 </span>
                                                 </h1>
                                                 <h1 style="color: #333 !important; margin: 0px; font-weight: normal; font-size: 30px; font-family: Verdana;" align="center">
                                                 <span style="font-size: 45pt; color: #808080;">
                                                 <c>
                                                 <span style="font-family: Verdana; font-size: 40pt;">Focus News</span>
                                                 </c>
                                                 </span>
                                                 <span style="font-size: 50pt; color: #808080;">
                                                 </span>
                                                 <currentmonthname style="font-size: 36pt; color: #333333;">
                                                 <currentyear>
                                                 </currentyear>
                                                 </currentmonthname>
                                                 </h1>
                                                 </td>
                                                 <td id="issue" style="background-image: url('images/issue-no.jpg'); background-color: #98AFC7; background-repeat: no-repeat; background-position: top; width: 109px; height: 109px;" bgcolor="#98AFC7" valign="top">
                                                 <!--number-->
                                                 <table border="0" cellpadding="2" cellspacing="2" height="81" width="126">
                                                     <tbody>
                                                         <tr>
                                                             <td>
                                                             <div align="center">
                                                             <h4>
                                                             <span style="color: #ffffff; font-family: Verdana;">Issue no.7</span>
                                                             </h4>
                                                             </div>
                                                             <div align="center">
                                                             <h4>
                                                             <span style="color: #ffffff; font-family: Verdana;">July</span>
                                                             <span style="color: #ffffff; font-family: Verdana;">2012</span>
                                                             </h4>
                                                             </div>
                                                             </td>
                                                         </tr>
                                                     </tbody>
                                                 </table>
                                                 <!--/number-->
                                                 <br />
                                                 </td>
                                             </tr>
                                          </tbody>
                                       </table>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </td>
                     </tr>
                  </tbody>
               </table>
            </td>
         </tr>
     </tbody>
  </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T10:34:36.953

我测试了您的代码，并且在 Outlook2007（我没有最新版本）上运行良好。我可以看到你在焦点新闻周围有标签。摆脱那些，它们可能被 Outlook 错误地解释并在行首添加一些额外的空间。两个嵌套的跨度也看起来很奇怪。所以我的建议是改变这些行：

```
 <span style="font-size: 45pt; color: #808080;">
    <c>
        <span style="font-family: Verdana; font-size: 40pt;">Focus News</span>
    </c>
 </span> 
```

对此

```
<span style="font-family: Verdana; font-size: 40pt;">Focus News</span> 
```

PS 正如上一个答案中所建议的那样，验证您的代码可能毫无意义，因为时事通讯使用的标准可以追溯到 1999 年。但请保持标记尽可能干净（在这里您可以找到一些有趣的指南[http://www.campaignmonitor .com/css/](http://www.campaignmonitor.com/css/) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T19:59:28.647

首先要尝试的是验证您的 html。尝试访问[http://validator.w3.org/check](http://validator.w3.org/check)并粘贴您的代码或浏览到要上传的 html 文件。

# mysql - 将总持续时间分成几行

> ID：11450454
> 
> 赞同：0
> 
> 时间：2012-07-12T11:03:51.137
> 
> 标签：mysql

在父表 logintime`10:00`和 logouttime 中`14:00`，在 child talbe 中具有每个作业的开始时间和结束时间。如果一个员工做了 50 份工作。我想拆分总持续时间并将每小时的工作显示为行？

```
Session #     jobs
10:00-11:00   12 
11:00-12:00   11 
12:00-13:00   11
13:00-14:00   16 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:13:26.953

适当地使用这个：在你在这里问之前还要研究一下。

```
SELECT TIMESTAMPDIFF(HOUR, endDate, startDate) AS hours_different 
```

# drop-down-menu - 谷歌地图标记形式选择列表（使用：event.addDomListener & API V3）

> ID：11450458
> 
> 赞同：0
> 
> 时间：2012-07-12T11:04:05.133
> 
> 标签：drop-down-menu, google-maps-api-3, google-maps-markers, onchange, event-listener

我正在尝试使用一个简单的下拉/选择列表作为标记的控制器（想法是地图将显示选定的位置/标记）。DomListener 可以处理 onchange 事件，但由于某种原因，标记没有出现。我需要使用另一个事件侦听器，还是以其他方式创建标记？

```
 var map = null;

function initialize() {
var myOptions = {
      zoom: 5 ... etc };
var map = new google.maps.Map(document.getElementById('map_canvas'),
        myOptions);
...

 google.maps.event.addDomListener(document.getElementById('SelectList'), 
            'change', function() {

var mypos = document.getElementById('SelectList').value;

alert(mypos); /* output/value is correct */

/* This code doesn’t display marker */
var marker = new google.maps.Marker({
        position: mypos, 
        map: map,
        title:"Hello World!"
    });

     });

...
}
------------------------
My HTML select-list:
<select id="SelectList">
<option value="12.123456, 12.987654">location 1</option>
<option value="11.123456, 12.987654">Location 2</option>
</select> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T13:18:04.260

您正在为该位置创建一个用逗号分隔的字符串的标记。它必须是一个 LatLng 对象。尝试类似：

```
var marker = new google.maps.Marker({
    position: new google.maps.LatLng(mypos.split(',')[0], mypos.split(',')[1]),
    map: map,
    title:"Hello World!"
}); 
```

# javascript - 更新主干模型/视图的轮询请求

> ID：11450461
> 
> 赞同：15
> 
> 时间：2012-07-12T11:04:20.380
> 
> 标签：javascript, backbone.js, websocket, long-polling, polling

我需要找到一种方法来更新使用`backbone`.

用例如下：
我有几个视图，每个视图，或者可能与这个视图相关的模型/集合，需要在不同的时间向服务器发出不同的轮询请求以发现一些变化。

我想知道最一般的方法是什么：

1) 执行`Traditional Polling Request`
2) 执行`Long Polling Request`
3) 执行`HTML5 web socket`

* * *

PS：
1）服务器是用PHP编写的。
2) 现在我正在寻找一个不使用 HTML5 WebSockets 的解决方案，因为 PHP 可能不是那么简单。

* * *

这是我的简单代码（1），使用`Traditional Polling Request`.

(1)

```
// MyModel
var MyModel = Backbone.View.extend({
    urlRoot: 'backendUrl'
});

// MyView
var MyView = Backbone.View.extend({

    initialize: function () {
        this.model = new MyModel();
        this.model.fetch();
        this.model.on('change', this.render);
        setTimeout(function () {
            this.model.fetch();
        }, 1000 * 60 * 2); // in order to update the view each two minutes
    }
}); 
```

* * *

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-16T15:24:17.410

在你的模型中实现它的轮询处理程序，检查这个例子：

```
// MyModel
var MyModel = Backbone.Model.extend({
  urlRoot: 'backendUrl',

  //Add this to your model:
  longPolling : false,
  intervalMinutes : 2,
  initialize : function(){
    _.bindAll(this);
  },
  startLongPolling : function(intervalMinutes){
    this.longPolling = true;
    if( intervalMinutes ){
      this.intervalMinutes = intervalMinutes;
    }
    this.executeLongPolling();
  },
  stopLongPolling : function(){
    this.longPolling = false;
  },
  executeLongPolling : function(){
    this.fetch({success : this.onFetch});
  },
  onFetch : function () {
    if( this.longPolling ){
      setTimeout(this.executeLongPolling, 1000 * 60 * this.intervalMinutes); // in order to update the view each N minutes
    }
  }
});

// MyView
var MyView = Backbone.View.extend({

    initialize: function () {
        this.model = new MyModel();
        this.model.startLongPolling();
        this.model.on('change', this.render);
    }
}); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-12T14:11:17.303

我不确定你在这里问什么，但这里有一些想法：

**1）**您的代码似乎与您在标题中所写的内容相矛盾。使用`setTimeout`(or `setInterval`) 进行连续轮询与长轮询不同。实际上这是一个（正常的）轮询。不同之处在于，使用长轮询客户端启动 AJAX 请求并等待。服务器决定何时响应。它应该只在有新数据可用时才响应。并且在响应客户端开始新的轮询请求之后立即。

*旁注*：创建（相对）高效的长轮询服务器不是一件容易的事，请注意这一点。

**2)**你如何处理客户端（即你把长轮询逻辑放在哪里）并不重要，只要你知道你的代码里面发生了什么。当然请记住，将来您可能希望对代码进行一些更改，因此将其分开可能是最佳选择。这是我会选择的架构：

*   创建全局`EventManager`对象的独立脚本（此脚本应作为第一个加载）。这样的对象将具有以下方法：`.bind`并且`.trigger`它将，呃...管理事件。:) 例如，以下是实现的样子：

[在我自己的对象中实现事件](https://stackoverflow.com/questions/10978311/implementing-events-in-my-own-object/10979055#10979055)

*   处理长轮询的独立脚本。每当从服务器接收到数据（即 AJAX 长轮询请求最终结束）时，它都会调用`EventManager.trigger('long_polling_data', res);`. 然后，您需要在主干视图内或您喜欢的任何地方绑定到此事件。

*旁注*：这种架构的额外好处是，如果您决定切换到 WebSockets 或任何其他技术（例如：JSONP 轮询），那么您只需实现其他技术的逻辑。主代码将只使用`long_polling_data`事件，因此不需要额外的更改（您可能想要更改事件的名称：]）。

**3）**虽然你说你不想使用 WebSockets 我不得不对此发表评论。:) 你知道世界在不断发展。你应该忘记长轮询技术。使用 WebSockets 和 XMLSocket（又名 FlashSocket）作为后备方案效率更高，实现服务器端也更简单。

我希望我能帮上忙，对任何语言错误感到抱歉，祝你的项目好运！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T09:23:03.633

我知道您在问题中声明您不希望将 websockets 与 php 一起使用（因为它不是那么简单），但是，我发现它相对简单。

1.  我使用了[http://pusher.com/](http://pusher.com/)，这是一个带有后备功能的 Web 套接字应用程序。（顺便说一句，我与公司没有联系）。
2.  在服务器/api 上包含[https://github.com/squeeks/Pusher-PHP](https://github.com/squeeks/Pusher-PHP)
3.  包括`<script src="http://js.pusherapp.com/1.12/pusher.min.js"></script>`在客户端。

客户端和服务器通道可以设置为使用 Web 套接字相互交谈。

# git - 本地提交到 git 子模块

> ID：11450462
> 
> 赞同：2
> 
> 时间：2012-07-12T11:04:20.887
> 
> 标签：git, git-submodules

我有一个 git 项目，其中包含我从公共**只读**存储库克隆的 git 子模块（即我无法推送到该存储库）。是否可以提交该子模块？这是我尝试这样做的方法

```
[main]$ cd sub
[sub]$ git checkout master
[sub]$ echo test > new-file
[sub]$ git add new-file
[sub]$ git commit -m 'added a new file'
[sub]$ cd ..
[main]$ git add sub
[main]$ git push origin 
```

到目前为止，一切都很好。现在的问题是当我转到另一台计算机并执行以下操作时：

```
[main]$ git pull
[main]$ git submodule update 
```

但它失败了`fatal: reference is not a tree: af232...`。我认为这会起作用，因为当我`git push origin`在 main 中执行时，它似乎也会推送子模块的所有对象（毕竟它们在 main 的 .git 目录中）。但显然，当第二台计算机拉动时，它并没有接收到这些新对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:31:56.273

这是因为您已经推送了超级项目中的子模块更改，但您没有推送子模块中发生的实际更改（`git push origin`不推送子模块更改，仅推送其提交 SHA1。）。这不是您可以做的事情，因为它是一个只读存储库。

您可以做的是将子模块的 URL 更改为您自己的存储库，将更改推送到它，然后在超级项目中提交和推送 URL 更改。

# java - jCheckbox 要显示在 textarea 中

> ID：11450464
> 
> 赞同：0
> 
> 时间：2012-07-12T11:04:24.850
> 
> 标签：java, swing, jcheckbox

我正在试验 JCheckBox。我想要的是，当我检查其中任何一个（复选框）时，复选框中的文本应该显示在 jtextarea 中。

我现在拥有的是这样的：

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;

@SuppressWarnings("serial")
public class CheckboxSample extends JFrame implements ActionListener{

    //vars
    JCheckBox cb1, cb2, cb3, cb4, cb5, cb6;
    JTextArea ta;
    String text = "";
    JLabel lbl;

    CheckboxSample(){

        Container c = getContentPane();
        c.setBackground(Color.BLACK);
        c.setLayout( new FlowLayout() );

        ta = new JTextArea( 10, 20 );

        //create two check boxes
        cb1 = new JCheckBox( "Java" );
        cb2 = new JCheckBox( "C#" );
        cb3 = new JCheckBox( "VB.Net" );
        cb4 = new JCheckBox( "Python" );
        cb5 = new JCheckBox( "C++" );
        cb6 = new JCheckBox( "Objective-C" );

        lbl = new JLabel( "Choose your favorite programming language/s: " );

        //add the checkboxes,  textarea to the container
        lbl.setForeground(Color.white);
        c.add( lbl );
        c.add( cb1 );
        c.add( cb2 );
        c.add( cb3 );
        c.add( cb4 );
        c.add( cb5 );
        c.add( cb6 );
        c.add( ta );
        ta.enable(false);

        //add action listeners. We need not add listener to text area
        //since the user clicks on the checkboxes or radio buttons only
        cb1.addActionListener(this);
        cb2.addActionListener(this); 
        cb3.addActionListener(this);
        cb4.addActionListener(this);
        cb5.addActionListener(this);
        cb6.addActionListener(this);

        //close the frame upon clicking
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    }

    @Override
    public void actionPerformed(ActionEvent e) {
        // TODO Auto-generated method stub
        //know which components are selected by user
        if( cb1.getModel().isSelected() ) text+="\nJava";
        if( cb2.getModel().isSelected() ) text+="\nC#";     
        if( cb3.getModel().isSelected() ) text+="\nVB.Net";
        if( cb4.getModel().isSelected() ) text+="\nPython";
        if( cb5.getModel().isSelected() ) text+="\nC++";
        if( cb6.getModel().isSelected() ) text+="\nObjective-C";
        //else text+="\nFemale";
        //display the selected message in text area
        ta.setText(text);

        //reset the message to empty string
        text="";
    }

    public static void main(String args[])
    {
        //create frame
        CheckboxSample cr = new CheckboxSample();
        cr.setTitle("My Samples");
        cr.setSize(500,400);
        cr.setVisible(true);
    }

    } 
```

在不连接复选框文本的情况下如何做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T13:46:55.333

所以，如果我没看错的话：

```
public void actionPerformed(ActionEvent e) {

    if (e.getSource() instanceof JCheckBox) {

        JCheckBox checkBox = (JCheckBox)e.getSource();
        String text = checkBox.getText();

        int pos = ta.getText().getLength()
        ta.insert(text, pos);

        // or, more simply

        ta.append(text);

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:25:56.973

你应该在`ChangeListener`每个`JCheckBox`. `#stateChanged(ChangeEvent)`每次单击复选框时都会调用。

```
final JCheckBox cb1 = new JCheckBox("cb Text");
final JTextArea textArea = new JTextArea("initial text");
cb1.addChangeListener(new ChangeListener() {        
        @Override
        public void stateChanged(ChangeEvent e) {
            if(cb1.isSelected()){
                //textArea.setText(b.getText()); //to get the text from CheckBox
                textArea.setText("your Text here");
            }
        }
}); 
```

# magento - Magento 1.7 中基于文本的语言切换

> ID：11450465
> 
> 赞同：0
> 
> 时间：2012-07-12T11:04:31.717
> 
> 标签：magento, hyperlink, translation

我的 Magento 1.7 商店中有以下（非常基本的）语言链接。

```
<div class="language-selection">
 <a href="?___store=ana_mas_spain_store_view_english">English</a> | 
 <a href="?___store=ana_mas_spain_store_view_spanish">Spanish</a>
</div> 
```

隐藏当前选择的语言最简单的方法是什么？因此，如果用户单击西班牙语，则唯一剩下的文本链接将是英语链接。

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:39:00.047

你可以试试：

```
<div class="language-selection">
<?php
$allStores = Mage::app()->getStores();
$currStoreId = Mage::app()->getStore()->getStoreId();

foreach ($allStores as $_id => $val) {
    if (Mage::app()->getStore($_id)->getId() != $currStoreId) {
        echo sprintf('<a href="?___store=%s">%s</a>', Mage::app()->getStore($_id)->getCode(), Mage::app()->getStore($_id)->getName());
    }
}
?>
</div> 
```

# iphone - 如何解析同名iPhone的多个标签

> ID：11450471
> 
> 赞同：0
> 
> 时间：2012-07-12T11:04:43.640
> 
> 标签：iphone, ios4

我有 xml [http://weather.yahooapis.com/forecastrss?w=20070458&u=c](http://weather.yahooapis.com/forecastrss?w=20070458&u=c)我如何从标签**（这是两次或可能更多）属性日解析等等**......谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:15:43.003

当您在方法`didEndElement`方法中找到与所需元素名称相同时，获取一个 NSMutableArray 并添加对象

**已编辑**

`didStartElement:`在方法中添加此代码

```
if([elementname isEqualToString:@"yweather"]){
   [yourmutableArray addObject:attributeDict]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:13:32.433

您是 iphone 编程新手吗，请查看一些关于 xml 解析和其他的教程。

[http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project)

[http://www.raywenderlich.com/725/how-to-read-and-write-xml-documents-with-gdataxml](http://www.raywenderlich.com/725/how-to-read-and-write-xml-documents-with-gdataxml)

这是一个使用 GDataXML 解析器的示例应用程序。

[http://db.tt/qoERN0LB](http://db.tt/qoERN0LB)

# php - php：是否有理由在回显数据之前先填充结果数组

> ID：11450476
> 
> 赞同：0
> 
> 时间：2012-07-12T11:04:54.030
> 
> 标签：php, sql

我正在阅读 sitepoint 的书**PHP & MySQL Novice to Ninja**，我想知道他为什么要采取额外的步骤。

我的 SQL 查询是

```
try
{
    $sql = 'SELECT * FROM trazooevents WHERE county = :county';
    $s = $pdo->prepare($sql);
    $s->bindValue(':county', $_POST['search_term']);
    $s->execute();

    include 'events.inc.php';
} 
```

在我的包括

```
<?php foreach ($s as $row): ?>
    <li class="db-headline"><?php echo htmlspecialchars($row['eventname'], ENT_QUOTES, 'UTF-8'); ?></li>
    // etc.
<?php endforeach; ?> 
```

它工作得很好。在书中，**Kevin Yank**添加了一个额外的步骤，类似于：

```
foreach ($result as $row)
{
    $events[] = array(
    'eventname' => $row['eventname'],
    'eventdetails' => $row['eventdetails'],
    'weburl' => $row['weburl'],
    'imagename' => $row['imagename'],
    'expireson' => $row['expireson']
    );
} 
```

他这样做是为了获得一个索引标签还是有一些我不知道的安全问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:08:17.950

这只是为了获取索引标签..虽然没有必要.. :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T11:08:57.567

这是代码的可读性问题。您不会使用行，而是使用具有更多语义意义的数组：事件。

# php - PHP - 如果 in_array

> ID：11450481
> 
> 赞同：0
> 
> 时间：2012-07-12T11:05:13.633
> 
> 标签：php, arrays

我正在使用 CodeIgniter 并创建了一个自定义表单首选项自定义配置。我有一个数组如下：

```
Array
(
  [1] => Category 1
  [2] => Category 2
  [3] => Category 3
  [4] => Category 4
  [5] => Category 5   
) 
```

我将它作为 var 传递给视图，`$service_categories`然后我想做的是将它与数据库中的“值”相匹配。IE 5\. 如果匹配，则显示`Category 5`在视图中。目前我只是展示`5`- 这对用户没有好处。

变量`$service->service_category`是一个数字。

var`service`产生：

```
Array
(
    [0] => stdClass Object
    (
        [service_id] => 3
        [organisation_id] => 2
        [service_name] => Edited Service 3
        [service_description] => This is service 3 provided by
        [service_category] => 5
        [service_metadata] => Metadata for service 3 - Edited
        [service_cost] => 22.00
        [service_active] => active
    )
) 
```

我目前的PHP如下：

```
if (in_array($service->service_category, $service_categories))
{
   echo "Exists";
} 
```

但是，`Exists`视图中没有显示。它根本什么都没有显示。

我的`in_array`方法有问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T11:12:04.313

`in_array()`检查数组中是否存在*值*。所以 in_array('Category 1', $service_categories) 会起作用。

但是，要检查数组中是否存在键，可以使用：

```
if(array_key_exists($service->service_category, $service_categories)) {
    echo "Exists";
} 
```

我想，这就是你要找的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T11:09:49.573

> 变量 : $service->service_category 是一个数字。

这正是问题所在：您测试“5”是否等于“5 类”，但显然不是。最简单的解决方案是在“5”前面加上“Category”：

```
<?php
$category = 'Category ' . $service->service_category;

if (in_array($category, $service_categories)) {
   echo "Exists";
} 
```

**编辑**：如果要检查数组*键*是否存在（因为 '5' => 'Category 5'），可以使用 isset() 或 array_key_exists 来实现。

```
<?php
if (array_key_exists ($service->service_category, $service_categories )) {
   echo "Exists";
}

// does the same:
if (isset ($service_categories[service->service_category] )) {
   echo "Exists";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T11:09:59.530

我认为[array_key_exists](http://php.net/manual/en/function.array-key-exists.php)是您可能搜索的功能。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-12T11:10:00.023

```
if (isset($service_categories[$service->service_category])) {
   echo "Exists";
} 
```

# regex - 使用正则表达式和崇高文本搜索和替换

> ID：11450487
> 
> 赞同：7
> 
> 时间：2012-07-12T11:05:26.793
> 
> 标签：regex, replace, full-text-search, sublimetext

我需要找到以下模式的所有实例：

```
<(h1|p) class="veronaText hidden" (.*?)>(Answer:|)</(h1|p)> 
```

并替换它以添加一个 ID 和一个额外的类。如何替换它以保持其当前格式和属性（h1 或 p 等）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-12T13:42:28.813

```
<(h1|p) class="veronaText hidden" (.*?)>(Answer:|)</(h1|p)> 
```

变成

```
<$1 id="newID" class="veronaText hidden newClass" $2>$3</$4> 
```

每个 $n 代表主匹配中的一个子匹配，按照它们出现的顺序。

# javascript - 用户返回登录页面时清除会话

> ID：11450488
> 
> 赞同：0
> 
> 时间：2012-07-12T11:05:27.820
> 
> 标签：javascript, jsp

我制作了一个 Web 应用程序，用户将在其中登录并使用他的帐户。
我的问题是，当他单击后退按钮并转到登录页面，然后单击前进页面后，他会自动登录，而无需再次询问他的用户名和密码。
如果用户单击后退按钮然后前进，有没有办法让用户再次输入用户名和密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:17:15.627

这完全是客户端问题。当您在浏览器中按下后退按钮时，浏览器会加载上一个缓存的文档。

对于您想要的功能，您应该在登录页面中有一个 javascript，它`logout.jsp`在第一次加载或通过后退按钮时调用。

# asp.net-mvc - 在自定义 ajaxhelper 中合并 ajax 选项

> ID：11450491
> 
> 赞同：0
> 
> 时间：2012-07-12T11:05:37.917
> 
> 标签：asp.net-mvc, asp.net-mvc-2

如何合并此自定义扩展方法中的选项？

```
 public static MvcHtmlString ActionLink(this AjaxHelper html,
                    string linkText,
                    string actionName,                        
                    object htmlAttributes,
                    AjaxOptions options )
    {
        RouteValueDictionary attributes = new RouteValueDictionary(htmlAttributes);

        TagBuilder linkTag = new TagBuilder("a");        

        UrlHelper url = new UrlHelper(html.ViewContext.RequestContext);

        linkTag.Attributes.Add("href", url.Action(actionName));

        return MvcHtmlString.Create(linkTag.ToString(TagRenderMode.Normal));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T12:15:01.117

AjaxOptions 只是一个类。您可以在其上设置自己的属性。我建议使用现有的 Ajax 助手并首先更改 AjaxOptions。所以：

```
public static MvcHtmlString ActionLinkWithSpan(this AjaxHelper html,
                        string linkText,
                        string actionName,
                        object htmlAttributes,
                        AjaxOptions options)
{
    RouteValueDictionary attributes = new RouteValueDictionary(htmlAttributes);
    // Add more attributes here if you want

    options.InsertionMode = InsertionMode.InsertBefore; // As an example. Or amend any others here.

    return html.ActionLink(linkText, actionName, attributes, options);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T13:23:58.777

您可以将`AjaxOptions`链接标签合并为，

```
linkTag.MergeAttributes(ajaxOptions.ToUnobtrusiveHtmlAttributes()); 
```

此外，您可以将 html 属性合并为，

```
linkTag.MergeAttributes(HtmlHelper.AnonymousObjectToHtmlAttributes(htmlAttributes)); 
```

# android - 扩展 Activity 添加回调方法

> ID：11450498
> 
> 赞同：0
> 
> 时间：2012-07-12T11:06:07.730
> 
> 标签：android, events, android-activity, callback, implements

我正在尝试扩展 Activity 以定义我可以从 AsynchTask 回调的标准方法。这是一个骨架代码。

```
public class R3Activity extends Activity{

    public void displayresult(String xmlresult){

    }//displayresult

} 
```

现在我通过扩展 R3Activity 创建的任何活动都可以实现 displayresult 方法。

然后我按如下方式使用它......

```
 public class MainActivity extends R3Activity{

    private void somemethod(){
           DatabaseAccess dba = new DatabaseAccess();
           dba.setActivity(this); // Pass a ref to the activity into the class with the Asynch task
           dba.execute(new URL(database_url));

    }

    }

} 
```

DatabaseAccess 类应该是一个通用类，它使用 AsnchTask 来获取数据。我的问题是以通用方式处理回调。

```
public class DatabaseAccess extends AsyncTask<URL, String, String> {
        private R3Activity m_activity;

    public void setActivity(R3Activity activity) {
        m_activity = activity;
    }

    @Override
    protected String doInBackground(URL... params) {
           //Connect to database etc
           String strdata = "blah";

        }

    protected void onPostExecute(String result) {
        if ((strdata != null) && (m_activity != null)) {

            m_activity.displayresult(strdata);

        }
    }

} 
```

现在 m_activity.displayresult 可以工作了，因为这个方法在 R3Activity 的每个实例中都可用。

如何让 displayresult() 触发我可以在每个 Activity 中实现的事件处理程序。

就像是....

```
public class MainActivity extends R3Activity implements  DatabaseResultListener {

public void DbCallback(){
//This gets triggerred by the displayresult callback
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:09:15.000

我认为你应该使用`interface for callback`. 并且你可以很容易地做到这一点。

```
interface AsyncTaskListener{
     public void onTaskComplete(T result)
} 
```

然后实现它

```
public class MainActivity extends Activity implements AsyncTaskListener 
```

而在`AsycTask,onPostExecute method call listener method like,`

```
 objAsyncTaskListener.onTaskComplete(T result); 
```

*   [看这里](http://samir-mangroliya.blogspot.in/p/android-seperate-asynctask-class.html)

# ios - 获取使用 AVFoundation 的 AVCaptureStillImageOutput 捕获的图像的地理位置

> ID：11450501
> 
> 赞同：3
> 
> 时间：2012-07-12T11:06:23.187
> 
> 标签：ios, geolocation, avfoundation

我使用 AVFoundation 在 UIView 中捕获图像并向其添加注释。现在，我需要获取捕获图像的地理位置。我当前的代码片段如下所示。元数据没有地理位置。也许我将不得不使用 CLLocation？请尽快指导我。

```
[stillImageOutput captureStillImageAsynchronouslyFromConnection:videoConnection completionHandler: ^(CMSampleBufferRef imageSampleBuffer, NSError *error)
 {
     CFDictionaryRef metadataDict = CMCopyDictionaryOfAttachments(NULL, imageSampleBuffer, kCMAttachmentMode_ShouldPropagate);
     NSMutableDictionary *metadata = [[NSMutableDictionary alloc] initWithDictionary:(__bridge NSDictionary*)metadataDict];
     CFRelease(metadataDict);
     NSLog(@"%@",metadata);
     CFDictionaryRef exifAttachments = CMGetAttachment( imageSampleBuffer, kCGImagePropertyExifDictionary, NULL);
     if (exifAttachments)
     {
         // Do something with the attachments.
     }
     else
         NSLog(@"no attachments");

     NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageSampleBuffer];
     [captureSession stopRunning];
     [imageData writeToFile:path atomically:YES];
 }]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-24T17:07:18.160

据我所知，您必须包装自己的元数据字典并将其添加到图像数据中。

这是一个类扩展（由 Gustavo 提供，链接如下），它处理将 EXIF 和地理位置数据写入使用 AVCaptureStillImageOutput api 捕获的照片：[https ://github.com/gpambrozio/GusUtils/blob/master/GusUtils/NSMutableDictionary+ImageMetadata.m](https://github.com/gpambrozio/GusUtils/blob/master/GusUtils/NSMutableDictionary+ImageMetadata.m)

此外，这里是 Gustavo 解释实现的文章：http: [//blog.codecropper.com/2011/05/adding-metadata-to-ios-images-the-easy-way/](http://blog.codecropper.com/2011/05/adding-metadata-to-ios-images-the-easy-way/)

高温高压

# html - IE 9 CSS 问题：高度 css 属性问题

> ID：11450503
> 
> 赞同：0
> 
> 时间：2012-07-12T11:06:37.170
> 
> 标签：html, css, internet-explorer-9

我有一个应用于 div 的以下类。

```
.pageGradientTop_T1 {
    background-color: #E8E8E8;
    border-bottom: 1px solid #F7F7F7;
    border-top: 1px solid #D1D1D1;
    height: 2px;
    margin-bottom: 10px;
} 
```

如果将上述类应用于 div，它将看起来像 3 行，每行 1 像素（一个上边框，一个下边框，中间填充背景颜色），整体看起来像一个渐变。

对于除 IE 之外的所有浏览器，高度属性都可以正常工作。

我不确定为什么 height 属性不适用于 IE。我什至尝试过给出“ min-height: 2px; “但这也没有用。它会自动将 18px 作为最小高度，并且不会低于该高度。但是如果你尝试将高度增加到 18px 以上，它会起作用。

有人可以帮我弄这个吗。

提前致谢

问候， 萨什瓦特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:08:53.923

习惯于`font-size`即

```
 .pageGradientTop_T1{
    font-size:0;  // for ie
line-height:0;  // for ie
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:10:37.670

将 line-height 添加到您的类并将其设置为 0px：

```
.pageGradientTop_T1 { 
    line-height: 0px;
    background-color: #E8E8E8; 
    border-bottom: 1px solid #F7F7F7; 
    border-top: 1px solid #D1D1D1; 
    height: 2px; 
    margin-bottom: 10px; 
} 
```

# android - 从应用程序缓存中读取 PDF

> ID：11450508
> 
> 赞同：2
> 
> 时间：2012-07-12T11:06:58.627
> 
> 标签：android, pdf, android-intent

我的缓存中存储了一个 pdf 文件。我想通过第三方应用程序（Adobe 阅读器）阅读此 pdf。但我不允许这样做，因为意图无法访问应用程序缓存目录，除非通过存储在 sdcard 中公开 pdf。

是否有任何解决方法可以允许第三方应用程序从缓存中读取 pdf？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T13:26:24.277

第三方应用程序无法访问您应用程序的缓存目录。

该线程包含几个库链接，可让您在应用程序中显示 PDF 内容：[在 Android 上使用 Java 渲染 PDF 文件](https://stackoverflow.com/questions/2456344/display-pdf-within-app-on-android)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-08-28T10:44:55.097

是的，很有可能，使用 FileProvider，您可以将文件安全地保存在缓存中，并暂时向查看者提供对文件的访问权限。这是一个可以帮助您实施的链接。

Android 支持库 v4 包含一个名为 FileProvider 的类，它是 ContentProvider 的一个特殊子类。此类通过创建 content:// uri 而不是 file:/// uri 来帮助共享与应用程序关联的文件。

内容 URI 允许您使用临时访问权限授予读取和写入访问权限。因此，您可以提供对缓存目录中文件的临时访问权限，而无需我们的应用程序具有 WRITE_EXTERNAL_STORAGE 权限。

您应该做的第一件事是在您的 AndroidManifest 文件中添加一个新的内容提供程序：

```
<manifest>
    ...
    <application>
        ...
        <provider
            android:name="android.support.v4.content.FileProvider"
            android:authorities="${applicationId}.provider"
            android:exported="false"
            android:grantUriPermissions="true">

            <meta-data
                android:name="android.support.FILE_PROVIDER_PATHS"
                android:resource="@xml/fileprovider" />
        </provider>
        ...
    </application>
</manifest> 
```

FileProvider 只能为您预先指定的目录中的文件生成内容 URI。要指定目录，请在 XML 中指定其存储区域和路径（将文件另存为 res/xml/fileprovider.xml）。

```
<?xml version="1.0" encoding="utf-8"?>
<paths xmlns:android="http://schemas.android.com/apk/res/android">
    <cache-path name="image" path="image/"/>
</paths> 
```

现在您可以将您的应用缓存文件共享给其他应用。要共享文件，您需要向您的意图添加更多行。

```
File cacheFile = new File(context.getCacheDir(), "image/yoo.jpg");

Uri uri = FileProvider.getUriForFile(context, "my.package.provider", 
cacheFile);

Intent intent = ShareCompat.IntentBuilder.from(context)
    .setType("image/jpg")
    .setSubject(context.getString(R.string.share_subject))
    .setStream(uri)
    .setChooserTitle(R.string.share_title)
    .createChooserIntent()
    .addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);

context.startActivity(intent); 
```

首先，您必须获取要共享的缓存文件的引用，在我们的例子中，它的 cacheFile 位于缓存目录 + 图像文件夹中。

接下来，您必须获取此缓存文件的 uri，该 uri 可以使用 FileProvider.getUriForFile 获取。在这里，您必须将 my.package 替换为您的应用程序包名称。不要从最后删除那个 .provider 。

最后，当您创建意图时，只需将标志 Intent.FLAG_GRANT_READ_URI_PERMISSION 添加到您的意图中，以便其他应用程序可以读取此 uri。

参考：[https ://medium.com/androidsrc/share-cache-files-with-other-android-apps-using-fileprovider-897fe5705e45](https://medium.com/androidsrc/share-cache-files-with-other-android-apps-using-fileprovider-897fe5705e45)

# java - 我如何让 MOXy 仅在一行上输出以节省空间

> ID：11450509
> 
> 赞同：1
> 
> 时间：2012-07-12T11:06:59.720
> 
> 标签：java, json, jersey, eclipselink, moxy

为了解决另一个问题，我从使用 Jersey 转移到 EclipseLink MOXy 以从 JAXB 创建的对象模型（由 Sun JAXB 2.1.12 创建）生成 JSON。我注意到的一个区别是输出的格式

泽西输出

```
{"artist-list":{"offset":0,"count":1,"artist":[{"score":"100","type":"Group","id":"4302e264-1cf0-4d1f-aca7-2a6f89e34b36","name":"Farming Incident","sort-name":"Incident, Farming","gender":"male","country":"AF","disambiguation":"the real one","ipi-list":{"ipi":["1001","1002"]},"life-span":{"begin":"1999-04","ended":"true"},"tag-list":{"tag":[{"count":5,"name":"thrash"},{"count":11,"name":"güth"}]}}]}} 
```

但 MOXy 给

```
"count" : "1",
   "offset" : "0",
   "artist" : [ {
      "id" : "4302e264-1cf0-4d1f-aca7-2a6f89e34b36",
      "type" : "Group",
      "score" : "100",
      "name" : "Farming Incident",
      "sort-name" : "Incident, Farming",
      "gender" : "male",
      "country" : "AF",
      "disambiguation" : "the real one",
      "ipis" : [ "1001", "1002" ],
      "life-span" : {
         "begin" : "1999-04",
         "ended" : "true"
      },
      "tags" : [ {
         "count" : "5",
         "name" : "thrash"
      }, {
         "count" : "11",
         "name" : "güth"
      } ]
   } ]
} 
```

Moxy 更漂亮 :) 但是通过 Json 使我们的数据可用的原因之一是减少传输带宽，所以有可能让 MOXy 生成所有一条线，并且每条线周围没有额外的空间：？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T13:13:13.637

默认情况下[**，EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)会将 JSON 编组为一行。要获得格式化输出，您需要在 上设置以下属性`Marshaller`：

```
marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true); 
```

**根**

```
package forum11450509;

public class Root {

    private String foo;
    private int bar;

    public String getFoo() {
        return foo;
    }

    public void setFoo(String foo) {
        this.foo = foo;
    }

    public int getBar() {
        return bar;
    }

    public void setBar(int bar) {
        this.bar = bar;
    }

} 
```

**jaxb.properties**

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

以下代码演示了如何指定格式化输出：

```
package forum11450509;

import java.util.*;
import javax.xml.bind.*;
import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String, Object> properties = new HashMap<String, Object>(2);
        properties.put(JAXBContextProperties.MEDIA_TYPE, "application/json");
        properties.put(JAXBContextProperties.JSON_INCLUDE_ROOT, false);
        JAXBContext jc = JAXBContext.newInstance(new Class[] {Root.class}, properties);

        Root root = new Root();
        root.setFoo("ABC");
        root.setBar(123);

        System.out.println("One Line:");
        Marshaller marshaller = jc.createMarshaller();
        marshaller.marshal(root, System.out);

        System.out.println("\nFormatted:");
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(root, System.out);
    }

} 
```

**输出**

下面是运行演示代码的输出：

```
One Line
{"bar":123,"foo":"ABC"}
Formatted:
{
   "bar" : 123,
   "foo" : "ABC"
} 
```

* * *

**JAX-RS**

同样的行为也适用`MOXyJsonProvider`（参见： [http](http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html) ://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html ）。

***一条线***

默认情况下，当您包含`MOXyJsonProvider`在 JAX-RS 应用程序中时，输出将被编组在一行中：

```
package org.example;

import java.util.*;
import javax.ws.rs.core.Application;
import org.eclipse.persistence.jaxb.rs.MOXyJsonProvider;

public class CustomerApplication  extends Application {

    @Override
    public Set<Class<?>> getClasses() {
        HashSet<Class<?>> set = new HashSet<Class<?>>(2);
        set.add(MOXyJsonProvider.class);
        set.add(CustomerService.class);
        return set;
    }

} 
```

***格式化输出***

您还可以配置`MOXyJsonProvider`生成格式化输出：

```
package org.example;

import java.util.*;
import javax.ws.rs.core.Application;
import org.eclipse.persistence.jaxb.rs.MOXyJsonProvider;

public class CustomerApplication  extends Application {

    @Override
    public Set<Class<?>> getClasses() {
        HashSet<Class<?>> set = new HashSet<Class<?>>(1);
        set.add(ExampleService.class);
        return set;
    }

    @Override
    public Set<Object> getSingletons() {
        MOXyJsonProvider moxyJsonProvider = new MOXyJsonProvider();
        moxyJsonProvider.setFormattedOutput(true);
    }

} 
```

# apache - Apache 更改 vhost 以将名称转发到外部 IP 地址

> ID：11450510
> 
> 赞同：0
> 
> 时间：2012-07-12T11:07:01.380
> 
> 标签：apache

我正在运行 Linux (Mac OSX) 和 MAMP。我想将我的虚拟主机设置为将 www.example.com 指向特定的外部 IP 地址 78.123.123.123。

我该怎么做呢？

我已经做到了：更改我的 etc/hosts 文件

```
127.0.0.1       www.example.com 
```

并将其添加到我的 httpd.conf

```
<VirtualHost *>
DocumentRoot "89.111.119.119"
ServerName www.example.com
</VirtualHost> 
```

提前致谢！

缺口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:53:40.887

我对此完全想多了（或想得不够！？）。

我只需要更改主机文件：

```
99.99.99.99       www.example.com 
```

# c# - 请求方法和线程问题？

> ID：11450512
> 
> 赞同：4
> 
> 时间：2012-07-12T11:07:05.703
> 
> 标签：c#, winforms, multithreading, proxy, httpwebrequest

我正在开发一个应用程序，它可以为 Google+1、Facebook 分享和推文抓取网站。我有一个接受 URL 的请求方法，然后关闭并获取每种社交媒体类型的计数。

其逻辑如下：-

*   取网址
*   通过本地/默认 IP 进行请求，直到我们获得速率受限/非 500 响应
*   出错时
    *   调用`SelectNewProxy()`迭代代理列表并随机返回一个尝试（避免IP请求限制的好方法）
    *   从列表中删除错误代理以避免再次选择它
    *   启动一个每秒递增的计时器
*   当计时器 == 600（10 分钟）时
    *   创建新`WebProxy`的并再次尝试我们本地/默认 IP 后面的请求
    *   重置计时器

冲洗并重复

代码如下：

```
public string Request(string action)
{
      HttpWebRequest req;

      OnStatusChange(new MyArgs() { Message = "Status: Requesting..." });
      string response = string.Empty;

      while (response.Equals(string.Empty) && proxy != null)
      {
             try
             {
                  req = (HttpWebRequest)WebRequest.Create(action);
                  req.Proxy = proxy;
                  HandleUIMessages(action, proxy);
                  response = new StreamReader(req.GetResponse().GetResponseStream()).ReadToEnd();
              }
              catch
              {
                  //OnProxyChange(new MyArgs() { ProxyMessage = string.Format("Proxy: {0}", proxy.Address.ToString()) });
                  RemoveProxy(proxy);

                  if (!timer.Enabled)
                  {
                      timer.Interval = (int)TimeInterval.OneSecond;
                      timer.Elapsed += new System.Timers.ElapsedEventHandler(timer_Elapsed);
                      timer.Enabled = true;
                      timer.Start();
                  }
                  WebProxy reset = new SelectNewProxy();     
                  proxy = counter >= 600 ? reset : proxy = SelectNewProxy();
               }
      }
      return response;
} 
```

值得一提的是，我正在使用`ThreadPool`并且每个请求都在它自己的线程中运行。看起来它会起作用，但我没有得到想要的效果，计数器达到“600”并设置`proxy = reset`，但它似乎只是非常短暂地完成它，可能只针对第一个命中它的线程？然后`timer_Elapsed`被调用并被`counter`重置。难道是一个线程正在点击它，分配`proxy = reset`然后因为`counter`现在已经被重置（不再> = 600），所有后续排队的线程都会调用`SelectNewProxy()`？感觉就像我在漫无边际，但希望有人能理解我想说的话，如果我的猜测是正确的，我怎样才能确保所有线程都获得`proxy = reset`并重试我们的初始 IP？

任何帮助深表感谢！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:37:57.847

你是怎么申报的`proxy`？如果你在多个线程上读/写它的值，你应该确保你用`volatile`关键字声明它，否则在一个线程上的写入`proxy`可能不会被其他线程观察到。

例如：

```
volatile WebProxy proxy; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T13:58:09.220

在我看来，您的范围界定问题。如果我正确解释了您的帖子，您将为您发布的请求方法的每个调用创建一个线程。

Anything declared in the method obviously is part of your new thread. Anything outside the method is likely to not be part of your new thread. This means you may end up with multiple threads trying to do stuff to state that is shared between threads. In this case you access proxy from multiple threads. As this is an instance of an object you should lock it before setting the proxy variable. Us lock (proxy) { // code using proxy } to do a thread safe set to that variable.

# python - 构造和排序一个元组列表

> ID：11450513
> 
> 赞同：2
> 
> 时间：2012-07-12T11:07:08.247
> 
> 标签：python, matplotlib, tuples

文本中的数据格式，

```
2010-04-16,9:15:00,3450,3488,3450,3470 
```

解析文本，

```
Utuple = collections.namedtuple('Utuple', 'DT,OpenPrice,ClosePrice,HighPrice,LowPrice')
stats = collections.Counter()
for line in data.readlines():
    cols = line.split(',')
    Date = cols[0]
    d = Date.split('-')
    Time = cols[1]
    t = Time.split(':')
    DT = datetime(int(d[0]), int(d[1]), int(d[2]), int(t[0]), int(t[1]), int(t[2]))
    DT = mdates.date2num(DT)
    OpenPrice = float(cols[2])
    HighPrice = float(cols[3])
    LowPrice = float(cols[4])
    ClosePrice = float(cols[5])
    stats[DT] = Utuple(DT,OpenPrice,ClosePrice,HighPrice,LowPrice) 
```

我想获得一个元组列表以适应`candlesticks`matplotlib.finance 中的格式，预计为

```
 D = [(datetime.datetime(2010, 4, 16, 9, 30), 311, 332, 344, 311), 
   (datetime.datetime(2010, 4, 16, 9, 31), 312, 332, 344, 311), 
   (datetime.datetime(2010, 4, 16, 9, 32), 323, 332, 344, 320),
   (datetime.datetime(2010, 4, 16, 13, 0), 331, 332, 344, 330), 
   (datetime.datetime(2010, 4, 16, 13, 1), 335, 342, 348, 333)] 
```

我做到了：

```
formated_data = []
for time, index in stats.items():
    formated_data.append(tuple(index)) 
```

我想保持这个顺序。但是`formated_data`，事实证明，`13`datetime.datetime 中第四列中带有 的行最终位于带有 的行的前面`9`。如何保持元组的顺序`by the order that I save them`或按顺序`the value of the number (9 < 13)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:11:59.213

您必须对结果列表进行排序。迭代器`stats.items()`不保证项目顺序。

或者，您可以通过以下方式迭代密钥

```
for time in sorted(stats.keys()):
    formatted_data.append(tuple(stats[time])) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T12:27:48.480

**首先是解析文本的另一种方法**

```
2010-04-16,9:15:00,3450,3488,3450,3470 
```

本质上是

```
date,time,openprice,closeprice,highprice,lowprice 
```

并进一步分解为

```
YYYY-MM-DD,HH:MM:SS,openprice,closeprice,highprice,lowprice 
```

这转化为正则表达式：

```
r='(\d+)-(\d+)-(\d+),(\d+):(\d+):(\d+),(\d+),(\d+),(\d+),(\d+) 
```

可用于生成元组

```
tuple = re.search(r, my_date_string).groups() 
```

**你的问题：为什么物品按一定的顺序出来**

当您将其插入到集合中时，不再排序。可以将其想象为将大量糖果放入糖果袋中。包包的外层是黑色的。

迭代器所做的是，它一次取出一个糖果。您可能有的任何偏好（例如味道、气味、大小）都无关紧要。唯一这样做的，是迭代器喜欢先输出的任何东西。

**回复：你的评论**

您的意思是您读取的数据的格式与您想要的格式不同，因此您想重新排序元组以反映您认为合理的任何顺序？

*如果是这种情况*，正则表达式将保持不变:) 但是，您只需将其他索引分配给您的变量。

这可以在 python 中非常优雅地完成（准备坠入爱河）：

```
date,time,openprice,highprice,lowprice,closeprice = tuple #temporarily store them
tuple = date,time, openprice,closeprice,highprice,lowprice #reorder the tuple 
```

*如果您认为我对原始数据的解释不正确*，请根据需要重新排序前两条代码行中的第一条。我承认我对您正在制作什么样的应用程序了解不多，因此不知道不同变量的含义。

哦，如果你想知道我是如何做到这一点的，这很简单。逗号是python中的元组解包运算符。

```
 >>>tuple = ('a', 'b' , 'c')
 >>>first,second,third = tuple
 >>>first
    'a' 
```

等等 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T12:26:58.667

基于[`collections.Counter`](http://docs.python.org/library/collections.html#collections.Counter)字典，它不保留顺序（“A Counter is a dict subclass”）

[文档](http://docs.python.org/library/collections.html#ordereddict-examples-and-recipes)中有[一个示例，`collections`](http://docs.python.org/library/collections.html#ordereddict-examples-and-recipes)它显示了如何组合`collections.OrderedDict`以及`collections.Counter`应该做你想做的事情：

```
from collections import Counter, OrderedDict

class OrderedCounter(Counter, OrderedDict):
     'Counter that remembers the order elements are first encountered'

     def __repr__(self):
         return '%s(%r)' % (self.__class__.__name__, OrderedDict(self))

     def __reduce__(self):
         return self.__class__, (OrderedDict(self),) 
```

然后只需更改`stats = collections.Counter()`为`stats = OrderedCounter()`

# regex - 将 sed 与不可打印字符一起使用

> ID：11450514
> 
> 赞同：0
> 
> 时间：2012-07-12T11:07:10.163
> 
> 标签：regex, unix, sed

我在使用 sed 将不可打印字符替换为其他不可打印字符时遇到问题。具体来说，我希望 sed 在表格中查找以 TAB 开头的行并“插入”一个 BACKSPACE，本质上是将该行中的文本带到上一行。

这样做的原因是我有一个分成列的表，其中一些行占据了多行：

```
column1,row1    column2,row1,line1
                column2,row1,line2 
```

我希望它以这样的方式结束（ish）

```
column1,row1    column2,row1,line1         column2,row1,line2 
```

（间距无关紧要）

我似乎无法管理这个。我不确定表达式 \t sand \b 是否无法识别，但它们似乎不像我尝试过的那样。我也无法获得带有八进制表示的 echo 命令

这些是我尝试过的事情：

```
sed 's/^\t/\b/' file.txt newfile.txt

sed 's/^(`echo "\011"`)/`echo "\010"`/' file.txt newfile.txt 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T14:36:33.847

我不会用 sed 做这个。当然，可以让 sed 将一行存储在保持缓冲区中，然后读取下一行，如果它以空格开头，则弹出并打印保持缓冲区，然后打印当前行......但代码看起来就像你的调制解调器丢失的载体。

我会使用awk。

```
awk '/^[^ \t]/ && buf{print buf;buf=""} {buf=buf $0} END{print buf}' input.txt 
```

**这是做什么的？**

*   第二部分，`{buf=buf $0}`，将当前行添加到名为 的缓冲区`buf`中。
*   然后，第一部分`/^[^ \t]/ && buf{print buf;buf=""}`（第一行由于`buf`尚未设置而被忽略）打印`buf`任何不以空格开头的行（即新输出行的开头）。然后它重置`buf`。
*   最后一部分`END{print buf}`，打印所有剩菜。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T12:16:27.840

这是对 sed 的非常丑陋的使用，但有效：

```
 echo "a
 <TAB here>b
 <TAB here>c
 <TAB here>d
 e" | sed ':begin N; /\n\t/'\!'n;  s/\n\t//; t begin' 
```

`bash``\!`因标志的丑陋逃脱而受到赞誉。在脚本中，您可以将其保留。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T15:51:22.387

这可能对您有用（GNU sed）：

```
sed '$!N;s/\n\t/\t/;P;D' file 
```

# java - Adobe CQ5 请求参数绑定

> ID：11450515
> 
> 赞同：3
> 
> 时间：2012-07-12T11:07:15.770
> 
> 标签：java, binding, aem

有谁知道将请求参数绑定到 adobe CQ5 中的对象的任何方式（如在 Spring MVC 或其他此类框架中）？

或者，如果没有办法直接在 CQ5 中执行此操作，是否有人集成了 3rd 方框架来执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:00:38.110

我还没有发现任何与 CQ5 本身绑定的东西。不过，您可以在 CQ5 中使用 Spring DataBinder 类，这就是我所做的。只需在组件中直接使用 org.springframework.web.bind.ServletRequestDataBinder 类，如下所示：

```
ServletRequestDataBinder dataBinder = new ServletRequestDataBinder(myModel, "myModel");
dataBinder.bind(slingRequest); 
```

如果需要，可以通过 #getBindingResult() 方法从 dataBinder 实例中获取 org.springframework.validation.BindingResult。此外，您可以配置 org.springframework.core.convert.ConversionService 以通过 ServletRequestDataBinder#setConversionService(ConversionService) 方法使用。

我做的一件事也是绑定 Sling 后缀。我在我的 URL 后缀中遵循 ${key}=${value} 模式，以便在使用 Sling 后缀时尽可能利用调度程序缓存。例如，给定 URL 为**/content/myApp/en_US/myPage.html/key1=value1/key2=value2.html**，我们将后缀解析为**{"key1":"value1" 的 Map<String, String>， "key2":"value2"}**。您可以通过扩展 ServletRequestDataBinder 并覆盖 #addBindValues(MutablePropertyValues mpvs, ServletRequest request) 方法来绑定这些值。例如：

```
public class SlingServletRequestDataBinder extends ServletRequestDataBinder {
  public SlingServletRequestDataBinder(Object target, String objectName) {
    super(target, objectName);
  }

  @Override
  protected void addBindValues(MutablePropertyValues mpvs,
      ServletRequest request) {
    SlingHttpServletRequest slingHttpServletRequest = unwrap(request);

    if (null == slingHttpServletRequest) {
      return;
    }

    String suffix = slingHttpServletRequest.getRequestPathInfo().getSuffix();
    Map<String, String> suffixParameters = // parse suffix into Map here...
    mpvs.addPropertyValues(suffixParameters);

    super.addBindValues(mpvs, request);
  }

  public static SlingHttpServletRequest unwrap(ServletRequest servletRequest) {
    // immediate termination if we found one
    if (servletRequest instanceof SlingHttpServletRequest) {
      return (SlingHttpServletRequest) servletRequest;
    }

    while (servletRequest instanceof ServletRequestWrapper) {
      servletRequest = ((ServletRequestWrapper) servletRequest).getRequest();

      // immediate termination if we found one
      if (servletRequest instanceof SlingHttpServletRequest) {
        return (SlingHttpServletRequest) servletRequest;
      }
    }

    return null;
  }
} 
```

以上内容应结合使用 Sling 后缀和 URL 参数。例如，给定这个模型：

```
public class MyModel {
  private String key1;
  private String key2;
  private String key3;
  // getters and setters go here...
} 
```

和**/content/myApp/en_US/myPage.html/key1=value1/key2=value2.html?key3=value3**的 URL ，您的模型将最终为**{"key1":"value1", "key2":"value2 ", "key3":"value3"}**。

# commonsware-cwac - 无尽的适配器，点击加载....行将给出异常

> ID：11450517
> 
> 赞同：0
> 
> 时间：2012-07-12T11:07:39.150
> 
> 标签：commonsware-cwac

我只是在测试这个，如果用户在显示时按下临时的“正在加载...”行，它将给出超出范围的异常。处理这个问题的最佳方法是什么？检查列表 OnItemCLickListener 上的 ID？

问候，

这是列表视图项侦听器：

> 实际ListView.setOnItemClickListener（新的OnItemClickListener（）{

```
 @Override
                public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {

                    IpdmsMobileMenuItemListDTO dto=(IpdmsMobileMenuItemListDTO) parent.getItemAtPosition(position);

                    if(getView().findViewById(R.id.myprocessdetail)!=null)
                        updateProcess((MyProcessDTO) dto.getDto());
                    else{

                        mListener.onMyProcessSelected((MyProcessDTO) dto.getDto());
                    }
                }
            }); 
```

这是堆栈跟踪：

```
 07-12 11:35:31.558: E/AndroidRuntime(16339): FATAL EXCEPTION: main
07-12 11:35:31.558: E/AndroidRuntime(16339): java.lang.IndexOutOfBoundsException
07-12 11:35:31.558: E/AndroidRuntime(16339):    at java.util.LinkedList.get(LinkedList.java:459)
07-12 11:35:31.558: E/AndroidRuntime(16339):    at android.widget.ArrayAdapter.getItem(ArrayAdapter.java:298)
07-12 11:35:31.558: E/AndroidRuntime(16339):    at com.commonsware.cwac.adapter.AdapterWrapper.getItem(AdapterWrapper.java:57)
07-12 11:35:31.558: E/AndroidRuntime(16339):    at android.widget.HeaderViewListAdapter.getItem(HeaderViewListAdapter.java:180)
07-12 11:35:31.558: E/AndroidRuntime(16339):    at android.widget.AdapterView.getItemAtPosition(AdapterView.java:740)
07-12 11:35:31.558: E/AndroidRuntime(16339):    at sinfic.mobile.ipdms.ecrans.fragments.myprocess.MyProcessListFragment$3.onItemClick(MyProcessListFragment.java:181)
07-12 11:35:31.558: E/AndroidRuntime(16339):    at android.widget.AdapterView.performItemClick(AdapterView.java:284)
07-12 11:35:31.558: E/AndroidRuntime(16339):    at android.widget.ListView.performItemClick(ListView.java:3382)
07-12 11:35:31.558: E/AndroidRuntime(16339):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:1696)
07-12 11:35:31.558: E/AndroidRuntime(16339):    at android.os.Handler.handleCallback(Handler.java:587)
07-12 11:35:31.558: E/AndroidRuntime(16339):    at android.os.Handler.dispatchMessage(Handler.java:92)
07-12 11:35:31.558: E/AndroidRuntime(16339):    at android.os.Looper.loop(Looper.java:123)
07-12 11:35:31.558: E/AndroidRuntime(16339):    at android.app.ActivityThread.main(ActivityThread.java:4627)
07-12 11:35:31.558: E/AndroidRuntime(16339):    at java.lang.reflect.Method.invokeNative(Native Method)
07-12 11:35:31.558: E/AndroidRuntime(16339):    at java.lang.reflect.Method.invoke(Method.java:521)
07-12 11:35:31.558: E/AndroidRuntime(16339):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-12 11:35:31.558: E/AndroidRuntime(16339):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-12 11:35:31.558: E/AndroidRuntime(16339):    at dalvik.system.NativeStart.main(Native Method)
```

* * *

它在方法中的位置获取项目的行：

**parent.getItemAtPosition(位置);**

我在 onItemClick 中添加了这个条件：

```
if(view.findViewById(R.id.loading_view)!=null){
                        //if its the loading row we wont do anything
                        return; 
                    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T12:22:44.210

从战术上讲，您需要自己过滤掉它，方法是检查`position`并查看您是否在最后一行。

我会寻找[一个补丁`EndlessAdapter`](https://github.com/commonsguy/cwac-endless/issues/11)`null`，在这种情况下会返回`getItem()`.

# cakephp - CakePHP - 我无法让 App::uses() 找到我的班级

> ID：11450519
> 
> 赞同：1
> 
> 时间：2012-07-12T11:07:55.470
> 
> 标签：cakephp

我有一些只包含静态实用程序方法的自定义类：

```
app/Lib/Utility/AppString.php 
```

但是蛋糕找不到课程。我试过了：

```
// app/Config/bootstrap.php

App::uses('AppString', 'Utility');
App::uses('AppString', 'Lib/Utility');
App::uses('AppString', 'Lib'); 
```

我不知道我应该做什么才能让 Cake 找到课程。我在 bootstrap.php 中执行此操作，因为这些类对应用程序至关重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:33:55.200

事实证明我的使用是正确的：

```
App::uses('AppString', 'Utility'); 
```

但是，我的 AppString 类中存在语法错误。这会导致令人困惑的消息，因为 PHP 将报告一个无法找到该类的致命错误，而实际上这只是因为文件中的错误。

# android - ListView：当行具有可点击的小部件时如何显示项目选择器？

> ID：11450521
> 
> 赞同：2
> 
> 时间：2012-07-12T11:08:05.663
> 
> 标签：android, android-listview

我已经为此苦苦挣扎了很长一段时间，尽管我很确定这个问题已经解决了一千次。我已经查看了关于 SO 和其他地方的各种其他类似问题，但我无法解决这个问题。

核心问题是：

> 当我的列表项中有可点击组件时，如果我长按一行（用于显示上下文操作栏），则不会出现该行的选择器。虽然触发了长点击 - 只是没有任何视觉反馈表明长点击正在发生。

请注意，仅当行布局包含可单击项时才会出现此问题。这是我已经尝试过的事情的快速清单：

*   在“ListView”上，我设置`drawSelectorOnTop`为`true`（在 XML 和`getListView()`
*   在“ListView”上，我设置`choiceMode`为`singleChoice`（在 XML 和`getListView()`
*   在“ListView”上，我设置`listSelector`了各种值 - 透明、白色等（在 XML 和`getListView()`.
*   当然，`LinearLayout`托管列表中各个行的 已`longClickable`设置为`true`。没有这个，长点击甚至不会被注册。

无论我做什么，长按列表项都不会显示任何类型的选择器，尽管长按确实发生了并且我确实收到了`OnItemLongClick`回调。

关于可能导致这种情况的任何线索？

* * *

重现问题的代码：

### list_item.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:baselineAligned="true"
android:longClickable="true"
android:orientation="horizontal" >

<TextView
    android:id="@+id/tvTitle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<Button
    android:id="@+id/btnGo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="right"
    android:background="@android:drawable/btn_star_big_on" />

</LinearLayout> 
```

### activity_main.xml

```
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/LinearLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:entries="@array/configurations" >
</ListView>

</LinearLayout> 
```

### MainActivity.java

```
public class MainActivity extends ListActivity {

private ListView mListView;
private Context mContext;
private RowAdapter mAdapter;
private static final String LOG_TAG = "ListViewLongClick";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mContext = this;
    mListView = getListView();
    mListView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
    mListView.setSelector(android.R.color.white);
    mListView.setDrawSelectorOnTop(true);
    mAdapter = new RowAdapter(mContext, R.layout.list_item, R.id.tvTitle,
            getResources().getStringArray(R.array.configurations));
    mListView.setAdapter(mAdapter);
    mListView.setOnItemLongClickListener(new OnItemLongClickListener() {

        public boolean onItemLongClick(AdapterView<?> parent, View view,
                int position, long id) {

            Toast.makeText(mContext, "Long-click on item " + position,
                    Toast.LENGTH_SHORT).show();
            return true;
        }
    });
}

static class RowAdapter extends ArrayAdapter<String> {

    private int mResource;
    private String[] configs;

    public RowAdapter(Context context, int resource,
            int textViewResourceId, String[] objects) {
        super(context, resource, textViewResourceId, objects);
        this.mResource = resource;
        this.configs = objects;

    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View viewToReturn = convertView;
        if (convertView == null) {
            viewToReturn = LayoutInflater.from(getContext()).inflate(
                    this.mResource, null, false);
        }

        TextView label = (TextView) viewToReturn.findViewById(R.id.tvTitle);
        label.setText(configs[position]);
        Button btn = (Button) viewToReturn.findViewById(R.id.btnGo);
        btn.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                Log.d(LOG_TAG, "Aha! You clicked on the star button");
            }
        });
        return viewToReturn;
    }

}

} 
```

### 字符串.xml

```
<resources>

<string name="app_name">ListViewLongClick</string>
<string name="hello_world">Hello world!</string>
<string name="menu_settings">Settings</string>
<string name="title_activity_main">MainActivity</string>

 <string-array name="configurations">
    <item >Phone-Port</item>
    <item >Phone-Land</item>
    <item >Tab7-Port</item>
    <item >Tab7-Land</item>
    <item >Tab10-Port</item>
    <item >Tab10-Land</item>
</string-array>
</resources> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T11:29:50.460

您应该像这样更改您的 list_items ：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
              android:baselineAligned="true"
              android:longClickable="true"
              android:orientation="horizontal"
              android:background="@android:drawable/list_selector_background"
        >

    <TextView
            android:id="@+id/tvTitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Large Text"
            android:textAppearance="?android:attr/textAppearanceLarge" />

    <Button
            android:id="@+id/btnGo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:background="@android:drawable/btn_star_big_on" />

</LinearLayout> 
```

我`android:background="@android:drawable/list_selector_background"`在你的`LinearLayout`.

希望这对你有帮助 =)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:19:09.220

在 res/menu 文件夹中创建一个 ContextMenu 并覆盖 onCreateContextMenu 方法：

```
 @Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    MenuInflater inflater = getMenuInflater();
    menu.setHeaderTitle("Please select:");
    inflater.inflate(R.menu.context_menu, menu);
} 
```

覆盖 onContextItemSelected 方法。并且不要忘记在 onCreate 方法中添加以下行：

```
registerForContextMenu(getListView()); 
```

有关详细信息，请参阅以下[链接](http://developer.android.com/guide/topics/ui/menus.html#context-menu)。

# c# - C#：异步 NamedPipeServerStream 管道被关闭异常

> ID：11450522
> 
> 赞同：5
> 
> 时间：2012-07-12T11:08:12.973
> 
> 标签：c#, .net, named-pipes

我之前关于同一主题的问题：[C#: Asynchronous NamedPipeServerStream 理解](https://stackoverflow.com/questions/11435262/c-asynchronous-namedpipeserverstream-understanding) 现在我有下一个：

```
private void StartListeningPipes()
{
    try
    {
        isPipeWorking = true;
                namedPipeServerStream = new NamedPipeServerStream(PIPENAME, PipeDirection.InOut, 1, PipeTransmissionMode.Byte, PipeOptions.Asynchronous, BUFFERSIZE, BUFFERSIZE);
                Console.Write("Waiting for client connection...");
                while(isPipeWorking)
                {
            IAsyncResult asyncResult = namedPipeServerStream.BeginWaitForConnection(this.WaitForConnectionAsyncCallback, null);
                        Thread.Sleep(3*1000);
                }
        }
        //// Catch the IOException that is raised if the pipe is broken or disconnected.
        catch (IOException e)
        {
        Console.WriteLine("IOException: {0}. Restart pipe server...", e.Message);
                StopListeningPipes();
                StartListeningPipes();
        }
        //// Catch ObjectDisposedException if server was stopped. Then do nothing.
        catch (ObjectDisposedException)
        {
        }
}

private void WaitForConnectionAsyncCallback(IAsyncResult result)
{
    try
    {
        namedPipeServerStream.EndWaitForConnection(result);
        Console.WriteLine("Client connected.");
        namedPipeServerStream.WaitForPipeDrain();
                byte[] buff = new byte[BUFFERSIZE];
                namedPipeServerStream.Read(buff, 0, BUFFERSIZE);
                string recStr = TrimNulls(buff);
                Array.Clear(buff, 0, buff.Length);
                Console.WriteLine();
                Console.WriteLine("'"+recStr+"'");
    }
    catch (Exception e)
    {
        Console.WriteLine("Error: " + e.Message);            
        }
} 
```

但我越来越

`The pipe is being closed Exception`每次我收到客户的消息

为什么？

我的客户：

```
 using (NamedPipeClientStream pipeStream = new NamedPipeClientStream(General.PIPENAME))
{
    try
        {
        byte[] bytes = General.Iso88591Encoding.GetBytes(sendingMessage);
                pipeStream.Write(bytes, 0, bytes.Length);
                pipeStream.Flush();
                pipeStream.WaitForPipeDrain();
        }
        catch (TimeoutException)
        {
        Console.WriteLine("Timeout error!");
        }
    catch (Exception e)
        {
        Console.WriteLine(string.Format("Error! ", e.Message));
        }
} 
```

* * *

目前的最终代码是：

```
/// <summary>
        /// Create new NamedPipeServerStream for listening to pipe client connection
        /// </summary>
        private void ListenForPipeClients()
        {
            if (!this.isListeningToClients)
                return;

            try
            {
                PipeSecurity ps = new PipeSecurity();
                PipeAccessRule par = new PipeAccessRule("Everyone", PipeAccessRights.ReadWrite, System.Security.AccessControl.AccessControlType.Allow);
                ps.AddAccessRule(par);
                pipeClientConnection = new NamedPipeServerStream(General.PIPENAME, PipeDirection.InOut, 1, PipeTransmissionMode.Byte, PipeOptions.Asynchronous, General.BUFFERSIZE, General.BUFFERSIZE, ps);
                Console.Write("Waiting for client connection...");
                /*namedPipeServerStream.WaitForConnection();
                OnPipeConnected(namedPipeServerStream);*/
                IAsyncResult result = pipeClientConnection.BeginWaitForConnection(OnPipeConnected, pipeClientConnection);
            }
            catch (ObjectDisposedException)
            {
                //// Catch ObjectDisposedException if server was stopped. Then do nothing.
            }
            catch (Exception e)
            {
                Console.WriteLine("Error occures: {0}. Restart pipe server...", e.Message);
                this.logger.Add(LogLevel.Warning, string.Format("Error occures: {0}. Restart pipe server...", e.Message));
                ListenForPipeClients();
            }
        }

        /// <summary>
        /// Async callback on client connected action
        /// </summary>
        /// <param name="asyncResult">Async result</param>
        private void OnPipeConnected(IAsyncResult asyncResult)
        {
            using (var conn = (NamedPipeServerStream)asyncResult.AsyncState)
            {
                try
                {
                    conn.EndWaitForConnection(asyncResult);
                    Console.WriteLine("Client connected.");
                    PipeClientConnection clientConnection = new PipeClientConnection(conn, notifierSenderCache, defaultStorageTime);
                }
                catch (Exception e)
                {
                    Console.WriteLine(e.Message);
                    this.logger.Add(LogLevel.Warning, e.Message);
                }
            }

            ListenForPipeClients();
        } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T11:25:24.833

看来您需要`NamedPipeServerStream`为每个客户单独提供一个。（请注意，我不是发现这一点的人，请参阅其他答案。）我想工作的服务器端看起来像这样（草稿代码）：

```
while(this.isServerRunning)
{
     var pipeClientConnection = new NamedPipeServerStream(...);

     try
     {
         pipeClientConnection.WaitForConnection();
     }
     catch(...)
     {
         ...
         continue;
     }

     ThreadPool.QueueUserWorkItem(state =>
          {
               // we need a separate variable here, so as not to make the lambda capture the pipeClientConnection variable, which is not recommended in multi-threaded scenarios
               using(var pipeClientConn = (NamedPipeServerStream)state)
               {
                    // do stuff
                    ...
               }
          }, pipeClientConnection);
} 
```

作为旁注，正如在对您的问题的评论中指出的那样，您通过`BeginWaitForConnection`循环调用每 3 秒启动一个新的异步调用会浪费内存（唯一不会浪费内存的情况是 new连接以小于 3 秒的间隔进行，但我怀疑您是否可以肯定地知道这一点）。你看，基本上每 3 秒你就会发起一个新的异步调用，不管最后一个调用是仍然挂起还是已经完成。此外，它 - 再一次 - 没有考虑到您需要`NamedPipeServerStream`为每个客户单独提供一个。

要解决此问题，您需要消除循环，并使用回调方法“链接” BeginWaitForConnection 调用。这是您在使用 .NET 时经常在异步 I/O 中看到的类似模式。草稿代码：

```
private void StartListeningPipes()
{
    if(!this.isServerRunning)
    {
        return;
    }

    var pipeClientConnection = new NamedPipeServerStream(...);

    try
    {
        pipeClientConnection.BeginWaitForConnection(asyncResult =>
            {
                // note that the body of the lambda is not part of the outer try... catch block!
                using(var conn = (NamedPipeServerStream)asyncResult.AsyncState)
                {
                    try
                    {
                        conn.EndWaitForConnection(asyncResult);
                    }
                    catch(...)
                    {
                        ...
                    }

                    // we have a connection established, time to wait for new ones while this thread does its business with the client
                    // this may look like a recursive call, but it is not: remember, we're in a lambda expression
                    // if this bothers you, just export the lambda into a named private method, like you did in your question
                    StartListeningPipes();

                    // do business with the client
                    conn.WaitForPipeDrain();
                    ...
                }
            }, pipeClientConnection);
    }
    catch(...)
    {
        ...
    }
} 
```

控制流将是这样的：

*   【主线程】StartListeningPipes()：创建NamedPipeServerStream，发起BeginWaitForConnection()
*   [线程池线程 1] 客户端 #1 连接，BeginWaitForConnection() 回调：EndWaitForConnection() 然后 StartListeningPipes()
*   [线程池线程 1] StartListeningPipes()：创建了新的 NamedPipeServerStream，BeginWaitForConnection() 调用
*   [线程池线程 1] 回到 BeginWaitForConnection() 回调：开始与连接的客户端做生意 (#1)
*   [线程池线程 2] 客户端 #2 连接，BeginWaitForConnection() 回调：...
*   ...

我认为这比使用阻塞 I/O 困难得多——事实上，我不太确定我做对了，如果你发现任何错误，请指出来——而且它也更令人困惑。

要在任一示例中暂停服务器，您显然会将`this.isServerRunning`标志设置为`false`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T11:23:25.947

行。把我弄糊涂了。每个客户端应该有一个 NamedPipeServerStream。因此如果 Async 操作完成，则必须重新创建 NamedPipeServerStream。感谢[C# 中的这个多线程 NamePipeServer](https://stackoverflow.com/questions/4570653/multithreaded-namepipeserver-in-c-sharp)

应该：

```
while(isPipeWorking)
            {
                IAsyncResult asyncResult = namedPipeServerStream.BeginWaitForConnection(this.WaitForConnectionAsyncCallback, null);
                Thread.Sleep(3*1000);
                if (asyncResult.IsCompleted)
                {
                    RestartPipeServer();
                    break;
                }
            } 
```

# objective-c - NSURL 比较：与不同的 URL 进行比较

> ID：11450525
> 
> 赞同：1
> 
> 时间：2012-07-12T11:08:33.307
> 
> 标签：objective-c, cocoa, if-statement, nsurl

我已经搜索过这个，但我没有得到正确的关键字来获得结果。所以我带着问题来了。这是我的问题。

如何给出 if 条件进行检查，给定的 NSURL 路径是否用于 FOLDER（或）文本文件。
例如：

```
 if ([the given url is for FOlDERS])  
 {
    //i want to so something
 }
 else if([it contains .rtf files])
 {
    //i want to so something
 }
  else if([it contains .mov files])
  {
    //i want to so something
  } 
```

我的网址是

```
Users/Desktop/dr/dg.rtf  
Users/Desktop/dr/dhoom.mov  
Users/Desktop/dr/SampleTest/ 
```

给我一些建议。，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T13:51:23.947

```
NSURL *url;
//set url here

if([url isFileURL])
{
  if([url pathExtension] isEqualToString:@"mov"])
  {
    //do .mov stuff
  }
  else if([url pathExtension] isEqualToString:@"rtf"]
  {
    //do .rtf stuff
  }
}
else
{
   if([[url lastPathComponent] isEqualToString:@"SampleTest"])
   {
     //do your SampleTest folder stuff
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T15:41:20.447

这个怎么样？

```
BOOL isDir;
NSURL *yourURL;

NSFileManager *fileManager = [[NSFileManager alloc] init];
BOOL result = [fileManager fileExistsAtPath:[yourURL path] isDirectory:&isDir];
if (result) {
    // ok yourURL is pointing to something real
    if (isDir) {
        // yourURL is a directory
    }
    else if ([[yourURL pathExtension] isEqualToString:@"mov"])
    {
        // yourURL is a .mov
    }
    else if ([[yourURL pathExtension] isEqualToString:@"rtf"])
    {
        // yourURL is a .rtf
    }
}
[fileManager release]; 
```

将**Michal**和**werner**答案与固定语法相结合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T11:13:51.557

请查看. [_](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSFileManager/fileExistsAtPath%3aisDirectory%3a)`NSFileManager`

它包含一个完全符合您需要的方法：

```
- (BOOL)fileExistsAtPath:(NSString *)path isDirectory:(BOOL *)isDirectory 
```

# android - 在无法访问 GPS、GSM 和 Internet 的情况下，如何在 Android 设备之间进行时间同步？

> ID：11450527
> 
> 赞同：0
> 
> 时间：2012-07-12T11:08:38.707
> 
> 标签：android, timestamp, intranet

我需要在两个或多个安卓设备之间同步时间。但我不需要改变当地时间，只知道不同设备上的时间不同。

我不能假设设备可以访问 GPS 或 GMS 甚至互联网。通过 WIFI 在 Intranet 中建立连接。

Android上的API可以帮助我快速完成吗？

对于连接，我使用 Socket 和 ServerSocket 类。

更新：我搜索 API，它可以帮助我交换有关时间的数据并进行同步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:16:02.710

您可以使用 ：

[http://developer.android.com/reference/android/os/SystemClock.html](http://developer.android.com/reference/android/os/SystemClock.html)

System.setCurrentTimeMilli() - 这将更改系统时间，然后应该更新使用系统时间的所有应用程序/小部件。

此外，您将需要：

```
android.permission.SET_TIME 
```

作为清单中的使用权限。

至于电话之间的连接和通信-我不知道您要解决什么问题-但是您可以在一部电话上安装服务器套接字-在另一部电话上安装套接字-并使用它们进行通信。

# c++ - Qt - 没有托盘图标的通知，可能吗？

> ID：11450528
> 
> 赞同：8
> 
> 时间：2012-07-12T11:08:46.053
> 
> 标签：c++, windows, qt, notifications

我正在编写一个 C++ Qt 桌面应用程序。

是否可以在 Qt 中显示 Skype=like 通知，**而不**创建托盘图标？

我发现的所有通知参考都需要一个我不想创建的托盘图标。

通知应显示应用程序何时打开以及何时最小化。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T12:13:36.160

**更新**：似乎这不适用于最新版本的 Qt。在创建 QSystemTrayIcon 之后，我发现一个解决方法是：

*   称呼`show()`
*   显示所需的消息`showMessage`
*   称呼`hide()`

这对我来说没问题。

* * *

创建一个`QSystemTrayIcon`但从不调用`show()`它。然后您可以使用`QSystemTrayIcon::showMessage`来显示您的弹出窗口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-12T00:17:33.727

有点晚了，但你可能对这个库感兴趣 [https://github.com/Snorenotify/Snorenotify/](https://github.com/Snorenotify/Snorenotify/)

> Snorenotify 是一个多平台的 Qt 通知框架。使用插件系统可以在 Windows、Unix 和 Mac 上使用许多不同的通知系统创建通知。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T11:16:02.277

只需创建弹出类并将其显示在桌面上的某个位置，并始终位于顶部标志。通知也可能是一个小部件

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-20T13:00:18.757

与 OP 有类似的问题（但使用 Python ！！），[罗马里奥](https://stackoverflow.com/users/2507567/rom%C3%A1rio)的回答让我达到了我想要的一半。

在我的场景中，我有一个系统托盘工具，我通过锁文件强制只有一个活着。但是，用户反馈要求，如果他们尝试在已经打开的情况下启动，我会提供某种反馈。

我发现的是在 Windows 上 - Romarios 的答案将导致图标保留在系统托盘中 - 如果你在它`setVisible(False)`之前调用`show()`它会阻止图标出现/累积在系统托盘中:)

我的完整样本是

```
class SimpleNotifier(QtWidgets.QWidget):

    def notify_running(self):
        tray_icon = QtGui.QIcon(Params.TRAY_ICON)
        self.setIcon(tray_icon)
        self.setVisible(False)
        self.show()
        self.showMessage("Hi User", "Application already inside your sys-tray", QtGui.QIcon(Params.TRAY_ICON))

def notify():
    app = QtWidgets.QApplication(sys.argv)
    notify = HUBController.SimpleNotifier()
    notify.notify_running()
    app.exit()

notify() 
```

*是的，我在潜伏多年后确实注册了一个帐户，只是为了发表这篇文章::)*

# xml - Scala Lift - LiftRules.loadResourceAsXml 提取值

> ID：11450536
> 
> 赞同：1
> 
> 时间：2012-07-12T11:09:12.447
> 
> 标签：xml, scala, lift

我有以下内容：

```
LiftRules.loadResourceAsXml("/config.xml") 
```

我正在尝试从以下 xml 表中提取值：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<config>

    <webroot>/opt/tomcat/webapps/ROOT</webroot>
    <broadcast>

        <quality>

            <primary>15</primary>
            <secondary>2</secondary>

        </quality>

    </broadcast>

</config> 
```

在此先感谢您的帮助，非常感谢:)

**编辑：添加根标签**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:52:05.140

这是从该配置中提取主要质量的示例：

```
val primaryQuality: Int = LiftRules.loadResourceAsXml("/config.xml").map { x =>
    (x \\ "quality" \ "primary" head).text.toInt
} openOr 20 
```

# c# - 格式化字符串以用作锚标记（#书签）并设置为 HTML 元素的 ID 属性

> ID：11450538
> 
> 赞同：1
> 
> 时间：2012-07-12T11:09:18.220
> 
> 标签：c#

我需要将带有非 url 安全字符的字符串（示例包括 '、"、& 和西班牙语/法语/德语中的重音字母）转换为可用作 URL 中的锚点的格式

例如 www.site.com#**锚点**

我已经尝试过 HttpUtility.HtmlAttributeEncode(s) 和 HttpUtility.UrlEncode(s) - 它们按计费方式工作，但它们不会产生实际正常工作的锚字符串（在 Firefox 中测试）

目前我正在替换有问题的字符以使其正常工作，但我认为必须有一种更通用的方法可以用于此目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:14:31.467

你会同时使用两者。首先对锚点进行编码，使其在 URL 中起作用，然后对整个 URL 进行编码，使其在 HTML 属性中起作用：

```
HttpUtility.HtmlAttributeEncode("http://www.site.com#" + HttpUtility.UrlEncode(s)) 
```

# iphone - 标题搜索路径和库搜索路径之间的区别？

> ID：11450540
> 
> 赞同：9
> 
> 时间：2012-07-12T11:09:22.860
> 
> 标签：iphone, ios, xcode, cocoa-touch

这个问题与 iPhone 相关 -

`Header Search Paths`和 和有什么不一样`Library Search Paths`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-12T11:14:48.273

头文件搜索路径是编译器将在其中查找头文件（即您从类实现中包含的“.h”文件）的位置。

库搜索路径是链接器查找从正在编译和链接的代码中引用的已编译目标文件（或包含那些已编译目标文件的存档文件）的位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-08-17T00:16:23.823

**HEADER_SEARCH_PATHS 与 LIBRARY_SEARCH_PATHS**

*   `Header Search Paths(HEADER_SEARCH_PATHS)`- 可以抛出的是预编译时检查`Module not found`。公共头文件（.h）的位置，只需告诉 Xcode 它们在哪里。

*   `Library Search Path(LIBRARY_SEARCH_PATHS)`- 可以抛出的是编译时检查`Library not found for`。有库（可执行文件）的位置，只需告诉 Xcode 他们将在哪里使用它进行链接。对空格敏感

# python - Django 在同一页面上安装多个应用程序

> ID：11450542
> 
> 赞同：3
> 
> 时间：2012-07-12T11:09:35.470
> 
> 标签：python, django, url

我对 Django 很陌生，绝对不是很有经验。

无论如何，我已经在本地网络上创建了自己的站点，并成功地使用 Django 1.4 创建了一个应用程序。但是当我尝试启动另一个应用程序时，它似乎只在某些（在我看来）特殊情况下出现在我的网站上。

每当我的 urls.py 文件看起来像这样时：

```
 urlpatterns = patterns('',
        url(r'^$', 'myapp1.views.home1', name='home1'),
        url(r'^$', 'myapp2.views.home2', name='home2'), 
```

第一个应用程序显示在页面上，但是当我切换它们时，第二个应用程序显示在页面上：

```
 urlpatterns = patterns('',
        url(r'^$', 'myapp2.views.home2', name='home2'),
        url(r'^$', 'myapp1.views.home1', name='home1'), 
```

正如我所说，我不是很有经验，所以如果您需要我提供更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T11:15:56.327

Django 通过将 URL 模式与您编写的某些代码进行匹配来工作`views.py`。

在您的情况下，您将相同的模式 ( `^$`) 指向两个视图方法。Django 将在找到匹配项时停止，因此当您切换模式时，它将始终匹配列表中的第一个条目。

如果您将模式更改为：

```
urlpatterns = patterns('',
        url(r'^/two$', 'myapp2.views.home2', name='home2'),
        url(r'^$', 'myapp1.views.home1', name='home1'), 
```

现在当你输入时`http://localhost:8000/two` `home2`会被执行，当你输入时`http://localhost:8000/` `home1`会被执行。

# javascript - 如何从 JavaScript 设置和触发 CSS 转换

> ID：11450552
> 
> 赞同：9
> 
> 时间：2012-07-12T11:10:16.987
> 
> 标签：javascript, css, css-transitions

我是 html5、css 和 javascript 的新手，而且大多数时候我只是在玩。我想要做的是设置和触发 div 的转换。页面加载后，我设法通过设置转换来做到这一点。但这感觉不是很有活力，似乎也不是正确的方法。我很感谢任何帮助

```
<!DOCTYPE html>
<html>
<head>   
    <style> 
        body{
            text-align: center;
        }

        #dialPointer
        {
            position:relative;
            margin-left: auto;
            margin-right: auto;
            width:23px;
            height:281px;
            background:url(pointer.png);
            background-size:100% 100%;
            background-repeat:no-repeat;

            transform: rotate(-150deg);
            transition-duration: 2s;
            transition-delay: 2s;

            -webkit-transform: rotate(-150deg);
            -webkit-transition-duration:2s;
            -webkit-transition-delay: 2s;
        }

        /* I want to call this once */
        .didLoad
        {
            width:23px;
            height:281px;
            transform:rotate(110deg);
            -moz-transform:rotate(110deg); /* Firefox 4 */
            -webkit-transform:rotate(110deg); /* Safari and Chrome */
            -o-transform:rotate(110deg); /* Opera */
        }

        </style>
</head>

<body>
    <div id="dialPointer"></div>
    <script language="javascript" type="text/javascript">
        window.onload=function () {
            //But instead of using rotate(110deg), I would like to call "didLoad"

            document.getElementById("dialPointer").style.webkitTransform = "rotate(110deg)";

        };
        </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T11:16:44.287

只要您想使用以下 JavaScript，就可以将您的类添加到元素中：

```
document.getElementById("dialPointer").className += " didLoad"; 
```

或者可以说更好，如果你想保证跨浏览器支持，使用像这样的 jQuery：

```
$(function() {
 // Handler for .ready() called.
 $('#dialPointer').addClass('didLoad');
}); 
```

**编辑：**

请参阅我在 Windows 上的 Chrome 和 Safari 中测试过的[小提琴。](http://jsfiddle.net/Q2m56/2/)我不得不注释掉`dialPointer`样式中的过渡代码并将其移至您的`didLoad`班级。我还用填充替换了您的背景图像，以使其在小提琴中正常工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-12T11:25:21.187

触发转换的方式是使元素匹配 CSS 选择器。最简单的方法是将过渡分配给一个类，然后使用 Javascript 添加该类。所以在你的例子中：

```
document.getElementById('dialPointer').classList.add('didLoad'); 
```

并且您选择的元素将动画。（我为此使用了标准补充 Javascript，但它不适用于较旧的浏览器，所以我将由你来完成它）。

要让它在页面加载时产生动画，请将其放入加载事件中：

```
window.addEventListener('load', function () {
    document.getElementById('dialPointer').classList.add('didLoad');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T11:16:23.053

也许是这样的：

```
document.getElementById("dialPointer").className += "didLoad"; 
```

# web-services - 使用 JQuery ajax 访问 POST 网络服务

> ID：11450555
> 
> 赞同：2
> 
> 时间：2012-07-12T11:10:30.913
> 
> 标签：web-services, jquery, jersey

我已经实现了 Jersey Web 服务，我想使用 JQuery 访问它。似乎 ajax() 方法是我需要的。

我已按照[此处](https://stackoverflow.com/questions/7925264/how-to-pass-json-data-and-convert-to-object-in-webserivce)找到的建议进行操作，但我不断收到错误消息，我不知道下一步该做什么。警报中出现的错误是 [object Object]

我已经使用 Java 客户端和以下 curl 命令测试了我的 Web 服务，并且在这两种情况下它都返回了我所期望的（实际上该服务只是修改了对象的一个​​属性并返回它，因为我只是测试沟通问题）

```
lorena@lorena-virtual-machine:~/tools$ echo $DATA
--data-binary {"endpoint":"endpoint","instance":null,"id":"idcube","schema":null}
lorena@lorena-virtual-machine:~/tools$ echo $HEADER
--header Content-Type:application/json
lorena@lorena-virtual-machine:~/tools$ echo $URL
http://localhost:8888/rest/cubes/get
lorena@lorena-virtual-machine:~/tools$ curl ${DATA} ${HEADER} ${URL} 
```

这是我的html页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>QBplus: OLAP cubes in RDF</title>
<link rel="stylesheet" type="text/css" href="css/style.css" />
<script src="js/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="js/i18n/grid.locale-en.js" type="text/javascript"></script>
<script src="js/jquery.jqGrid.min.js" type="text/javascript"></script>

<script type="text/javascript"> 
$(function() {
var baseURL = "http://localhost:8888/rest/cubes/get";
var postData ={id:'cube1', endpoint:'myendpoint',schema:'a schema',instance:'some instance'};
var pdataJSON=JSON.stringify(postData);
$.ajax({
    type:'POST',
    url: baseURL,
    data:pdataJSON,
    contentType: 'application/json; charset=utf-8',
    dataType: 'json',
    success: function (responseText) {
        alert(responseText.d);
    },
    error: function (error) {
        alert(error);
    }
});
});//ready
</script> 
</head>
<body>
  <h1>CUBES</h1>
   <div id="cubes"></div>
</body> 
```

任何帮助，将不胜感激！

问候，

洛雷娜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:17:21.983

在 pdataJSON 前面放置一个 var 来初始化它应该会让你前进。

```
var pdataJSON=JSON.stringify(postData); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:29:44.993

看起来您的数据有问题：

```
var postData ={id:'cube1', endpoint:'myendpoint',schema:'a schema',instance:'some   
 instance'}; 
```

用。。。来代替 ：

```
 var postData ={'id':'cube1', 'endpoint':'myendpoint','schema':'a 
  schema','instance':'some instance'}; 
```

尝试这个

```
 $.ajax({
    type: 'POST',
    contentType: 'application/json',
    url: rootURL,
    dataType: "json",
    data: JSON.stringify(postData);
    success: function(data){
        alert(data.responseText);

    },
    error: function(jqXHR, textStatus, errorThrown){
        alert('error: ' + textStatus);
    }
}); 
```

# google-maps - 隐藏后未重新出现 Google Maps API v3 的覆盖

> ID：11450560
> 
> 赞同：0
> 
> 时间：2012-07-12T11:10:43.767
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我读了很多例子。他们都提到要隐藏覆盖

```
overlay.setMap(null); 
```

这很好用。但是之前隐藏后再次显示它不起作用，尽管它会在初始化期间显示。所有的例子都告诉我使用

```
overlay.setMap(map); 
```

但是覆盖没有重新出现？！怎么了？

[在http://jsbin.com/oworor/3/edit](http://jsbin.com/oworor/3/edit)查看我的代码

乔丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:20:55.070

“map”变量是 mapInitialize 函数的本地变量，更改：

```
 function mapInitialize() {
            var myLatlng = new google.maps.LatLng(47.72, 13.48);
            var myOptions = {
                zoom: 13,
                center: myLatlng,
                mapTypeId: google.maps.MapTypeId.TERRAIN
            }
            var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions); 
```

到：

```
 function mapInitialize() {
            var myLatlng = new google.maps.LatLng(47.72, 13.48);
            var myOptions = {
                zoom: 13,
                center: myLatlng,
                mapTypeId: google.maps.MapTypeId.TERRAIN
            }
            map = new google.maps.Map(document.getElementById("map_canvas"), myOptions); 
```

# java - 如何从 Java 中的 Google 文档的特定集合中获取电子表格列表

> ID：11450564
> 
> 赞同：0
> 
> 时间：2012-07-12T11:10:54.517
> 
> 标签：java, google-api, google-sheets, google-spreadsheet-api

我想知道是否可以从 Java 中的 Google Docs 获取电子表格列表？

```
URL SPREADSHEET_FEED_URL = new URL("https://spreadsheets.google.com/feeds/spreadsheets/private/full");

SpreadsheetFeed feed = service.getFeed(SPREADSHEET_FEED_URL, SpreadsheetFeed.class);
List<SpreadsheetEntry> spreadsheetEntries = feed.getEntries(); 
```

上面的代码获取帐户上所有电子表格的列表，但我需要来自特定位置的文件（在 Google 文档中创建的集合）

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:52:32.533

对的，这是可能的。为此需要使用[Google Documents List API](https://developers.google.com/google-apps/documents-list/)。我通过以下东实现了类似的任务

1.  从根目录开始遍历文件夹；
2.  找到文件夹位置；
3.  检索文件夹的文件列表；
4.  找到所需的电子表格并从其 URL 中提取其密钥；
5.  使用[Google 电子表格 API](https://developers.google.com/google-apps/spreadsheets/)迭代所有电子表格，提取每个电子表格的 URL 密钥，并将提取的密钥与 p.4 中的密钥进行比较。如果键相等，则找到请求的电子表格。

可能它不是有效的方法，但它有效。[这](https://stackoverflow.com/questions/11243050/google-apps-application-apis-is-there-a-better-way-to-find-correspondance-betwe)是我提出的一个与此任务相关的问题。代码在 C# 中，但逻辑清晰。

# android - 使用 Vuforia SDK 在 Android 增强现实应用程序中绘制文本

> ID：11450565
> 
> 赞同：2
> 
> 时间：2012-07-12T11:11:02.500
> 
> 标签：android, augmented-reality

我正在尝试使用 Vuforia SDK 让我的 Android AR 应用程序正常工作。

我想做的是在屏幕上绘制一些文本，而不是通常的 3D 模型。

但我无法从示例应用程序中找到应用程序实际加载此类模型的位置，以及如何更改它。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:21:34.383

在 Imagetargets vuforia 示例的 ImageTarget.cpp 中的 renderframe 中，您可以注释所有 gl 渲染代码以防止任何模型渲染，然后您可以在 gl 表面或简单的 textview 上绘制文本。我没有尝试过文本，但这可以通过我说的来完成.

# python - 如何将字典列表转换为 Python 中的列表字典？

> ID：11450575
> 
> 赞同：12
> 
> 时间：2012-07-12T11:11:26.003
> 
> 标签：python, dictionary

这可能是 Python 中的一个经典问题，但我还没有找到答案。

我有一个字典列表，这些字典有相似的键。它看起来像这样：

```
 [{0: myech.MatchingResponse at 0x10d6f7fd0, 
   3: myech.MatchingResponse at 0x10d9886d0,
   6: myech.MatchingResponse at 0x10d6f7d90,
   9: myech.MatchingResponse at 0x10d988ad0},
  {0: myech.MatchingResponse at 0x10d6f7b10,
   3: myech.MatchingResponse at 0x10d6f7f90>}] 
```

我想获得一个以 [0,3,6,9] 作为键的新字典，并将“myech.MatchingResponse”列表作为值。

当然我可以使用一个简单的循环来做到这一点，但我想知道是否有更有效的解决方案。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-12T11:17:39.097

```
import collections

result = collections.defaultdict(list)

for d in dictionaries:
    for k, v in d.items():
        result[k].append(v) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T11:20:58.570

假设您的列表被分配给一个名为 mylist 的变量。

```
mydic = {}
for dic in mylist:
    for key, value in dic.items():
        if key in mydic:
            mydic[key].append(value)
        else:
            mydic[key] = [value] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T11:51:36.577

也可以通过 dict 理解来做到这一点......可能是一行，但为了清楚起见，我将其保留为两行。:)

```
from itertools import chain

all_keys = set(chain(*[x.keys() for x in dd]))
print {k : [d[k] for d in dd if k in d] for k in all_keys} 
```

结果是：

```
{0: ['a', 'x'], 9: ['d'], 3: ['b', 'y'], 6: ['c']} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-04T07:08:50.177

如果您有一个字典列表，每个字典都有相同的键，则可以将它们转换为列表字典，如下例所示（有些人认为这比其他一些答案更 Pythonic）。

```
d = []
d.append({'a':1,'b':2})
d.append({'a':4,'b':3}) 
print(d)                                                               
[{'a': 1, 'b': 2}, {'a': 4, 'b': 3}]

newdict = {}
for k,v in d[0].items():
    newdict[k] = [x[k] for x in d]

print(newdict)
{'a': [1, 4], 'b': [2, 3]} 
```

# c# - TaskFactory 错过正在运行的任务

> ID：11450576
> 
> 赞同：0
> 
> 时间：2012-07-12T11:11:33.687
> 
> 标签：c#, .net, taskfactory

如果已经有太多任务排队，TaskFactory 是否有可能长时间不运行任务？如果是这样，有一种方法可以配置 taskfactory 以便它能够更快地运行更多任务。

此外，在同一进程中同时使用 TaskFactory 和 Threadpool.QueueUserWorkItem 会有任何问题吗？我们有一些仍然使用 Threadpool 类的旧库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:21:52.673

阿尔文。当您将要运行的任务排队时，它们将被安排使用 ThreadPool 中的线程运行。运行多少任务，以及它们运行的​​速度将取决于可用线程的数量以及特定任务执行所需的时间。如果有很多队列任务，线程池能够根据需要启动新线程，但这在很大程度上取决于可用资源和 cpu。可以将线程池​​配置为设置默认线程数，但在大多数情况下不建议这样做。

将 Tasks 和 Thrapool.QueueUserWorkItem 一起使用应该不会有任何问题，因为默认的 Task 调度程序使用相同的线程池。所有这一切都会发生，您将有更多排队的任务等待同一个线程池处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:25:08.830

使用TPL，你的任务会自动进入线程池；线程池在其中密切关注它将同时运行的正在运行的线程数。过多的活动线程会降低性能并增加操作系统的管理负担。一旦达到线程数量的预定义限制，它们就会被排队。一些背景...

线程池从池中的一个线程开始，池管理器“注入”新线程以应对额外的异步工作负载，达到某个限制最大值。在一段时间的不活动之后，如果池管理器“认为”这样做会带来更好的吞吐量，它可能会“退休”线程。在您上面的情况下，池管理器正在限制并发线程的数量。

您可以通过调用设置池将创建的线程数上限`Thread.Pool.SetMaxThread;`，默认值为：

```
1023 in Framework 4.0 in a 32-bit environment.
32768 in Framework 4.0 in a 64-bit environment.
250 per core in Framework 3.5.
25 per core in Framework 2.0. 
```

[*这些数字可能因硬件和操作系统而异*]。

这些庞大数量的原因（至少在 .NET 4.0 的情况下）是为了确保即使在某些线程被阻塞（运行一些紧张的工作等）时也能取得进展

您可以通过 设置下限`ThreadPool.SetMinThreads`。这个限制器的作用比最大限制器的作用更微妙：这指示池管理器不要延迟线程的创建，直到达到这个数量的下限 - 当有阻塞的线程时设置这个数量将提高你的并发性。

如果您使用的是早于 Framework 4.0 的版本，则不能使用 TPL。您可以使用 4.0 并调用`QueueUserWorkItem`- 这（乍一看）不会给您带来任何问题。

我希望这有帮助。

# android - 在android中使用ON/OFF开关时发生错误

> ID：11450588
> 
> 赞同：2
> 
> 时间：2012-07-12T11:12:38.753
> 
> 标签：android, android-layout, switch-statement

[我想要在我的应用程序中提到](http://developer.android.com/design/building-blocks/switches.html)的开/关开关。但是我的布局在设计开关时出现错误，如下所示 `<Switch android:textOn="ON" android:textOff="OFF" android:layout_width="wrap_content" android:layout_height="wrap_content"/>`

我得到的错误是

```
`ENTRY com.android.ide.eclipse.adt 4 0 2012-07-12 16:33:07.619
!MESSAGE main.xml: Failed to find style 'switchStyle' in current theme

!ENTRY com.android.ide.eclipse.adt 4 0 2012-07-12 16:33:07.620
!MESSAGE main.xml: Failed to find style 'switchStyle' in current theme

!ENTRY com.android.ide.eclipse.adt 4 0 2012-07-12 16:33:07.620
!MESSAGE main.xml: Failed to find style 'switchStyle' in current theme

!ENTRY com.android.ide.eclipse.adt 4 0 2012-07-12 16:33:07.621

!MESSAGE main.xml: Failed to find style 'switchStyle' in current theme

!ENTRY com.android.ide.eclipse.adt 4 0 2012-07-12 16:33:07.622

!MESSAGE main.xml: Failed to find style 'switchStyle' in current theme

!ENTRY com.android.ide.eclipse.adt 4 0 2012-07-12 16:33:07.622

!MESSAGE main.xml: Failed to find style 'switchStyle' in current theme

!ENTRY com.android.ide.eclipse.adt 2 0 2012-07-12 16:33:07.637

!MESSAGE main.xml: You must supply a layout_width attribute.

!ENTRY com.android.ide.eclipse.adt 2 0 2012-07-12 16:33:07.638

!MESSAGE main.xml: You must supply a layout_height attribute. 
```

我的 xml 文件。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

<Switch
    android:textOn="ON"
    android:textOff="OFF"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T11:29:06.533

在 api 级别 14 中添加了开关小部件。确保在 AndroidManifest.xml 中设置 android:minSdkVersion="14"

# asp.net-mvc-3 - MVC3 JQuery-Ajax 搜索

> ID：11450589
> 
> 赞同：0
> 
> 时间：2012-07-12T11:12:38.777
> 
> 标签：asp.net-mvc-3, jquery

我正在尝试调整以下代码

```
$(“#artistSearch”).submit(function (event) {  
    event.preventDefault();  
    var form = $(this);  
    $.ajax({
        url: form.attr(“action”),
        data: form.serialize(),
        beforeSend: function () {
        $(“#ajax-loader”).show();
    },
    complete: function () {
        $(“#ajax-loader”).hide();
    },
    error: searchFailed,
    success: function (data) {
        $(“#artistTemplate”).tmpl(data).appendTo(“#artist-list”);
    }
}); 
```

从[Professional ASP.NET MVC 3](http://www.wrox.com/WileyCDA/WroxTitle/Professional-ASP-NET-MVC-3.productCd-1118076583.html)开始，允许在同一个表单中搜索和返回数据，最终得到以下结果：

在单独的脚本文件上

```
$(function () {

    $("#btnSearch").click(function (event) {
     event.preventDefault();
    var idno = $("#txtIdNo").value;

     $.ajax({
         url: "/Owner/Search",
         type: "POST",
         data: idno,
         datatype: "json",
         beforeSend: function () {
             $("#FullName").html("");
             $("#OwnerId").html("");
             $("#notFound").html("");
             $("#ajax-loader").show();
         },
         complete: function () {
             $("#ajax-loader").hide();
         },
         error: function () {
             $("#notFound").html("Sorry, no data returned."); ;
         },
         success: function (data) {
             $("#OwnerId").html(data.OwnerId);
             $("#FullName").html(data.FullName);
         }
     });
 });

}); 
```

在控制器上

```
 [HttpPost]
    public JsonResult SearchById(string idNo)
    {
        var owner = _ownerService.FindBy(x => x.IdNo == idNo);
        return  Json(owner);
    } 
```

在视图上

```
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        <div>
            <p>
               Id No:
               <input type="text" name="txtIdNo"  />
               <input type="button" value="Search" name="btnSearch" />
               <label id="notFound"></label>
            </p> 
        @Html.Hidden("OwnerId")
       .
       .
       .

       <p>
          <input type="submit" value="Create" />
       </p>
    </fieldset>
} 
```

我在视图中使用的原因是避免在同一个表单中使用两个提交按钮，因为我意识到在单击搜索按钮后表单正在验证。

在无济于事之前，我还查看了建议的类似问题。

我无法完成上述工作，希望能提供任何帮助。

我是 MVC3 和 JQuery 的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:18:04.990

您使用表单的方式（获取您正在搜索的字段值并将其发送到控制器操作）您可以通过制作按钮来避免提交；

```
<button type="button">Create</button> 
```

或者

```
<input type="button" value="Create" /> 
```

这将是避免回发的最快方法。

您还可以查看 ajaxSubmit (jQuery 插件) 或者您可以使用 Ajax.BeginForm 而不是 Html.BeginForm (但这两者都需要更多时间)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:35:47.927

**jquery ID 选择器（“#id”） - 选择具有给定 id 属性的单个元素。**

您正在使用 jquery ID 选择器，但在 from 元素上没有 id 属性。

将 id 属性添加到表单元素。

```
<input type="text" name="txtIdNo"  />
<input type="button" value="Search" name="btnSearch" />

to 

<input type="text" id="txtIdNo" name="txtIdNo"  />
<input type="button" id="btnSearch" value="Search" name="btnSearch" /> 
```

编辑 jQuery ajax 函数：**data: {idNo:idno}**

```
$.ajax({
         url: "/Owner/Search",
         type: "POST",
         data: {idNo:idno},
         datatype: "json",
         .........
     });
 }); 
```

# c# - 使用泛型访问基本抽象类方法中的子类对象

> ID：11450590
> 
> 赞同：2
> 
> 时间：2012-07-12T11:12:39.123
> 
> 标签：c#, .net, wpf

我现有的班级结构。

AbstractTradeBaseClass -> AbstractTradeClass -> ConcreteTradeClass。

我正在使用 DataAnnotations 和 IDataErrorInfo 在我的 WPF 应用程序中验证我的模型。我已将 IDataErrorInfo 方法移至 AbstractTradeBaseClass，以便所有从基类继承的类都可以使用我。

这是通过使用 Linq 动态读取属性来完成的。

**AbstractTradeBaseClass.cs**

```
 public abstract class TradeBaseModel<T> : INotifyPropertyChanged, IDataErrorInfo
{
    #region INotifyPropertyChanged Members

    public event PropertyChangedEventHandler PropertyChanged;

    public void OnPropertyChanged( string propertyName )
    {
        if ( PropertyChanged != null )
        {
            PropertyChanged( this, new PropertyChangedEventArgs( propertyName ) );
        }
    }

    #endregion

    # region Getter/Validator members for Annotations
    private static readonly Dictionary<string, Func<T, object>>
        propertyGetters = typeof( T ).GetProperties()
                          .Where( p => GetValidations( p ).Length != 0 )
                          .ToDictionary( p => p.Name, p => GetValueGetter( p ) );

    private static readonly Dictionary<string, ValidationAttribute[]> validators =
        typeof( T ).GetProperties()
        .Where( p => GetValidations( p ).Length != 0 )
        .ToDictionary( p => p.Name, p => GetValidations( p ) );

    private static ValidationAttribute[] GetValidations( PropertyInfo property )
    {
        return ( ValidationAttribute[] )property.GetCustomAttributes( typeof( ValidationAttribute ), true );
    }

    private static Func<T, object> GetValueGetter( PropertyInfo property )
    {
        var instance = Expression.Parameter( typeof( T ), "i" );
        var cast = Expression.TypeAs( Expression.Property( instance, property ), typeof( object ) );
        return ( Func<T, object> )Expression.Lambda( cast, instance ).Compile();
    }
    # endregion

    #region IDataErrorInfo Members

    public string Error
    {
        get
        {
            var errors = from i in validators
                         from v in i.Value
                         where !v.IsValid( propertyGetters[i.Key]( **( T )ModelToValidate()** ) )
                         select v.ErrorMessage;
            return string.Join( Environment.NewLine, errors.ToArray() );
        }
    }

    protected Dictionary<string, string> _errors = new Dictionary<string, string>();
    public IDictionary<string, string> Errors
    {
        get { return _errors; }
    }

    public string this[string columnName]
    {
        get
        {
            string errorMessage = string.Empty;
            this.Errors.Remove( columnName );

            //string errorMessage = string.Empty;
            //switch(columnName)
            //{
            //    case "Range":
            //        if ( Range > 15 )
            //        {
            //            errorMessage = "Out of Range, should be less than 15";
            //        }
            //        break;
            //}

            //return errorMessage;

            if ( propertyGetters.ContainsKey( columnName ) )
            {
                var value = propertyGetters[columnName]( **( T )ModelToValidate()** );
                var errors = validators[columnName].Where( v => !v.IsValid( value ) )
                    .Select( v => v.ErrorMessage ).ToArray();

                string error = string.Join( Environment.NewLine, errors );
                this.OnPropertyChanged( "Error" );

                if ( !string.IsNullOrEmpty( error ) )
                {
                    this.Errors.Add( columnName, error );
                }

                return error;
            }

            return string.Empty;

        }
    }

    public abstract object ModelToValidate(); -- ***Gets the child object here, overridden in the child class to return the child object, -- is there a better way to do this using Generics ??***

    #endregion
} 
```

**抽象贸易类**

```
 public abstract class TradeClassBase<T> : TradeBaseModel<T>
{
    public string EmptyString
    {
        get { return string.Empty; }
    }
} 
```

**具体贸易类**

```
public class CashFlowTrade : TradeClassBase<CashFlowTrade>
{
    private int range;
    [RangeAttribute(0,10, ErrorMessage="Out of Range, Range should be less than 15")]
    public int Range
    {
        get
        {
            return this.range;
        }
        set
        {
            if ( this.range != value )
            {
                this.range = value;
                this.OnPropertyChanged( "Range" );
            }
        }
    }

    public override object ModelToValidate()
    {
        return this;
    }

} 
```

是否有更好的方法来执行此操作，而不是使用抽象方法并在子类中覆盖它以传递实际的子类对象并将其强制转换为 T 类型。上面代码中以粗体表示的用法。

如果有一种方法可以将子类对象传递给基类，那么我可以使用实际的子类对象本身来执行验证操作。

* * *

**使用类更新了工作代码** 约束 T，并使用如下的类型转换运算符。

```
 public abstract class TradeBaseModel<T> : INotifyPropertyChanged, IDataErrorInfo
    where T : class 
```

用类型转换替换对抽象方法的调用。

```
 if ( propertyGetters.ContainsKey( columnName ) )
            {
                var value = propertyGetters[columnName]( this as T ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:18:14.707

是的...直接使用这个。即使在抽象类中，您也可以访问此引用。唯一不能使用它的地方是静态方法。

***编辑：***

要强制执行类型检查，您可以在 T 上添加一个约束：

```
public abstract class TradeBaseModel<T> : INotifyPropertyChanged, IDataErrorInfo where T: TradeBaseModel<T> 
```

***编辑2：***

总结 Kans 在下面的评论，这还不够：这种转换支持从 T 到基本类型的隐式类型转换，而从基本类型到 T 的转换是必需的。唯一的解决方案似乎是在上面的代码中使用 T as 运算符，为此， T 必须是一个类（如果添加了上面的约束就可以了）。

# c# - ASP.NET图表控件问题，背景不透明

> ID：11450593
> 
> 赞同：0
> 
> 时间：2012-07-12T11:12:51.423
> 
> 标签：c#, asp.net, charts, web

如何使此图表的白色部分透明， ![在此处输入图像描述](../Images/33f1472461c1a1b432c546c595ae24a3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:15:26.830

这就是我得到的；

```
<asp:Chart>
   <BorderSkin BackColor="Transparent" PageColor="Transparent" />
</asp:Chart> 
```

在你的情况下，这将是

```
<asp:Chart ID="Chart1" runat="server" style="z-index: 1; left: 100px; top: 50px; position: absolute; background-color: transparent " BackColor="Transparent" PageColor="Transparent" DataSourceID="SqlDataSource1" BackImageTransparentColor="Silver" BorderlineColor="Transparent" Width="410px">
   <BorderSkin BackColor="Transparent" PageColor="Transparent" />
</asp:Chart> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T13:56:15.497

试试这个我希望它的工作：

```
 <asp:Chart ID="Chart1" runat="server">

        <Series>
            <asp:Series Name="Series1" ChartType="Pie" XValueMember="relatedcity" 
                YValueMembers="state_id">
            </asp:Series>
        </Series>
        <ChartAreas>
            <asp:ChartArea Name="ChartArea1" BackColor="Transparent">
            </asp:ChartArea>
        </ChartAreas>
    </asp:Chart> 
```

使用图表区域使其成为透明背景。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-27T11:03:29.450

设置图表和图表区域 BackColor = "透明"

```
<asp:Chart ID="Chart1" runat="server" BackColor="Transparent" >
    <Titles>
        <asp:Title Text="Bubble Chart"></asp:Title>
    </Titles>
    <ChartAreas>
        <asp:ChartArea Name="ChartArea1" BackColor="Transparent"></asp:ChartArea>
    </ChartAreas>
    <Legends>
        <asp:Legend LegendStyle="Table" Docking="Bottom" IsDockedInsideChartArea="false" Name="Legend1"></asp:Legend>
    </Legends>
</asp:Chart> 
```

# php - 成员仅对区域进行排名

> ID：11450594
> 
> 赞同：1
> 
> 时间：2012-07-12T11:12:52.680
> 
> 标签：php, mysql, membership

在我的站点中，我有一个员工休息室，但似乎每个人都可以看到它，无论您是会员还是现在。

页眉.inc.php：

```
$userinfo = mysql_fetch_array(mysql_query("SELECT * FROM members WHERE username='$username'"));
$rank = $userinfo[rank];
$rank1 = $userinfo[rank1];
$rank2 = $userinfo[rank2];
$rank3 = $userinfo[rank3];
$rank4 = $userinfo[rank4];

if (!$checkrank) { $checkrank = 0; }
if (!$rank) { $rank = 0; }
if (!$rank == ' ') { $rank = 0; }
if ($rank < $checkrank)
{

     header("Location: $baseurl/index.php?error=You+can+not+view+this+page.");
}

if ($rank >= 30)
{

    $admin = "<a href=\"$baseurl/staff/admin.php\">Admin</a>";
} 
```

等级是5-30 等级越高的员工休息室成员可以看到的越多，但是无论什么人的等级都是每个人都可以看到页面（但是管理区域，这是除了RANK 30人之外唯一没有人可以看到的东西)

在我拥有的每个页面的顶部（banners.php）：

```
 $checkrank = 5;

    if ($rank <= 0)
    {
                header("Location: $baseurl/index.php?article=$article&error=Only+SketchedNeo+staff+can+see+this.");

    }

include ($_SERVER['DOCUMENT_ROOT'].'/staff/header.inc.php'); 
```

昨晚我和一个朋友在这里坐了几个小时，将 $checkrank 更改为 20，将 if $rank 更改为 18，然后将她在数据库中的排名设置为 15，但她仍然会看到所有页面。

我的数据库结构是：

```
id int(11) 
username varchar(200) latin1_swedish_ci 
password varchar(216) latin1_swedish_ci 
security varchar(200) latin1_swedish_ci 
email varchar(216) latin1_swedish_ci 
ip varchar(200) latin1_swedish_ci 
rank varchar(216) latin1_swedish_ci 
name varchar(30) latin1_swedish_ci 
age varchar(40) latin1_swedish_ci 
gender varchar(40) latin1_swedish_ci 
location varchar(40) latin1_swedish_ci 
helpfaerie int(11) 
profile text latin1_swedish_ci 
about text latin1_swedish_ci 
tasks text latin1_swedish_ci 
joined varchar(216) latin1_swedish_ci 
laston int(200) 
icedmutereason text latin1_swedish_ci 
icedmutedetails text latin1_swedish_ci 
icedmuteby varchar(200) latin1_swedish_ci 
icedmutedate int(200) 
posts int(11) 
signature varchar(216) latin1_swedish_ci 
avatar varchar(216) latin1_swedish_ci 
neohtml text latin1_swedish_ci 
siggy text latin1_swedish_ci 
verify int(11) 
changedpass int(1) 
```

我怎样才能使它只有具有最低等级的成员才能看到页面？我需要它是例如等级 17+ 的成员可以看到这个页面，因此等级 16 和更低的成员被重定向回主页。

* * *

我找到了 ACL（访问控制列表）的教程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:19:06.597

您需要在发送重定向标头后阻止任何页面输出。

```
header("Location: $baseurl/index.php");
die(); 
```

如果您不停止执行脚本，那么重定向将永远不会发生。

# java - Eclipse Juno 4.2 的 Swing 插件？

> ID：11450601
> 
> 赞同：4
> 
> 时间：2012-07-12T11:13:20.617
> 
> 标签：java, swing

我应该安装什么开源 eclipse 插件来使用/在 Java Swing 中编程？

我安装了 Eclipse Juno（4.2？），到目前为止一切都运行良好。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T11:24:25.300

Swing 不需要任何插件即可运行，Swing 库是 Sun Microsystems 发布的官方 Java GUI 工具包。它用于使用 Java 创建图形用户界面。

您可以按照此**[链接](http://docs.oracle.com/javase/tutorial/uiswing/start/compile.html)**设置和运行您的第一个程序，基于 Swing..

更多细节，谷歌一下！它将为您提供所需的足够多的信息。

希望这会有所帮助。干杯! :)

# ember.js - 显示包含 html 标签的属性

> ID：11450602
> 
> 赞同：41
> 
> 时间：2012-07-12T11:13:21.273
> 
> 标签：ember.js, handlebars.js

我有一个 ember 属性，其中包含 html 标签（`<br />`、`<strong>`、`<p>`、`<span>`和类似的东西）。

我如何告诉 ember 不要转义此文本？是否有任何来自 ember 的默认 Handlebars 助手，还是需要我自己编写？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-07-12T11:39:52.387

来自[http://handlebarsjs.com/](http://handlebarsjs.com/)

> Handlebars HTML 转义 a 返回的值`{{expression}}`。
> 如果您不希望 Handlebars 转义值，请使用“triple-stash”。
> 
> `{{{expression}}}`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-12T11:44:21.950

您`Ember.js`可以通过`htmlSafe`添加到`String`原型中的方法执行此操作，请参阅[http://jsfiddle.net/pangratz666/jNAQ6/](http://jsfiddle.net/pangratz666/jNAQ6/)：

**车把**：

```
<script type="text/x-handlebars" >
    {{App.html}} - {{App.unescaped}}
</script>​ 
```

**JavaScript**：

```
App = Ember.Application.create({
    html: '<b>bold text</b>',
    unescaped: function(){
        return this.get('html').htmlSafe();
    }.property('html')
});​ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-20T07:15:22.167

**Ember 2.x，使用 JavaScript**

要使用 Ember 模板使字符串不转义并输出，您可以使用`htmlSafe`helper。

```
Ember.String.htmlSafe('<div>someString</div>') 
```

返回的字符串不会被 Handlebars 模板引擎转义为 HTML。

[http://emberjs.com/api/classes/Ember.String.html#method_htmlSafe](http://emberjs.com/api/classes/Ember.String.html#method_htmlSafe)

**仅使用车把**

或者，您可以将原始 HTML 传递给 Handlebars 模板并使用三方括号获取原始 HTML 输出

*内部车把模板*

```
<div>{{{raw_html_content}}}</div> 
```

# java - 将 Eclipse 连接到 mysql mac os x jdbc 驱动程序

> ID：11450611
> 
> 赞同：0
> 
> 时间：2012-07-12T11:13:40.147
> 
> 标签：java, mysql, macos, odbc

我正在尝试在学习 java sql 内容的同时运行下面的代码，但是，我已经创建了数据库并从终端尝试它很好。

1-我收到此错误

```
 java.sql.SQLException: No suitable driver found for jdbc:sql://localhost/books
at java.sql.DriverManager.getConnection(DriverManager.java:602)
at java.sql.DriverManager.getConnection(DriverManager.java:185)
at Displayauthors.main(Displayauthors.java:20) 
```

2-我下载了“odbc manager”，但我不知道为什么以及如何处理它，或者它是否与我在这里做的事情有任何关系？

3-我已经下载了Connector/ODBC 和Connector/J。我去了JRE参考库并添加了“mysql-connector-java-5.1.21-bin.jar”并尝试了.tar.gz的多平台版本。我不确切知道我一直在尝试任何事情并且没有工作。

4-我试图从 Eclipse 进入数据库并添加新的连接 MYSQL 并包含 .jar 和东西，但仍然没有任何改变。

5-试图包含 class.forName ..... 也没有。

请您帮我理解这个过程或指导我设置一个明确的例子，我理解代码但是设置的环境让我很难。

```
import java.sql.*;

public class Displayauthors {

static final String DATABASE_URL = "jdbc:sql://localhost/books";

public static void main(String args[]){

    Connection connection = null;
    Statement statement = null;
    ResultSet resultset = null;

    try{
        connection = DriverManager.getConnection(DATABASE_URL, "deitel", "deitel");
        statement = connection.createStatement();

        resultset=statement.executeQuery("SELECT AuthorID,FirstName,LastName FROM Authors");

        ResultSetMetaData metadata = resultset.getMetaData();

        int numberofcolumns = metadata.getColumnCount();
        System.out.println("Authors table");

        for(int i=1;i<=numberofcolumns;i++){
            System.out.printf("%-8s\t", metadata.getColumnName(i));
            System.out.println();

        }
    }
    catch(SQLException sqlexception){
        sqlexception.printStackTrace();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:32:29.133

您应该为 mysql 数据库使用正确的 uri

```
jdbc:mysql://localhost/dbname 
```

# c# - asp.net 中的响应对象

> ID：11450615
> 
> 赞同：0
> 
> 时间：2012-07-12T11:13:53.937
> 
> 标签：c#, httpwebresponse

我确定我遗漏了一些东西，但无论如何这是我遇到的问题，

我有一个网格，它显示表中未标记为导出的记录....

我有一个按钮，单击哪个文件是用这些未导出的记录创建的。

该文件是在服务器上创建的，其想法是让用户在另存为对话框中下载文件，并且网格应该重新绑定并且不显示任何记录，因为这些记录在单击上述按钮后被标记为已导出。

所有这些都会发生，但在文件下载代码出现时刷新页面之前，网格不会重新绑定。

这是我的代码

```
protected void btnCreateTxtFile_Click(object sender, EventArgs e)
    {

        VoucherData voucher = new VoucherData();

        string filename = voucher.CreateVoucherFile(Convert.ToInt16(cboSociety.SelectedValue),    settings.DCOM02Export.ToString(), User.Identity.Name);

        BindGrid();

        Response.AddHeader("Content-disposition", @"attachment; filename=" + filename);
        Response.ContentType = "application/octet-stream";

        Response.WriteFile(settings.DCOM02Export.ToString() + @"\" + filename);
        Response.End();

    } 
```

所以当我注释掉这个问题时

```
 Response.AddHeader("Content-disposition", @"attachment; filename=" + filename);
        Response.ContentType = "application/octet-stream";

        Response.WriteFile(settings.DCOM02Export.ToString() + @"\" + filename);
        Response.End(); 
```

一切正常。但如果我不这样做，那么网格不会重新绑定，直到页面刷新并且调用 BindGrid() 方法没有任何区别。

有人可以指出我哪里出错了吗？

问候，

萨布

# iphone - 我如何在 iPhone 中使用 xmppstream 对象验证 Facebook 访问令牌

> ID：11450616
> 
> 赞同：7
> 
> 时间：2012-07-12T11:13:55.580
> 
> 标签：iphone, xmpp

我正在使用 xmppframework 开发 Facebook 聊天应用程序。我获得了 Facebook 访问令牌，但
此访问权限未通过 xmppstream 对象进行身份验证：

这是我的`setupStream`方法

```
- (void)setupStream
{
   XMPPStream *xmppStream=[[XMPPStream alloc] initWithFacebookAppId:@"443170809037796"];
} 
```

这是我的连接方法

```
-(BOOL)connect1
{
    NSLog(@"connect1");
    NSError *error = nil;
    if(![xmppStream isDisconnected]) 
    {
        NSLog(@"isDisconnected");
        return YES;
    } 
    if (![xmppStream connect:&error])
    {
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Error connecting fb" 
                                                            message:@"See console for error details."
                                                           delegate:nil
                                                  cancelButtonTitle:@"Ok" 
                                                  otherButtonTitles:nil];
        [alertView show];   
        return NO;
    }
    return YES;
} 
```

这是我`xmppStreamDidconnect`的身份验证委托方法

```
- (void)xmppStreamDidConnect:(XMPPStream *)sender
{
    isXmppConnected = YES;
    NSError *error = nil;
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [xmppStream authenticateWithFacebookAccessToken:[defaults             objectForKey:@"FBAccessTokenKey"] error:&error];        
} 
```

当我运行这个应用程序时，我得到了休闲错误

**没有验证**

任何人都可以解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T18:54:06.937

facebook 聊天使用安全连接，因此连接方法应如下所示

```
- (void)xmppStreamDidConnect:(XMPPStream *)sender
{
    DDLogVerbose(@"%@: %@", THIS_FILE, THIS_METHOD);

    isXmppConnected = YES;

    NSError *error = nil;
    //facebook connection
    if (_streamType == AAConnectStreamTypeFacebook) {

        if (![xmppStream isSecure])
        {

            NSError *error = nil;
            BOOL result = [xmppStream secureConnection:&error];

            if (result == NO)
            {
                DDLogError(@"%@: Error in xmpp STARTTLS: %@", THIS_FILE, error);

            }
        }
        else
        {

            NSError *error = nil;
            BOOL result = [xmppStream authenticateWithFacebookAccessToken:FBSession.activeSession.accessTokenData.accessToken error:&error];

            if (result == NO)
            {
                DDLogError(@"%@: Error in xmpp auth: %@", THIS_FILE, error);

            }
        }
    }
    else if (![[self xmppStream] authenticateWithPassword:password error:&error])
    {

        DDLogError(@"Error authenticating: %@", error);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T11:40:29.097

```
http://benbiddington.wordpress.com/2010/04/23/facebook-graph-api-getting-access-tokens/

 http://www.raywenderlich.com/1488/how-to-use-facebooks-new-graph-api-from-your-iphone-app 
```

如何使用 Graph API 对用户进行身份验证

OAuth 身份验证如何工作 为了向 Facebook 验证用户身份，Graph API 使用新的 OAuth 2.0 协议。别担心——这个名字听起来很壮观，但它的工作方式实际上很简单。这个想法是您使用 Facebook 开发人员的门户制作一个应用程序，当您这样做时，您会为您的应用程序获得一个称为 API 密钥的唯一 ID。然后，当您想将用户登录到 Facebook 时，您可以在 Web 浏览器中访问以下 URL： [https://graph.facebook.com/oauth/authorize](https://graph.facebook.com/oauth/authorize)？client_id=[您的 API 密钥]& redirect_uri= [http://www.facebook.com/connect/login_success.html&](http://www.facebook.com/connect/login_success.html&) scope=[您想要的扩展权限]& type=user_agent& display=touch 用户将看到一个标准的 Facebook 登录页面，他们可以输入他们的用户名和密码，并提供所需的任何权限。您不需要自己实现 redirect_uri - 您可以使用 Facebook 的预设，如上所示。预设回调将返回给您一个访问令牌，这是您发出所有未来请求所需要的。当用户登录时，Facebook 会在 cookie 中存储一些有关登录的信息。所以下次尝试登录时，如果 cookie 没有过期，登录将自动完成，无需用户干预！

# ios - 停止设备进入睡眠模式一段时间

> ID：11450620
> 
> 赞同：3
> 
> 时间：2012-07-12T11:14:07.903
> 
> 标签：ios, ipad, uiapplicationdelegate

在我的应用程序中，我有一些内容要从服务器下载，当用户开始下载并且应用程序处于非活动状态时，应用程序将进入后台状态，下载停止并失败。为了避免这种情况，我尝试使用“ **beginBackgroundTaskWithExpirationHandler** ”在后台实现下载继续。这仅在一段时间内有效，如果设备处于后台状态/睡眠模式更长时间，下载将失败。

为了避免下载失败，我想避免设备在应用程序下载内容时进入睡眠模式并实现相同。

下载开始后，我已将 setIdleTimerDisabled 设置为 YES，并在下载完成或下载失败后将属性恢复为 NO。

```
[[UIApplication sharedApplication] setIdleTimerDisabled:Yes]; 
```

应用程序在下载开始后被限制进入睡眠模式，但在完成下载后，应用程序仍然没有进入睡眠模式。

启动下载后，应用程序将永远不会进入睡眠模式。

有人可以帮助我限制设备仅在下载期间进入睡眠状态。

TNQ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T12:34:24.000

我在重置屏幕亮度时遇到了类似的问题。根据我的研究，我发现在按下主页按钮后，操作系统会接管控制权，并且不允许您重置亮度、定时器等。

您可以通过另一种方式解决此问题。在下载完成时提供本地通知，并在 applicationWillEnterForeground 中编写代码以启用计时器

```
- (void)applicationWillEnterForeground:(UIApplication *)application {
     [[UIApplication sharedApplication] setIdleTimerDisabled:YES];
} 
```

我从 StackOverflow 得到这个，但我忘记了链接。对不起。

# url - 更改 grails 中的 g:link 行为

> ID：11450623
> 
> 赞同：2
> 
> 时间：2012-07-12T11:14:14.393
> 
> 标签：url, grails, taglib

我正在寻找一种方法来更改 Grails 的默认 g:link 行为，但我不知道我必须做什么，扩展一些类，配置一个 bean spring...
有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:07:59.613

如果您创建自己的 TagLib 并定义链接 clojure，它将覆盖默认的 grails 链接标记。

```
class MyTagLib {
  def link = { attrs, body ->
    out << 'changing the default grails link'
  }
} 
```

# events - 从值更改事件中获取旧的（以前的）值

> ID：11450626
> 
> 赞同：2
> 
> 时间：2012-07-12T11:14:25.143
> 
> 标签：events, gwt, gwt2

为什么没有可能从中获得旧值`ValueChangeEvent`？从值更改事件中期望同时提供旧值和新值。

是否有任何内置事件类型可以让我通知值更改并包含旧值和新值？有没有简单的方法来实现这样的自定义事件而无需太多努力？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:41:57.087

好的，我通过实现要在应用程序中使用的自定义类型来解决它：

```
public class ValueChange<T> {

  private final T oldValue;
  private final T newValue;

  public ValueChange(T oldValue, T newValue) {
    this.oldValue = oldValue;
    this.newValue = newValue;
  }

  public T getOldValue() {
    return oldValue;
  }

  public T getNewValue() {
    return newValue;
  }

} 
```

现在在我们的事件源（例如自定义控件）中，我们可以这样实现接口：

```
implements HasValueChangeHandlers<ValueChange<ValueType>> 
```

并且可以通过这种方式从我们的源中触发事件：

```
private void fireValueChangeEvent(ValueType oldValue, ValueType newValue) {
    ValueChangeEvent.fire(this, new ValueChange<ValueType>(oldValue, newValue));
} 
```

所以我们可以在处理程序端访问旧值和新值。无需实现新的事件类型、处理程序类型等。我们可以继续使用`ValueChangeEvent`语义上对我们的用例正确的 s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T10:40:18.213

另一种解决方案：

```
int oldValue;

@UiHandler("fooListBox")
void onFooListBoxMouseDownEvent(MouseDownEvent event){
    oldValue = bisListBox.getSelectedIndex();
}

@UiHandler("fooListBox")
void onFooListBoxChangeEvent(ChangeEvent event){
    int newValue = bisListBox.getSelectedIndex();

} 
```

# php - 如何使用 php 获取网站的 css

> ID：11450627
> 
> 赞同：0
> 
> 时间：2012-07-12T11:14:26.177
> 
> 标签：php, html, css, colors

我想使用 php 从网站上查找颜色，

我可以获取网站的源代码，但无法获取网站的 css 文件，

是否可以获取网站的外部 css，

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:23:28.987

使用 HTTrack Website Copier，它会下载网站的所有文件，包括 css 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:17:56.277

如果您的目标是从网站上找到颜色，请使用 FireFox 中提供的名为“ **colourzilla** ”的插件。它会非常方便，我也不认为可以获取网站的 css 文件。ps：虽然不确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T11:22:01.527

获取网站，使用正则表达式搜索 CSS，获取 CSS，使用正则表达式搜索 CSS 中的颜色代码。您必须从 HTML 页面获取 CSS 的文件名才能获取它。除了手动搜索之外，没有办法自动执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T11:41:14.943

您可以下载用于 firefox 的 Firebug Web 开发者插件。使用它，您可以搜索 HTML、CSS 和 JS 代码。对于颜色选择，您可以使用 Colorzilla Add-on。

这是萤火虫的链接：

[https://addons.mozilla.org/en-US/firefox/addon/firebug/](https://addons.mozilla.org/en-US/firefox/addon/firebug/)

# javascript - 使用 jQuery 删除类

> ID：11450632
> 
> 赞同：11
> 
> 时间：2012-07-12T11:14:50.520
> 
> 标签：javascript, jquery, css

早晨，

我可以在 jQuery 中使用一个通配符来从元素中删除一个类吗？

我正在将新类应用到我的信息消息框，如果用户单击它一次，然后再次单击它，它正在添加新类，但保留现有类。

我需要删除以前的类，然后添加新的样式类。有任何想法吗？

```
 <div id="infoMsg" style="display: block; " class="er-green er-red">All submitted feeds are complete.</div> 
```

如您所见，原来的类是 er-green，然后添加了 er-red。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-12T11:16:58.693

叶：

```
$(this).removeClass('er-green');
$(this).addClass('er-red'); 
```

或者先将它们全部删除：

> 如果包含类名作为参数，则只有该类将从匹配元素集中删除。如果参数中没有指定类名，则将删除所有类。

```
$(this).removeClass();
$(this).addClass('er-red'); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-12T11:16:47.960

[removeClass()](http://api.jquery.com/removeClass/)方法

```
$('#infoMsg').removeClass('er-green');//just removes class

$('div').click(function(){
   $(this).removeClass('er-green');//removes class clicked element
   $(this).addClass('er-red');//adds class clicked element
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-12T11:19:04.020

```
$("#infoMsg").removeClass('er-green').addClass('newclass') 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-12T11:17:54.510

你可以使用jquery`removeclass`

```
$('#infoMsg').removeClass('er-green'); 
```

同样，您也可以在 html 中添加一个 css 类

```
$('#infoMsg').addClass('er-red'); 
```

# oracle - 如何查看分配给 Oracle JVM 的内存

> ID：11450635
> 
> 赞同：2
> 
> 时间：2012-07-12T11:15:07.000
> 
> 标签：oracle

我试图在 Oracle JVM 中执行一些 java 代码，但得到 java.lang.OutOfMemoryError。

所以我想为 Oracle JVM 分配更多内存。我们应该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T12:54:23.567

似乎您超出了 OJVM 的堆大小。

首先，您需要了解您现在总共有多少可用的堆大小：看看您的初始化参数`JAVA_POOL_SIZE`。如果为 0，那么您正在使用自动内存管理（10g 或 11g）并且堆大小由 Oracle 服务器“自动”确定。然后可以以`sga_target`（10g）或`memory_target`（11g）为上限。

每个会话的最大堆大小受参数限制`java_max_sessionspace_size`（值 0 表示默认为 4GB）。

有了这两个值，取较小的一个并检查由代码引起的内存需求/堆大小*是否应该*适合这个内存量。

*   如果是：您的 java 代码中有内存泄漏。
*   如果不是：增加`java_pool_size`, `sga_target`/`memory_target`或 `java_max_sessionspace_size`.

请参阅[http://docs.oracle.com/cd/B28359_01/java.111/b31225/chnine.htm#BABGFDAE（Java](http://docs.oracle.com/cd/B28359_01/java.111/b31225/chnine.htm#BABGFDAE)内存使用）和[http://docs.oracle.com/cd/B28359_01/server.111/ b28320/initparams099.htm#REFRN10074](http://docs.oracle.com/cd/B28359_01/server.111/b28320/initparams099.htm#REFRN10074) + [http://docs.oracle.com/cd/B28359_01/server.111/b28320/initparams100.htm#REFRN10075](http://docs.oracle.com/cd/B28359_01/server.111/b28320/initparams100.htm#REFRN10075)（参数）获取详细文档。

关于您在主题中的问题“如何查看分配给 Oracle JVM 的内存”：

```
select * from v$sgastat where pool = 'java pool'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:23:19.203

您可以使用[http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)，特别是 -XX:MaxHeapFreeRatio 和 -XX:MinHeapFreeRatio

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-05T15:11:46.370

上述建议对我不起作用。您可以使用

```
select getMaxMemorySize() from dual 
```

显示这一点。然后，您可以使用以下方法进行设置：

```
create or replace function setMaxMemorySize(num number) return number
is language java name
'oracle.aurora.vm.OracleRuntime.setMaxMemorySize(long) returns long'; 
```

然后调用这个函数：

```
select setMaxMemorySize(1024*1024*1024) from dual; 
```

注意：这仅设置会话的最大内存。您需要为每个新会话调用它。

# c# - xaml 中的值未反映在 wpf c# 应用程序中的其他类中

> ID：11450638
> 
> 赞同：0
> 
> 时间：2012-07-12T11:15:25.937
> 
> 标签：c#, wpf, xaml, kinect

我正在开发一个 wpf kinect 项目，它是 windows kinect 的开发工具包示例之一，它称为“Kinect Explorer”，您可以从 kinect 开发工具包 sdk 版本 1.5 下载它，在 kinectwindow.xaml 我添加了一个按钮和一个复选框，还有一个名为 kinectskeleton.cs 的类，我在其中创建了两个数据表和一个布尔变量，第一个数据表在 onrender 函数中填充，而另一个为空，布尔变量默认设置为 false。所以我想要的是当按下kinectwindow.xaml.cs中的按钮时，填充数据表中的最新数据被复制到空的数据表中，然后当复选框被选中时，布尔值设置为true，那么如何做到这一点?

我在 kinectskeleton.cs 类中定义了一个函数，该函数将数据从填充的数据表复制到空数据表，并在 kinectwindow.xaml.cs 按钮的 onclick 函数中，我从类 kinectskeletion 创建了一个 opbject 并调用了这个函数，但两个数据表是空的，与 checkbox_checked 函数中的复选框相同，我将 kinectskelton 类的布尔值设置为 true，在未选中的函数中，我将其设置为 false，但结果是在 kinectskelton 类中它始终设置为默认值 false 从不当它为真时进入我输入的if条件。

希望它现在更清楚，等待任何建议。在这里下载工具包是链接： http: [//www.microsoft.com/en-us/kinectforwindows/develop/developer-downloads.aspx](http://www.microsoft.com/en-us/kinectforwindows/develop/developer-downloads.aspx)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-12T12:04:43.737

您是否调用任何等效于 OnPropertyChanged("yourProperty") ？

您的 GUI 需要以某种方式获取变量已更改的信息。

# sql - 在更新多个表时在 sql-server 中批量插入

> ID：11450641
> 
> 赞同：0
> 
> 时间：2012-07-12T11:15:33.180
> 
> 标签：sql, sql-server-2008, sql-server-2005

我有一张表，其中包含以下字段

```
ID   ProductID  CategoryID and lot of columns......

1    1          1
2    1          2
3    2          1
4    2          2
5    2          3 
```

我想将此表中的所有记录插入到两个具有类似结构的单独表中

```
ID    ProductID   (Skip CategoryID column)....
1      1
2      2 
```

和

```
ID  ProductID  CategoryID

1    1          1
2    1          1
3    2          2
4    2          2
5    2          2 
```

我可以使用代码轻松地做到这一点，但我想使用纯 SQL。

通常我可以像这样插入它

```
Insert into Table1 select * from Table2 
```

但在这种情况下，每一行之后都有多个插入。

在这方面的任何想法都是可观的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:52:04.923

如果我理解正确，您的问题是当您从第一个表中选择第二个表时，您会为每个产品获得多行。为了解决这个问题，您可以执行以下操作：

```
INSERT INTO TABLE2 
SELECT DISTINCT 
    ProductID
    , etc. etc. -- Other columns as required
FROM
    TABLE1 
```

然后插入第三张表只需要：

```
INSERT INTO TABLE3
SELECT DISTINCT 
    ProductID
    , CategoryID
FROM
    TABLE1 
```

# python - __init__ 中的类参数测试

> ID：11450646
> 
> 赞同：2
> 
> 时间：2012-07-12T11:15:54.553
> 
> 标签：python, exception

我有一个`Point`接受位置、值和标志作为参数的类。这个类应该只接受整数作为位置和值参数。我尝试了下面的代码，但它不能正常工作。

```
class PointException(Exception):
    pass

class Point():
    def __init__(self, position, value, flag=False):
        try:
            if all([isinstance(x, int) for x in position, value]):
                self.position = position
                self.value = value
                self.point = (position, value)
            self.flag = flag
        except:
            raise PointException("Foo value and position must be integers.")

    def __repr__(self):
        return "< {0}, {1}, {2} >".format(self.position, self.value, self.flag)

    def __eq__(self, other):
        if not isinstance(other, Point):
            return False
        try:
            return all([self.point == other.point, self.flag == other.flag])
        except AttributeError:
            return False

    def __ne__(self, other):
        return not self.__eq__(other) 
```

**更新**

`AttributError`例如，当我尝试时，我得到一个`Point(1, 1.2)`。

```
AttributeError: Point instance has no attribute 'position' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T11:19:41.500

```
if all([isinstance(x, int) for x in position, value]) 
```

应该

```
if all(isinstance(x, int) for x in (position, value)) 
```

更一般地说，您必须在`raise`中出现异常`__init__`，而不是通过以下方式捕获它`except`：

```
def __init__(self, position, value, flag=False):
    if not all(isinstance(x, int) for x in (position, value)):
        raise PointException("Foo value and position must be integers.")

    self.position = position
    self.value = value
    self.point = (position, value)
    self.flag = flag 
```

您可以在其他答案中了解其他改进领域

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T11:23:49.560

一般来说，您并不真的想做这样的事情——您希望拥有正确类型的责任由实例化器承担，而不是由类承担。

但是如果你确实想强制数字是整数，Python 有一个特殊的模块：`numbers`.

```
import numbers
isinstance(position, numbers.Integral) and isinstance(value, numbers.Integral) 
```

或者，如果您必须使用`all`,

```
all(isinstance(x, numbers.Integral) for x in (position, value)) 
```

没有必要`[]`。

# python - python urllib2无法获取谷歌网址

> ID：11450649
> 
> 赞同：1
> 
> 时间：2012-07-12T11:15:56.620
> 
> 标签：python, url, urllib2, urllib

我很难用 python 的 urllib2 获取这个 url 的结果页面：

```
 http://www.google.com/search?tbs=sbi:AMhZZitAaz7goe6AsfVSmFw1sbwsmX0uIjeVnzKHjEXMck70H3j32Q-6FApxrhxdSyMo0OedyWkxk3-qYbyf0q1OqNspjLu8DlyNnWVbNjiKGo87QUjQHf2_1idZ1q_1vvm5gzOCMpChYiKsKYdMywOLjJzqmzYoJNOU2UsTs_1zZGWjU-LsjdFXt_1D5bDkuyRK0YbsaLVcx4eEk_1KMkcJpWlfFEfPMutxTLGf1zxD-9DFZDzNOODs0oj2j_1KG8FRCaMFnTzAfTdl7JfgaDf_1t5Vti8FnbeG9i7qt9wF6P-QK9mdvC15hZ5UR29eQdYbcD1e4woaOQCmg8Q1VLVPf4-kf8dAI7p3jM_1MkBBwaxdt_1TsM4FLwh0oHAYKOS5qBRI28Vs0aw5_1C5-WR4dC902Eqm5eAkLiQyAM9J2bioR66g3tMWe-j9Hyh1ID40R1NyXEJDHcGxp7xOn_16XxfW_1Cq5ArdSNzxFvABb1UcXCn5s4_1LpXZxhZbauwaO8cg3CKGLUvl_1wySDB7QIkMIF2ZInEPS4K-eyErVKqOdY9caYUD8X7oOf6sDKFjT7pNHwlkXiuYbKBRYjlvRHPlcPN1WHWCJWdSNyXdZhwDI3VRaKwmi4YNvkryeNMMbhGytfvlNaaelKcOzWbvzCtSNaP2lJziN1x3btcIAplPcoZxEpb0cDlQwId3A5FDhczxpVbdRnOB-Xeq_1AiUTt_1iI6bSgUAinWXQFYWveTOttdSNCgK-VTxV4OCtlrCrZerk27RBLAzT0ol9NOfYmYhiabzhUczWk4NuiVhKN-M4eo76cAsi74PY4V_1lWjvOpI35V_1YLJQrm0fxVcD34wxFYCIllT2gYW09fj3cuBDMNbsaJqPVQ04OOGlwmcmJeAnK96xd_1aMUd6FsVLOSDS7RfS5MNUSyd1jnXvRU_1MF_1Dj8oC8sm7PfVdjm3firiMcaKM28j9kGWbY0heIGLtO_1m6ad-iKfxYEzSux2b5w62LQlP57yS7vX8RFoyKzHA0RrFIEbPBQdNMA3Vpw0G_1LvEjCAPSCV1HH1pDp0l4EnNCvUIAppVXzNMyWT_1gKITj1NLqAn-Z1tH323JwZSc77OftDSreyHJ-BPxn3n7JMkNZFcQx6S7tfBxeqJ1NuDlpax11pw0_1Oi_1nF3vyEP0NbGKSVgNvBv_1tv8ahxvrHn9UnP78FleiOpzUBfdfRPZiT20VEq5-oXtV_1XwIzrd-5_15-cf2yoL7ohyPuv3WKGUGr4YCsYje7_1D8VslqMPsvbwMg9haj3TrBKH7go70ZfPjUv3h1K7lplnnCdV0hrYVQkSLUY1eEor3L--Vu5PlewS60ZH5YEn4qTnDxniV95h8q0Y3RWXJ6gIXitR5y6CofVg 
```

我使用以下标题，我认为这应该很简单：

```
 headers = {'Host':'www.google.com','User-Agent':user_agent,'Accept-Language':'en-us,en;q=0.5','Accept-Encoding':'gzip, deflate','Accept-Charset':'ISO-8859-1,utf-8;q=0.7,*;q=0.7','Connection':'keep-alive','Referer':'http://www.google.co.in/imghp?hl=en&tab=ii','Cookie':'PREF=ID=1d7bc4ff2a5d8bc6:U=1d37ba5a518b9be1:FF=4:LD=en:TM=1300950025:LM=1302071720:S=rkk0IbbhxUIgpTyA; NID=51=uNq6mZ385WlV1UTfXsiWkSgnsa6PdjH4l9ph-vSQRszBHRcKW3VRJclZLd2XUEdZtxiCtl5hpbJiS3SpEV7670w_x738h75akcO6Viw47MUlpCZfy4KZ2vLT4tcleeiW; SID=DQAAAMEAAACoYm-3B2aiLKf0cRU8spJuiNjiXEQRyxsUZqKf8UXZXS55movrnTmfEcM6FYn-gALmyMPNRIwLDBojINzkv8doX69rUQ9-'} 
```

当我执行以下操作时，我得到的结果不包含任何普通 Web 浏览器返回的内容：

```
 request=urllib2.Request(url,,None,headers)
    response=urllib2.urlopen(request)
    html=response.read() 
```

同样，这段代码返回一堆我看不懂的十六进制垃圾：

```
 request=urllib2.Request(url,headers=headers)
    response=urllib2.urlopen(request)
    html=response.read() 
```

请帮忙，因为我很确定这很简单，而且我一定是遗漏了一些东西。我能够以类似的方式获得此链接，而且还使用以下代码将图像上传到 images.google.com：

```
 import httplib, mimetypes, android, sys, urllib2, urllib, simplejson

    def post_multipart(host, selector, fields, files):
        """
        Post fields and files to an http host as multipart/form-data.
        fields is a sequence of (name, value) elements for regular form fields.
        files is a sequence of (name, filename, value) elements for data to be uploaded as files
        Return the server's response page.
        """
        content_type, body = encode_multipart_formdata(fields, files)
        h = httplib.HTTP(host)
        h.putrequest('POST', selector)
        h.putheader('content-type', content_type)
        h.putheader('content-length', str(len(body)))
        h.endheaders()
        h.send(body)
        errcode, errmsg, headers = h.getreply()
        return h.file.read()

    def encode_multipart_formdata(fields, files):
        """
        fields is a sequence of (name, value) elements for regular form fields.
        files is a sequence of (name, filename, value) elements for data to be uploaded as files
        Return (content_type, body) ready for httplib.HTTP instance
        """
        BOUNDARY = '----------ThIs_Is_tHe_bouNdaRY_$'
        CRLF = '\r\n'
        L = []
        for (key, value) in fields:
            L.append('--' + BOUNDARY)
            L.append('Content-Disposition: form-data; name="%s"' % key)
            L.append('')
            L.append(value)
        for (key, filename, value) in files:
            L.append('--' + BOUNDARY)
            L.append('Content-Disposition: form-data; name="%s"; filename="%s"' % (key, filename))
            L.append('Content-Type: %s' % get_content_type(filename))
            L.append('')
            L.append(value)
        L.append('--' + BOUNDARY + '--')
        L.append('')
        body = CRLF.join(L)
        content_type = 'multipart/form-data; boundary=%s' % BOUNDARY
        return content_type, body

    def get_content_type(filename):
        return mimetypes.guess_type(filename)[0] or 'application/octet-stream'

    host = 'www.google.co.in'
    selector = '/searchbyimage/upload'
    fields = [('user-agent','Mozilla/5.0 (Windows NT 5.1; rv:6.0.2) Gecko/20100101 Firefox/6.0.2'),('connection','keep-alive'),('referer','')]

    with open('jpeg.jpg', 'rb') as jpeg:
        files = [('encoded_image', 'jpeg.jpg', jpeg.read())]
    response = post_multipart(host, selector, fields, files) #added: response = 
    responseLen=(len(response)-1)
    x=22
    if response[(x-21):(x+1)]!='EF=\"http://www.google':
       x+=1
    x+=145
    link=''
    while response[(x+1):(x+7)]!='amp;us':  #>here<
       link=link+response[x]
       x+=1
    print(link) 
```

上面的代码返回的不是浏览器将返回的页面，而是带有“已移动链接”的 html，这是我在此消息中首先发布的“url”。如果我可以上传我的图片并返回结果页面，为什么我不能得到结果链接 html 页面？真是令人沮丧：（

请帮忙，我在这个问题上已经花了一个多月的时间。是的，我是新手，但我认为这很简单:(

请帮我返回这个小网址的结果页面：

```
 http://www.google.com/search?tbs=sbi:AMhZZitAaz7goe6AsfVSmFw1sbwsmX0uIjeVnzKHjEXMck70H3j32Q-6FApxrhxdSyMo0OedyWkxk3-qYbyf0q1OqNspjLu8DlyNnWVbNjiKGo87QUjQHf2_1idZ1q_1vvm5gzOCMpChYiKsKYdMywOLjJzqmzYoJNOU2UsTs_1zZGWjU-LsjdFXt_1D5bDkuyRK0YbsaLVcx4eEk_1KMkcJpWlfFEfPMutxTLGf1zxD-9DFZDzNOODs0oj2j_1KG8FRCaMFnTzAfTdl7JfgaDf_1t5Vti8FnbeG9i7qt9wF6P-QK9mdvC15hZ5UR29eQdYbcD1e4woaOQCmg8Q1VLVPf4-kf8dAI7p3jM_1MkBBwaxdt_1TsM4FLwh0oHAYKOS5qBRI28Vs0aw5_1C5-WR4dC902Eqm5eAkLiQyAM9J2bioR66g3tMWe-j9Hyh1ID40R1NyXEJDHcGxp7xOn_16XxfW_1Cq5ArdSNzxFvABb1UcXCn5s4_1LpXZxhZbauwaO8cg3CKGLUvl_1wySDB7QIkMIF2ZInEPS4K-eyErVKqOdY9caYUD8X7oOf6sDKFjT7pNHwlkXiuYbKBRYjlvRHPlcPN1WHWCJWdSNyXdZhwDI3VRaKwmi4YNvkryeNMMbhGytfvlNaaelKcOzWbvzCtSNaP2lJziN1x3btcIAplPcoZxEpb0cDlQwId3A5FDhczxpVbdRnOB-Xeq_1AiUTt_1iI6bSgUAinWXQFYWveTOttdSNCgK-VTxV4OCtlrCrZerk27RBLAzT0ol9NOfYmYhiabzhUczWk4NuiVhKN-M4eo76cAsi74PY4V_1lWjvOpI35V_1YLJQrm0fxVcD34wxFYCIllT2gYW09fj3cuBDMNbsaJqPVQ04OOGlwmcmJeAnK96xd_1aMUd6FsVLOSDS7RfS5MNUSyd1jnXvRU_1MF_1Dj8oC8sm7PfVdjm3firiMcaKM28j9kGWbY0heIGLtO_1m6ad-iKfxYEzSux2b5w62LQlP57yS7vX8RFoyKzHA0RrFIEbPBQdNMA3Vpw0G_1LvEjCAPSCV1HH1pDp0l4EnNCvUIAppVXzNMyWT_1gKITj1NLqAn-Z1tH323JwZSc77OftDSreyHJ-BPxn3n7JMkNZFcQx6S7tfBxeqJ1NuDlpax11pw0_1Oi_1nF3vyEP0NbGKSVgNvBv_1tv8ahxvrHn9UnP78FleiOpzUBfdfRPZiT20VEq5-oXtV_1XwIzrd-5_15-cf2yoL7ohyPuv3WKGUGr4YCsYje7_1D8VslqMPsvbwMg9haj3TrBKH7go70ZfPjUv3h1K7lplnnCdV0hrYVQkSLUY1eEor3L--Vu5PlewS60ZH5YEn4qTnDxniV95h8q0Y3RWXJ6gIXitR5y6CofVg 
```

戴夫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T09:55:00.383

您的用户代理未定义！

拿那个：

```
#!/usr/bin/python

import urllib2

url = "http://www.google.com/search?q=mysearch";
opener = urllib2.build_opener()
opener.addheaders = [('User-agent', 'Mozilla/5.0')]
print opener.open(url).read()
raw_input() 
```

如果你想找到其他用户代理，你可以`about:config`在 Firefox 中编写。并搜索“用户代理”：

> Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.8) Gecko/20050511
> 
> Googlebot/2.​​1 (+http://www.google.com/bot.html)
> 
> Opera/7.23 (Windows 98; U) [zh]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T12:34:51.437

谷歌有几种反抓取技术，因为他们不希望用户在没有 API 或真实浏览器的情况下获得结果。

如果您对抓取此类页面很认真，我建议您查看：[Selenium](http://seleniumhq.org/)或[Spynner](http://code.google.com/p/spynner/)。

另一个优点是两者都执行javascript。

# jquery - 如果项目数小于 X，jcarousel 隐藏两个箭头

> ID：11450650
> 
> 赞同：0
> 
> 时间：2012-07-12T11:15:58.103
> 
> 标签：jquery, jcarousel

所以我有这段代码，我尝试将它放入`.load`并`.ready`运行，但它不起作用，因为轮播还没有完全加载。

```
var num_rec = "${recProducts.size()}";
if(num_rec < 5){
    jQuery(".jcarousel-prev").attr("disabled", true);
    jQuery(".jcarousel-next").attr("disabled", true);
    jQuery(".jcarousel-clip").attr("style", 'postion:relative; width:312px;');
} 
```

现在此代码运行，但被轮播选项覆盖。我可以使用轮播的选项来运行一个函数来运行此代码吗？

如果我的轮播中只有四个东西，那么就不需要显示任何分页，因为所有四个东西都会显示，所以我想完全删除分页并使容器更大一点，这样图片就不会被切断。如果有超过 4 个虽然我需要分页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:48:04.653

哈！我为实际的样式表写了一个额外的样式。这不是我想要的，但它确实有效。使用 CSS 可见性是有效的，因为使用它的轮播插件没有向元素添加内联样式。

```
if(num_rec < 5){                
    document.styleSheets[0].addRule(".pdp-main .recommendations .jcarousel-next", "visibility:hidden;");
    document.styleSheets[0].addRule(".pdp-main .recommendations .jcarousel-prev", "visibility:hidden;");
} 
```

对于 FireFox，您必须改用 insertRule。

我仍然想知道是否有更清洁的方法来做到这一点。jQuery Rule 插件对我不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T16:27:13.443

简化的 JQuery 方法：

```
var total_items = jcarousel.find('li').length;
if(total_items < 5)
{                
    $('.jcarousel-control-prev, .jcarousel-control-next, .jcarousel-pagination').hide();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-23T12:23:21.247

```
 var items = $('.carousel-navigation').jcarousel('items');
  total_items=items.length;
  if(total_items < 5){                
    $('.prev-navigation, .next-navigation').hide();
  } 
```

# database-design - 标签 架构

> ID：11450654
> 
> 赞同：0
> 
> 时间：2012-07-12T11:16:06.627
> 
> 标签：database-design, architecture

我正在构建一个多站点平台，类似于 StackExchange，它有多个社区使用相同的平台并共享数据。

用户可以像标记堆栈交换问题一样“标记”他们的内容。创建标签概念的最佳架构是什么？

我想到的一些小笔记是别名（同义词）的概念。此外，我一方面认为我希望跨站点共享标签（这样人们就可以看到来自另一个站点的同一主题的内容），但另一方面，不同社区的上下文可能不同。例如，计算机中的“图形”是一种数据结构，而数学则是别的东西（只是我脑海中的一个随机例子——不确定它是否重要）。

另外，如果我有一个英语社区和一个法语社区...

你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:53:22.063

要以完全标准化的方式执行此操作，您需要以下内容：

![在此处输入图像描述](../Images/2653376f333c329b71a7a128bdfce88c.png)

MEANING_ITEM 具有以下索引：

*   {SITE_ID, MEANING_NO, ITEM_NO} - 自动为主键创建，并且可以有效地搜索具有给定标签的项目。
*   {ITEM_NO, SITE_ID, MEANING_NO} - 可以有效地查询相反的内容：“获取给定项目的标签”。

*注意：如果您的 DBMS 支持它，请考虑将此表[聚类。](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)聚簇表中的二级索引可能很昂贵（因为它们需要包含整个 PK 的副本并且可能导致双重查找），但在这种情况下，两个索引都包含相同的字段（因此所有“额外”字段都已经在二级index) 并且索引**之外**没有字段，因此不需要双重查找。通过集群，您只是消除了（无用的）表堆，并且只剩下两个 B 树。*

该模型具有以下属性：

*   标签和项目都以特定于站点的方式标识，默认情况下查询特定于站点的标签。如果您想查询标签名称而不考虑站点，只需`SITE_ID = ...`从下面查询中的 WHERE 子句中省略即可。由于 TAG_NAME 处于 TAG PK 的前沿，因此无需额外索引即可有效满足无站点查询。
*   项目不能使用来自“错误”站点的标签进行标记。我们正在使用**识别**关系，它将 SITE_ID 传播到“菱形”依赖关系的两个边缘，合并到“菱形”的底部（在 MEANING_ITEM 中），这就是为我们提供这种保证的原因。
*   标签同义词被有效地表示（在同一站点内具有相同含义的标签被视为同义词）。如果我们尝试在标签上实现 M:N 自关系，则不会发生各种异常。¹
*   由于标签的含义是特定于站点的，因此同义词也是特定于站点的。
*   MEANING 表是存储有关标签的附加信息（例如描述）的自然位置，这些信息将由所有同义词共享。

*¹我们如何处理同义词及物性？如果 A、B 和 C 是同义词，我们是只存储 AB 和 BC 还是同时存储 AC？我们如何执行它？如果我们不强制执行它，我们将需要某种递归查询来选择所有依赖项。每个连接都需要一行，浪费空间和性能。*

要获取具有**任何**给定标签的项目，您需要执行类似于此的查询...

```
SELECT *
FROM ITEM
WHERE EXISTS (
    SELECT *
    FROM TAG JOIN MEANING_ITEM ON
        TAG.SITE_ID = MEANING_ITEM.SITE_ID
        AND TAG.MEANING_NO = MEANING_ITEM.MEANING_NO
    WHERE
        TAG.SITE_ID = <site id>
        AND TAG.NAME IN ( <list of tags> )
        AND ITEM.SITE_ID = MEANING_ITEM.SITE_ID
        AND ITEM.ITEM_NO = MEANING_ITEM.ITEM_NO
) 
```

*注意：我们可以从上面的查询中完全省略 JOIN 到 MEANING - JOIN 所需的所有字段都已经在 TAG 中。*

对于具有**所有**给定标签的项目，您需要一些 COUNTing，类似于以下内容：

```
SELECT *
FROM ITEM
WHERE <number of tags> = (
    SELECT COUNT(DISTINCT TAG_NAME)
    FROM TAG JOIN MEANING_ITEM ON
        TAG.SITE_ID = MEANING_ITEM.SITE_ID
        AND TAG.MEANING_NO = MEANING_ITEM.MEANING_NO
    WHERE
        TAG.SITE_ID = <site id>
        AND TAG.NAME IN ( <list of tags> )
        AND ITEM.SITE_ID = MEANING_ITEM.SITE_ID
        AND ITEM.ITEM_NO = MEANING_ITEM.ITEM_NO
) 
```

现在这看起来像很多 JOIN-ing，但这个模型非常适合集群（又名[索引组织](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)）表和使用索引[覆盖](http://use-the-index-luke.com/sql/clustering/index-only-scan-covering-index)查询。

在考虑出于性能原因对这种设计进行非规范化之前，您可能需要接近 StackExchange 的真实数据量（例如，通过删除联结表并限制每个项目的标签数量）。

在任何情况下，在进行任何特定设计之前，都要测量实际的数据量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:49:39.870

我会建议这样的模型：

![ERD](../Images/63f8f70b56aed08361d4422f98dba0c9.png)

您保留一个可用标签列表，这些标签适用于您使用标准多对多交集表标记的任何项目。

要管理标签的同义词，请在可用标签表上使用内卷关系。这假设在作为同义词的各种标签中，一个被认为是“主要”标签。

可用的标签有一个语言标志来指示英语或法语。如果您为加拿大政府或其他机构执行此操作，并且需要确保所有内容都以两种语言显示，您可以添加一个内卷的一对一（未显示）`AVAILABLE_TAG`以链接等效的英语和法语标签。

要跨站点共享标签，请使用另一个与表格的多对多交集`SITE`来显示哪些标签属于哪个站点。如果这些标签在每个站点上的含义不同，我会避免跨站点共享标签。

# jquery - 如何将 div 置于屏幕之外并将其重新悬停

> ID：11450659
> 
> 赞同：0
> 
> 时间：2012-07-12T11:16:26.820
> 
> 标签：jquery, html, css, position

这是我正在使用的代码的小提琴：[FIDDLE](http://jsfiddle.net/AJBweb1986/GQzEn/1/)，由于重叠错误阻止 a.trigger 在 IE 中工作，我需要将 div.pop-up 定位在屏幕之外，直到 a.trigger 悬停在上面。

有人知道怎么做吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:36:23.023

这是一个老派的黑客攻击。您只需将元素从屏幕左侧移出 1000 像素，然后在执行动画之前将其放回原处：

```
$(document).ready(function() {
    //If Javascript is running, change css on product-description to display:block
    //then hide the div, ready to animate
    $("div.pop-up").css({'display':'block','opacity':'0'})

    $("a.trigger").hover(
      function () {
        $(this).prev().css("left", "0px");
        $(this).prev().stop().animate({
          opacity: 1
        }, 500);
      },
      function () {
        // First answer had this line coming first.
        // $(this).prev().css("left", "-1000px");
        $(this).prev().stop().animate({
          opacity: 0
        }, 200);
        // It should actually probably be here
        // so the movement is still done invisibly
        $(this).prev().css("left", "-1000px");
      }
    )
  });​ 
```

您还需要将定位添加到 css 的左侧。

```
/* HOVER STYLES */
div.pop-up {
  /*display: none;*/
  text-align: left;
  position: absolute;
  left: -1000px;      // <--- Send me left
  margin-top: -10px;
  width: 120px;
  padding: 0px 13px;
  background: #eeeeee;
  color: #000000;
  border: 1px solid #1a1a1a;
  font-size: 90%;
} 
```

看我的行动-> [JSFiddle](http://jsfiddle.net/GQzEn/23/)

# java - 最小化通过 UDP 传输的数据的最有效方法是什么？

> ID：11450662
> 
> 赞同：4
> 
> 时间：2012-07-12T11:16:43.013
> 
> 标签：java, sockets, encryption, udp

我不太喜欢位和字节，所以如果这个问题很愚蠢，我很抱歉。

我对套接字有一些经验，通常用于传输少量纯文本。但是，这一次我必须传输更多可以通过 UDP 分解的数据。

我正在开发一个游戏，其中服务器是用 Java 编写的，我想向客户端发送一个对象数组。由于我是一名网络开发人员，JSON 是传输数据的第一件事，尽管我非常怀疑这是网络中最有效的方式。

在 JSON 的情况下：

```
{
    "players": [
        {
            "id": "884B0EAA2C7F16BA",   // hex string
            "name": "some guy",         // string
            "x": 0,                     // double
            "y": 0,                     // double
            "xv": 0,                    // double
            "yv": 0,                    // double
            "angle": 0,                 // double
        }, {
            "id": "AB61F7C2AAE0B488",   // hex string
            "name": "some other guy",   // string
            "x": 0,                     // double
            "y": 0,                     // double
            "xv": 0,                    // double
            "yv": 0,                    // double
            "angle": 0,                 // double
        }
    ]
} 
```

现在，我可以添加一个自定义分隔符来拆分每个玩家的数据，并添加另一个分隔符来拆分数据。在我看来，最有效的方法之一是每行放置玩家的值，并在这些值之间放置一个预定义的字符序列。

```
884B0EAA2C7F16BA[|]some guy[|]0[|]0[|]0[|]0[|]0
AB61F7C2AAE0B488[|]some other guy[|]0[|]0[|]0[|]0[|]0 
```

虽然这对我有用，但名称等仍然存在一些安全风险。我很难告诉客户包含“[|]”的显示名称是非法的。

**最小化传输数据的最有效方法是什么？**

任何有关加密的额外信息将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T11:25:24.443

考虑使用 Google 协议缓冲区。您定义一条消息（在 .proto 文件中），它会为您生成不同编程语言的代码。

然后生成的代码能够对您的消息进行编码/解码，而无需您考虑数据是如何编码的。

编码的消息将非常小，并且编码/解码速度非常快。协议缓冲区非常擅长这一点。

网站上有一些很好的文档：[https ://developers.google.com/protocol-buffers/](https://developers.google.com/protocol-buffers/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T11:29:40.127

如果您的目标是最小化传输数据，您总是可以尝试不太复杂的压缩算法（我们不想花费大量时间压缩和解压缩每个数据包）。你可以看看[这个问题](https://stackoverflow.com/questions/3918189/fast-compression-in-java)或搜索一个外部库，比如[这个](http://www.quicklz.com/)。

除非您可以确定每个数据字段的长度，否则您必须使用某种分隔符。避免在玩家名称中使用某些字符几乎在所有游戏中都使用，你为什么不能这样做？

如果您仍然想允许任何字符出现在玩家名称中，请通过 TCP 套接字将所有字符一起发送，并在每个客户端中使用 ID-玩家名称对构建一个表，并使用服务器在您的 UDP 语句中提供的唯一 ID。这样，您可以安全地使用分隔符。

# android - android中从左到右的滑动抽屉

> ID：11450668
> 
> 赞同：0
> 
> 时间：2012-07-12T11:17:01.153
> 
> 标签：android

任何人都可以举一个简单的例子来说明如何从左到右在 android 中制作滑动抽屉 我在互联网上搜索了很多，但找不到合适的解决方案。等待您的回复。谢谢你 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:26:59.610

请使用以下代码用于水平滑动抽屉。

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <ImageView 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:src="@drawable/icon"/>

    <SlidingDrawer
        android:id="@+id/drawer"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal"
        android:handle="@+id/handle"
        android:content="@+id/content">
        <ImageView 
            android:id="@id/handle"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent" 
            android:src="@drawable/icon"/>
        <LinearLayout
            android:id="@id/content"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical"
            android:padding="10dp"
            android:background="#55000000">
            <Button
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" 
                android:text=" - Button - "/>
            <Button
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" 
                android:text=" - Button - "/>
            <Button
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" 
                android:text=" - Button - "/>
            <Button
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" 
                android:text=" - Button - "/>
            <Button
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" 
                android:text=" - Button - "/>
            <Button
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" 
                android:text=" - Button - "/>
        </LinearLayout>
    </SlidingDrawer>
</FrameLayout> 
```

使用下面的示例链接作为参考。

[水平滑动抽屉 - 1](http://android-er.blogspot.in/2011/10/slidingdrawer-in-horizontal.html)

[水平滑动抽屉 - 2](http://www.anddev.org/viewtopic.php?p=16622)

# php - 使用 XAMPP 包在本地显示 php 站点的问题。站点在远程服务器上运行良好

> ID：11450669
> 
> 赞同：0
> 
> 时间：2012-07-12T11:17:03.587
> 
> 标签：php, xampp, dreamweaver, htdocs

我第一次在 stackoverflow.com 上发帖！一个很棒的网站，我希望我的帖子能为他人的利益做出贡献。

**情况：** 我被委托翻新一个*非常*小的、现有的、由 php 驱动的网站。

所以，我开始设置我的环境：

*   Dreamweaver 已安装。
*   我将文件从远程服务器 FTP 到我的计算机。
*   我通过 XAMPP 包选择 Apache 和 MySQL 在我的计算机（PC、Windows XP）上设置本地主机，安装 XAMPP 并设置默认省略的密码。
*   我确保 Apache 和 MySQL 都已启动并运行。
*   我在 Dreamweaver 中设置了本地信息、远程信息和测试服务器的参数（这需要一些时间）。

到目前为止一切都很好。

但是当在浏览器中本地预览时，该站点将无法正常工作。现场版运行得很好。

**问题：** 该站点的第一页将在没有连接到 css 样式表或图像文件夹的情况下启动，并且在尝试生成的链接时，他们会点击根文件夹中的 XAMPP 重定向，并且会显示 XAMPP 橙色页面。

那么，如何解决这个问题？

再次感谢您提供了一个很棒的网站！/瓦克拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T06:42:42.690

**解决方案** ...是在 xampp/apache/conf/httpd.conf 文件中编辑 DocumentRoot 设置。

问题是我将测试站点的动态内容所在的文件夹作为 XAMPPs 默认 webroot 文件夹 htdocs 的子文件夹放置：htdocs/MySampleSite

当我将 xampp/apache/conf/httpd.conf 中的 DocumentRoot 设置从默认文件夹 DocumentRoot "C:/xampp/htdocs" 编辑到实际文件夹 DocumentRoot "C:/xampp/htdocs/MySampleSite" 时，所有问题都自行解决了.

请记住，您需要在 httpd.conf 中的两个位置进行更改！除了上面提到的，您还必须将默认值更改为

好吧，事后看来，我想这相当微不足道，但是找到合适的地方需要一些时间，所以我希望这可能对其他人有所帮助。

再次感谢您提供了一个很棒的网站！瓦克拉

# javascript - 以与客户端代码相反的顺序显示网格

> ID：11450670
> 
> 赞同：0
> 
> 时间：2012-07-12T11:17:04.083
> 
> 标签：javascript, jquery, asp.net, gridview

由于时间紧迫且对生产的访问受限，我只想以相反的顺序显示我的网格结果，我的意思是目前它以“日期”列的升序显示，我想以降序显示它，排序是没有在这个网格上实现并且及时我有访问服务器端代码的限制。是否可以从客户端进行管理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:19:02.697

可能...您可以尝试使用 jQuery 数据表插件。

小提琴 - [http://jsfiddle.net/tariqulazam/bEeHp](http://jsfiddle.net/tariqulazam/bEeHp)

**HTML**

```
<table id="table">
    <tr>
        <td>A</td>    
    </tr>
    <tr>
        <td>B</td>    
    </tr>
    <tr>
        <td>C</td>    
    </tr>
    <tr>
        <td>D</td>    
    </tr>
</table>

<input type="button" value="Reverse" id="btnReverse"/>​ 
```

**JavaScript**

```
$("#btnReverse").click(function(){
   $("#table tr").each(function(i,li){
      $("#table").prepend(li)
   });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:19:57.040

您可能会成功使用 jQuery Tablesorter：

[http://tablesorter.com/docs/](http://tablesorter.com/docs/)

`headers { 0: { sorter: false}, 1: {sorter: false} }`通过应用并使用将反转整个数据集的列的初始排序方向来禁用列标题单击： `sortList: [0,0]`.

你最终会得到这样的东西：

```
$(function() {
        $("#myTable").tablesorter({
            sortList: [0,0], 
            headers { 0:{sorter:false}, 1:{sorter:false}, 2:{sorter:false}} 
        }); 
    } 
); 
```

# c# - XmlSerializer : 格式化标签

> ID：11450671
> 
> 赞同：1
> 
> 时间：2012-07-12T11:17:11.270
> 
> 标签：c#, .net, xml, xml-serialization

我使用 .NET XmlSerializer 简单地序列化具有 Items 作为集合的 Person；

```
class Item
{
   Name
   Price
}

class Person
{
   Name
   List Items<Item>
} 
```

一切都很好...我使用 XmlWriterSettings 缩进我的 xml 文件。输出是：

```
 <?xml version="1.0" encoding="utf-8"?>
<Person xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <name>TestName</name>
  <Items>
    <Item>
      <name>one</name>
      <price>0</price>
    </Item>
    <Item>
      <name>two</name>
      <price>1</price>
    </Item>
  </Items>
</Viewport> 
```

但我想要的是：

```
<?xml version="1.0" encoding="utf-8"?>
<Person xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <name>TestName</name>
  <Items>
     <Item name="one" price="0" />
     <Item name="two" price="1" />
  </Items>
</Viewport> 
```

不久，而不是

```
<Item>
      <name>one</name>
      <price>0</price>
 </Item> 
```

我想把xml写成

```
<Item name="one" price="0" /> 
```

我如何在 .NET(C#) 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T12:19:41.167

```
class Item
{
    [System.Xml.Serialization.XmlAttributeAttribute("name")]
    string Name;
    [System.Xml.Serialization.XmlAttributeAttribute("price")]
    string Price;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:20:59.650

用`Name`_ `Price`_`XmlAttribute`

# c# - 奇怪的silverlight绑定问题

> ID：11450676
> 
> 赞同：0
> 
> 时间：2012-07-12T11:17:15.753
> 
> 标签：c#, silverlight, xaml

我有一个奇怪的问题。我有两个堆栈面板，每个都有一个按钮，两个堆栈面板的数据上下文相同，并且按钮上的 IsEnabled 属性也设置为相同的属性。然而，一个按钮被禁用，另一个被启用：

StackPanel #1（启用）：

```
<StackPanel Orientation="Horizontal" Grid.Row="2" Grid.Column="1" Height="23"  DataContext="{Binding ElementName=LayoutRoot, Path=DataContext}">
    <TextBox Grid.Row="0" Grid.Column="1" Height="23" Width="220" Name="txtBarcode"></TextBox>
    <Button IsEnabled="{Binding CanAdd}" cal:Click.Command="{Binding AddBarcodeCommand}" Width="40" Content=". . ." Margin="5,0"></Button>
</StackPanel> 
```

StackPanel #2（已禁用）：

```
<StackPanel Orientation="Horizontal" Grid.Row="3" Grid.Column="1" HorizontalAlignment="Right"  DataContext="{Binding ElementName=LayoutRoot, Path=DataContext}" >
    <Button HorizontalAlignment="Right" cal:Click.Command="{Binding ElementName=LayoutRoot, Path=DataContext.SaveCommand}" Grid.Row="3" Grid.Column="1" Height="30" Content="Create Batch" Width="130"></Button>
    <Button IsEnabled="{Binding CanAdd}" Height="30" Content="Apply" Width="130" HorizontalAlignment="Right" Margin="5,0"></Button>
</StackPanel> 
```

我在输出窗口中没有看到任何数据绑定错误。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:19:05.913

这可能是因为您在第一个按钮中的命令：

```
cal:Click.Command="{Binding AddBarcodeCommand} 
```

如果该命令为其定义了 CanExecute 方法，则当该方法返回 false 时，它​​将禁用按钮。

它也可能适用于`SaveCommand`

我会删除`IsEnabled`绑定并让它`CanExecute`做它的事情，因为它是执行此操作的命令点，
但您也可以*修复*CanExecute 逻辑或删除它并让 IsEnabled 绑定工作。

# macos - 试图从 lipo 中获取偏移量会产生非胖文件错误

> ID：11450677
> 
> 赞同：0
> 
> 时间：2012-07-12T11:17:18.370
> 
> 标签：macos, offset

我正在尝试使用 lipo (http://www.unix.com/man-page/OSX/1/lipo/) 来获得如下输出：

```
architecture x86_64
        cputype CPU_TYPE_X86_64
        cpusubtype CPU_SUBTYPE_X86_64_ALL
        offset 4096
        size 283008
        align 2^12 (4096) 
```

我需要它来获取特定文件的偏移值。

当尝试类似`lipo -info <file>`我收到以下错误消息时：

非胖文件：AppleIntelSNBGraphicsFB 是架构：x86_64

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:52:17.177

x86_64 二进制文件的偏移量始终为 0。

如果有人想进一步解释这一点（或一般如何将 lipo 用于“非胖”文件），请随时这样做。

# java - 类继承

> ID：11450680
> 
> 赞同：3
> 
> 时间：2012-07-12T11:17:24.547
> 
> 标签：java, android, oop, inheritance, instanceof

我有两节课：

```
class ItemInfo {

   public View createItemView() {
       View v;
       // ...
       v.setTag(this); 
       return v;
   }
}

class FolderInfo extends ItemInfo {

    @Override
    public View createItemView() {
        View v;
        // ...
        v.setTag(this);
        return v;
    }
} 
```

然后我使用它：

```
FolderInfo folderInfo;
// Create it here
ItemInfo itemInfo = folderInfo;
View v = itemInfo.createItemView();
Object objectTag = v.getTag(); 
```

然后我通过instanceof检查objectTag的类型，它是ItemInfo！为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T11:21:08.147

如果你这样做：

```
if (itemInfo instanceof ItemInfo) {
    System.out.println("OK!");
} 
```

你当然会看到`"OK!"`被打印出来，因为`FolderInfo`是一个子类`ItemInfo`- 所以 a`FolderInfo`也是一个`ItemInfo`对象。

继承意味着从子类到超类存在“是”关系 - 参见[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T11:26:43.910

您可以通过键入以下内容进行检查：

```
if (iteminfo instanceof FolderInfo) {
// do what you want
}
else if (iteminfo instanceof ItemInfo) {
// do what you want
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T11:24:32.447

`InstanceOf`是检查`IS A`关系。

if( `ChildClass instanceOd ParentClass`) 总是返回你`true`。甚至所有实现接口的类`A`都会通过测试`(AllClassess instanceOf A)`

在您的情况下**， FolderInfo**是**ItemInfo**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T11:27:58.767

我建议您使用`Enumeration`定义所有类型。

**上面的代码如下所示：**

```
class View {
    public ItemInfo getTag() {
       return tag;
    }
}

enum ItemType {
    FolderType,
    FileType
};

class ItemInfo {
  private abstract ItemType getType();

 public View createItemView() {
   View v;
   // ...
   v.setTag(this); 
   return v;
  }
}

class FolderInfo extends ItemInfo {

private  ItemType getType() {
  return ItemType.FolderType;
}
@Override
public View createItemView() {
    View v;
    // ...
    v.setTag(this);
    return v;
  }
} 
```

**这将允许您编写更好、更整洁的代码，如下所示**：

```
switch(itemType) {
      case ItemType.FolderType:
          //handle folder type
          break;
      case ItemType.FileType:
          //handle folder type
          break;
} 
```

无论你想检查类型，你都可以像这样检查：

```
 if( itemInfo.getType() == ItemType.FolderType) {
  } 
```

# .net - AssemblyVersion 中是否可以有超过 4 个参数？

> ID：11450681
> 
> 赞同：1
> 
> 时间：2012-07-12T11:17:33.003
> 
> 标签：.net, version, .net-assembly

只是想知道 .Net 程序集的 AssemblyVersion 中是否可以有 4 个以上的参数？

我想要实现的是以下格式的版本控制：

```
<Major>.<Minor>.<Maintenance>.<Revision>.<BuildNumber> 
```

..如果不可能，任何人都可以推荐任何其他方式来实现我正在尝试的东西，例如连接数字或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:39:40.790

不可能，不知道为什么你需要第五个数字，但你可以把它放在 AssemblyInformationalVersionAttribute 中，这是“视觉表示”，不是严格的版本号，只是一个字符串。这在 dll/exe 的属性/详细信息中显示为“产品版本”。

我用它来显示 alpha/beta 版本，如下所示：

```
[assembly: AssemblyVersion("0.4.1207.1101")]
[assembly: AssemblyFileVersion("0.4.1207.1101")]
[assembly: AssemblyInformationalVersion("0.4-alpha")] 
```

# spring-security - Spring Security 总是在登录页面上重定向

> ID：11450682
> 
> 赞同：1
> 
> 时间：2012-07-12T11:17:37.740
> 
> 标签：spring-security, spring-3

我有这个配置：

```
<bean id="customizedFilterSecurityInterceptor"
        class="org.springframework.security.web.access.intercept.FilterSecurityInterceptor">
    <property name="authenticationManager" ref="authenticationManager"/>
    <property name="accessDecisionManager" ref="accesDecisionManager"/>
    <property name="securityMetadataSource">
        <security:filter-security-metadata-source use-expressions="true" >
            <security:intercept-url pattern="/css/**" access="permitAll" />
            <security:intercept-url pattern="/js/**" access="permitAll" />
            <security:intercept-url pattern="/externe*.do" access="permitAll" />
            <security:intercept-url pattern="/*.do" access="isAuthenticated() or isRememberMe()" />
        </security:filter-security-metadata-source>
    </property>
</bean>

<bean id="loginUrlAuthenticationEntryPoint"
   class="org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint">
    <property name="loginFormUrl">
            <value>/login.jsp</value>
    </property>
    <property name="forceHttps">
            <value>false</value>
    </property>
</bean>

<bean id="externeServiceInterceptor"  class="fr.global.commun.springSecurity.MySecurityInterceptor">
    <property name="authenticationManager" ref="authenticationManager"/>
    ...
    <property name="securityMetadataSource">
    <security:filter-security-metadata-source use-expressions="true" >
        <security:intercept-url pattern="/externe*.do" access="isAuthenticated()" />
        </security:filter-security-metadata-source>
    </property> 
```

问题是所有以开头的请求`/externe`都重定向到登录页面，如果我删除`/*.do`，我不会访问拦截器，而是直接在 struts 操作 Externe*.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:41:07.957

xml 文件中的这个条目被遗忘了：

```
<bean id="springSecurityFilterChain" class="org.springframework.security.web.FilterChainProxy">
    <security:filter-chain-map path-type="ant">
        <security:filter-chain pattern="/externe*.do" filters="externeServiceInterceptor" />
    </security:filter-chain-map>   
</bean> 
```

# android - 如何在 Libgdx 中更改 AdMob 方向

> ID：11450684
> 
> 赞同：3
> 
> 时间：2012-07-12T11:17:39.820
> 
> 标签：android, admob, libgdx

当用户到达屏幕时，我尝试在 Libgdx 中更改 AdMob 方向。我想把它放在屏幕的底部。我已经制作了一个处理程序，在适当的屏幕上实现它，然后调用该方法，通过

```
myHandler.moveAds(true); 
```

我的界面如下所示：

```
public interface IActivityRequestHandler {
    public void showAds(boolean show);
    public void moveAds(boolean move);
} 
```

Android 项目文件如下所示：

```
public class MyAndroidnewActivity extends AndroidApplication implements IActivityRequestHandler {
     protected AdView adView;
     RelativeLayout.LayoutParams adParams;

     private final int SHOW_ADS = 1;
     private final int HIDE_ADS = 0;
     private final int MOVE_ADS = 1;
     private final int PLACE_ADS = 0;

     protected Handler handler = new Handler()
     {
         @Override
         public void handleMessage(Message msg) {
             switch(msg.what) {
                 case SHOW_ADS:
                 {
                     adView.setVisibility(View.VISIBLE);
                     break;
                 }
                 case HIDE_ADS:
                 {
                     adView.setVisibility(View.GONE);
                     break;
                 }
             }
         }
     };

     protected Handler moveHandler = new Handler()
     {
         @Override
         public void handleMessage(Message msg) {
             switch(msg.what) {
                 case MOVE_ADS:
                 {
                    //In my opinion this code is not good, because It doesn't do anything 
                    //when I call the myHandler.moveAds(true); in an another class      
                    adView.setGravity(Gravity.BOTTOM);
                     break;
                 }
                 case PLACE_ADS:
                 {
                    adView.setGravity(Gravity.TOP);
                     break;
                 }
             }
         }
     };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        AndroidApplicationConfiguration cfg = new AndroidApplicationConfiguration();
        cfg.useGL20 = false;
        cfg.useAccelerometer = false;
        cfg.useCompass = false;

            // Create the layout
            RelativeLayout layout = new RelativeLayout(this);

            // Do the stuff that initialize() would do for you
            requestWindowFeature(Window.FEATURE_NO_TITLE);
            getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                            WindowManager.LayoutParams.FLAG_FULLSCREEN);
            getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);

            // Create the libgdx View
            View gameView = initializeForView(new MyApp(this), false);

            // Create and setup the AdMob view
            adView = new AdView(this, AdSize.BANNER, "MYOWNKEY"); // Put in your secret key here
            AdRequest re = new AdRequest();
            re.addTestDevice("MYOWNDEVICECODE");
            adView.loadAd(re);

            // Add the libgdx view
            layout.addView(gameView);

            // Add the AdMob view
            adParams = 
                    new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, 
                                    RelativeLayout.LayoutParams.WRAP_CONTENT);
            adParams.addRule(RelativeLayout.ALIGN_PARENT_TOP);
            adParams.addRule(RelativeLayout.ALIGN_PARENT_LEFT);

            layout.addView(adView, adParams);

            // Hook it all up
            setContentView(layout);
        }

        @Override
        public void showAds(boolean show) {
           handler.sendEmptyMessage(show ? SHOW_ADS : HIDE_ADS);
        }

        @Override
        public void moveAds(boolean move) {
           moveHandler.sendEmptyMessage(move ? MOVE_ADS : PLACE_ADS);
        }
    } 
```

但是当我调用 myHandler.moveAds(true); 另一个类中的方法，它什么都不做，没有错误，只是（横向）屏幕顶部的广告，而不是底部。

在我看来我的有问题

```
 protected Handler moveHandler = new Handler()
     {
         @Override
         public void handleMessage(Message msg) {
             switch(msg.what) {
                 case MOVE_ADS:
                 {
                    //In my opinion this code is not good, because It doesn't do anything 
                    //when I call the myHandler.moveAds(true); in an another class      
                    adView.setGravity(Gravity.BOTTOM);
                     break;
                 }
                 case PLACE_ADS:
                 {
                    adView.setGravity(Gravity.TOP);
                     break;
                 }
             }
         }
     }; 
```

代码。也许我需要以另一种方式控制方向，但我不知道如何。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T22:46:29.813

该`setGravity()`方法确定将内容（在本例中为广告）放置在 AdView 中的位置，而不是确定将 AdView 放置在其容器中的位置。

看起来你的容器是一个 RelativeLayout，所以你应该能够设置新的 LayoutParams 而不是设置重力：

```
RelativeLayout.LayoutParams adParams =
    new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT,
                                    RelativeLayout.LayoutParams.WRAP_CONTENT);
adParams.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM); // or RelativeLayout.ALIGN_PARENT_TOP
adView.setLayoutParams(adParams); 
```

# ruby-on-rails - 如何在 Rspec 2 中测试渲染：file => 'public/404.html'？

> ID：11450692
> 
> 赞同：11
> 
> 时间：2012-07-12T11:18:09.230
> 
> 标签：ruby-on-rails, testing, rspec

我在一个动作中有以下代码：

```
render :file => 'public/404.html' and return 
```

这在浏览器中工作正常。我编写了以下 rspec 示例来测试它：

```
 it "renders 404" do
    get :new
    response.should render_template('public/404.html')
  end 
```

运行此示例会导致以下错误：

```
 Failure/Error: response.should render_template('public/404.html')
   Expected block to return true value. 
```

我也尝试过`response.should render_template(:file => 'public/404.html')`，但这也会导致错误。

我应该如何测试这个？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-23T09:05:23.530

你应该使用：

```
response.should render_template(:file => "#{Rails.root}/public/404.html") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T13:18:42.963

如果要显示404页面，记得设置状态码。这也是我要测试的：`it { should respond_with :not_found }`

除了直接渲染 public/404 之外，还有更好的方法可以做到这一点。看看这个答案：[如何在 Rails 中重定向到 404？](https://stackoverflow.com/questions/2385799/how-to-redirect-to-a-404-in-rails)

# c# - 日期时间在 SQL Server 表中保存错误

> ID：11450695
> 
> 赞同：0
> 
> 时间：2012-07-12T11:18:19.123
> 
> 标签：c#, sql-server

我在 SQL Server 2008中有一个名为`CreateDate`(DateTime)的列。`table1`

使用存储过程，我尝试将其更新`CreateDate`为参数，如下所示：

```
SqlParameter spdtCreateDate = cmd.Parameters.Add("@dtDreateDate", SqlDbType.DateTime);
spdtCreateDate.Value = dtCreateDate; 
```

从 C# 中的应用程序发送`CreateDate='6/29/2012 12:00:00 AM'`，但是当我签入数据库时​​，`CreateDate`设置`2012-06-28 23:00:00.000`为`2012-06-29 00:00:00.000`

谁能告诉我发生了什么？

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:25:24.880

SQL Server`datetime`类型不包括任何时区信息。因此，SQL Server 客户端库假定您总是希望在其中存储本地时间。如果您已将 .NET`DateTime`值设置为具有 UTC 时区的值，则 SQL Server 客户端会在存储之前帮助您将其转换为本地时间。

可能的解决方案：

*   更改您的 .NET`DateTime`值以指定`DateTimeKind.Unspecified`或`DateTimeKind.Local`.
*   将表列和 sproc 参数数据类型更改为`datetimeoffset`（SQL 2008 或更高版本）。

# javascript - Onclick 无法使用 html 在 iphone 中的列表上工作

> ID：11450696
> 
> 赞同：0
> 
> 时间：2012-07-12T11:18:19.867
> 
> 标签：javascript, iphone, html, css, sup

我正在动态创建一个列表。我想在列表的 onclick 事件上调用一个函数。在列表中我有一个标签

标签。onclick 在 android 和 blackberry 上工作，但在 iphone 上不工作。这是示例代码

```
 htmlOutput +='<a style="display: block;" onclick="getAreaCodeClicked('+area+');">
<li style="overflow: hidden;>
<img src="Star.png" style="margin:0px;float:left;" />
<p style="white-space:nowrap;">
   <label style="font-size:11px;color:black;">'+officeName+'</label><br>
   <label style="font-size:8px;color:#A1A1A1;">'+officeLocation+'</label>
</p>
</li></a> 
```

谁能告诉我出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:23:01.713

iPhone 浏览器不使用`onclick`事件，它使用`ontouch`. 而是关注那个事件。

# c++ - 删除指针的问题（它指向的内容）

> ID：11450697
> 
> 赞同：1
> 
> 时间：2012-07-12T11:18:36.073
> 
> 标签：c++, delete-operator

如何删除我在以下代码中分配的指针：

```
char* ptr;
ptr=new char(65);   // memory for one char is created and is assigned 'A'
strcpy(ptr,"asdf"); // how can string of length 4 chars are copied
delete ptr;         // why am I getting debug error of Heap corruption detected 
```

我正在使用 Visual C++ 2005

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T11:20:48.660

您正在分配单个字符而不是数组。利用：

```
char* ptr;
ptr=new char[65];
strcpy(ptr,"asdf");
delete[] ptr; 
```

就像现在一样，您将第一个写入`a`分配的字符，其余写入一些从未分配给您的任意内存。运行时检测到（在调试版本中）并抱怨。

对我的答案的问题部分发表评论：

C++ 没有任何机制来识别问题代码中的潜在错误。编译器知道传递给的缓冲区大小的唯一方法`strcpy`是使用静态分析，这可能有效，也可能无效。但即使是这样，编译器也不知道`strcpy`. 所以在编译时，它不能警告你这个错误。

现在，当缓冲区`strcpy`在运行时传递给时，`strcpy`无法判断该缓冲区有多大。所以它只是假设调用者提供了一个合适的缓冲区，然后继续复制。如果幸运的话，由于对未分配页面的写入，溢出分配的缓冲区将导致立即崩溃。如果没有，你会得到一个内存损坏。

您确实得到的错误是调试构建中使用的机制的结果：内存管理器分配的字节数比您要求的多一些，并将特殊模式写入它们。然后，当分配的内存被释放时，它会检查该模式是否仍然存在。如果没有，它会抱怨用户的代码已写入它们。在发布版本中，您没有那些额外的检查，并且此类错误可能会导致损坏而不会被注意到。

避免这种情况的唯一方法是编写更安全的代码：

1.  使用更高级别的构造，例如`std::string`. 他们为您进行内存管理，使您不必处理低级字符串函数。
2.  例如，使用 Microsoft 的（非标准）*安全*变体 - [strcpy_s](http://msdn.microsoft.com/en-us/library/td1esda9%28v=vs.80%29.aspx)。这些函数也会占用缓冲区的大小，如果不足则失败 - 不会造成任何损害。
3.  使用（标准）[strncpy](http://www.cplusplus.com/reference/clibrary/cstring/strncpy/)，将缓冲区的大小作为最后一个参数传递，并检查返回值以查看已复制了多少字符。与前面的建议一样，指定错误的缓冲区大小仍然会造成损坏。
4.  请记住，如果您想自己动手，C++ 会很乐意给您一把指向下方的枪。必须小心处理原始缓冲区、指针和低级字符串函数。语言不会把你从自己的错误中拯救出来。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T11:21:34.663

因为您通过尝试将 4 个字符“asdf”（如果计数为空终止符实际上是 5 个）填充到一个只能容纳 1 个字符的内存块中，从而破坏了堆：

```
strcpy(ptr,"asdf"); 
```

*更新：*

您应该根据需要（或更多）分配尽可能多的内存。如果您需要将 4 个字符的字符串复制到内存块中，则应确保内存块足够大以保存它，因此，在您的情况下，您应该使用

```
ptr=new char[5]; 
```

分配 5`char`秒（字符串的 4 个字符 + 每个字符串末尾应有 1 个空终止符），并释放分配的内存，您应该使用

```
delete[] ptr; 
```

`[]`意味着您要删除一个字符数组，而不仅仅是一个字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T11:20:01.823

这实际上是错误的。你要：

```
ptr=new char[65];   // memory for one char is created and is assigned 'A'
strcpy(ptr,"asdf"); // how can string of length 4 chars are copied
delete[] ptr; 
```

更好的：

```
char ptr[65];
strcpy(ptr,"asdf"); 
```

最好的：

```
std::string str("asdf"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T11:33:51.077

这是内存损坏的典型案例。堆要具体。`ptr`仅分配了 1 个字节，而您正在执行溢出该 1 个字节的字符串复制操作。

您的程序不一定会立即崩溃，但会导致随机崩溃或未定义的行为。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-12T11:46:21.347

首先，您分配`ptr`了一个字节。并为其分配了“A”。

然后尝试将大小为 5 的字符串复制到`ptr`using `strcpy`.

您可能想知道为什么它没有在`strcpy`调用本身时崩溃。原因是`strcpy`不对分配的大小执行任何验证，因此由于*缓冲区溢出而导致***未定义的行为**。

 *参考：[strcpy 中的分段错误](https://stackoverflow.com/questions/718490/segmentation-fault-in-strcpy)

```
char* ptr;
ptr=new char[5];   // I see no point in assigning 'A' as you replace it in next statement.
strcpy(ptr,"asdf");
delete[] ptr;         // delete[] is used as memory is allocated for arrays of elements. 
```

此外，在 Visual Studio 2005 中，您可以使用安全的替代方法`strcpy`, `strcpy_s`.

参考：[strcpy_s、wcscpy_s、_mbscpy_s](http://msdn.microsoft.com/en-us/library/td1esda9%28v=vs.80%29.aspx)*

# nuget - TeamCity 与 NuGet，缺少参考

> ID：11450699
> 
> 赞同：7
> 
> 时间：2012-07-12T11:18:51.753
> 
> 标签：nuget, teamcity-7.0

我正在尝试让我的 TeamCity 服务器从 NuGet 获取包，因此我不必在我的存储库中包含所有程序集。

最初似乎一切正常，但是当 MSBuild 步骤开始时，找不到所需的程序集/包。

我已将包文件夹添加到我的存储库中，并尝试启用我的项目以“启用 NuGet 包还原”，如此处所述：

[http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages)

两者似乎都不起作用。当我查看工作目录（）中的packages文件夹时，它是空的，所以没有提取任何包？

以下是来自 nuget 任务的日志：

```
[09:11:44][Step 1/2] install: Installing NuGet packages for ApplicationBoilerplate\packages.config
[09:11:44][install] NuGet command: C:\TeamCity\buildAgent\tools\NuGet.CommandLine.2.0.0.nupkg\tools\NuGet.exe install C:\TeamCity\buildAgent\work\76a8f67cab97e73b\ApplicationBoilerplate\packages.config -OutputDirectory C:\TeamCity\buildAgent\work\76a8f67cab97e73b\packages
[09:11:44][install] Starting: C:\TeamCity\buildAgent\temp\agentTmp\custom_script862718012095619696.cmd
[09:11:44][install] in directory: C:\TeamCity\buildAgent\work\76a8f67cab97e73b\ApplicationBoilerplate
[09:11:45][install] Process exited with code 0 
```

包文件夹应该保持空（某种临时存储？）还是应该包含下载的包？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T12:28:24.540

从 NuGet 2.0 开始，您需要做的不仅仅是文档页面所描述的。这是[有关更改的博客](http://blog.nuget.org/20120518/package-restore-and-consent.html)。

我写了一篇关于使用环境变量启用包还原的帖子： [在 CC.NET 上启用 NuGet PackageRestore](http://ihadthisideaonce.com/2012/06/20/enable-nuget-packagerestore-on-cc-net/)

Rob Reynolds 创建了一个 NuGet 包，可以自动修复这个问题，但我还没有尝试过。

[NuGet 启用包还原（真实）2.0.0](http://nuget.org/packages/NuGetEnablePackageRestore)

如果您的 TeamCity 服务器无法访问 Web，那么您也可能遇到此问题：

[NuGet 包还原假定 Internet 访问](http://nuget.codeplex.com/workitem/2390)

# c# - C# 本地化不适用于中文操作系统，但适用于中文语言包

> ID：11450703
> 
> 赞同：0
> 
> 时间：2012-07-12T11:19:06.350
> 
> 标签：c#, localization, language-packs

我有一个使用资源文件来本地化文本的应用程序。EXE 在单独的项目中，资源在单独的项目中。当部署在带有中文语言包的英文操作系统上时，它可以正常工作，但是当部署在完整的中文操作系统上时，它不会显示中文文本。我做了一个程序集绑定日志，发现系统正在寻找zh-cn dll，并且成功找到并加载了这个dll。

如果它查询 DLL，为什么它仍然回退到英语？它这样做的唯一原因是它没有找到查询的字符串。任何想法出了什么问题？

我正在使用带有 PublicResXFileCodeGenerator 的标准资源文件来编译我的资源，并且我正在使用资源属性来引用字符串，而且我没有明确传递任何文化信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T14:14:55.667

我的问题解决了。这就是发生的事情。我们的构建脚本在所有 DLL 上设置了验证码签名，我们没有对 zh-cn 和 ja 资源 dll 进行验证码签名。所以看起来.net 没有获取 DLL 并默认为英语。

# javascript - 使用 html 5 和 webGL 构建信息建模

> ID：11450711
> 
> 赞同：4
> 
> 时间：2012-07-12T11:19:37.493
> 
> 标签：javascript, html, webgl, 3d-modelling, bim

我们必须构建一个 web 应用程序，它的工作方式有点像[bim surfer](http://bimsurfer.org/)并具有额外的功能。它应该能够以 3D 形式显示具有实时图形的 IFC 文件，这与[他们网站上显示的不同。](http://bimserver.github.com/bimsurfer-demo/)

另一个功能是显示虚拟演练。我的意思是参考 bimsurfer，该应用程序应该能够将我从前门带到里面的任何部分，就好像我走进里面一样。我已经检查了 webGL。还有其他更适合此目的的技术吗？

并不是我发现了 WebGL 的不足，只是在思考我们的项目是否有更好的选择。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T23:45:47.213

**还有其他更适合此目的的技术吗？**
这是非常模糊的。有几种方法可以查看它：

> **WebGL 是否能够按照您的描述进行演练？**
> 绝对地。
> 
> **是否有更适合渲染家庭演练的低级 3D API？**
> 不会。在 Web 上显示 3D 内容的每个低级选项（WebGL、Silverlight、Stage 3D）都将具有大致相同的功能。它们都使用着色器渲染三角形。在这个级别上关于技术的决定基于其他因素：你喜欢用什么语言编程？你的目标平台是什么？您是否需要与任何其他库进行互操作？您是否有尝试使用的遗留代码？等等
> 
> **是否有高级 3D API 可以更轻松地呈现家庭演练？**
> WebGL 有许多框架可以抽象出 API 的一些复杂性。[ThreeJS](https://github.com/mrdoob/three.js/)是最常用的一种，但还有很多其他的。您在这里的选择应该主要是关于您希望为您处理 API 的哪些部分？（网格格式？相机处理？照明和材质系统？）如果您想超越 WebGL，那么值得关注[Unity](http://unity3d.com/) ，它是一个非常完整的场景管理系统，具有出色的工具。我猜 Stage 3D 和朋友们也有一些高级别的支持，但我对他们的生态系统还不够熟悉。
> 
> **是否有任何现有的软件包可以渲染一个家并飞过它？**
> 对于网络？从来没听说过。

如果您对这些特定主题有任何疑问，请随时提问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-06T12:29:46.173

我在搜索类似主题时提出了您的问题。如果您还没有找到合理的解决方案，我建议使用[ifcOpenShell将 IFC 文件转换为 .dae 和/或 .obj/mtl 文件，这些文件可以在](http://ifcopenshell.org/ifcconvert.html)[ThreeJs](http://threejs.org/)等一些开源 WebGL 库中轻松呈现。此外，@Rizzo 提供的链接也很有用。

# jquery - 通知 JSF 服务器端有关 Jquery/Ajax 对 (DOM) 客户端状态所做的更改

> ID：11450714
> 
> 赞同：2
> 
> 时间：2012-07-12T11:19:47.477
> 
> 标签：jquery, dom, jsf-2, rich-client-platform

使用像 JSF 这样的基于组件的框架，可以定义一个复选框的组件：

```
<h:selectManyCheckbox value="#{user.favNumber1}">
    <f:selectItem itemValue="1" itemLabel="Number1 - 1" />
    <f:selectItem itemValue="2" itemLabel="Number1 - 2" />
    <f:selectItem itemValue="3" itemLabel="Number1 - 3" />
</h:selectManyCheckbox> 
```

生成的 (x-html) 代码如下所示：

```
<table>
<tr>
  <td>
    <input name="j_idt6:j_idt10" id="j_idt6:j_idt10:0" value="1" type="checkbox" />
    <label for="j_idt6:j_idt10:0" class=""> Number1 - 1</label></td>
  <td>
    <input name="j_idt6:j_idt10" id="j_idt6:j_idt10:1" value="2" type="checkbox" />
    <label for="j_idt6:j_idt10:1" class=""> Number1 - 2</label></td>
  <td>
    <input name="j_idt6:j_idt10" id="j_idt6:j_idt10:2" value="3" type="checkbox" />
    <label for="j_idt6:j_idt10:2" class=""> Number1 - 3</label></td>
  <td>
</tr>
</table> 
```

一个 Jquery 函数在一个事件（单击“按钮”）上更改此组件的状态（假设值为“1”的框）：

```
<script>  // or in $(document).ready(){}
   $('#button').click(function(){ 
       var $checkbox = $(this).find('#j_idt6:j_idt10:0');
       $checkbox.attr('checked', !$checkbox.attr('checked'));
   });
</script> 
```

如何通知 JSF 端客户端状态已更改。在这个级别，JSF 仍然认为复选框的值为 0，而它现在的值为 1。这会导致状态不一致......

我有什么选择？

我想到了 JSF 在其他（Rich-、Primes-、MyFaces）上的 AJAX- 支持，但我仍然愿意使用它，因为我知道要更新我的组件，因为我正在构建一个具有许多功能的富客户端（显示操作、Jquery UI 小部件、Web 远程处理、动态行为、Web 服务、视觉效果等）。DOM 客户端状态应该被大量操作，而 Jquery 是必须的……所以它不能被搁置一旁。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T11:32:55.550

由于您使用的是 JSF2，因此您应该使用[f:ajax](http://www.mkyong.com/jsf2/jsf-2-0-ajax-hello-world-example/)（谷歌有关它的更多信息）

像这样（在你的情况下不需要jquery）

```
<h:selectManyCheckbox value="#{user.favNumber1}">
    <f:selectItem itemValue="1" itemLabel="Number1 - 1" />
    <f:selectItem itemValue="2" itemLabel="Number1 - 2" />
    <f:selectItem itemValue="3" itemLabel="Number1 - 3" />
    <f:ajax listener="#{user.someMethod}" />
</h:selectManyCheckbox> 
```

你的`user`豆子在哪里

```
public void someMethod(AjaxBehaviorEvent ev) {
    System.out.println(favNumber1);
} 
```

# utf-8 - 在 Windows 中，我可以将文件转换为 linux 的 UTF-8 吗？

> ID：11450720
> 
> 赞同：-1
> 
> 时间：2012-07-12T11:20:10.420
> 
> 标签：utf-8

我正在将窗口的 UTF-8 文本文件发送给使用 linux 的朋友。
他要我发送 linux 的 UTF-8。
我怎样才能在windows中轻松做到这一点？
有人可以推荐一些软件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:26:09.033

操作系统之间关于 UTF-8 没有区别，只有一个 UTF-8。

您可能有两种问题：

*   行尾的差异（`CR/LF`适用于 windows 和`LF`linux）
*   一些愚蠢的 Windows 软件在 UTF-8 文件的开头添加了 BOM（字节顺序掩码）

大多数 Windows 文本编辑器允许您在设置中定义文件的保存方式。检查您没有编写“BOM Unicode”，并且您将行尾写为`LF`.

# php - PHP BB 代码到 HTML 脚本错误

> ID：11450724
> 
> 赞同：-1
> 
> 时间：2012-07-12T11:20:31.200
> 
> 标签：php, html, bbcode

我的一个朋友正在使用一个 bb 脚本，它将普通文本回显到 bb 代码中。他给了我脚本，但似乎不明白如何让它工作。

这是脚本

```
 define ("EMOTICONS_DIR", "img/smilies/");
    function bb($text) {

  $text = $poke1['status'];
        $text = htmlspecialchars($text);
        $text = trim($text);

        if (!function_exists('escape')) {
            function escape($s) {
                global $text;
                $text = strip_tags($text);
                $code = $s[1];
                $code = htmlspecialchars($code);
                $code = str_replace("[", "&#91;", $code);
                $code = str_replace("]", "&#93;", $code);
                return '<pre><code>'.$code.'</code></pre>';
            }   
        }
       $pattern  = '#\b(([\w-]+://?|www[.])[^\s()<>]+(?:\([\w\d]+\)|([^[:punct:]\s]|/)))#';
       $callback = create_function('$matches', '
           $url = array_shift($matches);

           $text = preg_replace("/^www./", "", $text);
           $text = $url;

    if (preg_match("/\[/i", $url) || preg_match("/\]/i", $url)) {
    return($url);
    }else{
    return sprintf(\'<a href="%s" target="_blank" rel="nofollow">%s</a>\', $url, $text);
    }
       ');

    $text = preg_replace_callback($pattern, $callback, $text);

        $text = preg_replace_callback('/\[code\](.*?)\[\/code\]/ms', "escape", $text);

        // Smileys to find...
        $in = array(                 ":3:",     
                         ":@",
                         ":bad:",
                         ":'(",
                         ":eee:",
                         ":error:",
                         ":excited:",
                         ":explode:",
                         ":hey:",
                         ":lol:",
                         ":love:",
                         ":magikarp:",
                         ":ohnoes:",
                         ":oo:",
                         ":pika:",
                         ":(",
                         ":suck:",
                         ":loo:",
                         ";)",
                         ":wobby:",
                         ":wobby2:",
                         ":woo:",
                         ":wtf:",
                         ":yes:",
                         "viewform?formkey=",
                         "google.com/spreadsheet/",
                         "tpsrpgo","tpmrpg","pkmnmoon","pokemonvortex","weebly","nsigma",
                         "amp;"
        );
        // And replace them by...
        $out = array(            '<img src="'.EMOTICONS_DIR.'3.gif" />',
                         '<img src="'.EMOTICONS_DIR.'angry.gif" />',
                         '<img src="'.EMOTICONS_DIR.'bad.gif" />',
                         '<img src="'.EMOTICONS_DIR.'cry.gif" />',
                         '<img src="'.EMOTICONS_DIR.'eee.gif" />',
                         '<img src="'.EMOTICONS_DIR.'error.gif" />',
                         '<img src="'.EMOTICONS_DIR.'excited.gif" />',
                         '<img src="'.EMOTICONS_DIR.'explode.gif" />',
                         '<img src="'.EMOTICONS_DIR.'hey.gif" />',
                         '<img src="'.EMOTICONS_DIR.'lol.gif" />',
                         '<img src="'.EMOTICONS_DIR.'love.gif" />',
                         '<img src="'.EMOTICONS_DIR.'magikarp.gif" />',
                         '<img src="'.EMOTICONS_DIR.'noo.gif" />',
                         '<img src="'.EMOTICONS_DIR.'oo.gif" />',
                         '<img src="'.EMOTICONS_DIR.'pikapika.gif" />',
                         '<img src="'.EMOTICONS_DIR.'sad.gif" />',
                         '<img src="'.EMOTICONS_DIR.'suck.gif" />',
                         '<img src="'.EMOTICONS_DIR.'toilet.gif" />',
                         '<img src="'.EMOTICONS_DIR.'wink.gif" />',
                         '<img src="'.EMOTICONS_DIR.'wobby.gif" />',
                         '<img src="'.EMOTICONS_DIR.'wobby2.gif" />',
                         '<img src="'.EMOTICONS_DIR.'woo.gif" />',
                         '<img src="'.EMOTICONS_DIR.'wtf.gif" />',
                         '<img src="'.EMOTICONS_DIR.'yes.gif" />',
                         '<b><br>Ignore and report this message to Da Man!</b><br><br>',
                         '<b><br>Ignore and report this message to Da Man!</b><br><br>',
                         'lol','lol','lol','lol','lol','lol',
                         ''
    );
        $text = str_replace($in, $out, $text);

        // BBCode to find...
        $in = array(     '/\[b\](.*?)\[\/b\]/ms',   
                         '/\[B\](.*?)\[\/B\]/ms',
                         '/\[i\](.*?)\[\/i\]/i',
                         '/\[u\](.*?)\[\/u\]/i',
                         '/\[img\](.*?)\[\/img\]/i',
                         '/\[url\="?(.*?)"?\](.*?)\[\/url\]/ms',
                         '/\[size\=xx-small\](.*?)\[\/size\]/ms',
                         '/\[size\=x-small\](.*?)\[\/size\]/ms',
                         '/\[size\=small\](.*?)\[\/size\]/ms',
                         '/\[size\=medium\](.*?)\[\/size\]/ms',
                         '/\[size\=large\](.*?)\[\/size\]/ms',
                         '/\[size\=x-large\](.*?)\[\/size\]/ms',
                         '/\[size\=xx-large\](.*?)\[\/size\]/ms',
                         '/\[color\="?(.*?)"?\](.*?)\[\/color\]/ms',
                         '/\[gradient\="?(.*?)"?\ color="?(.*?)"?\](.*?)\[\/gradient\]/ms',
                         '/\[font\="?(.*?)"?\](.*?)\[\/font\]/ms',
                         '/\[align\="?(.*?)"?\](.*?)\[\/align\]/ms',
                         '/\[quote\="?(.*?)"?\ id="?(.*?)"?\ dateline="?(.*?)"?\ pid="?(.*?)"?\](.*?)\[\/quote\]/ms',
                         '/\[quote\](.*?)\[\/quote\]/ms',
                         '/\[youtube\](.*?)\[\/youtube\]/ms',
                         '/\[list\=(.*?)\](.*?)\[\/list\]/ms',
                         '/\[list\](.*?)\[\/list\]/ms',
                         '/\[\*\]\s?(.*?)\n/ms'

        );
        // And replace them by...
        $out = array(    '<strong>\1</strong>',
                         '<strong>\1</strong>',
                         '<em>\1</em>',
                         '<u>\1</u>',
                         '<img src="\1" alt="\1" />',
                         '<a href="\1" rel="nofollow">\2</a>',
                         '<font size="1">\1</font>',
                         '<font size="2">\1</font>',
                         '<font size="3">\1</font>',
                         '<font size="4">\1</font>',
                         '<font size="5">\1</font>',
                         '<font size="6">\1</font>',
                         '<font size="7">\1</font>',
                         '<font color="\1">\2</font>',
                         '<span class="gradient#\1#\2">\3</span>',
                         '<font face="\1">\2</font>',
                         '<div align="\1">\2</div>',
    '<blockquote><cite><span>\3</span>\1 Wrote: <a href="viewthread.php?id=\2#\4" class="quick_jump" rel="nofollow">&nbsp;</a></cite>\5</blockquote>',
                         '<blockquote>\1</blockquote>',
    '<object width="560" height="340"><param name="movie" value="http://www.youtube.com/v/\1&hl=en&fs=1&"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed src="http://www.youtube.com/v/$1&hl=en&fs=1&" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="320" height="320"></embed></object>',
                         '<ol start="\1">\2</ol>',
                         '<ul>\1</ul>',
                         '<li>\1</li>',
        );

        $text = preg_replace($in, $out, $text);

        // paragraphs
        $text = str_replace("\r", "", $text);

        // clean some tags to remain strict
        // not very elegant, but it works. No time to do better ;)
        if (!function_exists('removeBr')) {
            function removeBr($s) {
                return str_replace("<br />", "", $s[0]);
            }
        }   
        $text = preg_replace_callback('/<pre>(.*?)<\/pre>/ms', "removeBr", $text);
        $text = preg_replace('/<p><pre>(.*?)<\/pre><\/p>/ms', "<pre>\\1</pre>", $text);

        $text = preg_replace_callback('/<ul>(.*?)<\/ul>/ms', "removeBr", $text);
        $text = preg_replace('/<p><ul>(.*?)<\/ul><\/p>/ms', "<ul>\\1</ul>", $text);

        $text = nl2br($text);
        $text = stripslashes($text);
        return $text;
    } 
```

所以我在顶部的 $text 中输入文本 [b] hello [/b] 并且在脚本之后什么也没有得到我像这样回显它

```
 echo bb($text); 
```

但是我没有打印出来......如果我只是打印出 $text = $poke1['status']; 它会打印出来，但只有普通文本，例如 [b] hello [/b]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:23:36.377

从代码中删除或注释`$text = $poke1['status'];`（第 4 行）。您正在覆盖传递给函数的数据。

前几行应该是

```
define ("EMOTICONS_DIR", "img/smilies/");
function bb($text) {

     // $text = $poke1['status']; => Commented out
     $text = htmlspecialchars($text);
     $text = trim($text); 
```

# java - 在 Java 中分块发送文件

> ID：11450727
> 
> 赞同：0
> 
> 时间：2012-07-12T11:20:39.560
> 
> 标签：java

我得到了这个客户端应用程序，它将我的文件完全发送到服务器。但我希望它分块发送文件。这是我的客户代码：

```
byte[] fileLength = new byte[(int) file.length()];  

        FileInputStream fis = new FileInputStream(file);  
        BufferedInputStream bis = new BufferedInputStream(fis);

        DataInputStream dis = new DataInputStream(bis);     
        dis.readFully(fileLength, 0, fileLength.length);  

        OutputStream os = socket.getOutputStream();  

        //Sending size of file.
        DataOutputStream dos = new DataOutputStream(os);   
        dos.writeLong(fileLength.length);
        dos.write(fileLength, 0, fileLength.length);     
        dos.flush();  

        socket.close(); 
```

那么如何让客户端分块发送我的文件呢？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:39:59.517

尝试分部分从客户端发送文件，例如

```
int count;
byte[] buffer = new byte[8192];
while ((count = in.read(buffer)) > 0)
{
  out.write(buffer, 0, count);
} 
```

并在服务器上重新组装。

[Apache Commons](http://commons.apache.org/fileupload/)支持流式传输，因此它可能会有所帮助。

# php - PHP 下一个/上一个图像循环

> ID：11450736
> 
> 赞同：0
> 
> 时间：2012-07-12T11:21:12.703
> 
> 标签：php, image, function, loops

我创建了一个很好的下一个和上一个图像链接。但我希望他们都循环回到开头或结尾。所以说我有 image101、image 202 和 image243，一旦我点击 image243，它就会回到 image101。

我想和以前一样，当我点击 Image101 时，我希望链接返回到 image243。（自我解释）。

我该怎么做呢？

```
<?php   $sql = "SELECT id FROM albums WHERE user_id=".$user['id']." ORDER BY id ASC LIMIT 1";   $query = mysql_query($sql)or die(mysql_error());    

while($album = mysql_fetch_array($query)){ ?>

                    <?php
                $photo_sql = "SELECT photo_id FROM userphotos WHERE photo_id > ".$_GET['pid']." AND photo_ownerid = ".$user['id']." AND album_id=".$album['id']." ORDER BY photo_id ASC LIMIT 1 ";

                $photo_query = mysql_query($photo_sql)or die(mysql_error());
                $photo_next=mysql_fetch_array($photo_query);

echo "<a href='photo.php?pid=".$photo_next['photo_id']."'>Next</a>";

                $photo_sql = "SELECT photo_id FROM userphotos WHERE photo_id < ".$_GET['pid']." AND photo_ownerid = ".$user['id']." AND album_id=".$album['id']." ORDER BY photo_id DESC LIMIT 1 ";

                $photo_query = mysql_query($photo_sql)or die(mysql_error());
                $photo_prev=mysql_fetch_array($photo_query);

                    echo " | <a href='photo.php?pid=".$photo_prev['photo_id']."'>Prev</a>";

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T13:03:40.843

为什么不从 PHP 中做到这一点？无需使用所有这些多余的 MySQL 查询，您只需获取照片 ID 并使用 PHP：

```
$photo_sql = "SELECT photo_id FROM userphotos WHERE photo_ownerid = ".$user['id']." AND album_id=".$album['id']." ORDER BY photo_id ASC"
$photo_result = mysql_query($photo_sql) or die(mysql_error());
while($row=mysql_fetch_array($photo_result)) {
   $photos[]=$row[0];
}
$total = mysql_num_rows($photo_result);

$current = 2; // whatever your position is in the photo array

echo '<img src="'.$photos[$current].'" alt="my image!" />'; // display current photo

$next = ($current+1) % $total; // modulo
$prev = (($current-1) < 0) ? $total : $current -1;

echo "<a href='photo.php?pid=".$next."'>Next</a>";
echo " | <a href='photo.php?pid=".$prev."'>Prev</a>"; 
```

只是为了解释一下，我们使用[模数](http://en.wikipedia.org/wiki/Modular_arithmetic)来获得正确的下一页。获取上一页不言自明：如果我们低于零，请使用 $total 数量的照片。

在数据库方面，以这种方式使用它比所有这些大于小于查询的查询更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:28:37.957

您可以像这样添加到第一张图片的链接：

```
$photo_sql = "SELECT MIN(photo_id) FROM userphotos WHERE photo_ownerid = ".$user['id']
$photo_query = mysql_query($photo_sql)or die(mysql_error());
$photo_first =mysql_fetch_array($photo_query);
echo "<a href='photo.php?pid=".$photo_first['photo_id']."'>First</a>"; 
```

当然，您可以使用 MAX 获取最后一张照片。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T11:32:23.497

这将为您提供下一个条目，但也是第一个条目，这意味着如果没有 NEXT，它将给出第一个条目。

```
$photo_sql = "SELECT photo_id FROM userphotos WHERE photo_id > ".$_GET['pid']." AND photo_ownerid = ".$user['id']."  ORDER BY photo_id ASC LIMIT 1 ";
$photo_sql. = "UNION SELECT photo_id FROM userphotos WHERE photo_ownerid = ".$user['id']." ORDER BY photo_id ASC LIMIT 1 "; 
```

然后在之前用 ORDER BY photo_id DESC 做一个 UNION

# http - 内容协商被破坏了吗？

> ID：11450737
> 
> 赞同：4
> 
> 时间：2012-07-12T11:21:13.903
> 
> 标签：http, web-crawler, content-negotiation

我最近对网络爬虫感兴趣，但有一件事对我来说不是很清楚。想象一个简单的爬虫，它将获取页面，从中提取链接并将它们排队以供以后以相同的方式处理。

当某些链接不会指向另一个页面而是指向某个资产或其他类型的静态文件时，爬虫如何处理这种情况？它怎么会知道？它可能不想下载这种可能很大的二进制数据，甚至也不想下载 xml 或 json 文件。内容协商如何落入此地？

当我向它发出请求时，我认为内容协商应该在网络服务器端起作用，如果它不能满足我的要求，它应该向我发回 html 响应或错误请求状态，没有其他方法是可以接受的，但这不是它的工作`example.com/foo.png`方式`Accept: text/html`真实的生活。无论如何，`Content-Type: image/png`即使我告诉它我只接受它，它也会将二进制数据发回给我`text/html`。为什么网络服务器像这样工作而不是强制我要求的正确响应？

内容协商的实现是否被破坏或应用程序有责任正确实现它？

真正的爬虫是如何工作的？提前发送 HEAD 请求以检查链接另一侧的内容被视为不切实际的资源浪费。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T12:02:21.820

不是“错误请求”，正确的响应是 406 Not Acceptable。

HTTP 规范声明它应该发回这个规范[ [1](https://www.rfc-editor.org/rfc/rfc2616#section-14.2) ]，但大多数实现不这样做。如果你想避免下载你不感兴趣的内容类型，你唯一的选择确实是先做一个 HEAD。由于您可能抓取了这些图像，因此您也可以做出一些明智的猜测，即它实际上是一张图像（例如，它出现在`<img>`标签中）。

你也可以像往常一样启动请求，一旦你注意到你正在取回二进制数据，就切断 TCP 连接。但我不确定这是一个多么好的主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T22:35:37.897

爬虫必须时刻留意不良信息：一些网站有一个名为 /robots.txt 的 10 兆字节电影。即使内容协商实际上是在网络服务器中实现的，许多网络服务器配置了不正确的内容类型，许多文件具有错误的扩展名，并且文件的开头是合理的并不意味着它不会变成二进制文件。巨大。

# c# - 如何使用 XAML 向控件添加资源，类似于 ctrl.Resources.Add()

> ID：11450739
> 
> 赞同：0
> 
> 时间：2012-07-12T11:21:24.417
> 
> 标签：c#, wpf, xaml

目前，我可以使用类似于以下内容的控件向控件添加资源：

```
Button b = new Button();
b.Resources.Add("item", currentItem); 
```

我想用 XAML 来做这件事。我试过类似的东西

```
<Button Content="Timers Overview"   Name="btnTimerOverview">
    <Button.Resources>
        <ResourceDictionary>
            <!-- not sure what to add here, or if this is even correct -->               
            <!-- I'd like to add something like a <string, string> mapping -->               
            <!-- like name="items" value="I am the current item."  --> 
        </ResourceDictionary>
    </Button.Resources>
</Button> 
```

但我没有比这更进一步。有没有办法在 XAML 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T11:25:57.903

您不需要在 Button.Resources 下定义 ResourceDictionary

您可以像这样添加任何类型的资源：

```
<Button Content="Timers Overview"   Name="btnTimerOverview">
    <Button.Resources>
        <!--resources need a key -->
        <SolidColorBrush x:Key="fontBrush" Color="Blue" />
        <!--But styles may be key-less if they are meant to be "implicit",
            meaning they will apply to any element matching the TargetType.
            In this case, every TextBlock contained in this Button 
            will have its Foreground set to "Blue" -->
        <Style TargetType="TextBlock">
           <Setter Property="Foreground" Value="{StaticResource fontBrush}" />
        </Style>
        <!-- ... -->
        <sys:String x:Key="myString">That is a string in resources</sys:String> 
    </Button.Resources>
</Button> 
```

映射`sys`为：

```
xmlns:sys="clr-namespace:System;assembly=mscorlib" 
```

现在，我想我了解您希望从某些应用程序设置/配置中加载该字符串：它不是恒定的。

为此，它有点棘手：
要么你有静态可用的字符串，然后你可以这样做：

```
<TextBlock Text="{x:Static local:MyStaticConfigClass.TheStaticStringIWant}" /> 
```

或者它在一个非静态对象中，你需要使用`Binding`和一个`IValueConverter`资源名称为`ConverterParameter`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T11:30:12.280

尝试这个：

```
<Window x:Class="ButtonResources.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525"
        xmlns:system="clr-namespace:System;assembly=mscorlib" 
        >
    <Grid>
        <Button Content="Timers Overview"   Name="btnTimerOverview">
            <Button.Resources>
                <ResourceDictionary>
                    <!-- not sure what to add here, or if this is even correct -->
                    <!-- I'd like to add something like a <string, string> mapping -->
                    <!-- like name="items" value="I am the current item."  -->
                    <system:String x:Key="item1">Item 1</system:String>
                    <system:String x:Key="item2">Item 2</system:String>
                </ResourceDictionary>
            </Button.Resources>
        </Button>
    </Grid>
</Window> 
```

# blackberry - 从黑莓的网络服务下载图像

> ID：11450746
> 
> 赞同：0
> 
> 时间：2012-07-12T11:21:46.097
> 
> 标签：blackberry, imagedownload

我正在尝试从我的网络服务下载并显示图像，但出现错误：

net.rim.device.cldc.io.ssl.TLSIOException（net.rim.device.cldc.io.ssl.TLSException（net.rim.device.api.io.ConnectionClosedException：未连接））

这是我获取图像的代码：

```
public Bitmap getBitmapFromUrl(String url)
        {
        Bitmap bitmap=null;
        try
        {
            HttpConnection connection=(HttpConnection)Connector.open(url+ ";deviceside=true;ConnectionUID=S TCP");
            connection.setRequestMethod(HttpConnection.GET);
            InputStream is=connection.openInputStream();
            int length=is.available();
            System.out.println("InputStream length "+length);
            byte[] data=new byte[length];  
            System.out.println("byte data "+data);
            data=IOUtilities.streamToBytes(is); 
            System.out.println("IOUtilities data "+data);
            connection.close();
            is.close();
            bitmap=Bitmap.createBitmapFromBytes(data,0,data.length,1);
            if(bitmap!=null)
                return bitmap;
         else
                return bitmap=Bitmap.getBitmapResource("me1.jpg");
        }
        catch (Exception e) 
        {
            System.out.println("The image has not been fetched");
            return bitmap=Bitmap.getBitmapResource("me2.jpg");
        }
        } 
```

我用 Bitmap bitmap=null; 调用它 位图 = (getBitmapFromUrl(strsessionPictureUrl));

错误说连接已关闭。我想知道为什么会这样。我的代码有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:53:37.247

嗨，我认为这是连接扩展问题，所以尝试将以下两种方法添加到您的实用程序类或同一类中，并调用此方法以获得合适的扩展

```
 public static String getConnectionString()
    {            
        String connectionString = null;

        // Simulator behavior is controlled by the USE_MDS_IN_SIMULATOR variable.
        if(DeviceInfo.isSimulator())
        {                   
                        logMessage("Device is a simulator and USE_MDS_IN_SIMULATOR is false");
                        connectionString = ";deviceside=true";                  
        }    
        // Wifi is the preferred transmission method
        else if(WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED)
        {
            logMessage("Device is connected via Wifi.");
            connectionString = ";interface=wifi";
        }    
        // Is the carrier network the only way to connect?
        else if((CoverageInfo.getCoverageStatus() & CoverageInfo.COVERAGE_DIRECT) == CoverageInfo.COVERAGE_DIRECT)
        {
            logMessage("Carrier coverage.");

            String carrierUid = getCarrierBIBSUid();
            if(carrierUid == null)
            {
                // Has carrier coverage, but not BIBS.  So use the carrier's TCP network
                logMessage("No Uid");
                connectionString = ";deviceside=true";
            }
            else
            {
                // otherwise, use the Uid to construct a valid carrier BIBS request
                logMessage("uid is: " + carrierUid);
                connectionString = ";deviceside=false;connectionUID="+carrierUid + ";ConnectionType=mds-public";
            }
        }    
        // Check for an MDS connection instead (BlackBerry Enterprise Server)
        else if((CoverageInfo.getCoverageStatus() & CoverageInfo.COVERAGE_MDS) == CoverageInfo.COVERAGE_MDS)
        {
            logMessage("MDS coverage found");
            connectionString = ";deviceside=false";
        }    
        // If there is no connection available abort to avoid bugging the user unnecssarily.
        else if(CoverageInfo.getCoverageStatus() == CoverageInfo.COVERAGE_NONE)
        {
            logMessage("There is no available connection.");
        }    
        // In theory, all bases are covered so this shouldn't be reachable.
        else
        {
            logMessage("no other options found, assuming device.");
            connectionString = ";deviceside=true";
        }

        return connectionString;
    }

    /**
     * Looks through the phone's service book for a carrier provided BIBS network
     * @return The uid used to connect to that network.
     */
    public static String getCarrierBIBSUid()
    {
        ServiceRecord[] records = ServiceBook.getSB().getRecords();
        int currentRecord;

        for(currentRecord = 0; currentRecord < records.length; currentRecord++) 
        {
            if(records[currentRecord].getCid().toLowerCase().equals("ippp")) 
            {
               if(records[currentRecord].getName().toLowerCase().indexOf("bibs") >= 0)
                {
                    return records[currentRecord].getUid();
                }
            }
        }

        return null;
    } 
```

添加一次调用该函数并返回字符串作为静态

```
public static String C0NNECTION_EXTENSION="";
public Bitmap getBitmapFromUrl(String url)
{
    if(C0NNECTION_EXTENSION.equals("") )
    {
        C0NNECTION_EXTENSION= getConnectionString();
    }
    Bitmap bitmap=null;
    try
    {
         HttpConnection connection=(HttpConnection)Connector.open(url+C0NNECTION_EXTENSION);
         connection.setRequestMethod(HttpConnection.GET);
         InputStream is=connection.openInputStream();
         int length=is.available();
         System.out.println("InputStream length "+length);
         byte[] data=new byte[length];  
         System.out.println("byte data "+data);
         data=IOUtilities.streamToBytes(is); 
         System.out.println("IOUtilities data "+data);
         connection.close();
         is.close();
         bitmap=Bitmap.createBitmapFromBytes(data,0,data.length,1);
         if(bitmap!=null)
             return bitmap;
         else
             return bitmap=Bitmap.getBitmapResource("me1.jpg");
     }
     catch (Exception e) 
     {
         System.out.println("The image has not been fetched");
         return bitmap=Bitmap.getBitmapResource("me2.jpg");
     }
} 
```

# c# - 方法链的构造函数（LINQ）

> ID：11450750
> 
> 赞同：0
> 
> 时间：2012-07-12T11:22:12.843
> 
> 标签：c#, linq

我有以下查询：

```
private IEnumerable<EventSchedule> GetTodaySchedules(string tab)
{
    var today = DateTime.Now.Date;

    var result = Database.EventSchedules.Where(s => 
    s.RecurrenceStart.Value.Date <= today && 
    s.RecurrenceStart.Value.TimeOfDay > today.TimeOfDay &&
    s.RecurrenceEnd.Value.Date >= today &&
    s.BaseEvent.EndShow > DateTime.Now &&
    s.BaseEvent.IsApproved.Value && !s.IsRemoved.Value &&
    s.BaseEvent.EventsCategories.Any(c => c.EventCategory.Name == tab)).ToList();
} 
```

`EventSchedule`此查询从表中选择今天的事件。问题在于，有时`tab`是空的，并且此查询不返回任何记录。我可以写这样的东西：

```
private IEnumerable<EventSchedule> GetTodaySchedules(string tab)
    {
        var today = DateTime.Now.Date;
        if(string.IsNullOrWhiteSpace(tab))
        {
             var result = Database.EventSchedules.Where(s => 
             s.RecurrenceStart.Value.Date <= today && 
             s.RecurrenceStart.Value.TimeOfDay > today.TimeOfDay &&
             s.RecurrenceEnd.Value.Date >= today &&
             s.BaseEvent.EndShow > DateTime.Now &&
             s.BaseEvent.IsApproved.Value && !s.IsRemoved.Value).ToList();
        {
        else
        {
             var result = Database.EventSchedules.Where(s => 
             s.RecurrenceStart.Value.Date <= today && 
             s.RecurrenceStart.Value.TimeOfDay > today.TimeOfDay &&
             s.RecurrenceEnd.Value.Date >= today &&
             s.BaseEvent.EndShow > DateTime.Now &&
             s.BaseEvent.IsApproved.Value && !s.IsRemoved.Value &&
             s.BaseEvent.EventsCategories.Any(c => c.EventCategory.Name == tab)).ToList();
        }

    } 
```

但它很丑。还有其他方法吗？
谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:29:42.917

这个怎么样......你也可以像Henrik那样展示三元运算符......

```
private IEnumerable<EventSchedule> GetTodaySchedules(string tab)
{
     var today = DateTime.Now.Date;
     var result = Database.EventSchedules.Where(s => 
     s.RecurrenceStart.Value.Date <= today && 
     s.RecurrenceStart.Value.TimeOfDay > today.TimeOfDay &&
     s.RecurrenceEnd.Value.Date >= today &&
     s.BaseEvent.EndShow > DateTime.Now &&
     s.BaseEvent.IsApproved.Value && !s.IsRemoved.Value);
     if(string.IsNullOrWhiteSpace(tab))
     {
         var result1 = result.Where(s => s.BaseEvent.EventsCategories.Any(c => c.EventCategory.Name == tab))).ToList();
     }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T11:25:44.007

关于什么：

```
&& (string.IsNullOrWhiteSpace(tab) || s.BaseEvent.EventsCategories.Any(c => c.EventCategory.Name == tab)) 
```

顺便说一句，使用 IsNullOrWhiteSpace

# javascript - 拉斐尔图表，更新和替换

> ID：11450751
> 
> 赞同：1
> 
> 时间：2012-07-12T11:22:15.427
> 
> 标签：javascript, html, raphael, graphael

我有一个用拉斐尔创建的饼图。我有一个表单复选框，单击该复选框时，我想将“效果”附加到饼图中。这个例子试图通过在 inGlowFun() 之后创建一个带有渐变的圆圈来附加一个内部发光。

```
function allPie(){       

   var pie;     

        Raphael.fn.renderPie = function(cx,cy,r,values,total) {

            var canvas = this, 
                radian = Math.PI / 180,
                chart = this.set();

            function createSlice(cx, cy, r, startAngle, endAngle, params) {
                var x1 = cx + r * Math.cos(-startAngle * radian),
                    x2 = cx + r * Math.cos(-endAngle * radian),
                    y1 = cy + r * Math.sin(-startAngle * radian),
                    y2 = cy + r * Math.sin(-endAngle * radian);

                return canvas.path(["M", cx, cy, "L", x1, y1, "A", r, r, 0, +(endAngle - startAngle > 180), 0, x2, y2, "z"]).attr(params);
            }

            var angle = 90,
                process = function (j) {

                        var value = parseInt(values[j].spend, 10),
                        angleplus = 360 * value / total,
                        p = createSlice(cx, cy, r, angle - angleplus, angle, {fill: values[j].pieColour, stroke: "#FFF", "stroke-width": 1});

                    values[j].slice = p;    

                    angle -= angleplus;
                    chart.push(p);          
                };

            function glowFun(){
            canvas.circle(cx, cy, 140).attr({fill:"r#fff-#fff:96-#CCC", "stroke-width": 0});
            } 

            // creating each pie slice
            for (var i = 0, ii = values.length; i < ii; i++) {
                process(i);
            }
            //create inner gradient
            function hollowFun(){
            canvas.circle(cx, cy, 120).attr({fill:"85-#fff-#CCC", "stroke-width": 20, "stroke": "#FFF", 'opacity': 0.000001} );
            }

            // inner glow (I admit this is a bit of a hack but it keeps it simple)
            function inGlowFun(){
           canvas.circle(cx, cy, 55).attr({fill:"r#fff-#fff:85-#CCC", "stroke-width": 2, "stroke": "#FFF"});
            }
            if(box.checked){
            inGlowFun();
            }

            // returning the whole set of nodes for interactions later
            return chart;

        };

        // creating a namespace for this code so that anything we create won't effect other JavaScript on the page
        var dotNet = window.dotNet || {};

        /*
        a function that parses the data contained in the data table, creates the Raphaël object we're drawing too and calls our Raphaël plug-in
            $source - reference to the data source (an HTML table in this example)
            $container - reference to the HTML element we're creating the chart inside
        */    
        dotNet.makePie = function($source, $container, pie) {    
            var pie;
            /*
            few constannt variables for this function
                pieData - an empty array that will hold an object for each section
                totalSpend - the grand total of all the rows (calculated via code for greater accuracy)
            */
            var pieData = [],
                totalSpend = 0;

            /* 
            function to parse each table row, create HTML and attach events
                i - index of the iteraction
            */
            function prepare(i) {

                /*
                variables used for each call
                    row - jQuery object of the current table row
                    values - an empty object that will be filled with data and references associated with each row
                    head - jQuery object used to reference the th of the current row
                */
                var row = $(this),
                    values = {},
                    head = row.find('.tabh');

                // grabbing the numeric total for the row and assigning to values
                values.spend = row.find('.tdh').text();
                // each pie slice will now be styled in a CSS file -keeping style where it should be other than in JavaScript
                values.pieColour = row.find('th span').css('borderLeftColor');

                // increase total value
                totalSpend += parseInt(values.spend, 10);

                // push values into the array for access later
                pieData.push(values);

            }

            // iterate through each table row (only in the body)    
            $source.find('.tbh tr').each(prepare);

            // call the plugin to create the chart    
            var sizeman = 300
            var sizepiespace = sizeman /2
            var sizepie = sizeman / (30/13)
            if(pie){
            pie.clear();
            }
            pie = Raphael($container[0], sizeman, sizeman).renderPie(sizepiespace, sizepiespace, sizepie, pieData, totalSpend);

            // attaching an event to the Raphaël set that fades all the slice back to full opacity
            pie.mouseout(function() {
                pie.attr('opacity', 1);
            });

        };

// calling our makePie function on DOM ready
        function piefunc(){
         $(function() {
          dotNet.makePie($('table'),$('#pie'), pie);
    });
    }
   piefunc();

}

This is the checkbox that it applies to and where the pie is actually run.
            <form>
            <input type="checkbox" id="checker" onclick="checkFun();" />
            </form>

            <script type="text/javascript">

            var box = document.getElementById('checker');
        function checkFun(){
        allPie();

        }

    allPie();
    pieShower();
            </script> 
```

单击该复选框时，它确实会生成一个具有所需效果的新饼图，不幸的是，它还会将以前的版本向下推并将其保持在同一页面上，因此当您继续选中和取消选中该框时，页面上会越来越多. 在创建具有所需效果的新图表时，是否有“删除”或删除页面上已有图表的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:41:26.783

试试这个

制作`var pie`一个全局变量而不是本地变量

和之前`var pie = Raphael($container.....`

添加以下内容

```
if(pie){
    pie.clear();
} 
```

另外，您最好使用*graphael* `piechart` api而不是您当前的方式（INMO）

看看我的[jsfiddle 与悬停（发光）效果 + 点击回调](http://jsfiddle.net/vedmack/kqSEw/)

# android - 移动应用程序：安全 URL 和 AccessToken

> ID：11450755
> 
> 赞同：-1
> 
> 时间：2012-07-12T11:22:45.900
> 
> 标签：android, salesforce

我是 Salesforce 新手。我正在使用 jquery mobile 开发移动应用程序。在我的应用程序中，我正在发送一个 url 和访问令牌以从 salesforce 检索数据。我如何保护这个 url 和访问令牌。人们如何在安全审查期间尝试破解此 url 和访问令牌？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:36:41.527

您可以使用一些加密算法将数据发送到服务器，然后从服务器端他们将以与您加密数据相同的方式对其进行解密。

# oop - 什么是非继承层次结构？

> ID：11450761
> 
> 赞同：0
> 
> 时间：2012-07-12T11:23:08.160
> 
> 标签：oop

T.Budd 书中的练习：“在面向对象的继承层次结构中，每个层次都是前一层次的一种更特殊的形式。再举一个日常生活中发现的层次结构的例子，它具有这个属性。还有其他类型的层次结构在日常生活中不是继承层次结构。举一个非继承层次结构的例子。

什么是“非继承层次结构”的例子？？？组合/聚合是否合适？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:26:44.040

我明白你是要举一个现实生活中的例子。你可以想到很多事情。例如。公司的等级制度。

```
CEO - Technical Team Leader - Developer
                            - Architect
    - CFO - acountant
    - secretary of the CEO 
```

就技能而言，CEO的秘书不是更专业的CEO，开发人员也不是。

# c# - 将模型属性表达式传递给视图

> ID：11450774
> 
> 赞同：7
> 
> 时间：2012-07-12T11:23:44.217
> 
> 标签：c#, asp.net-mvc, model-view-controller, generics, asp.net-mvc-2

我希望有一种方法可以让视图以通用的方式从控制器中关注特定的模型属性。

到目前为止我所拥有的是：

* * *

## 控制器：

```
// To become an extension/base class method
private void FocusOnField<TModel, TProperty>(Expression<Func<TModel, TProperty>> fieldExpression)
{
    ViewData["FieldToFocus"] = fieldExpression;
}

...

FocusOnField((ConcreteModelClass m) => m.MyProperty); 
```

## 看法

```
 public static class ViewPageExtensions
    {
        public static MvcHtmlString FocusScript<TModel>(this ViewPage<TModel> viewPage)
        {
            if (viewPage.ViewData["FieldToFocus"] != null)
            {
                return MvcHtmlString.Create(
@"<script type=""text/javascript"" language=""javascript"">
    $(document).ready(function() {
        setTimeout(function() {
            $('#" + viewPage.Html.IdFor((System.Linq.Expressions.Expression<Func<TModel, object>>)viewPage.ViewData["FieldToFocus"]) + @"').focus();
        }, 500);
    });
</script>");
            }
            else
            {
                return MvcHtmlString.Empty;
            }
        }
    } 
```

* * *

我现在面临的问题是，在视图的`FocusScript`方法中，我不知道要关注的属性的返回类型，并且`(System.Linq.Expressions.Expression<Func<TModel, object>>)`对于任何不返回对象的属性，转换为失败。

我不能只为属性添加第二个通用参数，因为我不知道控制器希望我关注的属性的返回类型是什么。

**如何以通用方式编写我的视图扩展方法`FocusScript`，以便它可以与不同返回类型的属性一起使用？**

* * *

## 为什么会出现问题？

我知道我可以在控制器中传递我想要关注的控件的 ID，并让 javascript 读取该 ID，找到控件并关注它。但是，我不喜欢在控制器中硬编码属于视图（控件的 ID）的东西。我想告诉方法我想要什么属性，它应该知道要使用的 Id，就像视图通常获取/创建控件的 Id 一样。

假设我有一个模型：

```
class MyModel
{
    public int IntProperty { get; set; }
    public string StringProperty { get; set; }
} 
```

在控制器的不同位置，我想关注一个不同的领域：

```
FocusOnField((MyModel m) => m.IntProperty);
...
FocusOnField((MyModel m) => m.StringProperty); 
```

现在，在第一种情况下，表达式是一个返回整数的函数，在第二种情况下，它返回一个字符串。结果，我不知道将我的 ViewData["FieldToFocus"] 转换为（将其传递给`IdFor<>()`）什么，因为它根据属性而有所不同..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T06:07:33.610

我想我已经为你的问题想出了一个解决方案——它在我的环境中工作，但我不得不猜测你的代码可能看起来如何。

```
public static class ViewPageExtensions
{
    public static MvcHtmlString GetIdFor<TViewModel, TProperty>(ViewPage<TViewModel> viewPage, Expression<Func<TViewModel, TProperty>> expression)
    {
        return viewPage.Html.IdFor(expression);
    }

    public static MvcHtmlString FocusScript<TViewModel>(this ViewPage<TViewModel> viewPage)
    {
        if (viewPage.ViewData["FieldToFocus"] == null)
            return MvcHtmlString.Empty;

        object expression = viewPage.ViewData["FieldToFocus"];

        Type expressionType = expression.GetType(); // expressionType = Expression<Func<TViewModel, TProperty>>
        Type functionType = expressionType.GetGenericArguments()[0]; // functionType = Func<TViewModel, TProperty>
        Type[] functionGenericArguments = functionType.GetGenericArguments(); // functionGenericArguments = [TViewModel, TProperty]
        System.Reflection.MethodInfo method = typeof(ViewPageExtensions).GetMethod("GetIdFor").MakeGenericMethod(functionGenericArguments); // method = GetIdFor<TViewModel, TProperty>

        MvcHtmlString id = (MvcHtmlString)method.Invoke(null, new[] { viewPage, expression }); // Call GetIdFor<TViewModel, TProperty>(viewPage, expression);

        return MvcHtmlString.Create(
            @"<script type=""text/javascript"" language=""javascript"">
                $(document).ready(function() {
                    setTimeout(function() {
                        $('#" + id + @"').focus();
                    }, 500);
                });
            </script>");
    }
} 
```

也许有一种更优雅的方法，但我认为它归结为你试图将一个对象（即返回类型`ViewData["FieldToFocus"]`）转换为正确的表达式树`Expression<Func<TViewModel, TProperty>>`，但就像你说你不知道什么 TProperty应该。

同样为了完成这项工作，我必须添加另一个静态方法，`GetIdFor`因为目前我不太确定如何调用扩展方法。它只是一个调用`IdFor`扩展方法的包装器。

你可以让它不那么冗长（但可能不那么可读）。

```
object expression = viewPage.ViewData["FieldToFocus"];

MethodInfo method = typeof(ViewPageExtensions).GetMethod("GetIdFor")
    .MakeGenericMethod(expression.GetType().GetGenericArguments()[0].GetGenericArguments());

MvcHtmlString id = (MvcHtmlString)method.Invoke(null, new[] { viewPage, expression }); 
```

最后一个想法，输出`HtmlHelper.IdFor`是否会有所不同`ExpressionHelper.GetExpressionText`？我不完全理解 IdFor，想知道它是否总是会给你一个与属性名称匹配的字符串。

```
ViewData["FieldToFocus"] = ExpressionHelper.GetExpressionText(fieldExpression); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T06:41:25.063

它就像使用 LambdaExpression 一样简单。没必要走这`Expression<Func<TModel, TProperty>>`条路。

```
public static class HtmlExtensions
{
    public static string IdFor(
        this HtmlHelper htmlHelper, 
        LambdaExpression expression
    )
    {
        var id = ExpressionHelper.GetExpressionText(expression);
        return htmlHelper.ViewData.TemplateInfo.GetFullHtmlFieldId(id);
    }

    public static MvcHtmlString FocusScript(
        this HtmlHelper htmlHelper
    )
    {
        if (htmlHelper.ViewData["FieldToFocus"] != null)
        {
            return MvcHtmlString.Create(
            @"<script type=""text/javascript"">
                $(document).ready(function() {
                    setTimeout(function() {
                        $('#" + htmlHelper.IdFor((LambdaExpression)htmlHelper.ViewData["FieldToFocus"]) + @"').focus();
                    }, 500);
                });
            </script>");
        }
        else
        {
            return MvcHtmlString.Empty;
        }
    }
} 
```

然后在你的控制器中：

```
public ActionResult Index()
{
    FocusOnField((MyModel m) => m.IntProperty);
    return View(new MyModel());
} 
```

在您看来：

```
@model MyModel

@Html.FocusScript() 
```

话虽这么说，我没有评论*控制器动作正在设置焦点*这一事实。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T13:18:51.973

您可以利用开箱即用的元数据为您提供属性 ID 等。

然后在您的扩展中：

```
 public static MvcHtmlString FocusFieldFor<TModel, TValue>(
        this HtmlHelper<TModel> html,
        Expression<Func<TModel, TValue>> expression)
    {
        var metadata = ModelMetadata.FromLambdaExpression(expression, html.ViewData);
        var fullPropertyName = html.ViewData.TemplateInfo.GetFullHtmlFieldId(metadata.PropertyName);
      var jsonData = 
        @"<script type=""text/javascript"">
            $(document).ready(function() {
                setTimeout(function() {
                    $('#" + fullPropertyName + @"').focus();
                }, 500);
            });
        </script>";

        return MvcHtmlString.Create(jsonData);

    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-16T16:02:53.203

也许我遗漏了一些东西，但是由于您将字段名称传递给您的 FocusOnField 函数，您是否也可以不只传递字段名称的字符串，这将是视图中的默认 ID，然后设置 ViewData 值? 然后你的javascript可以做类似的事情......

```
<script type="text/javascript">

    onload = focusonme;
    function focusonme() {
        var element = document.getElementById(@ViewData["FieldToFocus"]);
        element.focus();
    }

</script> 
```

也许这不是你所追求的，但 JS 肯定会以这种方式工作......

# css - 如何从主脚本中为 Xquery 模块提供全局变量？

> ID：11450780
> 
> 赞同：1
> 
> 时间：2012-07-12T11:24:07.290
> 
> 标签：css, xml, xpath, xquery, saxon

目前，我通过外部变量将 2 个数据库的名称提供给我的主 xql 文件。我想将这些值传递给我的任何 XQL 模块。

例如，我可以有一个主脚本导入模块“mylib”

```
 import module namespace mylib = "http://example.org/mylib" at "myLib.xqm";

     declare variable $dbName external; 

     $mylib:print() 
```

然后我用 dbName 外部变量提供主脚本，它可以工作，但我想以某种方式将它传递给我的模块

```
 module namespace mylib = "http://example.org/mylib";

     declare variable $mylib:dbName external;

     declare function mymod:print() as xs:string  {
         $mymod:dbName
     }; 
```

如何将本地 dbName 的值绑定到模块的实例 $myLib:dbName？

我试过了 ：

*   使主文件中的变量成为全局变量，以便任何导入的模块都可以读取它们
*   在模块中声明相同的变量并尝试从主类中分配它们，例如声明变量 $mylib:dbname := $dbname
*   将模块变量声明为外部唯一，在我的主脚本中从它们中获取值，然后尝试从那里读取它

任何明显简单的解决方案？或者我是否必须为任何模块静态定义相同的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T23:10:20.503

Why not pass it as an argument to the functions?

```
mymod:print($dbname) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-10T11:51:33.197

如果您的 XQuery 处理器允许带有参数占位符的部分应用程序，您可以在映射中返回一组方法，这些方法已经将`$dbname`参数绑定到它们。

**示例模块**

```
xquery version "3.1";

module namespace mymod = "http://example.org/mymod";

declare function mymod:print ($dbname as xs:string) as xs:string  {
    $dbname
};

declare function mymod:items-by-name ($dbname as xs:string, $names as xs:string*) as xs:string  {
    collection($dbname)//item[@name = $names]
};

declare function mymod:get-bound-methods ($dbname as xs:string) as map(*) {
    map {
        (: return result of a function :)
        "print": mymod:print($dbname),
        (: return partially applied function:)
        "items-by-name": mymod:items-by-name($dbname, ?) 
    }
}; 
```

**用法**

```
import module namespace mymod = "http://example.org/mymod" at "mymod.xqm";

declare variable $dbName external; 

declare variable $local:bound := mymod:get-bound-methods($dbName);

(: print evaluates to a xs:string :)
$local:bound?print,
(: items-by-name evaluates to a function with an arity of 1 :)
$local:bound?items-by-name("a"),
$local:bound?items-by-name(("a", "sequence", "of", "names")) 
```

# javascript - 按 ID 选择动态创建的 div

> ID：11450782
> 
> 赞同：4
> 
> 时间：2012-07-12T11:24:08.520
> 
> 标签：javascript, jquery, html

我似乎无法弄清楚如何做到这一点，但我正在创建按钮，单击时将新 div 添加到包含文本框的页面。这很好用，但我想要做的是，如果用户单击 div，我希望 div id 会在警报框中弹出。代码如下。

HTML

```
 <table>
     <td>
     <ul id ="firstColumn">
                    <div id="identifier">
                    </div>
                </ul>
            </td>
            <td>
                <ul id ="secondColumn" width="5%">
                    <li><input type="button" class="formCreationButton" id="textAdd"       value="Single line text" /></li>
     </td>
     <ul>
     </table> 
```

添加 div 和文本框的 jQuery 如下，可以正常工作。

```
 $('#textAdd').click(function() {
                var newdiv = document.createElement('div');
                newdiv.innerHTML = "Textbox " + textBoxCounter + " <br><div id='container "+counter+"' class='container'><li><input type='text' value='TEXT' name='textBox " + textBoxCounter +"onclick='display(this)'></li></div></br>";

                document.getElementById("identifier").appendChild(newdiv);
                textBoxCounter++
                counter++;
            }); 
```

所以每次我点击按钮时都会创建一个新的 div 和文本框。我现在要做的是，当用户单击 div 时，将弹出一个警报框，其中包含单击的 div 的 id。显然，这不是我唯一想做的事情，而是我坚持的部分，下面是我的尝试。

```
 $(".container > div").click(function(){
                var divID = this.id;
                alert(divID);
                // do other stuff that needs to be done
            }); 
```

当我点击一个 div 时，唯一发生的事情是弹出一个警告说“内容”。我需要它包含“container1”或“container2”等内容。

无论如何，提前感谢您提供的任何帮助，非常感谢。对 jQuery 来说相当新，所以在其他人看来很简单的事情上遇到困难。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T11:25:45.117

`.on`API 可以解决问题：http: [//api.jquery.com/on/](http://api.jquery.com/on/) **演示** [http://jsfiddle.net/eqDKP/1/](http://jsfiddle.net/eqDKP/1/)

另请注意，html 表缺少`tr`标记。

希望这可以帮助`:)`

**代码**

```
 $(".container > div").on('click',function(){
                var divID = this.id;
                alert(divID);
                // do other stuff that needs to be done
            }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T11:26:12.230

`click`您应该为新创建的元素委托事件：

> .on( 事件 [, 选择器] [, 数据] , 处理程序(eventObject) )

```
$(".container").on('click', "div", function(){
     var divID = this.id;
     alert(divID);
}); 
```

# ruby-on-rails-3 - 带有 Rails 的 MongoDB

> ID：11450783
> 
> 赞同：-2
> 
> 时间：2012-07-12T11:24:11.977
> 
> 标签：ruby-on-rails-3, mongodb

我想开发 Rails 应用程序。在此之前，我在 Rails 应用程序中使用了 PostgreSQL 和 MySQL 数据库。但现在我想在我的 Rails 应用程序中使用 MongoDB。与其他数据库相比，使用 MongoDB 有什么好处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:26:58.547

这是一个很棒的 MonogoDB 介绍：

[http://openmymind.net/mongodb.pdf](http://openmymind.net/mongodb.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T12:05:56.997

我之前在一个项目中使用过 MongoDB，原因如下：

**无模式**

*   它将为您的数据库提供更大的灵活性，对您的记录可以包含的属性没有严格的规则。

**开火即忘**

*   它可以让您更快地插入数据库。

**轻松缩放**

*   它支持分片以将负载分配到更多系统，尽管我的应用程序从未达到这一点。

我发现不太好的一件事是做聚合任务。简单的聚合任务通常需要你做一个 map reduce。虽然 map reduce 并不是很糟糕，但它也没有那么快，并且可能会增加您的应用程序的复杂性。

要了解有关优缺点的更多信息，您可以查看他们的网站：

[http://www.mongodb.org/](http://www.mongodb.org/)

# jasper-reports - JasperReports：将数据源（JrBeanCollection 数据源）从 Java 程序传递到 .jasper 文件

> ID：11450788
> 
> 赞同：1
> 
> 时间：2012-07-12T11:24:26.643
> 
> 标签：jasper-reports

在这里，我试图将我的 Java 程序中的数据源提供给 jasper 文件。

这是我的代码：

```
InputStream reportStream = new FileInputStream("C:/Documents and Settings/report2.jrxml");
JRDataSource datasource = new JRBeanCollectionDataSource(allEnergy_Caliberation, true);

JasperReport report = JasperCompileManager.compileReport(reportStream);

System.out.println("above error");
JasperPrint print = JasperFillManager.fillReport(report, parameters, datasource); 
```

我需要在报告中传递数据源并想打印它的值。
同样，在**摘要**部分的同一个 jrxml 文件中，我添加了子报表，我还需要为此子报表提供值。

请通过提供步骤帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:37:49.613

终于我做到了。。

实际上数据源没有进入子报表..所以我改变了当没有数据到所有部分时的属性，没有数据......

然后我传递了我已经获取子报表记录的集合变量......通过使用`parameters.put("shape_data_all",allShape_Caliberation);`

然后我在主报告中创建了一个参数..并将其类更改为`java.Util.Collection`..

然后在子报表属性中，`connection type= Use a datasource expression`

`Data Source Expression new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($P{shape_data_all})`

然后在子报告中添加与我在 bean 属性中相同的字段..

# testing - 为什么 mockito 返回错误 eve 参数是相同的？

> ID：11450792
> 
> 赞同：4
> 
> 时间：2012-07-12T11:24:43.997
> 
> 标签：testing, junit4, mockito, hamcrest

看看这张照片。Mockito 验证 Argument 发生了什么？

我想验证是否使用参数工厂调用了视图。

```
 @Test
  public void shouldInitializeTheDriverWithTheRequestFactory() {

    CVProxy proxy = context.create(CVProxy.class);

    workflow.initialize();

    verify(view).initializeWithRequestFactory(factory);

    verify(view).editWithEditor(proxy, context);

  } 
```

但是我得到了这个奇怪的错误？！

```
Argument(s) are different! Wanted:
view.initializeWithRequestFactory(
    com.google.web.bindery.requestfactory.vm.InProcessRequestFactory@13c6a22
);
-> at CreatingNewCVWorkflowTest.shouldInitializeTheDriverWithTheRequestFactory(CreatingNewCVWorkflowTest.java:53)
Actual invocation has different arguments:
view.initializeWithRequestFactory(
    com.google.web.bindery.requestfactory.vm.InProcessRequestFactory@13c6a22
); 
```

你可以的论点是相同的。 ![在此处输入图像描述](../Images/019f3d5d8450704746384eb23746a7d7.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T12:09:48.163

工厂实例是否有可能错误地实现了 equals 方法（以至于 equals 方法报告对象不等于自身）？

# vb.net - 获取位置 VB.net

> ID：11450794
> 
> 赞同：0
> 
> 时间：2012-07-12T11:24:48.833
> 
> 标签：vb.net, location, show

我正在尝试将谷歌地图加载到 vb.net 网络浏览器控件和“显示我的位置”中。

我可以将谷歌地图加载到网络浏览器控件中，但无法模拟从 fireofx 或 IE 等浏览器加载时单击谷歌地图中的“显示我的位置”按钮。

例如”

```
Private Sub googleMAPS_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    WebBrowser1.Navigate("https://maps.google.com.au/maps?hl=en&Show My Location")
End Sub 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T14:39:34.173

谷歌有一整套用于地图相关交互的 API 套件。[如果您单击此](http://maps.google.com/help/maps/getmaps/plot-one.html)站点上的高级选项选项卡，它会提供更多选项（如果您感兴趣的不仅仅是静态位置 - 不确定，所以我发布了更简单的链接）。

# spine.js - @extend Spine.Model.Ajax.Methods

> ID：11450807
> 
> 赞同：0
> 
> 时间：2012-07-12T11:25:42.653
> 
> 标签：spine.js

看，这很好用：

```
class Page extends Spine.Model
 @configure "Page", "name"
 @extend Spine.Model.Ajax 
```

但是这个：

```
class Page extends Spine.Model
 @configure "Page", "name"
 @extend Spine.Model.Ajax.Methods

 @fetch (params) ->
  index  = @last()?.id or 0
  return false if index is @index
  @index = index

  params or= 
    data: {index: index}
    processData: true

  @ajax().fetch(params) 
```

不工作。当然，它从服务器获取记录，但其他 REST 命令不起作用。我无法更新或删除记录。我必须做什么才能恢复功能？我需要这个 fetch() 的例子，但我也需要更新和删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T19:36:49.330

如果您只想覆盖该`fetch`方法，您可以简单地执行此操作

```
class Page extends Spine.Model
  @configure "Page", "name"
  @extend Spine.Model.Ajax

  @fetch (params) ->
    index = @last()?.id or 0
    return false if index is @index
    @index = index

    params or= 
      data: {index: index}
      processData: true

    super(params) 
```

注意`super`最后调用默认提取参数的调用

# c++ - 传递元组嵌入式 Python

> ID：11450808
> 
> 赞同：0
> 
> 时间：2012-07-12T11:25:42.857
> 
> 标签：c++, python, c, python-c-api

所以我正在编写一个 C++ 应用程序，它使用对 Python 的嵌入式调用来运行一些计算。我的代码可用于在指定目录中运行任何脚本，以及在 C++ 应用程序和 Python 解释器之间传递和返回一个值。

但是，当我尝试将多个值作为参数传递给 Python 时，我遇到了问题。以下是我运行 Python 脚本的代码：

```
double Script::run_script(string moduleName, string funcName, double *params, 
              int numberOfParams)
{
  PyObject *pName, *pModule, *pDict, *pFunc;
  PyObject *pArgs, *pValue;
  int i;

  // Set aside memory for the path to my scripts to add to sys.path
  char dir[255];
  memset(dir, 0, sizeof(dir));
  /* ********************************************* */
  sprintf(dir, "/home/bmalone/workspace/NumericalAnalysis/Testing"); //Put path into dir
   /* ********************************************* */

  Py_Initialize();

  PyObject *dictModule = PyImport_GetModuleDict();
  PyObject *sys = PyDict_GetItemString(dictModule, "sys");

  // Sys NULL?
  if (sys == NULL)
    {
      cerr << "Cannot find sys in dict!" << endl;
      return -1;
    }

  dictModule = PyModule_GetDict(sys);
  PyObject *path = PyDict_GetItemString(dictModule, "path");

  PyObject *pPath = PyUnicode_FromString(dir);
  PyList_Append(path, pPath);

  if (pPath);
    //cerr << "PATH > " << PyString_AsString(PyObject_Repr(path)) << endl;
  else
    cerr << "pPath IS NULL" << endl;

  /* Import the module that contains the function/script */
  pModule = PyImport_ImportModule(moduleName.c_str());

  if (pModule);
    //cerr << "pModule ~ " << PyString_AsString(PyObject_Repr(pModule)) << endl;
  else
    cerr << "pModule is NULL!!" << endl;

  //cerr << "Getting dict for argv[1]..." << endl;
  dictModule = PyModule_GetDict(pModule);
  if (dictModule);
    //cerr << "DictModule ~ " << PyString_AsString(PyObject_Repr(dictModule))  << endl;
  else
    cerr << "DictModule is NULL!!" << endl;

  // CALL THE FUNCTION!
  /*
   * argv[1] is the MODULE name, but argv[2] SHOULD BE the function name!
   */
  /* Get a PyObject referencing the function from the module 'pModule' */
  //pFunc = PyObject_GetAttrString(pModule, funcName.c_str());
  pFunc = PyDict_GetItemString(dictModule, funcName.c_str());

  if (pFunc)
    {
      PyObject *objRep = PyObject_Repr(pFunc);
      const char* str = PyString_AsString(objRep);
      cerr << "Func is a real boy, too! - " << str  << endl;
    }
  else
    cerr << "pFunc is NULL!" << endl;

  /* Setup PyArgs */
  pArgs = PyTuple_New(numberOfParams);
  // Add the data as doubles
  cerr << "<parameters> ~ params size is " << numberOfParams  << endl;
  for (int i = 0; i < numberOfParams; i++)
    {
      if (params)
    {
      /* **************************** */
      //pValue = PyDouble_AsDouble(params[i]);
      pValue = PyFloat_FromDouble(params[i]);
      /* **************************** */

      cerr << " " << params[i] << endl;
      PyObject* objRep = PyObject_Repr(pValue);
      const char* strRep = PyString_AsString(objRep);
      cerr << ">> pValue = " << strRep << endl;
      PyTuple_SetItem(pArgs, i, pValue);
    }
      else
    break;
    }

  cerr << "<Module> - " << moduleName << ", is null: " << (pModule == NULL) << endl;
  cerr << "<Function> - " << funcName << ", is null: " << (pFunc == NULL) << endl;

  // Get the retun value
  cerr << "<Calling Function>" << endl;
  //pValue = PyObject_CallFunction(pFunc, "f", 15.0); // **WORKS**
  pValue = PyObject_CallObject(pFunc, pArgs); // **WORKS**

  //pValue = PyObject_CallObject(pFunc, NULL);
  //pValue = PyEval_CallObject(pFunc, NULL);
  //pValue = PyObject_CallFunction(pFunc, NULL);
  //pValue = PyObject_CallObject(pFunc, args);

  //pValue = PyEval_CallObject(pFunc, args);

  //cerr << "ANSWER ---> " << PyFloat_AsDouble(pValue) << endl;

  return PyFloat_AsDouble(pValue);
  Py_Finalize();
} 
```

编辑：在我原来的帖子中，我做了一个我忘记做的更改，这是一个阻止任何脚本运行的错误。上面的代码可以正确运行任何脚本，*除非*它仅在 pArgs 具有 --1-- 元素时才有效。每当我尝试传递多个元素时，即使是为了打印出同一个脚本，脚本甚至都不会运行。但是，如果它只是 1，那么它就可以完美地工作。

我似乎无法弄清楚我做错了什么将超过 1 个参数传递给我的脚本。这是我试图从 C++ 运行的脚本（适用于 1 个参数的脚本）：

```
#!/usr/bin/python
'''
Created on Jul 12, 2012

@author: bmalone
'''
import sys

def doubleTwo(x, y):
    print str(sys.argv)
    print "Can haz doubling?\n"

if __name__ == '__main__':
    doubleTwo() 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T07:28:13.620

我发现了我遇到的问题。在我的函数中，我试图访问命令行参数，而在编写我的函数时，我指定它们正在被传递参数——我没有这样做。

将来，对于任何发现嵌入式 Python 有问题的人，我发现 Python-C API 中有一个非常有用的错误部分，如果 PyErr_Occurred() 为 true，PyErr_Print() 会将错误打印到 stderr。

在使用“PyObject_CallObject”调用函数并通过在 sys.argv 上建立索引来访问我在 Python 中需要的参数之前，我要么需要修复传递实际参数，要么（我最终使用的）是使用“PySys_SetArgv”。

# jquery - 在 Google Jquery Map UI 中制作自定义平移

> ID：11450811
> 
> 赞同：0
> 
> 时间：2012-07-12T11:25:47.160
> 
> 标签：jquery, google-maps, google-maps-api-3

我正在使用 Google Map Api。所以我使用 Jquery Google Map API 来获取 Map 的东西：

```
<div id="map_canvas"></div>

<button id='btnRight'>Right</button>
<button id='btnLeft'>Left</button>
<button id='btnUp'>Up</button>
<button id='btnDown'>Down</button>
.
.
.
.

<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>
<script src='https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.js'></script>
<script type="text/javascript" src="../ui/jquery.ui.map.js"></script>

<script>
    $(function() {
        var map=$('#map_canvas').gmap({
            'center' : '57.7973333,12.0502107',
            'scrollwheel' : false,
            'zoom' : 10,
            'disableDefaultUI' : false
        });

        $('#btnRight').on('click',function(){
           //map should move to some pixels to right as it moves when we press right arrow 
           //in the navigation pan of the google map.I attached the image
        });

        //similar behaviour for left,down and up buttons
        //the work of these 4 buttons are similar to the 4 direction of the 
        //navigation pan that comes with the default ui of google maps

    });
</script> 
```

![在此处输入图像描述](../Images/577f0c400be97d1eb13206515f583c17.png)

我尝试了很多来实现这一点，但没有成功，请任何人对此有所了解..请感谢 Ankur

# c++ - Linux相当于windows的EnterCriticalSection

> ID：11450815
> 
> 赞同：2
> 
> 时间：2012-07-12T11:25:57.967
> 
> 标签：c++, windows, linux

我找不到明确的答案，所以就是这个地方。
Windows 的`EnterCriticalSection`行为方式是，我可以在同一个线程中多次锁定它，并且我需要在退出时解锁它的确切次数，这样它才能释放。

Linux 等价物是什么？pthread 互斥锁是否以相同的方式起作用？或者是多锁，单解锁...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T11:29:28.347

使用 boost::recursive_mutex，你就不必再考虑操作系统了

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T11:51:10.570

您可以使用属性 PTHREAD_MUTEX_RECURSIVE_NP 在递归模式下使用 pthread 互斥锁。

Linux 等价物在本文中进行了描述（参见“清单 2\. 等价 Linux 代码”）

[http://www.ibm.com/developerworks/linux/library/l-ipc2lin3/index.html](http://www.ibm.com/developerworks/linux/library/l-ipc2lin3/index.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-13T11:08:27.317

您为什么不使用 ADONTEC 的 W2LPL 库 ( [http://adontec.com/windows-to-linux-port-library.htm](http://adontec.com/windows-to-linux-port-library.htm) )，它提供了几乎所有您正在寻找的东西。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-12T11:28:26.147

你可以使用互斥锁，看看这个[http://en.wikipedia.org/wiki/Critical_section](http://en.wikipedia.org/wiki/Critical_section)

只要确保将其置于递归模式即可。

以下链接描述了如何为 pthread 执行此操作：http: [//www.ibm.com/developerworks/linux/library/l-ipc2lin3/index.html](http://www.ibm.com/developerworks/linux/library/l-ipc2lin3/index.html)

# vim - Vim：我如何清除所有标记？

> ID：11450817
> 
> 赞同：54
> 
> 时间：2012-07-12T11:26:07.397
> 
> 标签：vim

我想“清除所有标记”。

可选注释：（请随意跳过）

一些编号标记指的是我很长时间没有编辑的文件，我不知道它们为什么在那里，它们是如何创建的，它们如何有用，因为它们指的是网络驱动器上的文件，我怀疑它们可能是我的 MacVim 问题的一部分，它在关闭和退出时偶尔会挂起 100% 的 CPU 利用率。后者是一种可能完全没有根据的“迷信”，但我已经没有东西可以检查了，所以我不得不在绝望中脱口而出废话。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-07-12T11:29:14.443

```
:delm[arks]!        Delete all marks for the current buffer, but not marks
            A-Z or 0-9.
            {not in Vi} 
```

* * *

*   `'A - 'Z`大写标记，也称为文件标记，在文件之间有效
*   `'0 - '9``.viminfo`从文件中设置的编号标记。

要删除它们：

```
:delmarks A-Z0-9 
```

注意：`~/.viminfo`包含历史和标记，如果您不再需要它们，可以删除此文件。Vim 将在下次重新创建它。

* * *

因此，您可以这样做以清除所有标记：

```
:delm! | delm A-Z0-9 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-12T11:31:47.253

Vim 将这类信息存储在 ~/.viminfo 中。默认情况下，该文件包含的信息远不止标记。存储的确切信息可以由 'viminfo' 选项控制。

有关禁用特定功能的更多信息，请参阅`:help 'viminfo'`。

您可以通过删除此文件并在再次启动时让 vim 重新创建它来“修复”您的问题。请注意，您将丢失存储在那里的额外信息，但我相信您的标记应该全部清除。

# javascript - 如何从下拉列表中替换表格单元格值？

> ID：11450826
> 
> 赞同：0
> 
> 时间：2012-07-12T11:26:54.883
> 
> 标签：javascript, jquery, drop-down-menu

我需要“按摩”一个 HTML 表格。

页面上有一个下拉菜单：

```
<SELECT CLASS='slctor' size='1' NAME='KEYVAL' ID='KEYVAL' >
                  <OPTION VALUE='{*}'>*
                  </OPTION>
                  <OPTION value='10'>green
                  </OPTION>
                  <OPTION value='20'>green
                  </OPTION>
                  <OPTION value='30'>green
                  </OPTION>
                  <OPTION value='40'>yellow
                  </OPTION>
                  <OPTION value='90'>red
                  </OPTION>
                </SELECT> 
```

我还有一张包含人/年的表格和每对的值：

```
<table>
<tr>
  <td></td>
  <td>2001</td>
  <td>2002</td>
  <td>2003</td>
</tr>
<tr>
  <td>JOE</td>
  <td>10</td>
  <td>30</td>
  <td>90</td>
</tr><tr>
  <td>BETTY</td>
  <td>20</td>
  <td>20</td>
  <td>40</td>
</tr>
</table> 
```

我想使用 jQuery 从下拉列表值中“解析”每个单元格值，返回标签，并替换单元格内容（或背景颜色）。

我能够做一些基本的事情，就像在实际的 DOM 操作中一样，但我需要帮助以一种有效的方式实际进行查找。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:34:37.020

```
Try this:

$(".slctor").change(function(){
    var selectedVal=$(this).val();
    $('table').find('td').filter(function(){return $(this).text() ==selectedVal}).css("background-color","red");
   //or
      $('table').find('td').filter(function(){return $(this).text() ==selectedVal}).text("New Text");
}); 
```

# javascript - RegExp：如何排除空格

> ID：11450829
> 
> 赞同：0
> 
> 时间：2012-07-12T11:26:59.200
> 
> 标签：javascript, regex, ruby-1.8.7

考虑 Ruby 1.8.7 或 Javascript。

我有以下字符串：`(GMT+02:00) Istanbul`并且我想捕获之后的所有内容`)`（注意右括号后包含的空格）

我创建的正则表达式几乎可以正常工作，它包括不需要的空白。

`\s\D*`=>`Istanbul`

我该如何解决这个问题，这个正则表达式是用来做这个的吗？

**编辑**

字符串可以是其他字符串，例如`(GMT+01:00) West Central Africa`

在这种情况下，我想要`West Central Africa`

所以，有些答案是行不通的。

对不起，我忘了提这个。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:35:16.210

*积极的后视断言*是一种选择。

```
(?<=\s)[\D]+ 
```

（用 python 正则表达式库测试）

要在 GMT 偏移定义之后提取第一个单词，就像您的示例中的那样......

```
(?<=\([\D]{3}[\+\-][\d]{2}:[\d]{2}\)\s)[\D]+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T16:45:28.417

在红宝石中：

```
irb> line = '(GMT+01:00) West Central Africa'
irb> line.sub(/^.*\)\s/, '')
=> "West Central Africa" 
```

在 JavaScript 中：

```
js> var line = '(GMT+01:00) West Central Africa'
js> line.replace(/^.*\)\s/, '')
West Central Africa 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T11:42:09.187

检查这个：

```
(?<=\s)[\w]* 
```

[在此处查看您的示例](http://regexr.com?31gt8)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T11:52:00.977

很简单的表达：

```
[^)]*\)\s*(\w+) 
```

解释：

```
[^)]*        any character except: ')' 
             (0 or more times, matching the most amount possible)

\)           ')'

\s*          whitespace (\n, \r, \t, \f, and " ") 
             (0 or more times, matching the most amount possible)

\w+          word characters (a-z, A-Z, 0-9, _) 
             (1 or more times, matching the most amount possible) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T11:30:15.523

您可以在正则表达式中的每个其他字符之间粘贴可选的空白字符**\s***。虽然被授予，但它会变得有点冗长。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-12T11:34:56.227

请执行下列操作：

`\S+$`

它匹配行尾不是空格的所有内容。

如果只想匹配字母字符，可以使用以下命令：

`\w+$`

[你可以在这里](http://www.regular-expressions.info/javascriptexample.html)测试它们。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-12T11:44:15.813

当您说捕获时，如果您希望获得命名捕获，而忽略其余部分，您可以执行以下操作：

```
(?:.+\s)(?<Country>.+) 
```

# merge - 如何为树莓派构建 spotyxbmc2？

> ID：11450832
> 
> 赞同：0
> 
> 时间：2012-07-12T11:27:06.943
> 
> 标签：merge, cross-compiling, spotify, xbmc, raspberry-pi

我正在尝试为 Raspberry Pi 构建 spotyxbmc2。我的第一次尝试是交叉编译来自 spotyxbmc2 的 Github 的源代码，但事实证明需要修改 XBMC 代码才能正确编译并使用与 Pi 的 GPU 兼容的 OpenGLES 库。所以我然后尝试将来自 xbmc-rbp（Raspberry Pi 兼容 XBMC 分支）的代码与 spotyxbmc2 代码进行 git 合并。起初这一切似乎都奏效了。我有 Pi 的库和来自 spotyxbmc2 的 Spotify 特定代码。当我尝试编译时，我遇到了一些错误，例如缺少“}”或随机插入代码中的“====”或“>>>>>”。清理完之后，我设法编译了所有内容，但是，当 make 尝试构建二进制文件时，它几乎立即失败，错误提示代码中有很多对未定义函数的调用。我不知道我做错了什么。有谁有想法吗？

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T12:38:12.920

> 随机“====”或“>>>>>>”

它们是`git`合并冲突标记。如果您没有正确处理这些问题（并不是刻薄，但如果您没有将它们视为冲突标记，我怀疑您是否这样做了），您将遇到各种各样的问题。

我建议从头开始，这次正确处理合并冲突。如果你不知道如何处理合并冲突，网上有很多教程。

之后，如果仍然失败，您需要提供代码让我们帮助您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T01:33:52.437

也许你应该检查这个[spotimc](https://github.com/mazkolain/spotimc/downloads)

这是一个完整的 xbmc 插件，效果很好，可以解决你的问题 :)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T20:30:20.143

自 2013 年 1 月 26 日起，用于 Raspberry Pi 的 Spotyxbmc 在 OpenELEC 中可用。使用他们论坛上的 spotify 线程中的编译说明。该端口是由kernevil制作的。

# c# - 使用 Web 服务的 HTTP POST

> ID：11450836
> 
> 赞同：4
> 
> 时间：2012-07-12T11:27:26.377
> 
> 标签：c#, xml, asmx

我一直在做一些谷歌搜索，但在这个主题上只取得了部分成功。我想知道是否有人可以建议一个使用 C# 将 XML 发送到 HTTP 服务的 HTTP POST 示例。

我有一个 asmx Web 服务，它从数据库中提取数据并将该数据保存到 XML 文档中。现在我必须使用 SOAP 协议将该 XML 文档发送到 HTTP 服务。

我有这部分代码用于连接服务

```
WebRequest myReq = WebRequest.Create("https://WEB_URL");
 System.Net.ServicePointManager.CertificatePolicy = new CertificatePolicyClass();

                string username = "SOMETHING";
                string password = "ELSE";
                string usernamePassword = username + ":" + password;
                CredentialCache mycache = new CredentialCache();
                mycache.Add(new Uri("https://WEB_URL"), "Basic", new  NetworkCredential(username, password));
                myReq.Credentials = mycache;
                myReq.Headers.Add("Authorization", "Basic " + Convert.ToBase64String(new ASCIIEncoding().GetBytes(usernamePassword)));

                WebResponse wr = myReq.GetResponse();
                Stream receiveStream = wr.GetResponseStream();
                StreamReader reader = new StreamReader(receiveStream, Encoding.UTF8);
                string content = reader.ReadToEnd(); 
```

那么有人有将XML文档发送到http服务的代码吗，这部分我不知道怎么写，我不知道我在写跟踪，我相信它必须像这样

```
request.Method = "POST";
request.ContentType = "application/x-www-form-urlencoded"; 
```

所以请有人可以帮助我！谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T11:43:08.517

这是我得到的东西，希望它对你有用：

```
HttpWebRequest myReq = (HttpWebRequest)WebRequest.Create("https://WEB_URL");
myReq.Method = "POST";
myReq.ContentType = "text/xml";
myReq.Timeout = 30000;
myReq.Headers.Add("SOAPAction", ":\"#save\"");

byte[] PostData = Encoding.UTF8.GetBytes(xmlDocument);
myReq.ContentLength = PostData.Length;

using (Stream requestStream = myReq.GetRequestStream())
{
    requestStream.Write(PostData, 0, PostData.Length);
}

HttpWebResponse response = (HttpWebResponse)myReq.GetResponse(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-12T15:58:59.633

```
 string soap = 
    @"<?xml version=""1.0"" encoding=""utf-8""?>
    <soap:Envelope xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" 
       xmlns:xsd=""http://www.w3.org/2001/XMLSchema"" 
       xmlns:soap=""http://schemas.xmlsoap.org/soap/envelope/"">
      <soap:Body>
        <Register xmlns=""http://tempuri.org/"">
          <id>123</id>
          <data1>string</data1>
        </Register>
      </soap:Body>
    </soap:Envelope>";

HttpWebRequest req = (HttpWebRequest)WebRequest.Create("http://localhost/WebServices/CustomerWebService.asmx");
req.Headers.Add("SOAPAction"http://tempuri.org/Register\"");
req.ContentType = "text/xml;charset=\"utf-8\"";
req.Accept = "text/xml";
req.Method = "POST";

using (Stream stm = req.GetRequestStream())
{
     using (StreamWriter stmw = new StreamWriter(stm))
     {
          stmw.Write(soap);
     }
}

WebResponse response = req.GetResponse();

Stream responseStream = response.GetResponseStream(); 
```

# html - HTML - 编写与生成代码

> ID：11450837
> 
> 赞同：1
> 
> 时间：2012-07-12T11:27:28.937
> 
> 标签：html, web, tags

我有机会使用非常不同类型的 Web 开发框架。不知何故，我可以看到每个框架都试图避免我编写纯 HTML 代码。

例如 Spring 有它自己的标签，Struts 有它自己的标签，Zend 和 Codeigniter (PHP) 也有表单助手。

这是否意味着我不应该只自己编写 HTML 代码，或者不建议这样做？我应该使用它们吗？因为它们看起来不像他们想要的那样直观、易于管理和节省时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:32:12.810

您需要编写自己的 HTML（和 CSS）来定义网站设计的整体结构和布局。不要将此与无需编写重复 HTML 的省时功能混淆，例如表单输入和导航菜单项。

例如，在 ASP.NET MVC 下，您仍然需要将大部分 HTML 放入 MasterViewPage 或 Razor 布局中，但在编写所有表单输入时，您只需放入`<%= Html.TextBoxFor( m => m.FirstName )`，其余的由它处理，这样可以节省您的时间为`<input />`元素编写样板 HTML 的麻烦。它还有助于避免错误（`name=""`例如，如果您忘记了一个或 `id=""` 属性，但在某些框架中，确保可靠的往返表单数据正常工作是必不可少的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:35:40.563

如果您没有非常好的生成代码的工具（例如 ASP.NET MVC 中的 Razor），我建议您自己管理代码，这可以使您的代码更清晰、更直观。在您的情况下，如果您使用 Zend，我建议您在普通网站中编写 html，并且只使用生成器生成带有`Zenf_form`. 因为它很棒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T11:36:00.093

我使用的生成代码服务会生成很难在以后筛选的丑陋代码。

自己编写代码和 HTML 可以获得更好的结构，并且不会影响其运行方式，如果这是您所担心的并且这些语言已设置为标准。

建议是在您可以编写代码的地方编写代码，并在您不知道的区域生成代码（或者在您在测试表中尝试之前学习如何编写代码）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T11:36:57.520

我认为这是个案的基础。

这些框架可帮助您摆脱样板代码并编写更简洁的应用程序。您还可以通过使用它们来避免一些安全问题，并且您尊重 MVC。

虽然可能会有性能损失，所以如果您编写一个小型应用程序或者您对速度有某些要求，那么没有（一些）它们可能会更好。

# mamp - MAMP php5 严格标准

> ID：11450838
> 
> 赞同：1
> 
> 时间：2012-07-12T11:27:30.877
> 
> 标签：mamp, php, error-reporting, strict, concrete5

我正在尝试在 mamp 的 php.ini 中将 error_reporting 设置为 E_ALL 和 ~E_STRICT。

但这根本没有受到影响。我通过设置不同的error_reporting（如E_NOTICE）确认我正在编辑正确的文件，并检查了phpinfo以验证相同。

但只有 ~E_STRICT 没有发生。

当我访问我的 cms（concrete5）时，它给了我一个严格错误列表（粘贴下面的前几个）：

```
Strict Standards: Non-static method Cache::get() should not be called statically in www/concrete/models/package.php on line 78 
```

严格标准：非静态方法 Cache::key() 不应在第 117 行的 www/concrete/libraries/cache.php 中静态调用

严格标准：不应在第 121 行的 www/concrete/libraries/cache.php 中静态调用非静态方法 Cache::getLibrary()

试图在 .htaccess 和 index.php 文件中将 error_reporting 设置为 E_ALL & ~E_STRICT。没有工作。

请解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T20:05:20.747

Concrete5 有一个设置可以禁止显示错误和警告（以及我认为的通知）——在仪表板 -> 系统和设置 -> 环境 -> 调试设置中。您可能已将此设置为隐藏所有错误/警告——这将覆盖您在配置文件中的设置。

至于@PeeHaa 关于抑制错误而不是修复错误的评论，这并不那么简单，因为 Concrete5 CMS 本身有大量的*php*会生成通知。我认为这是因为几年前在某些东西被弃用之前编写的代码。例如，有大量系统函数被静态调用，即使该函数未声明为“静态”。这在旧版本的 PHP 中是一件好事，但现在不受欢迎。不幸的是，我认为您对此无能为力。

不幸的是，这是使用 Concrete5 的权衡之一。它是目前最好的 CMS，但对于更高级的开发人员来说，它并不总是最复杂的平台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:28:52.140

我通过在我的 imac 上从 mamp 移动到 xampp 解决了这个问题。

mamp 的问题：除非我们有 mamp pro，否则它不允许我们使用 php 5.3

我使用的解决方案：我使用 php 5.3 迁移到 xampp，一切都很顺利。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T03:01:34.843

让 Concrete5 忽略这些错误并加载页面（包括仪表板）是非常棘手的。最好的办法是将 PHP 降级到最新的 5.3.X，直到发布与 PHP 5.4.X 兼容的版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T16:24:34.653

如果 MAMP 似乎忽略了 php.ini 中的设置（例如 E_STRICT），那么您可能没有编辑正确的文件。您可以使用 phpinfo(); 查看正在加载的配置文件。

查找这一行：加载的配置文件：/Applications/MAMP/bin/php/php5.4.4/conf/php.ini

请注意它在我机器上的 MAMP/bin 中的情况。使用默认的 MAMP 安装，很容易将模板配置文件误认为是实时配置文件。

在正确的位置设置时，MAMP 不会忽略 E_STRICT。

# iphone - 用图片自定义 UIPickerView 的 Skin

> ID：11450840
> 
> 赞同：7
> 
> 时间：2012-07-12T11:27:41.230
> 
> 标签：iphone, objective-c, uipickerview

我正在开发一个 iPhone 应用程序。在哪里，我想像`UIPickerView`图像中那样。有可能改变成这样的`UIPickerView`样子吗？！请指导我这样做！我在没有 XIB 的情况下创建它。

或者有没有办法让`UIPickerView`皮肤透明？

![示例 UIPickerView 图像](../Images/f1e5ac2de165bbe59b3a495b76a69029.png)

提前致谢！！:-)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T12:06:31.163

我不知道这是否正确，但你可以设置你的`UIPickerView`背景图片......我做过一次。

看到这个： -

```
//Make a view to set as background of UIPickerView
UIView * viewForPickerView = [[UIView alloc]initWithFrame:CGRectMake(0.0, 0.0, 320.0, 216.0)];
[viewForPickerView setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"pickerViewBackground.png"]]];

[[[pickerView subviews]objectAtIndex:2] addSubview: viewForPickerView];

//UIPickerView has 8 subviews like, background, rows, container etc.
// hide unnecessary subview

[(UIView*)[[pickerView subviews] objectAtIndex:3] setHidden:YES];
[(UIView*)[[pickerView subviews] objectAtIndex:5] setHidden:YES];
[(UIView*)[[pickerView subviews] objectAtIndex:6] setHidden:YES];
[(UIView*)[[pickerView subviews] objectAtIndex:7] setHidden:YES];
[(UIView*)[[pickerView subviews] objectAtIndex:8] setHidden:YES]; 
```

`UILabel`现在在你`UIPickerView`的 's上添加一个`selectionIndicator`，并**`label`**用作**`selectionIndicator`**. 你可以用你自己的方式管理它。

谢谢！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-13T15:23:25.917

UIPickerView 只不过是一个带有一个或多个 UITableView 以及背景和选择器视图的 UIView。

将来，当 Apple 决定以另一种方式实现它时，向 UIPicker 视图隐藏和添加视图可能会破坏您的代码。

使用 UITableView(s) 和您自己的自定义背景和选择器视图来实现您的控件可能是一个更好的主意。

在 UITableView(s) 上实现 UIPickerView 行为的一些技巧：

*   使用 ContentInset 确保滚动到顶部/底部时第一行/最后一行显示在中间。

*   在 UITableViewSource 上实现 tableView:didSelectRowAtIndexPath: 并在 UITableView 上调用 scrollToRowAtIndexPath 以在中间显示所选行。

*   在 UITableViewSource 上实现 scrollViewDidEndDecelerating 和 scrollViewDidEndDragging（其中 willDecelerate 为 false）。检测最靠近中间的行，将该行设置为选中，然后使用 UITableView 上的 selectRowAtIndexPath 将该行滚动到中间（或在该行已被选中时使用 scrollToRowAtIndexPath）。

*   在 selectRowAtIndexPath 和 scrollToRowAtIndexPath 中将 atScrollPosition 设置为***TOP***。这有点令人困惑，因为该行显示在中间，但 ContentInset 将顶部推到了视图的中间。

*   您可以使用 visibleCells 和 contentOffset 的框架检测 UITableView 上最靠近中间的行。可以通过对 indexPathsForVisibleRows 应用相同的索引来找到行的 NSIndexPath。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-13T13:20:46.733

不幸的是 UIPickerView 不是高度可定制的，因此您最终可能会使用私有标头来修改外观（不推荐）或使用一些模拟 UIPickerView 行为但允许定制的第三方库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T11:36:54.907

看看[这些](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=Picker)。可能不是你想要的，但也可能有帮助:)

# javascript - 使用 Asp.net (VB.Net) 或 Javascript 将条码生成 PDF 文档

> ID：11450843
> 
> 赞同：0
> 
> 时间：2012-07-12T11:28:02.607
> 
> 标签：javascript, vb.net, pdf, barcode

使用***(asp.Net)VB.Net***或***JavaScript*** ，为 Web 应用程序在**PDF**文档中生成**条形码**并直接打印的最佳方法是什么？

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T12:53:43.690

看看[这个](http://www.codeproject.com/KB/graphics/BarcodeLibrary.aspx?fid=470627&fr=26)创建条形码图像的项目。

然后看看[这个](https://stackoverflow.com/questions/1566591/create-a-pdf-document-using-just-vb-net)关于如何在 .NET 中创建 PDF 的问题

将两者结合起来，您应该有一个解决方案。**

# c# - 类不被识别为返回/参数类型

> ID：11450845
> 
> 赞同：1
> 
> 时间：2012-07-12T11:28:14.377
> 
> 标签：c#

我正在调用一个简单的方法，它接收我的一个类的实例并返回另一个类实例。出于某种原因，它在方法声明中无法识别它们，但在方法中和调用方法之前对它们很好。想不出这其中的原因。这是我的代码；

```
public ReceiptResponse DownloadReceipt(ReceiptRequest request)
    {
        ReceiptResponse call = null;
        ...
    } 
```

`ReceiptResponse`并且`ReceiptRequest`都在行中抛出错误，但由于某种原因`public`，创建是好的。`call`这是其中一个类（两者几乎相同）；

```
public class ReceiptRequest
{
    public String ClientID;
    public String PolNum;
    public String RecNum;  
} 
```

**我的错误**

> 错误 16 找不到类型或命名空间名称“ReceiptRequest”（您是否缺少 using 指令或程序集引用？）

**更新**

我肯定有所需的 using 语句，因为如果我将鼠标悬停在行`ReceiptResponse`的创建上，`call`那么它会在工具提示中显示 using 语句。

为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T12:03:50.077

如果您的 RequestReceipt 类在另一个项目中，请检查两个项目的 Target 框架。是一样的吗？如果不是，请检查具有 ReceiptRequest 类的项目的目标框架是否是 .NET Framework 4，另一个是 .NET Framework 4 Client profile。

A project with Target Framework 4 Client profile cannot reference another project with Target Framework 4 (=full).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:44:51.337

这些类在不同的程序集中吗？如果是这样，您需要将项目引用到另一个。

这些类在不同的命名空间中吗？如果需要`using`在文件顶部添加语句，或者在声明变量时声明全限定名。

```
using my.name.space;
...
var receipt = new RequestReceipt(); 
```

或者

```
var receipt = new my.name.space.RequestReceipt(); 
```

# c# - 无法使用适用于 WP7 的 HTML Agility Pack 找出 XPath 查询

> ID：11450859
> 
> 赞同：0
> 
> 时间：2012-07-12T11:28:55.600
> 
> 标签：c#, windows-phone-7, html-parsing, html-agility-pack

嗨，我有这个特定的 HTML 代码，但我找不到这个特定 HTML 块的正确 XPath，所以我可以解析它

```
<aside id="id1">
<dl class="class1a class1b">
    <dd>value1</dd>
    <dt><em>**value2**</em> value3</dt>
</dl>
<dl class="class2a class2b">
    <dd>value4</dd>
    <dt class="class3">
        <strong>**value5**<span>value6</span></strong>
        </dt>
    </dl>
 </aside> 
```

问题是我需要**value2**和**value5**

我怎样才能实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:36:44.010

```
\\em | \\strong 
```

应该做的伎俩。然后，您可以从每个节点检索文本值。这将在 xml 片段中找到所有 em 和 strong 标签。这是 xpath 运算符的[列表](http://www.w3schools.com/xpath/xpath_operators.asp)。

如果您需要进一步处理文本值（在这种情况下从 中删除 astriks `value5`，这将在 xpath 查询范围之外完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T12:17:06.457

```
var value2 = doc.DocumentNode
                .SelectSingleNode("//dl[@class='class1a class1b']/dt/em")
                .InnerText;
var strong = doc
             .DocumentNode
             .SelectSingleNode("//dl[@class='class2a class2b']/dt[@class='class3']/strong");
strong.RemoveChild( strong.LastChild );
var value5 = strong.InnerText; 
```

# twitter-bootstrap - 如何实现代码高亮作为引导程序的示例

> ID：11450864
> 
> 赞同：20
> 
> 时间：2012-07-12T11:29:13.020
> 
> 标签：twitter-bootstrap, google-code-prettify

我发现[引导程序的代码高亮](http://twitter.github.com/bootstrap/components.html)对代码块有很好的风格。

![引导程序](../Images/85668e798236dd3d0c5199caf97702c8.png)

我使用[google-code-prettify](http://code.google.com/p/google-code-prettify/)找到它，但我尝试了 google code prettify，风格不同：

![谷歌代码](../Images/d26cb159ae22f586f4d10816d6cda0ee.png)

如何实现与引导程序相同的功能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-10-28T23:45:41.650

不确定您是希望在运行时动态突出显示代码还是为静态使用而生成代码。

TWBS Bootstrap 项目使用静态生成方法，通过名为[Jekyll的](https://jekyllrb.com)[Ruby](https://www.ruby-lang.org)工具集、[Liquid Template Engine](https://shopify.github.io/liquid)、一些[自定义代码](https://github.com/twbs/bootstrap/blob/v4-dev/docs/_plugins/highlight_alt.rb)和 Markdown 文件源生成其内容。

如果您需要动态生成突出显示，那么有几个选项可用，最流行的beeing：

*   [棱镜 JS](http://prismjs.com)
*   [高亮 JS](https://highlightjs.org)

# javascript - 使用 CoffeScript 生成 JavaScript Intellisense 文档注释

> ID：11450871
> 
> 赞同：0
> 
> 时间：2012-07-12T11:29:41.453
> 
> 标签：javascript, visual-studio-2010, coffeescript, xml-comments

我正在使用 CoffeeScript，我想提供 Visual Studio 2010 JavaScript Intellisense 提示，例如 Jquery。评论必须是格式

```
///<summary>Description of the Function</summary> 
```

我能看到生成评论的唯一方法是使用###，但随后评论是样式化的

```
/* 
   <summary>Description of the Function</summary> 
*/ 
```

这在 Studio 中不起作用。有没有办法用 CoffeeScript 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:33:04.877

您可以使用[嵌入 javascript](http://coffeescript.org/#embedded)的 CoffeeScript 功能，使用反引号：

```
`///<summary>Description of the Function</summary>` 
```

# qt - 同步睡眠和 QTimer

> ID：11450876
> 
> 赞同：0
> 
> 时间：2012-07-12T11:29:51.807
> 
> 标签：qt, sleep, boost-thread

我有两个班：A班和B班。

在 A 类中，我有一个私有插槽`Refresh`，它每两秒使用 QTimer 调用一次，有助于更新 QTableView 中的值。

B 类由 QThread 定义，在`run`函数中，我借助套接字等从客户端获取数据。

现在的问题是，当`run`从客户端获取数据时，QTimer 会更新表，从而在两者之间更新而不更新所有数据。有时它更新较少，反之亦然。如果我们以一种在获取数据时`Refresh`功能起作用的方式进行同步，则可以做到这一点。但是我该怎么做呢？因为`Refresh`是另一个类，所以我想到了一种将 QTimer 与睡眠同步的方法，或者一种我只能在 B 类中调用该函数的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T12:40:30.517

正如@spyke 建议的那样，在 Qt 中使用互斥锁 (QMutex)。在包含您的数据的类中添加一个互斥锁。

在类的头文件中：

```
class MyDataClass : public QObject
{
    Q_OBJECT
    ...

signals: 
    void dataChanged();
private:
    QMutex mutex;
    .... 
```

并在访问数据的方法中：

```
MyDataClass::accessFromAnyThread(QString newNode) {
    mutex.lock();
    ...
    //access critical data e.g.
    this->data.append(newNode);
    ...
    mutex.unlock();
    emit dataChanged();
} 
```

如果您正在阅读和写作，如果您遇到性能问题，则应该查看 QSermaphore。

希望这能让你在某个地方......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:32:10.537

我不完全确定您要做什么，但我认为您可以使用 QAbstractTableModel。

填写您在此模型的实现中收到的数据，并将其添加到表格视图中

```
yourtableview->setmodel(yourtablemodel) 
```

那么你就不需要 Refresh() 函数或类似的东西了。表格视图将始终显示模型的内容。

# android - 通过互联网将数据从手机发送到手机？

> ID：11450880
> 
> 赞同：7
> 
> 时间：2012-07-12T11:30:16.177
> 
> 标签：android

有没有办法通过互联网在两个安卓设备之间进行实际通信，而不必在两个设备之间提供任何服务？

就像从 device1 向 device2 发布一些东西而不必在任何其他服务器上“中间地带”或其他什么？

另一个问题：我试图通过互联网 ping 我的手机（仅使用 IP 地址），但没有成功，因为我的 ISP 似乎为所有手机或至少其中一些手机共享相同的 WAN-IP。那么有什么方法可以仅通过使用 IP 或我的 Google 帐户或其他东西来实际 ping 或发送数据到我的特定手机？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T11:47:04.350

几乎所有的最终用户设备都位于 ISP 的路由器后面，其中许多设备位于网络层次结构中的许多设备后面；因此，终端用户设备具有公共 IP 地址的情况极为罕见。

即使你想运行一个公共请求监听服务器，你也不必为你的设备获取公共 IP 地址，而是在路由器上创建一个重定向，它将某些请求重定向到你的设备。

话虽如此，如果没有公共服务器，您将无法使用互联网在两个终端设备之间进行通信。

**因此，您可能的解决方案可能是**：（如果您不想使用中间服务器），您可以使用 mms 直接将数据发送到手机号码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T11:41:51.673

BitTorrent 是 P2P，也可以在常见的 WAN IP 后面工作。您可以实现类似的东西，但您需要知道设备 A 和 B 的 IP 地址以及发生通信的端口。这些 ISP 通常允许动态端口转发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T11:47:25.637

您应该将静态 IP 附加到其中一台设备。如果您从移动服务提供商连接到 Internet，提供商通常不提供静态 IP。您可以动态获取您的 ip 并通过短信发送到其他设备。

# magento - 如何在 Magento 中获取上次查看的产品列表？

> ID：11450882
> 
> 赞同：0
> 
> 时间：2012-07-12T11:30:21.577
> 
> 标签：magento

我正在尝试使用以下代码访问上次查看的项目列表：

```
 $attributes = Mage::getSingleton('catalog/config')->getProductAttributes();
 $model = Mage::getModel('reports/product_index_viewed');
 //
 $_collection = $model->getCollection()->addAttributeToSelect($attributes)
                  ->excludeProductIds($model->getExcludeProductIds())
                  ->addUrlRewrite()
                  ->setPageSize($columnCount)
                  ->setCurPage(1);
 //
 $_collection->addPriceData();
 $_collection->addIndexFilter();
 $_collection->setAddedAtOrder();
 //
 Mage::getSingleton('catalog/product_visibility')->addVisibleInSiteFilterToCollection($_collection); 
```

我从 Mage_Reports_Block_Product_Abstract 复制了这个，但这是在创建顺序中提供产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T19:35:51.573

我怀疑 Prasanth 是否会回到这个问题上，但我也一直在尝试在不使用可能并不总是可用[的块的情况下获取简单的产品列表。](https://stackoverflow.com/q/11413918/471559)最终我发现你需要这个：

```
$viewedCollection = Mage::getModel('reports/product_index_viewed')
                    ->getCollection()
                    ->addIndexFilter(); 
```

秘密在`addIndexFilter()`，它使用当前客户或 - 如果未登录 - 代替当前访问者。从这里你可以像任何其他集合一样循环或提取单个数组：

```
$viewedProductIds = $viewedCollection->getColumnValues('product_id'); 
```

# session-state - 状态管理（会话）

> ID：11450885
> 
> 赞同：0
> 
> 时间：2012-07-12T11:30:38.173
> 
> 标签：session-state, session-variables

我有一个名为 lstKosnicka 的列表框和一个名为 btnDodadi 的添加按钮。

```
protected void btnDodadi_Click(object sender, EventArgs e)
{
    DodadiVoKosnicka kosnicka = new DodadiVoKosnicka();
    ListItem stavka = new ListItem();
    List<ListItem> lista = new List<ListItem>();
    stavka = kosnicka.novaStavka(lstPredlog.SelectedItem.Text);

    lstKosnicka.DataSource = Session["kosnicka"] as List<ListItem>;
    lstKosnicka.Items.Add(stavka);
    lstKosnicka.DataBind();
    Session["kosnicka"] = lstKosnicka;
    lstPredlog.SelectedIndex = -1;

} 
```

还有一个带有其他名为 lstKosnickaNajava 的列表框的 webForm，我想使用 Session["kosnicka"] 用与 lstKosnicka 相同的项目来填充这个列表，但是出了点问题。这是 Najava.aspx 代码：

```
protected void Page_Load(object sender, EventArgs e)
{

    HttpCookie kolace = Request.Cookies["korisnik"];
    if (kolace != null)
    {
        lblNajavenKorisnik.Text = "Најавен коринсик " + kolace["KorisnickoIme"];
    }
    else
    {
        lblNajavenKorisnik.Text = "Нема најавени корисници";
    }

    if (!IsPostBack)
    {

        lstKosnickaNajava.DataSource = Session["kosnicka"] as List<ListItem>;

        lstKosnickaNajava.DataBind();

    }
} 
```

但是当我从第一页转到 Najava.aspx 时， lstKosnickaNajava 是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:23:27.150

也许您应该在 btnDodadi_Click() 中尝试此代码

```
 List<string> lista;
       if (Session["kosnicka"] == null)
        {
            lista = new List<string>();

        }
        else
        {
            lista=(List<string>)Session["kosnicka"];

        } 
```

如果您只添加文本，则列表项可以是字符串。我忘了问也许你在 PAge_Load 方法中这样做？

# python - 如何关闭 MDIParentFrame 中的所有 MDIChildFrame？

> ID：11450886
> 
> 赞同：1
> 
> 时间：2012-07-12T11:30:38.620
> 
> 标签：python, wxpython, wxwidgets

如何关闭 MDIParentFrame 中的所有 MDIChildFrame？是否有内置功能可以做到这一点？

```
frame = MyFrame(None) #MDIParentFrame
frame.Show()

child1 = MDIChildFrame(frame, "MDIChildFrame")
child1.Show() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T12:06:22.790

您可以尝试通过[GetClientWindow()](http://docs.wxwidgets.org/trunk/classwx_m_d_i_parent_frame.html#ad56178287336d30e658c636a8cb096da)方法获取客户端窗口，然后通过[GetChildren()](http://docs.wxwidgets.org/trunk/classwx_window.html#ad500085ad0511879b5e018706c91a494)获取该客户端窗口的子窗口列表，遍历该列表，使用[IsKindOf()](http://docs.wxwidgets.org/trunk/classwx_object.html#af40d580385cf4f8112fae7713404b01e)宏检查子窗口是否为 wxMDIChildFrame，如果返回 true然后调用[Close()](http://docs.wxwidgets.org/trunk/classwx_window.html#a3e44f4a494fc9ef4346c4fba70c8de0c)。wxPython 类应该具有与 C++ 版本相同的方法列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T12:19:06.867

使用 wxWindow::GetChildren() 会不会简单很多

[http://docs.wxwidgets.org/2.8/wx_wxwindow.html#wxwindowgetchildren](http://docs.wxwidgets.org/2.8/wx_wxwindow.html#wxwindowgetchildren)

但是你必须小心：MDIChildFrame 窗口不是 MDIParentFrame 的子级，它们是通过 wxMDIClientWindow 的孙子级

[http://docs.wxwidgets.org/2.8/wx_wxmdiclientwindow.html](http://docs.wxwidgets.org/2.8/wx_wxmdiclientwindow.html)

# android - Android在自定义对话框中更改imageview的背景不起作用

> ID：11450887
> 
> 赞同：0
> 
> 时间：2012-07-12T11:30:46.943
> 
> 标签：android, dialog, imageview

这是我的代码：

```
private void setWeatherDialogInfoAndIcons(){
    WeatherGoogle weather = WeatherGoogle.getInstance("istanbul");
    String iconsPath = Environment.getExternalStorageDirectory().getAbsolutePath()+"/arla/images/hava/";
    String[] allData = weather.getCityData().split("<>");

    currentImage = (ImageView) customDialog.findViewById(R.id.imageViewcurrentWeatherImage );
    currentInfo  = (TextView) customDialog.findViewById( R.id.textViewCurrentInfo )  ;
    currentInfo.setText( allData[0] +"\n"+allData[1]+"\n"+allData[2]+"\n"+allData[3] );

    currentImage.setBackgroundResource(R.drawable.air);
    currentImage.setBackgroundDrawable( UiHelper.getDrawableFromSdcard(iconsPath + weather.getIconName(0)) );

    int j = 4;
    for (int i = 0; i < dayInfos.size() ; i++) {
        dayInfos.get(i).setText( allData[j] +"\nMin  : "+ allData[j+1] +"\nMaks: "+ allData[j+2] 
                + "\n" + allData[j+3]   );
        j+=4;
    }

} 
```

我可以更改 textviews 的文本，但是当我想设置 imageviev(currentImage) 的背景时它不起作用，它显示对话框但**Imageview**中没有背景。

```
 currentImage.setBackgroundDrawable( UiHelper.getDrawableFromSdcard(iconsPath + weather.getIconName(0)) ); 
```

我确信我的方法**getDrawableFromSdcard**有效，因为我在代码中的其他地方使用了它最后我检查了 png 图标及其路径。那么可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:54:01.173

```
currentImage.setBackgroundDrawable(getResources.getDrawable(R.drawable.air)); 
```

从 SD 卡：

```
Bitmap picture = BitmapFactory.decodeFile("file_path");
imageView.setImageBitmap(picture); 
```

尝试一下。祝你好运！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-12T11:51:43.957

该方法`setBackgroundDrawable(Drawable background)`已弃用。你必须`setBackground(Drawable)`改用。请参阅[参考资料](http://developer.android.com/reference/android/view/View.html#setBackgroundDrawable%28android.graphics.drawable.Drawable%29)

# symfony - 根据页面更改代码

> ID：11450895
> 
> 赞同：1
> 
> 时间：2012-07-12T11:31:27.627
> 
> 标签：symfony, twig

我有一个带有以下代码的树枝模板（带有 twitter 引导程序） - 它是一个导航栏：

```
<ul class="nav">
    <li class="active"><a href="#">Modul 1</a></li>
    <li><a href="#about">Modul 2</a></li>
    <li><a href="#contact">Modul 3</a></li>
</ul> 
```

这段代码在我的 global.html.twig 中。所以我想根据打开的页面更改列表元素中的 class="active" 。

如何在不在模板中添加太多逻辑的情况下实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T11:46:17.190

在没有太多开销的情况下实现这一点的唯一方法是使用[KnpLabs/KnpMenuBundle](https://github.com/KnpLabs/KnpMenuBundle)。

在您的 global.html.twig 中：

```
<ul class="nav">
  {{ knp_menu_render('YourModule1Bundle:MenuBuilder:module1Menu', {'currentClass': 'active'}) }}
  {{ knp_menu_render('YourModule2Bundle:MenuBuilder:module2Menu', {'currentClass': 'active'}) }}
  {{ knp_menu_render('YourModule3Bundle:MenuBuilder:module3Menu', {'currentClass': 'active'}) }}
</ul> 
```

在您的 Module1 捆绑目录中：

*   创建`Menu`文件夹
*   创建`MenuBuilder.php`如下：

-

```
<?php
namespace YourMenu1Bundle\Menu;

use Knp\Menu\FactoryInterface;
use Symfony\Component\DependencyInjection\ContainerAware;

class MenuBuilder extends ContainerAware
{
  public function applicationMenu(FactoryInterface $factory, array $options)
  {
      $rootMenu = $factory->createItem('rootMenu');
      $rootMenu->setChildrenAttributes(array('class' => 'nav'));
      $rootMenu->setCurrentUri($this->container->get('request')->getRequestUri());
      $menu = $rootMenu->addChild('Module 1', array('route' => 'the_wanted_route'));
      return $rootMenu;
  }
} 
```

# asp.net-mvc-3 - ASP.NET MVC 3 Web 应用程序中的 500 内部服务器错误

> ID：11450896
> 
> 赞同：0
> 
> 时间：2012-07-12T11:31:31.217
> 
> 标签：asp.net-mvc-3, httpwebrequest

我在 ASP MVC 3 中有一个 Web 应用程序。在开发环境中，一切正常，在生产环境中，有一个页面会引发 500 错误，但不是每次都抛出。例如，第一次打开此页面时它可以工作，但是当我打开 3 次时，它会抛出此 500 错误。

我认为这可能是超时问题，所以我在 web.config 文件中添加了这段代码：

```
<httpRuntime executionTimeout="3600" maxRequestLength="2147483647" /> 
```

但它并没有解决问题。

有什么建议么 ？

编辑

这是调用局部视图的操作：

```
public ActionResult _PopupDiscussion(int? id)
    {
        ViewBag.id = id == null ? null : id;
        return PartialView("PartialViews/_PopupDiscussion");
    } 
```

然后在局部视图中有一个调用此操作的 AJAX 请求：

```
public ViewResult PopupDiscussion_Content(DiscussionModelView model, int? id)
    {
        ViewBag.id = id;
        // some code here
        return View(model);
    } 
```

我试图关闭这样的自定义错误：

```
<system.web>
    <customErrors mode="Off"/>
</system.web> 
```

但它没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:05:03.193

这是由于从局部视图调用控制器内部的操作引起的。`@Html.Partial()`我通过使用而不是修改了这个`@Html.Action()`，一切正常

# ruby - 将一个模块包含到一个类中，该类方法引用要包含的模块

> ID：11450897
> 
> 赞同：0
> 
> 时间：2012-07-12T11:31:38.003
> 
> 标签：ruby, metaprogramming

我有以下示例

```
class Test
  configure_helper
end

module ConfigureHelper
  module ClassMethods
    def configure_helper
    end
  end
end 
```

ConfigureHelper 具有更多功能，可以使用包含该模块的 ClassMethods 扩展类。

所以问题是，如果我使用以下代码包含模块

```
Test.send :include, ConfigureHelper 
```

测试类将被加载，并为 configure_helper 引发 NoMethodError。

有什么方法可以附加 configure_helper 方法，这样 configure_helper 就不会被调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:33:59.207

为什么不在类定义中包含模块呢？

```
module ConfigureHelper
  def self.included base
    base.extend ClassMethods
  end

  module ClassMethods
    def configure_helper
    end
  end
end

class Test
  include ConfigureHelper

  configure_helper
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:49:34.923

试试看

```
 class Test
    end

    module ConfigureHelper
      module ClassMethods
       def self.included(base)
         base.class_eval do
           def configure_helper
              p 'Yes'
           end
         end
       end
      end
    end

    Test.send(:include, ConfigureHelper::ClassMethods)

    Test.new.configure_helper 
```

# c - 用作 errno 的局部变量地址

> ID：11450898
> 
> 赞同：-2
> 
> 时间：2012-07-12T11:31:42.810
> 
> 标签：c, memory, malloc, local-variables

```
#include<stdio.h>

struct a
{
    void *ptr;
    unsigned long val;
};

void main()
{
    unsigned char errno;

    struct a *id;
    id = malloc(sizeof(*id));
    func2(id);
    printf("After changing %d\n", id->val);
}

void func2(struct a *id)
{
    unsigned char errno;
    func(id,&errno);
}

void func(struct a *id,void *ptr)
{   
    memset(id, 0, sizeof(*id));

    id->ptr = ptr;
    if (sizeof(id->val) >= sizeof(id->ptr))
    {   
        id->val = (unsigned long)id->ptr;
        return;
    }

} 
```

当我在主要功能中打印 id->val 时，它正在打印 -1075050593 。但我试图访问一个无效的地址。请解释。我对c编程很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:50:41.057

通常，什么是“访问无效地址”？它由 2 个部分组成。1、访问：包括读/写/执行。2、无效地址：内核空间和未分配的堆是用户应用程序的无效地址。

在这种情况下，地址 (&errno) 属于堆栈，因此它不是无效地址。而且您不会读取/写入/执行此地址中的内容。所以你没有访问无效的地址。

顺便说一句，在 printf() 调用中使用“%d”占位符，“id->val”将被解释为带符号的 int 类型，这就是你得到负值的原因。请使用“%p”作为指针，使用“%u”作为无符号整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:40:49.223

以下语句**不尝试访问无效地址，它只是打印地址**：

```
printf("After changing %d\n", id->val); 
```

它将持有什么值是未知的，因为`id`它被错误地传递给`func2()`.

代码的一些问题（一些已经在评论中提到）：

*   `id`传递给时错误地取地址`func2()`as`id`已经是`struct a*`
*   `memset()`和`malloc()`as的隐式声明包含指令
*   `func()`和的隐式声明`func2()`
*   返回类型`main()`应该是`int`

# c - 将指针及其地址转换为整数指针

> ID：11450899
> 
> 赞同：1
> 
> 时间：2012-07-12T11:31:46.927
> 
> 标签：c

以下两个作业有什么区别？

```
int main()
{
    int a=10;
    int* p=  &a;

    int* q = (int*)p; <-------------------------
    int* r = (int*)&p; <-------------------------
} 
```

我对这两个声明的行为感到非常困惑。
**我什么时候应该使用一个而不是另一个？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T11:33:34.600

```
int* q = (int*)p; 
```

是正确的，尽管太冗长了。`int* q = p`足够了。`q`和都是指针`p`。`int`

```
int* r = (int*)&p; 
```

不正确（从逻辑上讲，虽然它可能会编译），因为`&p`is an`int**`但是`r`是`int*`. 我想不出你想要这个的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T11:52:48.257

```
#include <stdio.h>
int main()
{
    int a = 10;   /* a has been initialized with value 10*/

    int * p = &a; /* a address has been given to variable p which is a integer type pointer
                   * which means, p will be pointing to the value on address of a*/

    int * q = p ; /*q is a pointer to an integer, q which is having the value contained by p,                     * q--> p --> &a; these will be *(pointer) to value of a which is 10;

    int * r = (int*) &p;/* this is correct because r keeping address of p, 
                         * which means p value will be pointer by r but if u want
                         * to reference a, its not so correct.
                         * int ** r = &p; 
                         * r-->(&p)--->*(&p)-->**(&p)                             
                         */
       return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T11:35:33.663

```
int main()
{
    int a=10;
    int* p=  &a;

    int* q  = p; /* q and p both point to a */
    int* r  = (int*)&p; /* this is not correct: */
    int **r = &p; /* this is correct, r points to p, p points to a */

    *r = 0; /* now r still points to p, but p points to NULL, a is still 10 */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T14:31:53.053

类型很重要。

表达式`p`具有类型`int *`（指向 的指针`int`），因此表达式`&p`具有类型`int **`（指向指向的指针的指针`int`）。这些是不同的、*不兼容*的类型；如果没有显式强制转换，您不能将类型的值分配给类型`int **`的变量`int *`。

*正确*的做法是写

```
int  *q = p;
int **r = &p; 
```

除非您知道*为什么*需要将值转换为不同的类型，否则您永远不应该在赋值中使用显式强制转换。

# android - 将参数从一个 apk 发送到另一个

> ID：11450901
> 
> 赞同：0
> 
> 时间：2012-07-12T11:31:49.283
> 
> 标签：android, android-intent, apk

我可以通过单击其他 apk 的按钮来启动 apk。但我也必须发送参数。就像我在文本中给出值并且当我单击按钮时它应该将参数发送到其他 apk 以及它应该启动其他 apk。我知道如何在同一个包中的活动之间发送参数。请指导我该怎么做。

**更新：** 我已成功运行该 apk。我只需要输入包名而不是类名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:36:32.577

`i.putExtra(param, value);//Put extra values to your intents,`如果您使用意图来启动另一个应用程序，请使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:37:43.583

您需要使用内容提供程序在 Android 中的不同应用程序之间共享数据。[这里](http://www.androidcompetencycenter.com/2009/01/basics-of-android-part-iv-android-content-providers/)

是如何使用它们的示例。您需要有一个 URI 来标识您的数据集，并在另一个应用程序中使用相同的 URI 来从中检索数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T11:37:51.540

使用 Intent，如[Android 开发者文档或](http://developer.android.com/reference/android/content/Intent.html)[互联网上的](http://www.desctrl.com/2011/05/16/android-intent-with-parameters/)许多教程中所述。

您应该使用 Bundles 来传递参数，您可以在此处阅读。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T11:59:24.393

您可以使用公共目录中的文件来连接不同的应用程序，或者基本上您可以在运行另一个应用程序的第一个应用程序中使用 serversocket，因此第二个应用程序可以连接它并向/从第一个应用程序传输数据。

# html - 使用类右对齐文本

> ID：11450902
> 
> 赞同：0
> 
> 时间：2012-07-12T11:31:51.653
> 
> 标签：html

参考这个[Stackoverflow 接受的答案](https://stackoverflow.com/questions/167027/how-do-you-right-justify-text-in-an-html-textbox)

```
input {
    text-align:right;
}

<html>
    <head>
        <title>Blah</title>
        <style type="text/css">
        input { text-align:right; }
        </style>
    </head>
    <body>
        <input type="text" value="2">
    </body>
</html> 
```

这种方法将正确证明所有文本框。如何使用一个类将我想要的文本框与那些我不想要的文本框分开？

```
<STYLE>
        NumericInput
        {
            text-align:right;
        }
</STYLE>
       <asp:TextBox ID="txtRndRbtAmt" runat="server" CssClass="NumericInput" Enabled="False" Width="100px"></asp:TextBox> 
```

除非我将 textn 包含在一个 DIV 中并将 teh NumericInput 类分配给 teh DIV，否则这不起作用。

DIV 可以避免吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:34:15.820

类选择器以`.`句点符号开头。

所以应该是：

```
.NumericInput{
    text-align:right;
} 
```

**或者你可以写：**

```
input.NumericInput{
    text-align:right;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T11:33:59.360

您使用了错误的选择器。采用

```
.NumericInput {
  text-align:right;
} 
```

（注意点）

# knockout.js - 我可以使用淘汰赛作为模板引擎吗？

> ID：11450906
> 
> 赞同：3
> 
> 时间：2012-07-12T11:32:02.043
> 
> 标签：knockout.js, jquery-templates, knockout-2.0

我在我的项目中使用了敲除和 jQuery.tmpl 框架，有时我只使用 jquery-tmpl 来生成这样的 HTML：

```
var html = $("#template").tmpl(data);
html.appendTo(destElement); 
```

我不喜欢这样的地方，我有用于绑定的淘汰模板和用于 html 生成和绑定的 jquery 模板。

我想知道敲除是否像 jquery tmpl 那样提供从模板生成 html 的能力。如果是这样，我将完全删除 jquery-tmpl，因为在大多数情况下，我只将它用于从模板生成 html。

请指教

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:24:56.893

AFAIK Knockout 不支持像 jQuery 模板那样将预编译模板存储为 JavaScript 变量。

因此，您在问题中给出的示例仅使用 Knockout 模板绑定是不可能的。绑定确实为[渲染后和渲染后提供了一些回调](http://knockoutjs.com/documentation/template-binding.html#note_3_using_afterrender_afteradd_and_beforeremove)，但是这并不完全相同，因为这些回调的输入是已编译的 DOM 元素，而不是对其的 JavaScript 引用。

在我们当前的项目中，我们使用[Handlebars](http://handlebarsjs.com/)作为我们的模板引擎，我选择它的两个主要原因：

1.  jQuery 模板已被弃用，目前不存在官方插件，并且 jQuery UI 团队不清楚它们何时/是否将模板包含在核心中。
2.  使用 Handlebars，您可以提取模板以分离 .handlebars 文件，这些文件可以从命令行预编译。

**我不使用淘汰模板绑定**，我所有的模板都被提取到单独的文件中，并被预编译为单独的 .js 文件。我所要做的就是包含已编译的 .js 文件，我可以将模板作为 JS 变量访问。

如果您选择 jQuery 模板并想要预编译您的模板，您要么必须将所有模板添加到一个 HTML 文件并编写一些 JavaScript 来获取每个模板并将其转换为 JavaScript，要么您可以编写一个小节点接受您的模板，转换它们并再次输出它们的应用程序。

# openerp - openerp 工资单（使用以前的工资单数据）

> ID：11450911
> 
> 赞同：1
> 
> 时间：2012-07-12T11:32:18.600
> 
> 标签：openerp

我想使用 OpenERP 工资单计算假期付款。我设法根据我的需要成功地配置了工资计算，但我一直坚持将以前的工资单数据用于新的数据）。

我想要做的是计算假期付款，这需要使用前三个月的总（或布鲁托）工资和工作日（在那三个月）并获得这三个月的平均美元/天。然后我可以使用这个参数来计算员工应该为他的假期得到多少钱。

我只是找不到使用此类数据的方法，因为目前正在使用所有数据（如规则、类别、输入）。

有谁知道该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T13:43:55.213

使用 python 表达式的薪水规则有一个可用的`payslip`对象。这个对象有`sum`方法：

```
def sum(self, code, from_date, to_date=None) 
```

可能您可以编写包含以下内容的规则：

```
payslip.sum('GROSS', a_start_date, a_end_date) 
```

您需要添加表达式来计算您的星号和结束日期，但我不确定您的`datetime`and`timedelta`对象是否在评估的表达式中可用......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T07:05:36.543

很高兴听到您对工资单进行了正确的配置，因为工资单引擎非常强大且技术性很强，但是关于您的假期付款，这纯粹是一种自定义，通用实施没有像这样的任何特殊功能，

但是如果你想让它成为工资单的一部分，是的，你总是可以用一些复杂的 Python 代码来计算你的要求。你有像这样的变量：

```
# employee: hr.employee object
# rules: object containing the rules code (previously computed)
**# worked_days: object containing the computed worked days.**
# inputs: object containing the computed inputs. 
```

希望这会有所帮助谢谢

# c# - MVC 绑定复选框以反转其含义

> ID：11450913
> 
> 赞同：1
> 
> 时间：2012-07-12T11:32:25.473
> 
> 标签：c#, asp.net, asp.net-mvc, razor, checkbox

在我的模型类中，我有一个布尔属性`DoNotEmail`。

在我被赋予创建视图的 UI 设计中，复选框的含义是相反的；即复选框旁边的标签说`"Send Email"`。

通常我会像这样添加复选框：`@Html.CheckBoxFor(model => model.DoNotEmail)`但显然这是错误的方式。

我是否需要为此复选框创建一个具有自定义属性的单独视图模型，还是有一些聪明的方法可以做类似的事情：（`@Html.CheckBoxFor(model => !model.DoNotEmail)` 这显然不起作用）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T12:02:50.213

将实体直接传递给您的视图绝不是一个好主意，如果您的数据库架构发生变化，您将不得不遍历所有视图并更新它们。我建议创建一个`ViewModel`并仅传递视图所需的数据，然后将您的`DoNotEmail`属性映射到控制器中。这样您就可以维护模型/视图之间的抽象并保持视图简单，例如

```
public void ViewModel
{
    [DisplayName("Send Email")]
    public bool SendEmailNotification { get; set; }
} 
```

**看法**

```
@model ViewModel

@Html.CheckBoxFor(m => m.SendEmailNotifications) 
```

**控制器**

```
public void Post(ViewModel model)
{
    var entity = ...;
    entity.DoNotEmail = !model.SendEmailNotification;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T11:56:47.357

可以称为解决方法的最简单方法是：

使 DontEmail 成为隐藏值。并创建一个复选框。将 jquery 事件绑定到它，并在选择时反转 DontEmail 的值。我希望我不需要输入代码来解释这一点。如果需要，请告诉我。

# c# - 内存泄漏实体框架

> ID：11450917
> 
> 赞同：3
> 
> 时间：2012-07-12T11:32:33.293
> 
> 标签：c#, .net, entity-framework, entity-framework-4, sql-server-ce

将实体框架与 SQL Server Compact Edition 一起使用时出现内存泄漏。我的情况：

我有一个大约 600MByte 大的文件。我逐行阅读，创建一个实体类并将其添加到 SQL Server CE 数据库中。内存因此增长得非常快。Gen 0 Collections 计数器和 Gen 2 Heap Size 增长非常快（来自 Process Explorer 的信息）。如果我理解正确的 Gen 2 Heap 是用于大对象的。我认为我的实体类是一个大对象。所以 Entity Framework 保存我的对象而不释放它们。我已经尝试将它们分离并调用 GC.Collect(2) 但它没有帮助。

首先，我阅读了这条线。然后在解析行后创建一个对象。然后将其添加到数据库。这是我的数据库代码：

```
DBEntities dbConnection = new DBEntities();
dbConnection.My_Table.AddObject(MyObjectCreatedFromTheLine);
dbConnection.SaveChanges();
//  dbConnection.Detach(MyObjectCreatedFromTheLine);
//  dbConnection.Dispose();
MyObjectCreatedFromTheLine = null;
dbConnection = null; 
```

我还读到创建的实体类（`MyObjectCreatedFromTheLine`）属于`DbContext`。所以我为每一行调用这段代码，每次都创建一个新的上下文。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T14:28:06.980

我在尝试使用实体框架将 50,000 多条记录插入 SQL 数据库时遇到了这个问题。实体框架不适用于大型批量操作（大型插入或删除操作），因此我最终使用了 System.Data.SqlClient.SqlBulkCopy 库，它更高效、更快。我什至编写了以下帮助函数来自动映射，因此我不必手动构造 SQL 插入语句。（它与类型无关！我认为）。

基本上工作流程是： IList<MyEntityType> -> DataTable -> SqlBulkCopy

```
public static void BulkInsert<T>(string connection, string tableName, IList<T> list)
    {
        using (var bulkCopy = new SqlBulkCopy(connection, SqlBulkCopyOptions.KeepNulls))
        {
            bulkCopy.BatchSize = list.Count;
            bulkCopy.DestinationTableName = tableName;
            bulkCopy.BulkCopyTimeout = 3000;

            var table = new DataTable();
            var props = TypeDescriptor.GetProperties(typeof(T))
                //Dirty hack to make sure we only have system data types 
                //i.e. filter out the relationships/collections
                                       .Cast<PropertyDescriptor>()
                                       .Where(propertyInfo => propertyInfo.PropertyType.Namespace.Equals("System"))
                                       .ToArray();

            foreach (var propertyInfo in props)
            {
                bulkCopy.ColumnMappings.Add(propertyInfo.Name, propertyInfo.Name);
                table.Columns.Add(propertyInfo.Name, Nullable.GetUnderlyingType(propertyInfo.PropertyType) ?? propertyInfo.PropertyType);
            }

            var values = new object[props.Length];
            foreach (var item in list)
            {
                for (var i = 0; i < values.Length; i++)
                {
                    values[i] = props[i].GetValue(item);
                }

                table.Rows.Add(values);
            }

            bulkCopy.WriteToServer(table);
        }
    } 
```

在我的示例中，我从 15-20 分钟插入到不到一分钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T12:51:51.777

我不认为通过数据上下文添加大量实体是最好的方法。对于每个创建的对象，您都会消耗内存，因为数据上下文有一个内部 1 级缓存，其中对象会一直保留到上下文被释放。

我不太了解EF，也不知道每次持久化一个对象时是否可以清除缓存。但是，我宁愿选择根本不使用 EF 来执行大量插入。

相反，使用`SqlBulkCopy`类。它应该可以解决您的内存问题，而且它比您使用 EF 和每个对象插入所能实现的任何东西都快一个数量级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T09:19:51.600

让你的 DBEntities dbConnection = new DBEntities() 退出循环！？

在每次迭代中创建新的对象上下文既荒谬又无关紧要。

此外，分配需要更多时间，尤其是对于这样的大对象，更不用说内存开销和可能是问题的释放。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T11:46:27.790

我觉得你的方法不对。只需创建一个`DBEntities`对象即可保存所有更改。像下面这样的东西可能会起作用；

```
using(DBEntities dbConnection = new DBEntities())
{
    foreach(MyObjectCreatedFromTheLine entity in ListOfMyObjectCreatedFromTheLine)
    {
        dbConnection.My_Table.AddObject(MyObjectCreatedFromTheLine);
    }
    dbConnection.SaveChanges();
} 
```

您正在为`DBEntities`每个实体创建一个新对象，这根本不对。只是将 dbConnection 设置为 null 并不意味着对象已被释放或垃圾收集器不会收集它。事实上，你只是将引用设置为 null，对象还在内存中，垃圾收集器会收集该对象。

# html - 为什么 iOS Safari 上相邻的 DIV 之间有明显的间隙？

> ID：11450934
> 
> 赞同：1
> 
> 时间：2012-07-12T07:44:22.940
> 
> 标签：html, css, mobile-safari

在把我所有的头发都拉出来之后，它已经归结为这个最小的 html 页面，它似乎在 iOS 上呈现错误：

```
<!doctype html>
<html>
<head>

<style type="text/css">

#fold
{
    background:url(https://s3.amazonaws.com/gigantt_pub_imgs/2012/07/1342078193.png) top left;
    min-height:350px;
}

#features
{
    background:url(https://s3.amazonaws.com/gigantt_pub_imgs/2012/07/1342078193.png) top left;
    min-height:350px;       
}   
</style>
</head>
<body>
    <div id="fold">
    </div>
    <div id="features">

    </div>
</body>
</html> 
```

在 iOS 中查看时（或者在 iOS 模拟器中），您可以在两个蓝色 div 之间看到一条线。

![在此处输入图像描述](../Images/c48b3ea9b2a9b77fb5c9d38f9e73cfed.png)

如果放大，这条白线会消失。当然，它在我尝试过的任何其他桌面浏览器中也不可见。

所以，我是疯了还是其他人得到了这个？知道如何解决它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T13:32:20.067

它可以被解释为一个错误（我认为是）——但它与[iOS 处理背景图像](http://stevegardner.net/2011/05/31/fix-for-gaps-in-background-images-on-iphone-and-ipad/)的方式有关。

快速回答 - 为您的元素之一添加负边距。[请参阅此 JSFiddle](http://jsfiddle.net/QPR4H/6/)。

相关部分是这样的：

```
#features
{
    background:url(https://s3.amazonaws.com/gigantt_pub_imgs/2012/07/1342078193.png) top left;
    min-height:350px;
    margin-top: -2px;    
} 
```

您可以使用媒体查询来定位它。

# java - 如何在 javacv 中访问 CvSeq 中的点？

> ID：11450938
> 
> 赞同：4
> 
> 时间：2012-07-12T11:33:51.857
> 
> 标签：java, javacv

我正在使用 javacv 开发项目，并且能够识别多边形并将该详细信息存储在 CvSeq 中。我尝试访问该结构中的点，但它对我不起作用。那么请有人解释一下如何在javacv的CvSeq结构中访问点？

例如，我需要访问下图的 8 个边缘点。所以我可以访问多边形每一边的长度。

![在此处输入图像描述](../Images/38fb260e71560c5a23da2c3f890c2306.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T15:35:30.820

您可以通过以下课程来识别 CvSeq 的要点。此方法用于识别 CvSeq 中的点。

```
 for(int i = 0; i < rslt.total(); i++){
                CvPoint v=new CvPoint(cvGetSeqElem(rslt, i));
                cvDrawCircle(image, v, 5, CvScalar.BLUE, -1, 8, 0);
                System.out.println(" X value = "+v.x()+" ; Y value ="+v.y());
        } 
```

在上述方法中，rslt 是包含轮廓细节的 CvSeq，在 cvDrawCircle() 方法中，它将在每个点上用蓝色绘制圆圈。下一行将打印每个点的 x,y 坐标。

```
 import com.googlecode.javacpp.Loader;
    import com.googlecode.javacv.CanvasFrame;
    import static com.googlecode.javacpp.Loader.*;
    import static com.googlecode.javacv.cpp.opencv_core.*;
    import static com.googlecode.javacv.cpp.opencv_highgui.*;
    import static com.googlecode.javacv.cpp.opencv_imgproc.*;

    public class Test {
        public static void main(String[] args) {
            CvMemStorage storage=CvMemStorage.create();
            CvSeq squares = new CvContour();
            squares = cvCreateSeq(0, sizeof(CvContour.class), sizeof(CvSeq.class), storage);
            String path="C:/Users/Smash/Desktop/A.PNG";
            IplImage src = cvLoadImage(path);//hear path is actual path to image
            IplImage gry=cvCreateImage(cvGetSize(src),IPL_DEPTH_8U,1);
            cvCvtColor(src, gry, CV_BGR2GRAY);
            cvFindContours(gry, storage, squares, Loader.sizeof(CvContour.class), CV_RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE);
            CvSeq ss=null;
            for (int i=0; i<1; i++)
            {
                cvDrawContours(gry, squares, CvScalar.WHITE, CV_RGB(248, 18, 18), 1, -1, 8);
                ss=cvApproxPoly(squares, sizeof(CvContour.class), storage, CV_POLY_APPROX_DP, 8, 0);
            }
            if(!ss.isNull()){
                drawPoly(src, ss);
            }
        }
        public static void drawPoly( IplImage image, final CvSeq Poly )
        {
            CvSeq rslt=cvApproxPoly(Poly, Loader.sizeof(CvContour.class), cvCreateMemStorage(0), CV_POLY_APPROX_DP, cvContourPerimeter(Poly)*0.02, 0);
            System.out.println(rslt.total());
            for(int i = 0; i < rslt.total(); i++){
                    CvPoint v=new CvPoint(cvGetSeqElem(rslt, i));
                    cvDrawCircle(image, v, 5, CvScalar.BLUE, -1, 8, 0);
                    System.out.println(" X value = "+v.x()+" ; Y value ="+v.y());
            }
            final CanvasFrame canvas = new CanvasFrame("Point Identify");
            canvas.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);
            canvas.showImage(image);
        }
    } 
```

这是输出图像

![在此处输入图像描述](../Images/b8524cd9156c9bb1e3e47430b4ebc7a2.png)

这是相关的 x,y 坐标

```
 X value = 72 ; Y value =61
 X value = 72 ; Y value =177
 X value = 211 ; Y value =178
 X value = 211 ; Y value =380
 X value = 315 ; Y value =380
 X value = 316 ; Y value =177
 X value = 465 ; Y value =177
 X value = 465 ; Y value =61 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T13:02:37.317

要访问 CvSeq 元素，可以使用 cvGetSeqElem() 和 CvPoint3D32f。

例如，如果 cvHoughCircles() 的输出存储在 CvSeq 圆中，那么您可以使用以下代码访问每个圆及其中心和半径。

```
for(int i = 0; i < circles.total(); i++){
        CvPoint3D32f circle = new CvPoint3D32f(cvGetSeqElem(circles, i));
        CvPoint center = cvPointFrom32f(new CvPoint2D32f(circle.x(), circle.y()));
        int radius = Math.round(circle.z());        
    } 
```

[您可以在http://opencvlover.blogspot.in/2012/07/hough-circle-in-javacv.html](http://opencvlover.blogspot.in/2012/07/hough-circle-in-javacv.html)找到完整的代码

**编辑**

您可以使用以下代码段访问 cvSeq 中的点

```
int i = 0;
while(cvSeq != null){
     i = i+1;        
     for(int j = 0; j < cvSeq.total(); j++){    
         Pointer line = cvGetSeqElem(cvSeq, j);
         CvPoint pt  = new CvPoint(line).position(0);        
     System.out.println("co-ordinate of  point "+ j + " : "+ pt);        
     }       
     cvSeq = cvSeq.h_next();
}
System.out.println("Number of contours: " + i); 
```

# html - 重定向到同一页面，但其中包含一条消息

> ID：11450944
> 
> 赞同：0
> 
> 时间：2012-07-12T05:59:29.180
> 
> 标签：html, javascript, ajax, jsp

我正在 JSP 中创建一个登录页面。我有一个`index.jsp`页面，其中存在表单和一些 javascript 脚本。连接到 oracle 数据库并检查数据库中的用户名和密码是在`check1.jsp`文件中完成的

我的问题是在输入用户名和密码后，当我按下登录按钮时，我已将表单链接到`check1.jsp`，如果用户名和密码匹配并存在，它会重定向到`welcome.jsp`，但如果用户名不存在或密码不匹配，我必须返回`index.jsp` **在框下方显示一条小消息，提示用户名不存在或密码不匹配**，目前我只是重定向到`index.jsp`。

`index.jsp`我应该如何在同一页面的登录框下方显示适当的小消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T11:53:35.797

您可以[`session`](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.6/api/javax/servlet/http/HttpSession.html)在此处使用对象：

在`check1.jsp`：

```
if (loginSuccess) {
    //redirect to welcome.jsp
}
else {
    session.setAttribute("error", "Username or Password is incorrect");
    //redirect to index.jsp
} 
```

在`index.jsp`：

```
String msg = session.getAttribute("error");
if (msg != null) {
    %><p style="color:red"><%= msg %></p><%
} 
```

EL 和 JSTL 还有其他更简单的方法，但这只是一个入门技巧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T11:40:16.383

在这种情况下，您不应重定向到 index.jsp，而应转发到 index.jsp。将消息存储在某个请求属性中，转发到 index.jsp，如果消息存在于请求属性中，则显示该消息。

您应该使用 MVC 框架，以便始终使您的 URL 指向用 Java 实现的操作（控制器），使这些操作调用业务逻辑（此处为用户登录）并将这些操作转发或重定向到适当的视图（index.jsp 或welcome.jsp）。

# axapta - AIF 或数据迁移框架 [AX 2012]

> ID：11450947
> 
> 赞同：0
> 
> 时间：2012-07-12T11:34:20.500
> 
> 标签：axapta, data-migration, dynamics-ax-2012, aif

我正在使用 AIF 将一些实体导入 AX 2012，并通过 C# ASP.Net 应用程序使用 Web 服务。我已经为`Customers`, `Vendors`,做好了`Workers`，`Chart of Accounts`现在开始了`General Journals`。

一些自定义我可以使用以下方法找到解决方法`AIF Document Service Wizard`：使用`DirDunsNumber`表的服务创建 DUNS 编号，然后将客户与新创建的 DUNS 编号相关联。在`Products`数据迁移上会需要很多这样的定制。

这个月我听说有这个新框架（[Data Migration Framework](http://technet.microsoft.com/en-us/library/jj225591)），仍然是测试版。

我想知道是否`Data Migration Framework` 会涵盖所有这些定制？与 AIF 相比，这个新框架有哪些优势？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:02:33.450

优于 AIF 的优势。然后我假设您指的是文档服务。那么第一个很大的区别是这两个框架的目的：

DMF 用于迁移大量数据，并且应该构建以有效地处理数据的导入（我重复“应该”，因为直到现在整个 DMF 代码还没有完全按“原样”优化性能）它使用 SQL Server将数据导入到应该比 AIF 更快的临时表中。

AIF 旨在构建与 Ax 集成的服务，并且更旨在处理“消息”而不是进行迁移。AIF 的最大缺点是格式（它使用soap XML 并通过模式验证，该模式要求消息采用某些格式，而您作为开发人员的控制较少）此外，我认为AIF 会导致开销而不是那样透明的框架。例如，您必须进行一些性能优化，例如缓存 EDT 的小数位数，因为它花费的时间太长）

在你的情况下，我会选择定制服务。与 AIF 服务相比，可以相对容易地构建和部署，并且您可以更好地控制您提供的要使用的数据合约。

简而言之：

*   使用 DMF 进行大型数据集的迁移和导入
*   使用自定义服务提供与 Dynamics AX 2012 通信的服务。这些是 WCF 服务，因此为非 AX 开发人员所熟知
*   如果您被迫这样做，请使用 AIF ;-)

如果您想了解 AIF（以及一般的 Dynamics AX 2012 服务），您可以看一下我和我的同事一起写的一本书：[Dynamics AX 2012 Services](http://www.packtpub.com/microsoft-dynamics-ax-2012-services/book)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:02:59.910

数据迁移框架可在[此处](http://informationsource.dynamics.com/RFPServicesOnline/RFPSLHost.aspx#/View/ToolsDownload.xaml)找到。

顾名思义，它的主要重点是“数据迁移”，即一次性将数据从系统迁移到 AX。

AIF 更多地用于业务数据（例如发票）的日常传输。

# scala - Scala 中的类型相等

> ID：11450949
> 
> 赞同：8
> 
> 时间：2012-07-12T11:34:25.240
> 
> 标签：scala

这是一小段代码：

```
class Foo[A] {
  def foo[B](param: SomeClass[B]) {
  //
  }
} 
```

现在，在里面`foo`，我如何：
1) 验证 B 是否与 A 类型相同？
2) 验证 B 是否是 A 的子类型？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T11:45:51.590

您需要隐式类型证据，`<:<`用于子类型检查和`=:=`相同类型检查。请参阅[此问题](https://stackoverflow.com/questions/3427345/what-do-and-mean-in-scala-2-8-and-where-are-they-documented)的答案。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-13T01:27:37.030

作为旁注，广义类型约束实际上不是必需的：

```
class Foo[A] {
  def foo_subParam[B <: A](param: SomeClass[B]) {...}
  def foo_supParam[B >: A](param: SomeClass[B]) {...}
  def foo_eqParam[B >: A <: A](param: SomeClass[B]) {...}
  def foo_subMyType[Dummy >: MyType <: A] {...}
  def foo_supMyType[Dummy >: A <: MyType] {...}
  def foo_eqMyType[Dummy1 >: MyType <: A, Dummy2 >: A <: MyType] {...}
} 
```

事实上，我更喜欢这种方式，因为它既能稍微改进类型推断，又能保证不使用无关的运行时数据。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-12T14:11:35.733

> 1）验证B是否与A相同类型？

```
class Foo[A] {
  def foo(param: SomeClass[A]) = ???
}

// or

class Foo[A] {
  def foo[B](param: SomeClass[B])(implicit ev: A =:= B) = ???
} 
```

> 2) 验证 B 是否是 A 的子类型？

```
class Foo[A] {
  def foo[B <: A](param: SomeClass[B]) = ???
}

// or

class Foo[A] {
  def foo[B](param: SomeClass[B])(implicit ev: B <:< A) = ???
} 
```

* * *

在您的情况下，您*不需要* [通用类型约束](http://debasishg.blogspot.in/2010/08/using-generalized-type-constraints-how.html)（即`=:=`, `<:<`）。当您需要在别处定义的类型参数上添加约束时，它们是必需的，而不是在方法上。

例如，确保`A`是`String`：

```
class Foo[A] {
  def regularMethod = ???
  def stringSpecificMethod(implicit ev: A =:= String) = ???
} 
```

在这里，如果没有通用类型约束，您将无法强制执行类型约束。

# objective-c - iOS 应用程序上的红色条

> ID：11450951
> 
> 赞同：2
> 
> 时间：2012-07-12T11:34:33.780
> 
> 标签：objective-c, ios, uitabbar

我正在开发一个应用程序，发生了一些非常奇怪的事情。我在我的主视图控制器上添加了一个位于屏幕底部的标签栏，从我启动应用程序的那一刻起，或者当我关闭它并且它在后台工作并再次打开它时，一个像导航栏一样的红色条看起来像一个在屏幕顶部闪烁。有谁知道这可能是什么？

想象一下，当您启动应用程序时，工具栏/导航栏之类的东西会在顶部出现半秒钟。我注意到在这个栏中出现了应用程序的名称

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:39:28.440

当您的应用程序设置为在后台运行时会发生这种情况（例如，在屏幕锁定后或另一个应用程序正在运行时。）

例如，如果您在 info.plist 中启用了音频背景服务，则：

```
 <key>UIBackgroundModes</key>    <array>
      <string>audio</string>    </array> 
```

并且您有一个具有正确类别的活动音频会话，然后您的应用程序将显示带有您的应用程序名称的红色条。要关闭它，您需要停止音频流（通过停止音频单元或图表），我认为您还需要将音频服务设置为关闭`AudioSessionSetActive(false)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:36:58.667

我相信这是 iOS 通知您麦克风正在使用中的方式。我在使用吉他调音器应用程序时注意到它。这可能是你看到它的原因吗？

# android - Obex 推送配置文件的 UUID

> ID：11450952
> 
> 赞同：0
> 
> 时间：2012-07-12T11:34:35.307
> 
> 标签：android

我尝试打开一个套接字来监听来自非安卓设备的传入连接。

```
 Parcelable[] uuidExtra = device.getUuids(); 
 String t = uuidExtra[0].toString(); 
 t = t.toUpperCase();
 Log.i("UUID: ", t); 
```

此代码段将为我提供蓝牙设备提供的服务的 UUID。LogCat 的输出是：

```
00001105-0000-1000-8000-00805F9B34FB 
```

我相信这是 Obex 对象推送配置文件的 UUID。我假设这是因为设备的制造商告诉我该设备仅支持协议：Obex Push Profile。

例如，当我尝试访问`Parcelable[]`数组中的第二个元素时，输出只会是

```
07-12 13:29:36.305: E/AndroidRuntime(6293): java.lang.ArrayIndexOutOfBoundsException: length=1; index=1 
```

我可以肯定地说我的数组只包含**一个**对象。

**因此，转到更多特定于 android 的蓝牙内容。**

我以这种方式使用此 UUID：

```
 try {
       tmp = adapter.listenUsingRfcommWithServiceRecord(device.getName(), UUID.fromString(t));
      } catch (IOException e) {
           Log.e(TAG, "FAILED BECAUSE: " + e.getMessage()); } 
```

异常向 LogCat 输出以下内容：

```
FAILED BECAUSE: Not able to register SDP record for: "name of the device" 
```

在谷歌搜索这个异常几个小时后，我仍然无法弄清楚如何为我的设备打开一个监听套接字。

有什么建议么？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:37:11.473

**因此，如果有人对此感到好奇，或者面临与我相同的问题，这里是解决方案：**

错误：`Not able to register SDP record for: "name of the device"`将被抛出，因为您正在尝试使用`UUID`已被占用的 aa 创建服务。在这种情况下，我尝试注册自己的服务，`UUID`与`Obex Object Push`

例如，我必须做的是使用自定义 UUID 注册我自己的服务

```
d1b180c0-d7bc-11e1-9b23-0800200c9a66 
```

此 UUID 是从此网页生成[的](http://www.famkruithof.net/uuid/uuidgen)。至于现在你已经创建了一个新的监听套接字：

```
 try {
        tmp = adapter.listenUsingInsecureRfcommWithServiceRecord("My Profile",   UUID.fromString("d1b180c0-d7bc-11e1-9b23-0800200c9a66"));
        } catch (IOException e) {
           Log.e("FAILED BECAUSE:", e.getMessage()); 
        } 
        mmServerSocket = tmp; 
```

我们现在已经准备好接受传入的请求了，这样：

```
socket = mmServerSocket.accept(); 
```

请记住，这是一个阻塞调用，因此对于您自己和您的用户，请将其放入`thread`.

**那么为什么我的设备没有连接到安卓服务器呢？**

1.  您确定远程设备/客户端使用与服务器相同的 UUID 吗？

2.  如果您无法为远程设备指定 UUID，请联系制造商，也许他们会很好地向您发送配置文件，这是我的情况。

如果有任何问题，请在这篇文章中添加评论。我会接受这个作为答案，因为没有人对此有解决方案。

# android - 短信号码不正确？

> ID：11450955
> 
> 赞同：0
> 
> 时间：2012-07-12T11:34:44.337
> 
> 标签：android, dropbox

我正在使用此代码从 Emulator 中检索 SMS。之后我需要将其发布到 DropBox。我将一些消息保存到 Emulator，它检索了 Number 和 Body 两件事。在检索时它显示了 **错误的 Numbers**但是正确的身体。如何更正数字，我将数字保存到变量**Number**中。我的代码在这里，我使用的是 2.1 版本。

**代码**

```
ContentResolver cr = getContentResolver();
Cursor c = getContentResolver().query(Uri.parse("content://sms/inbox"), null, null, null, null);
while(c.moveToNext()){

Number = c.getInt(c.getColumnIndexOrThrow("address"));

Body = c.getString(c.getColumnIndexOrThrow("body")).toString();

smslist.add( Number + ":" +"\n"+ Body);
    }
itemAdapter.notifyDataSetChanged();

c.close(); 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:42:45.503

在您使用的代码中

```
Number = c.getInt(c.getColumnIndexOrThrow("address")); 
```

用`c.getString(c.getColumnIndexOrThrow("address"))`方法代替`getInt()`方法

也请参见下面的链接，SMS uri 中的类型列

[检索号码。](https://stackoverflow.com/a/9343383/519718)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:48:24.800

将地址视为 String 而不是 Int。

我认为它应该可以解决问题。

String str = cursor.getString(c.getColumnIndexOrThrow("address"));

问候，

数据托盘。

# ios - 如何设置我的 iOS 故事板以像 Instagram Stream 一样弹跳？

> ID：11450959
> 
> 赞同：5
> 
> 时间：2012-07-12T11:34:58.007
> 
> 标签：ios, storyboard, instagram, bounce

我正在构建一个带有社交内容流的应用程序，并试图了解 instagram 如何在应用程序中流式传输。所以基本上是一个顶部标题，它从屏幕上滚动出来，但在它和内容之间反弹。我可以使顶部标题滚动到屏幕外，并且可以使视图不反弹，但我想使用 Pull 进行刷新，最终会超出“人造”导航栏`UIView`。我知道一个普通的导航栏会产生这个，但这个滚动的导航栏是另一回事。

目前我有`UITableview`一个`UIView`上面有一个`UITableViewCell`，一切都很好，除了反弹发生在上面`UIView`。我想我需要得到`UIView`上面的内容，`UITableView`但是在 UITableViewController 中，情节提要不允许我将`UIView`上面的`UITableView`.

有任何想法吗？？？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T14:58:23.117

好吧，我终于让这一切正常工作了，所以我想我会为每个人发布答案。

基本上我设置了一个标准的导航栏，然后`scrollViewDidScroll`我得到滚动的偏移量并根据它改变框架。这似乎工作得很好，我的 scrollViewDidScroll 方法见下文。

```
- (void)scrollViewDidScroll:(UIScrollView *)sender {

    //Initializing the views and the new frame sizes.
    UINavigationBar *navbar = self.navigationController.navigationBar;
    UIView *tableView = self.view;

    CGRect navBarFrame = self.navigationController.navigationBar.frame;
    CGRect tableFrame = self.view.frame;

    //changing the origin.y based on the current scroll view.
    //Adding +20 for the Status Bar since the offset is tied into that.
    navBarFrame.origin.y = MIN(0, (sender.contentOffset.y * -1)) +20;
    navbar.frame = navBarFrame;

    tableFrame.origin.y = MIN(0,MAX(-44,(sender.contentOffset.y * -1)));
    tableView.frame = tableFrame;

} 
```

Also you will want to make your TableView 44px taller to compensate for the scrolling otherwise your frame will not be big enough. I just did this in viewWillAppear and made the frame bigger.

# html - 将浮动 div 保持在同一行

> ID：11450962
> 
> 赞同：6
> 
> 时间：2012-07-12T11:35:36.690
> 
> 标签：html, css, css-float

如何将两个元素保持在同一行并固定右列？我希望右 div 具有固定大小，左列流动，但是当在左列插入长文本时，右列进入下一列..

示例：http: [//jsfiddle.net/Jbbxk/2/](http://jsfiddle.net/Jbbxk/2/)

有没有纯 CSS 解决方案？

**注意！Wrap div 必须有动态宽度！** 出于演示目的，它具有固定的宽度，因此它会自动换行。

干杯!

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T12:02:04.033

这是做你想做的事情的一种常见方式：

```
.wrap {
    position: relative;
    margin: 5px;
    border: 1px solid red;
}
.left {
    float: left;
    background-color: #CCC;
    margin-right: 48px;
}
.right {
    position: absolute;
    top: 0;
    right: 0;
    width: 48px;
    height: 48px;
    background-color: #888;
} 
```

解释：

*   **流体左列**填充整个宽度，但为右列节省空间`margin-right: [right column width];`
*   **固定右列**放置在绝对位置top 0，right 0（它的正确位置）
*   分配了**wrap div**`position: relative` ，因此根据它确定右列位置。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-12T11:57:16.587

它实际上比我想象的要容易，只需删除 float:left; 从左侧类中，并将您的右侧浮动项目放在 HTML 中它们上方

[更新小提琴](http://jsfiddle.net/Jbbxk/13/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-21T04:58:04.890

这是另一个解决方案。放`display: table-cell;`

[http://jsfiddle.net/Jbbxk/54/](http://jsfiddle.net/Jbbxk/54/)

```
.left {
    /*display: left;*/
    display: table-cell;
}
.right {
    float: right;
    display: table-cell;
} 
```

此外，浮动 div 首先出现：

```
<div class="right">
    &nbsp;
</div>
<div class="left">
    Looooooooong content - pushes right to next row<br>
    NOT OK
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T11:39:50.687

你可以做

```
.left {
    max-width: 152px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T11:46:04.813

因为你有动态宽度，所以使用 % like

```
.left {
float: left;
background-color: #CCC;
width:75%;
} 
```

我已经更新了小提琴链接：http: [//jsfiddle.net/Jbbxk/6/](http://jsfiddle.net/Jbbxk/6/)

# jquery - 如何在另一个 js 文件中导入一个 js 文件，就像我们在另一个 css 文件中导入 css 文件一样

> ID：11450965
> 
> 赞同：3
> 
> 时间：2012-07-12T11:35:43.107
> 
> 标签：jquery

我想知道如何在另一个 .js 文件中导入 .js 文件，就像我们如何在另一个 css 文件中导入 css 文件一样

all.css 文件是这样的.....

```
 @import "simple1.css";
     @import "simple2.css";
     @import "simple3.css";
     @import "simple4.css"; 
```

同样我想在我的 custom.js 文件中导入 js/jquery-1.7.1.min.js

custom.js 文件是这样的

```
 $(document).ready(function(){

    $("#AddImage").html("<img src='"+clientID+".jpg'/>");

    }); 
```

我不想包含 js/jquery-1.7.1.min.js 之类的

```
 <script type="text/javascript" src="js/jquery-1.7.1.min.js"></script> 
```

我想将它包含在我的 custom.js 文件中。

请帮忙！提前致谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-22T08:13:59.680

您可以创建如下功能。

```
function importJs(url)
{
    var head = document.getElementsByTagName('head')[0];
    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.src = url;

    head.appendChild(script);
} 
```

要运行代码，请参见下面的示例

```
importJs("myScript.js"); 
```

现在你可以`importJs()`在你的任何 js 中使用。您可以将其用于 JS ，类似于`@import`CSS。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T11:49:55.500

这段代码使用 jQuery 为我工作

```
$.getScript("myscript.js"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T11:45:14.560

这是这个插件[http://code.google.com/p/jquery-include/](http://code.google.com/p/jquery-include/)。这个 jQuery 插件提供了类似于 SSI 的基于浏览器的文件包含。

```
$(document).includeReady(function () {

        // initialisation code here
        // e.g. modify include dom

}); 
```

并使用它

```
<span data-src="includes/test1.html">

        <p class="error-msg">include has not loaded</p>

</span> 
```

# android - 如何在android中以系统/根目录运行应用程序

> ID：11450966
> 
> 赞同：2
> 
> 时间：2012-07-12T11:35:43.867
> 
> 标签：android, security, permissions, system, root

我一直在搜索这个主题，但我还没有找到一个明确的解决方案。据我所知，您可以在**AndroidManifest.xml中指定不同的****protectionLevel**，这些权限允许其他应用程序与您正在开发的应用程序进行交互。举个例子，假设我想杀死一个不是我的（来自另一个包）的进程，或者我想安装我开发的驱动程序。在这两种情况下，问题都是一样的，这些东西需要以系统/根用户身份运行。如何开发需要系统/root 权限的程序，是否需要特殊许可证？

 ****注意：**请注意授予权限：

```
<uses-permission android:name="android.permission.KILL_BACKGROUND_PROCESSES"/> 
```

使用`android:sharedUserId="android.uid.system"`也不起作用。

另外，考虑到我不能要求用户将他们的手机“植根”。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:39:55.070

利用

```
 Process myprocess = Runtime.getRuntime().exec("su"); 
```

请求根访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:54:51.800

这是不可能的。
要么要求用户 root 他们的设备，要么将应用程序的能力限制在没有 root 访问权限的情况下可以做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T09:24:36.843

是否可以不显示向用户请求 root 授权的 GUI？在有根设备中，作为系统应用程序安装在 /system/app 下**

# css - 在 css / html 中创建六边形

> ID：11450967
> 
> 赞同：0
> 
> 时间：2012-07-12T11:35:46.893
> 
> 标签：css, html

我试图在 css /html 中制作几个六边形，以类似于以下内容：

[http://www.asta-uk.com/sites/all/themes/asta/logo.png](http://www.asta-uk.com/sites/all/themes/asta/logo.png)

现在我制作了一个六边形，并尝试再复制两次，但顶部似乎没有显示在后两次上。

任何想法为什么？

PS 使用 IE，原因是它只会在 IE 环境中使用。

```
 <html>
     <HEAD>

       <STYLE>

.top 
{
    height:0;
    width:50;
    display: block;
    border:15px solid red;
    border-top-color:transparent;
    border-right-color:transparent;
    border-bottom-color:red;
    border-left-color:transparent;
}

.middle 
{
    height: 20px;
    background: red;
    width: 50px;
    display: block;
}

.bottom 
{
    height:0;
    width:50;
    display: block;
    border:15px solid red;
    border-top-color:red;
    border-right-color:transparent;
    border-bottom-color:transparent;
    border-left-color:transparent;
}

<!-- Second Hex-->

.top2 
{
    height:0;
    width:50;
    display: block;
    border: 15px solid black;
    border-top-color:transparent;
    border-right-color:transparent;
    border-bottom-color:black;
    border-left-color:transparent;
}

.middle2 
{
    height: 20px;
    background: black;
    width: 50px;
    display: block;
}

.bottom2 
{
    height:0;
    width:50;
    display: block;
    border:15px solid black;
    border-top-color:black;
    border-right-color:transparent;
    border-bottom-color:transparent;
    border-left-color:transparent;
}

<!--hex 3-->

.top3 
{
    height:0;
    width:50;
    display: block;
    border:15px solid green;
    border-top-color:transparent;
    border-right-color:transparent;
    border-bottom-color:green;
    border-left-color:transparent;
}

.middle3 
{
    height: 20px;
    background: green;
    width: 50px;
    display: block;
}
.bottom3 
{
    height:0;
    width:50;
    display: block;
    border:15px solid green;
    border-top-color:green;
    border-right-color:transparent;
    border-bottom-color:transparent;
    border-left-color:transparent;
}

</STYLE>
</HEAD>
<BODY>

 <div class="hexagon"style="position: absolute; top: 0px; left: 2px;">
    <span class="top"></span>
    <span class="middle"></span>
    <span class="bottom"></span>

</div>
<!-- GREEN-->
 <div class="hexagon3" style="position: absolute; top: 48px; left: 55px;">
    <span class="top3"></span>
    <span class="middle3"></span>
    <span class="bottom3"></span>

</div>
<!-- black-->
 <div class="hexagon2" style="position: absolute; top: 120px; left: 40px;">
    <span class="top2"></span>
    <span class="middle2"></span>
    <span class="bottom2"></span>

</div>

</BODY

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:40:50.543

从 CSS 中删除您的评论

喜欢`<!-- Second Hex-->`，`<!--hex 3-->` 他们是越野车。

这些评论`HTML`仅用于`css`

对于 css 使用这个语法 -->`/* A comment */`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T11:40:46.180

`width:50;`您在Add中有错字，`px`所以它应该`width:50px;`是`.top, .top2, .top3`

# maven - Apache Commons VFS Maven 存储库？

> ID：11450969
> 
> 赞同：4
> 
> 时间：2012-07-12T11:35:55.400
> 
> 标签：maven, repository, apache-commons, vfs

关于使用哪个 Maven 存储库来使用 Apache commons VFS 库的任何想法？谢谢。

```
 <dependency>
        <groupId>org.apache.commons</groupId>
        <artifactId>commons-vfs2</artifactId>
        <version>2.1-SNAPSHOT</version>
    </dependency> 
```

** 编辑 ** ：以下存储库工作正常：

```
 <repository>
        <id>commons-vfs</id>
        <name>Apache Commons VFS Repository Group</name>
        <url>https://repository.apache.org/content/groups/snapshots/</url>
        <layout>default</layout>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
    </repository> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T16:29:39.797

请检查您的 artifactId 是否正确： http: [//mvnrepository.com/artifact/org.apache.commons/commons-vfs2/2.0](http://mvnrepository.com/artifact/org.apache.commons/commons-vfs2/2.0)

它应该是：

```
<dependency>
    <groupId>org.apache.commons</groupId>
    <artifactId>commons-vfs2</artifactId>
    <version>2.0</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-30T16:03:22.233

如果你需要版本`2.1-SNAPSHOT`，你可以使用这个 Maven 存储库：

[http://repository.jboss.org/](http://repository.jboss.org/)

版本 2.1-SNAPSHOT 实现了一些新功能。

# javascript - 条码扫描器和 2 个提交按钮

> ID：11450970
> 
> 赞同：0
> 
> 时间：2012-07-12T11:35:56.373
> 
> 标签：javascript, user-interface, barcode, barcode-scanner

我有一个网站，操作员必须使用条形码扫描仪选择“是”或“否”按钮

推荐的方法是什么？

可能最好使用 2 个条形码，一个用于“是”，一个用于“否”，但下一步该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:51:05.467

我知道的条形码扫描仪只是在计算机上注册为 USB 键盘。当您扫描条形码时，它们会将其转换为文本字符串并将其发送到计算机，就像在键盘上键入一样。

大多数扫描仪可以配置为自动向该字符串添加行尾字符。当输入字段具有焦点时扫描“YES”的条形码将与在该输入框中键入“YES”并按 Enter 相同。

所以你使用 2 个条形码的方法，一个代表是，一个代表否，是正确的开始，IMO。困难的部分是确保输入在那个时刻具有焦点。在 SO 上查看[这个问题](https://stackoverflow.com/questions/4959487/best-way-to-capture-all-key-events-for-a-web-application)以帮助您入门。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-01T04:50:11.453

有一些条码扫描器会将您的条码扫描到文本框中并自行点击处理，就像您点击 Enter 按钮一样。并且有许多只会扫描然后您将自己按下回车按钮。如果您使用的是仅扫描的第二种类型，如果文本框中的字符长度为 7 或 8，您可以将页面编码为自动按 Enter 按钮。 Enter Key code 为 13。

# google-drive-api - 在 Google Drive 上为大量受众构建应用程序时如何避免速率限制？

> ID：11450971
> 
> 赞同：0
> 
> 时间：2012-07-12T11:35:58.223
> 
> 标签：google-drive-api

也许我遗漏了一些东西，但是有没有办法构建一个免费的应用程序来集成 Google Drive 而没有“每个应用程序”的速率限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:56:33.863

如果您不打算发布源代码（例如，不容易让其他开发人员“窃取”您的应用程序的客户端 ID 和机密），您可以从“配额”窗格下的 API 控制台页面请求更多配额。

对于开源项目，我建议要求用户/开发人员从 API 控制台创建自己的 API 项目，并为他们提供“向导”类型的设置以输入必要的信息。

# wpf - C#中的多个发布者和单个订阅者

> ID：11450974
> 
> 赞同：1
> 
> 时间：2012-07-12T11:36:09.457
> 
> 标签：wpf, mvvm, prism, publish-subscribe

我有大型 WPF-MVVM 应用程序，其中有 1 个订阅和 2 个发布模式。我订阅了一个活动，如下所示：

```
EventAggregator.GetEvent<StatusMessageEvent>().Subscribe(OnCommandLineStatusReturned, ThreadOption.UIThread); 
```

回调方法是：

```
private void OnCommandLineStatusReturned(StatusMessageEventArgs args)
{
   //some data to display
} 
```

现在我必须使用两个不同的对象两次发布此事件。

```
private StatusMessageEventArgs statusMessageEventArgs;
private StatusMessageEventArgs responsestatusMessageEventArgs; 
```

我在不同时间发布了这些实例，

```
EventAggregator.GetEvent<StatusMessageEvent>().Publish(statusMessageEventArgs);
EventAggregator.GetEvent<StatusMessageEvent>().Publish(responsestatusMessageEventArgs); 
```

但是当我运行应用程序时，它行为不端。即**在 10 次中，2 次回调方法根本没有被调用**。是因为 2 发布同一订阅？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:58:55.157

我在以下链接上得到了这个问题的解决方案： [keepSubscriberReferenceAlive](http://msdn.microsoft.com/en-us/library/ff921122%28v=pandp.40%29.aspx)

**它说**，如果您在短时间内引发多个事件并注意到它们的性能问题，您可能需要订阅强委托引用。

默认情况下，**CompositePresentationEvent**维护对订阅者处理程序和订阅过滤器的**弱委托引用。**这意味着 CompositePresentationEvent 持有的引用不会阻止订阅者的垃圾收集。使用弱委托引用使订阅者无需取消订阅，并允许进行适当的垃圾收集。

维护这个弱委托引用比相应的强引用要慢。对于大多数应用程序，这种性能不会很明显，但如果您的应用程序在短时间内发布大量事件，您可能需要使用 CompositePresentationEvent 的强引用。

我修改了我的订阅方法如下。

```
StatusMessageEvent>().Subscribe(OnCommandLineStatusReturned, ThreadOption.UIThread,true); 
```

# matlab - 仅计算列的平均值

> ID：11450975
> 
> 赞同：5
> 
> 时间：2012-07-12T11:36:15.160
> 
> 标签：matlab, mean

我有一个计算矩阵两列平均值的函数。例如，如果以下矩阵是输入：

```
inputMatrix =

                1   2   5   3   9
                4   6   2   3   2
                4   4   3   9   1 
```

...我的命令是：

```
outputVector = mean(inputArray(:,1:2)) 
```

...然后我的输出是：

```
outputVector = 

                3   4 
```

当我的输入矩阵仅包含一行时（即当它是向量，而不是矩阵时），就会出现问题。

例如，输入：

```
inputMatrix =

               4   3   7   2   1 
```

给出输出：

```
outputVector = 

               3.5000 
```

无论输入中有多少行，我都希望保持相同的行为。为了澄清，上面第二个示例的正确输出应该是：

```
outputVector =

               4   3 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-12T11:38:50.857

使用[MEAN](http://www.mathworks.com/help/techdoc/ref/mean.html)的第二个参数来指示要沿哪个维度进行平均

```
inputMatrix =[ 4   3   7   2   1]

mean(inputMatrix(:,1:2),1) %# average along dim 1, i.e. average all rows

ans =

     4     3 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T11:39:04.793

```
mean(blah, 1) 
```

请参阅文档： http: [//www.mathworks.co.uk/help/techdoc/ref/mean.html](http://www.mathworks.co.uk/help/techdoc/ref/mean.html)。

# python - 使用 libVLC 和 Python 验证媒体文件

> ID：11450981
> 
> 赞同：1
> 
> 时间：2012-07-12T11:36:38.127
> 
> 标签：python, media, vlc, libvlc

我试图找出是否可以使用 LibVLC-Python 在 VLC 中播放媒体文件。

在我的 python 脚本中，我递归地解析一个目录（包含媒体和非媒体文件以及图像等），在 VLC 中打开和播放一个又一个文件。然后我尝试分析它是否真的可以使用 vlc 函数 will_play() 和 get_state() 播放。虽然这是非常不可靠的，并且脚本必须暂停才能完全加载文件。例如，如果一个音频文件很短并且脚本暂停很长时间，它将不会被检测为“可播放”，因为它的播放已经停止等。如果脚本在 JPG 上运行，它会挂起，有时是 text- 和 pdf-文件将被标记为“will_play” :-( 到目前为止，我无法使用诸如 MediaTrackInfo() 之类的 vlc 类

有没有办法只解析每个文件并通过它的编解码器确定 VLC 是否可以播放它？我只想对巨大的目录进行排序并复制出未损坏的“真实”媒体文件（音频和视频）。

这是我的原始脚本：

```
import os, sys, inspect, time

vlcpfad = "C:\Program Files (x86)\VideoLAN\VLC"

if not vlcpfad in sys.path:
    sys.path.append(vlcpfad)  
import vlc

# Get name and path of the script
pfadkomplett = os.path.realpath(os.path.abspath(inspect.getfile(inspect.currentframe())))
pfad = os.path.split(pfadkomplett)[0]
skriptname = os.path.split(pfadkomplett)[1]

# walk path
for pfad, unterordner, dateien in os.walk(pfad):
    for dateiname in dateien:
        # skip script itself
        if dateiname == skriptname: continue

        dateipfad = os.path.join(pfad, dateiname)

        p = vlc.MediaPlayer(dateipfad)          
        p.audio_toggle_mute()
                    p.play()

        # Wait a bit, so vlc can start playback
        time.sleep(0.2)

        while str(p.get_state()) == "State.Opening":
            time.sleep(0.1)

        print(dateipfad + ": " + str(p.will_play()))

        p.stop()
        del p 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T12:02:45.713

一种方法是在播放之前测试媒体是否正常：

```
[...]
p = vlc.MediaPlayer(dateipfad)
media = p.get_media() 
media.parse() #get media info
if media.get_duration():
   # your is OK
else:
   # media NOK 
```

# linq - Linq查询获取子记录

> ID：11450989
> 
> 赞同：0
> 
> 时间：2012-07-12T11:37:08.573
> 
> 标签：linq, c#-4.0

我有

```
string inputXml = @"<?xml version='1.0' encoding='UTF-8'?>
                <Parent>
                  <Child>
                      <Child1 value='10' />  
                      <Child2 value= '20' />                           
                   </Child>
                   <Child>
                      <Child1 value='30' />  
                      <Child2 value='40' /> 
                      <Child3 value='50' />                          
                   </Child>                
                </Parent>"; 
```

需要一个 linq 查询，该查询将从内部孩子中获取所有 teh 值。

输出将是

```
Child1 : 10
Child2: 20
Child1: 30
Child2 : 40
Child3: 50 
```

在这之后我迷路了

```
XDocument source = null;
source = XDocument.Parse(inputXml);

var res = (from data in source.Descendants("Child")
          select data); 
```

需要帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T11:43:48.770

```
var res = xmlSkuDescDoc.Descendants("Child")
                       .SelectMany(c => c.Elements())
                       .Select(c => new { Name = c.Name, Value = (string)c.Attribute("value")}); 
```

这应该返回具有两个属性的匿名对象列表：`Name`和`Value`

# c# - 对 Gridview 或 IList 进行排序

> ID：11450992
> 
> 赞同：0
> 
> 时间：2012-07-12T11:37:18.893
> 
> 标签：c#, asp.net, gridview, ilist

这是我只能编辑的代码：

```
ICCModelController ctrl = ControllerGettersFactory.ModelControllerGetters().CCModelController;
IList list = ctrl.SearchCareersWithCategories(null, 0, DateTime.Today);

CareerGrid.DataSource = list;
CareerGrid.DataBind(); 
```

当前的“CareerGrid”网格视图导致“日期”列的升序。我希望它按降序排列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:40:57.987

```
CareerGrid.DataSource = list.OrderByDescending(x=>x.Date);
CareerGrid.DataBind(); 
```

或者，如果它已经按日期排序

```
CareerGrid.DataSource = list.Reverse();
CareerGrid.DataBind(); 
```

# java - 有没有办法使用 NamedParameterJdbcTemplate 和 GeneratedKeyHolder 提取主键（或 ROWID）？

> ID：11450996
> 
> 赞同：8
> 
> 时间：2012-07-12T11:37:31.817
> 
> 标签：java, spring, ojdbc

我正在尝试使用 Spring 的 NamedParameterJdbcTemplate 和 GeneratedKeyHolder 提取 ROWID 或主键。

我正在尝试做这样的事情。

```
MapSqlParameterSource parameters = new MapSqlParameterSource()
                .addValue("param1", value1)
                .addValue("param2", value2);
KeyHolder keyHolder = new GeneratedKeyHolder();
namedParameterJdbcTemplate.update("INSERT INTO TABLE(ID, col1, col2)"
                + "VALUES(TABLE.TABLE_SEQ.NEXTVAL, :param1, :param2)",
                parameters, keyHolder); 
```

在我尝试执行上述查询后，`keyHolder.getKey().longValue()`它会抛出异常。

```
HTTP Status 500 - Request processing failed; nested exception is org.springframework.dao.DataRetrievalFailureException: The generated key is not of a supported numeric type. Unable to cast [oracle.sql.ROWID] to [java.lang.Number] 
```

当我浏览这个[http://docs.oracle.com/cd/B28359_01/java.111/b31224/datacc.htm](http://docs.oracle.com/cd/B28359_01/java.111/b31224/datacc.htm)时，我明白（我希望我做到了）ojdbc 没有将 oracle RowId 映射到 java RowId。

有人可以建议有什么方法可以提取密钥吗？（是的，它可以使用 PreparedStatement 来完成，但它使我的代码在某些条件下难以阅读和操作）。非常感谢您的建议。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-13T03:41:29.583

你必须使用这个

```
namedParameterJdbcTemplate.update("INSERT INTO TABLE(ID, col1, col2)"
            + "VALUES(TABLE.TABLE_SEQ.NEXTVAL, :param1, :param2)",
            parameters, keyHolder, new String[]{"ID"}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-06T19:25:13.657

这是一个完整的示例：假设数据库是 Oracle 并且存储生成的 Id 的列名称是“GENERATED_ID”（可以是任何名称）

```
 public Integer insertRecordReturnGeneratedId(final MyObject obj)
        {
        final String INSERT_QUERY = "INSERT INTO MY_TABLE  VALUES(GENERATED_ID_SEQ.NEXTVAL, :param1, :param2)";
        try
            {
                MapSqlParameterSource parameters = new MapSqlParameterSource().addValue( "param1", obj.getField1() ).addValue( "param2",  obj.getField1() ) ;
                final KeyHolder holder = new GeneratedKeyHolder();
                this.namedParameterJdbcTemplate.update( INSERT_QUERY, parameters, holder, new String[] {"GENERATED_ID" } );
                Number generatedId = holder.getKey();
               // Note: USING holder.getKey("GENERATED_ID") IS ok TOO.
                return generatedId.intValue();
            }
            catch( DataAccessException dataAccessException )
            {
    }
    } 
```

# javascript - IE9拉斐尔动画问题

> ID：11450997
> 
> 赞同：0
> 
> 时间：2012-07-12T11:37:33.680
> 
> 标签：javascript, animation, internet-explorer-9, raphael, doctype

我在 IE9 中显示正确的 javascript 有问题。其他浏览器（Firefox、Opera、Chrome、Safari）运行良好，但 IE 中的动画不流畅。例如看到这条可以从左到右拖动的线（链接在帖子的末尾）。

javascript代码：

```
var w = 1250;
var h = 650;

var drawing = Raphael("obrazek",w,h);                                                 

var Ax = 50
var Ay = 50
var Ey = 500

var w = 1250;
var h = 650;

var drawing = Raphael("obrazek",w,h);                                                 

var Ax = 50
var     function onDragMove(dx,dz) {
    this.onDragUpdate(dx - (this.deltax || 0), dz - (this.deltaz || 0));
    this.deltax = dx;
    this.deltaz = dz;
}
function onDragStart() { this.deltax = this.deltaz = 0; }

function onDragStop() { this.onDragStop(); }

// line 1                 
var Ax
var line = drawing.path([["M",Ax,Ay],["L",Ax,Ey]]).attr({"stroke-width":3})
line.drag(onDragMove,onDragStart)
line.attr({"cursor":"move"})
line.onDragUpdate = function(dx,dz) {

Ax += dx
line.attr({"path":[["M",Ax,Ay],["L",Ax,Ey]]})

} 
```

和相应的 HTML：

```
<html>
    <head>
         <script src="raphael.js"></script>
    </head>
    <body>
        <div id="obrazek">
            <script src="ietest.js"></script>
        </div>
    </body>                
</html> 
```

或在此处查看 IE9 中的问题并将其与 Chrome 进行比较：

[http://mech.fsv.cvut.cz/~stransky/ietest/ietest.html](http://mech.fsv.cvut.cz/~stransky/ietest/ietest.html)

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T12:27:54.560

您的页面缺少 doctype，因此它以 quirks 模式呈现。IE9 在 quirks 模式下使用 VML 而不是 SVG，这可能会导致渲染速度变慢。只需将其添加到您的 html 的第一行：

```
<!DOCTYPE html> 
```

但是，您的代码还有其他一些问题：

1.  缺少分号。有一个[很好的解释](http://bonsaiden.github.com/JavaScript-Garden/#core.semicolon)它可能是多么危险。
2.  变量重新声明和重新定义。
3.  在处理鼠标移动或滚动等快速重复事件时，使用节流来避免重绘/重绘故障和性能问题是合理的。[你可以在这里](http://benalman.com/projects/jquery-throttle-debounce-plugin/)阅读更多关于它的信息。包含来自该站点的插件并将您的`drag`绑定替换为以下内容：

`line.drag($.throttle(30, onDragMove), onDragStart);`

事实上，即使在不指定 doctype 的情况下这样做也可以大大提高渲染性能，但没有理由不完全指定它。

# c++ - Dev-Cpp "make.exe" 错误代码 = 0xc00000fd

> ID：11450998
> 
> 赞同：3
> 
> 时间：2012-07-12T11:37:36.707
> 
> 标签：c++, c, compiler-construction, mingw

这是我尝试编译程序时从 Dev-Cpp 收到的日志：

```
 Compiler: Default compiler
 Building Makefile: "C:\Dev-Cpp\Makefile.win"
 Executing  make...
 make.exe -f "C:\Dev-Cpp\Makefile.win" all
 make.exe: Interrupt/Exception caught (code = 0xc00000fd, addr = 0x4ff283)

 Execution terminated 
```

我已经用谷歌搜索了答案，我已经尝试过“PATH”修复，并首先像这样制作我的 MINGW 东西。

```
 C:\Dev-Cpp\mingw32\bin;C:\Dev-Cpp\bin; 
```

但是我仍然无法编译，我什至重新启动了我的计算机（Windows 7 x64），仍然是同样的错误。所以我想知道你们是否有任何可以帮助的答案。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T11:46:54.477

1.  我过去使用过旧的 Dev-C++，有时我会随机损坏它。*（我可能会添加关键时刻）*。

2.  Bloodshed Dev-C++ 多年来一直没有更新，开发实际上已经停止。

3.  如果您真的喜欢这个环境，请考虑获得更新和维护的[Orwell Dev C++](http://orwelldevcpp.blogspot.com/)，它得到了改进、更快、更清洁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T11:46:35.627

使用 Dev-CPP 进行编译通常不需要额外的 PATH。

似乎是一个非常旧的 Dev-CPP 版本。我的版本既没有`\Dev-Cpp\bin`目录，也没有`Makefile.win`主要位置。也许您的安装有缺陷。

您是否将编译器系统与 Dev-CPP 一起安装（并使其可执行）。

请删除所有内容并使用适用于 32 位或 64 位的现代[最新版本的 DevCpp](http://orwelldevcpp.blogspot.de/)。

*   [开发-CPP 32bit](http://sourceforge.net/projects/orwelldevcpp/files/Setup%20Releases/Dev-Cpp%205.2.0.3%20MinGW32%20Setup.exe/download)
*   [开发-CPP 64bit](http://sourceforge.net/projects/orwelldevcpp/files/Setup%20Releases/Dev-Cpp%205.2.0.3%20TDM-GCC%20x64%20Setup.exe/download)

一个提示：不要将DevCpp安装到带有`' '`空格之类的目录中`/Program Files/`。更好，使用`C:\Apps\Dev-Cpp`或某事。像那样。

### 附录

对于那些说“ *Dev-Cpp 已经很老了，放弃它*”的批评者。不，那是错误的。Dev-Cpp 实际上是 Windows 上最好的免费 IDE/编译器系统——我安装了很多（Netbeans、CodeBlocks、VS2010、VS2012rc，放弃了 Eclipse/CDT）。请看[这里...](http://orwelldevcpp.blogspot.de/) Dev-Cpp 保留了早期 Turbo-Compiler 的简单性，并将其与 32/64bit gcc 4.6 连接。虽然我使用 VS2010/12rc 进行认真的开发，但我总是为 Dev-Cpp 并行创建项目以获得 gcc 兼容性。

问候

rbo

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-27T21:17:31.840

可能是宏扩展中的递归问题。

```
Makefile:

rtest=$(info $(words $1))$(call rtest,$1 1)</b>
$(info $(call rtest))
# eof Makefile

yields :
2152
2153
mingw32-make: Interrupt/Exception caught (code = 0xc00000fd, addr = 0x00007ffdbdea2f57)
2154 
```

# mysql - tomcat jdbc 连接池中缺少连接

> ID：11450999
> 
> 赞同：24
> 
> 时间：2012-07-12T11:37:36.800
> 
> 标签：mysql, tomcat, ubuntu, connection-pooling

我们刚刚从 dbcp 迁移到 tomcat jdbc 连接池。我们尝试加载系统并收到以下异常：

```
java.sql.SQLException: [IA1856] Timeout: Pool empty. Unable to fetch a connection in 1 seconds, none available[size:125; busy:90; idle:0; lastwait:1000].
        at org.apache.tomcat.jdbc.pool.ConnectionPool.borrowConnection(ConnectionPool.java:632)
        at org.apache.tomcat.jdbc.pool.ConnectionPool.getConnection(ConnectionPool.java:174)
        at org.apache.tomcat.jdbc.pool.DataSourceProxy.getConnection(DataSourceProxy.java:124)
        at com.inneractive.model.mappings.BasicPersistenceEntityMapping.getConnection(BasicPersistenceEntityMapping.java:233)
        at com.inneractive.model.mappings.BasicPersistenceEntityMapping.callWithConnection(BasicPersistenceEntityMapping.java:243)
        at com.inneractive.model.mappings.PersistenceEntityMapping.get(PersistenceEntityMapping.java:194)
        at com.inneractive.model.data.client.ClientUtils.GetClientByExamples(ClientUtils.java:353)
        at com.inneractive.client.ExternalAdRingsClientStart.getClientInfoByRequestParametersOrInsert(ExternalAdRingsClientStart.java:1329)
        at com.inneractive.client.ExternalAdRingsClientStart.newClientSession(ExternalAdRingsClientStart.java:245)
        at com.inneractive.simpleM2M.web.SimpleM2MProtocolBean.generateCampaign(SimpleM2MProtocolBean.java:235)
        at com.inneractive.simpleM2M.web.SimpleM2MProtocolBean.generateCampaign(SimpleM2MProtocolBean.java:219)
        at com.inneractive.simpleM2M.web.AdsServlet.doGet(AdsServlet.java:175)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:555)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:396)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662) 
```

请注意：

```
[size:125; busy:90; idle:0; lastwait:1000] 
```

不忙的连接在哪里？在此之后繁忙的号码一直在下降，但我们仍然没有设法获得任何连接。

有任何想法吗？

配置：

```
<Resource auth="Container" driverClassName="com.mysql.jdbc.Driver"
                factory="org.apache.tomcat.jdbc.pool.DataSourceFactory" loginTimeout="10000"
                maxActive="35" maxIdle="35" maxWait="1000" name="jdbc/mysql"
                password="-----" testOnBorrow="true" testOnReturn="false" type="javax.sql.DataSource"
                url="jdbc:mysql://localhost:3306/my_db?elideSetAutoCommits=true&amp;useDynamicCharsetInfo=false&amp;rewriteBatchedStatements=true&amp;useLocalSessionState=true&amp;useLocalTransactionState=true&amp;alwaysSendSetIsolation=false&amp;cacheServerConfiguration=true&amp;noAccessToProcedureBodies=true&amp;useUnicode=true&amp;characterEncoding=UTF-8"
                username="root" validationQuery="SELECT 1"/> 
```

环境：ubuntu 和 tomcat 6\. db - mysql

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-26T14:30:57.300

查看[ConnectionPool.java](http://svn.apache.org/repos/asf/tomcat/tags/JDBC_POOL_1_1_0_1/java/org/apache/tomcat/jdbc/pool/ConnectionPool.java)的源代码，您似乎在`borrowConnection()`方法中遇到了以下代码片段：

```
 //we didn't get a connection, lets see if we timed out
        if (con == null) {
            if ((System.currentTimeMillis() - now) >= maxWait) {
                throw new SQLException("[" + Thread.currentThread().getName()+"] " +
                    "Timeout: Pool empty. Unable to fetch a connection in " + (maxWait / 1000) +
                    " seconds, none available["+busy.size()+" in use].");
            } else {
                //no timeout, lets try again
                continue;
            }
        } 
```

所以根据这个，你的连接是**Null**。

的值`con`在以下行检索：

```
PooledConnection con = idle.poll(); 
```

如果您跟踪代码，您将看到`idle`（取决于您的配置，但默认情况下）[FairBlockingQueue](http://svn.apache.org/repos/asf/tomcat/tags/JDBC_POOL_1_1_0_1/java/org/apache/tomcat/jdbc/pool/FairBlockingQueue.java)。您可以检查实现以获取提示。

通常，您总是必须关闭 ResultSets、Statement 和 Connections，并且应该将使用过的连接正确地释放回池中。不正确地这样做可能会导致连接永远不会被关闭=>永远不能再被重用（连接池“泄漏”）。

我建议您对池的状态构建一些详细的日志记录并对其进行监视以隔离问题。

Apache 的一些防止数据库连接池泄漏的指南：

```
removeAbandoned="true" 
```

废弃的数据库连接被删除和回收

```
removeAbandonedTimeout="60" 
```

设置数据库连接在被视为放弃之前空闲的秒数

```
logAbandoned="true" 
```

记录放弃数据库连接资源的代码的堆栈跟踪。请记住，“记录废弃的连接会增加每次连接借用的开销，因为必须生成堆栈跟踪。”

我仍然认为稍微增加`maxWait`值（1200、1500、1700 - 只是实验，从用户角度来看响应时间不会有差异）将清除那些您仍然有问题的罕见情况。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-26T12:41:47.530

> “不忙的连接在哪里？”

听起来它们已被删除，并且由于某种原因您的连接池没有尝试重新连接它们。

将此添加到您要连接的 URL：

```
autoReconnect=true 
```

并将其作为属性添加到资源应该会导致死连接自动重新连接。

```
validationQuery="SELECT 1" 
```

此外，这应该允许您看到连接被丢弃：

```
logAbandoned="true" 
```

关于堆栈溢出有多个类似的问题。

[Tomcat 连接池、空闲连接和连接创建](https://stackoverflow.com/questions/7359732/tomcat-connection-pooling-idle-connections-and-connection-creation) [JDBC 连接池未重新打开 Tomcat 中的连接](https://stackoverflow.com/questions/1870288/jdbc-connection-pool-not-reopening-connections-in-tomcat?rq=1)

但是，也可能是您没有完全释放连接，这是导致它们死亡的原因。 [JDBC MySql 连接池实践避免连接池耗尽](https://stackoverflow.com/questions/2313197/jdbc-mysql-connection-pooling-practices?rq=1)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-24T12:45:25.800

似乎是池中的一个错误，`size`变量递增，然后尝试创建连接，但如果创建失败......我们的`size`价值很大并且池中没有实际连接 - 可怕：

```
 //if we get here, see if we need to create one
    //this is not 100% accurate since it doesn't use a shared
    //atomic variable - a connection can become idle while we are creating
    //a new connection
    if (size.get() < getPoolProperties().getMaxActive()) {
        //atomic duplicate check
        if (size.addAndGet(1) > getPoolProperties().getMaxActive()) {
            //if we got here, two threads passed through the first if
            size.decrementAndGet();
        } else {
            //create a connection, we're below the limit
            return createConnection(now, con, username, password);
        }
    } //end if 
```