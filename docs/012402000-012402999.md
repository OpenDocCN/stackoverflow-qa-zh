# StackOverflow 问答 12402000-12402999

# iphone - 对使用 OAuth 的现有网站感到困惑，但现在我们向该网站添加了一个 API

> ID：12402005
> 
> 赞同：1
> 
> 时间：2012-09-13T08:09:13.083
> 
> 标签：iphone, authentication, oauth

我正在为我们的产品编写一个 API，并试图了解一些基本的 OAuth 如何与可能利用我们的（待创建的）api 的移动应用程序有关。

让我们想象一下，我们的网站目前允许一个人通过 Twitter OAuth 登录到我们的网站。在来自 Twitter 的回调中，我们的服务器检索 twitter OAuth 结果，如果一切正常，则检查该用户是否已存在于我们的数据库中（例如，假设电子邮件是唯一键）。如果它们不存在，我们创建一个新用户。

当然，然后我们将用户“登录”，这意味着我们为他们创建了一个 cookie，用于他们的浏览器。

到目前为止 - 这里没有什么新鲜事。都是正常的东西。

现在 .. 如果我们想通过 iPhone 或 Windows 手机使用他们的母语并且应用程序使用我们的 API，我不确定 OAuth 的结束点和我们的 API 接管？

例如，假设它是一个利用我们 API 的 iPhone 应用程序。iPhone 应用程序将尝试根据用户的 Twitter 信誉对用户进行身份验证。好的。但是当它回调时，它又回到了电话中，对吗？不是我们的服务器。那么应用程序需要尝试创建一个新用户吗？那么 iPhone 可能会尝试调用`/api/CreateAccount`. 但这意味着 - 任何人 - 都可以调用这个 api？该网站如何真正知道他们已通过身份验证？仅仅因为应用程序这么说？有什么办法可以阻止人们创建恶意应用程序并通过大量创建新帐户来调用我们的 API？那么对 api 资源的身份验证呢？表单身份验证在此处不可用。那么人们是否在 api 调用中使用基于 SSL 的查询字符串身份验证？iphone 如何通过 -our- 服务器进行身份验证？

我很混乱。

谁能解释一下人们现在拥有网站和 api 时所做的差异和常见做法 .. 并使用 OAuth 作为身份验证机制，好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-11T15:29:46.570

天真的应用程序会调用 not `CreateAccount`，但`VerifyAccount`使用 twitter 的 oauth 数据集，以便您的站点和 API 可以验证它。该站点将使用唯一的用户 ID 进行响应，并且您的 iOS 应用程序将使用它作为它的内部用户 ID。[更多信息](https://stackoverflow.com/questions/15095077/using-ios-6-social-framework-twitter-oauth-to-login-to-an-asp-net-mvc-4-site)。

# c++ - C++ 容器和右手边

> ID：12402011
> 
> 赞同：2
> 
> 时间：2012-09-13T08:09:43.517
> 
> 标签：c++, pointers, containers

我今天读到你不应该为 auto_ptr 使用 STL 容器，因为 auto_ptr 在 = 运算符中删除了它的 rhs 值。

所以我有两个问题：

1）这是否意味着所有具有这种行为的类都不应该在容器中使用？

2）你可以使用什么样的容器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T08:49:36.113

> 1）这是否意味着所有具有这种行为的类都不应该在容器中使用？

确实是的，因为这不是正确的复制行为，因为之后的副本不等于源，而是破坏了源。这是 C++11 之前移动语义的一种破碎实现，这是`std::auto_ptr`.

> 2）你可以使用什么样的容器？

真正的答案实际上是，具有这种行为的类（复制构造函数/赋值破坏其源）不应该存在。幸运的是，现在不再需要这个了，因为 C++11 具有适当的移动语义，可以准确地实现这种破坏性复制，但以安全的方式（简单地说，只有当源真的不再需要时）。

因此`std::auto_ptr`已弃用，不应再使用。它已被替换`std::unique_ptr`为可移动但不可复制。但是由于 C++11 容器宁愿移动它们的元素而不是在适当的时候复制，所以 a`std::unique_ptr`可以完美地在标准容器中使用。您只是不能复制容器或用需要`std::unique_ptr`s 副本的单个对象填充它，但是这些操作无论如何都不应该起作用，因为它们在概念上对于唯一所有权语义是错误的。

附带说明一下，如果您实际上是`std:auto_ptr`出于某种原因选择的，那就是您想要唯一的所有权语义，那么 a `std::shared_ptr`（正如其他答案所建议的）是完全错误的，因为它表现出共享所有权。`std::unique_ptr`是今天的`std::auto_ptr`。永远不要垃圾邮件`std::shared_ptr`s where `std::unique_ptr`s （甚至是原始指针，但根据您的问题，我排除了该选项）是合适的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T08:18:49.177

自动指针有一个非常严格的所有权：它并且只有它负责它所指向的对象的生命周期。如果您复制一个`auto_ptr`，您将失去对它所指向的内容的引用。

问题在于 STL 容器的工作方式。例如，当您添加一个元素时，容器可能会扩展以获得更多内存，这会导致将所有值复制到新内存中，这本身会导致丢失 auto_ptrs。

我**认为**关联容器在分配额外内存时可能不会完全复制自己，但我绝对不确定，如果有人可以确认，请发表评论，或者只是编辑我的答案。无论如何，你最好不要冒险。

另请注意，`Auto_ptr`自 C++0x 以来已弃用，建议`unique_ptr`改用。在您的情况下，`std::shared_ptr`可能会成功，除非您确实需要您的这些对象的唯一所有权。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T08:21:16.637

确切地。通常，序列容器元素必须是 CopyConstructible 和 Assignable。这意味着他们需要：

*   公共复制构造函数
*   公共赋值运算符

关联容器（set<> 和 map<>）也必须提供严格的弱排序，即`operator <`必须定义（或专用的比较函数）。

C++ 标准的第 23.1 章提供了详细的要求。

# python - 以pythonic方式在字典中打印最大值的键

> ID：12402015
> 
> 赞同：8
> 
> 时间：2012-09-13T08:09:52.820
> 
> 标签：python, max

给定一个字典`d`，其中键值对由作为键的字符串和作为值的整数组成，我想打印值为最大值的键字符串。

当然，我可以循环`d.items()`，存储最大值及其键并在`for`循环后输出后者。但是是否有一种更“pythonic”的方式只使用一个`max`函数结构，比如

```
print max(...) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-13T08:12:14.497

```
print max(d.keys(), key=lambda x: d[x]) 
```

甚至更短（来自评论）：

```
print max(d, key=d.get) 
```

# java - 如何在不调整大小的情况下在 Applet 中显示修改后的内容

> ID：12402016
> 
> 赞同：0
> 
> 时间：2012-09-13T08:09:56.907
> 
> 标签：java, applet

我已经创建了一个小程序游戏，但是当我修改一些内容时，我需要（最大化或最小化）调整窗口大小以显示我修改后的小程序。

即使我添加标签或任何东西，它也需要调整大小，因为我没有使用paint方法。（不使用repaint）。

帮我解决这个问题，如何在不调整大小的情况下显示修改后的内容......

这是一个有同样问题的示例代码。

```
import java.awt.Button;
import java.awt.FlowLayout;
import java.awt.Label;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JApplet;

public class Appl extends JApplet implements ActionListener{

    Button b = new Button();
    public void init()
    {
        setLayout(new FlowLayout());
        setSize(300,300);
        setVisible(true);
        add(b);
        b.addActionListener(this);
    }

    public void actionPerformed(ActionEvent e) {
        if(e.getSource()==b)
        {
            add(new Label("Button clicked"));
            repaint();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:15:15.323

如果我没记错的话，您只是在修改内容后调用 repaint 方法，那么它应该会显示出来。

当您调整 Applet 的大小时，总是会隐式调用 Repaint。

编辑：在给定的示例中，在 Japplet 容器上应用验证方法对我有用。这也会重绘添加的组件，重绘只是调用paint方法。试试看 ：-）

# jquery - 失去焦点时销毁对话框

> ID：12402019
> 
> 赞同：1
> 
> 时间：2012-09-13T08:10:08.813
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我有一个程序，其中有 jQuery UI 对话框。我希望这些对话框在失去焦点时关闭，例如用户单击相关对话框之外的任何位置。

从表面上看，这似乎是一个简单的问题，但`blur`事件根本不起作用。之后我转到`focusin`and `focusout`，但偶然发现了一个奇怪的问题：

当我有一个对话框并附加到包含对话框`focusin`的`focusout`元素（我调用的元素的父级`dialog`）时。对话框出现后的第一次点击总是会产生一个`focusout`事件，无论点击在哪里。

因此，如果我想在 上销毁对话框`focusout`，则对话框会在不应该被销毁的时候被销毁。这是[jsFiddle](http://jsfiddle.net/DB4E7/1/)演示了我的问题。

我知道我可以使用一些技巧来忽略第一个`focusout`，但我想知道是否有任何方法可以让它以正确的方式工作，即当用户在对话框外部单击第一个时会产生唯一的事件时间。

### 更新：

在以下帮助下，我找到了对我的问题的满意答案`underscore.js`：

我把我的问题分解成几个部分：

1.  A`focusout`在第一次点击时发生
2.  如果点击在对话框之外，则没有进一步的事件
3.  如果单击是在对话框内，则发生`focusin`事件

因此，当有一系列`focusout`->时，就会发生不良行为`focusin`。我使用下划线`defer`函数和布尔修饰符来解决这个问题

```
onFocusout: function(event) {
  console.log('focus out');
  this.hasFocus = false;
  var self = this;
  _.defer(function() {
    if (!self.hasFocus) alert('DESTROY DIALOG');
  });
},

onFocusin: function() {
  console.log('focus in');
  this.hasFocus = true;
}, 
```

`defer`使函数等待直到调用堆栈被清除（在不良行为情况下，`focusin`堆栈中有一个事件等待）然后执行它。因此，如果在变量更改为`onFocusin`之后立即触发，并且延迟函数不会破坏对话框！`onFocusout``hasFocus``true`

谢谢您的回答！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T08:18:21.237

一个可能效果更好的选项是侦听页面上任何位置的点击，如果点击出现在对话框区域之外，则关闭对话框。就像是：

```
$(document).on("click", function(e) {
    var clickedOnDialog = $(e.srcElement)
         .closest(".ui-widget.ui-dialog") // these classes are fixed
         .children(".ui-dialog-content") // this as well
         .is(".dialog"); // this is your own class

    if (!clickedOnDialog) {
        $('.dialog').dialog('destroy');
    }
}); 
```

[演示](http://jsfiddle.net/xhnju/) 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T19:51:24.557

`ui-widget-overlay`仅供参考，对于 jQuery 模态对话框，它会在您的内容顶部放置一个带有类的 div 。因此，我只是做了这样的事情：

```
$(".ui-widget-overlay").live("click", function() {
    $("#myDialogDiv").dialog("close");
}); 
```

它就像一个魅力:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:18:21.860

这是我的解决方法，它也适用于具有多个对话框的页面，还更新了 jquery 'live' 方法的解决方案：

```
$(document).on('click', '.ui-widget-overlay', function() {
    var dialogAria = $(this).next().attr('aria-describedby');        
    $('#'+dialogAria).dialog("close");
}); 
```

我受到[斯科特的回答的启发](https://stackoverflow.com/questions/12402019/destroying-a-dialog-when-it-loses-focus/13867355#13867355)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T08:40:18.433

模糊应该适合你：

```
$('.dialog').trigger('click');
$('.dialog').blur(function() {
   this.dialog('destroy');
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-08T16:56:57.560

使用 jQuery，这相当简单。jQuery 构建其对话框的方式是，每当一个对话框变为活动状态时，它都会放置一个 div 覆盖所有其他页面内容，并具有一个 .ui-widget-overlay 类，并且它的 z-index 为 x（在我的案例，100）。每当一个对话框变为活动状态时，它都会给那个对话框，并且那个对话框只有一个 x + 1 的 z-index。

```
$(document).on('click', '.ui-widget-overlay', function () {
    var overlay = $(this);
    var dialogToClose = null;
    $.each($(".dialog"), function () {
        if ($(this).zIndex() == (overlay.zIndex() + 1)){
            dialogToClose = $(this);
        }
    });
    dialogToClose.dialog("close");
}); 
```

# javascript - 获取完整的实际 html 页面源代码，包括框架集

> ID：12402020
> 
> 赞同：3
> 
> 时间：2012-09-13T08:10:19.880
> 
> 标签：javascript, html, dom, vbscript, qtp

对于我们的功能测试自动化，我们使用带有 Webtest 插件的 QTP。我可以控制 DOM（但不是以一种简单的方式），并且可以使用 VBScript 和部分 Javascript 来找到解决方案。

每当我们在测试期间遇到错误时，我都想在那一刻捕获完整的 HTML 页面源。稍后，当我们从报告中检查错误时，我们可以看到发生了什么以及当时 DOM 的样子。

因此，我寻找捕获此来源的可能性。通常我是这样做的

```
htmlSource = browser("micClass:=Browser").page("micClass:=Page").Object.documentElement.outerHTML 
```

或者

```
htmlSource = browser("micClass:=Browser").page("micClass:=Page").Object.getElementsByTagName("html")(0).innerHTML 
```

不幸的是，这只会捕获框架集和框架的标签的全部内容，而不是位于框架中的实际内容。（这里是经典帧，不是 IFrame）

现在我想要一种实时捕获完整 DOM 源的方法，包括框架集中的内容。我希望它们以正确的顺序和位置出现，就像源代码出现在 IE Developer Tool 的 HTML 视图中一样。

有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:40:55.387

如果你真的**需要**在页面的 HTML 中内联框架的源代码，我知道实现这一点的唯一方法是为每个元素递归构建 HTML。这可能需要做很多工作，因为对于每个元素，您都必须在转到子元素之前`innerHTML`从中删除 （并正确插入它们）。`outerHTML`

如果您可以忍受框架的 HTML 在外部，您可以使用`Page.ChildObjects()`描述`micclass=Frame`，然后使用与页面相同的机制 ( `frames(i).Object.documentElement.outerHTML`)。

Note that you'll get all the frames under the page so there's no need to get the child objects of the `Frame` test objects even if the frames are nested in the DOM.

# primes - 寻找原始毕达哥拉斯三元组的算法

> ID：12402023
> 
> 赞同：0
> 
> 时间：2012-09-13T08:10:48.573
> 
> 标签：primes, primitive, pythagorean

这是我的代码：

```
// PPT.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include <stdio.h>
#include <stdlib.h>

#define LOWER_BOUND 1
#define UPPER_BOUND 20

struct ppt
{
    int v1;
    int v2;
    int v3;
    ppt *next;
};

typedef struct ppt PPT;
typedef PPT *ppt_ptr;

void insert_ppt(ppt_ptr *h_ptr, ppt_ptr *t_ptr, int u1, int u2, int u3);

void print_ppt(ppt_ptr curr_ptr);

int is_prime(int n);

int is_pythagorean_triplet(int v1, int v2, int v3);

int different_triples(int v1, int v2, int v3,  int u1, int u2, int u3);  

int are_exact_multiples(int p, int q, int r,  int l, int m, int n);  

int is_unique_and_insertable(ppt_ptr curr_ptr, int v1, int v2, int v3);  

//====================================================================

int _tmain(int argc, _TCHAR* argv[])
{
    ppt_ptr head_ptr = NULL;
    ppt_ptr tail_ptr = NULL;

    for (int a = LOWER_BOUND;  a <= UPPER_BOUND; a++)
    {
        for (int b = LOWER_BOUND;  b <= UPPER_BOUND;  b++)
        {
            for (int c = LOWER_BOUND;  c <= UPPER_BOUND; c++)
            {
                if(is_pythagorean_triplet(a,b,c) == 1)
                {
                    if(head_ptr == NULL)
                    {
                        //printf("%d %d %d",a,b,c);
                        insert_ppt(&head_ptr,&tail_ptr,a,b,c);
                    }
                    //printf("%d %d %d",a,b,c);
                    if(is_unique_and_insertable(tail_ptr,a,b,c) == 1)
                    {   
                        //printf("%d %d %d\n",a,b,c);
                        insert_ppt(&head_ptr,&tail_ptr,a,b,c);
                    }
                }
            }
        }
    }

    //print_ppt(head_ptr);
    getchar();
    getchar();
    return 0;
} 
```

此函数在列表末尾插入一个新节点

```
void insert_ppt(ppt_ptr *h_ptr, ppt_ptr *t_ptr, int u1, int u2, int u3)
{
    ppt_ptr new_ptr;

    new_ptr = ppt_ptr( malloc( sizeof(PPT) ) );

    if(new_ptr != NULL)
    {
        new_ptr->v1   = u1;
        new_ptr->v2   = u2;
        new_ptr->v3   = u3;
        new_ptr->next = NULL;

        if(*h_ptr == NULL)
        {
            *h_ptr = new_ptr;
        }
        else
        {
            (*t_ptr)->next = new_ptr;
        }

        *t_ptr = new_ptr;
    }
    else
    {
        printf("%d %d %d not inserted. No memory available.\n",u1,u2,u3);
    }
} 
```

这个函数打印列表

```
void print_ppt(ppt_ptr curr_ptr)
{
    if(curr_ptr == NULL)
    {
        printf("List is empty.\n\n");
    }
    else
    {
        while(curr_ptr != NULL)
        {
            printf("%d %d %d\n",curr_ptr->v1,curr_ptr->v2,curr_ptr->v3);
            curr_ptr = curr_ptr->next;
        }
    }
} 
```

此函数确定数字是否为素数

```
// Function 1
int is_prime(int n)
{
    int num_of_factors = 0;
    int i = 1;

    for (i=1; i<=n; i++)
    {
        if (n % i  == 0)
        {
            num_of_factors ++;
        }
    }

    if (num_of_factors == 2)
    {
        return 1;
    }
    else
    {
        return 0;
    }
} 
```

此函数确定三元组是否为毕达哥拉斯

```
// Function 2
int is_pythagorean_triplet(int v1, int v2, int v3)
{
    if ( (v1*v1 + v2*v2 == v3*v3) || (v2*v2 + v3*v3 == v1*v1) || (v1*v1 + v3*v3 == v2*v2) )
    {
        return 1;
    }
    else
    {
        return 0;
    }
} 
```

此函数确定三元组是否唯一，这是我遇到问题的函数

```
int is_unique_and_insertable(ppt_ptr curr_ptr, int v1, int v2, int v3)
{
    if(curr_ptr == NULL)
    {
        //printf("List is empty.\n\n");
    }
    else
    {
        if(curr_ptr != NULL)
        {
            //printf("%d %d %d\n",curr_ptr->v1,curr_ptr->v2,curr_ptr->v3);
            int u1 = curr_ptr->v1;
            int u2 = curr_ptr->v2;
            int u3 = curr_ptr->v3;

            if( (different_triples(v1,v2,v3,u1,u2,u3)) && 
                (!are_exact_multiples(v1,v2,v3,u1,u2,u3) ) )
            {
                printf("%d %d %d\n",curr_ptr->v1,curr_ptr->v2,curr_ptr->v3);
                return 1;
            }

            //printf("yoyoyo");
            curr_ptr = curr_ptr->next;
        }
    }
    return 0;
} 
```

此函数确定三元组是否唯一

```
// Definition:  This function checks if <v1,v2,v3> and <u1,u2,u3> are different triplets
//              or not.  If they are different triplets, it returns 1.
int different_triples(int v1, int v2, int v3,  int u1, int u2, int u3)
{
    if (v1==u1 && v2==u2 &&  v3==u3)
        return 0;
    else if (v1==u1 && v2==u3 && v3==u2)
        return 0;
    else if (v1==u2 && v2==u1 && v3==u3)
        return 0;
    else if (v1==u2 && v2==u3 && v3==u1)
        return
    else if (v1==u3 && v2==u2 && v3==u1)
        return 0;
    else if (v1==u3 && v2==u1 && v3==u2)
        return 0;
    else
        return 1;
} 
```

此函数确定三元组是否是三元组的倍数

```
// This function tests if the triplet <p,q,r> is an exact multiple of <l,m,n> in any order
//   (arrangement/permutation)
int  are_exact_multiples(int v1, int v2, int v3,  int u1, int u2, int u3)
{
    if (v1%u1==0 && v2%u2==0 &&  v3%u3==0)
        return 1;
    else if (u1%v1==0 && u2%v2==0 &&  u3%v3==0)
        return 1;
    else if (v1%u1==0 && v2%u3==0 && v3%u2==0)
        return 1;
    else if (u1%v1==0 && u2%v3==0 && u3%v2==0)
        return 1;
    else if (v1%u2==0 && v2%u1==0 && v3%u3==0)
        return 1;
    else if (v1%u2==0 && v2%u3==0 && v3%u1==0)
        return 1;
    else if (u1%v2==0 && u2%v1==0 && u3%v3==0)
        return 1;
    else if (u1%v2==0 && u2%v3==0 && u3%v1==0)
        return 1;
    else if (v1%u3==0 && v2%u2==0 && v3%u1==0)
        return 1;
    else if (v1%u3==0 && v2%u1==0 && v3%u2==0)
        return 1;
    else if (u1%v3==0 && u2%v2==0 && u3%v1==0)
        return 1;
    else if (u1%v3==0 && u2%v1==0 && u3%v2==0)
        return 1;
    else
        return 0;
} 
```

我知道算法没有优化......我稍后会这样做。有人可以帮我让这段代码工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:49:19.997

您的函数`is_unique_and_insertable`大概应该检查列表中是否已经存在等效的三元组（相同的数字以不同的顺序），或者新的三元组是列表中三元组的倍数（模排列）。但它仅将新三元组与第一个列表元素进行比较，函数中没有循环语句或递归。

```
int is_unique_and_insertable(ppt_ptr curr_ptr, int v1, int v2, int v3)
{
    if(curr_ptr == NULL)
    {
        //printf("List is empty.\n\n");
    }
    else
    {
        if(curr_ptr != NULL)
        {
            //printf("%d %d %d\n",curr_ptr->v1,curr_ptr->v2,curr_ptr->v3);
            int u1 = curr_ptr->v1;
            int u2 = curr_ptr->v2;
            int u3 = curr_ptr->v3;

            if( (different_triples(v1,v2,v3,u1,u2,u3)) && 
                (!are_exact_multiples(v1,v2,v3,u1,u2,u3) ) )
            {
                printf("%d %d %d\n",curr_ptr->v1,curr_ptr->v2,curr_ptr->v3);
                return 1;
            }

            //printf("yoyoyo");
            curr_ptr = curr_ptr->next;
        }
    }
    return 0;
} 
```

如果您使用`while(curr_ptr != NULL)`. 然而，它仍然有错误的逻辑，一旦它找到一个不同的三元组，它就会返回真 (1)，而新的三元组不是它的倍数。

逻辑必须相反，如果遇到等效的三元组（或新三元组的倍数），则返回 false (0)，只有在遍历整个列表而没有遇到这样的三元组时，您才应该返回真：

```
int is_unique_and_insertable(ppt_ptr curr_ptr, int v1, int v2, int v3)
{
    while(curr_ptr != NULL)
    {
        int u1 = curr_ptr->v1;
        int u2 = curr_ptr->v2;
        int u3 = curr_ptr->v3;
        if (!different_triples(v1, v2, v3, u1, u2, u3) || are_exact_multiples(v1, v2, v3, u1, u2, u3))
        {
            return 0;
        }
        curr_ptr = curr_ptr->next;
    }
    return 1;
} 
```

这使您更接近正确的程序，但是您的`are_exact_multiples`函数有问题，它会声明`(15, 36, 39)`为 的倍数`(3, 4, 5)`，尽管事实并非如此。

`(a, b, c)`如果您只考虑三元组`a <= b <= c`（实际上`a < b < c`，因为毕达哥拉斯三元组不能有两个相等的分量），您将获得一个更简单、更容易获得正确的程序。

你说你以后会处理效率，但请尽快这样做，你的`is_prime`功能效率低下。您应该在找到第一个非平凡除数后立即停止，并且在达到平方根时可以停止：

```
int is_prime(int n)
{
    if (n < 2) return 0;
    if (n%2 == 0) return n == 2;
    for(int d = 3; d*d <= n; d += 2)
    {
        if (n%d == 0) return 0;
    }
    return 1;
} 
```

# asp.net-mvc - 如何优雅地重新附加 Entity Framework 5 POCO 结构并保存它？

> ID：12402024
> 
> 赞同：5
> 
> 时间：2012-09-13T08:10:51.833
> 
> 标签：asp.net-mvc, entity-framework, poco, entity-framework-5

我正在使用实体框架 5（具有生成的 POCO 的数据库优先）来制作 MVC4 Web 应用程序以进行数据访问。

在应用程序中，用户浏览多个屏幕，创建或编辑文档（称为“案例研究”）。当他们到达最终屏幕时，他们的文档作为 CaseStudy POCO 存在于内存中，一切都很好，直到需要将此结构保存到数据库中。

为了存储文档，我定义了几个数据库表，它们依次映射到业务层使用的 EF POCO，然后由 MVC 控制器使用。因此，短期 DbContexts 用于检索 POCO 并将它们存储在请求之间的会话中。

因此，保存屏幕必须保存此 POCO 的内容，该 POCO 具有对现有表数据（Category、Layout 和 Sections 表）的导航属性，以及添加或更新的数据（CaseStudySections 和 CaseStudy 本身）。因此，所有 POCO 要么是新的，要么用于检索它们的上下文早已被处理掉。换句话说，它们都是“分离的”。

这篇文章的不同寻常之处在于我已经有了一个可行的解决方案。问题是它体积庞大、易碎且不优雅。我在下面发布代码。注意通过子集合的迭代，显式添加和附加，必须获取一个条目对象并将各个属性标记为已修改，以便它们将被更新，以及最后的糟糕歌舞，以使 AdditionalMaterials 集合同步。如果这是在 EF5 中处理分离的 POCO 所需要的，我会感到失望。

我在这里错过了什么吗？这是否符合最佳实践？是否有更优雅和/或更简洁的方式来附加 POCO 结构并插入/更新？

保存案例研究的代码：

```
public void SaveCaseStudy(CaseStudy caseStudy)
{
    foreach (var s in caseStudy.CaseStudySections)
    {
        this.Entities.Sections.Attach(s.Section);

        if (s.CreatedByRefId == default(Guid))
        {
            s.CreatedByRefId = this.UserRefId;
            s.CreatedTime = DateTime.Now;
            this.Entities.CaseStudySections.Add(s);
        }
        else
        {
            this.Entities.CaseStudySections.Attach(s);
            var entry = this.Entities.Entry(s);
            entry.Property(e => e.TextData).IsModified = true;
            entry.Property(e => e.BinaryData).IsModified = true;
        }

        s.LastModifiedByRefId = this.UserRefId;
        s.LastModifiedTime = DateTime.Now;
    }

    foreach (var m in caseStudy.AdditionalMaterials)
    {
        if (m.CreatedByRefId == default(Guid))
        {
            m.CreatedByRefId = this.UserRefId;
            m.CreatedTime = DateTime.Now;
            this.Entities.AdditionalMaterials.Add(m);
        }
        else
        {
            this.Entities.AdditionalMaterials.Attach(m);
        }

        m.LastModifiedByRefId = this.UserRefId;
        m.LastModifiedByTime = DateTime.Now;
    }

    this.Entities.Layouts.Attach(caseStudy.Layout);
    this.Entities.Categories.Attach(caseStudy.Category);

    if (caseStudy.CreatedByRefId != default(Guid))
    {
        this.Entities.CaseStudies.Attach(caseStudy);
        var entry = this.Entities.Entry(caseStudy);
        entry.Property(e => e.CaseStudyName).IsModified = true;
        entry.Property(e => e.CaseStudyTitle).IsModified = true;
    }
    else
    {
        this.Entities.CaseStudies.Add(caseStudy);
        caseStudy.CreatedByRefId = this.UserRefId;
        caseStudy.CreatedTime = DateTime.Now;
    }

    caseStudy.LastModifiedByRefId = this.UserRefId;
    caseStudy.LastModifiedTime = DateTime.Now;

    if (caseStudy.CaseStudyStatus != (int)CaseStudyStatus.Personalized)
    {
        caseStudy.CaseStudyStatus = (int)CaseStudyStatus.PendingApproval;
    }

    caseStudy.ApprovedByRefId = null;
    caseStudy.ApprovedTime = null;
    this.Entities.SaveChanges();

    var existingAdditionalMaterialRefIds = caseStudy.AdditionalMaterials
        .Select(m => m.AdditionalMaterialRefId)
        .ToArray();

    var additionalMaterialsToRemove = this.Entities.AdditionalMaterials
        .Where(m => 
            m.CaseStudyRefId == caseStudy.CaseStudyRefId && 
            !existingAdditionalMaterialRefIds.Contains(m.AdditionalMaterialRefId))
        .ToArray();

    foreach (var additionalMaterialToRemove in additionalMaterialsToRemove)
    {
        this.Entities.AdditionalMaterials.Remove(additionalMaterialToRemove);
    }

    this.Entities.SaveChanges();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T08:51:13.410

一般来说，这是你必须做的。在附加分离的对象图时，您必须告诉 EF 您要执行的每个更改。我并不是说你的代码不能被简化，但如果你想添加或修改它，你仍然必须处理每个实体并设置它的状态。

[这](https://stackoverflow.com/questions/3635071/update-relationships-when-saving-changes-of-ef4-poco-objects/3635326#3635326)是关于该主题的旧一点但仍然有效的答案 - 简而言之，自从我编写它以来没有任何变化，只创建了新的 DbContext API，它仍然位于旧 API 之上。到目前为止，我看到的对该主题的最佳描述是在[Programming Entity Framework: DbContext](https://rads.stackoverflow.com/amzn/click/com/1449312969)一书中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T18:05:34.603

怎么做：

```
db.CaseStudies.Attach(caseStudy);
db.Entry(caseStudy).State = EntityState.Modified;
db.SaveChange(); 
```

这会将模型中的所有更改保存到数据库中。

# python - Python 字典：在字典中使用 has_key 和 del 时出现语法错误

> ID：12402028
> 
> 赞同：0
> 
> 时间：2012-09-13T08:11:03.183
> 
> 标签：python

我想了解为什么下面的代码会引发错误，如果存在特定键，我试图删除字典中的项目。

```
 >>> 
    >>> a = {1:1, 2:2}
    >>> type(a)
    <type 'dict'>
    >>> a.has_key(1) and del a[1]
    File "<stdin>", line 1
    a.has_key(1) and del a[1]
                   ^
    SyntaxError: invalid syntax
    >>> 
```

使上述代码工作的唯一方法是使用

```
 if a.has_key(1): del a[1] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T08:14:22.563

`del`是一个声明。您不能将其用作表达式的一部分。无论如何，尚不清楚您要做什么`a.has_key(1) and del a[1]`。也许你的意思是：

```
if a.has_key(1):
    del a[1] 
```

或者`a.pop(1, None)`也可以从字典中删除 1 键的替代方法。

# floating-point - 58.85 显示为 58.84999999999

> ID：12402029
> 
> 赞同：5
> 
> 时间：2012-09-13T08:11:12.700
> 
> 标签：floating-point, decimal, calculator, abap

我正在用 BSP 构建一个计算器。当我用各种数字测试它时，我遇到了十进制数字无法正确显示的问题。

例如。58.85 -> 58.849999。但是 58.84 或 58.86 工作得很好。58.8471 -> 54.84710000000001。最后，最后输入的数字将无处不在。

我的代码如下。

```
method GENERATE_NUM.

  DATA: lv_digi type I.  * number of digits after the decimal point

  call METHOD me->get_decimal
    RECEIVING
      getdigits = lv_digi.

  *if it is a natural number  
  IF lv_digi = 0.
    IF thisnum < 0.
      result = thisnum * 10 - newdigit.
    ELSE.
      result = thisnum * 10 + newdigit.
    ENDIF.

   *if it is a float number
   Else.
    IF thisnum < 0.
      result = thisnum - ( newdigit / 10 ** lv_digi ).
    ELSE.
      result = thisnum + ( newdigit / 10 ** lv_digi ).
    ENDIF.

    *increase the number of decimal point by 1
    call method me->set_decimal.
  ENDif.

endmethod. 
```

我基本上做的是每次点击一个数字，它都会调用“generate_num”方法。它以 THISNUM, NEWDIGIT, RESULT 作为参数。
thisnum = 当前数字（例如：58.8）
newdigit = 单击的数字（例如：5）
result = 生成的数字（预期：58.85 但返回 58.849999）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T09:14:03.143

当您想要具有固定精度的十进制数时，您应该使用类型 P（压缩数）而不是浮点数。

例子：

```
DATA lv_fixed_point TYPE p LENGTH 16 DECIMALS 2. 
```

这将创建一个定点变量，点后有两位数。“长度”参数的确切含义并不那么简单。从[文档](http://help.sap.com/saphelp_470/helpdata/en/fc/eb2fd9358411d1829f0000e829fbfe/content.htm)中：

> 打包号码 - P 型
> 
> P 型数据允许小数点后有数字。小数位数是通用的，并在程序中确定。P型数据的取值范围取决于其大小和小数点后的位数。有效大小可以是 1 到 16 字节之间的任何值。两个十进制数字被打包成一个字节，而最后一个字节包含一个数字和符号。小数点后最多允许 14 位数字。初始值为零。处理 P 型数据时，最好设置程序属性 Fixed point algorithm。否则，P 型数字将被视为整数。
> 
> 您可以将 P 型数据用于距离、重量、金额等值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-23T14:30:57.287

或者您可以调用`CALL FUNCTION 'FLOATINGPOINT_COMPARE_ABSOLUTE'`IEEE 浮点 epsilon 因子。使用浮点时，您实际上应该避免直接使用比较，并使用内置的 epsilon 编写自己的：

```
 IS_EQUAL
 IS_GREATER
 IS_GREATER_EQUAL
 IS_LESS
 IS_LESS_EQUAL 
```

是最低限度的。

更多[关于浮点的阅读在这里](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

学习它。活下去。爱它。

作为一项重要的练习，您还可以阅读`NaN` `+Inf`和（如果您使用其他类型而不是`-Inf`sNAN，则还可以阅读）。`DECFLOAT``f`

# html - JQuery SVG 使对象可放置

> ID：12402030
> 
> 赞同：4
> 
> 时间：2012-09-13T08:11:12.467
> 
> 标签：html, svg

我正在尝试使用 SVG 构建座位预订网络应用程序。想象一下，我在 svg 中创建了代表一个空座位的矩形。我想允许用户在“rect”上放置一个 html“image”元素来保留座位。

但是，我无法让 droppable 在 SVG elemnets 上工作。任何人都知道为什么会这样？这是代码：

```
$('#target').svg();
var svg = $("#target").svg('get');
svg.rect(20, 10, 100, 50, 10, 10, { fill: '#666', class: "droppable" });
$('rect')
        .droppable({
           accept: '.product',
           tolerance: 'touch',
           drop: function (event, ui) {
              alert('df');
           }
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-18T01:44:59.387

我查看了 jQuery-ui 源代码并弄清楚为什么它不能与 SVG 一起使用。jQuery 认为它们的宽度和高度为 0px，因此交集测试失败。

在将参数传递给原始函数之前，我包装了 $.ui.intersect 并设置了正确的大小信息。可能有更多的比例对象需要修复，但我在这里做的两个足以修复我的：

```
$.ui.intersect_o = $.ui.intersect;
$.ui.intersect = function(draggable, droppable, toleranceMode) {
    //Fix helper
    if (draggable.helperProportions && draggable.helperProportions.width === 0 && draggable.helperProportions.height === 0) {
        draggable.helperProportionsBBox = draggable.helperProportionsBBox || $(draggable.element).get(0).getBBox();
        draggable.helperProportions = draggable.helperProportionsBBox;
    }

    //Fix droppable
    if (droppable.proportions && droppable.proportions.width === 0 && droppable.proportions.height === 0) {
        droppable.proportionsBBox = droppable.proportionsBBox || $(droppable.element).get(0).getBBox();
        droppable.proportions = droppable.proportionsBBox;
    }

    return $.ui.intersect_o(draggable, droppable, toleranceMode);
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-25T13:21:22.567

使用 jQuery UI 1.11.4 我不得不将 Eddie 的解决方案更改为以下内容，因为 draggable.proportions 现在是一个函数：

```
$.ui.intersect_o = $.ui.intersect;
$.ui.intersect = function (draggable, droppable, toleranceMode, event) {
//Fix helper
if (draggable.helperProportions && draggable.helperProportions.width === 0 && draggable.helperProportions.height === 0) {
   draggable.helperProportionsBBox = draggable.helperProportionsBBox || $(draggable.element).get(0).getBBox();
   draggable.helperProportions = draggable.helperProportionsBBox;
}

if (droppable.proportions && !droppable.proportions().width && !droppable.proportions().height)
   if (typeof $(droppable.element).get(0).getBBox === "function") {
       droppable.proportionsBBox = droppable.proportionsBBox || $(droppable.element).get(0).getBBox();
       droppable.proportions = function () {
           return droppable.proportionsBBox;
       };
   }

    return $.ui.intersect_o(draggable, droppable, toleranceMode, event);
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-09T12:20:25.850

如果您想**限制**svg 元素的下降以仅命中**可见内容**（例如在**polygons**中），您可能希望在 Peter Baumann 的建议中使用此添加：

```
$.ui.intersect_o = $.ui.intersect;
$.ui.intersect = function (draggable, droppable, toleranceMode, event) {
    //Fix helper
    if (draggable.helperProportions && draggable.helperProportions.width === 0 && draggable.helperProportions.height === 0) {
        draggable.helperProportionsBBox = draggable.helperProportionsBBox || $(draggable.element).get(0).getBBox();
        draggable.helperProportions = draggable.helperProportionsBBox;
    }

    if (droppable.proportions && !droppable.proportions().width && !droppable.proportions().height)
        if (typeof $(droppable.element).get(0).getBBox === "function") {
            droppable.proportionsBBox = droppable.proportionsBBox || $(droppable.element).get(0).getBBox();
            droppable.proportions = function () {
                return droppable.proportionsBBox;
            };
        }

    var intersect = $.ui.intersect_o(draggable, droppable, toleranceMode, event);
    if (intersect) {
        var dropTarget = $(droppable.element).get(0);
        if (dropTarget.ownerSVGElement && (typeof (dropTarget.isPointInFill) === 'function') && (typeof (dropTarget.isPointInStroke) === 'function')) {
            var x = ( draggable.positionAbs || draggable.position.absolute ).left + draggable.margins.left + draggable.helperProportions.width / 2,
                y = ( draggable.positionAbs || draggable.position.absolute ).top + draggable.margins.top  + draggable.helperProportions.height / 2,
                p = dropTarget.ownerSVGElement.createSVGPoint();
            p.x = x;
            p.y = y;
            p = p.matrixTransform(dropTarget.getScreenCTM().inverse());
            if(!(dropTarget.isPointInFill(p) || dropTarget.isPointInStroke(p)))
                intersect = false;
        }
    }
    return intersect;
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T01:28:50.607

如果有人有同样的问题，droppable 在 jquery SVG 中不起作用。所以最后，我做了以下事情来创建我自己的可放置事件：

1.  在 draggable 中，设置当前被拖拽的目标为 draggedObj ，

2.  在 mouse up 事件中，检查 draggedObj 是否为 null，如果不为 null，则根据当前位置放置 item。（如果您在检测当前位置方面需要帮助，请告诉我）

# sorting - 如何在下拉列表中显示值的小写+大写时使排序不区分大小写

> ID：12402032
> 
> 赞同：0
> 
> 时间：2012-09-13T08:11:23.507
> 
> 标签：sorting, sql-order-by, case-insensitive, lowercase

我正在尝试将我的查询结果转换为并根据小写以 asc 顺序对它们进行排序。但是在显示时我需要保留所有原始大小写（小写和大写）。

我的查询看起来像这样 -

```
SELECT distinct (p.product_id) as product_id ,lcase(p.product_name) as product_name 
from library TL, product p
WHERE TL.id = PL.id 
AND pL.product_id = p.product_id 
AND pL.product_id NOT IN (0)
order by lcase(product_name) asc; 
```

但是当我显示它时，它会将整个下拉值更改为小写。这不是我想要的。我只是希望它按照小写的顺序显示。

我该怎么做？

据我所知，我的 orderby 应该和 select 有相同的条件不是吗？

如何在下拉列表中显示值的小写+大写时使排序不区分大小写

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:14:55.230

你可以试试这个

```
SELECT product_id, product_name FROM (
    SELECT distinct (p.product_id) as product_id ,(p.product_name) as product_name,  
    lcase(p.product_name) as pname
    from unified.techlibrary TL, unified.techlibraryprod PL, unified.product p, unified.contenttype CT 
    WHERE TL.id = PL.id 
    AND pL.product_id = p.product_id 
    AND tl.contenttype_id in (1,3)  
    AND pL.product_id NOT IN (0)
) AS x order by x.pname 
```

希望它会有所帮助。

# javascript - jquery datepicker 预定义日期

> ID：12402035
> 
> 赞同：0
> 
> 时间：2012-09-13T08:11:43.117
> 
> 标签：javascript, jquery, asp.net, jquery-ui, jquery-ui-datepicker

这是我的日期选择器附加到的文本框：

```
<asp:TextBox runat="server" ID="StartMonth" AutoPostBack="true" class="month-picker" /> 
```

这是我附加日期选择器的方法。（我有多个应该附加日期选择器的文本框，所以我使用了类属性而不是 id。）

```
$(".month-picker").datepicker({ dateFormat: 'MM yy', changeYear: true, yearRange: '-9:+9' }); 
```

当我单击文本为“2012 年 8 月”的文本框时，它应该将日期选择器的预选日期设置为此日期。我怎么做？

# php - 以数学方式将索引转换为网格坐标

> ID：12402037
> 
> 赞同：5
> 
> 时间：2012-09-13T08:11:51.980
> 
> 标签：php, grid, coordinates

鉴于

```
$c = 2; // number of columns
$r = 3; // number of rows 
```

我需要找到值的`x,y`网格坐标，其值`$i`是特定单元格的索引（`->`左右，`->`上下顺序）。

通常，一个人会使用两个循环来解决这个问题；一个循环用于行，另一个用于列，但在我的情况下，我需要在**数学**上执行此操作。

因此，对于上述情况，我会有类似的东西：

```
$grid = new Grid(2, 3);
                                         // i x y
list($x, $y) = $grid->getCoordOfCell(0); // 0 0 0
list($x, $y) = $grid->getCoordOfCell(1); // 1 1 0
list($x, $y) = $grid->getCoordOfCell(2); // 2 0 1
list($x, $y) = $grid->getCoordOfCell(3); // 3 1 1
list($x, $y) = $grid->getCoordOfCell(4); // 4 0 2
list($x, $y) = $grid->getCoordOfCell(5); // 5 1 2 
```

假设，将返回网格单元`getCoordOfCell()`的坐标数组。`x,y``$i`

不知道我是否在这里遗漏了什么，但我认为差不多就是这样。

我猜由此产生的数学公式将基于`div`s 或`mod`s，但我只是没有精神力量去思考这个问题。另外，我敢肯定，作为一个问题，这对将来的其他人应该是有用的。哦，虽然我在这里说的是 PHP，但这可能与语言无关......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-13T08:18:05.943

要获得正确的列，您有：

```
 $i % NUMBER_ITEMS_IN_ROW 
```

并获得正确的行：

```
 $i / NUMBER_ITEMS_IN_ROW 
```

在您的示例中，有 3 行和 2 列（== 一行中的项目），所以：

```
 $i    $x ($i%2)    $y ($i/2)
 0     0            0
 1     1            0
 2     0            1
 3     1            1
 4     0            2
 5     1            2 
```

# apache-flex - 收集 Flex 应用程序的类层次结构

> ID：12402038
> 
> 赞同：0
> 
> 时间：2012-09-13T08:11:56.897
> 
> 标签：apache-flex, reflection, introspection, class-hierarchy

我想知道：如果我构建了一个 Flex 应用程序，是否可以使用反射或其他方法以某种方式收集它的类层次结构？例如，如果我定义了组件：派生自 Button 的 CustomButton 和派生自 CustomButton 的 RedCustomButton。是否有可能得到如下结果：“Button <- CustomButton <- RedCustomButton”？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:49:34.087

您可以使用`describeType`

```
trace(describeType(UIComponent)); 
```

[公共函数 describeType(value:*):来自 Adob​​e 帮助的 XML 参考](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/package.html#describeType%28%29)

> 生成描述作为方法参数命名的 ActionScript 对象的 XML 对象。此方法实现了 ActionScript 语言的反射编程概念。

另外我推荐你使用[Spicelib Reflect](http://www.spicefactory.org/parsley/docs/3.0/manual/reflection.php#intro)库。

# cassandra - 在astyanax中基于日期的范围搜索

> ID：12402041
> 
> 赞同：1
> 
> 时间：2012-09-13T08:12:10.023
> 
> 标签：cassandra, astyanax

然而，我还有一种情况。在我的列族中，我有列的行，例如姓名、薪水和出生日期（出生日期），所有列都被索引。我想对 dob 进行范围基础索引搜索。如果您能告诉我我们该怎么做，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T19:51:40.663

你可以从 astyanax 转移到 playOrm 就可以了

@NoSqlQuery(name="findByDate", query="PARTITIONS p(:partitionId) SELECT p FROM TABLE p where p.date > :date and p.date <= :data");

你需要一个模式，但如果你想扩展它可以被分区，你只需查询那个单一的分区。有的按客户划分，有的按时间划分。有很多方法可以划分模式。

或者，如果您真的想使用 astyanax，playOrm 会执行批量范围查询，每次都会批量获取所有列（这样您就不会耗尽内存）。该代码位于第 326 行，用于设置 astyanax 范围构建器，第 385 行用于使用构建器创建查询。

[https://github.com/deanhiller/playorm/blob/8a4f3405631ad78e6822795633da8c59cb25bb29/input/javasrc/com/alvazan/orm/layer9z/spi/db/cassandra/Cas​​sandraSession.java](https://github.com/deanhiller/playorm/blob/8a4f3405631ad78e6822795633da8c59cb25bb29/input/javasrc/com/alvazan/orm/layer9z/spi/db/cassandra/CassandraSession.java)

意识到 playOrm 也在进行批处理，因此您也看到它设置了批处理大小。

后来，迪恩

# php - PHP system/exec 命令无法正常工作

> ID：12402043
> 
> 赞同：0
> 
> 时间：2012-09-13T08:12:15.950
> 
> 标签：php, windows, command-line

这是我的代码：

```
$js = SPLoginEngage();
$data = getSilverpopReport($js,'09/01/2012');
$d1 = explode('<FILE_PATH>',$data);
$d2 = explode('</FILE_PATH>',$d1[1]);
sleep(30);
exec('CMD /C run.bat "/download/' . $d2[0] . '"'); 
```

运行.bat：

```
@ECHO OFF
start /b "" "C:\Program files\WinSCP\winscp.exe" "SFTP" /command "get "%1"" exit 
```

当我运行脚本时，我得到了这个返回：`CMD /C run.bat "/download/Raw Recipient Data Export Sep 13 2012 08-07-54 AM 1371.zip"`

它应该开始下载文件，但没有任何反应。

如果我将该输出放入 CMD 中，它就可以正常工作。

注意：运行 Windows 7（32 位）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:19:53.973

你为什么在你的 exec 参数中调用 CMD ？这不是 exec 应该做的吗？

你也没有对 exec 的结果做任何事情。你怎么知道它是否已经执行了命令？

[http://php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)

# python - Python 中的网格网格函数 (meshgrid mgrid ogrid ndgrid)

> ID：12402045
> 
> 赞同：82
> 
> 时间：2012-09-13T08:12:27.387
> 
> 标签：python, numpy, scipy

我正在寻找类似网格的功能的清晰比较。可惜我没找到！

Numpy [http://docs.scipy.org/doc/numpy/reference/](http://docs.scipy.org/doc/numpy/reference/)提供

*   `mgrid`

*   `ogrid`

*   `meshgrid`

Scitools [http://hplgit.github.io/scitools/doc/api/html/index.html](http://hplgit.github.io/scitools/doc/api/html/index.html)提供

*   `ndgrid`

*   `boxgrid`

理想情况下，总结所有这些的表格将是完美的！

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-09-13T10:40:34.653

`numpy.meshgrid`是根据 Matlab 的`meshgrid`命令建模的。它用于向量化两个变量的函数，以便您可以编写

```
x = numpy.array([1, 2, 3])
y = numpy.array([10, 20, 30]) 
XX, YY = numpy.meshgrid(x, y)
ZZ = XX + YY

ZZ => array([[11, 12, 13],
             [21, 22, 23],
             [31, 32, 33]]) 
```

所以`ZZ`包含所有的组合`x`和`y`放入函数中。当您考虑它时，`meshgrid`对于 numpy 数组来说有点多余，因为它们是广播的。这意味着你可以做

```
XX, YY = numpy.atleast_2d(x, y)
YY = YY.T # transpose to allow broadcasting
ZZ = XX + YY 
```

并得到相同的结果。

`mgrid`并且`ogrid`是使用索引符号的辅助类，因此您可以直接在前面的示例中创建`XX`和`YY`，而不必使用类似`linspace`. 生成输出的顺序是相反的。

```
YY, XX = numpy.mgrid[10:40:10, 1:4]
ZZ = XX + YY # These are equivalent to the output of meshgrid

YY, XX = numpy.ogrid[10:40:10, 1:4]
ZZ = XX + YY # These are equivalent to the atleast_2d example 
```

我不熟悉 scitools 的东西，但`ndgrid`似乎相当于`meshgrid`, while`BoxGrid`实际上是一个帮助这种生成的整个类。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-04-14T17:23:55.357

`np.mgrid`并`np.meshgrid()`做同样的事情，但第一个和第二个轴被交换：

```
# 3D
d1, d2, d3 = np.mgrid[0:10, 0:10, 0:10]
d11, d22, d33 = np.meshgrid(np.arange(10),np.arange(10),np.arange(10))
np.array_equal(d1,d11) 
```

产量`False`。只需交换前两个维度：

```
d11 = np.transpose(d11,[1,0,2])
np.array_equal(d1,d11) 
```

产量`True`。

需要对所有三个数组 和 进行此`d11`维度`d22`交换`d33`。

# javascript - 如何在javascript中获取所有li？

> ID：12402046
> 
> 赞同：0
> 
> 时间：2012-09-13T08:12:43.707
> 
> 标签：javascript

```
<ul id="tab">
  <li onclick="clicker()" class="li01">one test</li>
  <li onclick="clicker()" class="li02">two test</li>
  <li onclick="clicker()" class="li03">three test</li>
  <div class="web_clear"></div>
</ul>
<div class="web_index">
  content....
</div> 
```

我曾经`document.getElementsByTagName("ul").childNodes;`得到所有的`li`. 但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:14:11.273

```
var list = document.getElementById('tab').getElementsByTagName('li'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T08:14:42.863

```
document.getElementsByTagName("li") 
```

这应该工作它将返回一个元素数组

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T08:14:49.183

您可以使用 getElementsByTagName() 来获取 NodeList 进行迭代，如下所示：

```
var list_li = document.getElementById("tab").getElementsByTagName("li"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T08:15:23.267

您可以使用`id`

```
document.getElemensById("tab").childNodes; 
```

或者如果它是唯一`ul`的

```
document.getElementsByTagName("ul")[0].childNodes; 
```

# ruby-on-rails - Ruby on Rails RSpec 擦除数据库

> ID：12402048
> 
> 赞同：1
> 
> 时间：2012-09-13T08:12:48.340
> 
> 标签：ruby-on-rails, ruby, database, rspec, rspec-rails

我对 RSpec 有点陌生。

我想运行一些示例 Rspec 规范（使用*rake spec*命令），有

> config.use_transactional_fixtures = false

在配置文件中，正如一些手册中推荐的那样。

但是，它仍然会擦除数据库，这让我很沮丧，因为我里面有敏感数据，现在一切都消失了。到底是谁在测试期间想出了清除数据库的想法？

如何避免这种行为？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:19:51.670

事务的存在是为了确保您的测试数据库保持干净，以便您的测试保持干净和可预测。你应该使用它们。要为单个示例组关闭它们，`self.use_transactional_fixtures = false`请在描述行之后使用。但是，如果您这样做，您将需要一个`after(:each)`之后清理的块。

我不明白为什么你的测试数据库中有敏感数据，听起来你在那里做错了什么。

# javascript - 未捕获的错误：NOT_FOUND_ERR：DOM 异常 8

> ID：12402049
> 
> 赞同：0
> 
> 时间：2012-09-13T08:12:49.573
> 
> 标签：javascript, asp.net, asp.net-mvc, knockout.js

我在 ASP.NET MVC 中研究 Knockoutjs。我收到此错误“未捕获的错误：NOT_FOUND_ERR：DOM Exception 8”......知道吗？谢谢。

在我的 _Layout.cshtml 文件中，这些是我的脚本..

```
 <script src="../../Scripts/modernizr-2.5.3.js" type="text/javascript"></script>
    <script src="../../Scripts/jquery-ui-1.8.20.min.js" type="text/javascript"></script>
    <script src="../../Scripts/knockout-2.1.0.debug.js" type="text/javascript"></script>
    <script src="../../Scripts/ajax-util.js" type="text/javascript"></script>
    <script src="../../Scripts/bp-index.js" type="text/javascript"></script>
    <script src="../../Scripts/ko-execute-on-enter.js" type="text/javascript"></script>
    <script src="../../Scripts/ko-protected-observable.js" type="text/javascript"></script>

<script src="../../Scripts/jquery.unobtrusive-ajax.min.js" type="text/javascript"></script> 
```

这是我的模板……

```
<ul data-bind="foreach: tags">
    <li class="tagItem" data-bind="click: $parent.selectTag">
       <div>
           <span data-bind="text: Name"></span>
           <a href="#" class="tag-edit">Edit</a>
           <a href="#" class="tag-delete">Delete</a>
        </div>
     </li>
</ul> 
```

这是我的 js 文件（带淘汰赛）

```
$(function () {
    var data = [
   // data
    ];

    var viewModel = {
        tags: ko.observableArray(data),
        tagToAdd: ko.observable(""),
        selectedTag: ko.observable(null),

        addTag: function () {
            this.tags.push({ Name: this.tagToAdd() });
            //var newTag = { Name: viewModel.tagToAdd() };
            this.tagToAdd("");
        },
        selectTag: function () {
            console.log("inside selectTag");
            viewModel.selectedTag
        }
    };
    $(document).on("click", ".tag-delete", function () {
        var itemToRemove = ko.dataFor(this);
        viewModel.tags.remove(itemToRemove);
    });
    ko.applyBindings(viewModel);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:14:33.710

您的这段代码可能是错误的根源：

```
 selectTag: function () {             
        console.log("inside selectTag");             
        viewModel.selectedTag         
   } 
```

我认为你需要更多的东西：

```
 selectTag: function (tag) {             
        console.log("inside selectTag");             
        viewModel.selectedTag(tag);       
   } 
```

如果不是这个，那么基本上这个错误是因为你的一些 JS 或 HTML 是无效的。我会尝试逐行注释掉 lin，直到找到错误的来源。

# windows - 如何使用 SetWindowsHookEx 在 Windows 上挂钩特定 API？

> ID：12402052
> 
> 赞同：2
> 
> 时间：2012-09-13T08:12:54.187
> 
> 标签：windows, api, hook

我正在尝试在 Windows 上的其他进程（我可能不知道进程 ID）中挂钩 API（例如 MessageBox()），我知道我必须使用 SetWindowsHookEx() 函数。但是，我仍然有三个问题：

1) SetWindowsHookEx() 函数能否使钩子成为全局的，即不限于当前进程？（当他们的应用程序调用这个 API 时，它被钩住了吗？）

2）如果我想用自己的函数替换被钩的API，我应该怎么做？

3）看了很多资料，找到了“hook procedure”或者“hook function”这个词。我该如何理解这一点？目前，我将它作为我将用来替换 API 的函数（再说一次，MessageBox）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T08:38:20.180

这不是`SetWindowsHookEx`目的。`SetWindowsHookEx`用于挂钩 Windows 消息，而不是 API（例如，如果您想知道窗口何时更改大小或创建）。

挂钩 API 调用更复杂、更混乱。没有内置的方法可以做到这一点。你通常想找一个图书馆来帮助你，比如[Detours](http://research.microsoft.com/en-us/projects/detours/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:28:10.897

您可以为此使用[Deviare API Hook](http://www.nektra.com/products/deviare-api-hook-windows/)。使用这个库，即使使用 .NET，您也可以在 10 行代码中挂钩任何 API。与 Detours 的不同之处在于您不必编写插入每个进程的代码。您可以挂钩所有您想要的进程，只需附加它们即可。然后，您会在自己的流程中收到呼叫。

# perl - 将 perl 命令的输出存储到变量中

> ID：12402054
> 
> 赞同：0
> 
> 时间：2012-09-13T08:13:03.330
> 
> 标签：perl, variables

这很好
`system("perl -c C:/Users/mytest/scripts/file_name.pm")`
用此命令在 cygwin 中提供多行输出，在 centos 中提供单个 syntak ok 行。因为我将使用 cygwin，所以我想做的是将此输出转换为变量并稍后在我的程序中使用它。我该怎么做？

在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:19:23.597

代替`system`, 使用反引号：

```
my $output = `perl -c C:/Users/mytest/scripts/file_name.pm`; 
```

如果您还想包含 STDERR 输出，请使用：

```
my $output = `perl -c C:/Users/mytest/scripts/file_name.pm 2>&1`; 
```

# android - Android Activity 重启和首选项屏幕

> ID：12402056
> 
> 赞同：2
> 
> 时间：2012-09-13T08:13:13.450
> 
> 标签：android, android-activity, preferencescreen

我有一个带有 MainActivity 和其他一些活动的应用程序。从 MainActivity 我开始一个偏好屏幕，我在其中为我的应用程序设置主题。

MainActivity->设置->选择主题

`Currently how it works:`

我重新启动应用程序，启动我的主要活动，并将主题应用于所有活动。

`How I want it to work:`

我想重新启动应用程序并返回到设置主题而不是 MainActivity 的同一屏幕。

谁能建议我一些可以做到的方法？

先感谢您

***编辑：***

`How I want it to work:`

重新启动应用程序 -> 返回“选择主题”屏幕（设置位置）。

然后，当我按下返回按钮 -> 设置屏幕 -> 并再次按下返回到我的 MainActivity 时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:18:38.477

我不知道这是否是最好的方法，但是您可以保存在您所在`SharedPreferences`的最后一个屏幕中（或者如果它只是针对这种情况，一个布尔值来知道您是否正在重新启动）以及每次应用程序开始签入`onCreate()`并相应地转到您的活动`MainActivity``SharedPreferences``Themes`

# ios - 可以为最新 (2012) iPod nano 开发应用程序吗？

> ID：12402058
> 
> 赞同：0
> 
> 时间：2012-09-13T08:13:36.980
> 
> 标签：ios, xcode, ipod

Apple 本月将发布具有更大屏幕和[其他功能的 iPod nano。](http://www.apple.com/ipod-nano/)

它*似乎*运行 iOS，所以我很好奇是否可以使用 Xcode 或其他方式为其开发应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:17:52.137

没有提到 App Store 作为一项功能，所以我会说不太可能。

# perl - 使用 perl 与串行端口通信以进行卫星通信

> ID：12402059
> 
> 赞同：0
> 
> 时间：2012-09-13T08:13:39.910
> 
> 标签：perl, serial-port

这可能很简单，但我需要使用 perl 来与串行端口通信，并接受来自它的响应 - 理想情况下，它会向我的程序的其余部分标记新消息已从端口返回以便我可以处理它？

我正在使用的单元称为 RockBLOCK，它是一个双向卫星通信模块，插入 USB 端口，但将自身呈现为普通串行设备。如果有人感兴趣，请在此处详细说明：[http ://rockblock.rock7mobile.com](http://rockblock.rock7mobile.com)

有没有人有任何发送数据的示例代码以及是否有消息返回？第一点似乎相当直截了当，但第二点就不那么简单了……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:48:41.567

在 CPAN 中搜索明显的术语会给我[Device::SerialPort](http://search.cpan.org/perldoc?Device%3A%3ASerialPort)和[Win32::SerialPort](http://search.cpan.org/perldoc?Win32%3A%3ASerialPort)，它们似乎都可以满足您的需求。

# java - Spring 3.1：如何注入在不同配置类中创建的 bean

> ID：12402060
> 
> 赞同：3
> 
> 时间：2012-09-13T08:13:44.093
> 
> 标签：java, spring

我只是使用 Spring 3.1 设置一个 Web 应用程序，我正在尝试通过使用 java 配置来做到这一点。我有两个配置类“AppConfig”（通用 bean 定义）和“WebConfig”（Spring MVC 配置）。如何在 WebConfig 类中引用已在 AppConfig 中声明的 bean？

下面，AppConfig 配置类中的验证器应该使用来自 WebConfig 的 messageSource。

应用配置：

```
@Configuration
@ComponentScan(basePackages = { "com.example" })
public class AppConfig {

    @Bean
    public Validator validator() {
        final LocalValidatorFactoryBean validator = new LocalValidatorFactoryBean();
        validator.setValidationMessageSource(messageSource());
        return validator;
    }

} 
```

网络配置：

```
@Configuration
@EnableWebMvc
@ComponentScan(basePackages = { "com.example.common.web", "com.example.web"  })
public class WebConfig extends WebMvcConfigurerAdapter {

    @Bean
    public ReloadableResourceBundleMessageSource messageSource() {
        final ReloadableResourceBundleMessageSource messageSource = new ReloadableResourceBundleMessageSource();
        messageSource.setBasename("classpath:messages");
        return messageSource;
    }

} 
```

当我想从同一个配置类中引用一个 bean 时，我只需调用它的 setup 方法，但是当 bean 在另一个类中声明时我显然不能这样做。

您的建议将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T08:21:15.680

配置也是 bean，因此您可以使用`@Autowired`

```
public class WebConfig extends WebMvcConfigurerAdapter {

    @Autowired
    private Validator validator;

    ...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T08:28:07.940

有两种方法可以做到这一点：

```
public class WebConfig {
    @Autowired
    AppConfig appconfig;

    ...
} 
```

或者，正如 Aaron Digulla 所说：

```
public class WebConfig {
    @Autowired
    Validator validator;

    ...
} 
```

我更喜欢第一种形式，通过一次自动装配，您可以访问整个配置，然后您可以通过调用`theNewBean.setValidator(appConfig.validator());`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-11T17:40:58.157

我认为 Aaron Digulla 和 Amir Pashazadeh 都是正确的，但自 JSR 330 引入以来还有另一个注释。你也可以使用@Inject

```
@Inject
private Validator validator; 
```

[http://docs.spring.io/spring/docs/3.0.x/reference/beans.html#beans-autowired-annotation](http://docs.spring.io/spring/docs/3.0.x/reference/beans.html#beans-autowired-annotation)

# java - 如何将众所周知格式的二进制文件更改为自定义且无法发现的文件？

> ID：12402064
> 
> 赞同：0
> 
> 时间：2012-09-13T08:14:00.113
> 
> 标签：java, encryption, transform

例如，我有一个 zip 文件。我需要将该文件（我正在考虑文件头或其他内容，内部的一些位或字节）更改为一些无法解压缩的自定义格式。另一方面，我以后可以使用反转算法恢复原始文件。有人可以帮我吗？

```
void encrypt(FileInputStream zip) {
  ...
}

void decrypt(FileInputStream dat) {
  ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:18:10.443

通过检查包含文件索引所在的文件末尾来发现一个 zip 文件。

我会考虑先加密文件。如果需要，您可以自己加密文件。一种简单的方法是对每个`byte`或`int`（4 字节）与一个固定常数进行异或。

# core-data - 如何强制 NSFetchedResultsChangeInsert 使用不同于 tableviewcontroller 使用的另一个 Tableview？

> ID：12402066
> 
> 赞同：-2
> 
> 时间：2012-09-13T08:14:04.313
> 
> 标签：core-data, nsfetchedresultscontroller

我有一个应用程序，我正在制作 2 个 Tableview Vertical One 这是 Tableviewcontroller 使用的一个，并且在每个部分中我有 1 行，我在其中创建了另一个 Horizo​​ntal tableview，当我在“AddItemViewController”中添加一个 ManagedObject 时， ManagedObject 保存正确，虽然当 NSFetchedResultsChangeInsert 在 tableviewcontroller 中调用时，它使用要更新的垂直 tableview，而不是水平。

我错过了一些东西，但我无法弄清楚，有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:50:03.297

我通过在 MainViewController 中执行 Fetch 请求解决了这个问题，将其传递给 NSMutableArray，然后在其他 Tableview 中使用，做我的更改，然后 NSManagedObjectContext，向 MainViewController 发送通知，再次重新加载表视图数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T18:57:54.433

实际上，下面代码中的 NSFetchresultschangeinsert ：

```
- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath
{
    HorizontalTableCell *fuck=[[HorizontalTableCell alloc]init];
    UITableView *tableView= fuck.horizontalTableView;
    //UITableView *tableView = self.tableView;
    //newIndexPath.section==indexPath.section;
    //NSLog(@"The Type of the Fetched %d",i);

    switch(type) {
        case NSFetchedResultsChangeInsert:

            [tableView insertRowsAtIndexPaths:@[newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeUpdate:
            [self configureCell:[tableView cellForRowAtIndexPath:indexPath] atIndexPath:indexPath];
            break;

        case NSFetchedResultsChangeMove:
            [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
            [tableView insertRowsAtIndexPaths:@[newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
} 
```

默认情况下，此代码位于 Apple Default CoreData 、 UItableViewController 中

# rest - 如何在 VS2010 中将库添加到 Xamarin Mono for Android 项目？

> ID：12402071
> 
> 赞同：2
> 
> 时间：2012-09-13T08:14:33.857
> 
> 标签：rest, xamarin.android, nuget, xamarin

我正在开发一个使用 web api 的 Android 应用程序（我的第一个）单声道。在 xamarin.com 的文档中，有使用不同库（如 RestSharp 和 Json.Net）的示例。

但是，当我尝试在我的 VS2010 项目中通过 Nuget 安装这些库时，它会失败并显示以下消息：

> 安装失败。回滚...无法安装软件包“Newtonsoft.Json 4.5.9”。您正在尝试将此包安装到以“MonoAndroid,Version=v2.2”为目标的项目中，但该包不包含任何与该框架兼容的程序集引用。有关详细信息，请联系包作者。

如何在我的项目中包含此类库？

提前致谢。

欧文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:27:44.870

此错误消息表明这些库与 Mono for Android 不兼容。您应该询问库的制造商是否有 MfA 兼容版本。如果您有库的源代码，您也可以尝试使用链接的源文件自己制作一个 MfA 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T18:24:32.307

不确定您是否尝试过，但如果您使用的是 xamarin studio 并右键单击 Android 应用项目中的组件文件夹，选择添加组件应该能够解决您的问题。这将添加对所添加组件的引用。组件似乎是单声道兼容包，对您的情况有好处的是 RestSharp 和 Json.Net 都有组件：

[https://components.xamarin.com/view/restsharp](https://components.xamarin.com/view/restsharp)

[http://components.xamarin.com/view/json.net/](http://components.xamarin.com/view/json.net/)

# gnuplot - 如何在 gnuplot 行中添加间隙？

> ID：12402076
> 
> 赞同：1
> 
> 时间：2012-09-13T08:14:56.530
> 
> 标签：gnuplot

我有一个 gnuplot 线图。我想在该行中添加一个间隙（中断）以表示缺少数据。我怎样才能做到这一点？

例如，假设我有 x=10->100 和 200->500 之间的数据。所以我想要一条 10 到 100 之间的线（同一条线，所以图例匹配），然后是 100 到 200 之间的间隙，然后是 200 到 500 之间的线。

我曾尝试添加空数据点（即`-`y 值），但 gnuplot 很乐意插入这些点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:57:06.137

There's a very subtle difference between:

```
plot 'data' u 1:2 w lines 
```

and

```
plot 'data' u 1:($2) 2 lines 
```

In your case, I think it should work to do:

```
set datafile missing '-'
plot 'data' u 1:($2) w lines 
```

(**Note:** this results in a subtlely different plot than the blank line method I'll describe next).

Another way to do it is to just plot a blank line in the datafile where you want to have a gap.

e.g.:

```
#data
10 15
20 30
100 17

200 25
300 12
500 16 
```

and then plot with either `plot 'data' u 1:2 w lines` or `plot 'data' u 1:($2) w lines`. Both should produce an identical plot.

for more information, see `help missing` in gnuplot.

# c# - 如何在 C# 中解析 json 对象？

> ID：12402085
> 
> 赞同：2
> 
> 时间：2012-09-13T08:15:10.940
> 
> 标签：c#, json, c#-4.0, json.net

大批：

```
{ 
    "field':["field1":"value1","field2":"value2"], 
            ["field1":"value1","field2":"value2"]
} 
```

如何在c#中解析上述json响应

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T08:25:29.660

您提供的`json`字符串格式*不正确*，数组应为：`json``json`

```
{"field":[
           {"field1":"value1","field2":"value2"},
           {"field1":"value1","field2":"value2"}
         ]
} 
```

您可以使用[`json.net`](http://json.codeplex.com/)它来转换它：

```
var obj = JsonConvert.DeserializeObject(json); 
```

该工具在 nuget 中也可用。

如果你想使用强类型：

```
public class YourObject
{
    public string Field1 { get; set; }
    public string Field2 { get; set; }
}

public class YourClass
{
    public YourObject[] Field { get; set; }
}

var yourClass = JsonConvert.DeserializeObject<YourClass>(json); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T08:23:18.667

使用[newtonsoft json.net](http://json.codeplex.com/)解析 json 响应。

> 简单易行

[我在这里](https://stackoverflow.com/a/12276255/1196411)回答了同样的问题。*看一次*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T08:18:14.130

可能值得一看 javaScriptSerializer 类。以及其中的反序列化方法。

```
JavaScriptSerializer jss= new JavaScriptSerializer();
User user = jss.Deserialize<User>(jsonResponse); 
```

# mysql - 具有子查询的 PROCEDURE 中的 CURSOR

> ID：12402090
> 
> 赞同：3
> 
> 时间：2012-09-13T08:15:25.567
> 
> 标签：mysql, sql, cursor

我在 MySQL 中有这个过程（它的一部分）

```
DECLARE num_rows INT(11) DEFAULT NULL;
DECLARE insert_result INT(11) DEFAULT NULL;

DECLARE var_user_id INT DEFAULT NULL;
DECLARE user_that_posted_this_post INT DEFAULT NULL;
DECLARE arg_in_group_id INT DEFAULT NULL;
DECLARE how_many_comments INT DEFAULT 0;

/* Cursor 1 (posts) */
DECLARE done INT DEFAULT 0;
DECLARE c1 CURSOR FOR 
    SELECT user_id 
    FROM user_rights 
    WHERE user_rights.right = 101 AND 
    user_rights.group_id  = 
    (
        SELECT 
        posted_in
        FROM posts
        WHERE
        id = arg_post_id
    )
    ORDER BY user_id DESC;
DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;

/* See how many comments has this post */
SELECT count(id) FROM  comments_posts WHERE posted_in = arg_post_id INTO how_many_comments;

/* Fetch the autor of this post and the group_id */
SELECT posted_by,posted_in FROM posts WHERE id = arg_post_id INTO user_that_posted_this_post,arg_in_group_id;

IF arg_post_id IS NULL OR arg_post_id = ''
THEN
    SELECT '0' AS response;
ELSE
    DELETE FROM posts WHERE id = arg_post_id;
END IF;

/* Increment the notifications for every afected user */
INSERT INTO t VALUES(0);
OPEN c1;
read_loop: LOOP
    FETCH c1 INTO var_user_id;
        IF done THEN
            LEAVE read_loop;
        ELSE
            INSERT INTO t VALUES(var_user_id);
        END IF;
END LOOP;
CLOSE c1; 
```

我发生了一些有线的事情（光标没有取任何值），例如这个查询

```
SELECT user_id 
FROM user_rights 
WHERE user_rights.right = 101 AND 
user_rights.group_id  = 
(
    SELECT 
    posted_in
    FROM posts
    WHERE
    id = arg_post_id
) 
```

返回已发布帖子的组中拥有 101（已阅读）权限的所有用户。结果在sql中完美运行，例如

```
SELECT user_id 
FROM user_rights 
WHERE user_rights.right = 101 AND 
user_rights.group_id  = 
(
    SELECT 
    posted_in
    FROM posts
    WHERE
    id = 247
)

RESULT
user_id
1
3
2
16
17
20
19 
```

但是当我尝试从`CURSOR`

```
/* Increment the notifications for every afected user */
INSERT INTO t VALUES(0);
OPEN c1;
read_loop: LOOP
    FETCH c1 INTO var_user_id;
        IF done THEN
            LEAVE read_loop;
        ELSE
            INSERT INTO t VALUES(var_user_id);
        END IF;
END LOOP;
CLOSE c1; 
```

它不起作用......它只在`t`表中写“0”为什么会这样？我不能在游标中使用子查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-14T22:34:31.657

据我所知，游标不能用子查询声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T19:11:29.200

它不起作用，因为光标是敏感的，这意味着它指向真实数据。它不适用于这样的子查询：

```
DECLARE c1 CURSOR FOR 
    SELECT user_id 
    FROM user_rights 
    WHERE user_rights.right = 101 AND 
    user_rights.group_id  = 
    (
        SELECT 
        posted_in
        FROM posts
        WHERE
        id = arg_post_id
    )
    ORDER BY user_id DESC; 
```

# ios - 文件是通用的（三个切片），但它不包含 iOS 上静态库的（n）ARMv7-s 切片错误，无论如何要绕过？

> ID：12402092
> 
> 赞同：405
> 
> 时间：2012-09-13T08:15:38.833
> 
> 标签：ios, objective-c, xcode, ios6, static-libraries

我升级了[Xcode](http://en.wikipedia.org/wiki/Xcode)版本，当使用外部静态库时，我收到以下消息：

> ld：文件是通用的（3 个切片），但不包含 a(n) armv7s 切片：/file/location for architecture armv7s clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

如果库的开发人员还没有更新他们的库，有没有办法绕过这个并添加对库的支持？

* * *

## 回答 #1

> 赞同：418
> 
> 时间：2012-09-13T09:10:00.540

如果您想删除对任何架构的支持，例如，在您的情况下为[ARMv7-s](http://en.wikipedia.org/wiki/ARM_architecture#ARM_cores)，请使用菜单*项目*->*构建设置*-> 从“有效架构”中删除架构。

在库更新之前，您可以将其用作临时解决方案。您必须从主项目中删除架构，而不是从库中。

或者，您可以将调试配置的“仅构建活动架构”的标志设置为是。将发布配置的“仅构建活动架构”保留为否，这样您会在发布之前收到提醒，您应该升级您正在使用的任何第三方库。

* * *

## 回答 #2

> 赞同：191
> 
> 时间：2012-09-16T19:55:57.947

我只是在目标的构建设置中将“仅构建活动架构”切换为“是”，现在可以了！

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-09-14T07:32:56.310

尝试从项目的“有效架构”中删除 armv7s 以从 iOS 5.1 手机的此问题中发布

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-09-13T18:16:12.473

我刚刚在[此处](https://stackoverflow.com/a/12412222/526433)发布了一个修复程序，该修复程序也适用于这种情况 - 基本上，您在外部库中执行十六进制查找和替换，使其认为它是 ARMv7s 代码。您应该能够使用`lipo`将其分解为 3 个静态库，复制/修改 ARMv7 的一个，然后`lipo`再次使用为所有 4 个架构组装一个新库。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-09-15T18:52:02.463

Flurry 支持 iPhone 5 (ARMv7s) 正如我在昨天的帖子中提到的，Flurry 在周三发布消息后立即开始开发 iOS SDK 版本以支持新 iPhone 5 中的 ARMv7s 处理器。

我很高兴地告诉您，工作已经完成，并且 SDK 现在可以在网站上使用。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-09-27T14:48:45.620

use menu Project -> Build Settings ->

then remove armv7s from the"valid architectures". If standard has been chosen then delete that and then add armv7.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-10-31T17:55:39.150

万一这发生在某人身上。我建立了自己的库以与第三方代码一起使用。当我构建它以交付时，我不小心将我的 iPhone 4S 插入了电源，因此 Xcode 仅为插入的架构构建了我的库，而不是遵循项目设置。删除所有插入的设备并重建库，链接它，你应该没事。

希望能帮助到你。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-25T18:19:52.193

就我而言，我正在链接到一个有点旧的第三方库（为 iOS 6 开发，在 XCode 5 / iOS 7 上）。因此，我不得不更新第三方库，进行清理和构建，现在构建成功。

# javascript - html5 3d，画布，三个.js

> ID：12402093
> 
> 赞同：1
> 
> 时间：2012-09-13T08:15:41.003
> 
> 标签：javascript, jquery, html, three.js

我有以下 HTML

```
<canvas id="container" name ="container" width="300" height="300"></canvas> 
```

和 JavaScript 代码

```
var WIDTH = 400, HEIGHT = 300;
var VIEW_ANGLE = 90, ASPECT = WIDTH / HEIGHT, NEAR = 1, FAR = 300;

renderer = new THREE.CanvasRenderer();
renderer.setSize( WIDTH, HEIGHT );

camera = new THREE.PerspectiveCamera(VIEW_ANGLE,ASPECT,NEAR,FAR);
camera.position.z = 200;

scene = new THREE.Scene();
scene.add(camera);

renderer.render( scene, camera );

document.body.appendChild( renderer.domElement );
//$('#container').appendChild(renderer.domElement);

$('#container').width(WIDTH);
$('#container').height(HEIGHT);

function getSphere() {
    var radius = 50, segments = 16, rings = 16;
    var geometry = new THREE.SphereGeometry(radius,segments,rings);
    var material = new THREE.MeshLambertMaterial({
        color: 0xCC0000
    });
    return new THREE.Mesh(geometry, material);
} 
```

`document.body.appendChild( renderer.domElement );`作品，

但是如何用 jQuery 写入画布呢？

`$('#container').appendChild(renderer.domElement);`不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T08:16:36.363

你可以试试这个：

```
$('#container').append(renderer.domElement); 
```

`$('#container')`返回一个 jQuery 对象，其中`appendChild()`是一个 JavaScript 方法，它适用于 JavaScript DOM 元素，但不适用于 jQuery 对象。

因此，要追加使用 jQuery 方法***[`.append()`](http://api.jquery.com/append)***。

* * *

由于您`#container`是一个`canvas`元素，它不支持该`appendChild()`方法。相反，您可以将其更改为`div`类似：

```
<div id="container" name="container" style:"width:300;height:300"></div> 
```

然后尝试：

```
document.getElementById('container').appendChild(renderer.domElement); 
```

***或者***

```
$('#container').append(renderer.domElement); 
```

在这里，您不需要添加`<canvas>`any，因为`renderer.domElement`它是一个`canvas`元素。例如，在***[这个链接](http://mrdoob.github.com/three.js/examples/webgl_materials_bumpmap.html)***中，查看源代码显示没有`<canvas>`。`HTML`相反，它通过 JavaScript 创建 a `div`，将其附加到 the `DOM`，最后将`renderer.domElement`(which is `<canvas>`) 附加到 that `div`。

# oracle - .Net 的正确 Oracle 客户端

> ID：12402098
> 
> 赞同：1
> 
> 时间：2012-09-13T08:16:13.910
> 
> 标签：oracle, client, updates

我们的应用程序是使用 .Net Framework 4、C# 开发的。

看到这种问题后： [ORA-12571: TNS:packet writer failure with ASP.NET](https://stackoverflow.com/questions/7151175/ora-12571-tnspacket-writer-failure-with-asp-net)

我选择将我的 Oracle 客户端更新到版本 11.2.0.3。

为了使我们的 DatabaseProvider 工作，我们正在使用这些 dll：

**文件名（版本）**

*   oci.dll (11.2.0.1)
*   ociw32.dll (11.1.0.1)
*   Oracle.DataAccess.dll (4.112.0.2)
*   orannzsbb11.dll (11.0.0.1)
*   oraocci11.dll (11.2.0.2)
*   oraociei11.dll (11.2.0.1)
*   OraOps11w.dll (2.112.2.0)
*   orasql11.dll (11.1.0.6)

我的问题是：我的客户端在 Windows Server 2008 R2 上运行：

我发现了这个，但我不确定库是否正确：

[http://www.oracle.com/technetwork/topics/winx64soft-089540.html](http://www.oracle.com/technetwork/topics/winx64soft-089540.html)

解压缩“instantclient-basic-windows.x64-11.2.0.3.0”后，我找不到这两个 dll：

*   Oracle.DataAccess
*   OraOps11w

作为 Oracle 数据库的初学者，我是否走在正确的道路上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T09:12:05.083

您提供的链接：*Instant Client Package - Basic：运行 OCI、OCCI 和 JDBC-OCI 应用程序所需的所有文件*为您提供了用于 JAVA 应用程序的即时客户端。

[对于.NET](http://www.oracle.com/technetwork/database/windows/downloads/index-101290.html)，您需要 ODP.NET：http://www.oracle.com/technetwork/database/windows/downloads/index-101290.html

和 64 位版本：[http ://www.oracle.com/technetwork/database/windows/downloads/index-090165.html](http://www.oracle.com/technetwork/database/windows/downloads/index-090165.html)

我建议您使用 XCopy 版本（即使您是初学者）。zip 文件中包含的 readme.htm 提供了所有必要的说明。

# javascript - 将表单中的数据存储到 Javascript 变量中

> ID：12402101
> 
> 赞同：3
> 
> 时间：2012-09-13T08:16:30.660
> 
> 标签：javascript

当谈到 javascript 时，我是一个新手，我正在玩不同的教程并尝试制作自己简单的东西来更好地理解这一切。今天的学习都是关于通过函数传递参数。我想做的是让用户填写表格，将这些答案提交给 javascript 中的变量，然后通过 onClick 事件调用一个函数，然后显示输入到表单中的所有数据。

首先，我希望这是有道理的，其次，我希望它正确使用 javascript，老实说，我只是想更好地理解传递参数。

任何人都可以建议任何资源或指出我从哪里开始这个小项目的正确方向

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T08:18:15.873

```
var data = document.getElementById('id').value; 
```

检查这个： [js变量](http://www.w3schools.com/js/js_variables.asp)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T08:22:45.063

表单元素是`select`, `input`, `textarea`.

在表单上，​​添加一个提交事件处理程序，它执行以下操作

使用`document.getElementsByTagName`方法，您可以获得表单中所有此类元素的数组。

所有这些元素都有一个`value`属性，它将返回其中的当前值。使用它，您可以在提交表单时创建一个字符串来表示当前数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T08:21:47.430

为了从具有唯一 ID 的文本框/文本区域/下拉列表中获取值，您可以使用

```
document.getElementBtId("IDOFTHECONTROL").value 
```

如果输入是 DIV/SPAN，则使用 innerHTML

```
 document.getElementBtId("IDOFTHECONTROL").innerHTML 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T08:20:08.670

最简单的方法：

```
var javascriptvar = document.getElementById('CONTROL_ID').value; 
```

# c# - MEF 组成问题

> ID：12402102
> 
> 赞同：8
> 
> 时间：2012-09-13T08:16:31.460
> 
> 标签：c#, mef, composition

我无法解决看似基本的 MEF 问题：我有 2 个“插件”项目（我们将其称为 P1 和 P2），以及两个插件共有的第三个项目（我们将其称为 C） . P1 和 P2 都参考 C。

当尝试导入 P1 中的组件时，它会失败，因为该组件依赖于 C 中的组件。

这是跟踪：

> System.ComponentModel.Composition 警告：1：ComposablePartDefinition 'MyCompany.Client.Pms.Plugin.InclusionList.ViewModel.InclusionListViewModel' 已被拒绝。组成保持不变。由于以下错误，更改被拒绝： 合成产生了多个合成错误，有 4 个根本原因。下面提供了根本原因。查看 CompositionException.Errors 属性以获取更多详细信息。
> 
> 1)**未找到与约束匹配的导出**'((exportDefinition.ContractName = "MyCompany.Client.Plugins.Common.Controls.Selectors.PortfolioSelectors.ViewModel.ICalypsoBookSelectorViewModel") && (exportDefinition.Metadata.ContainsKey("ExportTypeIdentity") && "MyCompany.Client.Plugins.Common.Controls.Selectors.PortfolioSelectors.ViewModel.ICalypsoBookSelectorViewModel".Equals(exportDefinition.Metadata.get_Item("ExportTypeIdentity"))))'。
> 
> 导致：无法在“MyCompany”部分设置导入“MyCompany.Client.Pms.Plugin.InclusionList.ViewModel.InclusionListViewModel.CalypsoBookSelectorViewModel (ContractName="MyCompany.Client.Plugins.Common.Controls.Selectors.PortfolioSelectors.ViewModel.ICalypsoBookSelectorViewModel")' .Client.Pms.Plugin.InclusionList.ViewModel.InclusionListViewModel'。元素：MyCompany.Client.Pms.Plugin.InclusionList.ViewModel.InclusionListViewModel.CalypsoBookSelectorViewModel (ContractName="MyCompany.Client.Plugins.Common.Controls.Selectors.PortfolioSelectors.ViewModel.ICalypsoBookSelectorViewModel") --> MyCompany.Client.Pms.Plugin .InclusionList.ViewModel.InclusionListViewModel --> DirectoryCatalog (Path="C:\Work\mmtrader\dashboard\Code\Src\Dashboard\MM\Trader\bin\Debug\Plugins\Positions")

[...]（在不同的视图模型上，其他 3 个问题完全相同）

我查看了 MEF 目录，事实证明 MEF 知道这些视图模型，所以我不知道缺少什么。

根据下面丹尼斯的要求，这是我的导入/导出：

出口：

```
Export(typeof(ICalypsoBookSelectorViewModel))]
public class CalypsoBookSelectorViewModel : ScreenWithCleanupLifecycle, ICalypsoBookSelectorViewModel
{...} 
```

进口：

```
[Import(typeof(ICalypsoBookSelectorViewModel))]
public ICalypsoBookSelectorViewModel CalypsoBookSelectorViewModel { get; set; } 
```

和目录：

![目录](../Images/af8e9c92b474ef7744c4219cb066c03c.png)

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T09:23:27.403

我终于找到了问题所在，它与 MEF 所指的 CalypsoBookSelectorViewModel 无关。

实际上，ViewModel 依赖于另一个组件（CalypsoBookSelectorModel），而后者又依赖于 IDispatcher 组件。

问题是这个 IDispatcher 组件，它是用合同名称指定的（见下文），被导出了**两次**（在每个插件中一次），所以 MEF 无法确定使用哪一个。真正的问题当然是**MEF 应该告诉我**，而不是把矛头指向链上两级的班级。

感谢丹尼斯查看问题，我希望这会帮助其他遇到同样问题的人。

调度程序导入：

```
[Import(DispatcherNames.BackgroundDispatcherName, typeof(IDispatcher))]
public IDispatcher Dispatcher { get; set; } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-13T08:42:17.593

您从（更准确地说，） `P1`进口一些东西。`C``ICalypsoBookSelectorViewModel`

当 MEF 容器尝试创建`P1`时，它还尝试解析所有导入，这`P1`取决于。因此，它在自己的目录和父导出提供程序中搜索`ICalypsoBookSelectorViewModel`类型的导出（实际上是合同名称，但在这种情况下无关紧要）。

如果未找到此类导出（这是您的情况），MEF 容器的组成保持不变。
要解决此问题，您应该添加`[Export(typeof(ICalypsoBookSelectorViewModel))]`到相应的类型定义。

当然，这一切都意味着您的目录和导出提供程序（如果有的话）已正确初始化。

请注意，此导出定义**不**相等：

```
public interface IA {}

[Export(typeof(IA))] // contract name is "IA"
public class A : IA {}

[Export] // contract name is "A"
public class A : IA {}

[Export]
public class Composed
{
    [Import] // MEF will search for exports like [Export(typeof(IA))]
    private IA field1;

    [Import] // MEF will search for exports like [Export]
    private A field1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-24T09:57:39.050

进入这个问题后，我一直在寻找解决方案。我意识到我正在使用**System.Composition**而不是在导出类上使用**System.ComponentModel.Composition 。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-22T21:27:00.280

发生错误是因为他使用`[Import]`，对于导入多个你应该使用`[ImportMany]`

# mysql - MYSQL + hot 计算查询执行时间

> ID：12402106
> 
> 赞同：1
> 
> 时间：2012-09-13T08:16:50.913
> 
> 标签：mysql

我有一个与数据库表`java/hibernate`交互的应用程序。`MYSQL`

定期（比如每 1 小时或 24 小时），我想测量另一个`application/script`.

有没有办法做到这一点？

# java - 在 Java 中使用正则表达式匹配子域和顶级域

> ID：12402111
> 
> 赞同：0
> 
> 时间：2012-09-13T08:17:16.100
> 
> 标签：java, regex

跟进这个问题 [Regex to match pattern with subdomain in java](https://stackoverflow.com/questions/12393918/regex-to-match-pattern-with-subdomain-in-java)

我使用下面的模式来匹配域和子域

```
 Pattern pattern = Pattern.compile("http://([a-z0-9]*.)example.com"); 
```

此模式与以下匹配

*   `http://asd.example.com`
*   `http://example.example.com`
*   `http://www.example.com`

但它不匹配

*   `http://example.com`

谁能告诉我怎么搭配`http://example.com`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:19:26.793

只需使用 a 将第一部分设为可选`?`：

```
Pattern pattern = Pattern.compile("http://([a-z0-9]*\\.)?example\\.com"); 
```

请注意，`.`匹配任何字符时，您应该使用`\\.`来匹配文字点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-19T10:02:43.363

You can use this regex pattern to get domains of all urls:

```
\\p{L}{0,10}(?:://)?[\\p{L}\\.]{1,50} 
```

For example;

```
Input  = http://www.google.com/search?q=a
Output = http://www.google.com

Input  = ftp://www.google.com/search?q=a
Output = ftp://www.google.com

Input  = www.google.com/search?q=a
Output = www.google.com 
```

Here, \p{L}{0,10} stands for the http, https and ftp parts (there could be some more i don't know), (?:://)? stands for :// part if appears, [\p{L}\.]{1,50} stands for the foo.bar.foo.com part. The rest of the url is cut out.

And here is the java code that accomplises the job:

```
public static final String DOMAIN_PATTERN = "\\p{L}{0,10}(?:://)?[\\p{L}\\.]{1,50}";

public static String getDomain(String url) {
    if (url == null || url.equals("")) {
        return "";
    }
    Pattern p = Pattern.compile(DOMAIN_PATTERN);
    Matcher m = p.matcher(url);

    if (m.find()) {
        return m.group();
    }
    return "";
}

public static void main(String[] args) {
    System.out.println(getDomain("www.google.com/search?q=a"));
}

Output = www.google.com 
```

Finally, if you want to match just "example.com" you can simply add it to the end of the pattern like :

```
\\p{L}{0,10}(?:://)?[\\p{L}\\.]{0,50}example\\.com 
```

And this will get all of the domains with "example.com":

```
Input  = http://www.foo.bar.example.com/search?q=a
Output = http://www.foo.bar.example.com 
```

Note : Note that \p{Ll} can be used instead of \p{L} because \p{Ll} catches lowercase unicode letters (\p{L} all kind of unicode letters) and urls are constructed of lowercase letters.

# iphone - 将 MKMapView 缩放到 CLRegion

> ID：12402113
> 
> 赞同：3
> 
> 时间：2012-09-13T08:17:30.953
> 
> 标签：iphone, ios5, mkmapview

我在 iOS5 上使用 CLGeocoder 获得 CLPlacemark。现在我想获取地标的区域（CLRegion 对象）并将我的 MKMapView 缩放到该区域，这到底怎么可能？

[我想要this](https://gist.github.com/3402711)的倒数，但似乎没有`-locationFromLocationWithDistance:`或等效的方法。我希望没有人说你必须反向使用Haversine公式，因为这看起来有点复杂......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T10:26:38.700

或者，不用所有的数学运算，只需使用 API 为此提供的方法。

```
MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance([placemark region].center, [placemark region].radius, [placemark region].radius);
[[self mapView] setCenterCoordinate:[placemark region].center animated:NO]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T08:50:54.110

您可以使用[此处](http://www.movable-type.co.uk/scripts/latlong.html)提供的数学来完成。对于代码

```
 CLLocationCoordinate2D center = placemark.location.coordinate;
        CLRegion* coreLocationRegion = placemark.region;
        CLLocationDistance radius = coreLocationRegion.radius;
#define kBEARING_NORTH 0.0
#define kBEARING_EAST  .5 * M_PI
#define kBEARING_SOUTH M_PI
#define kBEARING_WEST  1.5 * M_PI

#define kEARTH_RADIUS_M 6371000.0

        // Store the angular distance of each side from the center
        double angDist = radius / kEARTH_RADIUS_M;

        // Convert center lat and lng to radians
        double centerLatRad =  center.latitude * M_PI / 180;
        double centerLngRad = center.longitude * M_PI / 180;

        // Calculate latitude range
        double maxLatRad = asin(sin(centerLatRad) * cos(angDist) +
                                cos(centerLatRad) * sin(angDist) * cos(kBEARING_NORTH));

        double minLatRad = asin(sin(centerLatRad) * cos(angDist) +
                                cos(centerLatRad) * sin(angDist) * cos(kBEARING_SOUTH));

        // Calculate longitude range
        // Longitude range requires coresponding latitudes:
        double tempLatRad;

        // Calculate max longitude
        tempLatRad = asin(sin(centerLatRad) * cos(angDist) +
                          cos(centerLatRad) * sin(angDist) * cos(kBEARING_EAST));

        double maxLngRad = centerLngRad + atan2(sin(kBEARING_EAST) * sin(angDist) * cos(centerLatRad),
                                                cos(angDist) - sin(centerLatRad) * sin(tempLatRad));

        // Calculate min longitude
        tempLatRad = asin(sin(centerLatRad) * cos(angDist) +
                          cos(centerLatRad) * sin(angDist) * cos(kBEARING_WEST));

        double minLngRad = centerLngRad + atan2(sin(kBEARING_WEST) * sin(angDist) * cos(centerLatRad),
                                                cos(angDist) - sin(centerLatRad) * sin(tempLatRad));

        CLLocationDegrees latitudeDelta = (maxLatRad-minLatRad) * 180 / M_PI;
        CLLocationDegrees longitudeDelta = (maxLngRad-minLngRad) * 180 / M_PI;
        MKCoordinateSpan span = MKCoordinateSpanMake(latitudeDelta, longitudeDelta);
        MKCoordinateRegion region = MKCoordinateRegionMake(center, span);
        [self.mapView setRegion: region animated: YES]; 
```

# c++ - std::shared_ptr 中的最大引用计数是多少？如果你试图超过它会发生什么？

> ID：12402116
> 
> 赞同：22
> 
> 时间：2012-09-13T08:17:42.570
> 
> 标签：c++, c++11, shared-ptr, reference-counting

如果我们假设`std::shared_ptr`存储引用计数（我意识到标准不需要，但我不知道有任何实现不需要），那么引用计数的位数是有限的，这意味着存在最大数量支持的引用。这就引出了两个问题：

*   这个最大值是多少？
*   如果您尝试超过它（例如，通过复制一个引用具有最大引用计数的对象的 std::shared_ptr ）会发生什么？请注意，声明了`std::shared_ptr`的复制构造函数`noexcept`。

该标准是否阐明了这些问题中的任何一个？常见的实现如何，例如 gcc、MSVC、Boost？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-13T08:20:50.910

我们可以从`shared_ptr::use_count()`函数中得到一些信息。§20.7.2.2.5 说：

```
long use_count() const noexcept; 
```

> 返回：包含的、与 共享所有权的`shared_ptr`对象的数量，或者何时为空。`*this``*this``0``*this`
> 
> [注：`use_count()`不一定有效。-结束注]

乍一看，`long`返回类型似乎回答了第一个问题。但是，该注释似乎暗示`shared_ptr`可以随意使用任何类型的引用计数，包括引用列表之类的东西。如果是这种情况，那么理论上不会有最大引用计数（尽管肯定会有*实际*限制）。

对于我能找到的同一对象的引用数量限制，没有其他参考。

有趣的是，`use_count`它记录了不抛出和（显然）正确报告计数；除非实现确实使用`long`成员进行计数，否则我看不出如何在理论上始终保证这两者。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-13T08:24:08.297

我不确定标准的建议是什么，但实际看一下：

*引用计数*很可能是某种`std::size_t`变量。`-1+2^32`此变量在 32 位环境和`-1+2^64`64 位环境中最多可以保存值。

现在想象一下这个变量要达到这个值会发生什么：你需要 2^32 或 2^64 个`shared_ptr`实例。好多啊。事实上，这太多了，以至于在你达到这个数字之前很久就会耗尽所有内存，因为一个内存`shared_ptr`大约有 8/16 字节大。

因此，如果 refcount 变量的大小足够大，您不太可能达到引用计数的限制。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-13T09:04:42.003

标准没有说；正如你所说，它甚至不需要引用计数。另一方面，标准中（或至少在 C 标准中）有（或曾经）声明超过实现限制是未定义的行为。所以这几乎可以肯定是官方的答案。

在实践中，我希望大多数实现将计数保持为 a`size_t`或 a `ptrdiff_t`。在具有平面寻址的机器上，这几乎意味着您无法创建足够的引用来导致溢出。（在这样的机器上，单个对象可以占用所有内存，`size_t`或者`ptrdiff_t`与指针具有相同的大小。由于每个引用计数指针都有一个不同的地址，所以永远不会超过一个指针的容量。）在机器上然而，对于分段架构，溢出是完全可以想象的。

正如乔恩指出的那样，该标准还要求 `std::shared_ptr::use_count()`返回一个`long`. 我不确定这里的理由是什么：或者在`size_t`这里`ptrdiff_t`更有意义。但是如果实现对引用计数使用不同的类型，大概转换规则`long`将适用：“如果它可以在目标类型（和位域宽度）中表示，则该值不变；否则，该值是实现定义。” （C 标准更清楚地说明了这一点：“实现定义的值”可以是一个信号。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-13T21:37:21.517

您可以通过使用placement new 实例化共享指针并且从不删除它们来了解会发生什么。然后，您可以轻松达到 32 位限制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-18T10:27:39.450

C++11 标准指定`long`了`use_count()`观察者函数的返回类型，但没有明确指定实现是否必须支持`2^(sizeof(long)*8-1)-1`共享所有权。

它也没有指定引用计数器溢出时会发生什么。

该`boost::shared_ptr`实现（例如 Fedora 23、x86-64 上的 1.58）在内部使用 32 位计数器并且不检查溢出。

这意味着：

1.  最大引用计数为`2^31-1`.
2.  如果您有溢出和释放所有权，您最终可能会遇到一些释放后使用的问题

由于 boost 对不同平台使用不同的低级专业化，您可以通过设置断点来验证详细信息`*add_ref_lock`- 在 Fedora 23/x86-64 上，您将在此处停止：

```
/usr/include/boost/smart_ptr/detail/sp_counted_base_gcc_x86.hpp
[..]
int use_count_;        // #shared
int weak_count_;       // #weak + (#shared != 0)
[..]
bool add_ref_lock() // true on success
{
    return atomic_conditional_increment( &use_count_ ) != 0;
} 
```

也可以看看：

*   [共享指针的使用计数器中的整数溢出 - Boost Ticket 12335](https://svn.boost.org/trac/boost/ticket/12335)
*   [双倍位，双倍麻烦：迁移到 64 位平台引起的漏洞](https://www.tu-braunschweig.de/Medien-DB/sec/pubs/2016-ccs.pdf)

GNU STL (libstdc++) shared_pointer 实现基于 Boost 1.32 并且也有这个问题（在 Fedora 23/x86-64 上） - 该`_Atomic_word`类型用于引用计数。它也是“仅”32 位的，不检查溢出。

相比之下，LLVM libc++`shared_ptr`实现使用 a`long`作为引用计数器，即在 x86-64 等 LP64 平台上，您可以在最多`2^63-1`所有者之间共享一个对象。

# github - 如何将 SVN 和 Git 集成？

> ID：12402117
> 
> 赞同：0
> 
> 时间：2012-09-13T08:17:43.537
> 
> 标签：github

现在我们正在使用 SVN 在公司开发一个[开源移动分析。](http://dev.cobub.com)[**但是现在我们在Github**](http://github.com/cobub/razor)中开源了代码。

管理方面，我们必须在办公室继续使用 SVN，那么如何获取脚本或其他东西来帮助我从 SVN 存储库中获取所有更改的代码并自动提交并推送到 Github？而且现在 Github 有一些旧版本的代码，而我们本地的 svn 的代码是最新的。如何将 svn 代码同步到 Github，从哪个版本？

另一个问题是 Github 的文件夹结构与 svn 的代码文件夹结构不同。我需要将一些子文件夹同步到 Github。我该如何处理？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:25:09.863

svn2git[项目](https://github.com/nirvdrum/svn2git)（2.0 版）似乎是您所需要的：

> 从 svn2git 2.0 开始，有一个新功能可以将来自 SVN 的最新更改提取到使用 svn2git 创建的 git 存储库中。这是一种单向同步，但允许您使用 svn2git 作为 SVN 存储库的镜像工具

# tfs - 从 TFS 构建控制器激活 Win8 Metro 应用程序

> ID：12402132
> 
> 赞同：0
> 
> 时间：2012-09-13T08:18:49.307
> 
> 标签：tfs, permissions, windows-8, microsoft-metro, windows-runtime

我编写了一个单元测试项目，它取消部署已部署的 Metro 应用程序，构建一个 Metro 项目，然后重新部署该应用程序并激活它。该应用程序包含 QUnit Metro 测试，一旦测试产生结果，单元测试项目就会完成执行。

我已经完成了所有这些工作，但是我想将它与 TFS 构建控制器集成，并且我遇到了各种权限问题。该构建显然无法部署或取消部署该应用程序，也无法激活它。我正在通过 powershell 脚本实现部署和取消部署（构建正在尝试做同样的事情）。应用激活是通过应用激活器界面实现的。

我将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:07:39.603

事实证明，构建控制器需要作为交互式进程启动，否则它无权启动 Windows 8 应用程序。在我这样做之后，一切都像魅力一样！

# sql - 如何在另一个 srored 过程中的一个存储过程中使用 SELECT 的结果？

> ID：12402133
> 
> 赞同：6
> 
> 时间：2012-09-13T08:18:51.440
> 
> 标签：sql, sql-server, database

我有一个存储过程，它计算几个值并存储`SELECT`它们：

```
CREATE PROCEDURE [dbo].[MyProc]
AS
   DECLARE @value1 int;
   DECLARE @value2 int;
   SET @value1 =...
   IF( @value1 IS NULL ) 
       RETURN 0;
   SET @value2 =...
   SELECT @value1 AS Value1, @value2 AS Value2;
RETURN 0; 
```

我知道我可以把它变成一个表函数，但我宁愿不这样做，因为`RETURN`在中间——有时没有什么可以返回。

我想从另一个存储过程中调用该存储过程并使用在另一个过程中检索到的值`SELECT`。我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T08:26:10.043

您可以创建一个临时表并在其中插入两个值。

```
CREATE TABLE #Temp (value1 int, value2 int)

INSERT INTO #Temp (value1, value2)
EXEC [dbo].[MyProc] 
```

如果 Value1 为 NULL，则 #Temp 中将没有记录，在这种情况下，您不需要返回 0。

But if it is not your goal, and you need return 0, then you should use the @value1 and @value2 as output parameters.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T08:24:14.827

您可以添加输出参数：

```
CREATE PROCEDURE [dbo].[MyProc]
(
  @value1 int = null output,
  @value2 int = null output
)
AS

   SET @value1 =...
   IF( @value1 IS NULL ) 
       RETURN 0;
   SET @value2 =...
   SELECT @value1 = Value1, 
          @value2 = Value2;
RETURN 0; 
```

并使用它：

```
declare @v1 int, 
        @v2 int

exec MyProc @v1 out, @v2 out

select @v1, @v2 
```

或者如果您需要更多值，您可以使用临时表

```
create table #tmp
(
  val1 int null,
  val2 int null 
)

CREATE PROCEDURE [dbo].[MyProc]   
AS

   SET @value1 =...
   IF( @value1 IS NULL ) 
       RETURN 0;
   SET @value2 =...

   insert into #tmp
   SELECT Value1, Value2
   from tab

RETURN 0; 
```

并使用它：

```
create table #tmp
(
  val1 int null,
  val2 int null 
)

exec MyProc 

select *
from #tmp

drop table #tmp 
```

# c - pthread_mutex_trylock 段错误

> ID：12402138
> 
> 赞同：0
> 
> 时间：2012-09-13T08:19:19.570
> 
> 标签：c, locking, pthreads, segmentation-fault, deadlock

我花了一周的时间来修复一个程序，一开始我得到了 SIGBUS，但经过多次尝试后，程序仍然出现 SIGSEGV 段错误，在下面我发布了段错误日志 + 源代码。如果专家帮助我修复此段错误错误，我将不胜感激。任何建议都将受到高度赞赏。提前致谢

```
LL_NODE *ll_prepend(LLIST *l, void *obj)
{
    if (l && obj) {
//line bellow is module-datastruct-llist.c:167 
//mentioned in segment-fault log as frame 3

      if (!ll_lock(l)) return NULL;
        LL_NODE *new;
        if(!cs_malloc(&new,sizeof(LL_NODE), -1)) return NULL;
        new->obj = obj;
        new->nxt = l->initial;
        l->initial = new;
        if (!l->last)
            l->last = l->initial;
        l->count++;
        ll_unlock(l);
        return new;
    }
    return NULL;
}

int32_t ll_lock(LLIST *l)
{
    int32_t res = 1;
   res=cs_trylock(&l->lock);

//line bellow is module-datastruct-llist.c:51  
//mentioned in segment-fault log as frame 2

  while (l && !l->flag && res) {
        cs_debug_mask(D_TRACE, "trylock ll_lock wait");
        cs_sleepms(fast_rnd()%5 + 1);
    }
    return !res;
}

int32_t cs_trylock(pthread_mutex_t *mutex){

    if(!mutex) return -1;
        int32_t result, oldtype;
        /* Make sure that we won't get interrupted while getting the lock */
        pthread_setcanceltype(PTHREAD_CANCEL_DEFERRED, &oldtype);

//line bellow is oscam-simples.c:1233  
//mentioned in segment-fault log as frame 1

        if((result=pthread_mutex_trylock(mutex)) == 0){

            struct s_client *cl = cs_preparelock(cur_client(), mutex);
            if(cl)
                cl->mutexstore_used++;
        }
        pthread_setcanceltype(oldtype, NULL);
        pthread_testcancel();
        return result;
    }

// in this function &l->lock is initialized   
LLIST *ll_create()
{
    LLIST *l = cs_malloc(&l, sizeof(LLIST), 0);
    pthread_mutex_init(&l->lock, NULL);
    return l;
}

Segment fault log :
Program received signal SIGSEGV, Segmentation fault.
[Switching to LWP 1905]
0x2979b7ba in pthread_mutex_trylock () from /lib/libpthread.so.0
(gdb) bt
#0  0x2979b7ba in pthread_mutex_trylock () from /lib/libpthread.so.0
#1  0x00410d98 in cs_trylock (mutex=0x247373a4) at oscam-simples.c:1233
#2  0x0043d4aa in ll_lock (l=0x24737398) at module-datastruct-llist.c:51
#3  0x0043d956 in ll_prepend (l=0x24737398, obj=0x4a2410)
    at module-datastruct-llist.c:167
#4  0x0040a66e in get_cw (client=0x4daa80, er=0x5063a0) at oscam.c:2645
#5  0x00439754 in dvbapi_process_input (demux_id=0, filter_num=0,
    buffer=0x2a98bb60 "\201q=", len=320) at module-dvbapi.c:1634
#6  0x0043c866 in stapi_read_thread (sparam=0x4d1558) at module-dvbapi.c:2441
#7  0x29799486 in ?? () from /lib/libpthread.so.0
Backtrace stopped: frame did not save the PC
(gdb) info args
No symbol table info available. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:24:15.767

问题来自`l->lock`从未初始化，因此包含非 NULL 不可用垃圾。

尝试`l->lock = NULL;`通过创建互斥锁来正确添加或初始化它。

# javascript - _.pluck 骨干集合不起作用

> ID：12402146
> 
> 赞同：1
> 
> 时间：2012-09-13T08:19:47.760
> 
> 标签：javascript, backbone.js, coffeescript

我有这个模型 -

```
class pt.SearchResultModel extends Backbone.Model
  defaults:
    id:"",
    image:"",
    colour:"" 
```

我正在尝试这个-

```
_.pluck(resultsCollection,'id') 
```

但它一直返回未定义 - 不确定发生了什么。

我犯了什么语法错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T08:35:55.807

Underscore 数组方法嵌入（可以这么说）到 Backbone 集合中。您可以直接在它们上调用它们：

```
resultsCollection.pluck 'id' 
```

在大多数情况下，您还可以在集合的`models`属性（这是一个普通的旧数组）上使用 Underscore 方法，例如`_.pluck someCollection.models, 'someAttr'`，但请注意这种情况`pluck`是特殊的，因为 Backbone 模型通常不会将它们的属性作为自己的属性（你必须打电话[`get`](http://backbonejs.org/#Model-get)才能访问它们）。尽管如此，Backbone 的实现`pluck`还是[非常简单](https://github.com/documentcloud/backbone/blob/c19459a816674502d8d244bcd962df983e2c8b09/backbone.js#L746)的:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:32:54.387

正如其他人提到的，您可以直接使用集合的[pluck方法，该方法代表下划线的](http://documentcloud.github.com/backbone/#Collection-pluck)[pluck](http://documentcloud.github.com/underscore/#pluck)方法。

但是我注意到，例如，如果你[过滤](http://documentcloud.github.com/underscore/#filter)你的集合，你最终会得到一个简单的模型数组，因此没有*集合的* `pluck`方法。在这种情况下，你可以做的是首先采摘`attributes`属性，然后采摘`id`例如这样的东西应该可以工作

`_.pluck(_.pluck(myCollection, 'attributes'), 'id');`

当然，您也可以只创建一个新集合并传入这些模型，然后访问该集合`pluck`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T08:34:03.713

它应该是：

```
resultsCollection.pluck('id'); 
```

以这种方式使用 Backbone 集合上的下划线方法，而不是以其原始形式使用`_.method()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T08:36:18.260

`Backbone.Collection`自动提供了很好的部分`underscore.js`功能。所以你可以写`resultsCollection.pluck('id')`，这样会好一些。

现在，关于您的问题：`pluck`在内部使用“get”来检索您的属性。这加上您的结果意味着您的模型没有`id`定义为属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T11:50:46.140

当你调用`_.pluck(resultsCollection,'id')`时，你调用集合对象的 pluck 方法。此集合具有**模型**属性，但没有**id**属性。

`resultsCollection.pluck('id')`这就是为什么调用wich 会为您完成所有工作会更好：

*   转到**模型**属性
*   转到每个模型的每个**属性属性**
*   找到想要的**id**值并将其放入结果数组

# css - 如何强制浮动 div 填充剩余的水平空间？

> ID：12402147
> 
> 赞同：4
> 
> 时间：2012-09-13T08:19:48.010
> 
> 标签：css, html, width

抱歉，我的问题没有明确的标题。在搜索解决方案时，我试图为它找到一个合适的名称，但我找不到描述它的确切方式。

我有固定大小的 div，必须向左浮动并且表现得像内联块。我在页面右侧有一个内容区域。这是一个演示我的意思的示例：http: [//jsfiddle.net/7sp5M/](http://jsfiddle.net/7sp5M/)。如果我尝试更改结果区域 div 的宽度，则会尝试适合块的区域。问题是块区域和内容区域之间存在间隙。我需要内容区域具有最小宽度，并且我希望该区域水平增长以填补这个空白：http: [//img89.imageshack.us/img89/296/floatingdivs001.png](http://img89.imageshack.us/img89/296/floatingdivs001.png)。

例如块的宽度是 100px；最小内容区域应为 200 像素。而且我需要内容宽度从 200 像素到 299 像素不等，具体取决于块的区域宽度。

请，建议是否可以用纯 HTML/CSS 实现这种行为？我没有避免使用表格的限制，因此任何可行的方法都是合适的。

**更新**：谢谢大家的意见。似乎不可能用纯 HTML/CSS 来实现它。我不确定这一点，因为我还不是很擅长 CSS。我刚刚用 JavaScript 和 jQuery 实现了这样的行为，它按照我需要的方式工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:24:40.820

然后我通常会在块 div 中放置一个内部容器，这样我就可以在不影响宽度的情况下分配填充：

```
.block { width: 20%; }
.block > .inner { padding-left: 10px; }
.block:fist-child > .inner { padding: 0; }
<div class="block">
    <div class="inner">
        block
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:34:39.797

你可以试试这个：

```
<div id="main" class="">
<div class="right">Content</div>
<div class="left">
    <div class="clearfix"></div>
    <div class="block">Block1</div>
    <div class="block">Block2</div>
    <div class="block">Block3</div>
    <div class="block">Block4</div>
    <div class="block">Block5</div>
    <div class="block">Block6</div>
</div>

</div> 
```

在 CSS 中：

```
.right {
  float: right;
  min-width: 200px;
  height: 300px;
  background: #888;
 }

.left {
  overflow: hidden;
  height: 300px;
  background: #ccc;
  width:300px;
  float: left;
 }

.block {

   width: 100px;
   height: 50px;
   float: left;
   border: 1px solid blue;
}
.clearfix{
   clear:both;
} 
```

为了改变 div 的宽度，我使用了 JQuery

```
$(document).ready(function(){

   var left_width = $(".left").width();
   var block_width = $(".block").width()+2;

   var count = Math.floor(left_width/block_width);

   var calc_left_width = count * block_width;
   var calc_right_width = $("#main").width() - calc_left_width;

   $(".left").width(calc_left_width);
   $(".right").width(calc_right_width);

}); 
```

我在块的宽度上加了 2 来考虑边框，你可以使用 outerwidth() insetead。[在这里](http://jsfiddle.net/mahsa_999/7sp5M/51/)你可以看到它的工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T08:29:01.667

`display: table;`你可以这样做`table-cell;`

您必须为包装器`#main`提供 CSS`display: table;` 及其子项`table-cell;`。并且您必须将`div.right`标记移到`div.left`

```
 <div class="left">
        <div class="block">Block1</div>
        <div class="block">Block2</div>
        <div class="block">Block3</div>
        <div class="block">Block4</div>
        <div class="block">Block5</div>
        <div class="block">Block6</div>
    </div>
    <div class="right">Content</div> 
```

您可以根据需要调整块的宽度，`100%/6=16%`这就是我使用 16% 的原因。如果你想要动态宽度，你可以把宽度声明放在外面，它们会自动调整到任何可用的大小。这模仿了表的行为，但仍然是语义标记。

```
#main
{
    width: 100%;
    display: table;
}

.right {
    display: table-cell;
    width: 200px;
    height: 300px;
    background: #888;
}
.left {
    overflow: hidden;
    height: 300px;
    background: #ccc;
    display: table-cell;
}
.block {
    width: 16%;
    height: 50px;
    float: left;
    border: 1px solid blue;
    display: table-cell;
}​ 
```

[http://jsfiddle.net/Kyle_Sevenoaks/7sp5M/31/](http://jsfiddle.net/Kyle_Sevenoaks/7sp5M/31/)

# list - 添加“单元”元素的 Scala 不可变列表

> ID：12402156
> 
> 赞同：2
> 
> 时间：2012-09-13T08:20:14.083
> 
> 标签：list, scala, functional-programming, immutability

我是 scala 的初学者，正在寻找最好的/惯用的方式来做我打算在这里做的事情。

这就是我想做的

```
def someMethod(obj:MyObj):List[String] = {
     List[String]() +: 
      {if (somecondition is satisfied) .. " element"} +: 
      { if (another condition) .. " something else " }

} 
```

即该方法检查输入参数对象的某些属性并将元素添加到列表（即要返回）。如果不满足任何条件，它应该返回一个空列表。

1.  当然，代码不会编译。但不知何故，对我来说 List[T] + Unit 应该返回 List[T] 似乎很直观。为什么我错了？

2\. 请告诉我做这个 Scala 的正确方法。如果我正在迭代一个条件列表，我可以使用推导式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T08:43:52.383

而不是过滤单元，我宁愿使用一元或空列表：

```
def someMethod(obj:MyObj): List[String] = {
    Nil ++
    ( if (somecondition is satisfied) List(" element") else Nil ) ++
    ( if (another condition) .. List(" something else ") else Nil ) ++
} 
```

编辑：关于您在下面的评论，如果您发现上面的代码过于冗长且难以维护，您仍然可以创建一个辅助函数：

```
def optElem[T]( condition: Boolean)( value: => T ): Option[T] = if ( condition ) Option( value ) else None
def someMethod(obj:MyObj): List[String] = {
  Nil ++
  optElem (somecondition is satisfied)( " element") ++
  optElem (another condition)(" something else " )
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T08:39:24.620

`if`-`else`是 Scala 中的表达式。你写的变成：

```
List[String]() +: 
      {if (somecondition is satisfied) {" element"; () } else () }+: 
      { if (another condition) { " something else "; () } else () } 
```

如您所见，常见的分支类型是`Unit`.

整个表达式的类型将是，因为这是and`List[Any]`的常见超类型。`String``Unit`

实现您想要的一些方法：

```
// #1\. Ugly.
def someMethod(obj:MyObj):List[String] = {
  val xs = List[String]() 
  val xs1 = if (somecondition is satisfied) xs :+ " element" else xs
  val xs2 = if (another condition) xs1 :+ " something else" else xs1
  xs2
}

// #2\. Better, but uses mutable builder.
def someMethod(obj:MyObj):List[String] = {
  val b = List.newBuilder[String]
  if (somecondition is satisfied) b += " element"
  if (another condition) b += " something else"
  b.result
} 

// #3\. Best way IMO, but computationally expensive.
def someMethod(obj:MyObj):List[String] = {
  List[String]() ++
  Option("element").filter(some condition) ++ // for more correct semantics
                                              // use LazyOption from Scalaz.
  Option("something else").filter(another condition)
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T08:27:15.253

你可以这样写：

```
def someMethod(obj:MyObj):List[String] = {
     List(
      if (somecondition is satisfied) " element", 
      if (another condition) " something else "
     ) collect{ case x: String => x }
} 
```

假设所有条件都失败了：你最终`List(Unit,Unit)`会得到 first ，它将按类型*过滤*。单位不满足收集内部的类型条件，因此结果将为空字符串列表

好消息是，不同的`filter`方法`collect`选择尽可能紧凑的类型（所以你会得到字符串序列——这将是从 collect 内部的函数推断出来的）。

另一种可能性是替换`.collect { ... }`为`flatten`，但您会丢失类型信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T12:12:11.537

对此的另一种看法是构建一个选项列表，然后将列表展平。

```
def f(obj: MyObj): List[String] = {
  List(if (cond1(obj)) Some("element")        else None,
       if (cond2(obj)) Some("something else") else None).flatten
} 
```

# css - Z-index 不适用于多个绝对定位元素

> ID：12402160
> 
> 赞同：1
> 
> 时间：2012-09-13T08:20:43.157
> 
> 标签：css, css-position, z-index

我有一个相当简单的交互式地图，上面有一堆“图钉”，悬停在上面时会显示相应的“标签”。

CSS（省略不相关的属性）：

```
#map { position: relative; }
.map-pin { display: block; position: absolute; }
.map-tag { float: left; left: 20px; opacity: 0; pointer-events: none; position: absolute; }
.map-pin:hover .map-tag { opacity: 1; pointer-events: all; } 
```

HTML（出于显而易见的原因，仅包含一个 pin div）：

```
<div id="map">

    <div id="map-pin-1" class="map-pin">
        <div class="map-tag"></div>
    </div>

</div> 
```

问题是标签，尽管给了它们足够高的 z-index 值，但不会出现在所有其他引脚之上。似乎它们只会出现在 DOM 中特定标签上方的引脚上方。例如，`#map-pin-3 .map-tag`将出现在和上方`#map-pin-1`，`#map-pin-2`但`#map-pin-4`会出现在标签上方。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:03:22.903

首先，在您的代码示例中，我没有看到在 map-tag 元素上定义的任何 z-index。其次，您似乎有堆叠上下文的问题。看一下[css 规范](http://www.w3.org/TR/CSS2/visuren.html#propdef-z-index)并仔细阅读，因为 z-index，IMO，过于复杂。

使用 z-index 时对我有帮助的一件事是 Firefox 中的“检查元素”选项。如果您选择要检查的元素，您将在右下角看到一个“3-D”选项。单击它，您可以更好地可视化堆栈顺序。

# android - android和ios有多少端口号？

> ID：12402161
> 
> 赞同：8
> 
> 时间：2012-09-13T08:20:43.720
> 
> 标签：android, iphone, ios

我试过谷歌，但甚至看不到关于这个的帖子。当我想在android中创建socket时，我们在PC中创建socket的规则是否适用于android？程序监听一个端口并等待创建套接字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T00:03:34.373

你有一个`ServerSocket`和一个`Socket`。打电话`Socket client = ss.accept()`等到客户挂机。如果您不确定哪个端口是空闲的，请使用`ss = new ServerSocket()`。这将自动分配一个空闲端口。还要确保您不在主线程上执行此操作，并在清单中声明相应的权限。

# javascript - 使用 jQuery.each 以相反的顺序检索键、值

> ID：12402163
> 
> 赞同：0
> 
> 时间：2012-09-13T08:20:51.637
> 
> 标签：javascript, jquery, each

我必须以相反的顺序从 javascript 对象中检索密钥。 例如，
`$.each()`按声明的顺序检索， 输出必须是thanx :)

`var a={'b':1,'c':2};`
`{'c':2,'b':1}`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T08:24:57.497

JavaScript 对象在迭代时没有保证键的顺序。[JavaScript 是否保证对象属性顺序？](https://stackoverflow.com/questions/5525795/does-javascript-guarantee-object-property-order)

如果必须依赖顺序，则必须使用数组。不要误以为您可以依赖这种未指定的行为。人们一直在要求 chrome 使迭代可靠，但他们不会。[http://code.google.com/p/chromium/issues/detail?id=883](http://code.google.com/p/chromium/issues/detail?id=883)被标记为不会修复，因为 JavaScript 从不保证它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T08:22:05.903

利用：

```
$(_array).reverse().each(function(i) {
// ...
}); 
```

对于对象，您可以执行以下操作：

```
var a = {a: 2, b: 1};

console.log('Declared order');
$.each(a, function(i) {
    console.log(i+': '+a[i]);
});

console.log('Reverse order');
var keys = [];
for(var k in a) keys.unshift(k);
$.each(keys, function(i) {
    console.log(keys[i]+': '+a[keys[i]]);
}); 
```

演示：http: [//jsfiddle.net/techfoobar/5kduC/](http://jsfiddle.net/techfoobar/5kduC/)

# c++ - 从 Spy++ 窗口获取文本

> ID：12402169
> 
> 赞同：3
> 
> 时间：2012-09-13T08:21:21.043
> 
> 标签：c++, text, window, spy++

我正在尝试使用 C++ 从 spy++ 中的“消息”窗口获取文本。

我试图向窗口及其子级发送消息，但它不起作用`WM_GETTEXT`。`LB_GETMESSAGE`

在记事本上测试的代码，它工作正常，那么如何做到这一点？

我将此函数称为 EnumChildWindows(spyHwnd,EnumChildProc,1); //spyHwnd 是“消息”窗口的句柄

```
BOOL CALLBACK EnumChildProc(HWND hwnd, LPARAM lParam)
{
  TCHAR text[40];
  int length = 0;
  int index = 5;
  length = SendMessage(hwnd,LB_GETTEXT,index,(LPARAM)text);//or WM_GETTEXT & maxLength=40

  return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:39:15.277

您正在寻找的窗口有一个“AfxWnd80u”类。我很确定它是所有者绘制的。除了绘画和鼠标相关的消息之外，它似乎没有收到任何消息。所有者绘制意味着 Spy++ 将文本存储在内部某处并手动绘制窗口画布。

如果在同一个列表中打开“消息属性”窗口，您可以看到正在使用的标准列表框控件。它显然有不同的行为 - 选择看起来不同，滚动更流畅（这是一个糟糕的证据，因为这些东西可以定制，但仍然有点说明 - 为什么你会在一个应用程序中做不同的事情？）

如果你在网上搜索“get text AfxWnd”，你会看到很多没有答案的问题。有些人求助于模拟 Ctrl+C 并获取剪贴板内容，但 Spy++ Messages 窗口似乎不支持 Ctrl+C。

所以，这里没有简单的 WinAPI 方式。

# sql - 获取一行sql

> ID：12402170
> 
> 赞同：0
> 
> 时间：2012-09-13T08:21:30.873
> 
> 标签：sql, sql-server

我有下表

```
Id          Stack
------------------
1             a
1             b
2             c
2             d 
```

我想得到下表结果。

```
Id          Stack
------------------
1             a
2             c 
```

我使用 DISTINCT 但它不起作用我该怎么做？有没有使用 group by 的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:52:24.813

```
CREATE table sampletb(id int, stack varchar(10));

INSERT into sampletb values(1,'a');
INSERT into sampletb values(1,'b');
INSERT into sampletb values(2,'c');
INSERT into sampletb values(2,'d');

SELECT * FROM sampletb;

id          stack
----------- ----------
1           a
1           b
2           c
2           d

SELECT id,
       stack,
       row_number() over (partition by id order by stack) as row_number
from   sampletb; 
```

这个查询会给你这样的结果。

```
id          stack      row_number
----------- ---------- --------------------
1           a          1
1           b          2
2           c          1
2           d          2 
```

现在将上述查询作为子查询并获取具有的列 `row_number=1`将给出您想要的输出。

```
select id,stack from 
       (
       SELECT id,
              stack,
              row_number() over (partition by id order by stack) as row_number 
       FROM   sampletb) x
where  x.row_number=1;

id          stack
----------- ----------
1           a
2           c 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T08:22:45.300

```
select id,stack from (
select id , stack  , row_number() over (partition by id order by stack) as rn
) k where rn=1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T08:22:54.983

我不确定您需要应用的确切逻辑，但这将返回您发布的结果：

```
SELECT  ID, MIN(Stack) AS Stack
FROM    T
GROUP BY ID 
```

如果您的 DBMS 允许，您可以对函数使用更高级的逻辑`ROW_NUMBER`（问题中没有标记）

```
SELECT  ID, Stack
FROM    (   SELECT  ID,
                    Stack,
                    ROW_NUMBER() OVER(PARTITION BY ID ORDER BY Stack) AS RowNumber
            FROM    T
        ) t
WHERE   RowNumber = 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T08:27:50.417

这应该有帮助

```
select Id, min(Stack) from <TABLE_NAME>
group by Id 
```

# excel - 枢轴计算公式：SUM(Field1)/AVG(Field2)

> ID：12402177
> 
> 赞同：12
> 
> 时间：2012-09-13T08:21:51.017
> 
> 标签：excel, pivot-table, calculated-columns

我有一个简单的表格，其中包含按日期和产品名称以秒为单位的数量和间隔。

```
Month | Product | Amount | Interval in sec
------------------------------------------
05-'12| Prod A  | 10     | 5
05-'12| Prod A  | 3      | 5
05-'12| Prod B  | 4      | 5
05-'12| Prod C  | 13     | 5
05-'12| Prod C  | 5      | 5 
```

从这个表中，我导出了一个数据透视表，其中包含按月和产品的 SUM(Amount)、AVERAGE(Interval in sec)。

```
Month | Product | SUM of Amount | AVG of Interval in sec
--------------------------------------------------------
05-'12| Prod A  | 13            | 5
05-'12| Prod B  | 4             | 5
05-'12| Prod C  | 18            | 5 
```

到目前为止，一切都很好。现在我想在我的数据透视表中添加一个额外的列，并给出以秒为单位的金额总和/间隔平均数的结果。

添加计算值`=SUM(Amount)/AVERAGE(Interval)`并没有给我正确的值。Excel给了我：

```
Month | Product | SUM of Amount | AVG of Interval in sec | Amount per sec
-------------------------------------------------------------------------
05-'12| Prod A  | 13            | 5                      | 1.3
05-'12| Prod B  | 4             | 5                      | 0.8
05-'12| Prod C  | 18            | 5                      | 1.8 
```

它实际上在做的是 =SUM(Amount)/SUM(Interval in sec) 每个 Month 和 Product 基于第一个表中的值。但我正在寻找：

```
Month | Product | SUM of Amount | AVG of Interval in sec | Amount per sec
-------------------------------------------------------------------------
05-'12| Prod A  | 13            | 5                      | 2.6
05-'12| Prod B  | 4             | 5                      | 0.8
05-'12| Prod C  | 18            | 5                      | 3.6 
```

因此，从字面上将枢轴字段“金额总和”除以枢轴字段“以秒为单位的间隔的平均值”。

如何做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-10-08T18:09:39.110

如果其他人遇到这个问题，我发现的一个解决方案是在您的数据集中添加一个辅助“计数”列，其中每条记录在“计数”字段下输入一个 1。

然后，为了达到Average的效果，可以使用：

`SUM(FIELD_TO_AVERAGE)/SUM(COUNT)`

我相信这应该适用于需要平均值的所有情况，但我还没有对它进行过广泛的测试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T09:37:51.547

您需要在公式中引用数据透视表数据，如下所示：

`=GETPIVOTDATA("Sum of Amount",$A$3,"Product","A")/GETPIVOTDATA("Average of Interval",$A$3,"Product","A")`

**编辑：** 从您的电子表格：将所需的列添加到数据透视表 A：

```
K5=GETPIVOTDATA("Sum of Amount",$H$2,"Month",DATE(2012,5,1),"Product","Prod A")/GETPIVOTDATA("Average of Interval",$H$2,"Month",DATE(2012,5,1),"Product","Prod A")
K6=GETPIVOTDATA("Sum of Amount",$H$2,"Month",DATE(2012,5,1),"Product","Prod B")/GETPIVOTDATA("Average of Interval",$H$2,"Month",DATE(2012,5,1),"Product","Prod B")
K7=GETPIVOTDATA("Sum of Amount",$H$2,"Month",DATE(2012,5,1),"Product","Prod C")/GETPIVOTDATA("Average of Interval",$H$2,"Month",DATE(2012,5,1),"Product","Prod C") 
```

您还可以通过在原始数据表中添加一个额外的列来生成该列：每个单独条目的金额/秒，然后当您透视所有数据时，该列的产品将是您想要的结果。

**编辑（2）：**

上面的公式是单元格公式而不是不能使用引用的数据透视表公式对不起我没有说清楚。我正在研究一个数据透视表计算公式，但现在上面作为数据透视表旁边的一列应该能产生你需要的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-29T20:55:44.670

在源（计数器）中创建一个字段并在每一行中输入“1”。将它也放入枢轴并用该字段除以秒的总和 - 然后它将是一个平均值。将原始字段除以该平均值，因此您的最终除法将是每个计数器的秒数总和，这将取得成功:)

# android - Android 布局 - 无法获取要显示的按钮和文本

> ID：12402178
> 
> 赞同：0
> 
> 时间：2012-09-13T08:22:02.407
> 
> 标签：android, layout

我在这里遇到了一个问题，我不熟悉 android 上的布局，我无法按照我的意愿来做这个布局。

我希望它显示如下：

```
[Button][Button]
Text Filled Here
Text Filled Here
Text Filled Here
Text Filled Here
Text Filled Here 
```

TextView 是通过我的 messagehelper 填充的，它将文本发送到 UI

最终，我的代码将遍历从 Web 服务检索到的对象列表，并将它们全部显示在各自的行上，并可选择按一个并在地图上查看它。

目前，我只能让两个按钮或文本分别显示，或者它们三个都在同一行，而不是第一行的两个按钮和向下填充的文本！！

这是我的代码：

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >
    <LinearLayout 
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/buttonLayout" 
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:layout_weight="1">
    <Button
        android:id="@+id/vehicleButton"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:layout_weight="1"
        android:text="Refresh"
        android:onClick="getVehicles" />
    <Button
        android:id="@+id/logoutButton"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:layout_weight="1"
        android:text="Logout"
        android:onClick="logout" />
    </LinearLayout>

    <LinearLayout 
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/textLayout" 
        android:layout_height="wrap_content"
        android:layout_width="fill_parent">
    <TextView
        android:id="@+id/textView1"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:layout_weight="1"
        android:textAppearance="?android:attr/textAppearanceMedium" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:27:29.723

默认情况下，`LinearLayout`方向是`horizontal`，您需要将您的第一个和第三个`LinearLayout`方向更改`xml`为`vertical`。

采用`android:orientation="vertical"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:26:31.223

您可以简化布局：

编辑：如果“向下填充”意味着您希望按钮下方的文本：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/vehicleButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_weight="1"
        android:onClick="getVehicles"
        android:text="Refresh" />

    <Button
        android:id="@+id/logoutButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/vehicleButton"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@id/vehicleButton"
        android:layout_weight="1"
        android:onClick="logout"
        android:text="Logout" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="false"
        android:layout_alignParentTop="false"
        android:layout_below="@id/vehicleButton"
        android:layout_weight="1"
        android:text="Test"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T08:41:47.343

为了将 textview 彼此放在底部，请使用方向作为垂直。

代码将是这个

```
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content" >
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/buttonLayout" 
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:layout_weight="1">
<Button
    android:id="@+id/vehicleButton"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:layout_weight="1"
    android:text="Refresh"
    android:onClick="getVehicles" />
<Button
    android:id="@+id/logoutButton"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:layout_weight="1"
    android:text="Logout"
    android:onClick="logout" />
</LinearLayout>

<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/textLayout" 
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:orientation="vertical"

>
<TextView
    android:id="@+id/textView1"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:layout_weight="1"
    android:textAppearance="?android:attr/textAppearanceMedium" />
 <TextView
    android:id="@+id/textView1"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:layout_weight="1"
    android:textAppearance="?android:attr/textAppearanceMedium" />

 <TextView
    android:id="@+id/textView1"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:layout_weight="1"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
        android:id="@+id/textView1"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:layout_weight="1"
        android:textAppearance="?android:attr/textAppearanceMedium" />
 <TextView
        android:id="@+id/textView1"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:layout_weight="1"
        android:textAppearance="?android:attr/textAppearanceMedium" />
</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T08:58:52.707

试试这个...

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />

    </LinearLayout>

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />

</LinearLayout> 
```

# r - rmongo 和查询

> ID：12402184
> 
> 赞同：1
> 
> 时间：2012-09-13T08:22:47.383
> 
> 标签：r, mongodb, rmongo

我很难通过 rmongo 编写查询 ..

```
mongo <- mongoDbConnect(dbName="baba", host="inja.com",port='27017')
dbAuthenticate(mongo, 'alaki', 'dolaki')
dbShowCollections(mongo)
> Acol Bcol Ccol Dcol 
```

现在 ：

```
result = dbGetQuery(mongo, "settings", "{find_one()}",0,10)
> Error in .jcall(rmongo.object@javaMongo, "S", "dbGetQuery", collection,  : 
      com.mongodb.util.JSONParseException: 
    {find_one()} 
```

如果有人给我一些提示并帮助我从我的数据库中制作表格或 R 列表，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T11:12:32.120

查询参数`dbGetQuery()`应该是您要搜索的数据，而不是 find_one()。

dbGetQuery() 的结果将是一个[Data Frame](http://www.r-tutor.com/r-introduction/data-frame)。

示例用法：

```
# Find documents in "settings" collection (no query criteria); limit results to 10
result=dbGetQuery(mongo, "settings","{}",0,10)

# Find all documents that have a value of "blackbox" for the "widget" column
result=dbGetQuery(mongo, "settings","{'widget':'blackbox'}") 
```

# web-services - 网络服务超时

> ID：12402188
> 
> 赞同：2
> 
> 时间：2012-09-13T08:23:09.227
> 
> 标签：web-services, timeout

我有一个非常奇怪的 Web 服务超时案例。以下是我为防止超时而设置的内容。

```
<system.web>
<compilation debug="false" tempDirectory="C:\.....temp\" />
<httpRuntime executionTimeout="3600"  />
</system.web> 
```

在一种情况下，我的 Web 服务需要运行大约 10 分钟。我需要删除 tempDirectory 中的文件才能使其成功运行。例如，成功运行后，我保持服务空闲。一段时间后，IIS 检索资源并终止服务进程。然后我再次运行它，只是这次服务将失败并出现“请求超时”错误。但是删除 tempDirectory 中的文件后，它又可以正常运行了。似乎IIS重新启动服务后，配置不再起作用，需要触发重新编译服务才能使其工作。

我的 IIS 版本是 6。

# cuda - CUDA：是否可以将 48KB 的片上内存全部用作共享内存？

> ID：12402191
> 
> 赞同：4
> 
> 时间：2012-09-13T08:23:18.540
> 
> 标签：cuda, gpu, gpgpu, nvidia

我正在 Windows 7 64 位 SP1 上使用 CUDA Toolkit 4.0 和 Visual Studio 2010 Professional 为 GTX 580 开发 CUDA 应用程序。我的程序比典型的 CUDA 程序更占用内存，我试图为每个 CUDA 块分配尽可能多的共享内存。但是，每次我尝试为每个块使用超过 32K 的共享内存时，程序都会崩溃。

通过阅读 CUDA 官方文档，我了解到计算能力为 2.0 或更高的 CUDA 设备上的每个 SM 都有 48KB 的片上内存，并且片上内存分为 L1 缓存和共享内存：

> [L1 和共享内存都使用相同的片上内存，对于每个内核调用（第 F.4.1 节） http://developer.download.nvidia.com](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/Fermi_Tuning_Guide.pdf)，可以配置多少专用于 L1 与共享内存 [/compute/DevZone/docs/html/C/doc/Fermi_Tuning_Guide.pdf](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/Fermi_Tuning_Guide.pdf)

这让我怀疑当我的程序运行时，只有 32KB 的单芯片内存被分配为共享内存。因此我的问题是：是否可以将所有 48KB 的片上内存用作共享内存？

我尝试了我能想到的一切。我为 nvcc 指定了选项 --ptxas-options="-v -dlcm=cg"，并在我的程序中调用了 cudaDeviceSetCacheConfig() 和 cudaFuncSetCacheConfig()，但它们都没有解决问题。我什至确保没有寄存器溢出，并且我没有意外使用本地内存：

```
1>      24 bytes stack frame, 0 bytes spill stores, 0 bytes spill loads
1>  ptxas info    : Used 63 registers, 40000+0 bytes smem, 52 bytes cmem[0], 2540 bytes cmem[2], 8 bytes cmem[14], 72 bytes cmem[16] 
```

虽然我可以忍受 32KB 的共享内存，这已经给了我巨大的性能提升，但我宁愿充分利用所有快速的片上内存。任何帮助深表感谢。

*更新：*程序崩溃时我正在启动 640 个线程。512 给了我比 256 更好的性能，所以我尝试进一步增加线程数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T09:03:10.687

Your problem is not related to the shared memory configuration but with the number of threads you are launching.

Using 63 register per threads and launching 640 threads give you a total of 40320 registers. The total amount of register of your device is 32K, so you are running out of resources.

Regarding to the on-chip memory is well explained in the Tom's answer, and as he commented, check the API calls for errors will help you for future errors.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T08:48:37.807

计算能力 2.0 及更高版本的设备每个 SM 具有 64KB 的片上内存。这可配置为 16KB L1 和 48KB smem 或 48KB L1 和 16KB smem（在计算能力 3.x 上也是 32/32）。

您的程序由于另一个原因而崩溃。您是否在检查所有 API 调用是否有错误？你试过 cuda-memcheck 吗？

如果你使用了太多的共享内存，那么当你启动内核时你会得到一个错误，说资源不足。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-20T14:53:41.127

Also, passing parameters from the host to the GPU uses the shared memory (up to 256 bytes) so you will never get the actual 48KB.

# java - 如何找到丢失的罐子？

> ID：12402193
> 
> 赞同：0
> 
> 时间：2012-09-13T08:23:25.700
> 
> 标签：java, windows, build, jar

如果我有一个包含数百个`jar`文件的项目，例如我有一个`import`找不到的包，我将如何找到我`jar`应该包含哪些？
即我怎么知道这个包`a.b.c`定义在这个路径`X.jar`下`/filesystem/jars`有数百个`jars`？
是否有例如在罐子内搜索的工具？类似于 grep 的罐子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T08:27:33.237

只需用类名谷歌说“org.apache.struts.action.ActionMessages + jar”。

您将获得具有相应类的罐子。

您也可以在[http://www.jarfinder.com](http://www.jarfinder.com)中搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T08:40:03.000

您也可以尝试将 java 选项添加`-verbose:class`到您的启动选项中，这将产生如下转储：

```
[Loaded java.security.BasicPermissionCollection from shared objects file]
[Loaded sun.misc.JavaSecurityProtectionDomainAccess from C:\Program Files (x86)\Java\jdk1.6.0_32\jre\lib\rt.jar]
[Loaded java.security.ProtectionDomain$2 from C:\Program Files (x86)\Java\jdk1.6.0_32\jre\lib\rt.jar]
[Loaded java.security.ProtectionDomain$Key from C:\Program Files (x86)\Java\jdk1.6.0_32\jre\lib\rt.jar]
[Loaded java.security.Principal from shared objects file] 
```

另请参阅[what-is-shared-objects-fil](https://stackoverflow.com/questions/4393940/what-is-shared-objects-file)

我将eclipse与maven一起使用。在这种环境中，我可以简单地打开类并`View in Package Explorer`从上下文菜单中进行选择。之后，包资源管理器在 Maven 依赖项中显示 jar 的扩展结构。

# oracle - Oracle 如何处理数据库连接？

> ID：12402195
> 
> 赞同：1
> 
> 时间：2012-09-13T08:23:47.820
> 
> 标签：oracle, connection

Oracle 服务器如何处理数据库连接？具体来说

1.  它是否为与客户端的每个连接提供唯一 ID？
2.  它如何处理/关闭客户端不活动的连接？

问候， 萨钦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:51:19.990

这取决于。

1\. 假设您使用专用架构，每个会话都有一个会话 ID（V$SESSION 中的列 SID）
2\. 除非您在服务器的 sqlnet.ora 文件中设置 SQLNET.EXPIRE_TIME，否则 Oracle 不会处理死连接

丹尼尔

# php - 如何在mysql中存储PHP数组？

> ID：12402203
> 
> 赞同：-1
> 
> 时间：2012-09-13T08:24:24.317
> 
> 标签：php, mysql, arrays

如何将 php 数组存储在 mysql 中然后过滤它们？

例如：

```
$array = array("a"=>13,"b"=>15,"c"=>17);

$mysql_val = json_encode($array);

mysql_query("INSERT INTO bla (`myfield`) VALUES('".$mysql_val."')"); 
             ^- i store data in this way 
```

当我执行这个查询时，我该如何过滤、排序等呢？例如，如何选择 b 大于 10 的行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:27:39.073

首先，您错误地使用了数据库，这就是您无法过滤排序等的原因...

您应该为 each 有一列`a, b, c`，然后您可以使用`SELECT * FROM bla ORDER BY a DESC`或可能对您更好，拥有一个映射键 => 值的表。

通过将数据存储为**字符串**MySQL**无法**访问它，因此您无法对其进行排序。

如果您不知道键（字段）名称，则存储此数据的正确（标准化）方法如下所示：

```
bla
id | name
-- | ----
2  | james

blaDecorator or blaColumns
id | blaId | field | value
1  | 2     | a     | 13
2  | 2     | b     | 15
3  | 2     | c     | 17 
```

如果您**必须**像这样保留您的数据（我看不出为什么），那么您需要将其`SELECT * FROM bla`读入 PHP`Array`并使用 PHP 进行所有排序

这是学习数据库规范化的资源：[http ://www.phlonx.com/resources/nf3/](http://www.phlonx.com/resources/nf3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T08:29:02.847

这就是数据库规范化的原因，特别是第一范式，避免重复组。通过以原子方式存储数据（数据不能分解成更小的部分），您将能够对数据执行操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T08:27:21.243

不，JSON 数据对于 MySQL 来说只是一段文本，因此除了运行通常的文本函数之外它无法处理它。

您必须从数据库和文本中读取它们并在 PHP 级别转换为 JSON，然后在您的应用程序中进行排序或过滤。

如果这对您很重要，请考虑使用 NoSQL 数据库，其中许多是原生基于 JSON 的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T08:28:15.487

你没有。

这是一种在数据库中存储数据的糟糕方式。将数据存储为列，并将数据库用作数据库。

但是，如果必须，请使用 PostgeSQL。见：[http ://blog.redfin.com/devblog/2012/03/json_in_postgres.html](http://blog.redfin.com/devblog/2012/03/json_in_postgres.html)

最新版本的 PostgeSQL 具有查询 json 字符串中的数据并对其进行连接的功能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-13T08:31:03.523

如果您想将数据存储为 json，也许您应该考虑使用像[MongoDB这样的文档数据库。](http://www.mongodb.org/)有了它，您将能够在您的 json 数据中搜索、过滤等

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-17T00:22:21.213

虽然所有响应者都质疑数据库的使用。在实际使用案例中这是合适的。我正面临这样的问题，这是我的解决方案：

```
function prepareArrayToSave($array) {
    return (implode("", array_map("numberPad", $array)));
}

function numberPad($i) {
    return sprintf("%03d", $i);
} 
```

保存在字段中`Decimal(64)`。

限制是：

1.  数组中的每个值不能大于 999；
2.  任何数组的值不得超过 21 个。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-13T08:32:22.850

不要这样存储数据！制作 3 个字段并将数据存储在这些字段中。

例子：

```
$array = array("a"=>13,"b"=>15,"c"=>17);
$fields = array_keys($array);

mysql_query(
"INSERT INTO bla ( " . explode(',', $fields) . ") 
VALUES('" . explode(',' $array) . "')"); 
```

# buddypress - 覆盖buddypress中的特定用户头像

> ID：12402209
> 
> 赞同：0
> 
> 时间：2012-09-13T08:24:44.723
> 
> 标签：buddypress

有没有办法覆盖用户头像但不影响其他用户。我已经看到了一个代码，但它改变了所有默认头像。是否可以在 bp 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:17:20.280

您应该提供一个场景，说明您何时想要“覆盖”化身。

作为管理员，您可以进入任何个人资料并更改头像 - 但该个人资料的用户也可以。

# java - JAXB 对“通用”现实世界文档进行解组

> ID：12402215
> 
> 赞同：2
> 
> 时间：2012-09-13T08:25:03.333
> 
> 标签：java, jaxb, unmarshalling

我们有一大套风格的配置文件

```
<foo>
  <bar class="com.diedel.Gnarf">
    ...more content
  </bar>
  <bar class="de.doedel.Bork">
    ..more content
  </bar>
  ...
</foo> 
```

通用实现类都使用 Jaxb 本身进行映射。

在我最终恢复到 Xstream 之前，向社区提出一个问题：是否有（非 hack）方法可以在 Jaxb 中将其解组。到目前为止，我们尝试的是使用@XMLAdapter 进行“嵌套”解组，其中“bar”字段获取一个元素，获取目标类并调用另一个“解组”循环。这种方法a）非常慢，b）在切换到Java 7时被打破，其中一些神奇的ThreadLocal在从内部解组返回时破坏了上下文。

我发现 MOXy 可以使用 @XmlDiscriminatorNode 来支持这一点——这看起来是一个很好的解决方案，我真的很喜欢 Blaise 的非常好的输入——但是为了好玩而添加一个 >7MB 的库不是一种选择。

其他想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T09:00:59.473

您可以使用[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)和[**StAX (JSR-173)**](http://www.jcp.org/en/jsr/detail?id=173)执行以下操作：

**演示**

StAX`XMLStreamReader`可用于解析 XML 文档。您可以使用它前进到一个`bar`元素，然后您可以读取`class`属性并从`ClassLoader`. 然后，您可以利用其中一种`unmarshal`采用类参数的方法。

```
package forum12402215;

import javax.xml.bind.*;
import javax.xml.stream.*;
import javax.xml.transform.stream.StreamSource;

public class Demo {

    public static void main(String[] args) throws Exception {
        ClassLoader classLoader = Bork.class.getClassLoader();
        JAXBContext jc = JAXBContext.newInstance(Bork.class, Gnarf.class);
        Unmarshaller unmarshaller = jc.createUnmarshaller();

        StreamSource source = new StreamSource("src/forum12402215/input.xml");
        XMLInputFactory xif = XMLInputFactory.newFactory();
        XMLStreamReader xsr = xif.createXMLStreamReader(source);
        xsr.nextTag(); // Advance to "foo" element
        xsr.nextTag(); // Advance to "bar" element

        while(xsr.getLocalName().equals("bar")) {
             String className = xsr.getAttributeValue("", "class");
             Class<?> clazz = classLoader.loadClass(className);
             Object object = unmarshaller.unmarshal(xsr, clazz).getValue();
             System.out.println(object);
             xsr.nextTag();
        }
    }

} 
```

**博克**

下面是一个示例`Bork`类。

```
package forum12402215;

public class Bork {

    private String b;

    public String getB() {
        return b;
    }

    public void setB(String b) {
        this.b = b;
    }

    @Override
    public String toString() {
        return "Bork(b=" + b + ")";
    }

} 
```

**纳尔夫**

下面是一个示例`Gnarf`类：

```
package forum12402215;

public class Gnarf {

    private int a;

    public int getA() {
        return a;
    }

    public void setA(int a) {
        this.a = a;
    }

    @Override
    public String toString() {
        return "Gnarf(a=" + a + ")";
    }

} 
```

**输入.xml**

以下是我用于此示例的示例文档，基于您的问题。我更改了包名称。

```
<?xml version="1.0" encoding="UTF-8"?>
<foo>
    <bar class="forum12402215.Gnarf">
        <a>123</a>
    </bar>
    <bar class="forum12402215.Bork">
        <b>Hello World</b>
    </bar>
</foo> 
```

**输出**

下面是运行演示代码的输出。

```
Gnarf(a=123)
Bork(b=Hello World) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T08:55:53.847

如果结构真的那么简单，我会很想自己使用 an 解析前两个级别（foo 和 bar 的类属性）`XMLStreamReader`，然后将阅读器交给 JAXB 解组器来解析每个 bar，将结果组装成列表。我不会费心尝试直接使用 JAXB 解析外部信封层。

# php - 将变量从 Web 视图传递到 Xcode 并存储为 NSString

> ID：12402218
> 
> 赞同：0
> 
> 时间：2012-09-13T08:25:20.807
> 
> 标签：php, ios, xcode, webview, nsstring

我正在尝试从由 Web 视图填写的表单中传递一个变量，并将其作为 NSString 存储在 Xcode 中。我有一个将变量存储为 cookie 的注册页面。然后在另一个页面中，我试图将该 cookie 作为变量返回并将其返回给 Xcode。我想我已经很接近了，但我需要一些帮助。

**代码：**

```
NSString *strURL = [NSString stringWithFormat:@"http://www.website.com/get_id.php"];
NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURL]];

NSString *strResult = [[NSString alloc] initWithData:dataURL encoding:NSUTF8StringEncoding];

UIAlertView *alert = [[UIAlertView alloc] 
                       initWithTitle:@"Your ID" 
                       message:strResult 
                       delegate:self 
                       cancelButtonTitle:@"Dismiss" 
                       otherButtonTitles:nil, nil];
[alert show];
return; 
```

**PHP：**

```
<?php

$result = action($a, $b);
echo $result;

function action($a, $b){
    $your_email = $_COOKIE["your_email"];
    return $your_email;
}

?> 
```

非常感谢您的时间和帮助！

# wcf - WCF BasicHttpBinding 是否支持通用列表？

> ID：12402226
> 
> 赞同：1
> 
> 时间：2012-09-13T08:26:00.713
> 
> 标签：wcf, generic-list, basichttpbinding

我正在尝试向使用 BasicHttpBinding 的现有 WCF Web 服务项目添加新的服务方法。
我的新服务方法接受一个类作为参数，并且这个类有一个`List<T>`变量。添加此方法后，我的 Web 服务客户端无法添加服务引用。它收到 `(415) Unsupported Media Type.`错误消息。
这是否意味着 WCF BasicHttpBinding 不支持 List 类型？我应该改用数组类型吗？如果它支持列表，那么我应该在哪里查找错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:33:02.693

`List`支持。

**检查拼写错误的配置！**

例如， NetworkingService 而不是 NetworkingService[链接](http://allen-conway-dotnet.blogspot.com/2010/06/fixing-wcf-remote-server-returned-error.html)。

添加服务引用检查配置窗口时。可以选择如何考虑`List, Dictionary, Array`何时发送数据。选择为`List`。

不要尝试使用匿名泛型`List<T>`。WCF 无法为匿名类型创建 WSDL 信息。可能是`List<MyClass>`。

由于数据上限，也不建议使用。最大字节值是可配置的，但受到限制。更好的解决方案是实现新类

```
public class MyClassContainer
{
    public Guid Id;
    public List<MyClass> Items;
} 
```

然后按部分发送或接收对象（按 10、100 ......）。

# c++ - C++ `Timer` 类实现

> ID：12402233
> 
> 赞同：14
> 
> 时间：2012-09-13T08:26:22.330
> 
> 标签：c++, multithreading, algorithm, class, timer

我设计了一个类，它每n 秒`Timer`分派（使用观察者模式）一个事件。`n`当然，它会创建一个新线程，以免阻塞调用它的线程。

然后我想 - 嗯......假设有 100 个客户端连接到我的服务器程序，我为每个客户端创建 3 个计时器，所以我运行 300 个线程。不是很多吗？是不是`ok`，我运行 300 个线程？

然后我被[告知](https://stackoverflow.com/a/12354685/1574294)在 AS3 中`Timer`运行在主线程中。我想知道：怎么？？？如何实现在主线程中运行的计时器而不阻塞它？在 C++ 中可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T08:35:42.350

一个可能的解决方案是只为所有计时器使用一个线程，并有一个按超时排序的队列。这样做的问题是，当计时器到期并且您调用回调函数时，它将在全局计时器线程的上下文中运行，而不是单独运行。这当然可以通过为事件生成一个新线程来解决，即然后直接加入，或者通过线程池来处理事件，因此主计时器线程不会被“阻塞”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T08:35:31.740

您可以创建一个计时器线程，并为每个“注册”的客户端在树中创建一个条目。键是客户端超时，值是对客户端的引用。这将按超时对客户端进行排序。

然后对于计时器，设置一个循环计时器，例如每 100 毫秒（相应调整）。当计时器到期时，迭代树删除并调度每个超时的客户端。当您达到尚未超时的客户端超时时，迭代应该停止。

对这种方法更准确的改进是当计时器到期并且客户端被分派时，计算下一个客户端的超时并相应地设置计时器。这仅取决于解决方案需要有多准确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T08:37:10.827

现在这是一个设计问题，所以每个人都有不同的意见，这也取决于您的要求，但是 IMO，计时器不应该自己决定线程策略 - 客户端应该这样做。

我不确定您期望什么行为，但是如果您在同一线程上的计时器上运行 300 个事件，并且由于某种原因一个事件处理程序阻塞，则永远不会触发其他事件处理程序。

一种可能性是在线程上创建一个计时器，但以事件处理程序通过线程池在其他线程上执行的方式实现它。当然，仍然有可能破坏事物，因为如果您有许多长时间运行的处理程序，线程池可能会耗尽。

我强烈建议不要为每个处理程序使用显式的新线程，因为上下文切换可能会降低性能。线程池在平衡这一点方面要好得多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T08:41:14.487

就在主线程中实现定时器而言，必须有一些机制从用户代码中定期调用（例如，在事件轮询期间），它也处理定时器。当然，这种方法很可能是不准确的，因为它只能在主线程中的用户代码允许的情况下执行定时器。

当然，它还会在执行回调代码时阻塞主线程。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-13T09:49:51.163

您的第一个问题已经有足够的答案：处理计时器事件的线程池（一组说 5 或 10 个线程）是执行此操作的常用方法，并且在每个事件的一个线程和所有事件的一个线程之间进行了很好的折衷.

关于您的第二个问题：使用常规编程意味着您无法在主线程中执行计时器事件处理程序。如果可以的话，它会“阻塞”主线程，但如果没有在主线程中执行的代码的同意和支持，这是不可能的。

主线程会时不时停下来检查定时器是否有事件，以对象的形式从定时器中获取参数，然后处理事件。有很多方法可以设计这个原则，但这是你如何做到这一点的一般方法。

在 Unix 系统上，您可能还会考虑使用信号，但我认为这不是一个好主意。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-13T10:00:24.890

您的服务器可能为所有计时器运行一个计时器线程。`timer wheel`当客户端计时器注册到服务器计时器轮时，这会创建事件。当注册的定时器超时时，事件由定时器轮设置。客户端获取在注册计时器时创建的事件的句柄。客户端可以等待通知注册定时器超时的事件。这样线程创建取决于客户端。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-21T17:30:23.790

由于您使用 C++ 进行设计，因此您可以使用[Boost ASIO](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio.html)计时器。我还设计了一个基于它们的 Timer 类，它工作得很好，没有任何线程 - 它使用对操作系统的异步调用，所以基本上你只需要定义一个回调，它将在定时器到期时调用，然后调用定时器的**async_wait**函数，它是非阻塞的。当您声明您的计时器对象时，您只需向它传递一个**io_service**对象，该对象是 OS 的 ASIO 接口。该对象负责为您的异步请求和回调提供服务，因此您可以调用其阻塞方法**run**。在我的情况下，我不能让主线程阻塞，所以我只有一个线程，这个独特的调用被阻塞了。

在这里您可以找到有关如何使用 Boost ASIO 异步计时器的示例：

[http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/tutorial/tuttimer2.html](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/tutorial/tuttimer2.html)

我的**AbstractAsioTimer**类被设计为子类化，因此**onTimerTick**方法将特定于派生类结束。尽管您的需求可能会有所不同，但这可能是一个很好的起点：

**abstractasiotimer.hpp：**

```
#ifndef _ABSTRACTASIOTIMER_HPP_
#define _ABSTRACTASIOTIMER_HPP_

#include <boost/asio.hpp>

/**
 * Encapsulates a POSIX timer with microsecond resolution
 */
class AbstractAsioTimer
{
  public:
    /**
     * Instantiates timer with the desired period
     * @param io ASIO interface object to the SO
     * @param timeout time in microseconds for the timer handler to be executed
     */
    AbstractAsioTimer(boost::asio::io_service& io, unsigned int timeout);

    /**
     * Destructor
     */
    virtual ~AbstractAsioTimer();

    /**
     * Starts timer operation
     */
    void timerStart();

    /**
     * Stops timer operation
     */
    void timerStop();

    /**
     * Returns timer operation state
     */
    bool isRunning() const;

    /**
     * Returns a reference to the underlying io_service
     */
    boost::asio::io_service& get_io_service();

  protected:
    /**
     * Timer handler to execute user specific code
     * @note must be reimplemented in derived classes
     */
    virtual void onTimerTick() = 0;

  private:
    /**
     * Callback to be executed on timer expiration. It is responsible
     * for calling the 'onTimerTick' method and restart the timer if 
     * it remains active
     */
    void timerExpired(const boost::system::error_code& error);

    boost::asio::deadline_timer timer; /**< ASIO timer object */
    unsigned int timeout; /**< Timer period in microseconds */
    bool running; /**< Flag to indicate whether the timer is active */
};
#endif 
```

**abstractasiotimer.cpp：**

```
#include <iostream>
#include <boost/bind.hpp>
#include <boost/concept_check.hpp>
#include "abstractasiotimer.hpp"

using namespace boost::asio;

AbstractAsioTimer::AbstractAsioTimer(boost::asio::io_service& io, 
                                     unsigned int timeout):
                                     timer(io), timeout(timeout),
                                     running(false)
{

}

AbstractAsioTimer::~AbstractAsioTimer()
{
  running = false;
  timer.cancel();
}

void AbstractAsioTimer::timerExpired(const boost::system::error_code& error) {

  if (!error) {
    onTimerTick();
    //Restart timer
    timerStart();
  }
  else {
    running = false;
    std::cerr << "Timer stopped: " << error.message() << std::endl;
  }
}

void AbstractAsioTimer::timerStart()
{
  timer.expires_from_now(boost::posix_time::microseconds(timeout));
  timer.async_wait(boost::bind(&AbstractAsioTimer::timerExpired,
                   this, placeholders::error));
  running = true;
}

void AbstractAsioTimer::timerStop() {
  running = false;
  timer.cancel();
}

bool AbstractAsioTimer::isRunning() const {
  return running;
}

io_service& AbstractAsioTimer::get_io_service()
{
  return timer.get_io_service();
} 
```

# process - 为什么 erlang:spawn_opt 中使用的 'monitor' 选项被禁用？

> ID：12402234
> 
> 赞同：3
> 
> 时间：2012-09-13T08:26:28.863
> 
> 标签：process, erlang, monitor, spawn

我碰巧读到一个`spawn_opt`叫做`monitor`：[http ://www.erlang.org/doc/man/erlang.html#spawn_opt-2](http://www.erlang.org/doc/man/erlang.html#spawn_opt-2)

但是当我使用它时，我得到了这个：

```
1> gen_server:start(some_module, [], [{spawn_opt, [monitor]}]).
** exception error: bad argument
     in function  proc_lib:check_for_monitor/1 (proc_lib.erl, line 182)
     in call from proc_lib:spawn_opt/4 (proc_lib.erl, line 161)
     in call from proc_lib:start_link/5 (proc_lib.erl, line 317)
2> 
```

这就是 OTP 的 proc_lib.erl 中第 182 行周围发生的情况：

```
%% OTP-6345
%% monitor spawn_opt option is currently not possible to use
check_for_monitor(SpawnOpts) ->
    case lists:member(monitor, SpawnOpts) of
        true ->
            erlang:error(badarg);
        false ->
            false
    end. 
```

该`monitor`选项被故意禁用，但我不明白为什么。我搜索了一下`OTP-6345`，原来它来自发行说明，我也找不到足够的信息：[http ://www.erlang.org/download/otp_src_R11B-3.readme](http://www.erlang.org/download/otp_src_R11B-3.readme)

我们一直手动执行 spawn-then-monitor 步骤，没有任何问题，但为什么 OTP 代码选择完全忽略该`monitor`选项？是否存在潜在的竞争条件或任何其他陷阱？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:57:44.397

该修复与[这封电子邮件](http://erlang.2086793.n4.nabble.com/erlang-bugs-gen-server-and-spawn-opt-monitor-td2120447.html)有关，proc_lib 的功能似乎有一些重叠，并且监视哪个搞砸了。

# c# - GROUP BY 子句中的错误。无法解析查询文本

> ID：12402237
> 
> 赞同：1
> 
> 时间：2012-09-13T08:26:30.723
> 
> 标签：c#, mysql

我有一个复杂的 SQL 语句，我遇到了一个错误。他们提示我这个错误： GROUP BY 表达式中的错误。无法解析查询文本。

我粘贴了导致此错误的此 SQL 语句。谁能告诉我哪里出了问题？有任何想法吗？？？

```
SELECT        AllocationDate, LocationName, StationName, Hour1, Hour2, Hour3, Hour4, Hour5, Hour6, Hour7, Hour8, Hour9, Hour10, Hour11, Hour12, EmpName, ShiftTime, 
                     BreakTime, SignIn, SignOut
FROM            (SELECT        z.AllocationDate, z.LocationName, z.StationName, a.Hour1, b.Hour2, c.Hour3, d .Hour4, e.Hour5, f.Hour6, g.Hour7, h.Hour8, i.Hour9, j.Hour10, k.Hour11, 
                                                l.Hour12, m.EmpName, m.ShiftTime, m.BreakTime, m.SignIn, m.SignOut
                      FROM            (SELECT DISTINCT AllocationDate, LocationName, StationName
                                                FROM            satsschema.viewmain
                                                WHERE        (StationName IS NOT NULL)) z LEFT OUTER JOIN
                                                    (SELECT DISTINCT AllocationDate, LocationName, StationName, Hour1
                                                      FROM            satsschema.view00000100) a ON z.LocationName = a.LocationName AND z.StationName = a.StationName AND 
                                                z.AllocationDate = a.AllocationDate LEFT OUTER JOIN
                                                    (SELECT DISTINCT AllocationDate, LocationName, StationName, Hour2
                                                      FROM            satsschema.view01000200) b ON z.LocationName = b.LocationName AND z.StationName = b.StationName AND 
                                                z.AllocationDate = b.AllocationDate LEFT OUTER JOIN
                                                    (SELECT DISTINCT AllocationDate, LocationName, StationName, Hour3
                                                      FROM            satsschema.view02000300) c ON z.LocationName = c.LocationName AND z.StationName = c.StationName AND 
                                                z.AllocationDate = c.AllocationDate LEFT OUTER JOIN
                                                    (SELECT DISTINCT AllocationDate, LocationName, StationName, Hour4
                                                      FROM            satsschema.view03000400) d ON z.LocationName = d .LocationName AND z.StationName = d .StationName AND 
                                                z.AllocationDate = d .AllocationDate LEFT OUTER JOIN
                                                    (SELECT DISTINCT AllocationDate, LocationName, StationName, Hour5
                                                      FROM            satsschema.view04000500) e ON z.LocationName = e.LocationName AND z.StationName = e.StationName AND 
                                                z.AllocationDate = e.AllocationDate LEFT OUTER JOIN
                                                    (SELECT DISTINCT AllocationDate, LocationName, StationName, Hour6
                                                      FROM            satsschema.view05000600) f ON z.LocationName = f.LocationName AND z.StationName = f.StationName AND 
                                                z.AllocationDate = f.AllocationDate LEFT OUTER JOIN
                                                    (SELECT DISTINCT AllocationDate, LocationName, StationName, Hour7
                                                      FROM            satsschema.view06000700) g ON z.LocationName = g.LocationName AND z.StationName = g.StationName AND 
                                                z.AllocationDate = g.AllocationDate LEFT OUTER JOIN
                                                    (SELECT DISTINCT AllocationDate, LocationName, StationName, Hour8
                                                      FROM            satsschema.view07000800) h ON z.LocationName = h.LocationName AND z.StationName = h.StationName AND 
                                                z.AllocationDate = h.AllocationDate LEFT OUTER JOIN
                                                    (SELECT DISTINCT AllocationDate, LocationName, StationName, Hour9
                                                      FROM            satsschema.view08000900) i ON z.LocationName = i.LocationName AND z.StationName = i.StationName AND 
                                                z.AllocationDate = i.AllocationDate LEFT OUTER JOIN
                                                    (SELECT DISTINCT AllocationDate, LocationName, StationName, Hour10
                                                      FROM            satsschema.view09001000) j ON z.LocationName = j.LocationName AND z.StationName = j.StationName AND 
                                                z.AllocationDate = j.AllocationDate LEFT OUTER JOIN
                                                    (SELECT DISTINCT AllocationDate, LocationName, StationName, Hour11
                                                      FROM            satsschema.view10001100) k ON z.LocationName = k.LocationName AND z.StationName = k.StationName AND 
                                                z.AllocationDate = k.AllocationDate LEFT OUTER JOIN
                                                    (SELECT DISTINCT AllocationDate, LocationName, StationName, Hour12
                                                      FROM            satsschema.view11001200) l ON z.LocationName = l.LocationName AND z.StationName = l.StationName AND 
                                                z.AllocationDate = l.AllocationDate LEFT OUTER JOIN
                                                    (SELECT        a.EmpName, CONCAT(b.StartTime, ' - ', b.EndTime) AS ShiftTime, CONCAT(a.EmpTime, ' - ', ADDTIME(a.EmpTime, '0 1:0:0.000000')) 
                                                                                AS BreakTime, a.Break, a.EmployeeOnBreak, '' AS SignIn, '' AS SignOut
                                                      FROM            satsschema.employeeslot a, satsschema.ufis b
                                                      WHERE        a.UFISEmpGroup = b.UFISID 
                                                     GROUP BY EmpName) m) Morning
WHERE        (AllocationDate = @AllocationDate) AND (LocationName = @LocationName) AND (StationName <> '') AND (Break = 1)
GROUP BY StationName, LocationName, AllocationDate 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:51:40.697

如果您想这样做，只能在外部查询中选择聚合函数或分组列。您可以在分组依据中使用该列。

`... GROUP BY AllocationDate, LocationName, StationName, Hour1, Hour2, Hour3, Hour4, Hour5, Hour6, Hour7, Hour8, Hour9, Hour10, Hour11, Hour12, EmpName, ShiftTime, BreakTime, SignIn, SignOut`

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:39:22.147

我认为你混合了很多概念。如果没有 Min、Max、Avg 等聚合函数，您将无法使用 group by。

如果要使用 Group By，则必须说明如何处理这些非聚合字段：

Hour1, Hour2, Hour3, Hour4, Hour5, Hour6, Hour7, Hour8, Hour9, Hour10, Hour11, Hour12, EmpName, ShiftTime, BreakTime, SignIn, SignOut

我认为您想要的是 ORDER BY 而不是 GROUP BY。

# python - python pyparsing 字符串：A,b,b,b,A,b,b,b*

> ID：12402239
> 
> 赞同：1
> 
> 时间：2012-09-13T08:26:38.943
> 
> 标签：python, python-2.7, pyparsing

我有一个疯狂的问题。

我正在尝试使用 pyparsing 来解析这样的内容：（点是不重要的抑制文本）

```
...... A
B .......
B .......
...... A
B .......
B ....... 
```

我需要的是这样的：（将 A 和 B 元素连接到一个列表中）

```
 [ [ [A],[B,B] ], [ [A],[B,B] ] , ...] 
```

这是我的代码，它不起作用，只返回第一个 [A]

```
table = pyparsing.OneOrMore(pyparsing.Group(A + (pyparsing.OneOrMore(pyparsing.Group(B) | pyparsing.SkipTo(B).suppress()))) | pyparsing.SkipTo(A).suppress()) 
```

我已经解决了这个 pyparsing 成这样的列表：

```
[ [A],[B],[B], [A],[B],[B] , ...] 
```

但这是不可接受的，因为 A 和 B 元素没有直接连接在一个列表中。

值得一提的是

```
table1 = pyparsing.ZeroOrMore(pyparsing.Group(A) | pyparsing.SkipTo(A).suppress())
table2 = pyparsing.ZeroOrMore(pyparsing.Group(B) | pyparsing.SkipTo(B).suppress()) 
```

工作并返回所有 A 元素和 B 元素的列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:08:25.163

是的，您可以将 OneOrMore 嵌入到其他 OneOrMore 中 - 如果您不能编写，它将严重限制您可以编写的解析器。

如果您进行更好的分组，我认为您可能能够调整现有的解决方案。查看此玩具示例中如何定义组：

```
test = """
...... A 
B ....... 
B ....... 
...... A 
B ....... 
B ......."""

from pyparsing import Literal, Word, printables, Group, OneOrMore

A = Literal("A")
B = Literal("B")

notAorB = Word(printables, excludeChars="AB")

parser = OneOrMore(Group(A + Group(OneOrMore(B))))
parser.ignore(notAorB)

print parser.parseString(test).asList() 
```

印刷：

```
[['A', ['B', 'B']], ['A', ['B', 'B']]] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-13T08:34:35.220

我认为你有两个选择：

*   重新思考解析文本的方式
*   对你所拥有的东西保持满意，然后把东西清理干净：你有一个类似的清单`your_list=[A,B,B,A,B,B]`吗？你可以做

    ```
    [ [x[i], x[i+1] + x[i+2]] for i in range(len(your_list)//3)] 
    ```

    将`+`连接您的两个`[B]`列表（表示为`x[i+1]`和`x[i+2]`）。

# php - 无法通过代理获取 php curl 的 html 源代码（仅返回标头）

> ID：12402243
> 
> 赞同：0
> 
> 时间：2012-09-13T08:27:03.707
> 
> 标签：php, curl, proxy

我知道以前在这里问过类似的问题，但是在搜索了该站点之后，似乎没有找到解决方案。

我正在使用以下选项通过代理 curl yahoo.com 或任何网站（我尝试过一些）。连接似乎很好，因为它正在返回标头。问题是它只返回标题。我希望能够检索的是源 html。

```
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HEADER, $header);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_PROXY, $proxy);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
curl_setopt($ch, CURLOPT_REFERER, $referer);
curl_setopt($ch, CURLOPT_USERAGENT, $agent);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
curl_setopt($ch, CURLOPT_PROXYUSERPWD, "myusername:mypassword"); 
```

[编辑 1] 我正在使用 curl_exec 获取数据：

```
 $content=curl_exec($ch);
 echo $content; 
```

[编辑 2] 用户代理如下：

```
Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1 
```

[编辑 3] 这是我调用 curl_getinfo 时返回的内容：

```
Array ( [url] => http://www.yahoo.com/ 
        [content_type] => [http_code] => 0 
        [header_size] => 0
        [request_size] => 0        
        [filetime] => 0 
        [ssl_verify_result] => 0 
        [redirect_count] => 0 
        [total_time] => 0 
        [namelookup_time] => 0
        [connect_time] => 0 
        [pretransfer_time] => 0 
        [size_upload] => 0
        [size_download] => 0
        [speed_download] => 0 
        [speed_upload] => 0 
        [download_content_length] => -1 
        [upload_content_length] => -1 
        [starttransfer_time] => 0 
        [redirect_time] => 0 
        [certinfo] => Array ( ) 
          [primary_ip] => 
          [primary_port] => 0
          [local_ip] => 
          [local_port] => 0 
          [redirect_url] => ) 
```

可能是我在代理上的访问设置/网络拦截器吗？

有任何想法吗？谢谢

# django - Debug = True 后 Django 不显示堆栈跟踪

> ID：12402244
> 
> 赞同：1
> 
> 时间：2012-09-13T08:27:08.927
> 
> 标签：django, nginx, fastcgi

我正在运行 Django，使用 nginx+fcgi 进行生产。我在 settings.py 中更改了 DEBUG = True （我的站点上没有用户，我只想查看堆栈跟踪以了解在生产中随机出现的错误）。

我已经搞定了：

```
$ ./manage.py shell
[[Python]]
import settings
print settings.DEBUG
>>> True 
```

然而，我不断得到 404 页。

# c# - 在 C# 中排序不保存位置

> ID：12402247
> 
> 赞同：0
> 
> 时间：2012-09-13T08:27:19.517
> 
> 标签：c#, sorting

我有一个名为 move 的类它有一个名为 val 的 int 类型的字段我有一个名为 mlist 的移动列表

我写了这个

```
mlist.Sort((b, a) =>
    {
       if (a.val > b.val)
           return 1;
       else if (a.val == b.val)
           return 0;
       else
           return -1;
    }
    ); 
```

起初，我的列表有两个对象，当我对列表进行排序时，这两个对象都具有 .val = 0，这两个对象的位置发生了变化。但我不希望这种情况发生。我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:31:38.567

[排序](http://msdn.microsoft.com/en-us/library/w56d4y5z.aspx)执行快速排序，这是一种不稳定的排序。

如果你想要一个稳定的排序，你可以使用[`OrderBy`](http://msdn.microsoft.com/en-us/library/bb549422.aspx)LinQ 提供的方法

在您的示例中使用`OrderBy`将假设这`mList`是一个`List<>`

```
mList = mList.OrderBy(a => a.val).ToList(); 
```

如果您希望反向排序，则调用该方法`OrderByDescending`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T08:32:18.577

正如@Hans Kesting 所说，排序是不稳定的。在此处阅读有关稳定排序的信息[http://www.csharp411.com/c-stable-sort/](http://www.csharp411.com/c-stable-sort/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T08:41:49.957

您应该使用 orderBy：

```
 MyComparer comparer=new MyComparer();
   mlist=  mlist.OrderBy(p => p, comparer).ToList();

  public class Comparer : IComparer<YourObject>
    {

        public int Compare(YourObject a, YourObject b)
        {

            if (a.val > b.val)
                return 1;
            else if (a.val == b.val)
                return 0;
            else
                return -1;

        }
    } 
```

# emacs - 如何用一些背景颜色标记emacs中的当前行？

> ID：12402248
> 
> 赞同：3
> 
> 时间：2012-09-13T08:27:19.153
> 
> 标签：emacs, bookmarks

有没有一种简单的方法可以用一些背景颜色绘制当前行？就像它`hl-lock-line-face-buffer`与regesp一样，但只有点所在的行。

**编辑**：它不像HIGHLIGHT-CURRENT-LINE，因为我需要标记一条线，然后是另一条线，然后将点移动到任何地方而不影响该亮点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T00:23:05.550

[可见书签 (bm)](http://marmalade-repo.org/packages/bm)包将满足您的需求。我只在列中设置`bm-highlight-style`了`bm-highlight-only-fringe`一个标记，但如果你想要整行着色，则将其设置为`bm-highlight-only-line`：

```
(setq bm-highlight-style 'bm-highlight-only-line)

(global-set-key (kbd "<C-f2>") 'bm-toggle)
(global-set-key (kbd "<f2>") 'bm-next)
(global-set-key (kbd "<S-f2>") 'bm-previous) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-26T06:17:01.927

[Bookmark+](http://www.emacswiki.org/BookmarkPlus)可以满足您的要求。使用[`C-x p RET`](http://www.emacswiki.org/cgi-bin/wiki/BookmarkPlus#toc55)（默认情况下）在点设置书签。您可以为此类书签配置所需的[突出显示类型。](http://www.emacswiki.org/cgi-bin/wiki/BookmarkPlus#toc60)这类似于`bm.el`提供的（本的回答），但更灵活

# java - UML、C++、Java 中的符号

> ID：12402249
> 
> 赞同：2
> 
> 时间：2012-09-13T08:27:20.323
> 
> 标签：java, c++, uml, public, protected

在 Java 中，我们有一些修饰符：`protected`, `public`, `private`. 在 UML 中，它们分别是`#`、`+`、`-`。

我的问题是，这个`~`符号在 UML 中是什么意思？它在Java、C++中有什么意义吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T08:30:25.503

表示`package visibility`, 相当于 Java 中的默认访问。C++ 中没有类似物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T10:57:37.647

可见性类型的 UML 含义在 UML 上层结构文档中 VisibilityKind 类的描述中给出（当前 v2.4.1 文档中的第 7.3.56 节可在[http://www.omg.org/spec/UML/2.4 .1](http://www.omg.org/spec/UML/2.4.1) )。

包访问`~`是

> 包元素由不是包的名称空间拥有，并且对于与其拥有的名称空间位于同一包中的元素可见。只有不属于包的命名元素才能标记为具有包可见性。任何标记为具有包可见性的元素对最近的封闭包中的所有元素都是可见的（假设其他拥有元素具有适当的可见性）。在最近的封闭包之外，标记为具有包可见性的元素不可见。

这与 Java 中的默认包访问相同（正如 Alexander 所说），但请注意，UML 受保护的访问`#`不**一样**，因为在 Java 中，受保护的**包**和子类都可以访问（参见，例如，[这个问题](https://stackoverflow.com/questions/902922)）。UML 定义是

> 受保护元素对与拥有它的命名空间有泛化关系的元素可见。

关键原则是 UML 概念是独立于语言的，尽管很明显它们被设计为与实际编程语言中的思想相关。

# c# - 序列不包含元素 - 堆栈跟踪中没有信息

> ID：12402262
> 
> 赞同：2
> 
> 时间：2012-09-13T08:27:45.300
> 
> 标签：c#, asp.net-mvc-3, linq, debugging, asp.net-mvc-3-areas

在我的（现阶段）简单的 c#MVC3 (Razor) 应用程序中出现错误，我似乎无法找出导致以下错误的原因。

```
[InvalidOperationException: Sequence contains no elements]
   System.Linq.Enumerable.Last(IEnumerable`1 source) +4188046
   RouteDebug.RouteDebuggerHttpModule.OnBeginRequest(Object sender, EventArgs e) +78
   System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +148
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +75 
```

这就是我得到的全部，没有行号，什么都没有。

我已经尝试在代码中的不同位置放置断点，包括 Global.asax.cs 的 application_start 部分，但这些从未被命中，只要我开始调试，程序就会立即用堆栈跟踪轰炸。

应用程序的结构如下：

```
[Application.Core]
+Properties
+Reference
+Controllers
+Helpers
+Models
+AdminAreaRegistration.cs
+Global.asax.cs
[Application.Tests]
[Application.UI]
+Properties
+References
+App_Data
+Areas
    +Admin
        +Views
+Assets (css/js/images)
+Views 
```

我已经尝试了一些建议，包括将 Application.Core 命名空间添加到 AdminAreaRegistration.cs 文件，以及删除 obj/bin 并重建。

我只是看不出是什么导致了问题。

**更新**

AdminAreaRegistration.cs

```
using System.Web.Mvc;

namespace Application.Core
{
    public class AdminAreaRegistration : AreaRegistration
    {
        public override string AreaName
        {
            get
            {
                return "Admin";
            }
        }

        public override void RegisterArea(AreaRegistrationContext context)
        {
            context.MapRoute(
                "Admin_default",
                "Admin/{controller}/{action}/{id}",
                new {controller = "Page", action = "Index", id = UrlParameter.Optional }
            );
        }
    }
} 
```

全球.asax.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.Web.Routing;

namespace Application.Core
{
    // Note: For instructions on enabling IIS6 or IIS7 classic mode, 
    // visit http://go.microsoft.com/?LinkId=9394801

    public class MvcApplication : System.Web.HttpApplication
    {
        public static void RegisterGlobalFilters(GlobalFilterCollection filters)
        {
            filters.Add(new HandleErrorAttribute());
        }

        public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Page", action = "Homepage", id = UrlParameter.Optional } // Parameter defaults
            );

        }

        protected void Application_Start()
        {
            AreaRegistration.RegisterAllAreas();

            RegisterGlobalFilters(GlobalFilters.Filters);
            RegisterRoutes(RouteTable.Routes);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:39:12.263

瞥一眼[`RouteDebugger`](http://nuget.org/packages/routedebugger)反射器，有问题的代码是：

```
private static void OnBeginRequest(object sender, EventArgs e)
{
    if (RouteTable.Routes.Last<RouteBase>() != DebugRoute.Singleton)
    {
        RouteTable.Routes.Add(DebugRoute.Singleton);
    }
} 
```

所以：听起来好像你没有路线。但是，我也想知道这个模块是否应该实际使用`LastOrDefault`，或者基本上更好地应对这种情况。

您是否确保您拥有最新版本的`RouteDebugger`?

至于*为什么*你没有路线：也许管道现在以不同的顺序运行？要做的第一件事：删除该模块，看看*其他一切*是否正常。如果该站点在减去该模块后运行良好，请询问 Phil。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:32:39.857

这导致我`Last()`在没有元素的集合上调用扩展方法，或者`Last(expression)`在没有匹配元素的集合上调用。

我会通过我的代码进行搜索，以尝试确定您在哪里使用过这种调用。（只需在整个解决方案中进行搜索）

我最好的猜测是您已将此逻辑直接放入您的一个视图中，而不是控制器中。

# cdn - 如何创建自己的 CDN？它只是创建一个子域吗？

> ID：12402268
> 
> 赞同：40
> 
> 时间：2012-09-13T08:27:53.990
> 
> 标签：cdn

我想知道是否可以仅通过 plesk 在我的服务器上创建自己的 CDN？
我的意思是创建一个额外的子域`cdn.mywebsite.com`就足够了吗？
我应该为我创建的每个网站创建一个 cdn 子域，还是应该创建一个带有服务器空间的子域并上传所有图像？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-05T16:46:03.383

内容分发网络 (CDN) 的要点是将内容尽可能靠近最终用户，从而减少[往返时间](http://en.wikipedia.org/wiki/Round-trip_delay_time)(RTT) 的距离部分并加快请求速度。简单地从子域提供静态内容与使用 CDN 并不完全相同。

然而，从这样的子域提供内容的*优点是*

1.  子域可以是无 cookie 域

    如果您正确使用 cookie（即没有任何`*.mydomain.com`cookie），您可以显着减小 HTTP 请求的大小（即发送的数据包数），如果您使用 cookie，这将显着节省带宽并加快请求速度主要网站上。

2.  该页面可以受益于浏览器发出的更多同时请求

    大多数浏览器会同时请求页面资源，如图像、字体、CSS 等。问题是大多数浏览器只允许对特定域的有限数量的打开请求（我认为大约 5 个）。通过将资产分布在多个子域中，您可以“欺骗”浏览器，并允许更多并行请求，因为限制适用于每个子域。

所以，是的，您可以通过创建一个子域来进行设置，但您还必须确保您使用的 cookie 也不会发送到对该子域的请求。

# database - 实体关系

> ID：12402272
> 
> 赞同：0
> 
> 时间：2012-09-13T08:28:02.357
> 
> 标签：database, entity-relationship

我在设置两种表之间的关系时遇到了一些问题。我有一个名为 Patient 的表（其中包含有关患者 ID、地址、姓名等的一些数据）和另一个名为 Visits 的表（其中包含 ID“此键是增量变量，我不会将其插入到插入中qstmt", 访问日期, NextVisitDate, ..etc)

现在每位患者可能有不止一次不同日期的就诊，并且对于每个日期，我们可能有多个患者，例如：日期：09-13-2012 可能包括许多患者患者：就诊日期：09-13-2012, 09 -09-2012, 07-03-2012

我应该把外键放在哪里..

*注意：虽然每次访问都有一个 ID 变量，并且它是一个增量变量。但实际上，当我在我的程序中搜索时，我按日期搜索，所以，如果我错了，请纠正我，我是否可以将字段日期设置为“它的类型肯定是日期，或者它应该是一个复合键，或者我可以” t 将日期视为关键，因为它不是唯一的，因为许多患者可能具有相同的访问日期”*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:43:03.767

对我来说，这看起来像是一个普通的一对多外键关系。该表对参与就诊的患者`Visits`有一个外键，它只是表中的一个属性，而不是主键的一部分。它也没有唯一的索引，因为在给定的一天可能有很多次访问，即使是同一位患者也可能在同一天进行两次访问。如果你想禁止这个，那么你可以在和上创建一个复合唯一键索引。`PatientId``VisitDate``Visits``PatientId``VisitDate`

`Visits`然后，您可以按特定或日期范围在表上创建 SQL 查询，`VisitDate`并获取该日期的所有访问。使用`PatientId`访问的外键，您可以加入`Patients`表并获取有关访问患者的数据。

# javascript - 将数字四舍五入到小数点后两位以进行货币格式设置

> ID：12402273
> 
> 赞同：13
> 
> 时间：2012-09-13T08:28:02.527
> 
> 标签：javascript, currency, rounding

我需要将货币四舍五入到小数点后两位。

两个都

```
Math.round(num*Math.pow(10,2))/Math.pow(10,2) 
```

和

```
Math.round(num*Math.pow(10,2))/Math.pow(10,2) 
```

工作，除了它会切断任何尾随零，所以我得到`29.9`而不是`29.90`.

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-13T08:30:54.053

您可以将此添加到要设置特定格式的数字

```
.toFixed(2) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-13T08:31:24.767

```
(Math.round(num*Math.pow(10,2))/Math.pow(10,2)).toFixed(2) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-14T08:34:28.053

我在用这个，好像没问题

```
Math.round(x * 100)/100 
```

它看起来最短

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-30T14:51:21.140

将其视为总美分是有道理的。19.999 = 1999.9 美分，小数点后第 3 位无所谓，反正你也付不起。

这是有道理的：

```
function convertToMoney(val){
    return (Math.floor(val*100).toFixed(0)/100).toFixed(2);
} 
```

# java - 正则表达式如何替换img标签中的src链接

> ID：12402277
> 
> 赞同：1
> 
> 时间：2012-09-13T08:28:05.613
> 
> 标签：java, regex

我尝试了很多方法来做到这一点。而且我对正则表达式完全陌生。我想将所有 img src 链接替换为其他链接。

我的html文件是这样的：

```
<img src="01"></img><img src="02"></img><img src="03"></img> 
```

或者是这样的：

```
<  img src  =  "01"></img><    img src="02"><    img src = "03"></img> 
```

可能有空格或只是没有“ `</img>`”

我希望他们像这样：

```
<div><p><DIV class="a"><img src="01"></img></p></div><div><p><DIV class="a"><img src="02"></img></p></div><div><p><DIV class="a"><img src="03"></img></p></div> 
```

我用它来获取 img src 链接：

```
 Pattern p = null;
            Matcher m = null;
            p = Pattern.compile("<img[^>]*src\\s*=\\s*\"([^\"]*)");
            m = p.matcher(mystr);
            while (m.find()) {
                imgIDList.add(m.group(1));
            } 
```

我制作了要替换的 str 列表： ArrayList imgList4Replace = new ArrayList();

我用这个来原谅替换：

```
 mystr.replace(("<img[^>]*src\\s*=\\s*\""+imgListReplaceOriginal.get(nIndex)+"([^\"]*)"), imgList4Replace.get(nIndex)+"$2"); 
```

它只是行不通。我花了很多时间来测试。

并且需要你的帮助。非常感谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T08:28:53.837

您不能可靠地将正则表达式与 HTML/XML 一起使用。您需要一个 HTML 解析器，例如名称混乱的[JTidy](http://jtidy.sourceforge.net/)（虽然它声称是 HTML 漂亮打印机，但它也为您提供了文档的 DOM 视图）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T09:29:47.887

这是代码：

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class ImgTest {
    public static void main(String[] args) {

            String s = "This is a sample<img src=\"test.html\" /> text";
            Pattern p = Pattern.compile("[<](/)?img[^>]*[>]");
            Matcher m = p.matcher(s);
            if (m.find()) {
              String src = m.group();
              System.out.println(src);
            }
            s = s.replaceAll("[<](/)?img[^>]*[>]", "");
            System.out.println(s);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T09:51:24.923

这个给你：

```
private static String replaceSrcs(String str, List<String> srcs) {
    Pattern p = Pattern.compile("(<\\s*img\\s*src\\s*=\\s*\").*?(\"\\s*>)");
    Matcher m = p.matcher(str);
    StringBuffer sb = new StringBuffer();
    int i = 0;
    while (m.find()) {
        m.appendReplacement(sb, "$1" + srcs.get(i++) + "$2");
    }
    m.appendTail(sb);
    return sb.toString();
} 
```

现在你只需要调用它：

```
replaceSrcs(mystr, imgList4Replace); 
```

它会返回您喜欢的内容。

# python - Dajax/Dajaxice Js 调用返回“Cannot read property 'whatever' of undefined”

> ID：12402279
> 
> 赞同：1
> 
> 时间：2012-09-13T08:28:10.657
> 
> 标签：python, ajax, django, dajaxice, dajax

我安装并按照所有[程序](http://django-dajax.readthedocs.org/en/latest/installation.html#)在 Django 中使用 Dajax 和 Dajaxice 设置了一个基本示例。
正确包含 js 源并且存在 Dajax 和 Dajaxice 对象（我可以在浏览器控制台中进行测试）。我环顾四周，但似乎找不到解决方案：当我像这样从 js 触发函数时：

```
<button onclick="Dajaxice.projectName.appName(Dajax.process);">Click here!</button> 
```

或者

```
<button onclick="Dajaxice.appName(Dajax.process);">Click here!</button> 
```

我总是回到浏览器 js 控制台：

```
Uncaught TypeError: Cannot read property 'projectName' of undefined 
```

或者

```
Uncaught TypeError: Cannot read property 'appname' of undefined 
```

一切都在 ajax.py 和 urls.py 中设置。该文档对我的问题没有多大帮助。

# javascript - Resharper 可以在我的 javascript 函数声明中添加分号吗？

> ID：12402282
> 
> 赞同：-1
> 
> 时间：2012-09-13T08:28:15.127
> 
> 标签：javascript, resharper, automatic-semicolon-insertion

使用 Visual Studio 2012、Resharper 7.0.1

如果我正在编辑 JavaScript，并输入以下内容（| = 光标位置）：

```
this.myFunction = function() {| 
```

.. Resharper 将为我添加右括号：

```
this.myFunction = function() {|} 
```

...但我希望它之后也添加一个分号：

```
this.myFunction = function() {|}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T09:50:07.920

简而言之-不，至少在当前版本中不能。C# 和 VB 也有类似的功能，它被称为`Complete Statement`(Ctrl-Shift-Enter)，但很少有人使用它，因此为 JavaScript 添加它是低优先级的。

# sql - 自定义而不是更新触发器

> ID：12402283
> 
> 赞同：0
> 
> 时间：2012-09-13T08:28:25.010
> 
> 标签：sql, sql-server, sql-server-2008, triggers

嗨，我有以下触发器：

```
 ALTER TRIGGER [dbo].[BOOKVERNR_UPDATE]
ON [dbo].[BUCHUNG]
INSTEAD OF UPDATE
AS

BEGIN
SET NOCOUNT ON;

        INSERT INTO [BUCHUNG] (BOOKUID, BOOKVERNR, BUCHUNGSART_ID, VERANSTALTER, PERSONAL_ID,
        OPTIONSNUMMER, BUCHUNGSSTATUS, PERSONENZAHL, SERIE, THEMA, STORNO, UPDATE_DATE, UPDATE_USER, BEMERKUNG, V_EMAIL, V_TELEFON,
        KOSTENSTELLE, SERIENBOOKUID, THEMA_ENABLED, ABTEILUNG, LIEFERRAUM, PERSONENZAHLEXTERN, ABRECHNUNG, KSTR, RECHKONTO, RECHKST, RECHDST, URSPRUNG_ORIGINAL, ORIGINAL_ID)

        SELECT i.BOOKUID, '0', i.BUCHUNGSART_ID, i.VERANSTALTER, i.PERSONAL_ID,
        i.OPTIONSNUMMER, i.BUCHUNGSSTATUS, i.PERSONENZAHL, i.SERIE, i.THEMA, i.STORNO, GETDATE(), i.UPDATE_USER, i.BEMERKUNG, i.V_EMAIL, i.V_TELEFON,
        i.KOSTENSTELLE, i.SERIENBOOKUID, i.THEMA_ENABLED, i.ABTEILUNG, i.LIEFERRAUM, i.PERSONENZAHLEXTERN, i.ABRECHNUNG, i.KSTR, i.RECHKONTO, i.RECHKST, i.RECHDST, i.URSPRUNG_ORIGINAL,
        i.ORIGINAL_ID

        FROM INSERTED i
        JOIN DELETED d ON i.ID = d.ID
        WHERE i.BOOKVERNR <> d.BOOKVERNR

SET NOCOUNT OFF;
END 
```

如果“BOOKVERNR”发生更新，则触发器会复制具有新 ID 的整行。只有在“BOOKVERNR”发生更新时才会插入新行。

我的问题是，使用该触发器我无法更新其他列，除了示例“IF UPDATE (BOOKUID)”。但这不是我想要的。

有没有办法自定义触发器，以便我可以更新所有其他列，而无需为每一列使用“IF UPDATE”？

# spring - spring - 在 cron 作业中具有多个事务的休眠会话管理？

> ID：12402286
> 
> 赞同：2
> 
> 时间：2012-09-13T08:28:42.007
> 
> 标签：spring, hibernate, transactions

在 spring/hibernate 应用程序中，我每晚都会运行一些 cronjobs。其中一个应该在多个事务中完成它的工作，如下所示：

```
@Scheduled(cron = "...")
public void cron ( ) 
{
    batchJob();
}

@Transactional(propagation = Propagation.NEVER)
public void batchJob ( )
{
    List<Customer> customers = getCustomers();
    for (Customer customer : customers
    {
        doSomething(customer);
    }
}

@Transactional(readOnly = true)
protected List<Customer> getCustomers ( )
{
    return customerRepository.getCustomers();
}

@Transactional
protected void doSomething (Customer customer )
{
         // LazyInitializationException 
         customer.getAddress();
         // ...
} 
```

我的弹簧配置的一部分：

```
<!-- Transaction -->
<tx:annotation-driven mode="aspectj" />

<bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean> 
```

这里的关键点是我不想有一个长期运行的事务。因此，首先我获取所有客户并为每个客户调用一个事务方法。（我希望发布的代码足以理解问题）

当然，我得到一个 LazyInitializationException，因为当围绕“getCustomer”的事务提交时，Spring 正在关闭会话。

我能想到的可能解决方案：

*   我可以使用 OpenSessionInViewInterceptor 但这是一个 Web 组件

*   我可以使用 session.merge(customer) 重新附加分离的对象

*   这是 Propagation.Nestedtransaction 的情况吗？嵌套事务的语义是什么？大多数数据库没有嵌套事务（postgresql有但我没用过，叫做两阶段提交

*   我可以重写方法以使用 customerId 并在第二个事务中再次加载客户

现在我有两个关于我的问题的问题：

1.  您如何编写测试来重现上述错误？

2.  我怎样才能轻松地围绕这个展开一个开放的会话，或者在多个事务中完成大量工作的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:01:59.450

我不太了解您关于重现它的测试的第一个问题，据我了解，您只需要调用`cron()`非事务性测试即可。

关于可能的解决方案，我认为最好的解决方案是在初始查询中加载 id（只要您获得每个新实例`Customer`进行处理并不重要）。

请注意，`merge()`具有 id 的解决方案没有任何优势，它只会增加内存使用量和网络带宽消耗。另外据我记得嵌套事务不支持`JpaTransactionManager`。

从理论上讲，在这种情况下，您可以使用*扩展*持久性上下文而不是*事务*性上下文，但我认为不可能以这种方式配置 Spring Data JPA。

**编辑：** 如果您不喜欢它的外观，您可以封装低级细节以将您的业务逻辑与它们分离，如下所示：

```
interface CustomerProcessor {
    public void process(Customer c);
}

public void processCustomersInBatchJob(CustomerProcessor processor) {
    List<Long> ids = ...;
    for (Long id: ids) {
        processCustomer(id, processor);
    }
}

@Transactional
protected void processCustomer(Long id, CustomerProcessor processor) {
    Customer c = getCustomer(id);
    processor.process(c);
} 
```

# sql - 将 varchar 值 'test' 转换为数据类型 int 错误时转换失败，但 CONVERT 函数位于未命中的 CASE 语句中

> ID：12402287
> 
> 赞同：0
> 
> 时间：2012-09-13T08:28:47.017
> 
> 标签：sql

我遇到了“将 varchar 值”转换为数据类型 int 时出现“转换失败”的问题。错误，但唯一带有 CONVERT 的代码在 CASE 中，它永远不会被命中。

```
create table #temp (id int identity(1,1), optionType int, data varchar(100))
insert into #temp
values
(1,'test'),
(1,'1234'),
(1,'1234'),
(2,'12345'),
(2,'5435435')

select
case optionType
    when 1 then data
    when 2 then data                
    when 3 then CONVERT(INT, LEFT(data, CHARINDEX('_', data) - 1))          
end 
from #temp

drop table #temp 
```

为什么会出现错误？？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:47:36.933

尝试这个：

```
select
case optionType
    when 1 then data
    when 2 then data                
    when 3 then LEFT(data, CHARINDEX('_', data) - 1)          
end 
from #temp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:32:16.787

案例的所有“何时”必须返回相同的类型。

您正在尝试返回 INT 和 VARCHAR。

你必须选择！

示例工作代码（带有您的条目）

```
select
case optionType
    when 1 then data        
end as stringData,
case optionType
   when 2 then convert(INT, data)  
end as numericData
from #temp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T08:39:22.370

如果你真的想实现这个逻辑，你应该将你的 CASE...WHEN 结构分成两个不同的列，用于返回类型（varchar 和 int）：

```
select
case optionType
    when 1 then data
    when 2 then data
end as VarcharValue,
case optionType
    when 3 then CONVERT(INT, LEFT(data, CHARINDEX('_', data) - 1))        
end as IntValue
from #temp

drop table #temp 
```

或者，如果您的应用程序需要此功能，您应该在数据模型或业务逻辑层中解决对话。

# android - java.lang.SecurityException：不允许启动服务意图

> ID：12402296
> 
> 赞同：6
> 
> 时间：2012-09-13T08:29:06.547
> 
> 标签：android, android-c2dm

我从 google play 上的用户那里得到以下异常：

```
java.lang.SecurityException: Not allowed to start service Intent { act=com.google.android.c2dm.intent.REGISTER pkg=com.google.android.gsf (has extras) } without permission com.google.android.c2dm.permission.RECEIVE 
```

我将我的应用程序上传到市场已经 8 个月了，这是我第一次遇到这个异常。谁能告诉我，这个异常是怎么突然出现的，这是怎么回事。我搜索了网络，但找不到任何东西。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T05:51:15.813

由于此服务的清单中没有指定意图过滤器，因此 android:exported 的默认值为 false。当您设置 android:exported="true" 时，其他应用程序将能够启动服务。

[http://developer.android.com/guide/topics/manifest/service-element.html#exported](http://developer.android.com/guide/topics/manifest/service-element.html#exported)

# iphone - viewWithTag 在随后调用 cellForRowAtIndexPath 时返回 nil

> ID：12402299
> 
> 赞同：1
> 
> 时间：2012-09-13T08:29:31.450
> 
> 标签：iphone, objective-c, ios5, uitableview

我有一个带有原型表格单元格的 UITableView，我有一个 UIImageView 一个 UILabel 和 2 个 Buttons 对象，它们从具有不同标签（即 100,200,300）的单元格上的 UIButton 继承，我使用 IB 创建了它。我使用 dequeueReusableCellWithIdentifier 来获取 cellForRowAtIndexPath 中的单元格，它总是返回一个单元格。

第一次 cellForRowAtIndex 路径运行 [cell viewWithTag:TAG] 为每个 UI 元素返回正确的对象，但是在第二次运行时（当我滚动一点时），除了两个为 nil 的 UIButton 对象之外，所有对象都正确返回。（在调试器中，它们的地址全为零）。

我不知道是什么原因造成的，因为我所有的其他表格视图都使用类似的代码。

更新：如果我为 cellForRow 中的按钮设置类型 ID，它们不是零，但是当我悬停时，对象显示为 (UIButton *)。但是，如果我在 [cell ViewWithTag:Button1Tag] 之后有任何代码将消息发送到 id 对象，则它变为 nil。很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T09:26:38.217

好的，我最终在 XCode 中使用[GDB](http://mobiledevelopertips.com/debugging/debugging-with-gdb-introduction-to-commands.html)（这很棒）使用[recursiveDescription](http://mobiledevelopertips.com/debugging/debugging-with-gdb-print-object-and-uiview-recursivedescription.html)来查看 Cell 内部。它表明我的标签已经消失，然后我意识到我正在将标签设置在 cellForRow 上以保存该行，覆盖原来的 IB 集标签。

# c# - 如何通过 .Net Interop 调用 VBA 函数

> ID：12402301
> 
> 赞同：1
> 
> 时间：2012-09-13T08:29:32.683
> 
> 标签：c#, .net, vba, interop

在 VBA/VB6 中，我可以像这样调用函数或子例程：

```
Call myFunction 
```

我从 .Net 插入 Access 应用程序，如下所示：

```
using MSAccess = Microsoft.Office.Interop.Access.Application;

var access = new MSAccess();
access.OpenCurrentDatabase(@"C:\myDatabase.accdb");

access. //Here I can more or less type my VBA code the same way I can natively

access.CloseCurrentDatabase();
Marshal.ReleaseComObject(access); 
```

我在`myFunction`通过 MS Access Interop 调用的点后面放什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:39:01.467

根据链接中给出的示例，查看[Application.Run](http://msdn.microsoft.com/en-us/library/office/aa221582%28v=office.11%29.aspx)是否符合您的要求。

**编辑**：另外，[`DoCmd.RunMacro`](http://msdn.microsoft.com/en-us/library/office/aa220713%28v=office.11%29.aspx)应该工作。

# java - 字符之间的正则表达式匹配

> ID：12402302
> 
> 赞同：5
> 
> 时间：2012-09-13T08:29:34.037
> 
> 标签：java, regex

我正在尝试在 Java 中拆分字符串。拆分应该出现在两个字符之间，其中一个是字母字符 (az, AZ)，另一个是数字字符 (0-9)。例如：

```
String s = "abc123def456ghi789jkl";
String[] parts = s.split(regex);
System.out.println(Arrays.deepToString(parts)); 
```

输出应该是`[abc, 123, def, 456, ghi, 789, jkl]`. 有人可以用匹配的正则表达式帮助我吗？

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T08:33:53.387

您可以使用[前瞻和](http://www.regular-expressions.info/lookaround.html)后视的组合：

```
String s = "abc123def456ghi789jkl";
String regex = "(?<=\\d)(?=[a-z])|(?<=[a-z])(?=\\d)";
String[] parts = s.split(regex);
System.out.println(Arrays.deepToString(parts)); 
```

# javascript - asp.net 包括 javascript 在 iss 上运行缓慢

> ID：12402303
> 
> 赞同：0
> 
> 时间：2012-09-13T08:29:37.280
> 
> 标签：javascript, performance, iis

我面临着非常奇怪的情况。我正在开发我的`ASP.NET`应用程序并在 Visual Studio 开发服务器上对其进行调试，当我完成某些组件时，我在 IIS 上发布我的应用程序以让其他人测试输入数据。所以当我在 dev 上运行它时。服务器，一切都很好，但在 IIS 上，页面加载速度非常慢。

所以第一个问题是**如何编译应用程序比调试模式下的应用程序更慢？**

我想找出原因，所以我开始从我的`site.master.cs`文件中删除 JavaScript 包含。它实际上有所帮助，但它以意想不到的方式起作用。

我的包含由以下代码完成：

```
ClientScriptManager cs =Page.ClientScript;
        cs.RegisterClientScriptInclude(typeof(string), "jquery", Page.ResolveClientUrl("~/Scripts/jquery-1.8.0.min.js"));
        cs.RegisterClientScriptInclude(typeof(string), "jqueryUI", Page.ResolveClientUrl("~/Scripts/jquery-ui-1.8.23.custom.min.js"));
        cs.RegisterClientScriptInclude(typeof(string), "utility", Page.ResolveClientUrl("~/Scripts/utility.js"));
        cs.RegisterClientScriptInclude(typeof(string), "forms_v2", Page.ResolveClientUrl("~/Scripts/forms_v2.js"));
        cs.RegisterClientScriptInclude(typeof(string), "odkazy", Page.ResolveClientUrl("~/Scripts/odkazy.js"));
        cs.RegisterClientScriptInclude(typeof(string), "tabs_v2", Page.ResolveClientUrl("~/Scripts/tabs_v2.js"));  //Nahradí tabs
        cs.RegisterClientScriptInclude(typeof(string), "user", Page.ResolveClientUrl("~/Scripts/user.js"));
        cs.RegisterClientScriptInclude(typeof(string), "grafika", Page.ResolveClientUrl("~/Scripts/grafika.js"));
        cs.RegisterClientScriptInclude(typeof(string), "json2", Page.ResolveClientUrl("~/Scripts/json2.js"));//IE7 
```

因此，通过一一删除包含我发现问题仅由`forms_v2.js` 但我不能简单地删除此脚本引起，我需要确切找出哪个函数减慢了我的应用程序。但是在删除脚本中的整个文本后，没有任何变化。

所以最后的情况是这样的：当有包含时，`forms_v2.js`即使它是空文件，我的应用程序也很慢，但是当这个包含被删除时，一切正常。

PS我知道为了提高性能最好减少JS文件，我会在部署之前合并它并缩小，所以这不是我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:37:20.850

在包含之前尝试检查这些脚本是否存在

```
if (!Page.ClientScript.IsClientScriptBlockRegistered("jquery"))
      Page.ClientScript.RegisterClientScriptInclude(typeof(string), "jquery", "YOUR_SCRIPT"); 
```

# android - Android Monkey 测试报告中的“事件”是什么意思？

> ID：12402311
> 
> 赞同：3
> 
> 时间：2012-09-13T08:30:04.127
> 
> 标签：android, testing, monkey

来自 Android Monkey Test 的报告。

```
Event percentages:
  0: 15.0%
  1: 10.0%
  2: 15.0%
  3: 25.0%
  4: 15.0%
  5: 2.0%
  6: 2.0%
  7: 1.0%
  8: 15.0% 
```

0-8 的确切含义是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T03:42:28.460

我找到了答案 0: 15.0% touch 1: 10.0% motion
2: 15.0% traceback 3: 25.0% syskeys 4: 15.0% nav 5: 2.0% majornav 6: 2.0% appswitch 7: 1.0% flip 8: 15.0% anyevent

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-26T12:51:07.587

现在，Android Monkey Test 会编写更多关于您正在运行的测试的信息（您可以指定更多选项来运行您的测试）。

使用所有提供选项运行的示例：

```
./adb.exe shell monkey -p your.package.name --pct-touch 1 --pct-motion 2 --pct-pinchzoom 3 --pct-trackball 4 --pct-rotation 5 --pct-nav 6 --pct-majornav 7 --pct-syskeys 8 --pct-appswitch 9 --pct-flip 10 --pct-anyevent 45 --throttle 500 -v 50 
```

猴子写这样的东西（添加适当的切换器）：

```
// Event percentages:
//   0: 1.0%    (--pct-touch 1)         
//   1: 2.0%    (--pct-motion 2)        
//   2: 3.0%    (--pct-pinchzoom 3)     
//   3: 4.0%    (--pct-trackball 4)     
//   4: 5.0%    (--pct-rotation 5)      
//   5: 6.0%    (--pct-nav 6)           
//   6: 7.0%    (--pct-majornav 7)      
//   7: 8.0%    (--pct-syskeys 8)       
//   8: 9.0%    (--pct-appswitch 9)     
//   9: 10.0%   (--pct-flip 10)         
//   10: 45.0%  (--pct-anyevent 45) 
```

许多选项在这里解释：[https ://developer.android.com/studio/test/monkey.html](https://developer.android.com/studio/test/monkey.html)

你可以在这里查看代码：[https ://searchcode.com/codesearch/view/109282209/](https://searchcode.com/codesearch/view/109282209/)

# c# - 获取 PictureboxImage 的资源名称

> ID：12402312
> 
> 赞同：0
> 
> 时间：2012-09-13T08:30:23.007
> 
> 标签：c#, image, resources, picturebox, resource-files

我有一个`Picturebox`，用户可以从`backgroundimage`资源文件中选择它。

后来我想`resourcename`摆脱`picturebox`。

我已经尝试过这个：

```
MessageBox.Show(((PictureBox)sender).BackgroundImage.ToString()); 
```

但它给了我图片的格式..没有类似的东西：

```
MessageBox.Show(((PictureBox)sender).BackgroundImage.Name.ToString()); 
```

并且我已经考虑在设置图像时将 a`Tag`设置`Picturebox`为`picturename`......但这很烦人......

那么如何轻松获取用作`backgroundimage`at的资源的名称`Picturebox`？

我想我必须解释一下整个情况：

我有一个带有很多 raidbuttons 的表单...
如果您选择其中一个按钮并单击面板，
面板将更改为选定的单选按钮图像...

面板的点击事件：

```
PanelClick(object obj ,...)
{
    if(radiobuttonApple.checked)
    {
        obj.backgroundimage = resource.apple;
    }

    if(radiobuttonPear.checked)
    {
        obj.backgroundimage = resource.Pear;
    }
} 
```

还有一百多个......后来我想知道背景图像是哪个资源文件......

是不是有这样的：

（如果我将单选按钮命名为资源）

```
PanelClick(object obj ,...)
{
   obj.backgroundimage = resource[selectedradiobutton.Name]
   obj.tag = selectedradiobutton.Name
} 
```

所以现在我要使用 LINQ：

```
RadioButton checkedRadioButton = panel1.Controls.OfType<RadioButton>().FirstOrDefault(r => r.Checked);
obj.tag = checkedRadioButton.Text; 
```

所以我只需要知道如何按名称获取资源，例如：

```
obj.backgroundimage = resource[checkedRadioButton.Text]; 
```

并且不使用资源管理器：

```
var resman = new System.Resources.ResourceManager(
    "RootNamespace.Pictures",
    System.Reflection.Assembly.GetExecutingAssembly()
)
var image = resman.GetPicture("checkedRadioButton.Text"); 
```

我希望这会奏效..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:06:06.680

创建一个基于*所选单选按钮*返回资源的方法。

例子：

```
private resource checkResource()
{
    if(radiobuttonApple.checked)
    {
        return resource.apple;
    }

    if(radiobuttonPear.checked)
    {
        return resource.Pear;
    }
} 
```

然后你可以*像这样*使用它：

```
PanelClick(object obj ,...)
{
    obj.backgroundimage = checkResource();
} 
```

或者

```
PanelClick(object obj ,...)
{
   obj.backgroundimage = checkResource();
   obj.tag = selectedradiobutton.Name
} 
```

## 编辑：

正如您所说，这种方法可能会根据每个分配的迭代次数而产生不同的问题。为了避免这种情况，同时也考虑到另一种解决方案，您可以使用单个事件来处理所有单选按钮状态更改，如下所示：

首先，创建一个资源变量，以便在单选按钮的状态更改时分配给它。IE。

```
 private Resource bgResource;

 private void radioButton_CheckedChanged(object sender, EventArgs e)
 {
      RadioButton obj = sender as RadioButton;
      bgResource = resman.GetPicture(obj.Tag);
 } 
```

然后任何时候你想改变背景，你可以简单地说：

```
obj.BackgroundImage = bgResource; 
```

# paypal - 是否可以为贝宝上的特定付款停用 IPN？

> ID：12402316
> 
> 赞同：0
> 
> 时间：2012-09-13T08:30:26.423
> 
> 标签：paypal, paypal-ipn

我们的商店可以处理定期付款的IPN（即时付款通知）。

我们也通过贝宝提供捐款，但无法处理此 IPN，因为我们不跟踪商店方面的捐款。而且不想atm。

是否可以为例如捐赠停用 IPN，或者我们是否需要为此创建一个单独的贝宝帐户？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:41:17.687

我认为您无法针对特定付款禁用贝宝 IPN，但是，`invoice-id` 如果通过捐赠付款，您可以使用不同的方式将捐赠和其他付款分开，您可以在任何关键字上加上`Invoide-id`前缀`donation-001`

这是您可以尝试的简单且最佳的方法..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T23:05:37.070

为您的捐赠设置一个 notify_url，该地址与您的常规 IPN 脚本不同。
只要该位置以 HTTP 200 OK 响应它，就可以使用 PayPal。

因此，基本上您将拥有：
- 您的商店为每笔交易设置适当的 notify_url
或
- 在您的 PayPal 个人资料上设置的 IPN URL 以及
-
用于捐赠的特定自定义 notify_url。这可以是纯 .html 或 .txt 文件。*

这会起作用，因为 notify_url 会覆盖您的 PayPal 个人资料中设置的任何内容。

# r - 在 r 中的两个图下方居中图例

> ID：12402319
> 
> 赞同：4
> 
> 时间：2012-09-13T08:30:48.307
> 
> 标签：r, legend, par

我想将一个常见的图例集中在两个图下方。我曾经`xpd=TRUE`允许在情节本身和 oma 之外打印来为图例创造空间。然而，图例不会水平移动，而是垂直“提前”剪裁。有什么建议吗？

```
quartz(title="PCoA",12,6)
par(mfrow=c(1,2),oma=c(5,0,0,0),xpd=TRUE)

plot(1:3,4:6,main="plot 1")

plot(1:3,4:6,main="plot 2")

# Clips the plot    
legend(1,3.5,ncol=3,c("0-1 km","1-5 km","outside barrier"),fill=c("green","orange","red"), title="Fetch")

# Won't let me move the legend sideways 
legend(0,3.5,ncol=3,c("0-1 km","1-5 km","outside barrier"),fill=c("green","orange","red"), title="Fetch") 
```

![在此处输入图像描述](../Images/27c07cea223c8fb944f9c775b4002e65.png)

更新

使用下面的解决方案，它可以通过拖动边缘来更改图形的尺寸来切割图形的边缘（见下文）。任何想法可能会发生什么？

![在此处输入图像描述](../Images/307eef16321879d8f29b7ac70a32dbe9.png)

![在此处输入图像描述](../Images/2b63f86ad99197ee312ce512391e7375.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-13T09:05:40.017

而不是使用`par=mfrow(...)`我建议你使用`layout()`.

这允许您指定具有绘图位置的矩阵：

```
layout(matrix(c(1,2,3,3), ncol=2, byrow=TRUE), heights=c(4, 1))

par(mai=rep(0.5, 4))
plot(1:3,4:6,main="plot 1")
plot(1:3,4:6,main="plot 2")

par(mai=c(0,0,0,0))
plot.new()
legend(x="center", ncol=3,legend=c("0-1 km","1-5 km","outside barrier"),
       fill=c("green","orange","red"), title="Fetch") 
```

![在此处输入图像描述](../Images/bd6b02edf2edfc397bd06ceea1593323.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T08:48:16.160

`par(xpd=NA)`更多的是您正在寻找的东西。`?par`从帮助页面中提取：

> `xpd`
> 一个逻辑值或 NA。如果为 FALSE，所有绘图都被剪裁到绘图区域，如果为 TRUE，所有绘图都被剪裁到图形区域，如果为 NA，所有绘图都被剪裁到设备区域。另请参阅`clip`。

实际上，您希望将其裁剪到设备区域而不是图形区域（例如，请参阅[此博客条目](http://www.seehuhn.de/blog/122)，以图形方式解释绘图、图形和设备区域之间的差异）。

```
quartz(title="PCoA",12,6)
par(mfrow=c(1,2),oma=c(5,0,0,0),xpd=NA)

plot(1:3,4:6,main="plot 1")

plot(1:3,4:6,main="plot 2")
legend(-0.5,3.5,ncol=3,c("0-1 km","1-5 km","outside barrier"), 
    fill=c("green","orange","red"), title="Fetch") 
```

![在此处输入图像描述](../Images/a09da12aa5e637c3a72aa2d87dfd4218.png)

# .net - 如何在后面找到 webBrowser 代码的控件（没有名称没有 id）

> ID：12402320
> 
> 赞同：0
> 
> 时间：2012-09-13T08:30:48.557
> 
> 标签：.net, vb.net, winforms

我正在使用 Visual Studio 2005 Visual Basic Windows 应用程序。我需要找到一个按钮并从后面的代码中单击它。**但是按钮没有名称，也没有 id。**

当我看到网页按钮的来源是这样的；

```
<input type="submit" value="Devam Et" onclick="return validatee();" style="background:#F79F81;font-weight:bold"> 
```

我正在尝试像这样使用 .outerHTML 点击；

```
If WebBrowserEx1.Document.All.Item(k).OuterHtml = "<input type="submit" value="Devam Et" onclick="return validatee();" style="background:#F79F81;font-weight:bold">" Then
     WebBrowserEx1.Document.All.Item(k).InvokeMember("click")
     Exit For
End If 
```

但到目前为止，我无法成功。因为，我认为，这个控件的格式与后面的代码不同。我之前在某些按钮上成功了（通过更改格式、更改类型、样式等的顺序）

应该有一些更好的方法可以在不使用 .outerHTML 的情况下做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:17:06.870

You could iterate through the forms, at least that's better than iterating through all the elements on the page. The example below is from [http://msdn.microsoft.com/en-us/library/system.windows.forms.htmldocument.forms.aspx#Y106](http://msdn.microsoft.com/en-us/library/system.windows.forms.htmldocument.forms.aspx#Y106)

```
For Each FormElem As HtmlElement In WebBrowser1.Document.Forms
    FormElem.InvokeMember("reset")
Next 
```

# ruby-on-rails - 使用acts_as_list gem 时重置位置属性？（导轨）

> ID：12402324
> 
> 赞同：1
> 
> 时间：2012-09-13T08:31:02.003
> 
> 标签：ruby-on-rails, sorting, gem, has-many, acts-as-list

我有一个简单的 Rails 3 应用程序，其中一个目标有许多目标。在我看来，我允许用户对任何给定目标的目标重新排序，并且我正在使用[acts_as_list](https://github.com/swanandp/acts_as_list) gem 来实现其中的一些功能。

目标模型：

```
class Goal < ActiveRecord::Base
  attr_accessible :name, :description

  has_many :objectives, :order => :position, :dependent => :destroy
end 
```

目标模型：

```
class Objective < ActiveRecord::Base
  attr_accessible :name, :description, :position

  belongs_to :goal

  acts_as_list :scope => :goal
end 
```

我还希望允许用户更改与特定目标相关联的目标。我会假设`acts_as_list`只要更改了目标的目标（因为我定义了`scope => :goal`），gem 就会重置位置列，但它只是保留当前位置。

对我来说，这是不可取的，因为在新目标的背景下，这个位置不再有意义。我宁愿重置位置，并将目标移动到与之关联的新目标的底部。所以我写了这个方法`before_save`在目标模型中发生：

```
 before_update :reset_position

  def reset_position
    if self.goal_id_changed?
      self.move_to_bottom #acts_as_list method
    end
  end 
```

`stack level too deep`不幸的是，当我尝试保存时，这会导致错误。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T13:04:31.807

好的，我最终将其重写`reset_position`为如下所示，因为`acts_as_list`显然不处理关联更改。

```
before_update :reset_position

def reset_position
  if self.goal_id_changed?
    self.position = self.goal.objectives.count > 0 ? self.goal.objectives.last.position + 1 : 1
  end
end 
```

基本上，当它与不同的目标相关联时，它将目标移动到目标列表的底部。似乎工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:59:56.750

我想说这是因为 move_to_bottom 自己试图保存记录。因此，在我看来，编写自己的这种方法版本将是可行的方法。从当前的acts_as_list 方法开始，并在不保存的情况下开发自己的变体。

# python - 除了 Python 的 matplotlib 之外，还有其他图形模块吗？

> ID：12402326
> 
> 赞同：1
> 
> 时间：2012-09-13T08:31:03.910
> 
> 标签：python, matplotlib

感觉matplotlib很慢，想试试其他轻量级、敏捷的图形包。我主要是用绘图来做商业演示，不是科学目的。有什么推荐吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:35:16.377

你可以试试：

[http://code.google.com/p/visvis/](http://code.google.com/p/visvis/)
[http://code.google.com/p/cagraph/](http://code.google.com/p/cagraph/)

或[plplot的python绑定](http://plplot.sourceforge.net/)...

如果你觉得你不一定需要在 Python 中实现你的代码，你可以尝试基于 Latex 的绘图：

[http://www.texample.net/tikz/examples/](http://www.texample.net/tikz/examples/)
[http://pgfplots.sourceforge.net/gallery.html](http://pgfplots.sourceforge.net/gallery.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T19:31:21.540

还有查科。它无论如何都不是轻量级的，但在我有限的测试中它比 matplotlib 快一点。

[http://code.enthought.com/projects/chaco/](http://code.enthought.com/projects/chaco/)

我最终还是使用了 matplotlib，因为它更受欢迎，因此它有更好的社区支持来帮助解决问题等。

# java - 是否可以在任务管理器的“进程”选项卡中获取有关项目的信息（Windows）

> ID：12402327
> 
> 赞同：2
> 
> 时间：2012-09-13T08:31:04.847
> 
> 标签：java, windows, operating-system, taskmanager

我想知道是否可以获得有关正在运行的进程的信息（如内存使用情况），这些信息通常可以在 Windows 任务管理器的“进程”选项卡中看到。如果是的话，有什么方法可以使用java吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:35:21.447

`tasklist`Windows有一个名为的命令

```
Image Name                     PID Session Name        Session#    Mem Usage 
```

您可以使用 a`Runtime.getRuntime().exec("tasklist.exe")`来读取该信息。

像这样的东西：

```
Process process = Runtime.getRuntime().exec("tasklist.exe");
BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));
String line;
while((line = reader.readLine()) != null){
    System.out.println(line);
} 
```

# javascript - WinJS 内联绑定语法

> ID：12402328
> 
> 赞同：0
> 
> 时间：2012-09-13T08:31:08.677
> 
> 标签：javascript, windows-8, microsoft-metro, winjs

我试图了解模板绑定如何与 WinJS 一起工作。

我发现您必须在数据属性上指定绑定：

```
<div data-wind-bind="innerText:myProperty"></div> 
```

我想我也看到了可以定义多个属性的东西......

```
<div data-wind-bind="style.color: fontcolor; innerText: timestamp"></div> 
```

是否还有与其他模板引擎类似的语法，我可以指定它的内联方式（只是其他模板引擎的一个示例）

```
<div>This is my property {{property1}} and it was created {{created_at}}</div> 
```

现在重要的是它`<% property %>`或`#{property}`只是将被模板引擎解析和替换的东西

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:56:52.793

No, there is no such syntax in WinJS Binding.

You can write this instead, however.

```
<div>This is my property <span data-win-bind="innerText:property1"></span> and it was created <span data-win-bind="innerText:created_at"></span></div> 
```

Otherwise, bindings are actually created by `WinJS.Binding.processAll`. You can replace or monkey-patch this function and add your own template engine.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-25T15:19:34.517

你可以做类似的事情

```
<div>This is my property <span data-win-bind="innerText: property1">property1</span> and it was created <span data-win-bind="innerText: created_at">created_at</span></div> 
```

或者，当然，您也可以使用 javascript 来实现相同的结果，方法是：

```
// somefile.html
<div id="someID">This is my property {{property1}} and it was created {{created_at}}</div>

// somefile.js
var property1 = "some text";
var created_at = "some text";
var div = document.getElementById("someID");
div.innerText = "This is my property " + property1 + " and it was created " + created_at; 
```

希望这可以帮助。

# sharepoint - 使用 Sharepoint 2007 在 Internet Explorer 上未呈现站点操作菜单

> ID：12402333
> 
> 赞同：0
> 
> 时间：2012-09-13T08:31:16.767
> 
> 标签：sharepoint, sharepoint-2007

我遇到了一个有趣的问题。我有一个sharepoint 2007 网站。我创建了一个新的母版页并更改了默认设计。所以我不使用default.master。

我将站点操作菜单添加到母版页。它成功呈现在谷歌浏览器上。但是在 IE 上有一个问题。我在 IE 的 html 源上看不到与站点操作菜单相关的 div 或文本。

那么这个问题的原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:00:36.920

我几乎可以肯定，这与从处理 IE 兼容性的母版页中无人看管地删除某些 javascript 有关。

尝试比较你的主人和默认的，并使用删除的线条。

# javascript - 通过在 JSON 映射变量中提供键来获取值（在 JavaScript 中）

> ID：12402334
> 
> 赞同：0
> 
> 时间：2012-09-13T08:31:22.753
> 
> 标签：javascript, map

如何通过向 JSON 映射变量（在 JavaScript 中）提供键来获取值？我有 `memberIdToNameMap`，其中包含键值对。我有一个`key`我想获得价值的用途。我们怎样才能找回它。

我试过 `memberIdToNameMap[key]`了，但它回来了`undefined`。

- 谢谢

# c# - 将字符串转换为十进制忽略点

> ID：12402336
> 
> 赞同：2
> 
> 时间：2012-09-13T08:31:24.337
> 
> 标签：c#, decimal, dataformat

今天我注意到我使用十进制第一件事的所有地方都在网格中显示逗号而不是点第二个问题是当我编辑或插入带有点的数字时它忽略了点

就像我输入“2.5”一样，我得到了 25

这就像示例代码：

```
decimal a = Convert.ToDecimal("2.5"); 
```

a 的结果是 25。

这个问题发生在 iis 和我的本地机器上。

到处都是，怎么修？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T08:33:26.537

你现在的文化是什么？这应该做的工作：

```
decimal a = Convert.ToDecimal("2.5", new CultureInfo("en-US")); 
```

此外，对于逗号显示：

```
string s = a.ToString(new CultureInfo("en-US")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T08:41:30.900

您可以通过更改默认文化或在转换调用^((a))中强制使用特定文化来修复它。

我们奇妙的，但不知何故有点令人不安的欧洲表兄弟在过去的某个时候把小数点和逗号弄混了，所以三万五千七点二五写成：

```
35.007,25 
```

因此，几乎可以肯定的是，您的文化设置正在丢弃千位分隔符（无论它们在哪里），因此“2.5”*是*25。这意味着像两万五千 ( `2,500`) 这样的数字几乎肯定会变成两个半。

* * *

^((a))：事实上，您可能*不应该*在转换调用中强制使用特定的文化，因为文化的全部意义在于适应人们的需求。欧洲人在没有给他们*更多*理由的情况下已经对美国的身体想得不够了:-) 你所看到的*正是*应该发生的事情。

如果您需要特定的文化，请以这种方式配置您的机器，并让您的代码使用默认值。

# ios - 图片的 Graph API 更改

> ID：12402340
> 
> 赞同：2
> 
> 时间：2012-09-13T08:31:39.207
> 
> 标签：ios, facebook, size, image

使用 FB iOS sdk，我在使用 Graph API 检索图片时遇到问题。

我曾经做过`[facebook requestWithGraphPath:@"me?fields=id,first_name,last_name,picture,gender,email&type=large" andDelegate:self];`

检索有关已登录用户的信息。它仍然有效，只是以前的图片是大的，现在是小的。

我不想单独调用图片请求，否则我不会在这里发帖*。*

关于如何恢复旧结果的任何提示？一个请求中的生物数据+大图。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T08:40:40.243

`picture`尝试使用请求大图片类型而不是请求，`picture.type(large)`这样您的请求看起来像这样：

```
[facebook requestWithGraphPath:@"me?fields=id,first_name,last_name,picture.type(large),gender,email" andDelegate:self]; 
```

这将在响应中返回一个值作为图片，但它将具有大图像 URL 而不是小图像 URL

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T15:47:50.950

我发现 picture.type(large) 不会返回方形图片。如果您想要更大的图片但保持正方形，您可以使用设置为相同值的宽度和高度，如下所示：

```
picture.width(200).height(200) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-24T15:49:34.083

**用Swift**回答问题（**旧的**和**新** **的 Facebook URI(s) 语法**）：

```
enum FacebookEndPoint: String {
    case Me = "me"

    static func userProfilePicture(let facebookID: String, let pictureType: String) -> String {
          // Old syntax
          // return "/\(facebookID)/picture?type=\(pictureType)"

          // New syntax
          return "/\(facebookID)?fields=picture.type(\(pictureType))"
    }

    static func userProfilePicture(let facebookID: String, let width: Int, let height: Int) -> String {
        // Old syntax
        // return "/\(facebookID)/picture?width=\(width)&height=\(height)"

        // New syntax
        return "/\(facebookID)?fields=picture.width(\(width)).height(\(height))"
    }
} 
```

**注意：**我刚刚通过 Facebook Graph Explorer 工具测试了 URI，两种语法（旧的和新的）在我写这个答案的时候都有效。

# symfony - Composer - 未提交的更改（symfony 2.1）

> ID：12402345
> 
> 赞同：8
> 
> 时间：2012-09-13T08:31:53.053
> 
> 标签：symfony, symfony-2.1, composer-php

我正在将 symfony 2.1 与作曲家一起使用，我正在尝试运行**作曲家更新**

但是，我不断收到**“有未提交的更改”**，我不记得更改供应商目录中的任何文件，并且几乎每个包都提供了它！

我尝试**composer install**来恢复任何更改，但它似乎没有效果。如果我删除锁定文件并尝试**安装**，我会收到类似“symfony 2.1 需要 symfony 2.1 -> symfony 2.1 可满足”之类的错误消息。这没有任何意义。

如果我删除供应商中的内容，我会收到相同的错误消息并且没有安装任何内容。

我所做的一切似乎都不起作用。不管**“未提交的更改”**如何，有没有办法用**“强制”进行更新**

 *** * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-13T09:12:58.633

您可以使用`composer status -v`. 以下是使用此命令检测文件更改的`vendor/`方法，以及如何修复它。

首先，我们验证没有包被修改：

```
➜  SymfonyApp git:(master) ✗ composer status
No local changes 
```

然后，我们更改一个供应商文件

```
➜  SymfonyApp git:(master) ✗ echo "modification" >> vendor/symfony/symfony/src/Symfony/Component/HttpKernel/Kernel.php 
```

然后我们要求作曲家告诉我们修改后的供应商文件（注意 -v 选项，以查看修改后的文件）

```
➜  SymfonyApp git:(master) ✗ composer status -v
You have changes in the following dependencies:
/Users/adrienbrault/Developer/SymfonyApp/vendor/symfony/symfony:
    M src/Symfony/Component/HttpKernel/Kernel.php 
```

然后我们重置供应商 git 存储库以将文件设置回其原始状态。

```
➜  SymfonyApp git:(master) ✗ cd /Users/adrienbrault/Developer/SymfonyApp/vendor/symfony/symfony
➜  symfony  git checkout .
➜  symfony  cd -
~/Developer/SymfonyApp 
```

最后，我们检查文件是否不再被作曲家修改。

```
➜  SymfonyApp git:(master) ✗ composer status -v
No local changes 
```

更新：作曲家现在应该帮助你处理这个

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-07-28T10:55:29.530

您还可以在 composer.json 文件的配置参数中设置为，请`discard-changes`参阅[https://getcomposer.org/doc/06-config.md#discard-changes](https://getcomposer.org/doc/06-config.md#discard-changes)。`true`

```
{
  "name": "test",
  "description": "Demonstrating concepts",
...
  "config": {
    "process-timeout": 1800,
    "discard-changes" : true
  },
...
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-28T07:18:48.180

因为这会影响到在一台服务器上共享依赖项的各种项目，例如，供应商作者会要求我在提交错误并提交到他们的仓库之前测试快速更改，所以我运行它以全局设置**discard-changes**为**true**：

```
php composer.phar config -g  discard-changes 1 
```**

# c# - 即使 roleManger.enabled 设置为 false，Roles.Enabled 也为 true

> ID：12402346
> 
> 赞同：7
> 
> 时间：2012-09-13T08:31:53.147
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-membership

我有一个简单的网站，其中一个 aspx 页面 ( `Test.aspx`) 显示在(attribute )`Roles.Enabled`中设置为 false 的值。`Web.config``roleManager@enabled`

**测试.aspx：**

```
<%@ Page Language="C#" %>
<%= Roles.Enabled %> 
```

**网络配置：**

```
<?xml version="1.0"?>
<configuration>
    <system.web>
      <roleManager enabled="false" />
    </system.web>
</configuration> 
```

这输出：

> **错误的**

这是预期的。

但是，当我添加另一个文件（剃须刀页面）时，例如`Test.cshtml`内部没有内容（0 B），aspx 页面突然输出：

> **真的**

即使我从站点中删除剃刀页面，输出也不会改变。我必须回收应用程序池，然后再次输出`False`（预期结果）。

似乎*MVC*模块/处理程序工厂出于某种未知原因更改了这些值。

如何告诉*MVC*运行时不要这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-12T08:46:35.977

可以打开简单成员资格的关键是 AppSetting `enableSimpleMembership`（默认为`true`？）。

显然，当 MVC 项目启动时，例程会检查此设置是否设置为`false`. 如果不是，[`SimpleMembershipProvider`](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)则应用 - 或 ASP.NET 尝试 - 以某种方式[这样](https://stackoverflow.com/questions/15213093/what-would-be-equivalent-web-config-configuration-for-enablesimplemembership)。

要禁用此行为，请将其设置为`false`。

```
<appSettings>
  <add key="enableSimpleMembership" value="false" />
</appSettings> 
```

[`PreApplicationStartCode`](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.preapplicationstartcode%28v=vs.111%29.aspx)我在WebMatrix中发现了这句话。我猜大多数 MVC 版本都有类似的行为。

> 要为 ASP.NET 网页网站使用 SimpleMembershipProvider 和 WebSecurity 类，请在 Web.config 文件的 appSetting 部分中将**enableSimpleMembership设置为 true。**（或者，将 **enableSimpleMembership**保留在 Web.config 文件之外，因为 **enableSimpleMembership**默认为 true。）启用简单成员资格后，SimpleMembershipProvider 将替换 SqlMembershipProvider，但在通过调用 InitializeDatabaseConnection() 方法对其进行初始化之前不会调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T20:46:05.723

尝试设置此键。基本上 simplemembership 正在打开，这就是启用角色的原因

# oracle - 在 conn.commit() 之后需要 setautocommit(true)

> ID：12402347
> 
> 赞同：16
> 
> 时间：2012-09-13T08:31:53.957
> 
> 标签：oracle, jdbc

`conn`从池中获取数据库连接 ( )。

假设`autocommit`在该连接上为 TRUE。

现在`conn.setautocommit(false)`已经设置；

然后经过几次声明更新，终于`conn.commit()/conn.rollback()`完成了。

现在我需要做明确的代码`setautocommit(true)`来恢复到以前的 conn 状态吗？

或`commit()\rollback()`会`setautocommit(true)`固有地设置？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-13T08:34:27.170

这取决于您从哪里获得该连接。如果您自己创建了连接，则无需恢复自动提交的状态。

如果您从数据源获得它，您应该将状态恢复**到原来的状态，**因为数据源可能会将连接保留在池中，并且下一段代码可能不会期望您设置的内容。

`commit()`不影响自动提交的值。启用自动提交只是确保 JDBC 驱动程序`commit()`在您执行的每个语句之后调用。你仍然可以随意调用`commit()`，只是不会有任何效果（除非它`rollback()`不会总是做你想做的事）。

**[编辑]**如何处理自动提交取决于您的连接池。[dbcp](http://commons.apache.org/dbcp/configuration.html)有一个配置选项，可以在给您连接之前关闭自动提交，当您返回池时，[c3p0](http://www.mchange.com/projects/c3p0/#configuring_unresolved)将回滚连接。阅读有关您的连接池如何工作的文档。

如果您不知道使用了哪个池，安全的解决方案是在`false`获得连接时设置自动提交，并在遇到异常时回滚连接。我建议写一个包装器：

```
public <T> T withTransaction( TxCallback<T> closure ) throws Exception {
    Connection conn = getConnection();
    try {
        boolean autoCommit = conn.getAutoCommit();
        conn.setAutoCommit(false);

        T result = closure.call(conn); // Business code

        conn.commit();
        conn.setAutoCommit(autoCommit);
    } catch( Exception e ) {
        conn.rollback();
    } finally {
        conn.close();
    }
} 
```

此代码将为您正确处理连接，您无需在业务代码中再担心它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-07T21:49:14.253

有趣的是，`conn.setAutoCommit(true);`暗示 a `commit`（如果它处于`autoCommit(false)`模式，请参阅[此处](https://stackoverflow.com/questions/10457335/commit-or-conn-setautocommittrue?utm_medium=organic&utm_source=google_rich_qa&utm_campaign=google_rich_qa)，但如果您仍然将它们分开，人们可能会更清楚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-04T09:59:41.213

在 Oracle 12c 中，连接将默认为 autocommit true。但是如果将自动提交设置为false，则需要在释放到连接池之前将自动提交重置为true。conn.setAutoCommit(autoCommit); 应该移动到 finally 块

# xna - XNA 中的 Z 顺序实现：循环重叠？

> ID：12402351
> 
> 赞同：2
> 
> 时间：2012-09-13T08:32:03.473
> 
> 标签：xna, z-index, overlap, overlapping, z-order

什么是实现 z 顺序系统的最佳方法，其中可能会出现以下情况：

> 有 4 个矩形：A、B、C 和 D。
> 
> 矩形 A 与矩形 B 重叠。
> 
> 矩形 B 与矩形 C 重叠。
> 
> 矩形 C 与矩形 D 重叠。
> 
> 矩形 D 与矩形 A 重叠。

就像一个纸箱。我相信它被称为循环重叠。

我知道这是一个奇怪的问题，但我只是想知道...... :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T08:58:53.280

关于纸板箱示例的问题是纸板的碎片没有完全对准相机。本质上，它是一个（相当平坦的）3D 结构，由相互重叠的略微倾斜的平面组成。就纸板箱而言，它们也不是平面的，而是略微弯曲以关闭盒子。在 MS-paint 伪透视图中：

![在此处输入图像描述](../Images/23c80fcbba5483d8501ff4e2b4cce303.png)

通过倾斜平面使它们重叠，这在 3D 中是可能的。这是[画家算法](http://en.wikipedia.org/wiki/Painter%27s_algorithm)失败的情况，也是[Z 缓冲区](http://en.wikipedia.org/wiki/Z-buffering)派上用场解决哪个对象实际遮挡另一个对象的原因之一。

如果您在纯 2D 世界中工作，并且无法倾斜平面以实现您所追求的伪 3D 效果，则需要细分平面并使用与您使用不同的 Z 水平绘制重叠部分盒子的其余部分 - 基本上是在做你自己的剪裁。

您也可以通过某种 Z 缓冲区技巧来模拟同样的事情，但本质上您应该使用 3D 结构来解决 3D 问题。

# php - Cpanel 如何每天 6 点做 cron 工作

> ID：12402352
> 
> 赞同：12
> 
> 时间：2012-09-13T08:32:03.080
> 
> 标签：php, cron

如何通过 Cpanel 每天 6 点做 cron 工作？我通过我的 cpanel 添加了 cron 作业作为这张图片

[http://i.imgur.com/vc1iv.jpg](https://i.imgur.com/vc1iv.jpg)

但是该脚本一天工作更多一次，我需要知道 cron 或我的脚本中的错误。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-13T08:32:58.043

由于那个星号，您的 cron 将在 6 点每分钟运行一次。

[cron 格式](http://www.nncron.ru/help/EN/working/cron-format.htm)：

```
* * * * * *
| | | | | | 
| | | | | +-- Year              (range: 1900-3000)
| | | | +---- Day of the Week   (range: 1-7, 1 standing for Monday)
| | | +------ Month of the Year (range: 1-12)
| | +-------- Day of the Month  (range: 1-31)
| +---------- Hour              (range: 0-23)
+------------ Minute            (range: 0-59)
Any of these 6 fields may be an asterisk (*). 
This would mean the entire range of possible values, i.e. each minute, each hour, etc. 
```

您应该输入第 0 分钟，因为您只需要运行一次（在 06:00）。

```
0 6 * * * 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:37:02.260

你应该改变你的cronjob，如下所示：

`0 6 * * * /usr/bin/php and so on`

这样，它将在 6 点钟运行。以您的方式，它将在 6 点开始运行，然后每分钟再次运行一个小时。

例如，如果您希望脚本在该月的第 3 天午夜运行，您应该编写：

`0 0 3 * * /usr/bin/php and so on`

如果您在前两个字段中留下星号，它将运行一整天。

看看[手册页](http://www.manpagez.com/man/5/crontab/)。一些示例可能非常有用，即带有`@daily`宏的示例。

# asp.net - 这是正在使用的代码...但我想将 html 部分作为电子邮件发送。

> ID：12402355
> 
> 赞同：0
> 
> 时间：2012-09-13T08:32:15.483
> 
> 标签：asp.net, email

我已将 aspx 页面转换为 html 并将其存储在 var myPageHTML 中。这是正在使用的代码...但我想将 html 部分作为电子邮件作为附件或作为邮件正文发送。请帮忙。

```
 //this method on providing the url of the webpage copies the image of that webpage.

    protected void Button1_Click(object sender, System.EventArgs e)
    {
{
    WebClient myClient = new WebClient();
    string myPageHTML = null;
    byte[] requestHTML; 
    // Gets the url of the page
    string currentPageUrl = Request.Url.ToString();

    UTF8Encoding utf8 = new UTF8Encoding();

    // by setting currentPageUrl to www.yahoo.com it will fetch the source (html) 
    // of the yahoo.com and put it in the myPageHTML variable. 

   // currentPageUrl = "http://www.yahoo.com"; 

    requestHTML = myClient.DownloadData("http://localhost:31788");

    myPageHTML = utf8.GetString(requestHTML); 

    Response.Write();

     try
        {
             SendMail();
        }
        catch (Exception) { }
    }

protected void SendMail()
    {
        var userName = " from email";

        var toAddress = YourEmail.Text.ToString();

        const string Password = "password";

        string subject = YourSubject.Text.ToString();
        string body = "From: " + YourName.Text + "\n";
        body += "Email: " + YourEmail.Text + "\n";
        body += "Subject: " + YourSubject.Text + "\n";
        body += "Question: \n" + Comments.Text + "\n";

        var smtp = new System.Net.Mail.SmtpClient();
        {
            smtp.Host = "10.238.52.880";
            smtp.Port = 25;
            smtp.EnableSsl = false;
            smtp.DeliveryMethod = System.Net.Mail.SmtpDeliveryMethod.Network;
            smtp.Credentials = new NetworkCredential(userName, Password);
            smtp.Timeout = 20000;
        }
        smtp.Send(userName, toAddress, subject, body);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:50:39.140

我相信您应该查看以下链接以了解邮件发送。

[http://csharp.net-informations.com/communications/csharp-email-attachment.htm](http://csharp.net-informations.com/communications/csharp-email-attachment.htm)

[http://www.codeproject.com/Articles/10828/Sending-Email-with-attachment-in-ASP-NET-using-SMT](http://www.codeproject.com/Articles/10828/Sending-Email-with-attachment-in-ASP-NET-using-SMT)

您还必须选中[在运行时生成 HTML 文件并作为电子邮件附件发送](https://stackoverflow.com/questions/9176859/generate-html-file-at-runtime-and-send-as-email-attachment)以生成 HTML

快乐编码！

# symfony - 在 Symfony2 中上传文件翻译文本

> ID：12402360
> 
> 赞同：0
> 
> 时间：2012-09-13T08:32:36.267
> 
> 标签：symfony, symfony-2.1

我在上传输入表单小部件中找不到字符串“选择文件”和“未选择文件”，所以我可以翻译它们。它们位于哪里？还是它们嵌入到 php 中而不是 symfony2 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:36:43.783

这些文本是由浏览器定义的，而不是由 PHP 或 Symfony 定义的。您还会注意到此小部件在不同浏览器和不同操作系统中的显示方式不同。无法更改此小部件中显示的文本。也不可能更改小部件的设计。大多数 CSS 属性不会对`<input type="file">`.

你唯一能做的就是实现一个自定义的 JavaScript 上传器，但这可能只适用于现代浏览器。我个人从来没有这样做过，但是快速的谷歌搜索带来了[这个页面](http://www.queness.com/post/11434/7-javascript-ajax-file-upload-plugins)，其中包含 7 个不同的 JavaScript 插件来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:56:39.417

正如@Florian 所说，这些文本由浏览器输出，您无法更改或设置它们的样式。您可以使用 javascript 上传器，但在大多数情况下这可能是多余的。但是有一个“hack”，您可以使用它在标准文件上传之上覆盖您自己的样式文件上传输入，[这里](http://www.quirksmode.org/dom/inputfile.html)有解释。它需要 javascript 才能运行，但好处是，如果 javascript 不可用，它只会默认为您的标准文件输入。

# math - 在 Scilab 中求解线性方程组

> ID：12402363
> 
> 赞同：1
> 
> 时间：2012-09-13T08:32:49.033
> 
> 标签：math, scilab

我想解决以下系统，其中, , ,和,`Ax=b`的尺寸。在 Scilab 下解决后，我发现我的向量 x 的某些分量很复杂，我觉得很奇怪，因为我被告知向量必须是真实的。你怎么解释？`A``m``n` `(m>n)``b` `m``1``x` `n``1``x`

这是我的代码：

```
function [x] = sys_()
    [fid1,err1] = mopen("D:\Documents\sys_surdet\Donnees_test_A.txt","r");
    [fid2,err2] = mopen("D:\Documents\sys_surdet\Donnees_test_B.txt","r");
    A = mfscanf(-1,fid1,'%f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f');
    b = mfscanf(-1,fid2,'%f');
    A=10^(-A/10);
    b=10^(b/10);
    col = size(A);
    j = zeros(col(1,1),1);
    x = zeros(col(1,2),1);
    if rank(A)==col(1,2) then
        x=(A'*A)\(A'*b);
    else
        x=-1;
    end
    mclose(fid1);
    mclose(fid2);
endfunction 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T19:16:36.990

线条

```
A=10^(-A/10);

b=10^(b/10); 
```

似乎正在将数据从分贝转换回标准单位。这与 Matlab 等类似，一次在整个向量或矩阵上完成。您是否确认此时 A 和 b 不是复数值？

```
x=(A'*A)\\(A'*b); 
```

这是用于求解方程组多于变量的方程组的标准正规方程。它（除其他外）是最小二乘解 x。在 SCILAB 中，您只需

```
x=A\b; 
```

这通常与解决方案不同

```
x=pinv(A)*b; 
```

您的方程组可能在数值上接近奇异值（检查接近 0 的奇异值），或者可能没有解。

在 SCILAB 中，您可以通过以下方式获取有关您的方程组的更多信息

```
cond(A'*A) 
```

或者

```
[x,kerA]=linsolve(A,-b); 
```

有关更多详细信息，请参阅有关线性代数的 SCILAB 帮助部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T12:29:22.683

I have no idea what these are about:

```
A=10^(-A/10);
b=10^(b/10); 
```

I'd solve this either by premultiplying both sides by A transpose and using LU decomposition and back substitution to solve for x (linear least squares) or Singular Value Decomposition (SVD).

# sql - 如何在没有任何备份的情况下将 sql server 数据库从一台服务器复制到另一台服务器

> ID：12402367
> 
> 赞同：25
> 
> 时间：2012-09-13T08:32:56.687
> 
> 标签：sql, database, sql-server-2008

我有两台机器，A 和 B。在我的机器 A 中，我有带有一些数据库的 SQL 服务器。我需要将数据库从机器 A 复制到 B 而不进行任何备份。我怎么做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-13T08:38:56.223

您可以使用 SQL Server Management Studio 中的复制数据库功能。

右键单击数据库，选择“任务”、“复制数据库”。如果可以使数据库脱机，也可以选择分离它，将文件复制到新服务器，然后重新附加数据库。

另请参阅 Microsoft 文档：[http ://technet.microsoft.com/en-us/library/ms188664.aspx](http://technet.microsoft.com/en-us/library/ms188664.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-13T13:52:01.537

这是仅当您可以直接访问两台机器时才能使用的另一种方法。

在源机器中：
1\. 打开 Sql Server Management Studio(SSMS)
2\. 右键单击​​要复制的数据库
3\. 转到属性
4\. 在左侧菜单中选择文件
5\. 滚动到右侧大多数列，您将找到文件名和路径数据库文件（注意此路径和列表中所有条目的文件名）
6\. 关闭属性窗口
7\. 再次右键单击数据库
8\. 单击分离
9\. 转到您在步骤 5 中记下的路径
10\. 复制所有您在步骤 5
中记下的文件 11\. 将其粘贴到 Target macine 的文件夹中
12\. 再次转到 SSMS 并右键单击 Database 文件夹
13\. 单击附加
14\. 单击添加并提供您在步骤 5 中记下的 .mdf 文件的路径

在目标机器
上 1\. 转到 SSMS 并右键单击数据库文件夹
2\. 单击附加
3\. 单击添加并提供路径您从源计算机复制到目标计算机的 .mdf 文件。

**编辑**
您可以创建一个链接服务器（参考： http: [//msdn.microsoft.com/en-us/library/aa213778%28SQL.80%29.aspx](http://msdn.microsoft.com/en-us/library/aa213778%28SQL.80%29.aspx)）并使用跨服务器查询将数据插入目标数据库，例如

```
Select * Into Servername.DatabaseName.SchemaName.TableName From SourceSchemaName.Tablename 
```

您不需要对每个对象都执行此操作，您可以使用游标对数据库中存在的所有对象执行此操作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-24T11:53:15.333

刚刚使用[http://dbcopytool.codeplex.com/](http://dbcopytool.codeplex.com/)的免费工具将实时数据库从SQL 2005复制到SQL 2012。在第二个标签页中输入所有信息后，可以配置第一个标签页并且一切正常没有问题。

# javascript - PhoneGap TabBar 自定义字体、背景图案

> ID：12402369
> 
> 赞同：0
> 
> 时间：2012-09-13T08:33:10.053
> 
> 标签：javascript, ios, cordova

我正在尝试为我的应用程序定制标签栏界面，是否可以更改字体、字体大小、放置自定义背景图案图像？

我真的需要更改它，以便它可以满足我的应用程序需求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T09:49:53.047

我是标签栏插件（[GitHub 上的 repo](https://github.com/AndiDog/phonegap-plugins)）的作者。它还不支持更改背景图像或字体，但实现这一点应该不是什么大问题。我会把它放在愿望清单上，但目前我没有时间。如果您想同时实现它，请查看[选项卡栏的 setBackgroundImage](https://stackoverflow.com/a/7801253/245706)方法并在插件代码中搜索`selectedImageTintColorRgba`以查看您必须在哪里实现其他选项。

# java - 您如何测试 Spring-Data JPA 存储库的 save() 操作？

> ID：12402371
> 
> 赞同：2
> 
> 时间：2012-09-13T08:33:23.113
> 
> 标签：java, spring, hibernate, spring-data

我刚刚开始学习 JPA，并且正在使用 Spring-Data 和 Hibernate。我看起来一切正常，我想测试底层数据库以确保 JPA/Hibernate 正在做我认为应该做的事情。但是，每当我对实体执行 save() 时，Hibernate 不会像以前的基本 Hibernate 那样更新主键（自动生成）。id 始终为 0，即使我知道插入语句已成功生成并可能发送到数据库。

保存时如何让 Spring-Data/JPA 更新实体的主键？我正在使用 AbstractTransactionalJUnit4SpringContextTests。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:07:48.370

您必须使用 save() 操作的返回值

```
person = repo.save(person); 
```

# android - 资源大小类别（正常/大） - 我如何避免重复

> ID：12402372
> 
> 赞同：3
> 
> 时间：2012-09-13T08:33:24.440
> 
> 标签：android, android-resources

我有一个专门用于`layout-normal-land`普通横向屏幕的布局文件，对于我想使用默认`layout`文件夹的所有其他屏幕尺寸和方向 -

但是，高于正常的屏幕尺寸现在将`normal-land`用作最适合的资源，而不是回退到默认值。

我可以将资源添加到其中`layout-large-land`，但这意味着（因为我想将相同的布局文件用于所有尺寸的纵向屏幕）我还必须制作布局文件的副本`layout`。

有人能告诉我如何绕过复制这个文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:43:34.027

我希望这不是最好的情况：

使用@PadmaKumar 的评论，我使用[layout-alias](http://developer.android.com/training/multiscreen/screensizes.html#TaskUseAliasFilters)来“覆盖”用于在`default`和`large-land`实例中加载资源的 id：

我有这个结构：

```
layout/
    fragment_layout_default.xml
layout-normal-land/
    fragment_layout.xml
values/
    layout.xml
values-large-land/
    layout.xml 
```

其中 layout.xml 的内容`values`包含`values-large-land`：

@layout/fragment_main_menu_default

这阻止了我重复代码，但似乎仍然有点...... -ick-

# php - 如何在 Symfony2 中设置密码长度限制？

> ID：12402378
> 
> 赞同：0
> 
> 时间：2012-09-13T08:33:47.857
> 
> 标签：php, symfony

我尝试过，`@Assert\MinLength`但它似乎在对密码进行编码后进行检查，因为它在任何情况下都足够长。如何在编码之前放置约束？

我想不出比`strlen`在绑定注册表后计算符号数量更好的方法，但我认为这不是一个好方法。而且我也不确定这是否会起作用，我不确定编码何时完成。

任何建议将不胜感激！先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:51:37.357

问题是您将一个字段用于两个目的：以纯文本和编码形式存储密码。您需要的是每个目的的字段：

```
use Symfony\Component\Validator\Constraints\NotBlank;
use Symfony\Component\Validator\Constraints\MinLength;
use Doctrine\ORM\Mapping\Column;

class User 
{
    /**
     * @NotBlank
     * @MinLength(6)
     *
     * @var string
     */
    private $plainPassword;

    /**
     * @Column
     *
     * @var string
     */
    private $password;
} 
```

只有该`$password`字段被持久化到数据库中，并且它不会显示在表单中，因此用户无法对其进行编辑。

你还需要一个 Doctrine 事件监听器——或者其他一些代码——来检查它`$plainPassword`是否不为空，如果不为空，则编码它的值并将其放入`$password`.

使用该`security.encoder_factory`服务获取您在安全配置中设置的编码器，并使用它对密码进行编码。另外，检查我的[ElnurBlowfishPasswordEncoderBundle](https://github.com/elnur/ElnurBlowfishPasswordEncoderBundle)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:51:00.277

您不应该在密码设置器中自己编码密码。取而代之的是使用一些编码器（您甚至可以编写自己的编码器），并在验证表单后对密码进行编码。

以下是如何使用编码器的示例：

[http://symfony.com/doc/current/book/security.html#encoding-the-user-s-password](http://symfony.com/doc/current/book/security.html#encoding-the-user-s-password)

# c# - 如何忽略 XML 中的空格和换行符

> ID：12402385
> 
> 赞同：3
> 
> 时间：2012-09-13T08:34:10.120
> 
> 标签：c#, xml, xml-parsing

我有一个 XML 文件，我将在其中循环遍历节点并获取属性的值。

但除了属性值，我还在输出中得到了一些符号（矩形框）。如果我尝试删除标签之间的空格，那很好。

在下面的 XML 中，我得到了标题的内部文本。

```
 <catalog>
  <book id="bk101">
   <details>
    <title>XML Developer's Guide</title>
   </details>
  </book>
  </catalog> 
```

如果我的输入是这样的就好了：

```
 <catalog>
   <book id="bk101">
   <details><title>XML Developer's Guide</title></details>
   </book>
  </catalog> 
```

我正在使用 C#

```
 foreach (XmlNode catalogid in Xmlcontent.GetElementsByTagName("catalog"))
      {
        foreach (XmlNode bookid in catalogid)
                    {
                        foreach (XmlNode titleid in bookid)
                        {
                       string booktitle = titleid.InnerText.ToString();
                        }
                     }
      } 
```

请建议我如何忽略输出中的空格和新行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:04:26.007

您可以根据`PreserveWhitespace` 属性尝试使用此代码

```
XmlDocument doc = new XmlDocument();
....
....
doc.PreserveWhitespace = false; 
```

链接：http: [//msdn.microsoft.com/en-us/library/system.xml.xmldocument.preservewhitespace.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.preservewhitespace.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T21:11:09.800

您是否仅限于使用 .Net 2.0？如果是这样，请忽略以下内容。

如果您可以使用 .Net 3.5，那么以下 Linq-To-Xml 将为您工作。

1.  首先加载文件
2.  像你一样获取所有目录元素
3.  然后选择目录中的所有书籍
4.  获取书籍 ID 和标题
5.  将所有目录中的所有书籍作为数组分配到一个变量书籍中。

.

```
XElement root = XElement.Load(file);
var catalogs = root.Descendants("catalog");
var books = catalogs.SelectMany(c => 
    c.Descendants("book").Select(book => new
    {
        Id = book.Attribute("id").Value,
        Title = book.Descendants("title").First().Value
    }))
    //.OrderBy(b => b.Title)  // sort by title or id if you'd like.
    .ToArray(); 
```

# wordpress - wordpress url结构

> ID：12402386
> 
> 赞同：0
> 
> 时间：2012-09-13T08:34:16.363
> 
> 标签：wordpress, url, categories

`example.com/category`当我打电话列出所有可用类别时，是否有可能在 wordpress 中。如果我像在我的示例中那样请求 url，我会得到一个 404 页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:47:09.980

我不确定是否有列出所有类别的默认链接。

但这并不意味着你不能自己做。在您的主题中创建一个新模板文件，将其命名为例如**category_list.php**并添加以下代码：

您可能需要稍微调整一下以显示您想要的方式。

```
<?php
/**
 * Template Name: Category listing
 * Description: list all the categories
 */

get_header(); ?>

    <div class="container">
        <?php
        $args=array(
            'orderby' => 'name',
            'order' => 'ASC'
        );
        $categories=get_categories($args);
        foreach($categories as $category):
            echo '<p>Category: <a href="' . get_category_link( $category->term_id ) . '" title="' . sprintf( __( "View all posts in %s" ), $category->name ) . '" ' . '>' . $category->name.'</a> </p> ';
            echo '<p> Description:'. $category->description . '</p>';
            echo '<p> Post Count: '. $category->count . '</p>';  
            echo '<hr />'; 
        endforeach;
        ?>
    </div>

<?php get_footer(); ?> 
```

然后转到页面 - >添加新的。将页面命名为“类别”，这样 url 将是`example.com/category`.

并在模板列表中选择您刚刚创建的模板。它将被命名为“类别列表”，您可以在上面的代码顶部的注释中看到。

# c - 比较两个文件c代码

> ID：12402391
> 
> 赞同：1
> 
> 时间：2012-09-13T08:34:39.650
> 
> 标签：c, file-io, compare

我需要逐行比较两个文件。其中一个文件在行尾有一个类似 ^M 的字符。我想在比较时排除它。我还需要找到匹配的行数。这是我的代码。如何添加该 ^M 以及在哪里增加行 contor？

```
int compareFile(FILE* file_compared, FILE* file_checked)
{
    bool diff = 0;
    int N = 65536;
    char* b1 = (char*) calloc (1, N+1);
    char* b2 = (char*) calloc (1, N+1);
    size_t s1, s2;

    do {
        s1 = fread(b1, 1, N, file_compared);
        s2 = fread(b2, 1, N, file_checked);

        if (s1 != s2 || memcmp(b1, b2, s1)) {
            diff = 1;
            break;
        }
      } while (!feof(file_compared) || !feof(file_checked));

    free(b1);
    free(b2);

    if (diff) return 0;
    else return 1;
}

void main(int argc, char *argv[] )
{
FILE *fpread, *fpread2;
  char filebuff[MAXLINE];
  char filebuff2[MAXLINE];
  int var = 0;
  int linecount = 0;
printf ("COMPARE RESULT %d \n",compareFile("file1","file2")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:39:46.577

您所看到`^M`的实际上是回车符（ASCII 13，C 语法`\r`）。比较文本文件时，最好不要关心使用的行终止模式，因为有几种（Unix、Windows 和 Mac 各有自己的）。

您可能应该将输入拆分为行，忽略使用的确切行终止，然后比较*行*。

**更新**编写一个函数，一次读取一个字符，当它到达任何有效的行终止序列时停止，并确保随着行的增长动态分配内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:43:37.827

一开始：

```
int diff = 0; 
```

增加计数器：

```
if (s1 != s2 || memcmp(b1, b2, s1)) {
    ++diff;
} 
```

最后就是这个：

```
return diff; 
```

你的功能也应该是：

```
int compareFile(char* fc_name,char* fk_name){
    /* Variable Declarations */
    FILE *file_compared = fopen(fc_name,"r");
    FILE *file_checked = fopen(fk_name,"r");
    if(file_compared == NULL || file_checked == NULL)
          return -1;
    /* .... */
} 
```

# android - android将XML视图转换为位图而不显示它

> ID：12402392
> 
> 赞同：8
> 
> 时间：2012-09-13T08:34:42.563
> 
> 标签：android, xml, bitmap

我正在尝试为我的地图集群设置视图。我正在从 XML 膨胀视图并根据集群大小设置文本，我想显示该视图。在下面的代码中，我得到一个空位图作为回报：

```
private Bitmap createClusterBitmap(int clusterSize) {
    View cluster = LayoutInflater.from(context).inflate(R.layout.map_cluster, null);        
    cluster.setText(String.valueOf(clusterSize));
    cluster.setDrawingCacheEnabled(true);
    cluster.buildDrawingCache(true);
    Bitmap bm = cluster.getDrawingCache();
    return bm;
} 
```

在下面的代码中，我在第四行得到空指针（布局参数）：

```
private Bitmap createClusterBitmap(int clusterSize) {
    View cluster = LayoutInflater.from(context).inflate(R.layout.map_cluster, null);
    TextView clusterSizeText = (TextView) cluster.findViewById(R.map.cluster);
    clusterSizeText.setText(String.valueOf(clusterSize));
    Bitmap clusterBitmap = Bitmap.createBitmap( cluster.getLayoutParams().width, cluster.getLayoutParams().height, Bitmap.Config.ARGB_8888);                
    Canvas clusterCanvas = new Canvas(clusterBitmap);
    cluster.layout(cluster.getLeft(), cluster.getTop(), cluster.getRight(), cluster.getBottom());
    cluster.draw(clusterCanvas);
    return clusterBitmap;
} 
```

当将其更改为以下代码时，我没有收到错误，但没有绘制任何内容：

```
private Bitmap createClusterBitmap(int clusterSize) {
    View cluster = LayoutInflater.from(context).inflate(R.layout.map_cluster, null);
    TextView clusterSizeText = (TextView) cluster.findViewById(R.map.cluster);
    clusterSizeText.setText(String.valueOf(clusterSize));
    Bitmap clusterBitmap = Bitmap.createBitmap( 50,50 , Bitmap.Config.ARGB_8888);                
    Canvas clusterCanvas = new Canvas(clusterBitmap);
    cluster.layout(50, 50, 50, 50;
    cluster.draw(clusterCanvas);
    return clusterBitmap;
} 
```

这是我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+map/cluster"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/map_pointer_cluster"
    android:gravity="center"
    android:orientation="vertical"
    android:textColor="@android:color/black"
    android:textSize="35dp"
    android:textStyle="bold" /> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-13T12:36:11.203

你`cluster.getLayoutParams()`的大概是`null`。首先，您需要测量膨胀视图的宽度/高度，然后分配给它。如下所示：

```
private Bitmap createClusterBitmap(int clusterSize) {
    View cluster = LayoutInflater.from(context).inflate(R.layout.map_cluster,
            null);

    TextView clusterSizeText = (TextView) cluster.findViewById(R.id.map_cluster_text);
    clusterSizeText.setText(String.valueOf(clusterSize));

    cluster.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED),
            MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
    cluster.layout(0, 0, cluster.getMeasuredWidth(),cluster.getMeasuredHeight());

    final Bitmap clusterBitmap = Bitmap.createBitmap(cluster.getMeasuredWidth(),
            cluster.getMeasuredHeight(), Bitmap.Config.ARGB_8888);

    Canvas canvas = new Canvas(clusterBitmap);
    cluster.draw(canvas);

    return clusterBitmap;
} 
```

# hadoop - 在 hadoop 多节点集群设置中创建从作业日志到 ${hadoop.tmp.dir} 的符号链接失败

> ID：12402396
> 
> 赞同：5
> 
> 时间：2012-09-13T08:35:04.083
> 
> 标签：hadoop, mapreduce, cluster-computing

当我在 3 节点集群 hadoop 中运行简单的 wordcount 示例时，出现以下错误。我检查了必要文件夹的所有写/读权限。此错误不会停止 mapreduce 作业，但所有工作负载都转到集群中的一台机器上，当任务到达时，其他两台机器会出现上述相同的错误。

```
12/09/13 09:38:37 INFO mapred.JobClient: Task Id : attempt_201209121718_0006_m_000008_0,Status : FAILED
java.lang.Throwable: Child Error
    at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:271)
Caused by: java.io.IOException: Creation of symlink from /hadoop/libexec/../logs/userlogs/job_201209121718_0006/attempt_201209121718_0006_m_000008_0 to /hadoop/hadoop-datastore
/mapred/local/userlogs/job_201209121718_0006/attempt_201209121718_0006_m_000008_0 failed.
    at org.apache.hadoop.mapred.TaskLog.createTaskAttemptLogDir(TaskLog.java:110)
    at org.apache.hadoop.mapred.DefaultTaskController.createLogDir(DefaultTaskController.java:71)
    at org.apache.hadoop.mapred.TaskRunner.prepareLogFiles(TaskRunner.java:316)
    at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:228)

12/09/13 09:38:37 WARN mapred.JobClient: Error reading task outputhttp://peter:50060/tasklog?plaintext=true&attemptid=attempt_201209121718_0006_m_000008_0&filter=stdout
12/09/13 09:38:37 WARN mapred.JobClient: Error reading task outputhttp://peter:50060/tasklog?plaintext=true&attemptid=attempt_201209121718_0006_m_000008_0&filter=stderr 
```

那个错误是关于什么的？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-11-29T03:47:35.543

java.lang.Throwable：子错误

org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:271)

似乎为任务跟踪器分配的内存超过了节点的实际内存。检查此链接[说明](https://github.com/wbsg/ldif/wiki/Hadoop-troubleshooting)

# c - GTK+ system(3) 线程调用

> ID：12402400
> 
> 赞同：1
> 
> 时间：2012-09-13T08:35:18.637
> 
> 标签：c, linux, multithreading, gtk, system

我用 GTK+-2.0 开发了一个简单的应用程序。我的问题是如何在不冻结程序的情况下运行 bash 脚本（例如使用 system(3)）？我试图实现一个线程系统，但它没有奏效。

这是我的代码片段，我尽量简化。问候

```
int main(int argc,
    char * argv[])
{
    GtkWidget *button;

    /* init threads */  
    g_thread_init(NULL);
    gdk_threads_init();
    gtk_init(&argc,&argv);

    window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
    ...

    button = gtk_button_new_with_label("Format");
    g_signal_connect(button,"clicked",G_CALLBACK(callback),(gpointer)"button 1");
    gtk_table_attach_defaults (GTK_TABLE (table), button, 0, 1, 0, 1);
    gtk_widget_show(button);

        gdk_threads_enter();
    gtk_main();
    gdk_threads_leave();

    return 0;

}

/* Our callback.
* The data passed to this function is printed to stdout */
static void callback( GtkWidget *widget,
                  gpointer   data )
{
    int sTemp=0;
    GThread   *thread;
        GError    *error = NULL;
        g_print ("Hello again - %s was pressed\n", (char *) data);
        sTemp=ChecckIfFileExits("/dev/mmcblk0");
        if(sTemp)
        {
        gtk_label_set_text(GTK_LABEL(label),"Formatting");
        thread = g_thread_create( PFormatThrad, (gpointer)widget,
                          FALSE, &error );
        if( ! thread )
        {
            g_print( "Error: %s\n", error->message );

        }

    }
    else
    {
        g_print ("SD/MMC not found\n");
    }
}

static gpointer
PFormatThrad( gpointer data )
{

        sleep( 3 );

        gdk_threads_enter();

        system("./mkcard.txt /dev/mmcblk0");
    gtk_widget_set_sensitive(selectImageButton,TRUE);
    gtk_label_set_text(GTK_LABEL(label),"Format tamamlandı\nİmajı Seçin");
        gdk_threads_leave();

    return( NULL );
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T08:44:13.287

不要`fork()`直接打电话。

在 GTK+ 应用程序中，最好使用 glib 的[进程生成 API:s](http://developer.gnome.org/glib/stable/glib-Spawning-Processes.html)。例如，`[g_spawn_async_with_pipes()](http://developer.gnome.org/glib/stable/glib-Spawning-Processes.html#g-spawn-async-with-pipes)`如果您想读取子进程的输出，该函数非常方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T08:40:00.103

尝试分叉您的进程并在分叉的进程中启动 bash 脚本。

```
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>

int main ()
{
   int pid;

   pid = fork();

   if (pid == 0) {
      // Call bash script
   } else if (pid > 0) {
     // Your parent process
   }
   return 0;
} 
```

# python - Python-如何使用while循环返回最长的代码行

> ID：12402410
> 
> 赞同：2
> 
> 时间：2012-09-13T08:35:40.907
> 
> 标签：python, loops, max

我 3 周前刚开始学习 python，如果这真的很基础，我很抱歉。我需要打开一个 .txt 文件并打印文件中最长的代码行的长度。我刚刚创建了一个名为 myfile 的随机文件并将其保存到我的桌面。

```
myfile= open('myfile', 'r')
line= myfile.readlines()
len(max(line))-1 
#the (the "-1" is to remove the /n) 
```

这段代码正确吗？我把它放在解释器中，它似乎工作正常。

但我弄错了，因为显然我应该使用 while 循环。现在我想弄清楚如何把它放在一个while循环中。我已经阅读了 python.org 上的内容，观看了 youtube 上的视频并浏览了这个网站。我只是不明白。给出的示例如下：

```
import os
du=os.popen('du/urs/local')
while 1:
   line= du.readline()
   if not line:
        break
   if list(line).count('/')==3:
         print line, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T08:43:03.397

```
print max([len(line) for line in file(filename).readlines()]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T09:13:35.737

拿走你所拥有的，去掉你不需要的部分

```
myfile = open('myfile', 'r')
max_len = 0
while 1:
    line = myfile.readline()
    if not line:
        break
    if len(line) # ... somethin
        # something 
```

请注意，这是循环文件的糟糕方法。它依赖于文件末尾有一个空行。但功课就是功课...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T08:49:33.490

```
max(['b','aaa']) is 'b' 
```

这个字典顺序不是你想要最大化的，你可以使用`key`标志来选择一个不同的函数来最大化，比如`len`.

```
max(['b','aaa'], key=len) is 'aaa' 
```

所以解决方案可能是：`len ( max(['b','aaa'], key=len) is 'aaa' )`.

更优雅的解决方案是使用列表推导：

```
max ( len(line)-1 for line in myfile.readlines() ) 
```

.

顺便说一句，您应该使用 with 语句附上打开文件，这将担心在缩进块之后关闭文件：

```
with open('myfile', 'r') as mf:
    print max ( len(line)-1 for line in mf.readlines() ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T08:50:04.210

正如其他人所提到的，您需要找到具有最大长度的行，这意味着给`max()`函数一个`key=`参数以从您传递的列表中的每一行中提取它。

同样，在 while 循环中，您需要读取每一行并查看其长度是否大于您迄今为止看到的最长的，您可以将其存储在一个单独的变量中并在循环之前初始化为 0。

顺便说一句，您不想打开文件，`os.popen()`如第二个示例所示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T09:51:49.083

我认为如果我们保持简单的话会更容易理解：

```
max_len = -1 # Nothing was read so far
with open("filename.txt", "r") as f:   # Opens the file and magically closes at the end
  for line in f:
    max_len = max(max_len, len(line))
print max_len 
```

因为这是家庭作业......我会问自己是否应该计算换行符。如果您需要切掉最后一个字符，请将 len(line) 更改为 len(line[:-1])。

如果你必须使用while，试试这个：

```
max_len = -1 # Nothing was read
with open("t.txt", "r") as f:   # Opens the file
   while True:
      line = f.readline()
      if(len(line)==0):
         break
      max_len = max(max_len, len(line[:-1]))
print max_len 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-06T09:39:19.957

对于那些仍然需要的人。这是一个小功能，可以满足您的需求：

```
def get_longest_line(filename):
    length_lines_list = []
    open_file_name = open(filename, "r") 
    all_text = open_file_name.readlines()
    for line in all_text:
        length_lines_list.append(len(line))
    max_length_line = max(length_lines_list)
    for line in all_text:
        if len(line) == max_length_line:
            return line.strip()
    open_file_name.close() 
```

# c# - 随时间变化的数据聚合，当时间可变时

> ID：12402411
> 
> 赞同：2
> 
> 时间：2012-09-13T08:35:43.177
> 
> 标签：c#, aggregation, modulo

我正在开发一个应用程序，该应用程序计算产品在指定时间段（期限）内获得的共享。

计算完成后，我有必要根据预定义的审查期将数据汇总到组中（例如，如果获得产品 100% 所有权所需的时间是 25 年，审查期值为 5年，我将有 5 组数据聚合协议）。

我通过遍历我的计算结果集来执行聚合：

```
if (Year% ReviewPeriod == 0)
            {
                // Perform Aggregations
            } 
```

这在大多数情况下都可以正常工作。但是，我确实有许多情况下产品在期限结束前达到 100% 所有权。

我需要做的是聚合基于 ReviewPeriod 变量执行的计算，但如果计算中的最终值数不等于审查期，则根据剩余项目数聚合项目。

例如，给定 22 年的期限，数据将根据 Review Period 变量进行汇总，但如果有剩余部分，则应根据剩余部分的值汇总剩余部分。

工作示例

第 0 - 5 年 = 5 个聚合

第 6 年 - 10 年 = 5 次聚合

11-15 年级 = 5 次聚合

16 - 20 年 = 5 个聚合

21 - 22 年 = 2 个聚合

正如我所描述的那样，任何人都可以帮助我汇总数据的逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T00:56:47.283

假设此数据在内存中（因为您没有另外指定），那么您可以使用 Linq 中的 GroupBy 函数：

```
struct YearValue 
{
    public int Year, Value; 
}

static void Main()
{
    // Create some data, hopefully representative of what you are dealing with...
    Random r = new Random();
    YearValue[] dataValues = new YearValue[22];
    for (int i = 0; i < dataValues.Length; i++)
        dataValues[i] = new YearValue {Year = i, Value = r.Next(200)};

    // Average of values across 'ReviewPeriod' of five:
    foreach (var item in dataValues.AsEnumerable().GroupBy(i => i.Year / 5))
    {
        YearValue[] items = item.ToArray();
        Console.WriteLine("Group {0} had {1} item(s) averaging {2}",
                          item.Key,
                          items.Length,
                          items.Average(i => i.Value)
            );
    }
} 
```

该程序然后输出以下文本：

```
Group 0 had 5 item(s) averaging 143.6
Group 1 had 5 item(s) averaging 120.4
Group 2 had 5 item(s) averaging 83
Group 3 had 5 item(s) averaging 145.2
Group 4 had 2 item(s) averaging 98.5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T12:39:28.620

我认为我的建议不值得 300rep 赏金，要么我误解了你的问题，要么你超过了赏金..

您计算最终聚合的现有代码是否运行良好？如果是这样，那么要确定范围你可以只使用模（％）和简单的数学：

```
int minYear = ...the first year // inclusive, i.e. 1970
int maxYear = ...the last year // inclusive, i.e. 2012

int span = maxYear - minYear + 1; // 1970..2012->43, 2001..2006->6

int fullFives = span / 5; // 1970..2012->8, 2001..2006->1
int remainder = span % 5; // 2001..2006->3, 2001..2006->1

for(int i=0; i<fullFives; ++i)
{
    int yearFrom = minYear + 5*i
    int yearTo = minYear + 5*(i+1) - 1

    // 1970..2012 -> 1970-1974, 1975-1979,1980-1984,1985-1989,1990-1994,1995-1999,2000-2004,2005-2009
    // 2001..2006 -> 2001-2005

    aggregate(yearFrom, yearTo);
}

if(remainder > 0)
{
    int yearFrom = minYear + 5*fullFives
    int yearTo = minYear + maxYear

    // 1970..2012 -> 2010-2012
    // 2001..2006 -> 2006-2006

    aggregate(yearFrom, yearTo);
} 
```

这是“凭空”写的，我没有检查/编译它 - 这只是为了勾勒这个想法。

注意：您说过一切正常，但有时“产品在期限结束前达到 100% 所有权的一些情况”。- 这表明您宁愿在计算中出现错误，而不是在循环中。如果错误出现在循环或年份边界检测中，那么可能几乎所有错误都将关闭。如果不透露更多的计算代码，很难说。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T12:40:51.990

您还没有真正提供足够的代码来继续。希望您应该能够使用它，但是您的循环当前已设置。它将 mod 值“泄漏”到循环外部；循环结束后，您可以检查最终的 mod 值以查看剩余的聚合数。

```
int modValue = 0;
for //foreach/while/... - your loop here
{
    ...
    modValue = Year % ReviewPeriod;
    if (modValue == 0)
    {
        // Perform Aggregations
    }  
    ...
} // end of your loop

if (modValue != 0)
{
    // Perform final aggregation. There are modValue items to aggregate.
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T12:45:14.527

代码示例将在第 0 年、第 5 年、第 10 年等触发，而不是每年触发。

如果您只需要在该代码触发时汇总年数，并且可以在产品提前达到 100% 所有权时提前设置该期限，我认为这会起作用：

```
 int term = 22;
        int reviewperiod = 5;

        for (int year = 0; year < term; year++)
        {
            if (year % reviewperiod == 0)
            {
                var endyear = Math.Min(year + reviewperiod, term);
                Console.WriteLine("Aggregate years {0} to {1}, {2} Aggregations ", year, endyear, endyear - year);
            }
        } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-18T12:36:12.477

可能最简单的方法是：

```
for ( int year = 0; year <= max_year; year++ ) {
    if ( year % reviewPeriod == 0 ) {
        // start a new aggregation
    }
    // add year to current aggregation
} 
```

您可以保留一个聚合列表并在每个周期开始时添加一个新的。

这是一个仅将年份分组到列表中的工作示例：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Aggregations
{
    class Program
    {
        static void Main(string[] args)
        {
            int maxYear = 22;
            int period = 5;
            int year = 1985;

            List<List<int>> aggregations = new List<List<int>>();
            int i = -1;
            for (int y = 0; y <= maxYear; y++)
            {
                if (y % period == 0)
                {
                    aggregations.Add(new List<int>());
                    i++;
                }
                aggregations.ElementAt(i).Add(year);
                year++;
            }
            foreach ( List<int> l in aggregations )
            {
                foreach (int yy in l)
                {
                    Console.Write(yy + " ");
                }
                Console.WriteLine();
            }
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-18T13:00:56.433

你有没有想过像

```
private int reviewPeriod = 5;

public void Aggregate(int term)
{
    Enumerable.Range(0, term)
        .ToList()
        .Foreach(this.AggregateYear);
} 
```

when`this.AggregateYear`定义如下

```
public void AggregateYear(int year)
{
    var currentRemainder = year % this.reviewPeriod;
    var aggregatePeriod = (currentRemainder == 0)
        ? this.reviewPeriod
        : currentRemainder;
    this.PerformAggregation(aggregatePeriod);
} 
```

并`this.PerformAggregation`定义如下

```
private void PerformAggregation(int aggregatePeriod)
{
    //...
} 
```

# php - 用给定的索引替换php数组中的值

> ID：12402416
> 
> 赞同：4
> 
> 时间：2012-09-13T08:35:58.880
> 
> 标签：php, arrays, replace

我在用精确给定的索引替换数组中的值时遇到问题。确切地说，我想用一个新数字替换 array[2] 中的一个字符串，但我不知道。所以请看看我的资源：

```
pos:0 //position of index in array 
id:498 //id of a field
new:6300 //new value to replace in an array
cost:6200-5200-4600-5600-4100 //the array 
```

从上面，我想用“new”中的新字符串替换“cost”中的字符串索引“0”，所以预期的结果应该是：

```
6300-5200-4600-5600-4100 
```

我试图到处搜索，但除了 array_search 之外什么都没有返回——这不是我想要的。请指教。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T08:39:28.443

```
$pos = 0;                            // position
$new = 6300;                         // new value
$cost = '6200-5200-4600-5600-4100';  // string
$cost = explode('-', $cost);         // make it array
$cost[$pos] = $new;                  // change the position $pos with $new
$cost = implode('-', $cost);         // return new $cost
// 6300-5200-4600-5600-4100 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T08:41:54.020

很简单：

```
<?php

$array = array(
    6200, 
    5200, 
    4600, 
    5600, 
    4100
);

$pos = 0;
$new = 6300;

$array[$pos] = $new;

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T08:39:12.310

尝试这个：

```
$the_array[$pos] = $new 
```

# jquery - 并排使用telerik扩展和剑道ui时的Jquery冲突

> ID：12402418
> 
> 赞同：3
> 
> 时间：2012-09-13T08:36:05.050
> 
> 标签：jquery, asp.net-mvc, telerik, kendo-ui

我正在开发一个 MVC 3.0 剃须刀应用程序。在我的项目中，我们使用的是 jQuery 版本 1.7.1。对于telerik 扩展，我们使用jquery ver 1.6.4。我们还在项目的某些部分使用了 Kendo UI 网格，这需要 jQuery 版本 1.7.1。我们按以下顺序将脚本放置在布局页面中。

```
 <script src="@Url.Content("~/Scripts/jquery-1.7.1.js")" type="text/javascript"></script>
 <script src="@Url.Content("~/Scripts/kendo.all.min.js")" type="text/javascript"></script>
 <script src="@Url.Content("~/Scripts/kendo.aspnetmvc.min.js")" type="text/javascript"></script>
   @(Html.Telerik().ScriptRegistrar().jQuery(false)
    .DefaultGroup(
        grp =>
        {
            grp.Add("jquery-1.6.4.js");
            grp.Add("jquery-ui-1.8.17.custom.js");
            grp.Add("telerik.common.min.js");
            grp.Add("telerik.upload.min.js");
            grp.Add("telerik.window.min.js");
            grp.Add("telerik.draganddrop.min.js");
            grp.Add("telerik.grid.min.js");
            grp.Add("telerik.grid.editing.min.js");
            grp.Add("telerik.grid.filtering.min.js");
            grp.Add("telerik.grid.reordering.min.js");
            grp.Add("telerik.grid.resizing.min.js");

            grp.Add("telerik.datetimepicker.min.js");

            grp.Add("telerik.treeview.min.js");

        })) 
```

在这种情况下，所有 Telerik 扩展控件和相关的客户端事件（例如：Telerik 面板栏的 OnSelect 事件）都将起作用，但 kendo ui 网格控件不加载数据。但是如果我们在 Html.Telerik().ScriptRegistrar() 中注释 jQuery 版本 1.6.4，kendo ui 将加载数据，但 Telerik 扩展客户端事件将不起作用。请提供解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:38:47.723

首先 - 您不能在同一页面上使用多个 jQuery 并期望小部件能够工作。每次加载 jQuery 时，数据和事件都会从内存中清除，这意味着已注册的小部件将不再可用。

我建议您将您的 MVC 扩展（经典扩展）更新到最新版本，我可以在演示站点中看到它使用 jQuery 1.7.1。此外，KendoUI 框架的当前版本是 1.7.1 版本，但还不是 1.8+。

# mysql - 如何在 MySQL 数据库中存储一对多关系？

> ID：12402422
> 
> 赞同：17
> 
> 时间：2012-09-13T08:36:20.497
> 
> 标签：mysql, sql, database, join, relational-database

我正在制作一个网站，我需要在我的数据库中存储随机数量的数据。

例如，用户 john 可能有一个电话号码，而 jack 可以有 3 个。

我需要能够为每个用户存储无限数量的值。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-13T08:43:00.917

您为电话号码创建一个单独的表（即 1:M 关系）。

```
create table `users` (
  `id` int unsigned not null auto_increment,
  `name` varchar(100) not null,
  primary key(`id`)
);

create table `phone_numbers` (
  `id` int unsigned not null auto_increment,
  `user_id` int unsigned not null,
  `phone_number` varchar(25) not null,
  index pn_user_index(`user_id`),
  foreign key (`user_id`) references users(`id`) on delete cascade,
  primary key(`id`)
); 
```

现在，您可以轻松地通过简单的加入获取用户的电话号码；

```
select
  pn.`phone_number`
from
  `users` as u,
  `phone_numbers` as pn
where
  u.`name`='John'
  and
  pn.`user_id`=u.`id` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:45:22.513

我认为您需要创建一个一对多的关系表。

您可以在此处查看更多信息：http: [//dev.mysql.com/doc/workbench/en/wb-relationship-tools.html](http://dev.mysql.com/doc/workbench/en/wb-relationship-tools.html)

# jquery - 带有 Struts 的 Jquery

> ID：12402425
> 
> 赞同：0
> 
> 时间：2012-09-13T08:36:41.983
> 
> 标签：jquery, struts2

我们可以直接在struts中使用jquery函数吗

```
$(document).ready(function(){
....................
...........
}); 
```

还是我们必须使用 jquery.jar 来遵循标准。我在谷歌上搜索了一个示例和教程，但找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:54:11.927

你可以按照你想要的方式使用它，虽然有一个带有 Jquery 的插件，如果你想使用那个插件，你需要在你的类路径中添加那个 jar，但是如果你想独立使用 Jquery，你可以使用它。

我已经成功地使用了很多项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T20:34:56.910

这是一个例子。您可以将其放在 .html 或 .jsp 中。首先，您需要像在代码中一样导入，然后使用 API。

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js">
</script>
<script>
$(document).ready(function(){
$("button").click(function(){
$("p").hide();
});
});
</script>
</head>

<body>
<h2>This is a heading</h2>
<p>This is a paragraph.</p>
<p>This is another paragraph.</p>
<button>Click me</button>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T12:52:15.623

是的，您可以直接使用它，前提是您在构建路径中添加了 struts2-jQuery jar 并`<sj:head />`在 HTML 标签下的 JSP中使用了`<head>`标签。

```
<%@ taglib prefix="sj" uri="/struts-jquery-tags"%> 
```

以及 head 标签下的以下代码。

```
<head>
<title>MY TITLE</title>
<sj:head />
</head> 
```

希望这可以帮助！

# objective-c - Xcode 仅在横向拍摄照片/视频

> ID：12402429
> 
> 赞同：0
> 
> 时间：2012-09-13T08:36:57.360
> 
> 标签：objective-c, ios

我如何确保当用户激活他的相机时，如果设备（iPhone/iPod/iPad）被保持为纵向，我想通知用户将设备旋转到横向并以横向拍摄照片/录制视频？

但是，应用程序（我所有的 UIViewControllers、UITableViewControllers 等）仅处于纵向模式，没有横向模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:47:38.573

在 iOS 6 中，自动旋转略有改变，但是，同样的方法仍然有效。

示例代码：

```
@implementation UIImagePickerController (noRotation)

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation /* iOS 5 */
{
    return UIInterfaceOrientationIsLandscape(toInterfaceOrientation);
}

- (NSUInteger)supportedInterfaceOrientations /* iOS 6 */
{
    return UIInterfaceOrientationMaskLandscape;
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:49:57.730

检查界面方向：

```
if (UIInterfaceOrientationIsPortrait([UIDevice currentDevice].orientation))
{
  // call methods to take picture
  ....
}
else
{
  // alert the user this device is not landscape mode
  ...
} 
```

# sharepoint - Sharepoint 2013 设备通道移动设备访问不同的母版页不起作用

> ID：12402436
> 
> 赞同：0
> 
> 时间：2012-09-13T08:37:33.220
> 
> 标签：sharepoint

我已经创建了设备通道，这样我就可以在使用移动设备访问时使用不同的母版页访问我的 sp2013 网站。但是当我访问该网站时，我仍然从不同的手机获得相同的母版页，这也是默认的母版页。

我做了以下事情：

> 1.  已创建设备通道（已创建 2 个设备通道）

![适用于所有手机](../Images/5d54b60d1ed764158101b59354b5b037.png)

![对于 IPAD-3](../Images/ce1b81543cf7bf8c106a64ed1713cc52.png)

> 现在我为移动设备应用了不同的母版页

![在此处输入图像描述](../Images/4262c54811f7b40556658cee3b768d8a.png)

我试图通过以下方式访问我的网站：

1.  索尼 Xperia Arc S (Android 4.1)
2.  平板电脑 3
3.  iphone IOS 4.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:28:12.457

Try using "iPad" as device inclusion rule. instead of full device name. It worked for me. for more info: [http://msdn.microsoft.com/en-us/library/jj862343.aspx](http://msdn.microsoft.com/en-us/library/jj862343.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:18:05.633

您是否确保在您尝试访问的站点的站点设置中禁用了“自动移动浏览器重定向”功能？

编辑：经过测试，我发现此功能仅适用于站点母版页。如果您的页面不是发布页面，那么它将采用为系统母版页设置的母版页。不幸的是，唯一可用的设备频道是“所有频道”

# .net - 将 TSQL 转换为 Linq

> ID：12402437
> 
> 赞同：2
> 
> 时间：2012-09-13T08:37:36.320
> 
> 标签：.net, vb.net, linq, entity-framework

您好有以下查询，我需要转换为 LINQ(VB.net 10)，我正在努力正确分组。

您如何将 LINQ 查询称为在子表 (tblApplicationAccess) 上有一个 where 子句并将结果分组到父表 (tblBusinessUnit) 上？

**TSQL**

```
SELECT tblBusinessUnit.ID, tblBusinessUnit.Name 
    FROM tblBusinessUnit INNER JOIN tblApplicationAccess ON 
        tblBusinessUnit.ID = tblApplicationAccess.BUID 
    WHERE(tblApplicationAccess.ApplicationID = @AppID) 
    GROUP BY tblBusinessUnit.ID, tblBusinessUnit.Name ORDER BY [Name] 
```

**实体模型**

![在此处输入图像描述](../Images/b999d4b1b2e67d48aabdd2208d56e344.png)

**更新**

好的，我已经让它工作了，但我不知道这是否是最好的方法。我需要创建显式连接吗？这有效率吗？

```
Dim var = (From bu In hf.BusinessUnits
            Join app In hf.ApplicationAccesses On bu.ID Equals app.BUID
            Where app.ApplicationID.Equals(56)
            Group By bu.ID, bu.Name, bu.IsInternalSupplier Into Group
                Select New BusinessUnitModel With {.ID = ID,
                    .Name = Name,
                    .IsInternalSupplier = IsInternalSupplier}).ToList 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:09:30.767

当您从 ApplicationAccess 端开始并使用 BussinessUnit Navigation 属性访问 BussinessUnit 实体时，您可以省略 Linq to Entities 查询中的联接。此外，投影将是分层的，而不是平面的。并不是说这样会更有效率。做一些分析，让我们知道！

```
Using context = New QuerySpikesdfEntities

   'Create the query using LINQ to Entities. No join is necessary as we use the Navigation property 'BussinessUnit'
    Dim projections = From entry In context.ApplicationAccessEntries
                      Where entry.ApplicationID = 56
                      Group By supplierKey = entry.BussinessUnit.IsInternalSupplier Into supplierGroup = Group
                      Select New With {
                         .IsInternalSupplier = supplierKey,
                         .Suppliers = From supplier In supplierGroup
                                      Order By supplier.BussinessUnit.Name
                                      Select New With
                                         {
                                           .ID = supplier.BussinessUnit.ID,
                                           .Name = supplier.BussinessUnit.Name
                                         }
                             }

  'It remains to be seen if the resulting query is more efficient than the one that used the Join
  'This will output the query to the Console.
  'Profile this query and the Join query using the Stopwatch class.
   Console.WriteLine(DirectCast(projections, ObjectQuery).ToTraceString)

   Console.ReadLine()

   Console.WriteLine("All Bussiness units that have had access through application with id: {0}", 56)
   For Each projection In projections
      Console.WriteLine("   Internal suppliers: {0}", projection.IsInternalSupplier)
      For Each supplier In projection.Suppliers
         Console.WriteLine("      ID: {0}, Name: {1}", supplier.ID, supplier.Name)
      Next
    Next

 End Using 
```

# java - 如何在 Eclipse 中使用基于 JAX-WS 的 Web 服务创建动态 Web 项目？

> ID：12402439
> 
> 赞同：1
> 
> 时间：2012-09-13T08:37:41.823
> 
> 标签：java, eclipse, web-services, tomcat, jax-ws

如何在using中创建和运行`JAX-WS`Web 服务？我将使用 Tomcat 7 作为我的服务器。您能否提供有关如何操作的分步教程？一个hello world web 服务就可以了。`Dynamic Web Project``Eclipse`

我按照[本教程](http://www.mkyong.com/webservices/jax-ws/deploy-jax-ws-web-services-on-tomcat/)进行操作，但无法使其运行。我没有按照教程的步骤 4 - 6 进行操作，因为我已经在使用 Eclipse，并且目录已经在动态 Web 项目上正确构建。此外，我的 Tomcat 在 JDK 6 下运行。由于 JAX-WS 已经是 JDK 6 的一部分，因此我无需将其复制到 Tomcat 中。当我运行教程中指示的 URL 时，我收到资源未找到错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:55:17.647

我认为 jax-ws 不是 JDK 的一部分。您必须将 jax-ws 实现复制到 Tomcat 中。您是否在 JDK 文件夹中找到了 jax-ws.jar？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T08:55:22.497

好吧，JDK6+JAXWS经常出问题。

您需要创建一个背书文件夹。

尝试从 Eclipse 运行 Tomcat。使用这些额外的 VM 参数：

```
-Djava.endorsed.dirs="<your-server>\endorsed" -Djavax.xml.soap.MessageFactory=com.sun.xml.messaging.saaj.soap.MessageFactoryImpl
-Djavax.xml.soap.SOAPFactory=com.sun.xml.messaging.saaj.soap.SOAPFactoryImpl
-Djavax.xml.soap.MetaFactory=com.sun.xml.messaging.saaj.soap.SAAJMetaFactoryImpl -Dcom.sun.xml.ws.transport.http.client.HttpTransportPipe.dump=true 
```

现在，将最新的 saaj-impl 和 saaj-api 放到 endorsed 文件夹中。

这应该有效。

# c# - 垂直对齐列表框底部

> ID：12402442
> 
> 赞同：1
> 
> 时间：2012-09-13T08:37:46.597
> 
> 标签：c#, windows-phone-7, listbox, vertical-alignment, longlistselector

我需要像这张图片一样布局我的列表框

![在此处输入图像描述](../Images/544a415ad3b071b4d6e84be346f8f81b.png)

我已经为列表框和长列表选择器尝试了一切。

```
 <ListBox WP7Panels:DockPanel.Dock="Bottom" Name="MsgControlsList" 
                              ItemsSource="{Binding}" 
                              Height="600" 
                              HorizontalContentAlignment="Stretch"
                              VerticalAlignment="Bottom" VerticalContentAlignment="Bottom">
            <ListBox.Style>
                <Style TargetType="ListBox">
                    <Setter Property="VerticalAlignment"
            Value="Bottom" />
                    <Setter Property="VerticalContentAlignment"
            Value="Bottom" />
                </Style>
            </ListBox.Style>
            <ListBox.ItemTemplate>
            <DataTemplate>
                    <WP7Panels:DockPanel LastChildFill="True">
                        <HistoryClasses:HistoryElementTemplate WP7Panels:DockPanel.Dock="Bottom"  VerticalAlignment="Bottom" DataContext="{Binding}" HorizontalContentAlignment="Stretch"/>
                    </WP7Panels:DockPanel>
                </DataTemplate>
        </ListBox.ItemTemplate>
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <toolkit:WrapPanel/>
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
    </ListBox>
    </WP7Panels:DockPanel> 
```

..但我仍然有列表框的顶部垂直对齐。

![在此处输入图像描述](../Images/9b25f719c7a913b368f750138464a37e.png)

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T09:10:45.917

如果您不设置列表框的高度，则项目位于屏幕底部。

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="600"/>
        <RowDefinition Height="Auto"/>
     </Grid.RowDefinitions>

     <TextBlock Text="Test"/>

     <ListBox Grid.Row="1"  VerticalAlignment="Bottom">
          <ListBox.ItemTemplate>
               <DataTemplate>
                    <TextBlock Text="Item"/>
               </DataTemplate>
           </ListBox.ItemTemplate>
      </ListBox>

      <TextBlock Grid.Row="2" Text="Test"/>

  </Grid> 
```

# opencart - 根据位置限制产品购买（选项值）

> ID：12402447
> 
> 赞同：0
> 
> 时间：2012-09-13T08:38:10.607
> 
> 标签：opencart

我有一个有点复杂的要求。我只需要在特定城市销售少量产品。因此，我为该产品创建了一个“选择”选项，并添加了我的城市名称并将其他选项设置为“外部城市”。现在，如果客户选择“城外”作为选项，他应该无法购买产品或将其添加到购物车。

我尝试寻找解决方案，但找不到。有没有一种简单的方法可以做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:39:05.837

我可以给你一个提示。在选择菜单中添加选项时，只需添加“城市名称”，然后您需要编辑相应的模板并将单词 **--请选择**--更改为“城市外”。执行此操作后，除非用户选择城市名称，否则脚本将不允许用户继续。![看图片](../Images/12b5bc080077f546e6125145a1ddcc04.png)

# php - 调用类自己的函数错误

> ID：12402448
> 
> 赞同：0
> 
> 时间：2012-09-13T08:38:13.260
> 
> 标签：php

如何在该类中调用属于同一类的函数？

我有：

```
class BaseConfig {

public $page ;
public $htmlRoot = 'assets/html/';

public function getPageTitle(){
    echo $page = $_GET['p'];
}

public function getContent(){
    $file = getPageTitle().'.php';
    return readfile($htmlRoot.$file);
}
} 
```

我打电话时收到以下错误

```
<?PHP Config::getContent();?>

Fatal error: Call to undefined function getPageTitle() in C:\Xit\xampp\htdocs\IMS3\assets\Config.php on line 17 
```

顺便说一句，我正在创建自己的简单框架。

* * *

谢谢大家， $this 不起作用，它只是说我不能在对象上下文之外使用它。

'self' 工作，所以谢谢。

您能否详细说明 Radu 提到的安全漏洞？

* * *

@S3Mi 正在读取的文件只是 html。在这个用例中，我所做的仍然很糟糕还是可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T08:39:33.660

您需要`$this->`在函数名称之前使用：

```
$file = $this->getPageTitle().'.php'; 
```

如果该功能是`static`那么而不是`$this->`你会使用`self::`大部分时间：

```
$value = self::someStaticFunction(); 
```

如果该函数`static`存在，那么您可能需要使用[后期静态绑定](http://php.net/manual/en/language.oop5.late-static-bindings.php)来调用它，例如`static::someStaticFunction()`。然而，这暗示了一个有问题的类设计，所以我只是为了完整性而提到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T09:52:24.640

```
class BaseConfig {

public $page ;
public $htmlRoot = 'assets/html/';

public function getPageTitle(){
    return $this->page = $_GET['p'];
}

public function getContent(){
    $file = $this->getPageTitle().'.php';
    return readfile($this->htmlRoot.$file);
}
} 
```

我看到您在单独的文件夹中有文件，我猜您那里没有任何关键/机密数据，但它不能解决对其他文件夹的访问。

可以将 $_GET['p'] 设置为 '../index.php' 并获取您的 php 代码。这是一个很大的安全问题。

我建议您阅读有关输入清理和验证的信息。

永远不要通过 readfile() 或任何传递原始内容的函数来提供 .php 文件。.php 文件应由 PHP 解释。暴露 .php 代码是非常糟糕的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T08:40:08.077

```
$file = $this->getPageTitle().'.php' ; 
```

# iphone - 如何通过 GCD 中的即将到来的块取消前一个块？

> ID：12402450
> 
> 赞同：-1
> 
> 时间：2012-09-13T08:38:18.107
> 
> 标签：iphone, ios, grand-central-dispatch, nsthread

> **可能重复：**
> [如何在 GCD 中终止/暂停/关闭异步块？](https://stackoverflow.com/questions/9294139/how-do-i-kill-suspend-close-an-asyncronous-block-in-gcd)

我正在开发一个进行图像处理并显示结果图像的应用程序。我使用 UIScrollView 让用户滚动所有图像，因为图像不是标准的 jpg 或 png，加载需要时间。我使用 GCD 异步加载，当完成调度到主队列以显示时。片段如下：

```
- (void)loadImage:(NSString *)name
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        UIImage *image = [Reader loadImage:name];
        dispatch_sync(dispatch_get_main_queue(), ^{
            [self displayImage:image];
        });
    });
} 
```

这在大多数情况下都很有效。但是当你滚动的太快，可能会在第一个加载的图像显示之前调用该方法多次。然后当你停止时，当前的imageView会快速显示之前的几个图像，然后最后显示当前的图像。由于内存问题很容易崩溃。

我想知道如果队列中有一个新块（这意味着在前一个块完成之前再次调用该方法），是否有办法通知队列取消以前的队列？或任何其他更好的建议？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:29:38.867

You are using class methods to load images, but calling them from various threads concurrently (via the blocks) so I hope you have designed Reader for that. In any case, what I suggest you do is create a mutable set and each time you message Reader to load an image, first add the name to the set. When it returns, then delete the name but on the main thread (both add and delete done on mainQueue or main thread.

Now, when you want to stop processing one or all images, add a new 'cancelLoad' method to Reader, and send it a list of the names you want it to stop processing.

# iphone - 单击按钮时删除观察者

> ID：12402454
> 
> 赞同：0
> 
> 时间：2012-09-13T08:38:30.633
> 
> 标签：iphone, ios

我需要删除观察者这是我的代码添加观察者

```
[self.imageCropper addObserver:self 
                   forKeyPath:@"crop" 
                   options:NSKeyValueObservingOptionNew 
                   context:nil]; 
```

我的问题是如何在单击按钮时删除这个添加的观察者

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:03:56.693

我可以阅读[NSKeyValueObserving 协议参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueObserving_Protocol/Reference/Reference.html)

```
[self.imageCropper removeObserver:self 
                   forKeyPath:@"crop"]; 
```

# google-apps-script - 谷歌网站中的谷歌应用脚 本需要授权

> ID：12402455
> 
> 赞同：0
> 
> 时间：2012-09-13T08:38:40.923
> 
> 标签：google-apps-script

我目前正在看一本书：《Google Script：企业应用要领》

在第一章中，有一个练习将 Google Apps 脚本小工具添加到 Google 站点的页面中。我遵循了指南，但是当我加载该页面时，小部件需要授权才能工作。

我不希望这种情况发生。正常吗？可以修复吗？为什么会显示？

小工具本身由一个基本的 GUI 组成，在代码中和代码中只有一个标签：

```
 function doGet(e) {
          var appl = UiApp.createApplication();
          appl.add(appl.loadComponent("MyGui")); // name of the saved Gui  
          return appl;
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:20:55.010

当您部署为 Web 应用程序时，如果您选择以执行该应用程序的用户身份运行该应用程序，则将向最终用户请求授权。这是合乎逻辑的，因为最终用户必须知道应用程序可以访问哪些资源。

如果您不想访问任何最终用户的资源，则可以将应用程序设置为以您身份运行，并且不会向最终用户显示授权方法。

# c# - 将处理后的图像上传到服务器

> ID：12402457
> 
> 赞同：0
> 
> 时间：2012-09-13T08:38:52.620
> 
> 标签：c#, javascript, ajax

我正在使用 imageFX 处理上传的图像并在处理到我的服务器后将其保存 imageFX 是一个 javascript 库，可将图像转换为已处理的画布我想要做的是获取该画布并使用 AJAX 将其上传到我的服务器但是我收到错误响应，这是我的代码：

```
<script src="Scripts/jquery-1.4.1.min.js" type="text/javascript"></script>
<script src="Scripts/pixastic/pixastic.core.js" type="text/javascript"></script>
<script src="Scripts/pixastic/desaturate.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {

        $("#save").click(function () {

            var image = document.getElementById("filterimage").toDataURL("image/png");
            image = image.replace('data:image/png;base64,', '');
            alert(image);
            $.ajax({
                type: 'POST',
                url: "ImageFxExample.aspx/UploadImage",
                data: '{ "imageData" : "' + image + '" }',
                contentType: 'application/json; charset=utf-8',
                dataType: 'json',
                success: function (msg) {
                    alert('Image saved successfully !');
                },
                error: function () {
                    alert("error!!");
                }
            });
        });

    });
   </script>
 <script type="text/javascript">

     function strfilter(filter) {
         var img = document.getElementById("<%=filterimage.ClientID %>");
         Pixastic.process(img, filter);
         document.getElementById("save").style.display = "block";
     }
   </script> 
```

标记：

```
 <asp:FileUpload ID="fileUpload" runat="server"   />
    <asp:Button ID="upload_btn" runat="server" onclick="upload_btn_Click" Text="upload" />
    <asp:Image ID="filterimage" runat="server" ImageUrl="" /> 
```

服务器端 ：

```
protected void upload_btn_Click(object sender, EventArgs e){
    string folderPath = "UploadedImage/";
    string imageName = fileUpload.FileName;
    string saveLocation = Server.MapPath(folderPath) + imageName;
    fileUpload.SaveAs(saveLocation);
    filterimage.ImageUrl = folderPath + imageName;
}

[WebMethod()]
public static void UploadImage(string imageData){
    string Path = "UploadedImage/";
    string folderPath = HttpContext.Current.Server.MapPath(Path);
    string fileNameWitPath = folderPath + DateTime.Now.ToString().Replace("/", "-").Replace(" ", "- ").Replace(":", "") + ".png";

    FileStream fs = new FileStream(fileNameWitPath, FileMode.Create);
    BinaryWriter bw = new BinaryWriter(fs);

    byte[] data = Convert.FromBase64String(imageData);

    bw.Write(data);
    bw.Close();
} 
```

如果我在不使用上传的情况下为 filterimage 放置一个简单的 imageUrl，它可以正常工作，但是如果我使用上传控件，它将无法正常工作，并且我会收到错误消息，请提供任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T07:01:58.743

我找到了正确的答案，它正在将图像转换为'png' b4 你上传它

```
protected void upload_btn_Click(object sender, EventArgs e)
{
    string folderPath = "UploadedImage/";
    string  imageName = fileUpload.FileName;

    string saveLocation = Server.MapPath(folderPath);
    string ext = Path.GetExtension(imageName);
   string name= imageName.Replace(ext, ".png");
   saveLocation = Server.MapPath(folderPath) + name;
    fileUpload.SaveAs(saveLocation);
    filterimage.ImageUrl = folderPath + name;
} 
```

# shared-ptr - 来自weak_ptr 的不安全原始指针 - 上下文保证安全

> ID：12402459
> 
> 赞同：0
> 
> 时间：2012-09-13T08:38:55.950
> 
> 标签：shared-ptr, weak-references

我正在存储一个`weak_ptr`以避免循环结构，并且我知道在某些特定情况下`shared_ptr`仍然有效。

我可以在`weak_ptr`不强制转换的情况下获取原始指针`shared_ptr`（这涉及内存写入）吗？

（注意：这不是[如何在 C++ 中维护指向父级的弱指针的副本？](https://stackoverflow.com/questions/1056254)，我特意询问的是一种不安全的方式，而不是获取指针本身）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T23:08:11.600

> 我可以从weak_ptr 获取原始指针而不转换为shared_ptr

不。

注意，您不会“强制转换”您`shared_ptr`从`weak_ptr`.

> （这涉及内存写入）？

你在这里是什么意思？创建一个`shared_ptr`将增加一个引用计数，这就是你所指的吗？

# iphone - 在应用程序更新中添加应用内购买

> ID：12402465
> 
> 赞同：1
> 
> 时间：2012-09-13T08:39:13.203
> 
> 标签：iphone, ios, in-app-purchase

我将在 AppStore 上启动一个应用程序。它将有两个版本，原始版本和更新版本。1 - 2 周后我将发布原始版本，我想更新二进制文件，以便现在之前解锁的少数项目现在被锁定并可供 inApp 购买。但是，我不希望已经下载原始版本但现在只更新它的用户锁定这些项目。只有在更新版本启动后首次下载应用程序的人才能锁定项目。

我正在考虑实现这一点。即使在原始版本发布之前，我也会为更新版本创建应用内购买。并拿到钥匙。现在，当用户下载原始版本时，以某种方式将此密钥存储在设备中。但我不确定这是否是正确的方法，以及如何跨设备保留此密钥

此外，inApp 将显示在 iTunes 页面中，不应显示原始版本的 inApp 购买。

# java - 如何解决这个 OutOfMemoryError: Java heap space

> ID：12402470
> 
> 赞同：1
> 
> 时间：2012-09-13T08:39:22.350
> 
> 标签：java, sql, memory, garbage-collection

我有以下程序进入数据库并获取值，我已经执行了查询，它也只给了我 47 行但是当我在控制台模式下运行相同的程序时它给了我`Exception in thread "main" java.lang.OutOfMemoryError: Java heap space`

```
package com.common;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.sql.Timestamp;
import java.sql.Types;
import java.util.HashMap;
import java.util.LinkedHashMap;
import java.util.Map;

import com.common.Query;

public class GetColumnValuesFromDifferentTypes {
@SuppressWarnings("unused")
public static void printColumns(String query){
    ABIDAO abidao = new ABIDAO();
    int numberOfColumns=0,columnType = 0;
    String columnValue = "", columnName = "";
    Map<String, String> headerMap = new LinkedHashMap<String, String>();
        Connection connection = abidao.getConnection();
        if (connection != null) {
            try {
                headerMap = getHeader(query);
                System.out.println("====================================================================");
                System.out.println("Header Map : "+headerMap);
                System.out.println("====================================================================");
                PreparedStatement reportTablePS = connection.prepareStatement(query);
                ResultSet reportTable_rst = reportTablePS.executeQuery();
                ResultSetMetaData reportTable_rsmd = reportTable_rst.getMetaData();
                numberOfColumns = reportTable_rsmd.getColumnCount();

                    int i =0;
                    while (reportTable_rst.next()) {
                            for (int columnIterator = 1; columnIterator <= numberOfColumns; columnIterator++) {
                                 columnValue = null;
                               columnName = reportTable_rsmd.getColumnName(columnIterator);
                               columnType = reportTable_rsmd.getColumnType(columnIterator);

                               if(columnType == Types.CHAR || columnType == Types.VARCHAR || columnType == Types.LONGVARCHAR)
                               {
                                   columnValue = reportTable_rst.getString(columnName);
                               }else if(columnType == Types.INTEGER || columnType == Types.BIGINT || columnType == Types.SMALLINT || columnType == Types.NUMERIC)
                               {
                                   long templong = reportTable_rst.getLong(columnName);
                                   if(!reportTable_rst.wasNull())
                                   {
                                       columnValue  = Long.toString(templong);
                                   }
                               }else if(columnType == Types.DECIMAL || columnType == Types.DOUBLE || columnType == Types.FLOAT || columnType == Types.REAL)
                               {
                                   double tempDouble1 = reportTable_rst.getDouble(columnName);
                                   if(!reportTable_rst.wasNull())
                                   {
                                       columnValue  = Double.toString(tempDouble1);
                                   }
                               } else if(columnType == Types.TIME || columnType == Types.TIMESTAMP || columnType == Types.DATE)
                               {
                                   Timestamp sqlTimeStamp = reportTable_rst.getTimestamp(columnName);
                                   if(!reportTable_rst.wasNull())
                                   {
                                       columnValue = sqlTimeStamp.toString();
                                   }
                               }
                               System.out.println("columnValue : "+columnValue);
                               System.out.println(",");

                            }
                            System.out.println("====================================================================");
                        }
            } catch (Exception ex) {
                ex.printStackTrace();
            }finally {
                try {
                    abidao.closeConnection(connection, null, null);
                } catch (Exception ex) {
                    ex.printStackTrace();
                }
            }
        }
}
@SuppressWarnings({ "unused" })
public static  Map<String, String> getHeader(String query) {
    ABIDAO abidao = new ABIDAO();
    String columnName="";
    int numberOfColumns=0,rowCount=1;
    Map<String, String> headerNamesMap = new LinkedHashMap<String, String>();
    Connection connection = abidao.getConnection();
    if (connection != null) {
        try {
            PreparedStatement reportTablePS = connection.prepareStatement(query);
            ResultSet reportTable_rst = reportTablePS.executeQuery();
            ResultSetMetaData rsmd = reportTable_rst.getMetaData();
            numberOfColumns = rsmd.getColumnCount();
            headerNamesMap.put("SNO","SNO");
              while (reportTable_rst.next()) {
                for (int i = 1; i <= numberOfColumns; i++) {
                  columnName = rsmd.getColumnName(i).toUpperCase();
                  if(!headerNamesMap.containsKey(columnName)){
                      headerNamesMap.put(columnName, columnName); 
                  }
                }
                rowCount++;
              }

        } catch (Exception ex) {
            ex.printStackTrace();
        }finally {
            try {
                abidao.closeConnection(connection, null, null);
            } catch (Exception ex) {
                ex.printStackTrace();
            }
        }
    }
    return headerNamesMap;
}
@SuppressWarnings("rawtypes")
public static void main(String[] args) {
    String query = "";
    Map dynamicQueryMap = new HashMap();
    Query queryObj = new Query();

    try {
        dynamicQueryMap = queryObj.getComplexReportQuery();
        if(dynamicQueryMap.containsKey("query")) query = dynamicQueryMap.get("query").toString();
    } catch (Exception ex) {
        ex.printStackTrace();
    }
    printColumns(query);

}
} 
```

这是从 Query 方法返回的查询：

```
select
pi.po_number,poi.unit_cost,pi.placed_date CreateDate,
case when isnull(pi.date_closed) then pi.scheduled_arrival_date  
else pi.date_closed end as ReceviedDate,
poi.order_quantity,poi.roll_number,p.product_sku product_name,
pc.product_category_name,poi.rec_vendor_quantity,pv.vendor_name,p.et_conversion_unit_quantity,pi.note
from
purchase_order as pi,
purchase_order_inventory as poi,
product_vendors as pv,
products AS p,
product_categories AS pc
where
pi.purchase_order_id=poi.purchase_order_id and
pc.product_category_id=p.product_category_id and
poi.product_id = p.product_id and
poi.product_category_id=pc.product_category_id and
pi.vendor_id=pv.product_vendor_id and
( ( pi.date_closed  >= '2012-01-01' and pi.date_closed <='2012-09-05 23:59:59' ) 
or ( pi.scheduled_arrival_date  >= '2012-01-01' and pi.scheduled_arrival_date <='2012-09-05 23:59:59') ) and
pi.po_type=0 
and pi.status_id = 0 and  poi.transaction_type = 0  
order by pi.po_number ; 
```

我面临什么问题！请帮我找出来。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T08:41:22.117

您需要关闭所有资源，而不仅仅是连接。例如 PreparedStatement.close() 和 ResultSet.close() 如果您不这样做，它们将被保留并成为内存泄漏的一种形式。

我建议您使用`jmap -histo:live {pid}`或使用 VisualVM 或 YourKit 等内存分析器自己确认这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T08:41:22.587

您应该关闭 Connection 以及 ResultSet 和 Statements 以避免内存泄漏。

并且不要忘记在再次使用它们之前关闭语句和其他资源。

```
Statement stmt = ...;
...
stmt.close();
stmt = ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T08:43:20.407

在避免程序错误以节省更多内存之后，您可以尝试通过更改 JVM 的配置为您的应用程序设置特定的堆大小。看看这篇文章：http: [//informix-zone.com/node/46](http://informix-zone.com/node/46)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T09:16:21.567

堆大小还取决于数据库配置文件中定义的共享缓冲区，您必须增加数据库配置文件中的共享缓冲区大小。

对于监控堆，您可以使用监控工具：-

*   地图

*   监视器

# java - 如何正确使用 和 有标准

> ID：12402478
> 
> 赞同：0
> 
> 时间：2012-09-13T08:39:33.013
> 
> 标签：java, jsf, seam, criteria

几天以来我一直在学习 Seam，我想使用 `<h:selectManyCheckbox>`和`<f:selectItems>`标签创建简单的过滤器。这是带有标签的 frag xhtml 文件：

```
<h:selectManyCheckbox value="#{userSessionsSession.selected}">
    <f:selectItems value="#{usersSessionsPage.logLevelList}" />
</h:selectManyCheckbox> 
```

在 UserSessionSession 我有：

```
private List<String> selected; 

    public List<String> getSelected() {
        return selected;
    }

    public void setSelected(List<String> selected) {
        this.selected = selected;
    } 
```

用户会话页面：

```
private List<SelectItem> logLevelList;

public List<SelectItem> getLogLevelList(){
        if(logLevelList == null){
            logLevelList = new ArrayList<SelectItem>();
            Collection<MdoUserSessionDetStatus> tmpList = sessionAuditUtils.getDetailsStatusEntities();
            for(MdoUserSessionDetStatus mdo: tmpList){
                logLevelList.add(new SelectItem(mdo.getCode(), mdo.getName()));
            }
        }
        return logLevelList; 
    } 
```

并在具有标准限制的功能中：

```
if (selected != null && !ANY_STATUS.equals(selected)) {
            criteria.add(Restrictions.eq("mdoUserSessionDetStatus.code", selected));
        } 
```

当我检查并提交选项时，没有任何反应并且控制台显示警告：

```
 WARNING: FacesMessage(s) have been enqueued, but may not have been displayed.
sourceId=filterPanelForm:j_id163[severity=(ERROR 2), summary=(Conversion Error setting value 'DEBUG' for '#{userSessionsSession.selected}'. ), detail=(Conversion Error setting value 'DEBUG' for '#{userSessionsSession.selected}'. )] 
```

我不知道如何正确处理此事件，任何人都可以帮助我吗？我会很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:28:49.673

你将不得不改变它

```
private SelectItem[] logLevelList;

public SelectItem[] getLogLevelList(){

if(logLevelList == null){

Collection<MdoUserSessionDetStatus> tmpList =   sessionAuditUtils.
                                                    getDetailsStatusEntities(); 

logLevelList =  new SelectItem[tmpList .size() + 1];

for(MdoUserSessionDetStatus mdo: tmpList){
            logLevelList.add(new SelectItem(mdo.getCode(), mdo.getName()));
         }
     }
     return logLevelList; 
 } 
```

# android - 如何在 Android 应用程序中创建上传文件到 Google Drive

> ID：12402485
> 
> 赞同：1
> 
> 时间：2012-09-13T08:40:06.733
> 
> 标签：android, google-drive-api

我已经实现了将文件上传到 Google Drive 的功能。我的应用程序（Android 应用程序）有两个页面。

**设置页面**：我们已经配置了谷歌帐户。登录谷歌账号后。我们授予权限并将 OAUTH_TOKEN 和 OAUTH_TOKEN_SECRET 保存到*SharedPreferences*。

**上传页面**：我们从资源管理器中选择文件。然后点击按钮 [UPLOAD] 向他们发送 Google Drive。

我在developers.google.com 上找到了示例代码，展示了如何上传文件。它看起来像这样

* * *

```
/**
   * Insert new file.
   *
   * @param service Drive API service instance.
   * @param title Title of the file to insert, including the extension.
   * @param description Description of the file to insert.
   * @param parentId Optional parent folder's ID.
   * @param mimeType MIME type of the file to insert.
   * @param filename Filename of the file to insert.
   * @return Inserted file metadata if successful, {@code null} otherwise.
   */
  private static File insertFile(Drive service, String title, String description,
      String parentId, String mimeType, String filename) {
    // File's metadata.
    File body = new File();
    body.setTitle(title);
    body.setDescription(description);
    body.setMimeType(mimeType);

    // Set the parent folder.
    if (parentId != null && parentId.length() > 0) {
      body.setParents(
          Arrays.asList(new File.ParentReference().setId(parentId));
    }

    // File's content.
    java.io.File fileContent = new java.io.File(filename);
    FileContent mediaContent = new FileContent(mimeType, fileContent);
    try {
      File file = service.files().insert(body, mediaContent).execute();

      // Uncomment the following line to print the File ID.
      // System.out.println("File ID: %s" + file.getId());

      return file;
    } catch (IOException e) {
      System.out.println("An error occured: " + e);
      return null;
    }
  } 
```

* * *

所以我们只需调用上面的函数来上传文件。但我不知道如何初始化驱动器*（com.google.api.services.drive.Drive）*以传递给函数。

我必须做什么才能用 OAUTH_TOKEN 和 OAUTH_TOKEN_SECRET 初始化驱动变量？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:18:06.940

Google Drive SDK 文档中的 OAuth 2.0 页面解释了如何检索有效凭据并使用它们来实例化服务对象：

[https://developers.google.com/drive/credentials](https://developers.google.com/drive/credentials)

# c++ - 在 do-while 循环中同时检查两个条件

> ID：12402486
> 
> 赞同：0
> 
> 时间：2012-09-13T08:40:10.620
> 
> 标签：c++, do-while

在井字游戏代码中，我有一个 do-while 循环来检查其中一名玩家是否赢了......所以，像这样

```
do{
//does some player's input and other things..
}while(!win(x)); 
```

现在，最大的问题是在这个循环中，它将继续循环，直到其中一名玩家获胜。现在，我如何使用相同的 do-while 循环检查平局？

我可以做这样的事情吗：

```
do{
 //still the same checking
}while(!win(x)||!loose(x)); 
```

我确实尝试过，但它只是弄乱了代码。我怎么可能在游戏中检查平局？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:45:50.277

您的逻辑略有偏差 - 将循环条件更改为：

```
do{
 //still the same checking
}while(!win(x)||!loose(x)); 
```

至：

```
do{
 //still the same checking
}while(!win(x)&&!loose(x)); 
```

或者也许是更容易理解但等效的替代方案：

```
do{
 //still the same checking
}while(!(win(x)||loose(x))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:02:31.257

当你写作时：

```
!win(x)||!loose(x) 
```

您说未赢或未输，循环将在第一次结束时终止。您可以使用以下内容：

```
do{
    //still the same checking
} while (!win(x)&&!loose(x)); 
```

或者

```
do{
    //still the same checking
} while (!(win(x)||loose(x))); 
```

# html - mediaelement.js 音频不适用于 IE9 和 wav 文件

> ID：12402487
> 
> 赞同：1
> 
> 时间：2012-09-13T08:40:12.117
> 
> 标签：html, internet-explorer-9, wav, mediaelement.js

我在其他线程/讨论中找不到解决方案。

在 IE9 中使用 mediaelement.js 播放 wav 文件时遇到问题。播放器完全黑，没有任何控制按钮。

我尝试了正常的方式不成功

```
<audio id="player2" src="myFile.wav" type="audio/wav" controls="controls"></audio> 
```

我尝试[HTML5shiv](http://code.google.com/p/html5shiv/)失败

```
<!--[if IE]>
   <script src="html5shiv.js"></script>
<![endif]--> 
```

我试图强制闪退失败。

```
<audio id="player2" 
       controls="controls">
  <source src="myFile.wav" type="audio/wav" />
  <!-- Flash Fallback -->
  <object width="640" height="360" type="application/x-shockwave-flash" data="flashmediaelement.swf">
      <param name="audio" value="videos/build/flashmediaelement.swf" />
      <param id="flashvars-param" name="flashvars"    value="controls=falseg&file=myFile.wav" />
  </object>        
</audio> 
```

加上`mode: 'shim'`在javascript中。

这在 FF 和 Google Chrome 中运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:52:13.467

看起来 IE9 不会使用 HTML5 中的音频标签播放 .WMA 或 .WAV 文件。我在 Garret Wilson 的[博客](http://www.garretwilson.com/blog/2012/01/17/ie9-html5-wav.xhtml "加勒特威尔逊的博客")上找到了这个。

IE9 HTML5 不支持 WAV 文件

HTML5 被证明是有用的。嗯，理论上。如果它奏效了。看，HTML5 具有各种功能，例如播放声音的元素。而这一次，浏览器放弃了他们的专有本能，本着互操作性的精神，他们正在实现相同的 API！微软甚至喜欢这个元素！那么现在我们可以编写跨浏览器工作相同的页面吗？当然不是！虽然它们支持相同的 API，但浏览器决定只支持某些音频编解码器——这意味着没有一种音频格式可以在所有浏览器上运行。像往常一样，微软在这里的行为只能被认为是恶意的，并且本着阻止互操作性的精神，而不是鼓励它。

我们以 MP3 为例。IE9 支持它。耶。火狐 9 怎么样？不，Mozilla 声称这是因为专利风险。好吧，好吧，如果你这么说。那么 Firefox 支持什么呢？奥格。这是一个开放的音频标准，据说不受专利限制。

那么，不管微软是否购买了 Mozilla 关于 MP3 的故事，本着互操作性的精神，为什么 IE 不继续实施 Ogg，以便在两种浏览器上都有一些音频格式？你告诉我。也许微软会说，“MP3 无处不在——我们为什么要迎合 Mozilla 的问题？” 这是一个逃避，但我会让它溜走。还有更多棘手的问题正在发生。

让我们完全跳过有损格式，看看 LPCM 编码的 WAV 文件。当然，它们更大，但假设我不在乎，我只是想要跨浏览器工作的东西。谁支持它？火狐4？是的。铬 4？是的。野生动物园 5？是的。歌剧 10.6？是的。IE9？不！！！！

如果 IE9 支持 WAV，那么至少有一种音频格式支持所有主要的现代浏览器。

猜猜是谁创建了 WAV 格式？微软。他们为什么不支持？也许你应该开始在上面的段落中寻找答案。

# javascript - javascript标签不起作用？

> ID：12402489
> 
> 赞同：0
> 
> 时间：2012-09-13T08:40:13.383
> 
> 标签：javascript

我是 javascript 的新学习者。所以首先我不想使用 jquery 来获取选项卡。以下是我的代码。但它不起作用。如何更正我的代码。谢谢你。

```
.web_index{ position:relative;}
.web_index div{ width:400px; height:300px; background:#eee; position:absolute; left:30px;top:100px; }
ul li{ float: left; width:100px; height:30px; line-height:30px; list-style:none;}

<script type="text/javascript">
    function clicker(){
        var lier=document.getElementsByTagName("li");
        var diver=document.getElementsByClassName("web_index").getElementsByTagName("div");

        for(var i=0;i<lier.length;i++){
            for(j=0;j<diver.length;j++){
                if(i==j)
                    diver[j].style.display=block;
                }else{
                    diver[j].style.display=none;
                }   
            }
        }
    }   
</script>

</head>

<body >
<ul>
    <li onclick="clicker()" class="li01">one</li>
    <li onclick="clicker()" class="li02">two</li>
    <li onclick="clicker()" class="li03">three</li>
    <div class="web_clear"></div>
</ul>
<div class="web_index">
<div style="display:block" >content one</div>
<div style="display:none">content two</div>
<div style="display:none">content three</div>
</div> 
```

我想点击`one`然后显示`content one`。所有内容都被隐藏了。两个然后显示`content two`...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:17:19.357

看，对于你实现标签的问题，我可以建议你以更好的方式做。相同的 clicker 函数可以接受 of 的参数，`ID`您`DIV`可以在调用它时传递它。

```
<!DOCTYPE html>
<html>
<head>
  <meta charset=utf-8 />
  <title>Tabs</title>
  <meta name="viewport" content="width=device-width">
  <style type="text/css">
    .web_index div {width: 400px; height: 300px; background: #eee;}
    ul li{width: 100px; height: 30px; line-height: 30px; list-style: none; display: inline-block; *display: inline; zoom: 1;}
  </style>
</head>

<body>
<ul>
    <li onclick="clicker(1)">one</li>
    <li onclick="clicker(2)">two</li>
    <li onclick="clicker(3)">three</li>
</ul>
<div class="web_index">
  <div id="t1">content one</div>
  <div id="t2">content two</div>
  <div id="t3">content three</div>
</div>
<script type="text/javascript">
    function clicker(tab){
      document.getElementById("t1").style.display = "none";
      document.getElementById("t2").style.display = "none";
      document.getElementById("t3").style.display = "none";

      document.getElementById("t" + tab).style.display = "block";
    }
    clicker(1);
</script>
</body>
</html> 
```

### 在职的

`index`我们可以为每个元素指定一个唯一 ID，而不是查找元素出现的位置。然后，函数支持参数，这就是 javascripts 的用途。传递该参数并使用`.style.display`元素设置样式。

我们不需要将选项卡定位为绝对，因为它不会挂起。`display: inline-block`而且，您可以使用而不是设置边距`float: left`。

```
.web_index div {width: 400px; height: 300px; background: #eee;}
ul li {width: 100px; height: 30px; line-height: 30px; list-style: none; display: inline-block; *display: inline; zoom: 1;} 
```

您可以这样重写`clicker()`脚本：

```
function clicker(tab){
  document.getElementById("t1").style.display = "none";
  document.getElementById("t2").style.display = "none";
  document.getElementById("t3").style.display = "none";

  document.getElementById("t" + tab).style.display = "block";
} 
```

这样，您就可以将`ID`标签`DIV`的作为参数传递。通过修改`style`元素的属性，您可以隐藏或显示。

您可以`<li>`使用相同的`onclick`函数调用它，但只需传递另一个额外参数：

```
<ul>
    <li onclick="clicker(1)">one</li>
    <li onclick="clicker(2)">two</li>
    <li onclick="clicker(3)">three</li>
</ul> 
```

### 查看演示：http: [//jsbin.com/welcome/22513](http://jsbin.com/welcome/22513)

# cassandra - 稍后设置 cassandra ttl / 设置默认 ttl？

> ID：12402490
> 
> 赞同：2
> 
> 时间：2012-09-13T08:40:17.440
> 
> 标签：cassandra

有没有办法为 cassandra cfs 定义默认 ttl，如果列没有 ttl，则使用该默认 ttl？我不小心错过了为很多列定义 ttl，现在我必须重新定义它。替代方案：是否有一种简单的方法可以批量更新所有列并手动设置 ttl？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T19:13:12.293

无法设置默认 TTL 或进行大规模 TTL 更新。您将需要扫描您的数据并使用 TTL 版本覆盖每一列。

为了在旧数据上设置较低的 TTL，您可能会发现在扫描数据时获取列时间戳很有用。如何指定取决于您使用的客户端；例如，在 pycassa 中，您可能会执行类似`cf.get_range('', '', ..., include_timestamp=True)`.

# cookies - 离开网页时删除 cookie

> ID：12402493
> 
> 赞同：0
> 
> 时间：2012-09-13T08:40:20.400
> 
> 标签：cookies, web

有没有办法在自动离开 Web 应用程序时删除所有 cookie？

知道他可以通过单击链接、关闭选项卡、单击主页按钮等方式离开网页。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T08:54:20.117

cookie 会保存在客户端的机器上，如果你想在关闭窗口时关闭 cookie，你可以设置一个[会话 cookie](http://www.javascriptkit.com/javatutors/cookie2.shtml)，会话关闭时会自动过期。但如果您想在关闭选项卡上关闭 cookie，您可以在关闭选项卡上使用 javascript 事件，例如 window.onclose 来删除所有 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:54:11.630

如果您使用 java 设置 cookie 的年龄=-1，这将确保在浏览器关闭时删除 cookie。如果用户通过单击链接注销 cookie age=0 这将删除 cookie。看看

[http://docs.oracle.com/javaee/1.3/api/javax/servlet/http/Cookie.html](http://docs.oracle.com/javaee/1.3/api/javax/servlet/http/Cookie.html)

# php - 使用 onkeyup JS 事件检查输入的值是否唯一

> ID：12402494
> 
> 赞同：0
> 
> 时间：2012-09-13T08:40:25.893
> 
> 标签：php, javascript, unique, onkeyup

我正在验证一个名为**客户端代码的字段的唯一性**......

为此，我使用了**onkeyup JS 事件。**但是当我快速键入键时它不能正常工作。在这

> onkeyup 事件

我正在发送一个 ajax 请求来检查输入的数据是否已经存在于表中。

如果有任何选择，请帮助..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:48:30.133

我认为主要问题是，AJAX 需要一些时间。因此，如果您的用户输入非常快，您将向您的服务器发送许多请求，并且您会得到许多实际上不需要的答案。一种可能的解决方案是，您在事件中设置超时。例如，等到用户在大约 500 毫秒左右没有输入字母。在此之后，您将您的请求发送到服务器。
你的要求会更少，而且你的要求也不能混为一谈......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T08:56:48.627

就您似乎面临的实际问题而言，您的问题非常模糊。但是我从中得出的结论是，当您建议快速按键时，您发出了太多请求！

* * *

如您所知，`Ajax`它就像一个普通的页面请求，只是异步完成的，因此它受到相同的网络延迟、吞吐量和往返限制。

实现所需功能的一种简洁方法是使用一种称为**throttling**的技术。用于此目的的最佳`js`插件之一位于此处： [http](http://benalman.com/projects/jquery-throttle-debounce-plugin/) ://benalman.com/projects/jquery-throttle-debounce-plugin/ 它基本上允许您对对服务器的请求进行速率限制，从而不会阻塞资源和提供流畅的用户界面。

* * *

此外，除非您希望捕获某些特殊键，例如`ESC`，否则我建议您使用`keypress`or`keydown`事件。不记得具体的原因了，只是一个建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T08:43:10.260

使用`onkeydown`事件和检查`event.charCode`。即使在快速连续按下打字时也会触发。

# google-app-engine - 有没有办法增加 GAE 应用程序的余额？

> ID：12402496
> 
> 赞同：0
> 
> 时间：2012-09-13T08:40:35.320
> 
> 标签：google-app-engine, billing

我的问题是，我的信用卡不断获得少量增量提款，这很好 - 但由于我经营一家公司，我需要预订所有这些小额付款。最终成为每个月的工作时间（查找、打印、放入我的封面等）。

我宁愿在余额中增加 100 美元左右，只处理一项费用。

这似乎是一个“必备”功能，特别是因为“结算历史”页面上使用了术语“余额”。但我似乎找不到在哪里加钱。

可能吗？

# asp.net-mvc - Signalr 从集线器外部调用特定客户端

> ID：12402497
> 
> 赞同：4
> 
> 时间：2012-09-13T08:40:37.810
> 
> 标签：asp.net-mvc, signalr, signalr-hub

我知道[Chris Fulstow 项目 log4net.signalr](https://github.com/ChrisFulstow/log4net.SignalR)，如果您想要一个非生产日志，这是一个好主意，因为它记录了来自所有请求的所有消息。我希望有一些东西可以通过发起它们的请求来区分日志消息并返回到正确的浏览器。

这是我在附加程序中所做的：

```
 public class SignalRHubAppender:AppenderSkeleton
    {
        protected override void Append(log4net.Core.LoggingEvent loggingEvent)
        {
            if (HttpContext.Current != null)
            {
                var cookie = HttpContext.Current.Request.Cookies["log-id"];
                if (null != cookie)
                {
                    var formattedEvent = RenderLoggingEvent(loggingEvent);
                    var context = GlobalHost.ConnectionManager.GetHubContext<Log4NetHub>();
                    context.Clients[cookie.Value].onLog(new { Message = formattedEvent, Event = loggingEvent });
                }
            }
        }
    } 
```

我正在尝试将会话 ID 附加到 cookie，但这在同一台机器上不起作用，因为 cookie 已被覆盖。这是我在客户端上用来附加事件的代码：

```
//start hubs
    $.connection.hub.start()
    .done(function () {
        console.log("hub subsystem running...");
        console.log("hub connection id=" + $.connection.hub.id);
        $.cookie("log-id", $.connection.hub.id);
        log4netHub.listen();
    }); 
```

结果，只有连接的最后一页显示了日志消息。我想知道是否有一些策略可以从发起当前请求的浏览器中获取当前连接 ID（如果有的话）。另外我很想知道是否有更好的设计来实现每个浏览器的日志记录。

**编辑**

我可以制作一个基于约定名称的 cookie（如 log-id-someguid ），但我想知道是否有更聪明的东西。

**赏金** 我决定就这个问题开始赏金，我还会询问架构，以查看我的策略是否有意义。我的疑问是，我在从服务器到客户端的单一“方向”上使用集线器，我用它来记录不是源自对集线器的调用，而是来自其他请求（可能是在其他集线器上提出的请求）的活动，是这是一个正确的方法，以浏览器可见的 log4net 附加程序为目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T08:53:01.663

即使在同一个 SPA 上打开多个选项卡，如何正确定位正确的浏览器实例/选项卡的想法是通过 Url 区分它们。一种可能的实现方法是在第一次访问时将它们从[http://foo.com](http://foo.com)重定向到[http://foo.com/hhd83hd8hd8dh3](http://foo.com/hhd83hd8hd8dh3)，每次随机生成。url 重写也可以通过其他方式完成，但这只是说明问题的一种方式。这样，appender 将能够检查原始 Url，并通过您保留服务器端的一些映射从 Url 识别正确的 SignalR ConnectionId。实现细节可能会有所不同，但基本思想就是这个。跟踪自第一次连接以来 HttpContext 中可用的更多信息，您还可以制定其他策略以防止任何劫持。

关于您的架构，我可以告诉您，这正是我在[ElmahR](http://elmahr.apphb.com/)中使用它的方式。我有来自通知中心外部的消息（从其他网络应用程序发布的错误），并且我向连接到该中心的所有客户端（并订阅某些组）进行广播：它工作正常。

我不是权威人士，但我也猜想这样的架构是可以的，即使有多个集线器，因为集线器在一天结束时只是一个（一个）持久连接的抽象，它允许您通过以下方式对消息进行分组上下文。在幕后（我正在简化）你只是与来回消息的持久连接，所以无论你在它上面定义什么集线器结构（它只是为了帮助你组织事情）你仍然坚持这种连接，所以你不能做任何伤害。

SignalR 擅长做两件事：大规模广播（客户端）和一对一通信（呼叫者）。只要你不尝试做一些奇怪的事情，比如建立对特定调用者的服务器端引用，你应该没问题，不管有多少集线器，以及它们之间的交互，你都有。

这些是我的结论，来自现场。也许您可以就这个问题向@dfowler 推特，看看他是否有（更多）更权威的指导方针。

# orm - Rob Conery 的 Massive 中的 BuildCommands 参数

> ID：12402501
> 
> 赞同：0
> 
> 时间：2012-09-13T08:40:49.840
> 
> 标签：orm, massive

我正在使用 Rob Conery 的 Massive。

根据`List<DbCommand> BuildCommands(params object[] things)`方法注释，该方法应该采用“可以是 POCO、Anonymous、NameValueCollections 或 Expandos”的对象。但是这个：

```
var x = new { Id = new Guid("0F66CDCF-C219-4510-B81A-674CE126DD8C"), Name = "x", DisplayName = "y" };

myTable.BuildCommands(x); 
```

导致 InvalidCastException。这是合理的，因为在 Massive.cs 中，尝试了从传入的匿名类型到 ExpandoObject 的强制转换。

为什么评论说你可以传递任何东西？还有其他方法可以从非ExpandoObjects 构建命令吗？

这里还有一些代码：

```
 public static void ThisFails()
    {
        DynamicModel myTable = new DynamicModel("myConnectionString", tableName: "dbo.MyTable", primaryKeyField: "Id");
        var updateMe = new { Id = new Guid("DF9A2F1B-3556-4EAC-BF2B-40E6821F3394"), Name = "abcx", DisplayName = "x" };
        var commands = myTable.BuildCommands(updateMe); // This fails
        myTable.Execute(commands);
    }

    public static void ThisSucceeds()
    {
        DynamicModel myTable = new DynamicModel("myConnectionString", tableName: "dbo.MyTable", primaryKeyField: "Id");
        dynamic updateMe = new ExpandoObject();
        updateMe.Id = new Guid("DF9A2F1B-3556-4EAC-BF2B-40E6821F3394");
        updateMe.Name = "abcx";
        updateMe.DisplayName = "x";
        var commands = myTable.BuildCommands(updateMe);
        myTable.Execute(commands);
    } 
```

失败的代码导致：

> 无法转换类型为“<>f__AnonymousType0 `3[System.Guid,System.String,System.String]' to type <br/> 'System.Collections.Generic.IDictionary`2[System.String,System.Object]”的对象。

它是从您方法的第一行抛出的

```
public virtual DbCommand CreateUpdateCommand(dynamic expando, object key)
{
     var settings = (IDictionary<string, object>)expando;
     ... 
```

在我看来，在调用 CreateUpdateCommand 之前应该调用您的扩展方法 ToExpando？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T19:21:25.007

我认为这就是为什么人们将方法设为私有和公开的原因:)。你不应该直接调用 BuildCommands （尽管你在这里的代码仍然可以工作）。我感觉补丁中可能存在一个错误。

就是说 - 我相信如果您调用 myTable.Update() 或 myTable.Insert()，这将起作用。

最后一部分回答了这个问题——就可能的“问题”而言——让我们把它带到 Github。

# c# - 何时选择套接字编程而不是 WCF？

> ID：12402502
> 
> 赞同：3
> 
> 时间：2012-09-13T08:41:01.103
> 
> 标签：c#, .net, wcf, network-programming

在 WCF 上使用原始套接字编程需要哪些实际的、现实的情况？我知道性能是一个，但还有其他的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T08:43:32.510

在某些情况下，您正在与需要通过套接字进行通信的第三方系统进行通信（我们必须使用一个）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:45:00.307

当连接另一端的软件对 .NET 或 WCF 一无所知时 - WCF netTcpBinding 假定两端都使用 WCF 实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T09:03:53.083

假设您需要从不支持 WCF 通信的外部设备发送接收命令。
假设您想将一些命令传递给连接到您的串行端口的设备。

# c++ - 使用 boost::asio 和 boost::thread 时出现“错误的文件描述符”

> ID：12402507
> 
> 赞同：6
> 
> 时间：2012-09-13T08:41:18.600
> 
> 标签：c++, boost, boost-asio, boost-thread

```
int func(boost::asio::ip::tcp::socket &socket)
{
    boost::system::error_code ec;
    socket.write_some(boost::asio::buffer("hello world!"), ec);
    cout << socket.is_open() << endl;
    if(ec)
    {
        cout << boost::system::system_error(ec).what() << endl;
    }
    return 0;
}

int main(int argc, char* argv[])
{
    using namespace boost::asio;
    io_service iosev;
    ip::tcp::acceptor acceptor(iosev, ip::tcp::endpoint(ip::tcp::v4(), 1000));

    while(1)
    {
        ip::tcp::socket socket(iosev);
        acceptor.accept(socket);
        boost::thread t = boost::thread(func, boost::ref(socket));
    }
    return 0;
} 
```

我想要一个新线程处理新连接。但是在函数“func”中，套接字没有打开，我得到了“错误的文件描述符”。我在文档和网络中阅读了一些示例，但它们是异步的。我认为这对于我的简单需求是没有必要的。

如何修复错误？任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-13T08:59:35.073

您的套接字是一个临时对象，您向它传递了一个引用，但该对象超出了范围并在线程处理它之前被销毁。使用`shared_ptr<socket>`或将它们保存在容器中。

# linux - 如何找到 bash 命令？

> ID：12402511
> 
> 赞同：0
> 
> 时间：2012-09-13T08:41:24.177
> 
> 标签：linux, bash, find, command

我想这很简单。我只想找到一个 bash 命令。例如，当我想知道存在哪些命令时，包含短语“user”。

所以我正在寻找的命令应该打印我所有包含用户的命令的位置，或者它可以告诉我哪些命令与名称一起存在。不过这样就好了。

我在so和google上搜索过，但是他们都只是谈论“find”命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:56:49.547

PATH 中包含“用户”的可执行文件或符号链接列表：

```
find $(echo $PATH | tr ':' ' ') -maxdepth 1 \( -type f -or -type l \) -name '*user*' -executable 
```

样本输出：

```
/usr/bin/users
/usr/bin/xdg-user-dir
/usr/bin/xdg-user-dirs-gtk-update
/usr/bin/users-admin
/usr/bin/xdg-user-dirs-update
/bin/fuser
/bin/fusermount
/bin/ntfs-3g.usermap
/usr/sbin/deluser
/usr/sbin/adduser
/usr/sbin/useradd
/usr/sbin/userdel
/usr/sbin/usermod
/usr/sbin/newusers 
```

也比 wormsparty 的变体快很多（无意冒犯：P）。结果几乎相同（他也返回目录，AFAIK）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-30T22:20:59.453

```
compgen -c | grep -i "user" 
```

> compgen [选项] [单词]
> 
> 根据选项为 word 生成可能的补全匹配，该选项可以是除了 -p 和 -r 之外的所有内置函数接受的选项，并将匹配写入标准输出。
> 
> 匹配的生成方式与可编程完成代码直接从具有相同标志的完成规范生成它们的方式相同。如果指定了 word，则仅显示匹配 word 的那些完成。
> 
> ## ...
> 
> -A 动作 该动作可以是以下之一，以生成可能的完成列表：
> 
> alias 别名。也可以指定为 -a。
> 
> arrayvar 数组变量名。
> 
> 绑定 Readline 键绑定名称（请参阅可绑定的 Readline 命令）。
> 
> builtin shell 内置命令的名称。也可以指定为 -b。
> 
> 命令 命令名称。也可以指定为 -c。
> 
> 目录 目录名称。也可以指定为 -d。
> 
> disabled 禁用的 shell 内置函数的名称。
> 
> enabled 已启用的 shell 内置函数的名称。
> 
> 导出的 shell 变量的名称。也可以指定为 -e。
> 
> 文件 文件名。也可以指定为 -f。
> 
> function shell 函数的名称。
> 
> 组 组名称。也可以指定为 -g。
> 
> helptopic 内置帮助接受的帮助主题（请参阅 Bash 内置）。
> 
> hostname 主机名，取自 HOSTFILE shell 变量指定的文件（请参阅 Bash 变量）。
> 
> 作业 作业名称，如果作业控制处于活动状态。也可以指定为 -j。
> 
> 关键字 Shell 保留字。也可以指定为 -k。
> 
> running 正在运行的作业的名称，如果作业控制处于活动状态。
> 
> 服务 服务名称。也可以指定为 -s。
> 
> setopt set 内置函数的 -o 选项的有效参数（请参阅 The Set Builtin）。
> 
> shopt 内置的 shopt 接受的 Shell 选项名称（请参阅 Bash 内置）。
> 
> 信号 信号名称。
> 
> 已停止的作业的名称，如果作业控制处于活动状态。
> 
> 用户 用户名。也可以指定为 -u。
> 
> variable 所有 shell 变量的名称。也可以指定为 -v。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T08:57:02.753

您可能想检查某些路径中的空格并使用更强大的正则表达式对其进行改进，但这可以解决问题：

```
#!/bin/sh

if [ $# -ne 1 ]; then
   echo "Usage: $0 pattern"
    exit 1
fi

for x in `echo "${PATH}" | sed 's/:/ /g'`; do
    for y in $x/*; do
        if [ -x "$y" ]; then
            if [ `echo "$y" | grep $1 | wc -l` -ne 0 ]; then
                echo "$y"
            fi
        fi
    done
done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T09:06:46.343

如果要查找目录中的所有命令，在 Linux 上可以使用：

```
find /bin -type f -perm -o+x  -name '*z*' 
```

在此示例中，它将列出 /bin 目录中名称中包含 az 的所有可执行文件（程序）。如果要在多个目录中搜索，可以编写脚本并循环调用 find，每个目录一次。

您可以将此与上一个答案结合起来，在您的路径上的所有目录中进行搜索：

```
find $(echo $PATH | tr ':' ' ') -type f -perm -o=x  -name '*z*' 
```

# android - 动态添加按钮并为每个按钮添加不同的功能

> ID：12402517
> 
> 赞同：0
> 
> 时间：2012-09-13T08:41:41.837
> 
> 标签：android, android-button

我在为动态创建的按钮添加功能时遇到问题

我想要做的是我有一个房子，我可以设置不同类型的房间，比如`BEDROOM, KITCHEN, GARAGE`等表示`BUTTONS`，然后每个房间都有不同类型的电器和其他东西，我也可以设置和表示`BUTTONS`。问题是，有些用户有不同的数量`ROOMS`，有些有 2`BEDROOMS`或 3，所以我必须使`BUTTONS`房间动态并为每个用户添加不同的功能`BUTTON`。我该如何实施？

例如：

```
Button room = new Button(this);
room.setText("Bedroom");
room.setID(1);
/* set function for this button like change the textView or add numbers */ 
```

然后当我再次单击按钮添加卧室时，它将创建一个新的`BEDROOM`但具有不同功能的。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:33:56.760

您需要将按钮属性“clickable”（以编程方式创建按钮时默认为 false）设置为 true 并为每个按钮设置 onClickListener。

```
Button room = new Button(this);
room.setText("Bedroom"); 
room.setID(1); 
room.setClickable(true);
room.setOnClickListener(new OnClickListener(){
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            // Here is where you'd put in the specific functionality for this button
        }
    }); 
```

# iphone - 如何在iphone中使用手机信号塔三角测量？

> ID：12402521
> 
> 赞同：0
> 
> 时间：2012-09-13T08:41:51.230
> 
> 标签：iphone, objective-c, ios, xcode, gps

在我的应用程序中，我不想使用位置服务。我想在 iphone 上使用蜂窝塔三角测量来获取坐标。

请告诉我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T08:43:55.847

使用名为`startMonitoringSignificantLocationChanges`. 来自[Apple 文档](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html)-

> startMonitoringSignificantLocationChanges 服务可显着节省电力并提供足以满足大多数应用程序的准确性。它使用设备的蜂窝无线电来确定用户的位置并报告该位置的变化，从而使系统能够比其他方式更积极地管理电源使用情况。

所以在代码中这就是它的样子 -

```
 self.locationManager     = [[[CLLocationManager alloc] init] autorelease];
 locationManager.delegate = self;
 [locationManager startMonitoringSignificantLocationChanges]; 
```

# sql-server - sql server 是否介意插入记录的方式？

> ID：12402524
> 
> 赞同：2
> 
> 时间：2012-09-13T08:41:53.910
> 
> 标签：sql-server, sql-server-2008-r2, sql-order-by

*（一个“它是如何工作的” - 问题）*

假设我有这张桌子：

```
 Id            val
    ------------------
    1             a       <--
    1             a
    1             a
    2             b       <--
    2             b
    2             b 
```

现在假设我想要标记的行：

我可以指望这个查询：

```
select id,val from (
select id , val , row_number() over (partition by id order by id) as rn
) k where rn=1 
```

给我*选定*的行？

（注意`order by`条款）。它会将订单视为插入的订单吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:47:40.653

不保证该行为。您的查询将返回两行，但哪些是未定义的。

当我尝试

```
create table #t (id int, val char(1), t timestamp)
insert #t  (id, val) values (1,'a')
insert #t  (id, val) values (1,'a')
insert #t  (id, val) values (2,'b')

insert #t  (id, val) values (1,'a')
insert #t  (id, val) values (2,'b')
insert #t  (id, val) values (2,'b')
select * from #t 

select * from ( 
select *, row_number() over (partition by id order by id) as rn from #t  
) k where rn=1 

drop table #t 
```

结果是可变的，具体取决于插入的顺序，但与第一个插入的行不一致。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T08:48:50.620

不，行的顺序只能由`ORDER BY`子句确定 - 如果您的`ORDER BY`子句在两行之间不是确定性的，那么它们返回的顺序是任意的。您需要添加一些东西来使它们唯一化才能做到这一点。但是，作为一般规则，大多数表都应该有一个唯一键或主键 - 从而为您提供可以订购的东西。

各种因素都会影响它，例如企业版中的旋转木马扫描、聚集索引的重新索引等。

# apache - 阿帕奇詹姆斯STMP洪水

> ID：12402525
> 
> 赞同：0
> 
> 时间：2012-09-13T08:41:55.707
> 
> 标签：apache, email, james, flooding

我想使用 James 作为中继来处理传入的电子邮件并通过 web 服务将它们放入系统中。它工作正常。但是我想处理由于向该服务器发送电子邮件的程序的错误配置而导致的最终洪水......无论如何要为这封电子邮件的发件人或这封电子邮件的目的地配置临时“禁止”状态的管理？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:35:30.410

SMPT HOOK的使用在这里很有用，我只写了一个

```
public class SMTPFloodProtectionHook implements RcptHook {
[...]
@Override
public HookResult doRcpt(SMTPSession session, MailAddress sender, MailAddress rcpt) {
    if (checkFloodSender(sender) || checkFloodReceiver(rcpt))
        return HookResult.deny();
    return HookResult.ok();
} 
```

并修改 smtpserver.conf

```
 <!-- The configuration handler chain -->
    <handlerchain>

        <handler class="org.domain.atgov.incomingevent.email.SMTPFloodProtectionHook" /> 
```

它拒绝比使用 mailet 更快。

# php - 过滤 facebook 图表结果

> ID：12402527
> 
> 赞同：2
> 
> 时间：2012-09-13T08:42:07.563
> 
> 标签：php, facebook, facebook-graph-api

我正在使用此 URL 检索某些用户的 Facebook 提要： [https](https://graph.facebook.com/) ://graph.facebook.com/ {id}/feed?access_token={access_token}

然后通过搜索“照片”类型并搜索“状态”或“链接”类型获取所有照片并获取它们的“消息”。

问题是某些结果是用户在封闭组上发布的帖子或其他私人内容且未显示在用户公共墙上的帖子。它还返回其他用户在他的墙上写的帖子。

问题是：我需要在那里进行更改，以便返回的结果仅包括（！）用户上传或标记的图片，用户发布的链接以及用户在其公共墙上发布的状态......没有别的……？？？

谢谢。

这是我处理所有这些的代码的一部分：

```
$graph_url = "https://graph.facebook.com/" . $facebook_id . "/feed?access_token=" . $facebook_at;
                $facebook_feeds = json_decode(file_get_contents($graph_url),true);
                $facebook_feeds = $facebook_feeds['data'];
                $fbIndex = 0;
                foreach ($facebook_feeds as $facebook_feed)
                {
                    $feed = new Feed();
                    $feed->network = 'facebook';
                    $feed->type = $facebook_feed['type'];
                    $feed->timestamp = strtotime($facebook_feed['created_time']);
                    if ( $feed->type == 'photo')
                        $feed->content = str_replace("_s.jpg", "_b.jpg", $facebook_feed['picture']);
                    else if (($feed->type == 'status' || $feed->type == 'link') && !empty($facebook_feed['message']))
                        $feed->content = $facebook_feed['message'];
                    else
                        continue;
                    $feeds[] = $feed;
                    if (++$fbIndex == 10)
                        break;
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T12:26:31.213

> 问题是：我需要在那里进行更改，以便返回的结果仅包括（！）用户上传或标记的图片，用户发布的链接以及用户在其公共墙上发布的状态......没有别的……？？？

您可以看看新引入的[字段扩展](https://developers.facebook.com/docs/reference/api/field_expansion/)功能是否可以帮助您；

否则，API 不允许进行太多“过滤”——如果您想要在这方面进行更多控制，您可能必须切换到 FQL 来获取数据。

# regex - 使用 Perl 修改文件

> ID：12402531
> 
> 赞同：-2
> 
> 时间：2012-09-13T08:42:34.293
> 
> 标签：regex, perl, xml-parsing

我有一个看起来像的 xml 文件

```
 <?xml version="1.0"?>
     <product = "AAA">
     <shell name = "110">
         <style = "000" size ="3"/>
         <style = "200" size ="3"/>
         <style = "800" size ="1"/>
         <style = "0900" size ="3"/>
     </shell name>
     </product>
     <product = "AAA">
     <shell name = "310">
         <style = "000" size ="3"/>
         <style = "200" size ="3"/>
         <style = "800" size ="1"/>
         <style = "0900" size ="3"/>
     </shell name>
     </product>
     <product = "BBB">
     <shell name = "10">
         <style = "000" size ="3"/>
         <style = "200" size ="3"/>
         <style = "800" size ="1"/>
         <style = "0900" size ="3"/>

     </shell name>
     </product>
     <product = "BBB">
      <shell name = "10010">
         <style = "0300" size ="3"/>
         <style = "2030" size ="3"/>
         <style = "8003" size ="1"/>
         <style = "09003" size ="3"/>
     </shell name>
     </product>
     <product = "BBB">
      <shell name = "110">
         <style = "0300" size ="3"/>
         <style = "2030" size ="3"/>
         <style = "8003" size ="1"/>
         <style = "09003" size ="3"/>
     </shell name>
     </product> 
```

我想编写一个脚本，该脚本应该包含同一产品的外壳，以便我有类似的输出

```
 <?xml version="1.0"?>
     <product = AAA>
     <shell name = "110">
         <style = "000" size ="3"/>
         <style = "200" size ="3"/>
         <style = "800" size ="1"/>
         <style = "0900" size ="3"/>
     </shell name>
    <shell name = "310">
         <style = "000" size ="3"/>
         <style = "200" size ="3"/>
         <style = "800" size ="1"/>
         <style = "0900" size ="3"/>
     </shell name>
   </product>
     <product = BBB>
    <shell name = "10">
         <style = "000" size ="3"/>
         <style = "200" size ="3"/>
         <style = "800" size ="1"/>
         <style = "0900" size ="3"/>
     </shell name>
     <shell name = "10010">
         <style = "0300" size ="3"/>
         <style = "2030" size ="3"/>
         <style = "8003" size ="1"/>
         <style = "09003" size ="3"/>
     </shell name>
     <shell name = "110">
         <style = "0300" size ="3"/>
         <style = "2030" size ="3"/>
         <style = "8003" size ="1"/>
         <style = "09003" size ="3"/>
     </shell name>
     </product> 
```

关于我如何进行的任何想法？？？我正在考虑搜索一个字符串 </product>

```
 <product = "AAA"> 
```

但我怎样才能达到第二次出现。我知道如何读取文件并计算特定字符串的出现次数，但是任何人都可以帮助我如何达到特定字符串的第二次出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T10:03:19.320

我将您的 XML 文件修改为格式正确：

```
<?xml version="1.0"?>
<products>
     <product id="AAA">
     <shell name="110">
         <style n="000" size="3"/>
         <style n="200" size="3"/>
         <style n="800" size="1"/>
         <style n="0900" size="3"/>
     </shell>
     </product>
     <product id="AAA">
     <shell name="310">
         <style n="000" size="3"/>
         <style n="200" size="3"/>
         <style n="800" size="1"/>
         <style n="0900" size="3"/>
     </shell>
     </product>
     <product id="BBB">
     <shell name="10">
         <style n="000" size="3"/>
         <style n="200" size="3"/>
         <style n="800" size="1"/>
         <style n="0900" size="3"/>

     </shell>
     </product>
     <product id="BBB">
      <shell name="10010">
         <style n="0300" size="3"/>
         <style n="2030" size="3"/>
         <style n="8003" size="1"/>
         <style n="09003" size="3"/>
     </shell>
     </product>
     <product id="BBB">
      <shell name="110">
         <style n="0300" size="3"/>
         <style n="2030" size="3"/>
         <style n="8003" size="1"/>
         <style n="09003" size="3"/>
     </shell>
     </product>
</products> 
```

然后我使用[XML::XSH2](http://p3rl.org/XML%3a%3aXSH2)处理它：

```
open 1.xml ;
for //product {
    my $id = @id ;
    mv shell append //product[@id=$id][1] ;
}
rm //product[not(shell)] ;
save --backup ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:37:11.853

使用 XML::Twig，您可以这样做：

```
#!/usr/bin/perl

use strict;
use warnings;

use XML::Twig;

XML::Twig->new( twig_handlers => { product => \&product },
                pretty_print => 'indented',
              )
         ->parsefile_inplace( 'so_conc.xml');

sub product
  { my( $t, $product)= @_;
    my $prev_product=  $product->prev_sibling( 'product') || return;
    if( $product->id eq $prev_product->id)
      { $product->first_child( 'shell')->move( last_child => $prev_product);
        $product->delete;
      }
    else
      { $t->flush_up_to( $prev_product); }
  } 
```

该`flush_up_to`行用于确保一次只将一个产品保存在内存中，并且与对 的调用一起`parsefile_inplace`更新原始文件。

# android - android jelly bean 不支持 target-densityDpi

> ID：12402532
> 
> 赞同：1
> 
> 时间：2012-09-13T08:42:35.143
> 
> 标签：android, meta-tags, viewport, dpi, android-4.2-jelly-bean

从果冻豆开始，我的 webapp 和 webview 中的视口渲染出现问题。

通常我使用带有这个参数的元视口来修复我的内容并有一个好的设计：

```
name="viewport" content=" width=device-width; 
                initial-scale=1.0; 
                maximum-scale=1.0; 
                user-scalable=no;
                target-densityDpi=device-dpi; 
```

但是对于 Jelly Bean，似乎不支持或忽略属性“target-densityDpi”。在galaxy nexus（720px*1280，设备像素比为2）上，窗口宽度大小为360px 而在galaxy nexus S（480*800，设备像素比为1.5）上，窗口宽度大小为360px。

我在 Android 开发者的网站上没有找到有关此主题的任何帮助或信息。

那么，目标密度真的被忽略了吗？？一个技巧可以强制 deviceDPi 吗？还是默认情况下我们被迫使用中密度屏幕？

如果有人有解决方案？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T17:17:19.100

这是一个老问题，但问题可能在于分号的使用。将分号更改为常规逗号并删除最后一个分号。

我在我的应用程序中使用以下视口元标记，它在 Jelly Bean 中正常工作。

```
<meta name="viewport" content="width=device-width, target-densitydpi=device-dpi, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T22:32:45.283

我使用这个 jQuery 在最新的 Chrome for Android 上实现了同样的事情：

```
<meta content='user-scalable=no, initial-scale=1, width=device-width' id='viewport' name='viewport'>

var viewPortScale = 1 / window.devicePixelRatio;

$('#viewport').attr('content', 'user-scalable=no, initial-scale='+viewPortScale+', width=device-width'); 
```

这会将初始比例视口元标记设置设置为 1 CSS 像素 == 1 设备像素的正确比例。

您不能使用 'width='+screen.width 因为 screen.width 不返回物理像素尺寸。我尝试在 Chrome 中的 Nexus 7 上使用[http://responsejs.com/labs/dimensions/ ，所有数字都是视口像素。](http://responsejs.com/labs/dimensions/)

# google-apps-script - Google Apps Script HTML Service 中的 JQuery UI 非常慢

> ID：12402537
> 
> 赞同：6
> 
> 时间：2012-09-13T08:43:05.383
> 
> 标签：google-apps-script

我正在尝试使用 JQuery UI 提供 Google Apps 脚本 HTML 服务。

我创建了一个带有日期字段的简单测试用例，但 datepicker 小部件的响应能力非常低。显示日期选择器至少需要 3 秒。导航到下个月也需要 3 秒。

我能做些什么来提高 JQuery UI 的性能吗？

这是 HTML 文件：

```
<html>
  <head>
    <link type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/themes/smoothness/jquery-ui.css" rel="Stylesheet" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/ui/1.8.23/jquery-ui.min.js"></script>
    <script>
      $(document).ready(function() {
        $('#date').datepicker();
      });
    </script>
  </head>

  <body>
    <input type="text" name="date" id="date">
  </body>
</html> 
```

来自 GS 的电话：

```
function doGet() {
  return HtmlService.createTemplateFromFile('test').evaluate();
} 
```

控制台日志显示：

```
Node not editable; no action performed. es53-taming-frame.opt.js:419
ode not editable; no action performed. es53-taming-frame.opt.js:419
bad value `fixed` for CSS property position es53-taming-frame.opt.js:419
https://ssl.gstatic.com/caja/4969/es53-taming-frame.opt.js?debug=1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T18:13:55.720

这是一个已知问题，我们正在努力加快速度。

# asp.net-mvc - Aspnet Web Api - 数据合约和操作

> ID：12402538
> 
> 赞同：0
> 
> 时间：2012-09-13T08:43:09.247
> 
> 标签：asp.net-mvc, wcf, asp.net-web-api

> **可能重复：**
> [ASP.NET web api：记录/指定服务](https://stackoverflow.com/questions/11881116/asp-net-web-api-documenting-specifying-a-service)

我是 Asp.net Web API 的新手。Web API 的输入和输出似乎没有正式的定义，这与基于 SOAP 的 API 不同，WSDL 文档包含对服务的请求和响应所需的所有模式。由于我过去在 WCF 的经验，我对这个概念非常熟悉。

客户端如何知道如何使用这些 API？我们需要提供“例子”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T16:22:58.637

我认为您最好的选择是使用 ASP.NET Web API 帮助页面 nuget 包 - [http://nuget.org/packages/Microsoft.AspNet.WebApi.HelpPage](http://nuget.org/packages/Microsoft.AspNet.WebApi.HelpPage)。它是在 Web API RTM 发布的同一天发布的，这就是为什么网络上还没有太多关于它的信息，以及为什么大多数人仍然会指向`IApiExplorer`.

MSFT 的 Yao Huang 有一个非常好的介绍截屏视频，介绍了如何使用它 - [http://blogs.msdn.com/b/yaohuang1/archive/2012/08/15/introducing-the-asp-net-web- api-帮助-页面-preview.aspx](http://blogs.msdn.com/b/yaohuang1/archive/2012/08/15/introducing-the-asp-net-web-api-help-page-preview.aspx)

它不像`IApiExplorer`（它在此之上运行）那么低级，并且对于大多数用例来说应该很好。

此外，如果您正在构建 REST 服务**，请不要使用 WSDL**。它不是为记录 REST 服务而设计的，它更接近于 RPC 类型的 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T18:01:14.020

[ApiExplorer](http://blogs.msdn.com/b/yaohuang1/archive/2012/05/21/asp-net-web-api-generating-a-web-api-help-page-using-apiexplorer.aspx)是使用 Asp.net Webapi 的方式。

由于没有 WSDL 或 REST API 的任何东西可以准确地告诉消费客户端有关暴露的操作/合同。Webapi 有 IApiExplorer，可用于生成您的 api 文档

# .net - .NET 中是否有任何基于消息的 TCP 套接字库？

> ID：12402542
> 
> 赞同：5
> 
> 时间：2012-09-13T08:43:14.463
> 
> 标签：.net, sockets, tcp

虽然我是套接字编程的新手，当我正在编写一个简单的 tcp 服务器-客户端程序时，我发现基于流的 api 使用起来并不方便。

我的程序很简单：

1.  客户端连接到服务器
2.  服务端不断向客户端发送消息，间隔出乎意料
3.  客户端接收消息并根据消息中包含的数据进行工作

但是，使用基于流的 api，我必须：

*   定义**消息定界符/分隔符**
*   使用`while`循环从流中读取数据
*   连接所有字节，尝试找到**分隔符**
*   如果存在**分隔符**，则拆分数据，提取消息

这是很多工作，甚至比我的程序的整个逻辑还要多，所以我想知道是否有一个库可以为我做上面的事情，有了这样的库，我可以像这样编程：

```
// Server
TcpListenerEx server = new TcpListenerEx();
TcpClientEx client = server.Accept();
client.SendMessage(new StringMessage("hello world"));

// Client
TcpClientEx client = new TcpClientEx();
client.Connect("localhost", 8989);
while (true) {
    IMessage message = client.ReadMesage();
    // Do work acording to message
} 
```

欢迎任何建议，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T08:51:53.583

另一个选择可能是 MSMQ，它是一个消息队列（而不是 TCP/IP 流），处理消息而不是字节流。MSMQ 本身可以使用多种传输方式，包括 TCP/IP 或 WCF 等。

如果您只处理 Windows（并且由于您提到了 .NET，这并不是一个不合理的限制），它适用于从 Windows 2000 开始的所有版本。

有一些很好的示例代码向您展示了使用它的基本方法，以及一些更高级的东西。这很简单，发件人基本上构建了一条消息并将其排队。侦听器收到完整的消息。

它再简单不过了，如果你想在 Windows 上进行消息传递，这是让它快速运行的最简单方法之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T08:56:50.797

在字节流中嵌入分隔符并不像看起来那么容易。您必须处理意外包含分隔符的消息。这会导致大量令人讨厌的检测和转义代码。

构建消息的一种非常简单的方法是添加长度前缀。在发送者上，您将消息序列化到缓冲区中，然后写入长度，然后写入缓冲区。接收方首先读取 4 个字节以获得长度。然后它读取正文。

这不是 .NET 内置的，可能是因为每个二进制协议都略有不同。

所有这些都非常简单，以至于您不太可能找到图书馆。这样的协议可以写成几十行。我的建议是自己做。

但是，如果您想构造您的消息，有*一个*很棒的库：[protobuf-net](http://code.google.com/p/protobuf-net/)（用于 .NET 的 Google 协议缓冲区）。它为您提供消息框架，并以非常理智的方式进行序列化。它很好地支持协议版本控制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T09:00:34.677

Apache Thrift 是另一种选择，它类似于 WCF，但更简单，并且不绑定到某个 .NET 框架。

[http://thrift.apache.org/](http://thrift.apache.org/)

它适用于 .NET 2，甚至适用于 Mono，

[http://thrift.apache.org/docs/install/](http://thrift.apache.org/docs/install/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T09:07:01.303

我认为**[SignalR](http://signalr.net/)**开源框架应该会有所帮助。

查看[快速入门示例](https://github.com/SignalR/SignalR/wiki)，看看它是否符合您的要求。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-02-10T16:08:45.000

现在你可能想考虑使用 WebSockets。

尽管有这个名字，它实际上是一个更通用的协议。它本质上是面向消息的。尽管消息可能会被拆分为帧，但有很多库会重新组合这些帧，以便您收到完整的消息。

由于这些库，您可以使用 WebSockets 而不是平台独立的。Node、.Net、纯浏览器 javascript - 没问题。

# profiling - 由于分支预测未命中，如何获得停顿周期？

> ID：12402543
> 
> 赞同：1
> 
> 时间：2012-09-13T08:43:17.670
> 
> 标签：profiling

问题是如何获得由于分支预测未命中而导致的停顿周期？

我正在使用 OProfile 收集程序的数据，但由于分支预测未命中，我找不到与停顿周期相关的任何事件。我使用的 CPU 是 Intel i7。

# java - 如何从 java 程序执行“javac 和 java 命令”？

> ID：12402547
> 
> 赞同：4
> 
> 时间：2012-09-13T08:43:27.313
> 
> 标签：java, javac

有没有办法从java程序执行“javac和java命令”？
如果是这样，请帮助我......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-13T08:45:07.700

喜欢`Runtime.getRuntime().exec("javac ...");`？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T08:46:31.553

您可以使用它`Runtime.getRuntime.exec()`来执行此操作。但是有一些常见的陷阱需要你处理。这篇关于[“当 Runtime.exec() 不能](http://www.javaworld.com/jw-12-2000/jw-1229-traps.html?page=4)正常工作”的文章重点介绍了其中一些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T08:47:06.673

您可以使用[ProcessBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)类

```
 ProcessBuilder pb =
   new ProcessBuilder("javac", "arg1, "arg2"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T08:55:55.490

我建议使用[http://docs.oracle.com/javase/6/docs/technotes/tools/](http://docs.oracle.com/javase/6/docs/technotes/tools/)而不是尝试执行 javac。它为您提供更多控制权并返回可用信息

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T09:50:20.873

我知道 打开资源管理器：<code>Runtime.getRuntime().exec("explorer"); `Runtime.getRuntime().exec("java");`所以我猜`Runtime.getRuntime().exec("javac");` 你可以试一试。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-23T00:15:42.127

我建议你使用[Apache Commons Exec](http://commons.apache.org/proper/commons-exec/tutorial.html)，它提供了一个简单的 API。干杯!

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-03T03:48:28.563

最好的方法是通过调用 os shell 然后通过 javac 和 java 工具来运行。

使用 inputstream 获取结果并打印

# c++ - 检查socket是否连接

> ID：12402549
> 
> 赞同：26
> 
> 时间：2012-09-13T08:43:29.933
> 
> 标签：c++, c, sockets, connection

我有一个应用程序需要在某个时间向服务器发送一些数据。简单的方法是关闭连接，然后在我想发送一些东西时再次打开它。但我想保持连接打开，所以当我想发送数据时，我首先使用这个函数检查连接：

```
bool is_connected(int sock)
{
    unsigned char buf;
    int err = recv(sock,&buf,1,MSG_PEEK);
    return err == -1 ? false : true;
} 
```

不好的部分是这不起作用。当没有数据要接收时它会挂起。我能做些什么？如何检查连接是否仍然打开？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-13T17:38:04.327

不要先检查然后发送。这是浪费精力并且无论如何都不会工作 - 状态可能会在您检查和发送之间发生变化。只要做你想做的事，如果失败就处理错误。

要检查状态，请使用：

```
int error_code;
int error_code_size = sizeof(error_code);
getsockopt(socket_fd, SOL_SOCKET, SO_ERROR, &error_code, &error_code_size); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-13T08:47:27.920

`O_NONBLOCK`您需要通过设置using来启用非阻塞行为`fcntl`。进行非阻塞读取的一种简单但非标准的方法是使用：

```
recv(sock, &buf, 1, MSG_PEEK | MSG_DONTWAIT); 
```

之后，如果失败，您**必须检查 errno。**它可以失败，`EAGAIN`也可以失败，`EBADF`等等`ENOTCONN`。

* * *

显然，处理这个问题的最简单和最干净的方法是避免“忘记”套接字是否连接。您会注意到一旦 a`recv`返回 0 或 a`send`返回，套接字是否断开连接`EPIPE`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-13T17:34:41.520

TCP 的默认使用不允许非常及时地检测死套接字（在正常关闭之外），所以我建议像这样的“is_connected”函数对于所有实际目的基本上是无用的。考虑实施应用层保持活动，并根据及时响应（或缺乏响应）跟踪它是否处于活动状态。

编辑：发布后我看到 BoBTFish 的链接，这实际上是一回事。

# ruby-on-rails - 单个哈希插入数组的多个 SQL 语句

> ID：12402555
> 
> 赞同：0
> 
> 时间：2012-09-13T08:43:39.520
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我正在做这样的事情来在我的 Rails 应用程序中同时插入多条记录。

```
VoteRecord.create(
  [
    { :prospect_id => prospect.id, :state => "OH", :election_type => "GE" },
    { :prospect_id => prospect.id, :state => "OH", :election_type => "PR" }
    ...
   ]  
) 
```

当我检查日志时，我看到插入查询被 sql 多次触发。是否可以在单个查询中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:52:41.443

您可以尝试[主动记录导入](https://github.com/zdennis/activerecord-import) 以进行批量导入、签出 wiki 和示例页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:03:47.637

我自己没有使用过，但你应该查看 activerecord-import 项目（用于 Rails 3） [github](https://github.com/zdennis/activerecord-import)更多信息可以在这里找到：[wiki](https://github.com/zdennis/activerecord-import/wiki)

# python - 如何设置 Matplotlib 轴图例的字体大小？

> ID：12402561
> 
> 赞同：62
> 
> 时间：2012-09-13T08:43:58.687
> 
> 标签：python, matplotlib, font-size, legend

我有这样的代码：

```
import matplotlib.pyplot as plt
from matplotlib.pyplot import *
from matplotlib.font_manager import FontProperties

fontP = FontProperties()
fontP.set_size('xx-small')
fig=plt.figure()
ax1=fig.add_subplot(111)
plot([1,2,3], label="test1")
ax1.legend(loc=0, ncol=1, bbox_to_anchor=(0, 0, 1, 1),
           prop = fontP,fancybox=True,shadow=False,title='LEGEND')
plt.show() 
```

![图例字体大小](../Images/0e80037d76877dea076e0abcf5a4b064.png)

从图中可以看出，Fontsize 中的设置不影响 Legend Title 的字体大小。

如何将图例标题的字体大小设置为较小的大小？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-06-13T17:34:00.880

这绝对是一个老问题，但也让我感到沮丧，其他答案都没有改变图例*标题*的字体大小，而是改变了其余的文本。因此，在将我的头撞到 matplotlib 文档上一段时间后，我想出了这个。

```
legend = ax1.legend(loc=0, ncol=1, bbox_to_anchor=(0, 0, 1, 1),
           prop = fontP,fancybox=True,shadow=False,title='LEGEND')

plt.setp(legend.get_title(),fontsize='xx-small') 
```

从 Matplotlib 3.0.3 开始，您还可以使用全局设置它

```
plt.rcParams['legend.title_fontsize'] = 'xx-small' 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-01-24T10:45:51.840

以下是如何更改图例列表和/或图例标题的字体大小：

```
legend=plt.legend(list,loc=(1.05,0.05), title=r'$\bf{Title}$') #Legend: list, location, Title (in bold)
legend.get_title().set_fontsize('6') #legend 'Title' fontsize
plt.setp(plt.gca().get_legend().get_texts(), fontsize='12') #legend 'list' fontsize 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2017-05-19T15:29:44.087

我的头也撞到了它，这是另一种更流畅的方式：

```
leg = ax.legend()
leg.set_title('A great legend',prop={'size':14}) 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2019-12-09T03:04:42.037

受当前最佳答案的启发，我找到了一种更自然的方法来更改图例中的字体大小。`fontsize`参数设置每个数据标签的字体大小`title_fontsize`，如果给图例一个标题，参数设置标题的字体大小。

```
import matplotlib.pyplot as plt
fig, ax = plt.subplots()
ax.plot([0,1,2],[2,1,2],label='test_data (fs=12)')
ax.legend(fontsize=12, title='TITLE (fs=30)',title_fontsize=30) 
```

给出这样的图：
[![在此处输入图像描述](../Images/d044a49a384836f5510b6c71b3e13ebd.png)](https://i.stack.imgur.com/dkWUI.png)

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2012-09-13T10:09:32.353

我不知道如何为单独的情节设置它，但我总是在全球范围内这样做：

```
plt.rc('legend',**{'fontsize':6}) 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2021-06-07T22:16:00.857

现在在 2021 年，您可以使用 matplotlib 3.4.2 设置您的图例字体

```
plt.legend(title="My Title", fontsize=10, title_fontsize=15) 
```

其中`fontsize`是图例中项目`title_fontsize`的字体大小，是图例标题的字体大小。[matplotlib 文档](https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.legend.html)中的更多信息

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2016-06-23T11:27:57.663

这是最快的：

```
plt.legend(loc=2,prop={'size':6}) 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2012-09-13T10:18:29.397

我一般都是这样做的。情节完成后，我将执行以下操作

```
plt.legend(loc=0, numpoints=1)
leg = plt.gca().get_legend()
ltext  = leg.get_texts()
plt.setp(ltext, fontsize='small') 
```

我不知道这是否适合你

# android - getSupportFragmentManager().putFragment 的问题

> ID：12402562
> 
> 赞同：3
> 
> 时间：2012-09-13T08:44:00.040
> 
> 标签：android

我正在开发一个 android 应用程序，我想将我的片段保存在矢量片段中。当我在 onSaveIstanceState 中使用 putFragment 时，系统会抛出 IllegalStateException

```
@Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        // Salviamo lo stato 

        //salvo all fragment
        for(int i=0;i<fragments.size();i++)
            getSupportFragmentManager().putFragment(outState, Integer.toString(i), fragments.get(i));

    } 
```

这是日志猫：

```
09-13 10:38:10.230: E/AndroidRuntime(24089): java.lang.IllegalStateException: Fragment GenericPageFragment{417716e0} is not currently in the FragmentManager
09-13 10:38:10.230: E/AndroidRuntime(24089):    at android.support.v4.app.FragmentManagerImpl.putFragment(FragmentManager.java:516)
09-13 10:38:10.230: E/AndroidRuntime(24089):    at it.intects.dashboard.droid.BaseActivity.onSaveInstanceState(BaseActivity.java:180)
09-13 10:38:10.230: E/AndroidRuntime(24089):    at android.app.Activity.performSaveInstanceState(Activity.java:1113)
09-13 10:38:10.230: E/AndroidRuntime(24089):    at android.app.Instrumentation.callActivityOnSaveInstanceState(Instrumentation.java:1188) 
```

为什么 ？我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:48:20.743

调用 savedInstanceState() 后，您不能进行任何片段事务。

当活动返回时，活动将恢复最后附加的片段。

如果您想对片段执行任何操作，请使用：

```
getSupportFragmentManager().beginTransaction().add(R.layout.container,new MyFragment(), "fragment_tag").commit(); 
```

[一个非常好的片段教程](https://www.youtube.com/watch?v=sCQ8EcM0HM0)

# abap - ABAP 中的字段符号和数据引用概念

> ID：12402564
> 
> 赞同：9
> 
> 时间：2012-09-13T08:44:05.863
> 
> 标签：abap

如果我们将 ABAP 字段符号和数据引用与 C 中的指针进行比较，我们会观察到：-

在 C 中，假设我们声明了一个变量“var”，类型为“integer”，默认值为“5”。

变量“var”将存储在内存中的某个位置，并且说保存该变量的内存地址是“1000”。

现在我们定义一个指针“ptr”，并将这个指针分配给我们的变量。

因此，“ptr”将是“1000”，“*ptr”将是 5。

让我们比较ABAP中的上述情况。

在这里，我们声明一个字段符号“FS”并将其分配给变量“var”。

现在我的问题是“FS”持有什么？我在互联网上对此进行了严格搜索，但发现许多ABAP顾问认为FS持有变量的地址即1000。但这是错误的。在调试时我发现 fs 只有 5。所以 fs（在 ABAP 中）等价于 *ptr（在 C 中）。如果我的理解有误，请纠正我。

现在让我们声明一个数据引用“dref”和另一个字段符号“fsym”，在创建数据引用后，我们将其分配给字段符号。现在我们可以对这个字段符号进行操作了。所以数据引用和字段符号之间的区别是：-

在字段符号的情况下，首先我们将声明一个变量并将其分配给字段符号。

在数据引用的情况下，我们首先创建一个数据引用，然后将其分配给字段符号。

那么数据引用有什么用呢？我们也可以通过字段符号实现相同的功能。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-13T12:34:57.427

字段符号很像一个指针，但您只能以取消引用的形式访问它。换句话说，它将在内部保存分配给它的变量的内存地址，但它不允许您查看内存地址，只能看到存储在它指向的变量中的数据。这可以证明，因为如果您更改指向内部表格行的字段符号的内容，您将看到更改将直接在该行中进行。

数据引用就像一个简单的指针，除了你不能像 C 中那样增加或减少内存地址（ptr++、ptr-- 等等）。它与字段符号不同，因为您可以比较两个数据引用以检查它们是否指向内存中完全相同的位置。比较两个字段符号将是一个简单的值比较。另一个区别是您可以使用 CREATE DATA 命令通过创建数据引用来动态分配内存。字段符号只能分配给已分配的变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T16:28:25.793

尽管数据引用和字段符号看起来非常相似并且经常以相似的方式使用（参见其他答案），但它们有着根本的不同。

数据引用是存储值的变量，就像字符串或整数一样。它们在内存中具有固定大小和内容。唯一的区别是这些引用是指向其他数据对象的指针，即内容具有特殊含义。它们不能指向任何地方，它们可以被取消引用，你可以将它们传递给其他例程，你可以操纵指针 ( `GET REFERENCE`) 或它指向的值。它没有什么特别之处，真的 - 只是你最喜欢的编程语言中所知道的指针。

字段符号不是“真正的”变量。该[文件](http://help.sap.com/saphelp_nw70/helpdata/en/fc/eb3860358411d1829f0000e829fbfe/frameset.htm)指出

> 他们没有为一个字段物理保留空间

字段符号实际上只是对 ABAP VM的本地[符号表的巧妙操作。](http://en.wikipedia.org/wiki/Symbol_table)我将尝试说明这一点 - 请注意，这是一个高度简化的模型。假设您声明了三个变量：

```
DATA: my_char TYPE c,
      my_int  TYPE i,
      my_ref  TYPE REF TO i. 
```

然后符号表将包含 - 除其他外 - 可能如下所示的条目：

```
name       type  size addr
------------------------------
MY_CHAR    c        1 0x123456
MY_INT     i        4 0x123457
MY_REF     r        ? 0x123461 
```

（我不确定参考变量的实际大小。）

这些条目仅指向包含这些值的地址。根据这些变量的范围，它们可能驻留在完全不同的内存区域中，但这不是我们目前关心的问题。重点是：

*   必须为变量保留内存（这是自动完成的，即使是引用）。
*   引用就像所有其他变量一样工作。

让我们为此添加一个字段符号：

```
FIELD-SYMBOLS: <my_fs> TYPE any. 
```

那么符号可能如下所示：

```
name       type  size addr     target
--------------------------------------
MY_CHAR    c        1 0x123456
MY_INT     i        4 0x123457
MY_REF     r        ? 0x123461
<MY_FS>    * 
```

字段符号在其初始状态（未分配）中创建。它没有指向任何地方，在这种状态下使用它会导致短暂的转储。重要的一点是：**它不像其他变量那样由“堆”内存支持。**让我们

```
ASSIGN my_char TO <my_fs>. 
```

同样，该符号可能如下所示：

```
name       type  size addr     target
--------------------------------------
MY_CHAR    c        1 0x123456
MY_INT     i        4 0x123457
MY_REF     r        ? 0x123461
<MY_FS>    *                   MY_CHAR 
```

现在，当访问 时`<my_fs>`，运行时系统会将其识别为字段符号，在符号表中查找当前目标并将所有操作重定向到 的实际位置`my_char`。另一方面，如果您发出命令

```
GET REFERENCE OF my_int INTO my_ref. 
```

符号表不会改变，但在“堆地址”0x123461，你会找到“地址”0x123457。`my_char = 'X'`只是一个像or的赋值`my_int = 42 * 2`。

这就是在一个非常简化的版本中，[您不能将字段符号作为更改参数传递并允许它们在子例程中重新分配的](https://stackoverflow.com/questions/12110641/abap-passing-field-symbols-into-form/12111074)原因。它们的存在方式与其他变量不同，并且它们在被添加到的符号表范围之外没有任何意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T10:01:39.693

字段符号在 ABAP 中存在的时间要长得多，它允许您在运行时操作和传递字段的值，而无需事先知道字段的**名称**。考虑这个用例：您有一个包含 20 个字段的结构，您可以按名称引用每个字段并将其分配给字段符号，然后更改特定字段的值等。

**数据**引用（`TYPE REF TO DATA`_

 **有关 的使用示例`CREATE DATA`，请参阅以下 SAP 帮助页面。它向您展示了如何使用 获取对引用对象（即 ABAP 对象引用）的引用`CREATE DATA`，这是您无法使用字段符号执行的操作：http: [//help.sap.com/abapdocu_70/en/ABAPCREATE_DATA_REFERENCE .htm](http://help.sap.com/abapdocu_70/en/ABAPCREATE_DATA_REFERENCE.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T10:03:47.763

字段符号是 - nomen est omen - 字段的符号。您将它分配给一个变量，它就成为该变量的别名。

引用和字段符号之间的主要区别在于，引用可以指向由 CREATE DATA 或 CREATE OBJECT 创建的匿名数据。必须始终将字段符号分配给现有变量。**

# c - fscanf使用c读取文件

> ID：12402570
> 
> 赞同：0
> 
> 时间：2012-09-13T08:44:32.460
> 
> 标签：c

我的 data.txt 内容是：

```
1 2 3 4 5 6
1 2 3 4 5 6
4 5 6 7 8 2 
```

我读取文件，并将值存储到二维 int 数组

```
 int record[line_number][6]; 
  int record2[line_number][8];
  int test;

  for(i = 0; i <line_number; i++)
  {
    for(j = 0; j <6; j++)
    {
      fscanf(fptr, "%d", &record[i][j]);
    }
  }
  int a=0;
  int b=0;
  for(a=0; a<i; a++) {
    for(b=0; b<6; b++) {
      printf("%d,", record[a][b]);
    }
    printf("\n");
  } 
```

输出像内存地址，我的代码有什么问题？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T08:48:12.133

您不检查 的返回值`fscanf()`，因此您不知道它对于所有转换是否真的成功。如果失败，则 in 的值`record[][]`将未初始化，打印出来将打印内存中发生的任何内容。

# tomcat - Tomcat 作为客户端。Tomcat 上的 Web 应用程序不使用 SSL 客户端证书

> ID：12402572
> 
> 赞同：2
> 
> 时间：2012-09-13T08:45:02.537
> 
> 标签：tomcat, web-applications, ssl, authentication

我在 Apache Tomcat 服务器 A 上有一个 Web 应用程序。这个 Web 应用程序连接到在其他地方运行的服务器 B。此服务器 B 需要使用 SSL 证书进行客户端身份验证。

我想要实现的是，让服务器 A 上的这个 Web 应用程序使用 SSL 客户端证书在服务器 B 上进行身份验证。

因此，我为我的 Tomcat 服务器 A 提供了一些额外的 JAVA_OPTS：

```
 -Djavax.net.ssl.trustStore=/location/keystore.jks 
    -Djavax.net.ssl.trustStorePassword=changeit 
    -Djavax.net.ssl.keyStore=/locaton/keystore.jks 
    -Djavax.net.ssl.keyStorePassword=changeit 
    -Djavax.net.debug=ssl 
```

现在这个 keystore.jks 包含三个证书：

*   CA 证书
*   服务器证书 (PKCS12) 这是服务器 A 的证书
*   客户端证书 (PKCS12) 这是我希望我的 webapp 使用的客户端证书。

tomcat/logs/catalina.out 给出了这个：

```
Client write key:
0000: some hex
Server write key:
0000:some hex
... no IV used for this cipher
*** CertificateVerify
pool-1-thread-2, WRITE: TLSv1 Handshake, length = 134
pool-1-thread-2, WRITE: TLSv1 Change Cipher Spec, length = 1
Finished
verify_data:  { data }

pool-1-thread-2, WRITE: TLSv1 Handshake, length = 32
pool-1-thread-2, READ: TLSv1 Alert, length = 2
pool-1-thread-2, RECV TLSv1 ALERT:  fatal, unsupported_certificate
pool-1-thread-2, called closeSocket()
pool-1-thread-2, handling exception: javax.net.ssl.SSLHandshakeException: Received fatal alert: unsupported_certificate
pool-1-thread-2, called close() 
```

为了证明这个密钥库的正确性，我编写了一个小型 Java 应用程序，它使用相同的密钥库连接到同一个服务器 B，并成功协商客户端证书。

我曾尝试将此客户端证书更改为 X509 类型，但即使这样我也遇到错误并且无法通信。

我想也许我错过了什么？有人有这种东西的经验吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:22:13.787

这看起来是因为没有为“客户端身份验证”使用启用客户端证书。您可以通过打开证书并检查“详细信息”选项卡下的“增强密钥使用”字段来进行验证。它应该在该字段中具有“客户端身份验证”。

# c++ - 用于管道/popen 的跨平台轻量级包装器

> ID：12402578
> 
> 赞同：1
> 
> 时间：2012-09-13T08:45:34.160
> 
> 标签：c++, cross-platform, pipe, wrapper, popen

我不想创建另一辆自行车并在 C++ 的 pipe/popen 下搜索轻量级（不是 boost、poco、ace 或其他库）跨平台（win/lin）包装器。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T09:13:00.973

也许像

```
#ifndef _WIN32
inline int _pipe(int fildes[2], unsigned psize, int textmode) {
   return pipe(fildes);
}
inline FILE* _popen(const char* command, const char* type) {
   return popen(command, type);
}
inline void _pclose(FILE* file) { 
   pclose(file); 
}
#endif 
```

MSDN 说CRT 中提供了[_popen](http://msdn.microsoft.com/en-us/library/96ayss4b.aspx)、[_pclose](http://msdn.microsoft.com/en-us/library/25xdhsd2.aspx)和[_pipe 。](http://msdn.microsoft.com/en-us/library/edze9h7e.aspx)所以我们只是将带下划线的函数转发到 Windows 之外的真正的 POSIX 函数（你可以做相反的事情，但请注意 _pipe 需要 2 个额外的参数，这在 Windows 中是有意义的）。

```
 ___________
                     /           \ 
                    |  Warning !  |
                     \___________/
                           |
 -------- __@      __@     | __@       __@      __~@
 ----- _`\<,_    _`\<,_    _`\<,_     _`\<,_    _`\<,_
 ---- (*)/ (*)  (*)/ (*)  (*)/ (*)  (*)/ (*)  (*)/ (*)
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
```

1.  这些函数只能在控制台程序中使用。它在 Windows GUI 程序中不起作用。有关详细信息，请参阅 _popen 的 MSDN 页面中的注释，另请参阅[Win32 API 中的 Posix popen() 等价物是什么？](https://stackoverflow.com/questions/450865/what-is-the-equivalent-to-posix-popen-in-the-win32-api).

2.  你知道 popen 在 shell 中执行命令吗？UNIX shell 和 Windows 命令提示符之间的语法有很大的不同，这些不能通过 pope/pclose 的一些跨平台实现来解决。

3.  Windows 函数和没有使用这些简单包装器处理的真正 POSIX 函数之间可能存在一些细微差别。

4.  您不能在 WinRT 中使用它们。

[[（自行车是从http://www.chris.com/ascii/index.php?art=transportation%2Fbicycles](http://www.chris.com/ascii/index.php?art=transportation%2Fbicycles)复制而来的。）]

# javascript - jQuery 为元素设置自定义尺寸

> ID：12402579
> 
> 赞同：2
> 
> 时间：2012-09-13T08:45:40.763
> 
> 标签：javascript, jquery, html, dimensions

我有一个 div，我想使用两个文本输入设置自定义尺寸。

```
<div id="theFrame"></div>
    width: <input id="custWidth" type="text">
    height: <input id="custHeight" type="text">
<br>
<button id="custSet">Set my width!</button> 
```

我试过用变量设置高度和宽度，但我现在不知道该怎么做。

```
var frame = $('div#theFrame');

$("#custWidth")
    .keyup(function () {
        var custWidth = $(this).attr('value');
    })
    .keyup();

$("#custHeight")
    .keyup(function () {
        var custHeight = $(this).attr('value');
    })
    .keyup();

$('#custSet')
    .click( function() {
        frame.css({height: custHeight, width: custWidth});
    }); 
```

谢谢。

[http://jsfiddle.net/Kyle_Sevenoaks/6MUuv/](http://jsfiddle.net/Kyle_Sevenoaks/6MUuv/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T08:48:52.893

```
var frame = $('div#theFrame');
var custWidth;
var custHeight;
$("#custWidth").keyup(function () {
      custWidth = $(this).attr('value');
    }).keyup();

$("#custHeight").keyup(function () {
      custHeight = $(this).attr('value');
    }).keyup();

$('#custSet').click( function() {
    frame.css({height: custHeight, width: custWidth});
}); 
```

您的变量范围已关闭。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T08:47:56.403

你的问题是那些宽度和高度的变量是有范围的。您需要在事件处理程序之外定义它们，然后在没有`var`之前的情况下将它们设置在其中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-13T08:48:51.713

在外部范围内声明你的变量：

```
var frame = $('div#theFrame');
var custWidth = 40;  // declared outside and assigned a default value
var custHeight = 40; // declared outside and assigned a default value

$("#custWidth").keyup(function () {
      custWidth = $(this).attr('value');
    }).keyup();

$("#custHeight").keyup(function () {
     custHeight = $(this).attr('value');
    }).keyup();

$('#custSet').click( function() {
    //frame.height(custHeight); // Alternative to .css() if you like, also doesn't need 'px' as it always is in pixels.
    //frame.width(custWidth);  // Alternative to .css() if you like, also doesn't need 'px' as it always is in pixels.
    frame.css({height: custHeight, width: custWidth});
}); 
```

### [演示](http://jsfiddle.net/6MUuv/7/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-13T08:47:55.880

在设置 CSS 时，您很可能需要包含“px”：

```
frame.css({height: custHeight + 'px', width: custWidth + 'px'}); 
```

此外，您需要全局定义 custHeight 和 custWidth 参数，因为它们仅在 key up 函数中是本地的。

```
var frame = $('div#theFrame'), custWidth = 0, custHeight = 0;

$("#custWidth")
    .keyup(function () {
        window.custWidth = $(this).attr('value');
    })
    .keyup(); 
```

而且...我相信您不需要那里的第二个 keyup() 调用：

```
$("#custWidth")
    .keyup(function () {
        window.custWidth = $(this).attr('value');
    }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-13T08:49:55.857

只需将两个变量设为全局 custWidth,custHeight

```
var frame = $('div#theFrame');
var custWidth,custHeight ;
$("#custWidth").keyup(function () {
      custWidth = $(this).attr('value');
}).keyup();

$("#custHeight").keyup(function () {
      custHeight = $(this).attr('value');
}).keyup();

$('#custSet').click( function() {
    frame.css({height: custHeight, width: custWidth});
}); 
```

# iphone - 将 ios 应用程序与 twitter api 集成的问题

> ID：12402581
> 
> 赞同：1
> 
> 时间：2012-09-13T08:45:50.890
> 
> 标签：iphone, ios4, twitter, integration, callbackurl

我使用 xcode 4.2 为 ios 4.2 及更高版本开发应用程序，所以我没有使用 ios5 twitter 框架。我参考了一个教程并从[该站点](https://mobiletuts.s3.amazonaws.com/75_twitter-api-iphone/X4-TwitterRushProjectCode.zip)下载了源代码。

kOAuthConsumerKey 和 secretkeys 被放置在代码中，项目运行良好，并请求权限来授权应用程序。

如果正确给出的用户名和密码并且点击了授权按钮，它会转到一个指定为回调 URL 的网页，同时为这个 ios 应用程序创建 twitter 应用程序。

我也尝试过使用[Sharekit](http://getsharekit.com/)。但是，同样的问题发生了。有什么问题，我认为callbackurl应该是我自己组织的网站链接。为什么在执行时调用该页面。我必须在我的应用程序中更改什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:28:52.453

我喜欢这个解决方案，试试[https://github.com/doubleencore/DETweetComposeViewController](https://github.com/doubleencore/DETweetComposeViewController)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T09:30:33.093

如果您在 Twitter 上使用 Sharekit 进行推文，那么 sharekit 会发生一些变化。

参考这个链接：http://www.iphonedevsdk.com/forum/iphone-sdk-development/91895-sharekit-twitter-in-ios-5.html

# iframe - iframe 中的目标框架（target="_blank" 不起作用）

> ID：12402584
> 
> 赞同：0
> 
> 时间：2012-09-13T08:46:29.640
> 
> 标签：iframe, frameset-iframe

我有一个小问题。我正在使用 iframe 插入横幅（带有指向外部网站的链接）。

```
<iframe src="http://wifi.tucado.com/ads/001.html" name="i001" target="_blank" frameset frameborder=0 id="i001" scrolling="no"></iframe> 
```

我遇到的问题是，当我单击框架内的横幅时，它会在框架内打开一个页面，我希望它在新窗口（或至少在父窗口中）中打开它。没有js或jquery有什么办法吗？如果没有，我应该在 jquery 中做什么才能使其正常工作？我试图在这里找到答案，但发现的只是非常具体的问题，这些问题并不直接面对我的问题。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:52:35.953

如果您可以控制在 iFrame ( `http://wifi.tucado.com/ads/001.html`) 中加载的源文件，请尝试在其中的链接中添加`target="_top"`或`target="_blank"`。

# objective-c - 在通过电子邮件发送之前更改声音文件名的副本

> ID：12402586
> 
> 赞同：0
> 
> 时间：2012-09-13T08:46:31.433
> 
> 标签：objective-c

我正在向电子邮件发送声音文件，但我只想为电子邮件更改其名称。

假设我拿了一些`sound.caf`，在我的文件夹中，我想留下它的名字，但是要复制它，更改它的名字，然后发送它。

我将展示我如何发送电子邮件，我需要最简单的方法来更改文件名而不影响原始文件名：

```
//send email log-------------------------
NSLog(@"mail");
[[CCDirector sharedDirector] pause];

picker = [[MFMailComposeViewController alloc] init];
picker.mailComposeDelegate = self;

 NSArray *toRecipients = [NSArray arrayWithObject:@"your email"];
[picker setToRecipients:toRecipients];

NSString *sound=[NSString stringWithFormat:@"sound%d.caf",[memoryInstnace getSoundToEdit]];  //here, i need to change the name of the copy .

NSArray *paths2 = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *dataPath = [[paths2 objectAtIndex:0] stringByAppendingPathComponent:sound];
NSData *data = [NSData dataWithContentsOfFile:dataPath];
[picker addAttachmentData:data mimeType:@"caf" fileName:sound];//

NSString *emailBody = @"my sound  ";
[picker setMessageBody:emailBody isHTML:NO];
[picker setSubject:@"  new message "];

//display the view
[[[CCDirector sharedDirector] view] addSubview:picker.view];
//[[CCDirector sharedDirector] stopAnimation];
[[CCDirector sharedDirector] pause]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:08:55.423

只需在此处输入您喜欢的文件名：

```
[picker addAttachmentData:data mimeType:@"caf" fileName:myFileName]; 
```

它将被接收为`myFileName`而不是`sound`. 实际上，您只是在电子邮件中附加了一些数据；这与数据的来源无关（可能是文件、网络等）；附加时，您指定在接收端将数据识别为附件的名称。

# facebook - 如果访问了应用托管站点，则重定向到我的应用

> ID：12402587
> 
> 赞同：2
> 
> 时间：2012-09-13T08:46:39.153
> 
> 标签：facebook, redirect, hosting

如果他/她尝试打开我的应用托管站点，我想要将用户重定向到我的应用的代码。例如：我的应用程序链接：[https](https://apps.facebook.com/gaming-zone/) ://apps.facebook.com/gaming-zone/ 应用程序托管链接： http: [//gaming-zone.herokuapp.com/](http://gaming-zone.herokuapp.com/)

我已经找到了一些代码，但是这些代码会不断地重定向用户，如果他在 facebook 上使用我的应用程序并且他正在玩任何游戏，那么它也会将用户重定向到应用程序主页。我想要仅在用户访问我的托管站点时重定向用户的确切代码。

这些是我已经找到的代码：

```
<script type='text/javascript'>
if (window.top.location == window.location) 
  window.top.location = 'https://apps.facebook.com/gaming-zone/';
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:52:42.023

问题是您无法读取 window.top.location 值。你只能写。奇怪，但就是这样。

选项 1：将您的应用挂载到页面选项卡并创建一个赞门。像门总是会在 facebook iframe 之外返回 false。

选项 2：在后端加载页面时检查签名的请求数据。

选项 3：其他选项是像您一样但在后端检查顶部 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T06:09:14.543

这是我使用的代码：

```
<script type="text/javascript">
  function NotInFacebookFrame() {
    return top === self;
  }
  function ReferrerIsFacebookApp() {
    if(document.referrer) {
      return document.referrer.indexOf("apps.facebook.com") != -1;
    }
    return false;
  }
  if (NotInFacebookFrame()) {
    top.location.replace("https://apps.facebook.com/YOUR_APP_NAMESPACE");
  }
</script> 
```

这会检查他们当前是否在 Facebook 框架中，并且**仅当他们不在**时才会将他们重定向到“https://apps.facebook.com/YOUR_APP_NAMESPACE”

**注意：**您可以在应用程序的任何页面上使用它，只需相应地更改 URL。

**例如：**如果您在[http://YourDomain.com/anotherpage.php](http://YourDomain.com/anotherpage.php)中使用它，您可以将上面代码中的 URL 更改为[https://apps.facebook.com/YOUR_APP_NAMESPACE/anotherpage.php](https://apps.facebook.com/YOUR_APP_NAMESPACE/anotherpage.php)

# jsf - 从richfaces 3.3.2 迁移到richfaces 4.0.0 final

> ID：12402588
> 
> 赞同：1
> 
> 时间：2012-09-13T08:46:53.690
> 
> 标签：jsf, richfaces

我正在尝试将 Web 应用程序从 Richfaces 3.3.2 迁移到 4.0.0，因此我更改了 web.xml 文件中的必要内容（servlet 映射“.xhtml”并删除了 Ajax4jsf 过滤器）。我还将richfaces 3 jar 更改为第4 个版本，但现在我遇到了一些错误，不知道如何解决它们：

```
The import org.ajax4jsf cannot be resolved
The import org.ajax4jsf cannot be resolved
The import org.ajax4jsf cannot be resolved
The import org.richfaces cannot be resolved
The import org.richfaces cannot be resolved
The import org.richfaces cannot be resolved
Incompatible conditional operand types UIComponent and UICalendar
UICalendar cannot be resolved to a type
HtmlToolTip cannot be resolved to a type
HtmlToolTip cannot be resolved to a type
HtmlToolTip cannot be resolved to a type
Incompatible conditional operand types UIViewRoot and AjaxViewRoot
AjaxViewRoot cannot be resolved to a type
AjaxViewRoot cannot be resolved to a type
org.ajax4jsf cannot be resolved to a type
EventsQueue cannot be resolved to a type
HtmlAjaxSupport cannot be resolved to a type
HtmlToolTip cannot be resolved to a type
Incompatible conditional operand types UIComponent and HtmlCalendar
HtmlCalendar cannot be resolved to a type
HtmlToolTip cannot be resolved to a type
HtmlToolTip cannot be resolved to a type
HtmlToolTip cannot be resolved to a type
HtmlToolTip cannot be resolved to a type
HtmlToolTip cannot be resolved to a type 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:50:41.497

缺少richfaces-core-impl 库

[Javadoc AjaxViewRoot v4](http://docs.jboss.org/richfaces/4.0.X/4.0.0.Alpha2/en-US/javadocs/richfaces-core-impl/org/ajax4jsf/component/AjaxViewRoot.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T06:48:51.667

删除 web.xml 文件中的 RichFaces 3.3 Ajax 过滤器

```
 <filter>
                <display-name>RichFaces Filter</display-name>
                <filter-name>richfaces</filter-name>
                <filter-class>org.ajax4jsf.Filter</filter-class>
          </filter>

            <filter-mapping>
                <filter-name>richfaces</filter-name>
                <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
                <dispatcher>REQUEST</dispatcher>
                <dispatcher>FORWARD</dispatcher>
                <dispatcher>INCLUDE</dispatcher>
            </filter-mapping> 
```

RichFaces 4.0.0 最终打开 webmvc-config.xml 文件添加这个

```
 <bean id="flowController" class="org.springframework.webflow.mvc.servlet.FlowController">
            <property name="flowExecutor" ref="flowExecutor" />
            <property name="ajaxHandler">
                <bean class="org.springframework.faces.webflow.JsfAjaxHandler" />
            </property>
        </bean> 
```

# java - 了解 EJB 事务类型

> ID：12402589
> 
> 赞同：1
> 
> 时间：2012-09-13T08:46:57.250
> 
> 标签：java, transactions, ejb

我的应用程序中有一些我无法理解的行为。我有 1 个有状态 bean，1 个无状态 bean，我想从 SLB 的 SFB 1 方法调用（解析 WEB 页面）。没关系，但是 SLB 调用业务方法将 JMS 消息发送到另一个应用程序，并且由于事务类型（必需）而同时接收到所有消息。

所以我已经将我的 sendind 方法的事务类型更改为 REQUIRES_NEW 但它是相同的，所有消息都是同时收到的。

通过将解析方法更改为 REQUIRES_NEW，我异步接收消息。那么如何解释这种行为呢？

总结一下：

```
SFB method -> REQUIRED

SLB method (parsing of WEB page, urls stored in String[]) -> REQUIRED

SLB method JMS -> REQUIRED

==> JMS messages are received synchronously

SFB method -> REQUIRED

SLB method -> REQUIRED

SLB method JMS -> REQUIRES_NEW

==> JMS messages are received synchronously

SFB method -> REQUIRED

SLB method -> REQUIRES_NEW

SLB method JMS -> REQUIRES_NEW

==> JMS messages are received asynchronously 
```

我希望案例 2 异步发送 JMS 消息...

感谢您的澄清

奥利维尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T09:07:31.897

您没有显示代码，但我怀疑您从同一个 SLB 实例的 parse 方法调用 SLB 中的 send 方法。在这种情况下，方法调用是直接的方法调用，不经过 bean 代理，因此 send 方法上的事务性注解被完全忽略。

你有

```
SFB -> transactional proxy -> SLB -> SLB 
```

你应该在哪里

```
SFB -> transactional proxy -> SLB -> transactional proxy -> SLB 
```

最简单的方法是将发送方法放在单独的 SLB 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T21:15:52.027

谢谢 JB Nizet（没有快速回复，因为我必须等待 8 小时才能回复 -> 我是 StackOverflow 的新手，需要声誉）

我已经测试使用新的 SLB 发送 JMS 消息，结果相同，但我的两个 SLB 强耦合，因为我将 TopicPublisher 和 JMS 消息传递给我的新测试 EJB。

我刚刚测试了在我的测试 EJB 中创建 TopicPublisher 和消息，并且......它的工作！

这是我的新 EJB：

```
package boursorama.stateless;

import javax.annotation.PostConstruct;
import javax.annotation.PreDestroy;
import javax.annotation.Resource;
import javax.ejb.LocalBean;
import javax.ejb.Stateless;
import javax.ejb.TransactionAttribute;
import javax.ejb.TransactionAttributeType;
import javax.jms.JMSException;
import javax.jms.Message;
import javax.jms.ObjectMessage;
import javax.jms.Topic;
import javax.jms.TopicConnection;
import javax.jms.TopicConnectionFactory;
import javax.jms.TopicPublisher;
import javax.jms.TopicSession;

@Stateless
@LocalBean
public class Test {

    @Resource(mappedName="jms/boursoramaTopicFactory")
    TopicConnectionFactory topicConnectionFactory;

    @Resource(mappedName="jms/boursoramaTopicDestination")
    Topic topic;

    private TopicConnection _topicConnection;
    private TopicSession _topicSession;
    private TopicPublisher _topicPublisher;

    @PostConstruct
    public void postConstruct(){

        try {
            _topicConnection = topicConnectionFactory.createTopicConnection();
            _topicSession = _topicConnection.createTopicSession(false, TopicSession.AUTO_ACKNOWLEDGE);
            _topicPublisher = _topicSession.createPublisher(topic);     
        } catch (JMSException e) {          
            e.printStackTrace();
        }       
    }

    @PreDestroy
    public void preDestroy(){
        try {
            _topicConnection.close();   
            _topicConnection = null;        
        } catch (JMSException e) {          
            e.printStackTrace();
        }    
    }

    public Test() {
        // TODO Auto-generated constructor stub
    }

    @TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
    public void test(){
        try {
            Message m = _topicSession.createObjectMessage();                
            _topicPublisher.send(m);
        } catch (JMSException e) {          
            e.printStackTrace();
        }
    }

    @TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
    public void test2(TopicPublisher to, Message m){
        try {
            to.send(m);
        } catch (JMSException e) {          
            e.printStackTrace();
        }
    }

    @TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
    public void test3(Message m){
        try {
            _topicPublisher.send(m);
        } catch (JMSException e) {          
            e.printStackTrace();
        }
    }

} 
```

当我调用 test() 或 test3() 时，我异步接收所有消息，但 test2() 一起发送消息。

如果我理解得很好，当方法之间共享某些资源（使用@Resource）时，我们无法在同一个 EJB 内部或外部管理事务（使用 REQUIRES_NEW）？我肯定有这种行为来尊重事务隔离吗？

再次感谢你

奥利维尔

# android - 将主题应用于 Android 中的动态单选按钮

> ID：12402593
> 
> 赞同：6
> 
> 时间：2012-09-13T08:47:17.980
> 
> 标签：android, styles, radio-button

我的应用程序中有一个主题，它定义了默认的文本外观和按钮样式。

```
<style name="AppTheme" parent="@android:style/Theme.Light.NoTitleBar.Fullscreen">
    <item name="android:textAppearance">@style/TextAppearance.Medium</item>
    <item name="android:textAppearanceLarge">@style/TextAppearance.Large</item>
    <item name="android:textAppearanceMedium">@style/TextAppearance.Small</item>
    <item name="android:textAppearanceSmall">@style/TextAppearance.Medium</item>
    <item name="android:textColorPrimary">#000000</item>
    <item name="android:textColorSecondary">#000000</item>
    <item name="android:textColorTertiary">#000000</item>
    <item name="android:buttonStyle">@style/Button</item>
</style>

<style name="TextAppearance" parent="@android:style/TextAppearance">
    <item name="android:textColor">?android:attr/textColorPrimary</item>
    <item name="android:textColorHint">?android:attr/textColorHint</item>
</style>

<style name="TextAppearance.Large">
    <item name="android:textColor">?android:attr/textColorPrimary</item>
    <item name="android:textSize">32dp</item>
    <item name="android:textStyle">bold</item>
</style>

<style name="TextAppearance.Medium">
    <item name="android:textColor">?android:attr/textColorSecondary</item>
    <item name="android:textSize">22dp</item>
</style>

<style name="TextAppearance.Small">
    <item name="android:textColor">?android:attr/textColorTertiary</item>
    <item name="android:textSize">18dp</item>
</style>

<style name="Button" parent="@android:style/Widget.Button">
    <item name="android:textColor">?android:attr/textColorSecondary</item>
    <item name="android:textColorHint">?android:attr/textColorHint</item>
    <item name="android:textStyle">normal</item>
    <item name="android:textAppearance">?android:attr/textAppearanceSmall</item>
</style> 
```

当我使用创建 RadioButton

```
RadioButton radioButton = new RadioButton(this, null, R.style.AppTheme); 
```

RadioButton 已创建并且文本样式正确，但选中的标记消失了。为什么？

我在按钮组中有 Radiobutton，我在其中动态添加按钮。当我通过布局添加按钮时，标记会正确显示。但是动态添加的按钮没有。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-14T08:46:18.750

解决方案是使用 RadioButton(this) 构造函数。

使用 defStyle-Constructor 设置的所有样式都被忽略并删除了标记。我不确定这是一个错误还是没有记录。

我实际上不需要它，因为我的 styles.xml 中的其他样式现在自动应用于按钮，但如果有人感兴趣：

添加

```
<item name="android:radioButtonStyle">@style/MyRadioButton</item> 
```

到我的“AppTheme”-样式和

```
<style name="MyRadioButton" parent="@android:style/Widget.CompoundButton.RadioButton">
    <item name="android:textSize">5dp</item>
</style> 
```

到 style.xml 使我所有的单选按钮显示标记并对文本设置样式（**而不**在构造函数中设置）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-30T14:30:14.457

至于我，仅通过使用充气机就已成功解决：

```
 LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    ...
    RadioButton rb = (RadioButton) inflater.inflate(R.layout.radio_butt, null); 
```

[看看完整的答案！](https://stackoverflow.com/a/50607099/8644557)

希望，它会帮助某人。

# r - 如何在 R 中绘制重叠时间序列？

> ID：12402594
> 
> 赞同：25
> 
> 时间：2012-09-13T08:47:17.467
> 
> 标签：r, plot

我想及时比较两个不同变量的值。

例如，有两个数据集：

dataset1（日期，值）和 dataset2（日期，值）

为了首先绘制，我们可以执行以下操作：

```
x.Date <- as.Date(dataset1$Date)
    x <- zoo(dataset1$Value, x.Date)
    plot(x) 
```

我想在同一个窗口中添加（dataset2$value，dataset2$Date），并偶然设置不同的颜色。

值 dataset1$Date 和 dataset2$Date 不一定相同（有些日子可能重叠，有些不重叠），例如 dataset1$Date 可能包含 (dec01, dec02, dec03, dec05) 和 dataset2$Date (dec02, dec03, dec06 ）。

有谁知道如何在同一个窗口中绘制两个（或多个）时间图？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-13T09:05:31.710

有几种选择。以下是使用`zoo`对象的三个选项。

```
set.seed(1)
xz = zoo(ts(rnorm(20), frequency = 4, start = c(1959, 2)))
yz = zoo(ts(rnorm(20), frequency = 4, start = c(1959, 2)))
# Basic approach
plot(xz)
lines(yz, col = "red")
# Panels
plot.zoo(cbind(xz, yz))
# Overplotted
plot.zoo(cbind(xz, yz), 
         plot.type = "single", 
         col = c("red", "blue")) 
```

* * *

如果您正在绘制常规`ts`对象，您还可以探索`ts.plot`：

```
set.seed(1)
x = ts(rnorm(20), frequency = 4, start = c(1959, 2))
y = ts(rnorm(20), frequency = 4, start = c(1959, 2))
ts.plot(x, y, gpars = list(col = c("black", "red"))) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-07-16T13:43:30.110

我手头有同样的任务，经过一些研究，我在 r 中遇到了 ts.plot {stats} 函数，这非常有帮助。

该函数的用法如下：

```
 ts.plot(..., gpars = list()) 
```

gpars 是图形参数，您可以在其中指定绘图的图形组件。

我有一个与此类似的数据并存储在一个名为 time 的变量中：

```
 [,1] [,2]  [,3]  [,4] [,5]  [,6]  [,7]  [,8]   [,9] [,10]
    V3     1951 1100   433  5638 1760  2385  2602 11007   2490   421
    V5      433  880   216  4988  220  8241 13229 18704   6289   421
    V7     4001  440   433  3686  880  9976 12795 21036  13229  1263
    V9     2385 1320   650  8241  440 12795 13229 19518  11711  1474
    V11    4771  880  1084  6723    0 17783 17566 27326  11060   210
    V13    6940  880  2168  2602 1320 21036 16265 10843  15831  1474
    V15    3903 1760  1951  3470    0 18217 14964     0  13663  2465
    V17    4771  440  2819  8458  880 25591 24940  1518  17783  1895
    V19    7807 1760  5205  2385    0 14096 22771 13880  12578  1263
    V21    5205  880  5205  6506  880 28410 18217 13229  19952  1474
    V23    6506 1760  5638  7590  880 14747 26675 11928  12795  1474
    V25    7373  440  5855 10626    0 19301 21470 15398  19952  1895
    V27    5638 2640  6289     0  880 16482 20603 30796  14313  2316
    V29    8241  440  6506  6723  880 11277 35784 25157  23205  4423
    V31    7373 2640  6072  8891  220 17133 27109 31013  27287  4001
    V33    6723  660  5855 14313  660  6940 26892 17566  24111  4844
    V35    9325 2420  9325 12578    0  6506 30796 34483  23422  5476
    V37    4771  440  6872 12361  880  9325 36218 25808  30362  4844
    V39    9976 2640  7658 12361  440 11277 36001 31013  40555  4633
    V41   10410  880  6506 12795  440 26241 33398 27976  24940  5686
    V43    5638 2200  7590 14313    0  9976 34483 29928  33832  6108
    V45   10843  440  8675 11711  440  7807 29278 24940  43375  4633
    V47    8675 1760  8891 13663    0  9108 38386 31230  33398  4633
    V49   10410 1760  9542 13880  440  8675 39051 31446  42507  5476
        .   .   .   .   .   .   .   .   . 
```

而且我必须为同一图上的每一列获取时间序列图。代码如下：

```
 ts.plot(time,gpars= list(col=rainbow(10))) 
```

图表的结果如下所示。 ![单个图中的多个时间序列](../Images/2f9df1bcf2c48e72d5b0bd3c66f63cba.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-13T09:21:42.810

使用ggplot2怎么样？

```
library(ggplot2)

dta <- data.frame(year = 2012,
    month = rep(seq(1,9),each=10),
    day = sample(seq(1,20),90,replace=T),
    Group = sample(c('A','B'),90,replace=T),
    Value = seq(1,90)
)

dta$Date <- apply(dta[,c('year','month','day')],1,paste,sep='',collapse='-')
dta$Date <- as.Date(dta$Date)

qplot(Date,Value,data=dta,geom='line',color=Group) 
```

在您描述的情况下，我将按`dta`以下方式组装

```
dataset1$Group <- 'dataset1'
dataset2$Group <- 'dataset2'
dta <- rbind(dataset1,dataset2)
dta$Date <- as.Date(dta$Date) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-11-27T10:51:47.940

以下对我有用。假设您有两个时间序列向量 x1 和 x2，并且您希望将它们叠加在一个图上。

```
library("tseries")    
comb_ts <- cbind(x1, x2) # please make sure the length of both your timeseries
plot.ts(comb_ts, plot.type = "single") 
```

我得到以下情节 -[![组合时间序列](../Images/e60fef75f2781700bb3a07fa9128adce.png)](https://i.stack.imgur.com/FcrLf.png)

希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-09T07:14:50.513

如果您正在使用 xts 对象（如股票数据），您可以使用 higcharter 包。

```
 library(quantmod)
  sbi <- getSymbols("SBIN.BO", src="yahoo",auto.assign = F)
  rel <- getSymbols("RELIANCE.NS", src="yahoo",auto.assign = F)
  infy <- getSymbols("INFY.NS", src="yahoo",auto.assign = F)

  library(highcharter)
   highchart(type = "stock")  %>% 
   hc_add_series(sbi) %>% 
   hc_add_series(rel) %>% 
   hc_add_series(infy) %>% hc_title(text = "infy/sbi/rel") 
```

# java - 转换为 java.util.Date 时的 Joda LocalDateTime IllegalFieldValueException

> ID：12402595
> 
> 赞同：3
> 
> 时间：2012-09-13T08:47:25.393
> 
> 标签：java, jodatime

我第一次使用 JodaTime，不明白这有什么问题：

```
LocalDateTime localDateTime = new LocalDateTime(1965, 4, 8, 15, 16, 17, 18);
Date date = localDateTime.toDate(); 
```

当我运行它时，我得到：

```
org.joda.time.IllegalFieldValueException: Value -982 for millisOfSecond must be in the range [0,999] 
```

但如果我这样做（没有毫秒），我不会得到例外：

```
LocalDateTime localDateTime = new LocalDateTime(1965, 4, 8, 15, 16, 17);
Date date = localDateTime.toDate(); 
```

而且我没有得到例外（即年= 1975）：

```
LocalDateTime localDateTime = new LocalDateTime(1975, 4, 8, 15, 16, 17, 18);
Date date = localDateTime.toDate(); 
```

这是怎么回事？转换为 java.util.Date 是否有一些限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:51:38.290

以下通常是正确的。但这次不是。

~~始终`.getMillis()`在 Joda 中使用 - 它会给你从 Epoch 开始的毫秒时间范围，并允许完美的（Java API）`Date()`构造 - 像这样：`new Date(millis)`.~~

所以，总结一下：

```
LocalDateTime localDateTime = new LocalDateTime(1975, 4, 8, 15, 16, 17, 18);
Date date = new Date(localDateTime.getLocalMillis()); 
```

 ~~这是实际有效的解决方案：

```
LocalDateTime ldt = new LocalDateTime( 1975, 4, 8, 15, 16, 17, 18 );        
DateTime dt = new DateTime( ldt.getYear(), ldt.getMonthOfYear(), ldt.getDayOfMonth(), ldt.getHourOfDay(), ldt.getMinuteOfHour(), ldt.getSecondOfMinute(), ldt.getMillisOfSecond());
Date d = new Date( dt.getMillis() ); 
```

1965 年在 Epoch 之前......我不知道它如何影响 Date 和 Millis，但是，是的，只是说。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T11:39:24.613

```
 LocalDateTime localDateTime = new LocalDateTime(1965, 4, 8, 15, 16, 17, 18);
  Date date = localDateTime.toDateTime().toDate(); 
```~~

# r - rDrop dropbox api 未过期令牌/无缝令牌问题

> ID：12402601
> 
> 赞同：3
> 
> 时间：2012-09-13T08:47:48.340
> 
> 标签：r, token, dropbox, dropbox-api

我正在使用[https://github.com/karthikram/rDrop](https://github.com/karthikram/rDrop)`rDrop`提供的包，经过一些调整（因为所有功能都不像你一直期望的那样工作）我得到了它最终以我想要的方式工作，但它仍然需要授权验证以允许使用该应用程序，一旦你每次获得令牌，因为我认为令牌会随着时间的推移而过期......（如果不是这种情况并且我可以在我的令牌中进行硬编码，请告诉我，这也是一个很好的解决方案......）

基本上，我想要一种近乎无缝的方式，从 R 中的命令行在一行代码中从我的保管箱文件夹下载 csv 文件，这样我就不需要在令牌请求后单击允许按钮。

这可能吗？

这是我用来包装保管箱 csv 下载的代码。

```
db.csv.download <- function(dropbox.path, ...){

cKey <- getOption('DropboxKey')
cSecret <- getOption('DropboxSecret')
reqURL <- "https://api.dropbox.com/1/oauth/request_token"
authURL <- "https://www.dropbox.com/1/oauth/authorize"
accessURL <- "https://api.dropbox.com/1/oauth/access_token/"

require(devtools)
install_github("ROAuth", "ropensci")
install_github("rDrop", "karthikram")
require(rDrop)
dropbox_oa <- oauth(cKey, cSecret, reqURL, authURL, accessURL, obj = new("DropboxCredentials"))
cred <- handshake(dropbox_oa, post = TRUE)
raw.data <- dropbox_get(cred,dropbox.path)
data <- read.csv(textConnection(raw.data), ...)
data
} 
```

哦，如果不是很明显，我已将我的保管箱密钥和秘密放在我的 .Rprofile 文件中，这就是 getOption 部分所指的内容。

提前感谢您提供的任何帮助。（对于奖励积分......如果有人知道如何摆脱所有加载消息，即使安装会很棒......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T23:45:27.003

```
library(rDrop) 
# my keys are in my .rprofile, otherwise specifiy inline
db_token <- dropbox_auth()
# Hit ok to authorize once through the browser and hit enter back at the R prompt.
save(db_token, file="my_dropbox_token.rdata") 
```

Dropbox 令牌不会过期，可以随时从[Dropbox 网络面板](https://www2.dropbox.com/account#applications)撤销。

供将来使用：

```
library(rDrop)
load('~/Desktop/my_dropbox_token.rdata')
df <- data.frame(x=1:10, y=rnorm(10))
> df
    x          y
1   1 -0.6135835
2   2  0.3624928
3   3  0.5138807
4   4 -0.2824156
5   5  0.9230591
6   6  0.6759700
7   7 -1.9744624
8   8 -1.2061920
9   9  0.9481213
10 10 -0.5997218
dropbox_save(db_token, list(df), file="foo", ext=".rda")
rm(df)
df2 <- db.read.csv(db_token, file='foo.rda')
> df2
    x          y
1   1 -0.6135835
2   2  0.3624928
3   3  0.5138807
4   4 -0.2824156
5   5  0.9230591
6   6  0.6759700
7   7 -1.9744624
8   8 -1.2061920
9   9  0.9481213
10 10 -0.5997218 
```

如果您有其他问题，请提出[问题](https://github.com/karthikram/rDrop/issues/new)。

# iphone - 与 iPhone5 和反向兼容的应用程序

> ID：12402608
> 
> 赞同：4
> 
> 时间：2012-09-13T08:48:04.890
> 
> 标签：iphone, iphone-5

我知道为 iPhone5 之前的 iPhone 开发的应用程序正在信箱中运行。但是反过来呢。更新至 iPhone5 标准的应用程序。它如何在 iPhone4 上运行？

如果没有，当所有开发人员都更新了他们的应用程序时，旧 iPhone 将没有应用程序或更新？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T23:56:09.337

这更适合 MonoTouch，但同样的技术也适用于 Obj-C：

[http://redth.info/get-your-monotouch-apps-ready-for-iphone-5-ios-6-today/](http://redth.info/get-your-monotouch-apps-ready-for-iphone-5-ios-6-today/)

基本上 Default-568h@2x.png 文件会告诉 iOS 它是一个“高大”的应用程序。对于其他图像资产，您需要通过检查 UIScreen 的 MainScreen 的 Bounds 以及它是否是 iPhone 惯用语然后查看高度是否为 1136（检查比例值）来检测它是否是高设备，然后选择一个在这种情况下，不同大小的图像。

这是 C# 代码，但它再次非常接近 Obj-C：

```
public static bool IsTall
{
  get 
  { 
    return UIDevice.CurrentDevice.UserInterfaceIdiom 
             == UIUserInterfaceIdiom.Phone 
           && UIScreen.MainScreen.Bounds.Height 
             * UIScreen.MainScreen.Scale >= 1136;
  }     
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T17:27:25.930

只需将名为 Default-568h@2x.png (640x1136) 的图像添加到您的项目中，它就会像魔术一样工作！难以置信它是多么容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T08:50:27.453

他们将需要使用 AutoLayout 或类似的东西相应地调整他们的布局。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-13T08:50:23.490

他们当然会工作。如果您不将它们编码为自动缩小或使用较小的图像，那么它只会在顶部或底部被切断。

# c# - 查找简单控制台 C# 程序消耗的内存

> ID：12402613
> 
> 赞同：2
> 
> 时间：2012-09-13T08:48:16.293
> 
> 标签：c#, c++, .net, frameworks, system.diagnostics

我需要找出简单的控制台 C# 程序消耗的时间和内存。

.Net 框架有秒表实用程序来完成第一个任务，

```
 Stopwatch sw = new Stopwatch();
        sw.Start();
        Process process = Process.GetCurrentProcess();
        long memoryUsedInBytes = process.WorkingSet64;

        //do something            

        sw.Stop();
        Console.WriteLine(sw.Elapsed.Milliseconds + "ms elapsed.\n" + memoryUsedInBytes/1000 + " KB consumed"); 
```

我们在框架中是否有一些像这样简单的东西来查找简单控制台程序消耗的内存，而不使用高级诊断技术。

编辑：附加内存使用代码，如下所示，由 Habib 回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T08:51:07.563

您可以获取当前[进程](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)，然后使用属性[WorkingSet64](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.workingset64.aspx)可以获取以字节为单位的大小。

[Process.WorkingSet64 属性 - MSDN](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.workingset64.aspx)

> 获取为关联进程分配的物理内存量。

还

> 此属性可用于监视具有 32 位处理器或 64 位处理器的计算机上的内存使用情况。该属性值相当于进程的工作集性能计数器。

```
Process process = System.Diagnostics.Process.GetCurrentProcess();
long memoryUsedInBytes = process.WorkingSet64; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T08:54:45.630

.NET 进程公开了一组相当丰富的性能计数器。您可以使用 Windows 的性能监视器将计数器添加到图形中，可以是通用内存计数器（分配的字节等）或 .NET 特定的计数器，例如每次 GC 生成中的字节等：

![在此处输入图像描述](../Images/dcc664814c142254d484148e771e68e6.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T08:52:36.887

似乎垃圾收集器可以帮助您

[http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/8bfa495b-bed2-40fd-adbd-cb998b74af32](http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/8bfa495b-bed2-40fd-adbd-cb998b74af32)

```
GC.GetTotalMemory() 
```

# jquery-animate - 单击更改 jquery 功能

> ID：12402616
> 
> 赞同：1
> 
> 时间：2012-09-13T08:48:24.643
> 
> 标签：jquery-animate, jquery

我写了一个函数来根据它的内容改变容器的高度

```
function heightChange()
{
var h1 = $("#primary-page .entry-content-pageAbout").height();
var h2 = 550;
var max = Math.max(h1,h2);
$('#content').height(max);
} 
```

它适用于`$(window).resize`

我想改变点击的高度，所以我写了这个

```
$(".entry-content-sublinksAbout a:eq(0)").click(function(){
$(".entry-content-page-holder").animate({top:-420}, 800,'easeInOutCubic');
heightChange();
}); 
```

我的问题是点击我想获得这个功能，也想从我刚刚在点击时动画`top:-420`的总高度中扣除。`#content`

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:55:24.703

老实说，我不确定您在这里要求什么，但这会有所帮助吗？

```
function heightChange(a) {
    $(".entry-content-page-holder").animate({top:-420}, 800,'easeInOutCubic');
    var h1 = $("#primary-page .entry-content-pageAbout").height();
    var h2 = 550;
    var h3 = a;
    var max = Math.max(h1,h2);
    max = max - h3;
    $('#content').height(max);
}

$(".entry-content-sublinksAbout a:eq(0)").click(function(){
    heightChange(420);
});

$(window).resize(function() {
    heightChange(0);
}); 
```

# sql - 对于 CONTAINS 全文谓词，SQL Server 2008 中的逻辑短路似乎失败

> ID：12402617
> 
> 赞同：2
> 
> 时间：2012-09-13T08:48:25.673
> 
> 标签：sql, sql-server, contains, full-text-search

我有一个非常复杂的查询，它有时会非常缓慢地返回结果。从一开始就很清楚，罪魁祸首是与全文搜索有关的 WHERE 子句的一部分。所以我将其隔离并进行了测试。该测试导致确定它何时发生，但到目前为止我未能弄清楚如何修复它。这是问题所在：

我需要根据用户想要执行的操作筛选一个、两个或三个全文索引列。因为似乎 CONTAINS 谓词中的列列表不能作为变量提供，所以我能想到的下一个最好的办法是使用一些标准的布尔逻辑，如下所示：

```
(((@SearchInName = 0 AND @SearchInShortDescr = 0 AND @SearchInHTMLDescr = 0) OR @SearchExpression = '""')
OR (@SearchInName = 1 AND @SearchInShortDescr = 0 AND @SearchInHTMLDescr = 0 AND CONTAINS(ProductName, @SearchExpression))
OR (@SearchInName = 0 AND @SearchInShortDescr = 1 AND @SearchInHTMLDescr = 0 AND CONTAINS(ProductShortDescr, @SearchExpression))
OR (@SearchInName = 0 AND @SearchInShortDescr = 0 AND @SearchInHTMLDescr = 1 AND CONTAINS(ProductDescrHTML, @SearchExpression))
OR (@SearchInName = 1 AND @SearchInShortDescr = 1 AND @SearchInHTMLDescr = 0 AND CONTAINS((ProductName, ProductShortDescr), @SearchExpression))
OR (@SearchInName = 1 AND @SearchInShortDescr = 0 AND @SearchInHTMLDescr = 1 AND CONTAINS((ProductName, ProductDescrHTML), @SearchExpression))
OR (@SearchInName = 0 AND @SearchInShortDescr = 1 AND @SearchInHTMLDescr = 1 AND CONTAINS((ProductShortDescr, ProductDescrHTML), @SearchExpression))
OR (@SearchInName = 1 AND @SearchInShortDescr = 1 AND @SearchInHTMLDescr = 1 AND CONTAINS((ProductName, ProductShortDescr, ProductDescrHTML), @SearchExpression)) 
```

只要实际的有效条件与最后一个 OR 部分匹配，那就可以了，并且可以按预期（快速）工作。所以在上面的例子中，当@SearchInName = 1 AND @SearchInShortDescr = 1 AND @SearchInHTMLDescr = 1 时（用户想要搜索所有 3 列）。如果将其他条件放在此代码块的最后，其他条件也会快速返回。但是，一旦实际有效条件高于上一个，似乎它后面的所有 CONTAINS 语句也会运行（尽管不一定包含在结果中，这是正确的），这将执行时间从 1s 到 6秒或更多，这取决于有效语句的高度，因此后面还有多少其他 CONTAINS 谓词。

我知道执行顺序并不总是由实际代码给出，并且在 SQL 优化之后，由于它的原因，一些短路可能无法按设计工作，这似乎就是这种情况。通常的建议是使用 CASE 语句来确保顺序，但不幸的是，CONTAINS 语句在 CASE 语句中似乎并不令人满意。

所以我想我可能有点知道它为什么会发生（SQL 优化），但无法弄清楚如何实际解决这个问题。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T03:30:39.927

Sql server 将缓存该计划，以便可以重复使用。直接的含义是 SQL 服务器创建的计划必须适用于所有情况，因此必须是通用的。这消除了任何短路逻辑的可能性。

一种解决方案是使用 OPTION (RECOMPILE) 查询提示。这将强制 SQL 服务器在每次执行时重新编译查询。因为 SQL 知道该计划永远不会被重用，它会检查参数的值，应用短路逻辑，选择过滤索引，并制定可能的最佳计划。

这不是一个糟糕的解决方案，因为全文索引无论如何都会生成部分重新编译（您可以根据传递给 CONTAINS 函数的查询获得不同的计划）。

另一种方法是使用动态 SQL 来构建查询。使用动态 SQL，您将获得两全其美：更好的计划和计划重用。

你使用哪种技术重要吗？在大多数情况下，不，两者都可以。如果您的查询被非常频繁地调用，例如，每天 3-4 百万次调用，那么每秒编译次数可能会成为瓶颈。如果发生这种情况，动态 SQL 方法是有利的。

# sql - sql查询中的条件选择

> ID：12402619
> 
> 赞同：1
> 
> 时间：2012-09-13T08:48:30.693
> 
> 标签：sql, case

我正在尝试从表中访问字段并根据字段内容提供不同的输出。
如果该字段有`0`我想获取`No`else if`1`或者`NULL`我想获取`yes`。
它适用于`0`或`1`但不适用于`NULL`.

```
Select  distinct(convert(varchar(255),( CASE Field1
                                         WHEN 0 
                                             THEN 'No'
                                         WHEN 1
                                             THEN 'Yes'
                                         WHEN NULL 
                                             THEN 'Yes' 
                                       END ))) AS Field1 FROM Table1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:52:48.880

```
CASE Field1
WHEN 0 THEN 'No'              
ELSE 'Yes'
END 
```

或这个：

```
CASE ISNULL(Field1, 1)
WHEN 0 THEN 'No'              
WHEN 1 THEN 'Yes'
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T08:52:54.190

```
 Select  distinct(convert(varchar(255),
     (CASE Field1 WHEN 0 THEN 'No'
      WHEN 1 THEN 'Yes'              
      WHEN IS NULL THEN 'Yes'
     END))) as Field1 from Table1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T08:53:20.020

```
SELECT ISNULL(CASE Field1 WHEN 0 THEN 'No' WHEN 1 THEN 'Yes','Yes') AS .. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T08:54:01.677

```
Select  distinct(convert(varchar(255),( CASE Field1
     WHEN 0 THEN               
    'No'              
     else 'Yes'  END )))as Field1 from Table1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T08:58:33.603

```
Select  distinct(convert(varchar(255),
    CASE ISNULL(FIELD1, 1)
        WHEN 0 THEN 'No'              
        WHEN 1 THEN 'Yes'                        
    END 
        ))as FIELD1 
        from TABLE1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-13T09:10:08.543

可能你想要这个：

```
 Select  distinct(convert(varchar(255),( CASE 

     WHEN Field1 =0 THEN               
    'No'              
WHEN Field1=1  THEN              
    'Yes'              
     WHEN Field1 is null THEN 'Yes'              
END )))as Field1 from Table1 
```

# swing - 我可以知道为什么它不阅读声明吗？

> ID：12402627
> 
> 赞同：0
> 
> 时间：2012-09-13T08:48:53.737
> 
> 标签：swing

我将文本字段的内容写入文本文件：

```
 import java.awt.event.ActionListener;
    import java.awt.event.ActionEvent;
    import javax.swing.SwingUtilities;
    import java.io.FileNotFoundException;
    import java.util.Formatter;
    import javax.swing.*;
    import java.util.*;
    import java.io.*;

    public class Payroll extends JFrame implements ActionListener{

    private JButton btn1;
    private JButton btn2;
    private JButton btnadd;

    // initialize the lbl with caption name is employee information.
     JLabel lbl = new JLabel("Nilai University Payroll System");

    public Payroll(){
     super("Nilai University Payroll System");
     setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

     setLayout(null);

     JLabel lblid,lblname,lblrank,lblclass,lbltype,lblpay;
     JTextField txtid,txtname,txtrank,txtclass,txtEmployeeClass,txtEmployeeType;
     JRadioButton rb1,rb2,rb3,rb4,rb5;

     lbl.setBounds(200,50,500,100);
     lbl.setHorizontalAlignment(lbl.CENTER );

     lblid = new JLabel("Employee ID: ");
     lblname = new JLabel("Employee Name: ");
     lblrank = new JLabel("Employee Rank: ");
     lblclass = new JLabel("Employee Class: ");
     lbltype = new JLabel("Class Type: ");
     lblpay = new JLabel("Employee Pay Rate: ");

  // initialize all the label which are declared in the example above with its caption name 
     lblid.setBounds(300,140,100,20);
     lblname.setBounds(300,180,100,20);
     lblrank.setBounds(300,220,100,20);
     lblclass.setBounds(300,260,100,20);
     lbltype.setBounds(300,300,100,20);
     lblpay.setBounds(300,340,100,20);

     // add all the label on the frame
     add(lblid);
     add(lblname);
     add(lblrank);
     add(lblclass);
     add(lbltype);
     add(lblpay); 

  // initialize the text field with size
     txtid=new JTextField(15);
     txtname=new JTextField(15); 
     txtclass=new JTextField(15);
     txtEmployeeClass=new JTextField(15);
     txtEmployeeType=new JTextField(15);

     // set a particular position on a screen with set bounds constructor
     txtid.setBounds(400,140,100,20);
     txtname.setBounds(400,180,100,20);
     txtclass.setBounds(400,220,100,20);
     txtEmployeeClass.setBounds(400,260,100,20);
     txtEmployeeType.setBounds(400,300,100,20);

  // add text field on a Frame
     add(txtid);
     add(txtname);
     add(txtclass);
     add(txtEmployeeClass);
     add(txtEmployeeClass);

  // initialize radio button with its caption
     rb1 = new JRadioButton("1\. Excellent");
     rb2 = new JRadioButton("2\. Good");
     rb3 = new JRadioButton("3\. Average");
     rb4 = new JRadioButton("4\. Fair");
     rb5 = new JRadioButton("5\. Poor");

     // set a particular position on a Frame
     rb1.setBounds(400,220,100,20);
     rb2.setBounds(500,220,100,20);
     rb3.setBounds(600,220,100,20);
     rb4.setBounds(700,220,100,20);
     rb5.setBounds(800,220,100,20);

     // add button on a frame
     add(rb1);
     add(rb2);
     add(rb3);
     add(rb4);
     add(rb5);

     btnadd = new JButton("Add Employee");
     btnadd.setToolTipText("Click this button to add employee details to a text file.");
     btnadd.setBounds(400,320,150,20);
     add(btnadd);
     btnadd.addActionListener(this);
     btnadd.setActionCommand("Add");
    }
    private BufferedWriter output;
     public void actionPerformed(ActionEvent e){

         String cmd = e.getActionCommand();
         if(cmd.equals("Add"))
         {
            output.write("ID: "+txtid.getNume()+"\n");
         }   
     }

     public void WriteFile(){
            try {
        output = new BufferedWriter(new FileWriter("E:/EC3307/eclipse/Payroll.txt",true));        
                output.newLine();
                output.close();
            }
            catch(IOException e)
            {
                System.out.println("There was a problem:" + e);

            }
        }

  public static void main(String args[]){

      SwingUtilities.invokeLater(new Runnable(){
          @Override
          public void run()
          {
              Payroll f1=new Payroll();
              // set frame size
              f1.setSize(1000,600);
              // set frame visible true
              f1.setVisible(true);  
          }
      });
      }
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:56:56.680

问题是它`txtid`是`Payroll`构造函数的局部变量，而不是`Payroll`类的成员。只需将 txtid 声明为您的类的变量，这将允许在您的方法`Payroll`中访问它。`actionPerformed`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:02:35.977

`txtid`在 Payroll() 构造函数之外声明

# winapi - 测试系统插件返回的字符串时出现意外的 logiclib 行为

> ID：12402628
> 
> 赞同：0
> 
> 时间：2012-09-13T08:49:02.770
> 
> 标签：winapi, nsis

[我使用类似于我之前问题的答案的](https://stackoverflow.com/a/12358195/317266)代码通过系统插件获取系统信息。API 函数非常相似，只是它返回（或不返回）一个宽字符字符串。

在属于域成员的计算机上使用该脚本时，我无法理解为什么 logiclib 测试总是在`${else}`测试的分支中通过。以下捕获显示`$1`不为空：

![变量转储](../Images/1f1619bc7c9fa2f6791953cc3bde57a0.png)

在阅读更多[NetGetDCName 参考资料](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370420(v=vs.85).aspx)时，我认为最好检查函数返回值而不是宽字符字符串指针。我有点困惑，为什么我的`${If} 0 <> $1`总是失败？在这种情况下，我检查了一个不是域成员的虚拟机`$1`。`0`我想那么`${IfThen}`释放内存的测试也是错误的。

这是示例代码：

```
!include "logiclib.nsh"
outfile "hello2.exe"

!define DEBUG `System::Call kernel32::OutputDebugString(ts)`

section

    Call GetDCName
    pop $0

    Messagebox MB_OK "DCName=$0"

sectionEnd

Function GetDCName
    ;Push the domain controler name to the stack (or an empty string if no dc)
    push $0
    push $1
    push $2
    System::Call "netapi32::NetGetDCName(i0, i0, *w 0 r1) i.r2"
    Dumpstate::debug
    ${If} 0 <> $1
        ${debug} "copy $1"
        StrCpy $0 $1
    ${else}
        ${debug} "copy empty string"
        StrCpy $0 ""
    ${endif}
    ${IfThen} $1 <> 0 ${|} System::Call "netapi32::NetApiBufferFree(ir1)" ${|}
    Pop $2
    Pop $1
    Exch $0
FunctionEnd 
```

**编辑：**感谢安德斯，这是更正的功能：

```
Function GetDCName
    ;Push the domain controler name to the stack (or an empty string if no dc)
    push $0
    push $1
    push $2
    System::Call "netapi32::NetGetDCName(i0, i0, *i 0 r1) i.r2" ;do not convert r1 to wchar, keep the pointer to free it
    ${If} $2 = 0
        System::Call "*$1(&w${NSIS_MAX_STRLEN} .r0)"        ;get the wchar from the pointer
        ${IfThen} $1 <> 0 ${|} System::Call "netapi32::NetApiBufferFree(ir1)" ${|}  ;free the pointer
    ${else}
        StrCpy $0 ""
    ${endif}
    Pop $2
    Pop $1
    Exch $0
FunctionEnd 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:17:49.550

运算符用于数字，而`<>`不是字符串。不过，这不是您唯一的问题；`*`（通常）只能与 一起使用，而`i`不是`t`// `m`。//类型`w`在C 样式字符串之间进行转换，但在您的情况下，您需要实际的内存地址，因为您必须将其传递给 free 函数。`t``m``w`

您需要传递`*i0r1`给 NetGetDCName，然后如果 $2 为 0，那么您可以使用结构语法（`*$1(&w${NSIS_MAX_STRLEN}.r5)`或`*$1(w.r5)`）提取字符串，最后将 $1 原封不动地传递给自由函数...

# json - 如何在 Django 中使用 PostgreSQL 9.2 JSON 数据类型？

> ID：12402630
> 
> 赞同：23
> 
> 时间：2012-09-13T08:49:20.037
> 
> 标签：json, django, postgresql

PostgreSQL 9.2 支持原生 json 数据类型。如何创建可以将此数据类型用作模型字段之一的 django 模型？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-17T09:01:47.127

[注。自从问题发布以来发生了很多事情，所以我也想更新答案 - 现在包括新的 Django-postgresql 和 PostgreSQL 9.3 信息]

**PostgreSQL 9.3**

PostgreSQL 中的 JSON 支持（参见[文档](http://www.postgresql.org/docs/9.3/static/datatype-json.html)变得越来越有趣。现在可以搜索 JSON 字段，就好像它们是数据库列一样！这种支持仍然是基本的，与标准列运算符（见前面）不相上下，因为这样通过 Django ORM 使用起来会很麻烦。

**PostgreSQL 9.2**

JSON 数据类型在 pgSQL 9.2中[基本上是文本。](http://www.postgresql.org/docs/9.2/static/datatype-json.html)增加的是 JSON 验证 - 有用，但不是转头。

****Django 和 PostgreSQL JSON**

最近[Kickstarted](https://www.kickstarter.com/projects/mjtamlyn/improved-postgresql-support-in-django)支持的 Django 高级 PostgreSQL 支持开发是几个月前资助的。它将包括对 JSON 类型的高级支持，但可能仅在 9.4 中：

> Postgres 团队最近合并了对 jsonb 数据类型的支持——二进制存储的 JSON。我很可能会延迟 JSON 支持，直到 Postgres 9.4 发布并且只支持 jsonb 数据类型。这有几个原因，最重要的是当前的 json 数据类型在其实现中受到严重限制，甚至缺少相等运算符。这意味着 Django 注释代码的某些部分会生成无效查询（请参阅此报告），也意味着必须禁止 __exact 查找。要在 Django 中正确处理所有这些边缘情况会导致大量的复杂性，并且您获得的仅将 json 存储在文本字段中的好处实际上是非常有限的。9.4 将于今年年底发布，因此 JSON 字段可能仅在 1.8 版本中提供。

资料来源：[mjtamlyn 博客](http://postgres.mjtamlyn.co.uk/arrays.html)

**[Psycopg](http://initd.org/psycopg/)**现在还原生支持[JSON 字段](http://initd.org/psycopg/docs/extras.html?highlight=json#json-adaptation)（以及 HSTORE）。

** 在 Django 中DIY **

在 django 中，创建自己的使用特殊数据库类型的模型字段非常容易，请参见[字段 db_type()](https://docs.djangoproject.com/en/dev/howto/custom-model-fields/#django.db.models.Field.db_type)。

请注意：

1.  这仅适用于 pgSQL - 您正在限制代码的可移植性（尽管您可以有条件地在其他数据库上返回“文本”类型）
2.  您目前将主要获得数据库端 json 验证
3.  当然还有直接检索 JSON 对象的乐趣！

但是要注意 Python 没有 /direct/ 对 JSON 的支持，所以你并没有真正跳过 python 中的 json 转储/加载成本；您确实避免了字符串转换-但我没有检查内部结构或进行基准测试以查看是否有任何真正的区别。

使用 PostgreSQL 9.3 及以下版本看起来事情可能会变得更有趣

您也可以从[django JSONField](http://pypi.python.org/pypi/django-jsonfield)开始并已经获得了很多样板代码，只需覆盖该`db_type`方法即可。

在我看来，更有趣和更值得数据库锁定（无论如何我都喜欢 pgSql！），是 pgSQL 中的选项，可以使用[`array_to_json`和`row_to_json`](http://www.postgresql.org/docs/9.2/static/functions-json.html)将数据重新调整为 JSON 结构。不过，这将需要对查询集进行更严重的更改，这听起来超出了您的问题范围。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-12-08T21:27:36.270

从 Django 1.9 开始，在Django 附带[`JSONField`](https://docs.djangoproject.com/en/4.0/ref/models/fields/#jsonfield)的模块中可用。`django.contrib.postgres.fields`该字段使用 PostgreSQL 字段类型[jsonb](http://www.postgresql.org/docs/9.4/static/datatype-json.html)（不是 json）。

# jstl - JSTL 日期比较

> ID：12402634
> 
> 赞同：11
> 
> 时间：2012-09-13T08:49:37.347
> 
> 标签：jstl, jsp-tags, java.util.date

我看过一些关于 JSTL 中日期比较的帖子，但我仍然无法让它工作。

我有一个日期字段，我想测试它是否在`01-01-1970`.

```
<c:if test="${user.BirthDate > whatGoesHere}">
    <doSomeLogic/>
</c:if> 
```

也许应该使用豆子？

谢谢 ！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-13T19:34:54.037

只需使用[`<fmt:formatDate>`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fmt/formatDate.html)从中提取年份，以便您可以对其进行数学计算。

```
<fmt:formatDate value="${user.birthDate}" pattern="yyyy" var="userBirthYear" />
<c:if test="${userBirthYear le 1970}">
    <doSomeLogic/>
</c:if> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-13T09:28:21.847

你可以使用类似这样的jstl和usebean

```
 <jsp:useBean id="now" class="java.util.Date"/>
    <c:if test="${someEvent.startDate lt now}"> 
    It's history!</c:if> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-13T09:37:28.340

您还可以为您的 bean 添加一个布尔 getter：

```
public boolean isBirthDateAfter1970(){
    return birthDate.after(dateOf1970);
} 
```

所以你可以使用下面的EL：

```
<c:if test="${user.birthDateAfter1970}">
   You were born after the sixties.
</c:if> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-12-16T18:57:35.830

```
<c:if test="${date1.time > date2.time}">...</c:if> 
```

或`lt`, `=`, `gt`:

```
<c:if test="${date1.time gt date2.time}">...</c:if> 
```

我们`Long getTime()`利用`java.util.Date`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-18T19:23:12.893

您可以使用（不推荐使用的）方法`getYear()`,`getMonth()`等。

```
<c:if test="${user.BirthDate.year > 99}">
  <doSomeLogic/>
</c:if> 
```

请注意，`getYear()`返回年份编号 - 1900。

# asp.net-mvc - MVC（火花视图引擎）x和m有什么区别？

> ID：12402636
> 
> 赞同：1
> 
> 时间：2012-09-13T08:49:55.473
> 
> 标签：asp.net-mvc, spark-view-engine

在编写 spark 文件时，我遇到了一些奇怪/奇怪的事情。我知道 Html.TextBoxFor，但我注意到当我使用它时，我的视图将它呈现为纯文本：

```
${Html.TextBoxFor(x => x.Name}} 
```

但是当我把它改成这个时它起作用了：

```
${Html.TextBoxFor(m => m.Name)} 
```

这里的 m 可能代表 Model，因为我已经在 .spark 文件的顶部声明了这样的模式：

```
<viewdata model="Test.Models.RegisterViewModel" /> 
```

但是**x**或**m**应该是委托声明或其他东西。谁能告诉我为什么 x 在这种情况下不起作用？它不应该假设我作为 x 或 m 输入的所有内容都是我在页面顶部声明的模型吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T18:59:59.757

从您的问题中复制：

```
${Html.TextBoxFor(x => x.Name}}
${Html.TextBoxFor(m => m.Name)} 
```

在顶部（使用 x）中，您有两个右花括号，而不是括号和大括号。

在第二个（使用 m）中，您有正确的右括号和大括号。我可以想象这就是为什么 Spark 在顶部实例中将其呈现为纯文本的原因，因为它无法识别那里的代码块，因为您缺少一个紧密的括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:55:51.043

两者没有区别。该变量类似于用于 for ( 的局部变量，它定义了对 lambda 表达式中的所有对象采取的共同操作。

这样做的原因可能是您以前的代码语法有错误，或者您忘记构建

*我的 2 美分*
**免责声明：** 我没有看到火花标签……这个答案完全致力于问题的 MVC 方面

# postgresql - Postgres 查询：具有空值的 array_to_string

> ID：12402640
> 
> 赞同：1
> 
> 时间：2012-09-13T08:50:03.787
> 
> 标签：postgresql, concatenation

我正在尝试在 Postgres 查询中组合行并连接两列（名称、vorname）。

这很好用：

```
SELECT nummer, 
       array_to_string(array_agg(name|| ', ' ||vorname), '\n') as name
FROM  (
   SELECT DISTINCT
          nummer, name, vorname
   FROM   myTable
   ) AS m
GROUP  BY nummer 
ORDER  BY nummer; 
```

不幸的是，如果“vorname”为空，尽管 name 有值，但我没有得到任何结果。

是否有可能让这个工作：

```
 array_to_string(array_agg(name|| ', ' ||vorname), '\n') as name 
```

如果一列是空的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:08:38.117

使用 coalesce 将 NULL 值转换为可以连接的值：

```
array_to_string(array_agg(name|| ', ' ||coalesce(vorname, '<missing>')), '\n') 
```

此外，您可以使用 string_agg 函数直接连接字符串，而无需将它们收集到数组中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:27:33.963

如果你有 9.1，那么你可以使用 array_to_string 的第三个参数 - 空字符串

```
array_to_string(array_agg(name), ',', '<missing>') from bbb 
```

# ruby-on-rails - 替换延迟回形针

> ID：12402642
> 
> 赞同：2
> 
> 时间：2012-09-13T08:50:23.577
> 
> 标签：ruby-on-rails, ruby, paperclip, resque

我使用 resque 来处理我的后台作业和上传文件的回形针。所以，我不得不使用delayed_pa​​perclip 让这两个库一起工作。但是这个 gem 有一些错误，并且不再维护。

所以我的问题是，你们用什么来处理 webapps 上的异步上传？

# windows - chef - 重新引发异常 TypeError - 无法将 nil 转换为 String

> ID：12402644
> 
> 赞同：0
> 
> 时间：2012-09-13T08:50:32.750
> 
> 标签：windows, chef-infra, chef-recipe

嗨，我开始在 Windows 上使用 Chef 并遵循[快速入门指南](http://wiki.opscode.com/display/chef/Fast+Start+Guide+for+Windows#FastStartGuideforWindows-Step5%253AConfiguretheworkstationasaclient)。我正在使用 chef-solo 并让它与入门食谱一起使用，它只是将模板写入主目录，但是任何安装了某些东西的食谱我都会收到错误“重新引发异常 TypeError - 无法将 nil 转换为字符串”，但没有指出问题出在哪里。

[我在 github 上](https://github.com/henryoswald/windows-chef-spike/tree/3b027c03331088516f3d96cb666ffb50d42e7896)有我的主厨 repo ，它正在尝试安装 7-zip。

我尝试使用 -l debug 运行，[这是完整的 stach 跟踪](http://pastebin.com/eNp7Jy5d)。

我现在有点不知如何找到零。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:21:35.143

您使用的是哪个版本的 Chef？我在 Ubuntu 上使用 Chef **0.10.10**
时 遇到了类似的问题。

 **为了解决这个问题，我升级了我的 Chef 版本。就我而言，我跑了

```
sudo gem update chef 
```

现在我有 10.14.2，一切都很好。

不确定您是如何配置 Windows 安装的，但您可以尝试在没有 sudo 的情况下运行它。**

# apache-flex - 如何防止 Flex 事件被分派到目标？

> ID：12402648
> 
> 赞同：0
> 
> 时间：2012-09-13T08:50:47.840
> 
> 标签：apache-flex

我想避免用户触发的鼠标事件不会被分派到他们的目标对象，从而有效地“冻结”用户的 GUI。

在一个示例应用程序中，[`mx.controls.Button`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/Button.html)我只调用[`addEventListener`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/EventDispatcher.html#addEventListener%28%29)了一个按钮以获取[鼠标事件](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/MouseEvent.html)的通知。在事件处理程序中，我调用[`Event::stopImmediatePropagation`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/Event.html#stopImmediatePropagation%28%29)了该事件，假设这将“丢弃”该事件。单击按钮将调用我的事件处理程序，但按钮被“单击”（它动画并触发了一个事件）。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:58:09.990

```
button.mouseEnabled = false;
button.mouseChildren = false; 
```

应该管用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:43:51.177

根据您的界面的先进程度，您可以在所有内容之上抛出一个对象（s:Rect 中的 s:Group 可以工作），将宽度和高度设置为 100%，并禁用 mouseChildren

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:39:52.470

使用 removeEventListener()

```
var b:Button = new Button();

function init():void
{
    b.addEventListener(MouseEvent.CLICK, onButtonClick);
}

function onButtonClick(event:MourseEvent):void
{ 
    b.removeEventListener(MouseEvent.CLICK, onButtonClick);
} 
```

# c# - 在 Visual Studio 中将复选框列表更改为单选按钮列表

> ID：12402652
> 
> 赞同：0
> 
> 时间：2012-09-13T08:50:58.140
> 
> 标签：c#, asp.net

我确定这对某人来说很简单，我在 Visual Studio 2010 中创建了一个 asp:CheckBoxList 我现在不得不将它更改为一个 asp:RadioButtonList。但是我现在有错误消息

运行时错误：基类包含字段'q3'，但其类型（System.Web.UI.WebControls.CheckBoxList）与控件类型（System.Web.UI.WebControls.RadioButtonList）不兼容

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:02:12.933

您也可以在 CheckBoxList 的 codeBehind 中更改类型声明。

# php - preg_replace 限制问题，处理数组值

> ID：12402655
> 
> 赞同：0
> 
> 时间：2012-09-13T08:51:06.840
> 
> 标签：php, preg-replace

我一直在为内部网站使用[Sphider](http://www.sphider.eu/)搜索引擎，我们需要能够在导出的 .htm(l) 文件中快速搜索联系人详细信息。

```
$fulltxt = ereg_replace("[_A-Za-z0-9-]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9-]+)*(\.[A-Za-z]{2,3})", "<a href=\"mailto:\\0\">\\0</a>", $fulltxt); 
```

我正在用方便的 mailto: 链接替换电子邮件地址，以便用户可以直接从搜索结果中打开 Outlook。

然而，

```
while (preg_match("/[^\>](".$change.")[^\<]/i", " ".$fulltxt." ", $regs)) {
    $fulltxt = preg_replace("/".$regs[1]."/i", "<b>".$regs[1]."</b>", $fulltxt);
    } 
```

它用粗体标记替换搜索结果中的所有匹配项，这将导致 Outlook 的“收件人...”字段中包含的标记。它在 HTML 中看起来像这样（感谢*Yuriy*）：

```
<a href="mailto:<b>name</b>.surname@domain"><b>name</b>.surname@domain</a> 
```

我尝试向“限制”参数添加一个值：

```
while (preg_match("/[^\>](".$change.")[^\<]/i", " ".$fulltxt." ", $regs)) {
    $fulltxt = preg_replace("/".$regs[1]."/i", "<b>".$regs[1]."</b>", $fulltxt, 1);
    } 
```

假设这应该是我的问题的解决方案，只需简单地替换第一次出现（作为模式的名称是 name-phone num-email 并且**我们总是按 name 搜索**），相反它只会让它变得非常慢到我得到的地步来自服务器的超时消息。我一直在尝试各种解决方案，但一直不走运。

有任何想法吗？难道我做错了什么？

谢谢。

（*原始经过大量编辑）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:16:24.563

我是否理解正确，会发生这样的事情？

```
<a href="mailto:<b>email@domain</b>"><b>email@domain</b></a> 
```

为什么不先将标签放入搜索结果中，然后才将“mailto：”锚点应用于电子邮件？在第二步的模式中，添加的 's 很容易被过滤掉。

# c# - 如果在另一台机器上打开目录，如何使用 c# 代码删除共享文件夹？

> ID：12402657
> 
> 赞同：0
> 
> 时间：2012-09-13T08:51:06.563
> 
> 标签：c#, .net, shared-directory

我正在尝试删除在另一台机器上打开的空共享目录。如果我直接删除目录（右键单击并删除），它将被删除。

```
Stopwatch st = new Stopwatch();
        st.Start();
 while(true){
            try
            {
                Directory.Delete(pathToDelete, true);
                Console.WriteLine("Directory Deleted" + "Elapsed time:" + st.Elapsed.Seconds.ToString() + "sec");
                break;
            }
            catch (Exception e)
            {
                if ((e is System.IO.IOException) || (e is System.UnauthorizedAccessException) ||
                    (e is System.Reflection.TargetInvocationException))
                {
                    Console.WriteLine(e.ToString());
                    if (st.Elapsed > TimeSpan.FromMinutes(5))
                    {
                        Console.WriteLine("Can not delete directory ");
                        return;
                    }

                    Thread.Sleep(1000);
                }
                else
                {
                    throw;
                }
            }
        } 
```

如果目录在同一台机器或不同机器上使用共享路径打开，则不会删除该目录。

[我发现了这个](http://bytes.com/topic/c-sharp/answers/258411-removing-folder-share) ，但我无法正确理解代码。

有人建议更好的方法吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:31:32.937

System.IO.IOException：该进程无法访问文件“c:\dir”，因为它正被另一个进程使用

这意味着它正在使用中，因此您将无法将其删除。如果它像您说的那样是空的，那么它必须是 a) 网络共享上的某人正在使用它，或者服务器上正在运行的东西正在监视它。您可能需要停止服务。

# objective-c - 使用选择器向 UIButton 添加操作时出错

> ID：12402659
> 
> 赞同：0
> 
> 时间：2012-09-13T08:51:13.507
> 
> 标签：objective-c, uibutton, selector

我正在尝试将事件添加到 UIbutton：

```
UIButton *btn = [[UIButton alloc] init];
[btn setBackgroundImage:[UIImage imageNamed:@"aa.png"] 
     forState:UIControlStateNormal];

[btn addTarget:self 
     action:@selector(Presed:)]; 
```

我收到了这个警告：

```
"UIButtom may not respond to addTarget:action" 
```

我正在为其创建此按钮的界面继承自`CDVPlugin`

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:52:45.443

您正在调用未声明的方法。它应该是。

[– addTarget:action:forControlEvents:](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIControl_Class/Reference/Reference.html#//apple_ref/occ/instm/UIControl/addTarget%3aaction%3aforControlEvents%3a)

```
[btn addTarget:self action:@selector(Presed:) 
forControlEvents:UIControlEventTouchUpInside]; 
```

# castle - 城堡：按惯例注册接口代理

> ID：12402660
> 
> 赞同：0
> 
> 时间：2012-09-13T08:51:17.787
> 
> 标签：castle

我想注册多个实现字典适配器的组件，但 AllTypes.From.. 只选择类类型。我想做这样的事情：

```
 container.Register(AllTypes.FromAssemblyContaining<IFooSettings>()
            .Where(type => type.IsInterface)
            .Configure(component =>
                component.UsingFactoryMethod((kernel, model, creationContext) => new DictionaryAdapterFactory().GetAdapter(creationContext.RequestedType, ConfigurationManager.AppSettings)))); 
```

现在我似乎无法创建自己的“AllTypes”版本，因为 FromTypesDescriptor ctor 是内部的。有什么想法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-22T06:50:53.167

这现在适用于 Castle 3.3.0：

```
var dictionaryAdapterFactory = new DictionaryAdapterFactory();

container.Register(
        Types.FromThisAssembly().Where(t => t.Name.EndsWith("Settings") && t.IsInterface)
            .Configure(component => component.UsingFactoryMethod((kernel, model, creationContext) => dictionaryAdapterFactory.GetAdapter(creationContext.RequestedType, ConfigurationManager.AppSettings)))); 
```

您必须使用“类型”，它也可以选择接口

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:15:35.287

我做这样的事情

```
 container.Register(
        AllTypes
            .FromThisAssembly()
            .Pick()
            .WithService.DefaultInterface()
            .Configure(r => r.LifeStyle.Transient)); 
```

这会根据匹配的接口和类名注册组件。

因此，如果我要求 Castle 提供一个名为的接口，`IFooSettings`那么 Castle 默认会返回该类`FooSettings`。

您可以使用一系列规则进行注册，您可以[在此处](http://docs.castleproject.org/Default.aspx?Page=Registering-components-one-by-one&NS=Windsor&AspxAutoDetectCookieSupport=1)查看它们。不建议使用您在示例中使用的工厂方法。

# blackberry - BlackBerry Connection 问题：无法打开更多隧道

> ID：12402663
> 
> 赞同：0
> 
> 时间：2012-09-13T08:51:24.383
> 
> 标签：blackberry, httpconnection

当我尝试通过 OAuth 进行身份验证时出现此错误，我可以使用连接工厂来访问未经身份验证的请求。它在模拟器上运行良好，但在设备上不起作用。它在设备上工作了一两次，但每隔一次都失败。

我已经尝试在手机上手动设置 APN 但仍然无法连接，而其他请求成功执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:08:08.653

我使用的是 BB OS5 及更高版本的连接框架，所以连接不是问题。GET 和 POST 请求在模拟器上运行良好，但 POST 请求在手机上失败，而 GET 请求在手机上运行。问题是 POST 请求中的一个简单错误，我将内容长度设置为仅考虑 URL 而不是正在发送的数据。我只是删除了 POST URL 中的内容长度，一切正常。

# c - 在结构内部使用时指针相等

> ID：12402665
> 
> 赞同：1
> 
> 时间：2012-09-13T08:51:34.907
> 
> 标签：c, pointers, equals, c89

很长一段时间以来，我一直试图让一个指针与另一个指针相等，但它不会这样做，而且我不确定为什么。

结构是：

```
typedef struct{
    struct listNode* next;
} listNode;

typedef struct{
     listNode* head;
} linkedList; 
```

但是在代码中，当我尝试执行时： node->next = list->head

我收到“来自不兼容指针类型的赋值”错误。任何帮助将不胜感激，因为我真的可以看到任何错误！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:57:21.763

`struct listNode`您在 upper 中提到了 a `typedef`，但这没有声明。

你需要按正确的顺序做事：

```
 +----At this point, we can refer to "struct listNode"
               v 
struct listNode {
  struct listNode *next;  /* We know this self-references, uses the same name. */
};

/* Now establish a shorthand name for the struct ... */
typedef struct listNode listNode;

/* ... which we can use in subsequent declarations like this. */
typedef struct {
  listNode *head;
} linkedList; 
```

# c# - 展平嵌套字典

> ID：12402670
> 
> 赞同：2
> 
> 时间：2012-09-13T08:51:46.157
> 
> 标签：c#, linq, .net-3.5

我正在使用以下内容反序列化一些嵌套的 JSON：

```
string json = @"{
    ""name"": ""charlie"",
    ""someID"": 123,
    ""level1"" : {
        ""name"": ""charlie 1"",
        ""someID"": 456
    }
}";

JavaScriptSerializer serializer = new JavaScriptSerializer();
Dictionary<string, object> data = serializer.Deserialize<Dictionary<string, object>>(json); 
```

完成此操作后，每个字典键的值可能是另一个字典，依此类推，有多个级别。

我想做的是展平多级*数据*，使其只是一个平面数组/列表，只有所有 JSON 属性名称及其值。所以我最终得到这样的东西：

```
name, "charlie"
someID, 123
name, charlie 1
someID, 456 
```

我正沿着使用*SelectMany()*等等的道路前进，但无法解决它来做我所追求的事情。

我一直在纠结这样的事情：

```
var obj = data.Values.SelectMany<object, Dictionary<string, object>>(x => x); 
```

但我无法满足编译器。是的，我迷路了。

我正在使用 .NET 3.5。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T09:13:07.527

```
Func<Dictionary<string, object>, IEnumerable<KeyValuePair<string, object>>> flatten = null;

flatten = dict => dict.SelectMany(kv => 
                        kv.Value is Dictionary<string,object> 
                            ? flatten((Dictionary<string,object>)kv.Value)
                            : new List<KeyValuePair<string,object>>(){ kv}
                       );

var flatList = flatten(data).ToList(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T08:57:43.370

你需要在这里递归：

```
IEnumerable<Tuple<string, string>> Flatten(this IDictionary dict)
{
    foreach(DictionaryEntry kvp in dict)
    {
        var childDictionary = kvp.Value as IDictionary;
        if(childDictionary != null)
        {
            foreach(var tuple in childDictionary.Flatten())
                yield return tuple;
        }
        else
            yield return Tuple.Create(kvp.Key.ToString(), kvp.Value.ToString());
    }
}

// Usage:

var flatList = data.Flatten().ToList(); 
```

* * *

在 .NET 3.5 上，您可以`KeyValuePair<string, string>`使用`Tuple<string, string>`.

请注意，没有`KeyValuePair.Create`，您需要使用`new KeyValuePair<string, string>(kvp.Key.ToString(), kvp.Value.ToString())`。

# sql-server - 获取给定美国州的相邻州

> ID：12402673
> 
> 赞同：0
> 
> 时间：2012-09-13T08:51:58.703
> 
> 标签：sql-server, geolocation, geospatial, geography, opendata

我使用此页面创建了美国各州的 SQL 表：http: [//www.john.geek.nz/2009/01/sql-tips-list-of-us-states/](http://www.john.geek.nz/2009/01/sql-tips-list-of-us-states/)

```
CREATE TABLE [dbo].[UsaStates] (
    [Code] CHAR (2)     NOT NULL,
    [Name] VARCHAR (50) NOT NULL,
    CONSTRAINT [PK_UsaStates] PRIMARY KEY CLUSTERED ([Code] ASC)
); 
```

我创建了另一个名为“NeighborStates”的 SQL 表，其中包含 2 列：State 和 NeighborState。

```
CREATE TABLE [dbo].[NeighborStates](
    [StateCode] [char](2) NOT NULL,
    [NeighborStateCode] [char](2) NOT NULL,
 CONSTRAINT [PK_NeighborStates] PRIMARY KEY CLUSTERED 
(
    [StateCode] ASC,
    [NeighborStateCode] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

ALTER TABLE [dbo].[NeighborStates]  WITH CHECK ADD  CONSTRAINT [FK_NeighborStates_NeighborStates_Neighbors] FOREIGN KEY([NeighborStateCode])
REFERENCES [dbo].[UsaStates] ([Code])
GO

ALTER TABLE [dbo].[NeighborStates]  WITH CHECK ADD  CONSTRAINT [FK_NeighborStates_UsaStates] FOREIGN KEY([StateCode])
REFERENCES [dbo].[UsaStates] ([Code])
GO 
```

但是现在，我正在寻找一些地理空间数据，甚至是一个硬编码列表（每个州的邻国列表）来填充我的表格“NeighborStates”。

您知道在哪里可以找到与给定美国州相邻的州的数据源吗？

```
INSERT INTO [NeighborStates](StateCode,NeighborStateCode) ??? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-19T00:37:29.757

我想检查波士顿州和纽约州是否共享边界。我的互联网研究使我找到了这个数据集

**[http://state.1keydata.com/bordering-states-list.php](http://state.1keydata.com/bordering-states-list.php)**

该页面列出了美国 50 个州中每个州的接壤州。您可以按州的字母顺序或按边界州的数量查看信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T14:55:01.987

我的直觉是如此强烈地指向这样一个事实，即您将无法找到这样一个公共数据源，我将其作为答案而不是作为“我认为没有”的评论发布。拿出一张地图自己写，应该要花你……半小时左右？

老实说，如果你正在做你或你的公司计划赚钱，这可能是一件好事。您可以为“下一个人”开源它，或者您可以从进入障碍中赚钱，因为您必须创造一些技术上不难但需要构建的东西。

# visual-c++ - 当字体只有一种字体大小时如何使用 MFC 的 DrawText 缩放字体

> ID：12402675
> 
> 赞同：1
> 
> 时间：2012-09-13T08:52:03.523
> 
> 标签：visual-c++, mfc, fonts

. 无效 CMainWindow::OnPaint() { CPaintDC DC(this); //CRect rc(5, 5, 191, 99); CRect rc(1, 1, 38, 19);

```
 CBrush brush(DC.GetBkColor());  
    CBrush* pOldBrush = DC.SelectObject(&brush); 
    DC.FillRect(&rc, &brush);
    DC.SelectObject(pOldBrush);

    DC.SetBkMode(TRANSPARENT);

    LOGFONT LogFont;
    LogFont.lfHeight        = -13;
    LogFont.lfWidth         = 0;
    LogFont.lfEscapement        = 0;
    LogFont.lfOrientation       = 0;
    LogFont.lfWeight        = 400;
    LogFont.lfItalic        = 0;
    LogFont.lfUnderline     = 0;
    LogFont.lfStrikeOut     = 0;
    LogFont.lfCharSet       = 0;
    LogFont.lfOutPrecision      = 0;
    LogFont.lfClipPrecision     = 0;
    LogFont.lfQuality       = 0;
    LogFont.lfPitchAndFamily    = 0;
    wcscpy_s(LogFont.lfFaceName,    _T("System"));

    //float OffSetY = 1.0;
    //float OffSetX = 1.0;

    float OffSetY = 0.2;
    float OffSetX = 0.2;
    LogFont.lfHeight        = (int)(LogFont.lfHeight * OffSetY); 
    LogFont.lfWidth         = (int)(LogFont.lfWidth * OffSetX); 

    CFont* pFont = new CFont;
    pFont->CreateFontIndirect(&LogFont); 

    CFont* pOldFont = DC.SelectObject( pFont );

    CString sTemp(_T("Title  current_folder\r\nField1\r\nComment:\r\nControl #:\r\nDescription:\r\nMagnification:\r\n"));
    sTemp.Replace(_T("&"), _T("&&"));

    int alignment = 0;
    switch(alignment)
    {
    case 1:
        DC.DrawText(sTemp, -1, rc, DT_WORDBREAK | DT_RIGHT | DT_EDITCONTROL);
        break;

    case 2:                                                       
        DC.DrawText(sTemp, -1, rc, DT_WORDBREAK | DT_CENTER | DT_EDITCONTROL);
        break;

    default:
        DC.DrawText(sTemp, -1, rc, DT_WORDBREAK | DT_EDITCONTROL);
        break;   
    }

    DC.SelectObject( pOldFont );

    delete pFont;
} 
```

![在所有提到的情况下输出](../Images/b0bf7e9d1e334ed440bf6969ce871f6b.png)

当使用 System 或 FixedSys 字体（只有一种字体大小分别为 10 和 9）时，在 OffSetX 和 OffSetY 为 1 和 rc(5, 5, 191, 99) 的情况下绘制的文本是完美的。但是，如果我将 OffSetX 和 OffSetY 更改为 0.2 和 rc(1, 1, 38, 19)，那么如果从右下角截断文本。仅当使用仅具有一种字体大小且其他字体工作正常且绘制的文本已正确缩放的上述字体时，才会出现这种情况。

由于字体具有一种字体大小，因此`DrawText`在所有情况下都使用此字体大小，并且给定的 rect 太小而无法容纳此文本，因此仅显示少数字符。有什么办法可以修复它，以便在这些缩放条件下缩放文本。这是我在上述场景中执行放大操作时在 MFC 项目之一中遇到的行为。

对此的任何建议或替代方案都将非常有帮助和可观。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:05:58.907

不要像那样硬编码你的字体大小！相反，执行必要的计算：

```
const int SIZE_IN_POINTS = 12;
LogFont.lfHeight = -MulDiv(SIZE_IN_POINTS, DC.GetDeviceCaps(LOGPIXELSY), 72); 
```

# javascript - 提交表单数据到服务器端

> ID：12402676
> 
> 赞同：0
> 
> 时间：2012-09-13T08:52:15.423
> 
> 标签：php, javascript, angularjs

```
<form ng-submit="doRegister()">
    <div class="control-group">
        <label for="email">E-Mail Address</label>
        <input type="email" id="email" name="email" ng-model="user.email" autofocus>
    </div>
    <div class="control-group">
        <label for="password">Password</label>
        <input type="password" id="password" name="user.password" ng-model="password">
    </div>
    <div class="control-group">
        <label for="password_confirmation">Confirm Password</label>
        <input type="password" id="password_confirmation" name="password_confirmation" ng-model="user.password_confirmation">
    </div>
    <input type="submit">
</form> 
```

如何将表单提交给`register`via `POST`？从技术上讲，我不知道`data`可以放置在哪里。

```
function registerCtrl ($scope, $http) {
    document.title = 'Register';
    $scope.doRegister = function(){
        $http.post('/register', data).
            success(function(data, status, headers, config) {
                console.log(data);
            }).
            error(function(data, status, headers, config) {
                angular.element('.errors').html(data.errors.join('<br>')).slideDown();
            });
    };
} 
```

**编辑**：进展：

```
function registerCtrl ($scope, $http) {
    document.title = 'Register';
    $scope.user = {};
    $scope.doRegister = function(){
        $http.post('/register', $scope.user);
    };
} 
```

但是发送到服务器的请求在[php](/questions/tagged/php "显示标记为“php”的问题")中是一个空数组：

```
Array() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T12:35:59.080

您需要声明变量并进行`headers`如下更改：

```
function registerCtrl ($scope, $http) {
    document.title = 'Register';
    $scope.user = {
        email: '',
        password: ''
    };
    $scope.doRegister = function(){
        $http({
            url: '/register', 
            data: $scope.user,
            headers: {'Content-Type': 'application/x-www-form-urlencoded'},
            transformRequest: function(obj) {
                var str = [];
                for(var p in obj)
                    str.push(encodeURIComponent(p) + "=" + encodeURIComponent(obj[p]));
                return str.join("&");
            },
        });
    };
} 
```

你需要

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T09:07:22.380

您已经在表单中绑定了一个属性。您可以使用它们定义数据。

例如，对于电子邮件字段：

```
var data = {};
data.email = $scope.email; 
```

或者您甚至可以`$scope.data = {}`在控制器中定义并发布它。

* * *

## 编辑于 9/14

这似乎是人们使用 $http.post() 发送表单数据时遇到的问题之一。解决方案在以下问答中给出。

[AngularJS - $http.post 发送请求参数而不是 JSON 的任何方式？](https://stackoverflow.com/questions/12190166/angularjs-any-way-for-http-post-to-send-request-parameters-instead-of-json)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-15T16:06:06.600

AngularJS 的 post 方法将数据作为 Request Payload 发送。

只需使用：

```
$json = json_decode(file_get_contents("php://input")); 
```

您可以通过使用访问 php 中的值

```
$email = $json->email;
$password = $json->password;
$password_confirmation = $json->password_confirmation; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-13T08:59:38.673

```
<form id="Register" action="/register">
 <div class="control-group">
        <label for="email">E-Mail Address</label>
        <input type="email" id="email" name="email" ng-model="email" autofocus>
    </div>
    <div class="control-group">
        <label for="password">Password</label>
        <input type="password" id="password" name="password" ng-model="password">
    </div>
    <div class="control-group">
        <label for="password_confirmation">Confirm Password</label>
        <input type="password" id="password_confirmation" name="password_confirmation" ng-model="password_confirmation">
    </div>
    <input type="submit">
</form> 
```

调用ajax函数。

```
$.ajax({
    url: form.prop('action'),
    type: 'POST',
    data: form.serialize(),
    dataType: 'json',
    async: false,
    success: function (result) {

    }
}); // ajax post end 
```

`var form = $("#Register");``form.serialize()`很容易从服务器端传递数据的数据传递 。

# actionscript-3 - 加载时闪烁全屏

> ID：12402680
> 
> 赞同：0
> 
> 时间：2012-09-13T08:52:33.007
> 
> 标签：actionscript-3, flash

我正在使用 adobe flash / AS3 此动画将用作自动运行启动画面
**如何在加载时使 swf 成为全屏？**
在哪里写这个 on_load 事件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:57:19.137

它在投影仪中工作，全屏启动有一个简单的延迟。

我用了那个方法：

```
function whatever(constructorOrOther:One)
{
    setTimeout(setToFullScreen, 1);
}

function setToFullScreen()
{
    stage.displayState = StageDisplayState.FULL_SCREEN_INTERACTIVE;
    stage.scaleMode = StageScaleMode.SHOW_ALL;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:58:01.117

这是用于 Flash 播放器（在浏览器中）吗？就像文档说的那样，您只能通过鼠标单击或键盘输入进入全屏模式（[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Stage.html#显示状态](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Stage.html#displayState)）。

> 全屏模式响应用户的鼠标点击或按键而启动；`Stage.displayState`如果没有用户输入，电影就无法更改。Flash 运行时限制全屏模式下的键盘输入。可接受的键包括终止全屏模式的键盘快捷键和非打印键，例如箭头、`Space`、`Shift`和`Tab`键。（使用全屏交互模式来支持来自其他键的输入。）终止全屏模式的键盘快捷键是：`Escape`（Windows、Linux 和 Mac）、`Control`+ `W`(Windows)、`Command`+ `W`(Mac) 和`Alt`+ `F4`。

# c# - 是否可以在非异步方法中调用等待方法？

> ID：12402681
> 
> 赞同：39
> 
> 时间：2012-09-13T08:52:33.733
> 
> 标签：c#, windows-8, async-await

在 C#/XAML 中的 Windows 8 应用程序中，我有时想从非异步方法调用可等待的方法。

实际上替换它是否正确：

```
 public async Task<string> MyCallingMethod()
  {
      string result = await myMethodAsync();
      return result;
  } 
```

这样 ：

```
 public string MyCallingMethod()
   {
       Task.Run(async () => {
            string result = await myMethodAsync();
            return result;
             });
   } 
```

对我来说的好处是我可以在没有等待的情况下使用 MyCallingMethod 但这是正确的吗？如果我想为 MyCallingMethod 传递一个 ref 参数，这可能是一个优势，因为在异步方法中不可能有 ref 参数。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-09-13T13:18:24.953

In non-async method you can either start the Task asynchronously and not wait for the result:

```
public void MyCallingMethod()
{
    Task t = myMethodAsync();
} 
```

or you can attach ContinueWith event handler, which is called after finishing the Task,

```
public void MyCallingMethod()
{
    myMethodAsync().ContinueWith(
        result =>
        {
            // do stuff with the result
        });
} 
```

or you can get the result from the Task synchronously:

```
public string MyCallingMethod()
{
    string result = myMethodAsync().Result;
    return result;
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-09-13T09:26:37.510

如果你在 UI 线程上，你真的不应该尝试做这样的事情，因为这意味着你会阻塞线程。相反，您应该解决该`ref`参数，例如通过接受一个简单类类型的参数，其中包含您要更改的值。

不这样做的另一个原因是它仍然不允许您使用`ref`参数，因为 lambdas 无法访问`ref`封闭方法的参数。

但是，如果您真的想这样做（同样，我真的认为您不应该这样做），那么您将需要获得`Task`. 就像是：

```
public string MyCallingMethod()
{
    var task = Task.Run(async () =>
    {
        return await myMethodAsync();
    });
    return task.Result;
} 
```

# javascript - RequireJS 超时使用优化器在慢速连接上加载 main.js

> ID：12402684
> 
> 赞同：3
> 
> 时间：2012-09-13T08:52:40.413
> 
> 标签：javascript, requirejs

我正在使用 requirejs 来构建我的 Backbone 项目。一切正常，我可以使用优化器将所有 js 模块和模板编译成一个 main.js 文件。问题是 main.js 大约是 1.5 兆。在工作中，这很好，因为我们的互联网连接很快，但我注意到在连接速度较慢的情况下，require.js 在 main.js 能够加载之前超时。

有什么办法不会让我改变 waitSeconds 超时？

例如，有没有办法将 main.js 文件分成多个部分，或者强制要求等到加载 main.js 时产生错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T09:13:15.120

我认为您不需要所有 1.5mb 来向用户展示初始应用程序。因此，您可以在代码中要求某些带有条件的部分。所以而不是：

```
define(['module1','module2','module3','module4'], function(m1, m2, m3, m4){
   if(m1.someCondition){
    m2.start()
  }else{
    m3.start()  
  }
}) 
```

您可以使用以下方式加载应用程序的某些部分`require`：

```
define(['module1'], function(m1){
  m1.start();
  if(m1.someCondition){
    var name = 'module2'
    m2 = require(name)
    m2.start()
  }else{
    var name = 'module3'
    m3 = require(name)  
    m3.start()  
  }
}) 
```

请注意，只有当传递的名称不是字符串时，优化器才会忽略模块

> 从文档：
> 
> 优化器只会组合在传递给顶层 require 和 define 调用的字符串文字数组中指定的模块，或者在简化的 CommonJS 包装中组合 require('name') 字符串文字调用。因此，它不会找到通过变量名加载的模块：

```
var mods = someCondition ? ['a', 'b'] : ['c', 'd'];
> require(mods); 
```

# android - 在不使用特定活动的情况下从 android 发送意图

> ID：12402687
> 
> 赞同：0
> 
> 时间：2012-09-13T08:52:41.097
> 
> 标签：android, class, import

我不确定这是否可能只是我正在做的事情。我有一个导入到我的活动中的应用程序偏好类。从该类中，我运行一个检查互联网连接功能，如果返回 null，我将意图发送到另一个活动。问题是我想在我的应用程序中运行这个函数有没有办法获取当前活动的名称并将其传递给appspreferences类并将其放置在意图中。

到目前为止，这是我的功能

```
public boolean isOnline() {
        ConnectivityManager cm =
        (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo netInfo = cm.getActiveNetworkInfo();
        if (netInfo != null && netInfo.isConnectedOrConnecting()) {
            return true;
        }
        return false;
    }   

private ConnectivityManager getSystemService(String connectivityService) {
    // TODO Auto-generated method stub
    return null;
}

public void checkInternet(){

    isOnline();

    if(isOnline() == false){

        this.getClass().getSimpleName();

Intent connectionIntent = new Intent(this.getClass().getSimpleName().this,Network.class);
        this.getClass().getSimpleName().this.startActivity(connectionIntent);
        this.getClass().getSimpleName().this.finish();  

    }
    Log.v("Pref", "checking internet"); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:00:50.313

尝试将当前活动的上下文作为参数发送给您的方法

调用类

```
Context myContext = this;
obj.checkInternet(myContext); 
```

公共类，所有类都可以调用它来检查互联网

```
 public void checkInternet(Context myContext){

    isOnline();

    if(isOnline() == false){

Intent connectionIntent = new Intent(myContext,Network.class);
        startActivity(connectionIntent);
        myContext.finish();  

    }
    Log.v("Pref", "checking internet"); 
```

# iphone - 安装升级的 XCode 版本后的问题

> ID：12402691
> 
> 赞同：0
> 
> 时间：2012-09-13T08:53:04.080
> 
> 标签：iphone, xcode, uistoryboard, data-loss

我最近安装了 XCode DP 4.5 - 只是为了试用 iOS 6。我使用它打开了一个项目。

当我再次使用 XCode 4.2.1 重新打开时，我开始遇到[这里提到的情节提要数据丢失问题](http://lists.apple.com/archives/xcode-users/2012/Jul/msg00057.html)。

我在 4.5 DP 中没有遇到这个问题，但是我不想继续使用 XCode 45 DP。我不确定用它构建我的应用程序是否有效。此外，它还向我显示“iPhoneOS 5.0 sdk not found 警告”，这是我在项目中设置的基本 sdk。

我应该怎么做才能摆脱这个问题？继续使用4.5 DP可以吗？如果没有，我怎样才能安全地回到 4.2.1？项目中是否有任何解决方法可以重新获得我的故事板？我也备份了故事板，但是一旦我将它导入到我的项目中（在 4.2.1 内） - 它就会抱怨它无法打开它。所以我怀疑这是由于 45 DP 和 4.2.1 共享的设置。

请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:42:49.440

下载适用于 iOS 6 的 Golden Master 并将其用于您的开发。由于 GM 版本的 App 可能会被编译以用于分发，因此 Xcode 4.2.1 将变得过时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T03:14:53.457

默认情况下，故事板设置为与 Xcode 的当前版本和一个先前版本兼容。您可以通过修改情节提要的文件检查器中弹出的开发版本来选择使它们与更旧的版本兼容。

# blackberry - 帮助开发的开源黑莓项目

> ID：12402695
> 
> 赞同：2
> 
> 时间：2012-09-13T08:53:12.020
> 
> 标签：blackberry, open-source

你们知道任何开源黑莓应用程序。IMO 查看优秀项目的源代码有助于更好、更快地学习系统，更不用说减少开发时间了。是否有此类项目的推荐列表，或者如果没有，我们可以建立这样的列表吗？我认为这对其他开发人员真的很有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T13:12:45.297

我为延迟回答道歉。以下是有用的 Java BB 应用程序、库和代码的链接：

1.  [BB 的 WordPress](http://blackberry.wordpress.org/development/)
2.  [LogicMail](http://www.logicmail.org/) - 备用邮件客户端
3.  [Facebook SDK for BB](http://sourceforge.net/projects/facebook-bb-sdk/) - FB SDK 不是来自 RIM 也不是 FB
4.  [无线音乐同步应用](http://sourceforge.net/projects/bbwifimusicsync/?source=directory)
5.  [BB Tracker](http://bbtracker.org/) - 相当老的一个
6.  [BB 工具](http://www.marky.com/files/bb/BBTools-Source.zip)- 也很旧

我并不是说那里的代码是标准的（对我来说**LogicMail**是最容易接受的），但是有很多关于网络、存储、gps 和 ui 的有用代码。同时请注意@Nate 提到的来自 RIM 的高级 UI 示例

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T20:47:49.057

我只有时间在这里发布一个链接，但这是我绝对会推荐给所有初学者的一个链接，因为它有助于理解 UI 开发，（在我看来）在 BlackBerry 上与其他移动平台（尤其是 Android）相比肯定更难学习或 iOS）。

[在此处的 BlackBerry 网站上查看有关它的信息](http://supportforums.blackberry.com/t5/Java-Development/Implement-advanced-buttons-fields-and-managers/ta-p/488276)

或[这里的 github 存储库](https://github.com/blackberry/Samples-for-Java/tree/master/Advanced%20UI)

如果您使用的是旧版 BlackBerry Java API (OS <= 7)，您肯定会最终继承内置 RIM UI 类，以添加您自己的功能。**在这个高级 UI**项目中，您想做的许多事情很有可能已经完成，或者至少已经开始。

# spring - @IndexedEmbedded 在延迟加载的实体列表中，不会自动进入搜索索引

> ID：12402696
> 
> 赞同：5
> 
> 时间：2012-09-13T08:53:11.913
> 
> 标签：spring, hibernate, lucene, hibernate-search

我有一个问题，我认为应该很容易解决。

我使用 Hibernate Search 来索引与其他实体有关系的 @Entitiy 类。

每当一个实体指向另一个也应该被索引的实体时，比如上传特定照片的用户，我使用@IndexedEmbedded，它在 HSearch 的自动索引中工作得非常好。

但是，我还在 @ManyToOne 关系上设置了一些 @IndexedEmbeded 注释。想象一张包含相关评论列表的照片。这些默认情况下是延迟加载的，即在实际需要之前不会从数据库中获取。我注意到，当我添加评论时，无论经过多长时间，它都不会被索引，直到我进行手动重新索引。然后一切正常。我没有在我拥有的任何其他 IndexedEmbedded 关系中观察到这一点，例如，如果我更改照片的位置，几分钟后，它就会进入索引并且完全可搜索。

有什么解释吗？解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:49:02.283

您的映射应如下所示

```
@OneToMany(mappedBy="photo", cascade = { CascadeType.ALL}, fetch=FetchType.LAZY) 
    @IndexedEmbedded 
    @Type(type="java.util.Set") 
    private Set<Comment> comments; 
```

..................................................... .

..................................................... ..

```
@ContainedIn 
@ManyToOne 
   @JoinColumn(name="PHOTO_ID") 
    private Photo photo; 
```

注意关系的双向性（使用 mappedBy）和@ContainedIn 的使用。这几乎是我认为你应该需要让你的例子工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T18:19:04.673

我认为@IndexEmbedded 的这个问题被报告为一个错误。请参阅[此](https://hibernate.onjira.com/browse/HSEARCH-662)错误报告和修复版本。

如果您使用的版本较旧，那么这可能会解决您的问题。

# windows-8 - Visual Studio Express 2012 for Desktop 中没有 Metro 项目模板？

> ID：12402701
> 
> 赞同：4
> 
> 时间：2012-09-13T08:53:40.593
> 
> 标签：windows-8, microsoft-metro, visual-studio-2012

[用于 Desktop](https://web.archive.org/web/20131112183242/http://www.microsoft.com:80/visualstudio/eng/downloads#d-express-windows-desktop)和[Windows 8](https://web.archive.org/web/20131112183242/http://www.microsoft.com:80/visualstudio/eng/downloads#d-express-windows-8)的下载页面都提供了相同的 Web 安装程序，称为：“Visual Studio Express 2012 for Windows Desktop”。我安装了它，这是它的“新项目”窗口：

![新项目窗口](../Images/de9611f683ce7ad84288e73e8fd9666c.png)

在[本教程页面](https://docs.microsoft.com/en-us/previous-versions/windows/apps/hh986965(v=win.10)#step_1__create_a_new_project_in_visual_studio)中，它说我应该有这样的模板：

[![创建一个 hello world 应用程序](../Images/d639ec7a9572b346f583b9df11e870af.png)](https://i.stack.imgur.com/ACoFx.png)
[（来源：[microsoft.com](http://i.msdn.microsoft.com/dynimg/IC621219.png)）]

我怎样才能得到这些模板？我正在使用 Windows 8 x64 RTM。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T10:10:06.007

您很可能下载了错误的 Visual Studio Express 版本，可能该页面上的链接已损坏。
如果您想为 Windows 8 开发 Metro 风格的应用程序，请在此处下载适当的 Visual Studio Express：http:
[//msdn.microsoft.com/en-us/windows/apps/hh852659](http://msdn.microsoft.com/en-us/windows/apps/hh852659)

# javascript - jquery .height() 在刚刚调用 append 函数后没有返回实际值

> ID：12402702
> 
> 赞同：0
> 
> 时间：2012-09-13T08:53:46.013
> 
> 标签：javascript, jquery, html, css

我正在尝试使用 jquery 垂直对齐一些图片。

这是我的代码

```
$(".scroll a").hover(function (evt) {
  $("#box a").empty().append( 
    $('<img src='+this.href+' class="loadimg">')
  );
  vertical_align();
}); 
```

而垂直对齐功能在这里

```
function vertical_align(){
  var child = $(".loadimg").height();
  var parent = $("#box").height();
  var margin = (parent - child)/2;
  $("#box a").children("img").css('margin-top', margin); 
} 
```

现在我面临的问题是，当页面加载时，`imageHeight`给出零并且图片的边距变为父高度的一半，这意味着`imageheight`返回零。但这只是第一次将鼠标悬停在每个图像上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:57:04.827

发生这种情况可能是因为您过早地读取高度，而在第一次请求时图像未完全加载。您应该等待图像的加载（或完成，来自同一图像的第二个请求）事件，如下所示

```
$(".scroll a").hover(function (evt) {
     var node = $("#box a");
     node.empty(); 
     $('<img src='+this.href+' class="loadimg">')
       .appendTo(node)
       .one('load complete', function() {
           vertical_align();
       });

}); 
```

# liferay - 会话超时重定向 URL

> ID：12402703
> 
> 赞同：1
> 
> 时间：2012-09-13T08:53:48.240
> 
> 标签：liferay, session-timeout

一旦出现过期弹窗，Liferay 是如何知道登录 URL 的？

例如..如果过期页面是

```
'http://localhost:8080/web/2Fsite/2Fmodule' 
```

并且按F5，Life ray怎么知道URL是

'`http://localhost:8080/web/guest/home?_58_redirect=%2Fweb%2Fsite%2Fmodule'...`

这是 Struts 动作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:39:58.977

检查`com.liferay.portal.servlet.MainServlet - processServicePrePrincipalException`方法：

```
String currentURL = PortalUtil.getCurrentURL(request);
redirect = HttpUtil.addParameter(redirect, "redirect", currentURL); 
```

# javascript - 从父窗口关闭子窗口

> ID：12402709
> 
> 赞同：1
> 
> 时间：2012-09-13T08:54:11.580
> 
> 标签：javascript, jquery

我目前有以下代码来生成一个新的子窗口。我还为用户设置了响应超时，当超时结束时，子窗口应该关闭。

这是我到目前为止得到的：

```
 var zerominutpopup 'http://www.somewebsite.com/';
zerominutpopup = open(zerominutpopup, '', 'height=300,width=600,left=300,top=300');
setTimeout( function(){ timer_is_at_zero_hold(zerominutpopup); }, 10000);

function timer_is_at_zero_hold(windowtoclose){
windowtoclose.closed;// this is how (i thought) closing a window is done but doesnt seem to work.
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T08:56:01.613

```
var chWnd = window.open(...);  //open window and save a reference to it

chWnd.close();   // use that reference to access that 'window' object's members 
```

* * *

所以你的原始代码应该看起来像..

```
var zerominutepopup = window.open(url, '', 'height=300,width=600..');
setTimeout( function(){ 
    zerominutepopup.close(); 
}, 10000); 
```

# regex - 电子邮件正则表达式允许在末尾添加无效字符

> ID：12402716
> 
> 赞同：0
> 
> 时间：2012-09-13T08:54:35.547
> 
> 标签：regex, email

> **可能重复：**
> [使用正则表达式验证电子邮件地址](https://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address)

我有一个用于验证电子邮件地址的正则表达式。它工作得很好，但如果我在最后添加了任何字符，它就不会启动。例如，如果我尝试....“eee”，它会将其标记为无效，如果我尝试“ddd@dddd.com”，则通过，但如果我尝试“dfdfd@Dfdf.comd”，它也会通过。有什么办法可以阻止这些无效字符最后被拾取吗？

这是我的正则表达式：

```
^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$ 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:03:46.740

你可以用一个列表来检查常见的结尾，`(com|uk|org|gov)`但是有[太多的变化](http://en.wikipedia.org/wiki/List_of_Internet_top-level_domains)，检查它们都不适合正则表达式。您要么提取顶级域并对照列表进行检查，要么信任您的用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:01:30.347

好吧，您的模式必须知道所有有效的后缀。

用于验证符合标准的电子邮件地址的正则表达式实际上非常复杂。查看[http://www.regular-expressions.info/email.html](http://www.regular-expressions.info/email.html)以获取有关如何实现此目的的一些指示。

“短”的答案（取自上面的链接，没有测试它，你可能需要调整它以适应你的正则表达式实现）：

```
[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+(?:[A-Z]{2}|com|org|net|edu|gov|mil|biz|info|mobi|name|aero|asia|jobs|museum)\b 
```

如您所见，该模式还对有效后缀进行了某种白名单。

**编辑：** 或者只是查看这个答案，很好的解释和官方标准正则表达式的参考（似乎）：[使用正则表达式来验证电子邮件地址](https://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address)

# objective-c - 我可以为此创建一个全局变量吗？

> ID：12402719
> 
> 赞同：1
> 
> 时间：2012-09-13T08:54:45.373
> 
> 标签：objective-c

```
// This is the line which retrieves the current image on the UIView
CGImageRef originalImage = imageView.image.CGImage; 
```

我在一种用于编辑图像的方法中声明了这一点，该方法可以由多个按钮调用。

无论如何我可以全局声明这个变量，所以它总是保存在 UIView 中加载的第一个图像？然后我可以使用一个复制变量来做所有的编辑，例如

```
CGImageRef copyImage = originalImage; 
```

我试图通过在头文件中声明它并在方法文件中实例化它来使其成为全局变量，但是当我尝试在另一种方法中访问全局变量时，就好像它没有成为全局变量一样。

任何建议或更好的解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:01:39.143

目前尚不完全清楚您要做什么，但我要指出的是：

1.  那作业

    ```
     CGImageRef copyImage = originalImage; 
    ```

    不会创建您的图像的副本；它只会给你一个指向相同图像的局部变量`originalImage`；如果你修改`copyImage`，你也修改`originalImage`；

2.  如果您想制作 CGImage 的副本，以便您可以在保持原始安全的同时自由修改它，请使用：

    ```
     CGImageRef img1 = CGImageCreateCopy(img2); 
    ```

3.  如果您想将原始图像保存为第 2 点，只需在您的类中添加一个属性并在 CGImage 到位后立即对其进行初始化（例如，在`viewDidLoad`：

    ```
     -(void) viewDidLoad {
               ...
               self.originalImage = CGImageCreateCopy(imageView.image.CGImage);
               ...
           } 
    ```

`self.originalImage`将是您的原始图像，同时您将能够自由修改`imageView.image.CGImage`.

不要忘记在你的 dealloc 方法中释放复制的图像。

希望这可以帮助。

# javascript - 使用 ajax 和 jQuery 的服务器端分页

> ID：12402730
> 
> 赞同：1
> 
> 时间：2012-09-13T08:55:38.567
> 
> 标签：javascript, jquery, asp.net, ajax, paging

好的。所以我有一个包含用户列表的表。

```
<table id="UserTableContainer">
    <tr>
        <th>Firstname</th>
        <th>Lastname</th>
    </tr>
</table> 
```

当我加载页面时，我调用 JSON 方法从服务器检索用户列表。

```
$(function () {
    $.getJSON(
        '/Account/UserList',
        null,
        function (data) {
            $.each(data, function (i, item) {
                PrintUsers(item);
            });
        });
}); 
```

我的 PrintUsers 方法使用 jQuery 模板将用户添加到表中的每一行。

```
function PrintUsers(item) {
$.template('userList', '<tr>\
 <td>${Firstname}</td>\
 <td>${Lastname}</td>\
 </tr>');

$.tmpl('userList', item).appendTo("#UserTableContainer"); 
```

在服务器端，我从 API 获取列表。

```
public JsonResult UserList()
{
    try
    {
        List<User> users;         

        users = LoadUser(new UserFilter());
        }
        return Json(users, JsonRequestBehavior.AllowGet);
    }
    catch (Exception ex)
    {
        return Json(JsonRequestBehavior.DenyGet);
    }
} 
```

我用来获取列表的 API 已经内置了分页功能。有一个重载选项可以将 int startIndex 和 int pageSize 传递给 UserFilter() 对象。

我需要在我的 jQuery 和 ajax 调用中添加什么来向我的表添加分页功能？我迷失在我应该开始的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:52:21.793

假设您知道第一次生成页面时有多少页面，您可以为您的分页列表创建一个列表块，例如 -

```
<ul>
    <li>1</li>
    <li>2</li>
    <li>3</li>
    ...
</ul> 
```

然后，您可以将 jQuery 更改为类似 -

```
function getPage(startPage, selectedPageSize) {
    $.getJSON(
        '/Account/UserList?startPage=' + startPage + '?pageSize=' + selectedPageSize,
        null,
        function (data) {
            $.each(data, function (i, item) {
                PrintUsers(item);
            });
        }
    );
}

var pageSize = 10;
$(document).ready(function() {
    getPage(0, pageSize);
});

$(function(){
    $('li').click(function() {
        var page = $(this).text();
        getPage(page, pageSize);
    });
}); 
```

# sql-server - 我可以让 TADStoredProc 按名称将给定参数应用于目标过程吗？

> ID：12402734
> 
> 赞同：3
> 
> 时间：2012-09-13T08:55:44.953
> 
> 标签：sql-server, delphi, stored-procedures, ado, optional-parameters

我正在尝试从 delphi7 调用存储过程。该过程还包含具有默认值的参数。据我了解，我可以在不显式传递参数值的情况下调用此过程，并具有默认值。这就是我在 delpho 代码中所做的。

但..

结果似乎令人困惑。我跳过的参数确实得到了一些价值。那是下一个参数的值。它最终出现了最后一个没有得到它的值的参数。

我试图搜索并找到[了这篇](https://stackoverflow.com/questions/7883851/passing-sql-server-stored-procedure-parameter-names-via-delphi)文章。所以，事实证明，delphi 忽略了我给 TADOStoredProc 参数的名称，只是按照我将它们添加到参数集合中的顺序传递它们，即最后一个参数（幸运的是它也是*可选*的，也不例外被抛出）没有传递给程序。

我看到@crefird 的答案，建议使用TADOQuery 而不是TADOStoredProc。但我不喜欢这种方法。我最好为所有参数赋予一定的值，并且根本不要使用*可选参数*功能。

那么，在使用 TADStoredProc 时，是否有更好的解决方案让 delphi 通过名称为存储过程指定参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:30:50.167

您可以在设计时创建一个 TADStoredProc 并让它填充其参数集合。如果您没有表格可以将其放在上面，则可以使用 DataModule。

多年前我学到了和你一样的教训——参数名称被忽略了。在过去十年中，通过将任何新的 SP 参数放在参数列表的 END 处，并在需要时使它们成为可选参数，维护和发展使用 Delphi 和 SQL Server 的代码库变得更加容易。

我似乎有人制作了 TADOStoredProc 对象，然后调用它的 refreshParams （或 refreshParameters - 不确定名称）方法。这将涉及整个额外的数据库之旅，这可能是可以避免的。

# ios - uitextfield 上的 uidatepicker：如何禁用特定的文本字段键盘并启用 uidatepicker？

> ID：12402735
> 
> 赞同：0
> 
> 时间：2012-09-13T08:55:46.853
> 
> 标签：ios, iphone, uidatepicker

我在 uitextfield 中单击时使用 uidatepicker 弹出窗口，日期选择器使用键盘弹出，如何禁用特定的文本字段键盘并启用 uidatepicker？

[![uidatepicker](../Images/a34ee9679b19c86c245ae8c6485331e7.png)](https://i.stack.imgur.com/uLS6u.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:01:03.450

首先设置您的文本字段委托，如果您尚未设置它然后在委托方法中

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
    if ([textField isEqual:toDateTxtFld])
    {
        // Add this code in delegate
        [yourTextField resignFirstResponder];

        // ADD YOUR CODE FOR DATEPICKER Code

        return NO;
    }

    return YES;
} 
```

因此，只要您单击文本字段，键盘就会退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:46:32.593

如果日期选择器和键盘**一起**`[myTextField resignFirstResponder];`弹出，当用户点击 UITextField 时键盘弹出时，您可以随时调用删除键盘

# vb.net - OpenFileDialog 中的关联图标为空白

> ID：12402737
> 
> 赞同：1
> 
> 时间：2012-09-13T08:55:49.517
> 
> 标签：vb.net, clickonce, explorer, openfiledialog, file-icons

我正在通过 ClickOnce 部署使用 VS 2010 Express 版本构建的应用程序。

我使用项目属性的发布部分中提供的选项关联了一些文件扩展名。

当我安装应用程序时，相关的文件扩展名图标通常出现在资源管理器中，但是当用户尝试在我的应用程序中打开文件时，相关的图标显示为空白。

![文件资源管理器与 OpenFileDialog - Windows 7](../Images/151a6725fe08376025753a6a92301bf3.png)

相关代码部分如下：

```
Dim dialog As New OpenFileDialog
With dialog
    .AddExtension = True
    .CheckFileExists = True
    .CheckPathExists = True
    .DefaultExt = "pss"
    .FileName = String.Empty
    .Filter = "Data files|*.pss|All files (*.*)|*.*"
    .FilterIndex = 0
    .InitialDirectory = MySettings.SavePath
    .Multiselect = False
    .ValidateNames = True

    If .ShowDialog(Me) = Windows.Forms.DialogResult.OK Then

        OpenFile(.FileName)

    End If

End With 
```

我一直认为 OpenFileDialog 是 Explorer 的包装器，但由于某种原因，图标看起来不正确。

有谁知道如何解决这个问题？

**编辑**：该行为仅与 Windows 7 有关。Windows XP 行为正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:16:37.873

我相信您需要将默认视图设置为缩略图，以便为 pss 文件显示图形。您可以通过在运行应用程序时手动将视图更改为缩略图来检查这一点。

如果将视图更改为缩略图显示图形，请检查以下链接以实现此目的： [http ://social.msdn.microsoft.com/Forums/en-US/vbgeneral/thread/571b39c2-0edf-4159-ac8d-1c059f69a978](http://social.msdn.microsoft.com/Forums/en-US/vbgeneral/thread/571b39c2-0edf-4159-ac8d-1c059f69a978)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:16:30.727

我忘记将包含的关联图标更改为：

```
Build action: Content
Copy to Output Directory: Always 
```

由于手动更新，我发现了这一点，在此期间我收到错误消息“对象引用未设置为对象的实例” `updateCompleted`。

# php - 如何使 JSON 数据源适合 Jquery Autocomplete 小部件？

> ID：12402741
> 
> 赞同：0
> 
> 时间：2012-09-13T08:55:58.350
> 
> 标签：php, javascript, jquery, codeigniter

我想使用 Jquery UI-Autocomplete。这是使用自动完成的方法。

```
$(function() {
    var availableTags = [
        "ActionScript",
        "AppleScript",
        "Asp",
        "BASIC",
        "C",
        "C++",
        "Clojure",
        "COBOL",
        "ColdFusion",
        "Erlang",
        "Fortran",
        "Groovy",
        "Haskell",
        "Java",
        "JavaScript",
        "Lisp",
        "Perl",
        "PHP",
        "Python",
        "Ruby",
        "Scala",
        "Scheme"
    ];
    $( "#tags" ).autocomplete({
        source: availableTags
    });
}); 
```

这里定义了数组“availableTags”。但我想从一个数据源生成自动完成，该数据源是一个返回 JSON 数据的服务器端脚本。谁能帮我将该数据源适应自动完成？

我使用 MVC 架构（Codeigniter）并在控制器中使用以下方法返回 JSON 数据，

```
function supcode(){     
    $dataarray="";
    $data=$this->Inventorymodel->supcode();
    echo json_encode($data);
} 
```

我正在使用以下函数获取模型中的数据，

```
function supcode(){
    $finresult="";
    $this->db->select('name');
    $query = $this->db->get('supplier');
    $result=$query->result_array();

    foreach($result as $row){
        $finresult[]=array(
            'name' => $row['name']
        );
    }
    return $finresult;
} 
```

这是控制器中函数 supcode 的 URL，“index.php/inventory/supcode”

提前致谢.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:59:40.450

试试这个

```
source: 'index.php/inventory/supcode', 
```

并更换

```
 foreach($result as $row){
       $finresult[]=array(
        'name' => $row['name']
       );
    } 
```

到

```
foreach($result as $row){
   $finresult[]=$row['name'];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T09:03:34.103

不要用数组包装名称，只需执行以下操作：

```
foreach($result as $row){
    $finresult[]= $row['name'];
} 
```

在 javascript 端，`source`使用 url 设置：

```
source: 'index.php/inventory/supcode', 
```

# asp.net - 剃刀sql错误

> ID：12402746
> 
> 赞同：1
> 
> 时间：2012-09-13T08:56:15.383
> 
> 标签：asp.net, sql, sql-server, sql-server-2008

我有这个剃刀声明

```
sql = "SELECT * FROM CarBike" +
       "Order By id OFFSET @0 ROWS FETCH NEXT @1 ROWS ;";

var result = db.Query(sql, offset, pageSize); 
```

我收到错误

```
Incorrect syntax near the keyword 'By'.
Invalid usage of the option NEXT in the FETCH statement.

System.Data.SqlClient.SqlException: Incorrect syntax near the keyword 'By'.
Invalid usage of the option NEXT in the FETCH statement. 
```

请帮我纠正这个错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T09:02:56.943

`CarBike`和之间需要一个空格`Order by`

```
sql = "SELECT * FROM CarBike" + 
   " Order By id OFFSET @0 ROWS FETCH NEXT @1 ROWS ;"; 
```

注意：`OFFSET/FETCH`仅限 SQL 2012+。

在以前的版本中达到类似的结果

```
select * from
(
select *, ROW_NUMBER() over (order by id) rn
from CarBike
) v
where rn between @0+1 and @0+@1
order by id 
```

# android - 应用示例，使用的 Android 备份服务

> ID：12402749
> 
> 赞同：4
> 
> 时间：2012-09-13T08:56:23.203
> 
> 标签：android, android-backup-service

[您是否知道任何使用Android 备份服务](http://developer.android.com/guide/topics/data/backup.html)的 Android 应用程序（开源，如果可能的话）？

我需要有关如何在实际应用程序中使用备份服务的示例。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-17T11:06:54.067

以下是一些实施了 Android 备份的开源应用程序列表：

*   **三重纸牌**（[github来源](https://github.com/ianhanniballake/TripleSolitaire)，[谷歌播放](https://play.google.com/store/apps/details?id=com.github.triplesolitaire)）
*   **KTodo** ( [github 来源](https://github.com/eprst/KTodo), [Google Play](https://play.google.com/store/apps/details?id=com.kos.ktodo) )
*   **Penroser** ( [github 来源](https://github.com/JesusFreke/Penroser), [Google Play](https://play.google.com/store/apps/details?id=org.jf.Penroser) )
*   **SeriesGuide Show Manager**（[github 来源](https://github.com/UweTrottmann/SeriesGuide)，[Google Play](https://play.google.com/store/apps/details?id=com.battlelancer.seriesguide)）
*   **ServiceDroid**（[github 来源](https://github.com/seanmonstar/ServiceDroid)，[Google Play](https://play.google.com/store/apps/details?id=com.monstarlab.servicedroid)）
*   **糟糕**（[github 来源](https://github.com/Geekner/Something-Awful-Android)，[Google Play](https://play.google.com/store/apps/details?id=com.ferg.awful)）
*   **ConnectBot** , Sage-Mobile-Calc ( [github 来源](https://github.com/mvcisback/Sage-Mobile-Calc), [Google Play](https://play.google.com/store/apps/details?id=org.connectbot) )
*   **耳机短信**，如上面@CodeChimp 所述（[github 来源](https://github.com/smike/headphonesms)，[Google Play](https://play.google.com/store/apps/details?id=com.smike.headphonesms)）
*   **龙，飞！免费**（无源代码，只有 Google Play[链接](https://play.google.com/store/apps/details?id=com.lsgvgames.slideandfly)）
*   **sms-backup-plus**，只有[源代码](https://github.com/jberkel/sms-backup-plus)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T09:40:11.370

对 GitHub 的搜索显示了一些安静的人。

这是我发现在 Play 商店中也有好评的一个。

[耳机短信源链接](https://github.com/smike/headphonesms)

[耳机短信播放商店链接](https://play.google.com/store/apps/details?id=com.smike.headphonesms)

# c# - 线性规划：从文本中读取 LP 并使用单纯形法求解

> ID：12402751
> 
> 赞同：1
> 
> 时间：2012-09-13T08:56:25.783
> 
> 标签：c#, text-files, console-application, linear-programming, simplex

我想设计一个控制台应用程序（在 Visual Studio 2010 C# 中），它可以从文本文件中读取 LP，然后使用单纯形法解决它。

文本文件示例：

“最多 4 5”

“9 8 <= 45”

“5 1 <= 29”

“1 7 <= 15”

数字代表决策变量的系数（例如 6 7 8 将代表 6x1 + 7x2 + 8x3）

然后它应该写入/创建一个包含最佳解决方案和决策变量值的输出文件。

我正在考虑使用二维数组。

关于如何将 LP 从文本文件“导入”到程序并以标准形式转换方程的任何想法，准备插入到将充当我的表格的 2D 数组中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:17:17.667

你是在重新发明轮子。

[MPS 格式](http://en.wikipedia.org/wiki/MPS_%28format%29)是事实上的标准。

我个人更喜欢[CPLEX LP 格式](http://www.ieor.berkeley.edu/Labs/ilog_docs/html/reffileformatscplex/reffileformatscplex5.html)。

另请参阅[ILOG CPLEX 文件格式](http://www.ieor.berkeley.edu/Labs/ilog_docs/html/reffileformatscplex/reffileformatscplex.html)或其他格式的[文件格式参考手册](http://yalma.fime.uanl.mx/cplex11-manual/Content/Optimization/Documentation/CPLEX/_pubskel/XPlatform/File_formats1110.html)。

我知道实现 simplex tableu 方法似乎很容易和简单。除非你是为了好玩和学习，否则我强烈建议你不要这样做。

**实施生产质量单纯形法需要多年和丰富的经验。**我会改用单纯形求解器，例如[GLPK](http://www.gnu.org/software/glpk/)、[SoPlex](http://soplex.zib.de/)、[Clp](https://projects.coin-or.org/Clp)或[lpsolve](http://sourceforge.net/projects/lpsolve/)。

# android - 如何在android中监控网络状态

> ID：12402764
> 
> 赞同：0
> 
> 时间：2012-09-13T08:57:21.087
> 
> 标签：android, android-networking

如何监控活动中的网络状态？我正在使用谷歌聊天应用程序。

我只想在网络状态发生变化时执行这些行。

```
if(...){
    GTalkChatDetails.chat(getApplicationContext());
    GTalkChatDetails.adddMsgListener(getApplicationContext());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:21:40.910

创建一个类来寻找信号变化，

```
private class SignalStrengthListener extends PhoneStateListener 
    {
        @Override
        public void onSignalStrengthsChanged(android.telephony.SignalStrength signalStrength) 
        {
            // get the signal strength (a value between 0 and 31)
            int strengthAmplitude = signalStrength.getGsmSignalStrength();
            // do something with it
            GTalkChatDetails.chat(getApplicationContext());
                    GTalkChatDetails.adddMsgListener(getApplicationContext());
            super.onSignalStrengthsChanged(signalStrength);
        }
    } 
```

# c# - 什么都不传递和将 null 传递给 View 有什么区别？

> ID：12402765
> 
> 赞同：0
> 
> 时间：2012-09-13T08:57:23.770
> 
> 标签：c#, asp.net, asp.net-mvc

由于我是 ASP.NET MVC 的新手，我的问题可能太基础了。我还没有探索细节，但我迫切想知道以下问题的答案。

什么都不传递和将 null 传递给 View 有什么区别？

## 什么都不通过：

```
 public ActionResult Create()
    {
        return View();
    } 
```

## 传递空值：

```
 public ActionResult Create()
    {
        Movie m = null;
        return View(m);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T09:11:19.223

第一个将调用无参数`View()`[方法/构造函数]，第二个将尝试找到一个定义的 [方法/构造函数] `View(...)`，该参数定义为与您传递的对象最接近的匹配 - 它可能完全失败，因为`null`没有这样的类型并且因此不能完全匹配，所以如果你`View(...)`用一个参数定义了多个方法，那么它会导致错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T09:14:06.883

从观点的角度来看，没有区别。事实上，第一种方法只是第二种方法的重载，传递`null`.

# .htaccess - .htaccess：为某个用户代理启用目录索引

> ID：12402767
> 
> 赞同：2
> 
> 时间：2012-09-13T08:57:42.940
> 
> 标签：.htaccess, if-statement, user-agent

问题：我想为我的服务器上的某个目录启用目录索引（默认情况下它是禁用的），只为某个用户代理。

我知道可以在 .htaccess 文件中使用 <If> 指令，但我没有设法得到结果。

我正在寻找的是这些方面的东西：

```
<If user-agent = 'a certain user agent'>
    Options +Indexes
</if> 
```

我知道可以根据各种条件（例如某个用户代理）设置环境变量，并且*我已经能够根据我的需要设置它们，*但是我无法做一个简单的“如果设置了变量，然后设置选项+索引”语句

建议？指针？这甚至可能吗？我无权访问 Apache 全局配置文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T23:38:09.967

作为一种解决方案，您可以允许所有人进行目录索引，然后使用重写规则禁止不满足某些条件的人访问目录。

例如（禁止对除 googlebot 之外的所有人进行目录索引）：

```
Options +Indexes

RewriteEngine on

RewriteCond %{REQUEST_FILENAME} -d
RewriteCond %{HTTP_USER_AGENT} !googlebot [NC]
RewriteRule . - [F] 
```

# android - Android Facebook SDK：检查用户是否登录

> ID：12402775
> 
> 赞同：34
> 
> 时间：2012-09-13T08:58:09.383
> 
> 标签：android, facebook, session, sdk, logout

我的 Android 应用程序上有一个功能，用户授权该应用程序并共享链接。

我还需要为用户提供注销 facebook 的选项，如果用户未登录（或未授权应用程序），我需要有条件地禁用此按钮。

我似乎无法在[Android SDK](http://developers.facebook.com/docs/reference/androidsdk/)上找到可以让我询问 FB 用户是否登录的 API 调用。

我发现的是[`getAccessExpires()`](http://developers.facebook.com/docs/reference/androidsdk/helper/)：

> 检索当前会话的过期时间（自 Unix 纪元以来的毫秒数），如果会话未过期或不存在，则为 0。

检查会话是否等于0是要走的路吗？还是我缺少什么？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2015-03-31T18:36:21.113

Facebook SDK 4.x 版本现在有不同的方法：

```
boolean loggedIn = AccessToken.getCurrentAccessToken() != null; 
```

或者

通过使用函数

```
boolean loggedIn;
//...
loggedIn = isFacebookLoggedIn();
//...
public boolean isFacebookLoggedIn(){
    return AccessToken.getCurrentAccessToken() != null;
} 
```

检查此链接以获得更好的参考[https://developers.facebook.com/docs/facebook-login/android](https://developers.facebook.com/docs/facebook-login/android) 也检查此标题“**访问令牌和配置文件**”它说“您可以通过检查 AccessToken 来查看一个人是否已经登录。 getCurrentAccessToken() 和 Profile.getCurrentProfile()

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-06-19T20:58:33.220

我很难在 FB 文档中找到一个简单的答案。使用 Facebook SDK 3.0 版我认为有两种方法可以检查用户是否已登录。

**1) 使用`Session.isOpened()`**

要使用此方法，您需要检索活动会话，[`getActiveSession()`](https://developers.facebook.com/docs/reference/android/3.0/Session#getActiveSession())然后（这是令人困惑的部分）解密会话是否处于用户登录的状态。我认为对于登录用户来说唯一重要的是会话是否`isOpened()`. 因此，如果会话不是`null`并且它是打开的，则用户已登录。在所有其他情况下，用户已注销（请记住，`Session`可以有除了打开和关闭之外的状态）。

```
public boolean isLoggedIn() {
    Session session = Session.getActiveSession();
    return (session != null && session.isOpened());
} 
```

还有另一种编写此函数的方法，详见此[答案](https://stackoverflow.com/a/13989015/708906)，但我不确定哪种方法更清晰或“最佳实践”。

**`Session.StatusCallback`2) 使用和持续监控状态变化`UiLifecycleHelper`**

如果您遵循本[教程](https://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/)，您将在实例化时设置`UiLifecycleHelper`并注册一个`Session.StatusCallback`对象。有一个回调方法 ，`call()`您可以在其中覆盖`Session.StatusCallback`它，据说只要用户登录/注销就会调用它。在该方法中，您可能可以跟踪用户是否已登录。也许是这样的：

```
private boolean isLoggedIn = false; // by default assume not logged in

private Session.StatusCallback callback = new Session.StatusCallback() {
    @Override
    public void call(Session session, SessionState state, Exception exception) {
        if (state.isOpened()) { //note: I think session.isOpened() is the same
            isLoggedIn = true;
        } else if (state.isClosed()) {
            isLoggedIn = false;
        }
    }
};

public boolean isLoggedIn() {
    return isLoggedIn;
} 
```

我认为方法**1**更简单，可能是更好的选择。

作为旁注，任何人都可以阐明为什么教程喜欢调用`state.isOpened()`而不是`session.isOpened()`因为两者似乎是可以互换的（无论如何`session.isOpened()`似乎只是调用版本）。`state`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-13T21:31:28.707

**读者注意：**现在在新的 FB 3.0 SDK 中已弃用。

`facebook.isSessionValid()`如果用户已登录，则返回 true，否则返回 false。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-28T03:24:46.047

```
Session.getActiveSession().isOpened() 
```

如果用户已登录，则返回 true，否则返回 false

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-04-29T06:38:12.973

安卓工作室：

```
compile 'com.facebook.android:facebook-android-sdk:4.0.1' 
```

然后检查登录，如下所示：

```
private void facebookPost() {
    //check login
    AccessToken accessToken = AccessToken.getCurrentAccessToken();
    if (accessToken == null) {
        Log.d(TAG, ">>>" + "Signed Out");
    } else {
        Log.d(TAG, ">>>" + "Signed In");
    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-07-19T19:38:36.257

@diljeet 是对的。[https://stackoverflow.com/a/29375963/859330](https://stackoverflow.com/a/29375963/859330)

此外，使用

`return AccessToken.getAccessToken() != null && Profile.getCurrentProfile()!=null;`

它总是以这种方式工作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-11-18T12:44:25.263

对于 Facebook Android SDK 4.x，您必须使用 @Diljeet 所说的“AccessToken.getCurrentAccessToken()”，但他的检查对我不起作用，我终于通过以下方式检查了它：

活动“onCreate”：

```
facebookAccessToken = AccessToken.getCurrentAccessToken(); 
```

检查会话是否仍处于活动状态（我在“onResume”方法中创建了它，但在您需要的地方进行）：

```
 if(facebookAccessToken != null){
        sessionExpired = facebookAccessToken.isExpired();
  }else{
        sessionExpired = true;
  } 
```

更多信息在[https://developers.facebook.com/docs/facebook-login/android](https://developers.facebook.com/docs/facebook-login/android)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-07-02T16:33:49.970

这似乎与新的 sdk 配合得很好。

```
private boolean isFacebookLoggedIn(){
    Session session = Session.getActiveSession();

    if (session != null) {
        //Session can be open, check for valid token
        if (!session.isClosed()) {
            if(!session.getAccessToken().equalsIgnoreCase("")){
                return true;
            }
        }
    }
    return false;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-08-24T09:41:30.737

我遇到过同样的问题。这是我使用 SDK 4.0 的解决方案：

首先，在你处理登录检查的活动中，一定要调用这个主要的：

```
 FacebookSdk.sdkInitialize(this.getApplicationContext()); 
```

在你的 onCreate 方法中放这个：

```
updateWithToken(AccessToken.getCurrentAccessToken());

    new AccessTokenTracker() {
        @Override
        protected void onCurrentAccessTokenChanged(AccessToken oldAccessToken, AccessToken newAccessToken) {
            updateWithToken(newAccessToken, handler);
        }
    }; 
```

然后添加调用的方法：

```
private void updateWithToken(AccessToken currentAccessToken) {
    if (currentAccessToken != null) {
        fillUIWithFacebookInfos(handler);
    } else {
        login();
    }
} 
```

这种方式将处理已经登录的用户和新登录的用户。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-03-24T13:55:22.270

我使用 FB sdk 仅用于登录.. Facebook 开发人员拒绝我的应用程序，因为每当用户登录时，我都会发送注销.. 我不关心用户个人资料数据......我只是使用 FB 登录.. FB 告诉用户是否登录。 ..不要发送lgout ...

我发现黑客方式......现在我的应用程序不会在用户登录时发送注销......无论用户登录，谷歌，Facebook还是正常......当他们点击注销......在这三种情况下我使用 `LoginManager.getInstance().logOut();`

无论他们使用哪个平台......都没有崩溃:)

# datetime - 如何在 mongodb php 中以 ISODATE 格式存储当前日期和时间？

> ID：12402776
> 
> 赞同：1
> 
> 时间：2012-09-13T08:58:28.450
> 
> 标签：datetime, time, mongodb-php, gmt, isodate

我想将当前 GMT 日期和时间以 ISODate 格式存储在 mongodb 中。与此类似

```
ISODate("2012-07-26T17:43:25.678Z") 
```

我想以上述格式将结果存储在 mongodb 中（它应该是一个 ISODate 对象）。如何在使用 php 时生成这样的格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T12:50:29.360

我认为 DateTime 适合 ISODate，但您可能还需要考虑[http://php.net/manual/en/datetime.setisodate.php](http://php.net/manual/en/datetime.setisodate.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-06T16:32:18.277

使用 MongoDate：[http ://www.php.net/manual/en/class.mongodate.php](http://www.php.net/manual/en/class.mongodate.php)

本页示例：

```
<?php

// save a date to the database
$collection->save(array("ts" => new MongoDate()));

$start = new MongoDate(strtotime("2010-01-15 00:00:00"));
$end = new MongoDate(strtotime("2010-01-30 00:00:00"));

// find dates between 1/15/2010 and 1/30/2010
$collection->find(array("ts" => array('$gt' => $start, '$lte' => $end)));

?> 
```

# javascript - 显示隐藏复选框

> ID：12402780
> 
> 赞同：0
> 
> 时间：2012-09-13T08:58:41.077
> 
> 标签：javascript, jquery, html, jquery-ui

情景：

在下面链接上显示的 html 示例中，我有多个复选框，当您单击它时必须显示或隐藏：

这个例子：

根据下面的链接，当您打开特定页面时，它必须显示以下复选框：

全部、区、区、类别、餐厅、商店、房屋

例如，如果您单击 District，它将只显示 District1，如果您单击 District1，它将显示 District2，如果您取消选中，则会显示相反的情况。但同时，当您单击 District1 时，它会显示您是否只有餐厅和商店。

我使用 html 代码添加了来自 jsfiddle 的链接。

问题：

有人可以做javascript吗？因为我不懂javascript

先感谢您，

[这个例子](http://jsfiddle.net/jnwyQ/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:14:35.077

```
$('.district').hide();
$("#district").on('change',function () {
    if(this.checked)
    {
        $('.district').show();
    }
    else
    {
        $('.district').hide();
    }
});​ 
```

检查[此编辑](http://jsfiddle.net/jnwyQ/3/)

# css - 嵌套 div - 绝对位置 - z-index

> ID：12402782
> 
> 赞同：1
> 
> 时间：2012-09-13T08:58:45.200
> 
> 标签：css, html, nested, z-index

我有一个嵌套 div 被其父 div 覆盖的小问题，已经在这里搜索过，但没有解决方案适合我的问题。

示例 CSS：

```
#content {
    position: relative;
    top: 80px;
    min-height: 530px;
    width: 1000px;
    z-index: 2;
}
#category {
    position: absolute;
    top: -30px;
    right: 0;
    z-index: 1;
} 
```

示例 HTML：

```
<div id="content">
    <div id="category"></div>
</div> 
```

它应该是什么样子：

嵌套的 div`#category`应该贴在 的右上角`#content`并且应该在它的后面，这样div`#content`就会覆盖它。我知道这可能不是处理它的最佳方式，但我需要这样做，因为整个项目的风格很糟糕（我只是稍微调整一下）。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T09:19:43.617

为了将子元素放在其父元素后面，您必须使用负值`z-index`：

```
#category {
    position: relative;
    z-index: -1;
} 
```

**现场演示：[jsFiddle](http://jsfiddle.net/FtWDN/1/)**

# node.js - 如何在 Locomotive.js 中使用会话

> ID：12402783
> 
> 赞同：1
> 
> 时间：2012-09-13T08:58:46.370
> 
> 标签：node.js, express, session-variables, connect, locomotivejs

我正在查看 node.js Web 框架[Locomotive](http://locomotivejs.org/)。由于它建立在[Express](http://expressjs.com/)之上，我想 Connect 中间件应该很容易访问，但我不知道如何。

我添加了 2 行到`config/environments/all.js`：

```
this.use(express.cookieParser());
this.use(express.session({ secret: 'keyboard cat'})); 
```

会话对象现在在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T09:56:18.493

我自己发现的。这很容易：

```
var express = require('express');
var sess = express.session; 
```

# web - 什么是幽灵页面？

> ID：12402786
> 
> 赞同：1
> 
> 时间：2012-09-13T08:59:04.050
> 
> 标签：web, seo, webpage

有人可以告诉我鬼页到底是什么吗？我们如何创建一个幽灵页面？我对此知之甚少，例如公司将幽灵页面用于促销目的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:18:25.570

简而言之，这是出于 SEO 目的而故意欺骗搜索引擎。这是不好的做法。

**更长的答案：**

假设您正在优化您的奶酪销售网站。您希望人们在谷歌搜索“奶酪”时找到它。因此，您将创建一堆内容，其中“奶酪”的关键字密度高达 12% 左右。当然，这会使页面对用户毫无用处——用户只想要一张图片、一些关于奶酪的数据和一个标题，但这对你来说不够 SEO 友好。

因此，您将创建 SEO 所需的所有内容并提供这些内容 - 在 if/else 语句中。基本上，如果访问计算机是 GoogleBot，您将提供所有这些很棒的文本。如果**不是**GoogleBot，您将提供正确的内容。

因此，幽灵页面（更准确地称为影子页面）几乎只是一种（不好的）方式让您获得您不应该获得的排名。

# c# - 创建新类或结构时 .NET 中的内存使用情况

> ID：12402787
> 
> 赞同：16
> 
> 时间：2012-09-13T08:59:08.380
> 
> 标签：c#, .net, memory

Int 的大小为 4 个字节，如果我在我的程序中创建一个新的 Int ，它的内存消耗将增加 4 个字节。正确的？

但是如果我有这门课

```
public class Dummy{
    private int;
} 
```

我的新班级将使用多少内存？如果它是一个结构，内存消耗会更低吗？我认为*引用*本身也会消耗一些内存。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-13T09:04:57.333

*单个*引用在32 位进程上占用 4 个字节，在 64 位进程上占用 8 个字节。引用是类的标准开销（因为它们是引用类型）。结构不会引起引用（好吧，忽略任何潜在的装箱）并且通常是其内容的大小。我不记得课程是否有更多开销，不要这么认为。

这个问题深入研究了类与结构（也在问题评论中提供）：

[在结构上使用“new”是否会在堆或堆栈上分配它？](https://stackoverflow.com/questions/203695/structure-vs-class-in-c-sharp)

如评论中所述，只有类的实例才会消耗此引用开销，并且仅当某处有引用时。当没有引用时，该项目有资格进行 GC - 我不确定没有任何引用的堆上类的大小是多少，我认为它是其内容的大小。

真的，类没有你可以依赖的真正的“大小”。***最重要***的是，这不应该是使用类或结构的决定因素（但您往往会发现指南指出大约 16 字节或以下的类型可以是合适的结构，而以上倾向于类）。对我来说，决定因素是预期用途。

[在谈论结构时，我觉得有必要提供以下链接：[为什么可变结构是“邪恶的”？](https://stackoverflow.com/questions/441309/why-are-mutable-structs-evil)]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T09:07:47.240

一个类是一个引用类型，位于堆中（并将从垃圾收集器中删除）。struct ist 值类型，存储在堆栈中。
在您的示例中，Microsoft 建议使用值类型（结构），因为引用类型会导致过多的开销。

如果您对此主题感兴趣，请查看 Jeffrey Richter 的“CLR via C#”一书。

# android - 如何以最短加载时间（2 秒）在 AsyncTask 中添加进度对话框

> ID：12402788
> 
> 赞同：3
> 
> 时间：2012-09-13T08:59:07.800
> 
> 标签：android

当用户单击按钮时，将从 Activity A 转到 Activity B。
但是，由于在 Activity B 中，数据将从 Internet 下载，我想添加一个进度对话框。有时，连接会非常快，不到一秒，有时会超过 5 秒。
如果进度对话框显示 <1 秒，我认为这对用户体验非常不利。
所以，我想添加一个最小加载时间，例如 2 秒。
这意味着即使加载时间少于 2 秒，进度对话框也会至少显示 2 秒。
有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:12:20.857

你可以使用下面的代码。在此处传递对话的时间和对象。

```
public void timerDelayRemoveDialog(long time, final Dialog d){
    Handler handler = new Handler(); 
    handler.postDelayed(new Runnable() {           
        public void run() {                
            d.dismiss();         
        }
    }, time); 
} 
```

**已编辑**

您可以使用此示例代码：

```
class LoginProgressTask extends AsyncTask<String, Integer, Boolean> {
  @Override
  protected Boolean doInBackground(String... params) {
    try {
      Thread.sleep(4000);  // Do your real work here
    } catch (InterruptedException e) {
      e.printStackTrace();
    }
    return Boolean.TRUE;   // Return your real result here
  }
  @Override
  protected void onPreExecute() {
    showDialog(AUTHORIZING_DIALOG);
  }
  @Override
  protected void onPostExecute(Boolean result) {
    // result is the value returned from doInBackground
    removeDialog(AUTHORIZING_DIALOG);
    Intent i = new Intent(HelloAndroid.this, LandingActivity.class);
    startActivity(i);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-11T12:37:19.577

我的解决方案（效果很好）：

```
private class ProgressTask extends AsyncTask<Void, Void, Void> {
    ProgressDialog dialog;
    long timestamp1;
    long timestamp2;

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        dialog = new ProgressDialog(YOUR_CONTEXT);
        dialog.setCancelable(false);
        dialog.setMessage("Please wait...");
        dialog.show();

        timestamp1 = System.currentTimeMillis();
    }

    @Override
    protected Void doInBackground(Void... params) {

        //doSomething ...

        return null;
    }

    @Override
    protected void onPostExecute(Void aVoid) {
        super.onPostExecute(aVoid);

        //doSomething ...

        timestamp2 = System.currentTimeMillis();
        long timeDifference = timestamp2 - timestamp1;

        if (timeDifference >= 2000) {
            dialog.dismiss();
        } else {
            Handler h = new Handler();
            h.postDelayed(new Runnable() {
                public void run() {
                    dialog.dismiss();
                }
            }, 2000 - timeDifference);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-29T07:42:13.457

这是另一个版本。使用 SystemClock 不需要 try catch 块。 `ParentActivity.this`是执行任务的上下文。

```
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.SystemClock;

protected class Task extends AsyncTask< String, Void, String >
{
    private ProgressDialog mDialog = new ProgressDialog( ParentActivity.this );

    private long mTaskStartTimeMills;

    protected void onPreExecute()
    {
        mTaskStartTimeMills = System.currentTimeMillis();

        mDialog.setMessage( "Loading.." );
        mDialog.show();
    }

    protected String doInBackground( String... arg )
    {
        // TODO
        return null;
    }

    protected void onPostExecute( String json )
    {
        final long timeToWait = 1000 - ( System.currentTimeMillis() - mTaskStartTimeMills );

        if ( timeToWait > 0 )
        {
            SystemClock.sleep( timeToWait );
        }

        mDialog.dismiss();
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-13T11:30:53.597

这可能会帮助你

```
new AsyncTask<Void, Void, Void>() {
            ProgressDialog mDialog;
            ArrayList<String> files;            
            @Override
            protected void onPreExecute() {
                mDialog = new ProgressDialog(MyMainAct.this);
                mDialog.setMessage("Loading");
                mDialog.show();
            }
            @Override
            protected Void doInBackground(Void... params) {
                // TODO Auto-generated method stub
                          //   do your work here 
                Log.i("Share Media MyMainAct", " newFiles is called path is - " + path +"/" + spndirectory.getSelectedItem().toString());               
                files = getFiles(path + "/" + spndirectory.getSelectedItem().toString());               
                return null;
            }           
            @Override
            protected void onPostExecute(Void result){              
                if (mDialog != null && mDialog.isShowing()){
                    mDialog.dismiss();
                }
                setFileAdapter(files);
            }
        }.execute(); 
```

# uinavigationcontroller - 在 UINavigationController 中嵌套 UIPageViewController 只显示一页

> ID：12402789
> 
> 赞同：3
> 
> 时间：2012-09-13T08:59:18.153
> 
> 标签：uinavigationcontroller, uipageviewcontroller

我已经花了几个小时在这上面，但无法让它工作。希望有人能帮助我。

我有一个 UIPageViewController，当我在应用程序启动时将它添加到我的默认视图时，它可以完美运行。这就是我所做的：

```
//Step 1
//Instantiate the UIPageViewController.
self.pageViewController = [[UIPageViewController alloc] initWithTransitionStyle:UIPageViewControllerTransitionStylePageCurl
                                                          navigationOrientation:UIPageViewControllerNavigationOrientationHorizontal options:nil];

//Step 2:
//Assign the delegate and datasource as self.
self.pageViewController.delegate = self;
self.pageViewController.dataSource = self;

//Step 3:
//Set the initial view controllers.
ContentViewController *contentViewController = [[ContentViewController alloc] initWithNibName:@"ContentViewController" bundle:nil];
contentViewController.labelContents = [self.modelArray objectAtIndex:0];
NSArray *viewControllers = [NSArray arrayWithObject:contentViewController];
[self.pageViewController setViewControllers:viewControllers
                                  direction:UIPageViewControllerNavigationDirectionForward
                                   animated:NO
                                 completion:nil];

[self addChildViewController:self.pageViewController];
[self.view addSubview: self.pageViewController.view]; 
```

现在我想在我的初始视图中使用导航控制器，然后当用户单击按钮时，它将 UIPageViewController 推送到堆栈上。这也有效，但是当我处于横向模式时， UIPageViewController 只显示一页（水平拉伸）而不是两页，因为它应该是。我需要将设备旋转为纵向，然后返回横向模式以强制 UIPageViewController 显示两个页面。我将 UIPageViewController 添加到导航控制器：

```
[self.navController pushViewController:self.pageViewController animated:NO]; 
```

当我调试我的代码时，我发现没有导航控制器 UIPageViewController 的委托方法在启动时被调用。当我将 UIPageViewController 推到导航控制器上时，它们不会被调用，直到我旋转设备。

有谁知道如何解决这个问题？在此先感谢您提供任何帮助/提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T17:55:05.783

[在这个线程](https://stackoverflow.com/questions/9246572/uipageviewcontroller-and-landscape)的帮助下想出了这个。

当您通过选项字典创建 pageViewController 时，关键是在 pageViewController 上设置 spinLocation：

```
 options = [NSDictionary dictionaryWithObject: [NSNumber numberWithInteger:UIPageViewControllerSpineLocationMid]
                                          forKey: UIPageViewControllerOptionSpineLocationKey]; 
```

这个选项应该放在一个检查里面，看看当前的界面方向是什么。

在上述线程中，界面方向由三元运算符检查；我把它放在一个 if 语句中，这样我就可以利用同样的机会将一个额外的 UIViewController 添加到 viewControllers 数组上。

如果界面方向是纵向的，则在创建 pageViewController 时 'options' 仍然为 nil，因此它将继续以纵向模式创建它，只有一个 viewController。

这是我在 BookViewController 中的整个 viewDidLoad 代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    _modelController = [[ModelController alloc] init];

    DataViewController *startingViewController = [self.modelController viewControllerAtIndex:0
                                                                                  storyboard:self.storyboard];

    NSMutableArray *viewControllers = [NSMutableArray arrayWithObjects:
                                startingViewController,
                                nil];
    NSDictionary *options;
    if (UIInterfaceOrientationIsLandscape(self.interfaceOrientation)) {

        DataViewController *secondViewController = [self.modelController viewControllerAtIndex:1
                                                                                    storyboard:self.storyboard];

        [viewControllers addObject:secondViewController];

        options = [NSDictionary dictionaryWithObject: [NSNumber numberWithInteger:UIPageViewControllerSpineLocationMid]
                                              forKey: UIPageViewControllerOptionSpineLocationKey];
    }

    self.pageViewController = [[UIPageViewController alloc] initWithTransitionStyle:UIPageViewControllerTransitionStylePageCurl
                                                              navigationOrientation:UIPageViewControllerNavigationOrientationHorizontal
                                                                            options:options];
    self.pageViewController.delegate = self;

    [self.pageViewController setViewControllers:viewControllers
                                      direction:UIPageViewControllerNavigationDirectionForward
                                       animated:NO
                                     completion:NULL];

    self.pageViewController.dataSource = self.modelController;

    [self addChildViewController:self.pageViewController];
    [self.view addSubview:self.pageViewController.view];

    // Set the page view controller's bounds
    self.pageViewController.view.frame = self.view.bounds;

    [self.pageViewController didMoveToParentViewController:self];

    // Add the page view controller's gesture recognizers to the book view controller's view so that the gestures are started more easily.
    self.view.gestureRecognizers = self.pageViewController.gestureRecognizers;

} 
```

# android - 刷新解析代码android

> ID：12402793
> 
> 赞同：0
> 
> 时间：2012-09-13T08:59:30.377
> 
> 标签：android, json, android-intent

我正在使用 JSON 解析器来解析一些页面，但我想每 30 秒调用一次解析函数。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:11:02.947

这是一个奇怪的需求，仅在必要时进行解析可能会好得多。无论如何，你应该看看[定时器](http://developer.android.com/reference/java/util/Timer.html)和[后台服务](http://developer.android.com/guide/components/services.html)，但要确定你在做什么：如果你创建一个每分钟进行两次网络调用的后台服务，如果调用成本很高，你可能会花费大量数据和/或电池给您的用户，这不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:11:18.047

每 30 秒调用一次方法的方法之一是使用 Handler 的 postDelay ，请参见下面的代码。

```
 Handler handler;
    handler=new Handler();
    handler.removeCallbacks(run);
    handler.post(run);

 Runnable run=new Runnable()
 {
    public void run()
    {
        parsing();
        handler.postDelayed(run,30000);
    }
 }; 
```

另一种方法是使用“ [AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html) ”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T09:12:02.660

您可以使用计时器来完成。

```
Timer myTimer = new Timer(); 
```

之后，您可以调用使用 schedule 方法来调用您的 json 解析器方法。

```
myTimer.schedule(new TimerTask() 
{
public void run() {
timerMethod();
}
}, 0, 1000);

private void timerMethod()
{
this.runOnUiThread(doSomething);
}

private Runnable doSomething = new Runnable() {
public void run() {
// Your code for doing something
} 
```

# android - 小部件中的空指针异常

> ID：12402799
> 
> 赞同：0
> 
> 时间：2012-09-13T08:59:58.163
> 
> 标签：android, exception, pointers, null

team1name 在小部件类的开头初始化

字符串 team1name = null;

但是当我从返回一个字符串`getAcronym()`并分配给 team1name 时，我得到一个空指针异常。我该如何解决这是代码

```
public void onReceive(Context context, Intent intent){
    Bundle extras = intent.getExtras();
    if (extras == null) {
        return;
    }

    team1name = extras.getString("team1name");
    team2name = extras.getString("team2name");
    team1score = extras.getString("team1score");

    team2score=extras.getString("team2score");

    player1=extras.getString("player1");
    player2=extras.getString("player2");
    extras=null;

    team1name=getAcronym(team1name);        // Null Pointer Exception
    team2name=getAcronym(team2name);

    RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.widget_layout);

    remoteViews.setTextViewText(R.id.team1name, team1name);
    remoteViews.setTextViewText(R.id.team2name, 
    ComponentName cn = new ComponentName(context, MyWidgetProvider.class);  

    AppWidgetManager.getInstance(context).updateAppWidget(cn, remoteViews);
}

String getAcronym(String teamName){
    if(teamName.equals("Australia")){
        teamName="AUS";
    }else if(teamName.equals("Pakistan")){
        teamName="PAK";
    }else if(teamName.equals("India")){
        teamName="IND";
    }else if(teamName.equals("England")){
        teamName="ENG";
    }else if(teamName.equals("Sri Lanka")){
        teamName="SL";
    }else if(teamName.equals("South Africa")){
        teamName="RSA";
    }
    return teamName;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:07:21.230

您的`getAcronym(String teamName)`方法不进行任何空值检查。添加行：

```
if(teamName==null){
    return "";
} 
```

在您开始检查字符串值之前，这应该可以缓解您的问题。

可能正在检查为什么 teamName 被作为 null 传递，如果是故意的，那么这个解决方案可以正常工作。如果您应该始终通过发送有效的团队名称，那么在您到达您的小部件之前，您的代码中有某个地方没有正确分配它。

此外，如果您的字符串不是常量，即它们可能是“England”或“england”，您应该在忽略大小写的情况下进行比较以捕获这些实例。

IE

```
 if(teamName.equalsIgnoreCase("Australia")){
    teamName="AUS";
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T09:24:58.947

`Bundle#getString(String key)``null`如果未找到映射则返回。请参阅[文档](http://developer.android.com/reference/android/os/Bundle.html#getString%28java.lang.String%29)。

如果未找到映射，您可以选择使用允许您设置默认值的[方法](http://developer.android.com/reference/android/os/Bundle.html#getString%28java.lang.String,%20java.lang.String%29)，而不是检查`null`in 。例如：`getAcronym(String teamName)` `getString(String key, String defaultValue)`

```
team1name = extras.getString("team1name",""); 
```

在您的`String`比较中，`getAcronym(String teamName)`您还可以反转比较以避免空指针。这是一个养成的好习惯：

```
if("Australia".equals(teamName)){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T09:06:31.497

如果我正确理解您的代码，如果 extras.getString("team1name") 不存在，则会发生 Nullpointer 异常。在调用 getAcronym 之前，您应该调试您的项目并确认使用字符串设置了 team1name 变量。

（您是否正确定义了变量？ String team1name = "" 在代码中的任何位置？）

# c# - 使用 RhinoMock 模拟 WCF 客户端

> ID：12402800
> 
> 赞同：0
> 
> 时间：2012-09-13T09:00:03.717
> 
> 标签：c#, wcf, mocking, rhino-mocks

我正在尝试使用 Rhino Mock 模拟 WCF 客户端代理，但我运气不佳。

```
 var ServiceMock = MockRepository.GeneratePartialMock<ServiceClient>();
    ServiceMock.Expect(p => p.Publish("")).IgnoreArguments().Return("Worked"); 
```

这就是我一直试图模拟代理的方式。这是通过构造函数进行的正常设置。

这似乎没有嘲笑 ServiceClient 任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:09:39.863

这将帮助您在 WCF 中使用 Rhino 模拟

[http://kashfarooq.wordpress.com/2008/11/29/mocking-wcf-services-with-rhinomocks/](http://kashfarooq.wordpress.com/2008/11/29/mocking-wcf-services-with-rhinomocks/)和 [http://ayende.com/blog/2095/wcf-mocking-and-ioc-oh-my](http://ayende.com/blog/2095/wcf-mocking-and-ioc-oh-my)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:33:37.150

应该能够做这样的事情：

```
[TestClass]
public class MyTestClass{

private IService _service;

[TestInitialize]
public void Setup(){
_service = MockRepository.GenerateStrictMock<IService, ICommunicationObject>();
}

[TestMethod]
public void TestWhatsGoingOn(){

_service.Expect(.....).Return(.....);

//This will test the close is called too (hence the ICommunicationObject above)
((ICommunicationObject)_service).Expect(r => r.Close());
}

[TestCleanup]
public void CleanItUp{
_service.VerifyAllExpectations();
} 
```

这意味着您也可以测试 close 方法是否被调用（如预期的那样）

我认为你需要生成一个严格的模拟而不是部分......

当然，如果你想断言 .Abort() 调用是在异常处理等期间进行的 - 你可以这样做：

```
((ICommunicationObject)_service).Expect(r => r.Abort()); 
```

# cocos2d-iphone - CCArray 中的 FastRemoveObject 会改变物体的位置吗？

> ID：12402801
> 
> 赞同：0
> 
> 时间：2012-09-13T09:00:06.513
> 
> 标签：cocos2d-iphone

有人告诉我，如果依赖对象的特定顺序，我不应该使用 CCArray 中的 fastRemoveObject 方法。Cocos2d API 参考并没有具体显示方法的内容。谁能告诉我原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T17:39:56.523

是的，fastRemoveObject 改变了节点的顺序。因此，除非在您的情况下确实无关紧要，否则不建议这样做。

它的作用如下：

*   将最后一个索引处的对象分配给被删除对象的索引
*   零最后一个对象
*   减少数组计数

这样数组就不必执行内存操作（因此：快速）。但是最后一个对象现在将位于已删除对象的索引处。

# ios - 在 xcode 中开发全屏 4 英寸应用程序

> ID：12402803
> 
> 赞同：9
> 
> 时间：2012-09-13T09:00:33.607
> 
> 标签：ios, xcode, ios6, xcode4.5, iphone-5

> **可能重复：**
> [如何支持更高的 iPhone 5 屏幕尺寸？](https://stackoverflow.com/questions/12397811/how-do-i-support-the-taller-iphone-5-screen-size)

如何让我的应用程序支持 4 英寸？我在 iOS6GM 模拟器中的应用看起来不是 4 英寸大小。xcode中是否有任何选项可以使用所有4英寸？

![在此处输入图像描述](../Images/ac998e26ddd5c3808dbb5a573df9562e.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-13T09:07:05.070

一些用户报告说它在添加启动图像后已修复`Default-568h@2x.png`（见下文）。为了更新到 iPhone5，我执行了以下操作：

iOS 6 中的自动旋转正在发生变化。在 iOS 6 中，`shouldAutorotateToInterfaceOrientation:`不推荐使用 UIViewController 的方法。取而代之的是，您应该使用`supportedInterfaceOrientationsForWindow:`and`shouldAutorotate`方法。因此，我添加了这些新方法（并保留旧方法以兼容 iOS 5）：

```
-(BOOL)shouldAutorotate {
  return YES;
}

- (NSUInteger)supportedInterfaceOrientations{
  return UIInterfaceOrientationMaskAllButUpsideDown;    
} 
```

*   然后我修复了需要它的视图的自动布局。
*   将模拟器中用于启动视图和 iTunes 商店视图的图像复制到 PhotoShop 中，并将它们导出为 png 文件。
*   默认图片名称为：Default-568h@2x.png 尺寸为 640 x 1136，屏幕尺寸为 320 x 568。
*   我已经放弃了对 iOS 4 的向后兼容性。原因是这个新的 Xcode 不再支持 armv6 代码。因此，我现在能够支持的所有设备（运行 armv7）都可以升级到 iOS 5。

由于旋转的变化，这只是记住在 iOS 5 和 iOS 6 中测试自动旋转。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T09:15:24.263

在 iPhone 5 发布之前，我只是使用

```
#define kViewHeight 460.f // or 480.f if you don't have a status bar
#define kViewWidth  320.f 
```

但是现在，我想使用

```
#define kViewHeight CGRectGetHeight([UIScreen mainScreen].applicationFrame)
#define kViewWidth  CGRectGetWidth([UIScreen mainScreen].applicationFrame) 
```

反而。

但我不确定这是否是一个好的解决方案。如您所见，您将调度`CGRectGetHeight([UIScreen mainScreen].applicationFrame)`您使用的每个地方`kViewHeight`。我试过用

```
extern float kViewHeight; // in .h
float kViewHeight = CGRectGetHeight([UIScreen mainScreen].applicationFrame) // in .m 
```

但因编译错误而失败。

虽然效果很好，但我认为必须有更好的解决方法。;)

# android - android如何在edittext视图表单中输入输入

> ID：12402806
> 
> 赞同：-1
> 
> 时间：2012-09-13T09:00:38.553
> 
> 标签：android

当我从中间使用`style`开始`EditText`文本输入时，`EditText`如果我删除此行，如何从编辑文本视图的开始更改为开始字符？

```
 <EditText  
android:id="@+id/txtMobileNo"
android:layout_width="150dip"
android:layout_height="wrap_content"
style="?android:attr/buttonStyleSmall"
android:layout_marginTop="2dip"
android:singleLine="true"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:18:50.470

Sandra 只是`style="?android:attr/buttonStyleSmall"`从编辑文本中删除，**因为您应用了`gravity center`文本按钮的样式。**

```
<EditText  
     android:id="@+id/txtMobileNo"
     android:layout_width="150dip"
     android:layout_height="wrap_content"
     android:layout_marginTop="2dip"
     android:singleLine="true"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:10:46.247

在理解你的问题之后，我相信你已经设置`android:gravity=Center`了它的父母。删除线`android:gravity=Center` ，看看结果，是你想要的。如果没有，请发布您的代码

# php - magento 中的可配置产品或捆绑产品

> ID：12402808
> 
> 赞同：0
> 
> 时间：2012-09-13T09:00:45.290
> 
> 标签：php, jquery, magento

我在magento工作

假设我有一个产品“Tshirt”，为此我有 3 种尺寸“Large”、“Medium”、“Small”，每种尺寸的 Tshirt 我都有 2 或 1 种颜色。对于“大”和“中”尺寸，我有红色和绿色，但对于小尺寸，我只有一种颜色，即“绿色”

我正在尝试使用 magento 中的可配置产品或捆绑产品来做到这一点。可配置产品或捆绑产品是否可行？如果不！我们怎么能做到这一点，我应该用jquery更改值吗？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:30:36.787

您可以同时使用两者，但在这种情况下，我认为最好使用可配置产品。

捆绑产品对于在不同的货物中运输产品的许多部分（简单产品）很有用。您不会在不同的货件中发送衬衫的尺寸和颜色。

对于每种产品，您都可以配置衬衫尺码以及每种尺码的相应颜色。

例如：

```
shirt large -> blue, red
shirt small -> red 
```

Magento 会为你创造许多简单的产品；任意多的属性组合。您只需确保将用户的主要配置选项放在属性列表的首位，这样用户就可以先选择尺寸再选择颜色。

如果不清楚，请询问。

您可以在此处下载 Magento 手册：

[http://www.magentocommerce.com/resources/user-guide-download](http://www.magentocommerce.com/resources/user-guide-download)

无需触摸页面中的 jQuery 代码。

# c# - ASP.NET Div 与 runat=server 和 InnerHtml html 标记无论如何编码

> ID：12402810
> 
> 赞同：2
> 
> 时间：2012-09-13T09:00:52.643
> 
> 标签：c#, asp.net, htmlgenericcontrol

我对 HtmlGenericControl 对象的 InnerHTML 属性有疑问。我认为如果我将“<b>xx</b>”分配给 InnerText 属性，它将被编码 - 确实如此 - 如果我将相同的字符串分配给 InnerHtml 它不会被编码 - 但确实如此！我很困惑，因为它违背了我在其他帖子中看到的内容。

背景：我分配的字符串是从数据库加载的，并在其生命周期内分配给各种其他字符串，然后最终用 Replace 方法替换占位符。它仍然包含“<b>xx</b>”而不是编码版本......为了绝对确定我绕过了整个过程并直接在后面的代码中分配了“<b>xx</b>”字符串 - 结果仍然保持不变（即编码）。

有人可以解释为什么会这样吗？我做错了什么？谢谢。

**编辑以使问题 100% 清楚：** 我需要以编程方式将“<b>xx</b>”分配给 HTMLGenericControl 对象，并将其呈现为 HTML 标记而不是编码文本。发生的情况是我可以看到屏幕上写着“<b>xx</b>” - 不需要，我想看到粗体文本。我认为（并且在文档中对此进行了描述），如果我分配给 InnerHtml 属性，则字符串不会被编码并“按原样”显示。然而，它的行为并非如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T14:37:07.807

如果在您的情况下用 ASP:Literal 控件替换 HTMLGenericControl 是可行的，我会这样做。

我刚刚遇到了类似的情况，升级了一个 CMS 系统，这就是我处理它的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-22T13:55:54.430

```
var sb = new StringBuilder();
editable.RenderControl(new HtmlTextWriter(new StringWriter(sb)));
stringDiv = sb.ToString(); 
```

# javascript - Internet Explorer 中的文本换行不正确

> ID：12402811
> 
> 赞同：0
> 
> 时间：2012-09-13T09:00:54.207
> 
> 标签：javascript, css, internet-explorer

为用户提供帮助 - 当他们单击问号时会出现一个 div：

一个 javascript 函数使 div 出现：

```
function showhelpby(whichdiv,e,divwidth,leftorright,message)
{
    e=(!e)?window.event:e;//IE:Moz

    document.getElementById(whichdiv).style.display = 'block';
    document.getElementById(whichdiv).style.width = divwidth + 'px';
    if (leftorright == 'left')
    {
        if (e.pageX)
        {
        document.getElementById(whichdiv).style.left = e.pageX - divwidth - 20 + 'px';
        document.getElementById(whichdiv).style.top = e.pageY + 'px';
        }
        else if(e.clientX)
        {
        document.getElementById(whichdiv).style.left = window.event.clientX - divwidth - 20 + 'px';
        document.getElementById(whichdiv).style.top = window.event.clientY + 'px';    
        }
    }
    else
    {
        if (e.pageX)
        {
        document.getElementById(whichdiv).style.left = e.pageX + 20 + 'px';
        document.getElementById(whichdiv).style.top = e.pageY + 'px';
        }
        else if(e.clientX)
        {
        document.getElementById(whichdiv).style.left = window.event.clientX + 20 + 'px';
        document.getElementById(whichdiv).style.top = window.event.clientY + 'px';
        }
    }
    document.getElementById('message').innerHTML = message;
} 
```

出现的 div 的 css 是：

```
div.notes
{
font-family: Verdana;
font-size: 12px;
color: #000066;
line-height:140%;
display:none;
border-style:solid;
border-width:2px;
border-color:#000099;
position:absolute;
padding:15px;
background-color:#FFFFFF;
background-image:url(images/F3F3F3White200.jpg);
background-repeat:repeat-x;
overflow-y:auto;
overflow-x:hidden;
z-index:201;
} 
```

并且在 div 中显示的文本位于`<p>`未应用 css 样式的标签中。

多年来，我一直在使用上面的内容来显示弹出的小“帮助”div。

现在，突然之间，在 Visual Studio 2010 中开发一个站点 - 用于 Intranet - 正在使用 IE 9（我们必须使用 IE）查看（发布后） - 我的帮助 div 中的文本没有正确换行。**文本看起来是合理的，单词会随心所欲地中断**。这与长词不中断无关。单词“the”可能在一行以“t”结尾，而在下一行以“he”结尾。

除了通常喋喋不休地抱怨“该死的 Internet Explorer - 他们什么都做对了吗？” - 任何人都知道我需要做些什么才能在固定宽度的 div 中正确地换行文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:51:54.767

您是否尝试过添加分词：正常？ [http://www.w3schools.com/cssref/css3_pr_word-wrap.asp](http://www.w3schools.com/cssref/css3_pr_word-wrap.asp)

# iphone - iOS 图像修饰

> ID：12402812
> 
> 赞同：0
> 
> 时间：2012-09-13T09:00:56.493
> 
> 标签：iphone, objective-c, ios

我试图找到一种方法来修饰面部照片。

我想要修饰的方式是让眼睛大一点。

有人知道可能对它有用的 iOS 库/框架吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T04:25:17.170

Core Image 可能有助于检测脸上的眼睛。

参见[http://maniacdev.com/2011/11/tutorial-easy-face-detection-with-core-image-in-ios-5/](http://maniacdev.com/2011/11/tutorial-easy-face-detection-with-core-image-in-ios-5/)例如！

# asp.net-mvc-3 - 如何在 MVC3 中使用两个 IEnumerables

> ID：12402814
> 
> 赞同：0
> 
> 时间：2012-09-13T09:01:00.017
> 
> 标签：asp.net-mvc-3

大家好如何通过两个或多个IEnumerables列表来查看？这是我的动作控制器：

```
 ServicesClient client = new ServicesClient();
 client.ClientCredentials.UserName.UserName = "service_test";
 client.ClientCredentials.UserName.Password = "..";
            client.ClientCredentials.ServiceCertificate.Authentication.CertificateValidationMode = System.ServiceModel.Security.X509CertificateValidationMode.None;

            ListCity[] city = client.GetCity();
            ListStreet[] street = client.GetStreet(2);

            return View(city); 
```

我的观点：

```
model IEnumerable<ListCity>

@using icerik.EmlakServices 
@{

    Layout = "~/Views/Shared/Test.cshtml";
}

<select>

@foreach(var item in Model)
{

    <option>@Html.DisplayFor(x => item.CityName)</option>
}
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:04:25.367

在这种情况下，您必须创建一个 ViewModel。所以是这样的：

```
public class MyViewModel{
  public ListCity[] City {get;set;}
  public ListStreet[] Street {get;set;}
} 
```

然后在你的控制器中：

```
var viewmodel = new MyViewModel{
                  City = client.GetCity(),
                  Street = client.GetStreet(2)
                };
return View(viewModel); 
```

那么在你看来：

```
model MyViewModel 
```

然后您可以在视图中获取集合，例如`Model.City`, 或`Model.Street`.

对于除了非常基本的情况之外的所有情况，您通常最终都会为几乎所有视图创建一个 ViewModel。所以正确命名它们，这样你就知道它们在做什么。我在示例中调用它`MyViewModel`，因为我不知道上下文。

另外，我会命名变量`Cities`，`Streets`因为它们是集合，而不仅仅是单个元素。

# ios - 在其他方法中调用 IBAction 自动执行

> ID：12402815
> 
> 赞同：0
> 
> 时间：2012-09-13T09:01:01.740
> 
> 标签：ios

我有 IBAction 和 Method。我的目的是我想将 buttonSignIn 的 IBAction 调用到方法 getData 中。在这种情况下，我希望这个应用程序自动登录而不输入用户名和密码，但它没有用。下面是我的代码：

```
-(void)storeData
{
    NSString *usr = [_txtUsername stringValue];
    NSString *pwd = [_txtPwd stringValue];

    NSUserDefaults *store = [NSUserDefaults standardUserDefaults];
    [store setObject:usr forKey:@"usrname"];
    [store setObject:pwd forKey:@"usrpwd"];

    [store synchronize];
}

-(void)getData
{  
    if ([_remCheckbox state] == NSOnState)
    {
        NSUserDefaults *store = [NSUserDefaults standardUserDefaults];

        NSString *un = [store objectForKey:@"usrname"];
        NSString *pw = [store objectForKey:@"usrpwd"];

        _txtUsername.stringValue = un;
        _txtPwd.stringValue = pw;

        //call event IBAction
        [self buttonSignIn:self];

    }  
}

- (IBAction)buttonSignIn:(id)sender
{
    [self storeData];

    //Code for login suppose to work here
    .........
    ......... 
} 
```

我使用 [self buttonSignIn:self]; 但它没有用。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:06:55.280

利用：

```
[self buttonSignIn:nil]; 
```

您也可以使用`performSelectorOnMainThread:`.

如果你想用来`self`执行你的调用，那么`nil`作为参数而不是`self`.

IE

```
[self buttonSignIn:nil]; 
```

# javascript - '$(<%= DDL.ID %>) 和 $('<%= DDL.ID %>') 之间的区别

> ID：12402823
> 
> 赞同：1
> 
> 时间：2012-09-13T09:01:35.150
> 
> 标签：javascript, jquery, asp.net

我试图将一个事件绑定到下拉列表，因为昨天没有任何帮助进入 JavaScript 聊天室，没有人能够找到解决我的问题的方法，但后来我以某种方式尝试绑定我的下拉列表，如下所示

```
$('<%= ddl.ID %>').bind('change',myfunction); 
```

到

```
$(<%= ddl.ID %>).bind('change',myfunction); 
```

它开始工作了，有什么想法吗？

**编辑**

抱歉，它不适用于 IE :(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T09:08:17.657

jQuery 使用`CSS selector`like 语法。

因为`ID Selector`它需要以`#`符号作为前缀。例子，`$('#DOMElementId')`

检查 jQuery[**选择器列表**](http://api.jquery.com/category/selectors/)

在您的情况下，正确的应该是

```
$('#<%= ddl.ID %>').bind('change',myfunction) // if you have no master page or 
                                              //ClientIDMode="static" 
```

或者

```
$('#<%= ddl.ClientID %>').bind('change',myfunction) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T09:02:28.240

[jQuery 函数](http://api.jquery.com/jQuery/)需要一个字符串作为选择器。

后一种语法没有意义，除了

*   如果您的字符串是 javascript 变量（例如`document.body`，或者`myvar`如果您定义了`myvar`）。
*   如果您的`ddl.ID`字符串包含引号（您可能已将其创建为`ddl.ID = "\"#id\"";`）

您可能通过另一个错误在您的代码中使这一行无效来修复错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T09:13:31.470

您可能应该`ClientID`改用

`$('#<%= ddl.ClientID %>').bind('change', myfunction);`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T09:13:48.560

最好的选择是

```
$('#'+'<%= ddl.ClientID %>').bind('change',myfunction); 
```

即使您在用户控件或内容页面中使用此控件，它也可以工作

```
$('#'+'<%= ddl.ClientID %>').change(myfunction); 
```

# python - 语句中的括号。它是如何工作的？

> ID：12402825
> 
> 赞同：-2
> 
> 时间：2012-09-13T09:01:35.920
> 
> 标签：python, brackets

我不是`Python`开发人员，但我需要将该语言的脚本翻译成`C#`. 到目前为止一切顺利，但是......这个声明有什么作用？我试图在互联网上寻找它，但没有找到。

```
self.bands = 5
self.ci = [0] * self.bands 
```

any1 可以描述这里发生的事情吗？提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T09:03:02.253

它将单零列表乘以五次：

```
self.ci = [0, 0, 0, 0, 0] 
```

可以写成：

```
self.ci = []
for i in xrange(self.bands):
    self.ci.append(0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T09:03:16.867

它将整数 0 的列表乘以`self.bands`，这将创建一个长度列表`self.bands`，其中包含一堆重复的 0。

这是在 Python 中创建重复序列的惯用方式。

您也可以将它用于字符串，即序列：

```
>>> print "!" * 10
!!!!!!!!!! 
```

# c# - 刷新后重新抛出实体框架OptimisticConcurrencyException

> ID：12402826
> 
> 赞同：2
> 
> 时间：2012-09-13T09:01:38.130
> 
> 标签：c#, entity-framework-4, optimistic-concurrency

我正在使用时间戳列来检查我的实体中的并发性。当 2 个不同上下文中的数据不相同时，会正确抛出异常。

当保存的时候出现这样的异常，我调用下面的方法来处理：

```
public static void HandleOptimisticConcurrencyException(ObjectContext context, OptimisticConcurrencyException ex)
{
    string msg = @"The data has changed while you were editing it.
If you save, your changes will override the previous ones.
If you don't, your changes will be lost.

Do you want to save your changes ?";

    var ret = System.Windows.MessageBox.Show(msg, "Concurrency error...", MessageBoxButton.YesNo, MessageBoxImage.Warning);

    if (ret ==  MessageBoxResult.Yes)
    {
        if (ex.StateEntries != null)
        {
            foreach (var item in ex.StateEntries)
            {
                context.Refresh(RefreshMode.ClientWins, item.Entity);
            }
        }
    }
    else
    {
        if (ex.StateEntries != null)
        {
            foreach (var item in ex.StateEntries)
            {
                context.Refresh(RefreshMode.StoreWins, item.Entity);
            }
        }
    }

    context.SaveChanges();
} 
```

我检查了，刷新是在每个故障实体上执行的。但是，第二个`SaveChanges()`总是重新抛出一个`OptimisticConcurrencyException`.

难道我做错了什么 ？

提前致谢

## **编辑**

我注意到问题是由于第一次之前的方法调用而出现的`SaveChanges()`

```
try
{
    this.UpdateFlags();

    this.repository.Context.SaveChanges();
}
catch (OptimisticConcurrencyException ex)
{
    ExceptionHelpers.HandleOptimisticConcurrencyException(this.repository.Context, ex);
} 
```

如果我注释掉`UpdateFlags()`电话，我没有问题。

这是此方法的代码：

```
private void UpdateFlags()
{
    DateTime now = DateTime.Now;

    int masterId = (int)this.navigationContext.Item;

    var master = this.repository.Context.Masters.Where(e => e.Id == masterId).FirstOrDefault();

    foreach (var project in master.Projects)
    {
        // update flags for each project.

        if (project.Dashboard == null)
        {
            project.Dashboard = new Dashboard();
        }

        var flags = project.Dashboard;
        flags.ModifiedOn = now;

        // Update DP flags
        var dpFlag = (int)project.Tasks.Where(e => e.TaskDP != null)
                                   .Select(e => this.CalculateCompletionStatus(e, now))
                                   .DefaultIfEmpty(CompletionStatusType.Ok)
                                   .Max();
        flags.DP = dpFlag;

        // Update TRS flags
        var trsFlag = (int)project.Tasks.Where(e => e.TaskTRSs != null)
                                   .Select(e => this.CalculateCompletionStatus(e, now))
                                   .DefaultIfEmpty(CompletionStatusType.Ok)
                                   .Max();
        flags.TRS = trsFlag;

        // Update REV flags
        var revFlag = (int)project.Tasks.Where(e => e.TaskREV != null)
                                   .Select(e => this.CalculateCompletionStatus(e, now))
                                   .DefaultIfEmpty(CompletionStatusType.Ok)
                                   .Max();
        flags.REV = revFlag;

        // Update DTP flags
        var dtpFlag = (int)project.Tasks.Where(e => e.TaskDTP != null)
                                   .Select(e => this.CalculateCompletionStatus(e, now))
                                   .DefaultIfEmpty(CompletionStatusType.Ok)
                                   .Max();
        flags.DTP = dtpFlag;

        // Update DEL flags
        var delFlag = (int)project.Tasks.Where(e => e.TaskDEL != null)
                                   .Select(e => this.CalculateCompletionStatus(e, now))
                                   .DefaultIfEmpty(CompletionStatusType.Ok)
                                   .Max();
        flags.DEL = delFlag;

        // Update FIN Flag
        var finFlag = (int)project.SalesTasks.Select(e => this.CalculateCompletionStatus(e, now))
                                             .DefaultIfEmpty(CompletionStatusType.Ok)
                                             .Max();
        flags.FIN = finFlag;

        // Update Project flag
        if (flags.REV == (int)CompletionStatusType.Client && project.DTPBeforeReview.HasValue && project.DTPBeforeReview.Value == false)
        {
            // Corner case : Review is late because of an external person (= grey) and DTP Before REV is not set
            // => all moments after REV are not taken in account.
            var projFlag = new List<int> { dpFlag, trsFlag, revFlag }.Max();
            flags.ProjectStatus = projFlag;
        }
        else
        {
            var projFlag = new List<int> { dpFlag, trsFlag, revFlag, dtpFlag, delFlag, finFlag }.Max();
            flags.ProjectStatus = projFlag;
        }
    }
} 
```

但是我看不出问题出在哪里，因为这是在第一次*之前完成的*`SaveChanges()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T12:54:47.213

好的，我想我找到了解决方法。

问题不在于导致第一个异常的第一个对象，而在于该对象的更深层次。为了解决这个问题，我像这样更新了我的方法：

```
public static void HandleOptimisticConcurrencyException(ObjectContext context, OptimisticConcurrencyException ex)
{
    string msg = @"The data has changed while you were editing it.
If you save, your changes will override the previous ones.
If you don't, your changes will be lost.

Do you want to save your changes ?";

    var ret = System.Windows.MessageBox.Show(msg, "Concurrency error...", MessageBoxButton.YesNo, MessageBoxImage.Warning);

    if (ret ==  MessageBoxResult.Yes)
    {
        if (ex.StateEntries != null)
        {
            foreach (var item in ex.StateEntries)
            {
                context.Refresh(RefreshMode.ClientWins, item.Entity);
            }
        }
    }
    else
    {
        if (ex.StateEntries != null)
        {
            foreach (var item in ex.StateEntries)
            {
                context.Refresh(RefreshMode.StoreWins, item.Entity);
            }
        }
    }

    do
    {
        try
        {
            context.SaveChanges();
            break;
        }
        catch (OptimisticConcurrencyException ex2)
        {
            if (ret == MessageBoxResult.Yes)
            {
                foreach (var item in ex2.StateEntries)
                {
                    context.Refresh(RefreshMode.ClientWins, item.Entity);
                }
            }
            else
            {
                foreach (var item in ex2.StateEntries)
                {
                    context.Refresh(RefreshMode.StoreWins, item.Entity);
                }
            }
        }
    }
    while (true);
} 
```

不过，我愿意接受任何其他更好的建议......

# .net - 从字符串中拆分特殊字符和字母

> ID：12402830
> 
> 赞同：1
> 
> 时间：2012-09-13T09:02:03.093
> 
> 标签：.net, regex, vb.net

我有一个字符串值。我包含字母、特殊字符和数字以及空白的组合。但我只想检索数字。

```
my code
-------
Dim str1 As String = "!@!@#!$@#$#123456habAB^*^&(*)(_)()*("
    Dim str2 As String = Regex.Replace(str1, "[\[\]\\\^\$\.\|\?\*\+\(\)\{\}%,;><!@#&\-\+/d]", "")

    MsgBox(str2)

output am getting
-----------------
123456habAB_

expected output
---------------
123456 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T09:42:13.300

试试这个代码，简短而简单：

```
Dim str1 As String = "!@!@#!$@#$#123456habAB^*^&(*)(_)()*("
Dim str2 As String = Regex.Replace(str1, "[^\d]", "")

MsgBox(str2) 
```

您的解决方案的问题是您没有用空字符串替换“_”或字母。从字符串中替换所有非数字比显式替换所有字符更容易。

# html - 在html中打印带有bar的“a”？

> ID：12402831
> 
> 赞同：2
> 
> 时间：2012-09-13T09:02:06.453
> 
> 标签：html, special-characters

我想在 html 中显示一个“a”，上面有 bar ..如**ā**。就像我想写的一样`āyush`。我也用过`overline`，但这让它很难看。

在 html 中粘贴字符会给出`a-`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T09:05:53.293

在 html 中它是`&amacr;`（小写）或`&Amacr;`（大写）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T09:05:28.690

将其替换为`&#x0101;`

[在此处](http://jsfiddle.net/B2Bcx/)查看示例

确保将字符集设置在文档的头部。

```
<meta http-equiv="content-type" content="text/html; charset=utf-8"> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T09:09:45.280

您没有给我们足够的信息来确定，但这很可能是一个编码问题。我猜您发送页面的字符集可能只是默认字符集，不包含任何扩展字符。

您需要将页面提供为 UTF-8。

将此添加到您的`<head>`块中：

```
<meta charset="utf-8"> 
```

这应该足以解决它。

如果由于某种原因无法更改字符集，则可以将字符作为 HTML 实体发送——找出它的数字实体代码并使用`&#xxx;`符号（`xxx`您需要的字符代码在哪里）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T09:24:18.870

您有两个主要选择：使用字符引用，如`&x#101;`，或使用不会插入字符的工具插入字符“ā”。在前一种情况下，您不必担心字符编码，但其他一些字符可能会在您不注意的情况下出现类似问题。在后一种情况下，您需要确保正确设置了字符编码；请参阅 W3C 文档[字符编码](http://www.w3.org/International/O-charset.en.php)。请注意，设置`meta`标签可能不够，也可能不够，具体取决于服务器。

无论哪种方式，都可能存在字体问题。例如，浏览器可能会从与用于“a”的字体非常不同的字体中选择“ā”的字形，从而导致排版混乱。为避免这种情况，请使用`font-family`包含大量字体的列表，其中包含您需要的所有字符。更多信息：[在 HTML 中使用特殊字符的指南](http://www.cs.tut.fi/~jkorpela/html/characters.html)。

# asp.net-mvc-3 - MVC3 显示模板截断字符串

> ID：12402832
> 
> 赞同：0
> 
> 时间：2012-09-13T09:02:07.520
> 
> 标签：asp.net-mvc-3, razor, display-templates

我创建了一个自定义的 Display For 模板，该模板主要用于我的索引文件中，这样当记录显示​​在列表中时，如果某些记录太长，它们就不会变成丑陋的生物。我试过以下：

```
@model string

@{
    string text = Html.Encode(Model??"");
    if (text.Length >= 35)
    {
        text = text.Substring(0, 35)+"...";

    }    
    @Html.DisplayFor(model=>text) 
 } 
```

虽然它适用于长度超过 35 或等于它的字符串，但如果字符串小于它，它就不起作用。我已经尝试过 else 语句，但它也不起作用。这样做的正确方法是什么？

编辑：空字符串。在源页面文件中，两者之间没有任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:38:39.920

试试这个模板

```
@model string
@{
    string text = Html.Encode(Model ?? "");
    if (text.Length >= 35)
    {
        text = text.Substring(0, 35) + "...";
    }    
}
@text 
```

# c# - 来自 WP7 中代码的 Toast 通知

> ID：12402837
> 
> 赞同：0
> 
> 时间：2012-09-13T09:02:23.387
> 
> 标签：c#, windows-phone-7, xaml, toast

我想显示来自我的应用程序的 toast 通知，其中的代码不是来自推送通知。

就像我的应用程序正在运行一样，我打开了通话任务，5 秒后我想在该通话屏幕上显示 toast 通知，因为我的应用程序在后台及其`obscured`状态下运行。

这是我的代码，我正在使用 Coding4fun 工具包：

```
private void RunBackgroundWorker()
        {
            PhoneCallTask callTask = new PhoneCallTask();
            callTask.PhoneNumber = "03336329631";
            callTask.DisplayName = "Arslan";
            callTask.Show();

            BackgroundWorker backroungWorker = new BackgroundWorker();

            backroungWorker.DoWork += ((s, args) =>
            {
                Thread.Sleep(5000);
            });

            backroungWorker.RunWorkerCompleted += ((s, args) =>
            {
                this.Dispatcher.BeginInvoke(() =>
                {
                    var toast = new ToastPrompt
                    {
                        Title = "Simple usage",
                        Message = "Message",
                        ImageSource = new BitmapImage(new Uri("..\\ApplicationIcon.png", UriKind.RelativeOrAbsolute))
                    };
                    toast.Show();
                }
            );
            });
            backroungWorker.RunWorkerAsync();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T09:07:59.103

当您的应用程序处于挂起状态时，您不能像这样运行“工人”。

但是，您可以运行后台代理 - 例如定期代理 - [http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202942](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202942)

您也无法使用后台代理中的 Coding4Fun 库显示 ToastPrompt - 但您可以使用 ShellToast API - 请参阅“后台代理的 Toast 通知” - [http://msdn.microsoft.com/en-us/library/windowsphone /开发/hh487170](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh487170)

# java - Java 代码静态最终变量用法

> ID：12402840
> 
> 赞同：0
> 
> 时间：2012-09-13T09:02:33.363
> 
> 标签：java, static, final

我下面有两节课。两者都有一个带有吸气剂的变量“回复”。这个变量没有setter方法。唯一不同的是在 ClassOne 中，变量是 static final。

那么有什么区别，哪个更受欢迎？

```
public class ClassOne {

    private static final String reply = "Success";
    ..

    public String getReply() {
        return reply;
    }

    // no setter

} 
```

和第 2 类

```
public class ClassTwo {

    private String reply = "Success";
    ..

    public String getReply() {
        return reply;
    }

    // no setter
} 
```

**更新 1：**

我想知道的是，当变量没有setter时，是否应该将该变量声明为**static final**以进行优化？还是没关系？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T09:17:13.733

> 是否应该将变量声明为 static final 以进行优化？

*   `final`当然，不仅是为了优化，也是为了清晰，因为它可以使你的对象不可变，这总是一件好事。

*   `static`完全改变了字段的性质，与 setter 的存在无关：您只需要该字段的一个实例，还是您的类的每个实例都需要一个？

*   非静态示例： a`Person`有一个名称，它是一个常量（对于给定的人 = 每个实例），因此您可以使用非静态 final 字段，在创建新字段时只设置一次`Person`：

```
 private final String name; 
```

*   静态示例：当您没有 a 的名称时`Person`，您希望使用默认值 - 这是一个全局常量，在所有没有名称的人之间共享，您可以使用静态 final 字段：

```
 private static final String NO_NAME = "John Doe"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T09:04:36.063

当您将变量设置为 final 时，您是在告诉所有人（编译器、运行时）它无法更改。这对优化有很大帮助，例如将所有出现的变量与其值内联。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T09:06:34.023

将参考设置为`final`确保您无法更改参考。但是请注意，如果引用的对象是*可变*的，那么您仍然可以更改它（不是在这种情况下，因为字符串是`immutable`）。

我通常制作字段`final`并在构造函数中初始化它们。通过支持不变性，我的类更容易调试，并且在线程环境中更可能是安全的。删除不变性约束比添加它更容易。

我也为方法参数这样做。我很少（曾经）想要更改方法参数，并且将它们设为最终会捕获无意的分配。

我尽量*不*使用`static`最终常量。除非它类似于记录器，否则我真的不希望每个类一个实例，并且（当然）这在多个类加载器的情况下不起作用。它也越来越接近单例反模式，这会影响简单的测试和（可能）线程。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-13T09:06:45.053

当您有一个无法更改的常量字符串时，您应该将其设为静态最终字符串。

静态意味着类的实例需要更少的内存，因为实例不需要单独的副本。

Final 允许进行一些优化，从而使您的程序更快。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-13T09:07:31.263

有几件事情要知道：

*   编译器可以检查最终变量是否被意外更改。
*   对非静态变量的引用包含在实例中，因此另外还有少量不必要的内存消耗
*   静态变量在同一类的所有实例之间共享，因此您可以确保所有实例都使用相同的值
*   final 静态变量，尤其是字符串在编译时链接，因此它们不需要在运行时从字段中取消引用。由于即使通过反射也无法更改它，因为在运行时不使用此类字段。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-13T09:07:01.007

您创建变量的事实`static`意味着该变量的单个实例将在 的所有实例之间共享`ClassOne`，因为该变量绑定到类本身，而不是其实例。除了任何 JVM 优化之外，`reply`每个`ClassTwo`.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-13T09:13:19.590

> 第一个是`Constant`你需要在编译时知道它的价值。

```
private static final String reply = "Success"; 
```

第二个只是简单的成员变量。因此，任何情况下都首选第一个，因为第二个将为每个对象创造价值。

`Assuming that you intended **private final String reply** in second case`

> 最终变量只能通过初始化程序或赋值语句初始化一次。它不需要在声明时初始化：这称为“空白最终”变量。

在第二种情况下，您还可以在构造函数中声明和初始化它

```
 private final String reply; 
```

[你可以在这里](http://en.wikipedia.org/wiki/Final_%28Java%29)阅读更多关于它的信息

# python - 检查列表或集合的元素是否为单一类型的简单方法？

> ID：12402845
> 
> 赞同：4
> 
> 时间：2012-09-13T09:02:43.067
> 
> 标签：python

如果所有元素都是 int 或者都是 string 则我需要编写一段代码然后返回 true，否则返回 false

```
[1,'1','a','b'] False
[1,2,3,4] True
['apple','orange','melon'] True
['1', 2, 3, 4] False 
```

我的解决方案是这些

```
def foo(l):
    t = type(l[0])
    if t is not str and t is not int:
        return False
    for x in l:
        if t != type(x):
            return False
    return True 
```

我认为应该更好。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-13T09:05:07.933

此代码通常检查所有元素是否属于同一类型：

```
len(set(type(elem) for elem in elems)) == 1 
```

它回答了您的问题的标题，但与您的解决方案不同（它为浮动列表返回 false）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T09:07:40.820

如果您要求列表`l`中的所有元素都属于某种类型，例如`int`，那么以下是一种非常有效的方法：

```
any(not isinstance(e, int) for e in l) 
```

它会短路，即在第*一次*出现不是 if 类型的列表元素时，`int`它的计算结果为`False`。

如果您要求列表`l`中的所有元素都属于同一类型并且不提供此类型作为输入信息，则列表中至少有一个元素，那么这个 a 是类比：

```
all(type(e) == type(l[0])) for e in l) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T09:14:03.970

```
type(l[0]) in [int, str] and all( type(e) == type(l[0]) for e in l) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T09:06:26.397

```
def all_of(iterable, types=[str,int])
    actual_types = set(map(type, iterable))
    return len(actual_types) == 1 and next(iter(actual_types)) in types 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-13T09:06:44.033

```
In [32]: len(set(map(type, [1, 2, 3]))) == 1
Out[32]: True

In [33]: len(set(map(type, [1, 2, '3']))) == 1
Out[33]: False 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-13T09:10:22.320

如果您想检查序列是否都是特定类型...

```
def check_all_same_type(sequence, typ, strict=True):
    if strict:
        return all(type(item) == typ for item in sequence)
    return all(isinstance(item, typ) for item in sequence) 
```

如果您只是想确保它们都是同一类型...

```
types = set(type(item) for item in sequence)
all_same = (len(types) == 1)
if all_same:
    print "They're all a type of", type(next(iter(types))) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-13T09:40:09.770

我认为它会更快：

对于`ints`：

```
>>> ints = set(list(range(10)))
>>> ints
set([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
>>>
>>>
>>>
>>> l = set([1,2,3,'d'])
>>> l - ints
set(['d'])
>>>
>>> l = set([1,2,'3','d'])
>>> l - ints
set(['3', 'd'])
>>> 
```

可以将此方法用于`str's`.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-13T09:48:21.117

这是我可以做到的。检查初始条件后，一旦 elem 的类型未能通过，该函数将停止检查。它还处理空列表。

```
def check_elem_types(l):
    return bool(l) and type(l[0]) in (int, str) and all(type(e) == type(l[0]) for e in l[1:]) 
```

如果你想处理 unicode 字符串（在 Python 2.x 中），你需要这个：

```
def check_elem_types(l):
    return (bool(l) and isinstance(l[0], (int, basestring)) and
            all(type(e) == type(l[0]) for e in l[1:])) 
```

# windows - 我无法在 win 8 上安装离线 .netframework3.5

> ID：12402846
> 
> 赞同：1
> 
> 时间：2012-09-13T09:02:50.683
> 
> 标签：windows, operating-system

我在 Windows 8 上离线安装 .NET Framework 3.5 时遇到问题。
当我在 cmd 区域中编写命令时，它会运行到 68% 然后停止。
而且我不喜欢下载它。
大家可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T05:33:14.480

我明白我在这件事上的问题！
我的 Windows 8 源有问题，当更换 CD 时它起作用了。
感谢您的回答。

# eclipse - Eclipse (ctrl+space) 内容辅助钩子

> ID：12402860
> 
> 赞同：1
> 
> 时间：2012-09-13T09:03:36.723
> 
> 标签：eclipse, plugins, shortcut, content-assist

我编写了一个插件，它从 Java 编辑器获取用户输入，进行一些计算，并将结果写入我的视图。我开始上述计算过程的方式是通过上下文菜单，我讨厌它。我希望它从 ctrl+space 开始，即内容辅助。插件的功能更快，更直观。有没有办法这样做？

更新：例如，当用户按 ctrl+space 时，我应该怎么做才能获取当前光标位置？我会使用该位置信息并将其打印到我的视图中。这是我基本上需要的最简单的插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T18:00:24.687

您可以通过扩展[javaCompletionProposalComputer](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/extension-points/org_eclipse_jdt_ui_javaCompletionProposalComputer.html)来参与 Ctrl-Space 的内容辅助计算。但是，如果您想触发对 Java 文件的一些任意修改操作，则更适合通过提供[快速帮助](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/extension-points/org_eclipse_jdt_ui_quickAssistProcessors.html)来代替。

如果您对这些术语感到困惑：快速帮助的一个示例是建议“反转 if 语句”，您可以在将光标放在“if”上按 Ctrl-1 时看到该建议。

# push-notification - 如何获取推送通知的文本（Urban Airship）

> ID：12402862
> 
> 赞同：0
> 
> 时间：2012-09-13T09:03:38.443
> 
> 标签：push-notification, push, apple-push-notifications, urbanairship.com

我搜索了我的问题并没有找到答案。所以我正在使用城市飞艇来推送通知，它工作正常。所以现在我想做这个：当用户点击通知打开应用程序时，我想在 uialertview 中再次给他通知文本。那么我可以在哪里获取通知文本？我可以用这种方法吗

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {

 UIApplicationState appState = UIApplicationStateActive;
    if ([application respondsToSelector:@selector(applicationState)]) {
        appState = application.applicationState;
    }

    [[UAPush shared] handleNotification:userInfo applicationState:appState];
    [[UAPush shared] resetBadge];} 
```

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T04:56:28.543

我可以阅读打开我的应用程序的推送通知`didReceiveRemoteNotification:(NSDictionary *)userInfo`- 这是我的`didReceiveRemoteNotification`：

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {

    // TestFlight API
    TESTFLIGHT_CHECKPOINT(@"Receive Remote Notification");

    // Urban Airship
    [[UAPush shared] handleNotification:userInfo applicationState:application.applicationState];
    NSLog(@"userInfo: %@",userInfo);
    [UAInboxPushHandler handleNotification:userInfo];
} 
```

当我从 aps 通知启动我的应用程序时，我在调试窗口中有这个：

```
2013-01-17 20:52:49:947 iFlightBag[8229:2311] -[AppDelegate_Shared application:didReceiveRemoteNotification:] [Line 2403] userInfo: {
    "_" = "l0-mgGElEeKbHAAbIbyL6A";
    aps =     {
        alert = "Manual: IOM update 2013-01-17T20:14:42-08:00";
        badge = 0;
    };
    operation = update;
    tab = manuals;
} 
```

# asp.net-mvc-3 - 用于包括客户端在内的动态验证属性的 ASP.NET MVC 3 模式

> ID：12402868
> 
> 赞同：0
> 
> 时间：2012-09-13T09:04:14.283
> 
> 标签：asp.net-mvc-3, entity-framework, validation

我对表单中字段的验证要求包含在外部表中，因此可以在不更改和重建代码的情况下更新它们。

我有大约 100 个字段，其中混合了验证要求 - 范围、必需、正则表达式和对其他字段的依赖。一个例子是日期范围验证。出生日期字段需要一个介于当前日期的 -10 年到 -50 年之间的日期范围。

我已经阅读了该主题，但尚未确定完整解决方案的模式。

我正在使用带有 MVC 3 和实体框架的 Visual Studio 2010。

对此的任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T16:01:02.213

在一个简单的级别中，我认为您仍然可以使用内置的 Data-Annotations 验证属性来进行验证，为此您应该将存储在表中的验证规则映射到属性。

我认为您所要做的就是通过继承类来创建自定义模型验证提供程序`ModelValidatorProvider`。此类包含一个调用的方法，该方法`GetValidators`返回该模型的集合验证器。

您必须实现该`GetValidators`方法，并且必须在其中进行数据库调用以从数据库（或从缓存？）获取模型的验证规则并将它们转换为`ModelValidator`s。您仍然可以使用内置的进行`DataAnnotationsModelValidator`验证。

我建议您查看它的源代码，`DataAnnotationsModelValidatorProvider`这将为您提供所有信息。在那个类中，他们所做的基本上是迭代应用于模型属性的所有验证属性，并`ModelValidator`通过适配器和工厂将它们转换为 s。在您的情况下，它们不是作为属性存储在表中的记录，我认为那里不会有太多工作。

# arrays - 为什么在 GCC 的内联 asm 中使用数组元素作为输出内存约束时需要指定“内存”clobber？

> ID：12402869
> 
> 赞同：2
> 
> 时间：2012-09-13T09:04:19.573
> 
> 标签：arrays, gcc, constraints, mips, inline-assembly

我正在尝试对音频编解码器进行一些 asm 级别（带有一些 DSP 扩展的 MIPS）优化。涉及到一些 DSP 处理，之后我需要将结果存储回数组中。这是我认为应该这样做的代码：

```
asm(
    eDSP_MFLO(8, 1) // move the accumulated result to $8
    "sw $8, %0\n"   // result => array
    : "=m"(s[i])
    :: "$8"
); 
```

问题是这段代码是否有效（当它没有时我会在数组中得到垃圾），这取决于它的周围代码，除非我将“内存”添加到clobber列表中：

```
asm(
    eDSP_MFLO(8, 1) // move the accumulated result to $8
    "sw $8, %0\n"   // result => array element s[i]
    : "=m"(s[i])
    :: "$8", "memory"
); 
```

我很难理解为什么它是必要的。如果我自己计算了 asm 块中数组的偏移量，我不会质疑它，以便编译器不知道哪些内存地址已更改，但是由于 GCC 自己执行这些步骤，为什么它需要额外的“内存“破烂？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:40:36.743

看看为整个函数生成的汇编代码，无论有没有`"memory"`约束（使用`gcc -S ...`）。看起来 gcc`s[i]`在语句之前从内存中加载的寄存器中有一个副本`asm()`，并且它没有意识到该寄存器在语句之后包含过时的信息，`asm()`除非您添加`"memory"`约束。

# installation - Web 设置替换以在 VS2012 中创建 MSI？

> ID：12402870
> 
> 赞同：7
> 
> 时间：2012-09-13T09:04:23.067
> 
> 标签：installation, visual-studio-2012, web-setup-project

我在 VS2010 中有一个项目，它使用 Web 设置项目进行部署。我现在正在考虑将其迁移到 VS2012，并且必须找到一个替换设置例程。

我的要求：

*   在开发机器上创建部署包/安装程序的一步构建。
*   可以在服务器上运行的安装程序/例程 - 没有可用的 Visual Studio。
*   Visual Studio 和服务器之间没有直接交互。我必须通过 RDP 会话复制设置文件。
*   Web 应用程序 (MVC) 和 Windows 服务的设置，最好捆绑在一个安装程序中（新要求目前无法解决 din Web Setup 项目）。
*   作为设置的一部分运行 EF 迁移的可能性（当前通过[自定义操作](http://coding.abel.nu/2012/04/update-database-msi-custom-action/)完成）。

我应该从哪里开始？我应该研究 VS2012 中改进的发布功能吗？我应该看看Wix吗？还有什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:14:40.887

深入研究 Visual Studio 2012 并尝试按照预期的方式使用它，而不是反对它，我们最终使用了 Web 部署包。它不会创建 MSI 文件，而是创建一个 zip 文件，该文件可以轻松导入目标计算机上的 IIS。

添加了 Windows 服务项目作为对网站项目的引用。这样，服务的二进制文件就包含在网站的 bin 目录中。Entity 框架中的 migrate.exe 文件作为 bin 目录中的链接添加，这意味着它也已部署。

最后，我们在项目中添加了一个 project.wpp.targets 文件，该文件运行所需的命令来安装和启动服务，并将服务的配置文件包含在部署中。这对我们有用，但并不是那么优雅（例如，不同配置的站点安装路径是硬编码的）。

project.wpp.targets 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<!--
*** WARNING ***
This file is cached by visual studio and changes won't take effect until 
visual studio is restarted. When editing this file, it is better to run the
build step for packaging from the command line (a VS command prompt).
There are some problems with dependencies not being correctly identified that
way, but at least the archive.xml file can be verified from the command prompt.

msbuild orderportal.csproj /t:package /p:Configuration=SysTest /p:DeployOnBuild=true;DeployTarget=Package
-->

<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <IncludeRunMigrations>TRUE</IncludeRunMigrations>
    <AfterAddIisSettingAndFileContentsToSourceManifest Condition="'$(AfterAddIisSettingAndFileContentsToSourceManifest)'==''">
      $(AfterAddIisSettingAndFileContentsToSourceManifest);
      RunMigrations;
      ServiceInstall;
    </AfterAddIisSettingAndFileContentsToSourceManifest>

    <IncludeServiceInstall>TRUE</IncludeServiceInstall>
    <BeforeAddContentPathToSourceManifest Condition="'$(BeforeAddContentPathToSourceManifest)' == ''">
      $(BeforeAddContentPathToSourceManifest);
      ServiceUnInstall;
    </BeforeAddContentPathToSourceManifest>

    <DeploymentDir Condition="'$(Configuration)'=='SysTest' AND '$(DeploymentDir)'==''">c:\inetpub\wwwroot\SysTest\</DeploymentDir>
    <DeploymentDir Condition="'$(Configuration)'=='IntTest' AND '$(DeploymentDir)'==''">c:\inetpub\wwwroot\IntTest\</DeploymentDir>
    <DeploymentDir Condition="'$(Configuration)'=='Prod' AND '$(DeploymentDir)'==''">c:\inetpub\wwwroot\</DeploymentDir>

    <CopyAllFilesToSingleFolderForPackageDependsOn>
      IncludeServicesAppConfig;
      $(CopyAllFilesToSingleFolderForPackageDependsOn);
    </CopyAllFilesToSingleFolderForPackageDependsOn>

  </PropertyGroup>
  <Target Name="RunMigrations" Condition="'$(IncludeRunMigrations)' == 'TRUE'">
    <Message Text="Adding migration running"/>
    <ItemGroup>
      <MsDeploySourceManifest Include="runCommand">
        <path>$(DeploymentDir)bin\migrate.exe /startupdirectory:$(DeploymentDir)bin Topsi.Core.dll /startUpConfigurationFile:$(DeploymentDir)web.config</path>
        <waitAttempts>1</waitAttempts>
        <waitInterval>60000</waitInterval>
        <dontUseCommandExe>true</dontUseCommandExe>
        <AdditionalProviderSettings>waitInterval;waitAttempts;dontUseCommandExe</AdditionalProviderSettings>
      </MsDeploySourceManifest>
    </ItemGroup>
  </Target>

  <Target Name="ServiceUnInstall" Condition="'$(IncludeServiceInstall)' == 'TRUE'">
    <Message Text="Adding service uninstall" />
    <ItemGroup>
      <MsDeploySourceManifest Include="runCommand">
        <path>net stop "Topsi Schedule Service $(Configuration)"</path>
        <waitAttempts>1</waitAttempts>
        <waitInterval>60000</waitInterval>
        <dontUseCommandExe>true</dontUseCommandExe>
        <AdditionalProviderSettings>waitInterval;waitAttempts;dontUseCommandExe</AdditionalProviderSettings>
      </MsDeploySourceManifest>
      <MsDeploySourceManifest Include="runCommand">
        <path>C:\Windows\Microsoft.NET\Framework\v4.0.30319\installutil.exe /u $(DeploymentDir)bin\Topsi.Services.exe</path>
        <waitAttempts>1</waitAttempts>
        <waitInterval>60000</waitInterval>
        <dontUseCommandExe>true</dontUseCommandExe>
        <AdditionalProviderSettings>waitInterval;waitAttempts;dontUseCommandExe</AdditionalProviderSettings>
    </MsDeploySourceManifest>
    </ItemGroup>
  </Target>
  <Target Name="ServiceInstall" Condition="'$(IncludeServiceInstall)' == 'TRUE'">
    <Message Text="Adding service install"/>
    <ItemGroup>
      <MsDeploySourceManifest Include="runCommand">
        <path>C:\Windows\Microsoft.NET\Framework\v4.0.30319\installutil.exe $(DeploymentDir)bin\Topsi.Services.exe</path>
        <waitAttempts>1</waitAttempts>
        <waitInterval>60000</waitInterval>
        <dontUseCommandExe>true</dontUseCommandExe>
        <AdditionalProviderSettings>waitInterval;waitAttempts;dontUseCommandExe</AdditionalProviderSettings>
      </MsDeploySourceManifest>
      <MsDeploySourceManifest Include="runCommand">
        <path>net start "Topsi Schedule Service $(Configuration)"</path>
        <waitAttempts>1</waitAttempts>
        <waitInterval>60000</waitInterval>
        <dontUseCommandExe>true</dontUseCommandExe>
        <AdditionalProviderSettings>waitInterval;waitAttempts;dontUseCommandExe</AdditionalProviderSettings>
      </MsDeploySourceManifest>
    </ItemGroup>
  </Target>
  <Target Name="IncludeServicesAppConfig">
    <ItemGroup>
      <_CustomFiles Include="..\Services\bin\$(Configuration)\Topsi.Services.exe.config">
        <DestinationRelativePath>%(RecursiveDir)%(Filename)%(Extension)</DestinationRelativePath>
      </_CustomFiles>

      <FilesForPackagingFromProject  Include="%(_CustomFiles.Identity)">
        <DestinationRelativePath>bin\%(RecursiveDir)%(Filename)%(Extension)</DestinationRelativePath>
      </FilesForPackagingFromProject>
    </ItemGroup>
  </Target>
</Project> 
```

# java - Wso2 ESB 管理服务获取创建代理 Java

> ID：12402873
> 
> 赞同：0
> 
> 时间：2012-09-13T09:04:27.397
> 
> 标签：java, xml, proxy, wso2, wso2esb

**1）**您好，我正在尝试使用管理服务在 ESB 中创建代理。

所以我暴露了管理服务（隐藏=假）

我已经在我的 Java 项目中导入了 WSDl`https://localhost:8243/services/ProxyServiceAdmin?wsdl`

但是我无法锻炼如何调用`addProxy`我使用错误的管理服务的方法？请提供使用此方法的示例。

```
ProxyServiceAdmin ps = new ProxyServiceAdmin();
ps.addProxy(); //wrong 
```

**2）**我有一个定义为单行字符串的代理，比如

```
String xmlproxy="<?xml version='1.0' encoding='UTF-8'?><proxy xmlns='http://ws.apache.org/ns/synapse' name='MyProxy1' transports='https' startOnLoad='true' trace='disable'> <target inSequence='sequence1'>...." 
```

是否可以通过调用管理服务的某些方法来添加此代理？

非常感谢您的关注！

**编辑**我查看了它说的 WSDL“ProxyServiceAdmin?wsdl”`<wsdl:operation name="addProxy"><http:operation location="addProxy"/><wsdl:input><mime:content type="text/xml" part="parameters"/></wsdl:input><wsdl:output><mime:content type="text/xml" part="parameters"/></wsdl:output>`

所以它在那里，但为什么我不能调用它？为什么我的代码不能像普通的 Web 服务那样工作？真的，请帮忙。我不明白我做错了什么......

```
ProxyServiceAdmin ps = new ProxyServiceAdmin();
ps.addProxy(); //not recognized as an operation of ProxyServiceAdmin even if it is in the wsdl 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T12:21:31.470

您只需使用“org.wso2.carbon.proxyadmin.stub.ProxyServiceAdminStub”通过管理服务来广告代理

请查看以下代码和内联注释。

```
 String endPoint = *<your backend service url>* +"ProxyServiceAdmin";
    proxyServiceAdminStub = new ProxyServiceAdminStub(endPoint); 
```

您必须先验证您的服务存根，然后才能使用它

```
 CarbonUtils.setBasicAccessSecurityHeaders(userName, password,                      
                              proxyServiceAdminStub._getServiceClient()); 
```

需要将代理的 ProxyData 对象生成为 synaps xml

```
 String[] transport = {"http", "https"};
    ProxyData data = new ProxyData();
    data.setName(proxyName);
    data.setWsdlURI(*<url to your WSDL>*);
    data.setTransports(transport);
    data.setStartOnLoad(true);       
    data.setEndpointXML("<endpoint xmlns=\"http://ws.apache.org/ns/synapse\"><address uri=\"" + serviceEndPoint + "\" /></endpoint>");
    data.setEnableSecurity(true);
    proxyServiceAdminStub.addProxy(data); 
```

谢谢你，达沙纳

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T17:17:30.557

[请在此处](http://blog.shelan.org/2012/09/create-proxy-in-wso2-esb-using-admin.html)找到使用管理服务创建代理的示例。我将 Darshana 的代码添加到了一个完整的示例中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T09:56:13.127

这是用于创建传递代理的[JSP 页面。](https://svn.wso2.org/repos/wso2/carbon/platform/branches/4.0.0/components/proxy-admin/org.wso2.carbon.proxyadmin.ui/4.0.1/src/main/resources/web/proxyservices/template_pass-through.jsp)您可以填写类似的代理数据。如果您浏览其他 jsps，您会发现用于不同代理模板的类似逻辑。[在这里](https://svn.wso2.org/repos/wso2/carbon/platform/branches/4.0.0/components/proxy-admin)您可以找到完整的模块，包括 UI 和服务代码。

# c - 二维数组初始化

> ID：12402874
> 
> 赞同：-1
> 
> 时间：2012-09-13T09:04:27.793
> 
> 标签：c, arrays

我创建了一个像这样的二维数组：

```
char string_y2m[2][8]; 
```

然后我只是用`memset()`0初始化它：

```
memset(&string_y2m, 0, sizeof(string_y2m)); 
```

现在我必须为它分配一些值，但它不起作用。我这样分配它：

```
string_y2m[2][8] = {"2011-1","2011-01"}; 
```

它不起作用，如果我在声明本身做同样的事情，它会起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T09:06:07.943

当目标是一个字符数组并且你没有声明它时，你不能在 C 中分配这样的字符串。

在 C 中，你需要使用`strcpy()`将字符串复制到数组中，非常注意缓冲区大小：

```
strcpy(string_y2m[0], "2011-1");
strcpy(string_y2m[1], "2011-01"); 
```

或者`snprintf()`如果你有它，请使用：

```
snprintf(string_y2m[0], sizeof string_y2m[0], "%s", "2011-1");
snprintf(string_y2m[1], sizeof string_y2m[1], "%s", "2011-01"); 
```

此外，在写入字符串之前无需清除空格，因为写入字符串会将字符设置为所需的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T09:35:23.203

只是不要使用赋值，而是从一开始就正确初始化数组：

```
char string_y2m[2][8] = {"2011-1","2011-01"}; 
```

这将初始化所有未显式初始化为 的字符`0`。

# java - 替换字符串中的字段值

> ID：12402876
> 
> 赞同：3
> 
> 时间：2012-09-13T09:04:32.317
> 
> 标签：java, guava

使用 Google Guava 是否有 String 实用程序可以轻松替换内部的字符串字段，如下所示：

```
String query = mydb..sp_mySP ${userId}, ${groupId}, ${someOtherField} 
```

我可以在哪里做这样的事情：

```
StringUtil.setString(query)
   .setField("userId", "123")
   .setField("groupId", "456")
   .setField("someOtherField", "12-12-12"); 
```

然后生成的字符串将是：

```
mydb..sp_mySP 123, 456, 12-12-12 
```

当然，像`${<field>}`操作之前一样设置字符串字段模式...

无论如何，这是我的方法：

```
public class StringUtil {
    public class FieldModifier {
        private String s;
        public FieldModifier(String s){
            this.s = s;
        }
        public FieldModifier setField(String fieldName, Object fieldValue){
            String value = String.valueOf(fieldValue);
            s = modifyField(s, fieldName, value);
            return new FieldModifier(s); 
        }
        public String get() {
                return s;
        }
        private String modifyField(String s, String fieldName, String fieldValue){
            String modified = "";
            return modified;
        }
    }
    public FieldModifier parse(String s){
        FieldModifier fm = new FieldModifier(s);
        return fm; 
    }
} 
```

因此，在这种情况下，我只需将实际代码放入`modifyField`将直接修改字符串的函数中。另外，如果有一种方法可以使`parse`函数成为静态的，那么我可以不做`StringUtil.parse(...)`，`new StringUtil().parse(...)`这看起来确实不太好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T09:08:31.637

是的，[String.format()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)。

```
String s = "Hey %s! Cool %s, right?";
System.out.println(String.format(s, "xybrek", "feature")); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T09:13:40.553

番石榴中没有这样的东西。您可以查看可以进行字符串模板的[SpEL](http://static.springsource.org/spring/docs/3.0.x/reference/expressions.html)（Spring 表达式语言）或其他模板框架，例如[Velocity](http://velocity.apache.org/)或[Freemarker](http://freemarker.sourceforge.net/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T09:39:37.707

使用番石榴？不。

尽管最近要求增强以支持此功能（[请参阅此处](http://code.google.com/p/guava-libraries/issues/detail?id=1142)）。

[无论如何，使用 Apache Commons Lang 的StrSubstitutor](http://commons.apache.org/lang/api-3.0/org/apache/commons/lang3/text/StrSubstitutor.html)仍然是可行的。

# c# - 在另一个 razor 脚本中使用 Razor 脚本

> ID：12402879
> 
> 赞同：0
> 
> 时间：2012-09-13T09:04:36.733
> 
> 标签：c#, asp.net-mvc-3, razor

有没有办法在 razor 脚本中重用 razor 脚本，这样在 BaseRazorScript 中定义的 C# 中的 @functions{...} 可以在重用 BaseRazorScript 文件的 razor 脚本中调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-02T16:51:22.343

您可以使用部分。例如：

```
@Html.Partial("nameofyourparital.cshtml") 
```

您必须将部分文件放在**~/views/partial/**或**~/views/shared/**文件夹中

# iphone - 以编程方式将华氏温度转换为摄氏度

> ID：12402884
> 
> 赞同：-2
> 
> 时间：2012-09-13T09:05:02.937
> 
> 标签：iphone, ios, xcode

在我的项目中，想先以华氏度显示天气，然后如果用户想要点击转换，则需要以摄氏度显示天气。我的代码是

```
NSNumber *metric = [[NSUserDefaults standardUserDefaults] objectForKey:@"metric"];

NSLog(@"Metric is %@", metric);

CGFloat aFloat = [speed floatValue];
CGFloat tFloat = [temperature floatValue];
CGFloat tempFloat = (tFloat-30)/2;
NSNumber * p_Number = [NSNumber numberWithFloat:tempFloat];

//Convert mph to kmph
if ([metric boolValue]) {

    [windValueLabel setText:[NSString stringWithFormat:@"%.2f kmph", aFloat * 1.6]  ];
    temperatureLabel.text = [NSString stringWithFormat:@"%@", p_Number];

}
else{
    [windValueLabel setText:[NSString stringWithFormat:@"%.2f mph", aFloat / 1.6]];
    temperatureLabel.text = [NSString stringWithFormat:@"%@", temperature];
} 
```

当您启动应用程序时，它的工作和显示温度为华氏温度，但在摄氏温度下崩溃……这是当前的转换。帮帮我，伙计们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:35:55.017

您的公式略有偏差，您想要：

```
CGFloat tempFloat = (tFloat-32.0) / 1.8; 
```

但这并不是让它崩溃的原因。事实上，这对我来说并没有崩溃。当它崩溃时你会收到什么信息？

# ajax - CakePHP2.0 在 CakePHP 控制器中访问 post 变量的正确方法是什么？

> ID：12402889
> 
> 赞同：0
> 
> 时间：2012-09-13T09:05:08.090
> 
> 标签：ajax, post, cakephp-2.0

我不确定如何访问我在控制器中使用 ajax 发布的变量。我虽然可能是这样的：

```
$this->request->data['post']['varName']; 
```

我认为这不是访问我发布的变量的正确方法，因为它似乎不起作用，所以我的问题是：“在 CakePHP 控制器中访问 post 变量的正确方法是什么”。为了完整起见，我将包含一个示例 jQuery ajax 调用。如果您可以通过下面的示例来参考如何访问数据，那就太好了

```
$.ajax({ type: "POST",
         url: "someURL", // Not an actual URL just placeholder for example
         data: {'foo': 5, 'bar': 12},
         success: function()
                  {
                       alert('Post was successful');
                  }
          }); 
```

那么如何在 cakePHP 控制器中访问 foo 和 bar 呢？

此外，如果您知道在文档中的何处可以找到此信息，您能否将我链接到它，因为我很难找到这些信息。

**更新！**

在此处找到文档的链接[。](http://book.cakephp.org/2.0/en/controllers/request-response.html#accessing-post-data)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:30:33.143

是`$this->request-data['post']['varName'];`错字吗？如果不是，那么在需要`->`.

我认为你的问题可以通过使用这个来解决：

```
echo $this->request->data['foo']; // Should print 5
echo $this->request->data['bar']; // Should print 12 
```

# iphone - 访问您无法修改的父类扩展中定义的 Obj-C 属性

> ID：12402890
> 
> 赞同：1
> 
> 时间：2012-09-13T09:05:20.500
> 
> 标签：iphone, objective-c, ios, xcode, ipad

假设你的父类是，例如`MyClass.m`

```
@interface MyClass()
  @property (nonatomic, readwrite, retain) NSString * str;
@end 
```

而你继承了这个类，想修改 的值`str`，不碰`MyClass.m`or可以`MyClass.h`吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:13:44.033

是的，您可以，只需使用 KVC：

```
 [anObject setValue:@"foo" forKey:@"str"];
 NSString* x =[anObject valueForKey:@"str"]; 
```

但*不要这样做*。`*.h`由于父类的开发人员想要隐藏它，因此该属性对公共接口隐藏。

最终，父类的开发者可能会停止使用该属性。那么你使用这个属性的代码将会崩溃。

所以，不要这样做。

# c++ - MySQL 连接器问题 - 链接甚至更多

> ID：12402891
> 
> 赞同：4
> 
> 时间：2012-09-13T09:05:23.743
> 
> 标签：c++, mysql, visual-studio, linker, mysql-connector

所以，我又来了，伙计们。经过一整天试图找出链接 libmysql.lib 和 mysqlclient.lib 的解决方案后，我彻底完成了。所以，在那里，我决定采取另一种方式，使用方便的 MySQL 连接器。

由于它的 1.1.0 版本使用了 boost，而我没有它，也不想花时间去弄清楚一切，我决定下载 1.0.5。

所以，我安装了它，创建了新项目，链接了所有必要的库，设置了额外的库和包含（嗯，通常，根据[本](http://docs.oracle.com/cd/E17952_01/refman-5.5-en/connector-cpp-apps-windows-visual-studio.html)手册完成所有事情。为了测试它是否正常工作，我使用了这样的示例：

```
#include <stdlib.h>
#include <iostream>

#include "driver.h"
#include "exception.h"
#include "resultset.h"
#include "statement.h"
#include "prepared_statement.h"

int main(){

    sql::Driver *driver;
    sql::Connection *con;
    sql::Statement *stmt;
    sql::ResultSet *res;
    sql::PreparedStatement *pstmt;

    try{
        driver = get_driver_instance();
        con = driver->connect("localhost", "root", "root");
        con->setSchema("test");

        /*blah blah yada yada*/

        }catch(sql::SQLException &e){
            std::cout<<e.what();
        }
} 
```

我跳过了部分代码，因为这不是重点。所以，这个问题是应用程序错误告诉无法正确启动（0xc000007b）。调试并没有太大帮助，因为这个错误在程序运行时就发生了，即即使我在开始时设置了无限循环，它仍然会崩溃。

所以，我想：“这应该是这个版本的一些错误，所以我必须尝试更新一个”。在此之后，我继续下载了 1.1.0 版的连接器以及 boost 库。比创建新项目，像第一个一样设置所有依赖项，但指向较新版本的连接器。除此之外，我设置了新的参考 mysqlcppconn_EXPORTS。因此，准备工作已经完成，出于测试目的，我使用了[MySQL 站点](http://dev.mysql.com/tech-resources/articles/mysql-connector-cpp.html#createdb)的代码，一般来说，是这样的：

```
/*tons of includes here*/

int main(int argc, const char *argv[]) {

    Driver *driver;
    Connection *con;
    Statement *stmt;
    ResultSet *res;
    PreparedStatement *prep_stmt;
    Savepoint *savept;

    int updatecount = 0;

    /* initiate url, user, password and database variables */
    string url(argc >= 2 ? argv[1] : DBHOST);
    const string user(argc >= 3 ? argv[2] : USER);
    const string password(argc >= 4 ? argv[3] : PASSWORD);
    const string database(argc >= 5 ? argv[4] : DATABASE);

    try {
        driver = get_driver_instance();

        /*blah blah yada yada*/

    } catch (std::runtime_error &e) {

        cout << "ERROR: runtime_error in " << __FILE__;
        //cout << " (" << __func__ << ") on line " << __LINE__ << endl;
        cout << "ERROR: " << e.what() << endl;

        return EXIT_FAILURE;
    }

    return EXIT_SUCCESS;
} // main() 
```

你猜怎么着？是的，这里又出现了链接器错误：

```
error LNK2001: unresolved external symbol _get_driver_instance 
```

所以请任何人告诉我我做错了什么？将不胜感激。

**我会明确说明并用粗体字写出来，这样就不会有任何答案。我已经明确设置了 Preferences -> C/C++ -> General -> Additional Include Directories 以及 Preferences -> Linker -> General -> Additional Library Directories。**

**另外，我已经把`mysqlcppconn.lib`Preferences -> Linker -> Additional Dependencies。**

**此外，我已将`mysqlcppconn.dll`and `libmysql.dll`（是的，来自各自的 C++ 连接器版本）放入我的项目文件夹中，对此没有任何问题。**

**哦，是的，我`CPPCONN_PUBLIC_FUNC=`在预处理器定义中尝试了使用和不使用键 - 没有发生任何变化。**

**正如我所说的那样 - 在相同的项目偏好下，连接器的 1.0.5 版本在构建阶段失败，而 1.1.0 版本在编译阶段失败。**

ps 我正在使用 VS 2010，我的操作系统 - Windows 7 x64。项目和库都是 x32。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-30T18:26:58.927

我有同样的问题“无法正确启动（0xc000007b）”。问题是我没有使用正确的 DLL（使用 x86 而不是 x64），即使我已经为 64 位安装（并重新安装）mysql。

我已将 PATH 变量“C:\MySQL\Connector C++ 1.1.3\lib\opt”添加到 mysqlcppconn.dll（对于 x64）所在的位置。尽管如此，在我的 PATH 中还有另一个目录（lua 安装），其中包含 mysqlcppconn.dll（对于 x86）。由于 x86 目录是在 MySQL 目录之前设置的，因此 x86 dll 已加载，因此“无法启动......”

为了避免这种情况，我已将 mysqlcppconn.dll 复制到我的项目调试目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:12:50.293

尝试创建一个新项目并创建一个简单的 DB 连接器，我这里没有可用的窗口，所以我只能向您展示我的 linux 示例：

我可以看到的区别是你使用prepared_statement，你可以试试这个语句，只在你的链接器中包含mysqlcppconn.dll，看看这个“小项目”是否编译？也许你有太多的库，但一个简单的测试会更容易识别你的问题，如果这解决了你的问题，而不是你知道这些库不应该相互包含。

如果这不起作用，请告诉我，我会尝试扩展答案。

这里我的包括：

```
#include "mysql_connection.h"
#include "mysql_driver.h"
#include <cppconn/driver.h>
#include <cppconn/exception.h>
#include <cppconn/resultset.h>
#include <cppconn/statement.h> 
```

诠释主要（）{

```
sql::Driver *driver;
sql::Connection *con;
sql::Statement *stmt;
sql::ResultSet *res;
sql::Statement *pstmt;

try{
    driver = get_driver_instance();
    con = driver->connect("localhost", "root", "root");
    con->setSchema("test");
    stmt = conn->createStatement();

    /*blah blah yada yada*/

    }catch(sql::SQLException &e){
        std::cout<<e.what();
    } 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T17:27:59.060

我有同样的“无法启动”的问题，经过很痛苦，解决了。不幸的是，您在第一篇文章中的免责声明说您已经尝试过我的解决方案，但我会发布我用来向自己证明我有错误类型的 DLL 的过程（我最初也确定我使用的是正确的 bittage DLL）。如果您仍然非常确定自己拥有正确的 DLL/LIB，那么请前往“使用进程监视器进行调试”部分。

我的问题是我的构建后脚本从错误的位置复制了一个 DLL。我花了很多时间试图确保我的 DLL 目录中包含正确的内容，但事实证明我的构建后脚本没有从该目录复制，因此在我的 x86 应用程序旁边复制 x64 DLL。

工具：-Dependancy walker (http://www.dependencywalker.com/) -Process Monitor (http://technet.microsoft.com/en-ca/sysinternals/bb896645.aspx)

程序： - 制作一个编译和运行没有问题的项目。我制作了一个控制台应用程序并粘贴在 MySQL 连接器示例代码中。它在下面。请注意，我已使用 #pragma comment(lib) 来包含 lib，因此您甚至不需要弄乱包含的库，只需处理目录即可。

```
/* Copyright 2008, 2010, Oracle and/or its affiliates. All rights reserved.

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; version 2 of the License.

There are special exceptions to the terms and conditions of the GPL
as it is applied to this software. View the full text of the
exception in file EXCEPTIONS-CONNECTOR-C++ in the directory of this
software distribution.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
*/

/* Standard C++ includes */
#include "stdafx.h"
#include <stdlib.h>
#include <iostream>

/*
  Include directly the different
  headers from cppconn/ and mysql_driver.h + mysql_util.h
  (and mysql_connection.h). This will reduce your build time!
*/
#include "mysql_connection.h"

#include <cppconn/driver.h>
#include <cppconn/exception.h>
#include <cppconn/resultset.h>
#include <cppconn/statement.h>
#pragma comment(lib,"mysqlcppconn.lib")
#pragma comment(lib,"libmysql.lib")
using namespace std;

int main(void)
{
cout << endl;
cout << "Running 'SELECT 'Hello World!' AS _message'..." << endl;

try {
  sql::Driver *driver;
  sql::Connection *con;
  sql::Statement *stmt;
  sql::ResultSet *res;

  /* Create a connection */
  driver = get_driver_instance();
  con = driver->connect("tcp://127.0.0.1:3306", "root", "password");
  /* Connect to the MySQL test database */
  con->setSchema("test");

  stmt = con->createStatement();
  res = stmt->executeQuery("SELECT 'Hello World!' AS _message");
  while (res->next()) {
    cout << "\t... MySQL replies: ";
    /* Access column data by alias or column name */
    cout << res->getString("_message") << endl;
    cout << "\t... MySQL says it again: ";
    /* Access column fata by numeric offset, 1 is the first column */
    cout << res->getString(1) << endl;
  }
  delete res;
  delete stmt;
  delete con;

} catch (sql::SQLException &e) {
  cout << "# ERR: SQLException in " << __FILE__;
  cout << "(" << __FUNCTION__ << ") on line "<< __LINE__ << endl;
  cout << "# ERR: " << e.what();
  cout << " (MySQL error code: " << e.getErrorCode();
  cout << ", SQLState: " << e.getSQLState() << " )" << endl;
}

cout << endl;

return EXIT_SUCCESS;
} 
```

如果在您设置好目录后该代码不起作用，那么您确实需要仔细检查您使用的 DLL 和 LIB 是否是正确的 32/64 位。你可以使用依赖walker来做到这一点。

如何使用依赖漫游器： 1) 将 DLL 或 EXE 拖到 DepWalk 窗口中。在丑陋的模块列表（日志上方的窗口）中，找到您拖入的 DLL/EXE，并确保 CPU 列中的 CPU 类型是您期望的。

Process Monitor Debugging：如果上面的玩具代码是为您编译的，那么现在您正在说话！你有一个可以正常启动的示例应用程序，而你的坏应用程序不能正常启动。启动进程监视器，设置过滤器以仅包含您的玩具应用程序，然后运行它。文件->保存该日志，将过滤器更改为损坏的应用程序的进程名称，然后对损坏的应用程序再次执行此操作。现在您可以比较这两个应用程序在 mySQL DLL 中运行的内容，并可能找出它们在哪里出现问题。就我而言，我注意到它在正确的位置加载 libmysql.dll，然后在其他位置寻找它。我正确推断这意味着我有错误的 LibMySQL.dll。这可能不是你的问题，但我敢打赌，你会通过进程监视器获得一些见解。

# java - 在 Cordova 2.0 中工作的 Android 截图插件

> ID：12402895
> 
> 赞同：0
> 
> 时间：2012-09-13T09:05:40.483
> 
> 标签：java, android, cordova, eclipse-plugin, cordova-2.0.0

我目前正在使用cordova 2.0 开发一个Android 应用程序。显然 plugins.xml 已经被贬值，现在所有的东西都存放在 config.xml 中。我只是想知道是否有人设法让 Phonegap Screenshot 插件在 Eclipse 中工作，而 Cordova 2.0 在 android 上工作。

插件可以找到：

[https://github.com/josemando/phonegap-plugins/tree/master/Android/Screenshot](https://github.com/josemando/phonegap-plugins/tree/master/Android/Screenshot)

我已经添加了：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

到我的 Android 清单 xml。并确保：

```
<plugin name="Screenshot" value="org.apache.cordova.Screenshot"/> 
```

已添加到我的 config.xml（现在包含 plugin.xml 中的所有插件信息）

Screenshot.js 被添加到目录中：

```
assets/www/js/ 
```

但是我不确定将 Screenshot.java 文件放在哪里。该示例包含在：

```
 src / org / apache / cordova / 
```

但是，由于我没有这个目录，我只是把它放在：

```
src/uk.co..appname1.appname2/ 
```

但是当我这样做时，它产生了错误，第一个是：

```
The declared package "org.apache.cordova" does not match the expected package "uk.co.mysitename.appname1.appname2"  Screenshot.java /Project Name/src/uk/co/mysitename/appname1/appname2line 8  Java Problem 
```

这指的是 Screenshot.js 中的这一行：

```
package org.apache.cordova; 
```

解决此问题的两个建议措施是：

1.  将“Screenshot.java”移动到包“org.apache.cordova”（该目录不存在 atm）
2.  或将包目录更改为 'uk.co.mysitename.appname1.appname2'

第二个错误说：

```
The method run() of type new Runnable(){} must override a superclass method 
```

建议的操作是“删除'@override'注释”

我已经尝试了所有可能的组合，但是我似乎无法取得进展并将其全部连接起来。通常是因为它认为没有引用 CordovaRef。我不确定该插件是否可以在 Cordova 2.0.0 上运行。我对 Phonegap/Cordova 有一些经验，但仅限于带有 Xcode 和 Objective C 插件的 ios。我是 Java、Eclipse 和 Android 的新手。任何关于这些问题的帮助或澄清将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:21:40.440

答案通过以下方式解决：

[Cordova 2.0.0 中的 Phonegap Screenshot 插件](https://stackoverflow.com/questions/12424865/phonegap-screenshot-plugin-in-cordova-2-0-0)

西蒙麦克唐纳提供的答案/解决方案

# java - 如何在字符串数组中获取 Logger 值

> ID：12402896
> 
> 赞同：10
> 
> 时间：2012-09-13T09:05:44.937
> 
> 标签：java, struts2, log4j

我使用了`log4j.Logger`并且我已经使用 . 将日志值写入了一个文件`FileAppender`。

现在我想在文本区域中显示日志值。如何将记录器值分配给字符串数组？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-13T09:55:24.323

您可以`Appender`在您的`Logger`. 使用[WriterAppender](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/WriterAppender.html)写入 a`StringWriter`然后您将内容更改`TextArea`为`StringWriter#toString()`

示例代码：

```
public static void main(String[] args) {
    Logger logger = Logger.getLogger("logger");
    Layout layout = new PatternLayout();
    StringWriter stringWriter = new StringWriter();
    WriterAppender writerAppender = new WriterAppender(layout, stringWriter);
    logger.addAppender(writerAppender);
    TextArea textArea = new TextArea();

    logger.error("test");
    //if(stringWriter changed){// compare to old TextArea-content?
      textArea.setText(stringWriter.toString());
    //}
    //System.out.println(stringWriter.toString());
  } 
```

您需要`TextArea`根据 logLevel 以及内容是否`StringWriter`更改来找到一种智能方法来更新您的内容。

[更新：此处](https://stackoverflow.com/a/2555981/1515052)提供了一个类似的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T00:39:28.553

我会编写一个扩展[org.apache.log4j.AppenderSkeleton](https://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/AppenderSkeleton.html)的类，并且（正如 API 所建议的那样）覆盖[append(org.apache.log4j.spi.LoggingEvent)](https://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/AppenderSkeleton.html#append%28org.apache.log4j.spi.LoggingEvent%29)方法。使用[LoggingEvent](https://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/spi/LoggingEvent.html)，您可以获得构建要显示的字符串所需的所有信息。您还可以控制保存这些字符串的位置。你想把它们放在一个字符串数组中——没问题。如果您只想记住最后 n 个日志记录事件，则可以使用队列。

这是我的代码（通过了一个简单的测试）：

```
import java.util.ArrayDeque;
import java.util.Collection;
import java.util.Collections;

import org.apache.log4j.AppenderSkeleton;
import org.apache.log4j.spi.LoggingEvent;

public class StringArrayAppender extends AppenderSkeleton{

    private Collection<String> log;

    private int size;

    public StringArrayAppender(int size) {
        this.log = new ArrayDeque<String>(size);
        this.size = size;
    }

    public String[] getLog() {
        return log.toArray(new String[0]);
    }

    @Override
    protected void append(LoggingEvent event) {
        // Generate message
        StringBuilder sb = new StringBuilder();
        sb.append(event.getTimeStamp()).append(": ");
        sb.append(event.getLevel().toString()).append(": ");
        sb.append(event.getRenderedMessage().toString());
        // add it to queue
        if(log.size() == size) {
            ((ArrayDeque<String>) log).removeFirst();
        }
        log.add(sb.toString());
    }

    @Override
    public void close() {
        log = Collections.unmodifiableCollection(log);
    }

    @Override
    public boolean requiresLayout() {
        return false;
    }
} 
```

# sql - 查找 SQL OleDbDataReader 的长度

> ID：12402897
> 
> 赞同：1
> 
> 时间：2012-09-13T09:05:50.747
> 
> 标签：sql, vb.net, visual-studio, oledb, jet

我有一个 SQL OleDbDataReader 从访问中获取数据到我的 Visual Basic 前端。是否有可能找到读者持有的记录数？因为我想用这个值来结束一个循环。

下面是我的代码。这部分用于查找数据以运行计算并将值重新插入访问。我目前正在使用批处理方法，因为我有超时错误指出代码在一次计算所有数据点以进行计算时花费了太长时间。下面的代码适用于第一批，但在第二批中失败，因为它无法查看阅读器中的下一部分数据。未来阅读器中的数据可能不会以正确的顺序排列，因此一次查看所有阅读器是最好的解决方案。要解决这个问题，我需要制作`Do Until SearchCounter =` `the length of the reader`. 我尝试将阅读器的内容放入数组中以查找其长度，但这非常耗时。任何其他建议将非常受欢迎。

```
For CalcParameterCounter = 0 To CalcParams.GetLength(0) - 1

                ParamQuery = "ID_PAR = " & Format(CalcParams(CalcParameterCounter), "0")
                conditions = ParamQuery ' & UploadQuery

                DatabaseConnection("SELECT " & FieldNames & " FROM " & tablename & " WHERE " & conditions, "Read Recordset"

                CalcDataRecordPointer = 0
                Do Until rdrOLEDB.Read = False
                    SearchCounter = 0
                    Do Until SearchCounter = CalcData.GetLength(1)
                        CalcDataRecordPointer = CalcDataRecordPointer + 1
                        If CalcDataRecordPointer = CalcData.GetLength(1) Then CalcDataRecordPointer = 0
                        Value = rdrOLEDB.Item(1)
                        If CDate(rdrOLEDB.Item(0).ToString()) = CDate(CalcData(0, CalcDataRecordPointer)) Then
                            match = True
                            CalcData(CalcParameterCounter + 1, CalcDataRecordPointer) = rdrOLEDB.Item(1).ToString()
                            Exit Do
                        Else
                            match = False
                        End If
                        SearchCounter = SearchCounter + 1
                    Loop
                Loop
                'Close:
                rdrOLEDB.Close()
                cnnOLEDB.Close()
            Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T10:35:02.373

使用 reader.Read() 是记录集循环的记录方法。我已经在 VBA 和 ADO 中进行了一些编程，其中通过不同的游标类型将在循环之前为您提供记录总数。这确实会影响性能，即因为我使用的是 Excel，并且命令对象必须在读取器启动之前先将记录集放入内存。

尽管 OleDb 是完全可以接受的数据库，但也许看看 ADO 来执行相同的工作，它兼容（从 MDAC2.8 开始）SQL 2000 -> 2008 R2。查看此问题的另一种方法是查看您是否可以在 SQL 存储过程中进行处理，然后将其输出到您的代码中。

祝你好运。

# c# - 由于版本列为空，无法保存实体。休眠

> ID：12402903
> 
> 赞同：2
> 
> 时间：2012-09-13T09:06:07.503
> 
> 标签：c#, .net, nhibernate, concurrency

我有一个非常直接的映射：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="XXXX.DomainLayer" namespace="XXXX.DomainLayer.Entities">
    <class name="Project" optimistic-lock="version">
        <id name="Id" column="ProjectID" unsaved-value="00000000-0000-0000-0000-000000000000">
            <generator class="guid.comb" />
        </id>
        <version name="Version" generated="always" type="BinaryBlob" />
    <!-- poperties -->
    </class>
</hibernate-mapping> 
```

对应的实体如下所示：

```
public abstract class AbstractEntity<T> where T : AbstractEntity<T> {
    public virtual Guid Id { get; protected set; }
    public virtual Byte[] Version { get; set; }

    // other properties, methods
}
public class Project : AbstractEntity<Project>, IAggregateRoot {
    // specific properties, methods
} 
```

我将架构导出到`SqlServer`. 那里一切都很好。但是每次我发布表单 ( `create action`)都会`SqlServer`引发异常，其中指出：

> 无法将值 NULL 插入“版本”列，...

所以`insert`会被还原。

**最初的问题已解决**

实际问题是我无法对实体进行编辑 - 我得到`StaleObjectStateException`.

> 行被另一个事务更新或删除（或未保存值映射不正确）[XXXX.DomainLayer.Entities.Project#707991d0-07b5-45fc-99ed-a0cc00db108a]

签入时，`SQLServer`很明显 Version 列无论如何都保持为空。

**控制器代码**

```
public ActionResult Create() {
    return View("Edit", new EditProjectViewModel());
}

[HttpGet]
public ActionResult Edit(Guid id) {
    var project = this.repo.Get(id);
    var model = Mapper.Map<Project, EditProjectViewModel>(project);

    return View(model);
}

[HttpPost, ValidateAntiForgeryToken]
public ActionResult Edit(EditProjectViewModel model) {
    if(ModelState.IsValid) {

       model.InitiatedBy = this.userService.GetUser(some_param);
       model.ProblemContext = BBCode.ToHtml(model.ProblemContext);

       var project = Mapper.Map<EditProjectViewModel, Project>(model);

       if(project.IsTransient) {
           this.repo.Add(project);
       }
       else {
           try {
               this.repo.Update(project);
           }
           catch(NHibernate.StaleObjectStateException e) {
               // Some logic here
           }
       }

       return RedirectToAction("Index", "Home", new { area = "" });
   } // if(ModelState.IsValid) {
   return View(model);
} 
```

存储库`Update`方法如下所示：

```
public void Update(T entity) {
    using(var tx = this.session.BeginTransaction()) {
        /* try { */
            this.session.SaveOrUpdate(entity);
            tx.Commit();
        /* }
        catch(StaleObjectStateException) {
            try {
                entity = this.session.Merge(entity);
                tx.Commit();
            }
            catch(Exception) {
                tx.Rollback();
                throw;
            }
        }
        */
    }
} 
```

**DI片**

```
public class DataAccessModule : NinjectModule {
    public override void Load() {
        this.Bind<ISessionFactory>()
            .ToMethod(c => new Configuration().Configure().BuildSessionFactory())
            .InSingletonScope();

        this.Bind<ISession>()
            .ToMethod(ctx => ctx.Kernel.TryGet<ISessionFactory>().OpenSession())
            .InRequestScope();

        this.Bind(typeof(IRepository<>)).To(typeof(Repository<>))
            .InRequestScope();
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T09:35:44.247

尝试将 sql-type="timestamp" 添加到版本列映射。例如

```
<version name="Version" generated="always" unsaved-value="null" type="BinaryBlob">
    <column name="Version" not-null="false" sql-type="timestamp"/>
</version> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:52:53.323

你确定你使用的是正确的类型`<version>`吗？

来自[NHibernate 文档](http://nhforge.org/doc/nh/en/index.html#mapping-declaration-version)：

> 版本号可以是 Int64、Int32、Int16、Ticks、Timestamp 或 TimeSpan 类型（或它们在 .NET 2.0 中的可空对应项）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T05:20:26.840

我偶然发现了一个非常明显的解决方案：

```
<id name="Id" column="ProjectID" unsaved-value="00000000-0000-0000-0000-000000000000">
        <generator class="guid.comb" />
    </id>
    <version name="Version" generated="always" type="BinaryBlob">
        <column name="Version" not-null="false" />
    </version>
<!-- ... the rest --> 
```

**编辑**

但是这种变化给我带来了另一个问题：`SqlServer`不更新`Version`列......它总是保持为空。

# wordpress - Pro Player 正在减慢我的网站速度

> ID：12402910
> 
> 赞同：0
> 
> 时间：2012-09-13T09:06:32.717
> 
> 标签：wordpress

我有一个 wordpress 博客/网站，几个月前我使用 PRO PLAYER 插件嵌入视频。碰巧随着嵌入视频数量的增加，现在，主要是我网站的第一页加载非常缓慢。我检查了所有插件，看看哪个插件让我的网站变得如此缓慢，发现它是专业播放器（[http://wordpress.org/extend/plugins/proplayer/](http://wordpress.org/extend/plugins/proplayer/)）。

所以我在这里问，有一些解决方案可以让职业玩家更快地打开我的网站吗？如果没有，我想我必须更改我网站的视频播放器。谁能推荐我一个轻量级的视频播放器来使用？一个好的wordpress？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:27:23.967

以下是您可以选择提高网站速度的几点 -

1.  `Uninstall`不必要的插件。
2.  如果您能够编写代码`avoid using heavy plugins`，例如 twitter、FB 等（尝试使用主站点上的可用小部件）。
3.  如果您在网站上使用大量图像和视频流，请尝试使用`Cache plugins`.
4.  `Limit the number of posts`在首页，因为这也可能会造成一些麻烦。使用轻量级主题。

# c# - 如何在asp.net c#中使用HashSet比较两个DataSet

> ID：12402912
> 
> 赞同：2
> 
> 时间：2012-09-13T09:06:35.610
> 
> 标签：c#, asp.net, sql-server-2008

我正在向 DataSet 添加两个表，我想检查它们是否相等。

我试过的代码是：

```
SqlDataAdapter mydat = new SqlDataAdapter("Select Device_Profile_Param+'='+Device_Profile_Default_Value AS SettingsCheck From Device_Profile_Master Where Device_Profile_Name = '" + Label5.Text + "'", con); 
DataTable dt = new DataTable(); 
mydat.Fill(dt);

DataSet dset = new DataSet();
dset.Tables.Add(dt);

SqlDataAdapter mydata = new SqlDataAdapter("Select Device_Profile_Param+'='+Device_Profile_Default_Value AS Settings From Device_Profile_Master Where Device_Profile_Name = '" + For_Profile_Num.Items[i] + "'", con);
DataTable dt2 = new DataTable();
mydata.Fill(dt2);

dset.Tables.Add(dt2);

var hashSet1 = new HashSet<string>(dset.Tables[0].Rows.Cast<ListItem>().Select(x => x.Value));
var hashSet2 = new HashSet<string>(dset.Tables[1].Rows.Cast<ListItem>().Select(x => x.Value));

var result = hashSet1.SetEquals(hashSet2);
if (result == true)
{
found = 1;
} 
```

我收到一个错误**DataSet cannot be cast as ListItem**。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:42:22.947

使用`IEnumerable`如下来比较两个表...

```
IEnumerable<string> table1Value= dset.Tables[0].AsEnumerable().Select(x => (string)x[ColumnName]); 

IEnumerable<string> table2Value= dset.Tables[1].AsEnumerable().Select(x => (string)x[ColumnName]); 

IEnumerable<string> ChangedValue = table2Value.Except(table1Value); 
```

如果`ChangedValued`为 null 或为空，则两个表相同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:16:19.973

在将某些列名添加到 HashSet 时定义它...

```
System.Collections.Hashtable myHashtable1 = new System.Collections.Hashtable();
                myHashtable.Add(dset.Tables[0].Rows[0]["Column1"], myDataTable1.Rows[0]["Column2"]);
                myHashtable.Add(dset.Tables[0].Rows[1]["Column1"], myDataTable1.Rows[1]["Column2"]);

System.Collections.Hashtable myHashtable2 = new System.Collections.Hashtable();
                myHashtable.Add(dset.Tables[1].Rows[0]["Column1"], myDataTable1.Rows[0]["Column2"]);
                myHashtable.Add(dset.Tables[1].Rows[1]["Column1"], myDataTable1.Rows[1]["Column2"]);

var result = myHashtable2 .SetEquals(myHashtable1);
if (result == true)
{
found = 1;
} 
```

同样地...

希望能帮助到你

# blackberry - 如何在 RIM Blackberry 的 BrowserField 中显示 HTML Image 标签

> ID：12402913
> 
> 赞同：2
> 
> 时间：2012-09-13T09:06:36.967
> 
> 标签：blackberry, blackberry-simulator, blackberry-jde, browserfield

我想在 RIM BB 组件 BrowserField 中显示 HTML 标签。

```
String str ="<html><body><p><img alt=\"bun\" src=\"http://adodis.in/ram/services/images/stories/food/bun.jpg\" width=\"150\" height=\"112\" /></p></body></html>";

BrowserField browserField = new BrowserField();
browserField.displayContent(str, "http://localhost");
add(browserField); 
```

如何在 BrowserField 中显示上面的标签？使用黑莓操作系统 5.0

首先十分感谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T10:47:34.190

如果您运行您的应用程序，并且看到`"bun"`显示的标签（`alt`文本），那么我认为问题在于您没有网络连接。检查您的网络，尤其是在您使用模拟器时（您可以只运行浏览器应用程序并尝试已知的 URL）。

如果你没有看到**图像**应该在哪里，那么我认为问题只是你在你之前打电话给`displayContent()` **它**的父经理。`add()``BrowserField`

因此，只需更改通话顺序，`displayContent()`最后调用：

```
BrowserField browserField = new BrowserField();
add(browserField); 

String str ="<html><body><p><img alt=\"bun\" src=\"http://adodis.in/ram/services/images/stories/food/bun.jpg\" width=\"150\" height=\"112\" /></p></body></html>";
browserField.displayContent(str, "http://localhost"); 
```

此外，您实际上不需要在 HTML 片段中指定`img` `width`和`height`属性，因为这是实际图像文件的大小。但是，这实际上并没有引起问题……它只是*额外的*HTML 代码。

# python - 用于获取多个值的 Django MySQL 不同查询

> ID：12402923
> 
> 赞同：12
> 
> 时间：2012-09-13T09:07:10.263
> 
> 标签：python, mysql, django, distinct, django-queryset

不幸的是，我有一个**MySQL数据库与****Django 1.4.1 一起使用。** 如果我做对了，不同的功能仅适用于 POSTGRESQL。

我必须使一个不同的查询包含多个值，而只有一个不同的值，

喜欢; 这适用于 POSTGRE 但不适用于 MYSQL，我收到以下错误；

> 此数据库后端不支持 DISTINCT ON 字段

```
staff = Staff.objects.order_by('person__full_name').distinct('person__full_name') 
```

然后我尝试了

```
staff = Staff.objects.values('person__full_name','staff_job_categories').distinct().order_by('person__full_name') 
```

但我没有得到不同的价值观，因为我也得到了员工工作类别。但是当我不包含它时，我无法将它作为数组获取。

任何想法 ？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-13T09:34:05.963

`.distinct([*fields])`仅适用于 PostgresSQL。

来自[不同的](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.distinct)文档

*这就是区别。对于普通的 distinct() 调用，数据库在确定哪些行是不同的时比较每一行中的每个字段。对于具有指定字段名称的 distinct() 调用，数据库将仅比较指定的字段名称。*

如前所述，检查记录中的所有字段。在您的情况下，您很可能会获得具有不同字段值的记录（如果您查询多个表 ManyToMany 或 ForeignKey 关系，则更有可能是这种情况）。

为了合并为数组，您可以参考您之前的问题[Django Query distinct values works 但我无法使用查询结果](https://stackoverflow.com/questions/12382232/django-query-distinct-values-works-but-i-cant-use-the-query-result)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-05T18:40:29.590

```
names = Staff.objects.order_by('person__full_name').values('person__full_name').distinct() 
```

会给你不同的全名，你可以做类似的事情来获得不同的工作类别。

这些将为您提供值列表，而不是对象本身，但如果我正确解释您的问题，那么我认为这些将为您提供您想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-21T15:47:37.417

并非所有数据库都支持 Distinct('field name')。所以我们能做的就是使用非常简单的解决问题的技巧

```
 class vendor_ready_distinct(APIView):
        def get(self, request):
            obj_readyproduct = vendor_list_readyProduct.objects.all().order_by('mobile_number')

            unique_list = []
            list = []
            for x in obj_readyproduct:
                # check if exists in unique_list or not
                if x.mobile_number not in list:
                    unique_list.append(x)
                    list.append(x.mobile_number)

            seri_obj = vendor_list_readyProductSerializer(unique_list, many=True)
            return Response(seri_obj.data) 
```

[在这里，我们使用来自geeksforgeeks](https://www.geeksforgeeks.org/python-get-unique-values-list/)的方法 1 获得不同的行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-28T14:25:31.207

如果您想将 DISTINCT 与 WHERE 语句一起使用，则可以使用此代码。

```
staff = Staff.objects.filter(person__full_name="Alex").values('staff_job_categories').distinct().order_by('person__full_name') 
```

# bash - 如何在 bash 中转换 CSV 文件？

> ID：12402935
> 
> 赞同：3
> 
> 时间：2012-09-13T09:07:55.223
> 
> 标签：bash, shell, csv

我有一个文件，其中每一行都是逗号分隔值的列表。例如，

```
1、a、b、c、d、e
2、x、y、z
```

现在我想将其转换`bash`如下：

```
1个
1个
1摄氏度
1天
1e
2×
2年
2z
```

如何用`shell (bash)`脚本做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T09:11:27.867

```
awk -F, '{for(i=2;i<=NF;i++)print $1,$i}' temp 
```

测试如下：

```
> cat temp
1, a, b, c, d, e
2, x, y, z
> awk -F, '{for(i=2;i<=NF;i++)print $1,$i}' temp
1  a
1  b
1  c
1  d
1  e
2  x
2  y
2  z 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T09:12:55.047

您可以将行拆分为标记并将它们放入数组中。数组的第一个元素将具有数字，在您的情况下是 1 或 2，依此类推。这样的事情可能是：

```
while read line
do
    arrIN=(${line//,/ })

## make a loop and echo them
## arrIN[0] will have the initial number

done < $file

# $file is the input file you are reading 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T09:11:18.433

我知道您需要一个 shell 脚本，但它需要是 bash 吗？例如，我通常会使用更高级别的脚本语言和 CSV 库。例如`Perl`和[文本::CSV](http://search.cpan.org/~makamaka/Text-CSV-1.21/lib/Text/CSV.pm)

# django - django 的 sqllite 读/写队列问题

> ID：12402945
> 
> 赞同：1
> 
> 时间：2012-09-13T09:08:36.233
> 
> 标签：django, sqlite

我正在建立一个网站，大学生可以在其中订购外卖食品。我们网站的一个特殊属性是客户必须选择预设的交货时间。例如，我们在晚上 7 点、晚上 10 点和午夜有一个下降。

关于食物的所有信息都是静态的（即价格、描述、名称），除了特定投放时间的剩余数量。

显然我不想为我的菜单页面上的所有食物项目硬编码 HTML，所以我在 html 模板中编写了一个 forloop。所以我需要将特定时间剩余的数量存储在我的模型中的某个地方。唯一的问题是我害怕如果我使用相同的变量将剩余数量传输到我的模板，如果很多人同时访问菜单页面，我会给出错误的信息。

例如，假设晚上 7 点下降了 10 个墨西哥卷饼。晚上 10 点下降有 40 个墨西哥卷饼。如果某人的互联网速度比其他客户更快，是否有可能显示错误的剩余数量？

你们将如何解决这个问题？我基本上需要一种方法来告诉我的模板该特定时间剩余的数量。并且使用我现在拥有的解决方案，并没有让我感到安心。特别是如果有很多人要同时访问该站点。

视图.py

```
 orders = OrderItem.objects.filter(date__range=[now - timedelta(hours=20), now]).filter(time=hour)
steak_and_egg = 0
queso = 0

for food in orders:
    if food.product.name == "Steak and Egg Burrito":
        steak_and_egg = steak_and_egg + food.quantity
    elif food.product.name == "Queso Burrito":
        queso = queso + food.quantity

#if burritos are sold out, then tell template not to display "buy" link
quantity_steak_and_egg = max_cotixan_steak_and_egg - steak_and_egg
quantity_queso = max_cotixan_queso - queso

#psuedocode
steakandegg.quantity_remaining = quantity_steak_and_egg
queso.quantity_remaining = quantity_queso 
```

HTML：

```
 {% for item in food %}
                <div id="food_set">
                    <img src="{{item.photo_menu.url}}" alt="" id="thumbnail photo" />
                    <div style='overflow:hidden'>                    
                        <p id="food_name">{{item.name}}</p> 
                        <p id="price">${{item.price}}</p>
                    </div>
                    <p id="food_restaurant">By {{item.restaurant}}</p>

                    <div id="food_footer">
                        <img src="{{MEDIA_URL}}/images/order_dots.png" alt="" id="order_dots" />
                        <a id ="order_button" href="{{item.slug}}"></a>
                        <p id="quantity_remaining">{{item.quantity_remaining}} left</p>
                    </div><!-- end food_footer-->

                </div><!-- end food_set--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:41:10.003

我不明白“更快的互联网”或“使用相同的变量”与这里的任何事情有什么关系（或者，实际上，它与 sqlite 有什么关系）。

这个问题是关于 Web 应用程序的一个基本属性：它们是基于请求/响应的。即客户端发出请求，服务器回复响应，表示当时数据的*状态*。根本无法解决这个问题：您可以通过使用 Ajax 在初始加载后更新页面来使其更具动态性，这就是 StackOverflow 在页面上显示更新消息时所做的事情。但即便如此，仍有延迟。

（我应该注意到，有一些方法可以进行实时更新，但它们很复杂，而且对于大学食品订购网站来说几乎可以肯定是矫枉过正。）

现在的问题是，为什么这很重要？它不应该。用户看到一个页面显示还剩 1 个墨西哥卷饼 - 可能带有红色警告，上面写着“赶快下单！差点没了！” - 他们按下订单按钮。提交该订单后，您的代码可能会检查当时的实际状态。而且，你猜怎么着，与此同时，你已经处理了另一个订单，而墨西哥卷饼已经消失了。所以呢？您只需向用户显示一条消息，“对不起，它已经消失了，试试别的”。任何有在网上订购东西（例如音乐会门票）经验的人都会明白发生了什么。

# c# - 我可以使用计时器每 x 毫秒更新一次标签吗

> ID：12402947
> 
> 赞同：3
> 
> 时间：2012-09-13T09:08:43.860
> 
> 标签：c#, timer, stopwatch

这是我的代码：

```
Stopwatch timer = new Stopwatch();
timer.Start();
while (timer.ElapsedMilliseconds < 3000) {
    label1.Text = Convert.ToString( timer.ElapsedMilliseconds );
}
timer.Stop(); 
```

我的意图是实时更新标签的文本，所以 if `timer.ElapsedMilliseconds == 1350`, then `label1.Text = 1350`。我怎样才能做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T09:11:16.703

您最好为此使用[System.Windows.Forms.Timer](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)，而不是`Stopwatch()`

即使该计时器不太准确，`StopWatch(..)`它也可以为您提供良好的控制。

只是示例片段：

```
 myTimer.Tick += new EventHandler(TimerEventProcessor);       
   myTimer.Interval = 1350;
   myTimer.Start();

   private void TimerEventProcessor(...){          
     label1.Text = "...";
   } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T09:12:43.267

您不能像这样在一个紧密的循环中更新 UI，因为当 UI 线程运行该代码时，它*没有响应绘制事件*。你可以做一些讨厌的事情，比如“DoEvents()”，但请不要......最好只`Timer`在计时器事件触发时定期更新 UI；就我个人而言，每 50 毫秒绝对是我最快的速度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T09:12:22.987

这是一个 WinForms 应用程序吗？

问题是，当您的循环运行时，它不会给任何其他任务（如更新 GUI）提供任何完成的可能性，因此 GUI 将更新整个循环完成。

您可以在此处添加快速且“肮脏”的解决方案（如果是 WinForms）。像这样修改你的循环：

```
while (timer.ElapsedMilliseconds < 3000) {
  label1.Text = Convert.ToString( timer.ElapsedMilliseconds );
  Application.DoEvents();
} 
```

现在标签应该在循环运行之间更新。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T09:18:33.643

如果您希望它每秒更新一次，您可以在`while`循环中使用模运算符：

```
Stopwatch timer = new Stopwatch();

timer.Start();

while (timer.ElapsedMilliseconds < 3000) {
    if (timer.ElapsedMilliseconds % 1000 == 0)
    {
        label1.Text = timer.ElapsedMilliseconds.ToString();
    }
}

timer.Stop(); 
```

模运算符给出除法运算的余数，如果毫秒是 1,000 的倍数，它将返回 0。

我可能会考虑使用`Timers`. 您使用上述技术做了很多*旋转，这可能会导致您的 UI 无响应。*

# android - Android 在按钮单击时创建 ListView

> ID：12402948
> 
> 赞同：2
> 
> 时间：2012-09-13T09:08:43.787
> 
> 标签：android, android-layout, listview, android-widget

我正在尝试创建搜索活动。布局包含`EditText`（键入搜索查询）`Button`和`ListView`（显示搜索结果）。search_layout.xml（用于显示搜索框 & `ListView`）如下：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal" >

        <EditText
            android:id="@+id/editText_search"
            android:layout_weight="1"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:hint="@string/search_practice" />

         <Button 
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:text="@string/button_search"
             android:onClick="searchPractice" />

    </LinearLayout>

     <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <ListView 
            android:id="@+id/praclist"
            android:layout_weight="1"
            android:layout_width="fill_parent"            
            android:layout_height="fill_parent" />

    </LinearLayout>

</LinearLayout> 
```

列表项 list_items.xml 的布局是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">  
    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">
        <!-- Name Label -->
        <TextView
            android:id="@+id/name"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textColor="#43bd00"
            android:textSize="16sp"
            android:textStyle="bold"
            android:paddingTop="6dip"
            android:paddingBottom="2dip" />
        <!-- Description label -->
        <TextView
            android:id="@+id/city"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textColor="#acacac"
            android:paddingBottom="2dip">
        </TextView>
        <TextView
            android:id="@+id/email"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textColor="#acacac"
            android:paddingBottom="2dip">
        </TextView>
        <!-- Linear layout for cost and price Cost: Rs.100 -->
        <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal">
        <!-- Cost Label -->
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="#5d5d5d"
            android:gravity="left"
            android:textStyle="bold"
            android:text="Phone: " >
        </TextView>
        <!-- Price Label -->
        <TextView
            android:id="@+id/phone"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="#acacac" 
            android:textStyle="bold"
            android:gravity="left">
        </TextView>
        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

在按钮单击（searchBtnClick）上，我正在调用方法 doMySearch ：

```
public void searchBtnClick(View view){
  -------
  ------
  ListAdapter adapter = doSearch(query);
  ListView pracListView = (ListView) findViewById(R.id.praclist);
  PracListView.setAdapter(adapter);
  return;
}

private ListAdapter doSearch(String query){
    ListAdapter adapter = null;
String url = "https://mywebservice.com/apps/api/v1/search/practices?val="+query+"&by=nam";

HttpClient httpClient = new DefaultHttpClient();
HttpContext localContext = new BasicHttpContext();
HttpGet httpGet = new HttpGet(url);
String jsonResponsse = null;

try{
    HttpResponse httpResponse = httpClient.execute(httpGet, localContext);
    HttpEntity httpEntity = httpResponse.getEntity();
    jsonResponsse = getASCIIContentFromEntity(httpEntity);          
    Gson gson = new Gson();
    PracticesByName practicesByName = gson.fromJson(jsonResponsse,PracticesByName.class);
    ArrayList<Practices> practiceList = (ArrayList<Practices>)practicesByName.getPractices();
    for(int i=0 ; i < practiceList.size() ; i ++){   
        Object a = practiceList.get(i);
        System.out.println(a.getClass() + "   " + a.toString());
        Practices aPractice = practiceList.get(i);
        HashMap<String, String> aMap = new HashMap<String, String>();
        aMap.put(TAG_NAME, aPractice.getName());
        aMap.put(TAG_CITY, aPractice.getCity());
        aMap.put(TAG_EMAIL, aPractice.getEmail());
        aMap.put(TAG_PHONE, aPractice.getPhone());

        searchResultList.add(aMap);

    }

    adapter = new SimpleAdapter(this, searchResultList,
            R.layout.list_item_prac_search,
            new String[] { TAG_NAME, TAG_CITY, TAG_EMAIL, TAG_PHONE}, new int[] {
                    R.id.name, R.id.city, R.id.email, R.id.phone});
    //pracListView.setAdapter(adapter);

}catch (Exception e){
        System.out.println("Exception while getting serach for practice");
        e.printStackTrace();
}

return adapter;

} 
```

代码运行良好。我正在从网络服务获取搜索结果。但看不到下面的任何列表。知道我在搞砸什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:15:53.800

您应该首先创建一个数组 lis 从查询中获取记录，

```
ArrayList<String> items = new ArrayList<String>();
        items.add(doSearch(query)); 
```

然后替换这一行，

```
ListAdapter adapter = doSearch(query); 
```

有了这条线，

```
ArrayAdapter<String> adapter= new ArrayAdapter<String>(this, android.R.layout.simple_expandable_list_item_1,items);
ListView pracListView = (ListView) findViewById(R.id.praclist);
  PracListView.setAdapter(adapter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:23:44.370

最后，得到它的工作。更正**了 search_layout.xml**如下。

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal" >

        <EditText
            android:id="@+id/editText_search"
            android:layout_weight="1"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:hint="@string/search_practice"
            android:imeOptions="actionDone" />

         <Button 
             android:layout_width="wrap_content"
             android:layout_height="fill_parent"
             android:text="@string/button_search"
             android:onClick="searchPractice" />         
    </LinearLayout>

    <ListView 
            android:id="@+id/praclist"
            android:layout_weight="1"
            android:layout_width="match_parent"            
            android:layout_height="wrap_content" />

</LinearLayout> 
```

使外部布局垂直并放置水平布局（其中包含 EditText 和搜索按钮）和 ListView。

谢谢你的时间。

# perl - 在 perl 中从命令行创建哈希

> ID：12402949
> 
> 赞同：2
> 
> 时间：2012-09-13T09:08:45.107
> 
> 标签：perl

我有一个包含如下数据的文件：

```
4  1
7  12
2  5
4  4
6  67
12  5 
```

通过命令行，我可以将每一行拆分成一个数组，如下所示：

```
perl -F'\s+' -ane 'print $F[0]' file 
```

因此将打印所有第一个字段。现在上面的命令将每一行转换为一个数组。以类似的方式，这可以通过创建一个散列来完成，其中键作为第一个字段，每个键的值是第二个字段。？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T09:13:05.323

试试这个：

```
perl -MData::Dumper -ane '$X{$F[0]}=$F[1]}{print Dumper \%X' file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T09:14:15.250

是的，这是可以做到的。

```
perl -MData::Dumper -e '%a = map { (split)[0,1] } <ARGV>;print Dumper \%a' dt.txt 
```

# awk - 如何使用 AWK 删除包含特定标题的所有列

> ID：12402951
> 
> 赞同：3
> 
> 时间：2012-09-13T09:08:53.720
> 
> 标签：awk, gawk

我有一个 csv 文件，它当然是用逗号分隔的，并且想要删除所有具有特定标题的列，例如：

```
voltage, current, power, voltage, current, power
      2,       3,     6,      12,      12,   144  
      3,       5,    15,      10,      10,   100 
```

应该

```
voltage, power, voltage, power  
      2,     6,      12,   144  
      3,    15,      10,   100 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T10:29:55.333

内容`script.awk`：

```
BEGIN {
    FS=" , "
}

NR==1 {
    for (i=1; i<=NF; i++) {
        if ($i == "current") {
            array[i]++
        }
        else {
            printf (i != NF) ? $i", " : $i
        }
    }
}

NR>=2 {
    for (j=1; j<=NF; j++) {
        if (!(j in array)) {
            printf (j != NF) ? $j", " : $j
        }
    }
}

{
    printf "\n"
} 
```

内容`file.txt`：

```
voltage , current , power , voltage , current , power
2 , 3 , 6 , 12 , 12 , 144
3 , 5 , 15 , 10 , 10 , 100 
```

像这样运行：

```
awk -f script.awk file.txt 
```

结果：

```
voltage, power, voltage, power
2, 6, 12, 144
3, 15, 10, 100 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:16:04.237

如果要删除所有标题为“当前”的列：

```
kent$  awk -F',' 'NR==1{for(x=1;x<=NF;x++)if($x!="current")l[x]++;}{for(i=1;i<=NF;i++)if(i in l)printf (i==NF)?$i"":$i", ";printf "\n"}' test.txt 

voltage, power, voltage, power
2, 6, 12, 144
3, 15, 10, 100 
```

**注意：**我删除了上面 test.txt 中的空格。

*   如果您有不同的标题需要删除。您可以尝试使用正则表达式，并替换`$x!="foo"`为正则表达式匹配。

*   如果您知道删除列的规则，例如 2nd column, 5th, 8th ...(+3) 它可能更容易处理，例如通过循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T09:22:27.073

假设输入文件名为 input.txt

```
awk  -F ',' '{print $1 "," $3 "," $5 "," $6 }' input.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T09:42:20.920

请注意，对于一般的 CSV 文件处理，应使用适当的库。如果数据非常简单，即没有嵌入的逗号、换行符等，则可以使用更简单的工具。

你`awk`从*史蒂夫*那里得到了一个很好的解决方案，所以我将添加一个基于 coreutils 和 grep 的答案：

```
# find columns to remove
pattern=current
cols=$(head -n1 a.csv | tr ',' '\n' | grep -n "$pattern" | cut -d: -f1 | paste -s -d,)

# remove all columns that matched
cut --complement -d, -f$cols a.csv 
```

输出：

```
voltage, power, voltage, power
2 , 6 , 12 , 144
3 , 15 , 10 , 100 
```

请注意，该`--complement`选项是 GNU 剪切扩展。要`$cols`为其他剪辑生成，应该这样做（在 FreeBSD 上的 zsh 中测试）：

```
# number of columns
file=a.csv
pattern=current
n=$(head -n1 "$file" | tr ',' '\n' | wc -l)

# generate complementary list
cols=$(jot $n \
| grep -xvFf <(head -n1 "$file" | tr ',' '\n' | grep -n "$pattern" | cut -d: -f1) \
| paste -s -d, -)

# remove columns
cut -d, -f$cols "$file" 
```

# ruby-on-rails - 我可以/应该在 Rails 应用程序中更改环境名称吗？

> ID：12402955
> 
> 赞同：2
> 
> 时间：2012-09-13T09:09:07.390
> 
> 标签：ruby-on-rails, mongodb, mongomapper

用 MongoDB + MongoMapper 做一个 Rails 项目

Rake 创建带有连字符的环境名称的 Mongo db

即 myapp-开发

这在 Mongo shell 中不能很好地发挥作用......要编辑环境名称，我需要覆盖核心 Rails 代码还是可以在每个应用程序的基础上完成？

否则，有没有办法在 mongo shell 的连字符数据库名称上正常运行命令？

```
db.test.find() 
```

返回确定

```
db.tests-hyphenated.find() 
```

返回

```
ReferenceError: hyphenated is not defined 
```

.

```
use tests-hyphenated
db.this.find() 
```

返回确定

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T01:10:18.240

您可以使用**mongo.yml**指定/更改数据库环境信息，如数据库名称和其他相关内容......

运行以下命令将在**config**目录中创建**mongo.yml 。**

 **```
rails g mongo_mapper:config 
```

[请参阅Use Yaml for MongoMapper Config](https://stackoverflow.com/questions/7897319/use-yaml-for-mongomapper-config)的答案以查看 mongo.yml 文件的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T09:14:44.673

你可以让它在 mongo shell 中播放，如下所示：

```
db["tests-hyphenated"].find() 
```**

# windows - 文件在 C# 中被锁定在读/写操作上

> ID：12402956
> 
> 赞同：-1
> 
> 时间：2012-09-13T09:09:09.933
> 
> 标签：windows, c#-4.0

第三方应用程序正在读取我的 Windows 应用程序的输出文本文件，它正在暂停。我认为，这是因为文件在写入或读取时被锁定。我怎样才能使这项工作正常。请参阅我的代码。

```
 List<string> fileList = new List<string>();

    System.Timers.Timer timer;

    string currentfilename;
    string currentcontent;

    public Service1()
    { 
```

//

```
 timer = new System.Timers.Timer();

        timer.AutoReset = false;

        timer.Elapsed += new System.Timers.ElapsedEventHandler(DoStuff);

    }

    void timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
    {
        throw new NotImplementedException();
    }

    private void DoStuff(object sender, System.Timers.ElapsedEventArgs e)
    {

     DateTime LastChecked = DateTime.Now;
     try
     {
         string[] files = System.IO.Directory.GetFiles(@"C:\Journal", "*.jrn", System.IO.SearchOption.AllDirectories);

         foreach (string file in files)
         {
             if (!fileList.Contains(file))
             {
                 currentfilename = file;
                 fileList.Add(file);

                     copywarehouse(file);

                 try
                 {

                         string sourcePath = @"C:\Journal";
                         string sourceFile = System.IO.Path.Combine(sourcePath, file);
                         using (FileStream fs= new FileStream(sourceFile, FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
                         {
                             StreamReader sr = new StreamReader(fs);
                             currentcontent = sr.ReadToEnd();
                             sr.Close();

                         }

                 }
                 catch (Exception ex)
                 {

                     throw (ex);

                 }

         }

         }

         try
             {

                     string sourcePath1 = @"C:\Journal";
             string currentfilecontent;
                     string sourceFile1 = System.IO.Path.Combine(sourcePath1, currentfilename);

                     using (FileStream fs = new FileStream(sourceFile1, FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
                     {
                         StreamReader sr = new StreamReader(fs);
                         currentfilecontent = sr.ReadToEnd();
                         sr.Close();

                     }

                     if (currentfilecontent != currentcontent)
                     {
                         if (currentfilecontent.Contains(currentcontent))
                         {
                             string originalcontent = currentfilecontent.Substring(currentcontent.Length);

                                 File.WriteAllText(@"C:\Journal\tempfile.txt", originalcontent + "\r\n");
                              using (FileStream fs = new FileStream(@"C:\Journal\tempfile.txt", FileMode.OpenOrCreate))
            {
                StreamWriter sw = new StreamWriter(fs);
                sw.Write(originalcontent);
                sw.Close();
            }

                             currentcontent = currentfilecontent;
                         }
                     }

                 }
             //}

                 catch (Exception ex)
                 {

                     throw (ex);
                 }

         TimeSpan ts = DateTime.Now.Subtract(LastChecked);
         TimeSpan MaxWaitTime = TimeSpan.FromMilliseconds(100);

         if (MaxWaitTime.Subtract(ts).CompareTo(TimeSpan.Zero) > -1)
             timer.Interval = MaxWaitTime.Subtract(ts).Milliseconds;
         else
             timer.Interval = 1;

         timer.Start();

     }

     catch (Exception ex)
     {
         throw (ex);
     }

    }
    private void copywarehouse(string filename)
    {
        string sourcePath = @"C:\Journal";
        string targetPath = @"C:\Journal";

        string copycontent=null;
        try
        {
            string sourceFile = System.IO.Path.Combine(sourcePath, filename);
            string destFile = System.IO.Path.Combine(targetPath, "tempfile.txt");

            using (FileStream fs = new FileStream(sourceFile, FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
            {
               StreamReader sr = new StreamReader(fs);

                copycontent = sr.ReadToEnd();
                sr.Close();

            }

            using (FileStream fs = new FileStream(destFile, FileMode.Append))
            {
                StreamWriter sw = new StreamWriter(fs);
                sw.Write(copycontent);
                sw.Close();
            }

        }
        catch (Exception ex)
        {
            throw (ex);
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:38:17.960

这里的问题是第三方应用程序正在读取我的应用程序输出作为输入。它不允许访问多个文件内容..

# visual-studio - 文件名的 PropertyGrid ValueEditor

> ID：12402958
> 
> 赞同：1
> 
> 时间：2012-09-13T09:09:27.070
> 
> 标签：visual-studio, propertygrid, vs-extensibility

我有以下规则定义：

```
<Rule ...>
  <... />
  <StringProperty Subtype="file" ...>
  <StringProperty.ValueEditors>
    <ValueEditor EditorType="DefaultStringPropertyEditor" DisplayName="&lt;Edit...&gt;"/>
    <ValueEditor EditorType="DefaultFilePropertyEditor" DisplayName="&lt;Browse...&gt;"/>
  </StringProperty.ValueEditors>
  </StringProperty>
  <... />
</Rule> 
```

它添加了用于编辑属性的“<Edit...>”和“<Browse...>”选项，但是当我需要让用户选择 *.txt 文件时，浏览对话框会要求提供 *.exe 文件. 对话框中有一个组合框允许选择“所有文件*。* ”，但实际上这不是一个选项。

我试图找到一个解决方案，但这个可扩展性位似乎没有得到很好的记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T13:46:32.090

我终于找到了一种方法，但仅适用于 VS2012。以典型的打开文件对话框格式放置一个名为 Filters 的元数据片段和过滤器字符串似乎现在可以解决问题。

例子：

```
<ValueEditor EditorType="DefaultFilePropertyEditor" DisplayName="&lt;Browse...&gt;">
  <ValueEditor.Metadata>
    <NameValuePair Name="Filters" Value="Text (*.txt)|*.txt" />
  </ValueEditor.Metadata>
</ValueEditor> 
```

# java - 检查泛型函数android java中的对象类型

> ID：12402964
> 
> 赞同：4
> 
> 时间：2012-09-13T09:09:58.230
> 
> 标签：java, android, generics

我的 android 应用程序中有一个函数：

```
public static <T> void saveLocalData(Context context, String key, Class<T> value) {
    // Check type of value here
    SharedPreferences prefs = context.getSharedPreferences(
            Constants.PREFERENCES_KEY, Context.MODE_PRIVATE);
    SharedPreferences.Editor editor = prefs.edit();
    if(value.isAssignableFrom(String.class)){
        //Put value here
    }
    else if(value.isAssignableFrom(Boolean.class)){
        //Put value here            
    }

    editor.commit();
} 
```

我想检查这个函数中值的类型（我想检查两个类型`Boolean`和`String`），但我不知道该怎么做！任何人都可以提出任何建议吗？谢谢！

**编辑：**谢谢大家的帮助！我还有一个问题是如何将它的价值保存到`Preferences`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T09:13:11.350

你可以使用[`Class.isAssignableFrom()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#isAssignableFrom%28java.lang.Class%29).

> 确定此 Class 对象表示的类或接口是否与指定的 Class 参数表示的类或接口相同，或者是其超类或超接口

* * *

**更新**：通过问题中的编辑，为了在 a 中设置键/值[`SharedPreferences.Editor`](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html)，使用`putString()`and `putBoolean()`。

考虑到您需要将值作为参数接收。请注意，如果您收到该值，您已经可以访问它的类（因此您不需要`Class<T>`作为参数也不需要`isAssignableFrom()`），并通过[`instanceof`](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.20.2)运算符检查它：

```
public static <T> void saveLocalData(Context context, String key, T value) {
    SharedPreferences prefs = context.getSharedPreferences(
        Constants.PREFERENCES_KEY, Context.MODE_PRIVATE);
    SharedPreferences.Editor editor = prefs.edit();
    if (value instanceof String) { 
        editor.putString(key, (String) value);
    }
    else if (value instanceof Boolean){
        editor.putBoolean(key, (Boolean) value);
    }
    editor.commit();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T09:18:28.337

我没有在 Android 上尝试过，但由于它的语法通常等同于 Java，因此在 Java 中可以使用以下两种方法：

```
if (Boolean.class.equals(value) || String.class.equals(value)) {
    // Do stuff.
} 
```

这是有效的，因为`Boolean`和`String`都是最终的，您不必担心扩展类。我认为您甚至可以`==`在这种情况下使用（假设是正常的），因为类路径上`ClassLoader`通常只有一个`Class`per实例。`Class`如果您需要担心扩展类，请使用：

```
if (Boolean.class.isAssignableFrom(value) || String.class.isAssignableFrom(value)) {
    // Do stuff.
} 
```

# asp.net - 如何在 asp .net mvc3 中将表单发布到 url？

> ID：12402969
> 
> 赞同：0
> 
> 时间：2012-09-13T09:10:10.587
> 
> 标签：asp.net, asp.net-mvc-3, forms, post

我是 asp .net mvc3 的新手。我有一个要求，我将一个表格发布到一个 url 说 "www.abc.com/asa" 。我在我的应用程序中添加了一个提交按钮。但是每次我单击按钮时，表单都会提交给相应的控制器。我如何发布到我所需的网址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:19:02.923

通常在 mvc 中，我们遵循以下约定：

```
[httpGet] //default not to mention
public ActionResult Index()
{
    // Todo code here
}

[httpPost]
public ActionResult Index(FormCollection collection)
{
   // Form submit here, all form data available here
} 
```

但是在您的情况下，您可以在视图中写下以下内容：

```
@using (Html.BeginForm("ActionName", "Controller", "FormMethod", "HTML Attributes"))
{
   // Here Controller: it defines whose actionmethod need to be called when form get submitted.
} 
```

前任：

```
@using(Html.BeginForm(null, null, FormMethod.Post, new {@action="http://www.abc.com/asa"})
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:49:21.587

在这种情况下，我建议使用`<form />`带有适当 url in action 参数的标准 html 标记。

BeginForm 助手总是将动作和控制器作为参数——你不能使用标准的。

如果你愿意，你也可以定义自己的助手。如果这是一个更大的应用程序并且您将多次使用它，我会这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T09:52:43.467

```
<form action="www.abc.com/asa" method="POST">
   <legend>
     Foo
   </legend>
   <fieldset>
      <p>Fields</p>
   </fieldset>

   <input type="submit" name"submitForm" value="submitForm" />
</form> 
```

# c - 如何修复“ e = 1 + 1/1！+ 1/2！+ 1/3！+ ...... + 1/n！”的代码？

> ID：12402970
> 
> 赞同：6
> 
> 时间：2012-09-13T09:10:14.450
> 
> 标签：c

这就是我想出的：

```
#include <stdio.h>

int main (void)
{
  int n, i, j;
  float e = 1.0, nFact = 1.0;

  printf ("please enter the number");
  scanf ("%d", &n);

  for (i = 1; i <= n ; i++)
  {
    for (j = 1; j <= i; j++)
    {
      nFact *= j;
    }
    e = e + (1.0 / nFact);
  }

  printf ("The value of 'e' is : %f", e);
  return 0;
} 
```

这就是我从这段代码中得到的。输入：3 输出：2.58333（接近 2.6666...）

但是对于 n=3，e 应该给出 2.6666.. 作为一个值。

**我在这里做错了吗？如何获得正确的输出？**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-13T09:13:26.200

您在每次迭代中都不必要地计算阶乘。只需将内部循环替换为`nFact *= i;`.

```
#include<stdio.h>

int main (void)
{
int n,i,j;
float e=1.0, nFact=1;

printf("please enter the number");
scanf("%d", &n);

for( i =1; i<= n ; i++)
{
    nFact*=i;
    e = e + (1.0/ nFact);
}

printf("The value of 'e' is : %f", e);

return 0;
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-13T09:13:14.500

`Am i doing something wrong here?`

您忘记将阶乘变量设置为 1。因此，您的变量正在迅速变小。这使得 (1.0/nFact) 更小，这就是为什么你会变得更小 e。

```
nFact=1.0;     //add this line so it resets to 1.0 everytime a factorial is needed
for( j = 1  ; j <= i; j++)
{
    nFact *= j;
    e = e + (1.0/ nFact);
}
//only single loop is more than enough 
```

您正在通过 O(n) 复杂度获得阶乘。**为什么不保存旧值并在每次迭代中使用它？（O（1）--->不需要阶乘循环。只需使用旧值，因为您没有重置它。（只需乘以 i）**

`how can i get the proper output?`

在第 11 次或第 12 次迭代之后，您`float`不会给出足够的精度分辨率最小步骤。`Double`或者`BıgDecimal`如果你追求科学似乎更好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T09:21:18.873

该循环非常低效：注意您的内部循环如何一遍又一遍地计算相同的东西！

相反，您应该保留一个正在运行的术语并对其进行更新：

```
double term = 1;
double result = term;

for (unsigned int i = 1; i != n; ++i)
{
    term /= i;
    result += term;
}

printf("With %u steps we compute %f.\n", n, result); 
```

# java - 我的 minSdkVersion 和 targetSdkVersion 是什么？

> ID：12402974
> 
> 赞同：2
> 
> 时间：2012-09-13T09:10:24.547
> 
> 标签：java, android, android-manifest

嗨，下面是我的移动设备配置，有人可以帮我找出我的 minSdkVersion 和 targetSdkVersion 是什么。

对不起，我是新手，试图了解如何找到 api

```
My Device is HTC OneX

    Android Version: 4.03
    HTC Sense Version: 4.0
    Software number: 1.29.110.11
    HTC SDK API Level: 4.12
    HTC Extension version: HTCExtension_403_1_GA_7 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T09:17:59.660

和`minSdkVersion`不`targetSdkVersion`依赖于您用于调试应用程序的设备。

`minSdkVersion`用于告诉 Android 您所针对的最低 Android API 是什么。Google Play 等应用商店使用此数字来确保您的应用不会显示给运行低于您支持的 Android 版本的设备。即使有人试图通过旁加载在 SDK 低于 的设备上安装您的应用程序`minSdkVersion`，系统也不会让安装发生。您应该始终在清单中声明这一点。但是，如果您不这样做，它将默认为`1`.

`targetSdkVersion`通知系统您已针对目标版本进行了测试，并且系统不应启用任何兼容性行为以保持您的应用程序与目标版本的前向兼容性。该应用程序仍然能够在旧版本上运行（低至`minSdkVersion`）。

随着 Android 随着每个新版本的发展，某些行为甚至外观可能会发生变化。但是，如果平台的 API 级别高于您应用程序声明的版本`targetSdkVersion`，系统可能会启用兼容性行为以确保您的应用程序继续按照您期望的方式运行。`targetSdkVersion`您可以通过指定匹配其运行平台的 API 级别来禁用此类兼容性行为。例如，将此值设置为“11”或更高允许系统在 Android 3.0 或更高版本上运行时将新的默认主题 (Holo) 应用到您的应用程序，并且还可以在大屏幕上运行时禁用[屏幕兼容模式](http://developer.android.com/guide/practices/screen-compat-mode.html)（因为支持 API 11 级隐式支持更大的屏幕）。

根据您为此属性设置的值，系统可能会启用许多兼容性行为。[Build.VERSION_CODES](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html)参考中的相应平台版本描述了其中一些行为。

为了与每个 Android 版本一起维护您的应用程序，您应该增加此属性的值以匹配最新的 API 级别，然后在相应的平台版本上彻底测试您的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T09:31:49.583

## 安卓：m​​inSdkVersion

应用程序将在其上运行的最低 Android 平台版本，由平台的 API 级别标识符指定。

## 安卓：targetSdkVersion

指定应用程序设计运行的 API 级别。在某些情况下，这允许应用程序使用在目标 API 级别中定义的清单元素或行为，而不是仅限于使用为最低 API 级别定义的那些元素或行为。

## 安卓：m​​axSdkVersion

应用程序设计运行的 Android 平台的最高版本，由平台的 API 级别标识符指定。重要提示：请在使用此属性之前阅读文档。

# objective-c - AppDelegate 的属性不可访问

> ID：12402976
> 
> 赞同：1
> 
> 时间：2012-09-13T09:10:33.603
> 
> 标签：objective-c

我在 AppDelegate.m 接口中创建一个属性`countryNameInitials`作为 NSMutableArray 并合成它。目的是存储全局数据以在表格视图中显示。在表视图控制器中：

```
#import "AppDelegate.h"
...

@implementation
#define AppDelegate [[UIApplication sharedApplication] delegate]
... 
```

问题是我不能`AppDelegate.countryNameInitials`用来访问数据。任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T09:14:12.253

事实是

```
 [[UIApplication sharedApplication] delegate] 
```

会给你一个通用的`UIApplcationDelegate`；虽然您需要您的`MyOwnAppDelegate`（不知道您如何称呼它）类型才能使用您的`countryNameInitials`财产。所以，试试：

```
 #define AppDelegate ((MyOwnAppDelegate*)[[UIApplication sharedApplication] delegate]) 
```

然后

```
AppDelegate.countryNameInitials 
```

应该管用。

（不过，我不会为类和宏使用相同的名称）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:26:10.290

访问的问题`countryNameInitials`是由于我在 AppDelegate.m 中声明了该属性。在我将它移到 AppDelegate.h 之后，错误就消失了。

旁注：1.`AppDelegate`因为标识符名称对我有用。@Vakio 建议的命名冲突不相关。

# ios - 通过 UIAutomation 在 UIDatePicker 中选择一个日期？

> ID：12402980
> 
> 赞同：4
> 
> 时间：2012-09-13T09:10:46.487
> 
> 标签：ios, iphone, instruments, ui-automation, ios-ui-automation

我发现我不能这样做`UIAPickerWheel.selectValue()`，知道吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T09:41:52.407

你可以像这样在选择器中传递你的值：

```
Picker.wheels()[1].selectValue(Your_Value); 
```

在 中`wheels()[1]`，[1] 是您的轮号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-18T19:27:01.647

我在带有日期月份和日期的选择器上使用 UIAPickerWheel selectValue 函数时遇到了困难，如下图的第一个（最左边，零索引）轮子所示。唯一对我有用但不是最佳的解决方案是在当前选定值的上方（下方）点击一些指定的次数。以下代码将点击所选值上方以减少日期`daysAgo`时间。

```
var datePicker = this.popupWindow().pickers()[0];
for (var i = 0; i < daysAgo; ++i) {
    datePicker.wheels()[0].tapWithOptions({tapOffset:{x:0.81, y:0.30}});
    this.target().delay(.4);
} 
```

![在此处输入图像描述](../Images/a984756c9d0065f015d34f106990861e.png)

# iphone - XCode Organizer 识别出我的旧开发者资料

> ID：12402981
> 
> 赞同：-1
> 
> 时间：2012-09-13T09:10:48.433
> 
> 标签：iphone, ios, xcode4, xcode4.3

当我还在上学的时候，我被学校授予了学生许可证，这样学生就可以开发 iOS 应用程序并将其安装在他们的设备上。那就像2年前一样。我今天刚刚将 XCode 更新到 4.4，但在我的设备上运行我的应用程序时遇到问题，我收到了臭名昭著的“未找到有效签名身份消息”

我试图寻找解决方案并决定重新开始整个过程​​（获取新证书、移动设备等）。执行此操作的工作流程似乎发生了变化，现在一切都通过 XCode 完成。我试图通过 XCode 请求新的配置文件，但我发现我仍然是旧大学的成员。我试图申请一个新证书，它告诉我该组的管理员需要批准它。

我想知道...... XCode 如何获得所有这些信息？我想更改我的个人资料，因为它没有使用正确的个人资料（例如，在会员中心我看到我的许可证将在下个月到期，但在 XCode 上我看到它将于 2013 年 7 月 13 日到期）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:16:21.363

编辑：

1) 尝试使用以下搜索文本：[ios] [xcode] 'Keychain Access' 一些帖子有大量的赞成票，看看那些。

2）试试这个 [问题](https://stackoverflow.com/q/12171278/1633251)并在底部寻找原创者的答案 - 这可能对你有用。

3）可能除了钥匙串项目外，这里还涉及偏好。运行时出现的一篇文章 1) 描述了如何移动或删除其他 Xcode 文件。不幸的是，仅仅删除 Xcode 对它留下的偏好没有任何影响。

# python - 使用正则表达式拆分此字符串 - python

> ID：12402982
> 
> 赞同：0
> 
> 时间：2012-09-13T09:10:48.477
> 
> 标签：python, regex, python-2.7

```
Input string
---------------
South Africa 109/0 
Australia 100
Sri Lanka 111
Sri Lanka 331/4

Expected Output
---------------
['South Africa', '109', '0']
['Australia', '100']
['Sri Lanka', '111']
['Sri Lanka', '331', '4'] 
```

我尝试了几个正则表达式，但无法弄清楚编写正确的一个。在这种情况下，空格分隔符对我没有帮助，因为国家名称可能有也可能没有空格（南非、印度）。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T09:23:41.210

我们可以使用正则表达式：

```
r'(\D+)\s(\d+)(?:/(\d+))?' 
```

（“很多非数字，后跟一个空格，然后是很多数字，然后可选地后跟一个斜杠，然后是很多数字。”）

这将返回，例如

```
>>> [re.match(r'(\D+)\s(\d+)(?:/(\d+))?', x).groups() 
...  for x in ['South Africa 109/0', 
...            'Australia 100',
...            'Sri Lanka 111',
...            'Sri Lanka 331/4']]
[('South Africa', '109', '0'), 
 ('Australia', '100', None), 
 ('Sri Lanka', '111', None), 
 ('Sri Lanka', '331', '4')] 
```

注意`None`s，您可能需要手动过滤掉它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T09:26:19.417

尝试：

```
import re
re.split(r"(?<=[a-zA-Z])\s+(?=\d)|(?=\d)\s+(?=[a-zA-Z])|/", "South Africa 109/0") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T09:18:52.500

```
re.compile("^([\w\s]+)\s(\d+)\/?(\d+)?") 
```

给你三个组。我们可以分解它

*   一组仅`([\w\s]+)`在行首的字母和空格 ( `^`)
*   空间
*   一组数字，至少一个`(\d+)`
*   一个`/`与否
*   一组数字（可能`None`）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T09:52:34.687

你已经得到了正则表达式的答案，但我建议也考虑可用的内置`str`方法（无论如何对于这个用例）：

```
s = 'South Africa 109/0'
country, numbers = s.rsplit(' ', 1)
# ('South Africa', '109/0')
new_list = [country] + numbers.split('/')
# ['South Africa', '109', '0'] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T09:33:19.747

这是您需要的正则表达式：

```
for match in re.finditer(r"(?m)^(?P<Country>.*?)\s*(?P<Number1>\d+)\s*?/?\s*?(?P<Number2>\d*?)\s*?$", inputText):
    country = match.group("Country")
    number1 = match.group("Number1")
    number2 = match.group("Number2") 
```

你可以在**[这里](http://regexr.com?324rd)**看到结果。

这是模式的解释：

```
# ^(?P<Country>.*?)\s*(?P<Number1>\d+)\s*?/?\s*?(?P<Number2>\d*?)\s*?$
# 
# Options: ^ and $ match at line breaks
# 
# Assert position at the beginning of a line (at beginning of the string or after a line break character) «^»
# Match the regular expression below and capture its match into backreference with name “Country” «(?P<Country>.*?)»
#    Match any single character that is not a line break character «.*?»
#       Between zero and unlimited times, as few times as possible, expanding as needed (lazy) «*?»
# Match a single character that is a “whitespace character” (spaces, tabs, and line breaks) «\s*»
#    Between zero and unlimited times, as many times as possible, giving back as needed (greedy) «*»
# Match the regular expression below and capture its match into backreference with name “Number1” «(?P<Number1>\d+)»
#    Match a single digit 0..9 «\d+»
#       Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
# Match a single character that is a “whitespace character” (spaces, tabs, and line breaks) «\s*?»
#    Between zero and unlimited times, as few times as possible, expanding as needed (lazy) «*?»
# Match the character “/” literally «/?»
#    Between zero and one times, as many times as possible, giving back as needed (greedy) «?»
# Match a single character that is a “whitespace character” (spaces, tabs, and line breaks) «\s*?»
#    Between zero and unlimited times, as few times as possible, expanding as needed (lazy) «*?»
# Match the regular expression below and capture its match into backreference with name “Number2” «(?P<Number2>\d*?)»
#    Match a single digit 0..9 «\d*?»
#       Between zero and unlimited times, as few times as possible, expanding as needed (lazy) «*?»
# Match a single character that is a “whitespace character” (spaces, tabs, and line breaks) «\s*?»
#    Between zero and unlimited times, as few times as possible, expanding as needed (lazy) «*?»
# Assert position at the end of a line (at the end of the string or before a line break character) «$» 
```

# android - 我想使用 android 在对话框或弹出框中显示我的登录表单

> ID：12402983
> 
> 赞同：2
> 
> 时间：2012-09-13T09:10:59.193
> 
> 标签：android

我在一个 xml 中有两个 textView，即。客户登录和供应商登录...当我点击客户登录或供应商登录弹出窗口应该打开我想显示我的登录表单。请帮帮我。

这是我的登录表单：login_layout.xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background"
    android:orientation="vertical" >

    <include layout="@layout/header_layout" />
        <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_margin="10dip"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/lbl_username"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="30dip"
            android:gravity="center"
            android:textColor="#000000"
            android:text="@string/username"
            />

        <EditText
            android:id="@+id/et_username"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dip"
            android:hint="@string/enter_username"
            android:inputType="textEmailAddress" />

        <TextView
            android:id="@+id/lbl_password"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="15dip"
            android:gravity="center"
             android:textColor="#000000"
            android:text="@string/password"
            />

        <EditText
            android:id="@+id/et_password"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dip"
            android:hint="@string/enter_password"
            android:inputType="textPassword"
            android:singleLine="true" />
         <TextView
            android:id="@+id/lbl_forgot"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="25dip"
            android:gravity="center"
            android:textColor="#000000"
            android:text="@string/forgot_password"
            android:textSize="18dp"
            />

        <Button
            android:id="@+id/loginButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginTop="15dip"
            android:text="@string/login"
             />
    </LinearLayout>

</LinearLayout> 
```

这是 LoginActivity.java：

```
package com.Login;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

import org.json.JSONException;
import org.json.JSONObject;

public class LoginActivity extends Activity {

    private EditText etUsername, etPassword;
    private Button loginButton;
    private JSONParser jsonParser;
    private static String loginURL = "http://www.xyz.com?login.php";

    private Bundle bundle;
    private String success;
    /** The dialog. */
    private ProgressDialog dialog;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login_layout);

        TextView textv = (TextView) findViewById(R.id.lbl_forgot);
        textv.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent intent = new Intent();
                intent.setClass(v.getContext(), ForgotPassActivity.class);
                startActivity(intent);

            }
        });
        intitDisplay();
        addListeners();

    }

    private void addListeners() {
        loginButton.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                if (etUsername.getText().length() == 0)
                    etUsername.setError("please enter username");

                if (etPassword.getText().length() == 0)
                    etPassword.setError("please enter password");

                if ((etUsername.getText().length() > 0)
                        && (etPassword.getText().length() > 0)) {
                    jsonParser = new JSONParser();

                    if (jsonParser.isNetworkAvailable(LoginActivity.this)) {
                        new BackgroundTask().execute();
                    } else {
                        Toast.makeText(LoginActivity.this,
                                "Network not available", Toast.LENGTH_LONG)
                                .show();
                    }
                }

            }
        });

    }

    private void intitDisplay() {
        etUsername = (EditText) findViewById(R.id.et_username);
        etPassword = (EditText) findViewById(R.id.et_password);
        loginButton = (Button) findViewById(R.id.loginButton);
        bundle = new Bundle();
        dialog = new ProgressDialog(LoginActivity.this);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.login_layout, menu);
        return true;
    }

    /** calling web service to get creditors list */
    /**
     * The Class BackgroundTask.
     */
    private class BackgroundTask extends AsyncTask<String, Void, String> {

        /** The resp. */
        String resp;

        /*
         * (non-Javadoc)
         * 
         * @see android.os.AsyncTask#onPreExecute()
         */
        protected void onPreExecute() {

            dialog.setMessage("Loading...");
            dialog.setCancelable(false);
            dialog.show();

        }

        /*
         * (non-Javadoc)
         * 
         * @see android.os.AsyncTask#doInBackground(Params[])
         */
        protected String doInBackground(final String... args) {

            Log.v("ENTERED USERNAME::", "" + etUsername.getText().toString());
            String newUrl = loginURL + "username="
                    + etUsername.getText().toString() + "&password="
                    + etPassword.getText().toString();
            JSONObject json = jsonParser.getJSONFromUrl(newUrl);

            try {
                success = json.getString("msg");
                Log.v("SUCCESS:: ", success);
                if (success.trim().toString().equalsIgnoreCase("SUCCESS")) {
                    String loggedUsername = json.getString("USER_NAME");
                    bundle.putString("loggedUser", loggedUsername);
                    Log.v("Logged User::", loggedUsername);

                }
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            return null;

        }

        /*
         * (non-Javadoc)
         * 
         * @see android.os.AsyncTask#onPostExecute(java.lang.Object)
         */
        protected void onPostExecute(String list) {
            dialog.dismiss();
            if (success.trim().toString().equalsIgnoreCase("SUCCESS")) {
                Toast.makeText(LoginActivity.this, "Login Succesfull..",
                        Toast.LENGTH_LONG).show();
                Intent intent = new Intent(LoginActivity.this,
                        HomeActivity.class).putExtras(bundle);
                startActivity(intent);
            } else {
                Toast.makeText(LoginActivity.this, "Login failed...",
                        Toast.LENGTH_LONG).show();
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-13T09:25:32.970

**用这个**

创建一个新的 xml 文件，其中包含文本字段、编辑文本、按钮，即您想要在弹出窗口中显示的登录表单。现在在您想要显示弹出窗口的地方调用以下方法。

```
private void callLoginDialog() 
     {
         myDialog = new Dialog(this);
         myDialog.setContentView(R.layout.yourxmlfileID);
         myDialog.setCancelable(false);
         Button login = (Button) myDialog.findViewById(R.id.yourloginbtnID);

          emailaddr = (EditText) myDialog.findViewById(R.id.youremailID);
          password = (EditText) myDialog.findViewById(R.id.yourpasswordID);
          myDialog.show();

         login.setOnClickListener(new OnClickListener()
         {

            @Override
            public void onClick(View v)
            {
                    //your login calculation goes here
            }
        });

     } 
```

让我知道它是否对你有帮助......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T09:16:36.900

适用`@android:style/Theme.Dialog`于您的登录活动。您可以在清单编辑器中执行此操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T09:17:35.580

在你的清单文件中给出这样的

```
<activity android:name=".LoginActivity"
              android:label="Login"
              android:theme="@style/CustomDialogTheme"
              android:configChanges="locale|keyboardHidden|orientation"/> 
```

并在 styles.xml 中将 customDialogTheme 指定为

```
 <style name="CustomDialogTheme" parent="@android:style/Theme.Dialog">
    <item name="android:bottomBright">#fff</item>
    <item name="android:bottomDark">#fff</item>
    <item name="android:bottomMedium">#fff</item>
    <item name="android:centerBright">#fff</item>
    <item name="android:centerDark">#fff</item>
    <item name="android:centerMedium">#fff</item>
    <item name="android:fullBright">#7D266A</item>
    <item name="android:fullDark">#7D266A</item>
    <item name="android:topBright">#2f6699</item>
    <item name="android:topDark"#2f6699</item>
</style> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T09:18:17.370

使用自定义对话框。

**为客户**和**供应商**创建布局

 **根据您的要求在单击时显示自定义对话框对话框。

```
Dialog dialog = new Dialog(this);
dialog.setContentView(R.layout.customerlogin); 
```

或者

```
dialog.setContentView(R.layout.supplierlogin);

dialog.show(); 
```**