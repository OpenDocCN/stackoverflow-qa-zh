# StackOverflow 问答 10015000-10015999

# php - 如何创建语义搜索框和引擎

> ID：10015001
> 
> 赞同：0
> 
> 时间：2012-04-04T16:04:40.397
> 
> 标签：php, jquery, html, search, semantics

我正在与我的主管讨论我将为用户创建一个关键字搜索，以便能够输入关键字来查找他们之前创建的任何问题。但我的主管表示，进行语义搜索比关键字搜索要好得多。

考虑到这一点，我想问是否有人知道任何能够创建语义搜索框和引擎的好网站。我的应用程序是手动编码的，但是手动创建语义搜索框和引擎更好，还是使用软件创建语义搜索引擎更好？php 或 jquery 能否编写语义搜索框和引擎？

我只是在寻找一些关于为我的应用程序创建语义搜索框的最佳方式的答案。

谢谢

# matlab - 让图像在matlab中并排显示

> ID：10015004
> 
> 赞同：4
> 
> 时间：2012-04-04T16:04:54.240
> 
> 标签：matlab

我试图让 3 张图像在 matlab 中并排显示。但是当我使用 subplot 时，它们的间距不均匀。第一个和第二个是 25×25 像素的图像，第三个是 25×75 的图像。

我怎样才能让它像

```
+-----++-----++---------------+
| img || img ||     img       |
|  1  ||  2  ||      3        |
+-----++-----++---------------+ 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T16:27:54.710

您可以使用`subplot`跨越多个网格方块。对于您的示例，请尝试

```
subplot(1,4,1)
subplot(1,4,2)
subplot(1,4,3:4) % this will expand the third axes over the last two grid squares 
```

笔记：

轴的位置可以`h=subplot(...)`返回到新创建的轴的句柄。然后您可以使用`set`来调整轴，或者您可以使用

```
h=subplot('position', [left bottom width height]) 
```

手动将轴放置在图中。此外，请注意功能`get(h,'prop')`，`set(h,'prop',value)`也可用于调整其他轴属性。有关所有可用属性的文档，请参阅轴上的 MATHWORK 的[句柄图形浏览器部分。](http://www.mathworks.com/help/techdoc/infotool/hgprop/axes_frame.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-05T13:52:29.297

另一种选择是创建一个新图像：

```
abuttedImage = [im1 im2 im3]; 
```

只要每个图像中的行数相同，这将起作用。

# c# - CRM 2011 获取实体记录的 GUID（合同续订）

> ID：10015006
> 
> 赞同：0
> 
> 时间：2012-04-04T16:04:55.513
> 
> 标签：c#, dynamics-crm, dynamics-crm-2011, crm

我在尝试获取 CRM2011 中合同的 GUID 时遇到问题。首先，我有一个创建实体记录的工作流，然后触发插件来更新合同。当我将合同 ID 设置为新的 GUID 时，它可以正常工作，如下所示：

```
RenewContractRequest req = new RenewContractRequest();
req.IncludeCanceledLines = true;
req.ContractId = new Guid("1767AD4E-CAF4-E011-8D97-1CC1DEF1B5FF");
req.Status = 1;
RenewContractResponse resp = (RenewContractResponse)service.Execute(req); 
```

但是，当我尝试这样做时：

```
Guid getContract_id = (Guid)((Entity)context.InputParameters["Target"])["contractid"];

RenewContractRequest req = new RenewContractRequest();
req.ContractId = getContract_id;
req.IncludeCanceledLines = true;
req.Status = 1;
RenewContractResponse resp = (RenewContractResponse)service.Execute(req); 
```

我得到一个例外，即字典中不存在给定的键，我理解为，它没有识别出我将其设置为的 GUID？这可能是我正在做的非常愚蠢的事情，我希望有人能在这里帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T16:23:56.593

我认为您在第一行的语法不起作用：-

```
Guid getContract_id = (Guid)((Entity)context.InputParameters["Target"])["contractid"]; 
```

您可以使用以下行更简单地执行此操作：-

```
Guid getContract_id = (Guid)((Entity)context.InputParameters["Target"]).Id; 
```

当您在创建合同后触发它时（因此 Id 是您正在触发事件的已创建实体的 Id）。

一般来说，虽然检索实体然后设置属性可以通过属性集合执行：-

```
Entity myEntity = (Entity)context.InputParameters["Target"];
Guid myId = (Guid)entity.Attributes["myIdName"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T16:19:40.343

尝试这个：

```
var contract = ((Contract)context.InputParameters["Target"]);
Guid getContract_id = contract.ContractId; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T16:27:12.463

首先，在 CRM 中分配主键不是一个好主意，让 CRM 为您完成。其次，也许您的插件在 Pre-creation 上工作，并且 pre-creation 意味着数据库中尚不存在该记录，但如果您将插件更改为 post 则您可以获得新创建记录的 GUID。

利用：

```
Entity myContarct= ((Entity)context.InputParameters["Target"]);

GUID contractId = myContract.Id; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-24T17:33:30.170

```
Guid getContract_id = context.PrimaryEntityId; 
```

此外，如果您有理由在 CRM 中分配主键（实体 ID），也不一定是个坏主意。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T11:10:01.390

大家好，非常感谢您的帮助。

我自己想通了，我使用查询表达式来检索 Id (GUID) 和特定合同的编号。因为我将来会有很多合同，所以我相信这是获得 ID 的更好方法。

# user-interface - 在 Racket/GUI 中禁用其父菜单栏的模态对话框？

> ID：10015008
> 
> 赞同：3
> 
> 时间：2012-04-04T16:05:23.983
> 
> 标签：user-interface, racket

1.  使用球拍 gui 库，我发现我无法显示真正的模态对话框，当它显示时，无法激活其父窗口。
2.  尽管对话框会阻塞其父级的事件空间，但可以单击父级窗口中的菜单栏，从而可以一次又一次地显示相同的对话框。以下是代码：

`#lang racket/gui`

```
(define frame (new frame%
                   [label "test"]
                   [width 200]
                   [height 200]))

(define mb (new menu-bar% [parent frame]))

(let ([m (new menu% 
              [parent mb]
              [label "&About"])])
  (new menu-item%
       [parent m]
       [label "&About"]
       [callback (lambda (b e) (message-box "About" "This is a test." frame))])
  )

(send frame show #t) 
```

（ps消息框可以弹出对话框-同`(new dialog% [parent frame])`）

所以如果我们忽略第一个问题，我们可以显示一个禁用父菜单栏的模态对话框吗？

此外，真的不可能在球拍/gui中制作真正的模态对话框吗？

（我正在使用Win7）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T19:18:51.913

而不是使用 a `frame%`，我想你想在[`dialog%`](http://docs.racket-lang.org/gui/dialog_.html)这里使用一个类。我不确定您是否可以轻松制作具有菜单栏的模态对话框。

哦，还请记住，这`dialog%`只是其事件空间的模态。因此，如果您从 DrRacket 运行一个创建对话框的代码片段，那么 DrRacket 本身仍然可以访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T17:03:42.147

跟进：这是一个错误，将被修复。

参考：

1.  [http://lists.racket-lang.org/users/archive/2012-April/051275.html](http://lists.racket-lang.org/users/archive/2012-April/051275.html)
2.  [http://git.racket-lang.org/plt/commit/9d563c786a71b621fcd2909c917b49939e0d11b0](http://git.racket-lang.org/plt/commit/9d563c786a71b621fcd2909c917b49939e0d11b0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T22:54:21.313

这似乎有点骇人听闻，但是您可以自己做， `[callback (lambda (b e) (send mb enable #f) (message-box "About" "This is a test.") (send mb enable #t))]`或者`dynamic-wind`如果涉及延续，则可以使用，在您的示例中它们不是。

# haskell - 有趣的类型！解析多个实例声明

> ID：10015009
> 
> 赞同：5
> 
> 时间：2012-04-04T16:05:43.083
> 
> 标签：haskell, types, type-extension

我正在尝试编写一些 Haskell 代码，其中有多种数据类型，每种数据类型都可以有多个实现。为此，我将每个数据类型定义`class`为其方法是相关的构造函数和选择器，然后根据给定的构造函数和选择器实现对该类成员的所有操作。

例如，也许`A`是一个多项式类（带有方法`getCoefficients`和`makePolynomial`），可以表示为 a`SparsePoly`或 a `DensePoly`，并且`B`是一个复数类（带有方法`getReal`和） `getImag`，`makeComplex`可以表示为 a`ComplexCartesian`或 a `ComplexPolar`。

我在下面复制了一个最小的例子。我有两个类`A`，`B`每个类都有一个实现。我想将两个类的所有实例都`Num`自动转换为实例（这需要`FlexibleInstances`和`UndecidableInstances`类型扩展）。当我只有一个`A`or时，这可以正常工作`B`，但是当我尝试同时使用两者进行编译时，会出现以下错误：

```
Duplicate instance declarations:
  instance [overlap ok] (A a, Num x, Show (a x), Eq (a x)) =>
                        Num (a x)
    -- Defined at test.hs:13:10-56
  instance [overlap ok] (B b, Num x, Show (b x), Eq (b x)) =>
                        Num (b x)
    -- Defined at test.hs:27:10-56 
```

我想“重复的实例声明”消息是因为数据类型可以同时成为`A`和的实例`B`。我希望能够向编译器承诺我不会这样做，或者可能指定一个默认类以在类型是两个类的实例的情况下使用。

有没有办法做到这一点（可能是另一种类型扩展？）或者这是我坚持的事情？

这是我的代码：

```
{-# LANGUAGE FlexibleInstances, UndecidableInstances, OverlappingInstances #-}

class A a where
    fa :: a x -> x
    ga :: x -> a x

data AImpl x = AImpl x deriving (Eq,Show)

instance A AImpl where
    fa (AImpl x) = x
    ga x = AImpl x

instance (A a, Num x, Show (a x), Eq (a x)) => Num (a x) where
    a1 + a2 = ga (fa a1 + fa a2)
    -- other implementations go here

class B b where
    fb :: b x -> x
    gb :: x -> b x

data BImpl x = BImpl x deriving (Eq,Show)

instance B BImpl where
    fb (BImpl x) = x
    gb x = BImpl x

instance (B b, Num x, Show (b x), Eq (b x)) => Num (b x) where
    -- implementations go here 
```

**编辑：**为了让自己清楚，我不想使用这种技术编写任何实用的代码。我这样做是为了帮助自己更好地理解类型系统和扩展。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-04T17:24:38.220

你问题的这一部分

> 我想“重复实例声明”消息是因为可以将数据类型作为 A 和 B 的实例。我希望能够向编译器承诺我不会这样做，或者可能指定一个在类型是两个类的实例的情况下使用的默认类。

是不正确的。实际上是因为你写了两个实例，

```
instance Num (a x)
instance Num (b x) 
```

编译器无法区分（请参阅@hammar评论中的链接，类上下文不计入区分实例声明的目的）。

一种解决方案是添加见证类型。

```
{-# LANGUAGE FlexibleInstances, FlexibleContexts, UndecidableInstances, OverlappingInstances #-}

data AWitness

data AImpl witness x = AImpl x deriving (Eq,Show)

instance A (AImpl AWitness) where
    fa (AImpl x) = x
    ga x = AImpl x

instance (A (a AWitness), Num x, Show (a AWitness x), Eq (a AWitness x)) => Num (a AWitness x) where
    a1 + a2 = ga (fa a1 + fa a2) 
```

编译器可以使用见证类型来区分您的实例声明。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T16:50:17.540

没有真正的好方法可以做到这一点。最好的做法是定义一些常量，比如

```
plusA, minusA :: (A a, Num x) => a x -> a x -> a x 
```

这使得`Num`在您拥有`A`实例后编写实例更加机械：

```
instance A Foo where ...
instance Num x => Num (Foo x) where
    (+) = plusA
    (-) = minusA 
```

# sharepoint-2010 - ItemUpdating 在事件接收器中的 ItemAdded 之后调用了两次

> ID：10015010
> 
> 赞同：3
> 
> 时间：2012-04-04T16:05:44.297
> 
> 标签：sharepoint-2010

我创建了一个事件接收器来处理 SharePoint 2010 中文档库上的 ItemAdded 和 ItemUpdating 事件。

我遇到了一个问题，当我将文档添加到库中时（例如，通过从 Word 中将其保存回来），正确调用了 ItemAdded 方法，但是随后两次调用 ItemUpdating。我已经从我的处理程序中删除了所有代码，以确保不是我在里面做的事情导致了问题。它们实际上看起来像：

```
public override void ItemUpdating(SPItemEventProperties properties)
{
}

public override void ItemAdded(SPItemEventProperties properties)
{
} 
```

有没有人有这个问题的解决方案？

这是事件接收器的 elements.xml 文件：

```
<Elements xmlns="http://schemas.microsoft.com/sharepoint/">
  <Receivers ListTemplateId="101">
      <Receiver>
        <Name>DocumentsEventReceiverItemUpdating</Name>
        <Type>ItemUpdating</Type>
        <Assembly>$SharePoint.Project.AssemblyFullName$</Assembly>
        <Class>My.Namespace.DocumentsEventReceiver</Class>
        <SequenceNumber>10000</SequenceNumber>
        <Synchronization>Synchronous</Synchronization>
      </Receiver>
      <Receiver>
        <Name>DocumentsEventReceiverItemAdded</Name>
        <Type>ItemAdded</Type>
        <Assembly>$SharePoint.Project.AssemblyFullName$</Assembly>
        <Class>My.Namespace.DocumentsEventReceiver</Class>
        <SequenceNumber>10000</SequenceNumber>
        <Synchronization>Synchronous</Synchronization>
      </Receiver>
  </Receivers>
</Elements> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T17:11:35.497

问题是 In`Document library`事件处理程序`Item Updating`也在检查它`Document`是处于**Check In**模式还是**Check Out**期间。这就是为什么它被调用两次。

你应该把你的代码

```
 public override void ItemUpdating(SPItemEventProperties properties)
  {  
    base.ItemUpdating(properties);
    if (properties.AfterProperties["vti_sourcecontrolcheckedoutby"] == null && properties.BeforeProperties["vti_sourcecontrolcheckedoutby"] != null)
     {
       //do stuff
     }
  } 
```

有关详细信息，***[这里](http://www.simple-talk.com/content/print.aspx?article=1424)***是描述`Document's`事件整体情况的好文章。

# python - Python：为什么列表导入使用引号，我该如何避免/摆脱它们？

> ID：10015012
> 
> 赞同：0
> 
> 时间：2012-04-04T16:05:54.437
> 
> 标签：python, list, replace

这里真的很简单的问题，但困扰我足够长的时间来问。代码如下所示：

```
f4 = open("genomekey2.txt", 'rb')
keyline = f4.readline()
keygenomes = []
for keyline in f4:
   keygenomes.append(keyline[:-1]) 
```

基因组key2.txt 文件格式如下所示

```
['Prochlorococcus marinus str. MIT 9202']
['Prochlorococcus marinus str. NATL1A']
['Synechococcus sp. RS9917']
['Nostoc sp. PCC 7120']
['Synechococcus sp. JA-2-3B'a(2-13)'] 
```

问题是当我打印基因组密钥列表时，它包含我想要的所有条目，但在列表中找到的每个 [ ] 周围都有引号。我想去掉引号，这样我就可以将它与另一个列表进行比较，但到目前为止还没有找到方法。我试过...

```
for a in keygenomes:
    a.replace('"', '') 
```

但这似乎不起作用。我宁愿一个根本不添加引号的解决方案。它们到底有什么用，代码的哪一部分（.append、.readline()）负责添加它们？这里有很多初学者问题，但你们看起来很不错。

编辑：我最终想将它与这样格式化的列表进行比较

[['Arthrospira maxima CS-328']，['Prochlorococcus marinus str. MIT 9301']，['Synechococcus sp. CC9605']，['聚球藻。WH 5701'], ['Synechococcus sp. CB0205'], ['Prochlorococcus marinus str. MIT 9313']，['Synechococcus sp. JA-3-3Ab']，['Trichodesmium erythraeum IMS101']，['Synechococcus sp. PCC 7335'], ['Trichodesmium erythraeum IMS101'], ...

编辑：所以我想我可以通过组合答案来解决问题，谢谢大家的帮助！引用干扰了列表比较，所以我也只是将它们添加到第一个列表中，即使我认为它只是模仿作为字符串输入的列表（我现在认为我理解其中的区别）它似乎工作

```
f4 = open("genomekey2.txt", 'rb')
keyline = f4.readline()
keygenomes = []
for keyline in f4:
    keygenomes.append(keyline[:-1])

specieslist = " ".join(["%s" % el for el in specieslist])

nonconservedlist = [i for i in keygenomes if i not in specieslist] 
```

编辑：是的，上面的工作，但我在这里找到了更优雅的解决方案（http://forums.devshed.com/python-programming-11/convert-string-to-list-71857.html）在更好地理解问题之后感谢你们的帮助是这样的：

```
for keyline in f4:
    keyline = eval(keyline)
    keygenomes.append(keyline) 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:01:13.967

根据您想要比较列表的内容，您似乎想要一个列表列表而不是字符串列表......也许是这个？

```
f4 = open("genomekey2.txt", 'rb')
keygenomes = []
for keyline in f4.readlines():
    if keyline:
        keygenomes.append(eval(keyline.strip())) 
```

您将遇到以下行问题：

```
['Synechococcus sp. JA-2-3B'a(2-13)'] 
```

引号不正确，它会破坏评估。是否可以混合引号？换成这样...

```
["Synechococcus sp. JA-2-3B'a(2-13)"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T16:11:51.000

一个快速而肮脏的解决方案是跳过该行的前两个和最后两个字符

```
f4 = open("genomekey2.txt", 'rb')
keyline = f4.readline()
keygenomes = []
for keyline in f4:
   # CHANGE HERE
   keygenomes.append(keyline[2:-2]) 
```

否则使用正则表达式

```
g = re.match(("^\['(?P<value>.*)'\]"), "['Synechococcus sp. JA-2-3B'a(2-13)']")
g.group(1)
"Synechococcus sp. JA-2-3B'a(2-13)" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T16:16:03.713

`a.replace(...)`返回修改后的字符串，它不会修改`a`.

因此，您需要实际替换数组中的条目，或者在将它们放入数组之前修复它们。

```
keygenomes = [ a.replace('"', '') for a in keygenomes ] 
```

编辑：

我想我没有仔细阅读这个问题 -`"`当你打印一个字符串时 - 它不是字符串本身的一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T16:16:55.020

您`replace`使用了错误的字符串；您正在尝试删除单引号，但您的字符串是双引号。由于字符串不可变，因此替换不是就地的，您必须使用返回值。

```
keygenomes.append(keyline[:-1].replace("'", "")) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T16:32:32.743

尝试这样的事情：

```
keygenomes = []
f4 = open("genomekey2.txt", 'rb')
keyline = f4.readline()
for keyline in f4:
    keyline = keyline.strip()
    if keyline and keyline.startswith("['") and keyline.endswith("']"):
        keygenomes.append(keyline[2:-2]) 
```

# java - s:url（在 Struts2 中）是否不会像 c:url 那样进行 url 重写，以防 cookie 被禁用？

> ID：10015014
> 
> 赞同：1
> 
> 时间：2012-04-04T16:06:04.390
> 
> 标签：java, jsp, struts2, jstl

如果 cookie 被禁用，**Servlet API**将求助于 URL 重写。我们在 JSP 中提供的每个 URL 都必须在其中`c:url`才能生效。但是，在**Struts 2**中，有一个等效的 tag `s:url`，但它的文档没有说明自动将 url 重写信息（如果需要）添加到 url。它在这方面的行为是否与 Struts 2 中的类似`c:url`，或者我们是否有其他方法可以在 Struts 2 中实现相同的效果？

我正在使用[此处的 Struts 2.1 url 标签参考](http://struts.apache.org/2.1.6/docs/url.html)

**澄清**：如果用户禁用 cookie，另一个选项是将 附加`jseesionid`到页面上的每个 url。`c:url`为我们处理。我的问题是，是否`s:url`对我们做同样的事情。我很担心，因为我在上面提供的文档链接中没有提到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T06:03:32.997

是的，struts2 也会这样做。只需禁用 cookie，您应该会看到会话 id 被放入 url（使用 s:a 标签时，我没有测试 url 标签）。很高兴您添加了说明，因为这是 url 写作。url 重写是在 url 进入服务器时完成的，然后它们通常被某些规则重写，因此它们被定向到服务器内的正确位置（这根本不是这里发生的事情）。

**编辑**：感谢 Daud，正确的术语是 url-rewiting。这是因为会话管理由容器级别处理，尽管 struts2 可以操纵会话包含的内容，但它是容器通过“会话管理器”对象提供会话并确定如何最好地管理持久性（包括生成 jSession Id） .

有关**glassfish**的详细信息：http : [//docs.oracle.com/cd/E18930_01/html/821-2418/beaha.html#beahf](http://docs.oracle.com/cd/E18930_01/html/821-2418/beaha.html#beahf)

有关**tomcat**的详细信息：http : [//tomcat.apache.org/tomcat-7.0-doc/config/manager.html#Disable_Session_Persistence](http://tomcat.apache.org/tomcat-7.0-doc/config/manager.html#Disable_Session_Persistence)

对于其他容器只需谷歌：Container_Name +“会话管理器”

# javascript - JQuery UI 自动完成 - 无法加载对象

> ID：10015022
> 
> 赞同：1
> 
> 时间：2012-04-04T16:06:30.927
> 
> 标签：javascript, jquery, arrays, object, autocomplete

我正在尝试让自动完成功能与 JQuery UI 一起使用，但是当我尝试传入标签和值对象时遇到了麻烦。

```
 var people = [];
        var test = new Array();
        var obj = jQuery.parseJSON(data);
        $.each(obj.data, function(i,person){
                people[people.length] = {
                        label: person.id,
                        value: person.name
                };
                test.push(person.name);
        });

        $("#friend").autocomplete({
                source: test,
                select: function(event, ui) {
                    alert(ui.item.id);
                }
        }); 
```

当我使用“测试”数组时，它工作正常，但是当我尝试使用 people 对象时，似乎没有任何工作，也没有 JS 错误。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T17:01:02.600

您正在向后加载人员对象。自动完成适用于`label`，而不是`value`，因此您将自动完成您的 id 而不是名称。

`label`将是自动完成用于匹配的文本，并且`value`是您选择它时返回的内容。

只需反转它们，它就会起作用：

```
 people[people.length] = {
     label: person.name,
     value: person.id
 }; 
```

演示：http: [//jsfiddle.net/qmmms/1/](http://jsfiddle.net/qmmms/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T16:45:52.623

尝试：

```
people.push({value:person.id,label:person.name}); 
```

像这样：

```
var people = []; 
var obj = {data:[{id:1,name:"Adam"},{id:2,name:"Eve"}]};
$.each(obj.data, function(i,person){ 
        people.push( { 
                label: person.name, 
                value: person.id 
        }); 
}); 
$("#friend").autocomplete({ 
        source: people, 
        select: function(event, ui) { 
            alert(ui.item.name); 
        } 
}); 
```

# scala - 我的回答为空

> ID：10015026
> 
> 赞同：1
> 
> 时间：2012-04-04T16:06:43.390
> 
> 标签：scala

我正在执行以下代码：

```
def takeN(s : String, n : Int): String = {
    var j = 1
    var o = s.split("")
    if(n != 0){
      var arr = new Array[Char](n)
    }
    while(j <= n){
      arr(j) = o(j)
      j += 1
    }
    val ml = List.fromArray(arr)
    var newS = ml.mkString("")
    newS
  } 
```

当我用这个 takeN("abcd",2) 测试这段代码时，我得到的答案是：

```
nullab 
```

当我在以下位置运行此代码时：[http](http://www.simplyscala.com/) ://www.simplyscala.com/一切正常，但是当我在家用电脑上尝试时出现错误，因此我将其更改为：

```
 def takeN(s : String, n : Int): String = {
    var j = 1
    var o = s.split("")
    var arr = new Array[Char](n)
    while(j <= n){
      arr(j) = o(j)
      j += 1
    }
    val ml = List.fromArray(arr)
    var newS = ml.mkString("")
    newS
  } 
```

然后我得到这个错误：

```
error: type mismatch;
 found   : java.lang.String
 required: Char
             arr(j) = o(j) 
```

我不知道如何解决这个问题。为什么scala这么难？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T16:08:45.543

您发布的代码不是非常惯用的 Scala，但该语言内置了以下功能：

```
scala> "abcd".take(2)
res0: String = ab 
```

如果你真的想要一个具有该签名的方法，你可以这样做：

```
def takeN(s: String, n: Int) = 
  s.take(n) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T16:25:37.253

您可以在没有所有 val 和 var 的情况下编写递归答案。大多数代码是为了防止无效输入：

```
def takeN (s : String, n : Int): String = {
  if (n > s.length) sys.error ("n > s.length: " + n  + " > " + (s.length))
  else if (n < 0) sys.error ("n < 0 : " + n)
  else if (n == 0) ""
  else if (n == s.length) s 
  else s(0) + takeN (s.substring (1), n-1) } 
```

一个较短的解决方案（但没有保护）是：

```
def takeN (s : String, n: Int): String =
   (0 to n-1).map (s(_)).mkString 
```

用法：

```
takeN ("foolish", 5)
res16: String = fooli 
```

但是，让我们尝试一个更接近您的方法的解决方案：

```
 def takeN (s: String, n: Int): String = {
    var j = 0
    var arr = new Array[Char](n)
    while (j < n) {
      arr (j) = s(j)
      j += 1
    }
    val ml = List.fromArray (arr)
    var newS = ml.mkString("")
    newS
  } 
```

字符串索引（如在 Java 中）从 0 开始，因此我们转到 j < n，而不是 j <= n 并且从 0，而不是 1。我们不需要 'o'（带有可疑的拆分 (""），因为我们也可以使用 s(j) 代替。

下一步，去掉中间的List：

```
 def takeN (s: String, n: Int): String = {
    var j = 0
    var arr = new Array[Char](n)
    while (j < n) {
      arr (j) = s(j)
      j += 1
    }
    arr.mkString 
  } 
```

我们简化了回报。现在让我们使用 for 循环，而不是 while：

```
 def takeN (s: String, n: Int): String = {
    val arr = for (j <- (0 to n-1)) yield s(j)
    arr.mkString 
  } 
```

要不就

```
 def takeN (s: String, n: Int): String =
    (for (j <- (0 to n-1)) yield s(j)).mkString 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T16:09:47.680

问题是数组从索引 0 开始。这`null`只是数组元素的初始值。

一个更简单的替代方法是使用标准的 Scala API：

```
scala> "abcd".take(2)
res0: String = ab 
```

# javascript - Javascript toFixed 不舍入

> ID：10015027
> 
> 赞同：75
> 
> 时间：2012-04-04T16:06:44.437
> 
> 标签：javascript

我正在使用 javascript 绑定到一些复选框，并且`toFixed(2)`没有四舍五入。任何想法为什么它不四舍五入？例如，如果数字是`859.385`它只显示`859.38`而不是`859.39`.

我还读到，`toFixed`可以根据您使用的浏览器进行不同的舍入，任何人都知道解决这个问题的方法，以便我的 javascript 计算与我的 php 计算相匹配？

```
var standardprice = parseFloat($('#hsprice_'+this.id.split('_')[1]).val());
var price =  parseFloat($('#hprice_'+this.id.split('_')[1]).val());
var discount =  parseFloat($('#hdiscount_'+this.id.split('_')[1]).val());
var deposit =  parseFloat($('#hdeposit_'+this.id.split('_')[1]).val());

var currSprice = parseFloat($('#hTotalSprice').val());
var currPrice = parseFloat($('#hTotalPrice').val());
var currDiscount = parseFloat($('#hTotalDiscount').val());
var currDeposit = parseFloat($('#hTotalDeposit').val());

currSprice += standardprice;
currPrice += price;
currDiscount += discount;
currDeposit += deposit;

$('#lblTotalSprice').text('$'+addCommas(currSprice.toFixed(2)));
$('#lblTotalPrice').text('$'+addCommas(currPrice.toFixed(2)));
$('#lblTotalDiscount').text('$'+addCommas(currDiscount.toFixed(2)));
$('#lblTotalDeposit').text('$'+addCommas(currDeposit.toFixed(2)));

$('#hTotalSprice').val(currSprice.toFixed(2));
$('#hTotalPrice').val(currPrice.toFixed(2));
$('#hTotalDiscount').val(currDiscount.toFixed(2));
$('#hTotalDeposit').val(currDeposit.toFixed(2)); 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2014-05-09T09:01:52.050

> 我还没有找到一个 toFixed10 出错的数字。其他人可以吗？

感谢[他的回答](https://stackoverflow.com/a/23204425/1532548)`blg`，让我想到了 Mozilla 的[toFixed10()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/round$revision/1383484)方法。

使用它我想出了这个简短的一个班轮，它确实涵盖了这里提到的所有案例......

```
function toFixed( num, precision ) {
    return (+(Math.round(+(num + 'e' + precision)) + 'e' + -precision)).toFixed(precision);
} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-09-16T09:45:19.110

我将此作为最佳舍入函数用于所有财务数据。您可以对所有有问题的数字进行测试。Javascript 允许某种精度，所以我用它来使几乎每个数字都按预期四舍五入。

```
function roundTo(n, digits) {
        if (digits === undefined) {
            digits = 0;
        }

        var multiplicator = Math.pow(10, digits);
        n = parseFloat((n * multiplicator).toFixed(11));
        return Math.round(n) / multiplicator;
    } 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-04-04T16:31:09.920

在 Chrome 中，`toFixed()`回合：

```
859.385 ==> 859.38
859.386 ==> 859.39 
```

当我查看[ECMAScript 第 5 版规范`.toFixed()`](http://www.ecmascript.org/docs/tc39-2009-043.pdf)（第 15.7.4.5 节）时，我没有看到它明确描述了舍入，尽管它确实描述了一些相当模糊的东西，这可能是 Chrome 已经实现的。

在我看来，如果您想通过显式舍入来控制它，那么您可能应该使用经常建议的解决方法：

```
var roundedNum = (Math.round( num * 100 ) / 100).toFixed(2); 
```

这将保证您像以前一样获得可预测的舍入。

在这里工作演示：http: [//jsfiddle.net/jfriend00/kvpgE/](http://jsfiddle.net/jfriend00/kvpgE/)

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2017-05-16T09:58:41.670

由于在 javascripts 的 toFixed-function 中，浮点数`5`不属于整数的上半部分，如果你有这样的数字，给定的数字会向下舍入：

`859.385.toFixed(2) // results in 859.38`

事实上，您可以像这里一样附加尾随浮点数（零除外）：

`859.3851.toFixed(2) // results in 859.39`

因此，开发人员倾向于添加数字`0.00000000001`，以便适当地四舍五入并且不会意外更改数字的值。

所以我想出了一个函数，它根据您希望固定浮点数的位数来添加这样的数字：

```
 // both parameters can be string or number
    function toFixed(number, decimals) {
        var x = Math.pow(10, Number(decimals) + 1);
        return (Number(number) + (1 / x)).toFixed(decimals)
    }
    toFixed(859.385, 2) //results in 859.39 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-04-21T19:26:58.160

与 35.855 一起尝试的另一个好数字是 1.005

我认为 Robert Messerle 的解决方案不能处理 1.005

此处的舍入小数示例[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/round](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/round) $revision/1383484#Decimal_rounding 将数字转换为指数表示法，似乎得到了更好的结果。

我在这里创建了一个小提琴[http://jsfiddle.net/cCX5y/2/](http://jsfiddle.net/cCX5y/2/)，它演示了上面的本地 Robert Messerle 示例（称为`toFixedB`）和来自 Mozilla 文档的示例（称为`toFixed10`）。

我还没有找到一个 toFixed10 出错的数字。其他人可以吗？

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-04-04T16:21:10.503

```
function roundup(num,dec){
    dec= dec || 0;
    var  s=String(num);
    if(num%1)s= s.replace(/5$/, '6');
    return Number((+s).toFixed(dec));
 }

 var n= 35.855
 roundup(n,2) 
```

/* 返回值：（数字）35.86 */

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2019-01-26T15:01:29.553

`toFixed()` works correctly! The problem is, that 859.385 has no representation as float at a computer. It is scanned as nearest possible value = 859.384999999999991\. And rounding this value to 2 digits is 859.38 and not 859.39.

This is the reasons, that many programming languages (especially old for commerce, e.g. COBOL) support BCD numbers (binary coded decimals), where each digit is coded by itself into 4 bits (like hex without using A-F).

A general solution for prices: Calculate in cent/penny and print NUMBER/100.

A note to other solutions (functions provided here): They may help for some numbers, but mostly fail for e.g. 859.38499999.

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2019-12-10T13:48:08.067

`toFixed`从来没有*四舍五入*，也不是为了它。

它几乎不会将浮点数（指数、尾数）转换为定点数（整数、小数）（参见[定义](https://www.ecma-international.org/ecma-262/6.0/#sec-number.prototype.tofixed)）。

执行此操作时，它可能看起来好像是四舍五入，因为*四舍五入*的数字是最接近原始浮点表示的近似值。

可悲的是，它被广泛传播，`toFixed`可用于四舍五入……不，它不能，即使顾名思义也与它无关。

如果您需要四舍五入加上`toFixed`填充：

```
function round(num, precision) {
  var base = 10 ** precision;
  return (Math.round(num * base) / base).toFixed(precision);
} 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2012-04-04T16:13:57.400

您可以使用 对`Math.round()`数字进行四舍五入。如果你想四舍五入到一个特定的小数点，你可以使用一些数学：

```
var result=Math.round(original*100)/100 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2018-01-20T13:12:50.667

如果您希望得到**一个数字作为输出**，那么请考虑`Math.round()`其他答案中的技术。

但是，如果您想获得**一个字符串作为输出，以呈现给人类**，那么通常[`n.toLocaleString()`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number/toLocaleString)比`n.toFixed()`.

为什么？因为它还会在人类用来阅读的大量数字的头部添加逗号或句点。例如：

```
var n = 1859.385

n.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})

// Produces  1,859.39  in USA (locale en-US)
// Produces  1 859,39  in France (locale fr-FR)
// Produces  1.859,39  in Germany (locale de-DE) 
```

规范说，当`undefined`作为第一个参数传递时，将使用用户自己的语言环境（由操作系统指定）。不幸的是，正如链接文档所示，Mozilla 在这种情况下使用 en-US 语言环境，但它可能会在未来符合规范。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2015-02-23T16:00:40.553

我今天遇到了同样的问题，甚至在其他答案中尝试了建议，我发现我仍然没有收到我预期的结果。最后，当我遇到这个问题时，我正在为我当前的项目使用 AngularJS，我想我检查一下 AngularJS 之前是否已经解决了同样的问题，并且确实他们已经解决了。这是他们使用的解决方案，它非常适合我：

```
function toFixed(number, fractionSize) {
    return +(Math.round(+(number.toString() + 'e' + fractionSize)).toString() + 'e' + -fractionSize);
} 
```

在这里找到：[AngularJS filters.js 源](https://github.com/angular/angular.js/blob/master/src/ng/filter/filters.js#L179)

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2014-01-13T05:28:32.180

我偶然发现了这个奇怪`Number.toFixed`的行为。我看到本机功能不可靠，这是不幸的。出于好奇查看答案，我发现他们中的大多数人在数字上表现不佳，`35.855`因为 TJ Crowder 慷慨地评论了每个答案。

也许这会回答你的问题。

```
function toFixed(n,precision) {
    var match=RegExp("(\\d+\\.\\d{1,"+precision+"})(\\d)?").exec(n);
    if(match===null||match[2]===undefined) {
        return n.toFixed(precision);
        }
    if(match[2]>=5) {
        return (Number(match[1])+Math.pow(10,-precision)).toFixed(precision);
        }
    return match[1];
    } 
```

正则表达式将您的数字拆分为字符串数组，例如 in `toFixed(35.855,2)`: `["35.855", "35.85", "5"]`。如果最后一个数字（在精确截止之后）是`>=5`，则添加`Math.pow(10, -precision)`到修剪后的数字。如果您在小数点后 2、3 等处`.01`截断，这将增加。`.002`

我不知道这是否万无一失，因为它仍然在浮点数上执行十进制数学，这可能是不可预测的。我可以说它`35.855`四舍五入`35.86`。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2019-01-17T11:21:18.527

我知道这是一个老问题，但为什么不做这样的事情：

```
let TruncatedValueInString = ThenNumberYouWantToTruncate.toFixed(decPlaces + 1).slice(0, -1); 
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2018-01-23T01:47:03.123

Joy twindle answer here应该是最好的答案，而不是这么多的hack。

```
 x = 1859.385;
   x = x.toFixed(2);
   alert(x); 
```

给出错误的四舍五入，即 1859.38 而不是 1859.39

```
 x = 1859.385;
 x = x.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
 alert(x); 
```

给出正确的四舍五入 1,859.39

唯一的问题是返回的结果是带有千位逗号分隔符的字符串，因此不能用于计算。使用我从堆栈溢出中获得的正则表达式来删除逗号，最终结果是

```
 x = 1859.385;
 x = x.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
 x=x.replace(/\,/g,'');
 alert(x); 
```

现在返回 1859.39 并可用于计算。正则表达式之前的值即 1,859.39 可用于 html 显示，而未格式化的值 1859.39 可用于计算。

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2021-02-06T11:31:32.443

### 注意：您可能只需要这个 .toFixed() 解决方案来处理非常大的数字

### 其他发布的解决方案适用于标准数字（低于 1e21）

如果您想**处理非常大的数字和非常小的分数**，并且`toFixed`具有正确的舍入且不损失准确性，并且不必使用库并且具有自包含功能，一种可能的有效解决方案是使用`BigInt`以避免损失准确性由于内部 javascript 舍入。

下面的函数就是这样做的`toFixed(number, [digits])`。

只需将大数字作为具有所需四舍五入位数的字符串传递即可。数字将被正确四舍五入。

这个概念是将数字分成整数部分和小数部分的常用方法，但用于`BigInt()`保存这两个部分。此后，在不使用任何 javascript 或数字函数的情况下，根据需要对正数和负数进行舍入和处理，`Math`以避免损失准确性。

作为非常特殊情况的奖励，其中数字采用非常大的“e”符号，我添加了`eToNumber()`我在此处发布的函数：[https](https://stackoverflow.com/a/66072001/11606728) ://stackoverflow.com/a/66072001/11606728将其作为内联过程执行. 如果您想维护短代码并且不关心这些数字，这可能会被删除。[代码中提供了注释以将其删除]。

我已经包含了各种测试用例来测试不同的可能性（其中一些有点奇怪，但确实会发生）。

这个想法可以进一步改进。

希望它是有用的。

```
/****************************************************************************
* @function    : toFixed(number, [digits])
* @purpose     : Emulate toFixed() for large numbers and
                 large fractional numbers with correct rounding
                 by using the BigInt() built-in Object.
* @version     : 1.01
* @author      : Mohsen Alyafei
* @date        : 03 February 2021
* @param       : {number} [numeric or string] pass large numbers as a string
* @param       : {number} [optional digits]
*              : The number of digits to appear after the decimal point;
*              : this may be a value from 0 and above unlimited.
*              : If this argument is omitted or is negative, it is treated as 0.
*              : Handles large 'e' notation number using the eToNumber() function.digits
*              : See https://stackoverflow.com/a/66072001/11606728
* @returns     : A string representing the given number using fixed-point notation.
****************************************************************************/

function toFixed(num,digits) {
    if (!num && num!==0) return "Cannot read property of null or undefined"; // Can change it to throw Error
    digits<0 && (digits=0);
    digits=digits||0;
    num=eToNumber(num); // Delete this line and function below if larage 'e' notation number are not required
    let wh = (num+="").split((.1).toLocaleString().substr(1,1)), f = wh[1];
    wh = wh[0];
    let fr = (f=f||"0").substr(0,digits), fn = BigInt(fr), w = BigInt(wh), fl = (""+fn).length,
        lZeros = fr.length-fl, minus = wh[0]=="-", inc = (wh<0 || minus) ? BigInt(-1):BigInt(1);
    f[digits]>=5 && (fn+=BigInt(1));
    (fn+="").length > fl && (lZeros-=1);
    lZeros >=0 ? lZeros="0".repeat(lZeros):(fn=fn.substring(1), lZeros="",
               (fn ? w +=inc : ((f[digits]>=5) && (w+=inc))));
    fn = lZeros + fn; L = digits-fn.length;
    L && (fn+="0".repeat(L)); w==0 && minus && (w="-"+w);
    return w+(fn?".":"")+fn;
    }

    //---------------------- Extra Function if needed --------------------------------
    // Delete this function if large 'e' notation number are not required
    // Convert very large 'e' numbers to plain string numbers.
    //--------------------------------------------------------------------------------
    function eToNumber(num) {
        let sign="";
        (num+="").charAt(0)=="-" && (num=num.substring(1),sign ="-");
        let arr = num.split(/[e]/ig); if (arr.length<2) return sign+num;
        let dot=(.1).toLocaleString().substr(1,1), n = arr[0], exp = +arr[1];
        let w = (n=n.replace(/^0+/,'')).replace(dot,''),
          pos = n.split(dot)[1]? n.indexOf(dot)+exp : w.length+exp,
            L = pos-w.length,s=""+BigInt(w);
         w = exp>=0 ? (L>=0 ? s+"0".repeat(L):r()): (pos<=0 ? "0"+dot+"0".repeat(Math.abs(pos))+s:r());
        if (!+w) w=0; return sign+w;
        function r(){return w.replace(new RegExp(`^(.{${pos}})(.)`),`$1${dot}$2`)}}

//================================================
//             Test Cases
//================================================
let r=0; // test tracker
r |= test(35.855,2,"35.86");
r |= test(12.00000015,2,"12.00");
r |= test(35.855,5,"35.85500");
r |= test(35.855,4,"35.8550");
r |= test(1.135,2,"1.14");
r |= test(1.135,3,"1.135");
r |= test(1.135,4,"1.1350");
r |= test(1.135,8,"1.13500000");
r |= test(0.1545,3,"0.155");
r |= test(89.684449,2,"89.68");
r |= test("0.0000001",2,"0.00");
r |= test("0.9993360575508052",3,"0.999");
r |= test("0.999336057550805244545454545",29,"0.99933605755080524454545454500");
r |= test("1.0020739645577939",3,"1.002");
r |= test(0.999,0,"1");
r |= test(0.999,1,"1.0");
r |= test(0.999,2,"1.00");
r |= test(0.975,0,"1");
r |= test(0.975,1,"1.0");
r |= test(0.975,2,"0.98");
r |= test(2.145,2,"2.15");
r |= test(2.135,2,"2.14");
r |= test(2.34,1,"2.3");
r |= test(2.35,1,"2.4");
r |= test("0.0000001",2,"0.00");
r |= test("0.0000001",7,"0.0000001");
r |= test("0.0000001",8,"0.00000010");
r |= test("0.00000015",2,"0.00");
if (r==0) console.log("Tests 01\. Standard fractional numbers passed");
//================================================
r=0; // test tracker
r |= test("1234567890123456789444.99",5,"1234567890123456789444.99000");
r |= test("1234567890123456789444.1445",3,"1234567890123456789444.145");
r |= test("1234567890123456789444.14451445144514451745",19,"1234567890123456789444.1445144514451445175");
if (r==0) console.log("Tests 02\. Large fractional numbers passed");
//================================================
r=0; // test tracker
r |= test(100,2,"100.00");
r |= test(0,5,"0.00000");
if (r==0) console.log("Tests 03\. Non-fractional numbers passed");
//================================================
r=0; // test tracker
r |= test(12345.6789,null,"12346");
r |= test(2.1234,null,"2");
r |= test(12345.6789,undefined,"12346");
r |= test(2.1234,undefined,"2");
r |= test(12345.6789,"","12346");
r |= test(0.1234,"","0");
r |= test(2.1234,"","2");
if (r==0) console.log("Tests 04\. Undefined, Null, and Empty Digits passed");
//================================================
r=0; // test tracker
r |= test(1.1155,2,"1.12");
r |= test(1.255,2,"1.26");
r |= test(1.265,2,"1.27");
r |= test(1.275,2,"1.28");
r |= test(1.285,2,"1.29");
r |= test(1.295,2,"1.30");
r |= test(2.05,1,"2.1");
r |= test(2.15,1,"2.2");
r |= test(2.55,1,"2.6");
r |= test(2.65,1,"2.7");
r |= test(2.215,2,"2.22");
r |= test(2.315,2,"2.32");
r |= test(2.715,2,"2.72");
r |= test(2.815,2,"2.82");
r |= test(2.005,2,"2.01");
r |= test(2.105,2,"2.11");
r |= test(2.405,2,"2.41");
r |= test(2.505,2,"2.51");
r |= test(2.605,2,"2.61");
r |= test(2.905,2,"2.91");
r |= test(0.00155,4,"0.0016");
r |= test(2.55,1,"2.6");
r |= test(-2.35,1,"-2.4");
if (r==0) console.log("Tests 05\. Correct rounding passed");
//================================================
r=0; // test tracker
r |= test(-1.125,2,"-1.13");
r |= test(-1.15,1,"-1.2");
r |= test(-1.15,1,"-1.2");
r |= test(-1.45,1,"-1.5");
r |= test(-1.65,1,"-1.7");
r |= test(-1.95,1,"-2.0");
r |= test(-2.34,1,"-2.3");
r |= test("-0.024641163062896567",3,"-0.025");
r |= test("-0.024641163062896567",16,"-0.0246411630628966");
r |= test("0.024641163062896567",16, "0.0246411630628966");
r |= test("-0.0246411630628965",16,"-0.0246411630628965");
if (r==0) console.log("Tests 06\. Negative numbers rounding passed");
//================================================
r=0; // test tracker
r |= test(.135,2,"0.14");    // without whole part
r |= test(-.135,2,"-0.14");
r |= test("+35.855",2,"35.86");
r |= test("0.0",2,"0.00");
r |= test("-0",2,"-0.00");       //minus 0
r |= test("-0.0",5,"-0.00000");  // minus 0
r |= test("",5,"Cannot read property of null or undefined");        // empty string
r |= test(null,5,"Cannot read property of null or undefined");      //null
r |= test(undefined,5,"Cannot read property of null or undefined"); // undefined
if (r==0) console.log("Tests 07\. Special test cases passed");
//================================================
r=0; // test tracker
r |= test(1.1234e1,2,"11.23");      //11.234
r |= test(1.12e2,2,"112.00");       //112
r |= test(-1.1234e2,2,"-112.34");   // -112.34
r |= test(-1.1234e2,4,"-112.3400"); // -112.34
r |= test(-1.1235e2,2,"-112.35");   // -112.35
r |= test(-1.1235e2,1,"-112.4");    // -112.4
if (r==0) console.log("Tests 08\. Standard e notation numbers passed");
//================================================

r=0; // test tracker
r |= test("123456789123456789.111122223333444455556666777788889999e+10",16,"1234567891234567891111222233.3344445555666678");
r |= test("1.1235678944556677e2",20,"112.35678944556677000000");
r |= test("99.1235678944556677e2",20,"9912.35678944556677000000");
if (r==0) console.log("Tests 09\. Large e notation numbers passed");
//================================================

if (r==0) console.log(`${"-".repeat(22)}\nAll Test Cases Passed.\n${"-".repeat(22)}`);

//================================================
//             Test function
//================================================
function test(n1,n2,should) {
let result = toFixed(n1,n2);
if (result !== should) {console.log(`Output   : ${result}\nShould be: ${should}`);return 1;}
}
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2013-11-06T04:36:01.677

这可能会有所帮助

```
 tofix2Decimals=function(float){
        if(parseInt(float)==float)return float.toFixed(2);
        $decimals=/\.(\d+)/.exec(float)[1].length;
        $decimals=$decimals>=2?$decimals+1:3;
        float+=Math.pow(10,-$decimals);
        return float.toFixed(2);
    } 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2014-03-18T10:48:54.937

这是由于 JavaScript 的浮点表示而发生的。

尝试这个：

```
Number.prototype.round = function(digits) {
    digits = Math.floor(digits);
    if (isNaN(digits) || digits === 0) {
        return Math.round(this);
    }
    if (digits < 0 || digits > 16) {
        throw 'RangeError: Number.round() digits argument must be between 0 and 16';
    }
    var multiplicator = Math.pow(10, digits);
    return Math.round(this * multiplicator) / multiplicator;
}

Number.prototype.fixed = function(digits) {
    digits = Math.floor(digits);
    if (isNaN(digits) || digits === 0) {
        return Math.round(this).toString();
    }
    var parts = this.round(digits).toString().split('.');
    var fraction = parts.length === 1 ? '' : parts[1];
    if (digits > fraction.length) {
        fraction += new Array(digits - fraction.length + 1).join('0');
    }
    return parts[0] + '.' + fraction;
} 
```

用法：

```
var n = 859.385;
console.log(n.round(2)); // 859.39
console.log(n.fixed(2)); // 859.39
console.log(n.round(4)); // 859.385
console.log(n.fixed(4)); // 859.3850 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2020-10-16T05:36:20.090

我想要简洁准确的东西，同时兼具可读性和速度。在阅读了这个问题的所有答案，以及[在类似问题中这个特别有用的答案之后](https://stackoverflow.com/a/48764436/25197)，这就是我的解决方案。

```
const round = (numberToRound, digits = 0, toFixed = false) => {
  const precision = 10 ** digits;
  const n = numberToRound * precision * (1 + Number.EPSILON);
  const roundedNumber = Math.round(n) / precision;
  return toFixed ? roundedNumber.toFixed(digits) : roundedNumber;
};

// rounding by half
console.log(round(0.5));
console.log(round(-0.5));

// fixed decimals
console.log(round(0.5, 2), '( Type:',typeof round(0.5, 2), ')');
console.log(round(0.5, 2, true), '( Type:',typeof round(0.5, 2, true), ')');
console.log(round(-0.5, 2), '( Type:',typeof round(-0.5, 2), ')');
console.log(round(-0.5, 2, true), '( Type:',typeof round(-0.5, 2, true), ')');

// edge cases
console.log(round(1.005, 2) === 1.01);
console.log(round(-1.005, 2) === -1.01);
console.log(round(39.425, 2) === 39.43);
console.log(round(-39.425, 2) === -39.43);
console.log(round(1234.00000254495, 10) === 1234.000002545);
console.log(round(-1234.00000254495, 10) === -1234.0000025449);

// edge cases from other answer's comments.
console.log(round(859.385, 2));
console.log(round(859.3844, 2));
console.log(round(0.000000015, 8))
console.log(round(35.855, 2));
```

我不喜欢`toFixed`作为布尔参数，但它现在有效。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2020-02-06T15:26:24.260

我从[林伟丽那里得到了正确的解决方案](https://wiki.developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/round$revision/1383484)

```
function round(number, precision) {
  var shift = function (number, exponent) {
    var numArray = ("" + number).split("e");
    return +(numArray[0] + "e" + (numArray[1] ? (+numArray[1] + exponent) : exponent));
  };
  return shift(Math.round(shift(number, +precision)), -precision);
} 
```

测试结果

```
round(1.050, 1); // expected 1.1 , result 1.1  (correct)
round(1.005, 2); // expected 1.01, result 1.01 (correct)

round(3456.3456,  3); // 3456.346
round(3456.3456,  2); // 3456.35
round(3456.3456,  1); // 3456.3
round(3456.3456,  0); // 3456
round(3456.3456, -1); // 3460
round(3456.3456, -2); // 3500
round(3456.3456, -3); // 3000

round(undefined, 1        ); // NaN
round(null     , 1        ); // NaN
round("a"      , 1        ); // NaN
round(1        , null     ); // NaN
round(1        , undefined); // NaN
round(1        , "a"      ); // NaN 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2020-10-26T11:09:19.350

```
function toFixed(num, decimals) {
    return (Math.round((num + Number.EPSILON) * Math.pow(10, decimals)) / Math.pow(10, decimals)).toFixed(decimals)
} 
```

我在这里找到了一个有效的答案->[最多四舍五入到小数点后 2 位（仅在必要时）](https://stackoverflow.com/a/11832950)

```
Math.round((num + Number.EPSILON) * 100) / 100 
```

您必须添加`Number.EPSILON`到四舍五入的数字。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-05-20T10:47:36.240

这对我有用 - “hackish”

```
function customTofix(value, precision) {
    let decimalVal = 0;

    if (value !== null) {
        let appendValue = (((value - Math.floor(value)) !== 0) ? (precision <= (value.toString().split(".")[1].length || 0)) ? '1' : '' : '');
        decimalVal = parseFloat(value.toString() + appendValue).toFixed(precision)
    }

    return decimalVal
} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-11-10T07:31:37.583

这是我的解决方案，包括 3 个功能。

1.  **正确的四舍五入。**
2.  **仅以数字显示。**（防止科学记数法）
3.  **删除尾随零。**

我将@user2823670 的[答案](https://stackoverflow.com/a/23560569/4729203)和[这个](https://stackoverflow.com/a/61281355/4729203)结合在一起。

```
var roundUp = function(num, precision) {
    // Return '' if num is empty string
    if (typeof num === 'string' && !num) return '';

    // Remove exponential notation
    num = toPlainString(num);

    // Fixed round up
    var result = +((+(Math.round(+(num + 'e' + precision)) + 'e' + -precision)).toFixed(precision));

    // Remove exponential notation (once again)
    result = toPlainString(result);

    return result;
};

var toPlainString = function(num) {
    return ('' + num).replace(/(-?)(\d*)\.?(\d+)e([+-]\d+)/,
        function(a, b, c, d, e) {
            return e < 0
                ? b + '0.' + Array(1 - e - c.length).join(0) + c + d
                : b + c + d + Array(e - d.length + 1).join(0);
        }
    );
} 
```

# javascript - 将 asp.net 变量传递给 javascript 失败

> ID：10015030
> 
> 赞同：0
> 
> 时间：2012-04-04T16:06:51.317
> 
> 标签：javascript, asp.net

我打算将一个变量从 asp.net 服务器传递给 javascript，但我遇到了一个异常。

> 当前上下文中不存在名称“序列化程序”在我的 Admin.aspx.cs

```
 protected static string urlEdit;
    protected void Page_Load(object sender, EventArgs e)
    {
        // blah blah...
        var serializer = new System.Web.Script.Serialization.JavaScriptSerializer();
    } 
```

然后在标记代码中：

```
<script type="text/javascript">
            function Edit_Click() {
                var options = SP.UI.$create_DialogOptions();

                options.url = <%= serializer.Serialize(urlEdit) %>;

                              }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:08:41.283

尝试将其用引号括起来，以便 javascript 将其视为字符串...

```
options.url = '<%= serializer.Serialize(urlEdit) %>'; 
```

* * *

您的代码将呈现...

```
options.url = site.com/url;//invalid javascript 
```

我的会在哪里渲染...

```
options.url = 'site.com/url';//valid javascript 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T16:29:46.520

`serializer`仅存在于`Page_Load`. 为什么不创建返回序列化值的公共方法或属性，而不是从您的标记中访问序列化程序？

```
protected static string urlEdit;
protected void Page_Load(object sender, EventArgs e)
{
    // blah blah...
    var serializer = new System.Web.Script.Serialization.JavaScriptSerializer();
}

public string GetSerializedUrl()
{
    return serializer.Serialize(urlEdit);
} 
```

然后在您的标记中调用此方法：

```
options.url = "<%= GetSerializedUrl() %>"; 
```

**更新**

其实......你不需要序列化一个字符串来使用它的javascript。因此，您的代码可以简化为以下内容：

```
protected static string urlEdit = "www.example.com"; 
```

和简化的标记：

```
options.url = "<%= urlEdit  %>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T16:23:30.763

`serializer`仅存在于 Page_Load 函数中。为了让您的内联代码能够识别它，需要在类命名空间中声明它。

```
protected static string urlEdit;
protected var serializer = new System.Web.Script.Serialization.JavaScriptSerializer();
protected void Page_Load(object sender, EventArgs e)
{
} 
```

musefan 也是正确的，options.url 需要用引号括起来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T16:27:43.893

通常，使用此值将变量序列化到 javaScript 中

```
ClientScript.RegisterClientScriptBlock(this.GetType(), "variable", "<script language=javascript> var variableUrl='" + urlEdit+"' </script>"); 
```

注意这段代码应该在你页面的加载方法中

然后在你的脚本中，你可以像这样使用变量

```
 <script type="text/javascript">
        function Edit_Click() {
            var options = SP.UI.$create_DialogOptions();

            options.url = variableUrl;

                          }; 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-04T16:14:26.523

就个人而言，我发现使用隐藏字段来完成这项工作很容易。

IE

标记 (.aspx)

```
<asp:HiddenField ID="hiddenRequest" runat="server" ClientIDMode="Static" /> 
```

背后的代码 (.aspx.cs)

```
hiddenRequest.value = "Test!";
string test = (string)hiddenRequest.value; 
```

带有 jQ​​uery 的 Javascript（便于选择） (.js)

```
$('#hiddenRequest').val('Test!');
var test = $('#hiddenRequest').val(); 
```

# objective-c - setState 不更新复选框的视图

> ID：10015032
> 
> 赞同：1
> 
> 时间：2012-04-04T16:07:04.140
> 
> 标签：objective-c, macos, cocoa, nsbutton

我正在尝试创建一个首选项窗口。
在其中我有一些复选框样式的 NSButton。`setState:`问题是当我调用该方法时它们没有更新。我访问了`standarUserDefaults`何时初始化窗口以获取它们应该处于的状态，并计划根据该键所处的状态来更改它们。

我知道他们实际上连接到他们的 IBOutlet 和 IBAction，因为我已经尝试了一些 NSLog-ing 来确保这一点。

我读了一些关于*以编程方式更改模型属性的值的内容未反映在* [此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaBindings/Concepts/Troubleshooting.html#//apple_ref/doc/uid/TP40002148-182467 "这里")的用户界面中，但我不确定这是否是问题所在，或者坦率地说他们在那里指的是什么。

我在 .h 文件中声明了检查按钮，如下所示：

```
IBOutlet NSButton *defaultDateCheck;
IBOutlet NSButton *closeOnCreationCheck;
IBOutlet NSButton *allowEmptyNumberCheck;
IBOutlet NSPopUpButton *defaultJobSetting; 
```

init 方法如下所示：

```
-(id)initWithWindowNibName:(NSString *)windowNibName{

    self = [super initWithWindowNibName:windowNibName];

    if (self) {

        NSUserDefaults *myDefaults = [NSUserDefaults standardUserDefaults];

        [defaultDateCheck setState:[myDefaults boolForKey:@"useDefaultDate"]];

        [closeOnCreationCheck setState:[myDefaults boolForKey:@"closeOnCreation"]];

        [allowEmptyNumberCheck setState:[myDefaults boolForKey:@"allowEmptyProjectNumber"]];

        [defaultJobSetting selectItemAtIndex:[myDefaults integerForKey:@"defaultJob"]];
    }
    return self;
} 
```

我还尝试了以下格式来设置复选框，但没有结果：

```
if ([myDefaults integerForKey:@"useDefaultDate"] == YES) {
    [defaultDateCheck setState:NSOnState];
}
else {
    [defaultDateCheck setState:NSOffState];
} 
```

复选框的连接 IBAction 方法如下所示：

```
-(IBAction)toggleCloseOnCreation:(id)sender{
    [[NSUserDefaults standardUserDefaults] setBool:([closeOnCreationCheck state] == NSOnState) forKey:@"closeOnCreation"];
    [[NSUserDefaults standardUserDefaults] synchronize];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T16:09:30.533

在 -viewDidLoad 方法中设置状态，因为在 -init 中视图及其子视图尚不存在

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T08:28:29.050

设置默认使用的值时：

```
[myDefaults setObject:[NSNumber numberWithBool:YES] forKey:@"YourKey"]; 
```

检查值是真还是假时，请使用：

```
[[[NSUserDefaults standardUserDefaults] objectForKey:@"YourKey"] boolValue] 
```

# asp.net-mvc-3 - ASP.NET MVC 3 路由：阻止 ~/home 访问？

> ID：10015042
> 
> 赞同：7
> 
> 时间：2012-04-04T16:07:52.830
> 
> 标签：asp.net-mvc-3, seo, asp.net-mvc-routing

我可以使用 ~/ 映射到 Home 索引，以及 ~/Blog 映射到 Blog Index，但是我如何防止 ~/Home 映射到 Home 索引呢？我不希望从多个端点访问路由。

同样，如何防止从 ~/Controller 和 ~/Controller/Index 访问所有其他“索引”操作？

OK ~/
NO ~/Home
NO ~/Home/Index
OK ~/AnyOtherController
NO ~/AnyOtherController/Index

我想该规则应该类似于阻止任何默认操作显式访问，并且在 home 的情况下也阻止仅通过控制器访问它。

这可以做到吗？过去做过吗？SO 例如不这样做（您可以访问[here](https://stackoverflow.com/)或[there](https://stackoverflow.com/home)）并且都呈现主页；并且它们可能具有与“索引”不同的默认操作名称，这也可能是可访问的路线。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T16:19:21.603

您可以简单地声明不应将路由应用于与那里的模式匹配的 URL。例如：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.Ignore("Home/{*pathInfo}");
    routes.Ignore("{controller}/Index");
} 
```

然后，与这些路由匹配的 URL 将被视为裸页面，这当然不会存在。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T17:30:44.157

像这样实现它，以便将这些路由视为 404 错误，但仍在我的 MVC 应用程序中（以便发生自定义错误视图）：

```
 /// <summary>
    /// By not using .IgnoreRoute I avoid IIS taking over my custom error handling engine.
    /// </summary>
    internal static void RegisterRouteIgnores(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "IgnoreHome",
            "Home",
            new { controller = "Error", action = "NotFound" }
        );

        routes.MapRoute(
            "IgnoreIndex",
            "{controllerName}/Index/{*pathInfo}",
            new { controller = "Error", action = "NotFound" }
        ); 
```

这确实允许通过使用访问 Home/Index 操作`/home/{id}`，但我愿意接受。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T22:21:38.750

这就是我能够实现我认为你的要求的方式。

```
// Portal Sections
        routes.MapRoute("Home",
                        "",
                        new { controller = "Home", action = "Index" },
                        new[] { "Myapp.Portal.Controllers" });

        routes.MapRoute("About",
                        "about",
                        new { controller = "Home", action = "About" },
                        new[] { "Myapp.Portal.Controllers" });

        routes.MapRoute("Features",
                        "features",
                        new { controller = "Home", action = "Features" },
                        new[] { "Myapp.Portal.Controllers" });

        routes.MapRoute("Help",
                        "help",
                        new { controller = "Help", action = "Index" },
                        new[] { "Myapp.Portal.Controllers" });

        routes.MapRoute("Knowledgebase",
                        "help/kb",
                        new { controller = "Help", action = "Knowledgebase" },
                        new[] { "Myapp.Portal.Controllers" }); 
```

我可以访问

*   mysite.com
*   mysite.com/about
*   mysite.com/features
*   mysite.com/help
*   mysite.com/help/kb

但无法访问

*   mysite.com/home/about
*   mysite.com/home/features

希望这有帮助:)

# iphone - 如果我将模型中的属性类型从 NSString 更改为 NSDate，是否需要核心数据迁移

> ID：10015043
> 
> 赞同：1
> 
> 时间：2012-04-04T16:07:57.553
> 
> 标签：iphone, core-data, model, attributes, migration

我们在 App Store 中有一个应用程序，我想将模型中属性的类型从 NSString 更改为 NSDate。由于核心数据迁移只修改了持久存储（在我的例子中是一个 SQLite 数据库），我是否需要进行核心数据迁移，因为只有模型中的数据类型发生了变化。顺便说一句，我们的数据库是预先填充的，我们永远不必修改数据库中该属性的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T20:48:46.857

这可能有点晚了，但我用这个解决了！

[http://www.cocoabuilder.com/archive/cocoa/197476-custom-entity-migration-policies-atribute-from-nsstring-to-nsdate.html](http://www.cocoabuilder.com/archive/cocoa/197476-custom-entity-migration-policies-atribute-from-nsstring-to-nsdate.html)

# c# - 如何在没有强制转换的情况下从 Xml 中保存和获取值？

> ID：10015046
> 
> 赞同：1
> 
> 时间：2012-04-04T16:08:05.793
> 
> 标签：c#, xml, linq-to-xml, linq-to-xsd

我真正讨厌的是从 Xml 文件中转换每个元素或属性值。

此刻，我正在数百个模块中创建一个方法，其中指定如何将对象转换为 XmlFile。相信，这很累。所以我正在考虑另一种选择。

我正在调查 XSD，我不确定这是否会成为我的救赎。我正在使用 Linq to Xml 来保存和获取值。我的意思是，我的对象是这样组成的：

```
- Foo1 : Foo
   - Range1 : Range
      - X : int
      - Y : int
- ... 
```

如您所见，它们有许多节点。还有另一种选择吗？我的意思是，强类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:35:54.300

您可以尝试这些 XElement 扩展方法：[http ://searisen.com/xmllib/extensions.wiki](http://searisen.com/xmllib/extensions.wiki)

鉴于另一篇文章中的这个 xml，这是它的强大功能的一个示例：

```
<?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
  <PatchCreation
    Id="224C316C-5894-4771-BABF-21A3AC1F75FF"
    CleanWorkingFolder="yes"
    OutputPath="patch.pcp"
    WholeFilesOnly="yes">
    <PatchInformation
        Description="Update Patch"
        Comments="Update Patch"
        ShortNames="no"
        Languages="1033"
        Compressed="yes"
        Manufacturer="me"/>

    <PatchMetadata
        AllowRemoval="yes"
        Description="Update Patch"
        ManufacturerName="me"
        TargetProductName="Update"
        MoreInfoURL="http://andrewherrick.com/"
        Classification="Update"
        DisplayName="Update Patch"/>

    <Family DiskId="5000"
        MediaSrcProp="Sample"
        Name="Update"
        SequenceStart="5000">
      <UpgradeImage SourceFile="c:\new.msi" Id="PatchUpgrade">
        <TargetImage SourceFile="c:\old.msi" Order="2" Id="PatchUpgrade" IgnoreMissingFiles="no" />
      </UpgradeImage>
    </Family>

    <PatchSequence PatchFamily="SamplePatchFamily"
        Sequence="1.0.0.0"
        Supersede="yes" />
  </PatchCreation>
</Wix> 
```

这将设置 UpgradeImage 标记的 SourceFile 属性的值以及 UpgradeImage 及其 SourceFile 中的 TargetImage 标记。

```
XElement wix = XElement.Load(xmlFile1.FullName);
wix.Set("PatchCreation/Family/UpgradeImage/SourceFile", "upgrade path", true)
   .Set("TargetImage/SourceFile", "target path", true); 
```

您也可以以相同的方式获取它们的值（无强制转换）。

```
string upgradeSource = wix.Get("PatchCreation/Family/UpgradeImage/SourceFile", string.Empty);
string targetSource = wix.Get("PatchCreation/Family/UpgradeImage/TargetImage/SourceFile", string.Empty); 
```

或者这可以写成：

```
XElement upgradeImage = wix.GetElement("PatchCreation/Family/UpgradeImage");
string upgradeSource = upgradeImage.Get("SourceFile", string.Empty);
string targetSource = upgradeImage.Get("TargetImage/SourceFile", string.Empty); 
```

要获取整数列表：

```
<root>
 <path>
  <list>
    <value>1</value>
    <value>12</value>
    <value>13</value>
    <value>14</value>
    <value>15</value>
   </list>
  </path>
</root> 
```

使用 GetEnumerable() 方法：

```
List<int> list = root
    .GetEnumerable("path/list/value", xvalue => xvalue.Get(null, int.MinValue));
    .ToList(); 
```

要设置一个新的整数列表：

```
var list2 = new int[] { 1, 3, 4, 5, 6, 7, 8, 9, 0 };
root.SetEnumerable("path/list", list2, a => new XElement("value", a)); 
```

这导致了这个新的xml：

```
<root>
  <path>
    <list>
      <value>1</value>
      <value>3</value>
      <value>4</value>
      <value>5</value>
      <value>6</value>
      <value>7</value>
      <value>8</value>
      <value>9</value>
      <value>0</value>
    </list>
  </path>
</root> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T16:13:03.387

最好的选择是使用 XmlSerialization。因此，序列化为 XML，然后反序列化为对象，那么您就不必使用强制转换了。

有时 XML 是通过序列化以外的其他方式创建的。然而，您仍然可以创建代表您的 XML 结构和反序列化的类。

例如：

```
Public Class Foo
{
   public Range Range {get; set;}
}

public class Range
{
    public int X {get; set;}
    public int Y {get; set;}
} 
```

然后你用这个：

```
XmlSerializer ser = new XmlSerializer(typeof(Foo)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T16:37:34.947

我经常使用 XSD 来验证 XML 结构，部分原因是因为我没有默认构造函数和/或私有字段，`XMLSerialization`因此通常也不是一个选项。

如果 XML 验证没有错误，那么我继续使用 Linq2Xml 并使用各种`Parse(String s)`方法来获取我的类所需类型的数据，但是我还没有找到一个干净的解决方案，它可以在没有任何类型的转换的情况下做到这一点。

验证步骤避免了由于数据类型不正确而导致的异常。

```
var query = from tst in xml.Elements("test")
            select new 
            {
                int1 = Int32.Parse(tst.Element("int1").Value), 
                double1 = Double.Parse(tst.Element("double1").Value), 
                double2 = Double.Parse(tst.Element("double2").Value), 
            } 
```

**编辑：添加信息以回复评论“**

您可以直接从 Visual Studio GUI 创建 XSD，还有其他工具也可以这样做，但我通常只使用 Visual Studio。在编辑器中打开 XML，然后从 XML 菜单中选择“Create Schema”（路径显示在快照中）。

![Visual Studio IDE 中的 XML 到 XSD](../Images/1bea88df54ea31adbbbf6b9f66bf01ba.png)

生成的 XSD 非常基础。它试图通过并“猜测”每个节点的适当数据类型，并且它不包含任何额外的限制，但它为您将框架组合在一起做得不错。

完成后，您可以进入并调整数据类型以更好地满足您的需求（如果需要），您可以为数据添加自己的限制（例如要求`xs:int`值在 0 到 50 的范围内或`xs:string`值长度小于 10 个字符 - 还有许多其他可能性，但这应该会给你这个想法）。

实际上，我只是在玩弄 XSD 语言，而且越做越容易。[W3Schools](http://www.w3schools.com/schema/default.asp)网站非常宝贵。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T09:01:19.360

我们使用[Linq To Xsd](http://linqtoxsd.codeplex.com/)围绕`XDocument`.

您只需编写一个模式文件 (Xsd) 并将其包含在您的项目中（一旦您将 LinqToXsd 破解到 csproj 文件中：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="Foo1">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="Range1">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="X" type="xs:int"/>
                            <xs:element name="Y" type="xs:int"/>
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

然后你可以访问同名的类：

```
Foo1 foo = new Foo1()
{
    Range1 = new Foo1.Range1()
    {
        X = 7,
        Y = 10,
    }
};

foo.Save(foo.xml);

var input = Foo1.Load(input.xml);

Console.WriteLine(input.Range1.X.ToString()); 
```

J。

# haskell - QSem 似乎没有阻塞线程

> ID：10015051
> 
> 赞同：4
> 
> 时间：2012-04-04T16:08:25.997
> 
> 标签：haskell, semaphore, shelly

[我正在编写一个简单的脚本来使用Shelly](https://github.com/yesodweb/Shelly.hs)库并行运行一堆任务，但我想限制任何时候运行的最大任务数。该脚本获取一个文件，每行都有一个输入，并为该输入运行一个任务。文件中有几百个输入，我想一次限制为大约 16 个进程。

当前脚本实际上使用初始计数为 1 的 QSem 限制为 1（很好地尝试）。我似乎遗漏了一些东西，因为当我在具有 4 个输入的测试文件上运行时，我看到了这个：

```
开始
开始
开始
开始
完毕
完毕
完毕
完毕

```

所以线程并没有像我期望的那样阻塞在 QSem 上，它们都是同时运行的。我什至已经实现了我自己的信号量`MVar`，`TVar`而且都没有按我预期的方式工作。我显然错过了一些基本的东西，但是什么？我还尝试编译代码并将其作为二进制文件运行。

```
#!/usr/bin/env runhaskell
{-# LANGUAGE TemplateHaskell, QuasiQuotes, DeriveDataTypeable, OverloadedStrings #-}

进口雪莉
导入前奏隐藏（FilePath）
导入 Text.Shakespeare.Text (lt)
导入合格的 Data.Text.Lazy 作为 LT
导入 Control.Monad (forM)
导入 System.Environment (getArgs)

将合格的 Control.Concurrent.QSem 导入为 QSem
导入 Control.Concurrent (forkIO, MVar, putMVar, newEmptyMVar, takeMVar)

-- 定义最大并发进程数
maxProcesses :: IO QSem.QSem
maxProcesses = QSem.newQSem 1

bkGrnd :: ShIO a -> ShIO (MVar a)
bkGrnd 过程 = 做
  mvar <- liftIO newEmptyMVar
  _ <- liftIO $ forkIO $ 做
    -- 阻塞直到有空闲进程
    sem <- maxProcesses
    QSem.waitQSem sem
    putStrLn "开始"
    -- 运行shell命令
    结果 <- shelly $ 静默处理
    liftIO $ putMVar mvar 结果
    putStrLn “完成”
    -- 表示这个过程已经完成并且另一个可以运行。
    QSem.signalQSem sem
  返回 mvar

主::IO()
main = shelly $ 默默地 $ do
    [img, 文件] <- liftIO $ getArgs
    内容 <- readfile $ fromText $ LT.pack 文件
    -- 为每一行输入运行一个后台进程。
    结果 <- forM (LT.lines 内容) $ \line -> bkGrnd $ do
      runStdin <命令> <参数>
    LiftIO $mapM_takeMVar 结果

```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T16:23:17.720

正如我在评论中所说，每次调用`bkGrnd`都会创建自己的信号量，从而允许每个线程继续进行而无需等待。我会尝试这样的事情，其中​​信号量是在 中创建`main`并每次传递给`bkGrnd`.

```
bkGrnd :: QSem.QSem -> ShIO a -> ShIO (MVar a)
bkGrnd sem proc = do
  mvar <- liftIO newEmptyMVar
  _ <- liftIO $ forkIO $ do
    -- Block until there are free processes
    QSem.waitQSem sem
    --
    -- code continues as before
    --

main :: IO ()
main = shelly $ silently $ do
    [img, file] <- liftIO $ getArgs
    contents <- readfile $ fromText $ LT.pack file
    sem <- maxProcesses
    -- Run a backgrounded process for each line of input.
    results <- forM (LT.lines contents) $ \line -> bkGrnd sem $ do
      runStdin <command> <arguments>
    liftIO $ mapM_ takeMVar results 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T08:24:43.820

你有一个答案，但我需要补充一点：如果 killThread 或异步线程死亡是可能的，则 QSem 和 QSemN 不是线程安全的。

我的错误报告和补丁是[GHC trac ticket #3160](http://hackage.haskell.org/trac/ghc/ticket/3160)。固定代码可用作名为[SafeSemaphore](http://hackage.haskell.org/package/SafeSemaphore)的新库，带有模块 Control.Concurrent.MSem、MSemN、MSampleVar 和奖励 FairRWLock。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-25T02:08:01.060

不是更好吗

```
bkGrnd sem proc = do
  QSem.waitQSem sem
  mvar <- liftIO newEmptyMVar
  _ <- liftIO $ forkIO $ do
  ... 
```

所以甚至`forkIO`直到你得到信号量？

# visual-c++ - 在 VS C++ 项目中使用 GNU C++ 内置库

> ID：10015059
> 
> 赞同：0
> 
> 时间：2012-04-04T16:08:42.860
> 
> 标签：visual-c++, dll, gnu

我正在尝试实现一个使用 GNU 编译器构建的开源库。（即这个：[https](https://github.com/mjwybrow/adaptagrams) ://github.com/mjwybrow/adaptagrams ）

我已经尝试使用 VSC++ 6 打开和构建该源代码，但由于我猜想 VS 编译器的严格性质，它会导致一千多个错误。而不是检查每个错误并尝试自己修复它，我想知道如果它是用 GNU 编译器构建的，是否可以只包含 .lib？

编辑：

上面链接的源代码中包含一个 autogen.sh 文件。

```
mkdir -p m4
autoreconf --install --verbose
automake -a --add-missing
./configure
make 
```

使用 Cygwin 运行它会导致创建一些 .a 库文件，这些文件在 VS 中不可用。**可以将这些重命名为 .lib 文件吗？**

我在网上找到了一些关于如何使用 GCC 和创建 DLL 的资料，但我的问题是我对 GNU 编译器或 makefile 或一般的源代码知之甚少，无法立即更改它。

有没有人知道我需要改变什么才能让它正确？或者更好的是，有没有人已经使用这个源代码创建了一个 DLL，可以将它传递给我，或者让我知道我必须做什么？

或者任何人都可以将我指向一个与 Visual Studio 兼容的类似库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:13:43.060

不; 但是，您可以使用 gcc 构建 .dll 文件并使用来自 msvc 的 .dll（使用手工制作的包含文件或从一开始就正确格式化的文件，顶部带有平台特定的导入/导出宏）。

# javascript - Facebook IE9 Javascript 错误

> ID：10015063
> 
> 赞同：3
> 
> 时间：2012-04-04T16:08:54.547
> 
> 标签：javascript, facebook, internet-explorer-9

今天早上我们的游戏在我的IE9下无法运行。我得到的错误是：

```
access denied on 

http://static.ak.fbcdn.net/rsrc.php/v1/yL/r/X3oFUDWWu05.js 
```

当我在 Chrome、FF 和 IE 8 中加载此 URL 时，一切正常。但是在IE9下我有以下错误：

```
'window is undefined'
Error : 800A1391
Execution Error Microsoft JScript 
```

这是我无法控制的 Facebook 脚本。我已经清除了缓存，但仍然出现错误。

有任何想法吗？

# c - 创建在 C 中作为参数传递的文件

> ID：10015065
> 
> 赞同：-1
> 
> 时间：2012-04-04T16:09:10.867
> 
> 标签：c, fopen

我正在编写一个套接字程序，其中客户端将文件发送到服务器，服务器将文件名存储在新位置。我的问题是：当客户端将文件名传递给服务器时，如何在新位置使用相同名称创建文件。文件处理程序如下所示

```
fw=fopen("c://TestCopy","a+"); 
```

我需要做什么才能让 fopen 获取传递的文件名来打开文件。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-04T16:13:48.030

我只是有点困惑。我想你想要的是这样的：

```
fw = fopen(argv[1], "r");

...

// send the filename
send(server, argv[1], strlen(argv[1]) + 1, 0);

... 
```

服务器：

```
... 

// receive the file name
int fileNameLen = recv(client, buffer, maxBufferSize, 0);

fopen(buffer, "w");

... 
```

# wcf - WCF 证书编码值 - 某些值始终有效

> ID：10015075
> 
> 赞同：0
> 
> 时间：2012-04-04T16:09:44.107
> 
> 标签：wcf, wcf-binding

我正在使用证书来验证对 WCF 服务的调用

```
 <identity><certificate encodedValue=""></identity> 
```

我已导出我的证书以获得 base64 值，这似乎工作正常。

但是，有一个字符串“AwAAAAEAAAAUAAAAY....”似乎也适用于编码值。encodedValue 中没有其他值起作用。我很困惑。

# algorithm - 算法：在火车换乘次数有限的情况下找到城镇之间的联系

> ID：10015078
> 
> 赞同：7
> 
> 时间：2012-04-04T16:10:41.063
> 
> 标签：algorithm, graph-algorithm

你会使用什么算法来创建一个应用程序，给定适当的数据（城市列表、火车路线、火车站）能够返回任意两个用户选择的城市之间的连接列表？应用程序必须只选择那些落入接受的列车变化限制的连接。

**示例：**如果我需要从巴黎前往莫斯科，我会询问应用程序乘坐哪列火车。1 站/切换 - 应用程序返回一条路线：火车 1（巴黎-柏林）-> 火车 2（柏林->莫斯科）（不存在直接连接）。

**图形示例** ![地图](../Images/2e71e1752c8483a837075cb544eba723.png)

[http://i.imgur.com/KEJ3I.png](https://i.imgur.com/KEJ3I.png)

如果我向系统询问从**A**镇到**G**镇的可能连接，我会得到回应：

*   棕线（0 个开关 = 直接）
*   棕线到B镇/橙线到G镇（1个开关）
*   棕线到B镇/橙线到D镇/红线到G（2个开关）
*   ...所有其他可能性

第 2 和第 3 选项比第 1 选项短，但第 1 选项应该有优先权（因为不涉及换车）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-04T16:15:22.903

假设唯一重要的是“停止/切换次数”，那么问题实际上是在未加权有 [向图](http://en.wikipedia.org/wiki/Directed_graph)中找到最短路径。

图模型是`G = (V,E)`where`V = {all possible stations}`和`E = { (u,v) | there is a train/route from station u to station v }`
**注意**：假设你有一列从 a_0 开始的火车，经过 a_1、a_2、...a_n 的路径：那么 E 将包含：`(a_0,a_1),(a_0,a_2),..,(a_0,a_n)`并且`(a_1,a_2),(a_1,a_3),...`正式地：对于每个`i < j`: (a_i,a_j) ∈ E .

[BFS](http://en.wikipedia.org/wiki/Breadth-first_search)解决了这个问题，并且是[完全](http://en.wikipedia.org/wiki/Breadth-first_search#Completeness)的[总是找到一个解决方案，如果有一个解决方案] 和[最优](http://en.wikipedia.org/wiki/Breadth-first_search#Optimality)的[找到最短路径]。

如果边 [路线] 被加权，则需要类似[dijkstra 算法的东西。](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)

如果您想要*所有可能路线*的列表，可以使用[迭代深度 DFS](http://en.wikipedia.org/wiki/Iterative_deepening_depth-first_search)，而无需维护访问集，并将找到的所有路径打印到目标的相关深度。[BFS 无法返回所有路径与集团的反例]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T16:19:04.870

我认为您需要计算所有对的最短路径。检查[http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)。

# .htaccess - htaccess 不起作用 - 总是错误的密码

> ID：10015081
> 
> 赞同：30
> 
> 时间：2012-04-04T16:11:01.767
> 
> 标签：.htaccess, login, password-protection, .htpasswd

我正在尝试对目录进行密码保护，并且目录中有两个文件应该对其进行密码保护：

*   .htaccess
*   .htpasswd

访问：

```
###Contents of .htaccess:
AuthUserFile /var/www/html/path/to/my/directory/.htpasswd
AuthName "Protected Files"
AuthType Basic
Require user admin 
```

密码：

```
###Contents of .htpasswd
admin:oxRHPuqwKiANY 
```

密码也是admin，但无论我尝试什么密码，它总是错误的。它立即再次要求输入密码！

这个配置有什么问题？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-05T07:14:17.380

这个问题几乎总是因为 apache 无法读取 .htpasswd 文件。有四个原因浮现在脑海中：

1.  它没有正确解析路径...您是如何创建 .htaccess 文件的？它是否有 unix 行尾（相对于在 Windows 中使用记事本？

2.  路径正确吗？以下命令（带有路径更新）显示了什么？ls -l /var/www/html/path/to/my/directory/.htpasswd

3.  Web 服务器是否有权访问该文件？chmod 644 看看是否能解决问题。

4.  它无法解析 .htpasswd 文件：在这种情况下，您使用的是 crypt() 加密，因此看起来您确实在 Linux 上创建了该文件，并且可能没问题。某些类型的加密仅适用于某些平台，如果有疑问，请尝试切换到 MD5。

您可能会在 Apache 错误日志中找到有用的消息。

我的钱在#3。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-12-10T23:29:32.067

我在使用 MAMP 时遇到了类似的问题，这是因为我是手动创建 .htpasswd 的。解决方案是在终端中使用`htpasswd`命令：

```
htpasswd -bc .htpasswd someuser somepass 
```

这创建了 .htpasswd 文件，该文件适用于我的 .htaccess 文件，如下所示：

```
AuthType Basic
AuthName "This site is in alpha and requires a password."
AuthUserFile "/Applications/MAMP/htdocs/mywebsite/.htpasswd"
require valid-user 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-06-27T01:26:26.990

您看到来自父文件夹的密码保护的可能性很小，而不是您期望的文件夹。

如果您的 /etc/apache2/sites-enabled 文件夹中只有一个文件，请检查它是否有您的站点文件夹的部分，例如：

```
<Directory /var/www/mysite.com>
   AllowOverride All
</Directory> 
```

否则，如果它有您的站点名称的文件，例如：

`/etc/apache/sites-enabled/YOUR_SITE_NAME_HERE.conf`

改为编辑该文件，并确保有一个

```
AllowOverride All 
```

在那里。这是重要的部分！如果您只想允许最小值，请指定：

```
AllowOverride AuthConfig 
```

反而。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-06-17T23:48:42.323

我的问题是我没有给出 AuthFile 行的绝对路径。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-07-07T08:05:20.087

我有同样的问题。原来问题是这一行：

> 需要用户管理员

如果您指定，即使文件中有其他用户，`admin`您也只能访问该目录。`admin``.htpasswd`

如果要在`.htpasswd`文件中指定用户，可以将行更改为：

> 需要有效用户

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-15T12:17:06.570

我遇到过同样的问题。

*   密码应具有[指定](http://php.net/manual/en/function.crypt.php)的加密：

CRYPT_STD_DES - 基于标准 DES 的哈希，带有来自字母“./0-9A-Za-z”的两个字符的盐。

```
function standard_salt(){
$a = array_merge(range(0,9),range('a','z'),range('A','Z'));
return (string) $a[rand(0,count($a)-1)].$a[rand(0,count($a)-1)];
}

echo(crypt("admin",standard_salt())); 
```

例子：

```
admin:dsbU.we73eauE 
```

Onlione javascript 编码[器也可用。](http://www.markinns.com/articles/full/password_protecting_your_site_with_htaccess_protecting_your_site_with_htaccess)

如果它仍然不起作用，请注意以下事项：

*   使用[unix 换行符](http://wiki.secondlife.com/wiki/How_to_avoid_DOS_line_endings_in_Windows_tools#Notepad.2B.2B)
*   使用正确的 AuthUserFile 路径，您可以使用：`echo $_SERVER['DOCUMENT_ROOT'];`
*   设置文件可读：`chmod(".htpasswd",0644);`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-05T15:35:27.880

此外，请确保您的密码文件是 ANSI 编码的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-16T09:53:14.927

利用

```
htpasswd -b .htpasswd admin admin 
```

从命令行使用密码。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-10-14T07:55:13.923

我花了大约 2 个小时来解决同样的问题。但问题出在 nginx 中。我有 nginx 作为前端 Web 服务器，并且有一行用于代理配置：

proxy_set_header 授权 "";

它覆盖了授权字段，并且 apache 不接收输入的登录名和密码。

我刚刚注释掉了这一行，它起作用了。

# algorithm - 以下复发的时间复杂度？

> ID：10015083
> 
> 赞同：2
> 
> 时间：2012-04-04T16:11:17.530
> 
> 标签：algorithm, time, complexity-theory

找出递归的时间复杂度（Big Oh Bound）`T(n) = T(⌊n⌋) + T(⌈n⌉) + 1`。

这的时间复杂度如何`O(n)`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T16:55:14.247

You probably ment `T(n)=T(⌊n/2⌋)+ T(⌈n/2⌉) + 1`.

Lets calculate first few values of `T(n)`.

```
T(1) = 1
T(2) = 3
T(3) = 5
T(4) = 7 
```

We can guess that `T(n) = 2 * n - 1`.

Lets prove that by [mathematical induction](http://en.wikipedia.org/wiki/Mathematical_induction)

Basis

```
T(1) = 1
T(2) = 3
T(3) = 5
T(4) = 7 
```

Inductive step

```
T(2*n) = T(⌊2*n/2⌋)+ T(⌈2*n/2⌉) + 1  
   = T(⌊n⌋)+ T(⌈n⌉) + 1 
   = (2*n - 1) + (2*n - 1) + 1 
   = 4*n - 1
   = 2 * (2*n) - 1

T(2*n+1) = T(⌊(2*n+1)/2⌋)+ T(⌈(2*n+1)/2⌉) + 1
   = T(n)+ T(n+1) + 1
   = (2*n - 1) + (2*(n+1) - 1) + 1 = 
   = 4*n + 1 =
   = (2*n+1)*2 - 1 
```

Since both the basis and the inductive step have been proved, it has now been proved by mathematical induction that T(n) holds for all natural 2*n - 1.

`T(n) = 2*n - 1 = O(n)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T16:46:47.990

# asp.net - 对 ASP.NET 网站的建议

> ID：10015091
> 
> 赞同：0
> 
> 时间：2012-04-04T16:11:31.423
> 
> 标签：asp.net, asp.net-mvc, entity-framework

我正在使用 1.5 年前开始的 ASP.NET 构建大型应用程序。该站点使用第 3 方 Telerik RadControls 进行 UI。该网站的问题在于它使用了过时的东西，比如数据集，而且都没有适当的架构。我做了一些研究，发现了一些新技术，比如 ADO.NET Entity Framework。我想知道在这个阶段学习并将我的网站迁移到 ADO.NET Entity Framework 是否值得投资。

此外，市场上是否有任何好的技术或工具（可在 ASP.NET 中使用）可用于使开发生活更轻松并与最新技术保持同步。

所有的建议都非常宝贵。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:22:41.307

像这样的问题的问题在于答案总是“它取决于”但是，最近我对 Entity Framework 和 MVC3 做了一些工作，我会说它是一个非常好的平台 - MVC3 是合乎逻辑且易于使用的EF 为您做了很多提升。

归根结底，这取决于项目的进展程度以及目前的工作方式完成了多少。例如，如果你有一个设计得体的数据库和一堆半成品的页面，那么进行切换可能不会比完成你所拥有的更难，但不要低估重写的绝对规模再加上需要学习使用几种新技术，即使这些技术本身学起来很快。在任何大型项目中，您*都会*遇到正在使用的平台的怪癖，并发现自己至少有几次完全被难住了。

另一方面，过时的东西是替换工作代码的理由的想法往往会导致昂贵的、令人尴尬的项目超支。如果它已经完成了大部分，而您只是排队进行最后润色，那么请充分利用您所拥有的东西，并记住运输是一项功能。同样，项目的规模及其对业务的关键程度也有很大的影响。如果这是一个较小的内部项目，也许你有更多的重写空间，如果它负责公司的收入流，你需要快速发布这个版本，然后考虑稍后重构。

无论哪种方式，您都需要在将自己投入潜在的高风险工作之前与其他利益相关者进行讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T16:24:03.350

这个问题没有真正的答案。

实体框架非常有用。与 ASP.NET MVC 一样。我想这取决于你的指标来确定它是否值得。

移民的目标是什么？您是否正在寻找一个更可测试的网站？仅仅为了它而迁移大型网站不太可能值得，因此确定成功迁移的衡量标准可能自然会导致您做出决定。

还值得注意的是，ASP.NET Web 表单仍然是一个可行的选择。如果您想要使用数据网格等进行快速开发，那么表单可能是您的最佳选择。您可以考虑转向 MVC，这将允许您执行更清晰的关注点分离。它的马课程。一个快速的谷歌，你会发现很多表单与 mvc 的优缺点。

您也可以考虑零食迁移。例如，您可以构建数据库的实体框架模型并开始一次使用一页。慢慢移除 ADO，但保持一个工作站点。您还可以在一个站点中同时使用 Forms 和 MVC。因此，您不必一次性完成完整的迁移。

深思熟虑，祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T16:13:59.007

我通常使用 Obout 控件作为第三方工具包。我希望我能在切换到 ADO 方面提供更多帮助。

虽然，我不认为学习它会受到伤害，即使你最终没有将它用于这个特定的项目。

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T16:17:12.870

这一切都取决于......你能负担得起迁移吗？您当前的框架不是您需要的吗？

如果你仅仅因为发布了一些新的东西就想放弃 1.5 年的开发，也许你应该三思而后行。您肯定知道 .NET 框架的另一个版本即将到来，谁知道它会带来什么？是不是意味着你明年左右会再次移民？

但是，如果您以可以轻松完成的方式设计您的网站，请务必切换到新技术并迁移您想要多少以及您感觉如何舒适。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T16:24:02.213

是否值得将您的应用程序转换为 EF 是只有您才能做出的决定。你比我们任何人都更了解现有的代码库。评估您需要更改多少代码、您有多少时间、需要进行多少重新测试等等。根据您的发现，这将告诉您是否应该升级。

我很想用 EF 将我找到的每个 asp.net 2.0 应用程序升级到 MVC3，但通常时间和资源只允许我们修复损坏的部分并继续下一个项目。

也就是说，EF 在数据访问方面取得了巨大进步。如果这个项目不值得做，下一个项目绝对值得学习。

# wcf - SignalR - 从 WCF 项目发送消息

> ID：10015096
> 
> 赞同：2
> 
> 时间：2012-04-04T16:11:41.000
> 
> 标签：wcf, signalr

我已按照[https://github.com/SignalR/SignalR/wiki/Hubs](https://github.com/SignalR/SignalR/wiki/Hubs) 中题为“从集线器外部通过集线器进行广播”的说明进行操作。

我在同一个项目的 MVC 操作中使用了这种方法。请求操作会将更新发送到连接的客户端。

我的问题是我需要能够从另一个项目发送更新，特别是 WCF Web 服务项目。我的应用程序有一个 API 和一个 Web 组件，当 API 用户进行更改的调用时，这些更新需要通过 SignalR 推送到 Web 客户端。并且使用与我的测试操作相同的代码调用 Web 服务不起作用。

我还在 nunit 单元测试中尝试了相同的代码，但它也不起作用。

我需要做什么才能使 Wiki 中描述的相同方法适用于 WCF 项目？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T16:25:57.703

最简单的解决方案可能是在您的 Web 应用程序（使用 MVC 或新的 WebAPI）上提供一个向所有连接的客户端广播的 API。任何其他应用程序（NT 服务、NUnit 测试……）如果想要向客户端发送消息，都可以调用该 API。

如果您没有在 IIS 下运行的 Web 应用程序或直接托管它的另一个应用程序中托管集线器，则您不能期望 SignalR 做任何事情。

如果您需要从单独的应用程序到客户端的双向通信，那么只需将您的应用程序也变成 SignalR 客户端，并让它通过托管 SignalR 的 Web 应用程序与客户端通信，并让它也监听来自它们的消息。

例如，这是我如何配置一个复杂的 Service + WebSite + Clients 解决方案（暂时忽略紫色）：

![SignalR 复杂架构](../Images/6b1208292cc7f249c618a3fcb104b33c.png)

Live Web 服务器允许 NT 服务连接和创建 SignalR 组。NT 服务发送到这些组。Web 浏览器连接到一个组并接收发送到该组的消息。实际上，中间的盒子变成了一个 pubsubhub。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-12T20:14:03.570

我无法准确地得到你的目标。但是，如果我理解正确，您正在尝试将 WCF 服务中引发的某种通知发送给 SignalR 客户端。如果是这样的话；我可以建议你我的方法：

我在同一个应用程序服务器中有一些 WCF 服务和一个 SignalR 集线器。恕我直言，将 WCF 与 SignalR 集线器通信的最佳方式是使用 MSMQ。当 WCF 服务内部发生通知时，它会将通知负载放入 MSMQ。在另一端，SignalR 集线器侦听相同的队列。当消息放入队列时，它会获取内容并广播到集线器客户端。非常简单直接。服务器端没有额外的服务/集线器调用。

SignalR hub 可以通过 using`System.Messaging.MessageQueue#ReceiveCompleted`方法侦听新的队列项。引发此事件时，SignalR 集线器会获取队列项目并向其客户端广播。

# android - 用粗体和链接文本设置文本样式，不起作用

> ID：10015098
> 
> 赞同：0
> 
> 时间：2012-04-04T16:11:42.923
> 
> 标签：android, eclipse, styles

我想用一些粗体文本甚至链接文本来设置我的内容的样式。我像往常一样在谷歌上搜索了答案，我发现了这个[网站：](http://android.okhelp.cz/linkify-text-link-url-in-textview-text-android-example/)。有趣的是，这些例子都不适合我！

这是我在 About.java 中的代码：

```
public class About extends Activity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.about);

        SpannableString ss = new SpannableString("\"Vädret just nu\" är en webbaserad");

        ss.setSpan(new StyleSpan(Typeface.BOLD), 2, 14, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);

        TextView t4 = (TextView) findViewById(R.id.about_app);
        t4.setText(ss);
        t4.setMovementMethod(LinkMovementMethod.getInstance());
    }

} 
```

`Vädret just nu`该代码应该是粗体的，对吧？不是！我现在很沮丧，但我也是这个领域的新手。我该如何解决我的小问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:37:35.357

乍一看，一切看起来都很好。或者，您可以尝试

```
t4.setText(Html.fromHtml("<b>\"Vädret just nu\"</b> är en webbaserad")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T04:20:44.627

我现在让它工作！这是解决方案：

```
TextView t4 = (TextView)findViewById(R.id.hello);
t4.setText(Html.fromHtml("\"<b>Vädret just nu</b>\" är en webbaserad tjänst och kan därför enbart visas i en webbläsare. Välj \"<b>Om</b>\" i menyn för att läsa mer om applikationen.")); 
```

# sql-server - 缓存查询计划？

> ID：10015101
> 
> 赞同：0
> 
> 时间：2012-04-04T16:11:48.520
> 
> 标签：sql-server, sql-server-2008, sql-execution-plan

> 查询计划存储在视图和普通 SQL 的计划缓存中

从[这里](https://stackoverflow.com/questions/439056/is-a-view-faster-than-a-simple-query)

行。

一劳永逸：它对**我有**什么帮助？

即使我有`Query plans`查询`cache`：**一旦**我运行查询，他*将扫描整个表/秒+聚合+....。*

如果我明天运行它-它将*再次扫描整个表/秒+聚合*....

*不可能有这样的情况：“啊！！！我有数据在缓存中，所以我会从那里拿走它*......（因为可能表已经改变......）

那么，**真正**的好处在哪里？

我似乎错过了什么。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T16:28:05.347

假设我们有一个查询，例如

```
SELECT *
FROM 
    A 
    INNER JOIN B ON -- omitted
    INNER JOIN C ON -- omitted
    -- omitted
    INNER JOIN Q ON -- omitted 
```

但是有很多桌子。显然，这些连接的执行顺序会影响性能。此外，在给定表统计信息的情况下，确定*最佳*顺序也需要一定的时间。

通过缓存查询计划，我们只需支付**一次***决定最佳顺序*的成本——每次后续运行查询时，我们已经知道首先将其加入，然后加入，等等。**`K``E``H`**

 **当然，这意味着数据统计的重大变化会使我们的计划无效，但是缓存任何东西总是需要权衡取舍。

* * *

[**SQL Coach - 从THE** Analogy](http://sqlcoach.blogspot.co.uk/2007/08/analogy.html)开始，您可能会发现对了解更多关于查询计划的方法和原因有用的资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T16:26:38.793

答案是查询计划被缓存以防止每次编译查询计划的成本。第二次运行查询（或另一个可以使用相同计划的查询）时，它不需要重新运行编译过程，它只是从缓存中提取计划。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T16:27:34.460

简而言之，执行计划是对如何完成查询的解释，而不是查询中涉及的实际数据（因此，当您重新运行查询时，可以一遍又一遍地应用执行计划）。

打个比方，执行计划类似于食谱——它是获取数据/制作餐点的方法，而不是数据/餐点本身。

改进之处在于数据库引擎需要时间来制定查询的执行计划，因此如果它被缓存，则下次运行相同查询时不需要该开销。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T16:30:49.773

当您向 SQL 提交查询时，它会通过一些步骤来显示结果。主要的有解析器、algebrizer 和查询优化器。

查询优化器负责构建执行计划，或者从缓存中选择一个执行计划，据我所知，构建计划的过程非常昂贵，所以如果你可以重用它会更好。

要点是 exec 计划不包含数据本身，只是从 BD 检索数据的一种方式。因此，一旦“定义”了计划，它就会被传递到存储引擎并用于检索数据。**

# c# - C# Fire Webbrowser 在方法内

> ID：10015104
> 
> 赞同：0
> 
> 时间：2012-04-04T16:12:02.130
> 
> 标签：c#, .net, browser

我正在尝试用 C# 编写代码，对我的临时网页实施蛮力攻击，以尝试破解登录系统。像这样的东西：

```
private void buttonHack_Click(object sender, EventArgs e)
    {
        while (!found)
        {
            textBox_pw.Text = guess;
            guesser.NextGuess();

            webBrowser1.Document.GetElementById("user_id").SetAttribute("value", textBox_ID.Text);
            webBrowser1.Document.GetElementById("password").SetAttribute("value", textBox_pw.Text);
            webBrowser1.Navigate("javascript:enter();");

            guess = new String(guesser.CurrentGuess);
        }
    } 
```

// 'guess' 和 'guesser' 用于 BF 攻击。

但显然 WebBrowser 在返回内部调用它的方法之前不会“触发”。我试图将 while 循环中的部分放入 Webbrowser_DocumentCompleted 事件中，这样它就会真正循环（当页面加载完成时，然后一次又一次地做同样的事情......）但是这种方式有它的问题，比如 if页面文档快速完成，然后它跳过其余代码并转到 DocumentCompleted 方法的顶部，结果很奇怪！！！那么任何巧妙的想法如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T16:36:57.197

通常，蛮力攻击不是通过操纵网页本身来完成的，而是通过向执行凭据验证的服务器生成流量来完成（当然，除非您在客户端上进行验证，在这种情况下，简单的 javascript 代码审查就足够了） .

编写的代码模拟了网络浏览器控件与服务器的交互（以利用受 SSL 保护的流量）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T16:20:36.587

你不能做这样的循环，因为 .Navigate 是一个异步方法。您需要订阅 brwoser 控件上的 DocumentCompleted 事件并在那里完成您的工作。

另外，我不确定 .Navigate 是否会采用 javascipt: 位置。

# asp.net - Web 服务 - Windows 身份验证

> ID：10015106
> 
> 赞同：1
> 
> 时间：2012-04-04T16:12:18.973
> 
> 标签：asp.net, web-services

我已将 Web 服务添加到现有的 asp.net 内部网应用程序。目的是向同一域上的其他 Intranet 应用程序公开功能。

Intranet 应用程序使用 Windows 身份验证。如何设置 Web 服务以使用 Windows 身份验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:37:25.133

设置 Web 服务以使用 Windows 身份验证很容易。您只需更改 IIS 中的身份验证模式！

与该服务通信是另一回事。首先，您需要在使用应用程序的 Web 配置中正确设置服务引用。下面的安全部分是使其工作的最关键部分。

```
<system.serviceModel>
<bindings>
<basicHttpBinding>
    <binding name="ServiceSoap" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
      messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
      useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="Transport">
        <transport clientCredentialType="Windows" proxyCredentialType="None" realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
  </basicHttpBinding>
</bindings>
<client>
  <endpoint address="http://yourservice.com/Service.asmx"
    binding="basicHttpBinding" bindingConfiguration="ServiceSoap"
    contract="ServiceClient.IServiceSoap" name="ServiceSoap" />
</client> 
```

然后，您需要在开始使用之前设置客户端对象的**Windows凭据。**

```
var credentials = ServiceSoapClient.ClientCredentials;
credentials.Windows.ClientCredential.Domain = "domain";
credentials.Windows.ClientCredential.UserName = "user";
credentials.Windows.ClientCredential.Password = "pwd";
credentials.Windows.AllowNtlm = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T16:17:04.603

```
Client.localhost.Service1 service = new Client.localhost.Service1();
   service.Credentials = new System.Net.NetworkCredential("username", "pass", ""); 
```

# mysql - 如何在 Visual Studio 中连接 mysql（基于 EC2 实例）？

> ID：10015109
> 
> 赞同：0
> 
> 时间：2012-04-04T16:12:37.473
> 
> 标签：mysql, visual-studio-2010, amazon-ec2, amazon-web-services

我是 Amazon EC2 的新手，我刚刚创建了一个 AMI 实例 (Linux)。我也在那个实例中安装了 php、apache 和 mysql，我对此有疑问。当我连接到实例时，有一个 .pem 文件用作密码。如果我想通过 Visual Studio 连接到实例，如何获取密码？我的意思是，在 API 函数中，连接数据库需要服务器的密码。但是，EC2 实例有 .pem 文件作为密码，那么我如何才能检索 .pem 文件作为真实密码呢？（我想在VS中制作一个程序，我需要连接到EC2实例中的MySQL）好吧，基本上，是否可以检索密码@.@???? 确实提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T21:09:10.970

**Visual Studio 集成**

一种方法是下载MySQL的[Connector/Net驱动程序并安装它。](http://dev.mysql.com/downloads/connector/net/)然后在您的 Web.config 文件中添加类似于下面的连接字符串以连接到数据库。然后设置模型以反映 MySQL 数据库中的表。创建一个与 Web.config 文件中的连接字符串名称同名的 DbContext 类。然后你可以正常使用它。

```
<connectionStrings>
    <add name="SuperSmartDB" connectionString="server=ec2-50-34-34-157.compute-1.amazonaws.com;user=root;database=superrdb;port=3306;password=nunya123;" providerName="MySql.Data.MySqlClient" />
  </connectionStrings> 
```

**如果是 Visual Studio 新手**

创建所有模型后，您可以创建一个新控制器。创建控制器时：将模型类设置为要使用的表，将数据上下文类设置为与 Web.config 中的连接字符串匹配的上下文。选择通过模板创建 CRUD。这样做将为您创建基本的创建、读取、更新和删除控制器操作和视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:58:37.723

您不需要 .pem 文件即可通过 VS 连接到数据库。当您尝试通过 SSH 连接到实例时，需要 .pem 文件。要连接到 MySQl DB，需要 MySQL 主机、用户名和密码。

# c++ - C++ Win32：将子窗口附加到主窗口

> ID：10015113
> 
> 赞同：1
> 
> 时间：2012-04-04T16:12:54.993
> 
> 标签：c++, window, mdi

我正在开发一个基于 C++ 的程序，并且还使用 SiliconSoftware 接口。正如您从附加的图片中看到的那样，我正在使用 c++ win32 代码运行主窗口，但显示窗口是使用带有以下代码的图像采集卡接口创建的：

```
int Bits=8; int nId =::CreateDisplay(Bits,GrabberOptions::getWidth(),GrabberOptions::getHeight());SetBufferWidth(nId,GrabberOptions::getWidth(),GrabberOptions::getHeight());::DrawBuffer(nId,Fg_getImagePtrEx(fg,lastPicNr,0,_memoryAllc),lastPicNr,""); 
```

但我想要这个显示窗口，在主窗口中打开。我该怎么做 ？任何的想法？ ![在此处输入图像描述](../Images/5c7f4514a8603b1ab303368de4d16a13.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T16:52:43.633

假设你有

```
HWND a = ...
HWND b = ... 
```

假设它们是无论如何获得的兄弟窗口的本机句柄。要使 ba 成为 a 的孩子，您必须这样做

```
Setparent(b,a); //a will be the new parent b
DWORD style = GetWindowLong(b,GWL_STYLE); //get the b style
style &= ~(WS_POPUP|WS_CAPTION); //reset the "caption" and "popup" bits
style |= WS_CHILD; //set the "child" bit
SetWindowLong(b,GWL_STYLE,style); //set the new style of b
RECT rc; //temporary rectangle
GetClientRect(a,&rc); //the "inside border" rectangle for a
MoveWindow(b,rc.left,rc.top,rc.right-rc.left,rc.bottom-rc.top); //place b at (x,y,w,h) in a
UpdateWindow(a); 
```

现在，您必须从 a 处理 WM_SIZE 并相应地移动 b ，以便它与其（新）父级一起调整大小。

# objective-c - 如何为此结构创建自己的结构和常量？

> ID：10015116
> 
> 赞同：0
> 
> 时间：2012-04-04T16:13:02.280
> 
> 标签：objective-c, struct, components, constants, limit

我想创建一个类似于 CGPoint 的结构，但使用 3 个坐标而不是 2 个坐标。

我通过以下方式创建它：

```
typedef struct {CGFloat x;CGFloat y;CGFloat z;} CG3Vector;

CG_INLINE CG3Vector CG3VectorMake(CGFloat x, CGFloat y, CGFloat z)
{
  CG3Vector p; p.x = x; p.y = y; p.z = z; return p;
} 
```

它工作正常。但我现在想改进这个结构，使其具有像 CGPoint 这样的常量：`CGPointZero`

还有什么方法可以为结构的特定组件引入限制，就像 CGSize 一样，其中组件永远不会低于 0？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T16:17:17.000

您可以像这样创建常量：

```
const CG3Vector CG3VectorZero = { 0, 0, 0 }; 
```

如果你想要限制，我想你可以做一些这样的检查：

```
CG_INLINE CG3Vector CG3VectorMake(CGFloat x, CGFloat y, CGFloat z)
{
    // normalize the values
    x = fmod(x, 360);
    y = fmod(y, 360);
    z = fmod(z, 360);

    x = (x < 0) ? 360 + x : x;
    y = (y < 0) ? 360 + y : y;
    z = (z < 0) ? 360 + z : z;

    return (CG3Vector) { x, y, z };
} 
```

# php - Zend_Form setAttrib 标题没有用 Zend_Translate 翻译

> ID：10015117
> 
> 赞同：2
> 
> 时间：2012-04-04T16:13:03.003
> 
> 标签：php, zend-framework, zend-form, zend-translate

在 Zend_Form 中设置 title 属性时，它没有被翻译。（标签和错误翻译得很好）

// 表单文件

```
$email = new Zend_Form_Element_Text('username');
$email->setLabel('auth.form.login.username')
      ->setRequired(true)
      ->addFilter('StripTags')
      ->addFilter('StringTrim')
      ->addFilter('StringToLower')
      ->addValidator('NotEmpty')
      ->setAttrib('title', 'auth.form.login.username'); 
```

// 资源文件

```
...
<tu tuid='auth.form.login.username'>
   <tuv xml:lang="en"><seg>Username</seg></tuv>
</tu>
... 
```

当前结果：**auth.form.login.username**

预期结果：**用户名**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:57:36.347

这是正常的行为，没有任何问题。

该`setAttrib()`方法**不翻译其值参数**，因此您需要使用 Zend_Translate 适配器，如下所示：

`$email->setAttrib('title', $this->getTranslator()->translate('auth.form.login.username'))`

这应该可以解决您的问题。

有关详细信息，请参阅[标准 I18n 目标](http://framework.zend.com/manual/1.11/en/zend.form.i18n.html#zend.form.i18n.standard)。

> 现在您已经附加了一个翻译对象，默认情况下您可以翻译什么？
> 
> *   验证错误消息。
> *   标签。
> *   字段集图例。
> *   表单和元素描述。
> *   多选项值。
> *   提交和按钮标签。

# ios - 当它进入前台时重新启动应用程序

> ID：10015121
> 
> 赞同：0
> 
> 时间：2012-04-04T16:13:07.213
> 
> 标签：ios, cocoa-touch

有一个名为的属性`Application does not run in background`，如果我们将其设置为`YES`，应用程序将在进入后台时结束。但我找不到这个属性。谁能告诉我这个设置在哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T16:17:06.943

它是应用程序的 plist 信息文件中的一个选项。您必须添加它“应用程序不在后台运行”

将其设置为是。

# java - 在 Java 中锁定一组数据库操作

> ID：10015125
> 
> 赞同：3
> 
> 时间：2012-04-04T16:13:38.323
> 
> 标签：java, locking, transaction-isolation

我的 Java 应用程序需要以原子和隔离的方式执行一组 DB 语句。例如，应用程序需要从一个表中读取数据行并更新另一个表中的数据行。

```
QueryRunner queryRunner = new QueryRunner(); // DBUtils query runner

Object[] params = new Object[] { param };

Connection conn = null;
try {
    conn = ...; // get connection
    conn.setAutoCommit(false);
    result = queryRunner.query(conn, "select x, y, z from table1 where column1 = ?", new BeanHandler<SomeBean>(SomeBean.class), params);

    // logic to get value for update

    queryRunner.update(conn, "update table2 set p = ? where q = ?", some_value, some_id);
    conn.commit();
} catch (SQLException e) {
    //
} finally {
    DBUtils.closeQuietly(conn);
} 
```

事务管理是通过将连接的自动提交设置为 false 并稍后显式提交来实现的，如上所示。但是上面的代码也可以在多线程环境中执行，我还希望两个数据库语句（选择和更新）作为一个整体相互独占运行。

我有一些想法在该方法中使用共享的 Java Lock 对象，如下所示。

在课堂里，

```
private Lock lock = new ReentrantLock(); // member variable 
```

在方法中，

```
lock.lock();
try {
    conn = ...; // get connection
    conn.setAutoCommit(false);

    result = queryRunner.query(conn, "select x, y, z from table1 where column1 = ?", new BeanHandler<SomeBean>(SomeBean.class), params);

    // logic to get value for update

    queryRunner.update(conn, "update table2 set p = ? where q = ?", some_value, some_id);
    conn.commit();
} finally {
    DBUtils.closeQuietly(conn);
    lock.unlock();
} 
```

它似乎有能力解决这个问题。但是，我想知道这是否是最佳实践，是否有更好的替代方案（例如框架）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T04:12:37.973

处理此类问题的另一种方法是对所有数据库事务使用可序列化事务隔离级别。这会导致任何一组事务表现得好像它们一次运行一个，而不是实际上使它们一次运行一个。如果您这样做，您应该使用捕获序列化失败 (SQLState 40001) 并重试事务的框架。最大的好处是您无需担心事务之间的特定交互——如果一个事务在它是唯一运行的事物时做正确的事情，那么它将在任何事务组合中做正确的事情。

请注意，所有事务都必须是可序列化的，才能如此简单地工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T16:38:05.553

实现所需原子性的唯一方法是使用数据库中的存储过程来隔离数据并立即将其全部锁定。Java 级别的锁定不能像数据库中的锁定那样容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T16:27:07.953

我的建议是让数据库为您而不是您的应用程序管理这些锁。这可以处理有多个 JVM 运行代码的情况。您提到的锁定机制只能在单个 JVM 中有效。

实现这一点的方法是做一个`SELECT ... FOR UPDATE`. 这将在选定的行上放置一个锁，并且当您的事务提交或回滚时该锁将被释放。这比表级锁要好，因为这些行仍然可以被其他只想读取当前值但不更新它们的事务读取。如果另一个事务试图获得`FOR UPDATE`锁，那么它将阻塞，直到第一个事务完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-13T10:41:03.693

根据我的理解，您是否只想将包含 select 和 update 语句的代码块设为线程安全？这就是 synchronized 关键字的用途。尽管很久以前就问过这个问题，但我只想在这里记下它。将这些代码行放在同步块下。

# asp.net - ORACLE/ASP.NET：ORA-2020 - 数据库链接太多……这是什么原因造成的？

> ID：10015130
> 
> 赞同：3
> 
> 时间：2012-04-04T16:13:51.503
> 
> 标签：asp.net, oracle, oracle10g, database-link

这是场景...

我们有一个运行最新版本 ODAC（Oracle 客户端）的内部网站。它打开数据库连接，运行存储过程或打包方法，然后断开连接。连接池已打开，我们目前在我们的开发和测试环境中都是 11g 版本，但在我们的生产环境中是 10gR2。这发生在生产上。

几天前，一个进程开始触发 ORA-2020 错误。该过程是从我们内部网站上的网页调用的。用户只需设置一个日期，点击一个按钮，就可以在与网站分开的另一个系统上开始工作。然而，调用本身使用数据库链接来运行函数。

我们搜索了 SQL，发现它只使用了一个数据库链接。而且由于这些链接是基于每个会话的，并且用户没有超过默认限制 4，我们怎么可能收到 ORA-2020 错误。

我们已经运行了许多测试来尝试超过默认限制 4。据我回忆，ODAC 在每次连接后运行一次提交，我似乎无法运行 4 个 DB 链接，然后运行一段 SQL在出现任何错误后直接使用 1 个 DB 链接。我可以提出这个错误的唯一方法是，如果我运行一个带有 4 个 DB 链接的查询，然后是一个函数或一段动态 SQL，其中包含一个数据库链接。我们没有这个问题，因为这个问题是零星的。它并不总是发生。

**问题**

1.  连接池是否有可能允许用户 B 在运行初始进程后使用用户 A 的连接，从而在用户 B 运行具有更多数据库链接的 SQL 语句时添加到打开的链接数？
2.  这是我们应该将限制提高到 4 以上的情况吗？增加数量有什么坏处？
3.  在断开与数据库的连接之前，我是否需要明确关闭打开的数据库链接？Oracle 文档似乎建议它应该自动发生，但“有时”......不会。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T20:31:23.780

首先，简单的解决方案：我会仔细检查生产数据库中默认链接的数量*实际上是*4。

```
select *
  from v$system_parameter
 where name = 'OPEN_LINKS' 
```

假设你不会轻易下车：

> 连接池是否有可能允许用户 B 在运行初始进程后使用用户 A 的连接，从而在用户 B 运行具有更多数据库链接的 SQL 语句时添加到打开的链接数？

您说您明确关闭了会话，根据[文档](http://docs.oracle.com/cd/B19306_01/server.102/b14231/ds_admin.htm#i1008256)，这应该意味着与该会话关联的所有链接都已关闭。除此之外，我承认在这一点上完全无知。

> 这是我们应该将限制提高到 4 以上的情况吗？增加数量有什么坏处？

没有我能想到的缺点。尽管很久以前，[Tom Kyte 建议每个打开的数据库链接使用 500k 的 PGA 内存。](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:393468893370)如果你没有，那么这显然会导致问题，但在大多数情况下应该没问题。

然而，有一些意想不到的后果：想象你把这个数字增加到 100。有人编写了一些代码，不断打开链接并通过所有链接`select * from my_massive_table`或类似链接获取大量数据。你有 100 个会话，而不是 4 个会话，它试图同时传输数百 GB。您的网络在压力下死亡...

可能还有更多，但你明白了。

> 在断开与数据库的连接之前，我是否需要明确关闭打开的数据库链接？Oracle 文档似乎建议它应该自动发生，但“有时”......不会。

正如您所注意到的，最好的答案是“可能不是”，这没有多大帮助。您没有确切提及您是如何终止会话的，但是如果您要杀死它而不是优雅地关闭它，那肯定是。

使用数据库链接会在远程服务器上生成一个子进程。因为您的服务器不再绝对负责此进程，所以有很多事情可能导致它成为孤立的或在父进程终止时无法关闭。这绝不会一直​​发生，但它可以而且确实如此。

我会做两件事。

1.  在您的过程中，如果遇到异常，请将以下查询的结果通过电子邮件发送给您自己。

    ```
    select * 
      from v$dblink 
    ```

    至少您将知道会话中打开了哪些数据库链接，并为您提供一些跟踪它们的方法。

2.  遵循文件建议；具体如下：

    *“您可能需要手动关闭链接。例如，在以下情况下关闭链接：*

    *   *通过链接建立的网络连接在应用程序中很少使用。*
    *   *必须终止用户会话。”*

第一个似乎完全适合您的情况。除非您的流程是时间敏感的，但似乎并非如此，否则您会失去什么？语法是：

```
alter session close database link <linkname> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T15:03:16.767

我们最终增加了链接数量，但我们从未找到根本原因。

# git - 如何使用移动文件解决 git-svn rebase？

> ID：10015131
> 
> 赞同：2
> 
> 时间：2012-04-04T16:13:52.803
> 
> 标签：git, svn, merge, git-svn, rebase

我在将长期存在的分支（称为“度量”）重新定位到“主干”分支的最新版本时遇到问题。目标是让我的更改重新定位，然后提交回 SVN。

rebase 现在有 75 个步骤，第 40 步是对在 svn 中重定位的文件应用重要的源代码更改。

具体来说，我对 /java/**/*.java 中的文件进行了大量更改。同时，这些文件被重新定位到：/src/main/java/**/*.java。

git 状态显示：

```
# Not currently on any branch.
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#
# Unmerged paths:
#   (use "git reset HEAD <file>..." to unstage)
#   (use "git add/rm <file>..." as appropriate to mark resolution)
#
#   added by them:      java/StripesResources.properties
.... (many files like this)
#   both deleted:       src/StripesResources.properties
.... (many files like this)
#   added by us:        src/main/java/StripesResources.properties
.... (many files like this) 
```

这种状态下有 900 多个文件，我该怎么做才能合并它们？并非所有人都有实质性的变化。

我尝试将文件的“他们”版本（我的更改）移动/复制到“我们”位置（它们应该在哪里），但这似乎不起作用。

在这种情况下我应该使用“git mv”吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:16:03.653

这可能不是最佳解决方案，因为它涉及历史修订。您可以使用`git filter-branch`将“metrics”分支的`/java/**/*.java`文件移动到`/src/main/java/**/*.java`中，然后进行变基。首先，备份您的存储库。然后尝试这样的事情：

```
git checkout metrics
git filter-branch --index-filter '
    git ls-files -s |
        perl -pe "s{\t/java/\"?}{\t/src/main/java/}" |
        GIT_INDEX_FILE=$GIT_INDEX_FILE.new git update-index --index-info &&
    mv $GIT_INDEX_FILE.new $GIT_INDEX_FILE
' HEAD 
```

`/java/`这将重写您的度量分支的历史记录，有效地将路径以to开头的每个文件移动`/src/main/java`。如果您只需要这些路径中的 java 文件，请相应地修改`perl`语句。在你的历史中的不同点上胡闹`git ls-files -s | perl -pe <substitution>`将帮助你确定你需要什么。

一件可以用 Git (tm) 完成的事情，上面的内容非常激烈。同样，它应该解决文件名问题。之前尝试过一些长期分歧的分支合并，这个特殊的问题不会是你的最后一个问题。如果您的工作流程定期生成高度不同的长期分支，您可能会考虑更改它。

# php - 查找两个日期之间特定日期的日期 PHP

> ID：10015136
> 
> 赞同：-1
> 
> 时间：2012-04-04T16:14:05.820
> 
> 标签：php

我有开始日期和结束日期。我也有特定的日子，即星期三。

现在我想在开始日期和结束日期之间显示每个星期三的日期。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:17:21.403

尝试这个：

```
function getAllWednesday($from_date, $to_date){
    // getting number of days between two date range.
    $number_of_days = count_days(strtotime($from_date),strtotime($to_date));

    for($i = 1; $i<=$number_of_days; $i++){
        $day = Date('l',mktime(0,0,0,date('m'),date('d')+$i,date('y')));
        if($day == 'wednesday'){
            echo Date('d-m-Y',mktime(0,0,0,date('m'),date('d')+$i,date('y'))),'<br/>';
        }
    }
} 
```

count_days() 函数

```
function count_days( $a, $b )
{
    // First we need to break these dates into their constituent parts:
    $gd_a = getdate( $a );
    $gd_b = getdate( $b );
    // Now recreate these timestamps, based upon noon on each day
    // The specific time doesn't matter but it must be the same each day
    $a_new = mktime( 12, 0, 0, $gd_a['mon'], $gd_a['mday'], $gd_a['year'] );
    $b_new = mktime( 12, 0, 0, $gd_b['mon'], $gd_b['mday'], $gd_b['year'] );
    // Subtract these two numbers and divide by the number of seconds in a
    // day. Round the result since crossing over a daylight savings time
    // barrier will cause this time to be off by an hour or two.
    return round( abs( $a_new - $b_new ) / 86400 );
} 
```

# sql-server-2008 - 错误：26 无法连接到 SQL 2008 数据库实例

> ID：10015138
> 
> 赞同：0
> 
> 时间：2012-04-04T16:14:12.810
> 
> 标签：sql-server-2008, iis, sharepoint-2010, iis-6, connection-string

我在 DMZ 上有一个共享点服务器，在本地域中有一个 SQL2008 服务器。当我尝试从 IIS（7.5 版）获取中央管理站点的 .NETUsers 列表时，我收到错误：26！我在指定连接字符串时尝试了所有可能的组合。我还按照这些链接上的所有指示来解决问题，但它继续存在。

[http://blogs.msdn.com/b/sql_protocols/archive/2007/05/13/sql-network-interfaces-error-26-error-locating-server-instance-specified.aspx](http://blogs.msdn.com/b/sql_protocols/archive/2007/05/13/sql-network-interfaces-error-26-error-locating-server-instance-specified.aspx) 和 [http://blogs。 msdn.com/b/walzenbach/archive/2010/04/14/how-to-enable-remote-connections-in-sql-server-2008.aspx](http://blogs.msdn.com/b/walzenbach/archive/2010/04/14/how-to-enable-remote-connections-in-sql-server-2008.aspx)

请指教。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:49:00.517

首先，您能否检查问题中的版本。IIS 6 在 Windows 2003 上运行，但无法在 Windows 2003 上安装 SharePoint 2010。

这是连接错误，有两种可能：

*   来自 SharePoint 服务器的调用在到达数据库之前被阻止
*   呼叫到达数据库时被拒绝

您应该首先绘制 Sp 服务器和数据库服务器之间的路线图。确保包括所有防火墙。

然后检查日志以查看呼叫到达了多远。

您还可以尝试使用wireshark 监控网络流量，以查看到底发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:40:12.573

从错误本身来看，这是一个相当复杂的问题，在与微软通了几天电话后最终得到了解决。错误为“RPC 服务不可用”。NetBios 和 DNS 限定站点和服务器名称的方式存在问题。

# jquery - 滑块 CSS、jQuery 和布局 - 我的滑块手柄喜欢飞走

> ID：10015141
> 
> 赞同：0
> 
> 时间：2012-04-04T16:14:25.980
> 
> 标签：jquery, css, html

[https://www.radiumhosting.com/clients/nodecart.php](https://www.radiumhosting.com/clients/nodecart.php)

当手柄向右滑动一个节点时，div class='ui-slider' id='slider'的margin从margin: 0变化；到边距：-60px 0 0；导致 div 向上移动。在我开始处理这个之前，节点也会向上移动，但我添加了 div style="height:60px;" 迫使他们留在原地。这是在下面代码段的第 4 行。

有没有人有任何创造性的想法来保持 div id='slider' 静止？

```
 <div class="slider-background-repeat">
                <div class="slider-background-left">
                    <div class='slider-wrap'>
                    <div style="height:60px;">
                        <div class='ui-slider' id='slider'>
                          <div class='ui-slider-handle'></div>
                            <div class='handle-text nodes-1'></div>
                            <input class="text text" id="numNodes" name="numNodes" value="{$defaultNodes}" size="30" type="text" />

                        </div>

                     </div>   

                        <ul class='slider-nodes' id='slider-nodes'></ul>

                        <div id='nodesprev' onClick="MoveNodesBack()" ><img src="./modules/servers/vpsnet/assets/images/prev.png" border="0"></div>
                        <div id='nodesnext' onClick="MoveNodesForward()"><img src="./modules/servers/vpsnet/assets/images/next.png" border="0"></div>
                    </div>
                </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T18:04:47.810

看起来您的 CSS 的第 20 行是添加到您的句柄的类

```
#vps-net-slider .slider-wrap #slider.ui-slider .ui-slider-handle.active { background-position:-75px -20px;} 
```

该类是在您的 slide.js 文件的第 597 行周围添加的。我很确定这是导致您的问题的原因。

# c# - 不确定如何查询此数据

> ID：10015143
> 
> 赞同：0
> 
> 时间：2012-04-04T16:14:27.193
> 
> 标签：c#, mysql

我正在导入 ERP 解决方案的表中有一些数据。数据显示如下：

```
buyer name,order id,shipment item id,sku,quantity shipped, price etc 
```

发货项目 ID 是唯一值，与订单 ID 一起是主键。

我的问题是这样的：

我需要找到每个不同的订单并根据该信息创建一个销售订单。

我遇到的问题是：

每个货件 ID 在数据库中都有自己的行和一个简单的

```
while(reader.read()){
     ...logic here...
} 
```

将不起作用，因为它将尝试为同一客户创建 n 数量的销售订单。

我需要形成一个查询，该查询将获取每个货件 ID 并将其 SKU、数量等放在一行中，以便我可以正确附加它，但我不确定这将如何工作。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:23:20.700

您需要使用 group by 子句对行进行重复数据删除以获取顶级信息

SELECT [buyer name], [order id], etc FROM orderTable GROUP BY [buyer name], [order id], etc WHERE [order id] = 1

然后分别选择所有行

SELECT * FROM orderTable WHERE [order id] = 1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T12:17:54.403

我在 ERP 软件提供商处找到了一个解决方案，它允许我使用基本的 SQL 语句并对任何具有订单 ID 主键的销售订单进行更新。这将允许将每个相应的装运项目 ID 添加到销售订单中，而无需执行额外的 SQL“按摩”，因为如果记录存在它将更新它，否则它将创建一个新记录。

谢谢大家的建议。

# c# - ChildWindow 宽度/高度未正确绑定

> ID：10015145
> 
> 赞同：1
> 
> 时间：2012-04-04T16:14:38.743
> 
> 标签：c#, .net, wpf, silverlight

我正在尝试将我的子窗口设置为我的应用程序的大小，以便它占据整个屏幕。我正在使用以下代码：

```
Binding widthBinding = new Binding("Width");
widthBinding.Source = App.Current.Host.Content.ActualWidth;
this.SetBinding(ChildWindow.WidthProperty, widthBinding);

Binding heightBinding = new Binding("Height");
heightBinding.Source = App.Current.Host.Content.ActualHeight;
this.SetBinding(ChildWindow.HeightProperty, heightBinding); 
```

`this`子窗口在哪里。

我正在绑定它，以便当他们调整浏览器大小时，子窗口也应该如此。但是，我的子窗口没有绑定到大小。它仍然保持其默认大小。我的绑定不正确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T16:28:20.057

我不相信你会得到约束工作。让 ChildWindow 填满屏幕的最简单方法是将 Horizo​​ntalAlignment 和 VerticalAlignment 设置为 Stretch

```
<controls:ChildWindow x:Class="SilverlightApplication4.ChildWindow1"
           xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
           xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
           xmlns:controls="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls"
           Title="ChildWindow1"
           HorizontalAlignment="Stretch" VerticalAlignment="Stretch"> 
```

如果您绝对想在 silverlight 中使用 ActualWidth/ActualHeight 路线，您必须执行类似...

```
public ChildWindow1()
{
  InitializeComponent();

  UpdateSize( null, EventArgs.Empty );

  App.Current.Host.Content.Resized += UpdateSize;
}

protected override void OnClosed( EventArgs e )
{
  App.Current.Host.Content.Resized -= UpdateSize;
}

private void UpdateSize( object sender, EventArgs e )
{
  this.Width = App.Current.Host.Content.ActualWidth;
  this.Height = App.Current.Host.Content.ActualHeight;
  this.UpdateLayout();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T16:18:48.473

我认为您正在尝试绑定到`ActualWidth.Width`不存在的 。从绑定构造函数中删除`"Width"`/`"Height"`字符串，它应该可以工作。

```
Binding widthBinding = new Binding();
widthBinding.Source = App.Current.Host.Content.ActualWidth;
this.SetBinding(ChildWindow.WidthProperty, widthBinding);

Binding heightBinding = new Binding();
heightBinding.Source = App.Current.Host.Content.ActualHeight;
this.SetBinding(ChildWindow.HeightProperty, heightBinding); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T16:20:41.700

当 ActualHeight 和 ActualWidth 发生变化时，Content 类不会引发 PropertyChanged 事件；所以 Binding 无法知道它需要刷新值。在仍然使用 Binding 的同时，有一些复杂的方法可以解决这个问题，但最简单的答案就是处理 Content.Resized 事件并自己设置值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T16:23:51.183

如果@Rachel 的回答不起作用，您可能想尝试这篇博文中概述的技术：

[http://meleak.wordpress.com/2011/08/28/onewaytosource-binding-for-readonly-dependency-property/](http://meleak.wordpress.com/2011/08/28/onewaytosource-binding-for-readonly-dependency-property/)

根据该帖子，您不能绑定到只读属性，即 ActualWidth 和 ActualHeight 。

我不知道这是否适用于 Silverlight，但它在 WPF 中对我们来说效果很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T16:51:39.723

ActualWidth 和 ActualHeight 不会在 Silverlight 中触发 PropertyChanged 事件。这是设计使然（关于优化布局引擎的性能，如果我记得的话）。因此，您永远不应该尝试绑定它们，因为它根本行不通。推荐的解决方案是处理 SizeChanged 事件，然后自己进行适当的更新。从[文档](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.actualwidth%28v=vs.95%29.aspx)中：

> 不要尝试将 ActualWidth 用作 ElementName 绑定的绑定源。如果您有需要基于 ActualWidth 进行更新的方案，请使用 SizeChanged 处理程序。

[这是一个](http://darutk-oboegaki.blogspot.com/2011/07/binding-actualheight-and-actualwidth.html)使用附加属性的解决方案。还应该直接将此功能包装在 XAML 友好的混合行为中（可能`Behavior<FrameworkElement>`）。

# jsp - 在jsp中传递多个参数

> ID：10015146
> 
> 赞同：0
> 
> 时间：2012-04-04T16:14:38.940
> 
> 标签：jsp, jstl

我想将两个参数从我的一个 jsp 页面传递到另一个包含的 jsp 页面。

第一个 JSP 代码：

```
 <%
        java.util.Map map = new java.util.LinkedHashMap();
        map.put("Manage Client", "${pageContext.request.contextPath}/clients/");
     %>
     <s:message var="message" code="label.NavigationBar.add"></s:message>
        <jsp:include page="/includes/_navigation_top.jsp" >
            <jsp:param name="topLeftNav" value="${message}"/>
            <jsp:param name="parentNode" value="${map}"/>
        </jsp:include> 
```

包含的 jsp (/includes/_navigation_top.jsp) 页面代码是

```
<c:if test="${ param.topLeftNav ne 'Quotes' }">
        <div class="third-nav">
           <div class="bread-crum">
               <ul >
                <li><a href="${applicationScope.app_url_secure}/">Home</a></li>
                <c:if test="${param.parentNode!=null }">
                    <c:forEach items="${param.parentNode}" var="map">
                        <li><a href="${map.value}">${map.key}</a></li>
                    </c:forEach>
                </c:if>
                <li>${param.topLeftNav}</li>
              </ul>
          </div>
        </div>
    </c:if> 
```

任何人都可以帮我解决我想念的地方吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:16:39.317

您正在混合 oldschool *scriptlet*和现代[EL](https://stackoverflow.com/tags/el/info)。它们不共享相同的变量范围。您创建了`map`in *scriptlet*范围，但您试图在 EL 范围内传递一个`${map}`显然是`null`.

让*scriptlet*（或者最好是前端控制器[servlet](https://stackoverflow.com/tags/servlets/info)）按照 EL 的预期将其置于正确的范围内。例如

```
request.setAttribute("map", map); 
```

# javascript - 将 Html.Raw() 存储在 Javascript、ASP.NET MVC 3 中的字符串中

> ID：10015147
> 
> 赞同：6
> 
> 时间：2012-04-04T16:14:45.937
> 
> 标签：javascript, asp.net-mvc-3

我正在使用 ASP.NET，并且我在数据库中有一个 HTML 字符串。

我想将该 html 放入客户端上的变量中。

如果我这样做：

```
var x = '@Html.Raw(myModel.FishValue)' 
```

它工作正常，因为它本质上是在做

```
var x = '<p>hello!</p>'; 
```

但是，如果 html 中有引号，它会破坏页面。

我最初的猜测是 .Replace 原始字符串以将转义添加到引号中，但是`.ToString()`and `.ToHtmlString()`（因为 Html.Raw 返回 IHtmlString）都不会产生与 simple 相同的标记`Html.Raw()`。

所以我不知道该怎么做。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-04T16:18:06.037

在调用`Html.Raw`方法之前替换怎么样？

```
 var x = '@Html.Raw(myModel.FishValue.Replace("'","\\'"))' 
```

**更新：**

来自模型的字符串中可能还有其他转义字符。出于这个原因，我建议也先更换斜线。当然，这一切都取决于模型中的服务器可能来自什么。

```
 var x = '@Html.Raw(myModel.FishValue.Replace("\\","\\\\'").Replace("'","\\'"))' 
```

表示 javascript 中行为的示例片段：

```
//Let's say my Model Content is >  I'd Say \ is a escape character. You can't "Escape"  
    // YOu would have to replace ' --> \' and \ --> \\
    var stringFromServer = 'I\'d Say \\ is a escape character. You can\'t "Escape"'
    alert(stringFromServer)
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T16:22:33.257

尝试这个：

```
var x = '@(System.Web.HttpUtility.HtmlEncode(myModel.FishValue))'; 
```

如果您需要在客户端解码 HTML，请使用

```
unescape(x) 
```

我认为 JQuery（不确定您是否使用它）处理编码的 HTML 字符串，因此您可能不需要 unescape()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T16:27:13.243

试用 Microsoft 的 anti-xss 库（我相信默认情况下它会包含在 asp.net 4.5 中）：

```
AntiXss.JavascriptEncode(yourContent)

```

Anti-Xss 4.1 beta 可用。如果您想在我强烈推荐的应用程序中使用它，请查看： [http ://weblogs.asp.net/jgalloway/archive/2011/04/28/using-antixss-4-1-beta-as-the -default-encoder-in-asp-net.aspx](http://weblogs.asp.net/jgalloway/archive/2011/04/28/using-antixss-4-1-beta-as-the-default-encoder-in-asp-net.aspx)

# c# - 更新 PictureBox 时可能导致 ArgumentException 的原因是什么？

> ID：10015148
> 
> 赞同：5
> 
> 时间：2012-04-04T16:15:02.140
> 
> 标签：c#, picturebox, aforge, argumentexception

决定尝试[使用 AForge](http://www.aforgenet.com/)处理视频和图像，我尝试实现[这个简单的演示](http://www.aforgenet.com/framework/features/directshow_video.html)：

```
private void Main_Load(object sender, EventArgs e)
{
        // enumerate video devices
        FilterInfoCollection videoDevices = new FilterInfoCollection(
                        FilterCategory.VideoInputDevice);
        // create video source
        VideoCaptureDevice videoSource = new VideoCaptureDevice(
                        videoDevices[0].MonikerString);
        // set NewFrame event handler
        videoSource.NewFrame += new NewFrameEventHandler(video_NewFrame);
        // start the video source
        videoSource.Start();
}

private void video_NewFrame(object sender, NewFrameEventArgs eventArgs)
{
        this.pictureBox1.Image = eventArgs.Frame;
} 
```

问题是我总是得到一个`ArgumentException`，尽管并不总是马上发生。它会弹出`Application.Run(new Main());`，但堆栈跟踪的顶部如下所示：

*   `at System.Drawing.Image.get_Width() at System.Drawing.Image.get_Size()`
*   `at System.Windows.Forms.PictureBox.ImageRectangleFromSizeMode(PictureBoxSizeMode mode)`
*   `at System.Windows.Forms.PictureBox.OnPaint(PaintEventArgs pe)`

不确定这是否相关，但`ParamName`异常的属性为空。我尝试将图像分配包装在 try...catch 块中，但这没有帮助。我还检查以确保图像在分配之前不为空。我还检查了非空但 0x0 大小的图像。

我做错了什么？任何人都可以提出解决方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T17:40:09.400

我认为问题在于您没有在事件处理程序中复制传递的位图（帧）。

AForge 文档说：

> 由于视频源可能有多个客户端，每个客户端负责对传递的视频帧进行复制（克隆），因为视频源在通知客户端后会处理自己的原始副本。

因此，如果您直接将帧分配给图片框，则 AForge 框架可以在`PictureBox` 尝试绘制位图时处理位图。

# java - 如何将组件放置在特定位置？

> ID：10015160
> 
> 赞同：7
> 
> 时间：2012-04-04T16:15:42.997
> 
> 标签：java, swing, awt, flowlayout

如何将组件放置在特定位置的布局中。就像我想在第一行放置 2 个文本框，在 3 个组合框下方。

但是当我试图把它们都出现在一行中时，我使用了 flowlayout。我也使用了边框。当我调整大小时，组件的窗口大小会超出边框。

你能建议我一些使用的布局以及如何使用它吗？

这是我的代码：

```
topPanel=new JPanel();
topPanel.setLayout(new FlowLayout());
topPanel.setBorder(new TitledBorder(new EtchedBorder(), "Customer Data"));

CNameTextField = new JTextField (20); // create the Customer Name text field
CNameTextField.setEditable(true);     // set editable text box

CIDLabel=new JLabel("Customer ID");

C_IDTextField = new JTextField (10);
C_IDTextField.setEditable(true);      // set editable text box

topPanel.add(CNameTextField);
topPanel.add(C_IDTextField);   

// Create and populate Room type combo box
roomTypeCombo = new JComboBox();
roomTypeCombo.addItem( "Budget($50)" );    

// Create and populate Meal type combo box
mealCombo = new JComboBox();
mealCombo.addItem( "None" );       

// Create and populate Days combo box

daysCombo = new JComboBox();

for(int i=0;i<31 ; i++) {
            // populate combobox with days
    daysCombo.addItem(i); 
}
    // Adding  rest of the components to top panel
topPanel.add(roomTypeCombo);
topPanel.add(mealCombo);
topPanel.add(daysCombo); 
```

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T17:52:02.497

最具体的布局类型是绝对定位。

> **警告：**绝对定位应该很少使用，如果有的话。有很多原因。这是一个：[绝对定位（无布局管理器）与 MiGlayout 中的绝对定位](https://stackoverflow.com/questions/12213247/absolute-positioning-no-layout-manager-vs-absolute-positioning-in-miglayout)
> 
> - 感谢用户[brimborium](https://stackoverflow.com/users/1137043/brimborium)添加警告的好主意。

话虽如此，这里是如何使用绝对定位：

在上面的代码中，不是将`topPanel`布局设置为，而是`FlowLayout`将其设置为`null`.

```
topPanel.setLayout(null); 
```

稍后在代码中，在您开始添加组件之前`topPanel`，调用容器的`setBounds`方法：

```
someJComponent.setBounds(x-coord, y-coord, width, height); 
```

所以例如你创建了一个实例`JComboBox()`并命名它`roomTypeCombo`，下面的代码展示了如何绝对定位`roomTypeCombo`。

```
topPanel.setLayout(null);

// code...

roomTypeCombo = new JComboBox();

// code...

roomTypeCombo.setBounds(100, 100, 200, 50);
topPanel.add(roomTypeCombo); 
```

上面使用的`setBounds`方法有四个参数：

*   `int x-coord`- 设置`roomTypeCombo`相对于其父级的 x 坐标，`topPanel`.
*   `int y-coord`- 设置`roomTypeCombo`y 相对于其父级的 y 坐标，`topPanel`.
*   `int width`- 指定`roomTypeCombo`的宽度。
*   `int height`- 指定`roomTypeCombo`的高度。

我只想玩弄坐标，看看你是否喜欢它产生的任何东西。可能发生的最糟糕的事情是您重新使用布局，这可能比绝对定位更好。或者您可以实现自己的[布局管理器](https://stackoverflow.com/questions/5442520/alternative-solution-to-null-layout-manager-when-absolute-positioning-is-needed)，如果您遵循此超链接，第一个答案将讨论实现您自己的布局管理器并具有有用的链接。

[有关绝对定位的更多信息](http://www.roseindia.net/java/example/java/swing/AbsCoordinate.shtml)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-04T16:23:13.010

尝试改变布局。 [http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)

您可以`GridLayout`使用两行（例如，还有其他一些可能的组合），每行分别包含 3 个 JComboBox 和两个 JTextField。

仔细查看文档并查看一些可在网络上轻松访问的示例。

```
import java.awt.GridLayout;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class SwingResizeJFrame {

    public SwingResizeJFrame() {
        JTextField TextField1 = new JTextField("firstTextField");
        JTextField TextField2 = new JTextField("secondTextField");
        JPanel firstPanel = new JPanel();
        firstPanel.setLayout(new GridLayout(0, 2, 10, 10));
        firstPanel.add(TextField1);
        firstPanel.add(TextField2);

        JComboBox comboBox1 = new JComboBox(new Object[]{"Ester", "Jordi", "Jordina", "Jorge", "Sergi"});
        JComboBox comboBox2 = new JComboBox(new Object[]{"Ester", "Jordi", "Jordina", "Jorge", "Sergi"});
        JComboBox comboBox3 = new JComboBox(new Object[]{"Ester", "Jordi", "Jordina", "Jorge", "Sergi"});
        JPanel secondPanel = new JPanel();
        secondPanel.setLayout(new GridLayout(0, 3, 10, 10));
        secondPanel.add(comboBox1);
        secondPanel.add(comboBox2);
        secondPanel.add(comboBox3);

        JFrame frame = new JFrame();
        frame.setLayout(new GridLayout(2, 1, 10, 10));
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(firstPanel);
        frame.add(secondPanel);
        frame.pack();
        frame.setLocation(150, 150);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                SwingResizeJFrame demo = new SwingResizeJFrame();
            }
        });
    }
} 
```

# jquery-mobile - 如何将数据动态呈现到jquery移动页面中

> ID：10015161
> 
> 赞同：0
> 
> 时间：2012-04-04T16:15:43.807
> 
> 标签：jquery-mobile

我对 jQuery Mobile 真的很陌生。我正在尝试制作一个带有两页的简单应用程序。Page1 是用户输入搜索数据的地方，Page2 是显示结果的地方。任何帮助是极大的赞赏。

```
<!DOCTYPE HTML>
<html>
<head>
<title>Example</title>

<script src="jquery-mobile/jquery-1.7.2.min.js"/>
<script src="jquery-mobile/jquery.mobile-1.0a3.min.js"/>
<link href="jquery-mobile/jquery.mobile-1.0a3.min.css" rel="stylesheet" type="text/css"/>

<script> 

$(document).ready(function() {
    $('#search').click(function() {
    //do some processing and get the data in form of JSON
        var data = someotherfunction($("#searchfor").val());     
    //now lets say I want to pass this data to page2\. How to do this?

        // I was doing
        $('#page1').hide();
        $('#page2').show(); // but it removes all the styling from the page.

    });
});

</script>

</head> 
<body> 

<div data-role="page" id="page1">
    <div data-role="header">
        <h1>Example</h1>
    </div>

    <div data-role="content">   
       <input name="searchfor" type="text" id="searchfor"/>

       <input type="button" id="search" data-theme="b" value="search"/>
    </div>

    <div data-role="footer">
        <h4>Page Footer</h4>
    </div>
</div>

<div data-role="page" id="page2">
    <div data-role="header">
        <h1>Page Three</h1>
    </div>
    <div data-role="content">   
        <p>Your search returned this: {data.value} </p>     
    </div>
    <div data-role="footer">
        <h4>Page Footer</h4>
    </div>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T18:08:58.920

您不妨将第二页设为外部页面，并在其上执行搜索逻辑：

```
$(document).on('click', '#search', function () {
    $.mobile.changePage('/path/to/my-script.php?search=' + encodeURIComponent($('#searchfor').val(), { reloadPage : true });

    //prevent the default behavior of the click event
    return false;
}); 
```

然后在您的第二页中，您可以接收`$_GET`变量、进行搜索并输出结果。

否则，您正在考虑`$.ajax()`通过 AJAX 请求类似的响应：

```
$(document).on('click', '#search', function () {
    $.ajax({
        url      : '/path/to/my-script.php'
        data     : { search : $('#searchfor').val() },
        dataType : 'json',
        success  : function (data) {

            //assuming that the response in an array of objects (JSON)
            var output = [];
            for (var i = 0, len = data.length; i < len; i++) {
                output.push('<li><h3>' + data[i].name + '</h3><p>' + data[i].description + '</p></li>');
            }

            var $page =  $('#page2').children('.ui-content').append('<ul data-role="listview">' + output.join('') + '</ul>');

            $.mobile.changePage($page);
        },
        error    : function (jqXHR, textStatus, errorThrown) { /*don't forget to handle errors*/ }
    });

}); 
```

# jquery - 如何实现 JQuery.ajax(dataType:json) 到 spring mvc 2.5

> ID：10015163
> 
> 赞同：0
> 
> 时间：2012-04-04T16:15:53.137
> 
> 标签：jquery, ajax, json, spring-mvc, spring-json

我正在尝试使用 $.ajax() 方法和 Json 作为 dataType 使用 jQuery 库进行 AJAX 调用，当我尝试将其应用于 springmvc 2.5 中的应用程序时，问题就出现了，我根本找不到一个好的教程如何将其应用于 Spring mvc 2.5，但 3.0

干杯

```
exception 
```

javax.servlet.ServletException：Servlet 调度程序的 Servlet.init() 抛出异常 org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462) org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java: 100) org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563) org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399) org.apache.coyote.http11.Http11Processor.process( Http11Processor.java:317) org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:204) org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:182) org.apache。 tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:311) java.util.concurrent.ThreadPoolExecutor$Worker。runTask(ThreadPoolExecutor.java:886) java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) java.lang.Thread.run(Thread.java:662)

根本原因

org.springframework.beans.factory.BeanCreationException：创建 ServletContext 资源 [/WEB-INF/dispatcher-servlet.xml] 中定义的名称为“viewResolver”的 bean 时出错：bean 初始化失败；嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建 ServletContext 资源 [/WEB-INF/views.xml] 中定义的名称为 'jsonView' 的 bean 时出错：bean 的实例化失败；嵌套异常是 org.springframework.beans.BeanInstantiationException：无法实例化 bean 类 [org.springframework.web.servlet.view.json.JsonView]：构造函数抛出异常；嵌套异常是 java.lang.NoClassDefFoundError: org/apache/commons/beanutils/ConvertUtilsBean org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:480) org.

根本原因

org.springframework.beans.factory.BeanCreationException：在 ServletContext 资源 [/WEB-INF/views.xml] 中定义名称为“jsonView”的 bean 创建错误：bean 的实例化失败；嵌套异常是 org.springframework.beans.BeanInstantiationException：无法实例化 bean 类 [org.springframework.web.servlet.view.json.JsonView]：构造函数抛出异常；嵌套异常是 java.lang.NoClassDefFoundError: org/apache/commons/beanutils/ConvertUtilsBean org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:883) org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory。 createBeanInstance(AbstractAutowireCapableBeanFactory.java:839) org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory。

根本原因

org.springframework.beans.BeanInstantiationException：无法实例化bean类[org.springframework.web.servlet.view.json.JsonView]：构造函数抛出异常；嵌套异常是 java.lang.NoClassDefFoundError: org/apache/commons/beanutils/ConvertUtilsBean org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:115) org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy. java:61) org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:877) org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:839) org.springframework.beans。 factory.support.AbstractAutowireCapableBeanFactory。

根本原因

java.lang.NoClassDefFoundError: org/apache/commons/beanutils/ConvertUtilsBean org.springframework.web.servlet.view.json.filter.SimplePropertyFilter.setUpBeanUtils(SimplePropertyFilter.java:31) org.springframework.web.servlet.view.json .filter.SimplePropertyFilter.(SimplePropertyFilter.java:27) org.springframework.web.servlet.view.json.JsonView.(JsonView.java:25) sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) sun.reflect.NativeConstructorAccessorImpl。 newInstance(NativeConstructorAccessorImpl.java:39) sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27) java.lang.reflect.Constructor.newInstance(Constructor.java:513) org.springframework.beans.BeanUtils.instantiateClass(BeanUtils. java:100) org.springframework.beans.factory.support。SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:61) org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:877) org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:839) org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:440) org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409) java.security.AccessController.doPrivileged(Native方法）org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380) org.springframework。beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264) org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean (AbstractBeanFactory.java:261) org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185) org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164) org.springframework .beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:429) org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:728) org.springframework.context.support。AbstractApplicationContext.refresh(AbstractApplicationContext.java:380) org.springframework.web.servlet.view.XmlViewResolver.initFactory(XmlViewResolver.java:138) org.springframework.web.servlet.view.XmlViewResolver.initApplicationContext(XmlViewResolver.java:89) org.springframework.context.support.ApplicationObjectSupport.initApplicationContext(ApplicationObjectSupport.java:119) org.springframework.web.context.support.WebApplicationObjectSupport.initApplicationContext(WebApplicationObjectSupport.java:69) org.springframework.context.support.ApplicationObjectSupport.setApplicationContext( ApplicationObjectSupport.java:73) org.springframework.context.support.ApplicationContextAwareProcessor.postProcessBeforeInitialization(ApplicationContextAwareProcessor.java:70) org.springframework.beans.factory.support。AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:350) org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1331) org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java473) org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409) java.security.AccessController.doPrivileged(Native Method) org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java: 380）org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject（AbstractBeanFactory.java:264）组织。springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261) org.springframework.beans.factory.support.AbstractBeanFactory。 getBean(AbstractBeanFactory.java:185) org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164) org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:429) org. springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:728) org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:380) org.springframework.web.servlet。FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:402) org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:316) org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:282) org.springframework。 web.servlet.HttpServletBean.init(HttpServletBean.java:126) javax.servlet.GenericServlet.init(GenericServlet.java:160) org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462) org.apache。 catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100) org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563) org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399) org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:317) org.apache.coyote.http11。Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:204) org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:182) org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint. java:311) java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) java.lang.Thread.run(Thread.爪哇：662）ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) java.lang.Thread.run(Thread.java:662)ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) java.lang.Thread.run(Thread.java:662)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:24:49.440

您需要使用 restful url 注释您的控制器方法，并将 @ResponseBody 注释添加到控制器方法中。

例子：

```
@Controller
@RequestMapping(value = "/pets")
@ResponseBody
public Pet getPet(@PathVariable String petId, Model model) {    
    //..generate some Json
    // Add Json to the Response
    model.addAttribute("json", json);
} 
```

然后在您的 js 中使用 jquery 对 URL 进行 ajax 调用

```
$.ajax({
  type: 'POST',
  url: "/pets",
  data: data,
  success: function(data){
   alert(data.json); //alerts json object
},
  dataType: 'json'
}); 
```

# oop - 什么逻辑应该放在域类中，什么应该放在 Grails 中的服务中？

> ID：10015166
> 
> 赞同：7
> 
> 时间：2012-04-04T16:15:56.803
> 
> 标签：oop, grails

我正在开发我的第一个 Grails 应用程序，其中涉及移植旧的 struts Web 应用程序。有很多现有的功能，当我移动东西时，我很难决定服务中应该包含哪些内容以及应该直接包含在模型中的内容？

来自主要是 Ruby on Rails 开发的背景，我强烈倾向于将几乎所有内容都放在与之相关的领域类中。但是，对于像我要移植的应用程序一样大的应用程序，某些类最终会变成成千上万行。

您如何决定应该在域中使用什么与应该在服务中使用什么？是否有任何既定的最佳实践？我做了一些环顾四周，但大多数人似乎只是承认这个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T17:03:12.573

一般来说，我遵循的主要准则是：

> 如果一大块逻辑与多个领域类相关，则将其放入服务中，否则放入领域类中。

如果没有更多关于你正在处理什么样的逻辑的细节，很难比这更深入，但这里有一些更一般的想法：

1.  对于与视图呈现相关的内容，这些内容包含在标签库（或者可能是服务）中
2.  对于处理确定将什么发送到视图以及将其发送到哪个视图的事情，这些都在控制器（或者可能是服务）中
3.  对于与外部实体（即文件系统、队列等）对话的事物，它们进入服务

一般来说，我倾向于选择服务太多而不是把事情集中在一起。最后，一切都是关于什么对您最有意义，*您*如何看待代码以及您希望如何维护它。

但是，我要注意的一件事是，在您移植的内容中可能存在大量代码重复。由于 Grails 是在 Groovy 上构建的，并且可以使用更强大的编程方法（如闭包），您可能可以清理和简化*大部分*代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T06:46:51.920

我个人认为这不仅是服务和域类之间的决定，还包括插件或注入代码。

想想动态查找器，例如`Book.findAllByName()`. Grails 将它们注入到领域类中真是太好了。否则，它们必须被复制到每个域类，或者它们可以通过服务 ( `dynamicFinderService.findAllByName('Book')`-argh) 调用。

所以在我的项目中，我有很多东西我将转移到一个插件并注入到域类中......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-04T18:26:01.310

从 Java EE 的角度来看：域类中根本没有逻辑。使您的域类尽可能简单和简短。您的域模型是应用程序的核心，并且必须易于获取。

*   Grails 是为依赖注入而开发的。驻留在域类中的所有逻辑都很难测试，也很容易重构。
*   您不能像与服务 (DI) 一样交换实现。
*   您无法轻松测试域类的代码。
*   你不能扩展你的系统，因为你的实现不能像服务一样被池化。

我的建议：在服务中保留所有逻辑。服务易于测试、易于重用、易于维护、易于重新配置。

特定于 grails：如果您更改域类，内存中的数据库将被杀死，因此您会丢失测试数据，这会阻止您进行快速原型设计。

# android - 从捆绑包中删除条目（即附加项）似乎无法与后退按钮结合使用

> ID：10015170
> 
> 赞同：13
> 
> 时间：2012-04-04T16:16:02.637
> 
> 标签：android, android-intent, android-activity

我有一个可以收听传入短信的 BroadcastReceiver。如果消息来自某个发件人，BroadcastReceiver 会使用以下代码启动我的应用程序：

```
final Intent activityIntent = new Intent(context, MainActivity.class);
activityIntent.putExtra("smsChallenge", smsText);
activityIntent.putExtra("smsSenderNumber", senderMobilNumber);
activityIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
activityIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
context.startActivity(activityIntent); 
```

在我的应用程序的 MainActivity 中（即 in `onCreate()`），我`smsChallenge`从意图中提取值并在提取后使用以下代码删除它：

```
Bundle extras = getIntent().getExtras();
if (extras != null) {
    smsChallenge = extras.getString("smsChallenge");
    extras.remove("smsChallenge");
} 
```

所以我的应用程序从 SMS 启动并运行良好......但如果我选择按下 BACK 按钮并重新启动应用程序（即通过任务管理器），该值`smsChallenge`仍在 bundle 中`extras`。这意味着，我重新启动的应用程序认为它是由于一条不正确的新短信而重新启动的......

任何想法为什么在使用 BACK 按钮并再次重新启动应用程序时从包中删除键值似乎不起作用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-02-22T08:51:08.157

因为`getExtras()`创建了意图附加内容的副本。

你必须这样做

```
getIntent().removeExtra("smsChallenge"); 
```

文档： http: [//developer.android.com/reference/android/content/Intent.html#removeExtra(java.lang.String)](http://developer.android.com/reference/android/content/Intent.html#removeExtra(java.lang.String))

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-21T12:52:29.470

I think that you can not fix this behavior because by the time you get access to the intent, the os would have already saved the intent for later launch via recent apps.

1.  You can either add a flag to remove from recent apps, but in that way the app will not appear in the recent apps.
2.  **Add in persistent storage the last sms that was handled in your MainActivity and do this check in your onCreate, discarding an intent for an sms that was already handled.**
3.  A final solution would be not to send the data in the intent at all. For example, save them in a "pending" persistent storage. When your MainActivity starts, let it check for pending stuff, and clear this pending item.

Persistent storage could be SharedPreferences for example.

I would advise you to use **2** but you should count the sms received and use that counter as an id for the sms. Do not rely on the sms content and sender as an identifier for the sms.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-27T00:07:30.017

> “Intent 始终是用于启动 Activity 的原始 Intent，仅此而已。这是不可变的。” 黛安·哈克伯恩

要解决此问题，首先确保在清单中将您的活动 launchMode 声明为 singleTop。

然后从下面的[谈话](https://groups.google.com/forum/#!topic/android-developers/vrLdM5mKeoY)中，尝试使用 onSaveInstanceState 来记录你已经“取消”了一些额外的事实。然后在 onCreate 中，检查它的 'Bundle savedInstanceState' 参数。如果不为null，则为您之前在onSaveInstanceState 中返回的Bundle。从此捆绑包中，您可以决定是否忽略这些附加内容。

**编辑**：在您的情况下，即使活动被破坏，使用共享首选项也可以让您保持状态。

```
public YourActivity extends Activity {

 private boolean extrasClearedOut;
 private SharedPreferences mPrefs;
 private static String EXTRA_CLEAR_OUT = "extras_cleared_out";

 public void onCreate(Bundle savedInstanceState) {
     mPrefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());

     extrasClearedOut = mPrefs.getBoolean(EXTRA_CLEAR_OUT, false);

     if (savedInstanceState != null && savedInstanceState.getBoolean(EXTRA_CLEAR_OUT, false))  {
         extrasClearedOut = true;
     }

     Intent intent = getIntent();
     if (extrasClearedOut) {
       // ignore the extras in the intent.

     }

     else {
       // Read and use the extras in the intent.
     }
 }

 protected void onNewIntent (Intent intent)  {
    super.onNewIntent(intent);
    setIntent(intent);

    if (extrasClearedOut) {
       // ignore the extras in the intent.
    }
    else {
       // Read and use the extras in the intent.
    }
 }

 public void someMethod(...) {
    extrasClearedOut = true;
 }

 protected void onSaveInstanceState (Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putBoolean(EXTRA_CLEAR_OUT, extrasClearedOut);
 }

 public void onDestroy()
 {
    final Editor edit = mPrefs.edit();
    edit.putBoolean(EXTRA_CLEAR_OUT, extrasClearedOut);
    edit.commit();
 }

} 
```

[这](https://stackoverflow.com/a/21261404/795245)是您问题的另一个有效解决方案

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T17:33:29.603

我认为您需要为您想要的行为明确设置活动的意图。我不确定为什么`getIntent()`似乎要退回副本。

从文档中`Activity.setIntent()`

> 更改 getIntent() 返回的意图。这包含对给定意图的引用；它不会复制它。通常与 onNewIntent(Intent) 结合使用。

[http://developer.android.com/reference/android/app/Activity.html#setIntent(android.content.Intent](http://developer.android.com/reference/android/app/Activity.html#setIntent(android.content.Intent) )

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-28T04:28:03.340

删除多余的不是解决此问题的正确方法。由于用于启动所述活动的上下文而发生此问题。改变这个

```
final Intent activityIntent = new Intent(context, MainActivity.class); 
```

对此

```
final Intent activityIntent = new Intent(context.getApplicationContext(), MainActivity.class); 
```

当您按下后退按钮时，活动现在将完成（前提是您没有重载该功能并更改其行为）。如果您从应用程序列表中选择应用程序，它将不包含任何额外内容。

编辑：

避免从接收器启动活动。考虑一下：你在 MainActivity。您收到短信。现在，您将看到一个正在启动的新活动，而不是更新 ui 以反映新消息，这将不是一个好的用户界面设计。

替代方法：更新您的数据库或执行任何需要执行的相关操作。然后在本地广播信息。在您的活动中为此广播注册一个接收器并刷新 UI 或执行任何需要的操作。如果您想通知用户而不是启动活动，请创建通知。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-14T08:24:25.853

```
private void removeExtraFromBundle(String key){
    Bundle bundle = getArguments();
    if(bundle != null){
        String value = null;
        value = bundle.getString(key);
        if(value != null){
            bundle.remove(key);
        }
    }
} 
```

上面的代码将帮助您从捆绑对象中删除特定键。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-23T12:14:51.383

我的建议是在意图中添加第三个额外的 some `nonce`，例如只是一个随机字符串：

```
final Intent activityIntent = new Intent(context, MainActivity.class);
activityIntent.putExtra("smsChallenge", smsText);
activityIntent.putExtra("smsSenderNumber", senderMobilNumber);
activityIntent.putExtra("nonce", UUID.randomUUID().toString);
activityIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
activityIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
context.startActivity(activityIntent); 
```

然后检查你之前是否有这个随机数`onCreate()`：

```
public void onCreate(final Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Intent = getIntent();
    smsChallenge = intent.getStringExtra("smsChallenge", null);
    String nonce = intent.getStringExtra("nonce", null);
    if (nonce == null) {
      // should not happen, but do something sane here
    }
    SharedPreferences sp = PreferenceManager.getDefaultPreferences(this);
    if (nonce.equals(sp.getString("nonce", null)) {
      // app was restarted
    } else {
      // app was started from a shiny fresh intent
      sp.edit().putString("nonce", nonce).commit();
    }
} 
```

但请记住，方向变化等也在调用`onCreate()`。但是您可以通过检查 if `savedInstanceState`is来轻松解决这个问题`null`。

# javascript - jquery：如何使用相同的 jquery 代码构建多个灯箱？

> ID：10015173
> 
> 赞同：0
> 
> 时间：2012-04-04T16:16:20.080
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

我们如何制作通用灯箱我的意思是页面中所有灯箱功能的相同代码这里是 JQuery

```
 $(document).ready(function() {

        $('.lightbox').click(function() {
            $('.backdrop, .box').animate({
                'opacity': '.50'
            }, 300, 'linear');
            $('.box').animate({
                'opacity': '1.00'
            }, 300, 'linear');
            $('.backdrop, .box').css('display', 'block');
        });

        $('.close').click(function() {
            close_box();
        });

        $('.backdrop').click(function() {
            close_box();
        });

    });

    function close_box() {
        $('.backdrop, .box').animate({
            'opacity': '0'
        }, 300, 'linear', function() {
            $('.backdrop, .box').css('display', 'none');
        });

} 
```

**[演示](http://jsfiddle.net/sweetmaanu/nBYvH/3/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:35:54.690

您的脚本不知道要拉出哪个灯箱，因为您从未指定一个。设置灯箱的一种方法是`id`在其中一个`<a>`属性中指定灯箱。然后，在单击时，拉出该属性的值并使用而不是您现在使用`$("#valuePulledFromAttribute")`的泛型进行引用。`$('.backdrop, .box')`

我能够创建一个不使用 HTML5 的分支：http: [//jsfiddle.net/J6ee5/2/](http://jsfiddle.net/J6ee5/2/)

```
$(document).ready(function() {

$('.lightbox').click(function() {
    var thisBox = $(this).attr("name");
    console.log(thisBox);
    $('.backdrop,.' + thisBox).animate({
        'opacity': '.50'
    }, 300, 'linear');
    $('.box').animate({
        'opacity': '1.00'
    }, 300, 'linear');
    $('.backdrop,.' + thisBox).css('display', 'block');
});

$('.close').click(function() {
    close_box();
});

$('.backdrop').click(function() {
    close_box();
});

function close_box() {
    $('.backdrop,.box').animate({
        'opacity': '0'
    }, 300, 'linear', function() {
        $('.backdrop,.box').css('display', 'none');
    });
}​
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T16:34:20.023

一种选择是使用数据属性作为选择器[http://jsfiddle.net/Q676T/1/](http://jsfiddle.net/Q676T/1/)

```
$(document).ready(function() {

    $('.lightbox').click( function() {
        var dataTag = $(this).data('tag');
        $('.backdrop')
            .animate({'opacity': '.50'}, 300, 'linear')
            .css('display', 'block');

        $('.box[data-tag='+dataTag+']')
            .animate({'opacity': '1'}, 300, 'linear')
            .css('display', 'block');    
    });

    $('.close, .backdrop').click( function() {
        $('.backdrop, .box')
            .animate({'opacity': '0'}, 300, 'linear', 
                     function(){ $(this).css('display', 'none');})

    });
});

​ 
```

# java - 将集合类型从 scala 转换为 java 的问题

> ID：10015180
> 
> 赞同：2
> 
> 时间：2012-04-04T16:16:41.400
> 
> 标签：java, scala, cassandra, hector

我正在使用 hector HOM 库来访问我的 cassandra 数据存储。这个库是用 java 编写的，在使用 Collections 时使用了一些反射。

我有一个 java 模型，其中包含我要检索的字符串列表。不幸的是，我得到以下异常：

```
Execution exception [[HectorObjectMapperException: exception while instantiating Collection type, scala.collection.JavaConversions$SeqWrapper]]

Caused by: me.prettyprint.hom.cache.HectorObjectMapperException: exception while instantiating Collection type, scala.collection.JavaConversions$SeqWrapper
    at me.prettyprint.hom.CollectionMapperHelper.instantiateCollection(CollectionMapperHelper.java:87) ~[hector-object-mapper-3.0-02.jar:na]
    at me.prettyprint.hom.HectorObjectMapper.createObject(HectorObjectMapper.java:297) ~[hector-object-mapper-3.0-02.jar:na]
    at me.prettyprint.hom.HectorObjectMapper.getObject(HectorObjectMapper.java:105) ~[hector-object-mapper-3.0-02.jar:na]
    at me.prettyprint.hom.EntityManagerImpl.find(EntityManagerImpl.java:132) ~[hector-object-mapper-3.0-02.jar:na]
Caused by: java.lang.InstantiationException: scala.collection.JavaConversions$SeqWrapper
    at java.lang.Class.newInstance0(Class.java:340) ~[na:1.6.0_29]
    at java.lang.Class.newInstance(Class.java:308) ~[na:1.6.0_29]
    at me.prettyprint.hom.CollectionMapperHelper.instantiateCollection(CollectionMapperHelper.java:75) ~[hector-object-mapper-3.0-02.jar:na]
    at me.prettyprint.hom.HectorObjectMapper.createObject(HectorObjectMapper.java:297) ~[hector-object-mapper-3.0-02.jar:na] 
```

我已经尝试显式创建一个 java.util.list 对象，但它仍然会导致同样的问题。这是我创建和持久化模型的代码：

```
val geoModel = new GeoModel(geoRK)
val thingList: java.util.List[java.lang.String] = things match {
  case Some(t) => t.map(s => s.toString())
  case None => new java.util.ArrayList()
}
geoModel.setThings(thingList)
geoDAO.upsertModel(geoModel) 
```

该模型仍然很好，我可以在 cassandra 中看到它：

```
(column=things, value=scala.collection.JavaConversions$SeqWrapper:0, timestamp=1333555422145002) 
```

问题是当检索对象时，赫克托似乎不知道如何处理 scala.collection 类型。

有没有办法解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T17:22:38.283

编辑：

抱歉...误导 scala.collection.JavaConversions$SeqWrapper 的 toString impl 它返回相同...

但是，您可以自己从 List 创建一个 java.util.List 作为解决方法。

原来的：

您可以使用 collections.JavaConverters 而不是 collection.JavaConversion。

```
scala> import collection.JavaConverters._
import collection.JavaConverters._

scala> List(1,2,3).asJava
res1: java.util.List[Int] = [1, 2, 3] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T19:07:58.780

实际上，我通过将列表初始化为 java.util.ArrayList[String] 而不是让 map 函数创建新列表来解决它：

```
val thingList = new java.util.ArrayList[String]
things match {
  case Some(t) => t.map(s => thingList.add(s))
  case None => new java.util.ArrayList()
} 
```

# java - 在多线程 Java 程序中，每个线程是否都有自己的 System.out 副本？

> ID：10015182
> 
> 赞同：14
> 
> 时间：2012-04-04T16:16:50.000
> 
> 标签：java, multithreading, io, outputstream

我正在编写一个多线程 Java 程序，其中每个线程都可能需要将其标准输出重定向到一个单独的文件。每个线程都有自己的文件。是否可以在“每个线程”的基础上重定向 System.out，或者是否可以在所有线程中对 System.out 进行全局更改？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-04T16:18:08.703

> 是否可以在“每个线程”的基础上重定向 System.out

不，这是不可能的。 `System.out`是静态的，当 JVM 最初启动时，每个 JVM 都有一个作为系统类加载器的一部分加载。虽然当然建议使用每个线程正确的日志记录调用，但我认为您不能这样做是有原因的。`System.out`以这种方式使用的可能是第 3 方库或其他代码。

您可以做的一件事（作为一个激进的建议）是自己制作`PrintStream`一个委托给`ThreadLocal<PrintStream>`. 但是您需要`@Override`应用程序调用的适当方法才能使其在每个线程中工作。

最后，如果您因为担心并发而问这个问题，`System.out`那么`PrintStream`它已经`synchronized`被隐藏起来并且可以被多个线程安全地使用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-20T14:29:53.160

> 是否可以在“每个线程”的基础上重定向 System.out

**Maia 公司**的一些开发人员提供了 PrintStream 的公共实现，该实现为本文中的每个线程提供一个“ *STDOUT* ”：“[线程特定 System.out](https://stackoverflow.com/users/179850/gray) ”。

在他们的实现中，它们仅覆盖写入方法、flush、close 和 checkError。在他们的情况下似乎就足够了。

正如[@Gray](https://stackoverflow.com/users/179850/gray)在他的回答中所说，他们**不需要**“*需要@Override 所有调用的方法以使其在每个线程中工作”。*

* * *

**注释：**

*请在下面找到来自 Maia 的原始代码。*

*我在回程机器上找到[了它。](https://stackoverflow.com/users/179850/gray)原始页面已从 Maia 的网站上删除。为了读者的好奇心，我在这里复制它。**我不为此代码提供任何支持。***

* * *

**主.java**

> *创建一个 ThreadPrintStream，将其安装为 System.out，并创建并启动 10 个线程。*

```
public class Main {
  public static void main(String[] args) {
    // Call replaceSystemOut which replaces the
    // normal System.out with a ThreadPrintStream. 
    ThreadPrintStream.replaceSystemOut();

    // Create and start 10 different threads.  Each thread
    // will create its own PrintStream and install it into
    // the ThreadPrintStream and then write three messages
    // to System.out.
    for (int i = 0;  i < 10;  i++) {
      Thread thread = new Thread(new StreamText());
      thread.start();

      // Report to the console that a new thread was started.
      System.out.println("Created and started " + thread.getName());
    }
  }
} 
```

**StreamText.java**

> *每个线程都有一个简单的 Runnable，它为线程的输出打开一个文件并将其安装到 ThreadPrintStream 中。*

```
import java.io.BufferedOutputStream;
import java.io.FileOutputStream;
import java.io.PrintStream;

/** A small test class that sets System.out for the currently executing
 * thread to a text file and writes three messages to System.out. */
public class StreamText implements Runnable {
  @Override
  public void run() {
    try {
      // Create a text file where System.out.println()
      // will send its data for this thread.
      String name = Thread.currentThread().getName();
      FileOutputStream fos = new FileOutputStream(name + ".txt");

      // Create a PrintStream that will write to the new file.
      PrintStream stream = new PrintStream(new BufferedOutputStream(fos));

      // Install the PrintStream to be used as System.out for this thread.
      ((ThreadPrintStream)System.out).setThreadOut(stream);

      // Output three messages to System.out.
      System.out.println(name + ": first message");
      System.out.println("This is the second message from " + name);
      System.out.println(name + ": 3rd message");

      // Close System.out for this thread which will
      // flush and close this thread's text file.
      System.out.close();
    }
    catch (Exception ex) {
      ex.printStackTrace();
    }
  }
} 
```

**线程打印流.java**

> *扩展 java.io.PrintStream。ThreadPrintStream 对象替换了普通的 System.out 并为每个线程维护了一个单独的 java.io.PrintStream。*

```
import java.io.ByteArrayOutputStream;
import java.io.PrintStream;

/** A ThreadPrintStream replaces the normal System.out and ensures
 * that output to System.out goes to a different PrintStream for
 * each thread.  It does this by using ThreadLocal to maintain a
 * PrintStream for each thread. */
public class ThreadPrintStream extends PrintStream {

  /** Changes System.out to a ThreadPrintStream which will
   * send output to a separate file for each thread. */
  public static void replaceSystemOut() {

    // Save the existing System.out
    PrintStream console = System.out;

    // Create a ThreadPrintStream and install it as System.out
    ThreadPrintStream threadOut = new ThreadPrintStream();
    System.setOut(threadOut);

    // Use the original System.out as the current thread's System.out
    threadOut.setThreadOut(console);
  }

  /** Thread specific storage to hold a PrintStream for each thread */
  private ThreadLocal<PrintStream> out;

  private ThreadPrintStream() {
    super(new ByteArrayOutputStream(0));
    out = new ThreadLocal<PrintStream>();
  }

  /** Sets the PrintStream for the currently executing thread. */
  public void setThreadOut(PrintStream out) {
    this.out.set(out);
  }

  /** Returns the PrintStream for the currently executing thread. */
  public PrintStream getThreadOut() {
    return this.out.get();
  }

  @Override public boolean checkError() {
    return getThreadOut().checkError();
  }

  @Override public void write(byte[] buf, int off, int len) {
    getThreadOut().write(buf, off, len);
  }

  @Override public void write(int b) { getThreadOut().write(b); }

  @Override public void flush() { getThreadOut().flush(); }
  @Override public void close() { getThreadOut().close(); }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-04T16:28:42.257

你是对的，但不是你想的那样。当一个线程使用

```
System.out.println(); 
```

它需要**引用** `System.out`的副本，而不是 this 引用的对象的副本。

这意味着所有线程通常会看到相同的对象来写入输出。

注意：此字段不是线程安全的，如果您调用此字段，则`System.setOut(PrintStream)`存在潜在的、不受欢迎的竞争条件，其中不同的线程具有 System.out 的不同本地副本。这不能用来解决这个问题。

> 是否可以在“每个线程”的基础上重定向 System.out

您可以通过用您自己的线程特定实现替换 System.out 来做到这一点。即 PrintStream 的子类。我这样做是为了记录我希望每个线程的输出保持一致而不是交错的地方。例如，想象一下同时在两个线程中打印两个堆栈跟踪。;)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-04T16:18:44.773

`System.out`是静态的，因此所有线程之间共享同一个实例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-07T14:22:05.567

> 是否可以在“每个线程”的基础上重定向 System.out

您可以将它们全部重定向到您的委托，该委托将负责“每线程”逻辑。

[这是](https://stackoverflow.com/questions/37654742/multi-threaded-jbehave-logging-mess/37681665#37681665)具有自己的文件输出的并行 JBehave 测试的示例。

# vim - 如何在 vim 中刷新 CommandT 可用的文件

> ID：10015183
> 
> 赞同：23
> 
> 时间：2012-04-04T16:16:53.417
> 
> 标签：vim, macvim

我偶尔会遇到这个问题：

在 macvim 我使用在当前目录中创建一个新文件

```
:e foo.coffee 
```

我保存该文件并继续在 macvim 中工作。我关闭并重新启动 macvim，并`<Leader>T`尝试打开该文件，但它没有被列出。

我`foo.bar`在目录中看到可以手动打开，但是CommandT为什么不可用？有没有办法在头部*打孔*CommandT 并刷新可用的文件？

谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-09-05T05:20:18.923

当 CommandT 打开时，您也可以使用`<C-f>`（即 control-f）。

参考：[https](https://github.com/wincent/Command-T) ://github.com/wincent/Command-T在标题为：

> 当提示或文件列表具有焦点时，以下映射处于活动状态

（我想链接到标题，但自述文件是纯文本，所以没有标题锚）。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-04T16:19:45.677

是的，我也有它的映射，但如果您愿意，可以手动键入命令：

```
noremap <F5> :CommandTFlush<CR> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-23T18:13:04.447

最后在 mvim 中输入这个对我有用：

`:ClearCtrlPCache`

# c++ - OpenMP 到分布式内存代码

> ID：10015198
> 
> 赞同：0
> 
> 时间：2012-04-04T16:17:32.423
> 
> 标签：c++, openmp, parallel-processing

我有一个与并行计算有关的问题。我有一个用 C++ 编写的相当大的代码，它在共享内存的基础上使用 OpenMP 并行化。我想问是否可以将这个共享内存代码转换为分布式内存代码？

如果可能，需要执行哪些步骤？谢谢您的合作。

谢谢，拉胡尔·辛格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:54:02.940

大多数可以并行化以在共享内存计算机上运行的程序也可以并行化以在分布式内存计算机上运行。所以是的，您的 OpenMP 程序解决的问题可能可以在分布式内存计算机上解决。但是，将您的 OpenMP 程序转换为分布式内存程序是另一回事。最好建议您从串行实现开始并将其并行化，而不是尝试将一种并行思维模式适应另一种并行执行模式。

因此，您寻求的第一步可能是使您的程序无与伦比。但是，正如评论员已经指出的那样，如果不了解更多关于您的应用程序的信息，很难提供比我已经拥有的更有用的建议（而且我根本没有提供任何非常有用的建议）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T17:18:27.493

共享内存和分布式内存是并行计算中两种截然不同的范式，这通常意味着不同的思维策略。一些并行编程框架，如 UPC 或 MPI，可以模拟在共享或分布式机器上运行，尽管最好不要这样做，因为例如在这里，UPC 旨在用于共享内存，而 MPI 旨在用于分布式记忆机器。我不确定 OpenMP。

无论哪种情况，我的建议是首先考虑如何在分布式架构上的代码中获得并行性，然后使用 MPI。如果您碰巧从事计算科学业务，那么已经有编写得很好的软件包，例如`PETSc`来自 Argonne 国家实验室的 和`Trilinos`来自桑迪亚国家实验室的，它们可能会帮助您更快地发展。

# android - Android 应用程序不会启动 noClassDefFoundError

> ID：10015203
> 
> 赞同：9
> 
> 时间：2012-04-04T16:18:02.543
> 
> 标签：android, error-handling, android-emulator, logcat, acra

我正在为 android 创建一个 gps 应用程序！现在我偶然发现了一个问题。该应用程序根本没有启动......关于如何解决这个问题的任何想法？

```
04-05 12:54:50.877: D/dalvikvm(540): Not late-enabling CheckJNI (already on)
04-05 12:54:51.018: I/dalvikvm(540): Turning on JNI app bug workarounds for target SDK version 5...
04-05 12:54:51.417: I/dalvikvm(540): Could not find method org.acra.ACRA.init, referenced from method com.kulplex.gaia.GaiaApp.onCreate
04-05 12:54:51.417: W/dalvikvm(540): VFY: unable to resolve static method 652: Lorg/acra/ACRA;.init (Landroid/app/Application;)V
04-05 12:54:51.417: D/dalvikvm(540): VFY: replacing opcode 0x71 at 0x0000
04-05 12:54:51.457: D/AndroidRuntime(540): Shutting down VM
04-05 12:54:51.457: W/dalvikvm(540): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
04-05 12:54:51.477: E/AndroidRuntime(540): FATAL EXCEPTION: main
04-05 12:54:51.477: E/AndroidRuntime(540): java.lang.NoClassDefFoundError: org.acra.ACRA
04-05 12:54:51.477: E/AndroidRuntime(540):  at com.kulplex.gaia.GaiaApp.onCreate(GaiaApp.java:54)
04-05 12:54:51.477: E/AndroidRuntime(540):  at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:969)
04-05 12:54:51.477: E/AndroidRuntime(540):  at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3954)
04-05 12:54:51.477: E/AndroidRuntime(540):  at android.app.ActivityThread.access$1300(ActivityThread.java:123)
04-05 12:54:51.477: E/AndroidRuntime(540):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1185)
04-05 12:54:51.477: E/AndroidRuntime(540):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-05 12:54:51.477: E/AndroidRuntime(540):  at android.os.Looper.loop(Looper.java:137)
04-05 12:54:51.477: E/AndroidRuntime(540):  at android.app.ActivityThread.main(ActivityThread.java:4424)
04-05 12:54:51.477: E/AndroidRuntime(540):  at java.lang.reflect.Method.invokeNative(Native Method)
04-05 12:54:51.477: E/AndroidRuntime(540):  at java.lang.reflect.Method.invoke(Method.java:511)
04-05 12:54:51.477: E/AndroidRuntime(540):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-05 12:54:51.477: E/AndroidRuntime(540):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-05 12:54:51.477: E/AndroidRuntime(540):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-05-16T18:18:31.330

更新到最新的 Android 工具后，我遇到了同样的问题。

在项目属性、Java Build Path、Order 和 Export 部分中，我必须确保选中了 Android Private Libraries。

然后我不得不清理项目。之后，它似乎工作。

> Java Build Path 的“Order and Export”确实是一个问题。
> 
> 升级时，新的“Android Private Libraries”的“Order and Export”并不总是被选中。android-support-v4.jar 现在位于“Android Private Libraries”部分。
> 
> 要解决此问题，请转到“订购和导出”并选中“Android 私有库”。然后刷新/清理/重建。
> 
> 在为库项目完成此“修复”后，您可能需要关闭并重新打开任何依赖项目，因为他们可能不会立即看到此“修复”。

[我在这里](https://groups.google.com/forum/?fromgroups=#!topic/adt-dev/epOfZbKPFdk)找到了答案。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-19T07:59:13.350

如果您最近更新到[ADT 17](http://tools.android.com/download)及更高版本，他们已经更改了`lib`库处理。

所以您需要将您的`lib`目录重命名为`libs`，然后右键单击您的项目 > 属性 > Java 构建路径 > 库 > 选择所有带有错误标记的 jar，然后单击`remove`> 单击`add JARs`> 从新`libs`目录中选择所有 jar。

希望这可以帮助。

# android - 我什么时候应该在 android 中调用 glEnableClientState() 和 glDisableClientState()

> ID：10015209
> 
> 赞同：6
> 
> 时间：2012-04-04T16:18:08.940
> 
> 标签：android, opengl-es

我只在接口的方法中调用`glEnableClientState()`一次。例如：`onSurfaceCreated()``GLSurfaceView.Renderer`

```
public class GLRenderer implements GLSurfaceView.Renderer {
   @Override
   public void onSurfaceCreated(GL10 gl, EGLConfig config) {
      gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
      gl.glEnableClientState(GL10.GL_COLOR_ARRAY);
      ...
} 
```

之后我不再调用它们。我从不调用该`glDisableClientState()`方法。但我看到许多程序员调用这两种方法，通常将它们包装在所有绘图调用中。

我的方法有什么问题吗？或者使用将它们包装在所有绘图调用周围的方法是一种好习惯还是更有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T19:48:46.877

只要您的所有绘图调用都需要相同的状态，我认为您的方法没有任何问题。如果您正在绘制没有法线/颜色的东西，您不希望启用法线/颜色数组等。

如果您的所有对象都确定使用相同的数组，那么您的方法可能是最好的，因为您可以消除不必要的 opengl 调用。在每个对象之后禁用所有内容可能会降低性能，但通常更安全的是您不会意外启用您不想要的东西。

# database - 映射整个数据库以查看 Crystal Reports

> ID：10015211
> 
> 赞同：0
> 
> 时间：2012-04-04T16:18:14.150
> 
> 标签：database, mapping, crystal-reports-xi

请让我知道它是否正确？我正在映射整个数据库以查看我使用公式和参数过滤并获取所需报告的报告。

我的意思是数据库中有 20 多个表，我需要 7 个主表来获取显示报告的必填字段 - 是否建议在水晶报表中映射整个 7 个主表以查看报告？

期待您宝贵的回复问候，蒂鲁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T04:12:32.890

您必须映射具有您在报告中使用的字段的所有表，除非您通过视图或存储过程访问这些表。如果您使用视图或存储过程来获取数据，那么您可以仅引用这些视图和/或存储过程。

# sql-server - 使用 SSMS 设计的查询的奇怪行为

> ID：10015212
> 
> 赞同：0
> 
> 时间：2012-04-04T16:18:16.817
> 
> 标签：sql-server, sql-server-2008, ssms

对于一些简短的查询，我一直在 SSMS 中使用查询设计器，它具有以下有趣的行为：当我添加过滤器时，SSMS在字符串的开头`LIKE '%text here%'`添加了字母。`N`

它似乎根本不会影响查询，如果没有它，它会运行良好。有人知道为什么 SSMS 会以这种方式生成查询吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T16:21:04.693

这`N'<your text here>'`意味着字符串应被视为 unicode 文本。这样做是安全的，以防需要 Unicode 字符。

这是告诉 T-SQL 将值视为`nvarchar`而不是`varchar`数据的一种简短方法。

# python - 如何访问 matplotlib.backends.backend_qt4agg.NavigationToolbar2QTAgg 已知的信息

> ID：10015213
> 
> 赞同：0
> 
> 时间：2012-04-04T16:18:18.050
> 
> 标签：python, qt4, matplotlib

我有一个 PyQt4 应用程序，其中嵌入了 matplotlib 图形。![在此处输入图像描述](../Images/89520d0f43c7c6e721b857af5d3c03d9.png)

如您所见，我已将导航工具栏添加为小部件。我希望能够根据左侧图上显示的数据更新右侧的图。似乎最简单的方法是劫持“缩放”中包含的信息。或者至少知道何时发生缩放，以便我可以重新计算并在右侧重绘。任何人都有一个好的方法（从pick_event级别重新实现将是最后的手段）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:05:40.833

我想出的最好方法是创建一个以 NavigationToolbar 作为父级的自定义导航工具栏。然后我只是在自定义版本中添加了一个信号并覆盖了 draw 方法。通过这种方式，我可以调用原始的 draw 方法并使用 NavigationToolbar 数据结构中所需的任何信息发出信号。

```
class NavigationToolbarCustom(NavigationToolbar):
zoom_changed = pyqtSignal(float, float, name='zoomChanged')
def __init__(self, canvas, parent):
    NavigationToolbar.__init__(self, canvas, parent)
    #super(NavigationToolbarCustom, self).__init__(self, canvas, parent)
def draw(self):
    super(NavigationToolbarCustom,self).draw()
    if self._xypress == None:
         home_view = self._views.home()
         Xmin,Xmax = home_view[0][0:2]
    else:
        lastx, lasty, a, ind, lim, trans = self._xypress[0]
        Xmin,Xmax=a.get_xlim()
    self.zoom_changed.emit(Xmin,Xmax) 
```

# asp.net - 如何在 Detailview 中插入格式为（“MM/dd/yyyy”）的日期字段？

> ID：10015216
> 
> 赞同：0
> 
> 时间：2012-04-04T16:18:28.783
> 
> 标签：asp.net, .net, datetime

我正在尝试将具有“MM/dd/yyyy”格式的日期插入详细视图中的日期格式字段中。但我收到错误消息：

```
 String was not recognized as a valid DateTime 
```

我试过喜欢

```
<asp:TextBox ID="TextBox2" runat="server" 
Text='<%# Bind("RenewalDate","{0,MM/dd/yyyy}")%>' ></asp:TextBox> 
```

如何插入格式为 MM/dd/yyyy 的日期？？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T16:33:49.477

格式字符串无效。您需要在占位符后使用冒号而不是逗号：

```
Text='<%# Bind("RenewalDate","{0:MM/dd/yyyy}")%>' 
```

这应该可以解决问题，假设`RenewalDate`是一`DateTime`列。如果它不是`DateTime`列，则需要在应用格式之前对其进行转换：

```
Text='<%# Convert.ToDateTime(Bind("RenewalDate")).ToString("MM/dd/yyyy") %>' 
```

**编辑**

为确保输入有效，您可以添加比较和必填字段验证器：

```
<asp:RequiredFieldValidator ID="reqDateValidator" runat="server" Display="Dynamic" ErrorMessage="*" ControlToValidate="TextBox1" />
<asp:CompareValidator
    id="dateValidator" runat="server" 
    Type="Date"
    Operator="DataTypeCheck"
    ControlToValidate="TextBox1" 
    ErrorMessage="Invalid Date">
</asp:CompareValidator> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T16:20:35.020

您`RenewalDate`从数据库中导入的对象**不是**有效`DateTime`对象。

否则 - 它不会向您显示此错误。

显示您获得值的查询。

# php - PHP - “if”中的“while”问题交替html表格行颜色

> ID：10015223
> 
> 赞同：3
> 
> 时间：2012-04-04T16:18:52.433
> 
> 标签：php, mysql, if-statement, while-loop

```
$banana=0;
$view = mysql_query('SELECT ......') or die ('Encountered an error.') ;
while($rows3=mysql_fetch_array($view))
{
    $total_price2=$rows3['qty']*$rows3['number'];
    $banana = $banana + 1;

    if ($total_price2!=0)
    {   
        if ($banana %2 ==0)
        {   
            echo "<tr class=\"alt\">";
        }   
        else
        {
            echo "<tr>";
        }   
        echo "<td>".$rows3['member']."</td>";
        echo "<td>".$rows3['payment']."</td>";
        echo "<td>$".number_format($total_price2,2)."</td>";                
    }

    echo "</tr>";
} 
```

**问题：**

*   “香蕉”通过使用模数 (%) 来检查香蕉是否为奇数，从而改变表格行 (class="alt") 的颜色。
*   不工作，我看到浏览器正在自动关闭开始`<tr>`标签。

例如：

`<tr><td>person</td><td>data</td><td>$10.00</td></tr>`

`<tr class="alt"></tr>`（以这种方式重复）

# 更新

我发现重复`banana`总是返回 ODD NUMBERS: 1 , 3, 5 等

> **MySQL 没有正确运行**

`SELECT table1.member, table1.paid, table1.payment,table2.qty,table3.number FROM table1,table2,table3 WHERE table1.member = table2.member AND table1.payment="fruit"`

它给了我这样的错误数据：

1.  人 1 $10.00
2.  人1 $0.00
3.  人2 $10.00
4.  人2 $0.00

ETC

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T16:28:23.427

首先尝试这样做以进行调试：

`echo "<tr class=\"alt\">&nbsp;";`

我的猜测是您的 <tr> 中没有包含任何数据，并且您的浏览器正在将其压缩为 0 px 高。

编辑：我不完全确定为您的 <tr> 提供一个类会根据某些浏览器 DOM 解析过滤到 <td> 中。每当我做斑马划船时，我都会将类分配给 <td>。不过，从任何标准来看，我都不是设计师。:)

请幽默我，试试这个：

```
$banana=0;
$view = mysql_query('SELECT ......') or die ('Encountered an error.') ;
while($rows3=mysql_fetch_array($view))
{
    $total_price2=$rows3['qty']*$rows3['number'];
    $banana++;
    if ($banana % 2 == 0) {   
        $td_class = "alt";
    } else {
        $td_class = "";
    }
    echo "<tr>";
    if ($total_price2!=0) {     
        echo "<td class='{$td_class}'>".$rows3['member']."</td>";
        echo "<td class='{$td_class}'>".$rows3['payment']."</td>";
        echo "<td class='{$td_class}'>$".number_format($total_price2,2)."</td>";                            
    }
    echo "</tr>";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T16:31:27.047

如果一切都失败了，你可以只使用 CSS：

```
tr {background-color: blue;}
tr:nth-of-type(2n) {background-color: red;} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T02:58:43.687

那是行不通的。只有在`$total_price2!=0`. 看来您应该只`</tr>`在该 IF 块内输出结束标记。

试试这个：

```
<?php
$banana=0;
$view = mysql_query('SELECT ......') or die ('Encountered an error.') ;
while($rows3=mysql_fetch_array($view))
{
    $total_price2=$rows3['qty']*$rows3['number'];

    if ( !$total_price2)
        continue;

    $banana = $banana + 1;

    if ($banana %2 ==0)
    {   
        echo "<tr class=\"alt\">";
    }   
    else
    {
        echo "<tr>";
    }

    echo "<td>".$rows3['member']."</td>";
    echo "<td>".$rows3['payment']."</td>";
    echo "<td>$".number_format($total_price2,2)."</td>";

    echo "</tr>";
} 
```

# iphone - 如何访问 Interface Builder (Storyboard) 中的其他 UI 元素？

> ID：10015228
> 
> 赞同：1
> 
> 时间：2012-04-04T16:18:58.610
> 
> 标签：iphone, ios, xcode, interface-builder

我可以从“对象选择”中拖放一个 ui 元素并将其添加到我当前的场景中（在图片中标记为红色），但我该如何编辑它？Xcode 不会在编辑器中显示它，双击元素也不会使其可见。

![在此处输入图像描述](../Images/368ebf4714cece4d031f2f9dfc3d439c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:29:33.017

取决于你想用它做什么......也许你可以让它成为当前视图的子视图，以便对其进行配置，然后如果你不希望它出现，则将其从代码中的超级视图中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T17:03:50.430

根据您提供的层次结构图片，您知道您添加的视图不是视图控制器的视图层次结构的一部分，对吗？您需要将视图控制器的视图属性设置为此视图才能看到它。如果您打算将此添加为当前视图的子视图，则应将视图从对象存储库直接拖到视图上。或者，您可以将其从左侧的视图控制器场景中拖动并以这种方式将其关联为子视图。

另外，请注意，当您将视图拉到画布上时，它是白色的。如果您最初将其设置为当前视图的子视图，它可能已经存在并且您只是没有看到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T13:20:17.160

我想正确的方法是将额外的视图添加到视图控制器的视图中，并将其隐藏。是的，以这种方式配置视图会很痛苦。另一方面，这些视图确实得到了适当的内存处理，并且可以在内存压力下被卸载。

# php - 强制下载 msi 文件

> ID：10015229
> 
> 赞同：4
> 
> 时间：2012-04-04T16:18:59.407
> 
> 标签：php, html, http-headers, download

我一定是过得很充实的一天。我似乎无法弄清楚这一点。

我的网站上有一个页面应该强制下载 msi 文件，但我想保留页面的 html 和下载说明。

到目前为止，我已经在 html 中尝试了以下标记（注意我只能访问此页面的正文）

```
<meta http-equiv="Refresh" content="0; URL=file.msi"> 
```

但是在Firefox中，这将二进制文件显示为乱码。

接下来我尝试插入以下php

```
$file = "file.msi";
header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename='.basename($file));
header('Content-Transfer-Encoding: binary');
header('Expires: 5');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Pragma: public');
header('Content-Length: ' . filesize($file));
ob_clean();
flush();
readfile($file);
exit; 
```

但是，这关闭了选项卡/窗口，并且没有离开安装说明。

最后，我在 html 中尝试了以下内容：

```
<META HTTP-EQUIV="Content-Type" CONTENT="application/octet-stream"> 
<meta http-equiv="content-disposition" content="attachment; filename=file.msi" /> 
```

但这拒绝下载文件。任何指针都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:42:56.790

假设 Apache，如果你想使用一个`.htaccess`文件，你可以添加以下内容：

```
AddType application/octet-stream .msi 
```

根据[这个来源](http://css-tricks.com/snippets/htaccess/force-files-to-download-not-open-in-browser/)。然后，您可以链接到该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T16:37:32.730

`<meta>`标签适用于它们嵌入的页面。它们不会改变文件的下载方式，这被认为是一个完全独立的页面。

您应该有类似的东西，`<a href="downloadmsi.php" target="_new" />download</a>`以便下载发生在与说明页面不同的窗口中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T17:22:23.797

我发现[这个链接](http://www.dreamincode.net/forums/topic/304496-trouble-with-forced-download-of-msi-file/)帮助我创建了一个 PHP 文件以链接到该文件，该文件将指定要下载的 .msi。第一次工作。

可见下载页面，downloads.php，也许

```
<a href="/downloads/?version=App.Installer.msi">download now</a> 
```

来自上述href的服务器处理页面，即example.com/downloads/index.php

```
$root = realpath($_SERVER["DOCUMENT_ROOT"]);
$file_dl = $_GET['version'];
header('Content-disposition: attachment; filename='.$file_dl);
header('Content-type: application/x-ole-storage');
readfile($root.'/downloads/'.$file_dl); 
```

另外，不确定是否有必要，但我添加到 .htaccess 文件中：`AddType application/octet-stream .msi`正如[Marc B所建议的那样](https://stackoverflow.com/users/118068/marc-b)

# php - php检查文件名是否存在，重命名文件

> ID：10015232
> 
> 赞同：4
> 
> 时间：2012-04-04T16:19:19.887
> 
> 标签：php, file-exists

如何检查文件名是否存在，重命名文件？

例如，`1086_002.jpg`如果文件存在，我上传图像，将文件重命名为`1086_0021.jpg`并保存，如果`1086_0021.jpg`存在，重命名`1086_00211.jpg`并保存，如果`1086_00211.jpg`存在，重命名`1086_002111.jpg`并保存...

这是我的代码，它只有在`1086_002.jpg`存在的情况下才能执行，将文件重命名为`1086_0021.jpg`，也许应该做一个 foreach，但是如何？

```
//$fullpath = 'images/1086_002.jpg';

if(file_exists($fullpath)) {
    $newpieces = explode(".", $fullpath);
    $frontpath = str_replace('.'.end($newpieces),'',$fullpath);
    $newpath = $frontpath.'1.'.end($newpieces);
}

file_put_contents($newpath, file_get_contents($_POST['upload'])); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T16:25:01.010

尝试类似：

```
$fullpath = 'images/1086_002.jpg';
$additional = '1';

while (file_exists($fullpath)) {
    $info = pathinfo($fullpath);
    $fullpath = $info['dirname'] . '/'
              . $info['filename'] . $additional
              . '.' . $info['extension'];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T16:22:31.743

为什么不只是在文件名上附加一个时间戳？这样您就不必担心已多次上传的文件的任意长文件名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T16:35:45.367

我希望这有帮助

```
$fullPath = "images/1086_002.jpg" ;
$fileInfo = pathinfo($fullPath);
list($prifix, $surfix) = explode("_",$fileInfo['filename']);
$x = intval($surfix);
$newFile = $fileInfo['dirname'] . DIRECTORY_SEPARATOR . $prifix. "_" . str_pad($x, 2,"0",STR_PAD_LEFT)  . $fileInfo['extension'];
while(file_exists($newFile)) {
    $x++;
    $newFile = $fileInfo['dirname'] . DIRECTORY_SEPARATOR . $prifix. "_" . str_pad($x, 2,"0",STR_PAD_LEFT)  . $fileInfo['extension'];
}

file_put_contents($newFile, file_get_contents($_POST['upload'])); 
```

我希望这有帮助

谢谢

:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-06T17:52:41.670

我觉得这样会更好。它将有助于跟踪同名文件的上传次数。如果找到具有相同名称的文件，它的工作方式与 Windows 操作系统重命名文件的方式相同。

工作原理：如果**媒体**目录有一个名为**002.jpg**的文件，并且您尝试上传同名文件，它将被保存为**002(1).jpg**再次尝试上传相同文件将保存新文件如**002(2).jpg**

希望能帮助到你。

```
$uploaded_filename_with_ext = $_FILES['uploaded_image']['name'];
$fullpath = 'media/' . $uploaded_filename_with_ext;
$file_info = pathinfo($fullpath);
$uploaded_filename = $file_info['filename'];

$count = 1;                 
while (file_exists($fullpath)) {
  $info = pathinfo($fullpath);
  $fullpath = $info['dirname'] . '/' . $uploaded_filename
  . '(' . $count++ . ')'
  . '.' . $info['extension'];
}
$image->save($fullpath); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T16:23:09.097

您可以将`if`语句更改为`while`循环：

```
$newpath = $fullpath;
while(file_exists($newpath)) {
    $newpieces = explode(".", $fullpath);
    $frontpath = str_replace('.'.end($newpieces),'',$fullpath);
    $newpath = $frontpath.'1.'.end($newpieces);
}

file_put_contents($newpath, file_get_contents($_POST['upload'])); 
```

# iphone - 计算表格视图内容的底部

> ID：10015235
> 
> 赞同：0
> 
> 时间：2012-04-04T16:19:23.540
> 
> 标签：iphone, uitableview, uiscrollview

有人可以在这里检查我的想法：我想知道何时将表格视图拉过底部（希望我知道这个术语）......当最后一行下方的 contentInset 可见并且释放导致反弹时。这是我认为的，但是我几乎不能用英语描述它，并且想不出一个好的方法来测试它....

```
CGFloat contentBottom = MAX(0, tableView.contentSize.height - tableView.frame.size.height);
BOOL isScrolledToBottom = tableView.contentOffset.y > contentBottom; 
```

它在调试器中看起来正好在几个像素之内，但我觉得我错过了一些更简单的方法。

# ajax - 将 MVC Ajax 转换为 Jquery

> ID：10015238
> 
> 赞同：0
> 
> 时间：2012-04-04T16:19:30.327
> 
> 标签：ajax, asp.net-mvc-3, jquery, asp.net-ajax

我正在学习如何将 MVC Ajax 转换为 jquery ajax，这样我可以做更多的事情。

这是旧的ajax，我拿出了加载的东西

```
@Ajax.ActionLink("Update Tweets", "Index", "Home",
    new AjaxOptions
    {
        UpdateTargetId = "TweetBox",
        InsertionMode = InsertionMode.InsertBefore,
        HttpMethod = "Get",
    }) 
```

我需要将其转换为 jquery ajax。它似乎正在工作让我们看看代码

```
<script>
    $(document).ready(function () {
        $("#StartLabel").click(function (e) {

            $.ajax({
                type: "Get",
                url: '/Home/Index',
                //  data: "X-Requested-With=XMLHttpRequest",
                //  contentType: "application/text; charset=utf-8",
                dataType: "text",
                async: true,
                //    cache: false,
                success: function (data) {
                    $('#TweetBox').prepend(data);
                    alert('Load was performed.');
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    alert(textStatus);
                },
                complete: function (resp) {
                    alert(resp.getAllResponseHeaders());
                }
            });
        });
    });
</script> 
```

在 microsoft ajax 中，它在标头中设置 XML 请求。我也需要添加吗？我只是在分页我的控制器，该控制器对 twitter 执行查询并将数据附加到顶部。

我正在使用 fiddler 来查看请求有何不同，但结果是相同的。

我还注意到如果我将文本放入数据中：对象将其放入标题中。我不认为这是对的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-06T03:47:14.097

这是使用 Ajax 和 Jason 数据的简单示例

```
// Post JSON data
    [HttpPost]
    public JsonResult JsonFullName(string fname, string lastname)
    {
        var data = "{ \"fname\" : \"" + fname  + " \" , \"lastname\" : \"" + lastname + "\" }";
        return Json(data, JsonRequestBehavior.AllowGet);  
    } 
```

在视图中添加对查询的引用，如下@section Scripts{

```
<script src="~/Scripts/modernizr-2.6.2.js"></script>
<script src="~/Scripts/jquery-1.8.2.intellisense.js"></script>
<script src="~/Scripts/jquery-1.8.2.js"></script>
<script src="~/Scripts/jquery-1.8.2.min.js"></script> 
```

}

在视图中添加 js 注释： (jsonGetfullname).on 是一个按钮

```
 <script type="text/javascript"> 
    $("#jsonGetfullname").on("click", function () { 
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "@(Url.Action("JsonFullName", "Home"))",
            data: "{ \"fname\" : \"modey\" , \"lastname\" : \"sayed\" }",
            dataType: "json",
            success: function (data) {
                var res = $.parseJSON(data);
                $("#myform").html("<h3>Json data: <h3>" + res.fname + ", " + res.lastname)
            }, 
            error: function (xhr, err) {
                alert("readyState: " + xhr.readyState + "\nstatus: " + xhr.status);
                alert("responseText: " + xhr.responseText);
            } 
        })
    });
</script> 
```

您还可以使用 (POST\GET) 如下：

```
[HttpPost]
    public string Contact(string message)
    { 
        return "<h1>Hi,</h1>we got your message, <br />" + message + " <br />Thanks a lot";
    } 
```

在视图中添加 js 注释： (send).on 是一个按钮

```
 $("#send").on("click", function () {
        $.post('', { message: $('#msg').val() })
        .done(function (response) {
            setTimeout(function () { $("#myform").html(response) }, 2000);
        })
        .error(function () { alert('Error') })
        .success(function () { alert('OK') })
        return false;
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T17:07:09.117

你可以定义一个普通的锚：

```
@Html.ActionLink("Update Tweets", "Index", "Home", null, new { id = "mylink" }) 
```

然后不显眼地对它进行 AJAXify：

```
$(document).ready(function () {
    $("#mylink").click(function (e) {
        $.ajax({
            type: "GET",
            url: this.href,
            success: function (data) {
                $('#TweetBox').prepend(data);
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert(textStatus);
            },
            complete: function (resp) {
                alert(resp.getAllResponseHeaders());
            }
        });

        return false;
    });
}); 
```

请注意，我从单击处理程序返回 false 以取消默认操作。另请注意，我使用的是锚的 href 属性，而不是对其进行硬编码。

2 个 AJAX 请求应该相同。

# java - JTabbedPane 不切换选项卡内容

> ID：10015245
> 
> 赞同：1
> 
> 时间：2012-04-04T16:19:48.127
> 
> 标签：java, swing, file-io, jtabbedpane

我在使用 JTabbedPane 时遇到问题，因为单个选项卡的内容没有显示（每次单击新选项卡时，活动选项卡都会更改但内容不会更改，因此无论哪个选项卡我都会看到相同的内容被选中。）。

我正在尝试为我自己的编程语言编写一个 IDE，但以前从未使用过 JTabbedPane。我的选项卡式窗格由 JScrollPanes 中的 JEditTextArea（用户编写的组件）组成。这是负责的班级

```
package tide.editor;

import javax.swing.*;

import javax.swing.filechooser.FileNameExtensionFilter;

import java.awt.Toolkit;
import java.awt.BorderLayout;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.io.File;
import java.io.FileNotFoundException;
import java.util.ArrayList;
import java.util.Scanner;

import org.syntax.jedit.*;
import org.syntax.jedit.tokenmarker.*;

@SuppressWarnings("serial")
public class Editor extends JFrame implements ActionListener {

//Version ID
final static String VERSION = "0.01a";

//The editor pane houses the JTabbedPane that allows for code editing
//JPanel editorPane;

JTabbedPane tabbedPanel;

//The JTextPanes hold the source for currently open programs
ArrayList<JEditTextArea> textPanes;

//The toolbar that allows for quick opening, saving, compiling etc
JToolBar toolBar;

//Buttons for the toolbar
JButton newButton, openButton, saveButton, compileButton, runButton;

public Editor()
{
    super("tIDE v" + VERSION);
    setSize(Toolkit.getDefaultToolkit().getScreenSize());
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setLayout(new BorderLayout());
    init();
    setVisible(true);
    textPanes.get(0).requestFocus();
}

public void init()
{
    //Initialise toolbar
    toolBar = new JToolBar();
    toolBar.setFloatable(false);

    newButton = new JButton("New");
    newButton.addActionListener(this);
    openButton = new JButton("Open");
    openButton.addActionListener(this);
    saveButton = new JButton("Save");
    saveButton.addActionListener(this);
    compileButton = new JButton("Compile");
    compileButton.addActionListener(this);
    runButton = new JButton("Run");
    runButton.addActionListener(this);

    toolBar.add(newButton);
    toolBar.add(openButton);
    toolBar.add(saveButton);
    toolBar.add(compileButton);
    toolBar.add(runButton);

    tabbedPanel = new JTabbedPane();

    textPanes = new ArrayList<JEditTextArea>();

    JEditTextArea initialProgram = createTextArea("program.t");

        tabbedPanel.addTab(initialProgram.getName(), new JScrollPane(initialProgram));

    getContentPane().add(tabbedPanel, BorderLayout.CENTER);
    add(toolBar, BorderLayout.NORTH);
}

public static void main(String[] args)
{
java.awt.EventQueue.invokeLater(new Runnable() {

    @Override
    public void run() {
        new Editor();
    }
});

}

JEditTextArea createTextArea(String name)
{
    JEditTextArea editPane = new JEditTextArea(name);
    editPane.setTokenMarker(new TTokenMarker());

    textPanes.add(editPane);

    return editPane;
}

public void actionPerformed(ActionEvent e) {

    if (e.getSource() == newButton)
    {
        String filename = "program2";
        boolean fileExists = true;

        //Ensures that no duplicate files are created
        while (fileExists)
        {
        fileExists = false;
        //Get new file name from user
        filename = JOptionPane.showInputDialog(null, "Enter a name for the file", "program.t");

        //Cancel was clicked in the new file dialog
        if (filename == null)
            return;

            for (JEditTextArea panes: textPanes)
            {
                if (panes.getName().equals(filename) || panes.getName().equals(filename.concat(".t")) || panes.getName().concat(".t").equals(filename))
                    fileExists = true;
            }
        }

        //add extension if it is missing
        if(!filename.endsWith(".t"))
            filename = filename.concat(".t");

        //Add the new "file" to the editor window in a new tab
        tabbedPanel.addTab(filename, new JScrollPane(createTextArea(filename)));
        tabbedPanel.setSelectedIndex(tabbedPanel.getSelectedIndex()+1);
    }

    if (e.getSource() == openButton)
    {
        File f = null;

        JFileChooser fileChooser = new JFileChooser();
        fileChooser.setDialogTitle("Choose target file location");
        fileChooser.setFileSelectionMode(JFileChooser.FILES_ONLY);
        fileChooser.setAcceptAllFileFilterUsed(false);
        FileNameExtensionFilter filter = new FileNameExtensionFilter(
                "t source or bytecode(.t, .tbc)", "t", "tbc");

        fileChooser.setFileFilter(filter);

        if (fileChooser.showOpenDialog(null) == JFileChooser.APPROVE_OPTION)
        {
            f = fileChooser.getSelectedFile();
        }

        //Cancel button was clicked on the open file dialog
        if (f == null)
            return;

        //Load the contents of the selected file into the editor
        else
        {
            JEditTextArea textArea = null;
            StringBuilder inputText = null;

            try {
                Scanner sc = new Scanner(f);

                //Add a new text area to the editor
                textArea = createTextArea(f.getName());
                tabbedPanel.add(new JScrollPane(textArea), textArea.getName());

                //The newly added tab is set as the active tab
                tabbedPanel.setSelectedIndex(tabbedPanel.getTabCount()-1);
                textArea.requestFocus();

                inputText = new StringBuilder();
                while (sc.hasNext())
                {
                    inputText.append(sc.nextLine() + "\n");
                }

            } catch (FileNotFoundException e1) {
                e1.printStackTrace();
            }

            //Set the contents of the current text area to that of the opened file
            textArea.setText(inputText.toString());
        }
    }

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T16:59:39.450

`FileIO`1）从相关`try - catch`块中删除代码行

```
textArea = createTextArea(f.getName());
tabbedPanel.add(new JScrollPane(textArea), textArea.getName());
//The newly added tab is set as the active tab
tabbedPanel.setSelectedIndex(tabbedPanel.getTabCount()-1);
textArea.requestFocus(); 
```

准备那些`Object`之前或之后`Input / OutputStreams`

2)`close()`全部`Objects`来自`Input / OutputStreams`, 在`finally`块 ( `try - catch - finally`)

3)`JTextComponets`实现`read()`and `write()`，接受所有分隔符，然后没有理由以编程方式调用 "\n"

4) 使用`SwingWorker`代码`FileIO`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T16:48:47.987

这可能不是根本原因的解决方案，但是您的代码中可能存在一些不一致，这会导致 TestAreas 上出现绘制问题，因此我建议您注册一个 TabChageListener，然后为该特定选项卡重新绘制 ScrollPane，这应该可以工作：

```
tabbedPanel.addChangeListener(new ChangeListener() {
    public void stateChanged(ChangeEvent e) {
     int selectedIndex =   tabbedPane.getSelectedIndex();
  // get the ScrollPane for this selectedIndex and then repaint it.

    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T17:23:27.240

在过去的几个小时里，我一直在努力解决这个问题。

事实上，无论`JEditTextArea`你实例化多少，它们都依赖于相同的`SyntaxDocument`，因此是相同的文本。这就是它的编码方式`JEditTextArea`。

在构造函数`public JEditTextArea(TextAreaDefaults defaults)`中，您需要找到该行：

> `setDocument(defaults.document);`

并将其替换为：

> 设置文档（新语法文档（））；

`Document`每次你制作一个新的时它都会实例化一个全新的`JEditTextArea`。

# svn - 在 SVN 中的功能分支之间合并是否安全？

> ID：10015249
> 
> 赞同：3
> 
> 时间：2012-04-04T16:20:17.223
> 
> 标签：svn

如果两个开发人员各自从主干创建一个功能分支，他们是否可以安全地在他们的功能分支之间以及从主干“同步合并”，然后仍然能够毫无问题地将每个功能分支重新集成到主干？

“同步合并”是指“svn merge ^/Project1/trunk”和“svn merge ^/Project1/branches/other-feature-branch”形式的命令，其中 svn:mergeinfo 属性将跟踪已经从每个位置合并。

我问的原因是我已经阅读了许多地方的文档，这些文档表明重新合并到分支的相同修订版中会导致冲突问题（尽管我没有看到任何地方解释了为什么会这样） . 如果是这样，那么上面描述的场景应该是有问题的，因为每个功能分支都将与主干以及另一个功能分支同步，因此在主干中所做的任何更改都将通过直接与主干同步以及同步时收到另一个功能分支（可能已经拾取了相同的主干更改）。

然而，在我所做的测试中，这似乎工作得很好，但在我推荐它作为我们团队的工作流程之前，我需要一些专家的保证。

@nosid：在此编辑中回复 nosid，因为 SO 上荒谬的字符限制阻止了 4 句评论。这是什么推特？

我已经阅读了文档。问题是它描述了一个非常简单的场景，一次只处理一个不稳定的特性，而不稳定的工作在特性分支中完成，而所有其他工作在主干中完成。在这种情况下，保持功能分支与主干同步是微不足道的。

然而，在更现实的情况下，一个产品很容易同时完成几个主要的不稳定工作。那么保持这些工作同步的过程是什么，以便它们可以按需与主干和彼此同步，但又不会对它们强制进行破坏性更改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T19:21:08.023

这不是方式，应该在 Subversion 中使用功能分支。一个简单示例的测试表明，这种方法稍后会引起问题。尝试以下步骤：

*   创建一个新的存储库。
*   创建并提交初始结构（主干、分支、标签）。
*   创建并提交（空）主干的两个新分支，`svn cp -m 'new branch' ^/trunk ^/branches/a`并使用`^/branches/b`.
*   在分支上添加并提交一个新文件`b`。
*   合并从一个分支`b`到另一个分支`a`的更改`svn merge ^/branches/b`。我没有对主干进行任何更改，所以没有什么要合并的。
*   使用.reintegrate 并`a`在主干上提交分支`svn merge --reintegrate ^/branches/a`。
*   合并从主干到分支的`b`更改`svn merge ^/trunk`。
*   现在，您将在之前添加的文件上看到树冲突。

Subversion 的文档详细解释了功能分支的推荐用法。请参阅以下链接：[功能分支](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.commonpatterns.html#svn.branchmerge.commonpatterns.feature)。特性分支通常是从主干创建的。您在功能分支上进行自己的更改，并不断地将主干中的更改合并到您的功能分支中（使用`svn merge ^/trunk`）。完成工作后，您将分支重新集成到主干中（使用`svn merge --reintegrate ^/branches/name`）。重新集成后，功能分支已过时，不应再使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-24T15:01:37.953

这是我对OP问题的看法。您可能会注意到与其他来源建议的用于确定问题答案的测试步骤有一些相似之处，但我得出了不同的结论。

这是我的复制脚本：

```
#----------------------------------------------------------------------
# Test whether merging between feature branches in SVN results in
# tree conflicts, as claimed elsewhere:
#   http://stackoverflow.com/questions/10015249
#----------------------------------------------------------------------
export REPO=file:///tmp/merge-test/repo

#----------------------------------------------------------------------
# Create a new repository.
#----------------------------------------------------------------------
echo Creating a new repository ...
cd /tmp
rm -rf merge-test
mkdir merge-test
cd merge-test
svnadmin create repo

#----------------------------------------------------------------------
# Create and commit the initial structure (trunk, branches, tags).
#----------------------------------------------------------------------
echo Creating initial structure ...
svn mkdir $REPO/trunk -m "Initializing trunk"
svn mkdir $REPO/branches -m "Initializing branches"
svn mkdir $REPO/tags -m "Initializing tags"

#----------------------------------------------------------------------
# Create and commit two new branches of the (empty) trunk.
#----------------------------------------------------------------------
echo Creating two new branches of the empty trunk ...
svn cp $REPO/trunk $REPO/branches/a -m "branch a"
svn cp $REPO/trunk $REPO/branches/b -m "branch b"
svn co $REPO/trunk
svn co $REPO/branches/a
svn co $REPO/branches/b

#----------------------------------------------------------------------
# Add and commit a new file on branch b.
#----------------------------------------------------------------------
echo Adding and committing a new file on branch b ...
cd b
echo testing > foo
svn add foo
svn ci -m "committing new file"

#----------------------------------------------------------------------
# Merge the changes from branch b to branch a.
#----------------------------------------------------------------------
echo Merging the changes from branch b to branch a ...
cd ../a
svn merge ^/branches/b
svn commit -m "merged b into a"

#----------------------------------------------------------------------
# Reintegrate and commit branch a on the trunk.
#----------------------------------------------------------------------
echo Reintegrating and committing branch a back to the trunk ...
cd ../trunk
svn merge --reintegrate ^/branches/a
svn ci -m "merged a back into trunk"

#----------------------------------------------------------------------
# Merge the changes from the trunk to branch b.
#----------------------------------------------------------------------
echo Merging the changes from the trunk to branch b ...
cd ../b
svn up
svn merge ^/trunk
svn ci -m "refreshing b from trunk"

#----------------------------------------------------------------------
# Look for a tree conflict on the file added earlier.
#----------------------------------------------------------------------
echo Looking for tree conflicts for the file added earlier ...
svn status 
```

最后一个（svn status）命令没有输出，这大概意味着没有树冲突。据我所知，[http](http://svnbook.red-bean.com/) ://svnbook.red-bean.com/ 中没有明确的声明表明分支之间的合并会导致问题（超出任何合并可能遇到的正常冲突，包括分支和分支之间的合并）树干）。如果有人有证据表明跨分支合并比一般合并更成问题，我会对检查这些证据非常感兴趣。在那之前，我倾向于建议 OP 在实践中没有任何固有的危险。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T16:30:35.117

如果您要将两个功能分支相互同步，那么拥有两个功能分支有什么意义？

它们基本上是相同的。

# device - 使用 NAudio MMDevice 时，如何获取设备的品牌名称？

> ID：10015253
> 
> 赞同：0
> 
> 时间：2012-04-04T16:20:26.893
> 
> 标签：device, naudio

我可以通过 VB.Net 中的 NAudio 的 MMDevice 获得设备的常规名称，但这通常是“扬声器”或“麦克风”之类的东西。我需要获得基本的通用名称以及品牌名称（例如“Realtek High Definition Audio”）。没有任何附加到 MMDevice 的属性或函数可以处理这个问题，但这看起来不像是整个 API 会像那样跳过的东西。这适用于 Windows 7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:31:47.917

等等，没关系，伙计们。对不起。显然我忽略了一个名为 DeviceFriendlyName 的函数。抱歉，我浏览了列表，但由于某种原因没有看到它。但是，如果有人搜索此信息，只需在您的 MMDevice 变量上调用该函数。

# javascript - 如何验证多选项卡中的输入框

> ID：10015257
> 
> 赞同：0
> 
> 时间：2012-04-04T16:20:36.003
> 
> 标签：javascript, jquery, jquery-validate

我正在使用 jquery validate 和[jquery tabs](http://twitter.github.com/bootstrap/javascript.html#tabs)创建一个多选项卡表单

假设一个简单的形式：

> 选项卡 1 输入地址，选项卡 2 输入名称，选项卡 3 提交

html

```
<ul class="nav nav-tabs">
  <li class="active"><a href="#home">address</a></li>
  <li><a href="#profile">name</a></li>
  <li><a href="#submit">submit</a></li>
</ul>

 <form id="selectList" method="post" action="finish.php">
<div class="tab-content">
  <div class="tab-pane active" id="home">//input box address</div>
  <div class="tab-pane" id="profile">//input box name</div>
  <div class="tab-pane" id="messages">//submit button</div>
</div>
 </form> 
```

js 验证

```
 $("#selectList").validate( {
      rules: {
         "selectList[]": {
              required: true,
              minlength: 1
          }
       }
   })

}); 
```

问题是：

1.  如您所见，虽然所有选项卡都在表单内，但是，如果提交按钮在选项卡 3 中，则无法验证选项卡 1、2 中的输入框，如何指定不同选项卡的验证规则？

谢谢

**更新：**

```
$("#optionalform").validate({
    ignore:''
}); 
```

使用这个独立可以帮助做到这一点，问题是，我无法设置规则，并且选项卡中的数据选择器插件和其他功能不起作用，它可能会跳过我的所有元素？

```
$(document).ready(function(){

$('.tabbable').tabs();
$("#selectList").validate({
    ignore:''

        rules: {
         "selectList[]": {
              required: true,
              minlength: 1
          }
       }
   })
          $('#dd').datebox({  
    required:true  
});

});

$(function(){
  $("#closeTab").click(function() {
             window.parent.$('#tt').tabs('close','Add Campaign'); 
             location.reload();     
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:30:54.210

每次更改选项卡时，您都需要调用验证。

```
$('.selector').tabs({
    select: function(event, ui) { ... } //run validation here?
}); 
```

# wpf - 通过动态 Xpath 表达式控制模板中的 XAML 数据绑定

> ID：10015258
> 
> 赞同：1
> 
> 时间：2012-04-04T16:20:36.393
> 
> 标签：wpf, xaml, xpath

好的，我对 XAML 和 WPF 还很陌生，所以我正在尝试一个学习项目来构建一个周期表。我有一组 XML 元素数据。我在 XAML 中定义了一个控件模板，以将每个化学元素的此信息显示为网格中的按钮：

```
 <ControlTemplate x:Key="elementTemplate" TargetType="{x:Type Button}">
            <Grid>
                <Rectangle x:Name="backingRect" Margin="2" StrokeThickness="0" RadiusX="3" RadiusY="3" Fill="{TemplateBinding Property=Button.Background}">
                    <Rectangle.Effect>
                        <DropShadowEffect BlurRadius="8"/>
                    </Rectangle.Effect>

                </Rectangle>
                <Viewbox>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="0.2*"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="0.2*"/>
                        </Grid.RowDefinitions>
                        <TextBlock FontWeight="DemiBold" TextAlignment="Center" Grid.Row="0" diag:PresentationTraceSources.TraceLevel="High">
                            <TextBlock.Text>
                                <Binding Source="{StaticResource elementData}">

                                    <Binding.XPath>atom[@id='H']/scalar[@dictRef='bo:atomicNumber']</Binding.XPath>
                                </Binding>
                            </TextBlock.Text>
                        </TextBlock>
                        <TextBlock FontWeight="Bold" TextAlignment="Center" FontSize="28" Grid.Row="1" >  
                            <TextBlock.Text>
                                <Binding Source="{StaticResource elementData}" >

                                    <Binding.XPath>atom[@id='H']/label[@dictRef='bo:symbol']/@value</Binding.XPath>
                                </Binding>
                            </TextBlock.Text></TextBlock >
                        <TextBlock FontWeight="DemiBold" TextAlignment="Center" Grid.Row="2">1.0021</TextBlock>
                    </Grid>
                </Viewbox>
            </Grid>               
</ControlTemplate> 
```

现在，这将创建一个静态绑定到我的底层 XML 数据的按钮。我想要做的是`@id='H'`用一个表达式替换 XPath 标准，该表达式检索使用此模板的按钮的内容，例如`@id={TemplateBinding Button.Content}`（如果可能的话），所以如果我创建这样一个文本内容为“他”的按钮'，它将检索 XML 文件中的相应数据，例如质量、原子序数等。在 XAML 中指定这样的动态 XPath 并将其绑定到控件模板上的属性的语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-24T06:09:27.407

有关更全面的讨论，请参阅[http://www.codeproject.com/Articles/854564/Parameterized-XPaths-in-XAML](http://www.codeproject.com/Articles/854564/Parameterized-XPaths-in-XAML)，...

本质上，您必须将多绑定与多绑定转换器一起使用，该转换器在构造绑定时执行参数化路径替换，然后返回所需的内容。

```
E.g.
<MultiBinding Converter="{StaticResource XPathConverter}" ConverterParameter="atom[@id=&quot;{1}&quot;]/scalar[@dictRef='bo:atomicNumber']" Mode="OneWay">
    <Binding Source="{StaticResource elementData}" Mode="OneWay" />
    <Binding ElementName="_Button" Path="Content" Mode="OneWay"/>
</MultiBinding> 
```

如果您只需要 OneWay 绑定，那么转换器很简单。`ConverterParamenter`是带有参数化占位符的 XPath 。第一个绑定是到您的 XML 数据。第二个绑定是让您的控制数据用于参数化替换。您必须针对您的特定数据对象和所需的返回值更正下面的转换器。

```
public class XPathConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        XmlNode root = (value[0] as XmlNode);
        string xpathf = (parameter as string);
        for (int i = 1; i < values.Count(); i++)
            xpathf = xpathf.Replace("{" + i.ToString().Trim() + "}", values[i] as string ?? "");

        return root.SelectSingleNode(xpathf).InnerXML;
     }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }   
} 
```

# hibernate - Hibernate 从 HqlSqlWalker 抛出 NullPointerException

> ID：10015261
> 
> 赞同：4
> 
> 时间：2012-04-04T16:20:40.810
> 
> 标签：hibernate, hql

我有一个 Web 应用程序，它有一个搜索表单，并且 HQL 是动态生成的。此外，用户可以单击列标题根据需要对项目进行排序。一些列从结构的最深处获取数据。

例如，我有这个 HQL，它可以完美运行：

```
SELECT s FROM Application s
    LEFT JOIN s.product AS product
    LEFT JOIN product.originCountry AS origin
WHERE s.nr = ? ORDER BY origin.name ASC 
```

但是这个失败得很惨：

```
SELECT s FROM Application s
    LEFT JOIN s.product AS product
    LEFT JOIN product.producer AS producer
    LEFT JOIN producer.address AS address
    LEFT JOIN address.country AS country
WHERE s.nr = ? ORDER BY country.name ASC 
```

有人可以指出，我哪里错了。不支持这么深的语法吗？

休眠版本是 3.2.1。

抱歉，忘记了堆栈跟踪：

```
2012-04-04 18:59:42,198 ERROR [foo.impl.ServiceImpl] java.lang.NullPointerException
java.lang.NullPointerException
at org.hibernate.hql.ast.HqlSqlWalker.createFromJoinElement(HqlSqlWalker.java:312)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.joinElement(HqlSqlBaseWalker.java:3275)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.fromElement(HqlSqlBaseWalker.java:3067)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.fromElementList(HqlSqlBaseWalker.java:2945)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.fromClause(HqlSqlBaseWalker.java:688)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:544)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:281)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:229)
at org.hibernate.hql.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:228)
at org.hibernate.hql.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:160)
at org.hibernate.hql.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:111)
at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:77)
at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:56)
at org.hibernate.engine.query.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:72)
at org.hibernate.impl.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:133)
at org.hibernate.impl.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:112)
at org.hibernate.impl.SessionImpl.createQuery(SessionImpl.java:1623)
at sun.reflect.GeneratedMethodAccessor336.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:585)
at org.springframework.orm.hibernate3.HibernateTemplate$CloseSuppressingInvocationHandler.invoke(HibernateTemplate.java:1192)
at $Proxy90.createQuery(Unknown Source)
..... 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T09:46:59.187

正如@JBNizet 正确指出的那样，问题在于`address`路径上的一个类（准确命名）不是实体，它是一个可嵌入的对象，因此不需要加入。

所以在我的情况下正确编写的第二个查询是：

```
SELECT s FROM Application s
    LEFT JOIN s.product AS product
    LEFT JOIN product.producer AS producer
    LEFT JOIN producer.address.country AS country
WHERE s.nr = ? ORDER BY country.name ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-04T14:25:40.670

I tried to connect between two different db's and I faced the same problem. I used the Native Query to solve the problem.

# java-me - J2me 代码未正确显示。帮我尝试解决它

> ID：10015265
> 
> 赞同：1
> 
> 时间：2012-04-04T16:20:53.633
> 
> 标签：java-me, midp, lcdui, cldc, nokia-s40

我正在用 j2me 开发一个移动应用程序。配置为“ **CLDC 1.1** ”和“ **MIDP 2.0** ”。我用来测试的手机是“ **NOKIA C2-01** ”。手机是**“S40”**设备。

在该移动应用程序中，数据被发送到服务器并根据响应执行。我将代码添加到[Displayable](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Displayable.html "API 文档")（Displayable 可能是表单、列表等）。

当应用程序运行时，有时会正确显示股票代码，但有时不会正确显示股票代码：股票代码的空间出现在表单/列表上方，但股票代码不显示。

请帮我解决它。

我只是将表单和列表分配给 (Displayable) 可显示的对象。

然后我创建一个新的 Ticker 对象并通过`displayable.setTicker(Ticker ticker)`方法设置代码。有时代码正确显示有时代码未显示。

以下是我的条件片段 - 仅一些示例

```
public class Controller
{
  Form loginForm;
  List userLit;
  Ticker tikcer;
  Display display;
  Displayable displayable;

  public Controller()
  {
    display=Display.getDisplay(midlet);
    displayable=null;

    loginForm=new LoginForm("Login");
    userList=List("user list", Choice.IMPLICIT);
  }

  public void showLoginForm()
  {
    displayable=loginForm;
    display.setCurrent(loginForm);
  }

  public void showUserList()
  {
    displayable=userList;
    display.setCurrent(userList);
  }

  public void setTickerToDisplayable(String str)
  {
    ticker=null;
    if((str==null)||(str.length()<1))
      ticker=null;   
    else
      ticker=new Ticker(str);
    displayable.setTicker(ticker);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:08:49.827

我找到了解决方案。有时，如果应用程序获得更多内存意味着代码无法正确显示。

现在我修改了我的代码以减少内存泄漏。现在它可以工作了

# javascript - 如何在 $.bind 方法中传递击键事件？

> ID：10015267
> 
> 赞同：0
> 
> 时间：2012-04-04T16:20:57.610
> 
> 标签：javascript, jquery

我不确定如何通过绑定方法传递特定的击键..

```
$(document).bind('keyup', event, keyup_handler(event)); 
```

这是我幸运的失败猜测..

这也是它通过的方法..

```
var keyup_handler = function(e){
  if (e.keyCode == 27) {
    close_lightbox();
    return false;       
  };
}; 
```

另一个失败的变体：

```
 var keyup_handler = function(e){
      if (e.keyCode == 27) {
        close_lightbox();
        return false;       
      };
    };

$(document).bind('keyup', keyup_handler(e)); 
```

返回：

```
 e is not defined 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:27:33.563

我想你可能会误解[`bind`](http://www.jqapi.com/#p=bind)API。

使用您的代码，您是在告诉 jQuery 绑定`undefined`到`keyup`：

*   `keyup_handler`您立即通过编写调用`keyup_handler(...)`。它返回`undefined`，这是传递给 jQuery`bind`调用的内容。
*   第二个参数 ( `event`) 也是未定义的。

反而，

```
$(document).bind('keyup', keyup_handler); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T16:29:34.893

我在这里修复了您的第二个示例：

```
var keyup_handler = function(e){
  if (e.keyCode == 27) {
    close_lightbox();
    return false;       
  };
};

$(document).bind('keyup', keyup_handler);​ 
```

当您调用 时`bind`，您将传递给它一个内部调用的函数。Bind 将调用该函数，默认情况下将事件对象传递给它。

您尝试的代码正在运行 keyup_handler() 并将结果传递给`bind`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T16:30:00.007

试试这个，你会看到的。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<title>jQuery Keyup Example</title>
<script type="text/javascript">

    var keyup_handler = function(e) {
        if (e.which == 27) {
            alert('ESCAPE');
            return false;
        }
    }

    $(document).ready(function() {
        $(document).bind('keyup',keyup_handler);
    });

</script>
</head>

<body>Press the escape key.
</body>
</html> 
```

# php - 通过 phpMyAdmin 将相同的数据添加到所有行（mySQL）的一列

> ID：10015269
> 
> 赞同：1
> 
> 时间：2012-04-04T16:21:02.663
> 
> 标签：php, mysql, phpmyadmin

我正在创建我的第一个（！）数据库，我遇到了一个我似乎无法找到答案的问题。

我在表格中放置了一个“添加”字段（除其他外），由于我是添加它的人，我想在整个列中放置相同的日期。这个想法是，如果在以后添加了一个新项目，它将具有该日期，但最初填充的数据应该都具有相同的日期。

如何？请不要一次告诉我一行....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T16:23:02.070

只需将列添加到表中，然后运行更新查询

```
update yourtable set nameofyournewfield = 'yourdate' 
```

这将更新当前数据库中的所有行，而新行将获取它们的值（或具有您提供的默认值）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T16:25:16.690

除了@Nicola 的答案之外，另一种可能性是在添加列中使用 DEFAULT 参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T16:32:16.873

您可以将该列的默认属性设置为任何日期，只要您在插入时没有为该列指定任何值，并且当您想要插入不同的值时，只需在插入语句中指定它，它就会为所有行复制该属性.

# java - Jqueryui - Datepicker - 日期范围偏移

> ID：10015271
> 
> 赞同：1
> 
> 时间：2012-04-04T16:21:07.210
> 
> 标签：java, jquery-ui, datepicker, offset, date-range

我正在使用 jqueryUI datepicker 预订表格。这是带有日期范围的日期选择器中几乎完整的代码

```
$(function() {
    var dates = $( "#from, #to" ).datepicker({
        dateFormat: 'dd-mm-yy',
        minDate: "+0D",
        defaultDate: "+0D",
        changeMonth: true,
        numberOfMonths: 1,
        onSelect: function( selectedDate ) {
            var option = this.id == "from" ? "minDate" : "maxDate",
                instance = $( this ).data( "datepicker" ),
                date = $.datepicker.parseDate(
                    instance.settings.dateFormat ||
                    $.datepicker._defaults.dateFormat,
                    selectedDate, instance.settings );
            dates.not( this ).datepicker( "option", option, date );
        }
    });
}); 
```

现在的工作方式：当我在第一个框中选择一个日期时，第二个框上的最小日期会自动设置为该日期。

我希望它移到第二天。

假设我在第一个盒子上选择 1/1/2010，我希望第二个盒子上的第一个可用日期是 2/1/2010（d/m/yyyy 格式）

我无法弄清楚，任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:31:52.070

修改后的代码：

```
$(function() {
        var dates = $( "#from, #to" ).datepicker({
            dateFormat: 'dd-mm-yy',
            minDate: "+0D",
            defaultDate: "+0D",
            changeMonth: true,
            numberOfMonths: 1,
            onSelect: function( selectedDate ) {
                var option = this.id == "from" ? "minDate" : "maxDate",
                    instance = $( this ).data( "datepicker" ),
                    date = $.datepicker.parseDate(
                        instance.settings.dateFormat ||
                        $.datepicker._defaults.dateFormat,
                        selectedDate, instance.settings );
                this.id == "from" ? date.setDate(date.getDate()+1) : date.setDate(date.getDate()-1);
                dates.not( this ).datepicker( "option", option, date );
            }
        });
    }); 
```

`this.id == "from" ? date.setDate(date.getDate()+1) : date.setDate(date.getDate()-1);`在设置`mindate`或之前添加`maxdate`。

# ruby-on-rails-3 - 如何根据 Rails belongs_to 记录中的信息获取记录？

> ID：10015272
> 
> 赞同：0
> 
> 时间：2012-04-04T16:21:07.843
> 
> 标签：ruby-on-rails-3, belongs-to

我有 2 个模型 TourHdr 和 TourDetail。TourDetail 属于_to tour_hdr 和 TourHdr has_many tour_details。TourHdr 还有一个叫做 status 的属性。

我想在 TourDetail 中定义一个方法，它将为我提供所有 TourDetails，其中关联的 TourHdr 记录中的状态字段 = Live。

我尝试了以下方法：

```
def self.status(status)
  where(:tour_hdr.status == status)
end 
```

此处的状态可以是“实时”或“已取消”。

Rails 抱怨说 TourDetail 类没有 tour_hdr 方法。这里的正确语法是什么？

如果我这样做，在控制台中：

```
td = TourDetail.first
puts td.tour_hdr.status 
```

它工作正常。我猜这是因为 td 是 TourDetail 的“实例”而不是类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:15:20.153

```
joins(:tour_hdr).where(:tour_hdrs => {:status => status}) 
```

# java - 休眠映射

> ID：10015278
> 
> 赞同：0
> 
> 时间：2012-04-04T16:21:35.307
> 
> 标签：java, hibernate, mapping

我需要帮助来为我的项目中的一组表/类建模。我还需要有关如何为这些表进行休眠映射的帮助。我的项目中有以下表格。

1.  人
2.  组织
3.  接触
4.  地址

人员表可以有一个或多个地址。组织和联系人只能有一个地址。所以我添加了以下列来建立表之间的关系。

地址表有 PersonId [因为一个人可以有多个地址]。

组织和联系人表有 AddressId [因为这些表只能有一个地址]。

1.  我想知道我需要为这些表创建哪些 java 类。目前我有 Person、Address、Organization 和 Contact 类。不确定如何将 Address 类链接到 Person、Organization 和 Contact 类。
2.  我想知道我是否应该将地址视为组件或实体。以及如何创建 xml 映射地址被视为一个组件。
3.  Address 表中的 PersonId 可能具有为组织和联系人创建的地址记录的空值。我可以创建一个单独的表 [say Person_Address] 来存储一个人的地址列表。但是拥有这个链接表可能会提供 Person 和 Address 表之间的多对多关系。在这种情况下，我如何强制执行一对多关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:16:43.740

我会按照您在 3 中的建议进行操作。通过在 Person 类中的地址集上使用 OneToMany 关系，将自动创建中间表，我猜它会对地址 ID 有唯一约束。

编辑：如果您在地址类中添加相应的多对一注释并使用并将一对多注释映射到该字段，则只会在地址表中获得引用。但是，由于您不这样做，因此即使具有一对多关系，您也会得到一个 Person_Address 表，而无需创建任何额外的类。

您应该像在普通 java 中那样对类进行建模。即 Person 将有一组地址，其他的将只有一个，并且 Address 类忽略了其他的。

然后在 Person 类中添加 @OneToMany 注释，在其他类中添加 @OneToOne 类。或者你把它放在你的 orm.xml 中，尽管注释更便于维护。

至于组件/可嵌入与实体，我建议实体，因为它是最简单且没有限制的。不要一下子适应很多概念，坚持主路。

# hadoop - hadoop mapred 作业 - 初始化尝试 mapred 任务时出错

> ID：10015280
> 
> 赞同：1
> 
> 时间：2012-04-04T16:21:54.443
> 
> 标签：hadoop, mapreduce, hive, hdfs

我不小心删除了 hadoop.tmp.dir，在我的例子中是 /tmp/{user.name}/*。现在每次我从 CLI 运行 hive 查询时，mapred 作业都会在任务尝试中失败，如下所示：

```
Error initializing attempt_201202231712_1266_m_000009_0:
org.apache.hadoop.util.DiskChecker$DiskErrorException: Could not find any valid local     directory for ttprivate/taskTracker/hdfs/jobcache/job_201202231712_1266/jobToken
at org.apache.hadoop.fs.LocalDirAllocator$AllocatorPerContext.getLocalPathForWrite(LocalDirAllocator.java:376)
at org.apache.hadoop.fs.LocalDirAllocator.getLocalPathForWrite(LocalDirAllocator.java:146)
at org.apache.hadoop.fs.LocalDirAllocator.getLocalPathForWrite(LocalDirAllocator.java:127)
at org.apache.hadoop.mapred.TaskTracker.localizeJobTokenFile(TaskTracker.java:4432)
at org.apache.hadoop.mapred.TaskTracker.initializeJob(TaskTracker.java:1301)
at org.apache.hadoop.mapred.TaskTracker.localizeJob(TaskTracker.java:1242)
at org.apache.hadoop.mapred.TaskTracker.startNewTask(TaskTracker.java:2541)
at org.apache.hadoop.mapred.TaskTracker$TaskLauncher.run(TaskTracker.java:2505) 
```

这是一个测试环境，我不关心数据。如何让系统恢复正常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:27:31.147

您应该调用 stop-all.sh 文件，重新创建文件并在格式化 tmp 文件后启动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T15:45:58.373

您可以简单地重新创建目录并将文件的所有者更改为 mapred。`chown mapred:mapred <your dir>`

# web-services - 如何使用 Pentaho PDI（Kettle 版本 4.2.1）访问谷歌分析数据 API

> ID：10015282
> 
> 赞同：2
> 
> 时间：2012-04-04T16:22:04.757
> 
> 标签：web-services, api, pentaho, kettle

当我使用 Google Analytics 输入步骤时，我只需输入我的帐户用户名和密码即可进行授权。从那里，该步骤为我查找域表 ID。因此，只需在这一步提供我的用户名和密码，选择 id 和指标，我就可以检索我需要的所有信息——无需其他授权。

但是，我试图通过使用 HTTP Client Lookup 步骤（在它之前有一个 Generate Rows 步骤）来重新创建它。我给了它以下 URL，如[http://code.google.com/apis/analytics/docs/gdata/v3/reference.html](http://code.google.com/apis/analytics/docs/gdata/v3/reference.html)所述：

```
 https://www.googleapis.com/analytics/v3/data/ga?ids=ga:{*My Domain Table ID*}&start-date=2010-08-01&end-date=2012-04-01&metrics=ga:newVisits 
```

并分别用我的用户名和密码填写 Http Login 和 Http Password 字段（与 Google Analytics Input 步骤中的完全相同）。但是，当我预览此 HTTP 客户端步骤的结果时，转换会返回一个错误，指出需要登录。

我也尝试过使用 REST 客户端查找步骤（之前有生成行步骤）。我选择了 GET HTTP 方法，JSON 应用程序类型，并填写了我的 HTTP 登录名和密码进行身份验证。当我尝试运行它时，它不会返回错误，但在预览输出的结果字段中显示“无效凭据”。

Google Analytics 输入步骤与 HTTP 客户端查找和 REST 客户端查找步骤有何不同？以及如何使用这些查找步骤访问相同的信息？

我也希望能够从其他网站访问 API，而不仅仅是从 Google Analytics 访问，因此能够对任何 API 执行此操作对我来说很重要。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T16:08:06.817

我已经使用 HTTP 客户端步骤向谷歌分析提出了请求，它运行良好。

首先，您需要来自 Google Analytics 的令牌： [https ://www.google.com/accounts/ClientLogin?accountType=GOOGLE&Email=xxxxxxx@gmail.com&Passwd=xxxxxxx&service=analytics](https://www.google.com/accounts/ClientLogin?accountType=GOOGLE&Email=xxxxxxx@gmail.com&Passwd=xxxxxxx&service=analytics)

此标记是一个长字符串。

令牌将作为 HTTP 标头进入客户端。必须调用参数：Authorization = token

其他参数：GData-Version=3。

添加请求参数后。（ID、开始日期、结束日期、指标、过滤器、细分）

您还必须将密钥添加到您的个人资料 ID，作为最后一个参数。

此请求返回一个 XML。使用 XML 解析器步骤获取指标值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T21:16:58.780

您使用的是哪个水壶版本？据我所知google api有一些变化

阅读此错误报告：

[http://jira.pentaho.com/browse/PDI-7942](http://jira.pentaho.com/browse/PDI-7942)

# php - 在 Postgresql 数据库中处理 NaN

> ID：10015283
> 
> 赞同：4
> 
> 时间：2012-04-04T16:22:05.253
> 
> 标签：php, javascript, postgresql

我有一个简单的网络调查，用户可以使用单选按钮选择他们的答案。我检查了使用 javascript 勾选了哪些按钮。我没有将按钮设置为任何默认状态，因此可以不回答问题。

当我将此传递给 php 并尝试将结果插入整数类型的列时，如果所有单选按钮都被勾选，则没有问题。但是，如果有任何未勾选的按钮，我会收到以下错误消息：

```
Query failed: ERROR:  invalid input syntax for integer: &quot;NaN&quot; 
```

我知道这是因为我的整数列无法处理字符串，但我不知道处理这个问题的最佳策略是什么。我应该在 javascript 端检查还是在 php 中有任何方法我应该测试值不为空？

我使用以下结构将结果插入到我的数据库中：

```
$query=pg_query_params( $connection, 'INSERT INTO tracking.postsurvey(answer1) values($1)', array($answer1) ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T17:09:50.363

解决方案是将查询更改为：

```
'INSERT INTO tracking.postsurvey(answer1) values(nullif($1, 'NaN'))' 
```

[http://www.postgresql.org/docs/current/interactive/functions-conditional.html#FUNCTIONS-NULLIF](http://www.postgresql.org/docs/current/interactive/functions-conditional.html#FUNCTIONS-NULLIF)

# python - 如何在 pandas 中创建日期时间索引

> ID：10015284
> 
> 赞同：2
> 
> 时间：2012-04-04T16:22:28.093
> 
> 标签：python, numpy, pandas

如何创建日期时间索引`"foo"`以用于原始数据系列。（例如，每 15 秒“foo”和每 30 秒“foo2”。）如果可以将原始系列插入“基本”数据帧，我想使用“foo”重铸数据帧。

如果想要将 df "foo" 和 df "foo2" 结合起来的系列，那么内存命中会是多少？用原始数据系列填充 foo 索引会更好吗？

编辑：之后`import pandas`，`datetime.timedelta`停止工作

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T20:11:27.600

我很难理解你在问什么；使用示例数据准确说明您正在寻找的内容将有助于使事情更加清晰。

我认为你应该怎么做：

`rng = DateRange(start, end, offset=datetools.Second(15)`

创建日期范围。要将数据放入由此索引的 DataFrame 中，您应该添加列并将它们重新索引到上面的日期范围`method='ffill'`：

```
df = DataFrame(index=rng)
df[colname] = series.reindex(df.index, method='ffill') 
```

根据 datetime.timedelta，datetime.datetime 是 pandas 命名空间的一部分，所以如果你这样做了，`from pandas import *`那么你之前所做的任何事情都会被pandas 命名空间内的引用`import datetime`所掩盖。`datetime.datetime`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-12T16:12:16.303

由于 Wes 的回答我认为`pandas.DateRange`不再存在于`pandas`. 我在使用熊猫版本 0.22.0。

我[`pandas.DatetimeIndex`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DatetimeIndex.html)改为使用，例如：

```
import datetime
import pandas as pd

start = datetime.datetime.now()
times = pd.DatetimeIndex(freq='2s', start=start, periods=10) 
```

或者

```
start = datetime.datetime.now()
end = start + datetime.timedelta(hours=1)
times = pd.DatetimeIndex(freq='2s', start=start, end=end) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-07T00:30:38.297

从 0.24 版开始

> 基于 start、periods 和 end 创建 DatetimeIndex 已被弃用，取而代之的是`date_range()`.

使用`date_range()`类似于`DatetimeIndex()`

```
start = datetime.datetime.now()
end = start + datetime.timedelta(hours=1)
times = pd.date_range(freq='2s', start=start, end=end) 
```

`times`是一个包含 1801 个元素的 DatetimeIndex，间隔为 2 秒

# java - 在 libgdx 动画中引入延迟

> ID：10015289
> 
> 赞同：1
> 
> 时间：2012-04-04T16:22:58.547
> 
> 标签：java, libgdx

我在一个小游戏上使用 libgdx，我的菜单屏幕上有一个小动画。我使用了 Animation() 类并给了它一个包含 20 个精灵的列表。动画持续时间为 2 秒。我想要的是让这个动画每 4 秒重复一次。所以我需要一种在重复之间引入延迟的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:36:01.430

我不确定 Animation 类是否具有对此类延迟的本机支持，但是您始终可以自己跟踪经过的时间，并在经过的时间超过 4 秒后重新启动动画。详情见：[https ://gamedev.stackexchange.com/questions/25001/waiting-specific-time-to-increase-sound-libgdx](https://gamedev.stackexchange.com/questions/25001/waiting-specific-time-to-increase-sound-libgdx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T20:48:43.733

您可以随时尝试从

```
import static com.badlogic.gdx.scenes.scene2d.actions.Actions.delay; 
```

下面是我如何在 Actor 类内部使用它以及其他一些操作。它们非常酷且内存使用率低。

```
this.addAction(sequence(moveBy(0, 10, 0.1f), moveBy(0, -10, 0.1f),delay(0.75f),run(
            new Runnable(){
                public void run () {
                    Gdx.app.log("NOTICE", " Notice deleted!");     
                    disappear();
            }}))); 
```

# vb.net - 如何获取另一个函数的返回值？

> ID：10015294
> 
> 赞同：0
> 
> 时间：2012-04-04T16:23:17.623
> 
> 标签：vb.net, linq

如何在 LINQ 中给出另一个函数的返回值。

我有一个`IEnumerable`。`objects(Say ObjColl)`从该对象集合中，我必须根据 another 的返回值过滤对象`function(say GetObjPropertyValue)`。我的最终输出应该是对象字典及其属性值。这本字典不应该包含没有 propertyvalue 的对象。

`GetObjPropertyValue`函数将 Object 作为输入，并将其属性作为字符串返回。但有时，如果对象上不存在该属性，它不会返回任何内容。

我的查询是这样的，

```
Dictionary(obj, string)=ObjColl.Where(Function(p) not GetObjPropertyValue(p) is nothing) 
```

但在上面的查询中，我应该编写代码来存储 GetObjPropertyValue(p) 的返回值，并将 obj-p 和 returnValue 组合添加到字典中。这要怎么写？？

例如见下面的代码：

代码下面的最后一行是错误的。但请建议我如何纠正它。我的意图是，我想要 GetFruitColor 不是空的所有水果（它可以是空的或有效的字符串）的每个水果名称及其颜色（由其他函数调用返回）的输出集合（比如字典）。

> [code] 私有函数GetFruitColor(fruit) as string '返回水果颜色。'如果有效水果和颜色不可用，则返回“”（空字符串） '如果水果不是有效水果，则不返回任何内容。结束功能

```
private sub MyMethod()
  Create a list of strings.
        Dim fruits As New List(Of String)(New String() _
                                {"apple", "passionfruit", "banana", "mango", _
                                 "orange", "blueberry", "grape", "strawberry"})

Dim query = _fruits.Where(Function(fruit) k= GetFruitColor(fruit) if not k is nothing select fruit, k) 
End Sub 
```

在上面的代码中，最后一行是错误的。那么如何将 getFruitColor 放入`k`，如何更正它以保存`k`值并将输出作为水果和`k`值的字典。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:29:14.020

我会建议：

*   投影到由（水果，颜色）组成的匿名类型
*   过滤掉“无”的颜色
*   创建字典

在 C# 中，这将是：

```
var query = fruits.Select(fruit => new { fruit, color = GetFruitColor(fruit) })
                  .Where(pair => !string.IsNullOrEmpty(pair.color))
                  .ToDictionary(pair => pair.fruit, pair => pair.color); 
```

针对 VB 进行相应调整 :)

# android - 为什么适用于 Android 的 Google 地图库如此过时？

> ID：10015299
> 
> 赞同：1
> 
> 时间：2012-04-04T16:23:24.380
> 
> 标签：android, google-maps

我是一名 Android 平台新手，希望将我的一些 Windows Phone 7 地图应用程序移植到这里。我的 WP7 应用程序使用具有当前地图和 POI 数据的 Bing 地图。

我去了 Android 开发者资源中心，那里展示了如何使用 Google 地图库开发应用程序。我这样做了，发现这些地图已经有 7 年以上的历史了。

我在谷歌群组论坛上发布了这个问题，并被告知谷歌显然已经放弃了那个图书馆。（奇怪的是，他们仍然在他们的开发者资源网站中提供了它。）

那么，如果他们放弃了那个图书馆，还有没有他们没有放弃的图书馆？谷歌放弃谷歌地图似乎很奇怪（糟糕的策略）。

Android 开发人员应该使用哪些工具、库等来编写引人注目的地图应用程序，这些应用程序可以显示地图、POI、使用当前地图和数据的方向？谢谢加里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:56:17.163

必应地图不是最新的（我对其进行了测试，我可以看到一座使用了 3 年以上但仍然没有出现在必应地图上的建筑物）。除了 Google 地图，您还可以使用 Ovi 地图或您自己的自定义地图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T19:09:49.813

我的原始帖子来自我编写 android “HelloGoogleMaps” 应用程序并在模拟器中运行它的经验。我导航到我自己的位置，发现我住的整个轨道仍然是自然土地。这让我觉得谷歌地图已经过时了。这是另一个论坛上其他一些开发者的普遍感受。我在网上访问了在线谷歌地图，我的地图在那里，所以这让我觉得是 MapView 软件已经过时了。

今天，我回到那个 HeloGoogleMaps 应用程序，再次导航回到我的区域，它就在那里！我不知道发生了什么，但地图现在是最新的。

对虚假帖子感到抱歉。加里

# jsf-2 - JSF 2.0 在显示视图之前在会话范围内设置变量？

> ID：10015300
> 
> 赞同：0
> 
> 时间：2012-04-04T16:23:25.147
> 
> 标签：jsf-2

我想在显示视图之前在使用范围的会话中应用一个变量，而不是这个视图将使用这个变量。

链接在这里：

```
<h:link value="#{msg.persondeactivate}" outcome="persondeactivate" /> 
```

这是faces-config.xml

```
<navigation-rule>
    <navigation-case>
        <from-outcome>persondeactivate</from-outcome>
        <to-view-id>/deactivatePerson.xhtml</to-view-id>
    </navigation-case>
</navigation-rule> 
```

这是视图（deactivatePerson.xhtml）：

```
...<h:outputText value="#{msg.personIsDeactivate}" rendered="#{controller.personDeactivated}" style="color:green" />... <h:commandButton action="#{controller.deaktivieren}" value="#{msg.deactivate}"></h:commandButton>... 
```

这是托管bean：

```
@ManagedBean @SessionScoped public class Controller { ... private boolean personDeactivated = false; public String deaktivieren(){ personDeactivated = false;
    // Deactivate process personDeactivated = true; return "persondeactivate";} ... } 
```

我希望在第二次调用视图 (deactivatePerson.xhtml) 之前将变量*personDeactivated*设置为*false 。*

这没用。

有人可以告诉我有什么问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:26:05.283

您可以使用`<f:event type="preRenderView">`在视图呈现之前调用支持 bean 侦听器方法。

```
<f:event type="preRenderView" listener="#{controller.onPreRenderView}" /> 
```

和

```
public void onPreRenderView() {
    if (!FacesContext.getCurrentInstance().isPostback()) {
        // Do your job here when the view is been freshly requested by GET.
    }
    else {
        // Do your job here when a POST request is been performed by command link/button.
    }
} 
```

* * *

**与具体问题无关**，我的印象`Controller`实际上是在错误的范围内。一个更好的解决方案是`@ViewScoped`代替它。这样，bean 实例将在每个新的 GET 请求上重新创建，并且只要您回发到同一个视图就可以存活（因此，在多个浏览器选项卡中打开同一页面时，您不会遇到不一致和不直观的行为/windows 在同一个会话中共享同一个会话范围的 bean！）。另请参阅[如何选择正确的 bean 范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope)

# windows-phone-7 - WP7 条件启动页面

> ID：10015301
> 
> 赞同：2
> 
> 时间：2012-04-04T16:23:26.440
> 
> 标签：windows-phone-7

我知道我可以在 WMAppManifest.xml 文件中设置起始页。

有没有办法根据某些条件设置起始页？

我有一个具有“记住我”功能的应用程序，所以当应用程序启动时，我希望它直接进入某个页面。如果不记得用户，则显示登录屏幕。

现在我显示一个页面，在它的逻辑中我检查这个，如果有必要我导航到其他页面。

有一个更好的方法吗？

谢谢， 巴特克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T16:28:02.040

从[这个页面](http://debugmode.net/2011/09/05/setting-start-page-of-windows-phone-dynamically-through-code/)，在你的`App.xaml.cs`：

```
private void Application_Launching(object sender, LaunchingEventArgs e)
{
    Uri nUri = new Uri("/Page1.xaml", UriKind.Relative);
    ((App)Application.Current).RootFrame.Navigate(nUri);
} 
```

然后打开您的文件并从行中`WMAppManifest.xml`清除。`NavigationPage``DefaultTask`

```
<DefaultTask  Name ="_default" NavigationPage=""/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T16:26:27.410

您是否看过这个“WP7 - 根据设置动态更改启动页面”：-

[WP7 - 根据设置动态更改启动页面](https://stackoverflow.com/questions/4636283/wp7-dynamically-change-the-startup-page-depending-on-setting)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T16:26:28.753

我不知道有什么更好的方法可以有条件地重定向到不同的页面，而不是有一个加载页面来检查并为您进行重定向。

# objective-c - 参考代码中的内部版本号或版本号

> ID：10015304
> 
> 赞同：46
> 
> 时间：2012-04-04T16:23:31.997
> 
> 标签：objective-c, version

在 Xcode 中手动设置构建和版本号很容易，我学习了如何在构建时使用宏来增加它们。但是我如何在代码中引用它们的值呢？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-04-04T16:31:39.510

```
NSDictionary *infoDict = [[NSBundle mainBundle] infoDictionary];
NSString *appVersion = [infoDict objectForKey:@"CFBundleShortVersionString"]; // example: 1.0.0
NSString *buildNumber = [infoDict objectForKey:@"CFBundleVersion"]; // example: 42 
```

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2012-04-04T16:29:44.850

当然，您可以向主包询问 info 目录，其中包含 info.plist 的所有键和值，包括版本号：

```
NSDictionary *info = [[NSBundle mainBundle] infoDictionary];
NSString *version = [info objectForKey:@"CFBundleShortVersionString"]; 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-04-04T16:31:41.490

```
NSBundle *bundle = [NSBundle mainBundle];   
NSString *appVersion = [bundle objectForInfoDictionaryKey:(NSString *)@"CFBundleShortVersionString"];
NSString *appBuildNumber = [bundle objectForInfoDictionaryKey:(NSString *)kCFBundleVersionKey]; 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-04-08T17:25:07.533

@robo我确实关注了有关如何自动增加内部版本号（不是版本号，但非常相似）的文章，但现在我找不到它。我会试着解释我做了什么。我希望它足够清楚。

在 Xcode 4 中查看 Navigator 窗格，它是 Xcode 屏幕左侧的窗格。它的顶部有 7 个图标。选择最左边的图标（看起来像一个文件夹）以获取 Project Navigator 窗格。

现在单击该窗格中的第一项，即项目本身。这会在中间打开一个大窗口，左侧有一个狭窄的柱子。

窄列有 2 个部分：“项目”和“目标”。在“目标”部分中单击您的项目名称。现在中心窗格顶部有 5 个选项卡：“摘要”、“信息”、“构建设置”、“构建阶段”和“构建规则”。

单击“构建阶段”选项卡。如果您的配置与我的相同，您现在将在主窗口中看到 4 个部分：“Target Dependencies”、“Copy Bundle Resources”、“Compile Sources”和“Link...”。单击“添加构建阶段”（在右下角）并选择“添加运行脚本”。第五部分现在出现在中心窗格中，标题为“运行脚本”。向上拖动“运行脚本”部分，使其成为从顶部算起的第二个部分，就在“目标依赖项”下方。

现在单击“运行脚本”部分的显示三角形。这将打开一个窗口，您可以在其中放置脚本。将以下脚本复制并粘贴到该窗口中。

```
#!/bin/bash    
bN=$(/usr/libexec/PlistBuddy -c "Print CFBundleVersion" "$INFOPLIST_FILE")
bN=$((0x$bN)) 
bN=$(($bN + 1)) 
bN=$(printf "%X" $bN)
/usr/libexec/PlistBuddy -c "Set :CFBundleVersion $bN" "$INFOPLIST_FILE" 
```

确保未选中“仅在安装时运行脚本”。

就是这样！现在，每次构建项目时，您的内部版本号都会自动增加。

此脚本假定您的 info.plist 文件中有一个普通的十六进制内部版本号，并将其递增为十六进制。如果缺少内部版本号，我不确定它会做什么。但是输入起始值很容易——只需转到您在上面使用的同一个中心窗格中的“摘要”选项卡，然后在“构建”框中输入“1”（或您喜欢的任何值）（但不是格式化的）像 1.0 这样的字符串）。

* * *

我认为我首先给出的十六进制脚本对于提交到 App Store 无效。这是使用十进制算术的相同脚本。

```
#!/bin/bash    
bN=$(/usr/libexec/PlistBuddy -c "Print CFBundleVersion" "$INFOPLIST_FILE") 
((bN += 1))
bN=$(printf "%d" $bN)
/usr/libexec/PlistBuddy -c "Set :CFBundleVersion $bN" "$INFOPLIST_FILE" 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-04-04T16:31:22.910

您可以使用这段代码获取 info.plist 值（替换`CFBundleShortVersionString`为您想要的 info.plist 键，参见[推荐的 Info.plist 键](http://developer.apple.com/library/mac/#documentation/General/Reference/InfoPlistKeyReference/Articles/AboutInformationPropertyListFiles.html#//apple_ref/doc/uid/TP40009254-SW1)）

```
[[NSBundle mainBundle] objectForInfoDictionaryKey:@"CFBundleShortVersionString"] 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-04-04T16:35:47.863

由于这些值存储在您的应用程序中，`Info.plist`您可以通过以下提供的方法读取`NSBundle`：

```
NSString * version = [[NSBundle mainBundle] objectForInfoDictionaryKey: CFBundleShortVersionString]; 
```

请参阅[访问捆绑包内容](https://developer.apple.com/library/mac/documentation/CoreFOundation/Conceptual/CFBundles/AccessingaBundlesContents/AccessingaBundlesContents.html#//apple_ref/doc/uid/10000123i-CH104-123093)作为从 Info.plist 文件中获取数据的权威参考，以及获取可用 Info.plist 键的[Core Foundation](http://developer.apple.com/library/ios/#DOCUMENTATION/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html)键。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-02T12:42:18.780

在斯威夫特：

```
let version = NSBundle.mainBundle().infoDictionary?["CFBundleShortVersionString"] as? String 
```

# javascript - jQueryMobile 中的程序化（相对于基于链接的）导航

> ID：10015306
> 
> 赞同：0
> 
> 时间：2012-04-04T16:23:48.763
> 
> 标签：javascript, jquery-mobile, navigation

这个问题已经讨论过好几次了，但我还没有看到一个具体的答案。

类似/相同的问题：[所以问题](https://stackoverflow.com/questions/7820548/jquery-mobile-requesting-multi-page-page-via-changepage)

假设我有`index.html`：

```
 <div id="index1" data-role="page">
            <div data-role="header"><h1>Index 1</h1></div>
            <div data-role="content"></div>
            <div data-role="footer">
                <a data-role="button" id="toshop2">
                    To Shop 2
                </a>
            </div>
        </div> 
```

和`shop.html`：

```
<div id="shop1" data-role="page">
        <div data-role="header"><h1>Shop 1</h1></div>
        <div data-role="content"></div>
        <div data-role="footer">
            <a data-role="button" href="#shop2">To Shop 2</a>
            <a data-role="button" href="index.html" rel="external">
                To Index
            </a>
        </div>
    </div>
    <div id="shop2" data-role="page">
        <div data-role="header"><h1>Shop 2</h1></div>
        <div data-role="content"></div>
        <div data-role="footer">
            <a data-role="button" href="#shop1">To Shop 1</a>
            <a data-role="button" href="index.html" rel="external">
                To Index
            </a>
        </div>
    </div> 
```

我想做类似的事情：

```
$('#toshop2').on('click', function() {
    $.mobile.changePage("shop.html#shop2");
}); 
```

正如我们现在所知，这是行不通的。它将抓取第一个 DOM 页面 (`#shop1`并将`shop.html`其附加到`index.html`DOM 中。

我知道这很愚蠢：

```
$('#toshop2').on('click', function() {
    window.open('shop.html#shop2', '_parent');
}); 
```

会工作（是的，不会有过渡）。

问题是（*假设没有其他解决方案，但要破解*）：

1.  我可以/应该以不同的方式破解它吗？
2.  我还能以某种方式过渡到外部页面吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T18:16:29.200

您可以手动请求外部文档，然后只将您想要的部分插入 DOM：

```
//delegate event handler binding to links with a custom class
//(any link that links to a pseudo-page in an external document
$(document).delegate('.my-external-links', 'click', function () {

    //get the location of the external document and the requested page (hash)
    var theHREF   = this.href,
        theTarget = '#shop1';
    if (theHREF.indexOf('#') > -1) {
        theTarget = '#' + theHREF.split('#')[1];
        theHREF   = theHREF.split('#')[0];
    }

    //first see if this page is already in the DOM, if so just navigate to it
    if ($(theTarget).length) {
        $.mobile.changePage($(theTarget));
        return;
    }

    //show the loading spinner
    $.mobile.showPageLoadingMsg();

    //do AJAX request to get new pages into the DOM
    $.ajax({
        url : theHREF,
        success : function (response) {

            //hide the loading spinner
            $.mobile.hidePageLoadingMsg();

            //find all the `data-role="page"` elements and add them to the DOM
            $(response).find('[data-role="page"]').appendTo('body');

            //now navigate to the requested page which should be in the DOM
            $.mobile.changePage($(theTarget));
        },
        error   : function (jqXHR, textStatus, errorThrown) { /*don't forget to handle errors*/ }
    });
    return false;
}); 
```

我很确定也有一个插件，但是正如你所看到的，它并没有那么多代码或复杂性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:07:49.640

为什么不尝试两次使用 changepage 呢？

```
$.mobile.changePage( "shop.html", { transition: "none"} );
$.mobile.changePage( "#shop2", { transition: "slideup"} ); 
```

或者只是使用 loadPage 在后台将 shop.html 加载到 DOM 中，然后更改为 #shop2 ？

```
$.mobile.loadPage( "shop.html" );
$.mobile.changePage( "#shop2", { transition: "slideup"} ); 
```

# c# - SignalR ASPNetHost 在当前上下文中不存在

> ID：10015307
> 
> 赞同：5
> 
> 时间：2012-04-04T16:23:50.497
> 
> 标签：c#, mono, signalr

[我已经从GitHub](https://github.com/SignalR/SignalR)下载了最新的 SignalR 代码（截至 2012 年 4 月 4 日），因为它现在可以使用 MonoDevelop 进行编译，因此我可以在 OS X 上使用它。

但是，在[使用入门](http://www.asp.net/signalr/overview/signalr-20/getting-started-with-signalr-20/introduction-to-signalr)页面上列出的[SignalR.Sample](http://nuget.org/packages/SignalR.Sample)示例测试新版本时，它失败并出现以下错误：

当前上下文中不存在名称“AspNetHost”

这发生在 StockTicker.cs 中：

```
private static dynamic GetClients()
{
    return AspNetHost.DependencyResolver.Resolve<IConnectionManager>().GetClients<StockTickerHub>();
} 
```

谁能解释 AspNetHost 的变化？

非常欢迎就如何获得 SignalR.Sample 编译提出建议。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-24T23:01:07.200

我遇到了同样的问题，发现这在 SignalR 0.5 中已被弃用。这是[一篇](http://weblogs.asp.net/davidfowler/archive/2012/05/04/api-improvements-made-in-signalr-0-5.aspx)详细介绍更改的文章。

具体到您的项目，变化来自：

```
public void PerformLongRunningHubOperation()
{
    var clients = AspNetHost.DependencyResolver.Resolve<IConnectionManager>().GetClients<MyHub>();

    clients.notify("Hello world");
} 
```

在 0.5 中对此：

```
public void PerformLongRunningHubOperation()
{
    IHubContext context = GlobalHost.ConnectionManager.GetHubContext<MyHub>();

    context.Clients.notify("Hello world");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T19:40:25.163

您将需要阅读代码，因为源代码与文档不同步。这些文档适用于当前版本，而不是积极开发的。

查看 asp.net 示例以了解当前的 API。不过，它还没有一成不变。

# sharepoint - （第 2 部分）SharePoint 2010，Powershell - 遍历所有文档库，创建视图并将其设置为默认值。

> ID：10015311
> 
> 赞同：0
> 
> 时间：2012-04-04T16:23:59.207
> 
> 标签：sharepoint, powershell

这是由@marek-grzenkowicz 非常友好地处理的另一个查询。

**问题 1)**脚本在运行时生成错误。有人提到您不能修改正在枚举的集合的元素。你能告诉我如何解决这个问题吗？尽管进行了更改以避免该问题，但它仍在发生

```
An error occurred while enumerating through a  collection: Collection was modified; enumera tion operation may not execute.. At C:\Users\quickdev1\Documents\LoopThroughAl lLibrariesCreateView.ps1:7 char:10
+   foreach <<<< ($list in $web.Lists) {
    + CategoryInfo          : InvalidOperati     on: (Microsoft.Share...on+SPEnumerator:S     PEnumerator) [], RuntimeException
    + FullyQualifiedErrorId : BadEnumeration 
```

**问题 2）**我想输入一些逻辑来检查现有视图是否已经存在，名称为“详细”，如果是，则跳过该库，但我不知道如何实现它。

如果有人可以提供帮助，那就太棒了。

谢谢，

阿什利

**完整脚本**

```
Add-PSSnapin Microsoft.SharePoint.PowerShell -erroraction SilentlyContinue

$siteURL = "http://sp14fdev01/"
$site = Get-SPSite($siteURL)

foreach($web in $site.AllWebs) {
  foreach($list in $web.Lists) {
    if($list.BaseType -eq "DocumentLibrary") {
// the variables `$web` and `$list` already reference the objects you need
      //$site = New-Object Microsoft.SharePoint.SPSite($SiteURL) ;
      //$web = $site.OpenWeb($SiteURL);

// new instance of the list is necessary to avoid the error "Collection was modified"
      $newList = $web.Lists.item($list.ID);

      $viewfields = New-Object System.Collections.Specialized.StringCollection 
      $viewfields.Add("DocIcon") 
      $viewfields.Add("LinkFilename") 
      $viewfields.Add("_UIVersionString") 
      $viewfields.Add("FileSizeDisplay") 
      $viewfields.Add("Created") 
      $viewfields.Add("Modified") 
      $viewfields.Add("Editor") 
      [void]$newList.Views.Add("Detailed", $viewfields, "", 100, $true, $true)

      $newList.Update();

// setting the default view
      $view=$newList.Views["Detailed"]
      $view.DefaultView = $true
      $view.Update()
    }
  }

  $web.Dispose();
}

$site.Dispose(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T19:45:39.797

由于您正在修改要循环的集合，因此您将不得不使用 for-loop instad foreach。

像这样：

```
foreach($web in $site.AllWebs)
{
    $listCounter = $web.Lists.Count

    for($i=0;$i -le $listCounter;$i++)
    {
        $list = $web.Lists[$i]
        //etc....

    }

} 
```

# ruby - 由于 Ruby 1.9.3 中的类型错误，“gem install rspec”失败

> ID：10015323
> 
> 赞同：0
> 
> 时间：2012-04-04T16:24:51.837
> 
> 标签：ruby, rspec

我试图让我的 Ruby 环境在 Windows XP 上站起来，但我似乎遇到了一些问题。Ruby 安装良好，DevKit 安装良好，并且我已经成功安装了许多其他 gem，例如 rails、cucumber 等。但是，我在安装 rspec 时遇到问题。

我的 Ruby 版本是：

```
ruby 1.9.3p0 (2011-10-30) [i386-mingw32] 
```

我的宝石版本是

```
1.8.12 
```

我的 gem 服务器上的 rspec 的最新版本是 2.8.0。这是尝试安装 rspec 的输出：

```
C:\>gem install -V --backtrace rspec
GET <...>
304 Not Modified
ERROR: While executing gem ... (TypeError)
class Date needs to have method '_load'
C:/.../Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:647:in 'load' 
```

我查看了其他资源（[这里是一个](https://groups.google.com/forum/?fromgroups#!topic/rubyonrails-talk/cY5jHrOu9tc)；[这里是另一个](https://stackoverflow.com/questions/9013921/local-server-error-after-upgrading-ruby-from-1-8-7-to-1-9-2-with-rails-3-1-1)）来寻找答案，但到目前为止还没有找到答案或我的设置中失败/缺失的线索。如何安装没有错误的 rspec？

# parameters - “iBatis”问题，错误设置空参数

> ID：10015324
> 
> 赞同：0
> 
> 时间：2012-04-04T16:24:57.107
> 
> 标签：parameters, null, ibatis

我有这个：

```
public interface PermessiMapper {
final String SELECT_PERMESSI = "SELECT PR.CODICE as CODICE, PR.DESCRIZIONE as DESCRIZIONE FROM PERMISSION PR INNER JOIN USER_PERMISSION UP ON PR.CODICE=UP.PERMESSO INNER JOIN USERS US ON US.NOME_UTENTE=UP.UTENTE WHERE US.NOME_UTENTE = #{user} AND US.PASSWORD = #{password}";
    @Select(SELECT_PERMESSI)
    @Results(value = {
                    @Result(property="codice", column="CODICE" ),
                    @Result(property="descrizione", column="DESCRIZIONE")})
    public ArrayList<PermessoDTO> getPermessi(String user, String password);
} 
```

问题是当我尝试执行查询时，它给了我这个错误：

```
### Error querying database.  Cause: org.apache.ibatis.type.TypeException: Error setting null parameter.  Most JDBC drivers require that the JdbcType must be specified for all nullable parameters. Cause: java.sql.SQLException: invalid column name
### The error may involve it.reply.ratingGateway.monitoringManagement.DB.PermessiMapper.getPermessi-Inline
### The error occurred while setting parameters
### Cause: org.apache.ibatis.type.TypeException: Error setting null parameter.  Most JDBC drivers require that the JdbcType must be specified for all nullable parameters. Cause: java.sql.SQLException: Tipo di colonna non valido 
```

我尝试使用像“xxx”和“yyy”这样的简单字符串来更改`#{name}`and `#{password}`，然后它就可以正常工作了。

我也可以说调试代码，我已经看到我传递的两个参数都不为空。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T07:36:17.907

我终于修复了它，它似乎不喜欢以这种方式获取 2 个字符串的想法，

所以我改变了这样的：

```
 public ArrayList<PermessoDTO> getPermessi(UserDTO user); 
```

其中 UserDTO 包含属性用户和密码。

再见！

# javascript - 测试当一个元素失去焦点时哪个元素有焦点

> ID：10015331
> 
> 赞同：0
> 
> 时间：2012-04-04T16:25:36.143
> 
> 标签：javascript, jquery, html

如果焦点已转移到另一个特定元素（另一个 SELECT），我想做的是测试一个元素（一个 SELECT）何时失去焦点。我想在失去焦点并且不在两者之一上时触发某些东西。

问题是我在第一个选择中测试它失去焦点（带有模糊事件），如果另一个选择有它，但 DOM 尚未更新。

这是我所做的一个例子：

```
$select1.on("blur", function() {
    if($select2.is(":focus"))
    {
         // do something
    }
    else
    {
        // do something else
    }
}); 
```

$select1 和 $select2 只是包含元素的两个变量。我读到当元素获得焦点时，JQuery 会添加一个标识符“：focus”，但是按照我的做法，它不起作用。

在所有情况下，它都会进入 else “做其他事情”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T16:40:26.820

马特关于事件的顺序是正确的，但你可以更有创意。

例如，使用 setTimeout 来延迟模糊检查，这样你就知道你已经触发了你的焦点。简单的。

```
$select1.on("blur", function() {
  window.setTimeout(function() {
    if($select2.is(":focus"))
    {
       // do something
    }
    else
    {
      // do something else
    }
  },100);
}); 
```

试试那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T16:29:11.413

因为该`blur`事件在新元素之前被**明显**触发，所以您*唯一*能做的就是在一个事件中设置一个变量并在另一个事件中检测它。`focus`

 *```
$select1.on('blur', function (e) {
    var $that = $(this);

    setTimeout(function () {
        if (($that.data('focussed') || 0) > e.timeStamp - 5) {
            // Do something
        } else {
            // Something else
        }
    }, 1);
}); 

$select2.on('focus', function (e) {
    $select1.data('focussed', e.timeStamp);
}); 
```

看到它在这里工作；[http://jsfiddle.net/uZAMm/](http://jsfiddle.net/uZAMm/)*

# c++ - 目录大小

> ID：10015341
> 
> 赞同：21
> 
> 时间：2012-04-04T16:26:34.440
> 
> 标签：c++, c, windows, winapi

有没有办法在不实际遍历该目录并添加其中每个文件的大小的情况下获取目录大小/文件夹大小？理想情况下想使用一些像 boost 这样的库，但 win api 也可以。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-04T16:32:35.530

据我所知，您必须在大多数操作系统上进行迭代。

你可以看一下 boost.filesystem，这个库有一个 recursive_directory_iterator，它会迭代系统上的文件，但会累积大小。

[http://www.boost.org/doc/libs/1_49_0/libs/filesystem/v3/doc/reference.html#Class-recursive_directory_iterator](http://www.boost.org/doc/libs/1_49_0/libs/filesystem/v3/doc/reference.html#Class-recursive_directory_iterator)

```
include <boost/filesystem.hpp>
int main()
{
    namespace bf=boost::filesystem;
    size_t size=0;
    for(bf::recursive_directory_iterator it("path");
        it!=bf::recursive_directory_iterator();
        ++it)
    {   
        if(!bf::is_directory(*it))
            size+=bf::file_size(*it);
    }   
} 
```

PS：你可以通过使用 std::accumulate 和一个 lambda I just CBA 来使这个更干净

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T16:42:08.367

我不认为有这样的东西，至少没有win32 api功能。

本机适用于 Windows：

```
void DirectoryInfo::CalculateSize(std::string _path)
{
    WIN32_FIND_DATAA data;
    HANDLE sh = NULL;

    sh = FindFirstFileA((_path+"\\*").c_str(), &data);

    if (sh == INVALID_HANDLE_VALUE )
    {
            return;
    }

    do
    {
        // skip current and parent
        if (std::string(data.cFileName).compare(".") != 0 && std::string(data.cFileName).compare("..") != 0)
        {

            // if found object is ...
            if ((data.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY) == FILE_ATTRIBUTE_DIRECTORY)
            {
                // directory, then search it recursievly
                this->CalculateSize(_path+"\\"+data.cFileName);

            } else
            {
                // otherwise get object size and add it to directory size
                this->dirSize += (__int64) (data.nFileSizeHigh * (MAXDWORD ) + data.nFileSizeLow);
            }
        }

    } while (FindNextFileA(sh, &data)); // do

    FindClose(sh);

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-24T07:26:35.773

Zilog 写了很好的答案，但我会以类似但不同的方式来回答。

我有我的类型定义文件：

```
typedef std::wstring String;
typedef std::vector<String> StringVector;
typedef unsigned long long uint64_t; 
```

代码是：

```
uint64_t CalculateDirSize(const String &path, StringVector *errVect = NULL, uint64_t size = 0)
{
    WIN32_FIND_DATA data;
    HANDLE sh = NULL;
    sh = FindFirstFile((path + L"\\*").c_str(), &data);

    if (sh == INVALID_HANDLE_VALUE )
    {
        //if we want, store all happened error  
        if (errVect != NULL)
            errVect ->push_back(path);
        return size;
    }

    do
    {
        // skip current and parent
        if (!IsBrowsePath(data.cFileName))
        {
            // if found object is ...
            if ((data.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY) == FILE_ATTRIBUTE_DIRECTORY)
                // directory, then search it recursievly
                size = CalculateDirSize(path + L"\\" + data.cFileName, NULL, size);
            else
                // otherwise get object size and add it to directory size
                size += (uint64_t) (data.nFileSizeHigh * (MAXDWORD ) + data.nFileSizeLow);
        }

    } while (FindNextFile(sh, &data)); // do

    FindClose(sh);

    return size;
} 

bool IsBrowsePath(const String& path)
{
    return (path == _T(".") || path == _T(".."));
} 
```

如果需要，这使用 UNICODE 并返回失败的目录。

调用使用：

```
StringVector vect;
CalculateDirSize(L"C:\\boost_1_52_0", &vect);
CalculateDirSize(L"C:\\boost_1_52_0"); 
```

但永远不会通过`size`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-04T17:02:37.533

您必须遍历文件。如果树中有硬链接或重解析点，那么获得正确的结果会很棘手。有关详细信息，请参阅 Raymond Chen 的[博客文章](http://blogs.msdn.com/b/oldnewthing/archive/2004/12/28/336219.aspx)。

# clearcase - 多个项目或 VOB？

> ID：10015343
> 
> 赞同：1
> 
> 时间：2012-04-04T16:26:41.103
> 
> 标签：clearcase, configuration-management, clearcase-ucm

我最近刚接手了一个 ClearCase UCM 管理员职位，所以对这篇文章的任何输入都会很棒。

我们目前在一个项目中使用一个 VOB。假设我们正在进行的项目是汽车软件 CAR X。

现在，有一个 VOB、一个组件和一个名为“CAR X”的项目，每个人（可能是 12-15 名开发人员）都在为汽车开发软件。

将来，我们可能需要为新车制作软件，称为“CAR Y”，它可能基于用于“CAR X”的软件并进行修改。我们希望这些在某种程度上是分开的。应该创建一个新的 VOB 还是只是当前 VOB 中的一个新组件？如果创建了新的 VOB 和项目，则可以从新项目中导入和修改文件，对吗？将一个组件用于同一个 VOB 中的每个项目是否有缺点？

这解释起来很复杂，所以希望我能够理解这个想法。如果您需要我更具体或回答任何问题，请发表评论。

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:36:23.007

这取决于您在接下来的几个月/几年中可以创建的 vobs 数量。

我更喜欢在一个（通常命名的）vob 中创建多个组件，而不是将一个vob 限制为一个组件（尤其是当后一种选择无法逆转时）

您可以轻松地在一个 vob 中定义 100 个组件。
就所涉及的资源而言，尝试创建/管理 100 个 vobs 几乎是不可能的（进程太多）

如果您*知道*您只需要创建其中的几个 vobs，请继续。
但我的观点仍然存在：每个 vob 的多个组件是一个可以扩展的模型。

# javascript - rollover 图片

> ID：10015347
> 
> 赞同：1
> 
> 时间：2012-04-04T16:27:21.743
> 
> 标签：javascript, html

嗨，我正在为我目前正在开发的网站尝试简单的翻转图像。当我在Firefox中测试效果时，鼠标悬停效果会移动网页上的其他元素。对于如何解决这个问题，有任何的建议吗？

```
<head>
<script type="text/javascript">
if (document.images) {
    img1 = new Image();
    img1.src = "training2.png";
} </script></head>

<body>
<script type="text/javascript">
function rollover(name, filename)
{
    var fullpath = '' + filename;
    document.images[name].src = fullpath; }
    </script>
<div id="trainingbutton"><a href="#" onmouseover="rollover('button1','training2.png');" onmouseout="rollover('button1','training.png')">
<img src="training.png" name="button1" border="0" alt="training"  /></a></div></body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:28:54.113

我不会使用 javascript 来翻转图像，只需创建一个包含正常状态和悬停状态的精灵，然后使用 css 的悬停属性可以移动背景位置。

像这样的东西：

```
<a class="rollover">Link</a> 
```

然后是风格：

```
a.rollover
{
    background-image:url('/images/background.png');
    background-position:top left;
}

a.rollover:hover
{
    background-position:bottom left;
} 
```

此方法也不会因在您翻转时必须下载图像而受到影响，因为它是作为初始请求的一部分下载的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T16:40:58.073

正如前一个人回答的那样；精灵是要走的路。它负责必须预加载“悬停”图像；它是纯 CSS。

示例（图像链接翻转）：

HTML：

```
<a href="#" class="mysprite">Join Newsletter</a> 
```

将非悬停和悬停状态图像放在一个画布上。如果每个“图像”高 20 像素，则堆叠的两个将是 40 像素。因此，要显示底部图像，您只需**将**背景向上移动 20px（因此在下面的悬停状态下为 -20px）

CSS：

```
.mysprite {
    display: block;
    width: 100px;
    height: 20px;
    background: url('mysprite.png') no-repeat;
    background-position: 0 0; /* technically not neccesary, but illustrates the example */
    text-indent: -9999px; /* eliminates the link text so only the background image shows */
    font: 0px; /* eliminates IE displaying the text despite text-indent */

}

.mysprite:hover {
   background-position: 0 -20px;
} 
```

从本质上讲，您创建了一个“蒙版”，您可以从中移动下面的背景图像以显示您想要的内容。

# c# - 矩形重叠而不是触摸 XNA 4.0 的问题

> ID：10015348
> 
> 赞同：0
> 
> 时间：2012-04-04T16:27:27.410
> 
> 标签：c#, xna, 2d, collision-detection

我正在为 XNA 中的典型 BubbleShooter 游戏制作骨架，但我的碰撞检测算法存在问题，[此处的图片对此进行了说明](http://i.stack.imgur.com/oIuoi.png)

根据碰撞时碰撞矩形位置的位置，将新位置分配给碰撞气泡。

当我射出一个气泡时会出现问题，[这](http://i.stack.imgur.com/zvf2y.png)发生在碰撞的那一刻。我一步步运行调试，碰撞发生的那一刻和图片一模一样，所以我的算法失败了。
我试图直接发布图像，但似乎我不能，因为我仍然是这里的新用户。对于那个很抱歉。

有没有办法可以准确检测**矩形** 的边界*何时相互接触？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:32:14.897

您可以改为执行每像素碰撞，此处说明：

[点击这里](http://create.msdn.com/en-US/education/catalog/tutorial/collision_2d_perpixel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T16:43:40.040

所以，如果我理解，你的问题是你错过了碰撞的确切时刻？

我猜你正在以一种谨慎的方式计算碰撞，即。即使您的算法每秒运行 60 次，也*只有*60 次可以在一秒内无限次*细分*。

简单（但不好）的解决方案是让您的对象移动得更慢。

好的意味着检索帧*之间发生的事情。*您将需要某种方向矢量和物体速度。使用这两个值，您可以确定碰撞发生的地点和时间。

您还需要帧之间的经过时间。这就是 GameTime 对象的用途：它有一个属性“ElpasedGameTime”，它有一个属性“TotalElapsedMilliseconds”。

关于 GameTime 类的 MSDN 文档：http: [//msdn.microsoft.com/en-us/library/microsoft.xna.framework.gametime.elapsedgametime.aspx](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.gametime.elapsedgametime.aspx)

维基百科上关于碰撞检测的一些阅读材料：[http ://en.wikipedia.org/wiki/Collision_detection#A_posteriori_.28discrete.29_versus_a_priori_.28continuous.29](http://en.wikipedia.org/wiki/Collision_detection#A_posteriori_.28discrete.29_versus_a_priori_.28continuous.29)

“先验”和“后验”检测：这就是您可能缺少的关键字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T16:56:26.467

我现在没有时间测试它，但您应该尝试将每帧的碰撞次数限制为 1。如果检测到一个碰撞，则在进入更新部分时使用计数器阻止同一帧的所有其他碰撞。这样，如果您的弹丸位于底部，则您的代码为

```
 if(hitBottomPart)
                {
                  // Logic
                } 
```

在弹丸有时间击中纹理的另一个矩形之前，部分将在同一帧中执行。虽然这只是猜测。祝你游戏好运！碰撞总是很难实现。

# asp.net-mvc - 对 ASP.NET MVC 3 应用程序进行单元测试

> ID：10015349
> 
> 赞同：0
> 
> 时间：2012-04-04T16:27:29.340
> 
> 标签：asp.net-mvc, unit-testing, integration-testing, rhino-mocks, httpmodule

我们有一个 ASP.NET WebForms 应用程序，我们将把它转换为 ASP.NET MVC 应用程序 - 原因之一是我们可以充分利用单元测试和 TDD。

我们当前的 WebForms 应用程序大量使用了 HttpModules。我们目前正在讨论是否应该坚持使用 HttpModules 或使用全局过滤器（这里的任何建议都会很棒）。

但是，在我的几个“hello world”测试 MVC 应用程序中，我还没有弄清楚如何在单元测试时触发 HttpModule（或者实际上是全局过滤器）代码。

也许我错了，但在我看来，我需要将它作为我的单元测试（集成测试）的一部分，否则它不能真正代表我的生产代码中正在发生的事情。

任何指导都将受到欢迎。

谢谢

格里夫

PS - 我在最初回答我的问题后添加了以下内容。

**简单的组合用例**

*生产中*

1.  浏览器请求控制器方法
2.  HttpModule 触发（或全局过滤器） - 这会将静态 Guid 属性设置为具有值。
3.  控制器方法获取此 Guid 值并在其后续逻辑中使用它
4.  然后将正确的结果返回给浏览器

*在单元测试中*

1.  单元测试调用相同的控制器方法
2.  HttpModule（或全局过滤器）不会触发 - 静态 Guid 属性的值为 Guid.Empty
3.  控制器方法采用此 Guid 值，但由于它是空 Guid 而引发错误
4.  单元测试失败

*我的想法是*：

*   如果控制器依赖 HttpModule（或全局过滤器）首先运行，则 HttpModule 是一个依赖项，因此必须对它的操作结果进行 Stubbed 以使测试成为真正的*单元*测试。
*   如果测试要包括运行 HttpModule（或全局过滤器）的效果，那么这将是一个*集成*测试（尽管目前尚不清楚如何让 HttpModule 或全局过滤器作为集成测试的一部分运行）
*   HttpModule（或全局过滤器）应该有自己的一组单元测试

我认为这是我将采用的方法，但如果有人能建议我如何让我的集成测试（如上所述）工作，那么我将不胜感激。

我看到的问题是我的 TEST 项目在运行我的测试时变成了“启动”项目，所以 HttpModules（在 ASP.NET MVC 的 web.config 文件中定义）和全局过滤器（在 ASP.NET 中定义） MVC 的 global.asax 文件）不会运行，因为 web.config 和 global.asax 文件没有被执行。所以问题仍然存在：我如何让这些在我的集成测试中运行？

感谢大家

格里夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T16:38:51.533

您不应该通过测试来检查全局过滤器是否触发。触发代码的机制不是您的代码，它是框架的一部分，因此框架团队应该对其进行测试。

相反，您应该简单地进行测试以确保已应用全局过滤器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T16:31:14.553

是否调用 HttpModule 或 Global Filter 由 Framework 处理。你不应该担心由框架处理的单元测试事情。您的单元测试应该只测试您的 HttpModule 或全局过滤器在调用时是否正常运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T10:44:13.237

我会模拟 http 模块和存储库来对控制器和服务进行单元测试，在我看来，这就是单元测试的方式。全局过滤器和 httpmodules，您可以使用端到端测试对其进行测试。希望能帮助到你。

# javascript - 延迟和动画背景

> ID：10015354
> 
> 赞同：1
> 
> 时间：2012-04-04T16:27:40.717
> 
> 标签：javascript, jquery, animation

我想让背景图像消失。有用。但是当我尝试延迟它或为其设置动画时它会失败。猜猜它出了什么问题以及如何做好？

```
$(function(){      
    $("#foto1").click(function() {
        $("#foto1").delay(1000).animate.css({"background":"none"},2000);
    }); 
}) 
```

[http://jsfiddle.net/78W3u/](http://jsfiddle.net/78W3u/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:31:51.190

像这样试过

```
$(document).ready(function(){  
   $("#foto1").click(function() {
       $(this).delay(1000).fadeOut(20000, function(){
        $("#foto1").css('background', 'none')   //<=== this remove the background after the animation stops
       });
    });    
})​ 
```

[http://jsfiddle.net/78W3u/5/](http://jsfiddle.net/78W3u/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T16:32:54.143

这将淡出图像：http: [//jsfiddle.net/2MQeC/](http://jsfiddle.net/2MQeC/)

```
$(function(){      
    $("#foto1").click(function() {
        $("#foto1").fadeOut(2000);
    }); 
})​ 
```

**- 编辑 -**

这将独立于图像为背景设置动画：http: [//jsfiddle.net/2MQeC/1/](http://jsfiddle.net/2MQeC/1/)

```
#foto1 { 
    background: black; 
  -webkit-transition: background 1.5s ease;  /* Saf3.2+, Chrome */
     -moz-transition: background 1.5s ease;  /* FF4+ */
      -ms-transition: background 1.5s ease;  /* IE10 */
       -o-transition: background 1.5s ease;  /* Opera 10.5+ */
          transition: background 1.5s ease;
} 
```

​</p>

```
$(function(){      
    $("#foto1").click(function(){
        $this = $(this);
        setTimeout(function(){
            $this.css({
                background: 'green'
            });
        }, 1000); // delay
    }); 
})​; 
```

如您所见，这依赖于[CSS3 过渡](https://developer.mozilla.org/en/CSS/CSS_transitions)来实现背景动画。

更好的跨浏览器解决方案是使用 jQuery`.animate()`函数。但是您不能修改尽可能多的属性`.css()`。

`.animate()` [从 jQuery文档](http://api.jquery.com/animate/)中提取：

> 大多数非数字属性无法使用基本的 jQuery 功能进行动画处理（例如，宽度、高度或左侧可以进行动画处理，但背景颜色不能进行动画处理，除非使用 [jQuery.Color()](https://github.com/jquery/jquery-color)插件）。

但是，您可以更改标记并将图像和背景分隔在两个叠加的 div 中。这可以简化您尝试做的事情。

# command-line - 如何使用 TFS 命令行工具 'tf.exe' 列出所有标签？

> ID：10015356
> 
> 赞同：1
> 
> 时间：2012-04-04T16:27:53.087
> 
> 标签：command-line, tfs

我想使用命令行工具生成所有标签的列表`tf.exe`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T16:28:48.563

`tf labels /owner:*`

默认情况下，该`labels`命令仅列出您自己拥有的标签。

如果要限制标签输出，可以过滤标签：

`tf labels /owner:* 0.1*`

以上将仅输出名称以“0.1”开头的标签。

欲了解更多信息：

*   [标签命令](https://msdn.microsoft.com/en-us/library/t21wc9ca.aspx)

# c++ - C++ QueryPerformanceCounter 比睡眠更准确？

> ID：10015357
> 
> 赞同：0
> 
> 时间：2012-04-04T16:27:54.117
> 
> 标签：c++, windows

我找到了一个 QueryPerformanceCounter 的例子，

[http://advancedcppwithexamples.blogspot.com/2009/08/measuring-elapsed-time-in-c-using_21.html](http://advancedcppwithexamples.blogspot.com/2009/08/measuring-elapsed-time-in-c-using_21.html)

该示例使用仅报告 79 毫秒的 QueryPerformanceCounter 测量 100 毫秒的睡眠。

睡眠如此不准确是有原因的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T16:35:54.213

`sleep`不准确有两个原因：它基于一个非常慢的时钟，并且它依赖于操作系统在周期结束时恢复执行。

性能计数器实际上是内置在 CPU 中的，因此它与运行芯片的时钟信号一样准确。它不受操作系统或任务的影响。

# objective-c - 如何使 UITextview 和 UIImageView 可滚动

> ID：10015360
> 
> 赞同：1
> 
> 时间：2012-04-04T16:27:59.763
> 
> 标签：objective-c, uiscrollview, ios5

我在 UIScrollView 中放置了一个 UIImageView 和一个 UITextView。结果是当我滚动时，文本滚动但图像保持在同一个地方。

是否可以使 UIImageView 和 UITextView 整体滚动？这可以使用情节提要完成吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-04T16:35:19.923

您只滚动文本的原因是 UITextView 有自己的 UIScrollView 并且您只滚动 UITextViews 内部滚动视图。

* * *

要实现您的目标，您需要：

*   在 UITextView 中禁用滚动
*   使 UITextView 足够大以覆盖所有文本
*   使 UIScrollViews contentSize 足够大以覆盖 UIImageView 和 UITextView
*   在 UIScrollView 中布局 UIImageView 和 UITextView

## 在 UITextView 中禁用滚动

在您的文本视图上设置`scrollingEnabled`为 false，这可以直接在情节提要中完成。

## 调整 UITextView 的大小

文本视图可以覆盖任何长度的文本，并且在不知道正在设置什么文本的情况下，您无法设置正确的大小。即，当在 UITextView 中设置文本时，您需要在代码中设置大小。

## 调整内容大小

见上文（如果你不知道 UITextView 的高度，你就无法知道内容的大小）。

## 在 UIScrollView 中布局 UIImageView 和 UITextView

但是，您可以在情节提要中布局 UIImageView 和 UITextView ，并且仅在设置文本时更改`bounds`文本视图和滚动视图的`contentSize`。

* * *

## 查看层次结构

下图显示了完成后视图层次结构的外观。**scrollView**的框架是**蓝色**的。它的**内容**是**红色**的并且比框架大。其中包含**图像视图（黄色）**和**文本视图（绿色）**。

![在此处输入图像描述](../Images/9a1a21fa3f4a4ffba80990c1e4397408.png)

# php - 使用数组将字符串转换为另一个语言

> ID：10015362
> 
> 赞同：3
> 
> 时间：2012-04-04T16:28:02.490
> 
> 标签：php

我想翻译这个字符串中出现的数组中的所有键：

```
$bar = "It gonna be tornado tomorrow and snow today."; 
```

并将其替换为使用此数组的值：

```
 $arr = array(
   "tornado" => "kasırga",
   "snow" => "kar"
); 
```

所以输出将是：

```
$bar = "It gonna be kasırga tomorrow and kar today."; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:34:41.630

您要查找的函数称为 string-translate，以[`strtr`^(*Docs*)](http://php.net/strtr)的缩写形式编写：

```
$bar = strtr($bar, $arr); 
```

与其他答案的普遍看法相反，使用它`str_replace`是*不安全*的，因为它会重新替换不是您想要的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T16:32:29.733

你可以用`str_replace`函数做到这一点：

```
$tmp = str_replace(array_keys($arr), array_values($arr), $bar); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T16:33:31.693

```
foreach($arr as $key=>$value) {
    $bar = str_ireplace($key, $value, $bar);
} 
```

# mysql - 分页sql查询语法

> ID：10015364
> 
> 赞同：3
> 
> 时间：2012-04-04T16:28:06.193
> 
> 标签：mysql, sql, pagination, sql-order-by

我正在尝试按日期对我的讨论板中的帖子进行排序。这是我的代码：

```
$query = mysql_query("SELECT * FROM {$statement} 
LIMIT {$startpoint} , {$limit} 
ORDER BY datetime ASC"); 
```

这在语法上有什么问题吗？如果不是，还有什么可能是错的？基本上正在发生的事情是结果没有出现。我删除了订单，它可以工作（但当然它没有排序......）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T16:30:43.347

Order by 应该在限制之前：

```
$query = mysql_query("SELECT * FROM {$statement} 
ORDER BY datetime ASC LIMIT {$startpoint} , {$limit}"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T16:30:58.387

试试这个：

```
$query = mysql_query("SELECT * FROM {$statement} 
ORDER BY datetime ASC LIMIT {$startpoint} , {$limit} "); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T14:09:37.763

可能有点晚了，但是 mySQL 提供了非常有用的 OFFSET 关键字……尤其是对于分页

```
mysql_query("SELECT * FROM {$statement} ORDER BY datetime ASC LIMIT {$limit} OFFSET {offset} 
```

如果每页 10 条记录是您要查找的内容，并且您想在第 2 页上显示记录，即记录 11-20，您的查询将如下所示：

```
 mysql_query("SELECT * FROM {$statement} ORDER BY datetime ASC LIMIT 10 OFFSET 10 
```

参考：[http ://www.petefreitag.com/item/451.cfm](http://www.petefreitag.com/item/451.cfm)

# jquery - 简单的 Jquery 折叠

> ID：10015365
> 
> 赞同：0
> 
> 时间：2012-04-04T16:28:13.067
> 
> 标签：jquery, slide

我是 Jquery 的新手，需要一些帮助：我有一个 div，我想单击它并向下滚动另一个 div，但我想再次单击它并将其折叠起来，我知道它很容易但我很难过。继承人的代码：

```
$(document).ready(function() {

$('#clickme').click(function() {
  $('#book').slideDown('slow', function() {
    // Animation complete.
  });
}); 
```

});

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T16:37:13.487

正如我在评论中提到的，使用[.slideToggle()](http://api.jquery.com/slideToggle/)。这是一个**[jsFiddle 示例](http://jsfiddle.net/j08691/SsBwj/)**。

jQuery：

```
$('#clickme').on('click', function() {
    $('#book').slideToggle();
});​ 
```

HTML：

```
<div id="clickme">click me</div>
<div id="book">book</div>​ 
```

# string - Actionscript 3.0：从 AS3 类访问动态文本到游戏

> ID：10015374
> 
> 赞同：0
> 
> 时间：2012-04-04T16:28:56.000
> 
> 标签：string, actionscript-3, flash, colors, mouseevent

我在这里有一个泡泡爆破游戏，泡泡从游戏顶部落到底部，玩家试图在 30 秒内弹出尽可能多的泡泡。这是一个3帧游戏，第一帧是开始按钮，第二帧是游戏，第三帧是得分，然后再玩。第一帧：进入第二帧的按钮 第二帧：定时器计算 30 秒的播放时间 第三帧：再次播放的按钮。

ScoreValue 是游戏最后一帧中的动态文本框。它根据气泡的大小和大小记录分数，并且应该根据玩家弹出的气泡数量进行更改。

```
scoreValue.text = score.toString();
Error 1120: Access of unidentified property scoreValue 
```

无论如何，这里是完整的代码包。

```
 package  {
    import flash.display.MovieClip;
    import flash.events.Event;
    import flash.media.Sound;
    import flash.geom.ColorTransform;

    public class Ball extends MovieClip{

        static public var burstCounter: uint;
        private var vx: Number;
        private var vy: Number;
        private var gravity: Number;
        private var stageWidth;
        private var stageHeight;
        private var bubble:Ball = new Ball();
        private var score: uint=0;

        public function Ball() {
            bubble.addEventListener(Event.ADDED_TO_STAGE, initialize)
            bubble.addEventListener(MouseEvent.CLICK, burst)
            bubble.addEventListener(Event.ENTER_FRAME, dropping)
        }

        public function initialize (e:Event):void
        {
            bubble.x = Math.random() * stageWidth;
            bubble.y = 0;

            stageWidth = stage.stageWidth;
            stageHeight = stage.stageHeight;

            bubble.vx = Math.random() * 2 - 1;
            bubble.vy = Math.random() * 2 + 1;
            gravity = 0.1;

            var sizeScale = Math.random() * 1.2 + .6;
            bubble.scaleX = bubble.scaleY = sizeScale;
            score = (10 / sizeScale);
            scoreValue.text = score.toString();

            var colorTran = new ColorTransform();
            colorTran.color = Math.random() * 0xFFFFFF;
            transform.colorTransform = colorTran;
            addChild(bubble);
        }
        function dropping(e: Event) :void
        {
            x += vx;
            y += vy;
            vy += gravity;

            if((x<0) || (x>stageWidth) || (y<0) || (y>stageHeight))
            {
                if(parent != null)
                {
                    parent.removeChild(this);
                }
                removeEventListener(Event.ENTER_FRAME, dropping)
            }
        }
        function burst (e:Event):void
        {
            var ballonPopping: Sound = new BalloonPopping();
            bubble.removeEventListener(Event.ADDED_TO_STAGE, initialize);
            bubble.removeEventListener(Event.ENTER_FRAME, dropping);
            removeChild(bubble);

            ballonPopping.play();

            burstCounter += score;
        }

    }

} 
```

我在我的程序中得到这个作为输出，有人知道为什么吗？

```
Fonts should be embedded for any text that may be edited at runtime, other than text with the "Use Device Fonts" setting. Use the Text > Font Embedding command to embed fonts. 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:38:22.050

您需要导入 MouseEvent 类来修复“访问 MouseEvent 的未定义属性”

将此添加到您的导入语句中：

```
import flash.events.MouseEvent; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T16:37:32.513

首先，在一个类中，函数应该定义为`public`or `private`。其次，您的`burst`函数期待`Event`您为其分配 a`MouseEvent`的时间。这是我经常犯的一个简单错误。

将其更改为：

```
private function burst (e:MouseEvent):void 
```

输出面板中的字体意味着您在某处有一个动态文本字段。只需转到您的 FLA，打开该文本字段并在属性面板上，点击嵌入按钮并选择 Basic Latin 复选框...或数字，如果它只是数字

编辑：还将您的导入更改为

```
import flash.events.*; 
```

或添加

```
import flash.events.MouseEvent; 
```

# mysql - 运行 cron 来查询用户帐户是否在一周内兑换了这么多积分

> ID：10015375
> 
> 赞同：0
> 
> 时间：2012-04-04T16:28:58.543
> 
> 标签：mysql, cron

我的系统允许用户输入代码以将积分添加到他们的帐户中。我希望在用户在一周内兑换超过 10,000 点时收到通知。

我认为这需要一个 cron 作业，所以我已经设置好了。我只是想知道是否有某种 mysql 函数可以在查询时帮助我解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:34:03.987

您的 cron 命令将如下所示：

```
mysql mydatabase -c "select username, sum(points) as points from redeemed where timestamp > subdate(now(), interval 7 day) group by 1" 
```

# c++ - mkdir，带符号的路径名

> ID：10015377
> 
> 赞同：3
> 
> 时间：2012-04-04T16:29:02.417
> 
> 标签：c++, c, linux, embedded, mkdir

我有一个小问题，我需要从我的 c 代码或 c++ 中创建目录，没关系。但目录名称必须包含诸如':'、''、'.'之类的字符。一般来说，当前时间，当我尝试使用`mkdir()`函数创建时，我收到 EINVAL 错误，但`system("mkdir ...")`一切正常。我怎么解决这个问题？

谢谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T16:41:54.270

不同的文件系统格式对于什么是有效字符和什么不是有效字符有不同的规则。对于`ext2`及其后代，文件名可以包含除`'/'`or之外的任何字符`'\0'`。

对于 FAT 文件系统及其后代，无效字符列表更大，包括`':'`.

检查您使用的文件系统格式，并尝试在不同的文件系统上运行您的程序。

# php - 使用 exec() 运行带有参数的控制台应用程序

> ID：10015378
> 
> 赞同：2
> 
> 时间：2012-04-04T16:29:08.933
> 
> 标签：php, cmd, exec

我可以使用 windows 命令行调用以下 exe，但是使用 exec() 函数，它不起作用。

我必须将目录作为参数传递给该 exe 文件。

更新：

```
$command = '""C:\\Users\\cArn\\Documents\\Visual Studio 2010\\Projects\\word_to_pdf\\word_to_pdf\\bin\\Debug\\word_to_pdf.exe" "C:\\wamp\\www\\zabjournal\\files\\journals\\1\\articles""';
exec($command); 
```

似乎仍然不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:49:28.583

`'`改用单引号

```
$command = 'C:\Users\cArn\Documents\Visual Studio 2010\Projects\word_to_pdf\word_to_pdf\bin\Debug\word_to_pdf.exe C:\wamp\www\zabjournal\files\journals\1\articles';
exec($command); 
```

谢谢

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T17:37:21.573

尝试

`passthru($command)`而是关闭`exec()`

# structuremap - 使用 StructureMap 的 OpenRasta DI 问题

> ID：10015379
> 
> 赞同：0
> 
> 时间：2012-04-04T16:29:10.323
> 
> 标签：structuremap, openrasta

我正在尝试将 StructureMap 与 OpenRasta 一起使用。我的`Configuration`班级实现`IDependencyResolverAccessor`. 这是我配置容器的代码：

```
container.Configure(x =>
     {
         x.For<IFileResourceRepository>().Use(
             r => new FileResourceSqlRepository(ConnectionString));
         x.For<ILog>().Use(l => new FileLog(LogFileName, _logLevel));
         x.For<ILogger>().Use<ProTeckLogger>();
         x.For<ILogger<CodecLogSource>>().Use<ProTeckLogger<CodecLogSource>>();
         x.For<ILogger<IOLogSource>>().Use<ProTeckLogger<IOLogSource>>();
         x.For<ILogger<OperationModelLogSource>>().Use<ProTeckLogger<OperationModelLogSource>>();
         x.For<ILogger<PipelineLogSource>>().Use<ProTeckLogger<PipelineLogSource>>();
         x.SetAllProperties(
             policy =>
             policy.Matching(
                 prop => (prop.PropertyType.IsAssignableFrom(typeof (ILogger)))));
         x.SetAllProperties(policy => policy.OfType<IFileResourceRepository>());
         x.SetAllProperties(policy => policy.OfType<ILog>());
         x.SetAllProperties(policy => policy.OfType<ILogger<CodecLogSource>>());
         x.SetAllProperties(policy => policy.OfType<ILogger<IOLogSource>>());
         x.SetAllProperties(policy => policy.OfType<ILogger<OperationModelLogSource>>());
         x.SetAllProperties(policy => policy.OfType<ILogger<PipelineLogSource>>());
     }); 
```

我收到以下错误：

```
StructureMap Exception Code:  202
No Default Instance defined for PluginFamily System.Diagnostics.TraceSource, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089 
```

我想也许我错过了注册？我可能做错了什么吗？

谢谢-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T21:15:48.543

实际上，我似乎错过了注册。将此行添加到容器配置中似乎已经解决了该问题：

```
 x.For<TraceSource>().Use(new TraceSource("OpenRasta")); 
```

我不完全了解 OR 如何使用 TraceSource，但现在，我将开始工作！

# javascript - 在多维关联数组中查找空值

> ID：10015384
> 
> 赞同：-2
> 
> 时间：2012-04-04T16:29:27.853
> 
> 标签：javascript, jquery

有没有办法搜索维度未知的关联数组并将所有空值更改为空字符串？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:55:39.530

可能是这样的：

```
var objectNullToEmpty = function (obj) {
    for (key in obj) {
        if (obj[key] === null) {
            obj[key] = '';
        }
        if (typeof obj[key] === 'object') {
            objectNullToEmpty(obj[key]);
        }
    }
    return obj;
}; 
```

# version-control - NetBeans：nbactions.xml、nb-configuration.xml 和 catalog.xml 是否应该进入源代码控制？

> ID：10015385
> 
> 赞同：12
> 
> 时间：2012-04-04T16:29:29.007
> 
> 标签：version-control, netbeans

[这个线程](https://stackoverflow.com/questions/1267403/which-netbeans-projects-files-should-go-into-source-control)对于找出 Netbeans 中的哪些文件应该进入源控制非常有用，但它并不涵盖所有文件。

特别是我想知道以下文件是否应该进入源代码管理。这是我的假设/猜测：

*   **nb-configuration.xml** - 最简单 - 评论中的文件本身说它**应该**进入源代码管理。

*   **nbactions.xml** - 我看到这个文件存储了运行应用程序的典型信息。即 JVM 参数等。所以我想这是一个**品味问题**——如果你希望其他开发人员有一个“建议的”运行配置——包括它。否则 - 不要。正确的？

*   **catalog.xml** - 不确定这是做什么的（我猜编辑器使用它来查找 xml 模式等以启用语法着色，但这只是一个猜测）。无论如何 - 我看到这个文件有系统特定的信息（路径） - 所以它**不应该**进入源代码控制。

任何人都可以确认上述内容吗？谢谢，

彼得

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-08T16:04:33.780

由于以下几个原因，我从未将我的 IDE 配置文件放在存储库中：

*   其他同事可能想使用他们的；
*   其他同事可能想要使用其他 IDE（例如 Eclipse），而查看这些文件（甚至必须将它们从结帐中排除）可能会让他们感到烦恼；
*   其中有些文件一般与单个项目无关，有些是自动生成的，因此无需将它们存储在每个项目的源代码中。

为了排除它们，我们的第一个解决方案是`.svnignore`，但是为了单个用户的特定需求而修改一些共享内容在逻辑上仍然是错误的，因此我们决定更加严格：

在我的`~/.subversion/config`我有：

```
[miscellany]
global-ignores = nbactions.xml nbproject 
```

希望这可以帮助，

马塞洛

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T18:08:13.137

在我基于 Maven 的项目中，我进行`nbactions.xml`了源代码控制。只要确保将绝对路径更改为相对路径即可。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-08T08:19:05.687

我进行`nbactions.xml`了源代码控制，但有一个警告：它的内部格式可能会发生变化，因此如果您的开发人员出于任何原因使用不同版本的 NetBeans，您可能不得不将其删除，因为共享它变得令人讨厌。

最近我从 NetBeans 7.3.1 升级到 7.4，“运行”操作给出了一个奇怪的错误消息。我通过删除和重新生成解决了这个问题`nbactions.xml`：旧的有一个用于“运行”和“调试”操作的自定义 Maven 目标；它`org.codehaus.mevenide:netbeans-deploy-plugin:1.2.4:deploy`在 IDE v7.3.1 中不可见（可能它是由更旧的版本生成供内部使用的）并且正在生成`org.openide.util.Lookup`在 v7.4 中找不到的类。我在这里记录问题是因为我在网上搜索不成功后自己找到了解决方案。我希望这可以帮助别人。

# gerrit - Gerrit 修订工作流程：合并冲突和重新批准

> ID：10015388
> 
> 赞同：7
> 
> 时间：2012-04-04T16:29:39.480
> 
> 标签：gerrit

我们正在考虑将 Gerrit 用于大型项目。在这一点上，了解人们如何处理已批准更改的合并冲突会很有趣。

想象一下，许多不同大小的更改同时等待修订，并且正在逐步审查和验证。由于其中一些可能正在修改同一段代码，因此冲突是不可避免的。如果“集成商”在简单的工作流程中手动接受补丁，这不是问题，小冲突可以在途中解决，但对于 Gerrit，情况就不同了。修改审核通过后，如果发生合并冲突，据我了解，需要作者重新定位并再次推送修订，在这种情况下，重新开始修订过程。在相对活跃的项目中，每周有超过 50 个外部贡献者提交，这可能会变成噩梦，

问题：

1.  我是否正确，Gerrit 不是预期会发生大量合并冲突的大型活跃事物的前进方向？

2.  一些合并冲突可能是微不足道的，有没有办法解决它们而不需要打扰作者重新提交更改？

3.  如果需要将更改向后移植到稳定的分支，我想每个分支的单独更改都需要推送以进行修订，即使樱桃选择是干净的。

也欢迎对您的 Gerrit 工作流程体验发表一般评论。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T03:39:48.220

1.  Gerrit 被一些非常庞大的项目使用，例如 Android 和相关的 bsp、内核等存储库。这些项目每周获得超过 50 次外部提交。我认为高通将在大约这段时间内完成数千次提交。

2.  Gerrit 中有一个设置可以自动合并琐碎的冲突。这可以为每个存储库设置。如果设置了此选项，则在审核和验证更改并且用户按下“提交”按钮后，将根据您的提交策略（精选，必要时合并）合并更改。我能找到的最好的文档在这里[http://gerrit-documentation.googlecode.com/svn/Documentation/2.3/cmd-create-project.html#_options](http://gerrit-documentation.googlecode.com/svn/Documentation/2.3/cmd-create-project.html#_options)在 --use-content-merge 选项下。

3.  是的，这通常是我们做事的方式。还有其他选项（绕过审查、合并分支等），但挑选所需的分支和审查效果很好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T18:09:59.263

我们希望保持我们的历史清晰易懂，因此保持合理的线性。所以我们将 Gerrit 配置为只使用快进合并。唯一可见的合并是用于发布和支持分支（我们正在使用 git-flow），这使得事情更容易理解。

但是，我们安装了 trivial-rebase 插件，以便以前的审核状态会自动应用于 rebase 更改。无论变基是在 Gerrit 中（使用变基按钮）还是开发人员在本地变基并重新推送更改，都会发生这种情况。

根据我们的经验，合并冲突在大型项目中实际上并不常见，因为涉及的源文件数量要多得多。我们在 repo 中有大约 16,000 个文件和 30 名全职或兼职开发人员，因此编辑同一文件的可能性非常低。

无论如何，如果两个开发人员正在对同一文件的同一部分进行更改，他们真的应该互相交谈。如果项目架构需要频繁更改同一文件（例如某种注册表），则需要重新设计架构，使用依赖注入之类的东西，或者从片段自动生成源文件作为构建的一部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T01:08:02.093

当我们在公司遇到合并问题时，开发人员会重新定位并推送到 gerrit。如果合并是最小的，他被允许（按照惯例）向 LGTM 进行变基并提交。

我们仍在争论开发人员是否/何时应该在更新补丁集时重新设置基准。当父项更改时，在比较补丁集时，UI 会感到困惑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-13T23:46:50.550

在使用 mercurial 几年后，我使用它几个星期，其中一个功能分支合并到默认模式中，我讨厌 gerrit。我发现自己有更多的开销来解决琐碎的冲突，这些冲突可以通过在 mercurial 或 git 上以非 Gerrit 模式进行合并来自动解决。然后每个人都使用参数 android uses gerrit ergo gerrit 很好，应该对每个人都有效。

# css - 仅在鼠标悬停 div 时显示滚动条

> ID：10015389
> 
> 赞同：21
> 
> 时间：2012-04-04T16:29:42.690
> 
> 标签：css, html

鉴于此`div`：

```
<div style="overflow:auto;"></div> 
```

如何使滚动条仅在鼠标悬停在 div 上时可见？

我不希望滚动条总是出现。Facebook 的右上角就是一个例子。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-04T16:59:47.373

您可以隐藏溢出直到鼠标悬停，然后使其自动。这就是我所做的...注意 16px 填充假定滚动条为 16px 宽，并且存在因此当滚动条出现时文本不会重新换行。

```
 div.myautoscroll {
        height: 40ex;
        width: 40em;
        overflow: hidden;
        border: 1px solid #444;
        margin: 3em;
    }
    div.myautoscroll:hover {
        overflow: auto;
    }
    div.myautoscroll p {
        padding-right: 16px;
    }
    div.myautoscroll:hover p {
        padding-right: 0px;
    } 
```

[在这个小提琴](http://jsfiddle.net/stephen61/VTqg5/)中看到它的实际效果 - 你需要加宽右侧的“结果”窗口以查看整个框，或者减少 css 中的宽度。

* * *

编辑 2014-10-23

现在系统和浏览器显示滚动条的方式有更多变化，所以我的`16px`空间可能需要根据您的情况进行调整。该填充的目的是防止文本在滚动条出现和消失时重新流动。

某些系统，例如较新版本的 Mac OS X（至少 10.8.x），在*您开始滚动之前*不会显示滚动条，这可能会导致整个技术失效。如果滚动条没有显示，您可能没有理由在悬停之前隐藏它，或者您可能希望将溢出保留为`auto`甚至`scroll`而不是切换它。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-10-21T16:38:09.683

改变溢出的答案有很多问题，比如内部块的宽度不一致，触发回流，需要额外的代码来处理填充，并且在不悬停时不禁用键盘（可能还有其他）交互。

有一种更简单的方法可以产生永远不会触发回流的相同效果：使用`visibility`属性和嵌套块：

```
.scrollbox {
  width: 10em;
  height: 10em;
  overflow: auto;
  visibility: hidden;
}
.scrollbox-content,
.scrollbox:hover {
  visibility: visible;
} 
```

这是一个带有工作示例的笔： http: [//codepen.io/kizu/pen/OyzGXY](http://codepen.io/kizu/pen/OyzGXY)

这个方法的另一个特点`visibility`是动画，所以我们可以给它添加一个过渡（见上面钢笔中的第二个例子）。为 UX 添加过渡效果会更好：当鼠标悬停在移动到另一个元素时，滚动条不会立即出现，并且在使用鼠标光标定位滚动条时更难错过滚动条，因为它不会立即隐藏出色地。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-04T16:39:14.920

尝试使用选择器选择`:hover`div

```
#div { overflow: hidden; }

#div:hover { overflow:visible; } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-13T20:09:04.697

我遇到了同样的问题，并尝试了一堆上述解决方案，但没有结果。经过大量研究，我得出了这个解决方案。只需将这些行粘贴到您的 css 文件中即可。

```
div.myautoscroll {
    height: 40ex;
    width: 40em;
    overflow: hidden;
    border: 1px solid #444;
    margin: 3em;
}
div.myautoscroll:hover {
    overflow: auto;
}
div.myautoscroll p {
    padding-right: 16px;
}
div.myautoscroll:hover p {
    padding-right: 0px;
}

::-webkit-scrollbar {
    -webkit-appearance: none;
    width: 7px;
}

::-webkit-scrollbar-thumb {
    border-radius: 4px;
    background-color: rgba(0,0,0,.5);
    -webkit-box-shadow: 0 0 1px rgba(255,255,255,.5);
} 
```

发生在我身上的是 Mac OSX lion 及更高版本（我正在运行 Yosemite）自动隐藏滚动条以看起来更时尚。上面的代码覆盖了默认值并带回了滚动条......结合 css 将溢出更改为在悬停时滚动，这将为较新的 mac OSX 上的用户实现所需的结果。这是一个小提琴（不是我自己的，而是我找到这个答案的那个）。[http://jsfiddle.net/simurai/UsvLN/](http://jsfiddle.net/simurai/UsvLN/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-17T20:37:50.563

我想出了这个解决方案。基本上负边距会切断垂直滚动条。

```
.hidden-scrollbar {
    padding-right: 50px;
    margin-right: -25px;        
    overflow-y: auto;        
}

.hidden-scrollbar.hover-scrollbar:hover {
    padding-right: 25px;
    margin-right: 0;
    overflow-y: auto;
} 
```

**少混合**

```
.hidden-scrollbar(@padding) {
    padding-right: 2 * @padding;
    margin-right: -@padding;
    overflow-y: auto;        

    &.hover-scrollbar:hover {
        padding-right: @padding;
        margin-right: 0;
    }
} 
```

*注意：@padding 至少应该是滚动条的宽度（例如 25px）*

基本上将它添加到您的 LESS/CSS 并将类添加到需要它的滚动条切断的元素中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-26T17:07:36.030

这个怎么样，而不是移动边距/填充或可见性，只需使颜色透明并在悬停时恢复它。

```
.mydiv::-webkit-scrollbar-track{
    background-color: transparent;
}
.mydiv::-webkit-scrollbar-thumb{
    background-color: transparent;
}
.mydiv:hover::-webkit-scrollbar-thumb{
    background-color: #a0a0a0;
}
.mydiv:hover::-webkit-scrollbar-track{
    background-color: #e1e1e1;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-23T19:58:00.153

试试这个 CSS hack！

```
.c-scroller {
  overflow: hidden;
  height: 90vh
}
.c-scroller-content,
.c-scroller:hover,
.c-scroller:focus {
  overflow: auto;
}
```

```
<div class="c-scroller">
    Item 1<br />
    Item 2<br />
    Item 3<br />
    Item 4<br />
    Item 5<br />
    Item 6<br />
    Item 7<br />
    Item 8<br />
    Item 9<br />
    Item 10<br />
    Item 11<br />
    Item 12<br />
    Item 13<br />
    Item 14<br />
    Item 15<br />
    Item 16<br />
    Item 17<br />
    Item 18<br />
    Item 19<br />
    Item 20<br />
    Item 21<br />
    Item 22<br />
    Item 23<br />
</div>
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-05-22T10:12:08.110

> 如果你可以使用css添加overflow-y隐藏在普通视图中。那么你可以添加:hover事件添加overflow-y:auto。
> 
> [看到这个链接](https://jsfiddle.net/Ram2210/241gw2he/4/)

* * *

> 如果您可以使用 Jquery，请使用悬停事件
> 
> [看到这个小提琴](https://jsfiddle.net/Ram2210/qbwqv4o8/)

* * *

片段：

```
jQuery(".main_panel").hover(
  function() {
    jQuery(this).addClass("show_cont");
  },
  function() {
    jQuery(this).removeClass("show_cont");
  }
);
```

```
.main_panel {
  width: 300px;
  height: 200px;
  display: block;
  position: relative;
  margin: 0 auto;
  overflow: hidden;
}

.limt {
  padding: 0;
  display: inline-block;
  width: 90%;
  margin: 0;
}

ul.limt li {
  display: inline-block;
  width: 100%;
  font-size: 18px;
  line-height: 28px;
}

.show_cont {
  overflow-y: auto;
}
```

```
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<div class="main_panel">
  <ul class="limt">
    <li>Curabitur aliquet quam id dui posuere blandit.</li>
    <li>Curabitur aliquet quam id dui posuere blandit.</li>
    <li>Curabitur aliquet quam id dui posuere blandit.</li>
    <li>Curabitur aliquet quam id dui posuere blandit.</li>
    <li>Curabitur aliquet quam id dui posuere blandit.</li>
  </ul>
</div>
```

# sql - 有限制的多 FQL 查询

> ID：10015394
> 
> 赞同：0
> 
> 时间：2012-04-04T16:30:07.837
> 
> 标签：sql, facebook, facebook-fql

我不知道，如何通过 FQL 获取我的所有线程和每个线程的最后一条消息。我尝试：

```
fql?q={"threads":"SELECT subject, recipients, updated_time, unseen, unread, thread_id FROM thread WHERE folder_id = 0", 
"users": "SELECT uid, name FROM user WHERE uid IN (SELECT recipients FROM #threads)", 
"first_msg": "SELECT message_id, thread_id, body, created_time FROM message WHERE thread_id IN (SELECT thread_id FROM #threads) ORDER BY created_time DESC LIMIT 1"} 
```

但是当然我只收到列表中一个（第一个）线程的最后一条消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T23:28:46.230

我只看到一个答案：为每个线程添加查询以获取最后一条消息。加上检查最大计数查询（如果存在太多线程）

# drupal - 通过 https 加载 Drupal 7 页面时，Firebug 中止错误

> ID：10015395
> 
> 赞同：5
> 
> 时间：2012-04-04T16:30:11.863
> 
> 标签：drupal, firefox, google-chrome, firebug, http-status-codes

当我们在 https 中加载我们的 Drupal 7 站点之一（和强制刷新）时，我们 Web 开发单元中的每个人都会在随机 css、js 和图像对象上遇到 Firebug “Aborted”错误。我们不知道问题是从什么时候开始的。站点创建于大约 2 年前，大约 6 个月。以前，当我们强制刷新页面缓存或清除 Drupal js / css 文件聚合时，我们开始无法加载 CSS / JS / Image 对象。

在线研究表明存在 AJAX 干扰问题，但在我们的案例中我还没有看到。

没有错误，如果：

*   通过 HTTP / 端口 80 请求的页面
*   已在缓存中的对象
*   在 Prod 中查看站点（具有签名证书）

错误，即使：

*   升级 Firefox 和 Firebug
*   关闭 js/css 聚合
*   使用谷歌浏览器

服务器日志表明根本没有对这些文件的请求，所以就像浏览器从不发送请求一样。

证书是自签名的。

![Firebug Net 面板的屏幕截图](../Images/b7db5684cf871b71ef34ee63dc967a54.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-18T13:30:36.073

一定是证书问题。也许它已被撤销，过期或其他什么。

# python - 如何：通过键盘快捷键使用 Eclipse/Pydev 添加类文档字符串？

> ID：10015398
> 
> 赞同：1
> 
> 时间：2012-04-04T16:30:23.907
> 
> 标签：python, eclipse, macos, pydev

*我想要什么：* 按下自动创建类文档字符串片段的键盘快捷键：

```
class SomeClass:
    '''
    <cursor>
    ''' 
```

*我尝试了什么：* 当我的光标位于函数定义上时，我可以按`cmd+1`. 这将显示一个带有选项的弹出菜单`Make docstring`。选择它会创建一个文档字符串片段，就像上面看到的那样。这非常适用于函数 - 但不适用于我尝试过的类。

欢迎任何提示/解决方案。:)

| Mac OS X 版本：10.7.3 | Eclipse 版本：Helios Service Release 2 | Pydev 插件版本：2.4.0.20120101

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:20:42.127

实际上，您似乎发现了一个错误（请在 PyDev sf 跟踪器上报告）。

问题是，如果您有以下内容：

```
class MyClass:
  pass 
```

它不起作用，但是如果您有以下内容：

```
class MyClass(object):
  pass 
```

它确实工作正常......所以，问题是 PyDev 在这种情况下不认为该行是类行。

编辑：这是针对 PyDev 2.5.0（已经发布）修复的。

# security - JaaS 可以用于 Rest 吗？

> ID：10015408
> 
> 赞同：1
> 
> 时间：2012-04-04T16:31:06.873
> 
> 标签：security, rest, restful-authentication, jaas

根据这个问题，我没有找到任何东西。

jaas 可以用来保护我的休息服务吗？如果是，与基本/摘要身份验证 + ssl 相比有什么优势吗？我应该在基本/摘要身份验证上使用 jaas 来进行休息服务吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T08:54:50.820

是的，您可以使用 JAAS 来保护 REST（或任何其他类型的）服务……只要您的 REST 容器提供挂钩 JAAS 登录模块的能力。

我知道的大多数容器，尤其是 Tomcat 和 Jetty。

JAAS 不是关于如何格式化或提供凭据（表单登录、基本身份验证等），而是关于如何验证它们的更多信息。您可能想要检查本地文件、查询数据库或 LDAP 服务器...

JAAS 不仅是身份验证，也是授权。通过身份验证阶段后，您提供给用户的角色和权限。所有实现 JAAS 的容器都将提供 JAAS 模块和容器提供的授权方案之间的无缝集成，例如 web.xml 为 servlet 提供的授权方案。

由于 JAAS 是一个标准并且现在是 JRE 的一部分，因此您会在 Web 上找到许多现成的模块和文档，以帮助您在需要时构建自己的模块和文档。

# html - 如何删除这些讨厌的额外空间

> ID：10015411
> 
> 赞同：0
> 
> 时间：2012-04-04T16:31:11.263
> 
> 标签：html, css, wordpress

[当我使用 chrome 开发人员工具检查时，我的 wordpress页面](http://bit.ly/HXNHYq)上的顶部小部件显示了一个高度属性，并且该高度在小部件的顶部和底部添加了额外的空间（在附图中以黄色显示）。

我已经尝试了很多小时来更改或删除该高度属性，但我无法找到它的来源以及如何处理它。

请帮忙！！

![在此处输入图像描述](../Images/6e5752927d88dc463c52179e6973ade9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T16:37:14.780

似乎您`&#8203;`在源代码中的元素之前和之后有很多 unicode 序列，导致所有不需要的空间。（使用萤火虫可以看到它们）

![unicode 序列](../Images/d1c930493052c5c2a7c0691ac5fba0c7.png)

您无法在源代码中感知它们，因为该字符是“零宽度空间”`(U+200B)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-17T11:54:23.687

您可以使用正则表达式删除它们。js：

```
HTML = HTML.replace(/[\u200B-\u200D\uFEFF]/g, ''); 
```

C＃

```
hVal = Regex.Replace(hVal, "[\\u200B-\\u200D\\uFEFF]", ""); 
```

# android - 来自 Android 的匿名电子邮件

> ID：10015415
> 
> 赞同：-2
> 
> 时间：2012-04-04T16:31:14.423
> 
> 标签：android, email, send, anonymous

我已经找了几个星期了，但就是找不到。有谁知道如何从 Android 发送匿名电子邮件？我使用 Intent 像：

```
Intent email = new Intent(Intent.ACTION_SEND);
.
.
.
email.putExtra(Intent.EXTRA_EMAIL  , new String[]{"sendingToThisEmail@gmail.com"});
email.putExtra(Intent.EXTRA_SUBJECT, "subject");
email.putExtra(Intent.EXTRA_TEXT   , "any stuff"); 
```

但是这个，或者我尝试过的任何其他事情总是从你已经默认登录在你的手机上的 acc 发送电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T06:20:24.343

我可以想到一个将用户消息发送到文本框并 onSubmit 将数据发送到服务器的解决方案。在服务器端，用户消息存储在数据库中，电子邮件发送程序会定期检查新消息并将它们发送到相应的电子邮件 ID。

**优点：-**

1.  由于现在从一侧发送电子邮件，因此您可以更轻松地发送匿名电子邮件。即，您可以拥有一个虚拟帐户，例如 userMessage@yourdomain.com。
2.  由于中央服务器正在发送邮件，因此邮件服务器不会跟踪用户 IP。
3.  您可以通过文本过滤技术过滤包含垃圾邮件或辱骂性语言的邮件。
4.  您可以存储消息以供将来使用。用于模式分析/统计分析。在年底，如果将来需要，您将能够生成报告。

**缺点：-**

1.  邮件可能不会立即发送，这在很大程度上取决于您的邮件发件人运行的频率是否需要最佳延迟。
2.  这可能需要您的数据库中有一些额外的内存空间。

[这个链接](https://stackoverflow.com/questions/884943/how-do-i-send-an-e-mail-in-java)可能对发送部分有帮助，最后，你正在编程，继续加油！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T17:36:56.320

除非您找到一些第三方库，否则您不会找到一种直接的方法来执行此操作（即使用 Intents）。还要记住，即使您匿名发送电子邮件，客户端 IP 仍会记录在电子邮件中。

[这样](http://www.developerfusion.com/code/1975/sending-email-using-smtp-and-java/)的事情可能会帮助您入门，但基本想法是您需要找到（或设置）一个开放的 SMTP 服务器，直接与 TCP 连接并使用 SMTP（一种邮件协议）发送消息，显然设置了某种虚拟从地址。

# ios - 调试与临时/发布版本相关的 tableview 崩溃的最佳方法是什么？

> ID：10015422
> 
> 赞同：0
> 
> 时间：2012-04-04T16:31:31.257
> 
> 标签：ios, uitableview

我在用户构建中发生了崩溃，我最终无法重现。找出导致这种情况的原因的最佳方法是什么？

具体来说，如果我想 NSLog 或捕获异常，我应该在哪里执行此操作（基于下面的崩溃日志）？注意：tableview 使用自定义 UITableViewCell。

```
Exception Type: EXC_CRASH (SIGABRT) 
Exception Codes: 0x00000000, 0x00000000 
Crashed Thread: 0 

Last Exception Backtrace: 
0 CoreFoundation 0x361db88f __exceptionPreprocess + 163 
1 libobjc.A.dylib 0x37430259 objc_exception_throw + 33 
2 CoreFoundation 0x361db789 +[NSException raise:format:] + 1 
3 Foundation 0x375fd3a3 -[NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description:] + 91 
4 UIKit 0x30eb1163 -[UITableView(UITableViewInternal) _createPreparedCellForGlobalRow:withIndexPath:] + 739 
5 UIKit 0x30eb0181 -[UITableView(_UITableViewPrivate) _updateVisibleCellsNow:] + 1077 
6 UIKit 0x30eaf90b -[UITableView layoutSubviews] + 207 
7 UIKit 0x30e540df -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 183 
8 CoreFoundation 0x3613a1fb -[NSObject performSelector:withObject:] + 43 
9 QuartzCore 0x37f26aa5 -[CALayer layoutSublayers] + 217 
10 QuartzCore 0x37f266bd CA::Layer::layout_if_needed(CA::Transaction*) + 217 
11 QuartzCore 0x37f2a843 CA::Context::commit_transaction(CA::Transaction*) + 227 
12 QuartzCore 0x37f2a57f CA::Transaction::commit() + 315 
13 QuartzCore 0x37f224b9 CA::Transaction::observer_callback(__CFRunLoopObserver*, unsigned long, void*) + 57 
14 CoreFoundation 0x361afb1b __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 19 
15 CoreFoundation 0x361add57 __CFRunLoopDoObservers + 259 
16 CoreFoundation 0x361ae0b1 __CFRunLoopRun + 761 
17 CoreFoundation 0x361314a5 CFRunLoopRunSpecific + 301 
18 CoreFoundation 0x3613136d CFRunLoopRunInMode + 105 
19 GraphicsServices 0x324f1439 GSEventRunModal + 137 
20 UIKit 0x30e7ee7d UIApplicationMain + 1081 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:37:12.577

最有可能的是涉及表格行/节插入/删除/移动的代码。调试这些而不在控制台中看到错误消息真的很痛苦。我只关注动态修改表格视图的地方。

# maven - 如何在 maven-jar-plugin 中包含外部源文件

> ID：10015424
> 
> 赞同：0
> 
> 时间：2012-04-04T16:31:40.290
> 
> 标签：maven

我们正在从外部（到项目）类构建一个 jar 文件。这很好用，但我们无法弄清楚如何同时包含外部源文件。我曾尝试使用“< 包含 >”标签，但在使用时最终 jar 中只有一个清单文件。我已经研究过使用 maven-resources-plugin 但要么我用错了，要么在我的情况下它不起作用。这是我们的代码的副本：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
            <version>2.4</version>
            <executions>
                <execution>
                    <!-- <phase>generate-resources</phase> -->
                    <phase>clean</phase>
                    <goals>
                        <goal>jar</goal>
                    </goals>
                    <configuration>
                        <classesDirectory>${itendant.path}/web/rocket/WEB-INF/classes</classesDirectory>
                        <finalName>${itendant.jar.name}</finalName>
                        <outputDirectory>${itendant.jar.path}</outputDirectory>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:37:48.473

来源？你的意思是外部依赖？这些也应该使用 maven 进行管理，使用[http://maven.apache.org/plugins/maven-deploy-plugin/usage.html](http://maven.apache.org/plugins/maven-deploy-plugin/usage.html)`mvn deploy:deploy-file`中的描述，并导入你的 pom.xml。

如果您真的是指外部资源，那么正确的资源声明将是：

```
<project>
 ...
 <build>
   ...
   <resources>
     <resource>
       <directory> [your folder here] </directory>
     </resource>
   </resources>
   ...
 </build>
 ...
</project> 
```

当然，如果您有多个资源目录，则可以有多个标签。另请注意，在此期间构建任何东西`clean`都是有问题的，因为`clean`不是每次构建都运行 -`package`将是一个更好的选择。

# mysql - Mysql乘法查询

> ID：10015429
> 
> 赞同：17
> 
> 时间：2012-04-04T16:31:47.670
> 
> 标签：mysql, sql-update

我有一个名为 products 的表，其中包含一个名为 price 的字段，我只想将每个产品的价格翻倍。请你帮我看看我可以在 PHP myAdmin 中运行的 SQL 语句。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-04T16:34:36.233

```
update products set price = price * 2; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-04T16:34:53.970

这很容易

```
UPDATE
  products
SET
  price = price*2; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-04T16:36:17.443

```
UPDATE products SET price = price + price; 
```

不想使用乘法：P

# pyqt - 为什么我不能更改 self.filename？

> ID：10015433
> 
> 赞同：0
> 
> 时间：2012-04-04T16:32:00.680
> 
> 标签：pyqt

我使用 PyQt 创建了一个简单的服务器/客户端应用程序。但我遇到了奇怪的错误：

这是我的服务器端代码：

```
#! /usr/bin/python
import sys
import socket
from PyQt4.QtCore import *
from PyQt4.QtGui import *
from PyQt4.QtNetwork import *

HOST = '127.0.0.1'
PORT = 9991
SIZEOF_UINT32 = 4

class Form(QDialog):

    def __init__(self, parent=None):
        super(Form, self).__init__(parent)
        self.socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        self.socket.bind((HOST, PORT))
        self.socket.listen(5)
        self.worker = Worker(self.socket)

        self.connect(self.worker, SIGNAL("received"), self.updateUi)
        self.connect(self.worker, SIGNAL("finished()"), self.updateUi)
        self.connect(self.worker, SIGNAL("terminated()"), self.updateUi)
        # Create widgets/layout
        self.browser = QTextBrowser()
        self.selectButton = QPushButton('Close server')
        layout = QVBoxLayout()
        layout.addWidget(self.browser)
        layout.addWidget(self.selectButton)
        self.setLayout(layout)
        self.setWindowTitle("Server")
        self.worker.start()

    def updateUi(self, text):
        self.browser.append(text)

class Worker(QThread):

    def __init__(self,socket,parent = None):
        super(Worker, self).__init__(parent)         
        self.socket = socket    
        self.dir = '/home/jacos/down/'
        self.filename = '/home/jacos/down/hello'

    def receiveFile(self): 
        self.conn, self.addr = self.socket.accept()       
        totalData = ''
        while 1:
            data = self.conn.recv(1024)
            if not data: break
            totalData += data
        print totalData
        if totalData.find('f') == 0:
            name = totalData.strip()[1:]
            self.filename = self.dir + name
            print self.filename
        else:
            self.saveFile(totalData)
            print self.filename
            self.emit(SIGNAL("received"),QString("received a file"))

    def saveFile(self,data):
        f = open(self.filename,'wb')
        print self.filename
        f.write(data)
        f.close()
        self.conn.close()

    def run(self):   

        while 1:
            self.receiveFile()

app = QApplication(sys.argv)
form = Form()
form.show()
app.exec_() 
```

当我运行它时，我得到了这个：

```
Traceback (most recent call last):
  File "/home/jacos/bin/tss.pyw", line 75, in run
    self.receiveFile()
  File "/home/jacos/bin/tss.pyw", line 61, in receiveFile
    self.saveFile(totalData)
  File "/home/jacos/bin/tss.pyw", line 66, in saveFile
    f = open(self.filename,'wb')
TypeError: file() argument 1 must be encoded string without NULL bytes, not str
TypeError: updateUi() takes exactly 2 arguments (1 given) 
```

问题全在于 self.filename。看来我无法以正确的值传递它......

这是我的客户端代码：

```
#! /usr/bin/python
# -*- coding: utf8 -*-
import sys
import socket
from PyQt4.QtCore import *
from PyQt4.QtGui import *
from PyQt4.QtNetwork import *

HOST = '127.0.0.1'
PORT = 9991
SIZEOF_UINT32 = 4

class Form(QDialog):

    def __init__(self, parent=None):
        super(Form, self).__init__(parent)

        # Create widgets/layout
        self.browser = QTextBrowser()
        self.selectButton = QPushButton('Send a File')
        self.connectButton = QPushButton("Connect")
        self.connectButton.setEnabled(True)
        layout = QVBoxLayout()
        layout.addWidget(self.browser)
        layout.addWidget(self.selectButton)
        layout.addWidget(self.connectButton)
        self.setLayout(layout)

        # Signals and slots for line edit and connect button
        self.selectButton.clicked.connect(self.sendFileName)
        self.connectButton.clicked.connect(self.connectToServer)

        self.setWindowTitle("Client")

    # Update GUI
    def updateUi(self, text):
        self.browser.append(text)

    def sendFileName(self):
        filename=QFileDialog.getOpenFileName(self, 'Open File', '.')       
        name = filename.split('/')[-1]      
        self.updateUi("Sent file name:" + name)
        self.socket.sendall("f" + name)
        self.socket.close()
        self.connectToServer()
        self.sendFile(filename,name)

    def sendFile(self,filename,name):
        self.socket.sendall(open(filename,'rb').read())
        self.updateUi("Sent file:" + filename)
        self.socket.close()
        self.connectButton.setEnabled(True)

    def connectToServer(self):
        self.socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        self.socket.connect((HOST, PORT))
        self.connectButton.setEnabled(False)
        self.updateUi("Connected")

app = QApplication(sys.argv)
form = Form()
form.show()
app.exec_() 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:31:39.030

您可能有一个`NULL`字节（`\0`或`\x00`），`self.filename`并且如错误所示，您无法打开名称包含`NULL`字节的文件。事先适当地处理它们（例如：移除、更换等）。

至于另一个错误：您将两个信号 (`finished`和`terminated`) 连接到`self.updateUi`. 并且这些信号没有传递任何参数，而`self.updateUi`期望传递一个参数，即`text`. 我不确定您的目标是什么，但您可以考虑为`text`in 中的参数添加默认参数`self.updateUi`。

# maven - Maven：将文件从工作区复制到目标之外的文件夹

> ID：10015434
> 
> 赞同：0
> 
> 时间：2012-04-04T16:32:02.863
> 
> 标签：maven, maven-resources-plugin

在构建期间，我需要将 5 个`properties`文件从我的项目工作区复制`src/main/resources/my`到文件夹`C:\my`（我在 Windows 7 上开发）。`C:\my`存在但为空。

我在我的 pom.xml 文件中使用以下代码，但这些文件没有被复制。

在构建期间，我没有收到任何错误，但我得到以下输出：

```
[INFO] --- maven-resources-plugin:2.5:copy-resources (copy-my-resources) @ my-webapp ---
[debug] execute contextualize
[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 5 resources 
```

请注意，`[INFO] Copying 5 resources to somewhere`复制成功时它不会像通常那样说。

**但是，文件根本不会复制到`C:\my`。**

你能看到我应该在我的 xml 代码中更改什么吗？

以下是相关代码：

```
<plugin>
   <groupId>org.apache.maven.plugins</groupId>
   <artifactId>maven-resources-plugin</artifactId>
    <version>2.5</version>
    <executions>
            <execution>
                    <id>copy-my-resources</id>

                    <phase>process-resources</phase>

                    <goals>
                            <goal>copy-resources</goal>
                    </goals>
                    <configuration>

                            <!-- overwrite! -->
                            <overwrite>true</overwrite>

                            <outputDirectory>${env.HOMEDRIVE}/my</outputDirectory>
                            <resources>
                                    <resource>
                                            <directory>src/main/resources/my</directory>
                                            <filtering>false</filtering>
                                            <includes>
                                                <include>**/*.properties</include>
                                            </includes>
                                    </resource>
                            </resources>
                    </configuration>
            </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T07:35:20.987

要摆脱警告，您必须在 pom 中定义一个属性：

```
<properties>
  <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties> 
```

此外，在您的构建中放置一些东西，例如 homedrive 等，将使您的构建不便携。更好的解决方案是创建像 .zip 这样的包，其中包含您的应用程序的整个配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:07:36.130

您可以`run mvn -X ...`命令从所有插件中获取更详细的调试输出。

还要确保 ${env.HOMEDRIVE} 属性已定义且 ${env.HOMEDRIVE}/my 文件夹存在。

# ios - 具有给定颜色的 IoS Cocoa 填充区域

> ID：10015437
> 
> 赞同：1
> 
> 时间：2012-04-04T16:32:18.550
> 
> 标签：ios, cocoa, uikit, quartz-graphics, appkit

我尝试为位图的给定区域着色。在屏幕上显示后。目前我使用以下方法：有表示位图`CGContextRef`和二维位数组 - 通过它们我们知道要为哪个像素着色。然后一个循环抛出这个数组并绘制一个椭圆：

```
for(int i = 0; i < width; i++){
    for(int j = 0; j < height; j++){
        if(colormask[i][j] == 1){
            CGRect circleRect = CGRectMake(i, j, 1, 1);
            CGContextSetRGBFillColor(bitmap, red, green, blue, 1.0);
            CGContextFillEllipseInRect(bitmap, circleRect);
        }
    }
 } 
```

这解决了问题，但工作太慢。请提供任何其他想法。也许有使用石英的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:59:14.707

您可以使用[洪水填充算法](http://en.wikipedia.org/wiki/Flood_fill)为图像着色，这将非常快速和高效。Objective-c 版本的洪水填充算法在[这里](https://github.com/OgreSwamp/ObjFloodFill/blob/master/src/FloodFill.m)。

# javascript - 如何注册按键？

> ID：10015438
> 
> 赞同：1
> 
> 时间：2012-04-04T16:32:24.033
> 
> 标签：javascript, flash, jwplayer

如果您按下按钮，我制作了一个弹出 div 显示视频。如果按 Esc，则 div 将再次隐藏并删除视频。（在 Flash 中使用 JWPlayer。）

如果您单击 JWPlayer 视频，Flash 将获得焦点，并且 JavaScript 无法再侦听文档上的按键。是否可以在您与 JWPlayer 视频播放器交互后让 JavaScript 获得焦点，以便您在暂停视频后仍然可以按 Esc 按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:41:30.800

不，没有，一旦将焦点放在闪光灯上，恢复按键的唯一方法就是单击其他地方。

发生这种情况是因为 flash 处于完全不同的进程下，它负责其“*窗口*”内的所有内容，并且不会将自己的事件冒泡回 JS

# c - execl 不要离开孩子

> ID：10015439
> 
> 赞同：0
> 
> 时间：2012-04-04T16:32:25.677
> 
> 标签：c, fork

我有一个程序可以读取文件，对其进行处理并将结果放入输出文件中。当我有一个参数（输入文件）时，我创建输出文件并将其写入内容。

我制作了一个 fork() 以便将标准输出重定向到 write() 内容。

```
char *program;

program = malloc(80);

sprintf(program, "./program < %s > %s", inputFile, outputFile);   
int st;
switch (fork()) {
  case -1:
       error("fork error");
         case 0:
           /* I close the stdout */
           close (1);

             if (( fd = open(outputfile, O_WRONLY | O_CREAT , S_IWUSR | S_IRUSR | S_IRGRP)==-1)){

                 error("error creating the file \n");
                 exit(1);
             }

             execlp("./program", program,  (char *)0);

             error("Error executing program\n");
              default:
          // parent process - waits for child's end and ends
            wait(&st);
            exit(0);
     //*****************

              } 
```

使用 < > 标准输入正确创建子节点，并创建标准输出文件。但是，孩子永远不会结束，当我杀死父亲时，输出文件是空的，所以代码没有执行。

怎么了？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:38:35.977

**exec 系列中的函数不理解重定向**。

您调用的方式是`execlp`向程序传递一个参数：`./program < %s > %s`. 没错，一个论点。当然，`execlp`不知道重定向是什么，也不知道`program`.

我会将您的所有代码替换为：

```
char *program = malloc(LEN);

snprintf(program, LEN, "./program < %s > %s", inputFile, outputFile);  
system(program); 
```

# objective-c - 缓存数千张图片

> ID：10015443
> 
> 赞同：0
> 
> 时间：2012-04-04T16:32:42.917
> 
> 标签：objective-c, buffer, cpu, ram, mpmediaitem

我最近一直在开发音乐播放器，我正在编写自己的选择器。我正在尝试将我的代码测试到极限，所以我的 iPhone 中有大约 1600 张专辑。

我将 AQGridView 用于专辑视图，并且由于 MPMediaItemArtwork 是 NSObject 的子类，因此您需要在其上启动一个方法以从中获取图像，并且该方法会缩放图像。

你可以猜到，每个单元的缩放使用了太多的 CPU，所以我的网格相册视图是滞后的，尽管我所有的努力都是手动驱动每个单元的包含。

所以我想在应用程序启动时开始使用 GCD 进行缩放，然后将它们保存到文件中，并为每个单元格读取该文件。

但是，我的代码

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^ {

    MPMediaQuery *allAlbumsQuery = [MPMediaQuery albumsQuery];
    NSArray *albumsArray = allAlbumsQuery.collections;

    for (MPMediaItemCollection *collection in albumsArray) {

        @autoreleasepool {
        MPMediaItem *currentItem = [collection representativeItem];
        MPMediaItemArtwork *artwork = [currentItem valueForProperty:MPMediaItemPropertyArtwork];
        UIImage *artworkImage = [artwork imageWithSize:CGSizeMake(90, 90)];

        if (artworkImage) [toBeCached addObject:artworkImage];
        else [toBeCached addObject:blackImage];

        NSLog(@"%@", [currentItem valueForProperty:MPMediaItemPropertyAlbumTitle]);
        artworkImage = nil;
        }
    }

    dispatch_async(dispatch_get_main_queue(), ^{

        [[NSUserDefaults standardUserDefaults] setObject:[NSKeyedArchiver archivedDataWithRootObject:albumsArray] forKey:@"covers"];
    });
    NSLog(@"finished saving, sir");
}); 
```

在 AppDelegate 的应用程序中：didFinishLaunchingWithOptions: 方法使我的应用程序崩溃，没有任何控制台日志等。

这似乎是一个内存问题，所以很多图像都保存在 NSArray 中，它存储在 RAM 上，直到保存 iOS 强制关闭我的应用程序。

你有什么建议吗？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T17:14:01.193

看看最近发布的[SYCache](https://github.com/Synthetic/SYCache)，它结合了 NSCache 和磁盘缓存。启动应用程序后立即进入内存警告状态可能是个坏主意，但这比强制关闭要好。

就上述评论者的建议而言，映射数据是一种从磁盘加载数据的技术（使用 mmap 或其等效技术），就好像它一次全部在内存中一样，这有助于以后加载 UIImage 。反过来（使用 NSMutableData）也是如此，文件可以被写入，就好像它直接在 RAM 中一样。作为一种技术，它可能很有用。

# windows - 有没有更好的方法来查找用户的开始菜单？

> ID：10015445
> 
> 赞同：2
> 
> 时间：2012-04-04T16:32:49.037
> 
> 标签：windows, batch-file, special-folders, startmenu

对我来说，我的开始菜单位于`%appdata%\Microsoft\Windows\Start Menu`

批处理文件中是否有系统文件夹引用不依赖于它在这个地方？我希望该脚本适用于 XP 及更高版本，但我运行的是 Windows 7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T05:52:46.980

[Joe DF 用这个链接](http://i-broke-it.blogspot.ca/2010/04/taming-all-users-desktop-and-start-menu.html)解决了这个问题，所以它适用于 Win7；Win8 目前无法进行测试。在这里提供它，这样问题就不再显示为未解决。从 Jim C 的解决方案（见上面的链接）：

> 修改后的跨操作系统脚本应如下所示，并且可以在 Windows 7 和 Windows XP 中正常工作：

```
IF DEFINED PUBLIC (SET AUDESKTOP=%PUBLIC%\Desktop) & (SET AUSTARTMENU=%PROGRAMDATA%\Microsoft\Windows\Start Menu) ELSE (SET AUDESKTOP=%ALLUSERSPROFILE%\Desktop) & (SET AUSTARTMENU=%ALLUSERSPROFILE%\Start Menu)
%SystemRoot%\Explorer.exe /n, "%AUDESKTOP%"
%SystemRoot%\Explorer.exe /n, "%AUSTARTMENU%" 
```

> 瞧！你有一个跨 [WinXP-Win7] 脚本。

# iphone - UIImageView 不同区域的 UIGesture 识别

> ID：10015450
> 
> 赞同：1
> 
> 时间：2012-04-04T16:33:03.623
> 
> 标签：iphone, ios, uiimageview, uigesturerecognizer

我有这张图片：

![在此处输入图像描述](../Images/2dc33a0bf849a7ca4dd7919ad2ee169b.png)

我想要做的是向该图像添加一个 UITapGestureRecognizer（或者我可以将图像拆分为它所包含的不同部分，并为每个部分添加一个 UITapGestureRecognizer），以便根据被点击的叶子执行不同的操作。如果我将每个叶子的图像拆分为不同的图像，则 UIImageViews 可能会重叠，并且点击一个将被识别为点击另一个。只有一个图像意味着知道屏幕上属于一片叶子而不是另一片叶子的点。

任何有关如何做到这一点的线索将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T16:40:05.277

通过检查手势识别器的`locationInView:`.

如果您将图像作为一个单元处理，请在您的手势识别器回调中实现这一点，以决定点击了哪个“叶子”（如果有的话）。

如果您将图像作为多个图像处理，您也可以在回调中实现它，或者您也可以在例如您的委托中实现，`gestureRecognizerShouldBegin:`以抑制绘制的叶子外部的触摸事件。

编辑：我没有意识到您可能还在寻求帮助来确定一个点是否位于一片叶子内。@PhillipMills 在这一点上是正确的：我们需要知道您是如何绘制图像的。

跟进：这有点超出我的专业领域。

最*简单*的方法（从命中测试的角度来看）是按照@PhillipMills 的建议，使用 Quartz 绘图和`CGPathContainsPoint()`. 如果您有需要渲染为 PNG 的详细图形，您当然可以构建一个简单的路径，该路径将（实际上）覆盖以允许命中测试。

您的其他选择，AFAIK，是在数学上进行命中测试，但您基本上会重新实现`CGPathContainsPoint()`但没有路径，或者采用各种技巧来查看触摸点处像素的颜色来进行命中测试。如果你走这条路，谷歌搜索会得到一些有用的结果，但老实说，对于像你绘制的那样简单的形状，只需使用一些`UIBezierPath`代码在代码中重新创建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:09:07.700

不确定这是否会有所帮助，但如果您无法确定点击了哪个叶子，您可以使用我们在 CD-ROM 项目中使用的旧图像映射技巧来对图像进行像素精确的点击跟踪。

你有你的全尺寸图像。制作一个 25%（或更少）的缩放版本。用不同的颜色填充每个要跟踪点击的叶子区域；任何你想忽略的东西都会变黑。单击全尺寸图像时，获取 x/y 坐标并按缩放图像的百分比对其进行缩放。然后在缩放的 x/y 坐标处获取缩放图像的像素颜色。通过确定像素颜色，您将知道单击了哪个叶子。

听起来很笨拙，但它工作得很好而且速度很快。

（话虽如此，我不认为图像的 alpha 区域会触发手势识别器 - 所以分解图像会不那么复杂/代码密集。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T18:01:32.630

如果您可以将形状分解为组成元素，那么您可以将每个元素放入它自己的图层中，并使用此 stackoverflow 讨论中讨论的方法来确定哪个被触摸：[使用 CALayer 内容的 alpha 属性使用 CALayer 进行命中测试](https://stackoverflow.com/questions/2944064/hit-testing-with-calayer-using-the-alpha-properties-of-the-calayer-contents)

# powershell - 按哈希表数组过滤 csv 文件

> ID：10015451
> 
> 赞同：1
> 
> 时间：2012-04-04T16:33:21.947
> 
> 标签：powershell

我想要做的是用一组哈希表（来自数据库的用户信息）过滤一个 csv 文件（恰好是一个博客）。

```
#$data is from a database. (about 500 items) Type: System.Data.DataTable
$users = @()
foreach($row in $data)
{
    $userItem = @{
        LoginId = $row[0]
        LastName = $row[3]
        FirstName = $row[4]
        LastAccess = $null
    }
    $users += $userItem
}
#Log files are about 14,000 lines long
$logfiles = Get-ChildItem $logFolder -Recurse | where {$_.Extension -eq ".log"} | Sort-Object BaseName -Descending
foreach($log in $logfiles)
{
    $csvLog = Import-Csv $log.FullName -Header ("Blank","LoginId","Date")
    $u = $users | Select {&_.LoginId}
    $filteredcsvLog = $cvsLog | Where-Object { $u -contains $_.LoginId}
    #This returns null
    ....

} 
```

这似乎不起作用，我错过了什么。我的猜测是我需要将数组展平为 [string[]]，但我似乎也不能这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:49:51.673

我不会做一个哈希表数组，而是做一个自定义对象的哈希表，例如：

```
$users = @{}
foreach($row in $data)
{
    $userItem = new-object psobject -property @{
        LoginId = $row[0]
        LastName = $row[3]
        FirstName = $row[4]
        LastAccess = $null
    }
    $users[$userItem.LoginId] = $userItem
} 
```

然后过滤更容易更快：

```
foreach($log in $logfiles)
{
    $csvLog = Import-Csv $log.FullName -Header ("Blank","LoginId","Date")
    $filteredcsvLog = $cvsLog | Where-Object { $users[$_.LoginId} }
    ....
} 
```

# html - HTML5 滑块输入 - 有范围吗？

> ID：10015455
> 
> 赞同：3
> 
> 时间：2012-04-04T16:33:35.850
> 
> 标签：html, input, slider

对于具有这样一个范围（即 2 个输入）的滑块，是否有原生 HTML5 输入？：

[http://jqueryui.com/demos/slider/#range](http://jqueryui.com/demos/slider/#range)

# data-structures - 哪种数据结构最合适？

> ID：10015458
> 
> 赞同：1
> 
> 时间：2012-04-04T16:33:45.787
> 
> 标签：data-structures, language-agnostic, doubly-linked-list

> 哪种数据结构最适合网页浏览器中的正向和反向网页遍历？

答案是双向链表。为什么？为什么我们不能使用带有指针的 Tree 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:35:39.220

因为您只能在 Web 浏览器中执行两种操作，前进和后退。

整棵树有什么用？你不能选择一个分支。

# java - 从 tabhost 中删除选项卡会导致应用程序崩溃

> ID：10015461
> 
> 赞同：1
> 
> 时间：2012-04-04T16:33:50.023
> 
> 标签：java, android, android-tabhost

我需要能够为我正在开发的 android 应用程序关闭 TabHost 中的选项卡。我目前正在调用此代码。

```
tabHost.getTabWidget().removeViewAt(toDelete); 
```

其中 toDelete 是调用删除方法的选项卡的索引。看起来该代码删除了选项卡，从瞬间我可以在它崩溃之前看到它。我在想我需要在某处调用另一种删除方法，因为在尝试绘制已删除的选项卡时它似乎崩溃了。我也试过

```
tabHost.removeViewAt(toDelete); 
```

但它崩溃了，因为它在 toDelete 上没有视图，这是预期的，因为（我认为）它只包含选项卡小部件而不是实际的选项卡。

这是我的崩溃日志

```
04-04 16:05:53.149: E/AndroidRuntime(7885): FATAL EXCEPTION: main
04-04 16:05:53.149: E/AndroidRuntime(7885): java.lang.NullPointerException
04-04 16:05:53.149: E/AndroidRuntime(7885):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2495)
04-04 16:05:53.149: E/AndroidRuntime(7885):     at android.widget.TabWidget.dispatchDraw(TabWidget.java:323)
04-04 16:05:53.149: E/AndroidRuntime(7885):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
04-04 16:05:53.149: E/AndroidRuntime(7885):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
04-04 16:05:53.149: E/AndroidRuntime(7885):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
04-04 16:05:53.149: E/AndroidRuntime(7885):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
04-04 16:05:53.149: E/AndroidRuntime(7885):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
04-04 16:05:53.149: E/AndroidRuntime(7885):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
04-04 16:05:53.149: E/AndroidRuntime(7885):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
04-04 16:05:53.149: E/AndroidRuntime(7885):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
04-04 16:05:53.149: E/AndroidRuntime(7885):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
04-04 16:05:53.149: E/AndroidRuntime(7885):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
04-04 16:05:53.149: E/AndroidRuntime(7885):     at android.view.View.draw(View.java:10981)
04-04 16:05:53.149: E/AndroidRuntime(7885):     at android.widget.FrameLayout.draw(FrameLayout.java:450)
04-04 16:05:53.149: E/AndroidRuntime(7885):     at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:2126)
04-04 16:05:53.149: E/AndroidRuntime(7885):     at android.view.ViewRootImpl.draw(ViewRootImpl.java:2026)
04-04 16:05:53.149: E/AndroidRuntime(7885):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1634)
04-04 16:05:53.149: E/AndroidRuntime(7885):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
04-04 16:05:53.149: E/AndroidRuntime(7885):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-04 16:05:53.149: E/AndroidRuntime(7885):     at android.os.Looper.loop(Looper.java:137)
04-04 16:05:53.149: E/AndroidRuntime(7885):     at android.app.ActivityThread.main(ActivityThread.java:4424)
04-04 16:05:53.149: E/AndroidRuntime(7885):     at java.lang.reflect.Method.invokeNative(Native Method)
04-04 16:05:53.149: E/AndroidRuntime(7885):     at java.lang.reflect.Method.invoke(Method.java:511)
04-04 16:05:53.149: E/AndroidRuntime(7885):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-04 16:05:53.149: E/AndroidRuntime(7885):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-04 16:05:53.149: E/AndroidRuntime(7885):     at dalvik.system.NativeStart.main(Native Method) 
```

关于我应该调用哪些其他方法的任何想法？还是我走的是完全错误的道路？

编辑：我刚刚尝试打开 5 个标签并关闭第二个。一开始它并没有崩溃，但它确实有一些非常奇怪的行为。当我单击一个选项卡时，它会将右侧的下一个选项卡显示为突出显示，但会显示正确的选项卡，直到我单击应用程序崩溃的最后一个选项卡。一些屏幕截图，以防有助于描述我的问题。

当我在关闭标签之前单击歌曲标签时 ![在歌曲标签中显示歌曲](../Images/84b34195052aff6287f35ffdc2639038.png)

当我在关闭标签之前单击特定歌曲的标签时 ![在正确的选项卡中显示歌词](../Images/c3c89531ec6297478d58d9d37339cd44.png)

当我在关闭当前程序选项卡后单击歌曲选项卡时。显示了正确的内容，但看起来选择了错误的选项卡。 ![关闭当前程序选项卡后单击歌曲选项卡后](../Images/71f20ff03ef61c8dfdcbe9dccea73f8b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-25T08:57:56.943

在调用之前`tabs.getTabWidget().removeView`，您需要显示另一个选项卡，`tabs.setCurrentTab(0)`；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:27:17.340

```
tabHost.getTabWidget().removeView(tabHost.getTabWidget().getChildTabViewAt(index)); 
```

我用这个方法去掉，你可以用这个方法试试

# jboss - 使用 JBoss 7 进行 LDAP 身份验证

> ID：10015462
> 
> 赞同：5
> 
> 时间：2012-04-04T16:33:51.053
> 
> 标签：jboss, ldap

我想使用 JBoss 7 服务器开发一个简单的 Java Web 应用程序，以启用从用户输入的用户名/密码登录并使用 ldap 进行身份验证。

所以这就是我在 web.xml 中写的放在 WEB-INF/

```
 <login-config>
     <auth-method>BASIC</auth-method>
     <realm-name>Enter user name and password</realm-name>
 </login-config> 
```

然后在同一文件夹中添加 jboss-web.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
 <jboss-web>
     <security-domain>java:/jaas/website-domain</security-domain>  
 </jboss-web> 
```

然后我在standalone.xml中添加了网站域领域

```
<security-domain name="website-domain" cache-type="default">
    <authentication>
        <login-module code="org.jboss.security.auth.spi.LdapExtLoginModule" flag="required">
            <module-option name="java.naming.factory.initial" value="com.sun.jndi.ldap.LdapCtxFactory"/>
            <module-option name="java.naming.provider.url" value="ldap://localhost:10389"/>
            <module-option name="bindDN" value="ou=people,dc=mycompany,dc=com" />
            <module-option name="bindCredential" value="shad"/>
            <module-option name="allowEmptyPasswords" value="false"/>
            <module-option name="Context.REFERRAL" value="follow"/>
            <module-option name="throwValidateError" value="true"/>
            <module-option name="allowEmptyPasswords" value="true"/>
        </login-module>
    </authentication>
</security-domain> 
```

那么输入的用户名和密码将如何发送到这些模块呢？还是我必须编写自定义 JAAS 领域？他们有任何可行的例子吗？你们可以分享我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T17:40:37.590

我用葡萄牙语写了一篇文章...

[http://jbossdivers.wordpress.com/2012/02/12/utilizando-ldap-login-module-no-jboss-as-7-1/](http://jbossdivers.wordpress.com/2012/02/12/utilizando-ldap-login-module-no-jboss-as-7-1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T08:44:30.470

*您的 webapp 需要通过在WEB-INF/jboss-web.xml*中添加一行来指向您的安全域*website-domain*

 *`<security-domain flushOnSessionInvalidation="true">java:/jaas/website-domain</security-domain>`

我相信在 Jboss 7 中你只需要指定*网站域*（没有*java:/jaas/*前缀）*

# iphone - 逻辑问题，根据数据库条目向 UI 添加按钮

> ID：10015464
> 
> 赞同：0
> 
> 时间：2012-04-04T16:33:57.453
> 
> 标签：iphone, objective-c, ios, fmdb

在我的`SQLite`数据库（`FMDB`）中，我有一些属性如下所列；

> 模块 | 学生1 | 学生2 | 学生3 | 学生4 | 学生5

一个`Module`可能有最少 2`students`和最多 5 `students`。所以根据学生的数量我必须显示按钮。

如果学生人数是 3，那么我应该显示 3 个按钮。例如：如果数据库条目为

> 科学 | 杰克| 汤姆 | - | 黛布拉 | -

请注意 - 符号是一个空记录。因此，如果我们遇到带有 - 符号的条目，我们必须忽略它。所以根据上面的查询，我们有 3 个学生，我们应该显示 3 个按钮。（如果有 4 个学生，我们应该显示 4 个按钮等等......）

我如何从数据库中读取值，并根据该答案向 UI 添加按钮？

注意：我没有任何合适的代码来展示我的工作。我迷失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:58:00.950

[好的，所以首先在这里](http://www.icodeblog.com/2011/11/04/simple-sqlite-database-interaction-using-fmdb/)了解与 SQLite FMDB 交互

然后，创建某种 for 循环，结合[此处](https://stackoverflow.com/questions/1378765/how-do-i-create-a-basic-uibutton-programmatically)和[此处](https://stackoverflow.com/questions/1616594/how-can-i-store-uibuttons-in-an-array)的代码来创建 UIButtons 并将它们添加到数组中，然后仅显示数组中的 UIButtons。

屏幕上按钮的位置只是一些简单的数学运算。

# asp.net-mvc - MVC3 网站的语言包

> ID：10015469
> 
> 赞同：1
> 
> 时间：2012-04-04T16:34:16.217
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在创建一个网站结构，该结构将允许在整个网站上使用多个“语言包”。

我已经研究过国际化，但我不确定这条路线是否可行，因为所有不同的语言包都是英文的。本质上，这只是重新措辞。

国际化（使用资源文件）可以为此工作，还是有更好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T16:42:37.990

国际化应该起作用，因为它确实考虑了语言环境。即使语言相同，语言环境也不同。例如英语

看看这个帖子。请注意帖子讨论墨西哥西班牙语和西班牙西班牙语之间差异的部分。

[http://www.hanselman.com/blog/GlobalizationInternationalizationAndLocalizationInASPNETMVC3JavaScriptAndJQueryPart1.aspx](http://www.hanselman.com/blog/GlobalizationInternationalizationAndLocalizationInASPNETMVC3JavaScriptAndJQueryPart1.aspx)

# android - Intellij Android + Maven 找不到单元测试

> ID：10015471
> 
> 赞同：4
> 
> 时间：2012-04-04T16:34:17.163
> 
> 标签：android, maven-2, intellij-idea

我正在使用 IntelliJ 和 Maven 开发一个 Android 应用程序，并且我正在尝试使用由 maven 原型自动创建的测试模块运行单元测试。但是，每当我尝试运行测试模块时，我都会收到以下消息：

```
Running tests
Test running startedFinish
Empty test suite. 
```

我必须在某处注册测试吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-17T20:26:19.673

对于 Intellij 15，我通过以下方式解决了这个问题：

1.  打开“项目结构”设置
2.  单击“模块”（左侧）
3.  “来源”选项卡
    a. 右键单击您的源目录（通常是 src）单击“源”。
    湾。右键单击您的测试目录，单击“测试”
    c。右键单击您的输出目录单击“排除”
4.  转到“路径”选项
    卡 **单击“使用模块编译路径”单选按钮**
    b。为“输出路径”选择输出路径目录
    c。为“测试输出路径”选择您的测试路径目录
5.  点击确定

# android - 无法获取联系人电话簿列表

> ID：10015474
> 
> 赞同：0
> 
> 时间：2012-04-04T16:34:22.667
> 
> 标签：android, android-contacts

我有一个显示对话框的功能。

```
public Dialog sendSMS(){
        Dialog dialog = new Dialog(this);
        dialog.setContentView(R.layout.dialogsms);
        dialog.setTitle("Send SMS");
        dialog.setCancelable(true);

        final Spinner spn = (Spinner)findViewById(R.id.spn_contatcs);
        final TextView tenso = (TextView)findViewById(R.id.txt_phone);

        final ArrayList<String> ten = new ArrayList<String>();
        final ArrayList<String> so = new ArrayList<String>();

        Cursor phones = _ketquatimkiem.this.getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,null,null, ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME + " ASC");
        while (phones.moveToNext()){
                String phoneName=phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
                String phoneNumber = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                ten.add(phoneName);
                so.add(phoneNumber);
            }
        phones.close();

        ArrayAdapter<String> arrayAdapter_Contacts = new ArrayAdapter<String>(_ketquatimkiem.this,android.R.layout.simple_spinner_item,ten);
        arrayAdapter_Contacts.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spn.setAdapter(arrayAdapter_Contacts);
        spn.setOnItemSelectedListener(new OnItemSelectedListener(){
            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1,int arg2, long arg3) {
                tenso.setText("Phone Num:  "+so.get(arg2).toString());  
            }
            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
            }
        });
        return dialog;
    } 
```

调用 onCreate()

```
//when i click item of listview i get quickactiondialog    
listView.setOnItemClickListener(new OnItemClickListener(){
        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,long arg3) {
        final QuickActionDialog quickAction = new QuickActionDialog(arg1.getContext(), QuickActionDialog.VERTICAL);   
        //when click item of quickactiondialog id == sms i show dialog 
        quickAction.setOnActionItemClickListener(new QuickActionDialog.OnActionItemClickListener() {        
            @Override
            public void onItemClick(QuickActionDialog source, int pos, int actionId) {                                      
                if(actionId == ID_SMS){
                    Dialog dialog= sendSMS();
                    dialog.show();
                }
            }
        }); 
```

但我收到错误：E/AndroidRuntime(15562): java.lang.NullPointerException **at** spn.setAdapter(arrayAdapter_Contacts);

我在真实设备 ss gt-5570 上进行测试。对不起，我用英语不好:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:51:15.427

在您的 sendSMS() 方法中，您正在访问 Activity 的布局

```
final Spinner spn = (Spinner)findViewById(R.id.spn_contatcs); 
```

这必须为 null，因为您的 Activity 布局不包含 Spinner。您必须执行以下操作（请参阅*content.findViewById*）

```
Dialog dialog = new Dialog(this);
View content = View.inflate(this, R.layout.dialogsms, null);
// your contact stuff
Spinner spn = (Spinner) content.findViewById(R.id.spn_contatcs);
spn.setAdapter(arrayAdapter_Contacts);
dialog.setContentView(content); 
```

# debugging - 如何在magento中打印集合mysql查询

> ID：10015478
> 
> 赞同：13
> 
> 时间：2012-04-04T16:34:45.313
> 
> 标签：debugging, magento

假设我有一个像这样的集合：

```
$products = Mage::getModel('catalog/product')
            ->getCollection()
            ...
            ->load(); 
```

如何打印执行的实际 MySQL 代码？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-04T19:19:28.977

您始终可以通过回显 getSelect 在某个点查看您的 sql 查询，如下所示：

```
$products = Mage::getModel('catalog/product')
        ->getCollection();
echo $products->getSelect(); 
```

要更改查询参数，您需要查看以下方法：

```
$products->addAttributeToSelect('someattribute');
$products->addAttributeToFilter('someattribute', array('eq'=>'1')); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-29T05:22:40.873

您可以使用以下代码打印集合：我们可以使用打印集合查询`getSelect()->__toString()`

```
$products = Mage::getModel(‘catalog/product’)
 ->addAttributeToFilter(‘status’, array(‘eq’ => 1));
echo $products->getSelect()->__toString(); 
```

你看过[http://kuldipchudasama.wordpress.com/2012/07/16/magento-print-query-of-collection/](http://kuldipchudasama.wordpress.com/2012/07/16/magento-print-query-of-collection/)吗？这很好用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-12-09T09:12:28.127

这里的大多数其他答案都说`$products->getSelect()`会这样做 - 如果你要做的只是 ，这很好`echo`，但实际上`getSelect()`不只是返回一个字符串，它返回一个 Varien_Db_Select 对象。

调用`echo`该对象会自动触发其`__toString()`方法，因此您只需获取 SQL 字符串，但尝试将其传递给`Mage::log()`您，您将获得比预期更多的信息。

如果您只想记录 SQL，可以使用：

```
Mage::log($products->getSelect()->__toString()); 
```

或者如何使用对象自己的：

```
$products->printLogQuery(false, true); // don't echo, do log 
```

`printLogQuery`在 lib/Varien/Data/Collection/Db.php 中定义。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-04T16:35:35.793

你可以打印

```
$products->getSelect()->assemble(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-17T17:46:49.597

如果您简单地将 to 的第一个参数设置`->load()`为`true`，如下所示：

```
$products = Mage::getModel('catalog/product')
            ->getCollection()
            ...
           ->load(true); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-05-15T07:09:07.090

我每天都在处理收藏品。这无疑是正确的方法。

`echo $collection->getSelectSql(true);`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-05-15T04:54:32.517

在 Magento 2 中：-

```
namespace <Company>\<Module>\Block\Adminhtml\Tab\Log;
class Grid 
extends \Magento\Backend\Block\Widget\Grid\Extended
{

    protected $_collectionFactory;

    /**
     * Constructor
     *
     * @param \Magento\Backend\Block\Template\Context $context
     * @param \Magento\Backend\Helper\Data $backendHelper
     * @param \<Company>\<Module>\Model\ResourceModel\Log\CollectionFactory $collectionFactory
     * @param Psr\Log\LoggerInterface $logger
     * @param array $data
     */
    public function __construct(
        \Magento\Backend\Block\Template\Context $context,
        \<Company>\<Module>\Model\ResourceModel\Log\CollectionFactory $collectionFactory,
        \Psr\Log\LoggerInterface $logger,
        array $data = []
    ) {
        $this->_logger = $logger;
        $this->_collectionFactory = $collectionFactory;
        parent::__construct($context, $backendHelper, $data);
    }

    /**
     * {@inheritdoc}
     */
    protected function _prepareCollection()
    {
        $collection = $this->_collectionFactory->create();
        $this->_logger->info($collection->getSelect()->__toString());
        $this->setCollection($collection);
        return parent::_prepareCollection();
    }
} 
```

请记住，集合工厂是一个可以附加到每个类的魔术类，因为 Magento 1 还不够复杂。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-28T17:21:11.283

第1步-

```
$result_colletion = print_r($collection->getSelect()); 
Mage::log($$result_colletion, null, custom_collection.log,true); 
```

第2步-

之后登录到 magento 管理部分并启用日志设置。请看下文。

```
System > Configuration > Developer > Log Settings 
```

步骤 3-

之后查看文件夹`custom_collection.log`中的日志文件`var/log/`。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-05-16T05:14:25.070

试试下面的代码。

```
 $products = Mage::getModel('catalog/product')
                ->getCollection();

    echo $products->getSelect(); 
```

# java - 小程序的默认安全策略

> ID：10015480
> 
> 赞同：1
> 
> 时间：2012-04-04T16:34:46.927
> 
> 标签：java, security, applet, policy

在哪里可以找到用于小程序的策略文件？

它不是 in 中的那个`<jre>/lib/security/java.policy`，因为您可以在 applet 中实例化 Calendar.class，而使用默认的 java.policy 文件是不可能的。

例如，这会失败：

```
public static void main(String[] args) throws Exception {
    System.setSecurityManager(new SecurityManager());
    Calendar cal = Calendar.getInstance();
} 
```

但在 Firefox 的小程序（在其自己的安全管理器中）中，日历调用是允许的：

```
public void init() {
    Calendar cal = Calendar.getInstance();
} 
```

关于安全管理器的权限，我只是不知道如何模拟类似 Applet 的环境。

# ios - 如何调整 UIView 的大小以适应较小的父视图

> ID：10015484
> 
> 赞同：0
> 
> 时间：2012-04-04T16:34:58.907
> 
> 标签：ios, uiview

我在 Core Data 中保存了几个视图参数，这些参数缩放以适应`self.view`. 当我获取视图参数时，我想重新缩放视图以适应较小的父视图 ( `newView`)。如何让`viewSelected`子视图在`newView`父视图中调整大小？

```
newView = [[UIView alloc]initWithFrame:CGRectMake(100, 100, 200, 200)];
newView.autoresizesSubviews = YES;
for (Shape *shape in shapes) {
    ShapeView *viewSelected = [[SquareView alloc]init];

    [viewSelected setAutoresizingMask:UIViewAutoresizingFlexibleHeight |
             UIViewAutoresizingFlexibleWidth];
    viewSelected.frame = CGRectMake(shape.x,shape.y,shape.shapeSize,shape.shapeSize);
    [newView addSubview:viewSelected];
}
[self.view addSubview:newView]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T18:12:30.443

可能有多种方法可以处理这个问题，但我能想到两种。

1.  手动 - 自动调整大小的蒙版给你的是确定性的，所以计算出来。

2.  创建一个与 self.view 大小相同的中间 UIView，将获取的视图添加到其中，并将中间视图的大小调整为“新的较小父级”的大小。然后您的子视图将适当调整大小。然后从中间视图中删除它们并将它们添加到所需的目标视图中。

# php - 如何制作带有下拉框的 Web 表单以将数据插入关系数据库

> ID：10015486
> 
> 赞同：0
> 
> 时间：2012-04-04T16:35:03.160
> 
> 标签：php, mysql, database, drop-down-menu, relational

我正忙着为我的足球队创建一个网站。我遇到的问题是创建一个带有下拉框的 Web 表单来选择和插入匹配数据。我已经能够在 phpmyadmin 中添加一个匹配项，我可以在其中选择 team_home 和 team_away，因此关系数据库似乎可以工作。

我有以下两张桌子：

# 团队

*   身份证 (pk - ai)
*   姓名

# 火柴

*   身份证 (pk - ai)
*   日期
*   team_home（外键 -> 表团队字段名称）
*   team_away（外键 -> 表团队字段名称）
*   score_home
*   score_away

那么如何制作带有下拉框的 Web 表单，以便将匹配项添加到我的数据库中呢？

> # **更新：**
> 
> 我的表单可以使用下拉框，但是在提交表单时出现以下错误：
> 
> **错误：无法添加或更新子行：外键约束失败 ( `roflz`. `matches`, CONSTRAINT `matches_ibfk_1`FOREIGN KEY ( `team_home`) REFERENCES `teams`( `name`))**
> 
> 我已经发布了我的提交表单代码和 insertmatch.php 代码

# 提交表单代码

```
$sql="SELECT id, name FROM Teams";
$result=mysql_query($sql);

$options="";

while ($row=mysql_fetch_array($result)) {

$id=$row["id"];
$name=$row["name"];
$optionshometeam.="<OPTION VALUE=\"$id\">".$name;
$optionsawayteam.="<OPTION VALUE=\"$id\">".$name;
}
?>

<form action="insertmatch.php" method="post">
<SELECT NAME=Teams>
<OPTION VALUE=0>Home Team
<?=$optionshometeam?>
</SELECT> 
<SELECT NAME=Teams>
<OPTION VALUE=0>Away team
<?=$optionsawayteam?>
</SELECT>
Score Home team: <input type="text" name="score_home" />
Score Away team: <input type="text" name="score_away" />
Match Date: <input type="text" name="score_away" />
<input type="submit" />
</form> 
```

# insertmatch.php 代码

```
mysql_select_db("roflz", $con);

$sql="INSERT INTO matches (team_home, team_away, score_home, score_away, date)
VALUES
('$_POST[team_home]','
$_POST[team_away]','
$_POST[score_home]',' 
$_POST[score_away]'
$_POST[date]')";

if (!mysql_query($sql,$con))
{
die('Error: ' . mysql_error());
}
echo "Match added";

mysql_close($con);
?> 
```

那么是什么导致了这个错误呢？

错误：无法添加或更新子行：外键约束失败（roflz.matches，CONSTRAINT matches_ibfk_1 FOREIGN KEY (team_home) REFERENCES teams (name)）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T16:55:57.143

好吧，你有非常基本的问题。我对php不太了解，但我可以建议你一些你可以执行的合乎逻辑的事情。

```
<select>
  <option value="t1">Team 1</option>
  <option value="t2">Team 2</option>
  <option value="t3">Team 3</option>
  <option value="t4">Team 4</option>
</select> 
```

这将创建下拉框。您需要做的是在**“值”和****“选项”**标签之间的团队名称中设置您的团队 ID（使用 php）。当您提交表单时，特定选定团队的“价值”将在请求中传递。

好的试试这个..

```
<?
...
mysql cnx code
...

$sql="SELECT id, name FROM Teams";
$result=mysql_query($sql);

$options="";

while ($row=mysql_fetch_array($result)) {

    $id=$row["id"];
    $name=$row["name"];
    $options.="<OPTION VALUE=\"$id\">".$name;
}
?>
...
html code
...

<SELECT NAME=Teams>
<OPTION VALUE=0>Choose
<?=$options?>
</SELECT> 
```

但不要忘记将其包装在**“表单”**标签中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T17:29:56.133

这个问题有点宽泛，在确定结果之前必须解决很多问题，它几乎是在问如何建立一个网站，而这本身可能需要数年时间来学习。也就是说，这 2 个链接应该为您提供开始所需的内容。

[W3C 表格](http://www.w3schools.com/html/html_forms.asp)

[W3C MySql介绍和教程](http://www.w3schools.com/php/php_mysql_intro.asp)

请注意 phpmyadmin 背后有多少代码（只需浏览其源代码），您会发现没有简单的 1 单击方式来完成它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T17:52:14.433

你可以尝试类似的东西

```
<?php
$db = "database_name";
$con = mysql_connect("localhost","username","password");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
mysql_select_db($db, $con);

$query = "SELECT * FROM YOUR_TABLE";
$result = mysql_query($query);
?> 
```

此外，在您的 html 正文部分中，在您的表单中，您可以使用它来生成下拉框

```
<select>
<?php
while($info = mysql_fetch_array($result)){
$name = $info["table_column_name"];
echo '<option value="'.$name.'">'.$name.'</option>';
}
?>
</select> 
```

希望这可以帮助..`:)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T09:27:32.960

错误：无法添加或更新子行：外键约束失败（roflz.matches，CONSTRAINT matches_ibfk_1 FOREIGN KEY (team_home) REFERENCES teams (name)）

这就是您需要知道的全部内容，等等等等......外键约束失败等等......参考团队

您正在更新比赛，但由于比赛使用球队的外键，您无法在比赛中添加不在球队中的内容

# jquery - 使用参数从jquery调用javascript函数

> ID：10015489
> 
> 赞同：0
> 
> 时间：2012-04-04T16:35:15.477
> 
> 标签：jquery

我正在处理这段代码，但即使在咨询了其他线程之后，我也没有得到结果。它给出了一些错误，导致 Apache 抛出异常。这里的员工是通过 $.getJSON(link, handler); 从链接中检索到的。并将数据传递给处理函数。

employeeNumber、fullName、gender 等是预先存在的代码并且可以正常工作，但是当我尝试通过传递birthDate 作为参数在 jquery 中调用 getAge 函数来计算年龄时，我的应用程序崩溃了。我在一个单独的 html 页面中测试了 getAge 函数，我在其中输入格式为 mm/dd/yyyy 的日期，它正确显示年龄。

```
function handler(employee) {
            $('#employeeNumber').val(employee.id);
            $('#fullName').val(employee.fullName);
            var bd = new Date(employee.birthDate);
            $('#dateOfBirth').val(bd.toDateString());
            $('#gender').val(employee.gender);
            $('#age').val(employee.birthDate, getAge);

        }

function getAge(dateString) {
        var today = new Date();
        var birthDate = new Date(dateString);
        var age = today.getFullYear() - birthDate.getFullYear();
        var m = today.getMonth() - birthDate.getMonth();
        if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
            age--;
        }
        return age;
    } 
```

这是一个 Java Spring 应用程序，我正在使用 maven 编译 war 文件。

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:42:12.393

我不确定你想在这条线上做什么，

```
$('#age').val(employee.birthDate, getAge); 
```

I've never seen syntax like that, but I think you where trying to do

```
$('#age').val(getAge(employee.birthDate)); 
```

# git - Git 错误：无法生成 ~\.ssh

> ID：10015492
> 
> 赞同：2
> 
> 时间：2012-04-04T16:35:18.283
> 
> 标签：git, windows-7, ssh, push

我在 GitHub 上创建了一个 repo，并想像过去一样将本地 repo 推送到本地。我可以`ssh -T git@github.com`成功，但`git push -u origin master`给了我错误：

```
error: cannot spawn C:\Users\Alec\.ssh: No such file or directory
fatal: unable to fork 
```

我的 GIT_SSH 变量是`C:\Users\Alec\.ssh`并且在那个目录中我有我的 RSA 密钥。我什至尝试生成一个新密钥并使用该密钥，只是为了收到相同的错误。

我所有的本地存储库现在都显示此错误 - 我不确定出了什么问题。

编辑：我认为这并不重要，但无论我使用命令提示符还是 Git Bash，我都会遇到同样的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T16:39:02.690

`GIT_SSH`应该指向 ssh 客户端（在您的情况下为 ssh.exe），而不是`.ssh`文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T15:06:35.617

我和你有同样的问题。我所做的就是关闭我的comodo防火墙，这确实有效。所以我建议你关闭你的防火墙和杀毒软件。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-12T00:36:29.623

我也有同样的问题。我认为这也是防火墙的问题，但我最终在我的 PC 上重新安装了 Git，然后它突然像一个魅力一样工作。

# php - PHP中的简单算术

> ID：10015494
> 
> 赞同：5
> 
> 时间：2012-04-04T16:35:23.250
> 
> 标签：php

这是一个简单的 php 程序，它给出了一个奇怪的输出。谁能解释为什么会这样以及如何获得预期的输出？

```
<?php
$a=2;$b=3;

echo "<br> ADD:".$a+$b;
echo "<br> SUB:".$a-$b;
echo "<br> MUL:".$a*$b;
echo "<br> DIV:".$a/$b;
?> 
```

输出：

```
3-3
MUL:6
DIV:0.66666666666667 
```

预期输出：

```
ADD:5
SUB:-1
MUL:6
DIV:0.66666666666667 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-04T16:37:21.263

这是因为字符串连接运算符与加/减运算符`.`具有[相同的优先级](http://php.net/manual/en/language.operators.precedence.php)，并且它们都是左关联的。这意味着评估从左到右进行，因此`"<br> ADD:".$a`首先评估并将结果添加到`3`. 这个特定的字符串转换为零和 0 + 3 = 3。减法类似。

解决方案：将算术放在括号中。

```
echo "<br> ADD:".($a+$b);
echo "<br> SUB:".($a-$b); 
```

另一方面，mul/div 的优先级高于串联，因此它们会产生预期的结果。

# c# - 将坐标变换卸载到 GPU

> ID：10015501
> 
> 赞同：6
> 
> 时间：2012-04-04T16:35:49.393
> 
> 标签：c#, opencl, gpu, gpgpu, coordinate-transformation

我有一个使用 WinForms 的旧版地图查看器应用程序。太慢了。（过去速度可以接受，但谷歌地图、谷歌地球出现了，用户被宠坏了。现在我可以让速度更快了：）

在进行了所有明显的速度改进（缓存、并行执行、不绘制不需要绘制的内容等）之后，**我的分析器向我展示了真正的瓶颈是**在将点从地图空间转换到屏幕空间时的坐标转换. 通常转换代码如下所示：

```
 public Point MapToScreen(PointF input)
    {
        // Note that North is negative!
        var result = new Point(
           (int)((input.X - this.currentView.X) * this.Scale),
           (int)((input.Y - this.currentView.Y) * this.Scale));
        return result;
    } 
```

**真正的实现更棘手。**纬度/经度以整数表示。为避免丢失精度，它们乘以 2^20（约 100 万）。这就是坐标的表示方式。

```
public struct Position
{
    public const int PrecisionCompensationPower = 20;
    public const int PrecisionCompensationScale = 1048576; // 2^20
    public readonly int LatitudeInt; // North is negative!
    public readonly int LongitudeInt;
} 
```

重要的是，可能的比例因子也明确地绑定到 2 的幂。这允许我们用位移替换乘法。所以真正的算法是这样的：

```
 public Point MapToScreen(Position input)
    {
        Point result = new Point();
        result.X = (input.LongitudeInt - this.UpperLeftPosition.LongitudeInt) >>
                     (Position.PrecisionCompensationPower - this.ZoomLevel);
        result.Y = (input.LatitudeInt - this.UpperLeftPosition.LatitudeInt) >> 
                     (Position.PrecisionCompensationPower - this.ZoomLevel);
        return result;
    } 
```

（UpperLeftPosition 代表地图空间中屏幕的左上角。） **我现在正在考虑将这个计算卸载到 GPU**上。谁能告诉我一个例子如何做到这一点？

*我们使用 .NET4.0，但代码也最好在 Windows XP 上运行。此外，我们不能使用 GPL 下的库。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T17:01:15.143

我建议您考虑使用 OpenCL 和[Cloo](http://sourceforge.net/projects/cloo/)来执行此操作 - 看一下[向量添加示例](http://cloo.git.sourceforge.net/git/gitweb.cgi?p=cloo/cloo;a=blob;f=Clootils/VectorAddExample.cs;h=203142eface59153e97f474e7a3f7cf1f83af5e2;hb=HEAD)，然后将其更改为通过使用两个`ComputeBuffer`s（每个点`LatitudeInt`和`LongitudeInt`每个点一个）将值映射到 2 个输出`ComputeBuffer`s。我怀疑 OpenCL 代码看起来像这样：

```
__kernel void CoordTrans(__global int *lat, 
                         __global int *lon, 
                         __constant int ulpLat,
                         __constant int ulpLon,
                         __constant int zl,
                         __global int *outx,
                         __global int *outy)
{
    int i = get_global_id(0);        
    const int pcp = 20;

    outx[i] = (lon[i] - ulpLon) >> (pcp - zl);
    outy[i] = (lat[i] - ulpLat) >> (pcp - zl);
} 
```

但是你会为每个核心做不止一个坐标变换。我需要赶紧走，我建议你在这样做之前阅读 opencl。

此外，如果坐标数合理（<100,000/1,000,000），则基于非 gpu 的解决方案可能会更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T01:35:01.093

我来自 CUDA 背景，只能代表 NVIDIA GPU，但这里有。

在 GPU 上执行此操作的问题是您的操作/传输时间。

您必须按 1 个操作的顺序执行每个元素。您真的希望对每个元素做更多的事情来获得真正的速度提升。全局内存和 GPU 上的线程之间的带宽约为 100GB/s。所以，如果你必须加载一个 4 字节的整数来做一个 FLOP，你的理论最大速度是 100/4 = 25 FLOPS。这与宣传的数百个 FLOPS 相去甚远。

请注意，这是理论上的最大值，实际结果可能更糟。如果您要加载多个元素，情况会更糟。在您的情况下，它看起来像 2，因此您可能会从中获得最多 12.5 FLOPS。在实践中，它几乎肯定会更低。

如果这对你来说听起来不错，那就去吧！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T01:46:56.017

XNA 可用于执行您需要的所有转换，并提供非常好的性能。它也可以显示在 winforms 应用程序中：[http://create.msdn.com/en-US/education/catalog/sample/winforms_series_1](http://create.msdn.com/en-US/education/catalog/sample/winforms_series_1)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-14T08:27:40.410

现在一年后问题再次出现，我们找到了一个非常平庸的答案。我觉得有点愚蠢，没有早点意识到这一点。我们通过普通的 WinForms GDI 将地理元素绘制为位图。GDI 是硬件加速的。我们要做的不是自己做变换，而是**设置 System.Drawing.Graphics 对象的缩放参数**：Graphics.TranslateTransform(...) 和 Graphics.ScaleTransform(...) 我们甚至不需要这个技巧与位移。

:)

# javascript - 如何使用 jQuery 将 HTML 数据值作为字符串获取？

> ID：10015505
> 
> 赞同：28
> 
> 时间：2012-04-04T16:35:57.713
> 
> 标签：javascript, jquery

我的源 HTML 中有以下内容：

```
<li><a href="#" data-value="01">Test</a></li> 
```

我想获取数据属性的值，所以我使用以下内容：

```
var abc = $(this).data('value'); 
```

这可以正常工作，但如果有前导零则不行。例如，上面将值“1”放入 abc。

有没有办法让我不将“01”转换为“1”？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-04-04T16:38:25.247

```
this.dataset.value;

// Or old school
this.getAttribute('data-value'); 
```

```
const a = document.querySelector("a");
console.log('Using getAttribute, old school: ', a.getAttribute('data-value'));
console.log('Using dataset, conforms to data attributes: ', a.dataset.value);
```

```
<ul>
  <li><a href="#" data-value="01">Test</a></li>
</ul>
```

感谢@MaksymMelnyk 对[数据集的提醒](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/dataset)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-04T16:38:34.530

您可以使用 jQuery 的 attr() 运算符：

```
var abc = $(this).attr('data-value'); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-04-04T16:43:32.750

从[jQuery data() 文档](http://api.jquery.com/data/#data2)看来，您必须使用 .attr() 来防止自动类型转换：

> 每次尝试都将字符串转换为 JavaScript 值（这包括布尔值、数字、对象、数组和 null），否则将其保留为字符串。要将值的属性作为字符串检索而不进行任何转换，请使用 attr() 方法。当数据属性是对象（以'{'开头）或数组（以'['开头）时，则使用jQuery.parseJSON来解析字符串；它必须遵循有效的 JSON 语法，包括引用的属性名称。data- 属性在第一次访问 data 属性时被拉取，然后不再被访问或改变（然后所有数据值都存储在 jQuery 内部）。

因此，不要重复其他答案，而是要加强，在不进行类型转换的情况下访问属性的方法是：

```
var abc = $(this).attr('data-value'); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-04T16:39:57.157

```
$(this).attr('data-value'); 
```

这将返回带有前导 0 的字符串值。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-04T16:40:25.917

你有没有尝试过？：

```
$(this).attr('data-value'); 
```

或者

```
$(this).attr('data-value').toString(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-24T09:09:51.727

尝试 ：

```
this.data('value'); 
```

我认为这是获取数据属性值的最佳方式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-07T04:37:42.753

```
<article id="electric-cars" data-columns="3"data-index-number="12314" data-parent="cars">

</article>

const article = document.querySelector('#electric-cars');

article.dataset.columns // "3"
article.dataset.index-number // "12314"
article.dataset.parent // "cars" 
```

# bioinformatics - 您可以使用 blastn 来检查精确匹配吗？

> ID：10015506
> 
> 赞同：0
> 
> 时间：2012-04-04T16:35:58.003
> 
> 标签：bioinformatics, blast

我需要知道查询匹配了哪些主题以及在哪里匹配，并且该匹配必须是 100%。有没有办法使用blastall来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:45:58.213

您不能将映射精度限制为 100%，但您可以使用`-evalue`参数增加 E 值的严格性，即使用非常小的 E 值。除此之外，要返回主题 ID 或入藏号以及映射坐标，您可以使用自定义输出格式，例如：

```
-outfmt "6 qacc sacc sseqid evalue qstart qend sstart send" 
```

这将返回具有 8 列的表格格式的输出，其中：`qacc`是查询加入，`sacc`是主题加入，`sseqid`是主题 seq-id，`evalue`是对齐的 E 值，`qstart`并且`qend`是对齐的查询开始和结束映射坐标，`sstart`以及`send`对齐的主题开始和结束映射坐标。将它们放在一起作为示例`blastn`调用：

```
blastn -query /path/to/myquery.fasta -db /path/to/db -evalue 0.001 -out /path/to/myoutput.tsv -outfmt "6 qacc sacc sseqid evalue qstart qend sstart send" 
```

`blastn -help`将为您提供有关自定义输出格式的更多选项。

# asp.net - Telerik Combobox - 带有图像和字符串

> ID：10015509
> 
> 赞同：1
> 
> 时间：2012-04-04T16:36:17.883
> 
> 标签：asp.net, c#-4.0, telerik, png, radcombobox

有没有办法将图像添加到 Telerik 组合框中的字符串中 - 如果有的话，你能指出我的代码片段或链接的方向吗

我正在使用带有语言的组合框，并希望国家名称旁边有国旗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T16:47:05.400

你可以使用`ItemTemplate`这个：

```
<telerik:RadComboBox ID="RadComboBox1" runat="server">
    <ItemTemplate>
        <asp:Image ID="Image1" runat="server" ImageUrl='<%# Eval("ImageUrl") %>' />
        <%# Eval("TextColumn") %>
    </ItemTemplate>
</telerik:RadComboBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T16:43:45.743

您会在[RadComboBox for ASP.NET AJAX中找到类似的内容](http://mono.telerik.com/Combobox/Examples/Functionality/TextWithIcons/DefaultCS.aspx)

```
<telerik:RadComboBox ID="RadComboBox1" runat="server" Skin="Outlook" AllowCustomText="true">
  <Items>
     <telerik:RadComboBoxItem ImageUrl="*Your Image*" Text="RadComboBox" runat="server" >
        </telerik:RadComboBoxItem>
    </Items>
</telerik:RadComboBox> 
```

# crystal-reports - Crystal Reports 2008 中的 For 循环

> ID：10015513
> 
> 赞同：0
> 
> 时间：2012-04-04T16:36:44.623
> 
> 标签：crystal-reports

我正在尝试使用 Crystal 2008 中的 For 循环根据资产的使用年限执行非常基本的折旧计算，但无法让它终生工作。

循环如下所示：

```
NumberVar AssetValue := {CIID.Currency4};
NumberVar DepreciationPercentage := {vw_DepreciationValues.Percent};
NumberVar AssetAge := DateDiff("yyyy",{CIID.Date4},CurrentDate);
Numbervar i := 0;

for i := 0 to AssetAge do
(
    AssetValue = AssetValue - ((AssetValue/100)*DepreciationPercentage);
    i = i + 1;
);
AssetValue; 
```

出于某种原因，它总是将 AssetValue 输出为与输入相同的数字......几乎就像它在运行后被重置一样。

我已经在循环之外测试了折旧公式，它工作正常。我还验证了 i 计数器正在通过循环正确递增。

有人知道我哪里出错了吗？我什至尝试使用私有变量创建自定义函数，但没有任何区别。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T16:38:55.273

错别字：

```
AssetValue = AssetValue - ((AssetValue/100)*DepreciationPercentage);
           ^--- equality test
i = i + 1
  ^-- ditto 
```

应该是`:=`做作业。

# ontology - 本体应用和推理规则

> ID：10015517
> 
> 赞同：0
> 
> 时间：2012-04-04T16:36:56.620
> 
> 标签：ontology

实际上我的项目是基于本体（知识库）。在这里，我创建了一个应该从中检索数据的本体。将提出问题并从本体中检索所需答案并打印为输出的应用程序。这里我的疑问是如何构造推理规则（即）如何将给定的关键字转换为查询？如果有人对构造推理规则和推理规则使用的语言有任何想法，请回复......谢谢......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T17:11:13.910

我将定义我过去用来探索这个庞大主题（本体/网络语义/rdf/等...）的要点：

*   首先，您应该使用一些本体编辑器（我使用过[Protégé](http://protege.stanford.edu/)）定义您的本体和规则集。该工具使您有机会创建实例并测试您的本体（检查推理规则）

之后，如果你想存储你的数据，你需要芝麻服务器和一些脚本来将数据插入芝麻。

*   Sesame 能够存储三元组信息 ( [Sesame](http://www.openrdf.org/about.jsp) ) - OpenRDF Workbench 可以作为 sesame 的管理控制台（好工具）

*   之后，我使用 python 和一些库（[SuRF](http://packages.python.org/SuRF/)、rdflib）从网络收集信息（使用 SPARQL 查询数据 - 我使用了 dblp sparql 端点）并将该数据（三元组）插入到我的芝麻服务器中

要进行查询，您需要学习 SPARQL :) 试一试 --> [http://dblp.rkbexplorer.com/sparql/](http://dblp.rkbexplorer.com/sparql/)

祝你好运！

# php - Gravity Forms（Wordpress 插件）在哪里保存时态数据？

> ID：10015520
> 
> 赞同：1
> 
> 时间：2012-04-04T16:37:04.827
> 
> 标签：php, wordpress, session, gravity

当您使用构建的多页表单时，`Gravity Forms`必须将数据保存在某个地方。我查看了会话和数据库，但没有找到。
任何建议都非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T03:06:06.887

数据在填充所有输入元素的页面之间传递。仅显示当前页面，其余页面隐藏！仅在提交最后一页时更新数据库。

# .net - 在 Windows 窗体应用程序中使用 C++/CLI 的命名空间混淆

> ID：10015526
> 
> 赞同：2
> 
> 时间：2012-04-04T16:37:21.747
> 
> 标签：.net, winforms, visual-studio-2010, c++-cli

我试图通过利用`using namespace`Windows 窗体项目来节省一些编码时间。我在 VS2010 中使用 C++/CLI 创建了一个默认的 Windows 窗体项目。我注意到导入的默认命名空间是：

```
using namespace System;
using namespace System::ComponentModel;
using namespace System::Collections;
using namespace System::Windows::Forms;
using namespace System::Data;
using namespace System::Drawing; 
```

我想创建一个`DialogResult`-typed 变量，它（足够方便！）位于`System::Windows::Forms`命名空间内。我进入默认构造函数`Form1`并添加以下行：

```
DialogResult dr; 
```

我得到编译器错误`syntax error : missing ';' before identifier 'dr'`。

但是，如果我将行更改为：

```
Windows::Forms::DialogResult dr; 
```

或者

```
System::Windows::Forms::DialogResult dr; 
```

然后一切都按预期工作。

我也尝试添加

```
using namespace System::Windows; 
```

进而

```
Forms::DialogResult dr 
```

也有效！

关于这些命名空间的工作方式，我缺少什么？！我想避免必须完全限定我正在编写的所有代码，但我无法弄清楚我做错了什么，因为我需要的命名空间应该已经被导入。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T16:59:07.707

`System::Windows::Forms::Form`有一个名为 的属性`DialogResult`，因此在`Form`子类内部，该属性的范围优先于全局命名空间中的类型。

我通常使用 typedef 来解决这个问题：

```
typedef System::Windows::Forms::DialogResult DialogResult_t; 
```

然后任何时候你需要使用类型，使用`DialogResult_t`，任何时候你需要访问属性，使用`DialogResult`。

请注意，这个问题不是 C++/CLI 特定的——C++ 具有相同的范围规则，因此会有相同的问题；只是.NET BCL 非常广泛地重用类型名称作为属性名称（C++ 代码会避免这种情况），因为*C#*没有这个问题。

# xml - 关于使用显示属性的不一致行为：svn log --with-all-revprops --xml [URL]

> ID：10015528
> 
> 赞同：3
> 
> 时间：2012-04-04T16:37:23.000
> 
> 标签：xml, svn, properties

首先，感谢您花时间阅读本文并可能对其发表评论。

**概括**

在文件上设置自定义 SVN 属性并提交后，我无法获得设置了各种选项的“svn log”命令来在提交后显示该属性。我已经按照 SVN 红皮书中的这个[例子](http://svnbook.red-bean.com/en/1.6/svn-book.html#svn.advanced.props.why)无济于事（可搜索性小节）。

**我的环境**

服务器：我正在使用在 64 位 Windows Server 2008 R2 上运行的 32 位 SubVersion Server 版本 1.6.15

客户端：在 32 位 Windows XP Pro SP3 上运行的 TortoiseSVN 1.6.16。

该 repo 是一个测试 repo，没有任何可用的钩子。

**我的场景**

*在名为test.txt*的文件上设置名为*active-projects*的自定义属性并将该更改提交到存储库后，我尝试执行以下操作：

 *```
svn log --with-all-revprops --xml [url_to_test.txt] 
```

使用*--with-all-revprops*应该向我展示我的自定义*属性*，但可惜的是，上面以 XML 格式返回了有效信息，但不包括具有名为*active-projects的**属性的**revprops*元素及其各自的值。

 **尝试在包含*test.txt*的本地目录中执行以下命令会产生与上述相同的结果：

```
svn log --with-all-revprops --xml test.txt 
```

有趣的是，我可以通过我的 repo 浏览器在该 URL 上看到该文件的上述属性。*如果我在包含test.txt*的本地目录中执行以下命令，则按预期返回*属性*的值：

```
svn propget active-projects test.txt 
```

**结论**

那么，有什么想法为什么我无法使用 URL 或本地路径通过*svn log命令找到我宝贵**的活动项目*自定义*属性？*可能是我误解了这个概念，或者遗漏了一些重要的服务器配置。感谢您的洞察力。

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T14:21:03.923

您混淆了**修订属性**和**常规属性**。修订属性是为整个修订设置的，并且仅适用于该修订（它们是*未版本*化的），常规属性是按项目（目录/文件）设置的并且是*版本化*的（即，如果您更改它们，它们仍将存在于早期版本的项目；它们可以被区分，等等）。

您设置了一个项目属性，同时`svn log --with-all-revprops`返回修订属性，而不是项目属性。

以下是更多信息`svn propset --help`：

```
$svn propset --help
propset (pset, ps): Set the value of a property on files, dirs, or revisions.
usage: 1\. propset PROPNAME PROPVAL PATH...
       2\. propset PROPNAME --revprop -r REV PROPVAL [TARGET]

1\. Changes a versioned file or directory property in a working copy.
2\. Changes an unversioned property on a repository revision.
 (TARGET only determines which repository to access.) 
```

希望这能消除混乱。****

# sql - sql语句错误：“列..不存在”

> ID：10015531
> 
> 赞同：24
> 
> 时间：2012-04-04T16:37:30.427
> 
> 标签：sql, postgresql, quoted-identifier

我从 postgres 控制台尝试这个命令：

```
select sim.id as idsim, 
       num.id as idnum 
from main_sim sim 
  left join main_number num on (FK_Numbers_id=num.id); 
```

我得到了这样的回应：

```
错误：列“fk_numbers_id”不存在
LINE 1: ...m from main_sim sim left join main_number num on (FK_Numbers...

```

但如果我只是检查我的桌子：

```
dbMobile=# \d main_sim

 id              | integer               | not null default

 Iccid           | character varying(19) | not null

...

 FK_Device_id    | integer               | 

 FK_Numbers_id   | integer               | 

Indexes:
    "main_sim_pkey" PRIMARY KEY, btree (id)
    "main_sim_FK_Numbers_id_key" UNIQUE, btree ("FK_Numbers_id")
    "main_sim_Iccid_key" UNIQUE, btree ("Iccid")
    "main_sim_FK_Device_id" btree ("FK_Device_id")
Foreign-key constraints:
    "FK_Device_id_refs_id_480a73d1" FOREIGN KEY ("FK_Device_id") REFERENCES main_device(id) DEFERRABLE INITIALLY DEFERRED
    "FK_Numbers_id_refs_id_380cb036" FOREIGN KEY ("FK_Numbers_id") REFERENCES main_number(id) DEFERRABLE INITIALLY DEFERRED 
```

...我们可以看到该列存在。

可能是语法错误，但我看不到是什么...

任何帮助将不胜感激。阿莱西奥

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-04T16:43:39.910

不，列`FK_Numbers_id`不存在，只有列`"FK_Numbers_id"`存在

显然，您使用双引号创建了表，因此所有列名现在都区分大小写，您必须始终使用双引号：

```
select sim.id as idsim, 
       num.id as idnum 
from main_sim sim 
   left join main_number num on ("FK_Numbers_id" = num.id); 
```

回顾一下手册中已经[记录的内容](http://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS)：

列`foo`和`FOO`是相同的，列`"foo"`和`"FOO"`不是。

# php - PHP 中 MySql 查询的异常行为

> ID：10015543
> 
> 赞同：-1
> 
> 时间：2012-04-04T16:37:54.000
> 
> 标签：php, mysql

> **可能重复：**
> [警告：mysql_fetch_* 期望参数 1 是资源，布尔给定错误](https://stackoverflow.com/questions/11674312/warning-mysql-fetch-expects-parameter-1-to-be-resource-boolean-given-error)

我正在使用 MySQL 作为数据库的 PHP 项目。
这是我的代码片段。

```
$query = "SELECT * FROM FEED_DETAILS";  
$result = mysql_db_query (DB_NAME, $query, $conn);
while($row = **mysql_fetch_assoc($result)**)  
{  
// Things i need to execute....  
} 
```

这`DB_NAME`是我之前定义的。
这以前对我有用。但是这次它给出了以下错误

```
<b>Warning</b>:  mysql_fetch_assoc() expects parameter 1 to be resource, boolean given in <b>C:\xampp\htdocs\My_Rss\classes\RSS.class.php</b> on line <b>28</b><br /> 
```

我使用的唯一参数是 $result。我已经在`php.net`网站上查看了与 php 中的数据库查询相关的文档。我什至尝试过基本的`mysql_query`和`mysql_fetch_array`。
在我去年学习 php 时制作的所有以前的程序中都会产生相同的错误。他们以前都曾经工作过。这一次他们停止了工作。

注意

*   我正在使用最新版本的 XAMPP（即 1.7.7）
*   我正在使用 PHP 5.3.8。
*   前几天将phpmyadmin版本升级到3.4.10.2。
*   其余是默认的 XAMPP 1.7.7 设置。

我听说 php 5.3 发生了重大变化并导致了问题。这是问题吗，因为我无法指出代码中的错误..

这是`index.php`

```
 <?
    header("Content-Type: application/xml; charset=ISO-8859-1");
    include("classes/RSS.class.php");
    $rss = new RSS();
    echo $rss->GetFeed();
?> 
```

这是`RSS.class.php`

```
class RSS
{
    public function __construct()
    {
        require_once ('./classes/mysql_connect.php');
    }

    public function GetFeed()
    {
        return $this->getDetails() . $this->getItems();
    }

    private function dbConnect()
    {
        //DEFINE ('LINK', mysql_connect (DB_HOST, DB_USER, DB_PASSWORD));
    }

    private function getDetails()
    {
        $detailsTable = "webref_rss_details";
        $this->dbConnect($detailsTable);
        $query = "SELECT * FROM FEED_DETAILS";
        $result = mysql_query ($query) or trigger_error(mysql_error()." ".$query);

             while($row = mysql_fetch_assoc($result))
        {
            $details = '<?xml version="1.0" encoding="ISO-8859-1" ?>
                    <rss version="2.0">
                        <channel>
                            <title>'. $row['title'] .'</title>
                            <link>'. $row['link'] .'</link>
                            <description>'. $row['description'] .'</description>
                            <language>'. $row['language'] .'</language>
                            <image>
                                <title>'. $row['image_title'] .'</title>
                                <url>'. $row['image_url'] .'</url>
                                <link>'. $row['image_link'] .'</link>
                                <width>'. $row['image_width'] .'</width>
                                <height>'. $row['image_height'] .'</height>
                            </image>';
        }
        return $details;
    }

    private function getItems()
    {
        $itemsTable = "webref_rss_items";
        $this->dbConnect($itemsTable);
        $query = "SELECT * FROM FEED_ITEMS";

        $result = mysql_query ($query) or trigger_error(mysql_error()." ".$query);
        //print_r($result);
        //$row = mysql_fetch_assoc($result);
        //print_r($row);

        $items = '';
        while($row = mysql_fetch_array($result))
        {
            $items .= '<item>
                         <title>'. $row["title"] .'</title>
                         <link>'. $row["link"] .'</link>
                         <description><![CDATA['. $row["description"] .']]></description>
                     </item>';
        }
        $items .= '</channel>
                 </rss>';
        return $items;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T16:41:08.643

mysql_db_query() 在失败时返回 FALSE。首先，总是使用 mysql_select_db() 和 mysql_query() 而不是 mysql_db_query()。其次，在使用之前检查您的结果代码是否有错误。mysql_error() 可以检索错误以进行调试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T16:53:30.217

这不是 mysql_fetch_assoc() 而是 mysql_db_query 的问题。

[至少]以这种方式运行您的查询

```
$query  = "SELECT * FROM FEED_DETAILS";  
$result = mysql_query ($query) or trigger_error(mysql_error()." ".$query); 
```

因此，您将始终收到任何问题的通知。或者，更好的是，将此代码封装到某个抽象库中。

在开发环境中始终`error_reporting`保持`E_ALL`水平和`display_errors`设置也很有帮助`on`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T16:42:36.650

`mysql_db_query()`[自 php 5.3 起已](http://php.net/manual/en/function.mysql-db-query.php)弃用

采用`mysql_query()`

例子：

```
mysql_select_db(DB_NAME);
$result = mysql_query ($query, $conn) or die(mysql_error()); 
```

# r - 使用相似数据框的内容来提高更新大数据框内容的性能

> ID：10015544
> 
> 赞同：6
> 
> 时间：2012-04-04T16:37:54.157
> 
> 标签：r, dataframe, data.table

我正在寻找一种通用解决方案，用于使用第二个类似数据帧的内容更新一个大数据帧。我有几十个数据集，每个都有数千行和超过 10,000 列。“更新”数据集将与其相应的“基础”数据集重叠，按行排列从百分之几到大约 50%。数据集有一个“键”列，在任何给定的数据集中，每个唯一键值只有一行。

基本规则是：如果给定单元格的更新数据集中存在非 NA 值，则将基础数据集中的相同单元格替换为该值。（“相同单元格”表示“键”列和列名的相同值。）

请注意，更新数据集可能包含我可以使用 rbind 处理的新行（“插入”）。

因此，给定基本数据框“df1”，其中“K”列是唯一键列，“P1”..“P3”代表 10,000 列，其名称从一对数据集到下一个数据集会有所不同：

```
 K P1 P2 P3
1 A  1  1  1
2 B  1  1  1
3 C  1  1  1 
```

...和更新数据框“df2”：

```
 K P1 P2 P3
1 B  2 NA  2
2 C NA  2  2
3 D  2  2  2 
```

我需要的结果如下，其中“B”和“C”的 1 被 2 覆盖，但未被 NA 覆盖：

```
 K P1 P2 P3
1 A  1  1  1
2 B  2  1  2
3 C  1  2  2
4 D  2  2  2 
```

这似乎不是一个合并候选者，因为合并给了我重复的行（相对于“键”列）或重复的列（例如 P1.x、P1.y），我必须对其进行迭代才能以某种方式折叠.

我已经尝试使用最终行/列的维度预先分配一个矩阵，并用 df1 的内容填充它，然后迭代 df2 的重叠行，但我无法获得优于每秒 20 个单元格的性能，需要数小时完成（与 SAS 中等效的 DATA 步 UPDATE 功能的分钟相比）。

我确定我遗漏了一些东西，但找不到可比较的例子。

我看到 ddply 用法看起来很接近，但不是通用解决方案。该`data.table`软件包似乎没有帮助，因为对我来说这是一个连接问题并不明显，至少通常不会超过这么多列。

此外，仅关注相交行的解决方案就足够了，因为我可以识别其他行并将它们绑定到其中。

下面是一些代码来制作上面的数据框：

```
cat("K,P1,P2,P3", "A,1,1,1", "B,1,1,1", "C,1,1,1", file="f1.dat", sep="\n");
cat("K,P1,P2,P3", "B,2,,2", "C,,2,2", "D,2,2,2", file="f2.dat", sep="\n");
df1 <- read.table("f1.dat", sep=",", header=TRUE, stringsAsFactors=FALSE);
df2 <- read.table("f2.dat", sep=",", header=TRUE, stringsAsFactors=FALSE); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T16:50:24.357

这可能不是最快的解决方案，但完全在基础上完成。

**（根据汤米的评论更新答案）**

```
#READING IN YOUR DATA FRAMES
df1 <- read.table(text="  K P1 P2 P3
1 A  1  1  1
2 B  1  1  1
3 C  1  1  1", header=TRUE)

df2 <- read.table(text="  K P1 P2 P3
1 B  2 NA  2
2 C NA  2  2
3 D  2  2  2", header=TRUE)

all <- c(levels(df1$K), levels(df2$K))                  #all cells of key column
dups <- all[duplicated(all)]                            #the overlapping key cells
ndups <- all[!all %in% dups]                            #unique key cells
df3 <- rbind(df1[df1$K%in%ndups, ], df2[df2$K%in%ndups, ]) #bind the unique rows

decider <- function(x, y) ifelse(is.na(x), y, x) #function replaces NAs if existing
df4 <- data.frame(mapply(df2[df2$K%in%dups, ], df1[df1$K%in%dups, ], 
    FUN = decider)) #repalce all NAs of df2 with df1 values if they exist

df5 <- rbind(df3, df4) #bind unique rows of df1 and df2 with NA replaced df4
df5 <- df5[order(df5$K), ]  #reorder based on key column
rownames(df5) <- 1:nrow(df5)  #give proper non duplicated rownames
df5 
```

这产生：

```
 K P1 P2 P3
1 A  1  1  1
2 B  2  1  2
3 C  1  2  2
4 D  2  2  2 
```

仔细阅读后，并非所有列都具有相同的名称，但我假设顺序相同。这可能是一种更有用的方法：

```
all <- c(levels(df1$K), levels(df2$K))
dups <- all[duplicated(all)]
ndups <- all[!all %in% dups]
LS <- list(df1, df2)
LS2 <- lapply(seq_along(LS), function(i) {
        colnames(LS[[i]]) <- colnames(LS[[2]])
        return(LS[[i]])
    }
)

LS3 <- lapply(seq_along(LS2), function(i) LS2[[i]][LS2[[i]]$K%in%ndups, ])
LS4 <- lapply(seq_along(LS2), function(i) LS2[[i]][LS2[[i]]$K%in%dups, ])

decider <- function(x, y) ifelse(is.na(x), y, x)
DF <- data.frame(mapply(LS4[[2]], LS4[[1]], FUN = decider))
DF$K <- LS4[[1]]$K
LS3[[3]] <- DF
df5 <- do.call("rbind", LS3)
df5 <- df5[order(df5$K), ]
rownames(df5) <- 1:nrow(df5)
df5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T00:52:23.820

这按列循环，`dt1`通过引用设置并且（希望）应该很快。

```
dt1 = as.data.table(df1)
dt2 = as.data.table(df2)
if (!identical(names(dt1),names(dt2)))
    stop("Assumed for now. Can relax later if needed.")
w = chmatch(dt2$K, dt1$K)
for (i in 2:ncol(dt2)) {
    nna = !is.na(dt2[[i]])
    set(dt1,w[nna],i,dt2[[i]][nna])
}
dt1 = rbind(dt1,dt2[is.na(w)])
dt1
     K P1 P2 P3
[1,] A  1  1  1
[2,] B  2  1  2
[3,] C  1  2  2
[4,] D  2  2  2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T12:15:11.090

编辑：请忽略这个答案。逐行循环的坏主意。它可以工作，但速度很慢。留给后人！将我的第二次尝试视为单独的答案。

```
require(data.table)
dt1 = as.data.table(df1)
dt2 = as.data.table(df2)
K = dt2[[1]]
for (i in 1:nrow(dt2)) {
    k = K[i]
    p = unlist(dt2[i,-1,with=FALSE])
    p = p[!is.na(p)]
    dt1[J(k),names(p):=as.list(p),with=FALSE]
} 
```

或者，您可以使用`matrix`代替`data.frame`吗？`A[B]`如果是这样，它可能是使用语法的单行where`B`是一个包含要更新的行号和列号的 2 列矩阵。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T04:16:42.930

下面给出了小示例数据的正确答案，尽量减少表的“副本”数量，并使用新的 fread 和（新的？） rbindlist。它适用于您更大的实际数据集吗？我没有完全遵循原始帖子中关于您在尝试展平/规范化/堆栈时遇到的内存问题的所有评论，所以如果您已经尝试过这条路线，我们深表歉意。

```
library(data.table)
library(reshape2)

cat("K,P1,P2,P3", "A,1,1,1", "B,1,1,1", "C,1,1,1", file="f1.dat", sep="\n")
cat("K,P1,P2,P3", "B,2,,2", "C,,2,2", "D,2,2,2", file="f2.dat", sep="\n")

dt1s<-data.table(melt(fread("f1.dat"), id.vars="K"), key=c("K","variable")) # read f1.dat, melt to long/stacked format, and convert to data.table

dt2s<-data.table(melt(fread("f2.dat"), id.vars="K", na.rm=T), key=c("K","variable")) # read f2.dat, melt to long/stacked format (removing NAs), and convert to data.table
setnames(dt2s,"value","value.new")

dt1s[dt2s,value:=value.new] # Update new values

dtout<-reshape(rbindlist(list(dt1s,dt1s[dt2s][is.na(value),list(K,variable,value=value.new)])), direction="wide", idvar="K", timevar="variable") # Use rbindlist to insert new records, and then reshape
setkey(dtout,K)
setnames(dtout,colnames(dtout),sub("value.", "", colnames(dtout))) # Clean up the column names 
```

# php - 为什么 curl 将我的 cookie 存储在 c:\

> ID：10015545
> 
> 赞同：0
> 
> 时间：2012-04-04T16:37:56.933
> 
> 标签：php, cookies, curl

我正在使用以下内容设置 curl cookiejar 选项：

```
curl_setopt($ch, CURLOPT_COOKIEFILE, "cookie.txt"); 
```

这会将文件放在 c:\

我尝试使用绝对路径 (c:\server\docs) 并且脚本中断。即便如此，cookie 确实会被写入该路径。奇怪的。

我应该用另一种方法来定义我的网络服务器的路径吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:46:32.427

利用

```
define("SITE_PATH",'c:\server\docs');
curl_setopt($ch, CURLOPT_COOKIEFILE, SITE_PATH . "/cookie.txt"); 
```

我希望它有帮助

谢谢 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T16:41:18.773

我想您需要将其更改为“ `c:\\server\\docs\\`”

# java - 爪哇。摇摆。JScrollPane 的 JViewport 大小已更改

> ID：10015553
> 
> 赞同：0
> 
> 时间：2012-04-04T16:38:30.813
> 
> 标签：java, swing, jscrollpane

我在 JScrollPane 中有一个 customText 组件。当文本为空且没有滚动条时，我可以看到所有文本。但是当滚动条变得可见时，一些文本被“隐藏”在这些滚动条后面。也许我可以收听 JViewPort 大小的变化并为我的文本组件设置首选大小？

```
JComponent component = getResTextArea();
component.setPreferredSize(RES_TEXT_AREA_PREFFERED_SIZE);
JScrollPane scrollPane = new JScrollPane(component);
scrollPane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
scrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED);
scrollPane.getVerticalScrollBar().setUnitIncrement(UNIT_INCREMENT);
panel.add(scrollPane); 
```

我看到当文本超出面板的可见区域并显示滚动条时，视口的大小如何变化。

**编辑。**我的自定义组件是 JEditorPane 的子类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T16:45:24.323

实现这一点的最佳方法是让您的自定义组件实现 javax.swing.Scrollable，getScrollableTracksViewportWidth() 返回 true。这会将 JComponent 的宽度锁定到视口的宽度。

# c# - 如何同步存储在数据库中但由多个服务处理的消息

> ID：10015562
> 
> 赞同：1
> 
> 时间：2012-04-04T16:39:15.817
> 
> 标签：c#, soa, messaging

我想知道如何创建自己的 SOA 风格的消息传递系统，类似于 JMS（Java 消息传递系统）。

MOM（面向消息的中间件）需要将消息存储在单个数据库中，但可能由多个服务处理以实现可伸缩性和故障转移。

我已经定义了一个基本的 Messages 表，如下所示：

1.  MessageId int
2.  CreateTimeStamp 日期时间
3.  DeliveredTimeStamp 日期时间
4.  有效载荷 varchar(max)
5.  到期日期时间
6.  重试次数 int
7.  CorrelationId int
8.  状态 int（1-等待，2-处理，3-发送，4-重试，5-失败）
9.  *ProcessIdLock int - 这是正在处理消息的消息传递服务的进程 ID

问题是，撇开身份问题不谈，我如何确保一个服务一次处理每条消息？

我正在考虑这样的方案：

1.  执行记录锁定： UPDATE Messages SET ProcessIdLock = MessageProcessorId, SET State = 2 -- Processing WHERE MessageId IN ( SELECT TOP 10 MessageId FROM Messages WHERE Expiration < GETTIME() + CreateTimeStamp AND St​​ate = 1 -- Waiting OR State = 3 -- 重试)

    上述步骤将获得最多 10 条消息一次由单个服务处理

2.  获取锁定记录： SELECT Payload FROM Messages WHERE State = 2 -- Processing AND ProcessIdLock = MessageProcessorId

3.  更新处理的每条消息的状态：UPDATE Messages
    SET State = (Pass, Fail, or Retry), SET DeliveredTimeStamp = GETDATE() -- Pass only WHERE MessageId = ProcessedMessageId

注意：我遇到的另一个问题是，一些消息被广播到按 id 分组的多个客户端（这样，总共可能有 100 个客户端，但每个客户端组将包含 10 个或更少）。

例如，如果一个组中有 5 个客户端，但当前有 2 个客户端断开连接，会发生什么情况？我想在这些客户回来时将该消息发送给他们。

一个客户端可能会重新连接（并且应该获取消息），而另一个客户端可能不会重新连接（因此消息将在消息过期后被丢弃）。

谢谢您阅读此篇。对我来说，这似乎是一个典型的企业问题。MSMQ 会是最好的解决方案吗？我是 MSMQ 的新手，MSMQ 消息是保存在存储中还是保存在内存中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T17:46:21.627

我知道它不能直接回答你的问题，但我**强烈**建议你不要在这里重新发明轮子。创建一个可靠、持久、可扩展的消息传递系统不是您应该轻易采取的措施。相反，我鼓励您研究现有的开源实现，例如[NServiceBus](http://www.nservicebus.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T22:51:52.617

我同意大卫尼尔森的观点。除非您有充分的理由这样做，否则我会考虑现有的解决方案。除了 NServiceBus 您还可以结帐[MassTransit](http://masstransit-project.com/)。

# windows-7 - 使用 XNA 开发 Windows 7/8 和 Xbox 游戏需要多少磁盘空间？

> ID：10015564
> 
> 赞同：1
> 
> 时间：2012-04-04T16:39:21.813
> 
> 标签：windows-7

我目前拥有一台 15 英寸的 MacBook Pro，并希望将其设置为使用 XNA 进行 Windows 和 XBox 游戏开发。

我将在 Windows 机器上安装以下内容：

1.  视窗 7 64 位
2.  视觉工作室 2010
3.  XNA
4.  微软 Kinect SDK

假设我只将此分区用于 Windows 开发，那么 Windows 分区的合适大小是多少，请记住我可能会在不久的将来升级到 Windows 8？我的硬盘是 500 GB，我目前在 Mac 端使用 ~300 GB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:43:22.063

这取决于您的游戏将使用的内容量，但我可以说我有足够的可用磁盘空间，而我的笔记本电脑中只有一个 120GB 的 SSD 驱动器。

如果主要用于编码，我认为您不需要超过 60-80GB，但我建议至少 100GB。

# ruby-on-rails - 在特定时间设置下一个或上一个星期日的日期时间

> ID：10015566
> 
> 赞同：1
> 
> 时间：2012-04-04T16:39:31.937
> 
> 标签：ruby-on-rails, time

我有一个应用程序，其中总是有一个当前的比赛（由 start_date 和 end_date 日期时间定义）。我在 application_controller.rb 中有以下代码作为 before_filter。

```
def load_contest
 @contest_last = Contest.last
 @contest_last.present? ? @contest_leftover = (@contest_last.end_date.utc - Time.now.utc).to_i : @contest_leftover = 0

 if @contest_last.nil?
  Contest.create(:start_date => Time.now.utc, :end_date => Time.now.utc + 10.minutes)
 elsif @contest_leftover < 0
  @winner = Organization.order('votes_count DESC').first
  @contest_last.update_attributes!(:organization_id => @winner.id, :winner_votes => @winner.votes_count) if @winner.present?
  Organization.update_all(:votes_count => 0)
  Contest.create(:start_date => @contest_last.end_date.utc, :end_date => Time.now.utc + 10.minutes)
 end
end 
```

我的问题：

1）我想将 :end_date 更改为表示下周日某个时间的内容（例如下周日晚上 8 点）。同样，我可以在某个时间将 :start_date 设置为上一个星期日。我看到有一个 sunday() 类（[http://api.rubyonrails.org/classes/Time.html#method-i-sunday](http://api.rubyonrails.org/classes/Time.html#method-i-sunday)），但不确定如何指定当天的某个时间。

2）对于这种总是想要当前比赛的情况，有没有更好的方法在应用程序中加载它？如果创建一个新的，缓存它会更好然后重新加载吗？不知道如何做到这一点，但似乎更有效率。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T07:58:31.143

从这个片段开始。在 rails 中，给定一个日期/时间对象`d`，表达式

```
d - wday.day 
```

给出最后一个星期日*而不是*该日期之后。即，如果这一天本身是星期日，则结果将为 d。

然后得到下一个星期天：

```
sunday1 = d - wday.day
sunday2 = sunday1 + 7.day 
```

并为两者设置时间：

```
sunday1 = (d - wday.day).change(:hour => 8,:min => 30)
sunday2 = (sunday1 + 7.day).change(:hour => 20) 
```

无需任何外部模块。Rails（但不是核心 ruby​​！）具有您需要的所有日期/时间操作功能。

注意这个`change`函数是如何工作的：如果你`:hour`只传递它，它会将分钟和秒重置为0。如果你传递它`:hour`和`:minute`，它只会重置秒。有关详细信息，请参阅[文档](http://api.rubyonrails.org/classes/DateTime.html#method-i-change)。

最后一件事：注意您使用的时区。

# ios - 如何从我的 appDelegate 访问我的 viewController？iOS

> ID：10015567
> 
> 赞同：66
> 
> 时间：2012-04-04T16:39:42.187
> 
> 标签：ios, uiviewcontroller, uikit, storyboard

我有一个我在 xCode 中创建为“基于视图的应用程序”的 iOS 应用程序。我只有一个 viewController，但它会自动显示，而且我看不到将它与我的 appDelegate 关联的代码。我需要将数据从我的 appDelegate 传递到我的 viewController，但不知道如何实现。

我的应用委托.h：

```
#import <UIKit/UIKit.h>

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) NSDictionary *queryStrings;

@end 
```

此外，appDidFinishLoadingWithOptions：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    [[JMC sharedInstance] configureJiraConnect:@"https://cmsmech.atlassian.net/"           projectKey:@"WTUPLOAD" apiKey:@"7fc060e1-a795-4135-89c6-a7e8e64c4b13"];

    if ([launchOptions objectForKey:UIApplicationLaunchOptionsURLKey] != nil) {
        NSURL *url = [launchOptions objectForKey: UIApplicationLaunchOptionsURLKey];
        NSLog(@"url received: %@", url);
        NSLog(@"query string: %@", [url query]);
        NSLog(@"host: %@", [url host]);
        NSLog(@"url path: %@", [url path]);
        queryStrings = [self parseQueryString:[url query]];
        NSLog(@"query dictionary: %@", queryStrings);
    }
    else {
        queryStrings = [self parseQueryString:@"wtID=nil"];
    }

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-04-04T16:45:08.257

您可以通过以下方式访问它：

```
MyViewController* mainController = (MyViewController*)  self.window.rootViewController; 
```

如果您将视图嵌套在 tabviewcontroller 或导航控制器后面，它将返回给您，您需要访问其中的视图控制器

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-04-04T16:45:48.757

使用老式的[NSNotifications](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSNotification_Class/Reference/Reference.html)将消息从您的应用程序代理发送给任何监听（例如您的视图控制器）需要更新的东西怎么样？或者您可以使用[Key Value Observing](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)，以便您的视图控制器可以在您的应用程序委托中查看某些属性。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-04-04T16:46:34.307

由于您只有一个视图控制器，因此通用方式（与您的应用程序的设置方式无关）：

```
UIViewController *vc = [[[UIApplication sharedApplication] keyWindow] rootViewController]; 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-04-21T13:25:00.470

如果您想获得其他任何东西`UIViewController`，而不仅仅是`rootViewController`：

```
UIWindow *window=[UIApplication sharedApplication].keyWindow;
UIViewController *root = [window rootViewController];

UIStoryboard *storyboard = root.storyboard;
CustomViewController *vcc =(CustomViewController *) [storyboard instantiateViewControllerWithIdentifier:@"storyBoardID"]; 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-11-24T04:15:58.767

快速的方式来做到这一点，你可以从任何地方调用它，而不仅仅是 appdelegate：

```
/// EZSwiftExtensions - Gives you the VC on top so you can easily push your popups
public var topMostVC: UIViewController? {
    var presentedVC = UIApplication.sharedApplication().keyWindow?.rootViewController
    while let pVC = presentedVC?.presentedViewController {
        presentedVC = pVC
    }

    if presentedVC == nil {
        print("EZSwiftExtensions Error: You don't have any views set. You may be calling them in viewDidLoad. Try viewDidAppear instead.")
    }
    return presentedVC
} 
```

它作为标准功能包含在：

[https://github.com/goktugyil/EZSwiftExtensions](https://github.com/goktugyil/EZSwiftExtensions)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T16:56:47.093

如果您使用基于视图的应用程序模板，则应该可以通过应用程序委托中的属性访问单个视图控制器。它与设置为导航控制器的根视图控制器的视图控制器相同。

如果由于某种原因您的项目设置不同，您可以获取窗口的根视图控制器，它应该是导航控制器，然后获取其顶部视图控制器。

***编辑：*** 所以问题是这样的：在 iOS5 和 Storyboard 中，Apple 已经抽象了很多你曾经可以访问的初始设置（如果你选择不使用 storyboard，仍然可以访问）。他们更改了传递给 main() 的参数，并在情节提要中进行了更多设置（实际上只是一个 nib）。恕我直言，这部分是为了防止人们使用繁重的操作使 AppDelegate 超载，就像您正在做的那样。AppDelegate 本质上是为了管理应用程序生命周期而存在的。它并不是真的要执行将信息传递给视图控制器的方法。实际上，为自己提供数据是您的视图控制器的工作。我建议将代码移动到您的视图控制器中，也许在 viewDidLoad 中。如果您需要知道您正在执行的launchOptions objectForKey 测试的结果，您可以非常简单地在您的AppDelegate 上创建一个属性，例如BOOL launchOptionsURLKeyExists，并进行适当的设置。然后，您只需在视图控制器中获取此属性的值。您的 AppDelegate 已经是一个单例，因此您可以通过 [UIApplication sharedApplication].delegate 访问它

***编辑 2：*** viewWillAppear/viewDidAppear 在视图添加到视图控制器中的 UIApplicationDidEnterForegroundNotification 通知时被调用，并在发布该消息时适当响应。

# xcode - 从 Nib 内启动 Storyboard？

> ID：10015569
> 
> 赞同：2
> 
> 时间：2012-04-04T16:39:46.620
> 
> 标签：xcode, ios5, interface-builder, storyboard

我正在考虑使用由`storyboards`. 在这一点上不想碰我的应用程序的其余部分，所以我的主要`NIB`将留下。

现在，当从我`NIB`的 'ed`tabBar`转到另一个时，`NIB`我只需在 IB 中添加一个`viewController`，`tabBar`然后将`NIB Name`属性设置`NIB`为按下该选项卡时我想要加载的属性。

但是我看不到“故事板名称”属性，那么这是如何完成的呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T20:52:32.920

目前没有“官方”的方式来做到这一点，但你可以使用一些技巧来做到这一点。

1）以通常的方式将您的视图控制器添加到 nib 中的标签栏。将笔尖字段留空。

2）创建您的故事板并添加您的视图控制器。设置类并设置故事板 ID（我将在此示例中使用“theID”）

3) 将静态布尔变量添加到您的 .m 文件、外部实现或接口

```
static BOOL aFlag = NO; 
```

4）在您的 viewcontroller 类中覆盖此方法：

```
- (id) awakeAfterUsingCoder:(NSCoder *)aDecoder
{
    if (!aFlag){
        aFlag = YES;
        UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"Storyboard" bundle:nil];
        return [storyboard instantiateViewControllerWithIdentifier:@"theID"];
    } else {
        return self;
    }
} 
```

本质上：

*   当您从标签栏 nib 加载对象时，第一次调用“initWithCoder”，并且该对象在没有 nib 的情况下加载
*   在 initWithCoder 之后，调用 awakeAfterUsingCoder 并用从情节提要加载的另一个对象替换该对象。同一类但存档在情节提要中的对象
*   当您从情节提要加载对象时，会再次调用 initWithCoder 和 awakeAfterUsingCoder。您使用该标志来避免循环并返回 self （在第二次调用时，对象是从情节提要加载的，因此返回 self 是可以的）

我试过了，效果很好;-)如果你想要一个示例项目：[http ://www.lombax.it/files/testTabNib.zip](http://www.lombax.it/files/testTabNib.zip)

# vim - Tmux 与 iTerm2 拆分窗格

> ID：10015575
> 
> 赞同：117
> 
> 时间：2012-04-04T16:40:05.543
> 
> 标签：vim, tmux, iterm

当 iterm2 有拆分窗格时，为什么要使用 tmux？

我从未使用过 tmux，并且想知道在我的工作流程中使用它是否有优势，而不是 iterm2 具有的拆分窗格功能。

我真的很喜欢 iTerm2 拆分窗格提供的非活动窗口变暗。tmux 会做类似的事情吗？

每个的优点/缺点是什么？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-04-04T18:09:18.760

还有一个好处`tmux`：如果不小心关闭了`iterm2`怎么办？如果你真的不小心这样做了，你想重新打开一切。使用`tmux`它通常就像重新连接会话一样简单而不会丢失任何东西。大多数终端仿真器发送`SIGHUP`给所有孩子，默认情况下会终止它们，因此您会丢失未保存的数据（至少，shell 和 vim 命令历史以及存储在 viminfo 中的其他数据）和正在运行的进程，因此重新打开意味着重新运行所有内容。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-04-04T18:27:22.513

iTerm2 可以使用 tmux 作为拆分窗格。就个人而言，此时我已经习惯了 tmux 本身，因此我没有广泛利用此功能 - 但如果您习惯于 iTerm2 拆分窗格，您可以获得 tmux（主要是类似屏幕的会话保存）的好处iTerm 美学。

[https://gitlab.com/gnachman/iterm2/wikis/TmuxIntegration](https://gitlab.com/gnachman/iterm2/wikis/TmuxIntegration)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-04-04T19:58:42.017

我的方法（不是基于任何特定的见解）是使用 iTerm 选项卡和窗格来分隔服务器，并在服务器上使用 screen / tmux 来保持会话。

我不经常在本地运行任何重要的东西，但经常在远程运行。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-04T17:03:58.480

从来没有用过iterm2，但是我玩过tmux，有几篇关于同时使用tmux和vim的文章。这些文章展示了如何通过 Vim 中的 tslime 插件和其他插件控制 tmux 会话。它的好处是您可以在 Vim 中运行命令来编译文件、运行单元测试等，而无需每次离开 Vim，但您会在另一个 tmux 窗格中看到该命令运行。

很抱歉不是一个完整的答案，但希望它可以帮助您指出正确的方向。

链接：[https ://joshuadavey.com/2012/01/10/faster-tdd-feedback-with-tmux-tslime-vim-and-turbux/](https://joshuadavey.com/2012/01/10/faster-tdd-feedback-with-tmux-tslime-vim-and-turbux/)

# parameter-passing - 作业 - 访问值的差异

> ID：10015577
> 
> 赞同：4
> 
> 时间：2012-04-04T16:40:11.987
> 
> 标签：parameter-passing, pascal

所以我不得不用 Pascal 编写一个程序（冒泡排序，这很简单），最后我的教授问了一个关于我们代码的问题。他让我们编写两个单独的打印程序。第一个 printArray 接受一个整数数组作为它的参数，其中 printArray2 接受一个名为 arrayType 的类型，其定义如下：

```
TYPE
arrayType = ARRAY[1..20] OF INTEGER; 
```

我现在有点漫不经心，但他的问题是“使用不同的打印程序时访问值的方式有什么区别？”

只是想知道是否有人可以给我一个提示。我最初的想法是它与如何访问内存位置有关，但我真的不知道如何正确地用词。

好吧，希望你们中的一个好人可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:38:15.110

这有点取决于 Pascal 方言 + 编译器，但我假设它是类型化数组和开放数组之间的区别，后者的范围 (0..number_of_elements-1) 与前者 (1..number_of_elements) 不同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T16:53:52.183

我假设您的老师已经向您介绍了按值传递和按引用传递的概念。我相信你是老师试图让你思考这些概念，因为它适用于原始数组声明与声明你自己的数组类型。这至少应该给你一个关于你的家庭作业的提示。

# python - 如何排除 [vanilla django] 表单中的字段？

> ID：10015583
> 
> 赞同：0
> 
> 时间：2012-04-04T16:40:39.317
> 
> 标签：python, django, django-forms, django-views

投资者和经理有两种类型的用户。一些用户（投资者）应该能够填写investor_type，而其他用户（经理）不应该......我有一个表格。用户信息表。我只是想知道是否有一种简单的方法可以将那些经理用户排除在填写该字段之外。

在我的模板中，我成功地将经理排除在查看investor_type 字段之外。但是在提交他们的 UserInfoForm 时，会出现：`investor_type This field is required.`在模板中。

有什么方法可以说，required=True 只对投资者？

```
class UserInfoForm(forms.Form):
    choices = (('0', "Foundation"), ('1', "Financial/Bank"), ('2', "Pension"), ('3', "Endowment"),\
                ('4', "Government Pension"), ('5', "Family Office"), ('6', "Insurance Co."),\
                 ('7', "Corporation"), ('8', "Fund of Funds"), ('9', "Fund Manager"), ('10', "Asset Manager"), ('11', "Fundless Sponsor"))

    first_name = forms.CharField(widget=forms.TextInput(attrs={'class':'input-text'}), max_length=30)
    last_name = forms.CharField(widget=forms.TextInput(attrs={'class':'input-text'}), max_length=30)
    email = forms.EmailField(widget=forms.TextInput(attrs={'class':'input-text'}))
    about = forms.CharField(widget=forms.Textarea(attrs={'class':'input-text'}), required=False)
    country = forms.CharField(max_length=50, widget=forms.Select(choices=countries.COUNTRIES))
    avatar = forms.ImageField(required=False)
    investor_type = forms.CharField(max_length=4, widget=forms.Select(choices=choices))

def save(self, user, type):
    if type == 'manager':
        profile = ManagerProfile.objects.get(user=user)
    else:
        profile = InvestorProfile.objects.get(user=user)
        # // Tried this...
        if profile.investor_type != self.cleaned_data['investor_type']:
            profile.investor_type = self.cleaned_data['investor_type']
            profile_edited = True
        # // Failed
    user_edited = False
    if user.first_name != self.cleaned_data['first_name']:
        user.first_name = self.cleaned_data['first_name']
        user_edited = True
    if user.last_name != self.cleaned_data['last_name']:
        user.last_name = self.cleaned_data['last_name']
        user_edited = True
    if user.email != self.cleaned_data['email']:
        user.email = self.cleaned_data['email']
        user_edited = True
    if user_edited:
        user.save()
    profile_edited = False
    if profile.about != self.cleaned_data['about']:
        profile.about = self.cleaned_data['about']
        profile_edited = True
    if profile.country != self.cleaned_data['country']:
        profile.country = self.cleaned_data['country']
        profile_edited = True
    if profile_edited:
        profile.save()
    if self.cleaned_data['avatar']:
        avatar = self.cleaned_data['avatar']
        avatar.name = user.username + '.' + avatar.name.split('.')[-1]
        profile.avatar.save(avatar.name, avatar) 
```

我试过`investor_type = forms.CharField(max_length=4, required=False, widget=forms.Select(choices=choices), initial='0')`了，没有用。

Views.py：在视图中尝试 = 失败。

```
@login_required        
def edit_profile(request, profile_type):
    if profile_type == 'investor':
        profile = InvestorProfile.objects.get(user=request.user)
    elif profile_type == 'manager':
        profile = ManagerProfile.objects.get(user=request.user)
    context = base_context(request)
    if request.method == 'POST':
        notify = "You have successfully updated your profile."
        user_info_form = UserInfoForm(request.POST, request.FILES)
        if user_info_form.is_valid():
            user_info_form.save(request.user, profile_type)
            return HttpResponseRedirect(request.POST.get('next', '/profile/' + profile_type + '/' + request.user.username + '/'))
    else:
        initial = {}
        initial['first_name'] = request.user.first_name
        initial['last_name'] = request.user.last_name
        initial['email'] = request.user.email
        initial['about'] = profile.about
        initial['country'] = profile.country
        initial['about'] = profile.about
        # // Tried this ...
        if profile_type == 'investor':
            initial['investor_type'] = profile.investor_type
        elif profile_type == 'manager':
            profile.investor_type.required = False
        # // Failed
        user_info_form = UserInfoForm(initial=initial)
    context['user_info_form'] = user_info_form
    context['profile_type'] = profile_type
    context['profile'] = profile
    return render_to_response('edit/profile.html', context, context_instance=RequestContext(request)) 
```

感谢您的帮助，并提前感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T17:22:16.333

我会将投资者类型设置为：

```
required=False 
```

然后为检查用户类型的表单创建一个干净的方法。如果它是投资者并且他们没有指定投资者类型，则会引发错误。如果是经理，就让它过去吧。

您还需要确保您的个人资料模型允许investor_type 为空白和空： [https ://docs.djangoproject.com/en/dev/topics/db/models/#field-options](https://docs.djangoproject.com/en/dev/topics/db/models/#field-options)

查看有关表单的 clean 方法的文档。 [https://docs.djangoproject.com/en/dev/ref/forms/validation/#cleaning-and-validating-fields-that-depend-on-each-other](https://docs.djangoproject.com/en/dev/ref/forms/validation/#cleaning-and-validating-fields-that-depend-on-each-other)

# php - 从 mysql 数据库中检索数据时，Internet-explorer 出错（但在 Firefox 中有效）

> ID：10015584
> 
> 赞同：5
> 
> 时间：2012-04-04T16:40:46.013
> 
> 标签：php, mysql, html, internet-explorer

我在文件 showList.php 中写了以下表格，它从数据库中选择项目并在下拉列表中显示它们：

```
<form id="selForm" name="selForm" action="index.php" method="post">
<select name="selection" id="selection">
<option id="nothingSelected" >--Choose form---></option>
<?php

$con=mysql_connect("localhost","root","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
mysql_select_db("myDatabase",$con);
$result = mysql_query("SELECT * FROM formsTable");

while($row = mysql_fetch_array($result))
  {
  $selection_id=$row['id'];
if($_POST['selection']==$selection_id)$selElement="selected";
  echo "<option  id='$selection_id' name=\"sectionid\"  value='$selection_id' >";
  echo $row['nummer'] . " " . $row['titel']. " ";
  echo "</option>";
  }
?>

</select>
<input type="button" value="load form" onClick="validateForm(document.selForm)">
<input type="button" value="delete form" onClick="deleteForm(document.selForm);">
</form> 
```

我将此文件包含在 index.php 中，如下所示：

```
<?php include('showList.php');?> 
```

现在，当我调用 index.php 时，找到的表单列表将显示在下拉列表中。

这在 Firefox 中运行良好，我的问题是当我在 internetexplorer 中调用 index.php 时，出现以下错误：

```
Notice: Undefined index: selection in C:\path\showList.php on line 43 
```

第 43 行是：

```
if($_POST['selection']==$selection_id)$selElement="selected"; 
```

正如您在上面的表格中看到的那样。任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T16:54:17.423

似乎您的 php 脚本正在尝试读取 $_POST 变量中的“选择”，但尚未定义。

替换该行：

```
if($_POST['selection']==$selection_id) 
```

对此：

```
if(array_key_exists('selection', $_POST) && $_POST['selection'] == $selection_id) 
```

或者

```
if(isset($_POST['selection']) && $_POST['selection'] == $selection_id) 
```

这应该可以修复您的警告，并且 array_key_exists 之间存在差异。在这种情况下，使用 isset() 因为它更快更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T16:55:56.317

您需要从以下位置更改问题行：

```
if($_POST['selection']==$selection_id)$selElement="selected"; 
```

至：

```
if(isset($_POST['selection']) && ($_POST['selection']==$selection_id))
    $selElement="selected"; 
```

检查一个值（如@b1onic 建议的那样）。

显然，第一次在浏览器中显示表单时不会发布任何内容 - 无论您使用哪种浏览器 - 所以您会收到该错误。

# c - C 动态内存分配 - 从文件中读取数据

> ID：10015585
> 
> 赞同：2
> 
> 时间：2012-04-04T16:40:49.543
> 
> 标签：c, dynamic-memory-allocation, fgets, calloc

我正在从 MATLAB 复制 load() 函数以用于 C 应用程序。我无法动态加载数据和初始化我需要的数组。更具体地说，我正在尝试将 fgets 与已使用 calloc 初始化的数组一起使用，但我无法使其正常工作。该功能如下，感谢您的帮助。

编辑：更新的代码低于以下有缺陷的示例。

```
#include <stdio.h>
#include <math.h>
#include <stdlib.h>
#include <string.h>

void *load(const char *Filename);

void *load(const char *Filename)
{
    FILE* FID;
    if ((FID = fopen(Filename, "r")) == NULL)
    {
        printf("File Unavailable.\n");
    }
    else
    {
        int widthCount = 0, heightCount = 0;

        char ReadVal;
        while ((ReadVal = fgetc(FID)) != '\n')
        {
            if (ReadVal == ' ' || ReadVal == ',' || ReadVal == '\t')
            {
                widthCount++;
            }
        }

        rewind(FID);
        char* String = calloc(widthCount * 100, sizeof(char));
        while (fgets(*String, widthCount+1, FID) != EOF)
        {
            heightCount++;
        }
        double* Array = calloc(widthCount * heightCount, sizeof(double));
        rewind(FID);
        int i = 0, j = 0;
        char * pch;
        while (fgets(*String, widthCount+1, FID) != EOF)
        {
            pch = strtok(String, " ,\t");
            while (pch != NULL)
            {
                Array[i][j] = strtod(pch, NULL);
                pch = strtok (NULL, " ,\t");
                j++;
            }
            i++;
            j = 0;
        }

        fclose(FID);
        return Array;

    }

} 
```

修改后的代码：此解决方案适用于任何遇到类似问题的人。

```
void *load(const char *Filename)
{
    FILE* FID;
    if ((FID = fopen(Filename, "r")) == NULL)
    {
        printf("File Unavailable.\n");
        return NULL;
    }
    else
    {   
        int widthCount = 0, heightCount = 0;
        double *Array;
        char Temp[100];
        while ((Temp[0] = fgetc(FID)) != '\n')
        {
            if (Temp[0] == '\t' || Temp[0] == ' ' || Temp[0] == ',')
            {
                widthCount++;
            }
        }
        widthCount++;
        //printf("There are %i columns\n", widthCount);
        rewind(FID);
        while (fgets(Temp, 99, FID) != NULL)
        {
            heightCount++;
        }
        //printf("There are %i rows\n", heightCount);
        Array = (double *)calloc((widthCount * heightCount), sizeof(double));
        rewind(FID);
        int i = 0;
        while (!feof(FID))
        {

            fscanf(FID, "%lf", &*(Array + i));
            fgetc(FID);
            i++;
        }

        return Array;   
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T16:42:43.997

数组不是二维数组，而`Array[i][j] = strtod(pch, NULL);`不仅仅是增加指针`*(Array++) = strtod(pch, NULL);`

# ssrs-2008 - 如何在 SQL Server Reporting Services 2008 中复制报表

> ID：10015589
> 
> 赞同：14
> 
> 时间：2012-04-04T16:41:14.013
> 
> 标签：ssrs-2008

我有一个在 SQL Server Reporting Services 2008 中创建的报告。

我现在想创建一个新报表，它与我已经创建的报表非常相似。

如果不从头开始编写报告，我该如何做到这一点？我可以将 .rdl 复制到一个新名称吗？Visual Studio 将如何“接受”？

谢谢！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-23T23:38:46.253

关于 Amarundo 标注的最后一条评论：

“迭戈，就是这样。我可以右键单击报告（在解决方案资源管理器下）并选择复制，但找不到过去的位置。或者如果我复制`.rdl`文件，我不知道如何将其添加到我的项目中。”

如果您`right-click`在解决方案资源管理器中查看报告项，则该`Copy`选项可用。但是，`Paste`即使剪贴板中有报表项，该选项也永远不可见。但是，对象在那里，您可以按`ctrl`+粘贴它`v`。

我认为这只是微软的 UI 失误。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-04T16:49:17.567

我承认我不知道这个问题的答案，所以我尝试了。我复制并重命名了我的一份报告，将其添加到我的项目中，上传到 SSRS 并运行它。

似乎工作正常，所以我想答案是肯定的

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-04T17:57:47.723

[在 Visual Studio 的最新版本中，您可以简单地复制并粘贴到解决方案资源管理器窗口中，然后在那里重命名文件。这个答案适用于旧版本的 VS。]

我发现的最简单的方法是：

1.  在 BIDS 中，创建原始报告后，右键单击解决方案资源管理器窗格中的项目或报告文件夹，然后选择添加 -> 现有项目...
2.  在出现的对话框中，复制并粘贴您的第一个报告，这将为您提供类似于“Report1 Copy.rdl”的内容
3.  将复制的文件重命名为新的报告名称。
4.  再次选择新文件，以便在“文件名”文本框中选择该名称。
5.  单击“添加”按钮。

是的，添加相同 .rdl 的多个副本没有问题。.rdl 文件中没有唯一标识符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-27T04:43:58.327

最简单的方法是从报告文件夹（位于解决方案资源管理器窗口 -> 项目下拉列表中）复制所需的`.rdl`文件，然后右键单击您的项目名称（位于同一窗口的顶部）。选择粘贴选项，您的项目将被复制为`Copy of (copied .rdl file name)`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-07T16:22:13.870

我复制报告已经有一段时间了。其中一份副本开始出现问题，即子报告无法显示报告的运行时间。子报告自行运行良好。在查看了 RDL 中的 XML 代码后，我发现最后一行的旁边是一个 ReportID GUID。我的大多数报告共享相同的 GUID，包括此报告及其子报告。在获得子报告的新 GUID 后，问题就解决了。

我能找到的生成新 GUID 的唯一过程是删除报告中的所有数据源。然后删除 XML 中的 ReportID 行。然后重新添加一个Data Source，导致VS2010崩溃。VS2010 恢复后，我能够重新添加数据源，它用新的 GUID 替换了 XML 中的 ReportID 行。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-01-15T16:33:49.903

我能够在 VS 中创建一个新报告，而不是在解决方案资源管理器中添加一个新项目 (.rdl)，而是添加了一个现有项目，即我想要复制的报告中的 .rdl。我更改了 .rdl 的名称并更改了数据集中的 SP，它就像一个魅力。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-22T14:34:03.590

是的。右键单击以 结尾的报告`.rdl`，选择复制，然后选择您的文件夹并使用 ctrl-V 粘贴。你可以看到`Copy of yourReport`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-01T21:00:51.863

1.  将 RDL 文件从 Prod 源代码复制到报告服务器
2.  通过打开 Reporting Service Config 找到 REPORTS URL。来自 Start btn 的经理
3.  从左侧窗格中打开 Report Mgr URL 选项 - 转到其中列出的 URL
4.  根据您的组织方式找到 Rpt 所属的文件夹，然后打开该文件夹
5.  单击顶部的上传文件，浏览到复制的文件 - 替换/覆盖现有
6.  在报告列表中找到报告，单击其下拉列表，选择管理
7.  从左侧窗格中选择数据源
8.  从此列表中选择报告将使用的数据源
9.  单击应用，然后双击运行报告

# python - 按值索引python字典

> ID：10015590
> 
> 赞同：1
> 
> 时间：2012-04-04T16:41:15.407
> 
> 标签：python, dictionary

> **可能重复：**
> [逆字典查找 - Python](https://stackoverflow.com/questions/2568673/inverse-dictionary-lookup-python)

是否有一种内置方法可以在 Python 中按值索引字典。

例如：

```
dict = {'fruit':'apple','colour':'blue','meat':'beef'}
print key where dict[key] == 'apple' 
```

或者：

```
dict = {'fruit':['apple', 'banana'], 'colour':'blue'}
print key where 'apple' in dict[key] 
```

还是我必须手动循环它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T16:44:05.750

您可以使用[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)：

```
my_dict = {'fruit':'apple','colour':'blue','meat':'beef'}
print [key for key, value in my_dict.items() if value == 'apple'] 
```

上面的代码几乎完全符合您的要求：

> 打印键，其中 dict[key] == 'apple'

列表理解正在遍历字典[`items`方法](http://docs.python.org/library/stdtypes.html#dict.items)给出的所有键值对，并创建一个值为“apple”的所有键的新列表。

正如 Niklas 指出的那样，当您的值可能是列表时，这不起作用。在这种情况下，您必须小心使用`in`，因为`'apple' in 'pineapple' == True`. 因此，坚持使用列表理解方法需要进行一些类型检查。因此，您可以使用如下辅助函数：

```
def equals_or_in(target, value):
    """Returns True if the target string equals the value string or,
    is in the value (if the value is not a string).
    """
    if isinstance(target, str):
        return target == value
    else:
        return target in value 
```

然后，下面的列表理解将起作用：

```
my_dict = {'fruit':['apple', 'banana'], 'colour':'blue'}
print [key for key, value in my_dict.items() if equals_or_in('apple', value)] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T16:43:34.730

您必须手动循环它，但如果您需要反复查找，这是一个方便的技巧：

```
d1 = {'fruit':'apple','colour':'blue','meat':'beef'}

d1_rev = dict((v, k) for k, v in d1.items()) 
```

然后，您可以像这样使用反向字典：

```
>>> d1_rev['blue']
'colour'
>>> d1_rev['beef']
'meat' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-04T16:50:25.340

您的要求比您意识到的要复杂：

*   您需要同时处理列表值和普通值
*   您实际上不需要取回密钥，而是取回密钥*列表*

你可以分两步解决这个问题：

1.  规范化字典，使每个值都是一个列表（每个普通值都成为一个单元素）
2.  建立一个反向字典

以下函数将解决此问题：

```
from collections import defaultdict

def normalize(d):
    return { k:(v if isinstance(v, list) else [v]) for k,v in d.items() }

def build_reverse_dict(d):
    res = defaultdict(list)
    for k,values in normalize(d).items():
        for x in values:
            res[x].append(k)
    return dict(res) 
```

像这样使用：

```
>>> build_reverse_dict({'fruit':'apple','colour':'blue','meat':'beef'})
{'blue': ['colour'], 'apple': ['fruit'], 'beef': ['meat']}
>>> build_reverse_dict({'fruit':['apple', 'banana'], 'colour':'blue'})
{'blue': ['colour'], 'apple': ['fruit'], 'banana': ['fruit']}
>>> build_reverse_dict({'a':'duplicate', 'b':['duplicate']})
{'duplicate': ['a', 'b']} 
```

因此，您只需构建一次反向字典，然后按值查找并返回键列表。

# salesforce - 基于选项列表选择上的选择显示字段

> ID：10015597
> 
> 赞同：3
> 
> 时间：2012-04-04T16:41:41.927
> 
> 标签：salesforce, apex-code, visualforce

我有一个 VF 页面，我在其中使用 apex:pageblocktable 来显示一堆记录。其中一列是选项列表，我需要根据选项列表上的选择显示/不显示字段。

```
 <apex:pageBlockTable value="{!showRecord}" var="item">
  <apex:column headerValue="Delivery">
    <apex:inputField value="{!item.delivery__c}"/>
  </apex:column>
  <apex:column headerValue="Roadway">
    <apex:inputField value="{!item.road__c}"/>
  </apex:column>
  <apex:column headerValue="Rail">
    <apex:inputField value="{!item.rail__c}"/>
  </apex:column>
 </apex:pageBlockTable> 
```

在上面的代码中，delivery_c*是带有道路和铁路值的选项列表。如果用户选择公路，那么我需要显示道路--c，如果用户选择铁路，那么我需要显示铁路*_c

我该怎么做呢？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T12:24:23.430

一种方法是在 Visualforce 中使用部分页面刷新。

将两个字段放在同一列中，并使用“rendered”属性使用 if 语句动态显示/隐藏字段。然后，您使用 actionSupport 标记为 delivery__c 字段设置 AJAX onchange 事件处理程序。这基本上会监听该字段的变化，然后刷新页面上的表格。每次刷新时，您的 if 语句都将被重新评估，并导致在该列中显示两个字段之一。

我没有机会尝试这个，但我认为它应该有效。

```
<apex:pageBlockTable id="mytable" value="{!showRecord}" var="item">
  <apex:column headerValue="Delivery">
    <apex:actionRegion>        
      <apex:inputField value="{!item.delivery__c}">
        <apex:actionSupport event="onchange" reRender="mytable">
      </apex:inputField>
    </apex:actionRegion>
  </apex:column>
  <apex:column headerValue="Delivery Type">
    <apex:inputField rendered="{!item.delivery__c='Road'}" value="{!item.road__c}"/>
    <apex:inputField rendered="{!item.delivery__c='Rail'}" value="{!item.rail__c}"/>
  </apex:column>
</apex:pageBlockTable> 
```

# c++ - 扫描速度慢的内存扫描仪

> ID：10015598
> 
> 赞同：1
> 
> 时间：2012-04-04T16:41:42.673
> 
> 标签：c++, c, delphi, memory

我正在使用内存扫描仪，但扫描速度太慢了.. 任何人都可以帮我改进它吗？

```
procedure FirstScan(scantype, scanvalue: string);
var
 value :integer;
 dwEndAddr : dword;
 i:dword;
 mbi : TMemoryBasicInformation;
begin
  while (VirtualQuery(Pointer(DWORD(mbi.BaseAddress) + MBI.RegionSize), MBI, SizeOf(MEMORY_BASIC_INFORMATION))=SizeOf(TMemoryBasicInformation)) do begin
   if (MBI.State = MEM_COMMIT) and (MBI.Protect = PAGE_READWRITE) then begin
    dwEndAddr := DWORD(mbi.BaseAddress) + MBI.RegionSize;
     for i := DWORD(MBI.BaseAddress) to (dwEndAddr - 1 - sizeof(DWORD)) do begin
      Application.ProcessMessages;
      try
       if scantype = '1 Byte' then begin
        value := PBYTE(i)^;
        if scanvalue = IntToStr(value) then ListBox1.Items.Add(IntToHex(i,8));
       end;
       //others scantypes here...
      except
       Break;
      end;
     end;
   end; 
  end;
end; 
```

我了解到我需要一次读取 4096 字节页面，然后将它们存储在内存中并对其进行操作，直到我需要一个新页面然后再获取另一个 4096 字节页面......

但我不知道我该怎么做...

有谁能够帮助我？代码可以是 C 或 C++...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-04T16:47:51.660

我可以帮你一点......把它`Application.ProcessMessages`从内部循环中解脱出来。你在为每个人打电话。单身的。字节。你。扫描。您不需要对窗口消息非常敏感*。*:)

将其向上移动到外循环，您应该会看到速度显着提高。我会说产生一个线程并完全摆脱`Application.ProcessMessages`它，因为这实际上不是这段代码的工作，但我不确定 Delphi 如何/是否执行线程。

另外....您将扫描参数作为字符串传递？如果您坚持这样做，请在开始循环说明要使用的扫描类型之前设置一个 int 或 enum 或其他内容，将值转换为对您的搜索有用的类型，然后进行比较。字符串比较往往比整数比较慢，尤其是当您每次都创建新字符串时。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-04T17:39:07.243

为了让慢速代码更快，你可以做一些事情。首先，确保您的代码是*正确*的。错误的结果仍然是错误的结果，即使你很快得到它们。为此，请确保当您调用 时`VirtualQuery`，您为所有参数传递了有效值。在该函数的开始处`mbi`未初始化，因此结果`DWORD(mbi.BaseAddress) + MBI.RegionSize`将是谁知道什么。

一旦你有正确工作的代码，有两种方法可以使它更快：

1.  找到慢的部分，让它们变快。要做到这一点，您需要一个分析器。分析器将在您的程序运行时观察它，然后告诉您程序执行每个部分所花费的时间百分比。这告诉你应该把精力集中在哪里。

2.  用更快的算法代替慢速算法。这可能意味着丢弃整个函数，或者可能意味着只修复代码的某些部分。

例如，分析可能显示您花费大量时间调用`ProcessMessages`。由于它是 VCL 的一部分，因此您无法真正使该函数更快，但您*可以*减少调用它的频率。如果您正在运行此代码的线程预计不会收到任何需要处理的消息，您甚至可能会发现根本不需要调用它。

分析可能表明您花费大量时间进行字符串比较。如果字符串的*开头*经常相等，并且通常只在结尾不同，那么您可能希望更改字符串比较算法以从最后一个字符而不是第一个字符开始比较字符串。

分析可能表明您在比较它们之前花费了大量时间将整数转换为字符串。大多数编程语言都支持直接比较整数，因此您可以尝试使用整数比较算法，而不是使用字符串比较算法。您可以将其转换`scanvalue`为整数`StrToInt(scanvalue)`并直接与`value`.

分析可能表明您正在从相同的输入重复计算相同的结果。如果一个值在程序的某些部分没有改变，那么从它计算的值也不会改变。您可以通过仅在值发生更改时进行转换来降低转换值的成本。例如，如果您进行整数比较，那么您可能会发现`scanvalue`您的函数中的整数版本不会改变。您可以`scanvalue`在函数开始时转换为整数一次，然后与`value`循环内的整数进行比较，而不是`StrToInt(scanvalue)`多次调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T17:30:27.267

另外：您正在将当前指针转换为您访问*的每个字节的字符串。*哎呀，慢得可怕。相反，在程序开始时将 scanvalue 更改为 BYTE，并直接在 BYTE 上进行比较。

最后——将“if scantype = '1 byte'”从 for i:=DWORD(MBI.BaseAddress) 循环中拉出来。你不想为每个字节都做那个“if”语句——相反，做

```
if scantype = '1 byte' then
  for i:= DWORD(...)
else if scantype='other scan type' then... 
```

等等。（是的，您应该将“if scantype”比较转换为枚举或诸如此类。）

# vbscript - VBS 如何更改文件夹上的 DateLastModified 属性

> ID：10015602
> 
> 赞同：5
> 
> 时间：2012-04-04T16:41:56.337
> 
> 标签：vbscript

我需要使用 VB 脚本“触摸”或更新文件夹上的 DateLastModified 属性。

PowerShell 不是一个选项，但我对 PowerShell 是否可行很感兴趣。

另外，我不希望运行像 GNU touch.exe 这样的外部程序。该脚本将在多台计算机上运行，​​我不能保证将安装 PowerShell 或外部程序。

感谢任何线索或帮助，史蒂夫

ps也在technet上问过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T17:41:13.793

从这里：

[http://www.tek-tips.com/viewthread.cfm?qid=1372273](http://www.tek-tips.com/viewthread.cfm?qid=1372273)

```
ModFileDT "c:\rootdir", "folder", "1/01/2007 4:18:02 PM"

Function ModFileDT(strDir, strFileName, DateTime)

    Dim objShell, objFolder

    Set objShell = CreateObject("Shell.Application")
    Set objFolder = objShell.NameSpace(strDir)
    objFolder.Items.Item(strFileName).ModifyDate = DateTime
End Function 
```

# oauth - Google Identity Toolkit 联合登录和 OAuth 访问令牌

> ID：10015604
> 
> 赞同：0
> 
> 时间：2012-04-04T16:42:02.983
> 
> 标签：oauth, google-api, access-token

我已经使用 GITKit 成功实现了用户身份验证，我想知道是否可以获得 OAuth 访问令牌以访问用户的 gmail 帐户、地址簿等...

各位大神能帮我解答一下吗？非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T03:53:06.197

如果我理解正确，[verifyAssertion](https://developers.google.com/identity-toolkit/v1/reference/relyingparty/verifyAssertion)有参数**returnOauthToken**，它将向它返回的数据添加 oauth 令牌。

# hibernate - 休眠插入一对多

> ID：10015609
> 
> 赞同：0
> 
> 时间：2012-04-04T16:42:14.607
> 
> 标签：hibernate

```
I have a class called A which has set of object of B. On inserting the A all the objects in the set must be inserted. But in my case only the object A is inserting not the sets. 
```

请注意，B 类也有在某些情况下可能为空的对象集合。关系：第 1 页---->* 类 Page.hbm.xml

```
 <hibernate-mapping>
      <class catalog="uml" name="com.project.lwuml.classdiagram.entity.Page" table="page">
        <id name="id" type="java.lang.Integer">
          <column name="id"/>
          <generator class="identity"/>
        </id>
        <property name="content" type="string">
          <column length="65535" name="content"/>
        </property>
        <set inverse="true" name="classboxes" table="classbox" lazy="true" fetch="select">
          <key>
            <column name="page_id" not-null="true"/>
          </key>
          <one-to-many class="com.project.lwuml.classdiagram.entity.Classbox"/>
        </set>
      </class>
    </hibernate-mapping> 
```

Classboxes.hbm.xml

```
<hibernate-mapping>
      <class catalog="uml" name="com.project.lwuml.classdiagram.entity.Classbox" table="classbox">
       <id name="id" type="java.lang.Integer">
          <column name="id"/>
          <generator class="identity"/>
        </id>
       <many-to-one class="com.project.lwuml.classdiagram.entity.Accessspecifiers" fetch="select" name="accessspecifiers">
          <column name="accessspecifiers_id" not-null="true"/>
        </many-to-one>
       <many-to-one class="com.project.lwuml.classdiagram.entity.Page" fetch="select" name="page">
          <column name="page_id" not-null="true"/>
        </many-to-one>
       <property name="className" type="string">
          <column length="128" name="className"/>
        </property>
       <set inverse="true" lazy="true" name="classmethods">
          <key>
            <column name="classbox_id" not-null="true"/>
          </key>
          <one-to-many class="com.project.lwuml.classdiagram.entity.Classmethod"/>
        </set>
       <set inverse="true" name="classdatamembers">
          <key>
            <column name="classbox_id" not-null="true"/>
          </key>
          <one-to-many class="com.project.lwuml.classdiagram.entity.Classdatamember"/>
        </set>
      </class>
   </hibernate-mapping> 
```

我正在使用 struts-spring-hibernate。任何机构都可以帮助我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:47:58.493

我相信您需要向多对一标签添加级联属性，以便在更新父级时保持子级。

```
 <many-to-one class="com.project.lwuml.classdiagram.entity.Page" fetch="select" cascade="save-update" name="page">
      <column name="page_id" not-null="true"/>
    </many-to-one> 
```

[http://pdngayan.blogspot.com/2010/02/cascade-attribute-in-hibernate-hbmxml.html](http://pdngayan.blogspot.com/2010/02/cascade-attribute-in-hibernate-hbmxml.html)

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html#mapping-declaration-manytoone](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html#mapping-declaration-manytoone)

# alfresco - 如何更改 Alfresco Share 上的存储库链接？

> ID：10015617
> 
> 赞同：6
> 
> 时间：2012-04-04T16:42:54.083
> 
> 标签：alfresco

在 Alfresco Share 中，当您单击工具栏中的“存储库”图标时，您将被带到：

/共享/页面/存储库

我想更改此链接以将用户带到他们的主文件夹，例如：

/share/page/repository#filter=path|/User%2520Homes/g/gi/gillespie/patrick.j.gillespie

我认为这将是一个简单的更改，但是，我正在努力弄清楚如何更改链接。有谁知道我编辑什么来更改该链接？

**更新**：所以我可以通过 share-config-custom.xml 文件更新链接，更改这一行：

```
<item type="link" id="repository">/repository</item> 
```

但我不确定如何在其中获取文件夹路径信息。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T20:58:24.480

这非常困难，所以我想我会发布我所做的，以防其他人有同样的问题。

如果您不使用散列主文件夹，则可以通过简单地更新 share-config.xml 或 share-config-custom.xml 来提供此功能，如下所示：

```
<item type="link" id="repository">/repository#filter=path|/User%2520Homes/{userid}</item> 
```

但是，如果您使用的是散列主文件夹，事情就会变得有点棘手。您无需修改​​任何 XML 文件，而是创建一个 Web 脚本来获取用户的主文件夹路径，然后修改共享模板文件以替换存储库的链接。下面是一个示例 Web 脚本以及执行此操作所需的对模板文件的修改。

hfp.get.desc.xml

```
<webscript>
    <shortname>Home Folder Path</shortname>
    <description>Description here.</description>
    <format default="json">argument</format>
    <url>/demo/get-home-folder-path</url>
    <authentication>user</authentication>
</webscript> 
```

hfp.get.js

此脚本向上遍历节点树并将文件夹的路径放在一起。

```
var myPerson = person;//used people.getPerson("patrick.j.gillespie") for testing
var currentNode = myPerson.properties.homeFolder;
var myDir = currentNode.properties["{http://www.alfresco.org/model/content/1.0}name"];
var count = 0;

while (count < 100) { // prevent an infinite loop
    currentNode = currentNode.parent;
    if (currentNode === undefined || currentNode === null) {break;}
    if (currentNode.properties === undefined) {break;}
    myDir = currentNode.properties["{http://www.alfresco.org/model/content/1.0}name"] + "/" + myDir;
    count++;
}
if (count === 100) { //something went wrong
    myDir = "";
}

model.homeFolder = myDir; 
```

hfp.get.json.ftl

```
{
   "homeFolder": "${homeFolder}"
} 
```

最后，您需要修改位于“share/WEB-INF/classes/alfresco/templates/org/alfresco/include”中的“alfresco-template.ftl”文件。在文件底部附近，添加以下代码。它将调用上述 Web 脚本来获取主文件夹路径，然后使用主文件夹链接更新存储库链接。

```
<script type="text/javascript">
    var callback = {
        success: function(res) {
            var data = YAHOO.lang.JSON.parse(res.responseText);
            var homeFolder = "";
            var hfIndex = data.homeFolder.indexOf("/User Homes/");
            if (hfIndex !== -1) {
                homeFolder = data.homeFolder.substr(hfIndex+12);
            }

            var repoLinks = $("a[title='Repository']");
            for (var ii = 0; ii < repoLinks.length; ii++) {
                repoLinks.get(ii).href = "/share/page/repository#filter=path|/User%2520Homes/" + homeFolder;
            }
        }
    };
    var sUrl = Alfresco.constants.PROXY_URI + "demo/get-home-folder-path";
    var postData = "";
    var getData = "";
    var request = YAHOO.util.Connect.asyncRequest('GET', sUrl+getData, callback, postData);
</script> 
```

可能有更好的方法，但我找不到。稍后我可能会对其进行改进，这应该主要用作起点，但我想我会发布它以防万一有人遇到类似问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T05:21:47.180

虽然不是很优雅，但我想您可以在链接上使用 Javascript onclick 处理程序附加参数或锚点。不太确定哪个 webscript 呈现工具栏，但那个可能是放置自定义的好地方。

# html - 如何显示两个颜色的区域？

> ID：10015622
> 
> 赞同：4
> 
> 时间：2012-04-04T16:43:18.647
> 
> 标签：html, css, web

从现在开始，在我工作的一个网站的设计中，我一直在使用图形来装饰标题部分，该部分由下侧的对角线划分为白色，上侧为透明。结果是这样的：

![在此处输入图像描述](../Images/19c98f1fe4a12f247afcb62124e34877.png)

如果我更改上部颜色，因为图像在其上部区域是透明的，效果看起来很完美：

![在此处输入图像描述](../Images/f0de528598408f6907e29f169051cc2b.png)

现在，我需要允许用户更改页面背景，这就是问题所在：

![在此处输入图像描述](../Images/a05e8b99f4c65c5e31c7b405e0b00706.png)

背景变为红色，但我用来装饰页眉的图像没有改变。

*有什么方法可以让用户在不破坏标题装饰的情况下更改背景？*

请注意，不能以不同颜色存储装饰图像的副本，因为我允许用户选择任何 24 位颜色。此外，由于多个用户可能访问同一个文件，因此无法像[此处说明](https://stackoverflow.com/questions/456044/can-i-swap-colors-in-image-using-gd-library-in-php)的那样实时更改图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T17:18:12.283

您可以尝试使用数据 URI 实时更改图像：[https ://developer.mozilla.org/en/data_URIs](https://developer.mozilla.org/en/data_URIs)

使用数据 URI，您可以执行以下操作：`<img src="data:image/png;base64,SGVsbG8sIFdvcmxkIQ%3D%3D" />`. 通过生成新图像并将`src`属性设置为新的数据 URI，可以在 JS 中动态更改图像。

不过，您将需要找到一种合适的格式来在 JS 中生成图像。我以前使用过 pnglib.js，它可以工作，但它可能比你想要的要慢。您可能需要测试一些不同的库和图像格式以查看哪些可以快速生成。另外，使图像尽可能小——应该只是对角线分割的区域，右边的区域可以用 a`div`代替。

或者，您可以通过脚本生成唯一的图像服务器端。编写一个脚本，该脚本接受背景颜色的 GET 参数并生成适当的图像（对于 PHP，您可以使用 GD 或 IMagick）。优点是服务器可以生成图像并将其发送给客户端，比客户端在 JS 中生成图像的速度更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T17:10:03.187

将以下内容添加到带有背景图像的 div 中：

```
position: absolute;
top: 0px;
right: 0px; 
```

当前的问题是背景不能与背景图像重叠您的 div。添加div 可以`position: absolute`为您的 div 提供某种“鬼盒”模型，从而允许主体的背景与其重叠。

PS：想玩也可以玩`z-index`。

# android - 向 Section String 添加任何内容会破坏 android SQLite DB 查询？

> ID：10015625
> 
> 赞同：0
> 
> 时间：2012-04-04T16:43:24.247
> 
> 标签：android, database, sqlite

我也是 Android 和 SQLite 的新手。我正在尝试编写一种方法，其中数据库查询从数据库中获取特定行。此版本的方法在 Selection 设置为 null 的情况下运行良好：

```
 public String anotherTry(){
        String[] columns = new String[]{ KEY_SDATE, KEY_SC, KEY_VE };
        Cursor cursor = db.query(DATABASE_TABLE, columns, null, null, null, null, null);
        String result = "";
        if (cursor != null){
            cursor.moveToFirst();
            result = result
        + cursor.getString(0) + "\n"
        + cursor.getString(1) + "\n"
            + cursor.getString(2) + "\n";
            return result;
        }
        return null;
    } 
```

但如果我在 Selection 参数中添加任何内容，它就会崩溃。例如：

```
 public String anotherTry(){
        String[] columns = new String[]{ KEY_SDATE, KEY_SC, KEY_VE };
        Cursor cursor = db.query(DATABASE_TABLE, columns, KEY_ROWID + "=" + "8", null, null, null, null);
        String result = "";

        if (cursor != null){
            cursor.moveToFirst();
            result = result
        + cursor.getString(0) + "\n"
        + cursor.getString(1) + "\n"
            + cursor.getString(2) + "\n";
            return result;
        }
        return null;
    } 
```

这里出了什么问题？我正在尝试显示第 8 行。我已经尝试了所有我能想到的格式组合：KEY_ROWID + "=" + "8"、KEY_ROWID = "8" 等等，但没有运气。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T17:22:42.530

尝试followin代码，我认为它会为你工作

```
Cursor cursor = db.query(DATABASE_TABLE, columns, KEY_ROWID+"=?", new String[] {"8"}, null, null, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T18:52:47.710

试试下面的代码：

```
Cursor cursor = db.query(DATABASE_TABLE, columns, KEY_ROWID + "=8", null, null, null, null); 
```

或者我认为 KEY_ID=8 处的数据库中不存在任何内容，因为当查询没有返回数据时会出现 CursorIndexOutOfBounds 异常。检查数据库是否存在于 KEY_ROWID=8

# c# - 如何制作“不包含”正则表达式

> ID：10015632
> 
> 赞同：-2
> 
> 时间：2012-04-04T16:43:45.250
> 
> 标签：c#, c++, regex, parsing, split

我在正则表达式创建中没有什么问题。预期输入：

```
blahblahblah, blahblahblah, 'blahblahblah', "blahblahblah, asdfd" 
```

我需要用逗号分隔单词到数组。但是，我不能使用拆分功能，因为逗号也可以出现在字符串中。因此，预期输出为：

```
arr[0] = blahblahblah
arr[1] = blahblahblah
arr[2] = 'blahblahblah'
arr[3] = "blahblahblah, asdfd" 
```

有人知道一些正则表达式或其他可以帮助我并给我类似输出的解决方案吗？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:54:35.520

我不确定这是最优化的，但它在[http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester 上从您的测试用例中产生了正确的输出。灰烬](http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx)：

```
(?>"[^"]*")|(?>'[^']*')|(?>[^,\s]+) 
```

**C# 字符串版本：**

```
@"(?>""[^""]*"")|(?>'[^']*')|(?>[^,\s]+)" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T16:58:23.330

一种可能的方法是用逗号分隔（使用`string.Split`，而不是 RegEx），然后迭代结果。对于包含 0 或 2`'`或`"`字符的每个结果，将其添加到新列表中。当结果包含 1 `'`or`"`时，重新加入后续项目（添加逗号）直到结果具有 2 `'`or `"`，然后将其添加到新列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T17:13:37.813

考虑到有限的问题，你可以做这样的事情。正则表达式更短，可能更简单。

```
string line = <YourLine>
var result = new StringBuilder();
var inQuotes = false;

foreach(char c in line)
{
    switch (c)
    {
        case '"':
            result.Append()
            inQuotes = !inQuotes;
            break;

        case ',':
            if (!inQuotes)
            {
                yield return result.ToString();
                result.Clear();
            }

        default:
            result.Append()
            break;                
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T23:00:20.567

与其滚动您自己的 CSV 解析器，不如考虑使用.NET Framework 附带的标准、开箱即用的[TextFieldParser 类。](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx)

或者，使用[Microsoft Ace](http://www.microsoft.com/download/en/details.aspx?id=13255)和 OleDbDataReader 通过 ADO.NET 直接读取文件。可以在许多其他帖子中找到示例，[例如这个](https://stackoverflow.com/questions/5182767/microsoft-ace-oledb-12-0-csv-connectionstring)。[CodeProject 上](http://www.codeproject.com/Articles/27802/Using-OleDb-to-Import-Text-Files-tab-CSV-custom)有这篇较旧的帖子，您可以将其用作示例。只需确保您引用的是最新的 Ace 驱动程序而不是旧`Jet.OLEDB.4.0`驱动程序

从长远来看，这些选项比任何自定义构建的文件解析器更容易维护。他们已经知道如何处理围绕着文档不完整的 CSV 格式的许多极端情况。

# css - css 重置请不要重置内容样式

> ID：10015633
> 
> 赞同：0
> 
> 时间：2012-04-04T16:43:45.310
> 
> 标签：css, css-reset

我正在使用 meyerweb css 重置。它工作正常，但它重置了所有默认样式，即在正文和模板结构（`<body>`、侧边栏等）或主要内容（文章）中

这是个大问题！因为我已经在编辑`TinyMCE`器`strong`（`italic`

我该如何解决？我可以说浏览器重置所有，期望在 a`<table>`或`<div>`具有特定类或 id 的标签（例如`#content`）？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T17:06:18.337

您遇到了使用重置表的缺点之一，因为它们会重置所有内容。

您可能需要考虑使用完全重置的替代方法，例如[normalize.css](http://necolas.github.com/normalize.css/)。这背后的想法是，与其让所有浏览器从头开始，不如让所有浏览器都达到相同的基线。从网站：

> 它有什么作用？
> 
> *   与许多 CSS 重置不同，保留有用的默认值。
> *   规范化各种 HTML 元素的样式。
> *   更正错误和常见的浏览器不一致。
> *   通过细微的改进提高可用性。
> *   使用详细注释解释代码的作用。

这可能（或可能不会）比 Meyer 重置更适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T16:58:02.367

在我看来，解决这个问题的最好方法是在重置后重新定义样式，而不是从重置中删除它们。虽然您不应该看到上面定义的元素有任何问题，但删除 ul 和 li 定义之类的内容可能会导致跨浏览器的行为非常不一致。在重置后重新定义这些元素将确保跨浏览器的一致性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T17:08:19.667

使用[http://CSSesta.tk](http://CSSesta.tk)

[它受到 YUI、Eric Meyer 和 Boilerplate 的影响，但不影响任何典型的样式方面]

它有 6 个选项被注释掉。**（您只需要修改至少选项 3）**如有必要，您可以更改其他内容，其余部分应如预期（通常），除非您正在制作一个变成汽车的网站。（例如强制垂直滚动，行高、字体大小由您自行决定）

CSSesta 中的 HTML5 元素“当前”比 Eric Meyers 更新，并且可能会成为最常维护的重置表，我知道这一点是因为我将对其进行更新。

（试一试，如果您有任何问题，请告诉我，我会查看您的默认设置并在两者之间进行处理）

# clojure - 在单独的 Clojure 命名空间中调用函数

> ID：10015636
> 
> 赞同：6
> 
> 时间：2012-04-04T16:43:46.603
> 
> 标签：clojure

如何从另一个命名空间 bene-cmp.core 调用一个 Clojure 命名空间 bene-csv.core 中的函数？我尝试了各种风格的 :require 和 :use 都没有成功。

这是 bene-csv 中的函数：

```
(defn ret-csv-data
    "Returns a lazy sequence generated by parse-csv.
     Uses open-csv-file which will return a nil, if
     there is an exception in opening fnam.

     parse-csv called on non-nil file, and that
     data is returned."

    [fnam]
    (let [  csv-file (open-csv-file fnam)
            csv-data (if-not (nil? csv-file)
                         (parse-csv csv-file)
                         nil)]
            csv-data)) 
```

这是 bene-cmp.core 的头文件：

```
(ns bene-cmp.core
   .
   .
   .
  (:gen-class)
  (:use [clojure.tools.cli])
  (:require [clojure.string :as cstr])
  (:use bene-csv.core)
  (:use clojure-csv.core)
  .
  .
  . 
```

(bene-cmp.core) 中的调用函数——目前是一个存根

```
defn fetch-csv-data
    "This function merely loads the two csv file arguments."

    [benetrak-csv-file gic-billing-file]
        (let [benetrak-csv-data ret-csv-data])) 
```

如果我修改 bene-cmp.clj 的标题

```
 (:require [bene-csv.core :as bcsv]) 
```

并将调用更改为 ret-csv-data

```
(defn fetch-csv-data
    "This function merely loads the two csv file arguments."

    [benetrak-csv-file gic-billing-file]
        (let [benetrak-csv-data bcsv/ret-csv-data])) 
```

我收到这个错误

引起：java.lang.RuntimeException：没有这样的变量：bcsv/ret-csv-data

那么，我该如何调用 fetch-csv-data 呢？谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T16:48:09.943

您需要调用该函数，而不仅仅是引用 var。

如果你有这个`ns`：

```
(:require [bene-csv.core :as bcsv]) 
```

然后你需要在命名空间/别名限定的 var 周围加上括号来调用它：

```
(let [benetrak-csv-data (bcsv/ret-csv-data arg)]
  ; stuff
  ) 
```

# android - ListAdapter 过滤器不是使用字符串吗？

> ID：10015638
> 
> 赞同：14
> 
> 时间：2012-04-04T16:44:01.770
> 
> 标签：android, listview, filter, listadapter

似乎 an [`Adapter`](http://developer.android.com/reference/android/widget/Adapter.html)that is的用例是按用户在 an 中输入的or[`Filterable`](http://developer.android.com/reference/android/widget/Filterable.html)进行过滤，但这真的是平台为过滤s 提供的唯一标准吗？`String``CharSequence`[`EditText`](http://developer.android.com/reference/android/widget/EditText.html)[`Adapter`](http://developer.android.com/reference/android/widget/Adapter.html)

如果我有一个可以以其他方式分类的对象的支持数据结构怎么办？例如，如果我有一个具有`enum`属性的 Shirt 对象列表，该`color`怎么办？用户应该能够从可用的列表中过滤衬衫列表`color`。[`Filter`](http://developer.android.com/reference/android/widget/Filter.html)作为一名优秀的应用程序开发人员，我想使用内置过滤机制的平台，但我能找到的只有[`filter (CharSequence constraint)`](http://developer.android.com/reference/android/widget/Filter.html#filter%28java.lang.CharSequence%29). 我肯定错过了什么。我看到在我自己的 custom 中实现这个过滤机制是多么简单[`BaseAdapter`](http://developer.android.com/reference/android/widget/BaseAdapter.html)，但感觉应该有一些内置的方法来做自定义过滤器。任何人？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-04T15:05:20.513

您可以创建自己的 FilterAdapter 并带来自己的逻辑，例如，这个处理带有两个字符串的对象并管理过滤器：

```
public class TwoWordsFilter extends Filter {
ArrayList<BranchData> branchDatas = new ArrayList<BranchData>();
private BranchDataAdapter branchDataAdapter;
public TwoWordsFilter(ArrayList<BranchData> branchDatas,BranchDataAdapter branchDataAdapter) {
    this.branchDatas = branchDatas;
    this.branchDataAdapter=branchDataAdapter;
}

@Override
protected FilterResults performFiltering(CharSequence constraint) {
    FilterResults results = new FilterResults();
    if (constraint==null || constraint.length()==0){
        results.values=branchDatas;
        results.count=branchDatas.size();
    }else {
        List<BranchData> mBranchDatas=new ArrayList<BranchData>();
        for (BranchData branchData : branchDatas) {
            if (branchData.getBranch_name().trim().toLowerCase().startsWith(constraint.toString().trim().toLowerCase()) ||
            branchData.getCity().trim().toLowerCase().startsWith(constraint.toString().trim().toLowerCase())){
                mBranchDatas.add(branchData);
            }
        }
        results.values=mBranchDatas;
        results.count=mBranchDatas.size();

    }
    return results;
}

@Override
protected void publishResults(CharSequence constraint, FilterResults results) {
    if (results.count == 0)
        branchDataAdapter.notifyDataSetInvalidated();
    else {
        branchDataAdapter.setBranchDatas((ArrayList<BranchData>) results.values);
        branchDataAdapter.notifyDataSetChanged();
    }
} 
```

}

在你的适配器中放这个：

```
@Override
public Filter getFilter() {
    if (twoWordsFilter==null){
        twoWordsFilter=new TwoWordsFilter(branchDatas,this);
    }
    return twoWordsFilter;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-25T06:10:01.407

在 Android 中，您的适配器可以**实现**Filterable（可能与您搜索的过滤器相同）
=> 这是您的数据与过滤器之间的连接。
这是链接 [*您应该看到标记的答案*] [List View Filter Android](https://stackoverflow.com/questions/14663725/list-view-filter-android)

# unity3d - Unity3d 和 CityEngine

> ID：10015643
> 
> 赞同：0
> 
> 时间：2012-04-04T16:44:16.107
> 
> 标签：unity3d, openstreetmap, fbx

我使用 openstreetmap 数据（osm 文件）在 CityEngine 中创建了一个小城市，其中包含每个节点的纬度、经度和其他一些详细信息。现在我想将此信息导出到 Unity3d，所以我将城市导出为 fbx 文件。此时一切正常。

问题是......在cityEngine中每个块/形状代表一个不同的对象，但是在unity3d中这不会发生。数据按纹理（或类似的东西）划分。但我需要识别每个块/形状，或者至少我需要知道它们的正确位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:46:35.297

1.  您可以在导出器中选择以 xyz 原点为中心导出场景（导出器选项）。

2.  导出器有许多网格粒度设置。默认情况下，网格按材质合并。但是您当然也可以为每个形状导出一个对象等。

请访问 CityEngine 论坛了解更多信息：

[http://forums.arcgis.com/forums/45-Solutions](http://forums.arcgis.com/forums/45-Solutions)

[http://forums.arcgis.com/threads/51437-Export-Mesh-and-Material-Granularity?highlight=cityengine+unity](http://forums.arcgis.com/threads/51437-Export-Mesh-and-Material-Granularity?highlight=cityengine+unity)

# javascript - 为什么当我说“Step In”时 Firebug 没有进入我的脚本？

> ID：10015644
> 
> 赞同：1
> 
> 时间：2012-04-04T16:44:16.930
> 
> 标签：javascript, html, firebug

我正在尝试生成一个页面，其中要显示的基本数据可以以不同的方式解释。所以我有了一种数据格式，以及一些不同的 JS 脚本来从数据中生成 HTML。每个脚本都包含一个称为`BuildView`输入数据、解析数据并用于`document.write`输出 HTML 的函数。服务器端脚本将正确的数据和用于适当视图的脚本包含插入页面。很简单，对吧？

除了页面中没有显示任何内容。所以我决定尝试用 Firebug 调试它。这是页面的基本结构：

```
<!DOCTYPE blah blah blah>
<html>
<head>blah blah blah</head>
<body>
<script type="text/javascript" src="/view.js"></script>
<div id='main-page'>
  <h1 align="center">TITLE</h1>

  <p align="left"><strong>Data: </strong>
    <div id="data-view">
      <script type="text/javascript">
        BuildView('data from server');
      </script>
    </div>
  </p>
</div>
</body></html> 
```

`data-view`div内没有显示任何内容。我加载了 Firebug，切换到脚本选项卡，在调用上放置一个断点`BuildView`，然后重新加载页面。它停在断点处，我点击`F11`(Step Into)，希望自己能在`BuildView`脚本中环顾四周，看看发生了什么。相反......我什么也没得到。它只是跨过它并完成了页面的渲染。没有报告错误，但实际上没有发生任何事情。

如果你不知道，我以前没有使用过 Firebug。我错过了什么？如何让脚本调试器实际调试到这个脚本中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:21:12.433

试试[谷歌浏览器的调试器](http://code.google.com/chrome/devtools/docs/scripts.html)。Firebug 在显示动态加载的文件时存在问题。

另一件要尝试的事情是设置 firebug 也显示 eval 脚本。从播放/暂停按钮旁边的按钮

![在此处输入图像描述](../Images/dff7562416a4d8d9da3c0976a8f5e148.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T17:02:04.767

1.  确保脚本实际正在加载。
2.  在函数中放置一个`console.log()`or`alert()`以确保它实际上正在触发。
3.  div 中的`<script></script>`标签，移动到`</body>`标签的末尾。
4.  尝试`BuildView()`从控制台运行以查看它是否在页面加载后工作。

让我知道那些进展如何。

# sql - 如何找出返回不同结果的两个查询之间的差异

> ID：10015645
> 
> 赞同：1
> 
> 时间：2012-04-04T16:44:24.527
> 
> 标签：sql, database, select

我有下面的查询，运行时它说有 325 行受到影响。但是，如果我只运行查询的 SELECT 部分，则会返回 331 个结果。这意味着当整个查询运行时，只有 325 行得到更新，而不是 331。我不确定差异可能是什么。我希望它更新它在查询的 SELECT 部分中找到的所有行

此更新导致更新了 325 行

```
UPDATE A
SET
A.status = X.c
FROM 
tableA A INNER JOIN (
   SELECT  tableB.c_id, COUNT(*) as c
   FROM    tableB
   LEFT JOIN tableC
        ON tableB.c_id = tableC.c_id
   WHERE tableC.c_id != tableC.c_id_update
   GROUP BY tableB.c_id) X
ON A.c_id = X.c_id 
```

并且仅运行查询的 SELECT 部分会返回 331 行

```
SELECT  tableB.c_id, COUNT(*) as c
FROM    tableB
LEFT JOIN tableC
    ON tableB.c_id = tableC.c_id
WHERE tableC.c_id != tableC.c_id_update
GROUP BY tableB.c_id 
```

我真的很想弄清楚为什么有 6 (331-325) 条记录没有更新？！谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:48:16.117

显然，您的内部 select 语句返回 331 行，其中 325 行已成功加入`tableA`via `ON A.c_id = X.c_id`。因此，大概有 6 行从您的内部选择返回的行与 in 的行不匹配`tableA`，因此被删除（因为它不是 OUTER JOIN）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T16:49:16.010

您对 TableA 的添加可能会删除 6 条记录。像这样寻找它：

```
select x.* from
(
SELECT  tableB.c_id, COUNT(*) as c
FROM    tableB
LEFT JOIN tableC
    ON tableB.c_id = tableC.c_id
WHERE tableC.c_id != tableC.c_id_update
GROUP BY tableB.c_id
) X
left join tableA A on A.c_id = X.c_id
where A.C_id is null 
```

本质上这是一个左连接，你只返回没有左连接的行。它应该告诉您 TableA 中缺少哪些 6 行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T16:48:11.123

现在尝试：

```
select count(*)
FROM 
tableA A INNER JOIN (
   SELECT  tableB.c_id, COUNT(*) as c
   FROM    tableB
   LEFT JOIN tableC
       ON tableB.c_id = tableC.c_id
   WHERE tableC.c_id != tableC.c_id_update
   GROUP BY tableB.c_id) X
ON A.c_id = X.c_id 
```

不同之处在于`inner join`

# java - 模拟 TCP 发送中的背压

> ID：10015647
> 
> 赞同：7
> 
> 时间：2012-04-04T16:44:39.913
> 
> 标签：java, netty, tcp-ip

我正在编写一些 java TCP/IP 网络代码（客户端-服务器），其中我必须处理发送比接收快得多的场景，从而在一端阻止发送操作。（因为发送和接收缓冲区已满）。为了设计我的代码，我想先尝试一下这些情况，看看客户端和服务器在不同负载下的行为。但是我无法适当地设置参数来实现这种背压。我尝试将值设置`Socket.setSendBufferSize(int size)`为`Socket.setReceiveBufferSize(int size)`较小的值 - 希望很快就会填满，但我可以看到发送操作完成，而无需等待客户端消耗已经写入的足够数据。（这意味着小的发送和接收缓冲区大小没有影响）

我采取的另一种方法是使用 Netty 和 set `ServerBootstrap.setOption("child.sendBufferSize", 256);`，但即使这样也没多大用处。谁能帮我理解我做错了什么/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T17:24:07.097

我认为`Channel.setReadable`是你需要的。setReadable 告诉 netty 临时暂停从缓冲区中的系统套接字读取数据，当缓冲区已满时，另一端将不得不等待。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T17:24:37.753

缓冲区的最小大小取决于操作系统，通常约为 8 KB。

```
public static void main(String... args) throws IOException, InterruptedException {
    ServerSocketChannel ssc = ServerSocketChannel.open();
    ssc.bind(new InetSocketAddress(0)); // open on a random port
    InetSocketAddress remote = new InetSocketAddress("localhost", ssc.socket().getLocalPort());
    SocketChannel sc = SocketChannel.open(remote);
    configure(sc);
    SocketChannel accept = ssc.accept();
    configure(accept);

    ByteBuffer bb = ByteBuffer.allocateDirect(16 * 1024 * 1024);
    // write as much as you can
    while (sc.write(bb) > 0)
        Thread.sleep(1);
    System.out.println("The socket write wrote " + bb.position() + " bytes.");
}

private static void configure(SocketChannel socketChannel) throws IOException {
    socketChannel.configureBlocking(false);
    socketChannel.socket().setSendBufferSize(8);
    socketChannel.socket().setReceiveBufferSize(8);
} 
```

在我的机器上打印

```
The socket write wrote 32768 bytes. 
```

这是发送和接收缓冲区的总和，但我怀疑它们都是 16 KB

# c++ - 具有模板化参数的模板函数的类型推断

> ID：10015649
> 
> 赞同：1
> 
> 时间：2012-04-04T16:44:48.490
> 
> 标签：c++, templates, generics, types, type-inference

编写模板函数的形式是什么（如果有的话），其中参数是模板容器？

例如，我想编写一个通用总和，它适用于任何可以迭代的容器。鉴于下面的代码，我必须编写例如`sum<int>(myInts)`。我宁愿只写`sum(myInts)`和从 myInts 包含的类型推断的类型。

```
/**
 @brief  Summation for iterable containers of numerical type
 @tparam cN                         Numerical type (that can be summed)
 @param[in]  container              container containing the values, e.g. a vector of doubles
 @param[out] total                  The sum (i.e. total)
 */
template<typename N, typename cN>
N sum(cN container) {
    N total;
    for (N& value : container) {
        total += value;
    }
    return total;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T16:49:31.077

我写了这样一个函数

```
template<typename IT1>
typename std::iterator_traits<IT1>::value_type //or decltype!
function(IT1 first, const IT1 last)
{
    while(first != last)
    {
        //your stuff here auto and decltype is your friend.
        ++first;
    }
    return //whatever
} 
```

这样，它不仅可以与容器一起使用，例如 ostream 迭代器和目录迭代器。

打电话喜欢

```
function(std::begin(container), std::end(container)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T16:53:00.657

这即使很麻烦，也可以在 C++11 中解决问题：

```
template <typename C>
auto sum( C const & container ) 
     -> std::decay<decltype( *std::begin(container) )>::type 
```

另一种选择是使用与累积相同的结构：让调用者传递一个带有初始值的额外参数，并使用它来控制表达式的结果：

```
template<typename N, typename cN>
N sum(cN container, N initial_value = N() ) 
```

(By providing a default value, the user can decide to call it with a value or else provide the template argument --but this requires the type N to be default constructible)

# sql - 不是 Oracle 中的 GROUP BY 表达式错误

> ID：10015650
> 
> 赞同：1
> 
> 时间：2012-04-04T16:44:50.770
> 
> 标签：sql, oracle, group-by

我是 Oracle 的新手，我想知道是否有人可以告诉我我的 GROUP BY 表达式有什么问题。我已经尝试删除 GROUP BY 中的几个列，但仍然没有任何效果。还有另一个查询与此共享一个 UNION，但我已将其删除以减少阅读。

```
 -- Selection Criteria: Date Range = 12/01/2011 to 12/31/2011; AO Transaction Fee = 4.95%

  SELECT 
    SUBSTR(Transaction_Date,1,10) Transaction_Date
, Item_Number
, REGEXP_REPLACE(SUBSTR(Item_Or_Adj_Description,1,50)
,'([^[:print:]])',' ') AS Item_Or_Adj_Desctription
, Customer_Type
, Document_ID
, Dealer_ID
, Sales_Type
, Item_Quantity
, Total_Fee
, State_Fee
, Transaction_Fee
, AO_Fee
, WDFW_Fee 

  FROM 
  ( 
    -- Sales Transactions 
   SELECT /*+ index(IT ITEM_X4) */ 
      TO_CHAR(IT.it_status_set_date - 2/24, 'MM/DD/YYYY') AS Transaction_Date,  -- Pacific Time
      TO_NUMBER(IT.ic_rcn) AS Item_Number, IT.it_descr AS Item_Or_Adj_Description, 
      DT.di_name AS Customer_Type, IT.it_docid AS Document_ID, IT.ag_id AS Dealer_ID, 
      CASE WHEN UPPER(IST.is_name) = 'ACTIVE' THEN 'SALE' ELSE IST.is_name END AS Sales_Type, 
      NVL(IT.it_quantity * CASE WHEN IT.is_id = 'AC' THEN 1 WHEN IT.is_id = 'DU' THEN 1 ELSE -1 END, 0) AS Item_Quantity,  -- Dups = 1
      NVL(IT.it_state_fee * CASE WHEN IT.is_id IN ('DC','SC') THEN -1.00 ELSE 1.00 END, 0.00) + 
    NVL(IT.it_other_fee * CASE WHEN IT.is_id IN ('DC','SC') THEN -1.00 ELSE 1.00 END, 0.00) AS Total_Fee, 
      NVL(IT.it_state_fee * CASE WHEN IT.is_id IN ('DC','SC') THEN -1.00 ELSE 1.00 END, 0.00) AS State_Fee, 
      NVL(IT.it_other_fee * CASE WHEN IT.is_id IN ('DC','SC') THEN -1.00 ELSE 1.00 END, 0.00) AS Transaction_Fee, 
      CASE WHEN IT.it_other_fee IS NULL OR IT.it_other_fee = 0.00 THEN 0.00 
        ELSE ROUND(IT.it_state_fee * CASE WHEN IT.is_id IN ('DC','SC') THEN -1.00 ELSE 1.00 END * (4.95 / 100), 2) 
      END AS AO_Fee, 
      CASE WHEN IT.it_other_fee IS NULL OR IT.it_other_fee = 0.00 THEN 0.00 
        ELSE (IT.it_other_fee * CASE WHEN IT.is_id IN ('DC','SC') THEN -1.00 ELSE 1.00 END) - 
          ROUND((IT.it_state_fee * CASE WHEN IT.is_id IN ('DC','SC') THEN -1.00 ELSE 1.00 END * (4.95 / 100)), 2) 
      END AS WDFW_Fee 
   FROM ITEM IT 
   JOIN DISCOUNT_TYPE DT ON DT.di_id = IT.di_id 
   JOIN ITEM_STATUS_TYPE IST ON IST.is_id = IT.is_id 
   WHERE IT.it_status_ind = 'A' -- Include active ITEM rows only. 
   AND (IT.is_id IN ('AC','DC','SC') OR (IT.is_id = 'DU' AND NVL(IT.it_state_fee, 0) != 0)) -- Exclude voids, exchanges, and false duplicates.
   AND IT.ic_rcn != '999' -- Exclude Dealer Fees. 
   AND IT.it_status_set_date BETWEEN TO_DATE('12/01/2011 00:00:00', 'MM/DD/YYYY HH24:MI:SS') + 2/24  -- Pacific Time
                 AND TO_DATE('12/31/2011 23:59:59', 'MM/DD/YYYY HH24:MI:SS') + 2/24 )

  GROUP BY TO_DATE(SUBSTR(Transaction_Date,1,10), 'MM/DD/YYYY')
           , Item_Number
           , Item_Or_Adj_Description
           ,Customer_Type
           ,Document_ID
           ,Dealer_ID
           ,Sales_Type
           ,Item_Quantity;
          -- ,Total_Fee
         --  ,State_Fee
          -- ,Transaction_Fee
        --  ,AO_Fee
        --  ,WDFW_Fee 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T16:51:04.823

您必须删除选择列表中的列，而不是*group by子句中的列，或者您可能会在**group by*子句中添加其他列。选择列表中的所有列都必须在*group by*子句中提及，或者必须是聚合函数，如 min、max 或 count。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T16:52:59.023

您似乎没有在查询中进行任何聚合（列表中的所有列都不`SELECT`是聚合函数，如`COUNT`or `MAX`）。鉴于此，您应该完全删除该`GROUP BY`子句。

如果像 phlogratos 建议的那样，您尝试使用 a`GROUP BY`来消除重复项，那么您做错了什么。最常见的问题是查询本身不应该生成重复的行，但是缺少某些连接条件或谓词，从而导致行重复。如果是这种情况，您最好解决根本问题并添加缺少的谓词或缺少的连接。如果你真的希望内联视图返回重复的行并且你想删除它们，你最好做一个`SELECT DISTINCT <<list of columns>>`with no`GROUP BY`子句。

# linux - 在 Debian-Linux 服务器中安装问题

> ID：10015654
> 
> 赞同：2
> 
> 时间：2012-04-04T16:45:05.837
> 
> 标签：linux, debian, kyotocabinet

我正在尝试使用[此](http://fallabs.com/kyotocabinet/spex.html)命令在 Debian-Linux 服务器中安装[Kyoto Cabinet 。](http://fallabs.com/kyotocabinet/)但是，当我执行

> 。/配置

命令，它给出了错误

> -bash：./configure：/bin/sh^M：错误的解释器：没有这样的文件或目录

任何人都可以帮助我为什么会发生这种情况以及如何解决这个问题？或者知道为什么会发生此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T17:08:10.760

由于 ^M 字符，配置文件可能使用 Windows 样式的行尾。

尝试将其转换为使用 UNIX 风格：

```
dos2unix configure 
```

或在 vi 类型中：

```
:set fileformat=unix 
```

而不是保存脚本并重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T01:11:18.170

kyotocabinet 现在打包在 debian sid 中

apt-get install libkyotocabinet-dev --install-suggests

您可能需要将其添加到 /etc/apt/sources.list

deb [http://cdn.debian.net/debian](http://cdn.debian.net/debian) sid 主要

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-10T10:25:01.000

对我来说，京都内阁（KC）的初始安装是不成功的，因为最小的 Centos 6 中缺少 C++ 和 zlib。最终，这些遗漏被发现并安装了 KC（来自[http://skipperkongen.dk/2013/02/的初始说明14/给-京都内阁-a-go/](http://skipperkongen.dk/2013/02/14/giving-kyotocabinet-a-go/)）：

yum -y 安装 gcc-c++ yum -y 安装 zlib-devel

wget [http://fallabs.com/kyotocabinet/pkg/kyotocabinet-1.2.76.tar.gz](http://fallabs.com/kyotocabinet/pkg/kyotocabinet-1.2.76.tar.gz) tar xzvf kyotocabinet-1.2.76.tar.gz cd kyotocabinet-1.2.76 ./configure && make && make install # 需要一些时间！

测试京都内阁：kcprototest wicked 5

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-10T10:41:54.993

要安装 Python 的 Kyoto Cabinet API（来自其他人的初始说明）：

测试京都内阁：kcprototest wicked 5

以 root 身份，当然： cd $HOME

yum -y 安装 python-devel

wget [http://fallabs.com/kyotocabinet/pythonlegacypkg/kyotocabinet-python-legacy-1.18.tar.gz](http://fallabs.com/kyotocabinet/pythonlegacypkg/kyotocabinet-python-legacy-1.18.tar.gz)

tar xzvf kyotocabinet-python-legacy-1.18.tar.gz

cd kyotocabinet-python-legacy-1.18

python setup.py install # 可能需要一些时间！

从 Kyoto Cabint 网站创建并运行一个测试程序，例如 testkc.py。它应该运行正常。

您可能想让 KC 在根目录之外可用。创建一个新文件：vi /etc/ld.so.conf.d/usrlocal.conf

并添加行：/usr/local/lib

然后运行 ​​ldconfig -v

将 testkc.py 移动到用户帐户并在那里运行它；应该没问题

# wordpress - 如何禁止编辑 wp-admin 中的页面标题？

> ID：10015655
> 
> 赞同：7
> 
> 时间：2012-04-04T16:45:08.307
> 
> 标签：wordpress, title, capability

我安装了一个 wp-network，用户可以在每个站点中创建页面。

这些页面中的每一个都在主菜单中占有一席之地，并且只有一个用户有权创建所有此菜单。

我想创建一个用户只能编辑页面的内容，但不能编辑标题。

如何禁用要从特定用户的管理菜单编辑的页面标题，或者（更好）功能？

我认为只有一种可能性，那就是编辑 admin css 来隐藏标题文本框，但我有两个问题：

1.  我不喜欢 css-hide 东西。
2.  1.  我不知道管理员CSS在哪里。
    2.  我知道 php，但不知道如何为元素添加 css 隐藏功能。

![我希望它如何](../Images/d933e741e3650e252527327c9baf5589.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T19:04:28.577

您绝对应该使用 CSS 来隐藏 div#titlediv。您会希望标题显示在标记中，以便表单提交、验证等继续顺利进行。

实施此解决方案需要了解的一些要素：

1.  [current_user_can()](http://codex.wordpress.org/Function_Reference/current_user_can)是一个布尔函数，用于测试当前登录用户是否具有能力或角色。
2.  您可以通过 admin_head 操作在线添加样式，或者如果您想将其存储在单独的 CSS 文件中，可以使用[wp_enqueue_style 。](http://codex.wordpress.org/Function_Reference/wp_enqueue_style)

这是一个可以完成这项工作的代码片段，将其放置在您认为合适的位置，functions.php 在您的主题中有效。如果您在网络中使用不同的主题，我会将其放入网络激活插件中：

```
<?php

add_action('admin_head', 'maybe_modify_admin_css');

function maybe_modify_admin_css() {

    if (current_user_can('specific_capability')) {
        ?>
        <style>
            div#titlediv {
                display: none;
            }
        </style>
        <?php
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-05T22:46:58.253

我解决了这个问题，只要有人使用搜索引擎来到这里，我就会发布解决方案。

做了一些研究，我找到了插入标题文本框的代码部分，并且我找到[了一个函数来了解用户是否具有某种能力](http://codex.wordpress.org/Function_Reference/current_user_can)。

添加标题文本框的文件是/wp-admin/edit-form-advanced.php。这是文本框之前的行

```
if ( post_type_supports($post_type, 'title') ) 
```

我把它改成了这个

```
if ( post_type_supports($post_type, 'title') and current_user_can('edit_title') ) 
```

这样，仅当用户具有称为“edit_title”的功能时才添加文本框

当这个 IF 块在几行之后结束时，我添加了：

```
else echo "<h2>".esc_attr( htmlspecialchars( $post->post_title ) )."</h2>"; 
```

当用户没有“edit_title”能力时，查看页面标题但不编辑它。

然后我已经安装了一个[插件来编辑用户功能和角色](http://wordpress.org/extend/plugins/user-role-editor/)，它可以帮助我创建一个新功能（edit_title）并将其分配给我想要的角色。

# objective-c - mmap 数据如何与对象分配一起工作？

> ID：10015658
> 
> 赞同：3
> 
> 时间：2012-04-04T16:45:30.427
> 
> 标签：objective-c, cocoa, memory-management, mmap, virtual-memory

`mmap()`我对如何在 iOS 或 OSX 上使用框架感到有些困惑。

如果一个文件被映射到虚拟内存，`mmap()`并且从它请求数据，内核将数据中的数据页分配到 RAM。这实际上如何影响创建对象的方式？

`alloc`如果通常使用/创建对象`init`，则分配内存块并启动对象。但是，如果数据驻留在虚拟内存中，在`mmap`'ed 文件中呢？是否`alloc`需要在对象上调用？为对象分配的内存是否被虚拟内存中的数据填充？或者是否跳过`alloc`调用并只是将指针传递给虚拟内存中的数据？

例如图像或声音文件，如果我知道文件在虚拟内存中的位置，我将如何设置对象？

如果分配数据，如果数据已经分页到 RAM 中，它不会被复制吗？

我在想，使用来自虚拟地址的内存将消除在堆上分配的需要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:13:59.653

如果您只有一个对象存储在 mmaped 空间中，那么您只需跳过分配并直接使用该位置。但是，通常您将拥有多个对象，现在您将自己管理它。通常，它的至少一部分将以固定的方式布局，以便两个进程都知道在哪里可以找到东西。代替指针，您可以从竞技场开始使用偏移量，因为这在两个进程的地址空间中都有效。

本质上，您获得了一大块内存，就好像您完成了一个大的 malloc/alloc 并且您可以在其中玩耍。

如果你有，说

```
void *p = mmap( <appropriate arguments> ); 
```

并且您想将 foo 类型的对象放在偏移量 200 处，您会说

```
foo *f = (foo *)p+200; 
```

现在您可以以所有正常方式操作 f ，但 f 不包含任何指向映射空间的指针。将偏移量替换为此类指针通常是一种很好的纪律，然后当您需要跟随一个时，您可以将其转换为指针（通过添加 p）。

# php - PHP 从对象属性创建一个多维数组

> ID：10015669
> 
> 赞同：1
> 
> 时间：2012-04-04T16:46:07.977
> 
> 标签：php, arrays, object

我在这里的处境非常艰难。

这些对象有一个数组

```
ProductionItem Object
(
    [customer] => Customer Object
        (
            [customer_id] =>24
            [company_type] => Limited Company
            [date_created] => 2009-01-28 15:55:50
            [vat] => 
            [status] => 1
            [account_number] => 590893
        )

    [woi_id] => 67017
    [od_id] => 7154
    [pd_id] => 1112
    [od_qty] => 0
    [od_color] => TEAL BLUE
) 
```

我正在尝试将其转换为类似于此结构的多维数组

```
$allOrders[24] = array (
        objects[0] => array(
                'woid_ud' = 67017,
                'od_id' = 7154,
                'pd_id' = 1112,
                'od_qty' = 0,
                'od_color' = 'TEAL BLUE'
                ),
        objects[1] => array(
                'woid_ud' = 75839,
                'od_id' = 5890,
                'pd_id' = 2344,
                'od_qty' = 0,
                'od_color' = 'TEAL GRAY'
                )
        ) 
```

有什么我想念的吗，这真的很容易做到吗？请给我建议。我尝试遍历这些对象，但它仍然不起作用并且看起来很丑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:53:13.080

您应该使用该功能[`get_object_vars`](http://php.net/manual/en/function.get-object-vars.php)。

```
function object_to_array($obj){
    if(!is_object($obj)){
       return $obj;
    }
    $data = array();
    foreach(get_object_vars($obj) as $k=>$v){
        $data[$k] = object_to_array($v);
    }
    return $data;
} 
```

# javascript - 无法实现动态高度 jQuery 书签

> ID：10015671
> 
> 赞同：2
> 
> 时间：2012-04-04T16:46:21.220
> 
> 标签：javascript, jquery, html, css, responsive-design

我有一些 div 具有由“点击”功能控制的动态高度，如下所示：

```
$('.expand').click(function() {
  $(this).next('.collapse').slideToggle();
}); 
```

我正在尝试将[jQuery wookmark 插件](https://github.com/GBKS/Wookmark-jQuery)应用于 div，并且它可以工作，除了通过扩展其中一个部分来动态调整它们的高度。从文档中，我将其中一个示例复制到我的代码中，并且动态高度有效

```
 $(document).ready(new function() {
          // Prepare layout options.
          var options = {
            autoResize: true, // This will auto-update the layout when the browser window is resized.
            container: $('#container'), // Optional, used for some extra CSS styling
            offset: 30, // Optional, the distance between grid items
            itemWidth: 300 // Optional, the width of a grid item
          };

          // Get a reference to your grid items.
          var handler = $('.outerwrapper');

          // Call the layout function.
          handler.wookmark(options);

          // Capture clicks on grid items.
          handler.click(function(){
            // Randomize the height of the clicked item.
            var newHeight = $('img', this).height() + Math.round(Math.random()*300+30);
            $(this).css('height', newHeight+'px');

            // Update the layout.
            handler.wookmark();
          });
        }); 
```

[你可以在这里](http://jackdent.co.uk/vintage/)看到这个工作。我怎样才能做到这一点，以便当您单击 div 内的标题之一时，布局会更新，就像在示例中那样。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T17:56:55.683

通常第三方 jQuery 插件包含某种“刷新”或“调整大小”功能。

快速浏览一下该功能，它似乎没有；但是，由于有一个“autoResize”选项（它将在浏览器调整大小时重新加载布局），您可以简单地创建一个触发“resize”事件的点击事件，如下所示：

JAVASCRIPT：

```
$("h1.resize").live("click", function()
{
    $(window).trigger('resize');
}); 
```

[http://api.jquery.com/trigger/](http://api.jquery.com/trigger/)

[http://api.jquery.com/resize/](http://api.jquery.com/resize/)

* * *

编辑：再次重新阅读问题，看起来像这样：handler.wookmark();

应该刷新布局（基于您发布的代码）。所以你应该能够使用它而不是调整大小触发器。

```
$("h1.resize").live("click", function()
{
    handler.wookmark();
}); 
```

# jquery - jQuery - 查找具有 rel 属性的元素

> ID：10015680
> 
> 赞同：19
> 
> 时间：2012-04-04T16:47:02.763
> 
> 标签：jquery, html

我有两种元素

```
<i rel="tooltip" class='icon-ok'>
<i title="Teste" class='icon-info'> 
```

第一个是工具提示效果，第二个是弹出框

我想要做的是避免返工，所以我不需要根据我拥有的每个 html 上的类创建脚本。

我在我的基础 html 上做了这个：

```
$('body').find('i').tooltip(); 
```

问题是它在`<i>`没有 rel 属性的其他元素上添加了工具提示效果。

我需要搜索具有 rel 属性的元素并对其设置工具提示效果。

谢谢

**编辑**

如果我尝试与正确答案中所说的相反，请获取`<i>`没有 rel 属性的元素。在此处找到解决方案：[jQuery 选择器 - 查找没有指定属性的对象](https://stackoverflow.com/questions/1969141/jquery-selectors-find-objects-without-specified-attribute)

[弗鲁特贝格](https://stackoverflow.com/users/230654/vrutberg)-`jQuery("li:not([style])").hide();`

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-04T16:53:49.770

确切的一个

```
$('i[rel="tooltip"]').tooltip() 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-04-04T16:48:27.567

`$('i[rel]').tooltip();`

[http://api.jquery.com/category/selectors/attribute-selectors/](http://api.jquery.com/category/selectors/attribute-selectors/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T16:52:02.297

yon 可以使用此选择器选择所有带有 href att 的元素

```
$(document).ready(function()
{

$("[rel]")

}); 
```

# jsp - 将 HttpServletRequst 存储在 HttpSession 中

> ID：10015682
> 
> 赞同：0
> 
> 时间：2012-04-04T16:47:06.490
> 
> 标签：jsp, servlets

我想将`HttpServletRequest`对象`HttpSession`作为属性存储在 a 中。

```
 protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {       
request.getSession().setAttribute("ses",request); 
```

这是我在另一个 servlet 中取回它的方法，

```
HttpSession ses=r.getSession(false);
HttpServletRequest rq=(HttpServletRequest)ses.getAttribute("ses"); 
```

`if`当我在语句中检查它时，这里 rq 不是 nul 。我的问题是，当我尝试获取请求对象中的参数时，会引发空点异常。如何存储请求，因为我可以再次获取参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T18:07:08.783

这是不可能的，而且在技术上也没有任何意义。当关联的 HTTP servlet 响应提交并完成时，HTTP servlet 请求实例过期/垃圾。*因此，HTTP servlet 请求实例在不同*的请求中不再有效。调用它的任何方法都会抛出所有颜色的异常，因为存储的实例不再指向任何东西。初始的 HTTP servlet 请求已经完成了它的工作，已经过期/垃圾。

您需要从请求中准确提取所需的信息并将*该*信息存储在会话中，而不是尝试在不同的请求中访问它。例如

```
String foo = request.getParameter("foo");
request.getSession().setAttribute("foo", foo); 
```

进而

```
String foo = (String) request.getSession().getAttribute("foo"); 
```

### 也可以看看：

*   [servlet 是如何工作的？实例化、会话、共享变量和多线程](https://stackoverflow.com/questions/3106452/how-do-servlets-work-instantiation-session-variables-and-multithreading/3106909#3106909)

# silverlight - Silverlight application needs mouse click to activate keyboard

> ID：10015687
> 
> 赞同：2
> 
> 时间：2012-04-04T16:47:30.000
> 
> 标签：silverlight

I'm using VS2010,C# to develop a Silverlight online game, I use keyboard for getting user input, but users must initially click on silverligh canvas to activate keyboard (I have only one canvas in my scene which is not full screen, there is nothing else), how can I initially give focus to keyboard so that whenever the game starts user can play with keyboard (with no need to click on canvas), it is how I've set up my keyboard:

```
 public MainPage()
    {
        InitializeComponent();
        Loaded += new RoutedEventHandler(Page_Loaded);
    }

        void Page_Loaded(object sender, RoutedEventArgs e)
    {
        this.KeyDown += new KeyEventHandler(Page_KeyDown);
    }

        void Page_KeyDown(object sender, KeyEventArgs e)
    {
    ....
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:00:11.850

Try setting the focus first to your Silverlight plugin as described here: [http://blog.falafel.com/Blogs/josh-eastburn/2011/03/10/Setting_Focus_on_the_Silverlight_Plugin_Object](http://blog.falafel.com/Blogs/josh-eastburn/2011/03/10/Setting_Focus_on_the_Silverlight_Plugin_Object)

Then apply the subsequent focus to the control you wish to accept the keyboard inputs.

An additional tip that's worked for me is to set the DOM focus to the plugin after it's instantiated in the DOM tree by running an initial script on the document ready function:

```
$('#silverlightPlugin').on(function(){
    $(this).focus();
} 
```

# jquery - Dynamic Accordion Menu using Jquery 1.4.2

> ID：10015688
> 
> 赞同：0
> 
> 时间：2012-04-04T16:47:31.280
> 
> 标签：jquery, asp.net-mvc, jquery-ui, asp.net-mvc-2, accordion

Hi i am building a jquery accordion menu using VS2008 and MVC2.

My requirement is to refresh the contents of the accordion and repopulate it when a user selects an item from a dropdownlist

For this i am using a jquery ajax call which returns data with and tags like below

```
<h3>
  <a href="#">Masters</a>
</h3>
<div>
  <ul>
    <li>
      <a href="#" onclick="pageclick('..\TRAN\EmpMst.aspx',1)">Employee Master</a>
    </li>
    <li>
......
... 
```

The first time on page load the accordion looks fine. But whenever i change the contents dynamically it looks awfull with weird CSS

![Accordion Before & After Dynamic Update](../Images/42f0bb95be70b212e336abf4b01ae78c.png)

here is my ajax call

```
 $('#moduleList').change(function() {
            var rootPath = '<%=Url.Content("~/")%>';
            $.ajax({
                type: "POST",
                url: rootPath + "Home/GetMenu/",
                data: { moduleid: $(this).val() },
                success: function(result) {
                    $('#accordion').html(result);
                    //$('#accordion').append(result);
                    $('#accordion').accordion('destroy');
                    $('#accordion').accordion({
                        fillSpace: true, collapsible: true
                    });
                },
                error: function(error) { alert(error); }
            });

        }); 
```

am i doing something wrong ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T19:59:27.163

You could try calling `accordion()` again after setting the html in your ajax success handler. This should re-apply the styles:

```
$("#accordion").accordion(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:36:16.290

There might be several causes for this. Here is one possible cause: If you use JavaScript for styling(adding CSS class etc.) your accordion menu, and that usually run on page load. Then call the styling function again after setting the loaded content in your success callback.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T05:24:42.180

Compare the *html*(before invoking accordion()) structure of element *#accordion* with the result *html* of the ajax call. For example:

html structure before invoking accordion():

```
<h3> <a href="#">Masters</a> </h3>
<div>
 <ul>
      <li><a href="#">Employee Master</a> </li>
  </ul>
</div> 
```

ajax result html structure:

```
<div> //this may destroy your CSS
   <h3> <a href="#">Masters</a> </h3>
   <div>
     <ul>
       <li><a href="#">Employee Master</a> </li>
     </ul>
   </div>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T22:23:41.467

Thanks everybody for your help. I finally got it right. Actually i missed a little CSS.

My IE was not showing the html with any css at all. So it was difficult to findout whether something is changed or not. Thanks to Tuan who saved my day. Once i started using Firebug it was crystal clear that a custom css was missing. Here is the updated Code just in case any one is interested.

```
 $('#moduleList').change(function() {
        var rootPath = '<%=Url.Content("~/")%>';
        $.ajax({
            type: "POST",
            url: rootPath + "Home/GetMenu/",
            data: { moduleid: $(this).val() },
            success: function(result) {
                $('#accordion').html(result);
                //$('#accordion').append(result);
                $('#accordion').accordion('destroy');
                $('#accordion div').addClass('navMiddle');  // I missed this at first
                $('#accordion').accordion({
                    fillSpace: true, collapsible: true
                });
            },
            error: function(error) { alert(error); }
        });

    }); 
```

And Here is the CSS for the Accordion menu items.

```
.navMiddle{
 position:relative;
}
.navMiddle ul {
    margin:0px;
    padding:0px;
    text-align:left;
    list-style:none;
}
.navMiddle ul li {
    font-size:11px;
    color:#003366;
    font-weight:normal;
    white-space:nowrap;
    position:relative;
    border-bottom:dotted 1px gray;
    padding-top:4px;
    padding-bottom:4px;
}
.navMiddle ul li:hover {
    background-color:#e5effa;
}
.navMiddle ul li a:link {
    text-decoration:none;
    color:#003366;
}
.navMiddle ul li a:visited {
    text-decoration:none;
    color:#003366;
    margin-top:3px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T14:13:42.600

I solved my problem by using two statement as

```
$('#accordion').accordion('destroy');
$("#accordion").accordion(); 
```

# xml - 标准 XUnit 报告 XML 的参考源是什么

> ID：10015689
> 
> 赞同：20
> 
> 时间：2012-04-04T16:47:46.413
> 
> 标签：xml, unit-testing, xunit

我正在编写 CUnit 的替代方案，我希望它生成 XML 输出。

我希望输出与 jenkins / hudson 兼容 - 所以我正在寻找所有 XUnit 测试都符合的标准 xml 表单。

有这样的标准吗？

jenkins/hudson 可显示的需求定义在哪里？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-20T05:48:39.283

[http://reflex.gforge.inria.fr/xunit.html#xunitReport](http://reflex.gforge.inria.fr/xunit.html#xunitReport)

# javascript - 将javascript函数添加到父级

> ID：10015698
> 
> 赞同：1
> 
> 时间：2012-04-04T16:48:15.713
> 
> 标签：javascript, jquery, iframe

我想从 iframe 窗口向主窗口添加自定义 javascript 函数。

如果我附加到主页的正文

```
<script type='text/javascript'><!--//<![CDATA[
   var ox_u = 'http://ads.gamingxp.com/www/delivery/al.php?zoneid=224&cb=1333555766&layerstyle=simple&align=center&valign=middle&padding=2&closetime=200&padding=2&shifth=0&shiftv=0&closebutton=t&backcolor=FFFFFF&bordercolor=000000';
   if (document.context) ox_u += '&context=' + escape(document.context);
   document.write("<scr"+"ipt type='text/javascript' src='" + ox_u + "'></scr"+"ipt>");
//]]>--></script> 
```

它会工作吗？

这是我的第一次尝试，但似乎没有运气......我想我逃错了......

[http://jsfiddle.net/u7qn9/5/](http://jsfiddle.net/u7qn9/5/)

你能提示一下吗，拜托...

从 JSFIDDLE 粘贴

实际上这是基于另一个代码。Jquery 不是必须的。我只需要将给定的 OPEN X 广告代码从 IFRAME 中粘贴到父目录中的某个特定 div 中的 ID ...也许您可以提示更轻松的锻炼？问题是给定的javascript应该在Iframe中运行......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T22:24:35.373

我假设您说您想从 iframe 窗口中访问父窗口。为此，您需要做的就是：

一个。确保父窗口与子 iframe 具有相同的“document.domain”，例如“domain.com”

湾。您可以通过简单的操作将变量动态添加到父文档：

```
 window.top.myNewVariable = "yay"; 
```

在上面的示例中，可以从父文档访问“myNewVariable”。

C。如果您想在父文档中包含外部脚本，请继续创建脚本标记并将其附加到父文档。

```
 var myNewScript = document.createElement('script');
    myNewScript.setAttribute('type','text/javascript');
    myNewScript.src = "SOURCE OF SCRIPT";

    window.top.document.getElementsByTagName("body")[0].appendChild(myNewScript); 
```

让我知道这是否适合你！

# parrot - Parrot VM 的端口

> ID：10015700
> 
> 赞同：3
> 
> 时间：2012-04-04T16:48:23.220
> 
> 标签：parrot

是否有可以构建 Parrot 虚拟机的操作系统列表？我宁愿不通过每个版本的发行说明来弄清楚。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T17:14:06.283

一个更好的问题是，您对哪些操作系统感兴趣？

我们过去经常更新 PLATFORMS 文档，但最近它并没有受到太多关注：

[https://github.com/parrot/parrot/blob/master/PLATFORMS](https://github.com/parrot/parrot/blob/master/PLATFORMS)

一般来说，Parrot 可以在 Linux、FreeBSD、OpenBSD、NetBSD、Solaris、OS X、Windows、RTEMS 和其他一些深奥的操作系统上运行。

# forms - 从 HTML 或 Javascript 掌握 iOS 和 Android 软键盘

> ID：10015701
> 
> 赞同：2
> 
> 时间：2012-04-04T16:48:25.897
> 
> 标签：forms, submit, android-softkeyboard, onsubmit, soft-keyboard

简单来说：

有没有办法让 iOS 和 Android 软键盘中的“开始”按钮触发已用 Javascript (jQueryMobile) 定义的提交事件，并且不表示为表单的 onsubmit 属性？

让我详细说明：

我正在使用 jQueryMobile 和 Phonegap 构建一个跨平台的移动应用程序。

我有一些带有 (type=number) 输入的表格。当用户点击输入时，会出现软键盘。到目前为止，一切都很好。

现在我希望在用户按下软键盘上的“开始”按钮时提交表单。[我在这个 Google Group](http://groups.google.com/group/phonegap/browse_thread/thread/2828dc423d526ec6/eb01691a9fca0e7b?pli=1)中读到， “开始”按钮从表单的“提交”事件中获取操作。

然而，对我来说，这不会发生。也许是因为我使用 jQuery 绑定我的事件，而不是在 HTML 中定义它们，即

```
$('body').on('submit','#oneIncomeForm',function(e){
        console.log('Preventing default')
        e.preventDefault();
        submitIncome();
    }) 
```

我真的很想避免在 HTML 中指定表单的 onsubmit 属性，因为这会混淆我在发布应用程序之前使用的 Javascript 混淆过程。

# iphone - iPhone浏览器中的杂货杂货上传字段“不可点击”

> ID：10015705
> 
> 赞同：0
> 
> 时间：2012-04-04T16:48:49.677
> 
> 标签：iphone, ajax, codeigniter, upload, grocery-crud

因此，我使用 codeigniter 和杂货店 crud v1.2 为朋友制作了一个简单的网站，它适用于所有浏览器的上传，除非我在 iphone 上尝试。出于某种原因，“选择文件”按钮出现，但似乎无法点击仅在 iphone 浏览器上。这意味着上传功能不起作用，因为它没有打开“选择文件”对话框。以前有人注意到这一点吗？就像我说的，它在所有桌面浏览器和 android + opera 迷你浏览器上都能正常工作。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:22:44.030

您不能在 iPhone 上使用该功能。无法从浏览器访问手机文件系统。

您需要创建一个本地 iPhone 应用程序才能上传文件，即使那样您也将被限制为某些文件类型，并且无法浏览整个文件系统。

# php - 我应该在这里使用例外吗？

> ID：10015708
> 
> 赞同：4
> 
> 时间：2012-04-04T16:49:07.427
> 
> 标签：php, exception, exception-handling

我是例外的新手，并试图找出何时适合使用它们。在以下 php 代码中，我想更改`echo`（无需告诉用户）以简单地记录消息。`echo`我应该用（例如）替换`log->notice(...)`还是应该使用异常（无论如何我都打算记录）。

```
if (file_exists($file)) {
    echo 'File already exists and will be overwritten.';
} 
```

另外，如果我应该使用异常，那么在这种情况下我将如何正确使用一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:56:27.923

异常通常旨在处理意外行为 - 例如错误或问题。

在上面的示例中，我认为不需要，因为您可能期望该文件存在，并且如果那里已经存在文件，则应该真正以流动的方式编写程序（就像您所做的那样） . 这完全取决于您期望发生的事情，而不是。

正常使用的情况可能是：

```
try
{
    some_function();
}
catch (Exception $e)
{
    echo 'Function didn\'t behave as expected, please try again, here is the error: '.$e->getMessage();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T17:06:20.847

异常是处理错误的标准方法......但它们可能是您需要使用异常的某些情况。

如果您只想验证文件..不需要异常..如果错误输出需要您重定向或有连锁反应，或者您正在开发框架等...我建议您使用 Exception

```
try
{
    if (file_exists($file)) {
           throw new Exception('File already exists and will be overwritten.');
    }
}
catch (Exception $e)
{
   header("Location: error?msg=". base64_encode($e->getMessage()));
} 
```

结论

您使用脚本的目的将决定您是否更好地使用异常

我希望这有帮助

谢谢

:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T17:06:52.940

如果遇到错误，异常意味着中断执行流程。这完全取决于您如何构建流程，如果您想因为文件存在而停止流程，您可以执行以下操作：

```
try {
    if (file_exists($file)) {
        throw new Exception(sprintf('File already exists and will be overwritten';
    }

    // If above conditional is realized, no code from this point forward will be
    //  executed

} catch (Exception $e) {
    error_log($e->getMessage());
} 
```

在您的具体示例中，我认为保持代码不变是可以的，因为它似乎只是一个警告，这意味着您不想中断执行流程，而是在警告后继续执行代码。

如果你真的想使用异常，你可以实现嵌套异常，但它会变得很复杂，最终会变得矫枉过正。

通过 PHP 文档了解有关[异常](http://php.net/manual/en/language.exceptions.php)的更多信息。

> 我应该用 log->notice(...) 替换 echo

我会的，除非你想让用户知道这个问题。

# php - 处理文字包装的电子邮件（内容类型：文本/纯文本）

> ID：10015709
> 
> 赞同：6
> 
> 时间：2012-04-04T16:49:08.613
> 
> 标签：php, email

我正在尝试将电子邮件处理到我的应用程序中，并且一切似乎都工作正常，直到我收到来自其邮件服务器正在强制邮件文本自动换行的用户的电子邮件。我知道自动换行是 RFC 规范的一部分，所以我只是在寻找处理它的最佳方法，以得到一个显示良好的消息。

原始电子邮件：

> 这是我的主要问题。当我通过电子邮件发送消息时，文本被分解得相当奇怪。它几乎看起来好像消息本身已损坏。我不确定为什么会这样，因为我的原始电子邮件看起来不像那样。

这是收到的电子邮件的样子（标有 CRLF 以显示邮件服务器将它们插入的位置）：

> 这是我的主要问题。
> 当我通过电子邮件发送消息时，文本被奇怪地分解为 CRLF 。它几乎看起来好像消息本身已损坏。我不确定 CRLF
> 为什么会这样，因为我的原始电子邮件看起来不像 CRLF
> 。

我的处理代码通过以下运行，然后将结果插入数据库。

```
$dirty_string = nl2br($dirty_string);
$config = HTMLPurifier_Config::createDefault();
$config->set('AutoFormat.RemoveEmpty', 'true');
$config->set('AutoFormat.RemoveEmpty.RemoveNbsp', 'true');
$config->set('HTML.Allowed', 'a[href],br,p');
$purifier = new HTMLPurifier($config);
$clean_string = $purifier->purify($dirty_string); 
```

以下是显示的结果。如果我页面上的 div 不够宽，浏览器会自动换行，但 nl2br() 的换行会导致下一行变短。

> 这是我的主要问题。当我通过电子邮件发送消息时，文本被
> 分解得相当
> 奇怪。它几乎看起来好像消息本身已
> 损坏。我不确定
> 为什么会这样，因为我的原始电子邮件看起来
> 不像
> 那样。

我想也许我可以将双 CRLF 更改为新段落并剥离所有单个 CRLF 以将这些行连接到一个可以正确显示自动换行的单行。但是，如果有人在电子邮件中发布以下项目符号列表，那将破坏该列表。

> 这是我的清单 CRLF
> - 第 1 项 CRLF
> - 第 2 项 CRLF
> 等...

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:44:55.917

邮件解析可能是一个看似简单的问题的典型示例，但实际上充满了破坏简单解析器的奇怪边缘情况。然而，这也不完全是一个新问题，因此有很多现有的解决方案可以正常工作。一些选项：

*   [蛋糕](https://github.com/plancake/official-library-php-email-parser)
*   [邮件解析](http://php.net/manual/en/book.mailparse.php)
*   [PHP Mime 邮件解析器](http://code.google.com/p/php-mime-mail-parser/)（包装了 MailParse）
*   等等

也许您已经编写了一个出色的解析器，只需要这一点小改动即可完美，但更有可能通过使用现有工具来完成这项工作，您将节省大量时间和心痛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:24:39.510

Here's a function that does the job pretty well:

```
function PlaintextEmailBrokenLineCombine($lineSet, $startIndex = 0) {
    $result = '';
    $lineCount = count($lineSet);
    for($i=$startIndex; $i < $lineCount; $i++) {
        $thisLine = $lineSet[$i];
        $nextLine = ($i < $lineCount-1 ? $lineSet[$i+1] : '');
        $nextLineFirstWord = substr($nextLine, 0, strpos($nextLine, ' '));

        $lineSeparator = "\n"; // we assume until we detect invocation of the 78char rule
        if(strlen($thisLine) + strlen($nextLineFirstWord) + 1 > 75) {
            // A line break was PROBABLY put in here where a space once was, so switch back:
            $lineSeparator = ' ';
        }
        $result .= $thisLine . ($i == $lineCount-1 ? '' : $lineSeparator); // no separator for the last line
    }
    return $result;
} 
```

It's a little esoteric because it expect an array of lines from the plain text email. Here's the usage:

```
$Parser = new MimeMailParser();
$Parser->setText($rawEmailText); 
$plaintext = $Parser->getMessageBody('text'); // or however you get it, many ways
$lineSet = explode("\n", $plaintext);
$niceText = PlaintextEmailBrokenLineCombine($lineSet); 
```

$niceText is what you want: it's a pretty accurate way of getting the text you want with those pesky server-added line breaks gone, and replaced with the original spaces.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T19:49:12.083

像这样的 hack 怎么样：删除 78 倍数的任何位置的 CLRF 字符（+ 说 5 个字符来解释这个事实：）`the mail server won't just cut a line mid-word`。

所以你会在这些位置寻找 CLRF 字符：

*   `78` *或*79*或*80*或*81*或*82*或*83**及**
*   `156` *或*157*或*158*或*159*或*160*或*161**和**
*   很快。

这当然是假设最长的单词长度为 5 个字符。您应该根据需要解析的电子邮件进行调整。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T18:43:28.693

您可以尝试使用[TinyMCE](http://www.tinymce.com/)编辑器查看电子邮件。它将正确格式化。我已经使用 TinyMCE 输入数据并将其保存到数据库中几次，并且每次在我检索数据后正确显示它，无论格式多么奇怪。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T22:04:55.380

怎么样：对于下一行包含单词且不以空格字符开头的任何行（例如列表中的缩进），检查该行的长度是否在 65 到 80 个字符之间。如果是，请删除尾随 CR（如果行尾不包含空格或标点符号，则添加空格）。这将获得您的大部分自动换行案例，并保留您的大部分列表。

# java - 终止执行服务和极快的 Java 代码？

> ID：10015712
> 
> 赞同：2
> 
> 时间：2012-04-04T16:49:20.203
> 
> 标签：java, multithreading, concurrency, jvm-hotspot

在下面的代码中，我多次通过线程池调用一个函数。在这个函数中，我通过一个名为 FastestMemory 的全局属性来跟踪函数的最快执行速度。

但是，当我打印出该值时，在线程池循环之后，我得到了原始值，好像全局变量与每次循环迭代更新的变量不同。当我知道 FastestMemory 的值确实被分配给（例如）253475 时，我只返回了 2000000000。

1）我是否需要重新构建此代码以便能够跟踪最快的迭代？

2）我似乎能够非常快地执行此代码，它在四个 Xeon x7550 上每次迭代花费（平均）不到 1 毫秒。这是正常的还是我的时间在某个地方错了？C# 平均需要大约 400 毫秒？！？

```
public class PoolDemo {

    static long FastestMemory = 2000000000;
    static long SlowestMemory = 0;
    static long TotalTime;
    static long[] FileArray;
    static DataOutputStream outs;
    static FileOutputStream fout;

  public static void main(String[] args) throws InterruptedException, FileNotFoundException {

        int Iterations = Integer.parseInt(args[0]);
        int ThreadSize = Integer.parseInt(args[1]);

        FileArray = new long[Iterations];
        fout = new FileOutputStream("server_testing.csv");

        // fixed pool, unlimited queue
        ExecutorService service = Executors.newFixedThreadPool(ThreadSize);
        ThreadPoolExecutor executor = (ThreadPoolExecutor) service;

        for(int i = 0; i<Iterations; i++) {
          Task t = new Task(i);
          executor.execute(t);
        }

        executor.shutdown();
        service.shutdown();

        System.out.println("Fastest: " + FastestMemory);

        for(int j=0; j<FileArray.length; j++){
            new PrintStream(fout).println(FileArray[j] + ",");
        }
      }

  private static class Task implements Runnable {

        private int ID;

        static Byte myByte = 0;

        public Task(int index) {
          this.ID = index;
        }

        @Override
        public void run() {
            long Start = System.nanoTime();

          int Size1 = 100000;
            int Size2 = 2 * Size1;
            int Size3 = Size1;

            byte[] list1 = new byte[Size1];
            byte[] list2 = new byte[Size2];
            byte[] list3 = new byte[Size3];

            for(int i=0; i<Size1; i++){
                list1[i] = myByte;
            }

            for (int i = 0; i < Size2; i=i+2)
            {
                list2[i] = myByte;
            }

            for (int i = 0; i < Size3; i++)
            {
                byte temp = list1[i];
                byte temp2 = list2[i];
                list3[i] = temp;
                list2[i] = temp;
                list1[i] = temp2;
            }

            long Finish = System.nanoTime();
            long Duration = Finish - Start;
            FileArray[this.ID] = Duration;
            TotalTime += Duration;
            System.out.println("Individual Time " + this.ID + " \t: " + (Duration) + " nanoseconds");

            if(Duration < FastestMemory){
                FastestMemory = Duration;
            }
            if (Duration > SlowestMemory)
            {
                SlowestMemory = Duration;
            }
        }
      }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T16:55:17.970

问题是您的主线程正在退出而没有等待提交给执行程序的任务终止。

您只需在调用[ExecutorService#awaitTermination](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#awaitTermination%28long,%20java.util.concurrent.TimeUnit%29)之后添加对 ExecutorService#awaitTermination 的调用即可实现`ExecutorService#shutdown`。

您将遇到的另一个问题是，您没有考虑`static long`跟踪最快时间的值的线程安全性。您将需要添加`synchronize`块或使用 an`AtomicLong`来获得安全的 Compare-And-Set 操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T16:56:17.540

`shutdown()`仅拒绝提交到池的新任务，但对已提交和正在运行的任务不执行任何操作。为了等待所有任务完成，您应该调用：

```
executor.awaitTermination(1, TimeUnit.MINUTES);
service.awaitTermination(1, TimeUnit.MINUTES); 
```

还可以访问`FastestMemory`并且`SlowestMemory`必须以某种方式同步，例如：

```
synchronized(PoolDemo.class) {
    FastestMemory = Math.min(FastestMemory, Duration);
    SlowestMemory = Math.max(SlowestMemory, Duration);
} 
```

顺便说一句，根据 Java[命名约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#367)：

> 所有实例、类和类常量都是大小写混合，**首字母小写**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T16:59:26.190

首先，您无需等待任何任务完成。您需要等待执行器服务完成。

```
executor.awaitTermination(...); 
```

此外 executor 和 service 都引用同一个对象，因此无需关闭两者。实际上，我认为没有任何理由甚至有执行人。您调用的所有方法都是 ExecutorService 的一部分。

接下来对长变量的更改不是线程安全的。如果另一个线程在您的比较之后更改了值会发生什么。对于长变量，即使读取和写入也不是原子的。您应该对这些变量使用 AtomicLongs。

您将希望从 AtomicLong 获取当前值，将其与当前值的运行进行比较。如果新值表明应该进行更新，请使用 compareAndSet 确保没有其他人更改了该值。如果其他人更改了它，请再次运行检查。

# c++ - C++ - 最快的整数类型？

> ID：10015715
> 
> 赞同：6
> 
> 时间：2012-04-04T16:49:26.583
> 
> 标签：c++, performance

我一直在对算法进行基准测试，没有必要知道细节。主要组件是缓冲区（整数的原始数组）和索引器（整数 - 用于访问缓冲区中的元素）。

缓冲区最快的类型似乎是 unsigned char，以及 short、int、long 的有符号和无符号版本。但是 char/signed char 比较慢。差异：1.07 倍。

对于索引器，有符号和无符号类型之间没有区别。然而 int 和 long 比 char 和 short 快 1.21 倍。

在考虑性能而不是内存消耗时，是否应该默认使用一种类型？

注意：对缓冲区元素和索引器使用的操作是赋值、递增、递减和比较。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T16:53:51.217

通常最大的胜利来自缓存。

如果您的数据值足够小以至于它们适合 8 位，那么您可以在 CPU 缓存中容纳更多的数据，而不是使用整数并浪费 3 个字节/值。如果你正在处理一个数据块，你会在缓存命中方面获得巨大的速度优势。

索引的类型不太重要，只要它适合 CPU 寄存器（即不要尝试`long long`在 8 位 CPU 上使用），它就会具有相同的速度

编辑：还值得一提的是，测量速度很棘手。您需要多次运行该算法以允许缓存，您需要查看 CPU 上正在运行的其他内容，甚至还有其他硬件可能正在中断的内容。除非您非常小心，否则 10% 的速度差异可能会被视为噪音。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T18:09:31.137

它在很大程度上取决于底层架构。通常最快的数据类型是字宽的。根据我对 IA32 (x86-32) 的经验，比字数据类型更小/更大的数据类型会受到惩罚，有时甚至会为一个数据读取超过一个内存。

一旦在 CPU 寄存器上，通常数据类型长度无关紧要（如果整个数据适合一个寄存器，那就是），但你用它们完成什么操作。当然浮点运算是最昂贵的；最快的是加法，减法（这也是比较），逐位（移位等）和逻辑运算（和，或......）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T16:54:49.547

没有关于哪种类型更快或更慢的承诺。`int`应该代表机器的自然字长，不管这可能意味着什么，所以它可能会更快。或者更慢，取决于其他因素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-14T08:59:07.923

以下是基本整数类型或扩展整数类型的 typedef。

检查快速模式。您也可以找到其他类型（字符）的快速 mod。

图书馆是 :: cstdint

uint_fast8_t :: 我的建议

[http://www.cplusplus.com/reference/cstdint/](http://www.cplusplus.com/reference/cstdint/)

??您可能需要了解您正在使用的机器的架构！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-04T17:06:41.727

正如人们所说`int`，在大多数情况下代表机器字。因此`int`将具有与处理器寄存器相同的长度，因此不会执行任何其他操作来将其放入`int`寄存器并返回到 RAM。

如果你使用`char`它，它比处理器寄存器小 4 倍（在 x86 系统上）`int`，也比处理器寄存器小 4 倍。因此，在将其放入 RAM 之前，它应该被截断。结果使用了更多的时间。

此外，具有 32 位寄存器的处理器无法执行 8 位数字的操作。如果将 char 添加到 char 中，则它们都将被注册。所以每个寄存器将有 8 位 char 值和 24 位垃圾。将添加两个 32 位值，然后将结果截断为 8 位。`char`和同时工作的原因`short`是使用了相同数量的附加操作。而对于`int`额外的操作没有做。

我想为处理器添加它，`int`并且`unsigned int`与它以相同的方式对待它们完全一样。对于某些编译器`int`，`long int`也可能是相同的。

所以最快的整数类型是长度与机器字相同的类型。如果您使用大小小于机器字的类型，则程序运行速度会变慢。

# javascript - Rails 3.1 中的 Java Script 仅在某些部分有效。知道为什么吗？

> ID：10015720
> 
> 赞同：0
> 
> 时间：2012-04-04T16:49:32.777
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3.1

这可能看起来有点奇怪，但由于我是 RoR 的新手，找不到任何类似的问题，我想你可能知道。情况是 JavaScript 无法在我的整个站点中运行。例如。为了检查，我在页脚中放置了一个带有警报功能的链接。一开始它不起作用，感觉就像 JS 被禁用了（但事实并非如此）。但最终它奏效了。现在它适用于大多数页面，但它不适用于还有一个“自动完成”字段。当然，这个自动完成字段也不起作用。这可能会导致您认为自动完成代码有问题。然而，同样的代码在侧边栏中工作。

任何想法为什么？

这可能与有一天我的资产文件夹出现空的事实有关吗？安装 gmaps4rails gem 后，我意识到我所有的 Js 和 CSS 文件都从我的 assests 文件夹中消失了。好吧，这可能早就发生了，我当时才意识到。我真的不知道。

在根目录中，您可以看到按钮上的“Hola sip”点击有效。[在这里它可以工作](http://hikultura.heroku.com/?locale=en) 但是，这里相同的链接不会触发警报功能。 [这里没有](http://hikultura.heroku.com/es/translations/1#)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T19:12:02.480

至少在 IE 中，如果您的页面中发生任何错误，javascript 就会停止。因此，如果某些事情莫名其妙地停止工作，这表明您导致错误并停止了 javascript。

好好看看 IE 的[开发者工具栏](http://www.microsoft.com/download/en/details.aspx?id=18359)，或者 Firefox 或 Chrome 中的内置开发工具，或者Firefox 的[Firbug](http://getfirebug.com/)。这些工具都有办法告诉您所有关于您的页面中发生的任何 javascript 错误。好好利用它们。

# google-earth - 使用 Google Earth API 编写搜索按钮

> ID：10015721
> 
> 赞同：1
> 
> 时间：2012-04-04T16:49:49.750
> 
> 标签：google-earth, google-earth-plugin

我正在使用谷歌地球 API，我创建了一个输入类型的文本，我想在其中包含一些方向，我创建一个按钮女巫应该使用包含在 forst 按钮中的文本。

我会喜欢在 javascript 中我应该做的事情（更好的解释），以便在单击第二个按钮时使用第一个按钮中的文本作为进入地图的方向。

感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T20:31:26.000

One way of doing this is to use the Google Places API, which will return the coordinates (amongst other details) of the place being queried. So will the Google Maps API geocoder, which you can use along with your Earth API application.

Whatever you use, you will eventually need the latitude and longitude of the location, at which point you can fly to it (see [https://developers.google.com/earth/documentation/camera_control](https://developers.google.com/earth/documentation/camera_control) for snippet examples of this.)

If this does not answer your question please provide more details on exactly what you're trying to do and where you are stuck.

# php - 在 MySQL 中存储路线数据的最佳方法

> ID：10015725
> 
> 赞同：5
> 
> 时间：2012-04-04T16:49:54.900
> 
> 标签：php, mysql

我正在开发一个应用程序，该应用程序需要我为某个位置存储一些方向，下面是我尝试存储的数据示例：

**方向 1**
从西方向：沿 528 East（Beechline）行驶，经过机场出口，然后从 13 号出口驶入 Narcoossee Rd 并左转，PARK TO FLY 位于您左侧 1/4 英里处。

**方向 2**
从东方向：沿 528 West (Beechline) 行驶，在机场出口前，从 #13 号出口驶入 Narcoossee Rd 并右转，PARK TO FLY 位于您左侧 1/4 英里处。

**方向 3**
从佛罗里达收费公路：从 #254 出口到 528 East（Beechline），经过机场出口，然后从 #13 出口到 Narcoossee Rd 并左转，PARK TO FLY 位于您左侧 1/4 英里处。

**方向 4**
从 417（Greenway）：从 #26 出口到 528 West（Beechline），然后从 #13 出口到 Narcoossee Rd 并右转，PARK TO FLY 位于您左侧 1/4 英里处。

**方向 5**
从 408（东/西高速公路）：从 16 号出口到 South SR 551（Goldenrod Rd）。开车大约。4 英里，然后在 Hoffner Rd 上左转。Hoffner 更改为 Narcoossee Rd。PARK TO FLY 位于您右侧 2 英里处。

* * *

我想知道是否有人可以告诉我在 MySQL 中存储这些数据的最佳和推荐方式。

我正在考虑首先序列化保存此数据的数组，然后将其存储到单个列中，我认为我不需要担心在数据库中搜索它，所以它应该是好的？我知道它不会被标准化。

但是您认为从长远来看，将其存储在单独的表中是最好的吗？

**更新**

我有一个名为 mysql 的表`Locations`，它包含有关特定位置的信息，现在我想将一些`Directions`与用户输入的位置相关联。

*   用户输入位置
*   然后，用户还可以在那时输入有关方向的信息。

**更新 2**
我在询问将数据存储在数据库中的最佳方式，目前我没有关系，因为我还没有为它创建表，这就是我在这里要问的问题。我应该去并如上所述创建一个关系表，或者我应该在 Locations 表中为方向创建另一列，并序列化包含要插入到单个 mysql 列中的方向数据的数组。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T17:38:51.460

如果，当用户访问每个位置时，您总是会获取所有方向，那么您可以将它们粘贴到位置表中。如果您可能知道用户来自哪里，并且只为该 FROM 选择正确的方向，那么您应该将方向粘贴在另一个表中。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-04T16:58:39.357

首先，这是一个建模问题，不是 PHP 也不是 Mysql。您可以通过以下方式对数据进行建模：

```
place(
  place_id;
  place_name;
)
direction(
  direction_id;
  direction_name;
)
direction_place(
  direction_place_id;
  order;
  direction_id;
  place_id;
) 
```

因此，方向是地点实体的有序序列。

# c++ - C ++加密ascii值打印数组中的返回键

> ID：10015729
> 
> 赞同：2
> 
> 时间：2012-04-04T16:50:19.780
> 
> 标签：c++, arrays, loops, casting, ascii

我有这个功能。它的目标是取数组的最后一个字符，如果是字母则大写。如果它是返回键（ASCII 值 10 ）或空行，也将其打印出来。所有其他字符，不要打印。注意我的 sentinel_value = 10。除了我的 else 语句外，它工作正常。它没有打印返回键。输出全部在一行上。有什么建议么？

```
void EncryptMessage (ofstream& outFile, char charArray[], int length)
{
    int index;
    int asciiValue;
    int asciiValue2;
    char upperCased;
    char finalChar;

    for (index = length-1; index >= 0 ; --index)
    {
        upperCased = static_cast<char>(toupper(charArray[index]));
        if (upperCased >= 'A' && upperCased <= 'Z')
        {
            asciiValue = static_cast<int>(upperCased) - 10;
            finalChar = static_cast<char>(asciiValue);  
            outFile << finalChar;
        }
        else
        {
            asciiValue2 = static_cast<int>(charArray[index]);
            if (asciiValue2 == SENTINEL_VALUE)
            {
                outFile << asciiValue2;
            }   
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:58:04.600

ascii 10 只是一个换行符。EOL 字符因您使用的系统而异
windows = CR LF
linux = LF
osX = CR

代替 `outfile<<asciiValue2;`

尝试 `outfile<<endl;`

endl 扩展为您所在系统的 EOL 字符序列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T17:04:46.123

`asciiValue2`是一个`int`，所以它的 ASCII 值被插入到流中（两个字符，'1' 和 '0'），而不是它的字符表示。声明`asciiValue2`为`char`，你应该没问题。

# c# - 使用 queryover 按月份和年份分组

> ID：10015732
> 
> 赞同：2
> 
> 时间：2012-04-04T16:50:27.803
> 
> 标签：c#, nhibernate, group-by, queryover

我有一个模型，其中包含一个 DateTime 字段和一个 Price 字段。我想得到一个列表，让我汇总月/年 - 数据的价格：

1.  15/01/2012 200
2.  16/01/2012 200
3.  15/02/2012 300
4.  16/02/2012 300
5.  15/03/2012 400
6.  2012 年 3 月 16 日 400

我会得到：

1.  01/2012 400
2.  02/2012 600
3.  03/2012 800

到目前为止，我还没有找到使用 QueryOver 实现此目的的方法。当我尝试查看日期的月/年部分时，我不断收到“无法解析属性”。

那些问题：

[按年分组帖子，然后按月分组](https://stackoverflow.com/questions/6380844/group-posts-by-year-then-by-month)

[按日期年/月分组/排序，使用 NHibernate 进行部分选择（投影？转换？）](https://stackoverflow.com/questions/8377563/group-sort-by-date-year-month-partial-select-with-nhibernate-projection-trans)

使用 LINQ 得到了回答——不是我要找的。

有任何想法吗？谢谢

（使用 NHibernate 3.2）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T00:33:34.370

QueryOver 不是一个好的选择，因为分组需要使用 SQL 表达式来完成。对于这种类型的查询，QueryOver 只是一个没有任何价值的毫无意义的抽象。

如果您必须使用 QueryOver 执行此操作，您可以执行以下操作：

```
session.QueryOver<...>()
   .SelectList(list => list
      .Select(GroupProperty(Projections.SqlProjection(...)))
      .SelectSum(x => x.Price)
   ); 
```

# delphi - 运算符不适用于此操作数类型 过滤表时

> ID：10015737
> 
> 赞同：0
> 
> 时间：2012-04-04T16:50:51.017
> 
> 标签：delphi, delphi-7

我正在尝试使用 2 个不同的过滤器过滤表，以便按下按钮时显示的唯一记录是具有特定 Job_ID 的记录和类型为“私人”的记录。我有以下代码：

```
if CBSearchType.Text = 'Private' then
begin
DBTravel.DataSource.DataSet.DisableControls;
            DBTravel.DataSource.DataSet.Filtered := False;
            DBTravel.DataSource.DataSet.Filter := ('Job_ID = '+edtAddJobID.Text) AND       ('Type = '+QuotedStr('Private'));
            DBTravel.DataSource.DataSet.Filtered := True;
            DBTravel.DataSource.DataSet.First;
            DBTravel.DataSource.DataSet.EnableControls;
end; 
```

但是，当我尝试编译时显示错误消息“运算符不适用于此操作数类型”，有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T16:56:30.757

过滤器属性必须是字符串

```
DBTravel.DataSource.DataSet.Filter := Format('(Job_ID =%s) AND (Type=%s)',[edtAddJobID.Text,QuotedStr('Private')]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T16:56:24.023

我想那`Filter`是一个字符串。因此，您必须给它一个字符串。

```
'(Job_ID = ' + edtAddJobID.Text + ') AND (Type = ' + QuotedStr('Private') + ')'; 
```

# java - Java Web Start 无法加载 db2jcc.jar

> ID：10015738
> 
> 赞同：1
> 
> 时间：2012-04-04T16:51:04.117
> 
> 标签：java, db2, jnlp, java-web-start, securityexception

我已经签署了应用程序所需的每个 jar，但是在尝试启动时，它会产生以下异常：

```
java.lang.SecurityException: class "com.ibm.db2.jcc.DB2Driver" does not match trust level of other classes in the same package
at com.sun.deploy.security.CPCallbackHandler$ChildElement.checkResource(Unknown Source)
at com.sun.deploy.security.DeployURLClassPath$JarLoader.checkResource(Unknown Source)
at com.sun.deploy.security.DeployURLClassPath$JarLoader.getResource(Unknown Source)
at com.sun.deploy.security.DeployURLClassPath.getResource(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at com.sun.jnlp.JNLPClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Unknown Source)
at com.ibm.nzna.shared.db.DatabaseSystem.<init>(DatabaseSystem.java:193)
at com.ibm.nzna.projects.qit.Qit.run(Qit.java:556)
at com.ibm.nzna.projects.qit.Qit.<init>(Qit.java:185)
at com.ibm.nzna.projects.qit.Qit.main(Qit.java:123)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.sun.javaws.Launcher.executeApplication(Unknown Source)
at com.sun.javaws.Launcher.executeMainClass(Unknown Source)
at com.sun.javaws.Launcher.doLaunchApp(Unknown Source)
at com.sun.javaws.Launcher.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

我也签了`db2jcc.jar`。有人可以帮我解决这个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:06:32.727

查看处理错误消息的[其他 SO 线程。](https://stackoverflow.com/questions/4680823/java-lang-securityexception-class-org-apache-log4j-logger-does-not-match-trus)

还有来自[安全公告](http://docs.oracle.com/javase/6/docs/technotes/guides/jweb/mixed_code.html)的信息，

> 在先前检测到混合组件并决定允许它们共存之后，将引发以下两个 SecurityExceptions。异常表明在受信任和不受信任的组件之间检测到组件名称冲突（资源名称或类包名称），并且加载资源或类的请求被拒绝。
> 
> “资源\””+名称+“\”与其他同名资源的信任级别不匹配“”类
> 
> \"" + packageName + "\" 与同一包中其他类的信任级别不匹配"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T07:53:45.550

看看这个[http://bugs.sun.com/view_bug.do?bug_id=6967414](http://bugs.sun.com/view_bug.do?bug_id=6967414)这可能是你的问题的原因。

# sql-server - 更新 sql server 中的 TrimTrialingBlanks

> ID：10015742
> 
> 赞同：-1
> 
> 时间：2012-04-04T16:51:21.090
> 
> 标签：sql-server, sql-server-2005

对于已经存在的表，如何将 sql server 中的表的列`TrimTrialingBlanks`从 No 更改为 Yes？

我用这个

`Update tabelename set TrimTrialingBlanks='yes';`

但这没有用。

> TrimTrialingBlanks 似乎是列属性，而不是表列。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:59:12.580

这里有一些讨论： [http ://www.issociate.de/board/index.php?t=msg&th=144270&rid=0](http://www.issociate.de/board/index.php?t=msg&th=144270&rid=0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T16:57:07.437

我怀疑您所追求的是将固定宽度的数据类型（例如 CHAR）更改为 VARCHAR，例如

```
ALTER TABLE dbo.foo ALTER COLUMN bar VARCHAR(32); 
```

# ruby-on-rails - 设计、Omniauth 和“新会话”

> ID：10015743
> 
> 赞同：3
> 
> 时间：2012-04-04T16:51:21.953
> 
> 标签：ruby-on-rails, authentication, devise, omniauth

我的用户模型中有一个方法（使用设计和可确认）`new_with_session`，根据 Omniauth + Devise （[https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview](https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview)）的要求调用：

```
def self.new_with_session(params, session)
  super.tap do |user|
    if data = session["devise.facebook_data"] && session["devise.facebook_data"]["extra"]["raw_info"] || session["devise.google_data"] && session["devise.google_data"]["extra"]["raw_info"]
      user.email = data["email"]
    end
  end
end 
```

用户可以使用 Google 或 Facebook 登录，我正在使用此行来保存权限`user.email`：

```
if data = session["devise.facebook_data"] && session["devise.facebook_data"]["extra"]["raw_info"] || session["devise.google_data"] && session["devise.google_data"]["extra"]["raw_info"] 
```

但我认为这不是正确的方法，所以...

1.  你知道`user.email`比使用`||`运算符更好的构建方法吗？
2.  如果我想从 Google/Facebook 保存更多数据，例如用户名，我应该将其添加到我的自定义中`new_with_session`吗？如果是这样，为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T04:44:43.093

new_with_session 用于 build_resource。这与可注册的（用户注册表格）一起使用。

这仅在您的 Facebook/Omniauth 会话已经存在并且您希望使用来自omniauth 的一些数据预先填写您的注册表单时才有用。（假设您尚未在回调时自动创建帐户）

```
# Build a devise resource passing in the session. Useful to move
# temporary session data to the newly created user.
def build_resource(hash=nil)
  hash ||= params[resource_name] || {}
  self.resource = resource_class.new_with_session(hash, session)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T14:08:51.653

您是否希望通过 Facebook 或 Gmail 验证系统中的现有帐户，使用电子邮件地址作为标识符，并使用该电子邮件地址创建一个帐户（如果该电子邮件地址尚不存在）？如果是这样，我认为您不需要使用`new_with_session`; 您可以使用您引用的链接中描述的模型方法：

```
def self.find_for_facebook_oauth(access_token, signed_in_resource=nil)
  data = access_token.extra.raw_info
  if user = User.where(:email => data.email).first
    user
  else # Create a user with a stub password. 
    User.create!(:email => data.email, :password => Devise.friendly_token[0,20]) 
  end
end 
```

您可以`self.find_for_google_oauth`在您的`Users::OmniauthCallbacksController`.

如果您想使用 Facebook 或 Google 回调中的其他数据，则在创建用户时，只需将其添加到`User.create!`find_for_oauth 方法的行中，如下所示：

```
User.create!(:email => data.email, 
  :first_name => data.first_name, 
  :last_name => data.last_name, 
  :password => Devise.friendly_token[0,20]) 
```

这对我来说很好，我不需要对`new_with_session`. 但是，我仍在学习 Devise 和 OmniAuth，所以如果这种方法有问题，我很想听听。

# java - ORA-14450: 尝试访问已在使用的事务临时表

> ID：10015747
> 
> 赞同：2
> 
> 时间：2012-04-04T16:51:36.100
> 
> 标签：java, oracle

我的 java 应用程序日志中出现此错误，它使用 java db 连接池。在使用 oracle 临时表之前有人经历过吗？你的解决方案是什么？任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T17:06:53.707

尝试终止连接并重新开始。要查找是否有任何进程正在运行，请尝试使用以下代码并找到正在运行的进程。
**错误原因：** 试图访问已由同一会话的并发事务填充的事务临时表。

**行动：** 在并发事务提交或中止之前，不要尝试访问临时表。

```
SELECT 
   o.object_name
 , s.sid, s.serial#
 , s.username
 , s.osuser, s.machine 
 , 'alter system kill session '''||to_char(s.sid)||','||to_char(s.serial#)||''';' ks  
FROM 
   user_objects o
 , v$lock a
 , v$session s  
WHERE 
 o.object_name = 'table_name_here'     
AND  a.id1 = o.object_id    
AND  a.type = 'TO'    
AND  a.sid = s.sid
; 
```

# javascript - 隐藏表格jQuery的第二行

> ID：10015748
> 
> 赞同：2
> 
> 时间：2012-04-04T16:51:39.520
> 
> 标签：javascript, jquery, html-table, row, hide

第一行是用户输入关键字并点击搜索后要显示的搜索结果的容器。第二行在网站第一次加载时自动显示 5 个随机新闻结果，而没有用户查询。网站加载后，用户输入一些关键字并点击搜索。现在，根据用户关键字返回的结果和 5 条新闻都将在那里。根据 url 是否附加了任何查询字符串，如果是，我需要隐藏第二行。如何选择第二行？

假设 url 只是：[http://mysite/news/pages/default.aspx那么如果 url 像](http://mysite/news/pages/default.aspx)[http://mysite/news/Pages/default.aspx?k=city](http://mysite/news/Pages/default.aspx?k=city)就什么也不做 ，然后隐藏第二行...

```
 <div class="NewsResultsList">   
        <table border="1" id="table">
            <tr><td>News Results based on user queries</td></tr>
            <tr><td>Random news results</td></tr>
         </table>
    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T17:09:31.383

另一种选择是`$(".NewsResultsList table tr :nth-child(2)").hide();`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T17:00:07.593

看看这个选择器

```
$(document).ready(function (){
    $('div.NewsResultsList table tr:eq(1)').remove()
})​ 
```

[这是现场示例](http://jsfiddle.net/WWYp9/1/)

注意：您应该将行的 id 更改为其他名称，因为使用该 id 您可能会在代码中造成混淆

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T16:53:36.930

```
//This will hide the second row of the table.
$(".NewsResultsList table tr").eq(1).hide(); 
```

供参考：[http ://api.jquery.com/eq/](http://api.jquery.com/eq/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T16:54:30.863

许多解决方案。这是我能想到的：

```
$("#table").first().next().hide(); 
```

# java - 用于内存中对象树的树查询语言？

> ID：10015751
> 
> 赞同：9
> 
> 时间：2012-04-04T16:51:46.990
> 
> 标签：java, tree

有哪些选择，最好是在 Java 中？

我见过将 XPath 扩展到对象的[JXPath 。](http://commons.apache.org/jxpath/)还有别的事吗？

编辑：通过树查询语言，我的意思是一种可以创建匹配已组织成树的对象（通过任何属性）的表达式的语言。

编辑2：示例：

假设我有这些对象的树：

```
public interface Node {
  String getName();
  int getValue();
  String getSomeOtherAttribute();
  List<Node> getChildren();
  Node getParent();
} 
```

现在想象一下这些的层次结构。我正在寻找的是可以在这棵树中查询实例的东西。例如“给我所有名称为“bar”、值小于 100 且父节点为“foo”且父节点的父节点为“joe”的 Node 实例。所有这些都使用了简洁的语言。

正如我所说，[JXPath](http://commons.apache.org/jxpath/)是一种选择。寻找他人。我还没有找到。

顺便说一句，我认为 JXPath 查询看起来像“//joe/foo/bar[@value < 100]”（或类似的东西）

```
someroot
    |
   joe
 / | \
c  d  foo
     / \
    f   bar,99 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T16:09:19.137

对于您自己创建的树结构，您可以应用[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)。让您的节点接受访问者并编写各种类型的访问者来检查标准并收集您的对象。

使用访问者还意味着您的代码将是**类型安全**的，而不是字符串内的查询。如果您重命名您的 getter 方法，IDE 将在所有访问者中重命名它们，您的代码仍然可以工作。如果您的查询在字符串内，它可能会中断。

除了 JXPath，还有[JoQL](http://josql.sourceforge.net/)，它使用类似 SQL 的语言来查询对象，但它并不是真正为树型结构而设计的。

# svn - 执行 SVN 日志而不更新

> ID：10015754
> 
> 赞同：3
> 
> 时间：2012-04-04T16:51:55.947
> 
> 标签：svn, logging

似乎表演`svn log`给了我过时的信息，除非我先做`svn update`。但有时我不想更新。有没有办法在不更新的情况下获得最新的日志（至少关于我自己的提交）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T16:55:32.633

尝试：

```
svn log -r 1:HEAD /path/to/working/copy 
```

根据您的喜好替换修订号。

```
Valid options:
  -r [--revision] ARG      : ARG (some commands also take ARG1:ARG2 range)
                             A revision argument can be one of:
                                NUMBER       revision number
                                '{' DATE '}' revision at start of the date
                                'HEAD'       latest in repository
                                'BASE'       base rev of item's working copy
                                'COMMITTED'  last commit at or before BASE
                                'PREV'       revision just before COMMITTED 
```

# jquery - jQuery 页面状态的 URL

> ID：10015755
> 
> 赞同：2
> 
> 时间：2012-04-04T16:51:57.457
> 
> 标签：jquery, url

我正在接管一个“单页”站点，该站点使用大量 jQuery 显示/隐藏指令来导航内容——打开和关闭 div 以显示图像并模拟页面上新窗口的打开和关闭。我需要能够在各种状态下记录页面的“快照”URL。各种状态过于复杂，无法手动一一记录。我梦想着一个名为“立即显示我的动态 URL”的虚构实用程序。我不在乎生成的 URL 是否冗长或不整洁。感谢您的时间和耐心。我通常通过在 stackoverflow 上的热心搜索来解决这类问题。我知道有人问过类似的问题，但事实证明这个标准太高了，我无法找出解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T05:51:50.620

使用[jQuery 地址](http://www.asual.com/jquery/address/)。它在此站点[http://nationallgbtmuseum.org/](http://nationallgbtmuseum.org/)上使用，并允许您为某个 div 设置 /#pagename，并将浏览器滚动到该站点，或者在滚动到该站点时识别该站点，使每个页面都可寻址网站的部分，应该做你想做的事。

# android - 9patch 导致奇怪的 layout_height 问题

> ID：10015761
> 
> 赞同：0
> 
> 时间：2012-04-04T16:52:13.680
> 
> 标签：android, android-layout

我有一个相当简单的布局，带有一个图像，一些文本视图包裹在一个垂直的 LinearLayout 中。每当我将此布局的背景设置为 9patch 时，布局的高度似乎设置为 9patch 的高度（即使 9patch 似乎成功拉伸为布局的高度。）

如果我使用纯色背景色，则布局的高度会按预期工作。

这是 9patch 的截图：

![在此处输入图像描述](../Images/2a3071441005ba17b6bf0459693ea9ad.png)

这是一个带有纯色背景而不是 9patch 的屏幕截图（注意文本现在如何在布局中居中）：

![在此处输入图像描述](../Images/84bfa61804c99f45d12944c9feb08049.png)

最后，这是 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/show_gray"
    android:gravity="center_vertical"
    android:orientation="horizontal" android:weightSum="5">

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="4"
        android:scaleType="centerCrop"
        android:src="@drawable/temp_featured_banner" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:background="#FF0000"
        android:gravity="center"
        android:orientation="vertical"
        android:paddingLeft="30dp" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Large Text"
            android:textColor="@color/white" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Small Text"
            android:textColor="@color/white" />
    </LinearLayout>

</LinearLayout> 
```

...为了以防万一，这里是 draw9patch 的屏幕截图，显示了我的 9patch 可绘制对象：

![在此处输入图像描述](../Images/041208603fcfab7b277bc516bba0ff5a.png)

我怀疑 LinearLayout 没有高于 9patch 的自然尺寸（所以没有什么可以拉伸的......），所以我将 9patch 的高度降低了 50%。问题依然存在。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:56:47.770

在 9-patch 程序中，在底部和右侧画线以选择可以“折叠”的区域。可能会解决你的问题。

[http://developer.android.com/guide/developing/tools/draw9patch.html](http://developer.android.com/guide/developing/tools/draw9patch.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T20:35:37.310

九个补丁的顶部和左侧指的是图像的“可拉伸”区域。九个补丁的右侧和底部定义了内容应该去哪里 - 目前，您只是告诉它猜测（它通过将所有内容放在左上角指定的行中来猜测）。从我从您的图像中可以看出，您可能需要在九个补丁的右侧从上到下的实心黑线（当然，不包括角落），以及与右上角的黑点匹配的点底部。这告诉操作系统将内容与图像相关的位置放在哪里，以便它更好地知道如何拉伸图像。

# c - glutMainLoop（）中的内存损坏？

> ID：10015764
> 
> 赞同：0
> 
> 时间：2012-04-04T16:52:56.213
> 
> 标签：c, opengl, glut, vbo, glew

我的项目在使用 VBO 时遇到了一些麻烦。注意：在尝试使用 VBO 之前，代码运行良好。

这是错误： http: [//pastebin.com/6x7YWtgc](http://pastebin.com/6x7YWtgc)

这是 gdb 回溯： http: [//pastebin.com/zn3aN43b](http://pastebin.com/zn3aN43b)

我的 glut+glew 初始化代码和一些相关的代码和数据结构： [http ://pastebin.com/xEEUc0ix](http://pastebin.com/xEEUc0ix)

ps：由于 fglrx 代码，valgrind 的输出非常巨大。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T02:54:04.397

从我在您的代码中可以看到，您已启用顶点、法线和纹理坐标数组：

```
glEnableClientState(GL_VERTEX_ARRAY);
glEnableClientState(GL_NORMAL_ARRAY);
glEnableClientState(GL_TEXTURE_COORD_ARRAY); 
```

但是，您只设置了指向顶点数组的指针：

```
glVertexPointer(3, GL_FLOAT, sizeof(GPoint), 0); 
```

每当我这样做时，我的程序也会崩溃。尝试注释掉法线和纹理坐标数组，然后再试一次。

# jquery - jQuery如何在溢出隐藏框上显示div

> ID：10015768
> 
> 赞同：2
> 
> 时间：2012-04-04T16:53:04.027
> 
> 标签：jquery, jquery-plugins

我在这里使用简单的 jcarousel 代码：http: [//jsfiddle.net/w6fLA/](http://jsfiddle.net/w6fLA/)

我试图在悬停“li”时显示带有 txt 的 div 框，但溢出隐藏隐藏了元素如何显示所有内容的框顶部？

这是我的js：

```
$('.jcarousel-skin-tango li').hover(
    function(){
        $(this).append($("<div class='box'><p>" + $(this).find('img').attr('alt') + "</p></div>").hide().fadeIn(300));
    },

    function(){
        $('.box').fadeOut(300, function() { $(this).remove();});
    }
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:56:51.363

轮播的实现方式阻止您通过在其中插入工具提示来执行此操作。

一个选项是将级别插入级别作为“位置：绝对”，并使用鼠标坐标控制其位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T17:07:58.493

这仍然需要一些技巧，但不是将工具提示附加到内部元素，而是将其应用于主体。然后使用`offset`图像 jQuery 对象的 top 和 left 属性定位它。我也更改了一些 CSS。

[http://jsfiddle.net/w6fLA/1/](http://jsfiddle.net/w6fLA/1/)

```
$('.jcarousel-skin-tango li').hover(
    function(){
        var $img = $(this).find('img');
        $('body')
            .append($("<div class='box'><p>" + $img
            .attr('alt') + "</p></div>")
            .hide()
            .fadeIn(300)
            .css('top', $img.offset().top + 60)
            .css('left', $img.offset().left + 30));
    },

    function(){
        $('.box').fadeOut(300, function() { $(this).remove();});
    }
);
​ 
```

# c++ - FFmpeg AVPacket 控件

> ID：10015769
> 
> 赞同：1
> 
> 时间：2012-04-04T16:53:04.227
> 
> 标签：c++, ffmpeg

根据 avcodec.h 文件中的文本，有一些解码器可能支持多帧合一`AVPacket`，但`avcodec_decode_video2`方法只解码第一帧......我必须得到所有这些。

在 libavcodec 的源代码中，参数 AVPacket 注意到为`const AVPacket *avpacket`，因此在解码此数据包解码器时无法更改 AVPacket 的字段，我可以更改数据包数据的偏移量或删除已经接收的数据以使解码器循环读取数据包中的所有帧吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:12:29.600

我认为这甚至不会再发生了，但基本上你会做这样的事情：

```
while(packet->size > 0)
{
     int ret = avcodec_decode_video2(..., packet);
     if(ret < -1)
        throw std::exception("error");

     packet->size -= ret;
     packet->data += ret;
}

// NOTE! You have to restore original packet->size and packet->data, or modify a copy, before calling av_packet_free. 
```

# java - 我如何设置从我的 Java 应用程序启动的 MacOS 应用程序包的工作目录？

> ID：10015770
> 
> 赞同：4
> 
> 时间：2012-04-04T16:53:05.420
> 
> 标签：java, macos, working-directory, .app

我在这个网站和谷歌上都做了一些搜索，但没有找到任何信息。我有一个在 Mac OS 中启动 .app 文件的 Java 应用程序。现在我明白 .app 扩展名并不是真正的可执行文件，而是一个应用程序包，其中包含“/Contents/MacOS/”子目录中的可执行文件。

对于我的示例，我将使用应用程序“/Applications/Chess.app”。所以在这种情况下，实际的可执行文件位于“/Applications/Chess.app/Contents/MacOS/”

只是将工作目录设置为“/Applications/Chess.app/Contents/MacOS/”吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T17:30:30.277

Mac 应用程序通常不能依赖被设置为任何特定内容的工作目录。Xcode 将其设置为一种方式，从 Finder 启动将其设置为另一种方式（通常为 /）。

但是，您不应仅通过在 Contents/MacOS 中执行二进制文件来运行应用程序。您应该使用 Launch Services 或 NSWorkspace（或者，如果其中任何一个失败，则 /usr/bin/open）来启动它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T22:01:13.980

我在 [dictionary] "Java" 下以字符串模式设置的 "WorkingDirectory" [key] 下使用 "$APP_PACKAGE/Contents/..." [value]。希望这可以帮助。

我正在尝试按用户更改位置，所以我一直在那里唯一的问题是您的应用程序的大小会成倍增加，但即使您删除所有内容也不会减少，所以我正在尝试解决它告诉我进展如何。祝你好运。

# python - 使用数据存储的简单 GAE 表单中的数据类型异常

> ID：10015773
> 
> 赞同：2
> 
> 时间：2012-04-04T16:53:14.653
> 
> 标签：python, forms, google-app-engine, google-cloud-datastore

我是 GAE 的新手，正在尝试我的第一个示例应用程序。我写了一个简单的 HTML 表单。单击提交时，需要将字段中的详细信息保存在数据存储中。

我的问题是我收到数据类型异常，我不知道我哪里出错了

```
import cgi
import datetime
import urllib
import wsgiref.handlers
import os
from google.appengine.ext.webapp import template

from google.appengine.ext import db
from google.appengine.api import users
from google.appengine.ext import webapp
from google.appengine.ext.webapp.util import run_wsgi_app

class Champion(db.Model):
    champion_first_name = db.StringProperty()
    champion_last_name = db.StringProperty()
    champion_email = db.EmailProperty()
    champion_phone_code = db.IntegerProperty()
    champion_phone_number = db.IntegerProperty()
    diabetic_first_name = db.StringProperty()
    diabetic_last_name = db.StringProperty()
    diabetic_age = db.IntegerProperty()
    diabetic_gender = db.StringProperty()
    diabetic_email = db.EmailProperty()
    diabetic_phone_code = db.IntegerProperty()
    diabetic_phone_number = db.IntegerProperty()
    diabetic_city = db.StringProperty()
    diabetic_zipcode = db.IntegerProperty()
    diabetic_since = db.IntegerProperty()
    diabetic_relationship = db.StringProperty()
    checkup_date = db.DateProperty ()
    md_advert_feedback = db.StringProperty()
    timestamp = db.DateTimeProperty(auto_now_add=True)

class MainPage(webapp.RequestHandler):
    def get(self):
        template_values = {}
        path = os.path.join(os.path.dirname(__file__), 'main.html')
        self.response.out.write(template.render(path, template_values))

    def post(self):
        pledge_data = Champion(champion_first_name = cgi.escape(self.request.get('champ_first_name')),
                    champion_last_name = cgi.escape(self.request.get('champ_last_name')),
                    champion_email = cgi.escape(self.request.get('champ_email')),
                    champion_phone_code = cgi.escape(self.request.get('champ_phone_code')),
                    champion_phone_number = cgi.escape(self.request.get('champ_phone_number')),
                    diabetic_first_name = cgi.escape(self.request.get('diab_first_name')),
                    diabetic_last_name = cgi.escape(self.request.get('diab_last_name')),
                    diabetic_age = cgi.escape(self.request.get('diab_age')),
                    diabetic_gender = cgi.escape(self.request.get('diab_gender')),
                    diabetic_email = cgi.escape(self.request.get('diab_email')),
                    diabetic_phone_code = cgi.escape(self.request.get('diab_phone_code')),
                    diabetic_phone_number = cgi.escape(self.request.get('diab_phone_number')),
                    diabetic_city = cgi.escape(self.request.get('diab_city')),
                    diabetic_zipcode = cgi.escape(self.request.get('diab_zip')))
                    # diabetic_since = cgi.escape(int(self.request.get('diab_since'))))
                    # diabetic_relationship = cgi.escape(self.request.get('diab_relationship')),
                    # md_advert_feedback = cgi.escape(self.request.get('md_ad_feedback'))
                    # checkup_date = cgi.escape(self.request.get('checkup_date')),
                    # )

        pledge_data.put()

application = webapp.WSGIApplication([
    ('/', MainPage),
], debug=True)

def main():
  run_wsgi_app(application)

if __name__ == '__main__':
  main() 
```

我得到的错误是

```
Traceback (most recent call last):
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\ext\webapp\_webapp25.py", line 703, in __call__
    handler.post(*groups)
  File "C:\Users\Rishav\Documents\Google App Engine\helloworld\main.py", line 54, in post
    diabetic_zipcode = cgi.escape(self.request.get('diab_zip')))
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\ext\db\__init__.py", line 945, in __init__
    prop.__set__(self, value)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\ext\db\__init__.py", line 599, in __set__
    value = self.validate(value)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\ext\db\__init__.py", line 3141, in validate
    % (self.name, type(value).__name__))
BadValueError: Property champion_phone_number must be an int or long, not a unicode 
```

我绝对肯定答案会让我大吃一惊，但我现在不明白。我相信我已经输入了正确的数据库模型。此外，我是否在 webform 表单字段中实际输入任何数据也没有什么区别。即使我将字段保留为空然后点击提交，我也会收到相同的错误。

编辑：在这里操作。以防有人对我所做的事情感兴趣；一旦我将所有必填字段数据转换为 int，我发现另一个错误。如果我的任何字段具有空值，我会收到 valueerror 错误。现在我想把我所有的数据输入验证留在客户端。所以我将代码更改为；

```
def post(self):
    pledge_data = Champion()
    try:
        pledge_data.champion_first_name = cgi.escape(self.request.get('champ_first_name'))
        pledge_data.champion_last_name = cgi.escape(self.request.get('champ_last_name'))
        pledge_data.champion_email = cgi.escape(self.request.get('champ_email'))
        pledge_data.champion_phone_code = int(cgi.escape(self.request.get('champ_phone_code')))
        pledge_data.champion_phone_number = int(cgi.escape(self.request.get('champ_phone_number')))
        pledge_data.diabetic_first_name = cgi.escape(self.request.get('diab_first_name'))
        pledge_data.diabetic_last_name = cgi.escape(self.request.get('diab_last_name'))
        pledge_data.diabetic_age = int(cgi.escape(self.request.get('diab_age')))
        pledge_data.diabetic_gender = cgi.escape(self.request.get('diab_gender'))
        pledge_data.diabetic_email = cgi.escape(self.request.get('diab_email'))
        pledge_data.diabetic_phone_code = int(cgi.escape(self.request.get('diab_phone_code')))
        pledge_data.diabetic_phone_number = int(cgi.escape(self.request.get('diab_phone_number')))
        pledge_data.diabetic_city = cgi.escape(self.request.get('diab_city'))
        pledge_data.diabetic_zipcode = int(cgi.escape(self.request.get('diab_zip')))
        pledge_data.diabetic_since = int(cgi.escape(self.request.get('diab_since')))
                # diabetic_relationship = cgi.escape(self.request.get('diab_relationship')),
                # md_advert_feedback = cgi.escape(self.request.get('md_ad_feedback'))
                # checkup_date = cgi.escape(self.request.get('checkup_date')),
                # )
    except ValueError:
        pass

    pledge_data.put() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T16:59:57.297

快速解决方法是显式转换，例如：

```
...
champion_phone_number = int(cgi.escape(self.request.get('champ_phone_number'))),
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T17:24:36.893

所有请求参数都是字符串。如果您需要该属性是其他类型，例如 Champion_phone_number 您需要将其显式转换为 int()

# objective-c - 从触摸点获取单个像素

> ID：10015774
> 
> 赞同：2
> 
> 时间：2012-04-04T16:53:15.823
> 
> 标签：objective-c, ios, cocoa-touch, touch, multi-touch

是否可以检测到每个被触摸的像素？更具体地说，当用户触摸屏幕时，是否可以跟踪用户触摸的点簇的所有 xy 坐标？我如何区分用户何时用拇指绘图和何时用指尖绘图？我想根据用户触摸屏幕的方式来反映画笔差异，并且还想跟踪所有被触摸的像素。

我目前正在使用来自 Apple 开发人员网站的 GLPaint 示例中的以下代码：

[http://developer.apple.com/library/ios/#samplecode/GLPaint/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/GLPaint/Introduction/Intro.html)

示例代码允许使用预定义的画笔大小进行绘图并沿途跟踪 xy 坐标。如何根据用户触摸屏幕的方式更改画笔并跟踪所有被触摸的像素？

```
// Drawings a line onscreen based on where the user touches

- (void) renderLineFromPoint:(CGPoint)start toPoint:(CGPoint)end

{
     NSLog(@"x:%f   y:%f",start.x, start.y);

     static GLfloat*          vertexBuffer = NULL;

     static NSUInteger     vertexMax = 64;

     NSUInteger               vertexCount = 0,

                    count,

                    i;

     [EAGLContext setCurrentContext:context];

     glBindFramebufferOES(GL_FRAMEBUFFER_OES, viewFramebuffer);

     // Convert locations from Points to Pixels

     CGFloat scale = self.contentScaleFactor;

     start.x *= scale;

     start.y *= scale;

     end.x *= scale;

     end.y *= scale;

     // Allocate vertex array buffer

     if(vertexBuffer == NULL)

          vertexBuffer = malloc(vertexMax * 2 * sizeof(GLfloat));

     // Add points to the buffer so there are drawing points every X pixels

     count = MAX(ceilf(sqrtf((end.x - start.x) * (end.x - start.x) + (end.y - start.y) * (end.y - start.y)) / kBrushPixelStep), 1);

     for(i = 0; i < count; ++i) {

          if(vertexCount == vertexMax) {

               vertexMax = 2 * vertexMax;

               vertexBuffer = realloc(vertexBuffer, vertexMax * 2 * sizeof(GLfloat));

          }

          vertexBuffer[2 * vertexCount + 0] = start.x + (end.x - start.x) * ((GLfloat)i / (GLfloat)count);

          vertexBuffer[2 * vertexCount + 1] = start.y + (end.y - start.y) * ((GLfloat)i / (GLfloat)count);

          vertexCount += 1;

     }

     // Render the vertex array

     glVertexPointer(2, GL_FLOAT, 0, vertexBuffer);

     glDrawArrays(GL_POINTS, 0, vertexCount);

     // Display the buffer

     glBindRenderbufferOES(GL_RENDERBUFFER_OES, viewRenderbuffer);

     [context presentRenderbuffer:GL_RENDERBUFFER_OES];

}

// Handles the start of a touch

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event

{

     CGRect                    bounds = [self bounds];

     UITouch*     touch = [[event touchesForView:self] anyObject];

     firstTouch = YES;

     // Convert touch point from UIView referential to OpenGL one (upside-down flip)

     location = [touch locationInView:self];

     location.y = bounds.size.height - location.y;

}

// Handles the continuation of a touch.

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event

{  

     CGRect                    bounds = [self bounds];

     UITouch*               touch = [[event touchesForView:self] anyObject];

     // Convert touch point from UIView referential to OpenGL one (upside-down flip)

     if (firstTouch) {

          firstTouch = NO;

          previousLocation = [touch previousLocationInView:self];

          previousLocation.y = bounds.size.height - previousLocation.y;

     } else {

          location = [touch locationInView:self];

         location.y = bounds.size.height - location.y;

          previousLocation = [touch previousLocationInView:self];

          previousLocation.y = bounds.size.height - previousLocation.y;

     }

     // Render the stroke

     [self renderLineFromPoint:previousLocation toPoint:location];

}

// Handles the end of a touch event when the touch is a tap.

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event

{

     CGRect                    bounds = [self bounds];

    UITouch*     touch = [[event touchesForView:self] anyObject];

     if (firstTouch) {

          firstTouch = NO;

          previousLocation = [touch previousLocationInView:self];

          previousLocation.y = bounds.size.height - previousLocation.y;

          [self renderLineFromPoint:previousLocation toPoint:location];

     }

}

// Handles the end of a touch event.

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event

{

     // If appropriate, add code necessary to save the state of the application.

     // This application is not saving state.

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:59:29.123

AFAIK 没有 API 可以访问触摸区域进行触摸。考虑到电容式触摸屏的限制，我什至不确定你想要的东西在物理上是否可行。我记得最近在 Cocoa Heads 上的一个演示文稿，其中展示了一些信息在 OS X（通过私有 API）上可用于触控板，但不适用于 iOS。

我相信这是图形输入板采用内置传感器技术的特殊触控笔的原因之一。

对于绘图应用程序，部分解决方法可能是像某些桌面应用程序那样模拟“墨迹书写”：如果用户的触摸停留在给定的位置，则绘制好像墨水从“笔”中流出并逐渐扩散到“纸。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-29T08:59:19.317

iPad 中的 Broadcomm 硬件以 64 Hz 的频率扫描屏幕。它通过在构成触摸屏电极的 39 个透明导电层上连续放置一个信号，每个信号持续 400 µs。如果您的手指在 0.015625 秒内移动超过一个像素距离，这很可能，硬件无法检测到这一点，因为它正忙于测量屏幕的其他部分以获取更多触摸事件。

无论 iOS 还是 Android，这都是一样的。廉价的 Android 平板电脑和大屏幕的扫描率较低，因此它们的触摸事件间隔更广。

Wacom 数位板以 100 Hz 的频率运行数字化仪，因此点的顺序会更精细，但仍然会错过触控笔在两次测量之间接触的那些像素。

# c++ - cout a boost::range of elements

> ID：10015775
> 
> 赞同：1
> 
> 时间：2012-04-04T16:53:16.980
> 
> 标签：c++, boost, boost-range

Boost Ranges 是否有内置方法来轻松计算元素，例如用逗号或空格分隔？

我当然知道我可以遍历它们并分别打印它们，但在我看来，这应该以某种方式内置（比如用脚本语言打印矢量）。

在我看到的一个示例程序中，作者将范围复制到 cout：

> boost::copy(范围, ostream_iterator(cout, " "))

在我看来很难看。这是惯用语吗？

编辑： std 迭代器的解决方案也是可以接受的。

EDIT2：我想做的是：

```
cout << range; 
```

但我认为这行不通。所以我希望是这样的（受 Python 启发）：

```
cout << range.join(", "); 
```

或者可能使用范围适配器。

```
cout << (range | stringify(", ")); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T16:57:48.890

我不相信它曾经真正完成/抛光，但这就是[Boost.Explore](http://svn.boost.org/svn/boost/sandbox/explore/boost/)的意图。

就个人而言，我刚刚习惯了使用`std::copy`. 对于这类事情，an[`infix_ostream_iterator`](https://stackoverflow.com/questions/3496982/printing-lists-with-commas-c/3497021#3497021)有时会很有帮助。例如，像这样：

```
#include <vector>
#include <iostream>
#include <algorithm>
#include <iterator>
#include "infix_iterator.h"

template <typename T>
std::ostream& operator<<(std::ostream &o, const std::vector<T>& v) { 
    o << "[";
    std::copy(v.begin(), v.end(), infix_ostream_iterator<T>(o, ", ")); 
    o << "]";
    return o; 
}

int main() { 

    std::vector<int> x;

    for (int i=0; i<20; i+=2)
        x.push_back(i);

    std::cout << x << "\n";
    return 0;
} 
```

就目前而言，这`operator<<`需要一个向量，但是让它取一个范围相对来说是微不足道的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T19:41:40.180

您可能想要定义一个通用函数来输出前向可迭代范围。这是我使用的 join() 函数：

```
template<typename ForwardIter>
std::string join(const ForwardIter& it1, const ForwardIter& it2, const std::string& separator=" ") {
    if(it1 != it2) {
        std::ostringstream s;
        s << *it1;
        for(ForwardIter i=it1+1; i!=it2; i++)  s << separator << *i;
        return s.str();
    }
    else return "";
}

template<typename Range>
std::string join(const Range& r, const std::string& separator=" ") { return join(r.begin(), r.end(), separator); } 
```

该函数返回一个字符串，它应该采用任何向前可迭代的范围，例如列表、向量、集合等，其中每个元素的取消引用可以由 ostream 单独输出。使用此功能，您可以像这样使用它：

```
list<int> a = {1,2,3,4};
set<int> b = {4,3,2,1};
vector<int> c = {1,2,3,4};

cout << join(a) << endl;
cout << join(b, ",") << endl;
cout << join(c.begin(), c.begin()+2, "~") << endl; 
```

我记得 join() 名称可能会与某些命名空间发生冲突，因此您可能希望将名称更改为类似的名称，例如加入或联合。此外，如果您曾经使用过 boost，您可能希望使用 boost::begin(r) 而不是 r.begin() 以获得更好的兼容性。

# ios - 比较和获取存储在两个 NSDictionary 中的对象

> ID：10015779
> 
> 赞同：0
> 
> 时间：2012-04-04T16:53:30.693
> 
> 标签：ios, ios5, ios4, nsdictionary

我如何获取不在第一个 NSDictionary 中但在第二个中的对象？下面的方法给了我几次相同的对象

```
 for (NSString *numCodetmp in numCodeForInsertingRow) {
                for (NSString *numCodeInsertmp in numCode) 
                   if (![numCodetmp  isEqualToString:numCodeInsertmp])
                       NSLog(@"Equal : %@, %@ ",numCodetmp,numCodeInsertmp);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:17:56.570

因此，请注意，当您像以前那样嵌套 for 循环时，外部 for 循环会在内部 for 循环的每次完整迭代中执行*一次。*其次，您的 if 语句检查与 NSLog 语句所说的相反的内容。您的 if 语句将 numCodeTmp 与 numCodeInsertmp 进行比较，并返回一个布尔值，说明它们是否相等。然后，您反转该结果并检查其计算结果是否为真。因此，您是说如果两者不相等（这将评估为真......令人困惑，我知道），打印 Equal : %@, %@。我假设您打算删除“！”。

好的，现在讨论更大的问题。如果您要比较字典中的对象，则必须为其提供访问该特定对象的键。我无法从您上面提供的代码中分辨出 numCodeForInsertingRow 和 numCode 是什么，但是如果它们是字典，那么您就不能正确地从中获取对象。如果您只是比较字符串，比较 NSSet 将是一种更简单的检查差异的方法。如果字符串是字典中对象的键，而这就是您要比较的，则需要

1.  使用 [dict allKeys] 创建一个键数组，然后以这种方式运行你的 for 循环。这假设如果 Obj1 存在于 Dict1 和 Dict2 中，则 Key1 在两者中是相同的。
2.  为每个字典的特定键创建一个对象数组。如果 [dict1Array count] > 0 && [dict2Array count] > 0，则对象在两个字典中都存在

还有很多其他的方法可以比较，但是 NSSet 和上面的两点只是几个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T00:35:24.287

// 假设您有 NSMutableDictionary 对象，并且键值是您可以用于比较的 PK：

```
for (NSString *firstSetKey in firstSet)
{
     [secondSet removeOjbectForKey:firstSetKey];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T20:44:23.117

使用 allKeys 方法从第二个字典中获取所有键。

用一个

```
for (object in dictionary) 
```

for 循环的样式来循环遍历这些键。

依次使用每个键来查看另一个字典中是否存在具有该键的对象。（使用 objectForKey）。如果给定的键在另一个字典中不存在，那就是您要查找的项目之一。

另一个发布者使用 keysOfEntriesPassingTest 方法的想法可能也可以，但是如果您对块不满意，那么实现起来可能会有点混乱。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T17:28:45.540

也许您可以使用[keysOfEntriesPassingTest:](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsdictionary_Class/Reference/Reference.html)方法？就像是：

```
NSSet *keysInDictTwoOnly;
keysInDictTwoOnly = [secondDict keysOfEntriesPassingTest:^(id key, id obj, BOOL *stop){
    return ([firstDict objectForKey:key] != obj);
}]; 
```

即，`keysInDictTwoOnly`如果某个键不在其中，`firstDict`或者`firstDict`该键下的对象与`secondDict`该键下的对象不同，则该键在其中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T20:54:30.920

我会这样做：

```
NSArray *keys = [dictionary allKeys];

for (int i = 0; i < keys.count; i++)
{
    for (int j = i + 1; j < keys.count; j++)
    {
         if ([[keys objectAtIndex:i] isEqual:[keysObjectAtIndex:j]])
         {
             // insert code here
         }
    }
} 
```

这样做的好处是不相互比较密钥并且不比较多次，以及提高性能。

# java - 对如何验证 spring mvc 表单感到困惑，我有什么选择？

> ID：10015782
> 
> 赞同：6
> 
> 时间：2012-04-04T16:53:37.563
> 
> 标签：java, spring, validation, spring-mvc, freemarker

最新的spring mvc，使用freemarker。

希望有人能告诉我在使用 spring mvc 验证表单方面我的选择是什么，以及推荐的方法是什么。

我有一个不直接映射到模型的表单，它具有输入字段，当发布时，将用于初始化 2 个模型对象，然后我需要对其进行验证，如果它们通过，我将保存它们。

如果失败，我想返回表单，用用户输入的内容预先填写值并显示错误消息。

我在这里和那里阅读了大约 2 种方法，其中一次我已经完成并了解它是如何工作的：

```
@RequestMapping(...., method = RequestMethod.POST)
public ModelAndView myMethod(@Valid MyModel, BindingResult bindingResult) {
  ModelAndView mav = new ModelAndView("some/view");
  mav.addObject("mymodel", myModel);

  if(bindingResult.hasErrors()) {
     return mav;
  }

} 
```

现在，如果我的表单直接映射到表单，这可以工作，但在我的情况下，我有：

1.  不映射到任何特定模型的表单字段，它们具有来自 2 个模型的一些属性。

2.  在验证发生之前，我需要手动创建 2 个模型，从表单中设置值，并手动设置一些属性：

3.  在两个模型（model1、model2）上调用 validate，并将这些错误消息附加到错误集合中，如果事情不起作用，我需要将其传递回同一视图页面。

4.  当表单发布时，我必须进行一些数据库调用，并且基于这些结果可能需要将其他消息添加到错误集合中。

有人可以告诉我如何进行这种验证吗？

伪代码如下：

```
 Model1 model1 = new Model1();
   Model2 model2 = new Model2();

   // manually or somehow automatically set the posted form values to model1 and model2.

   // set some fields manually, not from posted form
   model1.setProperty10(GlobalSettings.getDefaultProperty10());
   model2.setProperty11(GlobalSettings.getDefaultProperty11());

   // db calls, if they fail, add to errors collection

   if(bindingResult.hasErrors()) {
     return mav;
   }

   // validation passed, save
   Model1Service.save(model1);
   Model2Service.save(model2);

   redirect to another view 
```

**更新**

我现在在我的模型上使用了 JSR 303 注释，如果我还能使用这些注释那就太好了。

**更新二**

请阅读下面的赏金描述，了解我正在寻找的内容的摘要。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-08T17:27:05.807

基于类似的经验，我会提出以下建议，另一方面，我对您要采取的方法的最后一步发表评论。我使用您编号的步骤列表。

> 第 1 步：形成 Bean

有两种方法。简单的方法是定义一个表单bean（我想你已经完成了）：

```
class MyModel {
  private Model1 model1;
  private Model2 model2;
  // standard Java bean stuff
} 
```

更精确的方法是实际定义`MyModel`这样我只借用需要的字段，`Model1`但`Model2`我不确定这是否适合你的方式。

> 第 2 步：数据绑定

如果您的视图中有这样`form`的结构，Spring 会为您执行此操作：

```
<form:form modelAttribute="myModel">
  <form:input path="model1.somePropertyToBeSet" />
</form:form> 
```

> 第 3 步：验证

使用[Spring 自定义验证](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/validation.html#validation-beanvalidation-spring-constraints)，您可以定义自定义约束：

```
@interface Model1Constraint {}
@interface Model2Constraint {}

class MyModel1 {

  @Model1Constraint
  private Model1 model1;

  @Model2Constraint
  private Model2 model2;

  // ...

} 
```

然后为自定义约束注册您的自定义验证器：

```
class Model1ConstraintValidator implements ConstraintValidator<Model1Constraint, Model1> {
// implementation of isValid and initalize
} 
```

对于`Model2Constraint`. `MyModel`使用自定义验证器，您可以检查在将哪些逻辑传递到请求处理方法之前需要确保。我还假设您曾经`<mvc:annotation-driven />`让 Spring 注册验证器；否则，您应该配置它们。

> 第四步：请求处理前的自定义模型处理

您最初的想法是使用一些*数据绑定器*来完成这项工作。在您的描述中，您还提到此数据处理*不*依赖于来自表单数据的数据。

关于设计和模块化，我不认为数据绑定器是实现此目的的好地方。其次，由于表单没有数据依赖性，因此您的主要原因是允许数据绑定错误处理。

所以，我的建议是，假设现在你在`public ModelAndView myMethod(@Valid MyModel model, BindingResult bindingResult)`. 大概，您可以在此处访问其他服务 bean。因此，您可以在某个服务 bean 中拥有一个方法，该方法可以`refine`或`prepare`（只是命名）`model`您在这一点上填充的方法。根据*异常*或任何其他适合您的机制，您可以使用`bindingResult`再次返回错误。

作为另一个建议，如果您想要更多的 DI/IoC 方式，您也可以利用[Spring 拦截器。](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-interceptors)但是这样，你应该`MyModel`从`ModelAndView`拦截中提取并继续。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T12:05:28.747

这里有很棒的解释，请检查[Integrating Spring MVC 3.0 with JSR 303 (aka javax.validation.*)](http://www.openscope.net/2010/02/08/spring-mvc-3-0-and-jsr-303-aka-javax-validation/)

也检查以下示例[JSR 303 Bean Validation Using Spring 3](http://blog.inflinx.com/2010/03/10/jsr-303-bean-validation-using-spring-3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T15:36:40.230

这是一个不寻常的问题，因为验证用户输入通常最有意义，因为这是我们无法控制的数据。话虽如此，而且我确定你已经知道了……

一种选择是在从用户输入、数据库等填充模型对象后，直接使用 JSR 303 验证 api 来验证模型对象。

这是一个例子：

```
@RequestMapping(value=...)
public String myMethod(MyForm form, Model m) {

    ValidatorFactory factory = Validation.buildDefaultValidatorFactory();
    Validator validator = factory.getValidator();

    Model1 model1 = createModel1FromUserInput(form);
    Model2 model2 = createModel2FromUserInput(form);

    Set<ConstraintViolation<?>> modelViolations = validator.validate(model1);
    modelViolations.add(validator.validate(model2));
    if(modelViolations.size() != 0) {
        m.addAttribute("violations", modelViolations);
        m.addAttribute("form", myForm); // add the form back to the model so it is populated
        return "formPage";
    }
    return "successPage";
} 
```

您可能更喜欢绑定到 Spring BindingResult 或错误集合。我没有测试过下面的代码，并且直接使用 BindingResult 不是很舒服，所以它需要调整：

```
BindingResult result = ... // not sure about the constructor
for(ConstraintViolation<?> violation : modelViolations) {
        result.addError(new ObjectError(violation.getPropertyPath().toString(),violation.getMessage()));
} 
```

如果您只是想在 JSP 上吐出错误，那么使用 a`Set<ConstraintViolation>`可能足以满足您的需求：

```
<c:forEach items="${violations}" var="violation">
    ${violation.propertyPath}: ${violation.message} <br/>
</c:forEach> 
```

如果您尝试使用 Spring 的`<form:errors>`标签，则需要使用绑定结果。

！如果您还有其他问题，请告诉我。或者，如果我完全错过了这个答案的标记，我会尽力澄清。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T13:27:29.447

Hibernate Validator 4.2 支持方法级验证。您可以稍微重构您的代码以在一个方法中传递这两个模型，并验证它们。

[http://java.dzone.com/articles/method-validation-spring-31](http://java.dzone.com/articles/method-validation-spring-31)

你可以有这样的东西

```
public void persistUser(@NotNull @Valid Model1 model1, @NotNull @Valid Model2 model2) {

      //continue ...
} 
```

# c - 使用 difftime 循环参数

> ID：10015784
> 
> 赞同：1
> 
> 时间：2012-04-04T16:53:48.753
> 
> 标签：c

我正在尝试根据时间创建一个循环函数。迭代后，它将每 60 秒打印一次“60 秒过去”。但是这段代码导致我“通过了 60 秒”，而实际上我的手表甚至还没有显示 1 分钟。我在下面尝试过，但我希望它会向我显示这些信息，但它没有（只有第一对迭代行数。之后不是..）

任何人都可以在这件事上提供帮助吗？谢谢

```
#include <stdio.h>
#include <time.h>

int main()
{
time_t start,stop;
start = time(NULL);
time(&start);
int iteration, i;
    for (iteration = 1; iteration <= 500; iteration++) {
            for (i = 0; i <= 50; i++) {
                     printf("looping while waiting 60 second..\n");

             }
            stop = time(NULL);
            int diff = difftime(start, stop);
            if (diff % 60 == 0) {
                     printf("60 second passed..");}
            }

    return 1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T17:02:23.973

`difftime`甚至在一秒钟过去之前，以下代码可能会被执行多次。结果，`difftime`将返回一个 < 1 的值，该值被您的隐式强制转换截断为 0。当然`0 % 60 == 0`。

编辑：

你可能会考虑这样的事情：

```
start = time(NULL);
for(; /* some condition that takes forever to meet */;) {
    // do stuff that apparently takes forever.
    stop = time(NULL);
    double diff = difftime(stop, start);
    if (diff >= 60) {
        printf("60 seconds passed...");
        start = time(NULL);
    }
} 
```

另请注意，在您的示例代码中，`start`应该`stop`在调用`difftime`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T17:09:06.797

difftime 很可能等于 0。如果你想等待 60 秒，你应该考虑使用函数：

*   `usleep`在 Linux 上
*   `sleep`在窗户上

# c# - 具有关系的 DataGridView（显示名称，而不是 id）

> ID：10015793
> 
> 赞同：0
> 
> 时间：2012-04-04T16:54:07.267
> 
> 标签：c#, .net, datagridview

**描述：**

我有一个关于`DataGridView`. 我需要显示一个`Client_Name`而不是`Id_client` 这是`Product`表，它与表有关系`Client`。

**图片 ：** ![在此处输入图像描述](../Images/64c5ea7e3b9ddf8f16c39413ba66c610.png)

我正在使用 Access DB 和 DataSet。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T17:00:48.563

为了避免必须执行多个查询来获取每个产品的客户名称，您应该在查询中包含与客户表的内部联接，并返回客户名称以及产品数据。

```
SELECT      pro.*, cli.[Name] as ClientName 
FROM        Products pro
INNER JOIN  Clients cli ON cli.Id = pro.ClientId 
```

如果您指定数据访问策略，我们可以提供更多帮助。

# ruby - Cassandra 删除给超时异常

> ID：10015802
> 
> 赞同：1
> 
> 时间：2012-04-04T16:54:47.173
> 
> 标签：ruby, exception, cassandra, timeout

我正在使用 Cassandra 1.0.8 版本。来自 ruby​​-client 和 cassandra-cli 的删除请求总是给出超时异常。使用的列族的属性是

```
[default@sample_ks] show keyspaces;            
Keyspace: sample_ks:
  Replication Strategy: org.apache.cassandra.locator.SimpleStrategy
  Durable Writes: true
    Options: [replication_factor:1]
  Column Families:
    ColumnFamily: sample_cf
      Key Validation Class: org.apache.cassandra.db.marshal.AsciiType
      Default column value validator: org.apache.cassandra.db.marshal.UTF8Type
      Columns sorted by: org.apache.cassandra.db.marshal.LongType
      Row cache size / save period in seconds / keys to save : 0.0/0/all
      Row Cache Provider: org.apache.cassandra.cache.ConcurrentLinkedHashCacheProvider
      Key cache size / save period in seconds: 200000.0/14400
      GC grace seconds: 864000
      Compaction min/max thresholds: 4/32
      Read repair chance: 1.0
      Replicate on write: true
      Bloom Filter FP chance: default
      Built indexes: []
      Compaction Strategy: org.apache.cassandra.db.compaction.SizeTieredCompactionStrategy 
```

TimeOut 异常的原因是什么？他们怎么能避免..？？

# spring - 如何在春季将数据从控制器传递到前端

> ID：10015804
> 
> 赞同：1
> 
> 时间：2012-04-04T16:54:52.183
> 
> 标签：spring, spring-mvc

我是 spring 新手，在 spring3.0 中创建一个应用程序我正在使用注释 spring。

我想从我的控制器方法返回列表到jsp。该列表将显示在选择框中。以下是控制器和jsp部分的代码。请帮助我理解这一点。

```
public String showUserForm(ModelMap model)  
{       
  User user = new User();
  model.addAttribute(user);
  List<String> lookingfor=service.getOptions();
  //want to send this "lookingfor" to the jsp       
  return "welcome";     
} 
```

和 JSP

```
<td>    
  <form:select path="lookingfor">
  <form:option value="0" label="Select" /> 
  <form:options items="${lookingfor}" itemValue="lookingfor" itemLabel="lookingfor" />                 </form:select>           
</td> 
```

在模型中添加用户时，它工作正常，但是当我添加查找属性时。 **model.addAttribute("寻找", 寻找);**

> 它给出以下错误。
> 
> 严重：servlet jsp 的 Servlet.service() 抛出异常 org.springframework.beans.NotReadablePropertyException：bean 类 [java.lang.String] 的无效属性“查找 gfor”：bean 属性“查找”不可读或无效getter 方法：getter 的返回类型是否与 setter 的参数类型匹配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T17:03:39.233

您必须将 lookingFor 列表作为属性添加到 ModelMap 对象中：

```
model.addAttribute("lookingfor", lookingfor); 
```

还要验证属性“itemValue”和“itemLabel”的用法，因为 itemValue 和 itemLabel 都引用了lookingFor 列表项的属性。您在两者上使用相同的值，这是错误的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T17:07:38.880

你也可以返回 ModelAndView

例如

```
public ModelAndView showUserForm()  
{  
  mv= new ModelAndView("welcome");     
  User user = new User();
  mv.getModel.put("user",user);
  List<String> lookingfor=service.getOptions();
  //want to send this "lookingfor" to the jsp 
  mv.getModel().put("lookingfor",lookingfor);      
  return mv;     
} 
```

编辑：作为对下面评论的回应，请查看 itemValue 这应该是您正在寻找的对象的属性之一，请参阅此国家/地区列表示例

```
 <form:options items="${countryList}" itemValue="code" itemLabel="name"/> 
```

其中 list 是国家对象的列表，代码和名称是国家对象的属性

编辑2

所以就在jsp中做

```
<c:forEach var="item" items="${lookingfor}">
 <form:option value="${item}"/>
</c:forEach> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T17:10:08.200

你也可以这样使用

```
@RequestMapping("get_vendor_tests.htm")
    public ModelAndView getVendorTests(@RequestParam int vendorId,Map<String, Object> map){
        try {
            map.put("vendor", vendorService.getVendor(vendorId));
            return new ModelAndView("vendor_tests","message",map);
        } catch (Exception e) {
            // TODO Auto-generated catch block
            //e.printStackTrace();
            logger.error("In vendor tests for vendor Id:"+vendorId+"",e);
            return new ModelAndView("error","message", e);
        }

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T17:11:51.617

使用模型传回列表

```
public String showUserForm(ModelMap model)  {       
  User user = new User();       
  model.addAttribute(user);
  //want to send this "lookingfor" to the jsp           
  List<String> lookingfor=service.getOptions();
  model.addAttribute("lookingFor", lookingFor);                 
  return "welcome";     
} 
```

在您的 jsp 中显示如下选项：

```
 <form:select path="lookingFor">
      <form:option value="-" label="--Please Select"/>
      <form:options items="${lookingFor"}"/>
  </form:select> 
```

# c# - 在每一页上放置一个报告标题

> ID：10015810
> 
> 赞同：1
> 
> 时间：2012-04-04T16:55:32.907
> 
> 标签：c#, html, css, razor

我有使用 2010 .NET 的 HTML 视图，我以报告格式生成它，以便用户可以查看和打印它。但是，当报告超过一页时，报告标题显然不会出现在第 2,3 页上，依此类推。我听说可以使用 CSS 来强制标题出现在每个页面上。

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T16:58:44.847

您可以使用[打印 CSS](http://www.alistapart.com/articles/goingtoprint/)。它是打印时应用的特定 CSS。所以你可以在你的主 CSS 中隐藏标题并在你的打印 CSS 中显示它。

# python - 运行 Satchmo 商店

> ID：10015812
> 
> 赞同：0
> 
> 时间：2012-04-04T16:55:49.390
> 
> 标签：python, django, satchmo, django-1.4

Python2.7、Django1.4

```
 Browser: A server error occurred.  Please contact the administrator.

 Server Error:

  File "/home/edinteri/public_html/old/boxdecor/admin.py", line 6, in <module>
    from edinteriores.boxdecor.models import Boxdecor, Imagens, Historico, Producto_exterior, Estado, Numeros_de_serie, Comentario, Alerta, ProjectoObra
ImportError: No module named edinteriores.boxdecor.models 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T16:41:52.390

包名称“edinteriores”与您的用户名非常相似。您应该找到您的包并将其添加到 Python 路径。一个简单的解决方案是

```
python manage.py ... --pythonpath=some-path 
```

或设置 PYTHONPATH 环境变量或直接在 manage.py 中扩展 sys.path 或使用 virtualenv。

如果你移动了它，重新编译包可能会很有用，以便在回溯中查看正确的信息等：`cd .../edinteriores; python -m compileall -f $(pwd)`

# html - 如何从搜索结果/关键字中删除页面元素？

> ID：10015813
> 
> 赞同：0
> 
> 时间：2012-04-04T16:55:53.190
> 
> 标签：html, search-engine, seo

问题就在这里。我有带有表单的简单页面，没有太多其他文本内容。以我的形式，例如：

```
 <h1>It should be my search result</h1>
        <form>
    <select name="Months">
          <option>January</option>
          <option>February</option>
...
          <option>December</option>
    </select>
        </form> 
```

在搜索结果/页面关键字中，我有比其他重要内容更多的月份名称，其中关键字应该是它应该是我的搜索结果。如何从结果中禁用选择内容？可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:03:02.567

这是一篇关于 4 种方法向 Google 隐藏内容的文章

[http://www.searchenginejournal.com/4-ways-to-hide-content-from-google-and-googles-reaction/6782/](http://www.searchenginejournal.com/4-ways-to-hide-content-from-google-and-googles-reaction/6782/)

我会使用将导航移动到代码底部的选项，然后使用 CSS 重新定位它，以便它出现在您想要的位置。然后从用户的角度来看，它会出现在顶部，而从谷歌的角度来看，它会出现在底部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:54:23.080

当您尝试在标记级别优先考虑内容时，重新定位代码（如另一个答案中所述）确实有效。但是，它不会处理您要抑制的月份名称的关键字密度。

如果您的页面上充斥着多个相同 12 个月的下拉列表；您可以在页面加载完成后使用 Javascript 添加下拉菜单。它将从 Google Crawlers 中抑制它，同时也将它留给网站访问者。当然，过多的 Javascript 会影响性能。

（注意：在 SEO 级别上，Google 不喜欢您向 Google 显示的页面与显示给网站访问者的页面不同；但我认为这不会伤害您）。

如果您的月份名称确实在搜索结果内容中，您可以尝试使用服务器端代码（PHP、ASP.NET 等）完全过滤掉月份名称或用省略号替换它们；虽然，可能会令人困惑

这实际上取决于您的结果页面的外观。需要更多信息才能更好地了解解决问题的最佳方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-05T19:52:19.470

不保证这会起作用（它可能被视为欺骗机器人），但尝试将月份分成无意义的部分`<wbr>`。

```
<select name="Months">
      <option>Ja<wbr>nuary</option>
      <option>Fe<wbr>bru<wbr>ary</option>
...
      <option>Dece<wbr>mber</option>
</select> 
```

# ruby-on-rails - 为什么我的 Paperclip validates_attachment_presence 测试失败？

> ID：10015814
> 
> 赞同：0
> 
> 时间：2012-04-04T16:55:55.367
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paperclip, paperclip-validation

在我的 Rails 3.2.2 项目中，我有以下内容：

```
class Photo < ActiveRecord::Base
  belongs_to :album
  default_scope order: :title

  extend FriendlyId
  friendly_id :title, :use => :slugged
  validates :title, :presence => true
  validates :title, :uniqueness => {:scope => :album_id}
  validates :file, :attachment_presence => true

  has_attached_file :file, :path => (Rails.root + "photos/:id/:style/:filename").to_s,
                           :url => "/photos/:style/:id",
                           :styles => { :small => "450x450>"}
end

class PhotoTest < ActiveSupport::TestCase
  should belong_to(:album)

  should validate_presence_of(:title)
  should have_attached_file(:file)
  should validate_attachment_presence(:file)
end 
```

'should validate_attachment_presence(:file)' 测试总是失败，但我不知道为什么。我有其他带有所需附件的单元测试，测试结果很好。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T17:03:33.040

对我来说，升级到 Paperclip 3.0.3 后问题就消失了 - 似乎该错误现在已修复。

# gwt - HTML DOM 字符串副本，Canvas 元素未重绘

> ID：10015830
> 
> 赞同：0
> 
> 时间：2012-04-04T16:56:32.603
> 
> 标签：gwt, dom, canvas, printing

我想在我的 Javascript Web 应用程序中添加打印功能。该应用程序是在 GWT 中开发的。

我的方法包括将当前活动视图 (Widget) 复制到 iFrame 并打印 iFrame。这在使用纯 HTML 时非常有效。当我添加 Canvas 元素时，Canvas 元素会按预期复制但不会重绘。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:00:41.490

我认为您不能那样做，但是您可以使用以下内容（在 jQuery 中）将画布作为要打印的图像发送：

```
var image = $('canvas').toDataURL("image/png"); 
```

`image`用作图像的 src 将显示画布的内容。不要添加画布元素，而是添加具有相同尺寸的图像，并替换其 src。

# jakarta-ee - 在初始 Grails 项目启动后部署更改

> ID：10015832
> 
> 赞同：1
> 
> 时间：2012-04-04T16:56:43.507
> 
> 标签：jakarta-ee, grails, deployment, configuration

几个月前我启动了一个小型 Grails 站点，现在我必须为应用程序部署增量更改，其中大多数不涉及任何数据库更改。新标签，控制器中的错误修复，服务等。现在，我只是挑选运行 grails war SOME-WAR.war 并手动将它们放入生产环境中生成的类和工件的杂碎。你现在的情绪可能是对的，相信我，这个过程本身就是一种惩罚。

有什么改进的建议吗？

*   似乎每次更改时都将整个 .war 文件投入生产将是一种过大的杀伤力，并且存在客户端生成的静态内容的问题。
*   例如上传的图片。目前它们位于项目初始化时创建的图像目录下的目录中，它们也不存储在数据库中。我考虑将它们存储在数据库中以用于存档和备份目的，以便在发生不幸但还没有走那么远的情况下可以将它们写回到目录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:50:54.820

您不能像 php 项目或其他基于 intrepreted 语言的项目那样增量更新 Grails 项目，因为 java 是一种编译语言。

您可以使用 ant deploy 脚本来自动化部署过程。我使用 Jenkins 的远程部署插件来完成这项任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-24T15:53:07.583

有一种方法，虽然我只推荐它，如果变化很小，看看这个： http: [//grails.1312388.n4.nabble.com/Build-pre-expanded-war-file-td3337931.html](http://grails.1312388.n4.nabble.com/Build-pre-expanded-war-file-td3337931.html)

# regex - 按关键字排序列表

> ID：10015839
> 
> 赞同：0
> 
> 时间：2012-04-04T16:57:04.927
> 
> 标签：regex, list, sorting, batch-file

我在keywords.txt 文件中有一个关键字列表。我有另一个文件 list.txt，每行开头都有关键字。如何将 list.txt 中的行排序为它们在 keywords.txt 中出现的相同顺序？

关键字.txt

```
house
car
tree
woods
mailbox 
```

列表.txt

```
car bbdfbdfbdfbdf
tree gdfgvsgsgs
mailbox gsgsdfsdf
woods gsgsdgsdgsdgsdgsddsd
house gsdgfsdgsdgsdgsdg 
```

list.txt 中的最终结果

```
house gsdgfsdgsdgsdgsdg    
car bbdfbdfbdfbdf
tree gdfgvsgsgs
woods gsgsdgsdgsdgsdgsddsd
mailbox gsgsdfsdf 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:07:52.690

```
$ join -1 2 -2 1 <(cat -n keywords.txt | sort -k2) <(sort list.txt) | sort -k2n | cut -d ' ' -f 1,3-
house gsdgfsdgsdgsdgsdg
car bbdfbdfbdfbdf
tree gdfgvsgsgs
woods gsgsdgsdgsdgsdgsddsd
mailbox gsgsdfsdf 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T18:59:09.513

这是kiswa答案的改进和简化版本。

```
@echo off
(
  for /f "usebackq" %%A in ("keywords.txt") do findstr /bl "%%A" list.txt
)>sorted.txt
REM move /y sorted.txt list.txt 
```

FINDSTR 命令只匹配以关键字开头的行，并强制搜索为文字搜索。`/L`（如果未指定选项并且关键字恰好包含正则表达式元字符，则FINDSTR 可能会给出错误的结果。）

用排序后的文件替换原始文件的代码被注释掉了。只需删除 REM 语句即可激活 MOVE 语句。

与 kiswa 的回答一样，上面的内容只会输出 list.txt 中与keywords.txt 中的关键字匹配的行。

您可能在 list.txt 中有与关键字不匹配的行。如果要将这些行保留在排序输出的底部，请使用：

```
@echo off
(
  for /f "usebackq" %%A in ("keywords.txt") do findstr /bli "%%A" "list.txt"
  findstr /vblig:"keywords.txt" "list.txt"
)>sorted.txt
::move /y sorted.txt list.txt 
```

请注意，`/I`必须使用（不区分大小写）选项，因为 FINDSTR 错误处理不同长度的多个文字搜索字符串。该`/I`选项避免了该错误，但如果您的关键字区分大小写，则会导致问题。请参阅[Windows FINDSTR 命令有哪些未记录的功能和限制？](https://stackoverflow.com/questions/8844868/what-are-the-undocumented-features-and-limitations-of-the-windows-findstr-comman).

您可能有 list.txt 中缺少的关键字。如果您想包含这些关键字而没有任何数据，请使用：

```
@echo off
(
  for /f "usebackq" %%A in ("keywords.txt") do findstr /bl "%%A" "list.txt" || echo %%A
)>sorted.txt
::move /y sorted.txt list.txt 
```

显然，您可以结合这两种技术来确保保留两个文件的联合：

```
@echo off
(
  for /f "usebackq" %%A in ("keywords.txt") do findstr /bli "%%A" "list.txt" || echo %%A
  findstr /vblig:"keywords.txt" "list.txt"
)>sorted.txt
::move /y sorted.txt list.txt 
```

以上所有假设关键字不包含空格或制表符。如果是这样，则 FOR /F 选项和 FINDSTR 选项必须更改：

```
@echo off
(
  for /f "usebackq delims=" %%A in ("keywords.txt") do findstr /bic:"%%A" "list.txt" || echo %%A
  findstr /vblig:"keywords.txt" "list.txt"
)>sorted.txt
::move /y sorted.txt list.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T17:47:22.217

这是一个 Windows 批处理文件。它可能不是最有效的，但我认为它的可读性很好。

```
@echo off

for /F "tokens=*" %%A in (keywords.txt) do (
    for /F "tokens=*" %%B in ('findstr /i /C:"%%A" list.txt') do (
        echo %%B >> sorted.txt
    )
)

del list.txt

rename sorted.txt list.txt 
```

这将创建一个排序文件，然后删除列表文件并重命名排序文件。

# android - Android 内容提供者 SelectionArgs

> ID：10015842
> 
> 赞同：1
> 
> 时间：2012-04-04T16:57:20.823
> 
> 标签：android, cursor, android-contentprovider, android-contacts

我正在尝试编写一个非常基本的应用程序，该应用程序从联系人内容提供商读取并从特定组名中提取联系人。如何设置选择参数，以便从特定组中提取联系人信息？

如果这已在其他地方得到回答，我深表歉意。我已经搜索并没有找到一个关于如何设置 selectionArgs 以便对信息进行排序的好例子。

```
private Cursor getContacts() {
    // Run query
    Uri uri = ContactsContract.Contacts.CONTENT_URI;
    String[] projection = new String[] { ContactsContract.Contacts._ID,
            ContactsContract.Contacts.DISPLAY_NAME};
    String selection = ContactsContract.Contacts.STARRED + " = '"
            + ("1") + "'";
    String[] selectionArgs = null;
    String sortOrder = ContactsContract.Contacts.DISPLAY_NAME
            + " COLLATE LOCALIZED ASC";

    return managedQuery(uri, projection, selection, selectionArgs,
            sortOrder);
} 
```

谢谢您的帮助！

# vba - 将多行数据合并到一个单元格中，用引号和逗号分隔

> ID：10015848
> 
> 赞同：-3
> 
> 时间：2012-04-04T16:57:37.470
> 
> 标签：vba, excel

我有以下数据：

```
2
3
4
5
6
7
8
9
10
apple
green
hi 
```

我想将所有这些合并为一个值，如下所示：

> '2','4','5','6','7','8','9','10','apple','green','hi'

所以我需要从行中获取数据，将它们粘贴到 Excel 文件中，运行这个宏并将它们全部放在一个单元格中（使用逗号和引号）。然后，我会将它们放在`WHERE IN`SQL 语句中的一个子句中，以便更快地搜索。如果有更简单的方法或工具，请告诉我。

这是 SQL 中的预期用途：

```
Select *
from Blah..Table
where IDs in 
(
'2','4','5','6','7','8','9','10','apple','green','hi'
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T19:33:56.337

我编写了一个名为 JoinRange 的用户定义函数来执行此操作。您可以在此处获取代码

[http://www.dailydoseofexcel.com/archives/2012/03/31/joinrange-update/](http://www.dailydoseofexcel.com/archives/2012/03/31/joinrange-update/)

你会像这样使用它

```
=joinrange(A1:A12,,"','","'","'") 
```

这给出了结果

```
'2','3','4','5','6','7','8','9','10','apple','green','hi' 
```

您也可以从 VBA 调用它。

# matlab - 在图像中找到边缘

> ID：10015857
> 
> 赞同：0
> 
> 时间：2012-04-04T16:58:23.180
> 
> 标签：matlab, math, edge-detection, matlab-guide

如何在不使用“边缘”方法的情况下检测图像中的边缘，只使用数学运算（矩阵或派生或 div 或任何其他）？确实，我怎样才能`edge`通过使用算法 `Canny`或`sobel`其他任何方法来重写函数？

例如：

![在此处输入图像描述](../Images/f05c670b4649f055aad626873c8fafe9.png)

粉色长方形256*256 黑色长方形127*127

**答案：[Canny 教程](http://www.pages.drexel.edu/~nk752/Research/cannyTut2.html)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T17:20:31.557

您声明您希望使用 Canny、Sobel 或其他算法。这些都可以在边缘使用。尝试例如：

```
BW = edge(I,'canny'); 
```

我是你的图像矩阵。如果您有兴趣了解其`edge`工作原理，请键入

```
edit edge 
```

进入你的命令窗口。然后，您将看到 MATLAB 自己的实现。

您可能希望`edge`从头开始重新实现，以便更好地理解图像处理算法的工作原理。如果是这样，我会引导您访问以下来源：

*   [Canny 维基百科页面](http://en.wikipedia.org/wiki/Canny_edge_detector)
*   [索贝尔维基百科页面](http://en.wikipedia.org/wiki/Sobel_operator)
*   我个人认为[这本书](http://www.amazon.co.uk/Computer-Vision-Processing-Cornerstones-Computing/dp/0333994515/ref=sr_1_6?ie=UTF8&qid=1333559938&sr=8-6)是掌握过滤器和边缘检测器等基础知识的绝佳参考。

对于您使用矩形的具体示例，很有可能使用它`edge`来查找边缘。您必须做的一个技巧是将 rgb 图像转换为灰度图像，使用`rgb2gray`. 尝试例如：

```
rgb_image = imread('iarLe.png');
gray_image = rgb2gray(rgb_image);
edge_image = edge(gray_image);
imshow(edge_image); 
```

![在此处输入图像描述](../Images/588afb5eea5be65f78728622d1305e4f.png)

# jquery - 动态更改选择列表

> ID：10015861
> 
> 赞同：0
> 
> 时间：2012-04-04T16:58:29.217
> 
> 标签：jquery, css-selectors

我有一个具有以下功能的表格：

表单的目的是获取项目代码。项目按类别分类。首先，我将显示一个选择的类别列表。一旦用户选择了特定类别，我将在第二个选择列表中仅显示属于该类别的项目。

为此，我存储了三个变量：

第一个变量包含所有项目的数组。它们按各自的类别分组为 OPTGROUP。OPTGROUP 标签是类别的描述。这个变量是隐藏的。

第二个变量是所有类别的选择列表。标签是“类别描述”，而值是“类别代码”。

第三个变量是一个空的选择列表，用于显示所选类别的项目。

我的要求是这样的：

当用户选择一个类别时，我将在隐藏变量（第一个 - 如上所述）中搜索具有与所选类别匹配的标签的 optgroup。然后我将提取该组下的所有选项（代表属于该类别的项目）并将它们附加到用于项目的空选择列表（上述第三个）。

我不想有任何 ajax 或 JSON 选项，因为我觉得一次性提取和存储选择列表可能更有效。

如何使用 jQuery 实现上述功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T07:18:48.990

我尝试了以下脚本来解决我的问题，它似乎正在工作

```
$(document).ready(function(){   

    $("#catKey").focus(
        function()  {
        $("#itemKey").empty();
        $("input").css("font-style", "italic");
    }
    );
    $("#catKey").change(onSelectChange);
});

function onSelectChange()   {
    $catSelected = jQuery('#catKey option:selected').val();
    $("#itemKey").empty();
    $('#itemKeys optgroup[label= ' + $catSelected + ']').children().clone().appendTo("#itemKey");

    /*
    $("#itemKey").append($('#itemKeys optgroup[label= ' + $catSelected + ']').children());
    */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T19:13:41.227

好吧，我认为使用 jQuery 实现这一点的最简单方法是使用选择器，您可以生成如下所示的 HTML：

```
<select id="myCategories">
  <option value="cat1">Category 1</option>
  <option value="cat2">Category 2</option>
</select>
<select id="myItems">
  <option OPTGROUP="cat1">item 1</option>
  <option OPTGROUP="cat2">item 2</option>
  <option OPTGROUP="cat1">item 3</option>
</select> 
```

和你的 JavaScript 代码：

```
var $myCategories = $(select#myCategories);
var $myItems = $(select#myItems);
// you can start with all options hidden
$myItems.find('option').hide();

myCategories.change(function() {
// we hide all options
  $myItems.find('option').hide();
// we show the categoies options
  $myItems.find('option[OPTGROUP="' +myCategories.val()+ '"]').show();
}) 
```

我没有测试这段代码，但会给你一个想法

# android - Android：为 android 上的多点触控应用程序获取正确的 pointerId

> ID：10015862
> 
> 赞同：2
> 
> 时间：2012-04-04T16:58:33.553
> 
> 标签：android, multi-touch

因此，简单地说，我用于多点触控的处理程序会崩溃并抛出“IllegalArgumentException：pointerIndex out of range”。

我试着捕捉错误，但后来意识到 (x, y) 将默认为 (min.x, max.y)，在我的例子中是 (0.0, 480.0)。

经过相当多的混乱之后，我发现该错误仅在发送垃圾邮件时出现，但可以通过足够快地交替点击两个不同的位置（但仍然足够慢以在常规多点触控游戏中发生） .

这是 onTouch 方法：

```
 public boolean onTouch(View v, MotionEvent event) {
    synchronized (this) {
        int pointerIndex = (event.getAction() & MotionEvent.ACTION_POINTER_INDEX_MASK) >> MotionEvent.ACTION_POINTER_INDEX_SHIFT;
        int pointerId = event.getPointerId(pointerIndex);
        TouchEvent touchEvent;

        // pointerId fix
        if (pointerId >= event.getPointerCount() && pointerId > 0)
            pointerId--;

        switch (event.getAction() & MotionEvent.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN:
        case MotionEvent.ACTION_POINTER_DOWN:
            touchEvent = touchEventPool.newObject();
            touchEvent.type = TouchEvent.TOUCH_DOWN;
            touchEvent.pointer = pointerId;
            try {
                touchEvent.x = touchX[pointerId] = (int) (event
                        .getX(pointerId) * scaleX);
                touchEvent.y = touchY[pointerId] = (int) (event
                        .getY(pointerId) * scaleY);
            } catch (IllegalArgumentException e) {
                Log.d("multiTouchHandler", e.toString() + ":: PID = "
                        + pointerId);
            }
            isTouched[pointerId] = true;
            touchEventsBuffer.add(touchEvent);
            break;

        case MotionEvent.ACTION_UP:
        case MotionEvent.ACTION_POINTER_UP:
            touchEvent = touchEventPool.newObject();
            touchEvent.type = TouchEvent.TOUCH_UP;
            touchEvent.pointer = pointerId;

            try {
                touchEvent.x = touchX[pointerId] = (int) (event
                        .getX(pointerIndex) * scaleX);
                touchEvent.y = touchY[pointerId] = (int) (event
                        .getY(pointerIndex) * scaleY);
            } catch (IllegalArgumentException e) {
                Log.d("multiTouchHandler", e.toString() + ":: PID = "
                        + pointerId);
            }
            isTouched[pointerId] = false;
            touchEventsBuffer.add(touchEvent);
            return false;

        case MotionEvent.ACTION_MOVE:
            int pointerCount = event.getPointerCount();
            for (int i = 0; i < pointerCount; i++) {
                touchEvent = touchEventPool.newObject();
                touchEvent.type = TouchEvent.TOUCH_DRAGGED;
                touchEvent.pointer = pointerId;
                try {
                    touchEvent.x = touchX[pointerId] = (int) (event
                            .getX(pointerIndex) * scaleX);
                    touchEvent.y = touchY[pointerId] = (int) (event
                            .getY(pointerIndex) * scaleY);
                } catch (IllegalArgumentException e) {
                    Log.d("multiTouchHandler", e.toString() + ":: PID = "
                            + pointerId);
                }
                isTouched[pointerId] = false;
                touchEventsBuffer.add(touchEvent);
            }
            break;
        case MotionEvent.ACTION_CANCEL:
        }
        return true;
    }
} 
```

从 Log.d 输出中看起来发生的事情是，有时 pointerId 会被分配给下一个可用指针（例如 1），但实际的指针数据会存储在前一个指针位置（0）中。

通过检查pointerId 是否超出当前pointerCount 的范围，如果超出，我至少可以用两行代码解决两个手指的问题。

```
// pointerId fix
if (pointerId >= event.getPointerCount() && pointerId > 0)
                pointerId--; 
```

我不确定这是否真的解决了这个问题，但它似乎适用于两指多点触控控制，例如用于触摸屏 fps 游戏的控制。我自己的测试表明，它能够准确无误地确定两个点的触摸，并存储正确的 (x, y) 值

有没有更好的解决方案，或者指针 ID 的多点触控 API 使用真的那么糟糕？如果有人想知道，这是在 4.0.3 设备上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-01T07:47:43.033

对我来说，您使用 pointerId 作为参数访问 event.getX() 和 event.getY() 似乎很奇怪（在 ACTION_POINTER_DOWN 处）。我认为它应该是指针索引，就像你在所有其他情况下所做的那样。

# objective-c - 加载图像后应用程序崩溃

> ID：10015863
> 
> 赞同：0
> 
> 时间：2012-04-04T16:58:34.470
> 
> 标签：objective-c

我正在处理一个包含大量图像的项目，但是在我使用 .xml（缩略图）加载图像（60/70 图像）后，应用程序崩溃了。当我只加载 30 张图片时，应用程序正常工作。

现在有谁可以延迟图像的加载？例子; 首先加载 10 张图片，然后 5 秒再加载 10 张图片？

.xml 非常简单；

```
<images> imagename.png, imagename.png </images> 
```

超过 30 张图片 = 应用程序崩溃，更少 = 应用程序正常工作。

加载图像

```
[DolphiniMages initBook:@"images.xml" curOrientation:curInterfaceOrientation]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T17:05:03.740

在您的应用委托中实现此方法：

```
- (void)applicationDidReceiveMemoryWarning:(UIApplication *)application 
```

您可能会收到内存警告并忽略它，因此您正在被操作系统引导。

# android - 在不使用 RelativeLayout 的情况下将元素附加到屏幕底部

> ID：10015870
> 
> 赞同：0
> 
> 时间：2012-04-04T16:59:12.113
> 
> 标签：android, android-layout

假设我想列出按钮，以便将最后一个按钮固定在屏幕底部，我将如何处理。据我了解，LinearLayout 会给我按钮的“列表”，但它会固定在顶部。另一方面，RelativeLayout 将允许我锚定到底部，但每个元素都必须具有对下一个元素的引用，并且 XML 文件的顺序将是相反的（因此引用是有效的）。

我应该如何处理这个？

编辑：抱歉，这大概就是我要找的 -

![截屏](../Images/ee20cb47841357fe41e0028e65b2eb2c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T17:05:40.913

您可以尝试添加一个权重为 1 的额外 LinearLayout 以占用所有剩余空间，并将按钮列表推到 Activity 底部：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    android:id="@+id/widget32"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    xmlns:android="http://schemas.android.com/apk/res/android">
<LinearLayout
android:layout_width="fill_parent"
    android:layout_height="0dp"
android:layout_weight="1">
</LinearLayout>
<Button
    android:id="@+id/widget33"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button" />
</LinearLayout> 
```

示例 XML 用于由 LinearLayout 推送到 Activity 底部的单个按钮；根布局也是线性的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T17:06:41.070

我很难准确理解你的问题。但我假设你想要的是一个固定在屏幕底部的水平按钮列表？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <!-- put your other views in here -->

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/button_cancel"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:padding="5dp"
            android:text="cancel" />

        <Button
            android:id="@+id/button_ok"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:padding="5dp"
            android:text="ok" />
    </LinearLayout>
</LinearLayout> 
```

# linux - linux如何执行文件

> ID：10015873
> 
> 赞同：0
> 
> 时间：2012-04-04T16:59:14.463
> 
> 标签：linux

首先我`chmod +x`强制执行以下这些文件，当我尝试在 linux 中执行 PNG 文件时，出现如下错误：

```
: command not found.png: line 1: ‰PNG
./default_1920x1200.png: line 2: : command not found
IHDR€0Wö: command not foundne 3:
./default_1920x1200.png: line 4: OiCCPPhotoshop: command not found
./default_1920x1200.png: line 4: *!: command not found
./default_1920x1200.png: line 5: Øä!¢Žƒ£ˆŠÊûá{£kÖ¼÷æÍþµ×: command not found
./default_1920x1200.png: line 5364: warning: here-document at line 9 delimited by end-of-file (wanted `+À¾xÓ
                                                                                                           ÀM›À0‡ÿêB™\€„Àt‘8€@zŽB¦@F€&amp;S `ËcbãP-`æÓ€WW.(ÎI+6aaš@.Ây™24àóÌ ‘àƒóýxÎ®ÎÎ6Ž¶_-ê¿ÿbbãþåÏ«p@át~Ñþ,/³€;€mþ¢%îh^ 
```

但是当我尝试执行 JPG 或 BMP 文件时，我会得到一个正常的错误，例如

```
-bash: ./s_x-r.bmp: cannot execute binary file 
```

所以我想知道linux内核是如何执行文件的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T17:00:30.930

它完全记录在[execve(2)](http://linux.die.net/man/2/execve)手册页中。

您可以通过里面的[binfmt_misc](http://en.wikipedia.org/wiki/Binfmt_misc)目录注册其他方式`/proc/sys/fs/`

（当您单击应用程序时，您的桌面可能有其他“运行”应用程序的方法）

# jquery - Jquery 克隆和单选按钮：奇怪的行为

> ID：10015874
> 
> 赞同：2
> 
> 时间：2012-04-04T16:59:14.410
> 
> 标签：jquery, html, forms, radio-button

在 Jsfiddle 上：http: [//jsfiddle.net/jhzux/](http://jsfiddle.net/jhzux/)

我在这个简单的脚本中浪费了很多时间。我想做的是启用在 jQuery 中克隆表单，然后让它们正常工作。

首先，当我在 JsFiddle 上运行此代码时，它不起作用，但在我的浏览器中它确实......奇怪...... -.-

第二`$(this).next(".persianaops").slideToggle(300);`部分甚至不起作用，没有任何反应，只有 .persianaver 部分出现

当 persianaver 部分出现时，单选按钮并不总是有效，在第一个单元格中它可以正常工作，但后来在其他克隆中，收音机的行为就像每个单选按钮都属于同一组，所以它只能应用两次：在第一次部分而不是其中一个克隆..（我希望你能在 Js fiddle 中看到这一点，因为我的解释有点令人困惑..）

那么有没有更好的方法来克隆带有工作单选按钮的 JQ 表并修复 .persianaops 部分？

HTML：

```
<ul id="listing" style="list-style:none;">
    <li>
        <table class="pedido">
            <tr>
                <td><select name="product[]">
                    <option value="0">
                        Perfil:
                    </option>
                    <option value=
                    "68mm 5 Cámaras AD rendszer egyenes szárny, ütköző tömítéssel">
                    68mm 5 Cámaras 7001AD, con dos juntas
                    </option>
                    <option value=
                    "68mm 7 K AD rendszer íves szárny, ütköző tömítéssel">
                        68mm 7 Cámaras 7001AD con dos juntas
                    </option>
                    <option value=
                    "80 mm 6 K Tok + 7 K íves szárny AD rendszer, ütköző tömítéssel">
                    80 mm Marco 6 Cámaras + Hoja de 7 Cámaras 7001AD con
                    dos juntas
                    </option>
                    <option value=
                    "68mm 7 K MD rendszer ütköző és középtömítéses, íves szárny">
                    68mm 7 Cámaras 7001MD con tres juntas
                    </option>
                    <option value=
                    "80 mm 8 K MD rendszer ütköző és középtömítéses, íves szárny">
                    80 mm 8 Cámaras 7001MD con tres juntas
                    </option>
                </select></td>
            </tr>
            <tr>
                <td><input class="comment" name="h[]" value="Horizontal"> x
                <input class="comment" name="v[]" value="Vertical"> uds:
                <input name="uds[]" style="width:60px;"></td>
            </tr>
            <tr>
                <td>
                    <select>
                        <option>
                            Color
                        </option>
                    </select> Persiana <input class="persiana" name=
                    "persiana[]" type="checkbox">
                    <div class="persianaver" style=
                    "float:right; display:none">
                        Con motor<input name="f[]" type="radio" value=
                        "auto"> Manual<input name="f[]" type="radio" value=
                        "manual">
                    </div>
                </td>
            </tr>
            <tr>
                <td></td>
            </tr>
            <tr>
                <td style="width:435px;">
                    <div class="persianaops" style=
                    "float:right; display:none">
                        IMPORTANTE: En caso de haber seleccionado la opción
                        persiana usted tiene que especificar el tamaño de
                        la tapa del cajón (Lugar donde se sitúa la caja de
                        persiana) Puede especificarlo en el campo
                        comentario <a href="images/demo.jpg" id="pregunta"
                        name="pregunta"><img alt="pregunta" height="15"
                        src="images/ask.jpg" width="15"></a>
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                <textarea class="comment" cols="59" name="comment[]" rows=
                "5">Comentario</textarea></td>
            </tr>
        </table>
    </li>
</ul><button id="clonar" name="colnar">Cloneme</button><br>
<br>
<h3>Datos personales:</h3><br>
<table>
    <tr>
        <td>Nombre y apellido:</td>
        <td><input name="name" type="text"></td>
    </tr>
    <tr>
        <td>Email:</td>
        <td><input name="mail" type="text"></td>
    </tr>
    <tr>
        <td>Teléfono:</td>
        <td><input name="telefono" type="text"></td>
    </tr>
</table> 
```

江青

```
$(document).ready(function() {
    var $orig = $(".pedido").clone();
    $("#clonar").live('click', function(e) {
        e.preventDefault();
        $("#listing").append($orig.clone());
        $(".persiana").click(function() {
            $(this).next(".persianaver").slideToggle(300);
            $(this).next(".persianaops").slideToggle(300);
        });
        $(".comment").focus(function() {
            if (this.value === this.defaultValue) {
                this.value = '';
            }
        }).blur(function() {
            if (this.value === '') {
                this.value = this.defaultValue;
            }
        });
    });
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T17:30:04.667

至于它在 JsFiddle 上不起作用；它可能不起作用，因为您将其设置为使用 MooTools 而不是 jQuery。

至于克隆逻辑；看来它应该可以工作；尽管我觉得奇怪的是，在“#clonar”单击事件之后，您正在“克隆”变量，而不是使用变量来执行克隆事件并检索新鲜的内容。

我会把它改成这样：

```
$(document).ready(function()
{
        var $orig = $(".pedido").clone();

        $("#clonar").live('click' , function(e){
            e.preventDefault();
            $("#listing").append($orig); 
            // or the non variable instance: 
            // $("#listing").append( $("#pedido").clone(); )
        });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T17:36:21.600

我为你修好了你的小提琴：http: [//jsfiddle.net/8v6CP/1/](http://jsfiddle.net/8v6CP/1/)。

您缺少一些结尾`})`，并且您的 HTML 缺少`</tr>`. 我建议你缩进你的代码以避免这种问题。

关于`".persiana"`复选框，您将`click`事件附加到`"#clonar"`事件处理程序中。您应该使用以下方法将其附加到外部`live`：

```
$(document).ready(function(){
    var $orig = $(".pedido").clone();

    $(".persiana").live("click", function () {
        $(this).next(".persianaver").slideToggle(300);
        $(this).next(".persianaops").slideToggle(300);
    });

    $("#clonar").live('click', function (e) {
        e.preventDefault();
        $("#listing").append($orig.clone());

        $(".comment")
            .focus(function() {
                if (this.value === this.defaultValue) {
                    this.value = '';
                }
            })
            .blur(function() {
                if (this.value === '') {
                    this.value = this.defaultValue;
                }
            });
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T17:38:03.987

我会完全重组这个。见例子。`click`通过在`live`语句中添加事件，您是双重绑定事件。

我在这里`on`改用。我监控身体水平，但您应该将其收紧到表单容器或表单以提高性能。只需声明您的事件处理程序一次使用`on`.

然后clone克隆的只有一行。您不必阻止按钮的默认设置，因为默认设置无论如何都不会做任何事情。

单选按钮是克隆的，因此它们共享相同的名称。这意味着一次只能激活一个单选按钮。我添加了一些代码来重命名它们。

[http://jsfiddle.net/jhzux/3/](http://jsfiddle.net/jhzux/3/)

```
$(document).ready(function() {
    var $orig = $(".pedido").clone();
    var counter = 0;

    $("body").on('click', '.persiana', function() {
        $(this).next(".persianaver").slideToggle(300);
        $(this).next(".persianaops").slideToggle(300);
    });

    $("body").on('focus', '.comment', function() {
        if (this.value === this.defaultValue) {
            this.value = '';
        }
    }).on('blur', '.comment', function() {
        if (this.value === '') {
            this.value = this.defaultValue;
        }
    });

    $("#clonar").click(function(e) {
        //have to change radio button names to be unique
        counter++;
        $orig.find(':radio').each( function() {
            $(this).prop('name', $(this).prop('name') + counter);
        });

        //append clone
        $("#listing").append($orig.clone());
    });
});​ 
```

# windows - node.js fs.readFile 在 Windows 中不起作用

> ID：10015877
> 
> 赞同：0
> 
> 时间：2012-04-04T16:59:25.647
> 
> 标签：windows, node.js

现在我在一个 XP 盒子上，但这在 Vista 上是一样的。

我正在使用 node.js v 0.6.14

以下不起作用：

```
var fs = require("fs");
fs.readFile(filename, "utf8", function(err, data) { ... } ); 
```

我没有得到任何错误，但数据包含以下内容：

> '{' 不是内部或外部命令、可运行程序或批处理文件。

如果我删除编码参数，那么我确实会取回原始缓冲区数据。这是节点的 Windows 端口上的一个已知问题，还是我完全遗漏了什么？如果这是一个已知问题，是否有任何好的解决方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T18:14:02.377

它是什么样的文件？我创建了一个名为“text.txt”的文本文件，内容为“这是一个文本文件”。

我手边没有 XP VM，但这在节点 0.6.9 中对我来说很好用：

```
var fs = require("fs");

fs.readFile("text.txt","utf8",function(err,data){
    console.log("err: " + err);
    console.log(data);
}); 
```

输出：

```
err: null
this is a text file 
```

# python - 子类化Process类时未发出threading.Event等待功能

> ID：10015881
> 
> 赞同：1
> 
> 时间：2012-04-04T16:59:42.460
> 
> 标签：python, multithreading, multiprocessing

因为下面的代码永远不会超过运行中的等待函数。我确定我在做一些非常愚蠢的事情，但是由于我不够聪明，无法弄清楚是什么，所以我在问。任何帮助表示赞赏。这是代码：

```
 import threading
   import multiprocessing
   from multiprocessing import Process

   class SomeClass(Process):
       def __init__(self):
           Process.__init__(self)
           self.event = threading.Event()
           self.event.clear()

       def continueExec(self):
           print multiprocessing.current_process().name
           print self
           print "Set:" + str(self.event.is_set())
           self.event.set()
           print "Set:" + str(self.event.is_set())

       def run(self):
           print "I'm running with it"
           print multiprocessing.current_process().name
           self.event.wait()
           print "I'm further than I was"
           print multiprocessing.current_process().name
           self.event.clear()

   def main():
       s_list = []
       for t in range(3):
           s = SomeClass()
           print "s:" + str(s)
           s_list.append(s)
           s.start()

       raw_input("Press enter to send signal")
       for t in range(3):
           print "s_list["+str(t)+"]:" + str(s_list[t])
           s_list[t].continueExec()
           raw_input("Press enter to send signal")

       for t in range(3):
           s_list[t].join()

       print "All Done"

   if __name__ == "__main__":
       main() 
```

# function - 从变量输出参数列表中分配数据

> ID：10015890
> 
> 赞同：2
> 
> 时间：2012-04-04T17:00:13.480
> 
> 标签：function, matlab, arguments

考虑一个函数`varargout = foo(varargin)`。我知道如何格式化[逗号分隔的列表](http://www.mathworks.com/help/techdoc/matlab_prog/br2js35-1.html#br2js35-7)，以便我们可以`varargin`自动生成。例如`[x y z] = ndgrid(-1:1,-1:1,-1:1)`相当于：

```
inp = repmat({-1:1},[1 3]);
[x y z] = ndgrid(inp{:}); 
```

我的问题是：如何自动获取*输出*（`x,y,z`在示例中）？IE，

```
out = ndgrid(inp{:}); 
```

PS：我想避免使用`eval`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:24:52.557

看起来这应该有效：

```
out = cell(size(inp));
[out{:}] = ndgrid(inp{:}); 
```

# javascript - jQuery 选择器 .not() 不工作

> ID：10015891
> 
> 赞同：2
> 
> 时间：2012-04-04T17:00:16.470
> 
> 标签：javascript, jquery

我为一个看起来像这样的函数构建了一个 jQuery 选择器：

```
 $('html').not('.table-main tr[selected]').mousedown( function( e ) { 
```

但不知何故，它根本没有过滤，我不太明白为什么。即使我只是将**('.table-main')**留给选择器，我仍然会在单击表格时触发该功能......这有什么问题？

使用**document**或**'body'**而不是**'html'**并没有帮助，因为使用 .not() 根本不会触发 document 并且 'body' 会产生相同的结果。

编辑：刚刚尝试在表外使用另一个块，它可以工作。我有可能不能在桌子上使用它吗？

Update2：根据要求，这里是表格的渲染 html 代码：

```
 <table border="0" cellspacing="2px" cellpadding="5px" class="table-main">
      <tr id="tablefields">
        <th style="padding: 0;">
          <table cellpadding="0" cellspacing="0" border="0" align="center">
            <tr><th><div class="tr-head-get" id="tr-get-0">Name</div></th></tr>
            <tr><th><div class="th-header" id="th-header-0" style="top: 54px;">Name</div></th></tr>
          </table>
        </th>    
      <th style="padding: 0;"></th>
    </tr>
      <tr id='table_form_new_device' class='table_form_class'>
      <form accept-charset="UTF-8" action="/devices" class="new_device" data-remote="true" id="new_device" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="T2dSeZpxxvgJdTP+yoE7BrVODzqJ95gyVu9Wh/v7oP8=" /></div>
        <th class='tablefield'>
          <input id="device_devicename" name="device[devicename]" size="10" type="text" />
        </th>
        <th>
          <div class='submitbox' id='submitbox_new_device'>S</div>
          <script>
            $('#submitbox_new_device').click(function (event) {
              $('#new_device').submit();
            });
          </script>
        </th>
    </form></tr>
    </table>
    <div class="dropdown-button" style="margin: 0 2px;">Filter</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T17:26:03.623

您真的非常想为此使用委托事件处理，因为您不想将事件处理程序附加到文档中的每个元素。您想在文档级别拦截冒泡事件，只需检查 mousedown 是否来自不是表中选定行的元素。

此外，`tr[selected]`似乎不太可能工作。我认为您需要向`"selected"`所选行添加一个类，然后`tr.selected`用作选择器。

如果您进行更改，我建议您选择以下两个选项之一：

```
$(document).mousedown(function(e) {
    if (!$(e.target).is('.table-main tr.selected')) {
       // mouse down and it wasn't in a selected row of your table)
    }
}) 
```

你也可以让 jQuery 委托做更多的工作：

```
$(document).on('mousedown', ':not(.table-main tr.selected)', function() {
   // mouse down and it wasn't in a selected row of your table)

}); 
```

* * *

看到您的实际 HTML 后，如果我正确理解了问题，这应该可以工作。只要单击不在`table-main`具有`selected`该类的行中，只要单击发生，这就会为您提供一个事件：

```
$(document).on('mousedown', function(e) {
   // mouse down and it wasn't in a selected row of your table)
    e.stopPropagation();
    if (!$(e.target).closest(".table-main tr.selected").length) {
        console.log("mousedown not in selected row of table-main")
    }
});​ 
```

这是一个演示：http: [//jsfiddle.net/jfriend00/5QD6N/](http://jsfiddle.net/jfriend00/5QD6N/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T17:05:32.303

`[selected]`对 type 的元素使用没有意义`tr`。您将 selected 用于输入（`checkbox,radio`）。`.selected`您可以在 tr 元素中添加一个类`.table-main`，然后使用：

编辑：就像上面发布的人一样，您想使用选择嵌套在正文中的元素。

```
$('body').find(':not(.selected)').mousedown(function(e){}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T17:05:52.473

`$('html')`创建一个包含您的 HTML 元素的 jQuery 对象。

`.not('.table-main tr[selected]')`删除任何带有选定属性的 TR 元素（这里有一个错误，该属性不会出现在 TR 上），这些元素是`table-main`类成员元素的后代。由于 HTML 元素不是 TR 元素并且不能从任何东西派生，因此不会删除任何元素并且没有任何效果。

`mousedown( function( e )`将事件处理程序绑定到 HTML 元素。除非某些东西停止传播，否则任何点击最终都会冒泡到那里。

我*猜*（因为您实际上并没有说出您想要实现的目标）您想要捕获对未选择的 TR 元素的点击。假设您切换到使用类来使 HTML 有效……</p>

```
$('.table-main tr:not(.selected)').mousedown(…); 
```

和

```
<tr class="selected"> 
```

# windows-phone-7 - 后代循环中的空 XElement

> ID：10015894
> 
> 赞同：1
> 
> 时间：2012-04-04T17:00:24.363
> 
> 标签：windows-phone-7, linq-to-xml, async-ctp

我有一个尝试从 Web 服务获取数据的 Windows Phone 7.1 应用程序。数据采用 XML 格式。语言是 Visual Studio 2010 下的 vb.net，带有 Async CTP 3。

我已成功从 Web 服务检索响应并将字符串解析为 XDocument。但是我在尝试通过循环遍历 XML 来填充视图模型时遇到问题，因为循环变量不包含任何内容（我希望它包含 XElement）：

```
Private Async Function GetMovies() As Task
    Dim client As New WebClient
    Dim address = (New Uri(New Uri(APIROOT), "movieschedule/movies")).ToString

    Dim resulttxt = Await client.DownloadStringTaskAsync(address)

    Dim resultdoc = XDocument.Parse(resulttxt)
    Dim resultlist As New Collections.ObjectModel.ObservableCollection(Of Movies)
    For Each movie In resultdoc.Descendants("movie")

        ' **the variable 'movie' contains nothing**

        Dim m As New Movies With {
            .Cast = movie.Attribute("cast").Value,
            ...
            .Title = movie.Attribute("title").Value
        }
        resultlist.Add(m)
    Next

    Movies = resultlist
End Function 
```

来自 Web 服务的 XML 示例：

```
<movies>
  <movie code="MOV1299" title="Age of Heroes" is3D="0" genre="THRILLER" rating="D" cast="Sean Bean, Danny Dyer, Izabella Miko, James D'Arcy, Sebastian Street, William Houston" director="Adrian Vitoria" language="ENGLISH" subtitle="BAHASA INDONESIA" />
  <movie code="MOV1325" title="Fast and Furious 5" is3D="0" genre="ACTION" rating="D" cast="Vin Diesel, Paul Walker, Dwayne Johnson, Jordana Brewster, Tyrese Gibson, Elsa Pataky" director="Justin Lin" language="ENGLISH" subtitle="BAHASA INDONESIA" />
</movies> 
```

我在创建新电影的行上放了一个断点。我可以确认变量`resultdoc`已填充。我尝试在即时窗口`resultdoc.Descendants("movie").Count`返回 15。`resultdoc.Descendants("movie").First.Attribute("code").Value`正确返回“MOV1299”。

当我从断点继续时出现此错误：

```
System.NullReferenceException was unhandled
  Message=NullReferenceException
  StackTrace:
       at MyApp.MainPageVM.VB$StateMachine_2_GetMovies.MoveNext()
       at System.Runtime.CompilerServices.TaskAwaiter.<>c__DisplayClass5.<OnCompletedInternal>b__1(Object state)
       at System.Reflection.RuntimeMethodInfo.InternalInvoke(RuntimeMethodInfo rtmi, Object obj, BindingFlags invokeAttr, Binder binder, Object parameters, CultureInfo culture, Boolean isBinderDefault, Assembly caller, Boolean verifyAccess, StackCrawlMark& stackMark)
       at System.Reflection.RuntimeMethodInfo.InternalInvoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, StackCrawlMark& stackMark)
       at System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters)
       at System.Delegate.DynamicInvokeOne(Object[] args)
       at System.MulticastDelegate.DynamicInvokeImpl(Object[] args)
       at System.Delegate.DynamicInvoke(Object[] args)
       at System.Windows.Threading.DispatcherOperation.Invoke()
       at System.Windows.Threading.Dispatcher.Dispatch(DispatcherPriority priority)
       at System.Windows.Threading.Dispatcher.OnInvoke(Object context)
       at System.Windows.Hosting.CallbackCookie.Invoke(Object[] args)
       at System.Windows.Hosting.DelegateWrapper.InternalInvoke(Object[] args)
       at System.Windows.RuntimeHost.ManagedHost.InvokeDelegate(IntPtr pHandle, Int32 nParamCount, ScriptParam[] pParams, ScriptParam& pResult) 
```

为什么变量`movie`不包含任何内容？如何使它包含正确的 XElement `resultdoc.Descendants("movie")`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T16:20:37.697

[从评论中复制]

转到 Exceptions 对话框（应该在调试菜单下）并选择在抛出 NullReferenceException 时中断。您将确切地看到错误在哪里。可能发生的情况是您从服务器返回的 XML 节点之一没有标题或演员表或其他属性之一，而您正在死去

# c++ - 不能有 typeof(std::endl) 作为模板参数？

> ID：10015897
> 
> 赞同：10
> 
> 时间：2012-04-04T17:00:46.310
> 
> 标签：c++, c++11, variadic-templates

所以，我试图写一个这样的函数：

```
void append_to_stream(std::ostream &stream)
{ }

template <typename T, typename... Args>
void append_to_stream(std::ostream &stream, T first, Args&&... rest)
{
  stream << first;
  append_to_stream(stream, rest...);
} 
```

并称之为：

```
append_to_stream(stream, 
                 std::endl,
                 std::endl); 
```

但这不起作用。我收到一个错误，提示函数“参数太多”。我已经把它缩小到我知道`std::endl`是有罪的程度——可能是因为它是一个函数。我设法通过声明一个名为的结构`endl`并为它定义`<<operator`它来“解决”这个问题，以便它简单地调用`std::endl`. 这有效，但感觉不是特别好。不能接受 std::endl 作为模板参数吗？该功能适用​​于其他类型。

编辑：这是错误：

```
src/log/sinks/file_sink.cpp:62:21: error: too many arguments to function ‘void log::sinks::append_to_stream(std::string&, Args&& ...) [with Args = {}, std::string = std::basic_string<char>]’ 
```

**更新**

试图让编译器推断出正确的模板参数@MooingDuck 建议可以使用以下形式的函数：

```
 template<class e, class t, class a> 
  basic_ostream<e,t>&(*)(basic_ostream<e,t>&os) get_endl(basic_string<e,t,a>& s) 
  {
return std::endl<e,t>;
  } 
```

但是，这不会编译。

错误：

```
src/log/sinks/file_sink.cpp:42:28: error: expected unqualified-id before ‘)’ token
src/log/sinks/file_sink.cpp:42:53: error: expected initializer before ‘get_endl’ 
```

任何想法为什么？为了编译这个，我添加了`using namespace std;`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-04T17:21:30.040

`std::endl`是模板，而不是函数，编译器无法解析`endl`使用哪个。

尝试：

```
append_to_stream(std::cout,
             std::endl<char, std::char_traits<char>>,
             std::endl<char, std::char_traits<char>>); 
```

或者，MooingDuck 的解决方案（已更正）：

```
template<class e, class t, class a> //string version
std::basic_ostream<e, t>& (*get_endl(const std::basic_string<e, t, a>&))
    (std::basic_ostream<e, t>& )
{ return std::endl<e,t>; } 

template<class e, class t> //stream version
std::basic_ostream<e, t>& (*get_endl(const std::basic_ostream<e, t>&))
    (std::basic_ostream<e, t>& )
{ return std::endl<e,t>; }

int main () {
  std::ostream& stream = std::cout;
  append_to_stream(stream,
                 get_endl(stream),
                 get_endl(stream));
} 
```

这是 get_endl 解决方案，由 C++11`decltype`功能简化：

```
template<class e, class t, class a> //string version
auto get_endl(const std::basic_string<e, t, a>&)
  -> decltype(&std::endl<e,t>)
{ return std::endl<e,t>; }

template<class e, class t> //stream version
auto get_endl(const std::basic_ostream<e,t>&)
  -> decltype(&std::endl<e,t>)
{ return std::endl<e,t>; }

int main () {
  std::ostream& stream = std::cout;
  append_to_stream(stream,
                 get_endl(stream),
                 get_endl(stream));
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T01:29:02.560

通过强制转换解决重载比指定模板参数或定义一个全新的模板（！）要容易得多。

```
typedef std::ostream & (&omanip_t)( std::ostream & );

append_to_stream(stream, 
                 static_cast< omanip_t >( std::endl ),
                 static_cast< omanip_t >( std::endl ) ); 
```

这将适用于所有操纵器，而某些操纵器可以采用不同的模板，例如，如果用户提供。

此外，您应该通过`T first`完美转发或 const 引用。先转发，再传值，意义不大。此外，如果不调用`std::forward`， rvalue 参数将按值传递......只是遵循成语，它将是

```
template <typename T, typename... Args>
void append_to_stream(std::ostream &stream, T &&first, Args&&... rest)
{
  stream << std::forward< T >( first );
  append_to_stream(stream, std::forward< Args >( rest ) ... );
} 
```

[http://ideone.com/cw6Mc](http://ideone.com/cw6Mc)

# javascript - 使用脚本/标签将 IE Doc Mode 更新到最新版本

> ID：10015903
> 
> 赞同：0
> 
> 时间：2012-04-04T17:01:12.630
> 
> 标签：javascript, asp.net, html, internet-explorer

我需要将 IE 模式更新到最新版本。如何使用脚本知道 IE 的最新版本？

我可以使用 META 标签，但在 meta 标签中我们需要提及浏览器版本。如果我提到浏览器版本为 IE9，如果最终用户用户浏览器版本是 IE8 怎么办？

```
<meta http-equiv="X-UA-Compatible" content="IE=9" /> 
```

我想知道最终用户浏览器版本并设置文档模式（如果用户浏览器版本是IE8/IE9，设置文档模式为IE8/IE9）

如何做到这一点？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T17:05:52.380

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

该值`edge`表示“尽可能使用最新版本”。

# codeigniter - Codeigniter 数据库插入失败

> ID：10015910
> 
> 赞同：8
> 
> 时间：2012-04-04T17:02:06.437
> 
> 标签：codeigniter, activerecord, insert

目前在我的控制器中，当添加新数据时，我验证输入，如果有任何问题，它会让用户知道，否则它将数据传递给模型以插入数据库

我现在如何检查模型中的插入语句是否正常工作，并让用户知道它是否没有。

像下面这样的插入语句是否返回 true 或 false，然后可以将其返回给控制器？

```
$this->db->insert('Faviroute_Addresses', $address_data); 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-04T17:36:40.883

您可以使用

```
if($this->db->insert('Faviroute_Addresses', $address_data))
{
    // Code here after successful insert
    return true;   // to the controller
} 
```

或者你可以使用

```
$this->db->insert('Faviroute_Addresses', $address_data);
if($this->db->affected_rows() > 0)
{
    // Code here after successful insert
    return true; // to the controller
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-07T10:08:59.907

我个人会避免使用

```
$this->db->affected_rows() 
```

插入方法。SQLServer 不为插入返回值，因此从

```
$this->db->insert(...) 
```

会更可靠。我会保留affected_rows 来检查“UPDATE”s :)

**更新：**

同样的事情适用于

```
$this->db->delete() 
```

在 SQL Server 中，affected_rows() 函数在删除时不起作用...

# c++ - 基于时间的事件处理

> ID：10015913
> 
> 赞同：1
> 
> 时间：2012-04-04T17:02:08.107
> 
> 标签：c++, events, time, event-handling, sfml

我目前正在编写一个简单的游戏，以学习如何在 C++ 中使用 SFML。到目前为止，事情进展顺利，我对大多数与 SFML 相关的事情都有基本的了解。我遇到的问题是找到一种有效的方式来处理基于时间的事件。

我正在开发的游戏是一款非常简单的太空侵略者式游戏，在关卡期间，敌人会在预定时间出现。到目前为止，我有一个事件类，它保存和控制每个被调用事件应该发生的事情，以便允许我多次重用简单事件。到目前为止，我通过使用 SFML 时钟循环触发这些事件，并且游戏循环的每次迭代都通过当前级别的所有事件的向量运行，并将时钟上的经过时间与事件的指定时间进行比较叫做。问题是我必须在每次游戏循环迭代时检查整个事件向量，如果事件列表变得足够长，我担心它会开始对游戏性能产生影响。

我有一个想法，为每个事件在时间轴中的位置提供一个简单的数字 ID，并简单地存储下一个应该运行的事件，这样我只需检查每个循环迭代的一个事件的时间，虽然这会起作用我认为相当不错，我很好奇是否有一种更有效的方法不需要检查每个循环迭代？我对事件驱动编程进行了一些研究，但找不到与基于时间的事件特别相关的内容。

因此，我想知道是否有人对时间线或基于时间的事件触发有任何经验，并且有任何我可以查看的提示或资源来找出更有效的想法？任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T17:18:26.860

您建议的方法只是每次通过游戏循环进行一次比较。没有比这更快的了。

要允许多个事件同时触发，请使用 a [`multimap`](http://www.cplusplus.com/reference/stl/multimap/)，其中键是事件时间，值是事件本身。然后多图将按时间排序。

每次通过游戏循环，做这样的事情（伪代码）：

```
now = getCurrentTime()
while not events.isEmpty() and events.firstElement().key() < now:
  e = events.firstElement().value
  e.execute()
  events.removeFirst() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T18:33:34.007

根据事件的时间对你的向量进行排序，然后只存储到目前为止你通过向量的距离。然后每个循环，您将推进该位置，直到下一个事件不应该发生，并触发您刚刚迭代的事件。

```
std::vector<Event> time_line;
size_t time_line_position;

void fire_new_events(Time t) {
    size_t new_time_line_position = time_line_position;

    while(new_time_line_position < time_line.size()
          && time_line[new_time_line_position].time <= t)
      ++new_time_line_position;

    fire_events(time_line.begin() + time_line_position,
                time_line.begin() + new_time_line_position);

    time_line_position = new_time_line_position;
} 
```

# jquery - Jquery CSS 伪元素：ui-dialog

> ID：10015916
> 
> 赞同：1
> 
> 时间：2012-04-04T17:02:28.217
> 
> 标签：jquery, css

从我可以看到 ui:dialog 不是标准的伪 css 元素，所以我想知道以下行实现了什么：

```
$j("#inline:ui-dialog").dialog("destroy"); 
```

我可以找到一个 id 为“inline”的 div，但 ui-dialog 来自哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:21:05.517

`$.widget()`自动为您的小部件提供伪选择器。伪选择器是从 jQuerySubclass、命名空间和调用名称创建的。

```
$.widget('ui.mywidget',{});
// same like this
$.widget('jQuery.ui.mywidget',{}); 
```

相关的伪选择器是：

```
':ui-mywidget' 
```

这意味着使用`$.widget()`自动创建的每个小部件都提供了一个伪选择器。

这是一个[参考](http://www.erichynds.com/jquery/tips-for-developing-jquery-ui-widgets/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T17:11:56.657

jquery UI 小部件工厂为所有小部件[自动生成伪选择器。](https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.widget.js#L36)

# python - Django-admin.py 在我的共享主机环境中产生错误

> ID：10015917
> 
> 赞同：2
> 
> 时间：2012-04-04T17:02:31.103
> 
> 标签：python, django, django-admin, shared-hosting

我尝试在具有 SSH 访问权限的共享主机环境上安装 django。

我使用下载了最新版本的 Django

```
svn export http://code.djangoproject.com/svn/django/trunk/django django 
```

我可以在 python shell 中导入 Django 而不会抛出任何错误。

但后来我尝试使用 django-admin.py 开始一个新项目，它开始向我抛出一堆错误，在过去的几个小时里我试图用谷歌搜索。我还是找不到

以下是实际错误：

```
k4660061@server42222:~$ django-admin.py startproject klikevent
/u/k4660061/home/local/lib/python/site-packages/django/core/management/templates.py:155: Warning: 'with' will become a reserved keyword in Python 2.6
Traceback (most recent call last):
  File "/u/k4660061/home/local/lib/python/site-packages/django/bin/django-admin.py", line 5, in <module>
    management.execute_from_command_line()
  File "/u/k4660061/home/local/lib/python/site-packages/django/core/management/__init__.py", line 442, in execute_from_command_line
    utility.execute()
  File "/u/k4660061/home/local/lib/python/site-packages/django/core/management/__init__.py", line 381, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/u/k4660061/home/local/lib/python/site-packages/django/core/management/__init__.py", line 261, in fetch_command
    klass = load_command_class(app_name, subcommand)
  File "/u/k4660061/home/local/lib/python/site-packages/django/core/management/__init__.py", line 69, in load_command_class
    module = import_module('%s.management.commands.%s' % (app_name, name))
  File "/u/k4660061/home/local/lib/python/site-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/u/k4660061/home/local/lib/python/site-packages/django/core/management/commands/startproject.py", line 2, in <module>
    from django.core.management.templates import TemplateCommand
  File "/u/k4660061/home/local/lib/python/site-packages/django/core/management/templates.py", line 155
    with open(old_path, 'r') as template_file:
            ^
SyntaxError: invalid syntax
k4660061@server42222:~$ 
```

谢谢

* * *

更新

经过一夜好眠，我开始工作了！见伯尼的回答。我必须一遍又一遍地查看堆栈跟踪，但我只需要将导入语句添加到多个文件中

该文件是

django/utils/archive.py django/core/management/templates.py

以及任何抛出警告 with_statement 的文件

谢谢@伯尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:05:12.143

如果语法错误与`with`语句有关，则可能是您的 prod 服务器的 Python 版本比您的 dev 服务器的版本旧。

如果您的 prod 服务器运行的是 2.5 或更高版本，您可以执行以下操作：

```
from __future__ import with_statement 
```

*请注意*：任何`from __future__`导入都必须是第*一个*导入。
参考：[http ://docs.python.org/reference/simple_stmts.html#future](http://docs.python.org/reference/simple_stmts.html#future)

# ruby-on-rails - 在第二个盒子上克隆 Ruby on rails 应用程序 - 没有互联网连接

> ID：10015920
> 
> 赞同：1
> 
> 时间：2012-04-04T17:02:41.897
> 
> 标签：ruby-on-rails, rubygems, rpm

我在 box1 上运行了一个 RoR 应用程序……它显然在那个盒子上安装了 Ruby、RubyGems 和 Rails，以及其他一些 gem。

我想复制整个设置，这样它也可以在 box2 上独立运行。

两个盒子都没有互联网连接，但另一台机器上有互联网连接。

据我所知，我需要——

*   在 box2 上安装 Ruby（我有 RPM，没问题）
*   在 box2 上安装 RubyGems（我有 RPM，没问题）
*   安装 Rails（**我该怎么做？**）
*   将整个 Rails 应用程序目录复制到 box2 上？

Ruby on Rails 站点上的唯一指导是运行`gem install rails`，但如果没有 Internet 连接，我无法执行此操作。

那么我可以只`bundle package`在 box1 上运行，然后将生成的 gem 文件复制到 box2 上并在每个文件上进行本地 gem install 来安装它们吗？或者我可以简单地将'usr/local/lib/ruby/gems/1.9.1/gems'目录复制到box2上吗？

其次，我计划将我的 Rails 应用程序打包到 RPM 中，这样我就可以轻松地将它部署到我想要的任何地方......我可以将我的 gem 文件（由 产生`bundle package`）包含在 RPM 目录结构中，然后在 .spec文件在安装过程中进行 gem 安装？这样，它将在安装 RPM 时安装所需的 gem。

可能我忽略了一个更简单的方法，或者误解了一些东西，如果是这样，请赐教。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:10:47.437

看看[Vagrant](http://vagrantup.com/)和[Railscasts 插曲](http://railscasts.com/episodes/292-virtual-machines-with-vagrant)。

Vagrant 将通过将所有内容放在安装了所有 gem 的虚拟机中来解决您的“在任何地方部署”问题。

当然，由于缺乏互联网访问权限，这不会解决您的直接问题，但听起来您确实走在正确的轨道上。

# javascript - 如何创建可以向上拖动以显示内容的 div？

> ID：10015921
> 
> 赞同：1
> 
> 时间：2012-04-04T17:02:53.300
> 
> 标签：javascript, jquery, html, draggable

我有一个带有图像和一些文本的 div。我希望整个 div 可以拖动，但只能向上拖动。当访问者用鼠标向上拖动 div 时，div 下有内容，不会移动。这意味着该内容已经存在。可拖动的 div 与它重叠。我想做的一个很好的例子是 Microsoft Windows 8 锁屏。您向上拖动，登录屏幕在其下方。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:40:25.437

不久前，我试图做一些与您的问题*非常*相似的事情。如果您想要一个可以向上拖动的元素，请使用jQuery UI 工具中的`axis`选项。`draggable()`你需要：

```
$(document).ready(function() {
    $("div").draggable({
        axis: "y"
    });
}); 
```

这将其定义为可拖动的，并且仅在 Y 轴（垂直）上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T17:05:25.420

一种选择是使用 jQuery UI 的可拖动功能。

[http://jqueryui.com/demos/draggable/](http://jqueryui.com/demos/draggable/)

# sql - 处理 ssrs 图表的 sql 查询中不存在的分组值

> ID：10015925
> 
> 赞同：0
> 
> 时间：2012-04-04T17:03:07.233
> 
> 标签：sql, sql-server, tsql, ssrs-2008

我在 ssrs 报告中使用以下查询。

```
Declare @Year int = 2012
Declare @ProdType_ID int = 1

SELECT
MONTH(Ord.OrdDate) AS 'MONTH',
COUNT(CASE WHEN @Year = YEAR(Ord.OrdDate) THEN 1 END) as Order1,
COUNT(CASE WHEN @Year-1 = YEAR(Ord.OrdDate) THEN 1 END) as 'Order2'
FROM
(
select 1 as number
union
select 2
union
select 3
union
select 4
union
select 5
union
select 6
union
select 7
union
select 8
union
select 9
union
select 10
union
select 11
union
select 12
) as months

JOIN Ord on Number = Month(Ord.OrdDate)
JOIN Prod ON Ord.Prod_ID = Prod.ID
JOIN ProdType ON Prod.ProdType_ID = ProdType.ID 
WHERE @ProdType_ID = ProdType.ID
GROUP BY months.number, Month(Ord.OrdDate) 
```

这将返回一个具有正确分组的表，除了尚未发生或未记录的月份不会出现。我希望每个月都显示，即使它还没有过去，我希望他们的订单价值为零。

有什么方法可以在 FROM 子句中放置一个数组或类似的东西吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:17:05.103

我想你可能想使用 OUTER JOIN。使用***左***外连接，查询将返回 FROM 子句中“左表”中具有满足任何 WHERE 条件的行的所有行。其他表中的列值将为 NULL。因此，如果需要对 NULL 进行特殊处理，您可能需要在 select 语句中使用的列值周围添加[ISNULL函数。](http://msdn.microsoft.com/en-us/library/ms184325.aspx)

这篇 MSDN 文章[Using Outer Joins](http://msdn.microsoft.com/en-us/library/ms187518.aspx)有更完整的信息。

我已经使用左外连接重写了您的查询。您可能需要对 case 语句做一些额外的工作，但也许不需要——如果参数值为 NULL，YEAR 函数将返回 NULL，我认为逻辑可以成立。

```
Declare @Year int = 2012
Declare @ProdType_ID int = 1

SELECT
MONTH(Ord.OrdDate) AS 'MONTH',
COUNT(CASE WHEN @Year = YEAR(Ord.OrdDate) THEN 1 END) as Order1,
COUNT(CASE WHEN @Year-1 = YEAR(Ord.OrdDate) THEN 1 END) as 'Order2'
FROM
(
select 1 as number
union
select 2
union
select 3
union
select 4
union
select 5
union
select 6
union
select 7
union
select 8
union
select 9
union
select 10
union
select 11
union
select 12
) as months

LEFT OUTER JOIN Ord on Number = Month(Ord.OrdDate)
LEFT OUTER JOIN Prod ON Ord.Prod_ID = Prod.ID
LEFT OUTER JOIN ProdType ON Prod.ProdType_ID = ProdType.ID 
WHERE @ProdType_ID = ProdType.ID
GROUP BY months.number, Month(Ord.OrdDate) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T20:38:52.753

它在删除 WHERE 子句并在计数聚合中进行所有过滤后起作用。

```
SELECT
MONTH(Ord.OrdDate) AS 'Month',
COUNT(CASE WHEN @Year = YEAR(Ord.OrdDate) and @ProdType_ID = ProdType.ID THEN 1 END) AS Order1,
COUNT(CASE WHEN @Year-1 = YEAR(Ord.OrdDate) and @ProdType_ID = ProdType.ID THEN 1 END) AS Order2

FROM
(
SELECT 1 AS Number 
UNION
SELECT 2
UNION
SELECT 3
UNION
SELECT 4
UNION
SELECT 5
UNION
SELECT 6
UNION
SELECT 7
UNION
SELECT 8
UNION
SELECT 9
UNION
SELECT 10
UNION
SELECT 11
UNION
SELECT 12
) AS Months

LEFT OUTER JOIN Ord ON Number = MONTH(Ord.OrdDate)
LEFT OUTER JOIN Prod ON Ord.Prod_ID = Prod.ID
LEFT OUTER JOIN ProdType ON Prod.ProdType_ID = ProdType.ID

GROUP BY Months.Number, MONTH(Ord.OrdDate) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T14:59:37.033

如果还会使用`LEFT JOIN`. 但我建议使用 Tally 表来获取月份。这将适用于 sql server 2005+：

```
Declare @Year int = 2012
Declare @ProdType_ID int = 1

;WITH Months ( Number ) AS 
(
        SELECT 1 UNION ALL
        SELECT 1 + Number FROM Months WHERE Number < 12 
)
SELECT
MONTH(Ord.OrdDate) AS 'MONTH',
COUNT(CASE WHEN @Year = YEAR(Ord.OrdDate) THEN 1 END) as Order1,
COUNT(CASE WHEN @Year-1 = YEAR(Ord.OrdDate) THEN 1 END) as 'Order2'
FROM
    Months
LEFT JOIN Ord on Number = Month(Ord.OrdDate)
LEFT JOIN Prod ON Ord.Prod_ID = Prod.ID
LEFT JOIN ProdType ON Prod.ProdType_ID = ProdType.ID 
WHERE @ProdType_ID = ProdType.ID
GROUP BY months.number, Month(Ord.OrdDate) 
```

# android - 为 ImageView 设置动画，使其从滑出的另一侧开始滑入

> ID：10015927
> 
> 赞同：0
> 
> 时间：2012-04-04T17:03:11.303
> 
> 标签：android, animation, textview

赃物，我目前正在编写一个安卓游戏，我需要帮助解决一个问题。我希望我的背景在屏幕右侧缓慢滑出，同时制作与刚刚从屏幕滑出的部分完全相同的部分，但从左侧滑入。所以几乎就像一个字幕文本视图。

是否有任何简单的方法可以做到这一点，而不必创建一组不同的 ImageView 并以不同的方式为它们设置动画。

希望你能理解，并且有人回答了我的问题，干杯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T17:12:21.720

最简单的方法是创建一个`Bitmap`包含整个环境背景的大型文件。然后每一帧显示该图像的不同部分。

在这里，灰色框代表整个背景，粉红色框代表您实际绘制的框部分。每次重绘时，您都需要计算自上次绘制以来经过了多少时间，然后使用它`delta_time`来计算移动粉色框的像素数。

要从位图中获取子图像，您可以简单地使用： `createBitmap(Bitmap source, int x, int y, int width, int height, Matrix m, boolean filter)`

`source`灰色框在哪里，`x`代表粉色框的距离，`y`为 0，`width`粉色框的宽度，`height`背景图像的高度。

![在此处输入图像描述](../Images/a26cd754af3b03b777e7265f9fe0bf25.png)

此外，我建议您检查[和引擎](http://www.andengine.org/)它是一个很棒的开源游戏引擎，拥有一个充满活力的支持社区。对于此类问题，他们有很好的解决方案。

# perl - 测试脚本中是否存在 perl mod

> ID：10015931
> 
> 赞同：0
> 
> 时间：2012-04-04T17:03:16.747
> 
> 标签：perl

根据[此处](https://stackoverflow.com/questions/251694/how-can-i-check-if-i-have-a-perl-module-before-using-it)提供的答案，我正在尝试验证是否安装了 perl 模块。为此，我有：

```
# &getYN and &prompt are only included here for completeness
sub getYN {
    unless ( $autoyes =~ /[Yy]/ ) {
        my ( $prompt, $default ) = @_;
        my $defaultValue = $default ? "[$default]" : "";
        print "$prompt $defaultValue: ";
        chomp( my $input = <STDIN> );
        return $input ? $input : $default;
    } else {
        return "Y";
    }
}

sub prompt {
    my ( $prompt, $default ) = @_;
    my $defaultValue = $default ? "[$default]" : "";
    print "$prompt $defaultValue: ";
    chomp( my $input = <STDIN> );
    return $input ? $input : $default;
}

&chklib("RRDTool::OO");
sub chklib {
    my $lib = shift;
    eval { require $lib; };
    if ($@) {
        print "You are missing a required Perl Module: $lib\n";
        my $ok = &getYN( "Shall I attempt to install it for you?", "y" );
        if ( $ok =~ /[Yy]/ ) {
            require CPAN;
            CPAN::install($lib);
        } else {
            print "Installation requires $lib\n";
            exit;
        }
    }
} 
```

这按预期运行，但由于某种原因，eval 返回我没有安装 RRDTool::OO，而实际上我安装了。

如果我创建一个空文件并运行：

```
# File foo.pl
use strict;

$| = 1; 

use RRDTool::OO; 
```

然后我没有错误。

但是当我使用 print $@; 运行第一个文件时，它返回：

```
Can't locate RRDTool::OO in ... 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T17:19:13.963

您必须检查评估的结果，例如

```
if (eval("require xxx;")) {
     print "you have it\n";
} else {
     print "you don't\n";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T17:22:08.303

正在发生的事情是

```
$lib = "RRDTool::OO";
eval { require $lib } 
```

用字符串化的表达式执行

```
require "RRDTool::OO" 
```

不是简单的风格

```
require RRDTool::OO 
```

所以它正在寻找一个`RRDTool::OO`在你的`@INC`路径中调用的文件，而不是一个名为`RRDTool/OO.pm`.

如果您想`require`在运行时使用变量表达式，您需要使用字符串形式的 eval

```
eval "require $lib" 
```

`require`或自己处理 arg

```
$lib = "RRDTool::OO";
$lib =~ s{::}{/}g;
eval { require "$lib.pm" } 
```

# visual-studio-2010 - 不允许访问数据库文件。

> ID：10015935
> 
> 赞同：2
> 
> 时间：2012-04-04T17:03:47.137
> 
> 标签：visual-studio-2010, asp.net-mvc-3, c#-4.0, filezilla

我刚刚通过 Visual Studio 将我的网站发布到我的域名 (Combell)...

所以，当我尝试在我的网络浏览器中访问我的网站时，我的网站可以工作......**但是当我尝试登录时，我收到了这个错误：**

> 不允许访问数据库文件。[ 1884，文件名 = D:\WebSites\tennisonlinebiz\www\App_Data\Tennis.sdf,SeCreateFile]

我在 MSDN 论坛中找到了一种解决方案：[http ://forums.asp.net/t/1698244.aspx/1/10](http://forums.asp.net/t/1698244.aspx/1/10)

此解决方案包括更改 READ & Write 中 APP_Data 文件夹的权限属性，我已使用 FILEZilla 完成此操作，但命令似乎错误：

> CWD / 响应：250 CWD 命令成功。命令：SITE CHMOD 777 DAL 响应：500 'SITE CHMOD 777 DAL'：命令不理解 Statut：Définir les permissions de '/Models' à '777' 命令：SITE CHMOD 777 Models 响应：500 'SITE CHMOD 777 Models'：命令不明白

你能帮我找到解决办法吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-12T12:50:05.383

我已经完全控制了我的 Microsoft Web Server 2008，因此能够直接更改它。我已经为这个文件夹**App_Data添加了这个用户****IIS_IUSRS ，除了****Full Control**之外的所有权限。

 ****我只能猜测您是否通过 ftp 执行此操作，它可能会添加每个人都可以，但您无法通过 FileZilla ftp 执行此操作？尝试 Total Commander 或其他任何东西，或联系您的提供商手动添加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-22T10:31:01.417

检查在 IIS 中配置的用户以访问站点的物理路径。您可以通过站点的基本设置选项卡中的测试设置选项进行检查。

再次将配置的用户配置为应用程序池用户。检查站点运行的应用程序池的高级设置，应用程序池的身份应该是我们配置访问站点物理路径的同一用户。

这应该可以解决此错误。****

# c# - 在 MVVM WPF 应用程序中的视图模型之间传递应用程序状态

> ID：10015939
> 
> 赞同：6
> 
> 时间：2012-04-04T17:04:04.180
> 
> 标签：c#, wpf, silverlight, mvvm, caliburn.micro

我需要编写一个小应用程序来读取配置文件并用它生成一些报告。我希望最终能使用 MVVM，但入门非常棘手。哦，我正在使用 Caliburn.Micro 框架。

所以这就是我所拥有的，一个外壳（承载其他视图的主视图），上面有一个带有 3 个按钮的功能区：

1) 打开文件 2) 显示设置 3) 显示结果

还有另外两个视图，SettingsView 和 ResultsView，带有用于生成和删除报告的按钮。

所以我猜视图结构是这样的：

```
ShellView
   Ribbon
      OpenFileButton
      SettingsButton
      ResultsButton
   ContentControl (hosts SettingsView and ResultsView)

SettingsView
    CalculateResultsButton

ResultsView
    CancelResultsButton 
```

棘手的部分是：

```
1\. "Show settings" button is disabled until a file is opened (via Open file). 
2\. "Show results" button is disabled until a report is calculated (via a 
    method in SettingsViewModel).
3\. If a report is calculated, the CalculateResultsButton is disabled and
   CancelResultsButton is enabled and vice versa. 
```

请告知我怎么能做到这一点？我不知道我应该采取什么策略。我的非 MVVM 思维大脑说我应该创建一个状态变量，然后以某种方式将这些按钮绑定到该变量，但我想这在 MVVM 世界中不起作用，对吧？任何代码示例都将非常非常感谢！

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:50:02.847

由于您使用的是 CM，因此您不需要任何代码隐藏。如果需要，您可以删除 .xaml.cs 文件。

这是一个非常基本的示例，但它应该让您了解如何控制按钮的状态。在本例中，`Open`将启用而其他两个被禁用。如果单击`Open`，`Settings`则启用。单击`Results`一次也会发生同样的情况。`Settings`

如果您需要一种方法来执行全局状态，则可以通过将单例 ,`SharedViewModel`注入 ViewModel 来应用相同的概念，并且 CanXXX 方法可以检查`SharedViewModel`. [这](https://bitbucket.org/dbeattie/cmdemo/src)是一个不同事物的 SL 演示，但其中一个是注入一个单例来共享数据，同样的想法也适用于 wpf。

外壳视图：

```
<Window x:Class="CMWPFGuardSample.ShellView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Grid Background="White">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <StackPanel Grid.Row="0"
                    Orientation="Horizontal">
            <Button x:Name="Open"
                    Content="Open" />
            <Button x:Name="Settings"
                    Content="Settings" />
            <Button x:Name="Results"
                    Content="Results" />
        </StackPanel>
    </Grid>

</Window> 
```

外壳视图模型：

```
 [Export(typeof (IShell))]
    public class ShellViewModel : PropertyChangedBase, IShell
    {
        private bool _isOpen;
        public bool IsOpen
        {
            get { return _isOpen; }
            set
            {
                _isOpen = value;
                NotifyOfPropertyChange(() => IsOpen);
                NotifyOfPropertyChange(() => CanSettings);
            }
        }

        private bool _isSettings;
        public bool IsSettings
        {
            get { return _isSettings; }
            set
            {
                _isSettings = value;
                NotifyOfPropertyChange(() => IsSettings);
                NotifyOfPropertyChange(() => CanResults);
            }
        }

        public bool IsResults { get; set; }

        public void Open()
        {
            IsOpen = true;
        }

        public bool CanSettings
        {
            get { return IsOpen; }
        }

        public void Settings()
        {
            IsSettings = true;
        }

        public bool CanResults
        {
            get { return IsSettings; }
        }

        public void Results()
        {
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T18:40:32.623

MVVM 和 WPF 命令完全符合您的“棘手部分”要求，因为内置了[ICommand.CanExecute()](http://msdn.microsoft.com/en-us/library/bb336430.aspx)方法，该方法允许基于自定义逻辑启用/禁用相应的按钮。

要使用这个简单的功能，请先查看 MSDN [How to: Enable a Command上的](http://msdn.microsoft.com/en-us/library/ms753200.aspx)[RoutedCommand 类](http://msdn.microsoft.com/en-us/library/system.windows.input.routedcommand.aspx)和自我解释示例（请参见下面的代码片段）。

总的来说，关于 MVVM，它真的很简单！只需尝试一下，您就不会没有它;) 简而言之 - 您必须为每个`EntityView.xaml`相应的`EntityViewModel`类创建，然后只需将它的实例放在 View 的 DataContext 中，或者显式地在代码中或使用绑定：

```
var entityViewModel = new EntityViewModel();
var view = new EntityView();
view.DataContext = entityViewModel; 
```

MVVM Command 和 Command.CanExecute 绑定：

**XAML：**

```
<Window x:Class="WCSamples.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="CloseCommand"
    Name="RootWindow"
    >
  <Window.CommandBindings>
    <CommandBinding Command="ApplicationCommands.Close"
                    Executed="CloseCommandHandler"
                    CanExecute="CanExecuteHandler"
                    />
  </Window.CommandBindings>
  <StackPanel Name="MainStackPanel">
    <Button Command="ApplicationCommands.Close" 
            Content="Close File" />
  </StackPanel>
</Window> 
```

**后面的 C# 代码：**

```
// Create ui elements.
StackPanel CloseCmdStackPanel = new StackPanel();
Button CloseCmdButton = new Button();
CloseCmdStackPanel.Children.Add(CloseCmdButton);

// Set Button's properties.
CloseCmdButton.Content = "Close File";
CloseCmdButton.Command = ApplicationCommands.Close;

// Create the CommandBinding.
CommandBinding CloseCommandBinding = new CommandBinding(
    ApplicationCommands.Close, CloseCommandHandler, CanExecuteHandler);

// Add the CommandBinding to the root Window.
RootWindow.CommandBindings.Add(CloseCommandBinding); 
```

# wpf - 如何使用 ClickOnce 在 WPF 应用程序中创建文件关联？

> ID：10015941
> 
> 赞同：1
> 
> 时间：2012-04-04T17:04:11.070
> 
> 标签：wpf, clickonce

我在 VS 2010 中使用过 ClickOne 和设置项目，但它不起作用。我双击关联文件，但它没有在我的 WPF 应用程序中打开。

请帮我解决这个问题，一步一步....

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T17:31:48.190

[MSDN 上的这篇文章](http://msdn.microsoft.com/en-us/library/bb892924.aspx)有一个很好的循序渐进的方法。

**编辑**
如果 ClickOnce 不适合您，您可以尝试使用 Inno Setup 进行安装。它是一个出色的（免费的）安装实用程序。它在[此处](http://www.jrsoftware.org/isdl.php)可用，[此链接](http://www.jrsoftware.org/isfaq.php#assoc)向您展示如何创建文件关联。

我将 Inno Setup 用于我所有的桌面应用程序安装。

# c# - 在绑定到数据源的组合框上设置 SelectedItem

> ID：10015942
> 
> 赞同：14
> 
> 时间：2012-04-04T17:04:14.050
> 
> 标签：c#, combobox, datasource, selecteditem

```
List<Customer> _customers = getCustomers().ToList();
BindingSource bsCustomers = new BindingSource();
bsCustomers.DataSource = _customers;
comboBox.DataSource = bsCustomers.DataSource;
comboBox.DisplayMember = "name";
comboBox.ValueMember = "id"; 
```

现在如何将组合框的 Item 设置为列表中第一个以外的内容？试过 comboBox.SelectedItem = someCustomer; ......还有很多其他的东西，但到目前为止还没有运气......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-04T17:05:36.940

你应该做

```
comboBox.SelectedValue = "valueToSelect"; 
```

或者

```
comboBox.SelectedIndex = n; 
```

或者

```
comboBox.Items[n].Selected = true; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T17:17:17.367

您的绑定代码不完整。试试这个：

```
BindingSource bsCustomers = new BindingSource();
bsCustomers.DataSource = _customers;

comboBox.DataBindings.Add(
    new System.Windows.Forms.Binding("SelectedValue", bsCustomers, "id", true));
comboBox.DataSource = bsCustomers;
comboBox.DisplayMember = "name";
comboBox.ValueMember = "id"; 
```

* * *

在大多数情况下，您可以在设计器中完成此任务，而不是在代码中完成。

首先在 Visual Studio 的“数据源”窗口中添加数据源。*从菜单View > Other Windows > Data Sources*打开它。添加一个 Object 类型的数据源`Customer`。在数据源中，您将看到客户的属性。通过右键单击属性，您可以更改与其关联的默认控件。

现在您可以简单地将属性从 Data Sources 窗口拖到您的表单中。当您删除第一个控件时，Visual Studio 会自动将 A`BindingSource`和一个组件添加到您的表单中。`BindingNavigator`这`BindingNavigator`是可选的，如果您不需要它，您可以安全地删除它。Visual Studio 也完成了所有的连接。您可以通过属性窗口对其进行调整。有时这对于组合框是必需的。

在您的代码中只剩下一件事要做：将实际数据源分配给绑定源：

```
customerBindingSource.DataSource = _customers; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-31T10:53:27.807

这对我有用

```
bsCustomers.Position = comboBox.Items.IndexOf(targetCustomer); 
```

# ios - 播放时将视频帧附加到 mp4

> ID：10015944
> 
> 赞同：0
> 
> 时间：2012-04-04T17:04:21.570
> 
> 标签：ios, video, mp4

我需要将从流中获取的视频帧附加到现有的 mp4 文件中。我发现我需要使用**mdat**和**stco** atom 来更新块表。是否可以附加新的帧/块？我需要在 ios 应用程序中执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:44:48.750

这种附加是可能的，但它可能不切实际——尤其是如果您想一次添加一帧。

MP4 在很大程度上是一种“烘焙”格式，生成后很难修改。这是因为“moov”框中的结构数据包含“mdat”框中重要媒体数据的文件偏移量。如果 moov 框位于 mdat 框之前（通常允许渐进式下载），那么添加到 moov 框的任何数据（即对附加视频中新关键帧的引用）都会将 mdat 框推得更远。您不仅需要重写文件，还需要相应地更新所有文件偏移量。（也许有一些巧妙的技巧可以保持 moov 框大小不变......）如果 mdat 框首先定位，操作仍然会很尴尬，因为您需要将 moov 框复制到内存中，将新视频附加到mdat 的结尾，

如果您可以收集所有新的视频帧，并在录制结束时在重写操作期间添加它们，这可能是可行的。您还可以查看 Fragmented MP4（使用“moof”框），但我不确定对读取此类文件的支持有多广泛。

# sql - 如何序列化（以逗号分隔的列表）SQL 行

> ID：10015945
> 
> 赞同：2
> 
> 时间：2012-04-04T17:04:32.363
> 
> 标签：sql, sql-server

我目前有一个视图，其中包含以下行：

`ID, Name`

我想添加第三列`Properties`，该列必须包含逗号分隔的属性列表。我可以从连接表中获取属性，但此时连接将为每个属性返回一个单独的行。为逗号分隔列表拉单行的最佳方法是什么？

在过去，我想我已经使用了带有光标的用户定义函数。如果我可以在没有 UDF 的情况下做到这一点，那就太好了，但我不能 100% 确定。如果没有，我相信我可以用更智能的 UDF 摆脱光标。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T17:09:52.563

```
SELECT ID, Name, Properties = STUFF((
    SELECT N',' + PropertyName FROM dbo.Properties
    WHERE ID = x.ID
    FOR XML PATH(''), 
    TYPE).value(N'./text()[1]', N'nvarchar(max)'), 1, 1, N'')
FROM dbo.ViewName AS x
GROUP BY ID, Name; 
```

# wpf - DevExpress、GridControl：默认禁用排序和分组

> ID：10015947
> 
> 赞同：0
> 
> 时间：2012-04-04T17:04:46.717
> 
> 标签：wpf, devexpress

我的 wpf 应用程序上有一个 GridControl。默认情况下，排序和分组被禁用，我找不到正确的属性来启用它们。

你知道我该如何解决这个问题吗？

这是网格：

```
<dxg:GridControl ItemsSource="{Binding Source={StaticResource progs}}" Height="600" Margin="5" x:Name="grid">
        <dxg:GridControl.Columns>
            <dxg:GridColumn FieldName="Mentor.LName"/>
            <dxg:GridColumn FieldName="Time"/>
            <dxg:GridColumn FieldName="STID"/>
            <dxg:GridColumn FieldName="Student.LName"/>
            <dxg:GridColumn FieldName="EID"/>
            <dxg:GridColumn FieldName="ExtraStudent.LName"/>
        </dxg:GridControl.Columns>
        <dxg:GridControl.View>
            <dxg:TableView x:Name="tview" AllowFixedGroups="True" ShowGroupedColumns="True" NavigationStyle="Row"
                               AllowPerPixelScrolling="True"  AllowSorting="True"
                                    AllowEditing="False"  AutoWidth="True" AllowGrouping="True" AllowMoving="True"
                           RowDoubleClick="TableView_RowDoubleClick" />
        </dxg:GridControl.View>
    </dxg:GridControl> 
```

来源：

```
<CollectionViewSource x:Key="progs" /> 
```

这是代码：

```
var progSource = (CollectionViewSource)Resources["progs"];
        progSource.Source = (from f in db.Programmes where f.Date == dateTimePicker.Text select f).GroupBy(m => m.MID);
        progView = (BindingListCollectionView)progSource.View; 
```

# mysql - MySQL 纵向扩展还是横向扩展？

> ID：10015948
> 
> 赞同：0
> 
> 时间：2012-04-04T17:04:48.153
> 
> 标签：mysql, performance, optimization, scale

我的任务是调查我们的内部 Web 应用程序遇到性能问题的原因。

Web 应用程序本身部分是用 PHP 编写的，部分是用 Perl 编写的，而且我们有一个 MySQL 数据库，我认为这是性能下降的根源。

我们有大约 400 个系统用户，其中大多数分布在不同的时区，因此通常任何时候最多只有 30 个用户在线。性能问题已经出现在我们身上，尤其是在过去的一年里，随着数据库的不断增长。

该系统运行在一台 32 位 debian 服务器上 - 6GB RAM，8 x 2.4GHz intel CPU。对于手头的工作来说，这可能还不够大。但是，即使有时我是唯一在线用户，页面加载时间仍然很慢。

我正在尝试确定我们是否需要扩大规模或扩大规模。首先，我想知道我们的硬件在满足对它的要求方面做得如何。其次，是否值得横向扩展并创建一些复制从属服务器来平衡负载。

互联网上有很多可用的工具 - 可能太多了，无法调查。任何人都可以推荐任何可以提供一些分析/性能监控的工具，这些工具可以帮助我完成我的任务。

非常感谢， **ns**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T18:20:55.733

您的减速似乎与数据有关，而不是与并发用户数有关。

正确索引的查询倾向于与数据量成对数缩放 - 即数据加倍会使查询时间增加一些常数 C，将数据再次加倍相同的 C，再次加倍相同的 C 等等......在你知道之前，你有大量的数据，但你的查询速度*有点*慢。

如果在您的情况下减速不是那么缓慢（即它与数据量成线性关系，或者更糟），这可能表明查询优化不佳。在问题上投入更多的铁会推迟它，但除非你有无限的预算，否则你必须在某个时候真正解决根本原因：

1.  **测量**实际数据的查询性能以识别慢查询。
2.  检查执行计划以寻找可能的改进。
3.  如有必要，了解[索引、聚类、覆盖](http://use-the-index-luke.com/)和其他性能技术。
4.  最后，将这些知识应用于您在步骤 (1) 和 (2) 中确定的查询。

如果没有其他帮助，请考虑您的数据模型。有时，“完美”的规范化模型并不是表现最好的模型，因此可能需要进行一点司法非规范化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T17:11:52.263

如果你有预算，简单（懒惰）的方法就是多加点铁。

更好的方法是，在决定在哪里或如何扩展之前，确定瓶颈。是不是每个页面加载都很慢？还是只是特定的页面？如果它只有几页，那么就投资一个分析器（对于 PHP，xDebug 和 Zend Debugger 都可以进行分析）。我也会（如果你没有的话）投资一个尽可能类似于实时系统的测试系统来运行诊断。

您还可以查看收集一些统计数据；在服务器级别使用诸如 sar 之类的程序（[来自 sysstat 包](http://packages.debian.org/lenny/sysstat)，也可以在 db 级别（您是否运行了慢查询日志？）。

# core-data - UIManagedDocument - 如何处理 UIDocumentStateSavingError？

> ID：10015950
> 
> 赞同：2
> 
> 时间：2012-04-04T17:04:49.857
> 
> 标签：core-data, icloud, uimanageddocument

我正在开发我的第一个 iCloud 应用程序。工作一段时间后，由于“UIDocumentStateSavingError”，应用程序无法再访问 UIManagedDocument。有没有办法真正找出发生了什么错误？

这是我创建 UIManagedDocument 的代码：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    iCloudURL = [[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil];

    if (iCloudURL == nil) {
        dispatch_async(dispatch_get_main_queue(), ^{
            [self iCloudNotAvailable];
        });
        return;
    }

    iCloudDocumentsURL = [iCloudURL URLByAppendingPathComponent:@"Documents"];
    iCloudCoreDataLogFilesURL = [iCloudURL URLByAppendingPathComponent:@"TransactionLogs"];

    NSURL *url = [iCloudDocumentsURL URLByAppendingPathComponent:@"CloudDatabase"];
    iCloudDatabaseDocument = [[UIManagedDocument alloc] initWithFileURL:url];

    NSMutableDictionary *options = [NSMutableDictionary dictionary];

    NSString *name = [iCloudDatabaseDocument.fileURL lastPathComponent];
    [options setObject:name forKey:NSPersistentStoreUbiquitousContentNameKey];
    [options setObject:iCloudCoreDataLogFilesURL forKey:NSPersistentStoreUbiquitousContentURLKey];

    iCloudDatabaseDocument.persistentStoreOptions = options;

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(documentContentsChanged:) name:NSPersistentStoreDidImportUbiquitousContentChangesNotification object:iCloudDatabaseDocument.managedObjectContext.persistentStoreCoordinator];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(documentStateChanged:) name:UIDocumentStateChangedNotification object:iCloudDatabaseDocument];

    if ([[NSFileManager defaultManager] fileExistsAtPath:[iCloudDatabaseDocument.fileURL path]]) {
        // This is true, the document exists.
        if (iCloudDatabaseDocument.documentState == UIDocumentStateClosed) {
            [iCloudDatabaseDocument openWithCompletionHandler:^(BOOL success) {
                if (success) {
                    dispatch_async(dispatch_get_main_queue(), ^{
                        [self documentConnectionIsReady];
                    });
                } else {
                    dispatch_async(dispatch_get_main_queue(), ^{
                        [self connectionError:iCloudConnectionErrorFailedToOpen];
                    });
                }
            }];                    
        } else if (iCloudDatabaseDocument.documentState == UIDocumentStateNormal) {
            ...
        }      
    } else {
        ...               
    }           
}); 
```

文档已经存在，因此在文档上调用了 openWithCompletionHandler:。这失败并且 UIDocumentStateChangedNotification 被触发，显示文档状态为 5： UIDocumentStateClosed 和 UIDocumentStateSavingError

在此之后，完成块被调用。从这里开始的正确方法是什么？有什么方法可以找出问题所在以及发生了什么样的错误？

我试图在完成块中重新打开文档，但结果是一样的。

我想我可以通过删除文件并重新创建它来解决问题。但是，一旦应用程序在商店中出现，这显然不是一个选择。我想知道出了什么问题，并为用户提供了一种处理问题的方法。

我已经在这里检查了处理 UIDocumentStateSavingError 的其他问题（其中不是很多），但似乎不适用于这里的问题。

知道如何找出问题所在吗？我不敢相信 API 会告诉你“保存过程中出了点问题，但我不会告诉你什么！”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T15:10:20.680

您可以在完成处理程序中查询 documentState。不幸的是，如果您想要确切的错误，获得它的唯一方法是子类化并覆盖handleError：userInteractionPermitted：

也许这样的事情会有所帮助（在没有编译器的情况下徒手输入）......

```
@interface MyManagedDocument : UIManagedDocument
 - (void)handleError:(NSError *)error
         userInteractionPermitted:(BOOL)userInteractionPermitted;
@property (nonatomic, strong) NSError *lastError;
@end

@implementation MyManagedDocument
@synthesize lastError = _lastError;
 - (void)handleError:(NSError *)error
         userInteractionPermitted:(BOOL)userInteractionPermitted
{
    self.lastError = error;
    [super handleError:error
           userInteractionPermitted:userInteractionPermitted];
}
@end 
```

然后你可以像这样创建它......

```
iCloudDatabaseDocument = [[UIManagedDocument alloc] initWithFileURL:url]; 
```

并像这样在完成处理程序中使用它......

```
 [iCloudDatabaseDocument openWithCompletionHandler:^(BOOL success) {
            if (success) {
                dispatch_async(dispatch_get_main_queue(), ^{
                    [self documentConnectionIsReady];
                });
            } else {
                dispatch_async(dispatch_get_main_queue(), ^{
                    [self connectionError:iCloudConnectionErrorFailedToOpen
                                withError:iCloudDatabaseDocument.lastError];
                });
            }
        }]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-01T18:06:22.680

基于@JodyHagins 的优秀片段，我制作了一个 UIDocument 子类。

```
@interface SSDocument : UIDocument
- (void)openWithSuccess:(void (^)())successBlock
           failureBlock:(void (^)(NSError *error))failureBlock;
@end

@interface SSDocument ()
@property (nonatomic, strong) NSError *lastError;
@end

@implementation SSDocument

- (void)handleError:(NSError *)error userInteractionPermitted:(BOOL)userInteractionPermitted {
    self.lastError = error;
    [super handleError:error userInteractionPermitted:userInteractionPermitted];
}

- (void)clearLastError {
    self.lastError = nil;
}

- (void)openWithSuccess:(void (^)())successBlock failureBlock:(void (^)(NSError *error))failureBlock {
    NSParameterAssert(successBlock);
    NSParameterAssert(failureBlock);
    [self clearLastError];
    [self openWithCompletionHandler:^(BOOL success) {
        if (success) {
            successBlock();
        } else {
            NSError *error = self.lastError;
            [self clearLastError];
            failureBlock(error);
        }
    }];
}

@end 
```

# c++ - 无符号字符上的随机数一直是“？”

> ID：10015957
> 
> 赞同：1
> 
> 时间：2012-04-04T17:05:13.517
> 
> 标签：c++, random, unsigned-char

我之前问过一个与生成随机无符号字符相关的问题，并且沿途提出了很好的建议，但是由于我应用的简单性； `srand((unsigned)time(NULL)); rand()%256;`

我在程序开始时调用了 srand 一次，但是我不断收到“？” 对于随机字符。不是所有时间，而是大部分时间，这让我失去了注意力。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T17:08:58.997

很可能您不断获得终端不需要的随机字符如何打印和输出`?`。尝试`int`在打印前将它们转换为：

```
std::cout << (int)my_random_char; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T17:09:46.063

你没有得到'？作为一个字符，它以这种方式打印，因为所选字符不可打印。将其打印为整数，您将看到该值是您所期望的随机值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-04T17:09:43.237

根据您的平台，值 [128 255] 本身可能不是有效字符。如果你想要一个随机的、可打印的 ascii 字符，那么你需要在 [32 127) 范围内生成字符。

这是根据我对您的其他问题的回答修改的代码，以仅选择可打印的 ascii 字符。

```
int main() {
    std::random_device r;
    std::seed_seq seed{r(), r(), r(), r(), r(), r(), r(), r()};
    auto rand = std::bind(std::uniform_int_distribution<char>(' ','~'),
                          std::mt19937(seed));

    std::generate_n(std::ostream_iterator<char>(std::cout," "), 25, rand);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T17:09:52.190

有几点需要考虑：

1.  不要`srand()`在每次调用`rand()`. 当你的程序启动时调用一次（如果你真的想的话）。
2.  尝试将无符号字符输出为整数，看看会发生什么。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-04T17:11:23.427

无符号字符不是字符；它们是字节。您将获得 0 到 255（含）之间的随机字节，其中一些（或大多数，取决于编码）不是有效字符。

例如，如果您想要 a 和 z 之间的随机字符，请使用类似

```
unsigned char c = 'a' + rand() % 26; 
```

（`rand() % 26`不推荐这样做，但对于大多数应用程序来说已经足够了。请参阅手册页。）

# c++ - 具有 FFT 卷积的低通 FIR 滤波器 - 重叠相加，为什么以及如何

> ID：10015958
> 
> 赞同：8
> 
> 时间：2012-04-04T17:05:16.467
> 
> 标签：c++, filter, fft, convolution, vst

首先，很抱歉没有在这里发布代码。由于某种原因，当我尝试在此页面上输入我拥有的代码时，所有代码都搞砸了，无论如何发布可能太多了，无法接受。这是我的代码： http: [//pastebin.com/bmMRehbd](http://pastebin.com/bmMRehbd)

现在从我被告知的情况来看，我无法从这段代码中获得好的结果的原因是因为我没有使用重叠添加。我试图阅读互联网上的几个来源，了解为什么我需要使用重叠添加，但我无法理解。似乎实际过滤器有效，导致任何高于给定截止值的东西，确实被截止。

我应该提到这是为 vst2-sdk 工作的代码。

有人可以告诉我为什么需要添加它以及如何在给定的代码中实现重叠添加代码吗？

我还应该提到，在算法和数学方面我很愚蠢。我是那些需要在视觉上掌握我正在做的事情的人之一。那或得到代码解释的东西:)，然后我的意思是实际的重叠。

Overlad 添加理论：[http ://en.wikipedia.org/wiki/Overlap%E2%80%93add_method](http://en.wikipedia.org/wiki/Overlap%E2%80%93add_method)

感谢您提供的所有帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T17:53:49.273

当您通过对两个输入信号的离散傅里叶变换的乘积进行逆离散傅里叶变换来进行卷积（使用有限脉冲响应滤波器）时，您实际上是在实现循环卷积。我在此将其称为“在频域中计算的卷积”。（如果您不知道什么是循环卷积，[请查看此链接](http://en.wikipedia.org/wiki/Circular_convolution)。它基本上是一个卷积，您假设域是循环的，即，将信号从两侧移开使其“环绕”到另一侧领域。）

您通常希望通过对大信号使用快速傅立叶变换来执行卷积，因为它的计算效率更高。

重叠添加（及其表亲重叠保存）是解决在频域中完成的卷积实际上是循环卷积这一事实的方法，但实际上我们很少想要进行循环卷积，而是通常更喜欢线性卷积。

重叠添加是通过输入信号的“零填充”块来实现的，然后适当地使用循环卷积的部分（在频域中完成）。重叠保存通过仅保留与线性卷积相对应的信号部分并丢弃被循环移位“损坏”的部分来实现。

这是两种方法的维基百科的两个链接。

[Overlap-add](http://en.wikipedia.org/wiki/Overlap-add_method)：这个有一个很好的数字来解释发生了什么。

[重叠保存](http://en.wikipedia.org/wiki/Overlap-save_method)

[Orfanidis 的这本书很好地解释了这一点。请参阅第 9.9.2 节。](http://www.ece.rutgers.edu/~orfanidi/intro2sp/orfanidis-i2sp.pdf)在我看来，这不是信号处理的“事实上的”标准，但它写得非常好，并且比其他书籍更好地介绍。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T18:08:19.653

需要使用重叠添加方法来处理每个 fft 缓冲区的边界。问题是 FFT 域中的乘法导致时域中的循环卷积。这意味着在执行 IFFT 之后，帧末尾的结果会环绕并破坏帧开头的输出样本。

以这种方式考虑可能更容易：假设您有一个长度过滤器`N`。该滤波器与`M`输入样本的线性卷积实际上返回了`M+N-1`输出样本。然而，在 FFT 域中进行的循环卷积会产生相同数量的输入和输出样本`M`。来自线性卷积的额外`N-1`样本已经“包裹”并破坏了第一个`N-1`输出样本。

这是一个示例（matlab 或 octave）：

```
a = [1,2,3,4,5,6];
b = [1,2,1];
conv(a,b)  %linear convolution

    1    4    8   12   16   20   17    6

ifft(fft(a,6).*fft(b,6))  %circular convolution

    18   10    8   12   16   20 
```

请注意，最后 2 个样本已环绕并添加到圆形案例中的前 2 个样本中。

重叠添加/重叠保存方法基本上是处理这种环绕的方法。由于循环卷积返回的未损坏输出样本少于输入样本的数量，因此需要 FFT 缓冲区的重叠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T17:54:22.960

首先，要明白时域中的卷积等价于频域中的乘法。在卷积中，您大致处于 O(n*m) 的位置，其中 n 是 FIR 长度，m 是要过滤的样本数。在频域中，使用 FFT，您正在运行 O(n * log n)。对于足够大的 n，在频域中进行滤波的成本要低得多。但是，如果 n 相对较小，则好处会减少到在时域中更容易过滤的程度。这个断点是主观的，但是，图 50 到 100 是您可以切换的点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T18:07:10.247

是的，就改变频率响应而言，卷积滤波器将“起作用”。但是频域中的这种乘法也会在一端与来自另一端的数据污染时域数据，反之亦然。重叠添加/保存扩展 FFT 大小并切断“污染”端，然后使用该端数据修复后续 FFT 窗口的开始。

# php - Facebook SDK 3.1.x 会显示认证页面吗？

> ID：10015964
> 
> 赞同：1
> 
> 时间：2012-04-04T17:05:38.070
> 
> 标签：php, oauth, facebook-php-sdk, facebook-oauth, facebook-canvas

我在 facebook 页面内做一个 Canvas 应用程序。

我非常简单的问题是：使用最新的 facebook SDK（今天刚刚下载），如果用户尚未授予您的应用程序的访问权限，SDK 中的 facebook 类会自动确定并尝试获得授权吗？

我可以通过以下方式手动获取我的应用程序的身份验证：

```
https://graph.facebook.com/oauth/authorize?client_id=<myClientID>&redirect_uri=<myRedirectURL>&type=user_agent&display=page&scope=publish_stream,%20user_about_me,%20user_likes,%20email 
```

这一切都很好......但是当我尝试执行example.php在SDK中所做的事情时，它返回一个错误：

致命错误：未捕获的 OAuthException：无效的 OAuth 访问令牌签名。在第 1107 行的 /public_html/bridge/base_facebook.php 中抛出

因此我的问题是：我应该获得有效的 OAuth 访问令牌，还是我设置 facebook PHP SDK 错误？

这是我生成错误的完整 PHP 代码：

```
<?php
require 'facebook.php';

$facebook = new Facebook(array(
'app_id' => '<my app id>',
'app_secret' => '<my app secret>',
));

$user = $facebook->getUser();

$jared = $facebook->api('/jaredmark');

if ($user) {
try {
// Proceed knowing you have a logged in user who's authenticated.
$user_profile = $facebook->api('/me');
} catch (FacebookApiException $e) {
error_log($e);
$user = null;
  }
}

// Login or logout url will be needed depending on current user state.
if ($user) {
  $logoutUrl = $facebook->getLogoutUrl();
} else {
  $loginUrl = $facebook->getLoginUrl();
} 
```

此代码本质上是示例的直接复制/粘贴，并进行了一些小的编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T21:03:14.733

PHP SDK 似乎不会显示身份验证弹出窗口，而无需您通过重定向到该特定页面手动使其这样做。 *叹*

# php - 如何更新数据库中的列，但只是为当前值添加一些内容

> ID：10015969
> 
> 赞同：1
> 
> 时间：2012-04-04T17:05:47.107
> 
> 标签：php, sql, database, phpmyadmin

假设我有这样的事情：

```
id |    title   |

1  |  First row | 
```

现在我想将该值更新为：*First row is here*，只需添加*is here*。如您所想，不止一行，我想动态更新所有行。

```
UPDATE posts SET title=title+' is here' 
```

我知道上面是错误的，我只是认为既然它适用于数字，也许它也适用于文本，但事实并非如此。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T17:09:17.670

为此，您需要连接字符串，MySQL 具有函数[CONCAT()](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)，因此您的查询将是：

```
UPDATE posts SET title=CONCAT(title,' is here') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T17:09:29.867

```
UPDATE posts SET title=CONCAT(title,' is here') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T17:11:29.653

使用`concat`：

```
UPDATE posts SET title=concat(title,'your_string_to_add') WHERE id='your_id' 
```

给予很重要，`WHERE id = 'id'`否则它将更新我相信的第一行。在你的情况下：

```
UPDATE posts SET title=concat(title,' is here') WHERE id=1 
```

# mysql - 每月用户总数

> ID：10015973
> 
> 赞同：2
> 
> 时间：2012-04-04T17:05:58.743
> 
> 标签：mysql, count

## mySQL 总用户数

### 按月分组

我想列出按月分组的注册用户总数

好吧，这方面的困难在于我不想要每月的计数**，**而是 *直到（包括）当月的用户**总数***。

### 用户表结构

```
+---------------+--------------+------+-------------------+----------------+
| Field         | Type         | Null | Default           | Extra          |
+---------------+--------------+------+-------------------+----------------+
| ID            | int(11)      | NO   | NULL              | auto_increment |
| email         | varchar(225) | NO   | NULL              |                |
................................-CUT-.......................................
| registered    | timestamp    | NO   | CURRENT_TIMESTAMP |                |
+---------------+--------------+------+-------------------+----------------+ 
```

### 示例数据

```
1 example1@mail 2012-04-04 xx:xx:xx
2 example2@mail 2012-05-04 xx:xx:xx
3 example3@mail 2012-05-04 xx:xx:xx 
```

### 首选输出

```
+------+-------+-------+
| Year | Month | Count |
+------+-------+-------+
| 2012 | 01    | 0     |
| 2012 | 02    | 0     |
| 2012 | 03    | 0     |
| 2012 | 04    | 1     |
| 2012 | 05    | 3     |
+------+-------+-------+ 
```

*NULL*结果不是必需的。

我怎样才能在纯 mySQL 中实现该结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T17:35:48.657

我还没有尝试过，但是这些方面的东西应该可以工作-

```
SELECT tots.*, @var := @var + tots.`count`
FROM (
    SELECT
        YEAR(registered) AS `year`,
        MONTH(registered) AS `month`,
        COUNT(*) AS `count`
    FROM user
    GROUP BY `year`, `month`
) AS tots, (SELECT @var := 0) AS inc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T17:44:22.393

您可以使用几个用户变量来做到这一点：

```
set @c = 0;
set @d = 0;
select y, m, @d := @d + Count as Count from
  (select year(registered) as y, 
     month(registered) as m, 
     @c := @c + count(*) as Count
   from user
   group by y,m) as t; 
```

给你

```
+------+------+-------+
| y    | m    | Count |
+------+------+-------+
| 2011 |    1 |  2455 | 
| 2011 |    2 | 14253 | 
| 2011 |    3 | 42311 | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T17:41:43.843

这种方法首先获取发生任何注册的所有月份的第一天。然后，它加入每个注册时间大于当月第一天的用户，然后计算用户数量。

```
SELECT
    YEAR(dates.first_day_of_month) AS registration_year,
    MONTH(dates.first_day_of_month) AS registration_month,
    COUNT(u.ID)
FROM (
    SELECT DISTINCT
        DATE_SUB(
            DATE_ADD(
                DATE_SUB(registered,INTERVAL (DAY(registered)-1) DAY), 
            INTERVAL 1 MONTH), 
        INTERVAL 1 SECOND) first_day_of_month
    FROM user 
) dates 
    LEFT JOIN user u ON u.registered <= dates.first_day_of_month
GROUP BY dates.first_day_of_month 
```

如果您想避免在没有发生注册的月份中出现间隔，您可以将子查询替换为另一个使用预先存在的“数字”表来获取所有可能月份的列表的查询。

# objective-c - 旧代码给出“未使用的参数”错误，但以前从未出现过

> ID：10015974
> 
> 赞同：8
> 
> 时间：2012-04-04T17:06:17.667
> 
> 标签：objective-c, xcode4, parameters, compiler-errors

我打开了一些旧的 iOS 代码，当我尝试构建它时，我收到如下代码的“未使用参数”错误：

```
- (void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar {
    NSLog(@"Search Bar isn't used in this function");
} 
```

这是我第一次看到 Objective-C 编译器为此吐出错误（不是警告）。由于很多 iOS 调用不一定使用传递参数（例如很多回调），我需要帮助来摆脱这个。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-04T17:08:17.157

解决方案＃1）

在您的 Xcode 项目的“构建设置”中，有一个用于“未使用参数”的参数。

将其从 重置`YES`为`NO`。 ![未使用的参数警告](../Images/756d19379b32d2f79cad5d30649991da.png)

解决方案#2（Xcode 4 可用）：

在 Xcode 4.3.2 或更高版本中使用`__unused`.

[（感谢 Tim Bodeit 在下面的评论）](https://stackoverflow.com/a/10578498/1984384)

解决方案＃3）

放入`#pragma unused (searchBar)`您的代码，最好是在您的实现中声明函数的行下方。

IE

```
- (void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar {
    #pragma unused (searchBar)
    NSLog(@"Search Bar isn't used in this function");
} 
```

# objective-c - 如何将此 ColorPicker 从 iPhone 移动到 iPad 场景的一部分？

> ID：10015985
> 
> 赞同：0
> 
> 时间：2012-04-04T17:07:09.743
> 
> 标签：objective-c, xcode4, storyboard

我发现了一个在 iPhone 上占据整个屏幕的 ColorPicker ( [ILColorPicker )。](https://github.com/jawngee/ILColorPicker)我想在我的 iPad 应用程序中使用它（使用 StoryBoards 的 XCode4）......它要求我“在你的视图控制器的 XIB 中，添加一个 UIView，然后将它的类设置为 ILColorPickerView ”。我不想使用整个场景，只使用其中的一小部分……还有其他方法可以实现吗？（使用图层、框架等）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T17:12:21.690

您可以以编程方式[创建一个弹出](http://www.raywenderlich.com/1056/ipad-for-iphone-developers-101-uipopovercontroller-tutorial)框（UIPopoverViewController），并将颜色选择器作为弹出框的视图。

# c# - 匹配组中特定单词模式不同值的正则表达式拆分字符串

> ID：10015986
> 
> 赞同：2
> 
> 时间：2012-04-04T17:07:11.430
> 
> 标签：c#, regex

这个问题与我之前提出的问题（[This Question](https://stackoverflow.com/questions/9916597/regex-split-string-at-particular-word-pattern)）非常相似，但是我需要稍微改变一下。

所以在前面的问题中这个字符串

```
伯克希尔哈撒韦公司（代码：BRK；NAICS：524126、511130、335212、445292、511110、442210；Duns：00-102-4314） Walt Disney Co（代码：DIS；NAICS：713110、512110、711211、5152： 00-690-4700)

```

使用这些值创建 2 个匹配项：

```
伯克希尔哈撒韦公司
华特迪士尼公司

```

现在，我希望匹配项包含 Ticker: XXX 或优先选择 Ticker: XXX 的公司名称。

因此，对于上面的示例，它将匹配：

```
代码： BRK
代码： DIS

```

对于这个例子：

```
伯克希尔哈撒韦公司 (NAICS: 524126, 511130, 335212, 445292, 511110, 442210; Duns: 00-102-4314) Walt Disney Co (Ticker: DIS; NAICS: 713110, 512110, 711211, 0-690120; Duns:-0 4700)

```

结果将是：

```
伯克希尔哈撒韦公司
代码： DIS

```

我想我只是不太了解上一个问题中的正则表达式解决方案，无法理解如何修改它以适应这种模式。

正则表达式是用 C# 编写的

顺便说一句，以前的正则表达式解决方案是：

```
(?!\s*$)(.*?)(?:\([^)]*(?:(?:SIC|NAICS):[^)]*)+\)|$) 
```

我想现在应该改为：

```
(?!\s*$)(.*?)(?:\([^)]*(?:(?:SIC|NAICS|Duns):[^)]*)+\)|$) 
```

但是如果 Ticker 存在，我如何提取 Ticker: 并选择该值而不是另一个值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T19:06:04.410

我还在学习正则表达式，所以我不确定你是否可以在组上使用条件逻辑。不过，作为替代方案，您可以按如下方式修改您的正则表达式，以便它还为股票代码捕获一个组（如果存在）：

```
(?!\s*$)(.*?)(?:\((Ticker:[^;]+)?[^)]*(?:(?:SIC|NAICS|Duns):[^)]*)+\)|$) 
```

然后你可以在你的 c# 代码中执行逻辑。我想这样的事情会起作用：

```
Regex regex = new Regex(@"(?!\s*$)(.*?)(?:\((Ticker:[^;]+)?[^)]*(?:(?:SIC|NAICS|Duns):[^)]*)+\)|$)");
Match match = regex.Match("Berkshire Hathaway Inc (NAICS: 524126, 511130, 335212, 445292, 511110, 442210; Duns: 00-102-4314) Walt Disney Co (Ticker: DIS; NAICS: 713110, 512110, 711211, 515120; Duns: 00-690-4700)");  
while (match.Success) {
    if (match.Groups[2].Success)
    {
        Console.WriteLine(match.Groups[2].Value);
    }
    else
    {
        Console.WriteLine(match.Groups[1].Value);
    }
    match = match.NextMatch();
} 
```

输出：

```
Berkshire Hathaway Inc 
Ticker: DIS 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T17:14:52.733

我建议使用像[Expresso](http://www.ultrapico.com/Expresso.htm)这样的工具来计算你的正则表达式。它专为 C# Regex 设计，甚至可以将您需要使用的代码复制到剪贴板中。您可以将示例粘贴到工具中，然后调整您的正则表达式，直到它起作用。我发现像这样的工具是编写正则表达式的必备工具。

# c# - XML - 如何使用命名空间前缀

> ID：10015998
> 
> 赞同：0
> 
> 时间：2012-04-04T17:08:29.680
> 
> 标签：c#, xml, namespaces

我在[http://localhost/file.xml](http://localhost/file.xml)有这个 XML ：

```
<?xml version="1.0" encoding="utf-8"?>
<val:Root xmlns:val="http://www.hw-group.com/XMLSchema/ste/values.xsd">
<Agent>
<Version>2.0.3</Version>
<XmlVer>1.01</XmlVer>
<DeviceName>HWg-STE</DeviceName>
<Model>33</Model>
<vendor_id>0</vendor_id>
<MAC>00:0A:DA:01:DA:DA</MAC>
<IP>192.168.1.1</IP>
<MASK>255.255.255.0</MASK>
<sys_name>HWg-STE</sys_name>
<sys_location/>
<sys_contact>
HWg-STE:For more information try http://www.hw-group.com
</sys_contact>
</Agent>
<SenSet>
<Entry>
<ID>215</ID>
<Name>Home</Name>
<Units>C</Units>
<Value>27.7</Value>
<Min>10.0</Min>
<Max>40.0</Max>
<Hyst>0.0</Hyst>
<EmailSMS>1</EmailSMS>
<State>1</State>
</Entry>
</SenSet>
</val:Root> 
```

我正在尝试从我的 c# 代码中读取此内容：

```
static void Main(string[] args)
        {
            var xmlDoc = new XmlDocument();
            xmlDoc.Load("http://localhost/file.xml");
            XmlElement root = xmlDoc.DocumentElement;
            // Create an XmlNamespaceManager to resolve the default namespace.
            XmlNamespaceManager nsmgr = new XmlNamespaceManager(xmlDoc.NameTable);
            nsmgr.AddNamespace("val", "http://www.hw-group.com/XMLSchema/ste/values.xsd");

            XmlNodeList nodes = root.SelectNodes("/val:SenSet/val:Entry"); 
            foreach (XmlNode node in nodes)
            {
                string name = node["Name"].InnerText;
                string value = node["Value"].InnerText;

            Console.Write("name\t{0}\value\t{1}", name, value);
            }
            Console.ReadKey();

        }
    } 
```

问题是节点是空的。我知道这是阅读 XML 时常见的新手问题，仍然无法解决我做错的事情，可能与命名空间“val”有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T17:10:26.890

您需要将命名空间管理器传递给 SelectNodes() 方法。

编辑：更正的代码

```
XmlNodeList nodes = root.SelectNodes("/val:Root/SenSet/Entry", nsmgr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T17:16:50.523

只需将您的 Xpath 更改为：

```
XmlNodeList nodes1 = root.SelectNodes("/val:Root/SenSet/Entry",nsmgr); 
```

或者：

```
XmlNodeList nodes = root.SelectNodes("SenSet/Entry"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T17:26:41.730

您的 xpath 查询字符串应为：

```
XmlNodeList nodes = root.SelectNodes("/val:Root/SenSet/Entry", nsmgr); 
```

或更简洁地说，

```
XmlNodeList nodes = root.SelectNodes("//SenSet/Entry", nsmgr); 
```