# StackOverflow 问答 11273000-11273999

# objective-c - NSDateFormatter dateFromString 返回不正确的日期

> ID：11273001
> 
> 赞同：10
> 
> 时间：2012-06-30T09:23:14.483
> 
> 标签：objective-c, ios, nsdate, nsdateformatter

我正在尝试`NSDateFormatter`在我的应用程序中使用它，它接受一个日期字符串并将其格式化，`NSDate`以便我可以进行日期比较，但是我发现当我使用 dateFromString 并对其进行格式化时，日期会丢失一天。

```
NSString *dateString = @"02-06-2012";
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"dd-MM-yyyy"];
NSDate *dateFromString = [[NSDate alloc] init];
dateFromString = [dateFormatter dateFromString:dateString];
NSLog(@"My Date = %@", dateFromString);
[dateFormatter release]; 
```

这将输出到控制台：

> 我的日期 = 2012-06-01 23:00:00 +0000

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-30T09:26:34.303

尝试将此行添加到您的代码中，

```
[dateFormatter setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"GMT+0:00"]]; 
```

或者

```
[dateFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]]; 
```

**斯威夫特更新：**

来自问题的代码，

```
let dateString = "02-06-2012"
var dateFormatter = NSDateFormatter()
dateFormatter.dateFormat = "dd-MM-yyyy"
var dateFromString : NSDate = dateFormatter.dateFromString(dateString)!
println("My Date \(dateFromString)") 
```

和解决方案，

```
dateFormatter.timeZone = NSTimeZone(name: "GMT") 
```

或者

```
dateFormatter.timeZone = NSTimeZone(abbreviation: "GMT+0:00") 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-30T11:45:10.257

我不相信 Dhruv 的回答是正确的。事实上，根本不清楚有什么问题。您似乎对应该发生的事情和/或对正在发生的事情的解释有错误的期望。

`NSDate`代表一个时刻。这一刻没有一个唯一的名字。它将在不同的地方和不同的命名系统（时区、日历）下以不同的名称而闻名。`NSDate`不处理任何这些，除了在它的`-description`方法中蹩脚，它必须产生那个时刻的字符串表示。

其次，像“02-06-2012”这样的字符串没有指定精确的时间点。首先，它只是一个没有时间信息的日期，因此`NSDateFormatter`默认为该日期的第一刻。其次，它没有指定时区。日历日的第一时刻在每个时区都是不同的时刻。除非您指定时区`-setTimeZone:`或字符串本身带有时区信息，`NSDateFormatter`否则假定您要求它解析的任何日期字符串都在当前时区中。

因此，您的`dateFromString`对象代表您所在时区中指定日期 02-06-2012 的第一刻。我希望这就是你想要的。`NSDate`但是，您随后对登录时描述自己的方式感到困惑。正如我所说，`NSDate`必须为它所代表的那一刻选择一些“名称”（字符串表示），而它选择的名称是相当随意的。这些天来，它正在选择以 UTC 为已知时刻的名称。我从您的问题中显示的日志输出中收集到您位于 UTC+0100。因此，日期可能看起来提前一天，但实际上是您指定的同一时刻。换句话说，“2012-06-01 23:00:00 +0000”和“2012-06-02 00:00:00 +0100”是完全相同的时间点的两个等效名称。你只是'

教训是您必须停止依赖`NSDate`的自我描述才能处于任何特定时区。真的，你不必依赖任何关于它的东西，因为它没有记录在案。事实上，`-[NSDate description]`状态文档，“不能保证表示在操作系统的不同版本中保持不变。”

Dhruv 的解决方案*似乎*有帮助，仅仅是因为它导致`NSDateFormatter`并`-[NSDate description]`就时区达成一致。但这是不可靠的。例如，它不适用于 Snow Leopard，因为`-[NSDate description]`在该版本的框架中使用本地时区而不是 UTC。

但是，更重要的是，它会改变您从日期字符串的解释中`NSDate`获得的对象所代表的实际时刻。`NSDateFormatter`我怀疑您确实希望它具有特定含义-您希望将字符串解释为在本地时区中-而他的解决方案阻碍了您的意图。

tl;博士：你一直在得到你想要的日期；不要依赖`-[NSDate description]`；不要使用 Dhruv 的解决方案

# c++ - clang mac 链接错误与 gtest 架构 x86_64 的未定义符号

> ID：11273006
> 
> 赞同：2
> 
> 时间：2012-06-30T09:23:46.950
> 
> 标签：c++, macos, cmake, clang

不知道我在这里遇到什么问题。

*   Mac 铿锵声 3.1 cmake
*   测试
*   几个文件
*   使用少量 C++11 功能
*   我已经下载并安装了 XCode 构建工具

`CMAKE_CXX_FLAGS = -Wall -std=c++0x -stdlib=libc++ -v`

构建良好的输出......

```
[100%] Building CXX object CMakeFiles/soupbintcptest.dir/soupmessages_tests.cpp.o
clang version 3.1 (tags/RELEASE_31/final)
Target: x86_64-apple-darwin11.3.0
Thread model: posix 
```

链接会转储大量错误。ABI 错误？我知道发生了这种 C++11 命名空间修饰的事情。

```
Undefined symbols for architecture x86_64: 
```

它们都是`std::`命名空间中不会链接的所有东西，例如：

```
 "std::basic_ostream<char, std::char_traits<char> >& std::operator<< <char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, std::_Setprecision)", referenced from:
      testing::AssertionResult testing::internal::FloatingPointLE<float>(char const*, char const*, float, float) in libgtest.a(gtest-all.cc.o)
      testing::AssertionResult testing::internal::FloatingPointLE<double>(char const*, char const*, double, double) in libgtest.a(gtest-all.cc.o)
      testing::Message::Message() in libgtest.a(gtest-all.cc.o) 
```

或者

```
"std::cerr", referenced from:
      testing::internal::GTestLog::GetStream() in libgtest.a(gtest-all.cc.o)
  "std::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string()", referenced from:
      testing::UnitTest::AddTestPartResult(testing::TestPartResult::Type, char const*, int, testing::internal::String const&, testing::internal::String const&) in libgtest.a(gtest-all.cc.o)
      testing::internal::SingleFailureChecker::~SingleFailureChecker() in libgtest.a(gtest-all.cc.o)
      testing::internal::StringStreamToString(std::basic_stringstream<char, std::char_traits<char>, std::allocator<char> >*) in libgtest.a(gtest-all.cc.o)
      testing::TestInfo::TestInfo(char const*, char const*, char const*, char const*, void const*, testing::internal::TestFactoryBase*) in libgtest.a(gtest-all.cc.o)
      testing::TestInfo::~TestInfo() in libgtest.a(gtest-all.cc.o)
      testing::internal::ReportInvalidTestCaseType(char const*, char const*, int) in libgtest.a(gtest-all.cc.o)
      testing::internal::XmlUnitTestResultPrinter::PrintXmlUnitTest(__sFILE*, testing::UnitTest const&) in libgtest.a(gtest-all.cc.o)
      ... 
```

我相信我已经用相同的 clang++ 版本构建了 gtest。不知道这里还有什么可以推动这些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-24T02:30:53.880

当链接器将不同的 c++ 库拉入与编译器正在构建的库相匹配的库时，我看到了与您类似的错误。在您的情况下，您只是在修改编译器标志，但链接器不知道您的选择，并且可能链接到错误的 C++ 库。

如果您能够使用 CMake 3.2 或更高版本，那么与其直接修改 C++ 编译器标志，我建议您只告诉 CMake 您要使用 C++11，然后让它计算出适当的编译器和链接器标志你。这可以通过在调用之前添加以下内容来*完成*`project()`：

```
set(CMAKE_CXX_STANDARD 11)
set(CMAKE_CXX_STANDARD_REQUIRED ON) 
```

本文详细讨论了此功能和相关的 CMake[功能](https://crascit.com/2015/03/28/enabling-cxx11-in-cmake/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T09:43:02.040

C++11 中没有关于名称修饰的任何内容，它从第一个 C++ 实现开始就一直在进行。但是，不要忘记您必须为相同的 stdlib 开关构建 gtest，因为它找不到标准库。

# routing - 为什么 Kademlia 会如何构建其路由表？

> ID：11273007
> 
> 赞同：4
> 
> 时间：2012-06-30T09:23:54.940
> 
> 标签：routing, p2p, dht, kademlia

我了解 Kademlia 路由表由 160 个存储桶组成。

节点被放入存储桶 0-159，具体取决于它们的前缀长度（这是本地节点密钥和节点的 XOR 中的前导未设置位的数量）。

为什么会这样，是否涉及任何性能优势（除了迭代 160*20 节点以找到最接近的节点是不可行的事实之外）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T11:54:12.263

Kademlia 使用 2 个节点 ID 的 XOR 作为它们之间距离的度量。路由表存储桶的想法是，节点对“靠近”它的网络有详细的了解，而您从其 ID 中获得的知识越少。

为了找到最接近特定键的一组节点，节点将首先从它自己的路由表中查询它所知道的最近的节点。平均而言，这些查找中有一半会落入存储桶 0 所覆盖的地址空间。但是该存储桶只允许包含 20 个节点，因此这些节点实际上是最近的节点的可能性很小。但是，该桶中的每个节点都将更详细地了解地址空间的那一部分，并且可能能够从其自己的路由表中提供更好的关闭节点列表，然后也可以查询这些节点，等等。

通过这种方式，迭代查找非常快速地在实际最近的节点组上进行磨练。

当你说

> 遍历 160*20 个节点以找到最接近的节点是不可行的

我认为您的意思是实际查询它们中的每一个是不可行的；因为遍历这样的列表以提取最接近的列表正是节点处理查找请求 (RPC) 的方式。

请注意，在现实世界的场景中，桶的数量不太可能接近 160。例如，对于十亿节点的网络，平均桶数为 27。

至于在原始 Kademlia 论文中选择的实际值，我不知道为什么将桶大小指定为 20。但是，我认为 160 是从 SHA1 哈希的位大小派生的。通常，散列函数用于为要存储的给定值生成密钥。如果使用 SHA1 的哈希冲突的风险相当低，那么这很好。如果不是，可以使用不同的散列算法，例如 SHA256 将产生多达 256 个桶。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T00:25:24.193

> 为什么会这样，是否涉及任何性能优势

该组织与 XOR 度量相结合创建了分层的局部性，以保证查询离目标更近的节点会知道更近的节点。这会产生指数收敛。

也许您可以将其视为分布式区间搜索。

> 我了解 Kademlia 路由表由 160 个存储桶组成。

（最多）160 个桶的平面数组只是许多实现用来近似正确路由表布局的原始方式。

使用桶拆分或多宿主路由表，您需要一个实际的树布局，其中可能包含超过 160 个桶。

事实上，这里有一个多宿主 DHT 节点的树状路由表的一小部分，它有 89 个节点 ID，完整的表比这个大（这些基本上是 89 个 ID 中的两个的区域）：

```
0000000...   entries:8 replacements:8
0000001000...   entries:8 replacements:8
0000001001000...   entries:8 replacements:8
00000010010010...   entries:8 replacements:8
00000010010011000...   entries:8 replacements:8
000000100100110010...   entries:8 replacements:8
0000001001001100110...   entries:8 replacements:8
00000010010011001110...   entries:8 replacements:8
0000001001001100111100...   entries:5 replacements:0
0000001001001100111101...   entries:8 replacements:0
000000100100110011111...   entries:8 replacements:0
0000001001001101...   entries:8 replacements:8
000000100100111...   entries:8 replacements:8
000000100101...   entries:8 replacements:8
00000010011...   entries:8 replacements:8
000000101...   entries:8 replacements:8
00000011...   entries:8 replacements:8
0000010...   entries:8 replacements:8
0000011000...   entries:8 replacements:8
0000011001000...   entries:8 replacements:8
00000110010010...   entries:8 replacements:8
00000110010011000...   entries:8 replacements:8
000001100100110010...   entries:8 replacements:8
0000011001001100110...   entries:8 replacements:8
00000110010011001110...   entries:8 replacements:5
0000011001001100111100...   entries:6 replacements:0
0000011001001100111101...   entries:2 replacements:0
000001100100110011111...   entries:8 replacements:0
0000011001001101...   entries:8 replacements:8
000001100100111...   entries:8 replacements:8
000001100101...   entries:8 replacements:8
00000110011...   entries:8 replacements:8
000001101...   entries:8 replacements:8
00000111...   entries:8 replacements:8 
```

它的查找缓存更大，由 7k 个存储桶组成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-15T13:23:16.230

这个算法是在 2001 年左右创建 P2P 文件共享服务的。为了把它放在上下文中，假设每个 P2P 节点都存储和提供 mp3 文件。路由表包含这些文件的哈希值。

使用当时的存储硬件，不可能在每个节点上存储所有文件。这个想法是每个 P2P 用户在他们的 PC 上存储这个 mp3 数据库的一部分。最大 160*20 = 3200 个 mp3 文件大约需要 15 Gb。感觉很合理。

必须有一种方法以公平的方式分发数据。对数距离（基于前缀长度）就是其中之一。具有“更多”哈希的文件更频繁地发生冲突。他们相应的存储桶很快就满了，进入那里的文件更加随机。具有“更接近”哈希值的文件将是您作为对等方负责存储更长时间的文件。这些文件较少，它们填充存储桶的速度较慢。

> 除了迭代 160*20 个节点来找到最近的节点是不可行的之外

现在比较 3200 个距离并不是什么大问题，但是，是的，存储桶有助于找到与您“最接近”的那些进行复制。

# html - 如何显示来自两组输入的值的总和 - ajax

> ID：11273016
> 
> 赞同：1
> 
> 时间：2012-06-30T09:24:32.520
> 
> 标签：html, ajax, input, sum

我想在单击单选按钮时总结 group name='s' 和 group name='v' 的值，它们调用函数 pieces(str, str2)

问题是，这里似乎是一次执行 ajax。激活第 2 组时无法获取第 1 组的值，反之亦然

这些是输入

```
 <input type='radio' id='1' name='s' onclick='pieces(this.value);'  value='6'>6
    <input type='radio' id='2' name='s' onclick='pieces(this.value);'  value='12'>12
    <input type='radio' id='3' name='s' onclick='pieces(this.value);'  value='24'>24

    <input type='radio' id='11' name='v' onclick='pieces(this.value);'  value='50'>Yes
    <input type='radio' id='12' name='v' onclick='pieces(this.value);'  value='0'>No

    <div id='txtHint'>Sum will display here</div> 
```

这是我的脚本

```
 $(document).ready(function(){

                    $('#btn').click(function(){
                        var str1=$('input:radio[name=s]').val();
                        var str2=$('input:radio[name=v]').val();
                        pieces(str1,str2);
                    });
                    });

                function pieces(str1, str2)

                {                   
                    if (window.XMLHttpRequest)

                      {// code for IE7+, Firefox, Chrome, Opera, Safari
                      xmlhttp=new XMLHttpRequest();
                      }

                    else
                      {// code for IE6, IE5
                      xmlhttp=new ActiveXObject('Microsoft.XMLHTTP');
                      }

                    xmlhttp.onreadystatechange=function()
                      {
                      if (xmlhttp.readyState==4 && xmlhttp.status==200)
                        {               document.getElementById(txtHint).innerHTML=xmlhttp.responseText;
                        }

                      }

                    xmlhttp.open('GET','url.php?var1='+str1+'&var2='+str2,true);

                    xmlhttp.send();

                } 
```

这是ajax代码的链接页面

```
 <?php

    $s = $_GET['s'];
    $v = $_GET['v'];

    if($s == 6 && $v == 50)
        echo"value";

    else if($s == 6 && $v == 0)
        echo"value";

    else if($s == 12 $v == 50)
        echo"value";

    else if($s == 12 $v == 0)
        echo"value";

    else if($s == 24 $v == 50)
            echo"value";

    else if($s == 24 $v == 50)
            echo"value";

    ?> 
```

请帮忙。新手在这里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T09:40:11.780

一些观察：

*   在您`onclick`的`input`元素中，您`pieces`使用一个参数调用，而该函数需要并使用两个参数（`str`和`str2`）：它需要在 ajax 调用中调用正确的 URL。因此，最好执行以下操作而不是立即调用：创建一个函数，通过查看 group和 group中当前选择的选项`pieces`来收集`str`和查看值。然后，您可以使用这两个值进行调用。`str2``s``v``pieces`
*   您是否检查过您的 ajax 调用是否正确？请求是否真正到达服务器？如今，依靠 JavaScript 库来执行 ajax 调用很常见，但如果您的 ajax 代码是正确的并且可以在多个浏览器中工作，那也没关系。
*   最后，您从 ajax 调用返回响应，但它从未在 JavaScript 代码中使用。您需要阅读 ajax 响应并将值放在网页中的某处（也使用 JavaScript）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T13:13:23.753

最后我得到了我自己问题的答案。我会把它贴在这里，以使那些提出同样问题的人受益。

```
 <html>
    <head>
    <script LANGUAGE="JavaScript">

    function calc()
    {

      if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
      else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }

      if (document.form.value1[0].checked)
        s = 6;

      else if (document.form.value1[1].checked)
        s = 12;

      else if (document.form.value1[2].checked)
        s = 24;

      if (document.form.value2[0].checked)
        v = 5;

      else  if (document.form.value2[1].checked)
        v = 0;

      document.getElementById("resp").innerHTML="Calculating...";
      queryPath = "CalcServ.php?value1="+s+"&value2="+v;

      xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {

          document.getElementById("resp").innerHTML=xmlhttp.responseText;

        }
      }

      xmlhttp.open("GET",queryPath);
      xmlhttp.send();

    }
    </script>
    </head>
    <body>
        <div width="320">
          <center>
            <form name="form">
            <font size="4"><strong>PHP/AJAX Calculator</strong></font><br/><br/>
               <input  onclick='calc(this.value);' id="6" type="radio" name="value1" value="6">6<br/>
               <input  onclick='calc(this.value);' id="12" type="radio" name="value1" value="12">12<br/>
               <input  onclick='calc(this.value);' id="24" type="radio" name="value1" value="24">24<br/>

               <br/>
                 <input  onclick='calc(this.value);' id="y" type="radio" name="value2" value="yes">yes<br/>
                 <input  onclick='calc(this.value);' id="n" type="radio" name="value2" value="no">no<br/>
             </form>

        <strong><font size="4" color="blue"><span id="resp"></span></font></strong>
        </center>
        </div>
          </body>

    </html> 
```

这是要调用的页面

```
 <?php

    if ($_REQUEST["value1"] == "6" && $_REQUEST["value2"] == "5")
        $sum = 6 + 5;

    else if ($_REQUEST["value1"] == "6" && $_REQUEST["value2"] == "0")
        $sum = 6;

    else if ($_REQUEST["value1"] == "12" && $_REQUEST["value2"] == "5")
        $sum = 12 + 5;

    else if ($_REQUEST["value1"] == "12" && $_REQUEST["value2"] == "0")
        $sum = 12;

    else if ($_REQUEST["value1"] == "24" && $_REQUEST["value2"] == "5")
        $sum = 24 + 5;

    else if ($_REQUEST["value1"] == "24" && $_REQUEST["value2"] == "0")
        $sum = 24;

    echo $sum;

    ?> 
```

# opengl-es-2.0 - 如何在 OpenGL ES 中直接操作纹素？

> ID：11273017
> 
> 赞同：0
> 
> 时间：2012-06-30T09:24:33.037
> 
> 标签：opengl-es-2.0, textures, pixels, hardware-acceleration

我想使用 OpenGL ES 在屏幕上缩放和显示图像。图像将每秒更新约 20 次，因此我们的想法是直接在纹理中进行绘制。虽然缩放应该由显卡完成，但我的应用程序保证像素格式的格式正确。我的应用程序需要逐个像素地操作图像。由于应用程序的架构，我想避免调用，`settexel(x,y,color)`但直接写入内存。

*   是否可以直接访问（显卡？）内存中的纹理并以像素为单位进行更改？
*   如果没有，是否可以使用类似`settexel(x,y,color)`改变纹理的东西？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:45:26.720

好的，在询问了我公司的一些人之后，我发现没有直接访问图形内存（解决方案 1）或从着色器中访问主内存（解决方案 2）的干净方法。

因此，我会将像素存储在主存储器中，并将更改的区域通过移动`glTextSubImage2D`到图形存储器中。

感谢所有帮助我的人！

# vb.net - 在 vb.net 中将 < 和 > 转换为 < 和 >

> ID：11273019
> 
> 赞同：2
> 
> 时间：2012-06-30T09:24:49.700
> 
> 标签：vb.net, tags

我有这个字符串

```
<PARAMETERS zone = "6" check_in = "2012-07-01" check_out = "2012-07-02">
            <ROOMS>
               <ROOM adults = "2" children = "0"/>
            </ROOMS>
        </PARAMETERS> 
```

我想在 vb.net 中获得另一个

```
&lt;PARAMETERS zone = "6" check_in = "2012-07-01" check_out = "2012-07-02"&gt;
        &lt;ROOMS&gt;
            &lt;ROOM adults = "2" children = "0"/&gt;
        &lt;/ROOMS&gt;
    &lt;/PARAMETERS&gt; 
```

有人知道是否存在直接执行此操作的功能？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T09:26:51.170

[`HttpUtility.HtmlEncode`](http://msdn.microsoft.com/en-us/library/system.web.httputility.htmlencode.aspx)会成功的。

来自 MSDN：

> 将字符串转换为 HTML 编码的字符串。

可以像这样使用一个重载：

```
var html = HttpUtility.HtmlEncode(myStringToEncode); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T09:29:11.693

如果您只想替换特定字符，您也可以使用该[`String.Replace`](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)方法

```
mystr.Replace("<", "&lt;"); 
```

# mobile - 沃达丰英国不断剥离我的自定义移动标题

> ID：11273022
> 
> 赞同：1
> 
> 时间：2012-06-30T09:25:52.787
> 
> 标签：mobile, http-headers

目前在英国使用沃达丰做一些工作。

他们可能会从我的移动请求中撕下标头，请参阅[http://wurfl.sourceforge.net/vodafonerant/](http://wurfl.sourceforge.net/vodafonerant/)

我想知道是否有人曾经通过沃达丰网络使用过移动设备并且需要传递自定义数据，即标题中的 SessionId。我需要在标头中传递值，因为它特定于移动平台，并且网站 Web 服务由不需要此数据的其他非移动消费者使用，因此标头是他们的理想场所......那就是当他们不会被沃达丰淘汰。

标准标题列表是 [http://en.wikipedia.org/wiki/HTTP_headers](http://en.wikipedia.org/wiki/HTTP_headers)

如果你们中的任何一个人使用了一个您知道沃达丰不会剥离并且可以“重新利用”的标准标头，那么很高兴知道。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:31:40.810

我已经和几个人谈过了，显然使用基本访问身份验证标头效果很好。所以我会用这个。

[http://en.wikipedia.org/wiki/Basic_access_authentication](http://en.wikipedia.org/wiki/Basic_access_authentication)

# android - 标记android相机中心

> ID：11273023
> 
> 赞同：0
> 
> 时间：2012-06-30T09:25:53.800
> 
> 标签：android, camera

我写了一个简单的相机应用程序，我需要向用户显示相机的中心（比如默认相机焦点或狙击枪的非常指向）

我怎样才能做到这一点。请给我打电话。

谢谢！

```
import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;

public class FYP10Activity extends Activity {   
    /** Called when the activity is first created. */

    ImageView imageView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button button = (Button) findViewById(R.id.button1);
        imageView = (ImageView) findViewById(R.id.imageView1);

        button.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

                Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                startActivityForResult(intent, 0);
            }
        });
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);

        Bitmap bitmap = (Bitmap) data.getExtras().get("data");
        imageView.setImageBitmap(bitmap);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T09:33:39.673

您无法通过对默认相机的意图调用来执行此操作，因为您在拍照期间将控制权交给了另一个应用程序。您必须覆盖相机并在其上添加您自己的视图。在“构建相机应用程序”下查看[这个](http://developer.android.com/reference/android/hardware/Camera.html)和[这里。](http://developer.android.com/guide/topics/media/camera.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T10:20:20.447

通过使用 Intent，控件从您的 Activity 切换到具有自己的一组视图元素的 Camera Activity（Android 相机应用程序）。因此，您必须编写自己的应用程序版本。一个很好的演示代码可以在[这里](http://marakana.com/forums/android/examples/39.html)找到。基本上，您必须设置一个 SurfaceView 来渲染预览帧并将其大小调整为您想要的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T01:29:14.750

我用自定义相机做到了这一点，它需要 serfaceview。我在相对布局的中间放置了一个十字。它工作得很好。

# jquery-mobile - 如何以编程方式在 jquery mobile Datebox 插件 1.1.0 中设置日期

> ID：11273029
> 
> 赞同：2
> 
> 时间：2012-06-30T09:26:48.867
> 
> 标签：jquery-mobile, datebox

我想用日期框控件以编程方式为输入设置日期，为此我知道我可以使用这样的东西

```
$(element).trigger('datebox', {'method':'set', 'value':'dateString'}); 
```

但这似乎并没有更新控件（即当我打开日历时，它被设置为当前日期并且不等于输入字段中的值）

编辑：基于 JTsage 的指针，我使用这样的东西将默认日期格式覆盖为 mm/dd/yyyy。

```
jQuery.extend(jQuery.mobile.datebox.prototype.options.lang, {
    'en': {
        dateFormat: '%m/%d/%Y'

    }
});
jQuery.extend(jQuery.mobile.datebox.prototype.options, {
    useLang: 'en'
}); 
```

然后我尝试使用这样的东西设置日期

```
$(element).trigger('datebox', {'method':'set', value:'07/02/2012'}); 
```

但是当我导航到页面时，这个日期没有出现。有趣的是，当我尝试从 firebug 控制台更新日期（在该页面上）时，它更新了字段以及 datebox 控件。

我不知道为什么会这样..需要帮助，请回复 JT

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T08:24:50.720

所以最后我通过这样做解决了这个问题

```
jQuery.extend(jQuery.mobile.datebox.prototype.options, {
    'overrideDateFormat': '%m-%d-%Y',
    'overrideHeaderFormat': '%m-%d-%Y'
}); 
```

显式设置输入字段的值

```
$(element).val('06-21-2012'); 
```

然后刷新日期框

```
$(element).trigger('datebox', {'method':'set', 'value':'06-21-2012'}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T06:47:01.370

我找到了解决方案，试试这个

```
 $(element).trigger('datebox', { 'method': 'doset' }); 
```

# wix - 使用 wix 安装到公共模板文件夹

> ID：11273035
> 
> 赞同：1
> 
> 时间：2012-06-30T09:28:10.957
> 
> 标签：wix, windows-installer

在Windows 安装程序提供的[系统文件夹属性](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370905%28v=vs.85%29.aspx#system_folder_properties)`TemplateFolder`列表中，我看到“*当前用户的模板文件夹的完整路径*”。所以我可以使用`TemplateFolder`wix 中的目录 ID 来安装用户特定的模板。

但是，我需要安装到*common* templates 文件夹，即windows API 中称为`CSIDL_COMMON_TEMPLATES`(also ) 的文件夹。`FOLDERID_CommonTemplates`Windows 安装程序似乎没有为此提供系统文件夹属性。

如何使用 wix 将文件安装到公共模板文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-22T12:22:05.593

[文档](https://docs.microsoft.com/windows/win32/msi/installation-context)在“TemplateFolder”-ID上告诉我们，它**取决于安装上下文**是“所有用户的 Templates 文件夹的完整路径”（每台机器）还是“当前的 Templates 文件夹的完整路径”用户”（每个用户）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:54:53.917

我最终定义了一个`COMMONTEMPLATEFOLDER`这样的：

```
<DirectoryRef Id='TARGETDIR'>
  <Directory Id='COMMONTEMPLATEFOLDER' Name='Templates' />
</DirectoryRef>

<Property Id="COMMONTEMPLATEFOLDER">
   <RegistrySearch Id="searchCommonTemplateFolder"
      Root="HKLM"
      Key="SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\User Shell Folders"
      Name="Common Templates"
  Type="raw" />
</Property> 
```

这似乎工作正常，但不幸的是它依赖于[未记录的注册表项](http://blogs.msdn.com/b/oldnewthing/archive/2003/11/03/55532.aspx)。我仍然想找到更好的方法。

# string - 使用 sed 命令从文本文件中提取字符串

> ID：11273038
> 
> 赞同：2
> 
> 时间：2012-06-30T09:28:23.647
> 
> 标签：string, bash, shell, sed

我有一个文本文件，其中包含如下几行：

```
ASDASD2W 3ASGDD12 SDADFDFDDFDD W11 ACC=PNO23 DFSAEFEA EAEDEWRESAD ASSDRE 
AERREEW2 3122312 SDADDSADADAD W12 ACC=HH34 23SAEFEA EAEDEWRESAD ASEEWEE 
A15ECCCW 3XCXXF12 SDSGTRERRECC W43 ACC=P11 XXFSAEFEA EAEDEWRESAD ASWWWW 
ASDASD2W 3122312 SDAFFFDEEEEE SD3 ACC=PNI22 ABCEFEA EAEDEWRESAD ASWEDSSAD 
... 
```

我必须为每一行提取'='字符和以下空格之间的子字符串，即

```
PNO23
HH34
P11
PNI22 
```

我一直在使用**sed**命令，但无法弄清楚如何忽略空格后面的所有字符。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T09:31:21.730

为工作使用正确的工具。

```
$ awk -F '[= ]+' '{ print $6 }' input.txt
PNO23
HH34
P11
PNI22 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T11:16:04.763

抱歉，但必须添加另一个，因为我觉得现有的答案太复杂了

```
sed 's/.*=//; s/ .*//;' inputfile 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T15:04:22.470

这可能对您有用：

```
sed -n 's/.*=\([^ ]*\).*/\1/p' file 
```

或者，如果您愿意：

```
sed 's/.*=\([^ ]*\).*/\1/p;d' file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T10:41:43.077

将要捕获的字符串放在反向引用中：

```
sed 's/.*=\([^ =]*\) .*/\1/' 
```

或零敲碎打地进行替换；

```
sed -e 's/.*=//' -e 's/ .*//' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-30T10:42:42.797

```
sed 's/[^=]*=\([^ ]*\) .*/\1/' inputfile 
```

匹配所有非等号字符和一个等号。捕获一系列非空格字符。匹配一个空格和该行的其余部分。替换捕获的字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-09T16:59:05.940

一串 grep 可以解决问题。

```
grep -o '[=][a-zA-Z0-9]*' file | grep -o '[a-zA-Z0-9]*' 
```

# web-applications - 确定构建 webapp 的移动平台

> ID：11273042
> 
> 赞同：0
> 
> 时间：2012-06-30T09:28:54.847
> 
> 标签：web-applications, jquery-mobile, frameworks, platform

我一直在**Jquery Mobile**中构建网络应用程序......我还根据客户的要求定制了他们的主题和布局......但是我在网上看到了一些有趣的东西，同时为我的布局找到了一些新的东西......

[在移动设备上查看此 Web 应用程序](http://lucknowjobs.net/jobs/)

显然，它不是 JqMobile，因为我认为 jqMobile 不提供这种类型的功能......那么它是什么，**Sencha Touch 或任何其他移动平台**......

1.  我如何构建一个像这样的 webapp 作为这个 webapp 上的默认主题以及一些类似的基本功能？？？
2.  或者是否可以在 Jqmobile 中构建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T12:19:23.963

1.  它是一个 wordpress 块，并且该网站正在使用 WpTouch 插件。 [http://wordpress.org/extend/plugins/wptouch/](http://wordpress.org/extend/plugins/wptouch/)
2.  是的，可以在 jquery-mobile 中构建。但是您必须进行很多调整以使其与客户的要求相匹配。或者您可以在不使用框架的情况下进行构建。

# python - SQLAlchemy 菜单项层次结构/排序

> ID：11273043
> 
> 赞同：0
> 
> 时间：2012-06-30T09:29:00.440
> 
> 标签：python, sqlalchemy, flask, flask-sqlalchemy

我对 ORM 很陌生，所以我需要一些帮助来为我的 Flask 应用程序创建菜单。我已经实现了模型 MenuItem（src 在下面）。

要点是：

*   它与自身具有一对多的关系。
*   它与模型具有多对多关系`Role`

我的问题：

1.  我可以跳过删除 generate_menu fn 中不可访问的子对象吗？这段代码（递归方法mark_restricted的调用）看起来太复杂了，不知在ORM查询中能不能做到？

2.  实现菜单项排序的最佳实践是什么？

谢谢各位！

```
class MenuItem(db.Model):
    """
    Menu item model

    """

    __tablename__ = 'sa_menu_item'

    id = db.Column(db.Integer, primary_key=True)
    parent_id = db.Column(db.Integer, db.ForeignKey('sa_menu_item.id'))    
    text = db.Column(db.String(100))
    view = db.Column(db.String(100))
    icon = db.Column(db.String(50))
    active = db.Column(db.Boolean)
    children = db.relationship('MenuItem')
    allowed_roles = db.relationship('Role',
                    secondary=menu_role
                    ,backref='menu_item')

    def __init__(self, text, view=None, icon=None):

        self.text = text
        self.view = view
        self.icon = icon

    def accessible_for(self, provided_set):

        for role in self.allowed_roles:
            if role.match(provided_set): return True
        return False

    def mark_restricted(self, lst, priv, not_allowed):
        """ Adds menu items restricted by priv to not_allowed list  """

        if not self.accessible_for(priv):
            if self in lst:
                not_allowed.append(lst.index(self))
            return

        if self.children is not None:
            for child in self.children:
                if not child.accessible_for(priv):
                    self.children.remove(child)
                else:
                    child.mark_restricted(lst, priv,not_allowed)

    @classmethod
    def generate_menu(cls, provided_set):
        """Generates menu based on provided_set of permissions""" 

        not_allowed = []

        lst = MenuItem.query.filter(MenuItem.parent_id == None, MenuItem.active == True, MenuItem.children != None).all()

        for item in lst:
            item.mark_restricted(lst,provided_set,not_allowed)

        lst = [i for j, i in enumerate(lst) if j not in not_allowed]

        return lst 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T19:15:40.650

我通过添加附加属性`order = db.Column(db.Integer)`并将以下行添加到 generate_menu fn 来实现自定义菜单项排序：

```
item.children.sort(key=operator.attrgetter('order')) 
```

# android - WebView 用户代理

> ID：11273045
> 
> 赞同：6
> 
> 时间：2012-06-30T09:29:12.270
> 
> 标签：android, android-webview

我有加载一个移动站点的WebView，我需要发送到用户代理到服务器它是如何实现的？

```
mWebView = (WebView) findViewById(R.id.webview);
mWebView.getSettings().setJavaScriptEnabled(true); 
mWebView.loadUrl("http://searchmp3.mobi/");   
mWebView.setWebViewClient(new HelloWebViewClient()); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-30T09:45:29.387

签出[WebSettings](http://developer.android.com/reference/android/webkit/WebSettings.html)[`setUserAgentString()`](http://developer.android.com/reference/android/webkit/WebSettings.html#setUserAgentString%28java.lang.String%29)中的方法，例如

```
mWebView.getSettings().setUserAgentString("My user agent string, here"); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-30T09:49:42.960

试试这个

```
 WebView wv = (WebView) findViewById(R.id.webview1);    
 WebSettings webSettings = wv.getSettings();    
 webSettings.setBuiltInZoomControls(true);  
 wv.loadUrl("http://www.google.com"); 
```

# xml - 使用 xpath 查找父节点的位置

> ID：11273046
> 
> 赞同：11
> 
> 时间：2012-06-30T09:29:14.163
> 
> 标签：xml, xslt, xpath, parent

如何使用 xpath 获取完整文档中父节点的位置？

说我有以下xml：

```
<catalog>
  <cd>
    <title>Empire Burlesque</title>
    <artist>Bob Dylan</artist>
    <country>USA</country>
    <company>Columbia</company>
    <price>10.90</price>
    <year>1985</year>
  </cd>
  <cd>
    <title>Hide your heart</title>
    <artist>Bonnie Tyler</artist>
    <country>UK</country>
    <company>CBS Records</company>
    <price>9.90</price>
    <year>1988</year>
  </cd>
</catalog> 
```

我有一个 XSLT 将其转换为 HTML，如下所示（仅片段）：

```
<xsl:template match="/">
<html>
  <body>  
  <xsl:apply-templates/>  
  </body>
  </html>
</xsl:template>

<xsl:template match="cd">
  <p>
    <xsl:number format="1\. "/><br/>
    <xsl:apply-templates select="title"/>  
    <xsl:apply-templates select="artist"/>
  </p>
</xsl:template>

<xsl:template match="title">
  <xsl:number format="1" select="????" /><br/>
  Title: <span style="color:#ff0000">
  <xsl:value-of select="."/></span>
  <br />
</xsl:template> 
```

我应该在 ???? 的地方写什么 获取文档中父 cd 标签的位置。我尝试了很多表达方式，但似乎没有任何效果。可能是我做错了。

1.  `<xsl:number format="1" select="catalog/cd/preceding-sibling::..[position()]" />`
2.  `<xsl:number format="1" select="./parent::..[position()]" /><br/>`
3.  `<xsl:value-of select="count(cd/preceding-sibling::*)+1" /><br/>`

我将 2nd 解释为选择当前节点的父轴，然后告诉当前节点的父级位置。为什么它不起作用？这样做的正确方法是什么。

仅供参考：我希望代码打印当前标题标签处理的父 cd 标签的位置。

请有人告诉我该怎么做。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-30T09:40:12.250

```
count(../preceding-sibling::cd) + 1 
```

你可以[在这里运行它](http://www.xmlplayground.com/sJjh7F)（注意我删除了你输出的另一个数字，只是为了清楚起见）。

您是在正确的路线上，但请记住谓词仅用于过滤节点，而不是返回信息。所以：

```
../*[position()] 
```

...实际上是说“找到我有职位的父母”。它返回节点，而不是位置本身。谓词只是一个过滤器。

在任何情况下 using 都有缺陷`position()`，它只能用于返回当前上下文节点的位置，而**不是**另一个节点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-16T19:38:47.407

Utkanos 的回答很好，但我的经验是，当 xml 文档很大时，这可能会导致性能问题。

在这种情况下，您可以简单地在参数中传递父级的位置。

```
<xsl:template match="/">
<html>
  <body>  
  <xsl:apply-templates/>  
  </body>
  </html>
</xsl:template>

<xsl:template match="cd">
  <p>
    <xsl:number format="1\. "/><br/>
    <xsl:apply-templates select="title">  
        <xsl:with-param name="parent_position" select="position()"/> <!-- Send here -->
    </xsl:apply-templates>
    <xsl:apply-templates select="artist"/>
  </p>
</xsl:template>

<xsl:template match="title">
  <xsl:param name="parent_position"/> <!-- Receive here -->
  <xsl:number format="1" select="$parent_position"/><br/>
  Title: <span style="color:#ff0000">
  <xsl:value-of select="."/></span>
  <br />
</xsl:template> 
```

结果：

```
<html xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><body>
  <p>1\. <br>1<br>
  Title: <span style="color:#ff0000">Empire Burlesque</span><br>Bob Dylan</p>
  <p>2\. <br>1<br>
  Title: <span style="color:#ff0000">Hide your heart</span><br>Bonnie Tyler</p>
</body></html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T15:57:48.960

> ```
>  <xsl:number format="1" select="????" /> 
> ```
> 
> 我应该在 ???? 的地方写什么 获取文档中父 cd 标签的位置。

**首先，上面的 XSLT 指令在语法上是非法的——该[`<xsl:number>`](http://www.w3.org/TR/1999/REC-xslt-19991116#number)指令没有（不能）有一个`select`属性**。

**使用**：

```
 <xsl:number format="1" count="cd" /> 
```

# cassandra - cassandra中的TimeUUID

> ID：11273048
> 
> 赞同：0
> 
> 时间：2012-06-30T09:29:24.537
> 
> 标签：cassandra, timeuuid

当我们使用命令时

```
set <cloumn-family-name>[timeuuid()][utf8(name)] = utf8(value); 
```

它给了我这个错误

> 找不到附加程序请正确初始化系统 log4j 系统。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T09:53:35.143

错误/消息与 TimeUUID 无关。似乎 cassandra 使用 Log4j 作为其日志库，它需要一个 log4j.properties 文件来配置将记录哪些消息等。只需将一个简单的 log4j.properties 文件放在正确的位置，您可能会看到 cassandra 打印的实际错误/消息.

# .net - 仅使用 Windows 程序集的 Monodevelop

> ID：11273050
> 
> 赞同：1
> 
> 时间：2012-06-30T09:29:43.660
> 
> 标签：.net, monodevelop

我试图在 Windows 上使用[MonoDevelop](http://monodevelop.com/FAQ)开发需要使用 Excel.Interop 的 C# 应用程序。

但是，MonoDevelop 似乎无法访问仅驻留在 Windows GAC 中的程序集：

![缺少参考](../Images/ff57158ce637f6b618dcbeac3d645ba6.png)

有什么方法可以在 Windows 上使用 MonoDevelop 来开发特定于 Windows 的程序集吗？

是的，我知道[SharpDevelop](http://www.icsharpcode.net/OpenSource/SD/)和 C# Express，但是两者都缺少对我来说非常重要的 VI 键绑定。

**编辑**：扩展错误的屏幕截图：

![在此处输入图像描述](../Images/802c7cfd3015f93a3c0e12883927ad96.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T00:08:24.157

MonoDevelop（和 Visual Studio）不允许从 GAC 引用程序集。在构建时，程序集从以下位置解析：

1.  构架
2.  程序集文件夹（针对 .NET 工具链时）
3.  pkg-config（针对 Mono 工具链时）

因此，问题取决于您是针对 Mono 还是 .NET - 在 Windows 上，MD 可以针对任何一个。在简单的情况下，它可能是 .NET - 如果您没有安装 Mono，那么它只会针对 .NET，并且不会显示选项。而且 Mono 没有 WPF (Presentation*.dll)，所以无论如何你都必须使用 .NET。所以我只谈.NET。

这适用于 Microsoft.Office.Interop.Excel.dll。它可能已经在程序集文件夹中注册，而 MonoDevelop 根本没有找到它——MS 偶尔会添加新的程序集文件夹注册表项，所以也许我们还没有将它们添加到 MD 中——或者它只是注册到程序集文件夹中如果您安装 Visual Studio Tools for Office。您可以很容易地注册它（请参阅[http://msdn.microsoft.com/en-us/library/wkze6zky(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/wkze6zky(v=vs.110).aspx)）或者您可以通过路径而不是名称来引用它。如果您认为它已注册但 MD 没有收到，请提交错误。

PresentationCore.dll 比较复杂，因为它是一个框架程序集。MonoDevelop 有一个内部程序集名称列表，它知道每个框架中的程序集，并且知道在哪里寻找 .NET。我们通常会在其中寻找 4.0 框架程序集，`C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0`但我认为只有在您安装了 VS（包括 Express）或 .NET SDK 时它们才会出现。我们确实有一个后备，`C:\Windows\Microsoft.NET\Framework\v4.0.30319`但它看起来对 PresentationCore.dll 不起作用，因为 MS 似乎已将它放在`WPF`子目录中。我已经在 MD master 中修复了这个问题，但是要等一段时间才能发布。现在，我建议安装参考程序集。

# php - php调整宽度修复

> ID：11273051
> 
> 赞同：1
> 
> 时间：2012-06-30T09:29:45.597
> 
> 标签：php, image, function, resize

我在 PHP 中有这个功能。

```
<?php
function zmensi_obrazok($max_dimension, $image_max_width, $image_max_height, $dir, $obrazok, $obrazok_tmp, $obrazok_size, $filename){

$postvars          = array(
"image"            => $obrazok,
"image_tmp"        => $obrazok_tmp,
"image_size"       => $obrazok_size,
"image_max_width"  => $image_max_width,
"image_max_height" => $image_max_height
);
// Array of valid extensions.
$valid_exts = array("jpg","jpeg","gif","png");
// Select the extension from the file.
$ext = end(explode(".",strtolower($obrazok)));
// Check not larger than 175kb.
if($postvars["image_size"] <= 256000){
// Check is valid extension.
if(in_array($ext,$valid_exts)){
if($ext == "jpg" || $ext == "jpeg"){
$image = imagecreatefromjpeg($postvars["image_tmp"]);
}
else if($ext == "gif"){
$image = imagecreatefromgif($postvars["image_tmp"]);
}
else if($ext == "png"){
$image = imagecreatefrompng($postvars["image_tmp"]);
}
list($width,$height) = getimagesize($postvars["image_tmp"]);

if($postvars["image_max_width"] > $postvars["image_max_height"]){
    if($postvars["image_max_width"] > $max_dimension){
            $newwidth = $max_dimension;
        } 
        else 
        {
            $newwidth = $postvars["image_max_width"];
        }

}

else
{
    if($postvars["image_max_height"] > $max_dimension)
    {
        $newheight = $max_dimension;
    }
        else
        {
            $newheight = $postvars["image_max_height"];
        }

}

$tmp = imagecreatetruecolor($newwidth,$newheight);
imagecopyresampled($tmp,$image,0,0,0,0,$newwidth,$newheight,$width,$height);

imagejpeg($tmp,$filename,100);
return "fix";
imagedestroy($image);
imagedestroy($tmp);
}

}

}

?> 
```

现在，如果我想使用它，并且我上传了例如 500x300px 的图像，并且我已将最大尺寸设置为 205x205px，它不想调整大小的图片比例。它制作类似 375x205 的东西（高度还可以）。有人可以帮助解决它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T09:37:17.933

只需缩放图像两次，一次匹配宽度，一次匹配高度。要节省处理时间，请先进行缩放，然后调整大小：

```
$max_w = 205;
$max_h = 205;

$img_w = ...;
$img_h = ...;

if ($img_w > $max_w) {
    $img_h = $img_h * $max_w / $img_w;
    $img_w = $max_w;
}

if ($img_h > $max_h) {
    $img_w = $img_w * $max_h / $img_h;
    $img_h = $max_h;
}

// $img_w and $img_h should now have your scaled down image complying with both restrictions. 
```

# database - 外键会影响性能/存储效率吗？

> ID：11273052
> 
> 赞同：3
> 
> 时间：2012-06-30T09:29:45.900
> 
> 标签：database, optimization, foreign-keys, query-optimization, database-performance

外键只是为了确保数据库的一致性，还是它们也会影响性能（例如执行连接）和/或存储效率（例如，仅使用外表索引等）？

如果您一般回答或者您考虑特定的数据库解决方案（MySQL、PostgresQL、Oracle 等），请务必提及。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T09:36:03.860

外键本身就是关于数据一致性的——仅此而已。

当然，插入和更新对性能有影响，因为需要检查值，但是这对性能的影响是由其他因素决定的。

通常，您应该在主键列和外键列上有索引——这是确保连接使用索引并且速度快的最佳方法（并且索引确实会影响存储——毕竟它们需要存储在某个地方）。

几乎所有现代 RDBMS 都是如此。

# java - Class Literal vs Class.forname + Java 泛型

> ID：11273057
> 
> 赞同：1
> 
> 时间：2012-06-30T09:30:59.080
> 
> 标签：java, generics, rtti

在下面的代码片段中，当我尝试将 Class>B> 转换为 Class>A> 时，为什么 1 不会产生运行时异常？

```
package example;

Class A {
   public A() {
   }
}

Class B extends A {
   public B() {
   }
}

public static void main() {

    Class<A> c = null;

    //1\. Does not produce exception at run-time even though I cast Class<B> to Class<A>
    try {
        c = (Class<A>) Class.forName("example.B");
    } catch (ClassNotFoundException e) {
    }

    //2\. Compile time error: Cannot Cast Class<B> to Class<A>
    c = (Class<A>) B.class; //Error
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T09:42:37.193

`Class.forName()`return `Class<?>`，大致相当于`Class`（没有泛型）。

如果您在中间添加另一个非泛型转换，第二个版本也将编译：

```
c = (Class<A>)(Class) B.class; // compiles 
```

但是，这不可能是正确的，因此编译器会将您从这个错误中拯救出来。在第一个版本中，它不能这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T09:36:12.727

因为泛型仅由编译器而不是 java 虚拟机强制执行。您可以认为 , 在编译期间由编译器清除。Java 泛型以这种方式实现是为了向后兼容早期的 Java 版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T09:42:26.453

Java 泛型是通过擦除实现的，这意味着泛型在编译时检查，但在运行时不可用。这允许具有泛型的 java 代码向后兼容 1.5 之前的代码。

# java - 执行作业时的 Hadoop 错误

> ID：11273060
> 
> 赞同：0
> 
> 时间：2012-06-30T09:31:33.720
> 
> 标签：java, exception, hadoop

我尝试运行一个示例并获得以下输出：

```
12/06/30 12:27:39 INFO jvm.JvmMetrics: Initializing JVM Metrics with processName=JobTracker, sessionId=
12/06/30 12:27:39 INFO input.FileInputFormat: Total input paths to process : 7
12/06/30 12:27:40 INFO mapred.JobClient: Running job: job_local_0001
12/06/30 12:27:40 INFO input.FileInputFormat: Total input paths to process : 7
12/06/30 12:27:40 INFO mapred.MapTask: io.sort.mb = 100
12/06/30 12:27:41 INFO mapred.MapTask: data buffer = 79691776/99614720
12/06/30 12:27:41 INFO mapred.MapTask: record buffer = 262144/327680
12/06/30 12:27:41 INFO mapred.JobClient:  map 0% reduce 0%
12/06/30 12:27:41 INFO mapred.MapTask: Starting flush of map output
12/06/30 12:27:41 WARN mapred.LocalJobRunner: job_local_0001
java.io.IOException: Expecting a line not the end of stream
    at org.apache.hadoop.fs.DF.parseExecResult(DF.java:109)
    at org.apache.hadoop.util.Shell.runCommand(Shell.java:179)
    at org.apache.hadoop.util.Shell.run(Shell.java:134)
    at org.apache.hadoop.fs.DF.getAvailable(DF.java:73)
    at org.apache.hadoop.fs.LocalDirAllocator$AllocatorPerContext.getLocalPathForWrite(LocalDirAllocator.java:329)
    at org.apache.hadoop.fs.LocalDirAllocator.getLocalPathForWrite(LocalDirAllocator.java:124)
    at org.apache.hadoop.mapred.MapOutputFile.getSpillFileForWrite(MapOutputFile.java:107)
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.sortAndSpill(MapTask.java:1221)
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.flush(MapTask.java:1129)
    at org.apache.hadoop.mapred.MapTask$NewOutputCollector.close(MapTask.java:549)
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:623)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:305)
    at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:177)
12/06/30 12:27:42 INFO mapred.JobClient: Job complete: job_local_0001
12/06/30 12:27:42 INFO mapred.JobClient: Counters: 0 
```

有谁知道我为什么会收到这个错误？Hadoop 版本是 0.20.2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T07:52:45.673

显然，您也需要在`df`拥有 eclipse 的机器上使用该命令。就我而言，我有 2 个 ubuntu 虚拟机（充当主机和从机），并且正在使用 windows 中的 hadoop 插件运行 eclipse。安装 cygwin 并将其添加到路径后，它不再给出该错误。

# javascript - 根据文本行调整文本区域的大小

> ID：11273062
> 
> 赞同：1
> 
> 时间：2012-06-30T09:31:40.723
> 
> 标签：javascript, html

```
<script type="text/javascript">
      function AutoGrowTextArea(textField) {
        if (textField.clientHeight < textField.scrollHeight) {
            textField.style.height = textField.scrollHeight + "px";
            if (textField.clientHeight < textField.scrollHeight) {
                textField.style.height =
    (textField.scrollHeight * 2 - textField.clientHeight) + "px";
            }
        }
    }
    </script> 
```

```
<form id="myForm" action="" method="post" runat="server">
  <input type = "text" onkeyup="AutoGrowTextArea(this)"  style="width:700px; height:20px" />
   </form>
       </body> 
```

嘿伙计们，我有一个脚本，我可以用它来增加文本区域的大小，一次一行，就像 facebook 的评论框一样。但问题是：我想将它应用在文本框中，而不是文本区域，我也尝试过，但是发生的情况是，每次我按下一个键时，整个文本区域都会增加它的高度......这绝对是我不需要的行为......（所有语义都是正确的，可能在粘贴时丢失了一些......）所以有人可以帮我解决这个问题吗？问候...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T09:33:21.203

将“height”替换为“width”，甚至在“scrollHeight”等。

# java - 在哪里放置文件以从java中的包下的类中读取？

> ID：11273064
> 
> 赞同：1
> 
> 时间：2012-06-30T09:32:29.597
> 
> 标签：java, file-io, file-read, filepath

我有一个属性文件包含的文件名只说`file=fileName.dat`. 我已将属性文件放在类路径下，并且可以从`mainClass`. 读取文件名后，我将文件名（只是名称而不是路径）传递给包下的另一个类，说`pack.myClass`要读取该文件。但问题是`pack.myClass`无法正确获取文件路径。我已将文件`fileName.dat`放在包内外，`pack`但无法正常工作。

任何人都可以建议我将文件放在哪里，`fileName.dat`以便我可以正确阅读它并且整个应用程序也可以移植。

谢谢！

我用来读取配置文件并获取文件名的代码：

```
Properties prop = new Properties();
InputStream in = mainClass.class.getResourceAsStream("config.properties");
prop.load(in);
in.close();

myClass mc = new myClass();
mc.readTheFile(prop.getProperty("file"));
/*until this code is working good*/ 
```

然后在我正在做`myClass`的包下：`pack`

```
public void readTheFile(String filename) throws IOException {
    FileReader fileReader = new FileReader(filename); /*this couldn't get the file whether i'm putting the file inside or outside the package folder */
    /*after reading the file I've to do the BufferReader for further operation*/
    BufferedReader bufferedReader = new BufferedReader(fileReader); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T09:45:47.110

我假设您正在尝试使用类的 getResource 方法读取属性文件。如果将属性文件放在类路径的根目录上，则应在文件名前加上“/”以指示类路径的根目录，例如 getResource("/file.dat")。如果属性文件与调用 getResource 方法的类位于同一文件夹下，则不应使用“/”前缀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T09:55:00.823

当您使用相对文件名时，例如`fileName.dat`，您要求在*当前目录*中使用此名称的文件。当前目录与包无关。它是启动 JVM 的目录。

因此，如果您在`c:\foo\bar`启动应用程序时位于目录中（使用`java -cp ... pack.MyClass`），它将查找文件`c:\foo\bar\fileName.dat`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T10:29:13.217

尝试..

```
myClass mc = new myClass();
InputStream in = mc.getClass().getResourceAsStream("/pack/config.properties"); 
```

..或者简单地说

```
InputStream in = mc.getClass().getResourceAsStream("config.properties"); 
```

..for 最后一行，如果在`main`中`myClass` 可用的类加载器`main()`通常是引导类加载器，而不是用于应用程序资源的类加载器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T09:46:07.373

大多数情况下，最好`"fileName.dat"`在文件夹中查找某个`"user.home"`位置，这是一个[系统属性](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)。首先从中创建一个`File`路径`"user.home"`，然后尝试在那里找到该文件。这有点猜测，因为您没有提供应用程序的确切用户，但这将是最常见的地方。

您当前正在读取当前文件夹，该文件夹由

```
String currentDir = new File(".").getAbsolutePath(); 
```

或者

```
System.getProperty("user.dir") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-30T09:47:04.363

Class.getResource 将在您的包目录中查找指定名称的文件。

[JavaDocs 在这里](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getResource%28java.lang.String%29)

或者 getResourceAsStream 有时更方便，因为您可能想读取资源的内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-30T11:44:34.213

要读取文件，即使是从 jar 存档中：

```
readTheFile(String package, String filename) throws MalformedURLException, IOException
{
    String filepath = package+"/"+filename;  
    // like "pack/fileName.dat" or "fileName.dat"

    String s = (new SourceBase()).getSourceBase() + filepath;
    URL url = new URL(s);
    InputStream ins = url.openStream();
    BufferedReader rdr = new BufferedReader(new InputStreamReader(ins, "utf8"));
    do {
        s = rdr.readLine();
        if(s!= null) System.out.println(s);
    }
    while(s!=null);
    rdr.close(); 
 } 
```

和

```
class SourceBase
{
    public String getSourceBase()
    {
    String cn = this.getClass().getName().replace('.', '/') + ".class";
    // like "packagex/SourceBase.class"

    String s = this.getClass().getResource('/' + cn).toExternalForm();
    // like "file:/javadir/Projects/projectX/build/classes/packagex/SourceBase.class"
    // or "jar:file:/opt/java/PROJECTS/testProject/dist/
    //                testProject.jar!/px/SourceBase.class"

    return s.substring(0, s.lastIndexOf(cn));
    // like "file:/javadir/Projects/projectX/build/classes/"
    // or "jar:file:/opt/java/PROJECTS/testProject/dist/testProject.jar!/"
    }
} 
```

# java - 添加“万维网”。到 URL 字符串

> ID：11273065
> 
> 赞同：0
> 
> 时间：2012-06-30T09:32:29.573
> 
> 标签：java, android

我需要检查一个 URL 字符串，如果 URL 不包含“www.”，请将其插入正确的位置。

例如，左侧的字符串应按如下所示进行转换：

```
www.myweb.com        => www.myweb.com
myweb.com            => www.myweb.com
http://myweb.com     => http://www.myweb.com or www.myweb.com
http://www.myweb.com => http://www.myweb.com or www.myweb.com 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T10:27:47.470

我不擅长正则表达式，但我*相信* `^(http://)?+((.{0,2}[^w])|(.{3}[^.]))`可以完成你想要的：

```
String s1 = "www.myweb.com";
String s2 = "myweb.com";
String s3 = "http://myweb.com";
String s4 = "http://www.myweb.com";

String pattern = "^(http://)?+((.{0,2}[^w])|(.{3}[^.]))";
String www = "$1www.$2";

System.out.println(s1 + " -> " + s1.replaceFirst(pattern, www));
System.out.println(s2 + " -> " + s2.replaceFirst(pattern, www));
System.out.println(s3 + " -> " + s3.replaceFirst(pattern, www));
System.out.println(s4 + " -> " + s4.replaceFirst(pattern, www)); 
```

产生这个输出：

```
www.myweb.com -> www.myweb.com
myweb.com -> www.myweb.com
http://myweb.com -> http://www.myweb.com
http://www.myweb.com -> http://www.myweb.com 
```

由于我不认为自己擅长正则表达式，因此我不会说这是万无一失的，但它适用于您的示例字符串以及我测试过的一些更难的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T09:36:11.660

尝试：

```
 if(!str.contains("www")){
  if(str.contains("://"))
    str=str.replace("://","://www.");
  else
    str="www."+str;
} 
```

# php - 以自定义格式获取数组中最近 7 天的日期

> ID：11273067
> 
> 赞同：4
> 
> 时间：2012-06-30T09:32:42.240
> 
> 标签：php, datetime

如何以自定义格式 (dd/mm) 获取过去 7 天的确切日期，包括今天？

在结果数组中，我想得到类似的东西（日期只是示例）：

```
1=>11/2 (today minus 7 days)
2=>12/2 (today minus 6 days)
...
7=>17/2 (today) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-30T10:07:04.223

```
function getLastNDays($days, $format = 'd/m'){
    $m = date("m"); $de= date("d"); $y= date("Y");
    $dateArray = array();
    for($i=0; $i<=$days-1; $i++){
        $dateArray[] = '"' . date($format, mktime(0,0,0,$m,($de-$i),$y)) . '"'; 
    }
    return array_reverse($dateArray);
} 
```

用法：

```
$arr = getLastNDays(7); 
```

或者

```
$arr = getLastNDays(7, 'd/m/Y'); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-30T10:12:36.810

您可以结合 2 个函数 date() 和 strtotime()。例如：

```
echo date("Y-m-d", strtotime("7 days ago")); 
```

尝试：

```
for ($i=0; $i<7; $i++)
{
    echo date("d/m", strtotime($i." days ago")).'<br />';
} 
```

您应该能够弄清楚如何以正确的顺序将它们放入数组中:)

希望有帮助

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-30T09:42:31.930

[time()](http://de.php.net/manual/en/function.time.php)为您提供当前时间戳。
`86400`秒是一天（60 * 60 * 24）。
[date()](http://de.php.net/manual/en/function.date.php)为您提供自定义日期字符串。

```
for ($iDay = 6; $iDay >= 0; $iDay--) {
    $aDays[7 - $iDay] = date('d/m', time() - $iDay * 86400);
} 
```

另请参阅[此示例](http://ideone.com/POBCD)。

如果您不想要前导零，请`'j/n'`用作[自定义日期格式参数](http://de.php.net/manual/en/function.date.php#refsect1-function.date-parameters)：

```
for ($iDay = 6; $iDay >= 0; $iDay--) {
    $aDays[7 - $iDay] = date('j/n', time() - $iDay * 86400);
} 
```

另请参阅此[更新示例](http://ideone.com/a6Yzh)。

=== 更新 ===

@Dagon 使用[strtotime()](http://de3.php.net/strtotime)获取时间戳的想法很棒。这是更好的解决方案：

```
for ($iDay = 6; $iDay >= 0; $iDay--) {
    $aDays[7 - $iDay] = date('j/n', strtotime("-" . $iDay . " day"));
} 
```

还有[一个例子](http://ideone.com/Le2a2)。

# ruby-on-rails - Rails：自定义嵌套控制器操作

> ID：11273069
> 
> 赞同：5
> 
> 时间：2012-06-30T09:32:56.767
> 
> 标签：ruby-on-rails, custom-action, nested-routes, controller-action

我想设置一个自定义嵌套控制器操作，但我无法弄清楚路由。

我不断收到以下错误

```
No route matches [GET] "/assets" 
```

路线.rb

```
resources :companies do
  resources :requests do
    match :accept
  end
end 
```

index.html.rb

```
<% @requests.each do |request| %>
  <ul class="users">
    <li>
    <%= full_name(request.profile) %> 
    <%= request.status %> 
    <%= link_to "Accept",
            :controller => "requests", :action => "accept",
            :id => request.id %>
    </li>
  </ul>
<% end %> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-30T10:34:18.380

There are a couple of problems: routing to the `accept` action and building a URL to a nested resource.

### Defining custom actions

You can add custom actions to your RESTful resources using this syntax:

```
resources :requests do
  get 'accept', :on => :member
end 
```

This will give you a route that looks like this:

```
requests/:id/accept 
```

And you can generate paths in your views using:

```
accept_request_path(a_request) 
```

The `:on => :member` part indicates that you're routing to a new action on each individual request, rather than the collection of all requests. If you used `:on => :collection` the route would be `requests/accept`

### Nesting resources

When you nest resources:

```
resources :companies do
  resources :requests do
    get 'accept', :on => :member
  end
end 
```

You get routes that look like this, note that because the requests is nested inside companies the route includes both a `company_id` and an `id`:

```
companies/:company_id/requests/:id/accept 
```

And helpers like this:

```
accept_company_request_path(a_company, a_request) 
```

You could do this long-hand, as you're currently trying to do, with something like:

```
<%= link_to "Accept",
        :controller => "requests", :action => "accept",
        :id => request.id, :company_id => request.company.id %> 
```

But it's easier to use the helpers:

```
<%= link_to "Accept", accept_company_request_path(request.company, request) %> 
```

### Appropriate verbs

Accept sounds a lot like something that updates your database in some way, and if that's the case you should consider using a `PUT` request rather than a `GET` request.

The HTTP/1.1 spec says that *the convention has been established that the GET and HEAD methods SHOULD NOT have the significance of taking an action other than retrieval* ([RFC2616, section 9](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)) which has the real-world implication that non-human web clients — search engine indexers, browser extensions, etc. — are allowed to follow links (which make `GET` requests) but not allowed to submit forms that make other types of requests.

If you do switch to using a `PUT` request then the [`button_to` helper](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to) will come in handy. As with `link_to` you can pass the controller, action, method, and all the parameters required by the route to `button_to`:

```
<%= button_to 'Accept',
      {:controller => :requests, :action => :accept,
       :company_id => request.company, :id => request},
      :method => :put %> 
```

Or you can use the helpers to generate the path which is much easier:

```
<%= button_to 'Accept',
      accept_company_request_path(request.company, request),
      :method => :put %> 
```

### More documentation

*   [Adding more RESTful actions](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)
*   [Nested resources](http://guides.rubyonrails.org/routing.html#nested-resources)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T09:53:20.417

在您的路线文件中：

```
match 'request/accept/:id' => 'requests#accept', :as => :accept 
```

并且在视野中

```
link_to "Accept", accept_path(request) 
```

# spring - Spring自动装配不适用于抽象类

> ID：11273070
> 
> 赞同：4
> 
> 时间：2012-06-30T09:33:13.930
> 
> 标签：spring, abstract-class, autowired

我有一个项目，我有一个接口，一个实现相同接口的抽象类，然后是一组实现这个接口并扩展抽象类的具体类。

```
public interface Invoice
{
   void process();
}

@component
public abstract class AbstractInvoice(){

    @Resource
    protected Writer writer;

    protected validateInvoice(){
        //some implementation
    }
}

@Component
public Class TypeAInvoice() extends AbstractInvoice implements Invoice{

    @Override
    public void process(){
        //... some code
        writer.write();
    }
}

public Interface Writer(){
    public void write();
}

@Component
public class CDWriter implements Writer{
    @Override 
    public void write() { /* implementation.....*/}
} 
```

Spring 文件对包进行了组件扫描。

```
<context:annotation-config>
<context:component-scan base-package="com.xyz" /> 
```

我正在使用工厂获取`TypeAInvoice`发票实例现在调用`invoice.process()`获取 NPE`write.write()`

我不确定我在这里错过了什么。我试图查看组件扫描和范围，但在概念上找不到任何错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T09:47:08.703

> 我正在使用工厂获取 TypeAInvoice 发票的实例

根据您的工厂所做的事情，这可能是问题所在。如果工厂创建一个新的`TypeAInvoice`，Spring 接线不适用。您必须查询 Bean 的 Spring 上下文。一种方法（虽然不是很漂亮）是使用`ContextLoader`：

```
return ContextLoader.getCurrentWebApplicationContext().getBean(TypeAInvoice.class) 
```

我会说静态工厂和 Spring 不能很好地结合在一起。Spring 代表控制反转模式，而工厂代表服务定位器模式。我建议你摆脱你的工厂并自动装配你的 Spring Bean。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T09:48:28.467

一切都很好，除了您使用工厂获取 TypeAInvoice 之外。如果你像 TypeAInvoice typer = new TypeAInvoice() 那样创建它，那么 spring 对此一无所知，Writer 不是自动装配的，你会得到 NullPointerException。您应该从 spring 应用程序上下文中获取 bean。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-03-09T23:11:41.817

就我而言，在 Spring4 应用程序中，我必须使用经典的抽象工厂模式（我的想法来自 - [http://java-design-patterns.com/patterns/abstract-factory/](http://java-design-patterns.com/patterns/abstract-factory/)）来创建每个实例每次都有操作要做。所以我的代码设计如下：

```
public abstract class EO {
    @Autowired
    protected SmsNotificationService smsNotificationService;
    @Autowired
    protected SendEmailService sendEmailService;
    ...
    protected abstract void executeOperation(GenericMessage gMessage);
}

public final class OperationsExecutor {
    public enum OperationsType {
        ENROLL, CAMPAIGN
    }

    private OperationsExecutor() {
    }

    public static Object delegateOperation(OperationsType type, Object obj) 
    {
        switch(type) {
            case ENROLL:
                if (obj == null) {
                    return new EnrollOperation();
                }
                return EnrollOperation.validateRequestParams(obj);
            case CAMPAIGN:
                if (obj == null) {
                    return new CampaignOperation();
                }
                return CampaignOperation.validateRequestParams(obj);
            default:
                throw new IllegalArgumentException("OperationsType not supported.");
        }
    }
}

@Configurable(dependencyCheck = true)
public class CampaignOperation extends EO {
    @Override
    public void executeOperation(GenericMessage genericMessage) {
        LOGGER.info("This is CAMPAIGN Operation: " + genericMessage);
    }
} 
```

最初为了在抽象类中注入依赖项，我尝试了所有原型注释，如@Component、@Service 等，但即使 Spring 上下文文件对整个包都有 ComponentScanning，但不知何故，在创建像 CampaignOperation 这样的子类实例时，超级抽象类 EO 是由于spring无法识别和注入其依赖项，因此其属性为null。经过反复试验，我使用了此`**@Configurable(dependencyCheck = true)**`注释，最后Spring能够注入依赖项，并且我能够使用子类中的属性而不会弄乱它们很多属性。

```
<context:annotation-config />
<context:component-scan base-package="com.xyz" /> 
```

我还尝试了这些其他参考以找到解决方案：

1.  [http://www.captaindebug.com/2011/06/implementing-springs-factorybean.html#.WqF5pJPwaAN](http://www.captaindebug.com/2011/06/implementing-springs-factorybean.html#.WqF5pJPwaAN)
2.  [http://forum.spring.io/forum/spring-projects/container/46815-problem-with-autowired-in-abstract-class](http://forum.spring.io/forum/spring-projects/container/46815-problem-with-autowired-in-abstract-class)
3.  [https://github.com/cavallefano/Abstract-Factory-Pattern-Spring-Annotation](https://github.com/cavallefano/Abstract-Factory-Pattern-Spring-Annotation)
4.  [http://www.jcombat.com/spring/factory-implementation-using-servicelocatorfactorybean-in-spring](http://www.jcombat.com/spring/factory-implementation-using-servicelocatorfactorybean-in-spring)
5.  [https://www.madbit.org/blog/programming/1074/1074/#sthash.XEJXdIR5.dpbs](https://www.madbit.org/blog/programming/1074/1074/#sthash.XEJXdIR5.dpbs)
6.  [Using abstract factory with Spring framework](https://stackoverflow.com/questions/4042659/using-abstract-factory-with-spring-framework)
7.  [Spring and Abstract class - injecting properties in abstract classes](https://stackoverflow.com/questions/7184556/spring-and-abstract-class-injecting-properties-in-abstract-classes)
8.  [Inject spring dependency in abstract super class](https://stackoverflow.com/questions/4238987/inject-spring-dependency-in-abstract-super-class)
9.  [Spring autowire dependency defined in an abstract class](https://stackoverflow.com/questions/19714586/spring-autowire-dependency-defined-in-an-abstract-class)
    10.  [Spring can you autowire inside an abstract class?](https://stackoverflow.com/questions/19965829/spring-can-you-autowire-inside-an-abstract-class/19966124)

Please try using `**@Configurable(dependencyCheck = true)**` and update this post, I might try helping you if you face any problems.

**So precisely my point here is you don't need to get a bean from spring context all the time.**

# jar - 无法将 .jar 文件作为窗口服务启动

> ID：11273073
> 
> 赞同：0
> 
> 时间：2012-06-30T09:33:40.093
> 
> 标签：jar, windows-services

我有一个 jar 文件，其中包含一个在控制台中显示“Hello”消息的非常简单的程序。我想将此 jar 文件作为 Windows 服务运行。该服务启动时没有任何问题（我使用的是 Tanuki 的 Java Service Wrapper），但是它根本不会启动该服务。

以下是我面临的错误

> 包装 | Hello Sample Application 服务已启动，但无法启动。包装 | 请查看日志文件更多信息：C:\wrapper-windows-x86-32 -3.5.14\logs\wrapper.log 按任意键继续。. .**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T14:48:44.973

您需要修改程序以使其继续运行。如果不是，服务包装器将终止，windows 将看到一个应该正在运行但没有运行的服务。
尝试类似：

```
import java.io.*;
public class Hello {
  public static void main(String[] argv) {
    try {
      while(true){
        System.out.println("Hello Service World.");

        // Sleep - Otherwise we would eat up all CPU
        Thread.sleep(1000);
      }
    } catch(InterruptedException e) {
      e.printStacktrace();
    }
  }
} 
```

或者启动另一个线程并执行您的服务的工作。;)

# c++ - C++ 表达式必须是可修改的值

> ID：11273076
> 
> 赞同：0
> 
> 时间：2012-06-30T09:35:52.697
> 
> 标签：c++, struct, directx, expression, structure

```
struct PLANE {FLOAT X, Y, Z; D3DXVECTOR3 Normal; FLOAT U, V;};

class PlaneStruct
{
public:PLANE PlaneVertices[4];
public:DWORD PlaneIndices;

void CreatePlane(float size)
{
    // create vertices to represent the corners of the cube
    PlaneVertices = 
    {
        {1.0f * size, 0.0f, 1.0f * size, D3DXVECTOR3(0.0f, 0.0f, 1.0f), 0.0f, 0.0f},    // side 1
        {-1.0f * size, -0.0f, 1.0f * size, D3DXVECTOR3(0.0f, 0.0f, 1.0f), 0.0f, 1.0f},
        {-1.0f * size, -0.0f, -1.0f * size, D3DXVECTOR3(0.0f, 0.0f, 1.0f), 1.0f, 0.0f},
        {1.0f * size, -0.0f, -1.0f * size, D3DXVECTOR3(0.0f, 0.0f, 1.0f), 1.0f, 1.0f},
    };

    // create the index buffer out of DWORDs
    DWORD PlaneIndices[] =
    {
        0, 2, 1,    // side 1
        0, 3, 2
    };
}
}; 
```

这是我的“平面”结构代码，我只有一个问题，如果你看顶部，上面写着 PLANE PlaneVertices[4]; 然后在一个函数中我想定义它，所以给它特定的值，但我得到以下错误：表达式必须是一个可修改的值。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T09:40:29.493

在 C++ (2003) 初始化中，like`StructX var = { ... };`只能在定义变量时使用。在您的代码中，PlaneVertices 用于赋值表达式。那里不允许初始化语法。这是一个语法错误。

稍后，您定义了一个局部变量 PlaneIndices，该变量将在退出该方法后被丢弃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T09:42:14.677

你不能像这样为你的数组赋值`PlaneVertices`，你只能在使用 {} 符号定义它来初始化它时使用它。尝试使用 for 循环将每个元素分配给数组的每个单独元素

编辑：响应您的评论，创建 PLANE 结构的实例并为其分配您希望它具有的值。然后将其分配给`PlaneVertices`数组中的第一个索引，使用

```
 PlaneVertices[0] = // instance of PLANE struct you have just created 
```

然后对数组中所需的剩余 3 个 PLANE 实例重复此操作，并将`PlaneVertices`. 为了充分说明，我将使用您提供的数据为您做第一个

```
 PLANE plane_object;
    plane_object.X = 1.0*size;
    plane_object.Y = 0.0; 
    plane_object.Z = 1.0*size; 
    plane_object.Normal = D3DXVECTOR3(0.0f, 0.0f, 1.0f);
    plane_object.U = 0.0;
    plane_object.V = 0.0;
    PlaneVertices[0] = plane_object; 
```

然后，您需要为要添加的每个 PLANE 重复此操作。也不要考虑有关您的 PlaneIndices 问题的其他答案。

# python - 当程序解析 DNS 时，python 退出处理程序无法正常工作

> ID：11273077
> 
> 赞同：0
> 
> 时间：2012-06-30T09:35:56.470
> 
> 标签：python, python-3.x, dns, resolve

我编写了一个程序来使用 DNSPython 库解析 SubDomain。
当程序运行并解析子域时，我编写退出处理程序来处理`ctrl``c`信号：

```
def exitHandler(signum = 0, frame = 0):
    print("Kill Process..")
    os.kill(os.getpid(), 9)
    sys.exit(0) 
```

如果用户按下`ctrl``c`程序不会立即终止，在某些情况下程序会被锁定！
我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T11:25:28.330

当您在 Python 进程上使用 Ctrl-C 时，它将结束。无需编写自己的退出处理程序，当然也无需尝试杀死自己的进程然后调用`sys.exit`. 这似乎（从字面上看）像是过度杀戮。

# python - 在 python/webapp2 中获取发布请求的引用 URL

> ID：11273085
> 
> 赞同：3
> 
> 时间：2012-06-30T09:36:34.570
> 
> 标签：python, google-app-engine, webapp2

我想获取已在请求中发送到服务器的引荐来源网址。我在 appengine 上使用 webapp2 框架。

当我做：

```
def post(self, slug):
    print self.request 
```

我得到以下输出：

```
OST /first/person/ HTTP/1.0 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 Accept-Language: en-US,en;q=0.8 Cache-Control: max-age=0 Connection: keep-alive Content-Length: 43 Content-Type: application/x-www-form-urlencoded Content_Length: 43 Content_Type: application/x-www-form-urlencoded Cookie: djdt=hide; csrftoken=09f29b2bfe9f51f16581bab7fe7c6f38; sessionid=49b995d954eae8d613cedc3f4e92a796 Host: 127.0.0.1:8080 Origin: http://127.0.0.1:8080 Referer: http://127.0.0.1:8080/person/1/ 
```

清晰可见`Referer: http://127.0.0.1:8080/person/1/`

我只对推荐人感兴趣，因此我尝试了：

```
referer = self.request.headers['Referer']
            print referer 
```

这给出了输出：

```
False Status: 200 Content-Type: text/html; charset=utf-8 Content-Length: 0 Cache-Control: no-cache 
```

一种获取方法是根据请求进行字符串处理，但我相信会有更标准的东西。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-02T09:54:06.847

正如您在评论中提到的，这发生在 webapp2 中，但是如果您想将用户重定向到请求来自的位置，它可以很简单：

```
webapp2.redirect(self.request.referer) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-21T00:29:27.377

对于发布请求`self.request.referer`不起作用。这仅适用于获取请求。

您可以做的是在获取请求进入时（通常在您发布某些内容之前）将引用者保存在 cookie 中，然后在发布时访问该 cookie。

```
def get(self):
    self.response.headers.add_header('Set-Cookie', 'referer=%s; Path=/' % self.request.referer)
    # render your html
def post(self):
    # your logic here
    referer = str(self.request.cookies.get('referer'))
    self.redirect(referer) 
```

全局变量也应该起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-22T17:06:45.213

If, like me, you're interested in the original referrer but are deeper in the code and don't have direct access to the request, querying the env seems to work:

```
original_referrer = os.environ.get('HTTP_REFERER')  # NOTE: spelling is correct 
```

The result, locally, is something like

```
http://0.0.0.0:8001/myendpiont/someid?a=true 
```

# ios - UITableView 接收参数

> ID：11273089
> 
> 赞同：1
> 
> 时间：2012-06-30T09:37:29.123
> 
> 标签：ios, uitableview

UITableView(A) 如果选择这个 tableview 的一个单元格，它将推送到另一个 view(B)。如果在视图（B）中按下 BACK 按钮，它将运行这个 pushBack 函数：

```
 - (void)pushBack
    {
        [self.navigationController popViewControllerAnimated:YES];
    } 
```

我想向视图（A）发送一个参数。该参数用于确定是否需要刷新视图（A）。我应该怎么做？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T09:47:07.447

要回答您的第一个问题，为了能够在从后台返回时显示启动画面，您必须将您的应用程序定义为无法在后台运行。这是通过将 info.plist 中的“应用程序不在后台运行”标志更改为 YES 来完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T11:19:04.887

1.  这是模拟器中的一个错误。如果您想在应用返回时显示 Default.png，您有两种选择。第一个是`UIApplicationExitsOnSuspend`在`YES`你的 Info.plist 中设置。但是，这将要求您保存和加载应用程序状态，而不是让多任务为您完成工作。另一种方法是使用 Default.png in 覆盖您的应用程序`-applicationWillResignActive:`并将其删除`-applicationDidBecomeActive:`，就像 Dropbox 在启用密码锁定时所做的那样。

2.  实现一个名为的方法`-(void)willBecomeVisible:(MyParameterType *)parameter`（尽管您的参数可能不是指针）。然后在`-pushBack`弹出视图控制器之前，执行以下操作：

...

```
NSArray *viewControllers = [[self navigationController] viewControllers];  
NSUInteger count = [viewControllers count];  
if (count >= 2) { // Ensures we will not have an out of bounds exception
    UIViewController *viewController = [viewControllers objectAtIndex:count-2]; // Gets the view controller that will become visible
    if ([viewController respondsToSelector:@selector(willBecomeVisible:)]) { // In case this view controller was pushed from a different view controller  
        [(MyTableViewAController *)viewController willBecomeVisible:myParameter];  
    } else {  
        NSLog(@"View controller about to become visible does not respond to -willBecomeVisible:");  
    }  
} else {  
    NSLog(@"Not enough view controllers on the navigation stack!");  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T00:26:00.313

您应该阅读有关[Model-View-Controller](http://www.google.com/search?q=model%20view%20controller)设计模式的信息，它将对您在 iOS 开发中非常有用。

一般来说，控制器不应该直接告诉不同控制器的视图它需要刷新。`ViewControllerA`更新其观点是其责任。但是，控制器可以相互通信以通知模型中的状态更改（或者这可以通过模型本身来完成）。

在这种情况下，最简单的解决方案可能是让您`ViewControllerB`向其发送消息`ViewControllerA`- 因此您应该定义一个接口并在创建它时`ViewControllerA`传递一个 in 的引用，以便您可以在需要时调用它。例如：`ViewControllerA``ViewControllerB`

在`ViewControllerA`...

```
- (void)stateChanged
{
    // Code to handle the change and update the view if it's visible.
    // Alternatively, just set a BOOL flag here and then check it in
    // viewWillAppear so that the view-update only happen later on when
    // the view is actually about to appear.
} 
```

在您的`pushBack`方法中`ViewControllerB`...

```
- (void)pushBack
{
    [viewControllerA stateChanged];
    [self.navigationController popViewControllerAnimated:YES];
} 
```

你可以传递任何你想要的额外值`stateChanged`——这只是一个例子。一种更简洁的方法是使用委托或通过从控制器观察模型本身来做到这一点，但我认为这在您学习 MVC 以及如何最好地隔离和解耦 M、V 和 C 时更容易理解。

# c# - 如何实现接受匿名类型的 C# 扩展方法

> ID：11273091
> 
> 赞同：1
> 
> 时间：2012-06-30T09:38:24.700
> 
> 标签：c#, .net, asp.net-mvc-3, extension-methods, asp.net-mvc-4

在 ASP.NET MVC 中有很多 Helpers 接受匿名类型作为参数并生成输入。

例如：

```
@Html.Action("Action", "Controler", new {routeVal1 = 1, routeVal2 = 2}) 
```

我的问题是如何实现我自己的接受匿名类型的扩展。我应该将它作为对象引用并使用反射还是有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T09:40:28.847

您可以使用[`dynamic`](http://msdn.microsoft.com/en-us/library/dd264736.aspx)而不是`object`.

> Visual C# 2010 引入了一种新类型动态。该类型是静态类型，但动态类型的对象绕过静态类型检查。在大多数情况下，它的功能就像它具有类型对象一样。在编译时，假定类型为动态的元素支持任何操作。因此，您不必担心对象是否从 COM API、IronPython 等动态语言、HTML 文档对象模型 (DOM)、反射或程序中的其他位置获取值。但是，如果代码无效，则会在运行时捕获错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T09:55:59.713

首先，我假设您正在为 `@HTML`对象纠正扩展，您需要做的是创建方法

RouteValueDictionary 类

所以它变成了 public static mvchtmlstring Foo(string Action, string Controller, RouteValueDictionary values)

那么你在函数调用中

```
 TagBuilder tb = new TagBuilder("D");
        tb.Attributes.Add(); 
```

所以整个事情变成了

```
public static mvchtmlstring Foo(string taglabel, string url, RouteValueDictionary values)
{

            TagBuilder tb = new TagBuilder("a");
tb.Attrubutes.add("href",url);
tb.setInnerText(taglabel);
            tb.MergeAttributes(values);
return new MvcHtmlString(tb.toString());
} 
```

那么电话是

```
@Html.Foo("Bar","Http://www.stackoverflow.com",new {Id="d", class="dd"}) 
```

BTW RouteValueDictionary 从 IDictionary 继承，所以你的类也可以有一个签名。

# extjs - 如何在创建新项目或更新现有项目时从商店向服务器端发送额外的参数

> ID：11273093
> 
> 赞同：3
> 
> 时间：2012-06-30T09:39:21.933
> 
> 标签：extjs, extjs4, extjs4.1

我有一个带有一些记录的网格面板。但是这个网格面板的元素是子元素。因此，当我在网格中创建新记录或更新现有记录时，我想将额外的参数作为父 ID 发送到服务器端（父是表的一个）。我正在使用直接商店。

我知道，有远程过滤器，但似乎它们仅在读取操作时发送，而不是在创建或更新时发送。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T20:51:48.890

如果要发送额外参数，请使用代理上的 extraParams 属性

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.proxy.Server-cfg-extraParams](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.proxy.Server-cfg-extraParams)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-19T16:02:10.723

**发送 extraParams 不仅限于读取操作（创建、销毁、更新）**

我扩展了

> Ext.data.proxy.Direct

并覆盖

> 请求

它就像一个魅力。

使用 ExtJs 4.1.1

原始代码是：

```
if (operation.action == 'read') {
            // We need to pass params
            method = fn.directCfg.method;
            args = method.getArgs(params, me.paramOrder, me.paramsAsHash);
        } else {
            args.push(request.jsonData);
        } 
```

我将其更改为：

```
 method = fn.directCfg.method;
    args = method.getArgs(params, me.paramOrder, me.paramsAsHash);

    if(operation.action !== 'read'){
         args.push(request.jsonData);
    } 
```

从这里获取想法[https://www.sencha.com/forum/showthread.php?282879-ExtraParams-Store-Create](https://www.sencha.com/forum/showthread.php?282879-ExtraParams-Store-Create)

**注意**：您的商店将拥有您在创建的类的别名上放置的任何内容的代理。您的别名将类似于`alias : 'proxy.mycompanydirect'`然后您的商店将具有代理类型`'mycompanydirect'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T06:18:35.547

**额外参数**：

> Object4 将包含在每个请求中的额外参数。具有相同名称的参数的单个请求将在它们发生冲突时覆盖这些参数。

```
var store = Ext.create('Ext.data.Store', {
                  // destroy the store if the grid is destroyed
                  autoDestroy: true,
                  model: 'Plant',
                  proxy: {
                  extraParams: {name: 'dfds'}, // to send extra parmas 
                  ...
                  }
            }); 
```

# web-services - WSO2 ESB 内嵌

> ID：11273094
> 
> 赞同：0
> 
> 时间：2012-06-30T09:39:48.577
> 
> 标签：web-services, esb, wso2, endpoint

目前我们公司使用tomcat应用服务器来保存多个不同的网络服务。

结构如下所示：

```
WSO2 ESB server -> Tomcat web-service1 -> target server1 with WSDL endpoint1
                -> Tomcat web-service2 -> target server2 with WSDL endpoint2
                -> Tomcat web-service3 -> target server3 with WSDL endpoint3
                -> Tomcat web-service4 -> target server4 with WSDL endpoint4 
```

ETC...

这是合理的还是应该尽可能直接在目标服务器上运行 Web 服务？

或者 Web 服务是否应该直接在 WSO2 本身所在的同一台服务器上运行？构建架构的最佳实践是什么？

溴，米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T14:23:59.167

在我看来，一个理想的方法是让 Web 服务在多个 AppServer 实例中可用，并使其成为一个由 WSO2 负载均衡器提供的集群环境。

因此，您可能有多个 AppServer，其中每个都托管所有 Web 服务。集群可以使每个服务器通信以具有一致的状态。这为[单点故障](http://en.wikipedia.org/wiki/Single_point_of_failure)提供了解决方案，您将能够设计[高可用性](http://en.wikipedia.org/wiki/High-availability_cluster)等。使用负载均衡器，您可以根据算法（如循环）将流量定向到服务器。

[WSO2 AppServer 4.1.2 的集群配置](http://docs.wso2.org/wiki/display/AS412/Clustering+Configuration)文章提供了一些详细信息，包括基本架构图。

# javascript - JSONP 调用给了我一个错误

> ID：11273098
> 
> 赞同：0
> 
> 时间：2012-06-30T09:40:07.273
> 
> 标签：javascript, jquery

> **可能重复：**
> [带有 google geocoding api json 的](https://stackoverflow.com/questions/4681928/json-with-google-geocoding-api)
> [json Uncaught SyntaxError: Unexpected token ：](https://stackoverflow.com/questions/7936610/json-uncaught-syntaxerror-unexpected-token)

```
$.getJSON('http://maps.googleapis.com/maps/api/geocode/json?latlng=40.714224,-73.961452&sensor=true&callback=?', function(data) {
    console.log(data);
}); 
```

它给了我这个错误：`Uncaught SyntaxError: Unexpected token :`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T10:09:38.057

您正在尝试从它不支持的 google maps 获取 JSONP 响应。

试试这个，

```
<script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>

<script>  
    $(function(){   
        var geocoder = new google.maps.Geocoder();
        var latlng = new google.maps.LatLng(40.714224,-73.961452);
        geocoder.geocode(
            {latLng  : latlng }, 
            function(dataObject, statusObject) {
                console.log(dataObject);
            }
        );
    });
</script> 
```

# c# - XNA 4.0 与 C# .NET 4.5？

> ID：11273102
> 
> 赞同：11
> 
> 时间：2012-06-30T09:40:18.873
> 
> 标签：c#, .net, xna, visual-studio-2012, .net-4.5

我想使用 .NET 4.5 编写一个 XNA 游戏，这样我就可以使用 .NET 4.0 中没有的新功能之一。

有没有办法做到这一点？VS2012 在新项目列表中的任何位置都没有列出 XNA。

我也看到了这个问题： [如何在 Visual Studio 2012 上安装 XNA 游戏工作室？](https://stackoverflow.com/questions/10881005/how-to-install-xna-game-studio-on-visual-studio-2012-rc)

但我只是一个业余爱好者，我无法让 xcopy 工作（另外我不认为我有游戏工作室，只有框架）。无论如何，我想知道是否可以在 VS2010 中以 .NET 4.5 为目标。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-06T17:06:30.140

您可以更改 XNA 游戏的项目文件以使其使用 .Net 4.5。打开 .csproj 文件并更改以下行：

```
<TargetFrameworkVersion>v4.0</TargetFrameworkVersion>
<TargetFrameworkProfile>Client</TargetFrameworkProfile> 
```

读书：

```
<TargetFrameworkVersion>v4.5</TargetFrameworkVersion> 
```

在下一次编译时，二进制文件是 .Net 4.5。在我们公司，我们用它来用新的 Kinect One 创建 XNA 游戏，它运行得非常好。我们尝试了 MonoGame，虽然它很棒，但在我们的特定情况下，它并没有我们希望在 Windows 上那么稳定。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T21:59:26.517

有些人在 Win8+Metro 上成功使用了 MonoGame。

[http://monogame.codeplex.com/](http://monogame.codeplex.com/)

如另一个答案所述，Metro 本身不支持 XNA，但 MonoGame 为您提供了大部分 API。您应该能够只添加对 DLL 的引用并将您的应用程序编写为 XNA 游戏。

在回答您的其他问题时，我认为 MS 已经说过 VS2010 将不支持 .Net 4.5 开发。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-23T20:06:14.673

我已删除原始答案，因为它不再相关。

[MonoGame](http://monogame.net "单人游戏")是为在 Mono 平台上运行而构建的 XNA 的重新实现，允许您轻松移植现有的 XNA 游戏或使用旨在像 XNA 一样运行的框架构建新游戏。

微软不再支持 XNA，但支持 MonoGame，甚至从微软工作室发布基于 MonoGame 的游戏，最近（在撰写本文时）宣布即将在 Xbox One 上支持 MonoGame。

# python - Python - Flask - Redis - ResponseError：未知命令'SETEX'

> ID：11273105
> 
> 赞同：3
> 
> 时间：2012-06-30T09:40:30.607
> 
> 标签：python, session, redis, debian, flask

我正在尝试通过 Flask 使用 Redis 创建服务器端会话。Redis-server 似乎运行良好，但在 Flask 上实现[示例类](http://flask.pocoo.org/snippets/75/)时 Flask 一直给我这个错误。

```
ResponseError: unknown command 'SETEX' 
```

...因此，我的 Flask 项目无法运行。

**编辑：**

我在跑步：

*   Redis 2.4.15
*   Python 2.7.3（和 virtualenv 中的 2.6）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T12:02:50.383

看看这个[谷歌群组帖子](https://groups.google.com/group/redis-db/browse_thread/thread/2011bff122e3daad)。也许你得到了错误的版本号。

# url - 使用 2 个值重写 URL

> ID：11273107
> 
> 赞同：0
> 
> 时间：2012-06-30T09:41:07.600
> 
> 标签：url, mod-rewrite, url-rewriting

如何向此代码添加第二个值，目前我只有 $1，但我如何修改此代码以使其具有 mypage.php?name=$1&name2=$2 ？

```
RewriteEngine On
RewriteBase /
RewriteRule ^new-page-([^/]*)\.php$ mypage.php?name=$1 [L]
RewriteCond %{THE_REQUEST} ^(GET|POST|HEAD|TRACE)\ /mypage.php
RewriteCond %{QUERY_STRING} name=([^\&]*)
RewriteRule ^mypage.php$ new-page-%1.php? [R,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T12:48:28.913

括号中的正则表达式的每一部分都将存储在变量 $1、$2 等中。

例如，您可以编写：

`RewriteRule ^new-page-([^/]*)-(.*)\.php$ mypage.php?name=$1&name2=$2`[大]

其中 $1 将是第一个括号中的部分，而 $2 将是第二个括号中的部分。

如果您需要更具体的帮助，请给我们一些示例 url。

# c# - 如何在 c# 中为 ms word 文档中的多语言文本设置字体？

> ID：11273109
> 
> 赞同：3
> 
> 时间：2012-06-30T09:41:23.543
> 
> 标签：c#, ms-word

我创建了一个包含多语言内容的 .docx 文件。阿拉伯语和英语。当我为我的文本设置字体名称和大小时，我无法更改阿拉伯文本的字体。只需运行英文文本。如何更改下面的代码以在所有文本上设置字体。请帮我！

```
Word.Paragraph wordParagraph = wordDoc.Paragraphs.Add(ref objMissing);
wordParagraph.Range.Font.Name = "B Titr";
wordParagraph.Range.Font.Size = 14;
wordParagraph.Range.Text = RtbResult.Text;
wordParagraph.Range.InsertParagraphAfter(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T18:53:18.500

若要设置从右到左文本的字体，请使用 Font.NameBi 属性而不是 Font.Name。

所以，在你上面的代码中，你会写：

```
wordParagraph.Range.Font.NameBi = "B Titr"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-28T07:51:29.517

如果你想改变字体大小，它将是

```
wordParagraph.Range.Font.SizeBi = 12f 
```

# javascript - Marionette.CompositeView，如何将参数传递给 Marionette.ItemView

> ID：11273115
> 
> 赞同：21
> 
> 时间：2012-06-30T09:42:27.140
> 
> 标签：javascript, backbone.js, marionette

我想从 Marionette.ItemView 访问 app.vent。

也许一个选项可能是将参数 ( `app.vent`) 传递给`Marionette.ItemView`from `Marionette.CompositeView`。

这是我的代码：

```
// view/compositeView.js
define([
    'marionette',
    'views/item'
], function (Marionette, itemView) {
    var ListView = Marionette.CompositeView.extend({ 
        itemView: itemView
    });
}); 
```

有任何想法吗？

PS：
我无法从 itemView 访问应用程序，因为存在循环依赖问题。

```
app -> view/compositeView -> view/itemView 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-30T16:09:22.640

v0.9 添加了一个`itemOptions`可用于此的属性。它可以是对象字面量，也可以是返回对象字面量的函数。

```
 Backbone.Marionette.CompositeView.extend({
  itemView: MyItemViewType,

  itemViewOptions: {
    some: "option",
    goes: "here"
  }

}); 
```

此属性返回的所有`key: "value"`对都将提供给初始化器中的 itemview 选项

```
 Backbone.Marionette.ItemView.extend({
  initialize: function(options){
    options.some; //=> "option"
    options.goes; //=> "here"
  }
}); 
```

此外，如果您需要为构建的每个 itemView 实例运行特定代码，您可以重写该`buildItemView`方法以为集合中的每个对象提供项目视图的自定义创建。

```
 buildItemView: function(item, ItemView){

    // do custom stuff here

    var view = new ItemView({
      model: item,
      // add your own options here

    });

    // more custom code working off the view instance

    return view;
  }, 
```

有关更多信息，请参阅：

*   [v0.9 的更改日志](https://github.com/marionettejs/backbone.marionette/blob/master/changelog.md#v090-view-commit-logs)
*   [itemViewOptions 的 CollectionView 文档](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.collectionview.md#collectionviews-itemviewoptions)- 请注意 CompositeView 从 CollectionView 扩展，因此所有 CollectionView 文档对 CompositeView 也有效
*   [buildItemView 注释源代码](http://derickbailey.github.com/backbone.marionette/docs/backbone.marionette.html#section-45)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-04-01T23:40:40.163

从 Marionette v2.0.0 开始，使用**childViewOptions**代替**itemViewOptions**将参数传递给子视图：

```
var MyCompositeView = Marionette.CompositeView.extend({
  childView: MyChildView,
  childViewOptions: function(model, index) {
    return {
      vent: this.options.vent
    }
  }
});

var MyChildView = Marionette.ItemView.extend({
  initialize: function(options) {
      // var events = options.vent;
  }
});

new MyCompositeView({ vent: app.vent, collection: myCollection}); 
```

但是要处理事件，让我们使用[Marionette.Radio](https://github.com/marionettejs/backbone.radio)而不是将*app.vent*传递给视图。

# php - PHP中带有计算的简单函数

> ID：11273123
> 
> 赞同：0
> 
> 时间：2012-06-30T09:43:25.613
> 
> 标签：php

我正在用 PHP 制作非常简单的程序。先尝试添加..

但是不知道..

这是代码

```
<?php 
$a=12;
$b=10;
$c="+";

$res=$a."$c".$b;
echo $res;
?> 
```

它输出 12+10 因为它是 concate ..

$c 是任何东西。

任何想法如何做到这一点

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T09:44:26.427

$c 现在是一个字符串，而不是一个表达式，“+”不等于 +。

所以：

```
$res=$a + $b; 
```

如果你真的需要你的结构，你将不得不做一些邪恶的事情，比如使用 eval() 或者你可以这样做：

```
$a=12;
$b=10;
$operator='+';

switch($operator) {
  case '+':
    $res=$a + $b;
    break;
  case '-':
    $res=$a - $b;
    break;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T09:45:36.580

你到底想做什么？

如果您将运算符作为字符串，您可以尝试以下`switch`语句：

```
<?php 
$a=12;
$b=10;
$c="+";

switch($c) {
  case '+': 
      $res = $a + $b;
      break;

  case '-':
      $res = $a - $b;
      break;
}
var_dump($res);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T09:49:06.623

是的，PHP 也有一个`eval(uate)`功能：

```
$res = eval($a . $c . $b); 
```

确保 $a、$b 和 $c 不是来自表单输入，因为 eval 可以删除等等。

# caching - SSH 中显示的文件有误，是否需要刷新 SSH 终端会话？

> ID：11273128
> 
> 赞同：-2
> 
> 时间：2012-06-30T09:44:50.660
> 
> 标签：caching, ssh, connection, terminal

我有一个问题，我将尝试重现：

1）我使用终端获得 SSH 连接来访问远程服务器。

2）然后我运行命令`ls`列出所有内容。

3）这里的问题是：我没有看到真正的内容（文件夹和文件），我只看到了其他根本不存在的文件。

我联系了我的托管支持，他们告诉我他们运行相同的命令`ls`，他们可以看到真实的内容。然后他们告诉我这可能是我的终端的缓存问题，然后我应该清除我的会话。

**我怎样才能做到这一点？**

如果我断开连接并重新连接，问题仍然存在。

文件夹是：www

我得到的内容是：

```
www/ $ ls
bin    certs    conf  error   htdocs.off  include  logs    modules  sbin
build  cgi-bin  doc   htdocs  icons       lib      manual  private 
```

我的预期是：

```
authorize.php        index.html      MAINTAINERS.txt  sites
cgi-bin          index.php       misc         
CHANGELOG.txt        INSTALL.mysql.txt   modules          themes
COPYRIGHT.txt        INSTALL.pgsql.txt   phpinfo.php      update.php
cron.php         install.php         profiles         UPGRADE.txt
drupal-noviembre.esproj  INSTALL.sqlite.txt  README.txt       web.config
drush            INSTALL.txt         robots.txt       xmlrpc.php
includes         LICENSE.txt         scripts 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T10:06:37.257

您在您`www`的 webhoster 目录中，并且正在寻找`htdocs`您的 webserver 文档根目录所在的文件夹。

进入`htdocs`文件夹：

```
$ cd htdocs 
```

# c++ - 有 2 个较小的渲染目标还是一个较大的渲染目标更好？

> ID：11273136
> 
> 赞同：4
> 
> 时间：2012-06-30T09:45:48.337
> 
> 标签：c++, opengl, glsl

我正在编写一个延迟渲染器，并试图打包我的 gbuffer。

将漫反射和镜面反射存储在一起会更好：

```
vec4 difSpec = (diffuse.xyz, specular) // FORMAT_RGBA
gl_FragData[0] = difSpc; 
```

或使用 2 个渲染目标

```
vec3 diffuse
float specular
gl_FragData[0] = diffuse  // FORMAT_RGB
gl_FragData[1] = specular //  FORMAT_RED 
```

问题是一个会比另一个更好，为什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T12:08:07.113

您使用的缓冲区绑定/重新绑定操作越少 - 越好。

更重要的是，在您的情况下，您只需 4 个浮点数即可：RGB + Specular。所以使用完整的 128 位渲染目标并打包 (r,g,b,specular) 值。它必须更好，因为对不同内存位置的访问（rgb 为 96 位，镜面反射为 32 位以上）对缓存不利。

对于较旧的显卡，一个渲染目标也更好。无论如何，当你只使用 96 位时，你就是在浪费内存。g-buffer 总是必须紧紧地打包。

# android-layout - 搜索栏矩形角

> ID：11273137
> 
> 赞同：1
> 
> 时间：2012-06-30T09:45:50.047
> 
> 标签：android-layout

我的情况与[此](https://stackoverflow.com/questions/4922352/rectangular-edges-for-custom-seekbar)类似，但是，假定的方法对我不起作用。我尝试了不同的标签变体，但到目前为止没有任何帮助。

这是我的 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <SeekBar
        android:id="@+id/seekBar1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:max="20"
        android:progress="0"
        android:secondaryProgress="0"
        android:progressDrawable="@drawable/seekbar_progress" />
</LinearLayout> 
```

可绘制-mdpi/seekbar_progress.xml

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@android:id/background"
          android:drawable="@drawable/passive_progress">
        <shape>
            <corners android:radius="0dp" />
        </shape>
    </item>
    <item
        android:id="@android:id/progress"
        android:drawable="@drawable/active_progress">
        <clip>
           <shape>
               <corners android:radius="0dp" />
           </shape>
       </clip>
    </item>
</layer-list> 
```

![在此处输入图像描述](../Images/44807b228634b11788c8bfe53a849dc2.png)

谢谢你。

# objective-c - UIImagePicker 和 UIImage 大小

> ID：11273149
> 
> 赞同：1
> 
> 时间：2012-06-30T09:48:00.923
> 
> 标签：objective-c, ios, uiimage, uiimagepickercontroller

*我有一个 UIImagePickerViewController 并且我正在使用UIImagePickerControllerOriginalImage*将我的图像保存到我的应用程序中：

```
[self.fileManager createFileAtPath:aPath contents:UIImageJPEGRepresentation(image, 1.f) attributes:nil]; 
```

结果 ：

*   来自 Photo.app -> 2.2 Mo 的原始图像
*   来自我的应用程序的新保存图像-> JPEG 表示的 5.3 Mo 和 PNG 表示的 10.8 Mo！

所以我的问题很简单：为什么？以及如何达到 Photo.app 大小？

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T10:00:56.810

您可能知道，在 UIImageJPEGRepresentation 中传递的第二个参数定义了压缩质量（1 为最高）。因为图像被分解回基本数据然后重新压缩（jpeg是一种压缩的图像格式），结果可能会更差压缩（更大的文件），当然图像质量也不会变得更好。尝试将参数降低到 0.0 和 1.0 之间的某个值，看看何时获得文件大小的最佳匹配（对于每个处理的图像都是唯一的，因此请尝试在中间找到一个好的值）。

# c# - json.net IEnumerable

> ID：11273151
> 
> 赞同：3
> 
> 时间：2012-06-30T09:48:16.523
> 
> 标签：c#, c#-3.0, json.net

我有以下 json 文件

```
{"fields":[
  {
     "status":"active",
     "external_id":"title",
     "config":{},
     "field_id":11848871,
     "label":"Title",
     "values":[
        {
           "value":"Test Deliverable"
        }
     ],
     "type":"text"
  },{
     "status":"active",
     "external_id":"client-name",
     "config":{},
     "field_id":12144855,
     "label":"Client Name",
     "values":[
        {
           "value":"Chcuk Norris"
        }
     ],
     "type":"text"
  }} 
```

我想选择具有 external_id = "title" 的字段的值，例如，我正在使用 Json.Net 并且已经解析了对象。我如何在 Json 对象上使用 lambda 或 linq 来做到这一点，我会像这样

```
JObject o = JObject.Parse(json);
Title = o["fields"].Select(q => q["extenral_id"].Values[0] == "title"); 
```

就语法而言，这不是正确的事件。我对 Lambda 不是很精通，或者 Linq 认为它已经存在了一段时间。感谢帮助

谢谢

耶希亚

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T10:02:56.573

或者你可以这样做：

```
 string json = "{\"fields\":[{\"status\":\"active\",\"external_id\":\"title\",\"config\":{},\"field_id\":11848871,\"label\":\"Title\",\"values\":[{\"value\":\"Test Deliverable\"}],\"type\":\"text\"},{\"status\":\"active\",\"external_id\":\"client-name\",\"config\":{},\"field_id\":12144855,\"label\":\"Client Name\",\"values\":[{\"value\":\"Chcuk Norris\"}],\"type\":\"text\"}]}";

 JObject obj = JObject.Parse(json);

 JArray arr = (JArray)obj["fields"];

 var externalIds = arr.Children().Select(m=>m["external_id"].Value<string>()); 
```

externalIds 是一个 IEnumerable 字符串数组

或者您可以将其链接在一起并在一行中选择对象：

```
var myVal = JObject.Parse(json)["fields"].Children()
                                        .Where(w => w["external_id"].ToString() == "title")
                                        .First(); 
```

从那里您可以附加您想要的任何选择器，即如果您想要 external_id 值，然后将 ["external_id"].ToString() 附加到 first() 选择器的末尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T10:01:07.450

首先为您的对象构建类，然后解析它们，以便您可以正确访问它们并且不再是匿名类型。

例如这个类：

```
class MyJson {
    public List<MyField> fields {get;set;}
}

class MyField {
    public string status {get;set;}
    public string external_id {get;set;}
    // and so on
} 
```

然后使用该类来解析 json（现在不知道确切的语法），如下所示：

```
var o = Json.Parse(json, typeof(MyJson)); 
```

然后您可以使用 Linq 轻松选择数据并在 VS（或类似的开发环境）中使用智能感知：

```
var myData = o.fields.Where(q=>q.external_id=="title"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T11:21:35.180

如果您将 JSON 转换为对象（基本上是 Marc 建议的），则 LINQ 查询将类似于：

```
o.fields.Single(q => q.external_id == "title") 
```

但是，如果您不想这样做，则必须通过字符串键访问值。如果您不想转换值的类型，您可以简单地使用索引（`["key"]`）。但是如果你想转换类型，你可以使用`Value<Type>("key")`. 放在一起，整个查询可能是：

```
o["fields"].Single(q => q.Value<string>("external_id") == "title") 
```

# android - Android proguard 导出失败

> ID：11273152
> 
> 赞同：0
> 
> 时间：2012-06-30T09:48:22.233
> 
> 标签：android, export, proguard

当我尝试导出 APK（使用 proguard 时）时出现错误：

```
[2012-06-30 12:41:06 - ICDB] Proguard returned with error code 1\. See console
[2012-06-30 12:41:06 - ICDB] Note: there were 29 duplicate class definitions.
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.MemberSpecificationElement: can't find superclass or interface org.apache.tools.ant.types.DataType
[2012-06-30 12:41:06 - ICDB] Warning: proguard.wtk.ProGuardObfuscator: can't find superclass or interface com.sun.kvem.environment.Obfuscator
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ClassPathElement: can't find superclass or interface org.apache.tools.ant.types.Path
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ConfigurationTask: can't find superclass or interface org.apache.tools.ant.Task
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ConfigurationElement: can't find superclass or interface org.apache.tools.ant.types.FileSet
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ClassSpecificationElement: can't find superclass or interface org.apache.tools.ant.types.DataType
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.FilterElement: can't find superclass or interface org.apache.tools.ant.types.DataType
[2012-06-30 12:41:06 - ICDB] Warning: library class android.content.res.XmlResourceParser extends or implements program class org.xmlpull.v1.XmlPullParser
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.MemberSpecificationElement: can't find referenced class org.apache.tools.ant.types.DataType
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.MemberSpecificationElement: can't find referenced method 'boolean isReference()' in class proguard.ant.MemberSpecificationElement
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.MemberSpecificationElement: can't find referenced method 'java.lang.Object getCheckedRef(java.lang.Class,java.lang.String)' in class proguard.ant.MemberSpecificationElement
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.MemberSpecificationElement: can't find referenced class org.apache.tools.ant.BuildException
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.MemberSpecificationElement: can't find referenced class org.apache.tools.ant.BuildException
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.MemberSpecificationElement: can't find referenced class org.apache.tools.ant.types.DataType
[2012-06-30 12:41:06 - ICDB] Warning: proguard.wtk.ProGuardObfuscator: can't find referenced class com.sun.kvem.environment.Obfuscator
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ProGuardTask: can't find referenced method 'org.apache.tools.ant.Project getProject()' in class proguard.ant.ProGuardTask
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ProGuardTask: can't find referenced class org.apache.tools.ant.Project
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ProGuardTask: can't find referenced class org.apache.tools.ant.BuildException
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ProGuardTask: can't find referenced class org.apache.tools.ant.BuildException
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ProGuardTask: can't find referenced class org.apache.tools.ant.Project
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ProGuardTask: can't find referenced class org.apache.tools.ant.Project
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ClassPathElement: can't find referenced class org.apache.tools.ant.types.Path
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ClassPathElement: can't find referenced method 'org.apache.tools.ant.Project getProject()' in class proguard.ant.ClassPathElement
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ClassPathElement: can't find referenced class org.apache.tools.ant.Project
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ClassPathElement: can't find referenced method 'boolean isReference()' in class proguard.ant.ClassPathElement
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ClassPathElement: can't find referenced method 'java.lang.Object getCheckedRef(java.lang.Class,java.lang.String)' in class proguard.ant.ClassPathElement
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ClassPathElement: can't find referenced class org.apache.tools.ant.types.Path
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ClassPathElement: can't find referenced class org.apache.tools.ant.types.Path
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ClassPathElement: can't find referenced class org.apache.tools.ant.types.AbstractFileSet
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ClassPathElement: can't find referenced class org.apache.tools.ant.types.AbstractFileSet
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ClassPathElement: can't find referenced class org.apache.tools.ant.DirectoryScanner
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ClassPathElement: can't find referenced class org.apache.tools.ant.DirectoryScanner
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ClassPathElement: can't find referenced class org.apache.tools.ant.BuildException
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ClassPathElement: can't find referenced class org.apache.tools.ant.BuildException
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ClassPathElement: can't find referenced method 'java.lang.String[] list()' in class proguard.ant.ClassPathElement
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ClassPathElement: can't find referenced method 'void setLocation(java.io.File)' in class proguard.ant.ClassPathElement
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ClassPathElement: can't find referenced class org.apache.tools.ant.Project
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ClassPathElement: can't find referenced class org.apache.tools.ant.DirectoryScanner
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ClassPathElement: can't find referenced class org.apache.tools.ant.Project
[2012-06-30 12:41:06 - ICDB] Warning: org.acra.CrashReportData: can't find referenced method 'void setLength(int)' in class java.lang.StringBuilder
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ConfigurationTask: can't find referenced class org.apache.tools.ant.Task
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ConfigurationTask: can't find referenced method 'org.apache.tools.ant.Project getProject()' in class proguard.ant.ConfigurationTask
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ConfigurationTask: can't find referenced class org.apache.tools.ant.Project
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ConfigurationTask: can't find referenced class org.apache.tools.ant.Project
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ConfigurationTask: can't find referenced class org.apache.tools.ant.Project
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ConfigurationTask: can't find referenced class org.apache.tools.ant.BuildException
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ConfigurationTask: can't find referenced class org.apache.tools.ant.BuildException
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ConfigurationTask: can't find referenced class org.apache.tools.ant.Task
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ConfigurationTask: can't find referenced class org.apache.tools.ant.Project
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ConfigurationElement: can't find referenced class org.apache.tools.ant.types.FileSet
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ConfigurationElement: can't find referenced method 'boolean isReference()' in class proguard.ant.ConfigurationElement
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ConfigurationElement: can't find referenced method 'java.lang.Object getCheckedRef(java.lang.Class,java.lang.String)' in class proguard.ant.ConfigurationElement
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ConfigurationElement: can't find referenced class org.apache.tools.ant.types.AbstractFileSet
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ConfigurationElement: can't find referenced method 'org.apache.tools.ant.Project getProject()' in class proguard.ant.ConfigurationElement
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ConfigurationElement: can't find referenced class org.apache.tools.ant.types.AbstractFileSet
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ConfigurationElement: can't find referenced class org.apache.tools.ant.DirectoryScanner
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ConfigurationElement: can't find referenced class org.apache.tools.ant.DirectoryScanner
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ConfigurationElement: can't find referenced class org.apache.tools.ant.BuildException
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ConfigurationElement: can't find referenced class org.apache.tools.ant.BuildException
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ConfigurationElement: can't find referenced method 'org.apache.tools.ant.DirectoryScanner getDirectoryScanner(org.apache.tools.ant.Project)' in class proguard.ant.ConfigurationElement
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ConfigurationElement: can't find referenced class org.apache.tools.ant.Project
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ConfigurationElement: can't find referenced class org.apache.tools.ant.types.FileSet
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ConfigurationElement: can't find referenced class org.apache.tools.ant.DirectoryScanner
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ConfigurationElement: can't find referenced class org.apache.tools.ant.Project
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.KeepSpecificationElement: can't find referenced method 'boolean isReference()' in class proguard.ant.KeepSpecificationElement
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.KeepSpecificationElement: can't find referenced method 'java.lang.Object getCheckedRef(java.lang.Class,java.lang.String)' in class proguard.ant.KeepSpecificationElement
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ClassSpecificationElement: can't find referenced class org.apache.tools.ant.types.DataType
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ClassSpecificationElement: can't find referenced method 'boolean isReference()' in class proguard.ant.ClassSpecificationElement
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ClassSpecificationElement: can't find referenced method 'java.lang.Object getCheckedRef(java.lang.Class,java.lang.String)' in class proguard.ant.ClassSpecificationElement
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ClassSpecificationElement: can't find referenced class org.apache.tools.ant.BuildException
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ClassSpecificationElement: can't find referenced class org.apache.tools.ant.BuildException
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.ClassSpecificationElement: can't find referenced class org.apache.tools.ant.types.DataType
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.FilterElement: can't find referenced class org.apache.tools.ant.types.DataType
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.FilterElement: can't find referenced method 'boolean isReference()' in class proguard.ant.FilterElement
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.FilterElement: can't find referenced method 'java.lang.Object getCheckedRef(java.lang.Class,java.lang.String)' in class proguard.ant.FilterElement
[2012-06-30 12:41:06 - ICDB] Warning: proguard.ant.FilterElement: can't find referenced class org.apache.tools.ant.types.DataType
[2012-06-30 12:41:06 - ICDB] Warning: com.easy.facebook.android.facebook.FBLoginManager$1: can't find referenced method 'void sync()' in class android.webkit.CookieSyncManager
[2012-06-30 12:41:06 - ICDB] Warning: library class android.content.IntentFilter depends on program class org.xmlpull.v1.XmlSerializer
[2012-06-30 12:41:06 - ICDB] Warning: library class android.content.IntentFilter depends on program class org.xmlpull.v1.XmlPullParser
[2012-06-30 12:41:06 - ICDB] Warning: library class android.graphics.drawable.StateListDrawable depends on program class org.xmlpull.v1.XmlPullParser
[2012-06-30 12:41:06 - ICDB] Warning: library class android.graphics.drawable.AnimationDrawable depends on program class org.xmlpull.v1.XmlPullParser
[2012-06-30 12:41:06 - ICDB] Warning: library class android.content.res.ColorStateList depends on program class org.xmlpull.v1.XmlPullParser
[2012-06-30 12:41:06 - ICDB] Warning: library class android.content.Intent depends on program class org.xmlpull.v1.XmlPullParser
[2012-06-30 12:41:06 - ICDB] Warning: library class android.graphics.drawable.Drawable depends on program class org.xmlpull.v1.XmlPullParser
[2012-06-30 12:41:06 - ICDB] Warning: library class android.graphics.drawable.Drawable depends on program class org.xmlpull.v1.XmlPullParser
[2012-06-30 12:41:06 - ICDB] Warning: library class android.graphics.drawable.Drawable depends on program class org.xmlpull.v1.XmlPullParser
[2012-06-30 12:41:06 - ICDB] Warning: library class android.graphics.drawable.GradientDrawable depends on program class org.xmlpull.v1.XmlPullParser
[2012-06-30 12:41:06 - ICDB] Warning: library class android.graphics.drawable.NinePatchDrawable depends on program class org.xmlpull.v1.XmlPullParser
[2012-06-30 12:41:06 - ICDB] Warning: library class android.view.LayoutInflater depends on program class org.xmlpull.v1.XmlPullParser
[2012-06-30 12:41:06 - ICDB] Warning: library class android.view.LayoutInflater depends on program class org.xmlpull.v1.XmlPullParser
[2012-06-30 12:41:06 - ICDB] Warning: library class android.graphics.drawable.BitmapDrawable depends on program class org.xmlpull.v1.XmlPullParser
[2012-06-30 12:41:06 - ICDB]       You should check if you need to specify additional program jars.
[2012-06-30 12:41:06 - ICDB] Warning: there were 55 unresolved references to classes or interfaces.
[2012-06-30 12:41:06 - ICDB]          You may need to specify additional library jars (using '-libraryjars'),
[2012-06-30 12:41:06 - ICDB]          or perhaps the '-dontskipnonpubliclibraryclasses' option.
[2012-06-30 12:41:06 - ICDB] Warning: there were 15 instances of library classes depending on program classes.
[2012-06-30 12:41:06 - ICDB]          You must avoid such dependencies, since the program classes will
[2012-06-30 12:41:06 - ICDB]          be processed, while the library classes will remain unchanged.
[2012-06-30 12:41:06 - ICDB] Warning: there were 21 unresolved references to program class members.
[2012-06-30 12:41:06 - ICDB]          Your input classes appear to be inconsistent.
[2012-06-30 12:41:06 - ICDB]          You may need to recompile them and try again.
[2012-06-30 12:41:06 - ICDB]          Alternatively, you may have to specify the options 
[2012-06-30 12:41:06 - ICDB]          '-dontskipnonpubliclibraryclasses' and/or
[2012-06-30 12:41:06 - ICDB]          '-dontskipnonpubliclibraryclassmembers'.
[2012-06-30 12:41:06 - ICDB] Error: Please correct the above warnings first. 
```

这是cfg文件：

有任何想法吗？

```
-dontpreverify

# Hold onto the mapping.text file, it can be used to unobfuscate stack traces in the developer console using the retrace tool
-printmapping mapping.txt

# Keep line numbers so they appear in the stack trace of the develeper console
-keepattributes SourceFile,LineNumberTable 

# The -optimizations option disables some arithmetic simplifications that Dalvik 1.0 and 1.5 can't handle.
-optimizations !code/simplification/arithmetic 

# Activities, services and broadcast receivers are specified in the manifest file so they won't be automatically included
-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider 

# Custom view components might be accessed from your layout files
-keep public class * extends android.view.View {
    public <init>(android.content.Context);
    public <init>(android.content.Context, android.util.AttributeSet);
    public <init>(android.content.Context, android.util.AttributeSet, int);
    public void set*(...);
}

# event handlers can be specified in the layout files e.g. android:onClick="nextButton_onClick", I borrowed this method name notation from .NET
-keepclassmembers class * extends android.app.Activity {
    public void *_*(android.view.View);
}

# Parcelable implementations are accessed by introspection
-keepclassmembers class * implements android.os.Parcelable {
    static android.os.Parcelable$Creator CREATOR;
}

# You might want to keep your annotations
-keepattributes *Annotation*

-libraryjars lib/acra-4.2.3.jar

-keepclasseswithmembers class com.google.common.base.internal.Finalizer{
    <methods>;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T01:13:19.543

看起来您已经在 libs 目录中复制了 proguard.jar（可能还有其他 jar），因此 ProGuard 的类被包含在您的应用程序中。那可能不是你想要的。

# php - 使用一些使用数据库连接的类

> ID：11273157
> 
> 赞同：4
> 
> 时间：2012-06-30T09:48:54.020
> 
> 标签：php, mysql, oop, class

假设我在一个论坛上工作，当然有用户，以及添加评论、开放主题等的选项。

现在对于这个东西，我需要一些功能，例如：登录/注销；添加/编辑/删除评论；私人消息..好吧，你明白了。

因此，如果我使用 oop 来执行此操作，那么对于所有这些选项，仅使用一个巨大的类会非常笨拙，而且我认为效率会降低，因此最好为上述每个类创建一个类。但问题是，如果这样做，我需要在每个类中建立与数据库的连接，而同时使用多个连接到同一个数据库会浪费资源。那么，这个问题的最佳解决方案是什么？:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T21:43:02.777

In OOP you just create your objects. They do what they should do.

And when I write, you just create the objects, I mean that literally. There is no database so far, you don't care how these objects are stored yet.

Write your unit tests, get the objects to work what they should do.

Then start to bring those objects together. They still don't need to be stored. Just bring them together, like:

```
$user = $session->getUser();
$user->login(username, password); 
```

And so on. Your application should just not need to care about the database.

Then when you finalize your application, next to where you instantiate the objects in each action, you also instantiate a `DataMapper` that is able to fetch object from the data-store.

```
User <--> UserMapper <--> Datastore 
```

As you can see, the `User` object knows nothing about the `Datastore` , not even about the `UserMapper`. The `UserMapper` knows what a `User` is, but as written above, this comes later, so first get your important objects running, write the unit tests for them and then the integration tests and then when you've done that, start thinking about the database - whatever it will be then that time.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-30T10:34:32.920

OOP is all about the logical segregation of code into dedicated blocks, but with a basis for sharing, inheritance and interoperability where required. With this in mind, declare the connection as a static property of the class (since there is presumably no need for it to be recreated for each instance).

This would work (and be pretty efficient) whether your main code blocks are class extensions, or methods of, your base Forum class.

```
class Forum {
    public static $db = "I'm the database!";
    public function post() {
        echo self::$db;
    }
}
class Post extends Forum {
    public function getDB() {
        echo parent::$db;
    }
}

//post as its own sub-class
$post = new Post();
$post->getDB(); //I'm the database!

//post as method of class
$forum = new Forum();
$forum->post(); //I'm the database! 
```

**[EDIT]** - it seems PHP cannot parse non-trivial values for static properties, i.e. they cannot be expressions or calls to functions.

One way round this is as follows:

```
class Forum {
    static $db;
    public function post() {
        self::$db; //do something with DB connection here
    }
}
Forum::$db = new mysqli(); //<-- the key - screw you, static property limitations
class Post extends Forum {
    public function getDB() {
        parent::$db; //do something with DB connection here
    }
} 
```

...i.e. we declare the static property (our DB handler) after the class declaration. Someone else might know a more graceful way of doing this.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-30T11:24:55.950

使用此代码。以 Databasehandler.php 的名称保存它。并将它包含在您的 index.php 中，并在整个项目中需要时使用它的功能。它使用 PDO 对您的数据库进行安全查询。可能需要进行细微的修改。

```
 <?php

Class DatabaseHandler
{
    private static $_mhandler;

    private function __construct() { }

    private static function GetHandler()
    {
        if(!isset($_mhandler))
        {
            try
            {
                self::$_mhandler = new PDO (PDO_DSN, DB_USERNAME, DB_PASSWORD, array(PDO::ATTR_PERSISTENT => DB_PERSISTENCY));
                self::$_mhandler -> setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
            }
            catch(PDOException $e)
            {
                self::Close();
                trigger_error($e -> getMessage(), E_USER_ERROR);
            }

            return self::$_mhandler; // Returning DATABASE Handler Object.
        }
    }

    public static function Close()
    {
        $_mhandler = NULL;
    }

    public static function Execute($sqlquery, $params = NULL)
    {
        try
        {
            $dbh = self::GetHandler(); //DataBaseHandler
            $sth = $dbh -> prepare($sqlquery); //StatementHandler
            $sth -> execute($params);
        }
        catch(PDOException $e)
        {
            self::Close();
            trigger_error($e -> getMessage(), E_USER_ERROR);
        }

    }

    public static function GetAll($sqlquery, $params = NULL, $fetchstyle = PDO::FETCH_ASSOC)
    {
        $result = NULL;

        try
        {
            $dbh = self::GetHandler();
            $sth = $dbh -> prepare($sqlquery);
            $sth -> execute($params);
            $result = $sth -> fetchAll($fetchstyle);
        }
        catch(PDOException $e)
        {
            self::Close();
            trigger_error($e -> getMessage(), E_USER_ERROR);
        }
        return $result;
    }

    public static function GetRow($sqlquery, $params = NULL, $fetchstyle = PDO::FETCH_ASSOC)
    {
        $result = NULL;

        try
        {
            $dbh = self::GetHandler();
            $sth = $dbh -> prepare($sqlquery);
            $sth -> execute($params);
            $result = $sth -> fetch($fetchstyle);
        }
        catch(PDOException $e)
        {
            self::Close();
            trigger_error($e -> getMessage(), E_USER_ERROR);
        }
        return $result;
    }

    public static function GetOne($sqlquery, $params = NULL)
    {
        $result = NULL;

        try
        {
            $dbh = self::GetHandler();
            $sth = $dbh -> prepare($sqlquery);
            $sth -> execute($params);
            $result = $sth -> fetch(PDO::FETCH_NUM);
            $result = $result[0];
        }
        catch(PDOException $e)
        {
            self::Close();
            trigger_error($e -> getMessage(), E_USER_ERROR);
        }
        return $result;
    }
}

?> 
```

# jquery - Jquery在点击时在两个文本变量之间切换

> ID：11273159
> 
> 赞同：0
> 
> 时间：2012-06-30T09:49:10.417
> 
> 标签：jquery, css

我有一个单击功能，您可以在其中单击锚标记，它会更改单击的锚标记的背景以及页面上另一个元素中的文本。现在，当您单击另一个锚标记时，它应该将文本更改为第二个文本变量。当第三次单击 a-tag（即第三个锚标记，我有 3 个）时，它应该变回第一个再次文本变量。这是我的示例，但似乎无法正常工作。此外，背景不会改变不透明度，但我认为这是因为它位于 td 标签中 - 请参阅示例

[http://jsfiddle.net/gGAW5/94/](http://jsfiddle.net/gGAW5/94/)

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T09:51:32.333

试试这个 - [http://jsfiddle.net/gGAW5/96/](http://jsfiddle.net/gGAW5/96/)

```
var title;

    $(document).ready(function() {
        $("a").click(function() {
            if ( $("#myTitle").text() == "My Title" || $("#myTitle").text() == "My Text 2" ) {
                title = "My Text 1";
            } else {
                title = "My Text 2";
            }

            $("#myTitle").text( title );
            $(this).css("opacity", .5);
        });
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T09:57:09.567

**工作演示** [http://jsfiddle.net/tB3pP/3/](http://jsfiddle.net/tB3pP/3/)

我刚刚使用了你的 r 代码并做了一些小的改动，比如`var = i`和`i%2`

实现的行为：当您第一次单击时，`text1`第二次单击`text2`第三次`text1`。

希望这会有所帮助，如果我错过了什么，请让我知道，

**代码**

```
$(document).ready(function() {
    var text1 = "My Text 1";
    var text2 = "My Text 2";
    var i = 1;
    $("a").click(function(event) {

        i++;
        if (i%2 != 0) {
            $("#myTitle").html(text1);
            $(this).css("opacity", "0,5");
        }else {
            $("#myTitle").html(text2);
            $(this).css("opacity", "0,9");
        }
    });
});​ 
```

# android - 如何使用 GSM 调制解调器从 Android 模拟器向手机发送短信？

> ID：11273164
> 
> 赞同：1
> 
> 时间：2012-06-30T09:49:47.733
> 
> 标签：android, android-emulator

是否可以通过连接到计算机 USB 端口的 GSM 调制解调器将短信从 Android 模拟器发送到手机？如果可能的话，我该怎么做

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T09:59:20.880

您可以这样做，但 android 不会将其检测为原生天线，换句话说，android 发送短信或发起呼叫的所有功能都将不起作用。

如果设备可见是 /dev/.. 您可以打开它并通过串行发送命令。除非有人编写了一个驱动程序，以便 android 可以加载它以在模拟器中进行 gsm 通信，否则我的猜测是它非常没用。

无论如何，据我所知，模拟器确实有一种测试短信发送的方法，如果你真的想通过你的 gsm 加密狗发送短信，那么开始使用 python 编写脚本可能是一个更好的主意。还有一个库可以从 linux 发送短信，它也可以在其他平台上工作。

**从计算机从 python 发送短信：http:** [//designbuildtestrepeat.wordpress.com/2008/06/26/sms-over-3g-and-bluetooth-from-python/](http://designbuildtestrepeat.wordpress.com/2008/06/26/sms-over-3g-and-bluetooth-from-python/)

**检查模拟器 android 的传入短信：http:** [//davanum.wordpress.com/2007/12/15/android-listen-for-incoming-sms-messages/](http://davanum.wordpress.com/2007/12/15/android-listen-for-incoming-sms-messages/)

**在模拟器之间发送短信：http:** [//xjaphx.wordpress.com/2011/07/07/sending-messages-among-devices/](http://xjaphx.wordpress.com/2011/07/07/sending-messages-among-devices/)

然后它真的取决于你需要什么。你没有确切地说你为什么要这样做。你没有说你是想测试短信还是想从电脑发送实际的短信。目前还不清楚为什么同时需要 android 和 gsm 调制解调器。

# smarty - 如何在另一个自定义函数中使用包含函数？

> ID：11273165
> 
> 赞同：1
> 
> 时间：2012-06-30T09:50:12.180
> 
> 标签：smarty

我正在使用 Smarty 3.1.8

我想在页面上只包含一个 tpl 文件，即使 tpl 文件调用了更多次。我不知道我可以用 Smarty 做到这一点，而无需编写新的自定义函数。所以我想为此编写一个新的自定义包含函数.

我可以在自定义包含功能中使用 smarty 的包含功能吗？

我想在我的自定义包含函数中使用 smarty 包含函数来编译给定的模板。我该怎么做？

我想使用如下：

```
{include_js file="script.users.tpl"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T22:05:10.790

你在使用 PHP 吗？如果，那么试试这个：
即使它在 Smarty 中，使用 php **include_once("/dir/filename");** 功能。

使用 smarty_bc 或 smarty2：

**{some_smarty.tpl}**

```
<html>
    <p>ex paragraph one</p>
    <p>ex paragraph two</p>
    {php} include_once("script.users.tpl"); {/php}
</html> 
```

通过这种方式，您可以依靠 PHP 监控文件只被插入一次。

# iphone - 当我截屏时，如何删除按钮？

> ID：11273166
> 
> 赞同：0
> 
> 时间：2012-06-30T09:50:31.880
> 
> 标签：iphone

当我截屏时，如何删除按钮？我正在使用此代码进行屏幕截图

```
CGImageRef originalImage = UIGetScreenImage();
CGImageRef videoImage = CGImageCreateWithImageInRect(originalImage, CGRectMake(0, 66, 320, 230));            
UIImage *snapShotImage = [UIImage imageWithCGImage:videoImage];
UIImageWriteToSavedPhotosAlbum(snapShotImage, nil, nil, nil);
CGImageRelease(originalImage);                
CGImageRelease(videoImage); 
```

![在此处输入图像描述](../Images/02965de2c9a39647ca94c0d7870d1fcd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T12:07:02.487

在拍摄屏幕截图之前删除您的按钮，您可以将其框架存储在 CGRect 并在**UIGraphicsEndImageContext() 之后再次添加它；**线

```
 CGRect rect = yourButton.frame; // store your buttons frame
[yourButton removeFromSuperView];
UIGraphicsBeginImageContext(self.view.frame.size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewImage=UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

yourButton = [UIButton buttonWithType:UIButtonTypeCustom];

[yourButton setFrame:rect];
[yourButton setImage:[UIImage imageNamed:@"yourButtonImage.png"] forState:UIControlStateNormal];
[yourButton addTarget:self action:@selector(yourButtonAction:) forControlEvents:UIControlEventTouchUpInside];
[self.view yourButton]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T09:57:36.743

如果按钮图像包含在其他图像中，这可能会变得非常复杂（那么我建议您进入全屏并截取屏幕截图）。

如果按钮图像不直接包含在另一个图像中（例如，只是一个 HTML 覆盖），那么您也可以使用 css 轻松隐藏它。

但也许有比在 iOS 中截屏更好的方法……</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T10:19:03.797

嗨，您可以制作像 backView 这样的视图，然后单击按钮调用此代码....

```
-(IBAction)screenShotBtnPress :(id)sender  
{

    UIGraphicsBeginImageContext(self.view.window.frame.size);
    [BackView.layer renderInContext:UIGraphicsGetCurrentContext()];

    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    UIImageWriteToSavedPhotosAlbum(viewImage, nil, nil, nil);
} 
```

此代码获取 BackView 的屏幕截图，为此视图制作 IBOutlet，然后连接此....

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-30T09:54:55.237

在截屏之前隐藏该按钮。

# ruby-on-rails - 使用模型中的名称填充 rails 中的选择框

> ID：11273167
> 
> 赞同：1
> 
> 时间：2012-06-30T09:50:36.563
> 
> 标签：ruby-on-rails, ruby, activerecord

我一直在通过堆栈以及互联网的其他部分来寻找这个问题的答案，但似乎没有什么真正提供“足够”的答案来取得任何进展。我是网络开发的完全新手，所以任何帮助将不胜感激。

在我的模型中，每个用户通过分配有很多角色，而角色通过分配有很多用户。

当我创建新任务时，我希望有一个包含每个用户的名字+姓氏的下拉框。我似乎无法在互联网上找到任何东西来指导我，但也许我没有使用正确的术语来搜索东西。任何指针将不胜感激！

我试过了：

```
<%=f.select :user_id, select("assignment", "user_id", 
  User.all.collect {|u| [ [u.name,u.surname].join(" "), u.id ] },
  { :include_blank => true }) %> 
```

但返回的只是一个空白选择框。我已经通过控制台通过收集查询运行它以确保它正在工作，但由于某种原因它没有填充选择框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T09:54:10.817

```
select("assignment", "person_id", 
  Person.all.collect {|p| [ [p.first_name,p.last_name].join(" "), p.id ] },
  { :include_blank => true }) 
```

或在您的模型中定义 full_name 并使用

```
options_from_collection_for_select(@people, 'id', 'full_name') 
```

# java - 单例模式中的方法变量

> ID：11273170
> 
> 赞同：1
> 
> 时间：2012-06-30T09:53:16.390
> 
> 标签：java, spring, spring-mvc, singleton

我是 Spring 新手。我有一个 spring bean countService，它是一个单例

```
public class CountService {
    private int doCount() {
        String commentsText = null;
        List tranIds = new ArrayList();
        int count = 0;
        // ---business logic----

        return count;
    }
} 
```

方法变量 commentsText,tranIds 线程安全吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T10:01:53.290

无论是否使用 Spring，只要您不与其他线程手动共享它们的对象，Java*局部变量都是线程安全的。*例如，如果您的“业务逻辑”代码创建新线程并将局部变量传递给这些线程，则局部变量不是线程安全的。除此之外，它们是：运行您的方法的每个执行线程都将获得自己的局部变量，该变量与所有其他局部变量分开。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T10:03:26.433

如果线程之间根本没有共享任何状态，则代码是线程安全的。

因此，如果您只有局部变量，则该方法是线程安全的。当然，如果这些局部变量实际上是对共享对象的引用，而这些共享对象不是线程安全的，那么你就有问题了。

但是，如果该方法使用的所有对象都是由该方法本身创建的，那么就不会共享任何内容，并且您是安全的。

线程安全代码示例：

```
 public int foo(String a, String b) {
     List<String> list = new ArrayList<>(); // the list is local to the method
     // do some work with the list
     return list.size();
 } 
```

非线程安全代码示例：

```
 public int foo(String a, String b) {
     List<String> list = SomeClass.getSomeStaticListReference(); // the list is shared between threads
     // do some work with the list
     return list.size();
 } 
```

# java - 使用循环引用并行爬取大图

> ID：11273174
> 
> 赞同：0
> 
> 时间：2012-06-30T09:53:39.683
> 
> 标签：java, multithreading, algorithm, concurrency, graph-theory

简而言之：我想以并行方式处理带有循环引用的大图。而且我无法访问完整的图表，我必须爬过它。我想组织有效的队列来做到这一点。我很感兴趣是否有任何最佳做法可以做到这一点？

我正在尝试为这种策略组织无限的数据处理流程：每个线程从队列中获取节点，处理它，在处理之后 - 可能会出现一些新的处理节点 - 所以线程必须将它们放入队列。但我不必多次处理每个节点。节点是不可变的实体。

据我了解 - 我必须使用队列和集合的一些线程安全实现（对于已经访问过的实例）。

**我试图避免使用同步方法。**所以，我对这个流程的实现：

1.  当线程将节点添加到队列中时，它会检查每个节点：如果visited-nodes-set 包含该节点，则线程不将其添加到队列中。但这还不是全部

2.  当线程从队列中获取节点时 - 它检查visited-nodes-set 是否包含该节点。如果包含，则线程从队列中获取另一个节点，直到获取尚未处理的节点。找到未处理的节点后，线程还将其添加到访问节点集中。

我尝试使用 LinkedBlockingQueue 和 ConcurrentHashMap （作为一组）。我使用了 ConcurrentHashMap，因为它包含方法 putIfAbsent(key, value) - 据我了解，这有助于原子：检查 map 是否包含键，如果不包含 - 添加它。

这是所描述算法的实现：

```
public class ParallelDataQueue {

   private LinkedBlockingQueue<String> dataToProcess = new LinkedBlockingQueue<String>();
   // using map as a set
   private ConcurrentHashMap<String, Object> processedData = new ConcurrentHashMap<String, Object>( 1000000 );
   private final Object value = new Object();

   public String getNextDataInstance() {
    while ( true ) {
        try {
            String data = this.dataToProcess.take();
            Boolean dataIsAlreadyProcessed = ( this.processedData.putIfAbsent( data, this.value ) != null );
            if ( dataIsAlreadyProcessed ) {
                continue;
            } else {
                return data;
            }
        } catch ( InterruptedException e ) {
            e.printStackTrace();
        }
      }
    }

    public void addData( Collection<String> data ) {
    for ( String d : data ) {
        if ( !this.processedData.containsKey( d ) ) {
            try {
                this.dataToProcess.put( d );
            } catch ( InterruptedException e ) {
                e.printStackTrace();
            }
        }
       }
     }

} 
```

所以我的问题 - 当前的实现是否避免处理可重复的节点。而且，也许有更优雅的解决方案？

谢谢

**附言**

我理解，这样的实现并不能避免队列中节点的出现重复。但对我来说这并不重要——我需要的只是避免多次处理每个节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T10:46:04.543

如果您需要以多线程方式处理数据，您可能根本不需要集合。你没有考虑过使用 Executors 框架吗？：

```
public static void main(String[] args) throws InterruptedException {
    ExecutorService exec = Executors.newFixedThreadPool(100);
    while (true) { // provide data ininitely
        for (int i = 0; i < 1000; i++)
            exec.execute(new DataProcessor(UUID.randomUUID(), exec));
        Thread.sleep(10000); // wait a bit, then continue;
    }
}

static class DataProcessor implements Runnable {
    Object data;
    ExecutorService exec;
    public DataProcessor(Object data, ExecutorService exec) {
        this.data = data;
        this.exec = exec;
    }
    @Override
    public void run() {
        System.out.println(data); // process data
        if (new Random().nextInt(100) < 50) // add new data piece for execution if needed
            exec.execute(new DataProcessor(UUID.randomUUID(), exec));
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T10:05:06.740

是的。使用`ConcurrentLinkedQueue`（[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html)）

还

> 当线程将数据添加到队列中时，它会检查每个数据实例：如果 set 包含该数据的实例，则线程不将其添加到队列中。但这还不是全部

不是线程安全的方法，除非底层 Collection 是线程安全的。（这意味着它在内部同步）但是进行检查是没有意义的，因为它**已经是**线程安全的......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T10:02:14.987

您当前的实现不会避免重复的数据实例。假设“线程A”检查并发映射中是否存在数据，发现不存在，则报告数据不存在。但就在 putIfAbsent 行之后执行 if 之前，“线程 A”被挂起。此时另一个威胁“线程 B”，计划由 cpu 执行并检查是否存在相同的数据元素，发现它不存在并报告为不存在，并将其添加到队列中。当线程 A 被重新调度时，它将从 if 行继续并将其再次添加到队列中。

# algorithm - 动态规划 - 确定状态

> ID：11273181
> 
> 赞同：8
> 
> 时间：2012-06-30T09:55:30.303
> 
> 标签：algorithm, dynamic, state, dynamic-programming

我最近在动态编程课程中遇到了这个问题，老实说，我不知道如何确定适当的状态。

你有**N** (1 <= N <= 70) 个段落和**M** (1 <= M <= N) 个数字。每个段落**i**需要**PL_i** (1 <= PL_i <= 100) 行并且最多引用一个图。每个图只引用一次（即，没有两个段落可以引用同一个图，并且每个图都有一个引用它的段落。）每个图都需要**PF_i** (1 <= PF_i <= 100) 行。

任务是按照给定的顺序将这些图形和段落分布在纸上，其中一张纸最多适合**L**行。没有段落或图形太大而不能放在一张纸上。如果放置在纸**x_p上的段落****x**引用了图形**y**，则**y**必须放置在纸**x_p - 1**或**x_p**或**x_p + 1**上。

 ******为了分配所有的图表和段落，我们必须找到要分配的最少行数（以及相应的页数）。任何帮助将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T15:44:10.447

作为当前页面 P 的 DP 状态，您可以使用数组（大小为**L** * 2），按行数索引，在页面 P 上保留用于图形，从页面 P+1 引用或（取反的）行数，需要在第 P+1 页上的图，从第 P 页引用。

每个数组元素由两个值组成：

1.  **x** - 段落数，分布在第 1 .. P 页上；
2.  一些数据，需要在 DP 算法完成后恢复段落/图形分布。

使用此数组计算下一页 (P+1) 的数组。对于数组 P 的每个有效元素，将新段落 ( **x** +1, **x** +2, ...) 添加到页面 P+1，更新数组 P+1 的对应元素。尽管可以，将这些段落引用的图形放在 P 页，然后放在 P+1 页，然后放在 P+2 页。用较高的值覆盖数组 P+1 中**x值较低的元素。**

该算法的时间复杂度为 O( **L** * **N** )：每页行数乘以段落数。因为处理每一页是 O(lines-per-page * average-paragraphs-per-page)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T16:40:28.173

通常存在的问题是您必须对段落 P 和图形 P 以太（P，F）顺序或（F，P）顺序进行重新排序。

放置在文档中的是 (P1,F1),(P2,F2),(P3,F3) 其中每个元组 (P,F) 可以是任意顺序 (P,F) 或 (F,P) 并且有一些 F长度为 0 表示没有 F。

问题是找到每个 (P,F) 对的排序。

找到最少 Paige 数的一种解决方案是应用此规则

```
lines_total = MIN(lines(P,F),lines(F,P)) + remaining() //this is custom addition 
```

好的，这个函数缺少原型，但是对于 C 来说就像

```
calc_spend_lines(pfpairs * pairs) 
```

pfpaires 在哪里

```
typedef struct
{
   int P;
   int F;
} pfpaires; 
```

例如，当 P 为 0 时，你知道你已经结束了。

您所要做的就是制作函数，该函数实现了特殊的 + 符号，并考虑了分页符和死线。

这给出了 O(N) 解决方案，因为您的结束条件将是 0，所以对于最少的页数而不是行数。

如果您想最小化行数，您可以使用二分法，将结束条件设置为其他值而不是 0，这样您就可以

O(N*log(L)) 解

**编辑**
由于在当前 P 和 F 之间可能有其他 P，因此只需检查而不是 ((F,P),(P,F)) 还检查空白页 (N) 所以组合是 ((P,F) (P,N,F),(F,P),(F,N,P))。**结论是，您最终会得到更复杂的算法，但复杂度相同。**关键是，一旦您检查了 4 个排序之一，只有一种简单的方法可以进行最佳定位，只是当前状态（行）有点复杂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T19:02:49.187

可以优化，但它的工作解决方案：

```
公共类 ParagraphsAndFigures {

```
 public static ArrayList<PageContent> generatePages(List<Paragraph> paragraphs, int L) {
            ArrayList<PageContent> pages = new ArrayList<PageContent>();
            for (int i = 0; i < paragraphs.size() * 2; i++) {
                pages.add(new PageContent());
            }
            int page = 0;

            for (Paragraph paragraph : paragraphs) {
                do {
                    int cur = pages.get(page).linesReserved;
                    int next = pages.get(page + 1).linesReserved;

                    if (cur + paragraph.size < L) {
                        cur += paragraph.size;

                        if (paragraph.figure != null) {

                            if (pages.get(page + 1).hasPicture()) {
                                if (next + paragraph.figure.size < L) {
                                    pages.get(page).texts.add(paragraph);
                                    pages.get(page + 1).texts.add(paragraph.figure);
                                    pages.get(page).linesReserved += paragraph.size;
                                    pages.get(page + 1).linesReserved += paragraph.figure.size;
                                    break; // next paragraph
                                } else {
                                    page++;
                                    continue;
                                }
                            }

                            if (pages.get(page).hasPicture()) {
                                if (cur + paragraph.figure.size < L) {
                                    pages.get(page).texts.add(paragraph);
                                    pages.get(page).texts.add(paragraph.figure);
                                    pages.get(page).linesReserved += paragraph.size;
                                    pages.get(page).linesReserved += paragraph.figure.size;
                                    break; // next paragraph
                                } else {
                                    if (next + paragraph.figure.size < L) {
                                        pages.get(page).texts.add(paragraph);
                                        pages.get(page + 1).texts.add(paragraph.figure);
                                        pages.get(page).linesReserved += paragraph.size;
                                        pages.get(page + 1).linesReserved += paragraph.figure.size;
                                        break; // next paragraph
                                    }
                                    page++;
                                    continue;
                                }
                            }

                            if (page != 0 && pages.get(page - 1).hasPicture()) {
                                int prev = pages.get(page - 1).linesReserved;
                                if (prev + paragraph.figure.size < L) {
                                    pages.get(page).texts.add(paragraph);
                                    pages.get(page - 1).texts.add(paragraph.figure);
                                    pages.get(page).linesReserved += paragraph.size;
                                    pages.get(page - 1).linesReserved += paragraph.figure.size;
                                    break; // next paragraph
                                } else {
                                    if (cur + paragraph.figure.size < L) {
                                        pages.get(page).texts.add(paragraph);
                                        pages.get(page).texts.add(paragraph.figure);
                                        pages.get(page).linesReserved += paragraph.size;
                                        pages.get(page).linesReserved += paragraph.figure.size;
                                        break; // next paragraph
                                    }
                                    if (next + paragraph.figure.size < L) {
                                        pages.get(page).texts.add(paragraph);
                                        pages.get(page + 1).texts.add(paragraph.figure);
                                        pages.get(page).linesReserved += paragraph.size;
                                        pages.get(page + 1).linesReserved += paragraph.figure.size;
                                        break; // next paragraph
                                    }
                                    page++;
                                }
                            }

                            if (page != 0) {
                                int prev = pages.get(page - 1).linesReserved;
                                if ( prev + paragraph.figure.size < L) {
                                    pages.get(page).texts.add(paragraph);
                                    pages.get(page - 1).texts.add(paragraph.figure);
                                    pages.get(page).linesReserved += paragraph.size;
                                    pages.get(page - 1).linesReserved += paragraph.figure.size;
                                    break; // next paragraph
                                }
                            }

                            if (cur + paragraph.figure.size < L) {
                                pages.get(page).texts.add(paragraph);
                                pages.get(page).texts.add(paragraph.figure);
                                pages.get(page).linesReserved += paragraph.size;
                                pages.get(page).linesReserved += paragraph.figure.size;
                                break; // next paragraph
                            }

                            if (next + paragraph.figure.size < L) {
                                pages.get(page).texts.add(paragraph);
                                pages.get(page + 1).texts.add(paragraph.figure);
                                pages.get(page).linesReserved += paragraph.size;
                                pages.get(page + 1).linesReserved += paragraph.figure.size;
                                break; // next paragraph
                            }
                            page++;
                        }
                    }
                    page++;
                } while (true);
            }
            return pages;
        }
    } 
```

 `And tests:` 

```
public class ParagraphsAndFiguresTest {
            @Test
            public void pageGeneration1() throws Exception {
                // given
                ArrayList paragraphs = new ArrayList();
                paragraphs.add(new Paragraph(20,21));
                paragraphs.add(new Paragraph(22,23));
                paragraphs.add(new Paragraph(24,25)); ``// when
            ArrayList<PageContent> pageContents = ParagraphsAndFigures.generatePages(paragraphs, 50);
            // then
            assertThat(transformToList(pageContents), is(asList("20", "21", "p0" ,"22" ,"23", "p1" ,"24" ,"25", "p2")));
        }

        @Test
        public void pageGeneration2() throws Exception {
            // given
            ArrayList<Paragraph> paragraphs = new ArrayList<Paragraph>();
            paragraphs.add(new Paragraph(10,11));
            paragraphs.add(new Paragraph(28,21));
            paragraphs.add(new Paragraph(22,23));

            // when
            ArrayList<PageContent> pageContents = ParagraphsAndFigures.generatePages(paragraphs, 50);
            // then
            assertThat(transformToList(pageContents), is(asList("10", "11" ,"28", "p0" ,"21", "22" , "p1" ,"23", "p2")));
        }

        @Test
        public void pageGeneration3() throws Exception {
            // given
            ArrayList<Paragraph> paragraphs = new ArrayList<Paragraph>();
            paragraphs.add(new Paragraph(10,11));
            paragraphs.add(new Paragraph(12,30));
            paragraphs.add(new Paragraph(13,19));

            // when
            ArrayList<PageContent> pageContents = ParagraphsAndFigures.generatePages(paragraphs, 50);
            // then
            assertThat(transformToList(pageContents), is(asList("10", "11" ,"12", "13", "p0" ,"30", "19" , "p1" )));
        }

        @Test
        public void pageGeneration4() throws Exception {
            // given
            ArrayList<Paragraph> paragraphs = new ArrayList<Paragraph>();
            paragraphs.add(new Paragraph(10,11));
            paragraphs.add(new Paragraph(30,12));
            paragraphs.add(new Paragraph(13,16));

            // when
            ArrayList<PageContent> pageContents = ParagraphsAndFigures.generatePages(paragraphs, 50);
            // then
            assertThat(transformToList(pageContents), is(asList("10", "11" ,"12", "16", "p0" ,"30", "13" ,"p1" )));
        }

        @Test
        public void pageGeneration5() throws Exception {
            // given
            ArrayList<Paragraph> paragraphs = new ArrayList<Paragraph>();
            paragraphs.add(new Paragraph(31,32));
            paragraphs.add(new Paragraph(17,21));
            paragraphs.add(new Paragraph(30,35));

            // when
            ArrayList<PageContent> pageContents = ParagraphsAndFigures.generatePages(paragraphs, 50);
            // then
            assertThat(transformToList(pageContents), is(asList("31", "p0", "32", "17", "p1", "21", "p2", "30", "p3", "35", "p4")));
        }

        private List<String> transformToList(ArrayList<PageContent> pageContents) {
            List<String> result = new ArrayList<String>();
            for (int i = 0; i < pageContents.size(); i++) {
                PageContent pageContent = pageContents.get(i);
                if (!pageContent.texts.isEmpty()) {
                    for (Text text : pageContent.texts) {
                        result.add(String.valueOf(text.size));
                    }
                    result.add("p"+i);
                }
            }
            return result;
        }
    }``  `And structures:

    public class PageContent {
        int linesReserved;
        Collection texts = new ArrayList();` public boolean hasPicture() {
        for (Text text : texts) {
            if (text instanceof Figure) {
                return true;
            }
        }
        return false;
    }
}

public class Text {
    protected int size;
}
public class Figure extends Text{
}
public class Paragraph extends Text {

    public Paragraph(int size, int fSIze) {
        this.size = size;
        this.figure = new Figure();
        this.figure.size = fSIze;
    }

    Figure figure;
} 
```

            回答 #4

赞同：-1

时间：2012-06-30T10:26:28.353

首先，我建议构建递归方法。

从变体中选择最佳：从段落或图形开始。

在每一步从可能的变体中选择最好的：添加分页符，添加下一个图，添加下一段。简单的状态机将有助于消除禁止的变体（例如，一行中的 2 个分页符），但这不是必需的。

当检查递归解决方案时，您可以将其转换为自顶向下或自底向上的动态规划，如大多数有关 DP 的算法课程中所述。

```******

# math - 权力总和

> ID：11273182
> 
> 赞同：2
> 
> 时间：2012-06-30T09:55:37.477
> 
> 标签：math

我必须编写代码来评估以下序列的值：

`( pow(1,k) + pow(2,k) + ... + pow(n,k) ) % MOD` 对于给定的 n、k 和 MOD 值。

我试过在[互联网](http://www.wolframalpha.com/input/?i=f%28n%29=f%28n-1%29%2bn%5Ek&dataset=)上搜索它。我有一个方程![在此处输入图像描述](../Images/e5d8f660703bd16447d5a07296f23a76.png)。它包含 zeta 函数，实施起来似乎很困难。我想要任何简单的方法来实现它。请注意，n 的值很大，因此我们不能简单地使用暴力破解时间限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-18T13:03:00.287

只使用 Python

```
k=input("Enter value for K: ")
n=input("Enter value for N: ")
mod=input("Enter value for MOD: ")
sum=0
for i in range(1,n+1):
    sum+=pow(i,k)
result=sum % mod
print mod 
```

可能这段代码会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T10:06:17.653

[牛顿的身份](http://en.wikipedia.org/wiki/Newton%27s_identities)可能会有所帮助。计算以 1..n 为根的多项式的系数。那很琐碎。然后使用身份。

当我看到幂的总和时，这只是我想到的第一件事。

我认为它与模运算很好地兼容——只有乘法和加法。

我必须承认，牛顿的恒等式只是术语的重新排列，所以这里没有太多的速度增益。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T17:27:48.887

我同意 math.stackexchange.com 是一个更好的选择。

但这里有一些随机事实，根据参数，可能会使问题更易于管理。

首先，因数`MOD`，求解每个素数功率因数，然后使用中国剩余定理找到 的答案`MOD`。因此，不失一般性，您可以假设 MOD 是主要力量。

接下来，请注意`1^k + ... + MOD^k`总是能被 整除`MOD`。因此，您可以替换`n`为`n mod MOD`。

接下来，如果`MOD = p^i`and`j`不能被 整除`p`，那么`j^((p-1) * p^(i-1))`是`1`mod `MOD`，所以我们可以减小 的大小`k`。

当然，如果`(k, n) < MOD`和`MOD`是素数，这根本不会帮助你。（这取决于这个问题是如何出现的，很可能就是这种情况。）

（如果`k`足够小，您可以为总和生成明确的公式。但对于您来说，似乎`k`可以足够大以使该方法难以处理。）

# c++ - SFINAE成员函数存在测试问题

> ID：11273184
> 
> 赞同：5
> 
> 时间：2012-06-30T09:55:53.647
> 
> 标签：c++, sfinae

我有这个成员函数测试：

```
template <typename T> 
struct has_member {
    template <typename U>  static true_type  f(decltype(declval<U>().member()) *);
    template <typename>    static false_type f(...);
    static const bool value =  decltype(f<T>(0))::value;
}; 
```

当存在具有给定名称的成员函数时，如果该函数具有不带参数的重载，则它的计算结果为 true。对于这样的函数和 STL 容器，它可以正常工作，除了元素访问函数（前、后等），它总是评估为假。

这是为什么？我有 mingw g++ 4.7。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T10:27:13.160

那是因为这些函数返回引用，而您声明了一个指向返回值的指针，即指向引用的指针，这是不可能的。

快速修复将是：

```
template <typename U>  static true_type  
        f(typename remove_reference< decltype(declval<U>().member()) >::type *); 
```

**PS**：如果您在 SFINAE 失败时强制编译器给出错误并且您认为它不应该，则这些类型的错误可以（相对）容易解决。

我的意思是，在您的代码中，只需注释掉`false_type`并查看编译器的错误何时`true_type`是唯一的选择。在一堆毫无意义的行之间有以下内容：

```
test.cpp:9:50: error: forming pointer to reference type
    ‘__gnu_cxx::__alloc_traits<std::allocator<int> >::value_type& {aka int&}’ 
```

# oracle - 提取后 %NOTFOUND 可以返回 null 吗？

> ID：11273185
> 
> 赞同：10
> 
> 时间：2012-06-30T09:55:54.597
> 
> 标签：oracle, plsql, database-cursor

[这个问题](https://stackoverflow.com/q/11271739/458741)提出了一个非常有趣的观点；Oracle 文档中似乎存在关于`%NOTFOUND`获取后是否可能为空的矛盾。是吗？

引用[11g 文档](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/static.htm#LNPLS546)

> 注意：在示例 6-16 中，如果 FETCH 从不获取行，则 c1%NOTFOUND 始终为 NULL，并且永远不会退出循环。为防止无限循环，请改用此 EXIT 语句：EXIT WHEN c1%NOTFOUND OR (c1%NOTFOUND IS NULL);

该文档似乎直接自相矛盾，因为它还说了以下内容，这意味着在 fetch 之后`%NOTFOUND` *不能*为空。

> %NOTFOUND（与 %FOUND 的逻辑相反）返回：
> NULL 在打开显式游标之后但在第一次获取之前
> FALSE 如果从显式游标的最新获取返回一行 返回
> TRUE 否则

[10g 文档](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/cursor_attributes.htm#LNPLS01311)有一个类似的警告，这不一定是直接矛盾，因为它警告可能无法成功执行获取以显示此行为。

> 在第一次提取之前，%NOTFOUND 的计算结果为 NULL。如果 FETCH 从未成功执行，则 EXIT WHEN 条件永远不会为 TRUE，并且循环永远不会退出。为了安全起见，您可能希望改用以下 EXIT 语句：
> 
> 当 c1%NOTFOUND 或 c1%NOTFOUND 为空时退出；

在什么情况下 fetch 可能“失败”或`%NOTFOUND`在 fetch 执行后可能返回 null？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-01T12:11:24.713

我可以找到获取可能失败的情况：

```
declare
  i integer;
  cursor c is
    select 1 / 0 from dual;
begin
  open c;

  begin
    fetch c
      into i;
  exception
    when others then
      dbms_output.put_line('ex');
  end;

  if c%notfound is null then
    dbms_output.put_line('null');
  elsif c%notfound then
    dbms_output.put_line('true');
  else
    dbms_output.put_line('false');
  end if;
  close c;

end; 
```

但这只会使您的问题更强大，因为无论在 10g 还是在 11g 中，它都会评估为 null ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T03:57:22.357

我认为让你绊倒的部分是：

> 如果 FETCH 从未成功执行，则 EXIT WHEN 条件永远不会为 TRUE，并且循环永远不会退出。

在过去的某个地方，一定有一个看起来像这样的代码示例：

```
LOOP
  FETCH c1 INTO name;
  EXIT WHEN c1%NOTFOUND;
  -- Do stuff
END LOOP; 
```

给定这段代码，那么这个陈述就成立了。如果 fetch 从未执行（失败），则 %NOTFOUND 将为空。`EXIT WHEN`条件不会评估为 TRUE（null 评估为 false）。然后，确实，循环将永远持续下去。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-01T06:13:52.297

这是一种很容易测试的情况：

```
SET SERVEROUT ON;

DECLARE
  -- this cursor returns a single row
  CURSOR c1 IS
    SELECT 1 FROM dual WHERE rownum = 1;

  -- this cursor returns no rows
  CURSOR c2 IS
    SELECT 1 FROM dual WHERE 1=0;

  v1 number;
BEGIN
  OPEN c1;
  FETCH c1 INTO v1; -- this returns a record
  FETCH c1 INTO v1; -- this does not return a record
  IF c1%NOTFOUND THEN
    dbms_output.put_line('c1%NOTFOUND: TRUE');
  ELSIF c1%NOTFOUND IS NULL THEN
    dbms_output.put_line('c1%NOTFOUND: NULL');
  ELSE
    dbms_output.put_line('c1%NOTFOUND: FALSE');
  END IF;
  CLOSE c1;

  OPEN c2;
  FETCH c2 INTO v1; -- this does not return a record
  IF c2%NOTFOUND THEN
    dbms_output.put_line('c2%NOTFOUND: TRUE');
  ELSIF c2%NOTFOUND IS NULL THEN
    dbms_output.put_line('c2%NOTFOUND: NULL');
  ELSE
    dbms_output.put_line('c2%NOTFOUND: FALSE');
  END IF;
  CLOSE c2;
END;
/ 
```

Oracle APEX 4.1 上的脚本输出是（我认为 APEX 运行的是 Oracle 11gR2，但您可以轻松地在任何版本上运行该脚本）：

```
c1%NOTFOUND: TRUE
c2%NOTFOUND: TRUE 
```

根据此测试，`%NOTFOUND`执行 fetch 后不会为 NULL。这与 10g 和 11g 文档在`%NOTFOUND`属性的初始描述中所说的相匹配。关于循环永不退出的注释必须来自该示例的旧版本。由于它只是一个注释，我会说信任最初的描述并忽略该注释是安全的。

# apache - 如何在apache中用特定字符串重写链接

> ID：11273191
> 
> 赞同：0
> 
> 时间：2012-06-30T09:57:53.843
> 
> 标签：apache, mod-rewrite

我有一个双语 Drupal 网站。语言是 en 和 ar。管理层决定暂时停止 ar 现在我需要制定一个重写规则，以便在任何用户浏览 ar 页面时将其重定向到其相应的 en 页面

```
例如
http://mysite.com/ar/pageName
应重定向到
http://mysite.com/en/pageName
注意：这是我网站中的链接结构

```

我试过这个

```
重写条件 %{REQUEST_URI} ^/ar
RewriteRule .* en/$1 [R=302]

```

如果我删除它可以正常工作，`[R=302]`但我需要它，因为我稍后将重新激活这种语言，我不想影响我的 SEO。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T11:07:36.210

以下应该有效：

```
RewriteEngine On
RewriteRule ^ar/(.*) http://domain.com/en/$1 [R=302] 
```

将您的 .htaccess 放在同时拥有 en 和 ar 文件夹的父目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:21:11.057

我已经按照这个重写规则做到了

```
RewriteRule ^ar/(.*)[/]* en/$1 [L,R=302,NC]

```

# python - 使用 matplotlib 具有不同顺序颜色的堆叠条形图

> ID：11273196
> 
> 赞同：5
> 
> 时间：2012-06-30T09:58:47.000
> 
> 标签：python, charts, matplotlib, stacked

我是python的初学者。我正在尝试制作具有不同顺序颜色的水平条形图。

我有一个如下所示的数据集：

```
dataset = [{'A':19, 'B':39, 'C':61, 'D':70},
           {'A':34, 'B':68, 'C':32, 'D':38},
           {'A':35, 'B':45, 'C':66, 'D':50},
           {'A':23, 'B':23, 'C':21, 'D':16}]
data_orders = [['A', 'B', 'C', 'D'], 
               ['B', 'A', 'C', 'D'], 
               ['A', 'B', 'D', 'C'], 
               ['B', 'A', 'C', 'D']] 
```

第一个列表包含数字数据，第二个列表包含每个数据项的顺序。我在这里需要第二个列表，因为在我的案例中展示它们时，A、B、C 和 D 的顺序对于数据集至关重要。

使用上面的数据，我想制作一个如下图所示的堆积条形图。它是我用 MS Excel 手动制作的。我现在希望做的是使用 Matplotlib 和上述数据集以更自动化的方式制作这种类型的条形图。如果可能的话，我还想在图表中添加一个图例。

![具有不同顺序颜色的堆叠条形图（示例）](../Images/d509e717dfa9ef730c03313b12dbae0c.png)

实际上，我完全迷失在自己尝试这个过程中。任何帮助都会非常非常有帮助。非常感谢您的关注！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-30T13:22:42.170

这是一个很长的程序，但它有效，我添加了一个虚拟数据来区分行数和列数：

```
import numpy as np
from matplotlib import pyplot as plt

dataset = [{'A':19, 'B':39, 'C':61, 'D':70},
           {'A':34, 'B':68, 'C':32, 'D':38},
           {'A':35, 'B':45, 'C':66, 'D':50},
           {'A':23, 'B':23, 'C':21, 'D':16},
           {'A':35, 'B':45, 'C':66, 'D':50}]
data_orders = [['A', 'B', 'C', 'D'], 
               ['B', 'A', 'C', 'D'], 
               ['A', 'B', 'D', 'C'], 
               ['B', 'A', 'C', 'D'],
               ['A', 'B', 'C', 'D']]
colors = ["r","g","b","y"]
names = sorted(dataset[0].keys())
values = np.array([[data[name] for name in order] for data,order in zip(dataset, data_orders)])
lefts = np.insert(np.cumsum(values, axis=1),0,0, axis=1)[:, :-1]
orders = np.array(data_orders)
bottoms = np.arange(len(data_orders))

for name, color in zip(names, colors):
    idx = np.where(orders == name)
    value = values[idx]
    left = lefts[idx]
    plt.bar(left=left, height=0.8, width=value, bottom=bottoms, 
            color=color, orientation="horizontal", label=name)
plt.yticks(bottoms+0.4, ["data %d" % (t+1) for t in bottoms])
plt.legend(loc="best", bbox_to_anchor=(1.0, 1.00))
plt.subplots_adjust(right=0.85)
plt.show() 
```

结果图是：

![在此处输入图像描述](../Images/1da26ec29080958edcae3812e61b2678.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T10:02:59.723

```
>>> dataset = [{'A':19, 'B':39, 'C':61, 'D':70},
           {'A':34, 'B':68, 'C':32, 'D':38},
           {'A':35, 'B':45, 'C':66, 'D':50},
           {'A':23, 'B':23, 'C':21, 'D':16}]

>>> data_orders = [['A', 'B', 'C', 'D'], 
               ['B', 'A', 'C', 'D'], 
               ['A', 'B', 'D', 'C'], 
               ['B', 'A', 'C', 'D']]
>>> for i,x in enumerate(data_orders):
     for y in x:
        #do something here with dataset[i][y]  in matplotlib 
```

# android - 错误消息“java.net.SocketException：套接字失败：EACCES（权限被拒绝）”

> ID：11273197
> 
> 赞同：189
> 
> 时间：2012-06-30T09:58:53.230
> 
> 标签：android, json

我收到错误消息

> java.net.SocketException：套接字失败：EACCES（权限被拒绝）

当我尝试应用下面的代码时。这是我调用的函数，并给了我这个异常。

```
public void run() {
    // TODO Auto-generated method stub
    URL myurl = null;

    try {
        myurl = new URL("http://10.0.2.2/list.JSON");
    }
    catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    try {
        URLConnection myconn = myurl.openConnection();
        InputStream in = new BufferedInputStream(myconn.getInputStream());
        InputStreamReader reader = new InputStreamReader(in);
        BufferedReader br = new BufferedReader(reader);
        String line;
        StringBuilder sb = new StringBuilder();
        while ((line=br.readLine()) != null)
        {
            sb.append(line);
            //Toast.makeText(getApplicationContext(), "I enter here", Toast.LENGTH_LONG).show();
        }
        jsoncode = sb.toString();
    }
    catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    threading = true;
    super.run();
} 
```

[日志猫](https://sites.google.com/site/androidhowto/how-to-1/save-logcat-to-a-text-file)：

```
06-30 11:33:21.457: W/System.err(619): java.net.SocketException: socket failed: EACCES (Permission denied)
06-30 11:33:21.467: W/System.err(619):     at libcore.io.IoBridge.socket(IoBridge.java:573)
06-30 11:33:21.467: W/System.err(619):     at java.net.PlainSocketImpl.create(PlainSocketImpl.java:201)
06-30 11:33:21.479: W/System.err(619):     at java.net.Socket.checkOpenAndCreate(Socket.java:663)
06-30 11:33:21.479: W/System.err(619):     at java.net.Socket.connect(Socket.java:807)
06-30 11:33:21.479: W/System.err(619):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:77)
06-30 11:33:21.479: W/System.err(619):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
06-30 11:33:21.479: W/System.err(619):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
06-30 11:33:21.479: W/System.err(619):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
06-30 11:33:21.479: W/System.err(619):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
06-30 11:33:21.487: W/System.err(619):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
06-30 11:33:21.487: W/System.err(619):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
06-30 11:33:21.497: W/System.err(619):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
06-30 11:33:21.497: W/System.err(619):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
06-30 11:33:21.497: W/System.err(619):     at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
06-30 11:33:21.497: W/System.err(619):     at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
06-30 11:33:21.497: W/System.err(619):     at com.apk.PItestActivity$connection.run(PItestActivity.java:190)
06-30 11:33:21.507: W/System.err(619): Caused by: libcore.io.ErrnoException: socket failed: EACCES (Permission denied)
06-30 11:33:21.517: W/System.err(619):     at libcore.io.Posix.socket(Native Method)
06-30 11:33:21.517: W/System.err(619):     at libcore.io.BlockGuardOs.socket(BlockGuardOs.java:169)
06-30 11:33:21.527: W/System.err(619):     at libcore.io.IoBridge.socket(IoBridge.java:558)
06-30 11:33:21.527: W/System.err(619):     ... 15 more 
```

这是我的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.apk"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="14" />
    <permission android:name="android.permission.INTERNET"></permission>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".PItestActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="addfriend"></activity>
        <activity android:name="updateDetails"></activity>
        <activity android:name="Details"></activity>
        <activity android:name="updateimage"></activity>
    </application>
</manifest> 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：372
> 
> 时间：2012-06-30T10:03:31.690

尝试，

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

代替，

```
<permission  android:name="android.permission.INTERNET"></permission> 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-06-30T10:04:38.517

尝试这个：

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

你`activity names`必须是这样的`capital letters`：

```
<activity android:name=".Addfriend"/>
    <activity android:name=".UpdateDetails"/>
    <activity android:name=".Details"/>
    <activity android:name=".Updateimage"/> 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2017-01-28T08:06:22.380

试试看。

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" /> 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2015-12-22T10:11:53.743

尝试移出标签`<uses-permission>`。`<application>`

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2019-10-16T18:08:33.343

**卸载**设备上的应用程序，**然后重新安装**为我修复了它。

尝试了所有其他选项，没有。终于找到[这个帖子了](https://stackoverflow.com/questions/56266801/java-net-socketexception-socket-failed-eperm-operation-not-permitted)。这是在添加权限（如下）和清理构建之后。

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-04-09T06:39:44.043

**可以通过在 android 清单文件中放置以下行来修复它：**

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" /> 
```

[在此处输入图像描述](https://i.stack.imgur.com/B0UVa.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-05-28T02:12:06.867

如果您使用模拟器进行测试，那么您必须`<uses-permission android:name="android.permission.INTERNET" />`只使用并忽略`<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />`它。这对我有用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-12-18T06:47:31.010

将这些源代码添加到您的 Java 文件中，如下所示：

```
StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder().detectDiskReads().detectDiskWrites().detectNetwork().penaltyLog().build()); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-01-13T09:36:12.377

你可能需要做 AndroidStudio - Build - Clean

如果您通过文件系统或 Git 更新清单，它不会获取更改。

# ajax - 从颜色框中执行父页面功能

> ID：11273200
> 
> 赞同：0
> 
> 时间：2012-06-30T09:59:58.537
> 
> 标签：ajax, colorbox

我正在尝试执行一个将在 colorbox 关闭后运行的函数。此函数旨在通过使用关闭的颜色框中新插入的值刷新页面上的选择元素来更新基础页面。我已经阅读了一些可以在 cbox_closed 事件上运行函数的地方。如何引用父页面的 ajax 函数来更新“选择”元素？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T00:08:58.393

一般来说，ColorBox 在父级的整体执行上下文中运行。您应该像从父级中的其他 js 中一样引用所需的元素。

例如，如果父页面有一个 ID 为“myElement”的元素，您可以在通过 cbox_closed 事件触发器执行的函数中引用“#myElement”。

为获得更高的特异性，请为元素添加前缀，例如**parent.elementID**或**parent.formname.elementID**。

# scala - 在哪里可以找到 Scala 类型推断的详细信息？

> ID：11273201
> 
> 赞同：4
> 
> 时间：2012-06-30T10:00:31.157
> 
> 标签：scala, type-inference

我想了解类型检查/算法的工作原理。这很复杂，而且有很多案例。是否有任何好的教程/文档（我知道语言规范，但 IMO，它太难读了）。

我只是想了解 Scala 的类型推断如何在幕后工作的细节。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T13:20:07.147

它实际上并不是很复杂。可以在 Odersky/Spoon/Venners 的书 'Programming in Scala' （​​第 1 版；在第二版中我相信是第 16.10 节）的第 16.9 节中找到非常简洁的描述：

[http://www.artima.com/pins1ed/working-with-lists.html#16.9](http://www.artima.com/pins1ed/working-with-lists.html#16.9)

* * *

因此，如果这太基本了，也许以下论文可以帮助您：

*   Vincent Cremet、François Garillot、Sergueï Lenglet 和 Martin Odersky，“用于 Scala 类型检查的核心微积分”，载于：计算机科学讲义，2006 年，第 4162/2006 卷，1-23，DOI：10.1007/11821069_1 (Springer)。

您可以通过 Google Scholar[找到可访问的 PDF 版本。](https://hal.inria.fr/hal-00903812/document)

* * *

或者您可能想在[https://github.com/scala/scala/blob/2.12.x/](https://github.com/scala/scala/blob/2.12.x/src/compiler/scala/tools/nsc/typechecker/Infer.scala) ​​src/compiler/scala/tools/nsc/typechecker/Infer.scala 中查看 Scala 2.12.x 的源代码。

# c# - 从 .Net 客户端将图像发送到 SOAP 1.0 Web 服务

> ID：11273206
> 
> 赞同：2
> 
> 时间：2012-06-30T10:01:10.430
> 
> 标签：c#, .net, web-services, soap, wsdl

我需要将图像发送到用 PHP 实现的 SOAP Web 服务。

服务的 WSDL 如下所示...

```
<xsd:complexType name="Product">
  <xsd:all>
    <xsd:element name="ProductId" type="xsd:int"/>   
    <xsd:element name="Image01" type="xsd:base64Array"/>
  </xsd:all>
</xsd:complexType> 
```

当我在 C# 应用程序中引用此服务时，用于的数据类型`Image01`是`String`.

如何从磁盘获取图像并以正确的方式对其进行编码以通过这种复杂类型发送它？

将不胜感激示例代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T10:05:56.273

您可以使用此代码加载图像，转换为 Byte[] 并转换为 Base64

```
Image myImage = Image.FromFile("myimage.bmp");
MemoryStream stream = new MemoryStream();
myImage.Save(stream, System.Drawing.Imaging.ImageFormat.Bmp);
byte[] imageByte = stream.ToArray();
string imageBase64 = Convert.ToBase64String(imageByte);
stream.Dispose();
myImage.Dispose(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T10:13:15.317

将图像加载到`byte[]`类型中，然后通过`Convert.ToBase64String()`

[这个问题](https://stackoverflow.com/questions/1080442/how-to-convert-an-stream-into-a-byte-in-c)有一个很好的代码示例，可以将文件从磁盘加载到字节[]

```
public byte[] StreamToByteArray(string fileName)
{
byte[] total_stream = new byte[0];
using (Stream input = File.Open(fileName, FileMode.Open, FileAccess.Read))
{
    byte[] stream_array = new byte[0];
    // Setup whatever read size you want (small here for testing)
    byte[] buffer = new byte[32];// * 1024];
    int read = 0;

    while ((read = input.Read(buffer, 0, buffer.Length)) > 0)
    {
        stream_array = new byte[total_stream.Length + read];
        total_stream.CopyTo(stream_array, 0);
        Array.Copy(buffer, 0, stream_array, total_stream.Length, read);
        total_stream = stream_array;
    }
}
return total_stream;
} 
```

所以你就这样做

```
Convert.ToBase64String(this.StreamToByteArray("Filename")); 
```

And pass that back via the web service call. I've avoided using the `Image.FromFile` call so you can re-use this example with other non image calls to send binary information over a webservice. But if you wish to only ever use an Image then substitute this block of code for an `Image.FromFile()` command.

# android - 当我运行我的应用程序时，进程在模拟器上意外停止

> ID：11273209
> 
> 赞同：0
> 
> 时间：2012-06-30T10:01:28.620
> 
> 标签：android, android-emulator

当我运行我的应用程序时，我在模拟器上意外停止了进程。这是我的 logcat 详细信息：

```
06-30 15:09:46.126: D/dalvikvm(520): GC_EXTERNAL_ALLOC freed 46K, 53% free 2551K/5379K, external 1625K/2137K, paused 72ms
06-30 15:09:50.146: D/dalvikvm(520): GC_EXTERNAL_ALLOC freed 11K, 53% free 2580K/5379K, external 4697K/5866K, paused 51ms
06-30 15:09:51.196: D/AndroidRuntime(520): Shutting down VM
06-30 15:09:51.196: W/dalvikvm(520): threadid=1: thread exiting with uncaught exception (group=0x40015560)
06-30 15:09:51.217: E/AndroidRuntime(520): FATAL EXCEPTION: main
06-30 15:09:51.217: E/AndroidRuntime(520): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mesha.firstand/com.mesha.firstand.firstl}: java.lang.NullPointerException
06-30 15:09:51.217: E/AndroidRuntime(520):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
06-30 15:09:51.217: E/AndroidRuntime(520):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
06-30 15:09:51.217: E/AndroidRuntime(520):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
06-30 15:09:51.217: E/AndroidRuntime(520):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
06-30 15:09:51.217: E/AndroidRuntime(520):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-30 15:09:51.217: E/AndroidRuntime(520):  at android.os.Looper.loop(Looper.java:123)
06-30 15:09:51.217: E/AndroidRuntime(520):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-30 15:09:51.217: E/AndroidRuntime(520):  at java.lang.reflect.Method.invokeNative(Native Method)
06-30 15:09:51.217: E/AndroidRuntime(520):  at java.lang.reflect.Method.invoke(Method.java:507)
06-30 15:09:51.217: E/AndroidRuntime(520):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-30 15:09:51.217: E/AndroidRuntime(520):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-30 15:09:51.217: E/AndroidRuntime(520):  at dalvik.system.NativeStart.main(Native Method)
06-30 15:09:51.217: E/AndroidRuntime(520): Caused by: java.lang.NullPointerException
06-30 15:09:51.217: E/AndroidRuntime(520):  at com.mesha.firstand.firstl.onCreate(firstl.java:16)
06-30 15:09:51.217: E/AndroidRuntime(520):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-30 15:09:51.217: E/AndroidRuntime(520):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
06-30 15:09:51.217: E/AndroidRuntime(520):  ... 11 more
06-30 15:09:54.516: I/Process(520): Sending signal. PID: 520 SIG: 9
06-30 15:17:01.117: D/dalvikvm(539): GC_EXTERNAL_ALLOC freed 48K, 53% free 2551K/5379K, external 1625K/2137K, paused 52ms
06-30 15:17:03.237: D/dalvikvm(539): GC_EXTERNAL_ALLOC freed 11K, 53% free 2580K/5379K, external 4697K/5866K, paused 52ms
06-30 15:17:04.327: D/AndroidRuntime(539): Shutting down VM
06-30 15:17:04.327: W/dalvikvm(539): threadid=1: thread exiting with uncaught exception (group=0x40015560)
06-30 15:17:04.346: E/AndroidRuntime(539): FATAL EXCEPTION: main
06-30 15:17:04.346: E/AndroidRuntime(539): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mesha.firstand/com.mesha.firstand.firstl}: java.lang.NullPointerException
06-30 15:17:04.346: E/AndroidRuntime(539):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
06-30 15:17:04.346: E/AndroidRuntime(539):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
06-30 15:17:04.346: E/AndroidRuntime(539):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
06-30 15:17:04.346: E/AndroidRuntime(539):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
06-30 15:17:04.346: E/AndroidRuntime(539):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-30 15:17:04.346: E/AndroidRuntime(539):  at android.os.Looper.loop(Looper.java:123)
06-30 15:17:04.346: E/AndroidRuntime(539):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-30 15:17:04.346: E/AndroidRuntime(539):  at java.lang.reflect.Method.invokeNative(Native Method)
06-30 15:17:04.346: E/AndroidRuntime(539):  at java.lang.reflect.Method.invoke(Method.java:507)
06-30 15:17:04.346: E/AndroidRuntime(539):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-30 15:17:04.346: E/AndroidRuntime(539):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-30 15:17:04.346: E/AndroidRuntime(539):  at dalvik.system.NativeStart.main(Native Method)
06-30 15:17:04.346: E/AndroidRuntime(539): Caused by: java.lang.NullPointerException
06-30 15:17:04.346: E/AndroidRuntime(539):  at com.mesha.firstand.firstl.onCreate(firstl.java:16)
06-30 15:17:04.346: E/AndroidRuntime(539):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-30 15:17:04.346: E/AndroidRuntime(539):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
06-30 15:17:04.346: E/AndroidRuntime(539):  ... 11 more
06-30 15:17:08.717: I/Process(539): Sending signal. PID: 539 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T10:14:50.010

看着日志

> 15:17:04.346: E/AndroidRuntime(539): 由: java.lang.NullPointerException 06-30 15:17:04.346: E/AndroidRuntime(539): at com.mesha.firstand.firstl.onCreate(firstl.爪哇：16）

您将看到 a`NullPointerException`在您的活动 firstl 的第 16 行中抛出。

如果您需要更多帮助，请发布您的 firstl 活动代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T10:16:14.807

在看到你的 logcat 之后，这些可能是可能的

**案例1：**确保您设置正确的布局：

```
public class firstl extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // The activity is being created.
          setContentView(R.layout.main);//MAKE SURE YOU ARE SETTING RIGHT LAYOUT
    } 
```

**案例 2：**确保您使用正确的 id 来访问代码中定义的 xml 布局中的视图

**案例 3：**确保您在 Manifest.xml 中使用正确的名称注册 Activity：

```
<Activity android:name=".firstl" /> 
```

# python - 在 Eclipse 中编码 Python 时出错

> ID：11273212
> 
> 赞同：1
> 
> 时间：2012-06-30T10:02:06.297
> 
> 标签：python, eclipse, eclipse-plugin, pydev

我一直在寻找合适的 Python IDE。在这个论坛和其他网站上谷歌搜索并寻找所需的工具时，我终于意识到大多数专业程序员都建议使用 Eclipse。如您所知，我为此下载了 Eclipse 和 Pydev 插件，并开始尝试配置和准备 Eclipse 以供使用和编程。作为初学者和 Python 新手，坦率地说，我在安装和配置 Eclipse 时遇到了许多严重的障碍，特别是在安装 Pydev 插件时。经过这么多的努力，我终于成功完成了配置和安装，但是当我运行 Eclipse 并尝试构建一个新项目时，当我引入一个新的模块和代码时，当我调试和运行我的代码时，我得到了这样的错误"

“执行命令行时发生异常。

```
Cannot run program "C:\Program Files\Python3\python.exe" (in directory "C:\EclipseWorkspace\csse120\Hello world"): CreateProcess error=3, The system cannot find the path specified" 
```

我在论坛和主题中寻找相同或类似的问题，但唯一的建议是这可能是由于 python 3.0（意味着我应该在选择新项目时选择 Python 2.6 或 2.7），但这并没有解决我的问题.

有人请帮助我：我应该怎么做才能解决这个问题和问题。我很感激并感谢蚂蚁的指导和帮助。

我提前感谢大家的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T10:27:07.883

我有一段时间没用过eclipse了，但是通常那个错误只是意味着eclipse在指定的路径中找不到指定的文件。我知道这听起来可能很愚蠢，但你确定你的系统中有 C:\Program Files\Python3\python.exe 吗？

# jquery - Mysql查询用JSP和JQuery不用刷新

> ID：11273216
> 
> 赞同：1
> 
> 时间：2012-06-30T10:02:43.473
> 
> 标签：jquery, mysql, jsp, tomcat7

当我按下提交按钮并显示它返回的行数而不刷新时，我想生成一个 SQL 查询。我在下面设法做到了这一点，但它刷新并清除了所有内容，并且值总是`0`. 我正在使用 Tomcat 和 NetBeans。

*   我正在使用提交功能，因为在我解决了这个问题后，如果发生任何事情，我将返回 false。

*   `msg`跨度是将显示返回的行的位置。

*   `Funciones.setSql`使用所选选项的值生成 SQL 并存储在静态字符串中。然后`Funciones.count()`只是进行查询并将行数存储在一个名为 的变量中`numF`。

*   `Funciones.lista()`使用一个特定字段并设置一个值（id）生成数据库中的所有数据。

JSP：

```
<div data-role="page" id="realizadas">
    <%@include file="header.jsp"%>
    <div data-role="content">
        <form name="tareasr" id="tareasr" data-mini="true" method="post">
            <fieldset data-mini="true" data-role="controlgroup" data-type="horizontal"> 
                <select data-inline="true" name="vina" id="vina">
                    <option value="0">VIÑAS</option>
                    <%=Funciones.lista("VINA","option")%>
                </select>
            </fieldset>
            <input data-icon="search" type="submit"  value="Buscar" />
        </form>
        <b><span id="msg"></span></b>

        <script>

            $("#tareasr").submit(function() {
            <jsp:useBean id="formHandler" class="ges.FormBean">
                <jsp:setProperty name="formHandler" property="*"/>
            </jsp:useBean>
                var men="Num: ";
                <%Funciones.setSql(formHandler.getVina()); 
                Funciones.count();%>
                men+=<%=Funciones.numF%>;
                alert(men);
              $("#msg").text(men).show().fadeOut(3000);
            });
        </script>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T10:11:55.723

您将 Java 代码和 JavaScript 代码混合在一起，就好像它们是同一件事一样。应避免在 JSP 中使用 Java 代码，如果存在，则必须在 scriptlet 标记 ( `<% ... %>`) 中。当执行 JSP 并生成 HTML 和 JavaScript 代码时，Thsi Java 代码在服务器端执行。

然后，在浏览器中，可以执行 JavaScript 代码。此 JavaScript 代码无法调用用于在服务器端生成 HTML 的 Java 对象的方法。浏览器中不存在 Java。如果您需要从浏览器调用服务器端 Java 代码，则必须向服务器发送一个新的 HTTP 请求（通过单击链接、提交表单或发送 AJAX 请求）。

# c# - 如果用户不活动，则注销应用程序

> ID：11273219
> 
> 赞同：0
> 
> 时间：2012-06-30T10:03:13.330
> 
> 标签：c#, .net, winforms

我们有一个要求，如果用户在特定时间段内没有在应用程序上使用鼠标或键盘进行任何操作，则需要从应用程序中注销活动用户。该应用程序有 40 多个屏幕

是否有任何内置功能 .net 支持来处理此类需求？处理需求的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T10:17:23.980

您可以通过 PInvoke 使用[GetLastInputInfo](http://www.pinvoke.net/default.aspx/user32.GetLastInputInfo)。您还可以看到文章[如何在 C# 中使用和不使用平台调用检查用户不活动状态](http://www.codeproject.com/Articles/9104/How-to-check-for-user-inactivity-with-and-without)

# asp.net - 如何从 Asp.net 中的表中获取选定的选项值？

> ID：11273224
> 
> 赞同：0
> 
> 时间：2012-06-30T10:03:32.123
> 
> 标签：asp.net, .net, html

我在asp.net中动态创建了一个表，一行中的每个单元格分别包含选项按钮和文本框。一行中的选项按钮是分组的。所以，一行中只能选择一个选项按钮。我的表包含m列和 n 行。

现在我想在提交表单时在每一行中获取选定的选项按钮值。

![在此处输入图像描述](../Images/f8ecfd0566c099a2e56a897c5cf17883.png)

上表包含 3 行 4 列。

行 :1 -> 包含标题。row :2 ->[2,0] 是选项按钮，[2,1] 是文本框，[2,2] 是选项，[2,3] 是文本框。. . Last Row -> 是一个 sumbit 按钮。

所以现在我想在按下提交按钮时获取每​​行的选定选项按钮值。

请指导我摆脱这个问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T10:14:48.873

**尝试这样的事情**

注意：这里`tbl`是一个`HtmlTable`控制实例

```
foreach (TableRow row in tbl.Rows)
        {
            foreach (TableCell cell in r.Cells)
            { 
                RadioButton r = c.FindControl("radiobuttonID");
                // find your radiobutton & get needed values from that
             }
        } 
```

# java - 推特列表 twitter4j

> ID：11273225
> 
> 赞同：0
> 
> 时间：2012-06-30T10:03:41.413
> 
> 标签：java, android, list, twitter

您好，我想在 twitter4j 列表中显示用户时间线，因为我是 java 新手，我只是不知道该怎么做。我在网上搜索但找不到任何有用的东西。所以我的问题是：有人知道如何在 android 的列表中显示用户时间线吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T23:22:48.230

twitter4j-core-2.2.6

```
Twitter tw = new TwitterFactory().getInstance();

// some userlist
UserList userList = tw.getUserLists("screen name", -1).get(0);
System.out.println(userList.getName());

int listId = userList.getId();
ResponseList<Status> userListStatuses = tw.getUserListStatuses(listId, new Paging(1));

for (Status status : userListStatuses) {
    System.out.println(status.getText());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T10:14:56.447

根据**[twitter4j 代码示例](http://twitter4j.org/en/code-examples.html)**

```
Twitter twitter = new TwitterFactory().getInstance();
    List<Status> statuses = twitter.getFriendsTimeline();
    System.out.println("Showing friends timeline.");
    for (Status status : statuses) {
        System.out.println(status.getUser().getName() + ":" +
                           status.getText());
    } 
```

请查看 twitter4j 的官方文档和代码示例

# xcode - 打开助手编辑器时xcode崩溃

> ID：11273232
> 
> 赞同：0
> 
> 时间：2012-06-30T10:05:05.977
> 
> 标签：xcode, xcode4.3

得到了新的 Retina MacBook，它在 xCode 上的表现并不好。如果我创建一个新项目，它可以工作，但如果我触发了助理编辑器，它将冻结。如果我保存一个新项目并重新打开它，它将冻结。我确实安装了 4.5 DP 并卸载了它和最新的非测试版 xcode，问题仍然存在。有谁知道可能是什么问题？如果我创建一个新的用户帐户，xcode 行为正常。有人知道修复吗？崩溃太大，我无法发布。

```
Date/Time:       2012-06-30 03:10:29 -0700
OS Version:      10.7.4 (Build 11E2620)
Architecture:    x86_64
Report Version:  9

Command:         Xcode
Path:            /Applications/Xcode.app/Contents/MacOS/Xcode
Version:         4.3.3 (1178)
Build Version:   3
Project Name:    IDEApplication
Source Version:  1178000000000000
App Item ID:     497799835
App External ID: 8553856
Parent:          launchd [111]

PID:             234
Event:           hang
Duration:        1.76s
Steps:           18 (100ms sampling interval)

Pageins:         44
Pageouts:        0

Process:         Xcode [234]
Path:            /Applications/Xcode.app/Contents/MacOS/Xcode
Architecture:    x86_64
UID:             501

  Thread 0x810        DispatchQueue 1
  User stack:
    18 ??? (in Xcode) [0x107b73eec]
      18 NSApplicationMain + 867 (in AppKit) [0x7fff85edf244]
        18 -[NSApplication run] + 555 (in AppKit) [0x7fff85c630c6]
          18 -[IDEApplication sendEvent:] + 366 (in IDEKit) [0x1085c2dd1]
            18 -[NSApplication sendEvent:] + 4282 (in AppKit) [0x7fff85ccc536]
              18 -[NSApplication _handleKeyEquivalent:] + 526 (in AppKit) [0x7fff85dd3175]
                18 -[NSMenu performKeyEquivalent:] + 281 (in AppKit) [0x7fff85dd4524]
                  18 -[NSCarbonMenuImpl performActionWithHighlightingForItemAtIndex:] + 125 (in AppKit) [0x7fff85e56932]
                    18 -[NSMenuItem _corePerformAction] + 399 (in AppKit) [0x7fff85e56bfb]
                      18 -[IDEApplication sendAction:to:from:] + 154 (in IDEKit) [0x1085c7096]
                        18 -[DVTApplication sendAction:to:from:] + 318 (in DVTKit) [0x107e76866]
                          18 -[NSApplication sendAction:to:from:] + 139 (in AppKit) [0x7fff85d69f7e]
                            18 -[NSObject performSelector:withObject:] + 61 (in CoreFoundation) [0x7fff8a15270d]
                              18 -[IDEWorkspaceTabController _changeToEditorMode:] + 361 (in IDEKit) [0x108728088]
                                18 _NSSetIntValueAndNotify + 259 (in Foundation) [0x7fff86f8353f]
                                  18 -[IDEEditorArea setEditorMode:] + 384 (in IDEKit) [0x108604a61]
                                    18 -[IDEEditorArea _refreshEditorContextsAndPreserveCurrentEditorHistoryStack:] + 642 (in IDEKit) [0x108604d8e]
                                      18 +[DVTLayoutView_ML _recursivelyLayoutSubviewsOfView:populatingSetWithLaidOutViews:] + 108 (in DVTKit) [0x107e858ec]
                                        18 +[DVTLayoutView_ML 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-11-27T17:38:14.160

对我来说，解决方案很简单：

1.  关闭 Xcode
2.  从 myProject.xcodeproj（或 .xcworkspace，如果您使用的是 cocoapods）中删除以下文件夹/文件（右键单击文件并选择“显示包内容”）

    *   /xcuserdata
    *   /project.xcworkspace
3.  重新打开 Xcode 并享受

崩溃是由于项目的用户数据内容损坏而发生的。

另外，您应该注意，删除这些文件后，窗口大小和位置将重置，打开的选项卡将全部关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T03:53:27.923

我在我的 Retina MacBook 上遇到了类似的问题。解决方法是在 Finder 中为 Xcode 指定“以低分辨率打开”。来自[http://support.apple.com/kb/HT5266](http://support.apple.com/kb/HT5266)：

1.  如果应用程序当前处于打开状态，请退出该应用程序。
2.  在 Finder 中，从前往菜单中选择应用程序。
3.  在打开的应用程序文件夹中，单击应用程序的图标，使其突出显示。
4.  从文件菜单中选择获取信息。
5.  在“以低分辨率打开”旁边放置复选标记以启用低分辨率模式。
6.  关闭窗口并双击应用程序以重新打开它。

这确实会对文本质量产生影响，尽管它并不可怕（主观）。希望苹果能尽快更新 Xcode。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-08-30T08:42:46.697

我面临同样的问题....我在按照屏幕截图进行更改后解决了它 -

[![在此处输入图像描述](../Images/fa3c6092243f4719e428ad662640684d.png)](https://i.stack.imgur.com/qwusl.png)

这个对我有用。

# php - 单击按钮时将数据从 MySQL 数据库加载到 HTML 文本框

> ID：11273234
> 
> 赞同：2
> 
> 时间：2012-06-30T10:05:07.073
> 
> 标签：php, mysql, html

我有一个用于更新现有记录的小表格。

![在此处输入图像描述](../Images/2b8c6f5fe7cdace82776ef80884ca3c3.png)

我正在使用 PHP将**Service ID加载到下拉框中。**当用户单击*加载*按钮时，它应该在下面的文本框中显示与该 ID 相关的其他详细信息。这是我到目前为止的代码。

```
<html>
<head>
</head>
<body>

<?php
//Database initialization
require_once("db_handler.php");

$conn = iniCon();
$db = selectDB($conn);

$query = "SELECT * FROM taxi_services ORDER BY SID";
$result2 = mysql_query($query, $conn);

?>

<div id="upserv">
<b id="caption2">Update location</b>
<br/><br/>
    <form name="upServForm" action="<?php echo $PHP_SELF; ?>" method="post" >
        <?php
        $dropdown = "<select name='codes'>";
        while($row = mysql_fetch_assoc($result2)) 
        {
            $dropdown .= "\r\n<option value='{$row['SID']}'>{$row['SID']}</option>";
        }
        $dropdown .= "\r\n</select>";
    ?>
     Service ID  <?php echo $dropdown; ?> <input type="submit" value="Load" name="loadbtn">
        <table width="300" border="0">
          <tr>
            <td>Name</td>
            <td><input type="text" name="upName" style="text-align:right" value="<? echo $savedName; ?>" /></td>
          </tr>
          <tr>
            <td>Cost</td>
            <td><input type="text" name="upCost" style="text-align:right" value="<? echo $savedCost; ?>" /></td>
          </tr>
          <tr>
            <td>Active</td>
            <td><input type="checkbox" name="upActive" value="<? echo $savedActive; ?>" /></td>
          </tr>
        </table>
</div>
<br/>
<div id="buttons">
    <input type="reset" value="Clear" /> <input type="submit" value="Save" name="updatebtn" />
</div>
    </form>

<?php

if(isset($_POST["loadbtn"]))
{
    $id = $_POST["codes"];

    $query = "SELECT Name, Cost, Active FROM taxi_services WHERE SID = '$id' ";
    $result = mysql_query($query, $conn);
    $details = mysql_fetch_array($result);

    $savedName = $details["Name"];
    $savedCost = $details["Cost"];
    $savedActive = $details["Active"];
}

?>

</body>
</html> 
```

查询执行得很好，但数据没有显示在文本框中。谁能告诉我我在这里缺少什么？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T10:12:44.460

您的查询必须在输出之前：

还要注意`(integer)`id 的类型转换以防止 sql 注入。

`$PHP_SELF` [另请注意http://php.about.com/od/learnphp/qt/_SERVER_PHP.htm](http://php.about.com/od/learnphp/qt/_SERVER_PHP.htm)的安全问题 我将代码更改为`$_SERVER['SCRIPT_NAME']`

还要注意不要`register_globals`在配置中使用和禁用它（使用`$_SERVER['SCRIPT_NAME'] instead of`$SCRIPT_NAME`）：[http ://www.php.net/manual/en/security.globals.php](http://www.php.net/manual/en/security.globals.php)

如果您从一本书中学习 php，并且这是基于本书中的源代码，您应该立即将其扔掉。

```
<?php

//Database initialization
require_once("db_handler.php");

$conn = iniCon();
$db = selectDB($conn);

$query = "SELECT * FROM taxi_services ORDER BY SID";
$result2 = mysql_query($query, $conn);

if(isset($_POST["loadbtn"]))
{
    $id = (integer) $_POST["codes"];

    $query = "SELECT Name, Cost, Active FROM taxi_services WHERE SID = '$id' ";
    $result = mysql_query($query, $conn);
    $details = mysql_fetch_array($result);

    $savedName = $details["Name"];
    $savedCost = $details["Cost"];
    $savedActive = $details["Active"];
}

?>

<html>
<head>
</head>
<body>

<div id="upserv">
<b id="caption2">Update location</b>
<br/><br/>
    <form name="upServForm" action="<?php echo $_SERVER['SCRIPT_NAME']; ?>" method="post" >
        <?php
        $dropdown = "<select name='codes'>";
        while($row = mysql_fetch_assoc($result2)) 
        {
            $dropdown .= "\r\n<option value='{$row['SID']}'>{$row['SID']}</option>";
        }
        $dropdown .= "\r\n</select>";
    ?>
     Service ID  <?php echo $dropdown; ?> <input type="submit" value="Load" name="loadbtn">
        <table width="300" border="0">
          <tr>
            <td>Name</td>
            <td><input type="text" name="upName" style="text-align:right" value="<? echo $savedName; ?>" /></td>
          </tr>
          <tr>
            <td>Cost</td>
            <td><input type="text" name="upCost" style="text-align:right" value="<? echo $savedCost; ?>" /></td>
          </tr>
          <tr>
            <td>Active</td>
            <td><input type="checkbox" name="upActive" value="<? echo $savedActive; ?>" /></td>
          </tr>
        </table>
</div>
<br/>
<div id="buttons">
    <input type="reset" value="Clear" /> <input type="submit" value="Save" name="updatebtn" />
</div>
    </form>

</body>
</html> 
```

# php - Paypal 错误：不允许用户执行此操作

> ID：11273236
> 
> 赞同：6
> 
> 时间：2012-06-30T10:05:39.637
> 
> 标签：php, permissions, paypal, payment, paypal-adaptive-payments

我正在尝试使用 Paypal SOAP API 实现链式自适应支付。在我的沙箱中它工作正常。现在我将代码移至实时 API。当我向主要收款人付款时，它会返回此错误：

> 不允许用户执行此操作

我有我的帐户的应用程序 ID 和批准。我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T05:48:25.440

我们也遇到了这个问题，目前我们的应用程序只是有条件地获得批准。x.com 上这个问题的[最佳答案](https://www.x.com/user/107130/feed)似乎表明，在有条件地批准应用程序时，一些使用自适应支付 API 的操作，包括链式支付（我们遇到问题）将无法工作。

为了您的方便，请从那里引用:)

> 当“有条件批准”时我们收到此错误这是来自支持的答案
> 
> 感谢您联系商户服务部。
> 
> 处于“有条件批准”状态的交易意味着您将能够处理基本和并行付款。
> 
> 请注意，我们的应用审核团队可能需要几天时间才能完全批准您的申请，以便您可以处理链式付款。
> 
> 如果他们在批准之前需要更多信息，他们应该直接通过 x.com 与您联系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-05T10:21:17.093

我也遇到了同样的问题，基本在[Paypal FAQ](https://www.paypal-knowledge.com/infocenter/index?page=content&id=FAQ1633&expand=true&locale=en_US)上，我们找到了获取 Live APP ID 的阶段或状态，有 2 个阶段：

**请求更多信息阶段**

*   Open 表示您的申请已收到，正在审核中，并且您的 AppID 尚未起作用
*   Conditionally Approved 表示您的应用程序仍在审核中，但在此期间您已获得基本功能。

**最终决策阶段**

*   **自动批准**表示您的帐户不需要人工审核并已自动获得批准。您现在拥有完全访问权限。在大多数情况下，基本请求（例如，特性和功能）都会收到此操作。自动批准后，您将被分配一个 Live AppID，并且可以立即开始沙盒测试。
*   **已批准**表示您的帐户已通过人工审核和批准。您已被分配了一个 Live AppID，并且可以立即开始在实时生产环境中工作。
*   **Rejected**表示您的应用程序已被拒绝，并且您的 AppID 尚未激活功能。您将收到一封电子邮件，说明您的申请被拒绝的原因，并且可以在“我的申请”仪表板中访问相同的解释。您的申请在被拒绝后将永久关闭。
*   **Retired**表示您手动选择删除您的应用程序，因此您的 AppID 不再处于活动状态。

# javascript - 如何在包含 pre 标签的页面上加载语法荧光笔？

> ID：11273237
> 
> 赞同：2
> 
> 时间：2012-06-30T10:05:55.157
> 
> 标签：javascript, syntaxhighlighter

我是一个 Blogger，有时我需要在我的博客上演示代码，所以我使用了 Alex Gorbatchev 的语法荧光笔。但问题是文件加载在我博客的每一页中，这使得博客加载缓慢。

我只在某些页面上有代码，所以我想要一种仅在具有标签的页面上加载 SyntaxHighlighter 文件的方法。如果有任何方法可以做到这一点，请帮助我。

我在 StackOverflow 上搜索了这个问题，但没有找到任何可以回答我的线程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T18:50:12.543

如果您已经在使用 jQuery 和 requirejs，您可以执行以下操作：

```
var preElements = $('.pre');
if (preElements.length > 0)
{
    //load the JS
    require(['shCore.js', 'shBrushJScript.js'], function (){
      //now apply it
      SyntaxHighlighter.all()
    });
} 
```

请注意，您的逻辑不会以某种方式双重适用于相同的 s。

# boost-gil - 使用 boost::gil，我如何获得 gray8 未签名图像或视图的 gray8s 视图

> ID：11273242
> 
> 赞同：1
> 
> 时间：2012-06-30T10:06:31.217
> 
> 标签：boost-gil

使用 boost::gil 如何创建适用于 gray8 图像或视图并提供 gray8s 视图的视图？

我的期望：

*   对于这两种情况，我希望视图中的每个像素值都等于源图像中相应的像素值减去 128

    ```
    signed_gray8s_view_t some_gray8s_view = signed_view(some_gray8_image);
    signed_gray8sc_view_t some_gray8s_view = signed_view(some_gray8c_image); 
    ```

*   对于这两种情况，我希望视图中的每个像素值都等于源图像中的相应像素值（即，没有效果，身份映射）

    ```
    signed_gray8s_view_t some_gray8s_view = signed_view(some_gray8s_image);
    signed_gray8sc_view_t some_gray8s_view = signed_view(some_gray8sc_image); 
    ```

# java - Android - 获取键盘按键

> ID：11273243
> 
> 赞同：31
> 
> 时间：2012-06-30T10:06:31.803
> 
> 标签：java, android, keyboard, keyevent, android-input-method

我想抓住按下软键盘的任何键。我不想在我的 Activity 中使用 EditView 或 TextView，该事件必须从我的 Activity 内的扩展视图中处理。

我刚试过这个：

1）覆盖`onKeyUp(int keyCode, KeyEvent event)`活动方法。这不适用于软键盘，它只会捕获几个硬键盘。

2）创建我的`OnKeyListener`并在我的视图中注册它，其中包含一个已注册和正在工作的`OnTouchListener`. 这对软键盘根本不起作用。

3) 覆盖`onKeyUp(int keyCode, KeyEvent event)`View 方法。如果我设置我的 OnKeyListener 或不设置它，这根本不起作用。

4) 使用`InputMethodManager`对象调用方法`showSoftInput`并将其传递给我的视图。这对抬起键盘也不起作用，确实我必须打电话`toggleSoftInput`；也没有赶上关键事件。

我只在模拟器中测试了所有内容，但我认为这已经足够了。为什么从键盘获取一个简单的按键事件如此复杂？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-30T18:52:53.090

对于处理硬件键和返回键，您可以[`dispatchKeyEvent(KeyEvent event)`](http://developer.android.com/reference/android/view/ViewGroup.html#dispatchKeyEvent%28android.view.KeyEvent%29)在您的`Activity`

```
@Override
public boolean dispatchKeyEvent(KeyEvent event) {
    Log.i("key pressed", String.valueOf(event.getKeyCode()));
    return super.dispatchKeyEvent(event);
} 
```

**UPD**：很遗憾，您无法处理软键盘事件（请参阅[处理单键事件](https://developer.android.com/training/keyboard-input/commands.html#SingleKey)），除非您开发自己的自定义键盘（点击链接了解如何[创建输入法](https://developer.android.com/guide/topics/text/creating-input-method.html)）。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-05T16:50:50.737

通过**vasart**的提示， 我可以获得 KeyPress 事件。为了使键码可打印，我使用了函数**getUnicodeChar**将元按钮状态传递给它，然后只需一个字符转换即可解决问题。

这是**工作代码**：

```
@Override
public boolean dispatchKeyEvent(KeyEvent KEvent) 
{
    int keyaction = KEvent.getAction();

    if(keyaction == KeyEvent.ACTION_DOWN)
    {
        int keycode = KEvent.getKeyCode();
        int keyunicode = KEvent.getUnicodeChar(KEvent.getMetaState() );
        char character = (char) keyunicode;

        System.out.println("DEBUG MESSAGE KEY=" + character + " KEYCODE=" +  keycode);
    }

    return super.dispatchKeyEvent(KEvent);
} 
```

当然，这仅适用于 ASCII 字符。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-02-20T14:00:51.837

无法仅从硬件键盘处理软键盘（屏幕键盘）上的按键事件。

更多细节：[处理键盘动作](https://developer.android.com/training/keyboard-input/commands.html#SingleKey)

> 注意：使用 KeyEvent 类和相关 API 处理键盘事件时，您应该期望此类键盘事件仅来自硬件键盘。您永远不应依赖接收软输入法（屏幕键盘）上任何键的键事件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-04T13:23:59.727

当在活动中打开键盘时，您的活动实际上变成了前台...所有 TextArea 或 TextFields 都有自己的机制来从 onScreen 键盘获得按键...如果您想使用 onKeyDown() 侦听器进行虚拟键盘，请确保您在 AndroidManifest 中设置您的活动 android:windowSoftInputMode="stateAlwaysVisible" 下的文件然后 onkeyDown() 将工作它确实对我有用...

# ruby-on-rails - 使用双引号或单引号进行渲染的 Rails 样式指南

> ID：11273246
> 
> 赞同：1
> 
> 时间：2012-06-30T10:06:48.747
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我一直在阅读一些书籍、博客和开源代码，并且我有一个 Rails 风格指南问题。

使用渲染部分时使用单引号是流行的共识。

```
<%= render 'posts' %> 
```

或者

```
<%= render "posts" %> 
```

有些书实际上在他们的编码示例中同时使用了这两种方法。

感谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T10:41:42.360

[您可能想在https://github.com/bbatsov/rails-style-guide](https://github.com/bbatsov/rails-style-guide)上查看样式指南的工作，其中使用双引号的原因是指插值原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T10:39:07.367

The only thing to mention here is that single quote strings are slightly more efficient than double qoute strings.

Double quote strings get interpolated:

```
"Hello #{@name}!"
# => "Hello Chris!" 
```

Single quote strings don't:

```
'Hello #{@name}!'
# => 'Hello #{@name}!' 
```

This gives single quote strings a slight edge in speed during execution. But don't worry about it too much: The speed gain is really really small.

# php - setAccessToken() 在 FB 的 PHP SDK 中不起作用

> ID：11273247
> 
> 赞同：0
> 
> 时间：2012-06-30T10:06:52.583
> 
> 标签：php, facebook, facebook-graph-api

```
require 'facebook/facebook.php';
require 'config/fbconfig.php';
require 'config/functions.php';

include dirname(__FILE__) . "/includes/session.php";

$facebook = new Facebook(array(
    'appId' => ".....",
    'secret' => ".....",
));

//token variable is "false" if there no access_token
if($_POST['token'] != "false")   
     $facebook->setAccessToken($_POST['token']); 
```

我正在`access_token`使用 Ajax。`setAccessToken()`如文档中所示，对函数的调用似乎有效，但它返回未定义的方法错误。我确信令牌是有效的，因为我在 Facebook 的调试器中检查了它。

**更新**：我刚刚做`var_dump()`了`$facebook`，它是一个有效的 Facebook 对象。所以错误可能不在这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T20:58:21.767

[从Github](https://github.com/facebook/facebook-php-sdk/)下载最新版本的 PHP SDK并将其替换为您正在使用的当前版本。

# canvas - 在 onmouseover 和 onmouseout 上更新 Canvas 内容

> ID：11273252
> 
> 赞同：1
> 
> 时间：2012-06-30T10:07:12.583
> 
> 标签：canvas, html5-canvas

我正在使用 HTML5 创建游戏，在我的工作中，我通常会根据 onmouseover 和 onmouseout 更新画布内容。onmouseover 我正在这样做

```
 cxt.beginPath();
                    cxt.moveTo(10, 10);
                    cxt.lineTo(40, 40);
                    cxt.moveTo(40, 10);
                    cxt.lineTo(10, 40);
                    cxt.stroke();
                    cxt.closePath();
                    content[canvasNumber - 1] = 'Value'; 
```

现在和 onmouseout 事件我想清除该画布的内容而不覆盖当前内容!!，我该怎么做？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T01:33:17.773

我想我知道你的意思，但你必须更加小心你的语言。你说：

> 不覆盖当前内容！！

但是你刚才画的X**是**当前内容！我认为您的真正意思是“不清除以前的内容”。

当然，我们会尽最大努力回答您的问题，但请在提问时尽量使用准确和谨慎的语言。英语可能不是你的第一语言，你可能比我说我的第二语言说得更好，但即使你不确定单词，即使你必须用几种不同的方式说同样的话，更多的语言只是为了确保我们理解是值得的。

谢谢！现在回答。

* * *

如果要清除 X 而不覆盖之前的内容，则必须保存之前的内容。

要保存画布位图，我们可以使用所谓的“内存画布”或“屏幕外画布”。你通过使用`document.createElement`而不是将它们添加到 DOM 来制作它们

`mouseover`这是一个在发生时保存位图并在发生时恢复该位图的代码示例`mouseout`：

[http://jsfiddle.net/simonsarris/uRXeN/](http://jsfiddle.net/simonsarris/uRXeN/)

# php - 在 php 中保存配置数据的更好方法是什么？

> ID：11273259
> 
> 赞同：2
> 
> 时间：2012-06-30T10:10:10.663
> 
> 标签：php, serialization, drupal, blob

我现在对 fin drupal 有点感兴趣，我看到它像 BLOB 一样将许多配置选项保存到 db 中（我认为它们是序列化的 php 变量，如数组）。

*   为什么drupal不使用保存conf。php文件的选项然后简单地包含它？
*   你认为保存conf的更好方法是什么？数据：数据库或文件，然后简单包含？
*   也许文件系统比套接字和数据库更快？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T10:29:23.843

将配置信息存储在数据库等中央位置可以在前端实现负载平衡。如果您使用 conf 文件并且有 2 个负载平衡的 Web 服务器，则需要确保每台服务器上的 conf 文件保持同步。数据库是一种集中配置并在需要时复制它的简单方法。

# git - 对于 Git 存储库，GitHub 相对于 Bitbucket 的优势

> ID：11273260
> 
> 赞同：11
> 
> 时间：2012-06-30T10:10:23.110
> 
> 标签：git, version-control, github, dvcs, bitbucket

既然[Bitbucket](https://bitbucket.org/)也支持 Git 存储库，我觉得它是[GitHub](https://github.com/)的一个很好的替代品，特别是因为它的免费计划包括无限的私有存储库，这在 GitHub 上不可用。然而，GitHub 接缝更受欢迎。

选择 GitHub 作为 Git 存储库的托管站点而不是 Bitbucket 有什么主要原因吗？

（虽然我一般来说公开我的个人项目没有问题，但我喜欢能够随时从公共切换到私人的想法，反之亦然。但如果有一些充分的理由使用 GitHub，我愿意放弃这种自由。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T10:39:52.300

这可能应该是社区维基，因为它是主观的，但最终我认为对社区有用。

GitHub 最大的优势在于它的广泛使用，并且也得到了更多的 3rd 方的支持。例如，[Travis CI](http://travis-ci.org)或[BuildHive](https://buildhive.cloudbees.com/)等持续集成服务具有与 GitHub 的透明集成。

就个人而言，我将 GitHub 用于公共代码，因为它得到了广泛的使用和支持，并将[Codeplane](http://codeplane.com)用于我的私人代码，因为每月 9 美元的无限回购是相当不错的。

# java - java jspinner更改监听器触发器

> ID：11273261
> 
> 赞同：2
> 
> 时间：2012-06-30T10:10:27.673
> 
> 标签：java, swing, jspinner

我有 2 个组合框和一个微调器，它们的工作方式如下：如果第一个组合的选定项目被更改，第二个组合保留其选定项目但重新调用微调器（微调器仅链接到第二个框）。我的问题是当我这样做时我无法触发微调器的 stateChange 侦听器。

这是在第一个框被更改时强制第二个框重新选择其最后一项的代码（这里没有错，它工作得很好）：

```
String orientare = (String) orientareComboBox.getSelectedItem();
orientareComboBox.setSelectedItem(orientare); 
```

这是第二个框 actionListener 的代码：

```
public void actionPerformed(ActionEvent e) {

            JComboBox combo = (JComboBox) e.getSource();
            String value = combo.getSelectedItem().toString();
            if (value.equalsIgnoreCase("oblica"))
            {
                unghiSpinner.setEnabled(true);

                double unghi = (double) unghiSpinner.getValue();
                unghiSpinner.setValue(new Double(unghi));

            }
} 
```

和微调器的侦听器：

```
 public void stateChanged(ChangeEvent e) 
        {
            if (unghiSpinner.isEnabled())
            {
               // do something
            }
        } 
```

我不知道我应该使用什么命令`unghiSpinner`来触发它的监听器，因为`setValue()`我做不到。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T12:01:10.747

我没有看到您在上面的代码中更改了 JSpinner 的值。看来您所做的只是将微调器的值设置为与之前保持的值相同的值，并且不应触发侦听器。要触发更改侦听器，您必须更改被观察实体的状态。

# asp.net - 制作一个多行文本框以触发 Enter 上的按钮单击事件，而不是换行

> ID：11273263
> 
> 赞同：1
> 
> 时间：2012-06-30T10:11:04.240
> 
> 标签：asp.net, button, textbox, multiline, enter

我想制作一个 ASP.NET 多行文本框来触发 button1_Click() 事件，而不是在按下 ENTER 键时换行。请注意，此按钮不在表单标签中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T10:14:13.763

使用 onkeypress 执行此操作并检查它是否已输入 do button1_performclick().that 将为您完成这项工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T10:27:07.917

您将必须跟踪`onkeypress`TextBox 并检查它是否按下了按键，如果按下了输入，则执行`__dopostback`这将回发您的表单并`page_load`检查其参数。有关 `__dopostback` [转到此处的更多信息](https://stackoverflow.com/questions/3591634/how-to-use-dopostback)

# java - Java 通过单击按钮打开一个新窗口

> ID：11273267
> 
> 赞同：8
> 
> 时间：2012-06-30T10:11:27.840
> 
> 标签：java, swing, button

在我的电脑前坐了大约 13 个小时，我觉得我的眼睛在流血。我找到了一个我喜欢的小 gui 编辑器，叫做 GuiGenie。它非常适合使用按钮和所有好东西创建窗口。问题是我想在我的第一个菜单中单击一个按钮并让它打开我制作的另一个菜单。我 4 周前才开始编程，所以我完全是个菜鸟。由于主要方法，我感觉它搞砸了，但我不知道，坐在这里 13 个小时尝试数以百万计的事情让我发疯:) 这是我到目前为止所得到的

```
 import java.awt.*;
 import java.awt.event.*;
 import javax.swing.*;
 import javax.swing.event.*;

public class MyPanel extends JPanel {
private JTextField How;
private JLabel jcomp2;
private JLabel jcomp3;
private JButton jcomp4;

public MyPanel() {
    //construct components
    How = new JTextField (1);
    jcomp2 = new JLabel ("How long were you parked?");
    jcomp3 = new JLabel ("Minutes");
    jcomp4 = new JButton ("openNewWindow");

    //adjust size and set layout
    setPreferredSize (new Dimension (315, 85));
    setLayout (null);

    //add components
    add (How);
    add (jcomp2);
    add (jcomp3);
    add (jcomp4);

    //set component bounds (only needed by Absolute Positioning)
    How.setBounds (245, 50, 60, 25);
    jcomp2.setBounds (35, 30, 185, 50);
    jcomp3.setBounds (250, 30, 60, 20);
    jcomp4.setBounds (0, 0, 315, 25);

       jcomp4.addActionListener( new ActionListener()
    {
        public void actionPerformed(ActionEvent e)
        {

        }
    });
}

public static void main (String[] args) {
    JFrame frame = new JFrame ("MyPanel");
    frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
    frame.getContentPane().add (new MyPanel());
    frame.pack();
    frame.setVisible (true);
}
} 
```

按下按钮时，我希望它打开这个新窗口

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.*;

public class MyPanel2 extends JPanel {
private JButton jcomp1;
private JButton jcomp2;
private JButton jcomp3;
private JTextField jcomp4;

public MyPanel2() {
    //construct components
    jcomp1 = new JButton ("test1");
    jcomp2 = new JButton ("test2");
    jcomp3 = new JButton ("test3");
    jcomp4 = new JTextField (5);

    //adjust size and set layout
    setPreferredSize (new Dimension (395, 156));
    setLayout (null);

    //add components
    add (jcomp1);
    add (jcomp2);
    add (jcomp3);
    add (jcomp4);

    //set component bounds (only needed by Absolute Positioning)
    jcomp1.setBounds (20, 45, 100, 25);
    jcomp2.setBounds (135, 60, 100, 25);
    jcomp3.setBounds (260, 35, 100, 25);
    jcomp4.setBounds (105, 115, 100, 25);
}

public static void main (String[] args) {
    JFrame frame = new JFrame ("MyPanel");
    frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
    frame.getContentPane().add (new MyPanel2());
    frame.pack();
    frame.setVisible (true);
}
} 
```

如果有人可以提供帮助，我将不胜感激！我非常尊重你的专业人士，因为如果你是这方面的专业人士，你可能比世界上 99.9% 的人都聪明。这东西伤了我的大脑。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-30T11:33:04.133

这是您可以做的事情，对于这种情况，`Forms or Windows`您可以做多种事情，您可以使用 a`JPanel`可以设置此[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)`LayoutManager`，然后您可以将两个`JPanel`s 添加到其中并使用提供的方法访问它们相同的。

`setBounds()`使用时不要使用，`Absolute Positioning`这确实不是将组件放入父容器的正确方法。而是使用[setLocation(...)](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#setLocation%28int,%20int%29)和[setSize(...)](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#setSize%28int,%20int%29)方法。考虑尽可能不要使用绝对定位。从 Java Docs 获取的支持上述行的某些行如下：

> 尽管可以不使用布局管理器，但您应该尽可能使用布局管理器。布局管理器可以更轻松地适应依赖外观的组件外观、不同的字体大小、容器的不断变化的大小以及不同的语言环境。布局管理器也可以很容易地被其他容器以及其他程序重用。

因为你的程序的输出在任何意义上都不是一种舒缓的体验。至少 LayoutManager，可以让你的工作更轻松，因为你不需要为每个组件指定位置和大小。尝试浏览[Layout Mangers 教程](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)，并尽快熟悉它们。他们是真正的救星:-)

这是取自您的修改后的代码`SOURCE CODE`

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class CardLayoutExample
{
    private JPanel contentPane;
    private MyPanel panel1;
    private MyPanel2 panel2;

    private void displayGUI()
    {
        JFrame frame = new JFrame("Card Layout Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel contentPane = new JPanel();
        contentPane.setBorder(
            BorderFactory.createEmptyBorder(5, 5, 5, 5));
        contentPane.setLayout(new CardLayout());
        panel1 = new MyPanel(contentPane);
        panel2 = new MyPanel2();
        contentPane.add(panel1, "Panel 1"); 
        contentPane.add(panel2, "Panel 2");
        frame.setContentPane(contentPane);
        frame.pack();   
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new CardLayoutExample().displayGUI();
            }
        });
    }
}

class MyPanel extends JPanel {

    private JTextField How;
    private JLabel jcomp2;
    private JLabel jcomp3;
    private JButton jcomp4;
    private JPanel contentPane;

    public MyPanel(JPanel panel) {

        contentPane = panel;
        //construct components
        How = new JTextField (1);
        jcomp2 = new JLabel ("How long were you parked?");
        jcomp3 = new JLabel ("Minutes");
        jcomp4 = new JButton ("openNewWindow");

        //adjust size and set layout
        setPreferredSize (new Dimension (315, 85));
        setLayout (null);

        //set component bounds (only needed by Absolute Positioning)
        How.setBounds (245, 50, 60, 25);
        jcomp2.setBounds (35, 30, 185, 50);
        jcomp3.setBounds (250, 30, 60, 20);
        jcomp4.setLocation(0, 0);
        jcomp4.setSize(315, 25);
        jcomp4.addActionListener( new ActionListener()
        {
            public void actionPerformed(ActionEvent e)
            {
                CardLayout cardLayout = (CardLayout) contentPane.getLayout();
                cardLayout.next(contentPane);
            }
        });

        //add components
        add (How);
        add (jcomp2);
        add (jcomp3);
        add (jcomp4);               
    }
}

class MyPanel2 extends JPanel {
    private JButton jcomp1;
    private JButton jcomp2;
    private JButton jcomp3;
    private JTextField jcomp4;

    public MyPanel2() {
        //construct components
        jcomp1 = new JButton ("test1");
        jcomp2 = new JButton ("test2");
        jcomp3 = new JButton ("test3");
        jcomp4 = new JTextField (5);

        //adjust size and set layout
        setPreferredSize (new Dimension (395, 156));
        setLayout (null);

        //set component bounds (only needed by Absolute Positioning)
        jcomp1.setBounds (20, 45, 100, 25);
        jcomp2.setBounds (135, 60, 100, 25);
        jcomp3.setBounds (260, 35, 100, 25);
        jcomp4.setBounds (105, 115, 100, 25);

        //add components
        add (jcomp1);
        add (jcomp2);
        add (jcomp3);
        add (jcomp4);       
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-30T10:19:50.117

这是 myPanel 类的代码，使用这个：

```
import java.awt.*;
 import java.awt.event.*;

 import javax.swing.*;
import javax.swing.event.*;

public class MyPanel extends JPanel {
private JTextField How;
private JLabel jcomp2;
private JLabel jcomp3;
private JButton jcomp4;

public MyPanel() {
    //construct components
    How = new JTextField (1);
    jcomp2 = new JLabel ("How long were you parked?");
    jcomp3 = new JLabel ("Minutes");
    jcomp4 = new JButton ("openNewWindow");

    jcomp4.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            JFrame frame = new JFrame ("MyPanel");
            frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
            frame.getContentPane().add (new MyPanel2());
            frame.pack();
            frame.setVisible (true);

        }
    });

    //adjust size and set layout
    setPreferredSize (new Dimension (315, 85));
    setLayout (null);

    //add components
    add (How);
    add (jcomp2);
    add (jcomp3);
    add (jcomp4);

    //set component bounds (only needed by Absolute Positioning)
    How.setBounds (245, 50, 60, 25);
    jcomp2.setBounds (35, 30, 185, 50);
    jcomp3.setBounds (250, 30, 60, 20);
    jcomp4.setBounds (0, 0, 315, 25);

       jcomp4.addActionListener( new ActionListener()
    {
        public void actionPerformed(ActionEvent e)
        {

        }
    });
}

public static void main (String[] args) {
    JFrame frame = new JFrame ("MyPanel");
    frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
    frame.getContentPane().add (new MyPanel());
    frame.pack();
    frame.setVisible (true);
}
} 
```

# google-apps-script - 脚本在 Google 电子表格中导入本地 CSV

> ID：11273268
> 
> 赞同：4
> 
> 时间：2012-06-30T10:11:29.697
> 
> 标签：google-apps-script, google-sheets, import-from-csv

如何在我拥有的 Google 电子表格文档中从本地硬盘导入 CSV 文件？（我想通过脚本复制 File-->Import 命令）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T01:16:41.210

这类似于 DocList 的错误答案，但您可以直接从 blob 中获取数据，对其进行解析，然后将其导入电子表格，而不是使用 DocsList。我只给出了一个简短的大纲：

```
function doGet(e) {
  var app = UiApp.createApplication().setTitle("Upload CSV to Sheet");
  var formContent = app.createVerticalPanel();
  formContent.add(app.createFileUpload().setName('thefile'));
  formContent.add(app.createSubmitButton('Start Upload'));
  var form = app.createFormPanel();
  form.add(formContent);
  app.add(form);
//  return app;
  SpreadsheetApp.getActiveSpreadsheet().show(app);// show app 
}

function doPost(e) {
  // data returned is a blob for FileUpload widget
  var fileBlob = e.parameter.thefile;

  // parse the data to fill values, a two dimensional array of rows
  // Assuming newlines separate rows and commas separate columns, then:
  var values = []
  var rows = fileBlob.contents.split('\n');
  for(var r=0, max_r=rows.length; r<max_r; ++r)
    values.push( rows[r].split(',') );  // rows must have the same number of columns

  // Using active sheet here, but you can pull up a sheet in several other ways as well
  SpreadsheetApp.getActiveSheet()
                .getRange( 1, 1, values.length, values[0].length )
                .setValues(values);
} 
```

# javascript - drupal 网站的 Facebook 连接按钮在画布应用程序中不起作用

> ID：11273270
> 
> 赞同：0
> 
> 时间：2012-06-30T10:12:07.867
> 
> 标签：javascript, facebook, drupal, facebook-graph-api

我正在构建这个 drupal 网站，我想将它包含在 facebook 画布中......

问题是它在 facebook 外部起作用，但在内部不起作用。

这是应用画布...

[http://www.facebook.com/pages/Was-penelope/475770399104342?sk=app_346824075388300](http://www.facebook.com/pages/Was-penelope/475770399104342?sk=app_346824075388300)

你能告诉我，这怎么会发生？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T11:27:11.157

您正在尝试在 iframe 中显示 OAuth 对话框，但您不能。（我的浏览器 [opera] 显示错误，提示此页面不允许在 iframe 中显示。）

只需用于`FB.login`登录您的用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T10:58:26.673

我不确定什么不起作用，或者您可能已经找到了解决方案，但是当我导航到该链接时，我可以看到该站点。

# scala - 自我参考值

> ID：11273273
> 
> 赞同：3
> 
> 时间：2012-06-30T10:12:43.493
> 
> 标签：scala

我遇到了一个值初始化问题：

```
class Top 

class X(val v : Top) extends Top 
class Y extends Top 
```

X 是使用其他 Top 类型对象（例如 X 或 Y）构造的类。这意味着它可以使用自身构造。例如，

```
val x = new X(x) 
```

编译器可以工作，但是当我访问 v 字段时，我得到了 null 返回。

```
scala> x.v 
res9: Top = null 
```

我尝试了延迟初始化和按名称参数，得到了相同的结果。我的 Scala 版本是 2.9.1。谁能帮我 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T10:30:11.023

肺，

你的懒惰和名字调用的代码是什么样子的？它对我有用：

```
class Top
class X(_v: => Top) extends Top {
  lazy val v = _v
}

scala> lazy val x: X = new X(x)
x: X = <lazy>

scala> x.v
res3: Top = X@422d15ad 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T12:01:45.207

这确实很不幸，在 Scala 2.9.2 中也发生过；但是，您需要在那里添加类型，所以它是`val x: X = new X(x)`. 我认为编译器应该明确拒绝这一点，因为它不能通过急切的参数成功`v`。

我不知道您的确切情况是什么，但它似乎是一种数据结构。也许像下面这样的方法对你有用

```
trait Top
trait X extends Top { def v: Top }

object TopLoop extends X { def v: Top = this }
class Y( x: X ) extends Top { def v: Top = x } 
```

如果您想使用模式匹配，您可以进一步添加`sealed`到特征以及`case`对象和类。

# google-maps - 在 Google Maps API 上查询

> ID：11273276
> 
> 赞同：0
> 
> 时间：2012-06-30T10:12:53.977
> 
> 标签：google-maps, maps

我是谷歌地图 API 的新手。让我们在地图上取两个位置 A 和 B。我知道地图 API 会为我提供两点之间的路线。（如果可供使用的话）。让我们取另一个位置C。我想知道是否可以找到最近的位置D（到C），它位于A和B之间。使用maps API，是否可以找到上述信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T14:16:05.853

这当然是可能的。您所描述的类似于 maps.google.com 的“拖动以修改路线”功能。鼠标将是您的“C”，出现在路线上的可拖动标记将是您的“D”。在这里工作演示：

[http://www.marsrutai.info/directions.htm](http://www.marsrutai.info/directions.htm)

# json - 对 Fusion Table 进行 SQL 查询时出现 403 错误

> ID：11273278
> 
> 赞同：4
> 
> 时间：2012-06-30T10:13:00.550
> 
> 标签：json, jsonp, google-fusion-tables, http-status-code-403

我一直在尝试将我的项目迁移到新的 API，但在尝试如下 SQL 查询时出现以下错误：

[https://www.googleapis.com/fusiontables/v1/query?sql=SELECT * FROM 1KxVV0wQXhxhMScSDuqr-0Ebf0YEt4m4xzVplKd4&key=myKey](https://www.googleapis.com/fusiontables/v1/query?sql=SELECT%20%2a%20FROM%201KxVV0wQXhxhMScSDuqr-0Ebf0YEt4m4xzVplKd4&key=myKey)

这是返回的内容：

```
{
 "error": {
  "errors": [
   {
    "domain": "usageLimits",
    "reason": "accessNotConfigured",
    "message": "Access Not Configured"
   }
  ],
  "code": 403,
  "message": "Access Not Configured"
 }
} 
```

但是，以下查询确实有效： [https ://www.googleapis.com/fusiontables/v1/tables/1bTX-w0Lt6nT8jq4R0q2pwFvuN_X5iPDOKHWFhw/columns?key=myKey](https://www.googleapis.com/fusiontables/v1/tables/1bTX-w0Lt6nT8jq4R0q2pwFvuN_X5iPDOKHWFhw/columns?key=myKey)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T13:56:46.983

您还需要确保 Fusion Table 是可导出的。

```
File → About this table
       → Edit table information
         → Check the "Allow download" checkbox 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T08:52:25.663

我在 API 控制台中启动了一个新项目，并使用新的 API 密钥修复了它，奇怪的是。

# programming-languages - 连字符分隔的大小写的名称是什么？

> ID：11273282
> 
> 赞同：609
> 
> 时间：2012-06-30T10:13:48.163
> 
> 标签：programming-languages, naming-conventions, terminology, kebab-case

这是帕斯卡案例：`SomeSymbol`

这是骆驼案：`someSymbol`

这是蛇案例：`some_symbol`

所以我的问题是是否有一个被广泛接受的名称：`some-symbol`？它通常用于url。

* * *

## 回答 #1

> 赞同：516
> 
> 时间：2013-07-23T20:12:23.590

这个案例约定并没有真正的标准名称，并且对于应该如何命名存在分歧。

也就是说，截至 2019 年，有充分的理由证明*kebab-case*获胜：

[https://trends.google.com/trends/explore?date=all&q=kebab-case,spinal-case,lisp-case,dash-case,caterpillar-case](https://trends.google.com/trends/explore?date=all&q=kebab-case,spinal-case,lisp-case,dash-case,caterpillar-case)

*脊柱案例*是一个遥远的第二，没有其他术语有任何牵引力。

此外，*kebab-case*已进入多个 javascript 代码库的词典，例如：

*   [https://lodash.com/docs/#kebabCase](https://lodash.com/docs/#kebabCase)
*   [https://www.npmjs.com/package/kebab-case](https://www.npmjs.com/package/kebab-case)
*   [https://vuejs.org/v2/guide/components-props.html#Prop-Casing-camelCase-vs-kebab-case](https://vuejs.org/v2/guide/components-props.html#Prop-Casing-camelCase-vs-kebab-case)

但是，人们仍然使用其他术语。Lisp 几十年来一直使用这个约定，正如[Wikipedia entry](http://en.wikipedia.org/wiki/Naming_convention_(programming)#Lisp)中所描述的那样，所以有些人将其描述为*lisp-case*。我见过的其他一些形式包括*caterpillar-case*、*dash-case*和*hyphen-case*，但这些都不是标准的。

因此，您的问题的答案是：不，这种案例约定没有一个被广泛接受的名称，类似于被广泛接受的*snake_case*或*camelCase*。

* * *

## 回答 #2

> 赞同：499
> 
> 时间：2012-09-05T00:39:02.433

它被称为*kebab-case*。请参阅[lodash 文档](https://lodash.com/docs#kebabCase)。

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2014-02-22T16:23:21.913

它有时也被称为毛毛虫案例

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2019-01-23T15:01:44.307

这是最著名的案例，它有很多名字

*   `kebab-case`: 官方软件最常用的名字
*   `caterpillar-case`
*   `dash-case`
*   `hyphen-case`或者`hyphenated-case`
*   `lisp-case`
*   `spinal-case`
*   `css-case`
*   `slug-case`
*   `friendly-url-case`

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2016-09-05T13:39:35.040

在此处添加正确的链接[Kebab Case](http://c2.com/cgi/wiki?KebabCase)

这是所有小写字母，用 - 分隔单词。

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2017-06-02T10:30:01.153

由于字符 (-) 被称为“连字符”或“破折号”，因此将其命名为“**破折号大小写**”或“**连字符大小写**”（不太常用）似乎更自然。

如[Wikipedia](https://en.wikipedia.org/wiki/Letter_case#Special_case_styles)中所述，还使用了“ **kebab-case ”。**显然（见[答案](https://stackoverflow.com/questions/17326185/what-are-the-different-kinds-of-cases#comment47864072_17326185)）这是因为这个角色看起来像一个*烤肉串*……不过它需要一些想象力。
例如在[lodash lib](https://lodash.com/docs#kebabCase)中使用。

最近，“ **dash-case** ”被

*   角（[https://angular.io/guide/glossary#case-types](https://angular.io/guide/glossary#case-types)）
*   NPM 模块
    *   [https://www.npmjs.com/package/case-dash](https://www.npmjs.com/package/case-dash)
    *   [https://www.npmjs.com/package/dasherize](https://www.npmjs.com/package/dasherize)

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2017-01-27T09:35:59.437

我一直叫它，听说它被称为“dashcase”。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2016-12-08T18:48:26.567

没有标准化的名称。

[jquery](http://blog.jquery.com/2015/07/13/jquery-3-0-and-jquery-compat-3-0-alpha-versions-released/)和[lodash](https://lodash.com/docs#kebabCase)等库将其称为`kebab-case`. [Vuejs](https://vuejs.org/v2/guide/components.html#camelCase-vs-kebab-case) javascript 框架也是如此。但是，我不确定`kebab-case`在 javascript 世界中声明它是否安全。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2016-11-29T09:37:37.593

我只想说它是[hyphenated](http://www.dictionary.com/browse/hyphenated)。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2017-09-30T02:00:32.317

值得一提的是废除：

[https://github.com/tpope/vim-abolish/blob/master/doc/abolish.txt#L152](https://github.com/tpope/vim-abolish/blob/master/doc/abolish.txt#L152)

破折号盒或烤肉串盒

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2019-03-05T14:50:57.687

在 Salesforce 中，它被称为`kebab-case`. 见下文

[https://developer.salesforce.com/docs/component-library/documentation/lwc/lwc.js_props_names](https://developer.salesforce.com/docs/component-library/documentation/lwc/lwc.js_props_names)

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2020-12-17T14:52:19.227

我一直把它称为[`kebab-case`](https://www.theserverside.com/definition/Kebab-case).

有趣的是，`SCREAM-KEBAB`当所有字母都大写时，我听说人们称它为 a。

## 烤肉串案例警告

我一直[很喜欢`kebab-case`](https://www.theserverside.com/blog/Coffee-Talk-Java-News-Stories-and-Opinions/Why-you-should-make-kebab-case-a-URL-naming-convention-best-practice)，因为当您需要空格时，它似乎是最易读的。但是，一些程序将破折号解释为减号，它可能会导致问题，因为您认为是名称变成了减法运算。

```
first-second  // first minus second?
ten-2 // ten minus two? 
```

此外，一些框架会解析 kebab cased 属性中的破折号。例如，GitHub Pages 使用[Jekyll](https://www.theserverside.com/blog/Coffee-Talk-Java-News-Stories-and-Opinions/jekyll-install-windows-example-blog-tutorial)，Jekyll 会解析它在 md 文件中找到的任何破折号。例如，`2020-1-2-homepage.md`在[GitHub Pages](https://www.theserverside.com/video/A-GitHub-Pages-tutorial-on-how-to-host-personal-websites)上命名的文件被放入一个文件夹，该文件夹的结构`\2020\1\2\homepage.html`与网站编译时的结构相同。

## Snake_case 与 kebab-case

is或E的更安全的替代方法`kebab-case`是，与减号相比，下划线引起的混淆更少。[`snake_case`](https://www.theserverside.com/definition/Snake-case)`SCREAMING_SNAKE_CAS`

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-04-19T17:48:43.293

这是最近的混乱。Angular JS 和 Pluralsight 课程和有关 Angular 的书籍中到处都是文档，都将 kebab-case 称为蛇形案例，而不是区分两者。

它太糟糕的毛毛虫箱没有粘住，因为蛇箱和毛毛虫箱很容易记住并且实际上看起来就像它们所代表的（如果你有很好的想象力的话）。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-03-13T16:53:23.217

我对`String.prototype.toKebabCase`.

```
String.prototype.toKebabCase = function () {
  return this.valueOf().replace(/-/g, ' ').split('')
    .reduce((str, char) => char.toUpperCase() === char ?
      `${str} ${char}` :
      `${str}${char}`, ''
    ).replace(/ * /g, ' ').trim().replace(/ /g, '-').toLowerCase();
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-07-02T15:44:18.727

这种套管也可以称为“slug”，将一个短语变成它的过程“slugify”。

[https://hexdocs.pm/slugify/Slug.html](https://hexdocs.pm/slugify/Slug.html)

# c# - 更新已发布的 asp.net 网站

> ID：11273283
> 
> 赞同：4
> 
> 时间：2012-06-30T10:14:03.717
> 
> 标签：c#, asp.net, publish

我刚刚发布了一个`asp.net`网站，然后我对其源代码进行了更改，我添加了两个`.aspx`文件，然后再次发布

问题是我需要什么才能使这些更改在服务器上生效。我必须替换所有文件还是我可以**添加**特定文件？

我正在尝试将两个`aspx`页面添加到服务器上已经存在的站点，并想知道我必须在普通文件旁边添加哪个文件`aspx`才能在站点上生效

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T10:22:39.787

这取决于您如何部署代码。您是在发布之前使用预编译选项还是仅使用预编译发布。

如果您只是发布，那么您只需替换 .aspx 和 aspx.cs 文件，该站点将动态重新编译。

如果您已经预编译了它，那么您可能只剩下 .dll 文件和 .aspx 文件，因此您必须为您的站点和 .aspx 文件部署 .dll 文件的新副本。`MSDeploy`默认替换整个站点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T10:23:23.220

如果您只更改了 aspx 文件而不更改其背后的代码，则足以在服务器上发布这两个文件。如果您也更改了后面的代码，您还需要发布 dll 文件，在这种情况下，替换所有文件可能更容易。

# c - 为什么只放字符串的第一个字符？

> ID：11273288
> 
> 赞同：-4
> 
> 时间：2012-06-30T10:14:45.940
> 
> 标签：c

```
#include<stdio.h>

main(){
  int c;
  while((c=getchar())!=EOF){
    if(c==' '||c=='\t'||c=='\n'){
      putchar('\n');
    }
    else
      putchar(c);
  }
} 
```

为什么只放字符串的第一个字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T10:22:17.183

前面`putchar()`有一个`getchar()`-- 它们被用作一对，因此对于作为输入接收的每个字符，都会将一个字符发送到输出。

# android - BitmapFactory 返回 null

> ID：11273289
> 
> 赞同：0
> 
> 时间：2012-06-30T10:14:47.603
> 
> 标签：android, sqlite, bitmap

我正在开发一个从 Web 服务器获取图像的应用程序。

我需要将该图像保存在 sqlite 数据库中。也许它会被保存在一个`byte[]`; 我已经这样做了，将数据类型设为`blob`，然后从 db 中检索图像并在 imageview 中显示。

但是，我被困在某个地方：`null`当我从 bytearray 解码时，我得到了

我使用的代码是：

```
InputStream is = null;
try {
    URL url = null;                              
    url = new URL(http://....);
    URLConnection ucon = null;
    ucon = url.openConnection();    
    is = ucon.getInputStream();
} catch (MalformedURLException e1) {                                    
    e1.printStackTrace();
} catch (IOException e1) {                                  
    e1.printStackTrace();
}

BufferedInputStream bis = new BufferedInputStream(is);
ByteArrayBuffer barb = new ByteArrayBuffer(128);
int current = 0;
try {
    while ((current = bis.read()) != -1) {
    barb.append((byte) current);
} catch (IOException e) {                                   
    e.printStackTrace();
}

byte[] imageData = barb.toByteArray(); 
```

然后我将 imageData 插入到数据库中。

要检索图像：

```
byte[] logo = c.getBlob(c.getColumnIndex("Logo_Image"));
Bitmap bitmap = BitmapFactory.decodeByteArray(logo, 0, logo.length);
img.setImageBitmap(bitmap); 
```

但我收到错误：

> 位图位图为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T10:36:19.337

Sometimes, It happens, when your byte[] not decode properly after retrieving from database as blob type.

So, You can do like this way, **Encode - Decode**,

Encode the image before writing to the database:

```
ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
mBitmap.compress(Bitmap.CompressFormat.JPEG, THUMB_QUALITY, outputStream);
mByteArray = outputStream.toByteArray();  // write this to database as blob 
```

And then decode it like the from Cursor:

```
ByteArrayInputStream inputStream = new ByteArrayInputStream(cursor.getBlob(columnIndex));
Bitmap mBitmap = BitmapFactory.decodeStream(inputStream); 
```

Also, If this not work in your case, then I suggest you to go on feasible way..

*   Make a directory on external / internal storage for your application images.
*   Now store images on that directory.
*   And store the path of those image files in your database. So you don't have a problem on encoding-decoding of images.

# javascript - 身体背景图像淡入

> ID：11273294
> 
> 赞同：0
> 
> 时间：2012-06-30T10:14:56.687
> 
> 标签：javascript, jquery

我正在尝试复制此[站点](http://movies.io)背景图像中的淡入淡出。我将如何使用 jQuery 来做这件事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T10:19:56.090

使用图像作为背景图像。即，`<img />`标记。然后使用jQuery的`.animate()`函数：

```
$(document).ready(function(){
    $('img.bg').animate({
        opacity: 1;
    }, 1000);
}); 
```

CSS：

```
.bg {opacity: 0; position: absolute; top: 0; left: 0; width: 100%; height: 100%;} 
```

HTML：

```
<img src="bgimage.png" class="bg" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T10:25:27.107

**工作演示** [http://jsfiddle.net/9HTkV/](http://jsfiddle.net/9HTkV/)（因为我喜欢绿巨人）：P

从淡入开始，`opacity 1`然后将其设为零。

这应该有帮助`:)`

**代码**

```
 $('.box2').animate({
            opacity: 0
        });

​ 
```

**CSS**在开始时您希望不透明度为 1，然后将其设为 0。

```
.box2 {
    height: 500px;
    width: 700px;
    background: #000000;
    opacity: 1;
} 
```

# database - 两个表，每个表都有一个引用另一个的外键

> ID：11273295
> 
> 赞同：7
> 
> 时间：2012-06-30T10:15:01.370
> 
> 标签：database, sqlite, foreign-keys

我正在尝试创建一个数据库来存储一些测验的问题和答案

到目前为止，我有两张桌子：

`questions: (Question ID(PK), question string, correct answer ID)`

`answers: (Answer ID(PK), answer string, question ID)`

我在设置外键约束时遇到了麻烦。当然，我需要确保`correct answer ID`存在于表中`answers`并且也存在于`question ID`表中。但是，当尝试在 SQliteStudio 中添加这些外键时，我收到错误提示，当已经存在来自 B > A 的外键约束时，我无法添加引用表 A > B 的外键。`answers``questions`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T10:20:26.660

这种行为是正确的。否则，您将遇到先有鸡还是先有蛋的问题：如果不先为问题插入一行，您将无法插入答案，并且如果不先插入有效答案，您也无法插入问题它。尝试删除所引用的问题或答案时，您会遇到类似的问题。

一个典型的解决方案是向表中添加一`is_correct`列`answer`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T10:21:10.297

[http://www.sqlite.org/foreignkeys.html#fk_schemacommands](http://www.sqlite.org/foreignkeys.html#fk_schemacommands)

> 启用外键约束时，ALTER TABLE 命令在两个方面的工作方式不同：
> 
> 不能使用“ALTER TABLE ... ADD COLUMN”语法来添加包含 REFERENCES 子句的列，除非新列的默认值为 NULL。尝试这样做会返回错误。
> 
> ...
> 
> 对 ALTER TABLE 和 DROP TABLE 命令进行这些增强的目的是确保它们不能用于创建包含外键违规的数据库，至少在启用外键约束时是这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T10:38:27.490

我认为这种情况可以用关系表来建模：

`QA: (Question ID (FK), Answer ID (FK), Correct, ...)`而2个FK代表表的PK。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T14:43:49.033

1.  具体到您的问题：无论外键列是否可以为空，当表为空时，在两个表之间设置外键约束都没有问题。

但是当这两个表都填充了数据时，我们必须记住主键数据和可空类型的外键列。例如表问题

QuestionID Question AnwerID 1 'Question1' 1 2 'Question2' 2

AnswerID 回答 QuestionID 3 'Answer1' 3 4 'Answer2' 4

现在，如果您尝试设置外键约束，那么您将失败，因为这些已经违反了外键规则。

简单的事情是，只有当您的当前数据不违反外键约束时，您才能设置外键约束。

1.  如果在您的情况下外键列不允许为空，则在设置外键约束后，您仅限于第三列中的当前数据（QuestionID 或 AnswerID）

2.  即使您能够使用 NULL 来实现它，也同样适用于删除。您必须同时跟踪两个表：将 null 设置为引用表中的相应列 Drop table 将不起作用

更好的方法：这些 QuestionID、AnswerID 应该映射到另一个表 SchemaName。[映射] 使用您的逻辑来获得正确的答案 ID。无论您是否支持，都考虑 N*N 映射。

不要在内部链接两个表。

# javascript - 单独的 iframe 的后退按钮

> ID：11273299
> 
> 赞同：0
> 
> 时间：2012-06-30T10:16:31.297
> 
> 标签：javascript

我的网站包含 4 个 iframe。我正在尝试为每个 iframe 分别创建后退按钮是否可以为 iframe 创建单独的按钮。请帮我.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T10:18:46.443

对的，这是可能的。

```
myFrame1.history.back ();   // or
myFrame1.history.go (-1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T10:21:29.180

使用这种方式：

```
<iframe name="frame1"></iframe> 
```

对于这个 IFrame，JavaScript 是：

```
<a href="#" onclick="frame1.history.back ();">Back IFrame 1</a> 
```

# php - 在 Javascript 和 php 中编码和解码

> ID：11273302
> 
> 赞同：0
> 
> 时间：2012-06-30T10:16:45.610
> 
> 标签：php, javascript, jquery, decode, encode

我想在 Ajax 中使用 POST 方法发送一组 HTML 内容。它由一些特殊字符组成当我使用 PHP 检索它时，只有一半的内容在那里。

这是用于发布到其他页面的示例内容。这个 post 操作是使用 jQuery 的 .post 方法执行的。

传递的内容（通过 JS）：

```
<div><label id="aboutDescription" style="">Firstline</label>&nbsp;</div>
<div><label id="about" style="">Secondline</label></div> 
```

检索的内容（在 PHP 中）：

```
<div><label id="aboutDescription" style="">Firstline</label> 
```

当我开始使用该`$_REQUEST`方法时，我只收到了一半的内容。

我发现每当我得到“”或任何其他特殊字符时，内容都会终止的问题。所以我认为我必须对来自 javascript 的内容进行编码，并在 PHP 中解码相同的内容。

如果我`encodeURIComponent`在 Javascript 中使用，我应该如何解码 PHP 中的内容？是否有任何替代函数等于`decodeURIComponent`PHP 中的（Javascript 函数）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T10:23:40.170

要使用 PHP 解码内容，请使用：

```
$decoded_string = urldecode('把编码的字符串放在这里');

```

# java - 带有锁定 jar 的 Java 类加载器困境

> ID：11273303
> 
> 赞同：7
> 
> 时间：2012-06-30T10:17:07.730
> 
> 标签：java, classloader, urlclassloader

我正在玩 Java 中的 classLoaders 并注意到一件奇怪的事情。如果一个类加载器从一个 jar 加载一个类，即使你取消引用你的类加载器，这个 jar 也会被无限期锁定。

在下面的示例中，jar 包含一个名为 HelloWorld 的类。我所做的是尝试通过动态添加 jar 的 classLoader 加载 jar 中包含的类。如果设置`skip`为`true`不调用`Class.forName`，则可以删除 jar，但如果不跳过，即使取消引用`classLoader`( `classLoader = null`)，也无法删除 jar，直到 JVM 退出。

**这是为什么？**

**PS：我使用的是 java 6，代码非常冗长，用于测试目的**

```
package loader;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLClassLoader;

public class TestClassLoader {

    private URLClassLoader classLoader;

    public TestClassLoader() throws MalformedURLException, IOException {
        System.out.println("Copying jar");
        if (copyJar()) {
            System.out.println("Copying SUCCESS");
            performFirstCheck();
        } else {
            System.out.println("Copying FAILED");
        }
    }

    public static void main(String[] args) throws IOException {
        System.out.println("Test started");
        TestClassLoader testClassLoader = new TestClassLoader();
        System.out.println("Bye!");
    }

    public void performFirstCheck() throws IOException {
        System.out.println("Checking class HelloWorld does not exist");
        if (!checkClassFound(TestClassLoader.class.getClassLoader(), false)) {
            System.out.println("Deleting jar");
            deleteJar();
            System.out.println("First Check SUCCESS");
            performSecondCheck();
        } else {
            System.out.println("First Check FAILED");
        }
    }

    private void performSecondCheck() throws IOException {
        System.out.println("Copying jar");
        if (copyJar()) {
            System.out.println("Copying SUCCESS");
            createClassLoaderAndCheck();
        } else {
            System.out.println("Copying FAILED");
        }
    }

    private void createClassLoaderAndCheck() throws MalformedURLException {
        System.out.println("Creating classLoader");
        createClassLoader();
        System.out.println("Checking class HelloWorld exist");
        if (checkClassFound(classLoader, true)) {
            System.out.println("Second Check SUCCESS");
                    classLoader = null;
            System.out.println("Deleting jar");
            if (deleteJar()) {
                System.out.println("Deleting SUCCESS");
            } else {
                System.out.println("Deleting FAILED");
            }
        } else {
            System.out.println("Second Check FAILED");
        }
    }

    public void createClassLoader() throws MalformedURLException {
        URL[] urls = new URL[1];
        File classFile = new File("C:\\Users\\Adel\\Desktop\\classes.jar");
        urls[0] = classFile.toURI().toURL();
        classLoader = new URLClassLoader(urls);
    }

    public boolean checkClassFound(ClassLoader classLoader, boolean skip) {
        if (skip) {
            System.out.println("Skiping class loading");
            return true;
        } else {
            try {
                Class.forName("HelloWorld", true, classLoader);
                return true;
            } catch (ClassNotFoundException e) {
                return false;
            }
        }
    }

    public URLClassLoader getClassLoader() {
        return classLoader;
    }

    public boolean copyJar() throws IOException {
        File sourceJar = new File("C:\\Users\\Adel\\Desktop\\Folder\\classes.jar");
        File destJar = new File("C:\\Users\\Adel\\Desktop\\classes.jar");
        if (destJar.exists()) {
            return false;
        } else {
            FileInputStream finput = new FileInputStream(sourceJar);
            FileOutputStream foutput = new FileOutputStream(destJar);
            byte[] buf = new byte[1024];
            int len;
            while ((len = finput.read(buf)) > 0) {
                foutput.write(buf, 0, len);
            }
            finput.close();
            foutput.close();
            return true;
        }
    }

    public boolean deleteJar() {
        File destJar = new File("C:\\Users\\Adel\\Desktop\\classes.jar");
        return destJar.delete();
    }

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-30T10:37:11.770

我找到了答案和解决方法。

根据这篇[文章](http://blog.osgi.org/2011/05/what-you-should-know-about-class.html)和这篇令人惊叹的相关[文章](http://blog.bjhargrave.com/2007/09/classforname-caches-defined-class-in.html)，使用它是一个坏习惯，`Class.forName(className, true, classLoader)`因为它会将类无限期地缓存在内存中。

解决方案是改为使用`classLoader.loadClass(clasName)`，然后一旦完成，取消引用`classLoader`并使用以下方法调用垃圾收集器：

```
classLoader = null;
System.gc(); 
```

希望这对其他人有帮助！:)

**背景资料：**

我的项目很复杂：我们有一个 GWT 服务器充当另一个服务器的 RMI 客户端。因此，要创建实例，GWT 需要从服务器下载类并加载它们。稍后，GWT 将重新发送实例到服务器，以使用 Hibernate 将它们持久化到数据库中。为了支持热部署，我们选择了动态类加载，用户将上传一个 jar 并通知服务器谁将从它加载类并将它们呈现为可用于 GWT 服务器

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T10:21:14.040

在 Java 7 [URLClassLoader](http://docs.oracle.com/javase/7/docs/api/java/net/URLClassLoader.html)中有一个`#close()`方法可以解决这个问题。

# iphone - 纵向与横向发射图像

> ID：11273307
> 
> 赞同：1
> 
> 时间：2012-06-30T10:17:49.880
> 
> 标签：iphone, objective-c, ipad

iPad 应用程序可以支持在两个方向包含启动图像；大概，如果您的应用程序支持自动旋转，那么这会向我建议，如果用户在设备处于横向模式时启动应用程序，则使用横向启动图像。

但在我构建和发布的所有应用程序中，情况从未如此。从来没有出现过横向启动图像，只有纵向。加载后，应用程序将自动旋转到设备所处的任何方向，但在启动时，它假定您处于纵向。总是。

为什么？

我已经在商店中看到许多其他应用程序以这种方式运行，但是有些似乎总是在第一次启动时立即自动知道，从第一个启动图像，如果是这样的话，你在横向。

这是怎么做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T10:26:58.110

iPhone 仅支持肖像图像（[http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW5](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW5)）

不支持纵向的应用程序提供相同的纵向图像。例如，iPhone 上的愤怒的小鸟具有相同的纵向图像，但这些人在其上绘制了旋转的图形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T05:39:58.277

事实证明，问题是由于在应用程序的 plist 文件中遗漏了支持的方向。您可以手动添加这些，也可以只在目标页面中选择它们。更多细节在这里：

[如何让横向启动图像在启动时实际出现？](https://stackoverflow.com/questions/11296515/how-to-get-a-landscape-launch-image-to-actually-appear-when-launched)

# drools - 如何在 Eclipse Indigo IDE 中安装 Drools 插件

> ID：11273309
> 
> 赞同：33
> 
> 时间：2012-06-30T10:18:00.930
> 
> 标签：drools

如何在eclipse中安装drools插件以及如何使用它。任何人都有一个想法。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-06-30T11:12:26.497

我不太了解如何使用它，但是要将其安装为 eclipse 插件，这应该可以：

1.  启动 Eclipse
2.  帮助 -> 安装新软件
3.  在 Work With: 或 Site: 输入字段中，输入：“ **[http://download.jboss.org/drools/release/](http://download.jboss.org/drools/release/)`<VERSION` >.Final/org.drools.updatesite/** ”，将“ `<VERSION>`”替换为适当的版本，然后单击“添加”按钮
4.  对于**名称**，您只需输入“Drools”
5.  选中 Drools 和 jBPM 复选框并按照说明进行安装。

希望这可以帮助

Master the Boss [http://www.mastertheboss.com/](http://www.mastertheboss.com/)也有一些关于如何使用它的教程

Drools 下载页面位于：[http ://www.jboss.org/drools/downloads](http://www.jboss.org/drools/downloads)

# php - 致命错误：.. 的声明必须与 .. PHP 兼容

> ID：11273313
> 
> 赞同：27
> 
> 时间：2012-06-30T10:18:46.373
> 
> 标签：php, fatal-error

我收到以下错误：

```
Fatal error: Declaration of Shoppingcart::addToCart() must be compatible with that of Ishoppingcart::addToCart() in klassen.php on line 118 
```

可能是什么问题呢？我找不到它的脚本：

```
<?php
// begin
interface Ishoppingcart{
    public function addToCart();
    public function printOverzicht();
}
abstract class Shoppingcart implements Ishoppingcart
{
    protected $producten = array();

    public function addToCart( Product $product) {
        $this->producten[] = $product;
    }
}
class Myshoppingcart extends Shoppingcart {
    public function printOverzicht(){
        echo ("<table border=1>
        <tr>
        <td colspan='7'>Bestellingoverzicht</td>
        </tr>
        <tr>
        <td bgcolor=#cccccc> Product ID</td>
        <td bgcolor=#cccccc> Beschrijving</td>
        <td bgcolor=#cccccc> Merk</td>
        <td bgcolor=#cccccc> Model</td>
        <td bgcolor=#cccccc> Prijs</td>
        <td bgcolor=#cccccc> Aantal</td>
        <td bgcolor=#cccccc> Korting</td>
        </tr>");

        foreach($this->producten as $product){
            $rij = "";
            $rij .= "<tr>";
            $rij .= "<td>".$product->getID()."</td>";
            $rij .= "<td>".$product->getBeschrijving()."</td>";
            $rij .= "<td>".$product->getMerk()."</td>";
            $rij .= "<td>".$product->getModel()."</td>";
            $rij .= "<td>".$product->getPrijs()."</td>";
            $rij .= "<td>".$product->getAantal()."</td>";
            $rij .= "<td>".$product->getKorting()."</td>";
            $rij .= "</tr>";
            echo ($rij);
        }
        echo ("</table>");
    }
}
class Product {
    private $id;
    private $beschrijving;
    private $merk;
    private $model;
    private $prijs;
    private $aantal;
    private $korting;

    function __construct($id,
                        $merk,
                        $model,
                        $prijs,
                        $aantal,
                        $korting){
        $this->id = $id;
        $this->beschrijving = $beschrijving;
        $this->merk = $merk;
        $this->model = $model;
        $this->prijs = $prijs;
        $this->aantal = $aantal;
        $this->korting = $korting;
        echo ("<br />Nieuw Product object $beschrijving wordt aangemaakt");
                        }
    public function __destruct(){
        // voer benodigde acties uit
        echo ("<br />Product object $this->beschrijving wordt verwijderd");
    }
    // set function
    public function setId($id){
        $this->id = $id;
    }
    public function setBeschrijving($beschrijving){
        $this->beschrijving = $beschrijving;
    }
    public function setMerk($merk){
        $this->merk = $merk;
    }
    public function setModel($model){
        $this->model = $model;
    }
    public function setPrijs($prijs){
        $this->prijs = $prijs;
    }
    public function setAantal($aantal){
        $this->aantal = $aantal;
    }
    public function setKorting($korting){
        $this->korting = $korting;
    }
    // get function
    public function getId(){
        return $this->id = $id;
    }
    public function getBeschrijving(){
        return $this->beschrijving;
    }
    public function getMerk(){
        return $this->merk;
    }
    public function getModel(){
        return $this->model;
    }
    public function getPrijs(){
        return $this->prijs;
    }
    public function getAantal(){
        return $this->aantal;
    }
    public function getKorting(){
        return $this->korting;
    }

    // printProductInfo
    public function printProductInfo(){
    $rij = "<tr><td>$this->id</td>";
    $rij .= "<td>$this->beschrijving</td>";
    $rij .= "<td>$this->merk</td>";
    $rij .= "<td>$this->model</td>";
    $rij .= "<td>$this->prijs</td>";
    $rij .= "<td>$this->aantal</td>";
    $rij .= "<td>$this->korting</td>";  
    echo ($rij);
    }
}
// einde
?> 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-30T10:23:28.937

`Ishoppingcart::addToCart()`声明该方法不带任何参数，而实现`Shoppingcart::addToCart(Product $product)`要求`Product`必须将类型参数传递给该方法。这意味着两个声明是不兼容的，而实现的接口必须满足 PHP 抛出所示的错误。

解决方案是要么更改`Ishoppingcart::addToCart()`为`Ishoppingcart::addToCart(Product $product)`它需要一个类型的参数，`Product`要么更改`Shoppingcart::addToCart(Product $product)`为不允许将参数传递给方法`Shoppingcart::addToCart(Product $product = null)`：

正确的方法取决于您的应用程序要求。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-30T10:21:19.850

子类中公共函数的声明必须与其父类的声明相匹配：

```
public function addToCart();
public function addToCart( Product $product) 
```

您不能向签名添加参数。

[这与里氏替换原理](http://en.wikipedia.org/wiki/Liskov_substitution_principle)密切相关。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-30T10:21:37.020

接口 Ishoppingcart 似乎定义了不带参数的 addToShoppingCart，但类 Shoppingcart 定义了相同的函数，以 Product 作为参数。我想接口中的方法也应该将 Product 作为参数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-05-27T07:00:06.643

我通过升级到最新的 php 版本解决了这个问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-06T21:54:50.753

不适用于此特定问题，但如果有人遇到此问题，请确保包含接口指定的返回值。

具有如下功能的接口：

```
abstract public function crawled(Something $some): void; 
```

需要实现为：

```
public function crawled(Something $some): void {
} 
```

就我而言，我错过了`: void`返回类型。

# java - Jboss 7中的部署时间错误（ java.lang.NoClassDefFoundError: javax/mail/internet/AddressException ）

> ID：11273314
> 
> 赞同：3
> 
> 时间：2012-06-30T10:18:46.850
> 
> 标签：java, spring, jboss, jboss7.x

我们的项目在 Jetty 服务器上并且可以完全运行，然后这个项目部署在 Jboss 7 服务器上，但是有一些错误。

我制作了战争文件并在文件夹中复制并粘贴过去，`E:\jboss-as-7.1.1.Final\standalone\deployments`然后自动部署开始并给出此错误：

```
java.lang.NoClassDefFoundError: javax/mail/internet/AddressException 
```

但在`\WEB-INF\lib`我有 mail.jar 文件..

那么如何消除这个错误呢？

详细错误：

```
 15:34:02,245 ERROR [org.springframework.web.context.ContextLoader] (MSC service thread 1-4) Context initialization failed: org.springframework.beans.factor
y.BeanCreationException: Error creating bean with name 'log4jInitialization' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Invocati
on of init method failed; nested exception is java.lang.NoClassDefFoundError: javax/mail/internet/AddressException
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420) [org.s
pringframework.beans-3.1.0.M1.jar:3.1.0.M1]
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519) [org.spri
ngframework.beans-3.1.0.M1.jar:3.1.0.M1]
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) [org.spring
framework.beans-3.1.0.M1.jar:3.1.0.M1]
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295) [org.springframework.beans-3.1.0.M1.jar:
3.1.0.M1]
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) [org.springframework.
beans-3.1.0.M1.jar:3.1.0.M1]
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292) [org.springframework.beans-3.1.0.M1.jar:3.
1.0.M1]
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194) [org.springframework.beans-3.1.0.M1.jar:3.1.
0.M1]
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:563) [org.springfr
amework.beans-3.1.0.M1.jar:3.1.0.M1]
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:900) [org.springf
ramework.context-3.1.0.M1.jar:3.1.0.M1]
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:455) [org.springframework.context-3.1.0.M
1.jar:3.1.0.M1]
        at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:294) [org.springframework.web-3.1.0.M1.jar:3.1.0.M1
]
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:215) [org.springframework.web-3.1.0.M1.jar:3.1.0.M1]
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47) [org.springframework.web-3.1.0.M1.jar:3.
1.0.M1]
        at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3392) [jbossweb-7.0.13.Final.jar:]
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850) [jbossweb-7.0.13.Final.jar:]
        at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_01]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_01]
        at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_01]
Caused by: java.lang.NoClassDefFoundError: javax/mail/internet/AddressException
        at java.lang.Class.getDeclaredConstructors0(Native Method) [rt.jar:1.7.0_01]
        at java.lang.Class.privateGetDeclaredConstructors(Class.java:2404) [rt.jar:1.7.0_01]
        at java.lang.Class.getConstructor0(Class.java:2714) [rt.jar:1.7.0_01]
        at java.lang.Class.newInstance0(Class.java:343) [rt.jar:1.7.0_01]
        at java.lang.Class.newInstance(Class.java:325) [rt.jar:1.7.0_01]
        at org.apache.log4j.helpers.OptionConverter.instantiateByClassName(OptionConverter.java:336) [log4j-1.2.16.jar:]
        at org.apache.log4j.helpers.OptionConverter.instantiateByKey(OptionConverter.java:123) [log4j-1.2.16.jar:]
        at org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:752) [log4j-1.2.16.jar:]
        at org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:735) [log4j-1.2.16.jar:]
        at org.apache.log4j.PropertyConfigurator.configureRootCategory(PropertyConfigurator.java:615) [log4j-1.2.16.jar:]
        at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:502) [log4j-1.2.16.jar:]
        at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:547) [log4j-1.2.16.jar:]
        at org.apache.log4j.PropertyConfigurator.configure(PropertyConfigurator.java:415) [log4j-1.2.16.jar:]
        at org.springframework.util.Log4jConfigurer.initLogging(Log4jConfigurer.java:72) [org.springframework.core-3.1.0.M1.jar:3.1.0.M1]
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_01]
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [rt.jar:1.7.0_01]
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_01]
        at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_01]
        at org.springframework.util.MethodInvoker.invoke(MethodInvoker.java:273) [org.springframework.core-3.1.0.M1.jar:3.1.0.M1]
        at org.springframework.beans.factory.config.MethodInvokingFactoryBean.doInvoke(MethodInvokingFactoryBean.java:162) [org.springframework.beans-3.1.0
.M1.jar:3.1.0.M1]
        at org.springframework.beans.factory.config.MethodInvokingFactoryBean.afterPropertiesSet(MethodInvokingFactoryBean.java:152) [org.springframework.b
eans-3.1.0.M1.jar:3.1.0.M1]
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1479) [or
g.springframework.beans-3.1.0.M1.jar:3.1.0.M1]
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417) [org.s
pringframework.beans-3.1.0.M1.jar:3.1.0.M1]
        ... 20 more
Caused by: java.lang.ClassNotFoundException: javax.mail.internet.AddressException from [Module "org.apache.log4j:main" from local module loader @1da817b (r
oots: E:\jboss-as-7.1.1.Final\modules)]
        at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
        at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
        at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
        ... 43 more 
```

所以请帮忙，如何消除这个错误？

谢谢，

卡姆莱什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T17:05:10.960

JBoss AS 7 带有独立的类加载，所以你应该仔细配置你的项目依赖。详情在[这里](https://docs.jboss.org/author/display/AS71/Class+Loading+in+AS7)。

在您的情况下，我看到 Spring 引用了 JBossAS: 提供的 Log4j `Module "org.apache.log4j:main"`，并尝试将其配置为执行一些不寻常的操作（可能尝试通过电子邮件进行日志记录）。问题是 log4j 模块无法访问 mail-api，因此它会抱怨。

现在您至少有 3 个解决方案：

1.  让 Spring 只使用 log4j 而无需尝试对其进行配置。而是在应用服务器级别配置 log4j。看到[这个](https://docs.jboss.org/author/display/AS71/Logging+Configuration)。请教Spring专家怎么做：）

2.  将 log4j.jar 放在 /WEB-INF/lib 中，不要暴露`Module "org.apache.log4j"`给你的 webapp。

3.  将 mail-api 暴露给 log4j 模块并从您的应用程序中删除 /WEB-INF/lib/mail.jar。您必须进行编辑`jboss-as-7.1.1.Final/modules/org/apache/log4j/main/module.xml`以包含对 mail-api 的依赖：

    ```
    <dependencies>
        <module name="org.dom4j" optional="true"/>
        <module name="javax.api"/>
        <module name="javax.mail.api" export="true"/>
    </dependencies> 
    ```

# objective-c - 带有 UITextField 的 UIPicker

> ID：11273317
> 
> 赞同：1
> 
> 时间：2012-06-30T10:19:47.440
> 
> 标签：objective-c, ios, xcode, uitextfield, uipickerview

我做了一个研究，这里的所有帖子都非常模糊这个问题。我想在按下 UITextField 时使用 UIPicker。我真的会逐步指导。

我在这里尝试了所有帖子，但每个帖子只给了我需要的一部分，我似乎无法将它们连接在一起。

这是我申请的最后一部分，我要疯了才能完成它..

提前谢谢你！

加尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T11:01:48.653

有一个**inputAccessoryView**属性，其中包含一个视图，而不是屏幕底部的键盘。创建一个 UIPicker，调整其框架，提供值并将其分配给 inputAccessoryView 属性。

UIPicker 将在用户点击您的 UITextField 时出现。

如果您不需要编辑，您可以使用 UILabel 代替 UITextField。解决方法是一样的。如果你需要，我有一个现成的课程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T11:15:02.730

这里有一个方法：

[http://www.youtube.com/watch?v=t_F1ex5opgA&t=14m10s](http://www.youtube.com/watch?v=t_F1ex5opgA&t=14m10s)

```
-(BOOL)textfieldShouldBeginEditing:(UITextField *)textField 
```

*   `textField`文本字段的名称在哪里。

调用你的 UIPickerView 并返回 NO 以便加载你的选择器而不是键盘。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T10:46:03.697

这个想法是在用户点击 UITextField 时调用一个打开 UIPicker 的操作。因为 UITextField 不响应 UIButton 响应的通常 touchUpInside 事件，所以我将在 UITextField 顶部覆盖一个透明的 UIButton，以防万一，将文本字段的 userInteractionEnabled 属性设置为 NO。钩住 UIButton 以响应 touchUpInside 并调用打开 UIPicker 的方法。另一种选择是通过实施“textFieldShouldBeginEditing”立即响应文本字段的触摸并立即退出文本字段。

下一步是展示 UIPicker - 如果我们谈论的是 iPad，最好使用 UIPopoverController 来完成。在 iPhone 上，也许考虑以模态方式启动它。当您创建包含此 UIPicker 的视图控制器时，请确保向其添加委托属性，以便在选择器上选择的任何值都可以传输回主视图控制器并传输到 UITextField。

希望这有助于您入门。

# javascript - 如何解决手机网站地图缩放和页面缩放冲突？

> ID：11273323
> 
> 赞同：0
> 
> 时间：2012-06-30T10:20:51.757
> 
> 标签：javascript, android, html, css, mobile-website

我有一个在谷歌地图上显示混搭的网站。当我尝试在移动网络浏览器上放大地图时，页面在大多数情况下都会进行缩放。是否有 HTML、CSS 或 javascript 方法可以防止在我的手指触摸地图时页面缩放？

我试过`<meta name='viewport' content='user-scalable=no'>`了，但这也阻止了地图的缩放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T09:30:47.083

这可以通过使用手势事件来完成。您可以调用 touchstart 事件，然后调用

```
e.originalEvent.preventDefault();  //if you are using JQuery 
```

这可以防止您的页面放大。

# android - 创建启动停止服务按钮

> ID：11273329
> 
> 赞同：2
> 
> 时间：2012-06-30T10:21:34.413
> 
> 标签：android, android-service

我想创建一个按钮，它同时具有启动和停止服务的功能。

另外我想确保即使用户退出应用程序并根据服务是否正在运行再次返回，我想在按钮上显示适当的文本。

简而言之，我可以通过什么来了解服务是否正在运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T10:26:05.563

您可以使用以下代码检查服务是否正在运行。一旦您发现服务正在运行，剩下的问题就是基于逻辑的。

```
private boolean isMyServiceRunning() {
    ActivityManager manager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
    for (RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE)) {
        if ("com.example.MyService".equals(service.service.getClassName())) {
            return true;
        }
    }
    return false;
} 
```

我参考[这个答案](https://stackoverflow.com/a/5921190/582571)只是检查它

# delphi - 如何保持多个项目的使用列表相同

> ID：11273337
> 
> 赞同：1
> 
> 时间：2012-06-30T10:22:47.433
> 
> 标签：delphi, testing

我有一个客户端应用程序和一个测试应用程序。如果有人向客户端应用程序添加/删除单元，我希望测试应用程序发生相同的更改。

我可以想到 3 种方法来做到这一点，但都有缺点

**1\. 手动更新 dpr 中的 Test 项目使用列表。**

这里的问题很明显，每个项目都需要人工干预。

**2\. 使用包含使用单位列表的共享 .inc 文件（'\forms\frmXXX.pas'...中的 frmXXX 列表）**

IDE 不喜欢项目文件中的 .inc 文件，并且需要手动维护

**3\. 与#2 相同，但使用共享单元而不是 .inc 文件。因此，您无需更新 .inc 而是更新共享的 .pas**

IDE 不会真正将共享单元使用的文件视为项目中的文件，并且它们不会在“查看单元”对话框中列出

* * *

是否有任何其他方法可以使我缺少的多个项目的使用列表保持同步？

目前使用 D2007，但希望没关系。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T10:36:14.277

您可以使用 Apache Ant 之类的构建工具，在脚本文件（或配置文件）中维护单元名称，并让 Ant 使用[replace 任务替换](http://ant.apache.org/manual/Tasks/replace.html)所有 *.dpr 文件中的占位符。

这将自动重新生成 dpr 文件并使它们保持同步。

# asp.net-mvc-3 - MVC3 在显示/编辑和 ADO.NET 实体数据模型期间引用外键？

> ID：11273344
> 
> 赞同：0
> 
> 时间：2012-06-30T10:23:55.760
> 
> 标签：asp.net-mvc-3

我是 MVC 编程的新手，目前正在开发一个应用程序。我有以下问题，我不知道如何解决（尽管我在这里阅读了一些类似的主题）。我希望在我的视图中为我的外键列显示另一个值（而不是 FK 值，从相关表中获取一个列值）。我不确定如何实现这一点（通过带有 linq 语句的模型，在控制器中创建视图模型，视图？）。我在 ASP.NET 方面的知识真的很短，所以我很欣赏如何制作它的更详细的答案。先感谢您 ！检查下面的情况。

我在数据库中有以下表：

```
CREATE TABLE [dbo].[TBL_MANAGER](
[manager_id] [int] IDENTITY(1,1) NOT NULL,
[first_name] [varchar](50) NULL,
[last_name] [varchar](50) NOT NULL,
[team_id] [int] NOT NULL,

CREATE TABLE [dbo].[TBL_TEAM](
[team_id] [int] IDENTITY(1,1) NOT NULL,
[name] [varchar](50) NOT NULL, 
```

我使用 ADO.NET 实体数据模型来创建类 TBL_MANAGER。在模型类中，我有以下方法（也许它应该返回 IList）：

```
public partial class TBL_MANAGER
{
    public static IQueryable<TBL_MANAGER> GetManagersQuery()
    {
        FBMSEntities db = SingletonDB.getDB();
        var queryManager = from manager in db.TBL_MANAGER
                           orderby manager.manager_id
                           select manager;
        return queryManager;
    }
} 
```

这是来自控制器的代码（使用 NuGet PagedList）：

```
 public ActionResult Index(int? page)
    {
        var managers = TBL_MANAGER.GetManagersQuery();
        var pageNumber = page ?? 1;
        var onePageOfProducts = managers.ToPagedList(pageNumber, @FBMS.Common.Constants.MAX_PER_PAGE);
        ViewBag.OnePageOfProducts = onePageOfProducts;

        return View(managers);
    } 
```

这是视图中我可视化数据的部分：

```
@foreach (var item in ViewBag.OnePageOfProducts)
{
<tr>
    <td>
        @item.team_id
    </td>
    <td>
        @item.first_name
    </td>
    <td>
        @item.last_name
    </td>
    <td>
        @item.manager_status
    </td>
    <td>
        @Html.ActionLink("Edit", "Edit", new { id=item.manager_id }) |
        @Html.ActionLink("Details", "Details", new { id=item.manager_id }) |
        @Html.ActionLink("Delete", "Delete", new { id=item.manager_id })
    </td>
</tr>
} 
```

我想代替 team_id 来显示 TBL_TEAM.name 的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T21:42:40.857

Just like you're assigning ViewBag.OnePageOfProducts, you can also assign a dictionary of teams to ViewBag.Teams (so that each dictionary item's Key is team_id and Value is name) and then in your view do something like

```
...

<td>
    @ViewBag.Teams[item.team_id]
</td>

.... 
```

which would look up the name of the team by its ID and render it.

# php - Cakephp 在帮助器中调用组件方法

> ID：11273348
> 
> 赞同：0
> 
> 时间：2012-06-30T10:24:55.307
> 
> 标签：php, cakephp, components, helper

我使用 Cakephp 2.1，我需要从视图助手调用驻留在插件中的组件方法：

组件在这里：

> /app/Plugin/Abc/Controller/Component/AbcComponent.php

帮手在这里：

> /app/View/Helper/SimpleHelper.php

我尝试了内部助手：

```
App::import('Component', 'Abc.Abc');
$this->Abc = new Abc(); or $this->Abc = new AbcComponent; 
```

或者

```
$this->Abc = $this->Components->load('Abc.Abc'); 
```

在控制器内部，这个组件没有问题。我知道不建议这样做（MVC 设计等），但如果我不以这种方式使用它，我需要复制大量代码。我需要做一些类似的事情：

```
MyHelper extends Helper{
   $simpleVar = Component->get_data();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-04-22T22:58:17.217

我使用 CakePHP 2.4

这就是我如何从 Helper 成功调用 Component：

```
App::uses('AclComponent', 'Controller/Component');
class MyHelper extends AppHelper {
    public function myFunction() {
        $collection = new ComponentCollection();
        $acl = new AclComponent($collection);
        // From here you can use AclComponent in $acl
        if ($acl->check($aro, $aco) {
            // ...
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T11:43:28.830

[将数据从 CakePHP 组件传递给助手](https://stackoverflow.com/questions/6562053/passing-data-from-cakephp-component-to-a-helper)

这似乎是一个很好的处理方式。

我尝试按照你以前的方式工作，虽然这似乎是一个很好的直接解决方案，但从长远来看，最好将组件和帮助程序作为控制器中的 2 个独立实体使用。

李

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-19T08:47:23.347

如果您的 porpouse 是在不同的地方使用相同的业务逻辑，您可以将逻辑放入 trait 并从组件和助手中使用它，以避免重复代码。

举例

特征（文件 app/Lib/NameOfTrait.php 或 app/PluginName/Lib/NameOfTrait.php）

```
trait NameOfTrait {

   public function theTraitFunc($a, $b) {
       // Code here
   }
 } 
```

组件：

```
App::uses('Component', 'Controller');
App::uses('NameOfTrait', 'PluginName.Lib');
class NameOfComponent extends Component {
use NameOfTrait;
private $member;
private $controller;

public function __construct(ComponentCollection $collection, $settings = array()) {
    parent::__construct($collection, $settings);
    $this->member = $settings['memberName'];
}    
 function startup(Controller $controller) {
    $this->controller = $controller;
}
/**
 * Wrap function call of trait function,
 * I think the function doesn't have the same name, 
 * I don't try this  but I think  is obvious, 
 * to avoid the function to call itself
 */
public function theTraitFuncWrap($a) {
    return $this->theTraitFunc($a, $this->member);        
 }
} 
```

对 Helper 执行相同的操作。

我希望这对某人有所帮助，再见:)

# java - Java RMI 和 ClassNotFoundException

> ID：11273353
> 
> 赞同：12
> 
> 时间：2012-06-30T10:26:41.233
> 
> 标签：java, client, rmi

我刚开始学习如何使用 RMI，我有一个问题。我有以下目录结构：

```
compute.jar
client
     |
     org\examples\rmi\client
                           |--> ComputePi     // client main
                           |--> Pi            // implements Task
     org\examples\rmi\compute
                           |--> Compute       // interface
                           |--> Task          // interface

server
     |
     org\examples\rmi\engine
                           |--> ComputeEngine // server main, implements Compute
     org\examples\rmi\compute
                           |--> Compute       // interface
                           |--> Task          // interface 
```

这是**ComputePi**类`main`中的方法：

 **```
if (System.getSecurityManager() == null) {
  System.setSecurityManager(new SecurityManager());
}
try {
  String name = "Compute";
  // args[0] = 127.0.0.1, args[1] is irrelevant
  Registry registry = LocateRegistry.getRegistry(args[0], 0);
  Compute comp = (Compute) registry.lookup(name);
  Pi task = new Pi(Integer.parseInt(args[1]));
  BigDecimal pi = comp.executeTask(task);
  System.out.println(pi);
}
catch (Exception e) {
  System.err.println("ComputePi exception:");
  e.printStackTrace();
} 
```

这是**ComputeEngine**类`main`中的方法：

 **```
if (System.getSecurityManager() == null) {
  System.setSecurityManager(new SecurityManager());
}
try {
  String name = "Compute";
  Compute engine = new ComputeEngine();
  Compute stub = (Compute) UnicastRemoteObject.exportObject(engine, 0);
  Registry registry = LocateRegistry.getRegistry();
  registry.rebind(name, stub);
  System.out.println("ComputeEngine bound.");
}
catch (Exception e) {
  System.err.println("ComputeEngine exception: ");
  e.printStackTrace();
} 
```

这是`executeTask`方法，也在**ComputeEngine**类中：

```
 public <T> T executeTask(Task<T> task) throws RemoteException {
    if (task == null) {
      throw new IllegalArgumentException("task is null");
    }
    return task.execute();
  } 
```

RMI 注册表和服务器启动得很好。以下是服务器的参数：

```
C:\Users\Public\RMI\server>set CLASSPATH=
C:\Users\Public\RMI\server>start rmiregistry
C:\Users\Public\RMI\server>java -Djava.rmi.server.codebase="file:/C:/Users/Public/RMI/compute.jar" -Djava.rmi.server.hostname=127.0.0.1 -Djava.security.policy=server.policy org.examples.rmi.engine.ComputeEngine 
```

这是客户端的参数：

```
C:\Users\Public\RMI\client>java -Djava.rmi.server.codebase="file:/C:/Users/Public/RMI/compute.jar" -Djava.security.policy=client.policy org.examples.rmi.client.ComputePi 127.0.0.1 45 
```

但是，当我尝试运行客户端时出现以下异常：

```
java.rmi.ServerException: RemoteException occurred in server thread; nested exception is:
        java.rmi.UnmarshalException: error unmarshalling arguments; nested exception is:
        java.lang.ClassNotFoundException: org.examples.rmi.client.Pi
        at sun.rmi.server.UnicastServerRef.dispatch(Unknown Source)
        at sun.rmi.transport.Transport$1.run(Unknown Source)
        at sun.rmi.transport.Transport$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at sun.rmi.transport.Transport.serviceCall(Unknown Source)
        at sun.rmi.transport.tcp.TCPTransport.handleMessages(Unknown Source)
        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(Unknown Source)
        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
        at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(Unknown Source)
        at sun.rmi.transport.StreamRemoteCall.executeCall(Unknown Source)
        at sun.rmi.server.UnicastRef.invoke(Unknown Source)
        at java.rmi.server.RemoteObjectInvocationHandler.invokeRemoteMethod(Unknown Source)
        at java.rmi.server.RemoteObjectInvocationHandler.invoke(Unknown Source)
        at $Proxy0.executeTask(Unknown Source)
        at org.examples.rmi.client.ComputePi.main(ComputePi.java:38)
Caused by: java.rmi.UnmarshalException: error unmarshalling arguments; nested exception is:
        java.lang.ClassNotFoundException: org.examples.rmi.client.Pi
        at sun.rmi.server.UnicastServerRef.dispatch(Unknown Source)
        at sun.rmi.transport.Transport$1.run(Unknown Source)
        at sun.rmi.transport.Transport$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at sun.rmi.transport.Transport.serviceCall(Unknown Source)
        at sun.rmi.transport.tcp.TCPTransport.handleMessages(Unknown Source)
        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(Unknown Source)
        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.ClassNotFoundException: org.examples.rmi.client.Pi
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Unknown Source)
        at sun.rmi.server.LoaderHandler.loadClass(Unknown Source)
        at sun.rmi.server.LoaderHandler.loadClass(Unknown Source)
        at java.rmi.server.RMIClassLoader$2.loadClass(Unknown Source)
        at java.rmi.server.RMIClassLoader.loadClass(Unknown Source)
        at sun.rmi.server.MarshalInputStream.resolveClass(Unknown Source)
        at java.io.ObjectInputStream.readNonProxyDesc(Unknown Source)
        at java.io.ObjectInputStream.readClassDesc(Unknown Source)
        at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
        at java.io.ObjectInputStream.readObject0(Unknown Source)
        at java.io.ObjectInputStream.readObject(Unknown Source)
        at sun.rmi.server.UnicastRef.unmarshalValue(Unknown Source)
        ... 11 more 
```

但是如果我将**Pi.class**文件添加到服务器目录：

```
server
     |
     org\examples\rmi\engine
                           |--> ComputeEngine // server main, implements Compute
     org\examples\rmi\compute
                           |--> Compute       // interface
                           |--> Task          // interface
     org\examples\rmi\client
                           |--> Pi            // same as Pi for client 
```

该程序有效。我的问题是，**Pi.class**真的需要在服务器上才能让我的程序运行吗？我的理解是（如果我错了，请纠正我）我将该类的一个实例发送到服务器，服务器会知道如何处理它，即它不关心实现。有人可以解释 RMI 在我的情况下是如何工作的吗？对此，我真的非常感激。谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-29T17:17:03.343

我用同一网络中的两台 PC 尝试了这个示例。一个使用 Java 1.7.0_40 作为服务器，另一个使用 Java 1.7.0_45 作为客户端。两台 PC 均基于 Windows。我遇到了 denshaotoko 提出的同样问题。

解决方案是：

服务器端：

```
C:\>start rmiregistry -J-Djava.rmi.server.useCodebaseOnly=false 
```

Java 7 需要 -J-Djava.rmi.server.useCodebaseOnly 选项，因为默认值为 true，这意味着 RMI 注册表不会查找除了它启动的目录之外的其他代码库。那么下一步启动服务器就会失败。详情见这里：[http ://docs.oracle.com/javase/7/docs/technotes/guides/rmi/enhancements-7.html](http://docs.oracle.com/javase/7/docs/technotes/guides/rmi/enhancements-7.html)

```
C:\>java -cp c:\rmi;c:\rmi\compute.jar -Djava.rmi.server.useCodebaseOnly=false -Djava.rmi.server.codebase=file:/c:/rmi/compute.jar -Djava.rmi.server.hostname=192.168.1.124 -Djava.security.policy=c:\rmi\server.policy engine.ComputeEngine 
```

再次将 java.rmi.server.useCodebaseOnly 设置为 false。否则服务器不会使用客户端提供的代码库。然后客户端将得到类未找到异常。192.168.1.124的主机名是服务器的IP地址

你应该得到“ComputeEngine bound”

客户端：

```
C:\>java -cp c:\rmi;c:\rmi\compute.jar -Djava.rmi.server.codebase=http://54.200.126.244/rmi/ -Djava.security.policy=c:\rmi\client.policy client.ComputePi 192.168.1.124 45 
```

我尝试了 file:/ URL 但没有成功。我认为原因很简单。有太多的安全限制使服务器无法访问客户端 PC 上的文件。所以我把 Pi.class 文件放在我的网络服务器上，它位于`http://54.200.126.244`rmi 目录下。我的网络服务器使用 Apache。任何PC都可以访问`http://54.200.126.244/rmi/`，因此问题得到了彻底解决。

最后，您应该能够使用相同的命令从任何目录启动 rmiregistry、服务器和客户端。否则，即使你能成功，某些设置可能仍然不正确。例如，如果您从包含“compute”目录的目录启动 rmiregistry（在我的情况下是 C:\rmi），则 rmiregistry 将直接从其起始目录加载 Compute.class 和 Task.class，因此 -Djava 的设置.rmi.server.codebase=file:/c:/rmi/compute.jar 变得无用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-30T10:31:32.100

您正在尝试向服务器发送未知的类的序列化对象。

当你执行：

```
 Pi task = new Pi(Integer.parseInt(args[1]));
  BigDecimal pi = comp.executeTask(task); 
```

服务器并不真正知道什么是`Pi`. 由于`Pi`该类是 API 的一部分，因此它也应该加载到服务器上。

当我有一个需要远程执行某事的应用程序时，例如使用`RMI`Spring Remoting 或类似的，我将我的项目分为 3 个项目：`API`服务器和客户端。API 项目将具有与功能相关的所有接口和模型类（此项目将生成一个 jar，并且或多或少类似于您的计算机 JAR）。服务器将导入 API JAR，实现接口并通过远程层提供服务（就像您对服务器所做的那样），客户端就像您对客户端所做的那样。

当您使用序列化时，双方都必须知道类本身。然后传输的是对象的状态，以便在另一侧重建它。

> 序列化是 RMI 用来在 JVM 之间传递对象的机制，可以作为从客户端到服务器的方法调用中的参数，也可以作为方法调用的返回值。

[关于 RMI 的一点序列化，](http://oreilly.com/catalog/javarmi/chapter/ch10.html)作者 William Grosso（2001 年 10 月）。这里还有更多信息[。](http://oreilly.com/catalog/javarmi/chapter/ch10.html#60326)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-05T19:49:36.757

> 我的问题是，Pi.class 真的需要在服务器上才能让我的程序运行吗？我的理解是（如果我错了，请纠正我）我将该类的一个实例发送到服务器，服务器会知道如何处理它，即它不关心实现。

你理解正确。Pi.class 编译时不需要在服务器上，但服务器确实需要在运行时下载它！（Pi 必须是可序列化的）

问题是：服务器如何知道何时需要下载 Pi.class？

答案是：通过客户端提供的 java.rmi.server.codebase 设置的值。客户端必须设置 java.rmi.server.codebase 选项。你必须说 Pi.class 在哪里。将 Pi.class 的副本放在公共目录中进行部署是一种常见的习惯。因此完整的解决方案是：

1.  结构：

    ```
    compute.jar
    client\
    |-org\
    |   |-examples\
    |       |-rmi\
    |           |client\
    |               |--> ComputePi     // client main
    |               |--> Pi            // implements Task
    |-deploy\            
    |   |-org\
    |       |-examples\
    |           |-rmi\
    |               |-client\ // directory that will contain the deployment copy of Pi.class
    |--> client.policy  

    server\
    |-org\
    |   |-examples\
    |       |-rmi\
    |           |-engine\
    |               |--> ComputeEngine // server main, implements Compute
    |--> server.policy 
    ```

    其中 compute.jar 是之前创建的 jar 文件

    ```
    cd C:\Users\Public\RMI\
    javac compute\Compute.java compute\Task.java
    jar cvf compute.jar compute\*.class 
    ```

    您是否在 java 文件中正确设置了 package 和 import 命令？因为你修改了教程的原始结构......

2.  编译服务器：

    ```
    C:\Users\Public\RMI\> cd server
    C:\Users\Public\RMI\server> javac -cp ..\compute.jar org\examples\rmi\engine\ComputeEngine.java 
    ```

3.  编译客户端：

    ```
    C:\Users\Public\RMI\> cd client
    C:\Users\Public\RMI\client> javac -cp ..\compute.jar org\examples\rmi\client\ComputePi.java org\examples\rmi\client\Pi.java 
    ```

4.  将 Pi.class 移动到部署目录

    ```
    C:\Users\Public\RMI\> cp client\org\examples\rmi\client\Pi.class client\deploy 
    ```

5.  运行 rmi 注册表。如果您使用的是 java 7，请按照 muyong 的建议设置选项 -J-Djava.rmi.server.useCodebaseOnly=false

    ```
    C:\Users\Public\RMI\> start rmiregistry -J-Djava.rmi.server.useCodebaseOnly=false 
    ```

6.  运行服务器。如果您使用的是 java 7，请按照 muyong 的建议设置选项 -J-Djava.rmi.server.useCodebaseOnly=false

    ```
    C:\Users\Public\RMI\> cd server
    C:\Users\Public\RMI\server> java -cp .;..\compute.jar 
        -Djava.rmi.server.useCodebaseOnly=false 
        -Djava.rmi.server.codebase=file:/c:/Users/Public/RMI/compute.jar
        -Djava.rmi.server.hostname=127.0.0.1
        -Djava.security.policy=server.policy
        org.examples.rmi.engine.ComputeEngine 
    ```

7.  运行客户端。**注意：**注意 java.rmi.server.codebase 设置（记住决定性的 /）

    ```
    C:\Users\Public\RMI\> cd client
    C:\Users\Public\RMI\client> java -cp .;..\compute.jar
        -Djava.rmi.server.codebase=file:/c:/Users/Public/RMI/client/deploy/
        -Djava.security.policy=client.policy
        org.examples.rmi.client.Compute.Pi 127.0.0.1 45 
    ```

让我知道它是否有效！

Ps 我不使用 Windows 操作系统，但使用 Linux，我可能会混淆 '\' 和 '/'

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-06T15:49:06.737

从 jdk 1.7 开始， useCodebaseOnly 的默认值为 true，这意味着它不会寻找其他代码库，除非它在同一目录中。

设置此 vm 参数**-Djava.rmi.server.useCodebaseOnly=false**以同时运行服务器和客户端，并提供代码库和主机名的路径。请参见下面的示例。

下面是我的实现，它根据我的目录结构。对于在 Windows 中运行，将 : (冒号) 替换为 ; （分号）。

> java -cp classes:classes/compute.jar -Djava.rmi.server.useCodebaseOnly=false -Djava.rmi.server.codebase=url: [http://localhost:4800/](http://localhost:4800/) -Djava.rmi.server.hostname=localhost - Djava.security.policy=client.policy client.ComputePi localhost 45

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-08-03T20:06:26.993

我认为您为客户端指定的代码库不正确：

`-Djava.rmi.server.codebase="file:/C:/Users/Public/RMI/compute.jar"`

这不会帮助服务器找到 client.Pi 。

“Java 教程 RMI”指定

`-Djava.rmi.server.codebase=file:/c:/home/jones/public_html/classes/`

这就是 client/Pi.class 所在的目录（即，如果有人遵循教程，“jones”在其中编写了客户端）。

不幸的是，即使遵循我自己的建议，这意味着在我的情况下指定

`-Djava.rmi.server.codebase=file:/h:/rmi-example/jones/src/`

当我启动客户端时，我会遇到与您相同的异常。

还没解决。我希望java选项`-verbose:class`能解决这个问题。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-03-11T12:54:31.397

在键盘上同时按下 Win + R 快捷键。这将打开“运行”对话框。...在运行框中键入以下命令：rundll32.exe sysdm.cpl,EditEnvironmentVariables

然后给你当前目录****

# mysql - MySql 在没有唯一键的情况下插入值不存在

> ID：11273354
> 
> 赞同：0
> 
> 时间：2012-06-30T10:26:45.777
> 
> 标签：mysql

我有一张桌子：

```
TableA
-----------
id | propertyA | propertyB 
```

如果具有 propertyA 和 propertyB 的行尚不存在，如何将新行插入表中？PropertyA 和 propertyB 不是唯一的，所以我不能使用替换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T10:57:44.350

你可以使用类似的东西：

```
INSERT INTO TableA(propertyA, propertyB)
SELECT :a, :b
FROM DUAL
LEFT JOIN TableA ON (propertyA = :a AND propertyB = :b)
WHERE TableA.id IS NULL; 
```

# windows - 调度优先级，窗口

> ID：11273355
> 
> 赞同：1
> 
> 时间：2012-06-30T10:26:54.230
> 
> 标签：windows, multithreading, windows-7, scheduling, thread-priority

基于msdn，windows os基于base prorety调度线程，作为boost动态优先级

> 系统将所有具有相同优先级的线程视为平等。系统以循环方式将时间片分配给具有最高优先级的所有线程。如果这些线程都没有准备好运行，则系统以循环方式将时间片分配给具有下一个最高优先级的所有线程。如果较高优先级的线程可以运行，系统将停止执行较低优先级的线程（不允许它完成使用其时间片），并将完整的时间片分配给较高优先级的线程。

从上面的报价

> 系统将所有具有相同优先级的线程视为平等

这是否意味着系统基于动态优先级处理线程？并且基本优先级被用作动态优先级更改的下限？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T10:50:27.233

> 基于msdn，windows os基于base prorety调度线程，作为boost动态优先级

好吧，你接着用一段漂亮的文字剪掉了，没有任何提升动态优先级的迹象。

有关这方面的更多信息，请参阅文档 - 例如[http://msdn.microsoft.com/en-us/library/windows/desktop/ms684828(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684828(v=vs.85).aspx)是一个好的开始。

简而言之，调度程序根据线程当前的优先级调度线程，并提高优先级更改，因此它们的调度方式不同。

# c# - 类构造函数错误

> ID：11273361
> 
> 赞同：1
> 
> 时间：2012-06-30T10:27:27.757
> 
> 标签：c#, asp.net

因为我们知道构造函数不是在子类中继承的，正如我在上一个问题中所问的那样 [单击此处查看问题](https://stackoverflow.com/questions/11271920/constructor-overriding)

我已经写了代码

```
namespace TestConscoleApplication
{
    abstract public class A
    {
       public int c;
       public int d;

    private  A(int a, int b)
       {
           c = a;
           d = b;

       }
        public virtual void Display1()
        {
            Console.WriteLine("{0}{1}", c, d);
        }
    }
    internal class B : A 
    {
      protected  string Msg;

      public B(string Err)

        {
            Msg = Err;

        }

        public  void Display()
        {
            Console.WriteLine(Msg);
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            B ObjB = new B("Hello");

            Console.ReadLine();
        }
    }
} 
```

当我编译代码时显示错误

> `TestConscoleApplication.A.A(int, int)`由于其保护级别，错误是不可访问的。

那为什么它显示错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T10:31:37.340

通过将*唯一*的构造函数`A`设为私有，您可以防止派生类在外部构造`A`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T10:33:04.517

Derived class constructor always call the base constructor (one of). Making it **private** you prohibit access to it from outside. In other words you make it impossible to make an instance of A outside A.

Since you made a constructor, the compiler won't generate a default public one for this class for you.

If you want to provide access to it from the class descendant but not from outside, you should make it **protected**.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T10:35:14.923

You need to have a constructor for `A` accessible to `B`, and use it. Also, the default base constructor is `base()` (i.e. the parameterless constructor), which doesn't exist on `A`. Here's one way you can resolve this (nonessential bits removed):

```
abstract public class A
{
    protected A(int a, int b)
    {
    }
}
internal class B : A
{
    public B(int a, int b, string Err)
        : base(a, b)
    {
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-30T10:33:48.427

constructors shouldn't be private otherwise you will not be able to create an instance of that class and won't be able to inherit it too, but if you want to create a private constructor create a public one with it too. For more info [Go here](http://www.codeproject.com/Articles/7011/An-Intro-to-Constructors-in-C)

# php - php pdo 语句不更新表？

> ID：11273365
> 
> 赞同：1
> 
> 时间：2012-06-30T10:28:03.017
> 
> 标签：php, mysql, pdo

我正在尝试使用以下代码更新表格，但总是到达`rowcount`并且`0`表格未更新。当我使用 phpmyadmin 时，相同的查询会更新表。

```
$query="UPDATE userprofile SET password=:newpassword WHERE userid=:userid AND password=:oldpassword";
$queryprepare=parent::getPreparedQuery($query);
$queryprepare->bindParam(':newpassword',$newpassword);
$queryprepare->bindParam(':userid',$userid);
$queryprepare->bindParam(':oldpassword',$oldpassword);
$queryprepare->execute(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T10:33:02.063

I'm not expert of PDO, but usual an UPDATE with no table modify depend on missing **commit**.

Which DB (and ISAM engine) do you use?

EDIT

looking at PDO manual I found this [post of nils andre with my googelian maily accou](http://www.php.net/manual/en/pdostatement.execute.php#108455): about the correct encoding of the connecction. I usual set all the chain (html-page, db-connection, db-column-type) with the same enconding (usually UTF-8) to avoid any problem.

In your case if your password contains some "binary" character the **where** will not match, so no update.

Simply remove the old-password condition to verify my hypothesis.

# sql - 选择视图中的最快和最佳性能

> ID：11273367
> 
> 赞同：0
> 
> 时间：2012-06-30T10:29:08.973
> 
> 标签：sql, sql-server-2008, tsql, stored-procedures, sql-view

这是我的观点：

```
CREATE VIEW [Products].[VProductFull] AS 
SELECT
    [Pr].[Id],
    [Pr].[Title],
    [Pr].[IsScanAllowed],
    [Pr].[Category_Id],
    [Cat].[Title] AS [Category],
    [Cat].[MajorCategory_Id],
    [Mc].[Title] AS [MajorCategory]
FROM [Products].[Product] AS [Pr]
INNER JOIN [Products].[Category] AS [Cat] ON [Pr].[Category_Id] = [Cat].[Id]
INNER JOIN [Products].[MajorCategory] AS [Mc] ON [Cat].[MajorCategory_Id] = [Mc].[Id];
GO 
```

我需要一个 SP 来获得`VProductFull`2`MajorCategoryId`个 SP，第一个选择使用连接，如创建视图，第二个使用自己的视图：

```
-- SP#1
CREATE PROCEDURE [Products].[GetFullProductByMajorCategory](
@MajorCategoryid            [bigint]
)
AS 
BEGIN
BEGIN TRANSACTION [FullProductByMajor]
    SELECT
        [Pr].[Id],
        [Pr].[Title],
        [Pr].[IsScanAllowed],
        [Pr].[Category_Id],
        [Cat].[Title] AS [Category],
        [Cat].[MajorCategory_Id],
        [Mc].[Title] AS [MajorCategory]
    FROM [Products].[Product] AS [Pr]
    INNER JOIN [Products].[Category] AS [Cat] ON [Pr].[Category_Id] = [Cat].[Id]
    INNER JOIN [Products].[MajorCategory] AS [Mc] ON [Cat].[MajorCategory_Id] = [Mc].[Id]
    WHERE [Mc].[Id] = @MajorCategoryid;
COMMIT TRANSACTION [FullProductByMajor]
END
GO 
```

和

```
-- SP#2
CREATE PROCEDURE [Products].[GetFullProductByMajorCategory](
@MajorCategoryid            [bigint]
)
AS 
BEGIN
BEGIN TRANSACTION [FullProductByMajor]
    SELECT 
            [VPF].[Id],
            [VPF].[Title],
            [VPF].[IsScanAllowed],
            [VPF].[Category_Id],
            [VPF].[Category],
            [VPF].[MajorCategory_Id],
            [VPF].[MajorCategory] 
    FROM [Products].[VProductFull] AS [VPF]
    WHERE [VPF].[MajorCategory_Id] = @MajorCategoryid;
COMMIT TRANSACTION [FullProductByMajor]
END
GO 
```

以上哪个SP返回速度更快，性能更好？为什么？还有另一种方法可以更快地获得更好`VProductFull`的`MajorCategoryId`性能而不是高于 SP 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T10:39:53.563

两者的执行时间相同，它们之间没有区别。在运行时，视图只会扩展到其底层查询。您可以通过查看这两个版本的查询计划来亲自了解这一点。

要进行优化，您需要制作`VProductFull`一个[索引视图](http://msdn.microsoft.com/en-us/library/aa933148%28v=sql.80%29.aspx)。意思是物化视图。然后，在从中选择时使用[`NOEXPAND`](http://msdn.microsoft.com/en-us/library/ms187373.aspx)提示。如果您想扩展有关索引视图的知识，可以[在此处](http://technet.microsoft.com/en-us/library/cc917715.aspx)阅读更多内容。

如果您不想使用索引视图，请使用非索引视图，但请确保在两个表上创建两个*非聚集索引*： on`[Pr].[Category_Id]`和 on `[Cat].[MajorCategory_Id]`。

您需要这些索引以避免聚集索引扫描，并使用更快的索引查找计划运算符。

对于第一个索引，您应该在索引中包含以下列（作为包含列，而不是索引列）：`[Title]`, `[IsScanAllowed]`, `[Id]`. 对于第二个索引，您应该包括 column `[Cat].[Title]`。

我认为您可以对两者进行试验，然后比较查询计划和执行时间（使用`SET STATISTICS TIME ON`.

我敢打赌，索引视图会更快，但是，如果您有大型基表，索引视图将对基表中的插入/更新产生影响。因此，您可能需要进行权衡以在所有情况下获得平衡的性能。

* * *

供参考，以及任何阅读此问题的人，请发布当前执行计划和时间以及应用每次修改后的执行计划和时间。如果这不是太麻烦的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T11:10:21.533

1.  为什么要`Transactions`在`Select`语句中使用？

2.  你考虑过使用`SQL Profiler`吗？这意味着您可以检查特定查询的`Reads`and 。`Duration`

3.  您在子句`Indexes`中使用的列上有吗？`Where`

4.  上面提到的`View`应该是`Indexed View`。

* * *

试试下面直接在你的查询和`Stored Proc`比较`Reads``Duration``SQL Profiler`

```
Select 
K.[MajorCategory],
[Pr].[Id],
[Pr].[Title],
[Pr].[IsScanAllowed],
[Pr].[Category_Id],
[Cat].[Title] AS [Category],
[Cat].[MajorCategory_Id],
From
(
    Select [Title] AS [MajorCategory], [Id]
    From [Products].[MajorCategory]
    WHERE [Id] = @MajorCategoryid;
)K
INNER JOIN [Products].[Category] AS [Cat] ON [Cat].[MajorCategory_Id] = K.[Id]
INNER JOIN [Products].[Product] AS [Pr] ON [Pr].[Category_Id] = [Cat].[Id] 
```

根据我的理解，在这个建议中，`Table Scan`不会`Matching records`基于`Category`和`Product`表（**这是根据 中的查询`View`**）发生的。相反，它将仅取决于`MajorCategory`Table 的单个记录。（**这是根据我的建议**）

# appcelerator - 在 Appcelerator 中构建可重用的 UI 组件

> ID：11273370
> 
> 赞同：0
> 
> 时间：2012-06-30T10:30:00.940
> 
> 标签：appcelerator

[INFO] iPhone 设备系列：iphone [INFO] iPhone SDK 版本：5.0 [INFO] Projekt/1.0 (2.0.2.GA.2ff31a3)

我正在 Appcelerator 中构建一个 iOS 应用程序，在这个应用程序中，我想为我添加到全局变量中的 UI 组件创建一个 CommonJS 模块，然后在其他 commonJS 模块中使用它。

我的代码基于这个例子：

```
http://developer.appcelerator.com/blog/2011/09/forging-titanium-episode-6-a-single-context-tabbed-application-template.html 
```

我将它添加到 app.js 中，如下所示：

```
var globals = {};

globals.Components = require ('ui/Components'); 
```

我在其他模块中使用它，如下所示：

```
var button_right = new globals.Components.NavBarButton (); 
```

这是一个好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T02:31:46.937

从[文档](https://wiki.appcelerator.org/display/guides/CommonJS+Modules+in+Titanium#CommonJSModulesinTitanium-GlobalVariables)：

> 在所有模块之间共享的 Titanium 应用程序中不应有任何全局变量。**模块需要的任何数据或模块公开的任何对象都应在构造或初始化期间传入。**

因此，您最好在新对象的初始化时传递任何其他参数，例如：

```
var module = new Module(param); 
```

# python - 使用python设置数据库

> ID：11273372
> 
> 赞同：-1
> 
> 时间：2012-06-30T10:30:13.033
> 
> 标签：python, sqlite

我正在尝试使用 python 在我的笔记本电脑上设置一个本地数据库。我在互联网上看到了教程，在开始之前需要了解一些事情：-

```
import sqlite3
    conn = sqlite3.connect('example.db')

    c = conn.cursor()

    # Create table
    c.execute('''CREATE TABLE stocks
                 (date text, trans text, symbol text, qty real, price real)''')

    # Insert a row of data
    c.execute("INSERT INTO stocks VALUES ('2006-01-05','BUY','RHAT',100,35.14)")
    conn.commit()
    c.close() 
```

在上面的代码中，数据是手动插入的。但是我的本地驱动器中有 .csv 文件，并且该文件中的数据用空格分隔。

如何将该文件中的数据插入数据库？另外，我想以excel格式提取数据。是否可以？

谢谢，马希

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T10:37:37.707

快速的谷歌搜索将我指向[python-excel](http://www.python-excel.org/)以使用 Python 读取 excel 文件。Python 包含一个[csv 模块](http://docs.python.org/library/csv.html#module-csv)。

因此，只需提取所需的数据，对其进行迭代并将其插入到您的数据库中，就好像您已经获得了所需的查询

```
c.execute("INSERT INTO stocks VALUES (?, ?, ?, ?, ?)", date, text, stext, qty, price) 
```

您还可以传递一个元组的可迭代对象，该元组`c.execute`将多次执行查询，而您不必遍历数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T10:55:18.360

使用该`csv`模块从 CSV 文件中读取数据。它具有“方言”设置，允许您指定列分隔符和引用样式。我建议使用`csv.DictReader`该类来读入您的数据，因为它允许您按名称引用读入的数据。

# php - 保护学分不被删除

> ID：11273374
> 
> 赞同：-6
> 
> 时间：2012-06-30T10:30:45.823
> 
> 标签：php

> **可能重复：**
> [部署时如何保护我的源代码？](https://stackoverflow.com/questions/9826672/how-to-protect-my-source-code-when-deployed)

你能给我一些关于如何保护一段代码（学分、页脚）不被删除的建议吗？

这只是一个文字说“由”，bla bla......如果用户删除了那段代码，我想强制它回到该位置或显示警告消息。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-30T10:46:46.410

使用 javascript 填充 div 怎么样？大多数将破解您的主题/代码的用户不会理解它的来源。尝试将 div 附加到您的 body 标签，这样即使 div 也不是用代码的 html 编写的。这可能会阻止很多努力来删除学分。你到底在建什么？上下文是什么？它是cms的主题吗？

# c# - Parallel.For 维护输出列表上的输入列表顺序

> ID：11273377
> 
> 赞同：1
> 
> 时间：2012-06-30T10:31:39.840
> 
> 标签：c#, list, parallel-processing, webforms

我想要一些关于在我决定尝试以并行方式执行的重型操作期间保持列表顺序的输入，以查看它是否会提高性能。（它做了！）

我想出了一个解决方案，但由于这是我第一次尝试任何类似的事情，如果我做了一些非常愚蠢的事情，我需要有人拍我的手。

有一个查询返回卡所有者列表，按姓名排序，然后按出生日期。这需要在网页（ASP.Net WebForms）上的表格中呈现。最初的编码人员决定他将逐个单元格 ( `TableCell`) 构建表格，将它们添加到行 ( `TableRow`) 中，然后将每一行添加到表格中。所以没有GridView，据说它的性能很差，但无论如何性能都很差:)。

数据库查询立即返回，大部分时间花在循环结果和添加表格单元格等上。

我做了以下方法来保持列表的原始顺序：

```
private TableRow[] ComposeRows(List<CardHolder> queryResult)   
{
    int queryElementsCount = queryResult.Count();
    // array with the query's size
    var rowArray = new TableRow[queryElementsCount];

    Parallel.For(0, queryElementsCount, i =>
    {
        var row = new TableRow();
        var cell = new TableCell();

        // various operations, including simple ones such as:
        cell.Text = queryResult[i].Name;
        row.Cells.Add(cell);

        // here I'm adding the current item to it's original index 
        // to maintain order in the output list
        rowArray[i] = row;
    });
    return rowArray;
} 
```

`List<CardHolder> -> TableRow[]`如您所见，因为我返回的是一种非常不同类型的数据（

~~此外，我还认为`Dispose()`在每个循环结束时对对象进行处理是个好主意，因为查询会返回一个巨大的列表，让单元格和行对象堆积在堆中可能会影响性能。（？）~~

我做的有多糟糕？如果我的有缺陷，有人有更好的解决方案吗？

经测试，用|2000| 数组，`StopWatch`表示并行合成在 63 毫秒（165082 滴答声）内完成，串行合成在 267 毫秒（698222）内完成。两者都包括将行添加到 - ( `table.Rows.AddRange()`)，然后渲染`Table`. 在不添加和渲染的情况下，并行时间为 33ms/87541t，串行时间为 178ms/467068t。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T12:12:18.167

一点代码审查：

*   `Dispose()`应该删除2 个调用。充其量它们是无害的。
*   仔细看看你是如何获得的`originalIndex`。它应该总是等于，`i`所以你不需要它。

但除了这一点精简之外，没有太多需要改进的地方。值得怀疑的是，并行执行此操作是否会有很大帮助，或者这是代码中的真正瓶颈。我怀疑大部分时间将花在处理结果上`TableRow[]`。

# java - Fullscreen stage is not working properly in JavaFX 2.1?

> ID：11273378
> 
> 赞同：3
> 
> 时间：2012-06-30T10:31:42.427
> 
> 标签：java, layout, fullscreen, javafx, fxml

The first stage that I load it always open properly as fullscreen.

```
stage.setFullScreen(true);
stage.setScene(login_scene); 
```

But when I change to another FXML the applications stays fullscreen (no top toolbar.. ), but the actual view content gets resized on the prefWidth/prefHeight of the root AnchorPane from FXML (I can see the desktop in my bottom right corner :|), and I want it to be dynamic to my screen resolution.

Thanks.

@Later Edit:

So on the start method of my main Class I load a Scene (created from an FXML doc) and set it to the Stage (the start method param). I save this stage for later use.

When I press a button with the same stage I save previously I change the scene to another FXML document

@Screenshots:

[http://tinypic.com/r/2079nqb/6](http://tinypic.com/r/2079nqb/6) - 1st scene works normally - code from start override method of the main class

```
 @Override
  public void start(Stage stage) throws Exception {
    Parent root = FXMLLoader.load(getClass().getResource("Sample.fxml"));

    stage.setScene(new Scene(root));
    stage.setFullScreen(true);
    stage.show();
    currentStage = stage;
  } 
```

[http://tinypic.com/r/szfmgz/6](http://tinypic.com/r/szfmgz/6) - after reloading the second scene - the code below from sample controller class

```
 @FXML
  private void handleButtonAction(ActionEvent event) throws IOException {
    Parent root = FXMLLoader.load(getClass().getResource("Sample.fxml"));
    JavaFXApplication12.currentStage.setScene(new Scene(root));
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T12:55:13.500

我不知道真正的原因，但这里有 2 个快速解决方法。
在`handleButtonAction`方法中：
**1）**不要创建新场景只是替换它的内容

```
 @FXML
  private void handleButtonAction(ActionEvent event) throws IOException {
    Parent root = FXMLLoader.load(getClass().getResource("Sample.fxml"));
    JavaFXApplication12.currentStage.getScene().setRoot(root);
  } 
```

**2）**如果您真的不想创建新场景，请切换全屏

```
 @FXML
  private void handleButtonAction(ActionEvent event) throws IOException {
    Parent root = FXMLLoader.load(getClass().getResource("Sample.fxml"));
    JavaFXApplication12.currentStage.setScene(new Scene(root));
    Platform.runLater(new Runnable() {
        @Override
        public void run() {
           JavaFXApplication12.currentStage.setFullScreen(false);
           JavaFXApplication12.currentStage.setFullScreen(true);
       }
    });
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T10:50:17.577

如果我知道您的担忧是正确的，那么您应该将初级阶段用作静态，或者您可以通过制作 getter 和 setter 将其提供给其他控制器。因此，要在同一阶段加载其他 fxml，您可以在加载 fxml 时将其设置为，并确保不要创建另一个场景。因为由于新场景，您实际内容已调整大小。所以你可以使用这个

在 Main.java 中：

```
YourController objYourController  = loader.getController();
objYourController.setDialogStage(primaryStage); 
```

在 YourController.java 中：

```
public void setMystage(Stage primaryStage) {
    this.primaryStage= primaryStage;
}

//To load another FXML
Parent root = FXMLLoader.load(getClass().getResource("Sample.fxml"));
primaryStage.getScene().setRoot(rootLayout); 
```

希望它会帮助你。

# java - How to differentiate devices for building socket connection

> ID：11273379
> 
> 赞同：0
> 
> 时间：2012-06-30T10:31:59.893
> 
> 标签：java, http, sockets, tcp, ip

I'm currently building an application using TCP/IP connection and app establishes connection between server and client by querying an ip address from mysql database. But let's say there are

people A and B connected to a network NET_A (220.241.XXX.XXX)

AND

people C and D connected to a network NET_B (221.221.xxx.xxx)

and if I want A and D to be connected using some sort of ip address and B and C to be connected to each others, then what kind of ip address or method should I have to use so that those people can successfully connect to each others? I've successfully connected A and B in network NET_A using local IPv4 address achieved using following code:

```
InetAddress thisIp =InetAddress.getLocalHost();
System.out.println("IP:"+thisIp.getHostAddress()); 
```

Also following is serversocket code:

```
 ServerSocket ss = new ServerSocket(PORT);
   ss.setSoTimeout(10000);
   connection = ss.accept(); 
```

Follow is client socket code:

```
connection = new Socket(InetAddress.getByName(SERVER_IP), PORT); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T16:19:58.790

您需要在两个网络中设置一个具有 IP 的路由器，并向所有主机添加一条路由，告诉它们远程网络和路由器（网关）的 IP 地址。

您可以通过启用数据包转发来设置 linux 机器来轻松完成此操作。只需添加`net.ipv4.ip_forward = 1`并`/etc/sysctl.conf`运行`sudo sysctl -p`

作为套接字程序员，路由通常不是您需要关心的事情，它是为您完成的。

# delphi - How can I get the unit name of a class if I have the class / VMT address only

> ID：11273380
> 
> 赞同：6
> 
> 时间：2012-06-30T10:32:04.000
> 
> 标签：delphi

As I read [here](http://hallvards.blogspot.de/2006/03/hack-8-explicit-vmt-calls.html),

> the VMT also contains a number of “magic” fields to support features such as parent class link, instance size, class name, dynamic method table, published methods table, published fields table, RTTI table, initialization table for magic fields, the deprecated OLE Automation dispatch table and implemented interfaces table

It looks like the VMT does not include a field which contains the unit name where the class is defined. Is there some 'compiler magic' involved?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-30T11:09:42.687

我不明白为什么要在这里涉及 VMT。TObject 已经为此公开了一个`class function UnitName`。

[System.TObject.UnitName](http://docwiki.embarcadero.com/Libraries/XE2/en/System.TObject.UnitName)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T13:00:59.957

VMT 包含一个指向类 RTTI 的指针（由`ClassInfo`方法提供）；类 RTTI 包括类单元名称。作为练习，您可以从 VMT 指针获取单元名称，我已经写了这个（在 Delphi XE 上测试）：

```
uses TypInfo;

type
  TObj = class

  end;

procedure TForm1.Button3Click(Sender: TObject);
var
  Obj: TObj;    //  dummy obj instance
  VMT: Pointer;
  P: Pointer;   // class info

begin
// you can get VMT pointer so
  Obj:= TObj.Create;
  VMT:= PPointer(Obj)^;
  Obj.Free;
// or so
  VMT:= Pointer(TObj);

  P:= PPointer(PByte(VMT) + vmtTypeInfo)^;
  if P <> nil then
    ShowMessage(GetTypeData(P).UnitName);
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-26T02:14:46.610

```
procedure MessageException(E: Exception);
var
  TI: TypInfo.PTypeInfo;
begin
  TI := E.ClassInfo;
  if Assigned(TI) then
  begin
    Dialogs.MessageDlg(TypInfo.GetTypeData(TI).UnitName + '.' +
      E.ClassName + ': ' + E.Message, Dialogs.mtError, [Dialogs.mbOK], 0, Dialogs.mbOK);
  end
  else
  begin
    Dialogs.MessageDlg(E.ClassName + ': ' + E.Message, Dialogs.mtError, [Dialogs.mbOK], 0, Dialogs.mbOK);
  end;
end; 
```

请注意，必须对 ClassInfo 进行**nil**测试。例如 SysUtils.ERangeError 没有它。

# c# - cells.InnerHtml not getting correct way

> ID：11273393
> 
> 赞同：-1
> 
> 时间：2012-06-30T10:34:39.337
> 
> 标签：c#, asp.net

```
protected void ReadHtmlTable(string patientName, string startHour, string startMinute, int rowspan)
            {
                 for(int i = 0; i <= tableAppointment.Rows.Count - 1; i++)
                    {
                        for(int j = 0; j <= tableAppointment.Rows[i].Cells.Count - 1; j++)
                        {
                            if(tableAppointment.Rows[i].Cells[j].InnerHtml.Trim() == startHour)
                            {
                                if(tableAppointment.Rows[i].Cells[j + 1].InnerHtml.Trim()== startMinute)
                                {
                                    tableAppointment.Rows[i].Cells[j + 2].InnerText = patientName;
                                    tableAppointment.Rows[i].Cells[j + 2].RowSpan = rowspan;
                                    tableAppointment.Rows[i].Cells[j + 2].Style.Add("color", "green");
                                    tableAppointment.Rows[i].Cells[j + 2].Style.Add("background", "green");
                                }
                            }
                        }
                    }
        } 
```

Above code is my server side code which executes on OnSaveStateComplete(EventArgs e) event . i am reading my html table in c#. when i check its first cell second cell text then its give result like this "\r\n\t\t\t\t\t\t\t\t\t08:00\r\n\t\t\t\t\t\t\t\t" .I have use trim at end but not work.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T10:43:24.460

**尝试这个**

```
string str = "\r\n\t\t\t\t\t\t\t\t\t08:00\r\n\t\t\t\t\t\t\t\t".Trim('\t', '\r', '\n'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T10:54:15.413

您应该可以使用 RegEx 将其从那里 `RegEx.Replace(tableAppointment.Rows[i].Cells[j + 1].InnerHtml, "\\s+", "");`

[MSDN](http://msdn.microsoft.com/en-us/library/e7f5w83z.aspx)上的 Regex.Replace 方法。那里的例子也处理了空白。

# php - 如何从图像文件中获取地理位置（坐标）？

> ID：11273394
> 
> 赞同：1
> 
> 时间：2012-06-30T10:34:44.250
> 
> 标签：php, iphone, gps, location, coordinates

我到处搜索，但找不到解决方案，所以我决定在 PHP 中为此编写自己的类。我在 iPhone 图像文件和 instagram 图像方面取得了一些成功，但我不确定它是否适用于所有其他相机，尤其是支持 Android 的手机和带 GPS 的相机。谁能帮我解决这个问题？下面是我的代码及其实现。

```
 <?php

    class Filer {

        /**
         * Some Variables
         */

        private $_gpsLatitude;
        private $_gpsLongitude;
        private $_gpsLatitudeRef;
        private $_gpsLongitudeRef;

        /**
         * Constructor Method
         */
        public function __construct(){
            /**
             * GPS Meta (In reference to iphone's image file)
             * May be Android folow the same thing (Haven't checked)
             */
            $this->_gpsLatitude = 'GPSLatitude';
            $this->_gpsLongitude = 'GPSLongitude';
            $this->_GPSLongitudeRef = 'GPSLatitudeRef';
            $this->_gpsLongitudeRef = 'GPSLongitudeRef';
        }

        /**
         * Check if the file contains GPS information
         * @param: (string)$_file
         * @return: (array) File's EXIF data (If the file contains GPS information)
         */

        public function getCoordinate($_file){
            $_Metas = $this->checkGPS($_file);
            $_GPS = $_Metas['GPS'];
            $_latitude = $this->DMStoDEC(
                $_GPS[$this->_gpsLatitude][0], 
                $_GPS[$this->_gpsLatitude][1], 
                $_GPS[$this->_gpsLatitude][2], 
                $_GPS[$this->_GPSLongitudeRef]
            );
            $_longitude = $this->DMStoDEC(
                $_GPS[$this->_gpsLongitude][0], 
                $_GPS[$this->_gpsLongitude][1], 
                $_GPS[$this->_gpsLongitude][2], 
                $_GPS[$this->_gpsLongitudeRef]
            );

            $_location = array($_latitude, $_longitude);
            return $_location;
        }

        /**
         * Check if the file contains GPS information
         * @param: (string)$_file
         * @return: (array) File's EXIF data (If the file contains GPS information)
         */
        public function checkGPS($_file){
            return exif_read_data($_file, 'GPS', true);
        }

        /**
         * Get Meta information of file
         * @param: (string)$_file
         * @return: (array) File's EXIF data
         * 
         */
        public function getExif($_file){
            return exif_read_data($_file, 'IFD0', true);
        }

        /**
         * Converts DMS ( Degrees / Minutes / Seconds )
         * To decimal format longitude / latitude
         * @param: (string)$_deg, (string)$_min, (string)$_sec, (string)$_ref
         * @return: (float)
         */
        private function DMStoDEC($_deg, $_min, $_sec, $_ref){

            $_array = explode('/', $_deg);
            $_deg = $_array[0]/$_array[1];
            $_array = explode('/', $_min);
            $_min = $_array[0]/$_array[1];
            $_array = explode('/', $_sec);
            $_sec = $_array[0]/$_array[1];

            $_coordinate = $_deg+((($_min*60)+($_sec))/3600);
            /**
             *  + + = North/East
             *  + - = North/West
             *  - - = South/West
             *  - + = South/East        
            */
            if('s' === strtolower($_ref) || 'w' === strtolower($_ref)){
                // Negatify the coordinate
                $_coordinate = 0-$_coordinate;
            }

            return $_coordinate;
        }    

        /**
         * 
         * Converts decimal longitude / latitude to DMS
         * ( Degrees / minutes / seconds ) 
         *
         * This is the piece of code which may appear to 
         * be inefficient, but to avoid issues with floating
         * point math we extract the integer part and the float
         * part by using a string function.
         * @param: (string)$_file
         * @return: (array)
         */
        private function DECtoDMS($_dec){
            $_vars = explode(".", $_dec);
            $_deg = $vars[0];
            $_tempma = "0.".$_vars[1];

            $_tempma = $_tempma * 3600;
            $_min = floor($_tempma / 60);
            $_sec = $_tempma - ($_min*60);

            return array("deg"=>$_deg, "min"=>$_min, "sec"=>$_sec);
        }

    } // End class

    /**
     *
     * Usage Example
     * 
     */
    $_file = './image2.jpg';
    $_Filer = new Filer();
    if($_Filer->checkGPS($_file)){
        $_location = $_Filer->getCoordinate($_file);
        // File doesn't have GPS information
        echo '<h4>File\'s GPS information</h4>';
        var_dump($_location);
    } else {
        // File doesn't have GPS information
        echo '<h4>Sorry your file doesn\'t supply GPS information</h4>';
        var_dump($_Filer->getExif($_file));
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T10:38:14.667

Exiv2 文档有一个很好的标签参考，可以帮助您识别您可能遗漏的字段。你的实现对我来说看起来很可靠，我看不到任何明显的错误。

[Exiv2 支持的 Exif 标签](http://www.exiv2.org/tags.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-04T09:49:34.520

你的课很棒，我今天在 android 设备上测试了它，而且......简单地工作！在我的测试中，我修改了数组的结果，如：[...]

```
array('latitude' => $_latitude, 'longitude' => $_longitude);
return $_location; 
```

# python - python match image tags from large content string using regular expressions

> ID：11273401
> 
> 赞同：0
> 
> 时间：2012-06-30T10:36:26.930
> 
> 标签：python, django

am really a noob with regular expressions, I tried to do this on my own but I couldn't understand from the manuals how to approach it. Am trying to find all img tags of a given content, I wrote the below but its returning None

```
 content = i.content[0].value
            prog = re.compile(r'^<img')
            result = prog.match(content)
            print result 
```

any suggestions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T10:53:45.663

多用途解决方案：

```
image_re = re.compile(r"""
    (?P<img_tag><img)\s+    #tag starts
    [^>]*?                  #other attributes
    src=                    #start of src attribute
    (?P<quote>["''])?       #optional open quote
    (?P<image>[^"'>]+)      #image file name
    (?(quote)(?P=quote))    #close quote
    [^>]*?                  #other attributes
    >                       #end of tag
    """, re.IGNORECASE|re.VERBOSE) #re.VERBOSE allows to define regex in readable format with comments

image_tags = []
for match in image_re.finditer(content):
    image_tags.append(match.group("img_tag"))

#print found image_tags
for image_tag in image_tags:
    print image_tag 
```

正如您在正则表达式定义中看到的那样，它包含

```
(?P<group_name>regex) 
```

`group_name`它允许您按而不是按数字访问找到的组。这是为了可读性。因此，如果要显示标签的所有`src`属性`img`，只需编写：

```
for match in image_re.finditer(content):
    image_tags.append(match.group("image")) 
```

此 image_tags 列表之后将包含图像标签的 src。

此外，如果您需要解析 html，那么有些工具就是专门为此目的而设计的。例如，它是[lxml](http://lxml.de/)，它使用[xpath](http://en.wikipedia.org/wiki/XPath)表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T10:45:24.517

我不知道 Python 但假设它使用普通的 Perl 兼容的正则表达式......

您可能想要查找“<img[^>]+>”，即：“<img”，后跟任何不是“>”的内容，然后是“>”。每场比赛都应该给你一个完整的图像标签。

# android - how to transfer object from one activity to another activity (i want to transfer mApi object of DropboxAPI )

> ID：11273402
> 
> 赞同：0
> 
> 时间：2012-06-30T10:36:39.440
> 
> 标签：android, android-intent

i have implemented Parceleble but still it shows error in the putExtra. can anyone help me to figure out what is wrong with the code and how to rectify it.i want to use mApi object in another activity . if any other way is possible then please help me out.

```
 public class DropboxActivity extends Activity implements Parcelable {
 private static final String TAG = "DropboxActivity";
 final static private String APP_KEY = "----------------";
 final static private String APP_SECRET = "-------------";
 final static private AccessType ACCESS_TYPE = AccessType.APP_FOLDER;
final static private String ACCOUNT_PREFS_NAME = "prefs";
final static private String ACCESS_KEY_NAME = "ACCESS_KEY";
final static private String ACCESS_SECRET_NAME = "ACCESS_SECRET";
DropboxAPI<AndroidAuthSession> mApi;
private boolean mLoggedIn;
private Button mSubmit;
private LinearLayout mDisplay;
private Button upload;
private Button download;
private ImageView mImage;
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    AndroidAuthSession session = buildSession();
    mApi = new DropboxAPI<AndroidAuthSession>(session);
    setContentView(R.layout.main);
    checkAppKeySetup();
    mSubmit = (Button)findViewById(R.id.auth_button);
    mSubmit.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            if (mLoggedIn) {
                logOut();
            } else {
                mApi.getSession().startAuthentication(DropboxActivity.this);
            }
        }
    });
    mDisplay = (LinearLayout)findViewById(R.id.logged_in_display);
    mImage = (ImageView)findViewById(R.id.image_view);
    upload = (Button)findViewById(R.id.upload);
    upload.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
        Intent intent = new Intent("upload");
        intent.putExtra("object", mApi);
        startActivity(intent);
        }
    });
    download = (Button)findViewById(R.id.download);
    setLoggedIn(mApi.getSession().isLinked());
}
@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
}

@Override
protected void onResume() {
    super.onResume();
    AndroidAuthSession session = mApi.getSession();
    if (session.authenticationSuccessful()) {
        try {
            session.finishAuthentication();
            TokenPair tokens = session.getAccessTokenPair();
            storeKeys(tokens.key, tokens.secret);
            setLoggedIn(true);
        } catch (IllegalStateException e) {
            showToast("Couldn't authenticate with Dropbox:" + e.getLocalizedMessage());
            Log.i(TAG, "Error authenticating", e);
        }
    }
}
private void logOut() {
    mApi.getSession().unlink();
    clearKeys();
    setLoggedIn(false);
}
private void setLoggedIn(boolean loggedIn) {
    mLoggedIn = loggedIn;
    if (loggedIn) {
        mSubmit.setText("Unlink from Dropbox");
        mDisplay.setVisibility(View.VISIBLE);
    } else {
        mSubmit.setText("Link with Dropbox");
        mDisplay.setVisibility(View.GONE);
        mImage.setImageDrawable(null);
    }
}

private void checkAppKeySetup() {
    if (APP_KEY.startsWith("CHANGE") ||
            APP_SECRET.startsWith("CHANGE")) {
        showToast("You must apply for an app key and secret from developers.dropbox.com, and add them to the DBRoulette ap before trying it.");
        finish();
        return;
    }
    Intent testIntent = new Intent(Intent.ACTION_VIEW);
    String scheme = "db-" + APP_KEY;
    String uri = scheme + "://" + AuthActivity.AUTH_VERSION + "/test";
    testIntent.setData(Uri.parse(uri));
    PackageManager pm = getPackageManager();
    if (0 == pm.queryIntentActivities(testIntent, 0).size()) {
        showToast("URL scheme in your app's " +
                "manifest is not set up correctly. You should have a " +
                "com.dropbox.client2.android.AuthActivity with the " +
                "scheme: " + scheme);
        finish();
    }
}
private void showToast(String msg) {
    Toast error = Toast.makeText(this, msg, Toast.LENGTH_LONG);
    error.show();
}
private String[] getKeys() {
    SharedPreferences prefs = getSharedPreferences(ACCOUNT_PREFS_NAME, 0);
    String key = prefs.getString(ACCESS_KEY_NAME, null);
    String secret = prefs.getString(ACCESS_SECRET_NAME, null);
    if (key != null && secret != null) {
        String[] ret = new String[2];
        ret[0] = key;
        ret[1] = secret;
        return ret;
    } else {
        return null;
    }
}
private void storeKeys(String key, String secret) {
    // Save the access key for later
    SharedPreferences prefs = getSharedPreferences(ACCOUNT_PREFS_NAME, 0);
    Editor edit = prefs.edit();
    edit.putString(ACCESS_KEY_NAME, key);
    edit.putString(ACCESS_SECRET_NAME, secret);
    edit.commit();
}

private void clearKeys() {
    SharedPreferences prefs = getSharedPreferences(ACCOUNT_PREFS_NAME, 0);
    Editor edit = prefs.edit();
    edit.clear();
    edit.commit();
}

private AndroidAuthSession buildSession() {
    AppKeyPair appKeyPair = new AppKeyPair(APP_KEY, APP_SECRET);
    AndroidAuthSession session;

    String[] stored = getKeys();
    if (stored != null) {
        AccessTokenPair accessToken = new AccessTokenPair(stored[0], stored[1]);
        session = new AndroidAuthSession(appKeyPair, ACCESS_TYPE, accessToken);
    } else {
        session = new AndroidAuthSession(appKeyPair, ACCESS_TYPE);
    }

    return session;
}
@Override
public int describeContents() {
    // TODO Auto-generated method stub
    return 0;
}
@Override
public void writeToParcel(Parcel dest, int flags) {
    // TODO Auto-generated method stub

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T13:00:52.183

我认为使您的活动可打包是一个坏主意。活动不应该通过意图传输。如果你的活动在同一个应用程序中，你根本不需要通过意图传输 - 只需坚持标准的 java 机制。

# jquery - jQuery多级可折叠垂直菜单

> ID：11273408
> 
> 赞同：1
> 
> 时间：2012-06-30T10:37:49.930
> 
> 标签：jquery, menu

我想使用 jQuery 创建一个多级菜单。

主要思想是默认情况下所有子菜单项都是折叠的。通过单击加号仅展开单击元素的子元素。再次单击它会隐藏。

我已经用我设法做的基本代码设置了一个小提琴[http://jsfiddle.net/mNW3c/1/](http://jsfiddle.net/mNW3c/1/)

它有问题 - 我无法一一正确地显示/隐藏元素。请帮助我改进它。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T11:32:57.167

您需要为显示/隐藏语句指定上下文。现在，它只是抓住了他们所有人。在这部分代码中

```
$('.has-child .plus').click(function(){
    $('.has-child.hover > ul').toggle('slow');
}); 
```

您需要指定我们正在寻找 this`.plus`的父级的第一个 ul。你可以这样做：

```
$('.has-child .plus').click(function(){
    $('ul:first', this.parentNode).toggle('slow');
}); 
```

[**演示**](http://jsfiddle.net/9FUz5/)

# c# - C# cmd output in real time

> ID：11273409
> 
> 赞同：1
> 
> 时间：2012-06-30T10:38:00.733
> 
> 标签：c#, cmd, real-time

I am writing a program that uses a hidden console CMD. Starts in the codec "ffmpeg". When converting all the time gets feedback.

I wish every 1 second charge results from the console. Unfortunately, all the codes available on the internet work on the principle that gets refund after the conversion and I want to be watching you all the time what was happening.

```
 public void ExecuteCommandSync(object command)
{
     try
     {
         // create the ProcessStartInfo using "cmd" as the program to be run,
         // and "/c " as the parameters.
         // Incidentally, /c tells cmd that we want it to execute the command that follows,
         // and then exit.
    System.Diagnostics.ProcessStartInfo procStartInfo =
        new System.Diagnostics.ProcessStartInfo("cmd", "/c " + command);

    // The following commands are needed to redirect the standard output.
    // This means that it will be redirected to the Process.StandardOutput StreamReader.
    procStartInfo.RedirectStandardOutput = true;
    procStartInfo.UseShellExecute = false;
    // Do not create the black window.
    procStartInfo.CreateNoWindow = true;
    // Now we create a process, assign its ProcessStartInfo and start it
    System.Diagnostics.Process proc = new System.Diagnostics.Process();
    proc.StartInfo = procStartInfo;
    proc.Start();
    // Get the output into a string
    string result = proc.StandardOutput.ReadToEnd();
    // Display the command output.
    Console.WriteLine(result);
      }
      catch (Exception objException)
      {
      // Log the exception
      }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T11:40:31.023

如果您想在不等待的情况下获得输出，请使用异步功能。结帐[http://msdn.microsoft.com/en-us/library/system.diagnostics.process.beginoutputreadline.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.beginoutputreadline.aspx)

设置事件处理程序

```
proc.OutputDataReceived += (s,e) => { Console.WriteLine(e.Data);}; 
```

开始异步读取标准输出

```
proc.BeginOutputReadLine(); 
```

我已修改您的代码以使用这些功能。

```
 public static void ExecuteCommandSync(object command)
    {
        try
        {
            // create the ProcessStartInfo using "cmd" as the program to be run,
            // and "/c " as the parameters.
            // Incidentally, /c tells cmd that we want it to execute the command that follows,
            // and then exit.
            var procStartInfo =
                new System.Diagnostics.ProcessStartInfo("cmd", "/c " + command);

            // The following commands are needed to redirect the standard output.
            // This means that it will be redirected to the Process.StandardOutput StreamReader.
            procStartInfo.RedirectStandardOutput = true;
            procStartInfo.UseShellExecute = false;
            // Do not create the black window.
            procStartInfo.CreateNoWindow = true;
            // Now we create a process, assign its ProcessStartInfo and start it
            var proc = new System.Diagnostics.Process();
            proc.OutputDataReceived += (s,e) => { Console.WriteLine(e.Data);};
            proc.StartInfo = procStartInfo;
            proc.Start();
            proc.BeginOutputReadLine();
            proc.WaitForExit();
        }
        catch (Exception objException)
        {
            Console.WriteLine("Error: " + objException.Message);
            // Log the exception
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T11:17:18.397

我建议在 Backgroundworker 上查看 Backgroundworker 类[MSDN](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

在这里，您有一个简单的回调机制来呈现进度，您只需要提供一个处理进度更新的处理程序。

来自 MSDN：

```
// This event handler updates the progress bar.
private void backgroundWorker1_ProgressChanged(object sender,
    ProgressChangedEventArgs e)
{
    this.progressBar1.Value = e.ProgressPercentage;
} 
```

随着

```
public void ReportProgress(
int percentProgress,
Object userState) 
```

您可以返回任何您想要的状态更改功能，尤其是您可能需要的动态进度（您的工作人员中发生了什么）。

但我不得不承认我不确定你的“实时”部分。

# facebook - How to view all users those have clicked on Facebook LIKE for a website?

> ID：11273413
> 
> 赞同：1
> 
> 时间：2012-06-30T10:38:31.427
> 
> 标签：facebook, facebook-like

This is very common thing to have Facebook-Like button on a page of website. But what we can do to view all users who has been liked our website. For example you can visit [http://teckstack.com][1].

[1]: [http://teckstack.com](http://teckstack.com) and please suggest me to do this.

It's very big question to Facebook also that we facebook has launched api for a long ago but I really fagged out by searching to get my solution.

Anybody can help?

# .net - 斯坦福解析器或 dotnet 中的替代方案

> ID：11273420
> 
> 赞同：2
> 
> 时间：2012-06-30T10:39:42.657
> 
> 标签：.net, nlp, stanford-nlp

我正在做一个 dotnet 框架中的问答项目，我需要一些可以做 NLP 过程的东西，比如词性标记和生成解析树

我知道斯坦福解析器，但对在 C# 中找到它的接口有点困惑我搜索了一个很好的替代方案，我发现：

1- [http://nlpdotnet.com/Services/Introduction.aspx](http://nlpdotnet.com/Services/Introduction.aspx) （但它不提供解析树）

我想知道是否也有一些好的选择

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T20:53:53.303

好消息，Stanford Parser（使用 IKVM.NET 为 .NET 重新编译）在[GitHub](https://github.com/sergey-tihon/fsharp-stanford-nlp-samples)上可用。[您可以在此处](http://sergeytihon.wordpress.com/2013/02/05/nlp-stanford-parser-with-f-net/)找到有关如何完成的说明。不仅可以从 F# 使用相同的程序集。它可以用于任何 .NET 语言，例如 C#。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T07:35:12.307

一种可能有效的选择是 Proxem Antelope：[http](http://www.proxem.com/Default.aspx?tabid=119) ://www.proxem.com/Default.aspx?tabid=119 。这包含了斯坦福解析器。另一种选择是 SharpNLP [http://sharpnlp.codeplex.com/](http://sharpnlp.codeplex.com/)，它将 OpenNLP 移植到 C#。还有一个 MSTParser 到 C# 的端口：[https](https://github.com/rasoolims/MSTParserCSharp/) ://github.com/rasoolims/MSTParserCSharp/ 。其他选择包括 C# 程序在单独的进程中调用 Java 解析器，或者使用 IKVM 之类的工具，让您在 .NET 应用程序中运行 Java 程序（Java VM）：http: [//sourceforge.net/apps/mediawiki/ikvm /index.php?title=Main_Page](http://sourceforge.net/apps/mediawiki/ikvm/index.php?title=Main_Page)。不过，我没有关于它是否适用于斯坦福解析器的经验。[更新：确实如此！见谢尔盖的回答。]

# javascript - this 内部嵌套函数

> ID：11273428
> 
> 赞同：0
> 
> 时间：2012-06-30T10:40:31.147
> 
> 标签：javascript, scope, this

到目前为止，为了清楚地理解，我认为 **这**始终是指函数的所有者。

我主要考虑了三种情况。

1.  实例方法，这是调用该方法的实例。
2.  事件处理程序，元素是调用事件的函数的所有者。
3.  全局命名空间中的函数，窗口是函数的所有者

但是当我创建一个内部函数并在那里调用该函数时会发生什么。即使在这种情况下，这也是指窗口。

```
function outer(){
    var inner = (function(){
        console.log(this);
    })
    inner();
}

outer(); 
```

任何人都可以简单地解释为什么这指的是窗口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T10:47:04.370

您正在考虑 OO 术语，但您发布的代码不是 OO。正如 Rob W 在他的帖子中所说，默认`this`是`window`or `undefined`in strict 模式。

`this`仅在特定功能或情况根据上下文为其提供值时才更改值。

在类模拟中使用函数的地方，即实例化（通过`new`）而不是简单地调用，`this`指向您所期望的实例。

```
function Dog(name) {
    this.name = name;
    alert(name);
}
var fido = new Dog('Fido'); //alerts 'Fido' 
```

提供上下文的其他情况`this`包括事件处理程序（至少在`addEventListener`模型中，而不是较旧的 IE）以及您自己使用`call()`或`apply()`手动设置`this`上下文的任何时间。

另外，不要认为`this`指向 JavaScript 中的函数“所有者”。在一个事件中，`this`指向受影响的元素，但将该元素视为“拥有”回调函数是没有帮助的——它只是在该元素的上下文中运行。

最后，正如 Quentin 提到的，没有办法引用`this`. 您必须先将其缓存在变量中。

```
function Dog() {
    var that = this;
    setTimeout(function() {
        alert(this); //window - setTimeout() has overwritten the 'this' context
        alert(that); //we reference our cached, outer context
    }, 500);
}
var fido = new Dog('Fido'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T10:45:02.687

`this`（在没有`new`、`bind`或魔法的`call`情况下`apply`）指的是调用函数的对象。

如果没有对象，则使用默认对象。对于网络浏览器，该对象是`window`.

```
// all comments apply to "inside the body of the bar function"
foo.bar();     // this is foo
foo.baz.bar(); // this is baz
bar();         // this is window 
```

您可以将 的值复制`this`到您正在调用的函数范围内的另一个变量。

```
function outer(){
    var that = this;
    var inner = (function(){
        console.log(that);
    })
    inner();
}

outer(); 
```

…你可以改变`this`使用各种方法的价值。

```
function outer(){
    var inner = (function(){
        console.log(this);
    })
    inner.apply(this);
}

outer(); 
```

# jsf - XPages jsonRpcService - 可以远程获取 SMD 描述吗？

> ID：11273438
> 
> 赞同：1
> 
> 时间：2012-06-30T10:43:41.873
> 
> 标签：jsf, xpages, lotus-domino, json-rpc, smd

我将 Domino 8.5.3 Extension Library 与 jsonRpcService 一起使用，但我没有从 XPage 生成页面内容，只是将其用作服务提供者。

有没有办法从 XPage 内容自动生成 SMD？

我看到它是由控件在生成客户端代码时完成的，所以我知道它一定是可能的。

如何以我可以控制的方式获取服务描述符，以便它只返回 SMD，而不是生成的整个 Javascript 块？

# wcf - 如何使用流？将 strem 转换为我从客户端收到的字节

> ID：11273439
> 
> 赞同：2
> 
> 时间：2012-06-30T10:44:25.270
> 
> 标签：wcf, tcp, stream, byte

我有一个异步服务，我必须将文件从客户端传输到服务。该服务被配置为使用流传输模式，所以如果我没记错的话，文件被传输而无需等待加载所有文件。

我想知道如何知道文件是否完成，因为我需要转换此流才能将此流转换为 byte[] 以将文件存储在数据库中。

我问这个是因为当我从客户端收到服务中的文件时，我收到一个只读流，具有可用的长度属性，并且我无法将此流转换为字节数组。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:58:16.740

为什么不创建一个内存流，然后将字节读入一个数组？

```
MemoryStream ms = new MemoryStream(dataHERE)
byte[] passing = ms.ReadByte(); 
```

# java - 在java中将一个列表插入另一个列表？

> ID：11273440
> 
> 赞同：30
> 
> 时间：2012-06-30T10:44:35.397
> 
> 标签：java

我有下面的java代码。

```
List<SomePojo> list = new ArrayList<SomePojo>();
//add 100 SomePojo objects to list. 
```

现在列表有 100 个对象。

如果我再创建一个实例，如下所示：

```
List<SomePojo> anotherList = new ArrayList<SomePojo>();
anotherList .addAll(list); 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-30T10:51:35.590

一个对象在内存中只存在一次。您的第一个添加`list`只是添加对象引用。

`anotherList.addAll`也只会添加参考。所以内存中仍然只有 100 个对象。

如果您`list`通过添加/删除元素进行更改，`anotherList`则不会更改。但是，如果您更改 中的任何对象`list`，则在从 访问它时，它的内容也会更改，`anotherList`因为从两个列表中都指向相同的引用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-30T10:48:16.820

100，它将持有相同的引用。因此，如果您对 中的特定对象进行更改`list`，它将影响 中的相同对象`anotherList`。

在任何列表中添加或删除对象都不会影响另一个。

`list`并且`anotherList`是两个不同的实例，它们仅包含它们“内部”对象的相同引用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-30T10:52:21.103

引用官方javadoc `List.addAll`：

```
Appends all of the elements in the specified collection to the end of
this list, in the order that they are returned by the specified
collection's iterator (optional operation).  The behavior of this
operation is undefined if the specified collection is modified while
the operation is in progress.  (Note that this will occur if the
specified collection is this list, and it's nonempty.) 
```

因此，您会将对象的引用复制`list`到`anotherList`. 任何不对 的引用对象进行操作的方法`anotherList`（如移除、添加、排序）都是它的本地方法，因此不会影响`list`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-30T10:54:14.290

接口**列表**中**addAll(collection c)的****Java API**节选[参见此处](https://docs.oracle.com/javase/10/docs/api/java/util/List.html)

 *****“将指定集合中的所有元素附加到此列表的末尾，按照指定集合的​​迭代器返回的顺序（可选操作）。”*

您将拥有与两个列表中一样多的对象-第一个列表中的对象数量加上第二个列表中的对象数量-在您的情况下为 100。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-30T10:46:55.730

不...一旦您执行了语句 anotherList.addAll(list) 之后，如果您更改某些列表数据，它就不会携带到另一个列表****

# node.js - 使用参数和会话从 NodeJS 发布数据

> ID：11273442
> 
> 赞同：0
> 
> 时间：2012-06-30T10:44:37.277
> 
> 标签：node.js, post, request

我正在为博客系统编写用户客户端。这就是我执行请求的方式

```
var http = require('http');
var destination='http://darkdiary.ru/users/$my_nickname/add';
var post_data = '_action=1&id=&title=message_subject01&text=message_text01&font=&size=100%25&color=&privacy=private&comment_privacy=all&tag=&tag_old=&music=&mood=&subscribe=1&prev_subscribe=';
var server = http.createClient(80, destination);
var request = server.request('POST', destination, {
    'host': destination,
    'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.47 Safari/536.11',
    'Content-Length': post_data.length,
    'Cookie': 'anonym_login=$anonym_nickname; sk=$SESSION-f72cd7c23b01f2a9fe6943bd9e'
    });
request.end(post_data,  encoding='utf8');
request.on('response', function (response) {
  console.log('STATUS: ' + response.statusCode);
  console.log('HEADERS: ' + JSON.stringify(response.headers));
  response.setEncoding('utf8');
  response.on('data', function (chunk) {
    console.log('BODY: ' + chunk);
  });
}); 
```

但是，一切似乎都很好，它给了我一个错误：

```
events.js:48
        throw arguments[1]; // Unhandled 'error' event
                       ^
Error: Parse Error
    at Socket.socketOnData (http.js:1288:20)
    at TCP.onread (net.js:374:27) 
```

我做错了什么？

PS 我已经用 $my_nickname 替换了我的实际昵称，用 $SESSION-...

**顺便说一句**，当我访问 google.com 时它可以工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T10:55:24.653

所有，我需要做的是：

```
var destination='www.darkdiary.ru';
...
var request = server.request('POST', '/users/%my_nickname/add', { 
```

现在可以了，虽然不发帖

# java - 如何使用 java config 配置 Spring ConversionService？

> ID：11273443
> 
> 赞同：7
> 
> 时间：2012-06-30T10:44:47.757
> 
> 标签：java, xml, spring, configuration

我有这样的xml：

```
<bean id="conversionService" class="org.springframework.context.support.ConversionServiceFactoryBean">
        <property name="converters">
            <list>
                <bean class="converters.AddressToStringConverter" />
                <bean class="converters.StringToAddressConverter" />
            </list>
        </property>
    </bean> 
```

它可以毫无问题地配置转换器。

但随后这段代码无法做到这一点：

```
@Configuration
public class ConversionConfiguration {

    @Bean
    public ConversionService getConversionService() {
        ConversionServiceFactoryBean bean = new ConversionServiceFactoryBean();
        bean.setConverters(getConverters());
        bean.afterPropertiesSet();
        ConversionService object = bean.getObject();
        return object;
    }

    private Set<Converter> getConverters() {
        Set<Converter> converters = new HashSet<Converter>();

        converters.add(new AddressToStringConverter());
        converters.add(new StringToAddressConverter());

        return converters;
    }
} 
```

这段配置被上下文扫描——我用调试器检查了它。问题可能出在哪里？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-30T10:59:29.420

从我的角度来看，您的问题是`Bean`名称。一旦您没有使用`@Bean(name="conversionService")`将要使用的名称显式设置名称是`getConversionService`.

从[文档](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/context/annotation/Bean.html#name%28%29)：

> 此 bean 的名称，如果是复数，则为此 bean 的别名。如果未指定，则 bean 的名称是带注释的方法的名称。如果指定，则忽略方法名称。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-12T21:13:39.013

在 SpringMVC 中，您可以扩展 WebMvcConfigurerAdapter 并将其用于基于 Java 的配置。要注册自定义转换器，您可以像这样修改“addFormatters”-方法

```
@Configuration
@EnableWebMvc
@ComponentScan(basePackages = { "..." })
public class ApplicationConfiguration extends WebMvcConfigurerAdapter
{
    @Override
    public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer)
    {
        configurer.enable();
    }

    @Bean
    public InternalResourceViewResolver getInternalResourceViewResolver()
    {
        InternalResourceViewResolver resolver = new InternalResourceViewResolver();
        resolver.setPrefix("/WEB-INF/views/");
        resolver.setSuffix(".jsp");
        return resolver;
    }

    @Override
    public void addFormatters(FormatterRegistry formatterRegistry)
    {
        formatterRegistry.addConverter(getMyConverter());
    }

    @Bean
    public StringToCounterConverter getMyConverter()
    {
        return new StringToCounterConverter();
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T15:52:38.467

当您启用日志记录时，您将看到 Spring 创建了哪些 Bean，如此[处](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-java-bean-annotation)所述。

*日志配置*

```
 <logger name="org.springframework.beans" level="DEBUG" /> 
```

*日志输出*

```
 DEBUG (AbstractAutowireCapableBeanFactory.java:458) - Finished creating instance of bean 'getConversionService' 
```

我复制+粘贴了您的代码，它在不更改名称的情况下工作。我注入`ConversionService`如下：

```
@Resource
private ConversionService conversionService; 
```

这是因为[按类型自动装配](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-factory-autowire)。所以也许你有两个`ConversionService`豆子。

# asp.net - 如何在 ASP.NET VisualBasic2010 中快速打开显示说明性文本的浏览器

> ID：11273445
> 
> 赞同：0
> 
> 时间：2012-06-30T10:45:06.417
> 
> 标签：asp.net, visual-studio-2010

我怎样才能轻松地打开一个新的浏览器，里面只有一些帮助文本？

我想创建一个将帮助文本作为参数的函数，它所做的只是打开一个显示帮助文本的新浏览器。

然后，我可以在需要帮助的地方将链接按钮放在我的网络应用程序上，这样用户就可以弹出这些浏览器并提供帮助说明以供参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T10:49:31.047

请注意，您应该在客户端而不是服务器端进行。它将类似于一个 javascript 函数，它会打开一个新的浏览器窗口，如下所示：

```
openHelp('Hello from JavaScript!');
function openHelp(content) {
 top.helpWindow=window.open('','myconsole',
  'width=350,height=250'
   +',menubar=0'
   +',toolbar=1'
   +',status=0'
   +',scrollbars=1'
   +',resizable=1')
 top.helpWindow.document.writeln(
  '<html><head><title>Console</title></head>'
   +'<body bgcolor=white onLoad="self.focus()">'
   +content
   +'</body></html>'
 )
 top.helpWindow.document.close()
} 
```

# browser - 互联网浏览器，谷歌浏览器注入

> ID：11273449
> 
> 赞同：2
> 
> 时间：2012-06-30T10:45:14.830
> 
> 标签：browser, process, code-injection, createremotethread, openprocess

我编写了在 Internet Explorer/Chrome 中注入函数的代码，但它不适用于这些进程。基本上，它用我的函数需要的所有 API、字符串和其他数据填充一个大结构，然后它打开一个进程来获取句柄，`virtualallocex`分配足够的内存来存储函数和结构，然后编写函数和分配的内存中的结构。然后它在`createremotethread`那里运行，函数作为起始地址，结构作为参数。

它适用于 calc/notepad/winamp 进程，但浏览器注入有问题。

我想知道它可能是什么，我正在使用这些 API。

```
x.xCreateFile
x.xWriteFile
x.xCloseHandle
x.xSleep
x.xVirtualAlloc
x.xVirtualFree
x.xMessageBox
x.xLoadLibrary
x.xShellExecute 
```

是因为浏览器现在受到保护并且它们以最低权限运行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T22:28:02.877

谷歌浏览器在注入方面存在一些问题。尤其是它的子进程，例如选项卡、Flash 播放器、插件等。尝试注入 ParentProcess。还要检查您从`CreateRemoteThread`. 还要确保远程线程中的所有 API 地址都是正确的

# android - Androin NDK 构建中的常见（自动包含）标头？

> ID：11273455
> 
> 赞同：0
> 
> 时间：2012-06-30T10:46:32.020
> 
> 标签：android, cocos2d-x, precompiled-headers, android-ndk

我想设置通用头文件以自动包含到项目中的每个包含/源文件中。我必须用 ndk 构建一个大型 cocos2d-x 项目，该项目在 Xcode 中编译，并且在 prefix.pch 中有一些常用的头文件。是否可以在 Android NDK 构建中配置此类标头？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T22:37:10.160

我一直在尝试使用这个[http://code.google.com/p/android/issues/detail?id=25412#makechanges](http://code.google.com/p/android/issues/detail?id=25412#makechanges)但到目前为止遇到了一些麻烦。我应用了那个补丁，它似乎包含了我的 PCH 文件，但在编译结束时我收到了这条消息：

```
make: *** No rule to make target '/cygdrive/redacted/prefix.pch', needed by 'obj/local/redacted/prefix.pch.gch'. Stop. 
```

可能是因为我使用的是 Cygwin，我不知道..

# python - 如何安装 OpenCV？

> ID：11273459
> 
> 赞同：4
> 
> 时间：2012-06-30T10:47:12.577
> 
> 标签：python, opencv, debian

我试图在我的 debian 上安装 Python 的 OpenCV 包。我跑过去`sudo apt-get install python-opencv`接受了。

但是当我`import cv`的应用程序说没有`module named cv`:(

`import cv`是从教程中获取的。什么是正确的语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T15:40:54.600

我没有在 python 上做过任何开发，但是尝试按照本教程进行操作，希望您能够找出原因。

[http://www.neuroforge.co.uk/index.php/getting-started-with-python-a-opencv](https://web.archive.org/web/20130620145414/http://www.neuroforge.co.uk/index.php/getting-started-with-python-a-opencv)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-21T09:30:02.410

正确的导入是

```
import cv2 
```

另外，这个月我在 python 中做了很多 opencv，发现这是一个很好的入门教程： http: [//trevorappleton.blogspot.com/2013/11/python-getting-started-with-opencv .html](http://trevorappleton.blogspot.com/2013/11/python-getting-started-with-opencv.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-13T05:45:14.290

激活虚拟环境后，只需在命令行下面执行：->

```
pip install opencv-python 
```

享受计算机视觉......

“搜索的很多未来都将与图片有关。计算机视觉技术将成为一件大事” **Ben Silbermann**

# android - 在android中，如何在代码中设置layout_marginRight

> ID：11273460
> 
> 赞同：2
> 
> 时间：2012-06-30T10:47:45.037
> 
> 标签：android, layout, margin

下面是一个 textview 布局，我希望在代码中将 layout_marginRight 修改为零。

```
<TextView
                android:id="@+id/status1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:layout_marginRight="@dimen/keyguard_lockscreen_status_line_font_right_margin"
                android:singleLine="true"
                android:ellipsize="marquee"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textSize="@dimen/keyguard_lockscreen_status_line_font_size"
                android:drawablePadding="4dip"
 /> 
```

当我将 aqif 代码复制到我的代码如下时，手机在开机动画时暂停。

```
private void updateStatus1() {
        if (mStatus1View != null) {
            MutableInt icon = new MutableInt(0);
            CharSequence string = getPriorityTextMessage(icon);
            mStatus1View.setText(string);
            LinearLayout.LayoutParams params = (LinearLayout.LayoutParams) mStatus1View.getLayoutParams();
            params.rightMargin = 0;
            mStatus1View.setLayoutParams(params);

            mStatus1View.setCompoundDrawablesWithIntrinsicBounds(icon.value, 0, 0, 0);
            mStatus1View.setVisibility(mShowingStatus ? View.VISIBLE : View.INVISIBLE);
        }
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-30T10:51:11.970

你可以这样做。

```
LinearLayout.LayoutParams params = (LinearLayout.LayoutParams) view.getLayoutParams();
params.rightMargin = 30;
view.setLayoutParams(params); 
```

设置值`dp`你可以这样做。

```
params.rightMargin = (int) (30f * this.getResources().getDisplayMetrics().density); 
```

并且参数的类型取决于其父级，如果您的视图父级是`LinearLayout`您的参数必须是`LinearLayout.LayoutParams`类型，如果是`RelativeLayout`，您的参数必须是`RelativeLayout.LayoutParams`类型。

问候， 阿基夫·哈米德

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T10:55:44.697

尝试使用[ViewGroup.MarginLayoutParams.rightMargin](http://developer.android.com/reference/android/view/ViewGroup.MarginLayoutParams.html)：

```
TextView extView tv = (TextView)findViewById(R.id.status1);
LinearLayout.LayoutParams params = (LinearLayout.LayoutParams)tv.getLayoutParams();
//params.setMargins(0, 0, 0, 0); //setMargins(int left, int top, int right, int bottom)
params.rightMargin=0; 
tv.setLayoutParams(params); 
```

# oauth - 无法为我的 Shopify 应用接收永久访问令牌

> ID：11273462
> 
> 赞同：5
> 
> 时间：2012-06-30T10:47:56.257
> 
> 标签：oauth, access-token, shopify

我正在按照 Shopify 说明获取特定应用/商店组合的永久令牌 ( [http://api.shopify.com/authentication.html](http://api.shopify.com/authentication.html) )。

我能够获取临时令牌，然后使用简单的 html 表单来接收永久令牌：

但我得到的响应是：{"error":"invalid_request"}

你能帮我吗？我到处搜索（Stackoverflow、Shopify 支持论坛等），但找不到如何解决这个问题的线索。我的应用程序在线并托管在 Heroku 上。

谢谢，

![图 3](../Images/fd443d34eeca217c58777ef69c7539f4.png) ![图 2](../Images/da69b8c2e83a5172742f2eafccd00570.png) ![图 1](../Images/bcb91a7a7a184dc215212b0b19b62ab6.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-07T09:02:36.263

我想我们有相似的想法！我遇到了和你完全相同的问题。我想我们都被文档弄糊涂了！

我使用`shopify_app`gem 生成了我的应用程序。这在中创建了以下方法`login_controller.rb`：

```
def finalize
  if response = request.env['omniauth.auth']
    sess = ShopifyAPI::Session.new(params['shop'], response['credentials']['token'])
    session[:shopify] = sess        
    flash[:notice] = "Logged in"
    redirect_to return_address
    session[:return_to] = nil
  else
    flash[:error] = "Could not log in to Shopify store."
    redirect_to :action => 'index'
  end
end 
```

( `ShopifyAPI::Session.new`) 的第 3 行正在为我们[执行 Shopify 身份验证的第 2 步](http://api.shopify.com/authentication.html#step_2)。它正在为我们获取永久访问令牌。

该变量`sess`现在将包含两件事：

1.  商店的 *.myshopify.com 域 ( `url`)
2.  **永久访问令牌以供将来使用**( `token`)

正如 John Duff 所说——我们已经有了访问令牌！**我们不需要 POST**到`https://SHOP_NAME.myshopify.com/admin/oauth/access_token`. `shopify_app`它在gem生成的代码中为我们处理。

在我的 finalize 方法中，我添加了一行：

```
def finalize
  if response = request.env['omniauth.auth']
    sess = ShopifyAPI::Session.new(params['shop'], response['credentials']['token'])

    Shop.find_or_create_by_myshopify_domain(sess.url, access_token: sess.token)
  ... 
```

这将创建一个商店并为其分配访问令牌。My Shop 模型具有属性`myshopify_domain`和`access_token`.

将来，如果我想为该商店使用 ShopifyAPI，我可以按照[shopify_api gem 主页上的说明进行操作](https://github.com/Shopify/shopify_api)

我花了几个小时试图弄清楚这个。我不确定文档如何更清晰。希望如果问题再次出现，人们会找到这个 StackOverflow 页面！

我希望这对你有帮助。

干杯，尼克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T00:52:59.237

一旦代码过期使用，您需要存储令牌或请求新代码。在日志中，您的一个请求成功，然后您继续使用相同的代码发出访问令牌请求，但由于代码已过期而失败。

尝试再次请求权限并使用您收到的新代码进行访问令牌调用。确保存储访问令牌，因为该代码无法再次使用。

# php - 刷新mysql驱动的下拉列表的内容而不刷新页面

> ID：11273464
> 
> 赞同：1
> 
> 时间：2012-06-30T10:47:59.643
> 
> 标签：php, javascript, mysql, drop-down-menu

我有一个 php 页面，其中包含一个由 mysql 查询填充的下拉列表。

```
$departmentsql="select `department` from `departments` order by department"; 
$resultdepartment=mysql_query($departmentsql); 
$optionsdepartment=""; 
while ($row=mysql_fetch_array($resultdepartment)) { 
    $department=$row["department"]; 
    $optionsdepartment.="<OPTION VALUE=\"$department\">".$department; 
} 
```

**下拉列表代码**

```
<SELECT NAME="department" id="department"> 
<OPTION VALUE=0 >
<?=$optionsdepartment?>
</SELECT> 
```

我在页面上有一个添加新部门的选项，该选项出现在下拉列表中。一旦我添加了部门？这可以通过弹出页面关闭或页面上的刷新链接来启动？

这可以用 PHP 完成还是需要 Javascript？

谢谢和问候， 瑞安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T10:51:03.890

您需要使用基于 AJAX 的查询来实现这一点。

# javascript - 如何使用 JS 发送带附件的邮件？

> ID：11273466
> 
> 赞同：8
> 
> 时间：2012-06-30T10:48:28.983
> 
> 标签：javascript, jquery

谁能告诉我如何使用 JavaScript 发送带有附件的邮件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T10:54:32.403

您有两种发送电子邮件的方式：

1.  使用服务器端实现发送电子邮件，通过 XMLHttpRequest 在 Javascript 中访问它
2.  从 JavaScript 打开本地电子邮件客户端，用户可以发送带有预填充数据的电子邮件。

    ```
     var link = "mailto:target@example.com"; 
     // In addition to this you can add subject or body as parameter . 
     // For e.g. 
     // "mailto:target@example.com?subject=test subject&body=my text"
     window.location.href = link; 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T10:51:05.040

JavaScript 是一种客户端语言。它不关心（实际上，不能）发送带有或不带有附件的电子邮件。你需要一些服务器端的东西。

JavaScript 只能调用服务器端脚本来发送电子邮件，例如通过 AJAX 请求它，但发送电子邮件的不是 JavaScript。

这类似于人们错误地编写诸如*“我有一些 JavaScript 正在从我的数据库中获取一些信息”之类的东西。*它不是 - 它正在请求从数据库获取信息的服务器端脚本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-30T10:52:42.077

使用纯 JavaScript，您无法从客户端发送电子邮件。请记住，JavaScript 是在客户端（即用户的浏览器）执行的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T10:52:07.097

您不能直接从 Javascript 发送电子邮件。您可以使用它进行 AJAX 调用，以从您使用的任何服务器端语言发送邮件。

如果您使用的是 PHP：

[通过 PHP 发送电子邮件](http://www.7tech.co.in/php/send-mail-with-or-without-attachment-by-using-php/)

# android - libgdx 纹理图像 透明渲染

> ID：11273467
> 
> 赞同：8
> 
> 时间：2012-06-30T10:48:31.440
> 
> 标签：android, libgdx

我已经为 2 张图像使用了纹理绘制，但背景图片变成了黑色。源图片是 png 并且它是透明的。我该如何解决这个问题？

如何渲染具有透明度的原始图像？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-25T23:01:22.843

尝试这个：

```
 spriteBatch.begin();
            //background
            seaTexture = new Texture(px);
            Color c = spriteBatch.getColor();
            spriteBatch.setColor(c.r, c.g, c.b, 1f); //set alpha to 1
            spriteBatch.draw(seaTexture, 0, 0, 480, 320);
            //foreground
            c = spriteBatch.getColor();
            spriteBatch.setColor(c.r, c.g, c.b, .3f);//set alpha to 0.3
            spriteBatch.draw(blockTexture, 50, 100, 120, 120);

            spriteBatch.end(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T15:29:21.257

`spritebatch.enableBlending()`如果您之前禁用它，请尝试。不过应该默认启用。

# php - zend 框架 where 查询语句

> ID：11273480
> 
> 赞同：2
> 
> 时间：2012-06-30T10:51:33.730
> 
> 标签：php, mysql, zend-framework, where-clause

如何使用 php 和 zend 框架在 mysql 查询中使用 And/or。现在我正在使用这个：

```
 $db=Zend_Db_Table::getDefaultAdapter();
    $select=new Zend_Db_Select($db);
    $select->from('users','*');
    $select->joinInner('rest', 'users.repository = rest.id',array('username'));
    $select->where('username='.$rest.' and sold=0');
    return $db->fetchAll($select); 
```

这是正确的方法吗？如果不是正确的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T11:10:11.037

您可以通过多次`AND`调用将 's 添加到查询中：`where()`

```
$select->where('this = ?', 'myValue')
       ->where('that = ?', 'myValue2'); 
```

这将转化为：

```
... WHERE this = 'myValue' AND that = 'myValue2' 
```

要将一个或多个`OR`'s 添加到您的查询中，请使用`orWhere()`：

```
$select->where('this = ?', 'myValue')
       ->orWhere('that = ?', 'myValue2'); 
```

这将转化为：

```
... WHERE this = 'myValue' OR that = 'myValue2' 
```

**笔记**

请务必使用`?`占位符语法，因为它是防止 SQL 注入的简单方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T11:11:12.673

这是一种方式，但你应该使用 ? 用于防止 SQL 注入的变量的占位符：

```
$select=new Zend_Db_Select($db);
$select->from('users','*');
$select->joinInner('rest', 'users.repository = rest.id', array('username'));
$select->where('username = ? and sold=0', $rest); 
```

（如果有时也来自 PHP 变量，则对 'sold' 执行相同操作。）

您还可以将 where 子句与多个`where()`调用链接在一起，或者`orWhere()`如果您想要 or 代替 and：

```
$select=new Zend_Db_Select($db);
$select->from('users','*');
$select->joinInner('rest', 'users.repository = rest.id', array('username'));
$select->where('username = ?' $rest);
$select->where('sold = ?', 0); 
```

由于 Zend_Db_Select 使用 fluent 影响，您也可以这样写：

```
$select=new Zend_Db_Select($db);
$select->from('users','*')
       ->joinInner('rest', 'users.repository = rest.id', array('username'))
       ->where('username = ?' $rest)
       ->where('sold = ?', 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T06:24:47.977

以下将解决您的问题，请参阅[PHP postgres Zend Framework Select query with WHERE 'AND' 子句](https://stackoverflow.com/q/11268303/1145086)，以更完整地了解 where() 和 orWhere() 如何工作。

```
$db=Zend_Db_Table::getDefaultAdapter();
    $select=new Zend_Db_Select($db);
    $select->from('users','*');
    $select->joinInner('rest', 'users.repository = rest.id',array('username'));
    $select->where('username= ?',$rest);//multiple where() will use AND operator in query
    $select->where('sold = ?', 0);//if you need the OR operator use the orWhere() method
    return $db->fetchAll($select); 
```

要回答问号（摘自手册）：

`fetchAll($select, $value)//most of the Zend_Db methods follow this API`

> **fetchAll() 方法：** 该方法的第一个参数是一个包含 SELECT 语句的字符串。或者，第一个参数可以是 Zend_Db_Select 类的对象。适配器自动将此对象转换为 SELECT 语句的字符串表示形式

即（？是 $value 的占位符）：
`$select->where('id = ?', $id);`
`$select->orWhere('age > ?', $age);`

您当前使用的是旧语法，虽然它仍然可以工作，但它已被弃用。

# android - 删除 Android 按钮而不更改其他按钮的布局

> ID：11273483
> 
> 赞同：0
> 
> 时间：2012-06-30T10:51:36.833
> 
> 标签：android, android-layout, android-widget

调用 removeView 方法时如何禁用按钮的偏移量？当我按下删除按钮时

## 我得到：

![默认 removeView 方法结果](../Images/19a20f0f5c5ffb5868ce7b865dc6a3b1.png)

## 我需要：

![我需要的](../Images/1c2f6f20a709e106cd709ae1d538639c.png)

我可以做这个？如果可以，怎么做。如果没有，我可以做什么。

* * *

我只需要删除按钮，因为我在相同位置添加了一个新按钮。

## 但是，当我使用 removeView 删除按钮时，例如删除 Button0，我的按钮 Button1、Button2、Button3 向左移动。移除 Button0 后，我需要将按钮置于其位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T10:55:22.807

利用

```
button1.setVisibility(View.INVISIBLE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T11:06:09.133

尝试：

```
private void removeView() {
linearLayout = (LinearLayout) findViewById(R.id.linearlayout);
int count = linearLayout.getChildCount();
if (count - 2 > 0) {
linearLayout.removeViewAt(count - 2);
}
} 
```

**编辑：**或者您可以从布局中按 id 重新设置按钮：

```
private void removeView() {
  LinearLayout linearLayout = (LinearLayout) findViewById(R.id.linear);
  Button btn_second= (Button) findViewById(R.id.second);
  linearLayout.removeView(btn_second);
} 
```

# c# - ASP.net CheckboxList 插入数据库

> ID：11273485
> 
> 赞同：0
> 
> 时间：2012-06-30T10:51:54.933
> 
> 标签：c#, asp.net, checkboxlist

我有一个页面，其中包含多个 CheckBoxList 控件，每个控件中有 4 个复选框，并且在用户点击提交按钮后，我正在尝试为 CheckBoxList 控件中选中的每个复选框运行 Insert 语句。关于我如何做到这一点的任何指南？使用 OLEDB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T11:19:05.430

您可以像这样遍历它们：

```
 for (int i = 0; i < CheckBoxList1.Items.Count; i++)
        {
            if (CheckBoxList1.Items[i].Selected)
            {
                // if item is checked do something
            }
        } 
```

# php - 最佳php实践显示错误

> ID：11273486
> 
> 赞同：0
> 
> 时间：2012-06-30T10:52:05.783
> 
> 标签：php

在视图上执行控制器操作期间是否有关于显示错误的最佳实践？我的意思是，当“在数据库中找不到登录名”或“输入值的格式不正确”或“字段需要值”时，如何显示错误？

是否有错误的数组或其他任何东西？现在我的代码看起来像：

```
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    $siteName = isset($_POST['SiteName']) ? trim($_POST['SiteName']) : null;
    $siteUrl = isset($_POST['SiteUrl']) ? trim($_POST['SiteUrl']) : null;

    if(IsNullOrEmptyString($siteName) || IsNullOrEmptyString($siteUrl)) {
        exit('Site name or site url could not be empty');
    } elseif (!preg_match('/^http\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(\/\S*)?$/', $siteUrl)){
        exit('Site url has wrong format');
    }

    $filters = array('SiteName' => $siteName, 'SiteUrl' => $siteUrl);
    if($sitesRepository->select($filters)) {
        exit('Site is already exist');
    }
} 
```

但是如果我使用退出，我的页面不会继续显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T11:02:53.843

如果您的意思是要存储所有错误并继续处理，则可以将它们放入数组中。在处理之前定义一个数组，然后将每个错误添加到该数组。例如：

```
$arrErrors = array(); 
```

然后将您的退出语句替换为：

```
$arrErrors[] = 'The error text goes here...'; 
```

完成处理后，您可以检查并输出任何错误：

```
for ($i=0; $i<count($arrErrors); $i++)
{
    echo $arrErrors[$i].'<br />'; 
} 
```

或者

```
echo implode('<br />', $arrErrors); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T11:04:21.840

正如您所说，`exit()`(and `die()`) 终止输出。这也是一种确保一旦出现问题就不会执行代码的懒惰方法，但有更好、更具可扩展性的方法。

一种是将任何错误提交到变量中，然后在执行任何以尚未出现错误为条件的代码之前检查它。然后，当我们输出时，我们将错误转发给用户。

```
//let's say some error just occurred
$error = 'some error!';

//some code that should happen only if there's no error yet
if (!isset($error)) doSomething();

//then, when we get to output, display any error
if (isset($error)) echo "<h3 class='error'>".$error."</h3>"; 
```

编辑 - 正如 sk00V 所说，您可能还想记录多个错误，并将它们推送到数组中。我的示例假设您希望在出现第一个错误时退出，这就是您的代码所建议的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T11:09:54.433

实际显示系统出了什么问题从来都不是最佳实践。

```
//let's say some error just occurred
$error = 'some error!';

//some code that should happen only if there's no error yet
if (!isset($error)) doSomething();

//then, when we get to output, display any error
if (isset($error)) header("Location: error.html"); 
```

如果代码有任何问题，而不是显示错误，只需将用户重定向到自定义错误页面，并显示一些不会导致用户过多担心问题的消息。而不是向他展示他的记录在数据库中没有找到，这可能会让他感到害怕。

只需将他重定向到错误页面，并向他展示，您知道出了什么问题，并且您的团队正在努力解决它。

（显示一些幽默的错误信息可能会帮助你）

# jquery - jQuery从一个添加文本 to

I've checked some similar threads, but either they were unclear or too advanced for as I'm still couple of days learning jQuery.

I have a text area:

> ID：11273489
> 
> 赞同：0
> 
> 时间：2012-06-30T10:52:09.153
> 
> 标签：jquery, append

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T10:54:35.883

为了获得 a`textarea`的价值，您可以使用`$("#idOfTextArea").val()`，例如

```
var text = $("#idOfTextArea");        // run your DOM lookups once if possible
var row = $('.smth');                 // and store results in variables
row.append("<td>"+text.val()+"</td>") // add a <td> to the <tr>, with the text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T10:53:18.543

请试试这个：

接口：[http ://api.jquery.com/val/](http://api.jquery.com/val/)

**代码**

```
$('.addText').click(function(){
    $('.smth').append($('textarea').val()); // or $('.smth').append($('.text').val());
}); 
```

# paypal - 贝宝疑难解答

> ID：11273490
> 
> 赞同：0
> 
> 时间：2012-06-30T10:52:20.283
> 
> 标签：paypal, jqtouch

我在 jqtouch 网站中有一个贝宝按钮，如下所示

```
 <div id="paypal">
  <div class="toolbar">
  <h5>Pay online</h5>
  <a href="#" class="back">Back</a>
  </div>
        <div class="s-scrollwrapper"  >
              <div>
              <form action="https://www.paypal.com/cgi-bin/webscr"method="post">
              <input type="hidden" name="cmd" value="_xclick">
              <input type="hidden" name="business" value="----@-----------">
              <input type="hidden" name="item_name" value="Test Item">
              <input type="hidden" name="amount" value="1.00">
              <input type="hidden" name="currency_code" value="NZD">
              <input type="hidden" name="button_subtype" value="services">
              <input type="hidden" name="bn"value="PP-BuyNowBF:btn_buynowCC_LG.gif:NonHosted">
              <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
              <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1"height="1">
              </form>
              </div>
        </div>
 </div> 
```

点击贝宝按钮没有任何作用。Firebuging 看到一个`post`请求，其结果代码为 ，`302`后面跟着一个`get`被取消的请求。如果我将按钮放在 jqtouch 之外的页面上，它似乎没有问题。你会怎么解决这个问题？

Chrome 控制台显示以下内容。在非 jqtouch 中，发起者是`(other)`

![在此处输入图像描述](../Images/56b5563c3902f6cc43d27c973352e090.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T11:13:30.703

这不是一个有效的 PayPal 按钮。302 将您重定向到登录，因为您没有发布有效的数据集。我建议设置一个[沙盒帐户](https://www.sandbox.paypal.com/home)并剪切并粘贴实际的按钮片段。它应该看起来更像这个[PayPal 按钮示例](https://www.paypal.com/cgi-bin/webscr?cmd=_pdn_xclick_techview_outside)。

```
<form name="_xclick" action="https://www.paypal.com/cgi-bin/webscr" method="post">
    <input type="hidden" name="cmd" value="_xclick">
    <input type="hidden" name="business" value="me@mybusiness.com">
    <input type="hidden" name="currency_code" value="USD">
    <input type="hidden" name="item_name" value="Teddy Bear">
    <input type="hidden" name="amount" value="12.99">
    <input type="image" src="http://www.paypal.com/en_US/i/btn/btn_buynow_LG.gif" 
    border="0" name="submit" alt="Make payments with PayPal - it's fast, free and secure!">
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T12:10:51.930

Jqtouch 默认使用 AJAX 提交所有表单。这扰乱了贝宝按钮。将以下内容添加到您的初始化中

```
 formSelector: false 
```

# java - .getInetAddress() 返回的不是实际IP

> ID：11273494
> 
> 赞同：1
> 
> 时间：2012-06-30T10:52:55.203
> 
> 标签：java, sockets, network-programming, network-security

我从一个函数中获得了以下代码，该函数将主机名作为输入并应该提取该主机的证书。我需要显示远程主机的 IP 地址。我使用“.getInetAdress()”返回远程主机的 IP：http://docs.oracle.com/javase/1.5.0/docs/api/java/net/Socket.html#getInetAddress( [)](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/Socket.html#getInetAddress)。

```
SSLSocketFactory factory = HttpsURLConnection.getDefaultSSLSocketFactory();

System.out.println("Starting SSL Socket For "+hostname+" port "+port);
SSLSocket socket = (SSLSocket) factory.createSocket(hostname, port);

//To get the IP for the remote host. Format: (domain name/IP), 
//then manually covert it to string

String remoteIP=socket.getInetAddress().toString();
System.out.println("Remote address = " + remoteIP);

socket.startHandshake();     
Certificate[] serverCerts = socket.getSession().getPeerCertificates(); 
```

例如，当我运行程序时，主机是：“www.tesco.com”，即“.getInetAddress()”。将此 IP 返回给我：88.221.94.232。当我尝试在浏览器中键入此 IP 时，它给了我“无效的 URL”，即使在 URL 中添加了“https://”之后也是如此。同时，如果我尝试 ping “tesco.com”，我会得到另一个 IP：“212.140.185.177”，如果我在浏览器中输入它，它会打开 tesco 的网页。

我有什么误解？除了 getInetAddress 和 getHostAddress() 之外，还有其他方法可以获取远程主机的 IP 地址（不使用套接字）吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T10:56:08.643

您正在获取正确的 IP 地址。

> 例如，当我运行程序时，主机是：“www.tesco.com”，即“.getInetAddress()”。将此 IP 返回给我：88.221.94.232。

正确的。这就是您获得的 IP 地址`www.tesco.com`。

> 当我尝试在浏览器中键入此 IP 时，它给了我“无效的 URL”。

因为该服务器（Akamai 加速器）不知道您想要哪个网站。

> 同时，如果我尝试 ping “tesco.com”，我会得到另一个 IP：“212.140.185.177”

对，因为`tesco.com`不一样`www.tesco.com`。

> 如果我在浏览器中输入它，它会打开 tesco 的网页。

因为该网络服务器确实知道您想要哪个网站，因为它只处理`tesco.com`，与`www.tesco.com`处理许多网站的服务器不同。

如果您仔细观察，您会发现将浏览器指向`tesco.com`会将您重定向到`www.tesco.com`. 他们使用 Akamai。

# javascript - 如何发布一个json？

> ID：11273501
> 
> 赞同：0
> 
> 时间：2012-06-30T10:53:57.177
> 
> 标签：javascript, html, json, post

```
{
"entry": 
   {
      "city_id": "1234",
      "city_name": "California"
   }
} 
```

考虑这是我想从我的 html 表单发布到内容管理系统 api 的 json。我有一个带有两个文本框的表单，用于获取 city_id 和 city_name 的条目以及一个提交按钮。

我需要将上面的 json 通过 post 作为 api 的输入。我想用javascript来做。请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T11:00:39.513

你的 API 是什么样的？

POST 是一个 HTTP 操作，HTTP 协议不知道 JSON。

* * *

如果您知道需要通过 HTTP 提供 JSON 值，那么您可能需要将`JSON.stringify()`JSON 对象传递给 JSON 对象，然后将该字符串作为命名的 POST 参数传递，但这是猜测。您的 API 应该准确地告诉您它希望如何传递数据。

如果这还不够，如果您提供更多详细信息，我可以继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T10:59:24.057

这是带有自定义表单数据的 AJAX 请求的可能 jQuery 代码：

```
var form = $('#myform');
var data = {
    mail: form.find('input[name=mail]').val(),
    pass: form.find('input[name=pass]').val(),
};

$.ajax({
    type: 'POST',
    url : '/foo/bar',
    dataType : 'json',
    data : data,
    success : function(result, textStatus, jqXHR) {
        // do something with the result
    },
}); 
```

# python - 更改 New_dictionary 中键的名称，其中 New_dictionary 作为 Main_dictionary 的值

> ID：11273504
> 
> 赞同：1
> 
> 时间：2012-06-30T10:54:25.873
> 
> 标签：python, list, dictionary

我有一本字典：（键是“名称”，值是其他字典）

```
dictionary = {'subnet 10.5.5.0 netmask 255.255.255.224': 
                         {'option-domain-name': '"internal.example.org"',
                         'option-domain-name-servers': 'ns1.internal.example.org',
                         'range': '10.5.5.26 10.5.5.30', 'max-lease-time': '7200', 
                         'default-lease-time': '600', 'option-routers': '10.5.5.1',
                         'option-broadcast-address': '10.5.5.31'},
              'subnet 10.254.239.32 netmask 255.255.255.224': 
                         {'range': 'dynamic-bootp 10.254.239.40 10.254.239.60',
                          'option-routers': 'rtr-239-32-1.example.org', 
                          'option-broadcast-address': '10.254.239.31'}, 
              'subnet 10.254.239.0 netmask 255.255.255.224': 
                         {'range': '10.254.239.10 10.254.239.20',
                          'option-routers': 'rtr-239-0-1.example.org, rtr-239-0-     
                           2.example.org'}, 
              'host fantasia': {'hardware': 'ethernet 08:00:07:26:c0:a5', 
                                'fixed-address': 'fantasia.fugue.com'}, 
              'host passacaglia': {'hardware': 'ethernet 0:0:c0:5d:bd:95',
                                   'server-name': '"toccata.fugue.com"',
                                   'filename': '"vmunix.passacaglia"'}
         } 
```

我所要做的就是将每个 'option-' 更改为 'option'

```
dictionary = {'subnet 10.5.5.0 netmask 255.255.255.224': {'option domain-name': '"internal.example.org"', 'option domain-name-servers': 'ns1.internal.example.org', 'range': '10.5.5.26 10.5.5.30', 'max-lease-time': '7200', 'default-lease-time': '600', 'option routers': '10.5.5.1', 'option broadcast-address': '10.5.5.31'}, 'subnet 10.254.239.32 netmask 255.255.255.224': {'range': 'dynamic-bootp 10.254.239.40 10.254.239.60', 'option routers': 'rtr-239-32-1.example.org', 'option broadcast-address': '10.254.239.31'}, 'subnet 10.254.239.0 netmask 255.255.255.224': {'range': '10.254.239.10 10.254.239.20', 'option routers': 'rtr-239-0-1.example.org, rtr-239-0-2.example.org'}, 'host fantasia': {'hardware': 'ethernet 08:00:07:26:c0:a5', 'fixed-address': 'fantasia.fugue.com'}, 'host passacaglia': {'hardware': 'ethernet 0:0:c0:5d:bd:95', 'server-name': '"toccata.fugue.com"', 'filename': '"vmunix.passacaglia"'}} 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T11:01:59.470

```
for subdict in dictionary.values():
    for key, val in subdict.items():
        if key.startswith('option-'):
            del subdict[key]
            subdict[' '.join(key.split('-', 1))] = val 
```

因此，对于每个包含的 dict，循环遍历它的项目，如果键以 开头`option-`，则从字典中删除键，并将值存储在删除破折号的新键下。

演示：

```
>>> from pprint import pprint
>>> dictionary = {'subnet 10.5.5.0 netmask 255.255.255.224': {'option-domain-name': '"internal.example.org"', 'option-domain-name-servers': 'ns1.internal.example.org', 'range': '10.5.5.26 10.5.5.30', 'max-lease-time': '7200', 'default-lease-time': '600', 'option-routers': '10.5.5.1', 'option-broadcast-address': '10.5.5.31'}, 'subnet 10.254.239.32 netmask 255.255.255.224': {'range': 'dynamic-bootp 10.254.239.40 10.254.239.60', 'option-routers': 'rtr-239-32-1.example.org', 'option-broadcast-address': '10.254.239.31'}, 'subnet 10.254.239.0 netmask 255.255.255.224': {'range': '10.254.239.10 10.254.239.20', 'option-routers': 'rtr-239-0-1.example.org, rtr-239-0-2.example.org'}, 'host fantasia': {'hardware': 'ethernet 08:00:07:26:c0:a5', 'fixed-address': 'fantasia.fugue.com'}, 'host passacaglia': {'hardware': 'ethernet 0:0:c0:5d:bd:95', 'server-name': '"toccata.fugue.com"', 'filename': '"vmunix.passacaglia"'}}
>>> for subdict in dictionary.values():
...     for key, val in subdict.items():
...         if key.startswith('option-'):
...             del subdict[key]
...             subdict[' '.join(key.split('-', 1))] = val
... 
>>> pprint(dictionary)
{'host fantasia': {'fixed-address': 'fantasia.fugue.com',
                   'hardware': 'ethernet 08:00:07:26:c0:a5'},
 'host passacaglia': {'filename': '"vmunix.passacaglia"',
                      'hardware': 'ethernet 0:0:c0:5d:bd:95',
                      'server-name': '"toccata.fugue.com"'},
 'subnet 10.254.239.0 netmask 255.255.255.224': {'option routers': 'rtr-239-0-1.example.org, rtr-239-0-2.example.org',
                                                 'range': '10.254.239.10 10.254.239.20'},
 'subnet 10.254.239.32 netmask 255.255.255.224': {'option broadcast-address': '10.254.239.31',
                                                  'option routers': 'rtr-239-32-1.example.org',
                                                  'range': 'dynamic-bootp 10.254.239.40 10.254.239.60'},
 'subnet 10.5.5.0 netmask 255.255.255.224': {'default-lease-time': '600',
                                             'max-lease-time': '7200',
                                             'option broadcast-address': '10.5.5.31',
                                             'option domain-name': '"internal.example.org"',
                                             'option domain-name-servers': 'ns1.internal.example.org',
                                             'option routers': '10.5.5.1',
                                             'range': '10.5.5.26 10.5.5.30'}} 
```

# php - 会话在 php 中无法正常工作

> ID：11273508
> 
> 赞同：-1
> 
> 时间：2012-06-30T10:55:01.217
> 
> 标签：php, session

我的会话有问题。我有 3 个 php 页面登录、主页和编辑。当我成功创建登录会话并回家时。在家里，我有一个可以编辑的链接。但是当我去编辑会话是未设置的。我试图在两个页面中回显会话值。它在 home 中成功显示会话值，但在编辑中没有。可能是什么问题？请帮忙。

登录.php

```
 if($countStudent == 1){
     $_SESSION['stuName']= $username;
    header("location:studenthome.php"); 
```

主页.php

```
 <?php
   error_reporting(0);
   session_start();
   if(!isset($_SESSION['stuName'])) {
   echo "Click here to <a href=\"index.php\">Re-LogIn</a>";
   }

    else if(isset($_POST['logout']))
   {
   unset($_SESSION['stuName']);
    header('Location: index.php');

   }
  else if(isset($_POST['edit']))
   {
    header('Location: edit.php');

   }
    ?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"          
   <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   <title>Untitled Document</title>
     </head>
    <body>
   <div id="container">
    <?php
   if (isset($_SESSION['stuName'])) {
   ?>
     <form id="studenthome" action="studenthome.php" method="post"/>
   <div id="menubar">
    <input type="submit" name="logout" value="Logout" />
    <input type="submit" name="edit" value="Edit Profile" />
    </form>
   </div>
    <?php
       }
    ?>
  </body>
   </html> 
```

至此，一切正常。

编辑.php

```
 session_start();
     if(!isset($_SESSION['stuName'])) {
    echo "Click here to <a href=\"index.php\">Re-LogIn</a>";
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T11:38:23.847

可能`session.save_path`不可写或不存在。检查您的保存路径，`php.ini`然后检查它是否存在。

还要检查你是否有`session_destroy()`任何文件。

编辑：`ini_set('display_errors', 1);`在脚本顶部使用脚本中可能出现的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T11:24:58.127

我尝试了以下示例，它的工作正常，看看它是否解决了您的问题

**登录.php**

```
<?php session_start(); 
     $_SESSION['stuName']= "jolly";
 ?>
<a href="home.php">home</a> 
```

**主页.php**

```
<?php
   session_start();
?> 

<?php
echo "Student name=". $_SESSION['stuName'];
?>

<a href="edit.php">edit </a> 
```

**编辑.php**

```
<?php
   session_start();
   echo $_SESSION['stuName'] ;
?> 
```

它不会在评论中解释，所以我用答案来解释：P

# ruby-on-rails - Ruby on Rails 验证错误

> ID：11273513
> 
> 赞同：5
> 
> 时间：2012-06-30T10:55:26.757
> 
> 标签：ruby-on-rails, ruby, validation

我已经设置了一个小应用程序，该应用程序需要一个电子邮件地址并保存它，我已经在模型上设置了验证（唯一且有效的电子邮件）并且这些都有效。

我正在使用下面的代码来尝试保存电子邮件，如果它已经存在或者它不是有效的格式，它需要停止并设置错误消息

```
def create
    interest = KnownInterest.new( :email => params[:email] )
    if(interest.valid? and interest.save)
        flash[:notice] = "Thanks for showing interest, We'll be in touch with updates."
    else
        flash[:notice] = interest.errors.messages
    end     
    redirect_to action: "index"
end 
```

这吐出[“电子邮件无效”]，我如何让它成为一个字符串（不是我认为的数组，如果我错了，请纠正我）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-30T11:15:55.303

如果您只想要第一条消息，那么`interest.errors.messages.first`。如果你想要它们，那么类似的东西`interest.errors.full_messages.join(", ")`会将所有消息组合成一个字符串。

但是，您可能想复习一下`ActiveRecord`验证和错误。
这是一个很好的指南：

[http://guides.rubyonrails.org/active_record_validations_callbacks.html](http://guides.rubyonrails.org/active_record_validations_callbacks.html)

至少阅读：

*   第 7 节：[处理验证错误](http://guides.rubyonrails.org/v2.3.11/activerecord_validations_callbacks.html#working-with-validation-errors)
*   第 8 节：[显示验证错误](http://guides.rubyonrails.org/v2.3.11/activerecord_validations_callbacks.html#displaying-validation-errors-in-the-view)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-30T11:11:04.917

`.messages`将返回所有错误的数组。哪怕只是一个。

因此，要正确显示它们，请在您的视图中执行此操作：

```
- for error in flash[:notice] do
  = error 
```

或者，如果您喜欢`html.erb`：

```
<%- for error in flash[:notice] do %>
    <%= error %>
<%- end %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-11T21:29:10.750

这对我有用：

```
<html>
  <body>
    <%= render 'layouts/header' %>
    <div class="container">
      <% flash.each do |key, value| %>
        <div class="alert alert-<%= key %>"><%= value %></div>
      <% end %>
      <%= yield %>
      <%= render 'layouts/footer' %>
      <%= debug(params) if Rails.env.development? %>
    </div>

  </body>
</html> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-30T12:06:23.507

`interest.errors.messages.join(<any concatenating character>)`将创建一个连接数组元素的字符串。

您可以使用字符串 - 例如 "、" 、 ":" 或几乎任何东西来连接。

# photoshop - Photoshop 脚本 - 魔术橡皮擦工具

> ID：11273528
> 
> 赞同：1
> 
> 时间：2012-06-30T10:58:25.917
> 
> 标签：photoshop

我正在尝试制作一个执行以下操作的 photoshop (.jsx) 脚本。

```
Open files from folder
For each file in folder
Take Magic Eraser Tool
Click on the edge of the document (document width -1, document height -1)
Save for web as PNG 
```

除了单击文档边缘擦除背景之外，我可以做任何事情。我该怎么做？我现在可以打开一个图像并选择魔术橡皮擦工具，但我无法操纵鼠标点击边缘，所以它会变得透明。所有图像都有一个白框，所以我可以点击边缘。

有什么建议么？

感谢您的时间！

// 编辑：如何设置所选工具的公差？

安德烈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:39:01.713

PS 中的脚本工具有一些限制。在脚本中，如果你将魔术橡皮擦设置为 imagewidth-1, imageheight -1 你会得到一个错误。

```
// =======================================================
var id16821 = charIDToTypeID( "Fl  " );
var desc3348 = new ActionDescriptor();
var id16822 = charIDToTypeID( "From" );
var desc3349 = new ActionDescriptor();
var id16823 = charIDToTypeID( "Hrzn" );
var id16824 = charIDToTypeID( "#Pxl" );
desc3349.putUnitDouble( id16823, id16824, 0.0 ); //x
var id16825 = charIDToTypeID( "Vrtc" );
var id16826 = charIDToTypeID( "#Pxl" );
desc3349.putUnitDouble( id16825, id16826, 0.0 ); //y
var id16827 = charIDToTypeID( "Pnt " );
desc3348.putObject( id16822, id16827, desc3349 );
var id16828 = charIDToTypeID( "Tlrn" );
desc3348.putInteger( id16828, 32 ); //tolerance
var id16829 = charIDToTypeID( "AntA" ); //Antialias
desc3348.putBoolean( id16829, true );
var id16830 = charIDToTypeID( "Usng" );
var id16831 = charIDToTypeID( "FlCn" );
var id16832 = charIDToTypeID( "BckC" );
desc3348.putEnumerated( id16830, id16831, id16832 );
var id16833 = charIDToTypeID( "Md  " );
var id16834 = charIDToTypeID( "BlnM" );
var id16835 = charIDToTypeID( "Clar" );
desc3348.putEnumerated( id16833, id16834, id16835 );
//var id16872 = charIDToTypeID( "Cntg" );
//desc3355.putBoolean( id16872, false ); Contiguous set to false
executeAction( id16821, desc3348, DialogModes.NO ); 
```

你只是想删除背景层吗？

# c# - 使用 iTextsharp 在 Pdf 中提取超链接的问题

> ID：11273532
> 
> 赞同：1
> 
> 时间：2012-06-30T10:58:45.523
> 
> 标签：c#, pdf, annotations, itextsharp

我正在使用 iTextSharp 提取 PDF 文件中的所有超链接。

下面是我的代码，它适用于所有 PDF，但我在这个问题中附上的除外。

提取此 PDF 时，它显示链接为 count=0，注释为空。

我如何获得这些超链接？

```
var Links= pdfReader.GetLinks(PageNo); // return count=0 
```

或者

```
PdfDictionary PageDictionary = pdfReader.GetPageN(PageNo);
PdfArray Annots = PageDictionary.GetAsArray(PdfName.ANNOTS); // returns null 
```

# c99 - 将 Google V8 嵌入 ANSI C 应用程序 - 从哪里开始？

> ID：11273534
> 
> 赞同：8
> 
> 时间：2012-06-30T10:59:27.297
> 
> 标签：c99, v8, embedded-language, embedded-v8

我想将 javascript 引擎嵌入到 ANSI C 应用程序中。

事实上，我希望能够运行一些在运行时输入的代码，同时能够与一些 C 变量和函数进行交互。

那么，V8 是唯一的选择吗？我应该从哪里开始？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T11:51:52.990

有一些“嵌入快速入门”页面：

V8 JS 引擎（WebKit）：

[https://developers.google.com/v8/get_started](https://developers.google.com/v8/get_started)

[https://developers.google.com/v8/embed](https://developers.google.com/v8/embed)

SpiderMonkey JS 引擎 (Firefox):

[https://developer.mozilla.org/en/How_to_embed_the_JavaScript_engine](https://developer.mozilla.org/en/How_to_embed_the_JavaScript_engine)

LUA：[http ://heavycoder.com/tutorials/lua_embed.php](http://heavycoder.com/tutorials/lua_embed.php) [http://www.ibm.com/developerworks/linux/library/l-embed-lua/](http://www.ibm.com/developerworks/linux/library/l-embed-lua/)

在快速查看这些链接后，我认为 V8 更复杂。Lua 和 SM 都易于集成到应用程序中。要从 SM 或 Lua 调用 C 函数，您应该为每个函数编写一些包装代码。

# android - ActionBarSherlock 项目未出现在溢出中

> ID：11273537
> 
> 赞同：6
> 
> 时间：2012-06-30T10:59:43.557
> 
> 标签：android, actionbarsherlock

我正在尝试使用 ABS 将我的应用程序重新设计为 ICS 外观和感觉。获取 ActionBar 本身非常简单明了，但添加菜单项却并非如此。

我的代码如下所示：

```
 @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);
        MenuInflater inflater = getSupportMenuInflater();
        inflater.inflate(R.menu.menu, menu);
        return true;
    } 
```

正在使用所有适当的导入。

而我的 menu.xml 如下：

```
<?xml version="1.0" encoding="utf-8"?>
<menu
  xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:id="@+id/backup" android:title="@string/backupLabel"/>
  <item android:id="@+id/restore" android:title="@string/restoreLabel"/>
</menu> 
```

ActionBar 显示，但菜单表现为 2.1 菜单 - 仅从菜单按钮激活，没有可用溢出。在 ICS 模拟器上也是如此——我必须使用菜单按钮来激活菜单。

如果我添加 android:showAsAction="ifRoom" 那么这些项目会显示为操作项目 - 但不会出现在溢出中，这是我希望它们始终存在的地方。

这一切有意义吗？

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T11:06:36.177

只需在 ActionBar 上使用此代码船菜单：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/backup"
        android:showAsAction="ifRoom"
        android:title="backupLabel"/>
    <item
        android:id="@+id/restore"
        android:showAsAction="ifRoom"
        android:title="restoreLabel"/>
</menu> 
```

它的样子：

![在此处输入图像描述](../Images/e0882deff92663a03c63083ce99976d4.png)

因为如果你使用

```
android:showAsAction="ifRoom" : Only place this item in the Action Bar if there is room for it. 
```

和

```
android:showAsAction="Never" : Never place this item in the Action Bar. 
```

如果你像这样使用：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

        <item
            android:id="@+id/backup"
            android:showAsAction="ifRoom"
            android:title="backupLabel"/>
        <item
            android:id="@+id/restore"
            android:title="restoreLabel"/>
    </menu> 
```

然后它的外观：**一个在 ActionBar 上，第二个在您按下菜单按钮时打开。**

![在此处输入图像描述](../Images/7192363bc8065a49744ec2d443e5536f.png)

**注意：它在 < 3.0 Android 操作系统中运行良好，所以不用担心。**但是，如果您有多个菜单项（超过 3 个），`android:showAsAction="ifRoom"`那么它会显示您**取决于设备屏幕尺寸**。

**在 Protrait 中：**

![在此处输入图像描述](../Images/8db6d34e8ff0280fddca8c37ccb0c25f.png)

**在风景：**

![在此处输入图像描述](../Images/67809a51e62e89cf56d63c6d1f53afac.png)

* * *

**完成以上所有操作后，我会建议您在 < 3.0 Android 操作系统中使用以下方式：**

![在此处输入图像描述](../Images/8a15680bb61ef221d87352b0f8562324.png)

代码：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/file"
        android:showAsAction="ifRoom"
        android:title="file">

        <!-- "file" submenu -->
        <menu>
            <item
                android:id="@+id/create_new"
                android:title="create_new"/>
            <item
                android:id="@+id/open"
                android:title="open"/>
        </menu>
    </item>

</menu> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:20:03.970

`ForceOverflow`已在 ABS 4.1.2 中删除，创建者认为它不应该进入（请参阅更改日志注释）。我非常有信心您看到了预期的行为；任何带有运行 ICS+ 的菜单按钮的设备（例如我的 Nexus S）都不会显示溢出菜单，因为有一个专用的硬件键 - “菜单”按钮。

使用模拟器配置从模拟设备中删除菜单按钮，Android 将知道添加溢出菜单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T10:07:26.617

您可能使用的是启用了硬件键盘而不是软件的模拟器。要查看溢出菜单中的操作，请使用带有软水控件的模拟器。屏幕截图显示了两种方法。

*   编辑现有的 AVD

![编辑现有的 AVD](../Images/b1f043a411ecddf0fee7b6b52ad81f7d.png).

*   克隆现有的设备配置文件

![克隆现有的设备配置文件](../Images/0b3b7f30612f343a5536431cb0695922.png).

# ios - removeObserver 因 Core Data 而失败

> ID：11273538
> 
> 赞同：0
> 
> 时间：2012-06-30T10:59:48.653
> 
> 标签：ios, core-data, data-binding, key-value-observing

我正在使用 KVO 观察核心数据值，但是当我删除观察者时，我收到以下消息：

无法从中删除关键路径“flightname.value”的观察者，因为它未注册为观察者。

下面的代码调用了两次。第一次 _selectedFlight 为 null，因此不会触发 removeObserver。第二次我想删除，第一次分配了什么。观察者地址不变。

```
//Remove old binding.
if (_selectedFlight) {
    id oi = [_selectedFlight observationInfo];
    if (![oi isFault]) {
        //NOTE: In somehow I cant remove it.
        [_selectedFlight removeObserver:self forKeyPath:@"flightname.value"];
    }
}

_selectedFlight = [_selectedRegistration.flights objectAtIndex:(_selectedRegistration.flights.count - indexPath.row - 1)];

//Bind flightname to the Summary View.
[_selectedFlight addObserver:self forKeyPath:@"flightname.value" options:0 context:NULL]; 
```

> 在这里你可以看到observationInfo的内容和调用removeObserver之前的一些细节：
> 
> (lldb) po oi (id) $1 = 0x06b42d80 (上下文: 0x0, 属性: 0x6b425e0>)
> 
> (lldb) po self (MenuViewController *const) $2 = **0x08136f90**
> 
> (lldb) po _selectedFlight (Flight *) $3 = 0x06b26770 (entity: Flight; id: 0x6b26ef0 ; data: { date = "0x6b1b8f0 "; destination = "0x6b29140 "; flightname = "0x6b29150 "; id = 1; ladc = nil; loadsheet = nil; origin = "0x6b29160 "; 注册 = "0x6e60700 "; sta = "0xc81fb90 "; std = "0xc8203d0 "; todc = "0x6b293e0 "; })

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-16T16:13:47.200

我在遗留代码中通过了这个问题，我执行以下操作：

```
 if (object && object.observationInfo)
    [object removeObserver:self forKeyPath:@"key"]; 
```

因为我的代码是遗留代码，我不知道是什么导致了这个问题，但我发现检查 observationInfo 属性修复了它。

希望有所帮助。

# c++ - 不要通过“两阶段名称查找”得到它

> ID：11273539
> 
> 赞同：0
> 
> 时间：2012-06-30T11:00:36.930
> 
> 标签：c++

我有一个提供日志记录工具的全局宏`#define LOG_LOG(name,level,msg,...) {`我通过另一个`LENTER`间接调用/依赖的宏使用日志记录工具`LOG_LOG`（下面的定义）。宏看起来像这样（定义在 中`logger.h`）：

```
#define LOG_LOG(name,level,msg,...) { \
    #if defined(OS_MACOSX)\
    int tid=mach_thread_self();\
    #elif defined(OS_LINUX)\
    int tid=syscall(__NR_gettid);\
    #elif defined(OS_FREEBSD)\
    int tid=reinterpret_cast<int64>(pthread_self());\
    #endif\
    if (level<=LOGLEVEL_WARNING){\
            fprintf(stderr,"%s %i %s:%s():%i",name, tid, __FILE__,__FUNCTION__,__LINE__);\
            fprintf(stderr," " LOG_ADDITIONAL);\
            fprintf(stderr,"--> " msg, ##__VA_ARGS__);\
            fprintf(stderr,"\n");\
    }else{\
            printf("%s %i %s:%s():%i",name, tid, __FILE__,__FUNCTION__,__LINE__);\
            printf(" " LOG_ADDITIONAL);\
            printf("--> " msg, ##__VA_ARGS__);\
            printf("\n");\
    }\
}

#if LOGLEVEL>=LOGLEVEL_TRACE
#define LTRACE(msg,...) LOG_LOG("Trace",5,msg,##__VA_ARGS__)
#else
#define LTRACE(msg, ...) {}
#endif

#define LENTER LTRACE("entering method") 
```

这些宏的客户端代码如下所示：

```
template<typename T>
inline void tvector<T>::random() {
    LENTER; 
    for (int i = 0; i < size(); ++i) {
        elem(i) = (double) rand() / (double) RAND_MAX;
    }
} 
```

但我仍然得到错误：

```
/Users/bravegag/code/fastcode_project/code/src/vector.h: In member function 'void tvector<T>::random()':
/Users/bravegag/code/fastcode_project/code/src/vector.h:223:2: error: there are no arguments to 'LOG_LOG' that depend on a template parameter, so a declaration of 'LOG_LOG' must be available [-fpermissive] 
```

我不明白，因为这是一个全局可用且定义明确的宏，与客户端成员函数类的模板参数完全无关`tvector<T>::random()`。在研究这个问题时，我发现了链接[http://gcc.gnu.org/onlinedocs/gcc/Name-lookup.html](http://gcc.gnu.org/onlinedocs/gcc/Name-lookup.html)但这很令人困惑，而且与我手头的问题相去甚远。

这个错误告诉我 the 的定义`LOG_LOG`不可用......但它是。除了创建极度混淆的编译器错误之外，我真的看不出这种“两阶段名称查找”如何提高代码质量。

```
/Users/bravegag/code/fastcode_project/build_debug$ g++ --version
g++ (MacPorts gcc46 4.6.3_2) 4.6.3
Copyright (C) 2011 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

/Users/bravegag/code/fastcode_project/build_debug$ uname -a
Darwin Macintosh-4.local 11.4.0 Darwin Kernel Version 11.4.0: Mon Apr  9 19:32:15 PDT 2012; root:xnu-1699.26.8~1/RELEASE_X86_64 x86_64 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T11:32:04.373

```
#define LOG_LOG(name,level,msg,...) { \
    #if defined(OS_MACOSX)\                  <--------------- Heh?
    int tid=mach_thread_self();\
    #elif defined(OS_LINUX)\
    int tid=syscall(__NR_gettid);\
    #elif defined(OS_FREEBSD)\
    int tid=reinterpret_cast<int64>(pthread_self());\
    #endif\ 
```

您不能在 a 中使用另一个预处理器语句`#define`，因此您看到的其他错误很可能是因为编译器甚至不理解您的`LOG_LOG`定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T13:36:52.967

您应该将宏重写为以下内容：

```
#if defined(OS_MACOSX)
#define THREAD_ID mach_thread_self()
#elif defined(OS_LINUX)
#define THREAD_ID syscall(__NR_gettid)
#elif defined(OS_FREEBSD)
#define THREAD_ID reinterpret_cast<int64>(pthread_self())
#endif

#define LOG_LOG(name,level,msg,...) do {      \
    int64 tid = THREAD_ID;                    \
    if (level<=LOGLEVEL_WARNING) {            \
       ...                                    \
 } while(0) 
```

请注意，如果至少在您的一个选项中线程 id 将是一个 64 位整数，则您应该一直使用 64 位整数（否则您将不会显示正确的 BSD 值。请记住将适当的类型传递给 `printf`或使线程数日志平台依赖。此外，据我所知，所有三个平台都支持 POSIX，因此您可能希望提供一个更易于维护的统一实现。

# security - 基于 WSO2 ESB 方法的安全性

> ID：11273543
> 
> 赞同：1
> 
> 时间：2012-06-30T11:01:26.427
> 
> 标签：security, wso2, wso2esb, esb

目前我们已经建立了网络服务，因此每个人（拥有有效的服务帐户）都可以通过公共网络转向他们的方法并从我们的内部网络请求敏感信息。我们如何为我们的 Web 服务应用基于方法的安全性以保护这些方法？我们的一些 Web 服务包含多达 20 个方法，它们应该单独保护。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T11:41:01.333

WSO2 ESB 使用 Apache Rampart 作为 Web 服务安全引擎。Rampart 不支持方法级别的安全策略。因此，您不能为单个服务定义这样的策略。可能的方法是在 ESB 为后端服务的每个方法创建一个代理服务。然后，您将在 ESB 中为后端服务中的 20 个方法提供 20 个代理服务。现在，您可以使用不同的安全策略保护每个代理服务。然后，您的 20 个方法在另一层分别受到保护。

# jquery - 如何在 mvc 3 中使用 jquery 填充级联下拉列表？

> ID：11273544
> 
> 赞同：0
> 
> 时间：2012-06-30T11:01:32.140
> 
> 标签：jquery, .net, asp.net-mvc, asp.net-mvc-3, html-select

如何加载级联下拉列表彼此asp.net mvc3？我能怎么做？我一直在使用 [http://geekswithblogs.net/ranganh/archive/2011/06/14/cascading-dropdownlist-in-asp.net-mvc-3-using-jquery.aspx](http://geekswithblogs.net/ranganh/archive/2011/06/14/cascading-dropdownlist-in-asp.net-mvc-3-using-jquery.aspx)

但是我不能。我的错误是什么？我在 LoadJobByCustomerId 方法上添加了调试红点。但不工作。Pleqase 不要说让谷歌搜索我在 48 小时内完成......查看：

```
 <%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/ChildSite.Master" Inherits="System.Web.Mvc.ViewPage<dynamic>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Index
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
<script type="text/javascript" src="../../Scripts/jquery-1.4.4.js">

    $(document).ready(function () {
        $("#ddlCustomers").change(function () {
            var idColour = $(this).val();
            $.getJSON("/Job/LoadJobByCustomerId", { customerId: idColour },
function (modelData) {
    var select = $("#ddlJobs");
    select.empty();
    select.append($('<option/>', {
        value: 0,
        text: "Select a Colour"
    }));
    $.each(modelData, function (index, itemData) {

        select.append($('<option/>', {
            value: itemData.Value,
            text: itemData.Text
        }));
    });
});
        }); 

</script>
  <% 
   using (Html.BeginForm())
      { %>

       <table style="padding:25px; margin:10px 10px 10px 10px;" id="sample">
                <tr><td>Customer Name: </td><td>
               <%= Html.DropDownList("Customers", null, "** Please Select **", new { id="ddlCustomers"})%>
                </td></tr>
                 <tr><td>Job Name:</td><td>
              <%= Html.DropDownList("Jobs", null, "** Please Select **", new { id = "ddlJobs" })%>
                </td></tr>
                </table>
                <br />
                <div>

                </div>
         <%}%>

</asp:Content> 
```

控制器：

```
 public class JobController : Controller
    {
     public ActionResult Index()
        {
            ViewData["Customers"] = new SelectList(CustomerOperation.GetCustomers().Items, "Id", "Name", null);
            ViewData["Jobs"] = new SelectList(JobOperation.GetCustomersAssemblyList().Items, "scheduleId", "name", null);
            return View();
        }

        [AcceptVerbs(HttpVerbs.Get)]
        public JsonResult LoadJobByCustomerId(int customerId)
        {
            var jobs = JobOperation.GetCustomersAssemblyList(customerId).Items;

            var jobItems = jobs.Select(c => new SelectListItem()
            {
                Text = c.name,
                Value = c.scheduleId.ToString()

            });

            return Json(jobItems, JsonRequestBehavior.AllowGet);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T11:18:20.363

对于初学者，`<script>`您加载 jquery 的标签未正确关闭：

```
<script type="text/javascript" src="../../Scripts/jquery-1.4.4.js"> 
```

它应该是这样的：

```
<script type="text/javascript" src="<%= Url.Content("~/Scripts/jquery-1.4.4.js") %>"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#ddlCustomers').change(function () {
            var idColour = $(this).val();
            var url = '<%= Url.Action("LoadJobByCustomerId", "Job") %>';
            $.getJSON(url, { customerId: idColour }, function (modelData) {
                var select = $("#ddlJobs");
                select.empty();
                select.append($('<option/>', {
                    value: 0,
                    text: "Select a Colour"
                }));
                $.each(modelData, function (index, itemData) {
                    select.append($('<option/>', {
                        value: itemData.Value,
                        text: itemData.Text
                    }));
                });
            });
        }); 
    });
</script>

<% using (Html.BeginForm()) { %>
    <table style="padding:25px; margin:10px 10px 10px 10px;" id="sample">
        <tr>
            <td>Customer Name: </td>
            <td>
                <%= Html.DropDownList(
                    "Customers", 
                    null, 
                    "** Please Select **", 
                    new { id = "ddlCustomers" }
                )%>
            </td>
        </tr>
        <tr>
            <td>Job Name:</td>
            <td>
                <%= Html.DropDownList(
                    "Jobs", 
                    null, 
                    "** Please Select **", 
                    new { id = "ddlJobs" }
                )%>
            </td>
        </tr>
    </table>
<% } %> 
```

jQuery 1.4.4 也有点老了。也许您想切换到更新的版本。

我在您的代码中修复的另一件事是使用 Url 帮助程序而不是硬编码 url，缺少处理程序`});`的关闭，`document.ready`带有不一致的打开和关闭`<tr>`和`<td>`标签的损坏标记，...

我不知道你们是如何编写/缩进代码的，但我真的建议你们多加注意。

下次当开发一个 javascript 密集型 Web 应用程序并且某些东西不起作用时，您的直接反应应该是查看 FireBug 控制台或 Chrome 开发人员工具栏（取决于您使用的 Web 浏览器），而不是在没有任何内容的情况下在 Stack Overflow 上发布调查。FireBug 会提醒您至少 50% 您在代码中犯下的错误。

这段代码的进一步改进是通过引入视图模型和使用强类型助手来摆脱`ViewData`，正如我在这篇文章中所举例说明的那样：[https ://stackoverflow.com/a/4459084/29407](https://stackoverflow.com/a/4459084/29407)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T14:37:24.200

我建议使用 Knockout [http://knockoutjs.com/](http://knockoutjs.com/)并使用它创建一个级联下拉列表。如果您创建一个驱动页面行为的 ViewModel，您可以创建更清晰、更易于维护的代码。

看看这篇文章[http://weblogs.asp.net/raduenuca/archive/2011/03/06/asp-net-mvc-cascading-dropdown-lists-tutorial-part-1-defining-the-problem- and-the-context.aspx](http://weblogs.asp.net/raduenuca/archive/2011/03/06/asp-net-mvc-cascading-dropdown-lists-tutorial-part-1-defining-the-problem-and-the-context.aspx)

我们一直对 Continent、Region、Nation 使用类似的技术，并且代码非常易于维护和扩展。

# android - 如何比较存储在数据库中的日期（yyyy-mm-dd）并在android中对其进行排序

> ID：11273551
> 
> 赞同：0
> 
> 时间：2012-06-30T11:03:02.200
> 
> 标签：android

我正在存储 3 个不同的日期作为开始日期、结束日期、闹钟日期。

我已将它们转换为字符串并将它们存储在 sqlite 数据库中，现在我想将这 3 个日期相互比较，以便只有在符合条件时才应将日期输入数据库，否则必须显示一个警告框才能输入一个合适的日期。

条件是

1.  警报日期应小于（或）等于开始日期且不大于结束日期
2.  开始日期应小于（或）等于结束日期且不大于结束日期
3.  结束日期应大于（或）等于开始日期但不小于报警日期

只有满足上述条件的日期才应录入数据库。任何人都可以通过一些示例代码帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T11:07:40.027

您可以从数据库中获取日期作为字符串，然后将其转换为日历，使用日历的`equal(), before(), after()`方法。我认为这是最好的方法。

* * *

更新：

对于像 YYYY-MM-DD 这样的格式

```
StringTokenizer st = new StringTokenizer(startDate);
        int year = Integer.parseInt(st.nextToken("-"));
        int month = Integer.parseInt(st.nextToken("-"));
        int date= Integer.parseInt(st.nextToken("-"));
        Calendar calStartDate = Calendar.getInstance();
        calStartDate.set(Calendar.DAY_OF_MONTH, date);
        calStartDate.set(Calendar.MONTH, month - 1);
        calStartDate.set(Calendar.YEAR, year); 
```

与转换其他日期相同，如 endDate/alarmDate

现在`calStartDate.before(calAlarmDate)`根据您的情况申请等。

# asp.net-mvc-3 - Asp.Net 通知应用程序使用 signalR 仅向一个客户端发送通知

> ID：11273552
> 
> 赞同：1
> 
> 时间：2012-06-30T11:03:06.897
> 
> 标签：asp.net-mvc-3, notifications, signalr

我正在尝试使用 SignalR 制作一个通知应用程序，其中只有一个特定用户收到通知。如何使用 SignalR 执行此操作？或者有没有其他方法可以用任何其他技术制作类似的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T11:07:13.487

您可以向知道其 id 的特定客户广播消息：

```
var connection = Connection.GetConnection<MyConnection>();
connection.Broadcast(clientId, "some message to broadcast"); 
```

更新检查文档以获取最新语法[https://github.com/SignalR/SignalR/wiki](https://github.com/SignalR/SignalR/wiki)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-20T13:25:10.060

看起来 API 已更新。以下是向调用客户端发送消息的方式。

```
Clients.Caller.addContosoChatMessageToPage(name, message); 
```

来自[Hubs API 指南](http://www.asp.net/signalr/overview/hubs-api/hubs-api-guide-server#selectingclients)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T17:58:55.510

是的你可以。请参阅此处的链接[SignalR wiki - 集线器](https://github.com/SignalR/SignalR/wiki/Hubs)

```
public class MyHub : Hub
{
     public void Send(string data)
     {

         // Similar to above, the more verbose way
         Clients[Context.ConnectionId].addMessage(data);
     }
} 
```

# php - PHP ZipArchive->close() 非常慢

> ID：11273555
> 
> 赞同：2
> 
> 时间：2012-06-30T11:03:35.593
> 
> 标签：php, zip

我正在使用 ZipArchive 以增量方式压缩网站。我多次调用脚本以确保它不超过 php 最大执行时间。

这适用于大多数网络主机。但是对于某些主机，在存档上调用 close() 非常慢，并导致超出执行时间。

例如，在一台最大执行时间为 30 秒的主机上，我压缩 20 秒，然后调用 close，但它没有及时完成。

我已经尝试过 PCLZip 作为替代方案。它是可靠的，但相比之下速度却慢得惊人。

关于它为什么以这种方式运行以及如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T11:08:16.180

例如，尝试通过 ftp运行`fopen`// 。您会注意到并需要一段时间来执行，而这是即时的。`fwrite``fclose``fopen``fclose``fwrite`

您可能会说“这不可能”`fwrite`每次都通过 ftp 发送数据。我不知道它是否有效，但我敢打赌它不会`fclose`发送所有的批处理工作。

以类似的方式`ZipArchive::close`，可能会完成您之前构建的所有内容并将其合并到最终文件中。

# c# - 无法将滚动条添加到网格

> ID：11273556
> 
> 赞同：0
> 
> 时间：2012-06-30T11:04:04.757
> 
> 标签：c#, silverlight, windows-phone-7, scrollbar, scrollview

我正在使用 Silverlight 在 Windows Phone 7 上编写应用程序。

我花了大约 3 个小时尝试向网格组件添加滚动条，这样当我在代码中动态添加很多东西时，我可以向下滚动查看它。

我的 XAML 看起来像这样：

```
<Grid x:Name="LayoutRoot" Background="Transparent">
    <ScrollViewer VerticalScrollBarVisibility="Visible" Name="Scrolling">
        <ScrollViewer.Content>
          <Grid x:Name="myGrid" HorizontalAlignment="Left" Width="650" VerticalAlignment="Top" Height =" 300" Background="Red" Grid.Row="1"  Margin="12,108,0,0"/>
        </ScrollViewer.Content>
    </ScrollViewer>

    <Grid Grid.Row="1" Height="79" HorizontalAlignment="Left" Margin="0,405,0,0" Name="grid1" VerticalAlignment="Top" Width="728"> <!-- Not important -->
    </Grid>

    <Grid Grid.Row="1" Height="73" HorizontalAlignment="Left" Margin="12,12,0,0" Name="grid2" VerticalAlignment="Top" Width="704">  <!-- Not important -->
    </Grid>
</Grid> 
```

然后在代码中：

```
myGrid.Children.Add(some_component); 
```

我尝试了很多很多方法，但没有一个有效。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T10:58:01.767

好的，您尝试过吗，因为您的布局似乎有点奇怪

```
<Grid x:Name="LayoutRoot" Background="Transparent">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>
    <Grid> 
        ...Static content here
    </Grid>
    <ScrollViewer VerticalScrollBarVisibility="Visible" Grid.Row="1">
        ...Content that scales here
    </ScrollViewer>
    <Grid Grid.Row="2"> 
        ...Static content here
    </Grid>
</Grid> 
```

这应该可以正常工作 - 它有助于理解 Grid 的工作原理。另外值得注意的是，大多数布局都可以在不使用边距的情况下移动 - 由于设备和分辨率的性质，使用边距进行布局是不好的做法。你的应用程序应该总是能很好地扩展——如果它们不能扩展，人们就会厌倦

网格有 3 种列/行模式 - 自动 ("auto")、绝对 ("300") 和填充 ("*")

**自动**- 网格单元仅缩放以适应其中的内容

**绝对**- 网格单元是您指定的大小

**填充**- 在计算任何其他具有自动/绝对值的单元格后，网格单元格填充所有剩余空间，与设置为也填充的其他单元格成比例

您还可以使用“2*”、“3*”等指定相对“填充”

所以：

```
<Grid.RowDefinitions>
    <RowDefinition Height="100" />
    <RowDefinition Height="*" />
    <RowDefinition Height="2*" />
    <RowDefinition Height="3*" />
</Grid.RowDefinitions> 
```

将产生 4 行，第一行是 100 像素高，第三行是第二行高度的两倍，第四行是第二行高度的三倍。最后 3 行将填满所有剩余空间。

还值得注意的是，网格“*”填充了父容器 - 这对于填充应用程序中的剩余空间很有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T11:51:28.413

首先，您不能`Grid`如此轻松地向 a 动态添加内容，因为您还必须更新`RowDefinitions`and `ColumnDefinitions`。如果您不指定这些定义，则子项将就地堆叠。

尝试使用`StackPanel`or`WrapPanel`代替，一旦孩子占据足够的空间，您应该会看到滚动条。

# ssh - 连接到 ssh 远程主机（在 vpn 网络中）超时

> ID：11273560
> 
> 赞同：2
> 
> 时间：2012-06-30T11:04:29.190
> 
> 标签：ssh, timeout, vpn, remote-server

我尝试连接到位于远程 vpn 网络中的 ssh 主机。一旦与我的 vpn 客户端连接，我就可以 ping ssh 主机。通过来自 vpn 网络中另一台机器的远程桌面会话的 ssh 连接工作正常。SuSEfirewall2 配置为将端口 22 路由到 sshd 服务。

当我现在尝试从我的 vpn 客户端机器上 ssh 时，操作超时：

```
ssh: connect to host xxx.xxx.61.xx port 22: Operation timed out 
```

我从vpn客户端得到的IP地址是xxx.xxx.60.xx！

当主机位于远程 vpn 网络中时，是否需要考虑设置 ssh 服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T21:26:19.413

不，VPN 不应该有任何区别。

ping 有效但 ssh 的事实似乎并不表明您的 ssh 服务的防火墙配置存在问题。

您可以使用来自 ssh-server 本身或本地网络的 ssh 服务吗？

# c# - C# 跨线程通信

> ID：11273562
> 
> 赞同：4
> 
> 时间：2012-06-30T11:04:58.413
> 
> 标签：c#, .net, multithreading, delegates

在 C#.NET 中，我编写了以下简单的后台工作线程：

```
public class MyBackgrounder
{
    public delegate void dlgAlert();
    public dlgAlert Alert;
    public event EventHandler eventAlert;
    Thread trd;

    public void Start()
    {
        if (trd == null || trd.ThreadState == ThreadState.Aborted)
        {
            trd = new Thread(new ThreadStart(Do));
        }
        trd.IsBackground = true;
        trd.Priority = ThreadPriority.BelowNormal;
        trd.Start();
    }

    void Do()
    {

        Thread.Sleep(3000);
        Done();
    }

    void Done()
    {
        if (Alert != null)
            Alert();
        if (eventAlert != null)
            eventAlert(this, new EventArgs());
        Kill();
    }

    public void Kill()
    {
        if (trd != null)
            trd.Abort();
        trd = null;
    }
}

static class Program
{

    [STAThread]
    static void Main()
    {
        MyBackgrounder bg = new MyBackgrounder();
        bg.eventAlert += new EventHandler(bg_eventAlert);
        bg.Alert = jobDone;
        bg.Start();
    }

    static void bg_eventAlert(object sender, EventArgs e)
    {
        // here, current thread's id has been changed
    }

    static void jobDone()
    { 
        // here, current thread's id has been changed
    }

} 
```

它只等待 3 秒（完成它的工作），然后引发指定事件或调用委托。直到这里没有问题，一切正常。但是当我观看“ **Thread.CurrentThread.ManagedThreadId** ”时，我看到它是后台线程！也许这很正常，但我怎样才能防止这种行为？如果您测试“ **System.Windows.Forms.Timer** ”组件并处理其“ **Tick** ”事件，您可以看到“ **Thread.CurrentThread.ManagedThreadId** ”没有从主线程 ID 更改为其他任何内容。

我能做些什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T13:10:19.403

如果您使用的是 Windows 窗体，则可以执行以下操作：

1.  在您的表单中添加属性

    ```
    private readonly System.Threading.SynchronizationContext context;
    public System.Threading.SynchronizationContext Context
    {
        get{ return this.context;}
    } 
    ```

2.  在您的表单构造函数中设置属性

    ```
    this.context= WindowsFormsSynchronizationContext.Current; 
    ```

3.  使用此属性将其作为构造函数参数传递给您的后台工作人员。这样，您的工作人员将了解您的 GUI 上下文。在您的后台工作人员中创建类似的属性。

    ```
    private readonly System.Threading.SynchronizationContext context;
    public System.Threading.SynchronizationContext Context
    {
        get{ return this.context;}
    }

    public MyWorker(SynchronizationContext context)
    {
        this.context = context;
    } 
    ```

4.  改变你的`Done()`方法：

    ```
    void Done()
    {
        this.Context.Post(new SendOrPostCallback(DoneSynchronized), null);
    }

    void DoneSynchronized(object state)
    {
        //place here code You now have in Done method.
    } 
    ```

5.  在 DoneSynchronized 您应该始终在您的 GUI 线程中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T13:11:21.270

Timer 在主线程中运行（如果主线程真的很忙，将会迟到）。如果由于某种原因您希望从主线程调用 jobDone()，例如，您可以使用 BackGroundWorker 对象，该对象在内部线程并具有一些特定事件，这些事件被称为线程安全的主线程（允许 UI 更新等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T07:36:16.710

我认为还有另一种解决方案不需要在底层（layer2）中引用“System.Windows.Forms”：
layer1（UI 表单）提供了 layer2 可以使用的超时实现。

有一个接口：

```
namespace Layer2
{
    public delegate void TimeoutAlert();

    public interface IApplicationContext
    {
        void SetTimeout(TimeoutAlert timeoutAlerthandler, int milliseconds);
    }
} 
```

和 Layer2 中的工人阶级：

```
namespace Layer2
{
    public class Worker
    {
        IApplicationContext _context;
        public void DoJob(IApplicationContext context)
        {
            _context = context;
            _context.SetTimeout(JobTimedOut,3000);
            // nothing ... (wait for other devices or user events)
        }

        void JobTimedOut()
        {
            // do something suitable for timeout error with _context or anything else
        }

    }
} 
```

在 UI 中，我们有这个：

```
using Layer2;

namespace Layer1
{
    public partial class frmTest : Form, IApplicationContext
    {

        int timeout;
        TimeoutAlert _timeoutAlerthandler;

        public frmTest()
        {
            InitializeComponent();
        }

        private void frmTest_Load(object sender, EventArgs e)
        {
            Worker w = new Worker();
            w.DoJob(this);
        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            // it's the handler of 'Timer' component named 'timer1'
            timer1.Enabled = false;

            if (_timeoutAlerthandler != null)
                _timeoutAlerthandler();
        }

        #region IApplicationContext Members

        void IApplicationContext.SetTimeout(TimeoutAlert timeoutAlerthandler, int milliseconds)
        {
            _timeoutAlerthandler = timeoutAlerthandler;
            timeout = milliseconds;

            timer1.Interval = milliseconds;
            timer1.Enabled = true;
        }

        #endregion

    }
} 
```

我再次注意到我的场景：
我有一个 Windows 应用程序项目 (layer1)，它使用一个核心项目 (layer2) 来完成一些工作。核心需要在其某些方法期间进行非阻塞超时检查，而无需创建不同的线程，因为超时后它需要再次与 UI 交互。对不起，如果我不能描述更多，因为它有点复杂（对我来说！）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T13:55:36.740

这个设计怎么样：

1.  在您的表单中创建一个 EventWaitHandle 对象。

    ```
    private EventWaitHandle layer2changed =
        new EventWaitHandle(false, EventResetMode.ManualReset); 
    ```

2.  在 Timer 事件处理程序中执行以下操作：

    ```
    if (this.layer2changed.WaitOne(0, false))
    {
        // perform UI updates according to some public properties of layer1/layer2
        this.layer2changed.Reset();
    } 
    ```

3.  在它们的构造函数中传递对 layer2changed 的​​引用到 layer1/layer2 等。

4.  每次您的 Done() 方法执行需要更新 UI 的操作时都会发出一个事件信号：

    ```
     this.referencedLayer2Changed.Set(); 
    ```

但是请注意，layer2 和 UI 的变化会有时间差异（Form.Timer 间隔越长 - 差异越长）。

**请注意：这是一个单独的解决方案，它来自于 losssleep 在对他的问题的评论中指定的附加要求。请在投票之前阅读它们。:-)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-30T11:13:56.557

到底是什么让你对后台线程感到厌烦？你所描述的，到目前为止对我来说还不错。

您检查比较的`System.Windows.Forms.Timer`那个可能正在**UI 线程上**运行，这确实会使其成为非后台线程。

来自[Thread.IsBackground](http://msdn.microsoft.com/en-us/library/system.threading.thread.isbackground.aspx)属性的 MSDN 文档（我强调）：

> 线程要么是后台线程，要么是前台线程。后台线程**与**前台线程相同，只是后台线程不会阻止进程终止。一旦属于一个进程的所有前台线程都已终止，公共语言运行时就会结束该进程。任何剩余的后台线程都将停止并且不会完成。

# iphone - 在保持触摸的同时按下时隐藏 UITabBar

> ID：11273563
> 
> 赞同：1
> 
> 时间：2012-06-30T11:05:24.933
> 
> 标签：iphone, objective-c, ios, uitabbarcontroller

我需要隐藏`UITabBar`在一个视图控制器上。我试过

```
vc.hideTabBarwhenpushed = TRUE 
```

推时；这工作得很好，但是当我`UITable`在这个视图控制器上打开一个，然后在底部`UITabBar`应该在哪里，在那个地方我`UITable`没有接触到。我试着做

```
[viewController setWantsFullScreenLayout:YES]; 
```

但它没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T12:09:10.883

使用此代码隐藏和显示您的 tabBar

//隐藏标签栏

```
- (void) hideTabBar:(UITabBarController *) tabbarcontroller 
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.5];
    for(UIView *view in tabbarcontroller.view.subviews)
    {
        if([view isKindOfClass:[UITabBar class]])
        {
            [view setFrame:CGRectMake(view.frame.origin.x, 480, view.frame.size.width, view.frame.size.height)];
        } 
        else 
        {
            [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, view.frame.size.width, 480)];
        }

    }

    [UIView commitAnimations];
} 
```

//显示标签栏

```
- (void) showTabBar:(UITabBarController *) tabbarcontroller 
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.5];
    for(UIView *view in tabbarcontroller.view.subviews)
    {
        if([view isKindOfClass:[UITabBar class]])
        {
            [view setFrame:CGRectMake(view.frame.origin.x, 431, view.frame.size.width, view.frame.size.height)];
        } 
        else 
        {
            [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, view.frame.size.width, 431)];
        }
    }
    [UIView commitAnimations]; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T18:43:06.120

您需要确保正确设置表视图的弹簧和支柱：

![弹簧和支柱](../Images/a4a22c8f1860b489d96e311dc84dd1be.png)

# linux - gdb -x 共享库断点

> ID：11273564
> 
> 赞同：0
> 
> 时间：2012-06-30T11:05:28.767
> 
> 标签：linux, bash, gdb, breakpoints

我有一个断点列表，每次调试特定程序时都想添加这些断点。我创建了一个包含断点的文件并使用了 gdb -x "file" 推荐，但未添加所有在未来共享库加载时挂起的断点。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T11:26:47.273

在您的脚本中，将共享库中的断点设置为挂起，并且在加载共享库时，您的断点将被正确设置。

```
(gdb) help set breakpoint pending
Set debugger's behavior regarding pending breakpoints.
If on, an unrecognized breakpoint location will cause gdb to create a
pending breakpoint.  If off, an unrecognized breakpoint location results in
an error.  If auto, an unrecognized breakpoint location results in a
user-query to see if a pending breakpoint should be created. 
```

这是一个脚本示例（假设`print_in_lib`在将加载的共享库中`dlopen`）：

```
file main
set breakpoint pending on
b print_in_lib
r 
```

这是它的输出：

```
host: srv2-x64rh5-01, OS: Linux 2.6.18-238.el5>gdb -q
Function "print_in_lib" not defined.
Breakpoint 1 (print_in_lib) pending.
warning: no loadable sections found in added symbol-file system-supplied DSO at 0x2aaaaaaab000
thousands: 1
print_debug: 0

Breakpoint 1, print_in_lib (print_debug=0) at my_lib.cpp:7
7           if (print_debug) {
(gdb) bt
#0  print_in_lib (print_debug=0) at my_lib.cpp:7
#1  0x00000000004008ab in main (argc=<value optimized out>, argv=<value optimized out>) at main.cpp:37
(gdb) 
```

# java - 从不同的网络访问 Web 服务

> ID：11273566
> 
> 赞同：0
> 
> 时间：2012-06-30T11:06:04.960
> 
> 标签：java, service, web, public

我们正在做的学校项目的架构的简单描述： - 我们有一个数据仓库来编译来自所有客户端的数据 - 客户端正在使用本地部署的 Web 应用程序。

每个客户端都有一个本地 Web 应用程序，即使没有互联网连接，它也可以独立运行。

我们想创建一个 Web 服务，作为客户端和数据仓库的连接。我们这里的问题是数据仓库和客户端不在同一个网络中。

我们的问题：我们如何使 Web 服务公开可用，以便客户即使与数据仓库不在同一个网络中也可以使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T11:12:44.827

> 我们如何使 Web 服务公开可用，以便客户即使与数据仓库不在同一个网络中也可以使用它。

您可能要考虑将 Web 服务开放到 Internet，如果他们有限制，请咨询您的 ISP，告诉他们打开端口号。（例如 8080）您正在运行的 Web 服务。如果您有路由器，请确保将流量转发到正确的端口。

现在，您的客户可以随时随地使用它。您只需向他们提供外部 IP 地址和端口号，基本上就是您的 Web 服务的 URL。

记笔记。这是一种不安全的共享 Web 服务的方式。稍后，您可能需要考虑使用虚拟专用网 (VPN) 解决方案供您的客户端连接。将其开放给野外存在巨大的危险。

# opencv - 相机校准（OpenCV 2.3） - 如何使用失真参数？

> ID：11273571
> 
> 赞同：6
> 
> 时间：2012-06-30T11:06:48.487
> 
> 标签：opencv, camera-calibration

我有一组带有一些附加标记的刚体图像。我在这些标记之一中定义了一个坐标系，我想获得该坐标系与在相机原点处定义的坐标系之间的旋转和平移。

我尝试了一段时间 POSIT（在[此](http://goo.gl/cUYYt)之后）但没有得到可接受的结果，直到我意识到我必须首先校准相机。[在此](http://goo.gl/snf7E)基础上并使用通过校准体获取的一些图像，我得到了相机内在矩阵和失真参数。我也得到了 1.276 的重投影错误（？）。

1.  重投影误差是否太高？我该如何改进它？（我使用了更多图像，只是稍微降低了值）。
2.  我可以在 POSIT 中使用失真参数吗？如何？

谢谢。

* * *

似乎减少重投影错误（从 ~1.3 变为 ~0.7）的唯一方法是在 XML 配置文件中将以下参数设置为“0”：

```
<Calibrate_FixAspectRatio> 0 </Calibrate_FixAspectRatio>
<Calibrate_AssumeZeroTangentialDistortion> 0 </Calibrate_AssumeZeroTangentialDistortion>
<Calibrate_FixPrincipalPointAtTheCenter> 0 </Calibrate_FixPrincipalPointAtTheCenter> 
```

使用更多图像不会改变错误，我仍然不确定这个新错误是否可以接受。

我在 POSIT 中使用校准给出的值作为输出（即焦距和光学中心），但结果与我使用预校准值时得到的结果非常相似。我没有使用失真参数，因为我不知道如何在 POSIT 中处理它们（它们会对结果产生影响吗？）。

校准后得到的相机矩阵：

```
<Camera_Matrix type_id="opencv-matrix">
<rows>3</rows>
<cols>3</cols>
<dt>d</dt>
<data>
2.0613885351075501e+003 0\. 2.2865517805186334e+002 0.
2.2546461307897816e+003 2.5261706201677623e+002 0\. 0\. 1.
</data>
</Camera_Matrix> 
```

以及我在 POSIT 中使用它的方式：

```
#define FOCAL_LENGTH 2158.0175
#define FOCAL_LENGTH_X 2061.389 
#define FOCAL_LENGTH_Y 2254.646
#define cX 203.655
#define cY 205.117 
```

我计算了新中心坐标与校准图像的中心坐标之间的差异，然后将该差异应用于我正在使用 POSIT 的图像的中心坐标。

我在两个不同的图像上使用 POSIT，理论上我应该在模型和相机坐标系之间获得 0（对于第一个）和 10（对于第二个）度的旋转。在获得每个图像的旋转矩阵后，我在相机坐标系上定义了一个单位向量，并通过将其乘以 POSIT 给出的两个旋转矩阵的逆矩阵在模型坐标系上计算它，得到模型中的两个新向量坐标系。当我在模型坐标系中计算这两个向量之间的角度时，输出不是应该的 - 10 度。

有谁知道我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T20:50:40.577

图像分辨率是多少？主点应靠近图像中心。镜头的焦距是多少？根据您需要的精度，该校准误差可能很好。为了避免镜头失真引入的误差，您应该使用 undistortPoints 对传递给 POSIT 的图像点进行不失真处理。这个误差有多大取决于你镜头的失真有多大。

# java - Java 正则表达式在第一个匹配模式后返回

> ID：11273581
> 
> 赞同：0
> 
> 时间：2012-06-30T11:07:45.240
> 
> 标签：java

我想在以下字符串中的第一个“来自”之后提取单词-

> “来自 Chemicon 的抗 CD24 和来自 Santa 的抗 CD48”

现在，我正在使用 -

> “来自\s+([^\s]+)”

但它给出的结果是“Chemicon”和“Santa”，而不仅仅是“Chemicon”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T11:17:58.130

也许你可以做这样的事情：

```
 Pattern p = Pattern.compile("from\\s+([^\\s]+)");
    Matcher m = p.matcher("anti-CD24 from Chemicon, and anti-CD48 from Santa");
    if (m.find()) {
        System.out.println(m.group(1));
    } 
```

这将只需要第一个。也许你可以使用这个正则表达式来避免第一个匹配的逗号（`Chemicon,`）：`from\\s+([a-zA-Z]+)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T12:58:54.083

您可以`lookingAt`在 Method 对象上使用该方法。它在找到第一个匹配项后停止。

像`matches`函数和不像`find`函数`lookingAt`必须从一开始就匹配，所以我们必须使用正则表达式`".*?from\\s+(\\w+)"`，它表示：匹配任何内容，直到第一个“来自”，然后是一个或多个空格字符，然后是下一个“单词”。如果您只希望字母字符与“from”之后的单词匹配，请使用`".*?from\\s+([a-zA-Z])"`. `".*?"`开头的表示非贪婪匹配。如果您只使用`".*"`它，它将匹配最后一个“来自”，而不是第一个。

这是我测试过的代码：

```
 String s = "anti-CD24 from Chemicon, and anti-CD48 from Santa";
  Matcher m = Pattern.compile(".*?from\\s+(\\w+)").matcher(s);
  if (m.lookingAt()) {
    System.out.println(m.group(1));
  } 
```

打印出来：

```
化学康

```

# c++ - QNetworkAccessManager 获取网页的问题

> ID：11273582
> 
> 赞同：1
> 
> 时间：2012-06-30T11:07:59.910
> 
> 标签：c++, qt, qnetworkaccessmanager

我正在尝试使用头文件中的以下代码下载网页的源代码：

```
#include <QObject>
#include <QHttp>
#include <QtNetwork>
#include <QFile>
#include <QDebug>

class CDownloader : public QObject
{
  Q_OBJECT
public:
  explicit CDownloader(QObject *parent = 0);

void Do_Download();

signals:

public slots:
  void result(QNetworkReply*);
private:   
  QNetworkAccessManager *manager;
  QNetworkReply *reply;
  QNetworkAccessManager qnam;
};

#endif // CDOWNLOADER_H 
```

和源文件：

```
#include "cdownloader.h"

CDownloader::CDownloader(QObject *parent) :
QObject(parent)
{    
}

void CDownloader::Do_Download()
{
  manager = new QNetworkAccessManager(this);
  connect(manager, SIGNAL(finished(QNetworkReply*)), this, SLOT(result(QNetworkReply*)));
  manager->get(QNetworkRequest(QUrl("http://www.google.com")));
}

void CDownloader::result(QNetworkReply *reply)
{
     qDebug() << "loading complete";
} 
```

和按钮代码：

```
void MainWindow::on_download_clicked()
{
  CDownloader cDown;
  cDown.Do_Download(); 
} 
```

但是 qDebug 永远不会在结果槽中调用。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T12:07:05.950

```
void MainWindow::on_download_clicked()
{
  CDownloader cDown;
  cDown.Do_Download(); 
} 
```

当该方法返回时，`cDown`立即销毁。至少只要您没有收到并处理回复，您就需要保持该对象处于活动状态。

为此，要么`cDown`应该是您的成员，要么应该在代码中的某处维护（并正确处理）`MainWindow`指向（或指向的指针集合）的指针。`CDownloader`

# django - 在 Eclipse 中使用 PyDev 和 Django，需要模拟慢速网络连接

> ID：11273583
> 
> 赞同：0
> 
> 时间：2012-06-30T11:08:00.737
> 
> 标签：django, eclipse, performance, connection, pydev

我正在尝试实现一个 ajax 页面加载图标，但当然我不能在我的本地主机上测试它，因为它会立即加载......

如何在 Ubuntu 中使用 Eclipse 平台模拟慢速互联网连接，这将允许我测试加载图标？？？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T11:39:10.917

这对中间件很有用。 [这](https://gist.github.com/1453629)是一个中间件示例，它可以将每个请求延迟一定量，可在您的设置中进行配置：

```
"""
This module provides very simple Django middleware that sleeps on every request.

This is useful when you want to simulate slow response times (as might be
encountered, say, on a cell network).

To use, add this middleware, and add a value for SLEEP_TIME to your settings.

Possible future feature: Look for an X-Django-Sleep header on each request,
to let the client specify per-request sleep time.
"""

import time

import django.conf
import django.core.exceptions

class SleepMiddleware(object):

    def __init__(self):
        self.sleep_time = getattr(django.conf.settings, "SLEEP_TIME", 0)
        if not isinstance(self.sleep_time, (int, float)) or self.sleep_time <= 0:
            raise django.core.exceptions.MiddlewareNotUsed

    def process_request(self, request):
        time.sleep(self.sleep_time) 
```

你可以从这里变得更漂亮，例如，加入随机性，这在测试复杂的 ajax 交互时很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T11:09:41.410

`time.sleep(5)`在返回睡眠前在您的视野中放置五秒钟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-17T09:56:26.410

对于 200 毫秒的延迟，我只需使用以下命令：

```
sudo tc qdisc add dev enp2s0 root netem delay 200ms 
```

更改`add`为`del`返回原始状态。

您可以通过在延迟的机器上执行 ping 来监控事情的变化。

我从[这里](http://www.cyberciti.biz/faq/linux-traffic-shaping-using-tc-to-control-http-traffic/)拿走了它。

# c# - 为什么没有创建数据库？

> ID：11273584
> 
> 赞同：1
> 
> 时间：2012-06-30T11:08:04.407
> 
> 标签：c#, asp.net-mvc-3, entity-framework, ef-code-first

我首先使用实体​​框架代码。

DataBaseName - 我想在 SQL Server 中创建一个数据库。

在`web.config`：

```
<configuration>
  <connectionStrings>
    <add name="DataContext" 
         providerName="System.Data.SqlClient" 
         connectionString="Data Source=USER\SQLEXPRESS;Initial Catalog=DataBaseName;Integrated Security=True;Pooling=False;User Instance = False" /> 
```

在`global.asax`：

```
 protected override void OnApplicationStarted()
 {
     base.OnApplicationStarted();

     Database.SetInitializer(new DataContextInitializer());
 } 
```

`DataContextInitializer`：

```
namespace CodeFirstMembershipSharp
{
    public class DataContextInitializer : DropCreateDatabaseAlways<DataContext>
    {
        protected override void Seed(DataContext context)
        {
            MembershipCreateStatus Status;
            Membership.CreateUser("Demo", "123456", null, null, null, true, out Status);
            Roles.CreateRole("Admin");
            Roles.AddUserToRole("Demo", "Admin");
        }
    }
} 
```

`DataContext`：

```
public class DataContext : DbContext
{
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Bid>()
            .HasRequired(a => a.Auction)
            .WithMany()
            .HasForeignKey(x => x.AuctionId).WillCascadeOnDelete(false);

        modelBuilder.Entity<Bid>()
           .HasRequired(a => a.User)
           .WithMany()
           .HasForeignKey(x => x.UserId).WillCascadeOnDelete(false);
    }

    public DbSet<User> Users { get; set; }
    public DbSet<Role> Roles { get; set; }
    public DbSet<Auction> Auctions { get; set; }
    public DbSet<Page> Pages { get; set; }
    public DbSet<Bid> Bids { get; set; }
} 
```

但是没有创建数据库。我忘记写什么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T11:20:52.660

`Database.SetInitializer` *设置*初始化程序但不*运行*初始化。之后`Database.SetInitializer`需要添加：

```
using (var context = new DataContext())
{
    context.Database.Initialize(false);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T11:30:34.770

我没有看到您在种子方法中添加新数据，我想您需要将它们添加到 datacontext 以便实体框架将创建数据库并保存数据，尝试如下

```
namespace CodeFirstMembershipSharp
{
    public class DataContextInitializer : DropCreateDatabaseAlways<DataContext>
    {
        protected override void Seed(DataContext context)
        {
            context.Users.Add(new User{name = "Demo", password = "123456"});
            context.Roles.Add(New Role("Admin"));
        }
    }
} 
```

# ruby-on-rails - 创建记录时，如何确保在初始化 setter_method 之前运行方法？

> ID：11273586
> 
> 赞同：0
> 
> 时间：2012-06-30T11:08:21.767
> 
> 标签：ruby-on-rails

在 Rails 3.2 表单中，我有一个带有附加 setter 方法的 find_or_create 字段，并且我有一个当前正在运行 before_validate 的方法。我需要 before_validate 方法在 setter 方法之前运行。我应该如何修改我的代码来实现这一点？

我的表格包含：

```
<%= f.select(:country_id, Country.order(:name), :id, :name, include_blank:true) %>
<%= f.grouped_collection_select :state_id, Country.order(:name), :states, :name, :id, :name, include_blank: true %>
<%= f.text_field :new_state_name, placeholder: "..or enter a new state" %>
<%= f.input :city_name %> 
```

在我的模型中

```
def city_name
 city.try(:name)
end

def city_name=(name)
  if name.present?
    set_city = City.find_or_initialize_by_name_and_state_id(name, self.state_id)
    if set_city.new_record?
      set_city.state_id = state_id
      set_city.save(:validate => false )
      self.city = set_city
    else
      self.city = set_city
    end
  end
end

before_validation :create_new_state

def create_new_state
  if new_state_name.present? && country_id.present?
    new_state = State.create( name: new_state_name, country_id: country_id )
    self.state = new_state.id
  end
end 
```

这个想法是用户可以选择一个国家和一个州，然后输入一个城市名称，该名称是根据名称和州找到的。如果不存在这样的城市，则创建它。

此外，如果选择字段中不存在所需的状态，则用户可以改为在 new_state_name 字段中键入新状态。保存时，会创建新州，并应与新城市相关联（如果输入新州，则该城市必须是新的）。

我遇到的问题是 city_name 设置器似乎在该`before_validation`方法之前运行。因此，新城市是使用在状态选择中选择的任何值创建的（包括是否为空白？）。

有什么更好的方法来构建我的代码以达到预期的结果？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T15:37:24.067

我就是这样做的。（希望你不介意我稍微改变一下你的模型代码。）

```
delegate :name, to: :city, prefix: true
delegate :name, to: :state, prefix: true

attr_writer :city_name, :state_name
attr_accessible :city_name, :state_name

before_validate :find_or_create_city_and_state

validates :city, :state, presence: true

private

def find_or_create_city_and_state
  if state_name
    state = State.find_or_create_by_name_and_country_id(state_name, country.id)
    self.state = state

    if city_name # Nested since this doesn't make any sense without a state, presumably
      city = City.find_or_create_by_name_and_state_id(city_name, state.id)
      self.city = city
    end
  end
end 
```

在您的表单中，调用字段`city_name`，`state_name`您应该一切顺利。

# c# - 像在 html 上一样测量字符串？

> ID：11273587
> 
> 赞同：4
> 
> 时间：2012-06-30T11:08:30.537
> 
> 标签：c#, html, graphics, drawing

我有确切的字符串：`123..`

我想看看它的长度是多少，就*好像它在 Html 页面上*一样（作为 SPAN）

```
font-name:arial
font-size:16px; 
```

我做了一个实验：

[http://jsbin.com/axezib/edit#preview](http://jsbin.com/axezib/edit#preview)

所以

```
<span style="font-family:arial;border:solid 1px red;display:inline-block;font-size:16px;">123..</span> 
```

呈现为：

![在此处输入图像描述](../Images/dfd5a89e223af3bbf2cf132a9bab1704.png)

及其性质：

`ofcourse * { padding:0px;margin:0px; }`

![在此处输入图像描述](../Images/692c7a5b604956eccee0967d24dc363c.png)

如您所见，它的宽度为 35，高度 = 19。（*让我们忽略边界*......）

但是我有这段代码应该（*或不*）告诉我相同的结果：

```
void Main( )
      {
     string input = "123..";
     FontFamily fontFamily = new FontFamily("Arial");
     Font testFont = new  Font(   fontFamily,   16, FontStyle.Regular,   GraphicsUnit.Pixel);
     Size s = TextRenderer.MeasureText(input, testFont);
     Console.WriteLine("Size: height " + s.Height + ", width " + s.Width);
     Console.ReadLine();
      } 
```

但是结果是：

![在此处输入图像描述](../Images/01f39daa5085bb111f886e88369d525b.png)

我在这里想念什么？

谢谢`:-)`

# 编辑

[通过添加 CSS RESET重新编辑](http://jsbin.com/axezib/2/edit#javascript,html)html 代码后- 代码在所有 4 个浏览器中完全呈现。所以问题仍然存在 - 为什么 c# 没有向我显示相同的结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T11:15:38.677

您可以为这个特定的网络浏览器解决这个难题，但您将无法测量所有可用浏览器的字符串。更糟糕的是，有许多操作系统、显卡、语言、字体版本和显示设置。这会产生无数组合显示的文本略有不同。

如果您正在测试您的 Web 应用程序，请从您的 C# 代码（例如 IE）运行 Web 浏览器，加载您的网页并从那里获取 DOM 节点测量值。这是获得真实世界价值的唯一方法。

此外，还有许多测试工具包可以为您简化这项任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T13:10:17.110

似乎您正在尝试将呈现的字符串的大小与默认的 Windows 字体呈现（以及系统默认的任何抗锯齿、ClearType 设置等）进行比较，并将其与 Windows 上的浏览​​器完成的呈现进行比较，这可能或者可能没有**自己的字体渲染引擎**。据我所知，Gecko (Firefox) 和 Webkit (Chrome, Safari) 实现了自己的字体渲染，因此它们可以在不同平台上一致地呈现 HTML/CSS。

所以基本上，即使你可以让你的 C# 代码同意，结果也毫无意义，因为你在比较苹果和橘子！[请参阅本文](http://www.smashingmagazine.com/2012/04/24/a-closer-look-at-font-rendering/)中的“当前实现” 。

# java - 如何在 opencv java api 中将 MatOfPoint 转换为 MatOfPoint2f

> ID：11273588
> 
> 赞同：42
> 
> 时间：2012-06-30T11:08:48.650
> 
> 标签：java, android, image-processing, opencv

我正在尝试 使用 opencv java api来实现以下[问题的示例代码。](https://stackoverflow.com/questions/8667818/opencv-c-obj-c-detecting-a-sheet-of-paper-square-detection/)为了`findContours(gray, contours, CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE);`在 java 中实现，我使用了这种语法`Imgproc.findContours(gray, contours, new Mat(), Imgproc.RETR_LIST, Imgproc.CHAIN_APPROX_SIMPLE);`。

所以现在轮廓应该是`List<MatOfPoint> contours = new ArrayList<MatOfPoint>();`而不是`vector<vector<cv::Point> > contours;`。

然后我需要实现这个`approxPolyDP(Mat(contours[i]), approx, arcLength(Mat(contours[i]), true)*0.02, true);`。在 java api 中，Imgproc.approxPolyDP 接受参数为`approxPolyDP(MatOfPoint2f curve, MatOfPoint2f approxCurve, double epsilon, boolean closed)`. 如何将 MatOfPoint 转换为 MatOfPoint2f？

或者有没有办法使用与 c++ 接口相同的向量来实现这一点。非常感谢任何建议或示例代码。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-06-30T11:14:15.400

MatOfPoint2f 与 MatOfPoint 的区别仅在于元素的类型（分别为 32 位浮点和 32 位整数）。可行的选项（尽管有性能损失）是创建 MatOfPoint2f 实例并将其元素（在循环中）设置为等于源 MatOfPoint 的元素。

有

```
 public void fromArray(Point... lp);
 public Point[] toArray(); 
```

两个类中的方法。

所以你可以做

```
 /// Source variable
 MatOfPoint SrcMtx;

 /// New variable
 MatOfPoint2f  NewMtx = new MatOfPoint2f( SrcMtx.toArray() ); 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-10-04T01:00:52.700

我意识到这个问题已经得到了很好的回答，但是为将来发现它的任何人添加一个替代方案 -

```
Imgproc.findContours(gray, contours, new Mat(), Imgproc.RETR_LIST, Imgproc.CHAIN_APPROX_SIMPLE);

for(int i=0;i<contours.size();i++){
    //Convert contours(i) from MatOfPoint to MatOfPoint2f
    contours.get(i).convertTo(mMOP2f1, CvType.CV_32FC2);
    //Processing on mMOP2f1 which is in type MatOfPoint2f
    Imgproc.approxPolyDP(mMOP2f1, mMOP2f2, approxDistance, true); 
    //Convert back to MatOfPoint and put the new values back into the contours list
    mMOP2f2.convertTo(contours.get(i), CvType.CV_32S);
} 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2016-11-06T10:56:29.570

虽然这个问题已经回答了，但我相信接受的答案并不是最好的。将矩阵转换为数组然后返回会带来相当大的性能损失，无论是时间方面还是内存方面。

相反，OpenCV 已经有一个函数可以做到这一点：convertTo。

```
MatOfPoint src;
// initialize src
MatOfPoint2f dst = new MatOfPoint2f();
src.convertTo(dst, CvType.CV_32F); 
```

我发现这明显更快，对内存更友好。

要将 MatOfPoint2f 转换为 MatOfPoint，请改用 CvType.CV_32S。

# c - 在C中处理后获取字符串并返回相同的函数

> ID：11273591
> 
> 赞同：1
> 
> 时间：2012-06-30T11:09:34.373
> 
> 标签：c, string

我正在编写一个需要函数的代码。此函数获取一个字符串作为输入并返回一个字符串。

到目前为止，我的计划是获取一个`str[]`，删除所有`$`'s 和空格，并将其存储在另一个稍后返回的字符串中：

```
char *getstring(char str[])
{
    int i=0;
    char rtn[255];
    while (i<strlen(str))
    {
       if (str[i] != " " || str[i] != "$" )
             rtn[i] = str[i];
       else
             rtn[i] = '';
    } 
    return str;
} 
```

我觉得这行不通。有任何想法吗？？:-S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T11:17:51.783

**问题 #1：**
您的函数返回一个指向堆栈上分配的（临时）字符串的指针。这意味着一旦你的函数结束，内存`rtn`就会被释放，**这会使`char *`函数返回的指针**无效。

你宁愿做的是：

```
void getstring(char str[], char rtn[])
{
    /* Some processing on rtn... */
} 
```

调用者`getstring`应该处理作为`rtn`.

**问题 #2**：
您的 while 循环将无限期运行，因为`i`永远不会增加。放在`i++`循环内的某个地方。

**问题 #3**：
您的`if`-statement 中的条件有问题。你比较`str[i]`, 这是 a `char`, to `" "`or `"$"`, 它们是字符串文字（`'\0'`最后有）。这是错误的。
您需要将它们与用撇号（不是引号）表示的字符进行比较。
另外，请注意测试条件也是错误的。您需要一个逻辑 AND 运算符而不是 OR。将-statement
更改为：`if`

```
if (str[i] != ' ' && str[i] != '$') 
```

**问题#4**：
什么`rtn[i] = '';`意思？`''`是一个*空字符常量*，这在 C 中是非法的。
你想跳过一个字符`str`吗？

**问题#5**：
你有索引问题。因为`str`and`rtn`可能显然具有不同的长度，您需要管理两个运行索引，每个字符串一个。

**问题 #6**：
`rtn`函数返回时不一定以 null 结尾。在函数返回之前（即-loop 结束之后）赋值`'\0'`给 end 。`rtn``rtn[i] = '\0';``while`

* * *

这是您的代码，上面提到的所有问题都已修复：

```
void getstring(char str[], char rtn[])
{
    int i = 0, j = 0;
    while (i < strlen(str))
    {
       if (str[i] != ' ' && str[i] != '$')
             rtn[j++] = str[i];
       i++;
    }
    rtn[j] = '\0';
} 
```

这是一个更有效的版本，它使用指针而不是索引，并且不使用`strlen`：

```
void getstring(char *str, char *rtn)
{
    while (*str)
    {
       if (*str != ' ' && *str != '$')
             *rtn++ = *str;
       *str++;
    }
    *rtn = '\0';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T11:21:25.993

它绝对行不通。您没有增加 'i' 计数器，并且 '' 的分配不会跳过符号。

就地变体（在速度方面不是最佳的）

```
#include <stdio.h>
#include <string.h>

void getstring(char* str)
{
    int j, i = 0, len = strlen(str);

    while(i < len)
    {
        char ch = str[i];

        if(ch == ' ' || ch == '$')
        {
            /// shift by one
            for(j = i ; j < len + 1; j++) { str[j] = str[j + 1]; }

            len--;
            i--;
        }

        i++;
    } 

    str[len] = 0;
 }

 int main()
 {
      char test_string[] = "Some string $with$ spaces";

      printf("Src = %s\n", test_string);
      getstring(test_string);
      printf("Res = %s\n", test_string);
      return 0;
 } 
```

以及重新分配的变体

```
char *getstring(const char* str)
{
    int i_src = 0;
    int i_dest = 0;
    int len = strlen(str);

    char* rtn = (char*)malloc(len + 1);

    while (i_src < len)
    {
       char ch = str[i_src];
       if ( (ch != ' ') && (ch != '$') )
       {
            rtn[i_dest] = ch;
            /// increment destination index here
            i_dest++;
       }
       /// increment the source index always
       i_src++;
    } 

    rtn[i_dest] = 0;

    return rtn;
} 
```

稍后不要忘记 free() 结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T11:28:17.023

1.  如果要从函数返回新字符串，则应为该字符串动态分配内存。在您的代码`char rtn[255];`中，您在堆栈上分配内存，`rtn`退出函数后它将被清除。你应该写：

    char *rtn = (char *) malloc(strlen(str));

    当然，您应该继续跟踪内存以防止内存泄漏和调用`free()`释放内存。

2.  '' 的赋值不会跳过符号，`i`当您看到不需要的符号时不应增加（并且您错过了代码中的增量）。

3.  您返回了错误的值，您应该返回`rtn`而不是`str`.

正确的代码如下：

```
char *getstring(char str[])
{
    int i=0, rtn_pos = 0;
    size_t len = strlen(str);
    char *rtn = (char*) malloc(len + 1);
    for (i = 0; i < len; ++i)
       if (str[i] != ' ' && str[i] != '$' )
             rtn[rtn_pos++] = str[i];
    rtn[rtn_pos] = '\0';
    return rtn;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T11:51:30.737

最好让调用者提供目标字符串（调用者可能知道它应该有多大），并返回它不*知道*的东西：写入 rtn[] 数组的字节数。

```
size_t mygetstring(char *rtn, char *str)
{
    size_t pos, done;

    for (pos=done=0; rtn[done] = str[pos]; pos++)
    {
       if (rtn[done] == ' ' || rtn[done] == '$' ) continue;
       done++;
    } 
    return done; /* number of characters written to rtn[], excluding the NUL byte */
} 
```

# java - 在播放框架中插入批量数据的最佳方法是什么？

> ID：11273593
> 
> 赞同：0
> 
> 时间：2012-06-30T11:09:42.583
> 
> 标签：java, asynchronous, playframework, bulkinsert

我正在玩一个游戏框架项目，我的项目的一部分需要在给定的时间间隔内插入大量数据。

我在这里有两个问题：

1- 我需要尽快完成批量插入 sa 2- 当批量插入作业正在运行时，它会严重影响我的服务器响应时间。我不知道这是游戏框架或我的问题。

这是我当前的批量插入代码：

```
 org.hibernate.Session session = 
            (org.hibernate.Session)SomeEntityModel.em().getDelegate(); 
  Transaction tx = session.beginTransaction();
  int i = 0;
  for(Inventory o:inventories)
      {
        returnList.add(SomeEntityModel.getInstance(o));
          i++;
          if(i%100==0)
          {
              tx.commit();
              session.flush();
              session.clear();
              tx=session.beginTransaction();
          }
      } 
```

getInstance 模型将“o”对象转换为实体模型。

“o”对象大量来自网络服务，我将它们转换为“SomeEntityModel”，然后将其保存在 getInstance 方法中。

我需要知道是否有更好更快的方法来完成批量插入方法，以及是否有更好的方法来使用或优化作业运行时的服务器响应时间。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T12:19:11.167

你看过[阿卡](http://akka.io)吗？它在 Play 2.0 中有强大的支持（如果你正在使用的话，它在 Play 1.x 中也有模块支持）。Akka 被设计为高性能并发包，其中一个用例是 Batch/Bulk。

# php - 使用 php mysql 的地理定位内容

> ID：11273597
> 
> 赞同：0
> 
> 时间：2012-06-30T11:09:56.057
> 
> 标签：php, mysql, ip-geolocation

我有一个网站，我只想在印度展示一张图片，而对于世界其他地方，我会展示一些其他图片。这意味着，在印度，我只想显示印度的内容，而其余国家/地区将显示一些其他内容。任何人都可以在这方面帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T11:14:47.020

您需要获取访问用户的 IP 地址，并跟踪他的位置，根据他的国家/地区，您可以显示自定义图片。

一些相关问题：

[从 IP 地址获取位置](https://stackoverflow.com/questions/409999/getting-location-from-ip-address)

[https://stackoverflow.com/questions/283016/know-a-good-ip-address-geolocation-service#364706](https://stackoverflow.com/questions/283016/know-a-good-ip-address-geolocation-service#364706)

这是一个通过 IP 地址检测用户位置的代码片段（尽管结果不太准确）

```
function detect_city($ip) {

        $default = 'UNKNOWN';

        if (!is_string($ip) || strlen($ip) < 1 || $ip == '127.0.0.1' || $ip == 'localhost')
            $ip = '8.8.8.8';

        $curlopt_useragent = 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2) Gecko/20100115 Firefox/3.6 (.NET CLR 3.5.30729)';

        $url = 'http://ipinfodb.com/ip_locator.php?ip=' . urlencode($ip);
        $ch = curl_init();

        $curl_opt = array(
            CURLOPT_FOLLOWLOCATION  => 1,
            CURLOPT_HEADER      => 0,
            CURLOPT_RETURNTRANSFER  => 1,
            CURLOPT_USERAGENT   => $curlopt_useragent,
            CURLOPT_URL       => $url,
            CURLOPT_TIMEOUT         => 1,
            CURLOPT_REFERER         => 'http://' . $_SERVER['HTTP_HOST'],
        );

        curl_setopt_array($ch, $curl_opt);

        $content = curl_exec($ch);

        if (!is_null($curl_info)) {
            $curl_info = curl_getinfo($ch);
        }

        curl_close($ch);

        if ( preg_match('{<li>City : ([^<]*)</li>}i', $content, $regs) )  {
            $city = $regs[1];
        }
        if ( preg_match('{<li>State/Province : ([^<]*)</li>}i', $content, $regs) )  {
            $state = $regs[1];
        }

        if( $city!='' && $state!='' ){
          $location = $city . ', ' . $state;
          return $location;
        }else{
          return $default; 
        }

} 
```

# r - ggplot2 - 缺少一些 x-labes 和网格线

> ID：11273602
> 
> 赞同：2
> 
> 时间：2012-06-30T11:11:09.527
> 
> 标签：r, ggplot2

我正在使用 R 中的 ggplot2 绘制多个数据集。为了使绘图更易于比较，我设置了 y 尺度的限制，但事实证明，在绘图的“自然顶部”上方没有绘制任何内容.

例如对于这个情节：（ [来源：][[sickel.net](http://sickel.net/misc/output.png)][）][![缺少标签和线条的绘图](../Images/33235d459ddddb9879b1c287b19ce1bb.png)](https://i.stack.imgur.com/HMcgy.png)

我试图将顶部 y 值设置为 500（并查看顶部的空白，我已经设法做到了）但是如何让 ggplot 也绘制 400,450 和 500 的标签以及相应的网格线？

数据位于数据帧 df 中，df$dataset 和 df$error 分别作为数据和错误级别。我目前的绘图代码是

```
max = max(df$dataset + df$error) * 1.05
if(max > 300) max=505

dataplot = ggplot(data=df, aes(x=species,y=dataset,fill=dim,ylim=c(0,max)))
dataplot = dataplot+geom_bar(position=position_dodge())
dataplot = dataplot+scale_fill_manual(values=c("#BBBBBB", "#444444"))
dataplot = dataplot + ylab(ylab) + xlab(xlab) + opts(legend.title=theme_blank())

limits <- aes(ymax = df$dataset+df$error, ymin=df$dataset-df$error)
dodge = position_dodge(width=0.9)

dataplot = dataplot + geom_errorbar(limits, position=dodge, width=0.5) 
dataplot = dataplot + opts(panel.background = theme_rect(fill='white', colour='white'))
dataplot = dataplot + opts(panel.grid.major = theme_line(colour = "gray"))

# dataplot = dataplot + coord_cartesian(ylim=c(0, max))
# dataplot = dataplot + scale_y_continuous(limits=c(0, max))

dataplot = dataplot + 
               opts(axis.text.x = theme_text(colour = "black",angle=90),
                    axis.text.y = theme_text(colour = "black"))
dataplot = dataplot + opts(legend.key.size = unit(0.3, "cm"))
print(dataplot) 
```

从注释掉的行可以看出，我已经尝试了 coord_cartesian、scale_y_continous 以及当前的 y-lim，但没有任何运气（是的，我知道 coord_cartesian 正在放大）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T13:47:17.000

对于 ylimits，您可以添加：

```
+ scale_y_continuous(limits=c(0,500)) 
```

为了设置刻度点，您可以使用：

```
breaks=seq(0, 500, 50) # which means ticks from 0-500, every 50 units 
```

因此，我认为您需要将以下代码添加到您的绘图代码中：

```
+scale_y_continuous(limits=c(0,500),breaks=seq(0, 500, 50)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T19:53:40.390

对我来说，使用其中一个`ylim(0, max)`或`scale_y_continuous(limits=c(0, max),breaks=seq(0, max, 50))`按我认为你想要的方式工作。例如，使用`diamonds`数据：

```
library(ggplot2)
data(diamonds)
(p <- ggplot(diamonds, aes(clarity, fill=cut)) + geom_bar(position="dodge"))
max.y <- 10000 
p + ylim(0, max.y)
p + scale_y_continuous(limits=c(0, max.y), breaks=seq(0, max.y, 1000)) 
```

我得到以下三个图。第一个不设置y轴，第二个使用`ylim()`，第三个使用`scale_y_continuous()`。我希望这有帮助！

![在此处输入图像描述](../Images/03f092cbb9bbf5723036e5ee3f3dc474.png)

# mysql - Mysql - 根据两列订购产品表：discounted_price 和 price

> ID：11273605
> 
> 赞同：1
> 
> 时间：2012-06-30T11:11:29.740
> 
> 标签：mysql, sql, comparison, sql-order-by

我有一个包含以下列的表格（我简化了一点）：

*   产品名称
*   产品代码
*   PRODUCT_price
*   PRODUCT_discounted_price

现在，当我展示它们时，它们可以按价格订购。问题是：我怎样才能同时考虑 PRODUCT_price 和 PRODUCT_discounted_price 以便如果有 PRODUCT_discounted_price 它比较它，但如果它不存在它只是被忽略？

例如，如果我有以下产品：

*   姓名, 1, 12, 10
*   名称2、2、11、0
*   名称3, 3, 6, 0
*   名称 4, 4, 25, 9
*   名称5, 5, 30, 13

他们应该像这样订购：

*   名称3, 3, 6, 0
*   名称 4, 4, 25, 9
*   姓名, 1, 12, 10
*   名称2、2、11、0
*   名称5, 5, 30, 13

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T11:17:44.800

```
select name, code, if(discounted_price=0,price,discounted_price) as real_price 
from product
order by real_price 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T11:18:52.400

```
order by (case 
          when product_discounted_price = 0 then product_price 
          else product_discounted_price 
          end) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T11:22:37.067

您可以在不使用时将 discounted_price 列值设为 NULL，然后使用 COALESCE 进行订购：

```
SELECT COALESCE(PRODUCT_discounted_price, PRODUCT_price) AS order_col FROM products ORDER BY order_col 
```

如果您不希望使用 NULL，可以使用 IF 而不是 COALESCE 重写相同的查询，但那样会更复杂一些。

# .htaccess - 使用 mod_rewrite 从一个目录重定向到另一个目录

> ID：11273608
> 
> 赞同：6
> 
> 时间：2012-06-30T11:12:07.740
> 
> 标签：.htaccess, mod-rewrite

以下是我的目录结构：

```
admin\
controls\
images\
media\
lib\
models\
views\
index.php
.htaccess 
```

以下是我的 .htaccess

```
RewriteEngine On 
RewriteRule /admin/images/(.*) /images/$1
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php 
```

我希望 /admin/images 中的所有内容都等于根目录中的 /images 。例如：[http](http://www.example.com/admin/images/example.png) ://www.example.com/admin/images/example.png将与[http://www.example.com/images/example.png相同](http://www.example.com/images/example.png)

**我的 .htaccess 的问题是：** 它转到 index.php 而不是将 admin/images 镜像到 images/

* * *

**解决方案**

```
RewriteEngine On 
RewriteRule /admin/images/(.*) /images/$1 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-30T12:31:02.993

您需要指定您的图像重写规则是该行中的最后一个，以防止进一步重写。为此，您只需`[L]`在图像重写规则的末尾指定。

```
RewriteEngine On 
RewriteRule /admin/images/(.*) /images/$1 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php 
```

**编辑：**这是问题发生原因的解释（取自评论部分以提供说明）。

`%{REQUEST_FILENAME}`您会看到无论执行多少阶段的重写，原始内容都不会改变。这意味着当达到第二条规则时，该变量实际上仍将指向现有图像（位于 中`/admin/images/`），而不是指向正在重写且不存在的图像（`/images/`）。这就是为什么总是应用第二条规则以及为什么示例中的两个条件行几乎总是在重写期间使用的第一个条件行的原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-30T11:18:20.483

更改规则如下：

```
RewriteEngine On 
RewriteRule ^admin/images/(.*) images/$1 
```

并将您的 .htaccess 放在文档根目录中，或者放在“/admin”父文件夹中。

# objective-c - 我如何知道是哪个事件导致了对我的 IBAction 的调用？

> ID：11273610
> 
> 赞同：2
> 
> 时间：2012-06-30T11:12:20.943
> 
> 标签：objective-c, macos, cocoa

假设我有一个按钮..如果它们都调用我的 IBAction，我如何区分单击和双击？有没有办法知道是哪个事件导致了呼叫，或者为每种类型的事件设置不同的操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T11:54:44.973

编辑：

在 Cocoa 中，afaik，每个控件都有一种它响应的“固定”事件。要管理双击，您应该覆盖方法`mouseUp`或`mouseDown`，您将在其中获得有关点击次数的信息。

```
- (void)mouseUp:(NSEvent*)event {
    NSInteger count = [event clickCount];
    <do_something_depending_on:count];
} 
```

旧答案：

您可以通过在 Interface Builder 中显示控件的操作选项卡，然后将正确的事件类型连接到您的控制器操作，来定义与同一控件关联的多个 IBAction。看一下附图，希望它更清楚。它显示可用于按钮的事件。

![在此处输入图像描述](../Images/62b97553c41b7c71e297abd127e611a5.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T17:02:49.603

您可以[向应用程序询问当前正在处理什么事件](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/NSApplication/currentEvent)；对于鼠标点击，这将包括[点击计数](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSEvent_Class/Reference/Reference.html#//apple_ref/occ/instm/NSEvent/clickCount)。

请注意，即使是按钮也可能因为鼠标点击以外的原因触发其动作，例如全键盘访问（聚焦按钮并按下空格键）或 VoiceOver（将 VO 光标放在按钮上并使用按下动作），所以不要不要假设你的动作是为了响应鼠标而被调用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T11:48:43.190

如果我理解正确，您应该为一次单击创建两个不同的 IBAction，使用 UIControlEventsTouchUpInside 和两次单击 UIControlEventsTouchDownRepeat（控件中的重复触摸事件；对于此事件，UITouch tapCount 方法的值大于一。）

# python - 如何为 Tkinter 小部件设置焦点？

> ID：11273612
> 
> 赞同：9
> 
> 时间：2012-06-30T11:12:39.947
> 
> 标签：python, tkinter

我有一个简单的 Python + Tkinter 应用程序，它显示 10 个项目的列表：

```
import Tkinter, ttk
list = ttk.Treeview( Tkinter.Tk() )
list.pack( fill = Tkinter.BOTH, expand = 1 )
items = [ list.insert( '', 'end', text = str( i ) ) for i in range( 10 ) ]
list.selection_set( items[ 0 ] )
list.focus_set() # This is not working - list has no focus :(
Tkinter.mainloop() 
```

是否可以修改它，以便在应用程序启动后，列表将具有焦点，我可以通过向上和向下箭头移动选择？应用程序启动后，应用程序的窗口具有焦点，但我无法使用箭头移动选择，直到我用鼠标单击列表:(。我尝试了 and 的不同组合`focus_set()`，`focus_force()`但它不起作用。

在 Windows 7、OSX 10.7 和 Ubuntu 12.04 上使用 Python 2.7 检查

**更新**

如果“Treeview”更改为其他一些小部件，例如“Button”，则焦点正在工作。所以似乎我以某种方式错误地为 Treeview 设置了焦点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-30T21:13:02.897

终于找到了一个解决方案 - 似乎`Treeview`小部件需要设置焦点两次：第一次是小部件本身，第二次是一个项目：

```
list.selection_set( items[ 0 ] )
list.focus_set()
list.focus( items[ 0 ] ) # this fixes a problem. 
```

# ruby-on-rails - 启动应用程序 Bundler::GemNotFound 时出错

> ID：11273616
> 
> 赞同：1
> 
> 时间：2012-06-30T11:13:27.770
> 
> 标签：ruby-on-rails, gem, bundler, rack, rack-pow

我刚刚启动了一个新应用程序，但是当我单击 Welcome aboard 页面上的“关于您的应用程序环境”链接时出现此错误。

> 启动应用程序时出错 您的 Rack 应用程序在 Pow 尝试运行它时引发了异常。
> 
> Bundler::GemNotFound：在任何源中都找不到 activesupport-3.2.6

我的应用程序正在运行：

*   导轨 3.2.6
*   红宝石 1.9.3p194
*   红宝石 1.8.24
*   RVM 1.14.5
*   战俘 0.4.0

我发现了类似的问题，问题在于解决乘客问题，但我没有使用它。

当我运行 gem list 我得到：

> ***当地宝石***
> 
> actionmailer (3.2.6) actionpack (3.2.6) activemodel (3.2.6) activerecord (3.2.6) activeresource (3.2.6) activesupport (3.2.6) arel (3.0.2) builder (3.0.0) bundler ( 1.1.4) 咖啡轨 (3.2.2) 咖啡脚本 (2.2.0) 咖啡脚本源 (1.3.3) daemon_controller (1.0.0) erubis (2.7.0) execjs (1.4.0) 快速线程 ( 1.0.7) 远足 (1.2.1) i18n (0.6.0) 旅程 (1.0.4) jquery-rails (2.0.2) json (1.7.3) 邮件 (2.4.4) mime-types (1.19) multi_json ( 1.3.6) 乘客 (3.0.13) 多语言 (0.3.3) 机架 (1.4.1) 机架缓存 (1.2) 机架 SSL (1.3.2) 机架测试 (0.6.1) 轨道 (3.2.6) railties (3.2.6) rake (0.9.2.2) rdoc (3.12) ruby​​gems-bundler (1.0.3) rvm (1.11.3.4) sass (3.1.20) sass-rails (3.2.5) sprockets (2.4.3, 2.1.3) sqlite3 (1.3.6) thor (0.15.4, 0.15.3) 倾斜 (1.3.3) 树顶 (1.4.10) tzinfo (0.3.33) uglifier (1.2.6)

任何帮助将不胜感激，谢谢。

**更新**

```
source 'https://rubygems.org'

gem 'rails', '3.2.6'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger' 
```

**gemfile.lock**

```
GEM
  remote: https://rubygems.org/
  specs:
    actionmailer (3.2.6)
      actionpack (= 3.2.6)
      mail (~> 2.4.4)
    actionpack (3.2.6)
      activemodel (= 3.2.6)
      activesupport (= 3.2.6)
      builder (~> 3.0.0)
      erubis (~> 2.7.0)
      journey (~> 1.0.1)
      rack (~> 1.4.0)
      rack-cache (~> 1.2)
      rack-test (~> 0.6.1)
      sprockets (~> 2.1.3)
    activemodel (3.2.6)
      activesupport (= 3.2.6)
      builder (~> 3.0.0)
    activerecord (3.2.6)
      activemodel (= 3.2.6)
      activesupport (= 3.2.6)
      arel (~> 3.0.2)
      tzinfo (~> 0.3.29)
    activeresource (3.2.6)
      activemodel (= 3.2.6)
      activesupport (= 3.2.6)
    activesupport (3.2.6)
      i18n (~> 0.6)
      multi_json (~> 1.0)
    arel (3.0.2)
    builder (3.0.0)
    coffee-rails (3.2.2)
      coffee-script (>= 2.2.0)
      railties (~> 3.2.0)
    coffee-script (2.2.0)
      coffee-script-source
      execjs
    coffee-script-source (1.3.3)
    erubis (2.7.0)
    execjs (1.4.0)
      multi_json (~> 1.0)
    hike (1.2.1)
    i18n (0.6.0)
    journey (1.0.4)
    jquery-rails (2.0.2)
      railties (>= 3.2.0, < 5.0)
      thor (~> 0.14)
    json (1.7.3)
    mail (2.4.4)
      i18n (>= 0.4.0)
      mime-types (~> 1.16)
      treetop (~> 1.4.8)
    mime-types (1.19)
    multi_json (1.3.6)
    polyglot (0.3.3)
    rack (1.4.1)
    rack-cache (1.2)
      rack (>= 0.4)
    rack-ssl (1.3.2)
      rack
    rack-test (0.6.1)
      rack (>= 1.0)
    rails (3.2.6)
      actionmailer (= 3.2.6)
      actionpack (= 3.2.6)
      activerecord (= 3.2.6)
      activeresource (= 3.2.6)
      activesupport (= 3.2.6)
      bundler (~> 1.0)
      railties (= 3.2.6)
    railties (3.2.6)
      actionpack (= 3.2.6)
      activesupport (= 3.2.6)
      rack-ssl (~> 1.3.2)
      rake (>= 0.8.7)
      rdoc (~> 3.4)
      thor (>= 0.14.6, < 2.0)
    rake (0.9.2.2)
    rdoc (3.12)
      json (~> 1.4)
    sass (3.1.20)
    sass-rails (3.2.5)
      railties (~> 3.2.0)
      sass (>= 3.1.10)
      tilt (~> 1.3)
    sprockets (2.1.3)
      hike (~> 1.2)
      rack (~> 1.0)
      tilt (~> 1.1, != 1.3.0)
    sqlite3 (1.3.6)
    thor (0.15.4)
    tilt (1.3.3)
    treetop (1.4.10)
      polyglot
      polyglot (>= 0.3.1)
    tzinfo (0.3.33)
    uglifier (1.2.6)
      execjs (>= 0.3.0)
      multi_json (~> 1.3)

PLATFORMS
  ruby

DEPENDENCIES
  coffee-rails (~> 3.2.1)
  jquery-rails
  rails (= 3.2.6)
  sass-rails (~> 3.2.3)
  sqlite3
  uglifier (>= 1.0.3) 
```

我已经运行了 bundle install ，它完成得很好。但是，如果我运行 sudo bundle install 我会得到：

```
/Users/dave/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find bundler (>= 0) amongst [bigdecimal-1.1.0, io-console-0.3, json-1.5.4, minitest-2.5.1, rake-0.9.2.2, rdoc-3.9.4] (Gem::LoadError)
    from /Users/dave/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:256:in `to_spec'
    from /Users/dave/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems.rb:1231:in `gem'
    from /Users/dave/.rvm/gems/ruby-1.9.3-p194@global/bin/bundle:18:in `<main>'
    from /Users/dave/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
    from /Users/dave/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T19:13:54.750

Pow 可能正在尝试使用“bundle exec”前缀启动您的应用程序。这意味着您的应用程序只会看到 Gemfile 中的 gem（更准确地说，只有当前环境组中的 gem）。

这很棒，因为它使您可以使用不同版本的同一个 gem 拥有多个应用程序：您可能有一个使用 Rails 2 的应用程序和另一个使用 Rails 3 的应用程序，两者都安装在您的系统上，但您的第一个应用程序说它依赖于 Rails 2在其 Gemfile 中，另一个将 Rails 3 指定为依赖项。

长话短说：您必须在 Gemfile 中声明每个依赖项并在访问您的应用程序之前运行“捆绑安装”。

另一个建议：不要忘记指定您使用的 rake 甚至 bundler 的版本，当您在开发系统上升级这些 gem 而不是在产品服务器上时，这可能会挽救您的生命

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T13:53:24.267

我得到了同样的错误：通过以下命令解决：

```
rvm use ruby-version

gem install rails 
```

# c# - 显示新表单时显示的背景窗口一瞥

> ID：11273621
> 
> 赞同：0
> 
> 时间：2012-06-30T11:13:57.440
> 
> 标签：c#, .net, winforms

我有主表单。我从 Mainform 调用 form2 使用`form2.ShowDialog(Application.OpenForms["MainForm"]);` 然后我从 form2 调用另一个表单

```
 this.Hide();
    form3.ShowDialog(Application.OpenForms["MainForm"]);
    this.Dispose(); 
```

一切正常，但是当显示 form3 时，我可以瞥见背景中显示的任何窗口，即：如果我打开了 MS Paint，则将其放在背景中，Paint 窗口将出现在我的窗口顶部不到一秒的时间，并且自动转到后台。为什么会出现这种行为。我该如何纠正？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T12:41:33.410

当您调用时`this.Hide()`，Form2 被隐藏，另一个窗口需要获得焦点。但是，您使用 ShowDialog 打开了 Form2，这意味着 Form2 是唯一可以在您的应用程序中获得焦点的窗口。但是由于您隐藏了 Form2，Windows 会找到另一个要关注的窗口（在本例中为 MS Paint）。

解决方案的一个建议可能是在隐藏 Form2 之前人为地赋予 MainForm 焦点：

```
Application.OpenForms["MainForm"].Activate();
this.Hide();
form3.ShowDialog(Application.OpenForms["MainForm"]);
this.Dispose(); 
```

也许一个更漂亮的解决方案是首先打开 Form3，等待它显示，然后隐藏 Form2。为此，请将此代码放在 Form2 中，当您要显示 Form3 时：

```
form3.Shown += (_s, _e) => Application.OpenForms["Form2"].Hide();
form3.ShowDialog(Application.OpenForms["MainForm"]);
this.Dispose(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T13:02:10.010

好吧，你在显示对话框之前隐藏了你的主窗口，所以你会在一瞬间看到另一个窗口，无论哪个在它后面。你正在做的事情也非常冒险，你的程序失去焦点的可能性非常高。在显示对话框之前，尤其是在显示对话框之后，您的程序都没有可以接收焦点的窗口。所以Windows窗口管理器被迫寻找另一个窗口来给予焦点，它会选择另一个应用程序的窗口。强迫你在后台，如果那个窗口足够大，让它完全消失。

你需要采取反制措施。您可以通过延迟 Hide() 调用来隐藏主窗口，表单的 BeginInvoke() 方法非常方便。而且您需要确保在对话框关闭之前您的主窗口再次可见。对话框的 FormClosing 事件很方便。如果对话框已经连接事件而不是覆盖 OnFormClosing()，尽管不是 100% 可靠。

因此：

```
 private void DisplayDialog_Click(object sender, EventArgs e) {
        using (var dlg = new Form2()) {
            this.BeginInvoke(new Action(() => this.Hide()));
            dlg.FormClosing += dlg_FormClosing;
            dlg.StartPosition = FormStartPosition.Manual;
            dlg.Location = this.Location;
            if (dlg.ShowDialog() == DialogResult.OK) {
                // etc..
            }
            dlg.FormClosing -= dlg_FormClosing;
        }
    }

    void dlg_FormClosing(object sender, FormClosingEventArgs e) {
        if (!e.Cancel) this.Show();
    } 
```

或者只是不要隐藏你的主窗口。它不是很有用，对话框按原样很烦人，是模态的并防止任何复制/粘贴。阻止用户完全看到窗口只是隐藏了可能对用户有用的信息。

# ruby - 在父母的内部状态中四处寻找

> ID：11273623
> 
> 赞同：2
> 
> 时间：2012-06-30T11:14:30.670
> 
> 标签：ruby, decoupling

**tl:dr**解耦是如何工作的？可能需要一些小例子

我正在阅读 Programming Ruby - The Pragmatic Programmer's Guide。(http://ruby-doc.org/docs/ProgrammingRuby/html/tut_classes.html)

有一个关于如何为Song 的子类 KaraokeSong实现**to_s的示例。**

```
class KaraokeSong < Song
# ...
def to_s
"KS: #{@name}--#{@artist} (#{@duration}) [#{@lyrics}]"
end
end
aSong = KaraokeSong.new("My Way", "Sinatra", 225, "And now, the...")
aSong.to_s    »  "KS: My Way--Sinatra (225) [And now, the...]" 
```

现在他们说这是一种不好的方法：

> 假设我们决定将 Song 更改为以毫秒为单位存储持续时间。突然间，KaraokeSong 会开始报告荒谬的价值。持续 3750 分钟的卡拉 OK 版“My Way”的想法实在是太可怕了，无法考虑。

相反，您应该使用 super 定义 to_s：

```
def to_s
super + " [#{@lyrics}]"
end 
```

现在当@duration变量仍然以毫秒为单位存储歌曲时长时，刚刚调用父方法的新**to_s如何解决问题？**它仍然返回 3750 分钟，不是吗？

我想我真的不明白这两个之间的区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T11:18:38.520

假定`Song`它将处理其正确的输出`@duration`。

如果我们决定改变`Song`以毫秒为单位存储持续时间，我们只需改变`Song#to_s`方法而不必改变`to_s`它的所有后代。

# c# - 如何使用 moq 设置 BeginXXX EndXXX 方法调用？

> ID：11273625
> 
> 赞同：6
> 
> 时间：2012-06-30T11:14:32.120
> 
> 标签：c#, wcf, asynchronous, moq, async-await

假设我有一些 APM (BeginXxx, EndXxx) 模式异步方法（作为我正在调用的某些 WCF 服务代理的一部分）：

```
public interface ISomeService
{
    IAsyncResult BeginSomeMethod(int num, AsyncCallback callback, object state);
    int EndSomeMethod(IAsyncResult ar);
} 
```

我的实际代码使用`Task.Factory.FromAsync`.net 4.5 中引入的新异步/等待模式来创建任务，然后等待该任务。

我想测试我的类，因此我需要编写一个方法来接收模拟、开始方法、结束方法和返回值，并设置模拟以便最终返回所需的返回值。

示例用法：

```
SetupAsync(mock, mocked => mocked.BeginSomeMethod, mocked=> mocked.EndSomeMethod, 7); 
```

这将导致带有任何 int 参数的异步流返回 7。我似乎无法弄清楚如何在 moq 中完成这样的事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T14:53:43.910

首先，我建议您使用`TaskWsdlImportExtension`to create `Task`-based 异步 WCF 代理。VS2012 默认会这样做，但是你必须在 VS2010+AsyncCTP[上自己设置。](http://social.msdn.microsoft.com/Forums/en/async/thread/47994f10-da43-4c7b-9756-6432a6188d98#4710c459-43e1-4705-8692-f0b5d1106881)针对`Task`API 进行单元测试更容易。

如果您确实想对`Begin`/进行单元测试`End`，我认为最简单的方法是使用`Task`基于 - 的模拟并公开`Begin`/`End`端点。`[AsyncFactory|AsyncFactory<T>].[ToBegin|ToEnd]`我的[AsyncEx](http://nitoasyncex.codeplex.com/)库中的方法提供了围绕 a 的`Begin`/`End`方法包装器`Task`，或者您可以查看[Stephen Toub 的关于编写这些类型的包装器的博客文章](http://blogs.msdn.com/b/pfxteam/archive/2011/06/27/10179452.aspx)。

您可以从 获取简单的已完成任务`Task.FromResult`，也可以使用以下构造强制异步完成任务：

```
Task.Run(async () => { await Task.Yield(); return 7; }); 
```

（Async CTP 等效项是）：

```
TaskEx.RunEx(async () => { await TaskEx.Yield(); return 7; }); 
```

我不完全确定如何将其与 Moq 联系起来。同样，我怀疑基于 - 的 API 比/`Task`更容易模拟。/有它自己的特殊语义（你必须传递正确的，必须为每个 准确调用一次，等等），所以有更多的东西要测试。`Begin``End``Begin``End``IAsyncResult``End``Begin`

# jsp - 表达式语言中的调用方法

> ID：11273626
> 
> 赞同：8
> 
> 时间：2012-06-30T11:14:37.167
> 
> 标签：jsp, tomcat, el

如何使用 EL（[*表达式语言*](https://en.wikipedia.org/wiki/Unified_Expression_Language)）在 JSP 中调用方法？

例如：

```
<c:forEach var="item" items="${listStr}" begin="0" end="2" step="2">
    <p>${item.indexOf("h")}</p>
</c:forEach> 
```

在这里，`item`是一个类型的对象`java.lang.String`。这会在 Tomcat 上运行时导致错误。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-30T11:43:53.740

仅自 EL 2.2 起才支持此功能。这又与 Servlet 3.0 密切相关。因此，如果您确保使用 Servlet 3.0 兼容`web.xml`声明来定位与 Servlet 3.0 兼容的容器（Tomcat 7、Glassfish 3 等），那么它将按照您的预期工作。但是，如果您的目标是旧版本的 servlet 容器，或者有旧版本的甚至是错误的`web.xml`根声明，那么它将无法工作。

### 也可以看看：

*   [我们的 EL 维基页面](https://stackoverflow.com/tags/el/info)

* * *

**更新：**您的特定问题可能是由 Tomcat 7 中的错误引起的。它没有根据给定的参数找到正确的重载方法。您的表达式在 Glassfish 3 中运行良好。所有非重载方法在 Tomcat 中都应该运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T15:21:04.800

我也无法让它工作（Apache Tomcat/7.0.27）。

> javax.el.E​​LException：无法将类型类 java.lang.String 的 h 转换为 int

El 拒绝查看具有正确签名的方法。indexOf("h",0) 也会发生同样的事情。我确实成功了

```
${x.contains("h")}
${x.lastIndexOf("h")}
${x.indexOf(104)}  Ascii value of 'h' is 104 
```

# java - 在 Eclipse Java 中设置安全策略小程序

> ID：11273627
> 
> 赞同：2
> 
> 时间：2012-06-30T11:14:45.133
> 
> 标签：java, eclipse, security, applet, policy

我有在命令行中运行的小程序，如下所示：

```
appletviewer -J-Djava.security.policy=="java.policy.applet" stronka.html 
```

我想从启用了安全策略的 Eclipse 运行小程序。我知道我必须在这里设置：

运行 -> 运行配置菜单。右键单击“Java Applet”并选择“新建”。为您的运行配置命名。选择您的项目和小程序类。选择“参数”选项卡并输入您的安全策略 VM 参数。

但是在我的情况下，我必须在那里添加什么？

# haskell - 在 Reader 中运行 ST

> ID：11273629
> 
> 赞同：1
> 
> 时间：2012-06-30T11:14:55.573
> 
> 标签：haskell

我想让我的一些代码更“单子”，并使用 Reader monad，而不是传递一个公共环境。但是在某个地方我必须使用可变向量，因此也必须使用 ST monad；为了让事情变得有趣，ST 动作需要访问环境（但函数的其余部分不需要）。换句话说，这有效：

```
aux :: Int -> Reader Env Double
aux i = -- something

bla :: [a] -> Reader Env Double
bla l = do e <- ask
           return $ runST $ do -- something producing an Int
                               let o = runReader (aux i) e
                               -- something else depending on o
                               return something 
```

但感觉非常丑陋和错误，一种仍然显式传递环境的复杂方式；我想`bla`看起来更像这样：

```
bla :: [a] -> Reader Env Double
bla l = return $ runST $ do -- something producing an Int
                            o <- ??? aux i
                            -- something depending on o
                            return something 
```

是否有意义？是否可以？如果是，我应该放什么来代替`???`？我想真正的问题是，实现这种事情的好方法是什么？你会推荐什么设计？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T11:57:19.060

您可以`Reader`与using 混合`ST`使用`ReaderT`。像这样的东西：

```
import Data.Array.ST
import Control.Monad.ST
import Control.Monad.Reader

type Env = String

type ReaderST s = ReaderT Env (ST s)

foo :: ReaderST s [Int]
foo = do
  str <- ask
  let len = length str
  a <- lift (newArray (0, len - 1) 0 :: ST s (STUArray s Int Int))
  a' <- lift $ mapArray (+ 2) a
  es <- lift $ getElems a'
  return es

run :: [Int]
run = runST $ runReaderT foo "xyz"

-- > run
-- [2,2,2] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T11:44:05.230

你能不使用`ReaderT`单子变压器并将其堆叠在上面`ST`吗？喜欢这里：[http ://book.realworldhaskell.org/read/monad-transformers.html](http://book.realworldhaskell.org/read/monad-transformers.html)

# javascript - JavaScript“匹配”不匹配

> ID：11273632
> 
> 赞同：0
> 
> 时间：2012-06-30T11:15:16.583
> 
> 标签：javascript, regex

我的代码如下所示

```
var html = $(el).html().toString();
html = '2012-05-10';
var re = new RegExp('^(19|20)\d\d[- /.](0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])$');
var m = re.exec(html);
if (m != null)
alert('match');
else
alert('nomatch'); 
```

正则表达式的目的是检查字符串是否包含任何日期。但是它从来没有找到任何日期。我已经使用在线正则表达式工具测试了正则表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T11:21:05.150

如果您试图找到`whether a string contains any dates`，那么`^`在开头并`$`没有帮助 - 因为它们表示匹配*字符串*的开头和结尾。

要在包含其他文本（甚至空格）的字符串中查找日期，请使用此...

 ~~~~```
var re = new RegExp('(19|20)\d\d[- /.](0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])'); 
```~~  ~~**更新**

Anton 已经想出了一个解决方案 - 然而，虽然上述解决方案比原来的解决方案更好，但它仍然不正确，因为`\d`需要转义 (to `\\d`) 才能使其在包含在引号中时工作。因此，它应该是...

```
var re = new RegExp('(19|20)\\d\\d[- /.](0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])'); 
```

但是，事后看来，我同意所有其他人的观点，因为它不是动态模式，所以最好的解决方案是使用`/pattern/`语法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T11:33:01.643

我按照@Utkanos 所说的那样做，并像这样使用 /pattern/-syntax

```
if (/(19|20)\d\d[- /.](0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])/.test(html)) 
```

然后它起作用了:)~~~~

# cookies - 能够设置 httponly cookie = 安全问题的开发人员工具？

> ID：11273634
> 
> 赞同：1
> 
> 时间：2012-06-30T11:15:37.067
> 
> 标签：cookies, firebug, security

最近我注意到可以通过 Firebug 更改设置为 httponly 的 cookie 的值。根据我的阅读，httponly 标志应该阻止任何类型的客户端脚本访问或更改此类 cookie 的值，以[支持浏览器](https://www.owasp.org/index.php/HttpOnly#Browsers_Supporting_HttpOnly)。但是，如果您将 cookie 创建为 httponly，然后使用带有新 Cookie 面板的 Firebug 1.10 Beta，您实际上可以更改此 cookie 的值。这意味着任何拦截请求或设法将间谍软件安装到反馈 cookie / 网站信息的用户计算机上的任何人都可以通过更改任何与会话相关的 cookie 以匹配原始用户的 cookie 来访问以用户身份登录的站点。

几个小时前，我试图在[Firebug Google 组](https://groups.google.com/forum/?fromgroups#!forum/firebug)上提出这个问题，但还没有被允许。有没有其他人认为这是 Firebug 的主要安全漏洞？它也可能出现在 Chrome 或 IE 开发工具中，但我没有检查过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T11:47:14.457

不，我不认为这是一个安全漏洞。

与 Firefox UI 的其余部分一样，Firebug 运行在比站点 javascript 代码更高的权限上。因此它可以访问 cookie。

此外，无论如何，安装间谍软件或能够拦截请求的人已经获胜。这样的标志不会保护您免受[中间人 (MITM)](https://en.wikipedia.org/wiki/Man-in-the-middle_attack)攻击或浏览器外部间谍软件（可能只是读取浏览器的目录）。

使用 https 可以减轻 MITM 的影响。

# perl - 检查程序是否正在运行，如果不在 perl 中则运行它

> ID：11273636
> 
> 赞同：12
> 
> 时间：2012-06-30T11:15:49.070
> 
> 标签：perl

我想知道如何检查程序是否正在运行，如果没有则运行该程序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-30T11:19:56.960

使用 kill 函数向要检查的进程 ID 发送 0（零）信号。如果进程存在，则函数返回true，否则返回false。

例子：

```
#-- check if process 1525 is running
$exists = kill 0, 1525;
print "Process is running\n" if ( $exists ); 
```

您可以使用系统调用从命令行调用任何程序。这仅在您不需要捕获程序的输出时才有用。

```
#!/usr/bin/perl
use strict;
use warnings;
my $status = system("vi fred.txt"); 
```

或者，如果您不想涉及外壳：

```
#!/usr/bin/perl
use strict;
use warnings;
my $status = system("vi", "fred.txt"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-03T15:55:54.767

与另一个答案类似，但您需要确保并使用“grep -v grep”与 grep 调用本身不匹配。这将确保您在不想时不会评估为真。

```
use strict;
use warnings;

my($cmd, $process_name) = ("command here", "process name here");

if(`ps -aef | grep -v grep $process_name`) {
    print "Process is running!\n";
}#if
else {
    `$cmd &`;
}#else 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-22T13:22:41.627

我尝试了“kill 0 ...”的东西，但是如果您没有对该进程的权限，那将不起作用，因为“kill 0”仅检查是否*可以*发送信号。由于您没有权限（您的 UID 不是 0 并且进程也不是 UID），因此您将始终为 false。

我还尝试使用 Linux 中的帐户 /proc/ 来检查 PID 目录是否存在，但该部分不是很便携：对 linux 很好，但如果没有额外的爱，将无法在 UNIX 的其他地方真正工作。

所以我写了这个子，HTH：

```
sub is_running() {
    my $pid = shift;
    my @proc_data = split(/\s+:\s+/, 
                          `ps uax | awk '{print \$1,":",\$2}' | grep $pid`);
    return (@proc_data && $proc_data[1] == $pid) ? $proc_data[0] : undef;
} 
```

用法简单且非常有用，因为它还返回了进程的所有者：

```
my $pid = 12345;
my $owner = &is_running($pid);
if ($owner) {
    print "Process with PID $pid is running and owned by \"$owner\".\n";
} 
```

玩得开心！:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-20T20:02:15.147

如果`$pid`为空，则进程未运行：

```
my $pid = `ps -C $progname -o pid=`; # non-windows solution, sorry 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-15T19:48:29.840

我们使用它来检查守护进程是否正在运行，基于 Linux 上守护进程启动 pid 文件的内容：

```
#!/usr/local/bin/perl
use strict;
use warnings;

use feature qw/ say /;

# vars we report
my (
    $token,         # optional arg - check against cmd_line if specified
    $pid_file,      # daemon pid-file, e.g. /var/run/mysqld/mysqld.pid
    $pid,           # the pid to investigate...
    $pid_running,   # found a pid and it is running
    $cmd_line,      # cmd_line of the running pid
    $result,        # 0-OK, 1=FAIL, exit value
    $error,         # error message if necessary
  );

# working vars
my ( $fh, $cmd_file );

die "Daemon pid-file required" unless scalar @ARGV >= 1;
( $pid_file, $token ) = @ARGV;

if ( -s $pid_file ) {
  open( $fh, "<", $pid_file ) or die "open $pid_file: $!";
  ( $pid ) = <$fh>; chomp $pid; close $fh;

  $pid_running = kill 0, $pid;

  if ( $pid_running ) {
    $cmd_file = "/proc/$pid/cmdline";
    local($/) = "\0"; # C-String NULL terminated
    open( $fh, "<", $cmd_file ) or die "open $cmd_file: $!";
    ( $cmd_line ) = <$fh>; close $fh;
    if ( $cmd_line && $token && $cmd_line !~ m/$token/ ) {
      $error = "token not found: $token in $cmd_line";
    }
  }
  else {
    $error = "process not found: $pid";
  }
}
else {
  $error = "file not found: $pid_file";
}

# if TOKEN - OK running process with matching cmdline
$result = $token ? ( $pid_running && $cmd_line && $cmd_line =~ m/$token/ )
                 : ( $pid_running || 0 );

say "token:     ", $token if $token;
say "file:      ", $pid_file;
if ( $pid ) {
  say "pid:       ", $pid;
  say "running:   ", $pid_running;
  say "cmdline:   ", $cmd_line if $cmd_line;
}
say "error:     ", $error if $error;
say "exit:      ", $result ? 'ok' : 'fail';

exit $result; 
```

# java - 找到两个点之间的路径

> ID：11273641
> 
> 赞同：-3
> 
> 时间：2012-06-30T11:17:02.963
> 
> 标签：java, mysql

大家好，我有一个数据库，其中包含点到点距离的点数组，看起来像 {1 2 5, 2 3 4 , 3 4 2} 我正在获取数据

```
 List<Conniction> tempDeal = ConnictionDAO.getInstance().findAll(); 
```

然后将其信息迭代到 Lists

```
List<String> oneid = new ArrayList<String>();
 List<String> twoid = new ArrayList<String>();
 List<String> size = new ArrayList<String>();
 for(Conniction obj: tempDeal){
     if(obj!=null) {

             oneid.add(obj.getOneid());

             twoid.add(obj.getTwoid());
             size.add(obj.getSize()); 
```

现在我需要找到点 1 到点 3 之间的距离，它应该是 9 我应该构建哪个函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T11:50:40.030

如果您只有点和距离信息，您可以创建一个完整的图（即每个节点都连接到其他节点的图）并在此图上运行 Dijkstra。这样，您可以使用中间节点在两个节点之间找到更短的路径。

请注意，这只有在距离不是度量时才有用/有意义。否则，两点之间的直接连接（即它们的距离）总是小于或等于使用中间节点的距离。

# winforms - PowerShell，重新加载脚本的方法？（比如关闭和启动脚本？）

> ID：11273649
> 
> 赞同：0
> 
> 时间：2012-06-30T11:18:02.573
> 
> 标签：winforms, powershell

我在我的 PowerShell 脚本中添加了一个简单的自动更新程序功能，因此当我进行更改并将其上传到我的网站时，它会自动下载到用户计算机并替换 .ps1 文件 - 瞧，用户拥有最新版本。

但是，用户必须关闭 PS 脚本并在使用最新文件运行之前重新启动它。

有没有我可以实现的重新启动 PS 脚本的功能？就像用户关闭并重新打开 PS 脚本时一样？

最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T16:59:22.683

根据您的确切需求，Import-Module cmdlet 应该可以解决问题。如果是我，我会制作一个静态“加载器”脚本，它只执行您拥有的任何更新逻辑，然后导入该脚本。如果您对方法有任何其他具体问题，请告诉我。

# ios - UILabel 不显示用户输入文本

> ID：11273652
> 
> 赞同：0
> 
> 时间：2012-06-30T11:18:24.490
> 
> 标签：ios, uilabel, line-breaks

我正在使用 UILabel 来显示用户输入。如果用户输入像**“xxxxx xxxx xxxx xxxx xxx xxxx xxx xxx”**，它会完美地显示在 UILabel 上。但是当输入类似于**“xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx”**时会导致问题。此文本不会显示在 UILabel 上。

我将以下代码用于 UILabel 功能。

```
-(void)displayText:(NSString *)text
{
 UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(75,50,30,50)];
 label.text = text;
 label.numberOfLines = 10;
 label.lineBreakMode = UILineBreakModeWordWrap;
 [self.view addSubview:label];
 [label release];
} 
```

我已将换行模式更改为`UILineBreakModeCharacterWrap`、`UILineBreakModeClip`、`UILineBreakModeHeadTruncation`和。但问题仍然存在。我知道问题出在**没有空格的输入文本上**，但是如何解决这个问题。请帮我找到解决方案。提前致谢。`UILineBreakModeTailTruncation``UILineBreakModeMiddleTruncation`

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T12:18:33.430

您需要先找到文本的高度，然后需要将该高度分配给标签。

并设置 numberOfLines = 0;

你可以从这个函数中找到高度

```
 CGFloat height = [text sizeWithFont:[UIFont systemFontOfSize:14] constrainedToSize:CGSizeMake(yourlabel.frame.size.width - 10, 9999) lineBreakMode:UILineBreakModeWordWrap].height; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T11:25:11.447

您的文本大于标签的大小，您可以截断它（头部、中间、尾部），也可以缩小字体

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T11:26:24.530

替换`[self.view addSubview:label];`而不是`[self.view addSubView:label];`

我想这会对你有所帮助。**

# algorithm - 哈密 顿循环的 Palmer 算法

> ID：11273653
> 
> 赞同：3
> 
> 时间：2012-06-30T11:18:33.730
> 
> 标签：algorithm, graph, traveling-salesman, hamiltonian-cycle

在“密集”图中，我正在尝试使用[Palmer's Algorithm](http://en.wikipedia.org/wiki/Ore%27s_theorem)构建哈密顿循环。但是，我需要对这个算法进行更多解释，因为当我实现它时它对我不起作用。维基百科的解释似乎有一个不清楚的部分。

如果有人更清楚地解释它或给我一些阅读链接，我将不胜感激。

这是算法语句：

> Palmer (1997) 描述了以下简单算法，用于在满足 Ore 条件的图中构造哈密顿循环。将顶点任意排列成一个循环，忽略图中的邻接关系。当循环包含两个连续的顶点`vi`并且`vi + 1`在图中不相邻时，执行以下两个步骤：
> 
> *   搜索一个索引`j`，使得四个顶点`vi`、`vi + 1`、`vj`和`vj + 1`都是不同的，并且图包含从`vi`to`vj + 1`和 from `vj`to的边`vi + 1`
>     
>     
> *   `vi + 1`反转和`vj`（包括）之间的循环部分。

更具体地说，我没有得到他们说的部分：在这种情况下，“将顶点任意排列成一个循环”，这是正确的做法：0,1,2,3,4,0

它们是什么意思：“扭转循环的一部分”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T12:31:28.720

> 在这种情况下，是否有权这样做：0,1,2,3,4,0

是的。通过从更仔细选择的初始循环开始，您可能会获得更快的解决方案，但是只要图形满足 Ore 的条件，算法将从任何有效的初始循环开始成功。

> 它们是什么意思：“扭转循环的一部分”？

这意味着采用从 vi + 1 到 vj 的路径并将其反转，以便如果您从以下内容开始：

```
vi, vi + 1, vi + 2, vj - 2, vj - 1, vj, vj + 1 
```

你最终得到：

```
vi, vj, vj - 1, vj - 2, vi + 2, vi + 1, vj + 1 
```

因此，在您的示例中，如果我们选择 i = 0 和 j = 3，最终结果将是：

```
0, 3, 2, 1, 4, 0 
```

这是[Palmer 论文](http://www.sciencedirect.com/science/article/pii/S0898122197002253 "帕尔默的论文")的链接（参见 Wikipedia 中的参考部分）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:53:45.353

确实，[维基百科](http://en.wikipedia.org/wiki/Ore%27s_theorem#Algorithm)对算法的描述~~是¹~~错了。帕尔默自己的描述是

> 1.  步骤 0\. 将顶点排列成一个圆圈。
>     
>     
> 2.  步骤 1\. 沿着边界，比如逆时针方向，寻找连续的不相邻顶点，即间隙。如果没有间隙，则以边界上的跨越循环退出。否则，寻找从间隙顶点到可能相邻也可能不相邻的另一对连续顶点的一对交叉弦（可能是间隙 2）。
>     
>     
>     
>     如果找到，（即间隙 1 很好！），只需以明显的方式重新排列顶点的圆形顺序，使两个弦成为边界上的边，并将间隙切换到内部。每次我们成功玩这种纵横交错的游戏时，顶点圆形排列的边界上的一两个间隙都会被两条边代替。否则，对下一个间隙重复步骤 1。
>     
>     
>     
>     继续，直到跨越周期在边界上，或者直到每个间隙都是坏的。

你需要一对**交叉**和弦，即你需要边

```
v_i <-> v_j
v_{i+1} <-> v_{j+1} 
```

这样，通过将部分从`v_{i+1}`到`v_j`（包括）反转，您将顶点`v_j`-`v_i`在图中相邻 -`v_i`在循环中移动，并且顶点`v_{i+1}`- 在图中相邻`v_{j+1}`- 在循环中移动到旁边`v_{j+1}`。因此，我们在图中获得了两个新的循环邻居对，`(v_i, v_j)`并且`(v_{i+1}, v_{j+1})`，并且可能破坏了在图中相邻的*一*对循环邻居，`(v_j, v_{j+1})`。图中相邻的循环邻居对的数量每一步增加 1 或 2，因此算法终止。

由于维基百科的错误索引，移动`v_j`next`v_i`和`v_{i+1}`next`v_{j+1}`不需要生成一对在图中相邻的新循环邻居，因此算法不需要终止。

因此，让我们以您的示例为例

```
E = { (1,2), (1,3), (1,6), (3,2), (3,4), (5,2), (5,4), (6,4), (6,5) } 
```

将其安排为`1426351`最初（没有相邻的邻居）。

图中第一对不相邻的循环邻居是`(1,4) = (v_1,v_2)`。扫描与和相邻的索引，第一个这样的出现`j > 2`是。现在反转循环中的部分（在这种情况下，在 4 和 2 之间没有顶点），给出下一个循环`v_j``v_1``v_{j+1}``v_2``j = 3``4...2`

```
1234561  // index in cycle
1246351  // vertex 
```

有两对相邻的邻居 (`(1,2)`和`(4,6)`)。不相邻的第一个索引是 2。扫描第一个与`i`相邻和相邻的索引。这给了. 现在和（含）之间的部分，给出下一个循环`v_i``v_{i+1}``j > 3``v_j``v_2 = 2``v_{j+1}``v_3 = 4``j = 5``v_3``v_5`

```
1234561  // index in cycle
1236451  // vertex 
```

再一次，`v_3 = 3`不与`v_4 = 6`, 所以`i = 3`, `j = 5`, 反转收益率

```
1234561  // index in cycle
1234651  // vertex 
```

现在唯一的坏对是`(v_6,v_1) = (5,1)`. 与和to相邻的最小`j > 1`的是。现在将零件从屈服反转`v_j``v_6 = 5``v_{j+1}``v_1 = 1``j = 2``v_1``v_2`

```
1234561  // index in cycle
2134652  // vertex 
```

这是一个哈密顿循环。

¹我会马上修复它。

# javascript - 谷歌地图 HTML5 地理位置

> ID：11273655
> 
> 赞同：0
> 
> 时间：2012-06-30T11:18:48.037
> 
> 标签：javascript, html, google-maps, geolocation

我一直在关注 HTML5 地理定位教程，并希望修改代码以输入目的地地址的文本，而不是固定目的地。在这段代码中实现它的任何方法都很好。

//这里是java脚本代码

```
(function(geolocation){

  if (geolocation) return;

  var cache;

  geolocation = window.navigator.geolocation = {};
  geolocation.watchPosition = function(callback){

    if (cache) callback(cache);

    $.getScript('//www.google.com/jsapi',function(){

      cache = {
        coords : {
          "latitude": google.loader.ClientLocation.latitude, 
          "longitude": google.loader.ClientLocation.longitude
        }
      };

      callback(cache);
    });

  };

})(navigator.geolocation);

// Proceed as usual.
(function() {
    if ( navigator.geolocation ) {
    var coords = navigator.geolocation.watchPosition( hereWeGooo,
        function() {
            // failure
                document.body.innerHTML = 'Sorry. We can\'t get your current location.';
            },
            { enableHighAccuracy: true }
        );

    }
function hereWeGooo(coords) {
    coords = coords.coords;
    var latlng = new google.maps.LatLng(coords.latitude, coords.longitude),
        myOptions = {
        //zoom: 15,
        //center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    },
    map = new google.maps.Map(document.querySelector( "#map"), myOptions),
      directionsDisplay = new google.maps.DirectionsRenderer(),
      directionsService = new google.maps.DirectionsService(),

        var dest = document.getElementById('d').value;

    request = {

        origin: latlng,
        destination: dest, 
        // replace with your own airport
        travelMode: google.maps.DirectionsTravelMode.DRIVING
    };

    directionsDisplay.setMap(map);
    directionsService.route(request, function(response, status) {
        if (status === google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
        }
        });
    }
})();

  <form>
    <p><input type="text" id="d" /></p>
    <input type="button" value="Go" onClick="hereWeGooo()">
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T14:56:08.753

你可以这样做：

```
var dest = document.getElementById('myInput').value;

request = {
    origin: latlng,
    destination: dest, 
//...
} 
```

...然后在您的文档正文中：

```
<input id='myInput'> 
```

* * *

## 看到链接后补充：

hereWeGooo() 未定义，因为您在应该有分号的地方使用逗号 --- direction.js 第 57 行崩溃。

第 54 到 57 行应该是：

```
map = new google.maps.Map(document.querySelector( "#map"), myOptions); //<----- semi-colon, not comma
        directionsDisplay = new google.maps.DirectionsRenderer(); //<----- semi-colon, not comma
        directionsService = new google.maps.DirectionsService(); //<----- semi-colon, not comma 
```

# xcode - 如何在 Xcode 中启用“使用符号和文本替换”

> ID：11273661
> 
> 赞同：6
> 
> 时间：2012-06-30T11:19:21.453
> 
> 标签：xcode, macos

我有一个正在运行的虚拟 Mac，想在 Xcode 中编写一些代码。我的键盘具有 { 和 [ 可用的字符，可使用 Alt-Gr。在我的虚拟 Mac 中，使用相同的键盘组合会给我不同的输出。

*   Alt-Gr + 9 生成大写 ç 而不是 {
*   Alt-Gr + ^ 产生 ô 而不是 [

我设法通过使用系统设置中语言和文本 - 文本下的“使用符号和文本替换”选项来解决某些程序的问题。这在 TextEdit、Safari 等中运行良好，但在 Xcode 中却不行。Xcode 似乎忽略了符号和文本替换。

任何想法如何解决这一问题？或者也许是另一种解决方法？任何帮助表示赞赏，因为这个问题确实减慢了我的编程速度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T06:46:31.167

Xcode，默认情况下不启用文本替换。要启用转到 Xcode -> 编辑 -> 格式 -> 替换 -> 文本替换（启用此功能）

![在此处输入图像描述](../Images/77dd9363ff1ffe3021dc8f24990fd0b8.png) ![在此处输入图像描述](../Images/64a2efac1da001af1be89bab9dd1ee56.png) ![在此处输入图像描述](../Images/354897d0dc0330e19da3386d3ab4248f.png)

希望这可以帮助！

编辑：正如 Senseful 所说，最好使用代码片段。这是一个链接，解释如何使用代码片段[创建自定义代码片段](http://developer.apple.com/library/ios/#recipes/xcode_help-source_editor/CreatingaCustomCodeSnippet/CreatingaCustomCodeSnippet.html#//apple_ref/doc/uid/TP40009975-CH14-SW1)和[这个](http://corecocoa.wordpress.com/2011/11/01/adding-custom-code-snippets-extensions/)。希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-15T06:32:02.523

由于这在 Xcode 中不一致（例如，我什至无法在 Xcode 9 上启用该选项），我建议改用[Xcode Snippet](http://nshipster.com/xcode-snippets/)。

# c# - 长时间休息后套接字不发送数据

> ID：11273662
> 
> 赞同：-1
> 
> 时间：2012-06-30T11:19:22.217
> 
> 标签：c#, actionscript-3, sockets, client

我正在编写一个客户端-服务器应用程序（AS3-AIR 中的客户端，C# 中的服务器）。

建立连接后，他们可以相互传输文件，等等。一切都很好。
但是，如果套接字连接有很长的中断（当它们仍然连接时），连接将停止发送数据。

这很奇怪，因为 ActionScript 套接字“.connected”返回`true`. C# 服务器也是如此。
有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T06:58:56.517

我建议每 10 秒发送`ping`（和回复）一次。`pong`

# javascript - html/css 打破多列文本

> ID：11273664
> 
> 赞同：0
> 
> 时间：2012-06-30T11:19:43.123
> 
> 标签：javascript, html, css

我正在寻找这种情况的解决方案：我在一个 div 容器中有很大的 html 文本。我在上面使用 css3 多列。我想在保持高度后打破这个容器。所以我会用多列布局创建一个同样高度的“表格”。我类似于报纸 - 页面高度后大块文本中断 - 下一页继续使用相同的多列布局的前一页文本......我该怎么做？

# android - 为什么 string.matches 和 pattern.matches 得到不同的结果？

> ID：11273665
> 
> 赞同：0
> 
> 时间：2012-06-30T11:19:45.423
> 
> 标签：android

```
 // pattern 20xx/xx/xx, e.g. 2012/2/22
String Regex_Date_1 = "20\\d\\d/\\d{1,2}/\\d{1,2}";

String cell = "from 2011/7/31 to 2011/8/15 15:10-17:40,18:30-21:00";
System.out.println(cell);

System.out.println("--- a ---");
System.out.println( cell.matches(Regex_Date_1) );

System.out.println("--- b ---");
Pattern p = Pattern.compile(Regex_Date_1);
Matcher m = p.matcher(cell);
while(m.find()){
    System.out.println( m.group(0) );
} 
```

结果：

```
 from 2011/7/31 to 2011/8/15 15:10-17:40,18:30-21:00
--- a ---
false
--- b ---
2011/7/31
2011/8/15 
```

为什么 string.matches 返回 false？但是 pattern.matches 可以得到匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T11:24:47.107

因为`String#matches`将返回`true`“当且仅当此字符串与给定的正则表达式匹配”。您可以在此处查看文档：[String#matches](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#matches%28java.lang.String%29)

但是，当且仅当输入序列的子序列与此匹配器的模式匹配时，`Matcher#find`才会返回“”。`true`该文档可在此处获得：[Matcher#find](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html#find%28%29)。

总而言之 -`String#matches`如果整个字符串与正则表达式匹配，则`Matcher#find`返回 true；如果字符串的某些子序列可以与正则表达式匹配，则返回 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T11:28:51.140

贝库卡斯

Regex_Date_1 = "20\d\d/\d{1,2}/\d{1,2}";

[匹配（字符串正则表达式）](http://developer.android.com/reference/java/lang/String.html#matches%28java.lang.String%29)

仅当正则表达式匹配整个输入字符串时，他的方法才返回 true。`A common mistake is to assume that this method behaves like contains(CharSequence); if you want to match anywhere within the input string, you need to add .*`到正则表达式的开头和结尾。

# winforms - 如何将剪贴板中的透明图像粘贴到 C# winforms 应用程序中？

> ID：11273669
> 
> 赞同：8
> 
> 时间：2012-06-30T11:20:49.187
> 
> 标签：winforms, image, clipboard, transparent, paste

注意：这个问题是关于从剪贴板粘贴，而不是复制到剪贴板。有几篇关于复制到剪贴板的帖子，但找不到解决这个问题的帖子。

如何将具有透明度的图像（[例如此](http://en.wikipedia.org/wiki/Portable_Network_Graphics)图像）粘贴到 winforms 应用程序中并保持透明度？

我试过使用`System.Windows.Forms.GetImage()`，但这会产生一个黑色背景的位图。

我从谷歌浏览器复制这张图片，它支持多种剪贴板格式，包括`DeviceIndependentBitmap`和`Format17`.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-30T12:34:42.193

Chrome 以 24bpp 格式将图像复制到剪贴板。这会将透明度变成黑色。您可以从剪贴板中获取 32bpp 格式，但这需要处理 DIB 格式。System.Drawing 中没有对此的内置支持，您需要一个小辅助函数来进行转换：

```
 private Image GetImageFromClipboard() {
        if (Clipboard.GetDataObject() == null) return null;
        if (Clipboard.GetDataObject().GetDataPresent(DataFormats.Dib)) {
            var dib = ((System.IO.MemoryStream)Clipboard.GetData(DataFormats.Dib)).ToArray();
            var width = BitConverter.ToInt32(dib, 4);
            var height = BitConverter.ToInt32(dib, 8);
            var bpp = BitConverter.ToInt16(dib, 14);
            if (bpp == 32) {
                var gch = GCHandle.Alloc(dib, GCHandleType.Pinned);
                Bitmap bmp = null;
                try {
                    var ptr = new IntPtr((long)gch.AddrOfPinnedObject() + 40);
                    bmp = new Bitmap(width, height, width * 4, System.Drawing.Imaging.PixelFormat.Format32bppArgb, ptr);
                    return new Bitmap(bmp);
                }
                finally {
                    gch.Free();
                    if (bmp != null) bmp.Dispose();
                }
            }
        }
        return Clipboard.ContainsImage() ? Clipboard.GetImage() : null;
    } 
```

示例用法：

```
 protected override void OnPaint(PaintEventArgs e) {
        using (var bmp = GetImageFromClipboard()) {
            if (bmp != null) e.Graphics.DrawImage(bmp, 0, 0);
        }
    } 
```

它生成了这个屏幕截图，表单的 BackgroundImage 属性设置为库存位图：

![在此处输入图像描述](../Images/aa64c6a7deeb58c90db3c0ce9c3c4de0.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-08T17:41:25.677

（我不能评论答案）

Hans Passant 的回答很好，但不正确。

[使用此代码保存的屏幕截图](https://i.stack.imgur.com/TSHZW.png)。

您需要替换`var ptr = new IntPtr((long)gch.AddrOfPinnedObject() + 40);` 为`var ptr = new IntPtr((long)gch.AddrOfPinnedObject() + 52);`

[使用正确代码保存的屏幕截图](https://i.stack.imgur.com/ikFUU.png)。

您还需要垂直翻转图像

# sandbox - google订阅如何测试？

> ID：11273671
> 
> 赞同：0
> 
> 时间：2012-06-30T11:20:59.183
> 
> 标签：sandbox, checkout, subscription, recurring

我继承了一个使用谷歌订阅并生成每月重复的订单的项目。

我已经设置了一个沙盒买家帐户，但我不确定如何测试定期订单系统，而不必等待一个月。

理想情况下，在沙盒模式下，我可以在几分钟后对每月定期订单重新计费。

将回调 xml 发送到回调脚本以验证一切在这方面是否正常工作也很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T13:37:38.607

我会尝试在测试期间将`period`字符串设置`DAILY`为。这将每天而不是每月向用户收费，因此您不必等待很长时间。完成每日收费的测试后，将其更改回`MONTHLY`.

```
<subscription type="merchant" period="DAILY" type="merchant"> 
```

有关详细信息，请参阅[本网站](https://developers.google.com/checkout/developer/Google_Checkout_Beta_Subscriptions)`subscription`的`XML Tag Definitions`部分。

希望这可以帮助！

# sql - 比较两个日期的 SQL 行百分比

> ID：11273673
> 
> 赞同：0
> 
> 时间：2012-06-30T11:21:06.410
> 
> 标签：sql, db2

我有`INCIDENT`行表

```
TICKETID   ACTUALFINISH          TARGETFINISH
100      2012-03-01 11:11:11    2012-02-01 11:11:11 
101      2012-03-01 11:11:11    2012-01-01 11:11:11 
102      2012-04-01 11:11:11    2012-06-01 11:11:11 
103      2012-05-01 11:11:11    2012-07-01 11:11:11 
104        null                        null 
```

我想要`target finish`大于`actual finish`和相反的行的百分比。

所以对于这个表结果将是（不涉及空值）：

```
SLA    PERCENTAGE
YES    50
NO     50 
```

我编写了 SQL 查询，但我不断收到错误消息。我不知道错误在哪里。

我首先得到的记录总数比 AFis 大于 TF 然后 AF 小于 TF

```
with HELPTABLE as
    (select count(*) as Total

from incident as incident4

where incident4.targetfinish is not null and incident4.actualfinish is not null )

select distinct  case when incident.targetfinish>incident.actualfinish  then 
                dec((( select count(*)

 from incident as incident1

 where  incident1.targetfinish is not null and incident1.actualfinish is not null  )),10,2)/HELPTABLE.Total*100

 when incident.targetfinish<incident.actualfinish  then 

                dec(((select count(*)

from incident as incident2

where incident2.targetfinish is not null and incident2.actualfinish is not null  )),10,2)/HELPTABLE.Total*100
                    end as Percentage,

        case when incident.targetfinish>incident.actualfinish then 'Yes'
             when incident.targetfinish<incident.actualfinish then 'No'
        end as SLA

from incident

where  incident.targetfinish is not null and incident.actualfinish is not null 
```

如果有人知道错误是什么谢谢！

> [错误代码：-206，SQL 状态：42703] DB2 SQL 错误：SQLCODE=-206，SQLSTATE=42703，SQLERRMC=HELPTABLE.TOTAL，DRIVER=3.57.82）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T11:25:45.047

```
select 'YES' as SLA, 
(SUM(case when targetfinish > actualfinish  then 1.0 else 0.0 end) / count(*) ) * 100 as PERCENTAGE 
from incident 
where targetfinish is not null and actualfinish is not null
union 
select 'NO' as SLA, 
(SUM(case when targetfinish <= actualfinish  then 1.0 else 0.0 end) / count(*) ) * 100 as PERCENTAGE 
from incident
where targetfinish is not null and actualfinish is not null 
```

[http://sqlfiddle.com/#!3/2e903/18](http://sqlfiddle.com/#!3/2e903/18)

# php - 将当前文件路径保存到变量不起作用

> ID：11273674
> 
> 赞同：1
> 
> 时间：2012-06-30T11:21:16.587
> 
> 标签：php, variables, dir

我有一个项目，有各种使用位于项目根文件夹中的 functions.php 文件的子目录

```
include "../functions.php"; 
```

问题是我需要保存当前的子目录路径，以便在重新加载页面时，它会将我重定向到我之前的文件夹，而不是根文件夹。

```
header('Location: '.$currFolder.'index.php'); 
```

为此，我（尝试）通过调用每个 subdir index.php 文件中的函数将其存储到变量中

```
$currFolder = dirname($_SERVER['PHP_SELF']); // returns "/root/subdir" 
```

但由于某种原因，变量保持为空，所以标题不断将我重定向到根......我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T11:26:38.253

您必须将值保存在会话或 cookie 中。尝试这个：

```
$_SESSION['currFolder'] = dirname($_SERVER['PHP_SELF']); 
```

然后您可以使用以下方法检索它：

```
$currFolder = $_SESSION['currFolder']; 
```

当然，请确保在尝试使用 $_SESSION 变量之前调用了 session_start()。

# java - Hibernate + Spring + session + 缓存

> ID：11273675
> 
> 赞同：0
> 
> 时间：2012-06-30T11:21:17.483
> 
> 标签：java, spring, hibernate, session, caching

我们在 Java 应用程序中使用 Hibernate 和 Spring。我们发现当一个会话更新数据库中的某些内容时，其他会话看不到更新。例如 user1 从数据库中获取账户余额，然后 user2 增加余额，如果 user1 再次获取对象，他在更新之前看到账户余额（似乎会话使用其缓存中的值）但我们想用 new 获取更新后的对象账户余额。用户 1 在与用户 2 会话不同的所有活动中使用一个会话。是否有任何配置强制从数据库中获取更新的对象？或任何其他帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T14:26:23.040

这是设计使然（将 Session 视为“工作单元”）；会话应该是事务隔离的。这是会话应该短暂存在的众多原因之一。在我看来，您可能正在使用长寿命会话。

但无论如何，您可以强制“其他会话”（在您的情况下为 user1 *）*使用`session.refresh( theAccount );`. REFRESH 也是一个级联操作，如果您在刷新帐户时也需要刷新依赖状态...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T11:37:30.437

如果您对所有活动使用单个会话，那么您所看到的将是意料之中的。

会话 1 将加载对象，然后由会话 2 更改。但是，会话 1 仍然打开，对象在会话（第一级）缓存中。您可以使用 then 刷新 Session1`session.clear()`如果您重新加载对象，您将获得更新的版本。

# java - 如何创建 Maven 依赖项 bat 文件？

> ID：11273676
> 
> 赞同：1
> 
> 时间：2012-06-30T11:21:19.263
> 
> 标签：java, maven, dependencies, pom.xml

我有一个 pom 文件，我在其中添加了所有依赖项。和 .m2 文件夹，我在其中添加了 Jar 文件

但我正在寻找一个文件，我可以在其中添加文件中的所有依赖项并运行它。

> mvn org.apache.maven.plugins:maven-dependency-plugin:2.1:get
> -DrepoUrl=http://download.java.net/maven/2/ -Dartifact=robo-guice:robo-guice:0.4-SNAPSHOT

这样我就不必担心 .m2 文件夹中的 jar 文件。

有没有办法做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T18:57:01.190

您可以使用`mvn dependency:copy-dependencies`将所有依赖项复制到某个文件夹。

另一种解决方案是创建一个包含所有内容的 JAR。请参阅此问题的答案：[如何使用 Maven 创建具有依赖项的可执行 JAR？](https://stackoverflow.com/questions/574594/how-can-i-create-an-executable-jar-with-dependencies-using-maven)

# matlab - 读取并绘制 .txt 文件（到 .mat）

> ID：11273681
> 
> 赞同：0
> 
> 时间：2012-06-30T11:22:09.837
> 
> 标签：matlab, file-io

我需要将 test.TXT 文件（制表符分隔）读入 MATLAB。

TXT 文件具有以下形式：

```
Datum Time Data1 Data2 Data3 Data4 Data5
06/28/2012 09:27,3 1,931764 -0,008698 4,151306 33,865424 -44,923096
06/28/2012 09:27,3 1,931764 -0,003662 4,154358 33,865424 -44,831543
06/28/2012 09:27,4 1,928712 -0,001526 4,168701 33,866102 -45,472412
..................................................... 
```

之后我需要绘制这些数据（例如`time`vs. `data1`; `time`vs. `data2`..）

什么是打开和读取 test.txt 文件的最简单方法，这样我就可以绘制我的数据（将所有数据插入工作区..）。我尝试导入数据，但随后 MATLAB 将数据作为一列导入。：/

谢谢

* * *

## 编辑

我刚刚注意到我将错误的时间格式复制到第一篇文章中：S

```
Datum Time Data1 Data2 Data3 Data4 Data5
06/28/2012 17:09:27,3 1,931764 -0,008698 4,151306 33,865424 -44,923096
06/28/2012 17:09:27,3 1,931764 -0,003662 4,154358 33,865424 -44,831543
06/28/2012 17:09:27,4 1,928712 -0,001526 4,168701 33,866102 -45,472412
..................................................... 
```

17:09:27,4 -> 17（小时）、09（分钟）、27（秒）、4（毫秒）

`,`这是现在的大问题`.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T13:03:38.517

正如前面在[这个问题](https://stackoverflow.com/questions/8981038/reading-integers-from-file-in-matlab)中回答的那样，您应该使用[textscan](http://www.mathworks.com/help/techdoc/ref/textscan.html)或[fscanf](http://www.mathworks.com/help/techdoc/ref/fscanf.html)

仔细研究后，您的问题有一些有趣的细微差别。我采用的解决方案是通过将所有内容读取为字符串来保留柱状结构。这有助于保持一切有序，同时用句点替换逗号，将日期字符串处理为 datenums，最后转换存储为字符串的数字。

```
fid = fopen('test.txt','rt');
header = textscan(fid,'%s %s %s %s %s %s %s',1); 
data = textscan(fid,'%s %s %s %s %s %s %s');
data = cellfun(@(x) strrep(x,',','.'),data,'UniformOutput',false);
clean_data(:,1) = arrayfun(@(x) datenum([data{1}{x} ' ' data{2}{x}]), 1:length(data{1}) )';
clean_data(:,2:6) = cell2mat(cellfun(@str2num , [data{3:end}],'UniformOutput',false));
fclose(fid); 
```

那里有一些混乱的过渡。但是，只要您的文件不是太长，一般方法就应该是可靠的。结果如下：

```
>> datestr(clean_data(:,1))
ans =
28-Jun-2012 09:27:18
28-Jun-2012 09:27:18
28-Jun-2012 09:27:24

>> clean_data(:,2:end)
ans =
1.9318   -0.0087    4.1513   33.8654  -44.9231
1.9318   -0.0037    4.1544   33.8654  -44.8315
1.9287   -0.0015    4.1687   33.8661  -45.4724 
```

最后绘制与日期的对比图，这是最初的目标：

```
>> plot(clean_data(:,1),clean_data(:,2))
>> datetick 
```

# eclipse - 日食中的 Nutch

> ID：11273683
> 
> 赞同：0
> 
> 时间：2012-06-30T11:22:37.200
> 
> 标签：eclipse, nutch

[在配置 nutch 时，在http://wiki.apache.org/nutch/RunNutchInEclipse](http://wiki.apache.org/nutch/RunNutchInEclipse)上的“为 Nutch 建立 Eclipse 环境”部分下有一个步骤，我无法理解。

步骤号 3 说

“此外，我们必须手动添加每个单独的插件 src/java 和 src/test 文件夹，尽管这需要一些时间，但完成此操作是绝对必要的。”

它在谈论哪些插件以及如何添加这些插件？？？

需要帮助，因为我试图从过去 2 天开始在 eclipse 上运行 nutch 并且仍然无法掌握它..

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:11:15.097

如果你还在努力。这是一个非常烦人的步骤，您必须将**每个**插件的 src/test 和 src/java 文件夹添加到您的类路径中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-11T12:39:16.387

更新的步骤在这里：[https](https://wiki.apache.org/nutch/RunNutchInEclipse) ://wiki.apache.org/nutch/RunNutchInEclipse 。现在，您不必手动将每个 src/test 和 src.java 目录添加到类路径:)

# iphone - 如何在 iPhone 中对 NSMutableArray 值 Aa-Zz 进行排序？

> ID：11273684
> 
> 赞同：0
> 
> 时间：2012-06-30T11:22:54.897
> 
> 标签：iphone, ios, sorting, nsmutablearray

我正在尝试在 iPhone 应用程序中按 Aa-Zz 格式对 NSMutablArray 值进行排序。我在我的项目中使用了以下代码。

```
for (id key in [dictionary allKeys])
        {
            id value = [dictionary valueForKey:key];
            [duplicateArray addObject:value];
            [value release];
            value =nil;
            NSSortDescriptor *sortdis = [[[NSSortDescriptor alloc] initWithKey:@"Name" ascending:YES] autorelease];
            NSArray *discriptor = [NSArray arrayWithObjects:sortdis,nil];
            mutableArray = [[duplicateArray sortedArrayUsingDescriptors:discriptor]retain];
        }   
        NSLog(@"mutableArray : %@", mutableArray);
[mutableArray sortUsingSelector:@selector(caseInsensitiveCompare:)]; 
```

应用程序因此错误日志而崩溃：`[__NSArrayI sortUsingSelector:]: unrecognized selector sent to instance.`

但是，我已经搜索并找到了崩溃的原因。我的 mutableArray 值是这样的，

```
(
        {
        Id = 00001;
        Name = "ABCD";
    },
        {
        Id = 00002;
        Name = "BCDE";
    },
        {
        Id = 00003;
        Name = "ZXYS";
    },
        {
        Id = 00004;
        Name = "abcd";
    },
        {
        Id = 00009;
        Name = "bcde";
    },
) 
```

我想对这个数组值进行排序，如**ABCD、abcd、BCDE、bcde、ZXYs**。任何人都可以帮助解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T11:29:22.130

戈皮纳特。请在您的项目中使用此更新的代码。

```
 for (id key in [dictionary allKeys])
    {
        id value = [dictionary valueForKey:key];
        [duplicateArray addObject:value];
        [value release];
        value =nil;
        NSSortDescriptor *sortdis = [[[NSSortDescriptor alloc] initWithKey:@"Name" ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)]autorelease];
        NSArray *discriptor = [NSArray arrayWithObjects:sortdis,nil];
        mutableArray = [[duplicateArray sortedArrayUsingDescriptors:discriptor]retain];
    }   
    NSLog(@"mutableArray : %@", mutableArray); 
```

我希望它会帮助你。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T11:53:50.573

```
 for (id key in [dictionary allKeys])
    {
        id value = [dictionary valueForKey:key];
        [duplicateArray addObject:value];
    }   
    NSSortDescriptor *sortdis = [[[NSSortDescriptor alloc] initWithKey:@"Name" ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)]autorelease];
    NSArray *discriptor = [NSArray arrayWithObjects:sortdis,nil];
    NSArray* notAMutableArray = [[duplicateArray sortedArrayUsingDescriptors:discriptor]retain];
    NSLog(@"notAMutableArray : %@", notAMutableArray); 
```

我没有运行它，但它是一个更好的开始......

# php - PHP JavaScript MapBox 试图弄清楚如何为标记传递自定义数据

> ID：11273685
> 
> 赞同：0
> 
> 时间：2012-06-30T11:23:10.523
> 
> 标签：php, javascript, jquery, mysql, mapbox

好吧，尝试使用 Mapbox [http://www.mapbox.com](http://www.mapbox.com)，我终于到了一个地步，我认为我的地图可以根据我的设置示例正常工作。在这一点上，我想开始传递我自己的自定义数据以用于站点上的标记。我知道它必须是一种特定的格式，一切都很好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:50:00.947

您可以使用[标记 API 添加标记，方法是制作 GeoJSON](http://mapbox.com/mapbox.js/example/single-marker/) - 这[是简单的 GeoJSON](http://geojson.org/)规范，您可以通过创建正确的数组结构然后使用[json_encode](http://www.php.net/manual/en/function.json-encode.php)从 PHP 制作该规范。

# solr - 无法实例化侦听器 org.apache.solr.handler.dataimport.scheduler.ApplicationListener

> ID：11273686
> 
> 赞同：0
> 
> 时间：2012-06-30T11:23:13.433
> 
> 标签：solr, dataimporthandler

当我添加时，我正在尝试为我的索引设置 dataimportscheduler：

```
 <listener>
    <listener-class>
      org.apache.solr.handler.dataimport.scheduler.ApplicationListener
    </listener-class>
  </listener> 
```

到我的 webdefault.xml 并运行 start.jar，我得到：

```
2012-06-30 11:04:52.959:INFO::Logging to STDERR via org.mortbay.log.StdErrLog
2012-06-30 11:04:53.457:INFO::jetty-6.1-SNAPSHOT
2012-06-30 11:04:53.953:WARN::Could not instantiate listener org.apache.solr.handler.dataimport.scheduler.ApplicationListener
java.lang.ClassNotFoundException: org.apache.solr.handler.dataimport.scheduler.ApplicationListener
        at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
        at org.mortbay.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:401)
        at org.mortbay.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:363)
        at org.mortbay.jetty.handler.ContextHandler.loadClass(ContextHandler.java:1102)
        at org.mortbay.jetty.webapp.WebXmlConfiguration.initListener(WebXmlConfiguration.java:630)
        at org.mortbay.jetty.webapp.WebXmlConfiguration.initWebXmlElement(WebXmlConfiguration.java:368)
        at org.mortbay.jetty.webapp.WebXmlConfiguration.initialize(WebXmlConfiguration.java:289)
        at org.mortbay.jetty.webapp.WebXmlConfiguration.configure(WebXmlConfiguration.java:222)
        at org.mortbay.jetty.webapp.WebXmlConfiguration.configureDefaults(WebXmlConfiguration.java:162)
        at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1262)
        at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:518)
        at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:499)
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
        at org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:152)
        at org.mortbay.jetty.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:156)
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
        at org.mortbay.jetty.handler.HandlerCollection.doStart(HandlerCollection.java:152)
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
        at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
        at org.mortbay.jetty.Server.doStart(Server.java:224)
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
        at org.mortbay.xml.XmlConfiguration.main(XmlConfiguration.java:985)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at org.mortbay.start.Main.invokeMain(Main.java:194)
        at org.mortbay.start.Main.start(Main.java:534)
        at org.mortbay.start.Main.start(Main.java:441)
        at org.mortbay.start.Main.main(Main.java:119) 
```

我补充说：

```
<lib dir="../../dist/" regex="apache-solr-dataimportscheduler-1.0.jar" /> 
```

到 solrconfig.xml （以这种方式成功加载了一些其他库），但它没有改变任何东西，根据错误消息和日志文件中显示的时间，似乎 webdefault.xml 在 solrconfig.xml 之前加载。

我在命令行中使用 java 的 -cp 选项加载了 apache-solr-dataimportscheduler-1.0.jar，但是没有用。

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T12:41:04.643

几天前我回答了一个类似的问题。请检查一下。 [Solr DataImportHandler 配置](https://stackoverflow.com/questions/11097931/solr-dataimporthandler-configuration/11102507#11102507)

如果这没有帮助，另一种选择是将这个 jar 复制到 solr.war 的 web-inf\lib 文件夹。这可以在码头的 webapps 下的爆炸文件夹中完成...

# spring-mvc - 如何使用 RedirectAttributes 测试 Spring MVC 控制器

> ID：11273696
> 
> 赞同：2
> 
> 时间：2012-06-30T11:26:04.397
> 
> 标签：spring-mvc, junit

我在用：

*   春天 3.1
*   JUnit 4.10

我正在尝试为具有 RedirectAttributes 的控制器编写一个 junit 测试用例。

控制器的签名是：

```
@RequestMapping(method = RequestMethod.POST)
public String homePOST(@Validated({ IBasic.class }) @ModelAttribute("userCommand") User userCommand,
            BindingResult result, Model model,
            RedirectAttributes flashAttributes) 
```

JUnit 测试用例是：

```
 @RunWith(SpringJUnit4ClassRunner.class)
    @ContextConfiguration(locations = { "/root-context.xml", "/servlet-context.xml" })
public class HomeControllerTest {

    @Autowired
    private RequestMappingHandlerAdapter handlerAdapter;

    @Autowired
    private RequestMappingHandlerMapping handlerMapping;

    @Test
    public void testHomePOST() {
        MockHttpServletRequest request = new MockHttpServletRequest("POST", "/");
        request.addParameter("username", "user1");
        request.addParameter("password", "mypasswd");

        MockHttpServletResponse response = new MockHttpServletResponse();

        Object handler;

        try {
            handler = handlerMapping.getHandler(request).getHandler();

            ModelAndView modelAndView = handlerAdapter.handle(request,
                    response, handler);

            assertViewName(modelAndView, "redirect:/myview");
        } catch (Exception e) {
            String err = "Error executing controller : " + e.toString();

            fail(err);
        }
    }
} 
```

当 handlerAdapter.handle() 被执行时，我得到：

```
java.lang.AssertionError: Error executing controller : java.lang.NullPointerException
at org.junit.Assert.fail(Assert.java:93)
at com.myapps.service.impl.test.HomeControllerTest.testHomePOST(HomeControllerTest.java:75)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

如果我从控制器中删除 RedirectAttributes，它工作正常。

谁能提供一些帮助如何使用 RedirectAttributes 测试控制器？

先感谢您。

为了模拟这一点，这里是控制器代码：

```
@Controller
@RequestMapping(value = "/")
public class HomeController {
    @RequestMapping(method = RequestMethod.POST)
    public String homePOST(
            @Validated({ IBasic.class }) @ModelAttribute("userCommand") User userCommand,
            BindingResult result, Model model,
            RedirectAttributes flashAttributes) {

        return "redirect:/myview";
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T21:14:56.313

我能够复制您的问题 - 问题的根本原因是，如果 RedirectAttributes 作为处理程序方法参数存在，那么就在从处理程序适配器返回之前，输出“flashmap”被拉出并将 flashAttributes 添加到它。现在，这个输出 flashMap 是从 httprequest 中检索出来的——在你的情况下，这对于你的`MockHttpServletRequest`.

解决方法是在 MockHttpServletRequest 中简单地设置一个虚拟输出 flashMap：

```
request.setAttribute(DispatcherServlet.OUTPUT_FLASH_MAP_ATTRIBUTE,new FlashMap()); 
```

这现在对我有用。您能否尝试一下，看看它是否为您解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T10:02:27.443

使用 mockito 框架来模拟它。利用

```
RedirectAttributes flashAttributes;
flashAttributes=Mockito.mock(RedirectAttributes.class) 
```

在设置功能中。

# jquery - 获取在 jQuery UI 中移动的 portlet 的 id

> ID：11273704
> 
> 赞同：4
> 
> 时间：2012-06-30T11:27:42.893
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我正在使用 jQuery UI[可排序 portlet](http://jqueryui.com/demos/sortable/#portlets)到我分配数据 ID 的所有 portlet。一个 portlet 元素的 HTML 结构如下所示：

```
 <div class="portlet" data-id= "6">
        <div class="portlet-header"><h6>Heading</h6></div>
        <div class="portlet-content">First Person</div>
        <div class="portlet-content">10</div>
      </div> 
```

现在与上面链接中的演示类似，我有三列。对于我给出的所有列，我给出了`id`1、2、3。

```
<div class="column" id="1"> 
```

portlet 结构位于这些 div 中。

现在，当一个 portlet 从一列移动到另一列时，我可以很容易地获得`id`它所在的列，如下所示：

```
$( ".column" ).sortable({
    connectWith: ".column",
    handle: 'h6',
    receive: function(event, ui) {
      console.log(this);
    } 
```

我唯一想得到的是`data-id`已移动的 portlet 的。

我怎么能得到那个？**jsFiddle**在[这里](http://jsfiddle.net/rUbQL/)。_

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T11:34:10.270

被移动的元素在传递给处理程序`item`的参数的属性中可用，因此您可以编写：`ui``receive`

```
console.log(ui.item.data("id")); 
```

[你会在这里](http://jsfiddle.net/rUbQL/1/)找到一个更新的小提琴。

# c# - Win8 C# - UDP 侦听器和线程停止

> ID：11273705
> 
> 赞同：2
> 
> 时间：2012-06-30T11:27:48.480
> 
> 标签：c#, .net, udp, microsoft-metro, windows-runtime

我在使用 C# 编写的 Win8 Metro 应用程序时遇到问题。我有 UDP 侦听器，它从 WP7 设备接收数据包（简单的一个字符串命令）。

我可以看到数据包正在到达应用程序，但我只能收到其中几个。在输出窗口中经过一段时间（5-10 秒）后，我收到

> 线程 0x5a4 以代码 0 (0x0) 退出。

我不明白为什么线程停止。这是我的源代码，很简单。我绑定了侦听器，设置事件处理程序，然后当我收到命令时，我只是在 UI 上移动椭圆形状（用户）。

代码 ：

```
private async void Button_Click_1(object sender, RoutedEventArgs e)
{
    DatagramSocket listener = new DatagramSocket();          
    listener.MessageReceived += listener_MessageReceived;            

    try
    {
        await listener.BindServiceNameAsync(serviceName.Text);            
    }
    catch (Exception exception)          
    {               
        if (SocketError.GetStatus(exception.HResult) == SocketErrorStatus.Unknown)
        {
            throw;
        }                
    }                
}

async void listener_MessageReceived(DatagramSocket socket, DatagramSocketMessageReceivedEventArgs eventArguments)
{
    try
    {
        uint stringLength = eventArguments.GetDataReader().UnconsumedBufferLength;
        string command = eventArguments.GetDataReader().ReadString(stringLength);

        await this.Dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, () =>
            {
                MessageBlock.Text = "Message : " + command + " (@ " + DateTime.Now;
                MakeMove(command); 
            }
        );            
    }
    catch (Exception exception)
    {
        SocketErrorStatus socketError = SocketError.GetStatus(exception.HResult);
        if (socketError == SocketErrorStatus.ConnectionResetByPeer)
        {                     
            Debug.WriteLine("Peer does not listen on the specific port. Please make sure that you run step 1 first " +
                        "or you have a server properly working on a remote server."); 
        }
        else if (socketError != SocketErrorStatus.Unknown)
        {
            Debug.WriteLine("Error happened when receiving a datagram: " + socketError.ToString());
        }
        else
        {
            throw;
        }
    }
}

private void MakeMove(string command)
{
    Debug.WriteLine(command);

    switch (command)
    {
        case "10":
            this.user.SetValue(Canvas.TopProperty, Convert.ToInt32(this.user.GetValue(Canvas.TopProperty)) - 50);
            break;
        case "20":
            this.user.SetValue(Canvas.LeftProperty, Convert.ToInt32(this.user.GetValue(Canvas.LeftProperty)) + 50);
            break;
        case "30":
            this.user.SetValue(Canvas.TopProperty, Convert.ToInt32(this.user.GetValue(Canvas.TopProperty)) + 50);
            break;
        case "40":
            this.user.SetValue(Canvas.LeftProperty, Convert.ToInt32(this.user.GetValue(Canvas.LeftProperty)) - 50);
            break;
        case "50":
            this.user.SetValue(Canvas.LeftProperty, Convert.ToInt32(this.user.GetValue(Canvas.LeftProperty)) + 50);
            this.user.SetValue(Canvas.TopProperty, Convert.ToInt32(this.user.GetValue(Canvas.TopProperty)) - 50);
            break;
        case "60":
            this.user.SetValue(Canvas.LeftProperty, Convert.ToInt32(this.user.GetValue(Canvas.LeftProperty)) - 50);
            this.user.SetValue(Canvas.TopProperty, Convert.ToInt32(this.user.GetValue(Canvas.TopProperty)) - 50);
            break;
        case "70":
            this.user.SetValue(Canvas.LeftProperty, Convert.ToInt32(this.user.GetValue(Canvas.LeftProperty)) + 50);
            this.user.SetValue(Canvas.TopProperty, Convert.ToInt32(this.user.GetValue(Canvas.TopProperty)) + 50);
            break;
        case "80":
            this.user.SetValue(Canvas.LeftProperty, Convert.ToInt32(this.user.GetValue(Canvas.LeftProperty)) - 50);
            this.user.SetValue(Canvas.TopProperty, Convert.ToInt32(this.user.GetValue(Canvas.TopProperty)) + 50);
            break;
        default:
            Debug.WriteLine("Unknown command");
            break;
    } 
```

我做错了什么？

先感谢您！

# c++ - 使用多线程在 GNU C 中使用写入函数是否安全

> ID：11273712
> 
> 赞同：5
> 
> 时间：2012-06-30T11:29:20.033
> 
> 标签：c++, multithreading, sockets, gcc, redhat

将来自多个线程的函数调用写入同一个套接字

安全吗？我们想在它们之间添加同步吗？是否会导致应用程序从网络层延迟写入/读取到应用程序层等问题

我们在 Linux Redhat Enviornment 上使用 GNU C++ 库 GCC 4

这是一个服务器端进程，其中服务器和客户端之间只有 1 个套接字连接 服务器和客户端位于 2 台不同的机器上 数据从服务器发送到客户端 客户端到服务器

问题1-当服务器向客户端发送数据时（多个线程通过同一个单套接字向客户端写入数据）但是从某些线程写入的数据没有到达客户端它甚至没有到达相同的网络层机器（Tcpdump 没有该数据）

问题 2-当客户端向服务器发送数据时客户端发送的数据显示在服务器的 TCPdump 中未收到服务器应用程序，该服务器应用程序在循环中使用“读取”和“选择”函数从单个线程读取套接字

我们无法确定发生这些问题的模式 我们认为当有这么多多个线程写入同一个套接字时会发生这种情况 我们没有同步写入函数，希望操作系统正在处理同步

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:08:16.617

write() 是系统调用，不是库函数，系统调用一般保证是原子的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T11:33:06.363

从多个线程使用 write() 是不安全的。不能保证输出不会混在一起。一次写入可以将其一半字节放入套接字，然后另一次写入可以开始将其放入字节。如果您需要确保每次写入都是连续写入的（并且很难想象不需要这种保证），那么您需要一个锁或其他一些同步方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-12T18:05:26.857

未指定哪个`write`调用首先完成。上下文切换可能会在第一条指令处停止两次写入中的任何一次。这可能导致任意排序。没有什么`write`或内核可以做的。这是一个根本性的问题。

您的数据将以未指定的顺序写入，您可能无法接受。

# ios - 使用 UIBezierPath 和 CoreGraphics 自由手绘和擦除

> ID：11273713
> 
> 赞同：0
> 
> 时间：2012-06-30T11:29:20.887
> 
> 标签：ios, core-graphics, uibezierpath

我一直在尝试这么多，但还没有找到解决方案。我必须在 iOS 上实现绘画和擦除，所以我成功地使用`UIBezierPath`. 问题是，对于擦除，我通过 using 实现了与绘画相同的逻辑，`kCGBlendModeClear`但问题是我无法在已擦除的区域上重绘，这是因为在 drawRect 的每次传递中，我必须同时描边绘画和擦除路径。那么无论如何我们可以从绘图路径中减去擦除路径以获得结果路径，然后对其进行描边。我是 Core Graphics 的新手，期待您的回复和评论。或任何其他实现相同的逻辑。我不能使用橡皮擦作为背景颜色，因为我的背景是有纹理的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T13:39:55.960

您不需要每次都抚摸路径，实际上这样做会对性能造成巨大影响。我保证，如果您在 iPad 3 上试用它，您将在几次敲击后遇到几乎没有响应的屏幕。您只需要添加和描边一次路径。之后，它将被存储为像素数据。所以不要跟踪你的笔画，只需添加它们，抚摸它们，然后摆脱它们。还要考虑使用 CGLayer（您可以在主循环之外绘制它，并且只在主循环中将其渲染到您的矩形，这样可以节省大量时间）。

这些是我使用的步骤，我正在做完全相同的事情（我使用 CGPath 而不是 UIBezierPath，但想法是一样的）：

1) 在开始触摸时，存储触摸点并将上下文设置为擦除或绘制，具体取决于用户选择的内容。

2) 在 touches 移动中，如果该点距离最后一个点有一定的任意距离，则移动到最后一个点 ( ) 并在 my 中`CGContextMoveToPoint`画一条线到新点 ( ) 。计算已更改的矩形（即包含两个点）并使用该矩形调用。`CGContextAddLineToPoint``CGLayer``setNeedsDisplayInRect:`

3) 在 drawRect 中渲染`CGLayer`到当前窗口上下文 ( `UIGraphicsGetCurrentContext()`)。

在 iPad 3 上（由于其巨大的像素数，每个人都遇到最大的麻烦）这个过程每次渲染需要 0.05 毫秒到 0.15 毫秒（取决于你滑动的速度）。不过有一个警告，如果您不采取适当的预防措施，即使您只使用`setNeedsDisplayInRect:` 我的 hacky 方法来解决这个问题（感谢开发论坛），整个框架矩形也会被重新绘制，这在我的自我回答问题中有所[描述](https://stackoverflow.com/a/11199648/1155387)，否则，如果您的视图需要很长时间才能绘制整个帧（我的视图花费了不可接受的 150 毫秒），那么在重新创建视图缓冲区时，您将在某些条件下出现短暂的卡顿。

*编辑*根据您的评论中的新信息，似乎这个问题的答案将使您受益->[在 iPhone 应用程序中使用 CoreGraphic Stroke 作为 Alpha 蒙版](https://stackoverflow.com/questions/2208579/use-a-coregraphic-stroke-as-alpha-mask-in-iphone-app)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T11:39:43.067

Hai 这里是制作绘画、擦除、撤消、重做、另存为图片的代码。您可以检查示例代码并在您的项目中实现它。 [这里](https://github.com/sumanthk2006/Smooth-Line-View-1)

# wpf - WPF：为什么 CaptureMouse 可能会失败？

> ID：11273717
> 
> 赞同：0
> 
> 时间：2012-06-30T11:30:05.243
> 
> 标签：wpf, adornerlayer, mousecapture

我有一个非常复杂的视图，其中选项卡控件中有多个选项卡。在一个选项卡上有一个带有装饰层的控件。装饰层在 MouseLeftButtonDown 事件处理程序中调用 CaptureMouse 以捕获鼠标输入。一切正常。

但是，如果我以特定顺序切换视图上的选项卡，然后单击装饰层，则无法捕获鼠标输入：CaptureMouse() 返回 false。同时 Mouse.Captured 返回 null。承载装饰层的控件继续正常工作，甚至能够捕获鼠标。

无法提供任何代码，因为有许多自定义控件在起作用。在简化的布局中，一切正常。

CaptureMouse 可能会失败的任何建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T18:58:59.337

如果`IInputElement`是 a`UIElement`或 a `UIElement3D`，`IsVisible`则`IsEnabled`必须是`true`。

如果`IInputElement`是一个`ContentElement`，那么就没有`IsVisible`那么`IsEnabled`一定是`true`。这当然是在你打电话的时候`Mouse.Capture`。此外，包含视觉对象的`PresentationSource`for`IInputElement`必须具有`IMouseInputProvider`.

我认为这里的问题要么是另一个元素立即被捕获，要么`IsVisible`是`false`在你打电话的时候`Capture`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T22:40:41.210

确保在 MouseLeftButtonUp 事件处理程序中您正在调用 ReleaseMouseCapture() 否则您的原始装饰层将保留它。

还要检查以确保您没有任何控制在链上更进一步也捕获鼠标（您可以在您的装饰层中将handled设置为true以防止这种情况发生）

编辑：还要确保 IsEnabled 为真。

# android - arraylist 没有正确更新

> ID：11273718
> 
> 赞同：2
> 
> 时间：2012-06-30T11:30:06.473
> 
> 标签：android, arraylist, sms, sqlite

我`contentobserver`用来监控短信。一切正常。当我尝试将这些 SMS 保存到数据库时，它显示`error near "t" syntax error`特定 SMS 的错误。当我删除这条特定的短信时，没有问题。安装后，它会按顺序正确显示所有消息。但是错误被发送到我的数组列表的末尾。此后从我的手机发送的短信也在列表之间更新，而不是在最后一个位置。请帮忙。

```
adapter = new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_list_item_1,list);
setListAdapter(adapter);
data = Incoming_outgoing_smsActivity.this.openOrCreateDatabase("Messages", MODE_PRIVATE, null);
data.execSQL("CREATE TABLE IF NOT EXISTS recor(text varchar(300));");
Cursor cur = data.rawQuery("SELECT * FROM recor", null);
while(cur.moveToNext()) {
  String content = cur.getString(cur.getColumnIndex("text"));
  backward_list.add(content);
  list.add(content);
}
adapter.notifyDataSetChanged();
Cursor cursor = getContentResolver().query(Uri.parse("content://sms"), null, null, null, null);
while(cursor.moveToNext()) {
  String number = cursor.getString(cursor.getColumnIndex("address"));
  String[] projection = new String[] {ContactsContract.PhoneLookup.DISPLAY_NAME};
  Uri contactUri = Uri.withAppendedPath(ContactsContract.PhoneLookup.CONTENT_FILTER_URI, Uri.encode(number));
  Cursor cursor_name = getContentResolver().query(contactUri, projection, null, null, null);
  String body = cursor.getString(cursor.getColumnIndex("body"));
  String type = cursor.getString(cursor.getColumnIndex("type"));
  long date1= cursor.getLong(cursor.getColumnIndex("date"));
  SimpleDateFormat formatter = new SimpleDateFormat("dd-MM-yyyy hh:mm:ss.SSS");
  Calendar calendar = Calendar.getInstance();
  calendar.setTimeInMillis(date1);
  try {
    int n = cursor.getInt(cursor.getColumnIndex("type"));
    switch (n) {
      case 1:
        String message = "FROM "+number+"\n"+formatter.format(calendar.getTime())+"\n"+"Message:-"+body;
        if(backward_list.contains(message)) {
          continue;
        } else {
          list.add(message);
          backward_list.add(message);
          data.execSQL("INSERT INTO recor VALUES('"+message+"')");
        }
        break;
      case 2:
        String messag = "TO "+number+"\n"+formatter.format(calendar.getTime())+"\n"+"Message:-"+body;
        if(backward_list.contains(messag)) {
          continue;
        } else {
          list.add(messag);
          backward_list.add(messag);
          data.execSQL("INSERT INTO recor VALUES('"+messag+"')");
        }
        break;
      default:
        break;
    }
  }
  catch (Exception e) {
    // TODO: handle exception
    Toast.makeText(getApplicationContext(), e.getMessage(), Toast.LENGTH_LONG).show();
    continue;
  }
} 
```

上面的代码将您收件箱中的当前短信保存到数据库中。下面的代码用于在新短信到达时更新您的收件箱。它会烘烤到达的消息，但不会将它们插入数据库。

```
data = Incoming_outgoing_smsActivity.this.openOrCreateDatabase("Messages", MODE_PRIVATE, null);
data.execSQL("CREATE TABLE IF NOT EXISTS recor(text varchar(300));");
super.onChange(selfChange);
Cursor cursor = getContentResolver().query(Uri.parse("content://sms"), null, null, null, null);
while(cursor.moveToNext()) {
  String number = cursor.getString(cursor.getColumnIndex("address"));
  String[] projection = new String[] {
    ContactsContract.PhoneLookup.DISPLAY_NAME};
    Uri contactUri = Uri.withAppendedPath(ContactsContract.PhoneLookup.CONTENT_FILTER_URI, Uri.encode(number));
    Cursor cursor_name = getContentResolver().query(contactUri, projection, null, null, null);
    if(cursor_name.moveToFirst()) {
      name = cursor_name.getString(cursor_name.getColumnIndex(ContactsContract.PhoneLookup.DISPLAY_NAME));
    }
    String body = cursor.getString(cursor.getColumnIndex("body"));
    String type = cursor.getString(cursor.getColumnIndex("type"));
    long date1= cursor.getLong(cursor.getColumnIndex("date"));
    SimpleDateFormat formatter = new SimpleDateFormat("dd-MM-yyyy hh:mm:ss.SSS");
    Calendar calendar = Calendar.getInstance();
    calendar.setTimeInMillis(date1);
    int n = cursor.getInt(cursor.getColumnIndex("type"));
    switch (n) {
      case 1:
        String message = "FROM "+number+"\n"+formatter.format(calendar.getTime())+"\n"+"Message:-"+body;
        if(backward_list.contains(message)) {
          continue;
        } else {
          list.add(message);
          backward_list.add(message);
          data.execSQL("INSERT INTO recor VALUES('"+message+"')");
        }
        break;
      case 2:
        String messag = "TO "+number+"\n"+formatter.format(calendar.getTime())+"\n"+"Message:-"+body;
        if(backward_list.contains(messag)) {
          continue;
        } else {
          list.add(messag);
          backward_list.add(messag);
          data.execSQL("INSERT INTO recor VALUES('"+messag+"')");
        }
        break;
      default:
        break;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T12:03:46.830

猜测在一条短信中存在某种受限制的字符/单词。

您应该使用准备好的语句来处理该问题。

有关示例，请参见此[SO Answer 。](https://stackoverflow.com/a/1812920/1105376)

对于关于显示顺序的第二个问题，请在查询中更改/使用 ORDER BY 来设置正确的顺序。

# php - 借助 php 在 iframe 中的网页源代码

> ID：11273722
> 
> 赞同：1
> 
> 时间：2012-06-30T11:30:45.447
> 
> 标签：php, html, iframe

我想在 iframe 标记中显示 url 的源代码。怎么做 ？例如，我有这个代码。

```
<html>
<head>
    <title></title>
</head>
<body>
    <div>
        <?php $content = @file_get_contents("http://stackoverflow.com"); ?>
    </div>
</body> 
```

如何在 iframe 中显示 $content ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T11:33:31.970

使用此代码：编辑：iframe 版本..：

将此源保存为**getsource.php**

```
<html>
<head>
    <title></title>
</head>
<body>
    <div>
        <pre>
        <?= htmlentities( @file_get_contents($_GET['url'])); ?>
        </pre>    
</div>
</body> 
```

然后在不同页面上的某处使用您的 iframe，并使用 url 变量将 src 添加到 getsource.php：

```
<iframe src="getsource.php?url=http://stackoverflow.com"></iframe> 
```

这可能不安全，但我认为 htmlentities 将防止 xss 攻击。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T11:45:18.330

将此代码添加到`main page`：

```
<html>
<head>
    <title>Source Code</title>
</head>
<body>
<iframe src="phpscript.php">Your browser doesn't support iframes.</iframe>
</body> 
```

把这个放在`phpscript.php`：

```
<pre>
<?php echo htmlentities( @file_get_contents("http://www.example.com/")); ?>
</pre> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T11:34:30.277

然后你必须有一个带有 iframe 的单独页面，它`src`指向这个页面。

不过，我可以问你为什么要使用 iframe 吗？似乎您可以在可滚动的“div”中显示它。

# xcode - 从 xcode 4.02 - 4.3 传输项目

> ID：11273727
> 
> 赞同：0
> 
> 时间：2012-06-30T11:32:34.617
> 
> 标签：xcode, version, transfer

`xcode 4.02`美好的一天 - 当我试图将我的项目（从 mac os x 6）传输到（mac os x lion）时已经过去了几天`xcode 4.3`所以它完全失败（（问题是 [Apple Mach-o Linker id Error]

当我添加问题开始

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:      (NSDictionary *)launchOptions
{
 //This one   BaseView* testView = [[BaseView alloc] initWithFrame:CGRectMake(0.0f, 20.0f,     320.0f, 460.0f)];

 //   [self.window addSubview:testView];    

    [self.window makeKeyAndVisible];
    return YES; 

} 
```

它给了我这个错误

`Ld "/Users/alex/Library/Developer/Xcode/DerivedData/Табло_Аэропортов-eijvojjtdhkznwhcqentolpelkxm/Build/Products/Debug-iphonesimulator/Табло Аэропортов.app/Табло Аэропортов" normal i386 cd "/Users/alex/Desktop/Табло Аэропортов" setenv MACOSX_DEPLOYMENT_TARGET 10.6 setenv PATH "/Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Volumes/Xcode/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin" /Volumes/Xcode/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -L/Users/alex/Library/Developer/Xcode/DerivedData/Табло_Аэропортов-eijvojjtdhkznwhcqentolpelkxm/Build/Products/Debug-iphonesimulator -F/Users/alex/Library/Developer/Xcode/DerivedData/Табло_Аэропортов-eijvojjtdhkznwhcqentolpelkxm/Build/Products/Debug-iphonesimulator -filelist "/Users/alex/Library/Developer/Xcode/DerivedData/Табло_Аэропортов-eijvojjtdhkznwhcqentolpelkxm/Build/Intermediates/Табло Аэропортов.build/Debug-iphonesimulator/Табло Аэропортов.build/Objects-normal/i386/Табло Аэропортов.LinkFileList" -mmacosx-version-min=10.6 -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=50100 -framework UIKit -framework Foundation -framework CoreGraphics -framework CoreData -framework QuartzCore -o "/Users/alex/Library/Developer/Xcode/DerivedData/Табло_Аэропортов-eijvojjtdhkznwhcqentolpelkxm/Build/Products/Debug-iphonesimulator/Табло Аэропортов.app/Табло Аэропортов"`

`Undefined symbols for architecture i386: "_OBJC_CLASS_$_BaseView", referenced from: objc-class-ref in AppDelegate.o ld: symbol(s) not found for architecture i386 clang: error: linker command failed with exit code 1 (use -v to see invocation)`

似乎 quarts core 或 mac os x 版本有问题。不知道该怎么办（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T11:48:09.423

这：“_OBJC_CLASS_$_BaseView”表示您的 BaseView 类尚未编译到项目中。选择您的目标，单击构建阶段选项卡，打开名为 compile sources 的部分，然后添加缺少的 .m 文件。

# php - 使用 codeigniter 在数据库中执行事件

> ID：11273733
> 
> 赞同：0
> 
> 时间：2012-06-30T11:33:11.963
> 
> 标签：php, database, codeigniter, triggers, hmvc

我正在尝试向给定邮件发送激活链接，如果用户在他的邮件中单击该激活链接，那么他的帐户就会被激活，我已经成功完成了这一切。我正在通过最初在数据库中将标志设置为 0 来做这件事如果单击激活链接，它会更新为 1。但我想再包括一件事，如果用户在一小时内未从他的邮件中单击激活链接，则该链接将过期，即我在数据库中的“标志”一个小时后会自动更新为1。我怎样才能在codeigniter中做这件事。？？？如果可能的话，你能给我一些链接或教程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T11:39:19.967

您可以在创建帐户时存储一个额外的 Timestamp/DateTime 列，将其用于与该值+1 小时进行比较。或使用仅用于激活的用户的另一个表为假（零），您可以在其中跟踪激活过程。一些表格列

```
id[int]|userid[int]|last_email_used[Varchar 255]|sended_on[Datetime] 
```

希望它有所帮助

# c# - 在 WinRT 中使用 FadeInThemeAnimation 作为过渡

> ID：11273734
> 
> 赞同：7
> 
> 时间：2012-06-30T11:33:19.763
> 
> 标签：c#, xaml, microsoft-metro, windows-runtime, winrt-xaml

我在我的 C#/XAML WinRT 应用程序中使用托管在服务器上的图像。当下载该图像时，我希望它淡入。我注意到`FadeInThemeAnimation`这是我希望使用的。但是，我想像使用它一样使用它`EntranceThemeTransition`。有没有办法做到这一点？如果是这样，如何？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-13T14:25:24.563

我遇到了同样的问题，但找到了解决方案，我认为分享它可能仍然有用。

显然`FadeInThemeAnimation`是一种特殊的动画，它不像你想象的那样在不透明度和可见性上起作用，而是在项目的 RenderTransform 上起作用。我只有在使用`FadeOutThemeAnimation`.

但这里有一个解决方法。在 XAML 中，将 Storyboard 添加到图像容器的资源中，如下所示：

```
<Grid>
    <Grid.Resources>
        <Storyboard x:Name="ImageFadeInStoryboard">
            <DoubleAnimation From="0" To="1" Storyboard.TargetName="yourImage" Storyboard.TargetProperty="Opacity" Duration="0:0:0.6" />
        </Storyboard>
    </Grid.Resources>
    <Image x:Name="yourImage" Source="{Binding ...}"/>
... 
```

然后为图像的`ImageOpened`事件添加一个处理程序：

```
<Image x:Name="yourImage" Source="{Binding ...}" ImageOpened="OnImageOpened"/> 
```

在代码隐藏中：

```
private void OnImageOpened(object sender, RoutedEventArgs e)
{
    ImageFadeInStoryboard.Begin();
} 
```

希望有帮助:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-15T09:02:23.710

另一种方法是创建一个附加的行为来“监听”一个布尔绑定来触发主题动画：

```
static class VisibilityAnimationBehavior
{
    public static readonly DependencyProperty IsVisibleProperty = DependencyProperty.RegisterAttached( "IsVisible", typeof( bool ), typeof( VisibilityAnimationBehavior ), new PropertyMetadata( true, IsVisibleChanged ) );
    public static bool GetIsVisible( DependencyObject Target ) { return ( bool )Target.GetValue( IsVisibleProperty ); }
    public static void SetIsVisible( DependencyObject Target, bool Value ) { Target.SetValue( IsVisibleProperty, Value ); }

    static void IsVisibleChanged( DependencyObject Source, DependencyPropertyChangedEventArgs Arguments )
    {
        bool OldValue = ( bool )Arguments.OldValue;
        bool NewValue = ( bool )Arguments.NewValue;

        DependencyObject ParentObject = Source as DependencyObject;
        if( ParentObject == null )
            return;

        if( NewValue == true && OldValue != true )
        {
            Storyboard TransitionStoryboard = new Storyboard();
            Storyboard.SetTarget( TransitionStoryboard, ParentObject );

            TransitionStoryboard.Children.Add( new FadeInThemeAnimation() );

            TransitionStoryboard.Begin();
        }
        else if( NewValue == false && OldValue != false )
        {
            Storyboard TransitionStoryboard = new Storyboard();
            Storyboard.SetTarget( TransitionStoryboard, ParentObject );

            TransitionStoryboard.Children.Add( new FadeOutThemeAnimation() );

            TransitionStoryboard.Begin();
        }
    }
} 
```

为了将行为附加到 XAML DependencyObject（此示例中为 Grid），请使用以下命令：

```
<Grid local:VisibilityAnimationBehavior.IsVisible="{Binding Path=TheBooleanBinding}"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-23T06:25:52.787

这不是解决方案，但我希望对您有所帮助，

在 XAML 中使用如下内容：

```
<StackPanel>
    <StackPanel.Resources>
        <Storyboard x:Name="EnterStoryboard">
            <FadeOutThemeAnimation Storyboard.TargetName="MyImage" />
        </Storyboard>
        <Storyboard x:Name="ExitStoryboard">
            <FadeInThemeAnimation Storyboard.TargetName="MyImage" />
        </Storyboard>
    </StackPanel.Resources>
    <Image x:Name="MyImage"
           PointerEntered="MyImage_PointerEntered" 
           PointerExited="MyImage_PointerExited"   
           Fill="Blue" Width="200" Height="300" />
</StackPanel> 
```

在代码中：

```
private void MyImage_PointerEntered(object sender, PointerRoutedEventArgs e)
{
    EnterStoryboard.Begin();
}

private void MyImage_PointerExited(object sender, PointerRoutedEventArgs e)
{
    ExitStoryboard.Begin();
} 
```

# android - 如何在我的 android 应用程序中应用 ICS 样式

> ID：11273736
> 
> 赞同：1
> 
> 时间：2012-06-30T11:33:36.120
> 
> 标签：android

我正在使用最小 sdk 版本 android 2.2 开发 android 应用程序，我正在为 ics 主题应用样式我怎么能将所有控件应用于 ics 样式将在 2.2 及更高版本上工作。我不知道应用程序主题的应用程序。可以帮助我为我的应用程序应用 ics 主题提供指导，非常感谢！

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T11:44:22.850

您可以使用全息无处不在的图书馆：[https ://github.com/ChristopheVersieux/HoloEverywhere/](https://github.com/ChristopheVersieux/HoloEverywhere/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T11:35:49.763

利用

[1-片段和操作栏](http://actionbarsherlock.com/)的Android兼容性..[支持库](http://developer.android.com/tools/extras/support-library.html)

# java - SQLiteOpenHelper 的说明

> ID：11273743
> 
> 赞同：0
> 
> 时间：2012-06-30T11:34:58.643
> 
> 标签：java, android, sqlite, sqliteopenhelper

我正在为我的（初学者/Android）应用程序实现一个数据库。

我不清楚是否

```
SQLiteOpenHelper 
```

旨在创建数据库（物理上，编写 .db/.sql 文件）

```
super() 
```

或者如果它仍然由我来创建这样的文件，并且这个类只是为了管理打开、关闭、更新数据库。

如果是这样，没有其他方法可以让一个类自动管理数据库，例如只传递文件名（除了自己做 ^_^ ）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T11:39:34.793

`SQLiteOpenHelper`将在调用`onCreate()`您的`SQLiteOpenHelper`子类之前创建数据库文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:04:28.233

您可以使用[NiceQL](https://github.com/Auxx/niceql)库，而无需手动创建数据库。Android API 中有很多关于创建数据库的怪癖，并且没有正确记录。NiceQL 涵盖了所有内容。

# c# - 访问 azure 表实体

> ID：11273745
> 
> 赞同：3
> 
> 时间：2012-06-30T11:35:38.723
> 
> 标签：c#, windows-phone-7, azure, azure-storage, restful-authentication

大家好，我想使用 REST API 或使用 Odata 从 Windows Phone 访问 azure 表实体。我写了一个代码，但这给了我 NULL 响应。每次我想访问一个表实体时，我都会调用 GetEntity 函数。下面是我正在使用的代码。请如果有人知道此代码有什么问题或任何帮助尽快回复。

/////////// 获取实体函数。//////////

```
 private void GetEntity(String tableName, String partitionKey, String rowKey)
    {
        String requestMethod = "GET";

        String urlPath = String.Format("{0}(PartitionKey='{1}',RowKey='{2}')", tableName,   partitionKey, rowKey);

        String dateInRfc1123Format = DateTime.Now.ToString("R", System.Globalization.CultureInfo.InvariantCulture);

        String canonicalizedResource = String.Format("/{0}/{1}", AzureStorageConstants.Account, urlPath);
        String stringToSign = String.Format(
              "{0}\n\n\n{1}\n{2}",
              requestMethod,
              dateInRfc1123Format,
              canonicalizedResource);
        String authorizationHeader = CreateAuthorizationHeader(stringToSign);
        HttpWebResponse response;
        Uri uri = new Uri(AzureStorageConstants.TableEndPoint + urlPath);

        HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(uri);
        request = (HttpWebRequest)WebRequest.Create(uri);
        request.Method = requestMethod;
        request.Headers[HttpRequestHeader.ProxyAuthorization] = null;
        request.Headers["Address"] = uri.ToString();
        request.Headers["Method"] = requestMethod;
        request.Headers["x-ms-date"]= DateTime.Now.ToString("R", System.Globalization.CultureInfo.InvariantCulture);
        request.Headers["x-ms-version"]= "2011-08-18";            
        request.Headers["Authorization"] = authorizationHeader;
        request.Headers["Accept-Charset"] = "UTF-8";
        request.Headers["ContentType"] = "application/atom+xml,application/xml";
        request.ContentType = "application/atom+xml,application/xml";
        request.Headers["DataServiceVersion"] = "1.0;NetFx";
        request.Headers["MaxDataServiceVersion"] = "1.0;NetFx";

       using (response = GetResponse(request))
        {
            Stream dataStream = response.GetResponseStream();
            using (StreamReader reader = new StreamReader(dataStream))
            {
                String responseFromServer = reader.ReadToEnd();
            }
        }
    } 
```

// 获取响应函数。

```
 public HttpWebResponse GetResponse(HttpWebRequest request)
       {
        var dataReady = new AutoResetEvent(false);
        HttpWebResponse response = null;
        var callback = new AsyncCallback(delegate(IAsyncResult asynchronousResult)
        {
            response = (HttpWebResponse)request.EndGetResponse(asynchronousResult);
            dataReady.Set();
        });

        request.BeginGetResponse(callback, request);
            return response;
    } 
```

////// 创建授权函数。///

```
 private String CreateAuthorizationHeader(String canonicalizedString)
    {
   String signature = string.Empty;
 using (HMACSHA256 hmacSha256 = new HMACSHA256(Convert.FromBase64String(AzureStorageConstants.Key))) 

 {
     Byte[] dataToHmac = System.Text.Encoding.UTF8.GetBytes(canonicalizedString);
     signature = Convert.ToBase64String(hmacSha256.ComputeHash(dataToHmac));
 }

String authorizationHeader = String.Format(
       CultureInfo.InvariantCulture,
       "{0} {1}:{2}",
       AzureStorageConstants.SharedKeyAuthorizationScheme,
       AzureStorageConstants.Account,
       signature);

return authorizationHeader; 
```

}

////////AzureStorageConstants。

```
 public static class AzureStorageConstants
    {

     private static String TableAccount = "datablobs";
     private static String cloudEndPointFormat = "http://" + TableAccount + ".table.core.windows.net/";

    private static String cloudKey = "Primary Access Key";// Here actual key is written.
    private static string AzureStorage_SharedKeyAuthorizationScheme = "SharedKey";

        public static String Account
        {
            get { return TableAccount; }
        }

        public static string SharedKeyAuthorizationScheme
        {
            get { return AzureStorage_SharedKeyAuthorizationScheme; }
        }

        public static string Key
        {
            get { return  cloudKey; }
        }

        public static String TableEndPoint
        {
            get { return cloudEndPointFormat; }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T19:43:39.993

对于解决方案，请参阅下面的链接我已经发布了解决方案 [http://social.msdn.microsoft.com/Forums/en-US/windowsazureconnectivity/thread/84415c36-9475-4af0-9f52-c534f5681432](http://social.msdn.microsoft.com/Forums/en-US/windowsazureconnectivity/thread/84415c36-9475-4af0-9f52-c534f5681432)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T01:58:51.303

我检查了你的代码，发现 GetEntity() 函数在创建签名以访问 Windows Azure 表存储方面确实存在一些问题，所以我将以下代码组合在一起，它确实有效。您只需替换您的 GetEntity() 并添加以下代码中包含的另外两个函数即可正常工作签名过程。

```
private string GetEntity(String tableName, String partitionKey, String rowKey)
{
    string result = "";
    String requestMethod = "GET";
    String urlPath = String.Format("{0}(PartitionKey='{1}',RowKey='{2}')",tableName, partitionKey, rowKey);
    DateTime now = DateTime.UtcNow;
    HttpWebResponse response;
    string uri = AzureStorageConstants.TableEndPoint + urlPath;
    HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(uri);
    request.Method = requestMethod;
    request.ContentLength = 0;
    request.Headers.Add("x-ms-date", now.ToString("R", System.Globalization.CultureInfo.InvariantCulture));
    request.Headers.Add("x-ms-version", "2009-09-19");
    request.ContentType = "application/atom+xml";
    request.Headers.Add("DataServiceVersion", "1.0;NetFx");
    request.Headers.Add("MaxDataServiceVersion", "1.0;NetFx");
    request.Headers.Add("If-Match", "*");
    request.Headers.Add("Accept-Charset", "UTF-8");
    request.Headers.Add("Authorization", AuthorizationHeader(requestMethod, now, request));
    request.Accept = "application/atom+xml";
    using (response = request.GetResponse() as HttpWebResponse)
    {
        Stream dataStream = response.GetResponseStream();
        using (StreamReader reader = new StreamReader(dataStream))
        {
            result = reader.ReadToEnd();
        }
    }
    return result;
}

public string AuthorizationHeader(string method, DateTime now, HttpWebRequest request)
{
    string MessageSignature;
    MessageSignature = String.Format("{0}\n\n{1}\n{2}\n{3}",
        method,
        "application/atom+xml",
        now.ToString("R", System.Globalization.CultureInfo.InvariantCulture),
        GetCanonicalizedResource(request.RequestUri, AzureStorageConstants.Account)
        );
    byte[] SignatureBytes = System.Text.Encoding.UTF8.GetBytes(MessageSignature);
    System.Security.Cryptography.HMACSHA256 SHA256 = new System.Security.Cryptography.HMACSHA256(Convert.FromBase64String(AzureStorageConstants.Key));
    String AuthorizationHeader = "SharedKey " + AzureStorageConstants.Account + ":" + Convert.ToBase64String(SHA256.ComputeHash(SignatureBytes));
    return AuthorizationHeader;
}

public string GetCanonicalizedResource(Uri address, string accountName)
{
    StringBuilder str = new StringBuilder();
    StringBuilder builder = new StringBuilder("/");
    builder.Append(accountName);
    builder.Append(address.AbsolutePath);
    str.Append(builder.ToString());
    NameValueCollection values2 = new NameValueCollection();
    NameValueCollection values = HttpUtility.ParseQueryString(address.Query);
    foreach (string str2 in values.Keys)
    {
        ArrayList list = new ArrayList(values.GetValues(str2));
        list.Sort();
        StringBuilder builder2 = new StringBuilder();
        foreach (object obj2 in list)
        {
            if (builder2.Length > 0)
            {
                builder2.Append(",");
            }
            builder2.Append(obj2.ToString());
        }
        values2.Add((str2 == null) ? str2 : str2.ToLowerInvariant(), builder2.ToString());
    }
    ArrayList list2 = new ArrayList(values2.AllKeys);
    list2.Sort();
    foreach (string str3 in list2)
    {
        StringBuilder builder3 = new StringBuilder(string.Empty);
        builder3.Append(str3);
        builder3.Append(":");
        builder3.Append(values2[str3]);
        str.Append("\n");
        str.Append(builder3.ToString());
    }
    return str.ToString();
} 
```

为了解决与签名相关的问题，我从[Storage_REST_CS 示例](http://azurestoragesamples.codeplex.com/releases/view/61325)中获取了代码，该示例具有通过 REST 接口访问 Windows Azure（Blob、表和队列）存储的出色实现。

# wordpress - Wordpress 进展删除帖子永久链接

> ID：11273747
> 
> 赞同：1
> 
> 时间：2012-06-30T11:36:24.493
> 
> 标签：wordpress, permalinks

我一直在使用 Headway 主题来创建网站。我使用不同的帖子来填充网站的内容：使用自定义查询来挑选帖子并将它们显示在我的布局中的适当位置。

```
https://204.140.22.120/ 
```

我想要做的是从帖子标题中删除永久链接，因为它们不应该指向显示单个帖子的页面。

但是 headway 没有使用标准的 .php 文件结构，所以我不能从每个自定义循环中删除“get_permalink”。

有没有办法全局删除永久链接，或者有其他方法来改变我网站中的许多自定义查询循环？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T13:39:43.403

我认为您必须通过 FTP 登录并编辑此文件： **wp-content/themes/headway/library/blocks/core/content/content-display.php**

从那里寻找这条线（在第 363 行附近 - 在“书签”这个词上找到它，你应该找到它）

```
$post_title_link = '<a href="' . $post_permalink . '" title="' . $post_title_tooltip . '" rel="bookmark">' . $post_title . '</a>'; 
```

并将其替换为：

```
$post_title_link = $post_title; 
```

希望这可以帮助 ;）

# javascript - 如何使用 Javascript 控制嵌入 SWF 文件的音量？

> ID：11273751
> 
> 赞同：0
> 
> 时间：2012-06-30T11:37:01.943
> 
> 标签：javascript, controls, flash, volume, shoutcast

# 1.问题

我正在向网站添加一个广播电台（将此代码应用到 BODY）：

```
<embed src="http://www.shoutcast.com/media/popupPlayer_V19.swf?stationid=http://yp.shoutcast.com/sbin/tunein-station.pls?id=XXX&play_status=1" quality="high" width="0" height="0" type="application/x-shockwave-flash" pluginspage="http://www.adobe.com/go/getflashplayer"></embed> 
```

我找不到该播放器的任何 API/文档（由于其他原因，我无法使用不同的播放器）。

我想用 Javascript 控制这个 SWF 对象的音量。

我怎么做？

我无法访问 SWF，也不知道它是否有任何音量控制方法（如果有，我不知道它们的名字......）。

# 2\. 你从哪里得到这个球员？

*   访问[http://www.shoutcast.com/](http://www.shoutcast.com/)
*   点击帮助
*   选择设置
*   选择“在 SHOUTcast 网络播放器中播放 SHOUTcast 电台（如下所示）”
*   点击保存设置
*   选择任何车站
*   在弹出窗口中单击“复制嵌入代码”

# 3\. 为什么不设置宽度和高度并使用附带的音量滑块？

因为我需要为播放/暂停按钮和音量滑块定制图形。

所以我的目标是在一些 HTML 对象上添加“onclick”事件，并通过 JS 控制 swf 视频。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T11:51:25.727

不幸的是，您无法以您想要的方式从外部控制 SWF 的音量。

一种选择是构建另一个 SWF 来加载您当前使用的 SWF。完成后，您可以设置包含 SWF 的音量。当然，这可能无法通过直播应用程序实现。

李

# jquery - 如何将变量（类似 JSON）中的节点附加到 Dynatree

> ID：11273753
> 
> 赞同：0
> 
> 时间：2012-06-30T11:37:07.343
> 
> 标签：jquery, dynatree

您能帮我如何将节点附加到 Dynatree 中吗？

我有包含完整节点树的变量 res：

```
var res = '['
res += '{ "title": "Node 1", "key": "k1"},'
res += '{ "title": "Node 2", "key": "k2"},'
res += '{ "title": "Node 3", "key": "k3"}'
res += ']'; 
```

如何将这些节点添加到下一棵树中？

```
$("#tree3").dynatree({
    children: [

          // here , somehow...?

    ]
}); 
```

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:34:04.120

```
$("#tree3").dynatree({
    children: jQuery.parseJSON(res)
}); 
```

# mysql - 计算总条件行和真实条件行

> ID：11273754
> 
> 赞同：3
> 
> 时间：2012-06-30T11:37:11.890
> 
> 标签：mysql, sql, postgresql

如何计算表中的行数以及特定条件为真的行数，而无需像这样使用子选择：

```
create table t (a integer);
insert into t (a) values (1), (2), (null);

select
    (select count(*) from t) as total_lines,
    (select count(*) from t where a = 1) as condition_true
;
 total_lines | condition_true 
-------------+----------------
           3 |              1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T11:37:12.217

```
select count(*) as total_lines, count(a = 1 or null) as condition_true
from t
;
 total_lines | condition_true 
-------------+----------------
           3 |              1 
```

它之所以有效，是因为：

首先，虽然`count(*)`计算所有行而不考虑任何内容，`count(my_column)`但仅计算 my_column 不为空的那些行：

```
select count(a) as total
from t
;
 total 
-------
     2 
```

第二个`(false or null)`返回`null`，所以只要我的条件不满足，它就会返回`null`并且不会被计算在内`count(condition or null)`，它只计算不为空值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T12:38:12.987

使用`SUM(condition)`！

```
select
    count(*) as total_lines,
    sum(a = 1) as condition_true
from t 
```

看到它在[这里](http://sqlfiddle.com/#!2/ddfce/3)工作。

这是有效的，因为在 mysql 中，`true`is`1`和`false`is `0`，所以当条件为真和为假时，`sum()`条件将添加- 这有效地计算了条件为真的次数。`1``0`

许多人错误地认为你需要一个`case`声明，但你不需要 mysql（你需要一些其他数据库）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-30T12:47:15.900

这可以使用计数内的条件轻松完成。我不知道它是否是优化的方法，但它可以完成工作

你可以这样做

```
select count(*) as total_lines, COUNT(CASE WHEN a = 1 THEN 1 END) as condition_true from t 
```

你可以在这里查看

[sqlFiddle](http://sqlfiddle.com/#!3/ddfce/8)

# javascript - Javascript将事件附加到类名

> ID：11273760
> 
> 赞同：10
> 
> 时间：2012-06-30T11:38:17.350
> 
> 标签：javascript

如果我有 10 个项目，类名`keyword`：

```
<div class="keyword"></div> 
```

如何`click`在此元素上附加事件，例如 。

我尝试了以下方法，但没有运气：（没有警报出现）

```
document.getElementsByClassName('.keyword').onclick = function()
{
    alert(true);
    Search.addKey(this.getElementsByClassName('name')[0].innerHTML);
} 
```

要求：

*   没有 onclick 属性
*   没有 jQuery 或任何其他库

注意：页面加载时不会生成元素。它们的数量可以不同，每次您单击一个按钮时，例如。

我需要一种方法来附加到“未来”中具有“关键字”类的所有标签。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-30T11:42:45.717

您应该委托该事件。尝试这个：

```
if (document.body.addEventListener)
{
    document.body.addEventListener('click',yourHandler,false);
}
else
{
    document.body.attachEvent('onclick',yourHandler);//for IE
}

function yourHandler(e)
{
    e = e || window.event;
    var target = e.target || e.srcElement;
    if (target.className.match(/keyword/))
    {
        //an element with the keyword Class was clicked
    }
} 
```

您可以在 quirksmode.com 上阅读有关事件委托的更多信息。AFAIK，这是实现您想要实现的目标的最佳方式。这就是所有主要库（原型、jQuery、...）在幕后工作的方式

***更新***：

[这是小提琴](http://jsfiddle.net/sHRqm/)，它包含更多解释。一个有趣的参考是[这个](http://www.quirksmode.org/js/events_order.html)页面。它帮助我理解了 IE 和 W3C 事件的不同之处，而且至关重要的是，它帮助我理解了事件委托的价值和无数好处

# javascript - 使用纯JS频繁升级JSON文件的首选方式

> ID：11273766
> 
> 赞同：1
> 
> 时间：2012-06-30T11:38:43.153
> 
> 标签：javascript, json, google-chrome-extension

我正在为必须存储 JSON 文件的 Google Chrome 进行扩展。现在我的扩展需要经常升级 JSON 文件。有没有办法使用**纯 java 脚本**升级 JSON 文件而没有“读取->编辑->写入”循环，这意味着我可以直接在文件中**推送更新**。是的，我可以写一些尖端代码来做到这一点，我只是想知道是否有**内置的**方法。我是 javacript 领域的新手。因此，在回答的同时提供资源将是一个很大的帮助。而且我更喜欢**纯 JS**中的解决方案，而不是任何框架中的解决方案。随意分享任何其他**更好的方法**来做到这一点。

更新示例：假设有一个 json 文件具有以下值：

```
{"name" : "X"} 
```

现在，我想将“name”=“Y”直接更新到文件中，以便将更新推送到 json 文件。

```
{"name" : "Y"} 
```

而且我可能需要添加一个新节点，如“age”：“20”，我希望它在 json 文件中推送更新，如下所示：

```
{"name" : "Y" , "age": "20"} 
```

我是 JS 的新手，所以也许我没有准确地解释它。我已经尽力了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T12:45:03.877

大多数较新版本的浏览器都支持文件系统 API。

看看这个：

[http://www.html5rocks.com/en/tutorials/file/filesystem/](http://www.html5rocks.com/en/tutorials/file/filesystem/)

还有一个实现 W3C`saveAs()`候选的库（尽管我认为这几天已经从规范中删除了）。

[https://github.com/eligrey/FileSaver.js](https://github.com/eligrey/FileSaver.js)

# iphone - 具有无限滚动和延迟加载的 UITableView

> ID：11273767
> 
> 赞同：11
> 
> 时间：2012-06-30T11:39:10.330
> 
> 标签：iphone, ios, cocoa-touch

我得到了一个`UITableView`充满未知数量的行。每行包含（例如 3 个）图像，应用程序从 Web 服务收集此信息。

对于`UITableView`我实现了无限滚动。每当表几乎达到当前行数的末尾时，我都会调用 Web 服务，以获取接下来的 50 行数据。我`scrollViewDidScroll`在`UITableView`.

```
- (void) scrollViewDidScroll:(UIScrollView *)scrollView
{
    CGFloat actualPosition = scrollView.contentOffset.y;

    float bottomOffset = 450;
    if([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPad)
        bottomOffset = 1000;

    CGFloat contentHeight = scrollView.contentSize.height - bottomOffset;
    if (actualPosition >= contentHeight && !_loading && !_cantLoadMore)
    {
        self.loading = YES;

        _currentPage++;

        NSMutableDictionary* dict = [[NSMutableDictionary alloc] init];
        [dict setObject:[NSNumber numberWithInt:_currentPage] forKey:@"page"];
        [dict setObject:[_category objectForKey:@"ID"] forKey:@"category"];

        [self performSelectorInBackground:@selector(getWallpapersInBackground:) withObject:dict];
    }
} 
```

行中的图像`UITableView`是延迟加载的。只要一行可见，图像就会在单独的线程中加载，并且一旦图像完全下载，就会更新行。我用于延迟加载的原理与 Apple 在其文档中建议的相同。图像也被添加到 local `NSDictionary`，因此当行滚动出屏幕并返回（并重新创建行）时，我可以获取它。

因为单个视图中的图片数量可以达到 2000 - 3000，所以我还将图像缓存到磁盘，并在距离`NSDictionary`超过 X 行时清除图像。当用户再次向下和向上滚动时，会发生以下情况：

1.  显示新行
2.  调用延迟加载方法，它检查图像是否存在于磁盘上或者是否应该下载它。
3.  当从磁盘下载或获取图像时，它会执行一个代码块，将图像显示在行中。从 Internet 下载的图像也会缓存到磁盘。
4.  `UIImage`添加到`NSDictionary`以更快地缓存需要触手可及的图像。
5.  由于内存问题（导致内存不足错误的对象`NSDictionary`过多），从可见行中删除的行中、15 行或更远的图像将从 中删除。`UIImage``NSDictionary`

当 UITableView 快走到尽头时，会出现以下情况：

1.  UITableView 几乎到达当前加载行的末尾
2.  调用 web 服务，加载新行 (50)
3.  新行被添加到用于该`numberOfItemsInSection`方法的数组中。
4.  调用A`reloadData`以确保`UITableView`填充额外的新行。
5.  包含图像的新行执行上述步骤以延迟加载图像。

所以，我遇到的问题是当我从 web 服务添加新记录时。当我调用 a`reloadData`时，`UITableView`一些图像再次从磁盘加载，并且在滚动时发生了一些小问题。

我正在为此寻找解决方案。我尝试使用`insertItemsAtIndexPaths`新行的数量，将它们添加到 中`UITableView`，但这使得我的延迟加载方法已经下载了图像（因为当时以某种方式创建了所有单元格，即使它们不可见，检查单元格是否在创建过程中可见会产生意想不到的结果、图像未加载、单元格看起来很奇怪等）。

所以，我本质上正在寻找的是一个无限滚动 UITableView 的解决方案，它可以从网络/磁盘延迟加载图像，并且与照片应用程序一样流畅。由于图像都是在单独的线程中加载的，我不明白为什么滚动不像婴儿的皮肤那么光滑。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-30T23:58:56.203

我不确定我是否完全理解你的问题，但这里有一些我在遇到类似问题时所做的事情。

*   我用作`-tableView:cellForRowAtIndexPath:`提示从网络加载更多数据。`indexPath.row + 10 >= self.data.count`当加载更多数据时，我选择了一个数字（在我的情况下为 10） 。

    *   `-tableView:cellForRowAtIndexPath:`反正我需要打电话。
    *   我没有强制回调到更紧密的`-scrollViewDidScroll:`.
*   我`UIImageView`使用一个可以异步加载我调用的图像的类进行子类化`URLImageView`。

    *   在中，我为实例`-tableView:cellForRowAtIndexPath:`分配了一个 URL 。`URLImageView`
    *   该分配导致从磁盘加载或从 Web 加载的后台操作。
    *   该操作是可以取消的，所以我没有继续处理不再需要加载的图像。

我有一个包含数百（但不是数千）图像的表格视图。我一次在屏幕上只有 2 或 3 个表格单元格。

*   我用过`-refreshData`：它像冠军一样工作。
*   我什`URLImageView`至不得不淡出图像。这是一个非常好的效果。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-05T11:36:48.687

为避免闪烁，请尝试`beginUpdates`在桌子上呼叫，然后以 .`insertrowAtIndexPaths:withRowAnimations:`结束`endUpdates`。

祝你好运。

# java - 玩 2.0 生成隐藏字段没有 div 包装

> ID：11273769
> 
> 赞同：4
> 
> 时间：2012-06-30T11:39:15.473
> 
> 标签：java, scala, field, playframework-2.0, hidden

我正在生成一个隐藏字段，如下所示：

```
@helper.input(_form("userID"), '_label-> None) { (id, name, value, args) =>
  <input type="hidden" name="@name" id="@id" value="@value" @toHtmlArgs(args)>
} 
```

除了创建 div 包装块元素这一事实之外，哪个工作正常，它在表单中创建视觉空白空间，看起来不太好 - 如何在没有 div 包装的情况下显示隐藏的输入元素？

我知道我可以 jQuery 隐藏父 div 包装器，但我不想一开始就生成它。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-30T11:53:42.920

`@helper.input`在这种情况下，您不需要使用 a 。尝试这个：

```
@defining(_form("userID")) { uidField =>
  <input type="hidden" name="@uidField.name" id="@uidField.id" value="@uidField.value">
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T10:36:08.420

尽管问题已经得到解答，但我想举一个完整的例子，因为这对我有很大帮助。

您可以在名为“app/views/helper/inputHidden.scala.html”的文件中定义自己的隐藏输入助手，该文件如下所示：

```
@**
* Generate a hidden HTML input.
*
* Example:
* {{{
*   @inputHidden(field = myForm("name"), args = 'data-ref -> 0)
* }}}
*
* @param field The form field.
* @param args Set of extra attributes.
* @param handler The field constructor.
*@
@(field: play.api.data.Field, args: (Symbol,Any)*)(implicit handler: FieldConstructor, lang: play.api.i18n.Lang)

@id = @{ args.toMap.get('id).map(_.toString).getOrElse(field.id) }
@inputType = @{ args.toMap.get('type).map(_.toString).getOrElse("hidden") }
@htmlArgs = @{ args.filter(arg => !arg._1.name.startsWith("_") && arg._1 != 'id).toMap.filter(_._1 != 'type) }

<input type="@inputType" id="@id" name="@field.name" value="@field.value" @toHtmlArgs(htmlArgs)> 
```

这允许您在所有视图中重用代码，并为`data-ref="..."`隐藏字段提供额外的参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T11:45:18.547

好的，也可以这样做：

```
<input type="hidden" name="foo" value="@{_form("foo").value.map(x=>x).getOrElse("")}"> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-20T00:31:08.230

使用原始 html 作为以前的答案建议在某些情况下效果很好，但不要忘记隐藏的输入可能需要验证（例如，如果它填充了 JavaScript 以响应某些用户交互，就像某些日期选择器所做的那样）。如果您在该字段上有验证错误，则提交将失败，但不会有任何视觉队列说明原因。

您可以编写额外的 html 来显示隐藏字段的错误，但如果该类不存在，我实际上会坚持`@helper.input`使用 css 隐藏输入。`error`你不需要javascript来做到这一点。

# android - 广播接收器不工作

> ID：11273770
> 
> 赞同：0
> 
> 时间：2012-06-30T11:39:16.983
> 
> 标签：android, broadcastreceiver

这些广播接收器都没有被触发，但在另一个我的应用程序正在我用来检查网络状态的地方工作。关于这个问题，我无话可说。

```
package monitor;

import android.content.BroadcastReceiver;

public class Monitor extends BroadcastReceiver {

      @Override
      public void onReceive(Context context, Intent intent) {
          System.out.println("jupi");
    }
}

<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="monitor"
  android:versionCode="1"
  android:versionName="1.0">
<uses-sdk
    android:minSdkVersion="9" 
    android:targetSdkVersion="15"/>

<uses-permission android:name="android.permission.RECEIVE_SMS"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.READ_PHONE_STATE"/>

<application 
    android:icon="@drawable/icon"
    android:label="@string/app_name">
    <service 
        android:name=".MonitorService">
    </service>
    <receiver 
        android:name=".Monitor">
        <intent-filter>
            <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
            <action android:name="android.intent.action.PHONE_STATE" />
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
        </intent-filter>
    </receiver>

</application> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T15:56:50.523

如果您在 Android 3.1 或更高版本上看到此行为，您可能会看到此更改的结果：

[http://developer.android.com/about/versions/android-3.1.html#launchcontrols](http://developer.android.com/about/versions/android-3.1.html#launchcontrols)

尤其是读这个：

> 请注意，系统将 FLAG_EXCLUDE_STOPPED_PACKAGES 添加到所有广播意图。这样做是为了防止来自后台服务的广播无意或不必要地启动已停止应用程序的组件。

由于您的应用程序仅包含服务和接收器，因此用户将永远不会**启动**此应用程序，因此 if 将保持“停止”状态，从而阻止它看到任何广播意图。

当您将 Activity 添加到应用程序时，运行**一次**就足以将应用程序从“停止”状态中移除，这样您的接收器就有资格接收广播意图。您实际上不需要动态注册接收器。安装后让用户“启动”一次应用程序就足够了。

# javafx-2 - JavaFX 2.1：工具包未初始化

> ID：11273773
> 
> 赞同：66
> 
> 时间：2012-06-30T11:39:30.943
> 
> 标签：javafx-2

我的应用程序是基于 Swing 的。我想介绍 JavaFX 并将其配置为在辅助显示器上呈现场景。我可以使用 JFrame 来保存可以保存 JFXPanel 的 JFXPanel，但我想使用 JavaFX API 来实现这一点。

子类化 com.sun.glass.ui.Application 并使用 Application.launch(this) 不是一个选项，因为调用线程将被阻塞。

从 Swing EDT 实例化阶段时，我得到的错误是：

```
java.lang.IllegalStateException: Toolkit not initialized 
```

任何指针？

* * *

编辑：结论

**问题**：重要的 Swing GUI 应用程序需要运行 JavaFX 组件。应用程序的启动过程在启动依赖服务层后初始化 GUI。

**解决方案**

**子类化 JavaFX Application 类**并在单独的线程中运行它，例如：

```
public class JavaFXInitializer extends Application {
    @Override
    public void start(Stage stage) throws Exception {
        // JavaFX should be initialized
        someGlobalVar.setInitialized(true);
    }
} 
```

旁注：因为 Application.launch() 方法将 a`Class<? extends Application>`作为参数，所以必须使用全局变量来表示 JavaFX 环境已初始化。

替代方法：**在 Swing Event Dispatcher Thread 中实例化 JFXPanel**：

```
final CountDownLatch latch = new CountDownLatch(1);
SwingUtilities.invokeLater(new Runnable() {
    public void run() {
        new JFXPanel(); // initializes JavaFX environment
        latch.countDown();
    }
});
latch.await(); 
```

通过使用这种方法，调用线程将等待 JavaFX 环境建立。

选择您认为合适的任何解决方案。我选择了第二个，因为它不需要全局变量来表示 JavaFX 环境的初始化，也不会浪费线程。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-30T20:19:15.857

Found a solution. If I just create a JFXPanel from Swing EDT before invoking JavaFX Platform.runLater it works. I don't know how reliable this solution is, I might choose JFXPanel and JFrame if turns out to be unstable.

```
public class BootJavaFX {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new JFXPanel(); // this will prepare JavaFX toolkit and environment
                Platform.runLater(new Runnable() {
                    @Override
                    public void run() {
                        StageBuilder.create()
                                .scene(SceneBuilder.create()
                                        .width(320)
                                        .height(240)
                                        .root(LabelBuilder.create()
                                                .font(Font.font("Arial", 54))
                                                .text("JavaFX")
                                                .build())
                                        .build())
                                .onCloseRequest(new EventHandler<WindowEvent>() {
                                    @Override
                                    public void handle(WindowEvent windowEvent) {
                                        System.exit(0);
                                    }
                                })
                                .build()
                                .show();
                    }
                });
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-30T16:27:24.260

使用 JavaFX 的唯一方法是继承 Application 或使用 JFXPanel，这正是因为它们准备了 env 和工具包。

阻塞线程可以通过使用来解决`new Thread(...)`。

如果您在与 Swing/AWT 相同的 VM 中使用 JavaFX，我建议使用 JFXPanel，但您可以在此处找到更多详细信息：[是否可以将 AWT 与 JavaFx 一起使用？](https://stackoverflow.com/questions/11119227/is-it-ok-to-use-awt-with-javafx)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2018-12-13T10:58:01.827

从 JavaFX 9 开始，您可以在不扩展[`Application`](https://docs.oracle.com/javase/9/docs/api/javafx/application/Application.html)类的情况下运行 JavaFX 应用程序，方法是调用[`Platform.startup()`](https://docs.oracle.com/javase/9/docs/api/javafx/application/Platform.html#startup-java.lang.Runnable-)：

```
Platform.startup(() ->
{
    // This block will be executed on JavaFX Thread
}); 
```

> 此方法启动 JavaFX 运行时。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-10-26T14:11:14.017

我检查了源代码，这是初始化它

```
com.sun.javafx.application.PlatformImpl.startup(()->{}); 
```

并退出它

```
com.sun.javafx.application.PlatformImpl.exit(); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-08-10T21:04:46.563

还有一种方法可以显式初始化工具包，方法是调用： `com.sun.javafx.application.PlatformImpl#startup(Runnable)`

由于使用了 *Impl，有点 hacky，但如果您不想使用`Application`或`JXFPanel`出于某种原因，它很有用。

*[从这篇文章](https://stackoverflow.com/a/38883432/3504373)重新发布自己*

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-07-13T07:41:59.223

我在创建单元测试以测试 javaFX tableview 更新时使用了以下内容

```
public class testingTableView {
        @BeforeClass
        public static void initToolkit() throws InterruptedException
        {
            final CountDownLatch latch = new CountDownLatch(1);
            SwingUtilities.invokeLater(() -> {
                new JFXPanel(); // initializes JavaFX environment
                latch.countDown();
            });

            if (!latch.await(5L, TimeUnit.SECONDS))
                throw new ExceptionInInitializerError();
        }

        @Test
        public void updateTableView() throws Exception {

            TableView<yourclassDefiningEntries> yourTable = new TableView<>();
            .... do your testing stuff

        }
    } 
```

即使这篇文章与测试无关，但它帮助我让我的单元测试工作

*   如果没有 BeforeClass initToolkit，那么单元测试中 TableView 的实例化将产生缺少工具包的消息

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-12T02:11:40.170

```
private static Thread thread;

public static void main(String[] args) {

    Main main = new Main();
    startup(main);
    thread = new Thread(main);
    thread.start();
}

public static void startup(Runnable r) {
    com.sun.javafx.application.PlatformImpl.startup(r);
}

@Override
public void run() {
    SoundPlayer.play("BelievexBelieve.mp3");
} 
```

这是我的解决方案。该类名为 Main 并实现 Runnable。方法`startup(Runnable r)`是关键。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-28T22:49:01.180

使用 Jack Lin 的回答，我发现它触发了 run() 两次。通过一些修改也使答案更加简洁，我提供以下内容；

```
import com.sun.javafx.application.PlatformImpl;

public class MyFxTest implements Runnable {

    public static void main(String[] args) {

        MyFxTest main = new MyFxTest();
        PlatformImpl.startup((Runnable) main);
    }

    @Override
    public void run() {

        // do your testing;
        System.out.println("Here 'tis");
        System.exit(0); // Optional
    }
} 
```

# php - 在 PHP 中按域进行 URL preg_replace

> ID：11273776
> 
> 赞同：1
> 
> 时间：2012-06-30T11:39:40.580
> 
> 标签：php, regex

我找不到这个问题的最佳解决方案。这个想法是更改包含特定域的文本的所有 url，并使用`preg_replace_callback()`base 64 编码。网址属于这种类型：`http://www.domain.com/?fsdf76sf8sf6fds`另一种方式分别是：`http://www.otherdomain.com/file/CA60D10F8ACF7CAA`

正则表达式的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T12:42:05.347

您正在寻找的是类似的东西

```
$s = preg_replace_callback('#(([a-z]+://)|([a-z]+://)?[a-z0-9.-]+\.|\b)domain.com[^\s]+#i', function($match) {
    return base64_encode($match[0]);
}, $string); 
```

这个正则表达式可能有点混乱，所以让我们分解一下：

```
(  -- domain.com must be preceeded by either
  ([a-z]+://)   -- a protocol such as http://
  |
  ([a-z]+://)?[a-z0-9.-]+\.  -- possibly a protocol and definitely a subdomain
  |
  \b  -- word-break (prevents otherdomain.com from matching!)
)
domain.com  -- the actual domain you're looking for
[^\s]+  -- everything up to the next space (to include path, query string, fragment) 
```

一个非常简单的系统来测试这样的东西：

```
<?php

$strings = array(
    // positives
    'a http://www.domain.com/?fsdf76sf8sf6fds z' => 'a xxx z',
    'a www.domain.com/?fsdf76sf8sf6fds z' => 'a xxx z',
    'a http://domain.com/?fsdf76sf8sf6fds z' => 'a xxx z',
    'a domain.com/?fsdf76sf8sf6fds z' => 'a xxx z',
    // negatives
    'a http://www.otherdomain.com/file/CA60D10F8ACF7CAA z' => null,
    'a www.otherdomain.com/file/CA60D10F8ACF7CAA z' => null,
    'a http://otherdomain.com/file/CA60D10F8ACF7CAA z' => null,
    'a otherdomain.com/file/CA60D10F8ACF7CAA z' => null,
);

foreach ($strings as $string => $result) {
    $s = preg_replace_callback('#(([a-z]+://)|([a-z]+://)?[a-z0-9.-]+\.|\b)domain.com[^\s]+#i', function($match) {
        return 'xxx';
    }, $string);

    if (!$result) {
        $result = $string;
    }

    if ($s != $result) {
        echo "FAILED: '$string' got '$s'\n";
    } else {
        echo "OK: '$string'\n";
    }
} 
```

（如果您已经在进行单元测试，那么显然可以使用它来代替……）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T12:59:25.283

此答案仅适用于以“http://www.domain.com/”或“https://www.domain.com/”开头的 URL，但更精简：

```
$in = 'before http://www.domain.com/?fsdf76sf8sf6fds after';

$domain = 'www.domain.com';
echo preg_replace_callback('/\b(https?:\/\/'.preg_quote($domain).'\/)\?(\w+)/i', function($m) {
    return 'http://www.otherdomain.com/file/'.base64_encode($m[2]);
}, $in);
// outputs "before http://www.otherdomain.com/file/ZnNkZjc2c2Y4c2Y2ZmRz after" 
```

仍有待解决的一个问题是，您的“CA60D10F8ACF7CAA”示例输出显示的 base64 编码输出与 PHP 的 base64_encode() 返回的输出不同：

```
echo base64_encode('fsdf76sf8sf6fds'); // outputs ZnNkZjc2c2Y4c2Y2ZmRz 
```

# php - 在 SQL 语法和 PHP 中出现错误

> ID：11273777
> 
> 赞同：0
> 
> 时间：2012-06-30T11:39:42.030
> 
> 标签：php, sql, database

我收到以下错误，无法弄清楚问题所在。

错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“订单（订单 ID、客户 ID、产品 ID、品牌、型号、价格、金额、总成本）V”附近使用正确的语法

```
//connect to database
$connection = mysql_connect("localhost","root","") or die ("Can't connect");
mysql_select_db("shoppingcart", $connection) or die ("Can't connect");

//get order id
$vol = mysql_query("SELECT orderid FROM ordertracking WHERE email='$email'");
while($volume=mysql_fetch_array($vol)) {
  $orderid = $volume['orderid'];
}
echo $orderid;
// add new order
$order = "INSERT INTO order (orderid, customerid, productid, brand, model, price, amount, totalcost) VALUES ('$orderid', '$customerid', '$productid', '$brand' , '$model', '$price', '$amount', '$totalcost')";
if (!mysql_query($order,$connection)) {
  die('Error: ' . mysql_error());
  echo "Sorry, there was an error";
}
echo "New order added" . "<br />";
mysql_close($connection); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T11:41:33.527

`ORDER`是一个[mysql 保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，用反引号 `` 括起来。

您不应该有与 mysql 保留字冲突的表或列名，否则您必须将它们括在反引号中。

```
$order = "INSERT INTO `order` (orderid, customerid,... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T11:44:51.800

像这样：

插入“订单” (...) (ALT Gr+7)

如果这解决了问题，请将功劳归功于 Shakti Singh。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T11:54:40.150

关键字 ORDER 是 sql 中的保留关键字。意味着你不能使用它

所以这会产生一个错误：

```
$order = "INSERT INTO order (orderid, customerid, productid, brand, model, price, amount, totalcost) VALUES ('$orderid', '$customerid', '$productid', '$brand' , '$model', '$price', '$amount', '$totalcost')"; 
```

插入**订单**

上述语句中的顺序应为反引号（如 shakti 所述），如

> 插入“订单”（订单号，......

或者您可以将保留关键字括在方括号中，例如

> INSERT INTO [order] (orderid,......

有关更多信息，请检查此线程 [堆栈溢出问题](https://stackoverflow.com/questions/1162381/how-do-i-escape-a-reserved-word-in-oracle)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T11:53:10.517

另一件事是死后的任何代码都不起作用我的意思是：

```
if (!mysql_query($order,$connection)) {
 die('Error: ' . mysql_error());
 echo "Sorry, there was an error";} 
```

这段代码

```
echo "Sorry, there was an error"; 
```

将不起作用。并使用此代码：

```
die('Error: ' . mysql_error()); 
```

由于安全原因，完全不推荐

# java - Java泛型，不能使用任何可迭代对象的参数创建构造函数

> ID：11273779
> 
> 赞同：0
> 
> 时间：2012-06-30T11:40:03.417
> 
> 标签：java, generics

我有以下类签名：`public class LoopIterator<E> implements Iterator<E>`. 我有一个现有的构造函数：`public LoopIterator(Iterable<E> iterable){`. 我试图在我的主类/主函数中输入以下内容：

```
LinkedList<String> l= new LinkedList<String>();
l.add("1"); l.add("2"); l.add("3"); l.add("4");
LoopIterator<LinkedList<String>> m= new LoopIterator<LinkedList<String>>(l); 
```

但我不能，因为构造函数期望得到`Iterable<E>`不符合`LinkedList<String>`.

那么如何更改我的构造函数/类签名，以便我可以输入构造函数 E 类型的任何 Iterable ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T11:49:11.253

在这种情况下，LinkedList 实现了 Iterable，E 是迭代时返回的对象类型（即字符串）。

所以，你需要...

```
LoopIterator<String> m = new LoopIterator<String>( l); 
```

编译器应该更开心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T12:05:33.087

```
LoopIterator<LinkedList<String>> m= new LoopIterator<LinkedList<String>>(l); 
```

在左侧，您定义`m.next()`将返回实例，`LinkedList<String>`但在右侧，您将传递迭代`String`实例的内容。所以这是一个矛盾！

只要说出你想要的！`m.next()`将返回以下实例`String`：

```
LoopIterator<String> m = new LoopIterator<String>( l); 
```

# java - 如何在不阻塞的情况下从 Java 中的 BufferedReader 读取？

> ID：11273786
> 
> 赞同：3
> 
> 时间：2012-06-30T11:41:25.210
> 
> 标签：java, stream, blocking, bufferedreader, inputstreamreader

我想向服务器发送命令，看看是否得到响应。

现在我正在使用`BufferedReader`'s`readline()`函数，该函数会阻塞，直到有来自服务器的响应，但我要做的就是首先验证服务器是否有响应。

我尝试使用`ready()`或`reset()`避免这个块，但它没有帮助。

这导致我的程序卡在等待服务器响应，而这种情况永远不会发生。`InputStreamReader`根据我对事物的理解，似乎做同样的事情。

我在这里找到的关于这个主题的其他问题没有回答我的问题，所以如果你能回答我的问题，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T12:00:36.343

如果你想异步读取响应，我建议启动一个读取 BufferedReader 的线程。这更容易编码并且更容易控制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T11:48:10.203

可能您所需要的只是`InputStream`不将其包装在`BufferedReader`

```
while (inputStream.available() > 0) {
     int i = inputStream.read(tmp, 0, 1024);
     if (i < 0)
          break;
     strBuff.append(new String(tmp, 0, i));
} 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T17:25:50.040

我最近使用 CountDownLatch 做了类似的事情。可能有一些更好的方法，但这很容易，而且似乎工作得很好。您可以根据需要调整 CountDownLatch 的等待时间。

```
package com.whatever;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.URL;
import java.net.URLConnection;
import java.util.concurrent.CountDownLatch;
import java.util.concurrent.TimeUnit;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class TestRead {
    private static final Logger log = LoggerFactory.getLogger(TestRead.class);
    private CountDownLatch latch = new CountDownLatch(1);

    public void read() {
        URLReader urlReader = new URLReader();
        Thread listener = new Thread(urlReader);
        listener.setDaemon(true);
        listener.start();
        boolean success = false;
        try {
            success = latch.await(20000, TimeUnit.MILLISECONDS);
        } catch (InterruptedException e) {
            log.error("error", e);
        }
        log.info("success: {}", success);
    }

    class URLReader implements Runnable {
        public void run() {
            log.info("run...");
            try {
                URL oracle = new URL("http://www.oracle.com/");
                URLConnection yc = oracle.openConnection();
                BufferedReader in = new BufferedReader(new InputStreamReader(yc.getInputStream()));
                String inputLine;
                while ((inputLine = in.readLine()) != null)
                    System.out.println(inputLine);
                in.close();
                latch.countDown();
            } catch (Exception ex) {
                log.error("error", ex);
            }
            log.info("consumer is done");
        }

    }
    public static void main(String[] args) {
        TestRead testRead = new TestRead();
        testRead.read();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-12T16:25:50.867

如果您使用标准 java IO，那么不会阻塞是一项棘手的任务。常见的答案是迁移到 NIO 或 netty。Netty 是更可取的选择。但是有时您别无选择，因此我建议您尝试我的解决方法：

```
public String readResponse(InputStream inStreamFromServer, int timeout) throws Exception {
    BufferedReader reader = new BufferedReader(new InputStreamReader(inStreamFromServer, Charsets.UTF_8));
    char[] buffer = new char[8092];
    boolean timeoutNotExceeded;
    StringBuilder result = new StringBuilder();
    final long startTime = System.nanoTime();
    while ((timeoutNotExceeded = (TimeUnit.NANOSECONDS.toMillis(System.nanoTime() - startTime) < timeout))) {
        if (reader.ready()) {
            int charsRead = reader.read(buffer);
            if (charsRead == -1) {
                break;
            }
            result.append(buffer, 0, charsRead);
        } else {
            try {
                Thread.sleep(timeout / 200);
            } catch (InterruptedException ex) {
                LOG.error("InterruptedException ex=", ex);
            }
        }
    }
    if (!timeoutNotExceeded) throw new SocketTimeoutException("Command timeout limit was exceeded: " + timeout);

    return result.toString();
} 
```

此解决方法不是灵丹妙药，但它具有一些重要功能：

*   不使用 readline()。这种方法对网络通信很危险，因为有些服务器不返回`LF/CR`符号，你的代码会卡住。当您从文件中读取时，这并不重要，您无论如何都会到达文件的末尾。
*   不使用`char symbol = (char) fr.read();`。这种方法比读取 char[] 慢
*   它具有超时功能，您可能会在慢速连接时中断通信

# google-maps-api-3 - Google Maps v3 获得两个 lat long 之间的所有 lat/long 以顺利移动标记

> ID：11273794
> 
> 赞同：1
> 
> 时间：2012-06-30T11:43:37.063
> 
> 标签：google-maps-api-3

我正在尝试非常顺利地将我的标记（图标）从一个位置移动到另一个位置。我非常接近做到这一点。我想在 API v3中做类似[这个链接的事情。](http://www.kmcgraphics.com/google/)

现在，我已经从两个位置得到了所有的纬度/经度，但仍然没有平滑的效果。然后我决定在两个纬度/经度之间获取所有纬度/经度，例如我在两个位置之间得到 1000 纬度/经度。现在我想要 lat/long 在第一个 lat/long 到 1000 lat/long 的第二个 lat/long 之间，这给了我更多的 lat/long。这是我的代码。

```
var map, ren, ser;
var data = {};
var marker;
function goma() {
  map = new google.maps.Map(document.getElementById('mappy'), {'zoom':6, 'mapTypeId': google.maps.MapTypeId.ROADMAP, 'center': new google.maps.LatLng(22.05678288577881, 72.30236816615798)});
  ren = new google.maps.DirectionsRenderer( {'draggable':true} );
  ren.setMap(map); 
  ser = new google.maps.DirectionsService();
  google.maps.event.addListener(ren, 'directions_changed', function(event){
    var waypoints = ren.directions.routes[0].legs[0].via_waypoints;
  });
  ser.route({
    'origin': new google.maps.LatLng(22.3000, 70.7800),
    'destination':  new google.maps.LatLng(23.0333, 72.6167),
    'travelMode': google.maps.DirectionsTravelMode.DRIVING},
    function(res,sts) {
      if(sts=='OK')
        ren.setDirections(res);
    })
  }
  function run(i,j) {
    if(i!=0 || j!=0) {
      marker.setMap(null);
    }
    if(i<=ren.directions.routes[0].legs[0].steps.length) {
      if(j==ren.directions.routes[0].legs[0].steps[i].path.length) {
        j=0;
        i++;
      } else {
        j++;
      }
    }
    marker = new google.maps.Marker({
      position: ren.directions.routes[0].legs[0].steps[i].path[j],
      map: map
    });
    marker.setMap(map);
    setTimeout(function() {run(i,j);}, 2000);
  } 
```

它有效，但不是我想要的。我只想要平滑的效果，也想找到我经过的距离和速度。谢谢你。

# php - 使用 php 从 postgresql 显示图像（bytea）

> ID：11273795
> 
> 赞同：3
> 
> 时间：2012-06-30T11:43:51.327
> 
> 标签：php, postgresql

我有一个存储图像'bytea'类型的postgres数据库，我尝试将它们显示到带有PHP的浏览器中。我找到了显示其中一个的方法，但我不能超过一个。我使用的代码如下：

文件名 - display_image.php

```
$conn = pg_connect("dbname=test user=postgres password=postgres");

$temp = '/home/postgres/tmp.jpg';

$query = "select lo_export(image, '$temp') from map ";
$result = pg_query($query);

if($result)
{
    while ($line = pg_fetch_array($result))
    {
        $ctobj = $line["image"];
        echo "<IMG SRC=show.php> </br>";

    }

}
else { echo "File does not exists."; }
pg_close($conn); 
```

文件名 - show.php

```
header("Content-type: image/jpeg");
$jpeg = fopen("/home/postgres/tmp.jpg","r");
$image = fread($jpeg,filesize("/home/postgres/tmp.jpg"));
echo $image; 
```

问题似乎是只显示一张图像的“tmp.jpg”虚拟文件。如果查询的结果是 7 个图像，那么它会在一个 while 循环内显示 7 次相同的图像。我该如何解决这个问题？感谢您的关注！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T09:46:10.173

我前段时间为 bytea 做过这个。

您需要通过 pg_unescape_bytea 运行您的 bytea 数据。见[http://php.net/manual/en/function.pg-unescape-bytea.php](http://php.net/manual/en/function.pg-unescape-bytea.php)

基本上，您的 SQL 查询以转义格式返回 bytea 字段。

然而，这不是你在做什么。因此，以上内容仅适用于来这里寻求 bytea 帮助的下一个可怜的 sap。请修改以说明您使用的是 LOB 而不是 BYTEA。

另请注意，您的代码不是并发安全的。如果两个用户请求不同的图像，我猜你会让两个用户得到不同的图像。出于这个原因，您应该将 oid 添加到检索 url，并将文件命名为 /tmp/$oid.jpg，其中 $oid 是大对象的 oid。您将需要检索该信息（我相信它看起来像是存储在地图的图像字段中？）。另一方面，假设所有文件基本上都是公开的。如果不是这种情况，您希望将所有内容移至 show_image.php 并在完成后进行清理。

# c# - wpf.DataGrid 中的自动行高

> ID：11273797
> 
> 赞同：7
> 
> 时间：2012-06-30T11:43:56.647
> 
> 标签：c#, wpf, binding, datagrid, row-height

我已将 DataGrid 绑定到我的集合，并且我需要将每行的高度绑定到我的属性。

可能吗？还是有另一种方法，将每行的高度与集合中的相应属性联系起来？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-30T11:49:55.473

您可以`Height`在`RowStyle`.

假设您有一个名为`RowHeight`

```
<DataGrid ItemsSource="{Binding ...}">
    <DataGrid.RowStyle>
        <Style TargetType="DataGridRow">
            <Setter Property="Height" Value="{Binding RowHeight}"/>
        </Style>
    </DataGrid.RowStyle>
</DataGrid> 
```

# hibernate - tomcat restart => 找不到 SessionFactory [uuid=...,name=null]

> ID：11273808
> 
> 赞同：2
> 
> 时间：2012-06-30T11:44:36.070
> 
> 标签：hibernate, jsf, tomcat, jsf-2

继续解决[这种情况](https://stackoverflow.com/questions/6506476/java-lang-illegalstateexception-unread-block-data)，我已经更新了`hibernate`ond `sqljdbc4` `jars`，现在异常已更改（请看下面）。

我正在使用

*   休眠 v4.1.4 最终版
*   JSF 2.1 (莫哈拉)
*   我所有的`@ManagedBeans` `implements Serializable`

它与 有一些关系`@ViewScoped`，因为`@SessionScoped`bean 还可以

**我试过的：**

*   enable `<Manager pathname=""/> in context.xml`，是的，异常消失了，但我真的失去了持久会话，所以我必须在 tomcat 服务器重启后再次登录。

*   在 hibernate.cfg.xml 文件中进行更改（例如添加`name="java:hibernate/SessionFactory"`到`<session-factory>`标签），但没有成功

*   玩`SESSIONS.ser`文件，该文件是在**停止**tomcat 服务器后创建的。

    *   当我**打开**ser 文件时，我可以找到类似的内容： .... `uuidq ~ xppt $e8906373-f31b-4990-833c-c7680b2a77ce`...
    *   如果我再次**启动**tomcat 服务器，它会报告`Could not find a SessionFactory [uuid=8906373-f31b-4990-833c-c7680b2a77ce,name=null]`-**为什么？？？**会话似乎存在于`SESSION.ser`文件中......

我的**会话管理器：**

```
@SessionScoped
@ManagedBean(name="userManager")
public class UserManager implements Serializable {
  private static final long serialVersionUID = 1L;
  private transient HttpSession session;
  private String username;
  private String password;
  private User user;

  public String login() {
    // here is seraching for user in database (based on username and password)

    if (user != null) {
      FacesContext context = FacesContext.getCurrentInstance();
      session = (HttpSession) context.getExternalContext().getSession(true);
      session.setAttribute("id", user.getId());
      session.setAttribute("username", user.getName());
      ...
      return "success";
    } 
  }

  public String logout() {
    user = null;
    FacesContext context = FacesContext.getCurrentInstance();
    session = (HttpSession) context.getExternalContext().getSession(true);
    ...     
    session.invalidate();
    return "success";
  }
  // getters and setters ----------------------------------------------------
} 
```

我的`hibernate.cfg.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC 
  "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
  "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
 <session-factory>
  <property name="connection.url">jdbc:sqlserver://localhost;databaseName=RXP</property>
  <property name="connection.username">user</property>
  <property name="connection.password">password</property>
  <property name="connection.driver_class">com.microsoft.sqlserver.jdbc.SQLServerDriver</property>
  <property name="dialect">org.hibernate.dialect.SQLServer2008Dialect</property>
  <property name="current_session_context_class">thread</property>
  <property name="hibernate.show_sql">true</property>
  <property name="hibernate.hbm2ddl.auto">update</property>

  <mapping class="tables.User"/>

 </session-factory>
</hibernate-configuration> 
```

和我的**会话工厂**：

```
public final class DaoSF implements Serializable {
  private static final long serialVersionUID = 1L;

  private static SessionFactory sessionFactory;
  private static ServiceRegistry serviceRegistry;

  public static SessionFactory getSessionFactory() {
    try {
      Configuration configuration = new Configuration();
      configuration.configure("hibernate.cfg.xml");
      serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();        
      sessionFactory = configuration.buildSessionFactory(serviceRegistry);
      return sessionFactory;
    }
    catch (HibernateException he) { 
      ...
    }
  }
} 
```

**例外**：

```
30.6.2012 13:29:07 org.apache.catalina.session.StandardManager doLoad
SEVERE: IOException while loading persisted sessions: java.io.InvalidObjectException: Could not find a SessionFactory [uuid=f9c33312-cf7f-4f65-ae5f-44261705c18e,name=null]
java.io.InvalidObjectException: Could not find a SessionFactory [uuid=f9c33312-cf7f-4f65-ae5f-44261705c18e,name=null]
    at org.hibernate.internal.SessionFactoryImpl.locateSessionFactoryOnDeserialization(SessionFactoryImpl.java:2007)
    at org.hibernate.internal.SessionFactoryImpl.deserialize(SessionFactoryImpl.java:2037)
.... 
```

我试图以`hibernate.cfg.xml`这种方式编辑我的文件：

```
<session-factory name="java:hibernate/SessionFactory"> 
```

并且报告的错误已更改为：

```
30.6.2012 13:38:23 org.apache.catalina.session.StandardManager startInternal
SEVERE: Exception loading sessions from persistent storage
java.lang.NullPointerException
    at java.util.concurrent.ConcurrentHashMap.get(Unknown Source)
    at org.hibernate.internal.SessionFactoryRegistry.getSessionFactory(SessionFactoryRegistry.java:140)
    at org.hibernate.internal.SessionFactoryRegistry.getNamedSessionFactory(SessionFactoryRegistry.java:135)
    at org.hibernate.internal.SessionFactoryImpl.locateSessionFactoryOnDeserialization(SessionFactoryImpl.java:2000)
    at org.hibernate.internal.SessionFactoryImpl.deserialize(SessionFactoryImpl.java:2037)
.... 
```

你没有遇到过这个错误报告吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T12:57:16.550

您不希望*Session*、*SessionFactory*或*DaoSF*的实例被序列化。它们是暂时的，无法从文件中恢复。你最好首先弄清楚它们在哪里以及为什么被序列化到一个文件中。这就是您需要进行修复的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T09:05:10.647

另一个功能是更新tomcat/conf/下的context.xml，具体如下：

```
 <Manager className="org.apache.catalina.session.PersistentManager" saveOnRestart="false"   maxActiveSessions="-1" minIdleSwap="-1" maxIdleSwap="-1" maxIdleBackup="-1">
   <Store className="org.apache.catalina.session.FileStore"/>
   </Manager> 
```

# java - 我必须用小写字母命名包裹吗

> ID：11273816
> 
> 赞同：1
> 
> 时间：2012-06-30T11:45:23.927
> 
> 标签：java, packages, nomenclature

在创建自己的包时，我是否必须在包名中使用第一个小写字母？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T11:46:52.090

这是标准的[java代码约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T11:48:04.527

当然。您应该在包命名中使用**所有**小写字母。 [Java 代码约定](http://www.oracle.com/technetwork/java/codeconv-138413.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T12:05:18.063

首选但不是强制性的。[以org.omg.CORBA](http://docs.oracle.com/javase/6/docs/api/org/omg/CORBA/package-summary.html)为例

# php - 如何使用 php 和 SQL Server 加速导出大型 Excel 文件

> ID：11273817
> 
> 赞同：0
> 
> 时间：2012-06-30T11:45:30.657
> 
> 标签：php, sql-server, excel, export-to-excel

我正在尝试在 php 中导出超过 10 万条记录的 Excel，但导出记录集需要一个多小时。

我使用 SQL Server 作为我的数据库。

有什么方法可以加快整个过程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T12:09:12.073

**一种选择**是确保最小化磁盘 IO，这意味着将对文件的多次写入分组为一批。例如一次写入 100 条记录，而不仅仅是 1 条。

如果您正在编写 CSV 文件，这很容易实现，但我不确定您使用的 PHP Excell 库是否公开了此实现细节。

**另一种选择**是将文件保存在 RamDisk 驱动器中，这是一个在 ram 中分配并映射为磁盘驱动器的小型文件系统。

在 Unix/Linux 平台上，/dev/shm 是一个共享内存文件系统。从中读取/写入内容比 HDD 磁盘 IO 快得多。

如果您使用的是 Windows，我记得有一些 RamDisk 解决方案。您必须下载一些实现 Windows 磁盘驱动程序的第 3 方软件。

# c# - 从 ddMMMyyyy hhmm 格式的字符串解析日期时间（带有月份名称）

> ID：11273818
> 
> 赞同：5
> 
> 时间：2012-06-30T11:45:30.983
> 
> 标签：c#, string-parsing

我遇到了一个问题，我无法从字符串中解析日期和时间，而我正在从文本文件中读取该字符串。我得到的字符串格式如下：

**05SEP1998 2400**

我正在尝试通过以下代码解析字符串：

```
string dateTimeStr = "05SEP1998 2400"

var provider = CultureInfo.InvariantCulture;

const string Format = "ddMMMyyyy hhmm";

var dateTime = DateTime.ParseExact(dateTimeStr, Format, provider); 
```

但是在解析时，上面的代码抛出了 FormatException：

`String was not recognized as a valid DateTime.`

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T11:53:50.720

`hh`是12小时，`HH`是24小时。但是，它必须在 0-23 范围内，而不是 24。如果您不能轻松更改这些日期字符串的生成方式，您可以手动解析它：

```
string dateTimeStr = "05SEP1998 2400";

var provider = CultureInfo.InvariantCulture;

const string Format = "ddMMMyyyy HHmm";
int HourPos = Format.IndexOf("HH");
var hour = dateTimeStr.Substring(HourPos, 2);
bool addDay = hour == "24";
if (addDay)
    dateTimeStr = dateTimeStr.Substring(0, HourPos) + "00" + dateTimeStr.Substring(HourPos + 2);
var dateTime = DateTime.ParseExact(dateTimeStr, Format, provider);
if (addDay)
    dateTime += TimeSpan.FromHours(24); 
```

请注意，如果`dateTimeStr`没有正确数量的字符，这将引发异常。你可能想要更好地处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T11:54:18.893

一天有24小时。但是在写作时，我们说它是从 0 到 23。它对小时格式给出了例外。

**我是怎么发现的？**

`DateTime`我尝试从您的字符串创建一个对象，例如

```
DateTime dt = new DateTime(1998, 9, 5, 24, 0, 0); 
```

它在 Hours 上给出了错误`Hour. minute and second parameters descrive an un-representable DateTime`

# java - 在哪里使用 StringBuffer/StringBuilder 而不是 String

> ID：11273823
> 
> 赞同：16
> 
> 时间：2012-06-30T11:46:50.370
> 
> 标签：java, android, string, stringbuilder

> **可能重复：**
> [String、StringBuffer 和 StringBuilder](https://stackoverflow.com/questions/2971315/string-stringbuffer-and-stringbuilder)

我们知道在/是可变`String`的地方是不可变的。但有时我们会感到困惑在我们的代码中使用什么...... **String**或**StringBuffer/StringBuilder** ?? 实际上，在我们使用的最大代码/快速代码中，我们比/更喜欢。`StringBuffer``StringBuilder`****`String``StringBuffer``StringBuilder`****

 ****这个问题是为了解决困惑，如果您对此有任何想法和正当理由，请回复。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-30T11:48:28.853

**以下是这三个最常用的类之间的主要区别。**

*   String 类对象是不可变的，而 StringBuffer 和 StringBuilder 对象是可变的。
*   StringBuffer 是同步的，而 StringBuilder 是不同步的。
*   连接运算符“+”是使用 StringBuffer 或 StringBuilder 在内部实现的。

**在String**、**StringBuffer**和**StringBuilder**中选择的标准

 ***   如果 Object 值不会更改，请使用 String Class，因为 String 对象是不可变的。
*   如果 Object 值可以更改并且只能从单个线程访问，请使用 StringBuilder，因为 StringBuilder 是不同步的。
*   如果 Object 值可以更改，并且会被多个线程修改，请使用 StringBuffer，因为 StringBuffer 是同步的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-30T11:58:11.180

主要思想是 String 是不可变的。因此，当您尝试修改它时，会创建新对象。StringBuffer 和 StringBuilder 是可变的。不同的是第一个是线程安全的。

使用 StringBuilder 的常用方法是在非线程安全环境中迭代创建 String 对象时解析某些内容。

例如，您有一个数字数组 [1, 2, 3]。要创建对象“String1String2String3”，您可以使用 StringBuilder

```
StringBuilder builder = new StringBuilder();
foreach(Integer num : array) {
    builder.append("String").append(num);
}
builder.toString(); 
```

这比仅使用`String string = string + ("String" + num);`. AFAIK，编译器将在 StringBuilder 的循环中使用字符串连接进行优化，但最好手动使用它。

当您拥有由并发线程修改的共享状态时，将使用 StringBuffer。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-30T11:51:14.053

StringBuffers 是线程安全的，这意味着它们具有控制访问的同步方法，因此一次只有一个线程可以访问 StringBuffer 对象的同步代码。因此，在多线程环境中使用 StringBuffer 对象通常是安全的。

StringBuilder 的访问是不同步的，因此它不是线程安全的。通过不同步，StringBuilder 的性能可以优于 StringBuffer。因此，如果您在单线程环境中工作，使用 StringBuilder 而不是 StringBuffer 可能会提高性能。******

# data-visualization - 具有预定义深度的 D3 树

> ID：11273825
> 
> 赞同：3
> 
> 时间：2012-06-30T11:46:55.200
> 
> 标签：data-visualization, d3.js

我想用 D3 创建具有预定义深度的树。

有没有办法在生成树之前设置深度？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T16:45:55.870

这取决于您对“树”的定义。D3 有[几个*层次*布局](https://github.com/mbostock/d3/wiki/Hierarchy-Layout)，其中[d3.layout.tree](https://github.com/mbostock/d3/wiki/Tree-Layout)就是其中之一。树布局是指 Reingold-Tilford 的[整洁树布局](http://mbostock.github.com/d3/ex/tree.html)算法。这种特定的算法不利于自定义节点的深度，因为它假设所有兄弟节点的深度相同（以便它可以整齐地放置节点）。

相比之下，[d3.layout.cluster](https://github.com/mbostock/d3/wiki/Cluster-Layout)可以轻松修改以在自定义深度渲染节点。只需忽略生成的`d.y`坐标并替换您自己的深度值（可能与[线性比例](https://github.com/mbostock/d3/wiki/Quantitative-Scales)一起从数据映射到像素）。有关此技术的示例，请参阅 Ken-ichi Ueda 的[直角系统图](http://bl.ocks.org/1036776)。

# java - 没有getIdentifier的Android中资源的动态命名

> ID：11273828
> 
> 赞同：0
> 
> 时间：2012-06-30T11:47:12.197
> 
> 标签：java, android, opengl-es

我正在使用 OpenGL ES 在 Android 中制作游戏。我从教程中获得了一些代码，我正在尝试对其进行更改以适合我的应用程序，但我遇到了问题。我想使用传递给函数的字符串作为资源名称来动态获取图像资源。我知道通常你在这种情况下使用 getIdentifier() ，但它返回一个 int 并且我需要一个输入流。有什么方法可以动态地从资源中获取输入流？

或者，有没有更好的方法来做到这一点？

下面的代码：

```
InputStream is = mContext.getResources().openRawResource(R.drawable.<imagename>);

Bitmap bitmap;
try {
      bitmap = BitmapFactory.decodeStream(is);
}
finally {
      try {
            is.close();
      } 
      catch (IOException e) {
            e.printStackTrace();
      }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T12:03:23.483

是的，你可以假设你将图像存储在 drawable 中，命名为 img1、img2、img3、img4、img5、img6、img7，而不是首先创建一个类似的数组

```
String[] imgarray={"img1","img2","img3","img4","img5","img6","img7"};
public static String PACKAGE_NAME ;
PACKAGE_NAME=getApplicationContext().getPackageName();
Random r = new Random();
int n=r.nextInt(imgarray.length());
int resID = getResources().getIdentifier( PACKAGE_NAME+":drawable/" +imgarray[n] , null, null);  
imageview.setImageResource(resID); 
```

如果想要位图图像而不仅仅是添加以下行

```
Bitmap  bm = BitmapFactory.decodeResource(getResources(),resID); 
```

如果您想要其他方式的编码少于在[其他示例中看到接受的答案](https://stackoverflow.com/questions/10135713/display-a-random-image-when-a-button-is-clicked/10135994#10135994)

# c# - 将图片框动态添加到窗体

> ID：11273830
> 
> 赞同：1
> 
> 时间：2012-06-30T11:47:18.720
> 
> 标签：c#, asp.net, winforms

我正在尝试动态添加图片框。我的代码是

```
PictureBox picture = new PictureBox
        {
            Name = "pictureBox",
            Size = new Size(100, 150),
            Location = new Point(14, 17),
            Visible=true
        };

        picture.ImageLocation = @"Image\80knhk00003.jpg";
        pnlDisplayImage.Controls.Add(picture); 
```

我在项目中创建了图像文件夹并添加了这个图像。仍然当我运行我的代码时，我只能看到红十字。

我试着做谷歌。而且我只得到类似的解决方案。我不知道我的代码有什么问题。

除此之外，如果我将图像文件位置存储在数据库中，那么如何在图片框中显示这些图像？请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T11:49:37.663

您的图片不会被复制到二进制文件夹中。

将 jpg 文件添加到解决方案中。打开它的属性（右键单击文件名-属性）。启用复制到输出目录选项。还为图像文件夹启用它。

# javascript - 小书签无法在 FB 上正确加载

> ID：11273835
> 
> 赞同：1
> 
> 时间：2012-06-30T11:48:23.183
> 
> 标签：javascript, extjs

我正在使用它在安全网页上加载我的书签。

```
javascript:(function() {
      document.body.appendChild(document.createElement('script')).src = 'http://mydoamin/bookmarklet/pets.js?' + Math.random();
})(); 
```

我想知道是否有其他方法可以在安全网页上加载小书签。

**搜索后**

我找到了这个并且它有效:)

```
 javascript:var s=document.getElementById('script');
 if(s){
     s.parentNode.removeChild(s);
 }    
 s=document.createElement('script');
 s.setAttribute('src', 'http://mydoamin/bookmarklet/pets.js');
 s.setAttribute('type', 'text/javascript');
 s.setAttribute('id', 'script');
 document.body.appendChild(s);
 void(0); 
```

任何人还想更正它，请继续。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T17:01:27.557

您必须先创建一个元素，然后才能调整属性，除此之外还有括号错误，应删除 createElement('script') 之后的第二个括号并将其放在行尾。试试这个代码：

```
 javascript:(function(){var a=document.createElement("script");a.type="text/javascript";a.src="http://mydoamin/bookmarklet/pets.js?"+Math.random();document.getElementsByTagName("body")[0].appendChild(a);}()); 
```

# arrays - 在 Matlab 中将 Iplimage 转换为矩阵或数组

> ID：11273839
> 
> 赞同：2
> 
> 时间：2012-06-30T11:48:43.850
> 
> 标签：arrays, matlab, opencv, matrix, iplimage

我通过 Matlab 使用 OpenCV 来检测视频中的人脸，然后使用 Matlab 进行一些处理。目前，我对视频的 IplImage 结构帧（由 cvQueryFrame 查询）进行人脸检测。我将每个查询的帧保存为 jpg，然后使用面部坐标获取所需处理的 ROI。请参阅下面概述此内容的代码部分。

```
% After reading in frame from video..
for i=1:size
    img = calllib('highgui210','cvQueryFrame',cvCapture);
    calllib('cxcore210','cvFlip',img,img,1);
    calllib('highgui210', 'cvSaveImage', 'ThisFrame.jpg', img, ptr); 
% Rest of the processing comes here.. 
```

在这种情况下，我觉得应该有一种更简单、更简单的方法来将“IplImage”图像转换为 Matlab 中的矩阵或数组。这是一种可能吗？如果是，这是如何完成的？

非常感谢这个方向的一些指示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T07:08:10.183

尝试混合以下代码：

```
/*
 * Usage:
 *   img = IplImage2mxArray( cvImgPtr, releaseFlag );
 */
void mexFunction( int nout, mxArray* pout[], int nin, const mxArray* pin[]) {
    if ( nin != 2 )
        mexErrMsgTxt("wrong number of inputs");
    if ( nout != 1 )
        mexErrMsgTxt("wrong number of outputs");
    IplImage* cvImg = (IplImage*)mxGetData(pin[0]); // get the pointer
    // allocate the output
    mwSize imgDims[3] = {cvImg->height,  cvImg->width, cvImg->nChannels};
    pout[0] = mxCreateNumericArray( 3, imgDims, mxDOUBLE_CLASS, mxREAL );
    if ( pout[0] == NULL )
        mexErrMsgTxt("out of memeory");
    double* imgP = mxGetPr(pout[0]);
    double divVal = pow(2.0, cvImg->depth) - 1;
    double releaseFlag = mxGetScalar( pin[1] );
    for ( int x = 0 ; x < cvImg->width; x++ ) {
        for ( int y = 0 ; y < cvImg->height; y++ ) {
            CvScalar s = cvGet2D(cvImg, y, x);
            for (int c = 0; c < cvImg->nChannels; c++) {
                imgP[ y + x * cvImg->height + c * cvImg->height * cvImg->width ] = s.val[c] / divVal;
            }
        }
    }
    if ( releaseFlag != 0 ) {
        cvReleaseImage( &cvImg );
    }
} 
```

你最终会得到一个函数（mex）IplImage2mxArray，在 Matlab 中使用它：

```
>> cvImg = calllib('highgui210','cvQueryFrame',cvCapture);
>> img = IplImage2mxArray( cvImg, false ); % no cvReleaseImage after cvQueryFrame 
```

由于内部 opencv 表示，img 的通道可能会被置换（RGB 的 BGR 插入）。另请注意，img 可能包含四个通道 - 一个额外的 alpha 通道。

-沙伊

# sql-server - group by 中的操作计数

> ID：11273842
> 
> 赞同：0
> 
> 时间：2012-06-30T11:49:18.173
> 
> 标签：sql-server, group-by

最近在我同事的代码中，我看到了一个 sql 查询，她在其中使用`GROUP BY`了很多列。这些列中的大多数不需要在查询中分组。她这样做是为了防止这个错误：

> 列 'some_col' 在选择列表中无效，因为它既不包含在聚合函数中，也不包含在 GROUP BY 子句中。

我想知道`GROUP BY`有多重，可以使用这样的语句吗？如果它比我最好优化她的查询，因为现在我处理那段代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T11:58:50.570

如果没有看到特定的查询，很难确定，但我过去常常通过最小化 GROUP BY 中包含的列数，并通过内部查询的连接解决这些列，从而获得了惊人的性能提升（至少在 SQL2K 中）。更具体地说：假设您有分类 OrderDetails (OrderID, ProductID, Quantity, Price) 和 Products (ProductID, ProductName) 表。更改此查询：

```
select P.ProductID, ProductName, sum(Quantity * Price)
from Products as P
  inner join OrderDetails as OD on P.ProductID = OD.ProductID
group by P.ProductID, ProductName 
```

对此：

```
select X.ProductID, PP.ProductName, X.OrderValue
from
  (
    select P.ProductID, sum(Quantity * Price) as OrderValue
    from Products as P
       inner join OrderDetails as OD on P.ProductID = OD.ProductID
    group by P.ProductID
  ) as X
    inner join Products as PP on X.ProductID = P.ProductID 
```

尽管有两个连接到同一个表，但我会获得性能提升，因为在整数索引上分组比在文本值、未排序的产品名称上分组更快。

# ruby-on-rails-3 - 将backbone.js 视图转换为rails 视图

> ID：11273865
> 
> 赞同：0
> 
> 时间：2012-06-30T11:53:59.080
> 
> 标签：ruby-on-rails-3, backbone.js

我的主要目标是删除backbone.js 视图/模板并将它们实现到rails 视图。这样做的最佳方法/做法是什么？由于backbone.js 视图上有很多东西，有什么方法可以保留功能并在rails 视图中转换它们。

如果您的回答包含步骤，则很有帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T14:39:47.313

我认为在*服务器*层和*客户端*层之间建立任何依赖关系都不是一个好主意。

从Backbone 中的 View 概念与 Rails 中的 View 概念没有任何关系*这*一点*开始。*

# wcf - 我有一个合同类，其属性已更改

> ID：11273875
> 
> 赞同：1
> 
> 时间：2012-06-30T11:54:47.763
> 
> 标签：wcf, serialization

我在一个公共库中有以下类：

```
 [DataContract]
    public class WcfFileStream
    {
        private string _name;
        [DataMember]
        public string Name
        {
            get { return _namee; }
            set { _name = value; }
        }

        private System.IO.Stream _file;
        //[MessageBodyMember]
        [DataMember]
        public System.IO.Stream File
        {
            get { return _file; }
            set { _file = value; }
        } 
```

我有属性名称，即 System.IO.Stream，但是当我在客户端中创建一个新的 WcfFileStream 以发送到服务时，类型是 System.IO.MemoryStream。为什么？

这会引发异常 System.ServiceModel.CommunicationException，因为它应该是 Stream，而不是 MemoryStream。

为什么如果我的属性是 Stream，当我创建对象时是 memoryStream？

谢谢。

# android - 为什么 android.os.Message 不是不可变的

> ID：11273876
> 
> 赞同：0
> 
> 时间：2012-06-30T11:55:12.227
> 
> 标签：android, message, immutability

在android.os.Message中，有很多字段供另一个线程识别收到消息后要做什么。

```
public int what;
public int arg1; 
public int arg2; 
```

但是，如果我们在将消息放入消息队列后更改字段中的值，则会影响接收线程处理消息的方式。

**为什么 Android 团队不让 android.os.Message 不可变？** 我认为这将防止Android开发人员犯错误。

**让它不可变不是更好的设计吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T12:48:28.157

我对第一个问题没有确切的答案（只有 android 团队有一个）。看起来，它与一些内存/性能考虑有关。一般来说，对象的创建非常昂贵，因此，Android[建议](http://developer.android.com/reference/android/os/Message.html)：

> 获得其中之一的最佳方法是调用 Message.obtain() 或 Handler.obtainMessage() 方法之一，这将从回收对象池中提取它们。

如果您遵循 android 参考并使用 Message.obtain()，您将不会花费时间和内存来创建新的 Message 对象，而是会重新使用“消息查询”中的现有对象。我相信 Message 是可变的，因为 Android 适用于资源受限的移动系统（不确定今天是否有效，但这是几年前的事了）。

同时不可变对象有很多优点。查看 Effective Java Item 15: Minimize mutability 了解更多细节。使用不可变类的主要原因是：

*   不可变对象很简单；
*   不可变对象本质上是线程安全的；它们不需要同步；
*   不可变对象可以自由共享，甚至可以共享它们的内部（通常是final）；
*   用不可变的对象构建其他对象更容易；

有效的 Java 只提到了不可变类的一个缺点：它们需要为每个不同的值使用单独的对象。

# django - 覆盖下一个参数 django-social-auth 以在 Google Analytics 中跟踪 Facebook 登录和新用户

> ID：11273886
> 
> 赞同：0
> 
> 时间：2012-06-30T11:57:19.230
> 
> 标签：django, google-analytics, django-socialauth

我只使用 django 几个月，现在我正在修改另一个开发人员制作的 django 代码库。

我正在尝试找到一种方法来有效地跟踪 Google Analytics 中的 facebook 注册和登录，我想到的一种方法是向用户通过 facebook 连接后重定向的 url 添加一个参数。

目前我们正在使用这样的“下一个”参数：

```
<a href="{% url socialauth_begin 'facebook' %}?next={{ request.path }}"> 
```

我希望能够覆盖下一个参数以添加：

```
{{request.path}}?new_facebook_user 
```

或者

```
{{request.path}}?facebook_login 
```

如果用户已经注册。

您认为这样做的最佳地点在哪里？你认为这是在谷歌分析中跟踪 fb 登录和新用户的有效方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T21:15:03.310

这种方法行不通，至少当您创建该链接时，您将无法确定该用户是否是新用户。该应用程序提供了`SOCIAL_AUTH_NEW_USER_REDIRECT_URL`定义一个不同的 URL 的设置来重定向新创建的帐户。此设置优先于`?next=`参数，因此如果定义它将丢失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-09T11:41:17.177

您需要在管道中使用这样的方法：

```
def modify_next(backend, is_new=True, *args, **kwargs):
    if backend.name == "facebook":
        next = backend.strategy.session_get("next")
        if is_new:
            backend.strategy.session_set("next", "{}?new_facebook_user".format(next))
        else:
            backend.strategy.session_set("next", "{}?facebook_login".format(next)) 
```

因此，您将修改默认的下一个行为。

# android - Environment.getExternalStorageState() 可以不安装在 Android ICS 上吗？

> ID：11273887
> 
> 赞同：2
> 
> 时间：2012-06-30T11:57:30.010
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-sdcard

我从以前的 Android 2.1-2.3 项目中获得了以下代码，用于检查 SD 卡是否已安装且可写。

```
@Override
protected void onResume() {
    super.onResume();
    checkSDCard();
}

private void checkSDCard(){
    String state = Environment.getExternalStorageState();
    if (Environment.MEDIA_MOUNTED.equals(state)) {
        Log.d(TAG, "SD card mounted and writable.");
    } else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
        Log.d(TAG, "sdcard mounted readonly");
    } else {
        Log.d(TAG, "sdcard state: " + state);
        mWarningSdCardDialog = new AlertDialog.Builder(this)
                .setTitle("Warning")
                .setMessage(R.string.warning_sdcard_message)
                .setPositiveButton(getString(android.R.string.ok),
                        mWarningSdCardDialogCliclListener)
                .setCancelable(false)
                .create();
        mWarningSdCardDialog.show();
    }
} 
```

现在我正在研究将在 Android ICS 设备上启动的项目。我发现 Android ICS 设备不能像 USB 大容量存储器那样简单地连接到计算机。我的问题是：我的旧代码现在有意义吗？SD卡是否始终在Android ICS上安装和写入？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:54:26.453

是的，还是有道理的。有些设备（例如 Nexus S）允许使用 ICS 和 JB 进行 USB 大容量存储模式。

# android - 如何在actionbarsherlock中更改标签“下划线”的颜色

> ID：11273888
> 
> 赞同：14
> 
> 时间：2012-06-30T11:57:30.570
> 
> 标签：android, tabs, android-actionbar, actionbarsherlock

好吧，我比以往任何时候都失去了更多的理智。我无法找到/理解如何设计该死的东西。我设法更改了选项卡本身的背景，但我无法更改所选选项卡下栏的颜色。

如何将其从蓝色变为某种东西。

不幸的是，我的 styles.xml 我对它的工作原理非常了解

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <style name="Theme.Styled" parent="Theme.Sherlock.Light">
        <item name="actionBarTabStyle">@style/Widget.Styled.ActionBarTab</item>
        <item name="android:actionBarTabStyle">@style/Widget.Styled.ActionBarTab</item>

        <item name="actionBarTabBarStyle">@style/Widget.Styled.ActionBarTabBar</item>
        <item name="android:actionBarTabBarStyle">@style/Widget.Styled.ActionBarTabBar</item>

        <item name="actionBarTabTextStyle">@style/myText</item>
        <item name="android:actionBarTabTextStyle">@style/myText</item>

    </style>

    <style name="Widget.Styled.ActionBarTab" parent="Widget.Sherlock.Light.ActionBar.TabView">
    <!--    <item name="background">@drawable/startbcg</item>
        <item name="android:background">@drawable/startbcg</item>
        <item name="backgroundSplit">@drawable/bg_striped_split</item>
        <item name="android:backgroundSplit">@drawable/bg_striped_split</item>
    -->
    </style>

    <style name="Widget.Styled.ActionBarTabBar" parent="Widget.Sherlock.Light.ActionBar.TabBar">

        <item name="background">@drawable/startbcg</item>
        <item name="android:background">@drawable/startbcg</item>
         <item name="backgroundSplit">@drawable/bg_striped_split</item>
        <item name="android:backgroundSplit">@drawable/bg_striped_split</item>

    </style>

    <style name="myText" parent="Widget.Sherlock.Light.ActionBar.TabText">
        <item name="android:textAppearance">@android:style/TextAppearance.Medium</item>
        <item name="android:textColor">@android:color/primary_text_dark</item>
        <item name="android:textSize">10sp</item>

    </style>
<style name="myTextInv" parent="Widget.Sherlock.Light.ActionBar.TabText.Inverse">
        <item name="android:textAppearance">@android:style/TextAppearance.Medium</item>
        <item name="android:textColor">@android:color/primary_text_dark</item>
        <item name="android:textSize">10sp</item>

    </style>
</resources> 
```

额外的问题：我在哪里可以找到某些东西的属性（如背景）。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-06-08T15:18:53.390

使用[ActionbarStyleGenerator](http://jgilfelt.github.io/android-actionbarstylegenerator/)来设置 Actionbar 的样式。这是迄今为止最简单、最直观的方式。

如何：

1.  使用 UI 为不同的项目选择颜色
2.  完成后点击“下载 .ZIP”
3.  ZIP 文件包含您必须在项目 res/layout 和 res/drawableXXXX 文件夹中复制的资源文件

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-21T16:48:29.810

我发现对于背景，最好复制 Android SDK res 目录中的可绘制对象（9 个补丁和 xml）并将其更改为您喜欢的颜色。

他们使用包含底栏的背景，所以我认为不能单独更改底栏。

这是我所拥有的，使用绿色作为底栏：

```
<style name="customTabStyle" parent="Widget.Sherlock.ActionBar.TabView">
    <item name="android:showDividers">none</item>
    <item name="android:measureWithLargestChild">true</item>
    <!-- This was a copy from the sdk drawable -->
    <item name="android:background">@drawable/tab_indicator</item>

    <item name="background">@drawable/tab_indicator</item>
    <item name="android:gravity">center</item>
    <item name="android:textStyle">normal</item>
</style>

<style name="customTabBar" parent="Widget.Sherlock.ActionBar.TabBar">
    <item name="android:showDividers">middle</item>

    <item name="android:divider">@drawable/tab_divider</item>
    <item name="divider">@drawable/tab_divider</item>

    <item name="android:dividerPadding">10dip</item>

    <item name="android:background">@drawable/tab_bg</item>
</style> 
```

选项卡指示器如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<!-- Non focused states -->
<item android:state_focused="false" android:state_selected="false" android:state_pressed="false" android:drawable="@drawable/tab_unselected" />
<item android:state_focused="false" android:state_selected="true"  android:state_pressed="false" android:drawable="@drawable/tab_selected" />

<!-- Focused states -->
<item android:state_focused="true" android:state_selected="false" android:state_pressed="false" android:drawable="@drawable/tab_unselected_focused" />
<item android:state_focused="true" android:state_selected="true"  android:state_pressed="false" android:drawable="@drawable/tab_selected_focused" />

<!-- Pressed -->
<!--    Non focused states -->
<item android:state_focused="false" android:state_selected="false" android:state_pressed="true" android:drawable="@drawable/tab_unselected_pressed" />
<item android:state_focused="false" android:state_selected="true"  android:state_pressed="true" android:drawable="@drawable/tab_selected_pressed" />

<!--    Focused states -->
<item android:state_focused="true" android:state_selected="false" android:state_pressed="true" android:drawable="@drawable/tab_unselected_pressed" />
<item android:state_focused="true" android:state_selected="true"  android:state_pressed="true" android:drawable="@drawable/tab_selected_pressed" />
</selector> 
```

我希望它有帮助！

# php - 打开 Office 用于 doc、docx 和 rtf 到 html 的转换

> ID：11273889
> 
> 赞同：0
> 
> 时间：2012-06-30T11:57:34.883
> 
> 标签：php, html, linux, openoffice.org

如何从 doc、docs 和 rtf 文件中读取 HTML 格式的文本？

我的脚本在 LAMP 上，可以访问服务器上安装的 openoffice 进行这种类型的转换吗？

**编辑**

我不需要通过 php 扩展或 Apache 模块访问 openoffice，如果可以使用 cli trhoug php 来使用它，那也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T12:04:54.273

你可以试试普诺：[http ://www.wstech2.net/index.php?do=0a,01,05](http://www.wstech2.net/index.php?do=0a,01,05)

> 该项目是一个用 C++ 编写的 PHP5 模块，它将 OpenOffice.org UNO 编程 API 引入 PHP 用户空间。

它使用 OpenOffice 的 UNO Reflection API。这很容易开始。查看那里给出的示例示例。

# android - android安装的键盘在消息上自动启动而不是在editText上

> ID：11273890
> 
> 赞同：2
> 
> 时间：2012-06-30T11:57:36.253
> 
> 标签：android, emulation, android-keypad

我正在使用模拟器，我构建了一个应用程序，用户必须在阿拉伯语上书写，我安装了阿拉伯语键盘，当我想写这样的消息时它可以工作，当我打开消息时我只有 1 个键盘，但是当我输入任何字母时，会出现一个新键盘，我可以用它来写阿拉伯语，这两个键盘是： ![在此处输入图像描述](../Images/37ad5ed73e05179cf6c66d8b092e707b.png)

但是当我想在我的应用程序上使用已安装的键盘时，当我开始在 edittext 上输入时，第二个键盘不会像这样出现![在此处输入图像描述](../Images/391d1ed06a4651c6882568641cee77d7.png)

那么如何更改语言或如何使第二个键盘出现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T13:45:22.477

我自己找到了解决方案，并且对于弹出键盘的所有问题，使用以下代码：

```
 ((InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE))
        .showSoftInput(YourEditText, InputMethodManager.SHOW_FORCED); 
```

# matlab - 快速 KL 变换

> ID：11273897
> 
> 赞同：0
> 
> 时间：2012-06-30T11:59:46.130
> 
> 标签：matlab

我是 matlab 新手，我想实现快速 KL 变换。

我已经找到了实现 KL 变换的方法，但我需要实现快速 KL，据我所知，我所要做的就是更改初始矩阵。

这是我现在的矩阵：

```
im=imread('lena.bmp');
im=rgb2gray(im);
x = double(im)/255; %convert to double and normalize
[n m]=size(x);

y11=reshape(x(1:n/2,1:m/2),(n^2/4),1);
y12=reshape(x(1:n/2,m/2+1:m),(n^2/4),1);
y21=reshape(x(n/2+1:n,1:m/2),(n^2/4),1);
y22=reshape(x(n/2+1:n,m/2+1:m),(n^2/4),1);
x=[y11,y12,y21,y22]; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T13:16:07.827

也许这篇科学文章可以帮助你：

[http://parnec.nuaa.edu.cn/zhangdq/nerocomputing05a.pdf](http://parnec.nuaa.edu.cn/zhangdq/nerocomputing05a.pdf)

但不幸的是，它没有您要求的已实现代码。

好看！

# ruby-on-rails - 如何使用json作为输入？

> ID：11273898
> 
> 赞同：0
> 
> 时间：2012-06-30T11:59:51.683
> 
> 标签：ruby-on-rails, json

```
{  
    "entry":  
       {  
          "city_id": "1234",  
          "city_name": "California"  
       }  
    } 
```

考虑这是我从 api 收到的 json。我想将 city_id 和 city_name 的值分配给一个变量。红宝石怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T12:02:43.647

您将需要一个 JSON 解析库。这里有一个例子： http: [//flori.github.com/json/](http://flori.github.com/json/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T12:26:52.230

我`multi_json`在我的应用程序中使用 gem。我像这样解码我的请求：

```
data = MultiJson.load(params[:json])
puts data["entry"]["city_name"] # California 
```

# c# - C#：从类修改表单控件

> ID：11273900
> 
> 赞同：0
> 
> 时间：2012-06-30T12:00:11.150
> 
> 标签：c#, winforms, class, inheritance, controls

我有这样的表格和班级：

```
namespace ALTER_Control
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            ALTER A = new ALTER();
            A.ALTER();
        }
    }

    public class ALTER
    {
        public Form1 F;
        public void ALTER()
        {
            F.TextBox1.Text="I Altered That";
        }
    }
} 
```

所以我尝试调用 ALTER() 来更改 Form1 中的 textbox1 值，但我得到了那个错误：

```
object reference not set to an instance of an object 
```

仅当我访问或修改 Form1 控件时才会发生这种情况。

顺便说一下，我将 textbox1 修饰符设置为 public

所以，最后我想更改控制值而不会出现该错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T12:04:59.293

您需要将引用分配给表单。像这样：

```
 private void button1_Click(object sender, EventArgs e)
    {
            ALTER A = new ALTER();
            A.F = this;
            A.ALTER();
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T12:07:19.460

为什么你的`ALTER`班级（这也不是一个很好的班级名称）必须知道你的表格？

```
 private void button1_Click(object sender, EventArgs e)
    {
        ALTER A = new ALTER();
        this.TextBox1.Text = A.ALTER();
    }
}

[...]

public class ALTER
{
    public String ALTER()
    {
        // Do your thing

        return "I Altered That";
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T12:06:30.587

使用这些代码行：

```
 ALTER A = new ALTER();
    A.F = this ;
    A.ALTER(); 
```

# javascript - 处理来自 ResultSet 的空值

> ID：11273901
> 
> 赞同：1
> 
> 时间：2012-06-30T12:00:18.063
> 
> 标签：javascript, ado

我使用以下代码从数据库中检索值：

```
if( !rs.bof ){
     rs.MoveFirst();
     while ( !rs.eof ){
        output.innerHTML += rs.fields( "Name" ) + ","
        output.innerHTML += rs.fields( "Address" ) + "<br>"
        rs.MoveNext();
    }
} 
```

但是如果地址为空，那么它会写：

```
Sherlock Holmes, 221B Baker Street
James Moriarty, null 
```

我试过使用：

```
if( rs.fields( "Address" ) != null && rs.fields( "Address" ) != "" ) 
```

我应该怎么做才能使空值显示为空字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T12:04:55.470

尝试这个：

```
if( !rs.bof ){
     rs.MoveFirst();
     while ( !rs.eof ){
        output.innerHTML += (rs.fields( "Name" ) || "") + ","
        output.innerHTML += (rs.fields( "Address" ) || "") + "<br>"
        rs.MoveNext();
    }
} 
```

使用[逻辑`Or`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Logical_Operators)将其更改为空字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T12:33:48.683

尝试这个：

```
if( !rs.bof ){
     rs.MoveFirst();
     while ( !rs.eof ){
        var name=  (rs.fields( "Name" ) === null)?"":rs.fields( "Name" );
        var address=  (rs.fields( "Address" ) === null)?"":rs.fields( "Address" );
        output.innerHTML += name + ","
        output.innerHTML += address + "<br>"
        rs.MoveNext();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T12:03:38.293

像这样修改代码

```
if( !rs.bof ){
     rs.MoveFirst();
     while ( !rs.eof ){
        var name = rs.fields( "Name" ) ;
        var address = rs.fields( "Address" ) ;
        output.innerHTML += (name == null ) ? "" : name  ;
        output.innerHTML += (address == null ) ? "" : address + "<br>" ;
        rs.MoveNext();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T12:09:28.480

编写一个辅助函数来保持整洁：

```
function field_maybe(rs, fname) {
    return rs.fields(fname) || "";
}

...

if( !rs.bof ){
     rs.MoveFirst();
     while ( !rs.eof ){
        output.innerHTML += field_maybe(rs, "Name") + ","
        output.innerHTML += field_maybe(rs, "Address") + "<br>"
        rs.MoveNext();
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-16T20:28:46.073

这是一个相当古老的话题/问题，但我实际上遇到了同样的问题，并且非常确定我以前做过这个。这些答案似乎都不适合实际问题。

问题是 rs.fields( "Address" ) 永远不会评估为 null 或 false。

因此，如果我们采用 OPs 评估声明：

```
if( rs.fields( "Address" ) != null && rs.fields( "Address" ) != "" ) 
```

它确实总是会出现。相反，您需要检查值：

```
if(rs.fields( "Address" ).value){...} 
```

如果没有，它将返回 false，不像其他解决方案都遇到相同的问题，它总是评估为 true。

希望它可以帮助其他遇到这个小问题的人。:)

# php - 如何在同一个窗口中制作弹出框？

> ID：11273906
> 
> 赞同：0
> 
> 时间：2012-06-30T12:01:47.067
> 
> 标签：php, javascript, sql-server

我正在建立一个网站，但对任何计算机语言一无所知，当我单击图像或其中包含游戏的链接时，我需要帮助使一个框出现，有点像页面中心同一窗口中的弹出窗口背景较暗或覆盖有灰色半透明框的所有内容。所以请告诉我如何做到这一点以使我的愿望成功，这将是一个很大的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T12:37:03.360

是的，克里斯是绝对正确的。您可以使用 jquery 和 mootools 等框架来制作交互式弹出框

弹出框通常被称为灯箱。你可以使用像对话框这样的插件

[对话框 - jQuery](http://jqueryui.com/demos/dialog/#modal-form)

或者你可以在这里阅读一些关于如何做到这一点 [的教程 通过教程学习 jquery 的最佳来源](http://tutorialzine.com/2009/11/hovering-gallery-css3-jquery/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T12:14:58.870

由于对任何计算机语言知之甚少，我建议使用 jQuery（或聘请[承包商](http://www.vworker.com/)）。这里有很多例子 - [http://jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)

在实现 jQuery 库之后，如果您需要进一步的帮助，请使用示例代码提出一个新问题，我相信有人能够提供帮助。

# asp.net - ASP.NET VisualBasic2010 Web 应用程序超链接打开新的浏览器选项卡而不是新的浏览器窗口

> ID：11273908
> 
> 赞同：0
> 
> 时间：2012-06-30T12:02:12.760
> 
> 标签：asp.net, visual-studio-2010, browser

当用户单击我的 ASP.NET 页面上的超链接时，我希望打开一个新浏览器。

我从工具箱中添加了一个指向我的目标`.html`文件的超链接，并添加到了 Sub`Page_Load`

```
<hyperlink ID>.Attributes.Add("target","_blank") 
```

但它会向浏览器添加一个新选项卡，而不是打开一个新的浏览器窗口。

我尝试放入`'_blank'`超`'Target'`链接属性的属性，但仍然失败。

奇怪的是，当我从 VisualStudio 运行它时，它可以工作并打开新的浏览器，但是如果我浏览到我的网站，它只会打开新的选项卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T12:55:35.607

我认为没有任何方法可以控制新窗口的打开方式。它可以是基于用户浏览器设置的新窗口或选项卡。

[JavaScript 在新窗口中打开，而不是选项卡](https://stackoverflow.com/questions/726761/javascript-open-in-a-new-window-not-tab)

# php - 使用 XSLT 或 PHP 脚本重构 XML 文件

> ID：11273909
> 
> 赞同：-1
> 
> 时间：2012-06-30T12:02:23.867
> 
> 标签：php, xml, xslt, rss, atom-feed

我有一个 iphone 应用程序，它解析标准 rss 提要并将其显示在桌子上。但是，我从客户端获得了提要，但应用程序中的解析器无法获取节点并解析数据，因为它不是标准的 rss 提要。

他们给我的布局如下：

```
 <rss version="0.92">
        <channel>
        <title>Feed</title>
        <link>http://google.com</link>
        <description>
        Description here
        </description>
        <lastBuildDate>30 June +0100</lastBuildDate>
        <language>en</language>
            <event>
                <eventID>123</eventID>
                <name>Name here</name>
                <date>2012-06-29</date>
                <time>21:00</time>
                <category>Arts</category>
                <info>
                 Info here
                </info>
            </event>
            <event>
                <eventID>223</eventID>
                <name>Name here</name>
                <date>2012-06-30</date>
                <time>22:00</time>
                <category>Dance</category>
                <info>
                 Info here
                </info>
            </event>
    </channel>
</rss> 
```

有没有办法使用 XSLT 或 PHP 脚本将此 xml 文件重组为标准 rss 提要布局？标准的 RSS 提要布局如下：

```
<rss>
     <channel>
     <item>
        <title>
            <![CDATA[ Title here ]]>
        </title>
        <link>
            http://www.theatre.com/
        </link>
        <guid>
        http://www.theatre.com
        </guid>
        <description> 
         <p> Description </p>

        </description>
        <dc:subject>
        <![CDATA[ ]]>
        </dc:subject>
        <dc:date>2013-02-01T18:00:04+00:00</dc:date>
      </item>
     </channel>
</rss> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T12:49:24.323

不清楚你想要什么，所以这个样式表只是表明你可能需要什么。

**这个 XSLT 1.0 样式表 ....**

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>

  <xsl:template match="/">
 <rss>
  <channel>
    <xsl:apply-templates select="rss/channel/event" /> 
  </channel>
 </rss>
</xsl:template>

<xsl:template match="event" >
 <item>
  <title><xsl:value-of select="../title" /></title>
  <link><xsl:value-of select="../link" /></link>
  <guid>http://www.theatre.com</guid>
  <description><xsl:value-of select="../description" /></description>
  <subject><xsl:value-of select="category" /></subject>
  <date><xsl:value-of select="date" />T<xsl:value-of select="time" />+00:00</date>
 </item>
</xsl:template>      

</xsl:stylesheet> 
```

**...当应用于您提供的示例输入时，将生成此文档 ...***

```
<?xml version="1.0" encoding="utf-8"?>
<rss>
  <channel>
    <item>
      <title>Feed</title>
      <link>http://google.com</link>
      <guid>http://www.theatre.com</guid>
      <description>
        Description here
        </description>
      <subject>Arts</subject>
      <date>2012-06-29T21:00+00:00</date>
    </item>
    <item>
      <title>Feed</title>
      <link>http://google.com</link>
      <guid>http://www.theatre.com</guid>
      <description>
        Description here
        </description>
      <subject>Dance</subject>
      <date>2012-06-30T22:00+00:00</date>
    </item>
  </channel>
</rss> 
```

# android - 将本机底部菜单添加到 android 的 phonegap 应用程序

> ID：11273910
> 
> 赞同：3
> 
> 时间：2012-06-30T12:02:37.970
> 
> 标签：android, cordova

我知道有一些解决方法可以创建始终可见的底部菜单并且仍然能够滚动内容。(iscroll, jquery)

但是是否可以将其添加到 java 文件本身中，然后与它“通信”。（选择时突出显示等）并且网络视图仅延伸到底部菜单？

或者有人知道新的更新 1.9 是否有一种简单的方法，其中包含他们自己的 webview？他们还没有包括很多例子。

我知道大多数人都对 jquery/prototype 和所有这些框架发誓，但我听说 phonegap 应用程序的速度可能非常慢，所以我想尝试在没有额外 JS 框架的情况下制作应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T22:07:28.240

丹，您最好坚持使用 Android 提供此功能的方式，该方式提供了一个选项菜单，该菜单在您单击菜单按钮时出现。

[https://developer.android.com/guide/topics/ui/menus.html#options-menu](https://developer.android.com/guide/topics/ui/menus.html#options-menu)

在您的 onOptionsItemSelected 方法中，您可以使用 this.sendJavascript() 调用 Javascript 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:26:44.043

好吧，由于某种原因， position:fixed 突然起作用了。我不知道为什么？？

这基本上就是我希望它在底部的菜单上做的事情。如果我能弄清楚是什么造成了不同的话。

# java - 扫描仪没有停止

> ID：11273911
> 
> 赞同：0
> 
> 时间：2012-06-30T12:02:39.553
> 
> 标签：java, collections, io, arraylist

请看下面的代码。这是我尝试按升序管理给定数字的尝试。

```
import java.io.*;
import java.util.*;
import java.util.ArrayList;

public class TurboSort
{
    public static void main(String[]args)
    {

        List<Integer> numbers = new ArrayList();        
        Scanner scan = new Scanner(System.in);

        while(scan.hasNextInt())
        {
            numbers.add(scan.nextInt());
        }

        Collections.sort(numbers);

        System.out.println(numbers);
    }
} 
```

将输入插入为 2,1,6,7,3

点击进入。

现在，扫描仪还没有退出 while 循环，因为它没有给出任何输出。我在这里做错了什么？即使你设法得到它，输出也会被括号括起来，比如“ [1] [2] [3] ”。这是为什么？那是因为我没有调用 'Integer.parseInt()' 吗？请帮我解决这两个问题。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T12:07:16.917

按回车的结果将是一个行分隔符，其字符被视为分隔符（默认情况下，请参阅[Character.isWhitespace()](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#isWhitespace%28char%29)）并被跳过。因此，`Scanner`等待进一步的输入，它永远不会到达并且`hasNextInt()`将阻塞。输入一些不是整数的东西，例如 a `.`，以使循环终止：

> 1 2 5 3 7 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T12:08:57.360

这个循环永远不会退出（只要你输入整数），因为没有`break`条件

```
while(scan.hasNextInt()){
  numbers.add(scan.nextInt());
} 
```

如果你想让你的循环停止，比如说你只需要获取 5 个整数，那么你可以这样做：

```
while(scan.hasNextInt()){
  numbers.add(scan.nextInt());
  if(numbers.size() == 5) break;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T12:14:43.160

Scanner 继续扫描直到输入结束，或者直到它无法读取（例如，当在文本中检测到非整数时）。

按回车后按 ctrl + D。您可以将数字分隔任何空白。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T13:04:59.483

如果您只想在 1 行上输入`2,1,6,7,3`，可能会更容易使用`nextLine()`扫描仪：

```
Scanner scan = new Scanner(System.in);
String consoleInput = scan.nextLine(); 
```

一旦你按下回车键，这将终止扫描程序。此时，您有一个字符串中的输入，您必须解析该字符串并取出所有数字。

另请注意，您忘记参数化 ArrayList()。

这是您的源代码的可能改编：

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;
import java.util.Scanner;

public class Main {
  public static void main(String[] args) {

    Scanner scan = new Scanner(System.in);

    String consoleInput = scan.nextLine();

    List<Integer> numbers = new ArrayList<Integer>();

    if (consoleInput.length() > 0 && consoleInput.contains(",")) {

      String[] numbersAsStrings = consoleInput.split(",");

      for (String tNumberAsString : numbersAsStrings) {
        try {
          int tNumber = Integer.parseInt(tNumberAsString);

          numbers.add(tNumber);

        } catch (NumberFormatException nfe) {
          System.out.println(tNumberAsString + " is not a number");
        }
      }

      Collections.sort(numbers);

      System.out.println(numbers);

    } else {
      System.out.println("Nothing to sort!");
      System.out.println(numbers);
    }

  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-30T12:10:23.803

您的代码应该可以工作。您只需要添加一种方法来跳出循环。将扫描的值保存在局部变量中也是一个好主意，以防您需要再次引用它。

也许添加：

```
while(scan.hasNextInt()){
    int i=scan.nextInt();
        if(i==-1)
            break;

    numbers.add(i);
} 
```

# objective-c - 如何播放视频的声音

> ID：11273913
> 
> 赞同：1
> 
> 时间：2012-06-30T12:02:49.357
> 
> 标签：objective-c, ios, xcode

我有一个带有图像的播客，我只想要它的声音。我曾想过我可以开发一个小的 iOS 应用程序来只播放视频中的音乐。问题是我是 Objective-C 的初学者，我希望得到“专业”人士的帮助。我的应用可以实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T12:35:58.630

是的，这是可能的，但我们不会为您完成您的工作。

一旦你学习了基础知识，使用 AV Foundation 框架实现你想要的应该不难。

如果您遇到困难，欢迎您在这里寻求帮助，但请记住： http: [//www.whathaveyoutried.com](http://www.whathaveyoutried.com)。

# php - 如何查看邮箱是否已满？

> ID：11273917
> 
> 赞同：1
> 
> 时间：2012-06-30T12:03:19.513
> 
> 标签：php, validation, email

有什么方法可以在 PHP 脚本中检查电子邮件状态的响应吗？例如 - 如果我有使用类似函数的 php 脚本`$mail->Send()`- 有没有办法在发送此电子邮件之前检查返回状态？它只是检查或发送“假”电子邮件或要知道的东西，例如电子邮件是否已满或其他类似以下错误：

```
Remote host said: 552 4.2.2 User has full mailbox. 
```

或者是这样的：

```
Remote host said: 550 5.1.1 Sorry, no mailbox here by that name. 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T12:08:09.213

我真的怀疑你能做到这一点，因为这意味着不怀好意的人可以扫描服务器以查找电子邮件地址。

# dotnetopenauth - 想要下载 DotNetOpenAuth .zip 文件

> ID：11273922
> 
> 赞同：0
> 
> 时间：2012-06-30T12:03:44.013
> 
> 标签：dotnetopenauth

我想从 DotNetOpenAuth .zip 附带的示例中学习。

我正在尝试从下载 DotNetOpenAuth-4.0.3.12163 .zip 文件

[http://sourceforge.net/projects/dnoa/files/latest/download](http://sourceforge.net/projects/dnoa/files/latest/download)

但下载后，当我尝试解压缩时，我收到 zip 文件无效的消息。

我从 NuGet 链接获得了 dll，但无法获得 DotNetOpenAuth 示例。我们可以在其他地方找到它们吗...？

请建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T16:27:42.320

我刚刚尝试下载，并且“它对我有用”。您可以尝试再次下载以查看它在下载过程中是否损坏？

# android - 以编程方式在LinearLayout中添加三个按钮

> ID：11273925
> 
> 赞同：0
> 
> 时间：2012-06-30T12:04:11.620
> 
> 标签：android, button, android-linearlayout

我正在以编程方式创建一个 LinearLayout，并向这个布局中添加三个按钮，但它们显示在另一个之上。

我怎样才能在一行中显示按钮？

阅读周围我可能明白我需要设置一个 LayoutParams 但我不知道如何..

我试过这个，但它没有成功..

```
LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
            ViewGroup.LayoutParams.MATCH_PARENT,
            ViewGroup.LayoutParams.MATCH_PARENT
);
ll.addView(b1, layoutParams);
ll.addView(b2, layoutParams);
ll.addView(b3, layoutParams); 
```

谢谢你的帮助！

**编辑：**

可能我需要添加更多细节。

我在布局中还有其他东西，但我没关系，我已经为按钮创建了一个额外的布局。

现在按钮排成一行，但它们的宽度不同..：/

我试过这个，但它没有帮助..

```
LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
            ViewGroup.LayoutParams.MATCH_PARENT,
            ViewGroup.LayoutParams.WRAP_CONTENT,
            1f
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T12:11:05.910

```
ll.setOrientation(LinearLayout.HORIZONTAL); 
```

让您在水平线对齐中设置按钮。

但是要为所有三个按钮提供平衡的空间。您必须将`weight`所有三个`Button`对象的属性设置为`1`.

编辑：

对所有按钮执行此操作。

```
LinearLayout.LayoutParams params = button.getLayoutParams();
params.weight = 1;
button.setLayoutParams(params); 
```

为所有按钮设置权重。

问候， 阿基夫·哈米德

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T12:07:39.557

试试这个：

```
ll.setOrientation(LinearLayout.HORIZONTAL); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T12:06:24.480

所有有 MATCH_PARENT 的都应该有 LayoutParams.WRAP_CONTENT 的宽度或高度（根据 LinearLayout 方向至少有一个）

```
LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
            ViewGroup.LayoutParams.MATCH_PARENT,
            ViewGroup.LayoutParams.WRAP_CONTENT 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T20:31:11.160

尝试一下：

```
 LinearLayout gvDivisao = (LinearLayout) findViewById(R.id.gvDivisao);
    LayoutInflater inflater = getLayoutInflater();
    LayoutParams btDivLayoutParams = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 1f);

    Button btDivA = (Button)inflater.inflate(R.layout.button_divisao, null);
    btDivA.setText("A");
    gvDivisao.addView( btDivA, btDivLayoutParams); 
```

# iphone - 用户按下按钮后如何激活运动抖动？

> ID：11273929
> 
> 赞同：0
> 
> 时间：2012-06-30T12:04:42.373
> 
> 标签：iphone, ios, xcode, button, motion

> **可能重复：**
> [我如何在 IBAction（按钮）内放置一个 void（摇动手势）？](https://stackoverflow.com/questions/11264989/how-do-i-put-a-voidshake-gesture-inside-a-ibactionbutton)

您好，我正在创建一个应用程序，我需要帮助。我之前已经问过这个问题 2 次，但我没有得到正确的答案，要么是讲解工作，要么是这个人没有意识到我是一个完全的初学者。所以在回答之前请解释一下答案，因为我对 Xcode 很陌生。所以我有一个按钮说播放，目前当你点击它时，动画会流畅地出现然后结束。我需要改变的是当用户按下播放时，标签上写着摇动设备开始。然后，当用户摇动设备时，标签消失并且动画播放并结束，这就是我目前在 viewcontroller.m 文件中的内容：

```
-(IBAction)startanimation {

animation.animationImages= [NSArray arrayWithObjects:
                                [UIImage imageNamed:@"Frame0.png"],
                                [UIImage imageNamed:@"Frame1.png"],
                                [UIImage imageNamed:@"Frame2.png"],
                                [UIImage imageNamed:@"Frame3.png"],
                                [UIImage imageNamed:@"Frame4.png"],
                                [UIImage imageNamed:@"Frame5.png"],
                                [UIImage imageNamed:@"Frame6.png"],
                                [UIImage imageNamed:@"Frame7.png"],
                                [UIImage imageNamed:@"Frame8.png"],
                                [UIImage imageNamed:@"Frame9.png"],
                                [UIImage imageNamed:@"Frame10.png"],
                                [UIImage imageNamed:@"Frame11.png"],
                                [UIImage imageNamed:@"Frame12.png"],
                                [UIImage imageNamed:@"Frame13.png"],
                                [UIImage imageNamed:@"Frame14.png"], 
                                nil];

    [animation setAnimationRepeatCount:1];
    animation.animationDuration = 1;
    [animation startAnimating];

} 
```

顺便说一句，IBAction:startanimation 是用户按下按钮“播放”时的动作

请考虑我是编码的初学者，如果您有任何问题，请随时提出，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T12:13:48.497

方法

```
- (void)motionBegan:(UIEventSubtype)motion withEvent:(UIEvent *)event;
- (void)motionCancelled:(UIEventSubtype)motion withEvent:(UIEvent *)event;
- (void)motionEnded:(UIEventSubtype)motion withEvent:(UIEvent *)event; 
```

您只需使用以下代码：

```
- (void)motionEnded:(UIEventSubtype)motion withEvent:(UIEvent *)event {
  if (event.type == UIEventSubtypeMotionShake) {
    //Your code here
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T12:15:39.347

在头文件 (.h) 中添加以下内容

```
@interface YourViewController : UIViewController
{
    IBOutlet UILabel *label;
    BOOL canStartAnimation;
} 
```

也改变开始动画

```
-(IBAction)startanimation 
{
    canStartAnimation = YES;
    label.text = @"shake to animate";
} 
```

添加此功能

```
-(void) doTheAnimation {
    animation.animationImages= [NSArray arrayWithObjects:
                                [UIImage imageNamed:@"Frame0.png"],
                                [UIImage imageNamed:@"Frame1.png"],
                                [UIImage imageNamed:@"Frame2.png"],
                                [UIImage imageNamed:@"Frame3.png"],
                                [UIImage imageNamed:@"Frame4.png"],
                                [UIImage imageNamed:@"Frame5.png"],
                                [UIImage imageNamed:@"Frame6.png"],
                                [UIImage imageNamed:@"Frame7.png"],
                                [UIImage imageNamed:@"Frame8.png"],
                                [UIImage imageNamed:@"Frame9.png"],
                                [UIImage imageNamed:@"Frame10.png"],
                                [UIImage imageNamed:@"Frame11.png"],
                                [UIImage imageNamed:@"Frame12.png"],
                                [UIImage imageNamed:@"Frame13.png"],
                                [UIImage imageNamed:@"Frame14.png"], 
                                nil];

    [animation setAnimationRepeatCount:1];
    animation.animationDuration = 1;
    [animation startAnimating];   
    label.text = @"";
} 
```

添加动作开始

```
- (void)motionBegan:(UIEventSubtype)motion withEvent:(UIEvent *)event
{
    if (event.type == UIEventSubtypeMotionShake && canStartAnimation) {
        [self doTheAnimation];
    }
} 
```

# php - PHP - PCLZIP 从字符串添加文件

> ID：11273934
> 
> 赞同：2
> 
> 时间：2012-06-30T12:05:02.897
> 
> 标签：php, zip, pclzip

PCLZIP 是一个很棒的库，但不幸的是它的文档记录很差。我正在使用它来支持禁用 ZipArchive 的服务器（或不支持 php 版本）

我具有将上传的文件（一个一个）添加到 ZIP 存档的功能。如果存档不存在，它会创建一个，如果存档存在，它只是添加新文件。

我遇到的问题是添加 TXT 文件的功能，该文件基于存档中的评论。（该函数读取先前准备好的注释，并应从字符串创建一个 TXT 文件并插入到存档中。）

我似乎找不到从字符串覆盖文件的函数（或者我不知道如何使用它）。

我可以创建它 `PCLZIP_ATT_FILE_NAME`，但不知何故，当我运行该函数时，它会创建一个新`.txt`文件（具有相同的文件名！）每次将文件添加到存档（而不是覆盖现有文件）我尝试使用`PCLZIP_ATT_FILE_NEW_FULL_NAME`-但我找不到在哪里将参数提供给它需要覆盖的文件..

功能在这里：（对不起，如果它很长..）

```
 $archive = new PclZip($zipname);

        if (!file_exists($zipname)){  //The Archive already exists - let´s just ADD new files.

            $comment = $comment_head . $comment_add ;

            $string_content = $comment;

            $v_list = $archive->create($file,
                                        PCLZIP_OPT_ADD_PATH, $sitename,
                                        PCLZIP_OPT_COMMENT, $comment,
                                        PCLZIP_OPT_REMOVE_ALL_PATH);

                                        $prop = $archive->properties();
                                        $prop = $prop['comment'];
                                        if (!$prop) {$prop = $comment;}

            $list = $archive->add(array(
                                   array( 
                                   PCLZIP_ATT_FILE_NAME => $string_file,
                                   PCLZIP_ATT_FILE_CONTENT => $prop,
                                   PCLZIP_ATT_FILE_NEW_FULL_NAME => $string_file
                                         )
                                   )
                                   );

                      if ($v_list == 0) {
                        die("Error : ".$archive->errorInfo(true));
                      }

        } else { 

// No Archive already exists - Create with new file .

        $comment_add =  $meta['file'] . PHP_EOL . PHP_EOL ;/*.$comment_foot*/ ;

        $b_list = $archive->add($file,
                                    PCLZIP_OPT_ADD_PATH, $sitename,
                                    PCLZIP_OPT_ADD_COMMENT, $comment_add,
                                    PCLZIP_OPT_REMOVE_ALL_PATH);

                                $prop = $archive->properties();
                                        $prop = $prop['comment'];
                                        if (!$prop) {$prop = $comment;}

            $list_6 = $archive->add(array(
                                   array( PCLZIP_ATT_FILE_NAME => $string_file,
                                        PCLZIP_ATT_FILE_CONTENT => $prop
                                         )
                                   )
                                   );

                  if ($b_list == 0) {
                    die("Error : ".$archive->errorInfo(true));
                  }

      } 
```

所以 - 任何人都知道如何使用 PCLzip 从字符串（而不是文件..）覆盖文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-05T23:03:19.157

```
$archive = new PclZip("archive.zip");
$v_filename = "new_file.txt";
$v_content = "This is the content of file one\nHello second line";
$list = $archive->create(array(
                               array( PCLZIP_ATT_FILE_NAME => $v_filename,
                                      PCLZIP_ATT_FILE_CONTENT => $v_content
                                     )
                               )
                         );
if ($list == 0) {
  die("ERROR : '".$archive->errorInfo(true)."'");
} 
```

[http://www.phpconcept.net/pclzip/news/3-pclzip-26](http://www.phpconcept.net/pclzip/news/3-pclzip-26)

# android - Android自定义控件这可能吗？

> ID：11273936
> 
> 赞同：2
> 
> 时间：2012-06-30T12:05:13.897
> 
> 标签：android, android-layout, view, custom-controls, android-custom-view

我从昨天开始就在搜索这个。我在许多活动中都有一些显示用户名和登录名的代码。我不想将布局中的代码复制并粘贴到每个 Activity 中，但我想要一些类似于 .NET 中的用户控件的东西。我已经阅读了很多关于自定义控件的主题，但是或者我不理解它，或者它不可能这样做（我不相信那个选项）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-30T12:09:33.523

是的，有可能。看看这个样本。它是自定义数字键盘或自定义视图或自定义用户控件。自定义它并创建您自己的用户控件：

```
import java.util.ArrayList;

import org.mabna.order.R;

import android.app.Activity;
import android.content.Context;
import android.text.InputType;
import android.util.AttributeSet;
import android.view.LayoutInflater;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.LinearLayout;

// this NumericKeyboard works only for EditTexts which 
// have a tag with "usesNumericKeyboard" key and value of "true"
// use tag with "ignoreMeForNumericKeyboardTouchListener" key and 
// value "true" for controls you do not want to set its touchListener 
public class NumericKeyboard extends LinearLayout implements OnTouchListener {

    private View mainView = null;
    private EditText currentEditText;
    private Button btn0;
    private Button btn1;
    private Button btn2;
    private Button btn3;
    private Button btn4;
    private Button btn5;
    private Button btn6;
    private Button btn7;
    private Button btn8;
    private Button btn9;
    private ImageButton btnBackSpace;
    private ImageButton btnDeleteAll;

    public NumericKeyboard(Context context) {
        super(context);
    }

    public NumericKeyboard(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    protected void initialize() {
        LayoutInflater layoutInflater = (LayoutInflater) getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view = layoutInflater
                .inflate(R.layout.view_numeric_keyboard, this);

        btn0 = (Button) view.findViewById(R.id.btn0);
        btn1 = (Button) view.findViewById(R.id.btn1);
        btn2 = (Button) view.findViewById(R.id.btn2);
        btn3 = (Button) view.findViewById(R.id.btn3);
        btn4 = (Button) view.findViewById(R.id.btn4);
        btn5 = (Button) view.findViewById(R.id.btn5);
        btn6 = (Button) view.findViewById(R.id.btn6);
        btn7 = (Button) view.findViewById(R.id.btn7);
        btn8 = (Button) view.findViewById(R.id.btn8);
        btn9 = (Button) view.findViewById(R.id.btn9);
        btnBackSpace = (ImageButton) view.findViewById(R.id.btnBackSpace);
        btnDeleteAll = (ImageButton) view.findViewById(R.id.btnDeleteAll);

        btn0.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                editCurrentText(v, "0");
            }
        });
        btn1.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                editCurrentText(v, "1");
            }
        });
        btn2.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                editCurrentText(v, "2");
            }
        });
        btn3.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                editCurrentText(v, "3");
            }
        });
        btn4.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                editCurrentText(v, "4");
            }
        });
        btn5.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                editCurrentText(v, "5");
            }
        });
        btn6.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                editCurrentText(v, "6");
            }
        });
        btn7.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                editCurrentText(v, "7");
            }
        });
        btn8.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                editCurrentText(v, "8");
            }
        });
        btn9.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                editCurrentText(v, "9");
            }
        });
        btnBackSpace.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                editCurrentText(v, "<");
            }
        });
        btnDeleteAll.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                editCurrentText(v, "D");
            }
        });

        if (mainView == null && !this.isInEditMode()) {
            setTouchListenerForChildViews();
            this.setVisibility(GONE);
        }
    }

    protected void editCurrentText(View v, String character) {
        if (currentEditText != null) {
            if (character.compareTo("<") == 0) {
                String text = currentEditText.getText().toString();
                if (text.length() == 0) {
                } else if (text.length() == 1) {
                    currentEditText.setText("");
                } else {
                    text = text.substring(0, text.length() - 1);
                    currentEditText.setText(text);
                }
            } else if (character.compareTo("D") == 0) {
                currentEditText.setText("");
            } else {
                String text = currentEditText.getText().toString();
                text += character;
                currentEditText.setText(text);
            }
        }
    }

    // @Override
    // protected void onLayout(boolean changed, int l, int t, int r, int b) {
    //
    // super.onLayout(changed, l, t, r, b);
    // }

    public void setTouchListenerForChildViews() {
        final Activity act = (Activity) getContext();
        mainView = act.getWindow().getDecorView()
                .findViewById(android.R.id.content);

        if (mainView == null)
            return;

        ArrayList<View> queue = new ArrayList<View>();
        queue.add((View) mainView);

        while (!queue.isEmpty()) {
            View v = queue.remove(0);
            if (v instanceof EditText && v.getTag(R.id.usesNumericKeyboard) == Boolean
                    .valueOf(true)) {
                ((EditText) v).setInputType(InputType.TYPE_NULL);
                ((EditText) v).setCursorVisible(true);
                v.setOnFocusChangeListener(new OnFocusChangeListener() {
                    @Override
                    public void onFocusChange(View v, boolean hasFocus) {
                        if (hasFocus)
                        {
                            for (NumericKeyboard numericKeyboard : arrNumericKeyboard) {
                                numericKeyboard.currentEditText = (EditText) v;
                                numericKeyboard.setVisibility(View.VISIBLE);
                            }
                        }
                    }
                });
            }

            if (v instanceof NumericKeyboard) {
            } else {
                if (v.getTag(R.id.ignoreMeForNumericKeyboardTouchListener) != Boolean
                        .valueOf(true)) {
                    v.setOnTouchListener(this);
                }
                if (v instanceof ViewGroup) {
                    ViewGroup vg = (ViewGroup) v;
                    for (int i = 0; i < vg.getChildCount(); i++) {
                        View vChild = vg.getChildAt(i);
                        queue.add(vChild);
                    }
                }
            }
        }
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if (v instanceof EditText && v.getTag(R.id.usesNumericKeyboard) == Boolean
                .valueOf(true)) {
            for (NumericKeyboard numericKeyboard : arrNumericKeyboard) {
                numericKeyboard.currentEditText = (EditText) v;
                numericKeyboard.setVisibility(View.VISIBLE);
            }
        } else {
            for (NumericKeyboard numericKeyboard : arrNumericKeyboard) {
                numericKeyboard.setVisibility(View.GONE);
            }
        }
        return false;
    }

    static ArrayList<NumericKeyboard> arrNumericKeyboard =
            new ArrayList<NumericKeyboard>();

    public static void registerNumericKeyboard(
            NumericKeyboard numericKeyboard) {

        numericKeyboard.initialize();

        arrNumericKeyboard.add(numericKeyboard);
    }

    public static void unregisterNumericKeyboard(
            NumericKeyboard numericKeyboard) {
        arrNumericKeyboard.remove(numericKeyboard);
    }

    public static void showForEditText(EditText editText)
    {
        for (NumericKeyboard numericKeyboard : arrNumericKeyboard) {
            numericKeyboard.setVisibility(View.VISIBLE);
            numericKeyboard.currentEditText = editText;
        }
    }

    public static void hide()
    {
        for (NumericKeyboard numericKeyboard : arrNumericKeyboard) {
            numericKeyboard.setVisibility(View.GONE);
        }
    }
} 
```

其布局为 view_numeric_keyboard.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/background06"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/btn7"
            android:layout_width="50dip"
            android:layout_height="50dip"
            android:text="7" >
        </Button>

        <Button
            android:id="@+id/btn8"
            android:layout_width="50dip"
            android:layout_height="50dip"
            android:text="8" >
        </Button>

        <Button
            android:id="@+id/btn9"
            android:layout_width="50dip"
            android:layout_height="50dip"
            android:text="9" >
        </Button>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/btn4"
            android:layout_width="50dip"
            android:layout_height="50dip"
            android:text="4" >
        </Button>

        <Button
            android:id="@+id/btn5"
            android:layout_width="50dip"
            android:layout_height="50dip"
            android:text="5" >
        </Button>

        <Button
            android:id="@+id/btn6"
            android:layout_width="50dip"
            android:layout_height="50dip"
            android:text="6" >
        </Button>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout3"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/btn1"
            android:layout_width="50dip"
            android:layout_height="50dip"
            android:text="1" >
        </Button>

        <Button
            android:id="@+id/btn2"
            android:layout_width="50dip"
            android:layout_height="50dip"
            android:text="2" >
        </Button>

        <Button
            android:id="@+id/btn3"
            android:layout_width="50dip"
            android:layout_height="50dip"
            android:text="3" >
        </Button>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout4"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <ImageButton
            android:id="@+id/btnBackSpace"
            android:layout_width="50dip"
            android:layout_height="50dip"
            android:scaleType="fitCenter"
            android:src="@drawable/backspace"
            android:text="-" />

        <Button
            android:id="@+id/btn0"
            android:layout_width="50dip"
            android:layout_height="50dip"
            android:text="0" />

        <ImageButton
            android:id="@+id/btnDeleteAll"
            android:layout_width="50dip"
            android:layout_height="50dip"
            android:scaleType="fitCenter"
            android:src="@drawable/remove02"
            android:text="-" />

    </LinearLayout>

</LinearLayout> 
```

在您的活动布局中使用它：

```
<org.mabna.order.ui.NumericKeyboard
                        android:id="@+id/numericKeyboard1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content" >
                    </org.mabna.order.ui.NumericKeyboard> 
```

# android - GCM：java.lang.noclassdeffounderror：com.google.android.gcm.GCMRegistrar

> ID：11273938
> 
> 赞同：20
> 
> 时间：2012-06-30T12:05:25.867
> 
> 标签：android, push-notification

我正在尝试使用以下代码将设备注册到 GCM：

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    GCMRegistrar.checkDevice(this);
    // the following function can be removed when deploying the app
    GCMRegistrar.checkManifest(this);

    final String regId = GCMRegistrar.getRegistrationId(this);
    if (regId.equals("")) {
      GCMRegistrar.register(this, SENDER_ID);
    } else {
      Log.v(TAG, "Already registered");
    } 
```

我已经导入了 import com.google.android.gcm.GCMRegistrar;
并且还将 GCM.jar 添加到我在 Eclipse 中的构建路径中，这是我通过 sdk 下载获得的

请帮忙 ！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-16T11:47:03.097

在更新的 ADT（高于 ADT 17）中，您必须将 jar 文件放在`libs`文件夹中，而不是`lib`. 因此，请确保将`gcm.jar`文件放入`libs`而不是`lib`文件夹。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-07-05T12:34:24.713

只需转到项目属性-> java构建路径->“订购和导出”现在在您添加的jar文件“GCM.jar”上打勾

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-05-30T13:01:00.370

我`gcm.jar`的已经在库中了，所以这对我来说不是文件夹命名问题..

对于有问题的项目，我必须转到`Right Click`> `Build Path`> `Configure Build path...`，并删除了以下内容：

*   文件夹/包之外的任何挥之不去的文件
*   `Android Private Libraries`
*   任何包含“参考”一词的捆绑包（您可能没有）

您的项目中可能会出现很多“错误”，因此请重新启动 Eclipse 并让它清理。一旦它清理你将没有错误。运行你的项目和中提琴。

感谢**DLew**的回答。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-07T20:26:05.907

在您的项目文件夹中创建一个文件夹**libs**并将 gcm.jar 放入其中。然后使用在**配置构建路径**选项中**添加外部 jar**将其添加到您的类路径中。

 *** * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-05-21T22:23:47.737

您必须将 gcm.jar 文件放在*libs*中，然后转到项目*Properties > Java Build Path > Libraries并使用**Add External JARs...*将其添加到您的路径中，然后在*Order and Export*中检查 gcm.jar 并按*OK*。那应该工作

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-03T09:09:51.170

Make sure that the gcm jar file is in the right libs folder and added into the java build path at your project properties.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-05-02T04:44:02.417

我也遇到了同样的问题，在我的 libs 文件夹中添加`android-support-v4.jar`并`gcm.jar`没有问题后发现它的工作就像一个魅力

谢谢

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-06-11T07:51:57.830

在我的项目中更新 SDK 后，我遇到了同样的问题。它对我有帮助：我只是在“Android 工具”中“添加支持库”。希望这对其他人有帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-03T01:10:10.863

SENDER_ID 字段应该是您创建 google api 项目时的项目 ID。阅读本文开头：http: [//developer.android.com/guide/google/gcm/gs.html#libs](http://developer.android.com/guide/google/gcm/gs.html#libs)

TAG 也应该是一个字符串 -> ""tag Name"

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-01-05T10:48:04.727

您好您正在使用旧的 GCM 实现使用 [https://developers.google.com/cloud-messaging/android/start上提供的新实现](https://developers.google.com/cloud-messaging/android/start)**

# php - Firefox 中的 Wordpress 博客溢出问题

> ID：11273940
> 
> 赞同：-1
> 
> 时间：2012-06-30T12:05:59.483
> 
> 标签：php, css, wordpress, html

在 Firefox 中，我的网站超出了页面边界。

这是它在 Firefox 上的截图…… [http://www.anthonysabilities.com/firefox-screenshot.jpg](http://www.anthonysabilities.com/firefox-screenshot.jpg)

这就是它在所有其他浏览器上的样子。 [http://www.anthonysabilities.com/safari-screenshot.jpg](http://www.anthonysabilities.com/safari-screenshot.jpg)

如您所见，它在页面下方延伸得很远，并且存在溢出窗口的问题。我希望访问者不必滚动窗口本身，只需滚动表中的可滚动 div。

这是我主页的代码：

```
 <?php

/*
 * @template  Mystique
 * @revised   October 30, 2011
 * @author    digitalnature, http://digitalnature.eu
 * @license   GPL, http://www.opensource.org/licenses/gpl-license
 */

// The home or blog page template.
// By default, the newest posts are listed here.

?><?php atom()->template('header'); ?><div style="width:100%;height:100%;overflow:hidden;"><div align="center"><img src="http://www.anthonysabilities.com/pictures-blog/background.jpg" class="bg" width="100%" height="100%" alt="" /></div>
<table style="width:59.5238095238095%;max-height:1010px;align:center;margin-top:1%;margin-left:auto;margin-right:auto;height:94.6478873239437%;border-collapse: collapse;">
<tr>
                <td rowspan="4" style="width:1.875%;height:97.7678571428571%;vertical-align:top;overflow:hidden;margin:0;padding:0;min-width:15px;"><img src="http://www.anthonysabilities.com/pictures-blog/blogconsole-far-left.png" style="display:block;margin:0;padding:0;" width="100%" height="100%" alt="" /></td>
        <td colspan="3" style="height:2.22321418571429%;width:96.25%;overflow:hidden;margin-top:0px;padding-top:0px;margin-bottom:0px;padding-bottom:0px;max-height:25px;"><img src="http://www.anthonysabilities.com/pictures-blog/blogconsole-top.png" style="display:block;margin:0;padding:0;max-height:25px;" width="100%" height="100%" alt="" /></td>
                <td rowspan="4" style="width:1.875%;height:97.7678571428571%;vertical-align:top;overflow:hidden;margin:0;padding:0;min-width:15px;"><img src="http://www.anthonysabilities.com/pictures-blog/blogconsole-far-right.png" style="display:block;margin:0;padding:0;" width="100%" height="100%" alt="" /></td>
      </tr>
              <tr>
                <td rowspan="3" style="width:18.75%;height:95.5357142857143%;background-image: url('http://www.anthonysabilities.com/pictures-blog/menubg.png');vertical-align:top;margin:0;padding:0;min-width:150px;"><div style="width:100%;height:100%;overflow:hidden;"><?php if ( !function_exists('dynamic_sidebar')
|| !dynamic_sidebar('Menu') ) : ?>
                <?php endif; ?></div></td>
                <td rowspan="3" style="width:1.875%;height:95.5357142857143%;vertical-align:top;margin:0;padding:0;min-width:15px;"><img src="http://www.anthonysabilities.com/pictures-blog/blogconsole-center.png" onload="blinklink()" onunload="stoptimer()" style="display:block;margin:0;padding:0;" width="100%" height="100%" alt="" /></td>
                <td style="height:11.9047619047619%;width:75.625%;margin:0;padding:0;"><a href="http://www.anthonysabilities.com/blog/"><img src="http://www.anthonysabilities.com/pictures-blog/optimistguide-blog-title.jpg" style="display:block;margin:0;padding:0;" width="100%" alt="" /></a></td>
              </tr>
              <tr>
                <td style="height:1.875%;width:75.625%;margin:0;padding:0;vertical-align:top;"><img src="http://www.anthonysabilities.com/pictures-blog/blogconsole-divider.png" style="display:block;margin:0;padding:0;" width="100%" height="100%" alt="" /></td>
              </tr>
              <tr>
                <td style="padding:0;width:75.625%;height:78.8690476190476%;min-width:605px;" id="post-td">
<div style="left:0;top:0;height:100%;width:100%;overflow-y:scroll;overflow-x:hidden;background-image:url('http://www.anthonysabilities.com/pictures-blog/post-bg.jpg');" id="scrollTest" tabindex="1">
      <div id="primary-content" style="padding-bottom:0px;padding-left:5px;margin-top:-25px;">
        <div class="blocks clear-block">

          <?php atom()->action('before_primary'); ?><div class="ab-player" style="margin-bottom:-10px;" data-boourl="http://audioboo.fm/boos/806589-about-the-optimist-s-guide-to-life/embed"><a href="http://audioboo.fm/boos/806589-about-the-optimist-s-guide-to-life">listen to &lsquo;About The Optimist's Guide to Life&rsquo; on Audioboo</a></div><script type="text/javascript">(function() { var po = document.createElement("script"); po.type = "text/javascript"; po.async = true; po.src = "http://d15mj6e6qmt1na.cloudfront.net/assets/embed.js"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(po, s); })();</script>

<table width="96.6101694915254%" height="41.5094339622642%" style="align:center;margin-left:auto;margin-right:auto;background-color:#000;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;"><tr><td width="33.33%" height="100%" style="background-color:#bce4ff;border:1px solid #FFF;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;overflow:hidden;min-width:190px;min-height:220px;"><div style="margin-left:-2px;margin-bottom:-20px;"><?php if ( !function_exists('dynamic_sidebar')
|| !dynamic_sidebar('Subscribe') ) : ?>
                <?php endif; ?></div></td>

<td width="33.33%" height="100%" style="background-color:#000;border:2px solid #72ccff;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;overflow:hidden;min-width:190px;min-height:220px;text-align:center;color:#FFF;"><img src="http://www.anthonysabilities.com/pictures-blog/themesong.jpg" width="78.9473684210526%"><audio controls="controls" style="width:90%;height:7.2727272727273%;">
  <source src="http://www.anthonysabilities.com/pictures-blog/DO-ME-A-FAVOR_final-blog.ogg" type="audio/ogg" />
  <source src="http://www.anthonysabilities.com/pictures-blog/DO-ME-A-FAVOR_final-blog.mp3" type="audio/mp3" />
  Your browser does not support the audio tag.
</audio>
<p style="margin-top:0px;margin-bottom:0px;">(sung by <a href="http://www.facebook.com/nalanisarinamusic">Nalani & Sarina</a>)</p><a href="http://www.anthonysabilities.com/blog/yas/"><img src="http://www.anthonysabilities.com/pictures-blog/youarestrongerbutton.jpg" width="78.9473684210526%" style="border: 1px solid #FFF;"></a></td>

<td width="33.34%" height="100%" style="background-color:#bce4ff;border:1px solid #FFF;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;overflow:hidden;min-width:190px;min-height:220px;text-align:center;"><a href="http://www.anthonysabilities.com/blog/writer-login/#register"><img src="http://www.anthonysabilities.com/pictures-blog/writeformyblog.png" width="89.4736842105263%"></a><a href="http://www.anthonysabilities.com/blog/writer-login/#login"><img src="http://www.anthonysabilities.com/pictures-blog/loginbutton.jpg" width="89.4736842105263%"></a></td></tr></table>

          <?php if(have_posts()): ?>
          <div class="posts clear-block">
<?php while(have_posts()) atom()->template('teaser'); ?>
          </div>

          <?php atom()->pagination(); ?>

          <?php endif; ?>

          <?php atom()->action('after_primary'); ?>

        </div>
      </div>
    </td>
              </tr>
              <tr>
                <td colspan="5" style="width:100%;height:2.22321428571429%;background-image: url('http://www.anthonysabilities.com/pictures-blog/post-bg.jpg');margin:0;padding:0;"><img src="http://www.anthonysabilities.com/pictures-blog/blogconsole-bottom.png" style="display:block;margin:0;padding:0;" width="100%" height="100%" alt="" /></td></tr></table></div><?php atom()->template('footer'); ?> 
```

我在头文件中也有这个：

```
<style type="text/css">
 body {width:100%; height:100%; overflow: hidden; overflow: -moz-scrollbars-vertical; padding:0; margin:0; border:0;font-size:80%}
 html {width:100%; height:100%; overflow:hidden;}

  body.extraWide {font-size:115%;}
  body.wide {font-size:95%;}

*>#post-td {max-height:530px;}
*>#scrollTest {max-height:530px;}
</style> 
```

任何有助于使我的网站在 Firefox 中与 Safari 和任何其他浏览器中看起来相同的帮助将不胜感激。谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:29:39.633

这种情况发生在 Firefox 而不是其他浏览器的原因是您在影响滚动的 css 中使用了 Mozilla 供应商前缀 -moz。

尝试删除它。

# .net - 关闭应用程序后 SQL Server Compact 数据丢失

> ID：11273942
> 
> 赞同：0
> 
> 时间：2012-06-30T12:06:16.430
> 
> 标签：.net, sql, linq-to-sql

我正在开发一个具有 SQL Server 紧凑型数据库的应用程序（我在 Visual Studio Server Explorer 中创建了该数据库）。

现在每次我打开应用程序都很顺利，我也可以插入记录并检索它们，但是一旦我关闭我的应用程序，它们就会消失。

这是为什么？有没有我错过的配置选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T12:48:59.170

我发现了问题，名称更改有点问题:) 无论如何谢谢

# c++ - 通过将“goto”转换为分支进行优化

> ID：11273950
> 
> 赞同：1
> 
> 时间：2012-06-30T12:07:34.577
> 
> 标签：c++, c, performance, caching, optimization

我有以下代码（这是用于演示的部分伪代码）：

```
void foo(...){

  //some code here
  do{
     min_item = _MAX_VALUE;
     //some code here also

    if (min_item == _MAX_VALUE)
       break;

    if (smaller_item_x == min_item){
FIRST_IS_SMALLER:
       global_queue[size++] = smaller_item_x;    
       if (next_item_x!=0){
            smaller_item_x= next_item_x;
            if (smaller_item_x > smaller_item_y)
               goto SECOND_IS_SMALLER;
       }
    }else{
SECOND_IS_SMALLER:
       global_queue[size++] = smaller_item_y;    
       if (next_item_y!=0){
            smaller_item_y= next_item_y;
            if (smaller_item_y > smaller_item_x)
               goto FIRST_IS_SMALLER;
       }
    }
  }while(true) 
```

据我所知，goto 在汇编程序中被翻译为 jmp，我有兴趣通过将第二个 goto 更改为类似于分支的内容（较短的命令与短跳转）来提高此过程的性能，我可能会遗漏一些东西，它可能是微不足道的，所以我很抱歉。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-30T12:13:15.033

这些天来猜测 C 编译器是非常困难的。他们经常编译成比人们直接编码更严格的汇编程序。他们也不向程序员提供将他们的优化导向这种程度的控制。

如果您想要这种级别的控制，您可能必须用汇编程序编写，而且您的代码很有可能比 C 编译器的慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T14:32:36.663

这可能不是您正在寻找的答案，但它不适合评论，因此我将其粘贴在这里。

这段代码应该和你的一样，只是没有`goto`s，也没有引入额外的间接性。有一个额外的检查和一个`switch`on `branchId`，但编译器应该能够将它优化为一个单一的访问，甚至可能把它放在一个寄存器中。

```
int branchId = smaller_item_x == min_item;
while (branchId >= 0) {
    switch (branchId) {
    case 0:
        global_queue[size++] = smaller_item_y;    
        if (next_item_y != 0) {
            branchId = (smaller_item_y=next_item_y) > smaller_item_x ? 1 : -1;
        }
        break;
    case 1:
        global_queue[size++] = smaller_item_x;    
        if (next_item_x != 0) {
            branchId = (smaller_item_x=next_item_x) > smaller_item_y ? 0 : -1;
        }
        break;
    }
} 
```

# visual-studio-2010 - 无法在 Windows 8 Release Preview 上使用 Visual Studio 2010 打开选项菜单

> ID：11273952
> 
> 赞同：-1
> 
> 时间：2012-06-30T12:07:51.303
> 
> 标签：visual-studio-2010, windows-8

当我打开 VS2010 时，我无法打开任何菜单选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T12:29:25.380

尝试以兼容模式打开 Visual Studio。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T02:21:27.267

到目前为止，我没有遇到任何问题。

在 Windows 8 RP 上使用 Visual Studio 2010 的原因是什么？视觉工作室 2012 应该足够了，但它可能仍然有一些错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T17:06:58.623

奇怪的是 VS2010 在 Windows 8 中相应地工作。我没有采取任何措施来纠正这个问题。

# ruby-on-rails - 在 rails 中显示查询结果

> ID：11273953
> 
> 赞同：1
> 
> 时间：2012-06-30T12:08:03.197
> 
> 标签：ruby-on-rails, ruby, activerecord

所以在我的模型中，一个用户通过分配有很多角色，一个角色可以通过分配有很多用户。我已经设法启动并运行创建新分配的功能，但我想在用户索引页面（列出所有用户）上显示用户可以执行的所有角色。

到目前为止，我的用户存根视图代码是：

```
 <td><%= user.email %></td>
    <td><%= user.phone %></td>
    <td><%= user.roles.select("description")%></td> 
```

这里的问题是，输出不是显示角色的描述，而是：

# 

任何指针将不胜感激。先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T12:10:00.167

将关系映射到字符串数组中，这样：

```
<td><%= user.roles.select("description")%></td> 
```

变成：

```
<td><%= user.roles.select("description").map &:description %></td> 
```

或者：

```
<td><%= user.roles.select("description").map(&:description).join(", ") %></td> 
```

将其加入一个以逗号分隔的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T12:11:06.133

这里是

```
user.roles.select("description").map(&:description).join(", ") 
```

# java - Java Json / Gson 将 json 编码的字符串放入 jsonObject 没有字符串转义

> ID：11273957
> 
> 赞同：1
> 
> 时间：2012-06-30T12:08:17.933
> 
> 标签：java, json, reference, gson

我首先创建一个Json字符串

```
String myJsonString = new Gson().toJson(myElement); 
```

这很好用。之后，我想将此字符串添加到另一个大 jsonObject 以将其与其他变量一起发送到后端。

```
jsonObject.put("Tests",myJsonString); 
```

但是使用这行代码，特殊字符将被转义，后端的解析器没有得到它。我怎样才能避免它，myJsonString 将再次被序列化？

```
jsonObject.put("Tests",myElement); 
```

不起作用，因为在那之后 jsonObject 中只有引用但没有值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T12:22:24.597

```
jsonObject.put("Tests", new JSONObject(myJsonString)); 
```

（假设 jsonObject 是[org.json.JSONObject](http://www.json.org/javadoc/org/json/JSONObject.html)类型）

# javascript - 用于执行 JSON 结构的 Javascript 类

> ID：11273966
> 
> 赞同：1
> 
> 时间：2012-06-30T12:09:46.503
> 
> 标签：javascript

JavaScript 相对较新，所以想知道实现以下要求的最佳方法是什么。我想创建 JSON 对象（RPC 请求对象），并且需要强制执行一些结构。据我所知，JS 是动态语言，因此我可以随时向对象添加任何类型。但是，我喜欢定义一个类，我可以填充它来构造 JSON 请求。

```
var RecReq = {
            ID:{},
            HeaderLevel:{},
            Content:{} //Content object goes here
        },
        HeaderLevel = {
            HeaderID:{},
            Note:{}
        },
        Content = {
            Item: [] //Array of Item goes here
        },
        Item = {
            IDs:[]
        };

    function ReceiveObj() {
        this.RecReq = RecReq,
            this.HeaderLevel = HeaderLevel,
            this.Content = Content,
            this.Item = Item
    };
    return new ReceiveObj(); 
```

我确信上面的代码有很多问题。我不认为该对象是在初始化数组的情况下创建的。在返回的对象上，我无法执行`push()`将 item 插入 Content 的操作。

你会如何处理这个问题。您是动态创建一个对象，还是更好地定义一个强制执行某些结构的对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T12:54:51.783

如果正如您的代码所建议的那样，您希望您的实例继承外部对象，一种方法是分配“类”的原型（请注意 JS 中的类术语 - 它不是 Java 等意义上的类) 到对象。

```
var obj = { 
    prop_1: 'foo',
    prop_1: 'bar'
}
function Something() {
    alert(this.prop_1); //alerts "foo"
}
Something.prototype = obj;
var something = new Something(); 
```

这只是一种方式。有许多用于控制继承的模式（以及其他模式可以实现您想要的，甚至无需接近继承的概念）。

至于`push()`不工作，在你的代码中，`Content`是一个对象，而是原型`push()`的一个方法。`Array`换句话说，你只能`push()`放入一个数组。也许你的意思是`Content.Item`，这是一个数组。

最后，我会避免使用大写名称。在 JavaScript 中，这往往只使用类模拟中使用的函数（如您的 ReceiveObj）来完成，以表示它们应该被实例化，而不仅仅是调用。

# objective-c - 使用 UISlider 更改 CGFloat 或类似的？

> ID：11273973
> 
> 赞同：0
> 
> 时间：2012-06-30T12:10:11.783
> 
> 标签：objective-c, cocoa-touch

好吧，我对编程完全陌生，但我觉得我很快就学会了，我直接进入了 Objective-C，我知道有些人会说这不明智，但无论如何。

继承人，在我的 ViewController.m 我有：

```
@implementation ViewController

CGPoint Destination;  --->irrelevant for this question just giving a layout
CGFloat xamt, yamt;  ---> irrelevant for this question just giving a layout
CGFloat speed = 30; 
```

所以我的问题是，我将如何/在哪里放置代码以获取 UISlider 以更改速度值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T12:38:48.577

实例化 an`UISlider`并将其添加到当前显示的视图之一（我假设您使用视图控制器，它是`self`）：

```
UISlider *s = [[UISlider alloc] initWithFrame:CGRectMake(20, 10, 280, 44)];
[s addTarget:self action:@selector(sliderValueChanged:) forControlEvents:UIControlEventValueChanged];
[self.view addSubview:s];
[s release]; 
```

然后实现滑块的操作方法（仍然在您的视图控制器的类中）：

```
- (void)sliderValueChanged:(UISlider *)s
{
    speed = 30 * s.value;
} 
```

希望这可以帮助。

Ps : 好建议：认真地，先学习 C 并掌握它，然后再做认真的 Objective-C，否则你迟早会感到困惑，浪费用户的 RAM 并不好玩 :)

# jquery - Highcharts：如何将工具提示移动到外部 DIV？

> ID：11273974
> 
> 赞同：2
> 
> 时间：2012-06-30T12:10:17.560
> 
> 标签：jquery, highcharts

我想使用这样的功能，我可以根据鼠标指针在柱形图中的位置或移动来移动工具提示，而不是在折线图中。

在 jQuery 中我们有`mousemove`函数，但在 Highchart 中没有这样的函数。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T17:29:45.970

您可以将工具提示内容移动到您想要的任何 div

```
 tooltip:{
                 formatter : function() {
                 $("#date").html( Highcharts.dateFormat('%m/ %e/ %Y', this.x));
                 $("#data").html(this.y) ;
                         return false ;
                         }
                    }, 
```

然后您可以使用 jquery 将任何事件应用于这些选择器

# popup - 如何更改美德玛特 2 添加到购物车弹出文本

> ID：11273975
> 
> 赞同：1
> 
> 时间：2012-06-30T12:10:19.573
> 
> 标签：popup, window, virtuemart

基本上如上，

我有一个 Virtuemart 2 在线网站，当它弹出时启用了“添加到购物车”弹出功能，一切都很好

查看购物车并继续浏览链接，它们之间没有分隔符，我想要

查看购物车 | 继续浏览

我看过 vmprices.js 但不知道:(

有人可以阐明一下吗？

谢谢！

缺口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T05:39:27.773

您必须查看这些文件以自定义该弹出窗口：

```
com_virtuemart/controllers/cart.php

components/com_virtuemart/assets/js/vmprices.js 
```

谢谢

贾弗·巴尔蒂

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T12:10:25.110

The actual text that is shown to the visitor is located in:

> mysite.com/languages/en-GB.com_virtuemart.ini

Which can be changed, but should ideally be overridden.

This is harder to find than it should be because Dreamweaver does not search .ini files. Use the OS to search.

Additionally, the link for the "continue shopping" button can be changed by overriding the:

> components/com_virtuemart/views/cart/tmpl/padded.php

file.

# javascript - 使用 .on() 有效地镜像值

> ID：11273978
> 
> 赞同：0
> 
> 时间：2012-06-30T12:10:44.507
> 
> 标签：javascript, jquery

我有两张桌子。我想将值从一个表镜像到另一个表。我目前的实现是这样的：

```
 <script type="text/javascript">  
        $("#textfield1, #textfield2, #textfield3, #select1").on("keyup keypress blur click change", function(event){        
            $("input[type='text']#copytextfield1").val( $("[type='text']#textfield1").val() );
            $("input[type='text']#copytextfield2").val( $("[type='text']#textfield2").val() );
            $("input[type='text']#copytextfield3").val( $("[type='text']#textfield3").val() );
            $("input[type='text']#copytextfield4").val( $("select#select1").val() );        
        });         
    </script> 
```

如您所见，名称非常相似。唯一的区别是镜像元素具有“副本”。你能提出一些提高效率的方法吗？也许利用命名约定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T12:17:05.553

可以这样做：

```
 <script type="text/javascript">  
        $("#textfield1, #textfield2, #textfield3, #select1").on("keyup keypress blur click change", function(event){
            for (var i = 1; i <= 3; i++) {
                $("#copytextfield" + i).val( $("#textfield" + i).val() );
            }
            $("input[type='text']#copytextfield4").val( $("select#select1").val() );        
        });         
    </script> 
```

虽然选择的 ID 会引起一些麻烦，所以如果您将所有字段的 id 更改为 input1 - input4 之类的东西，它可能会被重构得更多。

```
 <script type="text/javascript"> 
        $("#input1, #input2, #input3, #input1").on("keyup keypress blur click change", function(event){
            for (var i = 1; i <= 4; i++) {
                $("#copytextfield" + i).val( $("#input" + i).val() );
            }       
        });         
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T12:17:15.087

请试试这个：也**为你做了一个演示：http:** [//jsfiddle.net/6hwLS/4/](http://jsfiddle.net/6hwLS/4/)

想法是从末尾取出数值并将它们与`$(this)`对象一起使用：

此外，您不需要`input[type='text']`或唯一`select`的`id`并唯一标识 DOM 元素。

希望这可以帮助，`:)`

**像这样：**

```
$("#textfield1, #textfield2, #textfield3, #select1")
    .on("keyup keypress blur click change", function(event) {

        var theNum = parseInt($(this).attr("id").match(/\d+$/)); // will return last numeric value

         $("#copytextfield"+theNum).val($("#textfield"+theNum).val());      
         if( theNum === 4) {
            $("#copytextfield"+theNum).val($("#select1").val());
        }
}); ​ 
```

# google-app-engine - 如何从应用引擎中的多个实体中找到不同的标签集

> ID：11273982
> 
> 赞同：2
> 
> 时间：2012-06-30T12:11:13.577
> 
> 标签：google-app-engine, google-cloud-datastore

我正在应用程序引擎上编写一个系统，该系统收集“样本”并提供查询和分析样本的服务。样本的数据模型与此类似：

```
class Sample(ndb.Model):
   category  = ndb.StringProperty()
   name      = ndb.StringProperty()
   data      = ndb.JsonProperty()
   timestamp = ndb.DateTimeProperty()
   tags      = ndb.StringProperty(repeated = True) 
```

如您所见，每个样本都有一组字符串标签。例如：

```
['CustomerA', '2.0.5', 'featureX', 'logTypeB', ...] 
```

我有一个处理程序，它允许根据基本属性上的过滤器查询系统中的所有样本，并包括一组需要的标签。注意：结果集可能非常大，因此查询支持分页/限制，所以我一次返回一点数据。这一切都有效。

现在，当我在此之上放置一个用户界面时，我想要一种方法来向用户展示一个自动完成字段，用于输入其他标签以进一步过滤结果。因此，例如，如果他们将其限制为具有以下标签的样本：

```
Sample(..., tags=['CustomerA', '2.0.5', 'featureX'])
Sample(..., tags=['CustomerA', '2.0.5', 'featureY'])
Sample(..., tags=['CustomerB', '2.0.5', 'featureX'])
Sample(..., tags=['CustomerB', '2.0.5', 'featureX'])
Sample(..., tags=['CustomerB', '2.0.5', 'featureY']) 
```

然后我想向他们展示一个自动完成，其中包括：

```
['CustomerA', 'CustomerB', '2.0.5', 'featureX', 'featureY'] 
```

换句话说，我需要一个可以返回当前结果集中存在的唯一标签列表的处理程序。问题是，如果不迭代所有结果样本（可能非常大）并建立一组唯一标签以返回，我无论如何都无法在 App Engine 中执行此操作。

我可以为系统中的所有标签保留一组单独的实体，但这也不能解决问题。它可以让我快速找到系统中所有样本中存在的所有标签，但不限于通过当前过滤器的样本集。

关于我可以做些什么来以合理的方式实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T21:36:03.703

最好的方法是将标签保存在单独的实体中，该实体仅用于自动完成。由于标签名称是唯一的，因此您可以将标签用作实体键。这可以使用 ndb 模型挂钩变得简单。例如：

```
class SampleTag(ndb.Model):
  tag = ndb.StringProperty()

class Sample(ndb.Model):
  category  = ndb.StringProperty()
  name      = ndb.StringProperty()
  data      = ndb.JsonProperty()
  timestamp = ndb.DateTimeProperty()
  tags      = ndb.StringProperty(repeated = True)

  def _pre_put_hook(self):
    for tag in self.tags:
      SampleTag.get_or_insert(name=tag) 
```

然后您可以使用 SampleTag 中的值在您的自动完成中显示。

这只是一个例子——它不是很有效，特别是如果你有很长的标签列表。为了改进它，您应该确定自上次保存以来添加了哪些标签（如果有），并且只循环遍历这些标签。此外，您可能希望使用异步调用，或者可能将 _pre_put 例程完全委托给任务队列，这将加快 put() 模型所需的时间。

此外，这不处理删除。这有点棘手，因为您无法提前知道标签是否存在于其他地方。为此，我会使用 cron 作业定期检查您的标签是否存在。

# php - PHP 自动结束脚本执行

> ID：11273987
> 
> 赞同：1
> 
> 时间：2012-06-30T12:13:26.830
> 
> 标签：php, mysql

首先，我想向您介绍我正在尝试做的事情的基本概念：

我正在尝试让免费的网络托管服务为我做一些工作。我创建了一个 php 页面和 MySQL 数据库。我的 PHP 页面背后的基本思想是我有一个条件为 $shutdown 的 while 循环，以及 while 循环内的一些计数器来跟踪代码是否正在运行

```
<?php

/*

Connect to database etc. etc

*/

$shutdown = false;
// Main loop
while (!$shutdown)
{
    // Check for user shutdown request
    $strq = "SELECT * FROM TB_Shutdown;";
    $result = mysql_query($strq);
    $row = mysql_fetch_array($result);
    if ($row[0] == "true")
    {
        $shutdown = true; // I know this statement is useless but nevermind
        break;
    }

    //Increase counter
    $strq = "SELECT * FROM TB_Counter;";
    $result = mysql_query($strq);
    $row = mysql_fetch_array($result);

    if (intval($row[0]) == 60)
    {
        // Reset counter
        $strq = "UPDATE TB_Counter SET value = 0";
        $result = mysql_query($strq);

            /*

        I have some code to do some works at here its not important just curl stuff

            */

    else
    {
        // Increase counter
        $strq = "UPDATE TB_Counter SET value = " . (intval($row[0]) + 1);
        $result = mysql_query($strq);
    }

        /*

    I have some code to do some works at here its not important just curl stuff

        */

    // Sleep
    sleep(1);
}

?> 
```

我有一个 check.php，它返回来自 TB_Counter 的值。

**问题是：我每秒都在跟踪 TB_Counter 表。它会在一段时间后停止。如果我关闭我的网络浏览器（我称之为我的 main while php 循环页面），它会在大约 2 分钟后停止。如果不是在 5-7 分钟后，我会在浏览器上收到错误“连接已重置”并且循环停止。**

我应该怎么做才能让我的循环永远持续下去？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T12:16:36.787

您需要让 PHP 完全执行。文件中有一个选项`PHP.INI`说：

```
max_execution_time = 30; 
```

> 这设置了脚本在被解析器终止之前允许运行的最长时间（以秒为单位）。这有助于防止编写不佳的脚本占用服务器。默认设置为 30。从命令行运行 PHP 时，默认设置为 0。

功能`set_time_limit`：

> 设置允许脚本运行的秒数。如果达到此值，脚本将返回致命错误。默认限制为 30 秒，如果存在，则为 php.ini 中定义的 max_execution_time 值。

要检查 PHP 是否在**安全模式下**运行，您可以使用以下命令：

```
echo $phpinfo['PHP Core']['safe_mode'][0] 
```

如果这将是一个巨大的过程，您可以考虑在 Cron 上作为 CronJob 运行。关于它的一个小解释：

> Cron 是一个非常简单的 Linux 模块，它允许您以预定的时间或间隔运行命令。在 Windows 中，它称为计划任务。Cron 这个名字实际上来源于我们得到单词 chronology 的同一个词，这意味着时间的顺序。
> 
> 使用 Cron，开发人员可以自动执行诸如在非工作时间发送电子杂志、自动更新统计信息或从动态源重新生成静态页面等任务。系统管理员和 Web 主机可能希望生成有关其客户端的配额报告、完成自动信用卡计费或类似任务。Cron 有适合每个人的东西！

[阅读有关 Cron 的更多信息](http://www.sitepoint.com/introducing-cron/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T12:16:17.217

您可以使用 php 函数 set_time_limit()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T12:19:29.100

您不应从浏览器处理此问题。每分钟运行一次 cron 进行所需的检查将是一个更好的解决方案。

接下来为什么要每秒更新一次？只需写下时间戳，以便您知道何时提出请求？

使某些东西永远运行是不可行的。更重要的是确保您的业务流程继续运行。所以也许把你的商业案例放在这里是明智的，你似乎需要数秒并在一分钟内做一些事情，但这并不完全清楚。那么你需要做什么？

# node.js - 清除 mongodb、expressjs、nodejs 中的会话

> ID：11273988
> 
> 赞同：6
> 
> 时间：2012-06-30T12:13:31.717
> 
> 标签：node.js, mongodb, express, everyauth

我的配置：

```
app.configure(function(){
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');
    app.use(express.bodyParser());
    app.use(express.cookieParser());
    app.use(express.session({
        secret: 'MY SECRET',
        store: new MongoStore({
            db: 'MY SESSION DB',
            host: 'localhost',
            port:88888
        })
    }));
    app.use(everyauth.middleware());
    app.use(express.methodOverride());

    app.use(app.router);
});

app.configure('dev', function(){
    app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
    appPort = config.port; //Setting PORT to 8888 in dev mode.
    app.use('/public', express.static(__dirname + '/public'));
});

app.configure('production', function(){
    app.use(express.errorHandler());
    appPort = config.port;
    //Set cache-header-expires to 1 day
    var oneDay = 86400000;
    //app.use('/public', express.static(__dirname + '/public'));
    app.use('/public',express.static(__dirname + '/public', { maxAge: oneDay }));
}); 
```

现在，我有一个“注销”链接，该链接指向我的应用程序上的 /logout。

AFAIK，express 自动负责在注销时清除会话。但是对于我的配置，我认为它不会那样做。例如，附加到会话的自定义变量

```
req.session.custom 
```

注销后仍然保持。然而，

```
req.session.auth 
```

注销后清除。

我的 MongoDb 存储中的会话对象数量只会随着时间的推移而增加。我也在使用***everyauth***。

我错过了什么或做错了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-30T12:56:52.907

如果您想在注销时完全清除用户的会话，您可以`req.session.destroy()`从您的`everyauth.everymodule.handleLogout`函数中调用。仅`req.session.auth`在您调用时被清除`req.logout()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-03-05T06:05:03.140

> 为什么它在 mongo 商店中创建一个新会话。当我被重定向到再次登录时，有什么方法可以阻止它。– 孤独者 2015 年 6 月 7 日在 5:43

有一个[**saveUninitialized**](https://www.npmjs.com/package/express-session#saveuninitialized)选项可以防止会话在不包含任何数据时被保存。

```
app.use(session({
    secret: 'secret123',
    store: new MongoStore({
        mongooseConnection: mongoose.connection,
        ttl: 60 * 30 // half hour
    }),
    saveUninitialized: false
})); 
```

# c++ - 解析分隔字符串

> ID：11273989
> 
> 赞同：2
> 
> 时间：2012-06-30T12:13:33.943
> 
> 标签：c++, string, char

我怎样才能得到 ：

```
connect
100
username
example 
```

从这个字符串：

```
ngg://connect>100/username>example/ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T12:14:41.250

`std::string::find`与参数`"/"`和`">"`与`std::string::substr`找到的索引一起使用。

这是一个好的开始。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T12:18:59.693

```
ngg://connect>100/username>example/ 
```

如果这种格式是固定的，那么你可以使用`std::sscanf`：

```
#include <iostream>
#include <cstdio>

int main()
{
   char const *input = "ngg://connect>100/username>example/";
   char const *input_format = "ngg://%[^>]>%d/%[^>]>%[^/]"; 

   char connect[100], user[100], str[100]; //assuming max size is 100
   int num;

   if ( std::sscanf(input, input_format, connect, &num, user, str) != 4 )
   {
     std::cerr<<"error - number of tokens read must be equal to 4";
     return 0; 
   }  

   std::cout << connect <<std::endl;
   std::cout << num <<std::endl;
   std::cout << user <<std::endl;
   std::cout << str <<std::endl;
} 
```

输出（[在线演示](http://ideone.com/Md6PM)）：

```
connect
100
username
example 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-30T12:29:39.137

一种可能性是[`boost::split()`](http://www.boost.org/doc/libs/1_49_0/doc/html/string_algo/usage.html#id3184031)：

```
#include <iostream>
#include <vector>
#include <string>

#include <boost/algorithm/string.hpp>
#include <boost/algorithm/string/split.hpp>

int main()
{
    std::vector<std::string> tokens;
    std::string s("ngg://connect>100/username>example/");
    boost::split(tokens, s, boost::is_any_of("/>"));

    // "connect"  == tokens[2]
    // "100"      == tokens[3]
    // "username" == tokens[4]
    // "example"  == tokens[5]

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-30T20:59:29.187

`strtok`为了多样性而添加答案：

```
char str[] = "ngg://connect>100/username>example/";
char *s = strtok(str, ">/");
std::vector<std::string> tokens;
while (s = strtok(NULL, ">/"))
    tokens.push_back(std::string(s)); 
```

这会将字符串`str`拆分为所需的标记（丢弃第一个`ngg:`，就像问题中一样）。
这是此代码的一个[工作示例](http://ideone.com/639S7)。

# ruby - 当 RubyGems 挂起时

> ID：11273990
> 
> 赞同：1
> 
> 时间：2012-06-30T12:13:40.593
> 
> 标签：ruby, rubygems, gemfile

我刚刚让 RubyGems 在一两分钟内没有更新“从[http://rubygems.org/](http://rubygems.org/)获取 gem 元数据”。

我想知道将来如何防止这种情况发生。是否有可靠的 RubyGems 镜像，我可以将其指定为 Gemfile 中的附加源？它会在短暂的超时后自动切换到新的源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-18T15:36:19.467

没有官方镜像。[但我发现即使我从http://rubygems.org](http://rubygems.org)获得超时，将您的 Gem 源指向[http://production.s3.rubygems.org也有效](http://production.s3.rubygems.org)

# java - android在选择之前加载选项卡内容

> ID：11273993
> 
> 赞同：0
> 
> 时间：2012-06-30T12:14:03.393
> 
> 标签：java, android, eclipse

我正在以编程方式正确地将选项卡分配给 tabHost。但是，当启动应用程序并默认选择第一个选项卡时，对于其他选项卡，在用户按下选项卡之前不会加载它们的内容。如何开始加载其内容而不等到用户选择它？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T12:19:27.570

您可以使用`ViewPager`'[方法 offScreenPageLimit()。](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#getOffscreenPageLimit%28%29)它会加载尽可能多的内容。

# javascript - 从 UIWebView Javascript 监听 Objective-C 中的通知

> ID：11273994
> 
> 赞同：0
> 
> 时间：2012-06-30T12:14:26.750
> 
> 标签：javascript, jquery, objective-c, ios

是否可以在 UIWebView 中监听 Javascript 发布的通知？还是类似的？我曾想过在 Objective-C 中重复一个函数来监视 JS 变量，但肯定有更好的方法吗？

我想监听特定图像何时加载到 UIWebView（我可以使用 jQuery 中的 .load 方法），当图像加载时我想隐藏一个原生 UIActivityIndi​​cator。我不想在网络视图中使用 gif！

IE

```
$('img.someImage').load(function(){
//fire something for obj-c to listen to!
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T12:19:24.397

将事件从您的 html 页面传递到 iPhone 应用程序的唯一方法是使用 url，

当你想传递一个特殊的偶数时，让你的 js 将你的导航更改为一个新的 url，例如，`"MyCustomURl://DoSomeThing"`

现在在您的 iPhone 应用程序中，将委托设置`webView`为`self`

并添加以下功能

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    NSString *absolute = [request.URL absoluteString];

    if ([absolute isEqualToString:@"MyCustomURl://DoSomeThing"]) {
        //Do what you want here
        return NO;//this will not load the url
    }

    return YES;
} 
```

# ruby-on-rails - Rails 联系表，Action_mailer 不发送电子邮件

> ID：11273997
> 
> 赞同：1
> 
> 时间：2012-06-30T12:14:41.920
> 
> 标签：ruby-on-rails, actionmailer, contact-form

我不确定我做错了什么。

我看到很多人都有类似的问题： [Rails 联系表格不起作用](https://stackoverflow.com/questions/6185483/rails-contact-form-not-working)， [Rails 3 联系表格，未定义的方法？](https://stackoverflow.com/questions/11161364/rails-3-contact-form-undefined-method)， [Rails 3](https://stackoverflow.com/questions/3720409/contact-us-form-in-rails-3)等中的联系我们表格。

即使很难，我也看到很多人认为这很简单 - 建立联系表格。
已经通过流行的 actionmailer 指南：[http](http://guides.rubyonrails.org/action_mailer_basics.html) : //guides.rubyonrails.org/action_mailer_basics.html，http: [//railscasts.com/episodes/206-action-mailer-in-rails-3](http://railscasts.com/episodes/206-action-mailer-in-rails-3)

我不是真正的开发人员，所以我觉得这很令人困惑。

无论如何，我需要建立一个简单的联系表格，将消息作为电子邮件发送给我的电子邮件帐户。我不想将消息存储在我的数据库中。

这是我的代码：

/app/models/message.rb

```
 class Message
    include ActiveModel::Validations
    include ActiveModel::Conversion
    extend ActiveModel::Naming

    attr_accessor :name, :email, :content

    def initialize(attributes = {})
     attributes.each do |name, value|
     send("#{name}=", value)
    end
  end

   def persisted?
    false
   end
  end 
```

应用\控制器\messages_controller.rb

```
 class MessagesController < ApplicationController
  def new
   @message = Message.new
  end

  def create
   @message = Message.new(params[:message])
   MessageMailer.send(@message).deliver
   flash[:notice] = "Message sent! Thank you for contacting us."
   redirect_to root_url
  end
end 
```

/app/mailer/message_mailer.rb

```
 class MessageMailer < ActionMailer::Base
    default :to => "emils.veveris@thrillengine.com"

    def send(message)
      @message = message
      mail( :subject => " Test ", :from => @message.email ) do |format|
      format.text
    end
  end
end 
```

应用程序/视图/消息/new.html.erb

```
<h1> "Contact Us"  </h1>

  <%= form_for @message do |f| %>

  <p>
   <%= f.label :name %><br />
   <%= f.text_field :name %>
  </p>

  <p>
   <%= f.label :email %><br />
   <%= f.text_field :email %>
  </p>

  <p>
  <%= f.label :content, "Message" %><br />
  <%= f.text_area :content %>
  </p>
  <p><%= f.submit "Send Message" %></p>
 <% end %> 
```

应用程序/视图/message_mailer/sent.text.erb

```
Message sent by <%= @message.name %>

<%= @message.content %> 
```

和发展.rb

```
N1::Application.configure do

    # Don't care if the mailer can't send
    config.action_mailer.perform_deliveries = true
    config.action_mailer.raise_delivery_errors = true

end 
```

我在日志文件中看不到任何错误，也没有收到任何错误消息。只是邮件没有送达。

你能告诉我我做错了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T14:07:18.690

This is a little old but maybe some of the concepts can help you...it's pretty much exactly what you're trying to do.

[http://railscasts.com/episodes/193-tableless-model](http://railscasts.com/episodes/193-tableless-model)

# linux - netcat 的新行问题

> ID：11273999
> 
> 赞同：9
> 
> 时间：2012-06-30T12:14:43.513
> 
> 标签：linux, unix

我正在使用以下命令将一些字符串发送到 udp 侦听服务器。

> 回声“A 192.168.192.168” | 数控-u 192.168.2.1 1234

但服务器在回显字符串中出现尾随'\n'。

我也尝试过以下命令，但失败了

> 回声“A 192.168.192.168” | 数控-uC 192.168.2.1 1234

如何删除尾随的换行符？我在 nc 中有什么特殊的选择吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-30T12:19:08.610

`echo`通常提供`-n`标志。这不是标准的。

> *string* 要写入标准输出的字符串。如果第一个操作数是 -n，或者任何操作数包含反斜杠 ('\') 字符，则结果是实现定义的。
> 
> 在符合 XSI 的系统上，如果第一个操作数是 -n，则应将其视为字符串，而不是选项。

* * *

我建议使用`printf`

```
printf "A 192.168.192.168" | nc -u 192.168.2.1 1234 
```

`printf`除非被告知，否则不会追加新行，这是标准行为。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-30T12:18:16.763

尝试使用

```
echo -n 
```

所以

```
echo -n "A 192.168.192.168" | nc -u 192.168.2.1 1234 
```

[回声手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?echo)说： `-n do not output the trailing newline`