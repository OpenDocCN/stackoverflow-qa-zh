# StackOverflow 问答 11772000-11772999

# c# - 从组合框中选择数据并在列表框中显示信息 c#

> ID：11772001
> 
> 赞同：0
> 
> 时间：2012-08-02T06:16:47.190
> 
> 标签：c#, linq, combobox, listbox

我遇到了一些问题，当用户在组合框中选择所选名称时，与所选名称链接的数据将显示在列表框中。我在使用这种方法时遇到问题。错误就在这里。

```
int selectLocStation = Convert.ToInt32(cbLocStation.SelectedValue); 
```

错误：无法将类型为“<>f_AnonymousType2'2 [System.String.System.Int32]”的对象转换为类型“System.IConvertible”。

```
private void cbLocStation_SelectedIndexChanged(object sender, EventArgs e)
    {
        using (satsEntities Setupctx = new satsEntities())
        {
            int selectLocStation = Convert.ToInt32(cbLocStation.SelectedValue);

            var query = (from db in Setupctx.requiredtimings
                         join timing t in Setupctx.timings on db.RequiredTimingID equals t.TimingID
                         where db.RequiredLocationStationID == selectLocStation
                         select new
                         {
                             t.Time2
                         }).ToList();

            List<TimeSpan> lstSelectedTime = new List<TimeSpan>();

            foreach (var a in query)
            {
                lstSelectedTime.Add((TimeSpan)a.Time2);
            }

            lstTime.DataSource = lstSelectedTime;
        }
    } 
```

这就是我在组合框中存储数据的方法。

```
using (satsEntities Setupctx = new satsEntities())
        {
            var DeleteRT = (from DelRT in Setupctx.requiredtimings
                            join locationstationname ls in Setupctx.locationstationnames on DelRT.RequiredLocationStationID equals ls.locationstationID
                            select new { ls.locStatname, DelRT.RequiredLocationStationID }).Distinct().ToList();

            cbLocStation.DataSource = DeleteRT.ToList();
            cbLocStation.DisplayMember = "locStatname";
            cbLocStation.ValueMember = "RequiredLocationStationID"; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:29:51.137

```
 private void Edit_TS_Load(object sender, EventArgs e)
    {
        using (satsEntities Setupctx = new satsEntities())
        {
            var DeleteRT = (from DelRT in Setupctx.requiredtimings
                           join locationstationname ls in Setupctx.locationstationnames on DelRT.RequiredLocationStationID equals ls.locationstationID
                           select new {ls.locStatname, DelRT.RequiredLocationStationID}).Distinct().ToList();

            cbLocStation.DataSource = DeleteRT.ToList();
            cbLocStation.DisplayMember = "locStatname";
            cbLocStation.ValueMember = "RequiredLocationStationID";

        }
    } 
```

答案就在这里！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T06:19:57.530

如果字符串可用，我会试试这个

```
int selectLocStation = Convert.ToInt32(cbLocStation.SelectedValue.ToString()); 
```

或这个

```
int selectLocStation =Int32.Parse(cbLocStation.SelectedValue.ToString()); 
```

你也可以试试这个

```
DataRowView drow = (DataRowView)cbLocStation.SelectedItem;
string str = drow.Row.ItemArray[0].ToString(); 
```

检查字符串是否有数字并将其转换为 int

您还可以添加数据绑定

```
BindingContext oBC = new BindingContext();
    cbLocStation.BindingContext = oBC;
    cbLocStation.DataBindings.Add(new Binding("SelectedValue", DeleteRT, "RequiredLocationStationID", false, DataSourceUpdateMode.OnPropertyChanged)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T06:20:44.993

您正在尝试将匿名类型从查询转换为时间跨度，这是不可能的，因为它没有实现 IConvertible。您可以编写一个包装类并在查询中选择该类。

```
var query = (from db in Setupctx.requiredtimings
                         join timing t in Setupctx.timings on db.RequiredTimingID equals t.TimingID
                         where db.RequiredLocationStationID == selectLocStation
                         select new WrapperClass
                         {
                             Time = t.Time2
                         }).ToList();

public class WrapperClass
        {
            public DateTime Time { get; set; }
        } 
```

其中 time 是您在包装类中定义的 DateTime

# java - 如何从其他类获取文本框值？

> ID：11772005
> 
> 赞同：0
> 
> 时间：2012-08-02T06:17:06.000
> 
> 标签：java, textfield

我有一个关于 JTextField 的问题，每当我想从我的学生类中获取文本字段值并将其传递给我的另一个类 myAction 时，我总是会得到一个 NullPointerException 我想要发生的是在我单击按钮或 Jbutton 之后文本字段中的所有数据都将保存到数组中，并且我的按钮已经有了一个动作监听器并创建了一个 myAction 类。

这是我的代码：学生类（主类）

/*

```
package Student;
import java.util.Scanner;
import javax.swing.*;
import java.awt.event.*;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
public class Student{
    private static Scanner input = new Scanner(System.in);
    public String[] name = {"Lara", "Jerome", "Ferdie", "Jeffrey", "Eduard", "King"};
    public int[] grade = new int[6];
    JFrame frame;
    JLabel label1, label2, label3, label4, label5, label6;
    JPanel panel;
    public JTextField text1, text2, text3, text4, text5, text6;
    JButton button;

    public static void main(String[] args)
    {
        Student myStudent = new Student();
        myStudent.Layout();
        //myStudent.
    }

    public void GetValue()
    {
        grade[0] = Integer.parseInt(text1.getText());
        grade[1] = Integer.parseInt(text2.getText());
        grade[2] = Integer.parseInt(text3.getText());
        grade[3] = Integer.parseInt(text4.getText());
        grade[4] = Integer.parseInt(text5.getText());
        grade[5] = Integer.parseInt(text6.getText());

        for(int i = 0; i < grade.length; i++)
        {
            System.out.println(grade[i]);
        }
    }

    public void Layout()
    {
        //Design Layout
        panel = new JPanel();
        panel.setLayout(null);
        frame = new JFrame("Student Grades");
        button = new JButton("Get Grade");
        button.setBounds(50, 260, 200, 30);
        label1 = new JLabel("Your Grade: " + name[0]);
        label1.setBounds(10, 10, 150, 30);
        text1 = new JTextField(5);
        text1.setBounds(140, 15, 150, 20);
        label2 = new JLabel("Your Grade: " + name[1]);
        label2.setBounds(10, 50, 150, 30);
        text2 = new JTextField(5);
        text2.setBounds(140, 55, 150, 20);
        label3 = new JLabel("Your Grade: " + name[2]);
        label3.setBounds(10, 90, 150, 30);
        text3 = new JTextField(5);
        text3.setBounds(140, 95, 150, 20);
        label4 = new JLabel("Your Grade: " + name[3]);
        label4.setBounds(10, 130, 150, 30);
        text4 = new JTextField(5);
        text4.setBounds(140, 135, 150, 20);
        label5 = new JLabel("Your Grade: " + name[4]);
        label5.setBounds(10, 170, 150, 30);
        text5 = new JTextField(5);
        text5.setBounds(140, 175, 150, 20);
        label6 = new JLabel("Your Grade: " + name[5]);
        label6.setBounds(10,210, 150, 30);
        text6 = new JTextField(5);
        text6.setBounds(140, 215, 150, 20);
        frame.setSize(350, 350);
        frame.setVisible(true);
        panel.add(label1);
        panel.add(text1);
        panel.add(label2);
        panel.add(text2);
        panel.add(label3);
        panel.add(text3);
        panel.add(label4);
        panel.add(text4);
        panel.add(label5);
        panel.add(text5);
        panel.add(label6);
        panel.add(text6);
        panel.add(button);
        frame.add(panel);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        MyEvent myAction = new MyEvent();
        button.addActionListener(myAction);
    }

}

and my class myAction(or actionlistener) class

class MyEvent implements ActionListener
{
    public void actionPerformed(ActionEvent e) 
    {
      if(e.getActionCommand().equals("Get Grade"))
      {
          Student EventStudent = new Student();
          EventStudent.GetValue();

      }
    }   
} 
```

*/ 这是我所有的代码，希望你能帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T06:52:48.637

您的代码中的问题是您在 main 中创建了一个 Student 对象。因此，您的文本字段与该对象相关联。现在，在您的事件侦听器中，您正在创建另一个不属于您需要的任何组件的 student 对象。您必须在 main 方法中从对象中检索数据。像下面一样。希望它会有所帮助。

```
import java.util.Scanner;
import javax.swing.*;
import java.awt.event.*;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
public class Student{
    static Student myStudent ;
    private static Scanner input = new Scanner(System.in);
    public String[] name = {"Lara", "Jerome", "Ferdie", "Jeffrey", "Eduard", "King"};
    public int[] grade = new int[6];
    JFrame frame;
    JLabel label1, label2, label3, label4, label5, label6;
    JPanel panel;
    public JTextField text1, text2, text3, text4, text5, text6;
    JButton button;

    public static void main(String[] args)
    {
         myStudent = new Student();
         myStudent.Layout();
        //myStudent.
    }

    public void GetValue()
    {
        grade[0] = Integer.parseInt(text1.getText());
        grade[1] = Integer.parseInt(text2.getText());
        grade[2] = Integer.parseInt(text3.getText());
        grade[3] = Integer.parseInt(text4.getText());
        grade[4] = Integer.parseInt(text5.getText());
        grade[5] = Integer.parseInt(text6.getText());

        for(int i = 0; i < grade.length; i++)
        {
            System.out.println(grade[i]);
        }
    }

    public void Layout()
    {
        //Design Layout
        panel = new JPanel();
        panel.setLayout(null);
        frame = new JFrame("Student Grades");
        button = new JButton("Get Grade");
        button.setBounds(50, 260, 200, 30);
        label1 = new JLabel("Your Grade: " + name[0]);
        label1.setBounds(10, 10, 150, 30);
        text1 = new JTextField(5);
        text1.setBounds(140, 15, 150, 20);
        label2 = new JLabel("Your Grade: " + name[1]);
        label2.setBounds(10, 50, 150, 30);
        text2 = new JTextField(5);
        text2.setBounds(140, 55, 150, 20);
        label3 = new JLabel("Your Grade: " + name[2]);
        label3.setBounds(10, 90, 150, 30);
        text3 = new JTextField(5);
        text3.setBounds(140, 95, 150, 20);
        label4 = new JLabel("Your Grade: " + name[3]);
        label4.setBounds(10, 130, 150, 30);
        text4 = new JTextField(5);
        text4.setBounds(140, 135, 150, 20);
        label5 = new JLabel("Your Grade: " + name[4]);
        label5.setBounds(10, 170, 150, 30);
        text5 = new JTextField(5);
        text5.setBounds(140, 175, 150, 20);
        label6 = new JLabel("Your Grade: " + name[5]);
        label6.setBounds(10,210, 150, 30);
        text6 = new JTextField(5);
        text6.setBounds(140, 215, 150, 20);
        frame.setSize(350, 350);
        frame.setVisible(true);
        panel.add(label1);
        panel.add(text1);
        panel.add(label2);
        panel.add(text2);
        panel.add(label3);
        panel.add(text3);
        panel.add(label4);
        panel.add(text4);
        panel.add(label5);
        panel.add(text5);
        panel.add(label6);
        panel.add(text6);
        panel.add(button);
        frame.add(panel);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        MyEvent myAction = new MyEvent(myStudent);
        button.addActionListener(myAction);
    }

}
class MyEvent implements ActionListener
{
    Student myStudent;
    public MyEvent(Student myStudent) {
        this.myStudent=myStudent;
    }

    public void actionPerformed(ActionEvent e) 
    {
      if(e.getActionCommand().equals("Get Grade"))
      {

         myStudent.GetValue();

      }
    }   
} 
```

# android - 安卓中的错误

> ID：11772008
> 
> 赞同：-1
> 
> 时间：2012-08-02T06:17:35.157
> 
> 标签：android, android-activity

我正在开发一个安卓应用程序。

```
 setContentView(R.layout.main);

    weightSpinner = (Spinner) findViewById(R.id.spinner1);
    weightUnitSpinner = (Spinner) findViewById(R.id.spinner2);
    heightSpinner = (Spinner) findViewById(R.id.spinner3); 
```

在这里，我在这些行中遇到错误，即 R 无法解析为变量可以解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T06:20:42.250

1.  确保您的 XML 文件中没有任何错误
2.  运行项目 -> 清理...
3.  确保您的 java 文件位于 Manifest 中给出的相同包中。如果没有，请手动导入 R 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T06:26:22.800

R 是一个生成的类。如果生成了 R.java，您可以在 /gen 文件夹中找到它。

如果 /gen 中没有 R.java，则您的项目可能有一些其他错误，您首先要修复它们。
首先修复任何其他错误，然后清理构建您的项目。如果这没有帮助，请删除 /gen 文件夹，然后再次清理构建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T06:24:12.123

检查您已导入的包。如果你看到 Android.R 然后删除它并清理。

# web-services - 如何从 WSDL 生成 JAVA 工件？

> ID：11772009
> 
> 赞同：0
> 
> 时间：2012-08-02T06:17:39.870
> 
> 标签：web-services, jax-ws

我的一个项目需要 Contract First Web 服务。我们已经定义了 WSDL 文件，所以我需要使用 JAX-WS 从 WSDL 生成 Java Artifacts，所以有什么方法可以生成暴露 WSDL 的 Java 服务器端表单。

谢谢， 罗摩克里希纳 Rayudu

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-25T09:50:30.543

利用

xjc -wsdl <wsdlurl> -d <目录>

xjc 工具可以在 C:\Program Files\jaxb 中找到

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:06:36.127

看看我的帖子[在这里](https://stackoverflow.com/questions/9663420/how-to-call-a-web-service-using-javaee/9693919#9693919)。它解释了如何使用JDK 附带
的 -Tool 从给定的 WSDL 生成 Metro-JAX-WS-Stubs（工件） 。`wsimport`

希望这会有所帮助！玩得开心！

**编辑：**
对不起，我错过了你的问题！

Apache AXIS 附带一个名为*wsd2java*的函数。这对您的情况可能会有所帮助。
看看[这篇文章](https://stackoverflow.com/questions/3179229/generating-web-service-from-wsdl-file)，提供不同 IDE 教程的链接。

干杯!

# c++ - openFrameworks：如何允许两个事件键同时发生

> ID：11772013
> 
> 赞同：0
> 
> 时间：2012-08-02T06:17:51.420
> 
> 标签：c++, openframeworks

问题：我想用基本的 WASD 键让我的船精灵在屏幕上移动。我已经完成了这个，但问题是当我按下两个键（例如 W 和 D）时，船并没有像我预期的那样以对角线方式移动。相反，它会根据最近按下的键移动。

只要我按住一把钥匙，它就会移动。2（和多个）的设置是什么？

我的代码（blueship 是一个带有不言自明方法的类）：

```
void testApp::keyPressed(int key)
{
    if (key == 'w')
    {
        blueship.move_up();
    }
    if (key == 's')
    {
        blueship.move_down();
    }
    if (key == 'a')
    {
        blueship.move_left();
    }
    if (key == 'd')
    {
        blueship.move_right();
    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:48:39.983

keyReleased 事件？

```
key W is pressed -> move up
key W is release -> stop moving
key A is pressed -> move left
key S is pressed -> move left + move down (key A is not released,yet) 
```

# javascript - 无法滚动 IE7 滚动条

> ID：11772014
> 
> 赞同：0
> 
> 时间：2012-08-02T06:18:03.600
> 
> 标签：javascript, jquery, css, internet-explorer-7, scrollbar

我有一个页面，里面有很多可滚动的容器。所有这些容器都包含一些列表左右。除了 IE7（在 IE6 及以下版本中测试过）之外，一切在所有浏览器中都能完美运行。在 IE7 中，当我尝试通过单击滚动条进行滚动时，它没有发生。但是如果我双击滚动条，那么我将把焦点放在滚动条上，我就可以滚动了。鼠标滚轮滚动效果很好。

我的页面中有很多 jquery 插件，例如 datatable、jquery UI、autosuggest 等。

当我在浏览器中禁用脚本时，滚动工作正常。

对正在发生的事情有任何想法吗？（作为 ie7 问题）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T21:40:16.210

未捕获的 javascript 错误可能是您的问题的原因。尝试使用 try...catch，例如

```
try {
  //any questionable JS code
} catch(err){
  alert(err.message);
} 
```

如果有任何错误，那应该让你知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T15:33:53.367

似乎有一个额外的点击事件或阻止滚动条的东西，尝试在这些元素上使用 $(...).unbind('click') 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T06:30:55.503

在没有看到您的代码的情况下，我只能猜测您的页面在 ie7 中引发了 javascript 错误。有一些 javascript 函数在 ie7 中不起作用（例如 getElementsByClassName ，它之前已经让我失望了）。我建议在 ie 开发人员工具或其他调试工具中调试 javascript 以找出问题所在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-07T16:20:35.860

如果我们可以使用插件：

[http://jscrollpane.kelvinluck.com/](http://jscrollpane.kelvinluck.com/)

我们可以轻松解决跨浏览器滚动窗格的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-07T12:48:56.020

某些版本的 IE 对非严格语法具有气质，例如，如果您缺少 ; 某处。一种选择是通过[jslint](http://www.jslint.com/)运行您的代码，但如果您的代码组织不当，这可能会很棘手。

如果您有 IE9，您应该能够通过按 F12 检查错误，将版本回滚到 IE7 并监控控制台输出。

反复试验可能是答案，如果您的所有代码都只是 1 个大块，那么我建议首先将其重新分解为可管理的块（类方法）。

祝你好运。

# iphone - 搜索包含由特殊字符分隔的多个单词的字符串

> ID：11772016
> 
> 赞同：0
> 
> 时间：2012-08-02T06:18:21.913
> 
> 标签：iphone, objective-c, ios, xcode4

我正在尝试在应用程序中实现自动完成方法。当我键入类型字符时，它会返回与第一个字符匹配的单词。例如，如果我输入“B”或“ba”，它会返回以“ba”开头的字符串，如“Ballon”和“Ball”。但是在我的数组中，有多个单词的字符串由“（”或“空格”分隔。例如“白球”或“巨人（大）”。我也需要获取这些字符串。任何帮助将不胜感激。

这是我正在使用的代码，

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
    autocompleteTableView.hidden = NO;

    NSString *substring = [NSString stringWithString:textField.text];
    substring = [substring stringByReplacingCharactersInRange:range withString:string];
    [self searchAutocompleteEntriesWithSubstring:substring];
    return YES;
}

- (void)searchAutocompleteEntriesWithSubstring:(NSString *)substring {

    [autocompleteList removeAllObjects];
    for(NSString *curString in contentArray)
    {
        NSRange substringRange = [curString rangeOfString:substring options:NSCaseInsensitiveSearch];

        if (substringRange.location == 0)
        {
            [autocompleteList addObject:curString];
        }
    }
    [autocompleteTableView reloadData];
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:39:20.193

问题在于你的 if 条件

```
 if (substringRange.location == 0)
    {
        [autocompleteList addObject:curString];
    } 
```

由于您正在检查位置 0，因此只会返回以子字符串开头的字符串。如下更改条件应该可以帮助您解决问题。

```
 if (substringRange.location != NSNotfound)
   {
       [autocompleteList addObject:curString];
   } 
```

# c++ - 从可变参数推导迭代器类别

> ID：11772019
> 
> 赞同：2
> 
> 时间：2012-08-02T06:18:36.233
> 
> 标签：c++, c++11, variadic-templates, iterator-traits

我该如何填写`???`

`template<class...Itrs> struct itr_category { typedef /* ??? */ type; };`

所以这`type`是最专业的，`iterator_traits<Itrs>::iterator_category...`它支持所有' 操作，否则如果没有单个此类类别，则`Itrs`失败（如）？`enable_if<false>::type`

*最特*`iterator_category`化是指以下继承中最下降的类型 ( )：

```
struct input_iterator_tag { };
struct output_iterator_tag { };
struct forward_iterator_tag :       public         input_iterator_tag, 
                                    public        output_iterator_tag { };
struct bidirectional_iterator_tag : public       forward_iterator_tag { };
struct random_access_iterator_tag : public bidirectional_iterator_tag { }; 
```

因此，例如，类似的事情`itr_category<InputIterator,OutputIterator,...>`会失败。

注意：这是一个不同于定义的层次结构`std::iterator_traits`（参见 24.3 或[http://en.cppreference.com/w/cpp/iterator/iterator_tags](http://en.cppreference.com/w/cpp/iterator/iterator_tags)）：这里`forward_iterator_tag`派生自`input_iterator_tag`and`output_iterator_tag`而不仅仅是前者。这对应于例如 SGI 文档中描述的继承（参见[http://www.sgi.com/tech/stl/Iterators.html](http://www.sgi.com/tech/stl/Iterators.html)）。如果它是相关的，请随意评论这种差异（顺便说一下，这是 zip 迭代器实现的一部分）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:32:00.223

首先，您需要一个`fold`类型的函数，如下所示：

```
template< template< typename, typename > class f, typename init, typename... types >
class fold;

template< template< typename, typename > class f, typename init >
struct fold< f, init > {
    typedef init type;
};

template< template< typename, typename > class f, typename init, typename type_arg, typename... type_args >
struct fold< f, init, type_arg, type_args... > {
    typedef typename fold< f, typename f< init, type_arg >::type, type_args... >::type type;
}; 
```

然后，定义一个组合函数：

```
template< typename i1, typename i2 >
struct combine_iterators {
private:
    typedef typename iterator_traits< i1 >::category c1;
    typedef typename iterator_traits< i2 >::category c2;
    typedef decltype( false ? ( c1 * )nullptr : ( c2 * )nullptr ) ptype;
public:
    typedef typename std::decay< decltype( *( ptype )nullptr ) >::type type;
};

template<class...Itrs> struct itr_category {
    typedef typename fold< combine_iterators, random_access_iterator_tag, Itrs... >::type type;
}; 
```

而且，基本上，就是这样：

```
class it1;
template<> struct iterator_traits< it1 > {
    typedef bidirectional_iterator_tag category;
};

class it2;
template<> struct iterator_traits< it2 > {
    typedef input_iterator_tag category;
};

class it3;
template<> struct iterator_traits< it3 > {
    typedef output_iterator_tag category;
};

itr_category< it1, it2 >::type x; // typeid( x ).name() == "struct input_iterator_tag"
itr_category< it1, it3 >::type y; // typeid( x ).name() == "struct output_iterator_tag"
itr_category< it2, it3 >::type z; // operand types are incompatible ("input_iterator_tag *" and "output_iterator_tag *")
itr_category< it1, it2, it3 >::type w; // operand types are incompatible ("input_iterator_tag *" and "output_iterator_tag *") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T06:52:53.490

只需定义一个`common_category`产生最小值的特征。然后将类型定义为 的类型`common_category<firstiter, common_category<seconditer, etc>>`。我忘记了这些东西的可变参数模板指令。

# php - Jquery 远程验证显示 1 作为错误消息

> ID：11772024
> 
> 赞同：1
> 
> 时间：2012-08-02T06:18:58.243
> 
> 标签：php, jquery, jquery-validate

这是我的客户端验证脚本：

```
 jQuery('#myForm_members').validate({
        rules:{
            user_userpassword2:{equalTo:'#user_userpassword'},
            user_username: {required: true,remote: 
                               {url:'option/members/member.php?task=check_user_name',type:'post',async: false}}            
        },
        messages:{
            user_userpassword2:{equalTo:'Password mismatched.'},
            user_username:{remote:'User name exists.'}            
        }
        }); 
```

服务器端脚本：

```
 $num_rows=$this->count_rows($sql);
    if($num_rows>0)
        echo 0;
    else
        echo 1; 
```

当此验证返回 false 时，它​​工作正常 ![在虚假条件下工作](../Images/1e9a83dde7a8674d99d36b1b3487ed62.png)

但是当此验证返回 true 时，它​​不起作用并返回 1 作为错误 ![返回 1 作为错误](../Images/9b9adddae59b733e8a6f7603fbdbcb47.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T06:33:32.650

尝试：

```
header('content-type: application/json; charset=utf-8'); 
if($r>0)
    echo json_encode( false );
else
    echo json_encode( true ); 
```

# iphone - 无法在 Instruments 上选择跟踪活动分配

> ID：11772027
> 
> 赞同：0
> 
> 时间：2012-08-02T06:19:10.713
> 
> 标签：iphone, ios, xcode, ipad, instruments

我正在尝试更改选项以仅跟踪活动分配，这就是我所看到的：

![在此处输入图像描述](../Images/55cbb145d61cf30fae26a98499e4bf15.png)

出于某种原因，我似乎无法改变这一点。知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:24:28.047

停止录制。配置。记录。

# asp.net-mvc-3 - MVC3 内存不足异常

> ID：11772031
> 
> 赞同：1
> 
> 时间：2012-08-02T06:19:30.453
> 
> 标签：asp.net-mvc-3, telerik

在部署具有 Telerik Extensions 菜单的 MVC3 应用程序后，我注意到它有时会引发 OutOfMemoryException，然后应用程序冻结，直到大约一个小时左右后用户才能使用该应用程序。

我设法从 Windows 事件日志中跟踪错误，以下是从事件日志中提取的错误之一的堆栈跟踪

异常信息：

```
Exception type: OutOfMemoryException 
Exception message: Exception of type 'System.OutOfMemoryException' was thrown.
at System.RuntimeTypeHandle.ConstructName(RuntimeTypeHandle handle, 
Boolean nameSpace, Boolean fullInst, Boolean assembly, StringHandleOnStack retString)
at System.RuntimeType.RuntimeTypeCache.ConstructName(String& name, Boolean nameSpace, Boolean fullinst, Boolean assembly)
at System.RuntimeType.get_Name()
at Telerik.Web.Mvc.Infrastructure.Implementation.ControllerTypeCache.<GetAllControllerTypes>b__d(Type type)
at System.Linq.Enumerable.WhereArrayIterator`1.MoveNext()
at Telerik.Web.Mvc.Extensions.CollectionExtensions.AddRange[T](ICollection`1 instance, IEnumerable`1 collection)
at Telerik.Web.Mvc.Infrastructure.Implementation.ControllerTypeCache.GetAllControllerTypes()
at Telerik.Web.Mvc.Infrastructure.Implementation.ControllerTypeCache.<GetControllerTypesWithinNamespaces>b__4()
at Telerik.Web.Mvc.Infrastructure.Implementation.Cache.Get[T](String key, Func`1 defaultValueFactory)
at Telerik.Web.Mvc.Infrastructure.Implementation.ControllerTypeCache.GetControllerTypesWithinNamespaces(String controllerName, IEnumerable`1 namespaces)
at Telerik.Web.Mvc.Infrastructure.Implementation.ControllerTypeCache.GetControllerTypes(String controllerName)
at Telerik.Web.Mvc.Infrastructure.Implementation.ControllerDescriptorCache.ControllerDescriptorFactory(String controllerName, String areaName)
at Telerik.Web.Mvc.Infrastructure.Implementation.ControllerDescriptorCache.<>c__DisplayClass1.<GetControllerDescriptor>b__0()
at Telerik.Web.Mvc.Infrastructure.Implementation.Cache.Get[T](String key, Func`1 defaultValueFactory)
at Telerik.Web.Mvc.Infrastructure.Implementation.ControllerDescriptorCache.GetControllerDescriptor(String controllerName, String areaName)
at Telerik.Web.Mvc.Infrastructure.Implementation.AuthorizationContextCache.AuthorizationContextFactory(RequestContext requestContext, String controllerName, String actionName, String areaName)
at Telerik.Web.Mvc.Infrastructure.Implementation.AuthorizationContextCache.<>c__DisplayClass1.<GetAuthorizationContext>b__0()
at Telerik.Web.Mvc.Infrastructure.Implementation.Cache.Get[T](String key, Func`1 defaultValueFactory)
at Telerik.Web.Mvc.Infrastructure.Implementation.AuthorizationContextCache.GetAuthorizationContext(RequestContext requestContext, String controllerName, String actionName, RouteValueDictionary routeValues)
at Telerik.Web.Mvc.Infrastructure.Implementation.ControllerAuthorization.IsAccessibleToUser(RequestContext requestContext, String controllerName, String actionName, RouteValueDictionary routeValues)
at Telerik.Web.Mvc.Infrastructure.Implementation.NavigationItemAuthorization.IsAccessibleToUser(RequestContext requestContext, INavigatable navigationItem)
at Telerik.Web.Mvc.UI.NavigatableExtensions.<>c__DisplayClass2`1.<IsAccessible>b__1(T item)
at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source, Func`2 predicate)
at Telerik.Web.Mvc.UI.NavigatableExtensions.IsAccessible[T](IEnumerable`1 items, INavigationItemAuthorization authorization, ViewContext viewContext)
at Telerik.Web.Mvc.UI.NavigationItemContainerExtensions.WriteItem[TComponent,TItem](TItem item, TComponent component, IHtmlNode parentTag, INavigationComponentHtmlBuilder`1 builder)
at Telerik.Web.Mvc.UI.Menu.<>c__DisplayClass4.<WriteHtml>b__3(MenuItem item)
at Telerik.Web.Mvc.Extensions.EnumerableExtensions.Each[T](IEnumerable`1 instance, Action`1 action)
at Telerik.Web.Mvc.UI.Menu.WriteHtml(HtmlTextWriter writer)
at Telerik.Web.Mvc.UI.ViewComponentBase.Render()
at Telerik.Web.Mvc.UI.ViewComponentBuilderBase`2.Render()
at ASP._Page_Views_Shared__Layout_cshtml.Execute() in e:\kidda\Views\Shared\_Layout.cshtml:line 34
at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
at System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
at System.Web.WebPages.WebPageBase.<>c__DisplayClass7.<RenderPageCore>b__6(TextWriter writer)
at System.Web.WebPages.HelperResult.WriteTo(TextWriter writer)
at System.Web.WebPages.WebPageBase.Write(HelperResult result)
at System.Web.WebPages.WebPageBase.RenderSurrounding(String partialViewName, Action`1 body)
at System.Web.WebPages.WebPageBase.PopContext()
at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
at System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer, Object instance)
at System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter writer)
at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
at System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)
at System.Web.Mvc.Controller.ExecuteCore()
at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext)
at System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext)
at System.Web.Mvc.MvcHandler.<>c__DisplayClass6.<>c__DisplayClassb.<BeginProcessRequest>b__5()
at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass1.<MakeVoidDelegate>b__0()
at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
at System.Web.Mvc.MvcHandler.<>c__DisplayClasse.<EndProcessRequest>b__d()
at System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f)
at System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action)
at System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult)
at System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result)
at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

所有错误堆栈跟踪的堆栈跟踪中的共同点是 _Layout.cshtml 中的第 34 行，它使用以下代码绘制菜单

```
<nav>
    <div id="topMenu" >
        <div style="width: 45%; float: right">
             @{ Html.Telerik().Menu()
                 .Name("Menu")
                 .Items(menu =>
                  {
                      menu.Add()
                        .Text("Ngaari")
                        .Items(item =>
                        {
                            item.Add().Text("List").Action("Index", "Ngaari");
                            item.Add().Text("Statement").Action("Index", "Statement");
                        });
                      menu.Add()
                        .Text("Njia")
                        .Action("Index", "Njia");
                      menu.Add()
                        .Text("Kiama")
                        .Action("Index", "Kiama");
                      menu.Add()
                        .Text("Ngaari Type")
                        .Action("Index", "NgaariType");
                      menu.Add()
                        .Text("Admin")
                        .Items(item =>
                        {
                            item.Add().Text("List Users").Action("Index", "Account");
                            item.Add().Text("Add User").Action("NewUser", "Account");
                            item.Add().Text("Change Password").Action("ChangePassword", "Account");
                        });
                })
                .Render();
              }
        </div>
    </div>
</nav> 
```

该应用程序在具有 4Gb 内存的 Windows 2003 SP2 上运行，用户使用 Mozilla Firefox 访问系统。

我在 Telerik 论坛和 SOF 中进行了谷歌搜索和搜索，但没有找到任何可能遇到类似问题的答案或类似用户。

什么可能导致此错误，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:53:03.827

通过监控服务器上的性能和内存使用情况解决了该问题。我意识到 IIS 正在与 SQL Server 竞争内存并且内存没有被频繁回收，这就是导致问题的原因

根据[IIS 6 Administration](https://rads.stackoverflow.com/amzn/click/com/0072194855)的建议，我执行了以下操作：

*   设置应用程序池在预设数量的请求后回收
*   设置在低活动时间回收工作进程的时间
*   设置应用程序使用的虚拟和物理内存量上限

执行上述操作完全消除了问题。

# cross-domain - 如何将数据发送到其他域

> ID：11772032
> 
> 赞同：2
> 
> 时间：2012-08-02T06:19:30.937
> 
> 标签：cross-domain

我在 BigCommerece 有一家商店。 **我的问题是**：如何将客户详细信息从一个域 A 发送到另一个域 B，以及如何在域 B 中检索它。我们在 bigcommerce 中如何做？请帮我。

# extjs4 - 从远程服务器填充组合框

> ID：11772034
> 
> 赞同：0
> 
> 时间：2012-08-02T06:19:37.483
> 
> 标签：extjs4, extjs4.1

我有一个`combobox`，我需要从服务器填充数据。在服务器端，我要显示以下数据。

```
PersonID
PersonFName
PersonLName 
```

在组合框中，我需要将文本显示为`PersonFName + PersonLName`（Like `James Smith`- 这是它将在下拉列表中显示的内容），当用户选择一条记录时，我需要显示相应的`PersonID`（Like Person with `PersonFName`and `PersonLName`has the PersonID of `1`）该用户的。

我无法弄清楚，这是我的代码

看法 ：

```
{
                    xtype: 'combobox',
                    id: 'personcombo',
                    readOnly: false,
                    selectOnFocus: true,
                    forceSelection: true,
                    store: 'Person'  
            } 
```

店铺 ：

```
Ext.define('MyApp.store.PersonStore', {
    extend: 'Ext.data.Store',
    requires: [
        'MyApp.model.Person'
    ],

    constructor: function(cfg) {
        var me = this;
        cfg = cfg || {};
        me.callParent([Ext.apply({
            model: 'MyApp.model.Person',
            proxy: {
                type: 'ajax',
                api: {
                    read: 'person.php',
                    create: 'person.php'
                },
                reader: {
                    type: 'array'
                }
            }
        }, cfg)]);
    }
}); 
```

模型 ：

```
Ext.define('MyApp.model.Person', {
    extend: 'Ext.data.Model',

    fields: [
        {
            name: 'PersonID'
        },
        {
            name: 'PersonFName'
        },
        {
            name: 'PersonLName'
        }
    ]
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T16:30:59.313

我认为您的问题是：如何在组合框中显示`PersonFName`+`PersonLName`但将`PersonID`字段保留为值。

您应该添加一个[转换](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Field-cfg-convert)后的字段，它将数据模型中的名字和姓氏连接起来，然后将其设为您的组合框`displayField`配置。

尽管另一个答案确实提出了一个很好的观点，即组合中定义的商店是，`Person`但您正在显示名为`PersonStore`.

它看起来像这样：

**模型：**

```
Ext.define('MyApp.model.Person', {
    extend: 'Ext.data.Model',

    fields: [
        {
            name: 'PersonID'
        },
        {
            name: 'PersonFName'
        },
        {
            name: 'PersonLName'
        },
        {
            name: 'PersonName',
            convert: function(value, record) {
                return record.data.PersonFName + ' ' + 
                    record.data.PersonLName;
            }
        }
    ]
}); 
```

**店铺：**

```
// changed to "Person" instead of "PersonStore"
Ext.define('MyApp.store.Person', {
    extend: 'Ext.data.Store',
    requires: [
        'MyApp.model.Person'
    ],

    model: 'MyApp.model.Person',
    proxy: {
        type: 'ajax',
        api: {
            read: 'person.php',
            create: 'person.php'
        },
        reader: 'array'
    }
}); 
```

**看法：**

```
{
    xtype: 'combobox',
    id: 'personcombo',
    readOnly: false,
    selectOnFocus: true,
    forceSelection: true,
    store: 'Person',
    valueField: 'PersonID',
    displayField: 'PersonName' // the converted field

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T11:24:44.067

您的组合框将“Person”作为商店，但我没有看到您在任何地方创建名为 Person 的商店。试试`store: Ext.create('MyApp.store.PersonStore', {autoLoad: true})`。

您还可以简化您的商店：

```
Ext.define('MyApp.store.PersonStore', {
    extend: 'Ext.data.Store',
    requires: [
        'MyApp.model.Person'
    ],

    model: 'MyApp.model.Person',
    proxy: {
        type: 'ajax',
        api: {
            read: 'person.php',
            create: 'person.php'
        },
        reader: 'array'
    }
}); 
```

# c++ - C++ 奇怪的循环

> ID：11772035
> 
> 赞同：0
> 
> 时间：2012-08-02T06:19:43.897
> 
> 标签：c++, loops

我写了这个函数。在调试时，我看到在函数的最后，它进入`string cmonth[]`声明，然后回到函数的最后，然后返回`string cmonth[]`声明，大约 10 次。然后它回到函数的第一行，然后回到函数的最后一行大约 100 次或更多。

```
int CheckLastDate(string file)
{
string line, dline[200];
int i = 0;
regex rxdate("[[:digit:]].:[[:digit:]].:[[:digit:]].");
ifstream infile;
infile.open(file.c_str());

if(! infile.is_open()) return -1;

while (infile.good())
{
    getline(infile, line);
    if(regex_search(line, rxdate))
    {
        dline[i] = line;
        i++;
    }
}
i--; //needed b/c dline starts at 0;
infile.close();

int imonth, day, hour, min, sec, year;
string month, ampm;
string cmonth[] = {"Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" };

month = dline[i].substr(5,3);
//convert month to number
for(int j = 0; j<12; j++)
{
    if(month == cmonth[j]) imonth=j+1;
}

day = atoi(dline[i].substr(9, 2).c_str());
hour = atoi(dline[i].substr(12, 2).c_str());
min = atoi(dline[i].substr(15, 2).c_str());
sec = atoi(dline[i].substr(18, 2).c_str());
ampm = dline[i].substr(21, 2);
year = atoi(dline[i].substr(24, 4).c_str());

if(ampm == "PM" && hour != 12) { hour += 12; } //turn into 24 hours
else if(ampm == "AM" && hour == 12) { hour = 0; }

time_t now, dif; //dif = date in file
double diff;
time(&now);
struct tm * timeinfo;
timeinfo = localtime(&now);
timeinfo->tm_mon = imonth - 1;
timeinfo->tm_mday = day;
timeinfo->tm_hour = hour;
timeinfo->tm_min = min;
timeinfo->tm_sec = sec;
timeinfo->tm_year = year - 1900;
timeinfo->tm_isdst = -1; //-1 = no info
dif = mktime(timeinfo);
diff = difftime(now, dif);

if(diff >= 86400) return 1; //more then 24 hours
else return 0;
} 
```

有什么问题吗，还是 C++ 是如何工作的？感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T06:48:00.383

看起来不错，但有一些一般性的指示：

即使找到月份，您的 for 循环检查也会遍历所有月份，这似乎没有必要。

您应该养成始终初始化所有变量的习惯。在调试模式下，变量可能会被初始化，但在发布模式下，它们通常不会。

您应该添加一些检查以确保正则表达式返回的字符串具有您期望的格式。例如检查长度。`strtok_s()`如果标记用空格分隔，您也可以使用将字符串分开。它可能比期望令牌始终具有特定长度或位于特定索引处更安全。

当您从文件中读入时，如果文件超过 200 行，则不会进行检查以防止出现错误。你应该考虑这一点。例如`while (infile.good() && i < 200)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T06:22:34.493

它是调试版本还是发布版本？另外，您是在 C++ 代码级别还是在汇编程序级别进行调试的？

在发布版本中，编译器可能会生成初始函数中不存在的各种代码跳转。

# ios - Phonegap中ios的蓝牙插件

> ID：11772036
> 
> 赞同：2
> 
> 时间：2012-08-02T06:19:44.133
> 
> 标签：ios, plugins, cordova

目前在 中`phonegap plugins`，我只能找到适用于 Android 的蓝牙插件。

我们有蓝牙插件吗`iOS`？

如果有，请告诉我。

如果没有，我们应该如何在 ios 中通过 phonegap 启用和禁用蓝牙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:39:14.490

对于 Android 有：[https ://github.com/phonegap/phonegap-plugins/tree/master/Android/Bluetooth](https://github.com/phonegap/phonegap-plugins/tree/master/Android/Bluetooth)

对于 iOS，**没有**：[https ://github.com/phonegap/phonegap-plugins/tree/master/iOS](https://github.com/phonegap/phonegap-plugins/tree/master/iOS)

**没有**Apache Cordova 文档 API 参考：http : [//docs.phonegap.com/en/2.0.0/index.html](http://docs.phonegap.com/en/2.0.0/index.html)

**如果不在那里，那么在哪里？:(**

我也想知道如何蓝牙、配对设备、多人游戏、破解世界:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T12:27:02.817

从 PhoneGap v2.7.0 看来，这个插件适用于 Android 和 iOS（通过 BLE） [https://github.com/don/BluetoothSerial](https://github.com/don/BluetoothSerial)

看来这个插件在PhoneGap Build上也可用

# php - 在 PHP 中转换日期格式（无 SQL）

> ID：11772037
> 
> 赞同：0
> 
> 时间：2012-08-02T06:19:45.267
> 
> 标签：php

如何将日期从`yyyy:mm:dd`到`yyyy-m-dd`和`yyyy:mm:dd`（不带前导零的月份）转换为`yyyy-m-dd`（带前导零到月份）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T06:24:17.963

您可以使用[DateTime::createFromFormat](http://www.php.net/manual/en/datetime.createfromformat.php)，然后使用[DateTime::format](http://www.php.net/manual/en/datetime.format.php)。

***例子：***

```
$date = DateTime::createFromFormat('Y:m:d', '2012:08:02');
echo $date->format('Y-m-d');

// without leading zero for month
$date = DateTime::createFromFormat('Y:n:d', '2012:8:02');
echo $date->format('Y-m-d'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T06:23:39.610

使用该`$date=strtotime($date)`函数获取**unix timestamp**中的日期。之后，您可以使用该`date("Y-m-d",$date)`函数将其转换为您想要的格式。这是一个示例：

```
$date=strtotime($olddate);
$date=date("Y-m-d",$date);
echo $date; // Now this will show you the date in the format you wanted :) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T06:27:52.823

试试这个：

```
$dateFrom ="2012:8:2";
$dateTo =  str_replace(":","-",$dateFrom);
$dateTo = date("Y-m-d", strtotime($dateTo));
echo $dateTo; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T06:45:47.060

使用该[`date`](http://php.net/manual/en/function.date.php)功能。

`date`将无法理解`:`为分隔符，因此您需要将其替换为它可以理解的分隔符，例如`/`or `-`，以及[`str_replace`](http://php.net/manual/en/function.str-replace.php).

代码：

```
$orig_date = '2012:8:2';
$final_date = date('Y-n-d', str_replace(':', '/', $orig_date));
echo $final_date; // Result: 2012-8-02 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T06:23:44.563

使用日期（）函数

```
echo date('Y-m-d'); // for 1st case (replacing ':' with '-')
echo date('Y-j-d'); // for 2nd case (without leading zero) 
```

# python - Python minidom：列出每个父标签的子节点属性

> ID：11772038
> 
> 赞同：4
> 
> 时间：2012-08-02T06:19:46.510
> 
> 标签：python, list, for-loop, attributes, minidom

我有，

```
<parent id="1">
    <child id="white"></child>
    <child id="red"></child>
</parent>
<parent id="2">
    <child id="green"></child>
    <child id="gray"></child>
</parent> 
```

我需要这个输出，

```
1 
 white
 red
2
 green
 gray 
```

我就是这样做的，

```
parent = xmldoc.getElementsByTagName('parent')
for item in parent:
    child = xmldoc.getElementsByTagName('child')
    child_id = child.getAttribute('id')
    for child_id in child:
        print child_id 
```

当然，我弄错了，但不知道如何遍历这些父 ID 并单独收集每个列表。我会很感激一些帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T06:39:09.747

Try this

```
import xml.dom.minidom as minidom

a = '<parent id="1"><child id="white"></child><child id="red"></child></parent>'
dom = minidom.parseString(a)

for parent in dom.childNodes:
    print parent.getAttribute('id')
    for child in parent.childNodes:
        print '  %s' % child.getAttribute('id') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T06:42:17.493

因为您在猜测代码和语法：

```
import xml.dom.minidom

s =  """<?xml version="1.0"?>
<container>
<parent id="1">
    <child id="white"></child>
    <child id="red"></child>
</parent>
<parent id="2">
    <child id="green"></child>
    <child id="gray"></child>
</parent>
</container>
"""

xmldoc = xml.dom.minidom.parseString(s)

parent = xmldoc.getElementsByTagName('parent')
for item in parent:
    print item.getAttribute('id')
    for child in item.getElementsByTagName('child'):
        print child.getAttribute('id') 
```

# vb6 - 在 VB 6.0 中调整用户上传照片的大小以适合我的图片框

> ID：11772042
> 
> 赞同：1
> 
> 时间：2012-08-02T06:20:00.893
> 
> 标签：vb6

我正在使用 VB 6.0 开发一个库存管理项目。现在我想包含一个功能，允许用户将他的项目的照片上传到我的系统。然后我想将它保存到数据库中。此外，我想将照片尺寸限制为 600*600。因此，当用户上传大于 600*600 像素的图片时，我的系统应自动调整照片大小以适合我的图片框。任何人都可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:15:29.737

没有简单的方法可以做到这一点。我将利用 VB 标准控件的副作用。取一个表单/UserControl/whatever，并坚持以下控件：

*   图片控件<imgPic>
*   图片控件<imgSize>
*   图片框控件 <pctCanvas>

我添加了 <dlgOpen> 只是为了创建一个文件打开对话框。

<imgPic> 仅用于预览图片。<imgSize> 用于轻松获取图片文件的宽度和高度（以像素为单位）（请注意，我将表单的 ScaleMode 属性设置为 vbPixels 以便更轻松地执行此操作）。<pctCanvas> 纯粹是用来让我调整图片的大小。

添加以下代码：

```
Option Explicit

' Edit these if you change your mind about the photo size.
Private Const m_ksngMaxPixelsX       As Single = 600!
Private Const m_ksngMaxPixelsY       As Single = 600!

Private Sub cmdLoad_Click()

    On Error GoTo ErrorHandler:

    dlgOpen.Filter = "Picture Files|*.bmp;*.jpg;*.gif"
    dlgOpen.ShowOpen

    UploadPicture dlgOpen.FileName

Exit Sub

ErrorHandler:
    Err.Raise Err.Number, Err.Source, Err.Description
End Sub

Private Sub Form_Load()

    Me.ScaleMode = vbPixels
    pbCanvas.ScaleMode = vbPixels

    imgPic.Width = m_ksngMaxPixelsX
    imgPic.Height = m_ksngMaxPixelsY

    imgSize.Visible = False

    pbCanvas.Visible = False
    pbCanvas.AutoRedraw = True

End Sub

' Get a new filename, based on the original. It will always be a BMP bitmap.
Private Function GetResizedFilename(ByRef the_sFilename As String) As String

    Dim nPosDot                 As Long

    On Error GoTo ErrorHandler

    nPosDot = InStrRev(the_sFilename, ".")
    GetResizedFilename = Left$(the_sFilename, nPosDot - 1) & "-resized.bmp"

Exit Function

ErrorHandler:
    Err.Raise Err.Number, Err.Source, Err.Description
End Function

Private Sub ProcessPicture(ByRef the_sFilename As String, ByRef out_sProcessedFilename As String)

    Dim sngPixelsX          As Single
    Dim sngPixelsY          As Single

    On Error GoTo ErrorHandler

    ' Get the size of our picture. Would have liked to have used a StdPicture object here, instead.
    Set imgSize.Picture = LoadPicture(the_sFilename)

    sngPixelsX = imgSize.Width
    sngPixelsY = imgSize.Height

    ' If at least one of height and width is too bix, resize the biggest value down to m_ksngMaxPixels? and resize the other value proportionally.
    If sngPixelsX > m_ksngMaxPixelsX Or sngPixelsY > m_ksngMaxPixelsY Then
        If sngPixelsX > sngPixelsY Then
            sngPixelsY = m_ksngMaxPixelsY * sngPixelsY / sngPixelsX
            sngPixelsX = m_ksngMaxPixelsX
        Else
            sngPixelsX = m_ksngMaxPixelsX * sngPixelsX / sngPixelsY
            sngPixelsY = m_ksngMaxPixelsY
        End If

        ' Resize the canvas so that the persistent bitmap is the same size as the final picture, and then paint our picture onto that canvas, resizing down.
        pbCanvas.Move 0!, 0!, sngPixelsX, sngPixelsY
        pbCanvas.PaintPicture imgSize.Picture, 0!, 0!, sngPixelsX, sngPixelsY

        ' Get a reference to the persistent bitmap.
        Set imgPic.Picture = pbCanvas.Image

        out_sProcessedFilename = GetResizedFilename(the_sFilename)
        SavePicture pbCanvas.Image, out_sProcessedFilename

    Else
        out_sProcessedFilename = the_sFilename
        Set imgPic.Picture = imgSize.Picture
    End If

Exit Sub

ErrorHandler:
    Err.Raise Err.Number, Err.Source, Err.Description
End Sub

Private Sub SaveToDatabase(ByRef the_sProcessedFilename As String)

    Dim nFileNo             As Integer
    Dim abytPictureFile()   As Byte
    Dim nFileLen            As Long

    ' Open the file in binary mode, resize a byte array to fit the file's contents, load it into the array, and close the array.
    nFileNo = FreeFile
    Open the_sProcessedFilename For Binary As #nFileNo

    nFileLen = LOF(nFileNo)
    ReDim abytPictureFile(1 To nFileLen)
    Get #nFileNo, , abytPictureFile()

    Close #nFileNo

    '
    ' YOUR WORK INSERTED HERE
    '

Exit Sub

ErrorHandler:
    Err.Raise Err.Number, Err.Source, Err.Description
End Sub

Private Sub UploadPicture(ByRef the_sFilename As String)

    Dim sProcessedFilename As String

    On Error GoTo ErrorHandler

    ProcessPicture the_sFilename, sProcessedFilename

    SaveToDatabase sProcessedFilename

Exit Sub

ErrorHandler:
    Err.Raise Err.Number, Err.Source, Err.Description
End Sub 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-02T06:29:18.277

```
// This will be your uploaded images folder
string target = Server.MapPath("~/ImageFolder" ); 

Image.GetThumbnailImageAbort thumbnailImageAbortDelegate =
    new Image.GetThumbnailImageAbort(ThumbnailCallback);  

foreach (UploadedFile file in RadUpload1.UploadedFiles)
{  
    file.SaveAs(Path.Combine(target, file.GetName()));  
    using (Bitmap originalImage = new Bitmap(file.InputStream))
    { 
        // Set the resize here. You can use a constant or set a function here.
        int width = 600;
        int height = 600; 
        using (Image thumbnail = originalImage.GetThumbnailImage(width, height, thumbnailImageAbortDelegate, IntPtr.Zero))   
        {   
            string thumbnailFileName = Path.Combine(target,
                string.Format("{0}_thumb{1}" ,  file.GetNameWithoutExtension(), file.GetExtension()));
            thumbnail.Save(thumbnailFileName);   
        }   
    } 
} 
```

# f# - F# 代码引用中的文件和行号

> ID：11772046
> 
> 赞同：3
> 
> 时间：2012-08-02T06:20:20.930
> 
> 标签：f#

有没有办法从代码引用中提取文件名和行号，以便我们可以添加添加调试信息以转换引用的代码。有什么替代方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:29:11.897

尝试这样的事情：

```
let sourceInfo (e:Quotations.Expr) = 
    let (|Val|_|) e : 't option = 
        match e with
        | Quotations.Patterns.Value(:? 't as v,_) -> Some v
        | _ -> None
    let (|Tup|_|) = Quotations.Patterns.(|NewTuple|_|)

    e.CustomAttributes
    |> List.tryPick (function | Tup [Val("DebugRange")
                                     Tup [Val(file:string)
                                          Val(startLine:int) 
                                          Val(startCol:int)
                                          Val(endLine:int)
                                          Val(endCol:int)]] 
                                  -> Some(file,startLine,startCol,endLine,endCol) 
                              | _ -> None)

sourceInfo <@ "test" @> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-26T19:45:46.367

这现在内置在 F# 中

[https://msdn.microsoft.com/en-us/library/dd233234.aspx](https://msdn.microsoft.com/en-us/library/dd233234.aspx)

```
__LINE__
__SOURCE_DIRECTORY__
__SOURCE_FILE__ 
```

# python - 关闭 tcp 连接时结束进程

> ID：11772051
> 
> 赞同：0
> 
> 时间：2012-08-02T06:20:45.563
> 
> 标签：python, sockets, tcp, process

我正在开发一个客户端-服务器应用程序，每当新客户端连接到服务器时，服务器都会使用该`multiprocessing`模块生成一个新进程。它的目标函数是一个获取套接字并进行 I/O 的函数。我遇到的问题是，一旦客户端和服务器上的进程之间的 TCP 连接关闭，我该如何/在哪里放置 .join() 函数调用以结束子进程？我还需要像在 C 中那样在父进程中执行任何 waitpid 吗？

服务器代码：

```
def new_client(conn_socket):
    while True:
        message = conn_socket.recv(BUFFER_SIZE)
        conn_socket.send(message)  
        #just echo the message
        #how to check to see if the TCP connection is still alive?
        #put the .join() here??

def main():
    #create the socket
    server_socket = socket(AF_INET,SOCK_STREAM)

    #bind the socket to the local ip address on a specific port and listen
    server_port = 12000                               
    server_socket.bind(('',server_port))
    server_socket.listen(1)

    #enter in a loop to accept client connections
    while True:
        connection_socket, client_address = server_socket.accept()       
        #create a new process with the new connection_socket
        new_process = Process(target = new_client, args = (connection_socket,))
        new_process.start()
        #put the .join() here or what??

if __name__ == '__main__':
    main() 
```

`thread`同样对于这种设置，在模块中使用线程还是留在进程中会更有利吗？正在开发服务器代码，以便在具有“平均”规格的服务器上大量使用（如何优化此设置）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:40:32.373

您需要检查`recv`. 如果它返回零，则连接很好地关闭，如果为负，则出现错误。

并且`join`调用应该在创建子进程的进程中。但是，要小心，因为`join`没有参数会阻塞调用进程，直到子进程完成。将进程放在一个列表中，并定期调用`join`一个小的超时。

**编辑：**最简单的方法是在无限接受循环的末尾添加迭代进程列表，并检查它是否为`is_alive`. 如果没有，则调用`join`并将其从列表中删除。

就像是：

```
all_processes = []
while True:
    connection_socket, client_address = server_socket.accept()       
    #create a new process with the new connection_socket
    new_process = Process(target = new_client, args = (connection_socket,))
    new_process.start()

    # Add process to our list
    all_processes.append(new_process)

    # Join all dead processes
    for proc in all_processes:
        if not proc.is_alive():
            proc.join()
    # And remove them from the list
    all_processes = [proc for proc in all_processes if proc.is_alive()] 
```

请注意，只有在我们获得新连接时才会清除旧进程。这可能需要一些时间，具体取决于您是否经常获得新连接。您可以使侦听套接字不阻塞并使用例如[`select`](http://docs.python.org/library/select.html)超时来了解是否有新连接，并且即使没有新连接，清除也会以更规律的间隔发生。

# java - 指示某些值的 Java 信号/事件机制可用

> ID：11772053
> 
> 赞同：4
> 
> 时间：2012-08-02T06:20:46.167
> 
> 标签：java, concurrency

我有一个生成器类，它拥有一个线程，其中确定了要生成的许多“记录”，然后生成那么多记录（这些记录被放置在 BlockingQueue 中以供另一个线程检索）。

我希望另一个线程知道将生成多少条记录（用于合理的进度报告等）。

似乎 Future 为我提供了我所追求的接口，但我是 Java 新手，不确定实现它的惯用方式。

我的背景是 C++/Win32，所以我通常会使用 win32“事件”（由`CreateEvent(0, true, false, 0)`、`SetEvent`和`WaitForSingleObject`为我的信号和等待实现创建）。我注意到 Java 有一个`CountDownLatch`，但不知何故这感觉比我所追求的要重（有点类似于在我真正想要一个布尔值时使用 int ），并且为此目的似乎不直观（无论如何对我来说）。

所以这是我使用 CountDownLatch 和 Future 的代码。我在这里稍微提炼了我的真实代码（删除了不相关的实现细节并忽略了所有错误处理）。

```
 import java.util.concurrent.BlockingQueue;
    import java.util.concurrent.CountDownLatch;
    import java.util.concurrent.Future;
    import java.util.concurrent.LinkedBlockingQueue;
    import java.util.concurrent.TimeUnit;

    public abstract class Generator {

        private CountDownLatch numRecordsSignal = new CountDownLatch(1);

        private int numRecords;

        private BlockingQueue<Record> queue = new LinkedBlockingQueue<Record>();

        public Generator() {
            new Thread(new Runnable() {

                @Override
                public void run() {
                    numRecords = calculateNumRecords();
                    numRecordsSignal.countDown();

                    for (Record r : generateRecords()) {
                        try {
                            queue.put(r);
                        } catch (InterruptedException e) {
                            // [ ... snip ... ]
                        }
                    }                
                }
            }).start();
        }

        public Future<Integer> numRecords() {
            return new Future<Integer>() {
                // Ignore cancel for now (It wouldn't make sense to cancel 
                // just this part of the Generator's work, anyway).
                public boolean cancel(boolean mayInterruptIfRunning) { 
                    return false; 
                }

                public Integer get() throws InterruptedException {
                    numRecordsSignal.await();
                    return numRecords;
                }

                public Integer get(long timeout, TimeUnit unit) 
                        throws InterruptedException {
                    numRecordsSignal.await(timeout, unit);
                    return numRecords;
                }

                public boolean isCancelled() {
                    return false;
                }

                public boolean isDone() {
                    // Since we can't cancel, just check the state of the 
                    // signal
                    return numRecordsSignal.getCount() == 0;
                }
            };
        }

        public Record nextRecord() throws InterruptedException {
            return queue.take();
        }

        /** --- Boring stuff below this line --- */
        public interface Record { }

        protected abstract int calculateNumRecords();

        protected abstract Iterable<Record> generateRecords();                        
    } 
```

**现在我的实际问题：**

1.  有没有比`CountDownLatch`单发信号更好的机制？
2.  我希望调用者能够等待或轮询结果，但不需要他们能够取消操作。Future 是暴露这些东西的正确方法吗？
3.  这些东西看起来特别“非Java”吗？我完全走错了吗？

**编辑：**

澄清一下，我希望调用者能够执行以下操作：

```
 Generator gen = new Generator();
    Integer numRecords = gen.numRecords().get();  // This call might block waiting for the result
    numRecords = gen.numRecords().get(); // This call will never block, as the result is already available. 
```

这只是我试图实现的一个缓慢初始化的值。一旦满足“初始化”条件，它就应该锁存。一旦知道该值，就不会对其进行重新评估。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T09:50:40.883

**旁注**

[您不应该在构造函数中启动线程](https://stackoverflow.com/questions/8057510/java-starting-a-new-thread-in-a-constructor)- 很可能在线程启动时未完全创建 Generator 对象，例如倒计时锁存器很可能为 null。您可以在构造函数中创建线程，但应该以单独的方法启动它。您的调用代码将变为：

```
Generator g = new Generator();
g.start(); 
```

**你的问题**

您正在自己重新实现 Future，在我看来，这既没有必要也不可取。我会重新设计这个类并通过一个执行器来`Generator`实现`Callable<Integer>`和运行它。这为您提供了几件事：

*   从生成器中删除线程逻辑，这使您能够在调用堆栈的更高级别更有效地管理线程
*   整数通过调用代码中的未来返回，您依赖 JDK 来处理实现
*   我假设可以先填充队列然后返回整数
*   您可以`future.get()`根据需要多次调用 - 它只会在第一次调用时阻塞。

```
public static void main(String[] args) {
    ExecutorService executor = Executors.newFixedThreadPool(1);
    Future<Integer> future = executor.submit(new GeneratorImpl()); //a concrete implementation of Generator
    int numRecords = 0;
    try {
        numRecords = future.get(); //you can use a get with timeout here
    } catch (ExecutionException e) {
        //an exception happened in Generator#call()
    } catch (InterruptedException e) {
        //handle it
    }

    //don't forget to call executor.shutdown() when you don't need it any longer
}

public abstract class Generator implements Callable<Integer> {

    private BlockingQueue<Record> queue = new LinkedBlockingQueue<Record>();

    @Override
    public Integer call() {
        int numRecords = calculateNumRecords();
        for (Record r : generateRecords()) {
            try {
                queue.put(r);
            } catch (InterruptedException e) {
                // [ ... snip ... ]
            }
        }
        return numRecords;
    }

    public Record nextRecord() throws InterruptedException {
        return queue.take();
    }

    /**
     * --- Boring stuff below this line ---
     */
    public interface Record {
    }

    protected abstract int calculateNumRecords();

    protected abstract Iterable<Record> generateRecords();
} 
```

* * *

**编辑**

如果您需要尽快返回 numRecods，您可以在单独的线程中填充您的队列：

```
 public Integer call() {
        int numRecords = calculateNumRecords();
        new Thread(new Runnable() {
            @Override
            public void run() {
                for (Record r : generateRecords()) {
                    try {
                        queue.put(r);
                    } catch (InterruptedException e) {
                        // [ ... snip ... ]
                    }
                }
            }
        }).start(); //returns immediately
        return numRecords;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T06:25:41.207

Java 线程的“WaitOnSingleEvent()”和“SetEvent()”的标准 Java 等效项是“wait()”、“notify()”和“notifyAll()”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T03:30:11.657

在查看了实现我自己的信号机制并遵循其他人做同样事情留下的面包屑痕迹之后，我遇到了[AbstractQueuedSynchronizer](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/AbstractQueuedSynchronizer.html)的 javadoc ，其中包括一个“BooleanLatch”的代码片段，它完全满足了我的需求：

```
class BooleanLatch {
    private static class Sync extends AbstractQueuedSynchronizer {
        boolean isSignalled() { return getState() != 0; }

        protected int tryAcquireShared(int ignore) {
            return isSignalled()? 1 : -1;
        }

        protected boolean tryReleaseShared(int ignore) {
            setState(1);
           return true;
        }
    }

    private final Sync sync = new Sync();
    public boolean isSignalled() { return sync.isSignalled(); }
    public void signal()         { sync.releaseShared(1); }
    public void await() throws InterruptedException {
        sync.acquireSharedInterruptibly(1);
    }
 } 
```

进行更多搜索后，我发现许多框架都包含 BooleanLatch（Apache Qpid 就是其中之一）。一些实现（例如 Atlassian 的）是自动重置的，这会使它们不适合我的需要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T06:44:39.653

如果我正确理解您的问题，标准观察者通知模式在这里会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T07:39:40.820

对于这种情况下的单发信号，[信号量](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Semaphore.html)更好，因为它记住了“信号”。条件对象 [wait() is on a condition] 不会记住信号。

```
 Semaphore numRecordsUpdated = new Semaphore(0); 
```

在生成器中

```
 numRecordsUpdated.release(); 
```

在消费者

```
 numRecordsUpdated.acquire(); 
```

# ruby-on-rails - Ruby On Rails Twitter 应用程序

> ID：11772054
> 
> 赞同：0
> 
> 时间：2012-08-02T06:20:49.353
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我是**Ruby On Rails**的新手。**我想创建一个简单的应用程序，它有一个带有搜索框**和**提交按钮**的主页。搜索框用于动态搜索**twitter**上的关键字。该应用程序连接到 twitter，获取包含搜索关键字的所有提要并显示在我的应用程序的主页上。谁能指导我该怎么做？我想从头开始创建一个应用程序。请为相同的任何示例提供站点。任何的意见都将会有帮助。

谢谢， 巴尔加夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:26:38.177

如果你真的想从头开始，不使用任何 gem，你应该去[Twitter API 参考](https://dev.twitter.com/)，然后从那里开始

我建议你使用[twitter gem](https://github.com/sferik/twitter)

RailsCasts 有一个很好的插曲，但[Twitter 集成](http://railscasts.com/episodes/359-twitter-integration)的插曲不是免费的。

如果您打算长期使用 Rails，那么订阅是非常值得的。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:30:06.437

我最近从头开始编写了一个小型 Twitter 应用程序（没有 Twitter gem），也许它会有所帮助：

[https://github.com/sos4nt/jack-of-all-tweets](https://github.com/sos4nt/jack-of-all-tweets)

Heroku 上有一个实例正在运行：[https ://jack-of-all-tweets.herokuapp.com](https://jack-of-all-tweets.herokuapp.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T06:24:19.350

您可能应该使用 twitter gem：[https ://github.com/sferik/twitter](https://github.com/sferik/twitter)

# algorithm - 简单游戏编程的数学/算法（新手）？

> ID：11772059
> 
> 赞同：0
> 
> 时间：2012-08-02T06:21:17.363
> 
> 标签：algorithm, math

我是游戏编程的新手，我通常编写企业软件。

我的问题是我需要学习哪些数学才能创建这些游戏

*   蛇游戏
*   俄罗斯方块
*   纸牌游戏之类的纸牌游戏

非常感谢任何可以帮助我创建这个游戏的参考/书籍

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T06:30:00.870

如果你知道如何处理一些基本的数据结构，比如列表和“二维”数组，那么这些游戏就不需要太多数学。

编辑：此外，这种游戏逻辑可能只占游戏代码的一小部分。剩下的就是处理用户输入、图形、声音、时间等，而正确地处理这些（在程序中拥有良好的架构）是一项更具挑战性的任务。另一方面，至少其中一些事情可以委托给现成的游戏引擎/框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:01:45.870

对于简单的游戏编程，您需要的唯一数学是非常基本的空间推理，以便您可以告诉计算在屏幕上的何处绘制/动画对象。因此，在这种情况下，我不会担心缺乏数学背景。当您编写更复杂的游戏时，您可能需要数学，但我建议您自由探索游戏开发并根据需要进行数学复习:)

由于您特别询问了简单游戏，以下是您必须为您描述的游戏解决的数学问题的一些示例：

*   假设您正在编写一个单人纸牌游戏，每张纸牌都是`w`像素宽，水平布局，`p`每张都由像素分隔。你必须推断出这张牌在位置 ( + ) * n `n`^。`w``p`

*   假设您正在编写俄罗斯方块，您可能希望方块每`m`毫秒平滑滑行到下一个网格单元。那么你需要`[grid cell size] * 1000 / (m * [frames per second])`每帧移动每个块像素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T06:54:34.890

Just as a general guideline, you probably don't have to worry about "which math do i need to learn" unless you're using programming to solve a math problem.

For stuff like programming simple games, it's much more important to learn your data structures and algorithms well, and to be able to design and implement clean, correct, and maintainable code. Math doesn't usually come into the picture unless you're trying to compare two different implementations, and even then, you really only need enough to have an intuitive sense of what constitutes fast enough for what you need.

# c# - 通过在 xslt 中调用 C# 函数来更改 xml 文件

> ID：11772063
> 
> 赞同：2
> 
> 时间：2012-08-02T06:21:31.867
> 
> 标签：c#, asp.net, xml, xslt

我的网站项目中有一个 xml 文件和一个 xslt 文件。当我运行该站点时，我需要从 xslt 调用 ac# 函数并更改 xml 文件中的值....下面是我的 xml 文件....我需要在其中添加一个文本（比如“先生”）通过 ac# 代码在每个名字的前面......添加后，它应该反映在 xml 文件中......另外，作为下一步，我需要通过另一个 c# 在 xml 文件中添加另一个节点（比如年龄）函数....请注意，应该从我的 xslt 文件中调用 c# 函数...。谁能帮我写一个简单的代码？？？？

```
<?xml version="1.0" encoding="utf-8" ?>
<root>
  <employee>
    <firstname>Kaushal</firstname>
    <lastname>Parik</lastname>
  </employee>
  <employee>
    <firstname>Abhishek</firstname>
    <lastname>Swarnkar</lastname>
  </employee>
</root> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T10:08:12.610

是的，您可以从 .xsl 文件中调用 C# 函数。请参考以下代码。

这是您的输入 XML 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<?xml-stylesheet type="text/xsl" href="cdcatalog.xsl"?>
<root>
<employee>
  <firstname>Kaushal</firstname>
  <lastname>Parik</lastname>
</employee>
<employee>
  <firstname>Abhishek</firstname>
  <lastname>Swarnkar</lastname>
</employee>
</root> 
```

C# 类中的格式化函数如下所示：

```
 public class MyXslExtension
{
    public string FormatName(string name)
    {
        return "Mr. " + name;
    }
} 
```

应用以下 xsl：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
            xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
            xmlns:myUtils="pda:MyUtils">
<xsl:output method="xml" indent="yes"/>
<xsl:variable name="vQ">Mr. </xsl:variable>
<xsl:template match="@*|node()">
<xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
</xsl:copy>
</xsl:template>
<xsl:template match="employee/firstname">
<xsl:element name="firstname">
  <xsl:value-of select="myUtils:FormatName(.)" />
</xsl:element>
</xsl:template>
</xsl:stylesheet> 
```

而 C# Functin 调用 Formatting 函数是这样的：

```
private void button3_Click(object sender, EventArgs e)
    {
        XsltArgumentList arguments = new XsltArgumentList();
        arguments.AddExtensionObject("pda:MyUtils", new MyXslExtension());

        using (StreamWriter writer = new StreamWriter("books1.xml"))
        {
            XslCompiledTransform transform = new XslCompiledTransform();
            transform.Load("transform.xslt");
            transform.Transform("books.xml", arguments, writer);
        }
    } 
```

输出是：

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="cdcatalog.xsl"?>
<root>
<employee>
<firstname>Mr. Kaushal</firstname>
<lastname>Parik</lastname>
</employee>
<employee>
<firstname>Mr. Abhishek</firstname>
<lastname>Swarnkar</lastname>  
</employee>
</root> 
```

我已参考[此链接](http://www.pedautreppe.com/post/Calling-C-function-in-XSL.aspx)来回答您的问题。

希望这会帮助你。
如果对你有用请标记+1....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T06:32:46.020

将 XSL 样式表引用添加到您的 XML 文档，如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<?xml-stylesheet type="text/xsl" href="cdcatalog.xsl"?>
<root>
  <employee>
    <firstname>Kaushal</firstname>
    <lastname>Parik</lastname>
  </employee>
  <employee>
    <firstname>Abhishek</firstname>
    <lastname>Swarnkar</lastname>
  </employee>
</root> 
```

或使用.NET[`XslTransform`](http://msdn.microsoft.com/en-us/library/system.xml.xsl.xsltransform.aspx)中的类来转换 XML 数据：`XSLT`

```
//Create the XslTransform object.
XslTransform xslt = new XslTransform();

//Load the stylesheet.
xslt.Load("output.xsl");

//Transform the file.
xslt.Transform("books.xml", "books.html"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T09:29:56.997

应用以下 .xslt：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">
<xsl:output method="xml" indent="yes"/>

<xsl:variable name="vQ">Mr. </xsl:variable>

<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="employee/firstname">
  <xsl:element name="firstname">
    <xsl:value-of  select="concat($vQ, .)"/>
  </xsl:element>
</xsl:template>

</xsl:stylesheet> 
```

输入是：

```
<?xml version="1.0" encoding="utf-8" ?>
<?xml-stylesheet type="text/xsl" href="cdcatalog.xsl"?>
<root>
<employee>
  <firstname>Kaushal</firstname>
  <lastname>Parik</lastname>
</employee>
<employee>
  <firstname>Abhishek</firstname>
  <lastname>Swarnkar</lastname>
</employee>
</root> 
```

输出是：

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="cdcatalog.xsl"?>
<root>
  <employee>
  <firstname>Mr. Kaushal</firstname>
  <lastname>Parik</lastname>
</employee>
<employee>
  <firstname>Mr. Abhishek</firstname>
  <lastname>Swarnkar</lastname>
</employee>
</root> 
```

C#函数是这样的：

```
private void button3_Click(object sender, EventArgs e)
    {
        XslTransform xslt = new XslTransform();  
        xslt.Load("transform.xslt");  
        xslt.Transform("books.xml", "books1.xml"); 
    } 
```

希望对你有帮助...

# javascript - 骨干多集合全局搜索

> ID：11772066
> 
> 赞同：2
> 
> 时间：2012-08-02T06:22:01.927
> 
> 标签：javascript, backbone.js, underscore.js

我正在玩弄创建一个全局搜索的想法，它允许我通过任何模型的属性在多个集合中的任何一个集合中找到任何模型。例如：

我有以下收藏：

*   用户
*   应用
*   角色

我不提前知道每个用户、应用程序和角色将具有哪些属性，但为了说明目的，可以说我有：

*   用户名
*   User.last_name
*   用户邮箱
*   应用程序.title
*   应用程序描述
*   角色名称
*   角色描述

现在，假设我创建了`Site`一个使用名为`search`. 我想`Site.search(term)`搜索每个集合中`term`与任何属性匹配的所有项目。本质上是全局模型搜索。

你会建议我如何处理这个问题？我可以通过遍历所有集合的模型和每个模型的属性来暴力破解它，但这似乎臃肿且效率低下。

有什么建议么？

/// 几分钟后...

这是我刚才尝试的一些代码：

```
find: function(query) {
    var results = {}; // variable to hold the results
    // iterate over the collections
    _.each(["users", "applications", "roles"], _.bind(function(collection){
        // I want the result to be grouped by type of model so I add arrays to the results object
        if ( !_.isUndefined(results[collection]) || !_.isArray(results[collection]) ) {
            results[collection] = [];
        }
        // iterate over the collection's models
        _.each(this.get(collection).models, function(model){
            // iterate over each model's attributes
            _.each(model.attributes, function(value){
                // for now I'm only considering string searches
                if (_.isString(value)) {
                    // see if `query` is in the attribute's string/value
                    if (value.indexOf(query) > -1) {
                        // if so, push it into the result's collection arrray
                        results[collection].push(model);
                    }
                };
            });
        });
        // a little cleanup
        results[collection] = _.compact(results[collection]);
        // remove empty arrays
        if (results[collection].length < 1) {
            delete results[collection];
        }
    },this));
    // return the results
    return results;
} 
```

这产生了预期的结果，我想它工作正常，但我正在迭代三个数组，这让我很困扰。可能没有其他解决方案，但我有一种感觉。如果有人可以推荐一个，谢谢！同时我会继续研究。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:09:57.460

我强烈建议您不要这样做，除非您的数据非常有限，而且性能对您来说并不是真正的问题。

如果您想执行搜索，则对所有内容进行迭代是不行的。搜索引擎索引数据并使该过程可行。很难构建搜索，并且没有客户端库可以有效地做到这一点。

这就是为什么每个人都在服务器上进行搜索的原因。存在易于（或某种程度上）使用的搜索引擎，例如[solr](http://lucene.apache.org/solr/)或更新的和我个人偏好的[elasticsearch](http://www.elasticsearch.org/)。大概您已经将模型/集合存储在服务器上，将它们编入索引应该是微不足道的。然后搜索变成了从您的客户端进行 REST 调用的问题。

# c# - MVC 从不同的控制器调用视图

> ID：11772072
> 
> 赞同：20
> 
> 时间：2012-08-02T06:22:25.353
> 
> 标签：c#, asp.net-mvc

我的项目结构是这样的：

*   控制器/ArticlesController.cs
*   控制器/评论Controller.cs
*   视图/文章/Read.aspx

read.aspx 带一个参数say“output”，是文章的详细信息，通过id和评论，从`ArticlesController.cs`

现在我想写然后阅读评论:: `write()`& `Read()`funct in`CommentsController.cs`

为了阅读带有评论的文章，​​我想通过传递输出参数来调用`Views/Articles/Read.aspx`from`CommentsController.cs``CommentsController.cs`

我怎样才能做到这一点？

## **更新**

代码在这里：

```
public class CommentsController : AppController
{
    public ActionResult write()
    {
        //some code
        commentRepository.Add(comment);
        commentRepository.Save();

        //works fine till here, Data saved in db
        return RedirectToAction("Read", new { article = comment.article_id });
    }

    public ActionResult Read(int article)
    {   
        ArticleRepository ar = new ArticleRepository();
        var output = ar.Find(article);

        //Now I want to redirect to Articles/Read.aspx with output parameter.
        return View("Articles/Read", new { article = comment.article_id });
    }
}

public class ArticlesController : AppController
{   
    public ActionResult Read(int article)
    {
        var output = articleRepository.Find(article);

        //This Displays article data in Articles/Read.aspx
        return View(output);
    }
} 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-08-02T06:46:45.720

如果要返回属于另一个控制器的视图，要直接回答您的问题，您只需指定视图的名称及其文件夹名称。

```
public class CommentsController : Controller
{
    public ActionResult Index()
    { 
        return View("../Articles/Index", model );
    }
} 
```

和

```
public class ArticlesController : Controller
{
    public ActionResult Index()
    { 
        return View();
    }
} 
```

此外，您正在谈论在另一个控制器中使用读取和写入方法。我认为您应该通过模型直接访问这些方法，而不是调用另一个控制器，因为另一个控制器可能返回 html。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T07:22:17.343

您可以将 read.aspx 视图移动到共享文件夹。在这种情况下，这是标准方式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T07:11:01.480

我不确定你的问题是否正确。也许像

```
public class CommentsController : Controller
{
    [HttpPost]
    public ActionResult WriteComment(CommentModel comment)
    {
        // Do the basic model validation and other stuff
        try
        {
            if (ModelState.IsValid )
            {
                 // Insert the model to database like:
                 db.Comments.Add(comment);
                 db.SaveChanges();

                 // Pass the comment's article id to the read action
                 return RedirectToAction("Read", "Articles", new {id = comment.ArticleID});
            }
        }
        catch ( Exception e )
        {
             throw e;
        }
        // Something went wrong
        return View(comment);

    }
}

public class ArticlesController : Controller
{
    // id is the id of the article
    public ActionResult Read(int id)
    {
        // Get the article from database by id
        var model = db.Articles.Find(id);
        // Return the view
        return View(model);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-14T12:11:42.513

这里解释得很好：[Display a view from another controller in ASP.NET MVC](https://stackoverflow.com/questions/879852/display-a-view-from-another-controller-in-asp-net-mvc/879862#879862)

引用**@Womp**：
默认情况下，ASP.NET MVC 首先签入`\Views\[Controller_Dir]\`，但之后，如果找不到视图，它会签入`\Views\Shared`.

ASP MVC 的想法是“约定优于配置”，这意味着在这种情况下将视图移动到共享文件夹是可行的方法。

# objective-c - 目标 C：检测声音

> ID：11772073
> 
> 赞同：2
> 
> 时间：2012-08-02T06:22:28.540
> 
> 标签：objective-c, audio, avfoundation, audio-recording

再会！我只想问我是否需要在我的代码和条件内输入什么值才能检测到用户的常规语音，这样在我检测到语音后，我会自动录制它并在何时停止录制它是无声的/录音机没有检测到声音，这是我的代码，我通过[检测用户何时向麦克风吹气来得到它。](http://mobileorchard.com/tutorial-detecting-when-a-user-blows-into-the-mic/)

```
- (void)levelTimerCallback:(NSTimer *)timer {
    [recorder updateMeters];

    const double ALPHA = 0.05;
    double peakPowerForChannel = pow(10, (0.05 * [recorder peakPowerForChannel:0]));
    lowPassResults = ALPHA * peakPowerForChannel + (1.0 - ALPHA) * lowPassResults;  

    [recorder record];
    if (lowPassResults < 0.95)
        {NSLog(@"Recording");
             [recorder record];}

} 
```

我是目标 c 的新手，任何帮助都会对我非常有帮助......在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T22:25:09.530

没有可用于检测正常语音音量的设置级别。撇开背景噪音等问题不谈，作为计算机中的数字的音频级别和空气中的声音级别之间没有标准的转换。

想一想：输入电平是多少？它是什么类型的麦克？用户有多远？你不知道任何这些事情，所以没有办法知道答案。

您可能想要考虑寻找音量的相对变化，而不是绝对水平（尽管这也是不确定的）或完全不同的用户体验。

# magento - 如何在 phpeclipse 中运行 magento 项目？

> ID：11772077
> 
> 赞同：1
> 
> 时间：2012-08-02T06:22:41.123
> 
> 标签：magento, phpeclipse

我想在 phpeclipse 中包含并运行 magento 项目。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:40:11.627

据我所知，PHP-Eclipse 正在“进行中”开发。并且与 Magento 不兼容，您可能只是一个文件一个文件地打开。但是您可以使用[xDebug](http://www.phpeclipse.com/wiki/Howto/XDebugAndPHPEclipse)对其进行调试。

[使用 Eclipse 工作 Magento 的示例](http://i.stack.imgur.com/mtNPk.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:57:21.353

我正在使用 PHPEd。[http://www.nusphere.com/products/index.htm](http://www.nusphere.com/products/index.htm) 适用于 magento。

# java - 如何在 Java 7 中使用 NIO 和 JFilechooser？

> ID：11772080
> 
> 赞同：2
> 
> 时间：2012-08-02T06:23:10.843
> 
> 标签：java, nio

我使用的是 Java 7，`NIO`包而不是`IO`，但 JFileChooser 使用`File`类 to `getSelectedFile()`，但在 NIO 中只有`Path`类。我如何使用`NIO`类`JFileChooser`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-08T00:44:34.557

```
yourPath = yourJFileChooser.getSelectedFile().toPath(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T06:39:23.473

```
Path path = selectedFile.toPath(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T06:35:37.367

试试这个 ：

```
File file = Paths.get(URI).toFile(); 
```

# android - 是否可以在运行时将图像写入 android 资产文件夹

> ID：11772082
> 
> 赞同：0
> 
> 时间：2012-08-02T06:23:24.843
> 
> 标签：android, android-layout

```
((Button) findViewById(R.id.Button01)).setOnClickListener(new OnClickListener() {
     public void onClick(View arg0) {
        Intent intent = new Intent();

            intent.setType("image/*");
            intent.setAction(Intent.ACTION_GET_CONTENT);
            //  startActivityForResult(Intent.createChooser(intent,
            //  "Select Picture"), SELECT_PICTURE);
            Log.d("Gallery displaying....!",""+intent);

            final File imagesFolder = new File(Environment.getExternalStorageDirectory(), "Safe");
            imagesFolder.mkdirs(); // <----

            startActivityForResult(intent,0);

      }
});` 
```

我从图库中选择图像并保存到 SD 卡，但我需要在运行时保存图像资产文件夹，请帮助任何人......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:13:18.580

无法在运行时修改资产文件夹。但是您可能希望将数据存储到内部私有存储中。此存储只能由您的应用程序访问。说明可以在[这里](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)找到。

# python - Django 绑定表单无效 - 如何获得默认验证工作？

> ID：11772087
> 
> 赞同：0
> 
> 时间：2012-08-02T06:23:37.340
> 
> 标签：python, django

我是 django 的新手，我正在为表单编写基于类的视图。问题是，此表单呈现良好，但发布时我的表单无效。

我不确定我应该怎么做才能让默认验证器验证表单。表单中有两个字段。一个是选择字段，它的选择是根据登录用户动态设置的。另一个是 CharField。不需要验证，因为 CharField 是自由文本，而 ChoiceField 是基于用户的数据。

表格.py

```
class HomeForm(forms.Form):
    phones= forms.ChoiceField(label='Select phone', choices = (), required=True)
    message = forms.CharField(max_length=10, required=True)

    def __init__(self, user, *args, **kwargs):
        super(HomeForm, self).__init__(*args, **kwargs)
        print >> sys.stderr, 'form init'

        self.fields['phones'].choices = [(ids.id, ids.phone_model.short_name) for ids in GCM_RegId.objects.filter(user=user)]

    def process(self, user):
        cd = self.cleaned_data
        regid_id = cd['phones'].value
        gcm_regid = GCM_RegId.objects.filter(id=regid_id) 
```

视图.py

```
class HomeView(FormView):
    template_name = "home.html"
    form_class = HomeForm
    success_url = 'home'

    def post(self, request, *args, **kwargs):
        form_class = self.get_form_class()
        form = self.get_form(form_class)

        if(form.is_bound):
            print >> sys.stderr, "Form is Bound"
        else:
            print >> sys.stderr, "Form is NOT Bound"

        if form.is_valid():
            print >> sys.stderr, "Form Valid"
            return self.form_valid(form)
        else:
            print >> sys.stderr, "Form NOT Valid"
            return self.form_invalid(form, **kwargs)       

    def get_form(self, form_class):
        form = HomeForm(self.request.user, {})
        return form

    def form_valid(self, form):
        form.process(self.request.user)
        print >> sys.stderr, "RegIdSubmitView form_valid"
        return super(HomeView, self).form_valid(form) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T06:31:25.837

我想问题是当您创建表单实例时，您忘记将 request.POST 数据传递给您的表单类，get_form 方法应该是：

```
def get_form(self, form_class):
    form = HomeForm(self.request.user, data=self.request.POST)
    return form 
```

或者，我认为 get_form 的更好方法是：

```
def get_form(self, form_class):
    return form_class(self.request.user, **self.get_form_kwargs() 
```

查看 django.views.generic.edit.FormMixin 中 get_form_kwargs 方法的源代码，它会自动为您处理请求的 PUT/POST 数据和文件。

# perl - 如何从 Bash 调用 Perl 构造函数？

> ID：11772089
> 
> 赞同：1
> 
> 时间：2012-08-02T06:23:38.843
> 
> 标签：perl, bash

我在 perl 中有一个文件，它有一个构造函数

```
#!/usr/bin/perl

package ConfigFileReader;

sub new {
    my ($mode, $configFileName) = @ARGV;

    print $mode;
    print $configFileName;
} 
```

我知道将参数传递给 perl 脚本就像

```
helloworld.pl arg1 arg2 argN 
```

现在，如何从命令行调用构造函数 new{}？顺便说一句，我在 shell 脚本中调用 perl 文件。

```
#!/bin/bash

x=`helloworld.pl arg1 arg2 argN`;

echo $x; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:36:38.727

```
#!/bin/bash

ARG1=...
ARG2=...

X=`perl -e "use ConfigFileReader; new ConfigFileReader($ARG1,$ARG2);"`

echo $X 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T06:32:51.423

你可以在你的 perl 脚本中调用 new：

```
#!/usr/bin/perl

package ConfigFileReader;

sub new {
    my ($mode, $configFileName) = @ARGV;

    print $mode;
    print $configFileName;
}

my $cfg = new ConfigFileReader(@ARGV); # call new with arguments 
```

# android - 如何在 Google Cloud Messaging Service 中限制特定设备？

> ID：11772091
> 
> 赞同：3
> 
> 时间：2012-08-02T06:23:48.667
> 
> 标签：android, cloud, messaging, google-cloud-messaging

我正在使用 Android SDK 中给出的 Google Cloud Messaging 示例代码。客户端和服务器代码都可以正常工作。我已经在三个 android 设备中安装了 GCM 客户端 android 应用程序，并且当服务器运行时，每个设备都成功注册到 GCM 服务器。每当我尝试发送消息时，服务器都会将消息广播到所有三个设备。但我的问题是我们是否可以将任何设备列入黑名单或允许服务器向任何特定设备发送消息。

有没有什么方法可以使用服务器中为每个设备生成的registrationID来限制设备？

这是发送推送通知的服务器代码

```
if (devices.size() == 1) {          
    String registrationId = devices.get(0);
            if(!(registrationId .equalsIgnoreCase("APA91bE61KYmI4Qzn9NKkh6wkHr1ya8FIfGbc_gYJf0_33558IeFnj9j8j4EPRaJeSKJ_CK6_a9FQLt_CapLE4e_mvRaq3hytJalfjTBbkAxbLIdfdXyoxatSrDPmtxSdyaeiRV-Bav-4qOSlURH5mL69Fa9ktX8JFoow")))
            {
                            Message message = new Message.Builder().build();
                            Result result = sender.send(message, registrationId, 5);
                            results = Arrays.asList(result);
            }
  } else {
    // send a multicast message using JSON
    Message message = new Message.Builder().build();
    MulticastResult result = sender.send(message, devices, 5);
    results = result.getResults();
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T09:55:11.710

GCM-Server 中没有内置方法来限制某些设备，但您可以创建自己的黑名单并将消息发送到此列表以外的设备。

您可以在黑名单中创建不包含registrationIds 的设备列表，并向该列表发送多播消息。

[在此处](http://developer.android.com/guide/google/gcm/server-javadoc/index.html)查看 javadoc 以获取有关 GCM 服务器端代码的更多信息。

# iphone - 如何在 iPad 中单独使用带有 Wi-Fi 的 idoubs？（不包括电信服务）

> ID：11772092
> 
> 赞同：1
> 
> 时间：2012-08-02T06:23:52.923
> 
> 标签：iphone, ios, ipad

我找到了 idoubs API 来进行视频通话，但我担心 idoubs 是否只能用于电信服务。我们可以使用 idoubs 单独使用 Wi-Fi 功能进行视频通话吗？，我的意思是我不想使用 SIM 卡联系，可以吗？

# vb.net - 如何在图片框控件上显示网格？

> ID：11772093
> 
> 赞同：2
> 
> 时间：2012-08-02T06:23:55.367
> 
> 标签：vb.net

我想在picturebox上显示一个图像，我也想在picturebox上显示网格。所以如果我缩放图像，那么我可以很容易地识别picturebox上的像素大小。有人可以帮我这样做吗？例如。

在图片框上正常显示图像

![在此处输入图像描述](../Images/3ab2083cc69e3a2145573b290502d07d.png)

但我想在图片框上显示这样的图像

![在此处输入图像描述](../Images/071b967d1bde6ac3d8a571477c4a28d4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T18:06:41.730

这是使用以下代码绘制网格线的代码`Graphics.DrawLine()`：

```
Public Class Form1

    Private Sub PictureBox1_Paint(ByVal sender As Object, ByVal e As System.Windows.Forms.PaintEventArgs) Handles PictureBox1.Paint

        Dim g As Graphics = e.Graphics
        Dim pn As New Pen(Color.White) '~~~ color of the lines

        Dim x As Integer
        Dim y As Integer

        Dim intSpacing As Integer = 10  '~~~ spacing between adjacent lines

        '~~~ Draw the horizontal lines
        x = PictureBox1.Width
        For y = 0 To PictureBox1.Height Step intSpacing
            g.DrawLine(pn, New Point(0, y), New Point(x, y))
        Next

        '~~~ Draw the vertical lines
        y = PictureBox1.Height
        For x = 0 To PictureBox1.Width Step intSpacing
            g.DrawLine(pn, New Point(x, 0), New Point(x, y))
        Next

    End Sub

End Class 
```

要对此进行测试，请创建一个新项目并添加一个图片框（名称 = `PictureBox1`）。然后为它选择一个图像（您可以使用属性窗口来设置图像）。然后复制粘贴上面的代码并运行它。您将看到网格线。我们已经编写了`paint`在 Picturebox 事件上绘制网格线的代码。因此，当您在运行时在图片框上设置图像时，这些网格也会重新绘制。

希望它会给你一个想法。顺便说一句，上面的代码是使用 VB.Net 进行编码和测试的。祝你好运...

# email - 一份报告作为附件，另一份作为 ssrs 2008 中的电子邮件正文

> ID：11772095
> 
> 赞同：0
> 
> 时间：2012-08-02T06:24:07.537
> 
> 标签：email, reporting-services, subscriptions, formats

我有一份总结报告和一份详细报告，我需要每天向我的客户发送邮件，并附上详细报告（excel 文件）作为邮件的附件，并将总结报告作为同一邮件的正文。

我该怎么做呢？如何在一封电子邮件中包含两份报告？这可以在 SSRS 2008 中完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T23:40:08.570

开箱即用不支持该功能。您也许可以编写一个自定义扩展来做到这一点，但这不会是微不足道的。

# javascript - javascript如何将变量添加到字符串中

> ID：11772100
> 
> 赞同：3
> 
> 时间：2012-08-02T06:24:19.357
> 
> 标签：javascript, jquery

我正在使用 javascript 和 jquery，我有一个类似的字符串

```
 var apiUrlAnswer = 'https://api.stackexchange.com/2.0/answers/{ids}?order=desc&sort=activity&site=stackoverflow'; 
```

我需要用`{ids}`变量替换。

在 C# 中可以使用一个名为的方法

```
String.Format(https://api.stackexchange.com/2.0/answers/{0}?order=desc&sort=activity&site=stackoverflow, myVariable); 
```

我想知道 Javascript 中是否存在类似的东西，这样我就可以避免简单的字符串连接。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T06:26:55.807

使用字符串[`.replace()`方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)：

```
var apiUrlAnswer = 'https://api.stackexchange.com/2.0/answers/{ids}?order=desc&sort=activity&site=stackoverflow';

apiUrlAnswer = apiUrlAnswer.replace("{ids}", yourVariable);

// OR, if there might be more than one instance of '{ids}' use a regex:
apiUrlAnswer = apiUrlAnswer.replace(/\{ids\}/g, yourVariable); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T06:47:09.330

好吧，这是一个 String.format（如 c#）；我已经扩展了 javascripts`String`对象以包含这样的格式方法：

```
String.format = function(stringToFormat, argsForFormat) {

    for (var i = 0; i < argsForFormat.length; i++) {
        var regex = new RegExp('\{(' + i + ')}', 'g');
        stringToFormat = stringToFormat.replace(regex, argsForFormat[i]);
    }

    return stringToFormat;    
}; 
```

你可以这样称呼它

```
var args = [1, 'activity', 'stackoverflow', 'desc']   
var apiUrlAnswer = 'https://api.stackexchange.com/2.0/answers/{0}?order={3}&sort={1}&site={2}';
var apiUrlAnswer = String.format(apiUrlAnswer, args); 
```

或者内联版本看起来像这样

```
var apiUrlAnswer = String.format('https://api.stackexchange.com/2.0/answers/{0}?order={3}&sort={1}&site={2}', [1, 'activity', 'stackoverflow', 'desc']); 
```

和另一个例子

```
String.format("http://{0}.{1}.com", ['www', 'stackoverflow']); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T06:29:27.800

如果您经常这样做，使用正则表达式的更强大的替代方法是使用客户端模板引擎，如[mustache.js](https://github.com/janl/mustache.js/)。我已经成功地使用了它，它又快又轻。

```
var view = {
  ids: "Andrew"
};

var output = Mustache.render("https://api.stackexchange.com/2.0/answers/{{ids}}?order=desc&sort=activity&site=stackoverflow", view); 
```

这样做的好处是可以很好地分离您的数据和演示文稿。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T06:28:06.727

如何只使用替换：

```
apiUrlAnswer = apiUrlAnswer.replace('{ids}', 'test'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T06:31:17.967

尝试

```
var id = 'your_id';
var apiUrlAnswer = 'https://api.stackexchange.com/2.0/answers/'+id+'?order=desc&sort=activity&site=stackoverflow'; 
```

# javascript - 控制流不在 jquery 的对话框中等待

> ID：11772109
> 
> 赞同：1
> 
> 时间：2012-08-02T06:25:05.513
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-dialog

我在页面中建立了一个对话框，我希望在单击对话框上的 OK 按钮时执行一个功能。我也想，对话框下面的代码只有在单击确定按钮下的功能后才能执行。

但我发现，即使在我点击确定按钮之前，控件已经执行了对话框下方的代码。

下面是代码。

```
var confirmationFlag =  false;
alert("alertbox1");

$("#confirmdialog").dialog("open");
alert("alertbox2");

$("#ui-dialog-title-confirmdialog").html("Delete this transaction?");
$("#confirmdialog").html("Are you sure you want to delete this transaction?");

$("#confirmdialog_Ok-button").unbind("click").click( function () { 
    confirmationFlag = true;
    alert("alertbox3" +confirmationFlag);
    $("#confirmdialog").dialog("close");            
});

alert("alertbox4 " +confirmationFlag); 
```

理想情况下，我希望流程像 alertbox1 > alertbox2 > alertbox3 > alertbox4

但流程是这样的 alertbox1 > alertbox2 > alertbox4 > alertbox3

即使对话框打开并且在单击对话框上的确定按钮之前，alertbox4 也会执行。

在单击“确定”之前如何继续保持控制的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:39:17.747

在*单击事件处理程序*`alert("alertbox3" +confirmationFlag);`中调用它，因此在您单击之前不会显示它。

 *要获得您想要的订单，您必须将警报调用移到 click 函数之外，就像其他警报调用一样。请注意，如果你把它移到外面，`confirmationFlag`仍然会`false`因为点击处理程序还没有被调用。*

# ssas - 如何解压abf文件

> ID：11772110
> 
> 赞同：0
> 
> 时间：2012-08-02T06:25:07.493
> 
> 标签：ssas, business-intelligence, sql-server-2012

我有一个 abf 文件，它是一个分析服务备份文件 (http://www.fileinfo.com/extension/abf)

我应该如何解压缩它以便我可以将分析服务程序中的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:38:32.840

您可以使用命令行实用程序来列出、测试和提取 ABF 文件。有关更多信息，请参阅此链接：http: [//geekswithblogs.net/darrengosbell/archive/2008/09/13/ssas-verifying-backups.aspx](http://geekswithblogs.net/darrengosbell/archive/2008/09/13/ssas-verifying-backups.aspx)

# android - Android 服务上的 Bugsense

> ID：11772112
> 
> 赞同：1
> 
> 时间：2012-08-02T06:25:15.703
> 
> 标签：android, android-service, bugsense

按照 Bugsense 文档，我发现我需要在 Service onCreate 上添加此代码：

`BugSenseHandler.setup(context, "MY_API_KEY");`

那个`context`变量是什么？我需要将主 Activity 引用传递给服务构造函数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T06:28:41.533

`context`是您的主要活动或服务。`BugSenseHandler.setup()`用初始化 BugSense 调用`this`。

```
public class MyService extends Service {
    ...
    @Override
    public void onCreate() {
        ...
        BugSenseHandler.setup(this, "MY_API_KEY");
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T13:30:23.943

新的 API 说明了这一点：

```
BugSenseHandler.initAndStartSession(MyService.this, "MY_API_KEY"); 
```

[但与果冻在他的回答中](https://stackoverflow.com/a/11772159/468360)所说的几乎相同

也不要忘记这些：

每当您想显式启动会话时，可以在活动的 onStart 方法中使用 startSession 方法，如下所示：

```
BugSenseHandler.startSession(MyService.this); 
```

每当您想关闭会话时，可以使用 closeSession 方法，如下所示：

```
BugSenseHandler.closeSession(MyService.this) 
```

如果要手动刷新所有保存的数据，请使用 BugSenseHandler.flush(Context) 方法：

```
BugSenseHandler.flush(MyService.this); 
```

Bugsense 的完整文档在这里：[https](https://www.bugsense.com/docs/android) ://www.bugsense.com/docs/android 您可以将相同的逻辑应用于服务。

# windows - 列出机器上安装的操作系统

> ID：11772113
> 
> 赞同：0
> 
> 时间：2012-08-02T06:25:17.847
> 
> 标签：windows, linux, operating-system, boot, esxi

我想列出某台机器上安装的所有操作系统。这台机器可能有很多操作系统（windows、linux 发行版、esxi）。我可以物理访问这台计算机，并且我有一个特权帐户（管理员）。如何列出所有这些操作系统？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T06:29:49.613

如果您的机器上有很多操作系统，其中之一是 linux，这意味着您可以读取`lilo`或`grub`配置以列出这台机器上的操作系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T21:03:24.413

[os-prober](http://joeyh.name/code/os-prober/)是至少在某些 Linux 发行版中可用的操作系统检测工具，主要用于将其他操作系统添加到 grub 菜单。

在我的 Debian 系统上，它是这样工作的：

```
$ sudo os-prober               
/dev/sda1:Windows Recovery Environment (loader):Windows:chain
/dev/sda2:Windows 7 (loader):Windows1:chain 
```

可以看出，它不显示运行它的操作系统，只显示其他可用的操作系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T06:31:47.547

虽然很难说出安装的确切操作系统，但您可以使用分区工具工具，如 Windows 的 MiniPartition Wizard 或 linux 的 gparted 来列出分区。每个分区都有一个标志，告诉它正在使用什么文件系统，通常文件系统和操作系统之间存在一对一的对应关系，但并不总是因为某些操作系统可以使用不同的文件系统，比如可以在 NTFS 上安装 linux，但大多数情况下部分它会给你一个好主意。例如 NTFS/FAT 通常是 windows，ext2/3/4 是 linux，等等...

# javascript - D3 - 使用字符串作为轴刻度

> ID：11772115
> 
> 赞同：20
> 
> 时间：2012-08-02T06:25:40.447
> 
> 标签：javascript, d3.js

我想创建一个条形图，使用字符串作为 x 轴上刻度的标签（例如，第 1 年、第 2 年等而不是 0、1、2 等）。

我首先使用 x 轴的数值（例如，0、1、2、3 等），如下所示：

1）我生成我的范围：

```
 x = d3.scale.ordinal()
        .domain(d3.range(svg.chartData[0].length)) //number of columns is a spreadsheet-like system
        .rangeRoundBands([0,width], .1); 

     y = d3.scale.linear()
        .domain(Math.min(d3.min(svg.chartData.extent),0), Math.max(d3.min(svg.chartData.extent),0)]) 
        .range([height, 0])
        .nice(); 
```

2）制作轴：

```
 d3.svg.axis()
        .scale(x); 
```

3）重绘轴：

```
 svg.select(".axis.x_axis")
        .call(make_x_axis().orient("bottom").tickSubdivide(1).tickSize(6, 3, 0)); 
```

这适用于默认的数字轴标签。

如果我尝试对这样的 x tickValues 使用字符串数组......

```
 d3.svg.axis()
        .scale(x).tickValues(svg.pointsNames); //svg.pointsNames = ["Year 1", "year 2", etc.] 
```

...当我重绘图表（对数据/设置进行更改或不更改）时，标签会像这样交换。

![在此处输入图像描述](../Images/061e45acc5b3e38545870eb277dcb1f5.png) ![在此处输入图像描述](../Images/85fc2f59010d4f77fb5ddcec902c8268.png)

请注意 Col 1 如何取代 Col 0，反之亦然。

你知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-02T06:50:37.747

**更新**

只需`svg.pointsNames`在将它们应用为 tickValues 之前对它们进行排序。确保以与对数据进行排序完全相同的方式对它们进行排序。这样，您的标签和刻度值之间始终保持一对一的映射。

另外，如果可以，请在此处查看[tickFormat` 函数](https://github.com/mbostock/d3/wiki/SVG-Axes#wiki-tickFormat)。这对我来说似乎是一个更好的选择。

```
//Tick format example
chart,xAxis.tickFormat(function(d, i){
    return "Year" + d //"Year1 Year2, etc depending on the tick value - 0,1,2,3,4"
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-18T11:12:01.050

谢谢你...我用这个函数和一个内联的 if 子句来处理一个不同的 x 轴系列，用名称而不是数字。

派系数组由所有相关名称组成，这些名称按系列索引排序，然后与数据中的相应索引匹配。

```
xAxis = d3.svg.axis().scale(xScale)
            .tickFormat(function(d) { 

                if(seriesX == 'seriesValue'){ 
                    return factions[d]}

                else{ 
                    return d}
            })    
         .orient("bottom"); 
```

# .net - 谁的 ToString() 会被调用？

> ID：11772117
> 
> 赞同：5
> 
> 时间：2012-08-02T06:25:41.230
> 
> 标签：.net, boxing

众所周知，`int`有`ToString()`方法覆盖了`ToString()`基类型的方法`Object`。

对于以下代码，

```
int x = 100;
object y = (object)x;
Console.Write(y.ToString()); 
```

(1)`ToString()`谁会被召唤？整数还是对象？为什么？
(2) 我们如何检查/查看真相？通过任何调试/工具？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T06:28:11.483

`Int32.ToString()`会被调用，因为`ToString()`实际上是被调用的。 `Int32.ToString()`覆盖`Object.ToString()`，因此在运行时它有效地替换了`Object.ToString()`.
在运行时，`y`是一个盒装的`int`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T07:44:31.977

由于值是装箱的，编译器只知道是`object`，所以它是对 的常规虚拟调用`object.ToString()`，然后它将`ToString()`获取结构的覆盖。所以：它是`object.ToString()`被**调用**的，而`Int32.ToString()`覆盖***是被执行***的。

```
private static void Main()
{
    int x = 100;
    object y = (object)x;
    Console.Write(y.ToString());
} 
```

变成（我的评论）：

```
.method private hidebysig static void Main() cil managed
{
    .entrypoint
    .maxstack 1
    .locals init (
        [0] int32 x,
        [1] object y)

    // int x = 100;
    L_0000: ldc.i4.s 100
    L_0002: stloc.0

    // object y = (object)x; 
    L_0003: ldloc.0 
    L_0004: box int32
    L_0009: stloc.1

    // Console.Write(y.ToString());
    L_000a: ldloc.1 
    L_000b: callvirt instance string [mscorlib]System.Object::ToString()
    L_0010: call void [mscorlib]System.Console::Write(string)
    L_0015: ret 
} 
```

重要的线路在`L_000b`; 对 的常规虚拟通话`object.ToString()`。

更有趣的*是非装箱*值类型；如果**已知**值类型具有`ToString()`，则它可以发出静态调用：

```
private static void Main()
{
    int x = 100;
    Console.Write(x.ToString());
}

.method private hidebysig static void Main() cil managed
{
    .entrypoint
    .maxstack 1
    .locals init (
        [0] int32 x)
    L_0000: ldc.i4.s 100
    L_0002: stloc.0 
    L_0003: ldloca.s x
    L_0005: call instance string [mscorlib]System.Int32::ToString()
    L_000a: call void [mscorlib]System.Console::Write(string)
    L_000f: ret 
} 
```

请参阅 处的静态调用 ( `call`) `L_0005`。**但是**，在大多数值类型的情况下，它将使用受*约束*的调用，如果它*被覆盖，JIT 会将其解释为静态调用，如果**不是*，则将其解释为虚拟调用：

```
private static void Main()
{
    var x = new KeyValuePair<int, string>(123, "abc");
    Console.Write(x.ToString());
} 
```

变成：

```
.method private hidebysig static void Main() cil managed
{
    .entrypoint
    .maxstack 3
    .locals init (
        [0] valuetype [mscorlib]System.Collections.Generic.KeyValuePair`2<int32, string> x)
    L_0000: ldloca.s x
    L_0002: ldc.i4.s 0x7b
    L_0004: ldstr "abc"
    L_0009: call instance void [mscorlib]System.Collections.Generic.KeyValuePair`2<int32, string>::.ctor(!0, !1)
    L_000e: ldloca.s x
    L_0010: constrained [mscorlib]System.Collections.Generic.KeyValuePair`2<int32, string>
    L_0016: callvirt instance string [mscorlib]System.Object::ToString()
    L_001b: call void [mscorlib]System.Console::Write(string)
    L_0020: ret 
} 
```

“约束”/“callvirt”对`L_0010`共同构成`L_0016` *了*这个构造，因此它*实际上*可能不是虚拟调用。JIT / 运行时可以对其进行其他巫术。这[将在此处进行更多讨论](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.constrained.aspx)。

请注意，常规`class`将**始终**为此使用虚拟调用，但场景除外`return base.ToString();`，它是对基本类型实现的静态调用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T06:29:28.800

Int32，因为这是满足相同合同的实际对象。您可以通过查看输出来检查。如果不是这种情况，您将返回“System.Object”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T06:32:18.780

**以为是java。对不起！**:) int 是原始类型。所有原始类型都是 OO 魔法停止的唯一例外。它们不继承对象，它们不是对象！（没有 toString 方法，一般没有方法）

整数，具有 toString 方法。如果您的示例使用 Integer 而不是 int，并且您的对象被强制转换为一个类（就像您在示例中所做的那样），如果该类覆盖 toString（例如是您的自定义类），或者已经有了 toString 方法（例如 Integer class)，则应该调用该类的 toString 方法。

否则，应该调用继承自的类的 toString 方法。如果没有继承自nobody（意味着：继承自Object 类），则应该调用object 类toString。

编写一个带有一些打印的简单程序可以帮助您：

```
Integer x = new Integer(3); 
```

打印：

```
x.toString()
((Object) x).toString(); 
```

和新的匿名类，和 Integer 一样，但是 toString 被重写了

```
Integer y = new Integer(3){
    @Override
    String toString(){
    return "WHATEVER!!";

    }
    }; 
```

打印：

```
y.toString(); 
```

# jquery - 浮动 div、水平滚动和 Animate.Scrollleft 合二为一

> ID：11772119
> 
> 赞同：0
> 
> 时间：2012-08-02T06:25:53.963
> 
> 标签：jquery, css, scroll

不幸的是，对于我的生活，我无法弄清楚我需要在这里做什么。首先，这是我可爱的测试站点：http: [//elijahhoffman.com/testsite/](http://elijahhoffman.com/testsite/)

现在是我想要完成的事情。我有一个容器（#slideshow），其中包含包含图像的 div（幻灯片）。这些图像向左浮动并内联。出于某种原因，页面的整个主体会滚动，从而搞砸了其他元素的定位。我只想让幻灯片 div 滚动。我有一些 javascript 通过它的内容生成容器宽度，所以这不是问题。或者也许是。

其次，我希望能够在 div 中为 scrollleft 设置动画。我知道它不适用于隐藏内容，但也许一旦我可以让幻灯片 div 可滚动，我可以隐藏滚动条并使用 animate.scrollleft？

这是 index.php 和 css 应该可以通过以下方式查看：http: [//elijahhoffman.com/testsite/index.txt](http://elijahhoffman.com/testsite/index.txt) 和 [http://elijahhoffman.com/testsite/site.css](http://elijahhoffman.com/testsite/site.css)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:28:16.010

幻灯片 -> 宽度：100%；- 或 jquery 等于宽度的屏幕 oveflow:hidden;

幻灯片->删除：浮动：左；

和 - [jquery 动画](http://api.jquery.com/animate/)

# jsf - 将 OutputStream 发送到浏览器并让浏览器保存它

> ID：11772120
> 
> 赞同：4
> 
> 时间：2012-08-02T06:26:01.780
> 
> 标签：jsf, richfaces, export-to-excel

我想从 Rich Faces 数据表中导出数据，我从数据表中的数据创建了 outputStream。现在想将此 OutputStream 发送到浏览器并保存。我怎样才能做到这一点？

`FileOutputStream stream = new FileOutputStream(new File(PATH));`

`OutputStream out = myMthodToCreateOutPutStream();`

现在如何将其保存`out`到浏览器。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-02T07:14:29.620

目前尚不清楚您从哪里读取数据。您需要创建一个 InputStream 来读取数据。

然后，您首先需要将响应标头设置为

```
HttpServletResponse.setHeader("Content-Disposition", "attachment; filename=datafile.xls"); 
```

使用您需要的任何文件名。

然后设置 mime 类型：

```
response.setContentType("application/vnd.ms-excel"); 
```

使用您需要的 mime 类型。

然后需要使用响应对象来获取它的输出流——

```
OutputStream outStream = response.getOutputStream(); 
```

现在写信给它：

```
byte[] buf = new byte[4096];
int len = -1;

//Write the file contents to the servlet response
//Using a buffer of 4kb (configurable). This can be
//optimized based on web server and app server
//properties
while ((len = inStream.read(buf)) != -1) {
    outStream.write(buf, 0, len);
}

outStream.flush();
outStream.close(); 
```

# firefox - 在 Firefox 浏览器中禁用/隐藏刷新按钮

> ID：11772123
> 
> 赞同：0
> 
> 时间：2012-08-02T06:26:22.187
> 
> 标签：firefox, firefox-addon

我想在 Firefox 中禁用 RightClick>Reload 功能。

我知道它不能通过在特定网页上运行的 js 来完成。

1.  如何为浏览器完全禁用它？（假设我可以改变浏览器的行为）

2.  是否可以创建一个手动补丁/插件来在 Firefox 代码库中进行这种更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:58:53.123

您不必重新发明轮子。使用[菜单编辑器](https://addons.mozilla.org/en-US/firefox/addon/menu-editor/)。我已经使用它很多年了。应该够了。

安装它，打开设置，`Main context menu`从下拉列表中选择。找到`Reload`并取消选中它。瞧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:15:48.917

浏览器窗口包含三个与重新加载页面相关的[`<command>`元素](https://developer.mozilla.org/en/XUL/command)`Browser:Reload`： 、`Browser:ReloadOrDuplicate`、`Browser:ReloadSkipCache`（我没有费心弄清楚这些是如何触发的）。第一个是唯一重要的，因为如果禁用其他两个将自动禁用（它们包含相应的[`<observes>`元素](https://developer.mozilla.org/en/XUL/observes)）。因此，您的扩展程序需要在浏览器窗口中运行以下代码：

```
document.getElementById("Browser:Reload").setAttribute("disabled", "true"); 
```

唯一的问题是浏览器窗口本身也将通过`onLocationChange()`其[进度侦听](https://developer.mozilla.org/en/Code_snippets/Progress_Listeners)器的方法禁用/启用此命令（该命令应该为 禁用`about:blank`）。我想解决方案是注册你自己的进度监听器在`onLocationChange()`方法中做同样的事情（你的监听器应该在浏览器之后调用，因为它是稍后注册的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:29:48.097

如果您通过 XUL 覆盖执行此操作，则可以完全禁用它：

<command id="Browser:Reload" oncommand=""/>

<command id="Browser:ReloadOrDuplicate" oncommand=""/>

<command id="Browser:ReloadSkipCache" oncommand=""/>

然后你不需要添加一个监听器。

# xml - 如何使用 xslt 修改 xml 文件

> ID：11772125
> 
> 赞同：5
> 
> 时间：2012-08-02T06:26:26.250
> 
> 标签：xml, xslt

我需要通过 xsl 文件更改 xml 中节点的特定元素的值下面是我的 xml 数据

```
<hospitals>
  <hospital>
    <department>
      <clinic>
        <cid>8</cid>
        <clinicName>clinic8</clinicName>
        <status>1</status>
      </clinic>
      <clinic>
        <cid>9</cid>
        <clinicName>clinic9</clinicName>
        <status>0</status>
      </clinic>
      <depId>3</depId>
      <departmentName>dental</departmentName>
    </department>
    <hospId>2</hospId>
    <hospitalName>appolo</hospitalName>
  </hospital>
  <hospital>
    <department>
      <clinic>
        <cid>82</cid>
        <clinicName>clinic82</clinicName>
        <status>0</status>
      </clinic>
      <clinic>
        <cid>92</cid>
        <clinicName>clinic92</clinicName>
        <status>0</status>
      </clinic>
      <depId>4</depId>
      <departmentName>mental</departmentName>
    </department>
    <hospId>2</hospId>
    <hospitalName>manipal</hospitalName>
  </hospital>
</hospitals> 
```

例如，我需要根据其 id 即 9 选择 Clinic9 并将状态 0 更改为 1

我试过这样

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:param name="hospId"/>
<xsl:param name="depId" />
<xsl:param name="clinicId"/>
<xsl:output omit-xml-declaration="yes" indent="yes"/>
<xsl:strip-space elements="*"/>
<xsl:template match="node()|@*">
  <xsl:copy>
    <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
</xsl:template>
<xsl:template match="hospitals/hospital[hospId='2']/department[depId='3']/clinic[cid='9']">
<xsl:choose>
 <xsl:when test="cid ='9'">
  <xsl:element name="status">123</xsl:element>
  </xsl:when>
</xsl:choose>
</xsl:template>
  </xsl:stylesheet> 
```

但价值并没有改变......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T07:13:29.333

如果您尝试修改/替换特定元素，则需要匹配该元素。例如，如果您尝试替换特定`status`元素，则需要匹配该特定元素。

**修改后的 XSLT**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:param name="hospId" select="'2'"/>
    <xsl:param name="depId" select="'3'"/>
    <xsl:param name="clinicId" select="'9'"/>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="hospitals/hospital[hospId='2']/department[depId='3']/clinic[cid='9']/status">
        <status>123</status>
    </xsl:template>
</xsl:stylesheet> 
```

**XML 输出**

```
<hospitals>
   <hospital>
      <department>
         <clinic>
            <cid>8</cid>
            <clinicName>clinic8</clinicName>
            <status>1</status>
         </clinic>
         <clinic>
            <cid>9</cid>
            <clinicName>clinic9</clinicName>
            <status>123</status>
         </clinic>
         <depId>3</depId>
         <departmentName>dental</departmentName>
      </department>
      <hospId>2</hospId>
      <hospitalName>appolo</hospitalName>
   </hospital>
   <hospital>
      <department>
         <clinic>
            <cid>82</cid>
            <clinicName>clinic82</clinicName>
            <status>0</status>
         </clinic>
         <clinic>
            <cid>92</cid>
            <clinicName>clinic92</clinicName>
            <status>0</status>
         </clinic>
         <depId>4</depId>
         <departmentName>mental</departmentName>
      </department>
      <hospId>2</hospId>
      <hospitalName>manipal</hospitalName>
   </hospital>
</hospitals> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T06:49:56.093

听起来好像您正在尝试使用 XSLT 来更改原始 XML 文件。XSLT 不能更改原始文件。您可以使用它来转换 XML 并通过使用运行 XSLT 的程序或脚本将其输出到另一个 XML。

# c++ - 检查网格/真值表的对称性

> ID：11772128
> 
> 赞同：0
> 
> 时间：2012-08-02T06:26:37.733
> 
> 标签：c++, c, truthtable

```
t t f f f f t t
t t f f f f t t
f f t t t t f f
f f t t t t f f
t t f f f f t t
t t f f f f t t
f f t t t t f f
f f t t t t f f 
```

是否可以使用 8 输入真值表（例如 OR、AND、XOR 等）确定上述 8x8 的对称性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:11:31.427

所以，我在评论中所说的是反复检查某些对并对它们进行“NOT XOR”。

对的想法是，如果一行是对称的，则某些对必须相等。注意到我们将索引数组归零，我们在每一行中都有索引 0 和 7、1 和 6、2 和 5、3 和 4。为了使行对称，所有 4 个必须是配对。总之，要使表对称，需要检查 32 对（每行 4 对，超过 8 行）。

NOT XOR 的诀窍是，由于 XOR 在两者不同时返回 true，因此如果两者相同，则该语句的否定返回 true。

所以，如果你想只使用布尔运算来完成整个检查，你会得到每一对，（现在称之为 (a,b) ）并执行 (NOT(a XOR b)) （`!(a^b)`在代码中），然后是所有 32 项检查的结果。

当然，如果我实际上是在代码中执行此操作，我宁愿定期检查是否相等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:15:55.447

假设你的意思和我一样的对称性，并且你有类似 a`bool[][]`或 an的输入`std::vector<std::vector<bool> >`（或者`char`代替`bool`，只要有效，它并不重要`==`），你只需迭代一半矩阵和与另一半比较，是这样的：

```
bool symmetric = true;
for (unsigned int i = 1; symmetric && i <= n; ++i) {
  for (unsigned int j = i+1; symmetric && j <= n; ++j) {
    symmetric = (M[i][j] == M[j][i]);
  }
} 
```

请注意，您不需要检查对角线，这就是上面代码中`i`从 1 和`j`at开始的原因。`i+1`

（我倾向于写比某些人喜欢的更多的括号和大括号。我只是碰巧更喜欢这样编写的代码。）

* * *

编辑：

当然，您可以有一个 64 输入表来告诉您哪些输入是对称的。通过一些压缩，您可以将该表存储在 2097152 TB 的内存中。我猜在您完成加载此表以进行查找之前，循环代码可以经常运行。相反，您当然可以将平行于反对角线的六条非平凡线输入相应的真值表，因为如果它们是对称的，则整个矩阵是对称的。这些表（用于 2、3、4、5、6、7 和 8 个输入）很容易放入几百个字节。

但无论如何，您对对称性的解释似乎与我的不同。如果您对每一行和/或每一列是否对称感兴趣，那么显然，您可以为此使用真值表。遍历它们需要 256 位，所以如果你的空间真的很短，你可以将它们压缩成 8 位，但是当你在它上面花费 256 字节时，查找可能会更快。

# android - 使用布尔逻辑（AND、OR、NOT）创建 SQLITE 查询

> ID：11772134
> 
> 赞同：1
> 
> 时间：2012-08-02T06:27:05.063
> 
> 标签：android, sqlite, boolean-logic

我在我的 android 应用程序中使用 sqlite 3.7 版，我只是不确定尽管在 Internet 上查看了这个表单，但它是否支持或者是否有在查询中使用布尔表达式的替代方法。我知道如果我们想将布尔值存储到数据库中，我们必须使用 1/0 整数。但

例如：WHERE (a=1 || b=1) && c=1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T06:31:20.950

我不明白.. 为什么不使用经典 SQL ？其中（a = 1 或 b = 1）且 c = 1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T06:33:05.323

使用 AND、OR 等。在[sqlite 文档中查找更多信息](http://www.sqlite.org/lang_keywords.html)

# python - xml.sax._exceptions.SAXParseException：/tmp/suds/suds-2582214468910359336.http:1:156：标签不匹配

> ID：11772136
> 
> 赞同：1
> 
> 时间：2012-08-02T06:27:10.547
> 
> 标签：python, soap, suds

我尝试使用python suds访问网络，代码如下。

```
#!/usr/bin/python
from suds.client import Client  
url = 'http://192.168.80.1xx:8079/rpc/soap/jirasoapservice-v2?wsdl'  
client = Client(url)  
print client 
```

在具有以下字符的机器A上：
ubuntu系统
ip添加为192.168.1.xx
python版本为2.6.5
可以连接互联网。
已安装 easy_install 0.6.10 和 suds 0.3.7。

另一台机器B：
ubuntu系统
ip添加为192.168.80.xx
python版本为2.6.5
离线。
已安装 setuptools-0.6c11-py2.6.egg 和 suds 0.3.7。

在机器A上，上面的代码是好的，而在机器B上，有一些错误：

```
Traceback (most recent call last):
  File "soaptest.py", line 7, in <module>
    client = Client(url)  
  File "build/bdist.linux-x86_64/egg/suds/client.py", line 109, in __init__
  File "build/bdist.linux-x86_64/egg/suds/wsdl.py", line 194, in __init__
  File "build/bdist.linux-x86_64/egg/suds/wsdl.py", line 255, in build_schema
  File "build/bdist.linux-x86_64/egg/suds/xsd/schema.py", line 90, in load
  File "build/bdist.linux-x86_64/egg/suds/xsd/schema.py", line 280, in open_imports
  File "build/bdist.linux-x86_64/egg/suds/xsd/schema.py", line 280, in open_imports
  File "build/bdist.linux-x86_64/egg/suds/xsd/schema.py", line 280, in open_imports
  File "build/bdist.linux-x86_64/egg/suds/xsd/schema.py", line 280, in open_imports
  File "build/bdist.linux-x86_64/egg/suds/xsd/schema.py", line 277, in open_imports
  File "build/bdist.linux-x86_64/egg/suds/xsd/sxbasic.py", line 608, in open
  File "build/bdist.linux-x86_64/egg/suds/xsd/sxbasic.py", line 626, in download
  File "build/bdist.linux-x86_64/egg/suds/sax/parser.py", line 134, in parse
  File "/usr/lib/python2.6/xml/sax/expatreader.py", line 107, in parse
    xmlreader.IncrementalParser.parse(self, source)
  File "/usr/lib/python2.6/xml/sax/xmlreader.py", line 123, in parse
    self.feed(buffer)
  File "/usr/lib/python2.6/xml/sax/expatreader.py", line 211, in feed
    self._err_handler.fatalError(exc)
  File "/usr/lib/python2.6/xml/sax/handler.py", line 38, in fatalError
    raise exception
xml.sax._exceptions.SAXParseException: /tmp/suds/suds-2582214468910359336.http:1:156: mismatched tag 
```

# hibernate - Hibernate中的级联和反向有什么区别？

> ID：11772137
> 
> 赞同：0
> 
> 时间：2012-08-02T06:27:14.147
> 
> 标签：hibernate, cascade, inverse

> 许多人喜欢比较反向和级联，但两者是完全不同的概念（在[本页](http://www.mkyong.com/hibernate/inverse-true-example-and-explanation/)底部）。
> 
> 在 Hibernate 中，只有“关系所有者”应该维护关系，并创建“逆”关键字来定义**维护关系的所有者是哪一方**。然而，“inverse”关键字本身不够冗长。
> 
> 在少数文章中，他们甚至建议忘记什么是“逆”，并始终将逆=“真”放在集合变量中。

我正在浏览上面提到的链接，但我不明白 Hibernate 之间的区别`cascade`（`inverse`至少是粗体字母中的句子）。你能解释一下这个区别吗？

也看到[了这个](https://stackoverflow.com/questions/3667387/what-is-the-difference-between-cascade-inverse-in-hibernate-what-is-the-use-o)问题。

> 通过中间表的多对多关系；“级联”表示是否将在子表中创建/更新记录。而“反向”表示是否将在**中间表中创建/更新记录**

**“在中间**表中创建/更新”是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:17:50.640

[您添加的链接](https://stackoverflow.com/questions/3667387/what-is-the-difference-between-cascade-inverse-in-hibernate-what-is-the-use-o)中的答案 很棒。查看标记为正确答案的那个。你问的那个令人困惑，你不需要考虑它。他举的例子有症状，但没有区别的根源。cascade 和 inverse 是 2 个不同的关键字。第一个答案中的解释很好而且很清楚。阅读并忽略其他。

# share - Alfresco Share：在我的自定义登录页面中使用 ALfresco.Util.PopupManager

> ID：11772139
> 
> 赞同：1
> 
> 时间：2012-08-02T06:27:26.040
> 
> 标签：share, alfresco

我正在为商业目的定制 Alfresco Share。所以我已经自定义并覆盖了默认登录页面。但是现在我想以与 ALfresco Share 相同的方式显示无效登录的弹出消息。浏览核心文件，我发现它使用`ALfresco.Util.Popupmanager`和`Alfresco.Util.Message`. 所以我包含了该文件并从它使用的地方`alfresco.js`复制了部分代码，但是当我部署它时，呈现了页面并发出了无效登录，我收到以下错误：`slingshot-login.ftl``ALfresco.Util.Popupmanager.displayprompt`

```
Alfresco.messages.global is null  var globalMsg =
  Alfresco.messages.global[p_messageId]; 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:39:45.060

你的是什么`p_messageId`？

这应该工作：

```
Alfresco.util.PopupManager.displayPrompt(
{
    text: "My message here"
}); 
```

# java - servlet处理的Multipart Image上传post请求

> ID：11772142
> 
> 赞同：0
> 
> 时间：2012-08-02T06:27:31.303
> 
> 标签：java, servlets, servlet-filters

我必须使用 servlet 在服务器上上传图像，并且对 servlet 的请求是通过 post Method 进行的。发布请求的代码如下：

```
public class PostImageRequest {
public static void main(String[] args) throws Exception {

    final String exsistingFileName = "E:\\Users\\snikhil\\Downloads\\qwe.jpg";
    File binaryFile = new File(exsistingFileName);
    String param = "value";
    DataInputStream inStream = null;
    String boundary = Long.toHexString(System.currentTimeMillis()); // JustRandomValue

    String CRLF = "\r\n"; // Line separator required by multipart/form-data.
    String charset = "UTF-8";
    String urlString = "http://localhost:89/ImageUploaderv3/ImageUploadServlet";

    URLConnection connection = new URL(urlString).openConnection();
    connection.setDoOutput(true);// it is to indicate post method call
    connection.setRequestProperty("Content-Type",
            "multipart/form-data; boundary=" + boundary);
    PrintWriter writer = null;

    try {
        OutputStream output = connection.getOutputStream();
        writer = new PrintWriter(new OutputStreamWriter(output, charset),
                true); // true = autoFlush, important!

        // Send normal param.
        writer.append("--" + boundary).append(CRLF);
        writer.append("Content-Disposition: form-data; name=\"param\"")
                .append(CRLF);
        writer.append("Content-Type: text/plain; charset=" + charset)
                .append(CRLF);
        writer.append(CRLF);
        writer.append(param).append(CRLF).flush();

        // Send binary file.
        writer.append("--" + boundary).append(CRLF);
        writer.append(
                "Content-Disposition: form-data; name=\"binaryFile\"; filename=\""
                        + binaryFile.getName() + "\"").append(CRLF);
        writer.append(
                "Content-Type: "
                        + URLConnection.guessContentTypeFromName(binaryFile
                                .getName())).append(CRLF);
        writer.append("Content-Transfer-Encoding: binary").append(CRLF);
        writer.append(CRLF).flush();
        InputStream input = null;
        try {
            input = new FileInputStream(binaryFile);
            byte[] buffer = new byte[1024];
            for (int length = 0; (length = input.read(buffer)) > 0;) {
                output.write(buffer, 0, length);
            }
            output.flush(); // Important! Output cannot be closed. Close of
                            // writer will close output as well.
        } finally {
            if (input != null)
                try {
                    input.close();
                } catch (IOException logOrIgnore) {
                }
        }
        writer.append(CRLF).flush(); // CRLF is important! It indicates end
                                        // of binary boundary.
        // End of multipart/form-data.
        writer.append("--" + boundary + "--").append(CRLF);
    } finally {
        if (writer != null)
            writer.close();
    }
    // ------------------ read the SERVER RESPONSE

    try {
        inStream = new DataInputStream(connection.getInputStream());
        String str;
        while ((str = inStream.readLine()) != null) {
            System.out.println("Server response is: " + str);
            System.out.println("");
        }
        inStream.close();

    } catch (IOException ioex) {
        System.out.println("From (ServerResponse): " + ioex);

    }

} 
```

}

现在我正在尝试使用 commons-fileupload-1.2.2 和 commons-io-2.4 jar 在服务器上上传图像，但我如何处理我不知道的请求。在这种情况下如何使用 FileItem 的迭代器？servlet 部分的代码如下。

```
class ImageUploadServlet extends HttpServlet {

private boolean isMultipart;
private String filePath;
private int maxFileSize = 50 * 1024;
private int maxMemSize = 4 * 1024;
private File file;
private String realpath;

public void init() {
    // Get the file location where it would be stored.
    filePath = getServletContext().getInitParameter("file-upload");
    String h;
    h = getInitParameter("realpath");
    if (h != null) {
        realpath = h;
    }
    realpath = getServletConfig().getServletContext().getRealPath(realpath) + "/";
    System.err.println("realparh is  is =" + realpath);
}

//call post method 
public void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, java.io.IOException {

    isMultipart = ServletFileUpload.isMultipartContent(request);
    isMultipart = ServletFileUpload.isMultipartContent(request);
    response.setContentType("text/html");
    PrintWriter out = response.getWriter();
    if (!isMultipart) {
        out.println("<html>");
        out.println("<head>");
        out.println("<title>Servlet upload</title>");
        out.println("</head>");
        out.println("<body>");
        out.println("<p>No file uploaded</p>");
        out.println("</body>");
        out.println("</html>");
        return;
    }

    DiskFileItemFactory factory = new DiskFileItemFactory();
    // maximum size that will be stored in memory
    factory.setSizeThreshold(maxMemSize);
    // Location to save data that is larger than maxMemSize.
    factory.setRepository(new File("F:\\Servers\\temp"));

    // Create a new file upload handler
    ServletFileUpload upload = new ServletFileUpload(factory);
    // maximum file size to be uploaded.
    upload.setSizeMax(maxFileSize);

    try {
        List<FileItem> fileItems = upload.parseRequest(request);
        ///how to process request here ...
        ///Image file send .....

    } catch (Exception ex) {
        System.out.println(ex);
    }

} 
```

}

请帮助如何填写代码以处理请求并帮助我，如果我能以其他方式做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:33:12.017

这是这样的：

```
// Process the uploaded items

Iterator iter = items.iterator();

while (iter.hasNext()) {

  FileItem item = (FileItem) iter.next();

  if (item.isFormField()) {

    processFormField(item);
  } else {

    processUploadedFile(item);
  }
} 
```

看：

*   [http://commons.apache.org/fileupload/apidocs/org/apache/commons/fileupload/FileItem.html](http://commons.apache.org/fileupload/apidocs/org/apache/commons/fileupload/FileItem.html)

# haproxy - 带有 haproxy、paster 和 node js 的 supervisord

> ID：11772143
> 
> 赞同：0
> 
> 时间：2012-08-02T06:27:34.857
> 
> 标签：haproxy, supervisord

我必须为我的应用程序和 nodejs 运行 paster serve 来满足我的实时要求，两者都是通过 haproxy 配置的，但是在这里我需要以 sudo 的身份运行 haproxy 以将端口 80 和其他进程绑定为普通用户，该怎么做？我尝试了不同的方法，但没有用。我试过这个命令

命令=sudo haproxy

我认为这不是我们应该这样做的方式。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:52:39.453

您需要以 root 身份运行 supervisord，并将其配置为在非特权用户下运行各种服务。

```
[program:paster]
# other configuration
user = wwwdaemon 
```

为了使它起作用，您不能`user`在该部分中设置选项`[supervisord]`（否则守护程序无法重新启动您的 haproxy 服务器）。因此，您确实希望确保您的 supervisord 配置只能由 root 用户写入，因此不能将新程序添加到正在运行的 supervisord 守护程序，并且您希望确保 XML-RPC 服务器选项得到很好的保护。

后者意味着您需要查看已配置为正确锁定的任何`[unix_http_server]`,`[inet_http_server]`和部分。`[rpcinterface:x]`例如，使用 [ ] 部分的`chown`和`chmod`选项`unix_http_server`将套接字文件的访问权限仅限于特权用户。

或者，您可以运行具有最小配置的轻量级前端服务器，将端口 80 代理到非特权端口，并将这个最小的服务器排除在您的 supervisord 设置之外。`ngnix`是一个出色的服务器，例如，通过服务器的本机打包系统安装（例如 Debian 或 Ubuntu 上的 apt-get）。

# algorithm - 数字总和可被 K 整除的子数组的数量

> ID：11772145
> 
> 赞同：0
> 
> 时间：2012-08-02T06:27:39.467
> 
> 标签：algorithm, optimization, recursion, dynamic-programming

给定一个数组，找出存在多少这样的子序列（不需要是连续的），其中该子数组中的元素之和可以被 K 整除。

我知道一种复杂度为 2^n 的方法，如下所示。这就像找到 i=[0,n] 的所有 nCi 并验证总和是否可被 K 整除。请提供类似线性/二次或 n^3 的伪代码。

```
static int numways = 0;
void findNumOfSubArrays(int  [] arr,int index, int sum, int K) {
        if(index==arr.length) {
                if(sum%k==0) numways++;
        }
        else {
                findNumOfSubArrays(arr, index+1, sum, K);
                findNumOfSubArrays(arr, index+1, sum+arr[index], K);
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T06:59:24.813

输入 - 长度为 n 和自然数 k 的数组 A。

算法：

*   构造数组 B：对于每个 1 <= i <= n：B[i] = (A[i] modulo K)。

现在我们可以使用动态规划：

我们定义 D[i,j] = - B[i..n] 的最大子数组数，它的元素之和模 k 等于 j。

1 <= 我 <= n。0 <= j <= k-1。

D[n,0] = if (b[n] == 0), 2\. 否则为 1。

如果 j > 0 ：

D[n,j] = if (B[n] modulo k) == j, 大于 1。否则为 0。

对于 i < n 和 0 <= j <= k-1：

D[i,j] = max{D[i+1,j], 1 + D[i+1, D[i+1,(jB[i]+k) 模 k)]}。

*   构造 D。

*   返回 D[1,0]。

总运行时间：O(n*k)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T06:58:35.377

使用辅助数组`A`

1) 在接受输入时，将当前总计存储在相应的索引中（这在 中执行`O(n)`）：

```
int sum = 0;
for (int i = 0; i < n; i++)
{
    cin >> arr[i];
    sum += arr[i];
    A[i] = sum;
} 
```

2）现在，

```
for (int i = 0; i < n; i++)
    for (int j = i; j < n; j++)
        check that (A[j] - A[i] + arr[i]) is divisible by k 
```

给你：`O(n^2)`...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T08:08:06.707

实际上，如果 K 的范围和数组中的数字范围未知，我认为这个问题不可能在 O(n^3) 甚至多项式时间内解决。这是我的想法：

考虑以下情况： arr 中的 N 个数字类似于

[1,2,4,8,16,32,...,2^(N-1)]

,

这样，arr 的 2^N 个“子数组”（不需要连续）的总和正好是 [0,2^N) 中的所有整数

并且问其中有多少能被K整除，相当于问[0, 2^N)中有多少整数能被K整除。

我知道在上述情况下，答案可以像 (2^N-1)/K （或其他东西）一样直接计算出来。但是，如果我们只是随机更改 arr 中的几个（可能是 3 个？4 个？）数字，以在完美连续整数范围 [0,2^N）中“挖一些随机洞”，这看起来不可能无需遍历 [0,2^N) 中的几乎所有数字即可计算答案。

好吧，只是一些愚蠢的想法......可能是完全错误的。

# r - 在 Roxygen2 中导出数据，这样它们就可以在不需要 data() 的情况下使用

> ID：11772156
> 
> 赞同：7
> 
> 时间：2012-08-02T06:28:23.330
> 
> 标签：r, roxygen2, rd

在阅读了诸如[使用 Roxygen 记录数据集的 SO question](https://stackoverflow.com/questions/9561684/documenting-dataset-with-roxygen2 "这个")之类的问题后，我设法记录了一个数据集（我将其称为`cells`），它现在出现在由生成的列表中，`data(package="mypackage")`并且如果我运行命令则被加载`data(cells)`。在此之后，运行`cells`时会出现`ls()`。

然而，在许多包中，数据无需`data()`调用即可立即获得。此外，运行时不会出现数据名称`ls()`。一个例子是`baseball`附带的数据集`plyr`。我查看了源代码，`plyr`但看不到这是如何完成的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T07:20:41.007

在`DESCRIPTION`您的包文件中，确保有一个名为的字段`LazyData`设置为`TRUE`.

从“编写 R 扩展”指南：

> 'data' 子目录用于存放数据文件，可以通过延迟加载或使用 data() 加载。（由“DESCRIPTION”文件中的“LazyData”字段进行选择：默认情况下不这样做。）

我认为 R 版本 2.14 更改了确切的语法；在此之前它是 LazyLoad 而不是 LazyData。

# php - 从公共基函数访问类层次结构中的私有属性

> ID：11772158
> 
> 赞同：3
> 
> 时间：2012-08-02T06:28:37.027
> 
> 标签：php, polymorphism

我想在基类中定义一次方法，然后在类层次结构中的连续构造函数中调用它。每次调用它时，我都希望它对调用它的类的属性进行操作。

例如，A 是基类，方法在这里定义。B从A继承，C从B继承。

当我实例化具体类 C 时，构造函数将调用基类方法，并且我希望它对 C 的属性进行操作。（这将是一个私有数组，我将在初始化它时填充它）。

然后 C 的构造函数调用`parent::__construct`. 当 B 构造函数调用基类方法时，该方法应该对 B 的属性进行操作。在 B 构造函数完成之前，它会调用`parent::_construct`，而 A 构造函数将对 A 的属性进行操作。

我正在研究 LSB，但它无法正常工作，因为`parent::__construct`它是一个转发呼叫。我尝试使用`get_parent_class()`代替的结果`parent::`，但我的错误调用`static::propertyName`因为`propertyName`不是常数。

我怎样才能做到这一点？

编辑：这是一个代码示例。下面的代码输出“PQPQP Q”。我希望它输出“PQRST U”。

```
class A {
    private $property = array('P','Q');

    function __construct() {
        $this->myMethod();
    }

    public function myMethod() {
        foreach ($this->property as $value) {
            echo $value . " ";
        }
    }
}

class B extends A {
    private $property = array('R','S');

    function __construct()
    {
        parent::__construct();
        $this->myMethod();
    }
}

class C extends B {
    private $property = array('T','U');

    function __construct()
    {
        parent::__construct();
        $this->myMethod();
    }
}

$c = new C(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:32:48.663

据我所知，这是不可能的。在私有的情况下，该变量不可用于方法，而在公共/受保护的情况下，其被覆盖。

你可以通过传递得到你想要的结果

```
$this->property 
```

在这样的每个 myMethod 调用中-

```
$this->myMethod($this->property) 
```

并相应地更改您的 myMethod 定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T06:38:48.553

如果我没听错，这就是你的例子：

```
class A {
    public function __construct() {
    }

    public function someMethod($arg) {
        $someProperty = $arg;
    }
}

class B extends A {
    public function __construct() {
        parent::__construct();
    }
}

class C extends B {

    private $someProperty;

    public function __construct() {
        parent::__construct();
    }
} 
```

一切都如您所愿。只有一个问题；A 类没有属性`someProperty`。如果你想在 A 类中使用它，你必须在那里定义它。如果你想在子类中使用它，你必须 make it `protected`。因此，您的 A 类必须如下所示：

```
class A {

    protected $someProperty;

    public function __construct() {
    }

    public function someMethod($arg) {
        $this->someProperty = $arg;
    }
} 
```

现在您可以在 B 类和 C 类中使用它，A 类可以使用该属性`someMethod`：

```
$instance = new C();
$instance->someMethod("test"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T14:37:59.093

因为您的示例已`$property`定义为`private`并且您从不覆盖`myMethod`，所以当实例化类型为`C`or的对象时`B`，它会运行 class的构造函数，该构造函数从值为is的类`A`调用。`myMethod()``A``$property``array('P', 'Q');`

如果您希望它打印“PQRST U”，则必须覆盖`myMethod()`并从每个单独的类的`__construct()`方法中调用它，或者声明`$property`为`protected`以便子类可以覆盖其值。

像这样的东西：

```
class A {
    private $property = array('P','Q');

    function __construct() {
        $this->myMethod();
    }

    public function myMethod() {
        foreach ($this->property as $value) {
            echo $value . " ";
        }
    }
}

class B extends A {
    private $property = array('R','S');

    function __construct()
    {
        parent::__construct();
        $this->myMethod();
    }

    public function myMethod() {
        foreach ($this->property as $value) {
            echo $value . " ";
        }
    }
}

class C extends B {
    private $property = array('T','U');

    function __construct()
    {
        parent::__construct();
        $this->myMethod();
    }

    public function myMethod() {
        foreach ($this->property as $value) {
            echo $value . " ";
        }
    }
}

$c = new C(); 
```

或这个：

```
class A {
    protected $property = array('P','Q');

    function __construct() {
        $this->myMethod();
    }

    public function myMethod() {
        foreach ($this->property as $value) {
            echo $value . " ";
        }
    }
}

class B extends A {
    protected $property = array('R','S');

    function __construct()
    {
        parent::__construct();
        $this->myMethod();
    }
}

class C extends B {
    protected $property = array('T','U');

    function __construct()
    {
        parent::__construct();
        $this->myMethod();
    }
}

$c = new C(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T14:46:42.507

`proptery`不能在子类中重载。一旦有了`C`，它就不再具有 的私有属性`A`。它无法访问它们（反射之外）。您能够做到这一点的唯一方法是将属性传递到`someMethod`链中，但这需要访问所需的属性。

使用`protected`也不起作用，因为这样子级只会覆盖父级属性。

对此的解决方案不是必须`C` *是*a (is-a)，而是具有(has-a .. composition)`C`的属性。`A`但是，这需要对您的层次结构进行一些修改，并且您的调用必须更加明确。就像是

```
class C {
   private $b;
   private $properties = array('T', 'U');
   public function __construct(B $b) {
      $this->b = $b;
   }
   public function someMethod() {
      $this->b->someMethod($properties);
   }
}
class B {
   private $properties = array('R', 'S');
   private $a;
   public function __construct(A $a) {
      $this->a = $a;
   }
   public function someMethod($properties) {
      $this->a->someMethod(array_merge($this->properties, $properties));
   }
}
class A {
   private $properties = array('P', 'Q');
   public function someMethod($properties) {
      //your implementation plus an array_merge
   }
} 
```

这显然会增加定义中的冗长，这是不好的。你可能想重新考虑为什么你必须以你正在做的方式做一些事情。你可以用`trait`s 解决这个问题（假设你有 PHP 5.4）

# sql - 如何在sql查询中找到记录的第n个孩子

> ID：11772163
> 
> 赞同：1
> 
> 时间：2012-08-02T06:29:09.333
> 
> 标签：sql, sql-server

我有一个存储类别和子类别的表（自联接）

```
The table structure is like this:
-CategoryId
-CategoryName
-ParentCategoryId 
```

如何在sql查询中找到一个类别的第n个孩子/孩子

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T06:36:25.980

这样的事情怎么样

```
DECLARE @Categories TABLE(
        CategoryId INT, 
        CategoryName VARCHAR(20),
        ParentCategoryId INT
)

INSERT INTO @Categories SELECT 1, '1',NULL
INSERT INTO @Categories SELECT 2, '2',NULL

INSERT INTO @Categories SELECT 3, '1.3',1
INSERT INTO @Categories SELECT 4, '1.4',1

INSERT INTO @Categories SELECT 5, '1.3.5',3
INSERT INTO @Categories SELECT 6, '1.3.6',3
INSERT INTO @Categories SELECT 7, '1.3.6.7',6

INSERT INTO @Categories SELECT 8, '1.4.8',4

DECLARE @CatID INT,
        @NthLevel INT
SELECT  @CatID = 1,
        @NthLevel = 2

;WITH Vals AS (
        SELECT  *,
                1 AS CatLevel
        FROM    @Categories c 
        WHERE   CategoryId IS NULL
        UNION ALL
        SELECT  c.*,
                CatLevel + 1 AS CatLevel
        FROM    Vals v INNER JOIN
                @Categories c   ON  c.ParentCategoryId =  v.CategoryID
)
SELECT  *
FROM    Vals
WHERE   CatLevel = @NthLevel 
```

这将递归地构建树结构，并将其限制在您正在寻找的树级别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T06:32:59.583

```
SELECT ParentCategoryId,
  , CategoryId AS [n-th child]
FROM (
  SELECT CategoryId
    , ParentCategoryId
    , ROW_NUMBER() OVER (PARTITION BY ParentCategoryId ORDER BY CategoryId) as ChildNumber
  FROM Categories
) p
WHERE ChildNumber = %N 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T06:33:42.647

要查找category 的`N`第 th 个子项，按 CategoryId 排序`M`：

```
select  *
from    (
        select  row_number() over (order by c.CategoryId) as rn
        ,       c.*
        from    Categories p
        join    Categories c
        on      p.CategoryId = c.ParentCategoryId
        where   p.CategoryId = M
        )
where   rn = N 
```

# javascript - Google 通讯录 API 错误

> ID：11772166
> 
> 赞同：2
> 
> 时间：2012-08-02T06:29:27.600
> 
> 标签：javascript, google-api, google-contacts-api

我正在使用以下代码获取谷歌联系人姓名和电话号码。授权页面本身无法正常显示，它显示错误为“您请求的页面无效”。:(请帮我解决这个问题...

`

```
<script type="text/javascript" src="http://www.google.com/jsapi"></script> 
<script type="text/javascript">
  google.load("gdata", "1.x");

  var contactsService;
  function setupContactsService()
  {
  contactsService = new google.gdata.contacts.ContactsService('exampleCo-exampleApp-1.0');
  }
  function logMeIn() {
      var scope = 'https://www.google.com/m8/feeds';
      var token = google.accounts.user.login(scope);
      }
  function initFunc() {
      setupContactsService();
      logMeIn();
      getMyContacts();
      }
  function checkLoggedIn(){
      scope = "https://www.google.com/m8/feeds";
      var token = google.accounts.user.checkLogin(scope);

      if(token != "")
      return true;
      else
      return false;
      }
  function getMyContacts() {
      var contactsFeedUri = 'https://www.google.com/m8/feeds/contacts/default/full';

      var query = new google.gdata.contacts.ContactQuery(contactsFeedUri);

      //We load all results by default//
      query.setMaxResults(10);

      contactsService.getContactFeed(query, handleContactsFeed, ContactsServiceInitError);
      }
//Gets the contacts feed passed as parameter//
  var handleContactsFeed = function(result) {

  //All contact entries//
  entries = result.feed.entry;
  for (var i = 0; i < entries.length; i++) {
      var contactEntry = entries[i];
      var telNumbers = contactEntry.getPhoneNumbers();
      var title = contactEntry.getTitle().getText();
      }
}
</script> 
<body>
<input type="submit" value="Login to Google" id="glogin"  onclick="initFunc();">
</body>` 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:35:32.213

您似乎正在尝试使用 Google Contacts 1.X API。这已被弃用。查看[Google 3.X API 的 JavaScript 示例，](http://code.google.com/p/google-api-javascript-client/wiki/Samples)看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-10T10:21:51.630

你可以试试这个例子

```
var config = {
  'client_id': 'Client ID',
  'scope': 'https://www.google.com/m8/feeds'
};

inviteContacts = function() {
   gapi.auth.authorize($scope.config, function() {
       fetch(gapi.auth.getToken());
   });
}

function fetch(token) {
    $.get("https://www.google.com/m8/feeds/contacts/default/full?access_token=" + token.access_token + "&alt=json", function(response) {
         console.log(response);
         //console.log(response.data.feed.entry);
    });
} 
```

不要忘记添加`<script src="https://apis.google.com/js/client.js"></script>`到您的 html 文件中。祝你好运！

# jquery - 我们如何用另一个表单字段显示一个表单字段的 jquery 验证错误消息

> ID：11772167
> 
> 赞同：0
> 
> 时间：2012-08-02T06:29:26.727
> 
> 标签：jquery, jquery-validate

我正在为客户端和服务器端验证使用 jquery 验证器。

但我想显示一个表单与另一个表单字段一起提交的错误。

谁能建议如何实现这一目标？

我正在使用以下验证器类。

[http://jquery-validation-php-plugin.googlecode.com/svn-history/r6/trunk/Validator.class.php](http://jquery-validation-php-plugin.googlecode.com/svn-history/r6/trunk/Validator.class.php)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:43:09.610

您可以在 jquery 验证插件中创建新规则。检查此链接[jquery-validate - addMethod - 如何应用引用两个文本框的自定义规则？](https://stackoverflow.com/questions/8263535/jquery-validate-addmethod-how-to-apply-custom-rule-referencing-two-text-boxe)

在此规则中，您可以检查表单字段并相应地返回规则的值。

或者，您可以更改字段的规则。假设您有一个字段“firstName”，因此您可以像这样添加自定义代码

```
firstName:
{
   required: function(element)
   {
      // here you can add your custom code
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T05:10:48.453

您可以使用 addMethod 规则进行此自定义验证。例如，如果您有一个表单 id="mainForm"，下拉列表中有状态列表。假设你的下拉菜单有 id ="drpState" 然后，像这样写

```
HTML
-------
<select>
  <option value="-1">- Select -</option>
  <option value="1">Aus</option>
  <option value="2">Mogs</option>
  <option value="3">Swut</option>
 </select>

Jquery
-------
jQuery(document).ready(function () {
$.validator.addMethod("selectState", function (value, element) {
        return this.optional(element) || (value.indexOf('-1'));
    }, "Please select state");

    $("#mainForm").validate({
       rules: {drpState:{selectState:true},
  });
}); 
```

请参阅更多信息：[http](http://ssthil.blogspot.in/2012/06/jquery-validate-multiple-fields-with.html) ://ssthil.blogspot.in/2012/06/jquery-validate-multiple-fields-with.html 让我知道您的反馈

# android - 在 MemoryFile 类上找不到 deactivate() 函数

> ID：11772171
> 
> 赞同：0
> 
> 时间：2012-08-02T06:29:53.500
> 
> 标签：android, eclipse

我正在从另一个文件中导入这个项目，除了这段奇怪的代码片段之外，其他一切都很顺利

```
 MemoryFile memoryFile = new MemoryFile(null, length);
           memoryFile.writeBytes(buffer, 0, 0, length);
           memoryFile.deactivate();
           return AssetFileDescriptor.fromMemoryFile(memoryFile); 
```

eclipse 抱怨 MemoryFile 类中不存在 deactivate 函数，以及 AssetFileDescriptor 没有 fromMemoryFile 函数。这很奇怪，因为根据以下链接，存在[deactivate](http://hi-android.info/doc/android/os/MemoryFile.html#deactivate%28%29)和[fromMemoryFile](http://www.androidjavadoc.com/2.3/android/content/res/AssetFileDescriptor.html#fromMemoryFile%28android.os.MemoryFile%29)函数。但是 SDK 似乎找​​不到它们，或者 android.jar 似乎不包含它们。

真正奇怪的是，这两个函数在“Android 官方文档”中“不存在”。

我将 Properties->Android 上的“项目构建目标”从 Android 2.1 更改为 2.3，但问题仍然存在。我也在网上进行了广泛的搜索，但奇怪的是，“没有人”曾经问过同样的问题。

有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:44:24.130

您可能正在从某些内部类中复制代码。`deactivate()`和`fromMemoryFile()`是隐藏的api（`@hide`在源代码中带有注释），并不适合应用程序开发人员使用。

# backbone.js - 即使使用 delegateEvents() 重新渲染后，backbone.js 事件也不会触发

> ID：11772174
> 
> 赞同：1
> 
> 时间：2012-08-02T06:30:02.137
> 
> 标签：backbone.js, backbone-events, backbone-views

我有一个视图，里面有一个嵌套视图，当渲染时，它上面有一个链接，并附加了一个点击事件。我第一次点击所有链接，一切正常。但是当重新渲染所有视图时，链接事件就会消失。我尝试在重新渲染之前强制delegateEvents（）渲染并删除视图，但没有。

这是我的代码：

```
var SlideView = Backbone.View.extend({

    tagName: 'li',

    events: {
      'click .nested':'destroy'
    },

    template: _.template($('#slides-nested-template').html()),

    render: function(e){
      var _el = $(this.el);
      _el.html(this.template(this.model.toJSON()));
      this.delegateEvents(this.events);
      return this;
    },

    destroy: function(e){
      e.preventDefault();
      Presentations.eliminate($(e.target).attr('rel'));
    }

});

var SectionView = Backbone.View.extend({

    tagName: 'li',

    template: _.template($('#slides-template').html()),

    events: {
      'click .no-nested':'destroy'
    },

    initialize: function(options){
      this.views = [];
      _.bindAll(this, 'destroy');
    },

    render: function(){
      var _el = $(this.el), self=this;
      _el.html(this.template(this.model.toJSON()));
      _ul = this.$('ul');  

      var data = Presentations.filter(function(slide){
        return slide.get('padre') == self.model.get('id');
      });

      _.each(data, function(slide){
        view = new SlideView({
          model: slide
        });
        self.views.push(view);
        _ul.append(view.render().el);
      });

      this.delegateEvents(this.events);
      return this;
   },

   destroy: function(e){
     e.preventDefault();
     Presentations.eliminate($(e.target).attr('rel'));
   },

   removeViews: function(){
     while (this.views.length){
       var view = this.views.shift();
       view.undelegateEvents();
       view.remove();
       view = null;
    }
  }
});

var SectionList = Backbone.View.extend({

    tagName: 'ul',

    className: 'sortable',

    initialize: function(options){
      Presentations.on('add', this.render, this);
      Presentations.on('reset', this.render, this);
      Presentations.on('remove', this.render, this);
      this.views = [];
    },

    render: function(e){
      //this.removeViews();
      $('#slides .content').empty();

      var data = Presentations.filter(function(slide){
        return slide.get('padre') === false;
      });

      var view, self=this, _el=$(this.el);
      _.each(data, function(slide){
          view = new SectionView({
            model: slide
          });
          _el.append(view.render().el);
          self.views.push(view);
      });

      $('#slides .content').append(_el);
      return this;
   },

   removeViews: function(){
      while (this.views.length){
        var view = this.views.shift();
        view.undelegateEvents();
        view.removeViews();
        view.remove();
        view = null;
      }
   }
});

var Presentation = Backbone.Model.extend({

});

var PresentationList = Backbone.Collection.extend({

  model: Presentation,

  url: BASE_URL+'api/slides/'+PRESENTATION,

  eliminate: function(id){
    this.each(function(slide){
      if (slide.get('padre')==id){
        slide.set('padre', false);
        slide.save();
      }
    });
    var ref = this.get(id);
    ref.destroy();
    this.remove(ref);
  }
});

Presentations = new PresentationList();
SectionListView = new SectionList();
Presentations.fetch(); 
```

# c++ - 线程挂在 pthread_rwlock_t

> ID：11772176
> 
> 赞同：1
> 
> 时间：2012-08-02T06:30:07.343
> 
> 标签：c++, linux, pthreads

我在 C++ 中有这个简单的线程创建程序，在全局声明 RW 锁期间，程序按预期执行，但是当在本地（即在函数内部）进行相同的锁声明时，只有一个线程执行，另一个线程挂起。

*在职的：*

```
#include <iostream>
#include <pthread.h>

using namespace std;
int i = 0;
**pthread_rwlock_t mylock;** //GLOBAL

void* IncrementCounter(void *dummy)
{
   cout << "Thread ID  " << pthread_self() << endl;
   int cnt = 1;
   while (cnt < 50)
   {
      pthread_rwlock_wrlock(&mylock);
       ++i;
      pthread_rwlock_unlock(&mylock);
      ++cnt;
   cout << "Thread ID ( " << pthread_self() << " ) Incremented Value : " << i << endl;
   }

}
int main()
{
      pthread_t thread1,thread2;
      int ret, ret1;
      ret = pthread_create(&thread1,NULL,IncrementCounter,NULL);
      ret1 = pthread_create(&thread2,NULL,IncrementCounter,NULL);
      pthread_join(thread1,NULL);
      pthread_join(thread2,NULL);

} 
```

****不工作：* ***

```
#include <iostream>
#include <pthread.h>

using namespace std;
int i = 0;

void* IncrementCounter(void *dummy)
{
   cout << "Thread ID  " << pthread_self() << endl;
   int cnt = 1;
   **pthread_rwlock_t mylock;** //LOCAL
   while (cnt < 50)
   {
      pthread_rwlock_wrlock(&mylock);
       ++i;
      pthread_rwlock_unlock(&mylock);
      ++cnt;
   cout << "Thread ID ( " << pthread_self() << " ) Incremented Value : " << i << endl;
   }

}
int main()
{
      pthread_t thread1,thread2;
      int ret, ret1;
      ret = pthread_create(&thread1,NULL,IncrementCounter,NULL);
      ret1 = pthread_create(&thread2,NULL,IncrementCounter,NULL);
      pthread_join(thread1,NULL);
      pthread_join(thread2,NULL);

} 
```

这可能是什么原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T06:36:31.487

In neither case are you correctly initialising the `mylock` variable - you are just getting "lucky" in the first case. The correct initialisation in the global case would be:

```
pthread_rwlock_t mylock = PTHREAD_RWLOCK_INITIALIZER; 
```

In the local case, if you want your threads to be accessing the *same* lock, then it has to be declared `static`:

```
static pthread_rwlock_t mylock = PTHREAD_RWLOCK_INITIALIZER; 
```

That's what you want in this case, because you're protecting access to the global `i`. The lock should be associated with the data, so if `i` is global then really it makes sense for `mylock` to be global also.

* * *

If you *really* wanted non-static locks (which in this case, you don't), you would use:

```
pthread_rwlock_t mylock;

pthread_rwlock_init(&mylock, NULL); 
```

followed by:

```
pthread_rwlock_destroy(&mylock); 
```

at the end of the function.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T06:59:57.950

除了其他答案所说的之外，请考虑在 C 和 C++ 中，所有具有静态存储的变量（例如`mylock`在您的第一个示例中）都被初始化为零。简化，`pthread_rwlock_t`是一个`struct`。

在您的第一个示例中，`mylock`具有静态存储持续时间，因此其所有内部成员都初始化为零。碰巧，这相当于 的“解锁”状态`pthread_rwlock_t`，因为另一个答案中提到的宏`PTHREAD_RWLOCK_INITIALIZER`将所有内容都初始化为零；在`nptl/sysdeps/pthread/pthread.h`你可以找到：

```
#define PTHREAD_RWLOCK_INITIALIZER \
 { { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 } } 
```

因此，您的第一个示例的所有运行都将始终表现出相同的行为（即锁将开始解锁）。

在您的第二个示例中，`mylock`未初始化，因为它具有自动存储持续时间。然后，该行为将取决于碰巧位于未初始化内存区域的其他值。大多数时候，锁以“锁定”状态开始，但是，如果你足够幸运（不幸），它会开始解锁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T06:37:07.680

The reason is quite clear, you even say so yourself... In the working version the variable is global, while in the non-working the variable is local.

A local variable is only known inside the function, during that call. So if a function is called twice then the variable is unique on both these calls.

If you want to use a local variable, you can mark it `static`, as that makes it "static" between all invocations of the function.

I suggest you read more about variable scoping and lifetime.

# javascript - jQuery 使用 jQuery Post 和 data() 将数据发送到页面

> ID：11772177
> 
> 赞同：0
> 
> 时间：2012-08-02T06:30:08.103
> 
> 标签：javascript, jquery, post

我在概念化这一点时遇到了一些困难：我将一些数据存储到一个按钮中：

```
var input2 = '<button id="viewmap1" class="viewmap">Find on Map</button>';
        //MAKE DATA
        $(input2).data('longlat', coords); 
```

现在我想将该数据发送到另一个页面。我知道我要使用 jQuery post，例如：

```
$.post("test.html", { func: "getNameAndTime" },
  function(data){
    alert("Hello"); 
  }, "json"); 
```

但我不完全确定如何去做。任何人都可以指出我正确的方向吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T07:34:05.887

将数据发送到不同的页面并不像听起来那么简单。如果它很简单，破解者可以操纵您当前在浏览器选项卡中打开的所有其他页面。

当您调用`$.post()`时，它只是将数据发送到服务器，而不是发送到另一个页面。URL 是一种告诉服务器如何处理数据的方法，但它不会神奇地将您连接到已`test.html`打开的浏览器选项卡/窗口。

通常的解决方案是使用包含按钮和元素的单个页面来显示结果（也称为“视图”）。您发送 POST 请求，然后在回调函数中更新视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:01:11.270

```
$(input2).on('click', function(){
 // do your post stuffs
}); 
```

然后需要触发按钮点击

```
$(input2).click(); 
```

# asp-classic - rdsserver.datafactory 转换为字符串失败

> ID：11772181
> 
> 赞同：0
> 
> 时间：2012-08-02T06:30:31.107
> 
> 标签：asp-classic, vb6, vbscript

我有一个多年前编写的经典 ASP 应用程序，我正在尝试修复它。

应用 w7 sp1 后，以下行最近停止工作。

```
set address  = Server.CreateObject("ADOR.Recordset")
count = lo_connection.GetRecordset(sql,address,false, error)
Set RDF2 = Server.CreateObject("RDSServer.DataFactory")
Set teststring = RDF2.ConvertToString(address) 
```

它在最后一行显示“Microsoft VBScript 运行时错误：类不支持自动化”失败

有点搜索发现了几篇这样的文章

[http://blogs.technet.com/b/asiasupp/archive/2011/03/14/changes-in-mdac-adodb-com-components-in-windows-7-service-pack-1.aspx](http://blogs.technet.com/b/asiasupp/archive/2011/03/14/changes-in-mdac-adodb-com-components-in-windows-7-service-pack-1.aspx)

准确地描述了这个问题。我失败的地方是建议的修复似乎都没有解决问题。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:01:00.250

链接中描述的解决方案与此处无关，因为 ASP 不是早期绑定的 - 它使用 OLE 自动化。可能值得重新注册创建 RDSServer.DataFactory 对象的组件（在我的机器上是 C:\Program Files\Common Files\system\msadc\msadcf.dll）。

我查找了这个对象，发现了这个 Microsoft 网页：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms681447(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681447(v=vs.85).aspx)

“此功能将在未来的 Windows 版本中移除。避免在新的开发工作中使用此功能，并计划修改当前使用此功能的应用程序。使用 RDS 的应用程序应迁移到 WCF 数据服务。”

听起来不太好。

# c# - .NET 部署项目不使用但引用的 dll 需要的 dll

> ID：11772186
> 
> 赞同：4
> 
> 时间：2012-08-02T06:31:08.070
> 
> 标签：c#, dll, reference

所以问题很简单：我的项目引用了程序集 X 而不是 Z。但是程序集 X 确实引用了程序集 Z。程序集 Z 更新有点频繁，所以每当我构建我的项目时，我也想获得最新版本的 Z .

到目前为止，我提出了 3 个选项：

1.  引用程序集 Z。这具有始终获取新版本的优势。但它确实污染了参考文献，其中没有严格要求。
2.  添加一个构建后事件，从更新的位置复制所需的 DLL。我认为这很好，直到我需要多个不同的 DLL，这会使脚本变得很长而且维护起来很乏味。
3.  将程序集 Z 添加为资源，并将 copy to output 设置为 true。我可能更喜欢这个，除了当我将 DLL 添加到项目时，Visual Studio 实际上将（当时）当前版本复制到项目中，并且没有指向原始源的链接。因此，当程序集更新时，这不会以任何方式反映在我的项目中。除非我将这种方法与选项 2 结合起来，否则我不妨单独使用选项 2。

那么，我错过了什么，还是这些是我唯一的选择？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T06:34:13.857

我会选择选项 1。我认为您的项目引用它所依赖的所有内容是完全合理的，即使这些依赖关系有时可能是间接的。

对我来说，这似乎也是*最简单*的选择 - 并且符合 Visual Studio 对您的应用程序所需的代码依赖项的看法......所以 Visual Studio 对这些依赖项所做的任何事情都应该自然而然地流动，而不是您必须考虑这在每个阶段。

编辑：作为替代选项，您是否考虑过使用[NuGet](http://nuget.org)？这样，您*只会*在项目的 NuGet 依赖项中表达对 X 的依赖，但它会“知道”它依赖于 Z。我*相信*它应该都能正常工作......即使这些是你也应该能够做到这一点内部项目，因为您可以设置自己的 NuGet 源而不是公共存储库。

# objective-c - 从异步 NSURLConnection 更新 NSmenu

> ID：11772188
> 
> 赞同：4
> 
> 时间：2012-08-02T06:31:14.520
> 
> 标签：objective-c, nsurlconnection, nsmenu

我正在编写一个小系统托盘应用程序，它从 API 获取数据并相应地更新其菜单，并且在菜单打开时更新菜单时遇到问题。

我什至不知道从哪里开始，所以让我们从头开始。

我有一个自定义`PNLinksLoader`类，其职责是获取数据并解析它：

```
- (void)loadLinks:(id)sender
{
    // instance variable used by the NSXMLParserDelegate implementation to store data
    links = [NSMutableArray array];

    [NSURLConnection sendAsynchronousRequest:request queue:[[NSOperationQueue alloc] init] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
        NSXMLParser *parser = [[NSXMLParser alloc] initWithData:data];
        parser.delegate = self;

        if (YES == [parser parse]) {
            NSArray *modes = [NSArray arrayWithObject:NSRunLoopCommonModes];
            [delegate performSelectorOnMainThread:@selector(didEndLoadLinks:) withObject:links waitUntilDone:NO modes:modes];
        }
    }];
} 
```

加载程序在应用程序启动时运行一次（完美运行），然后设置一个计时器用于定期刷新：

```
loader = [[PNLinksLoader alloc] init];
[loader setRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://papyrus.pandanova.com/links"]]];

[loader setDelegate:self];
[loader loadLinks:self];

NSMethodSignature *signature = [loader methodSignatureForSelector:@selector(loadLinks:)];
NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:signature];
[invocation setTarget:loader];
[invocation setSelector:@selector(loadLinks:)];

NSTimer *timer = [NSTimer timerWithTimeInterval:10 invocation:invocation repeats:YES];

[[NSRunLoop currentRunLoop] addTimer:timer forMode:NSRunLoopCommonModes]; 
```

现在每当加载器在服务器上加载新数据时，如果菜单关闭，那么一切正常，我打开菜单，新数据就在那里。

但是，如果菜单在刷新期间恰好打开，则什么也不会发生。如果我关闭并重新打开菜单，那么我可以看到新数据。

我想我错过了关于 RunLoop 的一些东西，但我看不到什么（我对它的理解非常稀疏，因为我实际上是在编写这个小应用程序主要是为了学习 Objective-C）。

**编辑**

`performSelector:withObject:`这里的问题不是在菜单打开时更新菜单，当我使用而不是`performSelectorOnMainThread:withObject:waitUntilDone:modes:`在加载程序中时，它实际上有点工作。问题是当我这样做时，在打开菜单时更新菜单时会得到奇怪的结果（关闭菜单时效果很好）：

![奇怪的行为](../Images/70582b56dcfccbbc4179c94392e73a2d.png)

在我的菜单中添加一个`NSLog`呼叫会循环`fixes`症状，从我在互联网上阅读的内容来看，这可能表明我的线程上有竞争条件（这就是我尝试使用的原因`performSelectorOnMainThread`，但我似乎无法理解出去。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T22:39:48.503

问题是当菜单打开时，当前的运行循环模式不再包含在 NSRunLoopCommonModes 中：它变成了 NSEventTrackingRunLoopMode。

因此，您也必须将计时器添加到此模式的当前运行循环中：

```
// use "scheduledTimer..." to have it already scheduled in NSRunLoopCommonModes, it will fire when the menu is closed
menuTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(fireMenuUpdate:) userInfo:nil repeats:YES];

// add the timer to the run loop in NSEventTrackingRunLoopMode to have it fired even when menu is open
[[NSRunLoop currentRunLoop] addTimer:menuTimer forMode:NSEventTrackingRunLoopMode]; 
```

然后在您的定时方法中，当您收到对请求的响应时，调用该方法以更新主线程（UI 线程）上的菜单：

```
[NSURLConnection sendAsynchronousRequest:request
                                   queue:[[NSOperationQueue alloc] init]
                       completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {

                           [self performSelectorOnMainThread:@selector(updateMenu) withObject:nil waitUntilDone:NO modes:[NSArray arrayWithObject:NSRunLoopCommonModes]];

                       }]; 
```

最后，在您的更新方法中，将更改应用到您的菜单数据，并且不要忘记要求菜单更新其布局：

```
[menu removeAllItems];

NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"HH:mm:ss"];
[menu addItemWithTitle:[formatter stringFromDate:[NSDate date]] action:nil keyEquivalent:@""];

[menu update]; 
```

# iphone - 获取照片alassetlibrary资产表示大小为零

> ID：11772193
> 
> 赞同：2
> 
> 时间：2012-08-02T06:31:25.603
> 
> 标签：iphone, ios, alassetslibrary, alasset, photolibrary

当我使用 ALAssetLibrary 获取照片时，对于某些图像，AssetRepresentation.size 在我的 ImageView 上归零，这不会生成图像。这是代码：

```
ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
[library enumerateGroupsWithTypes:ALAssetsGroupAlbum usingBlock:^(ALAssetsGroup *group, BOOL *stop) {

    if ([[group valueForProperty:ALAssetsGroupPropertyName] isEqual:self.groupName]) {

        [group enumerateAssetsUsingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop){
            //Get the asset type
            NSString *assetType = [result valueForProperty:ALAssetPropertyType];
            if ([assetType isEqualToString:ALAssetTypePhoto]) {
                NSLog(@"Photo Asset");
            }
            //Get URLs for the assets
            NSDictionary *assetURLs = [result valueForProperty:ALAssetPropertyURLs];

            NSUInteger assetCounter = 0;
            for (NSString *assetURLKey in assetURLs) {
                assetCounter++;
            }
            //Get the asset's representation object
            ALAssetRepresentation *assetRepresentation = [result defaultRepresentation];

            //From this asset representation, we take out data for image and show it using imageview.

            dispatch_async(dispatch_get_main_queue(), ^(void){
                CGImageRef imgRef = [assetRepresentation fullResolutionImage];
                //Img Construction
                UIImage *image = [[[UIImage alloc] initWithCGImage:imgRef] autorelease];

                NSLog(@"before %@:::%lld", [image description], [assetRepresentation size]); //Prints '0' for size

                if((image != nil)&& [assetRepresentation size] != 0){

                   //display in image view
                }
                else{
                    // NSLog(@"Failed to load the image.");
                }
            });

        }];
    }
}failureBlock:^(NSError *error){
    NSLog(@"Error retrieving photos: %@", error);
}];

[library release]; 
```

请帮忙。我在这里做错了什么？我应该如何获得图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T17:14:57.063

乔史密斯是对的！你太快释放图书馆了。AssetLibrary 被释放的那一刻，所有的资产对象都将随之消失。并且因为这些枚举是块代码，所以 AssetLibrary 的释放会在读取过程中的某个地方执行。

我建议您在应用程序委托中创建您的assetLibrary 以使其保持活动状态，并且仅在您从 ALAssetLibrary收到更改通知*ALAssetsLibraryChangedNotification时重置它*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T04:26:07.360

我认为您过早地发布了资产库。

# java - 清除tomcat 7中Web应用程序的所有会话

> ID：11772197
> 
> 赞同：6
> 
> 时间：2012-08-02T06:31:47.943
> 
> 标签：java, session, tomcat7

我正在尝试在我的 Web 应用程序启动后更新几个 JAR 文件并重新启动以使更改生效。（要求）问题是，tomcat 正在保留会话信息。是的，我的应用程序中确实有一个“sessionEventListener”侦听器，但这不应该是恕我直言的问题。

我希望一切都从 tomcat（独立运行）重新开始，无论是会话、缓存还是有关提供给 tomcat 的 Web 应用程序的任何信息，当然除了 WAR 文件。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T06:44:36.910

在开发期间（在 Eclipse 中），我通常使用右键单击服务器视图时找到的“清理 Tomcat 工作目录”选项。这将擦除所有与会话相关的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-20T07:48:31.850

在您的 tomcat 7 context.xml 中，您可以添加/取消注释此行以清除 tomcat 重新启动时的所有会话。

```
<Manager pathname="" /> 
```

# android - 谷歌云消息

> ID：11772198
> 
> 赞同：0
> 
> 时间：2012-08-02T06:31:48.373
> 
> 标签：android, google-cloud-messaging

我正在为我的 android 应用程序中的推送通知寻找解决方案，我有一个 php 服务器，并且我已经找到了一种将 GCM 与 php 服务器一起使用的方法，但是任何人都可以帮助我使用客户端代码来实现 Google Cloud Messaging 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T06:40:08.013

在 android sdk 目录中有 gcm-client 和 gcm-server 的示例代码。您可以在以下目录中找到该代码。这非常适合入门。

> android-sdk/extras/google/gcm/samples

# parsing - 谷歌 ctemplate 有时只重复一个部分

> ID：11772201
> 
> 赞同：1
> 
> 时间：2012-08-02T06:32:09.363
> 
> 标签：parsing, xml-parsing, google-ctemplate

我们有一个看起来像这样的部分......

```
{{#PRIZES}}
<div style="text-align: left;TTS={{date}}">{{date}}</div>
<div style="text-align: left;TTS={{sign}}">{{sign}}</div>
<div style="text-align: center;TTS={{number}}">{{number}}</div>
<div style="text-align: right;TTS={{serie}}">{{serie}}</div>
<br>
    {{#ADD}}
    <div style="text-align: left;TTS={{sign}}">{{sign1}}</div>
    <div style="text-align: left;TTS={{number}}">{{number}}</div>
    <div style="text-align: right;TTS={{serie}}">{{serie}}</div>
    <br>
    {{/ADD}}
{{/PRIZES}} 
```

我们希望该部分为奖品部分的每次迭代添加有时为 0 或有时为 N 的外观。

问题是我只能为每个奖品部分重复添加部分相同的时间。

# c# - 新类添加现有 dll 并将其更新为源文件代码

> ID：11772204
> 
> 赞同：1
> 
> 时间：2012-08-02T06:32:23.993
> 
> 标签：c#, .net

我使用 Microsoft.Csharp.CSharpCodeProvider 和 System.CodeDom.Compiler 命名空间动态创建了一个 DLL。在这种情况下，我收集了带有源代码的类文件，并使用 CSharpCodeProvider.CompileAssemblyFromFile(parameters,ClassFiles) 方法编译了所有类文件并创建为单个 DLL（例如 ClientProx.dll）。

我刚刚将该 DLL（例如 ClientProx.dll）复制到另一个项目中。现在，我创建了一个带有方法的新类，以及如何将这个新创建的类添加到带有旧类的现有 DLL（例如 ClientProx.dll）中。

在该 DLL 中添加新类（例如 ClientProx.dll）后，它应该在适当的文件中更新为新类。

我们如何在运行时做到这一点？是否可以在现有 DLL 中添加新类并将其更新到正确的文件位置？

# php - 如何发布 sha512 加密数据

> ID：11772205
> 
> 赞同：2
> 
> 时间：2012-08-02T06:32:33.273
> 
> 标签：php, post, hash, checksum, sha512

我的 PHP 脚本需要帮助。我需要以加密方式发布某些字段，如 invoiceid、名字、电子邮件等。校验和的公式是

```
sha512 (key|txnid|amount|productinfo|firstname|email|udf1|udf2|udf3|udf4|udf5||||||<SALT>) 
```

我需要通过 sha512 发布上述变量。我无法做到这一点。请帮助解决这个问题。我是一个学习者，我不擅长 PHP。

这是代码。我仍然收到校验和错误。

```
<?php
function xxx_config() {

    $configarray = array(
     "FriendlyName" => array("Type" => "System", "Value"=>"XXX"),
     "alias" => array("FriendlyName" => "Merchant ID", "Type" => "text", "Size" => "20", ),
     "salt" => array("FriendlyName" => "SALT", "Type" => "text", "Size" => "20",),
     "mode" => array("FriendlyName" => "MODE", "Type" => "text", "Description" => "TEST or LIVE", ),

    );
    return $configarray;
}

function xxx_link($params) {

    # Gateway Specific Variables
    $key = $params['alias'];
    $gatewaymode = $params['mode'];
    $salt = $params['salt'];

    # Invoice Variables
    $txnid = $params['invoiceid'];
    $productinfo = $params["description"];
    $amount = $params['amount']; # Format: ##.##
    $currency = $params['currency']; # Currency Code

    # Client Variables
    $firstname = $params['clientdetails']['firstname'];
    $lastname = $params['clientdetails']['lastname'];
    $email = $params['clientdetails']['email'];
    $address1 = $params['clientdetails']['address1'];
    $address2 = $params['clientdetails']['address2'];
    $city = $params['clientdetails']['city'];
    $state = $params['clientdetails']['state'];
    $postcode = $params['clientdetails']['postcode'];
    $country = $params['clientdetails']['country'];
    $phone = $params['clientdetails']['phonenumber'];

    # System Variables
    $companyname = 'XXX';
    $systemurl = $params['systemurl'];
    $currency = $params['currency'];

        # Enter your code submit to the gateway...

$hashdata = ($key."|".$txnid."|".$amount."|".$productinfo."|".$firstname."|".$email."|"."|"."|"."|"."|"."|".$salt);

   $hash = hash("sha512", $hashdata);

$code = '<form method="post" action="https://secure.xxx.xxx" name="frmTransaction" id="frmTransaction" onSubmit="return validate()">
<input type="hidden" name="key" value="'.$key.'" />
<input type="hidden" name="mode" value="'.$gatewaymode.'" />
<input type="hidden" name="productinfo" value="'.$productinfo.'" />
<input type="hidden" name="txnid" value="'.$txnid.'" />
<input type="hidden" name="salt" value="'.$salt.'" />
<input type="hidden" name="name" value="'.$firstname.'" />
<input type="hidden" name="address" value="'.$address1.'" />
<input type="hidden" name="city" value="'.$city.'" />
<input type="hidden" name="state" value="'.$state.'" />
<input type="hidden" name="country" value="'.$country.'" />
<input type="hidden" name="postal_code" value="'.$postcode.'" />
<input type="hidden" name="ship_name" value="'.$firstname.'" />
<input type="hidden" name="ship_address" value="'.$address1.'" />
<input type="hidden" name="ship_city" value="'.$city.'" />
<input type="hidden" name="ship_state" value="'.$state.'" />
<input type="hidden" name="ship_country" value="'.$country.'" />
<input type="hidden" name="ship_postal_code" value="'.$postcode.'" />
<input type="hidden" name="ship_phone" value="'.$phone.'" />
<input type="hidden" name="email" value="'.$email.'" />
<input type="hidden" name="phone" value="'.$phone.'" />
<input type="hidden" name="amount" value="'.$amount.'" />
<input type="hidden" name="surl" value="https://xxx.xx/xxxx.php" />
<input type="hidden" name="furl" value="https://xxx.xx/xxx.php" />
<input type="hidden" name="Hash" value="'.$hash.'"/>
<input type="submit" value="Pay Now" />
</form>';

return $code;

}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:38:41.760

the [hash](http://php.net/hash)() function is what you are looking for. To create an sha512 hash call it as follows:

```
hash('sha512', "the value to hash"); 
```

to see what Hash-Algorithms else you could use take a look at the [hash_algos](http://php.net/hash_algos)() function

# c# - 将 CSS 链接到 asp.net 中的 SKIN 文件

> ID：11772206
> 
> 赞同：2
> 
> 时间：2012-08-02T06:32:43.443
> 
> 标签：c#, asp.net, skin

我在 App_Themes 中有一个皮肤文件，还有一个 css 文件。我使用了 Gridview 样式 css 并将其导入到皮肤文件中。

```
<asp:GridView CssClass="GridViewStyle" runat="server" >
    <FooterStyle CssClass="GridViewFooterStyle" />
    <RowStyle CssClass="GridViewRowStyle" />    
    <SelectedRowStyle CssClass="GridViewSelectedRowStyle" />
    <PagerStyle CssClass="GridViewPagerStyle" />
    <AlternatingRowStyle CssClass="GridViewAlternatingRowStyle" />
    <HeaderStyle CssClass="GridViewHeaderStyle" />
</asp:GridView> 
```

但是如何将 css 文件链接到这个皮肤文件中。我没有在运行时得到设计。

而我的 Web.Config 文件为

```
<pages themes="summer"> 
```

任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T06:41:46.133

You need to add Page directive to use Themes file in individual page.

```
<%@ Page Theme="ThemeName" %>
<%@ Page StyleSheetTheme="ThemeName" %> 
```

For more deatil. [Check it](http://msdn.microsoft.com/en-us/library/0yy5hxdk%28v=vs.80%29.aspx)

In Web.config file.

```
<configuration>
    <system.web>
        <pages StyleSheetTheme="Themename" />
    </system.web>
</configuration> 
```

# php - 为什么 PHP Simple HTML DOM Parser 无法从某些 URL 捕获标签的内容？

> ID：11772214
> 
> 赞同：0
> 
> 时间：2012-08-02T06:33:08.060
> 
> 标签：php, html-parsing, simpledom

我正在使用 PHP Simple HTML DOM Parser 来获取`<h1>`不同网页上第一个标签的内容。该脚本大部分时间都运行良好，但在某些网页上，我的脚本只是有点“挂断”。脚本停止，没有完成我下面列出的代码。我查看了那些不起作用的页面的来源，但它们的`<h1>`内容并没有什么特别的不同。有没有办法让它适用于所有可能的 URL，如果没有，我该如何修复我的脚本，使其不会因为 URL 不起作用而挂起？

```
include_once( 'simple_html_dom.php');
$html = file_get_html($webpage);
$element = $html->find('h1', 0);
$element = strip_tags($element); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T00:45:00.343

我从来没有得到回应，但似乎答案是使用 cURL 获取 url 的内容，然后使用 PHP Simple HTML DOM Parser 获取标签信息。

# dojo - Dojo : 清除 div 的所有文本框

> ID：11772215
> 
> 赞同：0
> 
> 时间：2012-08-02T06:33:11.067
> 
> 标签：dojo

如何从客户端清除 div 的所有文本框，其中父级不包含任何来自标签。？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:05:50.083

添加 unludo 的答案（如果使用 dojo 1.7）：

```
require(["dojo/query"], function(query){
  query("div > input[type='text']").forEach(function(node){
    node.value = "";
  });
}); 
```

如果道场 < 1.7

```
dojo.query("div > input[type='text']").forEach(function(node){
        node.value = "";
      }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:45:19.687

If you put a classname on the divs:

```
var nodes = dojo.query(".className");
for(var x = 0; x < nodes.length; x++)
{
   nodes[x].value = "";
// nodes[x].innerHMTL = ""; 
} 
```

Or you may get the nodes with somethign like this:

var nodes = dojo.query("div>input[type='text']");

(I did not test :-/)

# php - 如何在 symfony2 应用程序中更新教义

> ID：11772222
> 
> 赞同：2
> 
> 时间：2012-08-02T06:33:56.943
> 
> 标签：php, symfony, doctrine-orm

我有 symfony 2.0.15 和教义 2.1.7

这是我的 deps 文件

```
[doctrine-common]
    git=http://github.com/doctrine/common.git
    version=2.1.4

[doctrine-dbal]
    git=http://github.com/doctrine/dbal.git
    version=2.1.7

[doctrine]
    git=http://github.com/doctrine/doctrine2.git
    version=2.1.7

[doctrine-fixtures]
    git=http://github.com/doctrine/data-fixtures.git

[DoctrineFixturesBundle]
    git=http://github.com/doctrine/DoctrineFixturesBundle.git
    target=/bundles/Symfony/Bundle/DoctrineFixturesBundle
    version=origin/2.0

[doctrine-migrations]
    git=http://github.com/doctrine/migrations.git

[DoctrineMigrationsBundle]
    git=http://github.com/doctrine/DoctrineMigrationsBundle.git
    target=/bundles/Symfony/Bundle/DoctrineMigrationsBundle
    version=origin/2.0 
```

但我想得到教义 2.3 。我该如何更新

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:01:46.663

小心，**Doctrine 2.3 不稳定**！

```
[doctrine-common]
    git=http://github.com/doctrine/common.git
    version=2.3.0-RC1

[doctrine-dbal]
    git=http://github.com/doctrine/dbal.git
    version=2.3.0-RC1

[doctrine]
    git=http://github.com/doctrine/doctrine2.git
    version=2.3.0-RC1

[doctrine-fixtures]
    git=http://github.com/doctrine/data-fixtures.git

[DoctrineFixturesBundle]
    git=http://github.com/doctrine/DoctrineFixturesBundle.git
    target=/bundles/Symfony/Bundle/DoctrineFixturesBundle

[doctrine-migrations]
    git=http://github.com/doctrine/migrations.git

[DoctrineMigrationsBundle]
    git=http://github.com/doctrine/DoctrineMigrationsBundle.git
    target=/bundles/Symfony/Bundle/DoctrineMigrationsBundle 
```

然后更新您的供应商：

```
php bin/vendors.php update 
```

我最后的建议是**切换到作曲家**！这是一个强大的 PHP 依赖管理系统。

# jasper-reports - 如何使用 js-export.bat 文件备份 Jasper 服务器 4.5 存储库？

> ID：11772228
> 
> 赞同：0
> 
> 时间：2012-08-02T06:34:27.377
> 
> 标签：jasper-reports, jasperserver

我正在使用 JasperReport server 4.5，而 Jasperserver 4.5 默认使用 Postgre 数据库，我已经使用 Jasperserver 配置了 MySQL5.5，现在我可以将 Jasperserver 数据库与 MySQL 数据库连接，并且报告工作正常，但是当我使用 js-export 命令时导出所有 Jasperserver 存储库报告，它显示一些错误为

```
 * Caused by: org.hibernate.exception.GenericJDBCException: Cannot open 
     connection* 
```

和

```
 *Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown
       database 'jasperserver'* 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T16:40:28.690

这只是意味着您没有正确配置 js-export。请参阅文档并使用存储库数据库的正确凭据（和技术！）设置相关属性文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:46:16.573

您应该查看 default_master.properties 文件（在我的情况下，它与 js-export 位于同一目录中）并根据您的设置更改数据库属性。

然后 js-export 和 js-import 应该可以工作。

# asp.net-mvc-3 - 验证没有在 RAZOR 中的文本框上触发？

> ID：11772229
> 
> 赞同：0
> 
> 时间：2012-08-02T06:34:30.370
> 
> 标签：asp.net-mvc-3, razor-grid

1below 我已经发布了我的视图总编码。这里验证不会在文本框上触发。我不知道如何解决这个问题。该视图正在执行。如果我按下搜索文本框而不在文本框中输入文本，它不会验证。还告诉我是否必须使用 TextBox 或 TextBoxFor。我对 mvc3 比较陌生。请告诉我解决方案。

```
 @model  IEnumerable< ShoppingCart.Models.ShoppingClass>
        @{
            ViewBag.Title = "Display";

        }
<script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script>

@Html.ValidationSummary(true)
 @using (Html.BeginForm("Display","Home", FormMethod.Post, new { id = "loginForm" }))

        {

            //for (int i = 0; i < 1; i++)
            //{
            <table><tr>o<td> @Html.Label("BrandName")</td>
            <td>@Html.TextBox("BrandName") <div> @Html.ValidationMessage("BrandName")</div></td>
         <td></td></tr></table>

    @*    <table><tr><td>

         @Html.LabelFor(o=>o[i].BrandName)</td>
        <td>@Html.EditorFor(o => o[i].BrandName) <div>@Html.ValidationMessageFor(o => o[i].BrandName)</div></td>
        <td></td></tr></table>*@

          //  }
               <input type="submit" value="Search" name="Search" />
        }

  @{
    var grid = new WebGrid(source: Model, defaultSort: "Drug_Code", rowsPerPage: 20);
 <div id="grid">
    @grid.GetHtml(tableStyle: "listing-border", headerStyle: "gridhead", footerStyle: "paging", rowStyle: "td-dark", alternatingRowStyle: "td-light",
       columns: grid.Columns(
                   grid.Column("GenericName", format: @<text>@item.GenericName</text>),
                   grid.Column("BrandName", format: @<text>@item.BrandName</text>),
                   grid.Column("Purchaseqty", format: @<text>@item.Purchaseqty</text>),
                   grid.Column("Purchaseprice", format: @<text>@item.Purchaseprice</text>),
                   grid.Column("Drug_Code", format: @<text>@item.Drug_Code</text>),
                   grid.Column(header: "", format: (item) => Ajax.ActionLink("Add to Cart", "ADDTOCART",
                   new { brandname = @item.BrandName, purchaseqty = @item.Purchaseqty, drugcode = @item.Drug_Code }, new AjaxOptions { HttpMethod = "Post", OnSuccess = "ADDTOCART" }))

                                                                                                )
   </div>

      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:22:47.933

编辑：添加了一个更完整的示例。

从上面的评论中我不确定它是否能让你满意，但我认为你的问题的根源是你试图在不需要的地方使用 IEnumerable 模型。我知道您的网格需要它，但是如果您将网格或搜索框放在 PartialView 中怎么办？PartialView 可以有自己的模型，然后您不需要将搜索框放入不适合的模型中。

据我了解，您实际上并没有将数据传递到搜索框中。您仅在搜索框中使用模型，因此您可以获得字段验证。让我知道这是否不正确。

编辑您的视图，使其如下所示：

```
@model  IEnumerable< ShoppingCart.Models.ShoppingClass>
    @{
        ViewBag.Title = "Display";
    }
   <script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript">    </script>
   <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script>

@Html.ValidationSummary(true)

@{Html.RenderPartial("_Search", Model.First());} //Need to make sure Model.First() actually exists, or you'll get error when it doesn't
//If you change your partial view to have a view model with just brand name, call it like this:
//@Html.RenderPartial("_Search", new _SearchViewModel())
//If you're only using the view model for required field validation on the return trip, then you don't actually need to pass data down to it.

@{
  var grid = new WebGrid(source: Model, defaultSort: "Drug_Code", rowsPerPage: 20);
 <div id="grid">
@grid.GetHtml(tableStyle: "listing-border", headerStyle: "gridhead", footerStyle: "paging", rowStyle: "td-dark", alternatingRowStyle: "td-light",
   columns: grid.Columns(
               grid.Column("GenericName", format: @<text>@item.GenericName</text>),
               grid.Column("BrandName", format: @<text>@item.BrandName</text>),
               grid.Column("Purchaseqty", format: @<text>@item.Purchaseqty</text>),
               grid.Column("Purchaseprice", format: @<text>@item.Purchaseprice</text>),
               grid.Column("Drug_Code", format: @<text>@item.Drug_Code</text>),
               grid.Column(header: "", format: (item) => Ajax.ActionLink("Add to Cart", "ADDTOCART",
               new { brandname = @item.BrandName, purchaseqty = @item.Purchaseqty, drugcode = @item.Drug_Code }, new AjaxOptions { HttpMethod = "Post", OnSuccess = "ADDTOCART" }))

                                                                                                )
</div>

  } 
```

创建局部视图（_Search）：

```
@model ShoppingCart.Models.ShoppingClass
//You could also create a different View Model that just has brand name, and pass the data down another way
//See examples in the code for the view

@Html.ValidationSummary(true)
@using (Html.BeginForm("Display","Home", FormMethod.Post, new { id = "loginForm" }))
{
    <table><tr><td>

     @Html.LabelFor(o=>o.BrandName)</td>
    <td>@Html.EditorFor(o => o.BrandName) <div>@Html.ValidationMessageFor(o => o.BrandName)</div></td>
    <td></td></tr></table>

    <input type="submit" value="Search" name="Search" />
} 
```

# mysql - 如何停止和启动mysql？

> ID：11772231
> 
> 赞同：0
> 
> 时间：2012-08-02T06:34:44.157
> 
> 标签：mysql, database

当我使用 find 命令定位 MySQL 位置时，它返回以下路径。但是，我想重新启动 MySQL。如果我停止路径（/usr/bin/mysql），它会显示错误

[使用密码='NO]'拒绝用户'root'@'localhost'的访问'

那么，哪个 MySQL 将在以下路径中重新启动？

/usr/bin/mysql

/usr/share/mysql

/usr/lib/mysql

/usr/lib64/perl5/vendor_perl/5.8.8/x86_64-linux-thread-multi/auto/DBD/mysql

/usr/lib64/perl5/vendor_perl/5.8.8/x86_64-linux-thread-multi/DBD/mysql

/usr/lib64/mysql

/var/lib/mysql

/var/lib/mysql/mysql

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-12-24T00:18:50.860

停止mysql帐户是：

`sudo mysqladmin -h localhost -u root -p shutdown`

开始是： `sudo systemctl start mysql.service`

确认：

`sudo mysql -h localhost -u root -p`

注意：root 帐户的默认密码是`root`

**不确定，但我认为这会关闭所有帐户的连接，并且也会为所有帐户启动，尽管您已停止使用授权语句使用具有特权访问/root 访问权限的帐户。

例子

`GRANT ALL PRIVILEGES ON databasename.* TO 'username'@'localhost';`

来源[http://www.luciopanasci.it/Ebooks/MySQL%20Cookbook,%203rd%20Edition.pdf](http://www.luciopanasci.it/Ebooks/MySQL%20Cookbook,%203rd%20Edition.pdf) 第 2 页主题 1.1**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T06:39:47.207

以 root 身份运行 `service mysqld restart`

如果这不起作用，请尝试 `/etc/init.d/mysqld restart`

您可以使用以下命令代替重新启动：

`start`启动mysql

`stop`阻止它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T06:37:56.487

If Mysql is running as a service:

```
sudo service mysql restart; 
```

or

```
sudo service path/to/mysql restart; 
```

**Edit:**

check if mysql is running

```
service --status-all
service --status-all | grep mysql 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T06:38:14.950

Usually you do

```
/etc/init.d/mysql start/stop/restart 
```

It may be called mysqld or mysql-server or something like that. If you're on Ubuntu, you have to do

```
service mysql start/stop/restart 
```

there it may be mysqld or mysql-server or something like this as well.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-03T11:41:10.277

如果 Mysql 正在运行，请使用

**重新启动：** `service mysqld restart`

如有必要，可以使用的其他命令如下所示。

**停止：** `service mysqld stop`

**开始：** `service mysqld start`

# matlab - matlab：理解 matlab 行为

> ID：11772236
> 
> 赞同：0
> 
> 时间：2012-08-02T06:35:29.190
> 
> 标签：matlab, bsxfun

有人可以解释以下代码片段吗？我没有计算机科学或编程方面的背景，最近才开始了解 Matlab。我理解从`data=ceil(rand(7,5)*10)...`to的预分配部分`...N*(N-1)/2)`。

我需要了解 matlab 如何从头到尾处理代码的各个方面`kk=0`。此外，代码以这种方式编码的原因。: 的作用就不用解释了`bsxfun(@minus)`，只是在代码的方案中它是如何运作的。

```
data=ceil(rand(7,5)*10); 
N = size(data,2);
b=cell(N-1,1);
c=NaN(size(data,1),N*(N-1)/2); 

kk=0;
for ii=1:N-1
    b{ii} = bsxfun(@minus,data(:,ii),data(:,ii+1:end));
    c(:,kk+(1:N-ii)) = bsxfun(@minus,data(:,ii),data(:,ii+1:end));
    kk=kk+N-ii;
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T08:26:33.923

从零开始

```
kk=0; 
```

循环 ii 从 1 到 N-1，每次迭代递增 1。在 matlab 的命令行中输入`1:10`，你会看到它输出`1 2 3 4 5 6 7 8 9 10`. Thuis 冒号运算符是 matlab 中理解的一个非常重要的运算符。

```
for ii=1:N-1 
```

b{ii} = ... 这只是将矩阵存储在单元向量 b 的下一个元素中。元胞数组可以在其每个元素中保存任何内容，这是必要的，因为在这种情况下，每次迭代都会创建一个比前一次迭代少一列的矩阵。data(:,ii) --> 只获取矩阵数据的第 i 列（: 表示获取所有行） data(:, ii + 1:end) 表示获取由所有行组成的矩阵数据的子集，但仅出现在第 ii 列 bsxfun(@minus, data(:,ii), data(:,ii+1:end)) 之后的列 -> 对于矩阵中的每一列 data(:, ii+1:end) , 减去单列数据(:,ii)

```
b{ii} = bsxfun(@minus,data(:,ii),data(:,ii+1:end)); 
```

%这与上面的行做同样的事情，但不是将循环的结果矩阵存储在单元格数组的单独单元格中，而是将新矩阵附加到原始数组中。请注意，新矩阵每次将具有相同数量的行但少一列，因此这将作为新列追加。%c(:,kk + (1:N-ii)) = .... --> 所以 1:(N-ii) 在此迭代的结果中产生数字 1 到列数。在 matlab 中，您可以使用另一个数组来索引一个数组。因此，例如在 matlab 的命令行中尝试这个：`a = [0 0 0 0 0]; a([1 3 5]) = 1`。您应该看到的结果是`a = 1 0 1 0 1`. 但您也可以像这样扩展矩阵，例如现在键入`a(6) = 2`. 结果：`a = 1 0 1 0 1 2`. 因此，通过使用 c(:, 1:N-ii) 我们正在索引 c 的所有行以及正确的列数（按顺序）。添加 kk 只是抵消它，这样我们就不会覆盖我们之前的结果。

```
c(:,kk+(1:N-ii)) = bsxfun(@minus,data(:,ii),data(:,ii+1:end)); 
```

现在我们只需将 kk 增加我们添加的新列的数量，以便在下一次迭代中，将 c 添加到末尾。

```
kk=kk+N-ii;
end; 
```

我建议你在这段代码中放一个断点，逐行遍历，看看matlab中的变量是如何变化的。为此，请单击`k=0;`mfile 旁边的小虚线，您将看到那里出现一个红点，然后运行代码。代码只会执行到点，您现在处于调试模式。如果您在调试模式下将鼠标悬停在变量上，matlab 将在工具提示中显示其内容。对于一个非常大的变量，请在工作区中检查它。现在逐行浏览代码并使用我上面的解释来确保您了解每一行如何更改每个变量。对于像您这样更复杂的行，`b{ii} = bsxfun(@minus,data(:,ii),data(:,ii+1:end));`您应该突出显示代码片段并在命令行中破坏它们以查看每个部分在做什么，例如运行`data(:,ii)`以查看其作用然后尝试`data(:,ii+1:end))`甚至只是`ii+1:end`（在这种情况下它不起作用，用 size(data, 2) 替换 end ）。调试是理解让您感到困惑的代码的最佳方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T07:34:01.207

```
bsxfun(@minus,A,B) 
```

几乎一样

```
A-B 
```

不同之处在于该`bsxfun`版本将处理不同大小的输入：在每个维度（“方向”，如果您觉得这样更容易考虑的话），如果一个输入是标量，另一个是向量，则标量一个将简单地重复足够频繁。

[http://www.mathworks.com/help/techdoc/ref/bsxfun.html](http://www.mathworks.com/help/techdoc/ref/bsxfun.html)

# c# - Global.asax 中的全局变量如何正确使用？

> ID：11772237
> 
> 赞同：1
> 
> 时间：2012-08-02T06:35:35.160
> 
> 标签：c#, asp.net

我的项目中有一个带有代码的 Global.asax 文件：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.SessionState;
using System.Data.SqlClient;
using WrapperObjects;
using System.Security.Principal;

namespace Application
{
    public class Global : System.Web.HttpApplication
    {
        private string userLogin = string.Empty;
        void Application_Start(object sender, EventArgs e)
        {            

        }

        void Application_End(object sender, EventArgs e)
        {

        }

        void Application_Error(object sender, EventArgs e)
        {

        }

        void Session_Start(object sender, EventArgs e)
        {                               

        }

        void Session_End(object sender, EventArgs e)
        {
            DBUsers.SetUserStatusOnline("0", userLogin);   
            Session["curUserRole"] = string.Empty;
            Session["curUserLogin"] = string.Empty;
        }

        protected void Application_AuthenticateRequest(object sender, EventArgs e)
        {
            HttpApplication app = (HttpApplication)sender;
            if (app.Request.IsAuthenticated && User.Identity is FormsIdentity)
            {
                SqlConnection myConnection = new SqlConnection(DBConnection.GetConnectionString());
                SqlCommand myCommand = new SqlCommand("SELECT * FROM Users WHERE login=@login", myConnection);
                myCommand.Parameters.AddWithValue("login", app.Context.User.Identity.Name);
                myCommand.Connection.Open();
                SqlDataReader Reader = myCommand.ExecuteReader();
                string role = string.Empty;                
                while (Reader.Read())
                {
                    userLogin = Reader["login"].ToString();
                    role = Reader["role"].ToString();
                }
                if (role != string.Empty)
                {
                    FormsIdentity fi = (FormsIdentity)app.User.Identity;
                    app.Context.User = new GenericPrincipal(fi, new string[] { role });
                }
            }
        }
    }
} 
```

当用户登录到项目运行功能时`protected void Application_AuthenticateRequest(object sender, EventArgs e)`，我尝试将用户登录名存储在私有字符串类型`userLogin`变量中。但是当此函数中的会话结束运行函数`void Session_End(object sender, EventArgs e)`时，我尝试通过用户登录状态“离线”将其保存在数据库中，但变量`userLogin`为空。我在哪里可以快速保存用户登录并在功能中使用它`void Session_End(object sender, EventArgs e)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:52:31.370

由于 Web 应用程序的无状态，您无法通过静态变量来执行此操作。如果我在哪里，我会将登录保存到 Session 状态

```
 protected void Application_AuthenticateRequest(object sender, EventArgs e)
    {
        HttpApplication app = (HttpApplication)sender;
        if (app.Request.IsAuthenticated && User.Identity is FormsIdentity)
        {
            SqlConnection myConnection = new SqlConnection(DBConnection.GetConnectionString());
            SqlCommand myCommand = new SqlCommand("SELECT * FROM Users WHERE login=@login", myConnection);
            myCommand.Parameters.AddWithValue("login", app.Context.User.Identity.Name);
            myCommand.Connection.Open();
            SqlDataReader Reader = myCommand.ExecuteReader();
            var userLogin = string.Empty;
            string role = string.Empty;                
            while (Reader.Read())
            {
                userLogin = Reader["login"].ToString();
                role = Reader["role"].ToString();
            }
            if (role != string.Empty)
            {
                FormsIdentity fi = (FormsIdentity)app.User.Identity;
                app.Context.User = new GenericPrincipal(fi, new string[] { role });
                Session["UserLogin"] = userLogin;
            }
        }
    }
void Session_End(object sender, EventArgs e)
    {            
        if(Session["UserLogin"]!=null)
        {
            var userLogin = (string)Session["UserLogin"];
            DBUsers.SetUserStatusOnline("0", userLogin); 
        }              
    } 
```

# linux - Linux，串口，非缓冲模式

> ID：11772239
> 
> 赞同：3
> 
> 时间：2012-08-02T06:35:55.153
> 
> 标签：linux, serial-port, nonblocking, unbuffered

我正在尝试在 Linux 中使用串行端口组织 nob-blocking 读写功能。这是我的代码：[http](http://pastebin.com/RSPw7HAi) ://pastebin.com/RSPw7HAi 一切正常，但它是缓冲的。这意味着，如果我通过控制台 + CR 符号向串行输入，则选择检测新输入，否则，如果我通过简单的 python 脚本输入，它会缓冲所有符号并等待直到我发送回车符号。因此，有了这个输入（如下所示），它只是在某处缓冲符号。我必须通过 USB2Serial 转换器连接 PC

```
#!/usr/bin/env python3

import serial

cmd1_state = b'\x3E\x01\x00\x01'

#Selecting serial port for commands to be sent --> /dev/ttyUSB0
serial_0 = serial.Serial('/dev/ttyUSB2');
print("Using serial port ", serial_0.portstr);
serial_0.write(cmd1_state)

# closing serial port
serial_0.close() 
```

那么，谁能告诉我在这里做什么？我是否必须在我的 C 文件中的端口打开中更改某些内容，或者使用 python 脚本来完成？后来我使用了 flush() 方法，但它也没有帮助。顺便说一句，我已经用谷歌搜索了 F_NOCACHE arg 到 fcntl() 函数。但！据我所知，这都是关于 BSD 和达尔文操作系统的，Linux 中没有这样的东西（F_NOACHE arg 到 fcntl）。

UPD：看起来我找到了解决方案。

```
 /* set input mode (non-canonical, no echo,...) */
newtio.c_lflag = 0;

newtio.c_cc[VTIME]    = 0;   /* inter-character timer unused */
newtio.c_cc[VMIN]     = 1;   /* blocking read until 1 char received */

tcflush(fd, TCIFLUSH); 
```

取自：[http ://tldp.org/HOWTO/Serial-Programming-HOWTO/x115.html](http://tldp.org/HOWTO/Serial-Programming-HOWTO/x115.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T11:35:16.697

看起来我找到了解决方案。

```
/* set input mode (non-canonical, no echo,...) */
newtio.c_lflag = 0;

newtio.c_cc[VTIME]    = 0;   /* inter-character timer unused */
newtio.c_cc[VMIN]     = 1;   /* blocking read until 1 char received */

tcflush(fd, TCIFLUSH);
Taken from : http://tldp.org/HOWTO/Serial-Programming-HOWTO/x115.html 
```

# php - 连接到 Gmail IMAP PHP“无法打开流”

> ID：11772240
> 
> 赞同：14
> 
> 时间：2012-08-02T06:35:57.753
> 
> 标签：php, gmail, imap, shell-exec

有很多人有类似的问题，但没有人回答他们的问题。我在 PHP 中启用了 IMAP，使用了所有正确的信息。我看不出我哪里错了。

这是我的代码：

```
$hostname = '{imap.gmail.com:995/imap/ssl/novalidate-cert}'; 
$username = 'emailaddress@gmail.com'; $password = 'password'; 
$inbox = imap_open($hostname,$username,$password) or die('Cannot connect to Gmail: ' . imap_last_error());

print_r(imap_errors()); 
```

不返回任何错误，除了：

> 警告：imap_open() [function.imap-open]：无法在线打开 /home/a8066360/public_html/test/imap.php 中的流 {imap.gmail.com:995/imap/ssl/novalidate-cert} 6
> 
> 无法连接到 Gmail：无法连接到 gmail-imap.l.google.com，995：连接超时

我注意到如果我将单引号更改为 `

> 出于安全原因，shell_exec() 已被禁用...

请帮忙！！！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-02T13:32:53.690

您需要端口**993**，即 SSL **IMAP**端口。

端口 995 是 SSL **POP3**端口。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-02T06:55:06.247

我认为 Gmail 的 IMAP 只能在端口 993 上访问。

`$hostname = "{imap.gmail.com:993/imap/ssl/novalidate-cert}";`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-14T08:23:05.507

我有同样的错误并找到了不同的解决方案。我已将调试信息添加到主机中：

```
"{imap.gmail.com:993/debug/imap/ssl/novalidate-cert}INBOX"; 
```

当我阅读php错误日志时，我发现

```
Unknown: [ALERT] Please log in via your web browser: https://support.google.com/mail/accounts/answer/78754 (Failure) (errflg=1) in Unknown on line 0 
```

打开链接，然后按照说明进行操作。搜索

> 您的应用可能不支持最新的安全标准。尝试更改一些设置以允许不太安全的应用访问您的帐户。

单击链接并启用不太安全的应用程序访问。

然后它对我有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-02-06T15:52:55.977

您必须启用从 Gmail 帐户获取连接的给定选项。 [https://myaccount.google.com/lesssecureapps](https://myaccount.google.com/lesssecureapps)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-06-08T14:23:27.060

我有同样的问题，我通过解锁谷歌验证码解决了这个问题。

登录 Google 帐户后转到以下 URL： [https ://accounts.google.com/DisplayUnlockCaptcha](https://accounts.google.com/DisplayUnlockCaptcha)

并点击按钮。

当然，您已经在[Google 帐户设置](https://myaccount.google.com/security)的“安全”选项卡中激活了安全性较低的应用程序的访问权限；）。

它现在应该可以工作了！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-11T13:54:09.857

您可以设置两步验证，然后分配一个 APP 密码以在您的请求中使用（只需将您的密码替换为应用程序提供的密码，您的正常密码不会更改。）。

这将帮助您的脚本从任何主机运行，而不会被谷歌阻止（由于登录位置的变化）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-13T08:45:10.237

`notls`如果未应用 SSL，您可以通过提供参数并如下连接服务器来尝试以下代码。

```
$hostname = '{imap.YOUR_DOMAIN.com:143/imap/notls}INBOX'; 
$username = 'YOUR_USERNAME';
$password = 'YOUR_PASSWORD';

$inbox = imap_open($hostname, $username, $password) or die('Cannot connect to Gmail: ' . imap_last_error()); 
```

如果它不会抛出任何错误，这意味着您已经成功连接到服务器。我希望这有帮助。

# webpage - how to increase page load speed

> ID：11772242
> 
> 赞同：-1
> 
> 时间：2012-08-02T06:36:08.240
> 
> 标签：webpage

I have designed [This site](http://softwareservicesindia.com/Pradnnya_blog/wordpress_site/?page_id=1290) .The page load speed is very low.I found online site [load time](http://loads.in/) which tells the load time of the site.As well as it gives the other statistics .

The page load time statistics snapshot is as folows:

![enter image description here](../Images/a61d43c91ab14aafd3153cfe14f852c6.png)

my question is how can i decrease the page load time?Since it becomes very irritating if the page load time is more then 2 sec..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:53:37.527

不确定这真的是一个编程问题，但我看到的一个问题是您的图像在文件大小方面太大。

这些图像相当大，例如：

[http://softwareservicesindia.com/Pradnnya_blog/wordpress_site/wp-content/themes/deep-red/img/bgbody.gif](http://softwareservicesindia.com/Pradnnya_blog/wordpress_site/wp-content/themes/deep-red/img/bgbody.gif) (145kb)

[http://softwareservicesindia.com/Pradnnya_blog/wordpress_site/wp-content/uploads/2012/07/he12.bmp](http://softwareservicesindia.com/Pradnnya_blog/wordpress_site/wp-content/uploads/2012/07/he12.bmp) (450kb)

[http://softwareservicesindia.com/Pradnnya_blog/wordpress_site/wp-content/uploads/2012/07/slid11.bmp](http://softwareservicesindia.com/Pradnnya_blog/wordpress_site/wp-content/uploads/2012/07/slid11.bmp) (1mb)

[http://softwareservicesindia.com/Pradnnya_blog/wordpress_site/wp-content/themes/deep-red/uploads/Istpanelfinal.jpg](http://softwareservicesindia.com/Pradnnya_blog/wordpress_site/wp-content/themes/deep-red/uploads/Istpanelfinal.jpg) (303kb)

[http://softwareservicesindia.com/Pradnnya_blog/wordpress_site/wp-content/themes/deep-red/uploads/TA_UnionSTN4.jpg](http://softwareservicesindia.com/Pradnnya_blog/wordpress_site/wp-content/themes/deep-red/uploads/TA_UnionSTN4.jpg) (311kb)

您可以首先使用 Adob​​e Photoshop 之类的程序[将图像保存为“用于网络”。](http://graphicdesign.about.com/od/howto/ss/save_for_web_all.htm)您可能还想研究将这些位图和 GIF 转换为 PNG。您可能还想让 JPEG 图像渐进式。

如果您无法访问 Photoshop，可以“保存为网络”的免费替代方案是[GIMP](http://www.gimp.org/)。

编辑：您可能想研究使用一些 CSS 在 x 轴上重复 1 像素高的图像。你会失去你的渐变。

像下面这样的东西应该可以工作：

```
background-image:url(../images/gradient.gif);background-repeat:repeat-x; 
```

# excel - VBA Convert String to Range

> ID：11772245
> 
> 赞同：0
> 
> 时间：2012-08-02T06:36:25.893
> 
> 标签：excel, vba

I am trying to convert String of cells position into range

```
Dim closeAfcc As Integer
Dim restCases As Integer
Dim AFCCRange As String
Dim rng As Range

i = 2
closeAfcc = 0
restCases = 0
 Do
 If Sheet1.Cells(i, 6) = "Closed-AFCC" Then
      closeAfcc = closeAfcc + 1
      AFCCRange = AFCCRange + "sheet1!K" & i & ","
      Else
      restCases = restCases + 1

       End If
 i = i + 1
 Loop Until Sheet1.Cells(i, 6) = ""
 AFCCRange = Left(AFCCRange, Len(AFCCRange) - 1)
 Set rng = Range(AFCCRange) 
```

I got `Error 1004`

my string result is
`AFCCRange= sheet1!K2,sheet1!K3,sheet1!K4,sheet1!K6,sheet1!K7,sheet1!K8,sheet1!K9,sheet1!K10,sheet1!K11,sheet1!K12`

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T20:52:52.297

更改此代码：

```
AFCCRange = AFCCRange + "sheet1!K" & i & "," 
```

读书：

```
AFCCRange = AFCCRange & "'sheet1'!$K$" & i & ", " 
```

也改变：

```
AFCCRange = Left(AFCCRange, Len(AFCCRange) - 1) 
```

读书：

```
AFCCRange = Left(AFCCRange, Len(AFCCRange) - 2) 
```

# tfs - Compare more than two TFS branches at the same time using TFS 2010

> ID：11772247
> 
> 赞同：2
> 
> 时间：2012-08-02T06:36:29.990
> 
> 标签：tfs, branch, compare

I want to compare four TFS branches at the same time using TFS 2010 and need to create report for the differences. Any Idea ?

Thanks, Minesh Bihola

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T18:25:07.510

这对于 TFS/VS 工具是不可能的，而且我也没有看到其他工具这样做。

# python - Language Localization of Khan Academy

> ID：11772256
> 
> 赞同：12
> 
> 时间：2012-08-02T06:37:14.720
> 
> 标签：python, django, internationalization, jinja2, python-babel

I am currently working on language localization of Khan Academy, I have downloaded the source 8051 from [Google Code](http://code.google.com/p/khanacademy/) . After survey information and viewing code online, the project is made using jinja2 as the templating language. I can use babel to accomplish my work.

With the following work, I can finally enable `{%trans%}` and `{%endtrans%}` tag parse-able by the template engine with following modification:

in webapp2_extra/jinja2.py:

```
from django.utils import translation
    env.install_gettext_translations(translation) 
```

in config_jinja2.py

```
-- put following line
"extensions": ['jinja2.ext.i18n'] 
```

However, my translated template of `*.mo` and `*.po` (from pybabel) does not correctly translate tag within value in to destined language. I am thinking the babel integration should came from webapp2_extra.i18n.py, but I do not know how to enable it.

As few posts in Google mentioned that following code might work:

```
from webapp2_extras import i18n 
    env.install_gettext_translations(i18n) 
```

However, it fails because it does not recognize `{%trans%}` tag. So does anyone have the experience working on the same problem or has any suggestion to jinja2 i18n problem?

Appreciate any suggestions.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T07:57:19.583

这是一个适合我的模块（`{% trans %}`在 jinja2 模板中翻译标记）。

主文件

```
import webapp2
from webapp2_extras import i18n
from jinja2 import FileSystemLoader, Environment

env = Environment(loader=FileSystemLoader('/path/to/my/templates'),
        extensions=['jinja2.ext.i18n'])
env.install_gettext_translations(i18n)

class HelloWorld(webapp2.RequestHandler):

    def _find_locale(self):
        #needs customization
        lang = self.request.accept_language.best_match(('en-us', 'fr'))
        if ('fr' in lang):
            return 'fr_FR'
        return 'en_US'

    def get(self):
        i18n.get_i18n().set_locale(self._find_locale())
        template = env.get_template('hello.html')
        self.response.write(template.render())

config = {'webapp2_extras.i18n': {'translations_path': './i18n'}}

app = webapp2.WSGIApplication([
    ('/', HelloWorld),
], config=config, debug=True)

def main():
    from paste import httpserver
    httpserver.serve(app, host='127.0.0.1', port='8080')

if __name__ == '__main__':
    main() 
```

# symfony - Symfony 2 - doctrine:mapping:import to custom namespace

> ID：11772265
> 
> 赞同：2
> 
> 时间：2012-08-02T06:38:17.557
> 
> 标签：symfony, doctrine

I'm just getting started with Symfony2, currently trying to generate Doctrine entities from an existing database. I'm following the [official tutorial on the topic](http://symfony.com/doc/current/cookbook/doctrine/reverse_engineering.html), however, I'd like to have my entities generated in a different namespace other than the default (`MyVendor\MyBundle\Model\Entity` instead of `MyVendor\MyBundle\Entity`).

I've edited the `config.yml` file like this:

```
doctrine:
   orm:
     entity_managers:
       default:
         mappings:
           MyBundle:
             prefix: MyVendor\MyBundle\Model\Entity
             dir: Model/Entity 
```

Unfortunately, I can't get this to work, as entities are still generated in the default namespace and directory. What am I doing wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T14:55:12.043

将上面的代码更改如下：使 auto_mapping true...

orm: auto_generate_proxy_classes: %kernel.debug% default_entity_manager: 默认

```
 entity_managers:
        default:
            auto_mapping: true
            mappings: ~ 
```

试试这个..希望这对你有用。

# ios - Aside from Segues, how can I get from one view to another view in iOS if I am using story boards?

> ID：11772266
> 
> 赞同：1
> 
> 时间：2012-08-02T06:38:26.097
> 
> 标签：ios, objective-c, uistoryboard

I am currently using StoryBoards and I was wondering what are my options to go from one ViewController to another.

I am familiar with Segues and I know you can assign identifiers on them.

Is there an alternative way? (I am asking for the sake of learning).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:10:39.690

如果您使用情节提要，那么您可能应该使用 segues。否则你会错过故事板的好处。但是，您可以构建自定义转场，即使您使用情节提要，您仍然可以以编程方式添加您的视图，并在您认为合适的情况下为屏幕上和屏幕外的视图设置动画。

因此，对您的问题的简要回答是，如果您真的想扮演自己的导航类型控制器的角色，您可以使用任何您想要的动画视图在屏幕上和屏幕外进行 - 这可能是出于学习目的而做的一件好事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T07:11:45.943

您可以使用[presentViewController:animated:completion](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/presentViewController%3aanimated%3acompletion%3a)。

它总是将视图显示为模态视图。但是您也可以通过编程方式使用 Segue，这是在视图控制器之间进行转换的推荐方式。

# cocos2d-iphone - 2个CClayer之间的通信

> ID：11772267
> 
> 赞同：1
> 
> 时间：2012-08-02T06:38:28.497
> 
> 标签：cocos2d-iphone, box2d-iphone, cclayer

//在类 Ah -> 代码中：

```
#import "B.h";
#import "cocos2d.h"
#import "Box2D.h"
#import "GLES-Render.h"
#import "LevelHelperLoader.h"
#import "ContactListener.h"
#import "KKGameKitHelper.h"
#import "LevelHelper.h"

@interface A : CCLayer 
{
b2World* world;
GLESDebugDraw* debugDraw;
LevelHelperLoader * lh;

B * b;  //another class
}

+(id) scene;
@end 
```

在 Am 类 -> 代码中：

```
@implementation A

+(id) scene
{
CCScene *scene = [CCScene node];
A *layer = [A node];
[scene addChild: layer];

//add another layer
  B * anotherLayer=[B node];
  [scene addChild:anotherLayer];
  layer.b=anotherLayer;
  [layer.b createBullets];

return scene;
}

-(id) init
{
   if ((self = [super init]))
   {
            self.isTouchEnabled = YES;
             glClearColor(0.1f, 0.0f, 0.2f, 1.0f);

      // Construct a world object, which will hold and simulate the rigid bodies.
      b2Vec2 gravity = b2Vec2(0.0f, 0.0f);
      world = new b2World(gravity);
      world->SetAllowSleeping(YES);
      //world->SetContinuousPhysics(YES);

           NSString* currentLevel = [[LevelManager sharedInstance] activeLevel];
         lh = [[LevelHelperLoader alloc] initWithContentOfFile:currentLevel];

        //creating the objects
        [lh addObjectsToWorld:world cocos2dLayer:self];

        if([lh hasPhysicBoundaries])
            [lh createPhysicBoundaries:world];

        if(![lh isGravityZero])
            [lh createGravity:world];

      [self scheduleUpdate];
   }
  return self;
}

-(LevelHelperLoader *) getLh
{
return lh;
} 
```

//在 Bh 代码中：

```
@interface B : CCLayer
{
    LHSprite * sprite1;
    b2Body *body;
} 
```

//在 Bm 代码中：

```
#import "B.h"
#import "A.h"

@implementation B

-(id) init
{
   if ((self=[super init]) ) 
   {
        CCLOG(@" B init...");
   }
return self;
}

-(void ) createBullets 
{
    A * mainClass=[[A alloc]init];
    sprite1=  [[mainClass getLh] createPhysicalSpriteWithUniqueName:@"img"];
    body=[sprite1 body];
    [self addChild:sprite1];
    [sprite1 transformPosition:ccp(150,250)];
}

@end 
```

通过这样做，所有这些东西我都可以从另一个类（即 B 类）添加 LHSprite，但不是它的主体。我应该做些什么改变来添加我添加的 LHSprite 的主体？

亲切的问候，堆栈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T05:53:18.963

得到了解决方案。只是，需要重写A类中的Node方法，如下：

```
-(id) node
{
  return [A sharedInstance];
} 
```

# node.js - 在另一个子进程上运行 HTTP Server

> ID：11772272
> 
> 赞同：0
> 
> 时间：2012-08-02T06:38:56.613
> 
> 标签：node.js

假设我有一个带有计时器的 js 文件，并且在计时器回调中，我想在随机端口中创建一个 HTTP 服务器。

那么，如何在 nodejs 的子进程或子进程中创建 HTTP 服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:42:02.257

您不需要有一个子进程，您可以在单个进程上运行任意数量的网络服务器。如果您真的想这样做，请查看集群模块，例如：[http ://nodejs.org/api/all.html#all_cluster](http://nodejs.org/api/all.html#all_cluster)

# iphone - 即使 iPhone 处于横向模式，照片集也会以纵向模式出现

> ID：11772287
> 
> 赞同：0
> 
> 时间：2012-08-02T06:40:17.760
> 
> 标签：iphone, ipad, photo-gallery, landscape-portrait

大家好，我将设备设置为横向模式，在该模式下，当我按下“照片库”按钮时，图库以纵向模式打开，从图库中选择图片后，它将返回横向模式。当我在横向模式下工作时，我想以横向模式打开画廊。

我使用此代码打开相册

```
- (void)imagesFromGallery{
imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) 
{
    if(!popover) 
    {
        popover = [[UIPopoverController alloc] initWithContentViewController:imagePicker];
    }

    [popover presentPopoverFromRect:CGRectMake(500, 620, 0, 0)
                             inView:self.view
           permittedArrowDirections:UIPopoverArrowDirectionUp 
                           animated:YES];
}
else 
{
    [self presentModalViewController:imagePicker animated:YES];
}   } 
```

提前致谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:49:15.140

而不是呈现它

```
 [self presentModalViewController:imagePicker animated:YES]; 
```

将 imagePickerView 添加到 self.view 并设置 imagePicker 的框架

```
[self.view addSubview:imagePicker.view]; 
```

希望它对你有用。！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-28T05:02:47.853

上面的答案工作正常。但是一旦你加载了图片库，滚动视图和选择文件夹是一个问题。

子类化`UIImagepicker`是正确的选择。只需创建一个子类`UIImagepicker`并添加以下方法即可。

```
-(NSUInteger)supportedInterfaceOrientations
{

    return UIInterfaceOrientationMaskAll;
} 
```

休息，照常分配这个视图控制器并呈现。

# c# - 如何获取 DependencyProperty 的默认值

> ID：11772288
> 
> 赞同：4
> 
> 时间：2012-08-02T06:40:17.393
> 
> 标签：c#, wpf, properties, wpf-controls, dependency-properties

我有问题通过按钮单击将所有控件值设置为默认值。设置样式时这不起作用的问题。

例如我有代码：

```
 var metadata = dependencyProperty.DefaultMetadata;

                if (value == null)
                {
                    return metadata.DefaultValue == value;
                }
                else
                {
                    return value.Equals(metadata.DefaultValue);
                } 
```

但这实际上不是默认属性！因为在样式中可以设置其他值！如何获得真正的“默认”控制属性！？那么如果设置了样式，WPF 也会从样式返回值吗？

Ps ClearValue(propertyToClear); 不能使用，因为在某些情况下我需要检查值。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-02T06:48:26.250

不同的依赖对象类型可能有不同的元数据。[因此，您必须通过GetMetadata](http://msdn.microsoft.com/en-us/library/ms522464)重载之一获取特定类型的属性元数据。

```
var metadata = dependencyProperty.GetMetadata(typeof(SomeDependencyObject));
var defaultValue = metadata.DefaultValue; 
```

# c - 如何在 C 中打印引号？

> ID：11772291
> 
> 赞同：24
> 
> 时间：2012-08-02T06:40:27.123
> 
> 标签：c, printf

在一次采访中，我被问到

> `printf()`使用函数打印引号

我不知所措。即使在他们的办公室里也有一台电脑，他们让我试试看。我试过这样：

```
void main()
{
    printf("Printing quotation mark " ");
} 
```

但正如我怀疑它没有编译。当编译器获得第一个`"`时，它认为它是字符串的结尾，但事实并非如此。那么我该如何实现呢？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-02T06:42:02.720

尝试这个：

```
#include <stdio.h>

int main()
{
  printf("Printing quotation mark \" ");
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-08-02T07:10:28.280

没有反斜杠，特殊字符具有自然的特殊含义。带有反斜杠，它们在出现时打印。

```
\   -   escape the next character
"   -   start or end of string
’   -   start or end a character constant
%   -   start a format specification
\\  -   print a backslash
\"  -   print a double quote
\’  -   print a single quote
%%  -   print a percent sign 
```

该声明

```
printf("  \"  "); 
```

将为您打印报价。您还可以打印这些特殊字符 \a、\b、\f、\n、\r、\t 和 \v，并在其前面加上一个（斜线）。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-08-02T06:41:58.093

You have to escape the quotationmark:

```
printf("\""); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-08-03T08:39:10.327

在 C 编程语言中，`\`用于打印一些在 C 中具有特殊含义的特殊字符。这些特殊字符如下所列

```
\\ - Backslash
\' - Single Quotation Mark
\" - Double Quatation Mark
\n - New line
\r - Carriage Return
\t - Horizontal Tab
\b - Backspace
\f - Formfeed
\a - Bell(beep) sound 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-08-02T07:04:37.737

除了转义字符外，您还可以使用 format `%c`，并将字符文字用作引号。

```
printf("And I quote, %cThis is a quote.%c\n", '"', '"'); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-08-02T06:46:51.153

你必须使用*转义*字符。这是这个先有鸡还是先有蛋的问题的解决方案：如果我需要它来终止字符串文字，我该如何编写“”？因此，C 创建者决定使用一个特殊字符来改变对下一个字符的处理：

```
printf("this is a \"quoted string\""); 
```

也可以用'\'输入特殊符号，如“\n”、“\t”、“\a”，输入“\”本身：“\\”等。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-08-02T08:47:07.210

这也有效：

```
printf("%c\n", printf("Here, I print some double quotes: ")); 
```

但是，如果您打算在面试中使用它，请确保您可以解释它的作用。

**编辑**：根据 Eric Postpischil 的评论，这是一个不依赖 ASCII 的版本：

```
printf("%c\n", printf("%*s", '"', "Printing quotes: ")); 
```

输出不是那么好，它仍然不是 100% 可移植的（会破坏一些假设的编码方案），但它应该在 EBCDIC 上工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-06T12:47:18.437

你应该像这样使用转义字符：

```
printf("\""); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-06-01T04:32:47.300

```
#include<stdio.h>
int main(){
char ch='"';
printf("%c",ch);
return 0;
} 
```

输出： ”

# python - 如何使用python添加处理指令节点？

> ID：11772298
> 
> 赞同：1
> 
> 时间：2012-08-02T06:41:07.417
> 
> 标签：python, xml

> **可能重复：**
> [如何使用 Python 2.6 和 minidom 添加 xml-stylesheet 处理指令节点？](https://stackoverflow.com/questions/5648343/python-2-6-minidom-toprettyxml-how-to-output-xml-meta-data-with-document-xsl)

我遇到了一个关于通过 python 使用 minidom 的问题。我需要添加一行

```
<?tag XXXXX?> 
```

但是，我发现这不是 DOM，看来我不能使用 DOM 来操作。有什么办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T06:46:18.370

这是一个 XML 处理指令。

您需要 createProcessingInstruction() API 方法。看

[如何使用 Python 2.6 和 minidom 添加 xml-stylesheet 处理指令节点？](https://stackoverflow.com/questions/5648343/python-2-6-minidom-toprettyxml-how-to-output-xml-meta-data-with-document-xsl/5651055#5651055)

例如。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-02T06:43:39.110

你的问题是它是标题。然后可以在[此处](https://stackoverflow.com/questions/3982887/how-to-add-xml-header-to-dom-object)找到答案，或者只需在代码周围添加页眉和页脚，如下所示：

```
return header + 'xmlstring' + footer 
```

# ajax - Jquery Ajax doesn't work at Internet Explorer

> ID：11772299
> 
> 赞同：5
> 
> 时间：2012-08-02T06:41:10.880
> 
> 标签：ajax, jquery, cross-browser

When I use jQuery ajax put at Internet Explorer 9, I am getting data at response body however it doesn't pass into success function. How can I make it work?

example:

```
...
    $.ajax({
        async : false,
        type: 'PUT',
        contentType: 'application/json',
        url: updateUrl,
        data: JSON.stringify(model),
        dataType: 'json',
        success: function(data) {
            console.log("Here!");//it comes here
            console.log(data);//it logs undefine at ie, firefox and etc is logging data
            r = resultResponse(data);
        },
        error: function(data) {
            try {
                r = error($.parseJSON(data.responseText));
            } catch (err) {
                //Handle error
            }
        }
    });
... 
```

I debugged network and see that response body is:

```
{"message":"Connection is successful","status":"success"} 
```

However data is undefined at success function at Internet explorer.

Any ideas?

**PS 1:** It is weird that when I send data from server without setting content type for response header it works?

**PS 2:** My response header as follows:

```
Key Value
Response    HTTP/1.1 200 OK
Server  Apache-Coyote/1.1
Content-Type    application/json;charset=UTF8
Transfer-Encoding   chunked
Date    Thu, 02 Aug 2012 15:50:44 GMT 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T11:48:58.927

如输出所示，我的字符集是 UTF8 而不是 UTF-8。问题是在服务器端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:02:59.207

这可能要问很多，但是您可以尝试将您的完整`$.ajax`通话替换为`$.getJSON`吗？浏览器执行起来会更加简单和容易，因为您的问题可能出在您为 ajax 调用所做的众多设置和配置之一中。

尽可能简单：

```
$.getJSON(updateUrl, JSON.stringify(model), function(data){
    console.log(data);
}); 
```

如果您需要检查 getJSON，请[在此处查看](http://api.jquery.com/jQuery.getJSON/)

# ubuntu - How to make script open programs in the same workspace in ubuntu

> ID：11772300
> 
> 赞同：2
> 
> 时间：2012-08-02T06:41:18.213
> 
> 标签：ubuntu, workspace

I have a script which opens different application and I want them to be opened in particular workspace ( the same where the script is run ). Is it possible without setting workspace for every particular application?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T03:44:03.833

应用程序不知道它在哪个工作区中运行，因此应用程序不可能在同一个工作区中打开另一个。只能告诉特定应用程序在哪个工作区中运行（例如，在恶魔的帮助下）

# java - Non-static methods and Garbage collection

> ID：11772304
> 
> 赞同：1
> 
> 时间：2012-08-02T06:41:48.890
> 
> 标签：java, garbage-collection

I have a single validation class which has various validate methods. like

```
public class GlobalValidationClass {

public void validatefields(String s) {
//My Work here
} 
```

In methods of other classes, I create an instance of the above class and then call the `validatefields` method.

Like

```
public class FirstClass {

public void firstPage() {
    GlobalValidationClass fp = new GlobalValidationClass();
    fp.validatefields("first page");
}

public void secondPage() {
    GlobalValidationClass sp = new GlobalValidationClass();
    sp.validatefields("second page");
} 
```

My question is will it increase performance if I make the methods in my validation class static? Or it wont as the java's garbage collector will garbage collect the objects at the end of each method and there wont be any performance impact if I am following the approach of creating instance of classes in every method?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T06:48:23.913

如果您在我的验证中使用方法，它将**提高**`class static`性能，但另一方面，**一旦**您的程序开始到程序**结束，****内存**就会增加（取决于`static`方法和变量），因为静态获取内存。

 ****[并使用它的好工具jvisualvm](http://visualvm.java.net/)获取统计信息，默认情况下它位于 /jdk/bin/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T06:45:18.470

使用方法将有助于提高性能`static`，因为您不必创建对象或垃圾收集它们。

当一个类只有静态方法时，它被称为[实用程序类](http://en.wikipedia.org/wiki/Utility_class)。通常，你也给它一个`private`构造函数，以强调你不应该创建一个实例。

还有另一种选择：您可以通过重用验证器重构您的客户端类以最小化创建/破坏：

```
public class FirstClass {
    // Create the validator once per client instance, 
    // instead of once per method call
    private GlobalValidationClass fp = new GlobalValidationClass();

    public void firstPage() {
        fp.validatefields("first page");
    }

    public void secondPage() {
        sp.validatefields("second page");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T07:01:06.900

如果您没有任何特定的对象状态，则可以使用静态方法。每次创建一个对象然后调用执行相同操作的方法是用静态方法替换它的完美用例。它是一个更具可扩展性的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T07:12:41.770

如果没有与该验证类关联的状态信息（没有成员变量）并且如果只有一个验证方法，那么为什么不将其设为静态（一个实用程序类）另外，当您谈论性能时，您显然是在避免创建新的开销对象（性能增益可能取决于这些 firstpage() secondPage() 方法被调用的频率）并且也不需要垃圾收集它们:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T06:54:00.247

Firstly, have you identified this code as being a performance bottle neck? Remember, you shouldn't [prematurely optimize](http://c2.com/cgi/wiki?PrematureOptimization)!

Realistically, I wouldn't expect you to see much performance gain by making a method static. But the only way to find out is to measure it.****

# java - Wrap abel within a composite

> ID：11772305
> 
> 赞同：6
> 
> 时间：2012-08-02T06:41:51.853
> 
> 标签：java, eclipse, swt, jface

I have `ScrolledComposite` which allows only vertical scrolling. (`heighthint = 400`).

Within this ScrolledComposite, I have another `CompositeA` (height may exceed 400 for scrolling) to store all other widgets.

I have a very long label (with `SWT.WRAP` enabled). But instead of wrapping, it is always showing in a single line. I want this label to wrap according to the width of its parent (`CompositeA`)

I forgot to add that this `CompositeA` is a 2 column `GridLayout` with `makeColumnsEqualWidth = true`.

Here is my code:

```
public void createPartControl(Composite parent) {
    // TODO Auto-generated method stub

    Display display = parent.getDisplay();

    toolkit = new FormToolkit(display);
    form = toolkit.createForm(parent);
    form.setText("ABC");

    Composite body = form.getBody();

    TableWrapLayout layout = new TableWrapLayout();
    layout.numColumns = 2;
    body.setLayout(layout);

    Label header1 = toolkit.createLabel(body, "ABC: ");
    Font font = new Font(display, "Arial", 11, SWT.BOLD);
    header1.setFont(font);

    Label header2 = toolkit.createLabel(body, "XYZ",
            SWT.WRAP);
    font = new Font(display, "Arial", 11, SWT.NONE);
    header2.setFont(font);

    TableWrapData wd = new TableWrapData(TableWrapData.FILL_GRAB);      
    header2.setLayoutData(wd);

    form.getBody().setBackground(
            form.getBody().getDisplay()
                    .getSystemColor(SWT.COLOR_WIDGET_BACKGROUND));

    // Scrolled composite
    ScrolledComposite sc = new ScrolledComposite(body, SWT.BORDER_SOLID
            | SWT.V_SCROLL);
    sc.setAlwaysShowScrollBars(true);
    sc.setBackground(new Color(display, 50,255,155));

    wd = new TableWrapData(TableWrapData.FILL); 
    wd.heightHint = 360;
    wd.colspan = 2;
    wd.grabHorizontal = false;
    sc.setLayoutData(wd);

    sc.setLayout(new TableWrapLayout());

    Composite innerComposite = toolkit.createComposite(sc);
    sc.setContent(innerComposite);

    innerComposite.setLayout(new TableWrapLayout());
    innerComposite.setBackground(new Color(display, 255,50,50));

    Section section = toolkit.createSection(innerComposite,
            Section.DESCRIPTION | Section.TITLE_BAR | Section.EXPANDED);
    wd = new TableWrapData(TableWrapData.FILL);
    wd.maxWidth = 600; // don't want to hardcode this value

    section.setLayoutData(wd);
    section.setText("Section");
    section.setDescription("A not so long description......................");

    // Composite for Section
    Composite sectionClient = toolkit.createComposite(section);
    layout = new TableWrapLayout();
    layout.numColumns = 2;
    layout.makeColumnsEqualWidth = true;
    sectionClient.setLayout(layout);

    toolkit.createButton(sectionClient, "Button 1", SWT.RADIO);

    Label rightDesc = toolkit
            .createLabel(
                    sectionClient,
                    "A very long long long long long long long long long long long long long long long long long long long long desc that needs wrapping",
                    SWT.WRAP);
    font = new Font(display, "Arial", 10, SWT.ITALIC);
    rightDesc.setFont(font);
    wd = new TableWrapData();
    wd.rowspan = 2;
    rightDesc.setLayoutData(wd);

    Combo comboDropDown = new Combo(sectionClient, SWT.DROP_DOWN
            | SWT.BORDER);
    comboDropDown.setText("DDL");
    comboDropDown.add("1");
    comboDropDown.add("2");
    comboDropDown.add("3");

    Label lineBreak = toolkit.createSeparator(sectionClient, SWT.SEPARATOR
            | SWT.HORIZONTAL);
    wd = new TableWrapData(TableWrapData.FILL);
    wd.colspan = 2;
    lineBreak.setLayoutData(wd);

    /***********************/

    toolkit.createButton(sectionClient, "Button 2", SWT.RADIO);

    Label rightDesc2 = toolkit
            .createLabel(
                    sectionClient,
                    "A long long long long long long long long long long long long long long long long long long long long desc that needs wrapping",
                    SWT.WRAP);
    font = new Font(display, "Arial", 10, SWT.ITALIC);
    rightDesc2.setFont(font);
    wd = new TableWrapData(TableWrapData.FILL);
    wd.rowspan = 3;
    rightDesc2.setLayoutData(wd);

    toolkit.createLabel(sectionClient, "Desc",
            SWT.WRAP);
    toolkit.createText(sectionClient, "hello world", SWT.NONE);

    section.setClient(sectionClient);

    innerComposite.pack();

} 
```

If you run it, you can see a green scrolledcomposite and a red composite. I want the red composite width to fill to the width of the scrolledcomposite relatively without hardcoding `maxWidth = 600`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-01-04T06:00:41.330

我在我的布局中遇到了同样的问题，并找到[了这个](http://book.javanb.com/swt-the-standard-widget-toolkit/ch15lev1sec12.html)有用的答案。

由于“它不是错误，而是功能”，请在此处的评论 #19 中尝试此[答案](https://bugs.eclipse.org/bugs/show_bug.cgi?id=9866)。

我为我的标签使用以下代码行。

```
Label tip = new Label(shell, SWT.WRAP | SWT.BORDER | SWT.LEFT);
final GridData data = new GridData(SWT.HORIZONTAL, SWT.TOP, true, false, 1, 1);
tip.setLayoutData(data);
tip.setText("Here stands my long, long and much more longer text..."); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-01T10:01:00.977

在创建标签时尝试添加 SWT.WRAP。它对我有用。

```
Label label = new Label(parent, SWT.WRAP); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T09:00:35.500

令人惊讶的是，`TableWrapLayout`经理不会指望水平滚动的复合材料。为了保持`Form`工具包上的布局，应该使用。我刚刚做了一个代码示例，上面可以做些什么。

```
public void createPartControl(Composite parent) {
    // TODO Auto-generated method stub

    Display display = parent.getDisplay();

    toolkit = new FormToolkit(display);
    form = toolkit.createForm(parent);
    form.setText("ABC");

    Composite body = form.getBody();

    TableWrapLayout layout = new TableWrapLayout();
    layout.numColumns = 2;
    body.setLayout(layout);

    Label header1 = toolkit.createLabel(body, "ABC: ");
    Font font = new Font(display, "Arial", 11, SWT.BOLD);
    header1.setFont(font);

    Label header2 = toolkit.createLabel(body, "XYZ", SWT.WRAP);
    font = new Font(display, "Arial", 11, SWT.NONE);
    header2.setFont(font);

    TableWrapData wd = new TableWrapData();      
    header2.setLayoutData(wd);

    body.setBackground(body.getDisplay().getSystemColor(SWT.COLOR_WIDGET_BACKGROUND));

    // Scrolled composite
    Composite sc = toolkit.createComposite(body, SWT.BORDER_SOLID | SWT.V_SCROLL);
    sc.setBackground(new Color(display, 50,255,155));
    layout = new TableWrapLayout();    
    sc.setLayout(layout);

    wd = new TableWrapData(TableWrapData.FILL_GRAB); 
    wd.heightHint = 360;
    wd.colspan = 2;
    sc.setLayoutData(wd);

    Composite innerComposite = toolkit.createComposite(sc);

    layout = new TableWrapLayout();
    innerComposite.setLayout(layout);
    innerComposite.setBackground(new Color(display, 255,50,50));

    wd = new TableWrapData(TableWrapData.FILL_GRAB); 
    innerComposite.setLayoutData(wd);

    Section section = toolkit.createSection(innerComposite,
            Section.DESCRIPTION | Section.TITLE_BAR | Section.TWISTIE | Section.EXPANDED);

    section.setText("Section");
    section.setDescription("A not so long description......................");

    wd = new TableWrapData(TableWrapData.FILL_GRAB);
    // wd.maxWidth = 600; // don't want to hardcode this value
    section.setLayoutData(wd);

    // Composite for Section
    Composite sectionClient = toolkit.createComposite(section);
    layout = new TableWrapLayout();
    layout.numColumns = 2;
    // layout.makeColumnsEqualWidth = true;
    sectionClient.setLayout(layout);
    section.setClient(sectionClient);

    wd = new TableWrapData(TableWrapData.FILL_GRAB); 
    sectionClient.setLayoutData(wd);

    Label rightDesc = toolkit.createLabel(sectionClient,
                    "A very long long long long long long long long long long long long long long long long long long long long desc that needs wrapping",
                    SWT.WRAP);
    font = new Font(display, "Arial", 10, SWT.ITALIC);
    rightDesc.setFont(font);
    wd = new TableWrapData();
    wd.colspan = 2;
    rightDesc.setLayoutData(wd);

    Combo comboDropDown = new Combo(sectionClient, SWT.DROP_DOWN | SWT.BORDER);
    comboDropDown.setText("DDL");
    comboDropDown.add("1");
    comboDropDown.add("2");
    comboDropDown.add("3");

    Label lineBreak = toolkit.createSeparator(sectionClient, SWT.SEPARATOR | SWT.HORIZONTAL);
    wd = new TableWrapData(TableWrapData.FILL_GRAB);
    lineBreak.setLayoutData(wd);
        //
        //    /***********************/
        //
    Button button1 = toolkit.createButton(sectionClient, "Button 1", SWT.RADIO);
      wd = new TableWrapData();
      wd.colspan = 2;
      button1.setLayoutData(wd);

    Button button2 = toolkit.createButton(sectionClient, "Button 2", SWT.RADIO);
      wd = new TableWrapData();
      wd.colspan = 2;
      button2.setLayoutData(wd);

    Label rightDesc2 = toolkit.createLabel(sectionClient,
                    "A long long long long long long long long long long long long long long long long long long long long desc that needs wrapping",
                    SWT.WRAP);
    font = new Font(display, "Arial", 10, SWT.ITALIC);
    rightDesc2.setFont(font);
    wd = new TableWrapData();
    wd.colspan = 2;
    rightDesc2.setLayoutData(wd);

    Label desc = toolkit.createLabel(sectionClient, "Desc:");
    Text hello = toolkit.createText(sectionClient, "hello world");
    wd = new TableWrapData(TableWrapData.FILL_GRAB);
    hello.setLayoutData(wd);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T07:08:03.270

我可能记错了，但我记得当文本更改时我必须重新布局复合材料。这使文本换行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-08T07:42:05.967

如果您想换行长文本标签，SWT.WRAP 是不够的。**如果您未在布局中指定widthHint** ，则标签默认不会换行其文本。这对我有用：

```
Label label = new Label(parent, SWT.WRAP);
label.setText("very very long text....");
GridData gd = new GridData(SWT.FILL, SWT.TOP, true, false, 1, 1);
gd.widthHint = 200;
label.setLayoutData(gd); 
```

# objective-c - value assigned to a property in the model class disappears in the view/controller class

> ID：11772307
> 
> 赞同：0
> 
> 时间：2012-08-02T06:41:56.137
> 
> 标签：objective-c, ios5, xcode4.3

Right before my model class sends the variable `stringToDisplay`, NSLog shows me that it has a value. But when I try to use it in my ViewController, I just get `(null)`. Any thoughts about what I'm doing wrong?

(The good news is that, while working on this, I had sort of a breakthrough in understanding how models and controllers relate to each other. I'm still a complete newbie, but I don't feel quite as lost as I did.)

Here's what I think is the relevant code:

CalculatorBrain.h

```
#import <Foundation/Foundation.h>

@interface CalculatorBrain : NSObject
@property (nonatomic) NSMutableString *stringToAdd;
@property (nonatomic,strong) NSString *stringForDisplay;

- (double)performOperation:(NSString *)operation withArray:(NSMutableArray *)particularStackYouNeedToPopOff; 
```

CalculatorBrain.m

```
@implementation CalculatorBrain
@synthesize stringToAdd = _stringToAdd;
@synthesize stringForDisplay = _stringForDisplay;
@synthesize whatHappenedSinceLastClear = _whatHappenedSinceLastClear;

- (double)performOperation:(NSString *)operation withArray:(NSMutableArray *)particularStackYouNeedToPopOff
{
<long code that I think doesn't matter because this NSLog produces exactly what I want it to:>
NSLog(@"%@",stringForDisplay);
return result;
} 
```

CalculatorViewController.h

```
#import <UIKit/UIKit.h>

@interface CalculatorViewController : UIViewController
@property (nonatomic) NSArray *arrayOfDictionaries;
@property (nonatomic) NSDictionary *dictionary;
@property (weak, nonatomic) IBOutlet UILabel *variablesUsed;
@property (nonatomic, strong) NSString *operation;

@end 
```

CalculatorViewController.m

```
#import "CalculatorViewController.h"
#import "CalculatorBrain.h"

@interface CalculatorViewController ()
@property (nonatomic,strong) CalculatorBrain *brain;
@end

@implementation CalculatorViewController
@synthesize display = _display;
@synthesize history = _history;
@synthesize brain = _brain;
@synthesize operation = _operation;

- (IBAction)operationPressed:(UIButton *)sender 
{
NSString *otherString=[self.brain stringForDisplay];
if (self.userIsEnteringNumber) [self enterPressed];
NSString *operation = sender.currentTitle;
double result = [self.brain performOperation:operation withArray:[self.brain whatHappenedSinceLastClear]];
self.display.text = [NSString stringWithFormat:@"%g",result];
self.history.text = otherString;
NSLog(@"%@",otherString);
} 
```

And the NSLog in that last line of code give me `(null)`.

Any thoughts?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:19:43.447

也许我遗漏了一些东西，但是你的属性是在类扩展中声明的，`CalculatorBrain`所以外面没有人`CalculatorBrain.m`知道这个属性。

因此，如果您想将此属性公开给其他对象，则必须改为声明它`CalculatorBrain.h`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T17:19:51.467

哦 - 您的属性声明`whatHappenedSinceLastClear`不会暴露给导入的其他类，`CalculatorBrain.h`因为您将属性声明放在​​文件的`interface`扩展名中`.m`，其他类不会看到。

要使其可公开访问，请移动to的`@property`行，而不是文件。`whatHappenedSinceLastClear``CalculatorBrain.h``.m`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T07:06:58.203

我猜这个问题出在你分配你的方式上`stringForDisplay`，例如：

如果你使用类似的东西

```
stringForDisplay_ = anotherString; 
```

setter for property 不会触发，因此您必须自己保留变量，否则它将一直存在直到您的方法完成；

如果是这样 - 使用属性设置器，例如：

```
self.stringForDisplay = anotherString; 
```

这样 ARC 将完成所有的内存管理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T07:14:57.470

这实际上取决于您如何在方法中设置 stringForDisplay `performOperation:withArray:`。

盲目猜测，请尝试使用

```
NSString *otherString = self.brain.stringForDisplay; 
```

在这条线之后

```
double result = [self.brain performOperation:operation withArray:[self.brain whatHappenedSinceLastClear]]; 
```

# google-chrome - Keep same ID when converting from userscript in Chrome

> ID：11772308
> 
> 赞同：2
> 
> 时间：2012-08-02T06:41:56.960
> 
> 标签：google-chrome, google-chrome-extension, userscripts

I'm currently updating a userscript to a chrome extension, but since the new ID is different it won't update the old extension, but add a new one.

Is there a way to convert a userscript into a Chrome extension and keep the same ID?

Since there is no keyfile for userscript I think it could be possible,
but how ?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T08:25:57.573

加载用户脚本时，它会转换为 Chrome 扩展程序。按照以下步骤创建和维护具有相同 ID 的扩展：

1.  安装用户脚本。
2.  访问`chrome://extensions/`并激活开发者模式。
3.  向下滚动到您的用户脚本，找到 ID： ![Userscript 1.0 说明用户脚本ID：hjcgfecgldpgebeeflnjldogphkilfdo](../Images/1b9dbc63191a6dc5e5dd796dc4ce972e.png)
    请注意，您的用户脚本的版本是 1.0（默认情况下，通过 覆盖`@version`）。
4.  接下来，访问 Chrome/Chromium 用户配置文件的扩展目录。默认路径可以在[这里](http://www.chromium.org/user-experience/user-data-directory)找到。如果您使用该`--user-data-dir=...`标志启动 Chrome/chromium，请访问`...`.
    进入目录后，查找 ID 为 3 的目录。
5.  将整个目录复制到**不同**的位置，例如`/tmp/`或`%tmp%`。
6.  使用“Load unpacked extension”按钮，选择之前复制的目录的第一个*子目录*：这个子目录的名字是根据版本来的。
7.  向下滚动以查看转换后的用户脚本是真正的扩展（它会加载！）：
    ![Userscript 1.0 用户脚本描述 ID：hjcgfecgldpgebeeflnjldogphkilfdo 加载自：/tmp/hjcgfecgldpgebeeflnjldogphkilfdo/1.0_0](../Images/e8c3b3adacdface6bebb8f6ce7aea6b8.png)

好的，步骤 6-7 是可选的，它们仅用于显示用户脚本已转换为真正的扩展，并设置了特殊标志。您还可以注意到有关[清单版本](https://developer.chrome.com/extensions/manifestVersion)的红色警告。要解决此问题，请编辑`manifest.json`并添加`"manifest_version": 2,`. 所以，在我们的例子中：

> `    ...
>     "converted_from_user_script": true,
>     "description": "Description of user script",
>     "key": "eYxnPzfSPtfL3ji4nQX3ujTXpzz3YQ6dVlvHWf1gvW8=",
>     "name": "Userscript",
>     "version": "1.0",
>     **"manifest_version": 2**
> }`

现在，您拥有了一个 Chrome 扩展程序，它的行为类似于具有[一些额外风味](http://wiki.greasespot.net/Cross-browser_userscripting#Google_Chrome)的 Chrome 扩展程序。按照官方文档中的步骤更新您的软件包：

> ## [更新包](https://developer.chrome.com/extensions/packaging#update)
> 
> 要创建扩展的更新版本：
> 
> 1.  增加版本号`manifest.json`。
> 2.  转到此 URL，打开扩展管理页面：**chrome://extensions**
> 3.  单击**打包扩展**按钮。出现一个对话框。
> 4.  在**扩展根目录**字段中，指定扩展文件夹的路径，例如`c:\myext`.
> 5.  在**私钥文件**字段中，指定已`.pem`为此扩展名生成的文件的位置，例如 `c:\myext.pem`.
> 6.  单击**确定**。
> 
> ## [将之前打包的扩展上传到 Chrome 网上应用店](https://developer.chrome.com/extensions/packaging#upload)
> 
> 您可以使用 Chrome 开发人员仪表板上传您之前自己打包的扩展程序。但是，除非您采取特殊步骤，否则扩展程序在 Chrome 网上应用店中的 ID 将与您创建的包中的 ID 不同。如果你已经分发了你的扩展包，这个不同的 ID 可能会成为一个问题，因为它允许用户安装你的扩展的多个版本，每个版本都有自己的本地数据。
> 
> 如果您想保持扩展 ID 相同，请执行以下步骤：
> 
> 1.  `.crx`将创建文件时生成的私钥重命名为`key.pem`.
> 2.  放在`key.pem`扩展程序的顶层目录中。
> 3.  将该目录压缩为 ZIP 文件。
> 4.  [使用Chrome 开发者仪表板](https://chrome.google.com/webstore/developer/dashboard)上传 ZIP 文件。

* * *

## 附录：在未打包/打包的扩展中保持相同的 ID。

扩展的 extensionID 可以通过[`"key"`manifest 文件中的参数](https://developer.chrome.com/extensions/manifest/key)来控制。文档中还说明了使解压和打包扩展具有相同 ID 的最简单方法：

> ### key 此值可用于控制开发过程中加载的扩展、应用或主题的唯一 ID。
> 
> > 注意：您通常不需要使用此值。相反，编写您的代码，以便通过使用[相对路径](http://developer.chrome.com/extensions/overview.html#relative-urls)和 [`chrome.extension.getURL()`](http://developer.chrome.com/extensions/extension.html#method-getURL).
> 
> 要获得合适的键值，首先从 .crx 文件安装您的扩展程序（您可能需要[上传您的扩展程序](https://chrome.google.com/webstore/developer/dashboard)或[手动打包它](http://developer.chrome.com/extensions/packaging.html)）。然后，在您的[用户数据目录](http://www.chromium.org/user-experience/user-data-directory)中，查看文件 `Default/Extensions/<extensionId>/<versionString>/manifest.json`。您将看到那里填写的键值。

当`key`字段不存在时，它是随机生成的。然后，extensionID 是从这个 key 生成的。生成 extensionID 的算法在[此处解释](https://stackoverflow.com/questions/1882981/google-chrome-alphanumeric-hashes-to-identify-extensions)。根据算法的性质，您不能以相反的顺序执行它（extensionID -> `key`）。

# extjs - 如何在两个网格面板之间绘制箭头线并查找网格面板元素的 ID

> ID：11772312
> 
> 赞同：1
> 
> 时间：2012-08-02T06:42:06.267
> 
> 标签：extjs, raphael

**我创建了两个网格面板左网格面板和右网格面板，我想在这些网格面板元素之间绘制一条箭头线，我需要获取左网格面板的每个元素 id 及其右网格面板的映射元素 id。我如何在 eextjs 中做到这一点，任何人都可以帮助我吗？我已经尝试了这么久，任何建议都非常感谢..**

**这是用于创建网格面板**

```
Ext.onReady(function(){
    var books = {
        records : [{
            title : "Ext JS in Action",
            id: "title1"
        },{
            title : "Learning Ext JS",
            id: "title2"
        },{
            title : "Ext JS Projects with Gears",
            id: "title3"    
        },{
            title : "Ext JS 3.0 Cookbook",
            id: "title4"
        },
        ]
    };

    var fields = [
        'title',
    ];

    var arrowPlugin = new Ext.ux.DDArrow({
        strokeWidth : 30,
        arrowWidth  : 80,
        color       : 'red'
    });
    //alert("arrowPlugin :"+arrowPlugin);

    var leftGrid = new Ext.grid.GridPanel({
        ddGroup          : 'rightGridDDGroup',
        store            : new Ext.data.JsonStore({
            id     : 'leftGridId',
            fields : fields,
            data   : books,
            root   : 'records'
        }),
        columns          : [
            {header: "",  width : 120, dataIndex: 'title'},
        ],
        enableDrag   : true,
        stripeRows       : true,
        viewConfig : {
            forceFit : true
        },
        autoScroll: true,
        collapsible: true,
        plugins : [arrowPlugin]
    });
    var middleGrid = new Ext.grid.GridPanel({
        ddGroup          : 'middleGridDDGroup',
        store            : new Ext.data.JsonStore({
            fields : fields,
            root   : 'records'
        }),
        columns          : [
            {header: "",  width : 120, dataIndex: 'title'},
        ],
        enableDragDrop   : false,
        stripeRows       : false,
        viewConfig : {
            forceFit : false
        },
        plugins : [arrowPlugin]
    });

    var rightGrid = new Ext.grid.GridPanel({
        ddGroup          : 'leftGridDDGroup',
        store            : new Ext.data.JsonStore({
            id     : 'rightGridId',
            fields : fields,
            data   : books,
            root   : 'records'
        }),
        columns          : [
            {header: "",  width : 120, dataIndex: 'title'},
        ],
        enableDragDrop   : false,
        stripeRows       : false,
        viewConfig : {
            forceFit : false
        },
        autoScroll: true,
        plugins : [arrowPlugin]
    });

    new Ext.Panel({
        renderTo     : Ext.getBody(),
        title        : 'EDI To DB Mapping',
        width        : 800,
        height       : 300,
        layout       : {
            type : 'hbox',
            align : 'stretch'
        },
        defaults     : {
            flex : 10
        },
        items        : [

            leftGrid,
            middleGrid,
            rightGrid
        ]
    });

    //Based on extjs example
    /*
     * Setup Drop Targets
     */

    // This will make sure we only drop to the  view scroller element
    var leftGridDropTargetEl =  leftGrid.getView().scroller.dom;
    var leftGridDropTarget = new Ext.dd.DropTarget(leftGridDropTargetEl, {
            ddGroup    : 'leftGridDDGroup',
            notifyDrop : function(ddSource, e, data){
                    var records =  ddSource.dragData.selections;
                     var records =  ddSource.dragData.selections;
                    alert("records len:"+records.length);
                    Ext.each(records, ddSource.grid.store.remove, ddSource.grid.store);
                   //  leftGrid.store.add(records);
                    //leftGrid.store.sort('title', 'ASC');
                    return true
            }
    });

    // This will make sure we only drop to the view scroller element
    var rightGridDropTargetEl = rightGrid.getView().scroller.dom;
       var rightGridDropTarget = new Ext.dd.DropTarget(rightGridDropTargetEl, {
            ddGroup    : 'rightGridDDGroup',
            notifyDrop : function(ddSource, e, data){
                    var records =  ddSource.dragData.selections;
                    alert(records.length);
                    //alert(Ext.select('.ext-gen58').elements[0].id);

                    Ext.each(records, ddSource.grid.store.remove, ddSource.grid.store);
                    rightGrid.store.add(records);
                    rightGrid.store.sort('title', 'ASC');
                    return true
            }
    });

});

**And this is for drawing(mapping) arrow:**

/*
 * Ext.ux.DDArrow
 *
 * Copyright (c) 2010 Florian Cargoët (http://fcargoet.evolix.net/webdev/extjs/ext-ux-ddarrow/)
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 *
 * TODO :
 *  - use viewport size instead of 2000, 2000 for the raphael canvas
 *  - add more styleable attributes
 *  - change arrow color/shape in notifyOver if drop allowed/not allowed
 *  - test on TreePanel
 */
Ext.ns('Ext.ux');
Ext.ux.DDArrow = function(arrowStyle){
    //alert("arrow style :"+arrowStyle);
    //overrides default arrow style
    Ext.apply(this.arrowStyle, arrowStyle);
};
//alert("prototype");
Ext.ux.DDArrow.prototype = {
    //default arrow style
    arrowStyle : {
        strokeWidth : 1,
        arrowWidth  : 4,
        color       : 'black'
    },
    init : function(component){
        component.on('render', this.setupDD, this);
    },
    getDragZone : function(component){
        if(component.dragZone){ //should work on TreePanels, not tested yet
            return component.dragZone;
        }
        if(component instanceof Ext.grid.GridPanel){
            return component.getView().dragZone;
        }

    },
    setupDD : function(component){
     var dragZone = this.getDragZone(component);
        //alert("dragZone");
        //apply style
        Ext.apply(dragZone, this.arrowStyle);

        Ext.apply(dragZone,{
            /*
            * onInitDrag calls onStartDrag excepted in GridDragZone
            * let's patch it
            */
            onInitDrag : function(x,y){
                var data = this.dragData;
                this.ddel.innerHTML = this.grid.getDragDropText();
                //alert("this.ddel :"+this.ddel.innerHTML);
                this.proxy.update(this.ddel);
                // fire start drag?
                //i would say yes ;-)
                this.onStartDrag(x,y);
            },
            /*
            * onStartDrag is called when you initiate the drag action
            * it stores the mouse coordinates and create the SVG canvas
            */
            onStartDrag : function(x, y){
             this.arrowStart = {x:x, y:y};
         this.raphaelCanvas = new Raphael(0,0,2000,2000); //could be better...
                //apply body.no-cursor (cursor : none) to hide the cursor
                //cursor:pointer is nice too
                },
            /*
            * onDrag is called on mousemove
            * it clears the canvas and draw the arrow again
            */
            onDrag : function(e){
                this.raphaelCanvas.clear();
               var arrow = this.raphaelCanvas.arrow(this.arrowStart.x, this.arrowStart.y, e.xy[0], e.xy[1],8);
              },
            /*
            * onEndDrag is called when you drop whatever you were dragging
            * it removes the SVG canvas from the document
            */
            onEndDrag : function(){
                this.raphaelCanvas.remove();
                delete this.raphaelCanvas;
                this.raphaelCanvas.renderfix();

               }
        });
    }
}

//Raphael plugin
Raphael.fn.arrow = function (x1, y1, x2, y2, size) {
        var angle = Math.atan2(x1-x2,y2-y1);
        angle = (angle / (2 * Math.PI)) * 360;
        var arrowPath = this.path("M" + x2 + " " + y2 + " L" + (x2  - size) + " " + (y2  - size) + " L" + (x2  - size)  + " " + (y2  + size) + " L" + x2 + " " + y2 ).attr("fill","black").rotate((90+angle),x2,y2);
        var linePath = this.path("M" + x1 + " " + y1 + " L" + x2 + " " + y2);
        return [linePath,arrowPath];
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-09T00:15:52.000

使用以下过程：

*   [Ext.draw.Surface](http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.draw.Surface)创建共享曲面

*   [Ext.draw.CompositeSprite](http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.draw.CompositeSprite)将网格添加到共享表面

*   [Ext.draw.Component](http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.draw.Component)画线

# tfs-sdk - 使用 TFS API 标记为只读时编辑 TFS 工作项字段

> ID：11772314
> 
> 赞同：0
> 
> 时间：2012-08-02T06:42:12.713
> 
> 标签：tfs-sdk

我正在尝试使用托管 TFS API 更新工作项的字段。

但是，某些状态将该字段标记为只读（例如，*完成*状态），此时我无法修改该字段，即使使用 TFS API 也是如此。我注意到该`IsEditable`字段返回`False`，但我无法设置它。

```
var effort = Convert.ToSingle(workItem.Fields["Effort"].Value);
workItem.Fields["Effort"].Value = effort / 2.0f; 
```

由于我的代码适用于该字段可编辑的每个状态，因此我相当有信心它可以工作。使用 Team Explorer UI 检查工作项时，我可以看到我的更改已在工作项的历史记录中应用和跟踪。这也反映在生成的所有报告中。

字段标记为只读后如何修改？甚至可能吗？（我可以将状态切换回来，以便该字段可编辑，但这是我想避免的事情，因为我不知道这会对我的速度和燃尽图产生什么样的影响。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:42:05.613

事实证明，这在使用托管 API 时无法直接完成。使用 Web 服务 API 时，有一个`BypassRules`可以设置的属性。

Web 服务 API 需要一个 XML 包，因此难点在于创建它。

首先，像往常一样连接到服务器和集合。

```
var tpc = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(
   new Uri(SERVER_URI), new UICredentialsProvider());
tpc.EnsureAuthenticated();

var store = tpc.GetService<WorkItemStore>();
var server = tpc.GetService<WorkItemServer>(); 
```

建立连接后，我组装了一个我想要修改的工作项 ID 的列表。就我而言，我需要将所有工作项`Efforts`除以 2。

XML 包语法相当简单。需要注意的一点是，我明确需要将我的努力值（浮点数）转换为字符串，即使内部类型是双精度。（我可能在这里做错了什么，但最终结果是我想要的。）

```
private static StringBuilder GetXmlPackage(WorkItemStore store, IEnumerable<int> workItemIds)
{
    var sb = new StringBuilder();
    sb.Append("<Package>");

    foreach (var id in workItemIds)
    {
        var item = store.GetWorkItem(id);
        var effort = Convert.ToSingle(item.Fields["Effort"].Value) / 2.0f;

        sb.AppendFormat("<UpdateWorkItem ObjectType='WorkItem' BypassRules='1' WorkItemID='{0}' Revision='{1}'>", item.Id, item.Rev.ToString());
        sb.Append("<Columns>");
        sb.AppendFormat("<Column Column='Microsoft.VSTS.Scheduling.Effort' Type='Double'><Value>{0}</Value></Column>", XmlConvert.ToString(effort));
        sb.Append("</Columns>");
        sb.Append("<InsertText FieldName='System.History' FieldDisplayName='History'>Updated effort.</InsertText>");
        sb.Append("</UpdateWorkItem>");
    }

    sb.Append("</Package>");
    return sb;
} 
```

最后要做的是调用网络服务器并进行批量更新以修改所有工作项。

```
private static void UpdateWorkItems(WorkItemStore store, WorkItemServer server, IEnumerable<int> workItemIds)
{
    var sb = GetXmlPackage(store, workItemIds);

    var mthe = new MetadataTableHaveEntry[0];
    string dbStamp;
    IMetadataRowSets rowSets;
    XmlElement outElement;

    var doc = new XmlDocument();
    doc.LoadXml(sb.ToString());

    server.BulkUpdate(
        WorkItemServer.NewRequestId(),
        doc.DocumentElement,
        out outElement,
        mthe,
        out dbStamp,
        out rowSets);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T20:02:43.967

AFAIK 您可以在一定条件下使用 API 执行此操作。运行进程的帐户必须属于**Project Collection Service Accounts**组。然后，当您创建设置了 BypassRules 标志的 WorkIteMStore 时，类似于下面的代码，您将能够更新字段：

> WorkItemStore wis = new WorkItemStore(tpc, WorkItemStoreFlags.BypassRules);

# templates - Chrome 应用程序。jQuery.Templates 类似物

> ID：11772315
> 
> 赞同：0
> 
> 时间：2012-08-02T06:42:13.937
> 
> 标签：templates, google-chrome, google-chrome-extension, jquery-templates

我在我的 chrome 应用程序中使用 jQuery.Template，但几天前 Chrome 更新了 Chrome 浏览器和 Chrome 网上应用店，现在`manifest_version:1`如果我想在网上应用店中发布我的扩展程序，我无法使用。从桌面安装应用程序也已被禁用。所以我必须使用`manifest_version:2`，但是`script-src 'unsafe-eval'`在 jQuery.Templates 中使用了一些麻烦。

所以指令`unsafe-eval`是不允许的。`script-src`

关于可以使用哪个 JavaScript 模板引擎的任何建议？

我需要模板引擎：

*   没有任何`new Function()`或`eval()`使用。
*   像 jQuery.Templates 中的简单数据访问：`${my_variable}`
*   内联逻辑为：`{{if a==b}} ... {{else b == c}} ... {{/if}}`
*   可能正在为变量设置值，但不一定：`${my_variable = 123, ''}`
*   它必须像一个插件（不是框架，我不会重写我的应用程序）。

**注意：不，我不会使用沙盒页面，我认为这是非常丑陋的解决方案。**

**更新：感谢您的回答。我选择 Handlebars.js 作为主模板引擎**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:39:27.397

我只需要一个模板系统并寻找可以与清单版本 2 一起使用的东西并找到了这个....
[http://code.google.com/p/json-template/wiki/Reference](http://code.google.com/p/json-template/wiki/Reference)
...在其中没有代码是否使用 eval。不幸的是，我发现如何充分利用它有点困难，而且我自己才刚刚开始研究它，所以我下面的评论可能并不完全正确。
我不使用 JQuery 所以不能真正比较，但我认为它会做你想要的，主要是。
它不会使用 jquery 之类的脚本标签来执行内联代码，但这很容易做到。我写得很快，让我可以使用内联模板......

```
jsontemplate.inlineSCRIPT = function(source,templateoptions) {
    var templates = source.querySelectorAll('script[type="text/json-template"]');
    for (var i = 0; i < templates.length; i++) {

        var template = templates[i];

        var options = JSON.parse(template.getAttribute('options'));

        if (!options.object) continue;

        var sourceObjectBits = options.object.split('.');

        var sourceObject = window[sourceObjectBits[0]];

        for (var i = 1; i < sourceObjectBits.length; i++) {
            if (!sourceObject[sourceObjectBits[i]]) break;
            sourceObject = sourceObject[sourceObjectBits[i]];
        }

        if (i != sourceObjectBits.length) continue;

        var target;
        if (options.target) {
            options.target == 'self' ? target = template : target = document.querySelector(options.target);
        } else {
            target = template;
        }

        if (!target) continue;

        if (options.innerOuter) {
            options.innerOuter == 'inner' ? target.innerHTML = jsontemplate.expand(template.innerHTML, sourceObject,templateoptions) : target.outerHTML = jsontemplate.expand(template.innerHTML, sourceObject,templateoptions);
        } else {
            target.outerHTML = jsontemplate.expand(template.innerHTML, sourceObject,templateoptions);
        }
    }
} 
```

....然后在我的html中我可以...

```
<script type='text/json-template' options='{"object":"a.b.details"}'>
    {# This is a comment and will be removed from the output.}
    {.section songs}
      {.repeated section @}
        {.if equals test title}
          test equaled title
        {.end}
      {.end}
    {.or}
    <p><em>(No page content matches)</em></p>
    {.end}
</script> 
```

模板有一些条件，但它们非常基本，比如 if variable = true then do this。但是如果变量等于变量执行此操作，我找不到任何东西。您可以使用自定义谓词添加它们，但我还没有想出如何在不更改 jsontemplate 源的情况下添加一个带参数的谓词......我相信你可以，我只是还没想出如何去做。如果您确实添加了谓词，您应该能够满足您想要的条件，但模板中的语法看起来不太好。我添加了一个 if equals ，模板的源代码如下所示......

```
{.if equals test title}
  test equaled title
{.end} 
```

...这意味着，如果变量 test 的值等于 title 的值，则执行此块，然后您可以将 or 块和更多 ifs 用于 else's。我不能告诉你如何在不修改 jsontemplate 源的情况下添加一个，但这里是如何做到这一点的方法......
在函数`function _Pluralize(value, unused_context, args) {`第 76 行之后添加另一个函数，比如......

```
// Are two variables equal, gotta add the error checking
function _Mine(value, context, args) {
  var s, p;
  switch (args.length) {
    case 0:
      s = value;
      break;
    case 1:
       s = context.get(args[0]);
      break;
    case 2:
      s = context.get(args[0])==context.get(args[1]);
      break;
    default:
      // Should have been checked at compile time
      throw {
        name: 'EvaluationError', message: 'pluralize got too many args'
      };
  }
  return s;
} 
```

..然后在编译函数中`function _Compile(template_str, options) {`查找该行`var default_predicates = PrefixRegistry([`（就在函数声明下方）并添加您的行，例如....

```
 // default predicates with arguments
  var default_predicates = PrefixRegistry([
    {name: 'equals', func: _Mine},
    {name: 'test', func: _TestAttribute}
      ]); 
```

...我确定您也可以使用谓词来设置变量，但还没有尝试过。总之，绝对值得一看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T03:31:26.700

非常感谢您的详细回答，但我为我找到了更优雅的解决方案：Handlebars.js。

*   **[Handlebars.js 官方网站](http://handlebarsjs.com/)**
*   **[Handlebars.js 源代码](https://github.com/downloads/wycats/handlebars.js/handlebars-1.0.0.beta.6.js)**

它具有模板的预编译引擎，如果使用预编译的模板则不使用`eval()`。它有非常简单的内联逻辑（我只是可以检查该变量的真假），但速度非常快。=) 你应该试试比较。一瞬间：它使用 NodeJS 进行预编译。如果您不需要它，则只需使用`Handlebars.compile()`.

**注意：`manifest_version: 2`必须使用预编译。如果您尝试使用`Handlebars.compile()`，您将收到有关 CSP 违规的错误。**

如果你已经安装了 NodeJS，你可以尝试使用它的预编译引擎`npm install handlebars -g`。`-g`允许您`handlebars`在 FS 的任何项目中使用。您可能需要 sudo 此命令。接下来重新加载您的终端和 cd 到包含模板文件的文件夹。

您需要将它们迁移到 Handlebars.js 语法并`.handlebars`为每个文件添加扩展名。然后运行`handlebars path/to/templates/*.handlebars -f js/templates.js`

如果你在 Handlebars.js 之后加载这个 js 文件，你应该在这里找到已编译的模板：

```
Handlebars.templates[your_template_file_name] 
```

例如：

**my_template.handlebars**

```
<div>{{testing_template}}</div> 
```

**main.js**

```
// example with RequreJS
require(["handlebars", "templates"], function(){
    var template = Handlebars.templates.my_template,
        rendered = template({
            "testing_template" : "some text right here"
        });

    console.log(rendered);
}); 
```

在控制台中，您会看到：

```
> "<div>some text right here</div>" 
```

Handlebars.js 支持简单`{{#if}}`和`{{#unless}}`块以及`{{#each}}`循环和自定义助手。我认为非常强大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T08:42:46.060

我对此进行了一些研究，对我来说，最快的方法就是编写一些自定义函数来替换 jQuery 模板的功能。

# .net - 具有任意签名的函数生成

> ID：11772318
> 
> 赞同：0
> 
> 时间：2012-08-02T06:42:32.267
> 
> 标签：.net, generics, reflection, f#, reflection.emit

假设您要编写一个函数“gen”，该函数生成一个具有由类型列表给出的签名的函数：

```
let gen (sig:Type list) = ....

let sig = [ typeof<int>; typeof<int[]>; typeof<float> ]
let func = gen sig
then func is of type: int -> int[] -> float -> unit 
```

我想到了两种可能的解决方案：

a) 使用 Reflect Emit，但我不知道这样我们是否可以让 IntelliSense 工作？Reflect Emit 似乎创建了 IntelliSense 可能看不到的新 .net 代码，因此它可能不会在编译时验证代码。

b）使用类型提供者，但我担心它太重并且可能不实用。

c）使用泛型，如`gen<'T1> (sig:Type list) : 'T2 -> unit`，这可能需要递归调用，但我不知道如何做到这一点。

我更喜欢方法 c)，因为它是轻量级的，并且可以在编译时检查。还是有替代方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:55:34.943

您已经问过如何使用给定的签名生成函数，但问题忽略了函数体的重点。

假设您有某种方法来设置此主体，一种可能的解决方案可能如下所示（警告：缓慢，因为它在内部使用反射）：

```
module F = 
    type FST = Microsoft.FSharp.Reflection.FSharpType
    type FSV = Microsoft.FSharp.Reflection.FSharpValue

    let mkFunction (handler : obj list -> obj) : 'T = 
        if not (FST.IsFunction typeof<'T>) then failwith "Function type expected"
        let rec chain args ty = 
            let dty, rty = FST.GetFunctionElements ty
            let impl = 
                if FST.IsFunction rty then 
                    fun o -> chain (o::args) rty
                else
                    fun o -> handler(List.rev (o::args))
            FSV.MakeFunction(ty, impl)
        chain [] typeof<'T> :?> 'T
let f : int -> (int -> int) -> string = 
    F.mkFunction <| 
        fun [:? int as a; :? (int -> int) as f] -> 
            box (string (f a)) 
```

如果您想使用 System.Type 列表表示所需的签名 - 告别智能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T16:34:38.253

`MakeFunction`请参阅[http://msdn.microsoft.com/en-us/library/ee353497](http://msdn.microsoft.com/en-us/library/ee353497)

比你能得到的要慢`Reflection.Emit`，但更容易使用，可能足以满足你的目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T07:27:05.467

如果您在运行程序之前拥有生成代码的所有必要信息，则可以使用 Reflection.Emit 生成一个带有您的函数的 DLL 作为预处理步骤并在您的主项目中引用它。这样你就可以得到智能感知。如果，OTOH，你只知道你在运行时的签名，你可以使用动态方法（[http://msdn.microsoft.com/en-us/library/system.reflection.emit.dynamicmethod.aspx](http://msdn.microsoft.com/en-us/library/system.reflection.emit.dynamicmethod.aspx)），但那样你不'显然，没有智能感知。

关于选项 b) 和 c)：我没有尝试过前者，但它仍然是编译时操作，而后者在 F# 中是不可能的——该语言没有可变参数函数 printfn & co。在编译器中烘焙。

# iphone - 设置单元格的背景颜色不起作用 - IOS

> ID：11772320
> 
> 赞同：-3
> 
> 时间：2012-08-02T06:42:41.947
> 
> 标签：iphone, objective-c, ios, xcode

> **可能重复：**
> [如何自定义 UITableViewCell 的背景颜色？](https://stackoverflow.com/questions/281515/how-to-customize-the-background-color-of-a-uitableviewcell)

我正在尝试设置单元格的文本颜色，但它不起作用。这是代码..

```
cell_center.backgroundColor = [UIColor redColor];
cell_center.textLabel.backgroundColor = [UIColor grayColor];
cell_center.selectionStyle = UITableViewCellSelectionStyleGray; 
```

此处选择样式有效，但文本颜色不受影响。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T06:45:41.523

设置这样的背景颜色`contentView`：

```
[cell_center contentView].backgroundColor = [UIColor redColor]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T06:57:05.963

```
cell_center.textLabel.textColor = [UIColor redColor]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T06:56:53.253

您实际上想设置 TEXT 颜色，但您甚至没有这样做。试试这个：

```
cell_center.textLabel.textColor = [UIColor blackColor]; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-02T06:52:12.463

看起来其他答案正在显示如何更改单元格背景颜色，而不是标签背景颜色。

要更改**标签**背景颜色，请使用以下代码。

```
[cell_center.textLabel setBackgroundColor:[UIColor grayColor]]; 
```

如果这对您不起作用，请告诉我，我们将解决更多问题。

# asp.net - 在 asp.net 中限制下载视频

> ID：11772323
> 
> 赞同：-3
> 
> 时间：2012-08-02T06:43:12.097
> 
> 标签：asp.net, video-streaming

我有这么多视频文件，我把我的网页放在 asp.net 中。这工作正常。但我想要的是用户只能在我的网站上观看视频，我必须限制用户下载我的视频。如何我能做到吗，你能在dotnet中为我提供解决方案吗？

是否有任何其他技术可以限制用户下载我的视频

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T06:54:42.163

In my thought , it is impossible....

If you can see it, you already got it.....

# html - 提交按钮图片

> ID：11772326
> 
> 赞同：19
> 
> 时间：2012-08-02T06:43:29.267
> 
> 标签：html, css, submit

我想使用提交按钮图像而不是标准按钮。我在 Google 和 SO 上进行了搜索，得到了几种不同的方法。

使用图像作为提交按钮的正确方法是什么？

我还想为按钮添加三种状态 - 正常、悬停、onclick

我试过的

HTML

```
<input type="submit" value="Subscribe"> 
```

CSS

```
input[type=submit] {
    background:url(../images/btn-subscribe.gif) none;
    text-indent:-9999px;
    width:109px;
    height:41px;
} 
```

出现了什么

![在此处输入图像描述](../Images/28b93728946dbe275ea8966f754ae4f0.png)

它应该显示什么

![在此处输入图像描述](../Images/a0eb623f560a8e8c1f15d64f79d4af12.png)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-02T07:05:40.620

**编辑：**

我认为您正在尝试按照此[**演示中的方式进行操作**](http://jsfiddle.net/Z9UZF/)

**按钮有三种状态：正常、悬停和激活**

您需要为按钮状态使用[**CSS Image Sprites**](http://css-tricks.com/css-sprites/)。

[**查看 CSS Sprites 的奥秘**](http://coding.smashingmagazine.com/2009/04/27/the-mystery-of-css-sprites-techniques-tools-and-tutorials/)

```
/*CSS*/

.imgClass { 
background-image: url(http://inspectelement.com/wp-content/themes/inspectelementv2/style/images/button.png);
background-position:  0px 0px;
background-repeat: no-repeat;
width: 186px;
height: 53px;
border: 0px;
background-color: none;
cursor: pointer;
outline: 0;
}
.imgClass:hover{ 
  background-position:  0px -52px;
}

.imgClass:active{
  background-position:  0px -104px;
}
```

```
<!-- HTML -->
<input type="submit" value="" class="imgClass" />
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-02T06:44:34.603

```
<input type="image" src="path to image" name="submit" /> 
```

更新：

对于按钮状态，您可以使用 type="submit" 然后向其添加一个类

```
<input type="submit" name="submit" class="states" /> 
```

然后在 css 中，使用背景图像：

```
.states{
background-image:url(path to url);
height:...;
width:...;
}

.states:hover{
background-position:...;
}

.states:active{
background-position:...;
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-16T03:57:19.903

`<INPUT TYPE="image" SRC="images/submit.gif" HEIGHT="30" WIDTH="173" BORDER="0" ALT="Submit Form">`
标准提交按钮有的地方`TYPE="submit"`，我们现在有`TYPE="image"`。图像类型默认为表单提交按钮。更简单

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-19T12:25:15.400

出于可访问性的原因，即使您隐藏此文本，或者如果您使用`<input type="image" .../>`始终指定`alt=""`此输入字段的属性，您始终指定提交的值非常重要。

盲人不知道如果按钮不包含有意义的`alt=""`或`value=""`.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-02T09:34:05.893

您必须删除边框并在输入上添加背景图像。

```
.imgClass { 
    background-image: url(path to image) no-repeat;
    width: 186px;
    height: 53px;
    border: none;
} 
```

现在应该好了，正常。

# gnu-screen - 自定义 gnu-screen 会话日志文件名

> ID：11772328
> 
> 赞同：8
> 
> 时间：2012-08-02T06:43:39.140
> 
> 标签：gnu-screen

我想知道是否有人尝试将他们的 gnu-screen 会话记录到日志文件（默认 screenlog.N 除外，其中 N 是会话号）。

我尝试执行以下操作

```
~$ screen -L custom_screenlog -S test_session 
```

但屏幕会终止。它也不在屏幕手册中。尝试搜索谷歌，我似乎看不到答案。

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-22T13:33:49.087

My 4.0.2 version of GNU screen has no argument to `-L` switch. The log file is systematically named `screenlog.0` and created in the current directory. Then you may simply try:

```
screen -L -S test_session 
```

Edit: you can customize your `.screenrc` file, adding for instance

```
logfile /tmp/screenlog-%Y%m%d-%c:%s 
```

This way log files may be stored in a predefined directory (`/tmp` in this example) and may be named after logfile opening date

# javascript - 如何将 Ext.Store 中的数据保存到数组中？

> ID：11772334
> 
> 赞同：0
> 
> 时间：2012-08-02T06:44:18.523
> 
> 标签：javascript, extjs

我有一个数组。

```
var new_data = [['333333.333','44444.222'], ['4444.222','78777.1111']]; 
```

我有一家商店。

```
var datastore = new Ext.data.ArrayStore({
                                 fields: [
                                  {name: 'X', type: 'float'},
                                  {name: 'Y', type: 'float'}
                                 ]
                               });
datastore.loadData(new_data); 
```

我有一个editorgrid。

```
 var cm_koord = new Ext.grid.ColumnModel({
                                columns: [
                                    {header: "X", 
                                    dataIndex:"X",
                                    editor: new Ext.form.TextField({allowBlank: false})
                                    },{
                                    header:"Y",
                                    dataIndex:"Y",
                                    editor: new Ext.form.TextField({allowBlank: false})
                                    }]
                            })
                            var koord_tab = new Ext.grid.EditorGridPanel({
                                title:"Симантика",
                                store: datastore,
                                region: 'center',
                                cm: cm_koord,
                                //height: 100,
                                autoScroll: true,
                                //bbar:[saveButton,cancelButton,editButton]
                            }) 
```

问题：编辑后如何保存更改？我的意思是如何保存`new_data`数组中的更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T06:53:33.923

您可以像这样在 arrayStore 上使用 getRange 方法：

```
new_data = [];
Ext.each(datastore.getRange(), function (rec) {
    var rec_data = [];
    rec.commit();
    for (var i in rec.data) {
        rec_data.push(rec.data[i]);
    }
    new_data.push(rec_data);
}); 
```

希望这可以帮助！

# java - 遍历文件夹中 DirectoryStream 和 File.list() 之间的性能差异

> ID：11772335
> 
> 赞同：2
> 
> 时间：2012-08-02T06:44:19.657
> 
> 标签：java, directory, java-7

DirectoryStream 和 File.list() 之间是否存在性能差异

我曾尝试在 Linux 平台上对这两个 java 程序进行 strace，它使用具有相同参数的 getdents64 系统调用。在我看来，两者的性能相同，但编程范式不同

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T06:57:50.413

你可能会觉得这很有趣：

[将 java.io.File 功能映射到 java.nio.file](http://docs.oracle.com/javase/tutorial/essential/io/legacy.html#mapping)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T10:11:17.453

如果他们都调用同一个系统调用，为什么会有区别？遍历目录基本上是 I/O 绑定的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-18T04:11:37.937

性能优势`DirectoryStream`以内存使用的形式出现，并且能够在列出目录时处理返回的路径对象，而不是构建完整列表并将其存储在内存中，然后对其进行迭代。这在列出包含大量文件的目录或递归遍历目录树时非常有用。

更多信息在这里：[http ://blog.eyallupu.com/2011/11/java-7-working-with-directories.html](http://blog.eyallupu.com/2011/11/java-7-working-with-directories.html)

# ios - 使用 FPC 在 iOS 上编程

> ID：11772341
> 
> 赞同：0
> 
> 时间：2012-08-02T06:44:40.413
> 
> 标签：ios, fpc

请告诉我，我在哪里可以获得有关使用 FPC 在 iOS 上进行开发的信息？我不是指 Firemonkey iOS 应用程序。如何使用 FPC 访问 iPhone 环境？例如 GPS 或加速度计等。我使用 RAD Studio XE2 和带雪豹的虚拟机。例如

```
{$IFDEF FPC}
UIApplication.sharedApplication.openUrl(NSUrl.URLWithString(
NSSTR(PChar('http://stackoverflow.com'))));
{$ENDIF} 
```

我没有如何使用它的经验。我只知道如何使用 Objective-C，但我需要这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T06:49:55.380

FreePascal 站点有一个[Wiki](http://wiki.freepascal.org/)，其中包含有关该主题的一些文档（即[Targeting Darwin](http://wiki.freepascal.org/Target_Darwin)和[iPhone Development](http://wiki.freepascal.org/iPhone/iPod_development)）。

要解决您的特定问题：

首先，您可以下载 FreePascal 库的源代码并查看库源代码。这对于开发至关重要，因为 FPC 没有关于库的文档（源代码也是文档的来源 :)。接下来，如果您没有访问 API 的函数，您可以从系统 dylib 中导入它们。当 Delphi 库中没有可用的声明或函数时，这与您在 Windows 上所做的完全相同。

# c# - 实体框架 c# where

> ID：11772348
> 
> 赞同：-2
> 
> 时间：2012-08-02T06:45:58.950
> 
> 标签：c#, entity-framework, entity-framework-4

如何从实体框架中读取？

我用它来插入项目：

```
 public void Insert()
    {
        using (HistoryContainer db = new HistoryContainer())
        {
            HistoryData e = new HistoryData();
            e.MP = IpAddress;
            e.Number = OtherPartyNumber;
            e.DateTimeStart = DateTime.Now;
            e.Duration = duration;
            e.TypeDescription = type;
            e.text = e.text;
            db.AddToHistoryDataSet(e);
            db.SaveChanges();
        }
    } 
```

我试过这个来阅读它们：

```
 public virtual IEnumerable<HistoryContainer> ReadFirst()
    {
        using (HistoryContainer x = new HistoryContainer())
        {
            foreach (var item in HistoryData.where(b => b.MP == IpAddress))
            {
                _history.Add(new HistoryItem(item));
            } 
        }
    } 
```

但它没有用。怎么了？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:08:17.233

你在 foreach 语句中忘记了你的容器

```
public virtual IEnumerable<HistoryContainer> ReadFirst()
{
    using (HistoryContainer x = new HistoryContainer())
    {
        foreach (var item in x.HistoryData.where(b => b.MP == IpAddress))
        {
            _history.Add(new HistoryItem(item));
        } 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T06:52:55.687

```
 public virtual HistoryData ReadFirst()
    {
        using (HistoryContainer db = new HistoryContainer())
        {
            return db.HistoryData.Where(x => x.MP == IpAddress).FirstOrDefault();
        }
    } 
```

# apache - 单独的管理员和根重写规则 (mod_rewrite)

> ID：11772350
> 
> 赞同：0
> 
> 时间：2012-08-02T06:46:10.590
> 
> 标签：apache, mod-rewrite

这是我当前的 htaccess，我使用 mod_rewrite

```
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule !^/?admin/.+$ index.php [L]
RewriteRule ^admin/(.*)$ admin/index.php [L] 
```

我需要将管理员请求重写`admin/index.php`
为`/index.php`.
示例：
`localhost/example`to `/index.php`
`localhost/foo/bar`to `/index.php`
`localhost/admin/login/`to to `admin/index.php`
`localhost/admin/pages/`to`admin/index.php`

上述规则工作正常，但它也适用于 css 样式或 javascripts。这意味着`admin/js/jquery.js`也将重写`admin/index.php`（文件路径存在）。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T06:53:33.207

您需要复制仅适用于下一个条件的 2 个条件`RewriteRule`：

```
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule !^/?admin/.+$ index.php [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^admin/(.*)$ admin/index.php [L] 
```

# asp.net - 无法显示个人资料图像，路径存储在数据库中

> ID：11772351
> 
> 赞同：0
> 
> 时间：2012-08-02T06:46:13.007
> 
> 标签：asp.net, .net, imageurl

我无法显示用户在注册时上传的个人资料图片。图像的路径存储在数据库中，图像存储在目录 /data/ 中。imageURL 对我不起作用。代码是：（.cs）

```
protected void Page_Load(object sender, EventArgs e)
{
    string us = (string)Session["userid"];
    if (!Page.IsPostBack)
    {     
        SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["cc"].ConnectionString);
        SqlCommand cmd = new SqlCommand("select imgpath from reg where userid='" + us + "'", con);
        con.Open();
        SqlDataReader dr = cmd.ExecuteReader();
        while (dr.Read())
        {
            Image1.ImageUrl = dr[0].ToString();
        }
        con.Close();
    }
} 
```

# android - 如何从一个活动自定义列表视图中获取价值到另一个活动自定义列表视图？

> ID：11772355
> 
> 赞同：0
> 
> 时间：2012-08-02T06:46:32.043
> 
> 标签：android

如何 ？我有 select1 和 select2 静态 string[] 变量，并声明了 myval、myvals 两个全局变量。如果我从列表项中选择了项目，那么这些项目是可见的，并且下一个活动自定义 listView；

第一个活动：

```
 l1.setOnItemClickListener(new OnItemClickListener() { 

                 public void onItemClick(AdapterView<?> parent, View view, 
                 int position, long id) { 

 //When clicked, show a toast with the TextView text 
 Toast.makeText(HomeActivity.this, "SELECTED :: " + "item "+ select1[position] + " " + "price"+ select2[position], 
 Toast.LENGTH_SHORT).show(); 

 String s1=select1[position];
GlobalClass.myval.add(s1);

 String s2=select2[position];
 GlobalClass.myvals.add(s2);
 } 
```

高效适配器：

```
 public static class EfficientAdapter extends BaseAdapter{
     private LayoutInflater mInflater;
     public EfficientAdapter(Context context){
        mInflater=LayoutInflater.from(context);

    }
    public int getCount() {
    return select1.length;
    }
    public Object getItem(int position) {
    return position;
    }
    public long getItemId(int position) {
    return position;
    }
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if(convertView==null){
            convertView=mInflater.inflate(R.layout.list_row,null);
            holder=new ViewHolder();
            holder.Text1=(TextView) convertView.findViewById(R.id.textView1);
            holder.Text2=(TextView) convertView.findViewById(R.id.textView2);
            convertView.setTag(holder);
            }
        else{
            holder=(ViewHolder) convertView.getTag();

        }
        holder.Text1.setText(select1[position]);
        holder.Text2.setText(select2[position]);
        return convertView;
    }
    static class ViewHolder{
        TextView Text1;
        TextView Text2;
        } 
```

下一个活动：

```
 private static class EfficientAdapter extends BaseAdapter{
    private LayoutInflater mInflater;
    public EfficientAdapter(Context context){
        mInflater=LayoutInflater.from(context);

    // implementation of EfficientAdapter   
    }
    public int getCount() {

        return HomeActivity.select1.length;
    }
    public Object getItem(int position) {

        return position;
    }
    public long getItemId(int position) {

        return position ;
    }
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;

    if(convertView==null){
            convertView=mInflater.inflate(R.layout.list_ticket, null);
            holder=new ViewHolder();
            //holder.Text1=(TextView) convertView.findViewById(R.id.textView1);
            holder.Text2=(TextView) convertView.findViewById(R.id.textView2);
            holder.Text3=(TextView) convertView.findViewById(R.id.textView3);
            convertView.setTag(holder);
        }
        else{
              holder=(ViewHolder)convertView.getTag();
            }

            holder.Text2.setTag(GlobalClass.myval);
            holder.Text3.setTag(GlobalClass.myvals);

        return convertView;
    }
     static class ViewHolder{
        TextView Text1;
        TextView Text2;
        TextView Text3;

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:06:43.797

用于从一项活动更改为另一项活动。查看[意图](http://developer.android.com/guide/components/intents-filters.html) 基本上是这样的：

```
Intent intent = new Intent(getContext(), ActivityToBeStarted.class);
            intent.putExtra("messages", result);
            startActivity(intent); 
```

在 activty 2' 方法中，您从 oncreate 方法开始：

```
String[] myStringArray = getIntent().getStringArrayExtra("messages"); 
```

# c# - 以文本格式打印事件xml文件c#

> ID：11772358
> 
> 赞同：0
> 
> 时间：2012-08-02T06:46:48.473
> 
> 标签：c#, printing

我正在将我的数据保存到一个 xml 文件中。现在，我正在尝试以文本格式打印出保存在 xml 文件中的数据。我应该怎么做？

这是我的打印代码。

```
private void button4_Click(object sender, EventArgs e)
    {
        System.Windows.Forms.PrintDialog dlg = new System.Windows.Forms.PrintDialog();
        dlg.PrinterSettings = new System.Drawing.Printing.PrinterSettings();                        
    }

    delegate DialogResult ShowPrintDialog();
    private void printToolStripMenuItem_Click(object sender, EventArgs e)
    {
        PrintDialog dlg = new PrintDialog();
        dlg.ShowDialog();
        ShowPrintDialog spd = new ShowPrintDialog(dlg.ShowDialog);
        this.BeginInvoke(spd);            
    } 
```

这是我将数据保存到 XML 文件的代码。

```
XmlDocument xmlDoc = new XmlDocument();
            xmlDoc.Load("C:\\Users\\HDAdmin\\Document\\SliceEngine\\SliceEngine\\bin\\Debug\\saya.xml");
            XmlElement contentElement = xmlDoc.CreateElement("Patient");

            XmlElement levelEl = xmlDoc.CreateElement("LevelPriority");
            XmlText xmlText = xmlDoc.CreateTextNode(berjaya[1]);
            levelEl.AppendChild(xmlText);
            contentElement.AppendChild(levelEl);
            xmlDoc.DocumentElement.AppendChild(contentElement);                

            XmlElement nameEl = xmlDoc.CreateElement("Name");
            nameEl.InnerText = berjaya[3];                
            contentElement.AppendChild(nameEl);
            xmlDoc.DocumentElement.AppendChild(contentElement);

            XmlElement idEl = xmlDoc.CreateElement("Id");
            idEl.InnerText = berjaya[39];
            contentElement.AppendChild(idEl);
            xmlDoc.DocumentElement.AppendChild(contentElement);

            XmlElement bpEl = xmlDoc.CreateElement("BloodPressure");
            bpEl.InnerText = berjaya[5];                
            contentElement.AppendChild(bpEl);
            xmlDoc.DocumentElement.AppendChild(contentElement); 
```

我也使用`berjaya[39]`so来拆分数据，我认为拆分可以忽略。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:41:23.443

如果您希望使用 Windows 窗体进行自定义打印，那么完成大部分工作的类是[PrintDocument](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printdocument)类。您需要创建此类的一个实例，并将 PrintDialog 的 PrintDocument 属性设置为新创建的实例。

打印可能很复杂。为 XML 文件创建自定义打印作业所需的步骤过于复杂，无法在此处列出答案，但我至少可以为您指明正确的方向。我会在此处查看有关[使用 Windows Forms 打印](http://msdn.microsoft.com/en-us/library/xdt36c58.aspx)的此页面。

# javascript - Javascript SPA ViewModel 重构

> ID：11772361
> 
> 赞同：0
> 
> 时间：2012-08-02T06:47:01.363
> 
> 标签：javascript, asp.net-mvc, refactoring, single-page-application

我只是将我的第一个基于 html5 的 SPA 应用程序放在一起。以下是我的联系人 SPA 的开始，基本上它只是一个简单的列表 -> 详细信息。我现在的问题是，如何将我的 javascript 重构为单独的 JS 文件。目前它全部在 html 页面上。

```
@{
ViewBag.Title = "Contacts";
Layout = "~/Views/Shared/SiteLayout.cshtml";
}

@section HeaderContent
{
<script type="text/javascript" src="@Url.Content("~/assets/scripts/sammy.js")"></script>        
}

@section HeaderText
{
  Contacts
}

@section ButtonBar
{   
<button id="btnDetails"><img alt="New" src='@Url.Content("~/assets/images/btnAdd.png")'/><span>DETAILS</span></button>    
<button id="btnNew"><img alt="New" src='@Url.Content("~/assets/images/btnAdd.png")'/><span>NEW</span></button>        
<button id="btnRange"><img alt="New" src='@Url.Content("~/assets/images/btnAdd.png")'/><span>RANGE</span></button>
<button id="btnDelete"><img alt="New" src='@Url.Content("~/assets/images/btnAdd.png")'/> <span>DELETE</span> </button>
<button id="btnRefresh"><img alt="New" src='@Url.Content("~/assets/images/btnAdd.png")'/><span>REFRESH</span></button>        
}

<div id="form-container">

<div id="grid" style="height:100%;width:100%"></div>    

<div id="ContactsDetails" >
   <ul>
        <li><label>ID</label> <span data-bind="text:selectedContact.ContactID, events: { change: change }"></span></li>
        <li><label>Name</label> <input type="text" class="k-textbox" data-bind="value: selectedContact.FirstName, events: { change: change }" /></li>
        <li><label>UnitPrice</label> <input type="text" class="k-textbox" data-bind="value: selectedContact.LastName, events: { change: change }" /></li>
    </ul>
    <button data-bind="click: remove">Delete Contact</button>
    <button data-bind="click: goToContactsListing">Back to Listing</button>
     <button data-bind="click: save, enabled: hasChanges">Save Changes</button>
</div>

</div>

<div id="urlLink" data-url='@Url.Action("DataAPI", "API")'/>
<script>
 var viewModel;

 $(document).ready(function () {

      viewModel = kendo.observable({
         contactsSource: new kendo.data.DataSource({
             pageSize: 25,
             transport: {
                 read: {
                     url: '@Html.Raw(@Url.Action("DataAPI", "API", new {tenantId = 1, datatype = "Contacts_Listing", actionname="ActiveOnly"}))',
                     dataType: "json"
                 },
                 update: {
                     url: '@Html.Raw(@Url.Action("DataAPI/SaveChanges", "API", new {tenantId = 1, actionName = "Contacts_Listing"}))',
                     dataType: "json",
                     type: "POST",
                     contentType: "application/json; charset=utf-8"
                 },
                 destroy: {
                     url: '@Url.Action("DataAPI", "DestroyAPI")',
                     dataType: "json"
                 },
                 parameterMap: function (options, operation) {
                     if (operation !== "read" && options.models) {
                         return JSON.stringify(options.models);
                     }
                     return options;
                 }
             },
             batch: true,
             schema: {
                 model: {
                     id: "ContactID"
                 }
             }
         }),
         selectedContact: null,
         hasChanges: false,
         save: function () {
             this.contactsSource.sync();
             this.set("hasChanges", false);
         },
         remove: function () {
             if (confirm("Are you sure you want to delete this contact?")) {
                 this.contactsSource.remove(this.selectedContact);
                 //this.set("selectedContact", this.contactsSource.view()[0]);
                 this.change();
             }
         },
         showForm: function () {
             return this.get("selectedContact") !== null;
         },
         change: function () {
             this.set("hasChanges", true);
         },
         goToContactsListing: function () { location.hash = '' },
         goToContactsDetails: function () { location.hash = '/' + this.get("selectedContact").ContactID }
     });

      kendo.bind($("#form-container"), viewModel);

     $("#grid").kendoGrid({
         dataSource: viewModel.contactsSource,
         height: $(document).height() - 92,
         groupable: true,
         sortable: true,
         filterable: true,
         pageable: true,
         selectable: "multiple",
         scrollable: {
             virtual: true
         },
         columns: [{
             field: "FirstName",
             width: 90,
             title: "First Name"
         }, {
             field: "LastName",
             width: 90,
             title: "Last Name"
         }, {
             field: "DepartmentName",
             width: 90,
             title: "Department"
         }
         ]
     });

     $("#btnDetails").click(DetailsClicked);
     $("#btnNew").click(NewClicked);
     $("#btnRange").click(RangeClicked);
     $("#btnDelete").click(DeleteClicked);
     $("#btnRefresh").click(RefreshClicked);

     SetupSammy();

 });

 function SetupSammy() {
     Sammy(function () {
         this.get('', function () {
             viewModel.set("selectedContact", null);
             showContactListing();
         });
         this.get('#/:contactId', function () {
             showContactDetails();                
         });
     }).run();
 }

 function DetailsClicked() {
     var grid = $("#grid").data("kendoGrid");                  
     if (grid.select().length != 0) {
         viewModel.set("selectedContact", $("#grid").data("kendoGrid").dataItem(grid.select()[0]));
         viewModel.goToContactsDetails();
     }     
 }

 function NewClicked() {
     alert('NEW CLICKED');
 }

 function RangeClicked() {
     alert('RANGES CLICKED');
 }

 function DeleteClicked() {
     viewModel.goToContactsListing();         
 }

 function RefreshClicked() {         
     viewModel.contactsSource.read();
 }

 function resizeObjects() {
     var gridElement = $("#grid");
     var dataArea = gridElement.find(".k-grid-content");

     var newGridHeight = $(document).height() - 92;
     var newDataAreaHeight = newGridHeight - 65;

     dataArea.height(newDataAreaHeight);
     gridElement.height(newGridHeight);

     $("#grid").data("kendoGrid").refresh();
 }

 $(window).resize(function () {
     resizeObjects();
 });

 var isShowingListing = true;
 function showContactDetails() {
    $("#grid").hide();
    $("#ContactsDetails").show();        
 }

 function showContactListing() {
    $("#ContactsDetails").hide();
    $("#grid").show();      
 }
</script> 
```

这不是我不知道如何将其分离到其他 JS 文件的问题。它应该是 JS 文件，目前我正在查看 Contacts_ViewModel（用于保存一般 JS 脚本）和 Contacts_Details_ViewModel（用于保存联系人详细信息 JS 脚本）。任何意见，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T19:53:19.563

您应该研究[Durandal](http://durandaljs.com/)或其他一些 MVVM [SPA 框架](http://en.wikipedia.org/wiki/Single-page_application)，它会使这一点更加清晰，因为所问的答案确实很长，因为您需要开始考虑 IOC、Requie.js 和 knockout.js.. ..

# java - 如何在java中创建一个通用的单例类？

> ID：11772362
> 
> 赞同：6
> 
> 时间：2012-08-02T06:47:00.917
> 
> 标签：java, generics

我想在 java 中创建一个通用的单例类，女巫给出了我传入方法参数的类的单例对象。类似下面的代码：请帮助

```
public final class Listener<T extends Object>  {
    private Listener() {
    }

    public static <T> Listener<?> getInstance(Class<T> clazz) {
        return SingletonHolder.INSTANCE;
    }

    private static class SingletonHolder {
        public static final Listener INSTANCE = new Listener();
        // private static final Map<Class<? extends Runnable>,Listener<? extends
        // Runnable> INSTANCE = new ...;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T06:50:20.790

只使用一个`enum`值`INSTANCE`或类似的值。即时单例。

如果我理解正确，我认为您希望您的单例实现一些通用接口？就像是：

```
interface ListenerInterface<T> {
    void handleEvent(T event);
} 
```

在这种情况下，您可以使用未经检查的强制转换以通用方式返回您的枚举作为单例。只要您的单例实际上不使用该实例（或者，只假设它是一个对象），这是安全的。

```
public enum MySingleton implements ListenerInterface<Object> {
    INSTANCE;

    @SuppressWarnings("unchecked")
    public static <T> ListenerInterface<T> getListener() {
        return (ListenerInterface<T>) INSTANCE;
    }

    public void handleEvent(Object event) {
        System.out.println("I am a singleton. An event happened: " + event);
    }

} 
```

如果接口是生产者而不是消费者——也就是说，它返回一个`T`——那么你只能`null`安全返回。否则，其他人在尝试使用他们的 Foo 时会收到 ClassCastException `T`，他们认为这是一个 Foo，但实际上只是一个 Object。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T07:05:10.107

这将是评论，但由于字符限制，我认为最好是一个答案，

稍微深入思考一下，真的有可能创建一个通用的单例类吗？

> 单例类不能被实例化，也不应该被克隆。

要给任何班级这种行为，你必须做出`all the constructors private and clone method will have to be overridden to throw an exception`. 现在，如果您要更改所有类以实现此行为，那么您创建单例的方式真的是通用的吗？

如果我错误地解释了这个问题，请原谅

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T07:34:29.350

你可以做这样的事情，但恕我直言不可靠：

```
public class SimpleSingleton {
private Map<String, Object> counter = new HashMap<String, Object>();

public <T> T getInstance(Class<T> clazz) throws IllegalAccessException, InstantiationException {
    T singleton = (T) counter.get(clazz.getName());
    if (singleton == null) {
        singleton = clazz.newInstance();
        counter.put(clazz.getName(), singleton);
    }
    return singleton;
} 
```

}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-28T12:01:37.127

我对这个问题的解决方案是这样设计的：

```
public interface IListener<T extends Object>  {
    void handle(T event);
}

public final class Listener implements IListener<Object> {
    private static Listener instance = new Listener();

    private Listener() {
    }

    public static Listener getInstance() {
        return instance;
    }

    @Override
    public void handle(Object event) {
        //TODO Do stuff
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T07:01:01.567

我不确定我是否完全理解您的问题，但是如果您想将单例集成到通用层次结构中，您必须作弊（就像我们在[本主题](https://stackoverflow.com/a/4213530/58956)中所做的那样）：

```
interface Listener<T>{
    // ...
}

@SuppressWarnings("unchecked")
final class SingletonListener {

    private SingletonListener() {
        assert false : "Uninstantiable";
    }

    public static <T> Listener<T> instance() {
        return SingletonListenerInstance.INSTANCE;
    }

    // Note - implements Listener without specifying type parameters!
    private enum SingletonListenerInstance implements Listener {
        INSTANCE;
        // Insert listener methods here
    }
}

// Usage:
Listener<Pony> ponyListener = SingletonListener.instance(); 
```

那么如果这个实现接收到 type 的参数`T`，或者期望返回 type 的（或相关的）值，它会做什么`T`呢？好吧，不多，但比没有更重要！这是一个带有示例实现的更充实的版本：

```
interface Listener<T> {
    void receive(T something);

    T process(T something);

    T produce();

    List<T> produceMany();
}

@SuppressWarnings("unchecked")
final class SingletonListener {

    private SingletonListener() {
        assert false : "Uninstantiable";
    }

    public static <T> Listener<T> instance() {
        return SingletonListenerInstance.INSTANCE;
    }

    // Note - implements Listener without specifying type parameters!
    private enum SingletonListenerInstance implements Listener {
        INSTANCE;
        // Insert listener methods here

        @Override
        public void receive(Object something) {
            // We can log what we receive because we know everything is an Object
            // and so has a toString method; we can also use other Object methods,
            // do reflection (or just ignore it and leave a no-op implementation)
            System.out.println("Received " + something);
        }

        @Override
        public Object process(Object something) {
            // We can return something we know to be of the right type, which in our
            // case typically is arguments we've received
            return something;
        }

        @Override
        public Object produce() {
            // Null is a valid value for all types
            return null;
        }

        @Override
        public List produceMany() {
            // Don't need any instances of the generic type to create an empty list
            return Collections.EMPTY_LIST;
        }
    }
} 
```

# php - 与 safari 和 firefox 相比，chrome 处理会话/cookie 的情况如何

> ID：11772366
> 
> 赞同：3
> 
> 时间：2012-08-02T06:47:13.943
> 
> 标签：php, session, google-chrome, browser, safari

在 chrome 上，我遇到以下问题：

*   使用用户名和密码登录，这会为用户名和登录会话创建一个 cookie。
*   查看主页（其中有一个脚本来检查登录会话）
*   登出
*   尝试查看主页。但是我被引导回到登录屏幕/主页。
*   刷新并尝试查看主页。启动回到登录屏幕。
*   浏览到任何其他站点。
*   返回`example.com/mainpage.php`，我现在可以查看它（使用以前的用户名）

问题是，很明显，当返回站点时，用户应该仍然被注销并且在他们登录之前无法查看 mainpage.php。

我对此感到非常困惑。一时兴起，我检查了在其他浏览器上是如何处理的。并且在 Safari、Firefox 或 IE 上不会出现此问题。他们正确地将用户踢回主页。

似乎 chrome 正在“暂停”会话而不是正确结束会话，然后在我导航回站点时重新启动会话。

相关脚本如下：

```
// log out script
session_start();
setcookie("username", "", time()-360000);
setcookie("token", "", time()-360000);
$_SESSION["Login"] = "no";

// The mainpage script
if ($_SESSION["Login"] != "YES")
  header("location: home.php"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:38:08.497

我找到了解决方案。我想我会在这里为任何仍然困惑的人记录下来。

不知何故（在我之外）通配符重定向没有压缩 www。和非 www。访问该网站时进入相同的（我使用 www. 为所有）。

结果由于某种原因，一些页面正在处理配音配音，而另一些则没有。离开站点并重新访问时尤其如此……注销在 www 版本中终止了会话，但随后返回到非配音版本，就像“哦仍在登录”

# php - CURL 未正确从站点获取数据

> ID：11772367
> 
> 赞同：1
> 
> 时间：2012-08-02T06:47:21.583
> 
> 标签：php, curl

我从一个站点获取数据`www.example.com`。数据在类似结构的表格中，并且还有一个分页。我正确获取第一页数据并获取下一页数据我在运行我的代码。`forloop`我知道总共没有页面将是3.我的代码如下：-

```
$url = "http://www.example.com/browseall";

$ch = curl_init();

curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch,CURLOPT_URL,$url);

$output = curl_exec($ch);

$html = new simple_html_dom();
$html->load_file($url);
foreach($html->find('div.full_listing_pager') as $pages)
{
    $page = $pages->children(2)->plaintext;
}
curl_close($ch);
$limit = $page+1;

echo "limit--->".$limit;

echo "<table border=1>";
echo "<tr>";
echo "<th>Listing Id </th>";
echo "<th>Free Km Allowed</th>";
echo "<th>Free Days allowed</th>";
echo "<th>Driver requirements</th>";
echo "<th>Owner comments</th>";
echo "</tr>";

for($i=1;$i<$limit+1;$i++) //$limit =3(no of pages)
{
    $url=urlencode('http://www.example.com.au/browseall?browse_filter[from_city]=0&browse_filter[to_city]=0&browse_filter[car]=0&browse_filter[by_date]=0&page='.$i);
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_URL, $url);

    $output = curl_exec($ch);

    foreach($html->find('table.full_listings_table tbody tr.more_info_second') as $div)
    {
        $str = "<tr>";

        $data = $div->find('td p b',0)->plaintext;
        $str .="<td>".$data."</td>";

        $data = $div->find('td div b',0)->plaintext;
        $str .="<td>".$data."</td>";

        $data = $div->find('td br b',0)->plaintext;
        $str .="<td>".$data."</td>";

        $data = $div->find('td div',0)->plaintext;
        $dataLen = strlen($data);
        $temp = "Driver requirements:";
        $tempLen = strlen($temp);
        $pos = strpos($data,$temp,0);

        $sum = $pos + $tempLen;
        $finalData = substr($data,$sum,$dataLen-$sum);

        $str .="<td>".$finalData."</td>"; 

        $data = $div->find('td div',2)->plaintext;
        $data = str_replace("Owner comments:"," ",$data);
        $str .="<td>".$data."</td>"; 

        echo $str."</tr>";
    }
}
echo "</table>";
curl_close($ch); 
```

问题是我获取第一页数据 3 次。我想要一个表中的所有 3 页数据。我的代码有问题吗？请帮助我，我是新手`cURL`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:20:43.340

上帝终于找到了解决办法……我写的真是个白痴

`$url=urlencode('http://www.example.com.au/browseall?browse_filter[from_city]=0&browse_filter[to_city]=0&browse_filter[car]=0&browse_filter[by_date]=0&page='.$i);`

不需要使用 urlencode。现在通过编写以下代码，我得到了我的解决方案：-

```
$url='http://www.example.com.au/browseall?browse_filter[from_city]=0&browse_filter[to_city]=0&browse_filter[car]=0&browse_filter[by_date]=0&page='.$i; 
```

# seo - PHP 包含的 html 内容会影响我的 seo 吗？

> ID：11772368
> 
> 赞同：2
> 
> 时间：2012-08-02T06:47:22.253
> 
> 标签：seo

今天我购买了一个小型 CMS 系统。有了这个 CMS，我可以将我的静态站点转换为可编辑的页面。我必须剪切我想要编辑的内容，并将其粘贴到管理区域。该脚本将使用此内容生成一个新的 html。比我必须将此 html 包含到原始内容所在的位置。

我需要一些关于 SEO 的建议。

我的网站上有很多文字，'因为我希望我的网站在搜索引擎中处于有利位置。

*   但是如果我删除我的文本并用包含替换它们，这将如何影响 SEO？（机器人读取我的源代码，或者在 php 包含我的文本内容之后读取我的源代码？）
*   我可以将新生成的 HTML 文件插入到我的 sitemap.xml 中吗？
*   我可以通过 htaccess 从我的 CMS 目录（该目录也包含生成的 html 文件）中排除机器人吗？

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T06:52:40.977

> 但是如果我删除我的文本并用包含替换它们，这将如何影响 SEO？（机器人读取我的源代码，或者在 php 包含我的文本内容之后读取我的源代码？）

根本不是，PHP 是服务器端，因此它输出的 HTML 将具有与您以前的 html 文件相同的 SEO 影响

> 我可以将新生成的 HTML 文件插入到我的 sitemap.xml 中吗？

是的

> 我可以通过 htaccess 从我的 CMS 目录（该目录也包含生成的 html 文件）中排除机器人吗？

是的，在您的 robots txt 文件中不允许他们访问该文件夹。也很可能您的 cms 受密码保护，因此机器人不应访问

# c++ - 通过构造函数初始化集初始化的变量的销毁顺序是什么？

> ID：11772370
> 
> 赞同：2
> 
> 时间：2012-08-02T06:47:27.207
> 
> 标签：c++

假设我有 A、B 和 C 类

如果我有容器如下

```
Container::Container()
:A(10),B(20),C(30)
{
   //Do something specific
} 
```

现在，如果我调用 Container 的析构函数，即 ~Container()，我注意到析构函数以相反的顺序被调用，即 ~C()、~B()，然后是 ~A()

这总是固定的顺序吗？任何人都可以更清楚地了解构造初始化集的析构函数的顺序吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T06:48:38.497

顺序是固定的，但不是由初始化列表决定的。

这是在类中声明成员的相反顺序。

```
class Container
{
   A a;
   B b;
   C c;
}; 
```

当一个`Container`对象被销毁时，成员被销毁的顺序是`c`,`b`和`a`。

如果您以不同于声明的顺序初始化成员，一些编译器会警告您，并且保持一致性是件好事。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-02T06:48:55.157

它们总是以与构造相反的顺序被破坏。构造顺序始终是声明顺序，与初始化列表中的顺序无关。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-02T06:50:10.447

成员（和非虚拟子对象）按照声明它们的顺序构造，并以相反的顺序销毁。初始化器列表中初始化器的顺序是无关的，但强烈建议相同，只是为了让你自己和你周围的每个人都保持清醒。

想象一下你有这个： `Foo(int n) : a(n), b(a) { }`. 这看起来不错，但如果`Foo::b`实际上是在 之前声明`Foo::a`的，这可能是未定义的行为（如果`b`的构造函数需要完整的类型）。为了防止这种情况，您应该始终启用并遵守相关的编译器警告。

# backbone.js - 如果 URL 不等于定义的路由，则 Backbonejs

> ID：11772372
> 
> 赞同：0
> 
> 时间：2012-08-02T06:47:54.317
> 
> 标签：backbone.js, routes

如果主干中的 URL 不等于我定义的路由，我该如何验证它？

前任。 `if (url !== certain route) { // do stuff here }`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:18:18.313

尝试将包罗万象的 splat 设置为路线中的最后一条路线

```
routes: {
  ...
  '*default' : 'default'
} 
```

然后

```
default: function(route) {
  // do stuff here
} 
```

希望这可以帮助

# mysql - 将属性文件实现为表

> ID：11772382
> 
> 赞同：1
> 
> 时间：2012-08-02T06:48:33.243
> 
> 标签：mysql, properties

我的 java 项目中有一个 .properties 文件。每次我运行项目时，这个文件都会更新。我想通过java代码在MySQL数据库中实现这个文件。

.properties 文件的结构如给定

> 2012 年 7 月 24 日星期二 16:08:40 IST
> 
> LogMode=0
> Theme=Nimbus
> ReadCommunity=public
> WriteCommunity=private
> sysLoc=
> sysDesc=
> Port=161
> LogPath=
> TrapCommunity=public
> sysCont=

请任何人提出更好的方法..

# javascript - 开放街道地图中的提名搜索

> ID：11772401
> 
> 赞同：1
> 
> 时间：2012-08-02T06:50:13.273
> 
> 标签：javascript, map, openstreetmap, nominatim

我在提名搜索方面需要帮助。我需要去某个城市最近的学校、银行、杂货店等。[我在http://wiki.openstreetmap.org/wiki/Nominatim/Special_Phrases/EN](http://wiki.openstreetmap.org/wiki/Nominatim/Special_Phrases/EN)中找到了关键字，但我不知道它如何使用，我试着给出[http://nominatim.openstreetmap.org/search ?q=grocery,bangalore&format=xml&polygon=1&addressdetails=1](http://nominatim.openstreetmap.org/search?q=grocery,bangalore&format=xml&polygon=1&addressdetails=1) ，但对于某些关键字没有结果。任何人都可以帮助我吗..？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T09:30:25.720

检查他们的[维基条目](http://wiki.openstreetmap.org/wiki/Nominatim/FAQ)

> **为什么我的搜索没有找到任何东西**
> 
> 没有找到结果的原因有很多：
> 
> 1.  目前 OSM 中没有符合您条件的数据。您期望匹配的数据可能存在某种缺陷。例如，如果您搜索“马萨诸塞州斯普林菲尔德”，如果州边界已被破坏并且不再包围斯普林菲尔德，则可能找不到。
> 2.  数据尚未编入索引，nominatim 通常至少落后 2 天。
> 3.  空间有显着差异（即placestrasse和place strasse）
> 4.  搜索查询有问题（即城市、街道、国家/地区）（注意：这似乎是一个常见的德国搜索查询，目前无法使用）
> 5.  搜索查询未使用正确的编码

原因似乎是没有符合您条件的数据

**更新**

特殊短语的使用方式如下。

为了找到印度的所有机场，

```
http://nominatim.openstreetmap.org/search?q=airports%20in%20india&format=xml 
```

结果是

```
<searchresults timestamp="Thu, 02 Aug 12 12:34:41 +0100" attribution="Data Copyright OpenStreetMap Contributors, Some Rights Reserved. CC-BY-SA 2.0." querystring="airports in india" polygon="false" exclude_place_ids="43175810,7784961,7751465,12009403,106962559,668626,49996185,7799105,12685353,107628126" more_url="http://nominatim.openstreetmap.org/search?format=xml&exclude_place_ids=43175810,7784961,7751465,12009403,106962559,668626,49996185,7799105,12685353,107628126&accept-language=en-US,en;q=0.8&q=airports+in+india">
<place place_id="43175810" osm_type="way" osm_id="34863658" place_rank="30" boundingbox="26.3935852050781,26.4172687530518,80.3976287841797,80.4333038330078" lat="26.4057076136426" lon="80.4137093712447" display_name="Greter Kailash Ave, Kanpur Cantonment, Unnao, Kanpur Nagar, Uttar Pradesh, India" class="aeroway" type="aerodrome"/>
<place place_id="7784961" osm_type="node" osm_id="747215270" place_rank="30" boundingbox="20.502386322021,20.52238822937,83.436968078613,83.456975708008" lat="20.5123864" lon="83.4469754" display_name="Nuagaon Airstrip, NH201, Balangir, Balangir, Orissa, India" class="aeroway" type="aerodrome"/>
<place place_id="7751465" osm_type="node" osm_id="747078022" place_rank="30" boundingbox="24.421943893433,24.441945800781,74.859438171387,74.879445800781" lat="24.4319457" lon="74.8694404" display_name="Nimach, NH 79, Chittaurgarh, Neemuch, Madhya Pradesh, India" class="aeroway" type="aerodrome"/>
<place place_id="12009403" osm_type="node" osm_id="1042045133" place_rank="30" boundingbox="18.217125167847,18.237127075195,74.578508605957,74.598516235352" lat="18.2271264" lon="74.5885098" display_name="Baramati Airport, Satara, India" class="aeroway" type="aerodrome"/>
<place place_id="106962559" osm_type="way" osm_id="119388136" place_rank="30" boundingbox="19.0674076080322,19.0793800354004,82.0245513916016,82.0459518432617" lat="19.0733705761589" lon="82.0349698897843" display_name="NH43, Jagdalpur, Bastar, Chhattisgarh, 494001, India" class="aeroway" type="aerodrome"/>
<place place_id="668626" osm_type="node" osm_id="245717090" place_rank="30" boundingbox="23.881885757446,23.901887664795,91.231897583008,91.251905212402" lat="23.8918874" lon="91.2419012" display_name="Agartala Singerbhil Airport, Agartala, West Tripura, Tripura, India" class="aeroway" type="aerodrome"/>
<place place_id="49996185" osm_type="way" osm_id="44280184" place_rank="30" boundingbox="22.7103366851807,22.7298049926758,75.7778625488281,75.8157043457031" lat="22.7203044430038" lon="75.8015038572736" display_name="NH59, Indore, Madhya Pradesh, India" class="aeroway" type="aerodrome"/>
<place place_id="7799105" osm_type="node" osm_id="747164669" place_rank="30" boundingbox="23.578140487671,23.59814239502,74.301943054199,74.321950683594" lat="23.5881413" lon="74.3119453" display_name="Banswara Airstrip, Talwara, Banswara, Banswara, Rajasthan, India" class="aeroway" type="aerodrome"/>
<place place_id="12685353" osm_type="node" osm_id="1126264804" place_rank="30" boundingbox="9.8254778289795,9.8454787826538,78.081613769531,78.101621398926" lat="9.8354784" lon="78.0916139" display_name="Madurai Airport, Madurai Ring Road, Madurai, Tamil Nadu, India" class="aeroway" type="aerodrome"/>
<place place_id="107628126" osm_type="way" osm_id="120223227" place_rank="30" boundingbox="25.4841022491455,25.4955101013184,78.5546188354492,78.5676498413086" lat="25.4899825689522" lon="78.5611975700734" display_name="NH75, Jhansi, Jhansi, Jhansi, Uttar Pradesh, 284001, India" class="aeroway" type="aerodrome"/>
</searchresults> 
```

同样，如果我想知道德里附近的机场（班加罗尔附近的机场没有数据），

```
http://nominatim.openstreetmap.org/search?q=airports%20near%20delhi&format=xml 
```

我得到所需的结果

```
<searchresults timestamp="Thu, 02 Aug 12 12:39:36 +0100" attribution="Data Copyright OpenStreetMap Contributors, Some Rights Reserved. CC-BY-SA 2.0." querystring="airports near delhi" polygon="false" exclude_place_ids="49967570,34283281,7655222,4065575" more_url="http://nominatim.openstreetmap.org/search?format=xml&exclude_place_ids=49967570,34283281,7655222,4065575&accept-language=en-US,en;q=0.8&q=airports+near+delhi">
<place place_id="49967570" osm_type="way" osm_id="44193643" place_rank="30" boundingbox="28.5804119110107,28.5891227722168,77.1994857788086,77.2125244140625" lat="28.5845082232308" lon="77.2063039751188" display_name="Brigadiar Hoshiar Singh Marg, Sarojini Nagar, New Delhi, South West Delhi, South Delhi, National Capital Territory of Delhi, 110067, India" class="aeroway" type="aerodrome"/>
<place place_id="34283281" osm_type="way" osm_id="22826678" place_rank="30" boundingbox="28.5350399017334,28.577335357666,77.0600891113281,77.133056640625" lat="28.5566876998427" lon="77.0963262062259" display_name="Indira Gandhi International, Old Delhi Gurgaon Road, Mahipalpur, Rangpuri, South West Delhi, National Capital Territory of Delhi, 110037, India" class="aeroway" type="aerodrome"/>
<place place_id="7655222" osm_type="node" osm_id="727371731" place_rank="30" boundingbox="28.542173614502,28.562175521851,77.085321655273,77.105329284668" lat="28.5521755" lon="77.0953223" display_name="Indira Gandhi International Airport, Old Delhi Gurgaon Road, Mahipalpur, Rangpuri, South West Delhi, National Capital Territory of Delhi, 110037, India" class="aeroway" type="aerodrome"/>
<place place_id="4065575" osm_type="node" osm_id="410403385" place_rank="30" boundingbox="28.574936141968,28.594938049316,77.196535339355,77.21654296875" lat="28.5849375" lon="77.206542" display_name="Safdarjung Airport, Brigadiar Hoshiar Singh Marg, Sarojini Nagar, New Delhi, South West Delhi, South Delhi, National Capital Territory of Delhi, 110067, India" class="aeroway" type="aerodrome"/>
</searchresults> 
```

您可以附加 &polygon=1 以获取多边形点，并附加 &addressdetail=1 以获取上述每个查询的基于地址的 xml。

# wso2 - 通过 ESB 提供数据服务器服务

> ID：11772402
> 
> 赞同：2
> 
> 时间：2012-08-02T06:50:16.623
> 
> 标签：wso2, wso2esb, esb, wso2dss

我创建了以下 WSO2 数据服务器服务。

```
 <?xml version="1.0" encoding="UTF-8"?>
   <data name="Codelists" serviceGroup="test group" serviceNamespace="********">  
      <description></description>  
      <config id="codelist-DS">    
         <property name="org.wso2.ws.dataservice.driver">com.mysql.jdbc.Driver</property>    
         <property name="org.wso2.ws.dataservice.protocol">jdbc:mysql://localhost:3306/codelists_db</property>    
         <property name="org.wso2.ws.dataservice.user">*****</property>    
         <property name="org.wso2.ws.dataservice.password">*****</property>  
      </config>  
      <query id="getCodeListsSQL" useConfig="codelist-DS">    
         <sql>SELECT CL, MASTER_CL, DESCR, EXTRA1, EXTRA2, EXTRA3, COMMENT FROM CODE_LIST</sql>    
         <result element="codelists" rowName="codelist">      
            <element column="CL" name="number" xsdType="xs:integer"/>      
            <element column="MASTER_CL" name="master-codelist" xsdType="xs:integer"/>      
            <element column="DESCR" name="description" xsdType="xs:string"/>      
            <element column="EXTRA1" name="extra1" xsdType="xs:string"/>      
            <element column="EXTRA2" name="extra2" xsdType="xs:string"/>      
            <element column="EXTRA3" name="extra3" xsdType="xs:string"/>      
            <element column="COMMENT" name="comment" xsdType="xs:string"/>      
            <call-query href="getCodeValueSQL">        
               <with-param column="CL" name="cl"/>      
            </call-query>    
         </result>  
      </query>  
      <query id="getCodeListSQL" useConfig="codelist-DS">    
         <sql>SELECT CL, MASTER_CL, DESCR, EXTRA1, EXTRA2, EXTRA3, COMMENT FROM CODE_LIST WHERE CL=:cl</sql>    
         <result element="codelists" rowName="codelist">      
            <element column="CL" name="number" xsdType="xs:integer"/>      
            <element column="MASTER_CL" name="master-codelist" xsdType="xs:integer"/>      
            <element column="DESCR" name="description" xsdType="xs:string"/>      
            <element column="EXTRA1" name="extra1" xsdType="xs:string"/>      
            <element column="EXTRA2" name="extra2" xsdType="xs:string"/>      
            <element column="EXTRA3" name="extra3" xsdType="xs:string"/>      
            <element column="COMMENT" name="comment" xsdType="xs:string"/>      
            <call-query href="getCodeValueSQL">        
               <with-param name="cl" query-param="cl"/>      
            </call-query>    
         </result>    
         <param name="cl" sqlType="STRING"/>  
      </query>  
      <query id="getCodeValueSQL" useConfig="codelist-DS">    
         <sql>SELECT ID, VALUE, CODE_LIST_NUM, MASTER_VALUE, DESCR, VALUE_ORDER, COMMENT, DISPLAY_TYPE, EXTRA1, EXTRA2, EXTRA3, VALID_FROM, VALID_TO, STATUS_CODE, DATA_SOURCE, LAST_MODIFIED FROM CODE_VALUE WHERE CODE_LIST_NUM=:cl</sql>    
         <result element="items" rowName="item">      
            <element column="ID" name="id" xsdType="xs:integer"/>      
            <element column="VALUE" name="value" xsdType="xs:string"/>      
            <element column="CODE_LIST_NUM" name="codelist-number" xsdType="xs:integer"/>      
            <element column="MASTER_VALUE" name="master-value" xsdType="xs:string"/>      
            <element column="DESCR" name="description" xsdType="xs:string"/>      
            <element column="VALUE_ORDER" name="value-order" xsdType="xs:integer"/>      
            <element column="COMMENT" name="comment" xsdType="xs:string"/>      
            <element column="DISPLAY_TYPE" name="display-type" xsdType="xs:integer"/>      
            <element column="EXTRA1" name="extra1" xsdType="xs:string"/>      
            <element column="EXTRA2" name="extra2" xsdType="xs:string"/>      
            <element column="EXTRA3" name="extra3" xsdType="xs:string"/>      
            <element column="VALID_FROM" name="valid-from" xsdType="xs:date"/>      
            <element column="VALID_TO" name="valid-to" xsdType="xs:date"/>      
            <element column="STATUS_CODE" name="status-code" xsdType="xs:string"/>      
            <element column="DATA_SOURCE" name="data-source" xsdType="xs:date"/>      
            <element column="LAST_MODIFIED" name="last-modified" xsdType="xs:dateTime"/>    
         </result>    
         <param name="cl" sqlType="INTEGER"/>  
      </query>  
      <resource method="GET" path="codelist/{cl}">    
         <call-query href="getCodeListSQL">      
            <with-param name="cl" query-param="cl"/>    
         </call-query>  
      </resource>  
      <resource method="GET" path="codelists">    
         <call-query href="getCodeListsSQL"/>  
      </resource>
   </data> 
```

我想通过 wso2 ESB 使用这个服务。但是我无法让它工作。我应该如何在 ESB 中公开服务以及我应该应用什么类型的安全性？你能给我一些参考指南吗？

我尝试了以下 ESB 配置：

```
<proxy name="Codelists" transports="https" startOnLoad="true" trace="disable">
    <target>
        <endpoint>
            <address uri="http://localhost:9446/services/Codelists"/>
        </endpoint>
        <outSequence>
            <send/>
        </outSequence>
    </target>
    <publishWSDL uri="https://localhost:9446/services/Codelists?wsdl"/>
    <policy key="conf:/repository/axis2/service-groups/Codelists/services/Codelists/policies/UTOverTransport"/>
    <enableSec/>
</proxy> 
```

但是，当我使用“TryIt”功能时，使用此配置，我会收到授权错误或以下情况：

```
 [2012-08-02 10:03:50,966]  WARN - ClientHandler I/O error : Connection reset by peer For : 127.0.0.1:9446 For Request : Axis2Request [Message ID : urn:uuid:57d99ccc-9dde-428b-bfdb-73f87276a491] [Status Completed : false] [Status SendingCompleted : true]
[2012-08-02 10:03:50,967]  WARN - EndpointContext Endpoint : endpoint_8196419801b8a9afd598ca65d60b30bbbe9d6abaf3e21ab2 will be marked SUSPENDED as it failed
[2012-08-02 10:03:50,967]  WARN - EndpointContext Suspending endpoint : endpoint_8196419801b8a9afd598ca65d60b30bbbe9d6abaf3e21ab2 - last suspend duration was : 30000ms and current suspend duration is : 30000ms - Next retry after : Thu Aug 02 10:04:20 EEST 2012 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T05:22:28.293

*   检查是否可以使用 dataservices tryit ui 尝试创建的数据服务。
*   如果是这样，您可以简单地创建一个直通代理（不启用安全性）并尝试通过 ESB 调用相同的服务。
*   如果您想将该代理服务公开为安全服务，您可以简单地启用安全性并从 16 个可用的安全方案中选择一个合适的安全方案。
*   Please refer [http://wso2.org/project/esb/java/4.0.3/docs/](http://wso2.org/project/esb/java/4.0.3/docs/) for more info

# .net - 在哪里知道/检查：Int32 继承自 ValueType，ValueType 继承自 Object？

> ID：11772404
> 
> 赞同：6
> 
> 时间：2012-08-02T06:50:24.113
> 
> 标签：.net, object, value-type, int32

我无法使用 .Net 反射器找到这些类型之间的关系。任何的想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T07:25:05.893

既然你说“使用 .Net 反射器”：

![在此处输入图像描述](../Images/040686896f426563992cd6626dec7e53.png)

如果你想要反思：

```
Type type = typeof (int);
while(type != null)
{
    Console.WriteLine(type.FullName);
    type = type.BaseType;
} 
```

这表明：

```
System.Int32
System.ValueType
System.Object 
```

如果你的意思是 IL：

```
.class public sequential ansi serializable sealed beforefieldinit Int32
    extends System.ValueType 
```

和：

```
.class public abstract auto ansi serializable beforefieldinit ValueType
    extends System.Object 
```

（在反射器中，选择类型的节点，并选择IL作为视图）

如果您的意思是 C# 视图，那么：

```
public struct Int32 ... 
```

足够; `struct`关键字的**意思是**：继承自`ValueType`（虽然不是通常的 C#`class`方式）。`ValueType`仍然是一个普通班级，并且有：

```
public abstract class ValueType ... 
```

和往常一样，`class`没有指定基本类型的 a 意味着：继承自`object`.

# css - 如何更改在sencha touch中选择的Tabbar iconcls对应的Tabbar项目

> ID：11772406
> 
> 赞同：0
> 
> 时间：2012-08-02T06:50:36.937
> 
> 标签：css, html, sencha-touch, sencha-touch-2

我已经使用 sencha touch2 完成了应用程序。在标签栏中，我想向用户显示，**一旦我从标签栏中选择项目，则需要将普通图像更改为选定图像。**现在我正在通过 sass 样式进行操作。普通图像很好，但是当我选择/激活项目时。它不会将普通图标更改为选定图标。我去了一些我已经应用的文章，它对我不起作用。下面我给出了代码。谁能告诉我如何实现这一目标。

**查看页面代码：**

```
config: {
tabBarPosition: 'bottom',
items: [{      
        iconCls: 'ApartmentIcon',
        autoDestroy:true,
        layout:{
            type:'vbox',
            pack:'center'
        },
        scrollable: true,       
        fullscreen:true,
            items: [
                     {
                      //Some items
                     }
                  ]
       }
   ]
} 
```

**CSS代码：我走了以下四种方式，但是一旦我选择图像就不会改变。**

```
.ApartmentIcon{
  @include image-tabIcon('data:image/png;base64,NormalimageBase64code....=',70px,90px);
}

ApartmentIcon.x-button-pressing{
  @include image-tabIcon('data:image/png;base64,SelectedimageBase64code....=',70px,90px);
}
.ApartmentIcon.x-tab-active{
  @include image-tabIcon('data:image/png;base64,SelectedimageBase64code....=',70px,90px);
}
.ApartmentIcon.selected{
  @include image-tabIcon('data:image/png;base64,SelectedimageBase64code....=',70px,90px);
}
.x-tabbar-dark.x-docked-bottom .x-tab-active:first-child{
  @include image-tabIcon('data:image/png;base64,SelectedimageBase64code....=',70px,90px);
} 
```

# iphone - iOS RestKit 身份验证

> ID：11772407
> 
> 赞同：1
> 
> 时间：2012-08-02T06:50:44.237
> 
> 标签：iphone, ios, restkit

我对 iOS 开发非常陌生。这是我的第一个应用程序，我遇到了大麻烦。我不知道如何从 RestKit 开始。自过去 3 周以来，我一直在尝试在我的 iOS 应用程序中实施 RestKit 身份验证。我环顾四周寻找了许多解决方案，但每个人都给出了不同的方法，因此无法提取对我有用的方法。

我已经准备好在我的 Android 应用程序中使用的 Web 服务。现在我想为 iOS 使用相同的 Web 服务。

因此，对于身份验证，我有一个以**用户名和密码**为参数的**登录服务。**它**返回一个布尔**值（不是 JSON 或 XML，而是简单的 true 或 false）。所以我没有找到任何关于如何处理来自网络服务器的布尔类型响应的解决方案。

 ****如果有人可以帮我解决这个问题。如果有人实施了类似的行为，那么请帮助我了解如何从休息套件开始。即如何发送请求以及如何访问服务器发送的响应。

我提供了一段我试图实现的代码。

```
RKURL * baseUrl = [RKURL URLWithBaseURLString:@"https://webserver.org/login"];

RKObjectManager * objectManager = [RKObjectManager objectManagerWithBaseURL:baseUrl];

objectManager.client.username = txtUserName.text;
objectManager.client.password = txtPassword.text;
objectManager.client.authenticationType = RKRequestAuthenticationTypeHTTPBasic;
objectManager.client.disableCertificateValidation = YES;

[objectManager loadObjectsAtResourcePath:[NSString stringWithFormat:@"%@?%@", [baseUrl      resourcePath], nil] delegate:self]; 
```

在此先感谢，任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:15:31.687

如果您的后端不返回对象（xml 或 json），则没有必要使用 `RKObjectManager`. `RKClient`相反，请尝试使用's`get:queryParameters:delegate:`选择器直接发送请求，与`RKObjectManager`.

此外，您说您的 WS 将用户名和密码作为输入 - 如果您`RKClient`在凭据上设置用户名和密码属性，则将用于基本 HTTP 身份验证。字典应该包含您的 Web 服务的`queryParameters`任何输入参数。

*例子：*

```
[[RKClient sharedClient] get:myResource queryParameters:params delegate:self]; 
```

一定要实现委托

```
- (void)request:(RKRequest *)request didLoadResponse:(RKResponse *)response 
```

有关更多详细信息，请参阅[文档](http://restkit.org/api/master/Classes/RKClient.html#task_Sending%20Asynchronous%20Requests)。****

# android - Android ACTION_VIEW，如何在横向模式下打开原生播放器？

> ID：11772416
> 
> 赞同：0
> 
> 时间：2012-08-02T06:51:49.667
> 
> 标签：android, android-intent, actionview

在我的应用程序中，有一个网络视图，用户可以点击视频网址。原生播放器排在首位，用户可以观看视频。但是，它始终以 PORTRAIT 模式打开。我希望视频以横向模式开始。我怎样才能做到这一点？

```
if(url.endsWith(".mp4")) {
                Intent intent = new Intent(Intent.ACTION_VIEW); 
                intent.setDataAndType(Uri.parse(url), "video/*");
                view.getContext().startActivity(intent);  
                return true;
            } else { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:31:49.830

我开始一个新的活动，它在清单中设置为景观。

```
Intent intent= getIntent();
String uriString = intent.getExtras().getString("videouri");
VideoView video = (VideoView)findViewById(R.id.video);
video.setVideoURI(Uri.parse(uriString));

video.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {

        public void onCompletion(MediaPlayer mp) {
            finish();

        }
    }); 
```

# iphone - UIButton 的弹出窗口在设备上非常慢

> ID：11772420
> 
> 赞同：1
> 
> 时间：2012-08-02T06:52:21.740
> 
> 标签：iphone, ios, ipad, uibutton, uipopovercontroller

设想：

UIScrollView 有一个 UIButton。点击 UIButton 会导致 UIPopoverController 从指定的矩形呈现自己。UIPopoverController 的 contentViewController 是一个带有 UIDatePicker 的 UIViewController。

点击按钮时触发的代码（按钮是自定义类型，在点击内注册了修饰）：

```
- (void)showCalendar:(id)sender {
    dateViewController = [[UIViewController alloc] init];

    datePicker = [[UIDatePicker alloc] initWithFrame:CGRectMake(0, 0, 240, 200)];
    datePicker.datePickerMode = UIDatePickerModeDate;
    datePicker.hidden = NO;
    datePicker.date = [NSDate date];

    [datePicker addTarget:self
                   action:@selector(DateChanged:)
         forControlEvents:UIControlEventValueChanged];

    NSLocale *US = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US"];
    NSCalendar *cal = [NSCalendar currentCalendar];
    [cal setLocale:US];
    [datePicker setCalendar:cal];
    [datePicker setMaximumDate:[NSDate date]];

    dateViewController.view = datePicker;

    dateViewController.contentSizeForViewInPopover = CGSizeMake(240, 200);
    self.popoverController = [[UIPopoverController alloc] 
                               initWithContentViewController:dateViewController];
    self.popoverController.delegate = self;

    NSLog(@"YESYESYES");

        [self.popoverController presentPopoverFromRect:CGRectMake(753, 513, 1, 1) inView:parentView permittedArrowDirections:UIPopoverArrowDirectionDown animated:YES];

    NSLog(@"NONONO");

} 
```

当我将设备连接到 Xcode 并运行应用程序时，两个 NSLog 语句之间存在明显的 1 秒或更长时间的延迟。这种滞后的原因可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:35:47.107

通过更换解决了问题

```
dateViewController.view = datePicker; 
```

和

```
[dateViewController.view addSubview:datePicker]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T06:59:52.283

您在哪个队列中运行此方法？

要在主队列中运行它，试试这个。如果您没有使用 Interface Builder，请将 IB 代码替换为适当的代码。

```
- (void)showCalendar:(id)sender {

    // your setup code here... then:

    dispatch_sync(dispatch_get_main_queue(), ^{
        NSLog(@"YESYESYES");
        [self.popoverController presentPopoverFromRect:CGRectMake(753, 513, 1, 1) inView:parentView permittedArrowDirections:UIPopoverArrowDirectionDown animated:YES];
        NSLog(@"NONONO");
    });
} 
```

# jquery - 使用 jquery ajax 重新加载 div 内容

> ID：11772430
> 
> 赞同：0
> 
> 时间：2012-08-02T06:52:56.127
> 
> 标签：jquery, ajax

这是我正在使用的代码：

```
 $('.label').load('page.php?id='+pageid); 
```

我希望能够仅使用 class="label" 刷新 div。我使用加载它可以工作，但将整个页面内容放在该 div 中。我如何只重新加载那部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:59:11.050

你应该让 ajax 响应只是你想要的部分，如果它返回整个页面，为什么不刷新页面。虽然`.load`支持选择带有后缀选择器表达式的响应部分。

# jquery - 流星jQuery动画

> ID：11772432
> 
> 赞同：0
> 
> 时间：2012-08-02T06:53:02.723
> 
> 标签：jquery

```
$('#sstar').animate({'opacity':1}, 300);
$('#sstar').animate({
        'backgroundPosition':'0px 0px','top':'30%', 'opacity':0
    }, 500); 
```

css

```
#sstar 
{
    position:absolute;
    left:2px;
    top:10;
    width:126px;
    height:80px;
    background:transparent url(../images/shootingstar.png) no-repeat 80px -200px;
    z-index:99999;
    opacity:0;
    filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0);
} 
```

动画运行很慢？如何像流星一样显示它？

或者举一个例子来展示一个使用 jquery 的流星。

输出应该是这样的

[关联](http://www.istockphoto.com/stock-flash-1263712-shooting-star-over-city.php?st=b698399)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:13:30.883

最接近的事情是这样的。

HTML：

```
<div id="Background">
    <img src="http://www.com-geo.org/conferences/2011/images/presentations/deco/star_orange_20.png" id="Star" />
</div>​ 
```

CSS：

```
#Background {
    position: relative;
    background-image:url(http://nightsky.org.uk/night_sky_pics/night_sky_1.jpg);
    width: 400px;
    height: 309px;
}

#Star {
    position: absolute;
    right: 20px;
    top: 20px;
}
​ 
```

jQuery 代码很简单：

```
$('#Star').animate({"right": "360px", "top": "150px"}, 1500);​ 
```

[现场测试用例](http://jsfiddle.net/nkXZJ/1/)。

这是在容器内使用图像标签并为容器内的图像位置设置动画。

# iphone - libsystem_c.dylib 中的内存泄漏

> ID：11772434
> 
> 赞同：1
> 
> 时间：2012-08-02T06:53:18.637
> 
> 标签：iphone, objective-c, memory-leaks, instruments

我在我的应用程序中发现了内存泄漏，这是一个 ARC 转换的应用程序。

仪器显示泄漏责任库是**libsystem_c.dylib**

我在这里附上屏幕截图..

我已经搜索了这个问题，我发现了相关的帖子

[Instruments-show-leak-in-main-m-xcode-4-3-1](https://stackoverflow.com/questions/9757956/instruments-show-leak-in-main-m-xcode-4-3-1)

[obj-c-memory-leak-of-malloc-48-bytes-in-strdup-framework](https://stackoverflow.com/questions/9880336/obj-c-memory-leak-of-malloc-48-bytes-in-strdup-frame)

它是 iOS 5.1 框架中的错误吗？

对此的任何帮助表示赞赏。

![在此处输入图像描述](../Images/00325c2a7c600c2edb85604d18003563.png)

![在此处输入图像描述](../Images/e8227134ee7dde0397d4323191a251d6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:00:12.813

编辑：

实际上，iOS SDK 5.1 strdup（或相关）中似乎存在一些错误之王。[请参阅开发者论坛](https://devforums.apple.com/message/630695)中的此线程。

如果您可以深入研究 Elements 示例（据说可以揭示该错误）并查看您是否使用相同类型的功能，那将会很有趣。

这是泄漏时的堆栈跟踪：

```
 0 libsystem_c.dylib malloc
 1 libsystem_c.dylib strdup
 2 libnotify.dylib token_table_add
 3 libnotify.dylib notify_register_mach_port
 4 libnotify.dylib notify_register_dispatch
 5 CoreFoundation _CFXNotificationRegisterObserver
 6 CoreFoundation CFNotificationCenterAddObserver
 7 UIKit -[UIScrollView(Static) _startTimer:]
 8 UIKit -[UIScrollView _endPanWithEvent:]
 9 UIKit -[UIScrollView handlePan:]
10 UIKit _UIGestureRecognizerSendActions
11 UIKit -[UIGestureRecognizer _updateGestureWithEvent:]
12 UIKit ___UIGestureRecognizerUpdate_block_invoke_0541
13 UIKit _UIGestureRecognizerApplyBlocksToArray
14 UIKit _UIGestureRecognizerUpdate
15 UIKit _UIGestureRecognizerUpdateGesturesFromSendEvent
16 UIKit -[UIWindow _sendGesturesForEvent:]
17 UIKit -[UIWindow sendEvent:]
18 UIKit -[UIApplication sendEvent:]
19 UIKit _UIApplicationHandleEvent
20 GraphicsServices PurpleEventCallback
21 CoreFoundation __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__
22 CoreFoundation __CFRunLoopDoSources0
23 CoreFoundation __CFRunLoopRun
24 CoreFoundation CFRunLoopRunSpecific
25 CoreFoundation CFRunLoopRunInMode
26 GraphicsServices GSEventRunModal
27 UIKit UIApplicationMain
28 TheElements 0x300a
29 TheElements 0x2fc3 
```

您可以通过在 Instruments View 菜单中选择“Show Extended Detail”（或类似的东西）来获取泄漏时的堆栈跟踪。

旧答案：

我怀疑不是。

事实上， Instruments 向您展示的“责任库”是实际`malloc`调用被有效执行的地方。

如果您查看 Instruments 的输出，罪魁祸首是`strdup`：不可能有泄漏`strdup`。

您更有可能要求操作系统（直接或间接）复制某些字符串，但随后错误地管理了字符串的结果副本。

分析 Instruments 为您提供的扩展详细信息视图，其中显示了调用时的调用堆栈`malloc`。如果您的代码和调用本身之间存在直接关系，这*可能会有所帮助。*`malloc`但是即使详细视图没有显示这种关系，也要继续寻找代码中泄漏的原因。

更一般地说，当发现泄漏时，尝试了解您的应用程序的哪个部分正在运行（考虑到泄漏是在离散时间分析的事实，例如每 10 秒，所以当您看到红色条出现时，这意味着泄漏是在最后 10 秒内产生的），并查看您在相关类中执行的所有内存操作。

根据我的经验，Instruments 将 SDK 的某些部分显示为对泄漏“负责”是很正常的（100% 的情况），但在更深入的分析中，错误的代码是我的一部分。

# websphere - 有没有一种方法可以确定是否在 jython shell/脚本中使用 conntype=NONE 调用了 wsadmin？

> ID：11772436
> 
> 赞同：0
> 
> 时间：2012-08-02T06:53:30.710
> 
> 标签：websphere, jython, wsadmin

我正在使用 wsadmin.sh 调用自定义脚本来获取一些服务器信息。我正在连接到独立服务器（未集群）。

在获取服务器信息时，我还需要服务器状态。如果服务器已启动，我没有问题，但如果没有，则在连接到它时会引发异常。所以我使用**了 -conntype=NONE**，因此它打开了一个加载配置的 wsadmin shell（不连接到任何服务器进程），从而不允许我获取服务器状态。

我的要求是能够动态获取连接类型

```
com.ibm.ws.scripting.connectionType 
```

这是在调用 wsadmin.sh 期间传递的。

例如：

```
/opt/WS70/AppServer/profiles/standaloneprofile2/bin/wsadmin.sh -lang jython -conntype none -f /somescriptlocation/PoC/AdminInformation.py standingserver 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:24:13.807

AdminControl.getType() 返回连接类型。但是，根据我的经验，对于 CONNTYPE=NONE，您不会收到“NONE”作为响应，而是会收到 ScriptingException。

那么，以下代码应该会有所帮助：

```
from com.ibm.ws.scripting import ScriptingException;

...
...

try:
    ct = AdminControl.getType();
except ScriptingException:
    ct = 'NONE'; 
```

# php - 我无法使用 Zend_Acl 使导航正常工作

> ID：11772439
> 
> 赞同：0
> 
> 时间：2012-08-02T06:53:34.973
> 
> 标签：php, zend-framework, navigation, zend-acl

我不知道是什么问题，但是我尝试设置的导航菜单没有正确显示..

所有包含标签 <resource> 的导航页面都没有针对所有类型的用户类型（管理员、访客和成员）显示，知道为什么我会遇到这个问题吗？

这是我的 navigation.xml 文件的一部分：

```
<nav>
    <home>
        <label>Acceuil</label>
        <controller>index</controller>
        <action>index</action>
    </home>

    <contact>
        <label>Contact</label>
        <controller>index</controller>
        <action>contact</action>
        <resource>index</resource>
    </contact>

    <Categories>
        <label>Categories</label>
        <controller>index</controller>
        <action>categories</action>
    </Categories>

    <administration>
        <label>Administration</label>
        <controller>admin</controller>
        <action>index</action>
        <resource>admin</resource>
        <pages>
                <societes>
                    <label>Societes</label>
                    <controller>admin</controller>
                    <action>societes</action>
                    <resource>admin</resource>
                </societes>
        </pages>
    </administration>
</nav> 
```

，我在 Bootstrap 中的 _initAcl ：

```
$acl = new Zend_Acl();
    // add the roles
    $acl->addRole(new Zend_Acl_Role('guest'));
    $acl->addRole(new Zend_Acl_Role('user'), 'guest');
    $acl->addRole(new Zend_Acl_Role('admin'), 'user');

    // add the resources I have only two controller + Error
    $acl->add(new Zend_Acl_Resource('index'));
    $acl->add(new Zend_Acl_Resource('admin'));
    $acl->add(new Zend_Acl_Resource('error'));

    // set up the access rules
    $acl->allow(null, array('error'));
    // a guest can only read content and login
    $acl->allow('guest', 'index', array('contact', 'index', 'login', 'categories'));
    // users can also work with content
    $acl->allow('user', 'index', array('signaler', 'logout'));
    $acl->deny('user', 'index', array('inscription', 'login'));
    // administrators can do anything
    $acl->allow('admin', 'admin', array('index', 'categories', 'ajout-categorie', 'modifier-categorie', 'supprimer-categorie'));
    $acl->deny('admin', 'index', array('contact'));

    Zend_Registry::set('acl', $acl); 
```

，我在 Bootstrap 中的 _initNavigation() ：

```
protected function _initNavigation(){

    $this->bootstrap('layout');
    $layout = $this->getResource('layout');
    $view = $layout->getView();
    $config = new Zend_Config_Xml(APPLICATION_PATH . '/configs/navigation.xml', 'nav');
    $container = new Zend_Navigation($config);

    $acl = Zend_Registry::get('acl');
    $auth = Zend_Auth::getInstance();

    if($auth->hasIdentity()) {
        $identity = $auth->getIdentity();
        $role = strtolower($identity->role);
    }else{
        $role = 'guest';
    }
    echo $role;
    $view->navigation($container)->setAcl($acl)->setRole($role);
} 
```

还有我的 Acl 类：Application_Plugin_Acl

```
public function preDispatch(Zend_Controller_Request_Abstract $request){

    $this->acl = Zend_Registry::get('acl');
    // fetch the current user

    $auth = Zend_Auth::getInstance();

    if($auth->hasIdentity()) {
        $identity = $auth->getIdentity();
        $role = strtolower($identity->role);
    }else{
        $role = 'guest';
    }
    $controller = $request->controller;
    $action = $request->action;
    if (!$this->acl->isAllowed($role, $controller, $action)) {
        if ($role === 'guest') {
            $request->setControllerName('index');
            $request->setActionName('login');
        } else {
            $request->setControllerName('error');
            $request->setActionName('noauth');
        }
    }
} 
```

我的 application.ini 中也有这个：指向 Acl 类

```
resources.frontController.plugins.acl = Application_Plugin_Acl 
```

对不起，如果问题太长，但我在 Stack Overflow 上尝试了所有解决方案，但没有任何工作正常，并且

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T23:24:15.673

我使用的允许和拒绝方法是错误的：

```
$this->allow('guest', 'index');
$this->deny('guest', array('signaler','logout'));

// cms users can also work with content
$this->allow('user', 'index');
$this->deny('user',array('inscription','login'));
// administrators can do anything
$this->allow('admin', 'admin');

$this->deny('admin','index',array('contact','about')); 
```

# iphone - UITableView 换帧动画问题

> ID：11772441
> 
> 赞同：5
> 
> 时间：2012-08-02T06:53:39.573
> 
> 标签：iphone, objective-c, ios, uitableview

我已经用谷歌搜索了很多关于这个问题，但似乎没有答案。所以我希望你们中的一些人可能知道如何处理这个问题。我有一个具有 tableview 的视图控制器，当我用动画更改视图框架时，一切都很顺利，除了一种特殊情况，当 tableview 的项目超过它可以适应屏幕时，并且只有当 tableview 滚动到底部时。然后，如果我缩小视图高度，我的视图会正确设置动画，但 tableview 会以某种方式向上跳跃，然后才会动画到底部。

如果我缩小视图，但 tableview 没有滚动到底部（即使我可以看到最后一个单元格，也可以说是它的一半多一点），它的动画效果确实正确。

我已经尝试了几件事，比如打开和关闭自动调整蒙版以及从当前状态设置动画或类似的东西，但这没有帮助：/

那么有什么建议可能是什么问题？

**编辑：**

我用来改变框架的代码

```
[UIView animateWithDuration:0.5
                          delay:0.0
                        options: UIViewAnimationCurveEaseOut
                     animations:^{

                         [_contView setFrame:CGRectMake(0, 0, 320, 420)];
                     } 
                     completion:^(BOOL finished){

                     }]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T05:45:27.127

我与同样的错误斗争了一段时间，然后才意识到我一生都无法弄清楚它为什么会发生……直到我找到了一个非常详细的解释和解决方案。

完整的文章可以在这里找到：http: [//lists.apple.com/archives/cocoa-dev/2012/Apr/msg00341.html](http://lists.apple.com/archives/cocoa-dev/2012/Apr/msg00341.html)

快速解决方案是更改 contentInset 而不是表格视图框架。只需将您正在显示的任何内容（即键盘或广告横幅视图）的高度添加到 contentInset.bottom 属性。滚动区域将增加以适应所需的调整大小。

在此示例中，我在 tableview 顶部显示了一个广告横幅视图：

```
UIEdgeInsets insets = myTable.contentInset;
insets.bottom += 50;   // 50px is the height of the ad banner view
myTable.contentInset = insets; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T15:16:40.493

I used to have a similar problem and I implemented this workaround (Disclaimer: this is a hack to a currently-unresolved iOS bug):

```
// check if the table view is scrolled to the bottom
if (tableView.contentOffset.y + tableView.frame.size.height == tableView.contentSize.height) {
    // if it is, shift the table view contents up one pixel
    [tableView setContentOffset:CGPointMake(tableView.contentOffset.x, tableView.contentOffset.y - 1) animated:NO];
}

// call the animation block afterwards here 
```

It's a hack, though not noticeable to the user since it's just a 1 pixel motion. UITableView has a few bugs (reported to Apple already, but not yet resolved) when it comes to animations from a scrolled-to-bottom position.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T06:04:11.003

您应该使用 xcode 右侧的 xib 自动调整大小...我认为这可能会对您有所帮助。![在此处输入图像描述](../Images/a9468df4385e79a37cb57dd843c9235b.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-24T09:49:51.600

尝试将页脚视图添加到高度非零的表格中。

# java - Working with a fake list class

> ID：11772446
> 
> 赞同：3
> 
> 时间：2012-08-02T06:54:07.123
> 
> 标签：java, list

I'm doing some homework problems, and I'm getting stumped on a couple. I'm having a hard time understanding the best methods to swap data in a list.

I'm supposed to make the method reverse() and it uses the LinkedIntList class (below). It's a limited list class, so I can only use what's there.

The point is to take a list of items

[1, 2, 3, 4, 5] and reverse them [5, 4, 3, 2, 1]

I thought my pseudo code would be

take the first piece of data and append it to the list. loop over the original size(since that changes) and take out the piece at 0 then add the current piece at 0, 1 position behind the end.

for an input like this: [1, 8, 19, 4, 17]
expected is this: front -> [17] -> [4] -> [19] -> [8] -> [1] /
my code gets this: front -> [19] -> [4] -> [17] -> [8] -> [19] -> [1] /

Not sure what I'm doing wrong.

```
public void reverse(){
    int x = this.size();
    this.add(front.data);

    for (int i = 0; i < x; i++){
                this.remove(0);
        this.add(this.size()-1, front.data);
    }
}

// A LinkedIntList object can be used to store a list of integers.
public class LinkedIntList {
    private ListNode front;   // node holding first value in list (null if empty)
    private String name = "front";   // string to print for front of list

    // Constructs an empty list.
    public LinkedIntList() {
        front = null;
    }

    // Constructs a list containing the given elements.
    // For quick initialization via Practice-It test cases.
    public LinkedIntList(int... elements) {
        this("front", elements);
    }

    public LinkedIntList(String name, int... elements) {
        this.name = name;
        if (elements.length > 0) {
            front = new ListNode(elements[0]);
            ListNode current = front;
            for (int i = 1; i < elements.length; i++) {
                current.next = new ListNode(elements[i]);
                current = current.next;
            }
        }
    }

    // Constructs a list containing the given front node.
    // For quick initialization via Practice-It ListNode test cases.
    private LinkedIntList(String name, ListNode front) {
        this.name  = name;
        this.front = front;
    }

    // Appends the given value to the end of the list.
    public void add(int value) {
        if (front == null) {
            front = new ListNode(value, front);
        } else {
            ListNode current = front;
            while (current.next != null) {
                current = current.next;
            } 
            current.next = new ListNode(value);
        }
    }

    // Inserts the given value at the given index in the list.
    // Precondition: 0 <= index <= size
    public void add(int index, int value) {
        if (index == 0) {
            front = new ListNode(value, front);
        } else {
            ListNode current = front;
            for (int i = 0; i < index - 1; i++) {
                current = current.next;
            } 
            current.next = new ListNode(value, current.next);
        }
    }

    public boolean equals(Object o) {
        if (o instanceof LinkedIntList) {
            LinkedIntList other = (LinkedIntList) o;
            return toString().equals(other.toString());   // hackish
        } else {
            return false;
        }
    }

    // Returns the integer at the given index in the list.
    // Precondition: 0 <= index < size
    public int get(int index) {
        ListNode current = front;
        for (int i = 0; i < index; i++) {
            current = current.next;
        }
        return current.data;
    }

    // Removes the value at the given index from the list.
    // Precondition: 0 <= index < size
    public void remove(int index) {
        if (index == 0) {
            front = front.next;
        } else {
            ListNode current = front;
            for (int i = 0; i < index - 1; i++) {
                current = current.next;
            }
            current.next = current.next.next;
        }
    }

    // Returns the number of elements in the list.
    public int size() {
        int count = 0;
        ListNode current = front;
        while (current != null) {
            count++;
            current = current.next;
        }
        return count;
    }

    // Returns a text representation of the list, giving
    // indications as to the nodes and link structure of the list.
    // Detects student bugs where the student has inserted a cycle
    // into the list.
    public String toFormattedString() {
        ListNode.clearCycleData();

        String result = this.name;

        ListNode current = front;
        boolean cycle = false;
        while (current != null) {
            result += " -> [" + current.data + "]";
            if (current.cycle) {
                result += " (cycle!)";
                cycle = true;
                break;
            }
            current = current.__gotoNext();
        }

        if (!cycle) {
            result += " /";
        }

        return result;
    }

    // Returns a text representation of the list.
    public String toString() {
        return toFormattedString();
    }

    // Returns a shorter, more "java.util.LinkedList"-like text representation of the list.
    public String toStringShort() {
        ListNode.clearCycleData();

        String result = "[";

        ListNode current = front;
        boolean cycle = false;
        while (current != null) {
            if (result.length() > 1) {
                result += ", ";
            }
            result += current.data;
            if (current.cycle) {
                result += " (cycle!)";
                cycle = true;
                break;
            }
            current = current.__gotoNext();
        }

        if (!cycle) {
            result += "]";
        }

        return result;
    }

    // ListNode is a class for storing a single node of a linked list.  This
    // node class is for a list of integer values.
    // Most of the icky code is related to the task of figuring out
    // if the student has accidentally created a cycle by pointing a later part of the list back to an earlier part.

    public static class ListNode {
        private static final List<ListNode> ALL_NODES = new ArrayList<ListNode>();

        public static void clearCycleData() {
            for (ListNode node : ALL_NODES) {
                node.visited = false;
                node.cycle = false;
            }
        }

        public int data;          // data stored in this node
        public ListNode next;     // link to next node in the list
        public boolean visited;   // has this node been seen yet?
        public boolean cycle;     // is there a cycle at this node?

        // post: constructs a node with data 0 and null link
        public ListNode() {
            this(0, null);
        }

        // post: constructs a node with given data and null link
        public ListNode(int data) {
            this(data, null);
        }

        // post: constructs a node with given data and given link
        public ListNode(int data, ListNode next) {
            ALL_NODES.add(this);
            this.data = data;
            this.next = next;
            this.visited = false;
            this.cycle = false;
        }

        public ListNode __gotoNext() {
            return __gotoNext(true);
        }

        public ListNode __gotoNext(boolean checkForCycle) {
            if (checkForCycle) {
                visited = true;

                if (next != null) {
                    if (next.visited) {
                        // throw new IllegalStateException("cycle detected in list");
                        next.cycle = true;
                    }
                    next.visited = true;
                }
            }
            return next;
        }
    }

// YOUR CODE GOES HERE

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T07:32:13.910

这是带有打印语句的代码：

```
public void reverse() {
  System.out.println(toFormattedString());

  int x = this.size();
  this.add(front.data);
  System.out.println(toFormattedString());

  for (int i = 0; i < x; i++) {
    this.remove(0);
    System.out.println(toFormattedString());
    this.add(this.size() - 1, front.data);
    System.out.println(toFormattedString());
  }
} 
```

输出：

```
front -> [1] -> [2] -> [3] -> [4] -> [5] /
front -> [1] -> [2] -> [3] -> [4] -> [5] -> [1] /
front -> [2] -> [3] -> [4] -> [5] -> [1] /
front -> [2] -> [3] -> [4] -> [5] -> [2] -> [1] /
front -> [3] -> [4] -> [5] -> [2] -> [1] /
front -> [3] -> [4] -> [5] -> [2] -> [3] -> [1] /
front -> [4] -> [5] -> [2] -> [3] -> [1] /
front -> [4] -> [5] -> [2] -> [3] -> [4] -> [1] /
front -> [5] -> [2] -> [3] -> [4] -> [1] /
front -> [5] -> [2] -> [3] -> [4] -> [5] -> [1] /
front -> [2] -> [3] -> [4] -> [5] -> [1] /
front -> [2] -> [3] -> [4] -> [5] -> [2] -> [1] / 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T11:21:47.357

首先，您应该获取第一个元素并将其添加到 (xi) 的索引中。然后删除第一个元素。我的意思是你的循环应该是；

```
for (int i = 0; i < x; i++){

    this.add(this.size()-i, front.data);
    this.remove(0);
} 
```

你也可以删除它；

```
this.add(front.data); 
```

我认为这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T07:10:02.560

嗨，您总是向您提供数据，`size()-1`您可能想要这样做

```
this.add(this.size()-i-1, front.data); 
```

然后再次删除第一个元素。

不要犹豫，一步一步调试你的代码，看看它是如何运行的。

* * *

在网站上不应该阻止您使用 IDE，但`a piece of paper`也可以完成工作。

# html - visual comparision of pages in different browsers

> ID：11772447
> 
> 赞同：0
> 
> 时间：2012-08-02T06:54:14.330
> 
> 标签：html, cross-browser, comparison, webpage-screenshot

I want to test my html page visually in every browser like chrome FF and IE, like the position of all the elements and padding and margin in the page is correct or not.

Now what I am doing is I open the page in two browsers and I cascade the two browsers side by side and I compared it with my eyes.

Now my question is : is there any tool or plugin available to test the page by overlapping the page in IE with the same page in chrome or FF so that I can find any difference in visual representation of the elements, so that I could correct it.
Just like screen shot comparison (in screenshot comparison I can't compare the entire page and moreover I can't overlap one screenshot images one over another)?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-02T07:03:01.440

这是错误的做法。试图让每个浏览器逐个像素地匹配是徒劳的，只会导致沮丧、代码膨胀和浪费精力。

为有效的浏览器设计（通常是 Webkit 和 Firefox）。然后根据其他人的需要进行修复。但不要试图让事物逐个像素地网格化。

# javascript - pymongo map-reduce 示例动态构建地图功能

> ID：11772454
> 
> 赞同：1
> 
> 时间：2012-08-02T06:54:42.210
> 
> 标签：javascript, mapreduce, pymongo

我正在使用 pymongo map_reduce API 在 mongoDB 上执行 map-reduce 作业。我面临的问题是构建地图功能。我必须迭代以从“this”对象中获取值。我想避免什么。

如果 mongoDB 中的文档是

```
 {X:{y:{Z:10}},A:{B:20,F:30}}
To get value of Z i can do
 var value = this.X.y.Z 
```

我可以直接在地图函数中指定（硬编码），否则需要遍历......所以正在寻找一个动态构建地图函数的选项。就像是

```
def buildMapFunc(string):
    basestring = "function map () { print("
    queryStr1 = basestring+string
    queryStr2 = queryStr1+")}"
    map = Code(queryStr2) 
```

这可以做到吗？如果是，请举例说明。提前致谢

# java - 为什么activemq web console没有出现在所有浏览器上，只有firefox

> ID：11772455
> 
> 赞同：1
> 
> 时间：2012-08-02T06:54:43.847
> 
> 标签：java, windows, activemq

我是关于activemq的新手。我从它的网站上下载了它并安装在 Windows 上。启动它后，当我写“http://localhost:8161/admin”时，只有我在 Firefox 上看到 Web 控制台。Chrome 和 IE 没用。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T02:23:20.267

好吧，我刚刚发现是否有一个打开的身份验证提示会话（即在`http://localhost:8161/admin`提示身份验证时打开的浏览器选项卡），直到它关闭，任何其他会话都不会通过。

# opengl-es - Opengl-es 1.1 改变FBO上的像素数据

> ID：11772456
> 
> 赞同：0
> 
> 时间：2012-08-02T06:54:44.613
> 
> 标签：opengl-es, fbo

有没有办法获取 FBO 像素数据，然后：快速对其进行灰度化并再次将图像取回该 FBO？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:20:12.260

如果您使用的是固定功能管道 (ES 1.1)，则可以使用`glReadPixels`从 GPU 中提取像素数据，以便直接处理它。然后，您需要根据该结果创建一个纹理，并渲染一个映射到新纹理的四边形。但这是实现结果的一种相当低效的方式。

如果您使用着色器 (ES 2.0)，您可以直接在 GPU 上执行此操作，这样更快。这意味着通过以下几种方式之一在片段着色器中进行灰度化：

1.  如果你的渲染很容易开始，你可以在你的普通片段着色器中添加灰度数学，也许可以用一个布尔统一变量来切换它。

2.  如果您不想在正常管道中弄乱灰度，则可以正常渲染到屏幕外 FBO（纹理），然后使用特殊的灰度纹理着色器将该纹理的内容渲染到屏幕的 FBO 上进行数学运算采样的纹素。

如果需要，这里是灰度数学：[https](https://web.archive.org/web/20141230145627/http://bobpowell.net/grayscale.aspx) ://web.archive.org/web/20141230145627/http://bobpowell.net/grayscale.aspx本质上，将 RGB 值插入该公式，并使用生成的亮度值在您的所有频道中。

# sql - Hibernate/Spring 取出类映射。关于反射

> ID：11772460
> 
> 赞同：1
> 
> 时间：2012-08-02T06:55:06.687
> 
> 标签：sql, spring, hibernate, reflection

我试图编写一个使用hibernate写入数据库的应用程序，但是在某些操作中，我必须对HB制作的表中的数据使用JDBC。

JDBS 需要赋予管理员创建 SQL 查询的能力，该查询将返回有关数据库中数据的统计信息，例如指定类型的已处理文档的数量、成功/失败的登录尝试次数或订单中产品的总值。

为此，我已经完成了一个允许创建覆盖 toString() 并返回漂亮的 sql 查询字符串的类。所有的作品，但现在我试图通过让管理员能够选择表/列名来让管理员生活得更轻松。这是一个问题，因为它们是由hibernate创建的。一些由@column 注释，另一些由字段名称。我如何检查字段映射？我知道这一切都与反射有关，但在 java 中还没有做太多。

例子

```
@Entity
@Table(name= "my_table_name" )
public class TableOFSomething implements Serializable{
   //This field isn't mapped into database and info about it is not requred.
   //In fact, info about it may cause an error.
   private static final long serialVersionUID = 7L;

   @Id
   @Column(name="id")
   private String id;

   private String fieldOne;

   @Column(name="field_two")
   private String fieldTwo;

   @Column(name="renamed_just_for_fun")
   private int Number;

   //code with getters & setters
} 
```

如何编写具有类似定义的方法

```
public <T> String tableName(Class<T> Target); //returns name of table in database
public <T> ArrayList<String> tabelFields(Class<T> Target); //returns name of fields in database 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T07:12:20.237

Hibernate 有 API - getClassMetadata 可以探索映射。API 可能会更改并且现在位于另一个地方，但我将使用它而不是为此进行反思。查看这篇文章了解更多详情： [Get the table name from the model in Hibernate](https://stackoverflow.com/questions/634342/get-the-table-name-from-the-model-in-hibernate)

如果你想要反射，所以使用这个[链接](http://tutorials.jenkov.com/java-reflection/annotations.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:34:11.583

```
import java.lang.reflect.Field;
import java.lang.reflect.Modifier;
import java.util.ArrayList;

import javax.persistence.Column;
import javax.persistence.Table;

import odi.beans.statistic.QueryBean;

public class ReflectionTest {
    public static void main(String[] args) {
        ReflectionTest test=new ReflectionTest();
        System.out.println("Table name of "+QueryBean.class.getName()+" is "+test.getTableName(QueryBean.class));
        System.out.println("Column names in this table are:");
        for(String n: test.getColumnNames(QueryBean.class)){
            System.out.println("\t"+n);
        }
        System.out.println("Good bye ;)");
    }

    public <T> ArrayList<String> getColumnNames(Class<T> target) {
        ArrayList<String> ret=new ArrayList<>();
        Field[] fields = target.getDeclaredFields();
        String fieldName =null;
        for (Field f : fields) {
            //jump to next if if field is static
            if (Modifier.isStatic(f.getModifiers()))
                continue;
            if (f.isAnnotationPresent(Column.class)) {
                Column a = f.getAnnotation(Column.class);
                fieldName = a.name();
            } else {
                fieldName = f.getName();
            }
            ret.add(fieldName);
        }
        return ret;
    }

    public <T> String getTableName(Class<T> target){
        String ret=target.getSimpleName();
        if (target.isAnnotationPresent(Table.class))
        {
            Table t=target.getAnnotation(Table.class);
            ret=t.name();
        }
        return ret;
    }
} 
```

是否涵盖了所有可能性？我现在知道休眠方式会更容易，但这也是学习非常有用的反射机制:)

编辑：重要问题：这仅适用于注释还是也适用于 xml 映射？

# c# - 读取带有变音符号的 Xml 文件

> ID：11772468
> 
> 赞同：4
> 
> 时间：2012-08-02T06:55:51.257
> 
> 标签：c#, xml, encoding

我昨天问了这个问题并得到了答复。

[为变音符号写入编码值](https://stackoverflow.com/questions/11756403/encoding-xml-in-c-sharp)

在代码中，如果它是这样的字符串，则 parse 方法可以工作：

```
XDocument xDoc = XDocument.Parse("<description>Top Shelf-ÖÄÜookcase</description>"); 
```

要将输入的 xml 文件作为字符串传递，我必须先阅读它。如果输入 xml 中有变音符号，则读取方法将失败。我该如何克服呢？

尝试了 XDocument 的 Load 和 Parse 方法。

加载：给定编码中的无效字符。第 3 行，位置 35。解析：根级别的数据无效。第 1 行，位置 1。

这是使用 CDATA 后的示例 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<kal>
 <description><![CDATA[Top Shelf-ÖÄÜookcase]]> </description> 
</kal> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-23T13:32:29.033

将编码更改为“iso-8859-1”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:03:04.573

您是否尝试过用[CDATA](http://www.w3.org/TR/REC-xml/#sec-cdata-sect)包装描述数据？

```
<description><![CDATA[Top Shelf-ÖÄÜookcase]]> </description> 
```

除非使用 CDATA 包装特殊字符，否则 XML 中的特殊字符无法很好地解析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-17T09:37:14.143

正如[Besi](https://stackoverflow.com/users/1032927/besi)所说，您必须使用正确的 xml 文件编码才能正确处理变音符号。

即使您说传入的 xml 文件的创建不在您手中，您仍然可以通过使用专用的来影响用于解析 xml 的编码`StreamReader`：

```
//  create your XDocument
XDocument Doc;

//  setup a StreamReader for your file, specifying the encoding you need
using (StreamReader Reader = new StreamReader(@"C:\your-file.xml", System.Text.Encoding.GetEncoding("ISO-8859-1")))
{
    //  PARSE the STRING that is RETURNED from the StreamReader.ReadToEnd()-method
    Doc = XDocument.Parse(Reader.ReadToEnd());
} 
```

# delphi - Firebird Embedded & Delphi “不可用的数据库”

> ID：11772469
> 
> 赞同：-2
> 
> 时间：2012-08-02T06:55:56.947
> 
> 标签：delphi, delphi-xe2, firebird, firebird-embedded

我正在使用 Firebird 2.5（嵌入式）和 Delphi XE2。
我将以下文件保存到我的应用程序根目录：

*   C:\myapp\app.exe
*   C:\myapp\fbclient.dll
*   C:\myapp\icudt30.dll
*   C:\myapp\icuin30.dll
*   C:\myapp\icuuc30.dll
*   C:\myapp\dbxfb.dll

和我的连接设置：

```
procedure TMainForm.Button1Click(Sender: TObject);
var Con: TSQLConnection;
 begin
  Con := TSQLConnection.Create(Self); 
    With Con Do
     Begin
       Connected := False;
       DriverName := 'FirebirdConnection';

       Params.Clear;
       Params.Add('DriverName=' + DriverName);
       Params.Add('User_Name=SYSDBA');
       Params.Add('Password=masterkey');
       Params.Add('Database=C:\GHARARDAD.FDB');
       Params.Add('SQLDialect=3');

       LoginPrompt := False;
       ConnectionName := 'Gharardad';
       LibraryName := 'dbxfb.dll';
       VendorLib := 'C:\fbclient.dll'; // Renamed fbembed.dll to fbclient.dll
       GetDriverFunc := 'getSQLDriverInterBase'; 
       Connected := True;
     End;
    End; 
```

我的操作系统是：`Win 7 64 bit`
FB embedde ver 是：`Firebird-2.5.1.26351-0_Win32_embed`

而且我的应用程序是在 32 位上编译的

DLL 大小：

```
 fbembed.dll  ----->  size    3,784,704 bytes

 dbxfb.dll     -----> size    288,768 bytes 
```

但是当我想运行应用程序时，出现以下错误：

> DBX 错误：驱动程序无法正确运行。客户端可能是错误的，未正确安装，错误的版本，或者驱动程序可能从系统路径中错误。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T07:40:14.433

1.  您需要像这样指定数据库参数：

    Params.Add('Database=C:\Full\Path\GHARARDAD.FDB');

2.  我看到你想使用嵌入式版本，你需要使用*fbembed.dll*而*不是 fbclient.dll*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T08:45:40.910

如果您已经指定数据库 User_Name 密码，我不知道为什么要使用 ConnectionName。

我更喜欢这样的东西：

```
 Con := TSQLConnection.Create(Self); 
    With Con Do
     Begin
       Connected := False;
       DriverName := 'FirebirdConnection';      
       LibraryName := 'dbxfb.dll';
       VendorLib := 'fbembed.dll';
       ConnectionName := 'Gharardad';
       Params.Value['User_Name'] := 'SYSDBA';
       Params.Value['Password'] := 'masterkey';
       Params.Value['Database'] := 'C:\GHARARDAD.FDB';
       Connected := True;
     End; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T08:15:18.600

你有任何其他连接到该数据库吗？

FlameRobin、IBExpert、Delphi IDE 表单设计器？

您在 Delphi 中有任何活动的数据集/连接吗？

嵌入式需要以不可共享方式打开文件。

运行 SysInternals Process Explorer 并搜索您的数据库文件（如果它已被其他应用程序打开）

* * *

你真的使用奇怪重命名的 firebird 嵌入式而不是 firebird 客户端吗？@Marcodor 和 @Re0sless 已经问过你了。

似乎您只认为您使用的是嵌入式，但您只安装了一小部分没有主机的服务器。

```
fbembed.dll   2.5.1   Win32   size is 3 784 704 bytes
fbclient.dll  2.5.1   Win64   size is 870 912 bytes
fbclient.dll  2.5.1   Win32   size is 548 864 bytes 
```

哪个是你的 DLL？

* * *

这也可能是数据库引擎版本和数据库文件版本不匹配。尝试 SysInternals Process Monitor 以查看您的应用程序尝试查找和打开哪些文件。它是否成功打开数据库文件？它是否成功找到并打开 firebird.msg ？它是否成功打开 icu*.dll ？也许是udf dll？

是否有一些错误写入 firebird.log ？

一般来说 - 学习使用 SysInternals Process Monitor 来了解哪些文件以及在哪里尝试过。它经常会提示您究竟发生了什么错误以及原因。

* * *

您没有列出 fbintl.dll 如果您的数据库包含非拉丁字母和非英语语言，那么如果没有正确定位 fbintl，它可能无法打开它。在 Process Monitor 中检查它被搜索并放在那里的位置。

* * *

检查进程监视器您的应用程序实际加载的 firebird dll 版本。它的版本是否足够新以打开该数据库？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T08:23:28.230

您说您使用的是嵌入式 Firebird，但您使用的是标准的 Firebird VendorLib

```
VendorLib := 'fbclient.dll'; 
```

对于嵌入式火鸟，这应该是

```
VendorLib = '[pathtolib]\fbembed.dll' 
```

您还缺少 GetDriverFunc 的值

所以完整的 TSQLConnection 对象看起来像这样（在 Delphi 2007 中测试）

```
Con := TSQLConnection.Create(Self); 
With Con Do
 Begin
   Connected := False;
   DriverName := 'FirebirdConnection';

   Params.Clear;
   Params.Add('DriverName=' + DriverName);
   Params.Add('User_Name=SYSDBA');
   Params.Add('Password=masterkey');
   Params.Add('Database=C:\GHARARDAD.FDB');
   Params.Add('SQLDialect=3');
   //other connection params here

   ConnectionName := 'Gharardad';
   LibraryName := 'dbxfb.dll';
   VendorLib := 'C:\fbembed.dll';
   GetDriverFunc = 'getSQLDriverInterBase' //Or what ever the dbxfb.dll function is called
   Connected := True;
 End;
End; 
```

请注意，getSQLDriverInterBase 函数是 Devart firebird 库中函数的名称，因此它在 dbxfb.dll 库中可能有所不同。

# arrays - 应该如何表示基于 RPG 瓦片的地图？

> ID：11772472
> 
> 赞同：0
> 
> 时间：2012-08-02T06:56:12.253
> 
> 标签：arrays, data-structures, maps

我有一个基于图块的 RPG 系统，其中特定的图块类型由字符串表示（即 Grass = "g"，Dirt = "d"）。问题是我不知道如何以一种可以有效地通过 x/y 坐标访问每个图块的方式来表示地图（按特定顺序收集的一组图块）。地图是否应该以数组格式表示：

```
map[0].coords[x][y] = "g"; 
```

或者也许以其他方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T06:58:42.797

这取决于您使用的语言，但二维数组通常是执行此操作的有效方法。

访问数组中的元素通常很快，因为可以根据提供的数组索引计算给定元素在内存中的位置，而无需遍历其他元素。对于这种类型的检索，其他数据结构（例如链表）要慢得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T07:08:38.427

一些事情，取决于语言：

1：如果可能，为地形类型设置常量整数。常量使用更少的内存并且可以更快地引用/检索，与字符串上的整数相同

2：二维可能是最有效的方法。

一个例子

```
CONST(INT) GRASS = 1;
CONST(INT) DIRT = 2;
CONST(INT) SNOW = 3;

// assuming map is an array containing objects, and coords is a 2d
// array of said object:
map[0].coords[x,y] = GRASS; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T07:12:33.937

二维数组很好。

您也可以使用一维数组。这是我周围的一段 Java 代码：

```
char [] cells = new char[WORLD_WIDTH * WORLD_HEIGHT];

public char get(int x, int y) {
    return cells[x + y * WORLD_WIDTH];
}

public void set(int x, int y, char c) {
    cells[x + y * WORLD_WIDTH] = c;
} 
```

假设您的世界是 10 x 10 块，那么第一行在`cells[0]`to`cells[9]`中，最后一行在`cells[90]`to`cells[99]`中，依此类推。

当然，您可能需要添加额外的检查以确保`x`和`y`参数有效。

# asp.net - 处理处理请求的 ASP.Net 内部线程池

> ID：11772476
> 
> 赞同：0
> 
> 时间：2012-08-02T06:56:47.590
> 
> 标签：asp.net, .net, multithreading, threadpool

我对 ASP.Net 的理解是，当请求到来时，ASP.Net 使用线程池中的内部线程来完成工作并做出响应。如果我错了，请纠正我。如果是这种情况，我能否控制这个 asp.net 线程池？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:00:15.660

据我所知，您的应用程序无法使用该信息。

你想要完成什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:42:19.300

但是，您不能直接与线程池交互。[但是，您可以通过在 web.config 中](http://msdn.microsoft.com/en-us/library/7w2sway1.aspx)设置 processModel 来操纵线程池的一些特性。

# android - 更改从“最近”和启动器启动 Android 应用程序的行为

> ID：11772480
> 
> 赞同：2
> 
> 时间：2012-08-02T06:57:11.833
> 
> 标签：android

在我最小化它之后，如何让我的应用程序以相同的方式（从启动器或从“最近”）恢复？（在 Android 中，从启动器或“最近”恢复不是相同的操作。）是否有任何标志或启动模式，或者我需要做的任何其他事情会导致我的应用程序恢复其先前的状态，无论它从哪里开始？

一个例子：

```
Activity A (normalMode) -> 
Activity B (singleTask) -> 
Activity C (normalMode) -> 
Activity D (starts from service with FLAG_ACTIVITY_NEW_TASK and 
            FLAG_ACTIVITY_CLEAR_TOP and intent(getBaseContext(), ActivityD.class)) 
```

我第一次最小化`Activity D`时，它会从“最近”或从启动器恢复`Activity D`，这就是我想要的。

但在那之后，如果我从 开始`Activity B`（`FLAG_ACTIVITY_NEW_TASK`和`FLAG_ACTIVITY_CLEAR_TOP`）`Activity D`，`Activity C`并且`Activity D`被销毁，这很好。

但是，如果我重复并再次执行此操作，则会`Activity D`再次显示。如果我最小化`Activity D`并从启动器恢复，`Activity D`启动，没关系。但是，如果我最小化并从“最近”恢复，我会立即看到并被`Activity B`销毁。`Activities C``D`

那不是我想要的。关于如何解决这个问题的任何想法？

感谢您的回答:-)

# php - 如何在zend框架中添加兄弟元素使用Zend_Form_Element

> ID：11772481
> 
> 赞同：0
> 
> 时间：2012-08-02T06:57:11.710
> 
> 标签：php, forms, zend-framework

例如：

```
$assignment_type = $this->createMyElement('text', 'assignment_type', array(
            'name' => 'assignment_type',
            'id' => 'assignment_type_label'
        ))->setAttrib('maxlength', '100')->addDecorator('Htmltag', array('tag' => 'div', 'class' => 'input_text')); 
```

在这里，我正在创建一个由 div 标签包装的输入，但是如何在这个 div 中添加其他元素？

所以我想看到这样的东西：

```
<div>
<input />
<img /> <!--the brother element created -->

</div> 
```

那可能吗？或者我需要使用什么技巧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:34:07.140

以下是我如何将三个元素包装在一个 div 中（在本例中为日期选择器）：

```
$bday = new Zend_Form_Element_Select('bday');
        $bday->setLabel('Birth Date: ')
             ->setDecorators(array(
                 array('ViewHelper'),
                 array('Label', array('tag' => 'dt')),
                 array('HtmlTag', //opening tag
                     array(
                         'tag'       => 'div',
                         'openOnly'  => TRUE,
                         'id'        => 'bday',
                         'placement' => 'prepend'
                 )),
             ));
        $bdaymonth = new Zend_Form_Element_Select('bdaymonth');
        $bdaymonth->addValidator('Digits')
                  ->setDecorators(array(
                      array('ViewHelper')
                  ));

        $bdayyear = new Zend_Form_Element_Select('bdayyear');
        $bdayyear->addValidator('Digits')
                 ->setDecorators(array(
                     array('ViewHelper'),
                     array('HtmlTag', //closing tag
                         array(
                             'tag'       => 'div',
                             'closeOnly' => TRUE
                     )),
                 )); //elements truncated for brevity 
```

我希望这能给你一些想法。

# magento - Magento 中基于尺寸的运输。

> ID：11772482
> 
> 赞同：0
> 
> 时间：2012-08-02T06:57:19.803
> 
> 标签：magento

我需要根据尺寸计算我的运费。我的一些物品不到 2 磅，但尺寸更大。

我在谷歌上搜索并找到了一个 240 美元的扩展程序，但它太贵了。

有没有其他方法可以将尺寸发送到 UPS、USPS 和 Fedex 并在我的 Magento 商店中从他们那里获得运费？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T16:10:22.123

基于尺寸的运输最终会减少重量。这就是为什么它被称为体积重量。

[http://www.fedex.com/gb/tools/dimweight.html](http://www.fedex.com/gb/tools/dimweight.html)

基本上只需在创建产品时输入产品的体积重量或实际重量，运输将是准确的。

从技术上讲，您可以通过编程解决这个问题，但很难证明这种努力是合理的。

# android - 如何在android中定位期间保存选项卡状态

> ID：11772483
> 
> 赞同：1
> 
> 时间：2012-08-02T06:57:38.247
> 
> 标签：android, android-tabhost

我有 2 个选项卡，例如屏幕上显示的 Tab1 和 Tab2。让选项卡显示在纵向方向上。

Tab1 显示 Activity1，Tab2 显示 Activity2。

目前，选中的选项卡状态为Tab2。现在，我将 PORTRAIT 的方向更改为 LANDSCAPE。将方向更改为 LANDSCAPE 模式时，当前显示的是 Tab1，而不是显示 Tab2。

我的代码：

```
public class TabBarExample extends TabActivity {

    TabHost tabHost;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tab);

        /* TabHost will have Tabs */
        tabHost= (TabHost)findViewById(android.R.id.tabhost);

        TabSpec firstTabSpec = tabHost.newTabSpec("tid1");
        TabSpec secondTabSpec = tabHost.newTabSpec("tid1");

        firstTabSpec.setIndicator("First Tab Name").setContent(new Intent(this,FirstTab.class));
        secondTabSpec.setIndicator("Second Tab Name").setContent(new Intent(this,SecondTab.class));

        tabHost.addTab(firstTabSpec);
        tabHost.addTab(secondTabSpec);

        tabHost.getTabWidget().getChildAt(0).getLayoutParams().height =40;
        tabHost.getTabWidget().getChildAt(1).getLayoutParams().height =40;

        for(int i=0;i<tabHost.getTabWidget().getChildCount();i++)  
        {  
            tabHost.getTabWidget().getChildAt(i).setBackgroundColor(Color.parseColor("#8A4117"));  
        }  

        Integer lastTab = (Integer) getLastNonConfigurationInstance();
        if(lastTab != null) {
           tabHost.setCurrentTab(lastTab);
        } 
        tabHost.getTabWidget().getChildAt(1).setBackgroundColor(Color.parseColor("#C35817"));  
    } 
    public void onTabChanged(String tabId) {  
        // TODO Auto-generated method stub  
        for(int i=0;i<tabHost.getTabWidget().getChildCount();i++)  
        {  
            tabHost.getTabWidget().getChildAt(i).setBackgroundColor(Color.parseColor("#8A4117"));  
        }  

        tabHost.getTabWidget().getChildAt(tabHost.getCurrentTab()).setBackgroundColor(Color.parseColor("#C35817"));  

    }
    public Object onRetainNonConfigurationInstance() {
        return tabHost.getCurrentTab();
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T10:43:40.940

检查[这个答案](https://stackoverflow.com/questions/5317660/save-the-tab-state-during-orientation-change)。

你必须玩`SaveInstanceState`和`RestoreInstanceState`。

请参阅此[示例](https://codereview.stackexchange.com/questions/3801/how-to-use-saved-instance-state-and-restore-instance-state-with-spinners-in-andr)。

[了解更多 阅读此](http://developer.android.com/guide/topics/resources/runtime-changes.html)

# facebook-fql - FQL 查找我的朋友的所有（uid）在一张 pid=N 的照片中被标记的人？

> ID：11772485
> 
> 赞同：0
> 
> 时间：2012-08-02T06:57:52.890
> 
> 标签：facebook-fql

我需要找出谁（仅限我的朋友）在特定照片中被标记。我知道照片的pid。这需要通过 FQL 查询来完成。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:52:57.537

干得好。这将为您提供有关在特定照片中标记的朋友所需的大部分数据。

```
SELECT id, name, pic_square, username, type FROM profile WHERE id IN
  (SELECT subject FROM photo_tag WHERE pid = XXXXX AND subject IN
    (SELECT uid2 FROM friend WHERE uid1 = me() ) ) 
```

您可能无法通过此查询获得所有在 Facebook 应用程序中可见的朋友。这取决于他们如何配置隐私设置。如果他们的隐私未设置为公开，API 不会将他们的数据返回给您。

根据您获得它的方式，您可能希望`object_id`为`pid`. 该`pid`领域似乎正在弃用。

# python - 如何在另一个文件中包含一个文件的链接？

> ID：11772486
> 
> 赞同：-5
> 
> 时间：2012-08-02T06:57:52.033
> 
> 标签：python, python-2.7

我正在从一个文件中提取一些信息，`f1.txt`然后将该信息写入另一个文件`f2.txt`。

在`f2.txt`我想保留一个链接，这样当我单击该链接时`f1.txt`应该打开。

怎么做`python`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T07:00:46.797

你不能用像`f2.txt`. 如果是`f2.html`，你会做这样的事情：

```
<a href="file:///c:/path/to/f1.txt">information from f1.txt</a> 
```

如果文件在同一目录中，则可以只使用文件名：

```
<a href="f1.txt">information from f1.txt</a> 
```

如果你想指向一个特定的*地方*，`f1.txt`你必须创建它的 HTML 化版本，包含如下代码：

```
<a name="L1">[line 1 from f1.txt]</a><br>
<a name="L2">[line 2 from f1.txt]</a><br>
... 
```

`#LX`然后，通过附加到`href`地址来链接到特定行，其中`X`行号是行号，如下所示：

```
<a href="f1.html#L34">information from f1.txt</a> 
```

Python 不是文本文件查看器，所以除了生成`f2.txt`.

Inbar 已经解释了如何实际编写文件，所以如果你只是结合这两个答案，你就大功告成了。但是你必须制作`f2`一个html文件，文本文件中没有超链接之类的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T07:20:06.160

像这样的东西？

```
def func1(src, dst):
    """copies contents of src to dst with a 'link'"""

    with open(src, 'r') as file_src:
        with open(dst, 'w') as file_dst:
            file_dst.writeline(src) #or however you want to represent "link"
            file_dst.write(file_src.read()) 
```

# sql-server - EF4 通用实体 ID

> ID：11772489
> 
> 赞同：0
> 
> 时间：2012-08-02T06:58:36.110
> 
> 标签：sql-server, entity-framework

我有一个地址表，如下所示：

地址

*   int address_id
*   字符串街1
*   字符串街2
*   ... 其他地址字段 ...
*   int entity_id
*   int entity_type_id
*   日期时间 created_at
*   日期时间更新_at
*   日期时间已删除_at

目的是允许其他实体（如人员、供应商、办公室等）。

我的问题是我无法将 entity_id 外键到代表其他实体的表中，因此我不知道如何使用实体框架来拥有关联/导航属性。

我想我可以在系统中放置一个实体表，并让所有其他实体都从中派生，但我不确定这不会在以后造成不必要的困难。

任何人都可以建议一个选项吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:18:45.493

当前的 EF 版本无法做到这一点。EF 使用与数据库中的 FK 关系相同的规则，因此如果您无法在数据库中创建它，您也无法在 EF 中创建它。您将没有导航属性，但您仍然可以在 Linq-to-entities 查询中使用手动连接。

# php - 如何通过 href 传递值 - PHP

> ID：11772493
> 
> 赞同：8
> 
> 时间：2012-08-02T06:58:54.427
> 
> 标签：php, href

正在使用 href 标记传递值

在第一页 Href 标记用作

```
echo "<a href=view_exp.php?compna=",$compname,">$compname</a>"; 
```

在使用的第二页中

```
$compname = $_GET['compna']; 
```

接收 Compna 值已通过，但仅传递第一个单词，其余单词将被跳过。

Compname 为“ Chiti Technologies Ltd ”当我传递我收到的值时，只有“Chiti”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T07:05:03.263

您只获得公司名称的第一个单词的原因是公司名称包含空格。您需要对名称进行编码。

```
echo "<a href=view_exp.php?compna=",urlencode($compname),">$compname</a>"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T07:02:51.613

您通过不引用参数来生成模棱两可/无效的 HTML。结果是这样的：

```
<a href=foo bar baz> 
```

只有`foo`被识别为属于`href`，其余的不被识别。引用值：

```
echo '<a href="view_exp.php?compna=', urlencode($compname), '">', htmlspecialchars($compname), '</a>'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T07:00:43.303

使用此代码：

```
echo '<a href="view_exp.php?compna='.urlencode($compname).'">'.$compname.'</a>'; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-02T07:01:44.450

您需要为您的 . 添加引号`href`，此外，您还需要使用[`urlencode`](http://php.net/manual/en/function.urlencode.php)对变量进行编码。

```
echo '<a href="view_exp.php?compna=' . urlencode($compname) . '">' . $compname . '</a>'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T07:02:25.203

改变回声`"<a href=view_exp.php?compna=",$compname,">$compname</a>";`

回响`"<a href=\"view_exp.php?compna=$compname\">$compname</a>";`

当使用双引号字符串时，您不需要在其间粘贴变量，只需键入它们即可。此外，将字符串粘贴在一起时不要使用逗号，而是使用 . 粘贴字符串，否则会出现解析错误。对于数组将它们包含在大括号 {} 之间

```
echo "<a href=\"view_exp.php?compna={$compname["whatever"]}\">$compname</a>"; 
```

# c# - 两个日期之间的天数

> ID：11772498
> 
> 赞同：11
> 
> 时间：2012-08-02T06:59:21.317
> 
> 标签：c#, date

我有两个日期：

2012 年 6 月 26 日上午 12:13 和 2012 年 7 月 31 日下午 12:54

我需要比较这两个日期并提取它们之间的天数（差异）

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-02T07:00:11.023

使用[时间跨度](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)

```
TimeSpan difference = dateTime1 - dateTime2; 
```

`difference.TotalDays`会给你天数

```
var days = difference.TotalDays; 
```

# android - Android，加速度计不停止不知道为什么？

> ID：11772505
> 
> 赞同：1
> 
> 时间：2012-08-02T06:59:35.577
> 
> 标签：android, accelerometer

谁能帮我为什么加速度计不停止？有 unregisterListener 行，但什么也没有。

这是代码：

```
public class Festivale extends Activity implements SensorEventListener {

Button button;
CheckBox video, gps, acc;
Boolean recording = false;
public static SQLiteDatabase db;
String strlocation;
String city;
private SensorManager sensorManager;
Chronometer myChronometer;
EditText myEditText;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    myChronometer = (Chronometer) findViewById(R.id.chronometer);
    myEditText = (EditText) findViewById(R.id.editText1);

    addDataBase(); // adatbázist hoz létre
    addListenerOnButton();

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setMessage(
            "Készítette: Lakatos Dávid\nEmail: david.lakatos@gmail.com\nTel.: +3620/427-1166")
            .setCancelable(false)
            .setPositiveButton("OK", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                }
            });
    AlertDialog alert = builder.create();
    alert.show();
    return true;

}

private void addGPSListener() {

    String text = myEditText.getText().toString();

    float f = Float.valueOf(text.trim()).floatValue();
    float update = f * 1000;

    if (update < 100 || update > 1000000) {
        AlertDialog alertDialog;
        alertDialog = new AlertDialog.Builder(Festivale.this).create();
        alertDialog.setTitle("Hiba!");
        alertDialog.setMessage("Helytelen frissítési idõ:\n" + update
                / 1000 + " sec!");
        alertDialog.show();
    } else {
        globalconstant.mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        globalconstant.mlocListener = new MyLocationListener();
        globalconstant.mlocManager.requestLocationUpdates(
                LocationManager.GPS_PROVIDER, (long) update, 0,
                globalconstant.mlocListener);
    }

}

/* Létrehozzuk a program adatbázisát */
private void addDataBase() throws SQLException {
    db = openOrCreateDatabase("Festivale.db",
            SQLiteDatabase.CREATE_IF_NECESSARY, null);

}

public void addListenerOnButton() {
    button = (Button) findViewById(R.id.button1);

    button.setEnabled(true);
    button.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {

            gps = (CheckBox) findViewById(R.id.checkBox1);
            acc = (CheckBox) findViewById(R.id.checkBox2);
            video = (CheckBox) findViewById(R.id.checkBox3);

            /*
             * GPS
             */
            if (gps.isChecked()) {
                if (recording) {
                    globalconstant.mlocManager
                            .removeUpdates(globalconstant.mlocListener);
                    button.setText("Start");
                    recording = false;
                    myChronometer.stop();
                    myChronometer.setBase(SystemClock.elapsedRealtime());
                    acc.setClickable(true);
                    video.setClickable(true);
                    myEditText.setFocusable(true);
                    gps.setChecked(false);
                } else {
                    acc.setClickable(false);
                    video.setClickable(false);
                    myEditText.setFocusable(false);
                    myChronometer.setBase(SystemClock.elapsedRealtime());
                    myChronometer.start();
                    db.setVersion(1);
                    db.setLocale(Locale.getDefault());
                    db.setLockingEnabled(true);

                    final String gps =

                    "CREATE TABLE IF NOT EXISTS GPS_Values ("

                            + "id INTEGER PRIMARY KEY AUTOINCREMENT, Latitude float(10, 8), Longitude float(10, 8),Horizontal_Accuracy INTEGER,Altitude INTEGER,City TEXT,cur_timestamp TIMESTAMP);";
                    db.execSQL(gps);

                    addGPSListener();// meghívja a gps-t
                    recording = true;
                    button.setText("STOP");
                }
            }
            /*
             * Gyorsulásmérõ
             */
            if (acc.isChecked()) {

                if (recording) {
                    StopListenerAcc();
                    button.setText("Start");
                    recording = false;
                    myChronometer.stop();
                    myChronometer.setBase(SystemClock.elapsedRealtime());
                    gps.setClickable(true);
                    video.setClickable(true);
                    myEditText.setFocusable(true);
                    acc.setChecked(false);
                } else {
                    gps.setClickable(false);
                    video.setClickable(false);
                    myEditText.setFocusable(false);
                    myChronometer.setBase(SystemClock.elapsedRealtime());
                    myChronometer.start();
                    db.setVersion(1);
                    db.setLocale(Locale.getDefault());
                    db.setLockingEnabled(true);

                    final String acc =

                    "CREATE TABLE IF NOT EXISTS Accelerometer ("

                            + "id INTEGER PRIMARY KEY AUTOINCREMENT, X_Coordinate float(10, 6), Y_Coordinate float(10, 6), Z_Coordinate float(10, 6), cur_timestamp TIMESTAMP);";
                    db.execSQL(acc);

                    // Bekapcsolja az Accelerometer-t
                    addListenerAcc();
                    recording = true;
                    button.setText("STOP");
                }
            }

            /*
             * VideoRögzítés meghívása
             */
            if (video.isChecked()) {
                // kamera meghívása
                Intent myIntent = new Intent(Festivale.this, record.class);
                Festivale.this.startActivity(myIntent);
            }

        }

    });

}

private void StopListenerAcc() {
    // TODO Auto-generated method stub
    sensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
    // add listener
    sensorManager.registerListener(this,
            sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
            SensorManager.SENSOR_DELAY_NORMAL);
    sensorManager.unregisterListener(this);
}

// GPS
public class MyLocationListener implements LocationListener {

    public void onLocationChanged(Location loc) {

        float szel = (float) loc.getLatitude();
        float hossz = (float) loc.getLongitude();
        int horiAcc = (int) (loc.getAccuracy());
        int Altitude = (int) (loc.getAltitude());

        String test = String.format("%.08f", szel);
        String test2 = String.format("%.08f", hossz);

        Geocoder geocoder = new Geocoder(Festivale.this,
                Locale.getDefault());
        try {
            List<Address> addresses = geocoder.getFromLocation(szel, hossz,
                    1);
            city = addresses.get(0).getLocality();
            // Toast.makeText(getApplicationContext(), city,
            // Toast.LENGTH_SHORT)
            // .show();
        } catch (IOException e) {
            e.printStackTrace();
        }

        ContentValues gps_values = new ContentValues();

        gps_values.put("Latitude", test);
        gps_values.put("Longitude", test2);
        gps_values.put("Horizontal_Accuracy", horiAcc);
        gps_values.put("Altitude", Altitude);
        gps_values.put("City", city);

        SimpleDateFormat dateFormat = new SimpleDateFormat(
                "yyyy-MM-dd HH:mm:ss");
        Date date = new Date(System.currentTimeMillis());

        gps_values.put("cur_timestamp", dateFormat.format(date));

        try {
            db.beginTransaction();
            db.insert("GPS_Values", null, gps_values);
            db.setTransactionSuccessful();
        } finally {
            db.endTransaction();
        }

        // String Text = "My current location is: " + "Latitude = "
        // + loc.getLatitude() + "\nLongitude = " + loc.getLongitude();

        // Toast.makeText(getApplicationContext(), Text, Toast.LENGTH_SHORT)
        // .show();

    }

    protected void onPause() {
        // super.onPause();
        globalconstant.mlocManager
                .removeUpdates(globalconstant.mlocListener);

    }

    public void onProviderDisabled(String provider) {
        Toast.makeText(getApplicationContext(), "Gps Disabled",
                Toast.LENGTH_SHORT).show();
        DialogInterface.OnClickListener dialogClickListener = new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                switch (which) {
                case DialogInterface.BUTTON_POSITIVE:
                    // show gps otions
                    Intent gpsOptionsIntent = new Intent(
                            android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                    startActivity(gpsOptionsIntent);
                    break;

                case DialogInterface.BUTTON_NEGATIVE:
                    dialog.cancel();
                    break;
                }
            }
        };

        AlertDialog.Builder builder = new AlertDialog.Builder(
                Festivale.this);
        builder.setMessage("A GPS nincs aktiválva!\nAktiválja most?")
                .setPositiveButton("Aktivál", dialogClickListener)
                .setNegativeButton("Nem", dialogClickListener).show();
    }

    public void onProviderEnabled(String provider) {
        Toast.makeText(getApplicationContext(), "Gps Enabled",
                Toast.LENGTH_SHORT).show();

    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
    }

}// gps vége

private void addListenerAcc() {
    // TODO Auto-generated method stub
    sensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
    // add listener
    sensorManager.registerListener(this,
            sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
            SensorManager.SENSOR_DELAY_NORMAL);
}

// Accelerometer
public void onSensorChanged(SensorEvent event) {

    if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER) {

        // assign directions
        float x = event.values[0];
        float y = event.values[1];
        float z = event.values[2];

        // Toast.makeText(Festivale.this,
        // "X: " + x + "\nY: " + y + "\nZ: " + z, Toast.LENGTH_LONG)
        // .show();

        ContentValues x_values = new ContentValues();

        x_values.put("X_Coordinate", x);
        x_values.put("Y_Coordinate", y);
        x_values.put("Z_Coordinate", z);

        SimpleDateFormat dateFormat = new SimpleDateFormat(
                "yyyy-MM-dd HH:mm:ss");
        Date date = new Date(System.currentTimeMillis());

        x_values.put("cur_timestamp", dateFormat.format(date));

        db.insert("Accelerometer", null, x_values);
    }
}

public void onAccuracyChanged(Sensor sensor, int accuracy) {
    // TODO Auto-generated method stub

}
 } 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:22:21.267

试试这个来注销你的加速度计怎么样（对我有用）：

```
/**
     * <b><i>public void useAccelerometer(boolean use)</i></b>
     * <br>
     * Since: API 1
     * <br>
     * <br>
     * Set if you would like to enable the use of the accelerometer.
     * 
     * @param use 
     * <br>
     * True will enable the use of the accelerometer.
     * <br>
     * False will disable the use of the accelerometer.
     *  
     */

    public void useAccelerometer(boolean use) {
        if(use == true) {
            manager.registerListener(this, accelerometer, SensorManager.SENSOR_DELAY_GAME);
        }
        else {
            manager.unregisterListener(this, accelerometer);
        }
    } 
```

# android - 2 肥皂调用是使用同一个类

> ID：11772511
> 
> 赞同：0
> 
> 时间：2012-08-02T07:00:07.290
> 
> 标签：android, web-services, soap

我必须使用 2 个肥皂呼叫 url 用于一类。我的代码是：

```
public class Orderinfo extends Activity {
private static final String SOAP_ACTION = "http://xcart.com/data";
private static final String METHOD_NAME = "data";
private static final String NAMESPACE = "http://xcart.com";
private static final String URL = "http://192.168.1.168:8085/XcartLogin/services/RetailerWs?wsdl";
private static final String URL1 = "http://192.168.1.168:8085/XcartLogin/services/TodayC?wsdl";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.table);
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

    envelope.setOutputSoapObject(request);

    HttpTransportSE ht = new HttpTransportSE(URL);

    try {
        ht.call(SOAP_ACTION, envelope);
        SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
        SoapPrimitive s = response;
        String str = s.toString();
        String resultArr[] = str.split("&");//Result string will split & store in an array
        TextView tv = (TextView) findViewById(R.id.textView44);
      //  TextView tv = new TextView(this);

        for(int i = 0; i<resultArr.length;i++){
        tv.append(resultArr[i]+"\n\n");
       }

      } catch (Exception e) {
        e.printStackTrace();
      }
   HttpTransportSE ht1 = new HttpTransportSE(URL1);

    try {
        ht.call(SOAP_ACTION, envelope);
        SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
        SoapPrimitive s = response;
        String str = s.toString();
        String resultArr[] = str.split("&");//Result string will split & store in an array
        TextView tv = (TextView) findViewById(R.id.textView43);
      //  TextView tv = new TextView(this);

        for(int i = 0; i<resultArr.length;i++){
        tv.append(resultArr[i]+"\n\n");
       }

    } catch (Exception e) {
        e.printStackTrace();
    }

   }
  } 
```

这里必须显示第一个soap调用输出是3。第二个soap调用输出是2。但是两者都只显示2。为什么这里有什么异常。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:05:15.983

您在两次调用中都使用了一个 evelope 请求，因此所谓的服务方法和参数是相同的

# java - Java String 对象没有按时收集垃圾

> ID：11772512
> 
> 赞同：5
> 
> 时间：2012-08-02T07:00:07.200
> 
> 标签：java, memory-management, memory-leaks, garbage-collection

我有一个关于 Java 内存消耗的有趣问题。我有一个调用我的 Java 应用程序的本机 C++ 应用程序。

该应用程序基本上会进行一些语言翻译\解析一些 XML 并响应网络请求。应用程序的大部分状态不必保留，因此它充满了接受字符串参数并返回字符串结果的方法。

随着时间的推移，此应用程序继续占用越来越多的内存，并且有一段时间它开始占用接近 2 GB 的内存，这使我们怀疑某些 Hashtable 或静态变量的某处存在泄漏。经过仔细检查，我们没有发现任何泄漏。比较一段时间内的堆转储，显示 char[] 和 String 对象占用大量内存。

然而，当我们检查这些 char[]、字符串时，我们发现它们没有 GC 根，这意味着它们不应该是泄漏的原因。由于它们是堆的一部分，这意味着它们正在等待垃圾收集。在使用了各种工具 MAT\VisualVM\JHat 并浏览了很多这样的对象后，我使用了 yourkit 的试用版。Yourkit 直接给出数据说 96% 的 char[] 和 String 是不可达的。这意味着在进行转储时，堆中 96% 的字符串都在等待垃圾收集。

我知道 GC 运行很少，但是当您通过 VisualVM 检查时，您实际上可以看到它正在运行 :-( 而不是堆上一直有这么多未使用的对象。

IMO 这个应用程序永远不应该占用超过 400-500 MB 的内存，这是它在前 24 小时内停留的地方，但它会继续增加堆:-(

我正在运行 Java 1.6.0-25。

![请注意您的工具包中的屏幕截图](../Images/996d66a1e170ab982b48f4a694991cde.png)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T07:50:51.243

当您认为 Java 确实/应该 GC 时，它不会 GC :-) GC 是一个太复杂的话题，如果不花几周时间真正深入研究细节，就无法理解正在发生的事情。因此，如果您看到无法解释的行为，那并不意味着它已损坏。

你看到的可能有几个原因：

1.  您正在将一个巨大的字符串加载到内存中并保留对子字符串的引用。这可以将整个字符串保留在内存中（Java 并不总是为子字符串分配一个新的 char 数组 - 因为字符串是不可变的，它只是重用原始 char 数组并记住偏移量和长度）。

2.  到目前为止没有触发 GC。一些 C++ 开发人员认为 GC 是“邪恶的”（任何你不理解的东西都一定是邪恶的，对吧？），所以他们将 Java 配置为不运行它，除非绝对必要。这意味着 VM 会吃掉内存，直到达到最大值，然后它会执行一次巨大的 GC 运行。

3.  build 25 已经很老了。尝试更新到最新的 Java 版本（我认为是 33）。GC 是 VM 中测试最好的部分之一，但它确实存在错误。也许你打了一个。

4.  除非您看到 OutOfMemoryException，否则您没有泄漏。我们有一个应用程序可以吃掉你给它的所有堆。如果它获得 16GB 的 RAM（“只是为了安全”），它将使用整个 16GB，因为我们缓存了我们所能缓存的。您永远不会看到内存不足，因为缓存会根据需要缩小，但系统管理员经常会惊慌失措“哦上帝！哦上帝！它的内存不足了” **PANIK**不，不是。除非 Java 告诉您，否则它不会耗尽内存。它只是有效地使用它。

5.  使用命令行选项调整 GC 是破坏它的最佳方法之一。数百人比你更了解这个主题，他们将花费数年时间来提高 GC 的效率。你认为你可以做得更好吗？祝你好运。-> 摆脱任何“神奇”的命令行选项和调用`System.gc()`，您的问题可能会消失。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T07:45:58.310

```
String reallyLongString = "this is a really long String";
String tinyString = reallyLongString.substring(2, 3);
reallyLongString = null 
```

The JVM can't collect the memory allocated for the long string in the above case, since there's a reference to part of it. If you're doing stuff with Strings and you're suffering from memory issues, this might be the cause of your grief.

use `tinyString = new String(reallyLongString.substring(2, 3);` instead.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T07:51:46.543

可能根本没有泄漏 - 如果`String`s 可以到达，就会发生泄漏。如果您已为应用程序分配了多达 2GB 的空间，那么垃圾收集器没有理由开始释放内存，直到您接近该限制。如果您不希望它占用超过 500MB，则`-Xmx 512m`在启动 JVM 时通过。

您还可以尝试[调整垃圾收集器](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html)以更早地开始清理。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-02T07:40:50.657

尝试将堆大小减小到 500 兆字节，看看软件是否会开始垃圾收集或死机。Java 对使用分配给它的内存并不太挑剔。您还可以研究 GC 调整选项，这将使 GC 在清理东西时更加谨慎。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T06:36:47.070

首先，不要再担心那些字符串和 char[]。在我分析过的几乎每个 java 应用程序中，它们都位于内存使用者列表的顶部。在几乎所有这些 java 应用程序中，它们都是真正的问题。

如果您还没有收到 OutOfMemoryError，但确实担心 2GB 对于您的 java 进程来说太多了，那么请尝试减少您传递给它的 Xmx 值。如果它在 512m 或 1g 上运行良好且良好，那么问题就解决了，不是吗？

如果您获得 OOM，那么您可以尝试的另一种选择是将[Plumbr](http://plumbr.eu)与您的 java 进程一起使用。它是内存泄漏发现工具，如果确实存在内存泄漏，它可以帮助您。

# java - 如何在 APT 中访问 @XmlElement 值？

> ID：11772516
> 
> 赞同：2
> 
> 时间：2012-08-02T07:00:28.523
> 
> 标签：java, annotations, jdk1.6, apt, annotation-processing

我在编译时使用 APT 处理注释，我需要获取`@XmlElement`某些类中注释的值。该类看起来像这样：

```
public class ComponentConfig {

    @XmlElements({
        @XmlElement(type = Sample1.class, name = "sample-1-config"),
        @XmlElement(type = Sample2.class, name = "sample-2-config"),
        @XmlElement(type = Sample3.class, name = "sample-3-config"),
    })

    //...
} 
```

我想获取 的`name`值`@XmlElement`，但以下处理器代码无法为我获取它：

```
List<? extends AnnotationMirror> annotationMirrors = element.getAnnotationMirrors();
for (AnnotationMirror mirror : annotationMirrors) {
    if (mirror.getAnnotationType().toString().equals(XML_ELEMENT)) {
        System.out.println(getAnnotationValueMapValueOfName(mirror));
        nodes.add(getAnnotationValueMapValueOfName(mirror));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:26:28.053

在哪里`XML_ELEMENT`定义？它至少应该是一个完全限定的名称。

使用`getAnnotationType().toString()`不是进行比较的良好基础。

如果你打印出所有`getAnnotationType().toString()`你找到的值，你可能会发现你的问题。

也应该使用`javax.annotation.processing`包，因为 APT 现在已被弃用（因为它最近已从即将推出的 JDK8 - IIRC 的构建中删除）。它使用起来更好一些，并且受到所有 JDK6+ 实现的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T19:41:05.270

It's not APT, but it works with the [`AbstractProcessor`](http://docs.oracle.com/javase/6/docs/api/javax/annotation/processing/AbstractProcessor.html) of JDK6+:

```
@Override
public boolean process(final Set<? extends TypeElement> annotations, 
        final RoundEnvironment roundEnv) {
    checkEnvironmentChange();
    System.out.println("   > ---- process2 method starts " + hashCode());
    System.out.println("   > annotations: " + annotations);

    for (final TypeElement annotation: annotations) {
        System.out.println("   >  annotation: " + annotation.toString());
        processAnnotation(roundEnv, annotation);
    }
    System.out.println("   > processingOver: " + roundEnv.processingOver());
    System.out.println("   > ---- process2 method ends " + hashCode());
    return false;
}

private void processAnnotation(final RoundEnvironment roundEnv, 
        final TypeElement annotation) {
    final Set<? extends Element> annotateds = 
            roundEnv.getElementsAnnotatedWith(annotation);
    for (final Element element: annotateds) {
        processElement(element);
    }
}

private void processElement(final Element element) {
    System.out.println("      > class: " + element);
    System.out.println("      > class2: " + element.getClass());
    final List<? extends Element> enclosedElements = 
            element.getEnclosedElements();
    for (final Element enclosedElement: enclosedElements) {
        processEnclosedElement(enclosedElement);
    }
}

private void processEnclosedElement(final Element enclosedElement) {
    final XmlElements xmlElements = 
            enclosedElement.getAnnotation(XmlElements.class);
    if (xmlElements == null) {
        return;
    }
    final XmlElement[] xmlElemntValues = xmlElements.value();
    for (final XmlElement xmlElementValue: xmlElemntValues) {
        System.out.println("           > name: " + xmlElementValue.name());
    }
} 
```

Output:

```
[...]
   > annotations: [hu.palacsint.annotation.MyAnnotation]
   >  annotation: hu.palacsint.annotation.MyAnnotation
      > class: hu.palacsint.annotation.p2.ClassTwo
      > class2: class com.sun.tools.javac.code.Symbol$ClassSymbol
           > name: sample-1-config
           > name: sample-2-config
           > name: sample-3-config
   > processingOver: false
[...] 
```

My former question also could help: [Processing different annotations with the same Processor instance](https://stackoverflow.com/q/11713059/843804)

# php - Magento 自定义管理选项卡在实时服务器中不起作用

> ID：11772522
> 
> 赞同：0
> 
> 时间：2012-08-02T07:01:04.633
> 
> 标签：php, mysql, magento

我在 magento 中添加了一个自定义模块，它在销售订单部分添加了两个新选项卡，它在本地工作正常，但是当我在实时服务器中尝试它时它不工作。抛出一些错误，如“错误的选项卡配置。”。在检查时我认为这是布局文件的问题。

```
<?xml version="1.0" encoding="UTF-8"?>
<layout>
<adminhtml_sales_order_view>
    <reference name="sales_order_tabs">
        <action method="addTab">
            <name>name_custom</name>
            <block>mymodule/adminhtml_sales_order_view_tab_mymodule</block>
        </action>
        <action method="addTab">
            <name>name_custom2</name>
            <block>mymodule/adminhtml_sales_order_view_tab_mymodule1</block>
        </action>
    </reference>
</adminhtml_sales_order_view> 
```

在我的 config.xml 块中定义为

```
<?xml version="1.0" encoding="UTF-8"?>
..............
..............
    <blocks>
        <mymodule>
            <class>Company_Mymodule_Block</class>
        </mymodule>
    </blocks>
...............
............... 
```

**当我在布局中尝试adminhtml/sales_order_view_tab_invoices**而不是**mymodule/adminhtml_sales_order_view_tab_mymodule**时，我很困惑问题出在哪里。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:19:10.890

它在本地工作而不在实时服务器中工作？很可能是由区分大小写的命名引起的（linux 区分大小写）。仔细检查您的模块名称等。

例如：

`adminhtml/sales_order_view_tab_invoices`-> 好的

`adminhtml/sales_oRder_view_tab_invoices`-> 错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:23:53.710

Make sure your :

`mymodule/adminhtml_sales_order_view_tab_mymodule` and `mymodule/adminhtml_sales_order_view_tab_mymodule1`

is an instance of Mage_Adminhtml_Block_Widget_Tab_Interface.

You can use `implements Mage_Adminhtml_Block_Widget_Tab_Interface`

# android - 在 ActionBarSherlock 中使用选择器突出显示选定的列表项

> ID：11772532
> 
> 赞同：4
> 
> 时间：2012-08-02T07:01:50.037
> 
> 标签：android, android-listview, actionbarsherlock

伙计们，我想在列表视图中突出显示选定的列表项。我使用 ActionBarSherlock 并为列表设置了一个选择器。我想和[这里](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable/list_selector_holo_dark.xml)一样。我使用的选择器带有 ABS。我为每一行添加了一个复选框，以便查看选择了哪一个。但我想要像 Gmail 应用程序中的视觉反馈。 ![选定的列表行突出显示](../Images/eab30df5ecf806b16f0e2bfaaff600b2.png)

所以我的问题如下：

可以使用 Selector 为突出显示的行设置样式，还是需要以编程方式设置行样式？

注意：我为 Android 2+ 构建了我的应用程序，并希望使用 Android ICS 中的样式，例如它使用的 ActionBarSherlock。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:03:34.337

我为我的问题找到了解决方案。

对于 ICS 列表选择器（闪亮的蓝色），我一开始在我的 ListView 中设置了 ActionBarSherlock 列表选择器。

对于指示所选项目的突出显示的列表行，我扩展了一个 RelativeLayout，这是我的 ListRows 的根布局，并实现了 Checkable 接口。在这个界面中，我在 setChecked(boolean) 方法中设置了一个新的背景可绘制对象。

她的一个很好的例子：

高光技术：[1](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/fragments/src/com/actionbarsherlock/sample/fragments/CheckableFrameLayout.java) ICS 选择器：[2](https://github.com/JakeWharton/ActionBarSherlock/blob/master/library/res/drawable/abs__list_selector_holo_dark.xml)

# nhibernate - Nhibernate QueryOver：在where子句中计数

> ID：11772537
> 
> 赞同：1
> 
> 时间：2012-08-02T07:02:12.290
> 
> 标签：nhibernate

有关如何将以下内容转换为 QueryOver 的任何提示：

```
 var widget = session.Query<Widget>()
                    .Fetch(x => x.NotificationJobs)
                    .Where(x =>
                        x.Status == Status.Active &&
                        !x.NotificationJobs.Any())
                    .OrderByDescending(x => x.DateCreated)
                    .Take(1)
                    .SingleOrDefault(); 
```

想要获得没有通知作业的小部件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:38:45.297

```
var widgetWithNoNotificationJob = session.QueryOver<Widget>()
    .Where( x => x.Status == Status.Active )
    .OrderBy( x => x.DateCreated ).Desc
    .Left.JoinQueryOver<NotificationJob>( x => x.NotificationJobs )
        .Where( x => x.NotificationJobId == null )
    .Take( 1 )
    .SingleOrDefault(); 
```

这将在 NotificationJob 表上生成带有 LEFT OUTER JOIN 的 SQL，以及带有 NotificationJob.NotificationJobId IS NULL 的 WHERE 子句。

希望这将为您指明正确的方向。

# vb.net - LINQ to SQL 查询在超时前使用所有内存

> ID：11772541
> 
> 赞同：0
> 
> 时间：2012-08-02T07:02:29.493
> 
> 标签：vb.net, linq

嗨，我在 SQL 中有一个存储过程，它是一个带有多个内部连接的简单选择，我将此存储过程转换为 LINQ，并且在执行内存使用量时会攀升，直到出现内存不足异常。我绝对是 LINQ 的新手，所以我希望这正是我做事的方式。下面是LINQ代码

编辑：StockRoomID、CustomerID（整数）StartDate、EndDate（日期时间）变量传递到函数中

```
Dim query = (From prds In context.prds
                Join prd_colour In context.prd_colours On prd_colour.prd_id Equals prds.prd_id
                Join prd_colour_srsp In context.prd_colour_srsps On prd_colour.prd_colour_id Equals prd_colour_srsp.prd_colour_id
                Join prd_br In context.prd_brs On prd_br.prd_colour_id Equals prd_colour.prd_colour_id
                Join prd_stk_rm In context.prd_stk_rms On prd_stk_rm.prd_br_id Equals prd_br.prd_br_id
                Join ct_colour In context.ct_colours On ct_colour.ct_colour_id Equals prd_colour.ct_colour_id
                Join ct_pmg In context.ct_pmgs On ct_pmg.ct_pmg_id Equals prds.ct_pmg_id
                Join ct_pmg_detail In context.ct_pmg_details On ct_pmg_detail.ct_pmg_id Equals ct_pmg.ct_pmg_id
                Join ct_stk_rm In context.ct_stk_rms On ct_stk_rm.ct_br_id Equals ct_pmg_detail.ct_br_id And ct_stk_rm.ct_stk_rm_id Equals prd_stk_rm.ct_stk_rm_id
                Join ct_cust_type In context.ct_cust_types On ct_cust_type.ct_cust_type_id Equals ct_pmg_detail.ct_cust_type_id
                Join ct_cust_br In context.ct_cust_brs On ct_cust_br.ct_cust_type_id Equals ct_cust_type.ct_cust_type_id
                Where prds.prd_invisible_yn = 0 And prds.sell_yn = 1 And prds.ct_apg_id = 3 And ct_stk_rm.ct_stk_rm_id = StockRoomID And _
                ct_cust_br.ct_cust_id = CustomerID And prd_colour_srsp.srsp_date_beg <= StartDate And prd_colour_srsp.srsp_date_end >= EndDate Or _
                prd_colour_srsp.srsp_date_end Is Nothing And ct_pmg_detail.pmg_date_beg <= StartDate And ct_pmg_detail.pmg_date_end >= EndDate Or _
                ct_pmg_detail.pmg_date_end Is Nothing
                Select New prd_colour_mix With {.pid = prd_colour.prd_colour_id, .prdcode = prds.prd_sbcode & "-" & ct_colour.ct_colour_code, .prddesc = prds.prd_desc & "-" & ct_colour.ct_colour_desc, .prdLegacyCode = prd_colour.prd_legacy_code}).ToList 
```

这个查询应该返回大约 7k 条记录，存储过程大约需要 500ms 来执行

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:32:11.720

很可能它正在客户端执行您希望它在服务器端执行的操作。

下载[LINQPad](http://www.linqpad.net/)（免费），启动它并添加与数据源的连接，选择添加的数据源作为查询的活动数据源，将语言设置为“VB 语句”，然后运行它。在结果输出窗口中选择“SQL”选项卡并检查 SQL。然后您将看到在服务器端处理的表达式的哪些部分。

# android - RTSP 媒体播放器崩溃

> ID：11772542
> 
> 赞同：0
> 
> 时间：2012-08-02T07:02:40.680
> 
> 标签：android, rtsp, rtp, rtcp

我正在使用 HTC one X 测试（`RTSP`/ `RTP`/ `RTCP`）流式传输。完成`RTSP`会话后，我看到`UDP`数据包到达端口，几秒钟后，`ack`来自移动设备的鳍（在wireshark日志中）用于`RTSP`端口（`550`在我的情况下）。在使用 logcat 进行调试时，我看到以下几行

```
I/ARTSPConnection(  144): status: RTSP/1.0 200 OK
I/MyHandler(  144): SETUP(1) completed with result 0 (Success)
W/MyHandler(  144): Missing 'source' field in Transport response. Using RTSP endpoint
I/ARTSPConnection(  144): status: RTSP/1.0 200 OK
D/MyHandler(  144): play
I/MyHandler(  144): PLAY completed with result 0 (Success) 
I/MyHandler(  144): Range: npt=0.000000-116.000000
I/MyHandler(  144): mNpt1=0.000000,mNpt2=116.000000
D/MyHandler(  144): streamInfo[1] = url=rtsp://10.23.202.70/A91_amr.3gp/trackID=2;seq=62846;rtptime=905384278
D/MyHandler(  144): mURL[0] : rtsp://10.23.202.70:550/A91_amr.3gp/trackID=2
D/MyHandler(  144): Before checking, trackIndex : 0, mTracks.size : 1
D/MyHandler(  144): string val : rtsp://10.23.202.70/A91_amr.3gp/trackID=2
D/MyHandler(  144): After checking, trackIndex : 1, mTracks.size : 1
F/MyHandler(  144): ./frameworks/base/media/libstagefright/rtsp/MyHandler.h:1592 CHECK_LT(     trackIndex,mTracks.size()) failed: 1 vs. 1
F/libc    (  144): Fatal signal 11 (SIGSEGV) at 0xdeadbaad (code=1)
I/DEBUG   (  140): debuggerd: 1999-12-31 19:05:21 
```

我的服务器适用于许多其他型号。有没有人遇到过类似的问题。我一直在努力解决这个问题。如果有人能指出我的问题，那将有很大帮助。

# build - CorePlot 无法在 XCode 4.4 中构建

> ID：11772545
> 
> 赞同：6
> 
> 时间：2012-08-02T07:02:54.700
> 
> 标签：build, core-plot, xcode4.4

我正在使用 CorePlot 0.3，一切都很好，直到我将 XCode 升级到 4.4（2 天前），CorePlot 无法构建，我收到一些错误消息：

clang：错误：-Z-reserved-lib-stdc++：存在“-c”时未使用“链接器”输入 命令/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang 失败退出代码 1

我已经尝试搜索，似乎有很多人有同样的问题，我也找到了一些解决它的建议和解决方案，我已经应用到我的 CorePlot 版本但没有运气，问题出现在某些类中，例如：CPTPlot .m、CPTScatterPlot.m、CPTBarPlot.m、CPTPlotSymbol.m。

我在这个问题上花了两天时间，但仍然无法解决，请帮助我，在此先感谢。

![在此处输入图像描述](../Images/c4d5793a2223695722855b4fc3c977f1.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T15:04:58.500

最新的 coreplot 将解决 Xcode 4.4 的问题 - [https://github.com/djw/core-plot](https://github.com/djw/core-plot)

然而，我还没有让这些最新的更改在 Xcode 4.4 和 Xcode 4.3 中正常工作，所以如果你在不同版本的团队中工作，请小心。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T22:28:39.900

通过将构建选项中选定的编译器切换为“LLVM GCC 4.2”，我能够解决此问题。看起来验证设置操作是将编译器切换到“Apple LLVM 编译器 4.0”的原因。

# jsf - JSF 2.0；我的脸；仅使用 POST 提交表单

> ID：11772546
> 
> 赞同：2
> 
> 时间：2012-08-02T07:02:59.457
> 
> 标签：jsf, post, jsf-2, get, servlet-filters

我有一个安全问题，我不知道如何在 JSF 中执行此操作。在 PHP 中，我可以对定义为 POST 的表单提交做出反应，我只想通过 POST 获取值，因此无法通过 GET 从字段的相同名称获取值。

示例：
表单中的字段名：
我的 PHP 站点中的用户名我可以通过`$_POST["username"]`但不能通过获取值`$_GET["username"]`，因为我没有实现 GET 方式，只有 POST。

所以，现在我也想在我的 JSF 站点中使用它。
问题是，我不能只为所有请求实现 POST，我还必须对 GET 做出反应。
我只希望我的表单数据将通过 POST 发送到我的 bean，而不是通过 GET。

我怎样才能做到这一点？用过滤器还是别的什么？为了您的兴趣：我无法在我的应用程序中使用 JavaScript。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T07:38:32.207

我不确定我是否理解您的问题，但如果您只需要检查是否使用 POST 或 GET 调用了支持 bean 上的方法，您可以从 HttpServletRequest 对象中获取该信息，如下所示：

```
 @ManagedBean(name="myBean")
  @ViewScoped
  public class MyMBean implements Serializable{

    public void handleForm(){

        HttpServletRequest req = (HttpServletRequest)FacesContext.getCurrentInstance().getExternalContext().getRequest();

        if(req.getMethod().equalsIgnoreCase("POST")){

            //Handle your form data
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T11:43:20.233

只是检查[`FacesContext#isPostback()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#isPostback%28%29)。

```
if (FacesContext.getCurrentInstance().isPostback()) {
    // It's a JSF POST request.
} 
```

# delphi - 什么时候调用 OnResize 表单？

> ID：11772551
> 
> 赞同：0
> 
> 时间：2012-08-02T07:03:57.220
> 
> 标签：delphi

我在 Form OnResize 事件上放置了一些代码。但它似乎只在调整大小较大时才调用事件。有什么办法可以改变这个吗？

说我有

```
procedure TForm1.Resize(Sender: TObject);
begin
  RePaint();
end 
```

每次重新调整表单大小（大或小）时，我都想运行重绘。我想您可以添加一个检查宽度/高度的检查，但如果您要这样做，为什么还要使用事件调整大小？除了调整大小之外，也许还有另一个事件可以同时进行？谢谢格伦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T10:37:39.443

这里有两个问题。

首先，`OnResize`当窗体在任一方向调整大小时触发。时期。

其次，为什么当表格变小时`Repaint` *不起作用*，可能是因为你自己画的。正常情况下，只`Canvas.Cliprect`需要重新粉刷即可。当表格变小时，显示区域不变，剪切区域为空。毕竟，没有比以前更多的东西来画了。当表单*在一个方向*变大时，会发生类似的事情：剪切区域仅包含添加到表单表面的部分。同样，之前显示的区域保持不变并且没有更新。只有当表格向两个方向扩展时，剪裁区域就不能再由一个矩形组成，所以它才成为完整的曲面。

您的解决方案是通过调用`Invalidate`（或`Update`在必须立即重新绘制时）通知 Windows 在任何调整大小时重新绘制表单的全部内容，并在`OnPaint`事件中执行您的自定义绘制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T07:21:03.557

OnResize 事件在以任何方式调整窗体大小时触发，尽管它比以前更大或更小。

为了证明这一点，创建一个新项目，将备忘录放在一个干净的表单上，并将此代码添加到 OnResize 事件：

```
procedure TForm1.FormResize(Sender: TObject);
begin
  Memo1.Lines.Add(Format('%d,%d', [Width, Height]));
end; 
```

执行您的项目，并拖动表单的边缘以使其变大和变小，您会注意到它总是被触发，以及事件被触发的次数。

另请注意，表单有一个 OnPaint 事件，这可能就是您所追求的。

# xcode - 如何在xcode中使用标签显示标签的值？

> ID：11772552
> 
> 赞同：0
> 
> 时间：2012-08-02T07:03:58.380
> 
> 标签：xcode

我已经自动生成了一些标签，现在我需要通过使用 xcode 中的标签获取其他标签的值来覆盖标签中的值。

这是我的`onclick`代码：

```
- (IBAction)onClick1:(id)sender 
{

    NSString *title = [(UIButton *)sender currentTitle];
    NSLog(@"title ~~~~~~~~~~~ %@",title);
    for(i=0;i<vCount;i++) {
        pStr = [NSString stringWithFormat:@"%c",[pStrName characterAtIndex:i]];
        [pLblMyLable1 setTag:j+1];  
        iTag = [pLblMyLable1 tag];
        NSLog(@"ssssstttttrrrrriinnnngggg on click %@", pStr);
        if([title isEqualToString:pStr]){
            //pStr = [NSString stringWithFormat:@"%c",[pStrName characterAtIndex:i]];
            NSLog(@"came into if");
            pLblMyLable1.text = pStr;
        //pLblMyLable1 = [self.view viewWithTag:iTag];
        //  pStr = [pLblMyLable1.text:iTag];
            /*pLblMyLable1 = [self.view viewWithTag:1];
            pLblMyLable1 = [self.view viewWithTag:2];
            pLblMyLable1 = [self.view viewWithTag:3];
            pLblMyLable1 = [self.view viewWithTag:4];
            pLblMyLable1 = [self.view viewWithTag:5];
            pLblMyLable1 = [self.view viewWithTag:6];*/
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:46:33.410

这是我做的事情，因为我使用了一个标签....现在工作正常，有趣的是工作得很好

```
NSString *title = [(UIButton *)sender currentTitle];
for(i=0;i<vCount;i++) {
    for (NSString* key in Name){
        UILabel *Select = (UILabel*)[self.view viewWithTag:[key intValue]];
        if ([title isEqualToString:Select.text]) { 
        Str = [NSString stringWithFormat:@"%c",[pStrName characterAtIndex:i]]; 
```

}}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:20:44.257

您需要枚举所有仅抓取 UILabel 的子视图。这可以这样做：

```
for(UIView *subview in self.view.subviews){
    if([subview isKindOfClass:[UILabel class]]){
        NSLog(@"%d", [(UILabel*)subview tag]);
    }
} 
```

这应该让你朝着正确的方向前进。

编辑回应评论：你可以试试这个，看看它是否摆脱了错误。

```
for(UIView *subview in [self.view subviews]){
        if([subview isKindOfClass:[UILabel class]]){
            NSLog(@"%d", [subview tag]);
        }
} 
```

# c - 为什么在这种情况下没有发生填充？

> ID：11772553
> 
> 赞同：17
> 
> 时间：2012-08-02T07:04:02.900
> 
> 标签：c, structure, padding

据我所知，默认情况下将完成 4 字节对齐。说

```
typedef struct
{
     int data7;  
     unsigned char data8;
     //3 -bytes will be added here.
}Sample1; 
```

所以`sizeof(Sample1)`将是8。

但是对于以下结构，为什么没有发生填充？

```
typedef struct
{
     unsigned char data1;
     unsigned char data2;
     unsigned char data3;
     unsigned char data4;
     unsigned char data5;
     unsigned char data6;

}Sample2; 
```

但 sizeof(Sample2) 仅为 6。这个 Sample2 不是 4 字节对齐的结构吗？

**编辑：：**

根据维基

数据对齐意味着将数据放置在等于字大小的某个倍数的内存偏移处，由于 CPU 处理内存的方式，这会提高系统的性能。

但是 Sample2 的成员不会以 2 的倍数对齐吗？

谢谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-02T07:06:29.330

第二个结构中的所有字段都不需要 4 字节对齐。`unsigned char`只需要1字节对齐。因此，实际上不需要将其对齐到 4 个字节。

结构体通常只与所有字段的最大对齐方式对齐。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-02T07:06:38.733

`data7`是一个 4 字节的项目，因此编译器通常会尝试将其与 4 的倍数的地址对齐。

`data1`是一个单字节项目，因此编译器不会尝试将其与任何特定边界对齐（即，这样做不会有真正的好处）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-02T07:11:08.923

不，在典型的实现`Sample2`中不是 4-bute 对齐结构。它是一个 1 字节对齐的结构。

在典型的实现中，整个结构的对齐要求被计算为其各个成员的对齐要求的*最大值。*这就是为什么您`Sample1`的对齐要求为`int`（平台上的 4），而您`Sample2`的对齐要求`unsigned char`为 1，即 1。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-02T08:09:09.400

> Char 需要 1 个字节对齐。最大数据类型是 char ，这是一个字节对齐，因此您将大小设为“6”。

您可以查看此站点以获取更多了解。[http://www.geeksforgeeks.org/archives/9705](http://www.geeksforgeeks.org/archives/9705)。他们已经详细解释过了。

# algorithm - 查询n次时如何改进Dijkstra算法？

> ID：11772554
> 
> 赞同：2
> 
> 时间：2012-08-02T07:04:03.210
> 
> 标签：algorithm, optimization

我目前正在[Codechef](http://www.codechef.com/)解决一个问题。您可以在此处找到问题说明： [送货员](http://www.codechef.com/AUG12/problems/HOMDEL)

简而言之，问题是要求查询从 a到`n`a 的最短路径的时间。我的解决方案是使用with plus 将结果缓存到 a中，以防我们已经有一个. 不幸的是，我得到了很多次，我找不到更好的方法来让它更快。我想知道我在正确的轨道上吗？或者有更好的算法来解决这个问题？`start``end``Dijsktra``priority_queue``hash_map``start``time limit exceed`

顺便说一句，由于比赛仍在进行，请不要发布任何解决方案。一个提示对我来说绰绰有余。谢谢。

这是我的尝试：

```
#ifdef __GNUC__
#include <ext/hash_map>
#else
#include <hash_map>
#endif

#include <iostream>
#include <iomanip>
#include <vector>
#include <string>
#include <algorithm>
#include <map>
#include <set>
#include <utility>
#include <stack>
#include <deque>
#include <queue>
#include <fstream>

#include <cstdio>
#include <cstdlib>
#include <cstring>
#include <cmath>
#include <cassert>

using namespace std;

#ifdef __GNUC__
namespace std {
    using namespace __gnu_cxx;
}
#endif

const int   MAX_VERTICES = 250;
const int   INFINIY = (1 << 28);
int         weight[MAX_VERTICES + 1][MAX_VERTICES + 1];
bool        visited_start[MAX_VERTICES + 1] = { 0 };

struct vertex {
    int node;
    int cost;

    vertex(int node = 0, int cost = 0)
        : node(node), cost(cost) {
    }

    bool operator <(const vertex& rhs) const {
        return cost < rhs.cost;
    }

    bool operator >(const vertex& rhs) const {
        return cost > rhs.cost;
    }
};

hash_map<int, vector<vertex> > cache;
typedef priority_queue<vertex, vector<vertex>, greater<vertex> > min_pq;

vector<vertex> dijkstra_compute_path(int start, int n) {
    min_pq pq;
    vector<vertex> path;
    vector<int> visited(n, 0);
    int min_cost = 0;
    int better_cost;
    vertex u;

    for (int i = 0; i < n; ++i) {
        path.push_back(vertex(i, INFINIY));
    }

    path[start].cost = 0;
    pq.push(vertex(start, path[start].cost));

    while (!pq.empty()) {
        // extract min cost
        u = pq.top();
        pq.pop();

        // mark it as visited
        visited[u.node] = 1;

        // for each vertex v that is adjacent to u
        for (int v = 0; v < n; ++v) {
            // if it's not visited, visit it
            if (visited[v] == 0) {
                better_cost = path[u.node].cost + weight[u.node][v]; 
                // update cost
                if (path[v].cost > better_cost) {
                    path[v].cost = better_cost;
                    pq.push(vertex(v, path[v].cost));
                }
            }
        }
    }

    return path;
}

void check_in_cache(vector<vertex>& path, int start, int no_street) {
    if (visited_start[start] == 0) {
        path = dijkstra_compute_path(start, no_street);
        cache.insert(make_pair(start, path));
        visited_start[start] = 1;
    }
    else {
        path = cache[start];
    }
}

void display_cost(int stop_at_gas_cost, int direct_cost) {
    printf("%d ", stop_at_gas_cost);
    if (stop_at_gas_cost > direct_cost) {
        printf("%d\n", stop_at_gas_cost - direct_cost);
    }
    else {
        printf("0\n");
    }
}

void handle_case_one() {
    int no_scenario;
    int dummy;
    int s, g, d;

    scanf("%d", &dummy);
    scanf("%d", &no_scenario);
    for (int i = 0; i < no_scenario; ++i) {
        scanf("%d %d %d", &s, &g, &d);
        printf("0 0\n");
    }
}

void inout_delivery_boy() {
    int no_street;
    int no_scenario;
    int restaurant;
    int gas_station;
    int destination;
    int stop_at_gas_cost;
    int direct_cost;
    vector<vertex> direct;
    vector<vertex> indirect;
    vector<vertex> d;
    int c;

    scanf("%d", &no_street);
    if (no_street == 1) {
        handle_case_one();
        return;
    }

    for (int x = 0; x < no_street; ++x) {
        for (int y = 0; y < no_street; ++y) {
            scanf("%d", &c);
            weight[x][y] = c;
        }
    }

    for (int i = 0; i < no_street; ++i) {
        d.push_back(vertex(i, INFINIY));
    }

    scanf("%d", &no_scenario);
    for (int i = 0; i < no_scenario; ++i) {
        scanf("%d %d %d", &restaurant, &gas_station, &destination);

        // check in cache
        check_in_cache(direct, restaurant, no_street);
        check_in_cache(indirect, gas_station, no_street);

        // calculate the cost
        stop_at_gas_cost = direct[gas_station].cost + indirect[destination].cost;
        direct_cost = direct[destination].cost;

        // output
        display_cost(stop_at_gas_cost, direct_cost);
    }
}

void dijkstra_test(istream& in) {
    int start;
    int no_street;
    int temp[4] = { 0 };
    vector<vertex> path;

    in >> no_street;
    for (int x = 0; x < no_street; ++x) {
        for (int y = 0; y < no_street; ++y) {
            in >> weight[x][y];
        }
    }

    // arrange
    start = 0;
    temp[0] = 0;
    temp[1] = 2;
    temp[2] = 1;
    temp[3] = 3;

    // act
    path = dijkstra_compute_path(start, no_street);

    // assert
    for (int i = 0; i < no_street; ++i) {
        assert(path[i].cost == temp[i]);
    }

    // arrange
    start = 1;
    temp[0] = 1;
    temp[1] = 0;
    temp[2] = 2;
    temp[3] = 4;

    // act
    path = dijkstra_compute_path(start, no_street);

    // assert
    for (int i = 0; i < no_street; ++i) {
        assert(path[i].cost == temp[i]);
    }

    // arrange
    start = 2;
    temp[0] = 2;
    temp[1] = 1;
    temp[2] = 0;
    temp[3] = 3;

    // act
    path = dijkstra_compute_path(start, no_street);
    // assert
    for (int i = 0; i < no_street; ++i) {
        assert(path[i].cost == temp[i]);
    }

    // arrange
    start = 3;
    temp[0] = 1;
    temp[1] = 1;
    temp[2] = 1;
    temp[3] = 0;

    // act
    path = dijkstra_compute_path(start, no_street);
    // assert
    for (int i = 0; i < no_street; ++i) {
        assert(path[i].cost == temp[i]);
    }
}

int main() {
    // ifstream inf("test_data.txt");
    // dijkstra_test(inf);
    inout_delivery_boy();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T07:37:29.333

请注意问题中的 N 很小。您是否尝试过 Floyd 最短路径算法来预先计算每两个节点之间的最短路径？它将花费 O(N^3) 时间，即问题中的 250^3=15625000，应该很容易在 1 秒内完成运行。然后您可以在 O(1) 中回答每个查询。

弗洛伊德的介绍：

[http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)

ps：我认为缓存的dijstra对于整个测试用例的最大运行时间也是O（N ^ 3）。但是你实现缓存的方式会在内存复制上花费更多不必要的时间，这可能会导致 TLE。只是一个猜测。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T13:32:51.033

事实上，在这种情况下，Floyd-Warshall 的算法比 Dijkstra 的算法要好，Dijkstra 的复杂度是 O(m*n^2)，在这个问题中，M 远高于 N，所以 Floyd-的 O(n^3) 时间复杂度华夏尔更好。

# iphone - 透明的 UIImage

> ID：11772557
> 
> 赞同：0
> 
> 时间：2012-08-02T07:04:12.217
> 
> 标签：iphone, ios, xcode, ipad, ipod

我正在创建一个 iOS 应用程序，其中添加了一个简单的 UIImage。我想在图像中添加透明效果以显示该主图像后面的其他图像。告诉我怎样才能达到这个效果？

**注意：**我不想更改图像的不透明度/alpha。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T07:10:36.950

Alpha 更改是您更改透明度的方式。除此之外，您还想在视图级别上更改它，而不是`UIImage`直接更改。前任：

```
[myImageView setImage:[UIImage imageNamed@"myImage.png"]];
[myImageView setAlpha:0.7f]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T07:06:20.030

使用带有 alpha 通道的 png 格式的图像：alpha 通道是告诉每个像素有多少透明的层

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T07:15:36.147

这个怎么样：

```
self.imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0.0f,0.0f,1024.0f,768.0f)];
self.imageView.backgroundColor = [UIColor colorWithRed:255 green:255 blue:255 alpha:0.5];
[self.view addSubview:self.imageView];

or set its alpha
imageView.alpha = 0.5; 
```

但一定要实例化imageView，作为属性然后合成。

# ios - FTP、Blackraccoon 内存泄漏

> ID：11772558
> 
> 赞同：0
> 
> 时间：2012-08-02T07:04:14.967
> 
> 标签：ios, ftp, automatic-ref-counting, blackraccoon

我正在使用 Blackraccoon FTP 客户端进行 FTP 操作，使用 ARC。但我的仪器出现泄漏。
但示例应用程序中没有泄漏这是我的代码

```
 BRRequestCreateDirectory  *createEventDir = [BRRequestCreateDirectory initWithDelegate:nil];
//NSString *EventCode = [[NSUserDefaults standardUserDefaults] stringForKey:kEventCodeKey];
createEventDir.path = @"/12341234";
createEventDir.hostname = @"media.example.com/httpdocs/events/";
createEventDir.username = @"badboy";
createEventDir.password = @"hai!";
createEventDir.tag = 103;
[createEventDir start];
createEventDir = nil; 
```

**[来自FTP 客户端 Blackraccoon FTP 客户端](https://github.com/lloydsargent/BlackRaccoon)**的示例代码**

![在此处输入图像描述](../Images/e2181d05acba45eb84afacc4574e7a8c.png)**

 **仪器中出现泄漏，但我正在使用 ARC，任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T01:15:35.230

我移植并大量修改了 BlackRaccoon。它旨在使用委托。换句话说，代表是必需的。

```
BRRequestCreateDirectory  *createEventDir = [BRRequestCreateDirectory      initWithDelegate:nil];
//NSString *EventCode = [[NSUserDefaults standardUserDefaults]     stringForKey:kEventCodeKey];
createEventDir.path = @"/12341234";
createEventDir.hostname = @"media.example.com/httpdocs/events/";
createEventDir.username = @"badboy";
createEventDir.password = @"hai!";
createEventDir.tag = 103;
[createEventDir start];
createEventDir = nil; 
```

是不正确的。它开始了很多事情，然后删除了对象 - 动作未定义。

相反，您需要我提供的代码中指示的东西（不会泄漏）。

首先，使用 ftp 的类需要有 BRRequestDelegate 来指示委托协议。

```
- (IBAction) createDirectory:(id)sender
{
    //----- createEventDir must be a variable in your class...

    createEventDir = [BRRequestCreateDirectory initWithDelegate: self];

    createEventDir.path = @"/12341234;
    createEventDir.hostname = @"media.example.com/httpdocs/events/";
    createEventDir.username = @"badboy";
    createEventDir.password = @"hai!";
    [createEventDir start];

    //----- createEventDir MUST NOT BE DELETED OR SET TO NIL HERE
} 
```

然后你必须有两个代表（至少）：

```
-(void) requestCompleted: (BRRequest *) request
{
    //----- handle Create Directory
    if (request == createEventDir)
    {
        NSLog(@"%@ completed!", request);
        //----- everything is done, NOW you can set it to nil
        createEventDir = nil;
    }
}  

-(void) requestFailed: (BRRequest *) request
{
    if (request == createEventDir)
    {
        NSLog(@"%@", request.error.message);
        //----- everything is done, NOW you can set it to nil
        createEventDir = nil;
    }
} 
```

如果你回去看看我的测试代码，你会看到事情是如何工作的。如果您仍有问题，请在[http://github.com/lloydsargent/BlackRaccoon上发布问题](http://github.com/lloydsargent/BlackRaccoon)

希望这会让你克服你的问题。**

# c++ - gcc 的扩展初始化程序列出警告

> ID：11772560
> 
> 赞同：2
> 
> 时间：2012-08-02T07:04:19.873
> 
> 标签：c++, gcc, g++

`gcc`将警告以下示例代码：

```
struct someStruct {
    char c;
    int i;
};

int main() {
    someStruct s { 'a', 3 };

    return 0;
} 
```

> 警告：扩展初始化列表仅适用于 -std=c++0x 或 -std=gnu++0x

我想让我的代码与不支持 C++11 的旧编译器兼容。现在，当我尝试使用其中任何一个编译它时，`-std=c++98`它`-ansi -pedantic`仍然会发出相同的警告并编译。

这是编译器错误还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T07:06:08.000

你错过了一个`=`：

```
someStruct s = { 'a', 3 }; 
```

# c# - C# 分离 args 参数

> ID：11772561
> 
> 赞同：2
> 
> 时间：2012-08-02T07:04:21.097
> 
> 标签：c#, arrays, cmd

我有一个计算多个数字的阶乘的程序。这些 nuber 在 cmd 中作为参数传递，如下所示：

```
factorial.exe 3 4 5 
```

这将分别计算 3、4 和 5 的阶乘。该程序的早期版本有一个百分比来显示堆栈的完整度。我现在想把它带回来，但我也将等待时间作为 cmd 中的参数传递，如下所示：

```
factorial.exe 3 4 5 wait_time1 
```

或者

```
factorial.exe 3 4 5 1000 
```

要读取我使用这个 args 解析器的数字：

```
static string the_time;
    public static void Main(string[] args)
    {

        foreach (string s in args)
        {

            extra = int.Parse(s);

            Calculate(extra);
        }
     } 
```

我怎样才能分开论点？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T07:06:14.647

`waittime`您可以像开关一样添加arg，`/t:100`因此只有当您看到它时才`/t`知道它是`waittime`.

如果您知道您的 args 将始终具有`waittime`，那么`waittime`是

```
waittime = arg[args.Length-1] 
```

可能也值得一看

*   [在 C# 中解析命令行参数的最佳方法是什么？](https://stackoverflow.com/questions/491595/best-way-to-parse-command-line-arguments-in-c)

如果您不想重新发明轮子

*   [http://commandline.codeplex.com/](http://commandline.codeplex.com/)
*   [http://www.codeproject.com/Articles/3852/Automatic-Command-Line-Parsing-in-C](http://www.codeproject.com/Articles/3852/Automatic-Command-Line-Parsing-in-C)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T07:07:54.870

我认为，您想要的是类似于 UNIX 机器上的 getopt 以合理的方式解析参数。看看[这里](http://getopt.codeplex.com/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T07:05:20.787

数组中的每个元素都是来自命令行的字符串，以空格分隔。这样，对于

```
factorial.exe 3 4 5 
```

你会有吗

```
args[0] //3
args[1] //4
args[2] //5 
```

**编辑**

感谢 DD59，现在我明白了你的问题。您可以约定最后一个参数始终是等待时间，或者您可以使用语法，例如`-time`（或`/t:`，如他所说）。

```
factorial.exe 3 4 5 -1000 
```

问候

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T07:09:15.063

您已经在 foreach 循环中分离了参数。字符串 s 是您作为参数得到的。我想您想确定 wait_time 值，当然不想计算它。你必须像这样固定位置 - 最后一个参数是 wait_time 或第一个参数是。如果不固定位置，将很难确定。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T07:14:27.197

wait_time 是强制性参数吗？它总是站在最后吗？然后你可以这样做：

```
the_time = args[args.Length - 1];
for (int i=0; i<args.length - 1; i++){ 
    extra = int.Parse(args[i]); 
    Calculate(extra); 
} 
```

如果 wait_time 是可选的，您应该选择 DD59 的答案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T07:19:40.560

解析命令行是一个相当复杂的部分。也许你应该看看一个可用的库（一些例子）：

*   [http://commandline.codeplex.com/](http://commandline.codeplex.com/)
*   [https://github.com/mono/mono/tree/master/mcs/class/Mono.Options/](https://github.com/mono/mono/tree/master/mcs/class/Mono.Options/)

# xml - 在可以在任何地方的节点内搜索数据

> ID：11772563
> 
> 赞同：1
> 
> 时间：2012-08-02T07:04:28.907
> 
> 标签：xml, xpath, xquery

我有一个标签`<H>some data</H>`。此标记可以出现在 XML 文件中的任何位置。下面是一个例子——

```
<Name>This is some data. It is an <H>highlighted text</H></Name>
  <DDesc>Here is the Detailed <H>Description</H>
     <Features>Following are the important <H>features of</H> the product</Features>
         <Construction>Some text <H>goes here</H></Construction>
         <Design>Some design <H>stuff</H> information</Design>
     </Features>
  </DDesc>
</Name> 
```

现在我想获取`<H>..</H>`标签的内容。这个标签被用于所有标签。如何得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:27:20.850

**为此使用通用语法：**

```
//ElementName 
```

这将返回名为 的根元素的所有后代元素`ElementName`。请注意，给予`/`意味着`child::`where as`//`意味着`descendant::`。

如果您想在根目录中返回后代元素，请使用以下内容：

```
//* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:52:56.767

**只需使用**：

```
//H/text() 
```

`H`这将选择作为 XML 文档中任何元素的子元素的任何文本节点。

# c# - 布尔计算

> ID：11772565
> 
> 赞同：0
> 
> 时间：2012-08-02T07:04:37.377
> 
> 标签：c#, asp.net, boolean

我有一个下拉列表，其中存储了 3 个元素。

```
<asp:DropDownList ID="DropDownList4" runat="server" AutoPostBack="True" 
                Height="22px" Width="134px">
                <asp:ListItem>Please Choose</asp:ListItem>
                <asp:ListItem>Yes</asp:ListItem>
                <asp:ListItem>No</asp:ListItem>
            </asp:DropDownList> 
```

当用户在下拉菜单中选择 Yes 时，YES 将存储在 session 中。司机服务将向用户收取 30 美元。

```
 Session["IsChauffeurUsed"] = DropDownList4.SelectedItem.Selected; 
```

事情是如果用户选择是，用户必须支付的当前金额是

```
 int totalValue = 0;
    int total = 0;
    totalValue = int.Parse(Session["price"].ToString()) * int.Parse(Session["day"].ToString()); 
    Label8.Text = totalValue.ToString(); 
```

* **Label8.text 将加 30（如果用户选择是）**

我卡在粗线。如果用户选择是，我不知道如何在 totalValue 中添加 30 我希望你们可以帮助我。干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T07:14:20.977

您必须检查您的会话值（如果需要添加检查 null），然后有条件地添加该值

```
If (Session["IsChauffeurUsed"].ToString() == "Yes")
      totalValue +=30 ;
Label8.Text = totalValue.ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T07:16:36.833

尽管我觉得拿东西很可怕，但打电话`ToString()`给它，然后`Type.Parse()`在这个字符串上你可以解决这个问题，如下所示：

```
totalValue = int.Parse(Session["price"].ToString()) * int.Parse(Session["day"].ToString()); 
totalValue += Session["IsChauffeurUsed"].ToString().Equals("yes", StringComparer.CurrentCultureIgnoreCase) ? 30 : 0; 
```

# linux - 在其他构建环境中编译

> ID：11772569
> 
> 赞同：0
> 
> 时间：2012-08-02T07:05:07.533
> 
> 标签：linux, gcc, glibc, opensuse

所以我们有这个程序，它正在 OpenSuse 13.1 中编译，配置如下：

*   GCC 4.6-15.1.3
*   GLIBC 2.14
*   加密货币 1.0

但是，它应该与具有以下配置的 OpenSuse 10.3 一起运行：

*   海湾合作委员会 4.2-24
*   GLIBC 2.6.1-18
*   Libcrypto 0.9.8

到目前为止，我能找到的唯一依赖`__isoc99_sscanf`项是 GLIBC 2.7 中引入的。我尝试通过编写自己的 sscanf 函数来解决此问题，并通过在源代码中添加以下行来替换它： `__asm__(".symver __isoc99_sscanf1, __isoc99_sscanf@@GLIBC_2.7");`

现在我留下了 libcrypto 依赖项，当我尝试在旧的 OpenSuse 环境中运行它时，它看起来也在 munmap() （当我 strace 程序时）函数上出现段错误（可能是 GCC 的东西？）

所以基本上，我真的不知道解决这种向后兼容性问题的标准程序是什么。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:41:09.213

通常，您只需在新操作系统上安装较旧的 gcc、glibc 和其他库（因此通常作为 RPM 提供）并确保仅使用这些库进行编译。尝试自己解决所有向后不兼容的问题是一场艰苦的战斗。

为了更彻底，您可以在旧操作系统的 chroot 中构建，甚至可以将其打包到 RPM 中，以便自动检查依赖关系。[Open Build Service](http://build.opensuse.org)之类的东西使这变得非常容易。

# java - 下载html源代码并加载

> ID：11772571
> 
> 赞同：0
> 
> 时间：2012-08-02T07:05:14.943
> 
> 标签：java, android, html, web-testing

我从这里找到了这段代码[下载 html 源代码 android?](https://stackoverflow.com/questions/3067827/download-html-source-android) . 但是当我尝试运行它时，我的程序不断崩溃。我已经添加了互联网权限。有什么想法吗？

编辑：这是完整的错误消息。08-02 00:16:47.364：E/EmbeddedLogger(1577)：获取包标签时出错：com.jimmyc.lawrenceh.schedulinglookup

Edit2：它适用于 Android 2.2，但不适用于 Android 4.0/3.0。

```
 private void initialize() {
      //initialize variables here
      try {
          getHtml();
      }
      catch (IOException e) {
          // TODO Auto-generated catch block
          e.printStackTrace();
      }
    }

    public void getHtml() throws ClientProtocolException, IOException {
        HttpClient httpClient = new DefaultHttpClient();
        HttpContext localContext = new BasicHttpContext();
        HttpGet httpGet = new HttpGet("http://www.yahoo.com");
        HttpResponse response = httpClient.execute(httpGet, localContext);
        String result = "";

        BufferedReader reader = 
            new BufferedReader(new InputStreamReader(response.getEntity().getContent()));

        String line = null;
        while ((line = reader.readLine()) != null){
            result += line + "\n";
            // Toast.makeText(Connect.this, line.toString(), Toast.LENGTH_LONG).show();

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:41:57.437

我认为您正在尝试在 UI 线程中下载 HTML 代码。尝试在后台下载它，使用[AsynkTask](http://developer.android.com/reference/android/os/AsyncTask.html)

编辑。如果您说它适用于 Android 2.2 但不适用于 Android 4.0/3.0，我完全确定您正在尝试在 UI 线程中下载它。从 Android 3.0 开始，[您不能在 UI 线程中执行长进程，](http://developer.android.com/guide/practices/seamlessness.html#threads)因为您可以阻止它。您必须在[不同的线程](http://developer.android.com/guide/components/processes-and-threads.html#ThreadSafe)
PS 中进行下载。对不起我的英语不好。

# c# - 为什么 (HttpWebResponse)request.GetResponse() 方法返回错误页面的状态码 200？

> ID：11772579
> 
> 赞同：1
> 
> 时间：2012-08-02T07:05:25.603
> 
> 标签：c#

(HttpWebResponse)request.GetResponse() 方法返回错误页面的状态码 200 而不是状态码 400。

网址是

[http://onlinehelp.microsoft.com/zh-cht/office365-smallbusinesses/hh911992.aspx](http://onlinehelp.microsoft.com/zh-cht/office365-smallbusinesses/hh911992.aspx)

当我们在浏览器中打开上述网址时，它会显示错误页面，并显示“抱歉！我们无法满足您的请求。”

但是从 webresponse 返回的状态码是 200。

我为它编写的代码是

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(loclink);
HttpWebResponse response = (HttpWebResponse)request.GetResponse();
code = (int)response.StatusCode; 
```

请帮我跟踪这种类型的网址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:18:58.973

老实说，感觉不对。我也去过那里，同样感到困惑。

这是一个所谓的“软错误页面”。这是因为网络服务器在遇到错误时会将您重定向到该页面，而不是传输实际的错误页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:52:50.713

在尝试验证我们的一个站点的安全指标问题时，我遇到了这个问题。

您收到 200 响应而不是 400 的原因是因为服务器正在优雅地处理错误，而不是向您显示实际的错误页面，它正在捕获它并将您重定向到友好的“发生意外错误”页面显然会显示 200 响应。

[要获取实际的错误代码，您可以尝试通过以下方式在Telnet](http://support.microsoft.com/kb/279466)中请求页面：

`GET /zh-cht/office365-smallbusinesses/hh911992.aspx`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T07:14:24.010

似乎此服务器不强制错误页面的状态代码，因此您可以尝试检查此页面是否包含特殊元素/单词。

# android - 共享首选项

> ID：11772580
> 
> 赞同：-2
> 
> 时间：2012-08-02T07:05:30.633
> 
> 标签：android

我正在创建一个`SharedPreferences`，只有当我像这样启动 Activity 时它才能工作：

```
myIntent.putExtra("prefName", MYPREFS);
startActivity(myIntent); 
```

但是我的 SharedPreferences 在我保存并回击几次后无法正常工作，进入菜单页面并转到我想要获取我的偏好的页面。

任何人都可以帮助我吗？

下面的代码：

这是我保存偏好的地方：

```
String MYPREFS = "MyPref";
SharedPreferences mySharedPreferences;
SharedPreferences.Editor myEditor; 
```

在 onCreate 里面：

```
mySharedPreferences = getSharedPreferences(MYPREFS,0);
myEditor = mySharedPreferences.edit(); 
```

内部按钮 onClickListener：

```
 myEditor.putString("address", AddressET.getText().toString());
    myEditor.putString("contact", ContactET.getText().toString());
    myEditor.commit();

Intent myIntent = new Intent(myContext, nok_individual_particular.class);
myIntent.putExtra("prefName", MYPREFS);
startActivity(myIntent); 
```

* * *

这是我传递给的活动：

```
SharedPreferences mySharedPreferences; 
```

在 onCreate 里面：

```
Intent myReceivingIntent = getIntent();
String myPREFName = myReceivingIntent.getStringExtra("prefName");

mySharedPreferences = getSharedPreferences(myPREFName, 0);

applySavedPreferences(); 
```

在 applySavedPreferences 方法中：

```
 String addressValue = mySharedPreferences.getString("address", "Jack Smith");
String contactValue = mySharedPreferences.getString("contact", "Jack Smith");   

addressTV.setText(addressValue);
contactTV.setText(contactValue); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T07:25:16.843

SharedPreferences：这就是它的工作原理
**要保存您的数据**：

```
SharedPreferences sPrefs = getSharedPreferences("prefsName", 0);
SharedPreferences.Editor editor = sPrefs.edit();
editor.putString("valueName", "value");
editor.commit(); 
```

**要检索您的数据：**

```
SharedPreferences sPrefs = getSharedPreferences("prefsName", 0);
String strMyData = sPrefs.getString("valueName", "default value"); 
```

上面的示例是如何设置字符串并检索它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T07:12:12.620

您没有使用`SharedPreferences`. 在您的示例中，您将额外的内容传递给活动，但这只会使新活动的值可用，它不会将值保存到`SharedPreferences`.

要使用`SharedPreferences`，您必须执行以下操作：

## 节省

```
PreferenceManager.getDefaultSharedPreferences(this).edit().putString("prefName", "String to save").commit(); 
```

## 得到

```
String value = PreferenceManager.getDefaultSharedPreferences(this).getString("prefName"), "default value"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T09:17:12.983

我更喜欢使用 SharedPreferences 来保存我的数据并在我的整个课程中使用它，而且它们将被保存到设备中，即使在应用程序被终止后也可以使用它们......这是你的一个例子！

```
//Some String that I should remember, I am just using the package name for now
String app = this.getPackageName();/*This is going to be used more like a file to save my stuff to*/
//Setting our sharedpreferences
SharedPreferences sha = sha = getApplicationContext().getSharedPreferences(app, SherlockActivity.MODE_PRIVATE);

String myString = "This is the String that you want to save so you can use among your classes"

//Now we call in an editor for that SharedPreferences so we can write and delete stuff from it .

Editor edit = sha.edit();

//Now we insert our String.
edit.putString("Something_you_can_remember" , myString);//You will need the "Something_you_can_remember" a few lines ahead , so remember it !
edit.apply(); //Or we can use edit.commit() , but I prefer apply()

//Now our String is saved ! So lets read it !

String whatever = sha.getString("Something_you_can_remember" , "The String incase myString didn't even exist , saves you from a NullPointerException");

//Here we go ! Now we have our String saved and can be readable among the classes !
//Also , if you wanted to delete that String or whatever you "put" in there , you can call

edit.remove("Something_you_can_remember"); //or edit.clear() to remove all the values stored ! 
```

希望这可以帮助 ！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T07:14:30.553

后`mySharedPreferences.edit();`

```
mySharedPreferences.commit(); 
```

应该是你的最后一行。这使您能够保存并关闭您已编辑的 SharedPreferences 文件。

好吧，您不需要以意图和所有方式传递 sharedprefs。它将在您的应用程序中的所有活动中可用。

只需调用`SharedPreferences my_prefs= getSharedPreferences("Pref_name", 0);`，然后您就可以引用该 SharedPreferences 文件，然后您就可以从中检索值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-21T06:06:16.100

您不需要通过意图传递 SharedPreferences，因为 SharedPreferences 可用于整个应用程序并且任何活动都可以访问它。

你可以参考下面的例子：

通过给他们您选择的名称来创建 SharedPreferences：

```
SharedPreferences pref = getSharedPreferences("MyPref", MODE_PRIVATE); 
```

或使用默认 SharedPreferences：

```
SharedPreferences sharedPrefs = PreferenceManager.getDefaultSharedPreferences(this); 
```

通过上述任何方法在代码中的任何位置使用您的首选项文件。无需传递到不同的活动。

一旦您调用上述任何方法，如果您的应用程序不存在该名称的首选项文件，android 将为您创建一个。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-19T16:11:30.153

**节省**

```
SharedPreferences sp = getSharedPreferences("key", 0);
 SharedPreferences.Editor sedt = sp.edit();
 sedt.putString("valueName", "String to save");
 sedt.commit(); 
```

**得到**

```
 SharedPreferences sp = getSharedPreferences("key", 0);
 String valueName = sp.getString("valueName",""); 
```

# jquery - jQuery 无法访问寻找的 DOM 元素

> ID：11772583
> 
> 赞同：2
> 
> 时间：2012-08-02T07:05:37.750
> 
> 标签：jquery, html, dom, css-selectors

我有以下 HTML 元素；

```
<div id="divOrderContainer">
 <ul id="ulOrders">
<li id="liAck">
  <div id="divViewOrderTitle"></div>
  <div id="divViewOrderSpacer"></div>
  <div id="divAcknowledgeItems"></div>              
</li>
<li id="liTemp">
  <div id="divViewOrderTitle">test</div>
  <div id="divViewOrderSpacer"></div>
  <div id="divTempItems"></div>
</li>
 </ul>          
</div> 
```

在页面准备就绪时，我执行 ajax 请求，然后在响应时将其插入到现有的 DOM 树中，例如；

```
htmlBuilder_Temp = htmlBuilder_Temp + '<li><table id="tableTemp">' +
 '<tr>' +
'<th>Ia</th>' +
'<th>Den</th>' +
'<th>Unt</th>' +
'<th>Ory</th>' +
'<th></th>' +
 '</tr>';               
htmlBuilder_Temp = htmlBuilder_Temp + 
 '<tr>' +
'<td> a </td>' +
'<td ""> +b+ </td>' +
'<td> +c+ </td>' +
'<td> +d+ </td>' +
'<td><span id="span'+posid+'">delete<span></td>' +
 '</tr>';           
htmlBuilder_Ack = htmlBuilder_Ack + '</table></li>'; 
```

新元素的附加“总是”成功，

所以这是我的问题，我想将点击处理程序附加到下的每个跨度

```
Table>tr>td>span, 
```

当点击时会提醒我元素 id 但是，当我尝试检查是否附加了点击处理程序时，没有，

单击处理程序代码：

```
$("#divTempItem > table > tbody > tr").('click', 'td span', function(){
   alert($(this).attr("id");
}); 
```

我也试过；

```
$("#tableTemp").on('click', 'tr td span', function(){
   alert($(this).attr("id");
}); 
```

但无济于事，似乎我无法访问我正在寻找的特定 DOM 元素......访问名称“span”+number 并不能解决我的问题，

我是不是错过了什么，

这是输出 DOM 树的视图；我已经删除了最后的结束标签，我认为这就足够了......

```
<div id="divOrderContainer">
   <ul id="ulOrders">
      <li id="liAck"></li>
      <li id="liTemp">
          <div id="divViewOrderTitle">test</div>
          <div id="divViewOrderSpacer"></div>
          <div id="divTempItems">
            <li>
               <table id="tableTemp">
                  <tbody>
                     <tr>                         
                       <td> a </td>
                       <td> b </td>
                       <td> c </td>
                       <td> d </td>
                       <td><span id="span8">delete</span></td>
                     </tr>                         
                   </tbody>
                </table> 
```

到底是谁自动创建了“TBODY”元素？

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T07:08:28.050

从您对问题的描述看来，从 Ajax 部分来看，在绑定事件的点上，该表不存在于 DOM 中，而是我建议绑定到`li`DOM 中存在的元素`DOMReady`：

```
$('#divTempItems li').on('click', 'td', function(e){
    alert(this.id);
}); 
```

请注意，您的 HTML 无效（如粘贴在后面的代码块中），因为 a`li`必须出现在并且只能出现在 a `ul`or`ol`元素中，并且`div`元素不能是 a`ul`或的直接子元素`ol`。重复`id`s 也是无效的，在文档中`id` ***必须***是唯一的。

在`tbody`呈现表格元素时，大多数（如果不是全部）浏览器会自动创建。虽然我记得规范说它们是可选的，但浏览器似乎不同意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:49:03.147

可能你可以改变这一行：

```
'<td><span id="span'+posid+'">delete<span></td>' + 
```

到

```
'<td><span id="span'+posid+'" onclick='+'"delete(this)">delete<span></td>' + 
```

函数是

```
function delete(obj){
   alert($(obj).arrt('id'));
} 
```

# mysql - 查询验证反作弊系统

> ID：11772588
> 
> 赞同：0
> 
> 时间：2012-08-02T07:06:03.257
> 
> 标签：mysql

我有一个基本上为特定用户收集选票的表格：

```
ID | user_id | ip | timestamp 
```

每次有人为用户投票时，都会创建一个条目，记录他们投票的 user_id、他们的 IP 地址以及时间和日期。为了防止作弊，我们不允许每个用户每个 IP 每天超过 20 票。

现在我想从给定日期开始验证这些投票，我自己提出了以下查询，但我绝不是专家，所以如果有人能告诉我我是否正确，我将不胜感激它。

```
SELECT count(*) As `votes`, user_id, ip, DATE( timestamp ) the_date
FROM `user_votes`
GROUP BY user_id, ip, the_date
HAVING the_date > '2012-07-26'
ORDER BY the_date ASC, user_id ASC, votes DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:09:56.520

尝试这个：

```
SELECT count(*) As `votes`, user_id, ip, DATE( timestamp ) the_date
FROM `user_votes`
where the_date > '2012-07-26'
GROUP BY user_id, ip, DATE( timestamp )
having count(*)>20 
ORDER BY DATE( timestamp ) ASC, user_id ASC, votes DESC 
```

count(*)>20 会让你的计数超过 20

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:10:25.850

要获得有效票数的用户，您可以尝试以下操作：

```
SELECT COUNT(*) As `votes`, user_id, ip, DATE( timestamp ) the_date
FROM `user_votes`
WHERE DATE(timestamp ) > '2012-07-26'
GROUP BY user_id, ip, the_date
HAVING COUNT(*) <= 20
ORDER BY the_date ASC, user_id ASC, votes DESC; 
```

# python - plone 的 D2C 条目如何用作另一个具有额外输入字段的表单的输入？

> ID：11772599
> 
> 赞同：0
> 
> 时间：2012-08-02T07:06:54.457
> 
> 标签：python, plone, ploneformgen

我使用 ploneformgen 创建了一个输入表单，其中包含 2 个输入字段和 1 个文件字段。使用将数据保存到内容适配器保存输入后，我触发了一条规则，将其移动到另一个表单文件夹/文件夹。此数据应与新文件夹中的**新输入字段一起可编辑。**在以前的表单中，这些输入字段根本不可用的情况。如果现在保存数据，它应该有，条目为 1 条记录，所有字段属性包括新字段输入。**或者** 至少我怎样才能获得一个选择框，其中包含保存的数据到内容条目，其中“nice ids”作为新表单中的选择字符串动态？

主要思想是**关联**两个表单提交的数据并触发不同的工作流。

# c - 如何使用 MinGW 编译 makefile？

> ID：11772602
> 
> 赞同：65
> 
> 时间：2012-08-02T07:07:09.013
> 
> 标签：c, compiler-construction, makefile, mingw

我是新手。只是想问如何编译一个makefile。我在 C 语言中使用 MinGW 编译器。我必须将所有文件保存在 MinGW\bin 中吗？因为现在我的文件在不同的目录中。

感谢帮助。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-02T10:32:04.220

摘自[http://www.mingw.org/wiki/FAQ](http://www.mingw.org/wiki/FAQ)：

make 和 mingw32-make 有什么区别？

make 的“本机”（即：依赖于 MSVCRT）端口缺少某些功能，并且由于 Win32 上缺少 POSIX 而修改了功能。MSYS 发行版中还存在一个依赖于 MSYS 运行时的 make 版本。该端口的操作更多地与 make 的预期操作相同，并且在执行期间减少了令人头疼的问题。基于此，MinGW 开发人员/维护人员/打包人员决定最好重命名本机版本，以便“本机”版本和 MSYS 版本可以同时存在而不会发生文件名冲突。

因此，请查看 C:\MinGW\bin 目录并首先确保您安装了什么可执行文件。（make.exe 或 mingw32-make.exe）

在使用 MinGW 之前，您应该添加 C:\MinGW\bin；[使用http://www.mingw.org/wiki/Getting_Started/](http://www.mingw.org/wiki/Getting_Started/)中提到的说明到 PATH 环境变量

然后 cd 到你的目录，你有 makefile 并尝试使用`mingw32-make.exe makefile.in`或简单地`make.exe makefile.in`（取决于 C:\MinGW\bin 中的可执行文件）。

如果您想要基于 GUI 的解决方案，请安装 DevCPP IDE，然后重新制作。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-08-13T11:41:17.387

您必须主动选择安装 MSYS 才能获取 make.exe。因此，如果 MinGW 安装正确，您应该始终至少拥有（本机）mingw32-make.exe。如果您安装了 MSYS，您将拥有 make.exe（可能在 MSYS 子文件夹中）。

请注意，许多项目需要首先创建一个makefile（例如使用配置脚本或automake .am 文件），而这一步需要MSYS 或cygwin。让您想知道他们为什么要费心分发原生品牌。

一旦有了 makefile，就不清楚本机可执行文件是否需要与 MSYS make 不同的路径分隔符（正斜杠与反斜杠）。任何自动生成的 makefile 都可能具有 unix 样式的路径，假设本机 make 可以处理这些，编译的输出应该是相同的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-04-16T12:28:32.923

我在 C:\MinGW\bin 的 bin 中有 MinGW 和 mingw32-make.exe。同样，我将 bin 路径添加到我的 Windows 路径。之后，我将其名称更改为 make.exe 。现在我可以在我的 Makefile 方向上编写命令“make”并像 Linux 一样执行我的 Makefile。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-11-23T20:49:54.050

首先检查 mingw32-make 是否安装在您的系统上。在 windows 终端或 cmd 中使用 mingw32-make.exe 命令检查，否则安装包 mingw32-make-bin。

然后转到 bin 目录默认 (C:\MinGW\bin) 创建新文件 make.bat

```
@echo off
"%~dp0mingw32-make.exe" %* 
```

添加以上内容并保存

在powershell中设置环境变量

```
$Env:CC="gcc" 
```

然后编译文件

```
make hello 
```

其中 hello.c 是源代码的名称

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T08:53:58.567

请了解 automake 和 autoconf。

Makefile.am 由 automake 处理以生成一个 Makefile，该 Makefile 由 make 处理以构建您的源代码。

[http://www.gnu.org/software/automake/](http://www.gnu.org/software/automake/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-20T10:25:17.830

我在这里找到了一个很好的例子：[https ://bigcode.wordpress.com/2016/12/20/compiling-a-very-basic-mingw-windows-hello-world-executable-in-c-with-a-生成文件/](https://bigcode.wordpress.com/2016/12/20/compiling-a-very-basic-mingw-windows-hello-world-executable-in-c-with-a-makefile/)

它是一个在 windows 上使用 MinGW 的简单 Hello.c（您可以将 c++ 与 g++ 一起使用而不是 gcc）。

Makefile 看起来像：

```
EXECUTABLE = src/Main.cpp

CC = "C:\MinGW\bin\g++.exe"
LDFLAGS = -lgdi32

src = $(wildcard *.cpp)
obj = $(src:.cpp=.o)

all: myprog

myprog: $(obj)
    $(CC) -o $(EXECUTABLE) $^ $(LDFLAGS)

.PHONY: clean
clean:
    del $(obj) $(EXECUTABLE) 
```

# sql - PIVOT，多个聚合？多列？

> ID：11772604
> 
> 赞同：0
> 
> 时间：2012-08-02T07:07:21.047
> 
> 标签：sql, sql-server, dynamic, pivot, procedure

这就是我们迄今为止所拥有的。

这是我们现在拥有的输入数据。

```
SCOREQuali_39    K_Sperr_Cod       DB2_TOTAL
    NULL            0                NULL
    NULL            0                690.226684288121
    NULL            5                NULL
    NULL            13               -20.6408152008628
    G               0               -54.580159556553
    NULL            5                -5.37403744493121
    H               0                3593.56170469699
    NULL            5                NULL
    G               0                NULL
    F               0                NULL
    G               0                -62.6926387195259
    NULL            5                NULL
    NULL            5                NULL
    H               0                1408.52983029661 
```

这是我们目前得到的 SQL 代码。

```
DECLARE @columns VARCHAR(MAX)
SELECT @columns = COALESCE (
                            @columns + ',[' + [SCOREQuali_39] + ']',
                            '[' + [SCOREQuali_39] + ']'
                           )
  FROM [dbo].[KXEN]
 GROUP BY [SCOREQuali_39]
 ORDER BY [SCOREQuali_39]

DECLARE @query VARCHAR(8000)
SET @query = 'SELECT *
               FROM (SELECT [K_Sperr_Cod],
                            [SCOREQuali_39],
                            [DB2_TOTAL]
                       FROM [dbo].[KXEN]
                     ) PIV
              PIVOT (
                     SUM([DB2_TOTAL]) FOR [SCOREQuali_39] in (' + @columns + ')
                    ) AS chld'

EXECUTE (@query)
GO 
```

这来自 SQL 代码的输出..

```
K_Sperr_Cod A   E   F   G   H   Z
0   255068.499500406    330873.173845716    61751973.8684996    47726691.9141684    219108948.21594 5796194.75837109
1   NULL    NULL    48104.4040577828    24257.7279835226    83930.9535365729    7166.90224131628
2   NULL    NULL    4200.02651139712    186.299907511524    21404.4251675196    NULL
3   NULL    NULL    NULL    NULL    NULL    NULL
4   NULL    NULL    90.6788153645106    NULL    NULL    NULL
5   NULL    NULL    3299.17171760959    6898.57843394471    34617.9499761113    141.569391059137
6   NULL    NULL    8223.99222164943    NULL    36399.7235520784    NULL
7   NULL    9431.17125064557    49192.2298488292    27022.0434106792    259157.952646459    2613.38080876173
8   NULL    NULL    5085.36984841527    4579.52341830547    45967.6453351029    NULL
9   NULL    NULL    5016.61173948202    4684.68398880511    6507.85505033565    76.5867787484384
10  NULL    NULL    32637.6131091879    16337.6524219655    156041.485722849    NULL
11  NULL    NULL    1959.61759693503    NULL    175.003852737077    NULL
12  NULL    NULL    49377.6994079961    9025.28132917931    67220.6009906211    213.921132670872
13  NULL    NULL    2023.68914784688    1011.24171909977    3508.66494748362    NULL
14  NULL    NULL    9894.59491921946    3660.72246455194    26979.7285260416    33.2429911696158
15  NULL    NULL    68.5418213084175    NULL    13888.9894847372    NULL
16  NULL    NULL    62.6439310312258    177.563416355756    147.875800320802    NULL 
```

这个想法是能够使用多个列（现在只有 SCOREQuali_39）有什么想法吗？

# mysql - 如何在mysql中禁用innodb？

> ID：11772611
> 
> 赞同：13
> 
> 时间：2012-08-02T07:07:55.563
> 
> 标签：mysql, database

我在 my.cnf 文件中添加了“skip_innodb”行以禁用 innodb 并重新启动 mysqld。但是，它在数据库中不起作用。有没有其他解决方案？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-02T07:19:45.980

如果您使用的是 MySql 5.5 或更高版本，

```
ignore-builtin-innodb 
```

和

```
default-storage-engine = myisam 
```

在下面

```
[mysqld] 
```

在 `/etc/my.cnf`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-02T07:13:27.690

`skip-innodb`在下添加然后`[mysqld]`MySQL服务器`my.cnf``restart`

查看 mysql 日志文件是否成功使用`tail -100 log_file_name_with_full_path`

使用以下查询进行验证：

```
SHOW ENGINES; 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-02T07:23:23.870

尝试

```
innodb=OFF
default-storage-engine=MyISAM 
```

MyISAM 只是一个示例，您可以选择任何您想要的内容您可以在此处阅读更多信息[http://www.webhostingtalk.com/showthread.php?t=1052143](http://www.webhostingtalk.com/showthread.php?t=1052143)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-05-18T07:34:32.080

## 为了`mysql 5.6+`

我在尝试应用其他答案时遇到了困难。这是我发现最好的`mysql 5.6.19`

**1) 编辑`/etc/mysql/my.cnf`**

**-- 重要**- 将这些值**放在`[mysqld]`**

```
# ... other settings
[mysqld]

innodb=OFF
loose-innodb-trx=0
loose-innodb-locks=0
loose-innodb-lock-waits=0
loose-innodb-cmp=0
loose-innodb-cmp-per-index=0
loose-innodb-cmp-per-index-reset=0
loose-innodb-cmp-reset=0
loose-innodb-cmpmem=0
loose-innodb-cmpmem-reset=0
loose-innodb-buffer-page=0
loose-innodb-buffer-page-lru=0
loose-innodb-buffer-pool-stats=0
loose-innodb-metrics=0
loose-innodb-ft-default-stopword=0
loose-innodb-ft-inserted=0
loose-innodb-ft-deleted=0
loose-innodb-ft-being-deleted=0
loose-innodb-ft-config=0
loose-innodb-ft-index-cache=0
loose-innodb-ft-index-table=0
loose-innodb-sys-tables=0
loose-innodb-sys-tablestats=0
loose-innodb-sys-indexes=0
loose-innodb-sys-columns=0
loose-innodb-sys-fields=0
loose-innodb-sys-foreign=0
loose-innodb-sys-foreign-cols=0

default-storage-engine=MyISAM
default_tmp_storage_engine=MyISAM

# ... 
```

**2）重启mysql**

```
sudo service mysql restart 
```

*资料来源：[MySQL docs - 14.1.3 关闭 InnoDB](https://dev.mysql.com/doc/refman/5.6/en/innodb-turning-off.html)*

* * *

# 移民呢？

如果您想**将现有数据库**从迁移`InnoDB`到`MyISAM`，上述原样**不会影响现有表**（并且会给您运行时错误）。

## 解决方案

有一个名为`mysqldump`uses的实用程序将现有的数据库表+数据存储到文件中（SQL脚本）

### 1) 备份

```
mysqldump -u [user] -p[pass] [database name] > /tmp/backup.sql 
```

### 2）`/etc/mysql/my.cnf`如上图改变

```
nano /etc/mysql/my.cnf

# ...
[mysqld]

innodb=OFF
loose-innodb-trx=0
loose-innodb-locks=0
# ... 
```

### 3）重启mysql

```
sudo service mysql restart 
```

### 4）从第一步重新加载数据

```
mysql -u [user] -p[pass] [database name] < /tmp/backup.sql 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-11-30T19:04:53.483

在 MySQL 5.5+ 中，所需的配置片段如下

```
[mysqld]
skip-innodb
default-storage-engine = myisam 
```

# php - 可选参数形式

> ID：11772617
> 
> 赞同：2
> 
> 时间：2012-08-02T07:08:21.070
> 
> 标签：php, moodle

我对 PHP 表单中的 optional_param 函数有疑问（版本 5.3.14）

在查看了为什么某些字段没有保存在我的表单中之后，我意识到这些数据......

```
$checkdata = optional_param('items', array(), PARAM_INT) 
```

最多只能从表单中保存 996 个位置（项目）（它们是选择项目并且有很多）....

这是一个设置还是我可以改变的东西？或者我的结果有什么问题？

提前致谢

* * *

解决方案：一个moodle函数（我正在使用的平台）

谢谢佩卡

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T14:22:15.250

这个函数是一个moodle函数。它从当前页面的 URL 中获取一个参数。

例如网址：

```
http://moodle.dev/course/view.php?id=2&items=4 
```

（这是完全任意选择的）

使用此代码：

```
$checkdata = optional_param('items', array(), PARAM_INT) 
```

将“items”值（这里是 4）保存在 $checkdata 中。如果 url 中不存在项目，它将执行`$checkdata = array()`

# python - PyQt 对话框 - 如何在按下按钮后退出？

> ID：11772624
> 
> 赞同：18
> 
> 时间：2012-08-02T07:08:43.243
> 
> 标签：python, dialog, pyqt

好吧，我正在编写一个小型 PyQt4 应用程序，它只是一个必须执行外部命令（例如，'eject /dev/sr0'）并退出的是/否对话框。

该应用程序运行，它在按下“是”按钮后执行命令，但在执行命令时我无法让对话框本身退出。

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

import sys
import os
import subprocess
from PyQt4 import QtGui
from PyQt4 import QtCore
from subprocess import call
cmd = 'eject /dev/sr0'

class Example(QtGui.QWidget):

    def __init__(self):
        super(Example, self).__init__()

        self.initUI()

    def initUI(self):

        btn = QtGui.QPushButton('Yes', self)     
        btn.clicked.connect(lambda: os.system(cmd))
        btn.resize(180, 40)
        btn.move(20, 35)       

        qbtn = QtGui.QPushButton('No', self)
        qbtn.clicked.connect(QtCore.QCoreApplication.instance().quit)
        qbtn.resize(180, 40)
        qbtn.move(20, 80) 

        self.setWindowTitle('Test')    
        self.show()

def main():

    app = QtGui.QApplication(sys.argv)
    ex = Example()
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

这是我的代码。当我单击“是”时，它会正确调用“弹出/dev/sr0”命令，但之后对话框仍然可见。我必须单击“否”才能关闭应用程序，我希望它在执行命令时自动关闭。我应该添加/修改什么？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-02T07:15:53.250

```
btn.clicked.connect(self.close) 
```

这将是我的建议

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-02T07:32:09.537

替换`lambda: os.system(cmd)`为具有多个语句的函数/方法。

```
def buttonClicked(self):
    os.system(cmd)
    QtCore.QCoreApplication.instance().quit()

...
    btn = QtGui.QPushButton('Yes', self)     
    btn.clicked.connect(self.buttonClicked)
... 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-04-30T21:34:57.693

Step1：在主类中需要建立一个“连接”：

```
self.ui.closeButton.clicked.connect(self.closeIt) 
```

Step2：创建一个类似于关闭的函数：

```
def closeIt(self): 
        self.close() 
```

我故意将其命名为“closeIt”，因为如果您将其命名为“close”，则会发生冲突。

如果创建的 GUI 是另一个程序的插件（例如在我的情况下为 QGIS），则此解决方案具有优势，只有活动的 GUI 将被关闭，而不是整个程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-30T17:30:18.280

子类 QDialog() 然后使用您的对象将其关闭。

```
class Dialog(QDialog):
    """
        Subclassing QDialog class.
    """
    def __init__(self):
        QDialog.__init__(self)

    def close_clicked(self):
        self.close() 
```

在您的主函数中编写以下代码

```
dialogbox = Dialog()  # we subclasses QDialog into Dialog
b1= QPushButton("Close",dialogbox)
b1.clicked.connect(dialogbox.close_clicked)
dialogbox.exec_() 
```

# c++ - 如何通过多重继承实现多态行为？

> ID：11772626
> 
> 赞同：4
> 
> 时间：2012-08-02T07:08:54.423
> 
> 标签：c++, multiple-inheritance

我从未使用过多重继承，但在最近阅读它时，我开始思考如何在我的代码中实际使用它。当我通常使用多态性时，我通常通过创建声明为基类指针的新派生实例来使用它，例如

```
 BaseClass* pObject = new DerivedClass(); 
```

以便在派生类上调用虚函数时获得正确的多态行为。通过这种方式，我可以拥有不同多态类型的集合，这些多态类型通过它们的虚函数管理自己的行为。

在考虑使用多重继承时，我正在考虑相同的方法，但是如果我有以下层次结构，我将如何做到这一点

```
 class A {
     virtual void foo() = 0;
 };
 class B : public A {
     virtual void foo() {
         // implementation
     }
 };

 class C {
     virtual void foo2() = 0;
 };
 class D : public C {
     virtual void foo2() {
         // implementation
     }
 };

 class E : public C, public B {
     virtual void foo() {
         // implementation
     }
     virtual void foo2() {
         // implementation
     }
 }; 
```

有了这个层次结构，我可以创建一个 E 类的新实例

```
 A* myObject = new E(); 
```

或者

```
 C* myObject = new E(); 
```

或者

```
 E* myObject = new E(); 
```

但是如果我将它声明为 a`A*`那么我将失去类 C 和 D 继承层次结构的多态性。同样，如果我将其声明为，`C*`那么我将失去 A 类和 B 类多态性。如果我声明它，`E*`那么我无法以我通常的方式获得多态行为，因为对象不是通过基类指针访问的。

所以我的问题是解决这个问题的方法是什么？C++ 是否提供了一种可以解决这些问题的机制，还是必须在基类之间来回转换指针类型？当然这很麻烦，因为我无法直接执行以下操作

```
 A* myA = new E();
 C* myC = dynamic_cast<C*>(myA); 
```

因为强制转换会返回一个 NULL 指针。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T07:18:04.103

使用多重继承，您可以使用多种不同的方式查看单个对象。例如，考虑：

```
class door { 
   virtual void open();
   virtual void close();
};

class wood { 
    virtual void burn();
    virtual void warp();
};

class wooden_door : public wood, public door {
    void open() { /* ... */ }
    void close() { /* ... */ }
    void burn() { /* ... */ }
    void warp() { /* ... */ }
}; 
```

现在，如果我们创建了一个 wood_door 对象，我们可以将它传递给一个期望与门对象（引用或指针）一起工作的函数，或者期望与门对象（再次，指针或引用）一起工作的函数`wood`目的。

确实，多重继承*不会*突然为与 s 一起工作的函数提供`door`任何新的功能`wood`（反之亦然）——但我们并不真正期望这一点。我们期望的是能够将我们的木门视为一扇不能打开和关闭的门，或者是一块可以燃烧或弯曲的木头——这正是我们得到的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T08:07:03.680

在这种情况下，类`A`和`C`是接口，并`E`实现了两个接口。（通常情况下，您不会有中间类`C`， `D`在这种情况下。）有几种方法可以处理这个问题。

最常见的可能是定义一个新接口，它是 和 的`A`总和`C`：

```
class AandC : public A, public C {}; 
```

并`E`由此衍生。然后，您通常会`E`通过 a 进行管理`AandC*`，将其无差别地传递给采用 a`A*`或 a 的 函数`C*`。在同一个对象中需要两个接口的函数将处理`AandC*`.

如果接口`A`和`C`以某种方式相关，比如说`C`提供了一些（但不是全部）可能想要支持的额外设施，那么拥有一个返回（或空指针，如果对象不支持）的函数`A`可能是有意义的支持接口）。`A``getB()``C*``C`

最后，如果你有 mixins*和*多个接口，最简洁的解决方案是维护两个独立的层次结构，一个用于接口，另一个用于实现部分：

```
//   Interface...
class AandC : public virtual A, public virtual C {};

class B : public virtual A
{
    //  implement A...
};

class D : public virtual C
{
    //  implement C...
};

class E : public AandC, private B, private D
{
    //  may not need any additional implementation!
}; 
```

（我想说的是，从设计的角度来看，接口的继承应该始终是虚拟的，以便将来允许这种事情，即使现在不需要。然而，在实践中，这似乎是公平的很少能够提前预测这种用途。）

如果您想了解有关此类事情的更多信息，您可能需要阅读 Barton 和 Nackman。这本书现在已经过时了（它描述了 C++98 之前的内容），但大部分信息仍然有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T07:15:46.373

这应该工作

```
 A* myA = new E();
 E* myC = dynamic_cast<E*>(myA);
 myC->Foo2(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T07:16:11.600

`C`不能转换为，`A`因为它不是`A`; 它只能向下转换为`D`or `E`。

使用`A*`你可以做一个`E*`并且通过它你总是可以明确地说`C::foo()`但是是的，没有办法`A`隐式调用`C`可能有覆盖或可能没有覆盖的函数。

在这种奇怪的情况下，*模板*通常是一个很好的解决方案，因为它们可以让类表现得好像它们具有公共继承一样，即使它们没有。例如，您可能会编写一个模板，该模板适用于可以`foo2()`在其上调用的任何内容。

# xml - gwt "CssResource.style" 可能的值，如何开启混淆

> ID：11772627
> 
> 赞同：3
> 
> 时间：2012-08-02T07:08:58.007
> 
> 标签：xml, gwt

是否有 gwt.xml 的文档，包含所有接受值的设置列表？就我而言，我在调试/开发人员环境中关闭了 css 混淆。但是对于生产环境，我想打开它。我对“gwt.enableDebugId”所做的相同，它在 .gwt.xml 中为真，在 -production.gwt.xml 中为假 - 这工作正常。我想要“CssResource.style”也是如此。

到目前为止，我唯一发现的是值“obf”，但似乎该值也会产生“人类可读的类”，例如参见[此处](http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/resources/Resources.gwt.xml?r=9843)。我试过这个值，但名字很漂亮。

澄清要求：这会关闭 css 混淆：

```
<set-configuration-property name="CssResource.style" value="pretty"/> 
```

但如何打开它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T14:07:56.047

对于像我这样寻找所有可能值的人，这里是可以找到它们的地方（至少在 GWT 2.5.0 中）：

```
com.google.gwt.resources.rg.CssObfuscationStyle 
```

* * *

```
pretty -->           VERBOSE (true, false, true, true),
stable -->           STABLE_FULL_CLASSNAME (true, true, true, true),
stable-shorttype --> STABLE_SHORT_CLASSNAME (true, true, true, false),
stable-notype -->    STABLE_NO_CLASSNAME (true, true, false, false),
[default] -->        OBFUSCATED (false, false, false, false); 
```

布尔值代表：

```
isPretty, isStable, showClassName, showPackageName 
```

唯一不清楚的值是 isStable，如果设置为`false`您漂亮的名字的前缀是混淆的名字和一个“-”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T08:06:23.520

该配置属性以[`com/google/gwt/ressources/Ressources.gwt.xml`](http://code.google.com/p/google-web-toolkit/source/browse/releases/2.4/user/src/com/google/gwt/resources/Resources.gwt.xml)这种方式定义：

```
<define-configuration-property name="CssResource.style" is-multi-valued="false" />
<set-configuration-property name="CssResource.style" value="obf" /> 
```

即默认值为`obf`. 我相信`obfuscate`或`obfuscated`也会起作用（如果您发现它们更具可读性）。

# iphone - 如何知道 UIWebView 将不再加载？

> ID：11772628
> 
> 赞同：0
> 
> 时间：2012-08-02T07:09:03.993
> 
> 标签：iphone, ios, uiwebview

我知道有委托方法。就我而言，情况有点不同。当我加载我的请求时，会发生后续调用。因此，页面将使用 3 个 url 背靠背加载。之后，它停止。

加载完所有内容后，实际上我想做一些类似“自动提交”的事情，这对于移动浏览器是不可能的。我正在寻找解决方法。但为此，我也需要确保 webView 已完成加载。

所以我的问题是，是否有任何适当的方法可以找出 Web 视图最终停止加载，然后我可以尝试做一些事情来完成我的“自动提交”部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:20:23.563

我有一个关于检测 web 视图何时完成加载部分问题的答案......不幸的是，我发现的最可靠的方法是在 webViewDidBeginLoad: 被调用时增加一个计数器，并在 webViewDidFinishLoading: 和 webViewDidFailWithError: 被调用时递减它叫。每当计数器等于 0 时，您就知道 Web 视图没有加载。

将此检查放在 webViewDidFinishLoading: 和 webViewDidFailWithError: 方法中将允许您确定网络何时完成或停止加载（在失败的情况下）。

# php - 如何在 PHP 中打开并写入 texfile 到远程服务器的特定位置

> ID：11772629
> 
> 赞同：1
> 
> 时间：2012-08-02T07:09:09.773
> 
> 标签：php, file-io

我目前正在使用以下内容打开文本文件并将其写入本地服务器：

```
$mypath="sms_file\\cbsms_";
$fp = fopen($file_name.'.txt', "w");
fwrite($fp, $value. "\r\n");
fclose($fp); 
```

我现在想将该文件复制到远程服务器，例如 10.10.18.23（家庭网络）上的 /home/project

假设我在该目录中具有 R/W 访问权限，那么实现此目的的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T07:27:52.503

远程服务器需要知道有一个请求进来存储文件。这里有几种可能性，最简单的方法是运行 FTP 服务器。

另一种选择是在命令行上使用`exec()`函数调用`scp`（前提是您已经与远程服务器交换了 ssh 密钥）。

另一种选择是在远程服务器上创建一个 PHP 页面，该页面接受带有文件的 POST 请求并存储它们。在这种情况下，您必须提供自己的安全措施。

如果可以将远程主机挂载为永久卷（通过 NFS 或 CIFS），则可以使用常规 PHP`copy()`函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:32:11.923

从您的示例来看，我会说您的 PHP 服务器在 Windows 上（查看 中的反斜杠`$mypath="sms_file\\cbsms_";`），而您的远程主机是 UNIX/LINUX（查看正斜杠和 location `/home/project`）。我建议在远程主机上设置 SSH 或 FTP，而不是使用这些协议而不是将其复制到网络位置。然后，您的 PHP 服务器（Windows 机器）必须通过 SSH/FTP 进行通信并复制文件。

参考资料： http: [//php.net/manual/en/book.ftp.php](http://php.net/manual/en/book.ftp.php) http://php.net/manual/en/function.ssh2-scp-send.php

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T07:28:11.430

您可以尝试使用`exec()`运行 SCP 命令：

```
exec('scp /path/to/file.txt user@homenetworkhost:/home/project/file.txt');
// Obviously, you'll have to set up your SSH permissions and for 'user@homenetworkhost' you'll want to change it to your home network's user and host names. 
```

# php - 如何将项目添加到关联数组？

> ID：11772630
> 
> 赞同：-1
> 
> 时间：2012-08-02T07:09:11.200
> 
> 标签：php, arrays

我定义了我的数组

`$data = array();`

添加了 1 项：

`$data['response'] = true;`

现在我想一次添加多个项目，例如：

`$data["picUpload" => $pPicUpload, "Album1" => $Album1, "Album2" => $Album2];`

但我收到了这个错误：

```
parse error, expecting `']'' 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T07:11:01.620

您可以将其写成多行，例如：

```
$data['new0'] = 'value0';
$data['new1'] = 'value1'; 
```

或使用[array_merge](http://php.net/manual/en/function.array-merge.php)（将覆盖碰撞键）：

```
$data = array_merge($data, array('new0' => 'value0', 'new1' => 'value1')); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T07:11:04.760

需要一一添加，或者使用`array_merge`方法。

```
$data["picUpload"] =$pPicUpload;
$data["Album1"] = $Album1;
$data["Album2"] = $Album2; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T07:11:36.883

您使用的语法不正确。您需要使用 array_merge 功能

```
$data = array_merge($data, array(
  "picUpload" => $pPicUpload, 
  "Album1" => $Album1, 
  "Album2" => $Album2
)); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-02T07:11:37.473

```
$data = array_merge($data, Array("picUpload" => $pPicUpload, "Album1" => $Album1, "Album2" => $Album2)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-02T07:12:04.307

为什么不只是：

```
$data["picUpload"] = $pPicUpload;
$data["Album1"] = $Album1;
$data["Album2"] = $Album2; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T07:12:17.067

试试这个：

```
$data = array("picUpload" => $pPicUpload, "Album1" => $Album1, "Album2" => $Album2); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-02T07:12:54.180

试试这个，

```
$data = array("picUpload" => $pPicUpload, "Album1" => $Album1, "Album2" => $Album2); 
```

# .htaccess - 使用 .htacces 更改链接 url

> ID：11772632
> 
> 赞同：0
> 
> 时间：2012-08-02T07:09:20.950
> 
> 标签：.htaccess, url, hyperlink

这是链接**http://djmobi.in/?dir=/Mobile_Ringtones&p=1&sort=1/Mobile_Ringtones.html**

请告诉我如何从上面的链接中删除**?dir=** 我想让它看起来像下面的链接，例如。

**http://www.finewap.com/Category/9497/Mobile_Ringtones.html**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:36:54.263

您一定不要想“如何删除`?dir=`”的方式，而是“使用哪个链接而不是这个复杂的链接”。

这是`.htaccess`你需要的亲属：

```
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f

RewriteRule   ^([A-Za-z0-9-]+)\.html$    index.php?dir=$1 [L] 
```

这`.htaccess`会将 http://www.domain.com/foo.html 之类的每个 url 重定向[到](http://www.domain.com/foo.html)http://www.domain.com/index.php?dir=foo [（](http://www.domain.com/index.php?dir=foo)这将是透明的）

这是一个好的开始，我让你搜索一些文档来添加你的页面和排序管理（我们没有足够的数据来给你一个工作代码）

# java - 如何通过java清除linux中的交换使用区域

> ID：11772634
> 
> 赞同：0
> 
> 时间：2012-08-02T07:09:35.573
> 
> 标签：java, swap, cache-control

我在 java 中尝试了 swapoff 和 swapon，但我没有看到 top 有任何变化。

这是我的代码：

```
String[] commands= {"/bin/sh","-c","/sbin/swapoff -a && /sbin/swapon -a"};

Process pr = Runtime.getRuntime().exec(commands);
pr.waitFor(); 
```

字符串有问题吗？成功执行顶部命令后我不会看到变化吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T07:13:26.013

您应该在 swapoff 之前删除缓存：

```
/bin/echo 1 > /proc/sys/vm/drop_caches 
/bin/echo 2 > /proc/sys/vm/drop_caches 
/bin/echo 3 > /proc/sys/vm/drop_caches 
```

# facebook - 是否可以通过 API 索引 facebook 公共组

> ID：11772635
> 
> 赞同：2
> 
> 时间：2012-08-02T07:09:37.867
> 
> 标签：facebook, api, indexing

我想为机器学习项目索引一些 Facebook 公共群组。是否可以通过它的 API 来做到这一点。我想获取群组基本资料、成员基本信息和帖子等信息

提前致谢！

# javascript - 判断body的背景图片（css）是否已经加载

> ID：11772638
> 
> 赞同：0
> 
> 时间：2012-08-02T07:10:01.743
> 
> 标签：javascript, jquery, html, css, image

根据某些条件，会加载不同的背景图像：

```
$('body').css('background','url(image.png)'); 
```

有没有办法确定背景图像是否已加载？加载图像后，我需要执行一个函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T07:16:15.447

您可以将图像加载到隐藏`<img>`标签中并为标签分配`onload`处理程序。在 onload 处理程序中，您可以填充主体的背景图像（这应该或多或少立即发生，因为图像现在在浏览器缓存中），然后也运行您的自定义代码。

```
var hiddenImg = new Image();
hiddenImg.onload = function(){
    $('body').css('background','url(' + this.src + ')');
    your_custom_onload_code();
};
hiddenImg.src = 'image.png'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T07:15:40.293

```
var img = new Image ();
img.onload = function () { $('body').css('background','url(image.png)'); };
img.src = src; 
```

# jquery - 在 HTML 表格中查找重复数据

> ID：11772640
> 
> 赞同：1
> 
> 时间：2012-08-02T07:10:06.753
> 
> 标签：jquery, html

我的 HTML 中有一个表格，在这个表格中，`<td>`标签中的各个值是从 Javascript 数组生成的。

我想将`<td>`标签中包含的值相互比较并检查重复项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T07:17:33.003

`<td>`元素没有*值*，它们有内容（可能包含也可能不包含其他元素）。如果您的问题是“我如何检查没有两个 td 元素具有相同的内容？” 你可以这样做：

```
var contents = {},
    duplicates = false;
$("#yourtableidhere td").each(function() {
    var tdContent = $(this).text();
    if (contents[tdContent]) {
        duplicates = true;
        return false;
    }
    contents[tdContent] = true;
});    
if (duplicates)
   alert("There were duplicates."); 
```

你没有说这个过程应该在什么时候发生，但是如果为了响应用户点击一个按钮或其他东西，那么把上面的代码放在一个点击事件处理程序中。

演示：http: [//jsfiddle.net/FA6SR/](http://jsfiddle.net/FA6SR/)

显然，您可以扩展上述内容以准确注意哪些单元格具有重复值、值是什么等。

**编辑 - PS**你提到这些值来自一个数组。针对数组而不是针对表格单元编写比较测试同样容易，但在运行时更有效。jQuery 对此并没有真正的帮助，您只需使用标准`for`循环。

# java - tomcat7 的当前服务器状态信息

> ID：11772643
> 
> 赞同：0
> 
> 时间：2012-08-02T07:10:31.653
> 
> 标签：java, spring, tomcat, deadlock

我目前正在 Windows Server 2008 机器上的独立 tomcat 服务器（v7.0.27）上对我的 Web 应用程序（基于 Spring + Hibernate）进行负载测试。我需要知道当批量请求到来时tomcat 的行为。例如

收到 300 个请求 - 当前堆大小、服务器挂起、服务器无法处理、堆大小、对象大小、对象数。等等等等。

有没有办法看到这个？（来自管理器应用程序的信息不足“当前活动线程和占用的内存不符合我的要求）。

连接器元素的 PS maxThreads 属性为 350。

更新：我在负载测试时遇到的另一个问题 - （在某些情况下，当我发送 300 个请求时，Tomcat 挂断了）。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:20:31.477

您可以使用 jdk 附带的 jconsole。 [http://docs.oracle.com/javase/6/docs/technotes/guides/management/jconsole.html](http://docs.oracle.com/javase/6/docs/technotes/guides/management/jconsole.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:08:59.270

如果服务器挂起，则可能存在死锁。

您可以尝试使用[JProfiler](http://www.ej-technologies.com/products/jprofiler/overview.html)进行附加，监控部分将向您显示当前的锁定情况和可能的死锁。

免责声明：我公司开发 JProfiler。

# ruby-on-rails - 如果两个哈希具有相同的键/值，如何比较两个哈希以返回 true？

> ID：11772646
> 
> 赞同：1
> 
> 时间：2012-08-02T07:10:58.830
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, hash, compare

我正在使用 Ruby on Rails 3.2.2 和 Ruby 1.9.3。我想比较两个`Hash`es (`A`和`B`) 以便在`true`( `Hash`)包含另一个( `A`) 的所有键/值时返回。`Hash``B`

例如，鉴于我有

```
params.inspect
# => { "action"=>"...", "controller"=>"...", "key_param1"=>"value_param1", , "key_param2"=>"value_param2", "key_param3"=>"value_param3", ... }

my_hash1.inspect
# => { "key_param1"=>"value_param1", "key_param2"=>"value_param2" }

my_hash2.inspect
# => { "key_param4"=>"value_param4", "key_param1"=>"value_param1" }

my_hash3.inspect
# => {} 
```

然后我正在寻找一种方法（或类似的方法）来制作

```
params.has_same_keys_and_values_as?(my_hash1)
# => true

params.has_same_keys_and_values_as?(my_hash2)
# => false

params.has_same_keys_and_values_as?(my_hash3)
# => true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:17:18.270

假设 Hash#keys 和 Hash#values 以相同的顺序返回值：

```
params.values_at(*my_hash.keys) == my_hash.values 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T07:24:51.757

我认为你可以使用：

```
a.slice(*b.keys) == b 
```

其中 a 和 b 是您的哈希值。请注意， slice 是一种 rails 方法，而不是 ruby​​。在纯红宝石中，您可以编写：

```
a.keep_if{|k, v| b[k]} == b 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T07:18:00.873

**编辑**：这是假设值/键在两个哈希中的顺序不同。

您可以遍历 hash1 中的每个键并使用 has_key? 在哈希 2 上。请记住，这是一种幼稚的解决方案，对于大型数据集可能会很慢。

结帐 has_key？和has_value？这里：[http ://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-has_key-3F](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-has_key-3F)

你可以循环如下：

```
hash1.each_key { |key|
    if hash2.has_key?(key)
        do whatever
    endif
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T12:55:05.453

```
class Hash
  def >=(b)  
    eq = true
    b.each { |k, v| eq &= !(self.include? k) ? false : ( ( ((self[k]&&v).is_a? Hash) && !((v||self[k]).empty?) ) ? self[k]>=v : true)}

    return eq
  end

end
params = { "action"=>"...", "controller"=>"...", "key_param1"=>"value_param1", "key_param2"=>"value_param2", "key_param3"=>"value_param3" }
my_hash1 = { "key_param1"=>"value_param1", "key_param2"=>"value_param2" }
my_hash2 = { "key_param4"=>"value_param4", "key_param1"=>"value_param1" }
my_hash3 = {}

p params >= my_hash1 #true
p params >= my_hash2 #false
p params >= my_hash3 #true 
```

它也适用于“深度”哈希：

```
b = {1 => {2 => {} }, 4 => {} }
a = {1 => {2 => {3 => {} }}, 4 => {}, 5 => "123" }

p a >= b #true
p b >= a #false 
```

PS
[一个哈希是否包含另一个哈希](https://stackoverflow.com/questions/11332910/whether-one-hash-includes-another-hash)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T20:02:22.687

更好的方法，有一个积极的支持方法，hash.diff，用.empty 包装它？检查它们是否相同

```
{:one => 1}.diff({:one => 1}).empty?

=> true

{:one => 1}.diff({:one => 2}).empty?

=> false 
```

[http://as.rubyonrails.org/classes/ActiveSupport/CoreExtensions/Hash/Diff.html](http://as.rubyonrails.org/classes/ActiveSupport/CoreExtensions/Hash/Diff.html)

# php - 将视图加载到变量中

> ID：11772651
> 
> 赞同：42
> 
> 时间：2012-08-02T07:11:06.080
> 
> 标签：php, codeigniter

有什么方法可以将 PHP 文件的内容放入变量中？

我想做这个

```
$msg = $this->load->view('some_view'); 
```

但是当我这样做时，`$msg`是`NULL`。

是否可以？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-08-02T07:11:48.060

有可能的：

```
$msg = $this->load->view('some_view', '', true); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-02T07:26:19.827

还有第三个可选参数可让您更改函数的行为，以便它以字符串形式返回数据，而不是将其发送到浏览器。如果您想以某种方式处理数据，这可能很有用。如果将参数设置为 true（布尔值），它将返回数据。默认行为是 false，将其发送到您的浏览器。如果要返回数据，请记住将其分配给变量：

```
$msg = $this->load->view('some_view', '', true); 
```

来源：[http ://codeigniter.com/user_guide/general/views.html](http://codeigniter.com/user_guide/general/views.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-22T09:54:40.297

```
$string = $this->load->view('myfile', '', TRUE); 
```

[https://codeigniter.com/user_guide/general/views.html#returning-views-as-data](https://codeigniter.com/user_guide/general/views.html#returning-views-as-data)

# android - 为什么 LogCat 不显示完整的消息？

> ID：11772657
> 
> 赞同：1
> 
> 时间：2012-08-02T07:11:33.060
> 
> 标签：android, eclipse, logcat, android-logcat

任何人都知道为什么 Logcat 不显示完整的消息？我尝试从我的网站打印 xml 响应，但我只能得到其中的一些..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T07:43:21.203

因为您的 logcat 已达到其最大大小，请参阅[Logcat 的大小限制是多少以及如何更改其容量？](https://stackoverflow.com/questions/6321555/what-is-the-size-limit-for-logcat)
尝试使用此代码将结果写入 sdcard 中的文本文件，然后使用[DDMS](http://developer.android.com/tools/debugging/ddms.html) 获取它。

```
 public static void appendLog(String text)
{
    File logFile = new File("sdcard/log.txt");
    if (!logFile.exists())
    {
        try
        {
            logFile.createNewFile();
        } catch (IOException e)
        {
            e.printStackTrace();
        }
    }
    try
    {
        // BufferedWriter for performance, true to set append to file flag
        BufferedWriter buf = new BufferedWriter(new FileWriter(logFile, true));
        buf.append(text);
        buf.newLine();
        buf.close();
    } catch (IOException e)
    {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-02T07:46:16.660

将光标放在错误上，您将看到完整的 log-cat 信息。

# android - 为什么单线程模型用于更新 UI 作为主线程？

> ID：11772658
> 
> 赞同：13
> 
> 时间：2012-08-02T07:11:34.103
> 
> 标签：android, ios, qt, frameworks, ui-thread

Qt 文档说，

> 如前所述，每个程序在启动时都有一个线程。该线程称为“主线程”（在 Qt 应用程序中也称为“GUI 线程”）。Qt GUI 必须在这个线程中运行。

Android 文档说，

> 与活动和其他组件一样，服务在应用程序进程的主线程中运行

和 iOS，

> 强烈建议不要从后台线程（例如计时器、通讯等）更新 UI 控件等。这可能是导致有时很难识别的崩溃的原因。而是使用这些来强制代码在 UI 线程（始终是“主”线程）上执行。

为什么他们使用单线程模型来更新 UI？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-02T07:14:11.450

简短的回答是，这是确保显示器不损坏的唯一合理方法。

长答案是，允许多个线程更新 UI 会导致死锁、竞争条件和各种麻烦。这是 Java 的 AWT（以及其他 UI 系统）所教给我们的惨痛教训，它允许多个线程接触 UI。例如，参见[*多线程工具包：一个失败的梦想？*](https://community.oracle.com/blogs/kgh/2004/10/19/multithreaded-toolkits-failed-dream). 那篇文章（通过死链接）提到[*Why Threads Are A Bad Idea*](https://web.stanford.edu/~ouster/cgi-bin/papers/threads.pdf)和[*Threadaches*](https://community.oracle.com/people/chet/blog/2004/08/19/threadaches)。

# c# - 动态改变 FormatCondition 的范围

> ID：11772665
> 
> 赞同：0
> 
> 时间：2012-08-02T07:12:06.613
> 
> 标签：c#, excel, vsto, conditional-formatting

我已经使用以下代码在具有某些格式的范围上添加了格式条件。

```
Microsoft.Office.Interop.Excel.FormatCondition formatConditionObj = null;

formatConditionObj = (Microsoft.Office.Interop.Excel.FormatCondition)myRange
    .FormatConditions.Add(Excel.XlFormatConditionType.xlExpression, 
    Type.Missing, true, Type.Missing, Type.Missing, Type.Missing, 
    Type.Missing, Type.Missing);

formatConditionObj.Interior.ColorIndex = 5; 
```

现在我的范围发生了变化`dynamically`。我希望使用相同的 FormatCondition 对象，我只需更改应用此格式的范围。例如，在第一次实例中它可能只是`"$A$1"`稍后它可能是`"$A$2,$D$5"`or `"$A$3:$A$20"`。

这可以直接使用excel来完成。连续格式 -> 管理规则 -> 适用于（编辑此）。如何使用 C# 实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:51:02.790

这对我有用。我发现将下方的“使用”行放在顶部可以节省大量精力。

```
using Microsoft.Office.Interop.Excel;

<...>

        formatConditionObj = (FormatCondition)myRange.FormatConditions
            .Add(XlFormatConditionType.xlExpression, 
            Type.Missing, true, Type.Missing, Type.Missing, 
            Type.Missing, Type.Missing, Type.Missing);

        formatConditionObj.Interior.ColorIndex = 5;

        Range myNewRange = ws.Range["a10:a15"];
        formatConditionObj.ModifyAppliesToRange(myNewRange);

 <...> 
```

# matlab - 如何在 simulink 中使用 find() 方法？

> ID：11772673
> 
> 赞同：0
> 
> 时间：2012-08-02T07:12:33.103
> 
> 标签：matlab, simulink

我必须将 .m 文件翻译成 simulink，但我不知道如何使用 find() 方法。find() 方法的结果是变量向量，这是 simulink 不允许的。有人可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:50:45.677

也许您可以使用[Submatrix](http://www.mathworks.com/help/toolbox/dsp/ref/submatrix.html)或[Selector](http://www.mathworks.com/help/toolbox/simulink/slref/selector.html)块来做到这一点。这个[答案](http://www.mathworks.com/matlabcentral/answers/38941)可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:07:24.847

您可以尝试使用[matlab 功能块](http://www.mathworks.nl/help/toolbox/simulink/ug/f6-106261.html)（或者[预查找](http://www.mathworks.nl/help/toolbox/simulink/slref/prelookup.html)可能会起作用，具体取决于应用程序）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T09:58:13.397

利用：

```
[index]=find(data,1) 
```

的第二个参数`find`指定要查找的索引数。现在`find`输出一个恒定长度的向量，可以在 simulink 中使用。

# android - 如何以特定格式显示计时器？

> ID：11772676
> 
> 赞同：0
> 
> 时间：2012-08-02T07:12:50.730
> 
> 标签：android, timer, format

我知道这里有很多关于“启动/停止计时器”的问题。但我正在寻找
计时器的格式。我正在开发一个记录时间的记录应用程序。
我能够以第二种格式显示时间，例如 1 2 3 4 5。但我需要像
**00.01**一样显示这个时间。我需要一些提示或参考。这是我需要展示的图像。 ![在此处输入图像描述](../Images/2913fe347ad2deb6f9b610947c1616a8.png)
提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T07:26:25.280

[这](http://w2davids.wordpress.com/simple-countdowntimer-example/)是非常好的简单倒数计时器教程。通过它，您将能够实现您想要的。

或者[A Stitch in Time](http://android-developers.blogspot.com/2007/11/stitch-in-time.html)是从 developer.android.com 实现秒表类型应用程序的有效方式，是的，它使用您需要的格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T07:15:27.777

你可以试试这个：

```
private String stringForTime(int timeMs) {
    StringBuilder mFormatBuilder = new StringBuilder();
    Formatter mFormatter = new Formatter(mFormatBuilder, Locale.getDefault());

    int totalSeconds = timeMs / 1000;

    int seconds = totalSeconds % 60;
    int minutes = (totalSeconds / 60) % 60;
    int hours   = totalSeconds / 3600;

    mFormatBuilder.setLength(0);
    if (hours > 0) {
        return mFormatter.format("%d:%02d:%02d", hours, minutes, seconds).toString();
    } else {
        return mFormatter.format("%02d:%02d", minutes, seconds).toString();
    }
} 
```

# javascript - 为什么需要“this”来调用对象内部的函数

> ID：11772679
> 
> 赞同：2
> 
> 时间：2012-08-02T07:13:14.963
> 
> 标签：javascript

```
var a = {
    text : 3,
    logText : function () {
        console.log(this.text);
    },
    callLogText : function() {
        logText();
    }
};
a.callLogText(); 
```

这将生成一条`ReferenceError: logText is not defined`错误消息。

相反，你`this`给`logText()`方法加上前缀，就可以了。不会弹出错误消息。

```
var a = {
    text : 3,
    logText : function () {
        console.log(this.text);
    },
    callLogText : function() {
        this.logText();
    }
}; 
```

我实在想不通原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T07:25:57.450

您需要学习 JavaScript 范围规则。[这篇博文给出了很好的介绍](http://coding.smashingmagazine.com/2009/08/01/what-you-need-to-know-about-javascript-scope/)。

简而言之，当你使用变量名时，JavaScript 遵循一些规则（为了解释的目的，函数定义很像变量声明）。

可能让你感到困惑的是：

```
var a = { b: ...};
var a = function() { var b = ... } 
```

在这两种情况下，您都会得到一个新变量`a`。在第一种情况下，它是一个具有*属性* `b`的对象。在第二种情况下，它是一个具有*嵌套范围*的函数，其中定义了一个*新变量* `b`。

JavaScript 将在当前和所有父范围中查找变量。但是对象定义不是范围。就 JavaScript 而言，该属性`b`是不可见的，除非您使用`this`始终引用“当前”对象（在您的示例中为`a`）的特殊变量使其可见。

由于对象的属性`a`不在“范围内”，因此 JavaScript 无法找到`logText()`，除非您告诉它在`this`. 如果你什么都不说，JavaScript 将在当前作用域（函数的主体`callLogText`）中查找，然后是父作用域（在其中`a`定义），然后是它的任何父作用域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:18:13.727

这不是一个怪癖。当涉及到对象时，这就是大多数语言的功能。

`logText()`是`a`对象的方法，而不是函数。

您需要在内部调用方法`this.methodName()`或在外部调用方法`object.methodName()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T07:18:54.473

`logText();`是执行一个`logText`未定义的全局函数。

`this.logText();`是执行函数 `a.logText`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T07:24:53.813

打电话

```
logText(); 
```

意味着某处有一个名为 logText() 的函数，但在这里您已将 logText() 定义为对象的属性，因此要访问 logText()，您必须借助它定义的对象来引用它。在在这种情况下，它在同一个对象中，因此您可以通过说**this**来引用同一个对象。

# javascript - 正则表达式和浏览器依赖

> ID：11772685
> 
> 赞同：1
> 
> 时间：2012-08-02T07:13:40.560
> 
> 标签：javascript

为什么以下正则表达式：

```
var regex = /[^a-zA-Z0-9,-\s]/g 
```

不适用于 Firefox 和 IE，但适用于 Safari 和 Chrome。

但是，如果我将其更改为：

```
var regex = /[^a-zA-Z0-9-\s,]/g 
```

它适用于所有上述浏览器。

谁能解释一下为什么逗号（`,`）是这里的坏人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:39:11.863

我刚刚测试了这个脚本，它可以在 Internet Explorer(8)、Chrome 和 Firefox 上运行：`/[^a-zA-Z0-9\s,-]/g`. 以上对我评论的投票让我相信我是对的。

# html - CSS 属性以插入符号开头

> ID：11772688
> 
> 赞同：6
> 
> 时间：2012-08-02T07:13:44.867
> 
> 标签：html, css

我目前维护的项目中的许多 CSS 属性都以插入符号开头，`^`如下所示：

```
<tr style="^padding-bottom: 10px;"> 
```

插入符号有任何意义吗？也许修复一些不起眼的浏览器？或者它只是以前开发人员的错字，已经复制粘贴了 x 次（因为它总是与“填充底部”一起存在）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T07:16:33.020

前面带有插入符号的样式不会被应用。因此，在这种情况下，它可能是一种**注释**CSS 样式的方法，而不必使用整个 HTML 注释。不过，这不是标准的方法。

**[（例子）](http://jsfiddle.net/fKygP/1/)**

* * *

CSS 中的插入符号确实有意义，“Begins With”[**属性选择器**](http://www.w3.org/TR/css3-selectors/#attribute-selectors)。

它允许您根据属性值是否以给定字符串开头来定位 CSS 中的元素。

```
E[foo]  an E element with a "foo" attribute
E[foo="bar"]    an E element whose "foo" attribute value is exactly equal to "bar"
E[foo~="bar"]   an E element whose "foo" attribute value is a list of whitespace-separated values, one of which is exactly equal to "bar"
E[foo^="bar"]   an E element whose "foo" attribute value begins exactly with the string "bar"
E[foo$="bar"]   an E element whose "foo" attribute value ends exactly with the string "bar"
E[foo*="bar"]   an E element whose "foo" attribute value contains the substring "bar" 
```

但是，在您的情况下，插入符号**不能**用作选择器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T07:19:58.847

是的，插入符号在 CSS 3 中有意义，它是 CSS 3 中的[**属性选择器**](http://www.w3.org/TR/css3-selectors/#attribute-selectors)。此选择器允许表示元素的属性。When a selector is used as an expression to match against an element, [**attribute selector**](http://www.w3.org/TR/css3-selectors/#attribute-selectors) must be considered to match an element if that element has an attribute that matches the attribute represented by the [**attribute selector**](http://www.w3.org/TR/css3-selectors/#attribute-selectors) .

**但在你的情况下，它可能是一个错字。**

**[CSS3 属性选择器 - 子字符串匹配](http://www.impressivewebs.com/css3-attribute-selectors-substring-matching/)**

CSS3 规范中的三个属性选择器允许您检查指定属性的值以进行字符串匹配。这些属性选择器称为[**子串匹配属性选择器**](http://www.w3.org/TR/selectors/#attribute-substrings)。

**[att^=val]**

> 表示具有 att 属性的元素，其值以前缀“val”开头。如果 "val" 是空字符串，则选择器不代表任何内容。

**[att$=val]**

> 表示具有 att 属性的元素，其值以后缀“val”结尾。如果 "val" 是空字符串，则选择器不代表任何内容。

**[att*=val]**

> 表示具有 att 属性的元素，其值包含至少一个子字符串“val”的实例。如果 "val" 是空字符串，则选择器不代表任何内容。

# linux - 成为设备驱动程序程序员需要具备哪些硬件知识？

> ID：11772691
> 
> 赞同：0
> 
> 时间：2012-08-02T07:14:10.547
> 
> 标签：linux, linux-device-driver

我对设备驱动程序编程很感兴趣。我已经开始阅读LDD3，作者说

“要成为设备驱动程序员，您必须很好地了解您的特定设备”

谁能告诉我“了解您的特定设备”的含义是什么。在编写设备驱动程序之前我应该​​知道什么。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T07:43:05.493

这是一个结合了软件和硬件的基本列表。

```
The Operating System driver API
The processor architecture as it relates to hardware interfacing
The 'bus' structure that interfaces the device hardware to the processor
Interrupt Handling
Dma Control
Processor Caching
Processor MMU control
OS Semaphores and scheduling
Data/Byte Alignment
Assembly language when needed
Control of Instruction Execution Order and Optimization
Consideration of performance issues 
```

什么是 IO 和内存映射硬件？

[http://www.cs.nmsu.edu/~pfeiffer/classes/473/notes/io.html](http://www.cs.nmsu.edu/~pfeiffer/classes/473/notes/io.html)

此链接讨论 Linux 设备驱动程序中的通用硬件访问。

[http://www.linuxforu.com/2011/06/generic-hardware-access-in-linux/](http://www.linuxforu.com/2011/06/generic-hardware-access-in-linux/)

这专门针对 USB 硬件

[http://www.beyondlogic.org/usbnutshell/usb2.shtml](http://www.beyondlogic.org/usbnutshell/usb2.shtml)

检查 lwn.net 它永远不会让设备驱动程序开发人员失望。

[https://lwn.net/Archives/](https://lwn.net/Archives/)

最后但同样重要的是，他们拥有一切，CPU、内存、摄像头、PCI ..

[http://www.hardwaresecrets.com/page/memory](http://www.hardwaresecrets.com/page/memory)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T10:32:34.633

-

嗨，我很高兴与大家分享我学到的东西。

是的，如果您想成为设备驱动程序程序员，了解您的设备是基本需求。我也想成为一名linux设备驱动程序员，甚至更多，虽然我有一些其他软件平台下的设备驱动经验。

你想接触它的原因是你想让它为你做点什么。

通常，它可以做什么是您必须知道的第一件事。很明显，您永远不会通过 UART 或 SPI 发送以太网帧，对吧？

世界上有各种各样的设备，如存储设备、FLASH、SD卡、硬盘；通讯设备、网卡、wifi；互连总线，PCI-express；有多少。

在那之后，您将关心的下一件事是如何实现您的目标。要访问设备、读取或写入，通常在处理器中嵌入一个控制器。在这里，当我说“处理器”时，它的意思是它是一个集成了各种控制器的核心，无论是pc桌面还是嵌入式系统领域。

控制器是您将面对的界面，用于在控制器后面的设备上工作。通过控制器，您可以要求设备做您想做的事情。在控制器中，有寄存器，这是软件可以触及的最深点。除此之外就是硬件，因为您是设备驱动程序程序员，您与硬件工程师沟通以完成工作是很常见的。

如果详细介绍寄存器，有控制寄存器用于告诉设备您想要它做什么，状态寄存器用于反映设备中正在进行的操作的状态，如果该设备支持中断，还有一些寄存器为您处理中断。

好吧，我差点忘了还有数据寄存器，用于存储要发送或写入的数据，或供用户读取的数据。根据具体实现，用于存储上层用户发送或写入的数据的寄存器与用于保存外部用户读取的数据的寄存器可以相同，也可以不同。

通常，如果你想让某人为你做某事，你应该先给他一些东西。谁想做什么，总得有一些投入吧？

总而言之，

动作（读、写或其他）+ 数据（您给予或要求）+ 状态（进度如何）

1.  它可以做什么

2.  它是如何做到的，如何组装命令单元，时间顺序？

3.  一般来说，你必须提供什么才能达到你的目标
    ，你应该提供两种东西：

    如果你要求，在哪里存储你要求的东西；
    如果你给予，你给予的在哪里

4.  它如何反映操作、轮询或中断的进度

嗯，这就是我想和你分享的全部内容。

谢谢。

# windows - @Transactional 和 JerseyTest 在 Linux 或 Mac 上的问题，但在 Windows 上没有

> ID：11772693
> 
> 赞同：3
> 
> 时间：2012-08-02T07:14:11.413
> 
> 标签：windows, linux, hibernate, transactional, grizzly

我们使用带有 grizzly2 的 jersey 测试来针对模拟的 REST 资源运行验收测试。在我的 Windows 机器上一切都很好。但是另一位使用他的 Mac 的开发人员遇到了与我们的 Jenkins（在 Linux 上）相同的错误：

```
INFO: Creating Grizzly2 Web Container configured at the base URI http://localhost:9998/
02.08.2012 09:46:36 org.glassfish.grizzly.http.server.HttpServer start
SEVERE: Failed to start listener [NetworkListener{name='grizzly', host='localhost', port=9998, secure=false}] : java.net.BindException: Address already in use 
```

显然我们检查过情况并非如此：没有其他进程正在使用 9998..

我一直在将问题跟踪到单个测试，即使用 @Transactional 和扩展 JerseyTest：

```
@ContextConfiguration({ "classpath:context-test.xml" })
@RunWith(SpringJUnit4ClassRunner.class)
@Transactional
@TransactionConfiguration(defaultRollback = true)
public class TestPage extends JerseyTest {

    public TestPage() throws Exception {
        super("", "", "path.to.package");
    }

    // init database to be rolled back after test
    // ...

    // test that calls a controller requiring database access and then sends a request to a mock REST resource.
    // ...
} 
```

所以，这里的问题是：为什么不在 Windows 上？使用@Transactional 有什么问题。

**edit2** 似乎@Transactional 正在创建代理，这可能是个问题..？！[看这里](http://java.net/projects/jersey/lists/users/archive/2012-02/message/144)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-10T00:08:13.117

我遇到了类似的问题，请确保您没有在 TestPage 测试中过度使用 tearDown() 方法。如果你有东西要拆，请使用另一种方法 customTearDown() 并用 @After 注释它。

JerseyTest 也使用相同的方法名称 tearDown() 并且如果我们覆盖它，容器永远不会关闭。

# apache-flex - Flex 4.6：嵌入字体不适用于 TextField

> ID：11772696
> 
> 赞同：0
> 
> 时间：2012-08-02T07:14:21.413
> 
> 标签：apache-flex, fonts, embed

我正在尝试在 UITextField 中使用嵌入式字体（Flex 4.6）。只要我使用在 Windows 中注册的字体，它就可以正常工作，但是对于未注册的字体， UITextField 默认为 TimesRoman （或类似的东西）

请注意，当我检查字体是否嵌入时，它返回 True (FlexGlobals.topLevelApplication.systemManager.isFontFaceEmbedded(txtFormatCoda))

那么我错过了什么？

在下面的代码中，如果我将字体 Kredit 添加到 Windows 字体中，UI 文本字段将以 Kredit 字体显示，但如果我将其从 Windows/font 目录中删除，则该字段将显示为 TimesNewRoman（默认字体）。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"  creationComplete="onComplete()">
    <s:Group id="TextCanvas" x="121" y="97" width="474" height="800">
    </s:Group>
    <fx:Style>
        @font-face {
            src: url("fonts/KREDIT1.TTF");
            fontFamily: Kredit;
            embed-as-cff:false;
            advancedAntiAliasing:true;
        }
    </fx:Style> 
    <fx:Script>     
        import mx.core.FlexGlobals;
        import mx.core.UIComponent;
        import mx.core.UITextField;
        import mx.core.UITextFormat;

        public function onComplete():void{
            var txtFldCoda:UITextField = new UITextField();
            var txtFormatCoda:UITextFormat = new UITextFormat(this.systemManager);
            var compCoda:UIComponent = new UIComponent();
            compCoda.addChild(txtFldCoda);
            txtFldCoda.embedFonts=true;         
            txtFldCoda.width=300;
            txtFormatCoda.size=33;
            TextCanvas.addElement(compCoda);
            txtFldCoda.text="Testing Kredit";
            txtFormatCoda.font= "Kredit";
            txtFormatCoda.color="0x0ff345";
            var b2:Boolean = FlexGlobals.topLevelApplication.systemManager.isFontFaceEmbedded(txtFormatCoda);
            if(b2==false){
                trace("not embedded: " + txtFormatCoda.font);
            }
            txtFldCoda.defaultTextFormat= txtFormatCoda;//note that setTextFormat must be after setting the text
            txtFldCoda.setTextFormat(txtFormatCoda);//note that setTextFormat must be after setting the text
            txtFldCoda.x=0;
            txtFldCoda.y=100;           
        }       
    </fx:Script>
</s:Application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T07:28:20.210

谢谢马赫什

实际上这对我有用：

```
var comp:UIComponent = new UIComponent();
comp.setStyle('fontFamily', fontName); 
```

基本上我必须在 UIComponent 上做 setStyle，它是这个 UITextField 的父级。我希望 Adob​​e 会记录这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:51:04.777

下面的代码可以帮助你： - 我已经评论了一行并修改了样式标签......

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"  creationComplete="onComplete()"
               >
    <s:Group id="TextCanvas" x="121" y="97" width="474" height="800">
    </s:Group>
    <fx:Style>
        @namespace s "library://ns.adobe.com/flex/spark";
        @namespace mx "library://ns.adobe.com/flex/mx";

         @font-face {
            src: url("fonts/KREDIT1.TTF");
            fontFamily: KREDIT1;
            embed-as-cff: false;
            advancedAntiAliasing:true;
        } 

        s|Application
        {
            fontFamily:KREDIT1;
        }
    </fx:Style> 
    <fx:Script>     
        import mx.core.FlexGlobals;
        import mx.core.UIComponent;
        import mx.core.UITextField;
        import mx.core.UITextFormat;

        public function onComplete():void{
            var txtFldCoda:UITextField = new UITextField();
            var txtFormatCoda:UITextFormat = new UITextFormat(this.systemManager);
            var compCoda:UIComponent = new UIComponent();
            compCoda.addChild(txtFldCoda);
            txtFldCoda.embedFonts=true;         
            txtFldCoda.width=300;
            txtFormatCoda.size=33;
            TextCanvas.addElement(compCoda);
            txtFldCoda.text="Testing Kredit";
            //txtFormatCoda.font= "Kredit";
            txtFormatCoda.color="0x0ff345";
            var b2:Boolean = FlexGlobals.topLevelApplication.systemManager.isFontFaceEmbedded(txtFormatCoda);
            if(b2==false){
                trace("not embedded: " + txtFormatCoda.font);
            }
            txtFldCoda.defaultTextFormat= txtFormatCoda;//note that setTextFormat must be after setting the text
            txtFldCoda.setTextFormat(txtFormatCoda);//note that setTextFormat must be after setting the text
            txtFldCoda.x=0;
            txtFldCoda.y=100;           
        }       
    </fx:Script>
</s:Application> 
```

# iphone - 在 Titanium+iPhone 中创建字典（键值对）

> ID：11772703
> 
> 赞同：1
> 
> 时间：2012-08-02T07:14:39.137
> 
> 标签：iphone, titanium-mobile

谁能告诉我如何在 Titanium 中创建一个 NSDictionary 类型的对象。进行了很多搜索，但找不到创建键值对的任何正确解决方案。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T04:33:50.023

由于 Titanium 是用 Javascript 编写的，因此您可以传递可以具有键值对的 JSON 对象...

```
var dictionary = {
    key: 'value',
    key2: 'value2'
}; 
```

如果你想专门使用 NSDictionary，那么你必须走 iOS 模块的路径。

# wcf - Windows Azure 上的 Web 服务？

> ID：11772705
> 
> 赞同：2
> 
> 时间：2012-08-02T07:14:41.737
> 
> 标签：wcf, web-services, azure

我是 Windows Azure 的新手，我有一个问题。

我有：

1.  部署到 Windows Azure 的网站 - 该网站管理表（添加、编辑、删除）。我使用了本指南：[将 ASP.NET Web 应用程序部署到 Windows Azure 网站和 SQL 数据库](https://www.windowsazure.com/en-us/develop/net/tutorials/web-site-with-sql-database/)

2.  Andorid 应用程序和 iOS 应用程序（本机代码）。

现在，我希望移动应用程序从网站（和数据库）获取数据（JSON 格式）。 **这样做的最佳做法是什么？**

我试图创建一个 Azure (WCF) 服务（该项目引用了网站项目）但我没有成功。如果是这样 - 有没有人知道一个很好的教程来做到这一点？还有其他选择吗？也许来自网站本身？

非常感谢，尤瓦尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:22:19.717

如果您想与非 Microsoft 技术集成，我建议您查看[ASP.NET Web API](http://www.asp.net/web-api)，它允许您使用[内容协商](http://blogs.msdn.com/b/henrikn/archive/2012/04/22/asp-net-web-api-content-negotiation-and-accept-charset.aspx)构建 REST 服务。内容协商允许您的消费者指定它需要的格式（json、xml、...）。

要在 Windows Azure 网站中托管 ASP.NET Web API，您应该查看 Carlos 的博客，他详细描述了完成这项工作所需要做的事情：[在 Azure 网站上创建 ASP.NET Web API](http://blogs.msdn.com/b/carlosfigueira/archive/2012/07/12/creating-asp-net-web-apis-on-azure-web-sites.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:18:46.670

你看过 ASP.NET Web API 了吗？

[http://www.asp.net/web-api](http://www.asp.net/web-api)

# graphics - 如何提高边缘检测算法的准确性？

> ID：11772709
> 
> 赞同：-1
> 
> 时间：2012-08-02T07:15:07.260
> 
> 标签：graphics, opencv

我想在 opencv 中使用 Canny 边缘或 Sobel 边缘算法来检测图像的边缘。

当我使用深色背景的物体（纸张）时效果很好。
但是当背景颜色与对象的颜色相似时，质量会降低。

只有阴影上的边缘是清晰的。如果阴影不是那么清晰，质量不够好。

那么有什么好的方法可以改善吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:12:09.850

请记住，边缘是指代表颜色或纹理分布变化的边界。因此，如果您将对象保持在相似的颜色背景中，那么边缘检测器如何找到强边缘...

反正问题也有解决办法

如果背景和对象颜色不同，那么为了更好的边缘检测，您可以使用[Frei-Chen 边缘检测器](http://rastergrid.com/blog/2011/01/frei-chen-edge-detector/)

如果您的背景和对象在 RGB 空间中有点相似，则尝试将其转换为 HSV 或 Ycbcr 空间并应用边缘检测或分割技术...

希望有用...

# mysql - 在其包含的学生指向的表中查找学生的排名

> ID：11772722
> 
> 赞同：0
> 
> 时间：2012-08-02T07:15:53.243
> 
> 标签：mysql, sql, sql-server, sql-server-2008, tsql

我有一个简单的表，它有一些记录，有几条关于学生的记录。我想根据点确定每个学生的排名。我使用以下查询。当我查询所有学生时没问题，但是当我按姓名或家庭搜索学生时，所有学生都有 1 级，我知道这是正常的，但我有任何解决方案。我想在每个班级按姓名搜索学生时获得真实排名你知道应用解决方案吗？

```
Select username ,average,[fname],[lname],point, Rank() over(order by point desc) as    'ranking' from karbar where (username=@username) order by point desc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:22:58.677

使用子查询。

```
SELECT * from
(Select username ,average,[fname],[lname],point, 
 Rank() over(order by point desc) as  'ranking' 
 from karbar order by point desc) t
WHERE username=@username 
```

# asp.net-mvc-3 - System.IO.File.Exists() 返回 false

> ID：11772724
> 
> 赞同：1
> 
> 时间：2012-08-02T07:15:58.173
> 
> 标签：asp.net-mvc-3, file-io

我有一个页面，我需要在其中显示存储在服务器上的图像。要找到该图像，我使用以下代码：

```
 if (System.IO.File.Exists(Server.MapPath(filepath))) 
```

当我使用它时，由于文件存在，我得到了正确的结果。

但是当我给出如下绝对路径时：

```
 if (System.IO.File.Exists("http://myserever.address/filepath")) 
```

它返回假。

该文件实际存在于那里，但我不知道为什么找不到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T07:20:45.270

您不能在 File.Exists 中使用 HTTP 路径。它支持网络共享和本地文件系统。如果您想在服务器端的 Web 应用程序中执行此操作。首先使用`Server.MapPath()`先找到物理位置，然后使用 File.Exists。

在这里阅读：http `Server.MapPath`: [//msdn.microsoft.com/en-us/library/ms524632%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms524632%28v=vs.90%29.aspx)

例如。

```
string filePath = ResolveUrl("~/filepath/something.jpg");

if (File.Exists(Server.MapPath(filePath)))
{
     //Do something. 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T07:22:10.440

System.IO.File.Exists 的路径参数是文件系统中实际文件的路径。

对 Server.MapPath() 的调用将 URI 更改为实际的文件路径。

所以它按预期工作。

# c++ - 有没有办法typedef一个静态函数

> ID：11772734
> 
> 赞同：0
> 
> 时间：2012-08-02T07:16:47.507
> 
> 标签：c++, typedef

我有一个 Singleton 类，我的 MPIProxy 类只有一个实例（否则会导致许多构造）。

要创建单个 MPIProxy 类，我有以下 typedef：

```
typedef Singleton<MPIProxy_> MPIProxySingleton; 
```

但是要访问该实例，我需要以下代码：

```
int myrank = MPIProxySingleton::instance().getRank(); 
```

我宁愿让客户写而不是`MPIProxySingleton::instance().xy()`简单地写`MPIProxy.xy()`。其中 .xy 是 MPIProxy_ 类的函数。这样上面的代码看起来像：

```
int myrank = MPIProxy.getRank(); 
```

我尝试了以下方法：

```
typedef MPIProxySingleton::instance() MPIProxy; 
```

但是，这会导致编译错误：

```
/Users/david/Desktop/GSOC/miind/miind/./libs/MPILib/include/utilities/MPIProxy.hpp:158:31: error: C++ requires a type specifier for all declarations
typedef Singleton<MPIProxy_>::instance() MPIProxy;
~~~~~~~                       ^
/Users/david/Desktop/GSOC/miind/miind/./libs/MPILib/include/utilities/MPIProxy.hpp:158:41: error: expected ';' after top level declarator
typedef Singleton<MPIProxy_>::instance() MPIProxy; 
```

这是我的 Singleton 类的代码：

```
/** Singleton holder template class.
 * Template class to create singletons. A singleton instance of class
 * MyType is created and accessed using
 * \code
 * typedef Singleton<MyType> MySingletonType;
 * MyType& myRef = MySingletonType::instance()
 * // ... do something ...
 * \endcode
 */
template<class T>
class Singleton
{
public:
    // disallow creation, copying and assignment

    /** Deleted constructor to disallow explicit construction.
     * Is not defined.
     */
    Singleton()=delete;

    /** Deleted copy constructor to disallow explicit copying.
     * Is not defined.
     * @param S A singleton object.
     */
    Singleton(const Singleton& S)=delete;

    /** Deleted assignment operator to disallow explicit assignment.
     * @param S A singleton object.
     * @return The current singleton.
     */
    Singleton& operator=(const Singleton& S)=delete;

    /** Return a reference to the only instance of \c Singleton<T>.
     * @return A reference to the instance of the object.
     */
    static T& instance();

    /** Destructor.
     */
    ~Singleton();

private:

    /** Create method. Creates the singleton instance (a Meyers singleton, ie.
     * a function static object) upon the first call to \c instance().
     */
    static void create();

    /** Pointer to the instance.
     */
    static T* pInstance_;

    /** Status of the singleton. True if the singleton was destroyed.
     */
    static bool destroyed_;

};

/** Returns the unique instance of class T. If it was already
 *  deleted an exception is thrown. If the class T was never used
 *  before a new instance is generated.
 *
 * @return Unique instance of class T
 */
template<class T> T& Singleton<T>::instance()
{
    if (!pInstance_) {
        if (destroyed_) {
            // dead reference
            throw Exception("The instance was already destroyed");
        } else {
            // initial creation
            create();
        }
    }
    return *pInstance_;
}

template<class T> Singleton<T>::~Singleton()
{
    pInstance_ = 0;
    destroyed_ = true;
}

template<class T> void Singleton<T>::create()
{
    static T theInstance;
    pInstance_ = &theInstance;
}

template<class T> T* Singleton<T>::pInstance_ = 0;
template<class T> bool Singleton<T>::destroyed_ = false; 
```

这里是我的 MPIProxy_ 类的标题

```
class MPIProxy_ {
public:
    /**
     * destructor
     */
    virtual ~MPIProxy_();

    /**
     * wrapper method to return the process id, if mpi is disabled it returns 0
     * @return the world rank of a process
     */
    int getRank() const;

    /**
     * wrapper method to return the size, if MPI is disabled it returns 1
     * @return
     */
    int getSize() const;

    /**
     * wrapper for mpi barrier
     */
    void barrier();

    /**
     * waits until all request stored in the vector _mpiStatus are finished
     */
    void waitAll();

    /**
     * Broadcast the value from root
     * @param value The value to be broadcast
     * @param root The root process
     */
    template<typename T>
    void broadcast(T& value, int root);

    /**
     * asynchronous receive operation the mpi status is stored in _mpiStatus
     * @param source The source of the message
     * @param tag The tag of the message
     * @param value The value received
     */
    template<typename T>
    void irecv(int source, int tag, T& value) const;

    /**
     * asynchronous send operation the mpi status is stored in _mpiStatus
     * @param dest The destination of the message
     * @param tag The tag of the message
     * @param value The value sended
     */
    template<typename T>
    void isend(int dest, int tag, const T& value) const;

private:
    /**
     * Declare the Singleton class a friend to allow construction of the MPIProxy_ class
     */
    friend class Singleton<MPIProxy_>;
    /**
     * constructor sets the MPI rank and size
     */
    MPIProxy_();

#ifdef ENABLE_MPI
    /**
     * stores the mpi statuses
     */
    static std::vector<boost::mpi::request> _mpiStatus;
#endif

    /**
     * storage of the rank to avoid function calls
     */
    static int _rank;

    /**
     * storage of the size to avoid function calls
     */
    static int _size;
};

template<typename T>
void MPIProxy_::broadcast(T& value, int root) {
#ifdef ENABLE_MPI
    mpi::communicator world;
    boost::mpi::broadcast(world, value, root);
#endif
}

template<typename T>
void MPIProxy_::irecv(int source, int tag, T& value) const {
#ifdef ENABLE_MPI
    mpi::communicator world;
    _mpiStatus.push_back(world.irecv(source, tag, value));
#else
    MPILib::utilities::Exception("MPI Code called from serial code in irecv");
#endif
}

template<typename T>
void MPIProxy_::isend(int dest, int tag, const T& value) const {
#ifdef ENABLE_MPI
    mpi::communicator world;
    _mpiStatus.push_back(world.isend(dest, tag, value));
#else
    MPILib::utilities::Exception("MPI Code called from serial code in isend");
#endif
}

typedef Singleton<MPIProxy_> MPIProxySingleton;
//typedef MPIProxySingleton::instance() MPIProxy; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T07:23:01.567

在这种情况下，包装函数总是一个不错的选择：

```
MPIProxy_ &  MPIProxy()
{
   return MPIProxySingleton::instance();
} 
```

然后将其用作：

```
MPIProxy().xy(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T07:52:20.463

我只是想提出一种稍微不同的方式来完成同样的事情。由于 a应该是无状态的，因此允许实例化、复制、分配或销毁`Singleton`实际上没有害处。`Singleton`它只是模板参数的单个静态实例的包装器。鉴于此，您可以这样定义`Singleton`：

```
template <typename T>
class Singleton {
public:
    static T & instance () {
        static T instance_;
        return instance_;
    }
    T * operator -> () const { return &instance(); }
}; 
```

因此，对于您打算制作的对象`Singleton`：

```
class Foo_ {
    friend class Singleton<Foo_>;
    Foo_ () {}
public:
    void bar () { std::cout << __PRETTY_FUNCTION__ << std::endl; }
};

typedef Singleton<Foo_> Foo; 
```

然后，您可以像这样使用它：

```
Foo()->bar(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T07:19:19.260

引用它：

```
MPIProxy_& MPIProxy = MPIProxySingleton::instance(); 
```

# bash - 将文件从一个目录移动到另一个目录的脚本

> ID：11772735
> 
> 赞同：2
> 
> 时间：2012-08-02T07:16:51.247
> 
> 标签：bash, shell, mv, dovecot

我已经成功地将我的邮件 imap 代理从 dovecot 更改为 courier-imap，对于一些必需的功能，我如何在 maildrop/seive 目录结构中遇到问题，我需要将 10000 个邮箱移动到正确的目录结构，

所以我需要的是一个脚本，它将转换为像这样移动

mv /var/vmail/[域]/[用户名]/Maildir/* /var/vmail/[域]/[用户名]/

我不想运行这个命令 10000 次，它很麻烦，你能帮忙吗？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T08:11:02.590

```
for dir in /var/vmail/*/*
do
  mv "$dir"/Mail/* "$dir"
done 
```

# ruby-on-rails - 设置管理员用户以编辑用户、文章、协作者

> ID：11772739
> 
> 赞同：1
> 
> 时间：2012-08-02T07:17:19.283
> 
> 标签：ruby-on-rails, ruby

我正在尝试解决在我的网站上设置管理员时遇到的问题。这是我的路线的简单版本。

```
resources :users
  resources :articles
  resources :collaborators
end

resources :admin 
```

管理员用户与协作者非常相似，因为他们可以编辑和创建文章，但管理员还可以为每个用户添加用户、协作者和文章。协作者只能对与分配给他们的用户相关联的文章进行处理。

这有点令人困惑的部分是如何设置管理员用于 CRUD 操作的控制器和视图。到目前为止，我尝试实现它的方式是在 admin/.xml 中创建单独的 CRUD 视图。问题在于功能与合作者非常相似，我觉得它可能以某种方式成为 DRYer。

任何人都知道实现这样的事情的最基本方法？谢谢！

更新：我想更新一下，说谷歌管理工具非常容易。我更想知道如何在没有管理工具的情况下实现这一点，或者如果这听起来是个坏主意，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:19:19.910

我想出的答案是创建具有管理字段真/假的协作者。我还设置了 CanCan，它运行良好。

这是我的 CanCan 能力.rb

定义初始化（用户）

```
if user.admin?
  can :manage, :all
else 
  can :manage, Article, :id => user.article_id
  cannot :index, Article
end 
```

结尾

我只是使用“用户”，因为它比合作者和基本上是用户更易读和更短......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:36:33.497

试试 ActiveAdmin [(http://activeadmin.info/](http://activeadmin.info/) )。我认为这是为您的应用程序构建管理员后端的最简单方法。

# json - 用 JQuery 调用 web 服务...我怎样才能使代码工作

> ID：11772740
> 
> 赞同：-2
> 
> 时间：2012-08-02T07:17:30.693
> 
> 标签：json, web-services, jquery

我尝试用 JQuery 调用 web 服务。我怎样才能使下面的代码工作？

> ```
>  function TEST() {
>               var curcode = "AFA";
>               var serviceURL = "http://www.webservicex.net/country.asmx/GetCountryByCurrencyCode";
>               var requestData = "{'CurrencyCode':'" + curcode + "'}"; 
> 
>                 $.ajax({
>                           type: "POST",
>                           contentType: "application/json; charset=utf-8",
>                           url: serviceURL,
>                           data: requestData,
>                           dataType: 'json',
>                           success: function(msg)
>                                   {
>                                         var response = msg.d;  
>                                     alert("response.Message : " + response.Message);
>                                   },
>                           error: function(msg)
>                                {
>                                   alert("error msg : " + msg.d);
>                                  }    
>               });
>                   }
>  </script> 
> ```

我错过了什么 ？

问候， 安德里安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:32:38.553

如果您的错误类似于

`XMLHttpRequest cannot load http://www.webservicex.net/country.asmx/GetCountryByCurrencyCode. Origin <Your URL> is not allowed by Access-Control-Allow-Origin.`

比我希望是由[CORS](http://www.w3.org/TR/cors/) [限制](http://www.w3.org/TR/cors/#access-control-allow-origin-response-header)引起的。

如果该服务不支持 CORS，则在客户端使用此服务的唯一方法是在您的服务器上使用代理。

如果您有兴趣，请提供更多资源。

[http://enable-cors.org/](http://enable-cors.org/)

[MDN 上的 CORS](https://developer.mozilla.org/en/http_access_control)

Monsur Hossain[使用 CORS @ html5rocks.com](http://www.html5rocks.com/en/tutorials/cors/)

Eric Bidelman[在 XMLHTTPREQUEST2中的新技巧](http://www.html5rocks.com/en/tutorials/file/xhr2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:29:22.240

尝试访问：[http ://www.webservicex.net/country.asmx/GetCountryByCurrencyCode?CurrencyCode=AFA](http://www.webservicex.net/country.asmx/GetCountryByCurrencyCode?CurrencyCode=AFA)

返回数据的格式为xml。所以我认为你应该在你的ajax调用中使用xml格式。

**编辑**

[好的，我设法在jquery 插件](https://github.com/padolsey/jQuery-Plugins/tree/master/cross-domain-ajax/)的帮助下使它工作。

```
<!DOCTYPE HTML>
<html>
<head>
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="js/jquery.xdomainajax.js"></script>
<script>
jQuery(document).ready(function($) {
     $.ajax({
         url: 'http://www.webservicex.net/country.asmx/GetCountryByCurrencyCode?CurrencyCode=AFA',
         type: 'GET',
        success: function(res) {
            alert(res.responseText);
        }
    });
});
</script>
</head>
<body>
</body> 
</html> 
```

试试看。

# java - ListView 内存问题

> ID：11772741
> 
> 赞同：0
> 
> 时间：2012-08-02T07:17:32.067
> 
> 标签：java, android, sqlite, listview, android-listview

我正在使用`listview`将超过 50 个项目存储到`listview`其工作中，但是在插入第 20 个项目后，日志猫中显示的错误是这样的。

```
08-02 12:50:34.646: E/CursorWindow(5245): not growing since there are already 16 row(s), max size 1048576
08-02 12:50:34.646: E/Cursor(5245): Failed allocating 69485 bytes for text/blob at 24,8
08-02 12:50:34.695: D/Cursor(5245): finish_program_and_get_row_count row 25
08-02 12:50:35.365: E/CursorWindow(5245): need to grow: mSize = 1048576, size = 69485, freeSpace() = 9795, numRows = 16
08-02 12:50:35.365: E/CursorWindow(5245): not growing since there are already 16 row(s), max size 1048576
08-02 12:50:35.365: E/Cursor(5245): Failed allocating 69485 bytes for text/blob at 23,8
08-02 12:50:35.396: D/Cursor(5245): finish_program_and_get_row_count row 26
08-02 12:50:35.896: D/Cursor(5245): skip_rows row 7
08-02 12:50:35.905: E/CursorWindow(5245): need to grow: mSize = 1048576, size = 69485, 
freeSpace() = 9795, numRows = 16
08-02 12:50:35.905: E/CursorWindow(5245): not growing since there are already 16 row(s), max size 1048576
08-02 12:50:35.905: E/Cursor(5245): Failed allocating 69485 bytes for text/blob at 22,8
08-02 12:50:35.936: D/Cursor(5245): finish_program_and_get_row_count row 27
08-02 12:50:36.425: D/Cursor(5245): skip_rows row 6
08-02 12:50:36.436: E/CursorWindow(5245): need to grow: mSize = 1048576, size = 69485, 
freeSpace() = 9795, numRows = 16 
```

而且应用程序加载速度很慢。帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T10:06:17.930

`sqlite`答案是，我们不能在 single 中从 db加载超过 1 MB 的数据`Cursor`。所以必须避免将大数据加载到列表项中。替代解决方案保留较大数据的任何唯一 ID，并按项目将其称为单个数据`onClick List`（为我工作）。

最好的解决方案是使用`CursorJoiner`并遵循此链接

[如何将超过 1 MB 的数据从 sqlite db 加载到 android 游标？](https://stackoverflow.com/questions/6938405/how-to-load-more-than-1-mb-data-from-sqlite-db-to-android-cursor)

[Android SQL Lite 无法增长](https://stackoverflow.com/questions/4561085/android-sql-lite-fail-to-grow)

# java - 在 java 中使用 sql 查询更新 5 个组合框

> ID：11772744
> 
> 赞同：0
> 
> 时间：2012-08-02T07:17:48.807
> 
> 标签：java, sql, swing, jcombobox

我有一个 MS Access 数据库，其中列名“tname”中有一组平板电脑名称。我在 java 小程序中有 5 个组合框。每次加载时，所有 5 个组合框都必须更新 tname 中的项目。我使用了以下代码。它仅将 tname 中的第一项添加到第一个组合框中。其他框仍然是空的。但是，如果我更新一个组合框，它就可以工作。但我需要 5 个组合框才能更新。请指导我解决我遇到的问题。

```
try
{
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
Connection conn9=DriverManager.getConnection("jdbc:odbc:vasantham","","");
Statement st9=conn9.createStatement();
ResultSet rs9=st9.executeQuery("select DISTINCT tname from try");

while(rs9.next())
{
  ct19.addItem(rs9.getString("tname"));
  ct29.addItem(rs9.getString("tname"));
  ct39.addItem(rs9.getString("tname"));
  ct49.addItem(rs9.getString("tname"));
  ct59.addItem(rs9.getString("tname"));
}

conn9.close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:22:47.520

我已经尝试过，一切正常，因为我想知道有什么需要`temp`变量来查看我的代码，它的完整工作代码

```
import java.awt.FlowLayout;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;
import javax.swing.JComboBox;
import javax.swing.JFrame;

public class ResultSetDemo {

    public ResultSetDemo() {
        JFrame f = new JFrame();
        f.setLayout(new FlowLayout());
        JComboBox cb1 = new JComboBox();
        f.add(cb1);
        JComboBox cb2 = new JComboBox();
        f.add(cb2);
        JComboBox cb3 = new JComboBox();
        f.add(cb3);
        JComboBox cb4 = new JComboBox();
        f.add(cb4);
        JComboBox cb5 = new JComboBox();
        f.add(cb5);

        try {
            Class.forName("com.mysql.jdbc.Driver");
            Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/database_name", my_sql_username, mysql_password);
            Statement st = con.createStatement();
            ResultSet rs = st.executeQuery("select DISTINCT tname from try");
            while (rs.next()) {
                cb1.addItem(rs.getString("tname"));
                cb2.addItem(rs.getString("tname"));
                cb3.addItem(rs.getString("tname"));
                cb4.addItem(rs.getString("tname"));
                cb5.addItem(rs.getString("tname"));  

            }
        } catch (Exception ex) {
            System.out.println(ex);
        }

        f.setSize(600, 100);
        f.setVisible(true);

    }

    public static void main(String[] args) {
        new ResultSetDemo();
    }
} 
```

它用**表中的所有****行****填充**cbox

 ***** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:14:35.547

假设名为的变量`ct[1-5]9`引用 的不同实例`JComboBox`，“如果添加重复`String`对象，可能会出现问题。” 如有必要，您可以复制这些项目，如[API](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComboBox.html#addItem%28E%29)中所示。

更好的方法是更新`DefaultComboBoxModel`每个`JComboBox`实例共享的单个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T07:33:42.987

不要为每个组合框分配每个检索到的值，而是将其分配给一个临时字符串并将其分配给每个组合框。

```
String tmp9;
while(rs9.next())
{
  tmp9=rs9.getString("tname");
  ct19.addItem(tmp9);
  ct29.addItem(tmp9);
  ct39.addItem(tmp9);
  ct49.addItem(tmp9);
  ct59.addItem(tmp9);
} 
```****

# ios - iphone 4s可以连接两个蓝牙4.0设备吗？

> ID：11772746
> 
> 赞同：2
> 
> 时间：2012-08-02T07:17:54.317
> 
> 标签：ios, core-bluetooth

我想知道iphone 4s可以连接两个蓝牙4.0设备吗？

我使用 Corebluetooth.framework 连接我的 bluetooth4.0 设备，现在我有疑问，如果我们有两个设备，我可以同时连接吗？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T21:54:24.133

是的。

[例如，在http://developer.apple.com/library/mac/#samplecode/HeartRateMonitor/Introduction/Intro.html%23//apple_ref/doc/uid/DTS40011322](http://developer.apple.com/library/mac/#samplecode/HeartRateMonitor/Introduction/Intro.html%23//apple_ref/doc/uid/DTS40011322)查看 Apple 的心率监测器示例。在 HeartRateMonitorAppDelegate.m 中，您会发现以下方法收集多个设备：

```
- (void) centralManager:(CBCentralManager *)central didDiscoverPeripheral:(CBPeripheral *)aPeripheral advertisementData:(NSDictionary *)advertisementData RSSI:(NSNumber *)RSSI 
{    
    NSMutableArray *peripherals = [self mutableArrayValueForKey:@"heartRateMonitors"];
    if( ![self.heartRateMonitors containsObject:aPeripheral] )
        [peripherals addObject:aPeripheral];

    /* Retreive already known devices */
    if(autoConnect)
    {
        [manager retrievePeripherals:[NSArray arrayWithObject:(id)aPeripheral.UUID]];
    }
} 
```

在这个特定的示例中，该应用程序仅与一个心率监测器连接，但您可以查看代码并轻松了解它如何连接到两个，假设您愿意更新 UI 以显示两个心率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:16:04.350

如果 iPhone 设备扮演主机角色，您可以连接。一台从设备只能与一台主设备连接。包括 iPhone 设备在内的 BLE 设备可以同时扮演主从角色。有关 BLE 设备连接的更多信息，您可以点击此[链接](https://stackoverflow.com/questions/11852662/what-exactly-is-a-ble-connected-device-on-ios/11858550#11858550)。

# java - maven如何只编译修改后的java文件？

> ID：11772747
> 
> 赞同：14
> 
> 时间：2012-08-02T07:17:56.647
> 
> 标签：java, maven, compilation, maven-3, last-modified

我只是想知道这一点，当我给 mvn install 而不做'clean'时，maven 只编译修改后的 java 文件。maven如何识别java文件是否被修改？我相信它没有使用文件的最后修改属性。

我相信的原因：我有一个模块，在合并来自 svn 的更改后，我给了 mvn install 并且它没有编译修改后的文件，当我查看更改时，我看到“long”被修改为“long”吸气剂和二传手。

所以我只想知道 maven 如何识别 java 文件是否已更改？

（PS 我正在使用 Apache Maven 3.0.3，如果这很重要的话）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-02T07:42:46.627

我相信 Maven 编译器插件使用源文件和类文件的最后修改日期来确定是否需要重新编译。

编译器[网站](http://maven.apache.org/plugins/maven-compiler-plugin/)的信息相当短，但`compiler:compile`目标页面有关于以下属性的信息，可以微调过时计算：[http ://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html #staleMillis](http://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html#staleMillis)。这是关于陈旧性的唯一官方声明。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-02T07:48:09.253

Without knowing much about maven, I can tell you that generally speaking, "make"-like tools use the "last changed" timestamp, which would explain the issue you had with svn ( see [Wikipedia on Subversion's weaknesses](http://en.wikipedia.org/wiki/Apache_Subversion#Limitations_and_problems).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-03T15:28:52.467

Robert Scholte 在[https://issues.apache.org/jira/browse/MCOMPILER-205](https://issues.apache.org/jira/browse/MCOMPILER-205)的评论解释了这个过程。它取决于“maven-compiler-plugin”的“useIncrementalCompilation”选项（顺便说一句，我只设法让“useIncrementalCompilation”与 3.1 一起工作，而不是 3.0）：

> 我看到有些混乱，所以需要改变一些东西，也许改进文档就足够了。查看代码，您会发现非增量只会查看更改的源文件。Incremental 还将验证依赖项是否已更改以及文件是否已添加或删除。如果它已更改，它将删除完整的类目录。原因是默认的 java 编译器非常快，可能比分析每个文件要快得多。IIUC eclipse 编译器是一个真正的增量编译器，所以我们可以根据使用的编译器决定不删除类目录。

# java - JUNIT 参数错误：参数数量错误

> ID：11772751
> 
> 赞同：1
> 
> 时间：2012-08-02T07:18:04.600
> 
> 标签：java, junit, parameterized

我正在使用 JUnit 参数化测试并出现此错误：

java.lang.IllegalArgumentException：参数数量错误

这是代码：

测试：

```
@Parameters
public static Collection<Object[]> spreadsheetData() throws IOException {
    InputStream file = new FileInputStream("c:\\Path\\to\\file\\jeje.xls"); 
    return Utils.loadFromExcel(file);
} 
```

方法：

```
public static Collection<Object[]> loadFromExcel(final InputStream excelFile)
throws IOException {
    HSSFWorkbook workbook = new HSSFWorkbook(excelFile);

    Sheet sheet = workbook.getSheetAt(0);

    // Number of columns
    int numberOfColumns = countNonEmptyColumns(sheet);
    int rows=0;

    // Number of rows
    for (Row row : sheet) {
        rows++;
    }

    Object[][] datos = new Object[numberOfColumns][rows];

    for (int row = 0; row<rows; row++) {
            for (int column = 0; column < numberOfColumns; column++) {
                Cell cell = sheet.getRow(row).getCell(column);
                datos[column][row] = cell.getRichStringCellValue();
            }   
    }

    return Arrays.asList(datos);
} 
```

我不知道怎么了。

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:35:40.310

我假设电子表格中的每一行都是一个测试数据集，每一列都是你的测试的一个参数。如果是这种情况，您需要将数组声明更改为`Object[][] datos = new Object[rows][numberOfColumns];`并相应地填充数组。

**例子**

鉴于此电子表格...

```
a    b
c    d
e    f
g    h 
```

...您当前的实现`loadFromExcel()`将返回下面的集合。电子表格中的新行将为结果列表中的每个数组添加一个新元素，但结果列表的大小将保持不变。

```
[a, c, e, g]
[b, d, f, h] 
```

我假设，该方法应该返回如下内容：

```
[a, b]
[c, d]
[e, f]
[g, h] 
```

电子表格中的每个新行都会将一个包含两个元素的新数组添加到结果列表中。

# php - 使用 json_encode 从 foreach 结果中显示多行

> ID：11772754
> 
> 赞同：0
> 
> 时间：2012-08-02T07:18:13.930
> 
> 标签：php, ajax, json

我正在开发一个评论系统，我正在尝试构建一个函数，使用 ajax 从数据库中查询和显示 10 条最新评论。

我遇到的问题是，我只是不知道如何使用**ajax**和**json_encode显示****多**行。

 ****当我使用 php 显示多行时，我使用`.=`，这非常简单，但是使用 ajax 和 json_encode，我目前只能显示一个结果。

下面是我的代码的纯 PHP 版本，用于显示多行

```
public function display_comment(){
    $query = "SELECT * FROM 'comment' WHERE 'user_id' = $user_id ORDER BY 'save_time' DESC LIMIT 10";
    $result = $database->query($query);

    foreach($result as $row){
        $user_id = $row['user_id'];
        $user_name = $row['user_name'];
        $comment = $row['comment'];

        $all_comments .= '<div id="' . $user_id . '"><span>' . $user_name . '</span><span>' . $comment . '</span></div>';
    }
} 
```

使用 ajax 和 json_encode，这就是我返回单个结果的方式

```
public function display_comment(){
    $query = "SELECT * FROM 'comment' WHERE 'user_id' = $user_id ORDER BY 'save_time' DESC LIMIT 10";
    $result = $database->query($query);

    foreach($result as $row){
        $user_id = $row['user_id'];
        $user_name = $row['user_name'];
        $comment = $row['comment'];

        $json_array = array("user_id" => $user_id, "user_name" => $user_name, "comment" => $comment);
        header('Content-type:application/json');
        exit(json_encode($json_array)); // I am using exit instead of echo, because somehow if I use echo, it returns entire html page. 
    }
} 
```

jQuery部分

```
$(document).on("click","#view_comment",function(e){
    e.preventDefault();
    $("#view_comment").text("loading..");
    var view_comment = $(this).val(); // Don't worry about this

    $.ajax({
        type:"post",
        data:{"view_comment":view_comment},
        dataType:"json",
        success:function(data){
            $('#ajax_comment').html('<div id="' + data.user_id + '"><span>' + data.user_name + '</span><span>' + data.comment + '</span></div>');
        },
        error:function(data){
            // Error code
        }
    });
}); 
```

我应该如何更改我的代码以使用 json_encode 显示多行？

非常感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T07:24:43.460

您只能查看单行的原因是因为在`while()`循环的第一次迭代之后您已经存在脚本：

```
exit(json_encode($json_array)); 
```

将php更改为：

```
public function display_comment(){
  $query = "SELECT * FROM 'comment' WHERE 'user_id' = $user_id ORDER BY 'save_time' DESC LIMIT 10";
  $result = $database->query($query);
  $results = array();
  foreach($result as $row){
    $user_id = $row['user_id'];
    $user_name = $row['user_name'];
    $comment = $row['comment'];

    $results[] = array("user_id" => $user_id, "user_name" => $user_name, "comment" => $comment);

  }
  header('Content-type:application/json');
  exit(json_encode($results)); 
} 
```

Javascript

```
$(document).on("click","#view_comment",function(e){
    e.preventDefault();
    $("#view_comment").text("loading..");
    var view_comment = $(this).val(); // Don't worry about this

    $.ajax({
        type:"post",
        data:{"view_comment":view_comment},
        dataType:"json",
        success:function(data){
            var html = '', comment;
            for(var i = 0; i < data.length; i++) {
                comment = data[i];
                html += '<div id="' + comment.user_id + '"><span>' + comment.user_name + '</span><span>' + comment.comment + '</span></div>'
            }
            $('#ajax_comment').html(html);
        },
        error:function(data){
            // Error code
        }
    });
}); 
```****

# java - VLCJ 流查看不起作用

> ID：11772766
> 
> 赞同：1
> 
> 时间：2012-08-02T07:19:02.407
> 
> 标签：java, stream, vlcj

我正在尝试使用 vlcj 的 EmbeddedMediaPlayer 观看流式视频（例如，这个：rtmp://cp145180.live.edgefcs.net/live/iptv1_1_500@42325），但我只在一台机器上成功；它适用于我的台式机，不适用于我的笔记本电脑。这些系统是：

台式机：Windows 7 Pro 64 位（64 位 JVM），笔记本电脑：Windows 7 Pro 32 位（32 位 JVM）

在这两种情况下，我都使用了足够的 vlc 库。在我的桌面上，可以很好地观看流式视频，但在我的笔记本电脑上 - 既没有视频也没有音频。而且我没有收到任何错误，只是播放器黑屏。这是代码：

```
public class Player {
private JFrame frame;
private EmbeddedMediaPlayerComponent mediaPlayerComponent;
private MessageViewPanel messagePanel;

public Player() {
    frame = new JFrame();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setLayout(null);
    frame.setLocation(100, 50);
    frame.setSize(800, 600);
}

public void play(String mrl) {
    if(mediaPlayerComponent == null) {
        mediaPlayerComponent = new EmbeddedMediaPlayerComponent();
        mediaPlayerComponent.setLocation(50,50);
        mediaPlayerComponent.setSize(700, 500);
    }

    frame.setContentPane(mediaPlayerComponent);
    frame.setVisible(true);

    MediaPlayer mediaPlayer = mediaPlayerComponent.getMediaPlayer();
    mediaPlayer.setStandardMediaOptions();
    mediaPlayer.playMedia(mrl);
}
}

public class App {
public static void main(String[] args) {
    System.setProperty("jna.library.path", "C:\\Program Files\\VideoLAN\\VLC");
    System.out.println(System.getProperty("sun.arch.data.model"));
    final Player player = new Player();
    new Thread() {
        public void run() {
            player.play("rtmp://cp145180.live.edgefcs.net/live/iptv1_1_500@42325");
        }
    }.start();
}
} 
```

你们有没有人偶然发现类似的问题？

编辑：我还有另一个问题。我正在尝试查看来自网络摄像机的流式视频。我有正确的网址（看起来像 rtsp://ip_adx/axis-media/media.amp），但它不会播放。它的行为与我的笔记本电脑上的任何其他流相同 - 黑屏。

我非常需要帮助：P

# floating-point - 双精度浮点数如何转换为单精度浮点格式？

> ID：11772776
> 
> 赞同：1
> 
> 时间：2012-08-02T07:19:46.480
> 
> 标签：floating-point, type-conversion, ieee-754, double-precision, single-precision

将数字从[双精度浮点格式转换](http://en.wikipedia.org/wiki/Double-precision_floating-point_format "双精度浮点格式 - 维基百科，免费的百科全书")为[单精度浮点格式](http://en.wikipedia.org/wiki/Single-precision_floating-point_format "单精度浮点格式 - 维基百科，免费的百科全书")会导致精度损失。用于实现这种转换的算法是什么？

数字是大于`3.4028234e+38`还是小于`-3.4028234e+38`简单地减少到各自的限制？我觉得转换过程比这更复杂，但我找不到它的文档。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T12:02:53.973

最常见的浮点格式是 IEEE 754 标准中指定的二进制浮点格式。我将回答您对这些格式的问题。新版（2008 年）标准中还有十进制浮点格式，还有 IEEE 754 标准以外的格式，但 754 二进制格式是迄今为止最常见的格式。一些关于四舍五入的信息，以及标准的链接，都在这个[维基百科页面](http://en.wikipedia.org/wiki/IEEE_floating_point#Rounding_rules)中。

将双精度转换为单精度与对任何操作的结果进行舍入相同。（例如，加法、乘法或平方根具有精确的数学值，并且该值根据规则四舍五入以产生从操作返回的结果。为了转换的目的，输入值是精确的数学值，并且它是圆形的。）

通常，计算环境有一些默认的舍入模式。（各种编程语言可能会提供更改默认舍入模式的方法，或者专门针对每个操作指定它。）默认舍入模式通常是舍入到最近的。其他是向零舍入、向正无穷大舍入（向上）和向负无穷大舍入（向下）。

在四舍五入模式下，返回最接近精确值的可表示数字。如果出现平局，则返回具有偶数低位（在其小数或有效数中）的数字。为此，无穷大实际上就像是有限数模式中的下一个值一样。在单精度中，最大的有限数是 0x1.fffff8p127、0x1.fffffap127、0x1.fffffcp127 和 0x1.ffffffep127。（单精度有效数中有 24 位，因此该位中的步长是最后一个十六进制数字中的步长 2。）出于舍入目的，无穷大就像它在 0x2p128 处一样。因此，如果确切结果更接近 0x1.ffffffep127（因此，小于 0x1.ffffffp127），则将其四舍五入为 0x1.ffffffep127。如果大于等于 0x1.ffffffp127，则四舍五入为无穷大。负无穷大的情况是对称的。

在向无穷大舍入模式下，返回大于或等于精确值的最接近的可表示值。因此，任何高于 0x1.ffffep127 的值都会四舍五入为无穷大。向负无穷大舍入返回小于或等于确切值的最接近的可表示值。向零舍入返回向零方向最接近的可表示值。

IEEE 754 标准只规定了结果；它没有指定算法。用于实现舍入的方法取决于每个实现。

# nhibernate - Nhibernate 是否支持 Sybase ASE？

> ID：11772779
> 
> 赞同：1
> 
> 时间：2012-08-02T07:20:02.207
> 
> 标签：nhibernate, sap-ase

我目前正在使用带有 ms sql server 2005 的 nhibernate 3.1。在同一个项目中，我需要连接到旧数据库 - Sybase ASE 15。

nhibernate 是否支持 sys base ase，如果支持，它是否稳定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T07:54:49.030

Sybase ASE 得到[官方](https://github.com/nhibernate/nhibernate-core/tree/master/src/NHibernate/Driver) [支持](https://github.com/nhibernate/nhibernate-core/blob/master/src/NHibernate/Dialect/SybaseASE15Dialect.cs)。由于 NHibernate 是开源的，您可以轻松地在[SourceForge](http://sourceforge.net/projects/nhibernate/)或[GitHub](https://github.com/nhibernate/nhibernate-core)镜像上浏览它并查看[它支持](https://github.com/nhibernate/nhibernate-core/tree/master/src/NHibernate/Dialect)哪些数据库。

至于稳定性，[Sybase ASE 15 支持](https://nhibernate.jira.com/browse/NH-2526)从早期的 NHibernate 3.2 版本开始就存在，看起来 Sybase 员工正在[忽略](http://iablog.sybase.com/paulley/?cat=51)和/或维护 Sybase 对 NHibernate 的支持。

另一个可能有帮助的 SO 问题：
[Nhibernate 是否支持 Sybase？](https://stackoverflow.com/questions/2997787/does-nhibernate-support-sybase)

# javascript - 如何让线条绘制光标所在的位置？使用 MrDoob 的 Harmony 的 HTML5 画布

> ID：11772782
> 
> 赞同：0
> 
> 时间：2012-08-02T07:20:18.557
> 
> 标签：javascript, jquery, html, canvas, html5-canvas

**问题**

如何让线条绘制光标所在的位置？

**细节**

我正在尝试使用 MrDoob 的和谐脚本（https://github.com/mshuler/harmony）在 html5 画布上徒手画一条线。我已经编辑了画布，使其具有特定的宽度和高度（在它覆盖整个页面之前）。然后我使用以下 CSS 定位它

```
canvas 
{
    position:absolute;
    top:0px; left:0px;
} 
```

当我在画布上绘制（使用鼠标）时，线条是按照正常方式绘制的，但是如果我像这样定位画布

```
canvas 
{
    position:absolute;
    top:100px; left:0px;
} 
```

该行显示低于光标的位置。

**问题：如何让线条在光标所在的位置绘制？**

这是我的代码。

**CSS**

```
canvas 
{
    position:absolute;
    top:100px; left:0px;
}

#writepad
{
    display:block;
    width:700px;
    height:500px;
} 
```

**JAVASCRIPT (Main.js)**

```
 SCREEN_HEIGHT = $('#writepad').innerHeight();// SCREEN_HEIGHT = window.innerHeight,

init();

function init()
{
    var hash, palette, embed, localStorageImage;

    document.body.style.backgroundRepeat = 'no-repeat';
    document.body.style.backgroundPosition = 'center center';   

    container = document.createElement('div'); 
    document.body.appendChild(container);

    canvas = document.createElement("canvas");
    canvas.width = SCREEN_WIDTH;
    canvas.height = SCREEN_HEIGHT;
    canvas.style.cursor = 'crosshair';
    container.appendChild(canvas);

    context = canvas.getContext("2d");

    flattenCanvas = document.createElement("canvas");
    flattenCanvas.width = SCREEN_WIDTH;
    flattenCanvas.height = SCREEN_HEIGHT;   
}

// WINDOW

function onWindowMouseMove( event )
{
    mouseX = event.clientX;
    //console.log("mouseX=",mouseX);
    mouseY = event.clientY;
    //console.log("mouseY=",mouseY);
}

function onWindowResize()
{
    SCREEN_WIDTH = window.innerWidth;
    SCREEN_HEIGHT = window.innerHeight; 
    menu.container.style.left = ((SCREEN_WIDTH - menu.container.offsetWidth) / 2) + 'px';   
    about.container.style.left = ((SCREEN_WIDTH - about.container.offsetWidth) / 2) + 'px';
    about.container.style.top = ((SCREEN_HEIGHT - about.container.offsetHeight) / 2) + 'px';
}

function onWindowBlur( event )
{
    shiftKeyIsDown = false;
    altKeyIsDown = false;
}

// CANVAS

function onCanvasMouseDown( event )
{
    var data, position;
    clearTimeout(saveTimeOut);
    cleanPopUps();

    if (altKeyIsDown)
    {
        flatten();      
        data = flattenCanvas.getContext("2d").getImageData(0, 0, flattenCanvas.width, flattenCanvas.height).data;
        position = (event.clientX + (event.clientY * canvas.width)) * 4;
        console.log("position=",position);      
        foregroundColorSelector.setColor( [ data[position], data[position + 1], data[position + 2] ] );     
        return;
    }

    BRUSH_PRESSURE = wacom && wacom.isWacom ? wacom.pressure : 1;   
    brush.strokeStart( event.clientX, event.clientY );
    window.addEventListener('mousemove', onCanvasMouseMove, false);
    window.addEventListener('mouseup', onCanvasMouseUp, false);
}

function onCanvasMouseMove( event )
{
    BRUSH_PRESSURE = wacom && wacom.isWacom ? wacom.pressure : 1;   
    brush.stroke( event.clientX, event.clientY );
}

function onCanvasMouseUp()
{
    brush.strokeEnd();  
    window.removeEventListener('mousemove', onCanvasMouseMove, false);
    window.removeEventListener('mouseup', onCanvasMouseUp, false);
}

function onCanvasTouchStart( event )
{
    cleanPopUps();      
    if(event.touches.length == 1)   {
        event.preventDefault();     
        brush.strokeStart( event.touches[0].pageX, event.touches[0].pageY );        
        window.addEventListener('touchmove', onCanvasTouchMove, false);
        window.addEventListener('touchend', onCanvasTouchEnd, false);
    }
}

function onCanvasTouchMove( event )
{
    if(event.touches.length == 1)
    {
        event.preventDefault();
        brush.stroke( event.touches[0].pageX, event.touches[0].pageY );
    }
}

function onCanvasTouchEnd( event )
{
    if(event.touches.length == 0)
    {
        event.preventDefault();     
        brush.strokeEnd();
        window.removeEventListener('touchmove', onCanvasTouchMove, false);
        window.removeEventListener('touchend', onCanvasTouchEnd, false);
    }
}

function flatten()
{
    var context = flattenCanvas.getContext("2d");   
    context.fillStyle = 'rgb(' + BACKGROUND_COLOR[0] + ', ' + BACKGROUND_COLOR[1] + ', ' + BACKGROUND_COLOR[2] + ')';
    context.fillRect(0, 0, canvas.width, canvas.height);
    context.drawImage(canvas, 0, 0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:43:23.523

你想要这样的东西？？？

```
<!doctype html>
<html>
    <head>
        <script type="text/javascript">
        window.onload=function() {
            var canvas=document.getElementById('mycanvas');
            var ctx=canvas.getContext('2d');            
                     canvas.addEventListener('mousemove',function onMouseover(e) {
                        var mx = e.clientX - 8;
                        var my = e.clientY - 8;                             
                        ctx.fillStyle = '#000'; 
                        ctx.font = 'bold 22px verdana';
                        ctx.fillText(".", mx, my,1000);                     
                    }, 0);                  
        };
        </script>
    </head>
    <body>
        <canvas id="mycanvas" height="400" width="800" style="border:1px solid #000000;">
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:29:10.757

使用偏移属性

```
y = event.pageY - canvas.offsetTop;
x = event.pageX - canvas.offsetLeft; 
```

# xml - 使用 XQuery 添加节点

> ID：11772792
> 
> 赞同：0
> 
> 时间：2012-08-02T07:21:05.867
> 
> 标签：xml, xquery, xquery-update

我有 2 个 XML 文件 -

文件1.xml

```
<Fruits>
   <F>Apple</F>
   <F>Pineapple</F>
   <F>Orange</F>
   <F>Banana</F>
</Fruits> 
```

文件2.xml

```
<Fruits>
   <F>Grapes</F>
   <F>Peach</F>
   <F>Watermelon</F>
   <F>Chickoo</F>
</Fruits> 
```

我想用 File2.xml 中的数据更新/插入 File1.xml，这样我就有 File1.xml 作为 -

文件1.xml

```
<Fruits>
   <F>Apple</F>
   <F>Pineapple</F>
   <F>Orange</F>
   <F>Banana</F>
   <F>Grapes</F>
   <F>Peach</F>
   <F>Watermelon</F>
   <F>Chickoo</F>
</Fruits> 
```

如何使用 XQuery/XQuery 更新来做到这一点？我正在使用 XML 数据库 BaseX。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:04:35.183

这可以使用[XQuery Update](http://docs.basex.org/wiki/Updates)轻松完成：

```
insert nodes doc("File2")/Fruits/F as last into doc("File1")/Fruits 
```

如果您只将文件存储在硬盘上，而不是作为数据库，您也可以将数据库名称更改为文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:46:28.590

如果您在没有数据库上下文的情况下使用 XQuery，如果您想更新文件的内容，Zorba 有一个文件模块。您可以在[http://www.zorba-xquery.com/html/modules/expath/file 查看](http://www.zorba-xquery.com/html/modules/expath/file)。

如果您使用的是 XML 数据库，您可以编写以下更新表达式： 将节点 $file2/Fruits/F 插入 $file1/Fruits $file1 和 $file2 取决于您使用的数据库类型。

# object - 如何将一个 modelAndView 对象添加到另一个 ModelAndView 对象

> ID：11772802
> 
> 赞同：0
> 
> 时间：2012-08-02T07:22:21.757
> 
> 标签：object, spring-mvc, add, model-view

如何将一个 modelAndView 对象添加到另一个 ModelAndView 对象。就像我有一个 ModelAndView 对象 mv1 并且我想将另一个 modelandview 对象 mv2 值添加到 mv1.can 我使用`mv1.addObject("mv1",mv2);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:49:04.930

正如你所说，如果你想`ModelAndView`在另一个里面添加一个：

```
mv1.addObject("mv2", mv2); 
```

如果要包括从一个对象到另一个对象的**所有对象：**`ModelAndView`

```
mv1.addAllObjects(mv2.getModel()); 
```

# regex - perl 正则表达式数字匹配

> ID：11772803
> 
> 赞同：-1
> 
> 时间：2012-08-02T07:22:25.230
> 
> 标签：regex, perl, mod-perl

执行以下正则表达式匹配以验证日期是否为 YYYY_MM_DD 格式。但如果我的值为 2012_07_7，正则表达式会给出错误消息。根据正则表达式模式，日期部分和月份应该正好是 2 位数字。不知道为什么它不起作用。

```
if ($cmdParams{RunId} !~ m/^\d{4}_\d{2}_\d{2}$/)
{
  print "Not a valid date in the format YYYY_MM_DD";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T07:25:44.957

您的正则表达式为 day 组件指定了 2 位数字，如果您想允许 1 位或 2 位数字，您应该使用`{1,2}`而不是`{2}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T07:26:09.007

好吧，如果您查看您拥有的数据：**2012_07_7**，您会看到日期部分不是两位数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T07:25:33.060

明显地。您的模式规定最后一个数字块应该是两位数，而您提供的是 1。因此，如果您希望您的模式与此文本匹配，请尝试以下操作：

```
if ($cmdParams{RunId} !~ m/^\d{4}_\d{2}_\d\d?$/) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T10:24:53.723

我的解决方案：`^\d{4}_(?:1[0-2]|0?[1-9])_(?:3[01]|[1-2]\d|0?[1-9])$`
此模式匹配：2000_12_01 或 2001_1_1 或 2001_02_1

# java - Spring中创建bean的顺序

> ID：11772804
> 
> 赞同：0
> 
> 时间：2012-08-02T07:22:26.633
> 
> 标签：java, spring, spring-mvc, spring-annotations

我有一个控制器

```
package com.controller;
    @Controller
    public class MyController{
    @Autowired
    private ISessionHolder holder;
    } 
```

在我的`config xml`：

```
 <context:component-scan base-package="com.*" />

<bean id="sessionholder" class="com.session.SessionHolder" scope="session">
    <aop:scopedProxy/>
</bean> 
```

但是我得到了例外

```
no matching bean found for type ISessionHolder used in MyController. 
```

但是，如果我在 XML 中删除 sessionholder 的 bean 定义并进行注释，它就可以正常工作。

```
@Component
@ScopedProxy
public class SessionHolder{
//
} 
```

是先实例化带注释的类还是有特定的顺序？

# soap - Microsoft Dynamics SOAP RetrieveMultiple 不返回 TotalRecordCount

> ID：11772805
> 
> 赞同：1
> 
> 时间：2012-08-02T07:22:29.697
> 
> 标签：soap, dynamics-crm, dynamics-crm-4

我正在使用 Microsoft Dynamics CRM 4.0 的 SOAP API，并且在大多数情况下一切正常，但是当我尝试计算数据库中的联系人总数（或特定查询）时，它不尊重 TotalRecordCount =真标志。

这是我正在使用的 SOAP 请求：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <soap:Header>
        <CrmAuthenticationToken xmlns="http://schemas.microsoft.com/crm/2007/WebServices">
            ...
        </CrmAuthenticationToken>
    </soap:Header>

    <soap:Body>
        <RetrieveMultiple xmlns="http://schemas.microsoft.com/crm/2007/WebServices">
            <query xmlns:q1="http://schemas.microsoft.com/crm/2006/Query" xsi:type="q1:QueryExpression">
                <q1:EntityName>contact</q1:EntityName>
                <q1:Distinct>true</q1:Distinct>
                <q1:PageInfo>
                    <q1:ReturnTotalRecordCount>true</q1:ReturnTotalRecordCount>
                    <q1:PageNumber>1</q1:PageNumber>
                    <q1:Count>1</q1:Count>
                </q1:PageInfo>
            </query>
        </RetrieveMultiple>
    </soap:Body>
</soap:Envelope> 
```

但是我得到的回复仍然包含以下内容：

```
TotalRecordCount="-1" TotalRecordCountLimitExceeded="0" 
```

知道我做错了什么/在这里失踪了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T14:44:59.547

您在查询中得到任何结果吗？例如，您是否收到联系记录？

我很确定我过去在使用这种方法时遇到过问题（使用分页信息进行计数）。

在任何情况下，使用聚合函数执行 FetchXml 查询可能会更好（我假设您从 JavaScript 执行此 Soap）。

Jamie Miley 有一个很好的例子来说明如何做到这一点：http: [//mileyja.blogspot.co.uk/2011/06/aggregation-count-max-min-etc-and.html](http://mileyja.blogspot.co.uk/2011/06/aggregation-count-max-min-etc-and.html)

这里有一个非常好的 FetchXml 设计师：http: [//www.stunnware.com/](http://www.stunnware.com/)

# iphone - CALayer 上的 CGPath

> ID：11772810
> 
> 赞同：2
> 
> 时间：2012-08-02T07:22:59.743
> 
> 标签：iphone, ios, xcode, ipad, ipod

我想在 CALayer 上绘制 CGPath，但是当我在 CALayer 中渲染 CGPath 时，它总是在主 UIView 中绘制。告诉我如何在 CALayer 上绘制 CGPath。

当我尝试在 CALayer 上绘制路径时，它给了我这样的信息：

**图片：** [http ://www.freeimagehosting.net/h1k7e](http://www.freeimagehosting.net/h1k7e)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T09:30:19.550

使用 CAShapeLayer 及其“路径”属性将 CGPath 绘制到 CALayer。

[https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CAShapeLayer_class/Reference/Reference.html#//apple_ref/occ/instp/CAShapeLayer/path](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CAShapeLayer_class/Reference/Reference.html#//apple_ref/occ/instp/CAShapeLayer/path)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T07:27:53.207

看看这个网站。[http://www.ifans.com/forums/threads/tutorial-drawing-to-the-screen.132024/](http://www.ifans.com/forums/threads/tutorial-drawing-to-the-screen.132024/)

# c# - 缓存类型化数据的最佳方法是什么？

> ID：11772812
> 
> 赞同：5
> 
> 时间：2012-08-02T07:23:08.333
> 
> 标签：c#, caching, settings, asp.net-mvc-4, type-conversion

看，我正在开发一个网站作为 MVC4 项目。该站点经常以非常简单的方式查询其数据库的各种设置：

```
private static T GetSetting<T>(string parameterName)
{
    return (T)Convert.ChangeType(/* bla bla SQL query code */, typeof(T));
} 
```

合乎逻辑的问题是——到底是什么，你每次想要获得任何设置时都在查询数据库吗？如果您在某些`for`周期或东西中需要它怎么办？

[所以](http://stackoverflow.com)我想出了缓存解决方案，我需要知道我是否尽我所能。你怎么看？

```
internal static void ClearCache()
{
    foreach (IDictionary cache in _caches)
        cache.Clear();
}
private static readonly HashSet<IDictionary> _caches = new HashSet<IDictionary>();
private static class TypedCache<T>
{
    private static readonly Dictionary<string, T> _cache = new Dictionary<string, T>();
    internal static Dictionary<string, T> Cache { get { return _cache; } }
}

private static T GetSetting<T>(string parameterName)
{
    T value;

    if (!TypedCache<T>.Cache.TryGetValue(parameterName, out value))
    {
        _caches.Add(TypedCache<T>.Cache);
        TypedCache<T>.Cache[parameterName] = value =
            (T)Convert.ChangeType(/* bla bla SQL query code */, typeof(T));
    }

    return value;
} 
```

我听说 IIS 可以在内存中创建多个我的 DLL 副本（通过使用多个 IIS 进程）。顺便说一句，我怎么能强迫他只使用一个？正因为如此，我的想法可能会落入地狱。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T08:08:24.673

为什么不[`System.Web.Caching`](http://msdn.microsoft.com/en-us/library/system.web.caching.aspx)按照这个[答案](https://stackoverflow.com/a/349111/659190)中描述的方式使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T08:03:25.113

你应该只`Convert`在你想*改变*一个值的类型时使用，例如。将字符串转换为数字，反之亦然。在您的情况下，这些值已经具有正确的类型（我假设），因此您只需要*cast*。

您不需要每种类型的单独字典，这不会给您带来任何好处。只需使用一个`Dictionary<string, object>`, 并将（不是`Convert`）转换为 T in `GetSetting<T>`。

# sql - 查询优化

> ID：11772813
> 
> 赞同：1
> 
> 时间：2012-08-02T07:23:16.987
> 
> 标签：sql, ms-access, sql-optimization

我在 Microsoft Access 中有一个查询，需要大约 6 秒才能返回 1000 条记录。

```
SELECT DISTINCTROW tb_bauteile.*
FROM   tb_bauteile
       LEFT JOIN FehlerCodes_akt_Liste
         ON tb_bauteile.CDT = FehlerCodes_akt_Liste.CDT
WHERE  (( ( FehlerCodes_akt_Liste.Steuergerät ) = 'MEDC17' ))
ORDER  BY FehlerCodes_akt_Liste.Fehlerpfad; 
```

我将索引放在必要的字段上。 **tb_bauteile**有 ca 3000 条记录，**FehlerCodes_akt_Liste**有 ca 20000 条记录。如果我删除**Where**和**order** Clause，查询会非常快地返回记录。如何优化我的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:55:53.147

你有 ...

```
tb_bauteile LEFT JOIN FehlerCodes_akt_Liste 
```

但是这个`WHERE`条款...

```
FehlerCodes_akt_Liste.Steuergerät = 'MEDC17' 
```

该约束`LEFT JOIN`没有实际意义......您的结果集将仅包含您在`tb_bauteile.CDT`和之间匹配的行`FehlerCodes_akt_Liste.CDT`。您也可以切换到`INNER JOIN`应该更快的。

这里还有一些其他问题需要检查。

1.  如果删除，您是否注意到任何性能影响`DISTINCTROW`？
2.  `CDT`所以你在,`Steuergerät`和上有索引`Fehlerpfad`。您是否还执行了紧凑操作（更新统计信息）？
3.  检查为您的查询创建的查询计划。解释起来可能很有挑战性，但也许它会带来一些有用的东西。 [使用 Microsoft Jet 的 ShowPlan 编写更高效的查询](http://www.techrepublic.com/article/use-microsoft-jets-showplan-to-write-more-efficient-queries/5064388)

# android - Android 进度对话框强制显示

> ID：11772815
> 
> 赞同：1
> 
> 时间：2012-08-02T07:23:24.503
> 
> 标签：android, android-asynctask, progressdialog

我有这行代码：

```
1)    m_ProgressDialog = ProgressDialog.show(m_Context, "", m_Context.getString(R.string.dictionary_loading));
2)   //important code stuff: interact with db, change some textview values (= 2-3 seconds if i'm unlucky)
3)   m_ProgressDialog.dismiss(); 
```

但是发生的情况是阶段 2) 发生在 1) 之前。这是错误的。第一个 UI 冻结然后出现对话框..

阶段 2) 是一些与 DB 交互的代码，可能还会更改一些 textViews..但由于这可能需要一段时间，我决定显示进度对话框，以便用户知道正在发生真正重要的事情。我不能对这些操作使用异步，因为 UI 代码和数据库代码被混淆了，它只会让我的生活复杂化

我如何强制对话框根据请求显示？？..对我来说，它显示的代码只是将它添加到“当我有一些空闲时间而我现在没有时间时”堆栈中的待办事项列表中......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:28:40.960

你正在 ui 线程上做你的工作。您应该为此使用单独的线程来保持 UI（进度条）响应。看看[AsynchTask](http://developer.android.com/reference/android/os/AsyncTask.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:37:14.313

不要将 UiThread 用于后台操作，这会导致屏幕冻结。您必须使用单独的线程，如 Asyc Task。

像下面这样

在

```
onCreate()
{
dialog.show();
new DownloadFilesTask().excute()
}
class DownloadFilesTask extends AsyncTask<Void,Void,Void>
{
 protected Long doInBackground(URL... urls) {
        //Background operation
         }
         return null;
     }

     protected void onProgressUpdate(Integer... progress) {

     }

     protected void onPostExecute(Long result) {
      runOnUiThread(new Runnable() {

                @Override
                public void run() {
                    // TODO Auto-generated method stub
                    //Update you Ui here
dialog.dismiss();
                }
            });
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-06T09:37:14.640

在大多数情况下，如果您只想拥有 2 个方法，ShowLoading() 和 HideLoading() 只需使用它

```
public static void ShowLoading()
{
   HideLoading();

   myLoadingThread = new Thread(new ThreadStart(LoadingThread));
   myLoadingThread.Start();
}

private static void LoadingThread()
{
   Looper.Prepare();

   myProgressDialog = new ProgressDialog(myActivity, 
      Resource.Style.AppTheme_Dialog);

   myProgressDialog.SetMessage("Loading..."); // Or a @string...

   myProgressDialog.SetIcon(Resource.Drawable.your_loading_icon);

   myProgressDialog.SetProgressStyle(ProgressDialogStyle.Spinner);
   myProgressDialog.SetCancelable(false);
   myProgressDialog.Show();

   Looper.Loop();
}

public static void HideLoading()
{
   if (myProgressDialog != null)
   {
      myProgressDialog.Dismiss();
      myProgressDialog = null;
   }

   if (myLoadingThread != null)
      myLoadingThread.Abort();
} 
```

现在我声明并解释我在代码示例中使用的以下变量，其中一个是全局变量，是的，如果你不喜欢使用全局变量，或者你想一次有 2 个加载对话框（wtf ... ) 寻找另一种解决方案。这只是最简单的方法，最友好且没有奇怪的代码，其中包含嵌套方法、新类和到处继承这样一个简单的事情：

```
private Thread myLoadingThread;
private ProgressDialog myProgressDialog;

// Some people will hate me for this, but just remember
// to call myActivity = this; on each OnStart() of your app
// and end with all your headaches 
public Activity myActivity; 
```

# javascript - 标题中的wordpress自定义js

> ID：11772816
> 
> 赞同：0
> 
> 时间：2012-08-02T07:23:36.360
> 
> 标签：javascript, wordpress

我需要将这段特定的 JS 代码添加到 Wordpress 支持的网站区域。

```
 <script type="text/javascript">
    var myDate = new Date();
    var myStamp = ""+myDate.getDate()+myDate.getMonth()+myDate.getFullYear()+myDate.getHours()+myDate.getMinutes();
    document.write('<script type="text/javascript" src="https://ajaxgeo.cartrawler.com/cartrawlerabe/abe/js/abeSVNInfo.js?' + myStamp + '"><\/script>');
    </script>
    <script type="text/javascript">
    document.write('<script type="text/javascript" src="https://ajaxgeo.cartrawler.com/cartrawlerabe/abe/js/ct_abe.js?'+CARTRAWLER.SVNInfo.revision+'"><\/script>');
    </script>
    <script type="text/javascript">
    //<![CDATA[
    var theForm = document.forms['form'];
    if (!theForm) {
        theForm = document.form;
    }
    function __doPostBack(eventTarget, eventArgument) {
        if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
            theForm.__EVENTTARGET.value = eventTarget;
            theForm.__EVENTARGUMENT.value = eventArgument;
            theForm.submit();
        }
    }
    //]]>
    </script> 
```

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:09:25.923

In this situation I would say using the WordPress wp_enqueue_script function works best.

Start by putting the JavaScript into a seperate document (ie. cartrawler.js). Put this JavaScript document in your theme (preferably in a /js folder). After that you will tell your theme to use the JavaScript from that folder. The benefit of this method is that it is easier to control when and where the JavaScript should be loaded (like only in the header of the home paga) and it allows for better compatibility for caching with plugins like (Better) WP Minify.

This is how it works:

Make a seperate JavaScript document and store it within your theme folder (ie. theme/js/cartrawler.js):

```
var myDate = new Date();
var myStamp = ""+myDate.getDate()+myDate.getMonth()+myDate.getFullYear()+myDate.getHours()+myDate.getMinutes();
document.write('<script type="text/javascript" src="https://ajaxgeo.cartrawler.com/cartrawlerabe/abe/js/abeSVNInfo.js?' + myStamp + '"><\/script>');
document.write('<script type="text/javascript" src="https://ajaxgeo.cartrawler.com/cartrawlerabe/abe/js/ct_abe.js?'+CARTRAWLER.SVNInfo.revision+'"><\/script>');

var theForm = document.forms['form'];
if (!theForm) {
    theForm = document.form;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
} 
```

After you have made the JavaScript document you can add this to your function.php document:

```
// Enqueue JavaScripts
function theme_scripts() {
    wp_enqueue_script('cartrawler', get_template_directory_uri() . '/js/cartrawler.js', array(), '20120802', '1');
}
add_action('wp_enqueue_scripts', 'theme_scripts'); 
```

What we do when calling the JavaScript is the following: We give the JavaScript a name (cartrawler) and tell the function where the source can be found. Afterwards we define any dependencies, luckily we don't have any. After that we add a version number (20120802) and tell the function to load the JavaScript in the footer. It doesn't need to be in the header afterall (thumbsup @Lixus).

Read more about using the wp_enqueue_script function here: [http://codex.wordpress.org/Function_Reference/wp_enqueue_script](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)

Note: Make sure your header.php uses the wp_header() function and that your footer.php uses the wp_footer() function.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T07:25:32.100

你是说前端？

[`header.php`在使用的模板](http://codex.wordpress.org/Designing_Headers)中通常是正确的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T07:27:01.497

在 Wordpress 后端，转到外观 -> 编辑器，然后在右侧菜单 (footer.php) 中选择页脚模板。

然后在标签之前添加您的代码`</body>`。

编辑：我认为最好将此代码添加到页脚，因为它不会等待文档加载。

# c# - 如何在控件中打印值 - MVC3

> ID：11772819
> 
> 赞同：1
> 
> 时间：2012-08-02T07:23:56.413
> 
> 标签：c#, asp.net-mvc-3

我想打印存储在控制器对象中的值。我试图寻找答案，但我没有找到正确的答案。请帮忙

```
//my code in control  

 public ActionResult PrintOutput()
        {
                ModalClass myObject = new ModalClass              
                myObject.load(str);
                ViewBag.myOject = myOject.ToString();
                return View("PositionPrint");
        }

   //In view page I have created a **PartialView**. Inside partial view I
   // have given below code alone

         @Html.Raw(@ViewBag.myOject) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T07:33:33.563

您不能使用 object 作为变量名 - 它是语言的关键字。您的控制器通常通过返回一个填充了来自视图包或自定义模型的数据的视图来“打印出”值。如果您只需要打印原始 html 字符串 -`@Html.Raw(myObject)`

在你的控制器动作中，很难，你需要把值放在某个地方，以便视图可以访问它。例如：

```
public ActionResult PrintOutput(sting str)
{
   Modalclass myObject = new Modalclass(); 
   myObject.load(str);

   ViewBag.myObject = myObject; //probably at least ToString() call is due here
   return View();
} 
```

并在视图中用于`@Html.Raw(@ViewBag.myObject)`打印其中的内容。

PS 但是你真的不应该尝试打印出整个对象的内容。这是一个相当没有意义的行为。（调试除外）具体。对象中的每个数据属性都应打印到视图上的特定 ui 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:14:00.270

只要有可能，尽量避免像`ViewBag`和这样的动态魔术变量`ViewData`。这些魔法变量让你的代码变得丑陋。**始终尝试使用强类型**。

有`ViewModel`你的看法。例如：如果您想打印有关客户的详细信息。您可以像这样创建一个 ViewModel （它只是一个 POCO）

```
public class CustomerPrint
{
  public string FirstName { set;get;}
  public string JobTitle { set;get;}
} 
```

现在在您的 Controller 操作中，设置 this 的值并将其传递给您的视图。

```
public ActionResult PrintOutput()
{ 
  var customerPrintVM=new CustomerPrint();
  customerPrintVM.FirstName="Jon";
  customerPrintVM.JobTitle="Developer";
  return View(customerPrintVM);
} 
```

由于我们传递的是 CustomerPrint 类的对象，我们的视图应该是强类型的。所以像这样改变你的观点。

```
@model CustomerPrint

<h2>This is your view content</h2>
<p>@Model.FirstName</p>
<p>@Model.JobTitle</p>
@Html.Raw(Model.FirstName) 
```

如果您的 ViewModel 类驻留在命名空间中，您可能需要像这样在第一个类中提供该类的完整路径

```
@model YourNameSpaceName.CustomerPrint 
```

您可以以这种格式`Model.PropertyName`（例如：）访问模型的属性，在剃刀中，如果表达式尚未在代码块`Model.FirstName`中，则需要使用。`@`

# django - Django：如果我想在应用程序中处理文件流，如何包装它

> ID：11772821
> 
> 赞同：1
> 
> 时间：2012-08-02T07:24:00.993
> 
> 标签：django, file, stream

看起来文件流首先保存在网络服务器中，然后返回到应用程序。我想直接将文件流返回给app，所以可以跳过保存到webserver的步骤，仍然可以使用request.FILES的相同格式来获取流，然后进行处理。如何包装文件流？

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-02T13:59:38.553

虽然 Web 服务器确实公开了 API，您可以使用这些 API 访问接收请求的进度，但无法为部分接收的请求返回响应——在请求完全传输之前，您的应用程序不会收到请求。

此外，您永远不会希望应用程序本身负责处理上传。这意味着您昂贵的 80MB 线程将在客户端发送具有大主体的请求期间被锁定，这将使创建足够的请求以锁定所有线程以处理文件上传并导致拒绝服务攻击。

我不确定您处理文件上传的 Web 服务器有什么问题，但您应该注意，在所有情况下，这些上传都存储在临时位置。请让 Web 服务器做它最擅长的事情。

# android - 为了 Android 的 ORM 而在 android 中创建自己的注解

> ID：11772823
> 
> 赞同：1
> 
> 时间：2012-08-02T07:24:10.823
> 
> 标签：android, orm, annotations

如果你们中的某些人使用过 Hibernate，我想`ORM(Object Relational Mapping)`为 android 创建一个 mini，它也是一个 ORM，但不适用于移动设备，您可以在其中使用注释创建类到表的映射。我想在android中创建我的注释，而不是通过反射读取该类并创建表。

在标准 java 中，我能够创建我的注释并使用它。但是对于 android，我找不到任何方法在 android[这个](http://androidannotations.org/)项目中使用自定义注释创建注释，但我找不到如何。

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD) 
```

以上这些`Meta-Annotations`在标准 java 中可用，但在有助于创建注释的 android 中不可用

请有任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:42:39.350

是什么让您认为这些注解在 Android 中不可用？ [ORMLite](http://ormlite.com/)是一个适用于 Android 的 Java ORM，它可以毫无问题地使用注解：

```
@Target(value = FIELD)
@Retention(value = RUNTIME)
public @interface DatabaseField {
    ...
} 
```

我也在`METHOD`其他地方使用保留。这是[@DatabaseField 的源代码，](http://ormlite.svn.sourceforge.net/viewvc/ormlite/ormlite-core/trunk/src/main/java/com/j256/ormlite/field/DatabaseField.java?view=markup)它在我尝试过的所有Android 版本（1.6 到3.0）下都能正常编译。

关于使用 Android 的注释，要记住的一件事是它们的性能很糟糕。看：

> [为什么Android下的注解会出现这样的性能问题（慢）？](https://stackoverflow.com/questions/7417426/why-are-annotations-under-android-such-a-performance-issue-slow)

# java - 为什么似乎绕过了 OSGi 类加载？

> ID：11772825
> 
> 赞同：2
> 
> 时间：2012-08-02T07:24:18.807
> 
> 标签：java, osgi, classloader

我目前正在努力为我们的 OSGi 捆绑包提供一些对 OSGi 非常不友好的 3rd-party 库。其中一个库（我已经使用 bnd 将其变成了一个包）设法加载它不应该加载的类（至少通过 OSGi 规则）。让我们假设 bundle 被调用`Foo`，并且它加载类的包被调用`bar`。

`Foo`有`bar`作为可选导入。不过这应该没关系，因为没有可以导出的捆绑包`bar`。我没有使用任何引导委托。`jar`包含的-file`bar`位于应用程序类路径上（OSGi 框架嵌入在我的应用程序中运行）。

显然`Foo`以某种方式绕过了 OSGi 类加载基础设施。如何才能做到这一点？我很确定它不使用自定义类加载器，因为它没有理由拥有一个（没有功能`Foo`提供需要这样的东西）。那么，bundle 可以使用哪些标准的、开箱即用的方法来绕过 OSGi 类加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T09:20:38.120

如果类在应用程序类加载器上可用，这将起到作用：

```
BundleContext.class.getClassLoader().loadClass("bar.X") 
```

如果您可以通过加载器加载任何类，则可以获取所有其他类。当然，如果您要运行安全性，您可以禁止访问类加载器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T07:54:23.480

您使用的是什么 OSGi 框架？您是否有命令提示符命令或其他方式来请求有关包的详细信息？OSGi 规范允许您进行详细调查，并且大多数框架为 OSGi PackageAdmin 和其他 API 提供了匹配的命令/接口。

其他 OSGi 框架也会发生这种情况吗？

如果您使用[ProSyst 的 mBedded Server](http://www.prosyst.com/index.php/de/html/content/97/Products-OSGi-Implementation/)作为 OSGi 框架，您可以使用命令发现谁在从哪里加载什么

> `pkginfo [<package>[ <package>]]`- 显示指定包的依赖关系。如果没有参数，您将收到有关框架中所有可用包的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T09:38:55.597

以下是猜测，因为没有足够的信息来给出明确的答案。该库可能正在使用线程上下文类加载器 (TCCL)。如果`bar`包对您自己的捆绑包可见（即，如果它是捆绑包中的私有包）并且您调用`Foo`捆绑包，则可能已将 TCCL 设置为允许`bar`从捆绑包中加载该包。

要测试这个理论，请尝试更改您的代码以`null`在调用`Foo`包之前显式设置 TCCL：然后它会抛出一个`ClassNotFoundException`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T07:40:48.167

好吧，以下是我没有证据的假设。

实现非 OSGi*可选导入*的最简单方法是使用`Class.forName(name)`- 请注意没有 classLoader 的签名。让我们看一下源代码：

```
return forName0(className, true, ClassLoader.getCallerClassLoader()); 
```

反过来，让我们看看`ClassLoader.getCallerClassLoader()`：

```
...
Class caller = Reflection.getCallerClass(3);
... 
```

3 - 是要调用的帧数（例如`getCallerClass(0)`- 将返回反射类）。您可以轻松计算堆栈中#3 的代码，如果 OSGi 未加载它，它将使用默认的 classLoader。

# android - android中的两个列表视图

> ID：11772827
> 
> 赞同：0
> 
> 时间：2012-08-02T07:24:33.823
> 
> 标签：android, listview, android-layout

我是android开发的新手。我在一个 xml 文件中有两个列表视图。我在相对布局下放置了两个列表视图，并将滚动视图应用于整个相对布局。但这里的问题是，当我尝试滚动列表视图时，我的整个页面都会滚动。有什么建议可以解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:29:33.830

在 android 中使用`ListView`within将`ScrollView`无法正常工作。如果您想拥有多个`ListView`可能是您可以尝试 Jeff Sahrkey 适配器 -

[http://jsharkey.org/blog/2008/08/18/separating-lists-with-headers-in-android-09/](http://jsharkey.org/blog/2008/08/18/separating-lists-with-headers-in-android-09/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:42:25.363

```
 //Work in xml file    
<LinearLayout android:layout_weight="1" 
                android:layout_height="fill_parent" 
                android:layout_width="fill_parent">

            <ListView   android:id="@+id/list1" 
                        android:layout_height="fill_parent" 
                        android:layout_width="fill_parent">

            </ListView>
</LinearLayout> 
```

```
 <ListView   android:id="@+id/list2" 
                    android:layout_height="fill_parent" 
                    android:layout_width="fill_parent">

        </ListView> 
```

```
// Now work in java file
 public class yourActivity extends Activity {
 private ListView listv1 = null;
 private ListView listv2 = null;
 private String string1[] = {"apple","card", "man"};
 private String string2[] = {"ball", "soccer", "tiger"};

 @Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

setContentView(R.layout.main);

    //your listview
listv1 = (ListView) findViewById (R.id.list1);
listv2 = (ListView) findViewById (R.id.list2);

listv1.setAdapter(new ArrayAdapter<String> (this, android.R.layout.simple_list_item_1, string1));
listv2.setAdapter(new ArrayAdapter<String> (this, android.R.layout.simple_list_item_1, string2));

   } 

 } 
```

# windows-8 - Windows 8 Live Tiles 每分钟更新一次

> ID：11772835
> 
> 赞同：4
> 
> 时间：2012-08-02T07:25:13.843
> 
> 标签：windows-8, live-tile

是否可以每分钟更改动态磁贴图像？我查看了后台和推送服务，似乎仅限于 15 分钟...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T15:19:58.297

您可以随时在本地使用磁贴更新设置磁贴，并清除它等。这只会在您的应用程序运行时发生。

但是，您可以从后台工作人员调用该 API。

您需要的 API 是：http: [//msdn.microsoft.com/en-us/library/windows/apps/windows.ui.notifications.tileupdater.update.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.notifications.tileupdater.update.aspx)

推送通知可以随时发生，并且有*到期*时间，我认为默认值为 15 分钟。

邮件等应用每 15 分钟推送多个通知。

如需更深入地了解 Windows 8 应用商店应用中的后台工作人员模型，请参阅[此处](http://www.microsoft.com/en-us/download/details.aspx?id=27411 "后台任务白皮书")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T17:46:33.663

在 Google 上进行搜索后，我找到了这个链接[http://www.microsoft.com/en-us/download/details.aspx?id=27411](http://www.microsoft.com/en-us/download/details.aspx?id=27411)。

我希望你能在那里得到关于你的问题的答案或信息。

# android - NULL 指针异常 HTTP 连接

> ID：11772837
> 
> 赞同：0
> 
> 时间：2012-08-02T07:25:22.483
> 
> 标签：android, apache-commons-httpclient

`LoginAuthenticate`在执行以下代码时，我在关闭流的同时尝试块中的类中出现 NullPointerException 。

我正在使用 AsyncTask 并从`onClick`按钮上激活它。

在`onClick`我正在调用登录身份验证并在尝试块中获取异常。

```
public class DattabActivity extends Activity implements View.OnClickListener {
    /** Called when the activity is first created. */    
    private final static String SERVICE_URI = "http://182.50.154.23/Dattab.Device.Rest/ServiceClass/RestDeviceService.svc";

        @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.v("DEBUG", "DattabActivity");        
        setContentView(R.layout.login);
        Button loginbutton=(Button)findViewById(R.id.loginbtn);
        loginbutton.setOnClickListener(this);

        Intent available=new Intent();
        available.setClass(DattabActivity.this, Available_Surveys.class);         

    }

    public void onClick(View v) {
        switch(v.getId()){

        case R.id.loginbtn:
            // TODO Auto-generated method stub
            EditText userid = (EditText)findViewById(R.id.useredt);
            EditText passwd = (EditText)findViewById(R.id.pwdedt);

            Log.i("DEBUG", "DattabActivity Click Button ");

            userid.setText("surveyor1");
            passwd.setText("dev");
            if(userid.getText().toString()=="" ||passwd.getText().toString()==""){

                Toast.makeText(getApplicationContext(), "Please enter your account details", Toast.LENGTH_LONG).show();
            }
            else{
                    String params = SERVICE_URI + "/authenticateuser/"+userid.getText().toString()+"/"+passwd.getText().toString();
                    try {
                            LoginAuthenticate la = new LoginAuthenticate();
                            la.execute(params);
                            la.get();

                        JSONObject json = new JSONObject(new String(la.getStreamBuffer()));
                        Intent available=new Intent();
                        available.setClass(DattabActivity.this, Available_Surveys.class);
                        available.putExtra("userid", json.getString("SurveyorId"));
                        startActivity(available);
                        Toast.makeText(getApplicationContext(), json.getString("SurveyorId"),Toast.LENGTH_LONG).show();
                        Toast.makeText(getApplicationContext(), "Login Clicked", Toast.LENGTH_LONG).show();
                    } catch (JSONException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    catch(Exception e){
                        e.printStackTrace();
                    }

            }

            break ;
        }

    }
    private class LoginAuthenticate extends AsyncTask<String,Integer,char[]> {
        private char[] streamBuffer ;
        @Override
        protected char[] doInBackground(String... params) {
            android.os.Debug.waitForDebugger();

            String url=params[0];
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpGet request = new HttpGet(url);
            try {
                    request.setHeader("Accept", "application/json");
                    request.setHeader("Content-type", "application/json");
                    HttpResponse response = httpClient.execute(request);
                    HttpEntity responseEntity = response.getEntity();

                    // Read response data into buffer
                    char[] buffer = new char[(int)responseEntity.getContentLength()];
                    InputStream stream = responseEntity.getContent();
                    InputStreamReader reader = new InputStreamReader(stream);
                    reader.read(buffer);
                    stream.close();//here it goes in catch NULL Pointer
                    return buffer ;

            }catch(Exception e){
                e.printStackTrace();
                return null;
            }

        }
        protected void onPostExecute(char[] result){
            streamBuffer = result ;
        }

        public char[] getStreamBuffer(){
            return streamBuffer ;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:17:47.437

HTTP 返回空指针异常的原因有很多。您的互联网无法正常工作，您点击的 URL 不存在或不再存在。在您的 try catch 块中，您做错了导致异常的事情，并且您的 catch 块捕获每个异常总是返回空指针。

如果您在模拟器上进行测试，并且您确定 URL 是正确的并且代码中没有任何问题，您可以禁用/启用您的 Internet 连接，清理项目并重建，然后重新启动模拟器。有时它会修复模拟器中的 Internet 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:37:33.840

试试这个来处理空异常错误。

```
 try {
                request.setHeader("Accept", "application/json");
                request.setHeader("Content-type", "application/json");
                HttpResponse response = httpClient.execute(request);
                HttpEntity responseEntity = response.getEntity();

                // Read response data into buffer
                char[] buffer = new char[(int)responseEntity.getContentLength()];
                try{
                      InputStream stream = responseEntity.getContent();
                       InputStreamReader reader = new InputStreamReader(stream);
                        reader.read(buffer);
                 }
                 finally{
                       stream.close();//here it goes in catch NULL Pointer
                  }
                return buffer ;

        }catch(Exception e){
            e.printStackTrace();
            return null;
        } 
```

链接：[https ://stackoverflow.com/a/156889/1503155](https://stackoverflow.com/a/156889/1503155)

# scala - 拆分播放！2 应用成模块

> ID：11772838
> 
> 赞同：6
> 
> 时间：2012-08-02T07:25:26.260
> 
> 标签：scala, playframework

我正在学习玩！2 for Scala，来自 Django 背景。在 Django 中，我习惯于通过将项目划分为各种应用程序来模块化项目，每个应用程序都有自己的模型、视图、控制器和资产。玩！允许对项目进行类似的细分，还是必须将所有内容都放在`app`目录下？

**编辑**我已经得到了答案，但我会举一些使用 Django 应用程序的例子：

*   管理员是一个单独的应用程序
*   应用程序可用于定义国际化的抽象模型。需要国际化的实际模型可以从它们继承
*   我创建了一个应用程序，它定义了一个 Facebook 用户模型，管理 Facebook API，并向其他需要它的应用程序公开
*   存在一个 Django 应用程序以编程方式生成站点地图
*   另一个 Django 应用程序允许从存储在数据库中的规则创建 robots.txt，以便可以从管理界面编辑机器人规则

等等

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T08:04:35.517

也许[子项目](http://www.playframework.org/documentation/2.0.2/SBTSubProjects)是你需要的。如果您能描述一下为什么要模块化以及从您的角度来看模块应该包含哪些内容，将会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T13:14:35.883

只是线程上的一点更新。从 2.1 Play 开始支持子模块的路由映射：

[https://github.com/playframework/Play20/blob/master/documentation/manual/Highlights.md#allow-more-modularization-for-your-projects](https://github.com/playframework/Play20/blob/master/documentation/manual/Highlights.md#allow-more-modularization-for-your-projects)

# testing - VSTS Web 测试插件

> ID：11772844
> 
> 赞同：1
> 
> 时间：2012-08-02T07:25:50.587
> 
> 标签：testing, web, plugins

我记录了一个网络测试，其中包含用于收集页面上动态生成的随机数的提取规则。现在，如果我想从响应中获取随机生成的动态数字并将其存储在数据库/CSV 文件中。我该怎么做？

我也尝试过使用网络测试插件，但有点困惑。

# python - 错误 - urlopen 错误 [Errno 8] _ssl.c:504: EOF 发生违反协议

> ID：11772847
> 
> 赞同：22
> 
> 时间：2012-08-02T07:26:09.027
> 
> 标签：python, proxy, mechanize, urllib2

我的目标是在输入谷歌搜索词后从第一页的所有链接中提取 html。我在代理后面工作，所以这是我的方法。

1.我第一次用mechanize在表单中输入搜索词，我正确设置了代理和机器人。

2.提取链接后，我使用了一个全局使用 urllib2.ProxyHandler 的打开器，分别打开网址。

然而，这给了我这个错误。无法弄清楚。

```
urlopen error [Errno 8] _ssl.c:504: EOF occurred in violation of protocol 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-06-12T03:06:48.637

您可以通过覆盖 ssl_version 关键字参数在 ssl 模块中对 ssl.wrap_socket() 进行猴子补丁，而不是复制和编辑 Python 库模块。以下代码可以按原样使用。在发出任何请求之前，将其放在程序的开头。

```
import ssl
from functools import wraps
def sslwrap(func):
    @wraps(func)
    def bar(*args, **kw):
        kw['ssl_version'] = ssl.PROTOCOL_TLSv1
        return func(*args, **kw)
    return bar

ssl.wrap_socket = sslwrap(ssl.wrap_socket) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T07:43:23.707

它是一个已知的错误，但在此链接的评论中提到了一些解决方案。看到他们，可能对你有帮助，[bug url](https://bugs.launchpad.net/ubuntu/+source/openssl/+bug/965371)。

# r - 为什么 probit 在 MCMCpack 中工作，而不是 logit？

> ID：11772848
> 
> 赞同：1
> 
> 时间：2012-08-02T07:26:14.407
> 
> 标签：r, bayesian

我正在尝试将二进制结果“SECONDARY.LEVEL”建模[为该](http://dl.dropbox.com/u/1791181/MCMC.csv)数据集中其他三个变量的函数。我正在使用该`MCMCpack`包进行贝叶斯建模。有人可以解释为什么`MCMCprobit()`有效，但不是`MCMClogit()`吗？下面给出了代码和前几行输出。

```
#Read in data
df = read.csv("http://dl.dropbox.com/u/1791181/MCMC.csv") 
```

概率工作：

```
mcmc.probit = MCMCprobit(SECONDARY.LEVEL ~ AGE + SEX + as.factor(DISTRICT), mcmc=1000, data=df)
head(summary(mcmc.probit)$statistics, n=15)
                              Mean          SD     Naive SE Time-series SE
(Intercept)            0.150093347 0.109792702 0.0034719501   0.0059589451
AGE                   -0.035112684 0.005551112 0.0001755416   0.0003118349
SEXMale                0.207912526 0.026288448 0.0008313137   0.0011590922
as.factor(DISTRICT)2   0.004684505 0.068300292 0.0021598449   0.0028876137
as.factor(DISTRICT)3   0.147462569 0.077003268 0.0024350571   0.0036086218
as.factor(DISTRICT)4   0.056207898 0.070746208 0.0022371915   0.0030940116
as.factor(DISTRICT)5   0.262208868 0.074049641 0.0023416553   0.0035314500
as.factor(DISTRICT)6   0.167194019 0.076774267 0.0024278155   0.0037526433
as.factor(DISTRICT)7  -0.030666654 0.079221987 0.0025052192   0.0045243228
as.factor(DISTRICT)8   0.256155556 0.086851907 0.0027464985   0.0043024813
as.factor(DISTRICT)9   0.220563392 0.081925283 0.0025907049   0.0036374888
as.factor(DISTRICT)10  0.048681988 0.084193610 0.0026624357   0.0037311155
as.factor(DISTRICT)11  0.046235838 0.077788116 0.0024598762   0.0041413425
as.factor(DISTRICT)12  0.055248182 0.084691712 0.0026781871   0.0039077209
as.factor(DISTRICT)13  0.180067061 0.077430509 0.0024485677   0.0035813944 
```

但不是logit：

```
mcmc.logit = MCMClogit(SECONDARY.LEVEL ~ AGE + SEX + as.factor(DISTRICT), mcmc=1000, data=df)
head(summary(mcmc.logit)$statistics, n=15)
                             Mean SD Naive SE Time-series SE
(Intercept)            0.22304927  0        0              0
AGE                   -0.05566763  0        0              0
SEXMale                0.33312032  0        0              0
as.factor(DISTRICT)2   0.01497950  0        0              0
as.factor(DISTRICT)3   0.24880013  0        0              0
as.factor(DISTRICT)4   0.09670442  0        0              0
as.factor(DISTRICT)5   0.42470223  0        0              0
as.factor(DISTRICT)6   0.27617894  0        0              0
as.factor(DISTRICT)7  -0.03446564  0        0              0
as.factor(DISTRICT)8   0.41404924  0        0              0
as.factor(DISTRICT)9   0.35816907  0        0              0
as.factor(DISTRICT)10  0.08551302  0        0              0
as.factor(DISTRICT)11  0.07437629  0        0              0
as.factor(DISTRICT)12  0.09701028  0        0              0
as.factor(DISTRICT)13  0.29723229  0        0              0 
```

# android - Android 使用 SDK/NDK 修剪/分割/剪切视频

> ID：11772853
> 
> 赞同：0
> 
> 时间：2012-08-02T07:26:44.890
> 
> 标签：android, video, sdk, android-ndk, trim

我听说过 FFMPEG，但我无法理解如何将它集成到我的 android 代码中并使用 ffmpeg 的方法来修剪视频。

有谁知道android或NDK中的视频修剪库。提前致谢。

# mysql - 如何限制sql执行时间

> ID：11772854
> 
> 赞同：9
> 
> 时间：2012-08-02T07:26:47.553
> 
> 标签：mysql, sql

有些sql写得不好。有时，搜索会在应用程序中花费数小时。当应用程序（可能是网站）提交长时间运行的查询时，我必须重新启动 mysql。如何在数据库端限制 sql 查询的执行时间？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T07:33:31.613

要在长时间执行后自动终止 MySQL 中的查询：

1.  创建一个存储过程为：

    ```
    DECLARE CURSOR cur1 FOR SELECT ID 
                        FROM INFORMATION_SCHEMA.PROCESSLIST 
                        WHERE COMMAND = 'Query' AND TIME > 120; 
    ```

    然后在 curosr 的循环中执行：

    ```
    FETCH ID INTO @var_kill_id;
    KILL QUERY @var_kill_id; 
    ```

2.  在里面创建`EVENT FOR EVERY 5 SECONDS`和刚才`CALL`上面的过程。

注意： KILL QUERY 只是杀死查询并且 MySQL 连接没有中断。看[这里](http://dev.mysql.com/doc/refman/5.5/en/kill.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T07:50:32.967

此外，如果可能的话，您可以尝试支持“max_statement_time”的 Twitter mysql fork，并以毫秒为单位终止超出它的查询。

请参阅[http://engineering.twitter.com/2012/04/mysql-at-twitter.html](http://engineering.twitter.com/2012/04/mysql-at-twitter.html)和[https://github.com/twitter/mysql/wiki/Statement-Timeout](https://github.com/twitter/mysql/wiki/Statement-Timeout)

原始[来源](https://stackoverflow.com/a/10470447/207603)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T07:30:23.907

唯一的选择是打开另一个会话，使用[SHOW PROCESSLIST](http://dev.mysql.com/doc/refman/5.1/en/show-processlist.html)然后[KILL QUERY](http://dev.mysql.com/doc/refman/5.1/en/kill.html)你想终止的那个。

您可以使用*mysqladmin*命令行工具来发出这些命令。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T07:45:07.857

这可能不是限制 SQL 执行时间的确切解决方案，但我想它会有所帮助。您根本不需要重新启动 MySQL 服务器。

尝试使用一些 MySQL GUI 工具，如[SQLyog](http://www.webyog.com/en/downloads.php)。如果您认为它需要更长的时间，您可以手动停止执行的查询，（检查屏幕截图中的 X 按钮）。

此外，您还可以通过访问进程列表来终止查询进程检查屏幕截图中的其他两个图像以及终止进程的步骤...

![杀死进程截图](../Images/f228e01f75469a612fef5904f36b310c.png)

希望能帮助到你....

# dotnetnuke - dnn模块中的Jquery冲突

> ID：11772861
> 
> 赞同：0
> 
> 时间：2012-08-02T07:27:18.070
> 
> 标签：dotnetnuke

嗨，我正在研究 dotnetnuke 模块。我开发了一个模块。这个模块有不同的效果。我使用不同的中继器来实现不同的效果。如果我在一个页面中添加两个模块。Jscript 无法正常工作。我怎么解决这个问题 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:46:52.427

问题可能是您使用的javascript被添加了两次，每个模块实例一次。您应该从代码隐藏中使用 RegisterClientScriptBlock 和/或 RegisterClientScriptInclude 以便将 Javascript 添加到页面。通过使用它，它将防止脚本被添加两次。

# localhost - 无法连接到用 strophe 开火

> ID：11772865
> 
> 赞同：0
> 
> 时间：2012-08-02T07:27:46.403
> 
> 标签：localhost, openfire, strophe

我在使用 strophe 连接本地 openfire 服务器时遇到了一些问题。我使用这个代码，它总是给我状态连接。谁能告诉我问题出在哪里？

```
function XMPPconnect() {
    var conn = new Strophe.Connection("http://127.0.0.1:5222/http-bind");
    conn.connect("my_username", "my_password", connect);
}

function connect(status) {
    console.log(status);
    if (status === Strophe.Status.CONNECTED) {
        console.log("connected");
    }
} 
```

我什至尝试过使用不同的端口，但它对我不起作用。我正在使用新的 strophe 版本 1.0.2，并且是注册用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:35:15.343

我终于找到了问题所在，所以我把它贴在这里让大家记住它。问题是因为我没有在本地主机上设置 apache 服务器。为此，将这些行复制到 httpd.conf 文件的末尾

```
ProxyRequests Off
ProxyPass /http-bind http://localhost:7070/http-bind/
ProxyPassReverse /http-bind http://localhost:7070/http-bind/
ProxyPass /http-binds http://localhost:7443/http-bind/
ProxyPassReverse /http-binds http://localhost:7443/http-bind/ 
```

之后，您需要取消注释这两行

```
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_http_module modules/mod_proxy_http.so 
```

在这两个步骤之后，您应该能够使用

```
http://localhost/http-bind 
```

作为 BOSH_SERVICE。

# c# - 已声明具有相同签名的成员

> ID：11772871
> 
> 赞同：2
> 
> 时间：2012-08-02T07:28:01.073
> 
> 标签：c#, .net, asp.net-mvc-3

我知道这意味着什么，但想要优雅地解决这个问题。对于解决方案，我可以创建具有不同签名的方法，但这不会让我满意。我的情况如下：

```
public interface IDomainToViewMapper<TModel, TViewModel>
{
    TViewModel MapDomainToView(TModel source);
}

public interface ISiteMapper : IDomainToViewMapper<Site, ViewModelOne>,
                               IDomainToViewMapper<Site, ViewModelTwo>
{    } 
```

现在，当我编写我的主要实现类时，我得到了具有相同签名问题的成员。我可以继续明确地实现接口，但是因为我们正在动态注入依赖项，所以我不能转换为接口，这将再次模棱两可。

```
 public SiteMapper : ISiteMapper
{
    public ViewModelOne MapDomainToView(Site site) { ... }
    public ViewModelTwo MapDomainToView(Site site) { ... }      
} 
```

任何优雅的解决方案都会很棒

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T07:44:21.800

这是因为 c# 不允许您仅根据返回类型重载方法 - 在确定两个方法是否具有相同的签名时仅考虑方法参数。

唯一的解决方案是稍微调整您的 API 设计。

**编辑**：抱歉，当我重读您的问题时，我意识到您已经知道错误的原因，并且正在寻找如何重新设计您的 API。所以请忽略我的回答！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:39:32.047

考虑到本质上您有一种方法可以仅基于一个给定参数来决定哪个（多/两个）视图模型返回最优雅的解决方案，这将是定义一个返回 ViewModel 超类的方法（完全按照定义你的界面）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T07:51:36.630

如果我了解您的设计，您的SiteMapper 基本上是一个**工厂**，让您的 SiteMapper 方法 MapDomainToView**返回给定 Site 的 ViewModel 列表**，添加一个方法，您可以在其中为特定站点注册 ViewModel，例如将此映射存储在 Dictionary 中。

或者使用**Castle Windsor**或您最喜欢的 IoC 容器代替 SiteMapper 或可能在 SiteMapper 内部

例子：

```
public interface IViewModel
{
}

public class ViewModelOne : IViewModel
{
}

public class ViewModelTwo : IViewModel
{
}

public class SiteMapper 
{
    private Dictionary<Site, List<IViewModel>> map { get; set; }

    public void Register(Site site, IViewModel viewModel)
    {
        // Add combination to map
    }

    public List<IViewModel> MapDomainToViews(Site site) 
    {
        if (map.ContainsKey(site))
            return map[site];
        else
            ....
    }
} 
```

这是一个简单的 IoC，如果您走这条路线，请查看 Castle、Unity、NInject 等

# android - 条码扫描器 - Cordova 插件

> ID：11772877
> 
> 赞同：3
> 
> 时间：2012-08-02T07:28:44.387
> 
> 标签：android, eclipse, cordova, barcode-scanner

我在 Android 应用程序中使用了 PhoneGap 插件条码扫描器。当我将它们附加到按钮上的 onclick 事件时，这些功能`window.plugins.barcodeScanner.encode`和工作非常好。`window.plugins.barcodeScanner.scan`

但是，当我尝试对 body/page init/page show 事件的 onload 事件执行编码函数时，在 Eclipse 中出现以下错误

```
Uncaught TypeError: Cannot call method 'encode' of undefined at file:///android_asset/www/indexx.html:32 
```

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T10:50:12.580

你用的是哪个版本的phonegap？1.9.0 还是 2.0.0？

2.0.0 具有调用插件的新方法。在[1.9](https://github.com/phonegap/phonegap-plugins/tree/master/Android/BarcodeScanner/)上，您将使用：

```
window.plugins.barcodeScanner.scan( function(result) {
    ...
    ..
} 
```

如果您使用的是 2.0.0，请尝试另一种初始化插件的方式：

```
window.barcodeScanner = new BarcodeScanner();

function scanBarcode()
{
    window.barcodeScanner.scan(function(result) {
        alert("We got a barcode\n" +
              "Result: " + result.text + "\n" +
              "Format: " + result.format); 
    }, function(error) {
        alert("Error scanning Barcode: " + error);
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:32:22.057

尝试在 Cordova 完成加载后调用该方法（deviceready 事件）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T00:14:50.613

我是 Cordova 的新手，但根据我所见，@traumalles 听起来确实是正确的。要在 Cordova 完成加载后调用 window.plugins.barcodeScanner.encode 或 window.plugins.barcodeScanner.scan 函数，请在您的 javascript 文件中执行以下操作：

```
// Wait for Cordova to load
document.addEventListener("deviceready", onDeviceReady, false);

// Cordova is ready
function onDeviceReady() {
  // As an example, you now have the device name, Cordova version, etc. available
  alert('Device Name: ' + device.name);
  alert('Device Cordova: ' + device.cordova);
  alert('Device Platform: ' + device.platform);
  alert('Device UUID: ' + device.uuid);
  alert('Device Version: ' + device.version);

  // Now call one of your barcode functions, etc.
} 
```

有关详细信息，请参阅[http://docs.phonegap.com/en/2.0.0/cordova_device_device.md.html#Device](http://docs.phonegap.com/en/2.0.0/cordova_device_device.md.html#Device)。

# javascript - 如何在 Jquery 中使用 removeclass() 函数来禁用 CSS

> ID：11772879
> 
> 赞同：-2
> 
> 时间：2012-08-02T07:28:50.723
> 
> 标签：javascript, jquery, html, css

我想删除使用 Jquery 为这个 div 制作的样式（class="textinput"）。这个 textinput 类也被用于其他 div，意思是说我只想只读类的 textinput 功能。

让我们有两种情况：1）

```
<div class="textinput boxshadow readonly">
<input id="id_lastname" class="boxshadowinset yellowbackground" type="text" maxlength="255" value="Language" name="lastname" readonly="readonly" title="This field is read-only">
</div> 
```

2)

```
<div class="readonly">
<div class="textinput boxshadow">
<input id="id_lastname" class="boxshadowinset yellowbackground" type="text" maxlength="255" value="Language" name="lastname" readonly="readonly" title="This field is read-only">
</div> 
```

我试过这个：

```
$('div:readonly').removeclass('textinput'); 
```

它没有工作...

这两种情况的解决方案会有多大不同？

有关如何执行此操作的任何建议？需要一些指导来解决这个问题......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T07:29:43.723

类限定符 is`.`和 not `:`。正如@Cupidvogel 所写，它应该是`removeClass`.

```
$('div.readonly').removeClass('textinput'); 
```

### 编辑

随着处理嵌套案例的新要求：

```
$('div.readonly, div.readonly div.textinput').removeClass('textinput'); 
```

这将匹配具有类的只读 div和包含在具有类的 div 中的`textinput`任何具有类的 div 。`texinput``readonly`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T07:30:28.430

函数是`removeClass()`，不是`removeclass()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T07:30:37.713

尝试选择器`.`： $('div.readonly')

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T07:34:46.403

类限定符 is`.`和 not `:`。该功能也是removeClass而不是删除类..

```
$('div.readonly').removeClass('textinput'); 
```

# bash - 对字符串文字使用单引号是否比双引号更快？

> ID：11772881
> 
> 赞同：2
> 
> 时间：2012-08-02T07:28:56.090
> 
> 标签：bash

这不是关于微优化的问题。如果对字符串文字使用单引号比使用双引号更快（因为不会发生变量扩展），我只是感兴趣。

例子：

```
echo 'This is a string' # should a faster
echo "This is a string" 
```

我试图衡量这一点（使用大循环和时间），但无法得出真正的结论。

对此有什么想法吗？

**编辑**

我也很感兴趣为什么性能差异如此之小......有人会认为变量扩展需要某种类型的解析字符串，这应该会产生显着差异。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-02-26T17:59:53.353

我也对此很好奇，所以我在 Intel i7-8700 Hackintosh 上进行了一些测量。
结果如下：

## 单引号

```
for i in {1..1000000}
do
        echo 'abcdefghijklmnopqrstuvwxyz'
done

sh test.sh  7,40s user 0,80s system 97% cpu 8,403 total 
```

## 双引号

```
for i in {1..1000000}
do
        echo "abcdefghijklmnopqrstuvwxyz"
done

sh test.sh  9,96s user 0,87s system 97% cpu 11,050 total 
```

## 无引号（实际上与双引号相同）

```
for i in {1..1000000}
do
        echo abcdefghijklmnopqrstuvwxyz
done

sh test.sh  9,97s user 0,88s system 98% cpu 11,068 total 
```

## 带有变量连接的单引号

```
for i in {1..1000000}
do
        echo 'abc'$i'defghijklmnopqrstuvwxyz'
done

sh test.sh  9,53s user 0,91s system 97% cpu 10,707 total 
```

## 带有变量连接的双引号

```
for i in {1..1000000}
do
        echo "abc${i}defghijklmnopqrstuvwxyz"
done

sh test.sh  11,78s user 0,94s system 97% cpu 13,028 total 
```

所以是的，使用单引号或双引号会对性能产生影响。如前所述，这是因为 bash 在尝试扩展字符串中的变量时所做的解析。

至于为什么差别“这么小”，我也不是很确定，但是bash本身就是一个解释器，所以在使用单引号的时候还是会出现很多操作，我猜测试是在里面搜索一个“$”字符该字符串对所有其他操作旁边的性能没有太大影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T07:33:01.677

理论上是的（因为它不会寻找`$var`等的扩展）。

实际上，怀疑您是否会看到差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T07:35:37.743

我相信它应该（只是一点点）更快。做一个小实验 - 回显一个带有 10 000 $ 符号的字符串。在第一种情况下（双引号）你将不得不转义它们，而在第二种情况下你不需要。第一个字符串要长两倍，因此处理它会更慢。这是一个极端的例子，我怀疑你会在现实生活中的任何地方观察到差异。

编辑：响应您的编辑。我相信双 qoute 案例中的解析是使用确定的自动机进行的，因此再次是线性的。这只是猜测。你仍然可以想象变量解析是如何发生的——如果看到非转义的 $ 符号，那么你就有一个变量要遵循。

# java - 从 XML 文件填充 ExpandableListView - Android

> ID：11772887
> 
> 赞同：3
> 
> 时间：2012-08-02T07:29:23.377
> 
> 标签：java, android, xml, android-layout, expandablelistview

在我的 Android 应用程序中，我有一个包含[`ExpandableListView`](http://developer.android.com/reference/android/widget/ExpandableListView.html).

它将包含的项目应该从`XML`应用程序启动时向服务器查询的文件中提取（假设文件的大小不是问题）。

然后，用户应该能够通过从应用程序提供的功能`XML`中添加、删除、编辑项目来修改文件的内容。`ExpandableListView`最终，应用程序会将修改后的`XML`文件发送回服务器。

为了更好地理解这个模型应该解释我正在尝试实现的内容：

![在此处输入图像描述](../Images/973539e735b44d36dc34692e41fbcf03.png)

我想知道：

> `Java`在给定文件的情况下，如何在以红色突出显示的区域中动态填充`XML`？

**示例 XML 文件：**

```
<?xml version="1.0" encoding="utf-8"?>
<Category value="Animals">
    <entry>Cat</entry>
    <entry>Dog</entry>
    <entry>Elephant</entry>
</Category>
<Category value="Objects">
    <entry>Aeroplane</entry>
    <entry>Ball</entry>
    <entry>Closet</entry>
</Category> 
```

* * *

**添加调试部分**

我试图实现@Luksprog 在答案中提出的解决方案，但`java.lang.NullPointerException`在运行以下代码时面临一个问题：

*代码：*

```
//gets the View from the Layout file
myCustomExpandableListView = (ExpandableListView) findViewById( R.id.myCustomExpandableListView );
//creates the array list that will contain all labels
ArrayList<Category> labelsInTaxonomy = new ArrayList<Category>();
//fills it with a private method that parses the XML and fills the array list
this.loadTaxonomyFromXml( labelsInTaxonomy );
//creates the custom expandable list adapter
CustomExpandable labelTaxonomyAdapter = new CustomExpandable( this, labelsInTaxonomy );
//sets the adapter
myCustomExpandableListView.setAdapter( labelTaxonomyAdapter ); 
```

*错误：*

```
E/AndroidRuntime( 5972): FATAL EXCEPTION: main
E/AndroidRuntime( 5972): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.DVA_HLUI/com.DVA_HLUI.DVA_HLUIManageTaxonomyActivity}: java.lang.NullPointerException
E/AndroidRuntime( 5972):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1816)
E/AndroidRuntime( 5972):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1837)
E/AndroidRuntime( 5972):    at android.app.ActivityThread.access$1500(ActivityThread.java:132)
E/AndroidRuntime( 5972):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1033)
E/AndroidRuntime( 5972):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime( 5972):    at android.os.Looper.loop(Looper.java:143)
E/AndroidRuntime( 5972):    at android.app.ActivityThread.main(ActivityThread.java:4196)
E/AndroidRuntime( 5972):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 5972):    at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime( 5972):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
E/AndroidRuntime( 5972):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
E/AndroidRuntime( 5972):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime( 5972): Caused by: java.lang.NullPointerException
E/AndroidRuntime( 5972):    at com.DVA_HLUI.DVA_HLUIManageTaxonomyActivity.onCreate(DVA_HLUIManageTaxonomyActivity.java:80)
E/AndroidRuntime( 5972):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1093)
E/AndroidRuntime( 5972):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1780) 
```

注意

`com.DVA_HLUI.DVA_HLUIManageTaxonomyActivity.onCreate(DVA_HLUIManageTaxonomyActivity.java:80)`

对应这行代码

`myCustomExpandableListView.setAdapter( labelTaxonomyAdapter );`

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:13:52.263

我会做一个这样的自定义类：

```
class Category {

    private ArrayList<String> mEntries = new ArrayList<String>();
    private String mCaTegoryName;

    public void addEntry(String entry) {
        mEntries.add(entry);
    }

    public void setCategoryName(String categoryName) {
        mCaTegoryName = categoryName;
    }

    public ArrayList<String> getEntries() {
        return mEntries;
    }

    public String getCategoryName() {
        return mCaTegoryName;
    }
} 
```

作为数据结构并使用`ArrayList<Category>`将在自定义适配器中解析 xml 的结果：

```
class CustomExpandable extends BaseExpandableListAdapter {

    private ArrayList<Category> mItems;

    public CustomExpandable(Context context, ArrayList<Category> items) {
        mItems = items;
    }

    @Override
    public Object getChild(int groupPosition, int childPosition) {
        return mItems.get(groupPosition).getEntries().get(childPosition);
    }

    @Override
    public long getChildId(int groupPosition, int childPosition) {
        return 0;
    }

    @Override
    public View getChildView(int groupPosition, int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {
        // implement the child view row
        return null;
    }

    @Override
    public int getChildrenCount(int groupPosition) {
        return mItems.get(groupPosition).getEntries().size();
    }

    @Override
    public Object getGroup(int groupPosition) {
        return mItems.get(groupPosition).getCategoryName();
    }

    @Override
    public int getGroupCount() {
        return mItems.size();
    }

    @Override
    public long getGroupId(int groupPosition) {
        return 0;
    }

    @Override
    public View getGroupView(int groupPosition, boolean isExpanded,
            View convertView, ViewGroup parent) {
        // implement the group View
        return null;
    }

    @Override
    public boolean hasStableIds() {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public boolean isChildSelectable(int groupPosition, int childPosition) {
        // TODO Auto-generated method stub
        return true;
    }

} 
```

# plone - zope.schema 字段参考手册

> ID：11772888
> 
> 赞同：4
> 
> 时间：2012-08-02T07:29:28.790
> 
> 标签：plone, zope

对于 zope.schema 开箱即用的字段，是否有任何人类可读的文档？

而且因为可能没有任何内容涵盖整个 zope.schema，所以除了源代码之外，下一个最佳参考是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T08:19:36.897

该软件包包括使用 Sphinx 构建的完整文档；最新版本[在 docs.zope.org 在线发布](http://docs.zope.org/zope.schema/)。

此外，作为[Stephan Richter 的 Zope3 Book 的一部分，Zope3 Wiki 上发布了](http://wiki.zope.org/zope3/Zope3Book)[有关 zope.schema 的一章](http://wiki.zope.org/zope3/schema.html)。那一章的[PDF 呈现](http://wiki.zope.org/zope3/schema.pdf)可能更具可读性。

然后是 Philipp von Weitershausen 的*优秀*书籍[*Web Component development with Zope 3*](http://worldcookery.com/About.html)，其中也涵盖了 zope.schema。

# c# - 更好的方式来响应 HTML 窗口关闭事件

> ID：11772890
> 
> 赞同：1
> 
> 时间：2012-08-02T07:29:34.503
> 
> 标签：c#, javascript, silverlight-5.0

我的 Silverlight 有时需要打开一个新的浏览器窗口。这不是问题。

但是我在对关闭的打开窗口做出反应时遇到问题（我需要刷新数据）。现在，如果不是因为我打开的新页面可以（并且确实）执行回调，这不会成为问题。因此，`onbeforeunload`事件并没有那么有用，因为它不仅会在窗口关闭时触发，还会在页面执行回调时触发。

这是我目前得到的代码。

```
 private void OpenAnnotation()
    {
        var window = HtmlPage.Window.Navigate(new Uri(/*url goes here*/)),
            "_newWindow", "toolbar=0,menubar=0,resizable=1,scrollbars=1");
        SetWindowCallback(window, TimeSpan.FromSeconds(0.5)); //Delay needed, the OS needs at least some time to display the new window.
    }

    private void SetWindowCallback(HtmlWindow window, TimeSpan delay)
    {
        System.Threading.Tasks.Task.Factory.StartNew(() =>
        {
            System.Threading.Thread.Sleep(delay);
            UIDispatcher.Invoke(() =>
            {
                if (window != null && Helpers.HtmlWindow.WindowExists(window)) //WindowExists attemts to do Invoke("this") on the HtmlWindow; if it fails, it's likely the window doesn't exist
                {
                    window.Eval(@"this.attachEvent('onbeforeunload', 
function(){
    var slObject = window.opener.document.getElementById('SL');
    if (slObject != null)
        slObject.Content.AnnotationControl.UpdateAttachmentInfo(this);
});");
                }
            });
        });
    }

    [ScriptableMember]
    public void UpdateAttachmentInfo(HtmlWindow window)
    {
        SetBusyIndicator(true);
        System.Threading.Tasks.Task.Factory.StartNew(() =>
        {
            System.Threading.Thread.Sleep(TimeSpan.FromSeconds(2));
            LoadAnnotation();
            SetWindowCallback(window, TimeSpan.Zero);
        });
    } 
```

我真的“只是”想在窗口关闭时刷新我的数据，但似乎我仅限于 JS，而这反过来又会对提到的回调做出反应。

有没有更好的方法来做到这一点？

PS。我不能确定我正在打开的页面的代码！我只能使用我的 SL 应用程序。

# blob - 在我的 Web 应用程序上使用 blob

> ID：11772894
> 
> 赞同：0
> 
> 时间：2012-08-02T07:30:05.827
> 
> 标签：blob, azure-storage, azure-blob-storage

我正在阅读 Windows Azure 的 API，我有一个关于 blobl 存储服务的问题。例如，是否可以将我的 blob 存储帐户中的图像用于我的网站。我看到了如何通过浏览器访问 blob。这是这样的：

```
http://myaccount.blob.core.windows.net/mycontainer/myblob 
```

我没有测试它，所以我不知道它返回什么，但是我怎样才能使用这个 blob？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-04T16:56:44.080

容器类似于文件夹或目录，blob 类似于我们系统中的文件。如果指定“http://myaccount.blob.core.windows.net/mycontainer/myblob”，则类似于指定“drive:folder/file” “。因此，当您通过 url 访问 blob 时，您实际上是通过 http 获取 blob（文件）。

# android - 安卓xmpp聊天

> ID：11772896
> 
> 赞同：0
> 
> 时间：2012-08-02T07:30:16.277
> 
> 标签：android, xmpp, asmack

我需要在 Android 应用程序的应用程序聊天中做一些事情。我正在使用 aSmack 库，我可以让它工作得很好。这是我的问题，我需要能够切换到我的应用程序的其他部分，但仍然接收和存储新消息并获得通知。

做这个的最好方式是什么 ？

我已经查看了 Service 类，但并没有真正了解它是否是我需要的。

编辑：我也可以一次打开多个聊天，因此当我与某人交谈时，也必须保存来自其他人的消息。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-15T07:44:03.910

在服务上实现数据包侦听器并将消息存储在本地数据库中。将其存储在数据库中后发送广播消息。现在您可以在任何活动中接收它以显示在 UI 上。

# javascript - Javascript将数组创建到另一个数组中？

> ID：11772898
> 
> 赞同：0
> 
> 时间：2012-08-02T07:30:26.480
> 
> 标签：javascript

我试图在另一个数组中创建一个简单的数组。

对不起，因为我对此有点陌生，但我试图插入以下内容：

```
"m1":["username"] 
```

进入一个名为：

```
var mg = {} 
```

所以它看起来像这样，

```
var mg = {"m1":["username"]} 
```

我试图像这样插入它，

```
function insertPlayer(mid, user){
mg.push(mid = [user]);
}

insertPlayer("m1", "username") 
```

我正在使用推送功能，但它似乎完全忽略了我。

这就是我要的：

![在此处输入图像描述](../Images/a03eb823a183a90e81b0e96c96e4446f.png)

使用我正在使用的功能，我得到了这个：

![在此处输入图像描述](../Images/47dcdbfc5493ac644f3cd324c9ad2797.png)

如果我能以我想要的方式得到它，我可以通过轻松调用来轻松获取“m1”中的用户名列表`mg["m1"]`

我确信有一个简单的解决方法，但我就是找不到。我已经研究了大约 30 分钟，并决定在这里问。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:33:10.020

`mg`是一个对象，不是一个数组，它没有`.push`方法。

而不是`mg.push(mid = [user]);`，它应该是`mg[mid] = [user];`。

之后，`mg.mid`是一个数组，如果你想给它添加新用户，你可以使用`.push`,

```
mg[mid].push(user); 
```

所以函数如下所示：

```
// pass mg as a parameter is better than use it as a global in function
function insertPlayer(mg, mid, user){
  if (mg[mid]) {
     mg[mid].push(user);
  } else {
     mg[mid] = [user];
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:32:02.610

```
var mg = {'m1': []}; 
```

然后尝试`mg[mid].push(user);`代替`mg.push(mid = [user]);`

# objective-c - 在 UITableView Objective-C 中滚动更改数据

> ID：11772901
> 
> 赞同：1
> 
> 时间：2012-08-02T07:30:34.810
> 
> 标签：objective-c, ios, xcode, uitableview

我有一个 uitableView，在每一行我有 4 个按钮，所有按钮的名称都是“W”，

当我运行程序时：第一行的前 4 个按钮只有“W”

当我滚动我的表格时，我会得到更多的按钮名称“W”

有谁知道是什么问题？

提前致谢

我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithFrame:CGRectZero];
}
cell.selectionStyle = UITableViewCellSelectionStyleNone;

int column = 4;
for (int i=0; i<column; i++) {

    // position in the parent view and set the size of the button
    UIButton *myButton = [[UIButton alloc]initWithFrame:CGRectMake(0.5+83*i,10, 80,115)];
    myButton.tag=(column*indexPath.row)+i;
    [cell.contentView addSubview:myButton];
    [myButton addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
    myButton.backgroundColor = [UIColor whiteColor];

    UILabel *btnTitle = [[UILabel alloc] initWithFrame:CGRectMake(25, 10, 30, 10)];
    [btnTitle setText:@"W"];
    [btnTitle setTextColor:[UIColor blackColor]];
    [myButton addSubview:btnTitle];

           }
return cell;
} 
```

![在此处输入图像描述](../Images/f79961ee0836c1164740d75c0c4c8ce0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T07:59:36.283

阿比泽姆说。“单元格将有许多按钮......和 ​​btnTitles” 他是对的。

您的代码将在滚动表格视图时调用“内存不足”和“慢速”。

创建一个 CustomTableViewCell 类。

* * *

```
@interface CustomTableViewCell : UITableViewCell
{
    NSArray *_buttons;
}
@property (nonatomic, strong) IBOutlet UIButton *button1, button2, button3, button4;
@property (nonatomic, strong, readonly) NSArray *buttons;
@end 
```

* * *

```
@implementation CustomTableViewCell
...
@dynamic buttons;
- (NSArray*)buttons
{
   if (_buttons == nil) {
       _buttons = [NSArray arrayWithObjects:self.button1, self.button2, self.button3, self.button4, nil];
   }
   return _buttons; // I fixed it _button --> _buttons
}
@end 
```

* * *

*   创建一个空的 xib 文件。
*   拖放一个 UITableViewCell。
*   并在 UITableViewCell 上拖放 4 个 UIButton。
*   选择 UITableViewCell 自定义类并将其更改为 CustomTableViewCell。
*   将 button1、button2、button3、button4 链接到 xibs 项。

* * *

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

CustomTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = (CustomTableViewCell*)[[[NSBundle mainBundle] loadNibNamed:@"CustomTableViewCell" owner:self options:nil] objectAtIndex:0];
}
cell.selectionStyle = UITableViewCellSelectionStyleNone;
int column = 4;
for (int i=0; i<column; i++) {
    // position in the parent view and set the size of the button
    UIButton *myButton = [cell.buttons objectAtIndex:i];
    //myButton.frame = CGRectMake(0.5+83*i,10, 80,115); You can design on interface builder
    myButton.tag=(column*indexPath.row)+i;
    [cell.contentView addSubview:myButton];
    [myButton addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
    myButton.backgroundColor = [UIColor whiteColor];

    //myButton.textLabel.frame = CGRectMake(25, 10, 30, 10); You can design on interface builder
    [myButton.textLabel. setText:@"W"];
    [myButton.textLabel. setTextColor:[UIColor blackColor]];
 }
return cell;
} 
```

* * *

*   对不起。不是 "ni" --> "nil"
*   返回 _button --> 返回 _buttons

* * *

```
@interface CustomTableViewCell : UITableViewCell
{
    NSArray *_buttons;
}
@property (nonatomic, strong) IBOutlet UIButton *button1, button2, button3, button4;
@property (nonatomic, strong, readonly) NSArray *buttons; // <----- Check it.
@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T07:50:55.440

**我无法评论答案，因此我更改了这个答案，** boiljong 的解决方案是正确的。作为 booiljoung 的帖子，您可以轻松地在情节提要中使用它。首先，您应该在情节提要中自定义 UITableViewCell。UITableView 的第一行是一个 UITableViewCell（如果您在将 UITableView 添加到情节提要时没有删除它）。然后为其添加 4 个按钮并将其类设置为 CustomUITableViewCell。将按钮链接到您的 CustomUITableViewCell。最**重要的**是不要忘记将**Identifier**更改为您在代码 tableview dequeueReusableCellWithIdentifier 中使用的标识符。请看我上传的截图。并且您的代码中的错误是由拼写错误引起的 ni 应该是n **l**并且 _button 应该是**_buttons** ![故事板中的自定义 UITableViewCell](../Images/55f3517a30e24cf0c7a43ef3b13ce0d8.png)

**旧答案** 仅当单元格为零时才需要创建按钮，如果单元格不为零，则意味着 tableview 正在**重用**您使用按钮创建的“旧”单元格。当调用 dequeueReusableCellWithIdentifier 时，它总是尽可能**重用单元格。**例如，使用不在当前屏幕中的单元格。他们已经有 4 个名为“W”的按钮。因此，每次新进入的单元格在滚动时都会多出 4 个按钮。您可以将按钮创建代码移动到代码括号中 if ( cell == nil ) {...}

但是在滚动到新行时很难操作按钮的标题。最好用自己的 UITableViewCell 自定义。您可以从[http://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW18](http://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW18)找到参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T08:11:02.713

因为您已经从下面粘贴的代码中编写了 Button

`if (cell == nil) { cell = [[UITableViewCell alloc] initWithFrame:CGRectZero]; }`

您可以复制该行代码并将其粘贴到下面的代码行之后

`cell = [[UITableViewCell alloc] initWithFrame:CGRectZero];`

还有一个人认为您正在单独创建文本标签，即使您可以将按钮标题指定为

`[myButton setTitle:@"Somethig" forState:UIControlStateNormal];`

这样你也可以节省内存

# html - html 将 px 替换为空

> ID：11772906
> 
> 赞同：0
> 
> 时间：2012-08-02T07:31:18.350
> 
> 标签：html

我有一个表格列。我一直使用 px 作为宽度。

```
<td width="100px"></td> 
```

但是今天突然我的上司告诉我不要使用 px，因为没有它也会一样。

```
<td width="100"></td> 
```

这意味着它也是100px？我从来没有这样学过。我只知道我可以使用 px、em 或 % 但不能没有它。这是正确的方法吗？不同的浏览器会有不同的结果吗？100 = 100px 是真的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:11:43.667

在 HTML 4.01 中，属性[**宽度**](http://msdn.microsoft.com/en-us/library/ie/hh773371%28v=vs.85%29.aspx)可以定义如下：

```
 <element width="pixels | percentage% | relative*" ... > 
```

所以不需要在HTML 4.01`px`之后`width`或`height`根据HTML 4.01添加

在 CSS 中，您需要在设置`px`元素[**宽度**](http://msdn.microsoft.com/en-us/library/ie/ms531183%28v=vs.85%29.aspx)样式时添加，如下所示：

```
<td style="width:100px"></td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:34:33.423

添加`width`属性不是 css，而是老式的 HTML。

如果要更改单元格的样式，请使用 style 属性：

```
<td style="width:100px"></td> 
```

我建议使用外部样式表而不是内联添加样式。即使它们是机器生成的，您也可以避免一遍又一遍地重复内联样式，从而节省大量带宽。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T07:36:07.740

该`width`属性接受数字（解释为像素）或数字+% 符号（解释为百分比）。浏览器可能接受“px”后缀，但这不符合规范。

所以，你的上级是对的。

但是，如果您更喜欢为此使用 CSS，那么 px 是一个合适且必需的后缀：

```
<td style="width: 100px"></td> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T07:36:14.823

的 width 属性在[HTML 4.01](http://www.w3.org/TR/html401/struct/tables.html#h-11.2.6)`<td>`中已弃用。它曾经接受一个[长度](http://www.w3.org/TR/html401/sgml/dtd.html#Length)，它是一个以像素为单位的数字或某个百分比。

当前首选的方法是使用 CSS 指定宽度。在 CSS 中，您总是必须[指定一个单位](http://www.w3.org/TR/CSS2/syndata.html#value-def-length)（例如“px”），除非该值为 0。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T07:37:27.307

我最好建议不要使用**td**标签的 width 属性，因为它已在 HTML 4.01 中被弃用，未来的浏览器可能不支持它。改用 CSS。对于这个特定的问题，您可以使用您提到的两种表示法中的任何一种。

# jquery - 使用非常基本的 jquery 滑块时遇到困难...无法正确滑动图像

> ID：11772909
> 
> 赞同：0
> 
> 时间：2012-08-02T07:31:40.927
> 
> 标签：jquery, html, css, slideshow

我遇到的问题是它只快速显示 2-3 张图像，然后停止在图像中滑动，它只停在一张图片上。请帮我弄清楚下面的代码有什么问题：HTML

```
<script type="text/javascript">
jQuery("#slideshow > div:gt(0)").hide();

setInterval(function() {
  jQuery('#slideshow > div:first')
    .fadeOut(1000)
    .next()
    .fadeIn(1000)
    .end()
    .appendTo('#slideshow');
},  3000);
</script>
<LINK REL=StyleSheet HREF="slideshow.css" TYPE="text/css">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

<body>
<div id="slideshow" style="align:center;">

   <div>
     <img src="htc-touch-diamond-versus-iphone-3g.jpg" width="800px" height="400px">
   </div>

   <div>
     <img src="iphone_ipad.jpg" width="800px" height="400px">
   </div>

<div>
     <img src="iphone-3gs.jpg" width="800px" height="400px">
   </div>

<div>
     <img src="iphone3gs_3up.jpg" width="800px" height="400px">
   </div>

<div>
     <img src="iphone-4g-mockup-von-rino0815.jpg" width="800px" height="400px">
   </div>

<div>
     <img src="iphone-water1.jpg" width="800px" height="400px">
   </div>

<div>
     <img src="Mobiles-iPhone-Repair.jpg" width="800px" height="400px">
   </div>

<div>
     <img src="steve-jobs-holding-iphone.jpeg" width="800px" height="400px">
   </div>

<div>
     <img src="iphone-3g-preview.png" width="800px" height="400px">
   </div>

<div>
     <img src="iphone-sparks.png" width="800px" height="400px">
   </div>

</div>
</body> 
```

幻灯片.css

```
#slideshow { 
    margin: 50px auto; 
    position: relative; 
    width: 800px; 
    height: 400px; 
    padding: 10px; 
    box-shadow: 0 0 20px rgba(0,0,0,0.4); 
}

#slideshow > div { 
    position: absolute; 
    top: 10px; 
    left: 10px; 
    right: 10px; 
    bottom: 10px; 
} 
```

编辑1

我将我的 jquery 代码放在一个外部 js 文件中，我在我的 html 中像这样引用该文件

```
<LINK REL=StyleSheet HREF="slideshow.css" TYPE="text/css">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<SCRIPT LANGUAGE="JavaScript" src="slideshow.js">
</SCRIPT>

<div id="slideshow" style="align:center;">

   <div>
     <img src="htc-touch-diamond-versus-iphone-3g.jpg" width="800px" height="400px">
   </div> 
```

它仍然无法正常工作并现在显示此错误...

`("#slideshow > div:gt(0)").hide()`不存在

这是我的新 js 文件：-

$(文档).ready(函数(){

("#slideshow > div:gt(0)").hide();

setInterval(function() { jQuery('#slideshow > div:first') .fadeOut(1000) .next() .fadeIn(1000) .end() .appendTo('#slideshow'); }, 3000); });

它有时也会在 $ 上给出一个参考错误，说“$ 未定义”

编辑-2

@Zahid..我在这里粘贴了我所有的代码..这就是我所拥有的..这 3 个文件，即 hTML、css 和 js。

我哪里错了？哪些语句需要在什么之后？我一无所知。有人可以在这里帮助我吗？我会很感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:15:30.177

我解决了这个问题。它是与 js 文件。这是代码。

```
$(document).ready(function(){
  $("#slideshow > div:gt(0)").hide();
  setInterval(function() {
    $("#slideshow > div:first")
      .fadeOut(1000)
      .next()
      .fadeIn(1000)
      .end()
      .appendTo("#slideshow");
  },3000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:34:38.490

发生这种情况是因为您没有使用回调。每个语句都是异步执行的。将您的代码放在回调中

# c++ - HippoMocks 坚持要销毁 mock

> ID：11772911
> 
> 赞同：3
> 
> 时间：2012-08-02T07:31:51.770
> 
> 标签：c++, unit-testing, mocking, hippomocks

```
IEmployeeServiceProxy* empSvcMock = m_Mocks.InterfaceMock<IEmployeeServiceProxy>();
m_EmpSvcMock.reset(empSvcMock); // shared_ptr because my class Client ctor expects a shared_ptr<IEmployeeServiceProxy>

Client client(m_EmpSvcMock); 
```

如何防止 m_EmpSvcMock 在内部被 HippoMock 破坏？将模拟传递给 shared_ptr 时，两者都会破坏模拟。

编辑 - 答案：

```
m_Mocks.ExpectCallDestructor(m_EmpSvcMock.get());
m_EmpSvcMock.reset(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T07:37:41.983

使用这样的助手，它创建一个带有无操作删除器的 shared_ptr ：

```
template< class T >
void NoDelete( T* )
{
}

template< class T >
std::shared_ptr< T > make_shared_ref( T* t )
{
  return std::shared_ptr< T >( t, NoDelete< T > );
}

  //usage
m_EmpSvcMoc = make_shared_ref( empSvcMock ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T07:53:02.140

在 Git 版本（来自 Assembla）中，您可以告诉它注册要调用的析构函数。额外的好处是它会警告您在此之后使用 ZombieMockException 调用的函数，因此如果您确实在某处泄漏了一个指针并且它被使用了，您将知道一个可读的错误。

# php - 从 xml 中检索数据的函数

> ID：11772914
> 
> 赞同：0
> 
> 时间：2012-08-02T07:32:00.417
> 
> 标签：php, xml, xml-parsing

[（这与我无法使用 php 从 xml 文件中获取所有数据](https://stackoverflow.com/questions/10105565/i-cant-get-all-the-data-from-an-xml-file-with-php/10105718#10105718)有所不同）

目前我使用静态列表来检索一系列数据，例如

```
 $q1_result =  $tab->q1['listEntry'];
$q2_result =  $tab->q2['listEntry'];
$q3_result =  $tab->q3['listEntry'];
$q4_result =  $tab->q4['listEntry'];
$q5_result =  $tab->q5['listEntry'];
$q6_result =  $tab->q6['listEntry'];
$q7_result =  $tab->q7['listEntry'];
$q8_result =  $tab->q8['listEntry'];
$q9_result =  $tab->q9['listEntry'];
$q10_result =  $tab->q10['listEntry']; 
```

如何检索不同数量的（连续）实例，以便我不必不断添加到此列表或从中删除？（我需要遍历所有 $tab->q(integer)['listEntry'] 条目）

* * *

这是我从中获取数据的 xml 文件的示例，我可以获取数据，但不知道如何循环遍历我想要的那些（上面列表中的那些）：

```
magic5Out version="2.1.0">
<Report customerPK="Survey_30" locationPK="4439" userPK="1343895457" template="13642" formDate="2012-08-02T00:00:00" dateTimeStarted="2012-08-02T10:18:34" dateTimeMobileReleased="2012-08-02T10:20:03" currentStatus="5" reportGuid="b9f7681f-3468-402a-8dcc-60f0915b7d42">
<Results>
<Item itemPK="SurveyTab_200">
<q1 listEntry="No" listEntryId="239128"/>
<q1Comments text="latest test"/>
<q2 listEntry="No" listEntryId="239128"/>
<q2Comments text=""/>
<q3 listEntry="No" listEntryId="239128"/>
<q3Comments text=""/>
<q4 listEntry="No" listEntryId="239128"/>
<q4Comments text=""/>
<q5 listEntry="No" listEntryId="239128"/>
<q5Comments text=""/>
<q6 listEntry="No" listEntryId="239128"/>
<q6Comments text=""/>
<q7 listEntry="No" listEntryId="239128"/>
<q7Comments text=""/>
<q8 listEntry="No" listEntryId="239128"/>
<q8Comments text=""/>
<q9 listEntry="No" listEntryId="239128"/>
<q9Comments text=""/>
<q10 listEntry="No" listEntryId="239128"/>
<q10Comments text=""/>
<q11 listEntry="No" listEntryId="239128"/>
<q11Comments text=""/>
<q12 listEntry="No" listEntryId="239128"/>
<q12Comments text=""/>
<q13 listEntry="No" listEntryId="239128"/>
<q13Comments text=""/>
<q14 listEntry="No" listEntryId="239128"/>
<q14Comments text=""/>
<q15 listEntry="No" listEntryId="239128"/>
<q15Comments text=""/>
<q16 listEntry="No" listEntryId="239128"/>
<q16Comments text=""/>
<q17 listEntry="No" listEntryId="239128"/>
<q17Comments text=""/>
<photo/>
<sketch/>
<item_comments text=""/>
</Item>
<Item itemPK="SurveyTab_201">
<q1 listEntry="Yes" listEntryId="239127"/>
<q1Comments text="latest test 10:19"/>
<q2 listEntry="Yes" listEntryId="239127"/>
<q2Comments text=""/>
<q3 listEntry="Yes" listEntryId="239127"/>
<q3Comments text=""/>
<q4 listEntry="Yes" listEntryId="239127"/>
<q4Comments text=""/>
<q5 listEntry="Yes" listEntryId="239127"/>
<q5Comments text=""/>
<q6 listEntry="Yes" listEntryId="239127"/>
<q6Comments text=""/>
<q7 listEntry="Yes" listEntryId="239127"/>
<q7Comments text=""/>
<q8 listEntry="Yes" listEntryId="239127"/>
<q8Comments text=""/>
<q9 listEntry="Yes" listEntryId="239127"/>
<q9Comments text=""/>
<q10 listEntry="Yes" listEntryId="239127"/>
<q10Comments text=""/>
<q11 listEntry="Yes" listEntryId="239127"/>
<q11Comments text=""/>
<q12 listEntry="Yes" listEntryId="239127"/>
<q12Comments text=""/>
<q13 listEntry="Yes" listEntryId="239127"/>
<q13Comments text=""/>
<q14 listEntry="Yes" listEntryId="239127"/>
<q14Comments text=""/>
<q15 listEntry="Yes" listEntryId="239127"/>
<q15Comments text=""/>
<q16 listEntry="Yes" listEntryId="239127"/>
<q16Comments text=""/>
<q17 listEntry="Yes" listEntryId="239127"/>
<q17Comments text=""/>
<photo/>
<sketch/>
<item_comments text=""/>
</Item>
<surveyorComments0 text="10:19 test"/>
<surveyorName text="N"/>
<surveyorSig opFile="D:\Sites\WebApp_eden\Output\2100\XMLSurvey\Attachments\5b2fd203-77ed-4165-a72c-ba82736df2ab.png"/>
</Results>
</Report>
</magic5Out> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:59:43.680

使用 SimpleXML

下面是一个 XML 文件：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<note>
<to>Tove</to>
<from>Jani</from>
<heading>Reminder</heading>
<body>Don't forget me this weekend!</body>
</note> 
```

例子

```
<?php
$xml = simplexml_load_file("test.xml");

echo $xml->getName() . "<br />";

foreach($xml->children() as $child)
  {
  echo $child->getName() . ": " . $child . "<br />";
  }
?> 
```

上面代码的输出将是： note to: Tove from: Jani heading: Reminder body: 不要忘记我这个周末！

# html - QWebView 和本地 html 页面

> ID：11772916
> 
> 赞同：0
> 
> 时间：2012-08-02T07:32:04.813
> 
> 标签：html, qt, qwebview

再会。在 4.7.4 版中，在 QWebView 中加载我的本地页面运行良好，但在将 Qt 版本更新到 4.8.2 后，我的本地页面加载了，但什么也没发生。
我查看了 Qt 的示例源，看到新的 Qt 版本与本地页面一起工作并成功加载了这个页面，但是这个页面非常简单。
至于我，我有使用 jquery 脚本的页面，这可能是我的页面加载过程的麻烦吗？
我的本地页面的代码。

```
<html><head>
<title title="historypage" />
<link rel="Stylesheet" type="text/css" href="qrc:///main.css" />
<script type="text/javascript" src="qrc:///jquery.js"></script>
... more js function ...</head>
<body onresize="ResizeSignal();" onscroll="ResizeSignal(); OnscrollSignal();">
</body>
</html> 
```

Qt 加载页面代码。

```
page()->mainFrame()->load(QUrl("qrc:///my.html")); 
```

# sql-server - 在数据库表中拥有 35 个奇数列的最佳方法是什么？

> ID：11772921
> 
> 赞同：0
> 
> 时间：2012-08-02T07:32:13.953
> 
> 标签：sql-server, database-design, data-modeling

我有一个要求，我需要将 35 天的数据存储在 db 表中。数据仅用于计算，不用于任何检索（不用于选择查询 where 子句）。

将它们作为表格中的 35 列是设计表格的唯一方法吗？或者可以遵循任何其他有效的设计方法？

注意：此处使用 SQL Server，并且此表上有一个 FK。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:10:58.817

如果您只需要一次访问所有 35 个字段，并且您知道不需要额外的字段，那么具有 35 列的表可能是最好的设计。

或者，您可以尝试这样的事情：

![在此处输入图像描述](../Images/3b4f4bfee80bbf2cb31fb59d6d0b191f.png)

```
CHECK (DAY_NO >= 1 AND DAY_NO <= 35) 
```

对于 JOIN 的价格，这可能会给您更多的灵活性，以防您需要更改天数 - 您只需更改 CHECK。**此外，如果**您的大部分时间都是 NULL ，这可能会稍微节省空间。

# android - 如何获得与设备旋转无关的磁场矢量？

> ID：11772923
> 
> 赞同：11
> 
> 时间：2012-08-02T07:32:27.707
> 
> 标签：android, android-sensors

我想要归档的是一种位置的“磁性指纹”。我使用 MAGNETIC_FIELD 传感器，如果我得到（不幸的是没有进一步解释）X、Y 和 Z 轴的[3 个值](http://developer.android.com/guide/topics/sensors/sensors_position.html#sensors-pos-mag)。

问题是，当我旋转设备时值会发生变化，所以我猜 3 轴是相对于设备的。我需要的是补偿设备旋转，以便我得到相同的 3 个值，无论设备如何旋转。

我尝试与旋转矩阵相乘（我知道如何得到），尝试与倾斜矩阵相乘等等，但没有任何效果。无论我尝试什么，当我旋转设备时，值仍然会发生变化。

那么有谁知道如何正确地做到这一点？最好使用代码，因为我读了很多东西，比如“那么你将不得不使用旋转矩阵来补偿它”，但没有找到一个具体的工作示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-13T21:50:04.527

做这个

```
private static final int TEST_GRAV = Sensor.TYPE_ACCELEROMETER;
private static final int TEST_MAG = Sensor.TYPE_MAGNETIC_FIELD;
private final float alpha = (float) 0.8;
private float gravity[] = new float[3];
private float magnetic[] = new float[3];

public void onSensorChanged(SensorEvent event) {
    Sensor sensor = event.sensor;
    if (sensor.getType() == TEST_GRAV) {
            // Isolate the force of gravity with the low-pass filter.
              gravity[0] = alpha * gravity[0] + (1 - alpha) * event.values[0];
              gravity[1] = alpha * gravity[1] + (1 - alpha) * event.values[1];
              gravity[2] = alpha * gravity[2] + (1 - alpha) * event.values[2];
    } else if (sensor.getType() == TEST_MAG) {

            magnetic[0] = event.values[0];
            magnetic[1] = event.values[1];
            magnetic[2] = event.values[2];

            float[] R = new float[9];
            float[] I = new float[9];
            SensorManager.getRotationMatrix(R, I, gravity, magnetic);
            float [] A_D = event.values.clone();
            float [] A_W = new float[3];
            A_W[0] = R[0] * A_D[0] + R[1] * A_D[1] + R[2] * A_D[2];
            A_W[1] = R[3] * A_D[0] + R[4] * A_D[1] + R[5] * A_D[2];
            A_W[2] = R[6] * A_D[0] + R[7] * A_D[1] + R[8] * A_D[2];

            Log.d("Field","\nX :"+A_W[0]+"\nY :"+A_W[1]+"\nZ :"+A_W[2]);

        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-13T03:53:01.110

# ***解决方案 ：***

***可能性 1：***

MAGNETIC_FIELD 关于旋转非常不稳定，您无法仅通过一些数学来转换横向和纵向值，主要原因是硬件对不同的轴使用不同的捕捉器，然后当旋转发生时，您使用不同的硬件捕捉器，值将永远不会相同，在某些高端设备上它是相同的，但在大多数设备上不同。

如果您想在许多设备上依赖和兼容某些东西，您需要忘记计算带有旋转的 MAGNETIC_FIELD，而只需使用您的应用程序强制定向。[强制“纵向”定向模式](https://stackoverflow.com/questions/4885620/force-portrait-orientation-mode)

***可能性 2：***

你谈到`"magnetic fingerprint" of a location.`如果它只是关于在没有 GPS 的情况下识别一个位置，你还有很多其他信息可以使用。首先是“Wifi SSID”，然后是“Mobile Networks Cells”，还有“Connected Wifi”等。如果您对此感兴趣，我可以为您提供代码。

***可能性 3：***

如果您绝对需要为您的位置计算 MAGNETIC_FIELD，并且不想强制旋转……您可以同时捕获值横向和纵向，而不是计算它们。然后，当您比较时，只需比较两个值。

此外，如果您正在寻找有磁铁或高磁性位置的地方，您可以使用高容差百分比来检测是否存在磁铁，

***笔记 ：***

如果您坚持使用数学，请不要忘记几乎每台设备上的功能都会有所不同……请随时提供有关您问题的更多信息，我会很高兴调整我的答案；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-07T14:23:16.797

要获得磁场强度，您必须获得磁场的 x、y、z 值（来自 Sensor.TYPE_MAGNETIC_FIELD），并应用以下公式：

```
double magnetic_field_strength = Math.sqrt( (Xvalue*Xvalue) + (Yvalue*Yvalue) + (Zvalue*Zvalue) ); 
```

磁场强度以微特斯拉 (µT) 表示。
据[本网站](http://www.fas.harvard.edu/~scidemos/Geophysics/EarthsMagneticField/EarthsMagneticField.html)称，可以注意到地球的平均磁场强度为 50 µT 。

所以一个可能的代码是：

```
private SensorEventListener sensorEventListener = new SensorEventListener() {   
    @Override
    public void onSensorChanged(SensorEvent event) {

        switch (event.sensor.getType()) {
        case Sensor.TYPE_MAGNETIC_FIELD:                        
            magnetic_field_strength = Math.sqrt((event.values[0]*event.values[0])+(event.values[1]*event.values[1])+(event.values[2]*event.values[2]));
            break;                      
        default: 
            return;
        }                
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-02T08:28:43.907

给出了相对于手机的磁场矢量坐标，如下图所示：

![在此处输入图像描述](../Images/615ed163e1253c31db92a2d43f6788b8.png)

得到下图坐标系中的磁场矢量：

![在此处输入图像描述](../Images/406ed45bb298c02933a1d0b8208ab2bb.png)

您必须将磁矢量与从[getRotationMatrix()](http://developer.android.com/reference/android/hardware/SensorManager.html#getRotationMatrix%28float%5B%5D,%20float%5B%5D,%20float%5B%5D,%20float%5B%5D%29)中检索到`m`的旋转矩阵相乘。该矢量将穿过地球指向磁北极。`R``R * m`

如果你也将它与 inclination 相乘`I`，向量将围绕 X 轴旋转以完全在 Y 轴上：

> [0 m 0] = I * R * 地磁（m = 地磁场大小）

对于地球上的每个位置，该向量应该是恒定的。但是，您手机上的结果可能会略有偏差，因为您必须非常小心，不要在旋转设备时改变传感器的位置。

# jquery - 获取 url 路径并在 li 上添加活动类

> ID：11772924
> 
> 赞同：0
> 
> 时间：2012-08-02T07:32:28.480
> 
> 标签：jquery, url, path, href, addclass

我尝试获取 url 路径，然后在 li 示例上添加活动类：www.mysite.com/?p=xxxx

x 将根据用户点击的链接而变化

我试过这个：

```
<ul class="top_menu">
<li class="tider"><a href="/?p=1884">Åbningstider</a></li>
<li class="butikker"><a href="/?p=1885">Butikker</a></li>
<li class="sker"><a href="/?p=1886">Det sker</a></li>
<li class="nyhedsbrev"><a href="/?p=1887">Nyhedsbrev</a></li>
<li class="vej"><a href="/?p=1888">Find vej</a></li>
</ul>

var text = window.location.href.match(/http:\/\/www\.mysite\.com\/(.+)/)[1].replace(/_/g,' ');
$("#nav li").filter(function() {
  return $.text([this]) == text;
}).addClass("active"); 
```

但什么也没发生。我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T06:29:43.330

这行得通！

```
$(document).ready(function(){

    var full_path = location.href.split("#")[0];

    $(".top_menu li a").each(function(){

        var $this = $(this);

        if($this.prop("href").split("#")[0] == full_path) {

            $(this).parent().addClass("active");

        }

    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T07:57:51.313

您可以将[末端与](http://api.jquery.com/attribute-ends-with-selector/)属性选择器一起使用：

```
var pid = '1885'; //Get the current value of p
$('#nav li a[href$="'+pid+'"]').parent().addClass('active'); 
```

这将获得 href 属性结束的链接`pid`（在本例中为 1885）。

`p=1885`如果您有 2 个以相同字符串结尾的值（如和`p=11885`），这将导致问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T08:03:09.343

如何更改类名并使用 PHP 和 jQuery：

```
<?php

if(isset($_GET['p'])) {

    echo '<script type="text/javascript">
    $(document).ready(function(){';

    $from_url = $_GET['p'];

    echo '
    $(\'p_' . $from_url . '\').addClass(\'active\');
        });
    </script>';
    }

?> 
```

例如，在“www.mysite.com/?p=1888”上面将打印：

```
<script type="text/javascript">
$(document).ready(function(){
    $('.p_1888').addClass('active');
    });
</script> 
```

它将为类名为“p_1888”的 HTML 添加类“活动”。例如：

```
<li class="p_1888"><a href="/?p=1888">Find vej</a></li> 
```

也在[这里](http://eduardomarques.com/snippets/jquery-active-links/)解释。

# jquery - event.preventDefault() 在第一次点击然后删除

> ID：11772926
> 
> 赞同：7
> 
> 时间：2012-08-02T07:32:37.337
> 
> 标签：jquery

[如果默认锚具有此 fiddle](http://jsfiddle.net/aaronk85/5Quee/)中所示的类 subnav，我将禁用它。

我只希望在第一次单击时禁用此功能，然后我希望恢复正常的锚功能。做这个的最好方式是什么？我尝试了一些涉及以下代码的东西，但这似乎不起作用？

```
 $(this).unbind(event.preventDefault()); 
```

也许像这样的伪代码？

```
if (click count === 0 ) {
    event.preventDefault();
} 
```

还是有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T07:34:23.747

将事件处理程序与`one()`[^(docu)](http://api.jquery.com/one/)绑定。它执行一次，之后自动解除绑定。

```
$(".subnav a").one("click", function(event) {
  event.preventDefault();
}); 
```

或者，您可以直接在函数中自行取消绑定。为此使用命名空间很好

```
$(".subnav a").bind("click.myclick", function(event) {
  event.preventDefault();
  $(this).unbind(".myclick");
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-12-30T22:12:53.750

这很好用。第二次点击进入页面...

```
$(".smallNavigation > ul > li > a").click(function (e) {

    $("ul.sub-menu").hide();
    $("ul.sub-menu", $(this).parent("li")).show();

    e.preventDefault();
    $(this).unbind(e);

} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-02T07:37:30.173

您可以传递`false`给[one()](http://api.jquery.com/one/)：

```
$(".subnav a").one("click", false); 
```

传递`false`而不是处理程序相当于传递一个返回的处理程序`false`，有效地停止事件的传播并防止其默认行为。

这在[bind()](http://api.jquery.com/bind/)的文档中进行了解释：

> 在 jQuery 1.4.3 中，您现在可以传入来`false`代替事件处理程序。这将绑定一个等效于： 的事件处理程序`function() { return false; }`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T07:38:41.537

您可以在单击处理程序中使用像 self unbind 这样简单的东西。

就像是

```
function stopEventOnce(event) {
  event.preventDefault();
  $(this).unbind('click',stopEventOnce);
  return false;
}
$(".subnav a").bind('click', stopEventOnce); 
```

[修改过的小提琴](http://jsfiddle.net/sujay/5Quee/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T07:36:32.503

这对你有用

```
$("#elementid").bind("click", function( event ) {
  alert("This will be displayed only once.");
  event.preventDefault(); 
  $(this).unbind( event );
}); 
```

# php - CakePHP 项目更改服务器后无法正常工作

> ID：11772930
> 
> 赞同：0
> 
> 时间：2012-08-02T07:32:45.220
> 
> 标签：php, cakephp, web, webserver, rackspace-cloud

该项目正在运行，但在将服务器更改为 rackspace linux 服务器后，项目加载，当我输入用户名和密码时，页面再次加载到登录页面并且不通过网站。我试图再次设置 php.ini，但我不知道该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:38:21.997

请检查数据库连接，.htaccess 文件。

您还可以通过将 core.php 中的 cake-debugger 切换为 3 来进行调试

还要确保您的服务器配置得足以运行 cakephp 项目。你可以在这里查看：http: [//book.cakephp.org/2.0/en/installation.html](http://book.cakephp.org/2.0/en/installation.html)

希望这可以帮助...

# objective-c - 如何在 ios 中使用 AVAudiorecorder 录制音频时过滤背景噪音？

> ID：11772937
> 
> 赞同：6
> 
> 时间：2012-08-02T07:33:09.040
> 
> 标签：objective-c, avaudioplayer, avaudiorecorder

我正在创建一个类似**Talking Tom**的应用程序。我可以使用它再次录制和播放，`AVAudioplayer/recorder`但由于背景噪音占主导地位，语音不清晰。

谁能告诉我如何去除/过滤噪音，以便录制的声音清晰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T06:19:37.437

在大多数情况下，iOS 会在内部进行降噪，我认为它是自动进行的。

正常的方法是拥有两个麦克风，然后从一个拾取环境噪声的麦克风中减去一个正在吸引用户的麦克风。

然而，iOS 仅通过 AV Foundation（在我的 iPhone 5 上）公开了一个麦克风，因此您必须接受您所获得的质量。

# android - 在 Android 中为 /data/sdcard 设置默认文件/目录权限

> ID：11772939
> 
> 赞同：0
> 
> 时间：2012-08-02T07:33:12.313
> 
> 标签：android, porting, android-framework

我目前正在通过对 Android 的源代码进行一些我需要的修改，为我的一台设备创建自定义版本的 Android-gingerbread。

我想知道是否有任何方法可以将在特定路径下创建的所有文件/目录（即 /data/sdcard 在我的情况下）设置为始终具有 rwxrwxrwx 权限？我需要这个，因为我尝试下载第三方应用程序市场，发现它在 /data/sdcard 上创建了一个自定义目录并将应用程序的 apk 下载到它，然后尝试安装它们但这失败了，因为该目录和 apk 有权限rwx-------- 这会导致 PackageInstaller 无法访问该 apk 并导致解析错误。

我已经通过修改文件权限验证了可以安装应用！

让我知道是否有人可以帮助我解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:35:06.447

您可以在文件中设置权限：`system/core/include/private/android_filesystem_config.h` 但是，我刚刚检查了 sdcard 收到的库存 Android`rwxrwxrwx`权限：

```
00777, AID_ROOT,   AID_ROOT,   "sdcard" 
```

我猜您使用的是已覆盖此配置的自定义 ROM。

如果它是`/data`由应用程序创建的自定义文件夹，那么您可以使用我提出的方法。

# jpa - 持久化 OneToMany 实体会产生 javax.faces.el.E valuationException: javax.ejb.EJBException

> ID：11772944
> 
> 赞同：0
> 
> 时间：2012-08-02T07:33:31.957
> 
> 标签：jpa, persistence, ejb, jpa-2.0, one-to-many

当我尝试保存方法时，它给了我一个错误，但是当我尝试手动将数据直接插入数据库时​​，它工作正常。请问在我的 managedbean 类中有没有添加或看到的东西？请帮助保持解释尽可能简单和直接。谢谢

```
@Entity
@Table(name = "state")
@NamedQueries({
        @NamedQuery(name = "State.findAll", query = "SELECT s FROM State s"),
        @NamedQuery(name = "State.findByStateId", query = "SELECT s FROM State s WHERE s.stateId = :stateId"),
        @NamedQuery(name = "State.findByStateName", query = "SELECT s FROM State s WHERE s.stateName = :stateName")})
public class State implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @NotNull
    @Column(name = "state_id")
    private Integer stateId;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 45)
    @Column(name = "state_name")
    private String stateName;
    @JoinColumn(name = "country_id", referencedColumnName = "country_id")
    @ManyToOne(optional = false)
    private Country countryId;
} 
```

这是国家实体

```
@Entity
@Table(name = "country")
@NamedQueries({
    @NamedQuery(name = "Country.findAll", query = "SELECT c FROM Country c"),
    @NamedQuery(name = "Country.findByCountryId", query = "SELECT c FROM Country c WHERE c.countryId = :countryId"),
    @NamedQuery(name = "Country.findByCountryName", query = "SELECT c FROM Country c WHERE c.countryName = :countryName")})
public class Country implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @NotNull
    @Column(name = "country_id")
    private Integer countryId;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 45)
    @Column(name = "country_name")
    private String countryName;
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "countryId")
    private List<State> stateList;
} 
```

托管豆

```
public class stateManagedBean {
    @EJB
    private SessionBean sessionBean;
    @EJB
    private stateSessionBean stateSessionBean;
    private State state = new State();

    public stateManagedBean() {

    }
    public State getState() {
        return state;
    }

    public void setState(State state) {
        this.state = state;
    }

    public void save(){
        stateSessionBean.persist(state);
    }        
} 
```

错误页面

```
javax.faces.el.EvaluationException: javax.ejb.EJBException
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)

Caused by: javax.validation.ConstraintViolationException: Bean Validation constraint(s) violated while executing Automatic Bean Validation on callback event:'prePersist'. Please refer to embedded ConstraintViolations for details.
    at org.eclipse.persistence.internal.jpa.metadata.listeners.BeanValidationListener.validateOnCallbackEvent(BeanValidationListener.java:90)
    at org.eclipse.persistence.internal.jpa.metadata.listeners.BeanValidationListener.prePersist(BeanValidationListener.java:62)
    at org.eclipse.persistence.descriptors.DescriptorEventManager.notifyListener(DescriptorEventManager.java:698) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T19:41:29.183

正如异常日志明确指出的那样，您有一个`ConstraintViolationException`. 在您的情况下，异常是由注释引起的，该注释由您的实现中的方法`@NotNull`生成。`PrePersist``JPA`

删除和字段的`@NotNull`注释会有所帮助，但您可能会从数据库中获得另一个异常。只是给你一个想法，如果你的 IDE 已经自动生成了注解，这可能是由于 db 表中的字段定义。如果这是您的情况，并且您正在使用像我这样的 MySql 数据库，您将获得：`stateId``stateName``@NotNull`

```
Internal Exception: java.sql.SQLException: Duplicate key or integrity constraint violation message from server: "Column 'state_id' cannot be null" 
```

在这种情况下，您可能希望在 bean 中为您的 State提供 an`stateId`和 a （并避免删除注释）：`stateName``@NotNull`

```
state.setStateId(1);
state.setStateName("MyState"); 
```

最后，如果您也将 设置`country_id`为非可选字段，如注释所示，您还必须在持久化之前将国家/地区分配给您的州。

# ruby-on-rails - rails：如何让用户编辑最多 5 对的哈希，但其中的键是任意文本

> ID：11772947
> 
> 赞同：0
> 
> 时间：2012-08-02T07:33:41.940
> 
> 标签：ruby-on-rails, forms, serialization

在我的 Rails 3.0 应用程序中，我想添加一个表单元素，用户可以在其中创建一系列最多 5 个关键字/值对，并将其存储在单个字段中。关键字是由用户定义的，而不是应用程序，因此我研究过的其他 SO 问题将不起作用，因为在这些示例中，代码必须提前“知道”键。

键永远是一个单词，值永远是一个简短的句子。

所以 1 位用户可能想以某种方式输入以下内容：{'snow' => 'I like snow', 'ski' => 'I like to ski'}

其他用户可能会输入相当于：{'red' => '我最喜欢的颜色是红色', 'yellow' => 'Dont eat yellow snow'}

我知道如何使用我的模型的序列化：选项，哈希到数据库存储/检索单个文本字段中的哈希。

我没有得到一种简单的方法来允许用户创建/编辑散列，而不必在 text_area 字段中实际输入 json 或散列格式。

蛮力：由于我有固定且少量的允许对（5），在我看来，我可以提供 10 个字段供他们输入 0-5 对，然后保存表单并显示逻辑以某种方式将这些对移出/移出这 10 个字段。但我无法弄清楚将这 10 个字段映射到序列化数据的逻辑。任何帮助，将不胜感激。

ELEGANT：更好的方法当然是动态生成散列编辑表单元素。（我想我读过 Rails 3.2 有这个功能，但现在升级是不可能的，因为这是一个大型、复杂的应用程序，有很多移动部件（与多个外部服务集成），所以我们不会更新到更新的 rails 4-6个月。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:32:16.237

不是食谱，只是一些提示。

蛮力：

为您的模型创建 10 个虚拟属性 ( `key1, value1, key2, value2, ...`)

使用 ActiveRecord 回调来序列化/反序列化哈希

```
class YourModel < ActiveRecord::Base
  attr_accessor :key1, :value1, :key2, :value2, ...
  attr_accessible :key1, :value1, :key2, :value2, ...

  after_initialize do |obj|
    #map pairs to virtual attributes
    unless obj.pairs.nil?
      i=1
      pairs.each_pair do |key, val|
        obj.instance_variable_set("@key#{i}", key)
        obj.instance_variable_set("@value#{i}", val)
        i += 1
      end
    end
  end

  before_save do |obj|
    #serialize top hash
  end
end 
```

第二种方式：

创建生成必填字段的自定义表单构建器（这里是单选按钮的示例 - 单选按钮[列表的 Rails 自](https://stackoverflow.com/questions/1585648/example-of-a-rails-custom-formbuilder-for-a-radiobutton-list)定义表单构建器示例，您可以轻松找到有关表单构建器的几个截屏视频和教程）

# java - 如何使用 or 条件添加 cron 触发器？

> ID：11772955
> 
> 赞同：0
> 
> 时间：2012-08-02T07:34:17.777
> 
> 标签：java, quartz-scheduler, crontrigger

我的情况是这样的，我希望每个月在 30 日触发一个触发器，但是 2 月份没有这个特定日期，所以在执行过程中，石英会通过异常处理，否则它将在二月的第 28 天。如果它抛出异常，那么解决方案是什么。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:40:09.690

试试这个。

trigger = newTrigger() .withIdentity("trigger3", "group1") .startNow() .withSchedule(cronSchedule("0 0 15 L * ?")) .build();

// 在每个月的最后一天 15:00 触发

参考这个链接

[http://quartz-scheduler.org/documentation/quartz-2.x/cookbook/MonthlyTrigger](http://quartz-scheduler.org/documentation/quartz-2.x/cookbook/MonthlyTrigger)

# android - 仅针对所选列表项的不同背景

> ID：11772956
> 
> 赞同：1
> 
> 时间：2012-08-02T07:34:21.300
> 
> 标签：android, android-listview, android-listfragment

在我的应用程序中，我希望在`ListView`. 事实上，我没有一个普通的 ListView，我通过方法`ListFragment`从中获取我的 ListView 。`getListView()`我以编程方式应用了选择器，例如：

```
ListView listview = getListView();
listview.setSelector(R.drawable.tablet_settings_list_selector); 
```

列表选择器 xml 就像，

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_pressed="false" android:state_focused="false"
    android:drawable="@drawable/tablet_menu_panel" />
<item android:state_pressed="true" android:state_focused="true"
    android:drawable="@drawable/tablet_menu_panel_ontap" />
<item android:state_activated="true"
    android:drawable="@drawable/tablet_selected_menu" />
</selector> 
```

我的列表应该是这样的：

![所选项目具有不同背景的 ListView](../Images/832bb390dca58400cce631aaf28a7b1e.png)

如您所见，**所选列表项具有不同的背景，并带有一个向外的箭头**。那么我该如何实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:25:10.777

最后我得出一个结论，您不能在 a`ListView`或中设置永远选择的项目`ListFragment`。因此，为此，我编写了我的自定义 BaseAdapter 并解决了我的问题 :) 对于面临类似问题的人，这是我的 BaseAdapter，专注于**getView()**方法。

```
public class ListFragmentListAdapter extends BaseAdapter {

String[] items;
Context _context = null;
private TabletFragment _tabletFragmentChild;

public ListFragmentListAdapter(Context context, TabletFragment tabletFragmentChild, String[] items) {
    this.items = items;
    this._context = context;
    this._tabletFragmentChild = tabletFragmentChild;
}

    //---------------------MOST IMPORTATNT PART----------------------
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    if (convertView == null) {
        convertView = LayoutInflater.from(_context).inflate(R.layout.tablet_listfragment_list_item, null);
    }

    TextView textview = (TextView) convertView.findViewById(R.id.tv_listfragment_list_item);
    textview.setText(items[position]);

    convertView.setBackgroundDrawable(null);
    textview.setTextColor(_context.getResources().getColor(R.color.white));

    if(position == _tabletFragmentChild.getSelectedItemIndex()){
        convertView.setBackgroundResource(R.drawable.tablet_selected1_menu);
        textview.setTextColor(Color.BLACK);
    }
    return convertView;
}
    //------------------------END OF IMP PART0------------------------

@Override
public long getItemId(int position) {

    return position;
}

@Override
public Object getItem(int position) {
    return items[position];
}

@Override
public int getCount() {

    if (items == null)
        return 0;

    return items.length;
}
} 
```

# javascript - 为什么这个 jquery 代码不起作用？

> ID：11772963
> 
> 赞同：0
> 
> 时间：2012-08-02T07:34:42.657
> 
> 标签：javascript, jquery, html

我是 jquery 的新手。我不知道为什么这段代码不起作用。我有 3 个下拉框。根据 f_cat1 和 f_cat2 ，将获取 f_university_name ，因为 f_cat1 和 f_cat2 不能为空，这就是为什么我要检查 f_university_name 是否为空，并尝试在其中收集数据。或 f_cat1 或 f_cat2 被改变，也试图做这个操作。

有人能帮帮我吗？这是我的代码：

```
$(document).ready(function(){

     var cat1= $('#f_cat1').val();    // f_cat1,f_cat2 is the id of a dropdown box 
     var cat2= $('#f_cat2').val();

     $('#f_cat1').change(make_change);
     $('#f_cat2').change(make_change);

     var uni_name= $('#f_university_name').val();  
     if(uni_name=="")
     {
         make_change();
     }

});

function make_change()
{
    var post_url ="<?php echo $c_link.'get_university/';?>"+ cat1+'/'+cat2;
    //  alert(post_url);
    $.ajax({
        type: "POST",
        url: post_url,
        //  dataType : "JSON",
        success: function(unis) 
        {
           //  alert('hi');
           $('#f_university_name').empty();
           $.each(unis,function(university_id,university_name)
           {
              var opt = $('<option/>'); 
              opt.val(university_id);
              opt.text(university_name);

              $('#f_university_name').append(opt);
           });

     } //end success
  }); //end AJAX
} 
```

编辑后1：感谢大家回复我，它已经开始工作了。但问题是我无法评论我的声誉很低。我是堆栈溢出的新手，我不知道规则。而且我无法点击任何东西......我怎么能摆脱这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T07:38:57.367

在你的函数中没有变量`cat_1`和，因为它们是本地的。将功能的定义移到块中，然后您就可以访问它们了。`cat_2``make_change``$(document).ready(function () { ... });``make_change``$(document).ready(function () { ... });`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:46:22.427

将变量放在 document.ready 函数之外。意味着全球访问。然后你可以在任何你想要的地方使用它们

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T07:51:13.310

您将在这里遇到的主要问题是您读取页面第一次加载的值`f_cat1`和时间，并且永远不会再次读取它们：`f_cat2`

```
$(document).ready(function(){

     var cat1= $('#f_cat1').val();    // f_cat1,f_cat2 is the id of a dropdown box 
     var cat2= $('#f_cat2').val();

     .... 
```

这意味着无论这两个下拉列表的值在开始时是什么，变量`cat1`都`cat2`永远不会改变。

解决此问题的最简单方法是每次调用函数时读取这些变量`make_change`：

```
function make_change()
{
    var cat1= $('#f_cat1').val();    
    var cat2= $('#f_cat2').val();
    var post_url ="<?php echo $c_link.'get_university/';?>"+ cat1+'/'+cat2;
    .... 
```

# iphone - 在 iPhone 中，我可以在 iTunes Store 上创建指向播客页面的链接吗？

> ID：11772964
> 
> 赞同：-1
> 
> 时间：2012-08-02T07:34:42.873
> 
> 标签：iphone, ios

在 Apple 音乐应用程序的播客标题列表的底部，有一个指向`Get More Episodes...`iTunes Store 上播客页面的链接 ( )。

我可以在我的应用程序中做同样的事情吗？

**编辑**

我正在使用 MediaPlayer 框架从 iphone 的 ipod 库中获取播客。

**编辑**

我发现了两个相关的问题。
他们俩都说没有办法从 iPod Library 中的 MPMediaItem 获取 iTunes ID。

[有没有办法在 iPhone 上检索 iTunes 持久 ID？](https://stackoverflow.com/questions/4620967/is-there-a-way-to-retreive-itunes-persistent-id-on-iphone)

[获取 iPod 播放器项目的 iTunes ID](https://stackoverflow.com/questions/1983461/obtaining-itunes-id-to-an-ipod-player-item)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:49:09.377

是的

```
-(IBAction)pushToAppleStore
{

[[UIApplication sharedApplication] openURL:[NSURL URLWithString: @"http://itunes.apple.com/gb/tv-season/episode-1/id545306665?i=547954947"]];
} 
```

# c# - 文件下载和缓存

> ID：11772966
> 
> 赞同：0
> 
> 时间：2012-08-02T07:34:49.740
> 
> 标签：c#, asp.net, windows, azure, blob

我在 Azure blob 存储中有一些 xml 文件。在 Web Unity 应用程序中，我需要直接下载这些文件。
喜欢：[http](http://myblobstorage.net/file.xml)
://myblobstorage.net/file.xml 有没有办法禁用缓存，因为有时，新文件不使用。
有可能这样做吗？也许在请求标头中添加一些东西？
我看到了另一种解决方案，包括在链接末尾添加一个参数，它有效吗？
喜欢：[http](http://myblobstorage.net/file.xml?nocache=randomnumber)
://myblobstorage.net/file.xml?nocache=randomnumber 是否可以将文件直接保存在缓存中？或在临时文件夹中？

如果您有任何解决方案/建议！

非常感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:33:27.017

就像您说的那样，您可以通过向查询字符串添加随机内容（例如 DateTim.Now.Ticks）来禁用缓存。控制缓存的另一种方法是在 blob 上设置**CacheControl属性：**

```
//Create a blob
CloudBlob blob = new CloudBlob("newcontainer/ablob.text", blobClient);
blob.UploadText("this is a blob");

//Set CacheControl property
blob.Properties.CacheControl = "public, max-age=31536000" // nocache is also an option;
blob.SetProperties(); 
```

[https://azure.microsoft.com/en-us/documentation/articles/storage-properties-metadata/](https://azure.microsoft.com/en-us/documentation/articles/storage-properties-metadata/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T22:09:32.283

这很奇怪，因为当我将 cachecontrol 属性添加到 no-cache 时，我的 xml 文件不会保存。现在我将在 url 的末尾使用 Tick。
是否可以从 asp.net 将文件直接保存在缓存中？或者可能访问临时文件夹？

# plugins - 从私有远程 url 安装 zip 格式的 Griffon 插件

> ID：11772967
> 
> 赞同：0
> 
> 时间：2012-08-02T07:34:54.080
> 
> 标签：plugins, griffon

不知何故，我无法在 griffon 文档或谷歌搜索中找到并回答这个问题......

我创建了一个 griffon 插件。它像往常一样打包：

`griffon package-plugin`

然后我可以在我的应用程序中本地安装它，指定打包生成的 zip 文件的路径：

`griffon install-plugin /path-to-plugin/plugin-name.zip`

我什至可以将它上传到远程 url 并从那里安装：

`griffon install-plugin address-of-my-site/plugin-name.zip`

**如何在构建/运行使用它的 griffon 应用程序期间从我的 url 安装此插件成为自动步骤？**

我与另一个开发人员一起开发该应用程序，并且不想在每次发生变化时都强迫他手动安装插件。它应该自动从我的网站下载。但我也不想将插件发布到 griffon 官方存储库 - 它仍然是非常实验性的东西。

application.properties 中有一行告诉 griffon，需要该插件：

`plugins.plugin-name=0.3`

但它不能像所有其他插件一样从 griffon 中央存储库安装，因为它显然不存在。

我查看了 BuildConfig.groovy 中“griffon.project.dependency.resolution”部分的文档，但在那里找不到任何对我有用的东西。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:38:46.000

您寻求的答案可在指南的第 12.1 和 12.2 节中找到。第一部分描述了一个插件被推送到本地存储库的示例。第二部分描述了 Griffon 支持的存储库类型。

可以从构建系统查询的插件存储库中获得的插件（即，存储库已配置）可以立即使用您想要的简写符号进行安装。

There's always a local repository configured by Griffon: griffon-local. Pushing releases to it will make them instantly available to `install-plugin`, `list-plugins`, `plugin-info`, etc.

# ios - Cordova/PhoneGap：安装 calendarPlugin 后出现链接器错误

> ID：11772968
> 
> 赞同：0
> 
> 时间：2012-08-02T07:34:58.310
> 
> 标签：ios, cordova, plist

[我刚刚从这里https://github.com/phonegap/phonegap-plugins/tree/master/iOS/CalendarPlugin](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/CalendarPlugin)为 Cordova iOS 安装了 calenderPlugin

我按照说明将 m 和 h 文件放入 plugins 文件夹，然后在 cordova.plist 文件中添加键值 paris

但是当我运行应用程序时，我得到一个链接器错误。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T22:35:24.440

我发现了为什么会发生这种情况。我还需要安装 EventKit 和 EventKitUI 框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T00:44:39.560

单击 xcode 图标，然后您应该会看到项目图标和目标图标。单击目标图标，然后单击构建阶段。单击“将二进制文件与库链接”的下拉菜单。单击窗口底部的加号，然后搜索两个框架。添加这两个框架，重新构建项目并运行它。

[https://groups.google.com/forum/?fromgroups=#!topic/phonegap/ylTBtmq30xg](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/ylTBtmq30xg)

# java - Eclipse 中 Java EE 透视图中的包表示

> ID：11772969
> 
> 赞同：2
> 
> 时间：2012-08-02T07:34:59.133
> 
> 标签：java, eclipse

在 eclipse indigo 中切换到我的 Java EE 透视图时出现问题。

在我的 Java 观点中，我有这样的布局：

![非折叠包布局](../Images/4eae173e9bd00a2f2c1ce7ae93c2e96f.png)

但是当我切换到 Java EE 透视图时，我得到了这个：

![折叠包布局](../Images/c58518b15bff6eaeb399840359c3f782.png)

我试过[这个](https://stackoverflow.com/questions/6553425/is-there-a-way-to-nest-packages-in-eclipses-package-explorer)，[这个](https://stackoverflow.com/questions/3915961/how-to-view-hierarchical-package-structure-in-eclipse-package-explorer)没有成功。我想在 Java EE 透视图中拥有第一个布局。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T07:47:11.443

包装介绍可以在这里找到：

![在此处输入图像描述](../Images/80c1ddc31b5838b949151caf5d92b474.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T07:41:29.197

这些是我在 eclipse 4.2 中的设置，它们会产生你想要的布局：

```
- folder presentation: grouped
- package presentation: flat 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T07:44:53.987

您可以使用项目资源管理器中下拉菜单中的“Package Presentation -> Flat”进行切换。

![包装展示快照](../Images/6ba3054a52e912483faf8d9130902c11.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-05T15:52:55.803

您还可以使用“导入现有 Maven 项目”来导入您的项目。然后它将文件夹配置为平面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-15T02:18:27.733

上面的答案并没有真正解决大多数菜鸟在 Eclipse 中遇到的真正问题。所以我想我会为这个问题添加一个答案，因为提问者决定重新安装 Eclipse，这既不是必要的，也不是可行的解决方案。真正的问题是，当您创建或导入此项目时，您选择了`Project`在 eclipse 中创建一个选项，而不是一个`Java Project`. 如果您选择`Project`，它会将其创建为类似于您在 Windows 资源管理器中看到的文件系统目录结构。要解决此问题，只需将您的项目从工作区重新导入为**“Java 项目”**，您就可以根据您的观看乐趣将包结构更改为平面或分层结构。希望这会有所帮助。

# c++ - HippoMocks 通过 ref 模拟返回值

> ID：11772970
> 
> 赞同：1
> 
> 时间：2012-08-02T07:35:02.903
> 
> 标签：c++, unit-testing, mocking, hippomocks

```
class IEmployeeServiceProxy
{
public:
    virtual ~IEmployeeServiceProxy() { }
    virtual void AddEmployee(const Employee&) = 0;
    virtual int GetEmployees(std::vector<Employee>&) = 0;
};

struct Employee
{
    boost::uuids::uuid Id;
    std::string Name;
};

m_Mocks.ExpectCall(m_EmpSvcMock.get(), IEmployeeServiceProxy::GetEmployees).Return???; 
```

我如何模拟它，以便它通过参数而不是 int （这是方法的返回类型）返回一个 std::vector ？

另外，如果有超过 1 个 ref 参数怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T07:49:22.983

您必须自己提供对象以供参考，确保模拟使用它 using`With`并且您可以更改它，将函数传递给`Do`，该函数也提供返回值。有多少参考参数并不重要。例子：

```
int AddSomeEmployees( std::vector< Employee >& v )
{
  v.push_back( Employee() );
  return 0;
}

  //test code
std::vector< int > arg;

mocks.ExpectCall( empSvcMock, IEmployeeServiceProxy::GetEmployees ).With( arg ).Do( AddSomeEmployees ); 
```

请注意，它`Do`可以采用任何类型的函数，也可以是 std::function、lambdas 等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T07:55:08.863

Git 版本（最新版本）有一个 Out 参数选项，几乎就是这样。使用

```
std::vector<int> args; args.push_back(1); args.push_back(2);
mocks.ExpectCall(mock, IInterface::function).With(Out(arg)); 
```

# javascript - 如何处理同一页面上的多个社交小部件？

> ID：11772971
> 
> 赞同：0
> 
> 时间：2012-08-02T07:35:12.987
> 
> 标签：javascript, facebook, twitter, linkedin, google-plus

从理论上讲，这个问题已经得到[解答](https://stackoverflow.com/questions/10152971/many-share-buttons-for-social-networks-on-one-page)。不过，我有技术问题。

我使用 Facebook、Twitter、LinkedIn 和 Google+。我更喜欢延迟加载方法。在这种情况下，仅当用户导航到内容时才会加载特定于内容的按钮。

但是，如何实现呢？Facebook 有[FB.XFBML.parse();](http://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/) ，它解析内容的选定部分（当传递 DOMElement 参数时）。其他社交小部件呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:27:46.730

*   领英[使用](https://developer.linkedin.com/documents/inauth-inevent-and-inui) `IN.parse(domNode)`
*   推特[使用](https://dev.twitter.com/discussions/890) `twttr.widgets.load()`
*   Google+[使用](https://stackoverflow.com/a/7628992/357801) `gapi.plusone.go()`

# iphone - 像人手一样创建自定义按钮

> ID：11772972
> 
> 赞同：0
> 
> 时间：2012-08-02T07:35:21.493
> 
> 标签：iphone, objective-c, ios, xcode, uibutton

作为我的应用程序的一部分，我需要在单击人手图像内的任何位置时触发一个方法。人手图像放置在图像视图中。尽管添加了手势，但我需要添加一个按钮。是否可以创建一个像人手一样的自定义按钮，如下图所示？

![在此处输入图像描述](../Images/e5d719ef0fddbbc86b121cdb67abdec9.png)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T07:41:25.703

创建自定义`UIButton`添加图像手作为其`backgroundImage`或`setImage`。然后在里面使用 /assign 这个图像。如下所示：

```
 handButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [handButton addTarget:self action:@selector(handImage_touch) forControlEvents:UIControlEventTouchUpInside];
    [handButton setBackgroundImage:[UIImage imageNamed:@"handIMAGE.png"] forState:UIControlStateNormal];
    handButton.frame = CGRectMake(x, y, width, height);
    [self.view addSubview:handButton];

-(void)handImage_touch{
   // do anything
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T11:18:24.387

我认为首先你必须制作适合你图像的多边形。然后你可以用它`touchesBegan:withEvent:`来获取触摸点的坐标，判断该点是否在多边形内部。

这是与您类似的问题。

[如何获得特定的触控区域？](https://stackoverflow.com/questions/8450967/how-to-get-particular-touch-area)

我认为这是一个有点困难的工作，所以也许你最好使用具有碰撞判断功能的 cocos2d 库。

![图片](../Images/2bb1d2cef0dc3f8e0097ccba7b88fb6c.png)

[http://box2d.org/forum/viewtopic.php?f=9&t=7487](http://box2d.org/forum/viewtopic.php?f=9&t=7487)

但我也认为 iOS 在处理触摸方面做得很好，所以这对你来说是有益的。

# javascript - 我如何滥用选择器的开头？

> ID：11772974
> 
> 赞同：2
> 
> 时间：2012-08-02T07:35:59.227
> 
> 标签：javascript, jquery, selector

如果`a == "http://foo.bar"` 和`$(b[0]).attr("href") == "http://foo.bar"`

那么为什么下面的代码不返回true：

```
$("[href^=\"" + a + "\"]", b).length > 0 
```

?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T07:39:19.503

因为传递给 jQuery 函数的第二个参数限定了选择器的作用域，也就是说，在b的*子项中找到被选择的元素。*

举个例子

```
<div id="one">
   <div id="two" title="Test" />
</div> 
```

这将返回 1

```
$('[title="Test"]','#one').length 
```

这将返回 0

```
$('[title="Test"]','#two').length 
```

现场示例：http: [//jsfiddle.net/mkudf/](http://jsfiddle.net/mkudf/)

* * *

根据您的评论，您似乎在将元素添加到 dom 之前正在做一些事情，例如：

```
var $x = $('<div id="one" /><div id="two" title="Test" />');
alert($('[title="Test"]',$x).length); // alerts "0" 
```

如果不将动态元素包装在一个额外的元素中，我就无法实现你想要的（上面提醒“1”）：

```
var $x = $('<div><div id="one" /><div id="two" title="Test" /></div>');
alert($('[title="Test"]',$x).length); // now alerts "1" 
```

这不应该是一个太大的问题，当添加到 dom 时，你可以采取`$x.children()`：

```
$someOtherElement.after($x.children()); 
```

# asp.net-mvc - 带有文本和图标的操作链接？

> ID：11772976
> 
> 赞同：3
> 
> 时间：2012-08-02T07:36:03.440
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我在干净的 HTML 中有这个链接。我想把它变成一个 MVC ActionLink。但这怎么可能。我无法理解，似乎没有简单的方法。或者？

```
<li class="active"><a href="#"><i class="icon-home icon-large"></i> Dashboard</a></li> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-02T07:41:20.120

你有几个选项可以做到这一点。

选项1：

```
<li class="active"><a href="@Url.Action("YourAction", "YourController")"><i class="icon-home icon-large"></i> Dashboard</a></li> 
```

选项 2：

为 HtmlHelper 编写自己的扩展方法，该方法接受 String/MvcHtmlString 并将其放入链接标记中，无需 html 对其进行编码。

```
public static MvcHtmlString SpecialActionLink(this HtmlHelper html, String action, String controller, String innerHtml) {
    TagBuilder tag = new TagBuilder("a");
    tag.MergeAttribute("href", new UrlHelper(html.ViewContext.RequestContext).Action(action, controller));
    tag.InnerHtml = innerHtml;
    return new MvcHtmlString(tag.ToString(TagRenderMode.Normal));
} 
```

（尚未对其进行测试，但应该让您了解如何操作。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-02T07:44:54.663

```
<li class="active">

    @Html.ActionLink("Dashboard", //Title
                    "Index",      // Action
                    "Home",       // Controller
                    new { @class = "home-icon"}  // htmlAttributes 
                    )

</li>

.home-icon{   /*Some CSS to set the background image (not tested) */
   padding:16px;
   background:transparent url('path-to-image.png') .... ;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-05T13:04:37.407

您不能使用 ActionLink。唯一的方法是@url.action

```
<a href="@Url.Action("View","Article",new {area="",id=id})"><span>This is a test</span></a> 
```

# android - TelephonyManager 的问题，classNotFoundException

> ID：11772979
> 
> 赞同：0
> 
> 时间：2012-08-02T07:36:20.113
> 
> 标签：android, telephonymanager

我正在尝试创建一个可以阻止来电的应用程序。我得到`ClassNotFoundException`了。`TelephonyManager`以下是我正在使用的代码。我在这里做错了什么？

广播接收器

```
import java.lang.reflect.Method;
import com.android.internal.telephony.ITelephony;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.TelephonyManager;
import android.util.Log;

public class TelephoneBroadcastReceiver extends BroadcastReceiver {
    String TAG = "My Tag";
    String incomingNumber = "";
    String incno1 = "5556";
    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub

        Log.d(TAG, "INF: Broadcast received.");

        try{

            TelephonyManager tManager = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
            Log.v(TAG, "Get getTeleService...");    
            Class c = Class.forName(tManager.getClass().getSimpleName());
            Method m = c.getDeclaredMethod("getITelephony");
            m.setAccessible(true);
            com.android.internal.telephony.ITelephony telephonyService = (ITelephony) m.invoke(tManager);
            Bundle bundle = intent.getExtras();

            incomingNumber = bundle.getString(TelephonyManager.EXTRA_INCOMING_NUMBER);
            Log.v(TAG,incomingNumber );
            Log.v(TAG,incno1 );
            if ( incomingNumber.equals(incno1) ) {
                 telephonyService = (ITelephony) m.invoke(tManager);
                 telephonyService.silenceRinger();
                 telephonyService.endCall();
                 Log.v(TAG,"BYE BYE BYE" );
            }
            else{
                telephonyService.answerRingingCall();
                Log.v(TAG,"HELLO HELLO HELLO" );
            }           
        }catch(Exception e){
            e.printStackTrace();
            Log.e(TAG,
                    "FATAL ERROR: could not connect to telephony subsystem");
            Log.e(TAG, "Exception object: " + e);
        }
    }
} 
```

清单文件

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.atiffarrukh.callandsmsfilter"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.READ_CONTACTS"/>
    <uses-permission android:name="android.permission.MODIFY_PHONE_STATE"/>
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <receiver android:name="com.atiffarrukh.callandsmsfilter.broadcastreceiver.TelephoneBroadcastReceiver" >
            <intent-filter  >
                <action android:name="android.intent.action.PHONE_STATE" />
            </intent-filter>
        </receiver>

        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

现在错误

```
08-02 13:21:20.641: D/My Tag(557): INF: Broadcast received.
08-02 13:21:20.641: V/My Tag(557): Get getTeleService...
08-02 13:21:20.641: W/System.err(557): java.lang.ClassNotFoundException: TelephonyManager
08-02 13:21:20.641: W/System.err(557):  at java.lang.Class.classForName(Native Method)
08-02 13:21:20.641: W/System.err(557):  at java.lang.Class.forName(Class.java:235)
08-02 13:21:20.641: W/System.err(557):  at java.lang.Class.forName(Class.java:182)
08-02 13:21:20.641: W/System.err(557):  at com.atiffarrukh.callandsmsfilter.broadcastreceiver.TelephoneBroadcastReceiver.onReceive(TelephoneBroadcastReceiver.java:30)
08-02 13:21:20.641: W/System.err(557):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2810)
08-02 13:21:20.641: W/System.err(557):  at android.app.ActivityThread.access$3200(ActivityThread.java:125)
08-02 13:21:20.641: W/System.err(557):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2083)
08-02 13:21:20.641: W/System.err(557):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-02 13:21:20.641: W/System.err(557):  at android.os.Looper.loop(Looper.java:123)
08-02 13:21:20.764: W/System.err(557):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-02 13:21:20.764: W/System.err(557):  at java.lang.reflect.Method.invokeNative(Native Method)
08-02 13:21:20.764: W/System.err(557):  at java.lang.reflect.Method.invoke(Method.java:521)
08-02 13:21:20.764: W/System.err(557):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-02 13:21:20.764: W/System.err(557):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-02 13:21:20.764: W/System.err(557):  at dalvik.system.NativeStart.main(Native Method)
08-02 13:21:20.764: W/System.err(557): Caused by: java.lang.NoClassDefFoundError: TelephonyManager
08-02 13:21:20.764: W/System.err(557):  ... 15 more
08-02 13:21:20.764: W/System.err(557): Caused by: java.lang.ClassNotFoundException: TelephonyManager in loader dalvik.system.PathClassLoader[/data/app/com.atiffarrukh.callandsmsfilter-1.apk]
08-02 13:21:20.764: W/System.err(557):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
08-02 13:21:20.764: W/System.err(557):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
08-02 13:21:20.764: W/System.err(557):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
08-02 13:21:20.764: W/System.err(557):  ... 15 more
08-02 13:21:20.764: E/My Tag(557): FATAL ERROR: could not connect to telephony subsystem
08-02 13:21:20.764: E/My Tag(557): Exception object: java.lang.ClassNotFoundException: TelephonyManager 
```

**谢谢...**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:44:01.820

用这个

```
Class c = Class.forName(tManager.getClass().getName()); 
```

而不是 getSimpleName() 见下面的链接

[http://androidsourcecode.blogspot.in/](http://androidsourcecode.blogspot.in/)

# c++ - 在 Xcode c++ 项目中包含头文件

> ID：11772980
> 
> 赞同：1
> 
> 时间：2012-08-02T07:36:20.847
> 
> 标签：c++, ios, xcode

我有一个名为 Ah 的头文件，另一个名为 Bh 的头文件

在 Bh 中，

`#include "XYZ/A.h"`

但 Xcode 抱怨找不到“XYZ/Ah”文件。

我试图在 Bh 所在的文件夹中创建一个子文件夹 XYZ，并将 Ah 放入 XYZ，但同样的错误。

如何解决这个问题？===> 在项目构建设置“标题搜索路径”中设置 XYZ 文件夹的父文件夹。问题解决了！

我不想更改头文件 Bh - 我想保留相对路径“XYZ/Ah”。

请注意：Ah 和 Bh 都添加到项目中（拖动...），它们的物理位置与 Xcode 项目中的组文件夹不同。它们可能位于磁盘中的不同文件夹中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T07:47:45.483

I am not particularly familiar with XCode but generally the compiler needs to know where to start looking when using relative include paths. For this reason, through compiler options or project options (since you are using an IDE), you must set the path to the directory that contains the directory XYZ. So if the path to XYZ is '/home/user/XYZ', then you need to add '/home/user/' to the search paths.

Now this is generally speaking. XCode may do it in a slightly other way but the point should be the same.

# android - 如何使 ListView 在使用 addheaderview 添加的列表项上开始手势时不滚动

> ID：11772983
> 
> 赞同：0
> 
> 时间：2012-08-02T07:36:42.123
> 
> 标签：android, android-listview

我想构建一个 google plus like 评论列表视图，当向上或向下拖动列表视图的顶部时，它会变得更高（覆盖背景图像）或更短（暴露背景图像），而列表视图的底部保持与底部对齐屏幕。

在我的 Android 项目中，有一个垂直填充父级的列表视图。在顶部，有 3 个由 AddHeaderView 添加的透明列表项（通过显示背景图像），在它们下方是使用列表适配器添加的常规列表项。它很好地模仿了 google plus，除了当我在背景图像上垂直拖动时评论移动（这实际上是被拖动的透明列表项。）这是不可取的。

我想如果我能以某种方式使列表视图在用户拖动 3 个“标题”项之一时不滚动，但如果拖动任何其他列表项则滚动，这将变得有用。

实现这一目标的最佳方法是什么？

下面是显示如何添加列表项的代码。

```
mCommentListView.addHeaderView(comment_header_v1,null,false);
mCommentListView.addHeaderView(comment_header_v2,null,false);
mCommentListView.addHeaderView(comment_header_v3,null,false);
mCommentListAdapter = new CommentListAdapter(getActivity());
mCommentListView.setAdapter(mCommentListAdapter); 
```

先感谢您。

# facebook - 在哪里可以找到登录图标？

> ID：11772984
> 
> 赞同：-4
> 
> 时间：2012-08-02T07:36:44.860
> 
> 标签：facebook, icons

不是这样的编程问题，但我想知道在哪里可以找到一些带有“使用 Facebook 登录”的大图标

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:54:20.703

您是指 Facebook 应用程序的图标/图像吗？您需要访问：www.facebook.com/developers/，然后找到该应用程序并单击编辑。上传 2 个图标。一个 16x16 和一个 75x75。如果应用程序是 Tab App，那么您可以上传 111x74 的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T19:45:59.730

看看iconwanted.com 里面有很多免费的图标，还有论坛用的。您也可以寻找社交图标集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T11:22:31.043

你可以试试这样的网站：

[http://www.large-icons.com/stock-icons/free-social-media/facebook.htm](http://www.large-icons.com/stock-icons/free-social-media/facebook.htm)
[http://blog.websitetemplates.bz/website_templates_news/facebook-icons.html](http://blog.websitetemplates.bz/website_templates_news/facebook-icons.html)

# jquery - 定制的 Jquery UI 微调器

> ID：11772985
> 
> 赞同：1
> 
> 时间：2012-08-02T07:36:46.093
> 
> 标签：jquery, jquery-ui, spinner, customization, mousedown

我已经在这个问题上卡了一个多月了，真的真的需要这个问题的帮助，

我想使用具有以下自定义的 Jquery ui 微调器：

1.  递增和递减按钮应该由我定义，我的图像应该使用
2.  增量步长应该是可变的

另一种方法，而不是使用 jquery ui 会受到欢迎，但需要帮助来实现这一点，我正在寻找的基本功能是：直到 mousedown on image 不断增加文本框值，就是这样

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T00:33:22.540

你可以尝试：

```
 https://github.com/btburnett3/jquery.ui.spinner 
```

易于使用，您只需要 2 个文件（ui.spinner.min.js 或 ui.spinner.js 和 ui.spinner.css）

回答您的问题：

1.  您可以覆盖下面列出的任何 css 类来放置您想要的图像，并在浏览器开发工具中使用一些值来查看您的更改。

    ```
     classes: ui-spinner-up ui-spinner-button ui-state-default ui-corner-tr 
    ```

2.  增量大小可以在“step”属性中设置。

例子：

```
$('#someId').spinner({
                        min: 0,
                        max: 100,
                        increment:'fast',
                        step:5  // this will increment or decrement by 5    
                    }); 
```

请记住，带有 id="someId" 的 HTML 组件应该是带有 type="text" 或 "number" 的输入，但如果您选择最后一个并且您的浏览器支持 HTML5，它将在输入内部和下方呈现向上/向下箭头此扩展程序添加的按钮。我的建议是使用 type="text"。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:46:49.080

我忘了提到你可以使用 jQuery UI 1.9，在里程碑 6 中，它们为 Spinner 小部件提供了许多更新。

请访问此站点以获取更多详细信息： [JQuery UI 1.9 里程碑 6](http://blog.jqueryui.com/2011/09/jquery-ui-1-9-milestone-6-spinner-2)

请记住，此功能正在“开发中”，[视觉设计](http://wiki.jqueryui.com/w/page/12138077/Spinner)看起来不错，但工作微调器看起来像[这个示例](http://view.jqueryui.com/master/demos/spinner/default.html)

出于您的目的：

1.  图像可以通过 CSS 更改。
2.  选项“步”应提供增量步长。
3.  直到 mousedown on image 不断增加文本框按预期工作。

注意：请记住，您可以下载[JQuery UI 1.9 RC](http://blog.jqueryui.com/)的第一个候选版本来测试它。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:47:44.403

如果您在 github 中查看微调器的最新版本，[https://github.com/jquery/jquery-ui/tree/master/ui](https://github.com/jquery/jquery-ui/tree/master/ui) 他们在最后一次提交中添加了代码，以便微调器可以选择更改图像。就增量步长而言，您可以在选项中添加步长值。希望这可以帮助。

# iphone - 自定义 TabBarController 上的“更多”选项卡

> ID：11772988
> 
> 赞同：0
> 
> 时间：2012-08-02T07:37:13.403
> 
> 标签：iphone, ios, xcode, uitabbarcontroller

如您所知，如果选项卡的数量超过 5 个，iPhone 会添加一个名为“更多”的选项卡。

我的问题是：

我们如何定制这个选项卡，改变它的标题甚至视图？我最初的视图控制器是一个标签栏控制器。

谢谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:52:35.000

您可以通过继承标签栏控制器类来创建自己的类（或说类别），并且可以根据需要控制事物。

*   创建一个继承 TabBarController 的类。
*   在 init 方法中添加您自己的视图。
*   处理选择事件，因为您的超类是 TabBarController。

# mysql - MySQL - 编写一个应该很容易的查询的麻烦

> ID：11772990
> 
> 赞同：0
> 
> 时间：2012-08-02T07:37:15.160
> 
> 标签：mysql, sql

我有一个看起来像这样的中间表（在我加入其他 2 个表之后）：

```
    ID Meta_key Meta_value

    22 公司 亚马逊

    22 地址西雅图

    25 公司 谷歌

    25 地址山景城

```

等等...

我的问题是编写单个查询以获取给定 ID 的公司名称和地址的最简单方法是什么？构造这个 where 子句的最佳方法是什么，因为我想要类似 select meta_value from table where meta_key = "Company" and meta_key = "Address" （这显然行不通）...我敢肯定有一个简单的方法这样做但现在似乎无法想到，我还需要别名来区分公司的元值和结果集中的地址。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T07:47:32.977

如果您希望两个键在同一行中，您可以自行加入表格

```
SELECT t1.ID, t1.Meta_value as "Company", t2.Meta_value as "Address"
FROM table t1
JOIN table t2 ON t2.ID = t1.ID AND t2.Meta_key = "Address"
WHERE t1.Meta_key = 'Company' 
```

或者，如果您希望使用子查询更简单的单个 ID：

```
SELECT 
    22 as "ID",
    (SELECT Meta_value FROM table WHERE id = 22 AND Meta_key = "Company") as "Company",    
    (SELECT Meta_value FROM table WHERE id = 22 AND Meta_key = "Address") as "Address"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:41:49.617

```
SELECT CASE WHEN meta_key ='Address'
       THEN Meta_value
       ELSE ''
END AS address,
CASE WHEN meta_key ='Company'
       THEN Meta_value
       ELSE ''
END AS company
FROM tbl where id=22 
```

# node.js - 连接无法在节点应用程序中连接 mongodb

> ID：11772995
> 
> 赞同：1
> 
> 时间：2012-08-02T07:37:37.573
> 
> 标签：node.js, mongodb, passport.js, towerjs

使用节点 server.js 启动服务器时出现错误。错误详情在这里：

```
path.existsSync is now called `fs.existsSync`.
info  - socket.io started
[Thu, 02 Aug 2012 00:58:27 GMT] INFO Tower development server listening on port 3000
[Error: Target script does not exist: node_modules/design.io/bin/design.io]

/Users/Drew/test/desert-level-pets/node_modules/tower/lib/tower/server/store/mongodb/database.js:39
            throw error;
                ^
Error: failed to connect to [127.0.0.1:27017]
    at Server.connect.connectionPool.on.server._serverState (/Users/Drew/test/desert-level-pets/node_modules/mongodb/lib/mongodb/connection/server.js:473:73)
    at EventEmitter.emit (events.js:115:20)
    at connection.on._self._poolState (/Users/Drew/test/desert-level-pets/node_modules/mongodb/lib/mongodb/connection/connection_pool.js:92:15)
    at EventEmitter.emit (events.js:91:17)
    at Socket.errorHandler (/Users/Drew/test/desert-level-pets/node_modules/mongodb/lib/mongodb/connection/connection.js:387:10)
    at Socket.EventEmitter.emit (events.js:88:17)
    at Socket._destroy.self.errorEmitted (net.js:329:14)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9 
```

谁能帮我解决它？谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T02:43:27.513

您需要确保您有一个 mongodb 实例启动并运行。此外，您是否在尝试运行“tower server”的目录中运行“npm install”来安装 design.io 和所有其他包 tower 需要？看起来这是问题的一部分。