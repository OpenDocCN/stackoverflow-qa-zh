# StackOverflow 问答 11571000-11571999

# javascript - 奇怪的怪癖：pushState 和/或 hashChange 从浏览器选项卡中清除标题

> ID：11571000
> 
> 赞同：1
> 
> 时间：2012-07-19T23:55:17.827
> 
> 标签：javascript, pushstate, history.js, hashchange

我有一个 ASP.NET MVC 3 应用程序，它是作为单页应用程序构建的，它遵循[BigShelf SPA](http://code.msdn.microsoft.com/ASPNET-Single-Page-d6d7172c)中的示例，使用 Knockout.js 和 History.js 来处理用户交互和导航。一切正常，但我注意到一个奇怪的怪癖，标题显示在浏览器选项卡中：

1.  当应用程序加载时，浏览器选项卡标题会正确显示`<title>`标签的内容，即`My Single Page App`
2.  当 History.js 使用`pushState`or `hashChange`（取决于浏览器的能力）修改 URL 时，浏览器的选项卡标题设置为新修改的 URL，即浏览器选项卡现在读取`http://www.mysinglepageapp.com/modified/url`

同样，功能上没有问题，但对我来说很奇怪标签标题也被修改了。这发生在我测试过的所有浏览器（IE6+、FF、Chrome、Safari）中。

他们无论如何要改变或控制这种行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T00:14:00.297

离开 Bergi 的评论，我仔细研究了 History.js 和 BigShelf SPA 示例中提供的包装器。

结果是 History.js 提供了一个方法，该方法接受应该显示哪个标题的参数`history.pushState(params, title, url)`。SPA 中的包装器将 url 作为标题传递。我将其更改为我的应用程序的名称并解决了“问题”。

# ssis - 有人可以帮助解释一些新的 SSIS 2012 属性吗？

> ID：11571002
> 
> 赞同：3
> 
> 时间：2012-07-19T23:55:35.910
> 
> 标签：ssis, bids

**作为学习 SSIS 的人， SSIS 2012**中有一些我找不到任何文档/解释的新属性。因此，我希望有人可以解释它们：

在维护清理任务中，BIDS 属性网格有一个 DeleteFromAllBricks 属性。该属性控制什么？

在备份数据库任务中，我看到了 CopyOnlyBackup、IgnoreReplicaType 和 UseExpiration（2008 年也存在）属性。这些属性有什么用？

在我的一个 dtsx 文件中，有一个带有 SkipUnsupported 属性的重建索引任务。SkipUnsupported 有什么作用？

请注意，这些属性都没有在 BIDS 中设置其描述字段，并且在在线搜索时，我找不到任何定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T03:00:04.953

我 ping 了一些 MS SQL 技术作者以获取这些信息，如果我收到他们的消息，我会更新。正如你所说，关于这些主题的 BOL 并不多。

*   [DeleteFromAllBricks](http://technet.microsoft.com/en-us/subscriptions/microsoft.sqlserver.management.databasemaintenance.dbmaintenancefilecleanuptask.deletefromallbricks)

*   [CopyOnlyBackup](http://msdn.microsoft.com/en-us/library/ms191495.aspx)不会破坏您的备份链。这个我很熟悉——我们所有的备份都由一个自动备份产品处理。周末完全备份，日间差异。如果我要求 DBA 在执行生产实施之前进行备份，如果他们进行了“常规”备份，那会重置备份表中的一些位，这将导致备份工具认为发生了某些事情并且*必须*采取完全备份以达到安全点。如果您指定仅副本备份，它不会破坏该日志链，并且存储人员不会咀嚼我们；）

*   [IgnoreReplicaType](http://technet.microsoft.com/en-us/subscriptions/microsoft.sqlserver.management.databasemaintenance.dbmaintenancebackuptask.ignorereplicatype)我认为它与[副本类型有关](http://msdn.microsoft.com/en-us/library/ms152531.aspx)

*   [到期日期](http://msdn.microsoft.com/en-us/library/ms188697.aspx)在备份上设置[到期](http://msdn.microsoft.com/en-us/library/ms178062)日期可防止其在到期前被覆盖。

*   跳过不支持的功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T01:19:07.307

以下是 SkipUnsupported 属性的说明。

索引可以在线或离线重建。重建需要离线（不支持在线重建）的表非聚集索引时，如果未选择任务在线重建选项或跳过不支持的索引选项（SkipUnspported属性），则离线重建索引。否则，不会针对此特定场景重建整个表索引。

# iphone - 按下单元格时调出键盘？

> ID：11571005
> 
> 赞同：1
> 
> 时间：2012-07-19T23:55:53.127
> 
> 标签：iphone, objective-c, ios, xcode

当我单击 UITableView 中的单元格时，有没有办法调出键盘？

我试图找到某种方法将单元的一个出口连接到已声明的 IBAction，但这似乎不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T00:30:11.863

是的，有一种方法可以做到这一点，但它有点复杂：

*   你把一个 UITextField 放在你的单元格中，但是把它放在视野之外

*   当您希望键盘出现时，要编辑单元格中的其他一些 UITextField，请将单元格中的 UITextField 设为屏幕外的 firstResponder

*   现在棘手的部分 - 随着委托消息开始流动 - 你基本上设置了你想要编辑第一响应者的 UITextField

*   发生这种情况时，您会收到一连串的委托消息，因此您需要做一些工作

最后，您要编辑的 UITextField 是第一响应者。所以，你可以做你想做的事，但你必须花一些时间来解决它。

# php - Kohana（或直接 PHP）OAuth2 实现

> ID：11571010
> 
> 赞同：1
> 
> 时间：2012-07-19T23:56:28.217
> 
> 标签：php, oauth-2.0, kohana

有没有人有实现 OAuth2 的非常清晰的分步指南（最好在 Kohana 3.2 中，但我会尽我所能）？

我希望它包含我需要创建的表等。（在不知道表结构的情况下很难实现某些东西。）

更新：

我完全忘了提到我正在寻找一个 Provider 实现！谢谢！（对不起）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T00:01:58.163

可以尝试分析一下[oauth2-php](http://code.google.com/p/oauth2-php/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T11:11:14.490

也许这有帮助：[https](https://github.com/kohana-world) ://github.com/kohana-world （查看[https://github.com/kohana-world/kw-accounts](https://github.com/kohana-world/kw-accounts)和[https://github.com/kohana-world/kw-auth](https://github.com/kohana-world/kw-auth)模块）。不幸的是，目前我们没有时间进行开发:(

PS。另外我在 Kohana 中写了一篇关于 OAuth2 的文章，您可以尝试从俄语翻译：[http ://translate.google.com/translate?hl=ru&ie=UTF8&prev=_t&sl=ru&tl=en&u=http://brotkin .ru/2011/05/24/oauth-v2/](http://translate.google.com/translate?hl=ru&ie=UTF8&prev=_t&sl=ru&tl=en&u=http://brotkin.ru/2011/05/24/oauth-v2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T08:08:19.943

似乎，经过数小时的研究，这个（http://edin.no-ip.com/comment/348）是我能得到的最接近的。它使@mrok 的建议更进一步。（PS - 谢谢，@mrok）

# javascript - How to Detect "prevent this page from creating additional dialogs"

> ID：11571015
> 
> 赞同：19
> 
> 时间：2012-07-19T23:57:05.277
> 
> 标签：javascript, firefox, google-chrome

### QUESTION

How can I detect if a user has checked the box, "prevent this page from creating additional dialogs"?

### WHY It's a problem

If the user has prevented the appearance of confirm boxes, the function `confirm('foobar')` always returns false.

If the user cannot see my confirmation dialogue boxes `confirm('Are you sure?')`, then the user can never perform the action.

### CONTEXT

So, I use the code like `if(confirm('are you sure?')){ //stuff... }`. So an auto-response of `false` from the browser will prevent the user from ever doing `stuff`. But, if there was a way to detect that the user has checked the box, then I could execute the action automatically.

I think that if the user has disabled the dialogues, then the function should either throw an error, or return true. The function is meant to confirm an action that the user has requested.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-20T00:07:07.613

As far as I know, this is not possible to do in any clean way as it's a browser feature, and if the browser doesn't let you know then you can't know.

However, what you could do is write a wrapper around confirm() that times the response time. If it is too fast to be human then the prompt was very probably suppressed and it would return true instead of false. You could make it more robust by running confirm() several times as long as it returns false so the probability of it being an über-fast user is very low.

The wrapper would be something like this:

```
function myConfirm(message){
    var start = new Date().getTime();
    var result = confirm(message);
    var dt = new Date().getTime() - start;
    // dt < 50ms means probable computer
    // the quickest I could get while expecting the popup was 100ms
    // slowest I got from computer suppression was 20ms
    for(var i=0; i < 10 && !result && dt < 50; i++){
        start = new Date().getTime();
        result = confirm(message);
        dt = new Date().getTime() - start;
    }
    if(dt < 50)
       return true;
    return result;
} 
```

PS: if you want a practical solution and not this hack, Jerzy Zawadzki's suggestion of using a library to do confirmation dialogs is probably the best way to go.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T00:10:17.847

I think you cannot change it - it's browser feature.

My first idea if you need workaround would be to change code from using system `confirm` to some js library alert (from e.g. jQuery UI)

# shell - shell 脚本中的“异常处理”

> ID：11571019
> 
> 赞同：4
> 
> 时间：2012-07-19T23:57:30.823
> 
> 标签：shell, zsh

我知道您可以在 shell 脚本中使用快捷方式布尔运算符来执行某种异常处理，如下所示：

```
my_first_command && my_second_command && my_third_command 
```

但是随着您想要链接的命令数量的增加，这很快变得不可读和不可维护。如果我正在编写脚本（或 shell 函数），是否有一种好方法可以在第一个非零返回代码上停止执行脚本或函数，而不用写一大行？

（我使用`zsh`，所以如果有只适用于`zsh`我的答案。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T00:00:18.613

该`-e`选项执行此操作：

```
 ERR_EXIT (-e, ksh: -e)
          If a command has a non-zero exit status, execute the ZERR  trap,
          if set, and exit.  This is disabled while running initialization
          scripts. 
```

你应该可以把它放在 shebang 线上，比如：

```
#!/usr/bin/zsh -e 
```

大多数 shell 都有此选项，通常称为`-e`.

# clojure - 如何在clojure中组合序列？

> ID：11571023
> 
> 赞同：9
> 
> 时间：2012-07-19T23:58:38.543
> 
> 标签：clojure

我有以下序列

```
(def a [1 2 3 4])
(def b [10 20 30 40])
(def c [100 200 300 400]) 
```

我想逐个元素地组合序列：

```
(...  + a b c) 
```

给我：

```
[111 222 333 444] 
```

是否有可用的标准功能来做到这一点？或者，什么是一种好的惯用方式？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-20T00:52:34.517

如果您使用 clojure-1.4.0 或更高版本，您可以使用`mapv`：

```
user> (mapv + [1 2 3 4] [10 20 30 40] [100 200 300 400])
[111 222 333 444] 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-20T00:02:00.170

您正在寻找的功能是[`map`](http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/map).

```
(map + [1 2 3 4] [10 20 30 40] [100 200 300 400])
;=> (111 222 333 444) 
```

请注意，它`map`返回一个惰性序列，而不是您的示例中显示的向量。[`into`](http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/into)但是您可以使用该函数将惰性序列倒入空向量中。

```
(into [] (map + [1 2 3 4] [10 20 30 40] [100 200 300 400]))
;=> [111 222 333 444] 
```

此外，（为了完整性，正如另一个答案中所述）在 Clojure 1.4.0+ 中，您可以使用`mapv`（具有与 相同的参数`map`）以获得向量结果。

# xml - XMLReader 跳过每个备用节点

> ID：11571025
> 
> 赞同：0
> 
> 时间：2012-07-19T23:59:02.327
> 
> 标签：xml, vb.net, xmlreader, xmlwriter

我有这个非常简单的和平代码和一个简单的 XML 文件。我正在读取每个节点并将其写入另一个文件，并且真正让 xml 阅读器跳过每个备用记​​录节点。它从以下文件写入第 1 和第 3 个节点！任何帮助表示赞赏。

```
Do While (reader.Read())
    If (reader.NodeType = XmlNodeType.Element And (reader.LocalName = "record" Or reader.LocalName = "record1")) Then
        writer.WriteNode(reader, True)
        writer.Flush()
    End If
Loop 
```

-

```
<?xml version="1.0" encoding="UTF-8"?>
<records xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="world-check.xsd">
    <record>
        <foo>
            <bar>wtf3</bar>
            <bar>wtf4</bar>
        </foo>
    </record>
    <record>
        <foo>
            <bar>wtf4</bar>
            <bar>wtf5</bar>
        </foo>
    </record>
</records> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T00:39:18.107

原谅我的 VB，我几乎是纯粹的 C# 开发人员。

XmlWriter.WriteNode() 为您写入的节点在 EndElement 节点之后执行 XmlReader.Read()，因此当您回到 While 循环的开头时，您会读取下一个 Record 节点。

试试这个：

```
Dim reader As XmlTextReader = New XmlTextReader("1.xml")
Dim writer As XmlTextWriter = New XmlTextWriter("2.xml", Nothing)
reader.WhitespaceHandling = WhitespaceHandling.None

Dim reading as boolean = reader.Read()

Do While (reading)    
    If (reader.NodeType = XmlNodeType.Element And (reader.LocalName = "record" Or reader.LocalName = "record1")) Then
        writer.WriteNode(reader, True)
        writer.Flush()
    Else
        reading = reader.Read()
    End If
Loop 
```

# ios - iOS 和其他平板电脑上的 SVG 性能状态？

> ID：11571026
> 
> 赞同：38
> 
> 时间：2012-07-19T23:59:07.347
> 
> 标签：ios, performance, svg, d3.js

决定使用 D3.js 和 SVG 进行可视化后，现在看起来 SVG 可以在桌面浏览器或本机 shell 中正常工作，但我真的对 iOS 移动平台上性能速度的下降感到困惑。

根据以下测试，现在看起来 SVG 性能越来越好，并且与 Canvas 速度相差不远，这是个好消息：

*   [http://bl.ocks.org/2647924](http://bl.ocks.org/2647924)
*   [http://bl.ocks.org/2647922](http://bl.ocks.org/2647922)

坏消息是，如果您在新 iPad 上的 Safari 浏览器中运行这些测试，SVG 和 Canvas 的速度都会下降很多。可怕的消息是，如果您在 iPad 的新 Chrome 浏览器中运行这些测试，速度会下降得更多。

我读到谷歌被迫使用 Apple 的 Nitro JavaScript 引擎没有加速的 UIWebview。我还读到 Apple 正在推动 HTML5，但演示只能在他们自己的 Safari 浏览器中运行。

无论如何，这里有什么问题？我的应用程序的最佳目标是移动设备，但即使有像 D3.js 这样出色的 API 和像 SVG 这样的 HTML5 标准，性能也受到了限制，这仅仅是因为 Apple 想要为自己的议程保持进展吗？反正在我看来就是这样。我不确定这些测试在 Android 上是什么样子的？很高兴知道。如果测试结果是肯定的，也许我会摆脱 iPad 并直接使用 Android。

最重要的是，由于这些速度问题，我只是不确定使用 HTML5 技术制作我的应用程序是否可行？我也对学习 Objective-C 没有兴趣，因为未来将转向 HTML5。我相信网络及其标准，但看起来它们被阻止了。我很想知道这个困境的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-31T00:35:07.963

iOS7 使用 JavaScript 动画 SVG 的性能非常差——尽管静态 SVG 绘图要快得多。我们写了[一篇关于 iOS7 版本性能的博客](http://www.sencha.com/blog/the-html5-scorecard-the-good-the-bad-and-the-ugly-in-ios7/)，您可以查看更多血腥细节。

更新：iOS7.1 修复了 javascript 动画性能问题。恢复到 50 fps

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T16:23:28.107

我发现我的第一代 iPad 上的 d3.js/SVG 比在桌面浏览器（FF/Chrome/IE 9+）上运行相同的应用程序要慢得多。

我写了我在这里尝试的各种改进：http: [//hivemindmap.blogspot.co.uk/2013/01/html5-and-interactive-graphs.html](http://hivemindmap.blogspot.co.uk/2013/01/html5-and-interactive-graphs.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T14:19:41.740

移动设备上的性能通常低于桌面套件。一般来说，它们的硬件功能不那么强大（它更倾向于低功耗而不是完全的速度），而且它们的 RAM 和存储空间要少得多。我桌面上的 Chrome 有多个处理器、8GB RAM 和一个功能强大的 GPU。在我的 iPad 上，它没有任何地方接近那种功率水平。

~~第三方 iOS 应用程序（包括 Chrome）不能使用 Nitro，这是正确的。我相信这是因为 Nitro 能够将内存标记为可执行，并且（出于安全原因）不信任 3rd 方应用程序这样做。大多数 HTML5 内容都可以在 iOS 上的任何浏览器中运行（Opera Mini 可能除外）。画布和 SVG 动画会比 Safari 慢，因为它们都是由 Javascript 驱动的——再次，缺乏对 Nitro 的访问阻碍了它们。~~这不再是真的：从 iOS 8 开始，第三方应用程序现在可以使用*可以*访问与 Safari 相同的高速 javascript 引擎的`WKWebView`框架。

 *原生代码通常会更快，因为它更接近硬件，直接访问显示 API，而不是通过 Web 堆栈。

解决方案通常是简化一切。就像原生游戏开发者必须大幅降低他们的 3D 游戏的复杂性才能让它们在 iOS 设备上运行一样，Web 开发者也必须降低他们的 SVG 和画布应用程序的复杂性。一般来说，页面上飞来飞去的东西越少意味着性能越高。

您可以做很多技巧，并围绕该主题进行大量阅读。阅读[http://www.html5rocks.com/en/tutorials/canvas/performance/](http://www.html5rocks.com/en/tutorials/canvas/performance/)、[http://www.html5gamedevs.com/tag/performance/](http://www.html5gamedevs.com/tag/performance/)以及 Google 的其他内容。就我个人而言，我会建立一个概念证明并在完全放弃这个想法之前对其进行测试:)*

# sql-server-2008 - 并行联合... SQL Server 会这样做吗？

> ID：11571036
> 
> 赞同：3
> 
> 时间：2012-07-20T00:00:52.550
> 
> 标签：sql-server-2008, parallel-processing, union

如果我想合并位于不同驱动器上的多个表中的数据，SQL 会并行提取数据吗？有没有我应该知道的相关设置或提示？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T00:25:38.537

UNION 应该并行运行，至少从 SQL Server 2005 开始。

如果表位于不同的驱动器或相同的驱动器上，则没有区别。在现代世界中，磁盘可以是虚拟的，也可以具有多个读取头。一个驱动器和多个驱动器之间的区别越来越不相关。

如果您将 MAXDOP 设置为 1，那么将只有一个线程。

请注意，UNION 将比 UNION ALL 慢得多。

布兰登。. . 让我在这里回应。您似乎在考虑旧式架构。这些肯定还存在。但是，现代磁盘具有多个读取头和多个盘片。通常，返回数据的问题涉及控制器级别的带宽，而不是读取速度。您还具有多个级别的缓存和预读（有时在文件系统和数据库级别）。您通常最好让数据库引擎管理这种复杂性。

例如，我现在正在使用的机器实际上是一个虚拟机。我使用的磁盘是 EMC 盒子上的一个分区。处理器是一个大盒子中的一组处理器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T00:10:46.343

我对 SQL Server 中的多线程的理解是，我们应该把它留给查询优化器——查询将在优化时并行运行。

您可以通过使用提示来*限制线程数（请参阅*[在 SQL Server 中使用 OPTION(MAXDOP 1) 的目的是什么？](https://stackoverflow.com/questions/163917/optionmaxdop-1-in-sql-server)）。`MAXDOP`

默认行为是在可能和最佳情况下并行运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T00:19:15.330

我不会指望仅根据您的联合查询的顺序以特定顺序返回的数据。

对我来说，当我必须做类似的事情时，我总是将整个查询包装为子选择，仅用于处理排序。像下面这样

select pk_id, value from (select pk_id, value from table1 union select pk_id, value from table2) order by PK_id, value

这样你就不会对你得到的东西感到惊讶。

# maven - 如何停止将程序集构建的 id 附加到 maven-assembly-plugin 中的上下文根？

> ID：11571037
> 
> 赞同：2
> 
> 时间：2012-07-20T00:00:52.900
> 
> 标签：maven, maven-assembly-plugin

我有一个 maven 构建，它使用[maven-assembly-plugin](http://maven.apache.org/plugins/maven-assembly-plugin/)来创建部署战争。不过，使用 maven-assembly-plugin 会将[程序集 ID](http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html)添加到我的战争的上下文根中，这是我不想要的。

我试过了：

```
<appendAssemblyId>false</appendAssemblyId> 
```

在`<configuration>`插件的块中，但仅排除将 id 附加到最终名称（输出文件），它不会影响上下文根。

有没有办法阻止 maven-assembly-plugin 将 ID 附加到战争的上下文根参数？

**编辑：**

程序集文件用于构建 webapp 的 portlet 版本。在程序集 XML 文件中，有这一行：

```
<id>portlet</id> 
```

非 portlet webapp`portal`的上下文根是 ，因此从程序集构建的 portlet 的上下文根最终是`portal-portlet`。

我需要两个构建的上下文根相同，因为我正在构建一个依赖于 MessageBroker 中的上下文根的 flex swf。我知道我可以通过编译两个单独的 swf 来做到这一点，但这会导致我出于各种原因不想进行 pom 更改。

# c++ - 文本迭代、汇编与 C++

> ID：11571039
> 
> 赞同：1
> 
> 时间：2012-07-20T00:01:01.510
> 
> 标签：c++, string, assembly, web, iteration

我正在制作一个程序，其中经常读取从网络接收到的文本块，以查找特定字符并相应地解析数据。我对 C++ 的熟练程度越来越高，并且可以很好地工作，但是，Assembly 会比

```
for(size_t len = 0;len != tstring.length();len++) {
    if(tstring[len] == ',')
        stuff();
} 
```

使用 cmp 和 jz/jnz 的内联汇编程序会更快吗？我不想浪费我的时间与 asm 合作，因为我可以说我使用了它，而是为了真正的速度目的。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T00:36:15.327

没门。您的循环是如此简单，优化器失去推理代码能力的成本将*远*高于您可以获得的任何性能。这不是 SSE 内在函数或引导加载程序，而是一个微不足道的循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T02:22:11.757

逐个检查字符并不是最快的事情。也许你应该尝试这样的事情，看看它是否更快。

```
string s("xxx,xxxxx,x,xxxx");
string::size_type pos = s.find(',');  
while(pos != string::npos){
    do_stuff(pos);
    pos = s.find(',', pos+1);       
} 
```

循环的每次迭代都会为您提供“，”字符的下一个位置，因此程序只需要几个循环即可完成工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T11:54:53.323

使用“plain old” `jz`/的内联汇编例程`jnz`不太可能比您拥有的更快；也就是说，您的代码中有一些效率低下的地方：

*   您`tstring.length()`每次循环迭代检索一次；这是不必要的。
*   您正在使用随机索引，`tstring[len]`这可能是比使用前向迭代器更昂贵的操作。
*   你`stuff()`在循环期间打电话；取决于具体是做什么的，让循环首先在字符串中构建一个位置列表可能会更快（这样扫描的字符串以及扫描代码保持高速缓存并且不会被任何操作驱逐`stuff()`），并且只有在之后迭代这些结果。

[`strchr()`](http://en.cppreference.com/w/cpp/string/byte/strchr)对于这种扫描，已经有一个可能的低级优化标准库函数可用。C++ STL[`std::string::find()`](http://en.cppreference.com/w/cpp/string/basic_string/find)也可能已针对该目的进行了优化（和/或可能用于`strchr()`专业化`char`）。

特别是，`strchr()`具有 SSE2（使用`pcmpeqb`, `maskmov...`and `bsf`）或 SSE4.2（使用字符串 op `pcmpistri`）实现；有关执行此操作的示例/实际 SSE 代码，请检查例如[`strchr()`GNU libc](http://sourceware.org/git/?p=glibc.git;a=blob;f=sysdeps/x86_64/multiarch/strchr.S)（在 Linux 上使用）。[另请参阅此处](http://www.strchr.com/strcmp_and_strlen_using_sse_4.2)的参考资料和评论（适当命名的网站...）。

我的建议：检查您的库实现/文档，和/或为您的程序实际生成的汇编代码。您很可能已经在使用快速代码......或者如果您从手工开发的逐个字符的简单搜索切换到仅使用`std::string::find()`or `strchr()`。
如果这是超速度关键，那么已知/测试实现（观察许可）使用的*内联*汇编代码`strchr()`将消除函数调用并获得几个周期。取决于您的要求...代码，基准测试，变化，再次基准测试，...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T00:23:31.843

> 使用 cmp 和 jz/jnz 的内联汇编程序会更快吗？

也许，也许不是。这取决于`stuff()`做什么，类型和范围`tstring`是什么，以及你的程序集是什么样的。

首先，测量可维护的 C++ 代码的速度。只有当这个循环支配了你的程序的速度时，你才应该考虑重写它。

如果您选择重写它，请保持两种实现都可用，并进行比较测量。仅在速度更快且速度提高很重要的情况下才使用不易维护的版本。此外，由于您拥有原始版本，未来的读者即使不太了解 asm，也将能够理解您的意图。

# android - Android onKeyDown 没有捕捉到 Dpad 中心并输入按键

> ID：11571040
> 
> 赞同：5
> 
> 时间：2012-07-20T00:01:01.577
> 
> 标签：android, events, user-interface, handler, onkeydown

在我的 onKeyDown 基本活动中进行简单的覆盖，我能够捕获除 enter 和 dpad 中心按钮之外的所有按键（通过断点确定）。我不知道为什么 - 任何人都可以了解情况吗？

编辑：快速更新 - 它确实捕获 Dpad 中心并输入键长按，但仍然不是正常按下。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-07-26T08:27:07.897

我知道这个问题已经很老了，但是如果一些绝望的编码员迷路了，我会发布我的答案。

我的 USB 键盘也有类似的问题。当除 EditText 框之外的任何其他内容被聚焦时，onKeyUp 或 onKeyDown 永远不会捕获 ENTER 键。

如果您使用 dispatchKeyEvent() 您会在 KeyEvent 到达窗口之前获得它，在我的情况下，我肯定会获得 ENTER 键。但要小心，该事件被调用了两次，一次是按键按下，一次是按键按下。

这里有一个示例代码：

```
@Override
public boolean dispatchKeyEvent(KeyEvent event) {

    System.out.println(event.getAction() + " " + event.getKeyCode() + " - " + (char) event.getUnicodeChar());

    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T17:22:45.323

你读过[文档](http://developer.android.com/reference/android/view/View.html#onKeyDown%28int,%20android.view.KeyEvent%29)吗？

软件键盘中的按键通常不会触发此侦听器，尽管在某些情况下可能会选择这样做。**不要依赖它来捕捉软件按键。**

此外，您捕获密钥的方式非常模糊。您甚至没有使用以下命令检查发送给您的 keyCode：

`@Override public boolean onKeyDown(int keyCode, KeyEvent event) { return false; }`

您可以从视图处理 onKey：

```
public boolean onKey(View v, int keyCode, KeyEvent event) {
    switch (keyCode) {
        case KeyEvent.KEYCODE_ENTER:
            /* This is a sample for handling the Enter button */
            return true;
    }
    return false;
} 
```

记得实现 OnKeyListener 并设置你的监听器

```
viewname.setOnKeyListener(this); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-12-06T09:12:15.020

似乎 DPAD 键正在作用于此处已告知的重点项目：

[https://groups.google.com/forum/#!topic/android-developers/HsILBlpsK7I](https://groups.google.com/forum/#!topic/android-developers/HsILBlpsK7I)

虽然我自己没有尝试过，但也许您可以将焦点设置到您的视图对象并在其上附加一个关键侦听器函数。

**更新**：我的同事也有同样的问题，这个建议对她有用。:) 当列表视图聚焦时，她能够从 DPAD 捕获关键代码。

# django - static_url 无法正确解析，django 1.4

> ID：11571041
> 
> 赞同：1
> 
> 时间：2012-07-20T00:01:03.397
> 
> 标签：django, django-contrib

我有一个已安装的应用程序（django_tables2），它有自己的静态文件夹，但在使用`{{ STATIC_URL }}`. 阅读 django 文档后，如果我运行

```
>>> python manage.py findstatic django_tables2/themes/paleblue/css/screen.css 
```

findstatic 确实在站点包的应用程序目录中正确定位了一个匹配文件。

我的相关页面模板包含：

```
{% block extrahead %}
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}django_tables2/themes/paleblue/css/screen.css" />
{% endblock %} 
```

并且相关块存在于父模板中。

此页面提供于`http://127.0.0.1:8000/todo/product_groups/Analytical/`。但是，在运行开发服务器时，我得到一个 404 的 css 作为它指向错误的位置：

```
GET /todo product_groups/Analytical/django_tables2/themes/paleblue/css/screen.css HTTP/1.1 404 2942 
```

发生了什么，为什么服务器不遵循`{{ STATIC_URL }}`与 findstatic 相同的方式？在重新设计一些 url 之前，我有同样的 static_url css 工作，但似乎无法使其在新设计中工作。任何帮助或见解将不胜感激。

*来自 settings.py 的相关片段：*

```
MEDIA_URL = '/media/'
STATIC_ROOT = 'C:/Users/riedldar/Documents/Code/Arclin/static/'
STATIC_URL = '/static/'
STATICFILES_DIRS = (
    "C:/users/riedldar/Documents/Code/Arclin/Arclin/static",
)
INSTALLED_APPS = ( 
....
'django.contrib.staticfiles',)

# Required for tables2
TEMPLATE_CONTEXT_PROCESSORS = (
"django.contrib.auth.context_processors.auth",
"django.core.context_processors.debug",
"django.core.context_processors.i18n",
"django.core.context_processors.media",
"django.core.context_processors.static",
"django.contrib.messages.context_processors.messages",
"django.core.context_processors.request",
)

STATICFILES_FINDERS = (
'django.contrib.staticfiles.finders.FileSystemFinder',
'django.contrib.staticfiles.finders.AppDirectoriesFinder',
# 'django.contrib.staticfiles.finders.DefaultStorageFinder',
) 
```

*来自 urls.py：*

```
from django.conf.urls import patterns, include, url
# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()
urlpatterns = patterns('',
# Examples:
# url(r'^$', 'Arclin.views.home', name='home'),
# url(r'^Arclin/', include('Arclin.foo.urls')),

# Uncomment the admin/doc line below to enable admin documentation:
url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

# Uncomment the next line to enable the admin:
url(r'^admin/', include(admin.site.urls)),

# Todo/Task manager
url(r'^todo/', include('todo.urls')),

# Login/out
url(r'^login/$', 'django.contrib.auth.views.login'),
url(r'^logout/$', 'Arclin.views.logout_page'),

# User Homepage
url(r'^$', 'todo.views.user_home'),

# 
) 
```

*和 todo\urls.py*

```
from django.conf.urls.defaults import *
#from models import ProductGroup

urlpatterns = patterns('',
    (r'^product_groups/([\w-]+)/$', 'todo.views.items_by_product_group'),
    url(r'^task/(?P<task_id>\d{1,6})$', 'todo.views.view_task',  name='todo_task_detail')
    ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T01:53:43.460

是使用[RequestContext](https://docs.djangoproject.com/en/1.4/ref/templates/api/#django.template.RequestContext)`todo.views.items_by_product_group`呈现您的模板，还是包含它的[快捷方式或通用视图之一？](https://docs.djangoproject.com/en/1.4/topics/http/shortcuts/)如果没有，您的模板上下文处理器将不会应用于将变量添加到您的页面上下文中，从而导致您描述的行为。`STATIC_URL`

顺便说一句，Django 1.4 引入了一个新的[`{% static '…' %}`](https://docs.djangoproject.com/en/1.4/howto/static-files/#with-a-template-tag)模板标签，它允许您在不需要`STATIC_URL`上下文的情况下引用静态文件。使用它也应该可以防止这个问题（但您可能仍想调查 RequestContext 是否丢失或为什么丢失：这通常是一个错误）。

# android - Android - 在以前没有的地方抛出致命异常

> ID：11571042
> 
> 赞同：1
> 
> 时间：2012-07-20T00:01:04.690
> 
> 标签：android, progress-bar, classcastexception

代码末尾的解释

爪哇：

```
void GetNextQuestion()
{
    QuestNum++;
    /// ERROR ON VERY NEXT LINE
    ProgressBar pbar = (ProgressBar)this.findViewById(R.id.progressBar2);
    TextView tvSection = (TextView)this.findViewById(R.id.section);
    TextView tvSubsection = (TextView)this.findViewById(R.id.subsection);
    TextView tvQuest = (TextView)this.findViewById(R.id.quest);
    if(QuestNum > 0 && QuestNum < 180)
    {
        tvSection.setText(R.string.s1);
        tvSubsection.setText(R.string.ss1);
        spin.setSecondaryProgress((int)((QuestNum/180) * 1000));
    }
    if(QuestNum > 179 && QuestNum < 285)
    {
        tvSection.setText(R.string.s2);
        tvSubsection.setText(R.string.ss2);         
    }
} 
```

XML:

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    xmlns:app="http://schemas.android.com/apk/lib/com.google.ads">

 <RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="0dp" 
    android:layout_weight="1">

<ImageView
    android:id="@+id/icon"
    android:layout_width="57dp"
    android:layout_height="54dp"
    android:src="@drawable/devil" />

<TextView
    android:id="@+id/section"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/icon"
    android:text="@string/nunca"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<ProgressBar
    android:id="@+id/progressBar1"
    style="?android:attr/progressBarStyleLarge"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true" 
    android:visibility="invisible" />

<TextView
    android:id="@+id/subsection"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/section"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/icon"
    android:text="@string/nunca"
    android:textAppearance="?android:attr/textAppearanceSmall" />

<ImageView
    android:id="@+id/help"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:src="@drawable/helpico" />

<ImageView
    android:id="@+id/exit"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/subsection"
    android:layout_alignParentRight="true"
    android:src="@drawable/exitico" />

<TextView
    android:id="@+id/haveyou"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/subsection"
    android:layout_marginTop="18dp"
    android:text="@string/nunca"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/quest"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_centerVertical="true"
    android:text="@string/load"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<Button
    android:id="@+id/butyes"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_above="@+id/progressBar2"
    android:layout_marginBottom="30dp"
    android:text="Yes" />

    <Button
    android:id="@+id/butno"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_above="@+id/progressBar2"
    android:layout_marginBottom="30dp"
    android:text="No" />

    <ProgressBar
        android:id="@+id/progressBar2"
        style="?android:attr/progressBarStyleHorizontal"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:max="1000"
        android:progress="0"/>

</RelativeLayout>
<com.google.ads.AdView
   android:id="@+id/adView"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   app:adSize="BANNER"
   app:adUnitId="a14ffb06b21e68e"
   app:loadAdOnCreate="true" >
</com.google.ads.AdView>
</LinearLayout> 
```

错误：

```
E/AndroidRuntime(20649): FATAL EXCEPTION: main
E/AndroidRuntime(20649): java.lang.ClassCastException: android.widget.Button
at com.ndai.ptest.a1000test.GetNextQuestion(a1000test.java:146)
at com.ndai.ptest.a1000test$QuestAnsTask.onPostExecute(a1000test.java:3319)
at com.ndai.ptest.a1000test$QuestAnsTask.onPostExecute(a1000test.java:1)
at android.os.AsyncTask.finish(AsyncTask.java:417)
at android.os.AsyncTask.access$300(AsyncTask.java:127)
at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4627)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
at dalvik.system.NativeStart.main(Native Method) 
```

这是我不明白的...它给了我一个铸造错误...我正在铸造一个进度条tp一个进度条...我只是错过了一个错字或什么...我只需要一组额外的盯着这个

编辑：

但是，直到我重新排列 xml 上的内容后，我才收到此错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T00:10:09.167

我修好了它

我正在阅读其他人在不使用 GUI 更改布局时如何遇到同样的问题......所以我遵循了这些步骤

1.  修复项目（右键单击项目，获得 android 工具，然后是唯一显示修复的选项）
2.  删除 R.java
3.  再次修复项目

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T00:15:00.530

发生的事情是eclipse（或者你使用的任何东西）不想用正确的数据更新R文件，这意味着你的进度条的id或者它正在投射的东西与其中一个按钮混合在一起，对你来说不错的小虫子。

# backbone.js - 如何查看一个backbone.js 模型的所有属性？

> ID：11571043
> 
> 赞同：0
> 
> 时间：2012-07-20T00:01:17.080
> 
> 标签：backbone.js

有没有一种简单的方法可以查看我可以使用@model.get() 访问的backbone.js 模型的所有属性？`alert @model.attributes`仅显示 [object Object]。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T00:09:41.420

要仅获取属性的键，请尝试：

```
Object.keys(@model.attributes) 
```

# javascript - 如何删除之间的值标签？

> ID：11571045
> 
> 赞同：-2
> 
> 时间：2012-07-20T00:01:25.353
> 
> 标签：javascript, jquery, html

我正在使用`JQuery`以下方法创建复选框：

```
$('<input type="checkbox" ' + 'id=' + (i+1) + '>' + (i+1) + '</input><br/>') 
```

然后，只要用户选中该框，它就会被删除：

```
if (this.checked) {
    $(this).remove();
} 
```

但是，输入框被删除，但数字（id）保留在页面上，沿着`<br/>`标签，所以我可以`#i`在 HTML 页面上看到那里。我也想删除它们。因此，为了使我的问题尽可能完整，这里是如何`HTML`放置的：

```
<input id="1" type="checkbox">
1
<br> 
```

有人可以告诉我如何从页面中删除`#i`和删除吗？`<br/>`谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T00:06:09.767

正如其他答案所述 - 输入没有结束标签

您仍然需要删除所有`id`和`<br />`。`.next()`您可以在 jquery中找到具有功能的那些。你应该把你的 id 放在`<label>`or中`<span>`。然后。例如：

```
$(this).next('label').remove();
$(this).next('br').remove();
$(this).remove(); 
```

代码可以写得更短，但你可以看看它是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T00:03:31.970

那是因为`input`标签没有结束标签并`remove`忽略 之后的所有内容`>`，请更改此：

```
$('<input type="checkbox" ' + 'id=' + (i+1) + '>' + (i+1) + '</input><br/>') 
```

至：

```
$('<input type="checkbox" ' + 'id=' + (i+1) + 'value="' + (i+1) +'"><label>'+ (i+1) +'</label>') 
```

```
$(this).next('label').andSelf().remove(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T00:19:24.440

[`<input>`文本框中](https://developer.mozilla.org/en/HTML/Element/Input)的文本不是用 textnode 设置的（比如 textareas），而是用`value`属性设置的。（对困惑感到抱歉）

然而，你想要一个复选框。最好，为它创建一个`<label>`，而不是一个文本节点加上一个`<br />`（jQuery 无法处理）：

```
<div class="inputcell">
    <input type="checkbox" id="check5">
    <label for="check5">5</label>
</div> 
```

使用这个 DOM，您可以通过`$("#check5").parent().remove()`. 请注意，单个数字不是有效的元素 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T00:03:44.153

输入标签没有结束标签，要创建一个复选框，您只需要以下内容：

```
$('<input type="checkbox" ' + 'id=' + (i+1) + '>'); 
```

如果您还想为该复选框使用标签，请创建适当的`label`或任何其他元素，因为您不能将 closign 标签用于输入并在它们之间放置文本

# mysql - 如何选择 SQL 查询范围内的项目？

> ID：11571048
> 
> 赞同：0
> 
> 时间：2012-07-20T00:01:48.653
> 
> 标签：mysql, sql

我的数据库在 MySQL 中。

假设我有下表：

```
id         number
1          45
2          25
3          66
4          43
......
......
......
30         54
31         21 
```

等等……等等。

我想要这样的查询：

select * from myTable where number = 25

但我还想再包括 2 个项目，一个在它上面，一个在它下面（基于 ID）。

我的查询的结果集将出现以下结果集：1、2、3。

如果我选择了数字 66，那么结果集将包括 2、3、4\. 等。

这个想法是通过说，嘿，我想要任何 ID 等于 1 减去这个查询的 id 以及一加这个查询的 id 的东西来确定查询的范围。

我希望这是有道理的。

任何帮助都会很棒。

谢谢！

PS 这样做的目的是在日志中捕获事件，以便我可以看到某个事件发生之前和之后发生的事情

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T00:05:32.273

```
SELECT t.*
FROM 
    myTable AS t
  JOIN
    ( SELECT id
      FROM myTable
      WHERE number = 25
    ) AS my
  ON t.id BETWEEN my.id - 1 AND my.id + 1 ; 
```

请注意，如果您的 id 有间隙，这将**不会显示 3 行。**

此外，如果`number`您选择的（示例中为 25）出现多次（但 k 次），则结果将为 3*k 行。

* * *

如果列中存在空白，如预期的那样`id`，您可以使用以下命令：

```
SELECT *
FROM 
  ( SELECT t.*
    FROM 
        myTable AS t
      JOIN
        ( SELECT MIN(id) AS id
          FROM myTable
          WHERE number = 25
        ) AS my
      ON t.id <= my.id 
    ORDER BY t.id DESC 
      LIMIT 2
  ) AS a

UNION ALL

SELECT *
FROM
  ( SELECT t.*
    FROM 
        myTable AS t
      JOIN
        ( SELECT MIN(id) AS id
          FROM myTable
          WHERE number = 25
        ) AS my
      ON t.id > my.id 
    ORDER BY t.id ASC 
      LIMIT 1
  ) AS b ; 
```

* * *

`id`如果列中存在间隙并且`number`不是唯一的，因此参数 ( `25`) 可以出现多次（但说`k`多次），您可以有一个返回`3*k`行的查询（几乎所有时间）：

```
SELECT t.*
FROM 
    myTable AS t
  JOIN
    ( SELECT id
      FROM myTable
      WHERE number = 25
    ) AS ti
  ON t.id =
     ( SELECT tt.id
       FROM myTable AS tt
       WHERE tt.id < ti.id
       ORDER BY tt.id DESC
         LIMIT 1
     ) 
  OR t.id = ti.id
  OR t.id =
     ( SELECT tt.id
       FROM myTable AS tt
       WHERE tt.id > ti.id
       ORDER BY tt.id ASC
         LIMIT 1
     ) ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T00:11:32.947

不确定它是否会起作用（我记得对`ORDER BY`和`LIMIT`in `UNION`ed 查询有一些限制，但没有 mysql 实例来检查它），但是如果你尝试：

```
(SELECT t2.id
FROM myTable t1
INNER JOIN myTable t2 ON t2.id > t1.id
WHERE t1.number = 25
ORDER BY t2.id
LIMIT 1)

UNION ALL

(SELECT t2.id
FROM myTable t1
INNER JOIN myTable t2 ON t2.id < t1.id
WHERE t1.number = 25
ORDER BY t2.id DESC
LIMIT 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T00:04:35.720

```
SELECT * FROM table WHERE id IN (SELECT id, id-1, id+1 FROM table WHERE number=25) 
```

# c# - 什么是在闭包中捕获 TextReader 但仍正确处理它的好方法？

> ID：11571049
> 
> 赞同：3
> 
> 时间：2012-07-20T00:01:57.330
> 
> 标签：c#, .net, lambda, closures

这是一个简化的示例，用于隔离问题的目的。在我的实际场景中，GetColumnReader 返回的 ColumnReader 实际上会比仅仅 ReadLine 做更多的工作。

如果我运行下面的程序，当我尝试调用 Reader() 时会出错，因为 TextReader 已经被 using 语句处理掉了。

```
public class Play{
    delegate string ColumnReader();
    static ColumnReader GetColumnReader(string filename){
        using (TextReader reader = new StreamReader(filename)){
            var headers = reader.ReadLine();
            return () => reader.ReadLine();
        }
    }
    public static void Main(string[] args){
        var Reader = GetColumnReader("Input.tsv");
        Console.WriteLine(Reader());
    }

} 
```

或者，我可以删除“使用”并直接声明 TextReader，它会起作用，但现在我们不再保证 TextReader 最终会被关闭。

有没有办法在返回的 lambda 函数中添加“析构函数”，一旦 lambda 函数超出范围（不再引用），我就可以在其中处理 TextReader？

我也欢迎其他建议，但希望保留基本的闭包结构（即适合问题的范围）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T00:16:10.090

如果您不需要 lambda 表达式，则可以创建 enumerable 。

可能在 =>{} 内移动使用可能在实际代码中工作......仍然可能不是您想要的：

```
static ColumnReader GetColumnReader(string filename) {
   return () => {
     using (TextReader reader = new StreamReader(filename)) {
        var headers = reader.ReadLine();
        return reader.ReadLine();
     }
  };
} 
```

带有 IEnumerable 的版本（如果您总是完成迭代）：

```
 static IEnumerable<string> GetColumnReader(string filename) {
   using (TextReader reader = new StreamReader("aa")) {
     var headers = reader.ReadLine();
     yield return reader.ReadLine();
   }
 } 
```

如果要支持迭代到枚举中间，则需要创建自定义 IDisposable 迭代器。了解如何[`foreach`处理实现 IDisposable 的迭代器](http://msdn.microsoft.com/en-us/library/aa664754%28v=vs.71%29.aspx)来处理此类情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T00:17:21.757

本质上，您需要委托本身之外的一次性元素的范围。在这些情况下，我会让委托接受一次性实例（即 TextReader）而不是文件名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T02:10:36.947

我真的很喜欢产量解决方案。我编写了一个简单的代码，它表明它运行良好，可以在客户端退出 for-each 之后处理资源。

```
static void Main(string[] args)
{
    using (Resource resource = new Resource())
    {
       foreach (var number in resource.GetNumbers())
       {
          if (number > 2)
             break;
          Console.WriteLine(number);
       }
     }
     Console.Read();
 }
 public class Resource : IDisposable
 {
    private List<int> _numbers = new List<int> { 1, 2, 3, 4, 5, 6, 7 };

    public IEnumerable<int> GetNumbers()
    {
       foreach (var number in _numbers)
          yield return number;
    }

    public void Dispose()
    {
       Console.WriteLine("Resource::Dispose()...");
    }
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T00:19:38.887

```
public class Play {

    delegate string ColumnReader();

    static ColumnReader GetColumnReader(string filename) {
        return () => {
            using (TextReader reader = new StreamReader(filename)) {
                var headers = reader.ReadLine();
                return reader.ReadLine();
            }
        };
    }

    public static void Main(string[] args) {
        var Reader = GetColumnReader("Input.tsv");
        Console.WriteLine(Reader());
    }

} 
```

显然，每次调用返回的委托时，这将打开/读取一行/关闭文件。

如果您需要打开一次，然后在阅读几行时保持打开状态，最好使用迭代器块，类似于以下内容：

```
public class Play {

    static IEnumerable<string> ReadLines(string filename) {
        using (TextReader reader = new StreamReader(filename)) {
            var headers = reader.ReadLine(); // I'm guessing you want to ignore this??
            while (true) {
                string line = reader.ReadLine();
                if (line == null)
                    yield break;
                yield return line;
            }
        }
    }

    public static void Main(string[] args) {
        foreach (string line in ReadLines("Input.tsv"))
            Console.WriteLine(line);
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T00:28:28.097

如果你真的想保留闭包语义，你需要为它添加一个参数。类似于下面的东西，但您必须注意调用 dispose 命令。

```
public class Play {
    enum ReaderCommand {
        Read,
        Close
    }

    delegate string ColumnReader(ReaderCommand cmd);

    static ColumnReader GetColumnReader(string filename) {
        TextReader reader = new StreamReader(filename);
        var headers = reader.ReadLine();
        return (ReaderCommand cmd) => {
            switch (cmd) {
                case ReaderCommand.Read:
                    return reader.ReadLine();

                case ReaderCommand.Close:
                    reader.Dispose();
                    return null;
            }

            return null;
        };
    }

    public static void Main(string[] args) {
        var Reader = GetColumnReader("Input.tsv");
        Console.WriteLine(Reader(ReaderCommand.Read));
        Console.WriteLine(Reader(ReaderCommand.Read));
        Reader(ReaderCommand.Close);
        Console.ReadKey();
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-20T01:23:09.880

这比简单地返回 TextReader 更容易吗？在我看来，您只是为了实现特定的编码风格而使事情变得更加复杂。

调用者始终有责任处理正确返回的任何内容。我相信你的项目会给你很多机会来锻炼你的肌肉——这次只是保持简单！

# sitecore - 如何修复损坏的链接报告中的误报？

> ID：11571052
> 
> 赞同：0
> 
> 时间：2012-07-20T00:02:02.413
> 
> 标签：sitecore, sitecore6

我有一些工作正常的项目内容...但在断开链接报告中显示为断开的链接。有问题的链接位于富文本字段中：

```
<img style="WIDTH: 700px; HEIGHT: 1029px" class="imageBG" alt="All Alaska Map" src="~/media/Images/NorthToAlaska/maps/allAlaskaRouteFLNew.jpg?w=700&amp;h=1029&amp;as=1" /> 
```

如果我使用内置编辑器并插入图像，它会生成如下链接：

```
<img width="700" height="1029" alt="All Alaska Route Map" src="~/media/F82D13579F3A4D0E88C4436D84A562F8.jpg?w=700&amp;h=1029&amp;as=1" /> 
```

我应该注意，即使使用“插入媒体项目”按钮，它也会显示为断开的链接。:(

一般来说，我更愿意引用图像路径，而不是如果我只是看着它就无法识别的项目 GUID。

1）为什么第一个链接显示为损坏，即使它在网站上运行良好？
2) 有没有办法让编辑器插入带有路径而不是 GUID 的媒体项目链接？
3) 或者，有没有办法修改检测或报告断开链接的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T07:38:05.857

海杰布赖恩

1：您是否尝试重建链接数据库？要重建链接数据库，您只需打开控制面板并转到数据库点。将有一个选项，您可以在其中重建链接数据库。

2：我假设您的意思是富文本编辑器。它是故意插入 ID 而不是路径。如果 Sitecore 使用路径，它无法检测到您是否将目标项目移动到树中的其他位置。要从中获得友好的 URL，您需要使用 Sitecore 的正确控件。例如，在 XSL 中`sc:fld`不会呈现友好的 URL `sc:field`，而是使用它。

3：你想以什么方式修改它？自定义报告？

# ruby - Parent 的 Google Drive isRoot 属性返回 Nil

> ID：11571054
> 
> 赞同：0
> 
> 时间：2012-07-20T00:02:11.777
> 
> 标签：ruby, google-drive-api

我正在使用我创建的包装器在我的驱动器帐户中检索与给定查询匹配的文件

```
files = get_files_by_query session, "title = 'Competitors' and trashed = false" 
```

这将返回一个 Google::APIClient::Schema::Drive::V2::File 对象数组

从 rails 控制台，我可以检索数组中第一个文件的父文件。

```
files.first.parents.first.id 
```

但是，当我尝试检索 isRoot

```
files.first.parents.first.isRoot 
```

我收到以下错误

```
TypeError: Expected boolean, got NilClass. 
```

这很奇怪，因为当我检查父项的内容时，会显示哈希值，并且 isRoot 显然是假的或真的，但绝不是零。

不确定这是否相关，但在错误之后。如果我重新尝试第一个命令

```
files = get_files_by_query session, "title = 'Competitors' and trashed = false" 
```

结果以 Hash 对象数组的形式返回，而不是 Google::APIClient::Schema::Drive::V2::File 对象。

下面是上面使用的包装器。

```
def get_files_by_query session, query
  get_files session, {'q' => query}
end

def get_files session, parameters
  drive = session.discovered_api("drive", "v2")
  result = session.execute(api_method: drive.files.list, parameters: parameters)
  if result.status == 200
    files = result.data.items
  else
    puts "An error occurred: #{result.data['error']['message']}"
  end
end 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:11:29.337

更多的仅供参考，因为在评论中解决了这个问题，但是导致这个问题的问题已经在客户端库中修复了一段时间。

# html - 将图像放在 div 上方会将内容推送到其他位置

> ID：11571055
> 
> 赞同：0
> 
> 时间：2012-07-20T00:02:24.043
> 
> 标签：html, css

我正在尝试将图像放置在导航栏左侧的网站上 div 的顶部栏上方。[我的尝试](http://justmyshit.com/shaunmichael/)

它应该看起来[像这样](http://justmyshit.com/shaunmichael/index2.html)

我希望它看起来[像这样](http://justmyshit.com/shaunmichael/sitefix.jpg)

我尝试了多种方法，例如将图像的 div 放在代码中的不同位置，并更改 div 的 css 元素，但一切似乎都将其他内容图像推到了网站上的位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T00:09:02.807

添加这个...

```
.photo {
    position: relative;
    top: 4px;
} 
```

并将#container 上的边距更改为...

```
#container {
    margin-top: -1px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T00:20:52.833

您的 css 状态不是很好，但是，使用您的方法是如何做到的：

1.  `margin-top`从_`#container`
2.  添加`vertical-align: top`到`img`里面`#photo`
3.  更改为`top`_`#extraDiv1``246px`
4.  更改为`top`_`.horizontal``218px`

我想应该这样做。

# git - GIT：从主分支恢复格式但保留非格式更改

> ID：11571056
> 
> 赞同：4
> 
> 时间：2012-07-20T00:02:25.660
> 
> 标签：git, code-formatting

我在*master*分支上创建了一个*测试*分支并对其进行了一些提交。在这些提交中有自动格式更改。因此，当我键入时， 我可以看到几乎每一行都删除了旧格式（红色 - ）并添加了（绿色 +）一个新格式的新行。 *`git diff master test`*

 *我想将我的更改保留在测试分支上，但我想恢复旧格式。这甚至可能吗？git 是否知道哪些新行对应于旧行？如果该行被修改，那将很容易做到，但 git diff 将其显示为删除然后添加的行 - 就像他们在 git 的脑海中没有任何共同点一样。

我尝试了各种合并策略，但似乎这个问题需要更多的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T00:41:29.907

小提示。如果您想查看忽略空格更改的两个班之间的差异，请 `git diff -b`使用`git diff`.

回到你的问题。这实际上取决于更改的提交方式。如果您分别进行了有用的改进和重新格式化，则可以恢复重新格式化。您只需要还原一个或多个提交。否则我认为不可能自动完成。你可以在 git diff 中找到几个选项。*

# java - JEdi torPane - 切换回默认编辑器工具包

> ID：11571059
> 
> 赞同：3
> 
> 时间：2012-07-20T00:02:43.013
> 
> 标签：java, swing, jeditorpane, defaultstyleddocument

如果将 a 的编辑器套件更改`JEditorPane`为`HTMLEditorKit`，如何将其更改回默认（纯文本）编辑器套件，例如第一次实例化时的情况？我希望它这样做，以便当用户切换到 html 模式（我正在制作一个 Dreamweaver 类型的应用程序）时，我可以加载所有 html 并将其显示为纯文本，而不是格式化文本。我试过了：

```
DefaultEditorKit kit = new DefaultEditorKit();
page.setEditorKit(kit); 
```

但这使得编辑器窗格不可编辑。如何将编辑器工具包切换回纯文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T00:45:31.850

正如[*编辑器窗格与文本窗格*](http://docs.oracle.com/javase/tutorial/uiswing/components/editorpane.html#recap)中所讨论的，“请注意，使用该`setPage()`方法时文档和编辑器工具包可能会发生变化。” 对于纯文本，他们推荐使用`DefaultStyledDocument`and `StyledEditorKit`。

# android - 我不能用方法dismiss()来停止ProgressDialog；

> ID：11571064
> 
> 赞同：1
> 
> 时间：2012-07-20T00:04:06.667
> 
> 标签：android, android-asynctask, progressdialog

我不知道为什么我的代码不起作用。我读了很多相同的问题，但在大多数情况下这是正确的解决方案，但对我来说不起作用。我的 AsyncTask 看起来像这样：

```
public class SavingAsync extends AsyncTask<String, String, String> {
private static final String TAG = "DrawView";
private ProgressDialog pd;
private Context context;
private File saveFile;
private Bitmap bitmap;

public SavingAsync(Context c, File sF, Bitmap b) {
    context = c;
    saveFile = sF;
    bitmap = b;
}

@Override
protected void onPostExecute(String result) {
    pd.dismiss();
    super.onPostExecute(result);
}

@Override
protected void onPreExecute() {
    pd = new ProgressDialog(context);
    ProgressDialog.show(context, "", "Saving...");
    super.onPreExecute();
}

@Override
protected String doInBackground(String... params) {
    OutputStream stream;
    try {
        stream = new FileOutputStream(saveFile);
        bitmap.compress(CompressFormat.PNG, 80, stream);
        stream.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
} 
```

}

位图已成功保存，但 ProgressDialog 永远运行：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T00:08:09.480

您正在显示 ProgressDiaog

```
ProgressDialog.show(context, "", "Saving..."); 
```

并且 show 方法返回一个 PreogressDialog 对象。

`pd`您正在使用 pd 使用引用变量关闭的对话框。`dismiss()`在您的代码中确实引用了您正在显示的对话框。您应该将其分配给`pd`. 像这样

```
pd = ProgressDialog.show(context, "", "Saving..."); 
```

然后调用`pd.dismiss()`将关闭当前显示的`Dialog`.

# javascript - jQuery .toggle 没有完成

> ID：11571075
> 
> 赞同：0
> 
> 时间：2012-07-20T00:05:22.240
> 
> 标签：javascript, jquery, toggle

我有一个使用 jQuery`.toggle()`隐藏 div 的函数。函数 get 在 2 个不同的场景中被调用。当页面加载时，该函数会被重复调用以设置页面，然后在用户操作后一次性调用它。在用户操作之后，我可以看到 div 正在正确更新以包含`style="display:none;`" 但是当在页面加载期间重复调用函数 get 时，我可以看到 div 仅使用单词样式更新，并且`="display:none;"`被忽略了。

这是我正在尝试使用的 jquery。 `$("#divAnswerUpdate" + qc_ID).toggle();`

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:24:00.220

我弄清楚我的问题是什么。在调用切换之前，我没有明确设置样式。我将呼叫从切换更改为隐藏，现在得到了我预期的行为。

# html - 浮动 DIV 权限会导致元素在 IE7 中换行

> ID：11571078
> 
> 赞同：0
> 
> 时间：2012-07-20T00:05:42.107
> 
> 标签：html, css, internet-explorer, internet-explorer-7, css-float

我在 IE7 中将容器浮动到右侧时遇到问题。在 IE8+、Firefox、Chrome 和 Safari 中一切看起来都很好，但容器中的元素由于某种原因在 IE7 中包装。

我在[http://jsfiddle.net/aagC9/](http://jsfiddle.net/aagC9/)设置了一个小提琴。我看到的问题在 IE9 中的 IE7 浏览器模式/文档模式中可见（它也在 XP 上的 IE7 中，但我认为这对人们来说更容易检查）。

虽然似乎很多人都遇到了类似的问题，但他们的解决方案对我不起作用。我尝试以各种组合向容器和元素添加`overflow: hidden`和。`overflow: visible`我还尝试在容器上设置固定宽度`.message`，但这似乎也没有任何效果。虽然我可以在 上使用固定的左边距`.message`，但它不能 100% 工作，因为 IE7 不支持 box-sizing 模型。

有谁知道让它在 IE7 中使用浮动的秘密？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T02:23:05.590

这与您对`display:inline-block;`IE7*支持*的依赖有关，但并不总是*正确*的。实际上，[修复它非常恶心](http://flipc.blogspot.com/2009/02/damn-ie7-and-inline-block.html)。但是，[就像在这个更新的 fiddle](http://jsfiddle.net/aagC9/3/)中一样，它可以工作。

# java - JTA CMT 事务边界——事务在哪里开始和结束？

> ID：11571079
> 
> 赞同：0
> 
> 时间：2012-07-20T00:05:42.943
> 
> 标签：java, jakarta-ee, transactions, jta

我在我的 Java EE 应用程序中遇到问题 - 通常，我保留一个对象，发送一个 JMS，然后在 MDB 上我试图找到该对象 - 有时它可以工作，但有时我在 JPA 查找时收到 null。我怀疑交易没有完成，但我找不到解决方案。

我不确定我是否理解正确 - 在 CMT 中，事务在调用来自 @Local 或 @Remote 接口的 Session Bean 方法的那一刻开始？如果我在这个 Session Bean 中有一个方法链，而其中只有一个方法持久化了我的对象 - 所有链接的方法都将在一个事务中调用吗？如果其中一些也暴露在界面中怎么办？

发送 JMS 是链式方法之一 - 我是否也应该在接口中公开此方法并在保留我的对象的方法之后调用它？如果我不想在接口中公开该方法怎么办？

抱歉，缺乏 EJB 知识。谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:15:10.690

我建议您不要在 MDB bean 中编写逻辑，为此使用会话 bean，然后将其注入 MDB。关于方法调用，如果您正在调用同一类中的方法，即使通过提供 @REQUIRES_NEW 属性它也不会打开新事务。为了做到这一点，注入 bean 本身并调用注入的 bean，这将打开新的事务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T01:21:30.850

Did you persist and find your object with the same entity manager?

You can always find your object if you are in the same transaction which persists the object before. If you persist and find the object with different transactions, then you cannot see the object until persisting transaction is committed.

My suggestion is: Use the same transaction, so that you can always find out your object. Or in Java EE applications, just simply use the same entity manager.

# c# - SSIS - FTP 组件的动态文件名

> ID：11571085
> 
> 赞同：1
> 
> 时间：2012-07-20T00:06:28.877
> 
> 标签：c#, ftp, ssis

我正在尝试在 SSIS 中创建数据流以帮助我通过 FTP 上传文件，但遇到了一些麻烦。文件名需要是动态的，格式为filename_mmddyy.xls。因此，它每天都会应用日期并上传一个新文件。

我能够做到这一点，以便文件可以使用以下表达式正确保存在数据流中：

```
@[User::path]+ 
Right("0"+(DT_STR,4,1252)DatePart("m",getdate()),2)+
Right("0"+(DT_STR,4,1252)DatePart("d",getdate()),2)+
Right("0"+(DT_STR,4,1252)DatePart("yyyy",getdate()),2)+
".xls" 
```

但是，FTP 组件不会将此作为 LocalPath 的表达式。我试图在我的原始数据流中覆盖脚本组件内的 User::path 变量，但这似乎也不起作用。

我知道我错过了一些很简单的东西，但我已经盯着它看了足够长的时间，它就是不来找我。

谢谢！

编辑

好的，所以在闲逛了一天之后，这就是我想出的：

我最初的任务是创建我的平面文件。旁注，我的供应商实际上需要一个真正的 excel xls 而不是 csv，所以我必须创建一个文件连接目标，然后我需要在我的服务器上创建一个静态文件。

然后我使用脚本任务 (C#) 将静态文件复制到具有动态名称的文件中。当然，我必须保留原始文件，因为 excel 目标需要在那里。

最后，我建立了另一个文件连接，并使用上面的表达式作为它的连接字符串。然后我让 FTP 任务使用文件连接作为要上传的文件。

我要试着把它修剪一下。我想我可以不使用脚本任务而是使用文件系统任务来复制并使用文件连接来帮助动态路径名。

我学到的底线是：在 SSIS 中，当它显示“PathIsVariable”时，您在该文本字段中输入的内容将被视为变量。所以如果我输入@[User::path]，它会解析为“C:\pathonmydrive”。SSIS 然后查找具有该名称的变量，即 C:\pathonmydrive，以查找该文件。这有点违反直觉，但现在我知道我可以避免这个陷阱。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T09:57:12.690

1.  创建一个新变量，例如 FilePath。使用字符串作为数据类型并在变量的属性中设置`EvaluateAsExpression`为 true。
2.  配置变量的表达式：`@[User::path] + "filename_" + Right("0"+(DT_STR,2,1252)DatePart("m",getdate()),2) + Right("0"+(DT_STR,2,1252)DatePart("d",getdate()),2)+ Right("0"+(DT_STR,4,1252)DatePart("yy",getdate()),2) + ".xls"`
3.  使用`Evaluate Expression`表达式编辑器中的按钮查看表达式是否解析到文件的正确路径。
4.  修改`Expressions`您的属性`FTP task`并设置您在 下创建的变量`LocalPath`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T09:09:04.500

为了在脚本组件中更改变量值，您需要首先将变量作为 ReadWrite 传递：

![在此处输入图像描述](../Images/f1cccccfaa2f49c9885b9e3c55b5eee1.png)

然后，为变量设置一个新值：

```
Dts.Variables["folders"].Value = "value you want to assign"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-20T15:07:49.827

创建一个新变量，例如`FilePath`。使用字符串作为数据类型并在变量的属性中设置`EvaluateAsExpression`为 true。配置变量的表达式：

```
@[User::path] + "filename_" + Right("0"+(DT_STR,2,1252)DatePart("m",getdate()),2) + Right("0"+(DT_STR,2,1252)DatePart("d",getdate()),2)+ Right("0"+(DT_STR,4,1252)DatePart("yy",getdate()),2) + ".xls" 
```

使用表达式编辑器中的 Evaluate Expression 按钮查看表达式是否解析到文件的正确路径。

修改 FTP 任务的 Expressions 属性并设置您在 LocalPath 下创建的变量。

* * *

我已经按照上述方式执行了，但我仍然有问题`The variable cannot be found`......任何想法

# javascript - Haskell 的 Javascript 中缀运算符

> ID：11571088
> 
> 赞同：0
> 
> 时间：2012-07-20T00:06:55.163
> 
> 标签：javascript, haskell, functional-programming

Javascript中是否有等效的构造。如果没有，你将如何创建一个？

下面是对中缀运算符在 Haskell 中的作用的简单解释：

[: 中缀运算符在 Haskell 中做了什么？](https://stackoverflow.com/questions/1696751/what-does-the-infix-operator-do-in-haskell)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T00:11:03.723

JavaScript 没有列表类型，但它有`Array`s。

您可以使用...

```
var newArr = [val].concat(arr); 
```

或者，您可以使用`unshift()`添加到数组的前面，但它会改变原始数组。

JavaScript 没有`:`运算符、运算符重载或看起来像运算符的方法，因此您无法获得与 Haskell 类似的语法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-01T06:01:43.453

我看到 Leila Hamon 已经链接到[这篇关于在 JS 中模拟中缀运算符的文章](http://www.techtangents.com/emulating-infix-operator-syntax-in-javascript/)。

但我认为一个例子可能对其他人有用。

以下是如何破解`Number`和`Boolean`原型来处理链式中缀表达式，例如`4 < 5 < 10`.

您可以通过将更多方法应用于更多原型来进一步扩展它。它有点难看，但对于使查询不那么冗长可能很有用。

```
//Usage code
(4) .gt (6) .gt (4) //false

(100) .lt (200) .lt (400) . gt(0) . gt(-1)//true

(100) [ '>' ] (50) [ '<' ] (20)//false

//Setup Code
(function(){

  var lastVal = null;

  var nP = Number.prototype
  var bP = Boolean.prototype

  nP.gt = function(other){
    lastVal = other;
    return this > other;
  }

  nP.lt = function(other){
    lastVal = other;
    return this < other;
  }

  bP.gt = function(other){
    var result = lastVal > other;
    lastVal = other;
    return result;
  }

  bP.lt = function(other){
    var result = lastVal < other;
    lastVal = other;
    return result;
  }

  bP['<'] = bP.lt
  bP['>'] = bP.gt
  nP['<'] = nP.lt
  nP['>'] = nP.gt

})() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-16T03:50:42.477

它不是最漂亮的，但它可能有助于在您想要中缀的地方提高可读性，以便您的代码读起来像散文

```
function nfx(firstArg, fn, secondArg){
    return fn(firstArg, secondArg);
}

// Usage

function plus(firstArg, secondArg) {
    return firstArg + secondArg;
}

nfx(1, plus, 2); 
```

# racket - PLAI 中第 76 页中 {with {x 3} {+ xx}} 的评估

> ID：11571096
> 
> 赞同：1
> 
> 时间：2012-07-20T00:08:15.427
> 
> 标签：racket, lazy-evaluation, plai

我正在学习[PLAI](http://www.cs.brown.edu/~sk/Publications/Books/ProgLangs/2007-04-26/plai-2007-04-26.pdf)的第8章“实现懒惰”，并完成了以下CFAE/L：

```
 (define-type CFAE/L
      [num (n number?)]
      [add (lhs CFAE/L?)(rhs CFAE/L?)]
      [id (name symbol?)]
      [fun (param symbol?)(body CFAE/L?)]
      [app (fun-expr CFAE/L?)(arg-expr CFAE/L?)])

    (define-type CFAE/L-Value
      [numV (n number?)]
      [closureV (param symbol?)
            (body CFAE/L?)
            (env Env?)]
      [exprV (expr CFAE/L?)
         (env Env?)])

      (define-type Env
        [mtSub]
        [aSub (name symbol?)(value CFAE/L-Value?)(env Env?)])

    (define (num+ x y) ;; need this because we can't just use Scheme + to add FAE-values
      (numV (+ (numV-n x) (numV-n y))))

    (define (parse sexp)
      (cond [(number? sexp) (num sexp)]
        [(symbol? sexp) (id sexp)]
        [(list? sexp)
         (case (first sexp)
           ((+)
            (add (parse (second sexp))
                 (parse (third sexp))))
           ((with)                                 
            (app (fun (first (second sexp))        
                      (parse (third sexp)))        
                 (parse (second (second sexp)))))  
           ((fun)                                  
            (fun (first (second sexp))             
                 (parse (third sexp))))            
           (else
            (app (parse (first sexp))            
                 (parse (second sexp)))))]))
   (define (lookup name env)
      (type-case Env env
        [mtSub() (error 'lookup "no binding for identifier")]
        [aSub (bound-name bound-value rest-ds)
          (if (symbol=? bound-name name)
              bound-value
              (lookup name rest-ds))]))

   (define (interp expr env)
      (type-case CFAE/L expr
        [num (n) (numV n)]
        [add (l r)(num+ (interp l env)(interp r env))]
        [id (v) (lookup v env)]
        [fun (bound-id bound-body)
         (closureV bound-id bound-body env)]
          [app (fun-expr arg-expr)
         (local ([define fun-val (interp fun-expr env)]
                 [define arg-val (exprV arg-expr env)])
           (interp (closureV-body fun-val)
                   (aSub (closureV-param fun-val)
                         arg-val
                         (closureV-env fun-val))))])) 
```

根据这个解释，我想评估 page76 的

```
{with {x 3} {+ x x}} 
```

(1) 打字时：

> (interp (parse '{with {x 3} {+ xx}}) {mtSub}) 我得到如下错误：

numV-n：违反合同，预期：numV？，给定：（exprV（num 3）（mtSub））合同来自：numV-n，指责：使用合同：（-> numV？数字？）在：/study/lisp /plai/chapter8.scm:10.9

(2) 为了理解page76的描述，我想写下步骤如下：“解释器将主体中的每个x评估为表达式闭包（因为这是环境中绑定到x的内容），但添加过程不能处理这些：它（以及类似的任何其他算术原语）需要确切地知道表达式闭包对应的数字。”，但在完成这些步骤后我仍然不清楚这个描述。有我的步骤: (interp (parse '(with (x 3) (+ xx))) (mtSub))

step1: (parse '(with (x 3) (+ xx))) => (app (fun 'x (add (id 'x) (id 'x))) (num 3))

```
 NOTE: fun-exp is (fun 'x (add (id 'x), arg-expr is (num 3) 
```

step2: (cloSureV 'x (add (id 'x) (id 'x)) (mtSub)) (as fun-val)

```
 and (experV (num 3) (mtSub)) (as arg-val) 
```

step3: (interp (add (id 'x) (id 'x)) (aSub 'x (num 3) (mtSub)))

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T11:20:45.343

广告 1)

这是预期的行为。您收到的错误消息是：

```
 numV-n: contract violation, 
   expected: numV?, 
   given: (exprV (num 3) (mtSub)) 
   ... 
```

这`numV-n`是`num+`. 这在第 75 页的最后一段中进行了解释。原语如`num+`预期的非封闭值，但该值`(exprV (num 3) (mtSub))`是在空环境上封闭的数字 3。

因此，诸如`num+`必须强制参数的原语。从第 76 页开始：

```
(deﬁne (num+ n1 n2)
    (numV (+ (numV-n (strict n1) ) (numV-n (strict n2) )))) 
```

广告 2)

1) 的解释对 2) 有帮助吗？

添加

为什么不让口译员为您写出步骤？

快速修复：

```
(define (interp expr env)
      (displayln (list 'expr expr 'env env))
      (type-case CFAE/L expr 
```

为了获得更可读的输出，首先`unparse`将 CFAE/L 转换为（可读）字符串。

# jquery - 单击时向超链接添加活动状态

> ID：11571098
> 
> 赞同：0
> 
> 时间：2012-07-20T00:08:29.360
> 
> 标签：jquery, ajax, jquery-hover

我在尝试向我的链接添加活动状态时遇到了一些麻烦。这是我正在玩的代码：

```
$(function () {

    $('a').click(function () {
        $(this).addClass('PnavCurrent');
        //$("div a").removeClass("PnavCurrent");
        //$("div a[href="+newHash+"]").addClass("PnavCurrent");

        $(this).removeClass('PnavCurrent');
        $(this).css('color', '#51ad9d');
        $(this).css('z-index', '2');
        $(this).css('border-color', '#00a8ff');

        $('a').hover($(this).css('z-index', '10'));
    });
}); 
```

由于某种原因，它不会为链接应用 css 活动状态类（'PnavCurrent'），但是当我在脚本代码中使用`{$(this).css...}`. 现在我想要的是为脚本代码中的链接添加一个悬停状态 z-index，如下所示：

```
 $('a').hover($(this).css ('z-index', '10')); 
```

我尝试使用上面的那一小段代码来实现这一点，但它不起作用。如果有人能帮助解决这个问题，我将不胜感激，并且可能是一个更好的整体解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T01:40:17.300

CSS：

```
.PnavCurrent {
    color: #51ad9d;
    z-index: 2;
    border-color: #00a8ff;
}

.PnavCurrent:hover { z-index: 10; } 
```

Javascript：

```
$(function() {
    $('a').click(function(e) {
        // you usually want to prevent default for handling link clicks,
        // otherwise the browser follows the href (if that's intended skip this)
        e.preventDefault();

        $('a').not(this).removeClass('PnavCurrent');
        $(this).addClass('PnavCurrent');
    });
}); 
```

* * *

关于[jQuery`.hover()`](http://api.jquery.com/hover/)的注意事项：你根本不需要这个，但用法是这样的（这是css规则的*替代方案，不一起使用）*`:hover`

```
$("a").hover(
    function () {
        $(this).css('z-index',2));
    }, 
    function () {
        $(this).css('z-index', 10);
    }
); 
```

# ios - 处理来自 UITabBarController (UITabBarControllerDelegate) 的 UIBarButtonItem

> ID：11571099
> 
> 赞同：0
> 
> 时间：2012-07-20T00:08:31.087
> 
> 标签：ios, uitabbarcontroller, uibarbuttonitem

我是新手:-(。

我有一个非常标准的选项卡栏控制器，我在其中添加了一个 UIButtonBarItem（我使用情节提要编辑器来执行此操作）。一切看起来都很好，但我不知道如何处理“按钮按下”事件。我已经为标签栏控制器建立了一个委托，所以我可以捕获“didSelectViewController”事件（这似乎没有帮助:-)。

我想我错过了一些明显的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T17:57:28.720

我终于偶然发现了解决方案：

1.  为 TabBarController () 设置一个委托
2.  在委托上创建一个方法来处理动作：-(IBAction) someHandler:(id) sender;
3.  将一个Bar Button Item拖入常用Tab Bar Controller的“导航栏”
4.  选择栏按钮，按住 Control 并拖动到“First Responder”并选择“someHandler”方法。

就是这样，不是那么难，应该早点弄清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T00:29:32.190

当您将其他视图连接到该视图时，选项卡栏控制器会自动创建按钮。我在使用故事板编辑器时遇到了同样的问题，即使你可以把它放在那里，我相信它不会让你使用它。我认为即使只是设置一个 IBOutlet 也行不通。

在文档中：http: [//developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/TabBarControllers.html](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/TabBarControllers.html)

Apple 专门讨论了您如何创建视图并自动为您处理按钮。

否则，如果您想要一个不显示新视图的选项卡按钮（这就是我想要的），那么这可能不符合 Apple 关于选项卡控制器的设计原则。

# iphone - uiimage 未正确放入子视图

> ID：11571100
> 
> 赞同：2
> 
> 时间：2012-07-20T00:08:34.503
> 
> 标签：iphone, ios, ipad, uiview, uiimageview

这是一个很难解释的问题......但我会尽力而为。首先是问题的背景，基本上我正在为 ios 创建一个类似绘画的应用程序，并希望添加一个功能，允许用户选择图像的一部分（多点触控显示不透明的矩形）并删除/复制粘贴/旋转那部分。我已经让删除和复制粘贴工作完美，但轮换是另一回事。要旋转图像的一部分，我首先复制图像的一部分并将其设置为所选矩形图层的背景，然后用户使用滑块旋转任意角度。问题是有时图像最终会从矩形的另一个位置显示（这意味着复制的图像挂在矩形的错误角上）。我认为这可能是我的 rectangle.frame 的问题。起源，但通过各种测试，该值似乎是正确的。它似乎也根据阻力进入的方向而改变......

**这些是问题的屏幕**

[![1](../Images/22fed0558d393bd80fdf7bddf5e3627a.png)](https://i.stack.imgur.com/l1DM7.png)

[![2](../Images/17a8b1ea77390289da76291cd3567139.png)](https://i.stack.imgur.com/rYxNK.png)

[![3](../Images/a81e682fa9b0d072e5a0a9f1f059bc57.png)](https://i.stack.imgur.com/VvjS8.png)

在上述每种情况下，图像的不匹配部分都应该在灰色矩形内，我不知道问题出在哪里。

```
 bg = [[UIImageView alloc] initWithImage:[self crop:rectangle.frame:drawImage.image]];
     [rectangle addSubview:bg]; 
```

drawImage 是用户绘图，rectangle 是选中的灰色区域。crop 是一种从给定矩形返回给定图像的一部分的方法。

我也无法粘贴任意旋转的图像。关于如何做到这一点的任何想法？

编辑：添加更多代码。

```
 -(void)drawRect:(int)x1:(int)y1:(int)x2:(int)y2{
     [rectangle removeFromSuperview];
     rectangle = [[UIView alloc] initWithFrame:CGRectMake(x1, y1, x2-x1, y2-y1)]; 
     rectangle.backgroundColor = [UIColor colorWithRed:0.9 green:0.9 blue:0.9 alpha:0.6];
     selectionImage = drawImage.image;
     drawImage.image = selectionImage;
     [drawImage addSubview:rectangle];
     rectangleVisible = true;
     rectangle.transform = transformation; 
```

它与我如何绘制矩形有什么关系吗？（上）我从 touchesMoved 方法（下）的一部分调用此方法，这可能会导致问题（触摸 1 位于错误位置可能导致宽度为负数？）如果是这样，有没有简单的方法来解决这个问题？

```
 if([[event allTouches] count] == 2 && !drawImage.hidden){
        NSSet *allTouches = [event allTouches];
        UITouch *touch1 = [[allTouches allObjects] objectAtIndex:0];
        UITouch *touch2 = [[allTouches allObjects] objectAtIndex:1];
        [self drawRect:[touch1 locationInView:drawImage].x :[touch1 locationInView:drawImage].y:
        [touch2 locationInView:drawImage].x :[touch2 locationInView:drawImage].y];   
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T03:13:12.507

我不确定这是否是您的问题，但看起来您只是假设 touch1 代表左上角触摸。我将从标准化矩形开始。

```
// Standardizing the rectangle before making it the frame.
CGRect frame = CGRectStandardize(CGRectMake(x1, y1, x2-x1, y2-y1));
rectangle = [[UIView alloc] initWithFrame:frame]; 
```

# python - 在 Python 中搜索脚本

> ID：11571101
> 
> 赞同：0
> 
> 时间：2012-07-20T00:08:42.167
> 
> 标签：python, search

我试图制作一个在整个计算机中搜索某些文件的脚本，类似于在 Windows 中搜索。我想在没有任何库的情况下做到这一点。

我开始将 dir 设置为磁盘的开始，然后检查我有多少 dirs - 我想创建一个函数来搜索当前目录中的新目录，所以最后我有磁盘中所有目录的列表。但是当我尝试找到所有以“.txt”结尾的文件时，我收到错误消息 WindowsError5 Acces Denied。我究竟做错了什么？谢谢

```
import os

os.chdir("\\.")
dir = os.listdir()

dirs = []

for x in dir:
    if os.path.isdir(x):
        dirs.append(x)

for y in dirs:
    o = os.listdir(y)
    for p in o:
        if p.endswith(".txt"):
            print(p)
input() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T00:18:40.800

首先，如果您想遍历目录树，请使用[os.walk](http://docs.python.org/library/os.html)而不是尝试自己构建它。如果你想了解像 os.walk 这样的东西是如何工作的，源代码应该就在 os.py 中。

其次，除非您以管理员身份运行，否则您可能无法访问整个文件系统，因此当您尝试逐步浏览您无权访问的目录时，您将收到一堆拒绝访问错误。您必须使用 try/catch 以您认为合适的任何方式处理这些错误（例如，打印错误并转到下一个目录）

第三，这整个想法可能是错误的。Windows 桌面搜索实际上并不搜索您的整个树，它保留一个数据库并进行搜索，这要快得多（并且还允许用户搜索他们无法直接访问的路径 - 例如，您可能有权访问 /Users/ foo，但不能显示 /Users，这意味着 WDS 可以显示 /Users/foo 中的文件，但您的脚本不能）。

第四，使用 POSIX 的“查找”工具更容易做到这一点，或者……我忘记了名字，但是 Windows 附带的 DOS 派生工具可以做同样的事情，但不那么灵活。无论哪种方式，它都是一个单行 shell/batch 命令，而不是几十行 Python。

最后，按照您编写的方式，它将搜索当前驱动器，而不是所有驱动器，这可能不是您想要的，是吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T00:15:49.633

您访问了一个您无权查看的目录。那又怎样。捕获异常并继续搜索。

# r - POSIXct/POSIXlt 和亚秒级精度的奇怪行为

> ID：11571105
> 
> 赞同：2
> 
> 时间：2012-07-20T00:08:56.770
> 
> 标签：r, xts

在 POSIXct 中使用亚秒时，我很难按顺序发生序列。

```
options(digits.secs=6)
x <- xts(1:10, as.POSIXct("2011-01-21") + c(1:10)/1e3) 
```

产生以下输出，为什么时间不按顺序？

```
 [,1]
2011-01-21 00:00:00.000    1
2011-01-21 00:00:00.002    2
2011-01-21 00:00:00.003    3
2011-01-21 00:00:00.003    4
2011-01-21 00:00:00.005    5
2011-01-21 00:00:00.006    6
2011-01-21 00:00:00.006    7
2011-01-21 00:00:00.007    8
2011-01-21 00:00:00.009    9
2011-01-21 00:00:00.009   10 
```

我希望下面的代码产生相同的输出

```
c(1:10)/1e3
[1] 0.001 0.002 0.003 0.004 0.005 0.006 0.007 0.008 0.009 0.010 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T02:14:35.210

@GSee 是对的，这是一个浮点算术问题。[加文辛普森的](https://stackoverflow.com/users/429846/gavin-simpson) [回答](https://stackoverflow.com/a/9787993/271616)是正确的，因为它是**打印**对象的方式。

```
R> options(digits=17)
R> .index(x)
 [1] 1295589600.0009999 1295589600.0020001 1295589600.0030000 1295589600.0039999
 [5] 1295589600.0050001 1295589600.0060000 1295589600.0070000 1295589600.0079999
 [9] 1295589600.0090001 1295589600.0100000 
```

所有的精确度都在那里，但这些线`format.POSIXlt`导致`options(digits.secs=6)`不被尊重。

```
np <- getOption("digits.secs")
if (is.null(np)) 
  np <- 0L
else
  np <- min(6L, np)
if (np >= 1L) {
  for (i in seq_len(np) - 1L) {
     if (all(abs(secs - round(secs, i)) < 1e-06)) {
       np <- i
       break
     }
  }
} 
```

由于精度问题，在您的示例`np`中，在上述`for`循环中重置为 3。格式`"%Y-%m-%d %H:%M:%OS3"`会产生您发布的时间。如果您使用该`"%Y-%m-%d %H:%M:%OS6"`格式，您可以看到时间是准确的。

```
R> format(as.POSIXlt(index(x)[1:2]), "%Y-%m-%d %H:%M:%OS3")
[1] "2011-01-21 00:00:00.000" "2011-01-21 00:00:00.002"
R> format(as.POSIXlt(index(x)[1:2]), "%Y-%m-%d %H:%M:%OS6")
[1] "2011-01-21 00:00:00.000999" "2011-01-21 00:00:00.002000" 
```

# javascript - 如何执行此正则表达式命令？

> ID：11571117
> 
> 赞同：1
> 
> 时间：2012-07-20T00:10:18.173
> 
> 标签：javascript, html, regex

这最好用例子来解释。

这是我做任何事情之前的一行： **Monohydrogen_Phosphate HPO%4^2-**

到目前为止，这是我所做的：**磷酸二氢钠 | HPO%4^2-**

完成后应该是这样的：**磷酸一氢 | HPO [4] ^(2-)**

`%`会将第一个数字（如果有）和 + 或 - 符号（如果有）放入标签`<sub>`中，并将`^`第一个数字和 +/- 放入`<sup>`标签中。

我正在使用 Javascript 的 RegEx 替换，但我不介意切换到 PHP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T00:16:30.360

```
var txt = "HPO%4^2-";
txt = txt.replace(/%(\d*[+-]?)/, "<sub>$1</sub>");
txt = txt.replace(/\^(\d*[+-]?)/, "<sup>$1</sup>");

txt     //HPO<sub>4</sub><sup>2-</sup> 
```

干得好。

有关更多信息，请参阅 MDN [`replace`^([- 示例：在字符串中切换单词])](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace#Example%3a_Switching_words_in_a_string)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T00:19:57.420

允许数字和符号的示例：

```
var str = "HPO%4^2-";
var html = str
    .replace(/%([\d\-+]+)/g, "<sub>$1</sub>")
    .replace(/\^([\d+\-]+)/g, "<sup>$1</sup>"); 
```

请注意，`/g`如果您希望允许多次替换，则需要使用修饰符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T00:21:18.320

这是一个更好的例子：

```
var text = "Monohydrogen Phosphate | HPO%4^2-";
text = text.replace(/%(\d+[+-]?)/, "<sub>$1</sub>");
text = text.replace(/\^(\d+[+-]?)/, "<sup>$1</sup>"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T00:54:47.840

# android - MediaPlayer.start() 不能在构造函数中调用？

> ID：11571118
> 
> 赞同：2
> 
> 时间：2012-07-20T00:10:31.837
> 
> 标签：android, media-player, android-mediaplayer

为了减少在整个应用程序中的许多地方使用 MediaPlayer 时的行数，我将 MediaPlayer 子类化，并在构造函数中调用相同的 3 行，每次需要播放媒体文件时重复：

```
public MyMediaPlayer(Context context, int resid) {
    create(context, resid);
    setOnCompletionListener(this);
    start();        
} 
```

所以我只把它放在调用者中，而不是那 3 行：

```
new MyMediaPlayer(this, R.raw.happybirthday); 
```

它可以编译和构建，甚至可以运行，但媒体文件由于某种原因无法播放。

我检查了 LogCat 并注意到：

```
07-19 20:00:51.124: E/MediaPlayer(16517): start called in state 1
07-19 20:00:51.124: E/MediaPlayer(16517): error (-38, 0) 
```

这些错误是什么意思？

我错过了什么？

顺便说一句，[onCompletion()](http://developer.android.com/reference/android/media/MediaPlayer.html#setOnCompletionListener%28android.media.MediaPlayer.OnCompletionListener%29)被调用并且运行良好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T00:39:06.230

这意味着：MediaPlayer 遵守状态图，您不能在每个状态下都调用 start()。下面是状态图，您没有在 Prepared、PlaybackCompleted 或 Paused 中调用 start。

即使您在正确的状态下执行此操作，直接在 onCreate 或任何其他初始化方法中调用它也不是一个好习惯，因为这些方法保留用于初始化您的布局和应用程序。

您可以在 onCreate() 或 onStart() 之一中执行以下操作，以确保在完成后播放。

```
// delaying play until after all application initialization is done
    findViewById(R.id.main_page_layout).post(new Runnable() {
       public void run() {
         //play your music here
       }
    }); 
```

![在此处输入图像描述](../Images/536f74ab876cdde848930a7cc8a36344.png)

# objective-c - 向 UIScrollView 中的元素添加填充

> ID：11571120
> 
> 赞同：1
> 
> 时间：2012-07-20T00:10:38.453
> 
> 标签：objective-c, ios, uiscrollview, padding

我正在尝试创建一个 grid `UIScrollView`，到目前为止它工作得很好，我只是`UIImageView`在向“UIScrollView”中显示的 s 的宽度和高度添加 20px 填充时遇到了一点麻烦。

目前，我将 20px ( `px`& `py`) 添加到 UIImageView 框架的`x`和`y`值中。但是，这只是将行沿 20px 移动，将列向下移动 20px。请你能告诉我哪里出错了吗？

```
int x = 0;
int y = 0;
int w = 65;
int h = 65;
int c = 0;
int r = 0;
int px = 20;
int py = 20;

for (int i = 0; i < [self.content count]; i++) {

    if (c < 4)
        c++;
    else if (c == 4) {
        c = 0;
        r++;
    }

    x = c * w;

    y = r * h;

    x += px;

    y += py;

    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(x, y, w, h)];

    [imageView setImage:[self.content objectAtIndex:i]];

    [imageView setContentMode:UIViewContentModeScaleToFill];

    [self.scrollView addSubview:imageView];

    [imageView release];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T00:28:48.657

你想要每个图像之间的填充，对吧？就目前而言，您基本上只在最顶部添加一次。相反，添加填充，*然后*乘以行和列。然后每个图像都应该间隔开。

编辑以纠正我的一个愚蠢错误。

```
x = c * (w + px);
y = r * (h + py); 
```

# drupal - drupal - 安排脚本在特定时间运行

> ID：11571123
> 
> 赞同：1
> 
> 时间：2012-07-20T00:11:05.313
> 
> 标签：drupal

对drupal来说是全新的。

我正在构建一个模块，让用户通过表单指定运行外部脚本的时间。我想我需要玩`hook_cron`？但据我了解，它仅在 cron 设置为运行时运行。那么，每次用户提交表单时，我如何告诉 Drupal 在这个时间和那个时间等运行作业？

例如，表单如下所示：

```
Start: 10:00 am 
End: 11:00 am

<Submit> 
```

因此，当用户提交时，Drupal 将首先在上午 10 点运行脚本（在我的模块中定义），然后在上午 11 点再次运行。

我需要什么模块/钩子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T23:59:18.917

将您的 Drupal 站点配置为每 1 分钟运行一次 cron。然后在你的模块中实现一个 hook_cron，并在这个函数内部循环通过表单添加的不同作业，并在通过表单输入的给定时间点运行它们。

# html - th 内元素的直接父级是行吗？

> ID：11571127
> 
> 赞同：0
> 
> 时间：2012-07-20T00:11:34.163
> 
> 标签：html, css

为什么th内的绝对元素将父级设置为行而不是th？如何使绝对定位的子元素相对于 th 而不是行定位

[http://jsfiddle.net/tH7TK/](http://jsfiddle.net/tH7TK/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T00:25:09.350

它是相对于 的`th`，就像你认为它应该是的那样，而不是相对于`tr`. 看看修改后的小提琴。[http://jsfiddle.net/tH7TK/1](http://jsfiddle.net/tH7TK/1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T00:25:50.070

## *[jsFiddle 演示](http://jsfiddle.net/tH7TK/2/)*

```
th *{

 position:relative;
 display:block;
 margin:0 auto;

} 
```

# php - 从base64字符串中获取图像

> ID：11571132
> 
> 赞同：17
> 
> 时间：2012-07-20T00:12:38.667
> 
> 标签：php

我正在尝试使用 base64 编码的字符串并将其作为 php 中的图像返回`$_POST`。在第一行，如果我使用它，如果我硬编码 base64 字符串而不是使用它`$_POST['imgdata']`，则返回错误，所有工作都有效并返回图像。我怎样才能通过使用`preg_match``$_POST``$_POST`

作品

```
$imgstr = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAAAoCAYAAAC7HLUcAAADtUlEQVR4Xu2aLZYqMRCFMxuAFaARg8WwAnaABQEWgwUBFoMFARaDRqAxWBBoVgAbmPcu7/Q7PX3SP0k16TTcnDNqOpXKrXykKsmXUurn7x+bvQJf9l3Z03cFEFwCIosSAZHp53VvAiIPDwGRa+itBQIiDw0BkWvorQUCIg8NAZFr6K0FAiIPDQGRa+itBQIiDw0BkWvorQUCIg8NAZFr6K0FAiIPDQGRa+itBTEg7XZb1Wo11Wg0VKVS+T/Rx+Ohzuezut1uar/feyVAp9NR8Dvaer2ejZ8ExEa1kvSxBgQLbDQaPeFIa4BkPp97AQr8XiwWWpfr9XraVHT/JyA2qpWkjxUg+AWeTqfGU5xMJmq73Rr3y6vD9/e32mw2v3a6sG0CkpfS72PHGBAsst1uZ60A0pjj8Wjd37Yj0j/AAf/jGgGxVfd9+xkDgp0DO0i0oeZYLpfqcrk8F+FgMND+UqMeGQ6HzhVdr9eq1WoljktAnIfF+wGNATmdTtqFH02fsBixKHUgNZtNp8LEQR11goA4DUspBjMCJC69wu6hW/TX6zXPYthKUF29BH/DJ26BYQJiJfFbdzICJFAinKoAGiy4aPGN063D4VDoDqIDGr7iRE13yEBA3nqtW03OCpAsI+EoVXfX4KoGAaA4TIjezXS7XVWtVrXpHwHJEtnP+uYlgCTl/C5OseJOrII6Ka4+IiCftfizzDZXQLAwcXmoO+WCM652D93uhbRqtVo9NSEgWZYGv4ECuQGClAYLM+6eAce/SG9QA7yy9fv9J6ThhvoIu0e4htKdsHEHeWVkymk7F0BQa8xms9gbalwM4u7j1XDoTqx0YHIHKediLcJrMSC6X+zwRJDWIL1x0XR3NBj/fr//Gh67nS4NDPzUncol+M+3WC6CW9AYIkCSinEssvF47PSBYty9i6m22PEMXvYSEFOBS/S9NSBJcLhKqaI6E5ASrbySuGoFSFJaFS2IXepAQFyq/RljGQOS9po3y0td5PoonvNuBCRvRWnPGJAsr2LTZH3VZWHaa93AL0AePQrG/4K6A0W9AcCsQdICXuL/GwES977KdP6vAiSrHzzmzaoUvzMCJO1IN6ucBCSrUvyuaAWMAIl7gGg6CQJiqhi/L0oBI0CKctLzcVmDeB4giXsERKLev74ERK6htxYIiDw0BESuobcWCIg8NARErqG3FgiIPDQERK6htxYIiDw0BESuobcWCIg8NARErqG3FgiIPDQERK6htxYIiDw0BESuobcW/gDZOWY4lzJl1QAAAABJRU5ErkJggg=='; 
```

不工作

```
$imgstr = $_POST['imgdata']; 
```

完整代码

```
$imgstr = $_POST['imgdata'];   
// Grab the MIME type and the data with a regex for convenience
if (!preg_match('/data:([^;]*);base64,(.*)/', $imgstr, $matches)) {
    die("error");
}

// Decode the data
$content = base64_decode($matches[2]);

// Output the correct HTTP headers (may add more if you require them)
header('Content-Type: '.$matches[1]);
header('Content-Length: '.strlen($content));

// Output the actual image data
echo $content; 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-07T12:17:45.113

如前所述，不应错过“+”，其余部分直截了当。如果您不确定它是发布还是获取，请使用 $_REQUEST。

```
// requires php5
define('UPLOAD_DIR', 'images/');
$img = $_REQUEST['img'];
$img = str_replace('data:image/png;base64,', '', $img);
$img = str_replace(' ', '+', $img);
$data = base64_decode($img);
$file = UPLOAD_DIR . uniqid() . '.png';
$success = file_put_contents($file, $data);
print $success ? $file : 'Unable to save the file.'; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-14T07:00:25.237

这就是那个。，你想要以下我想。，

```
<?php
$imgstr = 'image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAAAoCAYAAAC7HLUcAAADtUlEQVR4Xu2aLZYqMRCFMxuAFaARg8WwAnaABQEWgwUBFoMFARaDRqAxWBBoVgAbmPcu7/Q7PX3SP0k16TTcnDNqOpXKrXykKsmXUurn7x+bvQJf9l3Z03cFEFwCIosSAZHp53VvAiIPDwGRa+itBQIiDw0BkWvorQUCIg8NAZFr6K0FAiIPDQGRa+itBQIiDw0BkWvorQUCIg8NAZFr6K0FAiIPDQGRa+itBTEg7XZb1Wo11Wg0VKVS+T/Rx+Ohzuezut1uar/feyVAp9NR8Dvaer2ejZ8ExEa1kvSxBgQLbDQaPeFIa4BkPp97AQr8XiwWWpfr9XraVHT/JyA2qpWkjxUg+AWeTqfGU5xMJmq73Rr3y6vD9/e32mw2v3a6sG0CkpfS72PHGBAsst1uZ60A0pjj8Wjd37Yj0j/AAf/jGgGxVfd9+xkDgp0DO0i0oeZYLpfqcrk8F+FgMND+UqMeGQ6HzhVdr9eq1WoljktAnIfF+wGNATmdTtqFH02fsBixKHUgNZtNp8LEQR11goA4DUspBjMCJC69wu6hW/TX6zXPYthKUF29BH/DJ26BYQJiJfFbdzICJFAinKoAGiy4aPGN063D4VDoDqIDGr7iRE13yEBA3nqtW03OCpAsI+EoVXfX4KoGAaA4TIjezXS7XVWtVrXpHwHJEtnP+uYlgCTl/C5OseJOrII6Ka4+IiCftfizzDZXQLAwcXmoO+WCM652D93uhbRqtVo9NSEgWZYGv4ECuQGClAYLM+6eAce/SG9QA7yy9fv9J6ThhvoIu0e4htKdsHEHeWVkymk7F0BQa8xms9gbalwM4u7j1XDoTqx0YHIHKediLcJrMSC6X+zwRJDWIL1x0XR3NBj/fr//Gh67nS4NDPzUncol+M+3WC6CW9AYIkCSinEssvF47PSBYty9i6m22PEMXvYSEFOBS/S9NSBJcLhKqaI6E5ASrbySuGoFSFJaFS2IXepAQFyq/RljGQOS9po3y0td5PoonvNuBCRvRWnPGJAsr2LTZH3VZWHaa93AL0AePQrG/4K6A0W9AcCsQdICXuL/GwES977KdP6vAiSrHzzmzaoUvzMCJO1IN6ucBCSrUvyuaAWMAIl7gGg6CQJiqhi/L0oBI0CKctLzcVmDeB4giXsERKLev74ERK6htxYIiDw0BESuobcWCIg8NARErqG3FgiIPDQERK6htxYIiDw0BESuobcWCIg8NARErqG3FgiIPDQERK6htxYIiDw0BESuobcW/gDZOWY4lzJl1QAAAABJRU5ErkJggg==';
$new_data=explode(";",$imgstr);
$type=$new_data[0];
$data=explode(",",$new_data[1]);
header("Content-type:".$type);
echo base64_decode($data[1]);
?> 
```

上面的代码将根据您的意愿生成输出。试试这个..这可能会对您有所帮助。

抱歉延迟回复。，现在只有我在很长一段时间后才能恢复我的 StackOverFlow 帐户。

**注意：**忽略您用于图像解码的 PHP 文件上开始 '' 标记之前的空白空间。如果该文件上有任何空白，则意味着它会抛出错误消息，并且它不会创建或显示之后的原始图像解码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-07T13:03:44.950

```
<?php
$data = 'iVBORw0KGgoAAAANSUhEUgAAABwAAAASCAMAAAB/2U7WAAAABl'
       . 'BMVEUAAAD///+l2Z/dAAAASUlEQVR4XqWQUQoAIAxC2/0vXZDr'
       . 'EX4IJTRkb7lobNUStXsB0jIXIAMSsQnWlsV+wULF4Avk9fLq2r'
       . '8a5HSE35Q3eO2XP1A1wQkZSgETvDtKdQAAAABJRU5ErkJggg==';
$data = base64_decode($data);

$im = imagecreatefromstring($data);
if ($im !== false) {
    header('Content-Type: image/png');
    imagepng($im);
    imagedestroy($im);
}
else {
    echo 'An error occurred.';
}
?> 
```

来源：文档。

查看[imagecreatefromstring](http://php.net/manual/en/function.imagecreatefromstring.php)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-20T00:37:27.740

不知道为什么正则表达式不适合你，我复制了 base64 发布数据和你的代码，它工作正常。你可以试试这个，它不使用正则表达式，可能会更快一点，使用更少的内存。

```
$imgstr = $_GET['imgdata'];

list($type, $imgstr) = explode(';', $imgstr);
list(, $type)        = explode(':', $type);
list(, $imgstr)      = explode(',', $imgstr);
$content = base64_decode($imgstr); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-26T07:06:59.233

您可以通过此正则表达式捕获部分：

^数据:([a-zA-Z]+/[a-zA-Z]+);base64\,([a-zA-Z0-9+\=/]+)$

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-25T06:14:28.697

请检查下面的代码它对我来说工作正常，

```
$data = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA1IAAAE7CAYAAADXQrC8AAANvUlEQVR4nO3dLXoqWRuGUebDGBgBA0BjsZFxuDhcVFQMKiYmBoPBIDCImAgEAoGoCexPpM9PkirgSYo06W+JZbr7UPu8u0XdV8GuTlVVBQAAgNN1/u0FAAAA/DRCCgAAICSkAAAAQkIKAAAgJKQAAABCQgoAACAkpAAAAEJCCgAAICSkAAAAQkIKAAAgJKQAAABCQgoAACAkpAAAAEJCCgAAICSkAAAAQkIKAAAgJKQAAABCQgoAACAkpAAAAEJCCgAAICSkAAAAQkIKAAAgJKQAAABCQgoAACAkpAAAAEJCCgAAICSkAAAAQkIKAAAgJKQAAABCQgoAACAkpAAAAEJCCgAAICSkAAAAQkIKAAAgJKQAAABCQgoAACAkpAAAAEJCCgAAICSkAAAAQkIKAAAgJKQAAABCQgoAACAkpAAAAEJCCgAAICSkAAAAQkIKAAAgJKQAAABCQgoAACAkpAAAAEJCCgAAICSkAAAAQkIKAAAgJKQAAABCQgoAACAkpAAAAEJCCgAAICSkAAAAQkIKAAAgJKQAAABCQgoAACAkpAAAAEJCCgAAICSkAAAAQkIKAAAgJKQAAABCQgoAACAkpAAAAEJCCgAAICSkAAAAQkIKAAAgJKQAAABCQgoAACAkpAAAAEJCCgAAICSkAAAAQkIKAAAgJKQAAABCQgoAACAkpAAAAEJCCgAAICSkAAAAQkIKAAAgJKQAAABCQgoAACAkpAAAAEJCCgAAICSkAAAAQkIKAAAgJKQAAABCQgoAACAkpAAAAEJCCgAAICSkAAAAQkIKAAAgJKQAAABCQgoAACAkpAAAAEJCCgAAICSkAAAAQkIKAAAgJKQAAABCQgoAACAkpAAAAEJCCgAAICSkAAAAQkIKAAAgJKQAAABCQgoAACAkpAAAAEJCCgAAICSkAAAAQkIKAAAgJKQAAABCQgoAACAkpAAAAEJCCgAAICSkAAAAQkIKAAAgJKQAAABCQgoAACAkpAAAAEJCCgAAICSkAAAAQkIKAAAgJKQAAABCQgoAACAkpAAAAEJCCgAAICSkAAAAQkIKAAAgJKQAAABCQgoAACAkpAAAAEJCCgAAICSkAAAAQkIKAAAgJKQAAABCQgoAACAkpAAAAEJCCgAAICSkAAAAQkIKAAAgJKQA/g/st5uyWi7K09NjeXx8LE9Ps7JYPZfd/v9rDf8F5ghwGYQUQJPdsoyHwzIajXLDYbm6nZV9w2cMB8MyXW7fXG+3mpbh4P1/OyzD62nZVlWpql15GI/K8P1nDUflbv5S+3fYrJ7KeNgrnU6nQbeMbqblZXfqXC5hDZ/Yp+GwXN8vv3//D8zs0J8dTz+uNZ5ja+sHoI6QAmiwXUwO3LSeoHdTNtt56Tf8+5v55rTr9SZlU1WlqrZl0qv/rN549m79+zKbDE9ea/fDn29yCWt4a3fqPvUm/wTpN+7/kZk16d3MvzzH9tYPQB0hBdDgyzei/UnZ7uZl0EJIvQbAttz26z+r/+bGuyrzySBa6/Xj84lzuYQ1vLWejk68xqgsg6+/tbL/R2bW5O9ZfnaO7a0fgDpCCqDByU86Gg3LYvP9IbVb3sVrfb+WZpewhrdm4/6J1+iVx5dv3v/d4ZkdC6mvzLG99QNQR0gBNFiETwI+6pfZy3eH1LbcDdJ19srD8/7EuVzCGt6uZxJEShJrrez/9vDMmrx+te9rc2xv/QDUEVIADTbzuw+HPwwHzT/27w/fHhIxGI7L8rufSG2eSu/IDXJ/MCyDfveTN8yXsIa/7JdlWHeNbrf2uoPbxffu/5EnUr1+zUEkw8HrwRhfnGN76wegjpACCOyXtw03ooOyqPv9zTf/Rurg72J612X+vPt9vc3y4XVt3euyPnkGl7CGv7w81sbGcPJQbocf/3n36uFLJ9HF+39kZpPFrvFa55jj59YPQB0hBRBovrlteKLyzSG1nl413nzfrz+ub7eclE5nHJzOdglr+Gtm85uGQFmV+7qvxX3xJLp4/4/M7NBXDc8xx8+tH4A6QgogcOhGdH4BITWfNBy80L0uz7V/p31Zr9bBU5pLWMMfy9v63wFNltuyqv13gzL/wtfV4v0/MrNDIXWOOX5u/QDUEVIAgTZDarJ490Lec4bU73dRfdUlrOGXfXkY1f0Wql/m+6ohpLrlftX8dbrW9//IzG7m28ZrnWOOQgqgPUIKINBmSF1P5+V5vS6r1aqs189lMb3+ckitH5q+DtYt0/VnTsV77xLW8Mum3NS+6LZf5ruq7Bv2avz08n37f2Rm46fnUu13Zbd7a3+mOQopgPYIKYBAmyF1siCkdo2HCXRKp9Mrt7P1F2dwCWv4M9v+gSc2Tet4/+Lgs+7/kZk1uZlvzjJHIQXQHiEFELj0kGo8DvzN5w3L7cO8bD51StslrOHVbtXwstpfX31rmv3gruy+a/+PzOxQSJ1jjkIKoD1CCiBw8SFVNR/A8FG3XN/Nwqi4hDW8enkaHw26Ud01P3vU+mf2/8jMDobUGeYopADaI6QAAj8hpKpqW6ZXzS9e/fj547I6+SS7S1jDq0XDYQx/1tG01s8f9f3dIdX2HIUUQHuEFEDgZ4TUq/XTXRnWHsZQ4+Svu13CGl7XcVf3nqhOp0x+n4TXdKrfxxMTz7b/R2ZWr1um67cnC7Y1RyEF0B4hBRC49PdI1XlZzcrk6vhXxMazU06zu4Q1VKWq1uWqW/8ZvcmsPK9XZb1el4fr+qdWo/vV9+z/kZmNH9dlt92WzWbzx7b5RL6vzlFIAbRHSAEEfmJI/bJ/WZRxw1OcTqdTulePJ8zgEtZQlWo7qz+x70S98ex79v/IzA69R+occxRSAO0RUgCBnxxSr9blqikwfl/nkEtYw4GXF5/qxOt8ef+PzOz9/wOZfI5CCqA9Qgog8DNCalcWT/PGUHh5bHjxb2dQ5kcPfLiENVRldT/6Wkh1hmURHm7xqf0/MrPjIdXuHIUUQHuEFEDgZ4TUttx0OmVwu6j9OzQ/zRmccDN9CWuoytM4OMmuVq88PDf/Fqm1/T8ys8lid+Sa7c5RSAG0R0gBBH5KSP367wbjaXl+92Ti4ar+JLt2v9p33jVMwuPET5n/Wfb/yMx6w6tyfX39xtXVqNw8rM4yRyEF0B4hBRD4aSH1qltG40m5n96X8aj+FLtOp1M6/duzhFTra9gtmmf6z2l1+/2+7PdVqapNY3T1J/VPeVrd/yMza9JrfBfW1+YopADaI6QAAj8ipD757qrhSUeC//tr2D8/lO6JM62qqsxv6oOjO5qW/bn3/8jMmvyeZctzFFIA7RFSAIH/bkid9tukS1jDdn7T8Od75fHl4++eFpOGJze9m/Jy7v0/MrPzhFTzHIUUQHuEFEDg0I3orO5GdDtvfN9RElKbqiqHfhv0PmLSdyxNTv690L+/hsWk6YW09TGwaQyvhj1rc/+PzKxJ76+QanOOn1s/AHWEFECg+Ua04Tjt3bKMGm5475a70z578Ov3LrtyP6w/XKA/efsOp+3zvNyOR6V37IZ9cF1m62Mnx/3t31/DvDGkRmW5T/asX542Z97/f2Y2HTUcCtHgaro+yxw/t34A6ggpgP+0fdk8r8ti9lQeHx7KdDotD49PZbZYlpdtfvz3z13Df4E5AlwSIQUAABASUgAAACEhBQAAEBJSAAAAISEFAAAQElIAAAAhIQUAABASUgAAACEhBQAAEBJSAAAAISEFAAAQElIAAAAhIQUAABASUgAAACEhBQAAEBJSAAAAISEFAAAQElIAAAAhIQUAABASUgAAACEhBQAAEBJSAAAAISEFAAAQElIAAAAhIQUAABASUgAAACEhBQAAEBJSAAAAISEFAAAQElIAAAAhIQUAABASUgAAACEhBQAAEBJSAAAAISEFAAAQElIAAAAhIQUAABASUgAAACEhBQAAEBJSAAAAISEFAAAQElIAAAAhIQUAABASUgAAACEhBQAAEBJSAAAAISEFAAAQElIAAAAhIQUAABASUgAAACEhBQAAEBJSAAAAISEFAAAQElIAAAAhIQUAABASUgAAACEhBQAAEBJSAAAAISEFAAAQElIAAAAhIQUAABASUgAAACEhBQAAEBJSAAAAISEFAAAQElIAAAAhIQUAABASUgAAACEhBQAAEBJSAAAAISEFAAAQElIAAAAhIQUAABASUgAAACEhBQAAEBJSAAAAISEFAAAQElIAAAAhIQUAABASUgAAACEhBQAAEBJSAAAAISEFAAAQElIAAAAhIQUAABASUgAAACEhBQAAEBJSAAAAISEFAAAQElIAAAAhIQUAABASUgAAACEhBQAAEBJSAAAAISEFAAAQElIAAAAhIQUAABASUgAAACEhBQAAEBJSAAAAISEFAAAQElIAAAAhIQUAABASUgAAACEhBQAAEBJSAAAAISEFAAAQElIAAAAhIQUAABASUgAAACEhBQAAEBJSAAAAISEFAAAQElIAAAAhIQUAABASUgAAACEhBQAAEBJSAAAAISEFAAAQElIAAAAhIQUAABASUgAAACEhBQAAEBJSAAAAISEFAAAQElIAAAAhIQUAABASUgAAACEhBQAAEBJSAAAAISEFAAAQElIAAAAhIQUAABASUgAAACEhBQAAEBJSAAAAISEFAAAQElIAAAAhIQUAABASUgAAACEhBQAAEBJSAAAAISEFAAAQ+h9OaCdW3kXmdwAAAABJRU5ErkJggg==';
$data = str_replace('data:image/png;base64,', '', $data);
$data = str_replace(' ', '+', $data);
$data = base64_decode($data); // Decode image using base64_decode
$file = uniqid() . '.png'; //Now you can put this image data to your desired file using file_put_contents function like below:
$success = file_put_contents($file, $data); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-04T12:49:50.160

```
$imgstr = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAAAoCAYAAAC7HLUcAAADtUlEQVR4Xu2aLZYqMRCFMxuAFaARg8WwAnaABQEWgwUBFoMFARaDRqAxWBBoVgAbmPcu7/Q7PX3SP0k16TTcnDNqOpXKrXykKsmXUurn7x+bvQJf9l3Z03cFEFwCIosSAZHp53VvAiIPDwGRa+itBQIiDw0BkWvorQUCIg8NAZFr6K0FAiIPDQGRa+itBQIiDw0BkWvorQUCIg8NAZFr6K0FAiIPDQGRa+itBTEg7XZb1Wo11Wg0VKVS+T/Rx+Ohzuezut1uar/feyVAp9NR8Dvaer2ejZ8ExEa1kvSxBgQLbDQaPeFIa4BkPp97AQr8XiwWWpfr9XraVHT/JyA2qpWkjxUg+AWeTqfGU5xMJmq73Rr3y6vD9/e32mw2v3a6sG0CkpfS72PHGBAsst1uZ60A0pjj8Wjd37Yj0j/AAf/jGgGxVfd9+xkDgp0DO0i0oeZYLpfqcrk8F+FgMND+UqMeGQ6HzhVdr9eq1WoljktAnIfF+wGNATmdTtqFH02fsBixKHUgNZtNp8LEQR11goA4DUspBjMCJC69wu6hW/TX6zXPYthKUF29BH/DJ26BYQJiJfFbdzICJFAinKoAGiy4aPGN063D4VDoDqIDGr7iRE13yEBA3nqtW03OCpAsI+EoVXfX4KoGAaA4TIjezXS7XVWtVrXpHwHJEtnP+uYlgCTl/C5OseJOrII6Ka4+IiCftfizzDZXQLAwcXmoO+WCM652D93uhbRqtVo9NSEgWZYGv4ECuQGClAYLM+6eAce/SG9QA7yy9fv9J6ThhvoIu0e4htKdsHEHeWVkymk7F0BQa8xms9gbalwM4u7j1XDoTqx0YHIHKediLcJrMSC6X+zwRJDWIL1x0XR3NBj/fr//Gh67nS4NDPzUncol+M+3WC6CW9AYIkCSinEssvF47PSBYty9i6m22PEMXvYSEFOBS/S9NSBJcLhKqaI6E5ASrbySuGoFSFJaFS2IXepAQFyq/RljGQOS9po3y0td5PoonvNuBCRvRWnPGJAsr2LTZH3VZWHaa93AL0AePQrG/4K6A0W9AcCsQdICXuL/GwES977KdP6vAiSrHzzmzaoUvzMCJO1IN6ucBCSrUvyuaAWMAIl7gGg6CQJiqhi/L0oBI0CKctLzcVmDeB4giXsERKLev74ERK6htxYIiDw0BESuobcWCIg8NARErqG3FgiIPDQERK6htxYIiDw0BESuobcWCIg8NARErqG3FgiIPDQERK6htxYIiDw0BESuobcW/gDZOWY4lzJl1QAAAABJRU5ErkJggg==';
preg_match("/data\:image\/(.*)\;base64/",$imgstr, $match);
echo $match[1]; 
```

^^^^ 返回文件扩展名。

```
$data = str_replace('data:image/png;base64,', '', $imgstr);
data = str_replace(' ', '+', $data);
$data = base64_decode($data);
file_put_contents("/files/youfilemane.".$match[1],$data); 
```

^^^^ 从 base64 创建文件。

# javascript - 给定一个 UL，如果有的话，如何删除 5 之后的所有项目？

> ID：11571133
> 
> 赞同：0
> 
> 时间：2012-07-20T00:12:39.343
> 
> 标签：javascript, jquery

使用 jQuery 有没有办法在位置 6 之后删除 LI 项？

```
<ul>
 <li>1</li>
 <li>2</li>
 <li>3</li>
 <li>4</li>
 <li>5</li>
 <li>6</li>
 <li>7</li>
</ul> 
```

一种动态删除项目 6+（在本例中为 6 和 7）并且在少于 6 个项目时不中断的方法？有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-20T00:14:52.630

只是：

```
$('ul li:gt(4)').remove(); 
```

[http://jsfiddle.net/zerkms/dpCsj/](http://jsfiddle.net/zerkms/dpCsj/)

PS：在您的标题中，您说“5 之后”和“6 之后”在问题正文中。我从标题中选择了一个

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T00:15:14.417

可以使用第 n 个子选择器来完成：

`$( 'ul li:nth-child( n + 6 )' ).remove( );`

# c# - 在 Linq 中使用方法

> ID：11571137
> 
> 赞同：-3
> 
> 时间：2012-07-20T00:13:46.413
> 
> 标签：c#, linq

我写了这个方法来转换日期：

```
Public Static string ConvertDate(DateTime dt)
{
....
} 
```

我想在 Linq 代码中使用这个方法：

```
var lst = (from L in AllList
           select new { ConvertDate(L.DateReg).ToString(), L.LastName, L.FirstName}); 
```

但是上面的代码有错误。什么是正确的代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T00:18:10.290

定义匿名对象时，编译器必须能够为对象的属性命名。它可以为属性、字段和其他命名变量隐式执行此操作，但不能用于方法调用。给它一个名字。

```
var query =
    from item in AllList
    select new
    {
        DateReg = ConvertDate(item.DateReg), // lets call it DateReg
        item.LastName,
        item.FirstName,
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T00:16:58.807

```
var lst = (from L in AllList 
       select new { Date = ConvertDate(L.DateReg).ToString(), L.LastName, L.FirstName}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T00:26:21.083

尝试指定匿名类型的属性名称；

```
var lst = (from L in AllList
           select new { DateReg = ConvertDate(L.DateReg).ToString(), LastName =L.LastName, FirstName = L.FirstName}); 
```

# jquery - 如何在页面加载期间使用带有 JSF 的 jquery 专注于输入

> ID：11571140
> 
> 赞同：1
> 
> 时间：2012-07-20T00:14:12.850
> 
> 标签：jquery, jsf, focus

当我手动构建我的输入时，我可以专注于它但是当我使用 JSF 标记生成我的输入时，表单名称会附加到 id 并且我不能再引用它。

我试过了

```
$("#username").focus(); 
```

和

```
$("#loginForm:username").focus(); 
```

没有任何运气。有什么建议吗？

这是生成的jsf html：

```
<input id="loginForm:username" type="text" name="loginForm:username" size="30" /> 
```

这就是我触发呼叫的方式...

```
$(document).ready(function() {
    alert("checkA");
    $("#username").focus();
    alert("checkB");
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T01:23:51.260

`:`是 CSS 标识符中的一个特殊字符。你需要通过`\`. 请注意，`\`本身也是 JavaScript 字符串中的一个特殊字符，因此要表示实际的`\`，您需要将其双重转义为`\\`.

所以，这应该这样做：

```
$("#loginForm\\:username").focus(); 
```

### 也可以看看：

*   [如何使用 jQuery 选择 JSF 组件？](https://stackoverflow.com/questions/7927716/how-to-select-primefaces-ui-or-jsf-components-using-jquery/7928290#7928290)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T00:35:56.950

尝试：

```
$("input[name*='loginForm']").focus(); 
```

# javascript - 如何从 javascript 闭包中调用属性

> ID：11571141
> 
> 赞同：1
> 
> 时间：2012-07-20T00:14:24.300
> 
> 标签：javascript

我有一个 javascript 闭包和方法内部`getresult()`。我想调用对象中的一个属性`quo`。

```
var quo = function (test) {
        talk: function () {
            return 'yes';
        }
        return {
            getresult: function () {
                return quo.talk();
            }
        }
    }
var myQuo = quo('hi');
document.write(myQuo.getresult()); 
```

从内部`getresult()`，我如何调用该属性`talk`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T00:20:10.953

你的语法是错误的，你不能从 quo 引用中调用talk，talk 不能从外部访问，如果你想从 quo 调用talk，那么你必须在返回的对象中添加对它的引用

```
var quo = function (test) {
    function talk() {
        return 'yes';
    }
    return {
        getresult: function () {
            return talk();
        },
        talk: talk
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T00:27:40.210

`quo`不是对象，而是一个简单的函数，并且没有属性（从技术上讲，它可以有，但在这里不适用）。

```
var quo = function(test) {
     function talk() {
          return 'yes';
     }
     /* OR:
     var talk = function() {
          return 'yes';
     }; */

     return {
         getresult: function() {
             // in here, "quo" references the closure function.
             // "talk" references the local (function) variable of that "quo" function
             return talk();
         }
     }
}
var myQuo = quo('hi');

myQuo.getresult(); // "yes" 
```

如果你想`talk`在对象上获得一个属性“” `myQuo`，你需要使用这个：

```
var quo = function(test) {
    return {
        talk: function() {
             return 'yes';
        },
        getresult: function() {
             // in here, "quo" references the closure.
             // "this" references current context object,
             // which would be the the object we just return (and assign to "myQuo")
             return this.talk();
        }
    };
}
var myQuo = quo('hi');

myQuo.getresult(); // "yes" 
```

[`this`在 MDN](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this)上阅读有关该关键字的更多信息。

# visual-studio-2010 - PLSQL 存储过程在实体框架中不返回任何值

> ID：11571143
> 
> 赞同：0
> 
> 时间：2012-07-20T00:14:28.207
> 
> 标签：visual-studio-2010, oracle, entity-framework, stored-procedures, plsqldeveloper

我有一个有效的 plsql oracle 存储过程（我已经在 plsql 中对其进行了测试，它返回了正确的值）：

```
 PROCEDURE FetchCode(code OUT NUMBER) IS
  BEGIN
      SELECT MYSEQ.NEXTVAL INTO code FROM DUAL;    
  END FetchCode; 
```

以及使用实体框架的视觉工作室解决方案。

csdl 文件包含

```
 <FunctionImport Name="FETCHCODE" ReturnType="Collection(Decimal)">
      <Parameter Name="CODE" Mode="Out" Type="Decimal" />
      </FunctionImport> 
```

我已成功将上述函数拉入实体，但是当我尝试“获取列信息”按钮时，我收到“所选存储过程不返回任何列”。信息。

在编辑功能导入下，我可以看到它：

返回标量集合：十进制

数据类型设置为“数字”，方向为“输出”。

任何人都可以帮助解释为什么这样的 sp 可以在 plsql 上工作，但不能在 Visual Studio 上工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T01:28:38.963

尝试

```
CREATE or REPLACE FUNCTION FetchCode IS
RETURN NUMBER
DECLARE
  code   NUMBER(10);
  BEGIN
      SELECT MYSEQ.NEXTVAL INTO code FROM DUAL;    
      RETURN code;
  END FetchCode; 
```

`OUT or IN OUT`通常，Oracle 中的函数能够返回值，这与通过变量访问输出的过程不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T01:43:09.943

尝试以下

```
 CREATE OR REPLACE PROCEDURE FetchCode
  (
     results_ OUT SYS_REFCURSOR
  ) IS
  BEGIN
      OPEN results_ FOR 
      SELECT MYSEQ.NEXTVAL As Code FROM DUAL;    
  END FetchCode; 
```

# jquery - jQuery 和恢复默认设置

> ID：11571145
> 
> 赞同：0
> 
> 时间：2012-07-20T00:14:46.857
> 
> 标签：jquery

我有以下代码：

```
$(document).ready(function(){
   $("#cont").hide();
   $("#slide").show();

   $('#slide').click(function(){
       $("#cont").slideToggle();
       $("#slide").css("background-image", "url('img/slideup.png')");
   });
}); 
```

代码只是调用 div 在单击另一个 div 并返回后从无处向下滑动。在开始时，就像在 CSS 中一样，我将图标设置为向下箭头，然后单击后它变为向上，它将保持这样的状态。我根本不知道如何根据 div 状态使其“toogle”。我已经尝试了很多东西，但脚本只是掉了下来，谁能给我一些线索或使 bg 图像切换的代码？像正确的 div 声明，因为我没有工作......

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T00:37:20.037

在这里试试这个例子让你[开始](http://jsfiddle.net/tRx8F/1/)我会在css而不是javascript中设置初始显示。

```
$(document).ready(function(){

       var slid = false,
           toggleState = function(state){

               // Figure out which direction to go.
               var direction = state ? "slideUp" : "slideDown",
                   url = state ? "img/slideup.png" : "img/slidedown.png";

               // Do the slide.
               $("#cont")[direction]();
               $("#slide").css("background-image", "url(" + url + ")" );

               // Change the state 
               slid = !state;

           };

    $('#slide').click(function(){

        toggleState(slid);

    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T00:19:46.683

不是 100% 确定你的意思，但你可以尝试这样的事情：

```
$('#slide').click(function(){
    if ($("#cont").is(':hidden')) {
        $("#cont").slideDown(400,function () {
            $("#slide").css("background-image", "url('img/slideup.png')");
        });
    }
    else {
        $("#cont").slideUp(400,function () {
            $("#slide").css("background-image", "url('img/slidedown.png')");
        });
    }
}); 
```

# r - 整理凌乱的记事本数据

> ID：11571148
> 
> 赞同：0
> 
> 时间：2012-07-20T00:15:06.123
> 
> 标签：r, sorting, text-files, notepad

我在记事本中有一些数据很乱。保存不同数据的任何不同列之间基本上没有空格。我知道数据的空间。例如，第 1-2 列是 X，第 7-10 列是 Y....

我该如何组织这个？可以在R中完成吗？做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T02:30:46.363

`?read.fwf`在这种情况下可能是一个不错的选择。

设置文件的路径：

```
temp <- "\pathto\file.txt" 
```

然后设置文件中变量的宽度，如下所示。

```
#1-2 = x, 3-10=y
widths <- c(2,8) 
```

然后设置列的名称。

```
cols <- c("X","Y") 
```

最后，将数据导入会话中的新变量：

```
dataset <- read.fwf(temp,widths,header=FALSE,col.names=cols) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T00:22:55.313

我过去为处理这种混乱所做的事情实际上是将其作为分隔宽度文本导入 excel，然后另存为 CSV。

只是给你一个建议。如果这是一个一次性的项目，那应该没问题。根本没有编码。但是，如果它是屡犯……那么您可能会查看正则表达式。

即 ^(.{6})(.{7})(.{2})(.{5})$ 用于 6,7,2 和 5 个字符宽度的 4 个字段，按顺序排列。

# iphone - 并非 TableView 中的所有单元格都显示设置的字体和颜色

> ID：11571154
> 
> 赞同：0
> 
> 时间：2012-07-20T00:15:58.247
> 
> 标签：iphone, xcode, uicolor, uifont

我试图让我的表格视图单元格为每个单元格显示某种字体和颜色。在 cellForRowAtIndexPath 中使用以下代码，大多数单元格都显示新的颜色和字体，但由于某种原因，有 2 个单元格没有。有任何想法吗？

```
CGFloat nRed=204.0/255.0;
   CGFloat nBlue=0/255.0;
   CGFloat nGreen=153.0/255.0;
   UIColor *myColortext=[[UIColor alloc]initWithRed:nRed green:nBlue blue:nGreen alpha:1];

    UIFont *cellFont = [UIFont fontWithName:@"noteworthy" size:15];

    cell.textLabel.text = entry.articleTitle; 

    cell.textLabel.font = cellFont;

   cell.textLabel.textColor = myColortext; 
```

# html - Android 浏览器/Samsung Galaxy SII Web 表单上的滚动错误。选择列表命中框不滚动

> ID：11571157
> 
> 赞同：14
> 
> 时间：2012-07-20T00:16:06.747
> 
> 标签：html, android-4.0-ice-cream-sandwich, galaxy, android-browser, samsung-mobile

**编辑：** 我已经上传了一段视频到 youtube，在这里展示了这个错误：[http ://www.youtube.com/watch?v=zkDYlgtX5Hk](http://www.youtube.com/watch?v=zkDYlgtX5Hk)

我发现了一个非常奇怪的错误，我在运行 Android 4.03 ICS 的三星 Galaxy S2 上测试我的新 Web 应用程序。

发生的情况是，当您在默认 Web 浏览器中加载表单然后向下滚动页面时，即使表单元素本身已向上滚动，hitbox/可触摸区域似乎仍停留在页面首次加载时屏幕上的位置屏幕。

据我所知，我可以用我可用的少数测试设备，我认为这只会发生在三星 Galaxy S2 上，因为我已经在具有相同版本的 android 的 Android 模拟器中尝试过它并且无法复制问题。我知道这使它成为一个非常特定的用户群，但最后我检查了 Galaxy s2 是我的国家（澳大利亚）最受欢迎的 Android 手机，所以很高兴找到一个修复程序。

我在[http://users.tpg.com.au/geoffica/test.html创建了一个非常简单的页面来演示这一点](http://users.tpg.com.au/geoffica/test.html)

您可以通过执行以下操作来复制问题：

1.  在 Galaxy S2 上加载页面
2.  滚动浏览器，使页面完全填满屏幕，地址栏*就*在屏幕顶部。
3.  选择框所在的位置，将手指放在屏幕一侧作为选择列表所在位置的标记。
4.  向下滚动页面任意距离，（同时仍将选择列表保留在屏幕上）然后触摸选择列表曾经所在的空白区域，并且选项应该出现在屏幕上。可能需要几次尝试才能得到它，但它会发生。

现在我知道您认为这很难复制并且可能很少会发生，但是在我为客户构建的表单上，由于元素的位置，hitbox 总是与表单的提交按钮重叠，使其很难点击提交按钮。如果命中框重叠，选择列表也会从其他选择列表中窃取触摸，从而在触摸时出现错误的选项。

我已经尝试了很多事情，但到目前为止我发现的唯一解决方法是使用 touchstart 事件来触发我的提交按钮而不是点击事件。这似乎发生在选择列表的点击事件之前并阻止它首先进入，但这远非理想，并且不会阻止选择列表窃取页面上其他元素的点击。

我还考虑过滚动我自己的 jquery 插件来将选择列表放在屏幕外，然后通过触摸链接或其他东西来触发它们的点击事件。如果它是移动设备，那么无论选择列表的位置如何，选项都会出现在屏幕上。然而，这将非常麻烦，我需要考虑这将对来自 pc 或 iPad 的用户产生的影响，例如，它会在下拉列表中显示选项。这对我来说听起来很成问题。甚至可能需要一些 Galaxy s2 特定的浏览器/设备嗅探。

除了不使用选择列表之外，是否有人对此有真正的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T01:06:14.840

您是否有机会使用绝对定位？这将修复到屏幕上的某个区域而不是页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T12:56:42.060

首先，我会将文档标题更新为适当的 HTML5 标题：

```
<!DOCTYPE html> 
```

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2013-02-14T14:30:40.083

我认为这可能是您可以使用**Jquery-mobile**解决的问题 很简单，因为当您不使用它时，您的网站在移动浏览器上看起来很奇怪

可能这是解决方案，这只是一个提示:)

# linux - Git 自动补全看起来很奇怪（而且只有一半功能）

> ID：11571163
> 
> 赞同：6
> 
> 时间：2012-07-20T00:16:41.397
> 
> 标签：linux, macos, git, bash, autocomplete

按照[这些出色的说明在 OSX 中启用 Git bash 自动完成功能](http://railslove.com/blog/2011/11/25/git-autocomplete-in-bash-on-a-mac/)：

```
curl https://raw.github.com/git/git/master/contrib/completion/git-completion.bash -o ~/.git-completion.bash
echo "source ~/.git-completion.bash" >> ~/.bash_profile 
```

`Tab``Tab`当我在命令行输入“git”时，我得到以下输出：

![来自 git tab-tab 的输出](../Images/6e3166c82020876a7a8b64cb7d4aa5d6.png)

遵循多个不同的教程会产生相同的结果。要么我不知道正确的搜索词，要么关于这个问题的文档很少......

任何人在为 OSX 实现 git 自动完成时遇到过类似的问题？如果这很重要，请运行 Lion。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T07:16:38.293

我也有同样的问题。使用`export GREP_OPTIONS='--color=auto`代替`export GREP_OPTIONS='--color=always'`可以解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T06:08:47.770

原来这是一个简单的修复。我只是从我的 ~/.bashrc 文件中删除了以下行（根据[这篇文章](https://bbs.archlinux.org/viewtopic.php?id=141415)）：

```
export GREP_OPTIONS='--color=always' 
```

...现在它就像一个魅力:)

# opengl - OpenGL - 使用带有 glDrawElements 的着色器

> ID：11571164
> 
> 赞同：0
> 
> 时间：2012-07-20T00:16:44.703
> 
> 标签：opengl, render, shader

我很好奇您在使用 glDrawElements() 进行渲染时如何指定要使用的着色器。它是使用的最后一个绑定的着色器吗？或者你必须使用其他命令。

总结一下：当我使用 glDrawElements() 时，如何指定使用哪个着色器，即将在我渲染的 VBO 中的三角形上使用的着色器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T00:19:27.603

正确，您只需要将着色器与[`glUseProgram()`](http://www.opengl.org/sdk/docs/man/xhtml/glUseProgram.xml). 对渲染函数的任何后续调用都将通过绑定程序的管道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T05:56:26.700

```
glUseProgram(myCoolProgramID);
set_up_render_states();
glDraw*

glUseProgram(myGreatProgramID);
set_up_render_states();
glDraw*

glUseProgram(0);
swap_buffers(); 
```

# javascript - 如何在没有 DOM 事件的情况下从 Backbone.js 中的视图获取信息到模型

> ID：11571166
> 
> 赞同：0
> 
> 时间：2012-07-20T00:17:06.483
> 
> 标签：javascript, backbone.js, backbone-relational, backbone-views

我是 Backbone.js 的新手，在为模型视图关系找出合适的架构时遇到了麻烦。

我有一个视图，其中包含一个输入框和一个模型，该模型应该获取该输入框的内容并将其发送到服务器。

我的问题是我并不总是有一个谨慎的 DOM 事件来触发对视图更新模型数据的请求，例如`input.change`. 有时代码本身需要要求模型向服务器发送更新。

到目前为止，我已经想到了三个解决这个问题的方法，但我不确定它们是否有用：

*   在输入元素的`keypress`事件上更新模型

*   使用模型初始化视图后，让视图更新/向模型添加一个名为“ `get_input_value()`”的函数，该函数返回输入框的值

*   每当应用程序需要请求模型更新服务器时，首先调用视图中的一个函数，将用户在视图中键入的所有信息更新到模型中。

请记住，这是一个简化的示例。视图还包含子视图，所有子视图都包含许多用户可以操作的元素，模型需要使用所有这些信息进行更新，以便它可以更新服务器。

任何帮助和意见表示赞赏！非常感谢！

**编辑 ：：：**

根据 machineghost 的回复，我现在看到我没有正确表达这个问题：

有一个 DOM 事件，但问题是它不一定来自使用模型的视图内部。它可能源自路由器或其他视图，并由全局事件处理程序触发。此外，没有 1:1 的视图模型关系。该模型由以不同方式表达模型的多个视图使用。所以在这种情况下，更新服务器的命令似乎不应该通过视图，而是通过模型本身。如果是这种情况，模型必须能够说“用我的观点同步我！”。

但我不知道如何在不违反规则的情况下做到这一点，从而在架构上产生其他问题......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T00:52:46.170

好的，这是一个主观的问题，所以如果这看起来像是我喷了两分钱，请原谅我。在我回答你的问题之前，我不得不承认我有点怀疑你：

> 并不总是有谨慎的 DOM 事件

因为几乎用户可以做的任何事情都会触发您可以观察的事件。例如，如果您想等到用户更改文本输入，则有`change`，而且（如您所述）各种`key*`事件，还有`blur`（通常用于此类事情）。在 3(+) 之间，您应该始终能够适当地响应用户的操作。只有（比如说）您必须每 3 秒保存一次文本输入的内容，它才会真正独立于 DOM 事件。

所以，在不知道你的细节的情况下，我只需要指出那里有什么东西闻起来有腥味。但是无论如何，至于您的实际问题，这是我对您的想法的看法：

> 在输入元素的按键事件上更新模型

这当然可以，但一定要使用视图来进行实际的事件处理/模型设置；在模型中连接 onKeyPress 处理程序将是一个坏主意

总的来说，这种方法看起来很标准，并且符合 Backbone 范式。

> 使用模型初始化视图后，让视图更新/向模型添加一个名为“get_input_value()”的函数，该函数返回输入框的值

我不太明白这对你的问题有什么帮助，而且它似乎把问题放在了错误的地方：模型应该（理想情况下）与 DOM 无关。

> 每当应用程序需要请求模型更新服务器时，首先调用视图中的一个函数，将用户在视图中键入的所有信息更新到模型中。

保存是每 5 分钟发生一次吗？如果不是，那么它可能是为了响应用户的操作而发生的，您应该使用事件处理程序来响应。

但是，如果您确实需要使同步独立于用户操作，我建议您使用自定义事件来管理事情。换句话说，在模型的同步方法中放置类似`this.trigger('preSync')`. 然后，使用该模型的每个视图都可以绑定某种`updateMyModelValue`方法，即。`this.model.on('preSync', this.updateMyModelValue, this);`.

这样，您的模型代码根本不会直接与 DOM 交互；相反，它只是担心它应该担心的东西（数据），并且视图会注意何时需要从 DOM 更新该数据。

希望有帮助。

****编辑（回应您对问题的编辑）* ***

> 如果是这种情况，模型必须能够说“用我的观点同步我！”。

模型的一般 Backbone 方式...嗯，它的视图几乎所有内容都是通过事件。

（从技术上讲，您*可以*在模型本身中维护模型视图的列表，然后遍历该列表以告诉视图执行操作。Backbone 甚至没有足够的意见让您这样做。但是，从可维护性的角度来看，对我来说似乎是一种可怕的方法。）

我的“预同步”事件示例（上图）演示了如何使用这种技术；如果有任何不清楚，请回复评论。

同样，如果您有以下问题：

1.  视图 A 捕获事件
2.  视图 B 需要做一些事情来响应那个事件

你基本上有两个选择：

1）您可以将两个视图紧密耦合。假设有一个创建行视图的表视图，但需要响应这些行中发生的事件。您可以在创建表时将表本身作为选项传递给行 ( `new Row({table:this})`)，然后当这些行需要告诉他们的表“发生事件”时，他们可以这样做`this.options.table.informThatAnEventHappened()`。如果两个视图本质上是相关的，那么这是一个很好的方法，比如一个表和它的行。如果没有，更好的方法是：

2）您可以使用事件在视图之间进行通信。假设您在页面顶部有一个标题 div，每当“标题”文本输入发生变化时都需要更新它......但是该文本输入在页面下方并且在概念上与页面的标题（除了设置它）。这两个元素（及其视图）之间的共同点是数据，即标题本身的文本。

现在想象 titleDivView 和 titleSettingInputView 都共享一个 pageTitle 模型。当 titleSettingInputView 调用`this.model.set('titleText', 'newTitle')`时，titleDivView 可以侦听`this.model.on('change:titleText', ...)`，并在响应中适当地重新呈现自己。通过这种方式，两个完全不连接、分离的视图可以相互交互，而不会创建一个相互关联的代码错综复杂的网络。

当然，如果没有一个很方便的“ `change:title`”事件可以绑定，你可以自己制作，就像我上面描述的自定义“预同步”事件一样。

# java - 创建新的类版本

> ID：11571168
> 
> 赞同：2
> 
> 时间：2012-07-20T00:17:26.417
> 
> 标签：java, version

我目前正在做一个项目。我在电子邮件功能方面遇到了一些问题，我已经多次尝试解决这个问题，最新的似乎已经解决了这个问题。

对于每次重写，我都创建了一个新类来保存新代码。这似乎不是最好的解决方案，因为每次我必须通过代码并跟踪对类的引用并更新它们，每次重写只更改实际发送电子邮件的代码，函数输入并且名称一直是一致的。

我已经查看了版本控制，但这对于提供解决方案并没有特别帮助，这很可能是由于我自己缺乏对该主题的了解。所以这就是我正在寻找的：拥有一个具有多个版本的类的实例，最好没有其中的所有旧代码来帮助阅读。但是我想访问旧版本，这样如果一个功能/特性以前存在并且没有内置到当前版本中，我可以看到它是如何实现的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T00:22:09.260

版本控制*正是*您在这里所需要的。

看看[这里](http://www.scribd.com/doc/2301648/Subversion-Overview)，它为您简要介绍了最流行的版本控制系统之一 subversion。您可以设置/使用自己的私有 subversion 服务器，或者如果您的项目是开源的，请使用一些免费提供者（例如 Google 代码），他们将为您提供版本控制。

除了 subversion 之外，还存在其他版本控制系统，例如 git、mercurial 等 - 但 subversion 可以说是最流行的一个很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T00:21:03.607

你在使用任何 IDE 吗？Eclipse/Netbeans 存储文件更新的历史记录，您可以随时比较/替换历史记录。

**注意：**这绝不是版本控制的替代品，我*强烈建议*您探索开源版本控制解决方案。从长远来看，这将对您有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T03:42:35.493

使用版本管理工具，如 SVN 或 CVS。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T01:03:33.500

Mercurial is the way to go. Seemless merging and integration with java and popular IDE's like Netbeans. You can't go wrong. From the very beginning of my programming experience I learned how to use Mercurial in a day.

# php - 意外的 T_EXIT

> ID：11571169
> 
> 赞同：0
> 
> 时间：2012-07-20T00:17:40.617
> 
> 标签：php

当我运行此代码时（它位于用于 AJAX 的文件中），我在第 1 行遇到了解析错误（意外的 T_EXIT）：

```
<?php
if(empty($_POST['nickname']) || !isset($_POST['password']))
    die('{"result": "error", "message": "Ouch"}');
// [...]
?> 
```

但是，如果我在前两行之间放置一个字符（例如“<?php”之后的空格或“if”之前的制表符），它可以正常工作。

我不明白，我以前从来没有遇到过。我以 hexa 模式检查了文件，看看是否有一些奇怪和不受欢迎的隐形字符，但一切似乎都很正常。

有人已经有这个错误或知道如何解决它吗？
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T06:37:19.110

正如 Shaquin Trifonoff 和其他人所说，我的行尾不是 Unix 版本。奇怪的是，在此之前这并没有给我带来任何问题，或者它最近因为某种神秘的原因而改变了。

感谢你们。

# git - 无法推送到远程 GIT 存储库——“[...] 似乎不是 git 存储库”

> ID：11571173
> 
> 赞同：3
> 
> 时间：2012-07-20T00:18:12.160
> 
> 标签：git, version-control, client, remote-server

我已经在我的服务器上使用适当的文件夹（我的子域的根目录`git.mydomain.com`）中的以下内容设置了我的 GIT 存储库：

```
mkdir foo.git
cd foo.git
git init --bare --shared 
```

这将使存储库通过 URL 可用`git.mydomain.com/foo.git`。

在我的客户端上，尝试使用以下命令将提交的文件推送到服务器： mkdir foo

```
cd foo
git init
git remote add foo myUser@git.mydomain.com:foo.git
git add readme.txt
git commit -m "foo"
git push foo master
.. entering user password .. 
```

只会导致：

```
fatal: 'foo.git' does not appear to be a git repository
fatal: The remote end hung up unexpectedly 
```

但是，按照一组不同的指南，我似乎无法解决这个问题。任何建议将不胜感激，请记住，我对 GIT 很熟悉。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T03:13:00.683

该行`git remote add foo myUser@git.mydomain.com:foo.git`假定目录 foo.git 位于`myUser`用户的主目录中。你最好使用绝对路径，例如`git remote add foo myUser@git.mydomain.com:/home/gitrepos/foo.git`

如果您在共享服务器上，则可以通过执行以下命令检查您的主路径：

```
echo $HOME 
```

就我而言，这会产生：

> 家/u/01234/

如果我将存储库存储在我的主路径中的 www/git/ 文件夹中，则该命令可能如下所示：

```
git remote add origin myUser@mydomain.com:/home/u/01234/www/git/foo.git 
```

# c# - 如何使用 Android 向 PC 发送消息并实时接收

> ID：11571175
> 
> 赞同：2
> 
> 时间：2012-07-20T00:18:18.083
> 
> 标签：c#, android, c++, vb.net, real-time

我有一个服务器和一个客户端。客户端是我的安卓手机。服务器是我运行 Windows 的 PC。

我需要找出将短字符串发送到 PC 并使其实时显示的最佳可编程方法。

请记住，我可以在服务器端编程的唯一语言是 VB.NET、C# 和 C++（我对它们的经验是按此顺序排列的）。

编辑：我不关心安全或任何事情。两台设备都将位于专用 wifi 网络上。不过，考虑到运行服务器的计算机的 RAM 非常少，我不能依赖 3rd 方应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T00:37:04.290

如果它只是一个简单的字符串，并且您不太关心安全性或可靠性，则可以使用`java.net.Socket`. 创建一个`Socket`，给它你的 PC 的 IP 地址、一个开放的端口等。在 PC 上编写一个应用程序来监听那个端口，并按它的方式处理数据。我不知道您将如何进行服务器端部分，因为我只真正使用过 Java，但如果您使用原始套接字，它应该不会那么难。在`Socket`你的 android 上，创建一个输出流，并通过该流传递字符串。

如果您需要更安全、更可靠、更标准的字符串传递协议，我可能会选择 HTTP。您可能需要阅读更多有关它的信息，但总体而言它们更好。不过，套接字并不是简单得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T00:56:52.623

您可以编写一个与套接字通信的 .NET 项目。您的 PC 可以侦听给定端口，而您的手机将访问该端口。[本文](http://www.codeproject.com/Articles/10649/An-Introduction-to-Socket-Programming-in-NET-using)可能会帮助您了解有关 .NET 套接字编程的更多信息，并且您将能够根据需要使用 C# 或 Visual Basic。

# sql - 改进查询以查找两个表之间的不同步值

> ID：11571179
> 
> 赞同：2
> 
> 时间：2012-07-20T00:19:06.203
> 
> 标签：sql, postgresql

我有以下查询：

```
SELECT
  tableOneId
  SUM(a+b+c) AS tableOneData,
  MIN(d) AS tableTwoData,
FROM
  tableTwo JOIN tableOne ON tableOneId = tableTwoId
GROUP BY
  tableOneId 
```

所有提到的列都声明为`numeric(30,6) NOT NULL`.

在`tableOne`中，我的条目的总和（列`a, b, c`）应等于 中的`d`列`Table Two`。

一个简单的例子：

```
Table One (id here should read tableOneId to match above query)
  id=1, a=1, b=0, c=0
  id=1, a=0, b=2, c=0
  id=2, a=1, b=0, c=0

Table Two (id here should read tableTwoId to match above query)
  id=1, d=3
  id=2, d=1 
```

我使用了第一次迭代`SUM(d)/COUNT(*)`，但除法很乱，所以我目前正在使用`MIN(d)`. 编写此查询的更好方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T00:46:59.697

试试这个：

```
SELECT
  tableOneId,
  tableOneData,
  d AS tableTwoData
FROM tableTwo
JOIN (select tableOneId, sum(a + b + c) AS tableOneData
      from tableone
      group by 1) x ON tableOneId = tableTwoId
where tableOneData <> d; 
```

这将返回表 2 中所有数据不正确的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T00:40:02.190

```
select tableOneId, SUM(a) + SUM(b) + SUM(c) as tableOneData, d as tableTwoData
from  tableTwo JOIN tableOne ON tableOneId = tableTwoId
GROUP BY tableOneId, d 
```

# c# - 比较系统日期和日期时间

> ID：11571183
> 
> 赞同：0
> 
> 时间：2012-07-20T00:19:20.037
> 
> 标签：c#, winforms, datetime

我正在使用下面的代码来比较两个时间：

```
DateTime systemtime = DateTime.Now;
DateTime timestart = Convert.ToDateTime(txtTimestart.Text);
DateTime timeend = Convert.ToDateTime(txtTimeend.Text);

if (systemtime < timestart || systemtime > timeend)
{
    MessageBox.Show("not auth.");
}
else
{
    MessageBox.Show("auth.");
} 
```

但我也想比较当天。例如，如果今天是星期一或星期四，则用户已通过身份验证，否则不会。我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T00:23:31.797

```
DateTime systemtime = DateTime.Now;
if(systemtime.DayOfWeek == DayOfWeek.Monday)
{
...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T00:23:50.423

`timestart.DayOfWeek`会给你诸如`DayOfWeek.Thursday`或之类的值`DayOfWeek.Friday`。

有关文档和示例，请参见此处：http: [//msdn.microsoft.com/en-us/library/system.datetime.dayofweek.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.dayofweek.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T00:23:11.233

该`DateTime`对象将具有一个属性`DayOfWeek`。你可以只比较字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T07:02:38.573

试试这个

```
var systemtime = DateTime.Now;
var start = "Monday";
var finish = "Wednesday";
DayOfWeek startDay;
if (!Enum.TryParse<DayOfWeek>(start ,out startDay))
{
    //handle parse error 
}
DayOfWeek finishDay;
if (!Enum.TryParse<DayOfWeek>(finish, out finishDay))
{
    //handle parse error
}

if (systemtime.DayOfWeek < startDay || systemtime.DayOfWeek > finishDay)
{
    MessageBox.Show("not auth.");
}
else
{
    MessageBox.Show("auth.");
} 
```

# jquery - jquery Masonry height - 填充容器底部的间隙

> ID：11571185
> 
> 赞同：0
> 
> 时间：2012-07-20T00:19:27.353
> 
> 标签：jquery, jquery-masonry

我已经开始使用 jQuery [Masorny](http://masonry.desandro.com/index.html)插件，我使用每个固定宽度为 190 像素的图像，除了一个问题外，它工作正常。每一列的底部自然会有空白，我想用一些背景来填补这些空白。如果我为容器设置背景，它也会在每个元素之间的 gutterWidth 后面。有没有办法在每列的底部添加一些空的 div，或者其他可以让样式在底部出现间隙的方法？

我的砌体初始化代码：

```
jQuery(document).ready(function(){
        var $gal = jQuery('#gallery');

        $gal.imagesLoaded( function(){
         $gal.masonry({
            itemSelector : '.item',
            columnWidth: 190,               
            isFitWidth:true,
            gutterWidth:2
          });
        });
    }); 
```

这是一个工作演示，还有我尝试实现的屏幕截图：

[http://maorb.dyndns-ip.com/masonrytest](http://maorb.dyndns-ip.com/masonrytest)

我查看了有关砌体的其他问题以及纪录片，似乎没有提及。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T02:02:40.480

没有办法填补每列底部的空隙，因为砌体按垂直顺序对砖块进行排序，然后按水平顺序排列。它类似于装箱算法，具有一些类似于树图算法的附加数学。装箱算法的想法是最小化在柱中堆叠固定数量的砖所需的柱数量。这是一个 np 完全问题，自然在底部（或顶部）有空隙，而这些空隙无法填补。

对于树形图，您可以使用 kd-tree。一个很好的描述在这里： http: [//www.blackpawn.com/texts/lightmaps/default.html](http://www.blackpawn.com/texts/lightmaps/default.html)。

```
{
   Node* child[2]
   Rectangle rc
   int imageID
}

Node* Node::Insert(const Image& img)
if we're not a leaf then
    (try inserting into first child)
    newNode = child[0]->Insert( img )
    if newNode != NULL return newNode

    (no room, insert into second)
    return child[1]->Insert( img )
else
    (if there's already a lightmap here, return)
    if imageID != NULL return NULL

    (if we're too small, return)
    if img doesn't fit in pnode->rect
        return NULL

    (if we're just right, accept)
    if img fits perfectly in pnode->rect
        return pnode

    (otherwise, gotta split this node and create some kids)
    pnode->child[0] = new Node
    pnode->child[1] = new Node

    (decide which way to split)
    dw = rc.width - img.width
    dh = rc.height - img.height

    if dw > dh then
        child[0]->rect = Rectangle(rc.left, rc.top, 
                                   rc.left+width-1, rc.bottom)
        child[1]->rect = Rectangle(rc.left+width, rc.top, 
                                   rc.right, rc.bottom)
    else
        child[0]->rect = Rectangle(rc.left, rc.top, 
                                   rc.right, rc.top+height-1)
        child[1]->rect = Rectangle(rc.left, rc.top+height, 
                                   rc.right, rc.bottom)

    (insert into first child we created)
    return Insert( img, pnode->child[0] ) 
```

您的 htmlx 和 html5 填充问题的问题很容易解释。你有一个 padding:8px; 在 html5 文档的 body 标记中。所以图像和周围图像之间每边都有 4px 的间隙。看我的图片：

![在此处输入图像描述](../Images/ae35be7846c9e74bb0c76884d0b6d505.png)

# machine-learning - 最大大小有限的聚类

> ID：11571187
> 
> 赞同：3
> 
> 时间：2012-07-20T00:19:27.370
> 
> 标签：machine-learning, cluster-analysis, hierarchical-clustering

我想对一些数据点进行聚类，但每个聚类的最大点数是有限的。所以每个集群都有一个最大大小。有没有任何聚类算法呢？我也可以定义自己的尺​​寸函数吗？例如，我不想将集群中的点数视为其大小，而是想对集群中所有点的列求和。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-06T22:55:08.167

一种快速而非最佳的解决方案是迭代地将数据拆分为 2 个部分，直到数据数量在限制范围内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-10T21:19:18.917

**本文解决了具有最小尺寸**约束的 k-means 聚类问题：

Bradley、PS、KP Bennett 和 Ayhan Demiriz。“受约束的 k 均值聚类。” *微软研究院，雷德蒙德 (2000)*：1-8。

然而，本文提出的方法可以很容易地扩展到**最大尺寸**约束。

[这](https://github.com/Behrouz-Babaki/MinSizeKmeans)是该算法的一个实现及其解决*最小尺寸*和*最大尺寸*约束的扩展。

至于您关于自定义尺寸功能的问题，这将是一个更困难的问题，我认为本地搜索方法更合适。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T06:37:19.960

由于集群通常会尝试使集群尽可能大，因此这不再是真正的集群。更像是最小生成树，您可以在其中删除最长的边以查找组。

您可以尝试 x-means 之类的方法，即 k-means 变体，您可以在其中拆分您认为太大的集群。

# php - 安全性：网址中的安全 id

> ID：11571195
> 
> 赞同：4
> 
> 时间：2012-07-20T00:19:57.497
> 
> 标签：php, symfony

当我编辑来自用户的帖子时，我使用以下网址：

```
../post/edit/3            //If the id of the post is 3 for example 
```

为了避免用户故意修改 url，例如`/post/edit/5`，我使用以下逻辑来确保用户在没有权限时不会编辑帖子：

```
if (//user is allowed to edit post){
    //edit post
}
else {
    throw new AccessDeniedException('You do not have the permission to edit this post');
} 
```

这是您在编辑帖子时使用的一般方法吗？有没有办法做一些更清洁的事情，这样用户就不能在 url 中使用帖子的 id 了？

## 编辑

我想得越多，我就越意识到我从来没有在一个关注安全的网站中看到像这样的 url 中的 id。所以，我同意我们仍然可以使用 id 并检查用户是否可以显示/看到这个 id，但用户仍然可以做太多事情。对 id 进行哈希处理不是更好吗，允许我们使用任何可用的算法生成一个新的加密 ID：

```
<?php
echo hash('md5', 'id_to_edit');
?> 
```

**保护 url 中的 id 的标准方法是什么？一般来说，在 url 中显示像 id 这样的信息是个好主意吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T04:38:40.087

特殊情况可能需要采取特殊措施，但在典型情况下，只需：

*   使用 SSL，这样会话就不会被窃听者劫持
*   在做任何事情之前检查用户的权限。

许多网站的做法与您最初描述的方式相似。例如，WordPress 有类似`https://example.com/wp-admin/post.php?post=112&action=edit`. 显然，好奇的用户可以选择编辑该`post=112`部分。

因此，您可能会考虑的一个标准是：“我是否需要比 WordPress 更关注安全和隐私？”

例如，如果您不希望查看日志文件的人知道哪些 IP 地址正在编辑哪些帖子，那么您有几个选择。每种方法都有权衡，因此最好的方法取决于您最关心的问题。

例如：

*   您可以使用哈希来隐藏帖子 ID 号，就像您在更新问题时建议的那样。
*   或者，您可能只是通过 SSL 上的 POST 方法（而不是 GET）发送该信息，而根本不将其包含在您的 URL 中。

第一种方法的一个优点是人们可以使用书签返回页面。你可能不想要那个。或者你可能会。取决于您的应用程序。

第二种方法的一个优点是（例如）Google Analytics 不会显示一个帖子 ID 是否被一遍又一遍地访问/编辑，或者是否有许多帖子 ID 被访问/编辑。这可能对您很重要，具体取决于此类信息是否会告诉某人某事以及谁有权访问您的 Google Analytics（分析）资料。或者它可能根本不重要。

还有很多其他可能的考虑因素，例如性能。

顺便说一句，如果您使用 MD5，请确保在输入中包含攻击者不知道的内容。否则，攻击者通过查找表反转已发现的哈希并为连续的帖子 ID 生成进一步的合法哈希将是微不足道的。在 PHP 中，您需要执行以下操作：

```
hash('md5', $some_hard_to_guess_secret_string . $data_you_wish_to_hash); 
```

没有适用于所有情况的单一最佳实践。但在典型情况下，不需要对 post id 值进行哈希处理，甚至不需要通过 POST 发送。在典型情况下，请务必使用 SSL（这样会话就不会被劫持）并在执行任何操作之前检查用户权限，您可能会很顺利。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T05:12:19.847

您*必须*将来自客户端的所有数据视为可疑数据。这包括 URL。您应该检查该客户端是否确实经过身份验证，并且他有权执行指示的任何操作（通过 URL、发布数据等）。即使您只显示数据而不更改数据也是如此。

记录 ID 在 URL 中是否容易看到或修改并不重要。重要的是可以用它做什么。除非 id 本身传递了一些信息（这会令人惊讶），否则没有必要隐藏它或混淆它。只需确保您只响应经过身份验证和授权的请求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T00:28:16.437

这是标准方法。您应该始终检查以下两者的权限：显示表单和提交表单后的操作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-25T04:32:05.543

无论您是否对 ID 进行哈希处理，在编辑帖子时都*必须*检查权限，否则有人可能会偶然发现他们不应编辑的页面，并可能造成严重损害。这可以是通过随机猜测，也可以是通过浏览另一个使用您的应用程序的用户的历史记录。

*在允许某人编辑某些内容之前检查权限*。

这并不是说您*不能*散列您的 ID，因此它们不是线性的，而是看看流行的应用程序，例如 Wordpress，甚至是 Stack Overflow。它们都是基于递增的数字，因为无论是否知道 ID，如果您没有权限，则无法对其进行编辑。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-25T18:29:13.223

1.  检查权限
2.  不要将 GET 值用于验证、身份验证和授权。会话，发布变量都可以。
3.  让事情变得有趣...`$x =md5(random number + post_id + userid)`单独发送所有值，就像`/edit/3?id=$x&y=rand_number`当您返回编辑页面时检查所有内容一样。否则给他们一个异常。还有一些想法涉及 db 但如果您有兴趣。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-25T05:18:00.220

混淆 ID 不会增加安全性。如前所述 - 您应该始终检查权限。

您可能会有这样的印象，即您没有在关注安全的网站中看到这样的 url，因为其中一些网站通常运行在 Java 或 .Net 之类的东西上，并且使用 GUID ( [http:/ /en.wikipedia.org/wiki/Globally_unique_identifier](http://en.wikipedia.org/wiki/Globally_unique_identifier)）。然而，其中一些使用顺序 ID（例如，gmail 使用顺序 ID 来处理电子邮件）。

MD5'ing 不是一个好主意。破解它真的很容易，尤其是像 md5(5684) 这样的东西。我在这里[http://md5.noisette.ch/index.php](http://md5.noisette.ch/index.php)查找了几个 <100.000 的哈希值，它找到了它们中的每一个。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-25T17:48:15.097

[为此使用ACL](http://symfony.com/doc/current/cookbook/security/acl.html)会更好。您可以将应用程序配置为拒绝一切，并使用 ACL 授予对特定对象的访问权限。

在 URL 中不使用任何哈希而不是 id 是一种常见的做法。Clean id 允许您使用简单的命令 grep apache 日志、应用程序日志。所有逻辑都必须在代码中以授予或拒绝对特定域实体的访问权限。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-25T04:52:52.413

你需要比检查已经确认他们是谁（登录）的用户是否有权编辑相关帖子更安全？如果您只是在地址栏中显示了一个散列值，那么找到散列算法仍然相对容易，然后他们仍然可以控制他们试图编辑的帖子。默默无闻的安全永远是一种虚假的安全感。

# android - Android SDK 管理器 SSL 对等体错误关闭

> ID：11571201
> 
> 赞同：26
> 
> 时间：2012-07-20T00:20:54.073
> 
> 标签：android, sdk

当我尝试使用 Android SDK 管理器下载适用于 Android 4.1 的 ARM EABI 时，它拒绝安装它。我收到以下消息：“SSL 对等方错误关闭”。这是在 Windows XP 操作系统上。知道这里发生了什么以及我能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-26T17:05:08.640

该问题是由某种与 HTTPS 的不兼容引起的。

为了解决这个问题，在 Android SDK 设置中，在底部的“SDK 更新站点”选项卡中，选中“**强制 https://... 使用 http://... 获取源**”选项。

然后再次尝试下载包。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-10-16T06:52:19.587

这是因为您正在尝试使用 http 协议访问 https 链接。默认情况下，android 只允许 http 请求。改变去

**文件-->设置-->系统设置--> Android SDK **

单击 SDK 更新站点选项卡。在底部检查**强制 https// 使用 http// 获取源**

快乐编码

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-07-09T14:07:04.657

打开 Android SDK 管理器 转到 SDK 更新站点 检查强制 https// 使用 http 获取源

[![在此处输入图像描述](../Images/ba7a2a392c9aa55d5f79ebf531a150a5.png)](https://i.stack.imgur.com/9lTin.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-28T12:47:20.797

不管听起来多么愚蠢，在 Mac 上重新启动计算机可以解决问题。我花了几个小时试图解决这个问题，出于某种原因重新启动了计算机并且它工作了。

几个月后我遇到了同样的问题，重新启动计算机再次解决了问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-15T04:50:54.377

对我来说，我必须禁用 VPN，否则无法在 gradle-wrapper.properties 文件中下载 gradle zip：

文件：gradle-wrapper.properties

distributionUrl= [https://services.gradle.org/distributions/gradle-5.1.1-all.zip](https://services.gradle.org/distributions/gradle-5.1.1-all.zip)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-03T04:42:04.930

请检查您的互联网连接并重新启动 Android Studio。由于互联网不可用，我遇到了这个错误。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-06T15:45:55.617

[1.从https://services.gradle.org/distributions/](https://services.gradle.org/distributions/)下载您希望下载的特定版本

2.将`distributionUrl`文件`gradle-wrapper.properties`中的修改为您下载的版本。例如，`gradle-4.6-all.zip`

3.将文件粘贴到该位置`~/AndroidStudioProjects/YourProjectFolder/gradle/wrapper/`

希望这能解决问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-09-27T20:43:00.713

__ 清理并重建 ... 不工作 __ 强制 https .. 不工作

我通过这种方式修复了它。

1-打开gradle-wrapper.properties文件，修改distributionUrl

distributionUrl=https://services.gradle.org/distributions/gradle-5.1.1-all.zip

2-通过http交换https并在运行和下载小部分后同步停止它，然后将其转回https并同步..瞧它正在工作。

# xml - 无法使用默认命名空间查询 SSRS XML 输入

> ID：11571209
> 
> 赞同：2
> 
> 时间：2012-07-20T00:22:14.497
> 
> 标签：xml, reporting-services, namespaces, reportbuilder

我对 SSRS (SQL Server 2008 R2) 中的报告有疑问。无论输入是从报告生成器 (v3) 中还是通过 SSRS 的 Web 服务接口提供的，都会出现此问题。

假设这是输入 XML（在名为“ProvidedData”的参数中）：

```
<person>
<name>joe</name>
</person> 
```

...我使用查询创建了一个数据集：

```
<Query><XmlData>" & Parameters!ProvidedData.Value & "</XmlData>
<ElementPath>person</ElementPath></Query> 
```

然后我使用字段源“名称”创建一个名为“名称”的字段。没问题 - 这可以毫无问题地用于报告。

如果我更改输入 XML 以为其提供一些名称空间信息，它也可以在没有任何更改的情况下工作。所以现在XML是：

```
<person xmlns:p="http://somenamespace">
<name>joe</name>
</person> 
```

这也有效 - 同样，其他任何地方都没有变化。作为报表生成器中的默认值或通过 Web 服务接口从 C# 传入时使用。

问题是我正在为 XML 提供默认命名空间，当我使用该 XML 时，字段查询无法解析。没有错误，只是找不到值。

所以如果XML如下，那就不行了：

```
<person xmlns="http://somenamespace">
<name>joe</name>
</person> 
```

有任何想法吗？我对传入的 XML 没有任何控制权，所以我坚持使用默认命名空间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T04:43:33.397

在前两个实例中，person 元素实际上是默认命名空间的一部分（请注意，在第二个实例中，前缀 (p) 绑定到 'http://somenamespace' 命名空间，但前缀未分配给 person （如 p:person））。

在最后一个实例中，person 元素实际上是绑定到命名空间的，所以完全限定元素是 {http://somenamespace}person。

然后，适当的查询表达式需要命名空间来解析完全限定的元素，如下所示：

```
<Query xmlns:p="http://somenamespace">
 ...
<ElementPath>/p:person</ElementPath>
</Query> 
```

希望有帮助！

# python-3.x - HTTPConnection.request 失败但 urllib.request.urlopen 有效？

> ID：11571212
> 
> 赞同：0
> 
> 时间：2012-07-20T00:23:13.300
> 
> 标签：python-3.x, urlopen

我已经被困在这里很长一段时间了，但找不到任何有用的东西。我正在尝试连接到一个网站并在 Python3 中获取响应 json 文件。代码如下所示：

```
conn = http.client.HTTPConnection('host.address')
params = "xx"+ xx + "xx" + ...
conn.request('GET', '/a/b/c', params)
resp = conn.getresponse() 
```

这实际上不会返回 json 文件，而是返回网页[http://host.address/a/b/c](http://host.address/a/b/c)，这是一个错误页面。但是，在使用以下代码时：

```
params = "xx"+ xx + "xx" + ...
resp = urllib.request.urlopen("http://host.address/a/b/c?"+params) 
```

它正确返回 json 文件。知道代码有什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T21:55:52.753

在 HTTP 中，只有 POST 请求才应该有正文。request() 的第三个参数实际上是正文（请参阅[http://docs.python.org/py3k/library/http.client.html#http.client.HTTPConnection.request](http://docs.python.org/py3k/library/http.client.html#http.client.HTTPConnection.request)） - 只需构建 URL，如第二个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-09T08:54:07.533

只是用一个例子来补充@sqrtsben的答案：

```
import urllib.parse
import http.client

u = urllib.parse.urlparse("http://localhost:8080/index.php?utf8=✓")
conn = http.client.HTTPConnection(u.hostname, u.port)
if u.query == '':
    conn.request("GET", u.path)
else:
    conn.request("GET", u.path + '?' + u.query) 
```

# apache-pig - 在没有任何自定义 Pig UDF 的情况下将一袋元组加入单个字符串

> ID：11571213
> 
> 赞同：3
> 
> 时间：2012-07-20T00:23:14.983
> 
> 标签：apache-pig

如何连接一袋元组（例如：{(664),(823),(8),(47),(35),(27),(13),(16),(4),(8 ),(6)}) 用 Pig Latin 转换成一个不依赖于编写自定义 UDF 的字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-09T11:14:04.247

这是一个 UDF 连接字符串的示例，这些字符串是袋子中的元组，假设每个元组中有 1 个项目（输出中的字符串分隔符将是“_”）：

```
#!/usr/bin/python

@outputSchema("schema:chararray")
def convertBagToStr(acctBag):
    return "_".join([str(i[0]) for i in sorted(acctBag)]) 
```

在猪脚本中：

```
register '$udf_dir/myUDF.py' using jython as funcs;

a = foreach mygroup generate funcs.convertBagToStr(mybag) as bag_str; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T01:09:57.943

仅在 Pig Latin 中无法做到这一点。根据[Programming Pig](http://ofps.oreilly.com/titles/9781449302641/data_model.html)的说法，包是元组的无序集合。因此，除非您能够指定排序，否则尝试将它们连接起来会产生模棱两可的结果——这可以通过自定义 UDF 来实现。

# python - 在 python 中读取 16 位或 32 位图像

> ID：11571216
> 
> 赞同：3
> 
> 时间：2012-07-20T00:23:33.543
> 
> 标签：python, image

如何通过 python 读取 16 位或 32 位图像并将正确的图像值作为数组获取？

我尝试使用 PIL + Numpy 和 GDAL + Numpy 等读取 SRTM（航天飞机雷达地形任务）。我只需要一小块，所以我使用 ArcGIS 来获取我需要的 tif 文件范围。

但是，通过上述测试，数组中的值是不正确的。比如我在CA用了一个SRTM，它的高程范围是136到737，但是当我用numpy获取最大值和最小值时，数组值范围是-3.40到737，而且出现了很多负值。我能做些什么？我会犯一些错误吗？

我使用的代码如下使用 ipython：

```
import Image
import numpy as num
im=Image.open('srtm.tif')
imarray=num.array(im)
imarray
array([[ -3.40282347e+38,  -3.40282347e+38,   4.00000000e+02, ...,
      0.00000000e+00,   0.00000000e+00,   0.00000000e+00],
   [ -3.40282347e+38,  -3.40282347e+38,   4.00000000e+02, ...,
      0.00000000e+00,   0.00000000e+00,   0.00000000e+00],
   [ -3.40282347e+38,  -3.40282347e+38,   4.00000000e+02, ...,
      0.00000000e+00,   0.00000000e+00,   0.00000000e+00],
   ...,
   [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
      0.00000000e+00,   0.00000000e+00,   0.00000000e+00],
   [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
      0.00000000e+00,   0.00000000e+00,   0.00000000e+00],
   [  0.00000000e+00,   0.00000000e+00,   0.00000000e+00, ...,
      0.00000000e+00,   0.00000000e+00,   0.00000000e+00]], dtype=float32)
import gdal
tif = gdal.Open('srtm.tif')
arr = tif.ReadAsArray()
arr
array([[ -3.40282347e+38,  -3.40282347e+38,   4.00000000e+02, ...,
     -3.40282347e+38,  -3.40282347e+38,  -3.40282347e+38],
   [ -3.40282347e+38,  -3.40282347e+38,   4.00000000e+02, ...,
      6.11000000e+02,   6.17000000e+02,   6.17000000e+02],
   [ -3.40282347e+38,  -3.40282347e+38,   4.00000000e+02, ...,
      6.11000000e+02,   6.17000000e+02,   6.17000000e+02],
   ...,
   [  1.50000000e+02,   1.50000000e+02,   1.48000000e+02, ...,
      1.73000000e+02,   1.73000000e+02,   1.73000000e+02],
   [  1.49000000e+02,   1.49000000e+02,   1.48000000e+02, ...,
      1.73000000e+02,   1.73000000e+02,   1.73000000e+02],
   [  1.49000000e+02,   1.49000000e+02,   1.48000000e+02, ...,
      1.73000000e+02,   1.73000000e+02,   1.73000000e+02]], dtype=float32)

num.max(arr)
737.0
num.min(arr)
-3.4028235e+38 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:17:16.933

我猜这些值实际上是正确的。许多形式的科学图像使用极高或极低的特定值来表示空像素或饱和像素。我的建议是不要在任何计算中包含这些像素或将它们设置为零，例如：`arr[arr < 0] = 0`.

# php - PHP冻结：如何循环连接到2个MySQL数据库

> ID：11571219
> 
> 赞同：2
> 
> 时间：2012-07-20T00:24:10.503
> 
> 标签：php, mysql, loops, freeze

如何执行该循环：

```
while ($row = mysql_fetch_array($result)) {
    collectData($row['NAME']);
} 
```

30 秒后不冻结我的 PHP？

我认为可以通过将整个数据库放入数组或 *.temp 文件中来处理它，而不是每次我想输入/输出某些东西时都连接。但是我在文件和数组方面遇到了问题，所以这就是我要问的原因：什么是更好/最好的方法来快速、轻松地完成它？

```
<?php

//fiveMin - Database that data is taken form
//HighCharts - Database that data is transferred to

$fiveMin=mysql_connect($fiveMin_host,$fiveMin_user,$fiveMin_pass);
mysql_select_db($fiveMin_db,$fiveMin) or die (mysql_error());               

$query="SELECT * FROM BetterShopItemStock";
$result = mysql_query($query);
while ($row = mysql_fetch_array($result)) {
    collectData($row['NAME']);
}

function collectData($itemID) {

    global $fiveMin_host, $fiveMin_user, $fiveMin_pass, $fiveMin_db, $week_host, $week_user, $week_pass, $week_db;  

    $fiveMin=mysql_connect($fiveMin_host,$fiveMin_user,$fiveMin_pass); //Load and store data from fiveMin Database
    mysql_select_db($fiveMin_db,$fiveMin) or die (mysql_error());
    $function_Query="SELECT AMT FROM BetterShopItemStock WHERE NAME = '$itemID'";
    $function_Ask = mysql_query($function_Query);
    $function_Result = mysql_fetch_row($function_Ask, 0);
    $dataReadyToImport = "," . $function_Result[0];
    @mysql_close($fiveMin);

    $HighCharts=mysql_connect($week_host,$week_user,$week_pass); //Save stored data to weekly Database
    mysql_select_db($week_db,$HighCharts) or die (mysql_error());
    $function_Query="SELECT AMT FROM BetterShopItemStock WHERE NAME = '$itemID'";
    $function_Ask = mysql_query($function_Query);
    $function_Result = mysql_fetch_row($function_Ask, 0);
    $storedData = $function_Result[0];
    $dataReadyToImport = $storedData . $dataReadyToImport;
    mysql_query("UPDATE BetterShopItemStock SET AMT='$dataReadyToImport' WHERE NAME='$itemID'");

    @mysql_close($HighCharts);

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T00:37:25.267

(1) 您不必为每个查询打开和关闭一个连接 - 打开一个到每个服务器的连接并对`mysql_query()`它们进行多次调用。这应该会加快你的速度。

(2) 不要使用 "SELECT * FROM BetterShopItemStock" ...只选择您需要的行。（此处为“名称”）。如果您已经在该表中查询“NAME”，请同时选择“AMT”，而不是再次调用它。

(3) 您可以将对 HighCharts 的 select 和 update 调用合并到一个查询中。

总而言之，一切都应该是这样的：

```
<?php

    //fiveMin - Database that data is taken form
    $fiveMin=mysql_connect($fiveMin_host,$fiveMin_user,$fiveMin_pass);
    mysql_select_db($fiveMin_db,$fiveMin) or die (mysql_error());

    //HighCharts - Database that data is transferred to
    $HighCharts=mysql_connect($week_host,$week_user,$week_pass); //Save stored data to weekly Database
    mysql_select_db($week_db,$HighCharts) or die (mysql_error());

    $query="SELECT NAME,AMT FROM BetterShopItemStock";
    $result = mysql_query($query,$fiveMin);
    while ($row = mysql_fetch_row($result)) {
        collectData($row[0],$row[1],$HighCharts);
    }

    function collectData($itemID, $itemAmt, $mysql) {
        $id = mysql_real_escape_string($itemID);
        $amt = mysql_real_escape_string($itemAmt);
        $q = "UPDATE BetterShopItemStock SET ".
             "AMT=CONCAT(AMT,',','$amt') WHERE NAME='$id'";
        $r = mysql_query($q,$mysql);
        return (!$r ? false : true);

    }

    //now close the databases
    @mysql_close($HighCharts);
    @mysql_close($fiveMin);
?> 
```

(4) 最后，如果您遇到执行超时错误，请查看 PHP 的[set_time_limit](http://php.net/manual/en/function.set-time-limit.php)以延长您的执行时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T00:43:25.947

将每个人分成班级，然后与他们一起工作。它使它们更有效地运行，并且查询不会相互交织：

```
<?php
class class1{
     function fivemin(){
          **code0**
     }
     function collectdata1-fivemin() {
          class1::fivemin();
          **code**
     }
     function collectdataHighcharts(){
          class1::fivemin();
          **code2**
     }
}
$a = new class1;
$a->collectdata1-fivemin();
$a->collectdata1HighCharts();
?> 
```

# java - 字符串加倍，然后再返回。（爪哇）

> ID：11571221
> 
> 赞同：0
> 
> 时间：2012-07-20T00:24:14.737
> 
> 标签：java, string, double

我正在尝试用 Java 制作一个简单的税收计算器程序，但似乎无法正确计算。在代码中，我最终不得不将 JTextField 输入转换为双变量，然后转换为字符串。出于某种原因，这不起作用并带来了一堆错误。我知道必须有某种更简单的方法来写这个，所以任何想法都会受到赞赏。

```
import javax.swing.*;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.*;
import java.lang.*;

public class TaxCalculator extends JFrame {

    String twelve;
    JTextField input;
    JLabel ans;

    public TaxCalculator() {
        JFrame frame = new JFrame("Tax Calculator");
        JTextField input = new JTextField(10);
        JLabel ans = new JLabel("");
        JButton twelve = new JButton("12%");

        frame.setVisible(true);
        frame.setLayout(new FlowLayout());
        frame.setSize(250, 100);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        frame.add(new JLabel("Price of Item:"));
        frame.add(input);
        frame.add(ans);
        frame.add(twelve);

        twelve.addActionListener(new HandlerClass());

    }

    public static void main(String[] args) {
        TaxCalculator calc = new TaxCalculator();
    }

    public class HandlerClass implements ActionListener {
        public void actionPerformed(ActionEvent ae) {
            double fnum = Double.parseDouble(input.getText());

            if (ae.getSource() == twelve) {
                fnum = (fnum / 0.12) + fnum;
                ans.setText(Double.toString(fnum));
            }

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T00:30:25.503

问题是您已声明`JTextField input;`为类变量，但还创建了一个同名的局部变量并将其添加到您的 JFrame。这就是为什么你在`NullPointerException`表演时遇到`double fnum = Double.parseDouble(input.getText());`

# safari - 是否可以使用 Javascript 检测 Safari 阅读器显示？

> ID：11571222
> 
> 赞同：3
> 
> 时间：2012-07-10T16:23:36.253
> 
> 标签：safari, javascript, css

如果`<article>`一个页面上有多个 s，Safari 阅读器只会显示第一个。我正在写一个长文档；将章节分开`<article>`似乎在语义上是正确的。我喜欢让我的移动网络用户能够永远保持滚动和阅读，所以我真的不想把每个用户`<article>`放在不同的网页上。但话又说回来，我不希望喜欢 Safari 阅读器的用户只能阅读第 1 章。

如果有办法检测 Safari 阅读器的显示，也许我可以在 Safari 阅读器打开时在 DOM 中显示章节链接。

有任何想法吗？

天哪，我真的希望 Safari 阅读器能够在同一网页上的文章之间水平滑动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T00:31:39.933

我相信这是不可能的，因为 Safari 阅读器模式就像一个扩展。即使可以检测到，我也不确定添加链接或其他 DOM 元素会影响 Reader 的内容，因为它是在页面加载时生成的。

# android - Android 应用程序安装在哪里？

> ID：11571223
> 
> 赞同：4
> 
> 时间：2012-07-20T00:24:34.173
> 
> 标签：android, apk

什么是实际目录。APK 安装了吗？我能找到的唯一一个有点像这个的目录是

```
sdcard/Android/data/ 
```

但它不包含我所有的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T00:32:48.450

这取决于。

从 API 级别 8 开始，您可以允许将应用程序安装在外部存储（例如，设备的 SD 卡）上。这是一个可选功能，您可以使用 android:installLocation 清单属性为您的应用程序声明。如果您不声明此属性，您的应用程序将仅安装在内部存储上，而不能移动到外部存储上。

内部位置是`/data/app/yourapplicationnname`。

# ruby - Ruby 嵌套哈希语法和结构

> ID：11571224
> 
> 赞同：1
> 
> 时间：2012-07-20T00:24:37.247
> 
> 标签：ruby, hash

我正在构建一个包含 html 元素、类名及其计数的树。

**我将如何使用正确的语法构造此代码？**

```
$html = {

    :p => [
        { 'quote' => 10 },
        { 'important' => 4 }
    ],
    :h2 =>  [
        { 'title' => 33 },
        { 'subtitle' => 15 }
    ]

} 
```

我对嵌套的哈希语法感到困惑。感谢您帮助我直截了当。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T00:44:22.983

构建 HTML 树的一种简单方法是：

```
html = [
  { _tag: :p, quote: 10, important: 4 },
  { _tag: :h2, title: 33, subtitle: 15 },
] 
```

标签名称在哪里`html[0][:_tag]`，其他属性可以通过`html[0][attr]`. 根元素是一个数组，因为相同类型的多个元素（多个`p`aragraphs）可以存在于同一个命名空间中，并且散列只会存储最后添加的元素。

一个允许嵌套内容的更高级示例：

```
tree = { _tag: :html, _contents: [
  { _tag: :head, _contents: [
    { _tag: :title, _contents: "The page title" },
  ]},
  { _tag: :body, id: 'body-id',  _contents: [
    { _tag: :a, href: 'http://google.com', id: 'google-link', _contents: "A link" },
  ]},
]} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T00:38:59.777

定义 HTML 元素后，您没有分配另一个哈希，而是一个列表，并且从您的问题标题中我猜您想直接嵌套另一个哈希。因此，您不是从方括号开始，而是从另一个花括号开始：

```
$html = {
    :p => { 'quote' => 10, 'important' => 4 },
    :h2 =>  { 'title' => 33, 'subtitle' => 15 }
}

#Example
puts $html[:p]['quote'] 
```

这将打印：

> 10

看看 Hash 的构造函数文档，[初始化](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-c-5B-5D)哈希有不同的方法，也许你会找到更直观的一种。

# sql - 'extract(year from sysdate)' 的速度

> ID：11571225
> 
> 赞同：2
> 
> 时间：2012-07-20T00:24:39.347
> 
> 标签：sql, oracle

我有两个疑问：

```
with tmp as (
select asy.aim_student_id, ast.aim_test, asq.response
  from aim_student_test ast
  join aim_student_qst asq on (asq.aps_yr = ast.aps_yr and asq.aim_test = ast.aim_test and asq.aim_id = ast.aim_id)
  join aim_student_yr asy on (asy.aps_yr = ast.aps_yr and asy.aim_student_yr_id = ast.aim_student_yr_id)
    where asq.aps_yr = '2012'
    and asq.qst_num = 1)
select aim_student_id, aim_test, response  
  from tmp
  where response is null
  -- execution-time: 0.032 seconds

define this_year = extract(year from sysdate)
with tmp as (
select asy.aim_student_id, ast.aim_test, asq.response
  from aim_student_test ast
  join aim_student_qst asq on (asq.aps_yr = ast.aps_yr and asq.aim_test = ast.aim_test and asq.aim_id = ast.aim_id)
  join aim_student_yr asy on (asy.aps_yr = ast.aps_yr and asy.aim_student_yr_id = ast.aim_student_yr_id)
    where asq.aps_yr = &this_year
    and asq.qst_num = 1)
select aim_student_id, aim_test, response  
  from tmp
  where response is null
  -- execution-time: 82.202 seconds 
```

唯一的区别是，在一个我使用“2012”，另一个我实现提取（从 sysdate 开始的年份）。

我只能想象 Oracle 正在计算它检查的每条记录的提取（从 sysdate 开始的年份），而我只是不知道如何让它计算一次并将其用作变量。搜索并没有返回我所寻求的答案......所以我来到了 SO.com 的魔术师。如何正确使用

```
extract(year from sysdate) 
```

作为变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T07:18:35.337

在查询中使用`&this_year`会导致*string* `extract(year from sysdate)`的替换，因此第二个查询实际上具有：

```
where asq.aps_yr = extract(year from sysdate) 
```

您可以从第二个解释计划中看到。这本身可能不是问题。可能会放慢速度的是，这样做会将计划从 an`index range scan`更改为`index skip scan`against `aim_student_qstp1`。真正的区别在于，在快速版本中，您要与`asq.aps_yr`字符串`'2012'`（按您的预期使用。`2012``to_number(asq.aps_yr)`

您可以通过以下方式在代码中解决此问题：

```
where asq.aps_yr = to_char(&this_year) 
```

如果要在查询运行前计算一次，然后将其用作变量，至少有两种方法（在 SQL*Plus/SQL Developer 中）。坚持使用替换变量，您可以使用[`column`](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve013.htm)命令而不是`define`：

```
column tmp_this_year new_value this_year
set termout off
select extract(year from sysdate) as tmp_this_year from dual;
set termout on
set verify off 
```

...这使得`&this_year=2012`（`termout`更改只是使实际检索不可见，并且`verify`停止它告诉您何时使用替换；两者都这样您就不会在脚本中获得额外的输出），并将您的查询更改为：

```
where asq.aps_yr = '&this_year' 
```

...因此该值被视为字符串，因此`to_char()`不必要。

或者您可以使用绑定变量：

```
var this_year varchar2(4);
set feedback off;
exec :this_year := extract(year from sysdate); 
```

...然后您的查询有：

```
where asq.aps_yr = :this_year 
```

请注意，在这种情况下，您不需要引号，因为绑定变量已经定义为字符串 -`exec`设置它的隐式转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T01:02:34.793

我怀疑差异是由于从日期中提取年份。我很确定甲骨文只会提取一次年份，因为它在第二种情况下使用了一个变量。

不同之处在于查询使用的执行路径。您需要发布执行计划才能真正看到差异。使用显式常量可以为优化器提供更多信息以选择最佳查询计划。

例如，如果数据是按年份分区的，那么在固定年份的情况下，Oracle 可以确定哪个分区有数据。在第二种情况下，Oracle 可能无法将该值识别为常量，并且需要读取所有数据分区。这只是可能发生的情况的一个示例——我不确定 Oracle 在这种情况下会做什么。

# javascript - Maven项目中的CSS和JS文件位置

> ID：11571231
> 
> 赞同：2
> 
> 时间：2012-07-20T00:25:15.773
> 
> 标签：javascript, jquery, html, eclipse, css

我目前在 eclipse 上做一个 maven 项目，我的 HTML、css、js 和 jsp 文件位于

```
webapp
    |
     WEB-INF
           |
            css/style.css
            js/myjs.js
            index.jsp
            index1.html 
```

我的 webapp 似乎无法访问 CSS 和 JS，我的 CSS、img 和 JS 文件在 Chrome 中不断收到以下错误：

> GET "URL........css" 404（未找到）朋友：5

我已经看到了很多与此相关的问题，但似乎没有一个解决方案有效。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T02:01:31.807

第1点：将您的Web内容文件（html/jsp/js/css）移出web-inf，直接在webapp下创建相应的文件夹。

第 2 点：请分享您如何从 HTML/JSP 页面引用图像或 js 或 css 的代码片段。

例如，在下面的文件夹结构中，image/css/js 资源在 html/jsp 中被称为

```
网络应用
   |
   |__ 页
   | |___ 索引.jsp
   | |___ 索引.html
   |
   |__ CSS
   | |___ 样式.css
   |    
   |__ js
   | |___ myjs.js

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T00:26:44.170

该错误基本上是在说“文件不存在！”。问题是，文件是否存在与 Maven（或 Tomcat 或其他）无关；它全部由您的网络服务器（可能是 Apache）控制。假设它是 Apache，您将需要查看您的配置以查看 DocumentRoot 设置的内容，因为这是提供静态文件的位置（尽管 Apache 配置可能比这更复杂，因此它实际上取决于您的详细信息） .

不过要理解的一般事情是，仅仅在 WEB-INF 中扔东西并不会固有地将它们暴露给世界：您需要通过 Apache 暴露文件。

# css - CSS 下拉菜单级别

> ID：11571236
> 
> 赞同：0
> 
> 时间：2012-07-20T00:26:16.540
> 
> 标签：css, html-lists, border, stylesheet, drop-down-menu

我有一个 CSS 下拉菜单，我正在努力为不同级别定制它。例如，您在第一个下拉菜单中看到的是 1 级，然后从该下拉菜单中看到的是 2 级。我想为不同的级别自定义内容。

```
div#dropMenu li.submenu
{
     background: url(../images/arrows/arrow11.png) no-repeat 99% 99%;
}

div#dropMenu li.submenu:hover
{
     background: url(../images/arrows/arrow9.png) no-repeat 99% 99%;
} 
```

如果您有子菜单项，上面的代码会放置一个箭头图像。这工作正常，但是，我不希望它出现在顶部菜单上，我只希望它在第一次下拉和前进时出现。我该如何指定它？我试过 'div#dropMenu li.level1.submenu' 但它不起作用。

在这里，我发布了 CSS 表的其余部分：

```
div#dropMenu {
   width:1000px;
   margin:0px 0px;
   text-align:center;
   z-index:1000;
   position:relative;
}
div#dropMenu ul {
   border-left: 1px solid #333;
   margin:0;
   padding:0;

}

div#dropMenu li {
   border-right: 1px solid #999;
   position:relative;
   list-style:none; 
   margin:0; 
   float:left; 
   line-height:1em;
   width:19.90%;
   /**width:16.55%;*/
}
div#dropMenu ul.level1 {
   width:100%;
   margin:0 auto; 
   text-align:left;
   background: url(../images/menu_bg.png) repeat-x;  margin-top: 0px; color: #fff;/*background color of top menu when NOT selected. */
   z-index:1000;
   float:left;
}

div#dropMenu ul.level2 li {
   padding-top: 6px;
   border-top: 1px solid #999999;

}
div#dropMenu li a {
   display: block;
   /* Hides from IE5-mac \*/
   height: 1%;
   /* End hide from IE5-mac */ 
   padding: 15px 0px 10px 0px; 
   text-decoration: none; 
   color: #555;
   font-size: 13px; 
   -webkit-font-smoothing: antialiased;
   text-align:center; 
   font-weight: bold;
   border-right: 0px solid ;
}   
div#dropMenu li:hover {}
div#dropMenu li.submenu:hover {}
div#dropMenu li a.noLine {
   border:none;
}

div#dropMenu>ul a {
   width: auto;
   z-index:1000;
}
div#dropMenu ul ul {
   display: none;
}
div#dropMenu ul ul li {
   width:16.5em;
}
div#dropMenu ul.level1 li.submenu:hover ul.level2, 
div#dropMenu ul.level2 li.submenu:hover ul.level3,
div#dropMenu ul.level3 li.submenu:hover ul.level4,
div#dropMenu ul.level4 li.submenu:hover ul.level5,
div#dropMenu ul.level5 li.submenu:hover ul.level6,
div#dropMenu ul.level6 li.submenu:hover ul.level7,
div#dropMenu ul.level7 li.submenu:hover ul.level8 {
   position: absolute; 
   width: 12em;
   display:block;
   z-index:1000;
   width: 16.5em;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T00:30:49.500

这应该这样做

```
#dropMenu li li {
     background: ...
} 
```

# javascript - Vector3 的可见性 - 3D 到 2D 投影

> ID：11571239
> 
> 赞同：1
> 
> 时间：2012-07-20T00:26:51.907
> 
> 标签：javascript, 3d, matrix, 2d, three.js

我已经在那里问过这个问题： [https](https://github.com/mrdoob/three.js/issues/2070#issuecomment-6372113) ://github.com/mrdoob/three.js/issues/2070#issuecomment-6372113 但我现在并没有真正明白。

这又是我的问题：我正在使用这个函数来计算我的 Vector3 的屏幕位置（x，y）。

```
 this.toScreenXY = function(position, camera, canvas)
    {
        var pos3D = position.clone();
        var pos2D = projector.projectVector( pos3D, camera );

        return {
            x : ((pos2D.x + 1) * canvas.domElement.width / 2 + canvas.domElement.offsetLeft),
            y : ((-pos2D.y + 1) * canvas.domElement.height / 2 + canvas.domElement.offsetTop)
        };
    }; 
```

但是当我得到正确的屏幕位置时，将相机转动 180 度（关于 y 轴），即使真正的 Vector3 在相机视图后面，我也会得到相同的 x,y 值。知道如何检查 Vector3 是否在相机视图中吗？谢谢您的帮助！

# php - 使用 DOMDocument::loadHTML 和 getElementsByTagName 按标签名称获取 DOM 元素

> ID：11571240
> 
> 赞同：13
> 
> 时间：2012-07-20T00:27:03.340
> 
> 标签：php, xpath, domdocument

很抱歉，如果这是重新发布，但我无法全神贯注，我已经尝试了我能找到的所有可用文档和示例。

我正在尝试获取`img`包含 HTML 的字符串的第一个元素

**PHP**

```
$html = '<p><img src="http://placekitten.com/200/300" alt="" width="200" height="300" /></p>';
$dom = new DOMDocument;
$dom->loadHTML($html);
$imgs = $dom->getElementsByTagName('img');
var_dump($imgs); 
```

`object(DOMNodeList)#57 (0) { }`当它应该找到一个出现时，它会吐出。

我试过 XPath 也没有运气。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-20T00:33:31.257

用这个：

```
$img = $dom->getElementsByTagName('img')->item(0);
echo $img->attributes->getNamedItem("src")->value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-09T10:53:25.163

*@nickb*已经提供了正确答案，但您也可以这样做，而不必在*@nickb*`getNamedItem()`提供的代码的第二行中使用，如下所示：

 *```
echo $img->attributes->src->value; 
```

> 注意：我想将上述代码作为注释添加到*@nickb*的答案中，但我需要至少 50 个声誉才能做到这一点。如果有人可以将上面的代码行作为对*@nickb*答案的评论，请告诉我。然后我将删除我的答案。*

# asp.net - 如何在 gridview 中显示另一个表的计数？

> ID：11571241
> 
> 赞同：0
> 
> 时间：2012-07-20T00:27:04.220
> 
> 标签：asp.net, mysql

我为学校建立了一个博客，我想显示每个帖子的评论数。但是，我对如何实现这一目标有点迷茫，任何帮助都会非常感谢您！

我有 2 张桌子

```
CREATE TABLE `blog_message` (
  `MessageID` int(30) NOT NULL AUTO_INCREMENT,
  `Username` varchar(45) NOT NULL,
  `Message` text,
  `AddedDate` datetime DEFAULT NULL,
  `Title` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`MessageID`)
)

CREATE TABLE `blog_comments` (
  `CommentID` int(30) NOT NULL AUTO_INCREMENT,
  `MessageID` int(30) DEFAULT NULL,
  `Author` varchar(45) DEFAULT NULL,
  `CommentMessage` text,
  `AddedDate` datetime DEFAULT NULL,
  PRIMARY KEY (`CommentID`),
  KEY `blog_comments_ibfk_1` (`MessageID`),
  CONSTRAINT `blog_comments_ibfk_1` FOREIGN KEY (`MessageID`) REFERENCES `blog_message` (`MessageID`)
) 
```

我的目标是

在网格视图中显示

int 表格格式 评论数 | 标题 | 用户名 | 创建日期

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T00:54:37.603

以下是 MySQL 语法，不知道你用的是什么。但这将返回一个列表 MessageIds 和他们拥有的评论数。

```
----------------------------
| MessageId | comment_count|
----------------------------
| 1234      | 34           |
----------------------------

SELECT bm.MessageId, count(bc.CommentId) as comment_count
FROM blog_comments bc, blog_message bm
WHERE bm.MessageId = bc.MessageId
GROUP BY bm.MessageId 
```

如果您想要 Author 和 addedDate 只需将其添加到`SELECT`语句中（即`SELECT bm.MessageId, count(bc.CommentId) as comment_count, bm.AddedDate, bm.Author`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T01:26:44.787

尝试以下

```
SELECT 
    bm.MessageID, Count(bc.CommentID) as Cnt, Title, Username, AddedDate
FROM blog_message bm
LEFT OUTER JOIN blog_comments bc
     ON bm.MessageID = bc.MessageID
GROUP BY bm.MessageID,Title, Username, AddedDate 
```

# ios - 没有 JPG 中介的 captureStillImageAsynchronouslyFromConnection

> ID：11571242
> 
> 赞同：6
> 
> 时间：2012-07-20T00:27:11.003
> 
> 标签：ios, uiimage, image-capture

我试图从相机中获得尽可能好的图像，但只能找到示例`captureStillImageAsynchronouslyFromConnection`然后直接转到：

```
NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageSampleBuffer];    
UIImage *image = [[UIImage alloc] initWithData:imageData]; 
```

JPEG 是有损的，有什么方法可以将数据获取为 PNG，甚至只是 RGBA（BGRA，你有什么？）。AVCaptureStillImageOutput 似乎没有任何其他 NSData* 方法....

其实看CMSampleBufferRef，好像已经被锁定为JPEG了~

```
formatDescription = <CMVideoFormatDescription 0xfe5e1f0 [0x3e5ac650]> {
mediaType:'vide' 
mediaSubType:'jpeg' 
mediaSpecific: {
    codecType: 'jpeg'       dimensions: 2592 x 1936 
} 
extensions: {(null)}
} 
```

还有其他方法可以拍摄全分辨率照片并获取原始数据吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T01:06:14.497

您需要使用不同的像素格式设置 outputSettings。例如，如果您想要 32 位 BGRA，您可以设置：

```
NSDictionary *outputSettings = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithUnsignedInt:kCVPixelFormatType_32BGRA], (id)kCVPixelBufferPixelFormatTypeKey, nil]; 
```

从[https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVCaptureStillImageOutput_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVCaptureStillImageOutput_Class/Reference/Reference.html)，“推荐”像素格式为：

*   `kCMVideoCodecType_JPEG`
*   `kCVPixelFormatType_420YpCbCr8BiPlanarFullRange`
*   `kCVPixelFormatType_32BGRA`

当然，如果你不使用JPEG输出，你不能使用`jpegStillImageNSDataRepresentation:`，但这里有一个例子： [how to convert a CVImageBufferRef to UIImage](https://stackoverflow.com/questions/3152259/how-to-convert-a-cvimagebufferref-to-uiimage)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T01:34:41.023

只需更改连接的输出设置：

outputSettings 输出的压缩设置。

```
@property(nonatomic, copy) NSDictionary *outputSettings 
```

您可以使用 检索受支持值的 NSDictionary

availableImageDataCodecTypes 可以在 outputSettings 中指定的支持的图像编解码器格式。（只读）

```
@property(nonatomic, readonly) NSArray *availableImageDataCodecTypes 
```

# sql - 在插入时忽略其中包含空值的记录

> ID：11571243
> 
> 赞同：0
> 
> 时间：2012-07-20T00:27:23.837
> 
> 标签：sql, sql-server, sql-server-2008, insert

我有下表：

发明人（**inventorID**、*PatentNo*、InventorFirst、InventorLast、City、State）

其中inventorid 是pk，patentno 是fk。

这是当前的插入代码：

```
insert into Inventor (PatentNo, InventorFirst, InventorLast, City, statename, country, NationalityCountry, ResidenceCountry)
select PatentNo, InventorFirstname, InventorLastname, City, statename, country, NationalityCountry, ResidenceCountry
from InventorUpdate; 
```

我想修改它，以便如果 InventorFirstname 和 InventorLastname 字段为空，则它不会插入到发明者表中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T00:30:12.213

您如何保留那些字段为空的记录不被选中？

```
insert into Inventor (PatentNo, InventorFirst, InventorLast, City, statename, country, NationalityCountry, ResidenceCountry)
select PatentNo, InventorFirstname, InventorLastname, City, statename, country, NationalityCountry, ResidenceCountry
from InventorUpdate
Where InventorFirstname is not null 
And   InventorLastname is not null; 
```

# javascript - 如果表单未自动完成，是否有办法阻止提交表单？

> ID：11571245
> 
> 赞同：2
> 
> 时间：2012-07-20T00:27:56.770
> 
> 标签：javascript, jquery, html

我正在学习 jquery，它很棒！做复杂的事情很容易，但我不确定如果自动完成失败，如何阻止某人提交表单（或警告他们）。

我的网站上有一个表单，它使用我的数据库中的现有数据自动完成，当他们提交时，它会提供有关该条目的信息。如果他们添加了一些不在数据库中的内容，那么我的服务器会将它们弹回表单页面并让他们知道错误，但我想在他们填写表单时做一些事情来警告他们（在他们提交表单之前） .

长话短说，我知道如何检测字段中的更改，但是当字段不在数据库中时，我如何检测（并防止提交表单）？我正在考虑的两种情况是库存（“ibm”）是否有自动完成功能，并且用户输入“ib”（在它完全完成之前）或“ibmm”（在它自动完成之后）。

是否有一种类似于 jquery 的简单方法来检测字段是否没有被自动完成完全解析？

有什么建议么？

更新：根据要求，这是我的自动完成代码（基本上只是在搜索框中取值并提交到一个名为“自动完成”的网址）：

```
<script>
  $(function() {

    var cache = {},
      lastXhr;
    $( "#global-search-field" ).autocomplete({
      minLength: 2,
      source: function( request, response ) {
      $(".message").empty()
        var term = request.term;
        if ( term in cache ) {
          response( cache[ term ] );
          return;
        }

        lastXhr = $.getJSON( "autocomplete", request, function( data, status, xhr ) {
          cache[ term ] = data;
          if ( xhr === lastXhr ) {
            response( data );
            if ( data == 'no results found'){
              //alert(data);
              //$(".message").empty().append("not found!");
            }
          }
        });
      }
    });

  });
  </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T01:55:04.850

将带有按钮的表单加载为禁用状态。当您填写表格时，您有一个正在运行的标志 (class=validation) 来通知表格何时准备好，然后您可以启用该按钮。

如果您已经知道如果不是所有信息都准备好它应该会失败，那么有一个可行的按钮将尝试调用服务器是没有意义的。

如果您用文本填充所有三个框，则底部的示例将起作用。您可以通过使用 jquery 中的 appendTo() 让每个带有类的文本框以红色字体附加文本“必需”来表示控件。

只要在 html 元素上有一个类验证，它就会被要求，所以当我们输入数据时，它会删除那些验证类：

```
<html>
  <head>
 <script src="jquery.js"></script>
 <script type="text/javascript">

    $(document).ready(function(){

        $("input[name^='test']").blur(function(){
             if ($(this).val() != "" && $(this).hasClass("validation")){
                $(this).removeClass("validation");
            }

            var check = $(".validation"); //checks to see if there is any more validation
            if (check.length == 0){
                $("#nowSubmit").prop("disabled", false);
            } else {
                $("#nowSubmit").prop("disabled", true);
            }
        });
    });
  </script>
  </head>
  <body>

<form>
<input id="control1" name="test" type="textbox" class="validation" />
<input id="control2" name="test" type="textbox" class="validation" />
<input id="control3" name="test" type="textbox" class="validation" />

<input id="nowSubmit" type="submit" value="Click Here" disabled="true"/>
</form>
</body>
</html> 
```

这里的工作示例：http: [//jsfiddle.net/hSatZ/](http://jsfiddle.net/hSatZ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T00:33:03.070

您可以在自动完成字段上使用 ajax 请求放在“onchange”事件上，这将检查特定值是否在 db 中，并在需要时通知用户错误而不提交表单

# mysql - 用户驱动网站的数据库设计

> ID：11571248
> 
> 赞同：2
> 
> 时间：2012-07-20T00:28:16.503
> 
> 标签：mysql, database, database-design, social-networking

假设我想要一个需要存储用户信息、图像等以及存储状态更新或帖子/评论的 Web 应用程序，我想要分隔表吗？例如，如果我有一个“用户”表，其中包含用户信息，如密码、电子邮件和典型的社交网络信息，如年龄、位置等。创建处理用户内容的第二个表（“帖子”）是否是个好主意例如评论和/或帖子？

表一：“用户”

*   用户身份
*   用户名
*   年龄
*   等等

表二：“帖子”

*   邮政编号
*   发布内容
*   邮政作者
*   发布日期
*   ETC

这是一个有效的组织吗？此外，如果我想跟踪媒体，我应该在另一个表中执行此操作吗？

表三：“媒体”

*   ID
*   类型
*   上传者
*   等等

任何帮助深表感谢。我很想知道我是走在正确的轨道上还是完全迷路了。我主要想知道我是否应该有很多表，或者我是否应该有更大的较少隔离的表。到目前为止，还值得注意的是，我计划将关注者（或朋友）等信息保留在“用户”表中，但我不确定回想起来这是一个好主意。提前致谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T01:21:31.857

Generally speaking to design a database you create a table for each object you will be dealing with. In you example you have `Users`, `Posts`, `Comments` and `Media`. From that you can flesh out what it is you want to store for each object. Each item you want to store is a field in the table:

```
[Users]
ID
Username
PasswordHash
Age
Birthdate
Email
JoinDate
LastLogin

[Posts]
ID
UserID
Title
Content
CreateDate
PostedDate

[Comments]
ID
PostID
UserID
Content

[Media]
ID
Title
Description
FileURI 
```

Taking a look above you can see a basic structure for holding the information for each object. By the field names you can even tell the relationships between the objects. That is a post has a `UserID` so the post was created by that user. the comments have a `PostID` and a `UserID` so you can see that a comment was written by a person for a specific post.

Once you have the general fields identified you can look at some other aspects of the design. For example right now the `Email` field under the Users table means that a user can have one (1) email address, no more. You can solve this one of two ways... add more email fields (EmailA, EmailB, EmailC) this generally works if you know there are specific types of emails you are dealing with, for example EmailWork or EmailHome. This doesn't work if you do not know how many emails in total there will be. To solve this you can pull the emails out into its own table:

```
[Users]
ID
Username
PasswordHash
Age
Birthdate
JoinDate
LastLogin

[Emails]
ID
UserID
Email 
```

Now you can have any number of emails for a single user. You can do this for just about any database you are trying to design. Take it in small steps and break your bigger objects into smaller ones as needed.

*Update*

To deal with friends you should think about the relationship you are dealing with. There is one (1) person with many friends. In relation to the tables above its one User to many Users. This can be done with a special table that hold no information other than the relationship you are looking for.

```
[Friends]
[UserA]
[UserB] 
```

So if the current user's ID is in A his friend's ID is in B and visa-verse. This sets up the friendship so that if you are my friend, then I am your friend. There is no way for me to be your friend without you being mine. If you want to setup the ability for one way friendships you can setup the table like this:

```
[Friends]
[UserID]
[FriendID] 
```

So If we are both friends with each other there would have to be 2 records, one for my friendship to you and one for your freindship to me.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T01:20:04.887

您需要使用多个表。

表格的数量取决于您希望交互式站点的复杂程度。根据您发布的内容，您将需要一个存储用户信息的表、一个用于评论的表等，例如一个存储状态类型的表。

例如 tbl_Users 应该存储： 1\. UserID 2\. First Name 3\. Last name 4\. Email 5\. Password（加密） 6\. Address 7\. City 8\. State 9\. Country 10\. Date of Birth 11\. UserStatus 12\. 等等

该项目听起来应该使用关系数据库，该数据库将通过相关用户 ID 提取记录，例如评论。

这意味着您将需要一个存储以下内容的表： 1\. CommentID（主键，int，自动增量） 2\. Comment（文本） 3\. UserID（外键，int）

注释通过外键附加到用户，外键本质上是 tbl_Users 表中的 userId。您需要将 SQL 语句中的这些表与您的脚本结合起来，以将信息作为一条信息进行查询。查看示例代码

```
$sql_userWall = "SELECT tbl_Users.*, tbl_Comments.*, tbl_userStatus FROM tbl_Users
INNER JOIN tbl_Comments ON tbl_Users.userID = tbl_Comments.userID
INNER JOIN tbl_UserStatus ON tbl_Users.userID = tbl.UserStatus
WHERE tbl_Users.userID = $userID"; 
```

该语句本质上是说从用户表中获取所提供用户的信息，并获取所有具有相同用户ID的评论，并从用户状态表中获取用户状态。

因此，您需要一个名为 tbl_userStatus 的表，其中包含唯一的 statusID（主键、int、自动递增）以及确定长度的文本（varchar），例如“在线”或“离线”。当您开始使用 php、asp 或类似语言从 e 记录中写入信息时，该表将自动为您检索 tbl_userStatus 中的信息，只需使用简单的一行

```
<?php echo $_REQUEST['userStatus']; ?> 
```

无需额外的工作。您的大部分项目时间将花费在开发数据库结构和编写 SQL 语句以正确检索每个页面所需的信息。

有许多很棒的 YouTube 视频系列描述了关系 DBS 和绘制实体关系图。这是您应该研究的内容，以了解有关创建您所描述的项目类型的更多信息。

最后一点，如果您希望评论对组的所有成员可见，这将描述所谓的多对多关系，这将需要额外的表以允许多个用户“拥有”与单个的关系桌子。您可以存储一个引用组表的 groupID。

tbl_groups 1\. GroupID 2\. GroupName 3\. 更多组信息等

以及为组 Tbl_groupMembers 注册的用户表 1.membershipCountID（主键，int，自增） 2.GroupID（外键，int） 3.UserID（外键，int）

这允许用户注册一个组并在内部将他们加入到基于组的评论中。这些关系需要更多时间来理解，这些视频将有很大帮助。

我希望这会有所帮助，稍后我会回来发布一些 YouTube 链接，我发现这些链接对学习这些内容很有帮助。

# c# - Silverlight 4 获取 ObservableCollection 的数据上下文 类型

> ID：11571250
> 
> 赞同：0
> 
> 时间：2012-07-20T00:28:27.353
> 
> 标签：c#, asp.net, silverlight, data-binding, silverlight-4.0

我有一个基本上是 ObservableCollection 的网格的 DataContext。在后面的代码中，我想遍历网格的 Datacontext 并将每个行项存储到一个共享点列表中。我遇到的问题是我似乎无法访问该 Datacontext 的 ObservableCollection。ObservableCollection 在视图模型中定义，并已传递给添加到它的子窗口。现在回到我想要访问它的父窗口的代码后面。我可以看到它在调试期间具有值。只是不确定如何再次将 Datacontext 转换为 ObservableCollection。

```
gridNominees.DataContext 
```

![在此处输入图像描述](../Images/e2de20893378aa8daf139a95f35243d8.png)

这里基本上是应用程序 ![在此处输入图像描述](../Images/ad615da1b5fc59a2905494af961baf8f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T01:01:22.300

如果你知道 T 的类型，那么就像任何对象引用一样转换它。

如果表单处理 ObservableCollection<Nominee>：

```
var nominees = gridNominees.DataContext As ObservableCollection<Nominee>; 
```

# php - MySQLi 查询到 MySQL 查询

> ID：11571252
> 
> 赞同：1
> 
> 时间：2012-07-20T00:28:30.303
> 
> 标签：php, mysql, arrays, mysqli

我正在尝试为我的框架提供多驱动程序支持，这基本上意味着我可以轻松使用 MySQL、MySQLi 或 PDO(MySQL)。

所以，假设我有一个要插入的值数组。

```
array('Manuel', 'StackOverflow'); 
```

我有这个查询..

```
mysql_query("INSERT INTO users(name, fav_site) VALUES(?, ?)"); 
```

所以，我想按顺序用这些值替换问号，所以 Manuel 先去，然后是 StackOverflow。请记住，我需要在这些值的两侧添加 -> ' <- 以便 MySQL 不会引发错误。

我试过搜索是否有人问过这个并且没有运气。

任何帮助表示赞赏！

注意：我知道我什至不应该为 MySQL 烦恼，但是，嘿！一个特点就是一个特点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T00:44:21.880

```
<?php
$query = "INSERT INTO users(name, fav_site) VALUES(?, ?)";
$args = array('joe', 'google goggles');
while(strpos($query, '?') !== FALSE)
{
  $query = preg_replace('/\?/', your_quoting_func(array_shift($args)), $query, 1);
}
echo $query; 
```

基本上，这说......虽然还有一个？保留在字符串中，删除第一个问号并将其替换为带引号的（使用您自己的函数或 mysql_real_escape_string 并用单引号括起来）字符串，然后将该项目移出数组。你应该可能`substr_count`？标记与错误检查的参数数量。

我使用 preg_replace 是因为它接受指定要替换多少值的参数，而 str_replace 不接受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T01:03:02.980

我会这样做（有一个例外：我不会使用`mysql_`）：

```
<?php
$values = array('foo', 'bar');

$query_start = "INSERT INTO `users` (`name`, `fav_site`) VALUES ('";
$query_end = "')";

$query = $query_start . implode("', '", $values) . $query_end;

$result = mysql_query($query);
?> 
```

`$query_start`包含 MySQL 查询的开头（注意`'`结尾处的），并`$query_end`在结尾处进行。

然后`$values`被内爆，`', '`作为“胶水”，并`$result`设置为：

`$query_start`（*强加`$result`*）`$query_end`。

See [implode - PHP Manual](http://php.net/manual/en/function.implode.php).

# amazon-s3 - 使用 S3 作为 MapReduce 作业输入

> ID：11571253
> 
> 赞同：0
> 
> 时间：2012-07-20T00:28:32.047
> 
> 标签：amazon-s3, mapreduce

我有一个 MR 工作来读取 amazon S3 上的文件并处理本地 hdfs 上的数据。这些文件是压缩为 .gz 的文本文件。我尝试如下设置工作，但它不起作用，有人知道可能出了什么问题吗？我需要先添加额外的步骤来解压缩文件吗？

谢谢！

```
String S3_LOCATION = "s3n://access_key:private_key@bucket_name"

protected void prepareHadoopJob() throws Exception {    

    this.getHadoopJob().setMapperClass(Mapper1.class);
    this.getHadoopJob().setInputFormatClass(TextInputFormat.class);

FileInputFormat.addInputPath(this.getHadoopJob(), new Path(S3_LOCATION));

this.getHadoopJob().setNumReduceTasks(0);
this.getHadoopJob().setOutputFormatClass(TableOutputFormat.class);
this.getHadoopJob().getConfiguration().set(TableOutputFormat.OUTPUT_TABLE, myTable.getTableName());
this.getHadoopJob().setOutputKeyClass(ImmutableBytesWritable.class);
this.getHadoopJob().setOutputValueClass(Put.class);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:27:12.177

通常，您不需要先解压缩文件，但是如果没有任何有关错误消息的详细信息，就很难确定出了什么问题

# kineticjs - 如何在旋转时修复 KineticJs 上的 centerOffset

> ID：11571262
> 
> 赞同：1
> 
> 时间：2012-07-20T00:29:37.657
> 
> 标签：kineticjs

我在 KineticJs 上的 centerOffset 遇到问题，当我旋转对象（一个矩形）时，中心会偏离，我找不到纠正它的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T01:35:21.670

您可以在对象实例化期间指定旋转偏移量。因此，要使旋转点位于对象的中心，请将高度和宽度除以 2 ：

```
 var rect = new Kinetic.Rect({
      x: 0,
      y: 0,
      width: 100,
      height: 50,
      fill: "#ff0000",
      offset: [50, 25]
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T21:08:57.347

这对我有用（抵消了一个组元素）：

```
your_group_element.offset( { x: 50, y: 50 } ); 
```

# javascript - Javascript 中的真值表

> ID：11571263
> 
> 赞同：2
> 
> 时间：2012-07-20T00:30:10.313
> 
> 标签：javascript, truthtable

我目前正在为包含 7 个选项卡的主布局实现主保存行为。

本质上，当单击主布局上的“保存”按钮时，我希望它使每个选项卡都保存自己（完成），然后向主布局报告它已保存（再次，完成）

我坚持的是，我想在主布局的相应 JS 文件中有一个真值表，它跟踪 7 个选项卡中的哪些已保存，以便它可以向用户报告保存已完全的。

**概括地说：Javascript中的真值表/二维数组，它们在哪里？**

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T01:23:34.017

您可以使用一组布尔值来跟踪 7 个选项卡中的每一个是否已保存：

```
var tabSaveTable = [false,false,false,false,false,false,false]; 
```

然后，每当保存给定选项卡时，您只需将其插槽标记为，`true`并且无论何时更改（因此需要再次保存），其插槽都可以设置为`false`. 例如，要将 tab3 标记为已保存（假设您的选项卡从 0 开始编号），您只需设置：

```
tabSaveTable[3] = true; 
```

如果 tab3 被更改并需要再次保存，您将设置：

```
tabSaveTable[3] = false; 
```

这是我认为我遵循的问题的一部分。如果还有更多，请澄清。我不明白为什么你需要一个二维数组。

# mysql - 如何在触发器中获取查询结果

> ID：11571266
> 
> 赞同：0
> 
> 时间：2012-07-20T00:30:12.220
> 
> 标签：mysql, triggers, fetch

是否可以在存储过程或触发器内的单个查询中返回多个行和列？以及如何获取要返回的数据？我需要使用循环或其他东西吗？

这就是我想要的：

```
DROP TRIGGER IF EXISTS `trgg`;

DELIMITER ;;

CREATE TRIGGER `trgg` AFTER INSERT ON tbl

FOR EACH ROW BEGIN

 SET @result = (SELECT * FROM tbl2 WHERE field = 1 );

// i want to fetch the values return @result, is that possible? 
// Or at least only the column only, not necessarily all the rows,

#### rest of the codes goes here #####

END ;; 
```

我已经研究了大约一天，但我仍然找不到答案，这里有没有人可以帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T11:37:02.150

您可以在触发器内使用光标。光标的好例子是[http://dev.mysql.com/doc/refman/5.0/en/cursors.html](http://dev.mysql.com/doc/refman/5.0/en/cursors.html)

为您的选择语句声明游标。并在循环中在某个声明的变量中获取该游标的值

# database - Grails 一对一关系

> ID：11571268
> 
> 赞同：9
> 
> 时间：2012-07-20T00:30:34.427
> 
> 标签：database, grails, grails-orm

我试图以两种不同的方式定义一对一的关系：
Grails 2.0.3

情况1：

```
class Car {
    String model  
    Engine eng  
    static constraints = {
        eng unique: true
    }
}

class Engine {
    Double capacity
    static belongsTo = [car : Car]
} 
```

案例二：

```
class Car {
    String model
    static hasOne = [eng : Engine]
    static constraints = {
        eng unique: true
    }
}

class Engine {
    Double capacity
    static belongsTo = [car : Car]
} 
```

看起来很相似，并且都提供一对一的双向映射。不幸的是，DB 在这两种情况下都有不同的结构。

情况1： ![在此处输入图像描述](../Images/e0ff613105c3965c7d2deef8433f2e6e.png)

案例二： ![在此处输入图像描述](../Images/18f9824095e18d1d2858cfb6dc4955e8.png)

为什么一次 Car 和一次 Engine 保持链接到第二个表。

我的问题在哪里？当我查看代码时，从 DDD 的角度来看，这两种情况都表明 Car 类更重要，而 Car 聚合了 Engine。不幸的是，当我从数据库方面看案例 2 时，我宁愿说它是相反的 - 引擎聚合汽车。当然我可以使用第一种方法，但是我看到的大多数关于 grails 的出版物都是定义关系的第二种方法。也许我误解了一些东西，我以错误的方式使用 hasOne？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-27T04:36:27.637

[文档`hasOne`](http://grails.org/doc/latest/ref/Domain%20Classes/hasOne.html)说明使用它会创建一个双向的一对一关系，其中外键在孩子身上。

这[`belongsTo`](http://grails.org/doc/latest/ref/Domain%20Classes/belongsTo.html)意味着对父级执行的操作（例如保存和更新）将通过休眠级联到子级。

因此，如果您希望外键`Engine`在`static hasOne = [engine:Engine]`.`Car`

如果您希望外键打开，请`Car`使用`Engine engine`on `Car`。

在这两种情况下`belongsTo = [car: Car]`使用`Engine`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-20T06:17:42.900

我认为您应该尝试采用这种方法。

```
 class Car {
       String model
       Engine engine
       static constraints = {
           eng unique: true
       }
   }

   class Engine {
       Double capacity
       Car car
   } 
```

我认为那会成功的。你可以在这里阅读它：

> 默认情况下，地址关联将映射到名为 address_id 的外键列。

[http://grails.org/doc/latest/guide/GORM.html](http://grails.org/doc/latest/guide/GORM.html)

关于**多对一/一对一映射**

希望能帮助到你 ：）

# mongodb - 在 Mongo 中，分片和复制有什么区别？

> ID：11571273
> 
> 赞同：86
> 
> 时间：2012-07-20T00:31:01.423
> 
> 标签：mongodb

复制似乎比分片简单得多，除非我错过了分片实际上试图实现的好处。他们不是都提供水平缩放吗？

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-07-20T02:11:25.373

在扩展 MongoDB 的上下文中：

*   *[复制](http://docs.mongodb.org/manual/core/replication/)*会创建额外的数据副本，并允许自动故障转移到另一个节点。如果您可以读取可能不是最新的数据，复制可能有助于水平扩展读取。

*   *[sharding](http://www.mongodb.org/display/DOCS/Sharding+Introduction)**允许通过使用shard key*跨多个服务器对数据进行分区来水平扩展数据写入。[选择一个好的 shard key 很](http://www.mongodb.org/display/DOCS/Choosing+a+Shard+Key)重要。例如，片键选择不当可能会导致数据“热点”仅写入单个片上。

分片环境确实增加[了更多复杂性](http://www.mongodb.org/display/DOCS/Sharding+Introduction#ShardingIntroduction-ShardinginaNutshell)，因为 MongoDB 现在必须管理在分片之间分配数据和请求——添加了额外的配置和路由流程来管理这些方面。

复制和分片通常结合起来创建一个分片*[集群](http://www.mongodb.org/display/DOCS/Simple+Initial+Sharding+Architecture)*，其中每个分片都由一个副本集支持。

从客户端应用程序的角度来看，您还可以控制复制/分片交互，特别是：

*   [阅读偏好](http://docs.mongodb.org/manual/applications/replication/#read-preference)
*   [写关注点](http://docs.mongodb.org/manual/applications/replication/#write-concern)

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2016-03-27T01:34:55.353

假设您的硬盘上有一个很棒的音乐收藏，您可以根据发布年份将音乐按逻辑顺序存储在不同的文件夹中。您担心如果驱动器出现故障，您的收藏将会丢失。所以你得到一个新磁盘，偶尔复制整个集合，保持相同的文件夹结构。

分片 >> 将您的音乐文件保存在不同的文件夹中

复制 >> 将您的收藏同步到其他驱动器

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2012-07-20T00:36:38.480

复制主要是传统的主/从设置，数据被同步到备份成员，如果主失败，其中一个可以取代它。这是一个相当简单的工具。它主要用于冗余，尽管您可以通过添加副本集成员来扩展读取。这有点复杂，但对于某些应用程序来说效果很好。

分片通常位于复制之上。MongoDB 中的“分片”只是副本集，前面有一个称为“路由器”的东西。您的应用程序将连接到路由器，发出查询，并决定将内容转发到哪个副本集（分片）。它比单个副本集复杂得多，因为您需要处理路由器和配置服务器（它们会跟踪哪些数据存储在哪里）。

如果你想水平扩展 Mongo，你会分片。10gen 喜欢调用路由器/配置服务器设置自动分片。可以在让应用程序决定写入哪个数据库的情况下进行更加贫民窟形式的分片。

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2016-09-06T18:14:30.367

# 分片

分片是一种在多个服务器之间拆分大型集合的技术。当我们分片时，我们部署多个`mongod`服务器。在前面，`mongos`这是一个路由器。应用程序与该路由器通信。然后，该路由器与各种服务器通信，即`mongod`s。应用程序和应用程序`mongos`通常位于同一台服务器上。我们可以`mongos`在同一台机器上运行多个服务。还建议保留多个`mongod`s 的集合（统称为**副本集**），而不是`mongod`在每个服务器上保留一个。副本集在多个不同的实例中保持数据同步，因此如果其中一个发生故障，我们不会丢失任何数据。从逻辑上讲，每个副本集都可以看作一个分**片**. 它对应用程序是透明的，选择分片的方式`MongoDB`是我们选择一个**shard key**。

[![MongoDB分片](../Images/38237b6909c152fd9a64e86574b51f42.png)](https://i.stack.imgur.com/pJV9W.png)

假设，对于`student`集合，我们`stdt_id`有分片键或者它可以是复合键。而`mongos`服务器，它是一个基于范围的系统。因此，根据`stdt_id`我们作为分片键发送的信息，它将请求发送到正确的`mongod`实例。

**那么，作为开发人员，我们需要真正了解什么？**

*   `insert`必须包含一个分片键，所以如果它是一个多部分的分片键，我们必须包含整个分片键
*   我们必须了解集合本身的分片键是什么
*   对于`update`, `remove`, `find`- 如果`mongos`没有给出分片键 - 那么它将不得不将请求广播到覆盖集合的所有不同分片。
*   对于`update`- 如果我们不指定整个分片键，我们必须使它成为一个多重更新，以便它知道它需要广播它

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2013-11-20T17:43:56.307

每当您考虑分片或复制时，您都需要考虑写入/更新操作的上下文。如果您不需要扩展写入，那么复制，因为它相当简单，对您来说是一个不错的选择。

另一方面，如果您的工作量主要是更新/写入，那么在某些时候您会遇到写入瓶颈。如果写入请求到来，Mongo 会阻止其他写入请求。那些写请求会阻塞，直到第一个请求完成。如果您想扩展此写入并希望将其并行化，那么您需要实现分片。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-10-22T09:28:50.527

只是把这个放在某个地方......

运行 mongo 的最基本方式是作为独立服务器。

*   您编写配置（文件或 cli 选项）
*   使用启动服务器`mongod`

对于这张图片，我没有包括“客户”。检查下一个。

[![独立的](../Images/99b29d24d7578a64954baf69dbe811cf.png)](https://i.stack.imgur.com/KKPXs.png)

*   副本集是一组完全按照上述方式使用不同配置文件初始化的服务器。
*   为了链接它们，我们连接到其中一个，并初始化副本集模式。
*   它们将相互镜像（在最常见的配置中）。该系统保证了数据的高可用性。

副本集的初始化在红色边框中表示。

[![副本集](../Images/961cb6dcb23a12414be5bd1d8cdb307b.png)](https://i.stack.imgur.com/97FtB.png)

*   分片不是关于复制数据，而是关于分片数据。
*   每个数据片段被称为块并进入不同的分片。shard = 每个副本集。
*   “主”服务器，运行`mongos`而不是`mongod`. 这是用于来自客户端的查询的路由器。

[![分片集群](../Images/75a1ff2882f074998648ba4c74477dd2.png)](https://i.stack.imgur.com/tZPwO.png)

**显而易见**：权衡是更复杂的架构。 **新颖**性：配置服务器（同样，不同的配置文件）。

还有*很多*要补充的，但除了文字之外，图片的内容大致相同。

* * *

甚至 mongoDB 都建议在进行分片之前仔细研究您的案例。垂直缩放 (vs) 在水平缩放 (hs)*之前*至少一次可能是一个好主意。

vs 完成了硬件升级（cpu、ram 等）。hs 需要更多的计算机（但可能是便宜的计算机）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-09-06T17:09:04.060

复制和分片都可以（单独或一起）用于 MongoDB 安装的水平扩展。

**Sharding**是 MongoDB 为满足数据增长的需求而提供的解决方案。分片跨多个服务器存储数据记录，以提供更快的读写查询吞吐量，特别是对于非常大的数据集。分片集群中的任何服务器都可以响应读取或写入操作，这大大加快了查询响应速度。

**复制**是 MongoDB 为 MongoDB 安装提供稳定性、备份和灾难恢复的解决方案。此过程在多个服务器之间复制和同步副本数据集。如果一台服务器脱机，这可以防止停机。

任何辅助服务器都可以响应读取查询，但只有主服务器会执行写入操作。然后将写入操作的结果传播到辅助服务器。

***场景 1：容错*** 在此场景中，用户将计费数据存储在 MongoDB 安装中。这些数据对用户的业务至关重要，并且需要 24/7 全天候可用，即使服务器崩溃或脱机也是如此。

MongoDB 复制是该用户的最佳解决方案。通过复制，整个数据集被镜像到多台服务器上。如果服务器出现故障或脱机，集群中的其他服务器将接管。

***场景 2：高性能*** 在这个场景中，用户正在运行一个从 MongoDB 数据库运行的社交网站。随着社交网络的发展，MongoDB 数据集也随之增长。用户看到查询时间和页面负载增加超过了可接受的点。用户的 MongoDB 安装获得重大的性能提升至关重要。

设置分片 MongoDB 集群是该用户的最佳解决方案。分片集群将分解用户的数据集并将其部分存储在单独的辅助服务器上。每个辅助服务器都可以响应对其部分数据的读取或写入查询，这大大增加了安装的响应时间

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-10T06:20:39.927

MongoDB Atlas 是一种数据库即服务。它支持 Azure、AWS 和 GCP 等三大云提供商。在云环境中，我们通常谈论高可用性和可扩展性。在 Atlas 中，“集群”可以是副本集或分片集群。这两个解决了我们云环境的高可用性和可扩展性特性。

一般来说，集群是一组用于完成特定任务的服务器。所以分片集群用于跨多台机器存储数据，以满足数据增长的需求。随着数据大小的增加，单台机器可能不足以存储数据，也无法提供可接受的读写吞吐量。分片集群支持底层云环境的水平可扩展性。

MongoDB 中的副本集是一组维护相同数据集的 mongod 进程。副本集提供冗余和高可用性，是所有生产部署的基础。在副本中，一个节点是接收所有写入操作的主节点。所有其他实例（例如辅助实例）应用来自主实例的操作，以便它们具有相同的数据集。副本集主要关注数据的可用性。

请检查[文档](http://%20https://docs.mongodb.com/manual/replication/)

谢谢你。

# grails - 为什么有些语句需要在一些 groovy 闭包结束时使用 return 语句？

> ID：11571275
> 
> 赞同：2
> 
> 时间：2012-07-20T00:31:23.797
> 
> 标签：grails, groovy

```
def handleLogin = {
   def hashPassd = DU.md5Hex(params.password)
   // Find the username
   def user = User.findByUserNameAndPassword(params.userName, hashPassd)
   if (!user) {
      flash.message = "User not found for userName: ${params.userName}"
      redirect(action:'index')
      return
   } else {
      session.user = user
      redirect(controller:'todo')
   }
} 
```

if 条件为什么需要 return 语句？而 else 块不需要它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T00:46:54.270

在这种情况下，不需要退货。如果 return 不存在，它将在 if 之后继续，这是方法的结尾，因此返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T12:02:11.890

退货并不是绝对必要的，但这是一个养成的好习惯。`render`控制器动作中的和之类的调用`redirect`通常旨在成为动作的概念“结束”，有时很容易忘记并将重定向视为`return`

```
def someAction() {
  if(!params.id) {
    flash.message = "no ID provided"
    redirect action:'error'
  }

  def myObj = MyObj.get(params.id)
  //...
} 
```

这将在运行时失败，可能带有相当模糊的错误消息，为了避免这种可能性，最好记住在对or的`return`任何调用之后放置一个显式的。当我回来更改我 6 个月前最初编写的控制器动作时，这种事情一直困扰着我……`redirect``render`

# iphone - 我应该查看什么文件大小？国际音标？

> ID：11571276
> 
> 赞同：3
> 
> 时间：2012-07-20T00:31:31.883
> 
> 标签：iphone, ios, xcode

几周前我在这里问了一个问题，每个人都说我需要查看 .ipa 文件，就是这样（保持在 50 mb 以下）。但是，我从问题中浏览了 Apples iTunes Connect 网站，他们发布了这个：

> **为什么 Apple 让我的应用程序文件大小大于我在 iTunes Connect 中为二进制文件上传的 .zip 文件？**
> 
> 当您的应用程序被 Apple 批准在 App Store 上销售时，它会出于 DRM 目的进行加密并重新压缩。添加加密后，压缩文件的大小会增加。增加的确切大小因应用程序而异，但是，当二进制文件包含许多连续的零时，大小增加可能很大。添加加密后，我们无法保证您的文件大小。
> 
> 最终大小高达 50MB 的 iOS 应用程序可以通过 3G 网络下载。较大的 iOS 应用程序将需要 Wi-Fi 连接。

那么这是否意味着 .ipa 文件一旦加密就会增加，或者 .ipa 文件是否已经加密？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T00:44:51.683

归档应用后，您可以在管理器中查看估计的 App Store 大小。就我而言，实际文件大小甚至比估计的还要小（828k 对 534k）。

# php - 使用 Facebook PHP SDK 上传图片时自定义照片标题？

> ID：11571277
> 
> 赞同：0
> 
> 时间：2012-07-20T00:31:34.180
> 
> 标签：php, facebook, facebook-graph-api

我有一个 Facebook 应用程序，允许用户将图片从我的网站上传到我的 Facebook 页面。我想知道是谁上传了这些图片，经过一番研究，我设法得到了以下 PHP 代码：

```
$args = array(
   'message' => $fbme['name'].' will have a love marriage.',
   'image'   => '@' . realpath('./images/wall-e-and-eva1.jpg'),

);

$data = $facebook->api('/'.$uid.'/photos', 'post', $args); 
```

我的输出假设是*亚当斯密将会有一个爱情婚姻*不幸的是，我得到的唯一输出是 *将会有一个爱情婚姻*。

如何获得 $fbme['name'] 的值 - 请给我一个实际的代码示例？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T06:28:22.710

您可以使用图形 api 获取经过身份验证的用户的基本信息（包括姓名）

```
try {
    $fbme = $facebook->api('/'.$uid); // $fbme['name'] will be the user's name
    // put rest of your code below
} catch (FacebookApiException $e) {
    // handle errors
} 
```

# javascript - 使用 Javascript 防止点击链接

> ID：11571279
> 
> 赞同：1
> 
> 时间：2012-07-20T00:31:45.993
> 
> 标签：javascript, html, tags, navigation, anchor

```
$('a').click(function(e){return false;}); 
```

它成功地禁用了几乎所有地方的链接，但不适用于在本网站主题标签的工具提示弹出窗口中找到的链接（SO）。我查看了 DOM，它们确实是`<a>`标签。

怎么来的？

有没有更强大的方法来强制我的用户停留在当前页面上？（这是一个书签，我在其中以图形方式操作 DOM，因此我需要能够单击和拖动所有内容，包括链接。）

我知道，即使我可以禁用所有锚点上的常规点击功能，它也不会对由其他标签上的其他点击回调触发的任何导航执行任何操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T00:45:48.440

尝试使用 .on - 在例如 SO 站点中，这些链接是稍后创建的，然后附加您的事件

```
$(document).on('click', 'a', function(e) {
 return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T00:59:09.957

我以前采用的一种技术是在整个文档上放置一个不可见的绝对定位元素。这实际上是由 Firebug Lite 使用的，以允许 Element Inspector 拦截任何点击。

然后，您需要担心的就是将事件侦听器附加到绝对定位的元素，并确定单击时鼠标下方的元素。幸运的是，所有现代浏览器都实现了一种识别方法：document.elementFromPoint。实现之间存在一些差异；这是我通常使用的方法（不幸的是，特征检测对此有点棘手，所以我正在做浏览器检测）：

```
var scrollIsRelative = !($.browser.opera || $.browser.safari && $.browser.version < "532");
$.fromPoint = function(x, y) {

     if(!document.elementFromPoint) return null;

     if(scrollIsRelative)
     {
         x -= $(document).scrollLeft();
         y -= $(document).scrollTop();
     }

     return document.elementFromPoint(x, y);

}; 
```

将单击事件侦听器附加到绝对定位的 div 并在单击时隐藏您的 div 并调用此方法以获取元素，然后再次显示您的 div。例子：

```
$('#hugeDiv').on('click', function(ev) {
    var x = ev.pageX;
    var y = ev.pageY;
    $(this).hide();
    var el = $.fromPoint(x, y);
    $(this).show();

    //do stuff with el
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T00:34:29.223

看来解决方案是

```
window.onbeforeunload = function() {
  return "Are you sure you want to navigate away?";
} 
```

如果我自己这么说，正确使用事件系统。

问题的原始范围不够广泛。这解决了导致我的问题的问题。

# c# - 在 C# 中创建 excel 文件

> ID：11571281
> 
> 赞同：1
> 
> 时间：2012-07-20T00:31:50.687
> 
> 标签：c#, winforms, excel, excel-interop

这是我第一次使用 C# 处理 excel 文件。

作为演示，我在 excel 文件中写了一行，它可以工作，但现在我试图插入 DataTable 的所有行，但它给出了以下错误：

*“HRESULT：0x800A03EC”*

这是代码：

```
for (int i = 0; i < table.Rows.Count; i++)
{
    xlWorkSheet.Cells[i, 1] = table.Rows[i]["Ref"].ToString();
    xlWorkSheet.Cells[i, 2] = table.Rows[i]["Name"].ToString();
} 
```

请告诉我我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T01:26:05.017

而不是 DataTable，将所有值放入`object[,]`

然后，您可以一口气分配它们：

```
using (var targetRangeHeader = _excelApp.Range[TargetRangeTopAddress].WithComCleanup())
 using (var targetRangeFirstDataCell = targetRangeHeader.Resource.Offset[1, 0].WithComCleanup())
  using (var targetRange = targetRangeFirstDataCell.Resource.Resize[MyObjectArrayValues.Length, 1].WithComCleanup())
{
 targetRange.Resource.Value2 = MyObjectArrayValues; 
```

使用[http://jake.ginnivan.net/vsto-com-interop](http://jake.ginnivan.net/vsto-com-interop)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T00:35:09.143

改为使用[`Range.Value`](http://msdn.microsoft.com/en-us/library/ff195193)。[`Worksheet.Cells`](http://msdn.microsoft.com/en-us/library/ff194567.aspx)属性是只读的：

```
for (int i = 0; i < table.Rows.Count; i++)
{
    xlWorkSheet.Cells[i, 1].Value = table.Rows[i]["Ref"].ToString();
    xlWorkSheet.Cells[i, 2].Value = table.Rows[i]["Name"].ToString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T04:09:38.530

我全心全意地支持 Jeremy Thompson 使用二维对象数组的回答。性能将快几个数量级。我写信是为了解释为什么您编写的代码不起作用（以及为什么您可能认为它应该起作用）。

在 Visual Basic 中，有一个“默认”属性的概念。当您在 VBA 中编写此代码时，您正在使用该概念：

```
xlWorkSheet.Cells(i, 1) = someValue 
```

Cells 属性返回一个 Range 对象。在 VBA 中，由于您没有使用 Set 关键字，因此该行不会重新分配对象的值（并且，如果您添加了 Set 关键字，它将无法重新分配对象的值，因为它是只读的财产，正如 Ria 所指出的）。

缺少 Set 关键字会导致分配转到由返回的 Range 对象的默认属性`Cells(i, 1)`。当然，默认属性是 Value 属性。换句话说，上面的 VBA 示例等价于：

```
Dim r As Range

Set r = xlWorkSheet.Cells(i, 1)
r.Value = someValue 
```

当然，你也可以跳过`r`变量：

```
xlWorkSheet.Cells(i, 1).Value = someValue 
```

现在，C# 没有默认属性概念。因此，您无法以快捷方式编写此代码，这导致我们使用 Ria 回答中建议的代码：

```
xlWorkSheet.Cells[i, 1].Value = someValue; 
```

或者，用实际值代替`someValue`：

```
xlWorkSheet.Cells[i, 1].Value = table.Rows[i]["Ref"].ToString(); 
```

默认属性让初学者更容易编写代码，也有助于代码简洁，但对于介于初学者和高级阶段的人来说，它也会感到困惑。

# sharepoint - Sharepoint 重新排序列表中的项目顺序

> ID：11571285
> 
> 赞同：5
> 
> 时间：2012-07-20T00:32:46.133
> 
> 标签：sharepoint, sharepoint-2010

在列表中，我设置了“ID”列和“Title”列。

我在列表中添加了 10 项，我正在尝试将第 10 项放在 1 和 2 之间。经过研究，很多人说我不能手动更改 ID 号...有没有办法重新订购物品？删除每个项目是唯一的答案吗？

请帮忙！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T05:31:41.390

ID 列是一个内部的类身份列。您无法更改该值。如果您需要一个可以排序（和更改）的列，只需创建一个名为 SortOrder 的新列或其他东西。然后按该列排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-31T19:48:43.300

我知道这是一篇旧帖子，但我认为这可能会对可能正在寻找 OOB 答案的人有所帮助。进入您的链接列表，以便您在顶部看到您的列表工具、项目和列表。选择项目。功能区中有一个更改项目订单图标。这将允许您重新编号列表中的链接并更改顺序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T20:03:12.603

如果您基于链接列表定义创建列表，您可以手动更改项目顺序。这种列表允许您通过功能区按钮根据需要重新排序项目。我经常使用这种解决方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T09:59:03.690

ID 列是 SharePoint 内置的，您无法更改它的值。对于您的解决方案，您需要删除所有项目并再次插入它，或者正如@Nigel Whatling 所说，您必须添加 SortColumn

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-23T10:47:57.890

列设置只会更改 SharePoint 列表中的顺序。更改视图顺序 使用修改视图选择器来调整字段的排序方式。修改视图位于查找和项目框旁边的 ... 或如果您在站点设置中，它位于页面下方 3 的视图下

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-09T01:55:13.613

我也被困住了，无法使用以前的答案，因为我看不到他们在功能区中提到的按钮。

我去了功能区中的**列表**>**列表设置**。在列表设置页面的底部，我单击**视图**以对其进行编辑（或创建新视图）。取消标题**排序**，您可以更改要排序的列，并从降序更改为升序等。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-06-16T21:25:57.357

实际上，如果我理解了这个问题，那正是我试图完成的事情，并且花了我大部分时间在工作上。

1.  选择列表。
2.  从工具栏中，选择列表工具下的列表。
3.  单击列表设置。
4.  在列出的列下方，请参阅列排序
5.  修改“Position from Top”数字，然后单击底部的“确定”。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2015-08-25T19:29:54.840

更新步骤：

1.  选择列表。
2.  从工具栏中，选择列表工具下的列表。
3.  单击列表设置。
4.  在列列表上方单击“项目”链接
5.  在页面底部选择“列排序”
6.  修改“Position from Top”数字，然后单击底部的“确定”。

# haskell - 受类型挑战

> ID：11571287
> 
> 赞同：1
> 
> 时间：2012-07-20T00:32:49.017
> 
> 标签：haskell, types

问题：

目前我有一个类型`WorkConfig`，看起来像这样

```
data WorkConfig = PhaseZero_wc BuildConfig
                | PhaseOne_wc BuildConfig Filename (Maybe XMLFilepath)
                | PhaseTwo_wc String
                | SoulSucker_wc String
                | ImageInjector_wc String
                | ESX_wc String
                | XVA_wc String
                | VNX_wc String
                | HyperV_wc String
                | Finish_wc String
                    deriving Show 
```

（我使用`String`PhaseTwo_wc on 作为实际使用的占位符）

我有一个`updateConfig`将 WorkConfig 作为其参数之一的函数。

问题是我希望能够强制使用哪个构造函数。比如在函数中`phaseOne`我希望能够保证当`updateConfig`被调用时，只能使用`PhaseTwo_wc`构造函数。

为了使用类型类来执行此操作，我必须创建单独的数据构造函数，例如：

```
 data PhaseOne_wc = PhaseOne_wc  BuildConfig Filename (Maybe XMLFilepath) 
```

如果我走这条路，我还有另一个问题要解决。我有其他数据类型`WorkConfig`作为值，我该怎么做才能解决这个问题？例如，

```
type ConfigTracker = TMVar (Map CurrentPhase WorkConfig) 
```

在记住我上面提到的内容的同时，如何使用类型系统进行我想要的强制执行？

ConfigTracker 必须能够知道我想要哪种数据类型。

***澄清：我希望限制 updateConfig 可以将哪个 WorkConfig 作为参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T02:17:44.257

你的问题有点模糊，所以我会笼统地回答。

如果您有一种类型的表格：

```
data MyType a b c d e f g = C1 a b | C2 c | C3 e f g 
```

...并且您想要一些`f`适用于所有三个构造函数的函数：

```
f :: MyType a b c d e f g -> ... 
```

...但是您想要一些`g`仅适用于最后一个构造函数的函数，那么您有两个选择。

第一个选项是创建嵌入其中的第二种类型`C3`：

```
data SecondType e f g = C4 e f g 
```

...然后将其嵌入到原始`C3`构造函数中：

```
data MyType a b c d e f g = C1 a b | C2 c | C3 (SecondType e f g) 
```

...并产生`g`以下功能`SecondType`：

```
g :: SecondType e f g -> ... 
```

这只会使代码稍微复杂化，`f`因为您必须先解包`C3`才能访问`C4`构造函数。

第二种解决方案是您只需将`g`存储在`C3`构造函数中的值设为函数：

```
g :: e -> f -> g -> ... 
```

这不需要修改`f`或`MyType`类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T02:17:14.310

更具体地说，推动讨论，这个 GADT 和 Existential 代码与你想要的有多接近？

```
{-# LANGUAGE GADTs, KindSignatures, DeriveDataTypeable, ExistentialQuantification, ScopedTypeVariables, StandaloneDeriving #-}
module Main where

import qualified Data.Map as Map
import Data.Typeable
import Data.Maybe

data Phase0 deriving(Typeable)
data Phase1 deriving(Typeable)
data Phase2 deriving(Typeable)

data WC :: * -> * where
  Phase0_ :: Int -> WC Phase0
  Phase1_ :: Bool -> WC Phase1
 deriving (Typeable)
deriving instance Show (WC a)

data Some = forall a. Typeable a => Some (WC a)
deriving instance Show Some

things :: [Some]
things = [ Some (Phase0_ 6) , Some (Phase1_ True) ]

do'phase0 :: WC Phase0 -> WC Phase1
do'phase0 (Phase0_ i) = Phase1_ (even i)

-- Simplify by using TypeRep of the Phase* types as key
type M = Map.Map TypeRep Some

updateConfig :: forall a. Typeable a => WC a -> M -> M
updateConfig wc m = Map.insert key (Some wc) m
  where key = typeOf (undefined :: a)

getConfig :: forall a. Typeable a => M -> Maybe (WC a)
getConfig m = case Map.lookup key m of
                Nothing -> Nothing
                Just (Some wc) -> cast wc
   where key = typeOf (undefined :: a)

-- Specialization of updateConfig restricted to taking Phase0
updateConfig_0 :: WC Phase0 -> M -> M
updateConfig_0 = updateConfig

-- Example of processing from Phase0 to Phase1
process_0_1 :: WC Phase0 -> WC Phase1
process_0_1 (Phase0_ i) = (Phase1_ (even i))

main = do
  print things
  let p0 = Phase0_ 6
      m1 = updateConfig p0 Map.empty
      m2 = updateConfig (process_0_1 p0) m1
  print m2
  print (getConfig m2 :: Maybe (WC Phase0))
  print (getConfig m2 :: Maybe (WC Phase1))
  print (getConfig m2 :: Maybe (WC Phase2)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T02:23:56.403

抱歉，这更像是一个扩展评论而不是答案。我有点困惑。听起来你有一些功能，比如

```
phaseOne = ...
           ... (updateConfig ...) ...

phaseTwo = ...
           ... (updateConfig ...) ... 
```

并且您正在尝试确保，例如，在 的定义中`phaseOne`，这永远不会出现：

```
phaseOne = ...
           ... (updateConfig $ PhaseTwo_wc ...) ... 
```

但是现在我问你：是`updateConfig`纯（非单子）函数吗？因为如果是的话，than`phaseOne`可以很容易地完全正确并且仍然`updateConfig`使用`PhaseTwo_wc`;调用。即它可能会丢弃结果（即使它也是一元的）：

```
phaseOne = ...
           ... (updateConfig $ PhaseTwo_wc ...) `seq` ... 
```

换句话说，我想知道您要强制执行的约束是否真的是您正在寻找的实际属性？

但是现在，如果我们考虑单子，有一个常见的模式，你所描述的*有点*像：制作“特殊”单子，限制可以执行的动作类型；例如

```
data PhaseOneMonad a = PhaseOnePure a | PhaseOneUpdate BuildConfig Filename (Maybe XMLFilepath) a

instance Monad PhaseOneMonad where ... 
```

这可能是你的意思吗？另请注意，`PhaseOneUpdate`不需要`WorkConfig`; 它只接受它感兴趣的构造函数参数。这是另一种常见的模式：你不能限制使用哪个构造函数，但你可以直接接受参数。

嗯……虽然还不确定。

# installation - 在 Windows 应用程序中添加新的安装程序类得到编译器错误

> ID：11571290
> 
> 赞同：0
> 
> 时间：2012-07-06T11:27:51.210
> 
> 标签：installation, c#, .net-3.5

我用安装项目创建了一个寡妇应用程序。我编译并构建。一切看起来都很好。

为了在安装过程中更改配置文件，我正在尝试添加一个新的安装程序文件。当我默认添加它时，我得到以下代码

```
 [RunInstaller(true)]
    public partial class Installer : Installer
    {
        public Installer()
        {
            InitializeComponent();
        }
    } 
```

修改之前当我编译这个 Am gettin **Circular 基类依赖项涉及“windows_setup.Installer”和“windows_setup.Installer”**

windows setup 是我用于应用程序的名称空间

之后我将班级名称更改为

```
public partial class MyInstaller : Installer 
```

现在我得到 **不一致的可访问性：基类“windows_setup.Installer”比“windows_setup.MyInstaller”类更难访问**

为什么会得到这个以及如何解决这个......？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T00:39:21.133

这是一个`partial`类，您有两个与该类关联的源文件。您必须更改第二个源文件以使用 MyInstaller 类名。

# model-view-controller - 在 objectfactory.initialize 和自定义注册表中使用扫描的结构图

> ID：11571292
> 
> 赞同：0
> 
> 时间：2012-07-20T00:33:36.810
> 
> 标签：model-view-controller, structuremap

我正在学习使用结构映射，我遇到了以下情况 - 我在 global.asax 中使用以下代码一直很好 -

```
ObjectFactory.Initialize(registry => registry.Scan(x =>
                                           {
                                               x.AssembliesFromApplicationBaseDirectory();
                                               x.WithDefaultConventions(); 
                                               x.LookForRegistries();
                                           })); 
```

现在，我遇到了一个实例，我必须创建一个注册表并同时使用它 -

```
ObjectFactory.Initialize(registry => registry.AddRegistry<MyRegistry>()); 
```

有人可以告诉我如何做到这一点吗？我现在是否必须为所有内容创建注册表，或者我可以创建一个可以扫描的注册表，然后我可以将其与另一个注册表一起使用？

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:35:02.407

似乎我用这个开枪了 - 通过调用 x.LookForRegistries();，它确实发现了我的自定义注册表，并且一切似乎都工作正常。

谢谢

# c++ - 我可以从 boost::multi_array 得到 T**(c 风格的二维数组)吗 ?

> ID：11571293
> 
> 赞同：2
> 
> 时间：2012-07-20T00:33:36.793
> 
> 标签：c++, arrays, boost, multidimensional-array

因为我想使用 boost::multi_array<>，同时，遗留库需要 c 样式的 2d 数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T03:55:05.913

`T **`不是C 样式的数组*。*内置 C 样式数组是通过覆盖在普通一维数组上的索引重新计算技术实现的。

`T **`将是一个手动实现的“多级”二维数组。这种二维数组使用两级实现，第一级数组是指向包含实际数据的第二级数组的指针数组。这是一种完全不同的方法，与内置数组不兼容。

所使用的内存布局`boost::multi_array<T, 2>`与内置 C 样式数组相同，即它是一个通过索引重新计算“假装”为 2D 的 1D 数组。您不能从中“提取” `T **`-style 数组，因为两级内存结构根本不存在于`boost::multi_array`.

这实际上提出了遗留库需要哪种数组的问题：`T **`-style 数组或 C-style 数组，因为它们不一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T00:50:25.033

如果 boost multi 数组的布局方式与原始 c++ 数组相同，那么您不能以标准方式访问它吗？

从[boost multi_array 参考](http://www.boost.org/doc/libs/1_50_0/libs/multi_array/doc/reference.html#multi_array)：

> c_storage_order
> 
> ...
> 
> c_storage_order 用于指定数组应使用与原始 C++ 多维数组相同的布局来存储其元素，即从最后一维到第一维。这是此库提供的数组的默认存储顺序。

在底部：

> 这个库与 boost::array 类似，因为它增加了 C 风格的 N 维数组，就像 boost::array 对 C 一维数组所做的那样。

这意味着它只是添加了包装器以便于声明和访问，但在引擎盖下它听起来像标准的多维数组。

你有没有尝试过？你看有什么问题吗？

**编辑**

正如之前指出的，它似乎是一个一维数组。但似乎可以像这样访问它：

```
#include <boost/multi_array.hpp>

void f( int * arr )
{
    std::cout << __PRETTY_FUNCTION__ << " start" << std::endl;
    for( int y = 0; y != 2; ++y )
    {
        for ( int x = 0; x != 4; ++x )
        {
            //  std::cout << arr[x][y] << "," ;  // compiler does not like
            std::cout << arr[ x + ( y * 4 ) ] << "," ;
        }
        std::cout << std::endl;
    }

    std::cout << __PRETTY_FUNCTION__ << " end" << std::endl;
} 
```

和

```
void multi()
{
    typedef boost::multi_array< int, 2 > arr_t;
    typedef arr_t::index index;

    arr_t a( boost::extents[2][4],  boost::c_storage_order() );

    int v( 0 );

    for ( index i = 0; i != 2; ++i )
        for( index j = 0; j != 4; ++j )
        {
            a[i][j] = ++v;
        }

    v = 0;
    for ( index i = 0; i != 2; ++i )
        for( index j = 0; j != 4; ++j )
        {
            assert( a[i][j] == ++v );
        }

    for ( index i = 0; i != 2; ++i )
    {
        for( index j = 0; j != 4; ++j )
        {
            std::cout << a[i][j] << "," ;
        }
        std::cout << std::endl;
    }

    f( a.data() );
} 
```

输出：

```
1,2,3,4,
5,6,7,8,
void f(int*) start
1,2,3,4,
5,6,7,8,
void f(int*) end 
```

# jasper-reports - jasperreport 服务器调度与今天的日期

> ID：11571299
> 
> 赞同：1
> 
> 时间：2012-07-20T00:34:42.563
> 
> 标签：jasper-reports, jasperserver

我正在尝试使用调度程序以今天的日期作为输入参数来设置报告。这可能吗？

我看到您可以为输入参数设置静态值，但不能将其设置为 now() 或某些变体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:14:44.730

报告参数名称为 $P{Date}

我已将默认表达式设置为

```
($P{Date} == null ? new Date() : $P{Date}) 
```

它似乎有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T17:10:17.427

Sam，在您的报告中，您能否创建一个默认值为今天日期的参数（请参阅按日期范围过滤：http: [//jasperforge.org/plugins/mwiki/index.php/Jasperserver/Filtering_on_a_date_range](http://jasperforge.org/plugins/mwiki/index.php/Jasperserver/Filtering_on_a_date_range)）？然后将其设为强制性，以便 JasperReports Server 将在没有给出其他输入时选择默认值。

# r - r中的ggplot2公式循环

> ID：11571305
> 
> 赞同：4
> 
> 时间：2012-07-20T00:35:55.463
> 
> 标签：r, loops, ggplot2

这是一个例子：

```
require(ggplot2)
p <- ggplot(mtcars, aes(x = wt, y = mpg)) + geom_point()

yintercept <- c(5, 12, 20, 28, 29, 40)
col <- c("red", "blue", "green", "pink", "yellow", "tan")

# for the first level yintercept, and col 
p + geom_hline(aes(yintercept = 5), col = "red") 
```

我有上面列出的更多级别的变量，而不是写长的“+”公式，我可以循环这个过程吗？对不起，简单的问题。

**编辑：**如何循环公式中的 x 或 y 变量

```
 myd <- data.frame (y = rnorm (100, 5, 10), X1 = rnorm (100, 5, 1), 
    X3 = rnorm (100, 10, 2), X4 = rnorm (100, 50,4))

x <- c("X1",  "X2",   "X3", "X4")

p <- ggplot(myd, aes(y = y)) + 
 mapply ( function (x) (geom_point(x = aes_string (x)))) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T00:49:47.263

**ggplot2**执行此操作的方法是始终*将*数据放入数据框中并映射美学。它使事情变得更简单：

```
df <- data.frame(yint = yintercept)

# for the first level yintercept, and col 
p + geom_hline(data = df,aes(yintercept=yint,colour = factor(yint))) + 
    scale_colour_manual(values = col,guide = "none") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T00:46:49.847

尝试

```
p+mapply(function(a,b){dum<-aes_string(yintercept=a);
                       geom_hline(dum, col = b)},a=yintercept,b=col) 
```

# python - 返回并删除所有元组键包含给定元素的键值对

> ID：11571310
> 
> 赞同：1
> 
> 时间：2012-07-20T00:36:14.240
> 
> 标签：python, dictionary, tuples

给定一个由 2 元素元组作为键的字典，我想返回其键包含给定元素的所有键值对。

例如，字典可以是：

```
tupled_dict = {('a',1):1, ('a',2):0, ('b',1):1, ('c',4):0} 
```

并且给定的元素是`'a'`，那么应该返回的键值对将是：

```
('a',1):1, ('a',2):0 
```

最快的代码是什么？

编辑：

此外，作为一个相关的子问题，我对删除给定键元素的所有此类键值对的最快方法感兴趣。显然，一旦我得到了上面的结果，我可以使用一个循环将每个字典项一个一个地删除，但我想知道是否有捷径可以做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T00:53:34.417

要获得那些：

```
>>> {k: v for k, v in tupled_dict.iteritems() if 'a' in k}
{('a', 1): 1, ('a', 2): 0} 
```

同样，要删除其他的：

```
>>> tupled_dict = {k: v for k, v in tupled_dict.iteritems() if 'a' not in k}
>>> tupled_dict
{('b', 1): 1, ('c', 4): 0} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T00:48:48.610

我还没有测试它的性能，但我建议你首先使用 for 循环获取基线，然后使用[dict comprehensions](http://www.python.org/dev/peps/pep-0274/)获取另一个基线。

```
>>> {k:v for k, v in tupled_dict.iteritems() if k[0] == 'a'}
{('a', 1): 1, ('a', 2): 0} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T01:01:39.647

即使 'a' 不是键元组中的第一个元素，此代码段也将起作用：

```
from operator import methodcaller

contains_a = methodcaller('__contains__', 'a')
keys = filter(contains_a, tupled_dict)
new_dict = dict(zip(keys, map(tupled_dict.get, keys)) 
```

# ios - 如何制作多行左对齐的 UIAlertView？

> ID：11571315
> 
> 赞同：18
> 
> 时间：2012-07-20T00:36:54.710
> 
> 标签：ios, objective-c, sdk, uialertview

我有兴趣制作一个左对齐的 UIAlertView，其中包含几行，如公告列表，如下所示：

*   1号线
*   2号线
*   3号线

这是我到目前为止所拥有的：

```
alert = [[UIAlertView alloc] initWithTitle: @"How to use buttons"
                                   message: @"line 1\. line 2, line 3 "
                                  delegate: nil
                         cancelButtonTitle: @"OK"
                         otherButtonTitles: nil]; 
```

我还想将警报视图的颜色更改为红色。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-20T00:40:05.353

项目符号由 unicode 代码 0x2022 表示。我让它像这样使用“\n”换行：

```
UIAlertView *alert = [[UIAlertView alloc]
            initWithTitle: @"How to use buttons"
            message: [NSString stringWithFormat: @"%C line 1.\n %C line 2,\n %C line 3", (unichar) 0x2022, (unichar) 0x2022, (unichar) 0x2022];
            delegate: nil
            cancelButtonTitle:@"OK"
            otherButtonTitles:nil]; 
```

这应该适用于子弹。

对于左对齐，请执行以下操作：

```
NSArray *subViewArray = alertView.subviews;
for(int x = 0; x < [subViewArray count]; x++){

    //If the current subview is a UILabel...
    if([[[subViewArray objectAtIndex:x] class] isSubclassOfClass:[UILabel class]]) {
        UILabel *label = [subViewArray objectAtIndex:x];
        label.textAlignment = NSTextAlignmentLeft;
    }
} 
```

总而言之：

*   "\n" 用于显示**新行**。
*   `[NSString stringWithFormat:@"%C Line n", (unichar) 0x2022];`对于**子弹**。
*   对于**对齐**，遍历警报视图的子视图并确定哪些子视图是 的子类`UILabel`。然后使用 将标签的文本对齐方式更改为左对齐`label.textAlignment = NSTextAlignmentLeft`。
*   完成**所有**这些后，您就可以调用`[alert show];`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T11:07:57.457

左对齐：

```
 NSArray *subviewArray = alert.subviews;
for(int x = 0; x < [subviewArray count]; x++){

    if([[[subviewArray objectAtIndex:x] class] isSubclassOfClass:[UILabel class]]) {
        UILabel *label = [subviewArray objectAtIndex:x];
        label.textAlignment = UITextAlignmentLeft;
    } 
```

要在警报视图后面显示红色背景：

```
alert.backgroundColor=[UIColor redColor]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-25T19:16:14.517

确保使用 \ 而不是普通的 /。

alt + shift + 7（在我的键盘上）

\n

那应该这样做。:-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T09:49:48.903

对于新行和文本对齐，更喜欢**@qegal 的**答案，即一个是完美的，但是如果您想更改颜色或自定义警报视图，我可以使用一个很棒的类而不是系统的警报视图，只需检查[一下](https://github.com/AalokParikh/CustomAlertView)，这肯定会有效. 即使它也可以帮助您获得带有对齐和项目符号列表的多行消息。

如果您在使用它时发现任何问题，请寻求帮助，我一定会帮助您。

快乐编码:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T00:40:10.577

`\n`您可以通过插入消息来创建新行。例如：

```
@"line 1.\nline 2,\nline 3" 
```

# javascript - 在循环中获取值的更好方法

> ID：11571318
> 
> 赞同：6
> 
> 时间：2012-07-20T00:37:08.597
> 
> 标签：javascript, loops

```
for( var i=0; i<20; i++) 
    setTimeout(function(){ 
        console.log(">>> "+i); 
    }, i*100); 
```

所以，上面的代码输出了`>>> 19`20 次。为了保持`i`它的迭代值，我使用了一个闭包：

```
for(var i=0; i<20; i++)(function(i){
    setTimeout(function(){ 
        console.log(">>> "+i); 
    }, i*100);
}(i)); 
```

有什么问题？问题是循环控制语句，`continue;`我可以这样做，`return;`但是当我需要`break;`代码时，当其他人尝试阅读它时，它会变得违反直觉。

那么我能做什么呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T00:44:50.057

这个怎么样？

```
for (var i = 0; i < 20; i++) {
    var action = (function(i){
        setTimeout(function(){ 
            console.log(">>> "+i); 
        }, i*100);

        // break => return false
        // continue => return anything (e.g. true)
        // default => return nothing
        return false;
    })(i);

    if (action !== undefined) {
        if (!action) {
            break;
        }
        else {
            continue;
        }
    }
} 
```

编辑：
为 continue 语句添加了“支持”。这现在以某种方式像`jQuery.each()`循环一样工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T00:39:25.353

问题是当 i 变量为 19 时，实际上是在循环之后调用代码。你必须使用一些局部变量。为了不让自己感到困惑，我建议为闭包参数使用另一个名称。

顺便说一下，第二个版本运行良好

# c# - 程序集：WebActivator.PreApplicationStartMethod 不工作

> ID：11571324
> 
> 赞同：0
> 
> 时间：2012-07-20T00:38:20.380
> 
> 标签：c#, .net, iis, attributes, webactivator

基本上我的代码如下所示：

```
 [assembly: WebActivator.PreApplicationStartMethod(typeof(OpusOneCorp.Presentation.Client.Mvc.EndUser.App_Start.StructuremapMvc), "Start")]

    namespace OpusOneCorp.Presentation.Client.Mvc.EndUser.App_Start {
        public static class StructuremapMvc {
            public static void Start() {
                var container = InversionOfControl.InitializeForUser();
                DependencyResolver.SetResolver(new StructureMapDependencyResolver(container));
                ObjectFactory.GetInstance<IThreadRunner>().Check();
            }
        }

} 
```

好吧，我不是这段代码的作者，但它被实现为在每次项目启动时运行，并且它使用 Web Activator 属性来执行此操作。在我的机器上，它真的是一种奇怪的方式。如果我在它上面设置了一个断点，那么它根本不会到达断点，这意味着它在应用程序启动之前没有到达这个代码。

其次，当我做 iisreset 时，它第一次命中它但没有再进一步命中它......同时，它每次都在我同事的计算机上命中它......这是非常不一致的行为它刚刚开始表演这是。我有这个代码几个月了，它从来没有坏过，但它突然开始这样做了。当然，这意味着其他东西已经改变了它，但是如果它已经破坏了它，那么它永远不应该达到断点，而不是决定每次我执行 iisreset 时都击中它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T10:06:48.510

您是在同事的计算机上使用 IIS，还是在 Web 服务器中内置了 Visual Studio？

每次您从 vs 运行网站时，vs Web 服务器都会重新启动应用程序，在应用程序启动时遇到断点，但 IIS 只会在第一次调用时启动应用程序。这就是为什么在您执行 iisreset 之前它不会再次达到断点的原因。

# sql - SQL合并具有特定匹配列的行

> ID：11571325
> 
> 赞同：0
> 
> 时间：2012-07-20T00:38:23.220
> 
> 标签：sql, join, inner-join

我试图在我的代码中处理这个应该在 SQL 中处理的问题。问题是我想拿这个

ID COL 1 | ID COL 2 | 收费 | 支付

```
 2    |       3    |    17    |      0
 2    |       3    |    0     |      17 
```

把它变成这个

ID COL 1 | ID COL 2 | 收费 | 支付

```
 2    |       3    |    17    |    17 
```

表格1

编号 | 随便| 随便1

5 | 空 | 无效的

表2

编号 | 编号 1 | 编号 2 | 收费 | 支付

5 | 2 | 3 | 17 | 0

5 | 2 | 3 | 0 | 17

当前结果：

编号 | 随便| 随便1 | idcol1 | idcol2 | 收费 | 支付

5 | 空 | 空 | 2 | 3 | 17 | 0

5 | 空 | 空 | 2 | 3 | 0 | 17

想：

编号 | 随便| 随便1 | idcol1 | idcol2 | 收费 | 支付

5 | 2 | 3 | 17 | 17

问题是在我的 sql 调用期间，我正在做一个内部连接，它为一些值做一个笛卡尔积，而不是做我上面想要的。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T00:55:36.043

您可以为此使用 group by：

```
select IDCOL1, IDCOL2, max(CHARGE) as charge, max(PAYMENT) as payment
from table t
group by idcol1, idcol2 
```

这将从具有相同 id 列的所有行中获取最高费用和最高付款。如果您有不止一行的费用或付款，您可能更喜欢 SUM() 而不是 MAX()。

有了连接，这看起来像：

```
select t1.id, t1.whatever, t1.whatever, t2.IDCOL1, t2.IDCOL2,
       max(CHARGE) as charge, max(PAYMENT) as payment
from table1 t1 join
     table2 t2
     on t1.id = t2.id
group by t1.id, t1.whatever, t1.whatever, t2.IDCOL1, t2.IDCOL2 
```

# python - 从列表列表中制作字典

> ID：11571327
> 
> 赞同：0
> 
> 时间：2012-07-20T00:38:35.533
> 
> 标签：python, list, dictionary

我一直无法弄清楚这一点，我认为问题可能出在我制作列表的方式上。任何人都可以帮忙吗？谢谢！

我想要的结果是

codondict = {'A': ['GCT','GCC','GCA','GCG'], 'C': ['TGT','TGC'], &c

但我得到的是：

{'A'：'A'，'C'：'C'，&c。

这是我的终端：

> > > A=['GCT','GCC','GCA','GCG']
> > > 
> > > C=['TGT','TGC']
> > > 
> > > D=['GAT','GAC']
> > > 
> > > E=['GAA','GAG']
> > > 
> > > F=['TTT','TTC']
> > > 
> > > G=['GGT','GGC','GGA','GGG']
> > > 
> > > H=['CAT','CAC']
> > > 
> > > 我=['ATT','ATC','ATA']
> > > 
> > > K=['AAA','AAG']
> > > 
> > > L=['TTA','TTG','CTT','CTC','CTA','CTG']
> > > 
> > > M=['ATG']
> > > 
> > > N=['AAT','AAC']
> > > 
> > > P=['CCT','CCC','CCA','CCG']
> > > 
> > > Q=['CAA','CAG']
> > > 
> > > R=['CGT','CGC','CGA','CGG','AGA','AGG']
> > > 
> > > S=['TCT','TCC','TCA','TCG','AGT','AGC']
> > > 
> > > T=['ACT','ACC','ACA','ACG']
> > > 
> > > V=['GTT','GTC','GTA','GTG']
> > > 
> > > W=['TGG']
> > > 
> > > Y=['TAT','TAC']
> > > 
> > > 氨基酸=['A','C','D','E','F','G','H','I','K','L','M','N' ,'P','Q','R','S','T','V','W','Y']
> > > 
> > > 从集合导入 defaultdict
> > > 
> > > codondict=defaultdict(列表)
> > > 
> > > 对于氨基酸中的 i：
> > > 
> > > ...对于 i 中的 j：（也尝试了列表（i）中的 j）
> > > 
> > > ... ... codondict[i]=j ...
> > > 
> > > 共犯
> > > 
> > > defaultdict(, {'A': 'A', 'C': 'C', 'E': 'E', 'D': 'D', 'G': 'G', 'F': 'F '，'I'：'I'，'H'：'H'，'K'：'K'，'M'：'M'，'L'：'L'，'N'：'N'， 'Q'：'Q'，'P'：'P'，'S'：'S'，'R'：'R'，'T'：'T'，'W'：'W'，'V' '：'V'，'Y'：'Y'}）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T00:47:41.493

你可以试试这个：

```
condondict= dict(A=['GCT','GCC','GCA','GCG'],
C=['TGT','TGC'],
D=['GAT','GAC'],
E=['GAA','GAG'],
F=['TTT','TTC'],
G=['GGT','GGC','GGA','GGG'],
H=['CAT','CAC'],
I=['ATT','ATC','ATA'],
K=['AAA','AAG'],
L=['TTA','TTG','CTT','CTC','CTA','CTG'],
M=['ATG'],
N=['AAT','AAC'],
P=['CCT','CCC','CCA','CCG'],
Q=['CAA','CAG'],
R=['CGT','CGC','CGA','CGG','AGA','AGG'],
S=['TCT','TCC','TCA','TCG','AGT','AGC'],
T=['ACT','ACC','ACA','ACG'],
V=['GTT','GTC','GTA','GTG'],
W=['TGG'],
Y=['TAT','TAC']) 
```

使用的原因`defaultdict()`是允许访问/创建字典值而不会导致 KeyError，或者使用以下形式绕过：

```
if key not in mydict.keys():
    mydict[key] = []
mydict[key].append(something) 
```

如果您没有动态创建新密钥，那么您实际上不需要使用`defaultdict()`.

此外，如果您的键已经代表*氨基酸*，您只需遍历键本身。

```
for aminoacid, sequence in condondict.iteritems():
    # do stuff with with data... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T00:56:32.837

另一种方法是使用该[`locals()`](http://docs.python.org/library/functions.html#locals)函数，它返回一个字典，其中包含本地范围的整个变量集，变量名作为键，其内容作为值。

```
for i in aminoacids:
    codondict[i] = locals()[i] 
```

因此，您可以获取`A`列表，例如，使用：`locals()['A']`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T07:23:37.710

您也可以使用内置的 globals() 和 dict 理解：

```
codondict = {k:globals()[k] for k in aminoacids} 
```

最好依赖 locals() 而不是 globals()，就像 stummjr 的解决方案一样，但是你不能直接用 dict 理解这样做

```
codondict = dict([(k,locals()[k]) for k in aminoacids]) 
```

但是，您可以这样做：

```
loc = locals()
codondict = {k:loc[k] for k in aminoacids} 
```

如果你动态地改变你的氨基酸列表或氨基酸分配，最好使用一些更懒惰的东西，比如：

```
codondict = lambda: {k:globals()[k] for k in aminoacids} 
```

最后，您可以随时使用更新的字典，但它现在是可调用的，因此使用 codondict()[x] 而不是 codondict[x] 来获取实际的字典。这样，您可以像 hist = codondict() 一样存储整个 dict，以防您需要比较 codondict 的不同历史版本。这足够小，可以在交互模式下使用，但不建议在更大的代码中使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T00:43:06.287

这有点冗长，并且混淆了变量的名称`'A'`和它的值`A`。保持你所拥有的：

```
aminoacids = { 'A': A, 'C': C, 'D': D ... } 
```

应该给你你要的字典：

```
{ 'A' : ['GCT', 'GCC', 'GCA', 'GCG'], 'C' : ['TGT', 'TGC'], ... } 
```

其中键的顺序`'A'`可能`'C'`不是你得到的，因为字典没有排序。

# c# - 简单的自定义网格控件

> ID：11571330
> 
> 赞同：0
> 
> 时间：2012-07-20T00:39:13.653
> 
> 标签：c#, .net, custom-controls

我正在设计一个[Point and Figure Charting](http://en.wikipedia.org/wiki/Point_and_figure_chart)程序，我的第一个版本使用了 DataGridView 控件，我发现它对于我的需要来说太大而且臃肿。我所需要的只是一个简单的控件，它显示一个将用 X 和 O 填充的方形网格。

数据从yahoo Finance解析为Open，High，Low，Close数据，按照一组规则排序，转换成Int Array，会对应行的索引，所以控制越简单，越少膨胀在咀嚼大量数据时效率更高。

我还需要能够轻松调整网格中正方形的大小，以放大和缩小数据。

我不熟悉创建自定义控件（但愿意学习），而且我对我正在使用的搜索词没有太多运气，因此任何指向正确方向的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T02:20:58.277

在通常与颜色/图形相关的东西之前，我已经实现了几个像这样的自定义控件，它们通常最终比你想象的要多。

在上一个项目中，我需要自定义显示内容（许多不同机器之间的大量 TCPConnection 状态矩阵），我只是使用了 Xceed 的 gridControl 并将列动态添加到控件中。我保留了我添加的列的索引的内部字典，以便后续行可以从直接引用该列中受益。

您可能会使用许多不同的网格控件。或者，如果您想使用* *Pain* * t 的东西来使用自定义控件，您也可以这样做。

列，行的属性..计算可用空间，然后绘制水平/垂直，然后在正确的空间中绘制其他值，但是 eek 准备投入大量时间使其“恰到好处”

# balanced-payments - 平衡的重复银行账户检测

> ID：11571333
> 
> 赞同：0
> 
> 时间：2012-07-20T00:39:24.913
> 
> 标签：balanced-payments

我已经通过 API 在 Balanced 上创建了一个新的商家帐户。我向该帐户添加了一个银行帐户，然后标记了完全相同的银行帐户，然后再次添加。我期待第二个关联会抛出 409，告诉我无法添加该帐户。

我有两个问题：

1.  为什么 API 允许我将完全相同的银行账户/卡添加到一个账户两次？
2.  如何检测到这一点而不将银行账户/卡添加到账户中？

这是我通过 Ruby gem 在一个帐户上创建的两个银行帐户的示例：

```
irb(main):029:0> @bank_accounts.items.each { |a| 
  puts "#{a["bank_name"]} #{a["bank_code"]} created-#{a["created_at"]} #{a["last_four"]} uri=#{a["uri"]} id=#{a["id"]}"
}; nil
123456789 created-2012-07-11T23:36:57.290555Z 2333 uri=/v1/marketplaces/TEST-MP4Z4RaRDF6TWqeupiVUSu8m/accounts/AC2tip2eDhi92THXXEkIdys1/bank_accounts/BA2mP9GtEPVB3v9DzWJ7ZH8B id=BA2mP9GtEPVB3v9DzWJ7ZH8B
123456789 created-2012-07-11T23:37:22.655007Z 2333 uri=/v1/marketplaces/TEST-MP4Z4RaRDF6TWqeupiVUSu8m/accounts/AC2tip2eDhi92THXXEkIdys1/bank_accounts/BA2PlMIVFyMSSzo2zzUZb2XA id=BA2PlMIVFyMSSzo2zzUZb2XA
=> nil 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T15:50:51.050

1.  如您所见，添加重复的银行账户和卡没有任何限制。这是一个允许开发人员减轻编写代码以捕获重复银行账户的负担的决定。您的反馈已被记录和赞赏。
2.  您可以索引与用户关联的卡或银行账户，Balanced 不会返回完整的卡号，但通过比较 last_four、到期和名称，您可以判断卡是否匹配，类似的字段可用于银行账户，但交换使用银行代码（路由号码）到期。

    在 Ruby 中做这样的事情的代码是：

    ```
    require 'balanced'

    Balanced.configure 'e1c5ad38d1c711e1b36c026ba7e239a9'

    # duplicate cards
    card1 =  Balanced::Card.new(:card_number=>"4111111111111111", :expiration_month=>"12", :expiration_year=>"2020").save()  # original card
    card2 =  Balanced::Card.new(:card_number=>"4111111111111111", :expiration_month=>"12", :expiration_year=>"2020").save()  # our duplicate card
    card3 =  Balanced::Card.new(:card_number=>"4111111111111111", :expiration_month=>"12", :expiration_year=>"2021").save()  # a different card

    # create a new account
    buyer = Balanced::Account.new(:email_address => '%d@example.org' % Time.now).save()
    buyer.add_card(card1.uri)

    # helper function
    def has_card(cards, card)
       cards.map { |c| c.last_four == card.last_four && c.expiration_month == card.expiration_month && c.expiration_year == card.expiration_year }.include? true
    end

    puts 'buyer already has this card' if has_card(buyer.cards, card2)
    puts 'buyer does not have this card' if not has_card(buyer.cards, card3) 
    ```

# javascript - 用于主干.js 集合的主动过滤器

> ID：11571348
> 
> 赞同：0
> 
> 时间：2012-07-20T00:42:38.317
> 
> 标签：javascript, collections, backbone.js, faye, modelbinder

我的骨干收藏有一点问题。我只想显示 6 个模型，并且总是最新的 6 个。我使用 CollectionBinder (Backbone.ModelBinder) 来渲染和显示我的收藏，并使用 RailsFayeSubscriber 将它们与服务器同步。

问题是我不知道如何始终保持集合 6 个模型大。我尝试添加一个 this.on("add") 并在那里使用 .first(6) 来保留我想要的 6 个模型，但问题是我认为 CollectionBinder 或 RailsFayeSubscriber 也有 add-trigger 并抛出我关于集合中缺失模型的错误。

最好的办法是拥有比较器之类的东西，它总是对模型进行排序，但在这种情况下，某种有源滤波器总是保持 6 个模型大。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T01:05:31.580

One (kinda hacky) solution would be to interrupt the flow. So currently you have:

1.  collections gets added to
2.  your handler goes off, "messing up" the collection
3.  one of your library's handlers goes off, and gets upset

What you want is:

1.  collections gets added to
2.  one of your library's handlers goes off, and doesn't wig out
3.  your code goes off

There's likely some way to play with Backbone's event system to make the above happen, but you can also cheat:

1.  collections gets added to
2.  your handler goes off, and sets a timeout to "mess up" the collection in 1ms (`window.setTimeout(_.bind(this.limitTo6, this), 1)`)
3.  one of your library's handlers goes off, and doesn't wig out
4.  your timeout (1ms after the normal code flow is done) goes off, and messes up the collection without cheesing off our library

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T02:31:44.050

我在这篇[文章中使用了事件聚合器方法](https://stackoverflow.com/questions/7843278/fire-an-event-from-one-view-to-another-in-backbone)

不同之处在于，不是将聚合器添加到视图中，而是将其添加到集合中。创建第二个集合，它将充当您的“视图模型”，其中包含 6 个项目。第二个集合可以绑定到整个集合上的添加/重置事件。然后事件处理程序可以填充绑定的集合并触发重置事件，以便您的视图代码看起来与往常一样。

这似乎保持了惯用的主干专注于数据操作和更薄的视图。

# php - 想要删除任何唯一用户 ID 超过 50 项

> ID：11571349
> 
> 赞同：1
> 
> 时间：2012-07-20T00:42:53.130
> 
> 标签：php, mysql

我有一个名为“user-recent-activity”的表，其中包含以下列：id、userid、activity 和 datetime。现在，如果任何唯一用户标识的项目超过 50 个，我想删除记录，删除最旧的记录。例如，如果用户 id（比如说 1234）在这个表中有超过 50 条记录，那么我必须保存用户 id（1234）的最新 50 条记录并删除最旧的一条。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T00:52:58.510

在插入之前，查询具有该 ID 的最后 50 条记录（从新到旧排序）。如果有*第*50 个，则替换它（通过更新）而不是插入新行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T00:55:18.297

假设您使用的是支持标准 SQL 的 RDBMS，则应该使用以下存储过程。

创建过程 remove-old-activities (@userid int) 作为从 user-recent-activity 中删除，其中 userid=@userid 和 id 不在（从 user-recent-activity 中选择前 50 个 id，其中 userid=@userid order by datetime desc）

如果您的数据库不支持存储过程，那么您应该能够使用 SQL 参数来传递用户 ID 值...

希望有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T01:20:09.333

您可以使用 rank 方法精确定义行数，从而删除您想要的行。

```
 delete from tblName where id=
        (select id from (       
            select @i := CASE WHEN ( @userid <> userid ) THEN 1                      
                ELSE  @i+1                                      
                END AS rank , id,userid, datetime2 ,@userid:=userid AS clset          
            from tblName x,(SELECT @i:=0) a ,(SELECT @userid:= 0) s 
            order by x.userid, datetime2 desc) T 
          where T.rank='50')    ; 
```

另一种选择：使用选择查询选择排名 <=50 并插入到新表中。删除旧表，然后重命名新表。

```
insert into newtable (userid,activity,datetime2)
select userid,datetime2 from (
      select @i := CASE WHEN ( @userid <> userid ) THEN 1 
                    ELSE 
                     @i+1                     
                END AS rank , userid, activity,datetime2 ,@userid:=userid AS clset 
       from tblName x,(SELECT @i:=0) a ,(SELECT @userid:= 0) s
       order by x.userid, datetime2 desc) T
where t.rank <=50 
```

# objective-c - 为什么标签栏应用程序中的视图不旋转？

> ID：11571352
> 
> 赞同：0
> 
> 时间：2012-07-20T00:43:14.023
> 
> 标签：objective-c, youtube, uitabbarcontroller, rotation, landscape

我有一个标签栏应用程序，我的一个标签的视图控制器将 web 视图加载到 youtube 视频。我不知道为什么我点击播放并尝试观看视频时无法旋转。

这是我的代码

```
//
//  TefViewController.m
//  SephardiJews
//
//  Created by Yuval Marcus on 7/19/12.
//  Copyright (c) 2012 iOS Developer, Chief Writer at Sephardijews.com. All rights reserved.
//

#import "TefViewController.h"

@implementation TefViewController
@synthesize tef;

-(void)viewDidLoad {
    [super viewDidLoad];
    [tef loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.youtube.com/watch?v=YSuH69FlXiM"]]];

}

// Can't rotate landscape
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft);
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:42:57.563

tabbarcontroller 不会自动旋转到横向，除非所有的根控制器都支持相同的方向。你应该写

```
-(BOOL) shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)orientation{
    return YES;
} 
```

在要旋转的视图控制器的所有父级上（包括 uitabbar 控制器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:49:20.130

支持旋转由父控制器（导航控制器、TabBar 控制器、视图控制器等）决定，除非子控制器有不同的说明。如果要支持某些方向，只需覆盖

```
-(BOOL) shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)orientation; 
```

应用程序顶层控制器中的方法，并将该方法排除在所有子 VC 之外。孩子将从父母那里继承那些支持的方向。

# visual-studio-2010 - Visual Studio 2010 在调试开始时挂起一两分钟

> ID：11571354
> 
> 赞同：2
> 
> 时间：2012-07-20T00:43:35.087
> 
> 标签：visual-studio-2010, visual-studio, debugging

VS2010 在调试开始后挂起几分钟，之后调试照常继续。我不知道它在做什么，Process Explorer 说被调试的进程在挂起期间处于挂起状态，并且 Visual Studio 似乎除了挂起结束时的几 kB 之外没有向磁盘写入任何内容。

在我的任何项目中，八个月以来都没有这样的挂起，它是从昨天开始的。

**UPD：**重置所有设置解决了很多问题，包括这个挂起。我仍然不知道它是什么，但重置很神奇。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T02:02:11.060

我也注意到了这一点，并确定原因之一是任何使用中断或计时器的代码。Allegro 4.x（对 5.x 没有评论，因为我还没有使用它）是一个大罪人。简单地包括和调用定时器例程的全局初始化方法将导致这种情况发生。

# shell - shell脚本引用

> ID：11571355
> 
> 赞同：2
> 
> 时间：2012-07-20T00:43:57.387
> 
> 标签：shell

我写了一个小脚本，我用它来命名一个文件。

```
#objectname
echo "objectname"
read ON 
```

不能再简单了。

我对得到的文件进行了一些处理。

```
gpg -c --no-use-agent "$ON" 
```

例如，如果我有一个文件`a.exe`--> 它将对其进行加密并给我一个具有不同 md5 和扩展名的文件。现在，文件看起来是这样的`a.exe.gpg`

现在，如果我直接给它绑定文件名。

像这样的例子：取自：这个[链接](http://www.redhat.com/archives/fedora-list/2004-September/msg04889.html)

```
# This works
fileName='a.exe.gpg'
md5sum=$(md5sum ${fileName})
echo $md5sum 
```

它正确地返回它。

如果我想动态地做到这一点怎么办。

这是我尝试过的：

```
#does not work
gpg -c --no-use-agent "$ON"
fileName= `$ON.gpg`
md5sum= $(md5sum ${fileName}) 
echo $md5sum 
```

我在这里得到了这个错误：`upload.sh: 1: upload.sh: Fire.exe.gpg: not found`并且程序没有退出。

请问我到底错在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T00:54:19.767

错误在这里：

```
fileName= `$ON.gpg` 
```

1.  后面应该没有空格`=`。（另请看下一行。）
2.  您使用了反引号，它*执行* `$ON.gpg`而不是简单地评估它。反引号相同`$(...)`但不那么优雅。为此使用双引号。

阅读[Greg 的 wiki 引用条目，](http://mywiki.wooledge.org/Quotes)以获得带有自以为是的评论的超详细解释。:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T00:54:53.093

在 shell 脚本中进行分配时要小心。不要在`operator=`. 尝试以下操作：

```
fileName="$ON.gpg"
md5sum=$(md5sum ${fileName}) 
```

请注意，变量和赋值`operator=`是在一起的，没有空格。

此外，当您使用反引号 as 时``expression``，它将由 shell 像 using 一样执行`$(expression)`，正如用户 ghoti 所指出的那样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T00:49:47.287

你搞砸了修复文件名。

```
fileName="$ON.gpg" 
```

# python - 从异常中获取数据

> ID：11571357
> 
> 赞同：1
> 
> 时间：2012-07-20T00:44:14.720
> 
> 标签：python, list, exception, slice

我在切片包含不存在项目的列表时遇到问题。正如预期的那样，会出现一个**IndexError**异常，但我不想为列表中的每个切片执行 try 和 except 语句。 **upcomong**代码中的 self.uptime。

这是代码：

```
import datetime
from urllib2 import urlopen, URLError

from core.libs.menu import Colors
from core.libs.request_handler import make_request

class TargetBox(object):
    def __init__(self, url=None):
        self.url = url
        self.cmd = 'whoami;'
        self.cmd += 'id;'
        self.cmd += 'uname -a;'
        self.cmd += 'pwd;'
        self.cmd += 'ls -ld `pwd` | awk \'{print $1}\';'
        self.cmd += 'bash -c "input=\$(uptime); if [[ \$input == *day* ]]; then out=\$(echo \$input | awk \'{print \$3\\" days\\"}\'); if [[ \$input == *min* ]]; then out=\$(echo \\"\$out and \\" && echo \$input | awk \'{print \$5\\" minutes\\"}\'); else out=\$(echo \\"\$out, \\" && echo \$input | awk \'{print \$5}\' | tr -d \\",\\" | awk -F \\":\\" \'{print \$1\\" hours and \\"\$2\\" minutes\\"}\'); fi elif [[ \$input == *min* ]]; then out=\$(echo \$input | awk \'{print \$3\\" minutes\\"}\'); else out=\$(echo \$input | awk \'{print \$3}\' | tr -d \\",\\" | awk -F \\":\\" \'{print \$1\\" hours and \\"\$2\\" minutes\\"}\'); fi; echo \$out;" ;'
        self.cmd += "/sbin/ifconfig | grep -e 'inet addr' | grep -v '127.0.0.1' | cut -f2 -d':' | cut -f1 -d' ';"

        self.available_commands = ['@backdoor', '@download', '@enum', '@history', '@info', '@update', '@upload', 'clear', 'exit']

    def get_information(self):
        now = datetime.datetime.now()

        # Call get_page_source() method then assign it to self.source
        source = make_request.get_page_source(self.cmd)

        self.current_user = source[0]
        self.current_id = source[1]
        self.kernel_info = source[2]
        self.cwd = source[3]
        self.perm_cwd = source[4]
        try:
            self.uptime = source[5]
        except IndexError:
            self.uptime = 'Unknown'
        self.host_ip = ', '.join(source[6:])
        self.session = now.strftime("%Y-%m-%d")
        try:
            # Get the attacker's ip address (Thanks @mandreko)
            self.local_ip = (urlopen('http://ifconfig.me/ip').read()).strip()
        except URLError:
            self.local_ip = 'Unknown'

        self.info = \
        '''
        {dashed}
        {red}User{end}        :  {green}{current_user}{end}
        {red}ID{end}          :  {green}{current_id}{end}
        {red}Kernel{end}      :  {green}{kernel_info}{end}
        {red}CWD{end}         :  {green}{cwd}{end}\t\t{hot}{perm_cwd}{end}
        {red}Uptime{end}      :  {green}{uptime}{end}
        {red}Target's IPs{end}:  {green}{host_ip}{end}
        {red}Our IP{end}      :  {green}{local_ip}{end}
        {dashed}

        {hot}[+] Available commands: {available_commands}{end}
        {hot}[+] Inserting{end} {red}!{end} {hot}at the begining of the command will execute the command locally ({red}on your box{end}){end}
        '''.format(dashed='-' * int(len(self.kernel_info) + 16),
                red=Colors.RED, green=Colors.GREEN, end=Colors.END, hot=Colors.HOT,
                current_user=self.current_user,
                current_id=self.current_id,
                kernel_info=self.kernel_info,
                cwd=self.cwd,
                perm_cwd=self.perm_cwd,
                host_ip=self.host_ip,
                local_ip=self.local_ip,
                uptime=self.uptime,
                available_commands=self.available_commands,)
        print self.info

info = TargetBox() 
```

我可以在整个变量块上使用该语句吗？例如

```
try:
    self.current_user = source[0]
    self.current_id = source[1]
    self.kernel_info = source[2]
    self.cwd = source[3]
    self.perm_cwd = source[4]
    self.uptime = source[5]
except IndexError:
    self.var_name = 'Unknown' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T00:52:19.260

将值预初始化为它们的后备/默认值，然后在抛出异常时您可以什么都不做。

```
self.current_user = None
self.current_id = None
self.kernel_info = None
self.cwd = None
self.perm_cwd = None
self.uptime = 'Unknown'

try:
    self.current_user = source[0]
    self.current_id = source[1]
    self.kernel_info = source[2]
    self.cwd = source[3]
    self.perm_cwd = source[4]
    self.uptime = source[5]
except IndexError:
    pass 
```

当然，`None`根据您的特定情况更改为其他内容。

您还可以使用函数返回指定索引处的元素（如果存在），否则返回一些默认值：

```
def get_index_with_default(seq, index, default=None):
    try:
        return seq[index]
    except:
        return default 
```

然后您可以通过以下方式执行分配：

```
self.uptime = get_index_with_default(source, 5, 'Unknown') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T00:58:11.643

`try/except`大多数时候是一种有用的 Pythonic 方法，但在这种情况下，我会采取不同的策略，只需为不在原始列表中的每个值分配一个默认值。如果您使用迭代器和`next()`内置函数，您可以以自然的方式实现这一点：

```
source = iter(source)
self.current_user = next(source, "Unknown")
self.current_id = next(source, "Unknown")
self.kernel_info = next(source, "Unknown")
self.cwd = next(source, "Unknown")
self.perm_cwd = next(source, "Unknown")
self.uptime = next(source, "Unknown") 
```

实现此目的的另一种方法是将“未知”附加到列表中，直到达到所需的长度：

```
from itertools import repeat
source.extend(repeat("Unknown", 6 - len(source) if len(source) < 6 else 0))
self.current_user, self.current_id, self.kernel_info, self.cwd, self.perm_cwd, self.uptime = source 
```

# c# - 如何在 Metro (UWP) 中获取 BitmapImage 的宽度和高度？

> ID：11571365
> 
> 赞同：0
> 
> 时间：2012-07-20T00:45:11.083
> 
> 标签：c#, xaml, uwp, microsoft-metro, bitmapimage

我正在从事地铁应用程序。

而且我正在使用`BitmapImage`，因为我设置了构造函数`Uri`，但我一直意识到`PixelWidth`并`PixelHeight`返回`0`（我也验证了它`Uri`是正确的）。

我找不到另一个返回这些属性的类。我在想是否有办法通过字节数组或类似的方式获取这些数据。你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T02:01:42.103

检查 CacheOption 属性并设置为 BitmapCacheOption.None。您也可以尝试转换为 WriteableBitmap。如果我说的不是真的，对不起，因为我无法测试。Xaml（仅限 wpf）xD

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-01T09:14:56.600

`BitmapImage`如果图像未加载，则返回`0`。图像仅在实际使用时才加载，例如分配和显示。那是……有问题的。使用没有帮助，它只适用于 WP7。`PixelWidth``PixelHeight``Image.Source``BitmapCacheOption.None`

正确的解决方案是使用`BitmapDecoder`：

```
var stream = await storageFile.OpenReadAsync();
var decoder = await BitmapDecoder.CreateAsync(stream);
var size = new BitmapSize { Width = decoder.PixelWidth, Height = decoder.PixelHeight }; 
```

[在 MSDN 论坛上](https://social.msdn.microsoft.com/Forums/en-US/6ebfb789-040d-4b9d-8969-1135d3b62b17/pixelwidth-and-pixelheight-return-zero)找到了这个解决方案。

# jquery - MVC3 RedirectToAction 缓存

> ID：11571373
> 
> 赞同：2
> 
> 时间：2012-07-20T00:45:53.680
> 
> 标签：jquery, asp.net-mvc-3, http-caching, http-redirect

我有一个 MVC3 应用程序。我有一个动作 Action1，它通过 重定向到另一个动作 Action2 `RedirectToAction`。这会导致 HTTP 302 响应。响应似乎被缓存在某处，因为对 Action1 的后续调用从未命中服务器。我尝试了以下方法：

1.  将 Web.config 中的输出缓存设置为禁用。
2.  清除了我的浏览器（Chrome 和 IE9）缓存。
3.  将随机数附加到 Action1 的请求中。
4.  更改了 Action1 的操作以查看它是否会触发缓存死机。
5.  禁用了我的网络连接，认为我的本地主机请求以某种方式被缓存在路由器或其他东西中。

不管我做什么，似乎在某处仍然存在着一层缓存。我在笔记本电脑上本地运行 IIS 7.5 中的应用程序。我正在从同一台机器上访问它。我唯一的最终想法是 IIS 正在某处缓存重定向 - 但我无法弄清楚它可能在哪里。唯一值得一提的是，我通过动态创建表单并使用 jQuery 提交来发布请求。

以下是我请求 Action1 时的请求标头：

```
POST /Test/Action1
Host: localhost
Connection: keep-alive
Content-Length: 36
Cache-Control: max-age=0
Origin: http://localhost
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.57 Safari/536.11
Content-Type: application/x-www-form-urlencoded
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Referer: http://localhost/Test
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: CartID=2637139; ASP.NET_SessionId=njto1i55dsbfsib5x2vpin55; siteuidut=6750fc9eda6c479db11ce10328a595ec; UserID=1; .ASPXAUTH=0:6172Tz9ggmhlHKcOJE+Jmg== 
```

以下是响应标头：

```
HTTP/1.1 302 Found
Cache-Control: private, s-maxage=0
Content-Type: text/html; charset=utf-8
Location: /Test/Action2
Server: Microsoft-IIS/7.5
X-AspNetMvc-Version: 3.0
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Fri, 20 Jul 2012 00:42:59 GMT
Content-Length: 140 
```

# qt - 如何保存 QGRaphicsItem 区域中的像素？

> ID：11571375
> 
> 赞同：0
> 
> 时间：2012-07-20T00:46:42.083
> 
> 标签：qt, qt4, qgraphicsitem

事情是这样的，我开发了一个手动注释工具来注释图像，你知道，使用矩形来标记人的部分，头部，躯干，四肢，并存储宽度，高度，中心点，旋转等信息。我使用 QT 开发这个小工具，很酷，但我遇到了一个问题。我想将图像的像素保存在矩形区域（QGraphicsItems）中的 QGraphicsScene 中，所以，我想知道如何控制该区域的像素？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T05:07:04.463

您可以将矩形区域渲染到可以是 QImage 的 QPainter 中：http: [//qt-project.org/doc/qt-4.8/qgraphicsscene.html#render](http://qt-project.org/doc/qt-4.8/qgraphicsscene.html#render)

# ruby - 从字符串中删除 Array 中的短语

> ID：11571380
> 
> 赞同：2
> 
> 时间：2012-07-20T00:47:04.163
> 
> 标签：ruby, ruby-on-rails-3

我需要从 Ruby 中的字符串中删除一些短语。短语在数组中定义。它可能看起来像这样：

```
remove = ["Test", "Another One", "Something Else"] 
```

然后我想检查并从给定的字符串中删除这些。

“这是一个测试” => “这是一个” “这是另一个” => “这是” “这是另一个两个” => “这是另一个两个”

使用 Ruby 1.9.3 和 Rail 3.2.6。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T00:52:28.907

```
ary = ["Test", "Another One", "Something Else", "(RegExp i\s escaped)"]
string.gsub(Regexp.union(ary), '') 
```

[`Regexp.union`](http://www.ruby-doc.org/core-1.9.3/Regexp.html#method-c-union)可用于将字符串数组（或正则表达式）编译为单个正则表达式，因此只需要一次搜索和替换。

```
Regexp.union ['string', /regexp?/i] #=> /string|(?i-mx:regexp?)/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T04:19:41.197

最简单（但不是最有效）：

```
# Non-mutating
cleaned = str
remove.each{ |s| cleaned = cleaned.gsub(s,'') }

# Mutating
remove.each{ |s| str.gsub!(s,'') } 
```

更有效（但不太清楚）：

```
# Non-mutating
cleaned = str.gsub(Regexp.union(remove), '')

# Mutating
str.gsub!(Regexp.union(remove), '') 
```

# php - 使用数组中的多个标记初始化谷歌地图

> ID：11571383
> 
> 赞同：3
> 
> 时间：2012-07-20T00:47:27.617
> 
> 标签：php, javascript, google-maps-api-3, google-maps-markers

我将 2 个数组传递给谷歌地图，一个用于位置（已进行地理编码），另一个用于该位置的信息窗口。

有什么方法可以初始化地图并一次绘制所有这些点，还是必须创建第二个函数来绘制更多点？由于有多个点，除了绘制一个点，然后制作一个循环遍历数组并绘制其余部分的加法函数之外，我不知道该怎么做。

这是代码。

这两个数组（我没有包含代码）是`$cityArray`和`$title`

```
function initialize() {
        geocoder = new google.maps.Geocoder();
        latlang = geocoder.geocode( { 'address': 
                                    '<?php echo json_encode($cityArray); ?>'}, 
                                       function(results, status) { 
        //use latlang to enter city instead of coordinates 
        if (status == google.maps.GeocoderStatus.OK) {
            map.setCenter(results[0].geometry.location);
            marker = new google.maps.Marker({
                map: map,
                position: results[0].geometry.location
            });
               google.maps.event.addListener(marker, 'click', 
                                             (function(marker, i) {
                return function() {
                    infowindow.setContent(
                        '<?php echo json_encode($title); ?>'
                    );
                    infowindow.open(map, marker);
                }
            })(marker, i));
            markersArray.push(marker);
        }
        else{
            alert("Geocode was not successful for the following reason: " 
                  + status);
        }
    });
    var myOptions = {
        center: latlang, zoom: 4, mapTypeId: google.maps.MapTypeId.SATELLITE,
        navigationControlOptions: {
            style: google.maps.NavigationControlStyle.SMALL
        }
    };

    var gm = google.maps;
    map = new google.maps.Map(document.getElementById("main_Content"), 
                              myOptions);
    plotMarkers();

} //end of initialization function

var infowindow = new google.maps.InfoWindow(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:50:52.970

请参考我用于上述内容的以下示例。，

第 1 步：在页面标题中包含三个脚本文件。例如

```
(i). <scrip type="text/javascript" src="http://maps.google.com/maps?file=api&v=2&key=Your_API_KEY"></script>
(ii).<scrip type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
(iii).<scrip type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.2/jquery-ui.min.js"></script> 
```

Step2：页面上的脚本

```
<script type="text/javascript">

//initialize the map window

jQuery(document).ready(function () {
    load();
});

jQuery(window).unload(function () {
    GUnload();
});

    var map;
    var geocoder;
    var directionDisplay;
    var directionsService = new google.maps.DirectionsService();

    function load() {
        if (GBrowserIsCompatible()) {
            geocoder = new GClientGeocoder();
            map = new GMap2(document.getElementById('map'));
            map.addControl(new GSmallMapControl());
            map.addControl(new GMapTypeControl());
            //map.setCenter(new GLatLng(35.048629,-0.820663), 4);
            searchLocations();
            document.getElementById('directions-panel').innerHTML = '';
            var url_new = ''+ benObj.TEMPLATE_DIR +'/print.html';
            var print_icon_url_new = '<a href="javascript:void(0);" class="print" onClick="window.open(\'' + url_new + '\');">Print</a><a href="#" class="link">Link</a>';
            jQuery('#print_icon').html(print_icon_url_new);
        }
    }

//Search Locations with address input

 function searchLocations() {

        var address = document.getElementById('addressInput').value;
        // alert(address);
        var address_new = jQuery("#addressInput_new").val();
        if (address_new != "Enter City or Zip") {
            jQuery("#loc1").html(address_new);
        }
        geocoder.getLatLng(address, function (latlng) {
            //alert(latlng);
            if (!latlng) {
                alert(address + ' not found');
            } else {
                searchLocationsNear(latlng);
            }
        });

    }

// Search Near By Location to place the Markers and Information windows

function searchLocationsNear(center) {
        var radius = document.getElementById('radiusSelect').value;
        var searchUrl = ''+ benObj.BASE_ROOT +'/mapmarker?lat=' + center.lat() + '&lng=' + center.lng() + '&radius=' + radius + '&format=raw';

        jQuery.get(searchUrl, function (data) {

            var xml = GXml.parse(data);

            var markers = xml.documentElement.getElementsByTagName('marker');
            map.clearOverlays();

            var sidebar = document.getElementById('sidebar');
            var sidebar_val = '';
            //sidebar.innerHTML = 'Results Found';
            jQuery("#sidebar").html(sidebar_val);

            <!--jQuery("#loc_count").html(markers.length);-->

            if (markers.length == 0) {
                sidebar.innerHTML = 'No results found.';
                map.setCenter(new GLatLng(35.048629, -0.820663), 4);
                return;
            }

            var bounds = new GLatLngBounds();
            for (var i = 0; i < markers.length; i++) {
                var name = markers[i].getAttribute('name');
                var address = markers[i].getAttribute('address');
                var phone_new = markers[i].getAttribute('phonenumber');
                var distance = parseFloat(markers[i].getAttribute('distance'));
                var point = new GLatLng(parseFloat(markers[i].getAttribute('lat')), parseFloat(markers[i].getAttribute('lng')));
                var markerchar = "b";
                var marker = createMarker(point, name, address, phone_new);
                map.addOverlay(marker);
                // var location_count = jQuery('#loc_count').val();
                jQuery('#loc_count').val(i + 1);

                var sidebarEntry = createSidebarEntry(marker, name, address, distance, phone_new);

                jQuery('#sidebar').append(sidebarEntry);

                //sidebar.appendChild(sidebarEntry);

                //  ScrollPane.getContentPane().appendChild(sidebarEntry);
                bounds.extend(point);

            }
            map.setCenter(bounds.getCenter(), map.getBoundsZoomLevel(bounds));
            jQuery('#sidebar').jScrollPane();
            //jQuery('#sidebar').reinitialise();

        });

    }

//To Create a Marker With Information Window

 function createMarker(point, name, address, phone_new) {

        var pinkIcon = new GIcon(G_DEFAULT_ICON);
        pinkIcon.image = ""+ benObj.IMAGE_DIR +"addr-pin-1.png";
        var markerOptions = {
            icon: pinkIcon
        };

        var marker = new GMarker(point, markerOptions);
        var event_calendar = "event_calendar";
        var event_title = ""+ benObj.event_title +"";
        var display = "block";
        var e_dt_start = jQuery("#dtstart").val();
        var e_dt_end = jQuery("#dtend").val();
        var e_start_timestamp = (formatTimestring(e_dt_start));
        var e_end_timestamp = (formatTimestring(e_dt_end));
        var e_desc = jQuery("#edesc").val();
        var StrippedString = e_desc.replace(/(<([^>]+)>)/ig, "");
        var trimmed = StrippedString.replace(/^\s+|\s+$/g, '');
        var html = '<b>' + name + '</b> <br/>' + address + '<br>contact: ' + phone_new + '<br><br><a href="javascript:void(0);" style="text-decoration:none;" onclick="addtocalender();" class="addtocal" id="add_to_cal">Add to Calendar<div class="summary" style="display:none;">' + event_title + ' - "' + name + '"</div><span class="dtstart date" title="' + e_dt_start + '" style="display:none;">8th Aug 2010</span><span class="dtend date" title="' + e_dt_end + '" style="display:none;">01:30am - 12:00pm</span><div class="event-desc" style="display:none;">' + trimmed + '</div><div class="event-locate" style="display:none;">' + name + ',' + address + '</div></a>&nbsp;|&nbsp;<a href="javascript:void(0);" style="text-decoration:none;">Remind Me</a><br><br>Get Direction From:<br><input type="hidden" id="start" value="' + address + '"><input type="text" id="end" value="" style="border: 1px solid #ECE6D5;">&nbsp;<input type="button" value="GO" onclick="calcRoute();" style="border: 1px solid #ECE6D5;padding-left:5px;">';
        GEvent.addListener(marker, 'click', function () {
            marker.openInfoWindowHtml(html);

            //jQuery(this).addtocal();
        });
        return marker;
    }

// To Make Sidebar Entry If need

 function createSidebarEntry(marker, name, address, distance, phone_new) {
        var div = document.createElement('div');
        var html = '<div class="locrow clearfix"><div class="left" style="width:240px;"><span class="count" id="loc_count">' + jQuery("#loc_count").val() + '</span><address><strong>' + name + '</strong>' + address + '</address><span class="mapdate"><span class="icon date"></span>'+ benObj.event_start_month_date +' &ndash; '+ benObj.event_end_month_date_year +'</span></div><div class="right" style="width:154px;"><ul><li><span class="icon phone"></span>' + phone_new + '</li><li><span class="icon time"></span>11 am &ndash; 7 pm</li><li><span class="icon car"></span>distance ' + distance.toFixed(1) + ' mi</li></ul></div></div>';

        div.innerHTML = html;
        div.style.cursor = 'pointer';
        div.style.marginBottom = '5px';
        GEvent.addDomListener(div, 'click', function () {
            GEvent.trigger(marker, 'click');
        });
        GEvent.addDomListener(div, 'mouseover', function () {
            div.style.backgroundColor = '#eee';
        });
        GEvent.addDomListener(div, 'mouseout', function () {
            div.style.backgroundColor = '#fff';
        });
        return div;
    }

// To make a Directions If need

function calcRoute() {
        directionsDisplay = new google.maps.DirectionsRenderer();
        var start = document.getElementById('start').value;
        var end = document.getElementById('end').value;
        var url = "http://maps.google.co.in/maps?f=d&source=s_d&saddr=" + start + "&daddr=" + end + "&aq=0&vpsrc=0&hl=en&doflg=ptm&mra=ls&ie=UTF8&t=m&z=5&layer=c&pw=2";
        var print_icon_url = '<a href="javascript:void(0);" class="print" onClick="window.open(\'' + url + '\');">Print</a><a href="#" class="link">Link</a>';

        var request = {
            origin: start,
            destination: end,
            travelMode: google.maps.DirectionsTravelMode.DRIVING
        };
        directionsService.route(request, function (response, status) {
            if (status == google.maps.DirectionsStatus.OK) {
                var myOptions = {
                    zoom: 7,
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    center: new google.maps.LatLng(41.850033, -87.6500523)
                };
                map = new google.maps.Map(document.getElementById('map'), myOptions);
                directionsDisplay.setMap(map);
                directionsDisplay.setPanel(document.getElementById('directions-panel'));
                directionsDisplay.setDirections(response);
                jQuery('#print_icon').html(print_icon_url);
            }
        });
    }

</script> 
```

//为标记和信息窗口创建 XML

```
<?php
function mapMarker($center_lat,$center_lng,$radius)
    {
    $mysqli = $this->_getMySqlConnection();
    // Start XML file, create parent node
    $dom        =   new DOMDocument("1.0");
    $node       =   $dom->createElement("markers");
    $parnode    =   $dom->appendChild($node);

    // Search the rows in the markers table
    $query      =   sprintf("SELECT phone,street_address_1, store_name, lat, lng, ( 3959 * acos( cos( radians('%s') ) * cos( radians( lat ) ) * cos( radians( lng ) - radians('%s') ) + sin( radians('%s') ) * sin( radians( lat ) ) ) ) AS distance FROM locations HAVING distance < '%s' ORDER BY distance LIMIT 0 , 10",
    $mysqli->real_escape_string($center_lat),
    $mysqli->real_escape_string($center_lng),
    $mysqli->real_escape_string($center_lat),
    $mysqli->real_escape_string($radius));

    $result = $mysqli->query($query);

    header("Content-type: text/xml");
    header('Access-Control-Allow-Origin: *');

    $avoid_duplicate="";
    // Iterate through the rows, adding XML nodes for each
        while ($row = @$result->fetch_assoc())
        {
            if($avoid_duplicate!=$row['store_name'])
            {
            $node = $dom->createElement("marker");
            $newnode = $parnode->appendChild($node);
            $newnode->setAttribute("name", $row['store_name']);
            $newnode->setAttribute("address", $row['street_address_1']);
            $newnode->setAttribute("lat", $row['lat']);
            $newnode->setAttribute("lng", $row['lng']);
            $newnode->setAttribute("distance", $row['distance']);
            $newnode->setAttribute("phonenumber", $row['phone']);
            $avoid_duplicate=$row['store_name'];
            }
        }

    $outXML=$dom->saveXML();
    $result->close();           
    $mysqli->close();
    return $outXML;
    }
?> 
```

**HTML部分：**

```
<div class="mapleft">
   <div class="ScrollPane scroll-pane" id="sidebar" style="overflow: auto; height: 430px;"></div>
   <div class="mapshadow"></div>
</div>
    <input type="hidden" id="addressInput" value="<?php echo $zip_code;?>" />
    <input type="hidden" id="radiusSelect" value="50" />
    <input type="hidden" id="addressInput_temp" value="<?php echo $zip_code;?>" />
    <input type="hidden" id="radiusSelect_temp" value="50" />
    <input type="hidden" name="X_REQUESTED_WITH" value="XMLHttpRequest" />
<div class="mapright">
<div id="map" style="width: 475px; height: 450px"></div>
</div>
<div class="map-dir" id="directions-panel" style="float:right;width:488px;"></div>
<input type="hidden" id="loc_count" value="1" /> 
```

这些都是会产生伟大成果的东西。

# mongodb - 设置关键字查询

> ID：11571385
> 
> 赞同：1
> 
> 时间：2012-07-20T00:47:52.930
> 
> 标签：mongodb, database

> **可能重复：**
> [NoSQL 数据库中的全文搜索](https://stackoverflow.com/questions/5453872/full-text-search-in-nosql-databases)

我对数据库查询有些陌生，我想知道最好的方法是什么。我有一个文章数据库，并希望我的用户能够通过标题中的关键字来搜索它们，即允许他们键入一个字符串，并且查询将选择包含该字符串的所有标题。

最有效的方法是什么？如果我想避免选择诸如“the”或“it”之类的字符串？

我正在使用 mongoid 以防万一。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T01:29:10.210

如果您的标题存储为字符串，您可以使用 mongodb 支持的正则表达式搜索。例如：

```
db.articles.find( { title : /acme.*corp/i } ); 
```

Mongodb 使用[PCRE](http://www.pcre.org/pcre.txt)进行正则表达式。要从搜索中排除某些单词，我建议进行应用程序端检查，或者您可以使用`$nin`运算符。欲了解更多信息，请查看[此处](http://www.mongodb.org/display/DOCS/Advanced+Queries)。

# ruby-on-rails - 如何从 unicorn Web 服务器堆栈下的站点 URL 中删除 www？

> ID：11571386
> 
> 赞同：1
> 
> 时间：2012-07-20T00:47:52.303
> 
> 标签：ruby-on-rails, nginx, unicorn, engineyard

我有一个使用独角兽网络服务器堆栈托管在engineyard 云上的rails 应用程序。我正在尝试从网站网址中删除 www，但仍然没有运气。我曾经在 .htaccess 中为我的 apache 应用程序提供 RewriteRule，但我不确定 unicorn/nginx。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T05:56:47.323

这会将任何对[http://www.abc.de](http://www.abc.de)的请求重定向到[http://abc.de](http://abc.de)：

```
server {
  server_name www.abc.de;
  rewrite ^/(.*) http://abc.de/$1 permanent;
}

server {
  server_name abc.de;
  # rest of the config goes here
} 
```

你通常把它放在你的虚拟主机配置中`/etc/nginx/sites-available/site_name`；EngineYard 上的等价物似乎是`/etc/nginx/servers/app_name/custom.conf`，但不要引用我的话。

# cookies - 用户代理可以用来将 cookie 绑定到硬件吗？

> ID：11571387
> 
> 赞同：1
> 
> 时间：2012-07-20T00:48:18.937
> 
> 标签：cookies, http-headers, ip-address, user-agent, mac-address

我帮助维护一个销售给大约 100 个客户的网站。我们非常重视安全性，我们有一个多步骤的登录过程。如果您之前已经登录并选择获取 cookie，则可以跳过该过程的一部分。当您再次登录并且仍然拥有该 cookie 时，将跳过该步骤。当然，cookie 中的值是随机的，对于每个用户来说都是不同的。

我的老板想让 cookie 无法复制到另一台计算机。当然，我已经解释过这是不可能的，但他仍然坚持要求用户代理保持不变。

> “然后我们可以证明我们有一个特定于用户硬件和软件的‘强化’cookie。”

当然，我已经解释过，欺骗用户代理比欺骗 cookie 值要容易很多倍，并将其比作在挂锁上贴创可贴。更不用说复制 cookie 的任何机会也可以让您复制用户代理。他不在乎。

需要相同的用户代理并不困扰我，但我有一些完整性，并且在处理一些关于其安全性的谎言出售的东西时遇到了问题。

我是专业人士而不是咕噜声。当我知道会被宣传为支持更高的重量时，我不会设计支撑一个重量的桥。

我讲道理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T22:16:28.467

建议一个[替代方案](http://www.peej.co.uk/articles/no-sessions.html)，因为 cookie[并非旨在](http://www.faqs.org/rfcs/rfc6265.html)提供安全性：

*

> 活跃的网络攻击者可以覆盖来自不安全通道的安全 cookie，从而破坏其完整性

> 传输层加密（例如 HTTPS 中使用的加密）不足以防止网络攻击者获取或更改受害者的 cookie，因为 cookie 协议本身存在各种漏洞。

> 使用 cookie 对用户进行身份验证的服务器可能会遭受安全漏洞，因为一些用户代理允许远程方从用户代理发出 HTTP 请求（例如，通过 HTTP 重定向或 HTML 表单）。在发出这些请求时，即使远程方不知道 cookie 的内容，用户代理也会附加 cookie，这可能会让远程方在粗心的服务器上行使权限。

> Cookie 不为同级域（及其子域）提供完整性保证。例如，考虑 foo.example.com 和 bar.example.com。foo.example.com 服务器可以设置一个域属性为“example.com”的 cookie（可能会覆盖由 bar.example.com 设置的现有“example.com”cookie），并且用户代理会将该 cookie 包含在对 bar.example.com 的 HTTP 请求。在最坏的情况下，bar.example.com 将无法将此 cookie 与它自己设置的 cookie 区分开来。foo.example.com 服务器可能能够利用此功能对 bar.example.com 发起攻击。

> Cookie 依赖于域名系统 (DNS) 的安全性。如果 DNS 部分或全部受到威胁，cookie 协议可能无法提供应用程序所需的安全属性。

**参考**

*   [跨多个域共享会话](https://docs.oracle.com/cd/E24152_01/Platform.10-1/ATGPlatformProgGuide/html/s0906sharingasessionacrossmultipledom01.html)

*   [RFC 7258：普遍监控是一种攻击](https://www.rfc-editor.org/rfc/rfc7258)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-14T13:35:41.803

具有涉及服务器端“秘密”的签名并使用用户代理作为盐的一部分的 cookie 比没有用户代理作为盐的一部分的 cookie 更难欺骗。这是无可争辩的。首先，弄清楚盐是如何产生的需要时间——很多“攻击者”会立即被劝阻。

*是的，但它并不更安全......*

你的老板有一个目标；能够告诉他的客户 cookie 已“硬化”。你不应该假设你的老板不理解其中的含义。

事实上; 它不会在任何一个方向上影响您的应用程序的安全性。然而，这将导致 cookie从一台机器移动到另一台机器*稍微*困难一些，并且如果客户端更新他的浏览器或 flash 版本或以其他方式更改他的用户代理，它将使 cookie 停止工作。

结论：

如果其他一切都相同，我认为 cookie 中的用户代理盐比没有用户代理盐好一点点。我想你可以比你花在问这个问题上的时间更快地实现这个东西。

# php - 双表单刷新

> ID：11571388
> 
> 赞同：2
> 
> 时间：2012-07-20T00:48:31.853
> 
> 标签：php, javascript, html

我是 PHP 和 Javascript 的新手，刚开始创建一个有两种形式的网站，一种有 5 个复选框，另一种有 5 个单选按钮。当您更改选择的单选按钮时，它会刷新页面并使用新值。复选框也是如此。不幸的是，如果您更改其中一个表单，然后更改另一个表单，则第一个表单的值将不再存在。

这是代码：

```
<form name='form2' method='post'>
           <input type="radio" name="group1" value="all" onClick="if (this.checked) this.form.submit();" <?php if ($_REQUEST['group1'] == null || $_REQUEST['group1'] == "all"){ echo "checked='checked'";}?>/> All<br>
           <input type="radio" name="group1" value="Example" onClick="if (this.checked) this.form.submit();" <?php if ($_REQUEST['group1'] == "Example"){ echo "checked='checked'";}?>/> Example<br>
           <input type="radio" name="group1" value="clifton" onClick="if (this.checked) this.form.submit();" <?php if ($_REQUEST['group1'] == "clifton"){ echo "checked='checked'";}?>/> Clifton<br/>
           <input type="radio" name="group1" value="fruita" onClick="if (this.checked) this.form.submit();" <?php if ($_REQUEST['group1'] == "fruita"){ echo "checked='checked'";}?>/> Fruita<br/>
           <input type="radio" name="group1" value="loma" onClick="if (this.checked) this.form.submit();" <?php if ($_REQUEST['group1'] == "loma"){ echo "checked='checked'";}?>/> Loma<br/>
       </form>

       <form name='form3' method='post'>
           <input type="checkbox" name="option1" value="smoking" onClick="if (this.checked) this.form.submit();" <?php if(isset($_REQUEST['option1'])){ echo "checked='checked'";} ?>/> No Smoking<br>
           <input type="checkbox" name="option2" value="kids" onClick="if (this.checked) this.form.submit();" <?php if(isset($_REQUEST['option2'])){ echo "checked='checked'";} ?>/>Good for Kids<br>
           <input type="checkbox" name="option3" value="wheelchair" onClick="if (this.checked) this.form.submit();" <?php if(isset($_REQUEST['option3'])){ echo "checked='checked'";} ?>/>Wheelchair Accessible<br>
           <input type="checkbox" name="option4" value="alcohol" onClick="if (this.checked) this.form.submit();" <?php if(isset($_REQUEST['option4'])){ echo "checked='checked'";} ?>/>Serves Alcohol<br>
           <input type="checkbox" name="option5" value="delivery" onClick="if (this.checked) this.form.submit();" <?php if(isset($_REQUEST['option5'])){ echo "checked='checked'";} ?>/>Delivery Servicee<br>  
       </form> 
```

我试图让两个表单输入都被保留，即使另一个表单发生变化。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T00:55:51.550

更好的解决方案是使用 AJAX。但是您也可以将隐藏的输入字段添加到与相反表单中的值相对应的两个表单中：

```
<form name='form2' method='post'>
       <input type="radio" name="group1" value="all" onClick="if (this.checked) this.form.submit();" <?php if ($_REQUEST['group1'] == null || $_REQUEST['group1'] == "all"){ echo "checked='checked'";}?>/> All<br>
       <input type="radio" name="group1" value="Example" onClick="if (this.checked) this.form.submit();" <?php if ($_REQUEST['group1'] == "Example"){ echo "checked='checked'";}?>/> Example<br>
       <input type="radio" name="group1" value="clifton" onClick="if (this.checked) this.form.submit();" <?php if ($_REQUEST['group1'] == "clifton"){ echo "checked='checked'";}?>/> Clifton<br/>
       <input type="radio" name="group1" value="fruita" onClick="if (this.checked) this.form.submit();" <?php if ($_REQUEST['group1'] == "fruita"){ echo "checked='checked'";}?>/> Fruita<br/>
       <input type="radio" name="group1" value="loma" onClick="if (this.checked) this.form.submit();" <?php if ($_REQUEST['group1'] == "loma"){ echo "checked='checked'";}?>/> Loma<br/>
    <?php foreach( range( 1, 5) as $i): ?>
        <?php if(isset($_REQUEST['option' . $i])): ?>
            <input type="hidden" name="option<?php echo $i; ?>" value="1" />
        <?php endif; ?>
    <?php endforeach; ?>
</form>

<form name='form3' method='post'>
       <input type="checkbox" name="option1" value="smoking" onClick="if (this.checked) this.form.submit();" <?php if(isset($_REQUEST['option1'])){ echo "checked='checked'";} ?>/> No Smoking<br>
       <input type="checkbox" name="option2" value="kids" onClick="if (this.checked) this.form.submit();" <?php if(isset($_REQUEST['option2'])){ echo "checked='checked'";} ?>/>Good for Kids<br>
       <input type="checkbox" name="option3" value="wheelchair" onClick="if (this.checked) this.form.submit();" <?php if(isset($_REQUEST['option3'])){ echo "checked='checked'";} ?>/>Wheelchair Accessible<br>
       <input type="checkbox" name="option4" value="alcohol" onClick="if (this.checked) this.form.submit();" <?php if(isset($_REQUEST['option4'])){ echo "checked='checked'";} ?>/>Serves Alcohol<br>
       <input type="checkbox" name="option5" value="delivery" onClick="if (this.checked) this.form.submit();" <?php if(isset($_REQUEST['option5'])){ echo "checked='checked'";} ?>/>Delivery Servicee<br>  
       <input type="hidden" name="group1" value="<?php echo (isset($_REQUEST['group1']) ? $_REQUEST['group1'] : 'all'); ?>" />
</form> 
```

**编辑：** [这是一个演示](http://codepad.viper-7.com/lNVp2P)它的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T00:55:18.353

您必须在一个表单元素中加入此输入，表单元素仅提交其输入字段的信息，并且不能发送其他表单元素的数据，除非您阻止默认表单提交操作并通过 ajax 进行自己的调用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T00:57:06.980

所以，你在这里遗漏了所有的服务器端代码，但我可以解释基本问题，希望这能让你解决它。

您有两个表格，表格 2 和表格 3。当你提交form2时，它不会提交form3的数据，反之亦然。因此，当您的服务器发回新页面（您在提交后看到的页面）时，它不会反映来自其他表单的数据。

您需要做的是同时发送两个表单中的数据。最简单的方法是只使用一个表单，但如果你想获得幻想，你可以通过 JS 组合它们的值，甚至通过 AJAX 提交它们。

# html - 元素名称 HTML 的灵感/约定

> ID：11571394
> 
> 赞同：2
> 
> 时间：2012-07-20T00:49:42.163
> 
> 标签：html, css, templating

我从事前端标记工作，所以我经常对网站进行模板化。有没有人知道好的资源来学习一些好的约定或元素名称的灵感？我喜欢与打印布局相关的名称，所以也许有人可以向我指出一个资源来命名文档/布局的不同部分。

我有点厌倦`block, wrapper, content, header`了一遍又一遍地使用诸如 etc 之类的通用名称。诸如此类的东西`colophon, masthead, hero`似乎更有意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T01:13:21.780

**一点灵感**

我记得当我在寻找同样的东西时发现了[这个。](http://www.stuffandnonsense.co.uk/archives/naming_conventions_table.html)这是一些最著名的 css 人员使用的名称的集合。它来自[安迪克拉克](http://www.stuffandnonsense.co.uk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T01:12:38.487

在这里，您按照评论中的要求进行...

[http://meiert.com/en/blog/20080812/best-practice-ids-and-classes/](http://meiert.com/en/blog/20080812/best-practice-ids-and-classes/)

通过在 Google 中输入“最佳实践 html 类名”在 10 秒内得到了这个。

就个人而言，我将我的元素命名为它们相关内容的缩写 - 包含提交按钮的 div，我将其命名为“smtbtn”。简短，甜美和语音几乎可以说明它是什么。

# controller - apex:commandButton 里面 apex:panelBar

> ID：11571399
> 
> 赞同：1
> 
> 时间：2012-07-20T00:50:19.387
> 
> 标签：controller, action, salesforce, apex-code, visualforce

我有一个在 panelBar 中显示的项目列表，每个项目都有一个在控制器上调用操作的命令按钮，问题是操作方法永远不会被调用！帮助？

这是代码：

```
<apex:panelBar id="eventBarSeller" switchType="client" items="{!relatedEventsSeller}" var="event" rendered="true">
    <apex:panelbarItem label="{!event.SUBJECT__c}">
        <apex:outputText escape="false" value="{!event.BODY__c}" />
        <br/>
        <br/>
        <apex:commandButton value="View details" action="{!showPopup}" rerender="popup" immediate="true" rendered="true"/>
    </apex:panelBarItem>
</apex:panelbar> 
```

和弹出输出面板：

```
<apex:outputPanel id="popup">
       <apex:outputPanel styleClass="popupBackground" layout="block" rendered="{!displayPopup}"/>
            <apex:outputPanel styleClass="custPopup" layout="block" rendered="{!displayPopup}">
                This is where I would put whatever information I needed to show to my end user.<br/><br/><br/>
                <apex:commandButton value="Hide Pop up" action="{!closePopup}" rerender="popup"/>
       </apex:outputPanel>
</apex:outputPanel> 
```

在控制器中，我有以下内容：

```
public boolean displayPopup {get; set;}     

public void closePopup() {
    System.Debug(LoggingLevel.INFO, 'Close Popup...');
    displayPopup = false;    
}

public void showPopup() {
    System.Debug(LoggingLevel.INFO, 'Show Popup...');
    displayPopup = true;
} 
```

函数 showPopup 从未被调用，因为我签入了日志，会发生什么？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T05:19:09.980

不确定，但您可以尝试将您的 switchtype 从客户端更改为服务器或 ajax：

```
<apex:panelBar id="eventBarSeller" switchType="server/ajax" items="{!relatedEventsSeller}" var="event" rendered="true"> 
```

服务器和 ajax switchTypes 可能比客户端慢一点，但它应该可靠地处理服务器端操作方法。rerender 属性受此影响。来自 VF 开发人员指南：

![在此处输入图像描述](../Images/62d5fab4df9c0cb88cbb233d6020cb4a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:44:52.623

试试这个（对我有用）：

页：

```
<apex:form>

    <apex:panelBar>
        <apex:panelbarItem>
            <apex:commandButton value="View details" action="{!showPopup}" reRender="myPopup"/>
        </apex:panelBarItem>
    </apex:panelbar>

    <apex:outputPanel id="myPopup">
           <apex:outputPanel styleClass="popupBackground" layout="block" rendered="{!displayPopup}">
                    Your Information Here
           </apex:outputPanel>
    </apex:outputPanel>

</apex:form> 
```

控制器：

```
public Boolean displayPopup { get; set; }

public PageReference showPopup() {
    System.Debug(LoggingLevel.INFO, 'Show Popup...');
    displayPopup = true;
    return null;
} 
```

# git - git undo push merge 恢复单独的分支

> ID：11571401
> 
> 赞同：2
> 
> 时间：2012-07-20T00:50:51.977
> 
> 标签：git, merge, branch

首先，我必须道歉 - 关于 SO 有很多“如何撤消合并”问题，但我对 git 太陌生了，我真的不明白如何根据我的情况调整解决方案（尽管我相信他们可以）。

我有两个分支，`versionA`并且`versionB`. 我做了一些更改`versionA`并将它们合并到`versionB`中，这很好，因为所做的更改`versionA`是向前兼容的。然后，我想我一定是不小心合并*回*`versionB`了`versionA`，这不好，因为`versionB`不向后兼容.*`versionA`*

 *我该如何撤消此操作？

为了让事情更清楚，这就是我所做的：

```
versionA C--C--C--C'--M2
          \          /
           \        /
versionB C--M--C--C*

M: merged versionA into versionB. this is fine.
M2: accidentally merged versionB back into versionA 
```

这就是我要的：

```
versionA C--C--C--C'
          \         
           \       
versionB C--M--C--C* 
```

如果我在 Mercurial 上，我会这样做`hg rollback`，一切都会好起来的，或者我会`hg update C'`在那里为`versionA`分支做出未来的提交，尽管这会留下`M2`一个死气沉沉的头（因此我更喜欢这种`rollback`方法）。

`M2`从`versionA`分支中清除最后一次提交的 git 方法是什么？（所有更改都已推送）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T01:04:08.417

You need to find the commit of the merge.

To find the merge commit try: `git log versionA ^versionB --ancestry-path --merges`

The needed commit is the very last commit.

git revert -m 1 commit_hash

But please read up on Linus' write up: [http://www.kernel.org/pub/software/scm/git/docs/howto/revert-a-faulty-merge.txt](http://www.kernel.org/pub/software/scm/git/docs/howto/revert-a-faulty-merge.txt)

Also see: [Which commit hash to undo a pushed merge using git-revert?](https://stackoverflow.com/questions/11563346/to-undo-a-pushed-merge-using-git-revert-how-can-i-identify-the-right-commit-has)*

# python - 在 Python 中，如何将字符串通过管道传输到可执行文件标准输入中？

> ID：11571404
> 
> 赞同：1
> 
> 时间：2012-07-20T00:52:09.807
> 
> 标签：python, windows, subprocess, pipe

在 Windows 上，我有一个从标准输入读取的程序 (prog.exe)。在 python 中，我想通过管道将字符串作为其标准输入的输入。怎么做？

就像是：

```
subprocess.check_output("echo {0} | myprog.exe".format(mystring)) 
```

或（使 args 成为列表）

```
subprocess.check_output("echo {0} | myprog.exe".format(mystring).split()) 
```

似乎不起作用。它给了我：

```
WindowsError: [Error 2] The system cannot find the file specified 
```

我还尝试将“stdin”关键字 arg 与 StringIO （这是一个类似文件的对象）一起使用

```
subprocess.check_output(["myprog.exe"], stdin=StringIO(mystring)) 
```

仍然没有运气 - check_output 不适用于 StringIO。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T00:58:20.253

您应该使用 Popen`communicate`方法（[docs](http://docs.python.org/library/subprocess.html#subprocess.Popen.communicate)）。

```
proc = subprocess.Popen(["myprog.exe"], stdin=subprocess.PIPE)
stdout, stderr = proc.communicate('my input') 
```

# android - GSON：期望一个字符串，但是是 BEGIN_OBJECT？

> ID：11571412
> 
> 赞同：20
> 
> 时间：2012-07-20T00:52:56.700
> 
> 标签：android, json, gson

我正在尝试使用 GSON 来解析一些非常简单的 JSON。这是我的代码：

```
 Gson gson = new Gson();

    InputStreamReader reader = new InputStreamReader(getJsonData(url));
    String key = gson.fromJson(reader, String.class); 
```

这是从 url 返回的 JSON：

```
{
  "access_token": "abcdefgh"
} 
```

我得到了这个例外：

```
E/AndroidRuntime(19447): com.google.gson.JsonSyntaxException:     java.lang.IllegalStateException: Expected a string but was BEGIN_OBJECT at line 1 column 2 
```

有任何想法吗？我是 GSON 的新手。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-20T01:25:40.893

JSON 结构是一个包含一个名为“access_token”的元素的对象——它不仅仅是一个简单的字符串。可以将其反序列化为匹配的 Java 数据结构，例如 Map，如下所示。

```
import java.util.Map;

import com.google.gson.Gson;
import com.google.gson.reflect.TypeToken;

public class GsonFoo
{
  public static void main(String[] args)
  {
    String jsonInput = "{\"access_token\": \"abcdefgh\"}";

    Map<String, String> map = new Gson().fromJson(jsonInput, new TypeToken<Map<String, String>>() {}.getType());
    String key = map.get("access_token");
    System.out.println(key);
  }
} 
```

另一种常见的方法是使用与 JSON 匹配的更具体的 Java 数据结构。例如：

```
import com.google.gson.Gson;
import com.google.gson.annotations.SerializedName;

public class GsonFoo
{
  public static void main(String[] args)
  {
    String jsonInput = "{\"access_token\": \"abcdefgh\"}";

    Response response = new Gson().fromJson(jsonInput, Response.class);
    System.out.println(response.key);
  }
}

class Response
{
  @SerializedName("access_token")
  String key;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-13T22:40:32.820

使用 Gson JsonParser 的另一种“低级”可能性：

```
package stackoverflow.questions.q11571412;

import com.google.gson.*;

public class GsonFooWithParser
{
  public static void main(String[] args)
  {
    String jsonInput = "{\"access_token\": \"abcdefgh\"}";

    JsonElement je = new JsonParser().parse(jsonInput);

    String value = je.getAsJsonObject().get("access_token").getAsString();
    System.out.println(value);
  }
} 
```

如果有一天您要编写自定义反序列化器，JsonElement 将是您最好的朋友。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-07T19:00:05.957

**这是 Pojo 键数据类型与 json 响应不同时发生的正常解析异常**

这是由于 Pojo 类中的数据类型不匹配，实际上是网络 api 响应中的数据

例如

```
data class ProcessResponse(
        val outputParameters: String,
        val pId: Int 
    ) 
```

由于 api 给出了相同的错误响应

```
 {
        "pId": 1",
        "outputParameters": {
          "": ""
        }
    } 
```

这里 POJO 是 outputParameters 是 String 但根据 api 响应它的 json

# ios5 - 选择时未突出显示 UITabBar 的项目

> ID：11571415
> 
> 赞同：0
> 
> 时间：2012-07-20T00:53:28.250
> 
> 标签：ios5, uitabbar, uitabbaritem

我在以编程方式添加了 UITabBarItem 的 UITabBar 遇到问题，所选项目没有像往常一样以白色突出显示。

这是来源

```
UIImage *imageX = [UIImage imageNamed:@"sample.png"];
UITabBarItem *tabBarItem = [[UITabBarItem alloc]initWithTitle:@"Sample" image:imageX tag:1];    
NSArray *array = [NSArray arrayWithObjects:tabBarItem, nil];
[tabBar setItems:array]; 
```

当我选择项目时，调用了委托的方法 didSelectItem 并执行了操作，但图像没有被栏突出显示......

```
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item { 
```

有谁知道怎么了？我必须调用其他方法来传递突出显示的图像或类似的东西？

标签栏的项目以编程方式添加，但我通过情节提要添加的标签栏。

另外，我做了一个测试，其中标签栏和标签栏项目是通过情节提要添加的，一切正常，包括突出显示的图标在选择时显示

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:51:29.463

`- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item;`我通过在函数中添加代码来解决问题：

```
self.tabBar.selectedItem = item; 
```

我不知道为什么我必须这样做，但它正在工作。

# c# - FormsAuthentication.SetAuthCookie 将数据存储在哪个位置

> ID：11571418
> 
> 赞同：0
> 
> 时间：2012-07-20T00:53:59.437
> 
> 标签：c#, asp.net, .net-4.0

在以下代码中创建的用户帐户（用户名，密码）存储在哪里？

FormsAuthentication.SetAuthCookie(RegisterUser.UserName, false /* createPersistentCookie */);

Sameway，登录时，它是如何工作的？..（即）如何检索值并将其与我们在登录页面中输入的数据（用户名，密码）进行比较..请解释该过程..我怀疑它是否存储在 ASPNETDB.MDF - > aspnet_Membership 中。如果值存储在此处，那么应用程序在从此处检索值以比较我们在表单中键入的数据时如何工作。我的意思是应用程序是 .NET4 中的示例应用程序.0（Visual Studio 2010）..请帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:47:14.683

**更新：** 2012 年 12 月 24 日

以下答案已过时。*古老* 的**[FormsAuthentication.Authenticate](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.authenticate.aspx)**现在在 ASP.NET 4 MVC 4 中被标记为*已过时。*

MVC 4 附带了新的品牌[Spaking WebSecurity](http://msdn.microsoft.com/en-us/library/system.web.security.aspx)身份验证系统，它解决了旧系统的许多问题。请查看它，除非您的项目仍在使用 MVC 3 或更低版本。

* * *

* * *

简短的回答是“它工作得非常仔细。”

长答案...

用户帐户详细信息（默认情况下）存储在 SQL CE 数据库中（在 ASPNETDB.MDF 文件中）

ASP.NET 有一个内置的成员资格和角色提供程序系统来帮助进行身份验证。这是 ASP.NET 用于启用对帐户的内置支持的抽象。默认情况下，当您创建应用程序时，您的 web.config 文件已配置，因此您的应用程序使用此成员资格提供程序的内置实现，以允许您的应用程序执行读取和写入数据库、散列或加密密码的魔法，验证用户等。

您获得的代码示例是表单身份验证的一部分

> FormsAuthentication.SetAuthCookie(RegisterUser.UserName, false /* createPersistentCookie */);

它是默认管理身份验证的组件。当您执行上述调用时，ASP.NET Forms 身份验证系统会加密用户名和会话数据，并将其存储在用户浏览器上的 cookie 中。（当您调用 FormsAutentication.SignOut() 时，此 cookie 将被删除）

对于每个请求，此 cookie 都会传输到您的服务器。因此，对于每个请求，FormsAuthentication 都会检查并验证它（解密它，检查用户是谁，验证会话没有过期，并在应用程序中设置一些属性，以便您的代码可以知道是哪个用户发出请求）。

如果设置了 /* createPersistentCookie */ 参数，则将 cookie 设置为持久性，这意味着当您在登录时关闭并重新打开浏览器时，cookie 不会被删除。这与您登录时相同，例如 Facebook ，并勾选“记住我”复选框，Visual Studio 创建的项目的默认实现在您的登录页面上正是这样做的。

希望现在您对登录过程中发生的事情有了更好的了解。由于这些在 ASP.NET 中实现的方式，如果您愿意，您可以轻松地配置、扩展或用您自己的实现替换这些功能。

为了更好地理解事情是如何工作的，请按照这篇关于如何实现自定义成员资格提供程序的文章[http://msdn.microsoft.com/en-us/library/f1kyba5e.aspx](http://msdn.microsoft.com/en-us/library/f1kyba5e.aspx)

我应该告诉您，如果您是 ASP.NET 的新手，阅读有关成员资格和身份验证如何工作的内容可能会让人不知所措。（我个人在过去的几天里试图理解并编写一个自定义的会员提供程序来满足我的要求。这有点令人沮丧，所以我休息一下来回答你并用基础知识刷新我的想法。）

如果您对现有系统的工作方式感到满意，请使用它。实现自定义提供程序以了解其工作原理并没有什么坏处。但是内置系统在过去十年中经过了大量测试，并被证明是有效的。那么为什么不使用它呢？我在不同的站点上看到了多个自定义实现，它们试图替换现有的会员系统，只是因为他们不完全理解它。这些实现中的大多数最终都会重写已经可用的内容，并且在可扩展性和安全性方面存在不足。就像一个智者曾经说过的“不要修理它，如果它没有坏”。

# iphone - CATransform3DRotate 旋转 360 度

> ID：11571420
> 
> 赞同：6
> 
> 时间：2012-07-20T00:54:20.103
> 
> 标签：iphone, objective-c, calayer, catransform3d, quartz-core

我最近开始使用 CATransform3D，它看起来很不错。不过，我对轮换只有 1 个问题。我正在尝试将我的视图向右旋转 360˚，但如果我只是将 360 度传递给 CATransform3DRotate 它不起作用（它根本不会移动。）

这是我的代码：

```
 CALayer *layer = dock.layer;
      CATransform3D r = CATransform3DIdentity;
      r.m34 = 1.0 / -500;
      r = CATransform3DRotate(r, DegreesToRadians(360.0f), 100.0f, 1.0f, 100.0f);   
      layer.transform = r; 
```

有谁知道如何解决这个问题？提前致谢！:)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-20T02:58:49.087

`transform.rotation`您可以通过为图层的关键路径设置动画，通过围绕其 Z 轴的一个（或多个）完整旋转来为图层设置动画，如下所示：

```
CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
animation.duration = .25;
animation.fromValue = [NSNumber numberWithFloat:0];
animation.toValue = [NSNumber numberWithFloat:2 * M_PI];
[layer addAnimation:animation forKey:animation.keyPath]; 
```

`transform.rotation.x`您可以使用关键路径和围绕 X 或 Y 轴制作动画`transform.rotation.y`。（`transform.rotation.z`关键路径与关键路径具有相同的效果`transform.rotation`。）您可以同时在不同的轴上应用多个旋转。

另一种方法是使用关键帧动画，如果您想围绕离轴矢量旋转可能效果更好，如下所示：

```
CALayer *layer = [sender layer];
CATransform3D transform = CATransform3DIdentity;
transform.m34 = 1.0 / -50;
layer.transform = transform;

CAKeyframeAnimation *animation = [CAKeyframeAnimation animationWithKeyPath:@"transform"];
animation.values = [NSArray arrayWithObjects:
    [NSValue valueWithCATransform3D:CATransform3DRotate(transform, 0 * M_PI / 2, 100, 1, 100)],
    [NSValue valueWithCATransform3D:CATransform3DRotate(transform, 1 * M_PI / 2, 100, 1, 100)],
    [NSValue valueWithCATransform3D:CATransform3DRotate(transform, 2 * M_PI / 2, 100, 1, 100)],
    [NSValue valueWithCATransform3D:CATransform3DRotate(transform, 3 * M_PI / 2, 100, 1, 100)],
    [NSValue valueWithCATransform3D:CATransform3DRotate(transform, 4 * M_PI / 2, 100, 1, 100)],
    nil];
animation.duration = 2;
[layer addAnimation:animation forKey:animation.keyPath]; 
```

# android - 显示位图作为背景

> ID：11571421
> 
> 赞同：0
> 
> 时间：2012-07-20T00:54:27.440
> 
> 标签：android, bitmap

我有一张想用作背景的图像，但我首先需要将其缩小以防止`OutOfMemoryExceptions`

```
BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeResource(getResources(), R.drawable.home_bkgrnd, options);
    int imageHeight = options.outHeight;
    int imageWidth = options.outWidth;
    String imageType = options.outMimeType;
    int sampleSize =1;

    Display display = getWindowManager().getDefaultDisplay(); 
    int width = display.getWidth();
    int height = display.getHeight();
    if(imageWidth > imageHeight){
        sampleSize = Math.round((float)imageHeight/(float)height);
    }else{
        sampleSize = Math.round((float)imageWidth/(float)width);
    }
    options.inJustDecodeBounds = false;
    Bitmap bm = BitmapFactory.decodeResource(getResources(), R.drawable.home_bkgrnd, options);

rl.setBackgroundDrawable(bm); 
```

但是，由于它不将位图作为参数，如何将布局的背景设置为该缩放位图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T02:05:16.693

使位图可绘制并将其设置为背景。

```
 rl.setBackgroundDrawable(new BitmapDrawable(bm)); 
```

# php - Mysql_Query 中的 PHP 分页

> ID：11571426
> 
> 赞同：1
> 
> 时间：2012-07-20T00:55:02.957
> 
> 标签：php, mysql, paging

所以基本上，这就是我的分页查询目前的样子：

```
 $limit = mysql_escape_string($_GET['pagenumber']);
    if (empty($limit)){
    $limit = "1";
    }

    $page = $limit * 10;
    $flim1 = $page / 10;
    $flim = $page - 10; 
```

在我的查询结束时，我有这个：

```
 ... LIMIT $flim, $page 
```

如果页码是 1 和 10, 20 如果页码是 2 应该是 1, 10。它在第一页上完美地工作，但是当我到达第二页时，有 20 个结果，虽然当我回显 $flim和 $page，它们是 10 和 20。我不明白为什么！

我听说过一些用于分页的双重查询。如果您知道一种类似于此的简单方法，请发布链接。我的方法会奏效吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T00:58:40.297

请参阅有规范`LIMIT`所以`LIMIT offset,count` 在你的情况下`LIMIT $flim,10`

完整代码：

```
$page = mysql_escape_string($_GET['pagenumber']);
if (empty($limit)){
$page = "1";
}
$items_per_page=10;
$offset = ($page-1)*$_items_per_page; 
```

然后`LIMIT $offset,$items_per_page`

此外，您需要对所有项目进行计数才能不超过最大页面

# javascript - if else 语句未按预期工作

> ID：11571430
> 
> 赞同：0
> 
> 时间：2012-07-20T00:55:42.357
> 
> 标签：javascript, jquery, conditional-statements, if-statement

希望对这里的新手有任何帮助。我有一个简单的 if/else if 语句，由于某种原因，即使满足第三个条件，它也只能达到第二个条件。我已经尝试在末尾添加其他内容，几乎尝试了所有内容，但仍然没有。我知道它不起作用，因为我添加了警报触发器，无论如何它永远不会达到第三个条件。我在这里想念什么？我环顾四周，所以如果我在这里打败一匹死马，我很抱歉，但我找不到解决方案。我应该注意，我正在尝试获取更改选择下拉框的条件。谢谢！！！

我的代码：

```
$('#table_two select:eq(6)').change(function(e){

var allDiv = $('#table_two,#table_three,#table_four');
var parBoxOne = $('#par_one').val();

var totalOne = 1 - parBoxOne;
var totalTwo = 2 - parBoxOne;

if ($(this).val() == "made_shot"){
$(allDiv).hide();
$('#score_one').val(totalOne);
$('#score_total').val($('.score_input').val());
alert('ACE!!');
}

else if ($(this).val() == 'green', 'trees', 'fairway', 'rough', 'sand' ){
$('#score_one').val(totalOne);
$('#score_total').val($('.score_input').val());
$('#table_two').hide();
$('#butt_two').html('Show stroke');
alert('triggered two');
}

else if ($(this).val() == 'other', 'penalty_water', 'penalty_ob', 'penalty_sand' ){
$('#score_one').val(totalTwo);
$('#score_total').val($('.score_input').val());
$('#table_two').hide();
alert('triggered three');
}

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T01:01:49.830

您不能使用逗号在 if 语句中组合多个条件：

~~`if ($(this).val() == 'green', 'trees', 'fairway', 'rough', 'sand' )`~~

相反，您可以将值列表放入数组并检查您的值是否在数组中：

```
var stuff = ['green', 'trees', 'fairway', 'rough', 'sand'];
if ( $.inArray($(this).val(), stuff ) >= 0 ) 
```

要在 if 中组合多个条件，语法如下（比上面长得多）：

```
if ($(this).val() == 'green' || $(this).val() == 'trees' || ... ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T01:06:54.787

只是另一种方法：

```
switch($(this).val()){
    case 'made_shot':
        $(allDiv).hide();
        $('#score_one').val(totalOne);
        $('#score_total').val($('.score_input').val());
        alert('ACE!!');
        break;

    case 'green':
    case 'trees':
    case 'fairway':
    case 'rough':
    case 'sand':
        $('#score_one').val(totalOne);
        $('#score_total').val($('.score_input').val());
        $('#table_two').hide();
        $('#butt_two').html('Show stroke');
        alert('triggered two');
        break;

    case 'other':
    case 'penalty_water':
    case 'penalty_ob':
    case 'penalty_sand':
        $('#score_one').val(totalTwo);
        $('#score_total').val($('.score_input').val());
        $('#table_two').hide();
        alert('triggered three');
        break;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T01:00:49.500

您不能以这种方式存储字符串，您可以改用`$.inArray()`函数并创建一个值数组：

> **jQuery.inArray( 值, 数组 [, fromIndex] )**

```
 if($.inArray($(this).val(), ['green', 'trees', 'fairway', 'rough', 'sand']) != -1) {

 } 
```

# clojure - 在 Clojure 中存储全局连接的正确方法是什么？

> ID：11571433
> 
> 赞同：7
> 
> 时间：2012-07-20T00:55:58.540
> 
> 标签：clojure

我有以下文件作为从我的 API 端点访问我的数据库的访问点。在服务器的生命周期内维护单个连接（或连接池？）的正确方法是什么？

```
(ns my-api.repository
  (:require [clojure.java.jdbc :as sql]))

(defn some-query
  (sql/with-connection (System/getenv "DATABASE_URL")
    (sql/with-query-results results
      ;; You get the picture
      ))) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T01:00:19.583

`DATABASE_URL`如果您使用`with-connection`宏进行单次连接，则会存储。您可以将[c3p0](http://sourceforge.net/projects/c3p0)库用于连接池：

```
(defn pooled-spec
  "return pooled conn spec.
   Usage:
     (def pooled-db (pooled-spec db-spec))
     (with-connection pooled-db ...)"
  [{:keys [classname subprotocol subname user password] :as other-spec}]
  (let [cpds (doto (ComboPooledDataSource.)
               (.setDriverClass classname)
               (.setJdbcUrl (str "jdbc:" subprotocol ":" subname))
               (.setUser user)
               (.setPassword password))]
    {:datasource cpds})) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T14:39:20.087

我也推荐c3p0。 [Clojure 连接池](http://clojure-doc.org/articles/ecosystem/java_jdbc/connection_pooling.html) 简要介绍了如何`clojure.java.jdbc`使用 c3p0 进行配置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-27T17:41:14.363

[jdbc-pool](https://github.com/ToBeReplaced/jdbc-pool)简化了将 C3P0 与 clojure.java.jdbc 一起使用的过程。我专门（且仅）为此目的创建了该库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-30T03:34:45.337

我不认为 with-connection 保持开放。Doc 或 source 建议它，在 2.3 中，我能够通过在运行查询后检查*db来确认它。*源代码如下所示：

```
(defn with-connection*
  "Evaluates func in the context of a new connection to a database then
  closes the connection."
  [db-spec func]
  (with-open [^java.sql.Connection con (get-connection db-spec)]
    (binding [*db* (assoc *db* :connection con :level 0 :rollback (atom false))]
      (func)))) 
```

连接池在懒惰地创建它们时可能很有用，但这并不能使它们保持打开状态。使连接可设置似乎是必要的。然而，最新的 API 强调只是创建连接并将其传递给每个调用。虽然仍然是 ALPHA，但这看起来像是这个库的未来（并且仍然与连接池兼容）。从图书馆的维基：

```
(require '[clojure.java.jdbc :as j]
     '[clojure.java.jdbc.sql :as s])

(def mysql-db {:subprotocol "mysql"
               :subname "//127.0.0.1:3306/clojure_test"
               :user "clojure_test"
               :password "clojure_test"})

(j/insert! mysql-db :fruit
  {:name "Apple" :appearance "rosy" :cost 24}
  {:name "Orange" :appearance "round" :cost 49}) 
```

# class - 游戏：一般结构和游戏项目结构

> ID：11571434
> 
> 赞同：0
> 
> 时间：2012-07-20T00:56:06.430
> 
> 标签：class, object, format, items

我正在使用 DirectX 在 C++ 中制作一个图形简单的 3D 游戏。我遇到的主要问题是如何有效地构建一些东西。现在我知道我在某些领域的目标，但不知道如何理想地执行它们。

例如，现在我将所有网格和纹理存储在一个资产类中，其中枚举定义指向每个资产。游戏开始时会通过创建 Asset 对象并对其进行初始化来加载所有网格和纹理。从那里我通过分配 Asset 对象给出的指针将网格和纹理加载到对象。这是解决这个问题的最好方法吗？

一个更难的话题是物品。为了争论起见，我要说我们正在处理风景。现在我的风景需要以下内容：

*   一个名字
*   一个网格
*   纹理（可选）
*   标志（例如 Destructible、Flammable 等）
*   状态（如燃烧、锁定、诅咒等）
*   能力（物体实际做的事情，例如在燃烧时受到损坏）

此列表中的前 5 项只是变量。但是能力困扰着我。前 5 个都可以存在于一个项目类中。但我不知道该怎么做是以某种方式将能力附加到对象上。

例如; 我希望对象具有“火焰新星”能力。在每回合开始时，该物体会损坏它附近的任何物体。

对我来说，这意味着每个对象都需要一个“Trigger_Phase_TurnStart()”或一些类似命名的方法，然后需要一个新的“Fire Nova”类，该类具有针对该触发器的独特操作和自己的额外变量（损坏、范围等）。所以现在我有了基础对象类和一个继承自它的新 Fire Nova 类。

但是现在如果我需要一个具有火焰新星和冰霜新星以及减速光环等能力的物体怎么办。基本上我需要一种方法来为对象添加触发效果，而不需要为每个对象创建一个新的对象类。

所以到最后我可以说：

```
(pseudo code of the object's components)
name = Elemental Orb
mesh = "Mesh_Sphere"
textures[] = "Tex_Ice", "Tex_Fire"
flags = OF_Destructible
status = SF_Cursed | SF_Burning
abilities[] = Fire_Nova, Frost_Nova, Slowing_Aura 
```

而这个球体将只是具有所有这些属性的对象类。然后该对象将在适当的回合阶段激活每个存储的能力的触发器，以执行任何动作。

现在我在想我可能需要为每个拥有每个回合阶段或动作触发器（继承自基础能力类）的能力创建一个类，并让它们在对象从它的能力数组中调用它们时执行适当的动作。这是最好的方法吗？

作为一个单独的问题。一些标志需要额外的变量，否则这些变量是不必要的。例如，Destructible 意味着对象将具有健康状况，而没有标志它就不需要它，或者 Openable 项目需要一个内容数组。什么是在需要时分配这些变量的好方法？例如，我不需要每面墙都有健康和空的内容数组。

最后。假设上面列出的所有属性都是项目需要的，您建议我如何最好地存储它们？为了澄清，我希望能够写：

```
CreateItem(ITEM_CHAIR); 
```

并让它返回带有名称、网格、纹理、标志、状态和能力的创建对象。什么结构可能适合实现这样的最终效果？

总结一下：

1.  我当前的资产存储是否可行？
2.  在不创建大量单独的对象类的情况下创建附加到对象类的能力的最佳方法是什么？
3.  当相关标志不存在时，有没有办法限制变量（或至少是内存使用）？
4.  哪种结构或格式最适合存储固定项目定义？

对不起，如果这有点啰嗦。如果您不能回答所有问题，那么仍然会感谢您的回答。问题二可能是我现在最优先考虑的问题。

谢谢你的时间 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T01:16:18.050

我只想回答问题 2，看起来你需要一个装饰器模式。在 OOP 中，当您有许多成分并想要装饰一个对象（例如比萨饼）时，装饰器模式很有用。不幸的是，您需要为每种成分创建一个单独的类，因此我认为您有正确的方法。好处是，使用装饰器模式，您可以使用 abilites 类一遍又一遍地包装对象，最后只调用一个方法来完成所有工作。

# asp.net-mvc - 如何控制 RouteValueDictionary 中类型的序列化？

> ID：11571435
> 
> 赞同：0
> 
> 时间：2012-07-20T00:56:08.417
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing, model-binding

我有使用 RouteValueDictionary 和 UrlHelper 在 ASP.NET MVC3 中构建 Url 的代码。我遇到的问题是 MVC 对字典中的类型调用 ToString() 。对于我正在使用的特定类型，这不是我想要在 Uri 中的值。我无法更改 ToString 实现。

我了解如何创建一个 ModelBinder 来处理来自 Uri 的反序列化，但不了解序列化部分。为了控制如何将类型转换为 Uri 参数，我应该如何注册以及注册什么？

谢谢，埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T05:53:08.777

> 对于我正在使用的特定类型，这不是我想要在 Uri 中的值

然后不要使用这种类型。将您想要的值直接作为字典中的字符串传递：

```
rvd["key"] = "the value you want"; 
```

代替：

```
rvd["key"] = new SomeType { Foo = "foo", Bar = "bar" }; 
```

您的类型与其字符串表示之间的转换应在其他地方处理。

# android - 如何将微调器的值传递给另一个活动并在 ListView 中显示它们？

> ID：11571437
> 
> 赞同：0
> 
> 时间：2012-07-20T00:56:09.857
> 
> 标签：android, listview, spinner

我创建了 2 个项目。一个是输入个人信息，第二个应用程序是 ListView 显示输入信息的地方。我在第一个应用程序中有一个微调器。我不确定如何将微调器的值传递给另一个活动中的列表视图。

以下是第二次申请。

```
package main.page;

import android.app.Activity;
import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.AutoCompleteTextView;
import android.widget.Spinner;
import android.widget.TextView;

public class SavedInfo extends ListActivity
{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.saved_info);

        Bundle b = getIntent().getExtras();

        String name = b.getString("name");
        String date = b.getString("date");
        String type = b.getString("type");
        String likes = b.getString("likes");
        String dislikes = b.getString("dislikes");

        Spinner fullName = (Spinner) findViewById(R.id.fName);
        TextView da = (TextView) findViewById(R.id.date);
        TextView ty = (TextView) findViewById(R.id.type);
        TextView like = (TextView) findViewById(R.id.likes);
        TextView dislike = (TextView) findViewById(R.id.dislikes);

        fullName.setOnItemSelectedListener("Full Name: " + name);
        da.setText("Date: " + date);
        ty.setText("Type: " + type);
        like.setText("Likes: " + likes);
        dislike.setText("Dislikes: " + dislikes);

    }   
} 
```

我不确定我是否正确或错误地设置了微调器。我也不确定如何设置。有谁知道怎么做？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T01:09:32.107

从微调器获取文本并以意图发送

```
String text = fullname.getSelectedItem().toString();
Intent intent = new Intent();
intent.putExtra("spinnerText", text);
intent.setClass(this, /*TODO Class to open*/);
startActivity(intent); 
```

然后在另一个活动的onCreate

```
Intent intent = getIntent();
String text = intent.getStringExtra("spinnerText");
//TODO do what you want with your text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T01:10:15.803

好的。好吧，我假设您的意思是将微调器的值传递给另一个活动。如果您的意思是另一个更复杂的应用程序，并且可能涉及共享远程服务之类的东西。但是对于传递到另一个活动，您只需使用发送蚂蚁意图到该活动

```
 startActivity(intent); 
```

# r - 我的代码不起作用...如何在 R 中的 pdf 输出中制作网格？

> ID：11571439
> 
> 赞同：-8
> 
> 时间：2012-07-20T00:56:37.447
> 
> 标签：r, plot, ggplot2, r-grid

我正在为以下代码挠头。

我正在关注这个例子：

[如何使用 grid.arrange 安排任意数量的 ggplots？](https://stackoverflow.com/questions/6681145/how-can-i-arrange-an-arbitrary-number-of-ggplots-using-grid-arrange)

我想收集地块并将它们布置在 3x9 网格上，每个网格都有合适的标签......

但它不起作用。生成的 pdf 仍然是每页一个图 - 所以生成了 27 页。

我正在尝试使用“grid.arrange”，但是，函数“plotFunctionWrittenByOtherPeople”是由其他人编写的，它不会返回情节的句柄......而且它非常复杂。

如何安排好地块？

有人可以对此有所了解吗？

非常感谢！

* * *

```
pdf("mytry1.pdf", width = 11, height = 8.5)
par(mfrow=c(3, 9))
for (a in seq(100, 900, by=100))
    for (b in c(1, 3, 6))
    {
         plotFunctionWrittenByOtherPeople(a, b)     
    }
dev.off() 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-20T02:14:04.793

我认为您想创建由 ggplot2 创建的一堆图的网格布局。不幸的是，`par(mfrow=)`这是一个不适用于 ggplot2 的基本图形功能。`grid.arrange`在 gridExtra 包中使用。

```
library(ggplot2)
library(gridExtra)

# Completely fake plotting function.
makePlot = function(a, b) {
    dat = data.frame(x=rnorm(a), y=rnorm(a))
    p = ggplot(dat, aes(x=x, y=y)) + 
        geom_point(size=b, alpha=1/b) +
        opts(title=paste("a = ", a, ", b = ", b, sep="")) +
        opts(plot.title=theme_text(size=12))
    return(p)
}

plot_list = list() # Create an empty list to hold plots.

for (b in c(1, 3, 6)) {                   # I switched a and b loops
    for (a in seq(100, 900, by=100)) {    # to make the final layout neater.
        p = makePlot(a, b)
        plot_list = c(plot_list, list(p)) # Add new plot to list.
    }
}

pdf("mytry1.pdf", width = 14, height = 6)
do.call(grid.arrange, c(plot_list, list(nrow=3, ncol=9, main="Grid of Plots")))
dev.off() 
```

![在此处输入图像描述](../Images/ab67ef070e9a2cde4414f66aabb9a6d2.png)

## 编辑：这可以更简洁吗？

`plot_list`可以更紧凑地创建并输出为 pdf 。感谢@baptiste 的建议`mlply`，`ggsave`和`arrangeGrob`。

```
library(plyr)
plot_list = mlply(expand.grid(a=seq(100, 900, by=100), b=c(1, 3, 6)), makePlot)

ggsave(filename="grid_1.pdf", height=6, width=14, 
       plot=do.call(arrangeGrob, c(plot_list, nrow=3, main="Grid of Plots"))) 
```

# ruby-on-rails - 如何从视图中获取路线范围？

> ID：11571440
> 
> 赞同：2
> 
> 时间：2012-07-20T00:56:37.823
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing

我在我的 config/routes.rb 中有这样的设置：

```
 scope "/admin" do
    resources :users
  end 
```

我从 /admin/users 了解到，

```
params[:controller] 
```

将是“用户”

我的问题是，当在“/admin”范围下的控制器中时，是否有类似上面的东西会给我“admin”？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T01:06:44.373

I have never used nested routes, but from my experience, you could do `scope "/:type" do`. You could then get the type with `params[:type]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-08T06:02:02.697

您只需将要添加为范围的参数传递到您的 Rails 路由中。见下面的例子

```
scope "/:admin" do
  resources :users
end 
```

当您调用用户索引路径时，只需传递 admin 参数的值。如下所示：

```
users_path(admin: "Super") 
```

# vb6 - 有没有更好的方法来编写以下 VB6 片段？

> ID：11571441
> 
> 赞同：1
> 
> 时间：2012-07-20T00:56:41.870
> 
> 标签：vb6, styles, short-circuiting, select-case

我在 $COMPANY 工作，我正在帮助维护 $LEGACY_APPLICATION。它是用visual basic 6编写的。

由于缺乏 VB6 在 if 语句中执行短路评估的能力（这将大大简化这一点），我面临着做一个令人不快的复杂嵌套 if 语句。我试过AndAlso，但无济于事。必须是 VB6 之后添加的功能。

SO 某处的一些天才指出，如果你有耐心，你可以欺骗 select case 语句使其像短路 if 语句一样工作，所以我尝试了，这就是我想出的：

```
Select Case (True) ' pretend this is an if-else statement
    Case (item Is Nothing): Exit Sub ' we got a non-element
    Case ((item Is Not Nothing) And (lastSelected Is Nothing)): Set lastSelected = item ' we got our first good element
    Case (item = lastSelected): Exit Sub ' we already had what we got
    Case (Not item = lastSelected): Set lastSelected = item ' we got something new
End Select 
```

这肯定有点不寻常，我不得不使用我的奇妙白板（顺便说一句，它几乎是除了计算机之外最有用的编程资源）来确保我正确映射了所有语句。

这就是那里发生的事情：我有一个昂贵的操作，如果可能的话，我想避免重复。lastSelected 是对最近传递给此计算的值的持久引用。item 是刚刚从 GUI 接收到的参数。如果之前从未调用过该程序，lastSelected 以 Nothing 开始。item 也可以是 Nothing。此外，如果 lastSelected 和 item 相同，则跳过计算。

如果我用 C++ 写这个，我会写：

```
if (item == NULL || (lastSelected != NULL && item->operator==(*lastSelected))) return;
else lastSelected = item; 
```

然而，我不是。

## 问题

我怎样才能重写这个看起来更好，更有意义？对回答“是，原因如下：X、Y、Z”或“否，原因如下：X、Y、Z”的答案将获得支持。

## 编辑

修复了 C++ 语句以匹配 VB6 语句（它们应该是等效的）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T05:50:16.413

这更短，可读性提高了 100 倍。

*编辑*Wug 将 MarkJ 原始答案中的代码编辑为：

```
If (item Is Nothing)
    Then Exit Sub ' we got a non-element
ElseIf (lastSelected Is Nothing) Then
    Set lastSelected = item ' we got our first go 
ElseIf (item = lastSelected) Then
    Exit Sub ' we already had what we got
End If
Set lastSelected = item ' we got something new 
```

这是 MarkJ 的回应。一个嵌套 if，但只有一个 Set。对我来说似乎更整洁。

```
If (item Is Nothing) Then 
  Exit Sub ' we got a non-element 
ElseIf Not (lastSelected Is Nothing) Then ' not our first go
  If (item = lastSelected) Then 
    Exit Sub ' we already had what we got 
  End If 
End If
Set lastSelected = item ' we got something new
' does stuff here? @Wug is that true? 
```

*   要比较 VB6 中的引用相等性，请使用项目 Is LastSelected。因为 item = lastSelected 可能会评估对象中的默认属性并进行比较！
*   由于简洁似乎是一个目标，请考虑这一点。如果在条件 X 为 True 时退出 Sub，则以后无需再次检查 X。这是错误的！除非它在两次评估之间改变它的值（例如 X 是一个检查系统时钟的函数）。您正在检查项目是否是 lastSelected，然后是否不是。如果 item Is Nothing 为 False，请不要费心检查 item Is Not Nothing 是否为 True！
*   VB6 不会短路以[向后兼容 Basic 的旧版本](https://stackoverflow.com/questions/486722/why-is-short-circuiting-not-the-default-behavior-in-vb)
*   不用担心 VB6 不是其他语言，放松一下！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T01:18:23.637

是的

我从你的案例陈述中翻译了它。我个人觉得更容易阅读。

```
If Item Is Nothing Then
  Exit Sub ' we got a non-element
ElseIf LastSelected Is Nothing Then
  Set LastSelected = Item ' we got our first good element
ElseIf Item = LastSelectedItem Then
  Exit Sub ' we already had what we got
Else
  Set LastSelected = Item ' we got something new
End If 
```

你要求解释。我试图不必付出太多（通过重用你自己的代码注释）。

但无论如何它都在这里:-)

*   首先，如果没有项目，只需退出。简单的。
*   否则，如果`LastSelected Is Nothing`我们知道，因为第一个 if 条件失败，它`Item`存在，并且可以安全地将该值标记为 Last Selected。正如你所说，*我们得到了第一个好的元素*。潜艇继续前进。
*   但是，如果我们有 和 的现有值`Item`，`LastSelected`那么它们要么相等，要么不相等。如果他们是平等的，那就放弃吧。
*   如果它们不相等，则更新`LastSelected`. 正如你所说，*我们得到了一些新*的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T11:44:39.563

You can use a helper function like this:

```
Private Function pvGetItemData(oItem As ListItem) As Variant
    If Not oItem Is Nothing Then
        pvGetItemData = oItem.Tag
    Else
        pvGetItemData = -1
    End If
End Function 
```

and then

```
If pvGetItemData(Item) = pvGetItemData(LastSelected) Then
    ' cache hit
Else
    ' do calc
    Set LastSelected = Item
End If 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T06:20:00.560

是的

我会让这更简单：

```
If item Is Nothing Then
  Exit Sub ' we got a non-element
Else
  Set lastSelected = item ' we got something to assign
End If 
```

除非分配 lastItem 有副作用（它可以是具有无效分配代码的属性），否则代码逻辑基本相同。

如果您不需要退出子程序（代码段在子程序的末尾或其他地方），那么下一步就更简单了：

```
If Not (item Is Nothing) Then Set lastSelected = item 
```

顺便说一句，你`Select Case (True)`的 VB 程序员看起来真的很奇怪 :)

# javascript - 无法在 HTML 中运行 javascript onClick？

> ID：11571443
> 
> 赞同：1
> 
> 时间：2012-07-20T00:56:49.383
> 
> 标签：javascript, html, css

我正在尝试发送通过文本框接收到的用户输入，然后将该输入发送到 javascript，这是另一个文件（myfile.js）。由于某种原因，html 部分无法正常工作。这是代码：myfile.js：

```
var TRange=null;

function findString (str) {
 if (parseInt(navigator.appVersion)<4) return;
 var strFound;
 if (window.find) {

  // CODE FOR BROWSERS THAT SUPPORT window.find

  strFound=self.find(str);
  if (!strFound) {
   strFound=self.find(str,0,1);
   while (self.find(str,0,1)) continue;
  }
 }
 else if (navigator.appName.indexOf("Microsoft")!=-1) {

  // EXPLORER-SPECIFIC CODE

  if (TRange!=null) {
   TRange.collapse(false);
   strFound=TRange.findText(str);
   if (strFound) TRange.select();
  }
  if (TRange==null || strFound==0) {
   TRange=self.document.body.createTextRange();
   strFound=TRange.findText(str);
   if (strFound) TRange.select();
  }
 }
 else if (navigator.appName=="Opera") {
  alert ("Opera browsers not supported, sorry...")
  return;
 }
 if (!strFound) alert ("String '"+str+"' not found!")
 return;
} 
```

搜索.html

```
<!DOCTYPE html>
<HTML>
<HEAD>
</head>
<title>Search</title>
<body>
<script src="myfile.js" type="text/javascript"></script>
<form name="input">

Search for: <input type="text" id ="keytex" name="keytext" onClick='if(document.getElementById("keytex").value!=\'\') findString(document.getElementById("keytex").value); return(false);'>
</form>
<p> You can search this text. Search the text again</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T01:34:07.323

嗯...您甚至检查过您的 HTML 吗？（您的代码中有*很多*错误，这里是一个。）

```
<input onClick='if(document.getElementById("keytex").value!=\'\') findString(document.getElementById("keytex").value); return(false);'> 
```

看到那些了`\'`吗？你不能在 HTML 中做到这一点。另外，在内联代码中使用*括号* `if(){}`。

这应该有效：

```
if(document.getElementById("keytex").value!="") 
```

PS：不要使用内联 JavaScript。他们只会在最后给你一个更混乱的 HTML。

```
//Good
document.querySelector("#keytex").addEventListener("click",function(){
    if(this.value!=""){             //Use "this" to refer back the element.
        findString(this.value);
    }
    return false;
}); 
```

学习更多关于：

*   `this` [https://developer.mozilla.org/en/JavaScript/Reference/Operators/this](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this)
*   `addEventListener`- [https://developer.mozilla.org/en/DOM/element.addEventListener](https://developer.mozilla.org/en/DOM/element.addEventListener)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T01:06:25.213

probably you want to use onchange or onkeyup events - not onclick

# android - Android 日期选择器对话框

> ID：11571445
> 
> 赞同：3
> 
> 时间：2012-07-20T00:56:57.103
> 
> 标签：android, dialog, datepicker

如何在 Android 的日期选择器对话框中禁用日期？意味着只有月份和年份是可见的。目前使用安卓2.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T01:22:54.670

在这种情况下，您可以使用自定义 DatePicker，例如参考这个 google 项目，该项目 [为 android 提供替代时间和日期选择器](http://code.google.com/p/android-dateslider/)

![在此处输入图像描述](../Images/bc361e48bf24c856fd6fc0de1fe1fbbb.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:09:07.927

[您可以为此使用现成的框架](http://code.google.com/p/android-dateslider/)进行自定义日期选择器。

[Dateslider](http://code.google.com/p/android-dateslider/)是基于滑动条原理的一系列日期选择器小部件的框架。这会带来非常直观和增强的用户体验。

检查一下它可能会产生![在此处输入图像描述](../Images/d931e99c7a9b4474b494fc8f2da785ff.png)满足您需求的东西。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T01:01:55.270

对不起，但在我认为 4.0 之前你不能这样做，你只能选择一个完整的日期或全职选择器。

您可以创建自己的，但这可能需要一段时间，看看其他人做了什么。这是一个完整日期选择器的示例，但您可以将这一天排除在外，因为它是 xml。

[带有月份和年份的自定义日期选择器](https://stackoverflow.com/questions/9236389/custom-date-picker-with-months-and-years/9236861#9236861)

另外我认为它可能[与带有月份和年份的自定义日期选择器重复](https://stackoverflow.com/questions/9236389/custom-date-picker-with-months-and-years/9236861)

# java - “1字节UTF-8序列的无效字节1”读取RSS提要时

> ID：11571457
> 
> 赞同：1
> 
> 时间：2012-07-20T00:58:27.010
> 
> 标签：java, xml

我的代码非常简单：

```
DocumentBuilder db = DocumentBuilderFactory.newInstance().newDocumentBuilder();
Document doc = db.parse("http://blog.rogermontgomery.com/feed/?cat=skaffold"); 
```

问题是我以异常结束：

```
com.sun.org.apache.xerces.internal.impl.io.MalformedByteSequenceException: Invalid byte 1 of 1-byte UTF-8 sequence.
    at com.sun.org.apache.xerces.internal.impl.io.UTF8Reader.invalidByte(UTF8Reader.java:684)
    at com.sun.org.apache.xerces.internal.impl.io.UTF8Reader.read(UTF8Reader.java:554)
    at com.sun.org.apache.xerces.internal.impl.XMLEntityScanner.load(XMLEntityScanner.java:1742)
    at com.sun.org.apache.xerces.internal.impl.XMLEntityScanner.arrangeCapacity(XMLEntityScanner.java:1619)
    at com.sun.org.apache.xerces.internal.impl.XMLEntityScanner.skipString(XMLEntityScanner.java:1657)
    at com.sun.org.apache.xerces.internal.impl.XMLVersionDetector.determineDocVersion(XMLVersionDetector.java:193)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:772)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:232)
    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:284)
    at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:180)
    at com.skaffold.service.RogerBlogReader.read(RogerBlogReader.java:33)
[...] 
```

我不明白，xml标头将文档声明为UTF-8，http响应以UTF-8编码......有什么解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T01:01:50.747

并非所有字节序列都是有效的 UTF-8。UTF-8 解码器可以读取单个字节并根据字节值知道它在 UTF-8 中是非法的。听起来您的 RSS 提要很糟糕，可能声称是 UTF-8，但实际上编码不同，例如 iso8859-1。

更新：提要 URL 是 gzip 压缩的。你试过解压吗？

# c# - 滑块没有有效响应用户的拖动

> ID：11571458
> 
> 赞同：0
> 
> 时间：2012-07-20T00:58:29.863
> 
> 标签：c#, xaml, windows-8, microsoft-metro

```
<Slider x:Name="sliderBright" HorizontalAlignment="Left" Height="48" Margin="132,632,0,0" VerticalAlignment="Top" Width="1052" Background="#FF727272" FontSize="36" BorderBrush="#FF090505" ValueChanged="SliderValue_Changed" StepFrequency="1" TickPlacement="Inline" TickFrequency="1"/> 
```

大家好！我目前正在开发一个允许用户调整应用程序亮度的应用程序，它是一个手电筒应用程序。无论如何，我的滑块没有响应拖动，我必须点击栏的特定位置才能继续到该位置。拖动时，它只会移动 1 个值（它是一个 100 值的条）

我在几天前进行了测试并且它的工作但经过一段时间的玩耍后，它变得不可拖动无论如何我的代码有什么问题，我没有对滑块进行任何修改：O

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T07:25:13.780

您问题中的代码运行良好。你的事件处理程序代码是什么？我建议您暂时删除处理程序，看看它是否有效。

# regex - 使用 ColdFusion 进行页面抓取

> ID：11571464
> 
> 赞同：-2
> 
> 时间：2012-07-20T01:00:09.510
> 
> 标签：regex, coldfusion

我需要通过抓取页面的顶部和底部并保存为 2 个不同的变量来使用 ColdFusion 动态创建新布局。

顶部停止在顶部，直到这个。

```
googleoff: all (This is in an HTML Comment) 
```

底部从这里开始

```
googleon: all (This is in an HTML comment) 
```

直到最后。

我在想我可以使用正则表达式来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:05:05.260

假设这些注释只出现在您所说的位置，您可以使用正则表达式字符串拆分轻松地做到这一点：

```
<cfset Sections = String.split( '<!-- google(?:on|off): all -->' ) />

<cfset TopOfPage    = Sections[1] />
<cfset BottomOfPage = Sections[3] /> 
```

如果它们的注释不固定，则需要更新的正则表达式 - 例如，`\s*`如果空格不可预测，您可以将空格替换为。

为了比较，这是一个非正则表达式版本：

```
<cfset EndOfTopPos      = find( '<!-- googleoff: all -->' , String ) - 1 />
<cfset StartOfBottomPos = find( '<!-- googleon: all -->' , String , EndOfTopPos ) + 22 />

<cfset TopOfPage    = left( String , EndOfTopPos ) />
<cfset BottomOfPage = right( String , len(String)-StartOfBottomPos ) /> 
```

由于这适用于固定字符串，因此速度更快 - 但您需要重复数千次才能使这种差异变得显着。

# jquery - jquery 背景图像横跨屏幕

> ID：11571467
> 
> 赞同：0
> 
> 时间：2012-07-20T01:00:26.213
> 
> 标签：jquery, jquery-plugins

我知道有很多插件可以做到这一点，我已经尝试了一些。在过去，我尝试过的总是会导致 Firefox 出现一些闪烁。

下面链接中的一个似乎可以无缝工作，但我似乎无法弄清楚他们在使用什么。

如果有人可以看看，我将不胜感激！

链接：[http ://usa.buy2.co.il/assets/themes/Buy2Usa/pages/error.html](http://usa.buy2.co.il/assets/themes/Buy2Usa/pages/error.html)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T01:05:01.823

You accomplish this with CSS.

```
html { 
background: url(images/bg.jpg) no-repeat center center fixed; 
-webkit-background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;
background-size: cover;
} 
```

[Go here to learn more](http://css-tricks.com/perfect-full-page-background-image/)

# objective-c - 不使用 NSTextFieldCell 更改 NSCell 单元格中的背景颜色

> ID：11571471
> 
> 赞同：2
> 
> 时间：2012-07-20T01:00:38.940
> 
> 标签：objective-c, macos, cocoa, nscell, nstextfieldcell

目前我的桌子上有四列。三个是 NSTextFieldCells，一个是使用 NSCell 的自定义单元格。我需要更改一行的颜色。我已经更改了 NSTextFieldCells 的颜色，但现在我需要更改 NSCell 背景颜色，有没有办法做到这一点？我绝对不能使用 NSTextFieldCell 来完成这个单元格。

# django - 具有多个数据键值的 Django 测试客户端

> ID：11571474
> 
> 赞同：13
> 
> 时间：2012-07-20T01:00:53.070
> 
> 标签：django

Django 的[测试客户端](https://docs.djangoproject.com/en/1.4/topics/testing/#module-django.test.client)允许您执行`POST`请求并将请求数据指定为`dict`.

但是，如果我想发送模拟`<select multiple>`或`<input type="checkbox">`字段的数据，我需要为 data 中的单个键发送多个值`dict`。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-20T01:04:15.583

The simplest way is to specify the values as a `list` or `tuple` in the `dict`:

```
client.post('/foo', data={"key": ["value1", "value2"]}) 
```

Alternatively you can use a `MultiValueDict` as the value.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-08T16:54:34.157

刚碰到这个问题！不幸的是，您的答案对我不起作用，在`FormView`我发布的内容中，它只会提取其中一个值，而不是所有值

您还应该能够手动构建查询字符串并使用内容类型发布它`x-www-form-urlencoded`

```
some_str = 'key=value1&key=value2&test=test&key=value3'
client.post('/foo/', some_str, content_type='application/x-www-form-urlencoded') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-19T09:40:55.430

```
from django.core.urlresolvers import reverse
from django.utils.datastructures import MultiValueDict
from django.utils.http import urlencode

form_data = {'username': 'user name',
             'address':  'street',
             'allowed_hosts': ["host1", "host2"]
             }

response = client.post(reverse('new_user'),
                       urlencode(MultiValueDict(form_data), doseq=True),
                       content_type='application/x-www-form-urlencoded') 
```

# c++ - 在 C++ 中使用临时对象作为默认参数是否安全？

> ID：11571476
> 
> 赞同：8
> 
> 时间：2012-07-20T01:01:04.290
> 
> 标签：c++, language-lawyer

例如：

```
int StrLen(const std::string &s = "default string") {
  const std::string &t = "another string";  // BTW, is this line safe?
  return s.size();
} 
```

**更新**

SoapBox 的结论是正确的，但原因并不完全正确。

> 临时对象的生命周期会自动延长到与持有它的引用相同。

这通常是正确的，但有几个例外。一个是

> “在函数调用中临时绑定到引用参数会一直持续到包含调用的完整表达式完成为止。”

我认为这个例外适用于默认参数情况。

另一个例外与 SoapBox 回答中的附加示例有关：

> “临时绑定到函数返回语句中的返回值的生命周期不会延长；临时在返回语句中的完整表达式结束时被销毁。”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T01:07:01.497

是的，这两件事都是安全的。它们构造临时对象，并且临时对象的生命周期自动延长到与持有它的引用相同。

虽然我们正在讨论这个主题，但这是不安全的临时人员的常见*错误*。

```
std::string const &accessor() const {
    if (my_name_is_valid())
        return m_my_name;
    else
        return "";
} 
```

这是无效的，因为临时是在`accessor`函数内部创建的，然后返回对它的*引用。*调用者将收到对已破坏对象的引用……这是未定义的行为，通常会导致崩溃。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T06:57:45.610

SoapBox 的回答是正确的，但是限制是什么并不总是很明显。

> 这通常是正确的，但有几个例外。一个是“在函数调用中临时绑定到引用参数的情况一直存在，直到包含调用的完整表达式完成”。我认为这个例外适用于默认参数情况。

它确实，虽然有时以微妙的方式，考虑这两个例子：

```
struct A { A(std::string const& s): _ref(s) {} std::string const& _ref; };

struct B { B(std::string s): _ref(s) {} std::string const& _ref; }; 
```

在这两个示例中，函数都是构造函数。

*   In `A`: 临时的生命周期被延长到完整表达式的结尾意味着`A a("Hello"); std::cout << a._ref << "\n";`不安全。暂时只活到了第一个`;`。
*   In `B`: 参数本身是一个临时的，这里根本没有*绑定到 const-reference*。一个好的编译器会发出警告。

> 另一个例外与 SoapBox 回答中的附加示例有关：“临时绑定到函数返回语句中的返回值的生命周期没有延长；临时在返回语句中的完整表达式结束时被销毁。”

这源于该`return`语句的一般工作方式。就标准而言，下面有两个副本正在进行中。那是：

1.  调用`return`会将结果复制到“结果槽”中
2.  如果有的话，调用者会将“结果槽”中的值复制到其存储中。

当然，副本可以被优化掉（复制省略），但这很重要，因为临时对象的生命周期只会扩展到它绑定到的**原始**常量引用。如果该引用的副本超过了原始引用的生命周期，则它指的是垃圾，这就是`return`语句中发生的情况。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-07-20T01:06:01.523

是的。该字符串被分配为静态文本，不会移动或更改。

# javascript - window.location - javascript - 不工作

> ID：11571484
> 
> 赞同：3
> 
> 时间：2012-07-20T01:02:01.933
> 
> 标签：javascript, jquery, postmessage

奇怪的问题。我正在使用 jQuery`.postMessage()`将消息从安全发送`<iframe>`到父级。具体来说，我正在发送一个 URL 并确认父级正在接收该 URL - 但是，当我尝试设置`window.location`为该 URL 时，没有任何反应。

发送的网址：

```
http://mydomain.com/shop/507870?nav=ln-474#/shop/507870?gnrefine=1*COLOR_FAMILY*Brown%5E1*CLSR_TYP*Lace-Up%5E 
```

实际网址：

```
http://mydomain.com/shop/507870?nav=ln-474#/shop/507870?gnrefine=1*COLOR_FAMILY*Brown%5E1*CLSR_TYP*Lace-Up%5E 
```

他们匹配。但是，在 Chrome 中，如果我这样做，`console.log(loginConfig.redirectURL);`我会得到：

```
http://mydomain.com/shop/507870?nav=ln-474#/shop/507870?gnrefine=1*COLOR_FAMILY*Brown%5E1*CLSR_TYP*Lace-Up%5E

undefined 
```

所以，我认为这`window.location`是获得`undefined`价值。

关于为什么我在使用时会得到两个值的任何想法`console.log`？

**更新**

逻辑：

```
if (message[1] != "") {
                $("#loginDialog").dialog("close");
                 loginConfig.redirectURL = message[1];
                window.location = loginConfig.redirectURL
                console.log('message: '+loginConfig.redirectURL);
} 
```

配置对象：

```
var loginConfig = {
redirectURL: ""
} 
```

**进一步更新：**

window.location 适用于任何没有哈希的 url。所以由于某种原因，它不会加载任何带有哈希的 url。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T01:26:36.700

您的这部分代码无效：

```
var loginConfig = {
    redirectURL = ""
} 
```

它需要是这样的：

```
var loginConfig = {
    redirectURL: ""
} 
```

If this leads to an error which keeps loginConfig from being properly declared with the desired property that could partly explain some unexpected behavior. You should certainly look in your browser error log and see if it reports any errors.

# http - 基于 SSL 的 HTTP 基本身份验证

> ID：11571486
> 
> 赞同：1
> 
> 时间：2012-07-20T01:02:14.983
> 
> 标签：http, .htaccess, ssl, https, basic-authentication

所以，我有一个 Secure.domain.com 的 SSL 证书。我在这个域上运行了一些管理 Web 应用程序（git repo 等），使用 .htaccess 基本身份验证进行身份验证。

当我通过 https 与域通信并要求我进行身份验证时，它是验证证书还是在我验证后验证？

同样，如果我通过 http 连接，是否有一种简单的方法可以将请求转发到 https，然后进行身份验证？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T01:16:09.253

HTTPS 使用的 SSL 或 TLS 会话在发送任何 HTTP 流量之前构建。这包括认证验证。一旦会话建立，HTTP 流量就会通过它，从 GET/POST/whatever 开始，然后服务器正常响应，带有`WWW-Authenticate`触发登录框的标头。

至于从 HTTP 重定向到 HTTPS，这取决于您使用的服务器。由于它被标记`.htaccess`为 ，我将假设 Apache，为此，`.htaccess`文件中的类似内容应该这样做：

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T01:16:35.150

> 当我通过 https 与域通信并要求我进行身份验证时，它是验证证书还是在我验证后验证？

SSL 是与 HTTP 协议分开的层，BASIC 身份验证是 HTTP 协议的一部分。SSL 握手首先发生在发送任何协议信息之前。根据进行握手的端点以及它们如何验证彼此的证书，它可能根本不进行任何验证。但如果它确实发生了（可能所有广泛使用的浏览器都会发生），它会发生在握手期间，在发送任何身份验证数据之前。

> 同样，如果我通过 http 连接，是否有一种简单的方法可以将请求转发到 https，然后进行身份验证？

有几种方法可以做到这一点。StackOverflow上有很多问题询问如何做到这一点，搜索“强制https”。这可能会归结为您可以访问哪些配置文件。如果您有权访问您的虚拟主机配置，则在虚拟主机中*为非 SSL*`Redirect`配置添加一个指令并重定向到 https。否则，您需要在 .htaccess 文件中执行此操作。与此类似的内容（在您的*非 SSL*站点中）：

 **```
Redirect 301 / https://yourdomain.com/ 
```**

# objective-c - 将 MagicalRecord 与 RestKit 中的另一个现有上下文一起使用

> ID：11571488
> 
> 赞同：3
> 
> 时间：2012-07-20T01:02:22.827
> 
> 标签：objective-c, ios, core-data, magicalrecord

我想继续使用我当前的 RestKit，同时使用 MagicRecord 进行其余的获取和更新。我希望 Restkit 的 MOC 将更新发送到 MagicRecord 的默认上下文。如果我理解正确，这就是我正在做的事情。这个可以吗？

```
NSManagedObjectContext* context = [[RKObjectManager sharedManager].objectStore managedObjectContextForCurrentThread];
[MagicalRecord setupCoreDataStackWithAutoMigratingSqliteStoreNamed:[XDBStore storeName]];
[context setParentContext:[NSManagedObjectContext MR_defaultContext]]; 
```

也许另一种方法可以做到这一点，但仍然不确定。

```
NSPersistentStoreCoordinator *coordinator = [[[RKObjectManager sharedManager] objectStore] persistentStoreCoordinator]; 
[NSPersistentStoreCoordinator MR_setDefaultStoreCoordinator:coordinator]; 
[NSManagedObjectContext MR_initializeDefaultContextWithCoordinator:coordinator]; 
```

以前有人有同样的问题吗？

**编辑 1**

我尝试了@casademora 的建议 #1 来设置默认上下文，但得到了这个错误。

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Can only use -performBlockAndWait: on an NSManagedObjectContext that was created with a queue.' 
```

**编辑 2**

我发现了一个黑客。首先，在magicrecord 中为默认上下文打开setter。接下来，更改 RestKit 存储的并发类型，以便它的上下文可以在 magicrecord 中使用。

**NSManagedObjectContext+MagicalRecord.h**

```
+ (void) MR_setDefaultContext:(NSManagedObjectContext *)moc;
+ (void) MR_setRootSavingContext:(NSManagedObjectContext *)context; 
```

**RKManagedObjectStore.m**

```
NSManagedObjectContext *managedObjectContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType]; 
```

**然后像这样设置 MagicalRecord：**

```
NSManagedObjectContext* context = [[RKObjectManager sharedManager].objectStore managedObjectContextForCurrentThread];
[NSManagedObjectContext MR_setRootSavingContext:context];

NSManagedObjectContext *defaultContext = [NSManagedObjectContext MR_newMainQueueContext];
[defaultContext setParentContext:context];
[NSManagedObjectContext MR_setDefaultContext:defaultContext]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T01:54:31.903

有一个示例项目展示了如何将 RestKit 与 MagicalRecord @ [https://github.com/blakewatters/RKMagicalRecord一起使用](https://github.com/blakewatters/RKMagicalRecord)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-05T06:24:13.917

总结布莱克的解决方案

使用类扩展来公开对 MagicalRecord 的私有 setter 方法的访问

```
@interface NSManagedObjectContext ()
+ (void)MR_setRootSavingContext:(NSManagedObjectContext *)context;
+ (void)MR_setDefaultContext:(NSManagedObjectContext *)moc;
@end 
```

先做核心数据设置，然后这个

```
[NSPersistentStoreCoordinator MR_setDefaultStoreCoordinator:managedObjectStore.persistentStoreCoordinator];
[NSManagedObjectContext MR_setRootSavingContext:managedObjectStore.persistentStoreManagedObjectContext];
[NSManagedObjectContext MR_setDefaultContext:managedObjectStore.mainQueueManagedObjectContext]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T01:34:58.497

有两种方法可以实现这一点：

1) 从 RestKit 获取主上下文，并将其设置为默认上下文：

```
NSManagedObjectContext *rkContext = ...; //You'll have to figure this part out
[NSManagedObjectContext MR_setDefaultContext:rkContext]; 
```

2）对于您执行的每次提取，只需指定上下文：

```
NSMangedObjectContext *rkContext = ...; //again, I don't know where to get this in restkit
[MyEntity MR_findAllInContext:rkContext];   // <- This will use the RestKit context 
```

# php - 完成此 SQL 查询所需的方法

> ID：11571496
> 
> 赞同：2
> 
> 时间：2012-07-20T01:04:08.840
> 
> 标签：php, mysql, sql

我需要一种方法来定义一个变量来保存 MYSQL 中表达式的结果，以便我可以在整个查询中使用该变量。
所以这是可能的：

```
SELECT 
IF(VALID,EMPLOYEE_NAME,"NULL") AS NAME,   /** <-- Note *VALID* 
IF(VALID,ID,"NULL") AS ID,   /** <-- And here... 
IF(VALID,OCCUPATION,"NULL") AS OCCUPATION,   /** <-- And here... 

IF((**LONG EXPRESSION**), TRUE, FALSE) AS VALID; /** <-- Taken from here 
```

其中 LONG EXPRESSION 可以是非常长的表达式，我需要为 IF 语句中的每个返回的列放置，有很多 IF。

我的直觉告诉我，我应该能够像在每一种程序语言中一样做到这一点：

```
$var = LONG_EXPRESSION(....);
if($var) {..};
if($var) {..};
if($var) {..};
if($var) {..}; 
```

这样，它更合乎逻辑，更不容易出错。易于维护，可读，甚至优化。

在 MYSQL 中有没有等价的？
因此，为每一行执行定义一个参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T01:27:08.903

您只需要一个子查询：

```
SELECT IF(VALID,EMPLOYEE_NAME,"NULL") AS NAME,   /** <-- Note *VALID* 
       IF(VALID,ID,"NULL") AS ID,   /** <-- And here... 
       IF(VALID,OCCUPATION,"NULL") AS OCCUPATION,
       ...,
       VALID
from (select t.*, IF((**LONG EXPRESSION**), TRUE, FALSE) AS VALID
      from t
    ) t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T04:26:20.247

可能更合适的方法是`OUTER JOIN`在原始表和子查询之间使用`WHERE`包含长表达式的子句。

```
SELECT IF(b.rowid IS NULL, "NULL", a.employee_name) AS name,
       IF(b.rowid IS NULL, "NULL", a.id) AS id,
       IF(b.rowid IS NULL, "NULL", a.occupation) AS occupation,
       ...,
       IF(b.rowid IS NULL, 0, 1) AS valid
FROM mytable a
LEFT OUTER JOIN
(SELECT rowid FROM mytable
 WHERE **LONG EXPRESSION**) b
ON a.rowid = b.rowid 
```

这假定`rowid`是表中的唯一键列。

# xcode - error: linker command failed: ld: duplicate symbol _main

> ID：11571504
> 
> 赞同：1
> 
> 时间：2012-07-20T01:05:11.573
> 
> 标签：xcode

> clang: error: linker command failed with exit code 1 (use -v to see invocation)

It says that i have:

> ld: duplicate symbol _main in /Users/timpark/Library/Developer/Xcode/DerivedData/tutorial- gsmmwsvdohwbiqforobplztheaso/Build/Intermediates/tutorial.build/Debug/tutorial.build/Objects-normal/x86_64/tutorial.o and /Users/timpark/Library/Developer/Xcode/DerivedData/tutorial-gsmmwsvdohwbiqforobplztheaso/Build/Intermediates/tutorial.build/Debug/tutorial.build/Objects-normal/x86_64/main.o for architecture x86_64"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T01:10:39.290

`duplicate symbol _main`意味着您在 Targets/Compiled Sources 下有多个 main.m。检查并删除它。

# mysql - MySQL 查询；查找两个人是否共享同一组

> ID：11571505
> 
> 赞同：0
> 
> 时间：2012-07-20T01:05:11.670
> 
> 标签：mysql

假设在 MySQL 表上，userid=A 和 userid=B。

userid=A 属于 Group1、Group5、Group6、Group8

userid=B 属于 Group2、Group9、Group5、Group10。

查找两个用户的公共组Group5的MYSQL查询语句是什么。

路口查询

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T01:16:18.753

```
select * from group_table where group_id = id AND (userid = a or userid = b) 
```

如果计数为 2，那么他们都是该组的成员。

# c++ - Print to Win32 screen

> ID：11571507
> 
> 赞同：0
> 
> 时间：2012-07-20T01:05:56.587
> 
> 标签：c++, winapi, pointers, printing

I want to print to a win32 screen using TextOut function when i send a WM_PAINT message, i am an ASM coder and ive been fighting a lot to understand typecast on C++.

In theory i need a global buffer that store mine strings and display the lines one by one when i get a WM_PAINT message, problem is i read that is no good to use global variables. So is there another approach to print to screen without using a global buffer for store mine strings?.

Also here is mine another problem:

```
PrintLines *PaintArray[MAX_PRINT_LINES];
int CurrentLine;

    void Print(HWND hWnd, int rgb, const char* string, ...)
    {
        MSG msg;
        char buff[MAX_LINE_CHARS];
        if (CurrentLine >= MAX_PRINT_LINES)
        {
            CurrentLine = 0;
            memset (*PaintArray, NULL, sizeof PaintArray);
            InvalidateRect(hWnd, NULL, TRUE);
        }
        va_list argList;
        va_start(argList, string);
        PaintArray[CurrentLine]->stringlen = vsprintf(buff, string, argList);
        va_end (argList);
        PaintArray[CurrentLine]->rgb = rgb;
        CurrentLine+=1;
        msg.hwnd = hWnd;
        msg.message = WM_PAINT;
        DispatchMessage(&msg);
    } 
```

When i debug the call to vsprintf i see:

```
00412AD3   8B15 98B34100    MOV EDX,DWORD PTR DS:[CurrentLine]
00412AD9   8B0495 20B34100  MOV EAX,DWORD PTR DS:[EDX*4+PaintArray]
00412AE0   50               PUSH EAX
00412AE1   FF15 6CC44100    CALL DWORD PTR DS:[<&MSVCR110D.vsprintf>>; MSVCR110.vsprintf 
```

The **EDX*4+Offset PainArray** tells me its an array that point to the actual class array i want (wich is good), but when debugging its initialized to 0\. How can i initialize it?

Also how i can make compiler do this:

```
MOV Edx, CurrentLine
Imul Edx, Edx, SizeOf PrintLines
Add Edx, Offset PaintArray 
```

thanks !

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T02:40:07.813

好的...现在有了您的评论（如下），我的答案有望对您更有用，因此我将完全用我的新答案替换它：

首先，您的 PaintArray[] 缓冲区是指针数组，而不是 PrintLines 对象数组。您访问它们的方式（使用 -> 运算符）也将它们视为指针，因此它可以编译。但是您永远不会分配真正的 PrintLines 对象来分配给缓冲区，因此当您在调试器中中断 vsprintf() 调用时会发现 NULL 。

在我看来，实际上没有必要动态分配这些 PrintLines 对象，因此您可以将 PaintArray 定义为 PrintLine 对象的数组并完成它（即分配）：

```
PrintLines PaintArray[MAX_PRINT_LINES]; // note this is an array of objects, not pointers 
```

...但是任何时候访问它们时，都需要使用点运算符，而不是箭头运算符。我不知道您是否/为什么需要在“if (CurrentLine >= MAX_PRINT_LINES)”中将这些对象归零，而且我不确定 InvalidateRect() 调用对您有什么作用。我也不确定为什么你不能只拥有一个你不断重复使用的全局 PrintLines 对象；再次调用 Print() 时不会使用它，还是您正在运行多个线程？如果您正在运行多个线程，那么我怀疑您的“if (CurrentLine >= MAX_PRINT_LINES)”内容的正确性，除非您通过某种同步机制以某种方式调用 Print() 并且知道所有缓冲的消息都已完成发送您再次调用 Print() 的时间.... 其他代码是否会将 CurrentLine 设置回零，或者 Print() 是 CurrentLine 变量的唯一用户吗？如果 Print() 是它的唯一用户，那么 (1)，您可以将其设为局部静态变量而不是全局变量，并且 (2)，我认为您有一些真正的正确性问题：要么您真的不需要这些东西的数组，否则当 CurrentLine 回到 0 时，您不应该将它们全部清除。

一个结构良好的非平凡 C++ 程序将使其组件与公共和私有（如果它在继承层次结构中，则受保护）接口清楚地隔离。这是通过类完成的。类是与“方法”（函数）相关联的数据结构。当您将代码分解成小的、有凝聚力的单元，并将整个项目构建为协同工作的对象集合时，事情就会非常顺利，而不是将您的项目构建为一个单一的混乱代码。来自 asm 背景，这对你来说将是一个巨大的飞跃。我知道，我也开始用 asm 编程……为 Intel 8051，然后是 8088，然后是 Motorola 68K 和 PowerPC 850/860，并加入了一点 Sparc。从 asm 到 C 的步骤是最小的，如果你只是在 C++ 中以过程风格编程，那也不是一个大的飞跃，但如果你希望成为一名有市场的程序员，你真的需要向面向对象编程迈进。现在有一些 OO 狂热者会提倡以严格的 OO 风格进行编程，但是也有很多项目将它们的大部分组件实现为对象，但它们的主要监督/控制代码以仅使用对象的过程代码实现......如果你能做到这一点，那可能是一个非常好的开始。

在这种情况下，我编写了您的代码版本，将您的缓冲区封装在一个环形缓冲区类中。这假设您实际需要的只是看似永无止境的 PrintLines 对象的缓冲区（只要消费者跟上，环形缓冲区就不会填满，就永远不会结束）。如果您正在尝试学习 C++，我建议您开始将内聚概念封装为类，一旦实现和调试，有助于减少与不正确使用原始数据相关的其他代码中未来出现错误的可能性。下面的代码被实现为一个包含所有静态数据和静态方法的结构，这对于 OO 编程来说有点不寻常，但在这种情况下，你永远不需要这些“对象”中的一个（实际上在这种情况下你不会甚至有一个 PaintBuffers“对象”，你只有类 & 一堆静态数据和方法）。有些人会主张在这种情况下使用“单例”模式，但这超出了 OO 的边缘，你并不真正需要它。这使您更接近 OO 思维，并且更容易（几乎）直接从 asm 代码访问。我希望它对你有用。

```
 #include <stdio.h>
  #include <stdarg.h>

  // ================================== This would go in a .h file.....

  struct PrintLines // My own personal stand-in for whatever a "PrintLines" object is
  {
     int rgb;
     int stringlen;
     char string[400];
  };

  class PaintBuffers // encapsulates a circular buffer of PrintLines objects
  {
  public: // Public data: Anyone can have direct access to this stuff....
     static const unsigned int maxPrintLines = 4; // formerly #define MAX_PRINT_LINES

  private: // Private data: Only this class's methods can access this stuff....
     static PrintLines PaintArray[maxPrintLines]; // note these are real objects, not pointers
     static unsigned int producerIdx; // for data coming into this class
     static unsigned int consumerIdx; // for data going out of this class

  public: // Public methods: Anyone can call these methods....
     static int numUsedBuffers() { return (producerIdx-consumerIdx) % maxPrintLines; }
              // Side note, but important: The % above gives us what we want only if the
              // lhs (left-hand-side) is positive.  One way to ensure that is by simply
              // treating the terms as unsigned; even though subtracting a larger
              // number from a smaller "wraps around" to a very large number, after
              // the % operation we still get what we want, so there's no need to
              // compute the absolute value of a signed subtraction if we just make
              // them unsigned (or cast them as unsigned) in the first place.
  static int numFreeBuffers() { return maxPrintLines - numUsedBuffers(); }

  // Producer calls this: Get the next 'write' buffer (to write into it)
  static PrintLines* getWriteBuf()
     {
        if (numFreeBuffers() > 1) // The >1 implements the "always keep one slot open"
        {                         // solution to the full/empty ambiguity problem, thus
                                // there will ALWAYS be at least one unused buffer.
                                // There are alternative solutions that allow use of
                                // that one last buffer, but none which results in
                                // more efficient code.
           PrintLines* ret = &PaintArray[producerIdx];
           producerIdx = (producerIdx+1) % maxPrintLines;
           // ...Note that if maxPrintLines is a power-of-2 (smart programmers only make
           //    circular buffers that are sized as powers-of-2), the compiler will
           //    automatically turn that % operation into an equivalent & for efficiency.
           return ret;
        }
        else
        {
           return NULL; // Tell the caller there's no more buffer space.
        }
     }

  // Consumer calls this: Get the next 'read' buffer (to read data from it)
  static PrintLines* getReadBuf()
     {
        if (numUsedBuffers() > 0)
        {
           PrintLines* ret = &PaintArray[consumerIdx];
           consumerIdx = (consumerIdx+1) % maxPrintLines;
           return ret;
        }
        else
        {
           return NULL; // Tell the caller there's no data available.
        }
     }
  };

  // Because you can't (easily) call a C++ name-mangled function from assembly,
  // I'll define a "C"-linkage interface to the PaintBuffers class below.  Once
  // your whole ASM project is ported to C++, you can blow the ASM interface away.
  extern "C" int PaintBuffers_numUsedBuffers();
  extern "C" int PaintBuffers_numFreeBuffers();
  extern "C" PrintLines* PaintBuffers_getWriteBuf();
  extern "C" PrintLines* PaintBuffers_getReadBuf();

  // ================================== This would go in a .cpp file.....

  // In the .h file, we declared that there are such functions (somewhere), now
  // we need to actually define them....
  extern "C" int PaintBuffers_numUsedBuffers() { return PaintBuffers::numUsedBuffers(); }
  extern "C" int PaintBuffers_numFreeBuffers() { return PaintBuffers::numFreeBuffers(); }
  extern "C" PrintLines* PaintBuffers_getWriteBuf() { return PaintBuffers::getWriteBuf(); }
  extern "C" PrintLines* PaintBuffers_getReadBuf() { return PaintBuffers::getReadBuf(); }

  // In the .h file, we declared that there are such variables (somewhere), now
  // we need to actually define them....
  PrintLines PaintBuffers::PaintArray[PaintBuffers::maxPrintLines];
  unsigned int PaintBuffers::producerIdx=0;
  unsigned int PaintBuffers::consumerIdx=0;

  // Note that all of the PaintBuffers class's methods were defined inline in the
  // class itself.  You could also just declare them there (in the class definition),
  // and define them here in a .cpp file.

  void Print(/*HWND hWnd,*/ int rgb, const char* string, ...)
  {
     PrintLines* PaintObject = PaintBuffers::getWriteBuf();
     if (!PaintObject) // Is it NULL?
     { // What should we do if there is no more buffer space???
        return; // I guess just do nothing... Lost message.
     }
     // TODO: Is this needed somehow?....  InvalidateRect(hWnd, NULL, TRUE);
     //  MSG msg;
     va_list argList;
     va_start(argList, string);
     PaintObject->stringlen = vsnprintf(PaintObject->string, sizeof(PaintObject->string)-1, string, argList);
     va_end (argList);
     PaintObject->rgb = rgb;
     //  msg.hwnd = hWnd;
     //  msg.message = WM_PAINT;
     //  DispatchMessage(&msg);
  }

  void Consume() // ...my stand-in for whatever your consumer is (still in ASM?)
  {
     PrintLines* PaintObject = PaintBuffers::getReadBuf();
     if (PaintObject) // Was it non-NULL?
     {
        printf("Consume(): Got \"%s\"\n", PaintObject->string);
     }
     else // This is only here to show that we did get NULL.....
     {
        printf("Consume(): Got NULL! (no buffers with data in them)\n");
     }
  }

  int main()
  {
     Consume();
     Consume();
     Print(0x11111111, "The %dst message.", 1);
     Print(0x11111111, "The %dnd message.", 2);
     Consume();
     Consume();
     Print(0x11111111, "The %drd message.", 3);
     Print(0x11111111, "The %dth message.", 4);
     Consume();
     Print(0x11111111, "The %dth message.", 5);
     Consume();
     Consume();
     Consume();
     Consume();
     Consume();
     Print(0x11111111, "The %dth message.", 6);
     Print(0x11111111, "The %dth message.", 7);
     Print(0x11111111, "The %dth message.", 8);
     Print(0x11111111, "The %dth message.", 9);  // ...will be lost (no more buffer space)
     Print(0x11111111, "The %dth message.", 10); // ...will be lost (no more buffer space)
     Print(0x11111111, "The %dth message.", 11); // ...will be lost (no more buffer space)
     Consume();
     Consume();
     Consume();
     Consume();
     Consume();
     Consume();
     Consume();
  } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-20T01:08:48.323

我对问题的代码犯了一个错误，这里是正确的：

```
PrintLines *PaintArray[MAX_PRINT_LINES];
int CurrentLine;

void Print(HWND hWnd, int rgb, const char* string, ...)
{
    MSG msg;
    if (CurrentLine >= MAX_PRINT_LINES)
    {
        CurrentLine = 0;
        memset (*PaintArray, NULL, sizeof PaintArray);
        InvalidateRect(hWnd, NULL, TRUE);
    }
    va_list argList;
    va_start(argList, string);
    PaintArray[CurrentLine]->stringlen = vsprintf(PaintArray[CurrentLine]->string, string, argList);
    va_end (argList);
    PaintArray[CurrentLine]->rgb = rgb;
    CurrentLine+=1;
    msg.hwnd = hWnd;
    msg.message = WM_PAINT;
    DispatchMessage(&msg);
} 
```

# android - Draw fading edge programmatically

> ID：11571509
> 
> 赞同：5
> 
> 时间：2012-07-20T01:06:02.180
> 
> 标签：android, android-widget

I would like to draw a fading edge at somewhere on my view programmatically, I just copied the build in fading edge feature of android view system, but it can't work, any suggestions?

```
mShaderPaint = new Paint();
mMatrix = new Matrix();
mShader = new LinearGradient(0, 0, 0, 1, 0xFF000000, 0, Shader.TileMode.CLAMP);

mShaderPaint.setShader(mShader);
mShaderPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_OUT));

mFadingRect = new RectF();

// in dispatchDraw
final int sc = canvas.getSaveCount();
final int flags = Canvas.HAS_ALPHA_LAYER_SAVE_FLAG;

canvas.saveLayer(mFadingRect, null, flags);
mMatrix.setScale(1, (float)(.8 * mFadingEdgeLength));
mMatrix.postRotate(180);
mMatrix.postTranslate(mFadingRect.left, mFadingRect.bottom);
mShader.setLocalMatrix(mMatrix);
canvas.drawRect(mFadingRect, mShaderPaint); 
```

# asp.net-mvc - 视图上的 MVC 复选框渲染

> ID：11571511
> 
> 赞同：0
> 
> 时间：2012-07-20T01:06:13.007
> 
> 标签：asp.net-mvc, razor, html.checkbox

我在尝试在部分视图上呈现复选框时遇到了困难。基本上，我想要的是根据从数据库中提取的值来呈现复选框。请在下面查看我的代码：

```
 <div class="editor-label">
            @Html.LabelFor(model => model.Active)
        </div>
        <div class="editor-field">
            @{if (Model.Active == 'Y')
              { Html.CheckBox("Active", true); }
              else
              { Html.CheckBox("Active", true); }
                }
        </div> 
```

在此代码块中，我正在检查模型中 Active 字段内的值，并根据该值将 checkBox 的 isChecked 属性呈现为 true 或 false。

我已经调试了这段代码并使用了断点。我的数据库中有一个“Y”值，它确实通过了 if 语句。但是，当表单弹出时，复选框没有呈现。

有人可以帮帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T01:12:38.437

我认为您的主要问题可能是因为您有`@{`而不是`@`在 if.. 之前尝试删除它。

另外，为了让事情更容易..在您的视图模型上创建一个新属性：

```
public bool IsActive
{
    get { return Active == "Y"; }
} 
```

然后在您看来，使用`Html.CheckBoxFor(m=> m.IsActive)`

# c++ - 此模板代码不会编译。有任何想法吗？

> ID：11571512
> 
> 赞同：-2
> 
> 时间：2012-07-20T01:06:17.317
> 
> 标签：c++, templates

我从 rhalbersma 获得了这段代码，但它在 VC 2010 中无法编译。我不知道我做错了什么。

```
template<typename Derived>
struct enable_crtp
{
private:
    // typedefs

    typedef enable_crtp Base;

public:
    // casting "down" the inheritance hierarchy
    Derived const* self() const
    {                   
        return static_cast<Derived const*>(this);
    }

    // write the non-const version in terms of the const version
    // Effective C++ 3rd ed., Item 3 (p. 24-25)
    Derived* self()
    {
        return const_cast<Derived*>(static_cast<Base const*>(this)->self());
    }      

protected:
    // disable deletion of Derived* through Base* 
    // enable deletion of Base* through Derived*
    ~enable_crtp()
    {
        // no-op
    }
};

template<typename FX>
class FooInterface
    :
    private enable_crtp< FX >
{
public:
    // interface
    void foo() { self()->do_foo(); }
};

class FooImpl
    :
    public FooInterface< FooImpl > 
{
private:
    // implementation
    friend class FooInterface< FooImpl > ;
    void do_foo() { std::cout << "Foo\n"; }
};

class AnotherFooImpl
    :
    public FooInterface< AnotherFooImpl > 
{
private:
    // implementation
    friend class FooInterface< AnotherFooImpl >;
    void do_foo() { std::cout << "AnotherFoo\n"; }
};

template<template<typename> class F, int X>
class BarInterface
    :
    private enable_crtp< F<X> >
{
// interface
void bar() { self()->do_bar(); }    
};

template< int X >
class BarImpl
    :
    public BarInterface< BarImpl, X > 
{
private:
    // implementation
    friend class BarInterface< ::BarImpl, X >;
    void do_bar() { std::cout << X << "\n"; }    
};

int main()
{
    FooImpl f1;         
    AnotherFooImpl f2;

    BarImpl< 1 > b1;
    BarImpl< 2 > b2;

    f1.foo();
    f2.foo();
    b1.bar();
    b2.bar();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T01:54:15.503

抱歉，我为 GCC-4.4 重新制作了这段代码，无法检查 VC 2010。错误：

1.  模板 BarInterface 中的模板类声明错误 - 替换`typename`为`int`： `template<template<int> class F, int X> class BarInterface`

2.  将 public 设置为`foo()`和`bar()`方法： `public: void xxx() { self()->do_xxx(); }`

3.  `enable_crtp<FX>`为类中的基类设置 public`BarInterface`和`FooInterface`： `public enable_crtp< FX >`
4.  在和方法中添加调用`self()`方法的范围规范： `foo()``bar()``void xxx() { enable_crtp<FX>::self()->do_xxx(); }`

最后我得到了工作代码：

```
template<typename Derived>
struct enable_crtp
{
private:
// typedefs

    typedef enable_crtp Base;

public:
    // casting "down" the inheritance hierarchy
    Derived const* self() const
    {                   
        return static_cast<Derived const*>(this);
    }

    // write the non-const version in terms of the const version
    // Effective C++ 3rd ed., Item 3 (p. 24-25)
    Derived* self()
    {
        return const_cast<Derived*>(static_cast<Base const*>(this)->self());
    }      

protected:
    // disable deletion of Derived* through Base* 
    // enable deletion of Base* through Derived*
    ~enable_crtp()
    {
        // no-op
    }
};

template<typename FX>
class FooInterface
    :
    public enable_crtp< FX >
{
public:
    // interface
    void foo() { enable_crtp<FX>::self()->do_foo(); }
};

class FooImpl
    :
    public FooInterface< FooImpl > 
{
private:
    // implementation
    friend class FooInterface< FooImpl > ;
    void do_foo() { std::cout << "Foo\n"; }
};

class AnotherFooImpl
    :
    public FooInterface< AnotherFooImpl > 
{
private:
    // implementation
    friend class FooInterface< AnotherFooImpl >;
    void do_foo() { std::cout << "AnotherFoo\n"; }
};

template<template<int> class F, int X>
class BarInterface
    :
    public enable_crtp< F<X> >
{
public:
// interface
void bar() { enable_crtp< F<X> >::self()->do_bar(); }    
};

template< int X >
class BarImpl
    :
    public BarInterface< BarImpl, X > 
{
private:
    // implementation
    friend class BarInterface< ::BarImpl, X >;
    void do_bar() const { std::cout << X << "\n"; }    
};

int main()
{
    FooImpl f1;         
    AnotherFooImpl f2;

    BarImpl< 1 > b1;
    BarImpl< 2 > b2;

    f1.foo();
    f2.foo();
    b1.bar();
    b2.bar();

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T01:52:03.570

```
template<template<typename> class F, int X>
class BarInterface
: 
private enable_crtp< F<X> >
{
// interface
void bar() { self()->do_bar(); }    
}; 
```

我猜

```
 template<template<int > class F, int X>
class BarInterface
: 
private enable_crtp< F<X> >
{
// interface
void bar() { self()->do_bar(); }    
}; 
```

那么你需要修复两个关于访问私有成员函数的错误

```
template<typename Derived>
struct enable_crtp
{
private:
    // typedefs

    typedef enable_crtp Base;

public:
    // casting "down" the inheritance hierarchy
    Derived const* self() const
    {                   
        return static_cast<Derived const*>(this);
    }

    // write the non-const version in terms of the const version
    // Effective C++ 3rd ed., Item 3 (p. 24-25)
    Derived* self()
    {
        return const_cast<Derived*>(static_cast<Base const*>(this)->self());
    }      

protected:
    // disable deletion of Derived* through Base* 
    // enable deletion of Base* through Derived*
    ~enable_crtp()
    {
        // no-op
    }
};

template<typename FX>
class FooInterface
    :
    private enable_crtp< FX >
{
public:
    // interface
    void foo() { self()->do_foo(); }
};

class FooImpl
    :
    public FooInterface< FooImpl > 
{
private:
    // implementation
    friend class FooInterface< FooImpl > ;
    void do_foo() { std::cout << "Foo\n"; }
};

class AnotherFooImpl
    :
    public FooInterface< AnotherFooImpl > 
{
private:
    // implementation
    friend class FooInterface< AnotherFooImpl >;
    void do_foo() { std::cout << "AnotherFoo\n"; }
};

template<template<int > class F, int X>
class BarInterface
    :
    private enable_crtp< F<X> >
{
    // interface
public: void bar() { self()->do_bar(); }    
};

template< int X >
class BarImpl
    :
    public BarInterface< BarImpl, X > 
{
private:
    // implementation
    friend class BarInterface< ::BarImpl, X >;
    void do_bar() { std::cout << X << "\n"; }    
};

int main()
{
    FooImpl f1;         
    AnotherFooImpl f2;

    BarImpl< 1 > b1;
    BarImpl< 2 > b2;

    f1.foo();
    f2.foo();
    b1.bar();
    b2.bar();

    return 0;
} 
```

# c - strange error during cast to __m128i

> ID：11571514
> 
> 赞同：5
> 
> 时间：2012-07-20T01:06:26.770
> 
> 标签：c, sse, sse2

I'm trying to cast unsigned short array to `__m128i`:

```
const unsigned short x[] = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15};
const unsigned short y[] = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15};

__m128i n = *(__m128i*) &y[0];
__m128i m = *(__m128i*) &x[0]; 
```

First casting work fine, but the second one - not. I've got:

```
Unhandled exception at 0x013839ee in sse2_test.exe: 0xC0000005: Access violation reading location 0xffffffff. 
```

What's wrong? Can somebody help me?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-20T01:08:54.777

注意你的数据对齐。

当您取消引用某个`__m128i*`或任何其他 SSE 类型时，指针需要对齐到 16 个字节。但是，`x`并`y`不能保证对齐到 16 个字节。

强制对齐取决于编译器。

**视觉 C++**

```
__declspec(align(16)) const unsigned short x[] = ... 
```

**海合会**

```
const unsigned short x[] __attribute__((aligned(16))) = ... 
```

* * *

或者，您可以使用未对齐的负载（尽管可能会降低性能）：

```
__m128i n = __mm_loadu_si128((__m128i*) &y[0]);
__m128i m = __mm_loadu_si128((__m128i*) &x[0]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T06:55:14.577

你不应该盲目地将一种指针类型转换为另一种，因为 Mystical 说你应该预料到对齐问题。C11 具有`_Alignas`并且其他编译器具有对 C99 或 C89 的扩展来执行相同的操作。

官方的，我发现最清楚的，用 C99 处理这种事情的方法是创建一个`union`：

```
union combine {
  unsigned short x[sizeof(__m128i)/sizeof(unsigned short)];
  __m128i y;
}

union combine X = { .x = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15} }; 
```

这样的 a`union`保证对其所有成员都正确对齐。现在您可以轻松使用`X.y`，甚至不必通过指针引用。

# node.js - 来自 Socket.io 的 s3_pkt.c 中的 HTTPS 错误“数据长度太长”

> ID：11571517
> 
> 赞同：39
> 
> 时间：2012-07-20T01:06:47.867
> 
> 标签：node.js, ssl, https, socket.io, ssl-certificate

我们正在尝试让 Socket.io flashsockets 通过 HTTPS/WSS 在 Internet Explorer 9 中工作。flashsockets 通过 HTTP 工作，但是 HTTPS 给我们带来了问题。我们使用的是 socket.io 0.8.7 版和 socket.io-client 0.9.1-1 版。

我们正在通过端口 443 上的 SSL 运行我们的 websocket 服务器。我们已经在正确的位置指定了 WebsocketMainInsecure.swf 文件（这些是跨域 ws 请求）的位置，并且我们正在将文件加载到 swfobject embed通过 HTTPS。

我们在安全组中为 EC2 实例打开了端口 843，并且跨源策略文件已成功通过 HTTP 呈现。它似乎没有通过 HTTPS 呈现（Chrome 引发 SSL 连接错误）。

我们尝试了两个版本的 WebsocketMainInsecure.swf 文件。第一个是 Socket.io 提供的文件，它是由 WebsocketMainInsecure.as 构建的，不包含该行

```
Security.allowInsecureDomain("*"); 
```

`SCRIPT16389: Unspecified error.`这会在该行引发错误`WebSocket.__flash.setCallerUrl(location.href)`。

我们认为这是因为 SWF 文件不允许 HTTPS 请求，因此我们将 WebSocketMainInsecure.swf 文件替换为在此 repo 中找到的文件：[https](https://github.com/gimite/web-socket-js) ://github.com/gimite/web-socket-js ，因为它包含

```
Security.allowInsecureDomain("*"); 
```

动作脚本代码中的行。当我们使用它时，我们看到 flashsocket 连接在无限循环中不断断开和重新连接。我们在 Transport 原型的 onSocketError 函数中将错误跟踪到 socket.io 库中的 transport.js 文件。它抛出错误：

```
[Error: 139662382290912:error:1408F092:SSL routines:SSL3_GET_RECORD:data length too long:s3_pkt.c:503:] 
```

我们甚至尝试将 socket.io 和 socket.io-client 都更新到 0.9.6 版本，但仍然出现`Access is denied`错误。

这个错误一直很难调试，现在我们不知道如何让 flashsockets 工作。我们想知道这是否与使用旧版本的 socket.io 有关，或者我们的策略文件服务器不接受 HTTPS 请求，或者甚至可能是来自网络的 WebSocketMainInsecure.swf 文件的方式- socket-js github repo 是相对于 socket.io-client 的期望构建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:58:56.040

我不确定天气是否有效。但这是我的想法/建议：

1.  想法：我假设您（可能）试图访问一个太长的 URL。如果数据经常通过 GET-Parameters 传输，就会发生这种情况。URL 的官方限制低于 512 字节。

详细信息：HTTP 规范说一个协议行最多可以是 512 字节。如果更长，服务器可能会拒绝请求或可能无法处理请求。HTTP 中带有 GET-requet 的第一行类似于“GET /path/to?param1=data1¶m2=data2&... HTTP/1.1”，它需要容纳 512 个字节。对于 POST 请求，没有这样的限制..

但是，您的错误似乎源于某些 SSL 实现（openSSL？）：在第 503 行引用 s3_pkt.c（我在这里找到了这样的文件：[http ://www.opensource.apple.com/source/OpenSSL/OpenSSL- 7.1/openssl/ssl/s3_pkt.c](http://www.opensource.apple.com/source/OpenSSL/OpenSSL-7.1/openssl/ssl/s3_pkt.c)）但似乎有所不同；我不知道细节，只是推测：我可以认为 openSSL 实现对长 GET-Requests 的支持有限（因为它们不符合 HTTP）并且只是以这种方式拒绝它们......

我现在看到了这些可能性： 1\. 解决方案：使用 POST 而不是 GET-Requests 来传输更长的数据集。看看这是否有效... 2\. 尝试在使用的服务器上替换您的 openssl-installation 或 libopenssl；它可能损坏或过时？3\. 尝试向 openssl 开发者寻求帮助...

希望有帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T17:08:27.157

尝试使用 SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER 构建 OpenSSL（来自 OpenSSL 邮件列表的 Steven Henson 和 Jaaron Anderson）。

# haskell - 将一个模块具体化为一条记录

> ID：11571520
> 
> 赞同：10
> 
> 时间：2012-07-20T01:07:03.070
> 
> 标签：haskell, module, template-haskell, ghc-api

假设我有一个任意模块

```
module Foo where
foo :: Moo -> Goo
bar :: Car -> Far
baz :: Can -> Haz 
```

其中`foo`、`bar`和`baz`正确实现等。

我想将此模块具体化为自动生成的数据类型和相应的对象：

```
import Foo (Moo, Goo, Car, Far, Can, Haz)
import qualified Foo

data FooModule = Foo
  { foo :: Moo -> Goo
  , bar :: Car -> Far
  , baz :: Can -> Haz
  }

_Foo_ = Foo
  { foo = Foo.foo
  , bar = Foo.bar
  , baz = Foo.baz
  } 
```

名称必须与原始模块完全相同。

我可以手动完成，但这非常乏味，所以我想编写一些代码来为我执行此任务。

我不太确定如何处理这样的任务。模板 Haskell 是否提供了检查模块的方法？我应该挂钩一些 GHC api 吗？或者我是否也可以使用更特别的方法，例如刮黑线鳕页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T12:35:53.310

（这是针对 GHC-7.4.2 的；由于 中的一些更改，它可能无法使用 HEAD 或 7.6 编译`Outputable`）。我没有找到任何东西来检查 TH 中的模块。

```
{-# LANGUAGE NoMonomorphismRestriction #-}
{-# OPTIONS -Wall #-}
import GHC
import GHC.Paths -- ghc-paths package
import Outputable
import GhcMonad

main :: IO ()
main = runGhc (Just libdir) $ goModule "Data.Map"

goModule :: GhcMonad m => String -> m ()
goModule modStr = do
  df <- getSessionDynFlags
  _ <- setSessionDynFlags df  
  -- ^ Don't know if this is the correct way, but it works for this purpose

  setContext [IIDecl (simpleImportDecl (mkModuleName modStr))]
  infos <- mapM getInfo =<< getNamesInScope 
  let ids = onlyIDs infos
  liftIO . putStrLn . showSDoc . render $ ids 

onlyIDs :: [Maybe (TyThing, Fixity, [Instance])] -> [Id]
onlyIDs infos = [ i | Just (AnId i, _, _) <- infos ] 

render :: [Id] -> SDoc
render ids = mkFields ids $$ text "------------" $$ mkInits ids 

mkFields :: [Id] -> SDoc
mkFields = vcat . map (\i ->
  text "," <+> pprUnqual i <+> text "::" <+> ppr (idType i))

mkInits :: [Id] -> SDoc
mkInits = vcat . map (\i ->
  text "," <+> pprUnqual i <+> text "=" <+> ppr i)

-- * Helpers

withUnqual :: SDoc -> SDoc
withUnqual  = withPprStyle (mkUserStyle neverQualify AllTheWay)

pprUnqual :: Outputable a => a -> SDoc
pprUnqual = withUnqual . ppr 
```

# c# - 在C#中清除串口接收缓冲区

> ID：11571522
> 
> 赞同：13
> 
> 时间：2012-07-20T01:07:27.830
> 
> 标签：c#, serial-port

只是想知道我们如何在 C# 中清除我的串口的接收缓冲区。似乎接收缓冲区中的数据只是不断累积。例如，传入数据的流向是：[Data A]、[Data B]、[Data C]。我想要的数据只是[Data C]。我正在考虑这样做，当我收到 [Data A] 和 [Data B] 时，我会做一个清除缓冲区。仅当收到 [Data C] 时，我才继续处理。这是在 C# 中执行此操作的方法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-20T01:26:38.963

如果您使用的是，`System.IO.Ports.SerialPort`那么您可以使用两种方法：

`DiscardInBuffer()`并`DiscardOutBuffer()`刷新缓冲区。

如果您正在从串行端口读取数据：

```
private void comPort_DataReceived(object sender, SerialDataReceivedEventArgs e)
{
    if (!this.Open) return; // We can't receive data if the port has already been closed.  This prevents IO Errors from being half way through receiving data when the port is closed.
    string line = String.empty;
    try
    {
        line = _SerialPort.ReadLine();
        line = line.Trim();
       //process your data if it is "DATA C", otherwise ignore
    }
    catch (IOException ex)
    {
        //process any errors
    }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-20T11:09:33.370

用于`port.DiscardOutBuffer(); and port.DiscardInBuffer();`清除串口缓冲区

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-09-17T04:19:08.233

有两个缓冲区。一个缓冲区与串行端口相关联，另一个与其基本流相关联，来自端口缓冲区的数据流入其中。DiscardIn Buffer() 只是从被丢弃的串行端口缓冲区中获取数据。您将读取的基本流中仍有数据。所以，除了使用 DiscardInBuffer 之外，还要使用 SP.BaseStream.Flush()。现在你有一个干净的石板！如果您没有获得大量数据，只需删除基本流：SP.BaseStream.Dispose()。

由于您仍在收到数据接收事件，因此您可以阅读它而不会让自己处于丢失数据的危险之中。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-12-29T11:45:49.557

你可以使用喜欢

```
port.DiscardOutBuffer();
port.DiscardInBuffer();
port.Close();
port.DataReceived -= new SerialDataReceivedEventHandler(onDataReceived);
port = null; 
```

# c# - 将 MVC4 站点部署到 Azure 会导致 ExtensionAttribute 异常

> ID：11571524
> 
> 赞同：7
> 
> 时间：2012-07-20T01:08:00.797
> 
> 标签：c#, asp.net-mvc, visual-studio, azure

在观看了 Scott Gu 在 AspConf 的主题演讲后，我对尝试使用 MVC4 的 Windows Azure 网站感到兴奋。在将现有 MVC 应用程序重新配置为面向 .NET Framework 4.0 而不是 4.5 后，我尝试部署它，但出现以下错误。

> 无法从程序集“mscorlib，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089”加载类型“System.Runtime.CompilerServices.ExtensionAttribute”。

由于我已经添加了几个 NuGet 包，我认为它可能与 Ninject 有关，所以我创建了一个新的 MVC 项目，目标是没有 NuGet 包的 .NET 4.0 框架，并使用 Visual Studio 2012 RC 发布选项部署到 Windows Azure（对-单击 Web 项目），我仍然收到此错误。

有谁知道发生了什么或如何解决这个问题？提前致谢。

包括完整的堆栈跟踪：

> [TypeLoadException：无法从程序集“mscorlib，版本=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”加载类型“System.Runtime.CompilerServices.ExtensionAttribute”。]
> System.ModuleHandle.ResolveType（RuntimeModule 模块，Int32 typeToken，IntPtr * typeInstArgs，Int32 typeInstCount，IntPtr* methodInstArgs，Int32 methodInstCount，ObjectHandleOnStack 类型）+0
> System.ModuleHandle.ResolveTypeHandleInternal（RuntimeModule 模块，Int32 typeToken，RuntimeTypeHandle[] typeInstantiationContext，RuntimeTypeHandle[] methodInstantiationContext）+180
> System.Reflection.RuntimeModule 。 Int32 metadataToken, Type[] genericTypeArguments, Type[] genericMethodArguments) +192
> System.Reflection.CustomAttribute.FilterCustomAttributeRecord（CustomAttributeRecord caRecord，MetadataImport 范围，Assembly& lastAptcaOkAssembly，RuntimeModule decoratedModule，MetadataToken decoratedToken，RuntimeType attributeFilterType，Boolean mustBeInheritable，Object[] 属性，IListderivedAttributes，RuntimeType& attributeType，IRuntimeMethodInfo&ctor，Boolean&ctorHasParameters，Boolean& isVarArg) + 115
> System.Reflection.CustomAttribute.GetCustomAttributes（RuntimeModule decoratedModule，Int32 decoratedMetadataToken，Int32 pcaCount，RuntimeType attributeFilterType，布尔 mustBeInheritable，IList derivedAttributes，布尔 isDecoratedTargetSecurityTransparent）+426 System.Reflection.CustomAttribute.GetCustomAttributes（RuntimeAssembly 程序集，运行时类型 caType) +103
> System.Reflection.RuntimeAssembly.GetCustomAttributes(Type attributeType, Boolean inherit) +64
> WebActivator.AssemblyExtensions.GetActivationAttributes(Assembly assembly) +64 WebActivator.ActivationManager.RunActivationMethods() +143 WebActivator.ActivationManager.Run() +22
> 
> [InvalidOperationException：在类型 WebActivator.ActivationManager 上运行的预应用程序启动初始化方法引发异常，并显示以下错误消息：无法从程序集 'mscorlib，版本 = 4.0.0.0，文化加载类型'System.Runtime.CompilerServices.ExtensionAttribute' =中性，PublicKeyToken=b77a5c561934e089'..]
> System.Web.Compilation.BuildManager.InvokePreStartInitMethods(ICollection`1 方法) +423
> System.Web.Compilation.BuildManager.CallPreStartInitMethods() +306
> System.Web.Hosting.HostingEnvironment.Initialize( ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, 异常 appDomainCreationException) +677
> 
> [HttpException (0x80004005)：在类型 WebActivator.ActivationManager 上运行的预应用程序启动初始化方法引发异常，并显示以下错误消息：无法从程序集“mscorlib”加载类型“System.Runtime.CompilerServices.ExtensionAttribute”，版本 = 4.0。 0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'..]
> System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9090044 System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +97 System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext 上下文）+256

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T03:34:07.573

如果我选择设置 | 在发布 Web 应用程序向导中 在目的地删除其他文件，这个问题就消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:22:27.420

在我看来，.NET FX 引用有问题。

根据 ASP.NET MVC 4 发行说明，Entity Framework nuget 包和从 .NET 4.5 降级存在问题 --> .NET 4。 [http://www.asp.net/whitepapers/mvc4-release-notes# _Toc303253815](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253815)

> 将 ASP.NET MVC 4 项目从 4.5 更改为目标 4.0 不会更新 EntityFramework 程序集引用：如果在目标 4.5 之后将 ASP.NET MVC 4 项目更改为目标 4.0，对 EntityFramework 程序集的引用仍将指向 4.5 版本. 要解决此问题，请卸载并重新安装 EntityFramework NuGet 包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T22:48:53.893

另一种可能的解决方案（其他有相同的例外）可能是您的构建服务器没有 .net 4.0 参考程序集，在安装 .net 4.5 后，您需要从您的开发框中复制它们。

这些通常是这样的：

C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0

有关更多详细信息，请参阅[Marc 的博客文章](http://marcgravell.blogspot.co.nz/2012/09/iterator-blocks-missing-methods-and-net.html)

# asp.net - 如何增加 Ajax TabContainer 控件中选项卡的高度和宽度？

> ID：11571525
> 
> 赞同：1
> 
> 时间：2012-07-20T01:08:17.677
> 
> 标签：asp.net, css

这是我第一次使用 Ajax Toolkit for ASP.NET。我正在使用 TabContainer，这是一个非常棒的控件。我遵循了 AJAX 工具包网站上的描述，除了一些样式问题外，一切都对我很好。我有 TabContainer 的以下 CSS 样式。我现在在选项卡中遇到问题。我想在标签本身的标题或标题之外添加一个小图标或图像。我这样做了，但现在文本下降了，并且没有完全显示出来，所以读者无法阅读。**那你能帮我修一下吗？**

CSS 样式：

```
/* CSS Style of the Ajax TabContainer */
.ajax__myTab .ajax__tab_header { font-family: verdana; font-size: 16px; border-bottom: solid 2px #aaaaaa } 
.ajax__myTab .ajax__tab_outer { padding-right: 2px; height: 20px; background-color: #C0C0C0; margin-right: 1px; border-right: solid 2px #666666; border-top: solid 1px #999999 } 
.ajax__myTab .ajax__tab_inner { padding-left: 3px; background-color: #C0C0C0; }
 .ajax__myTab .ajax__tab_tab { height: 13px; padding: 4px; margin: 0; } 
 .ajax__myTab .ajax__tab_hover .ajax__tab_outer { background-color: #cccccc }
  .ajax__myTab .ajax__tab_hover .ajax__tab_inner { background-color: #cccccc }
   .ajax__myTab .ajax__tab_hover .ajax__tab_tab { background-color:Green; } 
   .ajax__myTab .ajax__tab_active .ajax__tab_outer { background-color: #fff; border-left: solid 1px #999999; }
    .ajax__myTab .ajax__tab_active .ajax__tab_inner { background-color:#fff; } 
    .ajax__myTab .ajax__tab_active .ajax__tab_tab { }
     .ajax__myTab .ajax__tab_body { font-family: verdana; font-size: 11pt; border: 2px solid #999999; padding: 6px; background-color: #ffffff; } 
```

抱歉，由于我的积分太少，我无法上传快照。

**更新：**

这是 ASP.NET 代码：

```
<%--TabContainer Control--%>
    <ajaxToolkit:TabContainer ID="LibraryTabs" runat="server" CssClass="ajax__myTab" OnDemand="true" AutoPostBack="false" 
                                TabStripPlacement="Top" ScrollBars="None" UseVerticalStripPlacement="false">
        <ajaxToolkit:TabPanel ID="ImagesGallery" runat="server" HeaderText="Images Gallery">
        <HeaderTemplate><img src="images/New/image.png" style="height: 21px; width: 23px" /> Images Gallery</HeaderTemplate>
        <ContentTemplate>
            <p>
                <strong><img src="images/New/image.png" style="height: 21px; width: 23px" /> Images Gallery: </strong> <br />
                Here's a list of some images of safety events that take place inside the company. Besides that, there are some images of 
                some safety equipments or signs. If the image is not obvious to you, please save it on your PC and then open it to see it in its
                original size. 
            </p>
            <!-- Images Gallery -->
            <div id="gallery" class="ad-gallery">

                <div class="ad-image-wrapper">
                </div>

                <div class="ad-controls">
                </div>

                <div class="ad-nav">
                    <div class="ad-thumbs">
                        <ul class="ad-thumb-list">
                            <li>
                                <a href="images/safety images/fire protection.jpg">
                                    <img src="images/safety images/thumbs/fire protection.jpg" title="Fire Protection Training Course" class="image0">
                                </a>
                            </li>

                            <li>
                                <a href="images/safety images/safety equipment.jpg">
                                    <img src="images/safety images/thumbs/safety equipment.jpg" title="One of the safety equipments" class="image0">
                                </a>
                            </li>

                            <li>
                                <a href="images/safety images/lp poster.jpg">
                                    <img src="images/safety images/thumbs/lp poster.jpg" title="Safety Poster" class="image0">
                                </a>
                            </li>

                            <li>
                                <a href="images/safety images/lp poster 2.jpg">
                                    <img src="images/safety images/thumbs/lp poster 2.jpg" title="Safety Poster" class="image0">
                                </a>
                            </li>

                            <li>
                                <a href="images/safety images/lp poster 3.jpg">
                                    <img src="images/safety images/thumbs/lp poster 3.jpg" title="Safety Poster" class="image0">
                                </a>
                            </li>

                            <li>
                                <a href="images/safety images/lp poster 4.jpg">
                                    <img src="images/safety images/thumbs/lp poster 4.jpg" title="Safety Poster" class="image0">
                                </a>
                            </li>

                            <li>
                                <a href="images/safety images/worker.jpg">
                                    <img src="images/safety images/thumbs/worker.jpg" title="Safety at workplace" class="image0">
                                </a>
                            </li>

                            <li>
                                <a href="images/safety images/safety sign.jpg">
                                    <img src="images/safety images/thumbs/safety sign.jpg" title="One of the safety signs" class="image0">
                                </a>
                            </li>

                        </ul>
                    </div>
                </div>
            </div>
            <!-- End of Images Gallery -->
            </ContentTemplate>
        </ajaxToolkit:TabPanel>

        <ajaxToolkit:TabPanel ID="TabPanel1" runat="server" HeaderText="Images Gallery">
        <HeaderTemplate>Video Gallery</HeaderTemplate>
        <ContentTemplate>
            <p>
            <strong><img src="images/New/video.png" style="height: 21px; width: 23px" /> Video Gallery: </strong> <br />
            Here's a list of safety videos that show you the effects of driving out of the speed limit and so on.
            <center><b> Coming Soon </b></center>
            </p>
        </ContentTemplate>
        </ajaxToolkit:TabPanel>
</ajaxToolkit:TabContainer> 
```

**更新 2：** 另外，我尝试在 AjaxToolkit:TabPanel 中包含高度和宽度，但它对我不起作用。这真的很奇怪，我无法理解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T14:39:50.367

我实际上遇到了同样的问题并找到了这个解决方案，它需要将以下代码放在 stylesheet.css 中。

```
.ajax__tab_xp .ajax__tab_header .ajax__tab_tab 
{
    height: 24px !important;
} 
```

所以显然该属性需要标记为重要，这样我就能够增加标题高度，但是选项卡的主体会跳下来很多。这意味着标签面板的标题和正文之间存在明显的中断。

因此，如果选项卡标题的高度会发生变化，我不确定选项卡控件是否始终是最佳解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:16:12.640

您是否尝试过以下方式：

```
 <ajaxToolkit:TabContainer ID="mytabs" runat="server" >
            <ajaxToolkit:TabPanel runat="server" ID="tab1">
                <HeaderTemplate>
                    <div style="float: left;">
                        <img src="images/accept.png" /></div>
                    <div style="float: right; padding-left: 5px;">Accept</div>
                </HeaderTemplate>
                <ContentTemplate>some content for tab1</ContentTemplate>
            </ajaxToolkit:TabPanel>
            <ajaxToolkit:TabPanel runat="server" ID="tab2">
                <HeaderTemplate>
                    <div style="float: left;">
                        <img src="images/add.png" /></div>
                    <div style="float: right; padding-left: 5px;">Add</div>
                </HeaderTemplate>
                <ContentTemplate>some content for tab2</ContentTemplate>
            </ajaxToolkit:TabPanel>
        </ajaxToolkit:TabContainer> 
```

上面的代码很好地呈现：

![v](../Images/b260e58de0bc1fcdfd4aea8d52999c37.png)

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T08:02:36.233

像这样写`<ajaxtoolkit:tabcontainer runat="server" xmlns:ajaxtoolkit="#unknown"> OnClientActiveTabChanged="ClientFunction" Height="150px" Width="400px" ActiveTabIndex="1"
OnDemand="true"
AutoPostBack="false" TabStripPlacement="Top" CssClass="ajax__tab_xp" ScrollBars="None" UseVerticalStripPlacement="true" VerticalStripWidth="120px" > <ajaxtoolkit:tabpanel runat="server"> HeaderText="Signature and Bio" Enabled="true" ScrollBars="Auto"
OnDemandMode="Once" <contenttemplate> ... </contenttemplate> /> </ajaxtoolkit:tabpanel></ajaxtoolkit:tabcontainer>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-18T17:49:47.557

![在此处输入图像描述](../Images/2a7a60a651928e615a70ad7fe33a23b1.png)

这将改变 Ajax 选项卡背景颜色。您可以根据需要进行更改，通过将属性添加到“.divTab”

```
 .divTab
    {
        border-top-left-radius: 6px;
        border-top-right-radius: 6px;
        padding: 3px 10px 2px 10px;
    }

    .divTab:hover
    {
        color: #c8ccd0;
    }

    .MyTabStyle .ajax__tab_header
    {
        cursor: pointer;
        font-weight: bold;
        display: block;
    }
    .MyTabStyle .ajax__tab_header .ajax__tab_outer
    {
        border-color: #4597d1;
        color: #ffffff;
        margin-left: 1px;
        border: 1px solid black;
        background-color: #4597d1;
        border-top-left-radius: 6px;
        border-top-right-radius: 6px;
    }

    .MyTabStyle .ajax__tab_header .ajax__tab_outer1
    {
        border-color: #4597d1;
        color: #ffffff;
        padding-left: 2px;
        margin-right: 3px;
        border: 1px solid black;
        background-color: white;
    }
    .MyTabStyle .ajax__tab_header .ajax__tab_inner
    {
        border-color: #666;
        color: #ffffff;
    }
    .MyTabStyle .ajax__tab_hover .ajax__tab_outer
    {
        background-color: #2158a0;
    }
    .MyTabStyle .ajax__tab_hover .ajax__tab_inner
    {
        color: #ffffff;
    }
    .MyTabStyle .ajax__tab_active .ajax__tab_outer
    {
        border-bottom-color: #2b5f9a;
        background-color: #2158a0;
        color: #2158a0;
    }
    .MyTabStyle .ajax__tab_active .ajax__tab_inner
    {
        color: #ffffff;
        border-color: #333;
    }
    .MyTabStyle .ajax__tab_body
    {
        font-family: verdana,tahoma,helvetica;
        font-size: 10pt;
        background-color: #fff;
        border-top-width: 0;
        border: solid 1px #d7d7d7;
        border-top-color: #ffffff;
    }

    -------------------------------------------------------------------
     <asp:TabContainer ID="TabContainer1" runat="server" ActiveTabIndex="0" CssClass="MyTabStyle">
        <asp:TabPanel ID="TabPricing" runat="server" HeaderText="Pricing">
            <HeaderTemplate>
                <div class="divTab" style="background-color: #2b5f9a;">
                    <asp:Label ID="lblPricing" runat="server" Text="Pricing"></asp:Label></div>
            </HeaderTemplate>
            <ContentTemplate>
            </ContentTemplate>
        </asp:TabPanel>
        <asp:TabPanel ID="TabDesign" runat="server" HeaderText="Design Specs">
            <HeaderTemplate>
                <div class="divTab" style="background-color: #ac416c;">
                    <asp:Label ID="lblDesignSpecs" runat="server" Text="Design Specs"></asp:Label></div>
            </HeaderTemplate>
            <ContentTemplate>
            </ContentTemplate>
        </asp:TabPanel>
        <asp:TabPanel ID="Tab_Fab" runat="server" HeaderText="Fab Specs">
            <HeaderTemplate>
                <div class="divTab" style="background-color: #979444;">
                    <asp:Label ID="Label1" runat="server" Text="Fab Specs"></asp:Label></div>
            </HeaderTemplate>
            <ContentTemplate>
            </ContentTemplate>
        </asp:TabPanel>
    </asp:TabContainer>

  [1]: http://i.stack.imgur.com/04quM.png 
```

# php - 如何按类型对该数组进行排序（首先是目录，然后是文件）

> ID：11571526
> 
> 赞同：2
> 
> 时间：2012-07-20T01:08:24.383
> 
> 标签：php, arrays, sorting, file-type, alphabetical

我想知道如何对这样的数组进行排序：

```
$array[] = Array (
    'name' => '/home/gtsvetan/public_html/presta/cms.php'
    'type' => 'text/x-php'
    'size' => 1128
    'lastmod'  => 1339984800
);
$array[] = Array (
    'name' => '/home/gtsvetan/public_html/presta/docs/'
    'type' => 'dir'
    'size' => 0
    'lastmod' => 1329253246
); 
```

我想先按类型（首先是文件夹，然后是文件）然后按字母顺序对其进行排序。但我不知道如何排序。

最好的问候，乔治！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T01:10:41.123

你可以使用[usort()](http://php.net/manual/en/function.usort.php)

在比较功能中，您对名称和类型进行两次比较 - 如下所示：

```
function compare_f($a,$b) {

 if($a['type']=='dir'&&$b['type']!='dir') return 1;
 if($a['type']!='dir'&&$b['type']=='dir') return -1;
 if(substr($a['name'],-1,1)=='/') $a['name']=substr($a['name'],0,-1);
 if(substr($b['name'],-1,1)=='/') $b['name']=substr($b['name'],0,-1);
 $af_array=explode('/',$a['name']);
 $a_name=$af_array[count($af_array)-1];
 $bf_array=explode('/',$b['name']);
 $b_name=$bf_array[count($bf_array)-1];

 if($a_name>$b_name) 
    return 1;
  return -1;

}

usort($array,'compare_f'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T01:19:01.750

你可以做这样的事情..

```
$dir = array();
$file = array();

$dir = array();
$file = array();

foreach($array as $b=>$v) {
if($v['type'] == "dir") {
    $dir[] = $v;
} else {
    $file[] = $v;
}
}

$combined = array_merge($dir, $file); 
```

随意调整它。

# java - 如何对android应用程序进行基准测试？

> ID：11571527
> 
> 赞同：0
> 
> 时间：2012-07-20T01:08:26.163
> 
> 标签：java, android, benchmarking

在工作中我使用 Ubuntu，在家里我使用 Windows 7。我想知道如何在 Ubuntu 和 Windows 7 上对我的 android 应用程序进行基准测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T01:09:07.543

您可以使用 DDMS 和 Systrace 来分解您的应用程序正在做什么以及持续了多长时间。

至于“基准测试”，你是什么意思？你想看看在你的应用中做某事需要多长时间吗？确保您以尽可能最快的方式而不是在某个时间窗口内做事通常更有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T21:05:39.750

我编写了一个代码来专门对我想要的代码的特定部分进行基准测试。你可以在这里找到它：http: [//farzad.devbro.com/android_benchmark/Devbro_Benchmark.java](http://farzad.devbro.com/android_benchmark/Devbro_Benchmark.java)

这是要使用的代码示例：

```
Devbro_Benchmark.markStart("Label2"); //mark a begining
for(int i=0;i<1000;i++)
{
    //you can create multiple markers at once. If you use the same marker name
    //it will simply add up the times for you
    Devbro_Benchmark.markStart("Label1");
    //some random code
    Devbro_Benchmark.markEnd("Label");
}
Devbro_Benchmark.markEnd("Label2"); // mark an ending

//once you are done with your markers you can display an extensive report which will be
//shown using the Log.d
Devbro_Benchmark.print_report();

//once you are done you can reset before redoing it.
Devbro_Benchmark.reset(); 
```

# google-app-engine - Phonegap 远程服务器后安全

> ID：11571535
> 
> 赞同：1
> 
> 时间：2012-07-20T01:10:09.650
> 
> 标签：google-app-engine, cordova

我有一个 phonegap 应用程序，它使用 jquery 发布到远程服务器，在 Google App Engine 上运行。

确保只有我的 phonegap 应用程序可以发布到此远程服务器的最佳方法是什么？我一直在网上搜索答案，但找不到任何具体的答案。

通常，我相信您会检查引荐来源网址以确保请求来自列入白名单的域，但在这种情况下，没有域，因为它是 phonegap 应用程序。

这个问题很相似，但没有得到解答： [Security issues with phonegap remote server access](https://stackoverflow.com/questions/10756947/security-issues-with-phonegap-remote-server-access)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T07:31:28.183

你不能。您的应用程序可以发出的任何请求（包括您希望在应用程序中嵌入的任何身份验证凭据）都可以由第三方生成。你能做的最多的就是混淆，通过在你的应用程序中嵌入秘密，但聪明的用户可以提取这些。

更好的选择是对用户进行身份验证，而不是对应用程序进行身份验证。

# sugarcrm - SugarCRM 在详细信息视图中添加其他详细信息信息图标

> ID：11571538
> 
> 赞同：2
> 
> 时间：2012-07-20T01:10:30.157
> 
> 标签：sugarcrm

在 SugarCRM 中，一些模块（如“呼叫”）在列表视图中有一个“i”（附加详细信息）图标，显示有关该记录的一些附加详细信息。

我想为其他模块显示相同的类型，例如客户访问以及记录的一些自定义详细信息。任何提示或指导都会有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T04:59:12.770

1) 在您的元数据文件夹中创建一个文件`{MODULENAME}/metadata/additionalDetails.php`。您必须找到模块的正确位置。

*   自定义/模块/MODULENAME/元数据/
*   自定义/modulebuilder/packages/PACKAGENAME/modules/MODULENAME/metadata/
*   ETC...

2）并创建一个类似这样的函数。在所有地方用实际的模块名称替换`{MODULENAME}`和。`{MODULE_BEAN_NAME}`

```
function additionalDetails{MODULE_BEAN_NAME}($fields) {
    static $mod_strings;
    if(empty($mod_strings)) {
        global $current_language;
        $mod_strings = return_module_language($current_language, '{MODULENAME}');
    }

    $overlib_string = '';

    if(!empty($fields['NAME']))
        $overlib_string .= '<b>'. $mod_strings['LBL_NAME'] . '</b> ' . $fields['NAME'] . ' <br>';

    //Add whatever info you want to show up to $overlib_string

    $editLink = "index.php?action=EditView&module={MODULENAME}&record={$fields['ID']}";
    $viewLink = "index.php?action=DetailView&module={MODULENAME}&record={$fields['ID']}";

    return array(
        'fieldToAddTo' => 'NAME',
        'string' => $overlib_string,
        'editLink' => $editLink,
        'viewLink' => $viewLink
    );
} 
```

您必须`$overlib_string`使用您的数据（在 html 中）创建。如果您需要在模态框中编辑和查看链接，您也必须返回它们。 `$fields`是一个包含 db 记录的关联数组。

3)`i`图标应出现在模块列表视图中。

# php - 如何将多个目录结构的请求发送到一页？

> ID：11571544
> 
> 赞同：1
> 
> 时间：2012-07-20T01:11:39.970
> 
> 标签：php, url, url-rewriting

如何将多个目录结构的请求发送到一页？例如，我如何将请求发送到 somesite.com/users/new 并将请求发送到 somesite.com/users/delete 到 somesite.com/users/index.php 以便 index.php 页面可以看到原始 url 是什么. 我需要在没有重定向的情况下执行此操作。我知道这很容易实现，因为大量的 php 框架和 CMS 都具有该功能。（Wordpress、Codeigiter、TinyMVC 等等。）

我正在用 PHP 编程。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T01:27:33.100

您可能需要一些 AJAX 来执行异步获取请求以从 /users/delete 和 /users/new 从 index.php 检索数据

您也可以使用 JQuery 插件 (http://jquery.com/) 来简化 AJAX 调用

这是一个使用 JQuery $.get() 的 javascript 示例，它发出异步获取请求

```
<html>
<head>

...import jquery javascript plugin...

<script>

//executes init() function on page load
$(init);

function init(){
   //binds click event handlers on buttons where id = new and delete
   // click function exectutes createUser or deleteUser depending on the 
      button that has been clicked

   $('#new').click(function(){createUser();});
   $('#delete').click(function(){deleteUser();});
}

function createUser(){

   //submits a get request to users/new and alerts the data returned
   $.get('users/new',function(data){alert('user is created : '+data)});
}

function deleteUser(){
   //submits a get request to users/delete and alerts the data returned
   $.get('users/delete',function(data){alert('user is deleted : '+data)});
}

</script>

</head>

<body>

<input id='new' type='button' />
<input id='delete' type='button' />

</body>
</html> 
```

# java - 我可以在Java中获取子类名称吗

> ID：11571545
> 
> 赞同：2
> 
> 时间：2012-07-20T01:11:47.927
> 
> 标签：java

狗.java

```
public class Dog extends Animal {
.....

} 
```

* * *

动物.java

```
public class Animal {

   public static  String getName() {

       String callerClassName = ????; //How to get the class Dog, when I call from TestCase
       return "Animal";
   }
} 
```

当我对 Dog.getName() 使用 TestCase 类时，当我使用 Thread.currentThread().getStackTrace()[1].getClassName() 时如何获取类名 Dog 而不是 Animal

```
public class TestCase {
   public static  String getName(){

      return Dog.getName();
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T01:24:55.823

> **我可以在Java中获取子类名称吗**

不是你这样做的方式...

您的方法是静态的，不受继承。子类中定义的同名静态方法可以*隐藏*超类方法，但不会覆盖它们。隐藏的静态方法总是可以通过它的完全限定名称（即`Animal.getName()`）来引用。

当您调用`Dog.getName()`时，编译器只是`Animal.getName()`为您解析。

另请参阅：[SO：静态方法中的继承](https://stackoverflow.com/a/4987149/1212960)。

* * *

从另一个角度：

> **我可以在Java中获取子类名称吗**

假设您的方法更改为非静态的，请参阅[Wyzard 的响应](https://stackoverflow.com/a/11571625/1212960)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T01:25:17.110

对于非静态方法，您可以使用它`this.getClass()`来获取调用它的对象的具体类，但这不适用于静态方法。当您像这样调用继承的静态方法时，根本不涉及子类，因此我认为该信息不可用。

无论如何，这可能是设计问题的征兆。因为静态方法没有动态调度，所以要调用你必须在源代码中显式引用`getName()`的类。*当您必须已经*知道子类才能在其上调用该方法时，拥有一个返回子类名称的方法没有多大意义。`Dog``Dog`

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T01:25:22.370

不，除非您在类中提供静态`getName`方法，否则`Dog`这是不可能的。即使您调用`Dog.getName()`了静态方法 of `Animal`is ，毕竟它是在其中声明的，而不是 of `Dog`，因此调用者类*是* `Animal`and not `Dog`。

如果你想解决这个问题，这取决于你想要实现的目标，你可以：

1.  在你的类中声明一个静态`getName`方法。`Dog`
2.  使方法成为非静态的并将整个问题放在继承上，其中方法将显示不同的行为。将应用继承而不是隐藏。

你应该看看 [Overriding and Hiding Methods](http://docs.oracle.com/javase/tutorial/java/IandI/override.html)，它可能会有所帮助。*

# ios - Tab Bar Icon does not appear (what are the restrictions on these?)

> ID：11571551
> 
> 赞同：0
> 
> 时间：2012-07-20T01:12:44.790
> 
> 标签：ios, uitabbar, uitabbaritem

Well, this is no doubt silly, but I can't get my tab bar icon to show up.

Here is the code:

```
- (id) initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
// Misc stuff deleted
[self.nibBundle loadNibNamed:nibNameOrNil owner:self options:nibOptions];

if (self) {
    self.title = NSLocalizedString(@"Play Game", @"Play Game");
    self.tabBarItem.image = [UIImage imageNamed:@"GVC.png"];
}

[self awakeFromNib];
return self; 
```

}

Which, if I give it the name of a too-large icon, the system inserts a blue placeholder. So I think my code is fine (and it looks like everyone elses').

This is for iOS 5 and I have a non-retina display. **I have experimented with sizes, including the ideal 30 x 30 size**. By the way, all other icons & images are performing properly. The icons are listed in the plist under **Icon Files (iOS 5) -> Primary Icon -> Icon Files** and the names include .png If I change "Play Game" the app changes accordingly. **I've been using Inkscape to make the icons.**

So my questions are

> 1.  Any ideas generally? and,
> 2.  What are the restrictions on the tab bar icon?

I know size, I gather it must be b/w but have a hard time finding documentation that says so. Any limitations on name, must it be square or can it be rectangular, etc? I've read too that they must be used like an alpha mask but I'm not sure what that really means when I'm making the image.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:35:31.323

As I said, silly. I was not adding the icons to the project from within Xcode... Maybe this will help some other goof ball!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:30:06.383

check the file name. The device is case-sensitive and the simulator is not.

Also check the following post for additional info: [UITabBar images visible on simulator, disappear on the device](https://stackoverflow.com/questions/1934977/uitabbar-images-visible-on-simulator-disappear-on-the-device/14858190#14858190)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-20T08:45:32.563

I had the same problem and solved it like this.

For example, I have an app contains several tabs. One of them is CardViewController. The image is cards and the name of the tab is "Cards". I add these code into the CardViewController. Here you make sure that the image is set. After this change the image should show up.

```
required init?(coder aDecoder: NSCoder) {
    super.init(coder: aDecoder)

    // Initialize Tab Bar Item
    tabBarItem = UITabBarItem(title: "Cards", image: UIImage(named: "cards"), tag: 0)
} 
```

# sql - 在 Microsoft Access 2010 中显示与组合框选择对应的文本

> ID：11571556
> 
> 赞同：1
> 
> 时间：2012-07-20T01:14:16.353
> 
> 标签：sql, ms-access, combobox, vba

我有一个联系表格，表格中的一个字段是 Contact_Type_ID。该字段是一个数字字段，也对应于另一个表中的文本字段（例如 1 = expatriate）。

当我循环浏览联系人时，他们的 Contact_Type_ID 是 1、2、3……而不是非营利组织、首席执行官、副总裁等。这是一个问题，因为人们不知道数字 3 的含义。

我想要一个只显示相应文本的组合框。

我无法让两列和 0;1 格式工作。我的直觉是，这是因为我正在从两个不同的表中提取信息。我可以生成正确的列表，但是当我循环浏览联系人以反映当前联系人的 [Contact_Type_ID] 时，主条目不会改变。

我无法编辑任何当前表，因为我应该将此应用程序应用于更大规模的数据库。

我还尝试为行源设置 SQL：

```
'Populate the connection combo box '
Dim typeSQL As String
typeSQL = "SELECT DISTINCT Contacts.[ContactTypeID], Contact_Types.[ContactType] " & _
    "FROM Contacts, Contact_Types " & _
    "ORDER BY Contact_Types.[ContactType];"
Me.cbo_ContactType.RowSource = typeSQL 
```

但是，我遇到了同样的问题：当我循环浏览联系人时，组合框不会更新。我不明白行源和控制源之间的区别。我觉得这种区别可能是关键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:27:19.420

假设我理解正确：

在组合框属性中，转到`Data`选项卡。设置`Control Source`为`Contact_Type_ID`。

这意味着当您浏览记录时，组合框将对应于您数据中的 Contact_Type_ID 字段。

设置`Row Source`为`"SELECT Contacts.[ContactTypeID], Contact_Types.[ContactType] FROM Contacts, Contact_Types ORDER BY Contact_Types.[ContactType];"`

Row Source 表示组合框可以访问的数据，这将帮助它确定如何显示控件源值。

设置`Bound Column`为`1`

设置`Limit to List`为`Yes`

现在在`Format`选项卡中。更改`Column Count`为`2`。接下来将 设置`column widths`为`0;1`您在问题中提到的。

现在尝试查看表单视图，它的行为应该符合您的预期。

如果它不起作用，请使用[这些说明创建一个新控件。](http://office.microsoft.com/en-us/access-help/create-a-list-of-choices-by-using-a-list-box-or-combo-box-HA010113052.aspx#BMusewizard)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:35:34.010

据我了解您的问题，您有一个基于表格的联系人表单，`Contacts`并且该表格包含一个名为`Contact_Type_ID`or的字段`ContactTypeID`。您希望从表格中显示联系人类型的描述`Contact_Types`。

您不需要为您的组合连接表格，它应该非常简单。正如您所怀疑的那样，关键是`Control source`，它是将一个表与另一个表相关联的属性。

```
Control source : ContactTypeID '' or Contact_Type_ID, choose from the list
Row source : SELECT ContactTypeID, ContactType FROM Contact_Types ORDER BY ContactType
Bound column : 1
Column count : 2
Column widths : 0,2 
```

顺便说一句，您可以将表连接到一个组合中，并且仍然将第一列设置为 0，它仍然可以工作，这一切都在正确的设置中。

# jquery-ui - jquery-ui datepicker 多语言集成

> ID：11571557
> 
> 赞同：5
> 
> 时间：2012-07-20T01:14:22.390
> 
> 标签：jquery-ui, datepicker

我正在尝试将不同的 jquery-ui datepicker 选项组合到一个函数中。我可以让大部分脚本在语言之外工作。我拥有所有 i18n 文件，并且正在使用选择元素来更改值。但似乎没有任何效果。我做错了什么？

```
 <script>
  $(function() {
    $.datepicker.setDefaults( $.datepicker.regional[ "" ] );
    $( "#from" ).datepicker({
        defaultDate: "+4w",
        changeMonth: true,
        numberOfMonths: 3,
        showButtonPanel: true,
        showOn: "button",
        buttonImage: "../images/calendar.gif",
        buttonImageOnly: true,
        minDate:"+1d",
        dateFormat:"yy/mm/dd",
        showAnim:"bounce",
        onSelect: function( selectedDate ) {
    $( "#from" ).datepicker( $.datepicker.regional[ "en-GB" ] );
    $( "#locale" ).change(function() {
        $( "#from" ).datepicker( "option",
            $.datepicker.regional[ $( this ).val() ] );
          });
        }

    });
    $( "#to" ).datepicker({
        defaultDate: "+2w",
        changeMonth: true,
        numberOfMonths: 3,
        showButtonPanel: true,
        showOn: "button",
        buttonImage: "../images/calendar.gif",
        buttonImageOnly: true,
        minDate:"+1d",
        dateFormat:"yy/mm/dd",
        showAnim:"bounce",
        onSelect: function( selectedDate ) {
    $( "#to" ).datepicker( $.datepicker.regional[ "en-GB" ] );
    $( "#locale" ).change(function() {
        $( "#to" ).datepicker( "option",
            $.datepicker.regional[ $( this ).val() ] );
            });
        }
    });
 });
 </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T02:11:46.467

我已经尝试了我在下面编写的代码（从您的代码中采用）并且它有效。也许您忘记包含每种语言的 jquery javascript？我只包括了三种语言（例如法语）作为示例。此外，我还有触发语言的选择选项的更改事件，而不是触发 onSelect。

我还尝试了将其放入一个函数的版本，并且该版本有效，只是因为它触发了选择，因此必须先选择一个日期，然后才能开始工作，然后再选择一种语言。

第一个版本（在一个功能中有效，但在第一次选择日期之前不会以语言显示的问题）：

```
<html><head><title>Test1</title>

<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<link type="text/css" href="css/ui-lightness/jquery-ui-1.8.18.custom.css" rel="Stylesheet" />   
<script type="text/javascript" src="js/jquery-ui-1.8.18.custom.min.js"></script>
<script type="text/javascript" src="jquery.ui.datepicker-fr.js"></script>
<script type="text/javascript" src="jquery.ui.datepicker-ar.js"></script>
<script type="text/javascript" src="jquery.ui.datepicker-af.js"></script>
<script type="text/javascript" src="jquery.ui.datepicker-en-GB.js"></script>
</head><body>

<script type="text/javascript">
$(function() {
    $.datepicker.setDefaults( $.datepicker.regional[ "" ] );
    $( "#from" ).datepicker({
        defaultDate: "+4w",
        changeMonth: true,
        numberOfMonths: 3,
        showButtonPanel: true,
        showOn: "button",
        minDate:"+1d",
        dateFormat:"yy/mm/dd",
        showAnim:"bounce",
    onSelect: function( selectedDate ) {
        $( "#from" ).datepicker( $.datepicker.regional[ "en-GB" ] );
        $( "#locale" ).change(function() {
            $( "#from" ).datepicker( "option",
                    $.datepicker.regional[ $( this ).val() ] );
        });
        }
  });
});

</script>

<p>Date: <input type="text" id="from"/>&nbsp;
<select id="locale">
    <option value="af">Afrikaans</option>
    <option value="sq">Albanian (Gjuha shqipe)</option>
    <option value="ar-DZ">Algerian Arabic</option>
    <option value="ar">Arabic (&#8235;(&#1604;&#1593;&#1585;&#1576;&#1610;</option>
    <option value="hy">Armenian (&#1344;&#1377;&#1397;&#1381;&#1408;&#1381;&#1398;)</option>
    <option value="az">Azerbaijani (Az&#601;rbaycan dili)</option>
    <option value="eu">Basque (Euskara)</option>
    <option value="bs">Bosnian (Bosanski)</option>
    <option value="bg">Bulgarian (&#1073;&#1098;&#1083;&#1075;&#1072;&#1088;&#1089;&#1082;&#1080; &#1077;&#1079;&#1080;&#1082;)</option>
    <option value="ca">Catalan (Catal&agrave;)</option>
    <option value="zh-HK">Chinese Hong Kong (&#32321;&#39636;&#20013;&#25991;)</option>
    <option value="zh-CN">Chinese Simplified (&#31616;&#20307;&#20013;&#25991;)</option>
    <option value="zh-TW">Chinese Traditional (&#32321;&#39636;&#20013;&#25991;)</option>
    <option value="hr">Croatian (Hrvatski jezik)</option>
    <option value="cs">Czech (&#269;e&#353;tina)</option>
    <option value="da">Danish (Dansk)</option>
    <option value="nl-BE">Dutch (Belgium)</option>
    <option value="nl">Dutch (Nederlands)</option>
    <option value="en-AU">English/Australia</option>
    <option value="en-NZ">English/New Zealand</option>
    <option value="en-GB">English/UK</option>
    <option value="eo">Esperanto</option>
    <option value="et">Estonian (eesti keel)</option>
    <option value="fo">Faroese (f&oslash;royskt)</option>
    <option value="fa">Farsi/Persian (&#8235;(&#1601;&#1575;&#1585;&#1587;&#1740;</option>
    <option value="fi">Finnish (suomi)</option>
    <option value="fr" selected="selected">French (Fran&ccedil;ais)</option>
    <option value="fr-CH">French/Swiss (Fran&ccedil;ais de Suisse)</option>
    <option value="gl">Galician</option>
    <option value="ge">Georgian</option>
    <option value="de">German (Deutsch)</option>
    <option value="el">Greek (&#917;&#955;&#955;&#951;&#957;&#953;&#954;&#940;)</option>
    <option value="he">Hebrew (&#8235;(&#1506;&#1489;&#1512;&#1497;&#1514;</option>
    <option value="hi">Hindi (&#2361;&#2367;&#2306;&#2342;&#2368;)</option>
    <option value="hu">Hungarian (Magyar)</option>
    <option value="is">Icelandic (&Otilde;slenska)</option>
    <option value="id">Indonesian (Bahasa Indonesia)</option>
    <option value="it">Italian (Italiano)</option>
    <option value="ja">Japanese (&#26085;&#26412;&#35486;)</option>
    <option value="kk">Kazakhstan (Kazakh)</option>
    <option value="km">Khmer</option>
    <option value="ko">Korean (&#54620;&#44397;&#50612;)</option>
    <option value="lv">Latvian (Latvie&ouml;u Valoda)</option>
    <option value="lt">Lithuanian (lietuviu kalba)</option>
    <option value="lb">Luxembourgish</option>
    <option value="mk">Macedonian</option>
    <option value="ml">Malayalam</option>
    <option value="ms">Malaysian (Bahasa Malaysia)</option>
    <option value="no">Norwegian (Norsk)</option>
    <option value="pl">Polish (Polski)</option>
    <option value="pt">Portuguese (Portugu&ecirc;s)</option>
    <option value="pt-BR">Portuguese/Brazilian (Portugu&ecirc;s)</option>
    <option value="rm">Rhaeto-Romanic (Romansh)</option>
    <option value="ro">Romanian (Rom&acirc;n&#259;)</option>
    <option value="ru">Russian (&#1056;&#1091;&#1089;&#1089;&#1082;&#1080;&#1081;)</option>
    <option value="sr">Serbian (&#1089;&#1088;&#1087;&#1089;&#1082;&#1080; &#1112;&#1077;&#1079;&#1080;&#1082;)</option>
    <option value="sr-SR">Serbian (srpski jezik)</option>
    <option value="sk">Slovak (Slovencina)</option>
    <option value="sl">Slovenian (Slovenski Jezik)</option>
    <option value="es">Spanish (Espa&ntilde;ol)</option>
    <option value="sv">Swedish (Svenska)</option>
    <option value="ta">Tamil (&#2980;&#2990;&#3007;&#2996;&#3021;)</option>
    <option value="th">Thai (&#3616;&#3634;&#3625;&#3634;&#3652;&#3607;&#3618;)</option>
    <option value="tj">Tajikistan</option>
    <option value="tr">Turkish (T&uuml;rk&ccedil;e)</option>
    <option value="uk">Ukranian (&#1059;&#1082;&#1088;&#1072;&#1111;&#1085;&#1089;&#1100;&#1082;&#1072;)</option>
    <option value="vi">Vietnamese (Ti&#7871;ng Vi&#7879;t)</option>
    <option value="cy-GB">Welsh/UK (Cymraeg)</option>
</select></p>

</body></html> 
```

第二个版本（不是在一个功能中，也可以工作，对我来说似乎更好，因为您不必选择日期来更改语言）：

```
<html><head><title>Test1</title>

<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<link type="text/css" href="css/ui-lightness/jquery-ui-1.8.18.custom.css" rel="Stylesheet" />   
<script type="text/javascript" src="js/jquery-ui-1.8.18.custom.min.js"></script>
<script type="text/javascript" src="jquery.ui.datepicker-fr.js"></script>
<script type="text/javascript" src="jquery.ui.datepicker-ar.js"></script>
<script type="text/javascript" src="jquery.ui.datepicker-af.js"></script>
</head><body>

<script type="text/javascript">
$(function() {
    $.datepicker.setDefaults( $.datepicker.regional[ "" ] );
    $( "#from" ).datepicker({
        defaultDate: "+4w",
        changeMonth: true,
        numberOfMonths: 3,
        showButtonPanel: true,
        showOn: "button",
        minDate:"+1d",
        dateFormat:"yy/mm/dd",
        showAnim:"bounce"
    });
$( "#from" ).datepicker( $.datepicker.regional[ "en-GB" ] );
    $( "#locale" ).change(function() {
        $( "#from" ).datepicker( "option",
             $.datepicker.regional[ $( this ).val() ] );
    });
});

</script>

<p>Date: <input type="text" id="from"/>&nbsp;
<select id="locale">
    <option value="af">Afrikaans</option>
    <option value="sq">Albanian (Gjuha shqipe)</option>
    <option value="ar-DZ">Algerian Arabic</option>
    <option value="ar">Arabic (&#8235;(&#1604;&#1593;&#1585;&#1576;&#1610;</option>
    <option value="hy">Armenian (&#1344;&#1377;&#1397;&#1381;&#1408;&#1381;&#1398;)</option>
    <option value="az">Azerbaijani (Az&#601;rbaycan dili)</option>
    <option value="eu">Basque (Euskara)</option>
    <option value="bs">Bosnian (Bosanski)</option>
    <option value="bg">Bulgarian (&#1073;&#1098;&#1083;&#1075;&#1072;&#1088;&#1089;&#1082;&#1080; &#1077;&#1079;&#1080;&#1082;)</option>
    <option value="ca">Catalan (Catal&agrave;)</option>
    <option value="zh-HK">Chinese Hong Kong (&#32321;&#39636;&#20013;&#25991;)</option>
    <option value="zh-CN">Chinese Simplified (&#31616;&#20307;&#20013;&#25991;)</option>
    <option value="zh-TW">Chinese Traditional (&#32321;&#39636;&#20013;&#25991;)</option>
    <option value="hr">Croatian (Hrvatski jezik)</option>
    <option value="cs">Czech (&#269;e&#353;tina)</option>
    <option value="da">Danish (Dansk)</option>
    <option value="nl-BE">Dutch (Belgium)</option>
    <option value="nl">Dutch (Nederlands)</option>
    <option value="en-AU">English/Australia</option>
    <option value="en-NZ">English/New Zealand</option>
    <option value="en-GB">English/UK</option>
    <option value="eo">Esperanto</option>
    <option value="et">Estonian (eesti keel)</option>
    <option value="fo">Faroese (f&oslash;royskt)</option>
    <option value="fa">Farsi/Persian (&#8235;(&#1601;&#1575;&#1585;&#1587;&#1740;</option>
    <option value="fi">Finnish (suomi)</option>
    <option value="fr" selected="selected">French (Fran&ccedil;ais)</option>
    <option value="fr-CH">French/Swiss (Fran&ccedil;ais de Suisse)</option>
    <option value="gl">Galician</option>
    <option value="ge">Georgian</option>
    <option value="de">German (Deutsch)</option>
    <option value="el">Greek (&#917;&#955;&#955;&#951;&#957;&#953;&#954;&#940;)</option>
    <option value="he">Hebrew (&#8235;(&#1506;&#1489;&#1512;&#1497;&#1514;</option>
    <option value="hi">Hindi (&#2361;&#2367;&#2306;&#2342;&#2368;)</option>
    <option value="hu">Hungarian (Magyar)</option>
    <option value="is">Icelandic (&Otilde;slenska)</option>
    <option value="id">Indonesian (Bahasa Indonesia)</option>
    <option value="it">Italian (Italiano)</option>
    <option value="ja">Japanese (&#26085;&#26412;&#35486;)</option>
    <option value="kk">Kazakhstan (Kazakh)</option>
    <option value="km">Khmer</option>
    <option value="ko">Korean (&#54620;&#44397;&#50612;)</option>
    <option value="lv">Latvian (Latvie&ouml;u Valoda)</option>
    <option value="lt">Lithuanian (lietuviu kalba)</option>
    <option value="lb">Luxembourgish</option>
    <option value="mk">Macedonian</option>
    <option value="ml">Malayalam</option>
    <option value="ms">Malaysian (Bahasa Malaysia)</option>
    <option value="no">Norwegian (Norsk)</option>
    <option value="pl">Polish (Polski)</option>
    <option value="pt">Portuguese (Portugu&ecirc;s)</option>
    <option value="pt-BR">Portuguese/Brazilian (Portugu&ecirc;s)</option>
    <option value="rm">Rhaeto-Romanic (Romansh)</option>
    <option value="ro">Romanian (Rom&acirc;n&#259;)</option>
    <option value="ru">Russian (&#1056;&#1091;&#1089;&#1089;&#1082;&#1080;&#1081;)</option>
    <option value="sr">Serbian (&#1089;&#1088;&#1087;&#1089;&#1082;&#1080; &#1112;&#1077;&#1079;&#1080;&#1082;)</option>
    <option value="sr-SR">Serbian (srpski jezik)</option>
    <option value="sk">Slovak (Slovencina)</option>
    <option value="sl">Slovenian (Slovenski Jezik)</option>
    <option value="es">Spanish (Espa&ntilde;ol)</option>
    <option value="sv">Swedish (Svenska)</option>
    <option value="ta">Tamil (&#2980;&#2990;&#3007;&#2996;&#3021;)</option>
    <option value="th">Thai (&#3616;&#3634;&#3625;&#3634;&#3652;&#3607;&#3618;)</option>
    <option value="tj">Tajikistan</option>
    <option value="tr">Turkish (T&uuml;rk&ccedil;e)</option>
    <option value="uk">Ukranian (&#1059;&#1082;&#1088;&#1072;&#1111;&#1085;&#1089;&#1100;&#1082;&#1072;)</option>
    <option value="vi">Vietnamese (Ti&#7871;ng Vi&#7879;t)</option>
    <option value="cy-GB">Welsh/UK (Cymraeg)</option>
</select></p>

</body></html> 
```

参考：

[http://jqueryui.com/demos/datepicker/#localization](http://jqueryui.com/demos/datepicker/#localization)

[http://jquery-ui.googlecode.com/svn/trunk/ui/i18n/](http://jquery-ui.googlecode.com/svn/trunk/ui/i18n/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T11:45:44.487

好吧，我花了将近一整天的时间让本地化在我的 jQuery DatePicker 上工作：

**第 1 步：**在一个通用文件中创建一个 JS 文件，其中包含所有语言（您希望其翻译出现）的月份名称等的所有翻译，并将其命名为*jquery.ui.datepicker-common.js*（或您所用的任何名称）喜欢）（您也可以为所有必需的语言创建单独的 JS 文件，并将其命名为 -- *jquery.ui.datepicker-fr.js* for French File）

**第 2 步：**将此 JS 文件包含在您希望显示翻译值的网页中。

```
<script src="Assets/JS/JQuery/jquery.ui.datepicker-fr.js" type="text/javascript"></script> 
```

**第 3 步：**按照此示例使 DatePicker 使用翻译后的语言。将您的日期选择器名称粘贴到`DatePickerName`. 粘贴包含当前语言的控件名称`hdn_Locale`（如示例中所用）。

```
$("#DatePickerName").datepicker({
         changeMonth: true,
         changeYear: true,
         defaultDate: "+4w",
         minDate: "+1d",
         dateFormat: "yy/mm/dd",
         onSelect: function (selectedDate) {
                               $("#DatePickerName").datepicker(navigator.userLanguage,
                                   $.datepicker.regional[$('#hdn_Locale').val()]);
         }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T00:52:05.290

我设法让这个工作我已经将语言包装在选择部分的 jquery ui 中，因为我已经声明了 dateformat 和 mindate 选项，所以在一切正常工作后，我之前已经声明了代码

```
<script type="text/javascript">
//<![CDATA[
$(function() {
    $.datepicker.setDefaults( $.datepicker.regional[ "" ] );
    $( "#from" ).datepicker({
        defaultDate: "+4w",
        changeMonth: true,
        numberOfMonths: 2,
        showButtonPanel: true,
        showOn: "button",
        buttonImage: "../images/calendar.gif",
        buttonImageOnly: true,
        minDate:"+1d",
        dateFormat:"yy/mm/dd",
        showAnim:"blind",           
    });
    $( "#from" ).datepicker( $.datepicker.regional[ "en-GB" ] );
    $( "#locale" ).change(function() {
        $( "#from" ).datepicker( "option",
            $.datepicker.regional[ $( this ).val() ] );
          });
    $( "#to" ).datepicker({
        defaultDate: "+2w",
        changeMonth: true,
        numberOfMonths: 2,
        showButtonPanel: true,
        showOn: "button",
        buttonImage: "../images/calendar.gif",
        buttonImageOnly: true,
        minDate:"",
        dateFormat:"yy/mm/dd",
        showAnim:"blind",
        });
    $( "#to" ).datepicker( $.datepicker.regional[ "en-GB" ] );
    $( "#locale" ).change(function() {
        $( "#to" ).datepicker( "option",
            $.datepicker.regional[ $( this ).val() ] );
            });
 });
//]]>
</script> 
```

# python - 并行化 python 代码中的内存共享

> ID：11571562
> 
> 赞同：1
> 
> 时间：2012-07-20T01:15:24.170
> 
> 标签：python, matrix, parallel-processing, pass-by-reference, shared-memory

我是一名大学新生和 Python 新手，所以请多多包涵。我正在尝试并行化一些矩阵运算。这是我使用 ParallelPython 模块的尝试：

```
 def testfunc(connectionMatrix, qCount, iCount, Htry, tStepCount):
        test = connectionMatrix[0:qCount,0:iCount].dot(Htry[tStepCount-1, 0:iCount]) 
        return test  

    f1 = job_server.submit(testfunc, (self.connectionMatrix, self.qCount, self.iCount, self.iHtry, self.tStepCount), modules = ("scipy.sparse",))
    f2 = job_server.submit(testfunc, (self.connectionMatrix, self.qCount, self.iCount, self.didtHtry, self.tStepCount), modules = ("scipy.sparse",))
    r1 = f1()
    r2 = f2()
    self.qHtry[self.tStepCount, 0:self.qCount] = self.qHtry[self.tStepCount-1, 0:self.qCount] + self.delT * r1 + 0.5 * (self.delT**2) * r2 
```

似乎有一条正态曲线，x 轴上的矩阵大小和 y 轴上的加速百分比。在 100x100 矩阵上，它似乎以 30% 的速度增加为上限。越来越小的矩阵导致增加的次数越少，并且足够小和足够大的矩阵，串行代码更快。我的猜测是，问题在于论点的传递。复制大矩阵的开销实际上比作业本身花费的时间更长。我能做些什么来解决这个问题？有没有办法结合内存共享和通过引用传递矩阵？如您所见，没有修改任何参数，因此它可以是只读访问。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T01:56:41.323

好吧，ParallelPython 的意义在于，您可以编写不关心它是否分布在线程、进程甚至多台计算机上的代码，并且使用内存共享会破坏这种抽象。

一种选择是使用共享文件系统上的文件之类的东西，您可以在每个工作人员中映射该文件。当然这更复杂，它的好坏取决于文件系统、共享协议和网络的许多细节，但这是一个选项。

如果你愿意放弃分布式处理的选项，你可以使用 multiprocessing.Array（或 multiprocessing、Value 或 multiprocessing.sharedctypes）来访问共享内存。但此时，您可能需要考虑仅使用多处理而不是 ParallelPython 来分配作业，因为多处理是标准库的一部分，并且具有更强大的 API，而且您明确放弃了 ParallelPython 的一个主要优势.

或者，您可以将这两个选项结合起来，在许多方面都是两全其美，但就您需要更改现有代码的程度而言，这可能是最好的：只需使用本地文件并将其映射。

但是，在您执行任何此操作之前，您可能需要考虑分析以查看复制矩阵是否真的是瓶颈。而且，如果是，您可能需要考虑是否有算法修复，只需复制每个作业需要的部分，而不是复制整个矩阵。（这是否有意义取决于每个工作所需的部分是否明显少于整个工作，当然。）

# ruby - 寻找正则表达式#match_all

> ID：11571564
> 
> 赞同：1
> 
> 时间：2012-07-20T01:15:53.137
> 
> 标签：ruby

我一直试图在文档中找到类似的东西，但失败了。我想要的是迭代字符串中的正则表达式匹配，并传递`MatchData`给块。

*   有`Regexp#match`，但它只找到一个匹配项；
*   有`String#scan`，但块只接收捕获数组或匹配字符串，而不是完整的`MatchData`。这对 Oniguruma 来说尤其糟糕，因为您失去了命名的捕获功能。
*   还有`Regexp::last_match`，所以我实际上可以走这`scan`条路，但它看起来丑陋和不雅。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T01:26:13.690

请参阅[是否有类似 String#scan 的函数，但返回 MatchDatas 数组？](https://stackoverflow.com/questions/1444778/is-there-a-function-like-stringscan-but-returning-array-of-matchdatas)

看起来你最好的选择是使用`String#scan`and `Regexp.last_match`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T01:26:25.347

是的，你错过了一些东西。从 MatchData 文档中：

> MatchData 是特殊变量 $~ 的类型，是 Regexp#match 和 Regexp.last_match 返回的对象的类型。它封装**了模式匹配的所有结果**，通常通过特殊变量 $&、$'、$`、$1、$2 等访问的结果。

重要的部分以粗体显示。

您已经在单个 MatchData 对象中拥有*所有匹配项。*这不是你想要的吗？

# php - 没有可见感谢页面的谷歌分析电子商务跟踪

> ID：11571569
> 
> 赞同：2
> 
> 时间：2012-07-20T01:16:27.833
> 
> 标签：php, google-analytics

我使用 Google 电子商务跟踪来跟踪销售情况并提供不同的付款方式。

对于信用卡支付和 Paypal，用户在成功支付后被重定向到感谢页面，并在那里执行 Google 电子商务跟踪代码。这很好用。

我还提供条形码账单和 ibon 作为付款方式。这意味着用户打印带有条形码或ibon代码的账单，然后去7-11用现金支付。有关付款的信息从 7-11 发送到我的付款提供商，他们将有关成功付款的通知发送回我的通知 url。我收到此通知通常需要 2 天时间。

我的问题是：

在这种情况下，没有向用户显示我可以输入电子商务跟踪代码的网站。通知 url 是一个仅包含 php 的页面并更新数据库。

那么，如何在浏览器中未显示的 php 页面上执行 Google E-Commerce Javascript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-05T11:19:19.353

查看 Google Measurement Protocol 开发人员指南，该指南描述了如何使用 HTTP 请求发送数据，因此您可以使用 PHP 和 cURL 进行操作

[https://developers.google.com/analytics/devguides/collection/protocol/v1/devguide](https://developers.google.com/analytics/devguides/collection/protocol/v1/devguide)

[https://developers.google.com/analytics/devguides/collection/protocol/v1/reference](https://developers.google.com/analytics/devguides/collection/protocol/v1/reference)

# c# - 没有开始异步方法

> ID：11571570
> 
> 赞同：0
> 
> 时间：2012-07-20T01:16:28.243
> 
> 标签：c#, wcf, svcutil.exe, service-reference

我是 WCF 和异步的新手。我在长时间运行的方法上有一个带有 Begin 和 End 的服务。

```
[ServiceContract]
public interface IDocImagingStatusService
{
    [OperationContract(AsyncPattern = true)]
    IAsyncResult BeginGetDirectoryCount(AsyncCallback callback, object state);
    IList<DirectoryCounts> EndGetDirectoryCount(IAsyncResult result);
} 
```

我的客户需要调用 BeginGetDirectoryCount，但我看到的只是 GetDirectoryCount() 方法。他们去哪儿了？

```
var docImgSvc = new DocImagingService.DocImagingStatusServiceClient( "WSHttpBinding_IDocImagingStatusService");
docImgSvc.GetDirectoryCount(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:47:40.840

*默认情况下*`Visual Studio`，`svcutil.exe`工具中的“添加服务引用”对话框*不会*为您的服务合同生成异步操作。如果要生成它们，则需要在两个选项中明确指定：

*   在 Visual Studio 2010 中，您可以选择`Advanced`添加服务引用对话框中的按钮，然后选中`Generate Asynchronous Operations`高级对话框中的复选框，如下所示：

![在此处输入图像描述](../Images/4d86b361b7abe3d6bea6b83a3294254c.png)

*   在 svcutil.exe 工具中，您需要使用 /async 开关，如下[MSDN](http://msdn.microsoft.com/en-us/library/aa347733.aspx)中的摘录所述：

`/async`：生成同步和异步方法签名。默认值：仅生成同步方法签名。简写形式：/a

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T02:53:11.477

您可能希望确保代理是使用异步操作生成的。如果您直接使用 svcutil，请参阅[http://msdn.microsoft.com/en-us/library/aa347733.aspx 。](http://msdn.microsoft.com/en-us/library/aa347733.aspx)如果您使用 Visual Studio 的添加服务引用菜单，则需要在高级设置中查看生成异步代理方法的选项。

# c++ - 如何在 Bash 脚本中使用 C++ 程序的输出作为变量

> ID：11571572
> 
> 赞同：3
> 
> 时间：2012-07-20T01:16:58.550
> 
> 标签：c++, scripting

我试图想出一个解决方法来为脚本执行一些数学函数，因为 bash 显然除了整数数学之外不能做任何事情（或者它甚至可以做到吗？）。

我想出的脚本需要编写一系列宏，这些宏最终将用于模拟程序。我目前只是试图输出用作宏参数的粒子源的位置。

我编写的 C++ 程序非常简单，它接受 i 并输出 x 和 y，如下所示：

```
#include <iostream>
#include <math.h>

using namespace std;

int main()
{
  double i;
  double theta = 11 * (3.1415926535897932384626/180);

  cin >> i;

  double b = 24.370;

  double y = (b/i)*sin(theta);
  double x = (b/i)*cos(theta);

  cout << x << " " <<  y << endl;

  return 0;
} 
```

我正在编写的脚本输出一堆与我正在尝试创建的宏有关的东西，但是我坚持的行（标记为 (1) ）需要做这样的事情......

```
for i in {1..100}
do
  echo "./a.out" #calling the C program
  echo "$i" #entering i as input

  x = first output of a.out, y = second output a.out #(1) Confused on how to do this part!

  echo -n "/gps/position $x $y 0 27.7 cm" > mymacro.mac 
```

完毕

我知道必须有一个非常简单的方法来做到这一点，但我不确定该怎么做。我基本上只需要使用 ac 程序的输出作为脚本中的变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T01:33:01.777

您可能应该考虑将`$i`其作为变量传递给您的 c++ 程序并`argv`用于读取它（[这](http://www.cprogramming.com/tutorial/lesson14.html)可能会有所帮助）。这很可能是“正确”的做法。然后你可以将它用于 bash：

```
#!/bin/bash
IFS=' ';
for i in {1..100}
do
    read -ra values <<< `./a.out $i`
    x=${values[0]}
    y=${values[1]}
    echo -n "/gps/position $x $y 0 27.7 cm" > mymacro.mac
done 
```

并且您确定要`> mymacro.mac`代替`>> mymacro.mac`（如果前者在循环内，则仅将最后一个值写入文件`mymacro.mac`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T01:39:11.523

您可以使用 cegfault 的答案，或者更简单地说：

```
read val1 val2 <<< $(./a.out $i) 
```

它执行`a.out`并将这两个数字存储在`$val1`和中`$val2`。

您可能会发现它更易于使用`awk`，它可以处理浮点数和大多数数学函数。这是一个任意示例：

```
bash> read x y <<< $(echo 5 | awk '{ printf "%f %f\n", cos($1), sin($1) }')
bash> echo $x
0.283662
bash> echo $y
-0.957824 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T01:50:26.673

如果您的脚本将长期存在或有大量数据要处理，特别是因为您无论如何都在 C++ 程序中编写部分功能，那么您可能会做得更好，只用 C++ 编写整个东西，最终的结果将是一个惊人的更快......更集中和更容易看到正在发生的事情。

```
#include <iostream>
#include <math.h>
#include <sstream>
#include <fstream>

int main()
{
  const double theta = 11 * (3.1415926535897932384626/180);
  const double b = 24.370;

  for (int n=1; n<=100; ++n)
  {
    double i = n;
    double y = (b/i)*sin(theta);
    double x = (b/i)*cos(theta);

    // Two ways of sending the output to mymacro.mac......

    // 1\. Via the system() call.....
    std::stringstream ss;
    ss << "echo -n \"/gps/position " << x << ' ' << y << " 0 27.7 cm\" > mymacro.mac";
    system(ss.str().c_str());

    // 2\. Via C++ file I/O.....
    std::ofstream ofile("mymacro.mac");
    ofile << "/gps/position " << x << ' ' << y << " 0 27.7 cm";
    ofile.close(); //...not technically necessary; ofile will close when it goes out of scope.
  }
} 
```

请注意，此解决方案以极高的保真度复制了您的示例，包括在每次循环迭代时覆盖文件“mymacro.mac”的部分。

# excel - 在图表之间插入分页符

> ID：11571574
> 
> 赞同：1
> 
> 时间：2012-07-20T01:17:11.560
> 
> 标签：excel, page-break, vba

我有一个 Excel 工作表，我在上面组织了一堆图表。图表垂直堆叠，在另一个上（之间有一些间距和标签用于组织）。这些图表不适合单个打印页面，因此我必须在正确的位置插入分页符。图表的数量和每个图表的大小可以改变，所以直到运行时我才知道在哪里放置分页符。

但是，我确实知道我想在每页上打印两个图表。所以，我想要做的是在第二个图表之后或第三个图表之前（无论哪种方式）放置一个分页符。但在我看来，分页符总是与一行相关联，而不是与一个对象（如图表）相关联。

有没有办法：

1）将分页符与对象相关联（例如`ActiveSheet.HPageBreaks.Add before:=ActiveSheet.ChartObject("myChart3")`）

2）确定对象顶部位于哪一行。如果我能确定这一点，那么我可以轻松地将分页符放在该行。例如，我可以得到`ActiveSheet.ChartObject("myChart").Top`，但我不知道这对应于哪一行。我尝试将每一行设置为 1 的高度，然后进行一对一的对应，但它不匹配。

# java - 我如何知道服务器是否会接受特定类型的内容类型？

> ID：11571575
> 
> 赞同：1
> 
> 时间：2012-07-20T01:17:11.030
> 
> 标签：java, http

我想知道服务器接受什么类型的内容，我是否只能以那种格式发布数据？

**更新：** 下面是代码。

```
import org.apache.poi.xssf.usermodel.XSSFCell;
import org.apache.poi.xssf.usermodel.XSSFRow;
import org.apache.poi.xssf.usermodel.XSSFSheet;
import org.apache.poi.xssf.usermodel.XSSFWorkbook;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;
import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.io.StringWriter;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

import javax.net.ssl.HostnameVerifier;
import javax.net.ssl.HttpsURLConnection;
import javax.net.ssl.SSLSession;
public class ExcelReader {

     @SuppressWarnings("unchecked")
        public static void main(String[] args) throws Exception {
            //
            // An excel file name. You can create a file name with a full 
            // path information.
            //
            String filename = "E:\\Registration Details.xlsx";

            //
            // Create an ArrayList to store the data read from excel sheet.
            //
            List sheetData = new ArrayList();

            FileInputStream fis = null;
            try {
                //
                // Create a FileInputStream that will be use to read the 
                // excel file.
                //
                fis = new FileInputStream(filename);

                //
                // Create an excel workbook from the file system.
                //
                XSSFWorkbook  workbook = new XSSFWorkbook(fis);
                //
                // Get the first sheet on the workbook.
                //
                XSSFSheet  sheet = workbook.getSheetAt(0);

                //
                // When we have a sheet object in hand we can iterator on 
                // each sheet's rows and on each row's cells. We store the 
                // data read on an ArrayList so that we can printed the 
                // content of the excel to the console.
                //
                Iterator rows = sheet.rowIterator();
                while (rows.hasNext()) {
                    XSSFRow row = (XSSFRow) rows.next();
                    Iterator cells = row.cellIterator();

                    List data = new ArrayList();
                    while (cells.hasNext()) {
                        XSSFCell cell = (XSSFCell) cells.next();
                        data.add(cell);
                    }

                    sheetData.add(data);
                }
            } catch (IOException e) {
                e.printStackTrace();
            } finally {
                if (fis != null) {
                    fis.close();
                }
            }

            showExcelData(sheetData);
        }

        private static void showExcelData(List sheetData) {
            //
            // Iterates the data and print it out to the console.
            //
            ArrayList xlsDataList = new ArrayList();
            for (int i = 0; i < sheetData.size(); i++) {
                List list = (List) sheetData.get(i);
                for (int j = 0; j < list.size(); j++) {
                    XSSFCell cell = (XSSFCell) list.get(j);
                    if(cell.getCellType()==cell.CELL_TYPE_STRING){
                        xlsDataList.add(cell.getRichStringCellValue().getString());
                   // System.out.print(
                          //  cell.getRichStringCellValue().getString());
                    }else  if(cell.getCellType()==cell.CELL_TYPE_NUMERIC){
                        xlsDataList.add(cell.getNumericCellValue());
                        //System.out.print(
                              //  cell.getNumericCellValue());
                        }
                    if (j < list.size() - 1) {
                    //    System.out.print(", ");
                    }
                }
              //  System.out.println("");
            }
            if(null!=xlsDataList && xlsDataList.size()>0){
                authenticatenewPostUrl(xlsDataList);
            }
            for(int i=0;i<xlsDataList.size();i++){
                System.out.println(xlsDataList.get(i));
            }
        }

        public static void authenticatenewPostUrl(ArrayList xlsDataList) {

            HostnameVerifier hv = new HostnameVerifier() {

                @Override
                public boolean verify(String urlHostName, SSLSession session) {
                    System.out.println("Warning: URL Host: " + urlHostName
                            + " vs. " + session.getPeerHost());
                    return true;
                }
            };
            // Now you are telling the JRE to trust any https server.
            // If you know the URL that you are connecting to then this should
            // not be a problem
            try {
                trustAllHttpsCertificates();
            } catch (Exception e) {
                System.out.println("Trustall" + e.getStackTrace());
            }
            HttpsURLConnection.setDefaultHostnameVerifier(hv);
            StringWriter sw = new StringWriter();
            PrintWriter pw = new PrintWriter(sw);
            try {

                URL url = new URL("https://www.walmart.com/cservice/ya_index.gsp");
                 String line;

                    StringBuilder string=new StringBuilder();
                    HttpsURLConnection  ucc = (HttpsURLConnection) url.openConnection();
                    InputStream content = (InputStream) ucc.getInputStream();
                    BufferedReader in = new BufferedReader(new InputStreamReader(content));
                    while ((line = in.readLine()) != null) {
                     string.append(line);

                    }
                 Document document=Jsoup.parse(string.toString());
                    Elements elements=document.getElementsByTag("a");//("mainSpriteSliderBTN wmBTN_blue25 continue");
                    int count=0;
                    //String registrationURL="";
                    String herfURL="";
                    for(Element elem:elements)
                    {
                        Elements e=elem.getElementsByAttributeValueMatching("class", "mainSpriteSliderBTN wmBTN_blue25 continue");
                        if(e!=null && !e.toString().isEmpty())
                        {
                          System.out.println(e.get(0).toString()+"\n"+count++);
                          Element myElem=e.get(0);
                          System.out.println(myElem.attr("href"));
                          herfURL=myElem.attr("href");
                        }
                    }
                    URL registrationURL = new URL("https://www.walmart.com"+herfURL);

                //String credentials = "ptt" + ":" + "ptt123";
                String postData = "firstName="+xlsDataList.get(0)+"&lastName="+xlsDataList.get(1)+"&userName="+xlsDataList.get(2)+"&userNameConfirm="+xlsDataList.get(3)+"&pwd="+xlsDataList.get(5)+"&pwdConfirm="+xlsDataList.get(6);
               // String encoding = Base64Converter.encode(credentials.getBytes("UTF-8"));
                HttpsURLConnection  uc = (HttpsURLConnection) registrationURL.openConnection();
                uc.setDoInput(true);
                uc.setDoOutput(true);
              //  uc.setRequestProperty("Authorization", String.format("Basic %s", encoding));
                uc.setRequestMethod("POST");
                uc.setRequestProperty("Accept", "*/*");
                uc.setRequestProperty("Content-Length", Integer.toString(postData.getBytes().length));
                uc.setRequestProperty("Content-Type", "text/html; charset=utf-8");

                OutputStreamWriter outputWriter = new OutputStreamWriter(uc.getOutputStream());
                outputWriter.write(postData);
                outputWriter.flush();
                outputWriter.close();
                System.out.println(uc.getResponseCode()+":::"+uc.getResponseMessage());

            } catch (MalformedURLException e) {
                e.printStackTrace();
                pw.println("Invalid URL");
            } catch (IOException e) {
                e.printStackTrace();
                pw.println("Error reading URL");
            } catch (Exception e) {
                e.printStackTrace();
            }
            System.out.println(sw.toString());
        }

        public static class TempTrustedManager implements
        javax.net.ssl.TrustManager, javax.net.ssl.X509TrustManager {
    public java.security.cert.X509Certificate[] getAcceptedIssuers() {
        return null;
    }

    public boolean isServerTrusted(
            java.security.cert.X509Certificate[] certs) {
        return true;
    }

    public boolean isClientTrusted(
            java.security.cert.X509Certificate[] certs) {
        return true;
    }

    public void checkServerTrusted(
            java.security.cert.X509Certificate[] certs, String authType)
            throws java.security.cert.CertificateException {
        return;
    }

    public void checkClientTrusted(
            java.security.cert.X509Certificate[] certs, String authType)
            throws java.security.cert.CertificateException {
        return;
    }
}

private static void trustAllHttpsCertificates() throws Exception {

    // Create a trust manager that does not validate certificate chains:

    javax.net.ssl.TrustManager[] trustAllCerts =

    new javax.net.ssl.TrustManager[1];

    javax.net.ssl.TrustManager tm = new TempTrustedManager();

    trustAllCerts[0] = tm;

    javax.net.ssl.SSLContext sc =

    javax.net.ssl.SSLContext.getInstance("SSL");

    sc.init(null, trustAllCerts, null);

    javax.net.ssl.HttpsURLConnection.setDefaultSSLSocketFactory(

    sc.getSocketFactory());

}

} 
```

我认为数据已发布到上面的 url，但是当我打印响应代码和响应消息时，我得到了`500:::Internal Server Error`

当我检查此链接[内部服务器错误 500](https://stackoverflow.com/questions/3844813/internal-server-error)

我知道我们已经将数据发送到服务器，即仅接受类型。

如果不是，请纠正我，我该如何解决上述问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T01:36:18.360

> 我试图发布数据，我想知道服务器接受什么样的数据。意思是，我们将设置参数内容类型。那么我可以将什么样的数据发送到特定的服务器

您不会从服务器获取内容类型，而是从您发布的表单中获取它，或者它是预先协商好的（如在文档中）。没有一种方法可以请求您在 POST 正文中获取服务器上特定资源所需的内容类型。

如果您从 HTML 页面提交表单，默认情况下它只是`application/x-www-form-urlencoded`，否则`<FORM>`标签会告诉您内容类型需要是什么（如`multipart/form-data`）。

查看您编辑的帖子，看起来您正在发布数据，即`application/x-www-form-urlencoded`：

```
postData = "firstName="+xlsDataList.get(0)+"&lastName="+xlsDataList.get(1)+
    "&userName="+xlsDataList.get(2)+"&userNameConfirm="+xlsDataList.get(3)+
    "&pwd="+xlsDataList.get(5)+"&pwdConfirm="+xlsDataList.get(6); 
```

但是你告诉服务器它是`text/html`：

```
 uc.setRequestProperty("Content-Type", "text/html; charset=utf-8"); 
```

这显然是错误的。不过，不知道这是否是导致您的 500 错误响应的原因。结论：您必须知道您所请求的请求需要其数据的内容类型。没有通用的方法来查询服务器并询问。

# c++ - SCons 库和子库

> ID：11571577
> 
> 赞同：3
> 
> 时间：2012-07-20T01:17:47.647
> 
> 标签：c++, c, build, build-process, scons

我有一个基于 SCons 的分层构建系统。我有一个根 SConstruct，它调用一个构建共享库的 SConscript，然后调用另一个构建依赖于共享库的可执行文件的 SConscript。

所以这是我的问题：我对 linux 上的共享库的理解是，当您想要为`ld`将使用共享库的可执行文件进行最终链接时，必须将共享库`ld`作为参考源包含在可执行文件的命令行中它（除非它位于标准位置，在这种情况下该`-l`选项有效）。

所以这里是我的 SCons 文件的样子：

=== 根目录/SConstruct

```
env=DefaultEnvironment()
shared_lib = SConscript('foolib/SConscript')
env.Append( LIBS=[shared_lib] )
executable = SConscript('barexec/SConscript') 
```

=== rootdir/foolib/SConscript

```
env=DefaultEnvironment()
env.Append(CPPPATH=Glob('inc'))
penv = env.Clone()
penv.Append(CPPPATH=Glob('internal/inc'))
lib = penv.SharedLibrary( 'foo', source=['foo.c', 'morefoo.c']
Return("lib") 
```

=== rootdir/barexec/SConscript

```
env=DefaultEnvironment()
exe = env.Program( 'bar', source=['main.c', 'bar.c', 'rod.c'] )
Return("exe") 
```

所以这里的障碍是这一行：

```
env.Append( LIBS=[shared_lib] ) 
```

这是将生成的库添加到需要它们的任何其他库的命令行的好方法，除了因为 SCons 正在通过 SConscripts 进行两次运行（首先生成它的依赖关系树，然后进行工作） ，`rootdir/foolib/libfoo.so`在所有产品的命令行上结束，甚至`libfoo.so`它本身：

```
gcc -g -Wall -Werror -o libfoo.so foo.o morefoo.o libfoo.so 
```

那么如何最好地使用 SCons 呢？现在我已经求助于这个黑客：

=== 根目录/SConstruct

```
env=DefaultEnvironment()
shared_lib = SConscript('foolib/SConscript')
env['shared_lib'] = shared_lib
executable = SConscript('barexec/SConscript') 
```

...

=== rootdir/barexec/SConscript

```
env=DefaultEnvironment()
exe = env.Program( 'bar', source=['main.c', 'bar.c', 'rod.c'] + env['shared_lib'] )
Return("exe") 
```

有没有更多的 SCons-y 方式来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T07:33:36.877

这是组织 SConstruct/SConscript 文件的更好方法。通常对于分层构建，您应该与其余的子目录共享 env。请注意，我也克隆了 barexec 目录中的主环境，因此傻瓜仅用于链接该二进制文件。

=== 根目录/SConstruct

```
import os

env=DefaultEnvironment()

subdirs = [
    'foolib',
    'barexec'
]

# The exports attribute allows you to pass variables to the subdir SConscripts
for dir in subdirs:
    SConscript( os.path.join(dir, 'SConscript'), exports = ['env']) 
```

=== rootdir/foolib/SConscript

```
# inports the env created in the root SConstruct
#
# Any changes made to 'env' here will be reflected in
# the root/SConstruct and in the barexec/SConscript
#
Import('env')

# Adding this 'inc' dir to the include path for all users of this 'env'
env.Append(CPPPATH=Glob('inc'))

penv = env.Clone()
# Adding this include only for targets built with penv
penv.Append(CPPPATH=Glob('internal/inc'))
penv.SharedLibrary( 'foo', source=['foo.c', 'morefoo.c']) 
```

=== rootdir/barexec/SConscript

```
Import('env')

clonedEnv = env.Clone()

# The foo lib will only be used for targets compiled with the clonedEnv env
# Notice that specifying '#' in a path means relative to the root SConstruct
# for each [item] in LIBS, you will get -llib on the compilation line
# for each [item] in LIBPATH, you will get -Lpath on the compilation line
clonedEnv.Append(LIBS=['foo'], LIBPATH=['#foolib'])

clonedEnv.Program( 'bar', source=['main.c', 'bar.c', 'rod.c'] ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T03:26:48.313

您应该允许构建找到共享库。

在文档中查找`LIBPATH`和`RPATH`变量；`SCons`这些是设置搜索路径的“Scons-y”方式，以便任何生成的`-l`选项都能正确找到库。

上面已经提到了，下面是您*应该*根据 SCons 的设置看到`gcc`的内容（如果没有，您可能必须手动进行）。

如果您还向编译器提供了库的位置，该`-l`选项始终会找到共享库。有两次需要这样做：编译时（`-L`选项）和运行时（`-rpath`生成的链接器选项）。

`LIBPATH`SCons 设置应该生成类似于`-L/some/directory/path`编译时搜索路径的内容。

`RPATH`SCons 设置应该生成一个链接器选项来嵌入*搜索*路径；例如`-Wl,-rpath -Wl,\$ORIGIN/../lib`，将嵌入一个相对于可执行文件进行搜索的搜索路径，以便可执行文件放置在安装`bin`的并行`lib`目录中进行搜索。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T17:03:32.893

除了布雷迪决定，我使用静态/全局变量来存储目标名称和路径。它让我可以更好地控制构建。

```
# site_scons/project.py
class Project:
  APP1_NAME = "app1_name"
  APP2_NAME = "app2_name"
  MYLIB1_NAME = "mylib1_name"
  # etc
  APP_PATH = "#build/$BuildMode/bin" # BuildMode - commonly in my projects debug or release, `#` - root of project dir
  LIB_PATH = "#build/$BuildMode/lib"
  @staticmethod
  def appPath(name) :
     return os.path.join(APP_PATH, name)
  @staticmethod
  def libPath(name) :
     return os.path.join(LIB_PATH, name) 
```

定义目标：

```
from project import Project
...
env.SharedLibrary(Project.libPath(Project.MYLIB1_NAME), source=['foo.c', 'morefoo.c']) 
```

应用：

```
from project import Project
...
env.Append(LIBPATH = [Project.LIB_PATH])
env.Append(LIBS = [Project.MYLIB1_NAME])
env.Program(Project.appPath(Project.MYAPP1_NAME), source=[...]) 
```

在我的项目中，它运行良好，scons 自动查找依赖于库而无需任何其他命令。如果我想更改库的名称，我只需更改我的项目类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-09T15:48:55.677

布雷迪的回答没有解决的一个问题是如何在使用变体目录构建源外时获得正确的库路径。这是一个非常相似的方法，它构建了两个不同的变体：

`SConstruct`

```
# Common environment for all build modes.
common = Environment(CCFLAGS=["-Wall"], CPPPATH=["#foolib/inc"])

# Build-mode specific environments.
debug = common.Clone()
debug.Append(CCFLAGS=["-O0"])
release = common.Clone()
release.Append(CCFLAGS=["-O"], CPPDEFINES=["NDEBUG"])

# Run all builds.
SConscript("SConscript", exports={"env": debug}, variant_dir="debug")
SConscript("SConscript", exports={"env": release}, variant_dir="release") 
```

*   的`#`值`CPPPATH`使包含路径相对于项目根目录而不是变体目录。

`SConscript`

```
Import("env")

subdirs=["barexec", "foolib"]
senv = env.Clone(FOOLIBDIR=Dir("foolib"))
SConscript(dirs=subdirs, exports={"env": senv}) 
```

*   这个根级别`SConscript`是构建每个`variant_dir`.
*   通过`Dir()`在设置时使用该函数`FOOLIBDIR`，库的变体构建目录相对于该文件而不是使用它的位置进行解析。

`foolib/SConscript`

```
Import("env")

penv = env.Clone()
penv.Append(CPPPATH=["internal/inc"])
penv.SharedLibrary("foo", source=["foo.c", "morefoo.c"]) 
```

*   在进行任何更改之前克隆环境以避免影响其他目录非常重要。

`barexec/SConscript`

```
Import("env")

clonedEnv = env.Clone()
clonedEnv.Append(LIBPATH=["$FOOLIBDIR"], LIBS=["foo"])
clonedEnv.Program("bar", source=["main.c", "bar.c", "rod.c"]) 
```

*   添加了库的变体构建目录，`LIBPATH`因此 SCons*和*链接器都可以找到正确的库。
*   添加`"foo"`到`LIBS`通知 SCons`barexec`取决于`foolib`必须先构建哪个，并将库添加到链接器命令行。
*   `$FOOLIBDIR`应该只添加到`LIBPATH`when`"foo"`也添加到`LIBS`- 如果没有，`barexec`可能会在之前构建`foolib`，导致链接器错误，因为指定的库路径（尚）不存在。

# asp.net - Asp.net：如何在脚本标签内添加 using

> ID：11571579
> 
> 赞同：1
> 
> 时间：2012-07-20T01:17:58.247
> 
> 标签：asp.net

假设我处于网页的源代码模式。

```
<script runat="server">
  //Code inside
</script> 
```

如何添加**using**语句，这样我就不必使用类的完全限定名称。

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T01:19:58.970

```
<%@ Import Namespace="MyNamespace" %> 
```

在脚本标签之外。或者，您可以[将它们添加到 web.config 中](http://msdn.microsoft.com/en-us/library/ms164642.aspx)。

# html - CakePHP 隐藏的_method POST

> ID：11571584
> 
> 赞同：3
> 
> 时间：2012-07-20T01:19:06.147
> 
> 标签：html, cakephp

使用 FormHelper->create(...) 时，呈现的 HTML 如下所示：

```
<form action="/blogs/add" method="post" accept-charset="utf-8">
    <div style="display:none;">
        <input type="hidden" name="_method" value="POST">
    </div>

    <!-- omitted: form inputs -->
</form> 
```

为什么那个div有显示：无；风格在那里？如何让它不显示？

更新：为了清楚起见，我想知道为什么 div 和 div 内的隐藏输入都出现了。他们似乎没有必要，因此我不希望他们在那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-05T16:05:49.190

对于最近遇到此问题的任何人，现在有一个简单的解决方案，不涉及自定义助手。使用[FormHelper 模板](https://book.cakephp.org/3.0/en/views/helpers/form.html#customizing-the-templates-formhelper-uses)，有问题的代码块由“hiddenBlock”模板生成。（在此处查看默认模板的完整列表：[https](https://api.cakephp.org/3.2/class-Cake.View.Helper.FormHelper.html#%24_defaultConfig) ://api.cakephp.org/3.2/class-Cake.View.Helper.FormHelper.html#%24_defaultConfig ）。

因此，要修改 CakePHP 文档中给出的示例以匹配这种情况并删除隐藏的 _method`<div>`周围的包装（假设 HTML5）：`<input>`

```
// In your View class
$this->loadHelper( 'Form' , [ 'templates' => 'app_form' ] );

// in config/app_form.php
return [
    'hiddenBlock' => '{{ content }}'
]; 
```

我遇到了这个问题，因为我最近实施了一个不允许内联样式的内容安全策略，我认为我应该分享我的工作解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T02:32:32.930

div 是有效的 HTML。

> 在 HTML5 之前，非块级元素（例如）在标签`<input>`内直接无效。[来源](http://w3fools.com/#html_forms)`<form>`

编辑：要回答你的问题，你不能轻易摆脱它。它被硬编码到 FormHelper::create() 中，您必须在自定义帮助程序中覆盖该方法。为什么它仍然困扰着你？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T04:30:33.173

[此链接](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#creating-forms)可能会对您有所帮助。

每当您使用 FormHelper->create() 方法时，都会生成一个隐藏的输入字段来覆盖默认的 HTTP 方法。您也可以通过传递[type option](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#options-for-create)来更改它。请询问它是否不适合您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T08:17:24.787

尝试：

```
echo $this->Form->create('User', array(
'inputDefaults' => array(
    'div' => false
   )
)); 
```

不会在表单的任何输入上创建 div。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-20T03:09:38.460

使用 hiddenField => false 属性

# javascript - 单击输入表单时为 Raphael 制作的对象添加光晕

> ID：11571588
> 
> 赞同：0
> 
> 时间：2012-07-20T01:19:31.493
> 
> 标签：javascript, html, onclick, dom-events, raphael

我使用 raphael JS 库创建了一个形状。我的页面上有一个输入字段。单击输入字段时，我想在该形状周围切换发光。这是我已经尝试过的代码：

```
var searchBoxHtml =  document.getElementsByName("searchBox");
searchBoxHtml.onclick= function () {europe_africa.glow({width: 10,fill: false, opacity: 0.5, offsetx: 0,offsety: 0,color:'white'}); }; 
```

这是行不通的。我也尝试将事件处理程序放在输入标签中，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:45:12.510

我真的发现了我的错误。我只需要在末尾添加一个 [0]，`getElementsByName("searchBox")`因为它返回的值是一个数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T01:55:50.203

您是否尝试过在您的 searchBox 元素中添加`z-index: 9999`, 和 a ？`position: relative`似乎 raphael 对象可能位于您的 div 元素之上。

# apache-flex - Immediately clearing the contents of an IFrame in Flex

> ID：11571597
> 
> 赞同：1
> 
> 时间：2012-07-20T01:20:45.463
> 
> 标签：apache-flex, iframe, actionscript, air

I have a Flex HTML component that is displaying content from a remote URL and a button in the Flex application that reloads the content. However, it takes a few seconds for the IFrame's content to refresh. During this time, there is no obvious feedback to the user that any action is underway.

I would like to clear the contents of the IFrame, so there is immediate feedback after clicking refresh, and then load the remote URL again. Is there a way to do this?

I've tried setting the HTMLText property to "" and setting the IFrame location to "about:blank", and neither of these have the desired immediate effect. (on it's own, setting the location to about:blank immediately clears the IFrame, but if it is followed by resetting the location to the original URL, the immediate clearing doesn't occur. Is this something to do with the IFrame caching the original page?)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T04:26:40.497

您可以解决的另一种方法是准备一个具有相同大小和相同位置的空白 iframe 或加载屏幕，同时加载内容，隐藏内容 iframe，并显示空白 iframe 或加载屏幕。这可能更容易获得更灵活的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:35:54.777

一种方法是从显示列表中删除组件并在其位置添加一个新的实例化组件。

这将确保完全初始化状态。

# javascript - 如何在 Javascript 中使用 takeWhile 函数？

> ID：11571600
> 
> 赞同：4
> 
> 时间：2012-07-20T01:21:17.273
> 
> 标签：javascript, underscore.js

有一个用于下划线的mixin，它有一个`takeWhile`功能，你可以在这里看到它[，](https://gist.github.com/1222480)在[这里](https://github.com/JosephMoniz/UnderscoreKit/blob/master/underscorekit.js)（我正在使用这个）。

你怎么用这个？

`takeWhile: function(list, callback, context)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T01:27:34.130

你这样用...

```
var newArr = _.takeWhile([1, 2, 3, 2, 1], function(elem) {
     return elem < 3;
}); // [1, 2] 
```

[杰宾](http://jsbin.com/itofuc/edit#preview)。

# ruby-on-rails - Javascript manifest file "application.js" is not processed

> ID：11571605
> 
> 赞同：9
> 
> 时间：2012-07-20T01:22:31.963
> 
> 标签：ruby-on-rails, asset-pipeline

I am on a Macbook Pro and I created a new Rails 3.2 app, but the assets pipeline does not work. Here is what I did:

```
$ rails version
  Rails 3.2.5
$ rails new test_assets
$ cd test_assets
$ rails server 
```

The server is started OK, but if I visit `http://0.0.0.0:3000/assets/application.js`, it turns out the manifest file is not processed at all, it shows:

```
//... some comments ...
//= require jquery
//= require jquery_ujs
//= require_tree .
; 
```

I tried to do the exactly the same steps on my other Macbook Pro. It works well. Visiting `http://0.0.0.0:3000/assets/application.js` on that machine shows a compiled javascript file with all the contents.

I have read [http://railscasts.com/episodes/279-understanding-the-asset-pipeline](http://railscasts.com/episodes/279-understanding-the-asset-pipeline) and [http://guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html), and I searched for hours on the web but with no clue.

Your help is really appreciated!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T03:54:43.310

建议：安装 node.js 或`gem 'therubyracer', :platforms => :ruby`在 Gemfile 中取消注释

我遵循相同的步骤，我的日志文件看起来像这样......如果你启动服务器并请求 /assets/application.js，你的会是什么样子？如您所见，我使用的是 3.2.6，它编译了我的 application.js

```
=> Booting WEBrick
=> Rails 3.2.6 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
[2012-07-19 22:50:02] INFO  WEBrick 1.3.1
[2012-07-19 22:50:02] INFO  ruby 1.9.3 (2012-02-16) [x86_64-darwin11.3.0]
[2012-07-19 22:50:02] INFO  WEBrick::HTTPServer#start: pid=21393 port=3000

Started GET "/assets/rails.png" for 127.0.0.1 at 2012-07-19 22:50:13 -0500
Connecting to database specified by database.yml
Served asset /rails.png - 200 OK (9ms)

Started GET "/assets/application.js" for 127.0.0.1 at 2012-07-19 22:50:23 -0500
Compiled jquery.js  (2ms)  (pid 21393)
Compiled jquery_ujs.js  (0ms)  (pid 21393)
Compiled application.js  (26ms)  (pid 21393)
Served asset /application.js - 200 OK (74ms)
[2012-07-19 22:50:24] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-28T22:32:24.677

我遇到过同样的问题！

将 Ruby 从 2.0.0 降级到 1.9.3 解决了这个问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:36:09.553

面临完全相同的情况。

我发现我使用像 v2.0.0rc 之类的 ruby​​ 或类似的东西，如果我将它降级到 1.9.3p194（两者都在 Rbenv 下），一切都会完美。

尽管您可以在视图中使用 helper，例如`<%= javascript_include_tag "jquery", "jquery_ujs" %>`，但即使使用 ruby​​2.0.0，它也对我有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-14T06:38:14.573

我今天遇到了同样的问题，我准备将 Ruby 从 2.0 降级到 1.9.3 以解决 application.js 无法编译的问题。该问题发生在安装了 Ruby 2.0（和 Rails 3.2.8）的生产服务器上。在开发机器上（Ruby 1.9.3 和 Rails 3.2.8）application.js 编译得很好。

最后，我将生产服务器从 Rails 3.2.8 升级到 3.2.14；删除 Gemfile.lock，然后运行 ​​bundle install。然后我重新编译了资产，瞧，application.js 编译了资产。

我想与 Stackoverflow 的观众分享这个，也许这会解决别人的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-08T12:22:48.233

使用 ruby​​ 2.0 的第一个官方支持的 rails 3.2 版本是 3.2.13。因此将您的 rails 版本升级到 rails 3.2.13 将解决问题。

> 升级步骤：
> 
> 1) 将 Gemfile 中的 rails 版本更改为 gem 'rails', '3.2.22'。
> 
> 2）捆绑更新轨道

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-20T01:41:16.967

在开发时，资产没有预编译。如果你想看到它们，你应该运行`bundle exec rake assets:precompile`.

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2013-01-28T14:25:58.567

打开 enviornment/development.rb 并设置 config.assets.debug = false 。而已

# php - PHP while()：三次后如何停止？

> ID：11571606
> 
> 赞同：1
> 
> 时间：2012-07-20T01:22:32.330
> 
> 标签：php, while-loop

我正在尝试制作一个 PHP 照片库（是的，我尝试了其他解决方案，但没有一个适用于我想要的设置）并且我试图`while`在三次后停止此循环，因为我想在每个表中显示三个缩略图排。这是我当前的代码：

```
<table>
<tr>
<?php while($row2 = mysql_fetch_assoc($result)) { echo "
<td><a href='URL/".$row2['file']."'><img src='URL/".$row2['file']."' width='200' height='106' /></a></td>
"; } ?>
</tr>
</table> 
```

我不记得学习过任何关于停止 PHP 循环的知识，所以请帮忙！将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T02:16:11.317

所以你真正想要的是每行 3 张图像。我认为这会起作用：

```
<table>
  <?php 
    $i = 0;
    while($row2 = mysql_fetch_assoc($result)) { 
      if($i%3==0)
        echo "<tr>"; 
      echo "<td><a href='URL/".$row2['file']."'><img src='URL/".$row2['file']."' width='200' height='106' /></a></td>";
      if($i%3==2)
        echo "</tr>";
      $i++;
    }
    if($i%3!=0)
      echo "</tr>";
  ?>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T01:25:16.547

```
<table>
<tr>
<?php 
$i=1;
while($row2 = mysql_fetch_assoc($result)) { echo "
<td><a href='URL/".$row2['file']."'><img src='URL/".$row2['file']."' width='200' height='106' /></a></td>
"; 
if($i>=3) break;
$i++;

} ?>
</tr>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T01:33:20.450

为什么不限制原始 MySQL 查询中返回的结果？您可以像这样为您的查询添加限制：

```
limit 3 
```

这样 $result 将只有三行，因此不需要额外的 PHP 和内存中数据库中的更少数据

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T01:29:23.413

尝试将 AND 添加到 while 并与计数器比较 while($row2=mysql_fetch_assoc($result) && $i < 3)

在循环之前将 $i 设置为 0

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-20T01:25:44.907

您可以添加一个计数器，例如：

```
$nr = 1;
while($row2 = mysql_fetch_assoc($result)) { 
if ($nr < 4) {
do your thing;
}
$nr++;
} 
```

# html - 通过 https 检索 YouTube 订阅者缩略图

> ID：11571609
> 
> 赞同：0
> 
> 时间：2012-07-20T01:22:56.410
> 
> 标签：html, ajax, youtube-api

是否可以显示通过 https 而不是 http 订阅提要的嵌入式 YouTube 播放列表的缩略图？

我正在使用 https 的网站区域，通过 http 检索这些缩略图会导致弹出安全警告，我正试图摆脱它。

缩略图作为 YouTube API 的一部分被请求，因此无法通过 https 直接请求它们：

```
// loop through JSON and assign values to My obj
        for (var i = 0; i < len; i ++ ) {

            TheVideo.My[i] = {};
            ja = jsonArticles[0][i];

            TheVideo.My[i].img = ja.media$group.media$thumbnail[0].url;

        } 
```

我直接寻找的是在上面的最后一行调用 .url 时从 https 而不是 http 调用缩略图。

编辑：

我找到了解决该问题的方法，但我编辑了我的原始帖子以澄清问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T06:14:24.790

答案有点像附加组件，但它可以完成工作。我附加了一个替换方法来从 https 而不是 http 请求它：

```
// loop through JSON and assign values to My obj
        for (var i = 0; i < len; i ++ ) {

            TheVideo.My[i] = {};
            ja = jsonArticles[0][i];

            TheVideo.My[i].img = ja.media$group.media$thumbnail[0].url.replace('http://','https://');

        } 
```

很高兴知道在这些情况下这是可能的。

希望这可以潜在地回答其他人的问题。

# django - Django @login_required 删除 https

> ID：11571616
> 
> 赞同：9
> 
> 时间：2012-07-20T01:23:56.050
> 
> 标签：django, ssl, https, nginx

我正在尝试使用 SSL 在本地测试我的 Django 应用程序。我和`@login_required`装饰师有意见。所以当我点击时`/locker`，我被重定向到`/locker/login?next=/locker`. 这适用于 http。

但是，每当我使用 https 时，重定向都会以某种方式断开安全连接，所以我得到类似`https://cumulus.dev/locker -> http://cumulus.dev/locker/login?next=/locker`

如果我直接进入`https://cumulus.dev/locker/login?next=locker`该页面，则可以通过安全连接正常打开。但是一旦我输入用户名和密码，我就会回到`http://cumulus.dev/locker`.

我正在使用 Nginx 处理 SSL，然后与`runserver`. 我的 nginx 配置是

```
upstream app_server_djangoapp {
server localhost:8000 fail_timeout=0;
}

server {
listen 80;
server_name cumulus.dev;

access_log  /var/log/nginx/cumulus-dev-access.log;
error_log  /var/log/nginx/cumulus-dev-error.log info;

keepalive_timeout 5;

# path for static files
root /home/gaurav/www/Cumulus/cumulus_lightbox/static;

location / {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;

    if (!-f $request_filename) {
        proxy_pass http://app_server_djangoapp;
        break;
    }
}
}

server {
listen 443;
server_name cumulus.dev;

ssl on;
ssl_certificate /etc/ssl/cacert-cumulus.pem;
ssl_certificate_key /etc/ssl/privkey.pem;

access_log  /var/log/nginx/cumulus-dev-access.log;
error_log  /var/log/nginx/cumulus-dev-error.log info;

keepalive_timeout 5;

# path for static files
root /home/gaurav/www/Cumulus/cumulus_lightbox/static;

location / {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Ssl on;
    proxy_set_header Host $http_host;
    proxy_redirect off;

    if (!-f $request_filename) {
        proxy_pass http://app_server_djangoapp;
        break;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T02:29:10.883

Django 仅在代理后面在纯 HTTP 上运行，因此它将始终使用它来构造绝对 URL（例如重定向），除非您配置它如何查看代理请求最初是通过 HTTPS 发出的。

从 Django 1.4 开始，您可以使用[`SECURE_PROXY_SSL_HEADER`](https://docs.djangoproject.com/en/dev/ref/settings/#secure-proxy-ssl-header)设置来执行此操作。当 Django 看到配置的 header 时，它会将请求视为 HTTPS 而不是 HTTP：`request.is_secure()`将返回 true，`https://`将生成 URL，等等。

但是，请注意文档中的安全警告：您*必须*确保代理从所有传入的客户端请求（HTTP 和 HTTPS）中替换或删除受信任的标头。您上面的 nginx 配置不使用`X-Forwarded-Ssl`，使其具有欺骗性。

对此的常规解决方案是在您的每个代理配置中根据需要设置`X-Forwarded-Protocol`为`http`或。`https`然后，您可以配置 Django 以使用以下方法查找它：

```
SECURE_PROXY_SSL_HEADER = ('HTTP_X_FORWARDED_PROTOCOL', 'https') 
```

# gcc - 这些分析开关的适当用法是什么？

> ID：11571619
> 
> 赞同：1
> 
> 时间：2012-07-20T01:24:32.883
> 
> 标签：gcc, g++, profiling, compiler-flags

我对 GCC 还是很陌生，我想知道我究竟如何使用某些分析开关。

我已经阅读了`-ftree-loop-ivcanon`and的 GCC 手册条目`-fivopts`（两者都没有暗示`-fprofiled-generate/use`），虽然我对它们的作用有一个（相对）好主意，但我不知道我应该在哪里使用它们，或者我是否应该使用它们.

我应该在组合编译中使用标志吗？

`g++ Example.cxx -o Example.exe -Wall -ftree-loop-ivcanon -fivopts`

只有汇编？

`g++ Example.cxx -o Example.o -c -Wall -ftree-loop-ivcanon -fivopts`

还是只有链接？

`g++ Example.o -o Example.exe -Wall -ftree-loop-ivcanon -fivopts`

我应该只在启用分析时使用这些标志，还是可以将它们与 -On 一起使用？

最后，如果我在分析时确实使用了这些，我应该将它们与生成开关或使用开关一起使用，还是两者都使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T04:22:09.543

据我所知，您只能在编译时使用这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:44:52.010

`-ftree-loop-ivcanon` and `-fivopts` only affect compilation, not linking, but I'm pretty sure they don't do anything unless you enable optimisation, with at least `-O`.

You probably don't need to use them, just use `-O` or `-O2` or `-O3` instead of tweaking individual or more-specific options, unless you know exactly what you're trying to achieve and are measuring the precise effects.

If you're trying to use profile-guided optimisation then you definitely want to use `-O` or a higher optimisation level - it's a complete waste of time optimising based on profile data if you're not even enabling basic optimisations such as inlining and constant propagation.

# regex - 如何使用正则表达式（regex）添加稍微相似的内容？

> ID：11571623
> 
> 赞同：0
> 
> 时间：2012-07-20T01:25:07.703
> 
> 标签：regex, dreamweaver, replace

我在一个包含大约 30 个实例的文件上使用 Dreamweaver：

```
'portfolio_bg' =>'#555555',
'portfolio_font'=>'#ffffff', 
```

但是，对于每个实例，十六进制代码都是不同的。我想在上面添加以下两行：

```
'product_bg' =>'#555555',
'product_font'=>'#ffffff', 
```

我的两条产品线中的十六进制代码将与其上方的产品组合线的十六进制代码匹配。

我如何在 Dreamweaver 的查找和替换中使用正则表达式来完成他的工作？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T02:43:22.927

这在 EditPad Pro 中对我有用；它也应该在 Dreamweaver 中工作。

寻找：

```
'portfolio_bg'\s*=>\s*'(#[0-9A-Fa-f]+)',(\s+)'portfolio_font'\s*=>\s*'(#[0-9A-Fa-f]+)',\s* 
```

代替：

```
$&$2'product_bg' =>'$1',$2'product_font'=>'$3',$2 
```

**编辑：**更正替换字符串以使用`$&`而不是`$0`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T02:11:18.437

对于第一行，使用以下 RegEx 替换：

寻找：

```
'portfolio_bg'[ \t]*=>[ \t]*'(#[0-9]{6})', 
```

代替：

```
'portfolio_bg' =>'\1',\n'product_bg' =>'\1', 
```

对于第二行，使用以下 RegEx 替换：

寻找：

```
'portfolio_font'[ \t]*=>[ \t]*'(#[0-9a-f]{6})', 
```

代替：

```
'portfolio_font' =>'\1',\n'product_font' =>'\1', 
```

# objective-c - 将 NSMutableDictionary 中的所有值连接为 int、NSInteger 和 NSString

> ID：11571629
> 
> 赞同：2
> 
> 时间：2012-07-20T01:26:00.537
> 
> 标签：objective-c, ios, casting, concatenation, nsmutabledictionary

所以我有几个 NSMutableDictionarys 并且特定字典的每个键/值对都包含一个字符串或整数值。我想知道是否有办法遍历字典并连接值。在 PHP 中，我可以使用数组来做这样的事情

```
// either the dictionary holds all integers or all string values
$integer_array = array( 'a' => 2, 'b' => 9, 'c' => 2, 'd' => 0, 'e' => 1 );

foreach( $integer_array as $key => $value ) {
    $concatenated_value .= $value;
}

// cast to int
$concatenated_value = ( int ) $concatenated_value;

// prints: 29201
echo $concatenated_value; 
```

我也可以使用[implode(](http://php.net/manual/en/function.implode.php) )

```
$concatenated_value = ( int )(implode("", $integer_array));

// prints: 29201
echo $concatenated_value; 
```

iOS Objective-C 有类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T01:38:56.110

我不相信它有预定义的功能。对我来说，这似乎不是一件很常见的事情（在 PHP 中很常见吗？）。我想代码在理论上看起来像这样：

```
int finalVal = 0;
for (NSString *key in keyArray)
{
    //If it is variable between NSString and NSNumber as you say, you will
    //need to do type checking here.
    NSNumber *numVal = [dictionary objectForKey:key];
    int num = [numVal intValue];

    //----Don't need this part if all values are single digits
    while(num > 10)
    {
        finalVal += num;
        finalVal *= 10;
        num /= 10;
    }
    //--------------------------------------------------------

    finalVal += num;
    finalVal *= 10;
}
finalVal /= 10; 
```

但是，这不太可能产生您想要的结果，因为字典没有排序。我认为您需要一个不同的数据结构或一个数组，按照您插入它们的顺序保存键（但此时您最好只使用一个数组）。

**编辑**由于您使用的是有序的键数组，因此我编辑了上面的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T01:51:45.277

这是你可以做到的（它要长一些，因为可可中的字典没有排序）。

```
NSMutableDictionary *d = [NSMutableDictionary dictionaryWithObjectsAndKeys:
    [NSNumber numberWithInt:1], @"a",
    [NSNumber numberWithInt:2], @"b",
    [NSNumber numberWithInt:34], @"c",
    [NSNumber numberWithInt:56], @"d",nil];
NSArray *sortedKeys = [[d allKeys] sortedArrayUsingSelector: @selector(compare:)];
NSMutableString *res = [NSMutableString string];
[sortedKeys enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    [res appendFormat:@"%d", [[d objectForKey:obj] intValue]];
}];
NSLog(@"%@", res); 
```

这打印`123456`

# iphone - CLLocationCoordinate2D 到 MKAnnotation

> ID：11571630
> 
> 赞同：1
> 
> 时间：2012-07-20T01:26:01.817
> 
> 标签：iphone, ios, xcode, mapkit, core-location

我有一个 MapView，我正在尝试在当前坐标处添加注释。

我在 viewWillAppear 中的代码：

```
CLLocationCoordinate2D location;
location.latitude = [maps.barLat doubleValue];
location.longitude = [maps.barLong doubleValue];
[_mapView addAnnotation:location]; 
```

我收到一个错误`addAnnotation`，上面写着

> 将 CLLocationCoordinate2D 发送到不兼容类型 MKAnnotation 的参数。

我看到的所有其他示例对此代码都没有问题，我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T02:15:30.440

如果您查看[Apple 的 API 文档](http://developer.apple.com/library/ios/#DOCUMENTATION/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html)，该`addAnnotation:`方法需要一个`id<MKAnnotation>`，而不是一个`CLLocationCoordinate2D`. 这就是你错误的原因。

如果您只想要一个简单的注释，没有任何花哨的花里胡哨，只需这样做：

```
CLLocationCoordinate2D location;
location.latitude = [maps.barLat doubleValue];
location.longitude = [maps.barLong doubleValue];
MKPointAnnotation *annotation = [[MKPointAnnotation alloc] init];
annotation.coordinate = location;
[_mapView addAnnotation: annotation]; 
```

然而，大多数人最终创建了自己的实现`MKAnnotation`协议的类，以提供自定义注释。但是，如果你只需要一个别针，上面的方法就可以了。

# java - 使用不同编码编码的两个不同字符串可以具有相同的字节序列吗？

> ID：11571632
> 
> 赞同：3
> 
> 时间：2012-07-20T01:26:03.860
> 
> 标签：java, encoding, character-encoding, hash

使用不同编码编码的两个不同字符串可以具有相同的字节序列吗？即以下示例中的一些“字符串一”和“字符串二”在使用两种不同的编码（Cp1252 和 UTF-8 只是示例）进行编码时会导致测试通过吗？

```
import java.io.UnsupportedEncodingException;
import java.util.Arrays;

import org.junit.Assert;
import org.junit.Test;

public class EncodingTest {
    @Test
    public void test() throws UnsupportedEncodingException {
        final byte[] sequence1 = "string one".getBytes("Cp1252");
        final byte[] sequence2 = "string two".getBytes("UTF-8");
        Assert.assertTrue(Arrays.equals(sequence1, sequence2));
    }
} 
```

我的代码中的一个错误对使用 JVM 的默认编码的字符串生成的字节序列进行哈希处理，我需要验证当代码使用不同的字符串和不同的 JVM 文件编码运行时是否会导致哈希冲突（在 Windows 和 Linux 上运行时可能会发生这种情况例如）。

由于编码是字节序列和字符之间的映射，我认为可能有一些字符串和编码通过了上述测试。但只是想知道是否有任何众所周知的例子或一些很好的理由说明为什么我不应该依赖哈希冲突不会发生。

谢谢

PS：这仅适用于 JDK 1.6 支持的编码，而不是某些编造的编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T04:47:11.490

是的。举个简单的例子，编码为 ISO-8859-1 的字符串“¡”（倒置感叹号）和编码为 ISO-8859-2 的字符串“Ą”（大写的 A 和 ogoned）都成为单字节序列A1（十六进制）。当使用将字符映射到单个字节的非常简单的编码时，或多或少会发生这种情况。否则它们不会是不同的编码。当涉及更复杂的编码方案时，它肯定会发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T02:10:44.987

是的，至少对于不同长度的字符串是可能的。

字符串`"\u2020"`（或`"†"`）被编码为`0x20,0x20`UTF-16。这也是`"\x20\x20"`（由两个 ASCII 空格组成的字符串）以 ASCII 编码的内容。

当然，[匕首](http://www.fileformat.info/info/unicode/char/2020/index.htm)，在语言中并不经常出现 [=^_^=]，但是一些标准的 [非拉丁] 字母可以生成类似的字节序列，映射到标准（非控制字符）ASCII encoding .. 如果放宽控制字符的限制，还有更多。

*找到两个相似的“现实”字符串*（例如相同长度和“敏感数据”）可以映射到具有不同编码的相同字节序列的情况会更有趣。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T02:13:01.447

此代码最终应生成一个示例：

```
 while(true){
        Random r = new Random();
        byte[] bytes = new byte[4];
        r.nextBytes(bytes);
        try{
            String raw = Arrays.toString(bytes);
            String utf8 = new String(bytes, "UTF-8");
            String latin1 = new String(bytes, "ISO-LATIN-1");
            System.out.println(raw + " is " + utf8 + " or " + latin1);
            break;
        }catch(Exception e){}
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T01:40:28.763

这是一个简单的方法：大多数代码页和 UTF-8 共享 ASCII 编码 (0x00 = 0x7F)。如果您的文本是简单的英语，那么它很有可能是 ASCII - 无论声明的编码是什么，因为它主要使用简单的非重音字符。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T01:43:14.487

如果源字符串的编码支持多字节字符，而目标编码不支持多字节字符，那么发生冲突似乎是合理的，因为多字节字符需要映射到单个字符字节字符集。

例如，如果输入字符串是用中文编写的，并且目标字符集是*US-ASCII*，那么许多中文字符肯定会映射到相同的 US-ASCII 表示。

# android - 设置肥皂标题 ksoap2 android

> ID：11571645
> 
> 赞同：0
> 
> 时间：2012-07-20T01:27:52.133
> 
> 标签：android, soap, header, ksoap2

首先，对于提出一个在 SOF 中已经很常见的问题，我深表歉意。

但我是初学者，我当然很残忍。

我正在创建一个与 WS 通信的 android 应用程序。所以我可以向WS发出请求，我必须在信封的标题中添加一个值，但我不能添加。

我在 SOF 中找到了一些关于它的答案，但是，无法完全理解它是如何工作的。也许，我的怀疑是由于标题的节点，这最终让我更加困惑。

我发现我最终没有帮助的答案之一：“[如何使用 ksoap2 android 设置肥皂标题](https://stackoverflow.com/questions/5613675/how-to-set-soap-header-using-ksoap2-android)”

以下是需要完成的 XML 请求：

```
 ?xml version="1.0" encoding="utf-8"?
 soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"

soap:Header
   ValidationSoapHeader xmlns="http://tempuri.org/"
      DevToken>string/DevToken
   /ValidationSoapHeader
/soap:Header

soap:Body
  ListaCidades xmlns="http://tempuri.org/" /
/soap:Body
/soap:Envelope 
```

我的代码如下：

```
SoapObject request = new SoapObject(ApplicationData.NAMESPACE, ApplicationData.METHOD_NAME_LISTA_CIDADES);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

    envelope.dotNet = true;

    envelope.setOutputSoapObject(request); 
```

我究竟如何使用信封.HeaderOut？是否真的有必要创建一个辅助方法来构建一个元素，即使只需要传递一个参数（DevToken）？

感谢您的关注！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T08:24:57.240

```
 Element h = new Element().createElement(NAMESPACE, "AuthHeader");
   Element Username = new Element().createElement(NAMESPACE, "Username");
   Username.addChild(Node.TEXT, "CBROWN");
   h.addChild(Node.ELEMENT, Username);
   Element wssePassword = new Element().createElement(NAMESPACE, "wssePassword");
   wssePassword.addChild(Node.TEXT, "welcome");
   h.addChild(Node.ELEMENT, wssePassword);

   envelope.headerOut = new Element[]{h}; 
```

添加上面的代码以在信封中添加标题

# c# - 具有用户指定顺序的数据结构

> ID：11571646
> 
> 赞同：0
> 
> 时间：2012-07-20T01:28:13.100
> 
> 标签：c#, list, sql-order-by

我有这门课：

```
public class Item
{
    public int Id { get; set; }
    public string Name { get; set; }
    public decimal Price { get; set; }
} 
```

我想将实例存储`Item`在列表中，并像用户订购它们一样保持有序（在选择项目时可能在带有上下箭头的 GUI 中）......

我应该向我的`Item`班级添加一个订单成员，还是有一个特定的数据结构可以保持任意用户指定的订单。

注意：我将使用它来保存物品列表，按照人们在商店中看到它们的顺序排列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T05:33:51.563

如果您打算将列表保存到数据库，那么您可能希望在您的 Item 类中包含一个 Order 属性；SQL Server 等数据库不保证结果集的顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T01:37:18.920

List/Array/Collection 是有序的项目序列的名称。

`List<Item>`足以使物品保持特定的顺序。请注意，在这种情况下，重新排序项目将是“慢”（ O(n) ）操作，以便将单个项目移动到新位置。如果您只需要添加常规`List<T>`可能是不需要任何其他字段的最简单的选择。

# ajax - Ajax 和 Django render_to_response（如何在成功函数中呈现响应）

> ID：11571649
> 
> 赞同：3
> 
> 时间：2012-07-20T01:28:39.140
> 
> 标签：ajax, django

目前我正在尝试实现登录验证系统。我正在使用 ajax，以便用户可以在不被重定向到另一个页面的情况下获得响应。我的 ajax 函数发送用户输入的电子邮件和密码，并在回调函数中获取消息，可以分为三种类型：电子邮件、密码或实际的 HttpResponse 对象。但我不知道如何使用 ajax 和 jquery 呈现给定的 http 响应对象。location.href 是一个选项吗？我正在粘贴下面的代码。

在 JavaScript 中：

```
function loginSubmit(email, password) {
    var d= "email=" + email + "&password=" + password;
    $.ajax({
        url: "/login",
        type: "POST",
        dataType: "text",
        data: d,
        success: function(m) {
            if (m == "email") {
                $("#emailMessage").html("There is no account associated with this email address.");
                $("#emailError").show();
                $("#emailError").fadeOut(5000, function() {});
            } else if (m == "password") {
                $("#emailMessage").html("There is no account associated with this email address.");
                $("#emailError").show();
                $("#emailError").fadeOut(5000, function() {});
            } else {

            }
        }
    });
} 
```

视图功能：

```
def login(request):
    json = request.POST
    e = json['email']
    p = json['password']

    u = User.objects.filter(email=e)

    if (len(u)):
        up = User.objects.filter(email=e, password=p)
        if (len(up)):
            return render_to_response('profile.html', context_instance=RequestContext(request))
        else:

            data = "password"
            c = RequestContext(request, {'result':data})
            t = Template("{{result}}")
            datatype=u"application/javascript"
            return HttpResponse(t.render(c), datatype)
    else:
        data = "email"
        c = RequestContext(request, {'result':data})
        t = Template("{{result}}")
        datatype=u"application/javascript"
        return HttpResponse(t.render(c), datatype) 
```

ps 目前我正在使用虚拟模板和 HttpResponse 将数据发送到 ajax 成功回调函数。有没有更有效的方法来完成这个（发回 json 数据）？我会等待你们的回复！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T07:01:10.960

```
from django.contrib.auth import authenticate, login as auth_login

def login(request):

    # Use authentication framework to check user's credentials
    # http://djangosnippets.org/snippets/1001/ for auth backend
    user = authenticate(
               email    = request.POST['email'],
               password = request.POST['password'], )

    if user is not None:
        # Use Auth framework to login user
        auth_login(request, user)
        return render_to_response('profile.html',
                 context_instance=RequestContext(request))

    else:
        # Return Access Denied
        # Never return bad email/bad password. This is information leakage
        # and helps hackers determine who uses your platform and their emails.
        return HttpResponse("Failed: Bad username or password", status=403)

function loginSubmit(email, password) {
    $.ajax({
        url: "/login",
        type: "POST",
        data: {email:email, password:password},
        success: function(data) {
            var returned_html = $(data);
            $("#target_profile_area").clear().append(returned_html);
        },
        error: function(jqXHR) {
            if (jqXHR.statusCode == 403) {
                $("#loginMessage").text("Your login details are incorrect");
            } else {
                $("#loginMessage").text("Error Contacting Server");
            }
            $("#loginError").show();
            $("#loginError").fadeOut(5000, function() {});
        }
    });
} 
```

# php - 使用 symfony2 和学说出现“无法刷新用户”错误

> ID：11571651
> 
> 赞同：6
> 
> 时间：2012-07-20T01:28:55.407
> 
> 标签：php, symfony, doctrine-orm

我有用户类作为基类，然后我从用户类扩展了教师。

当我尝试登录时出现此错误

> 您不能从不包含标识符的 EntityUserProvider 刷新用户。用户对象必须使用由 Doctrine 映射的自己的标识符进行序列化。

我在 user.php 中有序列化/反序列化功能，因为我已经从 FOSUserbundle 解决了这个问题

```
public function serialize()
    {
        return serialize(array(
            $this->password,
            $this->salt,
            $this->usernameCanonical,
            $this->username,
            $this->expired,
            $this->locked,
            $this->credentialsExpired,
            $this->enabled,
        ));
    } 
```

我无法找到可以检查错误的地方。我被困住了。请帮忙

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T12:22:05.773

```
"You cannot refresh a user from the EntityUserProvider that does not contain an identifier. The user object has to be serialized with its own identifier mapped by Doctrine." 
```

这不是问题的答案，但如果有人用谷歌搜索上面的错误消息（就像我一样），这是最热门的。自从我找到了我的解决方案，我想我会分享。

如果您从数据库中删除当前用户，然后尝试重定向用户，您将收到此错误。*（这似乎是一个愚蠢的错误，但错误消息肯定没有帮助！）*解决方案是在重定向之前简单地清除会话。

```
$this->get('security.context')->setToken(null);
$this->get('request')->getSession()->invalidate(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T04:49:08.497

从[代码](https://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Doctrine/Security/User/EntityUserProvider.php#L83)`EntityUserProvider.php`看来，您还必须对用户进行序列化`id`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-08T00:58:22.877

刚刚使用[类表继承](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/inheritance-mapping.html#class-table-inheritance)遇到了同样的问题，这是由`id`属性设置为的可见性引起的`private`，所以子类无法访问id，改变它来`protected`解决它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-12T11:54:00.063

User 对象在某些时候被克隆，所以一定**不**要这样做（就像我做的那样）：

```
function __clone()
{
    $this->id = null;
} 
```

# c# - 希望使用选定的选项卡事件为网格边距设置动画，而不使用 Blend

> ID：11571652
> 
> 赞同：0
> 
> 时间：2012-07-20T01:28:57.293
> 
> 标签：c#, wpf, blend

我有一个项目将有多个选项卡。当用户选择一个选项卡时，我希望该选项卡内的网格滑出。我想我可以通过改变网格边距来实现这一点。我实际上有一个可行的解决方案，但它需要包含来自 Blend 的 2 个 DLL。我认为不使用 Blend 也可以实现相同的效果，但我无法弄清楚。下面是情节提要和 tabItems xaml

```
 <Storyboard x:Key="tabAdminSlide">
        <ThicknessAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Margin)" Storyboard.TargetName="grid1">
            <EasingThicknessKeyFrame KeyTime="0" Value="400,0,0,0"/>
            <EasingThicknessKeyFrame KeyTime="0:0:0.5" Value="0,0,0,0">
                <EasingThicknessKeyFrame.EasingFunction>
                    <ExponentialEase EasingMode="EaseOut"/>
                </EasingThicknessKeyFrame.EasingFunction>
            </EasingThicknessKeyFrame>
        </ThicknessAnimationUsingKeyFrames>
    </Storyboard>

    <TabItem Header="Run as Admin" x:Name="tabAdmin" Background="LightBlue">
         <i:Interaction.Triggers>
             <ei:DataTrigger Binding="{Binding SelectedIndex, ElementName=tabControl}" Value="0">
                 <ei:ControlStoryboardAction Storyboard="{StaticResource tabAdminSlide}"/>
             </ei:DataTrigger>
         </i:Interaction.Triggers> 
            <Grid Height="Auto" x:Name="grid1" Width="Auto">
                <Grid.Background>
                    <LinearGradientBrush StartPoint="-0.002,0.498" EndPoint="1.084,0.498">
                        <GradientStop Color="LightBlue" Offset="0.446" />
                        <GradientStop Color="White" Offset="1" />
                    </LinearGradientBrush>
                </Grid.Background>
                <Button Content="Button" Height="23" HorizontalAlignment="Left" Margin="40,179,0,0" Name="button1" VerticalAlignment="Top" Width="75" Grid.ColumnSpan="2" />
            </Grid>
    </TabItem> 
```

看起来像

```
<i:Interaction.Triggers>
    <ei:DataTrigger Binding="{Binding SelectedIndex, ElementName=tabControl}" Value="0">
        <ei:ControlStoryboardAction Storyboard="{StaticResource tabAdminSlide}"/>
    </ei:DataTrigger>
</i:Interaction.Triggers> 
```

是我需要更换的部件，但我不能确定。任何帮助都会得到帮助

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T03:00:57.493

你应该可以使用

```
<TabItem.Triggers>
    <EventTrigger RoutedEvent="Selector.Selected">
        <BeginStoryboard Storyboard="{StaticResource tabAdminSlide}" />
    </EventTrigger>
</TabItem.Triggers> 
```

代替

```
<i:Interaction.Triggers>  
    <ei:DataTrigger Binding="{Binding SelectedIndex, ElementName=tabControl}" Value="0">  
        <ei:ControlStoryboardAction Storyboard="{StaticResource tabAdminSlide}"/>  
    </ei:DataTrigger>  
</i:Interaction.Triggers> 
```

# python - Flask/Werkzeug 调试器、流程模型和初始化代码

> ID：11571656
> 
> 赞同：8
> 
> 时间：2012-07-20T01:29:15.893
> 
> 标签：python, flask, wsgi, werkzeug

我正在使用 Flask 编写 Python Web 应用程序。我的应用程序在启动时与另一台服务器建立连接，并在后台定期与该服务器通信。

如果我不使用 Flask 的内置调试器（使用 debug=False 调用 app.run），没问题。

如果我确实使用内置调试器（使用 debug=True 调用 app.run），Flask 会使用相同的代码启动第二个 Python 进程。最终侦听 HTTP 连接并通常按照我的应用程序应有的行为是子进程，我认为当调试器启动时父进程只是在那里监视它。

但是，这对我在两个进程中运行的启动代码造成了严重破坏；我最终得到了与外部服务器的 2 个连接，2 个进程记录到同一个日志文件，通常，它们相互绊倒。

我认为在调用 app.run() 之前我不应该做真正的工作，但是我应该把这个初始化代码放在哪里（我只想每个 Flask 进程组运行一次​​，不管调试器模式如何，但需要在启动时运行并且独立于客户端请求）？

我发现[这个关于“Flask auto-reload and long-running thread”](https://stackoverflow.com/questions/9672871/flask-auto-reload-and-long-running-thread)的问题有些相关，但有些不同，答案对我没有帮助。（我也有一个单独的长时间运行的线程标记为守护线程，但是当重新加载器启动时它被杀死，但我要解决的问题是在任何重新加载需要发生之前。我不关心重新加载；我关心额外的进程，以及避免在父进程中执行不必要代码的正确方法。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T06:09:49.850

我确认这种行为是由于 Werkzeug 而不是 Flask 本身，它与重新加载器有关。你可以在 Werkzeug 的 serving.py 中看到这一点——在 run_simple() 中，如果 use_reloader 为真，它会通过一个辅助函数 run_with_reloader() / restart_with_reloader() 调用 make_server，它会在设置一个 subprocess.call(sys.executable) 之后环境变量 WERKZEUG_RUN_MAIN 将被子进程继承。

我用一个相当丑陋的 hack 来解决它：在我的主函数中，在创建 wsgi 应用程序对象并调用 app.run() 之前，我寻找 WERKZEUG_RUN_MAIN：

```
if use_reloader and not os.environ.get('WERKZEUG_RUN_MAIN'):
    logger.warning('startup: pid %d is the werkzeug reloader' % os.getpid())
else:
    logger.warning('startup: pid %d is the active werkzeug' % os.getpid()
    # my real init code is invoked from here 
```

我有一种感觉，如果在 Werkzeug 开始为它提供服务之前调用了一个方法，那么从应用程序对象内部完成会更好。不过，我不知道这种方法。

这一切都归结为：在 Werkzeug 的 run_simple.py 中，最终只会调用一次 make_server().serve_forever()，但可能会调用两次 run_simple()（以及到那时为止的整个调用堆栈）在我们进入 make_server() 之前。

# ios - iOS 我们可以重用一个 NSTimer

> ID：11571658
> 
> 赞同：0
> 
> 时间：2012-07-20T01:29:47.923
> 
> 标签：ios, ios5, ios4, timer, nstimer

我想使用 NSTimer（或者如果您有更好的建议）在设备拔出或未知时播放声音。但是，如果用户重新插入设备，声音应立即停止。

这是我的代码，但它的行为似乎不像我描述的那样，

```
- (void)currentBatteryState
{
    UIDevice *device = [UIDevice currentDevice];
    switch(device.batteryState) {
        case UIDeviceBatteryStateUnknown:
            currentBatteryStatusLabel.text = @"Unknown";
            if ([batteryControlTimer isValid]) {
                [batteryControlTimer invalidate];
                batteryControlTimer = [NSTimer scheduledTimerWithTimeInterval:2.5 target:self selector:@selector(playSound) userInfo:nil repeats:YES];
            } else {
                batteryControlTimer = [NSTimer scheduledTimerWithTimeInterval:2.5 target:self selector:@selector(playSound) userInfo:nil repeats:YES];
            }
            break;
        case UIDeviceBatteryStateUnplugged:
            currentBatteryStatusLabel.text = @"Unplugged";
            if ([batteryControlTimer isValid]) {
                [batteryControlTimer invalidate];
                batteryControlTimer = [NSTimer scheduledTimerWithTimeInterval:2.5 target:self selector:@selector(playSound) userInfo:nil repeats:YES];
            } else {
                batteryControlTimer = [NSTimer scheduledTimerWithTimeInterval:2.5 target:self selector:@selector(playSound) userInfo:nil repeats:YES];
            }
            break;
        case UIDeviceBatteryStateCharging:
            currentBatteryStatusLabel.text = @"Charging";
            [batteryControlTimer invalidate];
            break;
        case UIDeviceBatteryStateFull:
            currentBatteryStatusLabel.text = @"Full";
            [batteryControlTimer invalidate];
            break;
    }
}

- (void) playSound
{
    CFBundleRef mainBundle = CFBundleGetMainBundle();
    CFURLRef soundFileURLRef;
    soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"siren_1", CFSTR ("mp3"), NULL);
    UInt32 soundID;
    AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
    AudioServicesPlaySystemSound(soundID);

} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T01:31:23.250

如果不满足条件，则不要播放任何声音，但不要使计时器无效。这样，即使条件没有满足一次，它也会在间隔内继续触发。

所以：

```
- (void)playSound {
    if(conditionIsMet) {
        //code to play your sound
    }
} 
```

编辑：

如果你想让声音因为不满足条件而停止的时间间隔，那么你只需要让定时器的时间间隔和声音的持续时间更小。

# python - pygtk：一排可点击的图片

> ID：11571659
> 
> 赞同：0
> 
> 时间：2012-07-20T01:30:15.920
> 
> 标签：python, user-interface, gtk, pygtk

我有几个 hboxes 包含在 vbox 中的图像

如何使图像可点击？我尝试将每个图像包含在 EventBox 中。如果这是正确的方法，我如何将 EventBox 调整为与其图像相同的大小？我试过`.set_size_request`了，但它什么也没做

```
self.window = gtk.Window(gtk.WINDOW_TOPLEVEL)
hboxes = []
for f in files:
   hbox = gtk.HBox()
   hbox.set_size_request(800, 150)
   for img in images:
       event_box = gtk.EventBox()
       event_box.add(img)
       event_box.connect("button_press_event", hello)
       event_box.set_size_request(250, 150)
       hbox.pack_end(event_box, padding=10, fill=False, expand=False)
       hboxes.append(hbox) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T06:57:16.363

您可以尝试使用图标视图而不是嵌套的 vbox 和 hbox。可以在这里找到一个示例：[https ://stackoverflow.com/a/3606867/217994](https://stackoverflow.com/a/3606867/217994)

# entity-framework - 由于不必要的更新导致的乐观并发异常

> ID：11571662
> 
> 赞同：3
> 
> 时间：2012-07-20T01:31:15.830
> 
> 标签：entity-framework

我有一个对象帐户，它被许多对象付款引用。我看到，当我更改付款状态时，Account 的 rowversion 属性 Version 也会使用如下 SQL 进行更新：

```
update [dbo].[Account]
set    @p = 0
where  (([Id] = 2606 /* @0 */)
        and ([Version] = 0x0000000000000C8C /* @1 */))

select [Version]
from   [dbo].[Account]
where  @@ROWCOUNT > 0
       and [Id] = 2606 /* @0 */ 
```

该交易中的账户绝对没有其他更新。我多次检查我的代码，并没有看到 Account 对象有任何修改。此外，我已经覆盖了 DbContext 的 SaveChanges，并且在 EntityState.Modified 中没有看到 Account 对象的条目...

最大的问题不仅是不必要的更新，而且与一个帐户关联的多个付款可能会同时更新，当然会抛出一个乐观并发异常，并且事务将回滚并且必须重复。

有人可以建议在我的代码中检查/修复/更改什么来阻止这一切。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T07:13:14.853

假设您使用的是 EF4.x，那么有一个修补程序可以解决此问题。我有同样的问题，我可以确认修复程序纠正了它。

[http://support.microsoft.com/kb/2390624](http://support.microsoft.com/kb/2390624)

> 修复：当应用程序使用 .NET Framework 4 中的实体框架时，SQL 应用程序中的主体实体会生成不必要的更新

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T14:29:51.917

[Matthew Artz 回答](https://stackoverflow.com/a/12243445/299164)的补充：

[http://support.microsoft.com/kb/2390624](http://support.microsoft.com/kb/2390624)提到：

> 请联系 Microsoft 客户服务和支持以获取此修补程序。

您可以在此处请求并获取修补程序：[请求修补程序](http://support.microsoft.com/hotfix/KBHotfix.aspx?kbnum=2390624)

您将收到一封包含下载 URL 的电子邮件。确保只复制 和 之间的`(`URL `)`。

# macos - 我可以在我的英特尔 PC 上安装哪个版本的 Mac OS (Hackintosh)

> ID：11571664
> 
> 赞同：2
> 
> 时间：2012-07-20T01:31:44.450
> 
> 标签：macos

我的电脑配置是

处理器：正版 Intel(R) CPU 2140 @ 1.60GHz，1600 Mhz，2 个核心，2 个逻辑处理器

BIOS 版本/日期：联想 2VKT79AUS，2007 年 7 月 4 日

内存：1.50 GB

硬盘：80 GB

我的问题是我可以在我的电脑上安装哪个版本的 Hackintosh。

# text - 使用 iconv 将 UTF-16BE 转换为 UTF-8，无需 BOM

> ID：11571665
> 
> 赞同：13
> 
> 时间：2012-07-20T01:31:48.497
> 
> 标签：text, utf-8, utf-16, iconv

我正在尝试使用 iconv 将 UTF-16BE 编码文件（字节顺序标记：0xFE 0xFF）转换为 UTF-8，如下所示：

```
iconv -f UTF-16BE -t UTF-8 myfile.txt 
```

然而，结果输出具有 UTF-8 字节顺序标记 (0xEF 0xBB 0xBF)，这不是我需要的。有没有办法告诉 iconv （或是否有等效的编码）*不要*将 BOM 放入 UTF-8 结果中？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-20T01:47:16.923

实验表明，指示`UTF-16`而不是`UTF-16BE`做你想要的：

```
iconv -f UTF-16 -t UTF-8 myfile.txt 
```

# asp.net - 完全信任中的“PolicyException：无法获得所需的权限” - 不明白为什么

> ID：11571675
> 
> 赞同：1
> 
> 时间：2012-07-20T01:33:21.380
> 
> 标签：asp.net, iis-7, security, code-access-security

这是一个由两部分组成的问题。

我正在尝试设置我们的生产（实时）托管架构的新部分，因此我试图将我们的暂存网络服务器指向新的生产内容共享（同一子网中另一台服务器上的 UNC 路径）。

我目前收到可怕的*PolicyException：无法获取所需权限*的消息。

*   用户上下文对内容共享的整个层次结构具有修改权限。
*   我已经添加`<trust level="Full" originUrl="" />`到 Web.config 中（我很确定它已经是这种情况了，反正）
*   我已经[跑了`caspol`](https://stackoverflow.com/a/9552246/205245)——见下文
*   我[检查了 AppPool 设置](https://stackoverflow.com/a/1848756/205245)——身份设置为适当的用户名，加载用户配置文件设置为 True
*   我刚刚设置了内容共享和 IIS 站点，所以我知道用户名和密码都是同步的（我做了仔细检查）。

更令人困惑的是，抱怨的程序集是我们的内部代码库之一。在[ILSpy](http://wiki.sharpdevelop.net/ILSpy.ashx)中对其进行反编译，我可以看到对

```
[assembly: SecurityPermission(SecurityAction.RequestMinimum,
   SkipVerification = true)] 
```

，除了我不记得曾经在该程序集中添加任何代码访问安全性。引用的所有类`Security`都没有任何声明性，当然也没有引用[AllowPartiallyTrustedCallersAttribute 或 CodeAccessPermission.Assert](http://msdn.microsoft.com/en-us/library/ms998326.aspx#paght000017_wrappingprivilegedcode)。

我对所有涉及的服务器（网络服务器和持有内容共享的服务器）拥有完全的管理权限。

那么如何让这个问题消失呢？

（我们是否可以将[问题#1846816](https://stackoverflow.com/questions/1846816/iis7-failed-to-grant-minimum-permission-requests)变成一个包含所有可能答案的社区维基，而不是阅读无数标题不具描述性且在 Google 上获得太多点击的问题？；o）

* * *

**编辑：（**编辑的）输出`caspol -a -lg`如下：

```
Microsoft (R) .NET Framework CasPol 2.0.50727.4016
Copyright (c) Microsoft Corporation.  All rights reserved.

Security is ON
Execution checking is ON
Policy change prompt is OFF

Level = Enterprise

Code Groups:

1\.  All code: FullTrust

Level = Machine

Code Groups:

1\.  All code: Nothing
   1.1\.  Zone - MyComputer: FullTrust
      1.1.1\.  StrongName - [snip]: FullTrust
      1.1.2\.  StrongName - [snip]: FullTrust
   1.2\.  Zone - Intranet: LocalIntranet
      1.2.1\.  All code: Same site Web
      1.2.2\.  All code: Same directory FileIO - 'Read, PathDiscovery'
      1.2.3\.  Url - file://[some other my UNC share]\*: FullTrust
      1.2.4\.  Url - [THIS UNC SHARE]\*: FullTrust
      1.2.5\.  Url - [some other my UNC share]:\*: FullTrust
      1.2.6\.  Url - file://[THIS UNC SHARE]\*: FullTrust
   1.3\.  Zone - Internet: Internet
      1.3.1\.  All code: Same site Web
   1.4\.  Zone - Untrusted: Nothing
   1.5\.  Zone - Trusted: Internet
      1.5.1\.  All code: Same site Web

Level = User

Code Groups:

1\.  All code: FullTrust
Success 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T13:05:19.777

有类似的问题。请在您的应用程序 中`<trust level="Full" originUrl="" />`替换为 。请注意新信任级别标记中的 。`<trust level="Full" originUrl=".*"></trust>``web.config`
`.*`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T03:04:14.323

发现了问题。

我不知道为什么，但 Windows 认为有问题的共享在`Internet`区域中，而不是`LocalIntranet`.

```
caspol -pp off -m -ag 1.3 -url "\\servername\web_content\*" FullTrust
caspol -pp off -m -ag 1.3 -url "file://\\servername\web_content\*" FullTrust 
```

我已经解决了！

# matlab - 查找位置并确定与一个数组具有相同位置的另一个数组的对应值

> ID：11571676
> 
> 赞同：0
> 
> 时间：2012-07-20T01:33:24.067
> 
> 标签：matlab, search, matrix, find

如果

```
a=[5 8 1 2 6 7 1 4 2 3 7 8];
b=[7 6 3 1 5 4 2 0 1 8 9 4]; 
```

然后

```
a1=[1 7 3] 
```

对应于一个矩阵，d 应该是`[3 4 8]`

`d`是对应`a`值的准确位置。我如何找到这个值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T02:33:23.893

尝试这个：

```
c = []
for i = 1:length(a1)
    index = find(a == a1(i));
    c = [c, index(1)]
end

d = []
for i = 1:length(c)
    d = [d, b(c(i))]
end 
```

输出为 [3 4 8]

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T09:35:56.620

作为一个单行：

```
arrayfun(@(x) b(find(a == x, 1, 'first')), a1) 
```

# apache - 我应该将我的生产网站放入哪个文件夹？

> ID：11571677
> 
> 赞同：-1
> 
> 时间：2012-07-20T01:33:52.937
> 
> 标签：apache, web-hosting

我将运行 2 个虚拟主机（开发和生产）。我正在考虑创建 2 个用户（dev 和 prod）并指示 apache 查看 /home/dev/www 和 /home/prod/www。如果我这样做，我将需要给 apache 适当的权限来管理这些文件夹。

这听起来像个坏主意吗？只使用 /var/www/prod/ 和 var/www/dev 会更有意义吗？

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T01:41:36.550

最终，它可能归结为偏好，但我认为你应该把它们放进去`/var/www/prod/`，`/var/www/dev/`这样网站就都在一个地方。如果您需要备份所有站点，您知道它们都在 中`/var/www`，您也可以将 /var 或 /var/www 设置为自己的挂载点。

您仍然可以为 dev 和 prod 创建 2 个用户，只需为这些目录授予他们一些健全的权限。您可以将它们全部设为所有者，将 apache 设为组，并且除了可能的日志记录之外，您不需要设置，`g+w`除非在这些情况下。

# android - Android 开发 - 图形布局看起来与实际 XML 不同

> ID：11571680
> 
> 赞同：1
> 
> 时间：2012-07-20T01:34:07.720
> 
> 标签：android, android-layout, android-emulator

好的，所以我快速创建了一个包含以下内容的 XML 文件：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:text="Text View 1"
                android:textSize="30dp" />

            <ListView
                android:id="@+id/listView1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                >
            </ListView>

                        <TextView
                android:id="@+id/textView2"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:text="Text View 2"
                android:textSize="30dp" />

            <ListView
                android:id="@+id/listView2"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                >
            </ListView>

                <TextView
                android:id="@+id/textView3"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:text="Text View 3"
                android:textSize="30dp" />

            <ListView
                android:id="@+id/listView3"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                >
            </ListView>

        </LinearLayout>

    </ScrollView>

</LinearLayout> 
```

问题是，为什么当我单击“图形布局”选项卡时它看起来如此不同？我想象的图形布局基本上是 3 个标签在彼此下方（这是因为我将所有内容都设置为包装内容，并且因为任何一个 ListView 中都没有项目，所以我认为它不会t 甚至是可见的）。但无论如何，图形布局显示它是：

![图形布局](../Images/51671010b1e2143c989e06ce30196cb5.png)

我不确定这是否正确，如果我运行它会看起来像我想象的那样吗？我基本上想要（1 个 ScrollView 中的所有内容）3 个 TextView 和 1 个 ListView，紧跟在每个 TextView 之后。所以布局将如下所示：

```
ScrollView
TextView
ListView
TextView
ListView
TextView
ListView
End of ScrollView 
```

与上面显示的布局完全相同。有人可以告诉我我的 XML 文件中没有显示的所有其他标签有什么问题吗？

注意：当我单击侧面的组件时，似乎有一些事情正在发生变化。（当我尝试单击 TextView2 （尝试搜索蓝色边界框）时，似乎 TextView1 标签被向下推了一点，第二个 TextView 仍然不可见。如果有人可以帮助我实现布局我想要，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T01:57:38.147

编辑：看看这种方法。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >           

    <ScrollView 
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="Text View 1"
            android:textSize="30dp" /> 

    </ScrollView>            

    <ScrollView 
        android:id="@+id/scrollView2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/scrollView1">

        <TextView
            android:id="@+id/textView2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="Text View 2"
            android:textSize="30dp" /> 

    </ScrollView>

   <ScrollView 
        android:id="@+id/scrollView3"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/scrollView2" >

        <TextView
            android:id="@+id/textView3"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:text="Text View 3"
            android:textSize="30dp" /> 

    </ScrollView>

</RelativeLayout> 
```

至于`ListView`你不应该把a放在a`ListView`里面`ScrollView`。这里解释了为什么你不应该把 a`ListView`放在里面`ScrollView`：[Listview inside ScrollView](https://stackoverflow.com/questions/6210895/listview-inside-scrollview-is-not-scrolling-on-android)

# objective-c - 目标 C：在触摸结束时创建一个新视图

> ID：11571681
> 
> 赞同：0
> 
> 时间：2012-07-20T01:34:32.990
> 
> 标签：objective-c, ios, ios4

我正在尝试做一个程序，每次我的触摸结束时，都会出现另一个 UIView 使用循环显示我想要的 UIView 数量。如何在触摸结束时设置 UIView 循环？或者我应该在 viewDidLoad 中创建它并在触摸结束时调用它？

```
-(void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event//upon leaving
    {
        UITouch *touch = [touches anyObject];

        for (int i=0; i < 100; i++) {
            UIImageView *layerView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 1024, 768)];
            [layerView setAlpha:.05];
            [self.view addSubview:layerView];
        }
    } 
```

希望你们能帮帮我。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T02:40:02.880

如果您想在每次点击后添加一个视图，则不需要 for 循环。做就是了

```
-(void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event//upon leaving
{
    UITouch *touch = [touches anyObject];

    UIImageView *layerView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 1024, 768)];
    [layerView setAlpha:.05];

    // If you just want to add a line, add another uiview would the easiest way. For example:
    UIView *line = [UIView alloc] initWithFrame:CGRectMake(0, layerView.center.y, layerView.frame.size.width, 1)];
    line.backgroundColor = [UIColor blackColor];
    [layerView addSubview:line];

    [self.view addSubview:layerView];
} 
```

当然，你也可以继承一个 UIView 并在其中绘制任何你想要的东西

```
- (void)drawRect:(CGRect)rect 
```

# android - R.id.pager? 这是在哪里定义的？

> ID：11571689
> 
> 赞同：2
> 
> 时间：2012-07-20T01:35:32.287
> 
> 标签：android, android-layout

[此处](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)的 viewpager 示例包含以下行：

```
 mViewPager = new ViewPager(this);
    mViewPager.setId(R.id.pager); 
```

我不明白 R.id.pager 是如何定义的。我应该在某处的xml中创建一个viewpager吗？但这没有意义，因为它在前一行中实例化了一个查看器。如果有人能为我解决这个问题，我将不胜感激！！

谢谢！！

**编辑**

显然将行更改为：

```
mViewPager.setId(1); 
```

让它工作:) :)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T01:42:29.310

您可以直接在`res/values`目录中的资源文件中定义 id。文件的名称无关紧要，但它可能看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <item
        type="id"
        name="pager" />
</resources> 
```

当您使用如下属性为布局元素设置 id 时，ID 也可以在布局中自动出现：

```
android:id="@+id/pager" 
```

属性中的`+`表示`R.id`如果指定的 id 不存在，则将其添加到。

最好使用 XML 定义的 ID 而不是将值硬编码到代码中，原因与使用符号常量（例如`final static int FOO = 1;`）而不是到处散布整数文字更好的原因相同。

有关更多信息，请参阅[ID 资源文档。](http://developer.android.com/guide/topics/resources/more-resources.html#Id)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-04T14:07:39.450

它在 bin 文件夹下的 R.txt 文件中定义。

```
int id pager 0x7f05003c 
```

# python - VPython 安装问题

> ID：11571690
> 
> 赞同：-1
> 
> 时间：2012-07-20T01:36:11.233
> 
> 标签：python, 64-bit, vpython

我正在尝试为 64 位 python 导入可视模块。不幸的是，我不断收到以下错误：

> ImportError：numpy.core.multiarray 导入失败
> 
> 回溯（最近一次通话最后）：
> 
> 文件“C:\python\color_space.py”，第 2 行，在
> 
> ```
>  from visual import scene, color, sphere 
> ```
> 
> 文件“C:\Python27\lib\site-packages\visual__init__.py”，第 1 行，在
> 
> ```
>  from .visual_all import * 
> ```
> 
> 文件“C:\Python27\lib\site-packages\visual\visual_all.py”，第 1 行，在
> 
> ```
>  from vis import version 
> ```
> 
> 文件“C:\Python27\lib\site-packages\vis__init__.py”，第 3 行，在
> 
> ```
>  from .cvisual import (vector, dot, mag, mag2, norm, cross, rotate, 
> ```
> 
> ImportError：numpy.core.multiarray 导入失败

我已经卸载了我的 64 位版本的 python 并尝试了带有 32 位可视模块的 32 位版本的 python，但没有成功。现在我已经恢复到 64 位。有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T01:39:28.637

看来您可能没有安装 numpy。你可以在这里下载：[http ://www.scipy.org/Download/](http://www.scipy.org/Download/)

或者它可能不在您的 python 目录中。

# c# - DomElement.click() 事件在 chrome 中不起作用，但其他的工作

> ID：11571692
> 
> 赞同：1
> 
> 时间：2012-07-20T01:36:28.483
> 
> 标签：c#, javascript, jquery, click

我想在按下回车键时提交表单。

C＃

```
<asp:LinkButton ID="LinkButton1"  runat="server" class="login-button" OnClick="btnLogin_Click" >Login</asp:LinkButton> 
```

JS

```
$(document).on('keydown ', function(event) {
    var key = {
        submit: event.keycode || event.which
    };

    if (key.submit == 13) {

        document.getElementById('LinkButton1').click();

    }
}); 
```

然后，我在 chrome 18 中得到错误。

> 对象 javascript:__doPostBack('LinkBut​​ton1','') 没有方法 'click'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T01:55:25.790

这将做到：

```
$(document).on('keydown', function(e) {
    if (e.which == 13)
        __doPostBack('LinkButton1','');
}); 
```

[**小提琴**](http://jsfiddle.net/a76ZY/1/)

`onclick`当您在页面中按下 Enter 键时，这将调用分配给您的登录按钮处理程序的函数。

您面临的问题很可能是因为如果处理程序是在 jQuery 之外分配的，那么您`.click()`是一个简写，[`.trigger('click')`](http://api.jquery.com/trigger/)跨浏览器支持的不是很好。

此外，通过一些[答案](https://stackoverflow.com/a/6134945/1331430)，这似乎是最简单的方法。

# objective-c - 如何从 ABPeoplepicker 委托方法返回两个视图控制器

> ID：11571693
> 
> 赞同：0
> 
> 时间：2012-07-20T01:36:33.557
> 
> 标签：objective-c, ios, delegates, modalviewcontroller

我正在开发一个使用 ABPeopleViewController 的应用程序，我想在用户最终选择联系人时，向后退两个视图控制器。这是我到达 ABPeoplePickerNavigationController 的方式：点击主视图控制器的按钮 -> 加载模式（对话框）视图控制器 -> 点击模式视图控制器的按钮 -> 加载 ABContacts。

我正在模态视图中实现 ABContacts 的委托，而该委托又在主视图控制器中有一个委托。

我想从 ABPeoplePicker 委托方法返回到主视图控制器。

希望这能理解，有人可以帮助我，我没有找到这样的东西。

我的 MainViewController.h：

```
@protocol ModalViewDialogDelegate

- (void)didReceiveMail:(NSString *)mail;

@end

@interface SetUpViewController : UIViewController<UITextFieldDelegate, ModalViewDialogDelegate>{
}
//... 
```

我的 MainViewController.m：

```
 //...
  - (void)didReceiveMail:(NSString *)mail{

  [self.presentedViewController dismissViewControllerAnimated:YES completion:nil];
  //... 
```

我的模态视图.h：

```
#import <AddressBook/AddressBook.h>
#import <AddressBookUI/AddressBookUI.h>

@protocol ModalViewDialogDelegate;

@interface DialogViewController : UIViewController<ABNewPersonViewControllerDelegate, ABPeoplePickerNavigationControllerDelegate>{
   id<ModalViewDialogDelegate> delegate;
}

@property (nonatomic, assign) id<ModalViewDialogDelegate> delegate;
@property (nonatomic, retain) NSString * mailSelected;
//... 
```

我的 modalView.m：

```
 - (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController  *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)identifier{

    //...here i get the email person property and then i want to go backwards to the main view controller, not the modal.

    [self dismissViewControllerAnimated:YES completion:nil];

    //don't know if it's ok like this, because in the implementation also dismiss presented viewcontroller.
    [_delegate didReceiveMail:self.mailSelected];

    return NO;
}
return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T01:43:47.017

试着把这个

```
[_delegate didReceiveMail:self.mailSelected]; 
```

在完成块内

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

在它之前。

（如果这不起作用，您可以简单地在您的主控制器委托方法上调用两次 dissmiss，每次关闭将从堆栈中删除一个）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-29T07:34:20.513

```
[[[self presentingViewController]  presentingViewController] dismissViewControllerAnimated:NO completion:nil]; 
```

# php - 从查询填充下拉框中检索数据

> ID：11571695
> 
> 赞同：2
> 
> 时间：2012-07-20T01:36:45.477
> 
> 标签：php, mysql, drop-down-menu

我制作了一个下拉框，其中填充了从公司名称数据库中查找公司名称的查询，这些名称也有我不想显示但在查询中查找的 ID 号。我需要 ID 号来链接到公司的网站，所以当我点击网站页面上的提交按钮时，它会通过查看位置值并将其与查询数组上的位置相关联来找到 ID 号我只是不知道要做什么。如果有帮助，这就是我填充保管箱的方式：

```
mysql_select_db("DB", $con);
$query = "SELECT Company_Name, ID FROM company_table";
$result = mysql_query($query) or die(mysql_error());
$options ='';
$num = 0;
while ($row=mysql_fetch_array($result)) {
$num = $num+1; 
$options.= "<OPTION VALUE=\"$num\">".$row["Company_Name"]; 
}
<SELECT NAME=thing> 
<OPTION VALUE=0>Choose 
<?=$options?> 
</SELECT> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T01:46:40.450

有两种直接的方法可以做到这一点。一种是使用索引保持它的方式，`$num`; 另一种方法是使用实​​际的公司 id 字段，`ID`. 如果您坚持使用 的索引`$num`，当用户提交表单（即 - 选择一家公司）时，您将不得不重新查询数据库并重新循环遍历结果以找到特定的公司（或者您可以使用`LIMIT`/ `OFFSET`; 答案末尾的注释）。

我建议在您的表单中使用实际的公司 ID：

```
while (($row = mysql_fetch_assoc($result))) {
    $options.= '<option value="' . $row['ID'] . '">' . $row["Company_Name"] . '</option>'; 
} 
```

这将生成一个选项列表，就像您当前拥有的一样，除了每个选项的值将是特定的公司 ID。当用户提交表单时，假设表单正在使用`POST`，您可以通过以下方式获取 ID：

```
$companyId = (isset($_POST['thing']) && is_numeric($_POST['thing'])) ? intval($_POST['thing']) : false;
$results = mysql_query('SELECT * FROM company_table WHERE ID=' . $companyId); 
```

..然后根据需要进行处理。

我`$_POST['thing']`在上面的示例中使用，因为这就是您的代码示例所`select`命名的字段。另外，我假设它`ID`是一个整数。

如果实际`ID`需要保持隐藏，按照说明，`$num`可以使用 MySQL 的`LIMIT`/的索引，`OFFSET`如下：

```
$selectedCompany = (isset($_POST['thing']) && is_numeric($_POST['thing'])) ? intval($_POST['thing']) : -1;
if ($selectedCompany >= 0) {
    $query = "SELECT Company_Name, ID FROM company_table LIMIT " . $selectedCompany . ", 1";
    // process as desired
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T01:47:26.607

一种选择是将“创建”字段添加到公司表中，该字段是时间戳，或者只是作为随机 UUID 列的第二列。然后将下拉列表的值设置为此列，这样您就不会显示 ID，但您仍然会知道记录，因为您也使用“其他”ID。我实际上在我的一个程序中使用了这种方法，它与您的情况相同，客户不希望显示 ID。

如果您不想使用这种方法（因为您不想要第二列），您可以只使用 md5 散列 ID 或其他一些散列方法。

然后你会做

```
SELECT * FROM company where md5(id) = "$value". 
```

这种方法的缺点是它是一个昂贵的查询，因为您不会使用索引并且它必须计算每个 id 的所有 md5 哈希值。

# macos - 嵌入式视频崩溃/中断字体

> ID：11571696
> 
> 赞同：0
> 
> 时间：2012-07-20T01:36:55.190
> 
> 标签：macos, google-chrome, video, safari, font-face

我们刚刚发布了一个新网站 ( [http://www.vulytrampolines.com/](http://www.vulytrampolines.com/) )，并且我们仅在 Mac Safari/Chrome 上遇到了字体调用问题。它将在前半秒左右加载为正确的字体（在顶部的导航中），但是当视频在 iframe 中加载时，字体会中断。它比正常情况更轻/更薄，我们无法弄清楚如何修复它。

仅当页面具有指向 youtube/vimeo 视频的 iframe 时，才会出现此问题。例如[http://vulytrampolines.com/aboutus](http://vulytrampolines.com/aboutus)。如果您观看橙色导航，您会注意到字体的重量会增加一些，但是一旦加载 youtube 视频就会变轻。从 DOM 中删除视频 iframe 或将其设置为不显示，然后解决问题，但是让它再次可见会再次破坏字体。

有人有想法么？

~~webkit-smoothing, 字体平滑~~，旋转，文本阴影没有修复它。

这是我们的字体调用：

```
@font-face {
/*    font-family: neuzeitGroteskLight;*/
    font-family: VulyFont-Light;
    src: url(/css/fonts/neuzeitgro-lig-webfont.eot);
    src: url('/css/fonts/neuzeitgro-lig-webfont.eot?#iefix') format('embedded-opentype'),
         url(/css/fonts/neuzeitgro-lig-webfont.woff) format('woff'),
         url(/css/fonts/neuzeitgro-lig-webfont.ttf) format('truetype'),
         url(/css/fonts/neuzeitgro-lig-webfont.svg#NeuzeitGroteskLight) format('svg');
    font-weight: normal;
    font-style: normal;
    font-variant: normal;
}

@font-face {
/*    font-family: 'neuzeitGroteskRegular';*/
    font-family: VulyFont;
    src: url(/css/fonts/neuzeitgro-reg-webfont.eot);
    src: url('/css/fonts/neuzeitgro-reg-webfont.eot?#iefix') format('embedded-opentype'),
         url(/css/fonts/neuzeitgro-reg-webfont.woff) format('woff'),
         url(/css/fonts/neuzeitgro-reg-webfont.ttf) format('truetype'),
         url(/css/fonts/neuzeitgro-reg-webfont.svg#NeuzeitGroteskRegular) format('svg');
    font-weight: normal;
    font-style: normal;
    font-variant: normal;

}

@font-face {
/*    font-family: 'neuzeitGroteskBold';*/
    font-family: VulyFont-Bold;
    src: url(/css/fonts/neuzeitgro-bol-webfont.eot);
    src: url('/css/fonts/neuzeitgro-bol-webfont.eot?#iefix') format('embedded-opentype'),
         url(/css/fonts/neuzeitgro-bol-webfont.woff) format('woff'),
         url(/css/fonts/neuzeitgro-bol-webfont.ttf) format('truetype'),
         url(/css/fonts/neuzeitgro-bol-webfont.svg#NeuzeitGroteskBold) format('svg');
    font-weight: normal;
    font-style: normal;
    font-variant: normal;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T05:05:24.580

我今天花了几个小时调查。

Mac 和 PC 针对此特定字体呈现不同的字体系列/粗细/样式。

A) Mac 和 PC 的 firefox 在渲染字体时没有问题。

A) PC Chrome 和 PC Safari 在渲染字体时没有问题。

B) Mac Chrome、Mac Safari、iPad 和 iPhone 在加载或在页面上播放视频时出现字体渲染问题。

解决方案：

我们有两个版本的字体——浅色字体和普通字体。

对于上面的选项 A)，我们现在使用`VulyFont-Light`，因为字体变亮没有问题。

对于上面的选项 B)，我们使用`VulyFont`with (如果有必要`-webkit-font-smoothing: antialiased !important;`，我不是 100% )。`!important`字体平滑的效果是它可以防止字体在加载或开始播放视频时重新渲染或变亮/破坏。所以我们让它呈现几乎完全相同的跨浏览器/平台。唯一的区别是字体的两个版本之间的字形间距很小。

# uiview - 结合 MKOverlays

> ID：11571698
> 
> 赞同：2
> 
> 时间：2012-07-20T01:36:57.753
> 
> 标签：uiview, mapkit

我需要在地图上绘制许多（数百到数千）方形叠加层。这些叠加层的位置和大小保持不变。我认为我可以通过将这些方形叠加层组合成一个叠加层来加快渲染速度，因此 drawMapRect 只需要调用一次。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:19:17.470

就我而言，删除叠加层不是一种选择。我发现显着提高性能的一种方法是让我的叠加层类存储一个方形叠加层数组。然后在我的overlayView 的drawMapRect 方法中，我循环遍历数组来绘制所有的覆盖。[HazardMap Apple Developer Example](http://developer.apple.com/library/ios/#samplecode/HazardMap/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010049-Intro-DontLinkElementID_2)中做了非常相似的事情。请参阅 HazardMapView.m 中的 drawMapRect

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T12:44:45.897

我对 MKAnnotation 有类似的问题。我找到了以下链接：

[http://www.fiveminutes.eu/having-fun-with-ios-map-kit-grouping-annotations/](http://www.fiveminutes.eu/having-fun-with-ios-map-kit-grouping-annotations/)

迭代注解列表并计算两个注解坐标的距离。如果附近存在注释，请将其从列表中删除。

我认为这种方法也适用于 MKOverlays。

# android - android布局图像填充宽度

> ID：11571705
> 
> 赞同：0
> 
> 时间：2012-07-20T01:39:02.963
> 
> 标签：android, android-layout

我需要在我的应用程序中为布局拉伸背景图像，

请注意，我的布局中的黄色背景没有拉伸

![在此处输入图像描述](../Images/3b56df728ff76e069a7c0deda5d1878d.png)

如何完成这个[黄条图像填充父]？

另请注意，蓝色布局不是屏幕的整个宽度，如何？

代码：

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
         android:orientation="vertical"
         android:layout_width="match_parent"
         android:layout_height="match_parent"
         android:paddingLeft="8dp"
         android:paddingRight="8dp"
         android:id="@+id/myfragment">

     <LinearLayout
         android:layout_width="match_parent"
         android:layout_height="50dp"
         android:layout_weight="1" 
          android:background="#0000FF">

         <ImageView
             android:id="@+id/imageView1"
             android:layout_width="fill_parent"
             android:layout_height="wrap_content"
             android:src="@drawable/titlebar" />

     </LinearLayout>

     <ListView android:id="@id/android:list"
               android:layout_width="match_parent"
               android:layout_height="match_parent"
               android:layout_weight="1"
               android:drawSelectorOnTop="false"/>

 </LinearLayout> 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T02:07:27.253

这就是为什么您的线性布局（蓝色）不适合整个屏幕宽度的原因

```
android:paddingLeft="8dp" 
android:paddingRight="8dp" 
```

你需要改变这一点。而是为内部布局放置一个边距（左右）。

您可以直接设置第二个线性输出的背景，而不是图像视图

```
android:background="@+id/imageView1" 
```

如果您想改用图像视图

```
 <ImageView
         android:id="@+id/imageView1"
         android:layout_width="fill_parent"
         android:layout_height="50dp"
         android:scaleType="fitXY"
         android:src="@drawable/titlebar" /> 
```

# javascript - Android webview：JavaScript 停止触摸

> ID：11571706
> 
> 赞同：1
> 
> 时间：2012-07-20T01:39:10.917
> 
> 标签：javascript, android, webview, touch

我正在尝试使用 webview 来显示一个页面，该页面执行一些非常基本的画布动画并将当前时间显示为字符串。我使用 setTimeout() 每秒更新一次内容（或动画每秒 30 次）。

我的问题是，只要我触摸屏幕，我的 javascript 就会停止执行。

我得到的最远的方法是将触摸事件的侦听器添加到我的 javascript 并在事件处理程序中调用 e.preventDefault() ，这在大多数情况下都有帮助，但似乎错过了一些没有触发任何常见 javascript 事件的情况。

我尝试的下一件事是覆盖默认的触摸处理程序，如下所示：

```
myWebView.setOnTouchListener(new View.OnTouchListener() {
  @Override
  public boolean onTouch(View v, MotionEvent event) {
    return true;
  }
}); 
```

这有帮助，但问题是它在发送到我的 web 视图之前消耗了触摸事件，因此无法在 javascript 中侦听触摸事件。

我想禁用所有默认的 Android 行为，如缩放等，因为这会阻止我的动画，但我仍然希望能够在 javascript 中使用这些事件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:56:58.743

是的，返回false。如果你返回真，你“说”处理的事件。

[http://developer.android.com/reference/android/view/View.html#onTouchEvent(android.view.MotionEvent)](http://developer.android.com/reference/android/view/View.html#onTouchEvent(android.view.MotionEvent))

# php - csv文件导入mysql日期格式

> ID：11571708
> 
> 赞同：2
> 
> 时间：2012-07-20T01:39:24.623
> 
> 标签：php, mysql, date, csv

我有一个要导入 mysql 的 csv 文件，csv 文件中有一个日期字段，格式如下：30.09.2011

我有一个从数据库中提取数据的 php 页面，我想按日期字段对其进行排序。目前它将日期视为一个字符串并像这样排序..

30.09.2011 6.02.2012 7.10.2011 9.12.2008

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T01:41:46.287

不要为此使用 PHP。从源头上纠正它。即在 MySQL 表中添加一个 datatype 的新列`DATE`。

然后您可以在导入后使用[`STR_TO_DATE()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date).

```
UPDATE your_table SET new_date_column = STR_TO_DATE(old_str_column,'%d.%m.%Y'); 
```

这样做将使排序、计算、格式化等在未来变得更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T01:51:01.767

如果您定期提取 CSV 中的数据，为什么不直接修改提取 SQL 以使日期以正确的格式出现，以便 MySQL 吸收它呢？

例如，如果您从 oracle 中提取，您可以更改

```
select
    yourDateColumn
from
    yourTable 
```

至

```
select
    to_char(yourDateColumn, 'YYYY-MM-DD') as yourMySQLDateColumn
from
    yourTable 
```

然后您可以直接导入 Mysql 中的日期数据类型，但您也可以跳过整个 PHP 上传并直接执行[MySQL Load Data Infile](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)命令，这将比 PHP 执行的任何操作都快一个 STACK。

# c# - 从字符串转换日期和/或时间时转换失败

> ID：11571717
> 
> 赞同：1
> 
> 时间：2012-07-20T01:40:35.923
> 
> 标签：c#, visual-studio-2010, sql-server-2008

每当我运行此脚本时，我都会收到错误“从字符串转换日期和/或时间时转换失败”

它指向“While (objReader.Read())”部分

```
namespace MedicalDataExporter
{
    public partial class frmSales : Form
    {
        public frmSales()
        {
            InitializeComponent();
        }

        private void dtpFrom_ValueChanged(object sender, EventArgs e)
        {

        }

        private void btnExtract_Click(object sender, EventArgs e)
        {
            SqlConnection objConn = new SqlConnection("Data Source=XXXX;Initial Catalog=YYYY;Persist Security Info=True;User ID=blah;Password=blah");

            // String conStr = Properties.Settings.Default.MedpracConnectionString;
            // System.Data.SqlClient.SqlConnection objConn = new System.Data.SqlClient.SqlConnection(conStr);
            objConn.Open();

            SqlCommand objCmd = new SqlCommand("SELECT CONVERT(char(8), InvDate,3) AS InvDate,InvoiceNo,EmployerCode,TaxAmount + SubTotal AS Amount,'' AS Payment FROM Invoice WHERE (InvDate >= CONVERT(datetime, '"+dtpFrom.Text +"', 3)) AND (InvDate <= CONVERT(datetime, '"+dtpTo.Text+"',3))", objConn);

            SqlDataReader objReader;
            objReader = objCmd.ExecuteReader();

            System.IO.FileStream fs = new System.IO.FileStream("C:\\CMSExportedData\\Sales-" + DateTime.Now.ToString("dd-MM-yy") + ".txt", System.IO.FileMode.Create);
            System.IO.StreamWriter sw = new System.IO.StreamWriter(fs, System.Text.Encoding.Default);

            int count = 0;
            while (objReader.Read())
            {

                for (int i = 0; i < 5; i++)
                {
                    if (!objReader.IsDBNull(i))
                    {
                        string s;
                        s = objReader.GetDataTypeName(i);
                        //MessageBox.Show(s);
                        if (objReader.GetDataTypeName(i) == "char")
                        {
                            sw.Write(objReader.GetString(i));
                        }
                        else if (objReader.GetDataTypeName(i) == "money")
                        {
                            sw.Write(objReader.GetSqlMoney(i).ToString());
                        }
                        else if (objReader.GetDataTypeName(i) == "nvarchar")
                        {
                            sw.Write(objReader.GetString(i));
                        }
                    }
                    if (i < 4)
                    {
                        sw.Write("\t");
                    }
                }
                count = count + 1;

                sw.WriteLine();

            }
            sw.Flush();
            fs.Close();
            objReader.Close();
            objConn.Close();
            MessageBox.Show(count + " records exported successfully.");
            this.Close();
        }

        private void groupBox1_Enter(object sender, EventArgs e)
        {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T06:56:43.293

将您的字符串转换为日期时间的这一行会导致异常。

```
 CONVERT(datetime,'"+dtpFrom.Text +"', 3) 
```

改成这个

```
CONVERT(datetime,'"+dtpFrom.Text +"', 0) 
```

有关更多信息，请参阅[日期时间转换](http://www.sqlusa.com/bestpractices/datetimeconversion/)

在你的 sql server 上测试这两个查询：

```
SELECT CONVERT(datetime, '11/12/2012', 3) //this causes the exception
SELECT CONVERT(datetime, '11/12/2012', 0) 
```

在您的代码上：

```
SqlCommand objCmd = new SqlCommand("SELECT CONVERT(char(8), InvDate,3) AS InvDate,InvoiceNo,EmployerCode,TaxAmount + SubTotal AS Amount,'' AS Payment FROM Invoice WHERE (InvDate >= CONVERT(datetime, '"+dtpFrom.Text +"', 0)) AND (InvDate <= CONVERT(datetime, '"+dtpTo.Text+"',0))", objConn); 
```

最好的祝福

# windows - 在 Windows 上安装病原体 vim 插件

> ID：11571723
> 
> 赞同：10
> 
> 时间：2012-07-20T01:41:38.653
> 
> 标签：windows, vim, vi, vim-plugin, pathogen

我打算在 Windows 的 GVIM 中安装病原体插件，但说明说要安装在我没有的 \vimfiles\autoload 文件夹中。我将如何安装病原体？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T01:49:16.113

如果它不存在，您可以简单地创建该文件夹。
放在`pathogen.vim`里面`...\vim\vimfiles\autoload`，你应该很高兴。
捆绑进入`...\vim\vimfiles\bundle`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-09T13:26:09.247

您可以阅读*此*文档.. [GVim for Windows](http://www.vim.org/ugrankar.pdf) 或者您可以转到此链接 [Vim and Pathogen for Windows](http://usevim.com/2012/10/12/vim101-windows/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T01:49:50.060

如果不存在，您需要创建文件夹。打开 Vim，输入 ":e $VIM"，你会找到 vimfiles 文件夹所在的 vim 目录。（如果你还不知道的话）

此外，请参阅[gvim 病原体问题](https://stackoverflow.com/questions/5904720/gvim-pathogen-issues) 以获得更多帮助。

# xcode - OpenCV 编译有关“cvloadimage”的错误，引用自：main.o 中的_main

> ID：11571730
> 
> 赞同：1
> 
> 时间：2012-07-20T01:42:54.443
> 
> 标签：xcode, macos, opencv, x86-64

我有个问题。这是错误：

> 架构 x86_64“cvloadimage”的未定义符号，引用自：main.o 中的_main

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:14:19.340

该函数名为`cvLoadImage()`。请记住：**C**是一种区分大小写的编程语言。

此功能在**libopencv_highgui.dylib**中实现，您最好将您的应用程序与它链接起来。确保您的 OpenCV 库也是`x86_64`，否则链接将不起作用。要检查他们的架构，请执行以他们命名的命令行工具`file`。

`-arch i386 -m 32`如果您使用 gcc，您可以通过指定强制将应用程序的构建为 32 位。

# jquery - jQuery 元素已从 DOM 中删除，但似乎存储在内存中？

> ID：11571734
> 
> 赞同：2
> 
> 时间：2012-07-20T01:43:21.727
> 
> 标签：jquery, memory

我有一个按钮单击事件，它获取与选中的复选框关联的名称，并将它们添加到`<ul>`页面右侧的复选框中。这很好用，然后我有另一个按钮，`<li>`它将`checkboxes`从`<ul>`. 这有效。当您重新添加已从右侧删除的项目时，问题就来了。该项目不在页面上，因此它显然已从 DOM 中删除，但就好像它仍然存储在浏览器内存中一样。我该如何从内存中清除它？代码如下。

```
$('.add-people').click(function () {
   $('.add-names:checked').each(function () {
      var name = $(this).parent().siblings('td.name-cell').html();
      if ($('ul.group-list').find(':contains(' + name + ')').length) {
         //Name is already in list
      } else {
         var newLi = '<li><input id="name" class="remove-names" type="checkbox" name="' + name + '"><span>' + name + '</span></li>'
         $('ul.group-list').append(newLi);                        
      }
   });
});

$('.remove-people').click(function () {
    $('.remove-names:checked').each(function () {
        $(this).parent().remove();
    });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T01:47:35.030

一旦一个 DOM 元素从 DOM 中移除，只有当 JavaScript 代码引用了该 DOM 元素时，它才会保持活动状态。如果没有对 DOM 元素本身的 javascript 引用，那么它将在下一次垃圾收集扫描期间被浏览器进行垃圾收集。

A`reference in javascript`表示保存 DOM 节点的 javascript 变量、数组、属性等。在您上面的代码中，我看不到任何持久的此类变量，因此我看不出为什么 DOM 节点不会从这段特定的代码中被垃圾收集。

为什么你认为它被存储在浏览器内存中？

要确保从内存中清除 DOM 元素，您需要做两件事：

1.  从 DOM 中删除它。
2.  通过将它们设置为 null 或任何其他值或确保它们超出范围以便变量本身被销毁（从而也释放它们的引用），确保没有 javascript 变量持有对它的引用。

就是这样，没有别的了。

# java - 学习 Java 是否有助于将来更容易理解 C++？

> ID：11571735
> 
> 赞同：-1
> 
> 时间：2012-07-20T01:43:27.687
> 
> 标签：java, c++, compare

我的目标是学习 C++ 进行游戏编程，但我现在处理的有点太多了。

我已经学习了几个月的 Java，并且正在考虑暂时坚持使用 Java。学完Java以后学C++会不会容易**很多？**

提前致谢。

* * *

附加：
1\. 有意学习GAME编程。
2\. 只学过一些非常基础的Java（循环、数组、方法、面向对象基础）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T01:48:37.340

这是非常主观的，但是对于初学者来说，首先学习 Java 是有益的，因为垃圾收集器可以帮助程序员不必担心内存管理，因此可以专注于学习面向对象的编程。C++ 引入了指针的概念，指针必须在编写程序的基础上进行管理。但是，这些指针确实使您更接近实际内存，因此您可以做一些更有趣的事情。

如果您已经相当有经验，我认为您先学习哪个并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T01:48:53.740

我不认为这很重要。

是的，学习 Java 会更容易，因为您将了解循环和结构等编程概念。如果您更深入地了解，您将了解面向对象的编程、类、继承。学习 JAVA 无疑会使学习 C++ 变得更容易，但我也认为学习 C++ 会使学习 JAVA 变得更容易。

我认为首先学习这两种语言并不容易，它们都有很好的文档记录，并且有无数关于如何在互联网上做事的例子。

我认为你可以先学习任何一个。

# mysql - 查找 MySQL 数据集的行之间的最小时间间隔

> ID：11571739
> 
> 赞同：0
> 
> 时间：2012-07-20T01:43:51.540
> 
> 标签：mysql, sql, timestamp

我有一个 MySQL 表，记录为用户接收的事件和接收事件的日期。

```
Date                    User

2012-01-21 18:30:02     AAA
2012-01-21 18:30:05     AAA
2012-01-21 18:30:08     AAA
2012-01-21 18:30:11     AAA
2012-01-21 18:30:15     AAA
2012-01-21 18:30:18     AAA
2012-01-21 18:30:21     AAA
2012-01-21 18:30:23     AAA
2012-01-21 18:30:26     AAA
2012-01-21 18:30:29     BBB
2012-01-21 18:30:32     BBB
2012-01-21 18:30:33     BBB
2012-01-21 18:30:37     BBB
2012-01-21 18:30:40     BBB
2012-01-21 18:30:42     BBB
2012-01-21 18:30:44     BBB
2012-01-21 18:31:01     BBB
2012-01-21 18:31:04     BBB
2012-01-21 18:31:07     BBB
2012-01-21 18:31:10     BBB 
```

事件不按日期或用户排序。

我想找出单个用户的两个连续事件之间的最小时间间隔（以秒为单位）。所以结果集看起来像这样：

```
MIN_INTERVAL        USER

3                   AAA
5                   BBB 
```

谁能帮我想出一个生成这个的 SQL 查询？我认为 GROUP BY 不会有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T02:17:42.937

简单版可能不是最快的？

```
SELECT t1.user, MIN(TIMESTAMPDIFF(SECOND, t1.date, t2.date))
FROM tbl AS t1
JOIN tbl AS t2 ON t1.user = t2.user
WHERE t1.date < t2.date
GROUP BY t1.user 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T02:03:08.403

这可以通过将自连接移动 1 条记录（按日期顺序）来完成，这将获得时间和它们之前的时间到同一行，这样我们就可以在两者之间做几秒钟的差异：

```
SELECT 
    a.user,
    MIN(TIMESTAMPDIFF(SECOND, b.date, a.date)) AS mindiff
FROM
(
    SELECT user, date, @val1:=@val1+1 AS rn
    FROM tbl
    CROSS JOIN (SELECT @val1:=0) AS val1_init
    ORDER BY date
) a
INNER JOIN
(
    SELECT user, date, @val2:=@val2+1 AS rn
    FROM tbl
    CROSS JOIN (SELECT @val2:=1) AS val2_init
    ORDER BY date
) b ON a.rn = b.rn
GROUP BY a.user 
```

* * *

## [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/1edde/19/0)

* * *

## [中间结果（之前`GROUP BY`）](http://www.sqlfiddle.com/#!2/1edde/21/0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T01:55:40.497

在 mysql 中，您需要使用自连接和两个 group bys 来执行此操作：

```
select t.user, min(diff)
from (select t.user, unix_timestamp(tnext.date) - unix_timestamp(t.date) as diff
      from t join
           tnext
           on t.user = tnext.user and
              t.date < tnext.date
      group by t.user, t.date
     ) t
group by user 
```

内部子查询查找下一次并减去这些值以获得差异。外部返回最小的差异。

# php - 在包含 URL 的页面中清除 $GLOBALS

> ID：11571742
> 
> 赞同：1
> 
> 时间：2012-07-20T01:44:22.213
> 
> 标签：php, superglobals

当我使用它的完整 URL（如`include 'http://mysite.tld/mypage.php'`）包含一个页面时，我不能使用`$GLOBALS`in `mypage.php`，它会返回`Undefined index`错误。

但是当我使用它的相对路径（如`include 'mypage.php'`）包含它时，就可以了。

我使用 URL 而不是相对路径的原因是我想包含`$_GET`参数`mypage.php`

这种奇怪的行为有什么合乎逻辑的解释吗？

* * *

*请注意，这两个文件位于同一台服务器上的同一目录中。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T04:50:55.113

包含带有 URL 的文件意味着代码作为单独的进程运行，这意味着它在不同的变量范围下运行。这与通过相对路径包含文件相反，在这种情况下，它几乎等同于将代码剪切并粘贴到脚本中。

从本质上讲，这意味着您的起始脚本中唯一可用的变量是您明确传递的变量（就像您在本例中使用`$_GET`变量一样）。这包括`$_SESSION`变量，因为调用者是您自己的服务器而不是客户端。

这种行为在 PHP 手册的[`include`](http://au2.php.net/manual/en/function.include.php)页面中有说明：

> 如果目标服务器将目标文件解释为 PHP 代码，则可以使用与 HTTP GET 一起使用的 URL 请求字符串将变量传递给包含的文件。严格来说，这与包含文件并使其继承父文件的变量范围不同。该脚本实际上正在远程服务器上运行，然后将结果包含到本地脚本中。

# c# - 组合框和灯开关

> ID：11571743
> 
> 赞同：3
> 
> 时间：2012-07-20T01:44:36.573
> 
> 标签：c#, visual-studio-lightswitch

我有一个字段性别的表，我想将它变成一个自定义控件（编辑：组合框），其中包含男性和女性字段。Lightswitch 相对较新，我不知道如何去做这方面的工作。我试过寻找但找不到任何信息。我正在使用 2012RC。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T16:22:09.893

有四种方法可以创建自动完成框：

1.  外键约束
2.  本地财产
3.  局部变量
4.  选择列表

有一篇[很好的博客文章](http://hgminerva.wordpress.com/2012/06/12/microsoft-lightswitch-auto-complete-box-101/)描述了如何通过上述方法实现这一目标。

对于您的特定场景，我建议使用外键约束来确保在 LightSwitch 应用程序内外都不会违反数据完整性。您需要做的就是在数据表中的性别字段和性别查找表的主键之间创建一个外键约束，然后在同一个数据源下导入这两个表。LightSwitch 将自动将此字段创建为数据网格和详细信息表单中的组合框。如果您的性别查找表中有多个文本字段，默认情况下它将返回第一个字符串字段作为显示值。您可以通过更新性别查找表中的摘要属性来覆盖它以选择另一个要显示的字段。

关于术语，下拉框在 LightSwitch 中称为自动完成框，因此在谷歌上搜索 LightSwitch 自动完成将返回几篇关于如何创建多列自动完成、嵌入图像的自动完成、对自动完成框进行排序、过滤可用显示值（例如过滤当前活跃的产品），使用自动完成框过滤其他表单等。

# php - 使用 PHP 从浏览器通过 Android 相机捕获图像

> ID：11571746
> 
> 赞同：4
> 
> 时间：2012-07-20T01:45:00.840
> 
> 标签：php, android

是否可以通过带有 PHP 的浏览器或其他 PHP 库使用 Android 相机捕获图像？我知道它可以通过电话间隙来完成，但我正在尝试用 PHP 来完成。因为我的其他项目也使用 PHP。

任何人都可以帮我找到解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T02:04:54.493

我发现 Android 3.0+ 设备是可能的。它启动相机，并在拍摄照片时返回页面。来源：[https ://stackoverflow.com/a/7811843/1536522](https://stackoverflow.com/a/7811843/1536522)

```
<input type="file" accept="image/*;capture=camera"> 
```

# ios - iOS - 使用搜索关键字启动其他应用

> ID：11571747
> 
> 赞同：0
> 
> 时间：2012-07-20T01:45:07.790
> 
> 标签：ios, app-store, youtube-api

是否可以从我的 iOS 应用程序启动另一个应用程序（例如 youtube、AppStore、地图等）并为其提供搜索关键字？

例如，我想从我的应用程序中向用户提供搜索卡通视频的能力，并在 Youtube 应用程序中显示结果。

请分享你的想法/

谢谢，胡伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T02:11:17.353

与其他应用程序通信的唯一方法是通过 URL。看看[与其他应用程序的通信](https://developer.apple.com/library/IOs/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html#//apple_ref/doc/uid/TP40007072-CH7-SW18)。要回答您的问题，只需创建一个包含搜索词的 URL。

由于在您的问题中标记了应用商店，我相信您会发现这很有用：[如何链接到应用商店上的应用](https://stackoverflow.com/questions/433907/how-to-link-to-apps-on-the-app-store)。

> 提示是使用itms://而不是http://，然后它会直接在应用商店中打开

# git - Git子模块更新错误

> ID：11571748
> 
> 赞同：0
> 
> 时间：2012-07-20T01:45:08.823
> 
> 标签：git

我现在开始 git，并运行一些测试以更好地学习它，但是遇到了一个错误......

我已经启动了一个我正在开发的框架的 git 存储库，该存储库用于我正在从事的许多项目，以便轻松更新这些项目。

为了测试，我开始了一个新项目并将框架添加为子模块。我已经将项目克隆到一个新文件夹中，执行了以下命令`git submodule init; git submodule update`，并且子模块被完美地克隆到了它的目录中。

之后，我根据项目需要对源代码进行了一些修改，并将对源代码所做的修改提交并推送到服务器。一切都很顺利。

在我克隆的另一个文件夹上，我已经完成了修改，一切似乎都很好。

```
DennyMac:app DennyLoko$ git commit -a -m "Teste"
[master 68fee42] Teste
 1 files changed, 1 insertions(+), 0 deletions(-)
DennyMac:app DennyLoko$ cd ..
DennyMac:vesti DennyLoko$ git add app
DennyMac:vesti DennyLoko$ git commit -m "Teste"
[master 3a2b13d] Teste
 1 files changed, 1 insertions(+), 1 deletions(-)
DennyMac:vesti DennyLoko$ git push
Counting objects: 3, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (2/2), 243 bytes, done.
Total 2 (delta 1), reused 0 (delta 0)
To git@git.xxxxxxxxxx.com:vesti.git
   33fc470..3a2b13d  master -> master 
```

但是当我检查了修改文件的来源时，什么都没有改变。运行`git submodule update`它会出现以下错误：

```
DennyMac:testelol DennyLoko$ git submodule update
fatal: reference is not a tree: 68fee423f5dba537956fec51dcab0901856ad4e6
Unable to checkout '68fee423f5dba537956fec51dcab0901856ad4e6' in submodule path 'app' 
```

我该怎么做才能解决这个问题？我正在使用子模块做最好的事情，还是存在更好的方法？

感谢你们！

编辑：：

让我们提供更多细节......

我在 Assembla 上创建了框架项目，并通过以下命令发送了初始结构：

```
git init
git add .
git commit -a -m "Estrutura inicial enviada"
git remote add origin git@git.assembla.com:off.git
git push origin master 
```

之后，我为新项目创建了目录：

```
mkdir vesti
cd vesti
mkdir documentacao
mkdir node_app
git init
git add .
git submodule init
git submodule add git@git.assembla.com:off.git app
git commit -a -m "Teste"
git remote add origin git@git.assembla.com:vesti.git
git push origin master 
```

之后，我创建了一个新目录并将( )`mkdir testelol`克隆到该目录并执行以下命令：`vesti``git clone git@git.assembla.com:vesti.git`

```
git submodule init
git submodule update 
```

哪个运行成功并自动克隆了 app 目录中的 git@git.assembla.com:off.git 。回到`vesti`dir ( `cd ../vesti`)，我做了以下事情：

*   编辑`app`子模块 ( `echo "teste" >> app/application/Main_Class.php`)内的文件
*   改为`app`目录 ( `cd app`)
*   提交修改（`git commit -a -m "Teste"`返回`[master 68fee42] Teste 1 files changed, 1 insertions(+), 0 deletions(-)`）
*   备份到 repo 的根目录 ( `cd ..`)
*   添加了`app`修改 ( `git add app`)
*   承诺（`git commit -m "Teste"`返回`[master 3a2b13d] Teste 1 files changed, 1 insertions(+), 1 deletions(-)`）
*   并推送修改（`git push`）

.

```
DennyMac:vesti DennyLoko$ git push
Counting objects: 3, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (2/2), 243 bytes, done.
Total 2 (delta 1), reused 0 (delta 0)
To git@git.assembla.com:vesti.git
   33fc470..3a2b13d  master -> master 
```

完成这一切之后，我回到了`testelol`目录并执行了`git pull`返回成功消息的命令：

```
DennyMac:testelol DennyLoko$ git pull
remote: Counting objects: 3, done.
remote: Compressing objects: 100% (2/2), done.
remote: Total 2 (delta 1), reused 0 (delta 0)
Unpacking objects: 100% (2/2), done.
From git@git.assembla.com:vesti.git
   33fc470..3a2b13d  master     -> origin/master
Fetching submodule app
Updating 33fc470..3a2b13d
Fast-forward
 app |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-) 
```

之后，我检查了是否对文件进行了修改`testelol/app/application/Main_Class.php`但没有更改。要更新，我运行以下命令：

```
DennyMac:testelol DennyLoko$ git submodule init
DennyMac:testelol DennyLoko$ git submodule update
fatal: reference is not a tree: 68fee423f5dba537956fec51dcab0901856ad4e6
Unable to checkout '68fee423f5dba537956fec51dcab0901856ad4e6' in submodule path 'app' 
```

而已。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T02:42:55.673

如果我没看错，您的子模块位于“应用程序”中并且它被显式克隆，然后添加到已经将“应用程序”注册为子模块的父级。

如果父 repo 已经将子模块提交给它，那么从该项目工作树 rootdir 中，输入`git submodule update --init --recursive`（仅当您的子模块具有子模块时才需要 --recursive）

您可以查看 .gitmodules 的内容以查看已注册的内容（并记住在 .gitmodules 文件发生更改时提交它）。此外，您必须手动从 .gitmodules 中删除行并在删除子模块时提交它。

# visual-studio-2010 - ProtocolViolationException 负载测试 Web 服务（带有内容主体的 GET 操作）

> ID：11571751
> 
> 赞同：0
> 
> 时间：2012-07-20T01:45:48.713
> 
> 标签：visual-studio-2010, exception, rest, asp.net-web-api, load-testing

我使用单个 GET 操作创建了一个 ASP.NET MVC4 Web API 服务 (REST)。该操作当前需要 11 个输入值，因此我没有在 URL 中传递所有这些值，而是选择将这些值封装到单个类类型中并将其作为 Content-Body 传递。在 Fiddler 中进行测试时，我将动词指定为 GET，并在“请求正文”输入框中输入 JSON 文本。这很好用！

问题是当我尝试在 Visual Studio 2010 Ultimate 中执行负载测试时。我能够指定 GET 操作和 JSON Content-Body 就好了。但是当我运行负载测试时，VS 在测试结果中报告了 ProtocolViolationException 类型的异常（无法发送具有此动词类型的内容主体）。测试在 1 毫秒内执行，所以我怀疑异常导致测试立即中止。我能做些什么来避免这些异常？我宁愿不更改我的 API 以使用 URL 参数来解决测试工具的问题。如果我出于其他原因更改 API，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T09:58:04.730

我发现提出这个答案比继续讨论更容易。

发送内容`GET`在 RFC 2616 中没有定义，但也没有被禁止。因此，就规范而言，我们处于一个必须做出判断的领域。

`GET`规范地用于**获取**资源。所以你正在使用这个动词和你发送的参数来检索这个资源。由于`GET`既安全又幂等，因此非常适合缓存。缓存通常基于资源 URI 进行 - 有时基于各种标头。关键是缓存实现 - AFAIK - 不会使用 GET 内容（老实说，我在现实世界中没有看到任何 GET 内容）。并且将内容包含在密钥生成中是没有意义的，因为它会降低缓存的可伸缩性。

如果您有要发送的参数，它们必须在 URI 中，因为这是定义该 URI 的一部分。**因此，我坚信使用 GET 发送内容是错误的**。

即使您查看诸如 OData 之类的实现，它们也会将标准放在 URI 中。我无法想象您的（或任何）应用程序要求超出了 OData 查询要求。

# lua - Lua 质数检查器

> ID：11571752
> 
> 赞同：4
> 
> 时间：2012-07-20T01:45:49.837
> 
> 标签：lua, numbers

这是我的 Lua 代码，用于接受用户输入，并检查输入的数字是否为素数。我的问题是程序认为任何偶数都不是素数，而任何奇数都是。

```
 print("Enter a number.")
 local number = io.read("*n")

 function prime(n)
 for i = 2, n^(1/2) do
   if (n % i) == 0 then
     return false
   end
   return true
 end
 end

 if prime(number) == true then
   print("Your number is prime!")
 end

 if prime(number) == false then
   print("Your number is not prime!")
 end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T01:57:51.840

移出`return true`循环。

因此：

```
function prime(n)
    for i = 2, n^(1/2) do
        if (n % i) == 0 then
            return false
        end
    end
    return true
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-29T15:25:30.110

我知道这是一个旧帖子，但由于它在谷歌的顶部附近，我认为发布我的主要查找器不会有什么坏处。它基本上对明显的东西进行了一些简单的检查，然后以与 Jon Ericson 帖子中的第一个示例类似的方式循环遍历剩下的内容。尚未对其进行基准测试，但它似乎可以很好地应对。

```
--returns true if prime
function isPrime(n)
    local n = tonumber(n)
    --catch nil, 0, 1, negative and non int numbers
    if not n or n<2 or (n % 1 ~=0) then 
        return false
    --catch even number above 2
    elseif n>2 and (n % 2 == 0) then 
        return false
    --primes over 5 end in 1,3,7 or 9
    --catch numbers that end in 5 or 0 (multiples of 5)
    elseif n>5 and (n % 5 ==0) then 
        return false
    --now check for prime
    else
        --only do the odds
        for i = 3, math.sqrt(n), 2 do
            --did it divide evenly
            if (n % i == 0) then
                return false
            end
        end
        --can defeat optimus
        return true
    end
end 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-20T01:56:37.970

你过早地返回真。只要*任何* `i`满足条件，您就会返回 true。您必须将 return放在循环*之后。*

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-03T07:16:51.153

如果你要检查素数，你不妨选择一个有效的算法。正如[一个答案](https://stackoverflow.com/a/12416295/1438)（隐晦地）指出的那样，所有大于 2 的偶数都不是素数。因此，您可以对一半的数字进行短路检查，从而使检查任何特定数字的速度加倍：

```
function check_prime (x) 

  -- Negative numbers, 0 and 1 are not prime.
  if x < 2 then 
     return false
  end

  -- Primality for even numbers is easy.
  if x == 2 then
     return 2
  end
  if x%2 == 0 then
     return false
  end

  -- Since we have already considered the even numbers,
  -- see if the odd numbers are factors.
  for i = 3, math.sqrt(x), 2 do 
      if x%i == 0 then 
         return false
      end 
  end 
  return x 
end 
```

我们可以应用各种优化，但让我们尝试以更 Lua 的方式来做这件事：

```
function sieve (x)
  if x < 2 then 
     return false
  end

  -- Assume all numbers are prime until proven not-prime.
  local prime = {}
  prime[1] = false
  for i = 2, x do 
      prime[i] = true 
  end 

  -- For each prime we find, mark all multiples as not-prime.
  for i = 2, math.sqrt(x) do
      if prime[i] then
         for j = i*i, x, i do
             prime[j] = false
         end
      end
  end

  return prime
end 
```

要使用[筛分](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)功能：

```
prime = sieve(number)
if prime[number] then
   print("Your number is prime!")
else
   print("Your number is not prime!")
end 
```

在我的测试中，sieve 版本的生成所有小于 100 万的素数的算法比之前的算法快 6 倍。（您的里程可能会有所不同。）您可以轻松地检查所有数字的素数，而`number`无需额外费用。另一方面，它使用更多的内存，如果你真的想只检查一个数字的素数，它的效率就会降低。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-09-13T23:37:50.960

我会通过将数字除以 2 并检查除法的下限是否等于除法来检查素数。它看起来像这样。

```
if (input/2 == math.floor(input/2)) then
  print("is prime")
else
  print("is not prime")
end 
```

# objective-c - UIDatePicker Date 属性不会使用所选日期设置 - 而是给出当前日期

> ID：11571757
> 
> 赞同：1
> 
> 时间：2012-07-20T01:47:06.097
> 
> 标签：objective-c, ios, ios5

我的应用程序中有一个 UIDatePicker，虽然我更改了在模拟器中选择的日期，但是当我 NSLog 时`datePicker.date`，它会输出当前日期而不是我选择的日期。

这是我的代码的摘录：（生成选择器的位置）

```
self.pickerView = [[UIDatePicker alloc] initWithFrame:pickerFrame];
//self.pickerView.frame = pickerFrame;

self.pickerView.datePickerMode = UIDatePickerModeDate;

actionSheet = [[UIActionSheet alloc] initWithTitle:nil 
                                                         delegate:nil
                                                cancelButtonTitle:nil
                                           destructiveButtonTitle:nil
                                                otherButtonTitles:nil];

[actionSheet setActionSheetStyle:UIActionSheetStyleBlackTranslucent];

[actionSheet addSubview:pickerView];

UISegmentedControl *closeButton = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObject:@"Done"]];
closeButton.momentary = YES; 
closeButton.frame = CGRectMake(260, 7.0f, 50.0f, 30.0f);
closeButton.segmentedControlStyle = UISegmentedControlStyleBar;
closeButton.tintColor = [UIColor blackColor];

[closeButton addTarget:self action:@selector(dismissActionSheet) forControlEvents:UIControlEventValueChanged];

[pickerView addTarget:self action:@selector(pickerChange) forControlEvents:UIControlEventValueChanged];

[actionSheet addSubview:closeButton];
[actionSheet setBounds:CGRectMake(0, 0, 320, 251)];

pickerView.maximumDate = [NSDate dateWithTimeIntervalSinceNow:315360000];
pickerView.minimumDate = [NSDate dateWithTimeIntervalSinceNow:-315360000]; 
```

然后在我的**pickerChange**函数中：

```
-(void)pickerChange{
    NSLog(@"DEBUG: Picker Value Changed");
    NSLog(@"%@",self.pickerView.date );
} 
```

该 NSLog 的输出始终是当前日期，而不是在 UIDatePicker 中选择的日期。不知道为什么会这样，因为据我所知，该`date`属性应该显示选择的内容，而不是当前日期（或在用户更改值之前最初选择的内容）。

任何帮助，将不胜感激。（如果您需要更多信息，请给我留言）。**谢谢！**我敢肯定，这一定是我在匆忙中忽略了的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:59:46.497

好的。我设法找到了答案 - 我将其发布，以便如果其他人有类似的问题，他们可以解决它。

我不得不**修改 pickerChange 函数以包含发送者**——但是人们会期望任何其他类型的对 datePicker 的引用都会产生相同的效果。下面是它现在的样子：

```
-(void)pickerChange:(UIDatePicker*) datePicker{
    myDate = datePicker.date;
} 
```

似乎这是解决问题的唯一方法，而不是引用“pickerView”（在头文件中声明），您必须以这种方式引用发件人。

看看其他人是否遇到过此类问题（或类似问题）会很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:15:45.170

如果您更改`UIControlEventValueChanged`为会发生什么`UIControlEventEditingDidEnd`？

# asp.net-mvc-3 - 使用 Model First EF 插入 null 失败

> ID：11571758
> 
> 赞同：0
> 
> 时间：2012-07-20T01:47:07.337
> 
> 标签：asp.net-mvc-3, entity-framework

我正在为 mvc3 webapp 使用从 EDMX 生成的上下文。我在实体上收到 NULL 插入失败错误

```
[Serializable]
[DataContract(IsReference = true)]
[EdmEntityType(NamespaceName = "Model", Name = "Thing")]
public class Thing: EntityObject
{
    public RolloverEntry();

    [DataMember]
    [EdmScalarProperty(EntityKeyProperty = true, IsNullable = false)]
    public int id { get; set; }
    [SoapIgnore]
    [EdmRelationshipNavigationProperty("Model", "FK_ThingStep1", "Step1")]
    [DataMember]
    [XmlIgnore]
    public EntityCollection<Step1> Step1 { get; set; }
    [SoapIgnore]
    [EdmRelationshipNavigationProperty("Model", "FK_ThingStep2", "Step2")]
    [XmlIgnore]
    [DataMember]
    public EntityCollection<Step2> Step2 { get; set; }

    public static Thing CreateThing(int id);
} 
```

对其他父子关系的数据访问正在正常工作并正确保存 - 我似乎无法找到这张表有什么问题 - 任何想法都值得赞赏

收到异常：

{"无法将值 NULL 插入到列 'id'，表 'myapp.dbo.Thing'；列不允许空值。INSERT 失败。\r\n语句已终止。"}

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T02:21:08.857

我猜您的模型中需要某种提示，即数据库应该为 id 列生成 id。您可能想查看是否为您的模型属性`StoreGeneratedPattern`设置为或类似的内容。`Identity``id`

# java - 如何使用 Java 连接到代理服务器

> ID：11571760
> 
> 赞同：3
> 
> 时间：2012-07-20T01:47:22.513
> 
> 标签：java, network-programming

我想编写一个 java(SE) 程序来连接代理服务器，比如说 123.123.123.123:8080。我将如何实现这一目标？我的机器和代理服务器之间的协议是什么？什么是 Java 框架的类可以使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T01:55:01.077

从 java 1.5 开始，您可以使用 java.net.Proxy 类来创建代理。

```
Proxy proxy=new Proxy(Proxy.Type.HTTP, new InetSocketAddress("123.123.123.123", 8080);
URL url = new URL("http://www.example.com");
HttpURLConnection uc = (HttpURLConnection)url.openConnection(proxy);
uc.connect(); 
```

[参考](http://www.rgagnon.com/javadetails/java-0085.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T01:53:38.347

Java 5 中网络代理配置的权威参考是这个[Java Networking and Proxies](http://docs.oracle.com/javase/1.5.0/docs/guide/net/proxies.html)页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T11:42:54.443

是的，代理服务器是一个网络服务器......每当您通过浏览器发送请求以获取特定网络服务器（例如 www.google.com）中的某些资源时，请求被发送到代理服务器而不是直接发送请求到谷歌服务器..代理服务器处理这个请求，将它们发送到谷歌服务器，接收响应，然后将响应发送回浏览器。代理服务器主要用于企业领域限制对特定网站的访问，跟踪特定员工使用的互联网，还将一些常用网页保存在缓存文件中，以便当另一个请求到来时，连接到所需的服务器时，它会从缓存文件中获取网页。因此可以节省时间。

# iphone - iOS Grid View 支持不同大小的单元格

> ID：11571762
> 
> 赞同：3
> 
> 时间：2012-07-20T01:47:33.793
> 
> 标签：iphone, objective-c, ios, gridview

我是一名 iOS 开发人员，正在寻找一个棘手问题的解决方案。我需要创建一个网格视图/马赛克视图来布局**不同**大小（宽度和高度）的单元格。

我基本上需要 GMGridView 的功能，具有水平滚动/分页、编辑和拖动单元格到新位置的能力，从而重新排列整个网格视图。我查看了所有当前的开源网格视图，但没有发现具有可变大小的单元格。

我想到的一个解决方案是 2 个 tableview 都为水平滚动而旋转，然后拦截一些 UITableView 滚动方法，然后一起滚动另一个 tableview。这并不理想，因为我无法将一个单元格从一个视图移动到另一个视图，而且我不确定苹果对此会有多高兴。

我也知道下一个版本的 iOS 会对此提供一些可能的（机密？）支持，但希望我的应用程序支持以前版本的 iOS。

感谢您提供的任何见解。

![http://bigreddog.com.au/files/pedals/grid_view_screenshot.png](../Images/5c994e85674564a3daa9f5c0a3e47b25.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-13T19:34:00.323

我意识到这篇文章有点老了，但这里是相关项目的列表：* [https://github.com/betzerra/MosaicUI](https://github.com/betzerra/MosaicUI)
* [https://github.com/betzerra/MosaicLayout](https://github.com/betzerra/MosaicLayout)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T03:06:54.777

iOS 上的 GridView 很痛苦。幸运的是，Apple 正在`UICollectionViews`提出针对构建网格进行优化的方法。这是在 iOS6 中出现的，它仍处于 NDA 之下，因此请查看 Apple 网站上的文档以获取更多信息。

你现在需要解决的问题是你是否想要iOS5的复古兼容性

# node.js - 基于节点的浏览器关键事件自动化测试

> ID：11571764
> 
> 赞同：3
> 
> 时间：2012-07-20T01:47:46.993
> 
> 标签：node.js, automated-tests, zombie.js, key-events, soda

我正在尝试为[Hashify Editor](https://bitbucket.org/davidchambers/hashify-editor)编写自动化测试。以下是我想做的各种断言：

1.  断言一个 textarea 匹配一个特定的选择器。

2.  断言 textarea 当前为空。

3.  在文本区域中键入“_”。断言它现在包含`__`，并且插入符号位于两个下划线之间。

4.  在文本区域中输入“你好”。断言它现在包含`_hello_`，并且插入符号位于第二个下划线之前。

5.  在文本区域中键入“_”。断言它仍然包含`_hello_`，并且插入符号现在位于第二个下划线之后。

我整天都在玩[Soda](https://github.com/LearnBoost/soda)和[Zombie.js](http://zombie.labnotes.org/)，试图在其中完成这项工作。我设法接近苏打水：

```
soda = require 'soda'

browser = soda.createClient ...

browser
  .chain
  .session()
  .open('/')
  .typeKeys('editor', '_')
  .assertValue('editor', '__') 
```

这个断言成功，但以下没有：

```
 .typeKeys('editor', 'hello')
  .assertValue('editor', '_hello_')
  # ERROR: Actual value '__' did not match '_hello_' 
```

使用`.type`以不同的方式失败：

```
 .type('editor', 'hello')
  .assertValue('editor', '_hello_')
  # ERROR: Actual value 'hello' did not match '_hello_' 
```

关于assaf/zombie [#275](https://github.com/assaf/zombie/issues/275)的建议让我抱有希望，但我无法使用这种方法触发 textarea 的按键处理程序。

也许我正在以错误的方式解决这个问题。有没有人使用 Node 成功测试过按键处理程序？什么是工作的最佳工具？

# mysql - 处理大部分 Google Maps 3 标记

> ID：11571765
> 
> 赞同：0
> 
> 时间：2012-07-20T01:48:26.213
> 
> 标签：mysql, database, google-maps, google-maps-api-3

我的谷歌地图 v.3 上有很多标记。我的地图运行很慢，因为上面有太多标记 那么，如何索引数据库以增加标记的负载？那会有什么影响吗？如果没有，你有什么想法吗？感谢：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:10:33.983

这取决于瓶颈在哪里。

如果瓶颈在于数据库查找，那么向数据库添加索引肯定会有所帮助。您可能需要参考[MySQL 索引文档](http://dev.mysql.com/doc/refman/5.0/en/optimization-indexes.html)以获取一些指南。

否则，如果瓶颈在前端，即。由于必须一次加载太多标记，JavaScript 负担过重，这里有一些提示：

*   尽量不要一次显示太多标记。

*   如果标记与时间相关，您可能希望从地图上删除一些旧标记以释放一些内存。

*   如果有很多标记要一次全部显示，您可能希望使用计时器 ( `setTimeout`) 来错开显示，例如，每 100 毫秒显示一个标记，而不是一次全部显示。

*   如果可能，重新设计您的 UI 以允许一次只显示 20 个最相关的标记，同时提示您的用户在需要时再加载 20 个。

# apache - 通过带有 IP 地址的浏览器访问新网站？

> ID：11571768
> 
> 赞同：0
> 
> 时间：2012-07-20T01:48:48.847
> 
> 标签：apache, hosting, ip, cpanel, whm

我已经使用 WHM 设置了一个新站点，但尚未设置 DNS。我希望能够通过浏览器访问该站点，以便设置 CMS。通常，我可以通过在浏览器中输入 IP 地址来做到这一点，但这次我只是得到一个页面，说 Apache 正在服务器上工作。

有谁知道解决这个问题的方法？谢谢！

![阿帕奇](../Images/06bb4a0a85ed8e44f5cb92a420c532a9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T01:59:42.917

问题是您的浏览器发送的请求在 HTTP 标头中不包含正确的内容`Host:`，因此 Web 服务器使用默认的包罗万象的页面进行回复。

你可以

*   **使用yoursite.com**区域设置私有（本地）权威 DNS 服务器，并将系统的 DNS 设置为指向此 DNS 服务器，或

*   **通过在文件中注册whatever.yoursite.com**及其对应的IP地址`/etc/hosts`（在类unix系统中）来临时欺骗本地系统中的DNS解析。MS Windows 系统中有一个等效文件，查找名为`hosts`.`C:\Windows\system32\drivers\etc`

我会先尝试后者，因为只需在文本文件中添加一行：

```
203.0.113.22    whatever.yoursite.com 
```

您可能需要重新启动浏览器。

# linux - 如何在后台运行东西并在 Perl 中重定向它们的输出？

> ID：11571772
> 
> 赞同：3
> 
> 时间：2012-07-20T01:49:17.663
> 
> 标签：linux, perl, background-process

```
my $pm = new Parallel::ForkManager(4);

foreach my $array (@lines) {
        $pm->start and next;
        $cmd = 'command';
        print "\n$cmd\n\n";
        exec($cmd);
        $pm->finish; }
$pm->wait_all_children; 
```

如您所见，我的代码一次运行 4 件事。这是 ffmpeg 管道视频到 x264。它的输出很杂乱，在 4 个输出之间的单线上跳来跳去。有没有办法在后台完全运行这些并重定向其输出，以便我可以干净地打印和更新 4 个单独的输出？这会很好，所以我可以告诉每个过程有多远。

如果它绝对不能在 perl 中完成，我很乐意接受任何帮助来指导我使用另一种语言，这会使这更容易。顺便说一下，这是在 Linux 下。谢谢你。

Open2远远超出了我。我将如何使用它？我无法理解如何在不换行的情况下打印每件事的进度。我想打印每个进程正在执行的任何内容的 STDERR 和 STDOUT，当它结束时，将其保留为不更新的行。这不是一个很好的解释，但我不知道如何解释我想要的。基本上，前 4 个作业会有 4 行不断刷新。然后，当其中一项工作完成时，为新工作添加一个新行，并可能以某种方式指示已完成的工作已完成。

我尝试使用“open”进行快速测试，它仍然输出到 shell。这是在 Windows 中，但它的行为仍应相同。这甚至可以用 Perl 甚至在 shell 中实现吗？

你好？我仍然需要这方面的帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T02:00:20.980

如果要捕获每个进程的 STDOUT，可以使用[`open`](http://perldoc.perl.org/functions/open.html)而不是`exec`运行子进程。

```
foreach my $array(@lines) { 
    $pm->start and next;
    my $cmd = 'command';
    open my $cmd_out, '-|', $cmd or die "Can't start process: $!";

    # read from command output
    while( my $line = <$cmd_out> ) { 
        # do something with output
    }

    $pm->finish;
} 
```

如果您需要同时捕获 STDOUT 和 STDERR，请参阅[IPC::Open2](http://perldoc.perl.org/IPC/Open2.html)。如果您还需要 STDIN 的句柄，还有[IPC::Open3 。](http://perldoc.perl.org/IPC/Open3.html)

# sql - 根据不同表中的字段相等插入是或否值

> ID：11571773
> 
> 赞同：1
> 
> 时间：2012-07-20T01:49:22.173
> 
> 标签：sql, sql-server, sql-server-2008, insert

我创建了一个名为 LeadInventor 的字段，

如果第一个发明者表中的名称与发明者表匹配，我希望 SQL Server 做的是在 LeadInventor 字段中插入“是”。第一个发明者表将名称作为一个字段，发明者表将它们分开第一个和最后一个

这是我到目前为止的编码，我知道这是错误的。

```
if inventor.InventorFirst + ' ' +inventor.InventorLast  = firstinventor.firstinventorname
insert into Inventor(LeadInventor) values ('Yes')
else insert into Inventor(leadinventor) values ('No'); 
```

我想知道的是如何修复它，或者重新编写它，以便它会按照我的要求去做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T01:55:39.670

像这样的东西？

```
UPDATE i
SET LeadInventor = 
    CASE 
        WHEN fi.FirstInventorName IS NULL THEN 'No' 
        ELSE 'Yes' 
    END
FROM Inventor i
    LEFT JOIN FirstInventor fi
    ON i.InventorFirst + ' ' + i.InventorLast = fi.FirstInventorName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T03:17:03.193

我认为用 case 进行内部连接会做，因为你正在匹配字符串

UPDATE inv
SET LeadInventor =
CASE WHEN fi.FirstInventorName IS NULL THEN 'No' WHEN fi.FirstInventorName ='' THEN 'No' - 假设您想要 NO 即使是空白名字，如果不删除此行
ELSE 'Yes'
END FROM Inventor inv
INNER JOIN FirstInventor firstinv ON firstinv.FirstInventorName = inv.InventorFirst + ' ' + inv.InventorLast

# android - OnCreate 之后的 OnItemSelectedListener 调用顺序

> ID：11571775
> 
> 赞同：0
> 
> 时间：2012-07-20T01:49:54.593
> 
> 标签：android

我在一个活动中有两个微调器，其中第二个微调器的选择集基于用户为第一个微调器选择的内容。我在 Activity 中使用了一个私有类变量，该变量在顶部 Spinner 的 OnItemSelectedListener 中设置，然后在底部 Spinner 的 OnItemSelectedListener 中引用以获得正确的选择集。

这几乎总是有效的，但有时（主要是当应用程序运行时，未退出，然后通过用户点击一段时间后再次启动）由于未设置此局部变量，我在第二个 Spinner 的 OnItemSelectedListener 中得到一个空指针异常。这向我表明，在 OnCreate 之后，第二个 Spinner 的 OnItemSelectedListener 在第一个 Spinner 之前被调用。

是否有任何方法可以强制触发侦听器的特定顺序，或者是否有更好的设计方法来处理第二个 Spinner 对第一个 Spinner 的依赖？

示例代码：包 com.crashtestdummylimited.navydecoder；

```
public class Test extends Activity {    

  // Variable that at times is still null
  private ReferenceData     referenceData;    

  private void setupSpinnerFromArray (int spinnerId, String stringArray[], OnItemSelectedListener listener) {    
    Spinner spinner = (Spinner) findViewById(spinnerId);    

    ArrayAdapter <CharSequence> adapter = new ArrayAdapter <CharSequence>(    
      this, android.R.layout.simple_spinner_item, stringArray);    

    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);    

    spinner.setAdapter(adapter);    

    spinner.setOnItemSelectedListener(listener);    
  }    

  @Override    
  public void onCreate(Bundle savedInstanceState) {    
    super.onCreate(savedInstanceState);    

    setContentView(R.layout.main_screen);    

    // Setup Top (main) Spinner    
    Spinner spinner1 = (Spinner) findViewById(R.id.mainDecodeSpinner);    

    ArrayAdapter<CharSequence> adapter1 = ArrayAdapter.createFromResource(    
      this, R.array.level0_list_array, android.R.layout.simple_spinner_item);    

    adapter1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);    
    spinner1.setAdapter(adapter1);    

    spinner1.setOnItemSelectedListener(new MainDecoderItemSelectedListener());    

    // Setup Bottom (dependent) Spinner    
    setupSpinnerFromArray(R.id.secondaryDecodeSpinner, R.array.level1_list_array, new SecondaryDecoderItemSelectedListener());    
   }    

  public class MainDecoderItemSelectedListener implements OnItemSelectedListener {    

    public void onItemSelected(AdapterView<?> parent,    
                                View view, int pos, long id) {    

      String selectedString = parent.getItemAtPosition(pos).toString();    

      if (selectedString.equals("AAA")){    
        // Problem variable is set
        referenceData = new RatingCodes();    
        setupSpinnerFromArray(R.id.secondaryDecodeSpinner, referenceData.getKeys(), new SecondaryDecoderItemSelectedListener());    
      }          
      else if (selectedString.equals("BBB")){    
        // Problem variable is set
        referenceData = new IMSCodes();      
        setupSpinnerFromArray(R.id.secondaryDecodeSpinner, referenceData.getKeys(), new SecondaryDecoderItemSelectedListener());    
      }    
      //  TODO: Improve what occurs if no match which should not occur    
    }    

    public void onNothingSelected(AdapterView<?> parent) {    
      // Do nothing.    
    }    
  }    

  public class SecondaryDecoderItemSelectedListener implements OnItemSelectedListener {    

    public void onItemSelected(AdapterView<?> parent,    
                                View view, int pos, long id) {    

      String key = parent.getItemAtPosition(pos).toString();    

      // **** referenceData being null at this point has caused crashed ****    
      String value = referenceData.getValue(key);    

      // ...  Update text on activity screen  ...    
    }    

    public void onNothingSelected(AdapterView<?> parent) {    
      // Do nothing.    
    }    
  }    

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T17:10:41.157

```
public void onItemSelected(AdapterView<?> parent,View view, int pos, long id) 
{

 if(pos == 0) 
 { //when it loads on onCreate() then pos is always 0
        //donothing              
  } 
 else 
 { //If user manually select item

           //do what you need to do on manual user selection

 }
} 
```

# ruby-on-rails - Ember-data 和 MongoDB，如何处理 _id

> ID：11571777
> 
> 赞同：9
> 
> 时间：2012-07-20T01:50:01.587
> 
> 标签：ruby-on-rails, mongodb, mongoid, ember.js, ember-data

我正在使用带有 rails 和 MongoDB 的 ember-data，并且在 _id 字段中存储 ID 的方式存在问题。

Ember-data 将使用 id 作为 ID 的默认字段，因此我尝试像这样覆盖它：

```
App.User = DS.Model.extend
    primaryKey: "_id"
    name: DS.attr "string"
    image: DS.attr "string" 
```

这似乎在大多数情况下都有效，但在某些情况下，我会从 ember 中得到例外情况：

> 未捕获的错误：断言失败：您的服务器返回了带有键 _id 的哈希，但您没有映射

我怀疑这可能是 ember-data 中的一个错误，因为它仍在大量开发中，但我试图找到一种方法来将 _id 映射到 Rails 中服务器端的 id ？我正在使用 mongoid 进行 mongo 映射。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-04-05T13:04:13.257

如果您使用的是 Mongoid，这里有一个解决方案，因此您不必`def id; object._id.to_s; end`为每个序列化程序添加方法

添加以下 Rails 初始化程序

**Mongoid 3.x**

```
module Moped
  module BSON
    class ObjectId
      alias :to_json :to_s
      alias :as_json :to_s
    end
  end
end 
```

**蒙古族 4**

```
module BSON
  class ObjectId
    alias :to_json :to_s
    alias :as_json :to_s
  end
end 
```

活动模型序列化器`Building`

```
class BuildingSerializer < ActiveModel::Serializer
  attributes :id, :name
end 
```

生成的 JSON

```
{
  "buildings": [
    {"id":"5338f70741727450f8000000","name":"City Hall"},    
    {"id":"5338f70741727450f8010000","name":"Firestation"}
  ]
} 
```

这是 brentkirby 建议的猴子补丁，由[arthurnn](https://github.com/rails-api/active_model_serializers/issues/354#issuecomment-20913660)为 Mongoid 4[更新](https://github.com/rails-api/active_model_serializers/issues/354#issuecomment-26805414)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T06:49:56.930

另一种方法可能是使用（如果可能的话）[ActiveModel::Serializer](https://github.com/josevalim/active_model_serializers)。（我认为它应该接近 rabl (?)）

来自 ember-data gihtub：[https](https://github.com/emberjs/data) : //github.com/emberjs/data：
*对遵循 active_model_serializers gem 约定的 Rails 应用程序的开箱即用支持*

当我们开始使用 ember-data 时，我们正在制作`as_json()`，但使用 gem 肯定更好:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T19:20:06.927

最好的方法是使用[`ActiveModel::Serializers`](https://github.com/rails-api/active_model_serializers). 由于我们使用的是**Mongoid**，因此您需要添加这样的 include 语句（请参阅benedikt的此[要点）：](https://gist.github.com/benedikt/1959907)

```
# config/initializers/active_model_serializers.rb
Mongoid::Document.send(:include, ActiveModel::SerializerSupport)
Mongoid::Criteria.delegate(:active_model_serializer, :to => :to_a) 
```

然后包括您的序列化程序。像这样的东西：

```
# app/serializers/user_serializer.rb
class UserSerializer < ActiveModel::Serializer
  attributes :id, :name, :email
  def id
    object._id
  end 
end 
```

这解决了`_id`问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-22T15:25:15.717

我在使用带有 ember-resource 和 couchdb 的 ember.js 时遇到了类似的问题，它的 ID 也存储为`_id`.

作为该问题的解决方案，我为所有包含计算属性的模型类定义了一个超类，以`_id`像`id`这样复制：

```
// get over the fact that couchdb uses _id, ember-resource uses id
id: function(key, value) {
    // map _id (couchdb) to id (ember)
    if (arguments.length === 1) {
        return this.get('_id');
    }
    else {
        this.set('_id', value);
        return value;
    }
}.property('_id').cacheable() 
```

也许这也可以解决您的问题？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T03:31:32.110

啊，您可以制作 JSON 以使用 id 方法而不是 _id 属性，而不是在 JSON 中包含 _id。方法：

您可以使用[rabl](https://github.com/nesquena/rabl/)，JSON 可能是这样的：

```
object @user 
attributes :id, :email
node(:full_name) {|user| "#{user.first_name} #{user.last_name}"} 
```

您还可以制作 as_json 方法

```
class User
  def as_json(args={})
    super args.merge(:only => [:email], :methods => [:id, :full_name])
  end
end 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-06-16T22:59:37.460

joscas 回答的第二部分为我解决了 Rails4/Ruby2 的 id 问题，但我必须 .to_s _id。

```
class UserSerializer < ActiveModel::Serializer
  attributes :id, :name, :email
  def id
    object._id.to_s
  end
end 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-03T08:08:30.907

如果您使用 Mongoid3，这里的猴子补丁可能适合您。

[https://gist.github.com/4700909](https://gist.github.com/4700909)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-12-03T04:10:27.477

我不知道它是什么时候添加的，但你可以告诉 Ember-Data 主键是 _id：

```
DS.RESTAdapter.extend({
  serializer: DS.RESTSerializer.extend({
    primaryKey: '_id'
  })
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-11-26T12:26:41.453

虽然这个问题很老了，但我仍然认为我的回答可以帮助其他人：

如果您使用的是 ActiveModelSerializer，那么您只需要这样做：

```
class UserSerializer < ActiveModel::Serializer
     attributes :id , :name
end 
```

一切正常。顺便说一句，我在前端使用 emberjs。

# java - java强制JTextField只为大写

> ID：11571779
> 
> 赞同：3
> 
> 时间：2012-07-20T01:50:15.327
> 
> 标签：java, swing

有没有办法强制所有用户输入`JTextField`在 Java 中为大写？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-20T05:19:42.647

一个完整的工作示例可能会对您有所帮助

```
import java.awt.Dimension;
import java.awt.FlowLayout;

import javax.swing.JFrame;
import javax.swing.JTextField;
import javax.swing.text.AbstractDocument;
import javax.swing.text.AttributeSet;
import javax.swing.text.BadLocationException;
import javax.swing.text.DocumentFilter;

public class UpperCasedTextFieldTester extends JFrame {
    /** */
    private static final long serialVersionUID = -4767854098431909437L;

    public UpperCasedTextFieldTester(){
        setSize(200, 200);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLayout(new FlowLayout(FlowLayout.LEFT));

        DocumentFilter filter = new UppercaseDocumentFilter();

        JTextField firstName = new JTextField();
        firstName.setPreferredSize(new Dimension(100, 20));
        ((AbstractDocument) firstName.getDocument()).setDocumentFilter(filter);

        JTextField lastName = new JTextField();
        lastName.setPreferredSize(new Dimension(100, 20));
        ((AbstractDocument) lastName.getDocument()).setDocumentFilter(filter);

        add(firstName);
        add(lastName);
    }

    public static void main(String[] args) {
        new UpperCasedTextFieldTester().setVisible(true);
    }

}

class UppercaseDocumentFilter extends DocumentFilter {
    public void insertString(DocumentFilter.FilterBypass fb, int offset,
            String text, AttributeSet attr) throws BadLocationException {

        fb.insertString(offset, text.toUpperCase(), attr);
    }

    public void replace(DocumentFilter.FilterBypass fb, int offset, int length,
            String text, AttributeSet attrs) throws BadLocationException {

        fb.replace(offset, length, text.toUpperCase(), attrs);
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-20T01:57:58.703

你有两个直接的选择。您可以提供自己的[文档](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/Document.html)，这有点工作，或者提供自己的[DocumentFilter](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/DocumentFilter.html)

或者，您只需 google 并查看您找到的内容，例如[http://www.java2s.com/Code/Java/Swing-JFC/DocumentFilterthatmapslowercaseletterstouppercase.htm](http://www.java2s.com/Code/Java/Swing-JFC/DocumentFilterthatmapslowercaseletterstouppercase.htm) ;)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-20T02:23:28.760

下面是一个例子`DocumentFilter`。

```
AbstractDocument document = (AbstractDocument) textfield
                .getDocument();
        document.setDocumentFilter(new DocumentFilter() {
            @Override
            public void insertString(FilterBypass fb, int offset,
                    String string, AttributeSet attr)
                    throws BadLocationException {
                super.insertString(fb, offset, string.toUpperCase(), attr);
            }

            @Override
            public void replace(FilterBypass fb, int offset, int length,
                    String text, AttributeSet attrs)
                    throws BadLocationException {
                super.insertString(fb, offset, text.toUpperCase(), attrs);
            }

        }); 
```

# objective-c - 选择器 ID 对参数类型敏感吗？

> ID：11571781
> 
> 赞同：2
> 
> 时间：2012-07-20T01:50:37.790
> 
> 标签：objective-c, ios, cocoa-touch

当您使用 检索选择器的 ID 时，选择`@selector()`器值是否因参数类型而异？

这就是我的意思。我有一个接受对象引用和选择器的方法，然后使用参数调用它：

```
-(void)CallLater:(NSObject*) Obj Sel: (SEL)Sel
{
    //Some stuff, then:
    [Obj performSelector: Sel withObject: SomeOtherObject];
} 
```

我将此方法与一个选择器一起使用到一个函数，该函数接受一个类型化的对象引用，而不是`id`：

```
-(void)MyMethod: (MyObject*) a
{
}

[self CallLater: self Sel:@selector(MyMethod:)]; 
```

它似乎有效，但我的感觉正在刺痛。在像 C# 这样的静态类型语言中，这将是一种犯规，一种向上转型 -`CallLater`期望一个选择器用于一个接受 a 的函数，`id`而我给它一个接受 a 的函数`MyObject`。

另一方面，编译器并没有抱怨，`id`而且具体的对象引用似乎都只是深层的指针，可以简单地相互转换。话又说回来，Objective C 编译器没有抱怨很多错误。

所以真正的问题是——它安全吗？欢迎语言律师。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T01:55:12.173

它是安全的; 对象是对象。an`NSObject *`的选择器参数与 a 的选择器参数完全相同`MyObject *`。

如果您希望 MyMethod 验证它是使用特定类型的对象调用的，它应该对其执行 NSParameterAssert ：

```
NSParameterAssert([obj isKindOfClass: [MyObject class]]); 
```

就个人而言，我很少做这个检查。实际对象的*行为*就像我想要的类型就足够了，如果不是，我会得到一个运行时错误（通常是无法识别的选择器）。在简单的情况下，您会收到编译器警告，值得关注此警告（并在必要时使用 id 强制转换使其静音）。

我对您`id`在问题中的使用感到有些困惑，所以我想确保您理解这一点： An和a`NSObject *`一样多。是一个通用实例指针类，而是一个实例（或 的子类）。您可以拥有不从. 但你不太可能知道这一点。`id``MyObject *``id``NSObject *``NSObject``NSObject``NSObject`

其他注意事项，重新：约定：

*   Selectors (both the name and parameters) start with lowercase letters, so `CallLater:Sel:` should be `callLater:sel:`.
*   Variable and parameter names start with lowercase letters; `Obj` above should be `obj`.
*   Class names do start with an uppercase letter. :)

# php - 如何利用 Komodo 的自动完成功能

> ID：11571787
> 
> 赞同：3
> 
> 时间：2012-07-20T01:51:02.907
> 
> 标签：php, keyboard-shortcuts, komodo, komodoedit, code-intelligence

我是 Komodo 的菜鸟，我正试图弄清楚如何充分利用它。一件事一直困扰着我，可能有一个非常简单的答案。

例如，当我输入

```
if(isset($_GET[' 
```

Komodo 将自动填写该行的其余部分：`']))`这很棒。除了我的光标保留*在*自动完成部分之前，所以我必须将手移到箭头并手动导航到下一行或该行的末尾或其他任何内容。

似乎应该有一个组合键可以跳过*自动*完成的括号/括号/引号，这样我就可以继续打字而无需移至箭头键。

**但我不知道那是什么！你？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T01:08:00.270

使用组合[`Ctrl`键](http://docs.activestate.com/komodo/7.1/defkeybind.html)（[`Alt`在 OSX 上](http://docs.activestate.com/komodo/7.1/osxkeybind.html)）同时按下右箭头跳转到当前语句的末尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T19:49:04.373

Caret 留在那里，因为 Komodo 知道您需要填充字符串。打完就打`End`。

# cassandra - cassandra - 多租户：尝试创建 4000 个密钥空间，在 700 处失败

> ID：11571788
> 
> 赞同：3
> 
> 时间：2012-07-20T01:51:17.710
> 
> 标签：cassandra, jrubyonrails

环境：Jruby、Rails 2.3.8、cassandra-gem、cassandra 1.1

我们正在 cassandra 支持的多租户应用程序中为每个租户创建一个新的密钥空间。在测试时我们发现 Cassandra 失败了

```
at 400 keyspaces on a 8GB RAM machine, 7200 RPM disk
at 700 keyspaces on a 24 GB RAM machine, 7200 RPM disk 
```

还发现它在 100 个左右的键空间后运行缓慢。创建 700 个键空间大约需要 7 个小时，并且在没有数据输入的情况下消耗了大约 35GB 的磁盘空间。

然后我们切换测试以验证键空间中列族的最大数量，希望使用`<tenant id>_<columnfamily name>`命名的 CF。该测试在 ~3000 CFs 时也失败了。

现在我们正在寻找`<tenant_id>_<key>`行键并为所有租户使用相同的 CF。这是基于[https://github.com/rantav/hector/wiki/Virtual-Keyspaces](https://github.com/rantav/hector/wiki/Virtual-Keyspaces)上的注释。

问题是，`would prepending tenant_id to key work for the following CF, given the key validation class is LongType?`。

```
ColumnFamily: monthly_unique_user_counts
"count of unique users per month"
  Key Validation Class: org.apache.cassandra.db.marshal.LongType
  Default column value validator: org.apache.cassandra.db.marshal.LongType
  Columns sorted by: org.apache.cassandra.db.marshal.LongType
  Row cache size / save period in seconds / keys to save : 0.0/0/all
  Row Cache Provider: org.apache.cassandra.cache.ConcurrentLinkedHashCacheProvider
  Key cache size / save period in seconds: 200000.0/14400 
```

对于其他一些 CF，密钥验证类是

```
Key Validation Class: org.apache.cassandra.db.marshal.TimeUUIDType 
```

这个`<tenant_id>_<key>`概念会在那个 CF 中起作用吗？

# ruby-on-rails - 使用 Cron Job 执行 Rake 任务

> ID：11571789
> 
> 赞同：0
> 
> 时间：2012-07-20T01:51:19.910
> 
> 标签：ruby-on-rails, ruby, cron, rake

我正在尝试设置 cron 作业以每天运行 rake 任务。我目前有以下 cron 作业（注意，时间都是 *，因为我希望它在测试时每分钟运行一次）

```
* * * * * cd /home/jon/thestockenator/lib/tasks/ && ./get_current_data.sh 
```

在 shell 脚本中，我将整个 PATH 添加到 cron 运行它并调用 rake test_task 时的路径。

我设置了一个基本的 rake 任务，它只输出一些文本（因为我真正的需要一段时间才能运行）

```
task :test_task do
    puts "this is a rake task"
end 
```

cron 作业在 cron 作业中运行时肯定会运行和`which rake`工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T04:13:23.910

我通过将其添加到脚本来修复它：

`source ~/.rvm/scripts/rvm`

# php - 使用 .htaccess 文件在 PHP 中重写 URL

> ID：11571792
> 
> 赞同：-1
> 
> 时间：2012-07-20T01:51:52.010
> 
> 标签：php, apache, url-rewriting

在[这个](https://stackoverflow.com/questions/2126762/url-rewriting-in-php-without-htaccess)问题中，有人问是否可以在不访问 php 文件的情况下进行某种类型的 url 重写。（有关更多信息，请参阅问题。）如何访问 php 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T02:06:58.753

您可以将其用于您的 htaccess 文件：

```
RewriteEngine on
RewriteBase /
RewriteRule !\.(js|ico|txt|gif|jpg|png|css)$ index.php 
```

这只是意味着，将任何不以 js、ico、txt、gif、jpg、png 或 css 结尾的请求重写到您的 index.php 文件中。在 index.php 中，您可以访问任何参数`$_SERVER['REQUEST_URI']`并根据需要对其进行解析。

# python - 在python中记录argparse的值

> ID：11571794
> 
> 赞同：7
> 
> 时间：2012-07-20T01:51:54.390
> 
> 标签：python, logging, argparse

我正在尝试在 python 中同时使用 argparse 和 logging 模块。我有一个运行的程序有很多可能的选项，并且我已经成功实现了 argparse 模块来处理这个任务。

我想记录程序运行时每个选项的值并将其发送到日志文件。我尝试了以下几件事，并将我遇到的相关错误作为注释包含在它下面。

```
parser = argparse.ArgumentParser()
parser.add_argument('input', action="store", default='fort.13', type=str)

args = parser.parse_args()

# First try:
logging.info("Input args: " + args)
# TypeError: cannot concatenate 'str' and 'Namespace' objects

# Second try:
for x in args:
  logging.info(x)
# TypeError: 'Namespace' object is not iterable 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-20T01:54:30.857

您可以使用`vars`来获取已解析参数的属性：

```
for arg, value in sorted(vars(args).items()):
    logging.info("Argument %s: %r", arg, value) 
```

这在[docs](http://docs.python.org/library/argparse.html#the-namespace-object)中有详细说明。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-11T12:18:46.233

```
logging.info("Input args: %r", args) 
```

只需`Namespace`在日志中的一行中转储包含所有参数的整个对象。

# voltdb - VoltDB 社区版如何支持磁盘级持久化？

> ID：11571795
> 
> 赞同：4
> 
> 时间：2012-07-20T01:52:01.777
> 
> 标签：voltdb

VoltDB 的网站显示社区版支持完整的 ACID（包括 D 表示持久性），但它看起来不支持似乎与命令日志相关的崩溃恢复。社区版和商业版的耐用性的“D”部分有什么不同吗？如果机器出现故障，所有数据都会丢失吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-20T11:07:08.240

VoltDB 发行版（社区版和企业版）都通过数据库快照支持持久性，这些快照可以临时、以管理员定义的频率或连续执行。快照被写入永久存储。数据库恢复（持久性）是通过从快照恢复来实现的。

VoltDB 企业版还包括一个称为命令日志记录的功能，它为快照之间（通常是短暂的）间隔内发生的事务提供持久性。命令日志可以配置为同步运行（100% 的持久性保证）或异步运行（以在崩溃期间丢失一些事务为代价对事务延迟的影响较小）。如果使用异步日志记录，则可以配置 fsync 窗口以平衡延迟和持久性目标。

总之，VoltDB 的两个发行版都通过快照支持持久性，企业版通过命令日志提供额外的持久性。

应该注意的是，VoltDB 的两个发行版还包括通过称为 k-safety 的同步多主机功能的内置高可用性。您可以根据需要维护每个数据库节点的任意数量的“主节点”，VoltDB 将透明地（和同步地）将事务应用到所有适当的节点。如果一个节点崩溃，它的对等点只是继续接受/处理工作。这种“串联式”容错显着降低了发生需要数据库恢复的中断的可能性。

阅读有关 VoltDB 快照的更多信息：http: [//community.voltdb.com/docs/UsingVoltDB/SaveSnapshotAuto](http://community.voltdb.com/docs/UsingVoltDB/SaveSnapshotAuto)

阅读有关 VoltDB 命令记录的更多信息：http: [//community.voltdb.com/docs/UsingVoltDB/ChapCmdLog](http://community.voltdb.com/docs/UsingVoltDB/ChapCmdLog)

# c++ - C/C++ 中的 Char 数据类型

> ID：11571798
> 
> 赞同：5
> 
> 时间：2012-07-20T01:52:25.380
> 
> 标签：c++, c, arrays, string, char

我正在尝试在 Java 中调用 C++ DLL。在其 C++ 头文件中，有以下几行：

```
 #define a '102001'
    #define b '102002'
    #define c '202001'
    #define d '202002' 
```

a、b、c 和 d 的数据类型是什么？它们是 char 还是 char 数组？我应该转换成的Java中对应的数据类型是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T02:03:52.393

正如[Mysticial 所](https://stackoverflow.com/users/922184/mysticial)指出的，这些是[多字符文字](https://stackoverflow.com/q/7459939/335858)。它们的类型取决于实现，但可能是 Java `long`，因为它们使用 48 位。

在 Java 中，您需要`long`手动将它们转换为：

```
static long toMulticharConst(String s) {
    long res = 0;
    for (char c : s.toCharArray()) {
        res <<= 8;
        res |= ((long)c) & 0xFF;
    }
    return res;
}

final long a = toMulticharConst("102001");
final long b = toMulticharConst("102002");
final long c = toMulticharConst("202001");
final long d = toMulticharConst("202002"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T02:52:47.020

我可能会尝试回答前两个问题。不熟悉java，最后一个问题留给其他人。

单引号和双引号在 C 中表示非常不同的东西。单引号括起来的字符与在整理序列中表示它的整数相同（例如，在 ASCII 实现中，'a' 表示与 97 完全相同）。

但是，用双引号括起来的字符串是编写指向无名数组的初始字符的指针的简便方法，该数组已使用引号之间的字符和二进制值为 0 的额外字符进行了初始化。

因为整数总是足够大以容纳多个字符，所以C 编译器的***某些***实现允许字符常量和字符串常量中包含多个字符，这意味着写 'abc' 而不是 "abc" 很可能不会被检测到。然而，“abc”表示指向包含 4 个字符（a、b、c 和 \0）的数组的指针，而“abc”的含义取决于平台。许多 C 编译器将其理解为“由字符 a、b 和 c 的值组成的整数。

有关更多信息，您可以阅读“C 陷阱和陷阱”一书的第 1.4 章

# ruby-on-rails - Rails 控制台“y”助手返回 NameError 而不是 yaml 格式输出

> ID：11571801
> 
> 赞同：14
> 
> 时间：2012-07-20T01:52:57.697
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, rails-console, to-yaml

我正在尝试`y object`在 Rails 3.2.6/Ruby 1.9.3 控制台中使用为 ActiveRecord 对象获取格式良好的 yaml 输出，但由于某种原因它对我不起作用。我过去用过它，但在某个地方它坏了。当我尝试时，我得到以下输出：

```
NameError: undefined local variable or method `yaml' for main:Object 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-20T02:29:43.247

该`y`方法实际上是对[Syck YAML 解析器/发射器](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/syck/rdoc/Syck.html)`Kernel`放置的对象的扩展。这是最后几行：`lib/ruby/1.9.1/syck.rb`

```
module Kernel
    def y( object, *objects )
        objects.unshift object
        puts( if objects.length == 1
                  YAML.dump( *objects )
              else
                  YAML.dump_stream( *objects )
              end )
    end
    private :y
end 
```

默认情况下，Ruby 1.9.3 使用[Psych 解析器/发射器](https://github.com/tenderlove/psych/)而不是 Syck（我只能假设它们的发音不同），并且 Psych 没有声明这样的方法。

如果你真的喜欢`y`，你可以简单地在控制台中使用 Syck 代替 Psych ：

```
Loading development environment (Rails 3.2.5)
1.9.3p194 :001 > y 'hello'
NoMethodError: undefined method 'y' for main:Object
1.9.3p194 :002 > YAML::ENGINE.yamler = 'syck'
"syck"
1.9.3p194 :003 > y 'hello'
--- hello
nil 
```

我还将利用这个机会插入[awesome_print](https://github.com/michaeldv/awesome_print/)，它基本上`y`适用于 YAML 的所有功能。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-04T00:30:58.800

对于 rails 4/ruby 2，你可以只使用

```
puts object.to_yaml 
```

# linq - 调试模式 - 集合构造函数上的 LINQ NullReferenceException

> ID：11571811
> 
> 赞同：1
> 
> 时间：2012-07-20T01:54:26.767
> 
> 标签：linq, debugging, collections, nullreferenceexception

我认为当您将断点拖放到不同的分支并且使用某种类型的 LINQ 查询时，我在 Visual Studio 中发现了一个错误。如果您在下面的“if (x)”上放置断点并将执行行拖到 else 分支，则代码将在“test2”集合的初始化/构造函数上失败。

我之前在 LINQ 中使用过这种“double from”语法来进行连接，我认为这是一种公认​​的做法——不确定是否有一个术语。

无论如何，其他人可以确认这种奇怪的调试行为吗？

```
 public class TestEntity
    {
        public int TestID { get; set; }
        public string Test { get; set; }
    }

    public class Test2Entity
    {
        public int Test2ID { get; set; }
        public string Test2 { get; set; }
    }

    private void button1_Click(object sender, EventArgs e)
    {
            bool x = Calc();

            if (x) //breakpoint here
            {
                int y = 1;
            }
            else
            {
                System.Collections.ObjectModel.Collection<TestEntity> test = new System.Collections.ObjectModel.Collection<TestEntity>();
                System.Collections.ObjectModel.Collection<Test2Entity> test2 = new System.Collections.ObjectModel.Collection<Test2Entity>(); // fails here

                var z = from t in test
                        from t2 in test2
                        select t.TestID;
            }
        }

        private bool Calc()
        {
            return true;
        } 
```

# wpf - WPF Prism - 列表视图和数据输入对话框

> ID：11571830
> 
> 赞同：0
> 
> 时间：2012-07-20T01:57:44.883
> 
> 标签：wpf, mvvm, viewmodel, modal-dialog

我有一个列表视图，它显示用户列表（绑定到 UserListViewModel） - 用户可以添加/编辑/删除条目。我想做的是让添加按钮打开一个新窗口，用户可以在其中输入新的详细信息并保存。保存成功后，我希望关闭窗口并刷新列表视图以显示新添加的内容。

使用 MVVM 模式执行此操作的最佳方法是什么？我已经阅读了有关使用事件、模式对话框等的信息，并且[该](https://stackoverflow.com/a/5356620/1516379 "这")问题的公认答案描述了我的目标，但我似乎找不到如何实现的示例。

有人可以提供一个例子吗？

**更新：**我最终发现（阅读：偶然发现）[这篇](http://www.silverlightshow.net/items/ModalDialogs-IEditableObject-and-MVVM-in-Silverlight-4.aspx "这")文章适合我的目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:13:29.227

我会去互动。这样，您将能够开始交互，将数据传递给它，然后在完成/关闭后 - 获取一些数据以更新您的 VM。

在盒子中下载 MVVM，他们有可测试的 MVVM-ish 交互示例：http: [//karlshifflett.wordpress.com/2010/11/07/in-the-box-ndash-mvvm-training/](http://karlshifflett.wordpress.com/2010/11/07/in-the-box-ndash-mvvm-training/)

# javascript - Javascript：如何从动态生成输入中“获取”值

> ID：11571832
> 
> 赞同：0
> 
> 时间：2012-07-20T01:57:54.963
> 
> 标签：javascript

我使用php生成动态输入，示例生成代码

**HTML**

```
<input type='text' name='name1' onBlur='getValue(1)'>
<input type='text' name='name2' onBlur='getValue(2)'>
<input type='text' name='name3' onBlur='getValue(3)'>
<input type='text' name='name4' onBlur='getValue(4)'>
<input type='text' name='name5' onBlur='getValue(5)'> 
```

或者更多....

**Javascript**

```
function getValue(x){
    var nam = document.myForm.name[x].value;  <<< error?
    if(nam>1000){
        document.myForm.name[x].focus;   <<< error?
        alert ("input > 1000");
    }
} 
```

编写javascript的正确方法是什么？我指出 <<< 错误？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T02:00:43.333

`document.myForm.name['name'+x].value;`和`document.myForm.name['name'+x].focus()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T02:01:12.230

[工作示例](http://jsfiddle.net/qfFdm/)

```
function getValue(nameValue){
    var element = document.getElementsByName('name' + nameValue)[0];
    if(element){
       if(parseInt(element.value, 10) > 1000){
           setTimeout(function(){
              element.focus();
           },0);  
           alert ("input > 1000");
       }
    }
} 
```

用法：

```
getValue(1); 
```

# c# - 如何从列表中删除重复的用户但合并他们的角色

> ID：11571834
> 
> 赞同：0
> 
> 时间：2012-07-20T01:58:02.140
> 
> 标签：c#, linq

假设我有一个具有姓名和角色列表的人员列表：

列表中的每一项都是 PersonDetails 类型：

```
public class PersonDetails
{
 public int Id { get; set; }
 public string Name { get; set; }
 public List<Role> Roles { get; set; }
}

public class Role
{
 public string Name { get; set; }
} 
```

因此，在我的这些项目列表中，我可能有以下内容：

1.  ID 23 Eric，其角色包含 Role.Name = "Manager" 的角色
2.  ID 23 Eric，其角色包含 Role.Name = "CEO" 的角色
3.  ID 23 Eric，其角色包含 Role.Name = "CIO" 的角色

所以这就是目前的情况，但因为它是我希望我的名单是同一个人：

1.  ID 23 Eric，其角色包含“经理”、“CEO”、“CIO”

谁能告诉我如何将我的项目列表更改为这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T02:10:48.810

试试这个：

```
from details in detailsList
group details by new {Id = details.Id, Name = details.Name} into groupedDetails
select new PersonDetails()
{
    Id = groupedDetails.Key.Id,
    Name = groupingDetails.Key.Name,
    Roles = groupingDetails.SelectMany(member => member.Roles).ToList()
} 
```

我还没有对此进行测试，但我认为它会起作用。

# ruby-on-rails - 如何包含来自其他对象的表单元素？

> ID：11571845
> 
> 赞同：0
> 
> 时间：2012-07-20T02:00:10.620
> 
> 标签：ruby-on-rails, ruby

我正在使用一个非常简单的论坛软件来帮助我用铁轨上的红宝石弄湿我的脚。我要做的是在用户创建新主题时为帖子内容添加一个文本区域，但是每次我尝试在主题表单中添加它时，都会出现以下错误：

```
NoMethodError in Topics#new
Showing /Users/Ken/dev/forums/app/views/topics/_form.html.erb where line #11 raised:
undefined method `merge' for :content:Symbol 
```

这是我的新主题表单：

```
<%= form_for @topic do |f| %>
  <%= f.error_messages %>
  <% if params[:forum] %>
    <%= f.hidden_field :forum_id, :value => params[:forum] %>
  <% end %>
  <p>
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </p>
  <p>
    <%= f.text_area :post, :content  %>
  </p>
  <p><%= f.submit "Create" %></p>
<% end %> 
```

这是我的主题模型：

```
class Topic < ActiveRecord::Base
  attr_accessible :name, :last_poster_id, :last_post_at
  belongs_to :forum
  has_many :posts, :dependent => :destroy
end 
```

这是我的帖子模型：

```
class Post < ActiveRecord::Base
  attr_accessible :content
  belongs_to :topic
end 
```

如何使主题表单中的文本区域正常工作？我是否需要将其添加到主题模型才能访问它，如果需要，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T02:13:05.163

您可以使用 fields_for 助手。请参阅此链接[http://apidock.com/rails/ActionView/Helpers/FormHelper/fields_for](http://apidock.com/rails/ActionView/Helpers/FormHelper/fields_for)。第一个参数可以是 Post.new，然后您可以在该块内包含主题文本字段。最终结果是一个嵌套表单，您可以在控制器中对其进行解析。

# php - PHP/MySQL - 使用 json 编码数据而不是数据库中的多列

> ID：11571847
> 
> 赞同：0
> 
> 时间：2012-07-20T02:00:31.343
> 
> 标签：php, mysql, database, json

我想知道使用某种序列化数据是否是 json 编码或序列化等是否比在 mysql 数据库中使用多个列更好。

示例：如果我有一个“用户”表，一些列通常是：id、全名、用户名、电子邮件、密码等。

但是，如果我使用 json 数据而不是所有这些列呢？我可以在我的数据库表（id，数据）中只使用 2 列吗？所以我可以在php中做这样的事情：

```
json_encode(array('username' => $_POST['username'], 'password' => md5($_POST['password']))); 
```

然后将其插入到包含“数据”列的表中，该列将保存 json 编码数组。

稍后在脚本中，我可以检索“数据”列并使用`json_decode($stuff_from_db, true)`

如果这是一个愚蠢的问题，我很抱歉，我对 mysql 及其扩展方式等并不是很了解。但我想知道这是一个好主意还是坏主意。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T02:09:40.407

不，这不是一个好主意，这会使*Relational*脱离[RDBMS](http://en.wikipedia.org/wiki/Relational_database_management_system)。如果不必先解析每一行的结果，您将无法快速查询表中的任何内容。在小规模上这还可以，但如果你想用 MySQL 来存储数据，那么 MySQL 就不会成为要使用的数据库。

想象一下，如果您使用序列化或 JSON 编码存储它，则尝试从数据库中获取以下内容：

> 获取名字为“John”的用户数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T02:09:49.523

你可以这样做，但这将是非常糟糕的设计，因为你的数据不再是原子的。这对搜索不利，因为需要扫描表格......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T02:14:36.267

是的，这是个坏主意。使用这样的数据库确实效率低下，例如查询`WHERE`或`JOIN`查询，可能**无法这样做**。

此外，如果您愿意创建一个从 JSON 编码的数据库中获取一些信息的 API，则将需要更多的代码行来将 JSON 编码的数据转换为 XML 之类的东西。

一件小事，当您只需要特定的东西（例如要显示的全名）时，您必须选择有关用户的所有信息，这又是低效的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T02:10:23.660

对于某些类型的数据，它可能会起作用。但是对于您给出的示例，这不是一个很好的主意。如果您将其存储为 json 或序列化值，那么您将无法搜索。

您将如何正确执行以下查询

```
Select * from <table_name> where user_name="<user_name>" 
```

您可以声称可以进行通配符搜索。但我不会这样做。

我还认为，如果你有正确的场景，你应该存储 json 而不是序列化的值。如果您存储序列化值，那么其他系统（如果它们存在）将无法与该值交互，因为它们是用不同的语言编写的。

# language-agnostic - oAuth 2 服务器端与客户端

> ID：11571849
> 
> 赞同：2
> 
> 时间：2012-07-20T02:01:00.453
> 
> 标签：language-agnostic, oauth-2.0

我正在尝试围绕 oauth2 进行比较，并比较服务器和客户端的流程。对我来说，服务器端流程听起来要简单得多——用户授权一次，然后一切都保留在服务器上（将代码转换为访问令牌、对远程 api 的请求等）。

那么，为什么有人要使用客户端流程呢？

一种可能的答案可能是减少服务器流量。有没有人有任何证据表明客户端减少了来自服务器的大量流量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T02:53:03.587

我认为批准和访问令牌授予不太可能构成服务器流量负载的任何重要部分，除非它以非常模糊的方式实施。如果应用程序非常以 javascript 为中心并且没有其他理由专门联系 Web 服务器以获取其服务，则可能会使用客户端流程。例如，您可以想象一些用 javascript 编写的浏览器扩展，它使用 OAuth 2 请求某人最喜欢的 YouTube 视频、Facebook 朋友或其他一些数据，并以某种方式将其显示给用户。如果 Web 服务器不会为应用程序执行其他功能，那么专门为这些授权服务可能没有意义。

# android - 未调用适配器中的 ListFragment 未渲染和 getView()

> ID：11571852
> 
> 赞同：1
> 
> 时间：2012-07-20T02:01:15.907
> 
> 标签：android, android-fragments, listadapter, android-listfragment

据我所知，这可能是因为我的 ListView 没有显示，我已经验证 getCount 返回的值不为零，但我看不出我做错了什么。

一切都加载并表现得好像它正在工作但ListView从未出现，我在mixed.xml中的片段引用上放置了一个背景颜色，它在那里并占据了全屏，但是当我在我的ListView上设置背景颜色时它没有出现，就好像它根本没有被渲染。

更奇怪的是，我的适配器中没有调用 getView，这是我移植到片段的常规活动的所有工作代码。

我试过调用notifyDataSetChanged，它没有改变任何东西，调试显示适配器充满了数据，getCount确实返回了一个大于0的准确计数。

感谢您的帮助，我被卡住了。

项目是开放的，可以在这里查看[http://code.google.com/p/shack-droid/source/browse/#svn%2FTrunk](http://code.google.com/p/shack-droid/source/browse/#svn%2FTrunk)但我也在这里包括相关代码。

这是 ListFragment：

```
 public class FragmentTopicView extends ListFragment implements ShackGestureEvent {

        private ArrayList<ShackPost> posts;
        private String storyID = null;

        private String errorText = "";
        private Integer currentPage = 1;
        private Integer storyPages = 1;
        private String loadStoryID = null;
        private Boolean threadLoaded = true;
        private Hashtable<String, String> postCounts = null;
        private AdapterLimerifficTopic tva;

        public FragmentTopicView() {

        }

        @Override
        public void onCreate(Bundle savedInstanceState) {
                // TODO Auto-generated method stub
                super.onCreate(savedInstanceState);

                this.setRetainInstance(true);
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

                return inflater.inflate(R.layout.topics, null);
        }

        @Override
        public void onActivityCreated(Bundle savedInstanceState) {
                super.onActivityCreated(savedInstanceState);

                final ShackGestureListener listener = Helper.setGestureEnabledContentView(R.layout.topics, getActivity());
                if (listener != null) {
                        listener.addListener(this);
                }

                if (savedInstanceState == null) {
                        // get the list of topics
                        GetChattyAsyncTask chatty = new GetChattyAsyncTask(getActivity());
                        chatty.execute();
                }

                ListView lv = getListView();
                lv.setOnScrollListener(new OnScrollListener() {

                        @Override
                        public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {

                                // start loading the next page
                                if (threadLoaded && firstVisibleItem + visibleItemCount >= totalItemCount && currentPage + 1 <= storyPages) {

                                        // get the list of topics
                                        currentPage++;
                                        GetChattyAsyncTask chatty = new GetChattyAsyncTask(getActivity());
                                        chatty.execute();

                                }
                        }

                        @Override
                        public void onScrollStateChanged(AbsListView view, int scrollState) {

                        }

                });

        }

    class GetChattyAsyncTask extends AsyncTask<String, Void, Void> {
                protected ProgressDialog dialog;
                protected Context c;

                public GetChattyAsyncTask(Context context) {
                        this.c = context;
                }

                @Override
                protected Void doInBackground(String... params) {

                        threadLoaded = false;

                        try {
                                final SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(c);
                                final String feedURL = prefs.getString("shackFeedURL", getString(R.string.default_api));
                                final URL url;

                                if (loadStoryID != null) {
                                        if (currentPage > 1)
                                                url = new URL(feedURL + "/" + loadStoryID + "." + currentPage.toString() + ".xml");
                                        else
                                                url = new URL(feedURL + "/" + loadStoryID + ".xml");
                                }
                                else {
                                        if (currentPage > 1)
                                                url = new URL(feedURL + "/" + storyID + "." + currentPage.toString() + ".xml");
                                        else
                                                url = new URL(feedURL + "/index.xml");
                                }

                                // Get a SAXParser from the SAXPArserFactory.
                                final SAXParserFactory spf = SAXParserFactory.newInstance();
                                final SAXParser sp = spf.newSAXParser();

                                // Get the XMLReader of the SAXParser we created.
                                final XMLReader xr = sp.getXMLReader();
                                // Create a new ContentHandler and apply it to the XML-Reader
                                SaxHandlerTopicView saxHandler = new SaxHandlerTopicView(c, "topic");

                                xr.setContentHandler(saxHandler);

                                // Parse the xml-data from our URL.
                                xr.parse(new InputSource(HttpHelper.HttpRequestWithGzip(url.toString(), c)));

                                // Our ExampleHandler now provides the parsed data to us.
                                if (posts == null) {
                                        posts = saxHandler.GetParsedPosts();
                                }
                                else {
                                        ArrayList<ShackPost> newPosts = saxHandler.GetParsedPosts();
                                        newPosts.removeAll(posts);
                                        posts.addAll(posts.size(), newPosts);

                                }

                                storyID = saxHandler.getStoryID();

                                storyPages = saxHandler.getStoryPageCount();

                                if (storyPages == 0) // XML returns a 0 for stories with only
                                                                                // one page
                                        storyPages = 1;

                        }
                        catch (Exception ex) {
                                // TODO: implement error handling

                        }

                        return null;
                }

                @Override
                protected void onPreExecute() {
                        super.onPreExecute();

                        if (currentPage == 1)
                                dialog = ProgressDialog.show(getActivity(), null, "Loading Chatty", true, true);
                        else
                                SetLoaderVisibility(View.VISIBLE);
                }

                @Override
                protected void onPostExecute(Void result) {
                        super.onPostExecute(result);

                        ShowData();

                        SetLoaderVisibility(View.GONE);

                        try {
                                dialog.dismiss();
                        }
                        catch (Exception e) {
                        }

                }

        }

     private void ShowData() {

                if (posts != null) {
                        Hashtable<String, String> tempHash = null;

                        final SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(getActivity());
                        final String login = prefs.getString("shackLogin", "");
                        final int fontSize = Integer.parseInt(prefs.getString("fontSize", "12"));

                        try {
                                postCounts = GetPostCache();
                        }
                        catch (Exception ex) {

                        }
                        if (postCounts != null)
                                tempHash = new Hashtable<String, String>(postCounts);

                        if (tva == null) {
                                tva = new AdapterLimerifficTopic(getActivity(), R.layout.lime_topic_row, posts, login, fontSize, tempHash);
                                setListAdapter(tva);
                        }
                        else {
                                tva.SetPosts(posts);
                                tva.notifyDataSetChanged();
                        }

                        final ListView lv = getListView();
                        lv.setOnCreateContextMenuListener(new OnCreateContextMenuListener() {
                                @Override
                                public void onCreateContextMenu(ContextMenu menu, View v, ContextMenu.ContextMenuInfo menuInfo) {
                                        menu.setHeaderTitle("Options");
                                        menu.add(0, 1, 0, "Copy Post Url to Clipboard");
                                        menu.add(0, 2, 0, "Watch Thread");
                                        menu.add(0, 3, 0, "Thread Expires In?");
                                        menu.add(0, 4, 0, "Shacker's Chatty Profile");
                                }
                        });

                        // update the reply counts for the listing of topics
                        try {
                                UpdatePostCache();

                        }
                        catch (Exception e) {

                        }

                }
                else {
                        if (errorText.length() > 0) {

                                try {
                                        new AlertDialog.Builder(getActivity()).setTitle("Error").setPositiveButton("OK", null).setMessage(errorText).show();
                                }
                                catch (Exception ex) {
                                        // could not create a alert for the error for one reason
                                        // or another
                                        Log.e("ShackDroid", "Unable to create error alert ActivityTopicView:468");
                                }
                        }
                }
                threadLoaded = true;
        }

} 
```

这是我的片段活动：

```
 public class FragmentActivityTopic extends FragmentActivity {
        @Override
        protected void onCreate(Bundle arg) {
                // TODO Auto-generated method stub
                super.onCreate(arg);

                setContentView(R.layout.mixed);
        }
} 
```

这是我正在使用的适配器，如上所述 getView 没有被调用：

```
public class AdapterLimerifficTopic extends BaseAdapter {

        // private Context context;
        private List<ShackPost> topicList;
        private final int rowResouceID;
        private final String shackLogin;
        private final Typeface face;
        private final int fontSize;
        private final Hashtable<String, String> postCache;
        private final String showAuthor;
        private final Resources r;
        private int totalNewPosts = 0;

        LayoutInflater inflate;// = LayoutInflater.from(context);

        public AdapterLimerifficTopic(Context context, int rowResouceID, List<ShackPost> topicList, String shackLogin, int fontSize, Hashtable<String, String> postCache) {
                this.topicList = topicList;
                this.rowResouceID = rowResouceID;
                this.shackLogin = shackLogin;
                this.fontSize = fontSize;
                this.postCache = postCache;
                this.r = context.getResources();

                face = Typeface.createFromAsset(context.getAssets(), "fonts/arial.ttf");

                final SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(context);
                showAuthor = prefs.getString("showAuthor", "count");

                inflate = LayoutInflater.from(context);
        }
        public void SetPosts(List<ShackPost> posts)
        {
                topicList = posts;
        }
        @Override
        public int getCount() {
                return topicList.size();
        }

        @Override
        public Object getItem(int position) {
                return topicList.get(position);
        }

        @Override
        public long getItemId(int position) {
                // return position;
                final ShackPost post = topicList.get(position);
                return Long.parseLong(post.getPostID());
        }

        static class ViewHolder {
                TextView posterName;
                TextView datePosted;
                TextView replyCount;
                TextView newPosts;
                TextView postText;
                TextView viewCat;
                RelativeLayout topicRow;
                ImageView postTimer;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

                // TextView tmp;
                // final View v;
                ViewHolder holder;
                final ShackPost post = topicList.get(position);

                if (convertView == null) {
                        convertView = inflate.inflate(rowResouceID, parent, false);
                        holder = new ViewHolder();
                        holder.posterName = (TextView) convertView.findViewById(R.id.TextViewLimeAuthor);
                        holder.datePosted = (TextView) convertView.findViewById(R.id.TextViewLimePostDate);
                        holder.replyCount = (TextView) convertView.findViewById(R.id.TextViewLimePosts);
                        holder.newPosts = (TextView) convertView.findViewById(R.id.TextViewLimeNewPosts);
                        holder.postText = (TextView) convertView.findViewById(R.id.TextViewLimePostText);
                        holder.viewCat = (TextView) convertView.findViewById(R.id.TextViewLimeModTag);
//                      holder.topicRow = (RelativeLayout) convertView.findViewById(R.id.TopicRow);
//                      holder.postTimer = (ImageView) convertView.findViewById(R.id.ImageViewTopicTimer);

//                      holder.posterName.setTypeface(face);
//                      holder.datePosted.setTypeface(face);
//                      holder.replyCount.setTypeface(face);
//                      holder.newPosts.setTypeface(face);
                        holder.postText.setTextSize(TypedValue.COMPLEX_UNIT_SP, fontSize);
//                      holder.postText.setTypeface(face);

                        convertView.setTag(holder);
                }
                else {
                        holder = (ViewHolder) convertView.getTag();
                }

//              holder.postTimer.setImageResource(Helper.GetTimeLeftDrawable(post.getPostDate()));
//
                holder.posterName.setText(post.getPosterName());
//
//              if (shackLogin.equalsIgnoreCase(post.getPosterName()))
//                      holder.posterName.setTextColor(Color.parseColor("#00BFF3"));
//              else
//                      holder.posterName.setTextColor(Color.parseColor("#ffba00"));
//
                holder.datePosted.setText(Helper.FormatShackDateToTimePassed(post.getPostDate()));

                holder.replyCount.setText(post.getReplyCount());
//
//              if (showAuthor.equalsIgnoreCase("count") && post.getIsAuthorInThread())
//                      holder.replyCount.setTextColor(Color.parseColor("#0099CC"));
//              else
//                      holder.replyCount.setTextColor(Color.parseColor("#FFFFFF"));
// clipped code
                holder.postText.setText(preview);

//              if (showAuthor.equalsIgnoreCase("topic") && post.getIsAuthorInThread()) {
//                      final Drawable d = r.getDrawable(R.drawable.background_gradient_blue);
//                      holder.topicRow.setBackgroundDrawable(d);
//              }
//              else
//                      holder.topicRow.setBackgroundDrawable(null);

                // TODO: clean this up a little / also replicated in ShackDroidThread ick
                final String postCat = post.getPostCategory();
                holder.viewCat.setVisibility(View.VISIBLE);

                if (postCat.equals("offtopic"))  {
                        holder.viewCat.setText("offtopic");
                        holder.viewCat.setBackgroundColor(Color.parseColor("#444444"));
                }
                else if (postCat.equals("nws")) {
                        holder.viewCat.setText("nws");
                        holder.viewCat.setBackgroundColor(Color.parseColor("#CC0000"));
                }
                else if (postCat.equals("political")) {
                        holder.viewCat.setText("political");
                        holder.viewCat.setBackgroundColor(Color.parseColor("#FF8800"));
                }
                else if (postCat.equals("stupid")) {
                        holder.viewCat.setText("stupid");
                        holder.viewCat.setBackgroundColor(Color.parseColor("#669900"));
                }
                else if (postCat.equals("informative")) {
                        holder.viewCat.setText("interesting");
                        holder.viewCat.setBackgroundColor(Color.parseColor("#0099CC"));
                }
                else 
                        holder.viewCat.setVisibility(View.GONE);                

                return convertView;
        }

        public int getTotalNewPosts() {
                return totalNewPosts;
        }

} 
```

以及相关的 XML：

mixed.xml（这是片段的布局，目前只有一个）

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" 
    android:id="@+id/LinearLayoutMixed">

    <fragment
        android:id="@+id/MixedThreads"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        class="com.stonedonkey.shackdroid.FragmentTopicView"
        >
    </fragment>

</LinearLayout> 
```

Topics.xml（这包含 ListView 以及滑动托盘和其他一些东西。

```
 <?xml version="1.0" encoding="utf-8"?>
        <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"  >

            <ListView
                android:id="@android:id/list"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_above="@+id/TopicLoader"
                android:divider="#333333"
                android:dividerHeight="1dip"
                android:textColor="#FFFFFF"

                 />

            <RelativeLayout
                android:id="@+id/TopicLoader"
                android:layout_width="fill_parent"
                android:layout_height="35dip"
                android:layout_alignParentBottom="true"
                android:gravity="center_horizontal"
                android:visibility="gone"
                android:layout_marginTop="5dip" >

                <TextView
                    android:id="@+id/TextViewTopicLoaderText"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:focusable="false"
                    android:focusableInTouchMode="false"
                    android:text="Loading" 

                    >
                </TextView>

                <ImageView
                    android:id="@+id/ImageViewTopicLoader"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_toRightOf="@+id/TextViewTopicLoaderText"
                    android:src="@drawable/ic_action_refresh"
                    android:layout_alignBottom="@+id/TextViewTopicLoaderText"
                     />
            </RelativeLayout>

            <SlidingDrawer
                android:id="@+id/SlidingDrawer01"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_below="@+id/TopicLoader"
                android:animateOnClick="true"
                android:content="@+id/bookMarkParent"
                android:handle="@+id/TextViewTrayHandle"
                android:orientation="vertical"
                android:paddingTop="200dip"
                android:visibility="gone" >

                <TextView
                    android:id="@+id/TextViewTrayHandle"
                    android:layout_width="fill_parent"
                    android:layout_height="35dip"
                    android:background="@drawable/darkgrey_gradient"
                    android:focusable="false"
                    android:focusableInTouchMode="false"
                    android:gravity="center_vertical" >
                </TextView>

                <RelativeLayout
                    android:id="@id/bookMarkParent"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >

                    <ListView
                        android:id="@+id/ListViewWatchedThreads"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:divider="#333333"
                        android:dividerHeight="1dip"
                        android:textColor="#FFFFFF" >
                    </ListView>
                </RelativeLayout>
            </SlidingDrawer>

        </RelativeLayout> 
```

最后是lime_topic_row，这是我在上面布局中的ListView的自定义行布局：

```
<?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
        android:background="#FF0000" >

        <TextView
            android:id="@+id/TextViewLimeModTag"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="#FF0000"
            android:layout_alignParentLeft="true"
            android:layout_marginLeft="10dip"
            android:textColor="#000000"
            android:padding="2dip"
            android:textSize="10dip"
            />    
        <TextView
            android:id="@+id/TextViewLimePostText"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:minHeight="20dip"
            android:padding="10dip"
            android:layout_below="@+id/TextViewLimeModTag"
            android:textColor="#FFFFFF" />

        <TextView
            android:id="@+id/TextViewLimeAuthor"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/TextViewLimePostText"
            android:paddingBottom="10dip"
            android:paddingLeft="10dip"
            android:textColor="#0099CC" />

        <TextView
            android:id="@+id/TextViewPosted"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/TextViewLimePostText"
            android:layout_toRightOf="@+id/TextViewLimeAuthor"
            android:paddingBottom="10dip"
            android:text=" posted " />

        <TextView
            android:id="@+id/TextViewLimePostDate"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/TextViewLimePostText"
            android:layout_toRightOf="@+id/TextViewPosted"
            android:paddingBottom="10dip"
            android:paddingRight="10dip"
            android:textColor="#FF8800" />

        <TextView
            android:id="@+id/TextViewLimePosts"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@+id/TextViewLimePostDate"
            android:layout_marginRight="3dip"
            android:layout_below="@+id/TextViewLimePostText"
            android:layout_marginBottom="15dip"
            android:layout_toLeftOf="@+id/TextViewLimeNewPosts"
            android:background="#BBBBBB"
            android:padding="3dip"
            android:minWidth="25dip"
            android:gravity="center"
            android:textColor="#000000" />

        <TextView
            android:id="@+id/TextViewLimeNewPosts"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@+id/TextViewLimePostDate"
            android:layout_below="@+id/TextViewLimePostText"
            android:layout_marginBottom="15dip"
            android:layout_marginRight="10dip"
            android:background="#669900"
            android:padding="3dip"
            android:minWidth="25dip"
            android:gravity="center"
            android:layout_alignParentRight="true"
            android:textColor="#000000" />

    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:29:20.417

我想我找到了问题所在。出现此问题的原因是您在方法`ShackGestureListener`开始时设置了以下内容：`onActivityCreated``FragmentTopicView`

```
final ShackGestureListener listener = Helper.setGestureEnabledContentView(R.layout.topics, getActivity());
if (listener != null) {
    listener.addListener(this);
} 
```

在该`setGestureEnabledContentView()`方法中，您检查用户是否在首选项中启用了手势，或者 android 版本是否大于 3。无论哪种方式，`true`或者您**再次**`false`设置内容视图（使用 的布局）。不幸的是，再次设置内容视图将覆盖包含 数据的当前布局（填充没有问题）。当您运行它们以获取数据时，最后您将数据设置为正确的（由你盖这个。`FragmentActivityTopic` **`FragmentTopicView``ListView``ListView``AsyncTasks``ListView``getListView``getListView``ListView``onCreateView``setGestureEnabledContentView``ListView`**

 **如果您简单地注释掉（或删除）为`Helper`和`HelperAPI4`类中的活动设置内容视图的行，则此行为很容易看出。另一种查看您`ListView`是否被覆盖的方法是，例如使用和使用（我已经在选择您的一个菜单项时完成此操作，因此我可以控制何时更换适配器*）*`ListView`：*`getListView``getActivity().findViewById(android.R.id.list)`*

 *```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    Intent intent;
    switch (item.getItemId())
    {
    case R.id.topic_menu_newpost: // Launch post form
//this doesn't work as the getListView will return a reference to the old ListView
ListView lv = getListView();
lv.setAdapter(tva);
// this will work as you get a reference to the new ListView on top
ListView lv = (ListView) getActivity().findViewById(android.R.id.list);
lv.setAdapter(tva); 
```

我不知道推荐什么作为解决方案，因为我不太明白你在做什么，但我怀疑它需要再次为活动设置内容视图（你应该从这个开始工作）。***

# ios - 使用MKAnnotationView centerOffset后定位奇怪

> ID：11571857
> 
> 赞同：0
> 
> 时间：2012-07-20T02:01:49.517
> 
> 标签：ios

在 iOS 5.0 中，我首先在地图上放置注释，并将中心偏移设置为 CGPointMake(0,-annotationView.frame.size.height/2); 在为 mapView:viewForAnnotation: 方法中的注释设置自定义图像之后...之后，引脚仍然出现在原始位置，这将是未应用中心偏移的情况。

但是，当我捏​​合或缩放地图时，注释会跳到正确的位置，就像设置 centerOffset 的情况一样，然后行为正确..

这可能是什么原因和解决方案？

任何帮助将非常感激。

莫名其妙！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T05:25:06.330

我终于能够通过`MKAnnotationView`在`initWithAnnotation:reuseIdentifier:`构造方法中继承and来解决它，同步获取annotationView图像然后设置`centerOffset`为`CGPointMake(0.0, -img.size.height/2);`

如果注释太多，这将减慢注释的显示速度，因此需要以不同的方式处理。

# css - 如何使用 Excel VBA 单击 Web CSS 按钮？

> ID：11571863
> 
> 赞同：0
> 
> 时间：2012-07-20T02:02:20.277
> 
> 标签：css, excel, vba

我正在使用 Excel VBA 创建一个宏，它将使用 Excel 电子表格中的信息将条目提交到在线数据库中。在这个输入过程中，宏需要点击一个 CSS 按钮。它不是表单按钮，没有输入类型，没有名称，没有 id，除了背景图像之外没有源图像。我认为我唯一的希望是单击基于 div 类的按钮。任何人都可以帮忙吗？按钮在这里：

```
<div class="v-captiontext">
    By Ankit
</div>
<td class="v-tabsheet-tabitemcell v-tabsheet-tabitemcell-selected" style="">
    <div class="v-         tabsheet-tabitem v-tabsheet-tabitem-selected">
        <div class="v-caption" style="width: 39px;">
            <div class="v-captiontext">
                By LOT</div>
            <div class="v-caption-clearelem">
            </div>
        </div>
    </div>
</td> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-20T07:46:32.890

感谢 Remou 在此线程上的回答：[使用 VBA 代码单击网页上的按钮](https://stackoverflow.com/questions/2373268/use-vba-code-to-click-on-a-button-on-webpage)

这是您问题的第一个问题，您可以尝试以下操作：

```
Set tags = wb.Document.GetElementsByTagname("div")

For Each tagx In tags
    If tagx.class = "v-caption-clearelem" Then
        tagx.Click
    End If
Next 
```

然而，我从未尝试`Click`在 div 上使用该方法。

# php - 如何知道 symfony2 自定义用户提供者中的“提供者”列

> ID：11571865
> 
> 赞同：0
> 
> 时间：2012-07-20T02:02:37.263
> 
> 标签：php, symfony, symfony-security

我无法找到 Symfony 安全提供者的其他选项

例如

此链接[http://symfony.com/doc/current/cookbook/security/custom_provider.html](http://symfony.com/doc/current/cookbook/security/custom_provider.html)

说

```
security:
    providers:
        webservice:
            id: webservice_user_provider 
```

现在我知道 id 是实现的类的服务 id`UserProviderInterface`

但是`webservice`这里是什么，我怎么能得到它？

这段代码和上面的代码有什么区别

```
providers:
        administrators:
            entity: { class: AcmeUserBundle:User} 
```

我很困惑是否需要在那里使用用户作为实体或在那里`UserManager`实现`UserProviderInterface`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T05:01:43.500

你错过了[一步](http://symfony.com/doc/current/cookbook/security/custom_provider.html#create-a-service-for-the-user-provider)。第二个例子是`EntityUserProvider`.

# java - java过滤器类doFilter（）没有被调用

> ID：11571867
> 
> 赞同：1
> 
> 时间：2012-07-20T02:02:50.447
> 
> 标签：java, servlets, servlet-filters, web.xml

**您好，我创建了一个过滤器类并配置 web.xml，如下所示：**

```
<filter>
    <filter-name>LoginFilter</filter-name>
    <filter-class>my.web.auth.LoginFilter</filter-class>
    <init-param>
        <param-name>test-param</param-name>
        <param-value>This param is for testing</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>LoginFilter</filter-name>
    <url-pattern>/html/test/*</url-pattern>
</filter-mapping> 
```

**当我访问 URL http://{myJBoss}/html/test/index.htm 时，会调用 LoginFilter 的 init() 但不会调用 doFilter()**

这是我的过滤器类的摘录：

```
public void init(FilterConfig config) throws ServletException {
    log.debug("[201207bb] init");  //******This line can be seen in log file
    this.config = config;
    String testParam = config.getInitParameter("test-param");
    log.debug("test-param="+testParam);  //******* This is output correctly too
}

public void doFilter(ServletRequest req, ServletResponse res,
        FilterChain chain) throws IOException, ServletException {
    log.debug("[201207bb] doFilter");  //*****This line didn't appear in log file

    HttpServletRequest request = (HttpServletRequest) req;

    //Get the IP address of client machine.
    String ipAddress = request.getRemoteAddr();

    //Log the IP address and current timestamp.
    log.debug("IP "+ipAddress + ", Time "  + new Date().toString());
    chain.doFilter(req, res);
} 
```

**有谁知道为什么会这样？我也试过jsp，结果一样。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:26:10.717

问题解决了。url-pattern 设置不正确。调用 init() 并不意味着正确设置了 url 模式。

# javascript - IE8 和 9 不支持 DOM。找不到答案

> ID：11571868
> 
> 赞同：1
> 
> 时间：2012-07-20T02:03:05.003
> 
> 标签：javascript, internet-explorer, dom

我正在运行一个 DOM 脚本，它在 Chrome 和 Firefox 中完美运行，但不是 IE8 或 9。我在 IE 中得到的错误消息是

*   `document.getElementByld(..)`为空或不是对象

*   对象不支持此属性或方法

*   无法设置属性“innerHTML”的值：对象为空或未定义（URL：http: [//twitter.com/javascripts/blogger.js](http://twitter.com/javascripts/blogger.js)）

代码：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
<script>
    // DOM Ready    
    $(function() {

        $.getJSON('http://twitter.com/status/user_timeline/LaunchSeven.json?count=2&callback=?', function(data){
            $.each(data, function(index, item){
                $('#twitter').append('<div class="tweet"><p>' + item.text.linkify() + '</p><p><strong>' + relative_time(item.created_at) + '</strong></p></div>');
            });

        });

        function relative_time(time_value) {
          var values = time_value.split(" ");
          time_value = values[1] + " " + values[2] + ", " + values[5] + " " + values[3];
          var parsed_date = Date.parse(time_value);
          var relative_to = (arguments.length > 1) ? arguments[1] : new Date();
          var delta = parseInt((relative_to.getTime() - parsed_date) / 1000);
          delta = delta + (relative_to.getTimezoneOffset() * 60);

          var r = '';
          if (delta < 60) {
            r = 'a minute ago';
          } else if(delta < 120) {
            r = 'couple of minutes ago';
          } else if(delta < (45*60)) {
            r = (parseInt(delta / 60)).toString() + ' minutes ago';
          } else if(delta < (90*60)) {
            r = 'an hour ago';
          } else if(delta < (24*60*60)) {
            r = '' + (parseInt(delta / 3600)).toString() + ' hours ago';
          } else if(delta < (48*60*60)) {
            r = '1 day ago';
          } else {
            r = (parseInt(delta / 86400)).toString() + ' days ago';
          }

          return r;
        }

        String.prototype.linkify = function() {
            return this.replace(/[A-Za-z]+:\/\/[A-Za-z0-9-_]+\.[A-Za-z0-9-_:%&\?\/.=]+/, function(m) {
                return m.link(m);
            });
        };   

    });

</script> 
```

* * *

先感谢您，

亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T02:25:39.750

您的页面需要有一个 ID 为`twitter_update_list`...

```
document.getElementById('twitter_update_list').innerHTML = statusHTML.join(''); 
```

不能在没有看到更多代码的情况下说出为什么它在 IE 中不可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T02:30:04.823

第二个论点。这是一个函数定义，而不是一个被触发的函数。但是如果 m.link(m) 本身不能工作，那么正确执行该函数也不会工作。

```
 String.prototype.linkify = function() {
        return this.replace(/[A-Za-z]+:\/\/[A-Za-z0-9-_]+\.[A-Za-z0-9-_:%&\?\/.=]+/, function(m) {
            return m.link(m);
        });
    }; 
```

所以只需制作第二个arg `m.link(m)`（没有半）

我不确定这是否解释了您的 document.getElementById 问题。但它可能会在某处导致错误级联。

此外，您应该真正在其他所有内容之前定义该字符串原型。我相信只有命名函数会提升，例如 function someName(){.. vs. var someName = function(){...

# d3.js - D3 交叉过滤器尺寸的离散过滤器

> ID：11571869
> 
> 赞同：5
> 
> 时间：2012-07-20T02:03:06.630
> 
> 标签：d3.js, crossfilter

有没有办法在具有一个或多个值的属性上创建维度？例如

```
{quantity: 2, total: 190, tip: 100, items: ["apple","sandwich"],
{quantity: 2, total: 190, tip: 100, items: ["ice-cream"]},
{quantity: 1, total: 300, tip: 200, items: ["apple", "coffee"]} 
```

我的目标是创建一个交叉过滤器，该过滤器可以过滤掉具有序数值的维度中的条目。有没有一种方法可以让我写一个过滤器/维度，让我说“我想要所有包含‘苹果’项目的条目”？

我能想到的唯一解决方法是为每个项目创建一个维度。像这样：

```
var paymentsByApple = payments.dimension(function(d) { return $.inArray("apple", d.items); });
var paymentsByCoffee = payments.dimension(function(d) { return $.inArray("coffee", d.items); });
// and one for every possible item 
```

主要问题是我不想枚举和硬编码所有不同的对象。此外，我最终可能会有很多不同的项目。有没有更聪明的方法来做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T07:53:46.277

在这里面临同样的问题，并且没有看到使用当前 lib 功能的简单解决方法，请参阅[this](https://github.com/square/crossfilter/issues/5)。

更改数据模型以适应 Pablo Navaro 提出的单值维度的问题在于，您需要确保为其他维度计算的统计数据不会失真（重复计算、更正方法……）

希望看到一个过滤器在多值维度上工作，或者有更多时间深入研究代码库以提出一个......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T14:25:15.187

改变你的数据模型怎么样？我认为使用：

```
[{id: 1, quantity: 1, total: 100, tip:  50, item: "apple"},
 {id: 1, quantity: 1, total:  90, tip:  50, item: "sandwich"},
 {id: 2, quantity: 1, total: 190, tip: 100, item: "ice-cream"},
 {id: 3, quantity: 1, total: 300, tip: 100, item: "apple"}, 
 {id: 3, quantity: 1, total: 300, tip: 100, item: "coffee"}] 
```

[也许您可以使用reduceSum](https://github.com/square/crossfilter/wiki/API-Reference#wiki-group_reduceSum)按 id 计算总数

# ffmpeg - 使用 ffmpeg libfaac 进行转码可减少音频持续时间

> ID：11571879
> 
> 赞同：0
> 
> 时间：2012-07-20T02:06:20.387
> 
> 标签：ffmpeg, transcode, libfaac

我必须转码一个 mpegts 文件：input.ts(H.264 and AAC) 所以我使用以下命令行：
`ffmpeg -y -i input.ts -acodec libfaac -vcodec copy out.ts`
但是我发现 output.ts 的音频持续时间比 input.ts 的持续时间短！

如果我进行以下迭代，输出的音频会越来越短。

```
ffmpeg -y -i out.ts -acodec libfaac -vcodec copy out-iter1.ts
ffmpeg -y -i out-iter1.ts -acodec libfaac -vcodec copy out-iter2.ts
ffmpeg -y -i out-iter2.ts -acodec libfaac -vcodec copy out-iter3.ts
ffmpeg -y -i out-iter3.ts -acodec libfaac -vcodec copy out-iter4.ts
ffmpeg -y -i out-iter4.ts -acodec libfaac -vcodec copy out-iter5.ts 
```

我的 ffmpeg 的版本是 0.6.6。libfaac 的版本是 1.28。

input.ts 的音频持续时间为 10.432 秒。out-iter5.ts 的音频时长为 10.56 秒

而且我还尝试了 0.11 版本的 ffmpeg。它使音频比原始输入更长。

所以我的**问题**是：**如何确保输出的音频持续时间与输入的音频相同。由于 libfaac 会使音频变短，我该如何弥补呢？** （由于某种原因，我不能直接使用 -acodec 复制。）有什么建议吗？

# asp.net-mvc - 架构：避免在 MVC/实体框架项目中重复模型/模型视图代码

> ID：11571883
> 
> 赞同：4
> 
> 时间：2012-07-20T02:06:38.040
> 
> 标签：asp.net-mvc

我是整个 ASP 世界的新手，我通过构建 C# MVC3/EF4 项目开始涉足。我发现很难避免在我的模型和视图模型中复制一堆代码。考虑一个对象 Foo。我需要用 Foo 做以下事情：

1.  在我的数据库中存储 Foo 类型的记录。
2.  允许用户查找单个 Foo 的记录（将 Foo 的实例传递给视图）。
3.  允许用户创建 Foo 的新实例（将 Foo 的实例传递给表单）。

假设我也有一个类型 Bar。Bar 包含 Foos 的列表。这里有两个要求：

1.  用户可以查看 Bar 列表。
2.  当用户单击特定 Bar 时，它会显示其所有 Foos。

所以，我的基本对象的草图如下所示：

```
class Foo
{
    string FooName;
    int Id;
}

class Bar
{
    List<Foo> FooList;
    int Id;
    string Baz;
} 
```

但是当我开始思考不同的观点时，它开始变得混乱：

*   视图不应该对任何数据成员有任何写访问权。
*   有一个视图采用 Bars 列表但不关心 Bar.FooList。假设我也想做好资源管理并尽快关闭 DbContext（即在对象在内存中之后但在渲染视图之前）。如果我只是将 Bars 列表传递给它，而设计器尝试错误地访问 FooList，我们将收到运行时错误。呸！

好的，我只是为每个具有只读数据成员的视图创建一个不同的 ViewModel，没问题。

*   但是数据库模型和表单模型都需要附加 DataAnnotations，说明需要哪些字段、字符串的最大长度等。如果我创建单独的表单模型和数据库模型，那么我最终不得不复制所有这些注释。呸！

所以，这就是我的架构困境：我想要简洁的视图模型，将视图限制为仅读取它们应该访问的数据。我想避免到处重复数据注释。而且我希望能够尽快积极地释放我的数据库资源。实现我的目标的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:42:08.303

我的建议是不要在 EF 实体类中使用数据注释。相反，请尝试 fluent API。它将持久性问题排除在模型类本身之外。您甚至可以在完全不同的库中定义模型构建器。

至于具有重复属性，属性很便宜：

```
public string MyProp { get; set; } 
```

代码不多，您可能会开始看到，视图模型和实体不必总是彼此完全重复。例如，如果您想将 [HiddenInput] 应用于视图模型，以使其呈现为 ，该`<input type="hidden" />`怎么办？您会将其应用于实体吗？为什么？它属于视图模型（命名空间甚至是 System.Web.Mvc，而不是 System.ComponentModel.DataAnnotations）。

至于在验证期间重复错误消息（如果您分别验证 MVC 和 EF 层），您可以使用 resx 资源。

至于释放数据库资源，让 EF 管理它。我发现最好为每个 HttpContext 保留一个 DbContext 实例。您可以使用工厂、OnActionExecuting 操作过滤器、Application_BeginRequest、IoC 容器或其他任何方式打开它。然后在 OnResultExecued、Application_EndRequest 等期间处理上下文。让事情变得简单。

# postgresql - 奇怪的数据仍然存在

> ID：11571889
> 
> 赞同：1
> 
> 时间：2012-07-20T02:07:38.320
> 
> 标签：postgresql

有没有人听说过或经历过以下现象？

在 Windows 上使用 postgresql 9.0.5

= 表结构 =

[父母] - [孩子] - [孙子女]

我发现 [child] 表上奇怪地保留了一条记录。该记录存在违反外键的限制。

*   这些表存储我的应用程序的事务数据
*   以上所有表格都有数字 PRIMARY KEY
*   所有这些表都有 FOREIGN KEY 限制（在父子、孙子之间）
*   我的应用程序随着交易进度更新每条记录状态
*   一旦所有状态更改为“normal_end”，我的应用程序就会将此记录复制到存档表（相同的结构，相同的限制）。
*   然后，在完成将它们复制到存档表时删除这些记录。

*   [child] 表上剩余记录的状态不是“normal_end”而是“processing”。但存档表中复制数据（相同 ID）的状态为“normal_end”。

*   pg_log 没有报告错误

我觉得很奇怪......我怀疑删除的数据可能会恢复活动！？删除的数据是否会意外激活？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T05:41:35.257

永远不应该有违反外键约束的数据（在具有延迟约束的事务期间除外）。

提交事务后，已删除的行应保持删除状态。这是 ACID 的要求之一。然而，PostgreSQL 的正确工作依赖于您的操作系统和硬件的正确运行。当 postgresql fsyncs 文件时，它应该真正写入磁盘或非易失性缓存。不幸的是，有时磁盘或控制器会告诉系统写入已经完成，而它还没有完成并且仍在易失性缓存中。如果您有一个带 RAM 但没有电池的 RAID 控制器，请确保控制器缓存设置为直写。

就我个人而言，我曾经见过 PostgreSQL 有一次不正确的数据，它有一个重复的行（相同的主键），这是在 windows xp 机器上崩溃之后（这很可能是 9.0.x）。Windows XP 机器运行 postgresql 不是很可靠。他们经常给出奇怪的网络错误。

# android - ICS Emulator 不会创建日历帐户

> ID：11571892
> 
> 赞同：2
> 
> 时间：2012-07-20T02:08:01.693
> 
> 标签：android, calendar, emulation, android-4.0-ice-cream-sandwich, account

请帮忙。我绝对需要能够使用 SDK 模拟器在我的应用程序中测试 Calendar.contract 提供程序。购买 400 美元的硬件设备只是为了进行测试并不是一个真正的选择。

我看到帖子提醒我们需要针对 Google API 平台，我们已经做到了。接下来，我看到了一个解决方法，建议我们通过指定 m.google.com 服务器并单击“接受所有 SSL”来创建一个 google 帐户作为交换帐户。不幸的是，这会产生以下错误：

***您输入了错误的服务器地址或服务器需要电子邮件不支持的协议版本。***

我们创建了一个基本的 Google 帐户。但是，模拟器仍然说我们必须至少创建一个日历帐户，并强制我们创建 Echange 帐户。根据模拟器，我们作为 Google 帐户创建的帐户没有与之关联的日历，即使我可以转到 Google 日历，访问该帐户并将项目添加到日历中。

任何人都可以提出解决方案吗？

谢谢，

# ember.js - 您不能在 Ember.Application 中多次使用相同的根元素（主体）

> ID：11571896
> 
> 赞同：10
> 
> 时间：2012-07-20T02:08:36.000
> 
> 标签：ember.js

我收到 ember 0.9.8.1 的错误

```
You cannot use the same root element (body) multiple times in an Ember.Application 
```

知道这是怎么回事吗？关于我应该在哪里调查的一些建议？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-20T05:32:25.210

您不能将多个 Ember 应用程序绑定到同一个 DOM 元素，因为这会与 DOM 维护发生冲突。

不过，您可以在同一页面中实例化多个 Ember 应用程序。尝试这样的事情：

```
App1 = Ember.Application.create({
    rootElement: '#app1'
});

App1.ApplicationController = Ember.Controller.extend();
App1.ApplicationView = Ember.View.extend({
    templateName: 'app1-view'
})

App1.Router = Ember.Router.extend({
    root: Ember.Route.extend({
        index: Ember.Route.extend({
            path: '/'
        })
    })
});

App2 = Ember.Application.create({
    rootElement: '#app2'
});

App2.ApplicationController = Ember.Controller.extend();
App2.ApplicationView = Ember.View.extend({
    templateName: 'app2-view'
})

App2.Router = Ember.Router.extend({
    root: Ember.Route.extend({
        index: Ember.Route.extend({
            path: '/'
        })
    })
}); 
```

在这里，我们使用`rootElement`属性显式设置应用程序将绑定到的 DOM 元素。

默认情况下，Ember 应用程序绑定到`body`，所以如果你有两次，它们会发生冲突......

示例[@http://jsfiddle.net/MikeAski/FMV8u/13/](http://jsfiddle.net/MikeAski/FMV8u/13/)

# ruby-on-rails-3 - 访问 has_many 关系的父级

> ID：11571897
> 
> 赞同：2
> 
> 时间：2012-07-20T02:08:47.167
> 
> 标签：ruby-on-rails-3, mongoid

有没有办法在 Mongoid 3 中访问多态模型的父级？我有这种关系

```
class Project
  ...
  field "comments_count", :type => Integer, :default => 0
  has_many :comments, :as => :commentable
  ...
end

class Comment
  ...
  field "status"
  belongs_to :commentable, :polymorphic => true

  before_validation :init_status, :on => :create
  after_create :increase_count

  def inactivate
    self.status = "inactive"
    decrease_count
  end

  private
  def init_status
    self.status = 'active'
  end

  def increase_count()
    @commentable.inc(:comments_count, 1)
  end

  def decrease_count()
    @commentable.inc(:comments_count, -1)
  end
  ...
end 
```

我希望能够`comments_count`在评论被停用时更新父关系中的内容，因为`count()`对孩子进行操作非常昂贵（而且我需要在应用程序中做很多事情）。我有`increase_count`工作，但我无法访问`@commentable`（`decrease_count`）`@commentable = nil`。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T02:39:54.820

`@`in是不必要的`@commentable`，因为它不是模型的实例变量。所以：

```
 def increase_count()
    commentable.inc(:comments_count, 1)
  end

  def decrease_count()
    commentable.inc(:comments_count, -1)
  end 
```

应该做的伎俩。

# php - SOQL查询，制定多条查询

> ID：11571898
> 
> 赞同：0
> 
> 时间：2012-07-20T02:08:50.750
> 
> 标签：php, salesforce, soql

我正在 php 中创建一个搜索框，以访问 SOQL 销售人员数据库中的数据。到目前为止，我有这个：

`$query = "SELECT Id, FirstName, LastName, Phone From Contact WHERE FirstName = '$var'";`

效果很好。但是，我该怎么做才能让我们说`$var`可能是电话号码。因此，如果它与名字不匹配，请在电话号码等中搜索匹配项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T02:14:24.823

这应该检查名字是否匹配或名字不匹配但在电话中找到匹配项

```
 $var=mysql_real_escape_string($var); //protect your sql entries from sql injection, make sure to validate
 $query = "SELECT Id, FirstName, LastName, Phone From Contact WHERE FirstName = '$var' OR (FirstName !='$var' AND Phone='$var') "; 
```

或者，如果您不介意这里或那里是否有匹配项，您可以使用`or`. 这比以前的查询在性能方面更好

```
 $query = "SELECT Id, FirstName, LastName, Phone From Contact WHERE FirstName = '$var' OR Phone='$var' "; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T02:15:37.670

试试这个：

```
$query = "SELECT Id, FirstName, LastName, Phone From Contact WHERE FirstName LIKE '%$var%' OR Phone LIKE '%$var%'"; 
```

使用 LIKE 而不是 = 您可以匹配部分名称，例如搜索 dav 将导致返回 David 和 Daves。% 是通配符占位符。

# python - 如何在 wxPython 中制作网格？

> ID：11571905
> 
> 赞同：0
> 
> 时间：2012-07-20T02:10:16.157
> 
> 标签：python, wxpython, wxwidgets

我想做一个这样的网格：

![在此处输入图像描述](../Images/6b2c4b93c11bf2b08d236d9e7f527b1c.png)

不是 wx.Grid。有谁知道如何做到这一点，并可以提供一个例子？

这将用于 GridSizer 或 GridBagSizer 来分隔小部件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T02:38:24.893

使用~~框架~~wxWindow 子类的绘图上下文（框架/面板/等...几乎任何 wxObject）。

一种方法是这样

```
import wx
class MyCustomFrame(wx.Frame):
    def __init__(self,parent,id):
        wx.Frame.__init__(self,parent,id)
        self.Bind(wx.EVT_PAINT,self.OnPaint)
    def OnPaint(self,evt):
        self.dc = dc = wx.PaintDC(self)
        p1 = [0,0]
        p2 = [500,0]
        for i in range(100):
            dc.DrawLine(p1[0],p1[1],p2[0],p2[1])
            p1 = [p1[0],p1[1]+5]
            p2 = [p2[0],p2[1]+5]
        p1=[0,0]
        p2 = [0,500]
        for i in range(100):
            dc.DrawLine(p1[0],p1[1],p2[0],p2[1])
            p1 = [p1[0]+5,p1[1]]
            p2 = [p2[0]+5,p2[1]]
if __name__ == "__main__":
    a = wx.App(redirect=False)
    f = MyCustomFrame(None,-1)
    #f.OnPaint(None) --- dont do this!!!
    f.Show()
    a.MainLDop() 
```

您可以改用画线来加快速度

```
 def OnPaint(self,evt):
        self.dc = dc = wx.PaintDC(self)
        verticle_lines = [(i*5,0,i*5,500) for i in range(100)]
        horizontal_lines = [(0,i*5,500,i*5) for i in range(100)]
        dc.DrawLineList(horizontal_lines+verticle_lines) 
```

为了用网格尺寸器做你想做的事，你可以这样做

```
import  wx
class   MyCustomPanel(wx.Panel):
    def __init__(self,parent,id):
        wx.Panel.__init__(self,parent,id)
        self.sz =   wx.GridSizer(5,5,0,0)
        for i   in  range(25):
            self.sz.Add(wx.StaticText(self,-1,str(i)))
        self.SetSizer(self.sz)
        self.Bind(wx.EVT_PAINT,self.OnPaint)
    def OnPaint(self,evt):
        self.dc =   dc  =   wx.PaintDC(self)
        w,h = self.sz.GetSize()
        nr = self.sz.GetRows()
        nc = self.sz.GetCols()
        cell_w = float(w)/nc
        cell_h = float(h)/nr
        hlines = [(0,i*cell_h,w,i*cell_h)for i in range(nr+1)]
        vlines = [(i*cell_w,0,i*cell_w,h)for i in range(nc+1)]
        self.dc.DrawLineList(hlines+vlines)

if  __name__    ==  "__main__":
    a   =   wx.App(redirect=False)
    f1 = wx.Frame(None,-1)
    f   =   MyCustomPanel(f1,-1)
    #f.OnPaint(None)
    f1.Show()
    a.MainLoop() 
```

你也可以用这样的风格来完成这个

```
import  wx
class SimplePanel(wx.Panel):
    def __init__(self,parent,id,str_val):
        wx.Panel.__init__(self,parent,id,style=wx.SIMPLE_BORDER)
        self.sz = wx.BoxSizer()
        self.sz.Add(wx.StaticText(self,-1,str_val),0,wx.ALIGN_CENTER)
        self.SetSizer(self.sz)
class   MyCustomPanel(wx.Panel):
    def __init__(self,parent,id):

        wx.Panel.__init__(self,parent,id)
        self.sz =   wx.GridSizer(5,5,0,0)
        for i   in  range(25):
            self.sz.Add(SimplePanel(self,-1,str(i)),0,wx.GROW)
        self.SetSizer(self.sz)

if  __name__    ==  "__main__":
    a   =   wx.App(redirect=False)
    f1 = wx.Frame(None,-1)
    f   =   MyCustomPanel(f1,-1)
    #f.OnPaint(None)
    f1.Show()
    a.MainLoop() 
```

# c# - 不屈不挠的野兽：一个二维字符数组，在一个结构内，在一个非托管 dll 的腹部

> ID：11571907
> 
> 赞同：4
> 
> 时间：2012-07-20T02:10:21.533
> 
> 标签：c#, pinvoke, marshalling, multidimensional-array

束好腰，冒险进入遗产地，砍杀、召唤和编组各种野兽，我现在站在一个如此凶猛的生物面前，据我对我的兄弟的疲惫调查所知，武器，没有一个代码战士站立。

这是详细信息。我正在尝试将结构内的 2d char 数组（在 c# 中）传递给 C dll（无源代码），它必须能够更改 2d 数组。

C结构：

```
typedef struct s_beast
{
    bool fireBreathing;
    char entrails[30][50];
} Beast; 
```

这是我到目前为止在 C# 中的内容，但它（错误地）是一维数组：

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
public struct Beast
{
    public BOOL fireBreathing;

    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 30 )]
    public char [] entrails;
} 
```

谁愿意为此出手，为了我，为了我的兄弟，为了子孙后代，一劳永逸地杀了这头野兽？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T02:43:28.560

互操作不是我的强项，但 C 风格的多维数组本质上只是单维数组的语法差异。

像这样的东西可能会起作用：

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
public struct Beast
{
    public BOOL fireBreathing;

    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 1500 )] /* 50x30 */
    public char [] entrails;
}

public class TamedBeast
{
    public Beast WildBeast;
    public char[30][50] entrails
    {
      var 2dEntrails = new char[30][50];
      var position = 0;
      for (int first = 0; first <30; first++)
      {
         for (int second = 0; second <50; second++)
         {
             2dEntrails[first][second] = WildBeast.entrails[position++];
         }
      }
      return 2dEntrails;
    }
} 
```

免责声明：内存中未经测试的代码，但它应该提供一些想法。这可以缓存 2D 数组，我不只是作为野兽的初始刺，加上同步更新。对于每个二维的内存复制操作，这可能会大大加快速度。

# ios5 - 关于 Objective-C 2.0 中的属性、“合成”和“动态”的说明

> ID：11571910
> 
> 赞同：2
> 
> 时间：2012-07-20T02:10:39.950
> 
> 标签：ios5, dynamic, properties, synthesize

如果我在 Objective-C 2.0 中定义一个属性如下：

```
@property (readwrite, assign) NSObject *theObject; 
```

我必须以某种方式创建 getter 和 setter 方法。据我所知，对此我有三个选择。

*   手动编码`- (NSObject *)theObject`&的实现`- (void)setTheObject:(NSObject *)object`
*   用于`@synthesize`自动生成*这两种*方法，或
*   用于`@dynamic`自动生成我没有选择覆盖的两种方法中的任何一种。

我是否正确理解这一点？此外，不同参数的使用如何`@property`影响`@synthesize`&的结果`@dynamic`？（例如，`nonatomic`& `weak`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T03:10:54.880

`@synthesize`您误解了和之间的区别`@dynamic`。

`@synthesize`如果尚未手动实现 getter 和/或 setter，则将生成属性的 getter 和 setter 方法。这就是你目前所相信`@dynamic`的。

`@dynamic`当您不希望运行时自动生成 getter 和 setter 并且您没有手动实现它们时使用。基本上，`@dynamic`告诉编译器 getter/setter 将在运行时使用某种运行时*魔法*动态提供。

例如，[Objective-C 运行时编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtDynamicResolution.html)说：

```
You can implement the methods `resolveInstanceMethod:` and `resolveClassMethod:` 
to dynamically provide an implementation for a given selector for an instance 
and class method respectively. 
```

我建议您阅读[The Objective-C Programming Language 的](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Introduction/introObjectiveC.html#//apple_ref/doc/uid/TP30001163-CH1-SW2)[Declared Properties](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html#//apple_ref/doc/uid/TP30001163-CH17)部分，因为它更详细地解释了方法，并与所有属性（如和）一起工作。`@property``@synthesize``@dynamic``nonatomic``weak`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-05T08:25:22.233

`@dynamic`告诉编译器访问器方法是在运行时提供的。

通过一些调查，我发现提供访问器方法会覆盖`@dynamic`指令。

`@synthesize`告诉编译器为你创建这些访问器（getter 和 setter）

`@property`告诉编译器将创建访问器，并且可以使用点符号或`[object message]`

# c# - Xaml 中的展开/折叠菜单

> ID：11571913
> 
> 赞同：2
> 
> 时间：2012-07-20T02:11:07.133
> 
> 标签：c#, wpf, xaml, menu

我想知道是否可以创建展开/折叠侧边栏菜单。例如

![图片](../Images/78746540f6a3ac732ca9eae9edb63ed8.png)

如果你们有任何例子/关于从哪里开始的任何建议。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T02:27:09.900

这应该让你开始。

**XAML**

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>

    <StackPanel x:Name="Menu" Width="100" Background="LightBlue">
        <TextBlock>Menu 1</TextBlock>
        <TextBlock>Menu 2</TextBlock>
        <TextBlock>Menu 3</TextBlock>
    </StackPanel>

    <Grid Grid.Column="1" Background="LightGray">
        <Button Content="Expand/Collapse" Click="ButtonClick" />
    </Grid>
</Grid> 
```

**C＃**

```
private void ButtonClick(object sender, RoutedEventArgs e)
{
    this.Menu.Visibility = this.Menu.Visibility == Visibility.Visible
                                ? Visibility.Collapsed
                                : Visibility.Visible;
} 
```

# php - 使用 $_SESSION 一次在 div 上使用

> ID：11571921
> 
> 赞同：-2
> 
> 时间：2012-07-20T02:12:04.840
> 
> 标签：php

我想使用 echo 和 $_SESSION 一次使用一个 div。当我把它放到网上时，它只显示 $form。你能看看我做错了什么吗？

```
 $signedIn ='<h3 id="throughHeader"> Account options</h3><br/>
        <p id="throughP"> <a href="convenientaccountinfo.php> Account Info </a></p><br/>
        <p id="throughP"><a href="convenientaddaddress.php> Add Address </a></p><br/>
        <p id="throughP"> <a href="convenientaddcreditcard.php> Add C. Card </a></p><br/>
        <p id="throughP"> <a href="convenientsignout.php> Sign Out </a></p>';

        $form='<form id="signInForm" method="POST" action=""><h3 id="formHeader">Sign Into Account</h3><br/>
        <p id="pRegister"><a id="register" href="convenientregisterpage.php"> Register </a></p><br/>
        <label>Email Addr:</label><input type="text" name="userEmail" id="email" size="15"/><br/>
        <label>Password:</label><input type="password" name="password" id="password" size="15"/><br/>
        <input type="submit" value="Sign In" id="formSubmit" name="submit"/> </form>';

    $username = $_SESSION['userEmail'];
    if(!$username){
        $signedInForm="$form";
    }
    else{
        $signedInForm="$signedIn";
    }
} 
```

这是带有验证的 POST 表单，直到它设置了 $_SESSION。感谢您再次查看它。

```
 $email=$_POST['userEmail'];
$password=$_POST['password'];
if(isset($_POST['submit'])){
    if(empty($email) || empty($password)){
    $msg_to_user3="Fill in both fields";
    }
    else{
    $results=mysql_query("SELECT * FROM register WHERE userEmail='$email'");
   if (mysql_num_rows($results)==0)
       $msg_to_user3 ="No such User";
    else
    {
      while ($login_row = mysql_fetch_assoc($results))
      {
       $password_db = $login_row['password'];
       if ($password!=$password_db){
         $msg_to_user3 ="Password doesn't match";
       }
         if ($password_db!=$password){

        $msg_to_user2="<a id='forgetpassword' href='convenientforgotpassword.php'>Forget Password</a>";
     }
       else
       {
          $active = $login_row['active'];
          $userEmail = $login_row['userEmail'];
          if ($active==0){
             $msg_to_user3= "Activate account at ($userEmail) </p>";
      }
         else
          { 
           $_SESSION['userEmail']=$username;//assign session
      }

      }
      }
    }
       }
}   
<html>
    <body>
    <div id="formSignIn">
        <?php echo $signedInForm ;?>
        </div>
    </body>
    </htmo> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T02:17:38.407

好的，我得到了 $_SESSION 工作，它在 $form 和 $signedIn 变量之间切换。至于两个只显示 ps 我把 id 去掉了，在 a href 中引号没有关闭，所以它没有关闭每个链接。感谢你的帮助！！

# vb.net - 未定义类型“iTextSharp.text.Table”

> ID：11571922
> 
> 赞同：2
> 
> 时间：2012-07-20T02:12:34.467
> 
> 标签：vb.net

我想知道为什么没有定义 Type 'iTextSharp.text.Table'。我已经导入了 iTextSharp.text、iTextSharp.text.pdf、iTextSharp.text.html、iTextSharp.text.html.simpleparser。

Dim gvTable As New **iTextSharp.text.Table** (columns, tableRows)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T03:00:47.243

在互联网上搜索时，我唯一能找到的`iTextSharp.Text.Table`就是示例代码。我查看了 SourceForge 上的 SVN，没有`Table`它是文本命名空间的一部分，看起来它在当前版本中已被弃用。你最好的选择是使用[`iTextSharp.text.pdf.PDFPTable`](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/PdfPTable.html). （来自 iText 链接的文档）或查找版本 5 之前的 iTextSharp 版本。如果您查看此[SO Question/Answer](https://stackoverflow.com/questions/5680391/itextsharp-in-version-4-16-with-previous-licence-conditions)，则[**`iTextSharp version 4.1.6`**](http://pdfviewernet.googlecode.com/svn-history/r55/trunk/PDFView/PDFView/lib/itextsharp.dll)此版本的链接确实具有 iTextSharp.text.Table。这里还有一个[博客](http://blog.bytescout.com/2011_04_01_archive.html)，其中包含指向源代码和 dll 的链接。

# google-apps-script - instanceof String 在 Google Apps 脚本中的行为不符合预期

> ID：11571923
> 
> 赞同：7
> 
> 时间：2012-07-20T02:12:35.167
> 
> 标签：google-apps-script

我想检查 Apps 脚本中的变量是否是字符串，但发现当变量实际上是字符串时 instanceof 没有返回 true。以下测试：

```
function test_instanceof() {
  var a = "a";
  Logger.log('"a" is ' + ((a instanceof String) ? '' : 'not ') + 'a String');
  var b = String("b");
  Logger.log('String("b") is ' + ((b instanceof String) ? '' : 'not ') + 'a String');
} 
```

记录这两条消息：

```
"a" is not a String
String("b") is not a String 
```

文档不清楚支持的 ECMAScript 子集，尽管从代码执行没有异常的事实来看，instanceof 显然是一个有效的运算符，而 String 是一个有效的类型。

检查变量类型的适当方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T02:24:46.437

这是标准的 EcmaScript 3。

您的代码正在执行 JavaScript 所期望的操作：请参阅此处了解[在您的浏览器中运行的等效 JavaScript](http://jsfiddle.net/yG6eC/)。

Instanceof 检查原型链中的匹配构造函数。这对于通过“新”创建的对象很有用，但对字符串不是很有帮助。您真正想要的 String 是 typeof，如[浏览器中的此示例](http://jsfiddle.net/hA3gU/)或等效的 Apps 脚本代码所示：

```
function test_instanceof() {
  var a = "a";
  Logger.log('"a" is ' + ((typeof a == 'string') ? '' : 'not ') + 'a String');
  var b = String("b");
  Logger.log('String("b") is ' + ((typeof b == 'string') ? '' : 'not ') + 'a String');
} 
```

# for-loop - 批处理文件：无法在循环内回显变量

> ID：11571926
> 
> 赞同：4
> 
> 时间：2012-07-20T02:12:49.527
> 
> 标签：for-loop, batch-file

我已经跌到谷底了，我似乎无法完成这项工作！

```
setlocal EnableDelayedExpansion

for %%g in (1,2,3) do (
set /a c=%%g+32
echo %c%
)

pause 
```

但是它说 ECHO 已开启，我知道这意味着它没有可显示的内容，但它怎么可能没有可显示的内容呢？我尝试更改很多东西（例如添加/删除 setlocal），但它不起作用。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T03:10:43.703

```
for %%g in (1,2,3) do (
  set /a c=%%g+32
  echo !c!
) 
```

在`set /?`书面上，我们应该使用`!`这种情况。

# android - 如何在 XML 中将 TextView 居中

> ID：11571928
> 
> 赞同：-1
> 
> 时间：2012-07-20T02:12:57.787
> 
> 标签：android, xml, textview, center

你如何在 xml 中居中 TextViews？

例子：

```
 <TextView
    android:id="@+id/text_3"
    android:text="@string/text_3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="25sp"
    android:textColor="#ffffff"
    /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T03:01:03.450

放

> 机器人：重力=“中心”

在您的 Layout 和 Textview 中。看看这个考试。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center"
    android:orientation="vertical" >

    <TextView
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:gravity="center"
      android:text="@string/hello" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T11:21:25.807

您必须添加`layout_gravity`到 TextView

试试这个

```
<TextView
    android:id="@+id/text_3"
    android:text="@string/text_3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="25sp"
    android:textColor="#ffffff"
    android:layout_gravity="center"
    /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T02:12:57.787

您可以使用 xml 中的文本居中，

```
android:gravity="center" 
```

或者

```
android:layout_centerVertical="true"
android:layout_centerHorizontal="true" 
```

# asp.net - Intranet 上已经登录的用户可以单点登录吗？

> ID：11571932
> 
> 赞同：0
> 
> 时间：2012-07-20T02:13:11.877
> 
> 标签：asp.net, security, single-sign-on

我有一个用户登录的 asp.net 内部网应用程序。我想在另一个公共且位于不同域中的 asp.net 应用程序上对同一用户进行身份验证。是否有可能以某种方式安全地使用他为 Intranet 应用程序创建的令牌？所以用户不必再次登录？在这里使用什么，asp.net 表单身份验证？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T02:20:33.223

你想要的东西叫做[CAS](http://en.wikipedia.org/wiki/Central_Authentication_Service)。

# c# - 如何快速将两个字节添加到字节数组中？

> ID：11571933
> 
> 赞同：2
> 
> 时间：2012-07-20T02:13:12.363
> 
> 标签：c#, .net

将两个字节添加到现有字节数组中的最佳方法是什么？

我应该使用`Array.Copy`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T02:23:40.350

嗯，这是一个有趣的话题。我做了一个微基准测试，是的，最快的方法是使用`Array.Copy`.

检查一下：[添加到 C# 数组](https://stackoverflow.com/questions/11402238/prepend-to-a-c-sharp-array/11402865#11402865)

问候

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T02:43:11.463

使用 List 而不是 byte[]; 它将提供灵活性，并且性能良好

```
List<byte> l1 = new List<byte>() { 5, 6, 7, 10, 11, 12 };  
List<byte> l2 = new List<byte> { 8, 9 };
l1.InsertRange(3, l2); 
```

然后，如果您出于任何原因需要返回 byte[]，您可以调用...

```
l1.ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T02:48:20.603

要不然

```
byte[] newArray = new byte[theArray.Length + 1];  
theArray.CopyTo(newArray, 1);  
newArray[0] = theNewByte;  
theArray = newArray; 
```

# android - 使用 Android 的 Sax 解析器解析 XML

> ID：11571934
> 
> 赞同：0
> 
> 时间：2012-07-20T02:13:23.560
> 
> 标签：android

如何使用 sax 解析器解析 xml？我很难将作者部分解析为数组。我从这里跟随示例[http://ganeshtiwaridotcomdotnp.blogspot.com/2011/08/xml-parsing-using-saxparser-with.html](http://ganeshtiwaridotcomdotnp.blogspot.com/2011/08/xml-parsing-using-saxparser-with.html)

XML

```
<catalog>
    <book id="001" lang="ENG">
        <isbn>23-34-42-3</isbn>
        <regDate>1990-05-24</regDate>
        <title>Operating Systems</title>
        <publisher country="USA">Pearson</publisher>
        <price>400</price>
        <authors>
            <author>
                <name>Ganesh Tiwari</name>
                <age>1</age>
            </author>
        </authors>
    </book>
    <book id="002">
        <isbn>24-300-042-3</isbn>
        <regDate>1995-05-12</regDate>
        <title>Distributed Systems</title>
        <publisher country="Nepal">Ekata</publisher>
        <price>500</price>
        <authors>
            <author>
                <name>Mahesh Poudel</name>
                <age>2</age>
            </author>
                <author>
                <name>Bikram Adhikari</name>
                <age>3</age>
            </author>
            <author>
                <name>Ramesh Poudel</name>
                <age>4</age>
            </author>
        </authors>
        </book>
</catalog> 
```

开始

```
public BookSaxParser() {
    bookL = new ArrayList<Book>();
    authorL = new ArrayList<Author>();
}

public List<Book> printDatas() {

    return bookL;
}

@Override 
public void startElement(String s, String s1, String elementName, Attributes attributes) throws SAXException {
    // if current element is book , create new book
    // clear tmpValue on start of element

    if (elementName.equalsIgnoreCase("book")) {
        bookTmp = new Book();
        bookTmp.setId(attributes.getValue("id"));
        bookTmp.setLang(attributes.getValue("lang"));

    }

    if (elementName.equalsIgnoreCase("author")) {
        authorTmp = new Author();

    }
    // if current element is publisher
    if (elementName.equalsIgnoreCase("publisher")) {
        bookTmp.setPublisher(attributes.getValue("country"));
    }

}
@Override
public void endElement(String s, String s1, String element) throws SAXException {
    // if end of book element add to list
    if (element.equals("book")) {
        bookL.add(bookTmp);
    }

    if (element.equals("authors")) {
        bookTmp.setAuthors(authorL);

    }

    if (element.equals("author")) {
        authorL.add(authorTmp);

    }

    if(element.equalsIgnoreCase("name")){
        authorTmp.setName(tmpValue);

    }

    if(element.equalsIgnoreCase("age")){
        authorTmp.setAge(Integer.parseInt(tmpValue));
    }

    if (element.equalsIgnoreCase("isbn")) {
        bookTmp.setIsbn(tmpValue);
    }
    if (element.equalsIgnoreCase("title")) {
        bookTmp.setTitle(tmpValue);
    }

    if(element.equalsIgnoreCase("price")){
        bookTmp.setPrice(Integer.parseInt(tmpValue));
    }

    if(element.equalsIgnoreCase("regDate")){
        try {
            bookTmp.setRegDate(sdf.parse(tmpValue));
        } catch (ParseException e) {
            //System.out.println("date parsing error");
        }
    }
}
@Override
public void characters(char[] ac, int i, int j) throws SAXException {
    tmpValue = new String(ac, i, j);
}

public void endDocument() throws SAXException {
    // you can do something here for example send
    // the Channel object somewhere or whatever.
} 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T04:08:38.647

您的代码在解析作者时将作者添加到 authorL 列表中，然后将**相同**的列表分配给每本书。

要解决此问题，您需要在每次遇到 Authors 元素时创建一个新的作者列表

就像是：

```
public void startElement(String s, String s1, String elementName, Attributes attributes) throws SAXException {
    // Your existing code here

    if (elementName.equalsIgnoreCase("authors")) {
        authorL = new ArrayList<Author>();
    }
} 
```

# c# - 防止 float.Parse(string) 结果为 epsilon 数

> ID：11571937
> 
> 赞同：0
> 
> 时间：2012-07-20T02:13:46.663
> 
> 标签：c#, winforms, floating-point

我从`textbox.Text` 我的变量`float _value;`中获取值，该变量存储来自文本框的值

```
_value = float.Parse(textBox.text); 
```

当我想显示 _value 时，它​​将以 epsilon 数显示。例如。

```
textbox.Text = 100000000; 
```

`_value`将与`1.0E+12`

我确实想 _value 存储实数 10000000。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T02:32:47.590

该值以二进制浮点格式存储，可能是 IEEE754。当值转换为字符串时，您观察到的差异是文本表示之一。您可以使用格式说明符控制值的显示方式，以实现所需的输出，

```
float f = 1000000000000;
Console.WriteLine (string.Format("{0:.#}\n", f)); 
```

将数字格式化为“1000000000000”。

更多关于[string.Format](http://msdn.microsoft.com/en-us/library/aa331875%28v=vs.71%29.aspx)。

# android - 你能在 Android 的 UI 线程上安全地调用“getDrawable”或“decodeResource”吗

> ID：11571938
> 
> 赞同：5
> 
> 时间：2012-07-20T02:13:53.250
> 
> 标签：android

打电话是不好的做法

`getResources().getDrawable()`或者`BitmapFactory.decodeResource()`

来自Android上的UI线程？我只是想知道，因为我有这种情况，我想在执行后台操作时在我的视图中显示一个加载图像，但我仍然调用上述方法之一......几乎我看到的每个项目似乎都在执行任何线程上的任何一种方法都没有经过深思熟虑，但我只是在寻找最佳实践。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-07T16:45:01.500

自从我提出这个问题以来，快进 3 年了，我认为*简短*的回答是“只需使用 Picasso 或 Glide”。我认为*长*答案是“这取决于”。这取决于 Image/drawable 的大小。对于`BitmapFactory#decodeResource`，您应该尽一切可能远离主线程。如果我尝试显示占位符图像，最佳做法是它应该以适合您的设计的合理大小打包在您的应用程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T03:39:52.047

如果您在 UI 线程上进行任何 GUI 更新，这将是一个很好的做法。在任何线程中，您都可以运行您的 UI 线程，您可以在其中执行 UI 工作，或者您也可以使用消息处理程序，它也会为您做同样的事情。

```
Runnable run_in_ui = new Runnable() {
        @Override
        public void run() {
            // do your UI stuffs here
        }
    };
    runOnUiThread(run_in_ui); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-07T16:59:05.163

尽管 Vijay Sharma 建议使用 Picasso，但我建议您使用 Facebook 的 frescolib。它做了所有可能的优化，从硬件缓存开始，最终用流水线概念修改 Http 请求。

与其自己做，还不如依靠 Facebook 团队的工作：

构建.gradle：

```
 dependencies {
   // your app's other dependencies
   compile 'com.facebook.fresco:fresco:0.7.0+'
 } 
```

视图.xml：

```
<com.facebook.drawee.view.SimpleDraweeView
    android:id="@+id/my_image_view"
    android:layout_width="20dp"
    android:layout_height="wrap_content"
    fresco:viewAspectRatio="1.33"
    <!-- other attributes --> 
```

爪哇：

```
 mSimpleDraweeView.setImageURI(uri); 
```

就这么简单！

# cocos2d-iphone - Cocos2d - 以不同速度在曲线路径中移动对象

> ID：11571941
> 
> 赞同：0
> 
> 时间：2012-07-20T02:14:09.963
> 
> 标签：cocos2d-iphone, curve

我正在尝试开发一款游戏，让汽车在道路上行驶并根据红绿灯的信号停下来。他们有不同的速度。有时汽车需要减速才能不撞到领先的汽车。他们需要在红灯处停下来。他们必须转弯等等。在直线相交的道路上工作时，这一切都相对容易。但是我怎样才能沿着弯曲的路径移动一辆/多辆汽车呢？到目前为止，这很容易，因为我只使用了汽车位置的 x 或 y。但这一次并非如此，两个坐标似乎都是向前移动所必需的。在笔直的道路上，我可以给汽车一个任意速度，它会以这个速度沿着 x 或 y 轴移动。但是我怎样才能确定速度，如果两个坐标都必须考虑？在这种情况下，加速和减速对我来说也很神秘。提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:21:20.567

虽然[这是关于在自由形式的轨道上移动火车](http://www.learn-cocos2d.com/2012/07/starting-point-train-game-freeform-tracks/)，但同样的问题和原则也适用于在自由形式的道路上行驶的汽车。实际上，汽车可能更容易，因为它们不需要 100% 准确地坚持自己的轨道。

简而言之：这并不容易，但可行。难度取决于您希望汽车外观和寻找切角的真实程度。

在您的情况下，汽车应该简单地遵循一条路径（一系列点）。由于 CCAction 不利于频繁的方向/速度变化，因此您应该使用自己的系统来检测路径点并前往下一个。沿着贝塞尔曲线移动不会让您的卡片以恒定速度移动，这就排除了 CCBezier* 动作。

# objective-c - NSMutableAttributedStrings - objectAtIndex:effectiveRange:: 越界

> ID：11571948
> 
> 赞同：11
> 
> 时间：2012-07-20T02:15:13.903
> 
> 标签：objective-c, macos, nsattributedstring, nsrange

我正在尝试向标签添加一些花哨的文本，但我遇到了 NSMutableAttributedString 类的一些问题。我试图实现四个：1.更改字体，2.下划线范围，3.更改范围颜色，4.上标范围。

这段代码：

```
- (void)applicationDidFinishLaunching:(NSNotification*)aNotification
{
    NSMutableAttributedString* display = [[NSMutableAttributedString alloc]
                                          initWithString:@"Hello world!"];
    NSUInteger length = [[display string]length] - 1;

    NSRange wholeRange = NSMakeRange(0, length);
    NSRange helloRange = NSMakeRange(0, 4);
    NSRange worldRange = NSMakeRange(6, length);

    NSFont* monoSpaced = [NSFont fontWithName:@"Menlo" 
                                         size:22.0];

    [display addAttribute:NSFontAttributeName
                    value:monoSpaced
                    range:wholeRange];

    [display addAttribute:NSUnderlineStyleAttributeName 
                    value:[NSNumber numberWithInt:1] 
                    range:helloRange];

    [display addAttribute:NSForegroundColorAttributeName 
                    value:[NSColor greenColor]
                    range:helloRange];

    [display addAttribute:NSSuperscriptAttributeName 
                    value:[NSNumber numberWithInt:1] 
                    range:worldRange];

    //@synthesize textLabel; is in this file.
    [textLabel setAttributedStringValue:display];
} 
```

给我这个错误：

```
NSMutableRLEArray objectAtIndex:effectiveRange:: Out of bounds 
```

此外，我尝试弄乱范围，但当我尝试时变得更加困惑`NSRange worldRange = NSMakeRange(4, 5);`。我不明白为什么会产生这个：`Hell^o wor^ld!`，其中 ^s 内的字母是上标。

`NSRange worldRange = NSMakeRange(6, 6);`产生预期的效果，`hello ^world!^`。

标签的外观：
![输出文本](../Images/bb9987b4b3e2ad3d09bcc0e8e6f76bd5.png)

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-20T02:42:38.997

您在 worldRange 上的长度太长。NSMakeRange 接受两个参数，起点和**长度**，而不是起点和终点。这可能就是您对这两个问题感到困惑的原因。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T02:41:01.880

`NSRange`有两个值，开始索引和范围的长度。

因此，如果您从索引 6 开始，`length`之后的字符将超过字符串的末尾，那么您想要的是：

```
NSRange worldRange = NSMakeRange(6, length - 6); 
```

# lua - lua string.upper 不适用于重音字符？

> ID：11571951
> 
> 赞同：6
> 
> 时间：2012-07-20T02:15:48.727
> 
> 标签：lua

我正在尝试在 lua 中将一些法语文本转换为大写，它没有转换重音字符。知道为什么吗？

测试脚本：

> print('échelle')
> print(string.upper('échelle'))
> print('ÉCHELLE')
> print(string.lower('ÉCHELLE'))

输出：

> Échelle
> ÉCHELLE
> ÉCHELLE
> Échelle

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T03:02:00.050

这可能有点矫枉过正，但您可以使用[slnunicode](http://luaforge.net/projects/sln/)（在 LuaRocks 中可用）来做到这一点。

```
require "unicode"
print(unicode.utf8.upper("échelle"))
-- ÉCHELLE 
```

您可能需要使用`unicode.ascii.upper`或`unicode.latin1.upper`取决于源文件的编码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T11:12:29.317

您需要设置合适的语言环境，这取决于这些字符串在源代码中的编码方式。由于您提供的输出，您似乎正在使用 Latin 1。在这种情况下，请尝试在脚本顶部添加以下行：

`os.setlocale("fr_FR.ISO8859-1")`

此名称适用于 Mac OS X。对于 Linux，请尝试

`os.setlocale("fr_FR.iso88591")`

如果您使用的是 UTF，那么设置语言环境将无济于事，因为`string.lower`一次将字符串转换一个字节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T06:32:16.070

为了更有效地解释这一点，Lua 没有对非 ASCII 字符串的内置支持。您可以存储 Latin-1 或 UTF-8 编码的字符串，但任何特殊的字符串操作函数（`upper`、`lower`等）都不适用于任何非 ASCII 字符。

有一些 Lua 库添加了不同程度的 Unicode 支持。因此，您将不得不使用其中之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T02:47:54.243

Lua 只使用 C 库函数`toupper`，AFAIK[不支持重音字符](http://coding.derkeiler.com/Archive/C_CPP/comp.lang.c/2006-03/msg02572.html)。你需要自己为此编写一个例程。

# c++ - 关于使用 std::vector 作为原始数组 Foo []

> ID：11571953
> 
> 赞同：0
> 
> 时间：2012-07-20T02:16:11.050
> 
> 标签：c++, stl

我知道向量保证具有与数组相同的底层内存布局。所以对于 POD（plain-old-data）类型，比如`int`,`vector<int> a`可以用作`SomeCFun(&a[0], a.size())`when`a`是非空的。我想知道当元素类型是（复杂）类类型时，这个技巧是否仍然安全有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T02:18:19.257

是的，它保证对*任何*类型都是正确的`T`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T02:25:26.077

是的，它会起作用的。另一种选择是`SomeCFun(a.data(), a.size())`- 但无论您喜欢什么。

# ruby-on-rails - 为此设置制作 Rails RESTful 路由的最简单方法

> ID：11571954
> 
> 赞同：1
> 
> 时间：2012-07-20T02:16:11.783
> 
> 标签：ruby-on-rails, url-routing

我希望解决以下路线：

```
splunk/ocd/:some_number
splunk/ord/:some_number 
```

我希望这些由`ocd`. 创建这些路线的最简单方法是什么？`ord``SplunkController`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T02:34:46.990

这应该这样做，因为它不跟随 crud。

```
get 'splunk/ocd/:some_number' => "splunk#ocd", as: 'splunk_ocd'
get 'splunk/ord/:some_number' => "splunk#ord", as: 'splunk_ord' 
```

# scala - How can I print the contents of a org.squeryl.dsl.Group?

> ID：11571955
> 
> 赞同：0
> 
> 时间：2012-07-20T02:16:13.507
> 
> 标签：scala, squeryl

Using Squeryl ORM and Scala. For the first time I did a JOIN statement that used grouping. Admittedly, I can't figure out how to start iterating through the contents.

Here's the JOIN:

```
join(DB.jobs, DB.users.leftOuter, DB.clients.leftOuter, DB.projects.leftOuter)((j,u,c,p) =>
      where((j.teamId === teamId)
        and (j.startTime > yesterdayBegin))
      groupBy(j.userId)
      on(j.userId === u.map(_.id), j.clientId === c.map(_.id), j.projectId === p.map(_.id))) 
```

How do I print out its contents?

I tried:

```
Job.teamTimeline( teamId(request) ).map{ user => Map(
        "name" -> user._1.map(_.name).getOrElse("Pending")
      )} 
```

But got the compiler error:

```
value _1 is not a member of org.squeryl.dsl.Group[Option[org.squeryl.PrimitiveTypeMode.LongType]] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:57:35.213

Max the great was able to help out on the mailing list. I almost had the syntax right.

**His response:**

replace :

```
groupBy(j.userId) 
```

by:

```
groupBy(j.userId, j.name) 
```

then :

```
timelineLookup.map{ group => Map(

        "name" -> group.key._2.getOrElse("Pending")

      )} 
```

Source: [https://groups.google.com/forum/?fromgroups#!topic/squeryl/sJ05He-4F3I](https://groups.google.com/forum/?fromgroups#!topic/squeryl/sJ05He-4F3I)

# java - 以对象为输入参数的 Java 抽象方法

> ID：11571964
> 
> 赞同：4
> 
> 时间：2012-07-20T02:17:57.937
> 
> 标签：java, abstract

我可以使这段代码在没有对象作为抽象方法的输入参数的情况下工作。例如，如果我`printInformation()`在 person 和 emp 中为该方法创建输入参数，因为`printInformation(int x)`它的工作原理。

当我将输入参数作为`printInformation()`方法的对象时，如下所示，它会引发错误

> emp 不是抽象的，并且不会覆盖人员类中的抽象方法 printInformation(person) emp extends person{ ^

```
abstract class person{
 abstract void printInformation(person p);
}

class emp extends person{
 emp(){
  System.out.println("This is a emp constructor");
 }
 void printInformation(emp e){
  System.out.println("This is an emp");
 }
}

class entity{
 public static void main(String args[]){
  emp employeeObject = new emp();
  employeeObject.printInformation(employeeObject);
 }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T02:21:44.167

你的界面有一个这样定义的函数：

```
void printInformation(person p); 
```

你的类有一个这样定义的函数：

```
void printInformation(emp e); 
```

这些不是相同的功能。Java 认为第二个是新的重载方法，而不是接口中方法的实现。由于该类`emp`未声明为抽象类，但未提供抽象方法的实现`void printInformation(person)`，因此是错误的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T02:28:33.400

我会做这样的事情：

```
interface PrintsInformation<T> {
    void printInformation( T t );
}

class Emp implements PrintsInformation<Emp> {
    public void printInformation( Emp e ) {
        System.out.println( "This is an emp" );
    }
}

public static void main( String[] args ) {
    Emp employeeObject = new Emp();
    employeeObject.printInformation( employeeObject ); // compiles
} 
```

解决问题的另一种方法是，如果对象本身正在打印，则不要传入该对象。
只需这样做：

```
 public void printInformation() {
        // print "this" object, rather than the one passed in
        System.out.println( "This is an emp" );
    } 
```

# c++ - glm::mix 返回无效的四元数

> ID：11571966
> 
> 赞同：1
> 
> 时间：2012-07-20T02:18:00.807
> 
> 标签：c++, opengl, quaternions

我正在尝试在我的游戏引擎中实现骨骼动画，但插值有问题。

每一帧，我想在帧之间进行插值，因此我有类似这样的代码：

```
// This is the soon-to-be-interpolated joint
Joint &finalJoint = finalSkeleton.joints[i];

// These are our existing joints
const Joint &joint0 = skeleton0.joints[i];
const Joint &joint1 = skeleton1.joints[i];

// Interpolate
finalJoint.position = glm::lerp(joint0.position, joint1.position, interpolate);
finalJoint.orientation = glm::mix(joint0.orientation, joint1.orientation, interpolate); 
```

最后一行是问题所在。的方向`finalJoint`有时会是`(-1.#IND, -1.#IND, -1.#IND, -1.#IND)`。

这些是一些示例值及其结果（请注意，`interpolation`在`0.4`所有三种情况下）：

*   `joint0.orientation = (0.707107, 0.000242, 0.707107, 0.0)`
    `joint1.orientation = (0.707107, 0.000242, 0.707107, 0.0)`
    `finalJoint = (-1.#IND, -1.#IND, -1.#IND, -1.#IND)` **（不正确）**

*   `joint0.orientation = (-0.451596, -0.61858, -0.262811, -0.586814)`
    `joint1.orientation = (-0.451596, -0.61858, -0.262811, -0.586814)`
    `finalJoint = (-0.451596, -0.61858, -0.262811, -0.586814)` **（正确的）**

*   `joint0.orientation = (0.449636, 0.6195, 0.26294, 0.58729)`
    `joint1.orientation = (0.449636, 0.6195, 0.26294, 0.58729)`
    `finalJoint = (-1.#IND, -1.#IND, -1.#IND, -1.#IND)` **（不正确）**

*（是的，我知道它在相同的值之间进行插值。）*

我还没有完全掌握四元数是如何工作的，但这对我来说似乎很奇怪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T16:54:58.667

如果你看一下[典型的 Slerp 方程](http://en.wikipedia.org/wiki/Slerp)，你会发现它`Sin(Ω)`在分数的分母中有一个，其中 Ω 是两个四元数之间的角度：即，`Ω = acos(dot_product(q1,q1));` 现在，`Sin(0)==0;`当你除以零时，就会出现问题。正如维基百科文章中提到的，这是一个可移动的不连续性，但这需要一些额外的检查。

我只是拉下代码来看看。这是它的总和：

```
T angle = acos(dot(x, y));
return (glm::sin((T(1)-a)*angle)*x+glm::sin(a*angle)*y)/glm::sin(angle); 
```

没有特别检查。当角度接近零时，这很容易出现数值问题。对于某些插值，它也可能在旋转球体周围花费很长的路要走。glm:::mix 有两个其他版本被注释掉，它们可以更好地处理这些问题。看起来当前版本及其伴随的问题已于2011 年 5 月[提交到存储库](http://ogl-math.git.sourceforge.net/git/gitweb.cgi?p=ogl-math/ogl-math;a=commitdiff;h=144caa18d5f6ca9f7751c9a85a1abc66cc1bd1d9)。

如果角度小于某个阈值量，我建议恢复到使用线性插值的版本。只需注释掉当前的并取消注释旧的。

# perl - 用于 html 的 Perl 框架

> ID：11571967
> 
> 赞同：0
> 
> 时间：2012-07-20T02:18:03.357
> 
> 标签：perl

我想授权一个团队专门用于密码重置/打印机队列删除类型的 L1 任务。我计划通过使用 Perl 脚本的 1 个菜单来执行此操作。我希望它成为 HTML 的前端。我不希望用户登录服务器的黑屏。他们只需登录门户网站-> 查看菜单-> 选择一个项目-> 执行任务-> 退出。

现在，我正在考虑我可以使用什么框架来实现这一点。如何将用户密码从门户网站安全地传输到我的服务器？您将如何加密/保护网络通信？你将如何加密/保护密码？即使您使用其中一种内置方法在身份验证时加密密码，您将如何保护用户输入中的密码以实现密码重置功能？

我真的需要你对此提出宝贵的建议。

谢谢，普拉尚特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T02:22:43.083

看到这个很酷的框架**Mojolicious**，它真的是最新的，而且作者经常更新它。

[mojolicious 官方网站](http://mojolicio.us/)

# java - Beanshell - 使用数组列表

> ID：11571969
> 
> 赞同：4
> 
> 时间：2012-07-20T02:18:10.607
> 
> 标签：java, javascript, beanshell

我正在使用 beanshell，我想使用 arraylist

我的代码 -

```
import java.util.*; 

List test= new ArrayList();
test.add("Last Name"); 
```

但我得到以下异常

```
Caused by: org.apache.bsf.BSFException: BeanShell script error:Typed variable declaration : 
Attempt to resolve method: add() on undefined variable or class name: test: at Line: 206 
```

知道是什么导致了问题吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-07-05T14:42:42.263

试试`ArrayList test = new ArrayList();` 这对我来说很好。猜测 BeanShell 不适用于多态性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T02:19:32.523

您需要定义 ArrayList 的类型。在这里，你会这样做：

```
List<String> test = new ArrayList<String>(); 
```

# android - 我们可以在 Android 应用程序中使用 Flash 内容吗？

> ID：11571971
> 
> 赞同：2
> 
> 时间：2012-07-20T02:18:47.337
> 
> 标签：android, flash, android-4.2-jelly-bean

Flash 内容是否可以在 Android Jelly Bean 上的应用程序中工作，因为它不支持 Flash...分享您对此的了解..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T04:16:50.647

无论移动设备是否支持 Flash / AIR 播放器运行时插件，应用程序可能总是与 Captive Runtime 打包在一起。

强制运行时捆绑包是一个包，其中包含您的应用程序代码以及运行时的专用版本。以这种方式打包的应用程序使用捆绑的运行时而不是安装在其他地方的共享运行时。

然后，用户甚至可以在尚未安装 AIR 的设备上运行该应用程序。根据您将包导出到的平台，您可以使用强制运行时或共享运行时。

强制运行时对于 iOS 设备是必需的。

无论移动浏览器 Flash 集成如何，都可以部署使用强制运行时打包的 Flash 应用程序。

# php - 如何将 TCPDF 与 PHP 邮件功能一起使用

> ID：11571977
> 
> 赞同：4
> 
> 时间：2012-07-20T02:20:15.780
> 
> 标签：php, email, pdf, phpmailer, tcpdf

```
$to = 'my@email.ca';
$subject = 'Receipt';
$repEmail = 'rep@sales.ca';

$fileName = 'receipt.pdf';
$fileatt = $pdf->Output($fileName, 'E');
$attachment = chunk_split($fileatt);
$eol = PHP_EOL;
$separator = md5(time());

$headers = 'From: Sender <'.$repEmail.'>'.$eol;
$headers .= 'MIME-Version: 1.0' .$eol;
$headers .= "Content-Type: multipart/mixed; boundary=\"".$separator."\"";

$message = "--".$separator.$eol;
$message .= "Content-Transfer-Encoding: 7bit".$eol.$eol;
$message .= "This is a MIME encoded message.".$eol;

$message .= "--".$separator.$eol;
$message .= "Content-Type: text/html; charset=\"iso-8859-1\"".$eol;
$message .= "Content-Transfer-Encoding: 8bit".$eol.$eol;

$message .= "--".$separator.$eol;
$message .= "Content-Type: application/pdf; name=\"".$fileName."\"".$eol; 
$message .= "Content-Transfer-Encoding: base64".$eol;
$message .= "Content-Disposition: attachment".$eol.$eol;
$message .= $attachment.$eol;
$message .= "--".$separator."--";

if (mail($to, $subject, $message, $headers)){
$action = 'action=Receipt%20Sent';
header('Location: ../index.php?'.$action);
}

else {
$action = 'action=Send%20Failed';
header('Location: ../index.php?'.$action);
} 
```

我已经使用 TCPDF 很短的时间来从表单生成 PDF 文件。它工作得很好，PHP 的那部分没有改变。现在我想将这些 PDF 文件发送到我的电子邮件帐户。

电子邮件实际上正在使用此编码并附加 PDF。问题在于它只是一个大约 100 字节大小的空白 PDF。这当然不是有效的 PDF，也与表单的回复没有任何关系。

我真的不熟悉将文件附加到 PHP 中的电子邮件，任何解决此问题的帮助将不胜感激。

**更新**

由于似乎有几个人在看这个，所以我会发布我当前的解决方案。它涉及下载 PHPMailer，如下所示。我从 TCPDF 的输出线开始。

```
$attachment = $makepdf->Output('filename.pdf', 'S');
SENDmail($attachment);

function SENDmail($pdf) {
require_once('phpmailer/class.phpmailer.php');
$mailer = new PHPMailer();

$mailer->AddReplyTo('reply@to.ca', 'Reply To');
$mailer->SetFrom('sent@from.ca', 'Sent From');
$mailer->AddReplyTo('reply@to.ca', 'Reply To');
$mailer->AddAddress('send@to.ca', 'Send To');
$mailer->Subject = 'Message with PDF';
$mailer->AltBody = "To view the message, please use an HTML compatible email viewer";
$mailer->MsgHTML('<p>Message contents</p>'));
if ($pdf) {$mailer->AddStringAttachment($pdf, 'filename.pdf');}

$mailer->Send();
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-20T02:27:01.303

你有两个选择。您可以将 PDF 保存到文件并附加文件，或者将其输出为字符串。我发现字符串输出更可取：

```
$pdfString = $pdf->Output('dummy.pdf', 'S'); 
```

文件名被忽略，因为它只返回编码字符串。现在您可以在电子邮件中包含该字符串。在处理此类附件时，我更喜欢使用 PHPMailer。使用 PHPMailer 的 AddStringAttachment 方法来完成：

```
$mailer->AddStringAttachment($pdfString, 'some_filename.pdf'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-25T07:03:37.343

我尝试了几种选择。唯一可行的方法是将 PDF 保存到文件夹然后通过电子邮件发送。

```
$pdf->Output("folder/filename.pdf", "F"); //save the pdf to a folder
  require_once('phpmailer/class.phpmailer.php'); //where your phpmailer folder is
$mail = new PHPMailer();                    
$mail->From = "email.com";
$mail->FromName = "Your name";
$mail->AddAddress("email@yahoo.com");
$mail->AddReplyTo("email@gmail.com", "Your name");               
$mail->AddAttachment("folder/filename.pdf");      // attach pdf that was saved in a folder
$mail->Subject = "Email Subject";                  
$mail->Body = "Email Body";
if(!$mail->Send())
{
       echo "Message could not be sent. <p>";
       echo "Mailer Error: " . $mail->ErrorInfo;
}
else
{
       echo "Message sent";
} 
echo 'sent email and attachment'; 
```

# r - R：`unlist`在对矩阵的子集求和时使用大量时间

> ID：11571980
> 
> 赞同：1
> 
> 时间：2012-07-20T02:20:36.087
> 
> 标签：r, matrix, dataframe

我有一个程序，它从 MySQL 数据库中提取数据，解码一对二进制列，然后将这对二进制列中的行的子集相加。在样本数据集上运行程序需要 12-14 秒，其中 9-10 秒占用了`unlist`. 我想知道是否有任何方法可以加快速度。

## 表结构

我从数据库中获取的行如下所示：

```
| array_length | mz_array        | intensity_array |
|--------------+-----------------+-----------------|
|           98 | 00c077e66340... | 002091c37240... |
|           74 | c04a7c7340...   | db87734000...   | 
```

其中`array_length`是两个数组中 little-endian double 的数量（保证它们的长度相同）。`mz_array`所以第一行在和中都有 98 个双精度数`intensity_array`。`array_length`平均值为 825，中位数为 620，有 13,000 行。

## 解码二进制数组

每行通过传递给以下函数进行解码。一旦二进制数组被解码，`array_length`就不再需要了。

```
DecodeSpectrum <- function(array_length, mz_array, intensity_array) {
  sapply(list(mz_array=mz_array, intensity_array=intensity_array),
         readBin,
         what="double",
         endian="little",
         n=array_length)
} 
```

## 对数组求和

下一步是对 中的值求和`intensity_array`，但前提是它们的对应条目在`mz_array`某个窗口内。数组按`mz_array`, 升序排列。我正在使用以下函数来总结这些`intensity_array`值：

```
SumInWindow <- function(spectrum, lower, upper) {
  sum(spectrum[spectrum[,1] > lower & spectrum[,1] < upper, 2])
} 
```

`spectrum`的输出`DecodeSpectrum`在哪里`matrix`？

## 对行列表进行操作

每行由以下人员处理：

```
ProcessSegment <- function(spectra, window_bounds) {
  lower <- window_bounds[1]
  upper <- window_bounds[2]
  ## Decode a single spectrum and sum the intensities within the window.
  SumDecode <- function (...) {
    SumInWindow(DecodeSpectrum(...), lower, upper)
  }

  do.call("mapply", c(SumDecode, spectra))
} 
```

`ProcessSegment`最后，使用此函数获取行并将其传递给：

```
ProcessAllSegments <- function(conn, window_bounds) {
  nextSeg <- function() odbcFetchRows(conn, max=batchSize, buffsize=batchSize)

  while ((res <- nextSeg())$stat == 1 && res$data[[1]] > 0) {
    print(ProcessSegment(res$data, window_bounds))
  }
} 
```

我正在分段进行提取，以便 R 不必一次将整个数据集加载到内存中（这会导致内存不足错误）。我正在使用 `RODBC`驱动程序，因为`RMySQL`驱动程序无法返回未受污染的二进制值（据我所知）。

## 表现

对于大约 140MiB 的样本数据集，整个过程大约需要 14 秒才能完成，这对于 13,000 行来说还算不错。不过，我认为还有改进的余地，尤其是在查看`Rprof`输出时：

```
$by.self
                 self.time self.pct total.time total.pct
"unlist"             10.26    69.99      10.30     70.26
"SumInWindow"         1.06     7.23      13.92     94.95
"mapply"              0.48     3.27      14.44     98.50
"as.vector"           0.44     3.00      10.60     72.31
"array"               0.40     2.73       0.40      2.73
"FUN"                 0.40     2.73       0.40      2.73
"list"                0.30     2.05       0.30      2.05
"<"                   0.22     1.50       0.22      1.50
"unique"              0.18     1.23       0.36      2.46
">"                   0.18     1.23       0.18      1.23
".Call"               0.16     1.09       0.16      1.09
"lapply"              0.14     0.95       0.86      5.87
"simplify2array"      0.10     0.68      11.48     78.31
"&"                   0.10     0.68       0.10      0.68
"sapply"              0.06     0.41      12.36     84.31
"c"                   0.06     0.41       0.06      0.41
"is.factor"           0.04     0.27       0.04      0.27
"match.fun"           0.04     0.27       0.04      0.27
"<Anonymous>"         0.02     0.14      13.94     95.09
"unique.default"      0.02     0.14       0.06      0.41

$by.total
                     total.time total.pct self.time self.pct
"ProcessAllSegments"      14.66    100.00      0.00     0.00
"do.call"                 14.50     98.91      0.00     0.00
"ProcessSegment"          14.50     98.91      0.00     0.00
"mapply"                  14.44     98.50      0.48     3.27
"<Anonymous>"             13.94     95.09      0.02     0.14
"SumInWindow"             13.92     94.95      1.06     7.23
"sapply"                  12.36     84.31      0.06     0.41
"DecodeSpectrum"          12.36     84.31      0.00     0.00
"simplify2array"          11.48     78.31      0.10     0.68
"as.vector"               10.60     72.31      0.44     3.00
"unlist"                  10.30     70.26     10.26    69.99
"lapply"                   0.86      5.87      0.14     0.95
"array"                    0.40      2.73      0.40     2.73
"FUN"                      0.40      2.73      0.40     2.73
"unique"                   0.36      2.46      0.18     1.23
"list"                     0.30      2.05      0.30     2.05
"<"                        0.22      1.50      0.22     1.50
">"                        0.18      1.23      0.18     1.23
".Call"                    0.16      1.09      0.16     1.09
"nextSeg"                  0.16      1.09      0.00     0.00
"odbcFetchRows"            0.16      1.09      0.00     0.00
"&"                        0.10      0.68      0.10     0.68
"c"                        0.06      0.41      0.06     0.41
"unique.default"           0.06      0.41      0.02     0.14
"is.factor"                0.04      0.27      0.04     0.27
"match.fun"                0.04      0.27      0.04     0.27

$sample.interval
[1] 0.02

$sampling.time
[1] 14.66 
```

`unlist`看到占用了这么多时间，我感到很惊讶。这告诉我，可能会有一些多余的复制或重新排列。我是 R 的新手，所以这完全有可能是正常的，但我想知道是否有什么明显的错误。

# 更新：发布示例数据

我已经在此处发布了程序的完整版本以及 我[在此处](http://dl.dropbox.com/u/19422084/dump.sql.gz)[使用](https://gist.github.com/3151005)的示例数据 。样本数据是 ed 的输出。您需要为脚本设置正确的环境变量以连接到数据库：`gzip``mysqldump`

*   `MZDB_HOST`
*   `MZDB_DB`
*   `MZDB_USER`
*   `MZDB_PW`

要运行脚本，您必须指定`run_id`和 窗口边界。我这样运行程序：

```
Rscript ChromatoGen.R -i 1 -m 600 -M 1200 
```

这些窗口范围是相当随意的，但选择范围的大约一半到三分之一。如果要打印结果，请在对within`print()`的调用周围加上 a 。使用这些参数，前 5 个应该是：`ProcessSegment``ProcessAllSegments`

```
[1] 7139.682 4522.314 3435.512 5255.024 5947.999 
```

你可能想要限制结果的数量，除非你想要 13,000 个数字填满你的屏幕 :) 最简单的方法就是`LIMIT 5`在`query`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:28:29.270

我想通了！

问题出在`sapply()`通话中。`sapply`进行了大量的重命名和属性设置，这大大减慢了这种大小的数组的速度。替换`DecodeSpectrum`为以下代码使采样时间从`14.66`几秒缩短到`3.36`几秒，增加了 4 倍！

这是新的身体`DecodeSpectrum`：

```
DecodeSpectrum <- function(array_length, mz_array, intensity_array) {
  ## needed to tell `vapply` how long the result should be. No, there isn't an
  ## easier way to do this.
  resultLength <- rep(1.0, array_length)

  vapply(list(mz_array=mz_array, intensity_array=intensity_array),
         readBin,
         resultLength,
         what="double",
         endian="little",
         n=array_length,
         USE.NAMES=FALSE)
} 
```

输出现在`Rprof`看起来像：

```
$by.self
               self.time self.pct total.time total.pct
"<Anonymous>"           0.64    19.75       2.14     66.05
"DecodeSpectrum"        0.46    14.20       1.12     34.57
".Call"                 0.42    12.96       0.42     12.96
"FUN"                   0.38    11.73       0.38     11.73
"&"                     0.16     4.94       0.16      4.94
">"                     0.14     4.32       0.14      4.32
"c"                     0.14     4.32       0.14      4.32
"list"                  0.14     4.32       0.14      4.32
"vapply"                0.12     3.70       0.66     20.37
"mapply"                0.10     3.09       2.54     78.40
"simplify2array"        0.10     3.09       0.30      9.26
"<"                     0.08     2.47       0.08      2.47
"t"                     0.04     1.23       2.72     83.95
"as.vector"             0.04     1.23       0.08      2.47
"unlist"                0.04     1.23       0.08      2.47
"lapply"                0.04     1.23       0.04      1.23
"unique.default"        0.04     1.23       0.04      1.23
"NextSegment"           0.02     0.62       0.50     15.43
"odbcFetchRows"         0.02     0.62       0.46     14.20
"unique"                0.02     0.62       0.10      3.09
"array"                 0.02     0.62       0.04      1.23
"attr"                  0.02     0.62       0.02      0.62
"match.fun"             0.02     0.62       0.02      0.62
"odbcValidChannel"      0.02     0.62       0.02      0.62
"parent.frame"          0.02     0.62       0.02      0.62

$by.total
                     total.time total.pct self.time self.pct
"ProcessAllSegments"       3.24    100.00      0.00     0.00
"t"                        2.72     83.95      0.04     1.23
"do.call"                  2.68     82.72      0.00     0.00
"mapply"                   2.54     78.40      0.10     3.09
"<Anonymous>"              2.14     66.05      0.64    19.75
"DecodeSpectrum"           1.12     34.57      0.46    14.20
"vapply"                   0.66     20.37      0.12     3.70
"NextSegment"              0.50     15.43      0.02     0.62
"odbcFetchRows"            0.46     14.20      0.02     0.62
".Call"                    0.42     12.96      0.42    12.96
"FUN"                      0.38     11.73      0.38    11.73
"simplify2array"           0.30      9.26      0.10     3.09
"&"                        0.16      4.94      0.16     4.94
">"                        0.14      4.32      0.14     4.32
"c"                        0.14      4.32      0.14     4.32
"list"                     0.14      4.32      0.14     4.32
"unique"                   0.10      3.09      0.02     0.62
"<"                        0.08      2.47      0.08     2.47
"as.vector"                0.08      2.47      0.04     1.23
"unlist"                   0.08      2.47      0.04     1.23
"lapply"                   0.04      1.23      0.04     1.23
"unique.default"           0.04      1.23      0.04     1.23
"array"                    0.04      1.23      0.02     0.62
"attr"                     0.02      0.62      0.02     0.62
"match.fun"                0.02      0.62      0.02     0.62
"odbcValidChannel"         0.02      0.62      0.02     0.62
"parent.frame"             0.02      0.62      0.02     0.62

$sample.interval
[1] 0.02

$sampling.time
[1] 3.24 
```

可能会因为打乱`do.call('mapply', ...)`电话而挤出一些额外的性能，但我对性能非常满意，因为我不愿意在这上面浪费时间。

# css - Safari/Opera/Chrome 中的 1px“填充”

> ID：11571988
> 
> 赞同：0
> 
> 时间：2012-07-20T02:21:17.260
> 
> 标签：css, safari, whitespace, opera, padding

我一直在搜索这方面的信息，我看到了很多类似的问题（百分比宽度计算问题、填充问题、相反方向的浮动、Safari+Chrome 问题等），但我没有尝试过似乎可以解决这个问题一。

我的内容区域和导航栏之间有一个神秘的 1px 垂直空间，用于 Safari、Opera 和 Chrome 中的部分页面高度。它在没有空间的 FF 和 IE 上运行良好。

这是页面： [http ://the-polyglot.net/uploads/problem_site/](http://the-polyglot.net/uploads/problem_site/)

对于我还没有清理的低效、多余、杂乱无章的样式表，我真的很抱歉——在它休眠几年后，我刚刚再次拿起这个网站，我正要通过清理才发现这个问题。

最相关的选择器是#right_navbar、#reg_content（文本区域）和#main_content（容器）。如果您检查 Opera 的检查器，该空间似乎与 #main_content 管辖的区域重合，但我不知道为什么。我可以通过应用#right_navbar 来解决 Opera/Safari/Chrome 中的问题`padding-left: 1px;`...但是这会破坏其他所有浏览器中的整个布局。

我会很感激任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T03:32:48.860

删除`background-color`id`#main_content`

```
#main_content {
  min-height: 630px;
  /*background-color: #D1EBF8;*/
} 
```

# iphone - 使用 CFUUIDRefs 作为字典的键

> ID：11571991
> 
> 赞同：2
> 
> 时间：2012-07-20T02:21:42.737
> 
> 标签：iphone, cocoa, nsdictionary

我有一堆设备。它们每个都有一个 UUID 来区分它们。从逻辑上讲，这是很自然的事情，通过在字典中跟踪它们来键入它们，然后。

但是，[设备 UUID] 方法会传回 CFUUIDRef。

首先，这不是一个对象。但是，嘿，我们可以解决这个问题。[device_dictionary setObject:device for Key(__bridge id)[device uuid]];

不，等等，这不是一个有效的密钥：它没有实现 <NSCopying> 协议。

更重要的是，由于我将这些 CFUUIDRef 动态转换为对象，字典是否会意识到当它被两次传递相同的 CFUUIDRef 时？或者由演员动态创建的新对象不会注册为同一个对象？

愿意帮我集思广益吗？当 UUID 作为非对象可用时，您将如何使用 UUID 键入字典？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T02:42:30.023

显而易见的解决方案是将返回`CFUUIDRef`的字符串转换为用作字典中的键的字符串。

您可以将 转换`CFUUIDRef`为 a `CFStringRef`using `CFUUIDCreateString()`，如下所示：

```
CFStringRef uuidString = CFUUIDCreateString(kCFAllocatorDefault, [device uuid]); 
```

然后，您可以使用免费桥接将 转换为`CFStringRef`以`NSString`在`NSDictionary`.

如果您需要将 UUID 的字符串表示形式转换回 a`CFUUIDRef`您可以使用`CFUUIDCreateFromString()`如下：

```
CFUUIDRef uuid = CFUUIDCreateFromString(kCFAllocatorDefault, uuidString); 
```

还有一个`CFUUIDRef`实现的包装器`NSCoding`，可以在[https://gist.github.com/294023](https://gist.github.com/294023)找到。但是，这似乎与 ARC 不兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T03:24:08.553

`CFUUIDRef`是 a `CFType`，您可以使用 any`CFType`作为 a 中的键`CFDictionary`：

```
CFMutableDictionaryRef d = CFDictionaryCreateMutable(
  kCFAllocatorDefault, 
  0, 
  &kCFTypeDictionaryKeyCallBacks, 
  &kCFTypeDictionaryValueCallBacks);

CFUUIDRef u1 = CFUUIDCreateFromString(kCFAllocatorDefault, CFSTR("68753A44-4D6F-1226-9C60-0050E4C00067"));
CFUUIDRef u2 = CFUUIDCreateFromString(kCFAllocatorDefault, CFSTR("68753A44-4D6F-1226-9C60-0050E4C00067"));

CFDictionarySetValue(d, u1, CFSTR("fnord"));

CFShow(CFDictionaryGetValue(d, u2)); // prints "fnord" 
```

不幸的是，在这种情况下，免费桥接不能正常工作，因为在自定义回调*之前*`-copy`会调用 in 的键`NSMutableDictionary`（参见[http://www.cocoabuilder.com/archive/cocoa/163407-using-nsimages- as-keys-to-dictionary.html#163439](http://www.cocoabuilder.com/archive/cocoa/163407-using-nsimages-as-keys-to-dictionary.html#163439)）导致崩溃。在任何情况下，使用. 代替都是微不足道的。`-setObject:forKey:` *`CFDictionary``NSDictionary`*

 *另一个选择是`NSMapTable`如果你想要一个 Objective-C 解决方案：

```
NSMapTable *t = NSCreateMapTable(NSObjectMapKeyCallBacks, NSObjectMapValueCallBacks, 0);    
NSMapInsert(t, u1, CFSTR("fnord")); 
NSLog(@"%@", NSMapGet(t, u2)); // prints "fnord" 
```*

# php - 在 PHP 中使用方法链接的 OOP

> ID：11571993
> 
> 赞同：-1
> 
> 时间：2012-07-20T02:22:02.537
> 
> 标签：php, oop, inheritance, method-chaining

首先 - 我的英语很差，所以我希望你能理解。我有涉及嵌套对象结构上的方法链接的问题。

我正在尝试创建某种列表，其中包含动态创建的对象和子列表。到目前为止，我有这个代码：

```
interface IData {}

class root {
    public function __construct( root $proxy = null ) {
        $this->proxy = $proxy;
    }
    public function __destruct() {
        if( !is_null( $this->proxy ) ) {
            unset( $this->proxy );
        }
    }
    public function OpenList() {
        $list = new field_list( $this );
        $this->data[] = $list;
        return $list;
    }

    public function CloseList() {
        return $this->proxy;
    }

    public function Add() {
        $this->data[] = new field();
        return $this;
    }

    private $proxy = null;
    private $data = array();
}

class field_list extends root implements IData {
    public function __construct( root $proxy ) {
        parent::__construct( $proxy );
    }
    public function __destruct() {
         parent::__destruct();
    }
}

class field implements IData {} 
```

我正在使用我的代码如下：

```
$root = new root();
$root->OpenList()->Add()->CloseList()->OpenList()->Add()->Add()->Add()->OpenList()->Add(); 
```

我可以追加到 $root 字段对象 ( `class field`)，还可以打开新列表 ( `class field_list`) 并将字段对象追加到最后打开的列表中。

我想知道我创建的对象引用 ( `$proxy`) 是否会导致内存泄漏问题，以及此代码是否存在任何性能问题。（编辑：）当我在输出中`print_r($root);`得到*递归*时，我不知道这是否是我的对象结构的某种类型的问题。

```
root Object(
[proxy:root:private] => 
[data:root:private] => Array
    (
        [0] => field_list Object
            (
                [proxy:root:private] => root Object
  *RECURSION*
                [data:root:private] => Array
                    (
                        [0] => field Object
                            (
                            )

                    )

            )

        [1] => field_list Object
            (
                [proxy:root:private] => root Object
  *RECURSION*
                [data:root:private] => Array
                    (
                       ........
                    )

            )

    )

) 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T04:32:18.320

我以前见过链式方法调用，我认为我从未遇到过任何问题。在内存泄漏方面，我怀疑是否存在问题，因为与 C++ 或 Java 等语言不同，您不必处理内存。你已经小心地写了一个析构函数，所以我怀疑会有问题。

由于您只创建了 1 个实例，它应该只引用属性 $proxy 的 1 个实例，所以我认为这可能没问题。

# c# - 在 C# GetEnvironmentVariable("NUMBER_OF_PROCESSORS") 返回错误的数字

> ID：11571994
> 
> 赞同：2
> 
> 时间：2012-07-20T02:22:04.020
> 
> 标签：c#, cpu, multicore

> **可能重复：**
> [如何通过 .NET/C# 查找 CPU 核心数？](https://stackoverflow.com/questions/1542213/how-to-find-the-number-of-cpu-cores-via-net-c)

我有一个控制多进程测试环境的程序。它的工作原理是确定系统上有多少可用内核，并创建与内核一样多的作业。执行此操作的代码如下：

```
string NumberOfProcesses = Environment.GetEnvironmentVariable("NUMBER_OF_PROCESSORS"); 
```

该机器是运行 Windows Server 2008 R2 HPC 版的 64 核 AMD Opteron 6276（4x16 核）。现在问题来了。从命令行我得到以下信息：

```
>echo %NUMBER_OF_PROCESSORS%
64 
```

哪个是对的。在 C# 中运行上面的代码行给了我 32。Environments.ProcessorCount 也给了我 32。我尝试了一个在[检测处理器数量中](https://stackoverflow.com/questions/188503/detecting-the-number-of-processors)找到的代码块，但这给出了相同的响应（实际上是 31...31 免费，加上一个代码正在执行）。

测试表明它确实返回了 32 个核心。运行程序显示 CPU 利用率为 50%。如果我将 64 硬编码到程序中，CPU 利用率将变为 100%。不幸的是，我不能保持硬编码，因为这个程序可以在一系列硬件上运行。我想知道这是否与 AMD 的设计有关，因为 CPU-Z 检测到 4 个物理处理器，每个处理器有 8 个内核。但是它检测到 16 个线程。我想知道 C# 是否认为它是超线程的或类似的东西。有什么想法可以让它正确识别所有 64 个内核吗？

# iphone - Facebook iOS - fql 搜索缩写名称

> ID：11571996
> 
> 赞同：0
> 
> 时间：2012-07-20T02:22:11.973
> 
> 标签：iphone, ios, facebook-fql, facebook-ios-sdk

我正在使用 Facebook iOS 库通过 facebook 查询语言访问用户朋友的数据。要按名称搜索特定朋友，我使用以下 NSString：

`[NSString stringWithFormat:@"SELECT pic_square FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) AND strpos(lower(name),'%@') >= 0 ORDER BY name", name]`

所以查询看起来像这样：

`SELECT pic_square FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) AND strpos(lower(name),'firstname lastname') >= 0 ORDER BY name`

当朋友们在 facebook 上将他们的名字设置为昵称时，我遇到了问题 - 查询不返回任何结果。例如，如果我查询 Benjamin Button，但他在 facebook 上将他的名字设置为 Ben Button，我就不走运了。

如何修改此查询以允许使用这样的昵称？或者至少允许在名称中间使用某种通配符运算符？

谢谢！詹姆士

# ruby - 在 Ruby 中的特定索引处挑选条目

> ID：11571997
> 
> 赞同：2
> 
> 时间：2012-07-20T02:22:25.310
> 
> 标签：ruby

假设我有这个数组：

```
a = [0,1,2,3,4,5] 
```

我如何从数组中获取条目 2 和 4（比如说）？我喜欢类似的东西

```
x, y = a.entries_at(2, 4) 
```

但我想要一些内置的东西。Ruby stdlib 中有什么可以做到这一点吗？很难谷歌搜索。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T02:28:46.447

你猜对了。它被称为[`values_at`](http://apidock.com/ruby/v1_9_3_125/Array/values_at)：

```
irb(main):001:0> [0,1,2,3,4,5].values_at(2, 4)
=> [2, 4] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-20T02:29:34.067

有一种方法称为`fetch`，您可以按照您指出的方式使用它：

```
a.fetch(1) 
```

`1`在您的示例中会返回。