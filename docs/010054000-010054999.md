# StackOverflow 问答 10054000-10054999

# ruby-on-rails - CSV.parse 的编码问题

> ID：10054000
> 
> 赞同：0
> 
> 时间：2012-04-07T11:19:55.480
> 
> 标签：ruby-on-rails, ruby, fastercsv

我的目标是上传一个包含名字和姓氏行的文件，解析它并在 db 中为每一行创建 Person 模型。

我执行以下操作，效果很好

```
file = CSV.parse(the_file_to_parse)
file.each do |row|
  person = Person.new(:firstname => row[0], :lastname => row[1])
  person.save
end 
```

直到我的文件包含重音（法语单词），我得到

```
Encoding::UndefinedConversionError: "\xC3" from ASCII-8BIT to UTF-8:
INSERT INTO "people" ("created_at", "firstname", "lastname",
"updated_at") VALUES (?, ?, ?, ?) 
```

处理此编码问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T12:38:41.413

您需要使用正确的编码打开 csv 文件。例如：

```
require 'csv'
require 'pp'

encoding = "ISO-8859-1"

csv = CSV.open "names.csv", "rb:#{encoding}"
csv.each do |line|
    puts "#{line[0]} #{line[1]}"
end 
```

这里有一个提示：它可能不是 UTF-8。

您的 ruby​​ 支持的编码列表可以在 irb 中使用以下命令查看：

```
puts Encoding.list.map(&:to_s).sort 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T11:23:44.487

尝试设置

```
# encoding: utf-8 
```

在 ruby​​ 文件的顶部。或者

```
export RUBYOPT=-Ku 
```

在 rails s 之前

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T10:37:01.000

如果您对输入文件的编码一无所知，您可以尝试[ensure_encoding](https://github.com/Manfred/Ensure-encoding)。

它将尝试猜测输入编码并尝试（不适用于所有编码）将其转换为您首选的目标编码。

# php - 无法将变量设置为基于用户输入发布方法

> ID：10054005
> 
> 赞同：0
> 
> 时间：2012-04-07T11:21:12.337
> 
> 标签：php

您好，我正在尝试将来自 post 方法的信息设置为一个变量，该变量将一个名为 name 的会话设置为用户输入的值。我收到以下错误：

> 注意：未定义索引：第 18 行 F:\xampp\htdocs\Impossible game\index.php 中的名称
> 
> 这是第 18 行： $session = $_POST['name'];

```
<form action="ms1.php" method="POST">
Name <input type="text" name="name">
<input type="Submit" value="Begin">
</form>
<?php
$session = $_POST['name']; 
session_start();
$_SESSION['name'] = $session; 
```

以前的错误消失了，现在出现了

> 注意：未定义变量：F:\xampp\htdocs\Impossible game\index.php 中的会话在下面第 23 行是第 23 行

```
 $_SESSION['name'] = $session; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T12:18:59.070

下面的代码已注释但未经测试。如果他们有任何问题，请告诉我。

```
 <?php
    if(isset($_POST['name'])){           //if the post has been set
        $session = $_POST['name'];       // Store the session in the variable
        session_start();
        $_SESSION['name'] = $session;    // Store the name in a session for later use
header("location:index.php");    // Redirect the user     ##UPDATE##
    }   else    {
        //if post has not been set, show the form
    ?>
    <form action="ms1.php" method="POST">
    Name <input type="text" name="name">
    <input type="Submit" value="Begin">
    </form>
    <?php
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T11:24:37.600

您应该在使用它们之前检查是否设置了变量、索引、偏移量。

```
if (isset($_POST['name']))
{
   $session = $_POST['name']; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T11:24:59.507

首先，HTML 部分和 PHP 部分是两个不同的东西：

**索引.html**

```
<form action="ms1.php" method="POST">
      Name <input type="text" name="name">
      <input type="Submit" value="Begin">
</form> 
```

**ms1.php**

```
<?php
     if (isset($_POST['name']))
             $session = $_POST['name']; 

     session_start();
     $_SESSION['name'] = $session;
?> 
```

# git - git子模块不提取子模块中的文件

> ID：10054011
> 
> 赞同：44
> 
> 时间：2012-04-07T11:22:33.420
> 
> 标签：git, file, pull, git-submodules

我以为我已经用这个新项目解决了所有问题，并认为 git 子模块是开发和部署我的应用程序的方式。

设置我的 git repo (Drupal) 并使用 Drupal 的 7.12 标签对其进行初始化。做了我自己的分支。然后使用 git submodule add --branch 7.x git://path/to/drupal/module sites/all/modules/contrib/module 在 sites/all/modules/contrib 下添加所需的模块

然后我想，通过将我的 repo 推送到 github，我可以简单地拉它，然后它将所有子模块拉到部署路径中。但是，即使我这样做，我的所有模块都不会被拉出： git submodule foreach git pull 或 git submodule init 后跟 git submodule update

原来，我错了。我现在需要以另一种方式重做所有事情吗？如果是，请告诉我如何，如果不是，很好，请告诉我。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-04-07T11:29:29.197

你分叉了 Drupal 存储库？它是否已经添加了子模块`.gitmodules`？如果是这样，您只需要克隆他们的分支并执行

```
git submodule init
git submodule update 
```

您不需要将自己的子模块重新添加到 repo 中。

现在，如果你想添加额外的子模块，你必须在`git submodule init; git submodule update`每次克隆 repo 时执行。它不会自动获取子模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-26T14:32:55.853

如果没有拉出子模块，请确保您已添加。

例如：

git 子模块添加[https://github.com/chaconinc/DbConnector](https://github.com/chaconinc/DbConnector)

我遇到了同样的问题，运行上述命令后它工作了。

# php - 获取网站的价值

> ID：10054014
> 
> 赞同：0
> 
> 时间：2012-04-07T11:22:52.503
> 
> 标签：php

所以正如标题所说，我想获得这个网站的价值：[Xtremetop100 Conquer-Online](http://xtremetop100.com/conquer-online)

我的服务器名为 Zath-Co，现在我们排在第 11 位。我想要的是一个脚本会告诉我我们是哪个等级，我们有多少进出。唯一的问题是我们在列表中上下浮动，所以我想要一个脚本来检查名称而不是排名，但我无法摆脱它。我试过这个脚本

```
 <?php $lines = file('http://xtremetop100.com/conquer-online');
  while ($line = array_shift($lines)) {
  if (strpos($line, 'Zath-Co') !== false) break; }
  print_r(explode(" ", $line)); ?> 
```

但它只显示我的服务器的名称和描述。我怎样才能让它按我的意愿工作，或者我必须使用一些真正不同的东西。（如果是，那么使用什么，一个例子会很棒。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T12:15:00.667

我建议使用 SimpleXML 和 XPath。这是工作示例：

```
$html = file_get_contents('http://xtremetop100.com/conquer-online');

// suppress invalid markup warnings
libxml_use_internal_errors(true);

// Create SimpleXML object
$doc = new DOMDocument();
$doc->strictErrorChecking = false;
$doc->loadHTML($html);
$xml = simplexml_import_dom($doc);

$xpath = '//span[@class="hd1" and ./a[contains(., "Zath-Co")]]/ancestor::tr/td[@class="number" or @class="stats1" or @class="stats"]';
$anchor = $xml->xpath($xpath);

// Clear invalid markup error buffer
libxml_clear_errors();

$rank = (string)$anchor[0]->b;
$in   = (string)$anchor[1]->span;
$out  = (string)$anchor[2]->span;

// Clear invalid markup error buffer
libxml_clear_errors(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T12:27:51.933

正如您自己尝试的那样，它也可以使用 file() 函数修复。您只需要查找源代码并找到您的“部分”的起始行。我发现（在源代码中），您需要 7 行来获取排名、描述和输入/输出数据。这是一个经过测试的示例：

```
<?php 

$lines = file('http://xtremetop100.com/conquer-online');
$CountLines = sizeof( $lines);
$arrHtml = array();
for( $i = 0; $i < $CountLines; $i++) {
    if( strpos( $lines[$i], '/sitedetails-1132314895')) {
        //The seven lines taken here under is your section at the site
        $arrHtml[] = $lines[$i++];
        $arrHtml[] = $lines[$i++]; 
        $arrHtml[] = $lines[$i++];
        $arrHtml[] = $lines[$i++];
        $arrHtml[] = $lines[$i++];
        $arrHtml[] = $lines[$i++];
        $arrHtml[] = $lines[$i++];
        break;
    }
}

//We simply strip all tags, so you just got the content.
$arrHtml = array_map("strip_tags", $arrHtml);

//Here we echo the data
echo implode('<br>',$arrHtml);

?> 
```

您可以通过循环从 $arrHtml 中取出每个元素来自己修复布局。

# java - Java2D：if 语句不适用于 java.awt.Color

> ID：10054018
> 
> 赞同：2
> 
> 时间：2012-04-07T11:23:26.250
> 
> 标签：java, java-2d

我有一个`getPixelColour`功能：

```
Color getPixelColor(int x, int y) {
    if(mazeImage == null) System.out.println(":(");
    int pixel = mazeImage.getRGB(x, y);
    int  red = (pixel & 0x00ff0000) >> 16;
    int  green = (pixel & 0x0000ff00) >> 8;
    int  blue = pixel & 0x000000ff;
    return new Color(red,green,blue);
} 
```

例如一个像素是黑色的，并且`System.out.println(getPixelColor(x,y) + " " + Color.BLACK);` 写`java.awt.Color[r=0,g=0,b=0] java.awt.Color[r=0,g=0,b=0]`

但`getPixelColor(x,y) == Color.BLACK`回报`false`。它出什么问题了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T11:26:42.880

您正在比较两个`Color`将返回 false 的不同对象（即，不同内存位置的两个不同对象）。

如果您希望正确比较它们，请使用`equals()`：

```
getPixelColor(x, y).equals(Color.BLACK); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-07T11:29:29.920

而不是使用`getPixelColor(x, y) == Color.BLACK` 尝试 `Color.BLACK.equals(getPixelColor(x, y))`

您还应该阅读`equals`Java 中的方法以及何时使用它与`==`操作符比较合适。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T11:26:41.800

如果你这样做

```
getPixelColor(x,y).equals(Color.BLACK); 
```

我相信你会得到你期望的结果。

java中的`==`运算符是引用相等，并且由于`getPixelColor()`返回它的一个新实例，`Color`因此永远不会`==`因为`Color.BLACK`这是对另一个恰好是黑色的实例的静态引用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-07T11:27:18.283

`Color`是一个对象，`==`比较的不是对象的内容，而是实例。所以可以有几个`Color`对象包含 RGB 值 (0,0,0)。

您想与`col1.equals(col2)`.

您可能会环顾该站点并发现许多其他关于`==`和的问题`equals`。举个例子：

[Java String.equals 与 ==](https://stackoverflow.com/questions/767372/java-string-equals-versus)

# android - 录制来自多个源/麦克风的音频

> ID：10054022
> 
> 赞同：6
> 
> 时间：2012-04-07T11:24:06.257
> 
> 标签：android, iphone, ios, audio-recording, microphone

我很好奇是否可以从许多来源录制音频，如果没有，有什么限制。

当前许多设备都有两个内部麦克风（主要用于降噪）。最重要的是，可以使用音频插孔插入额外的外部设备。您也可以通过蓝牙耳机获得另一个音频流。

您可以在 android 中指定 AudioSource，但是否可以同时从多个来源进行录制？我也对 iOS 设备上的情况感兴趣。

# java - Android 谷歌分析 EasyTracker

> ID：10054034
> 
> 赞同：1
> 
> 时间：2012-04-07T11:26:13.510
> 
> 标签：java, android, google-analytics

我正在尝试通过 [Google 配置在我的 Android 应用程序中使用 Google Analytics](http://code.google.com/intl/fr-FR/apis/analytics/docs/mobile/android.html)

1.  在我的项目中添加 .jar
2.  将其插入 AndroidManifest

    ```
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
    ```

3.  在我的java文件中添加这个

    公共类 MainActivity 扩展 Activity {

    ```
    GoogleAnalyticsTracker tracker;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

                tracker = GoogleAnalyticsTracker.getInstance();
                tracker.startNewSession("My-UA–XXXXXXXX", this);

                setContentView(R.layout.main);
                Button createEventButton = (Button)findViewById(R.id.NewEventButton);
                createEventButton.setOnClickListener(new OnClickListener() {
                  @Override
                  public void onClick(View v) {
                    tracker.trackEvent(
                        "Clicks",  // Category
                        "Button",  // Action
                        "clicked", // Label
                        77);       // Value
                  }
                });

                setContentView(R.layout.main);

                Button createPageButton = (Button)findViewById(R.id.NewPageButton);
                createPageButton.setOnClickListener(new OnClickListener() {
                  @Override
                  public void onClick(View v) {
                    // Add a Custom Variable to this pageview, with name of "Medium" and value "MobileApp" and
                    // scope of session-level.
                    tracker.setCustomVar(1, "Navigation Type", "Button click", 2);
                    // Track a page view. This is probably the best way to track which parts of your application
                    // are being used.
                    // E.g.
                    // tracker.trackPageView("/help"); to track someone looking at the help screen.
                    // tracker.trackPageView("/level2"); to track someone reaching level 2 in a game.
                    // tracker.trackPageView("/uploadScreen"); to track someone using an upload screen.
                    tracker.trackPageView("/testApplicationHomeScreen");
                  }
                });

                Button quitButton = (Button)findViewById(R.id.QuitButton);
                quitButton.setOnClickListener(new OnClickListener() {
                  @Override
                  public void onClick(View v) {
                    finish();
                  }
                });

                Button dispatchButton = (Button)findViewById(R.id.DispatchButton);
                dispatchButton.setOnClickListener(new OnClickListener() {
                  @Override
                  public void onClick(View v) {
                    // Manually start a dispatch, not needed if the tracker was started with a dispatch
                    // interval.
                    tracker.dispatch();
                  }
                });

    }

    @Override
    protected void onDestroy() {
      super.onDestroy();
      // Stop the tracker when it is no longer needed.
      tracker.stopSession();
    }
    } 
    ```

==> 没关系，没有错误，编译和执行，但我昨天（更多 24 小时）创建了我的 ua 帐户，我的谷歌分析面板中没有任何内容。

我的问题：我的代码中有错误还是我想再次等待？实时流量适用于 Android 应用程序（如传统网站）？？？我没有关于实时流量（当我玩我的应用程序时，我想显示使用我的应用程序的人数）和已保存流量（查看页面、时间）的信息

感谢您的回复并原谅我糟糕的英语:)

再见

* * *

**更新 1：** 我用过这个教程：[http](http://www.xatik.com/2012/03/27/how-to-use-google-analytics-in-android-applications/) ://www.xatik.com/2012/03/27/how-to-use-google-analytics-in-android-applications/我有这个日志猫：

```
04-07 14:21:59.669: INFO/GoogleAnalyticsTracker(864): Host: www.google-analytics.com
04-07 14:21:59.669: INFO/GoogleAnalyticsTracker(864): User-Agent: GoogleAnalytics/1.4.2 (Linux; U; Android 2.2; en-us; sdk Build/FRF91)
04-07 14:21:59.669: INFO/GoogleAnalyticsTracker(864): GET /__utm.gif?utmwv=4.8.1ma&utmn=235327630&utme=8(1!Navigation%20Type)9(1!Button%20click)11(1!2)&utmcs=UTF-8&utmsr=240x320&utmul=en-US&utmp=%2FtestApplicationHomeScreen&utmac=BLIBLUBLIBLO–1&utmcc=more_and_more 
```

正在进行中，但我的实时分析面板中没有任何内容......我在我的项目中添加了 EasyTracker .jar 这是我的活动代码：

```
import com.google.android.apps.analytics.GoogleAnalyticsTracker;
import com.google.android.apps.analytics.easytracking.EasyTracker;
import com.google.android.apps.analytics.easytracking.TrackedActivity;

import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends TrackedActivity {

    GoogleAnalyticsTracker tracker;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
                setContentView(R.layout.main);

                Button quitButton = (Button)findViewById(R.id.QuitButton);
                quitButton.setOnClickListener(new OnClickListener() {
                  @Override
                  public void onClick(View v) {
                        EasyTracker.getTracker().trackEvent("ButtonClick", "MyButtonName", "", 0);
                  }
                });
    }

    @Override
    protected void onDestroy() {
      super.onDestroy();
      //How can i stop the tracking onDestroy ???
    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T15:35:42.890

我知道这已经几个月了，但我会做出回应以可能帮助他人。我是编写 OP 更新 1 中引用的指南的人。我最初遇到的一个问题是我在手机上使用了自定义 ROM。许多自定义 ROM 修改了“主机”文件，这些文件会阻止应用访问显示广告，或者在这种情况下会阻止向 Google Analytics 发送数据。如果您的手机上确实有自定义 ROM，则可以检查“主机”文件以查看其中是否列出了 Google Analytics。最快的方法是在计算机上的文本编辑器中打开文件。去做这个：

1.  在您的 android 设备上获取文件资源管理器应用程序（我使用“ES 文件资源管理器”）。
2.  导航到“/等”。
3.  找到“主机”文件并将其复制到 SD 卡上的已知位置。
4.  将手机/SD 卡连接到计算机并在文本编辑器中打开“hosts”文件（Notepad++ 很好而且免费）。
5.  在文件中搜索与 Google Analytics 相关的任何内容并将其删除。我首先搜索了“分析”，浏览了所有结果，并删除了与名称相关的所有与谷歌有关的内容（还有其他分析网站）。然后我搜索了“谷歌”，浏览了所有结果，并删除了仍然与 Analytics 相关的所有内容。
6.  保存“主机”文件。
7.  断开与计算机的连接并使用文件资源管理器将“hosts”文件从 SD 卡复制回“/etc”并覆盖。

这应该允许您的手机将数据发送到 Google Analytics。我将更新我的指南以将其包含在某个地方。

# python - 带有 2 个列表的 Gnuplot python

> ID：10054044
> 
> 赞同：0
> 
> 时间：2012-04-07T11:26:50.530
> 
> 标签：python, gnuplot

我有一个 python 脚本，它给了我 2 个列表和另一个参考（时间）。我如何创建一个代表我的第一个列表的图形。第二个列表也有同样的问题。我需要它们在同一个图形上。

list1 [12, 15, 17, 19]

list2 [34, 78, 54, 67]

list3 [10, 20, 30, 40]（时间以分钟为单位）

如何使用这些列表创建 png 格式的图形？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:16:15.830

首先你需要这个包[http://gnuplot-py.sourceforge.net/](http://gnuplot-py.sourceforge.net/)，然后运行这些代码：

```
import Gnuplot
g=Gnuplot.Gnuplot()
y1= [12, 15, 17, 19]
y2= [34, 78, 54, 67]
x= [10, 20, 30, 40] 
d1=Gnuplot.Data(x,y1,with_="line")
d2=Gnuplot.Data(x,y2,with_="line")
#g.plot(d1,d2)   #uncomment this line if you want to see the gnuplot window
g.hardcopy('filename.png',terminal = 'png') 
```

# c# - 如何发布两个字符串？

> ID：10054046
> 
> 赞同：1
> 
> 时间：2012-04-07T11:27:13.123
> 
> 标签：c#, wcf, web-services, rest

我试图为我的 AddTagtoGroup 创建一个 POST 方法

看起来像这样（尽管似乎从未使用过字符串组，但仍然感到困惑）：

```
 List<Group> Groups = new List<Group>();
    List<Tag> tags = new List<Tag>();
    public void AddTagtoGroup(string group, string tag)
    {
        var result = Groups.Where(n => String.Equals(n.GroupName, tag)).FirstOrDefault();
        if (result != null)
        {
            result.Tags.Add(new Tag() { TagName = tag });
        }
    } 
```

我的 post 方法看起来像这样，但我不确定在 uri 模板中放什么？

```
 [OperationContract]
        [WebInvoke(Method = "POST",
 BodyStyle = WebMessageBodyStyle.Bare, 
RequestFormat = WebMessageFormat.Xml, 
ResponseFormat = WebMessageFormat.Xml, 
UriTemplate = "/AddTagtoGroup{group}{tag}")]
        void AddTagtoGroup(string group, string tag); 
```

还是我对 GET 感到困惑并且 uri 模板中可以包含任何内容？

在运行我的帖子时，就像`bare`消息格式一样，我收到错误消息说我的操作合同必须被包装，所以我将其更改为`WebMessageFormat.Wrapped`

我刚刚设置的 uri 模板`UriTemplate="/AddTagtoGroup"`运行但我不确定我是否可以向它发布任何内容，或者我可以吗？就像我说的对 GET & POST 有点困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T11:49:21.013

您需要在 URI 中的 group 和 tag 之间使用分隔符，否则它会模棱两可（无法分辨第一个字符串在哪里结束，而第二个字符串从哪里开始）。将您的调整`UriTemplate`为“/AddTagToGroup/{group}/{tag}”。

此外，`WebInvoke`默认为`POST`so you don't need `Method="POST"`，我不确定你为什么需要所有其他属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T11:53:09.907

如果你想安静，你有几个选择。

如果它只是字符串，你想定义它如下。请注意，不需要数据合同。不利的一面是，如果您有 100 个标签，则必须进行 100 次调用。

```
[OperationContract]
[WebInvoke(Method = "POST", UriTemplate = "/groups/{group}/tags")
public void AddTagsToGroup(string groupName, string tag)
{
  // do what you need to do
} 
```

要批量处理它们，您可以执行以下操作：

```
[OperationContract]
[WebInvoke(Method = "POST", UriTemplate = "/groups/{group}/tags")
public void AddTagsToGroup(string groupName, string[] tags)
{
  // do what you need to do
} 
```

现在，这也存在一些问题，特别是如果您希望您的有效负载能够自我描述，例如：

```
<Tags> 
   <Tag>tag1</Tag>
   <Tag>tag2</Tag>
</Tags> 
```

在这种情况下，我会像您一样定义一个数据合同标签并将其发布如下：

```
[WebInvoke(Method = "POST", UriTemplate = "/groups/{group}/tags")
public void AddTagsToGroup(string groupName, Tag[] tags)
{
  // do what you need to do
} 
```

或者包装标签请求如下：

```
[CollectionDataContract]
public class Tags : List<Tag>
{

} 
```

并定义签名如下：

```
[WebInvoke(Method = "POST", UriTemplate = "/groups/{group}/tags")
public void AddTagsToGroup(string groupName, Tags tags)
{
  // do what you need to do
} 
```

选择真的是你的。WCF REST 帮助页面将为您提供要发布的确切格式。

# mysql - 优化这个 MySQL 查询

> ID：10054056
> 
> 赞同：0
> 
> 时间：2012-04-07T11:28:33.390
> 
> 标签：mysql, sql, query-optimization

**表架构**

对于这两个表，CREATE 查询如下所示：

***表1：*** （file_path_key，dir_path_key）

```
create table Table1(
             file_path_key varchar(500), 
             dir_path_key varchar(500), 
             primary key(file_path_key)) 
engine = innodb; 
```

***表2：***（file_path_key，hash_key）

```
create table Table2(
             file_path_key varchar(500) not null, 
             hash_key bigint(20) not null, 
             foreign key (file_path_key) references Table1(file_path_key) on update cascade on delete cascade)
engine = innodb; 
```

***目标*：**

给定一个 file_path *F*和它的 dir_path 字符串*D ，我需要找到所有那些在**F*的散列集中至少有一个散列的文件名，但它们的目录名不是*D*。如果一个文件*F1与**F*共享多个哈希，那么它应该重复多次。

请注意，Table1 中的 file_path_key 列和 Table2 中的 hash_key 列已被索引。

在这种特殊情况下，Table1 有大约 350,000 个条目，而 Table2 有 31,167,119 个条目，这使得我当前的查询很慢：

```
create table temp 
        as select hash_key from Table2 
        where file_path_key = F;

select s1.file_path_key 
        from Table1 as s1 
        join Table2 as s2 
        on s1.file_path_key join 
        temp on temp.hash_key = s2.hash_key 
        where s1.dir_path_key != D 
```

我怎样才能加快这个查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T12:22:15.770

我不明白`temp`表的用途是什么，但请记住，使用 CREATE .. SELECT 创建的此类表没有任何索引。因此，至少将该声明修复为

```
CREATE TABLE temp (INDEX(hash_key)) ENGINE=InnoDB AS 
SELECT hash_key FROM Table2 WHERE file_path_key = F; 
```

否则，另一个 SELECT 执行完全连接`temp`，所以它可能会很慢。

我还建议在 Table1 中使用数字主键（INT、BIGINT）并从 Table2 而不是文本列中引用它。例如：

```
create table Table1(
             id int not null auto_increment primary key,
             file_path_key varchar(500), 
             dir_path_key varchar(500), 
             unique key(file_path_key)) 
engine = innodb;

create table Table2(
             file_id int not null, 
             hash_key bigint(20) not null, 
             foreign key (file_id) references Table1(id) 
            on update cascade on delete cascade) engine = innodb; 
```

如果在连接谓词中使用整数列而不是文本列，则连接两个表的查询可能会快得多。

# android - 在 action_move 中识别出多点触控指针

> ID：10054065
> 
> 赞同：1
> 
> 时间：2012-04-07T11:30:11.157
> 
> 标签：android, multi-touch

我是一名开发空气曲棍球安卓游戏的学生。我在理解多点触控方面遇到问题。我刚刚了解了 ACTION_DOWN、ACTION_POINTER_DOWN 等。

但问题在于 ACTION_MOVE。我为 2 个玩家创建了 2 个精灵。第一个精灵会在我的第一根手指移动的地方移动，但我的第二个精灵不会在我的第二根手指移动的地方移动。

我的问题是，我想如何确定哪个手指在 ACTION_MOVE 中移动？我曾尝试使用 getPointerId(index)，但我不明白如何使用它，因为如果第一根手指离开屏幕，索引会发生变化

```
switch (action & MotionEvent.ACTION_MASK) {
    case MotionEvent.ACTION_DOWN: {
     break;
}
case MotionEvent.ACTION_POINTER_DOWN: {
    break;
}
case MotionEvent.ACTION_UP: {
     break;
}
case MotionEvent.ACTION_POINTER_UP: {
    break;
}
case MotionEvent.ACTION_MOVE: {
        if((int)event.getPointerId(index) == 0){     //i know this IF statement is wrong, what should i do?
         player1.setX((int)event.getX());   //player1 & player2 is a sprite object
         player1.setY((int)event.getY());
        }
        if((int)event.getPointerId(index) == 1){
         player1.setX((int)event.getX());
         player1.setY((int)event.getY());
        }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T13:32:11.747

您无法知道将首先触摸哪个区域。第一个手指/触摸得到指针 id = 0 第二个 = 1 等等。你可以做的是：

```
public boolean onTouchEvent(MotionEvent event) {

    // If this does not work search for a way to get the screen width
    WindowManager wm = (WindowManager) ctx.getSystemService(Context.WINDOW_SERVICE);
    Display display = wm.getDefaultDisplay();

    int eventaction = event.getActionMasked();

    int num = event.getPointerCount();

    // For every touch
    for (int a = 0; a < num; a++) {

        int X = (int) event.getX(event.getPointerId(a));
        int Y = (int) event.getY(event.getPointerId(a));

        int allowed_touch_range = display.getWidth() / 2; // Your screen width divided by 2
        switch (eventaction) {

        case MotionEvent.ACTION_MOVE:

            // Left half of the screen
            if (X < allowed_touch_range) {
                              /* Player1 Move */
            }
            // Rigth half
            if (X > allowed_touch_range) {
                               /* Player2 Move */
            }

            break;

        }
    }

    return true;
} 
```

# sql-server-2005 - SUM 函数的 SQL 查询

> ID：10054067
> 
> 赞同：1
> 
> 时间：2012-04-07T11:30:40.847
> 
> 标签：sql-server-2005

我有两张表 Loan 和 Member。现在在贷款中我有列总金额，在成员中我有列作为成员类型，在贷款中我有根据成员类型的各种贷款。现在我想使用 SUM 函数根据 memtype 计算 totalamount。

我尝试了以下方法：

```
select sum(totalamount) from loan,member where member.mem_type='Regular' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T11:44:54.197

你的意思是这样的：

```
select sum(totalamount) AS Total 
from loan
JOIN member ON Memberid=loan.Memberid   
where member.mem_type='Regular' 
```

或者，如果您也想选择`mem_type`，则如下所示：

```
select sum(totalamount) AS Total,member.mem_type 
from loan
JOIN member ON Memberid=loan.Memberid   
where member.mem_type='Regular'
GROUP BY member.mem_type 
```

# java - 在 BufferedImage 的屏幕上查找位置？

> ID：10054068
> 
> 赞同：1
> 
> 时间：2012-04-07T11:30:42.250
> 
> 标签：java, image, awtrobot

我正在尝试在屏幕上找到某个图像的位置，但我对 Java 还是很陌生，所以我想我可能会把它搞砸了。这就是我尝试过的：

```
public Point getLocationOfImage(int[][] pixels){
    Toolkit toolkit = Toolkit.getDefaultToolkit();
    Robot robot;
    Point point = new Point(0, 0);;
    boolean success = false;
    try {
        robot = new Robot();
    } catch (AWTException e) {
        robot = null;
        e.printStackTrace();
    }
    Dimension screenDimensions = toolkit.getScreenSize();
    retry:
    for(int i = 0; i < screenDimensions.width; i++){
        for(int i2 = 0; i2 < screenDimensions.height; i2++){
            //check region
            for(int j = 0; j < 30; j++){
                for(int j2 = 0; j2 < 30; j2++){
                    BufferedImage test = robot.createScreenCapture(new Rectangle(i + j, i2 + j2, 30, 30));
                    toDrawG.drawImage(test, 30, 0, null);
                    try {
                        Thread.sleep(1);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                    if(test.getRGB(i + j, i2 + j2) == pixels[j][j2]){
                        continue;}
                    else{
                        break retry;
                    }
                }
            }
        }
    }
    return point;
    } 
```

所以无论如何这似乎根本不起作用，并且像素[][]来自另一个函数：

```
public static int[][] getPixels(BufferedImage i){
    int temp[][] = new int[i.getWidth()][i.getHeight()];
    for(int n = 0; n < i.getWidth(); n++){
        for(int n2 = 0; n2 < i.getHeight(); n2++){
            temp[n][n2] = i.getRGB(n, n2);
        }   
    }
    return temp;
} 
```

但就我而言，该功能工作正常..有什么我遗漏的吗？我敢肯定这里有人可以在几分钟内发现我的错误..

# node.js - jsdom hashchange 事件

> ID：10054071
> 
> 赞同：5
> 
> 时间：2012-04-07T11:31:03.330
> 
> 标签：node.js, hashchange, jsdom

在[jsdom](https://github.com/tmpvar/jsdom)文档上：

```
document = require('jsdom').jsdom("<html><head></head><body></body></html>");
window   = document.createWindow(); 
```

更改其哈希：

```
document.location.href = '#bang'; 
```

不会触发任何`'hashchange'`事件`window`

有人知道解决方法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:05:47.970

查看[jsdom](https://github.com/tmpvar/jsdom)文档

在其余代码之前尝试此操作：

```
require('jsdom').defaultDocumentFeatures = {
  FetchExternalResources   : ['script'], 
  ProcessExternalResources : ['script'],
  MutationEvents           : '2.0',
  QuerySelector            : false
}

var window = jsdom.jsdom(body).createWindow(); 
```

# iphone - 退出代码 245 xCode 失败

> ID：10054073
> 
> 赞同：-1
> 
> 时间：2012-04-07T11:31:08.427
> 
> 标签：iphone, objective-c, xcode, ios4, build

错误：

> clang：错误：clang 前端命令因信号 11 而失败（使用 -v 查看调用）
> 
> 命令 /Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/clang 失败，退出代码为 245

我研究了，但我找不到如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T12:28:06.893

在您的项目中可能存在相同名称的接口或文件，因此会出现错误

# sql - 如何使用 T-SQL 脚本将数据库用户加入 db_owner 角色？

> ID：10054076
> 
> 赞同：3
> 
> 时间：2012-04-07T11:31:24.353
> 
> 标签：sql, sql-server, tsql, sql-server-2008r2-express

我使用 SQL SERVER 2008 R2 Express。

我正在进行一个新项目，其中的数据库名为`myDatabase`db owner username `myUsernamae`。

我想使用`ALTER ROLE`，而不是`sp_addrolemember`由于 Microsoft 的这条关于 sp_addrolemember (Transact-SQL) 的消息：

> 重要 此功能将在 Microsoft SQL Server 的未来版本中删除。避免在新的开发工作中使用此功能，并计划修改当前使用此功能的应用程序。请改用 ALTER ROLE。

我试过

```
USE [myDatabase]
GO

ALTER ROLE [db_owner] ADD MEMBER [myUsername]
GO 
```

但我不断收到此错误消息：

> 关键字“添加”附近的语法不正确。

什么是正确的语法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-07T11:41:48.433

`ALTER ROLE`是 SQL Server 2012 的新功能，而您使用的是 SQL Server 2008 R2。

我不会太担心`sp_addrolemember`。由 2008R2 Management Studio 生成的脚本使用此过程，因此需要一段时间才能真正逐步淘汰。

# xcode - 为什么 XCode 4 在构建后总是复制我 iPhone 上的所有资源文件？

> ID：10054079
> 
> 赞同：7
> 
> 时间：2012-04-07T11:31:55.477
> 
> 标签：xcode, resources, copy

我知道有很多问题，例如“如何强制 XCode 始终更新资源”等。但我有相反的问题 - 每次我点击“运行”时，XCode 都会复制我的所有资源，无论如何，这需要太多时间。为什么 XCode 不检查资源修改？整个项目和资源都位于已安装的网络卷上。

编辑：好的，我想我明白了。有两个阶段：“将文件复制到产品”和“将产品复制到设备”。看起来 XCode 每次“运行”都会复制并替换设备上的整个应用程序包，并且无法强制 XCode 修改执行设备上已经存在的包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:50:51.070

工作流程如下： 制作产品文件（应用程序！） 用资源填充产品文件（完成应用程序！） 将产品文件下载到本地设备（完成！）

# c# - 如何比较两个字符串的条件？

> ID：10054081
> 
> 赞同：-2
> 
> 时间：2012-04-07T11:32:26.687
> 
> 标签：c#, string, string-comparison

我有一段包含作者姓名，如：

> Gopi, KP 和 Vijay, S. (1997) 计算机控制系统：理论与设计，第三版，Mc Graw-Hill，ND Cliffs，IND。

和这样的另一段：

> 这将导致数值困难（Gopi 和 Vijay，1997）。更重要的是，当过程约束被激活时，闭环控制性能的显着恶化将清楚地看到，因为一种非线性在控制系统中占主导地位（Tenny、Rawlings 和 Wright，2004 年）。

那么如何将这两个段落与多个作者姓名（Gopi＆vijay）与出版年份进行比较。

**注意：**在第一个参考部分中，作者姓名和年份信息的所有格式样式都是不变的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T13:47:31.740

“比较”（在这些字符串之间）提供三种可能的结果：

*   第一个字符串比第二个字符串“更大”
*   第一个字符串比第二个字符串“小于”
*   这两个字符串是“相同的”

“更大”、“更少”和“相同”的含义取决于比较函数。

您可能不想要“比较”。“第二段小于第一段”是什么意思？您可能有兴趣找出文中引用“计算机控制系统”的位置。（如果论文被正确引用，这应该是微不足道的事情......）

如果这是您真正需要的，那么是时候弄清楚作为人类的您将如何处理此任务。

我的第一种方法是采用参考字符串

```
string str = "Gopi, K.P., and Vijay, S. (1997) Computer Controlled Systems"; 
```

并查看其中实际相关的内容

```
string[] substrings = str.Split(new char[] { ' ', ',', '(', ')' }); 
```

引用此“计算机控制系统”来源的段落可能会在其中某处包含“Gopi and Vijay, 1997”。

```
string toFind = substrings[0] + " and " + substrings[5] + ", " + substrings[9]; 
```

然后，我会在我最喜欢的文本查看器中打开文本并搜索“Gopi and Vijay, 1997”。

```
string text = "It will cause numerical difficulty (Gopi and Vijay, 1997). What’s more, when the process constraints are activated, the significant deterioration of closed-loop control performance will be clearly witnessed as kind of nonlinearity is dominating the control system (Tenny, Rawlings, and Wright, 2004).";

int pos = text.IndexOf(toFind); 
```

然后我会在某处存储比赛的位置和一些上下文。

```
string match = "[...]" + text.Substring(Math.Max(pos - 50, 0), Math.Min(text.Length - pos, pos + toFind.Length + 50)) + "[...]"; 
```

然后，我会开始查看[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)，因为我会意识到文本中可能会使用“Gopi”、“Vijay”、“1997”和标点符号的其他组合。

# javascript - 表单操作的工作 ./login 和 onsubmit 关键字

> ID：10054083
> 
> 赞同：0
> 
> 时间：2012-04-07T11:32:51.057
> 
> 标签：javascript, html, jsp

> 请解释下面这段代码，强调 ./login 和 onsubmit 关键字..

```
<form action="./login" onsubmit ="return validatedata()" method="post"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T11:52:05.133

这是语言的`form`标签`HTML`。它说以下内容：

1.  此表单的内容（例如`Text Box`或`Radio Button`或`Combo Box`或其他`HTML`组件值）发送到`./login`url。最好`HttpServletRequest.getContextPath()`用于设置相对路径而不是绝对路径。

2.  `onsubmit ="return validatedata()"``./login`部分说：当用户在将表单提交到url之前单击提交按钮（带有任何标签）时，在`validatedata`函数中执行函数`Java Script`，如果此函数不存在，用户会收到 java 脚本错误（或其他脚本语言）。

3.  method="post" 部分说：此表单使用`POST`method 发送。请参阅[http://www.cs.tut.fi/~jkorpela/forms/methods.html](http://www.cs.tut.fi/~jkorpela/forms/methods.html)了解更多信息。

有关`form`标签的更多信息，请参见：[http ://www.w3schools.com/tags/tag_form.asp](http://www.w3schools.com/tags/tag_form.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T11:48:44.183

这声明了一个 HTML`<form>`元素。提交表单时，它将调用 javascript 函数 validata()。如果函数返回 true，则表单将被提交，如果返回 false，则不会。'./login' 是表单数据的目的地。所以可能有一个页面处理 url `http://<your_site>/<where_you_currently_are>/login`。这还取决于您使用的技术。我不知道您是使用 Struts 之类的框架，还是仅按原样使用 JSP。

# emacs - Emacs：有没有办法我可以获得自定义标签列表 - 并通过它们导航？

> ID：10054091
> 
> 赞同：4
> 
> 时间：2012-04-07T11:33:51.083
> 
> 标签：emacs, tags, bookmarks, cedet, emacs-ecb

假设我有一个带有以下标记（或称其为标签）的文件：

测试.el：

```
;; =====
;; gnus:

some code here

;; ====
;; ECB:

some code here

;; =====
;; code:

some code here 
```

（省略号）

测试.py：

```
# ========
# imports:

some code here

# =====
# defs:

some code here

# =====
# args:

some code here 
```

（在蟒蛇中）

所以我想要一个缓冲区来列出给定缓冲区/文件的此类标签（或称为标记）。它还应该以某种方式促进通过此标签的导航 - 使用鼠标或键绑定（类似于 的`table of contents`功能`rest-mode`）。

我想通过修改一些 etags 函数来解决这个问题。但是找不到（这将是一个解决方案，因为 ECB 在缓冲区中很好地显示了 etags - 正如我想要的那样）。

其他一些解决方案可能一直在使用书签 - 但书签不是特定于文件的。它们是系统特定的。那是在书签列表中您拥有所有书签-而我只想获取给定文件的书签。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T02:56:45.773

使用 Emacs Lisp 示例代码，我解决了以下问题，可以将其添加到 emacs-lisp-mode 的挂钩中，并且应该很容易针对其他语言进行调整。

```
(make-local-variable 'outline-regexp)
(setq outline-regexp ";; =+\n;; ")
(make-local-variable 'outline-heading-end-regexp)
(setq outline-heading-end-regexp ":\n")
(outline-minor-mode 1) 
```

您现在可以使用标准大纲模式，它具有如下键绑定：

```
C-c @ C-p  -> prevous header
C-c @ C-n  -> next header

C-c @ C-t  -> hide code between headers
C-c @ C-a  -> show all the code between headers 
```

如果您暂时隐藏标题，您将获得缓冲区的轮廓，移动到您想要的位置，然后再次显示代码。

对于 python，只需替换 ;; 在带有# 的正则表达式中。

`outline-mode`随 Emacs 一起提供，如果您需要更多信息，它会记录在那里。

# android - android：暂停（关闭）应用程序，使其在相同状态下重新打开

> ID：10054095
> 
> 赞同：0
> 
> 时间：2012-04-07T11:34:48.600
> 
> 标签：android, android-activity, destroy, onkeydown

我有一个记录一些数据（时间、用户的 GPS 位置等）的应用程序。现在我想实现这个：当用户按下返回时，我会弹出一个警报对话框，其中包含“暂停”或“退出”两个选项。我可以覆盖 onKeyDown 方法来做到这一点。现在“退出”应该意味着关闭应用程序并停止数据记录。“暂停”应该意味着用户可以关闭应用程序几分钟，然后在他从完全相同的位置重新打开时继续。

我做了一些研究，但我在很多方面感到困惑：

1）我能以某种方式保证活动被暂停而不被破坏吗？此外，finish() 会破坏活动。有什么方法可以以编程方式暂停它吗？

2）如果只调用了onPause，那么再次打开应用程序时不应该从onResume开始吗？所以所有的计数器（我通常在 onCreate 方法中设置为零）应该保持在最后一个状态？

3）一种明显的方法是将计数器等的整个状态保存在设备数据库中，然后在用户重新打开时恢复它。但它更痛苦，而且最重要的是这是一个好习惯？

提前感谢您的澄清！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T11:50:14.693

你不能保证活动永远不会被破坏，因为如果系统需要内存或者它会自动关闭一些应用程序，但你可以将你的应用程序状态保存在变量“savedinstancestate”中，你可以保存在持久性中数据库，或在 SD 中。

如果你想暂停应用程序，你应该调用“onPause”方法，然后调用“onResume”方法，如果你这样做，你将能够从最后一个状态重新启动你的应用程序。

如果你想停止你的应用程序，只调用方法“onStop”

我不是 Android 的大师，但我希望这个答案可以对你的问题有所了解；）

# javascript - 将 onclick 值返回给 JavaScript 函数

> ID：10054097
> 
> 赞同：3
> 
> 时间：2012-04-07T11:34:56.240
> 
> 标签：javascript, html

我创建了一个带有调用 JavaScript 函数的 onclick 事件的锚点。JavaScript 函数返回一些值。我想在另一个 JS 函数中使用该值。

例如 `loading()`，将返回一些值，该值将传递给另一个 js 函数。如何捕获和存储返回值，然后将此值传递给该函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T11:39:27.047

你能简单地用内部函数调用外部函数吗？

```
function outerFunc(a)
{
  alert(a);
}

function innerFunc()
{
  return 'test';
}

onclick="outerFunc(innerFunc());" 
```

或者，如果您需要在另一个事件中使用返回值，请设置一个变量。

```
var retval;
function outerFunc()
{
  if(retval) alert(retval);
}

function innerFunc()
{
  retval = 'test';
  return retval;
}

onclick="return innerFunc();" 
```

在另一个 onclick 事件中

```
onclick="return outerFunc();" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T13:19:56.740

a）使用[全局变量](http://snook.ca/archives/javascript/global_variable)，例如（[也](https://stackoverflow.com/questions/4600508/how-do-i-pass-variables-between-functions-in-javascript)）

```
var passVar=null;

function A(){
  //set value
  passVar='hello';
}

function B(){
  //get value 
  alert(passVar);
} 
```

b) 如果您的函数在另一个使用存储值的页面上，您可能正在使用 setItem() 、getItem() 和浏览器的更多高级功能来使用 b [rowser 会话存储](http://www.xul.fr/en/html5/sessionstorage.php) 机制

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T13:20:28.583

您在评论中提到要保存以备后用。您可以使用 JavaScript 函数是闭包这一事实，因此可以访问在同一范围内声明的局部变量：

```
var clickedValue; // No need to set a value here, just declare is

myAnchor.addEventListener('click',function(evt){
  // Call the other function, setting the 'this' scope to be the anchor
  // The scope of the variable set it the one above
  clickedValue = someFunction.call(myAnchor,evt);
},false);

/* later on… */

otherFunction(clickedValue); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-07T11:38:36.030

像这样的东西？

```
<a onClick="loading(myFunction());"> 
```

如果`myFunction()`是您的原始 onClick 代码，它将被传递给`loading`之后。

# windows - 从批处理文件执行时，ICACLS 行为怪异

> ID：10054098
> 
> 赞同：0
> 
> 时间：2012-04-07T11:35:05.263
> 
> 标签：windows, batch-file, windows-server-2008, cmd, windows-7-x64

我在 Windows 2003 及更早版本中最错过的功能之一是能够将相同的 NTFS 权限分配给多个文件夹。Windows 2008 中不再提供此功能，我需要使用 icacls。这是我的问题。如果我输入：

```
 FOR /F %i IN (D:\Sample\Sample.txt) DO ICACLS /grant "IIS_IUSRS":(OI)(CI)F 
```

直接进入命令提示符，一切正常，说成功处理了 1 个文件；处理 0 个文件失败。但是，如果我将上述命令存储到 .bat 文件中，并执行该批处理文件，则无法执行

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T12:35:46.657

在命令行中，您可以在 FOR 变量前面加上一个百分比。在批处理文件中，您必须在 FOR 变量前面加上两个百分比 - `%%i`。

# html - zend_form 装饰器内容

> ID：10054100
> 
> 赞同：1
> 
> 时间：2012-04-07T11:35:14.450
> 
> 标签：html, forms, zend-framework, decorator

嘿伙计们，我在添加的 html 标记中添加文本时遇到问题

我有这个：

```
public $elementDecorators = array(
    'ViewHelper',
    'Errors',
    array('HtmlTag', array('tag' => 'span', 'class' => 'checkbox','description' => 'Club')),

public function init() {
    $this->setMethod('post');
    //$this->setAttrib('action','index');
    $this->addElement('checkbox', 'Club', array(
        'decorators' => $this->elementDecorators,
    ));
//omitted code 
```

输出：

```
<span class="checkbox" markup="Club" description="Club">
<input type="hidden" name="Club" value="0"><input type="checkbox" name="Club" id="Club"  value="1"></span> 
```

我需要做的是有这个：

```
<span class="checkbox" markup="Club" description="Club">This is club
<input type="hidden" name="Club" value="0"><input type="checkbox" name="Club" id="Club"  value="1"></span> 
```

我认为这不应该那么难，但我想不出一个简单/好的方法来做到这一点。有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T12:24:49.240

不幸的是，您无法将内容添加到 HtmlTag 装饰器。您需要自己编写或使用回调装饰器 - 检查此答案[https://stackoverflow.com/a/9812186/1278879](https://stackoverflow.com/a/9812186/1278879)

# android - Android：从我的应用程序打开 PPT

> ID：10054101
> 
> 赞同：0
> 
> 时间：2012-04-07T11:35:16.083
> 
> 标签：android

我想在我的应用程序中打开一个 .ppt 文件。我已经安装了 Documents To Go 应用程序。但是，警报对话框显示“没有应用程序可以执行此操作”。

我也试过 ACTON_SEND 但同样的消息。请帮我。

```
filename = "/sdcard/test.ppt";
    File file = new File(filename);
    Uri path = Uri.fromFile(file);
    Log.i(TAG, "aa file "+URLConnection.guessContentTypeFromName(filename));
    final Intent intent = new Intent(Intent.ACTION_VIEW, path);
    intent.setType(URLConnection.guessContentTypeFromName(filename));
    startActivity(Intent.createChooser(intent, "Open with..")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T23:29:27.687

用于`Intent.setDataAndType()`同时设置 Uri 和 mime-type；只需调用即可`setType()`清除您在构造函数中设置的 Uri。

# ruby - validates_uniqueness_of 通过两个字段

> ID：10054102
> 
> 赞同：6
> 
> 时间：2012-04-07T11:35:27.093
> 
> 标签：ruby, mongodb, mongoid

我有模型：

```
class Action
  include Mongoid::Document
  field :name, type: String
  field :assignment_date, type: Date
  ...

  index(
    [
      [ :name, Mongo::ASCENDING ],
      [ :assignment_date, Mongo::ASCENDING ]
      ], 
      unique: true
  )

  validates_uniqueness_of [ :name, :assignment_date ] 
```

但是，当我尝试插入具有相同名称但不同assigned_date 的2个不同文档时，我收到错误消息：

```
Mongoid::Errors::Validations - Validation failed - Name is already taken, Assignment date is already taken.: 
```

我尝试了两个版本：

```
 validates_uniqueness_of [ :name, :assignment_date ] 
```

和

```
 validates_uniqueness_of :name, :assignment_date 
```

如果我评论这条线一切正常。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-07T12:04:50.957

蒙古族：

```
validates_uniqueness_of :name, :scope => :assignment_date 
```

来自文档：请注意，对于嵌入式文档，这只会检查该字段在父文档的上下文中是否唯一，而不是整个数据库。

[http://mongoid.org/docs/validation.html](http://mongoid.org/docs/validation.html)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-07T11:40:53.300

根据[此](http://guides.rubyonrails.org/active_record_validations_callbacks.html#uniqueness)导轨指南，您可以执行以下操作：

```
validates :assignment_date, :uniqueness => { :scope => :name } 
```

# facebook-opengraph - 为什么我在 Facebook 的新闻提要中看不到打开图表操作？

> ID：10054105
> 
> 赞同：1
> 
> 时间：2012-04-07T11:36:22.203
> 
> 标签：facebook-opengraph, facebook-ios-sdk

我正在发布一个名为“推荐”的 Facebook OpenGraph 操作。我可以在应用程序的活动中看到这一点，但在朋友的新闻提要中看不到。是什么原因？是不是因为动作没有发布到 Facebook（仍在开发中）？

# ios - 如何让“apple-mobile-web-app-capable”不丢失会话？

> ID：10054107
> 
> 赞同：6
> 
> 时间：2012-04-07T11:36:31.330
> 
> 标签：ios, browser, safari, webkit, iphone-standalone-web-app

我有一个网络应用程序。

```
<meta name="apple-mobile-web-app-capable" content="yes"> 
```

我把这个放在那里。

我添加到主屏幕。

但是，我意识到关闭网络应用程序后我总是需要重新登录。

如何让它保持会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:58:54.387

有一个简单的答案，但到目前为止，我无法在 Apple 的官方文档中找到任何参考。

诀窍是这样做：

```
// Start or resume session
session_start(); 

// Extend cookie life time by an amount of your liking
$cookieLifetime = 365 * 24 * 60 * 60; // A year in seconds
setcookie(session_name(),session_id(),time()+$cookieLifetime); 
```

如果您像这样延长会话 cookie 的生命周期，Safari 将保留会话 cookie，甚至允许在您的 Web 应用程序的“已安装主屏幕”版本和通过 Safari 本身的正常访问之间共享会话。

如需更详细的讨论，请查看我对这个问题的回答：

[在 iPhone 上的 Web 应用程序中维护 PHP 会话](https://stackoverflow.com/questions/9998900/maintain-php-session-in-web-app-on-iphone/14594908#14594908)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-30T10:46:33.707

当我必须访问外部应用程序时，我使用静态类和静态变量（例如字典（字符串，对象））来保存数据。如果你使用 FormAuthentication，你会注意到

```
User.Identity.IsAuthenticated = true 
```

但会话不存在。您可以使用“User.Identity.Name”作为键来获取字典中的数据。

这适用于 ASP.Net MVC3

# c# - 配置 ACS

> ID：10054109
> 
> 赞同：-1
> 
> 时间：2012-04-07T11:36:56.500
> 
> 标签：c#, azure, acs

我有一个电子商务网站的场景，我希望在用户将商品添加到购物车后继续订购商品之前，提示用户登录 Google。现在，挑战是仅在特定操作点而不是在用户访问网站时使用 windows azure 的 ACS 配置身份验证。我们如何配置领域设置和其他相关项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T18:26:11.800

我将[这种非常简单的方法](http://www.leastprivilege.com/MixingFormsAndTokenAuthenticationInASingleASPNETApplication.aspx)用于 ASP.NET MVC。实际上，我将 MVC 模式下的 N2 CMS 与 ACS 身份验证混合在一起。我的场景与您的完全一样 - 我只希望在站点的某些区域（实际上只有控制器的某些操作）进行声明身份验证。

如果您的应用程序是 ASP.NET MVC，那么按照该[博客文章](http://www.leastprivilege.com/MixingFormsAndTokenAuthenticationInASingleASPNETApplication.aspx)中的详细信息来实现非常容易。对于经典的 ASP.NET Web 窗体似乎更棘手，不幸的是我没有尝试过，因为我的解决方案是 ASP.NET MVC。

# c# - 另存为项目

> ID：10054111
> 
> 赞同：0
> 
> 时间：2012-04-07T11:37:35.603
> 
> 标签：c#, wpf, save

如何存储（保存）变量，以便在关闭并再次运行程序后可以使用它？我不能使用 saveFileDialog 因为它是二维数组。其他程序有自己的扩展名。我也可以自己做扩展吗？诸如“将项目另存为...”之类的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T11:51:19.787

如果要将某些对象保存到磁盘，则需要为数据设计某种文件格式，或者使用现有的通用格式之一。

在 .Net 中，可能最简单的方法是使用[二进制格式化程序](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.binary.binaryformatter.aspx)来执行此操作：

```
void Save(SomeType obj, string fileName)
{
    using (var stream = File.OpenWrite(fileName))
    {
        var formatter = new BinaryFormatter();
        formatter.Serialize(stream, obj);
    }
} 
```

`obj`对象及其引用的所有对象都必须是可序列化的。[大多数原始类型已经是可序列化的，您可以使用`[Serializable]`属性](http://msdn.microsoft.com/en-us/library/system.serializableattribute.aspx)使自己的类型可序列化。

该`Load()`方法将类似，除了它会使用`File.OpenRead()`and `formatter.Deserialize()`。

如何选择文件名取决于您，但您当然可以使用`SaveFileDialog`它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T12:08:43.247

中提供了不同的序列化类型`.NET`。他们每个人都有其优点和缺点。因此，您应该选择最适合您需求的那个。值得花点时间至少了解一下这些内容。

例如：

最常见的方法是二进制序列化（由 svick 提供），它速度快且内存占用少，但在可伸缩性方面肯定不如其他方法灵活。因为标准`.NET`序列化也保存了类型信息，这导致与实际保存的*类型*的强耦合，而不仅仅是数据。

一个答案很难解释一切，所以我建议你看这里

[.Net 中的序列化和序列化类型](http://mr-ponna.com/Article/23/Serialization-and-Types-of-Serialization-in-Net/)

祝你好运

# ruby - 如何拆分大型 HAML 模板

> ID：10054114
> 
> 赞同：2
> 
> 时间：2012-04-07T11:37:46.250
> 
> 标签：ruby, sinatra, haml

我有非常大的 HAML 模板。我只是想知道是否有可能将其拆分为单独的 HAML 文件并将它们包含在原始文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T14:06:34.157

[http://sinatra-book.gittr.com/#implementation_of_rails_style_partials](http://sinatra-book.gittr.com/#implementation_of_rails_style_partials)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T14:50:35.013

请注意，从 Sinatra 1.1 开始[，您不再需要“部分”帮助](https://github.com/sinatra/sinatra/blob/master/CHANGES#L443)程序，因为该`haml`方法将自动检测您是否从模板中调用它并`layout:false`相应地添加选项。

* * *

我使用的辅助方法比@Nash 链接的简单实现更强大，但比它们包含的“完整”方法更简单：

```
def partial( page, variables={} )
  haml page, {layout:false}, variables
end 
```

像这样使用它：

```
#comment= partial :comment, user:@user, comment:@comment 
```

这是我用于新 Sinatra 项目的[Riblits shell 的一部分，](https://github.com/Phrogz/riblits) [Monk](http://rubygems.org/gems/monk)可以像这样轻松使用：

```
# Before creating your project
monk add riblits git://github.com/Phrogz/riblits.git

# Inside your empty project directory
monk init -s riblits 
```

# api - 通过 Flash 将曲目上传到 Soundcloud，无需 FileReference

> ID：10054117
> 
> 赞同：1
> 
> 时间：2012-04-07T11:37:57.727
> 
> 标签：api, actionscript, file-upload, soundcloud

我想使用 Soundcloud-AS3-API (https://github.com/dorianroy/Soundcloud-AS3-API) 将曲目上传到 Soundcloud。Api 按预期工作，当您使用 FileReference 并从计算机中选择要上传的曲目时，但我的 Flash 项目中已经有了音频数据，因为我使用麦克风录制一些东西。所以我上传的声音文件格式是麦克风录音中的 ByteArray。

**问题**：是否可以在没有 FileReference 的情况下上传声音，但使用“标准”URLLoader 或其他任何基于 Flash 的东西？

到目前为止，我的所有尝试都失败了，但我不知道这是否只是参数调整错误，如果没有 FileReference 或其他一些“Multipart-Uploader”，Soundcloud 声明是否需要。如果它有效，下一个问题将是获取任何“进度”事件，因为 URLLoader 没有发送......

有人对此有任何经验或任何想法吗？

提前致谢，

奥利弗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:42:37.063

您应该使用更简单的 JS SDK 进行授权，然后在它的帮助下获取身份验证令牌：http: [//developers.soundcloud.com/docs/javascript-sdk](http://developers.soundcloud.com/docs/javascript-sdk)

至于上传本身，您可能想为此尝试 MultipartURLLoader 类，它至少可以使用几分钟的录音。 [http://code.google.com/p/in-spirit/wiki/MultipartURLLoader](http://code.google.com/p/in-spirit/wiki/MultipartURLLoader)

我猜我可能不知道 Adob​​e 官方制作的一些替代品。

# python - ValueError：python格式的零长度字段名称

> ID：10054122
> 
> 赞同：67
> 
> 时间：2012-04-07T11:38:40.913
> 
> 标签：python, format

> **可能重复：**
> [Python 3.0、3.1、3.2 中的“ValueError：格式中的零长度字段名称”错误](https://stackoverflow.com/questions/5446964/valueerror-zero-length-field-name-in-format-error-in-python-3-0-3-1-3-2)

我花了几个小时试图解决这个问题，但无济于事。我读[了这个指南](http://docs.python.org/release/3.1.3/library/string.html)。我还没有找到任何示例如何做我需要的。

当我运行脚本时，出现此错误（部分省略）：

```
Traceback (...):
   [...]
   output.write("{: > 026,.18e} {: > 026,.18e}\n".format(x,y))
ValueError: zero length field name in format. 
```

代码是用 python 2.6 或 2.7 编写的，但我运行的是 python 3.1。我需要如何更改输出格式才能正常工作？

```
def f(x,y,a = 0.01):
    return y/(a+x)-y**3

def ekspEuler(N,dat):
    output = open(dat,"w")
    h = 3.0/N
    x,y = 0,1 #zac.pogoj

    for i in range(1,N+2):
        output.write("{: > 026,.18e} {: > 026,.18e}\n".format(x,y))
        y += h*f(x,y)
        x = i*h
    output.close() 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2012-04-07T11:53:27.810

您可能正在运行旧的 Python 版本，而不是 3.1。在 Python 2.6 中，您需要格式规范中的索引，如下所示：

```
"{0} {1}\n".format(x,y) 
```

将您的 Python 版本更新到最新版本，最好是 2.7 或 3.2，以解决问题。根据文档，省略数字索引[应该在 Python 3.1 中工作](http://docs.python.org/dev/library/string.html#format-string-syntax)：

> 在 3.1 版中更改：可以省略位置参数说明符，因此“{} {}”等效于“{0} {1}”。

# javascript - 为什么命名空间在 JavaScript 中被认为是不好的做法？

> ID：10054125
> 
> 赞同：4
> 
> 时间：2012-04-07T11:39:14.860
> 
> 标签：javascript, namespaces

我被告知不应使用命名空间，因为它们会“污染”全局范围。我想知道有什么替代方案？

当我想为网站定义实用程序函数和/或常量时，一种简单的方法是通过命名空间定义它们，这样对全局范围的损害仅限于一个对象。

如果命名空间是不好的做法，那么会想到几个问题：

1.  为什么这是不好的做法？
2.  该声明的范围是什么（网络应用程序/动态网站/静态网站等）？
3.  有哪些替代方案？

*[[这个问题是在一篇关于使用 extend.js 的好处的帖子上](https://stackoverflow.com/questions/10049616/whats-the-benefit-in-using-extend-js)开始讨论的结果。]*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-07T11:56:15.690

> 为什么这是不好的做法？

命名空间本身很糟糕，因为它是一个不必要的概念。

拥有具有属性和方法的对象是可以接受的。拥有一个类似于“命名空间”的“模块”令牌也很好，但其含义是每个文件都有一个“模块”令牌，其中包含所有属性和方法。这与“命名空间”不同，因为它仅在单个文件中创建/更改，并且不作为全局令牌公开。

> 该声明的范围是什么（网络应用程序/动态网站/静态网站等）？

所有 ECMAScript，从不创建新的全局令牌

> 有哪些选择？

而不是拥有命名空间，您应该支持多个“文件本地”令牌。这意味着每个文件/“模块”都应该包装在一个闭包中，并且您应该可以访问这个闭包内的多个局部变量。

全局变量也很糟糕，因为你根本不需要它们。避免全局变量的方法是将所有内容包装在闭包中，并在加载外部 javascript 文件的方式上保持智能。

零全局模块加载器示例

*   [节点浏览](https://github.com/substack/node-browserify)
*   [网络制作](https://github.com/medikoo/modules-webmake)
*   [模块8](https://github.com/clux/modul8)

进一步阅读：

*   [没有全局变量的模块化](http://clux.github.com/modul8/docs/modularity.html)
*   [CommonJS 模块](http://clux.github.com/modul8/docs/xcjs.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T11:52:37.860

我无法想象为什么命名空间会是一件坏事。除非有一些我不知道的特定于 JavaScript 的命名空间定义。

我目前正在开发一个小型库，所有内容都包含在一个顶级对象（命名空间？）中。我没有在窗口或内在类型上放任何东西；如果您需要我的图书馆中的某些东西，它可以在`kilo`对象中找到。

对我来说，拥有这个“命名空间”是一种**很好**的做法，因为它可以让我很快知道我是否正在调用库中的方法。无需重写`window.alert`可能与页面上加载的另一个库发生冲突的方法；仅`kilo.alert`用于自定义版本（这是一个人为的示例，但我希望它能够说明问题）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T11:44:41.253

我个人认为那些说你不应该*污染*全球范围的人没有正确定义“污染”。例如，您可以在某种程度上在本机`Math`对象中看到这一点。我知道的所有其他编程语言都将所有数学函数都作为普通函数，但 JS 没有。但是，如果您将其发挥到极致，`core.dialog.alert`例如，可以使用一个简单的警报框。

我喜欢将我所有的代码封闭在闭包中，以保持变量干净。*但是，我的主 JS 脚本文件在全局范围内*定义了一堆实用函数，例如自定义`Alert()`、或`AJAX()`或其他广泛使用的函数。如果我要经常使用它们，我不想用命名空间调用来膨胀文件。而且由于我在闭包中定义了所有变量，因此不会有意外覆盖函数的风险（我可能会在闭包本身中这样做，但它对全局范围没有影响）。

总的来说，命名空间被高估了。只需编写您的代码，不要为每个`window`属性哭泣。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T11:58:36.850

JavaScript 中的“命名空间”实际上只是具有命名属性的对象。在其他 OO 语言（即 C++、C# 等）中，我认为您不需要以下内容：

C＃ -

```
public static class MyAppName {}
public static class MyArea {}
public static class MySubArea {}

public static class Test {
  public string Property1 { get { return "test"; }}
} 
```

只是这样你就可以拥有

```
MyAppName.MyArea.MySubArea.Test.Property1; 
```

所以基本上，因为 JS 实际上并不支持命名空间，所以人们发明了一种 hack 来模拟命名空间，这使得编写如下内容变得“酷”：

```
myAppSpace.mySubArea.myObject = blah... 
```

# java - 如何通过 Web 服务在 2 个项目之间使用函数的类。？

> ID：10054128
> 
> 赞同：0
> 
> 时间：2012-04-07T11:39:33.250
> 
> 标签：java, web-services

情况是这样的：我有 3 个项目，一个 java 项目，其中包含一些带有一些变量、过程和函数的类；一个 Web 项目和一个 Web 服务项目，它连接其他 2 个项目（Web 和 Java）。

我无法沟通 web 项目和 java 类项目，只能通过 web 服务项目。

我想使用java类项目的功能和程序。因此，在 Web 服务中，我导入了 java 项目并创建了一个 Web 服务函数来执行某些操作并返回一个列表。在 web 项目中，我可以从 Java 项目创建一个对象，以将 web 项目与 web 服务项目通信，但是当我想在 web 项目中使用该类的函数和过程或变量时.....我不能这样做，因为我认为生成的 WSDL 不包含该类的功能。

我该如何解决？

太感谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T16:38:59.963

使用您需要的处理程序创建另一个 Web 服务，或者将该过程添加到您已经使用的 Web 服务中。

# php - CakePHP 给了我内存耗尽的致命错误

> ID：10054130
> 
> 赞同：0
> 
> 时间：2012-04-07T11:40:02.413
> 
> 标签：php, cakephp, memory, memory-management, fatal-error

我得到：

`Fatal error: Allowed memory size of 134217728 bytes exhausted (tried to allocate 18635837 bytes) in /Users/[...]/cake/libs/cache/file.php on line 135`

而且我不明白什么可以吃掉这么多内存。

我有很大的变量，其中包含大量的数组和数据。我的控制器以这样的方式结束：

```
// RENDER
$this->set(compact('var1', 'var2'));
debug(memory_get_usage()); // prints out: 33997240 
```

33MB 远不及 134MB

如果我把`debug(memory_get_usage());`它作为视图的第一行，我仍然会得到那个致命错误，这意味着问题不在视图的循环中。它似乎也不在控制器中，而是在控制器和视图之间。

如何调查问题所在并解决问题？

编辑<整个函数的代码：

```
function assignment_results($aid=null, $uid=null){
    if($aid==null){
        $this->Session->setFlash(__('Sorry but my butt got booted. 1907125790'));
        $this->redirect($this->Misc->redirectHome());
    }
    $assignment = $this->EduAssignment->getById($aid);
    // Get User IDS
    if($uid==null){
        $cus = $this->EduCourseUser->getStudentsForCourseId($assignment['EduAssignment']['edu_course_id']);
        foreach ($cus as $cu){
            $uids[]=$cu['EduCourseUser']['user_id'];
        }
    }else{
        $uids[]=$uid;
    }

    // GET WORDING
    $course = $this->EduCourse->getById($assignment['EduCourse']['id']);
    $wt = $this->WritingTranslation->getById($assignment['EduAssignment']['writing_translation_id']);
    $writing['Writing'] = $wt['Writing'];

    if($writing['Writing']['type']== 'song' || $writing['Writing']['type']== 'video')
        $this->paginate['limit'] = 2000;

    $wording = $this->paginate('Word', array('Word.writing_translation_id'=>$wt['WritingTranslation']['id']));
    $word_ids = array();
    foreach($wording as $w){
        $word_ids[]=$w['Word']['id'];
    }

    // CLICKS
    $this->Click->unbindModel(array('belongsTo' => array('Word' )));
    $clicks = $this->Click->getForAssignmentUserIds($assignment['EduAssignment']['id'], $uids);

    // Assign clicks to words
    foreach ($wording as &$wg){
        $num = 0;
        foreach ($clicks as $cl){
            if($wg['Word']['id']==$cl['Click']['word_id']){
                $num++;
            }
        }
        $wg['Word']['click_number'] = $num;
    }

    // List of words by how many times clicked:
    $wording_sorted = $wording;
    // echo(memory_get_usage());
    uasort($wording_sorted, array('TeachController', '_cmp'));
    // debug(memory_get_usage());

    // RENDER
    $this->set(compact('writing', 'wording','wording_sorted', 'assignment', 'course'));
    // debug(memory_get_usage());
}
function _cmp($a, $b){
    return $a['Word']['click_number']<$b['Word']['click_number'];
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T14:12:26.067

您收到此错误的最可能原因是因为您同时处理大量数据，并且在您处理完数据后从未发布过。这基本上是一个优化问题。

鉴于您在那里将限制设置为 2000，我假设您正在使用大型数据库，而高值可能是唯一的问题。但是，我将重点介绍其他一些突出的东西。

首先，请注意您在多个位置从数据库中获取数据。

```
$assignment = $this->EduAssignment->getById($aid);

$cus = $this->EduCourseUser->getStudentsForCourseId($assignment['EduAssignment']['edu_course_id']);

$course = $this->EduCourse->getById($assignment['EduCourse']['id']);

$wt = $this->WritingTranslation->getById($assignment['EduAssignment']['writing_translation_id']);

$clicks = $this->Click->getForAssignmentUserIds($assignment['EduAssignment']['id'], $uids); 
```

在所有这些查询之间，您将查询的子集存储在新数组中，这使我相信您的模型函数返回的数据比您实际需要的数据多。这是您的代码中的一个示例：

```
 foreach ($cus as $cu){
     $uids[]=$cu['EduCourseUser']['user_id'];
 } 
```

这是另一个似乎完全和完全没有必要的，它完全可以与`$wt`.

```
$writing['Writing'] = $wt['Writing']; 
```

最后，您取`$wording`，并将其分配给`$wording_sorted`，进行排序。我看到您将两者都传递给视图，但是您是否同时*需要*已排序和未排序的表单？我不能告诉你你应该在那里做什么，但请考虑你的选择。

您可以采取以下措施来帮助解决其中的一些问题：

**完成后销毁对数据的引用：**在使用完查询结果后取消设置查询结果，因为它们无缘无故地占用内存。这是一对：

```
// after foreach($cus as $cu) { ... }
unset($cus);

// after foreach($wording as $wd) { ... }
unset($clicks); 
```

当然，您正在将其他内容传递给您的视图，因此取消设置这些内容会破坏事情。

**删除不必要的分配：**我已经突出显示了一个实例，其中无故分配了另一个变量。我看不出不这样做的理由：

```
// $wt = $this->WritingTranslation->getById(...)
$writing = $this->WritingTranslation->getById(...);

// change remaining references to 'wt' to 'writing' 
```

**确保您没有获取不相关的数据**：由于 Cake 格式化查询结果的方式，很难说出您正在使用什么，但是如果模型中的方法返回所有列中的所有列，则您的模型是优化的主要目标表及其所有关联，当您只需要一两个时。如果可以的话，让你传递给 Cake 模型的条件更具体。

**使用 Cake 的模型`count`方法：**您在一个地方计算点击次数，方法是获取所有点击次数并使用嵌套迭代器。当你只是在一个整数之后时，你不需要很多数据。考虑创建另一个模型方法：

```
// Click model
function countWordClicks($word_id) {
    return $this->find('count', array('word_id' => $word_id)) ?: 0;
}

// the following thus becomes redundant
$clicks = $this->Click->getForAssignmentUserIds($assignment['EduAssignment']['id'], $uids);

foreach ($wording as &$wg){
    $num = 0;
    foreach ($clicks as $cl){
        if($wg['Word']['id']==$cl['Click']['word_id']){
            $num++;
        }
    }
    $wg['Word']['click_number'] = $num;
}
// unset($clicks);

// and can be replaced with
foreach ($wording as &$wg) {
    $wg['Word']['click_number'] = $this->Click->countWordClicks($wg['Word']['id']);
} 
```

（我无法对此进行测试，但它应该为您指明正确的方向。）

这引入了更多的数据库查询，但计数器缓存字段可能会派上用场来优化它。

**使您的限制更加严格：**您的限制设置为 2000。我不知道这是真的很小还是真的很高，但如果这意味着您*每页*显示 2000 个结果，只需将其减少到小于 100 就*可以*解决您的问题问题甚至不必做任何其他事情。

如前所述，这都是优化的东西，所以你的代码可能没有错误或损坏，只是需要一些微调。

# .htaccess - 如何防止旧 URL 和 ? 通过 htaccess 包含在 301 重定向 URL 中

> ID：10054131
> 
> 赞同：0
> 
> 时间：2012-04-07T11:40:10.880
> 
> 标签：.htaccess, redirect

总之，我们目前的 htaccess 文件存在问题。301 重定向将通过新描述的 URL，但此外，新 URL 后跟一个？和旧网址。我们怎样才能摆脱 ? 和以前的 URL，因此它们不会显示为结尾。

我们在网上找到的有关此问题的示例似乎都不起作用。任何人都可以提供一些建议吗？我们可以使用 RewriteRule 来阻止这种情况发生吗？

这是htaccess文件的摘要

```
# begin redirects
# There are redirects of a number of old pages. Here's a sample of them.

redirect 301 /index.html http://www.petersommer.com/
redirect 301 /escorted-archaeological-tours/turkey/western-lycia-cruise-july/ http://www.petersommer.com/escorted-archaeological-tours/

RewriteRule ^gallery/main.php$  http://www.petersommer.com/gallery/ [R=301,L]
RewriteRule ^pdf/how_to_book.pdf$  http://www.petersommer.com/pdf/how-to-book-holiday.pdf [R=301,L]

# end redirects

<IfModule mod_rewrite.c>
    RewriteEngine On

    Options +FollowSymLinks
    DirectoryIndex index.php
    RewriteEngine On

    RewriteCond $1 !^(images|system|themes|pdf|favicon\.ico|robots\.txt|index\.php) [NC]
    RewriteRule ^\.htaccess$ - [F]

    RewriteRule ^favicon\.ico - [L]

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ /index.php?/$1 [L]
</IfModule>

DirectoryIndex index.php 
```

不幸的是，我不确定什么不起作用或需要做些什么来修复它。我认为它必须是重写规则中的某些内容，或者我们需要添加一些重写规则来修复它。

不幸的是，所有重定向都添加了一个？和旧 URL 到新重定向 URL 的末尾。例如：

to的重定向 301 通过 to`/tours2006.html`而 不仅仅是`/escorted-archaeological-tours/``/escorted-archaeological-tours/?/tours2006.html``/escorted-archaeological-tours/`

所有人都遵循相同的模式 - 不幸的是。

如果您能看到重写规则中的任何故障，或者能确定我们需要添加的内容，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T12:44:59.713

您可能已经注意到，这两个重定向表示为`RewriteRule`按预期工作，而这两个`redirect`指令附加旧路径。

**我相信会发生**

*   mod_rewrite 启动，重定向`gallery/main.php`，`pdf/how_to_book.pdf`如有必要，然后重写所有其他 URL`/index.php?/the_requested_path`并结束（L 标志）。注意查询参数

*   mod_alias 轮到它，看到它必须重定向 /index.html 例如，它按照指示重定向。但是，默认情况下，Apache 使用附加的查询参数进行重定向，在本例中为 ?/index.html

**你能做什么**

*   附加一个？在重定向指令的末尾（适用于 RewriteRule，未在重定向上测试）

    ```
    redirect 301 /index.html http://www.petersommer.com/? 
    ```

*   在重写规则中转换您的重定向指令

    ```
    RewriteRule ^index.html$ http://www.petersommer.com/ [R=301,L]
    RewriteRule ^escorted-archaeological-tours/turkey/western-lycia-cruise-july/?$ http://www.petersommer.com/escorted-archaeological-tours/ [R=301,L] 
    ```

# c# - 获取位图文件名

> ID：10054136
> 
> 赞同：8
> 
> 时间：2012-04-07T11:40:49.510
> 
> 标签：c#, bitmap, save, filenames

我使用下面的这一行来创建我的位图：

```
Bitmap b = new Bitmap(@"C:\<file name>"); 
```

修改此位图后，我想将其保存为以下行：

```
b.Save(@"C:\\<other file name>") 
```

我的问题是 - 如何从属性中获取文件名位图。
简而言之，我需要使用与我启动它的名称相同的名称保存位图。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-07T13:03:50.310

赞成的答案会让你陷入困境。从文件加载位图会锁定文件。如果不先处理位图，您将无法将其保存回来。这是一个先有鸡还是先有蛋的问题，如果不克隆位图就无法解决。这本身有点棘手，Bitmap.Clone() 方法是一个优化版本，它使用相同的内存部分，首先将锁放在文件上。所以实际上并没有释放锁。

这是一个小类，负责创建深度克隆并记住原始位图的路径和格式：

```
 class EditableBitmap : IDisposable {
        public EditableBitmap(string filepath) {
            using (var bmp = new Bitmap(filepath)) {
                this.bitmap = new Bitmap(bmp);
                this.bitmap.SetResolution(bmp.HorizontalResolution, bmp.VerticalResolution);
            }
            this.path = System.IO.Path.GetFullPath(filepath);
            this.format = bitmap.RawFormat;
        }

        public Bitmap Bitmap { get { return bitmap; } }

        public void Save() {
            bitmap.Save(path, format);
            this.Dispose();
        }

        public void Dispose() {
            if (bitmap != null) {
                bitmap.Dispose();
                bitmap = null;
            }
        }
        private Bitmap bitmap;
        private System.Drawing.Imaging.ImageFormat format;
        private string path;
    } 
```

并像这样使用它：

```
 using (var bmp = new EditableBitmap(@"c:\temp\test.png")) {
            DoSomething(bmp.Bitmap);
            bmp.Save();
        } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-07T13:14:09.990

也许您可以使用[元数据](http://en.wikipedia.org/wiki/Metadata#Photographs)来做到这一点- 但我不熟悉这个主题，所以我不完全确定它是否可能，我也不知道如何去做。
我*的*建议是制作一个类型。

因此，例如，您可以创建一个类，该类将具有图像的[位图](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.aspx)^((1))属性和文件路径的字符串。

```
class LocalBitmap
{
    public Bitmap Bitmap { get; set; }
    public String Path { get; set; }

    public LocalBitmap(String path)
    {
        Path = path;
        Bitmap = new Bitmap(path);
    }
} 
```

并像这样使用它：

```
LocalBitmapimage = new LocalBitmap(@"C:\myImage.bmp"); 
```

* * *

^((1))考虑改用[Image](http://msdn.microsoft.com/en-us/library/system.drawing.image.aspx)类。[它是Bitmap](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.aspx)的基类。如果您不确定要使用哪一个，请问您自己的课程是否需要图像或该精确格式的图像（即位图）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-07T12:30:41.310

你可以使用一个变量：

```
var name = @"C:\<file name>"; 
```

进而：

```
using (Bitmap b = new Bitmap(name))
{
    ...
    b.Save(name);
} 
```

另请注意，我已将`Bitmap`实例包装到一个`using`语句中，以便在我们完成它后立即释放与其关联的非托管资源。`IDisposable`您应该始终将对象包装在`using`语句中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-03T22:01:53.827

一种可能的解决方法是使用 Bitmap 的 Tag 属性来存储创建时的路径。

```
string pathToBitmap = @"C:\myImage.bmp";
Bitmap myBitmap = new Bitmap(pathToBitmap) { Tag = pathToBitmap }; 
```

..然后稍后检索路径..

```
string pathFromBitmap = (string)myBitmap.Tag; 
```

..只需确保将标记转换为字符串，并将标记复制到从源位图制作的任何实例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-07T12:31:44.553

你不。简单地。基本上位图不记得文件 - 这是你的工作。

你基本上是说“我收到一张由 UPS 发送的图片，打开包装后 - 几天后 - 我如何找到图片上的运输号码？” - 你没有。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-11T05:06:30.817

解决 Hans 描述的锁定文件问题的另一种方法是锁定`freeze`图像。

```
public PhotoImageSource GetImage()
{
    string filename = "c:\Images\myimage.png";
    var image = new BitmapImage();
    using (var stream = new FileStream(fileName, FileMode.Open))
    {
        image.BeginInit();
        image.CacheOption = BitmapCacheOption.OnLoad;
        image.StreamSource = stream;
        image.EndInit();
    }
    image.Freeze(); //prevent error "Must create DependencySource on same Thread as the DependencyObject"
    return new PhotoImageSource(image, filename);
}

public class PhotoImageSource
{
    public PhotoImageSource(ImageSource image, string filename)
    {
        Image = image;
        Filename = filename;
    }
    public ImageSource Image { get; set; }
    public string Filename { get; set; }
} 
```

# iphone - 当我没有任何数组时，为什么 endUpdates 在数组越界时崩溃？

> ID：10054141
> 
> 赞同：0
> 
> 时间：2012-04-07T11:41:22.717
> 
> 标签：iphone, objective-c

我有一个以 C++ 对象为数据源的 UITableView，因此没有任何类型的 NSArray。每当我想在现有列表的末尾插入一行时，我就会崩溃

```
Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 5 beyond bounds [0 .. 4] 
```

它在 [tableView endUpdates] 上崩溃。但是，我的实现中没有任何 NSArray 或任何调用 objectAtIndex 的代码。我不知道为什么我会崩溃。

我只有一个部分，并且总是将新行添加到第 0 部分的末尾。返回的行数是正确的，因此完全同步。

在我看到的日志中， [tableView endUpdates] 调用 numberOfRowsInSection 正确返回了前一个计数加一的计数。但是，它再也不会调用 cellForRowAtIndexPath 并且无法通过 [tableView endUpdates];

```
-(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"...");

    ........

    NSArray *insertIndexPaths = [NSArray arrayWithObjects:[NSIndexPath indexPathForRow:oldCount + i inSection:[indexPath section]], nil];

    NSLog(@"Insert: %d %d %d", i, (int) oldCount, (int) newCount);

    [tableView beginUpdates];        
    [tableView insertRowsAtIndexPaths:insertIndexPaths withRowAnimation:UITableViewRowAnimationNone];                
    [tableView endUpdates]; 
```

}

```
-(NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    int i = _reader->allRead() ? _reader->getWindowCount() : _reader->getWindowCount() + 30;    
    return i;
}

-(NSInteger) numberOfSectionsInTableView:(UITableView *)tableView
{   
    return 1;
//    return __results__ ? 1 : 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T17:30:20.430

尝试`[[self tableView] reloadData]`代替`[[self tableView] endUpdates]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T11:50:05.300

当您更新表格视图时，您也必须更新数据源。在您的代码中没有显示数据源更新方法，所以我认为应该考虑到这一点。

# flash - 混合不同的 Program3D 会导致某些对象无法渲染

> ID：10054142
> 
> 赞同：0
> 
> 时间：2012-04-07T11:41:39.160
> 
> 标签：flash, fragment-shader, vertex-shader, stage3d, molehill

我在使用 Stage3D 时遇到了一些意想不到的事情。我为我的对象制作了两个不同的着色器程序。其中一个程序用于使用纹理位图和 uv 数据。另一个只是使用颜色数据。这两个对象非常不同，因为最终，我将使用纯色和简单的渲染逻辑显示一些内容（如方向线、高光等），而其他内容（如实际对象、背景等）将使用 mipmap 等进行渲染向前。问题是当我使用这两个非常不同的着色器程序时，只有一个可以工作。所以要么出现我所有的纯颜色对象，要么出现我所有的纯纹理对象。显然，我希望两者都出现。

这是纹理对象的 agal 代码：

顶点着色器：

```
//4x4 matrix multiply to get camera angle
"m44 op, va0, vc0\n" + 
//tell fragment shader about xyz
"mov v0, va0\n" + 
//tell frament shader about uv
"mov v1, va1\n" + 
//tell fragment shader about RGBA
"mov v2, va2\n" 
```

片段着色器：

```
//grab the texture color from texture 0 and
//the uv coordinates from varying register 1 and
//store the interpolated value in ft0
"tex ft0, v1, fs0 <2d,linear,repeat,miplinear>\n" + 
//move this value to the output color
"mov oc, ft0\n" 
```

这些对象的渲染代码如下所示：

```
context3D.setProgram(_renderProgram);
context3D.setProgramConstantsFromMatrix(Context3DProgramType.VERTEX, 0, renderMatrix, true);
context3D.setTextureAt(0, texture);

// vertex position to attribute register 0
context3D.setVertexBufferAt(0, vertexBuffer, 0, Context3DVertexBufferFormat.FLOAT_3);
context3D.setVertexBufferAt(1, uvBuffer, 0, Context3DVertexBufferFormat.FLOAT_2);
context3D.setVertexBufferAt(2, colorsBuffer, 0, Context3DVertexBufferFormat.FLOAT_4); 
```

这是我用于纯色对象的 agal 代码（即没有纹理）：

顶点着色器：

```
"m44 op, va0, vc0\n" + // pos to clipspace
"mov v0, va1" // copy color 
```

片段着色器：

```
"mov oc, v0 " 
```

这些对象的渲染代码如下所示：

```
context3D.setProgram(_renderProgram); 
context3D.setProgramConstantsFromMatrix(Context3DProgramType.VERTEX, 0, renderMatrix, true);
// vertex position to attribute register 0
context3D.setVertexBufferAt(0, vertexBuffer, 0, Context3DVertexBufferFormat.FLOAT_3);
// color to attribute register 1
context3D.setVertexBufferAt(1, vertexBuffer, 3, Context3DVertexBufferFormat.FLOAT_3); 
```

由于某种我无法弄清楚的原因，我将不同的数据分配给不同的不同寄存器索引 (va) 的事实导致其中一个渲染过程失败。如果我首先在纹理循环中渲染纹理对象，我所有的彩色对象都会消失，反之亦然。对象将在第一帧正确显示。但是一旦渲染循环第二次播放，就会发生这种意外行为。

我发现如果我通过添加以下内容来修改颜色对象的渲染代码：

```
context3D.setTextureAt(0, null);
context3D.setVertexBufferAt(2, null); 
```

有用。但这确实不是一个好的解决方案。我不想知道在我的程序的某个地方，另一个对象正在使用 n 个不同的寄存器进行渲染，所以如果另一个 program3D 实例需要小于 n，我必须将所有那些未使用的 va 设置为 null。此外，如果我为现在需要第 4 个 va 的某个对象（例如发光对象）创建一个新的着色器程序，现在我必须返回并修改所有其他着色器程序以将 va4 设置为 null，以便一切都可以渲染。这是真的吗？当然，我在这里遗漏了一些东西。设置我所有的纹理寄存器（ft）也是如此。

我可以提供更多信息...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:00:27.560

在这里挖一个旧帖子。我注意到您的评论并认为我会提到（主要是为了未来的读者的利益）您偶然发现的实际上是为了纠正解决方案。准备在屏幕上绘制 3D 对象时，典型过程如下所示：

*   定义/编译/上传程序
*   上传顶点和纹理
*   开始渲染循环
    *   开始对象循环
        *   设置程序
        *   设置常量
        *   设置输入缓冲区和纹理
        *   调用 drawTriangles()
        *   将输入缓冲区和纹理设置为 null
    *   结束对象循环
    *   调用present()
*   结束渲染循环

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:31:24.740

不幸的是，您似乎是正确的 - 至少这是我找到并实施的解决方案。以前通过的纹理必须“清除”...

```
context3D.setTextureAt(<n>, null); 
```

...否则您的无纹理着色器仍会期望纹理并且不会渲染。

# mysql - WHERE 在 sql 查询中不起作用？

> ID：10054146
> 
> 赞同：1
> 
> 时间：2012-04-07T11:42:02.787
> 
> 标签：mysql, sql, phpmyadmin

我在 PhpMyAdmin 中尝试这个查询：

```
INSERT INTO t1 ( col1, col2 )
SELECT DISTINCT col1, col2
FROM t2
WHERE (SELECT col3 FROM t1) = ANY (SELECT col3 FROM t2) 
```

但给了我这个错误：#1242 - 子查询返回超过 1 行！

任何人都可以修复它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T11:47:25.110

条件不正确，因为它试图将`WHERE`单个值与集合进行比较；这正是错误试图告诉你的。

试试这个：

```
WHERE EXISTS (select 1 from t1 t1j join t2 t2j on t1j.col3=t2j.col3) 
```

# c# - 向 ASPX 页面添加脚本

> ID：10054149
> 
> 赞同：0
> 
> 时间：2012-04-07T11:42:15.210
> 
> 标签：c#, javascript, asp.net, google-books

嗨，我想将 Google 图书预览按钮添加到我的网站。它的代码类似于：

```
<script> GBS_setLanguage('en');</script>            
<script>GBS_insertPreviewButtonPopup('ISBN:0596009208');</script> 
```

现在的问题是我从上一页得到了 ISBN 号。所以我必须将它包含在页面上的 C# 代码中。那么如何做到这一点呢？我试过这样做，但它只是不编译

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T05:58:28.960

使用此代码来做我想做的事......但它将脚本/谷歌预览按钮（在我的情况下）放置到 header 或 footer 。但没有其他方法可以做到这一点。

```
 HtmlGenericControl script1 = new HtmlGenericControl("script");
        script1.Attributes.Add("type", "text/javascript");
        script1.Attributes.Add("src", "http://books.google.com/books/previewlib.js");
        this.Page.Header.Controls.Add(script1);

        string GoogleScript = "";

        string isbncode = "";
        if (Page.Request.QueryString["isbn"] != null)
            isbncode = Page.Request.QueryString["isbn"];

        GoogleScript = "GBS_setLanguage('en'); GBS_insertPreviewButtonPopup('ISBN:";
        isbncode = isbncode + "');";

        HtmlGenericControl script3 = new HtmlGenericControl("script");
        script3.Attributes.Add("type", "text/javascript");
        script3.InnerHtml = GoogleScript + isbncode ;
        this.Page.Controls.Add(script3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T06:20:36.590

您可以轻松地将 ISBN 作为查询字符串参数包含在 url 中，并将其拉入您的 javascript 代码中，而无需服务器端包含。 [如此处所示](https://stackoverflow.com/questions/647259/javascript-query-string)：

```
function getQueryString() {
  var result = {}, queryString = location.search.substring(1),
      re = /([^&=]+)=([^&]*)/g, m;

  while (m = re.exec(queryString)) {
    result[decodeURIComponent(m[1])] = decodeURIComponent(m[2]);
  }

  return result;
}

//url: www.yourwebsite.com?isbn=123456789
var _ISBN = getQueryString()["isbn"];
GBS_setLanguage('en');
GBS_insertPreviewButtonPopup(_ISBN); 
```

# ios - xcode 3 和 xcode 4.3.2 是否有任何重大变化，ideveloper.tv 教程现在没用/没用了吗？

> ID：10054151
> 
> 赞同：0
> 
> 时间：2012-04-07T11:42:22.910
> 
> 标签：ios, xcode4, xcode4.2

*PS：我是 3 年以上经验丰富的 ruby​​ on rails 开发人员，刚开始 iPhone 开发。*

我通过[Ideveloper.tv](http://ideveloper.tv/)购买了[Objective C](http://ideveloper.tv/video/objectiveccourse.html)和[iOS 开发](http://ideveloper.tv/video/iosdevelopmentcourse.html)的会员资格。[从这个](https://stackoverflow.com/questions/1939/how-to-articles-for-iphone-development-and-objective-c)问题中了解了这些。我还拥有[thinkvitamin](http://thinkvitamin.com/)视频系列的会员资格。ThinkVitamin 和 iDeveloper.tv 都使用 xcode 3，而我使用的是 xcode 4。

我对获取文件结构树感到困惑。例如 xcode 4 没有资源组目录。（至少对于像我这样的初学者来说没有，特别是当你试图从视频中理解事物并在你的机器上尝试这些东西时。）

![在此处输入图像描述](../Images/620dcf76a35e169112075fd953723971.png)

现在这只是一个开始。我不想花时间去了解发生了什么变化，每 10 分钟在谷歌上搜索一下如何在 Xcode4 等中做到这一点（仅限现在，稍后我会检查。）所以重点是：

*   Xcode 3 和 Xcode 4.2 之间有什么大的变化吗？
*   你们建议购买其他有最新视频系列的会员，如果是，是哪一个？或者没有这些视频很好，只需遵循其中的一些（？）步骤，因为最初如果你一直面临这些愚蠢的问题，你就会一直失去兴趣。所以我想让最初的几个小时学习顺利，只是为了真正感受 iOS。

*PS：我愿意购买其他会员资格。重点是时间。我在办公室的工作已经太多了，所以想尽可能地利用有限的可用时间。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T12:04:43.680

> Xcode 3 和 Xcode 4.2 之间有什么大的变化吗？

Xcode 4 是/现在是一个重大更新，它是关于重大变化的！您无法直接将 Xcode 4 的界面与 Xcode 3 的界面进行比较，因此尝试通过有关 Xcode 3 的视频来学习 Xcode 4 是一个非常糟糕的主意，尤其是如果您以前没有使用 Xcode 的经验！

> 你们建议购买一些其他有最新视频系列的会员

是的，或者直接来自 Apple 的指南。它们是免费的，并且涵盖了每一个小细节！

此外，您的实际问题，丢失的 xib 文件，与 Xcode 4 与 Xcode 3 无关，但您创建了一个 iOS 5 应用程序，该应用程序现在使用 Storyboards 而不是普通的 xibs（虽然您可以将其改回，但您的视频教程不会不要告诉你任何关于它的事情，因为它不仅关注过时的 Xcode 版本，还关注过时的 iOS 版本）

# javascript - window.onload 无法正常工作

> ID：10054152
> 
> 赞同：0
> 
> 时间：2012-04-07T11:43:34.993
> 
> 标签：javascript, jquery, html, date

这是一个显示日期的简单功能（我不想要专业的，所以这就足够了）。问题是我想在页面加载时显示它。我不希望用户按下任何按钮或任何东西，但它不起作用。

这里是：

```
<script type="text/javascript">
    window.onload = ReturnDay;
</script>

<script>
    function ReturnDay() {
        var monthNames = [ 
            "January", 
            "February", 
            "March", 
            "April", 
            "May", 
            "June",
            "July", 
            "August", 
            "September", 
            "October", 
            "November", 
            "December" 
        ];
        var dayNames= [
            "Sunday",
            "Monday",
            "Tuesday",
            "Wednesday",
            "Thursday",
            "Friday",
            "Saturday"
        ];
        var newDate = new Date();

        newDate.setDate(newDate.getDate() + 1);    

        $('#dateday').html(dayNames[newDate.getDay()] + " " + newDate.getDate() + ' ' + monthNames[newDate.getMonth()] + ' ' + newDate.getFullYear());​
    }
</script>

<input id="dateday" type=text></div> 
```

有任何想法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T11:50:45.160

函数提升仅发生在给定`<script>`元素内。当您尝试分配`ReturnDay`给 时`onload`，它不存在。

删除示例代码的第 3 行和第 4 行：

```
 </script>
     <script> 
```

也就是说，将函数直接分配给事件处理程序对象并不被认为是最佳实践。引入冲突太容易了。改用事件绑定，jQuery 将为您抽象旧 IE 中的差异。

```
$(window).load(ReturnDay); 
```

或者，如果您想在 DOM 准备好时运行脚本，而不是等待页面中的所有图像加载：

```
$(document).ready(ReturnDay); 
```

* * *

此外，`<input>`元素被定义为 EMPTY。设置它们的 innerHTML 是没有意义的。你应该使用`val()`not `html()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T11:46:56.757

尽管您可能对这个问题更清楚，但我认为问题在于您正在尝试设置输入字段的 html。试试这个

```
$('#dateday').val(...); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T11:56:39.467

最好使用 jquery`$(document).ready()`而不是`window.onload`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-07T11:51:25.210

主要问题是您应该设置输入的值，而不是 innerHTML。

```
document.getElementById('dateday').value = dayNames.......; 
```

也就是说，我认为在您尝试将其分配给 onload 之前未定义您的函数。我知道函数被提升了，但我认为这只适用于当前的代码块。

无论如何，您都不需要定义命名函数。只需这样做：

```
window.onload = function() {
    // your date stuff here
}; 
```

# macos - 通过 BASH 脚本执行 C/C++/Objective-C 代码文件（在 Mac OS X 上）

> ID：10054154
> 
> 赞同：0
> 
> 时间：2012-04-07T11:43:38.273
> 
> 标签：macos, bash, gcc, g++, clang

所以，我需要一个脚本，它将文件**路径作为输入**并**编译和执行代码（C、C++ 或 Objective-C）。**

我承认我不是 BASH 大师……那么，***有没有更好的方法呢？***你会改变什么（为什么）？

这是我的代码...

* * *

**C**

```
input=$1;
output=`echo "$1" | sed 's/\(.*\)\..*/\1/'`
newinput="$output.c"
cp $input $newinput

gcc $newinput -o $output -std=c99

status=$?

if [ $status -eq 0 ]
then
$output
exit 0
elif [ $status -eq 127 ]
then
echo "gcc :: Compiler Not found"
fi

exit $status 
```

* * *

**C++**

```
input=$1;
output=`echo "$1" | sed 's/\(.*\)\..*/\1/'`
newinput="$output.cpp"
cp $input $newinput

g++ $newinput -o $output

status=$?

if [ $status -eq 0 ]
then
$output
exit 0
elif [ $status -eq 127 ]
then
echo "g++ :: Compiler Not found"
fi

exit $status 
```

* * *

**Objective-C**

```
input=$1;
output=`echo "$1" | sed 's/\(.*\)\..*/\1/'`
newinput="$output.m"
cp $input $newinput

clang $newinput -o $output -ObjC -std=c99 -framework Foundation

status=$?

if [ $status -eq 0 ]
then
$output
exit 0
elif [ $status -eq 127 ]
then
echo "gcc :: Compiler Not found"
fi

exit $status 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:33:51.350

您没有指定是否希望脚本将源代码编译为唯一文件，或者是否希望删除该可执行二进制文件。也许你可以为*C*使用类似的东西：

```
#!/bin/sh
input=$1
## unique files for C code and for binary executable
cfile=$(tempfile -s .c)
binfile=$(tempfile -s .bin)
## ensure they are removed at exit or interrupts
trap "/bin/rm -f $cfile $binfile" EXIT QUIT INT TERM
cp $input $cfile
if gcc $cfile -o $binfile; then
  $binfile
else
  echo C compilation of $input thru $cfile failed
  exit 1
fi 
```

如果你确定你是专门`gcc`用来编译的，你可以使用它的[-x 选项](http://gcc.gnu.org/onlinedocs/gcc-4.6.2/gcc/Overall-Options.html#Overall-Options)，`gcc -x c $input -o $binfile`而不用费心将输入复制到一个`.c`名为`$cfile`. 您可能会想也传递`-Wall -Werror -g -O`给`gcc`. 而且您应该信任您以这种方式获得的文件（存在安全风险，例如，如果该文件包含`system ("/bin/rm -rf $HOME");`等）。

我不知道您的 MacOSX 系统是否有`gcc`（可能是`clang`或`cc`）以及`tempfile`制作临时文件名的实用程序（可能`mktemp`应该以不同方式调用它）。

# c# - 当我单击gridview中的链接按钮时如何获取行索引

> ID：10054157
> 
> 赞同：3
> 
> 时间：2012-04-07T11:44:10.740
> 
> 标签：c#, asp.net, gridview

当我单击链接按钮获取行索引时，我必须定位。但是，我无法得到它。

我的 C# 代码：

```
 int rowIndex = Convert.ToInt32(e.CommandArgument); 
```

当代码来到这里时会给出错误（{“输入字符串的格式不正确。”}）但是，例如当我单击按钮字段时它会起作用。我该怎么做？

asp.net 代码

```
 <asp:TemplateField>
           <ItemTemplate>
               <asp:LinkButton ID="LinkButton2" runat="server" CommandName="View"><%#Eval("RSS_Title") %></asp:LinkButton>
           </ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T11:59:44.610

我会这样做：

**ASPX**

```
<asp:GridView ID="YourGrid" 
              OnRowCommand="YourGrid_RowCommand"
              OnRowCreated="YourGrid_RowCreated"  
              runat="server">
  <Columns>
    <asp:TemplateField>
       <ItemTemplate>
           <asp:LinkButton ID="LinkButton2" runat="server" CommandName="View">
           <%#Eval("RSS_Title") %></asp:LinkButton>
       </ItemTemplate>
    </asp:TemplateField>
  </Columns>
</asp:GridView> 
```

**CS**

```
protected void YourGrid_RowCommand(Object sender, GridViewCommandEventArgs e)
{
    if(e.CommandName=="View")
    {
      int index = Convert.ToInt32(e.CommandArgument);
    }
}
protected void YourGrid_RowCreated(Object sender, GridViewRowEventArgs e)
{
    if(e.Row.RowType == DataControlRowType.DataRow)
    {
      var LinkButton2 = (LinkButton)e.Row.FindControl("LinkButton2");
      LinkButton2.CommandArgument = e.Row.RowIndex.ToString();
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T11:53:55.817

请使用以下内容：

```
<asp:LinkButton ID="LinkButton2" runat="server" CommandName="View" CommandArgument="1"><%#Eval("RSS_Title") %></asp:LinkButton> 
```

我的意思是，添加一个 CommandArgument。

# php - 将数组或单独的变量传递给函数 - PHP？

> ID：10054159
> 
> 赞同：2
> 
> 时间：2012-04-07T11:44:18.743
> 
> 标签：php, function, variables

在 PHP 中将变量作为数组还是作为单独的变量传递是否更好，

我的意思是在 30 个关联数组中，我可能使用其中的 5 个变量？将它们作为五个变量单独传递，还是将整个数组传递过来会更好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T13:30:38.333

In generic terms, there are some things to consider when it comes to choosing how to define your functions. This may not *directly* answer your question, but it may provide a rationale for choosing one way over another, and why they may be better for different things.

```
function do_something($a, $b, $c, $d, $e) {
    ...
}

function do_something(array $a) {
    ...
} 
```

First and foremost, there are the semantics. Does your function depend on that particular array, or is it just that the arguments you would pass happen to be in an array in that case?

If it is dependent on the array, then it would stand to reason to pass that in as the sole argument, and the code remains readable, because you wouldn't use it in any other case:

```
function do_something_to_big_array($big_array) {
    ....
} 
```

If it isn't that specific, you may have problems.

**The function becomes obscure:** You can't use it without reading the function to find out what elements the array must contain.

**The function becomes more complex:** You can supply a default array with default values in the definition, but that won't be used when you supply the argument. You'll find yourself trying to re-implement a standard argument list, checking if keys exist, setting them if they don't, etc.

```
// default array if no argument supplied
function do_something($a = array('a' => true, 'b' => 10, 'c' => false)) {
    // you don't know if you're working with the default or not
    if (!isset($a['c'])) $a['c'] = false;
    ...
}

// define a defaults array and replace duplicates with $a's values
function do_something(array $a) {
    $defaults = array('a' => true, 'b' => 10, 'c' => false);
    $a = array_replace($defaults, $a);
}

// have defaults without extra logic in the function
function do_something($a = true, $b = 10, $c = false) {
   ...
} 
```

Imagine having to do that for every function you declare, so you can pass in an array and have it work reliably, instead of separate arguments.

**Readability suffers; more clutter:** You have all the data you need to pass in to the function, but you have to create an associative array containing that data before you can use it.

```
$data = array('a' => $a, 'b' => $b, 'c' => $c);
do_something($data); 
```

Of course, there is always an exception, and you might find yourself with a large arguments list:

```
function do_something($a, $b, $c, ... $x, $y, $z) {
   ...
} 
```

That's unreasonable and needs refactoring, so you can either pass in an array, and work with that, because you're never going to use it in any other case:

```
function do_something_with_alphabet(array $alphabet) {
    ...
} 
```

Or maybe you could split it into more functions if it was reasonable to do so:

```
function do_something_first($a, $b, $c) {
    ...
}

function do_something_last($x, $y, $z) {
    ...
} 
```

There's no point saying you *have* to do it this way, or that way, or even the other way, but it's worth keeping it in mind because you may write a function in one situation, and then you (or someone else) may re-visit it many moons later, and have trouble figuring out what is going on. If it makes absolute sense to pass a single array to a function, then that is it. If it doesn't, and it's for convenience, then think about it a bit more.

# php - php数组操作以减少冗余

> ID：10054165
> 
> 赞同：0
> 
> 时间：2012-04-07T11:45:11.637
> 
> 标签：php, arrays, redundancy

从数据库加载一个数组，它看起来像这样：

```
array=>(
  0=>array(
    'id'=>1,
    'user'=>'eric',
    'text'=>'hello'
  ),
  1=>array(
    'id'=>1,
    'user'=>'eric',
     'text'=>'how are you?'
  ),
  2=>array(
    'id'=>2,
    'user'=>'john',
     'text'=>'nice to meet you'
  ),
  ......
) 
```

如您所见，数组中的唯一区别是“文本”字段，因此我想创建另一个数组以减少冗余，如下所示：

```
array=>(
  0=>array(
   'id'=>1,
   'user'=>'eric',
   'text'=>array(
      0=>'hello',
      1=>'how are you?'
   )
 ),
  1=>array(
   'id'=>2,
   'user'=>'john',
   'text'=>array(
      0=>'nice to meet you',
   )
 ),
 ......
) 
```

我是编程新手，我花了几个小时试图弄清楚，但我做不到。我怎样才能做到这一点？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T11:48:34.260

**代码 ：**

```
<?php
     $newarray = array();

     foreach ($array as $item)
     {
          if (!isset($newarray[$item['id']])) $newarray[$item['id']] = array();

          $newarray[$item['id']][] = $item['text'];
     }
?> 
```

这将创造一些像这样的东西：

```
array (
   1 => array ("hello", "how are you?"),
   2 => array ("a","b"),
   ...
)

// where the array keys (1,2,...) will be the IDs 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T11:53:20.550

数组键将是`id`值

```
$new_array = array();
foreach($old_array as $value) {
    $new_array[$value['id']]['text'][] = $value['text'];
}
print_r($new_array); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T12:11:31.350

为了使它更加紧凑，这个怎么样：

```
$new_array = array();
foreach ($old_array as $item) {
    $id = $item['id'];
    if (empty($new_array[$id]) || !in_array($item['text'], $new_array[$id])) {
        $new_array[$id][] = $item['text'];
    }
} 
```

这也将减少给定 id 的重复文本。

# python - 使用 pyopengl 时如何替换 GLUT 标题栏图标？

> ID：10054167
> 
> 赞同：1
> 
> 时间：2012-04-07T11:45:31.420
> 
> 标签：python, opengl, freeglut

我正在尝试学习 OpenGL，我正在使用 PyOpenGL 和 GLUT。真正困扰我的是，我不知道如何更改标题栏图标。有没有人成功地改变了这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T15:33:43.153

你没有。

请记住：GLUT 主要用于测试应用程序和演示。如果您的应用程序非常复杂且特定于平台，以至于需要更改其图标，那么您可能需要超越 GLUT。

# iphone - 如何从 JSON 中获取布尔值？

> ID：10054170
> 
> 赞同：4
> 
> 时间：2012-04-07T11:46:10.613
> 
> 标签：iphone, ios, objective-c

假设这是我要分配给 BOOL 变量的 JSON 中的值：

```
"retweeted": false 
```

这是我解析 JSON 数据的方式：

```
NSError *error;
NSArray *timeline = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableLeaves error:&error]; 
```

现在，我有一个 bool 属性定义为：

```
BOOL *retweeted; 
```

在我的班级里面。当我在解析 JSON 时这样做：

```
tweet.retweeted = [[[timeline objectAtIndex:i] objectForKey:@"retweeted"] boolValue]; 
```

我收到此错误：

![在此处输入图像描述](../Images/a2867e79fc6e98bab4249f9bd563262e.png)

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-08-01T14:56:59.223

我首选的做法是：

`BOOL success = [[responseObject valueForKey:@"success"] boolValue]`

干净，简洁和内联。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-07T11:49:30.063

```
BOOL *retweeted; 
```

这是错误的，布尔值是标量，而不是 Objective-C 对象，因此不需要将它们声明为指针。采用

```
BOOL retweeted; 
```

反而。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-21T12:24:25.267

使用布尔值序列化后`NSJSONSerialization`存储为`NSNumber`. 如果您查看它实际存储的类型是 a `__NSCFBoolean`，但这并不重要。`NSNumber`是一个不存在的抽象类。系统使用具体类存储值。

所以

`NSNumber* boolean = [serializedDictionary valueForKey:@"boolValue"];`

这将返回一个`@0`for`NO`和`@1`for `YES`。您可以通过执行以下操作将 is 作为 booleanValue 使用：

```
if(boolean.boolValue){
  // ...
} 
```

# html - CSS div 样式

> ID：10054171
> 
> 赞同：1
> 
> 时间：2012-04-07T11:46:23.123
> 
> 标签：html, css

我有一个 div，它里面包含两个 div，我包括下面的源代码，问题是：如果我在 firefox 中缩小，chrome 从这些 div 第二个 div 从它的位置流出并站在第一个 div 下方，我应该如何编写 css 以使其保持原位？

```
<div id="container">
    <div id="id1"></div>
    <div id="id2"></div>
</div> 
```

Style.css 是

```
#container {
    width: 646px;
    height: auto;
    margin:0 auto;
    padding:0;
}

 #id1 {
    float: left;
    width: 315px;
    height: 115px;
    border-top: 1px solid #ccc;
    border-left: 1px solid #ccc;
    border-bottom: 1px solid #999;
    border-right: 1px solid #999;
    box-shadow: 0 1px 1px #cccccc;
}

 #id2 {
    float: left;
    width: 314px;
    height: 115px;
    border-top: 1px solid #ccc;
    border-left: 1px solid #ccc;
    border-bottom: 1px solid #999;
    border-right: 1px solid #999;
    box-shadow: 0 1px 1px #cccccc;
    margin-left:13px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T11:59:21.023

这是因为如果您缩小屏幕上的元素的大小。但是因为边框太小了，他们不能再减小它的大小，所以它会保持不变。

如果你真的想修复它，你应该将宽度`#container`增加到大约`652px`。

# c - 了解#define 的本质

> ID：10054172
> 
> 赞同：2
> 
> 时间：2012-04-07T11:46:26.333
> 
> 标签：c

如果我写类似

```
#define INT_PTR int*
INT_PTR ptr4, ptr5, ptr6; 
```

在这种情况下，只有 ptr4 是指向整数的指针，其余值（ptr5 和 ptr6）是整数。他们如何取整数值？要么它应该给出一些编译错误。

为什么编译器会以这种方式将 ptr5 和 ptr6 视为整数。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-07T11:47:26.527

因为要声明指针对象，您将执行以下操作：

```
int *ptr4, *ptr5, *ptr6; 
```

在 C 中，token`*`不属于类型信息，因此在声明多个对象时必须重复。请注意，这是 C 语言中的常见错误。

你可以做的是`typedef`：

```
typedef int * INTPTR; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-07T11:49:49.720

`#define`这实际上与, 只是一个文本替换无关。

在预处理器阶段（发生替换时）之后，您最终会得到：

```
int* ptr4, ptr5, ptr6; 
```

并且，因为`*`绑定到*变量*而不是*类型，*所以您创建了一个整数指针和两个整数。

这就是为什么我更喜欢写：

```
int *xyzzy; 
```

而不是：

```
int* xyzzy; 
```

因为前者更清楚地表明`*`属于*变量。*如果你想在 C 中定义一个新类型，命令是，令人惊讶的是，`typedef`:-)

```
typedef int * INTPTR;
INTPTR ptr4, ptr5, ptr6; 
```

这定义了一个新类型，它将应用于它后面的所有变量，而不仅仅是根据宏替换文本。换句话说，类型`INTPTR`( `int *`) 适用于所有三个`ptr4`,`ptr5`和`ptr6`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T11:53:19.577

您的代码扩展为

```
int* ptr4, ptr5, ptr6; 
```

并且由于星号 (*) 声明仅应用于其后的标识符，因此很自然只有 ptr4 实际上是一个指针。（顺便说一句，这就是为什么写在概念上是错误的

```
int* ptr; 
```

正如您应该指出的那样，指针声明仅适用于一个变量，例如：

```
int *ptr. 
```

)

因此，不要使用`#define`预处理器指令（这对于类型定义也是错误的），而是使用 C`typedef`关键字：

```
typedef int *inptr;
intptr ptr4, ptr5, ptr6; 
```

# twisted - Twisted：与 TCP 服务器的客户端连接数有限？

> ID：10054177
> 
> 赞同：3
> 
> 时间：2012-04-07T11:47:13.790
> 
> 标签：twisted, tcpserver

我正在编写一个聊天服务器，在对其进行单元测试时遇到了以下问题。在我的一个单元测试中，我将许多测试客户端连接到我的服务器。当连接的用户数达到 511 时，服务器停止响应而没有任何错误消息。在这个阶段，一切都在 PC 上本地运行。

我准备了一个简单的服务器、测试客户端和单元测试代码粘贴到论坛中。

知道为什么服务器挂断了吗？任何帮助深表感谢

这段代码基本上来自于twisted simple chat tutorial。简单服务器：

```
from twisted.internet.protocol import Factory
from twisted.protocols.basic import LineReceiver
from twisted.internet import reactor

class Chat(LineReceiver):

    def __init__(self, users, userNum):
        self.users = users
        self.userNum = userNum

    def connectionMade(self):
        print "Connected to user %d" % (self.userNum)
        self.users[self.userNum] = self

    def connectionLost(self, reason):
        print "Connection to user %d lost" % (self.userNum)
        if self.users.has_key(self.userNum):
            del self.users[self.userNum]

    def lineReceived(self, line):
        for user in self.users:
            if user == self.userNum:
                continue
            self.users[user].sendLine("%d - %s" % (self.userNum, line))

class ChatFactory(Factory):

    def __init__(self):
        self.users = {} # maps user names to Chat instances
        self.nUsers = 0

    def buildProtocol(self, addr):
        self.nUsers += 1
        return Chat(self.users, self.nUsers)

    def clientConnectionFailed(self, connector, reason): 
        print 'connection failed:', reason.getErrorMessage() 
        reactor.stop() 

    def clientConnectionLost(self, connector, reason): 
        print 'connection lost:', reason.getErrorMessage() 
        reactor.stop() 

reactor.listenTCP(8123, ChatFactory())
reactor.run() 
```

这是我的测试客户。这个客户端被单元测试多次实例化。

```
import socket

HOST = "localhost"
PORT = 8123

class TestClient:
    def __init__(self):
        self.connected = False
        try:
            self.socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        except socket.error, msg:
            print("Socket error %s" % msg)

    def connect(self):
        try:
            self.socket.settimeout(10)
            self.socket.connect((HOST, PORT))
            self.connected = True
        except socket.error, msg:
            print("Socket error %s" % msg)
            self.connected = False

    def disconnect(self):
        self.socket.close()

    def connected(self):
        return self.connected 
```

最后是单元测试代码文件：

```
import unittest
from TestClient import TestClient

class TestSequenceFunctions(unittest.TestCase):

    def test_manyUsers(self):
        users = []

        number_of_users = 1000

        for u in range(number_of_users):
            # create client
            users.append(TestClient())
            # connect client to server
            users[-1].connect()
            # check connected state
            self.assertTrue(users[-1].connected, "User %d is not connected" % (u))

        # close connection of all users
        for user in users:
            user.disconnect()

if __name__ == '__main__':
    unittest.main() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T18:55:46.543

511这个数字相当可疑。它足够接近 2 的幂，我最初的预感是任意强加的限制或错误。

既然你提到你在 Windows 上，我想我可以说这是一个任意强加的限制，有点自信。select(2) 支持的套接字数量在所有平台上都是有限的，但在 Windows 上这个限制甚至比平常还要低。默认情况下，它实际上是 64。但是，Python 将此限制提高到 512（该限制不像大多数平台那样可变，但它在 Windows 上 - 在*C*编译时）。

在 511 个用户之后失败听起来就像如果这是您系统的限制会发生什么 - 第 512 个套接字是侦听连接的那个。

像这样的大多数限制很难以一般方式找到。通常，您必须深入了解正在使用的低级 API 或系统调用，然后查看他们的文档，或者询问并希望（不幸）记住所有各种限制的其他人可以帮助您。:)

您可以通过在 Windows 上使用基于 IOCP 的反应器来避免此限制。切换到它非常容易。只需在服务器的第一行*之前*插入这些行：

```
from twisted.internet import iocpreactor
iocpreactor.install() 
```

其他一切都保持不变（特别是，您现有的反应堆导入保持不变，并且您继续使用`reactor`，您不会切换到使用`iocpreactor`在程序中的其他任何地方使用）。

您可以在 Twisted 的在线文档中阅读有关[反应器选择的更多信息。](http://twistedmatrix.com/documents/current/core/howto/choosing-reactor.html)

# javascript - 哪些 jQuery UI 模块是动画正常工作所必需的？

> ID：10054183
> 
> 赞同：0
> 
> 时间：2012-04-07T11:47:46.857
> 
> 标签：javascript, jquery, jquery-ui, jquery-animate

目前我正在尝试运行此处给出的示例

```
http://jqueryui.com/demos/animate/#demo 
```

如果我尝试从这里下载核心

```
http://jqueryui.com/download 
```

它不起作用。但是，当我下载完整版时，它确实如此。动画工作需要哪些模块？我不想用我不会使用的功能不必要地膨胀我的库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T12:29:09.413

原来我需要以下插件

[https://github.com/jquery/jquery-color](https://github.com/jquery/jquery-color)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T11:55:28.683

嗨，看这里**演示** [http://jsfiddle.net/tm72d/1/](http://jsfiddle.net/tm72d/1/)

我认为模块是指需要包含哪些库才能使动画开始运行。（我已经提到了这一行）来自 -- 查询动画页面。

抱歉，如果我理解您的问题是错误的，请告诉我，我将删除我的答案。有一个美好的，干杯！

**有用的链接**

[http://jqueryui.com/demos/animate/](http://jqueryui.com/demos/animate/)

[http://jqueryui.com/docs/Effects/Methods](http://jqueryui.com/docs/Effects/Methods)

**图书馆**

```
<script src="http://code.jquery.com/jquery-latest.js"></script>

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script> 
```

# xml - 您可以使用 XSL 将行分隔列表转换为正确的 xhtml 列表吗？

> ID：10054184
> 
> 赞同：2
> 
> 时间：2012-04-07T11:47:57.417
> 
> 标签：xml, xslt, plaintext

XSL 旨在将 XML 转换为 XML，但是您可以转换文件吗？

```
line1
line 2 -- foo
line 3 
```

进入

```
<ol>
<li>line1</li>
<li>line 2 -- foo</li>
<li>line 3</li>
</ol> 
```

只使用 XSLT？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T16:49:41.930

**这在 XSLT 2.0 中很简单，在 XSLT 1.0 中也不难**：

**一、XSLT 1.0 解决方案**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/*">
  <ol>
    <xsl:apply-templates/>
  </ol>
 </xsl:template>

 <xsl:template match="text()" name="linesToLi">
  <xsl:param name="pText" select="."/>

  <xsl:if test="string-length($pText) > 0">
      <xsl:variable name="vthisLine" select=
      "substring-before(concat($pText, '&#xA;'), '&#xA;')"/>

      <li><xsl:value-of select="$vthisLine"/></li>

      <xsl:call-template name="linesToLi">
       <xsl:with-param name="pText" select="substring-after($pText, '&#xA;')"/>
      </xsl:call-template>
  </xsl:if>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档**（提供的文本，包装到单个顶部元素中，以成为格式良好的 XML 文档）时：

```
<t>line1
line 2 -- foo
line 3</t> 
```

**产生了想要的正确结果**：

```
<ol>
   <li>line1</li>
   <li>line 2 -- foo</li>
   <li>line 3</li>
</ol> 
```

* * *

**二、XSLT 2.0 解决方案**：

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema" exclude-result-prefixes="xs">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:variable name="vText" as="xs:string">
 line1
 line 2 -- foo
 line 3
 </xsl:variable>

 <xsl:template match="/">
  <ol>
    <xsl:for-each select=
       "tokenize($vText, '\r?\n')[normalize-space()]">
      <li><xsl:sequence select="."/></li>
    </xsl:for-each>
  </ol>
 </xsl:template>
</xsl:stylesheet> 
```

**当将此转换应用于任何 XML 文档（未使用）时，将产生所需的正确结果**：

```
<ol>
    <li> line1</li>
    <li> line 2 -- foo</li>
    <li> line 3</li>
</ol> 
```

**请注意**：

使用 XSLT 2.0 函数**[`unparsed-text()`](http://www.w3.org/TR/2007/REC-xslt20-20070123/#function-unparsed-text)**，我们可以将任何文本文件作为字符串处理，并使用上述代码将其拆分为行。

更准确地说，我们将使用这样的东西：

```
tokenize(unparsed-text($vSomeUrl), '\r?\n')[normalize-space()] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T11:59:48.407

不幸的是，XSLT 1 没有有效的字符串处理和解析工具，因此它并不真正适合这样的任务（尽管它是*可能的*）。

在 XSLT 2 中，这种情况发生了变化。例如，请参阅[有关 XSLT 2 文本解析的这篇论文](http://www.saxonica.com/papers/ideadb-1.1/mhk-paper.xml)。

# java - JPA 模型中图像的级联删除

> ID：10054196
> 
> 赞同：0
> 
> 时间：2012-04-07T11:49:04.133
> 
> 标签：java, jpa

我有 JPA 实体与文章和图像之间的关系：

```
Article {
   @Id
   Long id;

   @ManyToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY)
   @JoinTable(inverseJoinColumns = @JoinColumn(name = "image_id")) 
   Set<Image> images;

   ...
}

Image {
    @Id
    Long id;

    ...
} 
```

要从文章中的集合中删除删除图像，我可以使用`this.images.remove(image)`JPA 将负责从连接表中删除，这很好。

我想要实现的是，一旦没有文章指向它，图像实体也将被删除。问题还在于，图像存储在文件中，因此必须有某种处理程序来处理它们。

实施它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T15:34:50.903

您所说的有时被称为孤儿删除。JPA 可以处理一对多关系（如果您使用的是 JPA 2.0 或更高版本，则 OneToMany 注释上的 deleteOrphans 属性）但不能处理多对多关系。您要么必须自己处理它，要么查看您的 JPA 提供程序是否有能力。

# python - 如何从 SQLAlchemy ORM 类生成列值的字典？

> ID：10054197
> 
> 赞同：1
> 
> 时间：2012-04-07T11:49:12.063
> 
> 标签：python, orm, sqlalchemy, python-2.7

我需要序列化几个基于 ORM 的类的某些列。我想默认为创建 ORM 类时指定的列。

```
class AXSection(Base):
    __tablename__ = 'axsection'
    __table_args__ = {'mysql_engine':'ISAM', 'mysql_charset':'utf8'}
    id = Column(BigInteger, primary_key=True)
    enabled = Column(String(1), nullable=False, default='T')
    pages = relationship('AXPage', backref='axsection')a
    name = Column(String(255), nullable=False) 
```

如何编写返回列名的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T13:58:18.770

**table**属性包含列名列表。要打印与示例 AXSection 类型关联的列名，请使用：

```
print AXSection.__table__.columns 
```

结果是：

```
['axsection.id', 'axsection.enabled', 'axsection.name'] 
```

# android - 如何在图形中设置背景图像？

> ID：10054202
> 
> 赞同：2
> 
> 时间：2012-04-07T11:49:54.623
> 
> 标签：android

我正在实现一个与图表相关的应用程序。

我正在尝试将一个图像设置为图形的背景。

但它只设置在图形内部，而不是设置总布局。

我的代码是休闲的。

..................................................... …………

布局 = (LinearLayout) findViewById(R.id.linearLayout1);

```
 XYMultipleSeriesRenderer renderer = getBarDemoRenderer();
        setChartSettings(renderer, "Call Duration/Incoming", "my chart", "", 0.5, 12.5,
                0, 60, 0, Color.LTGRAY);
        mChartView = ChartFactory.getBarChartView(BarchartExampleActivity.this, getBarDemoDataset(renderer), renderer, Type.STACKED);
        layout.addView(mChartView, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));

}
public XYMultipleSeriesRenderer getBarDemoRenderer() 
{

      XYMultipleSeriesRenderer renderer = buildBarRenderer();
        renderer.setBarSpacing(0.5);
        renderer.setXLabels(0);
        renderer.setYLabels(10);
        renderer.addXTextLabel(1, "1");
        renderer.addXTextLabel(2, "2");
        renderer.addXTextLabel(3, "3");
        renderer.addXTextLabel(4, "4");
        renderer.addXTextLabel(5, "5");
        renderer.addXTextLabel(6, "6");
        renderer.addXTextLabel(7, "7");
        renderer.addXTextLabel(8, "8");
        renderer.addXTextLabel(9, "9");
        renderer.addXTextLabel(10, "10");

        renderer.setYLabelsAlign(Align.RIGHT);

        SimpleSeriesRenderer r = renderer.getSeriesRendererAt(0); 
```

// r.setDisplayChartValues(true); r.setChartValuesTextSize(12); r.setChartValuesSpacing(7); r.setGradientEnabled(true); r.setGradientStart(0, Color.BLUE); r.setGradientStop(20, Color.GREEN);

```
 return renderer;

}
 protected XYMultipleSeriesRenderer buildBarRenderer() 
  {
      Log.v("abstract","bbb");
    XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();
    renderer.setAxisTitleTextSize(16);
    renderer.setChartTitleTextSize(20);
    renderer.setLabelsTextSize(15);
    renderer.setLegendTextSize(15);

    for (int i = 0; i < 1; i++) 
    {
      SimpleSeriesRenderer r = new SimpleSeriesRenderer();

      renderer.addSeriesRenderer(r);
    }
    return renderer;
  }
 protected void setChartSettings(XYMultipleSeriesRenderer renderer, String title, String xTitle,
          String yTitle, double xMin, double xMax, double yMin, double yMax, int axesColor,
          int labelsColor) 
      {
          Log.v("abstract","555"+title  +xMin   +yMin);
          renderer.setShowLegend(false);
        renderer.setChartTitle(title);
        renderer.setXTitle(xTitle);
        renderer.setYTitle(yTitle);
        renderer.setXAxisMin(xMin);
        renderer.setXAxisMax(xMax);
        renderer.setYAxisMin(yMin);
        renderer.setYAxisMax(yMax);
        renderer.setShowGrid(true);

      }
 private XYMultipleSeriesDataset getBarDemoDataset(XYMultipleSeriesRenderer renderer) 
    {
     double[] minValues = new double[]    {0, 0, 0,0,  0,0,  0,0,  0,0,  0,0, 0};
        double[] maxValues = new double[] { 7,0,10,0, 24,0, 30,0, 35,0, 40, 0,45};

        XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
        RangeCategorySeries series = new RangeCategorySeries("");
        int length = minValues.length;
        for (int k = 0; k < length; k++) 
        {
         series.add(minValues[k], maxValues[k]);
        }
        dataset.addSeries(series.toXYSeries());
        return dataset;    
    } 
```

我正在为布局设置背景。

但它没有设置总布局。

如何将背景图像设置为图形？

如果有人有解决方案，请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T05:58:06.153

我可能离这里很远，但如果没有 setBackground 或类似于渲染器，也许您可​​以使用布局作为图形的容器并将背景设置为该容器。

# ruby-on-rails - 未定义的方法“分页”

> ID：10054205
> 
> 赞同：3
> 
> 时间：2012-04-07T11:50:13.367
> 
> 标签：ruby-on-rails, kaminari

我正在使用 Ruby on Rails 3.2.1 和 Kaminari gem 0.13.0。

我已经添加`gem 'kaminari'`到我的 gemfile 中，然后运行`Bundle install`​​.

在控制器中我有`@posts = Post.order("name").page(params[:page])`

鉴于：

```
<%= paginate @posts%>
        <% @posts.each{|posts| %>
            <h1 class="title"><%= link_to posts.title, posts %></h1>
                <p class="byline">Raksts izveidots: <%= posts.created_at.utc.strftime("%d.%m.%Y") %></p>
                <div class="entry">
                    <p><%= posts.content %></p>
                </div>
            <p class="meta"><a href="#" class="more">Read More</a> &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <a href="#" class="comments">Comments</a> (33)</p>           
        <% } %>
        <%= paginate @posts%> 
```

但结果我有`undefined method 'paginate' for #<#<Class:0x3cf68b8>:0x2ab92b0>`。

任何人都可以帮助我吗？

```
 class PostsController < ApplicationController
    # GET /posts
    # GET /posts.json
    def index
      @posts = Post.order(:name).page(params[:page]).per(2)
      @posts = Post.order('posts.id DESC')

      respond_to do |format|
        format.html  #index.html.erb
        format.json { render json: @posts }
      end
    end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T13:59:26.707

```
def index
  @posts = Post.order(:name).page(params[:page]).per(2)

  respond_to do |format|
    format.html  #index.html.erb
    format.json { render json: @posts }
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-04T13:10:16.783

我认为你可以这样做：

```
@posts = Post.order(:name).page(params[:page]).per(2), order: 'post_id desc',
                                                         per_page: 10 
```

希望这可以帮助。

# android - 滑动时图像的平滑过渡

> ID：10054211
> 
> 赞同：-1
> 
> 时间：2012-04-07T11:51:21.313
> 
> 标签：android, image

我有一个 url 数组，我将其加载到图像视图中。

我使用滑动手势滚动浏览图片。这样可行。

然而，没有发生的是图片的平滑过渡。即，当我滑动时，我无法将当前图片移出，下一张图片进入，就像在任何画廊视图中一样。

我确定这个主题有很多主题，只是不知道要搜索什么。

任何帮助/重定向将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T07:50:50.327

我认为您正在谈论实现[Swipe Views](http://developer.android.com/design/patterns/swipe-views.html)，如果是这样，请查看实现[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)（另请参阅此[博客文章](http://android-developers.blogspot.com/2011/08/horizontal-view-swiping-with-viewpager.html)）。

# iphone - 使用 Apple 代码签名为 Cydia 构建应用程序

> ID：10054213
> 
> 赞同：1
> 
> 时间：2012-04-07T11:51:40.307
> 
> 标签：iphone, ios, jailbreak, cydia, codesign

第一次，我想为 Cydia Store 构建一个应用程序。我有一个 Apple 开发者帐户以及我的应用程序的配置文件。我在大多数关于为 Cydia 构建应用程序的教程中看到：

> “通过自我代码签名构建您的应用程序”。

我需要知道，如果我使用 Apple 开发人员代码签名和有效的配置文件构建应用程序，我的应用程序是否可能无法在越狱的 iPhone 上正常运行，或者 Cydia 不会批准我的应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T21:00:21.293

您可以使用 XCode 创建您的应用程序，然后确保不进行代码设计

如何绕过 xcode 协同设计： http: [//txcom2003.wordpress.com/2011/05/11/disable-code-signing-in-xcode-4/](http://txcom2003.wordpress.com/2011/05/11/disable-code-signing-in-xcode-4/)

然后，您可以使用伪代码签名

```
ldid -S ExampleApplication 
```

[这是代码签名的方法。](http://www.saurik.com/id/8)

然后只需从 xcode 中“构建应用程序”，然后您可以使用将其打包到 deb 文件中

```
dpkg -b ExampleApplication 
```

并将新创建的 deb 文件发送到 modmyi。

您还可以创建自己的服务器并自己托管。

如何获得 cydia 回购：[http ://www.ifans.com/forums/threads/how-to-easy-make-a-cydia-repo.110310/](http://www.ifans.com/forums/threads/how-to-easy-make-a-cydia-repo.110310/)

# ruby-on-rails-3 - Rails 3 - 通过 rspec 正确测试 PUT 方法

> ID：10054215
> 
> 赞同：2
> 
> 时间：2012-04-07T11:52:06.677
> 
> 标签：ruby-on-rails-3, model-view-controller, model, rspec, rspec-rails

我有模型**TeacherLeader**，它为其他表保留外键。我可以更新此表并尝试为我的控制器编写测试（通过 rspec）。

我的模型：

```
#  id         :integer         not null, primary key
#  user_id    :integer
#  teacher_id :integer
#

class TeacherLeader < ActiveRecord::Base  
  belongs_to :user
  belongs_to :teacher

  validates :teacher_id, 
              :uniqueness => { :message => "already a class-head" }
end 
```

我的控制器

```
class TeacherLeadersController < ApplicationController
 def edit
    @teacher_leader = TeacherLeader.find( params[:id] )    
    ...
  end

  def update
    @teacher_leader = TeacherLeader.find( params[:id] )
    ...

    if ( @teacher_leader.update_attributes( params[:teacher_leader] ) )                   
      redirect_to teachers_path
      ...
    else
      redirect_to edit_teacher_leader_path
      ...
      end      
    end
  end
end 
```

所以，我在为 PUT 编写测试时遇到了问题。这是我的 PUT 方法代码示例：

```
describe TeacherLeadersController do
  render_views

  before(:each) do    
    @teacher = Factory( :teacher )
    @teacher.user.user_role = "teacher"
    @teacher.save!

    @user = Factory( :user, :user_login => Factory.next(:user_login) )
    @user.user_role = "class_head"
    @user.save!

    @sh = Factory( :user, :user_login => Factory.next(:user_login)  )
    @sh.user_role = "school_head"
    @sh.save!
  end

  describe "PUT 'update" do
    before(:each) do
      @teacher_leader = @user.create_teacher_leader( @attr_teacher_leader )
    end

    describe "for signed-in school-heads" do
      before(:each) do
        test_sign_in( @sh )
      end

      it "should update teacher leader with correct params" do
        put :update, :id => @teacher_leader, :teacher_id => @teacher.id
        @teacher_leader.reload
        @teacher_leader.teacher_id.should  == @teacher.id
      end
    end
  end
end 
```

当我尝试运行我的规范时，我得到了：

```
1) TeacherLeadersController PUT 'update for signed-in school-heads should update teacher leader with correct params
     Failure/Error: put :update, :id => @teacher_leader, :teacher_id => @teacher.id
     NoMethodError:
       undefined method `[]' for nil:NilClass
     # ./app/controllers/teacher_leaders_controller.rb:57:in `update'
     # ./spec/controllers/teacher_leaders_controller_spec.rb:150:in `block (4 levels) in <top (required)>' 
```

但我的应用程序有效！我在测试中做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T12:37:38.757

您的控制器需要一个`params[:teacher_leader]`哈希值，但您的测试没有提供它。试试这个：

```
it "should update teacher leader with correct params" do
  put :update, :id => @teacher_leader, :teacher_leader => { :teacher_id => @teacher.id }
  # ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T12:41:51.127

确保您的规格是否用`describe TeacherLeadersController`块包装。例如：

```
describe TeacherLeadersController do
  describe "PUT 'update" do
    #...

    describe "for signed-in school-heads" do
      it "should update teacher leader with correct params" do
        put :update, :id => @teacher_leader, :teacher_id => @teacher.id
      end
    end
  end
end 
```

..那么您应该能够`put`正确使用方法。

此外，您忘记将`:teacher_leader`属性传递给被测控制器。尝试`put :update, :id => something, :teacher_leader => { some_attributes_here }`

无论如何，我强烈建议您在控制器规范中模拟所有数据库查询（活动记录调用）。为了测试参数是否被持久化，您应该使用请求规范（或其他进行集成/验收测试的方法）。参见例如：[http ://blog.bandzarewicz.com/slides/krug-the-perfect-rspec/#27](http://blog.bandzarewicz.com/slides/krug-the-perfect-rspec/#27)

# gtk - 如何获取树视图/树视图列的高度？

> ID：10054216
> 
> 赞同：0
> 
> 时间：2012-04-07T11:52:11.243
> 
> 标签：gtk, gtk#, gtktreeview

请问如何获取treeview/treeviewcolumn的高度？我有简单的代码布局（里面是大树视图）和表格中的垂直滚动条。当我设置小的布局高度时，我看不到树视图的所有项目，当我设置它大时，我看到整个表格在布局底部有空白空间。是否可以设置布局，使其具有与 treeview 完全相同的高度或 treeviewcolumns 中的最大高度？提前致谢。一段代码：

```
tree = new Gtk.TreeView();
vadjustment = new Gtk.Adjustment(0, 0, 0, 0, 0, 0);
vscrollbar = new Gtk.VScrollbar(vadjustment);
Lyout layout = new Layout(null, vadjustment);
layout.Put(tree, 0, 0);
Table table =  new Table(1, 2, false);
table.Attach(layout, 0, 1, 0, 1, Gtk.AttachOptions.Expand|Gtk.AttachOptions.Fill, Gtk.AttachOptions.Expand|Gtk.AttachOptions.Fill, 0, 0);
table.Attach(vscrollbar, 1, 2, 0, 1, Gtk.AttachOptions.Shrink, Gtk.AttachOptions.Shrink|Gtk.AttachOptions.Fill, 0, 0);
box.PackStart (table, true, true, 4);
vbox1.Add(box);
...
TreeViewColumn first = new TreeViewColumn();
first.Title=h1;
Gtk.CellRendererText first_name_cell = new Gtk.CellRendererText ();
first.PackStart(prvy_name_cell, true);
first_name_cell.Width=20;
...
tree.AppendColumn (first);
layout.SetSize(800, ???); 
```

还有另一个问题 - 是否可以为树视图项目应用黑色边框颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T20:04:04.747

您应该能够在其暴露/绘制事件中可靠地获取树视图的大小。如果您对此感兴趣，则可以使用其高度来调整布局大小。你可以猜出一个初始的大布局尺寸，第一次曝光会修剪它。经常调用 Expose，并且您不应该经常调整大小，因此应该使用检测新高度不同的逻辑。您还可以提防在树视图高度可能具有疯狂值的情况下提前调用暴露。

# php - 谷歌站点地图拼图

> ID：10054217
> 
> 赞同：1
> 
> 时间：2012-04-07T11:52:16.470
> 
> 标签：php, rss

我正在尝试向 Google Webtools 提交网站的站点地图，但我收到了一个与域名相关的非常奇怪的错误。首先，我将站点地图作为我认为有效的 RSS 文档提交（[在此处查看](http://vlab.mooo.info/rss/feed/)）。

我有两个问题。一个小问题是响应带有标题“Content-Type: application/rss+xml; charset=utf-8”，但 Webtool 显示“Type: ?” 信息。

![问题 - 截图](../Images/9894c7b04c99317085a308ae50d95ff5.png)

其次，也是最重要的，Web Tool 返回错误消息“
General HTTP error: Domain name not found”。但是，我能够解析域名（[http://vlab.mooo.info](http://vlab.mooo.info)）并且该名称已在几个月前注册，因此不应该存在 DNS 问题。

```
$ resolveip vlab.mooo.info
IP address of vlab.mooo.info is X.Y.Z.W 
```

我无法真正得出结论：是否有一些我无法识别的 DNS 问题？我的 RSS 文档的语法有问题吗？或者是其他东西？

**更新 1：**我做了一些更简单的事情！[我在http://vlab.mooo.info/sitemap.xml](http://vlab.mooo.info/sitemap.xml)上传了一个简单的 sitemap.xml 文件。结果是完全一样的。Webtool声称找不到域名：S

**更新 2：**这是我从网络爬虫得到的另一个错误：

![在此处输入图像描述](../Images/0ed977edebc0cde8418dead1375d99f1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T12:42:49.150

上传包含以下内容的 robots.txt：

```
User-agent: *
Disallow: 
```

并让谷歌网站管理员工具打开它，看看它是否可以访问该文件。您的 google-analytics 帐户是否正常工作？

通常，在向谷歌网站管理员工具添加新域时，最多需要 48 小时才能完全工作。

哦，您的提要并不完全有效。记住 w3c 服务，也用于提要 :) [http://validator.w3.org/feed/](http://validator.w3.org/feed/)

[http://validator.w3.org/feed/check.cgi?url=http%3A%2F%2Fvlab.mooo.info%2Frss%2Ffeed%2F](http://validator.w3.org/feed/check.cgi?url=http%3A%2F%2Fvlab.mooo.info%2Frss%2Ffeed%2F)

# css - 包裹在锚点中的浮动图像的 CSS 问题

> ID：10054219
> 
> 赞同：0
> 
> 时间：2012-04-07T11:52:22.460
> 
> 标签：css

我有一堆用 HTML 定义的图像，给定一个“独特的东西”类，然后通过 wordpress 的魔力，它们被一个没有类或 id 的锚点包裹着来识别它。我最终...

```
<a href="http://test.com/DSC_0042.JPG" title="Details of image">
    <img class="picasa-image alignleft" width="150" height="150" alt="DSC_0042.JPG" src="http://picasa-image.url/s150-c/DSC_0042.JPG" title="Details of image">
</a> 
```

我可以通过选择来为我的图像设置规则，`.picasa-image`但是当我将它向左浮动时，它会被忽略。当我删除锚标签时，它会正确浮动。当我浮动锚点时，它会正确浮动（但页面上的所有其他锚点都是浮动的）。

如何在 css 中设置包含我的图像的锚标记的样式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T12:03:22.527

`!important`最干净的方法是使用另一个更具体的规则（例如，使用更高的选择器特异性或声明）覆盖不允许您将图像向左浮动的规则

否则，一种解决方法是向左浮动，如您所说，所有带有图像的链接。由于您在 css 中没有祖先选择器，因此您必须以其他方式定位这些链接，并使用特定的选择器属性，例如

```
a[href$=".JPG"] { float : left } 
```

并且您将定位所有指向 .JPG 的链接，或者如果这些链接以 www.test.com 开头，另一种可能性是定位

```
a[href^="http://test.com"] { float : left } 
```

或者只是对这些链接应用一个类。

# c++ - 多边形线碰撞检测

> ID：10054220
> 
> 赞同：0
> 
> 时间：2012-04-07T11:52:33.103
> 
> 标签：c++, math

我试图找到一个公式来确定一条线是否与多边形相交。我试过了，但下面的代码不能正常工作。

```
bool Check_Collision(float x1,float y1, float x2, float y2)
{
        int j=MyPolyVector.size()-1;
        for (int i=0;i<MyPolyVector.size();i++)
        {
                float x3=MyPolyVector[i].X;
                float x4=MyPolyVector[j].X;
                float y3=MyPolyVector[i].Y;
                float y4=MyPolyVector[j].Y;

                float denom= ((y4-y3)*(x2-x1))-((x4-x3)*(y2-y1));
                float ua = (((x4-x3)*(y1-y3))-((y4-y3)*(x1-x3)))/denom;
                float ub = (((x2-x1)*(y1-y3))-((y2-y1)*(x1-x3)))/denom;
                j=i;

                if(ua >= 0.0f && ua <= 1.0f && ub >= 0.0f && ub <= 1.0f) return true;
        }
        return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T12:14:40.480

我认为这个链接对你来说可能很有趣，以获得诀窍： [多边形问题中的点](http://en.wikipedia.org/wiki/Point_in_polygon)

还有一个链接资源，用于 C 代码： [多边形中的点 - C 代码](http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html)

这个问题主要在 OpenGL 上下文中处理，解决这个问题的主要思想是计算多边形和任何直线的交点，这会通过你的检查点。

您必须检查多少几何图形，一个点是否在多边形内？

PS：我刚刚发现这篇关于这个问题的帖子 :-) [Stackoverflow - Point in Polygon](https://stackoverflow.com/questions/217578/point-in-polygon-aka-hit-test)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T12:28:54.120

我可以建议你看看[这本书](https://rads.stackoverflow.com/amzn/click/com/1558605940)，并在计算之前搜索线线交叉点 2D 和范围检查。

此外，您的代码需要除以零检查并进一步考虑倒数线尺寸和公差。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T19:07:58.400

看起来您的线交叉点的**方程式不正确。**我认为**[这里](https://math.stackexchange.com/questions/27388/intersection-of-2-lines-in-2d-via-general-form-linear-equations)**列出了正确的方程式。

也就是说，*解决这个问题的一个好方法是查看线是否与多边形上的任何线段相交*。所以为了测试这个，计算线与多边形边缘的每条线的交点，如果这个点在多边形的段内，那么就有一个交点（看看这个点是否在定义的范围内段的端点）。（也许这就是您想要做的，但是由于您没有给出任何解释，因此很难说。）

# c++ - C++ 组合学

> ID：10054222
> 
> 赞同：1
> 
> 时间：2012-04-07T11:52:53.997
> 
> 标签：c++, permutation, combinations, combinatorics

我需要 c++ 代码，它将生成所有可能的组合（n，k），其中 n - 输入数组中的整数个数。k - 位置数

例如 **输入：**

```
n = [1 2 3];
k = 2; 
```

**输出：**

```
A3 =

     1     1
     1     2
     1     3
     2     1
     2     2
     2     3
     3     1
     3     2
     3     3 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T13:16:20.003

使用[标准库](http://en.cppreference.com/w/cpp/algorithm/next_permutation)：

```
do {
    for(int i = 0; i < k; i++){
        std::cout << n[i];
    }
    std::cout << '\n';
} while (std::next_permutation(n, n + k)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T12:50:28.140

这基本上是以 n-1 为底数（每个数字都移动 1），请尝试以下操作：

编辑：用来`vector`代替`new[]`,`delete[]`

```
#include <vector>

void generatePerms(int n, int k)
{
    vector<int> perms(k, 1);

    //iterate through all permutations
    bool done;
    do {
        //Do something with the current permutation, for example print it:
        for (int i = 0; i < k-1; i++)
            cout << perms[i] << ", ";
        cout << perms[k-1] << endl;

        /*
         * Increment last digit first - if it's to big, reset to 1 and
         * carry one (increment next digit), which may also carry one etc.
         *
         * If all digits caused a carry, then the permutation was n, n, ..., n,
         * which means, that we can stop.
         */
        done = true;
        for (int i = k-1; i >= 0; i--) {
            if (++perms[i] > n) {
                perms[i] = 1;
                continue;
            } else {
                done = false; //not all digits caused carry
                break;
            }
        }
    } while (!done);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T12:56:13.703

**在这里查看我的答案：**

[PHP 采取所有组合](https://stackoverflow.com/questions/9787051/php-take-all-combinations/9787438#9787438)

这是PHP；但是这个概念（递归等）应该很容易“翻译”......

# c++ - SDL + emacs + Mac OS X

> ID：10054224
> 
> 赞同：1
> 
> 时间：2012-04-07T11:52:55.720
> 
> 标签：c++, macos, emacs, sdl

我正在尝试在 emacs 中使用 C++ SDL 代码并在 Mac OS X Lion 下编译它。在带有 SDL 模板和框架的 XCode 中，一切正常，但是当我尝试编译在 Internet 上找到的一些示例 SDL 代码时：http: [//pastebin.com/cWH5X8Hu](http://pastebin.com/cWH5X8Hu)我无法使用 emacs 使其工作。我总是收到这样的错误： http: [//pastebin.com/BZ3xJsmv](http://pastebin.com/BZ3xJsmv)。我使用的命令是`g++ -o sdltest main.cpp sdl-config --cflags --libs`. 我已经从源代码安装了 SDL，但我不知道可能出了什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T02:57:25.157

您正在尝试链接不兼容的库版本，您需要获取 lib SDL 的 X86_64 版本。

ld：警告：忽略文件/usr/lib/libSDL.a，文件是为存档而构建的，它不是被链接的体系结构（x86_64）

这个错误根本与 emacs 无关。

# asp.net - 服务器端如何识别按钮点击事件

> ID：10054227
> 
> 赞同：1
> 
> 时间：2012-04-07T11:53:14.570
> 
> 标签：asp.net, webforms

嗨，我对 asp.net 中的按钮单击有一个疑问，我已经在 .aspx 页面中放置了带有 OnClick 事件之类的按钮控件和其他一些控件（按钮、文本框）。当我运行页面时，按钮显示在浏览器的页面源中，就像这里一样，它不显示onclick事件，然后页面如何调用服务器端的按钮点击，服务器端如何识别哪个按钮导致提交，以及此页面如何移动到服务器端。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-07T12:30:47.847

如果是 about `<asp:Button />`，则此控件默认呈现*type="submit"*的输​​入，它使用浏览器的默认机制提交表单。ASP .Net 通过检查发布的值来识别单击了哪个按钮。当浏览器提交表单时，它会在 POST 请求中写入单击按钮的名称和值以及其他输入的名称和值，不包括其他提交输入。因此，单个提交输入的名称被发送到服务器，这样 ASP .Net 就会检查单击了哪个按钮。

此服务器控件还具有***UseSubmitBehavior***属性，如果将其设置为 false，它将生成按钮类型的输入。由于按钮不提交表单，ASP .Net 会生成一些 javascript 来完成这项工作

```
<script type="text/javascript">    
//<![CDATA[    
var theForm = document.forms['form1'];    
if (!theForm) {    
    theForm = document.form1;    
}

function __doPostBack(eventTarget, eventArgument) {    
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {    
        theForm.__EVENTTARGET.value = eventTarget;    
        theForm.__EVENTARGUMENT.value = eventArgument;    
        theForm.submit();    
    }    
}    
//]]>    
</script> 
```

通知**_EVENTTARGET *_****和*****_EVENTARGUMENT**字段。设置这些字段以便 ASP .Net 知道在客户端上单击了哪个按钮。**

 **```
<input type="button" 
      name="rptMain$ctl02$DeleteButton" 
      value="Delete" onclick="__doPostBack('rptMain$ctl02$DeleteButton','')"         
      id="rptMain_ctl02_DeleteButton" /> 
```

注意传递给 __doPostBack 函数的参数。输入的名称被传递并设置为 EVENTTARGET。EVENTTARGET 的值将由 ASP .Net 读取，并基于此触发 Click 事件`<asp:Button />`控件的 Click 事件

EVENTARGUMENT 由 ItemCommand 事件使用，通常放置在 DataBound 控件中并包含有关该操作的特定数据，稍后将在处理事件时使用。例如，该数据可以是数据库表中的行 ID。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T11:59:50.497

在 ASP.NET Web 表单中，所有按钮都会导致将整个表单提交到服务器。Web 表单引擎检查单击了哪个按钮并调用适当的事件处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T12:02:59.883

如果您指定控件的 onclick 属性，它不会像这样传递给客户端。相反，它仅在解析 aspx 文件时指定 IIS 的接线

替代看起来像这样：

```
myControl.Click += new EventHandler(specifiedMethod); 
```

所以当事件发生时，它知道调用哪个方法。**

# varnish - 清漆 vcl 有选择地清除缓存

> ID：10054233
> 
> 赞同：4
> 
> 时间：2012-04-07T11:53:28.937
> 
> 标签：varnish, varnish-vcl

所以我第一次使用清漆。我花了很长时间阅读它是如何工作的，但我无法弄清楚如何有选择地清除缓存。

比如说我有这样的网址

```
/?account=123&url=google.com 
```

和另一个喜欢

```
/?account=123&url=stackoverflow.com 
```

我需要在哪里清除缓存`account=123`。

我只能弄清楚发出 purge on

/?account=123&url=stackoverflow.com

只会使用 PURGE 方法清除 url 与传入 url 匹配的缓存。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T16:31:23.847

所以这就是有效的。在清漆 3 中，选择性清除称为禁令。所以你需要使用

```
ban("obj.http.x-url ~ " + req.url); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T12:07:57.553

We faced a similar problem and ended up using a separate X-Purge-Regex-URL request header for purging content using HTTP requests.

Here's the VCL we are using to accomplish this:

```
acl purge {
  "localhost";
  "10.1.1.0"/28;
}

sub vcl_recv {
  if (req.http.X-Purge-Regex-URL) {
    if (!client.ip ~ purge) {
      error 405 "Not allowed.";
    }
    ban_url(req.url);
    error 200 "Banned URL";
  }
} 
```

In your case we could purge the content using `curl -H "X-Purge-Regex-URL: True" --head "http://my.host.addr/?account=123"`

Do note that `ban_url()` doesn't care about HTTP host. It purges all the matching URLs from all the hosts. If this isn't something you want you should use `ban()` to ban the content by using `req.http.host` and `req.url`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T13:15:47.547

HTTP PURGE 方法允许您清除特定的 url。

要使用 regexp 进行清除，您必须使用 telnet 连接到 varnish 管理端口或使用命令行工具 varnishadm。

通常你可以这样做

```
telnet localhost 6082 
```

通过使用 telnet，在连接到 varnish 服务器后，您可以使用 purge 命令进行清除：

```
purge req.url ~ /?account=123 
```

以上将清除每个匹配 "/?account=123" 的 url

如果您想像使用 HTTP PURGE 请求一样清除特定页面，则必须使用双等号而不是波浪号 (~)

```
purge req.url == /?account=123 
```

您还可以清除整个域

```
purge req.http.host == yourdomain.com 
```

或您域上的特定页面：

```
purge req.http.host == yourdomain.com && req.url ~ /?account=123 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-29T14:33:41.750

我不是清漆专家，但这对我有用：

```
acl purge {
  "localhost";
  "10.1.1.0";
}

sub vcl_recv {
  if (req.http.X-Purge-Regex-URL) {
    if (!client.ip ~ purge) {
      error 405 "Not allowed.";
    }
    ban_url(req.url);
    #error 200 "Banned URL";
  }
} 
```

请注意，我注释掉了`error 200 "Banner URL"`- 在我的情况下是导致问题的原因。

# google-docs-api - Google Docs Web UI 警告自动文档升级（从 Writely 到 KIX）即将完成。它对开发人员来说是否安全且准备充分？

> ID：10054234
> 
> 赞同：2
> 
> 时间：2012-04-07T11:53:32.873
> 
> 标签：google-docs-api

当用户打开 Writely 文档时，Google 文档 Web UI 会警告“此文档将很快升级到最新版本的 Google 文档”。

我想知道转换对开发人员是否安全。

转换会将文档的资源 ID 从 Writely（旧版编辑器）类型更改为 KIX（最新编辑器）类型（通过 Web UI 进行手动转换）。如果是这样，转换可能会对具有与 Google Docs 同步功能的应用程序造成大问题。

资源 ID 是在同步时跟踪文档的关键。如果有一天，突然转换完成，该应用程序会发现所有 Writely 文档都已删除，并且服务器端会出现大量新的 KIX 文档。这不仅会花费用户大量的同步时间，而且他们会感到惊讶并认为应用程序已损坏。

我想避免麻烦。我对 Google Docs API 工作人员有两个问题。

1.  Google Docs 何时进行转换？

2.  您是否会提供一种方法来区分文档列表条目中自动转换的文档，例如“gd:writelyResourceId”和“gd:resourceId”？

谢谢你。

* * *

嗨，我还要问你一个问题给我们的客户。

转换后似乎真的没有办法通过 API 从 Writely URL（或资源 ID）获取 KIX URL（或资源 ID）。你不能为开发者提供它吗？

Google Docs 的 Web UI 接受旧的 Writely URL 并使用手动转换的文档重定向到新的 KIX URL。我认为 API 访问的情况是一样的。但似乎不是。

我们的应用程序使用资源 ID 在 Google 电子表格中存储每个 Google Docs 文档的元数据。当发生自动文档转换时，我们客户转换后的文档中的所有元数据都将丢失。

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T20:46:49.547

不幸的是，没有特定的方法可以知道文档是否已被转换。很抱歉。

从同步数据的应用程序中，看起来好像旧文档已被删除，而新文件已被创建。如果您正在使用更改提要，那么这将更容易检测到。否则，这将是确保没有重复项的最佳方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T09:07:57.073

使用 ClientLogin （实际上我不想使用它），我找到了一种方法来解决我的附加问题。以下是如何为过期的 Writely ID 获取新的 KIX ID。

1.  使用 ClientLogin 登录 Google Docs

2.  使用 Web UI 方式请求过期的 Writely Document 的网页

    https://docs.google.com/Doc?id=[写资源 ID]

3.  服务器返回 200 OK 并重定向到登录页面。但是，响应中的 URL 包含 KIX RESOURCE ID。提取它。

    https://accounts.google.com/ServiceLogin?service=wise&passive=xxxx&continue=https://docs.google.com/document/edit?id%3D[KIX RESOURCE ID]&followup=https://docs.google。 com/document/edit?id%3D[KIX 资源 ID]

# ms-access - 从一列提取数据到另一列 i ms 访问

> ID：10054235
> 
> 赞同：0
> 
> 时间：2012-04-07T11:53:36.937
> 
> 标签：ms-access

我有一个包含数据的地址字段（例如：24 Gordon Street,Primrose,PRETORIA）。使用 Like 语句进行查询：将“ *PRETORIA* ”作为查询中地址字段中的条件，以提取其中包含 PRETORIA 的所有地址。我想知道如何将比勒陀利亚或我选择提取的另一个城市放置在同一张表中名为 City 的列/字段中，或者将所有其他字段也包含在表中的新表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T08:39:55.173

要将您选择的城市名称放在同一个表中，您可以使用 UPDATE 查询：

```
UPDATE MyTable SET City = "Pretoria" 
WHERE Address Like "*Pretoria" 
```

但是，这不包括比勒陀利亚东等地址。你可以说：

```
UPDATE MyTable SET City = "Pretoria" 
WHERE Address Like "*Pretoria*" 
```

这样做的问题是它将包括比勒陀利亚大道，它可能不在比勒陀利亚市内。

您以大写形式显示城市名称，如果始终如此，您可以说：

```
UPDATE MyTable SET City = "Pretoria" 
WHERE InStr(1,[City],"PRETORIA",0)>0 
```

这是一个二进制比较，不会匹配比勒陀利亚。

要复制到另一个表，您需要使用 MAKE TABLE 查询 (SELECT ... INTO) 或 APPEND 查询 (INSERT INTO)。

```
SELECT * INTO MyNewTable
FROM MyTable
WHERE InStr(1,[City],"PRETORIA",0)>0
OR InStr(1,[City],"ALBERTON",0)>0

INSERT INTO MyNewTable 
SELECT * FROM MyTable
WHERE InStr(1,[City],"BENONI",0)>0 
```

使用 * 表示所有字段（列）通常不是一个好主意，但我在这里做了，因为我不知道你的字段名称。

您可能希望阅读：

[`Fundamental Microsoft Jet SQL for Access 2000`](http://msdn.microsoft.com/en-us/library/aa140011%28office.10%29.aspx)
[`Intermediate Microsoft Jet SQL for Access 2000`](http://msdn.microsoft.com/en-us/library/aa140015%28office.10%29.aspx)
[`Advanced Microsoft Jet SQL for Access 2000`](http://msdn.microsoft.com/en-us/library/aa139977%28office.10%29.aspx)

# android - android 使用 SimpleCursorAdapter 获取联系人姓名和号码

> ID：10054240
> 
> 赞同：1
> 
> 时间：2012-04-07T11:54:25.753
> 
> 标签：android, contacts, simplecursoradapter

我正在使用以下代码使用 SimpleCursorAdapter 检索联系人姓名和号码。

```
final Uri uri = ContactsContract.Contacts.CONTENT_URI;
    final String[] projection = new String[] {
            ContactsContract.Contacts._ID,
            ContactsContract.Contacts.DISPLAY_NAME };
    // boolean mShowInvisible = false;
    String selection = ContactsContract.Contacts.IN_VISIBLE_GROUP
            + " = '1'";
    String[] selectionArgs = null;
    final String sortOrder = ContactsContract.Contacts.DISPLAY_NAME
            + " COLLATE LOCALIZED ASC";

    m_curContacts = managedQuery(uri, projection, selection, selectionArgs,
            sortOrder);
    String[] fields = new String[] { ContactsContract.Data.DISPLAY_NAME, ContactsContract.CommonDataKinds.Phone.NUMBER};
    m_slvAdapter = new SimpleCursorAdapter(this,
            android.R.layout.simple_list_item_2, m_curContacts, fields,
            new int[] { android.R.id.text1,android.R.id.text2 }); 
```

但是当我运行它时，我收到以下错误

```
04-07 17:05:34.980: WARN/dalvikvm(614): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
04-07 17:05:34.990: ERROR/AndroidRuntime(614): Uncaught handler: thread main exiting due to uncaught exception
04-07 17:05:35.080: ERROR/AndroidRuntime(614): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.kpj4s.contactadapter/com.kpj4s.contactadapter.ContactAdapter}: **java.lang.IllegalArgumentException: column 'data1' does not exist**
04-07 17:05:35.080: ERROR/AndroidRuntime(614):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
04-07 17:05:35.080: ERROR/AndroidRuntime(614):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
04-07 17:05:35.080: ERROR/AndroidRuntime(614):     at android.app.ActivityThread.access$2200(ActivityThread.java:119)
04-07 17:05:35.080: ERROR/AndroidRuntime(614):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
04-07 17:05:35.080: ERROR/AndroidRuntime(614):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-07 17:05:35.080: ERROR/AndroidRuntime(614):     at android.os.Looper.loop(Looper.java:123)
04-07 17:05:35.080: ERROR/AndroidRuntime(614):     at android.app.ActivityThread.main(ActivityThread.java:4363)
04-07 17:05:35.080: ERROR/AndroidRuntime(614):     at java.lang.reflect.Method.invokeNative(Native Method)
04-07 17:05:35.080: ERROR/AndroidRuntime(614):     at java.lang.reflect.Method.invoke(Method.java:521)
04-07 17:05:35.080: ERROR/AndroidRuntime(614):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-07 17:05:35.080: ERROR/AndroidRuntime(614):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-07 17:05:35.080: ERROR/AndroidRuntime(614):     at dalvik.system.NativeStart.main(Native Method)
04-07 17:05:35.080: ERROR/AndroidRuntime(614): Caused by: java.lang.IllegalArgumentException: column 'data1' does not exist
04-07 17:05:35.080: ERROR/AndroidRuntime(614):     at android.database.AbstractCursor.getColumnIndexOrThrow(AbstractCursor.java:314)
04-07 17:05:35.080: ERROR/AndroidRuntime(614):     at android.database.CursorWrapper.getColumnIndexOrThrow(CursorWrapper.java:99)
04-07 17:05:35.080: ERROR/AndroidRuntime(614):     at android.widget.SimpleCursorAdapter.findColumns(SimpleCursorAdapter.java:339)
04-07 17:05:35.080: ERROR/AndroidRuntime(614):     at android.widget.SimpleCursorAdapter.<init>(SimpleCursorAdapter.java:91)
04-07 17:05:35.080: ERROR/AndroidRuntime(614):     at com.kpj4s.contactadapter.ContactAdapter.ReadContacts(ContactAdapter.java:158)
04-07 17:05:35.080: ERROR/AndroidRuntime(614):     at com.kpj4s.contactadapter.ContactAdapter.onCreate(ContactAdapter.java:132)
04-07 17:05:35.080: ERROR/AndroidRuntime(614):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-07 17:05:35.080: ERROR/AndroidRuntime(614):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
04-07 17:05:35.080: ERROR/AndroidRuntime(614):     ... 11 more 
```

当我删除**ContactsContract.CommonDataKinds.Phone.NUMBER**时，一切正常。当我使用那段代码时，错误就会出现。

有没有办法使用 SimpleCursorAdapter 获得联系人电话号码和姓名？

请帮帮我...

提前致谢 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T12:00:53.477

使用此代码获取电话号码和姓名。

```
public ArrayList<String> c_Name = new ArrayList<String>();
        public ArrayList<String> c_Number = new ArrayList<String>();
        static String[] name_Val = null;
        String[] phone_Val = null;
        String local_value = null;

    ContentResolver cr1 = getContentResolver();
            String[] projection = new String[] { People._ID, People.NAME,
                    People.NUMBER };
            Uri phone_contacts = People.CONTENT_URI;
            Cursor managedCursor = cr1.query(phone_contacts, projection, null,
                    null, People.NAME + " ASC");
            if (managedCursor.moveToFirst()) {
                String contactname;
                String cphoneNumber;
                int nameColumn = managedCursor.getColumnIndex(People.NAME);
                int phoneColumn = managedCursor.getColumnIndex(People.NUMBER);
                Log.d("int Name", Integer.toString(nameColumn));
                Log.d("int Number", Integer.toString(phoneColumn));
                do {

                    contactname = managedCursor.getString(nameColumn);
                    cphoneNumber = managedCursor.getString(phoneColumn);
                    Log.d("Outside cname", "ts" + contactname);
                    Log.d("Outside cno", "ts" + cphoneNumber);
                    if ((contactname == " " || contactname == null)
                            && (cphoneNumber == " " || cphoneNumber == null)) {
                        // displayAlert1();

                    } else {
                        c_Name.add(contactname);
                        c_Number.add(cphoneNumber);
                        Log.d("contact Name", c_Name.toString());
                        Log.d("contact No", c_Number.toString());
                    }
                } while (managedCursor.moveToNext());

            }

            Uri contacts = Uri.parse("content://icc/adn");

            Cursor managedCursor1 = cr1.query(contacts, null, null, null, null);

            if (managedCursor1.moveToFirst()) {

                String contactname;
                String cphoneNumber;

                int nameColumn = managedCursor1.getColumnIndex("name");
                int phoneColumn = managedCursor1.getColumnIndex("number");

                Log.d("int Name", Integer.toString(nameColumn));
                Log.d("int Number", Integer.toString(phoneColumn));

                do {
                    // Get the field values
                    contactname = managedCursor1.getString(nameColumn);
                    cphoneNumber = managedCursor1.getString(phoneColumn);
                    if ((contactname == " " || contactname == null)
                            && (cphoneNumber == " " || cphoneNumber == null)) {
                        // displayAlert1();

                    } else {
                        c_Name.add(contactname);
                        c_Number.add(cphoneNumber);
                    }
                } while (managedCursor1.moveToNext());

            }
            name_Val = (String[]) c_Name.toArray(new String[c_Name.size()]);
            phone_Val = (String[]) c_Number.toArray(new String[c_Name.size()]); 
```

# javascript - WordPress中的Jcarousel初始化

> ID：10054243
> 
> 赞同：0
> 
> 时间：2012-04-07T11:55:09.767
> 
> 标签：javascript, jquery, wordpress, jcarousel

我尝试在这篇虚拟文章[http://mybistrotableandchairs.com/hghg/中实现 jcarousel 画廊](http://mybistrotableandchairs.com/hghg/)

设置感觉还可以（查看页面源代码），但是 jcarousel 没有初始化。

我应该在代码中更改什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T11:58:35.250

您好，请参见此处的**演示**：http : [//jsfiddle.net/Znztg/](http://jsfiddle.net/Znztg/)

希望这可以帮助！并适用于多个轮播，代码更少。干杯

[http://sorgalla.com/projects/jcarousel/](http://sorgalla.com/projects/jcarousel/)如果您愿意，请阅读更多信息！

我最近用工作解决方案回复了帖子；因此重用我的代码:)) [在一个页面上这个轮播的多个实例 - 不能让它工作](https://stackoverflow.com/questions/10053780/multiple-instances-of-this-carousel-on-a-single-page-cant-get-it-to-work/10053975#10053975)

我还查看了您的实现，我认为 jsfiddle 和代码将帮助您随时对其进行排序休息轻弹我的消息，有一个好人！

**图书馆**

```
<!--

      jCarousel library
    -->
    <script type="text/javascript" src="http://sorgalla.com/projects/jcarousel/lib/jquery.jcarousel.min.js/lib/jquery.jcarousel.min.js"></script>
    <!--
      jCarousel skin stylesheets
    -->
    <link rel="stylesheet" type="text/css" href="http://sorgalla.com/projects/jcarousel/skins/tango/skin.css" />
    <link rel="stylesheet" type="text/css" href="http://sorgalla.com/projects/jcarousel/skins/ie7/skin.css" /> 
```

**jQuery 代码**

```
$(document).ready(function() {
    // Initialise the first and second carousel by class selector.
    // Note that they use both the same configuration options (none in this case).
    $('.first-and-second-carousel').jcarousel();

    // If you want to use a caoursel with different configuration options,
    // you have to initialise it seperately.
    // We do it by an id selector here.
    $('#third-carousel').jcarousel();
    // alert('foo');
}); 
```

**HTML**

```
</head>
<body>
<div id="wrap">
  <h1>jCarousel</h1>
  <h2>Riding carousels with jQuery</h2>

  <h3>Multiple carousels on one page</h3>
  <p>
    This example shows how to use multiple carousels on one page with different
        skins and configurations.
  </p>

  <ul id="first-carousel" class="first-and-second-carousel jcarousel-skin-tango">
    <li><img src="http://static.flickr.com/66/199481236_dc98b5abb3_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/75/199481072_b4a0d09597_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/57/199481087_33ae73a8de_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/77/199481108_4359e6b971_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/58/199481143_3c148d9dd3_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/72/199481203_ad4cdcf109_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/58/199481218_264ce20da0_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/69/199481255_fdfe885f87_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/60/199480111_87d4cb3e38_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/70/229228324_08223b70fa_s.jpg" width="75" height="75" alt="" /></li>
  </ul>

  <hr size="1"/>

  <ul id="second-carousel" class="first-and-second-carousel jcarousel-skin-ie7">
    <li><img src="http://static.flickr.com/66/199481236_dc98b5abb3_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/75/199481072_b4a0d09597_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/57/199481087_33ae73a8de_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/77/199481108_4359e6b971_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/58/199481143_3c148d9dd3_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/72/199481203_ad4cdcf109_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/58/199481218_264ce20da0_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/69/199481255_fdfe885f87_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/60/199480111_87d4cb3e38_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/70/229228324_08223b70fa_s.jpg" width="75" height="75" alt="" /></li>
  </ul>

  <hr size="1"/>

  <ul id="third-carousel" class="jcarousel-skin-tango">
    <li><img src="http://static.flickr.com/66/199481236_dc98b5abb3_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/75/199481072_b4a0d09597_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/57/199481087_33ae73a8de_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/77/199481108_4359e6b971_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/58/199481143_3c148d9dd3_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/72/199481203_ad4cdcf109_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/58/199481218_264ce20da0_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/69/199481255_fdfe885f87_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/60/199480111_87d4cb3e38_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/70/229228324_08223b70fa_s.jpg" width="75" height="75" alt="" /></li>
  </ul>

</div>
</body>​ 
```

# c++ - 无法在 win7 64 位上使用 __asm int 3 或 DebugBreak 或 __debugbreak() 进行调试

> ID：10054244
> 
> 赞同：2
> 
> 时间：2012-04-07T11:55:10.383
> 
> 标签：c++, visual-studio-2008, debugging, windows-7, debugbreak

我无法使用 _asm int 3 启动 Visual Studio 2008 调试**器*，****或者*****_debugbreak()**或**DebugBreak()**。我正在尝试通过嵌入“__asm int 3;”来调试 C++ DLL 在其中，构建项目并将生成的 dll 替换为由 exe 启动的dll。我无法从 Visual Studio 2008 本身启动该 exe，因为该 exe 是由另一个程序启动的，我无法控制。我有 Windows 7 64 位。请帮忙。**

# ruby-on-rails - Resque：按用户顺序执行的时间关键型作业

> ID：10054248
> 
> 赞同：5
> 
> 时间：2012-04-07T11:55:50.137
> 
> 标签：ruby-on-rails, queue, resque

我的应用程序创建了必须按用户顺序处理的 resque 作业，并且应该尽可能快地处理它们（最大延迟 1 秒）。

示例：为 user1 创建 job1 和 job2，为 user2 创建 job3。Resque 可以并行处理 job1 和 job3，但是 job1 和 job2 应该顺序处理。

我对解决方案有不同的想法：

*   我可以使用不同的队列（例如 queue_1 ... queue_10）并为每个队列启动一个工作人员（例如`rake resque:work QUEUE=queue_1`）。用户在运行时（例如登录时、每天等）被分配给队列/工作人员
*   我可以使用动态“用户队列”（例如 queue_#{user.id}）并尝试扩展 resque 以使一次只能有 1 个工作人员处理一个队列（如[Resque 中所述：每个队列一个工作人员](https://stackoverflow.com/questions/9266415/resque-one-worker-per-queue)）
*   我可以将作业放在非 resque 队列中，并使用处理这些作业的 resque-lock ( [https://github.com/defunkt/resque-lock ) 的“每用户元作业”。](https://github.com/defunkt/resque-lock)

您在实践中对其中一种情况有任何经验吗？还是有其他值得思考的想法？我将不胜感激任何输入，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T14:16:23.477

感谢@Isotope的回答，我终于找到了一个似乎可行的解决方案（使用resque-retry并锁定redis：

```
class MyJob
  extend Resque::Plugins::Retry

  # directly enqueue job when lock occurred
  @retry_delay = 0 
  # we don't need the limit because sometimes the lock should be cleared
  @retry_limit = 10000 
  # just catch lock timeouts
  @retry_exceptions = [Redis::Lock::LockTimeout]

  def self.perform(user_id, ...)
    # Lock the job for given user. 
    # If there is already another job for the user in progress, 
    # Redis::Lock::LockTimeout is raised and the job is requeued.
    Redis::Lock.new("my_job.user##{user_id}", 
      :expiration => 1, 
      # We don't want to wait for the lock, just requeue the job as fast as possible
      :timeout => 0.1
    ).lock do
      # do your stuff here ...
    end
  end
end 
```

我在这里使用来自[https://github.com/nateware/redis-objects](https://github.com/nateware/redis-objects)的 Redis::Lock （它封装了来自[http://redis.io/commands/setex](http://redis.io/commands/setex)的模式）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T09:12:12.667

我以前做过。

确保按顺序处理此类事情的最佳解决方案是让 job1 的结尾对 job2 进行排队。然后job1和job2可以进入同一个队列或不同的队列，顺序无关紧要，这取决于你。

任何其他解决方案，例如同时排队作业 1+2，但告诉作业 2 在 0.5 秒内开始会导致竞争条件，因此不建议这样做。

让job1触发job2也很容易做到。

如果您想要另一个选项：我的最终建议是将两个作业捆绑到一个作业中，并添加一个参数以判断第二部分是否也应该被触发。

例如

```
def my_job(id, etc, etc, do_job_two = false)
  ...job_1 stuff...
  if do_job_two
    ...job_2 stuff...
  end
end 
```

# java - 尝试使用 Rhino，getEngineByName("JavaScript") 在 OpenJDK 7 中返回 null

> ID：10054252
> 
> 赞同：14
> 
> 时间：2012-04-07T11:56:40.437
> 
> 标签：java, javascript, rhino, openjdk, javax.script

当我运行以下代码时，`engine`变量设置为`null`当我使用 OpenJDK 7 ( `java-7-openjdk-i386`) 时。

```
import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;
import javax.script.ScriptException;

public class TestRhino {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        ScriptEngineManager factory = new ScriptEngineManager();
        ScriptEngine engine = factory.getEngineByName("JavaScript");
        try {
            System.out.println(engine.eval("1+1"));
        } catch (ScriptException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

} 
```

它`java-6-openjdk`与 Oracle 的`jre1.7.0`. 知道为什么吗？

我正在使用 Ubuntu 11.10。所有 JVM 都安装在`/usr/lib/jvm`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T19:02:25.380

[更新：这是一个错误，现已[修复](https://bugs.launchpad.net/ubuntu/+source/openjdk-7/+bug/982501)]

简而言之，这可能是一个错误。

Rhino支持`com.sun.script.javascript.*`类`rt.jar`^（，并且它们也从`resources.jar`'s`META-INF/services`中丢失。这不是 OpenJDK 6 的情况，它有一个`META-INF/services/javax.script.ScriptEngineFactory`条目：

```
#script engines supported

com.sun.script.javascript.RhinoScriptEngineFactory #javascript 
```

尽管这可能是发行版决定²，但没有书面理由，因此我[在 Ubuntu OpenJDK 7 启动板中提交了错误 #982501](https://bugs.launchpad.net/ubuntu/+source/openjdk-7/+bug/982501)。一旦我得到一个会给出更好的答案。

1根据[这个线程](http://mail.openjdk.java.net/pipermail/macosx-port-dev/2011-August/000780.html)，

> 我在某处听说 Mozilla 不接受 Suns 对其主线分支的更改，原因不明，但那是在开源之前。

由于 JRE 版本和 BYOR（自带犀牛）版本冲突（例如[Ubuntu OpenJDK 7 启动板上的错误 #255149](https://bugs.launchpad.net/ubuntu/+source/openjdk-6/+bug/255149) ），还存在一些冲突问题。但是，源代码在 OpenJDK 7[源代码](http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/9b8c96f96a0f/src/share/classes/com/sun/script/)中并在[makefile](http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/9b8c96f96a0f/make/com/sun/script/Makefile)中提到，并且上述线程中提到的 BSD 端口具有相同的[源代码](http://hg.openjdk.java.net/bsd-port/bsd-port/)。

2 根据这个 Sun[错误 #6876736](http://bugs.sun.com/view_bug.do?bug_id=6876736)，这是基于发行版的决定：

> rhino 源不是 OpenJDK 的一部分，由发行版添加它。

与它们被签入 OpenJDK mercurial 的事实有些相反，但我认为这个想法是 Rhino 不在 JDK 规范中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T04:31:09.837

您必须注册 Rhino 服务，但我不知道具体如何，是通过在 META-INF 中创建一个文件

或者您可以跳过脚本 API 并直接使用它。

检查这个基本示例：

[https://github.com/mozilla/rhino/blob/master/examples/Control.java](https://github.com/mozilla/rhino/blob/master/examples/Control.java)

# php - 使用 cron 将 bash 值检索到 PHP 变量中时出错

> ID：10054254
> 
> 赞同：0
> 
> 时间：2012-04-07T11:56:57.047
> 
> 标签：php, cron

我使用 cron 来运行 PHP：

```
* * * * * /var/www/html/new12345/testing.sh 
```

这个 bash 包含：

```
#!/usr/bin/php -q   /var/www/html/new12345/shell_call.php 
```

我`shell_call.php`有一个变量：

```
$a= shell_exec("./main.sh $l"); 
```

我`main.sh`的假设是返回一个特定的文件名，它在终端中执行时返回。

但是，当我尝试`main.sh`从这个过程运行时，我发现 a 的值为`null`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T12:04:48.960

作为第一个嫌疑人，我会查看 php 脚本的工作目录。尝试：

`$a= shell_exec(dirname(__FILE__). "/main.sh $l");`

# c++ - 优化获取 Widget 的绝对矩形？

> ID：10054257
> 
> 赞同：0
> 
> 时间：2012-04-07T11:57:01.930
> 
> 标签：c++, optimization

我正在分析我的游戏，似乎我在这里花了很多时间：

```
 const Rectangle Widget::getAbsoluteRectangle() const
0.01s       {
            Point absLocation;

0.00s           absLocation = getLocation();

            if(!getParent())
            {
                return Rectangle(absLocation.getX(),absLocation.getY(),
                    getSize().getWidth(),getSize().getHeight());
            }

            const Widget* parent = this;
            int eX = 0;
            int eY = 0;

            while(parent->getParent() != NULL)
            {
0.02s               parent = parent->getParent();

0.01s               eX = parent->getMargin(SIDE_LEFT);
0.04s               eY = parent->getMargin(SIDE_TOP);

0.03s               absLocation.setX(absLocation.getX() + parent->getLocation().getX() + eX);
0.04s               absLocation.setY(absLocation.getY() + parent->getLocation().getY() + eY);
            }

0.02s           return Rectangle(absLocation,getSize());
0.01s       } 
```

我想可能会缓存这个结果并在它的父母之一移动或调整大小时使其无效，但首先我想知道是否有任何明显的优化。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T12:23:24.743

您的问题是您每次都在重新计算父母的位置。你需要做的是一个递归算法来一次计算它们。例如：

```
class Widget {
public:
    Rectangle AbsolutePosition;
    Rectangle RelativePosition;
    std::vector<Widget*> children;

    void ComputePositions(Rectangle ParentPosition) {
        ComputeAbsoluteFromParentAndRelative(ParentPosition);
        std::for_each(children.begin(), children.end(), [&](Widget* child) {
            child->ComputePositions(AbsolutePosition);
        });
    }
}; 
```

使用此方法，每个小部件的位置仅计算一次，并且当前绝对位置已被缓存。此外，如果需要，循环可以很简单地并行化，因为每次迭代都是独立的。最后，您可以轻松控制调用的级别`ComputePositions`，而不必每次都在根目录调用它。

# ruby - 检查结果是否是在 MongoMapper 中新创建的

> ID：10054258
> 
> 赞同：0
> 
> 时间：2012-04-07T11:57:04.493
> 
> 标签：ruby, mongodb, mongomapper

使用 MongoMapper 的 find_or_create_by_attr 方法时，是否可以检查返回的结果是在数据库中找到的还是新创建的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T16:07:27.233

在查看了 MongoMapper 源代码后，我真的看不出有什么方法可以检测到这一点。我认为当您不在乎它是现有项目还是新项目时，可以使用该方法。如果你真的关心，你可能想把它分成一个 find_by_attr 调用，检查它是否存在，然后调用 create！如果没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T19:31:09.213

您可以尝试`MyModel.find_or_initialize_by_attr`然后检查`my_obj.persisted?`并`save`在必要时致电。

# scala - Play 2.0 模板 - 使用字符串，然后将其呈现为 HTML

> ID：10054261
> 
> 赞同：0
> 
> 时间：2012-04-07T11:57:43.990
> 
> 标签：scala, playframework-2.0

在使用 Scala 的 Play 2.0 中，我想创建一个工厂，它接受一个 html 片段并将每一行放在一个`<div>`块中。我尝试了几种我能想到的方法，但它总是出现 String/Html 的类型错误，或者将 html 代码写在页面上，就好像它是文本一样。有谁知道如何做到这一点？

**更新：**

我想看到的是这样的：

```
@factories.f_div_lines {
   <a href="/aabbcc"> abc </a>
   <a href="/ccbbdd"> cbd </a>
   <a href="/bbddee"> bde </a>
   <a href="/ddeeff"> def </a>
   <a href="/eeffgg"> efg </a>
} 
```

并且所有`<a href>`标签都会被`<div>`'s包围

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-07T12:55:10.403

如果您的意思是将多行字符串拆分为不同`div`的 s，请编写如下模板：

```
@(message: String)

@for(line <- message.lines) {
  <div>@line</div>
} 
```

Play 会自动转义 HTML 内容，因此如果您`message`包含任何内容，则必须通过调用来禁用转义`Html`，例如在循环中

```
<div>@Html(line)</div> 
```

并以这种方式调用它：

```
Ok(views.html.index("First\nSecond\nThird")) 
```

请参阅**迭代**部分的[播放指南](http://www.playframework.org/documentation/2.0/ScalaTemplates)

 ****更新** 以下代码定义了`split_lines_in_divs`哪个接受`Html`参数，将其转换为`String`对象并应用与上面相同的代码。请注意，我使用了 Play`main`自动生成的 Play 函数！当你创建一个新的 Scala 项目来提供通用的 HTML 片段时

```
@(message: String)

@split_lines_in_divs(the_html: Html) = {
  @for(line <- the_html.toString().lines) {
    <div>@Html(line)</div>
  }
}

@main("The title"){ 

  @split_lines_in_divs {
    <a href="test">Test</a>
    <a href="test2">Test2</a>
  }
} 
```**

# android - 清理代码后，Android ADV 无法正常工作

> ID：10054262
> 
> 赞同：0
> 
> 时间：2012-04-07T11:57:54.380
> 
> 标签：android, sqlite, emulation

我遇到了一个奇怪的问题。我刚刚清理了我的代码，因为在 Eclipse 中安装了 Android Emmulator SQLite 数据库后，我的数据库的每一行都有红线（错误）问题。我在普通模拟器上运行 SQLite 测试。在此之前，我使用手机运行程序。所以，我现在清理代码，更改构建路径（正如 eclipse 建议我更改它），我遇到了这个问题。我尝试进行 HTC Sync 但仍然无法正常工作！:(请帮忙！

> [2012-04-07 12:51:09 - devilscan] Android 发布！[2012-04-07 12:51:09 - devilscan] adb 运行正常。[2012-04-07 12:51:09 - devilscan] 未找到启动器活动！[2012-04-07 12:51:09 - devilscan] 启动只会同步设备上的应用程序包！[2012-04-07 12:51:09 - devilscan] 执行同步 [2012-04-07 12:51:11 - devilscan] 警告：应用程序未指定 API 级别要求！[2012-04-07 12:51:11-devilscan] 设备 API 版本为 8（Android 2.2.1） [2012-04-07 12:51:11-devilscan] 将devilscan.apk 上传到设备'HT08DPY02479' [2012 -04-07 12:51:13 - devilscan] 安装 devilscan.apk... [2012-04-07 12:51:29 - devilscan] 成功！[2012-04-07 12:51:29 - devilscan] \devilscan\bin\devilscan.apk 安装在设备上 [2012-04-07 12:51:29 - devilscan] 完成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T22:57:31.327

我没有找到解决问题的方法，但现在我已经删除了项目（在此之前我将所有代码复制到某处）我创建了一个新项目，现在很好！:)

感谢那些好心回答我的问题的人。

# android - 如何仅在用户/电话处于活动状态时运行服务？

> ID：10054264
> 
> 赞同：1
> 
> 时间：2012-04-07T11:58:20.307
> 
> 标签：android

我只想`Service`在用户处于活动状态或更一般的情况下运行：当手机处于活动状态时。无需在屏幕关闭时运行服务。但是一旦用户解锁他的手机，我希望该服务再次运行。

我如何实现这种行为？

我的实际任务：我想捕获 logcat。因此，我创建了`Service`一个线程，该线程读取“logcat”进程的输出。

当手机被锁定时，该后台线程的行为究竟如何？它没有任何唤醒锁或东西。当手机进入睡眠状态时，Android 会暂停线程还是该线程会阻止 Android 进入睡眠状态？手机唤醒后如何恢复？

我还考虑过通过“AlarmManager”注册一个警报，该警报每 15 分钟触发一次并解析 logcat。但是使用这种方法，我可能会错过一些 logcat 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T12:32:50.103

**重新启动服务**`ACTION_USER_PRESENT`：您可以为或注册一个接收器`ACTION_SCREEN_ON`：当用户在场时（当手机处于活动状态时）在设备唤醒后（例如，当键盘锁消失时）由系统发送。或当手机屏幕打开时。

**停止服务**：`ACTION_SCREEN_OFF`当用户不存在或移动屏幕关闭时，使用由设备发送的意图

# php - PHP - Perl compatible regexp

> ID：10054267
> 
> 赞同：-1
> 
> 时间：2012-04-07T11:58:39.993
> 
> 标签：php, regex, validation, filter, email-validation

How do I turn this regexp

```
[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])? 
```

from this site: [http://www.regular-expressions.info/email.html](http://www.regular-expressions.info/email.html)

into a Perl compatible regexp required by PHP in the filter_var function under FILTER_VALIDATE_REGEXP?

If I just add it to the options as-is I get this error: filter_var() [function.filter-var]: Unknown modifier '+' in ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T12:01:07.637

You need to wrap the expression with a [delimiter](http://php.net/manual/en/regexp.reference.delimiters.php) (`/` is most commonly used):

```
/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/ 
```

# c - C 中 char* 和 char[] 的区别

> ID：10054271
> 
> 赞同：5
> 
> 时间：2012-04-07T11:59:15.017
> 
> 标签：c, arrays, pointers

> **可能重复：**
> [C - “char var[]”和“char *var”之间的区别？](https://stackoverflow.com/questions/1880573/c-difference-between-char-var-and-char-var)

我编写了以下 C 代码

```
#include<stdio.h>
int main()
{
    char name[31];
    char *temp;
    int i ;
    scanf("%s",name);
    temp  = name;
    name = temp;

} 
```

编译时出现以下错误

```
incompatible types when assigning to type 'char[31]' from type 'char *' 
```

数组名称是指向第一个元素的指针（这里是 char 指针..对吗？）。对吧？上面的代码表示字符数组和char*是不同的类型..是真的吗？为什么名称类型！= char * 为什么我不能将另一个 char 指针分配给 char 指针（数组名称）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-07T12:00:55.893

> 数组名称是指向第一个元素的指针（这里是 char 指针..对吗？）。对？

错误的。在大多数情况下，数组*衰减*为指向第一个元素的指针，但它们肯定不是指针。[C FAQ](http://c-faq.com/aryptr/aryptr2.html)中有一个很好的解释和一张无价的图片（a 是一个数组，p 是一个指针）：

![数组和指针](../Images/7742847146c2e21a766d09bf33dade0f.png)

> 从类型'char *'分配给类型'char [31]'时不兼容的类型

在 C 中，数组是不可修改的左值，您无法更改它们指向的内容，因为它们**一开始并不指向任何地方**。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-07T12:18:58.400

> “数组名称是指向第一个元素的指针（这里是 char 指针..对吗？）。对吗？”

```
char name[31];
char *temp;
/* ... */
name = temp; 
```

在`name = temp`赋值中， 的值`name`被转换为指向 的指针`char`。转换的是值，**而不是**对象。该对象仍然是一个数组，并且数组不是可修改的左值。由于赋值操作数的约束要求赋值运算符的左操作数是可修改的左值，因此出现错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T12:00:48.400

首先，数组是内存缓冲区，而不是指针，尽管它们可能会在需要时衰减为指针。

现在，`name`是一个数组，所以你不能分配给它。当你把一个数组赋值给一个指针时，这个数组衰减为一个指针，赋值是有效的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-07T12:01:48.183

不，指针指向相同类型的对象。这意味着如果分配得当，指针可以用作完全成熟的数组。
NON 指针意味着您“面前”有数据，这不会让您正确获取数据（也有生命周期问题），所以说实话，指针最好在任何地方使用你的情况。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-07T12:02:31.293

因为'name'是一个数组。所以这一行：

```
name = temp; 
```

会给你错误。

此外，您在 for 循环中的条件是错误的。name[] 会有垃圾值，你不能使用

```
name[i]!='\0' 
```

作为条件。

# winforms - VS2010 Tabcontrol 在设计器模式下无法选择

> ID：10054274
> 
> 赞同：0
> 
> 时间：2012-04-07T11:59:22.100
> 
> 标签：winforms, visual-studio-2010

在 Windows 窗体应用程序中，我有带有多个标签页的 tabcontrol。在设计模式下我无法选择选项卡，为什么？

# javascript - Zend 应用程序中的表单域弹出窗口

> ID：10054275
> 
> 赞同：0
> 
> 时间：2012-04-07T11:59:36.033
> 
> 标签：javascript, zend-framework, popup, element

我创建了一个基于 Zend 的 php 应用程序。

我正在寻找一种简单的方法来创建弹出窗口或悬停帮助，我可以使用它来为用户应输入的字段提供用户帮助。

我想我需要 javascript，并且对于 Zend 表单元素需要一些装饰器。但我一直无法弄清楚它应该如何工作。也许我也需要一些 CSS？

有没有人有例子。

亲切的问候，文森特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T12:16:46.763

您可以使用 jquery 插件进行验证，这将阻止表单提交，直到通过第一级检查。您可以在 jquery 的文档页面上找到更多信息。但永远不要相信那些支票。您应该始终在后端验证用户输入

[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

或者你使用这个，基于 jquery

```
<!DOCTYPE html>
<html>
<head>
  <title>Form Info</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

  <script type="text/javascript">
    $(document).ready(function(){
      $(':input.form-input').live('focus', function(){ //get input field
      $(this)
      .closest("div") //get up to div element
      .find(".form-info") //and search for corresponding form-info class to that input field
      .show(); //show it
      }).live('blur', function(){
      //once you leave the input field you might to some things

      //...

      //or just remove the element
      $(this)
      .closest("div") //get up to div element
      .find(".form-info") //and search for corresponding form-info class to that input field
      .hide(); //hide it
      });
    });
  </script>

</head>
<body>

  <div>
      <input type="text" name="blub" value="" class="form-input" />
      <span class="form-info" style="display:none;">my info to the customer</span>
  </div>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T15:21:00.963

我认为您正在为您的控件寻找工具提示。

看看这个[jQuery Tooltip Plugin Demo](http://jquery.bassistance.de/tooltip/demo/)

或者这个[jQuery 工具：工具提示](http://jquerytools.org/demos/tooltip/index.html)

# c++ - Vector_push back 不填充向量（c++）

> ID：10054281
> 
> 赞同：0
> 
> 时间：2012-04-07T12:00:33.173
> 
> 标签：c++, vector, push-back

我没有收到任何错误消息，只是我的向量没有填充。查看观察列表中的向量，没有任何内容被复制。为什么是这样？我试过两种方法。首先

```
std::vector<Point3D*>   hitpoints;
local_hit_point = sr.local_hit_point; //local_hit_point class Point3D 
hitpoints.push_back(local_hit_point); 
```

我尝试使用指针的第二种方式

```
std::vector<Point3D*>   hitpoints; 
Point3D* hittingpoint_ptr = new Point3D;
local_hit_point = sr.local_hit_point;
hittingpoint_ptr = &local_hit_point;
hitpoints.push_back(hittingpoint_ptr); 
```

我在我的代码中的其他地方得到了向量，这些向量有效。我真的只是愚蠢，但我似乎无法弄清楚为什么它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T12:43:11.650

我最好的猜测是你的调试器有问题..

第一个建议；

*   清除监视列表中的所有内容，因为他们可以更改执行的行为再次检查它..

第二个建议；

*   创建一个新项目并像上面那样编写一个简单的代码，看看你的向量是否正在填充。如果这个简单的项目有效，你应该向我们提供更多的代码和细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T12:52:23.323

> 只是我的向量没有填充。

它正在人口中。然而

> 查看观察列表中的向量...我使用了 hitpoint.size()

函数/方法调用的结果（size() 是一种方法）不会在 Visual Studio 监视列表中自动更新（因为你没有告诉你使用什么操作系统/编译器，我不得不假设它是 Visual Studio）。即如果您将函数调用输入到监视列表中，它将计算结果，但在您手动刷新之前不会再次调用函数。代替函数调用，将向量本身添加到监视列表中。

# c++ - 使用 C/C++ 在 Linux 中读取内核信息

> ID：10054290
> 
> 赞同：0
> 
> 时间：2012-04-07T12:01:15.017
> 
> 标签：c++, linux, linux-kernel

有时我需要检索一些系统数据，如 CPU 使用率、进程信息等。我通常在 /proc/...中找到这些数据。我在 C/C++ 中所做的是读取 /proc/ 中的正确文件。 ..，解析它并获取信息。这很麻烦，并且不知何故取决于内核版本。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T12:26:01.713

不幸的是，Linux 内核不提供任何可用于检索通过`/proc`. 在这种情况下，您最好的选择是继续使用该文件系统。

如果它让您感觉更好，那么所有的工具（如`top`，`ps`或`htop`全部使用`/proc`文件系统）。如果您在使用它时遇到问题，您应该查看他们的来源。

# java - 使Java消耗大量CPU的外部进程

> ID：10054292
> 
> 赞同：4
> 
> 时间：2012-04-07T12:01:34.280
> 
> 标签：java, multithreading, performance, exec, cpu-usage

在尝试调试为什么我的多线程 Java 应用程序消耗大量 CPU 时，我发现每个线程都执行一个外部命令，这根本不是 CPU 密集型的，但是当 Java 运行它时，我发现 Java 运行时占用了我 100% 的 CPU。

为了进一步调试，我用简单的 Linux“ls”命令替换了该外部进程。这是我的运行方式-

```
String[] commands = new String[]{"/bin/sh", "-c", "ls"};
            try {
                Process p = Runtime.getRuntime().exec(commands);
             } catch (IOException ex) {
               //
} 
```

尽管如此，我还是看到 Java 使用了所有的 CPU。

我什至没有从进程中读取任何输出，也没有打开任何类型的流。

有什么问题？从 Java 外部运行时，为什么一个简单的`ls`命令会导致 Java 运行时消耗大量 CPU？

我没有运行外部命令来模拟线程处理，而是尝试放置 Thread.Sleep() 并且它工作正常 - 不再占用 CPU

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T13:06:14.257

看起来像一个已知问题，我想我需要使用这个 - [https://github.com/axiak/java_posix_spawn](https://github.com/axiak/java_posix_spawn)

更新：

使用 java_posix_spawn 后，问题就消失了！

# java - 从对象执行方法，其中方法名称作为字符串传递？

> ID：10054293
> 
> 赞同：1
> 
> 时间：2012-04-07T12:01:42.863
> 
> 标签：java, android

我想知道我是否有一个定义为：

```
void executeFunc(String funcName) 
```

我可以以某种方式执行 MyObject.funcName(); 吗？

我想做的是有一个类来处理对服务器的所有调用，然后它们返回 XML 数据，所以我想使用一个 AsyncTask 来处理 15 种左右不同类型的调用。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T12:03:08.913

你可以使用[反射](http://docs.oracle.com/javase/tutorial/reflect/index.html)来做到这一点。

# javascript - clearInterval 和暂停游戏

> ID：10054295
> 
> 赞同：0
> 
> 时间：2012-04-07T12:02:05.973
> 
> 标签：javascript, html

```
 this.update = function() {
    if (state == "game") {
      if (jaws.pressed("p") && !jaws.paused) {
        jaws.paused = true;
        setTimeout(function() {
          var unpause_interval_id = setInterval(function() {
            if (jaws.pressed("p") && jaws.paused) {
              jaws.paused = false;
              clearInterval(unpause_interval_id);
            }
          });
        }, 5000);
      } 
```

那是我尝试暂停我正在开发的游戏。基本上，当播放器暂停时，我将 5 秒的超时设置为检查播放器是否要取消暂停的函数。

但是，我没有成功清除间隔， clearInterval 函数不起作用，我从我调试的内容中确定。知道我做错了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T12:20:30.940

怎么样：

```
function p_unp()
{
   jaws.paused = !jaws.paused;
}

jaws.on_keypress("p", p_unp); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-07T12:14:01.343

我建议删除`setInterval`功能。`while loop`相反：

```
 this.update = function() {
    if (state == "game") {
      if (jaws.pressed("p") && !jaws.paused) {
        jaws.paused = true;
        while (jaws.paused) {
            if (jaws.pressed("p") && jaws.paused) {
              jaws.paused = false;
            }
        }
    });
  } 
```

# heroku - Heroku 部署 - 模型错误

> ID：10054296
> 
> 赞同：0
> 
> 时间：2012-04-07T12:02:18.220
> 
> 标签：heroku, playframework-2.0

我正在尝试在 Heroku 上部署计算机数据库 java 示例应用程序。部署已完成，但访问页面时出现以下错误：

```
[32m2012-04-07T09:00:37+00:00 app[web.1]:←[0m  at 
play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:63) 
[play_2.9.1-2.0.jar:2.0] 
[32m2012-04-07T09:00:37+00:00 app[web.1]:←[0m  at akka.actor.Actor 
$class.apply(Actor.scala:290) [akka-actor-2.0.jar:2.0] 
[32m2012-04-07T09:00:37+00:00 app[web.1]:←[0m play.core.ActionInvoker$ 
$anonfun$receive$1$$anon$1: Execution exception 
[[PersistenceException: models.Computer is NOT an Entity Bean 
registered with this server?]] 
[32m2012-04-07T09:00:37+00:00 app[web.1]:←[0m  at 
play.core.ActionInvoker.apply(Invoker.scala:61) [play_2.9.1-2.0.jar: 
2.0] 
[32m2012-04-07T09:00:37+00:00 app[web.1]:←[0m  at 
akka.actor.ActorCell.invoke(ActorCell.scala:617) [akka-actor-2.0.jar: 
2.0] 
[32m2012-04-07T09:00:37+00:00 app[web.1]:←[0m Caused by: 
javax.persistence.PersistenceException: models.Computer is NOT an 
Entity Bean registered with this server? 
[32m2012-04-07T09:00:37+00:00 app[web.1]:←[0m  at 
akka.dispatch.Mailbox.processMailbox(Mailbox.scala:179) [akka- 
actor-2.0.jar:2.0] 
[32m2012-04-07T09:00:37+00:00 app[web.1]:←[0m  at 
com.avaje.ebeaninternal.server.core.DefaultServer.createQuery(DefaultServer.java: 
1031) ~[ebean-2.7.3.jar:na] 
[32m2012-04-07T09:00:37+00:00 app[web.1]:←[0m  at 
com.avaje.ebeaninternal.server.core.DefaultServer.createQuery(DefaultServer.java: 
988) ~[ebean-2.7.3.jar:na] 
[32m2012-04-07T09:00:37+00:00 app[web.1]:←[0m  at 
com.avaje.ebeaninternal.server.core.DefaultServer.find(DefaultServer.java: 
1024) ~[ebean-2.7.3.jar:na] 
[32m2012-04-07T09:00:37+00:00 app[web.1]:←[0m  at play.db.ebean.Model 
$Finder.query(Model.java:258) ~[play_2.9.1-2.0.jar:2.0] 
[32m2012-04-07T09:00:37+00:00 app[web.1]:←[0m  at play.db.ebean.Model 
$Finder.where(Model.java:706) ~[play_2.9.1-2.0.jar:2.0] 
[32m2012-04-07T09:00:37+00:00 app[web.1]:←[0m  at 
models.Computer.page(Computer.java:48) ~[computer- 
database_2.9.1-1.0.jar:1.0] 
```

你能帮忙吗... 来源与github[计算机数据库](https://github.com/playframework/%20%20Play20/tree/master/samples/java/computer-database)示例相同

-S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T15:55:26.920

我进行了通常的更改以在 Heroku 上运行它，它运行良好：
[https ://github.com/jamesward/Play20/commit/636216527b77477bfa1e523df813fa3cf33b15c0](https://github.com/jamesward/Play20/commit/636216527b77477bfa1e523df813fa3cf33b15c0)

# java - 在 Java 的接口中分配变量是合法的吗？

> ID：10054298
> 
> 赞同：1
> 
> 时间：2012-04-07T12:02:55.687
> 
> 标签：java, interface

```
public interface GroupedInterface extends Interface1, Interface2, Interface3 {

    // constant declarations

    // base of natural logarithms
    double E = 2.718282;

    // method signatures
    void doSomething (int i, double x);
    int doSomethingElse(String s);
} 
```

（我正在从 oracle 的网站上学习。​​这是从那里开始的。）这是一个接口定义，但我们为双精度类型的 E 分配了一个数字。是否有可能所有变量都可以声明 int 类型的 x,y,z 然后为它们分配一些数字（是常量声明还是常量声明是什么？）？上面的代码中E是否有特殊条件等？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T12:12:59.303

在接口中声明的变量`static`默认`final`情况下是允许的。因此，您可以为变量设置初始值，但不能更改它们。

# java - 使用 MongoDB 更新数组

> ID：10054301
> 
> 赞同：3
> 
> 时间：2012-04-07T12:03:07.127
> 
> 标签：java, spring, mongodb

我有 JSON 喜欢：

> {“_id”：“1”，“_class”：“com.model.Test”，“itemList”：[{“itemID”：“1”，“itemName”：“Foo”，“资源”：[{“ resourceID”：“1”，“resourceName”：“Foo Test1”，}，{“resourceID”：“2”，“resourceName”：“Foo Test2”，}]}]}

我需要能够更新资源列表。我做了以下事情：

```
 BasicDBObject updateQuery = new BasicDBObject();
    updateQuery.put("id", "1");

    BasicDBObject updateCommand = new BasicDBObject();

    List<Resource> resources = populateResources();//Fetch a new list of Resources
    updateCommand.put("$push", new BasicDBObject("resources", resources));

    MongoOperations mongoOperations = mongoConfiguration.getMongoTemplate();
    DBCollection db = mongoOperations.getCollection("myCollection");
    db.save(updateCommand); 
```

我收到以下错误：

> java.lang.IllegalArgumentException：存储在数据库中的字段不能以“$”开头（坏键：“$push”）

当我使用：

```
db.update( updateQuery, updateCommand, true, true ); 
```

我得到以下异常：

> java.lang.IllegalArgumentException：无法序列化类 com.model.Test

我试过了： db.updateMulti(updateQuery, updateCommand); 我没有得到任何例外，也没有任何更新发生在文档中。

那么我在这里想念什么！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-09T18:15:04.933

save() 方法失败，因为它试图将以下文档插入到集合中：{"$push":{"resources":[a list of resources]}}，并且 "$push" 不是有效的键姓名。

从您的问题来看，您似乎正在尝试将另一个资源文档添加到嵌入文档列表“resources”中，嵌入文档匹配 {“itemID”：“1”}，在“itemList”内部。它是否正确？

处理嵌入文档的层很棘手，但可以做到：
以下是使用 JS shell 将以下文档插入“资源”列表的方法：

```
> var docToInsert = { "resourceID" : "3", "resourceName" : "Foo Test3"}
> db.myCollection.update({_id:"1", "itemList.itemID":"1"}, {"$push":{"itemList.$.resources":docToInsert}})
> db.myCollection.find().pretty()
{
    "_class" : "com.model.Test",
    "_id" : "1",
    "itemList" : [
        {
            "itemID" : "1",
            "itemName" : "Foo",
            "resources" : [
                {
                    "resourceID" : "1",
                    "resourceName" : "Foo Test1"
                },
                {
                    "resourceID" : "2",
                    "resourceName" : "Foo Test2"
                },
                {
                    "resourceID" : "3",
                    "resourceName" : "Foo Test3"
                }
            ]
        }
    ]
}
> 
```

有关使用“$”位置运算符更新嵌入文档的文档可以在“更新”文档中找到： [http ://www.mongodb.org/display/DOCS/Updating#Updating-The%24positionaloperator](http://www.mongodb.org/display/DOCS/Updating#Updating-The%24positionaloperator)

“$push”修饰符的文档也在“更新”页面上： [http ://www.mongodb.org/display/DOCS/Updating#Updating-%24push](http://www.mongodb.org/display/DOCS/Updating#Updating-%24push)

从发布的代码来看，“资源”似乎是一个列表。您需要使用的方法可能是 $pushAll，用于将多个值添加到列表中： [http ://www.mongodb.org/display/DOCS/Updating#Updating-%24pushAll](http://www.mongodb.org/display/DOCS/Updating#Updating-%24pushAll)

使用 Java 驱动程序，上面的插入可以这样完成：

```
Mongo m = new Mongo("localhost", 27017);
DB db = m.getDB("test");
DBCollection myColl = db.getCollection("myCollection");

BasicDBObject docToInsert = new BasicDBObject("resourceID", "3");
docToInsert.put("resourceName", "Foo Test3");

BasicDBObject updateQuery = new BasicDBObject("_id", "1");
updateQuery.put("itemList.itemID", "1");

BasicDBObject updateCommand = new BasicDBObject("$push", new BasicDBObject("itemList.$.resources", docToInsert));

myColl.update(updateQuery, updateCommand);
System.out.println(myColl.findOne().toString()); 
```

以上输出如下：

```
{ "_class" : "com.model.Test" , "_id" : "1" , "itemList" : [ { "itemID" : "1" , "itemName" : "Foo" , "resources" : [ { "resourceID" : "1" , "resourceName" : "Foo Test1"} , { "resourceID" : "2" , "resourceName" : "Foo Test2"} , { "resourceID" : "3" , "resourceName" : "Foo Test3"}]}]} 
```

希望以上内容能增进您对如何使用 Java 驱动程序使用 Mongo 更新嵌入式文档的理解。我注意到这个问题也与 Spring 有关（“mongoOperations”是 Spring 包中的一个类），不幸的是我不熟悉。如果您的更新仍有问题，也许社区中另一位更熟悉 Spring 的成员将能够提供帮助。

# ios - 最后2个代码错误需要解决。_CGRectIntersectsRect

> ID：10054303
> 
> 赞同：0
> 
> 时间：2012-04-07T12:03:12.720
> 
> 标签：ios, cgrect

我有一个 2 年前的测试应用程序，我现在正试图将它的代码移到我当前的应用程序中，除了 2 个困扰我的问题（凌晨 3 点）之外，我已经解决了它的大部分问题。可能我只是忽略了一些东西，但我对 XCode 有点生疏，因为自从测试应用程序以来我就没有使用过它。过去几年一直在使用 Eclipse 进行开发

> 错误 1：体系结构 i386 的未定义符号：
> “_CGRectIntersectsRect”，引用自：GameViewController.o ld 中的 -[GameViewController gameStatePlayNormal]：未找到体系结构 i386 的符号：错误：链接器命令失败，退出代码为 1（使用 - v 查看调用）

错误2：

> 架构 i386 的未定义符号：“_CGRectIntersectsRect”，引用自：GameViewController.o 中的 -[GameViewController gameStatePlayNormal] ld：未找到架构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T14:42:01.240

```
#import <UIKit/UIKit.h> 
```

或者更直接：

```
#import <CoreGraphics/CoreGraphics.h> 
```

# python - 解包十六进制编码的浮点数

> ID：10054314
> 
> 赞同：6
> 
> 时间：2012-04-07T12:05:08.727
> 
> 标签：python, c++, floating-point, hex

我正在尝试将以下 Python 代码翻译成 C++：

```
import struct
import binascii

inputstring = ("0000003F" "0000803F" "AD10753F" "00000080")
num_vals = 4

for i in range(num_vals):
    rawhex = inputstring[i*8:(i*8)+8]

    # <f for little endian float
    val = struct.unpack("<f", binascii.unhexlify(rawhex))[0]
    print val

    # Output:
    # 0.5
    # 1.0
    # 0.957285702229
    # -0.0 
```

因此，它读取 32 位的十六进制编码字符串，使用该`unhexlify`方法将其转换为字节数组，并将其解释为 little-endian 浮点值。

以下几乎可以工作，但代码有点蹩脚（最后`00000080`解析不正确）：

```
#include <sstream>
#include <iostream>

int main()
{
    // The hex-encoded string, and number of values are loaded from a file.
    // The num_vals might be wrong, so some basic error checking is needed.
    std::string inputstring = "0000003F" "0000803F" "AD10753F" "00000080";
    int num_vals = 4;

    std::istringstream ss(inputstring);

    for(unsigned int i = 0; i < num_vals; ++i)
    {
        char rawhex[8];

// The ifdef is wrong. It is not the way to detect endianness (it's
// always defined)
#ifdef BIG_ENDIAN
        rawhex[6] = ss.get();
        rawhex[7] = ss.get();

        rawhex[4] = ss.get();
        rawhex[5] = ss.get();

        rawhex[2] = ss.get();
        rawhex[3] = ss.get();

        rawhex[0] = ss.get();
        rawhex[1] = ss.get();
#else
        rawhex[0] = ss.get();
        rawhex[1] = ss.get();

        rawhex[2] = ss.get();
        rawhex[3] = ss.get();

        rawhex[4] = ss.get();
        rawhex[5] = ss.get();

        rawhex[6] = ss.get();
        rawhex[7] = ss.get();
#endif

        if(ss.good())
        {
            std::stringstream convert;
            convert << std::hex << rawhex;
            int32_t val;
            convert >> val;

            std::cerr << (*(float*)(&val)) << "\n";
        }
        else
        {
            std::ostringstream os;
            os << "Not enough values in LUT data. Found " << i;
            os << ". Expected " << num_vals;
            std::cerr << os.str() << std::endl;
            throw std::exception();
        }
    }
} 
```

（在 OS X 10.7/gcc-4.2.1 上编译，带有一个简单的`g++ blah.cpp`）

特别是，我想摆脱`BIG_ENDIAN`宏的东西，因为我确信有更好的方法来做到这一点，正如[这篇文章](http://commandcenter.blogspot.com.au/2012/04/byte-order-fallacy.html)所讨论的那样。

很少有其他随机细节 - 我不能使用 Boost（项目的依赖关系太大）。该字符串通常包含 1536 (8 ³ *3) 到 98304 个浮点值 (32 ³ *3)，最多 786432 (64 ³ *3)

（edit2：添加了另一个值，`00000080`== `-0.0`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T14:42:37.287

我认为整个`istringstring`行业都是矫枉过正。一次解析一个数字要容易得多。

首先，创建一个将十六进制数字转换为整数的函数：

```
signed char htod(char c)
{
  c = tolower(c);
  if(isdigit(c))
    return c - '0';

  if(c >= 'a' && c <= 'f')
    return c - 'a' + 10;

  return -1;
} 
```

然后简单地将字符串转换为整数。下面的代码不检查错误并假定大字节序——但您应该能够填写详细信息。

```
unsigned long t = 0;
for(int i = 0; i < s.length(); ++i)
  t |= (t << 4) & htod(s[i]); 
```

然后你的浮动是

```
float f = * (float *) &t; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T15:08:24.447

以下是您为删除`#ifdef BIG_ENDIAN`块而修改的更新代码。它使用应该与主机字节顺序无关的读取技术。它通过将十六进制字节（源字符串中的小端）读取为与 iostream std::hex 运算符兼容的大端字符串格式来实现这一点。一旦采用这种格式，主机字节顺序是什么就无关紧要了。

此外，它修复了在某些情况下`rawhex`需要以零结尾才能插入`convert`而不会出现垃圾的错误。

我没有要测试的大端系统，所以请在您的平台上验证。这是在 Cygwin 下编译和测试的。

```
#include <sstream>
#include <iostream>

int main()
{
    // The hex-encoded string, and number of values are loaded from a file.
    // The num_vals might be wrong, so some basic error checking is needed.
    std::string inputstring = "0000003F0000803FAD10753F00000080";
    int num_vals = 4;
    std::istringstream ss(inputstring);
    size_t const k_DataSize = sizeof(float);
    size_t const k_HexOctetLen = 2;

    for (uint32_t i = 0; i < num_vals; ++i)
    {
        char rawhex[k_DataSize * k_HexOctetLen + 1];

        // read little endian string into memory array
        for (uint32_t j=k_DataSize; (j > 0) && ss.good(); --j)
        {
            ss.read(rawhex + ((j-1) * k_HexOctetLen), k_HexOctetLen);
        }

        // terminate the string (needed for safe conversion)
        rawhex[k_DataSize * k_HexOctetLen] = 0;

        if (ss.good())
        {
            std::stringstream convert;
            convert << std::hex << rawhex;
            uint32_t val;
            convert >> val;

            std::cerr << (*(float*)(&val)) << "\n";
        }
        else
        {
            std::ostringstream os;
            os << "Not enough values in LUT data. Found " << i;
            os << ". Expected " << num_vals;
            std::cerr << os.str() << std::endl;
            throw std::exception();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-20T03:56:31.087

这就是我们最终得到的结果，[OpenColorIO/src/core/FileFormatIridasLook.cpp](https://github.com/imageworks/OpenColorIO/blob/03ecdc7ae239bfba6b1d9ec72806c26cae4601f3/src/core/FileFormatIridasLook.cpp#L92-151)

（Amardeep 对未签名`uint32_t`修复的回答也可能有效）

```
 // convert hex ascii to int
    // return true on success, false on failure
    bool hexasciitoint(char& ival, char character)
    {
        if(character>=48 && character<=57) // [0-9]
        {
            ival = static_cast<char>(character-48);
            return true;
        }
        else if(character>=65 && character<=70) // [A-F]
        {
            ival = static_cast<char>(10+character-65);
            return true;
        }
        else if(character>=97 && character<=102) // [a-f]
        {
            ival = static_cast<char>(10+character-97);
            return true;
        }

        ival = 0;
        return false;
    }

    // convert array of 8 hex ascii to f32
    // The input hexascii is required to be a little-endian representation
    // as used in the iridas file format
    // "AD10753F" -> 0.9572857022285461f on ALL architectures

    bool hexasciitofloat(float& fval, const char * ascii)
    {
        // Convert all ASCII numbers to their numerical representations
        char asciinums[8];
        for(unsigned int i=0; i<8; ++i)
        {
            if(!hexasciitoint(asciinums[i], ascii[i]))
            {
                return false;
            }
        }

        unsigned char * fvalbytes = reinterpret_cast<unsigned char *>(&fval);

#if OCIO_LITTLE_ENDIAN
        // Since incoming values are little endian, and we're on little endian
        // preserve the byte order
        fvalbytes[0] = (unsigned char) (asciinums[1] | (asciinums[0] << 4));
        fvalbytes[1] = (unsigned char) (asciinums[3] | (asciinums[2] << 4));
        fvalbytes[2] = (unsigned char) (asciinums[5] | (asciinums[4] << 4));
        fvalbytes[3] = (unsigned char) (asciinums[7] | (asciinums[6] << 4));
#else
        // Since incoming values are little endian, and we're on big endian
        // flip the byte order
        fvalbytes[3] = (unsigned char) (asciinums[1] | (asciinums[0] << 4));
        fvalbytes[2] = (unsigned char) (asciinums[3] | (asciinums[2] << 4));
        fvalbytes[1] = (unsigned char) (asciinums[5] | (asciinums[4] << 4));
        fvalbytes[0] = (unsigned char) (asciinums[7] | (asciinums[6] << 4));
#endif
        return true;
    } 
```

# sql-server-2008 - 在 posgresSQL 中创建数据库链接以连接到 SQL Server 2008

> ID：10054317
> 
> 赞同：5
> 
> 时间：2012-04-07T12:05:19.087
> 
> 标签：sql-server-2008, postgresql

有什么方法可以将 PostgreSQL 连接到 SQL Server？我找到了这个链接[http://pgfoundry.org/projects/dblink-tds/](http://pgfoundry.org/projects/dblink-tds/)但还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T13:14:36.040

您也许可以使用 PostgreSQL 的一种服务器语言来做某事，例如 pl/pythonu。对于任何给定的查询，您可以使用该语言自己的数据库访问模块以该语言编写一个从远程服务器获取结果的函数。因此，在 pl/pythonu 中，您将使用 Python DB-API 模块来访问 SQL Server。

*   [http://www.postgresql.org/docs/current/static/plpython.html](http://www.postgresql.org/docs/current/static/plpython.html)
*   [http://wiki.python.org/moin/SQL%20Server](http://wiki.python.org/moin/SQL%20Server)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T13:19:42.887

您可以尝试使用外部数据包装器。

有一种用于访问 Microsoft SQL Server，另一种是基于 ODBC 的。

[http://wiki.postgresql.org/wiki/Foreign_data_wrappers](http://wiki.postgresql.org/wiki/Foreign_data_wrappers)

我没有使用它们，所以我不知道它们有多好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-18T00:41:00.970

我最好建议在[Pentaho](http://www.pentaho.com/)或[Talend](https://www.talend.com/)中设计 ETL 流程，并将数据集成和数据存储层分开。然后制作数据库链接更容易管理。

# git - 运行“git clone git@remote.git”时如何提供用户名和密码？

> ID：10054318
> 
> 赞同：1113
> 
> 时间：2012-04-07T12:05:22.687
> 
> 标签：git

我知道如何为这样的 HTTPS 请求提供用户名和密码：

```
git clone https://username:password@remote 
```

但我想知道如何向遥控器提供用户名和密码，如下所示：

```
git clone git@remote.git 
```

我试过这样：

```
git clone username:password@git@remote.git
git clone git@username:password@remote.git
git clone git@remote.git@username:password 
```

但他们没有奏效。

* * *

## 回答 #1

> 赞同：1697
> 
> 时间：2012-04-07T12:25:00.737

基于迈克尔·沙夫的评论：

你可以省略密码，这样它就不会被记录在你的 Bash 历史文件中：

```
git clone https://username@github.com/username/repository.git 
```

它会提示您输入密码。

或者，您可以使用：

```
git clone https://username:password@github.com/username/repository.git 
```

这种方式在 GitHub 存储库中对我有用。

* * *

## 回答 #2

> 赞同：249
> 
> 时间：2012-04-07T16:16:09.053

该`user@host:path/to/repo`格式告诉 Git 使用 ssh 以`host`username 登录`user`。来自[`git help clone`](http://schacon.github.com/git/git-clone.html)：

> ssh 协议也可以使用另一种类似 scp 的语法：
> 
> `[user@]host.xz:path/to/repo.git/`

前面的部分`@`是用户名，认证方式（密码、公钥等）由ssh决定，而不是Git。Git 无法将密码传递给 ssh，因为 ssh 甚至可能不使用密码，具体取决于远程服务器的配置。

## 用于`ssh-agent`避免一直输入密码

如果您不想一直输入 ssh 密码，典型的解决方案是[生成一个公钥/私钥对](http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-keygen&sektion=1)，将公钥放在远程服务器上的[`~/.ssh/authorized_keys`文件](http://www.openbsd.org/cgi-bin/man.cgi?query=sshd&sektion=8)中，然后将私钥加载到[`ssh-agent`](http://www.openbsd.org/cgi-bin/man.cgi?query=ssh-agent&sektion=1). 另请参阅[通过 SSH 配置 Git 以登录一次](https://stackoverflow.com/q/1595848/712605)、[GitHub 的 ssh 密钥密码帮助页面](http://help.github.com/ssh-key-passphrases/)、[gitolite 的 ssh 文档](http://sitaramc.github.com/gitolite/gl_ssh.html)和[Heroku 的 ssh 密钥文档](https://devcenter.heroku.com/articles/keys)。

## 在 GitHub（或 Heroku 或...）的多个帐户之间进行选择

如果您在 GitHub 或 Heroku 这样的地方有多个帐户，您将拥有多个 ssh 密钥（每个帐户至少一个）。要选择您要登录的帐户，您必须[告诉 ssh 使用哪个私钥](https://superuser.com/q/232373)。

例如，假设您有两个 GitHub 帐户： `foo`和`bar`. 您的 ssh 密钥`foo`is`~/.ssh/foo_github_id`和您的 ssh 密钥`bar`is `~/.ssh/bar_github_id`。您想`git@github.com:foo/foo.git`使用您的`foo`帐户和`git@github.com:bar/bar.git`您的`bar`帐户访问。您将以下内容添加到您的`~/.ssh/config`：

```
Host gh-foo
    Hostname github.com
    User git
    IdentityFile ~/.ssh/foo_github_id
Host gh-bar
    Hostname github.com
    User git
    IdentityFile ~/.ssh/bar_github_id 
```

然后，您将克隆这两个存储库，如下所示：

```
git clone gh-foo:foo/foo.git  # logs in with account foo
git clone gh-bar:bar/bar.git  # logs in with account bar 
```

## 完全避免使用 ssh

一些服务提供 HTTP 访问作为 ssh 的替代方案：

*   GitHub：

    ```
    https://username:password@github.com/username/repository.git 
    ```

*   狡猾的：

    ```
    https://username:password@gitorious.org/project/repository.git 
    ```

*   Heroku：请参阅[这篇支持文章](https://devcenter.heroku.com/articles/http-git)。

**警告**：将您的密码添加到克隆 URL 将导致 Git 将您的明文密码存储在`.git/config`. 要在使用 HTTP 时安全地存储您的密码，请使用凭证助手。例如：

```
git config --global credential.helper cache
git config --global credential.https://github.com.username foo
git clone https://github.com/foo/repository.git 
```

以上将导致 Git 每 15 分钟询问一次您的密码（默认情况下）。详情请参阅[`git help credentials`](http://git-scm.com/docs/gitcredentials)。

* * *

## 回答 #3

> 赞同：82
> 
> 时间：2019-12-11T10:51:44.923

如果他们正在创建问题，请按照此参数替换您的特殊情况：

```
 !   #   $   &   '   (   )   *   +   ,   /   :   ;   =   ?   @   [   ]

%21 %23 %24 %26 %27 %28 %29 %2A %2B %2C %2F %3A %3B %3D %3F %40 %5B %5D 
```

所以例如-

实际网址：`https://usern@me:p@ssword@git/reponame.git`

要使用的解决方案 URL：`https://usern%40me:p%40ssword@git/reponame.git`

* * *

## 回答 #4

> 赞同：75
> 
> 时间：2018-05-05T18:56:40.140

在@Bassetassen's [answer](https://stackoverflow.com/a/10054470/1021259)的评论中，@plosco提到您`git clone https://<token>@github.com/username/repository.git`至少可以使用从 GitHub 克隆。我想我会扩展如何做到这一点，以防有人像我一样在尝试自动化一些克隆时遇到这个答案。

GitHub 有一个关于如何做到这一点的[非常方便](https://help.github.com/articles/git-automation-with-oauth-tokens/)的指南，但它不包括如果你想将它全部包含在一行中以实现自动化目的该怎么做。它警告说，**将令牌添加到克隆 URL 会将其以纯文本形式存储在** `.git/config`. 对于几乎每个用例来说，这显然都是一个安全风险，但是由于我计划在完成后删除存储库并撤销令牌，所以我不在乎。

## 1\. 创建代币

GitHub 在此处提供了有关如何获取令牌的[完整指南，但这里是 TL;DR。](https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/)

1.  转到*设置 > 开发人员设置 > 个人访问令牌*（[这是直接链接](https://github.com/settings/tokens)）
2.  单击“生成新令牌”并再次输入您的密码。（[这是另一个直接链接](https://github.com/settings/tokens/new)）
3.  为其设置描述/名称，检查“repo”权限并点击页面底部的“Generate token”按钮。
4.  **在您离开页面之前**复制您的新令牌

 **## 2\. 克隆回购

与@plosco 给出的命令相同`git clone https://<token>@github.com/<username>/<repository>.git`，只需替换`<token>`,`<username>`并`<repository>`使用您的任何信息。

如果要将其克隆到特定文件夹，只需在末尾插入文件夹地址，如下所示：`git clone https://<token>@github.com/<username>/<repository.git> <folder>`，`<folder>`您猜对了，要克隆到的文件夹在哪里！您当然可以在这里使用`.`, `..`,`~`等，就像在其他地方一样。

## 3.不留痕迹

并非所有这些都是必要的，具体取决于您所做的事情有多敏感。

*   如果您一段时间内不打算使用该令牌，您可能不想让该令牌闲置，因此请返回[令牌页面](https://github.com/settings/tokens)并点击它旁边的删除按钮。
*   如果您不再需要 repo，请将其删除`rm -rf <folder>`。
*   如果确实需要再次回购，但不需要再次自动化，您可以通过执行删除远程`git remote remove origin`或通过运行删除令牌`git remote set-url origin https://github.com/<username>/<repository.git>`。
*   清除您的 bash 历史记录以确保令牌不会在那里记录。有很多方法可以做到这一点，请参阅[这个问题](https://askubuntu.com/q/903362/487048)和[这个问题](https://stackoverflow.com/q/14750650/1021259)。但是，在所有上述命令前加上一个空格可能会更容易，以防止它们被存储。

请注意，我不是专业人士，因此从某种意义上说，上述内容可能并不安全，因为任何形式的取证工作都不会留下任何痕迹。

* * *

## 回答 #5

> 赞同：34
> 
> 时间：2019-04-17T07:12:59.893

尽管有很多答案，但当用户名或密码中包含特殊字符时，我自己面临着重复的问题。

URL 对您的 git 用户名和密码进行编码，然后将其用作 URL 本身的一部分（当没有安全问题时）。

比如说，用户名的 URL 编码值

> 'user+1' 是用户%2B1

和密码的 URL 编码值

> 'Welcome@1234' 是 Welcome%401234

然后你的 GIT 克隆 URL 看起来像，

> `git clone https://user%2B1:Welcome%401234@actual-git-url-for-the-repo`完美地工作，而，
> 
> git clone [https://user+1:Welcome@1234@actual-git-url-for-the-repo](https://user+1:Welcome@1234@actual-git-url-for-the-repo)给你 403 错误

希望这可以帮助。

以防万一，想在线进行 URL 编码：[https ://www.urlencoder.org/](https://www.urlencoder.org/)

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2018-07-02T10:37:36.730

我通过以下方式解决了这个问题：

[![在此处输入图像描述](../Images/ec2cd4da5dd5f5c659029aed270c1e7a.png)](https://i.stack.imgur.com/GZ6gn.png)

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2021-08-31T05:19:54.787

**2021 年 8 月 13 日后，您必须使用**

*   **Git 克隆**

    `https://username:token@github.com/username/repository.git`

要生成令牌：

**设置>>开发者设置>>个人访问令牌>>生成新令牌**

*   **Git 推送**

成功克隆后，下次您无需`git push`再次提及用户名。您可以通过在记事本中打开文件来确认这一点，`.git/config`它将显示

```
[remote "origin"]
    url = https://username:tokenxxxxxxxxxx@github.com/username/repo.git 
```

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2018-10-16T11:57:03.800

**在 Windows**上，以下步骤应该在 ing 时重新触发 GitHub 登录窗口`git clone`：

*   搜索“凭据管理器”的开始菜单
*   选择“Windows 凭据”
*   删除与 Git 或 GitHub 相关的任何凭据

[![结果](../Images/9ccafa927f2025662b9f9a505f01fab6.png)](https://i.stack.imgur.com/p32fI.png)

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2020-04-27T18:21:28.600

如果您正在使用`http/https`并且希望**完全自动化**该过程而不需要任何用户输入或任何用户提示（例如：在 CI/CD 管道中），您可以使用以下方法利用`git credential.helper`

```
GIT_CREDS_PATH="/my/random/path/to/a/git/creds/file"
# Or you may choose to not specify GIT_CREDS_PATH at all.
# See https://git-scm.com/docs/git-credential-store#FILES for the defaults used

git config --global credential.helper "store --file ${GIT_CREDS_PATH}"
echo "https://alice:${ALICE_GITHUB_PASSWORD}@github.com" > ${GIT_CREDS_PATH} 
```

您可以选择`ALICE_GITHUB_PASSWORD`从以前的 shell 命令或管道配置等中设置环境变量。

请记住，基于“存储”的 git-credential-helper 以纯文本形式存储密码和值。因此，请确保您的令牌/密码具有非常有限的权限。

* * *

现在只需在您的自动化系统需要获取 repo 的任何地方使用[https://alice@github.com/my_repo.git](https://alice@github.com/my_repo.git) - 它将使用git-credential-helper 存储的凭据`alice`。`github.com`

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2021-01-22T16:10:24.673

我更喜欢使用[GIT_ASKPASS](https://git-scm.com/docs/gitcredentials)环境为 git 提供 HTTPS 凭据。
假设登录名和密码在`USR`和`PSW`变量中导出，以下脚本不会在历史记录和磁盘中留下密码痕迹 + 它不易受到密码中特殊字符的影响：

```
GIT_ASKPASS=$(mktemp) && chmod a+rx $GIT_ASKPASS && export GIT_ASKPASS

cat > $GIT_ASKPASS <<'EOF'
#!/bin/sh
exec echo "$PSW"
EOF

git clone https://${USR}@example.com/repo.git 
```

**注意**：注意 heredoc 标记周围的单引号，`'EOF'`这意味着临时脚本包含字面`$PSW`字符，而不是密码/`PSW`变量的扩展值

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2018-09-05T08:32:31.780

```
git config --global core.askpass 
```

在克隆之前先运行这个，同样的方法，应该是固定的！

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-10-29T23:04:25.137

这是一个很好的 Stack Overflow 问题，答案非常有启发性，因此我能够解决我最近遇到的一个烦人的问题。

我工作的组织使用**`Atlassian's BitBucket`**产品（不是 Github），本质上是他们的 GitHub 版本，这样存储库就可以完全在内部得到保护。我遇到了与@coordinate 类似的问题，因为我签出的新存储库需要我的密码。我的凭据已为所有**`BitBucket`**项目全局保存，因此我不确定是什么导致凭据丢失。

简而言之，我能够输入以下 GIT 命令（*仅*提供我的用户名），然后提示 Git 的凭据管理器提示我输入密码，然后我可以保存密码。

```
git clone https://user@code.domain.org/git/[organization]/[team]/[repository.git] 
```

*注意：括号中的目录子路径只是指内部引用，并且会因您而异！***

# sharepoint - 在 SharePoint 图片库中自定义上传文件功能

> ID：10054319
> 
> 赞同：0
> 
> 时间：2012-04-07T12:05:30.120
> 
> 标签：sharepoint, sharepoint-2010

谁能帮助我，我想自定义上传功能，我想在其中验证上传的图像类型到图片库

我在哪里可以设置我的脚本？？谁能给点建议？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T17:49:15.023

你可能是 Use [`ItemAdding`](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spitemeventreceiver.itemadding.aspx)。在`ItemAdding`事件方法中，只需在成功上传到库之前检查文档的扩展名。如果文档无效而不是通过错误消息

你的代码是这样的：

```
 protected string[] ValidExtensions = new string[] { "png", "jpeg", "gif"};

   public override void ItemAdding(SPItemEventProperties properties)
    {
        string strFileExtension = Path.GetExtension(properties.AfterUrl);

        bool isValidExtension = false;

        string strValidFileTypes = string.Empty;

        using (SPWeb web = properties.OpenWeb())
        {

                foreach (string strValidExt in ValidExtensions)
                {
                    if (strFileExtension.ToLower().EndsWith(strValidExt.ToLower()))
                    {
                        isValidExtension = true;
                    }
                    strValidFileTypes += (string.IsNullOrEmpty(strValidFileTypes) ? "" : ", ") + strValidExt;
                }

      // Here i am going to check is this validate or not if not than redirect to the 
      //Error Message Page. 
                if (!isValidExtension)
                {
                    properties.Status = SPEventReceiverStatus.CancelWithRedirectUrl;
                    properties.RedirectUrl = properties.WebUrl + "/_layouts/error.aspx?ErrorText=" + "Only " + strValidFileTypes + " extenstions are allowed";

                }

        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T12:30:28.547

您可以将 SPItemEventReceiver 用于您的库并将您的逻辑添加到 ItemUpdating() 和 ItemAdding() 方法中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T17:50:20.447

您可以尝试创建自定义列表模板并替换其中的默认值`NewForm.aspx`和`EditForm.aspx`页面。这些[自定义表单模板](http://msdn.microsoft.com/en-us/library/aa544142.aspx)不需要包含与默认图片库模板中相同的用户控件和按钮。您可以创建一个具有丰富 UI 的 Silverlight Web 部件来上传图像，例如，您想要的差异越多，您必须编写的代码就越多......

我能想到的一个 OOTB 解决方案将是一个工作流程，您将强制每张新图片运行，但对于最终用户来说，这将是相当大的杀伤力......

当然，如果您能够像其他人建议的那样仅使用[ItemAdding](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spitemeventreceiver.itemadding.aspx)中的元数据进行验证，那将节省大量时间。

--- 费尔达

# android - 文本视图溢出

> ID：10054325
> 
> 赞同：0
> 
> 时间：2012-04-07T12:06:14.067
> 
> 标签：android, android-layout, android-ui

我有一个布局，左边有 ImageView，右边有 TextView：

```
<ImageView
        android:src="@drawable/alert"
        android:id="@+id/articleStoryImage" 
        android:layout_below="@+id/articleStorySubTitle"        
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="10sp"
         />
<TextView 
   android:id="@+id/articleStory"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:layout_below="@+id/articleStorySubTitle"
   android:layout_toRightOf="@+id/articleStoryImage"
   android:gravity="right"                  
   android:inputType="textMultiLine"        
   android:text="aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
   aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
   aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"
   android:ellipsize="end"
   android:layout_marginTop="10sp"
   android:textSize="11sp"
   android:textColor="#000000" /> 
```

我想要做的是，TextView 文本将从 ImageView 的右侧开始，但会在 ImageView 下方继续。你可以称之为某种溢出。

我怎样才能做到这一点？

谢谢。

编辑：完整的 XML：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#FFFFFF"
     android:orientation="horizontal" >
    <TextView 
       android:id="@+id/articleStoryTitle"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"               
       android:text="aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa bbbbbbbbbbbbbbbbbbbbbbbbb"
       android:typeface="sans"
       android:gravity="right"
       android:ellipsize="end"
       android:singleLine="false"   
       android:inputType="textMultiLine"             
       android:textSize="25sp"  
       android:textColor="#DBA118"
       android:textStyle="bold" />
    <TextView 
       android:id="@+id/articleStorySubTitle"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_below="@+id/articleStoryTitle"
       android:gravity="right"                  
       android:inputType="textMultiLine"        
       android:text="aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa bbbbbbbbbbbbbbbbbbbbbbbbb"
       android:ellipsize="end"
       android:layout_marginTop="10sp"
       android:textSize="12sp"
       android:textColor="#000000"   
       android:textStyle="bold" />
    <ImageView
            android:src="@drawable/alert"
            android:id="@+id/articleStoryImage" 
            android:layout_below="@+id/articleStorySubTitle"        
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="10sp"
             />
    <TextView 
       android:id="@+id/articleStory"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_below="@+id/articleStorySubTitle"
       android:layout_toRightOf="@+id/articleStoryImage"
       android:gravity="right"                  
       android:inputType="textMultiLine"        
       android:text="aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
       aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
       aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"
       android:ellipsize="end"
       android:layout_marginTop="10sp"
       android:textSize="11sp"
       android:textColor="#000000" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T12:58:20.287

我知道你可能会得到更好的解决方案，但你可以检查一下：

```
<?xml version="1.0" encoding="utf-8"?>  
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"   
    android:id="@+id/RelativeLayout01"  
    android:layout_width="fill_parent"  
    android:layout_height="wrap_content" >  
 <TextView  
    android:id="@+id/tv"   
    android:layout_width="200dp"  
    android:layout_height="150dp"  
    android:layout_alignBottom="@+id/ImageView011"   
    android:layout_marginTop="22dp"  
    android:text="hi every body hi every body hi everybodyend"                        
    android:textSize="20dp" />   
 <ImageView  
    android:id="@+id/ImageView011"   
    android:layout_width="100dp"   
    android:layout_height="100dp"   
    android:layout_alignParentLeft="true"   
    android:layout_marginTop="22dp" 
    android:layout_marginLeft="22dp"  
    android:background="@drawable/imag" />
 <TextView  
    android:id="@+id/textView1" 
    android:layout_width="wrap_content"  
    android:layout_height="350dp"   
    android:layout_alignParentBottom="true"    
    android:text=" TextView TextView TextView TextView TextView"                  
    android:textSize="20dp" />
  </RelativeLayout> 
```

还要检查这个链接：[http ://dev.androidteam.ru/snippets/textview/leadingmarginspan2](http://dev.androidteam.ru/snippets/textview/leadingmarginspan2)

# java - Selenium RC 的第一步

> ID：10054326
> 
> 赞同：0
> 
> 时间：2012-04-07T12:06:21.933
> 
> 标签：java, selenium-rc

我正在尝试移动网络抓取的第一步。我读到了硒，在我看来它适合我正在寻找的东西。但我有一些问题要开始。我正在关注本教程[selenium 入门](http://code.google.com/p/selenium/wiki/GettingStarted)，我正在尝试用我的 linux ubuntu 编译第一个示例。我是这样编译的

> javac -classpath selenium-server-standalone-2.20.0.jar Example.java

我已经启动了硒服务器

> java -jar selenium-server-standalone-2.20.0.jar

但我无法运行示例。这种方法行不通

> 例子

也是这样

> java -classpath selenium-server-standalone-2.20.0.jar 示例

我猜语法是错误的，但在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T14:40:24.443

您需要在类路径中包含当前目录，如下所示：

```
java -cp .:selenium-server-standalone-2.20.0.jar Example 
```

另外，由于您实际上并没有放入`Example.java`in `org.openqa.selenium.example`，因此您可能希望删除`package org.openqa.selenium.example`源代码第一行中的 the 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T18:01:40.613

用 Java 编写代码时，更好的方法是使用 Eclipse 之类的 IDE。链接 JAR 并将它们导入 Java 类后，您可以快速高效地编写代码。

最重要的是，Eclipse 有很多用于测试软件的插件，例如 Junit、TestNG，可以帮助您创建更好的测试套件。

更不用说 Java IDE 总是有助于调试测试代码。这是一个关于如何使用 Selenium 设置 Eclipse 的教程：[链接](http://selftechy.com/2011/05/31/setting-up-selenium-with-eclipse)

希望能帮助到你。

# android - 如果短信内容匹配，则获取某人的位置

> ID：10054333
> 
> 赞同：0
> 
> 时间：2012-04-07T12:07:57.650
> 
> 标签：android, sms, broadcastreceiver, latitude-longitude

如果我向某人发送一条短信，上面写着“更新”。所以我可以得到那个人的位置。我将制作一个广播接收器，它会在任何短信到达时处于活动状态。如果它与 UPDATE 匹配，则将发送其他用户的位置。

广播接收器。

```
public void onReceive(Context context, Intent intent) 
{   
//this stops notifications to others
this.abortBroadcast();

//---get the SMS message passed in---
Bundle bundle = intent.getExtras();   
SmsMessage[] msgs = null;
String str = "";            
if (bundle != null)
{
//---retrieve the SMS message received---
Object[] pdus = (Object[]) bundle.get("pdus");
msgs = new SmsMessage[pdus.length];            
for (int i=0; i<msgs.length; i++){
    msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
    str += "SMS from " + msgs[i].getOriginatingAddress();
    from = msgs[i].getOriginatingAddress();
    str += " :";
    str += msgs[i].getMessageBody().toString();
    msg = msgs[i].getMessageBody().toString();
    str += "\n"; 
}
if(checksomething){
    //make your actions
    //and no alert notification and sms not in inbox
}
else{
    //continue the normal process of sms and will get alert and reaches inbox
    this.clearAbortBroadcast();
}
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T12:23:16.193

您需要获取短信的服务吗？？？？

如果是

在清单中：

```
<uses-permission android:name="android.permission.RECEIVE_SMS" /> 
```

和您的服务：

```
import android.app.Service;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.os.IBinder;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class SrvSmsListener extends Service {

    private BroadcastReceiver IncomingSMSReceiver = new BroadcastReceiver() {
        private static final String SMS_RECEIVED =
                "android.provider.Telephony.SMS_RECEIVED";

        @Override
        public void onReceive(Context _context, Intent _intent) {
            if (_intent.getAction().equals(SMS_RECEIVED)) {
                Bundle bundle = _intent.getExtras();
                if (bundle != null) {
                    Object[] pdus = (Object[]) bundle.get("pdus");

                    SmsMessage[] messages = new SmsMessage[pdus.length];
                    for (int i = 0; i < pdus.length; i++)
                        messages[i] = SmsMessage
                                .createFromPdu((byte[]) pdus[i]);
                    for (SmsMessage message : messages) {
                        String strPhoneNo = message.getOriginatingAddress();
                        String msg = message.getMessageBody();

                        if (msg.startsWith("UPDATE"))
                        {
                            // this stops notifications to others
                            this.abortBroadcast();
                            // do what you want
                        }
                    }
                }
            }
        }
    };

    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void onCreate() {
        final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";
        IntentFilter filter = new IntentFilter(SMS_RECEIVED);
        BroadcastReceiver receiver = IncomingSMSReceiver;
        registerReceiver(receiver, filter);
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        return super.onStartCommand(intent, flags, startId);
    }

    @Override
    public void onDestroy() {
        if (IncomingSMSReceiver != null)
        {
            unregisterReceiver(IncomingSMSReceiver);
        }
    }
} 
```

# ios - 在 MonoTouch 对话框中调整 StringElement 值的大小

> ID：10054334
> 
> 赞同：1
> 
> 时间：2012-04-07T12:08:20.717
> 
> 标签：ios, xamarin.ios, monotouch.dialog

无论如何要自动调整 MonoTouch 中字符串元素的值。我以两种方式使用它们：

1st-带反射

2nd-手动将字符串元素添加到一个部分，但两者都可以包含无法适合显示区域的值（或标题）。

![http://hpics.li/479e85c](../Images/cacc648f8de0cef090fe48d9d6d16435.png)

处理优雅展示的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T13:53:44.833

尝试使用`MultilineElement`而不是`StringElement`

# java - 移动应用程序和 PC 应用程序之间的通信方式以及我用作数据库的方式？

> ID：10054337
> 
> 赞同：0
> 
> 时间：2012-04-07T12:08:49.127
> 
> 标签：java, android, swig

我在两台 PC 上有两个应用程序（java）和一个移动应用程序（Android）

我的问题是不同应用程序与数据库之间的交互： - PC 和 PC 之间 - PC 和移动设备

PC <---------> BD -------------> 移动

我使用什么数据库在两者之间连接和传输数据。**这是远程通信。** PC <-------------------------> 基础 <------------------> 手机

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T12:19:15.120

您使用两台不同的电脑有什么具体原因吗？假设您有两个应用程序，您可以将它们部署在一台 PC 中，并在同一台 PC 中拥有数据库。

应用程序的设计应该是这样的。1) 开发一个基于 REST/SOAP 的 Web 服务应用程序，它与 DB 对话。2) 在应用程序服务器中部署此应用程序。2) 在您的 android 应用程序用户基于 REST/SOAP 的 Web 服务客户端中与步骤 2 中托管的 Web 服务进行对话。

# javascript - 如何在 Javascript 中处理错误的构造函数参数？

> ID：10054339
> 
> 赞同：2
> 
> 时间：2012-04-07T12:09:00.493
> 
> 标签：javascript, constructor

我有一个`Foo`这样的构造函数：

```
function Foo(params) {
  this.x = params.x + 5;
  ...  
} 
```

`Foo`是这样调用的：

```
var foo = new Foo(someObject); 
```

我想检查`params`in`Foo`的构造函数的内容，如果有问题（例如`params.x`不是数字，或者`params.y`是`undefined`），我想`foo`成为`null`（这意味着`Foo`对象没有被创建）。

我猜，一种选择是在构造函数中抛出一个异常并用`new Foo(someObject)`with包装调用`try..catch`（或创建一个类似的函数`makeFoo`）。

你会建议如何处理这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T12:13:10.423

我会抛出异常。无效输入是一种异常情况，抛出异常是有意义的。我不会打扰`makeFoo`包装器；调用代码应该处理它。

* * *

关于

> 我想`foo`成为`null`（这意味着`Foo`没有创建对象）。

没有办法让表达式`new Foo(...)`return `null`。通常，`new`表达式的结果是对由`new`运算符构造并作为`this`. 构造函数**可以**覆盖它并返回一个不同的对象，但它不能通过返回来做到这一点`null`。如果构造函数没有返回任何东西，或者返回不是对象的东西（不包括`null`;`null`不是对象 [它有自己的类型，[`Null`](http://es5.github.com/#x8.2)]，尽管事实上`typeof null`是`"object"`），`new`表达式的结果将是操作员创建的对象`new`。[11.2.2](http://es5.github.com/#x11.2.2)和[13.2.2](http://es5.github.com/#x13.2.2)节中的更多内容.

# mysql - MySQL左连接与另一个表的一个有序结果

> ID：10054340
> 
> 赞同：0
> 
> 时间：2012-04-07T12:09:03.020
> 
> 标签：mysql, left-join

我有两个表：**产品**和**新闻**——新闻是关于产品的，所以新闻表有行 pid（用于产品 id），新闻有不同的日期，所以可以按日期排序。而且我需要一个查询来显示产品表中的一些数据，并附有一个和最新的新闻标题和日期 - 我正在尝试使用这样的查询：

```
SELECT products.product_title, products.`product_key`,
news.`news_date`, news.`news_text` FROM products LEFT JOIN
news ON products.`product_key`= (SELECT news.`pid` FROM news
WHERE news.`pid` = products.`product_key`
ORDER BY news.`news_date` DESC LIMIT 1)
ORDER BY products.`product_title` 
```

但它不能正常工作，可能我应该使用 GROUP BY 运算符而不是子查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T12:19:04.997

如果它给出无效的结果，这是`UNTESTED`并且愿意编辑。

```
SELECT  a.product_key, a.product_title, 
        b.news_text, MAX(b.news_date)
FROM products a LEFT JOIN news b
        on a.product_key = b.pid
GROUP BY a.product_key, a.product_title, b.news_text 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T13:08:22.880

最后找到它 - 正确的做法是从第二个表中获取 MAX 行值，然后将其添加到 WHERE 条件：

```
SELECT products.product_title, products.product_key, news.news_date,
news.news_text FROM products LEFT JOIN news ON products.product_key= news.pid
WHERE news.news_date = (SELECT MAX(news.news_date) FROM news WHERE news.pid = products.product_key) ORDER BY products.product_key 
```

# mysql - 无法连接到 MySQL Zend Framework

> ID：10054341
> 
> 赞同：0
> 
> 时间：2012-04-07T12:09:12.530
> 
> 标签：mysql, zend-framework, zend-studio

我正在尝试使用 Zend 框架设置应用程序，但我遇到的问题是，一旦我`application.ini`在由 zend 工具创建的默认主页中添加以下行，就会引发致命错误

> 致命错误：在 C:\xampp\php\PEAR\Zend\Db\Adapter\Abstract.php:295 中包含消息“配置数组必须具有用于登录凭据的“密码”的密钥”的未捕获异常“Zend_Db_Adapter_Exception”：295 堆栈跟踪：# 0 C:\xampp\php\PEAR\Zend\Db\Adapter\Abstract.php(183): Zend_Db_Adapter_Abstract->_checkRequiredOptions(Array) #1 C:\xampp\php\PEAR\Zend\Db.php(270): Zend_Db_Adapter_Abstract->__construct(Array) #2 C:\xampp\php\PEAR\Zend\Application\Resource\Db.php(142): Zend_Db::factory('PDO_MYSQL', Array) #3 C:\xampp\php \PEAR\Zend\Application\Resource\Db.php(154): Zend_Application_Resource_Db->getDbAdapter() #4 C:\xampp\php\PEAR\Zend\Application\Bootstrap\BootstrapAbstract.php(683): Zend_Application_Resource_Db->init () #5 C:\xampp\php\PEAR\Zend\Application\Bootstrap\BootstrapAbstract.php(626): Zend_Application_Bootstrap_BootstrapAbstract->_executeResource('db')
> 
> # 6 C:\xampp\php\PEAR\Zend\Application\Bootstrap\BootstrapAbstract.php(586)：
> 
> Zend_Application_Bootstrap_BootstrapAbstract->_bootstrap(NULL) #7 C:\xampp\php\PEAR\Zend\Ap 在 C:\xampp\php\PEAR\Zend\Db\Adapter\Abstract.php 第 295 行

```
resources.db.adapter = PDO_MYSQL
resources.db.params.host = localhost
resources.db.params.dbname = codenamesnm 
```

我在 Windows 7 上使用 xampp 知道有什么问题吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T12:43:58.957

不要省略这些行：

```
resources.db.params.username = rob
resources.db.params.password = 123456 
```

如有必要，将它们设置为`"root"`or ，但让它们进入您的*application.ini*。`""`

# php - 查找整数的不相等分区的有效方法

> ID：10054344
> 
> 赞同：0
> 
> 时间：2012-04-07T12:09:23.470
> 
> 标签：php, algorithm, integer, combinatorics, data-partitioning

我有一个整数的总分区，我只想要那些所有值都不相等的分区。例如，3 的分区是 {1,1,1,1}、{2,2}、{3,1}、{1,1,2} 和 {4}。因此，所需的不相等分区是 {3,1} 和 {4}，因为它们不包含相等的元素。下面提供了我用于查找所有分区的代码。我可以过滤分区以获得所需的结果，但我想要一些有效的方法来查找所有分区，其中没有相等的项，而无需找到所有分区。我已经搜索了网络和 stackoverflow，但没有确切说明我面临的问题。每一个想法都值得赞赏。谢谢。

```
function total_partitions_of_a_number($n) {# base case of recursion: zero is the sum of the empty list
if(!$n) return array(array()); # return empty array

# modify partitions of n-1 to form partitions of n
foreach(total_partitions_of_a_number($n-1) as $p) { # recursive call
 $a[] = array_merge(array(1), $p); # "yield" array [1, p...]
 if($p && (count($p) < 2 || $p[1] > $p[0])) { # p not empty, and length < 2 or p[1] > p[0]
   ++$p[0]; # increment first item of p
   $a[] = $p; # "yield" p
 }
}
return $a; # return all "yielded" values at once
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T12:28:10.593

所以你只想要任何给定组件出现不超过一次的分区吗？递归很简单。

将其简化为求解 N 的分区的问题，这样集合中的任何元素都不会大于某个值 a（a 最初是 N）。现在，a 要么出现在分区中，要么不出现在分区中。根据这一点，您将递归求解 (Na) 的分区，使得没有元素大于 a-1，并递归求解 N 的分区，使得没有成员大于 a-1。

在任何一种情况下，递归都是适定的，并且当不再可能解决问题时将终止，因此，当 a*(a+1)/2 < N 时。当然，当 a*(a+1) /2 = N，您也可以快速终止递归，因为解决方案是唯一的。

# php - PHP中的冒号运算符

> ID：10054345
> 
> 赞同：5
> 
> 时间：2012-04-07T12:09:26.827
> 
> 标签：php, wordpress, colon, if-statement

这是wordpress代码的一部分，我不明白：

```
if     ( is_404()            && $template = get_404_template()            ) :
elseif ( is_search()         && $template = get_search_template()         ) :
elseif ( is_tax()            && $template = get_taxonomy_template()       ) :
elseif ( is_front_page()     && $template = get_front_page_template()     ) :
elseif ( is_home()           && $template = get_home_template()           ) :
elseif ( is_attachment()     && $template = get_attachment_template()     ) :
    remove_filter('the_content', 'prepend_attachment');
elseif ( is_single()         && $template = get_single_template()         ) :
elseif ( is_page()           && $template = get_page_template()           ) :
elseif ( is_category()       && $template = get_category_template()       ) :
elseif ( is_tag()            && $template = get_tag_template()            ) :
elseif ( is_author()         && $template = get_author_template()         ) :
elseif ( is_date()           && $template = get_date_template()           ) :
elseif ( is_archive()        && $template = get_archive_template()        ) :
elseif ( is_comments_popup() && $template = get_comments_popup_template() ) :
elseif ( is_paged()          && $template = get_paged_template()          ) :
else :
    $template = get_index_template();
endif; 
```

冒号可以替换 PHP 中的大括号。因此，如果我替换冒号，我会得到：

```
if     ( is_404()            && $template = get_404_template()            ) {
   elseif ( is_search()         && $template = get_search_template()         ) {
      elseif ( is_tax()            && $template = get_taxonomy_template()       ) {
      ...
      }
   }
}
else 
```

对我来说没有意义，因为每个 elseif 都缺少它的开头 if。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-07T12:14:59.870

雷吉，

> PHP 中 if/else 语句中的冒号：这不是替换大括号，而是一对大括号。

**例子 ：**

```
if ($a) : doThis();
elseif ($b) : doThat();
else : doTheOther();
endif; 
```

**会成为**

```
if ($a) { doThis(); }
elseif ($b) { doThat(); }
else { doTheOther(); } 
```

**或** *（因为它只是一个语句而不是语句块）*

```
if ($a) doThis();
elseif($b) doThat();
else doTheOther(); 
```

* * *

**参考：** [控制结构的替代语法](http://php.net/manual/en/control-structures.alternative-syntax.php)

* * *

至于这段特定的代码：

```
if     ( is_404()            && $template = get_404_template()            ) :
elseif ( is_search()         && $template = get_search_template()         ) :
elseif ( is_tax()            && $template = get_taxonomy_template()       ) : 
```

它转化为

```
if     ( is_404()            && $template = get_404_template()            )  
    { /* DO NOTHING */ }
elseif ( is_search()         && $template = get_search_template()         )  
    { /* DO NOTHING */ } 
```

***提示：**该`elseif`语句不包括其他 elseif 语句。（喜欢`elseif ($a) { elseif($b) {} }`）*

# android - Android服务没有停止

> ID：10054346
> 
> 赞同：0
> 
> 时间：2012-04-07T12:09:42.260
> 
> 标签：android, service

我创建了一项服务，将设备的位置发送到服务器，然后该位置存储在数据库中。

在该服务中，我实现了一个 LocationListner 并在 onLocationChanged 方法中通过 HttpPost 将位置发送到服务器，为服务设置警报（因为我希望它每小时发送一次位置）然后停止服务。

问题是即使我调用了“stopself”，服务也会在停止之前继续运行几次（如多次发送位置）。我怎样才能改变它，以便他的服务立即停止。

PFB onLocationChanged 方法的代码

```
public void onLocationChanged(android.location.Location location) {
            if(location!=null)
            {
                System.out.println("here");
                latid = location.getLatitude();
                longid = location.getLongitude();
                 String userinfo = ``Double.toString(latid)+"&&&&"+Double.toString(longid);
                 Location = userinfo;

                 Toast.makeText(getApplicationContext(), Location, 1000).show();

                 HttpClient httpclient = new DefaultHttpClient();
                    HttpPost httppost = new HttpPost("http://www.easymontra.in/location/try.php");

                    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
                    nameValuePairs.add(new BasicNameValuePair("lat", Double.toString(latid)));
                    nameValuePairs.add(new BasicNameValuePair("long", Double.toString(longid)));
                    try {
                        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                    } catch (UnsupportedEncodingException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                    // Execute HTTP Post Request
                    try {
                        HttpResponse response = httpclient.execute(httppost);
                    } catch (ClientProtocolException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);

                    Calendar calendar = Calendar.getInstance();

                    calendar.setTimeInMillis(System.currentTimeMillis());

                    calendar.add(Calendar.MINUTE, 60);

                    alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), alarmIntent);

                    Toast.makeText(getApplicationContext(), "stopping now", 1000).show();
                   stopSelf();

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T13:18:18.850

`stopSelf()`是一个请求，**它取决于运行**时处理请求的时间。这是一种异步方法调用，因此人们可能不会期望在调用此方法时服务会立即结束。此外，在您的情况下，您的服务停止时似乎会触发更多位置更新，因此您可以使用`locationManager.removeUpdates(locationListener);`将其放在之前停止侦听位置更新`stopSelf();`

# android - 您如何以编程方式结束 2.3+ 的通话？

> ID：10054348
> 
> 赞同：11
> 
> 时间：2012-04-07T12:09:58.677
> 
> 标签：android

直到 Android 2.2 我知道我可以使用反射并通过 getITelephony 终止呼叫。

但是，从 2.3 开始，这不再有效，因为即使您向您的应用授予 MODIFY_PHONE_STATE 权限，它现在也只是系统应用权限： [https ://stackoverflow.com/a/5095956/821423](https://stackoverflow.com/a/5095956/821423)

也就是说，仍然有可能是因为 google play 市场上的无数应用程序在 ICS 上都做得很好，例如，这个：

[https://play.google.com/store/apps/details?id=com.andromigsm.fscifree&hl=en](https://play.google.com/store/apps/details?id=com.androminigsm.fscifree&hl=en)

所以问题是，他们是怎么做到的？我知道我可以使用模拟耳机挂钩接听电话，但我不知道如何结束通话。

谢谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-07T21:17:25.467

好吧，经过深思熟虑，我意识到一些非常非常非常愚蠢的事情。从好的方面来说，StackOverflow 上似乎也没有人注意到它。自 2.3+ 起，MODIFY_PHONE_STATE 不再在silenceRinger() 上工作，但 endCall 就好了。

所以解决方案是注释掉对silenceRinger() 的调用。

不敢相信我只花了一个星期的时间！我将尝试更新其他问题，因为在 SO 上似乎有大量的欺骗行为，即“不可能再使用反射来终止呼叫”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T20:20:36.243

call() 和 endcall() 函数对我来说也很好用。但还有另一种不使用 iTelephony.aidl 的工作方式。它发表在这篇文章中。顺便说一句，我认为谷歌已经知道了，但由于某种原因，他们没有对其他功能做任何事情，这很好！！！

[http://androidbridge.blogspot.com/2011/05/how-to-answer-incoming-call-in-android.html](http://androidbridge.blogspot.com/2011/05/how-to-answer-incoming-call-in-android.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-13T10:50:02.243

私人无效endCall（最终字符串截止时间）{

```
TelephonyManager telephony = (TelephonyManager) srvs
            .getSystemService(Context.TELEPHONY_SERVICE);
    Class c;
    final com.android.internal.telephony.ITelephony telephonyService;
    try {
        c = Class.forName("android.telephony.TelephonyManager");//telephony.getClass().getName());
        Log.i("TelephonyClass Name", telephony.getClass().getName());
        Method m = c.getDeclaredMethod("getITelephony");
        m.setAccessible(true);
        telephonyService = (ITelephony) m.invoke(telephony);
        TimerTask task = new TimerTask() {

            @Override
            public void run() {
                try {
                    if (telephonyService.isIdle()
                            || telephonyService.isOffhook()
                            || telephonyService.isRinging())
                        telephonyService.endCall();
                } catch (RemoteException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        };
        long delay = Integer.parseInt(cutofftime) * 1000;
        new Timer().schedule(task, delay);
    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SecurityException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (NoSuchMethodException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (InvocationTargetException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

# c++ - 代码是 C 还是 C++？

> ID：10054349
> 
> 赞同：0
> 
> 时间：2012-04-07T12:09:59.827
> 
> 标签：c++, c, compiler-construction

我知道下面的代码曾经是 C，但是，我在 Visual Studio 2008 中将它作为 C++ 程序编写，它工作正常（它保存为 C++）。但是，程序是用 C 代码编写的，对吗？（或者是吗？）。

因此，当我尝试在 Visual Studio 中将其编译为 C 时（转到 -> 文件属性 -> c/c++ -> 高级 -> 编译为 -> 将其更改为“编译为 C 代码”）然后我得到了很多错误，其中主要的它不识别 LPSTR 类型。所以，我想我的问题是：**它是 C 代码还是 C++ 代码**，如果是 C，为什么当我将它更改为编译 C 代码时它不起作用？

```
#include "stdafx.h"
#include <stdio.h>
#include <windows.h>
#include <strsafe.h>
#include <direct.h>
#include <string.h>
#include <conio.h>

int main(VOID)
{
    STARTUPINFO si;
    PROCESS_INFORMATION pi;

    //allocate memory
    ZeroMemory(&si, sizeof(si));
    si.cb = sizeof(si);
    ZeroMemory(&pi, sizeof(pi));

    //create child process
    if (!CreateProcess(NULL,
                L"C:\\Windows\\Notepad.exe",
                NULL,
                NULL,
                FALSE,
                0,
                NULL,
                NULL,
                &si,
                &pi))
    {
        fprintf(stderr, "create process failed");

        return -1;
    }

    //parent waits for child to complete
    WaitForSingleObject(pi.hProcess, INFINITE);

    printf("Child Complete");

    //close handle
    CloseHandle(pi.hProcess);
    CloseHandle(pi.hthread);

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T12:14:39.207

**它干净地编译为 C**。唯一的错误是由 触发的`CloseHandle(pi.hthread)`，因为它不是 的成员`PROCESS_INFORMATION`。您正在寻找`hThread`（大写 T）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T12:19:36.543

它是 C。但大多数 C++ 编译器都能够编译 C 代码。标头`conio.h`不是标准 C 的一部分，因此您可能希望避免这种情况。

`LPSTR`在 windows.h 中定义，既然你已经包含它，它不应该给出任何错误。它是 typedef 的：

```
typedef char* PSTR, *LPSTR; 
```

对于代码中的其他类型定义变量，您必须检查它们的标头是否。尝试包括`Winbase.h`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T15:42:14.207

从您提供的内容来看，我们无法看到它是否是有效的 C，因为您使用的是非标准头文件和宏。但我可以想象，可能会有宏定义将其转换为 C 代码。

*如果*是 C，它就不是那么好，对于 C++ 来说也不是那么好。两种语言都有其初始化变量的方式，但您的代码不使用它们。特别是在 C（以及 C++ 中的 POD）中，有用于初始化变量的初始化程序。假设这里的两个丑陋的宏都扩展为类型：

```
STARTUPINFO si = { 0 };
PROCESS_INFORMATION pi = { 0 }; 
```

如果你有一个符合 C99 的编译器，第一个会更好

```
STARTUPINFO si = { .cb = sizeof si }; 
```

如果由于某种原因您需要一个函数来清零整个内存块，最好使用标准函数`memset`。但是，如果您在 C 中使用正确的初始化程序（或 C++ 中的构造函数），您应该很少显式地需要它。

* * *

## 回答 #4

> 赞同：-7
> 
> 时间：2012-04-07T12:13:12.513

每个 c 代码都是有效的 c++ 代码。但并非相反。因此，如果您想使用 c++ 的 OS api，那么您应该将其编译为 c++。

# android - 在 android 中从 sqlite 存储和检索数据的问题

> ID：10054350
> 
> 赞同：0
> 
> 时间：2012-04-07T12:10:03.167
> 
> 标签：android, sqlite, datetime

我正在尝试使用以下查询从数据库中检索数据：

```
select * from Oil Where date(DDate)=date('2012-08-07'); 
```

其中 DDate 是 Oil 表中数据类型为 text 的列之一。我得到**Arrayindexoutofboundsexception**。我发现它没有返回任何值，计数为 0。任何人都可以帮我解决这个问题。我实际上要做的是在表中存储日期值。我找不到应该使用哪种数据类型来保存日期，从 sqlite 站点是它没有日期和时间的特定数据类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T12:13:22.707

SQL Server 附带以下数据类型，用于在数据库中存储日期或日期/时间值：

**日期**- 格式 YYYY-MM-DD

**DATETIME** - 格式：YYYY-MM-DD HH:MM:SS

**SMALLDATETIME** - 格式：YYYY-MM-DD HH:MM:SS

```
select * from Oil Where date(DDate)=date('2012-08-07'); 
```

可

```
select * from Oil Where DDate='2012-08-07'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T07:26:32.460

如果您有日期格式为“yyyy-MM-dd”的 DDate，那么您可以使用直接比较日期

```
select * from Oil Where DDate='2012-08-07'; 
```

否则，如果您的日期格式为“yyyy-MM-dd HH:mm:ss”，则查询如下所示

```
select * from Oil Where date(DDate)='2012-08-07'; 
```

如果您在 sqlite 数据库中保存日期并且您必须执行日期操作，例如排序或使用 date() 和 time() 函数，那么您必须使用 'yyyy-MM-dd HH:mm:ss' 日期格式。

数据类型对 sqlite 无关紧要。

# java - java - 如何通过java中的mouselisteners获取二维数组（jlabel）的索引？

> ID：10054355
> 
> 赞同：2
> 
> 时间：2012-04-07T12:11:12.477
> 
> 标签：java, swing, jlabel, multidimensional-array, mouseclick-event

如何使用 mouseclick 侦听器获取二维 JLabels 数组的索引？

```
 for (x =  0; x < 8; x++) {
        for(y=0; y<8; y++){
            jLabel[x][y]=new javax.swing.JLabel(blank);

            jPanel1.add(jLabel[x][y]);

            jLabel[x][y].addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
            jLabelMouseClicked(evt);
        }
    });
       }
       y=0;

    } 
```

* * *

```
private int jLabelMouseClicked(java.awt.event.MouseEvent evt) {
    System.out.println("clicked");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T12:17:11.140

*   使用获取组件`evt.getSource()`
*   遍历`jLabel`数组直到源 == x & y 坐标

# javascript - 当请求一个js文件时，为什么需要cookie信息（sessionid）

> ID：10054357
> 
> 赞同：0
> 
> 时间：2012-04-07T12:11:26.073
> 
> 标签：javascript, cookies

当请求一个js文件时，为什么浏览器会在http头cookie中添加一个param sessionid

下面是例子

```
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset  GB2312,utf-8;q=0.7,*;q=0.7
Accept-Encoding gzip, deflate
Accept-Language zh-cn,zh;q=0.5
Connection  keep-alive
Cookie  JSESSIONID=A87429B9EB1AB5E8FFEEF62B2149ED48
Host    localhost:8080
User-Agent  Mozilla/5.0 (Windows NT 5.1; rv:6.0.2) Gecko/20100101 Firefox/6.0.2 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T12:14:11.157

它与文件是js或其他无关。

Cookies 适用于与其路径匹配的所有资源。

服务器在生成响应时可能关心也可能不关心会话数据。

将静态资源保存在不向其发送 cookie 的不同主机上是一种用于在获取它们时提高性能的技术。（可以同时应用其他性能优化，例如使用 CDN 来提供地理上的本地资源）。

# java - 尝试部署 Spring 项目时出错

> ID：10054370
> 
> 赞同：1
> 
> 时间：2012-04-07T12:12:48.757
> 
> 标签：java, eclipse, spring

当我尝试在 Spring-Tool-Suite 2.9.1 中部署 spring 项目时出现此错误。

```
7 Apr, 2012 5:09:45 PM org.apache.catalina.startup.ClassLoaderFactory validateFile
WARNING: Problem with directory [D:\IDE\springsource\sts-2.9.1.RELEASE\lib], exists: [false], isDirectory: [false], canRead: [false]
7 Apr, 2012 5:09:45 PM org.apache.catalina.startup.ClassLoaderFactory validateFile
WARNING: Problem with directory [D:\IDE\springsource\sts-2.9.1.RELEASE\lib], exists: [false], isDirectory: [false], canRead: [false]
7 Apr, 2012 5:09:45 PM org.apache.catalina.startup.ClassLoaderFactory validateFile
WARNING: Problem with directory [D:\IDE\springsource\sts-2.9.1.RELEASE\lib], exists: [false], isDirectory: [false], canRead: [false]
7 Apr, 2012 5:09:45 PM org.apache.catalina.startup.ClassLoaderFactory validateFile
WARNING: Problem with directory [D:\IDE\springsource\sts-2.9.1.RELEASE\lib], exists: [false], isDirectory: [false], canRead: [false]
java.lang.ClassNotFoundException: org.apache.catalina.startup.Catalina
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
    at org.apache.catalina.startup.Bootstrap.init(Bootstrap.java:236)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:425) 
```

有人能告诉我这是什么原因吗？我该如何解决这个错误？

# java - Google 自定义搜索 API 的 Java 实现

> ID：10054377
> 
> 赞同：0
> 
> 时间：2012-04-07T12:13:41.180
> 
> 标签：java, google-api, google-search, google-custom-search

`Google API`我在使用 Java 时需要一些帮助。基本上，我需要用 Java 创建一个 Web 应用程序，它将调用`Google Custom Search Engine`（使用他们的 API）并检索结果。

我已阅读 Google 入门指南，但不确定如何使用他们的 API。谁能指点我一些示例或教程链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T07:21:50.480

从[http://google-api-java-client.googlecode.com/](http://google-api-java-client.googlecode.com/)[下载](http://mavenrepo.google-api-java-client.googlecode.com/hg/com/google/apis/google-api-services-customsearch/v1-rev2-1.5.0-beta/google-api-services-customsearch-v1-rev2-1.5.0-beta.zip)的内容包含您需要的所有库，但[示例](http://code.google.com/p/google-api-java-client/source/browse?repo=samples)没有任何特定于自定义搜索的内容。你会得到最接近的是[这里](http://blog.lux-medien.com/2011/08/google-custom-search-java-implementation/)：他们提供了一个[带有源代码的 jar 文件](http://www.lux-medien.com/googlux-customsearch-alpha-0.1.1.jar)。它不使用 Google Java 客户端库，但可能会让您开始使用[REST api](https://developers.google.com/custom-search/v1/using_rest)。

# c# - 在 C# 中模拟内存空间

> ID：10054381
> 
> 赞同：0
> 
> 时间：2012-04-07T12:14:04.300
> 
> 标签：c#, memory, byte, simulation

我想在 C# 中模拟闪存架构。更具体地说，架构如下所示：

*   闪存是块的集合
*   1 个块 = 128 个扇区
*   扇区由数据区和备用区组成
*   数据区 = 8 kB
*   备用区 = 16 B

我想在结构或类中表示它，但问题是我不知道如何在代码中表示一定数量的内存空间。我不能使用 int 或 char 数组，因为我不知道该内存空间中要存储什么......我不太确定，但我认为我可以使用 byte 数据类型来表示它......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T12:17:37.380

是的，听起来你想要一个字节数组。例如：

```
 public sealed class Block
 {
     private readonly Sector[] sectors = new Sector[128];

     public Sector this[int index] { get { return sectors[index]; } }
 }

 public sealed class Sector
 {
     private readonly byte[] data = new byte[8 * 1024];

     public byte this[int index]
     {
         get { return data[index]; }
         set { data[index] = value; }
     }
 } 
```

（如果需要，您也可以对“备​​用”区域进行建模 - 但尚不清楚您是否真的需要这样做。）

那只允许一次单个字节的访问-您可能希望拥有一次读取/写入数据块的`GetData`方法`SetData`。`Block`希望这会让你开始。

# mysql - MySQL在第二个表的同一日期连接两个具有多个条目的表

> ID：10054382
> 
> 赞同：0
> 
> 时间：2012-04-07T12:14:05.300
> 
> 标签：mysql

我有这两张桌子：

```
table1:
---------

UserID:     Date:       Day_status:
-----------------------------------
3004     2010-01-01     Normal
3004     2010-01-12     Normal
3004     2010-01-15     Ignore
3004     2010-01-18     Abnormal
4001     2010-01-09     Normal
4001     2010-01-11     Ignore
4001     2010-02-10     Normal
4001     2010-02-12     Abnormal
------------------------------------

table:2
-------
UserID:     Date:       Time          Height
--------------------------------------------
3004     2010-01-01     08:01:02       35
3004     2010-01-01     09:01:12       32
3004     2010-01-01     18:01:02       40

3004     2010-01-02     07:01:02       20
3004     2010-01-02     08:01:02       30
3004     2010-01-02     10:01:02       10

3004     2010-01-08     07:01:02       20
3004     2010-01-08     08:01:02       30
3004     2010-01-08     10:01:02       10

3004     2010-01-12     07:01:02       30
3004     2010-01-12     09:01:02       50
3004     2010-01-12     18:01:02       30

3004     2010-01-15     07:01:02       30
3004     2010-01-15     09:01:02       50
3004     2010-01-15     18:01:02       30

3004     2010-01-18     07:01:02       30
3004     2010-01-18     09:01:02       50
3004     2010-01-18     18:01:02       30

4001     2010-01-08     07:01:02       30
4001     2010-01-08     08:01:02       30
4001     2010-01-08     09:01:02       40
4001     2010-01-08     13:01:02       30

4001     2010-01-09     07:01:02       30
4001     2010-01-09     08:01:02       30
4001     2010-01-09     09:01:02       40

4001     2010-01-11     08:01:02       30
4001     2010-01-11     09:01:02       30
4001     2010-01-11     18:01:02       30

4001     2010-01-12     08:01:02       30
4001     2010-01-12     09:01:02       30
4001     2010-01-12     18:01:02       30

4001     2010-01-13     08:01:02       30
4001     2010-01-13     09:01:02       30
4001     2010-01-13     18:01:02       30

4001     2010-02-12     08:01:02       30
4001     2010-02-12     09:01:02       30
4001     2010-02-12     09:01:02       30
----------------------------------------------- 
```

请记住，在表 1 中：一个用户可以有多个“日期”（用户 3004 有多个日期）。并且，在表 2 中，

一个用户可以有多个“日期”，每个日期可以有多个“时间”。在表 2 中，用户 3004 对于日期“2011-01-01”有 3 个不同的“时间”，依此类推。

我想加入这两张桌子，这样，

1) 结果中包含 table2 中的所有数据和 table1 中的 Day_status 数据。

2）如果table1中table2的日期没有'Day_status'，则结果中该日期的Day_status将显示为'Normal'（注意：表2的日期条目比table1多）

3）table1中Day_status='Ignore'的条目不会出现在最终结果中

输出将是这样的：

```
UserID:     Date:       Time          Height     Day_status_val
---------------------------------------------------------------
3004     2010-01-01     08:01:02       35        Normal
3004     2010-01-01     09:01:12       32        Normal
3004     2010-01-01     18:01:02       40        Normal

3004     2010-01-02     07:01:02       20        Normal
3004     2010-01-02     08:01:02       30        Normal
3004     2010-01-02     10:01:02       10        Normal

3004     2010-01-08     07:01:02       20        Normal
3004     2010-01-08     08:01:02       30        Normal
3004     2010-01-08     10:01:02       10        Normal

3004     2010-01-12     07:01:02       30        Normal
3004     2010-01-12     09:01:02       50        Normal
3004     2010-01-12     18:01:02       30        Normal

3004     2010-01-18     07:01:02       30        Abnormal
3004     2010-01-18     09:01:02       50        Abnormal
3004     2010-01-18     18:01:02       30        Abnormal

4001     2010-01-08     07:01:02       30        Normal
4001     2010-01-08     08:01:02       30        Normal
4001     2010-01-08     09:01:02       40        Normal
4001     2010-01-08     13:01:02       30        Normal 

4001     2010-01-09     07:01:02       30        Normal
4001     2010-01-09     08:01:02       30        Normal
4001     2010-01-09     09:01:02       40        Normal

4001     2010-01-12     08:01:02       30        Normal
4001     2010-01-12     09:01:02       30        Normal
4001     2010-01-12     18:01:02       30        Normal

4001     2010-01-13     08:01:02       30        Normal
4001     2010-01-13     09:01:02       30        Normal
4001     2010-01-13     18:01:02       30        Normal

4001     2010-02-12     08:01:02       30        Abnormal
4001     2010-02-12     09:01:02       30        Abnormal
4001     2010-02-12     09:01:02       30        Abnormal
----------------------------------------------- 
```

我使用以下查询来获取我的结果：

```
SELECT table2.UserID, table2.Date, table2.Time, table2.Height,

CASE
   when table1.Day_status='Abnormal Day' then 'Abnormal Day'
   when table1.Day_status='Normal Day' then 'Normal Day'
   else 'Normal Day'
END as Day_status_val

FROM table2 LEFT JOIN table1
ON table2.UserID = table1.UserID and table1.Day_status !='Ignore' 
```

但是，它给出了错误的结果。谁能帮我解决这个问题。请查看 table1 和 table2 中的数据以及我想要的输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T15:53:55.237

我想你快到了。您需要添加一个额外的 ON 子句来匹配 Date 字段，并且可以使用 IFNULL 来获得正确的 Day_status。

```
SELECT t2.UserID,t2.Date,t2.Time,t2.Height,IFNULL(t1.Day_status,'Normal')
FROM table2 t2 
    LEFT JOIN table1 t1
    ON  t2.UserID = t1.UserID 
    AND t1.Day_status !='Ignore' 
    AND t2.`Date`=t1.`Date` 
```

# python - 在 Django 的仪表板上无法访问我的应用程序

> ID：10054387
> 
> 赞同：0
> 
> 时间：2012-04-07T12:14:23.900
> 
> 标签：python, django

当我设置 settings.DEBUG=False 时，我无法访问仪表板中的应用程序，但身份验证和站点除外。它与 settings.DEBUG=True 一起工作正常。

```
# Django settings for blog project.
import sys
PROJECT_PATH=r'/home/www/blog'
if not PROJECT_PATH in sys.path:
    sys.path.insert(0,PROJECT_PATH)

DEBUG =False

TEMPLATE_DEBUG =False 

ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': '/home/www/blog/database.db',                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
}

# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# On Unix systems, a value of None will cause Django to use the same
# timezone as the operating system.
# If running in a Windows environment this must be set to the same as your
# system time zone.
TIME_ZONE = 'Asia/Shanghai'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'zh-cn'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale.
USE_L10N = True

# If you set this to False, Django will not use timezone-aware datetimes.
USE_TZ = True

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = '/home/www/blog/media/'

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = '/media/'

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = '/home/www/blog/staticDir/'

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    '/home/www/blog/static/',
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

ROOT_URLCONF = 'blog.urls'

# Python dotted path to the WSGI application used by Django's runserver.
WSGI_APPLICATION = 'blog.wsgi.application'

TEMPLATE_DIRS = (
    '/home/www/blog/templates',
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    'article',
    'guestbook',
    'multimedia',
    'archive',
    'about',
)

# A sample logging configuration. The only tangible logging
# performed by this configuration is to send an email to
# the site admins on every HTTP 500 error when DEBUG=False.
# See http://docs.djangoproject.com/en/dev/topics/logging for
# more details on how to customize your logging configuration.
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'
        }
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
} 
```

这是一个名为article的应用：</p>

```
# coding:utf-8
from markdown import markdown
import datetime

from django.db import models

from django.contrib import admin

VIEWABLE_STATUS = [2,]

class ViewableManager(models.Manager):
    """
        改写 Model.objects 的 get_query_set 方法
        objects 不能接触状态为不可见的 Article 类的实体
    """
    def get_query_set(self):
        default_queryset = super(ViewableManager, self).get_query_set()
        return default_queryset.filter(status__in=VIEWABLE_STATUS)

class Article(models.Model):
    """
        文章类
    """
    STATUS_CHOICES=((1,'Editing'),
                    (2,'Posted'),)
    articleID=models.AutoField(primary_key=True)
    title=models.CharField(max_length=50,unique=True)
    slug = models.SlugField(max_length=50,unique=True)
    postDate=models.DateField()
    lastUpdate=models.DateTimeField(auto_now=True,auto_now_add=True)
    keywords=models.CharField(max_length=140,blank=True)
    markdown_content=models.TextField()
    html_content=models.TextField(editable=False)
    status=models.IntegerField(choices=STATUS_CHOICES,default=1)
    class Meta:
        ordering=['-postDate','-lastUpdate']

    def get_url(self):
        return r'/article/'+str(self.slug)
    def __unicode__(self):
        return self.title
    def saveCategories(self):
        self.articleCategories.clear()
        categoryList=self.keywords.split()
        for category in categoryList:
            c=Category.objects.filter(label=category)
            if c:
                self.articleCategories.add(c[0])
            else:
                self.articleCategories.create(label=category)                

    def save(self):
        self.html_content=markdown(self.markdown_content)
        self.lastUpdate=datetime.datetime.now()
        super(Article,self).save()
        self.saveCategories()
        print self.html_content
        print self.lastUpdate
        super(Article,self).save()

    admin_objects=models.Manager()
    objects=ViewableManager()

class ArticleAdmin(admin.ModelAdmin):
    list_display = ('title',  'status', 'postDate', 'lastUpdate')
    search_fields = ('title', 'keywords','content')
    list_filter = ('status', 'postDate', 'lastUpdate')

admin.site.register(Article, ArticleAdmin)

class Category(models.Model):
    label=models.CharField(max_length=30,unique=True)
    masterArticle=models.ManyToManyField(Article,related_name='articleCategories',blank=True)
    class Meta:
        verbose_name_plural = "categories" 
    def __unicode__(self):
        return self.label
class CategoryAdmin(admin.ModelAdmin):
    pass

admin.site.register(Category, CategoryAdmin) 
```

和其他名为留言簿的应用程序

```
# coding:utf-8
from django.db import models
from django.contrib import admin
from md5 import md5 
from article.models import Article

class guestMessage(models.Model):
    guestName=models.CharField(max_length=50)
    guestEmail=models.EmailField(max_length=75)
    gravatarHash=models.CharField(max_length=33,blank=True)
    content=models.TextField()
    postDate=models.DateTimeField(auto_now_add=True)
    article=models.ForeignKey(Article,blank=True,null=True,
                              related_name='guestMessage')
    def save(self):
        super(guestMessage,self).save()
        self.gravatarHash=(md5(self.guestEmail)).hexdigest()
        super(guestMessage,self).save()    

class guestMessageAdmin(admin.ModelAdmin):
    list_display = ('guestName',  'article', 'postDate')
    search_fields = ('guestName', 'article','content')
    list_filter = ('article', 'postDate')

admin.site.register(guestMessage, guestMessageAdmin) 
```

这是 urls.py

```
 from django.conf.urls.defaults import patterns, include, url
from django.conf import settings
from django.conf.urls.static import static
# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
     url(r'^admin/', include(admin.site.urls)),
)
urlpatterns += patterns('article.views',
    url(r'^$', 'index'),
    url(r'^article/([\S]+)$', 'articleDetail'),
    url(r'^category/([\S]+)$','articleBYcategory'),
    url(r'^search/$','atricleSearch'),
)

urlpatterns += patterns('guestbook.views',
    url(r'^guestbook/$','guestbook'),
)

urlpatterns += patterns('archive.views',
    url(r'^archive/$','archive'),
)

urlpatterns += patterns('about.views',
    url(r'^about/$','about'),
) 
```

www.mysite.com/admin：没有添加或更改链接。我没有权限？图片链接：http: [//img3.douban.com/view/photo/photo/public/p1499852307.jpg](http://img3.douban.com/view/photo/photo/public/p1499852307.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T03:21:35.077

除了将注册管理站点移出`models`. 官方文档说它们位于单独的`admin`模块中。

# ios - 扩展 MKPolylines 或创建多个 MKPolylines？

> ID：10054390
> 
> 赞同：5
> 
> 时间：2012-04-07T12:14:27.920
> 
> 标签：ios, mkmapview, cllocationmanager

我正在编写一个 iOS 5 应用程序，它可以实时跟踪用户的位置，在`MKMapView`. 每当获取 GPS 读数时，我希望在当前位置和旧位置之间绘制一条折线，最终形成用户旅行的轨迹（或面包屑）。

我很喜欢使用`MKPolyline`和`MKPolylineView`绘制轨迹，假设我`CLLocationCoordinate2D`事先拥有所有坐标，使用类似于下面的代码：

```
MKPolyline *route = [MKPolyline polylineWithCoordinates:coordinates count:[self.coordinateArray count]];        
[mapView addOverlay:route]; 
```

但是，由于我只是`CLLocationCoordinate2D`实时获取坐标（因为`locationManager:didUpdateToLocation:fromLocation:`调用了委托方法），所以我不确定绘制新折线的最佳方法。

我可以扩展现有的线（即添加到基于 C 的`coordinates`数组 - 没有太多的 C 经验我不确定如何做到这一点）还是我需要在接下来的两个坐标之间创建一条新的折线（尽管我听说有地图上太多单独的折线会影响性能和内存使用...）？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T12:59:45.477

首先，看看[如何更新 MKPolyline / MKPolylineView？](https://stackoverflow.com/questions/3171572/how-to-update-mkpolyline-mkpolylineview)，尤其是[Breadcrumb](http://developer.apple.com/library/ios/#samplecode/Breadcrumb/Introduction/Intro.html)示例代码的链接。这可能是您需要的一个很好的起点。

但是，您会看到其`CrumbPath`对象的一个​​重要部分是对`realloc`. 所以是的，如果你想有效地存储点数组，你需要知道如何管理 C 风格的数组。是的，这并不容易。是的，C 风格的数组操作会导致内存泄漏。

Breadcrumb 示例用于`realloc`调整其数组的大小。通过将数组使用的内存分配给类型，您可以更安全一些`NSMutableData`。建议作为对[在 Objective-C/iPhone 应用程序中使用“经典”malloc()/free() 可以吗？](https://stackoverflow.com/a/1153453/1318452). 阅读其他解决方案以查看执行相同工作的常规 C`malloc()`和函数。`free()`注意 NSMutableData 有一个非常方便的`increaseLengthBy:`方法。

当您了解为什么每个 C 学生都尝试`sizeof()`不正确地使用它以及如何正确使用它时，您将了解 C 内存管理。

# c++ - Visual Studio std::stringstream pubsetbuf 不起作用

> ID：10054396
> 
> 赞同：3
> 
> 时间：2012-04-07T12:15:07.290
> 
> 标签：c++, visual-studio, stl, std

**std::stringbuf 的pubsetbuf**成员在 Visual Studio 2010 中根本不起作用！

编码：

```
char *FileData = ... ;
unsigned long long FileDataLen = ... ;
std::stringstream *SS = new std::stringstream(std::stringstream::in | std::stringstream::out);
SS->rdbuf()->pubsetbuf( FileData, (std::streamsize)FileDataLen ); 
```

**pubsetbuf**在 Visual Studio 中什么都不做！！！

**解决方法 #1**：

```
std::stringstream *SS = new std::stringstream( std::string(FileData, (size_type)FileDataLen ) ),std::stringstream::in | std::stringstream::out); 
```

**解决方法 #2**：

```
SS->rdbuf()->sputn(FileData, (streamsize)FileDataLen); 
```

但是这两种解决方法都会产生**不必要**的内存复制。我绝对需要 std::stringbuf 的工作**pubsetbuf**成员。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T12:20:23.683

`putsetbuf`仅对`fstream`（从技术上讲， for `std::basic_filebuf`）有意义，其中缓冲区和流是两个不同的东西。

对于`stringstream`（从技术上讲，`std::basic_stringbuf`）它们是同一个 std::string。

如果您需要一个在其外部的字符串上工作的流，请考虑`std::strstream`：或`boost::iostreams::array_sink`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T04:22:56.067

[basic_ios.clear()](http://en.cppreference.com/w/cpp/io/basic_ios/clear) 如果您需要更改 rdbuf，请先调用它，否则它将无法工作。

```
std::ifstream file("file1.txt"); // file1.txt contains "Welcome!"
std::stringstream ss;
ss << file.rdbuf();

std::cout << ss.str() << std::endl; 
```

输出“欢迎！”。
让我们用一个新文件再试一次。

```
// Empty it
file.close();
ss.str("");

// New file
file.open("file2.txt"); // file2.txt contains "Goodbye!"
ss << file.rdbuf();

std::cout << ss.str() << std::endl; 
```

什么都不输出。

```
ss.clear();
ss << file.rdbuf();
std::cout << ss.str() << std::endl;
file.close(); 
```

输出“再见！”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-23T02:37:14.497

我看到同样的事情。我正在处理绝对不能制作不必要的数据副本的场景。根据 basic_streambuf 类中的评论，这似乎是有意的：

```
virtual basic_streambuf *__CLR_OR_THIS_CALL setbuf(_Elem *, streamsize)
    {   // offer buffer to external agent (do nothing)
    return (this);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-27T14:40:35.483

我最近遇到了相同的 setbuf 未在 Visual Studio 2017 中实现的问题。

在 Stack Overflow 上进行一些搜索后，我找到了一个输出流的解决方案，它不使用我为输入流修改的缓冲区的复制。在这里他们供参考。

# 输出流

来源：[设置标准流使用的内部缓冲区 (pubsetbuf)](https://stackoverflow.com/questions/1494182/setting-the-internal-buffer-used-by-a-standard-stream-pubsetbuf)

```
#include <streambuf>

模板 <typename char_type>
结构 ostreambuf : 公共 std::basic_streambuf<char_type, std::char_traits<char_type> >
{
    ostreambuf(char_type* 缓冲区，std::streamsize bufferLength)
    {
        // 将“put”指针设置为缓冲区的开头并记录它的长度。
        设置（缓冲区，缓冲区+缓冲区长度）；
    }
};

```

# 输入流

来源：[标准输入流使用的内部缓冲区 (pubsetbuf)](https://stackoverflow.com/questions/56283357/internal-buffer-used-by-standard-input-stream-pubsetbuf)

```
#include <streambuf>

模板 <typename char_type>
结构 istreambuf : public basic_streambuf<char_type, char_traits<char_type>>
{
    istreambuf（char_type* 缓冲区，streamsize 缓冲区长度）
    {
        // 将“get”指针设置为缓冲区的开头，即下一项，并记录其长度。
        this->setg(buffer, buffer, buffer + buffer_length);
    }
};

主函数（）
{
    ifstream infile(FILENAME, ifstream::binary);

    // 将整个文件读入缓冲区。
    infile.seekg(0, ios::end);
    streampos 长度 = infile.tellg();
    infile.seekg(0, ios::beg);
    向量<char> 缓冲区（长度）；
    //char* 缓冲区 = new char[length];
    infile.read(&buffer[0], 长度);
    infile.close();

    // 创建缓冲区并将 local_stream 指向它。
    istreambuf<char> istream_buffer(&buffer[0], 长度);
    istream local_stream(&istream_buffer);

    字符串 str1;

    而 (local_stream >> str1)
    {
        . . .
    }
}
```

# c# - 循环遍历两列 WPF 数据网格的行并使用元素形成列表集合

> ID：10054398
> 
> 赞同：0
> 
> 时间：2012-04-07T12:15:19.360
> 
> 标签：c#, wpf, list, datagrid

我正在创建一个应用程序，在该应用程序中创建了一个列表集合并将其成功绑定到数据网格。我遇到的问题是当用户在对数据网格进行更改后单击“保存”按钮时，从数据网格中提取数据并使用它来形成同一列表集合的元素。提前致谢。

XAML 如下所示：

```
<Grid Background="CornflowerBlue">
    <DataGrid AutoGenerateColumns="False" Height="530" HorizontalAlignment="Left" Margin="12,12,0,0" Name="gridBeveragesAndJuices" VerticalAlignment="Top" Width="573"
              HorizontalGridLinesBrush="Cyan" RowBackground="#FF12AD12" VerticalGridLinesBrush="Cyan" Foreground="Cyan" EnableColumnVirtualization="False" 
              EnableRowVirtualization="False" CanUserDeleteRows="True" CanUserAddRows="True" CanUserReorderColumns="False" CanUserResizeColumns="False" CanUserResizeRows="False" CanUserSortColumns="False" AlternatingRowBackground="DodgerBlue" FontSize="13">
        <DataGrid.Resources>
            <Style TargetType="{x:Type DataGridColumnHeader}">
                <Setter Property="Foreground" Value="DodgerBlue" />
                <Setter Property="BorderBrush" Value="Yellow" />
            </Style>
        </DataGrid.Resources>
        <DataGrid.Columns>
            <DataGridTextColumn Width="287" Header="                        ITEMS"
                       Binding="{Binding Path=ITEMS8, Mode=TwoWay, NotifyOnTargetUpdated=True}" x:Name="ItemsColumn" />
            <DataGridTextColumn Width="286" Header="                        PRICE"
                       Binding="{Binding Path=PRICE8, Mode=TwoWay, NotifyOnTargetUpdated=True}" x:Name="PriceColumn"/>
        </DataGrid.Columns>
    </DataGrid>
    <Button Content="Cancel" Height="23" HorizontalAlignment="Left" Margin="67,578,0,0" Name="btnCancel" VerticalAlignment="Top" Width="75" />
    <Button Content="Save" Height="23" HorizontalAlignment="Left" Margin="256,578,0,0" Name="btnSave" VerticalAlignment="Top" Width="75" Click="btnSave_Click" />
    <Button Content="Exit" Height="23" HorizontalAlignment="Left" Margin="444,578,0,0" Name="btnExit" VerticalAlignment="Top" Width="75" />

</Grid> 
```

下面是后面的代码：

```
public partial class BeveragesAndJuices : Window
{
    public BeveragesAndJuices()
    {
        InitializeComponent();
        gridBeveragesAndJuices.ItemsSource = Source8;
    }

    public class Values8 
    {
        public string ITEMS8 { get; set; }
        public decimal PRICE8 { get; set; }
    }

    public List<Values8> Source8 = new List<Values8> 
    {
        new Values8(){ITEMS8 = "Lacasera ", PRICE8 = 290}, new Values8(){ITEMS8 = "Cran-Orange Chiller ", PRICE8 = 290}, new Values8(){ITEMS8 = "Festive Fruity Flavored Milk  ", PRICE8 = 290}, 
        new Values8(){ITEMS8 = "Homemade Iced Coffee ", PRICE8 = 290}, new Values8(){ITEMS8 ="Lemon Cucumber Seltzer " , PRICE8 = 290}, new Values8(){ITEMS8 = "Fizzy Water ", PRICE8 = 290}, 
        new Values8(){ITEMS8 ="Haunted (Black Cauldron) Punch  " , PRICE8 = 290}, new Values8(){ITEMS8 ="Lemon Ginger Iced Green Tea " , PRICE8 = 290}, new Values8(){ITEMS8 ="Orange Creamsicle Shake " , PRICE8 = 290}, 
        new Values8(){ITEMS8 = "Blueberry Blast Smoothie ", PRICE8 = 290}, new Values8(){ITEMS8 ="Shamrock Milk Mixer " , PRICE8 = 290}, new Values8(){ITEMS8 = "Pomegranate Punch  ", PRICE8 = 290}, 
        new Values8(){ITEMS8 ="anned Milo " , PRICE8 = 290}, new Values8(){ITEMS8 ="Viju Milk " , PRICE8 = 290}, new Values8(){ITEMS8 = "5 Alive ", PRICE8 = 290}, 
        new Values8(){ITEMS8 ="Cherry Vanilla Smoothie  " , PRICE8 = 290}, new Values8(){ITEMS8 = "Boysenberry-Banana Blast ", PRICE8 = 290}, new Values8(){ITEMS8 = "Vanilla Iced Mochaccino  ", PRICE8 = 290}, 
        new Values8(){ITEMS8 ="Choco-Nana Milk Mixer " , PRICE8 = 290}, new Values8(){ITEMS8 = "Fresh Fruit Pudding Milk Mixer ", PRICE8 = 290}, new Values8(){ITEMS8 ="Luscious Licuado  " , PRICE8 = 290}, 
        new Values8(){ITEMS8 = "Frosty Pine-Orange Yogurt Smoothie ", PRICE8 = 290}, new Values8(){ITEMS8 = "Mocha-ccino Freeze ", PRICE8 = 290}, new Values8(){ITEMS8 ="Lite Iced Mocha " , PRICE8 = 290}, 
        new Values8(){ITEMS8 ="Nectarine Whirl " , PRICE8 = 290}, new Values8(){ITEMS8 ="Strawberries and Cream Smoothie  " , PRICE8 = 290}, new Values8(){ITEMS8 ="Strawberry Light Lemonade " , PRICE8 = 290}
    };

    private void btnSave_Click(object sender, RoutedEventArgs e)
    {
        //clear the elements of the source  
        Source8.Clear();

        //get the items on the datagrid and use them to form new elements of the 
        //Source8

        foreach(DataGridRow Row in gridBeveragesAndJuices)
        {
            //this where am stuck, foreach flags an error
            //that DataGridRow does not have a definition for GetEnumerator
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T13:33:54.323

我会稍微改变你的代码并绑定。创建列表不应真正成为公共属性，因为它每次都会新建列表 - = new 并不意味着在外部使用。

```
 private List<> source8 = new Values8(){ITEMS8 = "Lacasera ", PRICE8 = 290}, new Values8(){ITEMS8 = "Cran-Orange Chiller ", PRICE8 = 290}, new Values8(){ITEMS8 = "Festive Fruity Flavored Milk  ", PRICE8 = 290}, 
    new Values8(){ITEMS8 = "Homemade Iced Coffee ", PRICE8 = 290}, new Values8(){ITEMS8 ="Lemon Cucumber Seltzer " , PRICE8 = 290}, new Values8(){ITEMS8 = "Fizzy Water ", PRICE8 = 290}, 
    new Values8(){ITEMS8 ="Haunted (Black Cauldron) Punch  " , PRICE8 = 290}, new Values8(){ITEMS8 ="Lemon Ginger Iced Green Tea " , PRICE8 = 290}, new Values8(){ITEMS8 ="Orange Creamsicle Shake " , PRICE8 = 290}, 
    new Values8(){ITEMS8 = "Blueberry Blast Smoothie ", PRICE8 = 290}, new Values8(){ITEMS8 ="Shamrock Milk Mixer " , PRICE8 = 290}, new Values8(){ITEMS8 = "Pomegranate Punch  ", PRICE8 = 290}, 
    new Values8(){ITEMS8 ="anned Milo " , PRICE8 = 290}, new Values8(){ITEMS8 ="Viju Milk " , PRICE8 = 290}, new Values8(){ITEMS8 = "5 Alive ", PRICE8 = 290}, 
    new Values8(){ITEMS8 ="Cherry Vanilla Smoothie  " , PRICE8 = 290}, new Values8(){ITEMS8 = "Boysenberry-Banana Blast ", PRICE8 = 290}, new Values8(){ITEMS8 = "Vanilla Iced Mochaccino  ", PRICE8 = 290}, 
    new Values8(){ITEMS8 ="Choco-Nana Milk Mixer " , PRICE8 = 290}, new Values8(){ITEMS8 = "Fresh Fruit Pudding Milk Mixer ", PRICE8 = 290}, new Values8(){ITEMS8 ="Luscious Licuado  " , PRICE8 = 290}, 
    new Values8(){ITEMS8 = "Frosty Pine-Orange Yogurt Smoothie ", PRICE8 = 290}, new Values8(){ITEMS8 = "Mocha-ccino Freeze ", PRICE8 = 290}, new Values8(){ITEMS8 ="Lite Iced Mocha " , PRICE8 = 290}, 
    new Values8(){ITEMS8 ="Nectarine Whirl " , PRICE8 = 290}, new Values8(){ITEMS8 ="Strawberries and Cream Smoothie  " , PRICE8 = 290}, new Values8(){ITEMS8 ="Strawberry Light Lemonade " , PRICE8 = 290};

public BeveragesAndJuices()
{
    InitializeComponent();
    gridBeveragesAndJuices.ItemsSource = Source8;  // move this to XAML Binding
}

public class Values8 
{
    public string ITEMS8 
    { 
        get; 
        set
        {
             Debug.WriteLine(value);
             // this is where you do the update
        } 
    }
    public decimal PRICE8 { get; set; }
}

public List<Values8> Source8
{
    get { return source8; }

}

private void btnSave_Click(object sender, RoutedEventArgs e)
{
    //clear the elements of the source  
    //Source8.Clear(); for sure you don't want to do this  !

    //get the items on the datagrid and use them to form new elements of the 
    //Source8

    // do this is the set
    //foreach(DataGridRow Row in gridBeveragesAndJuices)
    //{
        //this where am stuck, foreach flags an error
        //that DataGridRow does not have a definition for GetEnumerator
    //}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T12:35:50.623

无需重建 Source8，因为您的 ITEMS8 和 PRICE8 的 TwoWayBinding 可以完成这项工作。这些值已经是最新的。即使你添加一个新`Row`的到`DataGrid`Source8 也会立即显示一个新的条目。

使用您的 Save-Button 序列化 Source8，它是您的`DataGrid`.

# java - JPA：@OrderColumn 和实体的可见状态？

> ID：10054400
> 
> 赞同：0
> 
> 时间：2012-04-07T12:15:46.240
> 
> 标签：java, hibernate, jpa, jpa-2.0, eclipselink

这是一个后续问题：

[JPA 是否支持 @ManyToMany(mappedBy = ... ) + @OrderColumn？](https://stackoverflow.com/questions/9957247/is-manytomanymappedby-ordercolumn-supported-by-the-jpa)

我指的是`@OrderColumn`Java文档：

[http://docs.oracle.com/javaee/6/api/javax/persistence/OrderColumn.html](http://docs.oracle.com/javaee/6/api/javax/persistence/OrderColumn.html)

那里的文本与 JPA 2 规范在第 11.1.39 节*OrderColumn Annotation*中所写的相同。

“订单列作为实体状态的一部分不可见”部分**到底是**什么意思？对此有很大的解释空间。

这是否意味着订单列不能是定义的任何 FK 和/或 PK 的一部分？还是仅不在 FK 中（允许 PK）？实体的状态包括什么？AFAIK JPA 规范没有定义。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T15:44:05.303

订单列不是实体类中的字段，因此它是不可见的（因此）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-08T13:31:32.897

OPENJPA。请看这段代码，这是最好的理解方式

```
//This is in the parent table
@OneToMany(cascade = CascadeType.ALL, mappedBy = "parentTable", fetch = FetchType.EAGER)
    @OrderColumn
    private ArrayList<child_class_type> childTable = new ArrayList<child_class_type>();

//This is in the child table
@ManyToOne(fetch = FetchType.EAGER, optional = false)
    private parentTableClass parentTable; 
```

这将得到一个有序列表（子表）。:)

约翰五世，上校

# sql - 表名显示

> ID：10054401
> 
> 赞同：0
> 
> 时间：2012-04-07T12:15:49.813
> 
> 标签：sql, sql-server

是否有在 sql server 上显示表名的功能？我想检查是否在特定表中找到了用户，应该返回表的名称，我可以这样做吗？

```
 IF EXISTS(
 SELECT        Std_ID
 FROM            Student
 WHERE Std_ID = @UserId) 
```

我希望它在这里返回学生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T12:22:48.710

由于您已经知道要检查 Student 表，因此只需返回值“Student”

```
if(exists(select * from Student where Std_ID = @UserId))
begin
  select 'Student' as TableName
  return;
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T10:36:15.510

您可以使用以下查询检查表是否已在 sys.object 中，如果存在则返回表的名称。

```
select name from sys.objects where type = 'U' and name = 'Student' 
```

# asp.net-mvc - ajax调用后如何更改特定按钮值

> ID：10054402
> 
> 赞同：1
> 
> 时间：2012-04-07T12:16:13.250
> 
> 标签：asp.net-mvc, jquery, ajaxform

如果项目和每个项目我都有按钮，我有一个列表。当我单击该按钮时，我会进行服务器调用，然后在调用之后我需要更改按钮文本。所以我写这个函数来ajaxify调用：

```
$('.form').ajaxForm({
            beforeSubmit: function () {                
            },
            success: function (result) {
                $('.itemHoverBox').attr('value', 'Confirmed');
            },
            error: function (xhr, textStatus, errorThrown) {           
            }
        }); 
```

这是操作按钮：

```
@using (Html.BeginForm("Confirm", "Products", new { productId = @t.ProductId }, FormMethod.Post, new { @class="form"}))
{
<input style="width: 60px;" class="itemHoverBox button white" type="submit" value="Confirm" />
} 
```

但这一切都`itemHoverBox`在页面上发生了变化，而我正在尝试的只是更改我单击的按钮。就像您在 stackoverflow 上单击最喜欢的问题明星时一样。
我的操作方法现在返回 void：

```
[HttpPost]
        public void CollectTicket(int ticketId)
        {
            ...           
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T12:21:11.037

您可以在闭包中捕获表单：

```
$('.form').each(function() {
    var form = $(this);
    form.ajaxForm({
        success: function (result) {
            form.find('.itemHoverBox').attr('value', 'Confirmed');
        }
    });
}); 
```

甚至更清洁，使用`context`参数：

```
$('.form').each(function() {
    var form = $(this);
    form.ajaxForm({
        context: form,
        success: function (result) {
            // Here this will equal to the context object we specified
            this.find('.itemHoverBox').attr('value', 'Confirmed');
        }
    });
}); 
```

# java - Java：设计接口以强制实现覆盖 toString

> ID：10054403
> 
> 赞同：16
> 
> 时间：2012-04-07T12:16:28.923
> 
> 标签：java, inheritance, overriding, tostring

我正在开发一个 SPI 并想定义一个`Reportable`接口，以便任何实现都必须覆盖`toString()`有意义的东西。

Java中有什么方法可以编写一个接口，使其任何具体实现都*必须*覆盖Object的`toString()`？例如：

```
public interface Reportable
{
    public String toString();
}

public class Widget implements Fizz, Buzz, Reportable
{
    // ...

    @Override
    public String toString()
    {
        // ...
    }
} 
```

我知道上面的代码不会*强制*这种行为，但它是我正在寻找的一个例子，即如果`Widget`没有覆盖`toString()`你会得到一个编译错误，因为它违反了接口合同。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-07T12:20:34.043

不，你不能这样做。我建议您选择*不同*的方法名称，例如

```
public interface Reportable
{
    String createReport();
} 
```

这将迫使实现编写适当的方法。`toString()`它的意图已经有些模糊 - 无论是用于调试表示，用户可见表示（此时您需要询问自己的语言环境等）。添加*另一个*含义对我来说似乎不是一个好主意。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-10T14:18:06.200

我的理解是，您想要创建一组整齐地给出其字符串表示的类。因此，当调用类似的东西时，`System.out.println(yourobject)`它会显示有意义的数据。

您不能强制您的子类覆盖 toString。但是你可以做这样的事情。

```
abstract class MyBase
{
    abstract String getNiceString();
    @Override
    public String toString()
    {
        return getNiceString();
    }
} 
```

# iphone - 屏幕上的相机黑屏问题？

> ID：10054405
> 
> 赞同：2
> 
> 时间：2012-04-07T12:16:34.057
> 
> 标签：iphone

我正在研究 iphone 中的虚拟双筒望远镜。我为 iphone 和 ipad 制作了一个应用程序。收到有关相机黑屏的问题。实际上，当第一次应用程序在 iphone 上加载时，它会调用 viewdidload 方法，然后它会调用 viewwillappear，然后调用 viewdidappear。但是当我处理我的应用程序时，它可以正常工作，但是在此期间，如果我打开另一个应用程序并再次重新打开我的应用程序它让我在相机上出现黑屏。它只是意味着它没有加载应用程序

# ruby-on-rails - Rails 服务器不通过命令“Rails s”启动

> ID：10054406
> 
> 赞同：14
> 
> 时间：2012-04-07T12:16:35.217
> 
> 标签：ruby-on-rails, ruby

我是 ruby​​ 和 rails 的新手，我在 ubuntu 中安装了 rails。但是当我通过键入“rails s”进入启动服务器时，它不会启动并出现以下消息。但我可以通过命令 rails new new_project 创建一个新项目。请rails专家帮帮我。

```
root@ubuntu:~# rails s Usage: rails new APP_PATH [options] Options: -j, [--javascript=JAVASCRIPT] 
# Preconfigure for selected JavaScript library # Default: jquery -m, [--template=TEMPLATE] # Path to an application template (can be a filesystem path or URL) [--dev] 
# Setup the application with Gemfile pointing to your Rails checkout -J, [--skip-javascript] # Skip JavaScript files [--edge] 
# Setup the application with Gemfile pointing to Rails repository -G, [--skip-git] 
# Skip Git ignores and keeps -d, [--database=DATABASE] 
# Preconfigure for selected database (options: mysql/oracle/postgresql/sqlite3/frontbase/ibm_db/sqlserver/jdbcmysql/jdbcsqlite3/jdbcpostgresql/jdbc) 
# Default: sqlite3 -b, [--builder=BUILDER] 
# Path to a application builder (can be a filesystem path or URL) -r, [--ruby=PATH] 
# Path to the Ruby binary of your choice 
# Default: /usr/bin/ruby1.8 [--old-style-hash] 
# Force using old style hash (:foo => 'bar') on Ruby >= 1.9 [--skip-gemfile] 
# Don't create a Gemfile -O, [--skip-active-record] 
# Skip Active Record files [--skip-bundle] # Don't run bundle install -T, [--skip-test-unit] 
# Skip Test::Unit files -S, [--skip-sprockets] 
# Skip Sprockets files Runtime options: -q, [--quiet] 
# Supress status output -f, [--force] 
# Overwrite files that already exist -s, [--skip] 
# Skip files that already exist -p, [--pretend] 
# Run but do not make any changes Rails options: -h, [--help] 
# Show this help message and quit -v, [--version] 
# Show Rails version number and quit Description: The 'rails new' command creates a new Rails application with a default directory structure and configuration at the path you specify. You can specify extra command-line arguments to be used every time 'rails new' runs in the .railsrc configuration file in your home directory. Note that the arguments specified in the .railsrc file don't affect the defaults values shown above in this help message. Example: rails new ~/Code/Ruby/weblog This generates a skeletal Rails installation in ~/Code/Ruby/weblog. See the README in the newly created application to get going 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-04-15T17:21:43.853

更好的方法是使用以下命令更新您的 bin

```
bundle exec rake rails:update:bin 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-07T12:25:04.613

1.  您需要创建一个新的 Rails 应用程序（除非您已经有一个）

    ```
    rails new my_app 
    ```

2.  转到您的应用程序目录

    ```
    cd my_app 
    ```

3.  在该目录中启动服务器

    ```
    rails s 
    ```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-07T12:24:23.047

一旦你创建了项目并`cd`'d 进入它：

`script/server`如果您使用的是 rails 版本 2.x，请使用

`script/rails server`如果您使用的是 rails 版本 3.x，请使用

`bin/rails server`如果您使用的是 rails 版本 4.x，请使用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T21:05:02.463

在启动 rails 服务器之前，您必须 cd 进入应用程序的目录。那是因为服务器需要知道它应该服务的应用程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-20T19:21:29.810

我遇到了这个问题并且困惑了一分钟，直到我意识到我不小心删除了我的 bin 文件夹。

如何修复它：

1.  备份您的应用程序。
2.  `cd`退出 Rails 应用程序的根目录。
3.  运行`rails new name_of_your_app`——确保它与已经存在的目录同名。
4.  Rails 将再次构建该文件夹，询问您是否要覆盖文件，`n`每次询问时点击“否”。
5.  Rails 将添加丢失的 bin 文件，而如果您点击`n`其他所有内容，它将保留其他所有内容。
6.  在我的情况下，我将 HAML 与`application.html.haml`文件一起使用，因此 Rails 还`application.html.erb`为我生成了一个`views/layouts`我不需要的文件，因此将其删除。注意生成的任何其他文件并删除您不想要的任何文件。
7.  运行`rails s`以启动 WEBrick 服务器。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-22T12:52:35.393

我也是 Ruby on rails 的新手。当我的电脑意外关机时，我发现了同样的问题。我通过以下步骤修复它。

1.  创建一个新的应用程序。Rails 新演示 --Database=postgresql

2.  复制新 Demo 应用的 Bin 文件夹。

3.  删除旧应用程序的 Bin 文件夹（显示错误）

4.  将 Demo App 中的 New bin 文件夹粘贴到旧 App。

5.  启动服务器 Rails 服务器

请注意，您可以从 Github 复制 bin 文件夹。[https://github.com/hoovercj/depot](https://github.com/hoovercj/depot)

# c++ - c++ 编译失败并出现错误：命名空间“std”中没有名为“snprintf”的成员

> ID：10054408
> 
> 赞同：6
> 
> 时间：2012-04-07T12:17:00.330
> 
> 标签：c++, xcode, stl

几分钟前就可以编译成功了。在我尝试通过按下“配置文件”按钮来构建项目之后，问题就出现了。之后，我的项目无法再编译。

错误信息是：

```
在 /Users/wangyj1203/workspace/project_x/svn/src/c++/src/latte/latte_prefix.h:24 包含的文件中：
在 /Users/wangyj1203/workspace/project_x/svn/src/c++/src/latte/../../../../../../../../../ 中包含的文件中usr/include/c++/4.2.1/iostream:44:
在 /Users/wangyj1203/workspace/project_x/svn/src/c++/src/latte/../../../../../../../../../ 中包含的文件中usr/include/c++/4.2.1/ostream:44:
在 /Users/wangyj1203/workspace/project_x/svn/src/c++/src/latte/../../../../../../../../../ 中包含的文件中usr/include/c++/4.2.1/ios:42:
在 /Users/wangyj1203/workspace/project_x/svn/src/c++/src/latte/../../../../../../../../../ 中包含的文件中usr/include/c++/4.2.1/iosfwd:44：
在 /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk/usr/include/c++/4.2.1/bits/c++locale.h 中包含的文件中： 48:
在 /Users/wangyj1203/workspace/project_x/svn/src/c++/src/latte/../../../../../../../../../ 中包含的文件中usr/include/c++/4.2.1/cstdio:52:
在 /Users/wangyj1203/workspace/project_x/svn/src/c++/src/latte/../../../../../../../../../ 中包含的文件中usr/include/c++/4.2.1/tr1/stdio.h:37：
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk/usr/include/c++/4.2.1/tr1/cstdio:46:14：错误：没有成员命名命名空间“std”中的“snprintf”
  使用 std::snprintf；
        ~~~~~^
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk/usr/include/c++/4.2.1/tr1/cstdio:47:14：错误：没有成员命名命名空间“std”中的“vsnprintf”
  使用 std::vsnprintf；
        ~~~~~^
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk/usr/include/c++/4.2.1/tr1/cstdio:49:14：错误：没有成员命名命名空间“std”中的“vfscanf”
  使用 std::vfscanf；
        ~~~~~^
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk/usr/include/c++/4.2.1/tr1/cstdio:50:14：错误：没有成员命名命名空间“std”中的“vscanf”
  使用 std::vscanf；
        ~~~~~^
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk/usr/include/c++/4.2.1/tr1/cstdio:51:14：错误：没有成员命名命名空间“std”中的“vsscanf”
  使用 std::vsscanf；
        ~~~~~^
在 /Users/wangyj1203/workspace/project_x/svn/src/c++/src/latte/latte_prefix.h:24 包含的文件中：
在 /Users/wangyj1203/workspace/project_x/svn/src/c++/src/latte/../../../../../../../../../ 中包含的文件中usr/include/c++/4.2.1/iostream:44:
在 /Users/wangyj1203/workspace/project_x/svn/src/c++/src/latte/../../../../../../../../../ 中包含的文件中usr/include/c++/4.2.1/ostream:44:
在 /Users/wangyj1203/workspace/project_x/svn/src/c++/src/latte/../../../../../../../../../ 中包含的文件中usr/include/c++/4.2.1/ios:42:
在 /Users/wangyj1203/workspace/project_x/svn/src/c++/src/latte/../../../../../../../../../ 中包含的文件中usr/include/c++/4.2.1/iosfwd:44：
在 /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk/usr/include/c++/4.2.1/bits/c++locale.h 中包含的文件中： 48:
/Users/wangyj1203/workspace/project_x/svn/src/c++/src/latte/../../../../../../../../../usr/include/ c++/4.2.1/cstdio:99:11：错误：全局命名空间中没有名为“FILE”的成员
  使用 ::FILE；
        ~~^
/Users/wangyj1203/workspace/project_x/svn/src/c++/src/latte/../../../../../../../../../usr/include/ c++/4.2.1/cstdio:100:11：错误：全局命名空间中没有名为“fpos_t”的成员
  使用 ::fpos_t;
        ~~^
/Users/wangyj1203/workspace/project_x/svn/src/c++/src/latte/../../../../../../../../../usr/include/ c++/4.2.1/cstdio:102:11：错误：全局命名空间中没有名为“clearerr”的成员
  使用 ::clearerr；
        ~~^

```

编译脚本是：

```
ProcessPCH++ /var/folders/r7/g6yvk_7s2zg0w0tndvr74qwc0000gn/C/com.apple.Xcode.501/SharedPrecompiledHeaders/latte_prefix-calwfgjtbaftrwfxqlbgygvcoqtm/latte_prefix.h.pth latte_prefix.h normal x86_64 c++ com.apple.ccompilers.llvmlang
    cd /Users/wangyj1203/workspace/project_x/svn/src/c++/src/latte
    setenv LANG en_US.US-ASCII
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x c++-header -arch x86_64 -fmessage-length=0 -Wno-trigraphs -fpascal-strings -O0 -Wno-missing -field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-non-virtual-dtor -Wno-overloaded-virtual -Wno-exit-time-destructors -Wformat -Wno-missing-braces -W括号 -Wswitch -Wno -unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wno-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-sign -比较 -Wno-shorten-64-to-32 -Wno-newline-eof -Wc++11-extensions -DNET_DUMP=0 -DDEBUG=1 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX。平台/开发者/SDKs/MacOSX10.7.sdk -fasm-blocks -Wdeprecated-declarations -Winvalid-offsetof -mmacosx-version-min=10。7 -g -Wno-conversion -Wno-sign-conversion -I/Users/wangyj1203/workspace/project_x/svn/src/c++/src/latte/build/latte.build/Debug/latte.build/latte.hmap - I/Users/wangyj1203/workspace/project_x/svn/src/c++/src/latte -I/Users/wangyj1203/workspace/project_x/svn/src/c++/src/latte/../../sdk -I/用户/wangyj1203/workspace/project_x/svn/src/c++/src/latte/build/Debug/include -I/Users/wangyj1203/workspace/project_x/svn/src/c++/src/latte/build/latte.build/ Debug/latte.build/DerivedSources/x86_64 -I/Users/wangyj1203/workspace/project_x/svn/src/c++/src/latte/build/latte.build/Debug/latte.build/DerivedSources -Wall -F/Users/ wangyj1203/workspace/project_x/svn/src/c++/src/latte/build/Debug--serialize-diagnostics /var/folders/r7/g6yvk_7s2zg0w0tndvr74qwc0000gn/C/com.apple.Xcode.501/SharedPrecompiledHeaders/latte_prefix-calwfgjtbaftrwfxqprefixtmgvco/ 。H。dia -c /Users/wangyj1203/workspace/project_x/svn/src/c++/src/latte/latte_prefix.h -o /var/folders/r7/g6yvk_7s2zg0w0tndvr74qwc0000gn/C/com.apple.Xcode.501/SharedPrecompiledHeaders/latte_prefix- calwfgjtbaftrwfxqlbgygvcoqtm/latte_prefix.h.pth -MMD -MT 依赖项 -MF /var/folders/r7/g6yvk_7s2zg0w0tndvr74qwc0000gn/C/com.apple.Xcode.501/SharedPrecompiledHeaders/latte_prefix-calwfgjtbaftrwfxqlbgyhdvcoqm
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T09:40:55.737

`snprintf()`来自`C99`标准。你不应该`std`为它使用命名空间。只需使用全局命名空间。

不要忘记包括`stdio.h`

# java - 数据库高并发写入

> ID：10054412
> 
> 赞同：2
> 
> 时间：2012-04-07T12:17:12.817
> 
> 标签：java, hibernate, concurrency, locking, ejb

在我的网络服务中，我有一个用户表，其中包含名为“HITS”的列，现在作为此用户类/表中的用户使用网络服务，“HITS”计数增加 1。这涉及写入操作，因此出现在乐观/悲观锁中。

面临的问题是高并发场景，其中 100 次点击同时针对同一用户。

当从同一用户的帐户同时使用 Web 服务时，谁能建议我避免因锁定用户行以更新“HITS”而导致延迟的策略？

或者

您还可以建议一种方法来更新一些我可以在每 12 小时后监控的变量，通过总结变量或类似的东西来生成“HITS”值？

我正在使用休眠和 EJB 无状态会话 bean。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T12:34:04.690

只需为每个命中插入一条记录到表中`all_hits`...

然后按某个时间表-从该表中选择，然后插入`hits_summary`表中，然后删除原件。

# java - 在 Android 中使用 FTP 本地被动模式拒绝连接

> ID：10054413
> 
> 赞同：1
> 
> 时间：2012-04-07T12:17:21.413
> 
> 标签：java, android, ftp

我目前正在开发一个必须将自己连接到本地 FTP 服务器的 Android 应用程序（我正在使用 Filezilla 服务器）。我已经下载了 org.commons.apache.net ftp 库。

这是我相对于我的 android 项目的代码：

```
 FTPClient mFTPClient = new FTPClient();

    try {
        mFTPClient = new FTPClient();
        mFTPClient.connect("10.0.2.2", 21);

        if (FTPReply.isPositiveCompletion(mFTPClient.getReplyCode())) {
            mFTPClient.login("lucas", "elie");
            mFTPClient.setFileType(FTP.BINARY_FILE_TYPE);
            mFTPClient.enterLocalPassiveMode();
        }

    } catch (SocketException e) {
        Log.e("TEST", "SocketException: " + e.getStackTrace().toString() + " " + e.getMessage());
    } catch (UnknownHostException e) {
        Log.e("TEST", "UnknownHostException: " + e.getStackTrace().toString() + " " + e.getMessage());
    } catch (IOException e) {
        Log.e("TEST", "IOException: " + e.getStackTrace().toString() + " " + e.getMessage());
    }

    //

    FileOutputStream desFileStream;
    try {
        desFileStream = new FileOutputStream("/mnt/sdcard/sample_0.jpg");
        mFTPClient.retrieveFile("/sample_0.jpg", desFileStream);
        desFileStream.close();
    } catch (FileNotFoundException e) {
        Log.e("TEST", "FileNotFoundException: " + e.getStackTrace().toString() + " " + e.getMessage());
    } catch (IOException e) {
        Log.e("TEST", "IOException: " + e.getStackTrace().toString() + " " + e.getMessage());
    } 
```

连接正常（mFTPClient.connect("10.0.2.2", 21);），我可以在本地服务器界面上看到它，但是当我尝试下载文件时（mFTPClient.retrieveFile("/sample_0\. jpg", desFileStream);)，我在 Logcat 中得到一个 IOException ：

04-07 11:25:26.300: E/TEST(671): IOException: [Ljava.lang.StackTraceElement;@412ca688 无法连接到 /127.0.0.1（端口 2832）：连接失败：ECONNREFUSED（连接被拒绝）

我确切地说我在 Android Manifest XML 文件中添加了这两行：

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission> 
```

使用完全相同的代码，但在经典的 Java 项目而不是 Android 项目中，一切正常（将 10.0.2.2 替换为 127.0.0.1，将“/mnt/sdcard”替换为“C:\”）！

有人可以帮我吗？

编辑：我发现我的错误。如果这可以帮助某人，我只需将 10.0.2.2 替换为我的本地 IP 地址（在我的情况下为 192.168.0.5）

# wcf - WCF 服务自托管

> ID：10054416
> 
> 赞同：0
> 
> 时间：2012-04-07T12:17:39.203
> 
> 标签：wcf

我正在使用自托管创建 WCF 服务。我发现了以下错误，即：

> 目标程序集不包含服务类型。您可能需要调整此程序集的代码访问安全策略。

代码如下：

```
namespace MyJobs
{
   public interface IJobsSvc
   {
       [OperationContract]
       DataSet GetJobs();

       [OperationContract]
       Job GetJobInfo(int JobId);

       [OperationContract]
       List<Job> GetAllJobs();
    }
}

namespace MyJobs
{
    [DataContract]
    public class Job
    {
        [DataMember]
        public int JobId { get; set;}

        [DataMember]
        public string Description{get;set;}

        [DataMember]
        public int MinLevel { get; set; }

        [DataMember]
        public int MaxLevel { get; set; }
    }
}

namespace MyJobs
{
    public class JobsSvc:IJobsSvc
    {
        #region IJobsSvc Members

        public System.Data.DataSet GetJobs()
        {
            string str = @"data source=PERSONAL-659BE4;database=practice;integrated security=true";
            DataSet ds = new DataSet();
            SqlConnection cn = new SqlConnection(str);
            SqlDataAdapter da = new SqlDataAdapter("select * from Job1",cn);
            da.Fill(ds);
            return ds;

        }

        public Job GetJobInfo(int JobId)
        {
            string str = @"data source=PERSONAL-659BE4;database=practice;integrated security=true";
            SqlConnection cn = new SqlConnection(str);
            SqlCommand cmd = new SqlCommand("select * from Job1 where JobId="+JobId,cn);
            cn.Open();
            SqlDataReader dr = cmd.ExecuteReader();
            Job obj = new Job();
            if (dr.Read())
            {
                obj.JobId = JobId;
                obj.Description = dr[1].ToString();
                obj.MinLevel = Convert.ToInt32(dr[2]);
                obj.MaxLevel = Convert.ToInt32(dr[3]);
            }
            else
            {
                obj.JobId = -1;
            }
            return obj;
        }

        public List<Job> GetAllJobs()
        {
            throw new NotImplementedException();
        }

        #endregion
    }
} 
```

app.config 文件是：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>

  <system.web>
    <compilation debug="true" />
  </system.web>
  <!-- When deploying the service library project, the content of the config file must be added to the host's
  app.config file. System.Configuration does not support config files for libraries. -->
  <system.serviceModel>
    <services>
      <service name="MyJobs.Job">
        <endpoint address="" binding="wsHttpBinding" contract="MyJobs.IJobsSvc">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8732/Design_Time_Addresses/Jobs/MyJobs/" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information,
          set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="True"/>
          <!-- To receive exception details in faults for debugging purposes,
          set the value below to true.  Set to false before deployment
          to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="False" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>

</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T12:22:44.123

您需要在界面中添加`[ServiceContract]`属性`IJobSvc`

**更新**

创建行为以公开元数据。

```
 <serviceBehaviors>
    <behavior name="SimpleServiceBehavior">
      <!-- To avoid disclosing metadata information, 
      set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpGetEnabled="True"/>
      <!-- To receive exception details in faults for debugging purposes, 
      set the value below to true.  Set to false before deployment 
      to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="False" />
    </behavior>
  </serviceBehaviors> 
```

然后使用以下行为配置您的服务：

```
 <service name="MyJobs.Job" behaviorConfiguration="SimpleServiceBehavior">
  <endpoint address="" binding="wsHttpBinding" contract="MyJobs.IJobsSvc"> 
```

# solr - Solr中的面数？

> ID：10054417
> 
> 赞同：3
> 
> 时间：2012-04-07T12:17:47.940
> 
> 标签：solr, facet

有没有办法计算 solr 中不同方面的数量？

这是一个示例方面：

*   相机：20
*   电脑：80
*   显示器：40
*   笔记本电脑：120
*   平板电脑：30

我需要在这里得到“5”，就像 5 种不同的电子产品一样。当然，我可以计算方面，但其中一些内部有很多项目，并且获取和计算它们确实会减慢速度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T05:08:38.383

您需要应用 Solr Patch [SOLR-2242](https://issues.apache.org/jira/browse/SOLR-2242)来获取 Facet 不同计数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-07T16:41:08.607

在 SOLR 5.1 中将是一个带有函数“unique(state)”的“JSON Facet API”。 [http://yonik.com/solr-facet-functions/](http://yonik.com/solr-facet-functions/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-21T19:27:57.627

不是这个问题的确切答案，但如果 facet distinct count 对任何人都不起作用，您可以使用以下方法获取该信息`group.ngroups`：

```
group = true
group.field = [field you are faceting on]
group.ngroups = true 
```

这种方法的缺点是，如果您想要未分组的结果，则必须再次运行查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-18T17:14:55.657

当然，建议使用补丁，但是对于一个简单的刻面执行此操作的俗气方法，就像你在这里一样，只是使用刻面的长度除以 2。例如，因为你正在刻面`type`：

`facetCount = facet_counts.facet_fields.type.length/2`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-10T14:01:38.270

使用这个 GET 请求：

```
http://localhost:8983/solr/core_name/select?json.facet={x:"unique(electronic_items)"}&q=*:*&rows=0 
```

# c++ - 处理自己的类型的模板类特化

> ID：10054425
> 
> 赞同：3
> 
> 时间：2012-04-07T12:19:27.400
> 
> 标签：c++, template-specialization

我一直在玩模板来感受它们，我想对自己的类型进行类专业化。我在互联网上搜索了一段时间，但我发现没有提到这一点。

例如，如果我有一个`class Array`：

```
template<class T>
class Array{
 ...
 void print();
} 
```

`print()`何时可以专门化方法`T=Array<unspecified type>`？

```
template<class T>
void Array<Array<T>>::print(){
    //do something diffrent for array of array
    //this code wont work
} 
```

我设法做到了

```
template<>
void Array<Array<int>>::print(){
    //print in matrix format
    //this code works
} 
```

我不认为这个功能非常有用，但我还是很好奇

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T13:15:42.333

AFAIK，您只能为整个班级进行专业化。一旦我需要这样的东西（实际上，我只需要两个`typedef`s 不同），所以我创建了一个辅助类，它只包含必须专门化的成员，并使主体类继承自它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T13:59:33.480

有一个称为部分专业化的功能，您可以在其中应用类似的东西。但是，我不相信您可以部分专门化成员函数而不部分专门化整个类。

# sqlite - SQLite 在 Xbox 360 上工作？

> ID：10054429
> 
> 赞同：0
> 
> 时间：2012-04-07T12:20:19.093
> 
> 标签：sqlite, xna, xbox360

我在 MSDN 论坛上发现了由 Kevin Gadd 开始的 Xbox 360 的 SQLite 实现，但他们是他使用的谷歌 C#-SQLite 实现 DLL。我只是想知道 API 是如何工作的，因为他们在此处将其移植到 c# 的原始网站：[http](http://code.google.com/p/csharp-sqlite/) ://code.google.com/p/csharp-sqlite/没有列出他们如何更改 API，但它确实说大多数基本命令或至少来自我得到的一些评论/描述。

上面的 DLL 确实可以在 Xbox 360 XNA 上运行，因为我试过了。我的主要目标是更容易看到我的目标是：

1.  在 Xbox 360 上创建一个简单的数据库，其中包含 2-3 个表作为测试（可能在 Windows 上，然后将数据库放在内容部分，以便它与游戏的其余部分一起部署到 Xbox 360）。
2.  在测试场景中将数据发送到这些表可能使用插入或更新，但我不知道.NET 中的 MySQL 和 MS-SQL 等 SQLite 命令。
3.  做垃圾收集

如果你完全可以忽略其他所有事情，只做上面的 3 件事，但如果我能做到 #1 + #2（基本 SQLite 技能），我会找到其他人来帮助我完成 #3，因为使用将是大部分的战斗和然后我可以找人帮我做剩下的事情。

我担心学习如何在 c# 中使用 SQLite，有人可以告诉我在代码中编程时 SQl Server 和 SQLite 之间的区别吗？我应该担心的限制是我唯一的大问题。编辑： jsut 希望做 1 + 2 和休息我不在乎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:24:57.530

我不确定 Xbox 360 是否真的支持 SQLite。我认为您甚至不应该在 Windows 以外的任何东西上将 SQL 用于 XNA 游戏项目。他们为此提供了内置的内存管理和 XML 解析器。

至于如何附加到 SQLite 数据库，您需要将您的 SQLite DLL 包含到您的项目引用中。

之后，将以下内容添加到您的 using 语句中。

```
using System.Data;
using System.Data.SQLite;
using System.IO; 
```

要链接到您的数据库并查询数据/发出 SQL 命令，请使用以下命令。

```
SQLiteConnection sqlCon = new SQLiteConnection("Data Source=<pathtodbfile>;Version=3;New=True;Compress=False;");

sqlCon.Open();
SQLiteCommand cmd = sqlCon.CreateCommand();

SQLiteDataAdapter db = new SQLiteDataAdapter("<your SQL Query Here>", sqlCon);

DataSet ds = new DataSet();
ds.Reset();

db.Fill(ds); 
```

然后您可以访问它加载的数据。

`ds.Tables[0];` <-- 你的数据集可以存储很多表，但是对于一个查询，它会为你加载一个包含查询数据的表到第一个索引中。这就是我做 a 的`ds.Reset()`原因，因为您可能决定在某处重用数据集。

这将适用于 Windows 中的 C#。如果您正确完成了所有引用和 using 语句，那么这也应该适用于 XNA 项目。

正如我之前所说，我不确定这是否适用于 Xbox 360 机器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T19:02:39.830

您的最大问题是您无法写入 Xbox 上的应用程序安装文件夹。您必须使用保存系统。您可以在创建时将您的 sqlite db 文件复制到新的保存中。

我会避免长时间保持连接打开，而只是使用它来序列化/反序列化数据。只需使用普通的 xml 序列化，您可能就不会那么头疼了，请参阅[http://msdn.microsoft.com/en-us/library/system.xml.serialization.aspx](http://msdn.microsoft.com/en-us/library/system.xml.serialization.aspx)实际上做您想做的事情更简单.

自定义二进制格式应该更小，但这更复杂。查看内容序列化程序如何用于 xml => xnb 序列化。

# python - 在 Django 1.4 中将模板放在哪里？

> ID：10054439
> 
> 赞同：4
> 
> 时间：2012-04-07T12:22:13.810
> 
> 标签：python, django, frameworks

我有点困惑，因为当我使用通用 ListView 类时，Django 正在“appname/templates”文件夹中寻找“appname/objectname_list.html”。这导致：

```
appname/templates/appname/objectname_list.html 
```

如果我提供“template_name”，则不再需要模板文件夹中的子文件夹。

为什么它没有像以前在 1.3 中那样在“模板”文件夹中找到 objectname_list.html ？我是否配置了错误，或者他们是否也更改了我应该放置模板的位置？在 1.3 中，我曾经将模板 html 文件直接放在“appname/templates”中，而不是使用子文件夹。

对我来说，使用另一个带有应用程序名称的子文件夹没有意义，模板文件夹已经在其中。或者我错过了一些有用的东西？

我在发行说明中找不到任何关于它的信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T12:47:53.153

我不认为这是 1.4 特定的。如果您希望您的模板位于子文件夹中，请指定`template_name = 'subfolde/template.html'`

关于模板目录，来自[文档](https://docs.djangoproject.com/en/dev/ref/templates/api/#loader-types)：

> ... 对于 INSTALLED_APPS 中的每个应用程序，加载程序会查找模板子目录。如果该目录存在，Django 会在其中查找模板。

所以实际的目录是：

```
projectname/appname/templates/appname/objectname_list.html
            ^^^               ^^^ 
```

这可以帮助您将所有内容保存在 app 文件夹中，并且不需要您进行任何配置，

这也意味着，如果您有应用程序`foo`，`bar`并且`baz`，您仍然可以`templates`在其中一个应用程序下拥有一个目录：

```
myproj/foo/templates/foo/...
myproj/foo/templates/bar/...
myproj/foo/templates/baz/... 
```

# matlab - 将输出保存到文本文件而不覆盖和打印矩阵中的 N 个条目 [matlab]

> ID：10054443
> 
> 赞同：2
> 
> 时间：2012-04-07T12:22:27.173
> 
> 标签：matlab, save

我想将我的函数结果保存在一个文本文件中。这可以在malab中使用以下方式完成：

1.  使用 Printf

    ```
     fileID = fopen('testdata.txt', 'w');
          fprintf(fileID, '%d %d %d\n', v);
          fclose(fileID); 
    ```

2.  使用保存

    ```
     save('testdata.txt', 'v', '-ascii'); 
    ```

但问题是使用两种方法，如果重复该功能，文件将被**覆盖**如何解决？**我需要 10 次运行的所有输出**。

下面是一些例子： A% USING PRINTF v = [3 6 9];

```
 >> fileID = fopen('testdata.txt', 'w');
       fprintf(fileID, '%d %d %d\n', v);
       fclose(fileID); 
```

文件输出（第 1 行）：3 6 9

```
 >> v= [1 2 3];
       >> fileID = fopen('testdata.txt', 'w');
          fprintf(fileID, '%d %d %d\n', v);
          fclose(fileID); 
```

文件的输出（第 1 行）：1 2 3（文件被覆盖）

B %使用保存

```
 >> save('testdata.txt', 'v', '-ascii'); 
```

文件输出（第 1 行）：1.0000000e+000 2.0000000e+000 3.0000000e+000

```
 >> v = [3 6 9];
       >> save('testdata.txt', 'v', '-ascii'); 
```

文件输出（第 1 行）： 3.0000000e+000 6.0000000e+000 9.0000000e+000

* * *

```
 **Printing N values** 
```

上例中的 V 是 3 个条目：如果存在 N 个条目，肯定有办法显示它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T12:48:49.597

打开文件时，使用

```
fileID = fopen('testdata.txt', 'a'); 
```

用“a”代替“w”。这将附加到该文件。请参阅：[fopen](http://www.mathworks.co.uk/help/techdoc/ref/fopen.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T11:31:09.820

这是代码：

```
 for i= 1:4;
                fileID = fopen('testdata.txt', 'at');
                fprintf(fileID, 'this is answer %d\n',i);
                fprintf(fileID, '%5.3e\n', v{i});
                fclose(fileID);
                end 
```

在记事本中回答：

```
 this is answer 1
       1.000e+000
       1.000e+000
       1.000e+000
       1.000e+000
       1.000e+000
       1.000e+000
       0.000e+000
       1.000e+000
       1.000e+000
       1.000e+000
       this is answer 2
       1.000e+000
       0.000e+000
       1.000e+000
       1.000e+000
       1.000e+000
       1.000e+000
       1.000e+000
       1.000e+000
       1.000e+000
       1.000e+000
       this is answer 3
       1.000e+000
       1.000e+000
       1.000e+000
       1.000e+000
       1.000e+000
       1.000e+000
       1.000e+000
       0.000e+000
       1.000e+000
       1.000e+000
       this is answer 4
       1.000e+000
       1.000e+000
       1.000e+000
       1.000e+000
       0.000e+000
       1.000e+000
       1.000e+000
       1.000e+000
       1.000e+000
       1.000e+000 
```

# version-control - Emacs dired 和 bazaar

> ID：10054444
> 
> 赞同：1
> 
> 时间：2012-04-07T12:22:28.173
> 
> 标签：version-control, emacs, bazaar, dired

我开始使用 Emacs dired 模式将 bazaar 存储库中的一些文件移动到存储库中的新文件夹中。然后我跑去`bzr add`bazaar 找到这些“新”文件，然后意识到在提交时，bazaar 会认为原始文件丢失并将移动的文件作为新文件提交（？）。Emacs 中是否有一种方法可以使 dired VCS 感知，以便它执行`bzr mv`而不是执行`mv`？

类似的问题[在这里](https://stackoverflow.com/questions/1233344/emacs-dired-rename-with-alternative-tool)。

**解决方案：**我在存储库中创建了新文件夹，然后运行`bzr add`以使 bzr 知道该文件夹。`mv`然后，我使用(not )将文件从存储库的根目录移动到新文件夹中`bzr mv`，然后运行`bzr mv --auto`以检测移动。bzr 表明它已经检测到每个文件的移动，而不是删除原始文件并将文件添加到新位置。然后我通过将文件从 Emacs dired 模式中移动到文件夹中并运行来进一步测试`bzr mv --auto`，bzr 再次正确检测到移动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T12:50:38.093

不是您关于 dired 问题的答案，但请注意，`M-x vc-rename-file`应该为您使用的任何 VCS 执行适当的命令。

# android - 火炬应用 Android 4.0.4 Nexus S i9020 出错

> ID：10054445
> 
> 赞同：0
> 
> 时间：2012-04-07T12:22:31.580
> 
> 标签：android, nexus-s, flashlight

我的手电筒应用程序 Android 4.0.4 Nexus S i9020 有问题。我已经尝试过在 stackoverflow 上发布的数十条建议，但对我没有任何帮助。该应用程序适用于 Android 版本 2.3.6，但自 4.0.4 以来，火炬已停止工作。

这是我的 impl 和 logcat 输出。

```
@Override
protected void onResume()
{
    super.onResume();
    _Camera = Camera.open();
}

@Override
protected void onPause()
{
    if (_Camera != null)
    {
         _Camera.release();
    }
}

//called within runnable and post to a handler
private void processOffClick()
{

    if (_Camera != null)
    {
        Parameters params = _Camera.getParameters();
        params.setFlashMode(Parameters.FLASH_MODE_OFF);
        _Camera.setParameters(params);
        _Camera.stopPreview();
    }
}

//called within runnable and post to a handler
private void processOnClick()
{
    if (_Camera != null)
    {
        Parameters params = _Camera.getParameters();
        params.setFlashMode(Parameters.FLASH_MODE_TORCH);
        _Camera.setParameters(params);
        _Camera.startPreview();
    }
} 
```

我还尝试在没有可运行文件的情况下执行 onclick offclick 方法。

在 Logcat 中，执行 onclick 后会发生以下错误。

```
 04-07 14:10:02.719: E/CameraHardwareSec(82): preview window is NULL!
 04-07 14:10:02.719: I/CameraHardwareSec(82): virtual android::status_t android::CameraHardwareSec::startPreview() : deferring 
```

市场上有一些适用于我的手机的相机应用程序。因此，必须有某种方法可以打开手电筒。

我也尝试添加一个 SurfaceView/Holder，但它不起作用。也许我做错了什么。

干杯卡里姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T11:35:09.957

你做的一切都很好，在 4.0+ 版本中你需要一个表面视图。在你的 layout.xml 中声明一个

然后做这样的事情：

实现 SurfaceHolder.Callback

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //init your layout
        this._surfaceView = (SurfaceView) this.findViewById(R.id.surfaceView);
        this._surfaceHolder = this._surfaceView.getHolder();
        this._surfaceHolder.addCallback(this);
        this._surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

}

@Override
protected void onResume()
{
    super.onResume();
    _Camera = Camera.open();
    this._camera.startPreview();
    this._camera.setPreviewDisplay(this._surfaceHolder);
}

@Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        // TODO Auto-generated method stub

    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        //this._surfaceHolder = holder;
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        //this._surfaceHolder = null;
    } 
```

# javascript - 寻找允许放大、标记和使用位图图像（不是 SVG）的交互式 javascript 地图解决方案）

> ID：10054447
> 
> 赞同：0
> 
> 时间：2012-04-07T12:22:44.153
> 
> 标签：javascript, jquery, jquery-plugins, maps

这是一个不错的，但它不允许放大。

[移动地图](http://plugindetector.com/mobilymap)

我想知道是否有人为此插件实现了缩放？

最终，如果有一个指南告诉我如何只获取一个 300DPI 左右的地图 PNG 文件，然后以 30% 的大小显示它，当点击图像上的任何点时，它会放大该区域@ 100% 显示一些可以单击以启动事件等的标记会很棒。

很想使用 SVG 或 Canvas，但显然 IE8 不支持它，所以那是不行的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T20:44:56.077

假设你想免费：

*   例如，您可以使用 MapCruncher 从大图像中创建一堆图块，并在 Bing 地图中使用它们。我创建了一篇博客文章，展示了该过程：

    [http://build-failed.blogspot.pt/2012/03/custom-map-tiles-part-1.html](http://build-failed.blogspot.pt/2012/03/custom-map-tiles-part-1.html)

*   另一种选择是将 Zoomify 与 OpenLayers 一起使用。在此处查看演示：

    [http://openlayers.org/dev/examples/zoomify.html](http://openlayers.org/dev/examples/zoomify.html)

*   更硬核的是使用 GDAL2Tiles。这是一个将图像转换为图块的 python 脚本。然后，您可以将该层与大多数地图 api 一起使用。

    [http://www.gdal.org/gdal2tiles.html](http://www.gdal.org/gdal2tiles.html)

注意：要提到的适用于每个备选方案的重要一点是，您不必将图像覆盖在现有地图的顶部。您可以只显示带有图像的基础层。

# c# - c# 避免变量声明

> ID：10054454
> 
> 赞同：12
> 
> 时间：2012-04-07T12:23:25.540
> 
> 标签：c#

假设我有一些这样的代码：

```
public string SomeMethod(int Parameter)
{
  string TheString = "";

  TheString = SomeOtherMethod(Parameter);

  return TheString;
} 
```

当然，这段代码等价于：

```
public string SomeMethod(int Parameter)
{
  return SomeOtherMethod(Parameter);
} 
```

我认为第一个版本更具可读性，这就是我编写代码的方式，即使我知道我可以避免使用变量时也是如此。我的问题是：编译器是否以相同的方式编译代码（即相同的性能）或者第二个选项在性能方面真的更好。

谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-07T12:25:09.723

我会说第一种形式可读性*较差**，*它包含一个冗余的初始化程序。如果要给它一个不同的值，为什么要将变量初始化为“”？至少将其更改为：

```
public string SomeMethod(int parameter)
{
  string returnValue = SomeOtherMethod(parameter);    
  return returnValue;
} 
```

或者如果您*真的*想将声明与初始化分开：

```
public string SomeMethod(int parameter)
{
  string returnValue;
  returnValue = SomeOtherMethod(parameter);    
  return returnValue;
} 
```

（请注意，我还调整了命名以遵循 .NET 命名约定并为局部变量提供更有意义的名称——“TheString”没有传达有用的含义。）

使用局部变量你真的不会看到任何性能问题，但我真的鼓励你考虑可读性。这里局部变量的*目的是什么？*您可能会将该方法描述为：“返回`SomeOtherMethod`使用给定参数调用的结果”-此时，单行版本*完全*实现了该描述。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-07T12:24:39.177

编译器将为您的两个示例生成非常相似的代码。不过，一项细微的修改是避免初始化为您从不使用的空字符串。

```
public string SomeMethod(int Parameter)
{
    string result;
    result = SomeOtherMethod(Parameter);
    return result;
} 
```

我不确定以这种方式重写代码是否使其更具可读性，但这确实意味着您可以添加断点并`result`在方法返回之前查看 的值。这在调试时很有用。

请注意，您可以将第一行和第二行结合起来，仍然可以获得以下好处：

```
public string SomeMethod(int Parameter)
{
    string result = SomeOtherMethod(Parameter);
    return result;
} 
```

我认为最后一个版本具有高度可读性且易于调试。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-08T06:05:22.963

答案已经发布，但让我尝试一下：

您正在寻找 3 件事：

可读性、性能、实用性（例如调试、日志记录等）

1.**可读性**是相对的。Eric Lippert / Jon Skeet 发现什么更具可读性，同样的事情不适用于我。您编写的代码越来越多，许多事情和您的观点将转向查看代码。

你给的两个选择都是可读的，对我来说第二个更具可读性。

2.**性能**：在第一个选择中，你可能知道字符串的不变性，如果你重新初始化一个字符串，它不会清除早期的名称（**实习**），它会创建新的字符串，变量会将它指向它。

因此，从性能角度来看，将变量初始化为新值（不必要地）将导致性能瓶颈。同样，这是相对的，取决于应用程序的大小/复杂性。为此，您需要选择第二个选项。您的第二个选项和乔恩的回答将导致相同的性能。

3.**调试视角**：如果你正在寻找这些东西，你会想要有局部变量。

# android - Android：如何在 android App 中应用 .psd（Photoshop 模板）

> ID：10054456
> 
> 赞同：2
> 
> 时间：2012-04-07T12:23:35.103
> 
> 标签：android, templates, user-interface, photoshop, psd

当我搜索 Android 模板时，我得到了很多 URL，例如：

`Free Android GUI PSD`[http://ntt.cc/2010/08/03/6-free-android-gui-psd-templates-for-designers.html](http://ntt.cc/2010/08/03/6-free-android-gui-psd-templates-for-designers.html)
`Stencils Template`[http://graffletopia.com/stencils/498](http://graffletopia.com/stencils/498)

在很多链接上，我找到了 .psd 文件（Layer Photoshop），但如何将这些文件用于 Android 开发。

我没有改进我的 Android 应用程序的 GUI 外观和感觉的想法。

如果有人可以提供示例代码..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:03:17.623

如果你不能切片，那么你应该雇一个会为你切片的人，你就可以使用这个设计。

# xslt - XSL。根据数据文本中指定的格式显示文本

> ID：10054458
> 
> 赞同：0
> 
> 时间：2012-04-07T12:23:49.003
> 
> 标签：xslt

对不起我的英语不好。

我写了 XML 示例：

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="./test.xslt"?>
<document>
  <paragraph id="p1">
    I like &lt;i&gt;the flowers&lt;/i&gt;!!!
  </paragraph>
  <paragraph id="p2">
    <![CDATA[I like <i>the people</i>!!!]]>
  </paragraph>
</document> 
```

我为它编写了 XSL 示例：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html"/>
  <xsl:template match="/">
    <html>
      <body>
        <p>
          <xsl:value-of select="/document/paragraph[@id='p1']"/>
          <br/>
          <xsl:value-of select="/document/paragraph[@id='p2']"/>
        </p>
      </body>
    </html>
  </xsl:template>
</xsl:stylesheet> 
```

我在文本值（<i>一些文本</i>）中指定了格式。但格式化不会发生。我在浏览器中得到下一个结果：

```
I like <i>the flowers</i>!!! 
I like <i>the people</i>!!! 
```

如何强制应用指定的格式？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T15:49:50.943

这是一个经常被问到的问题。

**被破坏的标记（例如序列化为转义字符串表示）被浏览器显示为文本**——这正是转义字符应该被解释的方式）。

为了实现所需的格式，不要破坏标记。

代替：

```
I like &lt;i&gt;the flowers&lt;/i&gt;!!! 
```

利用：

```
I like <i>the flowers<i>!!! 
```

另外，更换：

```
 <xsl:value-of select="/document/paragraph[@id='p1']"/> 
```

和：

```
<xsl:copy-of select="/document/paragraph[@id='p1']/node()"/> 
```

**总结一下：**

**使用此 XML 文档**：

```
<document>
    <paragraph id="p1">
      I like <i>the flowers</i>!!!
  </paragraph>
    <paragraph id="p2">I like <i>the people</i>!!!</paragraph>
</document> 
```

**并将转换更改为**：

```
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
      <xsl:output method="html"/>
      <xsl:template match="/">
        <html>
          <body>
            <p>
              <xsl:copy-of select="/document/paragraph[@id='p1']/node()"/>
              <br/>
              <xsl:copy-of select="/document/paragraph[@id='p2']/node()"/>
            </p>
          </body>
        </html>
      </xsl:template>
</xsl:stylesheet> 
```

**这会产生想要的正确结果**：

```
<html>
   <body>
      <p>
              I like <i>the flowers</i>!!!
           <br>I like <i>the people</i>!!!
      </p>
   </body>
</html> 
```

**它在浏览器中显示如下**：

我喜欢*花*！！！
我喜欢*人*！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T08:29:05.737

我很难理解上面评论中的讨论，因为我对英语的理解很差，而且我对 XSL 的理解仍然很弱。对我来说，使用 ''disable-output-escaping="yes"'' 的选项似乎简单方便。'xsl:copy-of' 的选项对我来说也很有趣，我对此表示感谢。

# c++ - C++ 数组 [从：到]

> ID：10054461
> 
> 赞同：1
> 
> 时间：2012-04-07T12:24:13.233
> 
> 标签：c++, arrays, array-splice

我怎么能在 C++ 中做到这一点？在 python 中是

```
example = [u'one', u'two', u'three', u'four']
print example[1:3] 
```

我怎么能在 C++ 中做到这一点（我缺少这个函数）我需要将它重写为 C++

```
while i<len(a)-1:
                if (a[i]=='\x00' or a[i]=='\x04') and (eval("0x"+(a[i-1].encode("hex"))) in range(32-(4*eval((a[i].encode("hex")))),128-(12*eval((a[i].encode("hex")))))):
                    st+=a[i-1:i+1]
                    i+=2;continue
                elif st=='':
                    i+=1;continue
                elif len(st)>=4 and (a[i-1:i+1]=='\x00\x00' or a[i-1:i+1]=='\x0a\x00' or a[i-1:i+1]=='\x09\x00' or a[i-1:i+1]=='\x0d\x00'):
                    s.STRINGS.append([st.decode("utf-16le"),0xffffff])
                    s.INDEX.append(iCodeOffset+i-1-len(st))
                    st=''
                    i=i-1;continue
                else:
                    st=''
                    i=i-1;continue 
```

我需要二进制文件中的字符串列表而不使用 string.exe

THX for Advance Benecore

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T15:25:35.527

首先，在 C++ 中没有直接的替代品，因为 C++ 不是 python，并且有自己的习惯用法，它们的工作方式不同。

首先，对于字符串，您可以使用特定的[`std::string::substr`](http://en.cppreference.com/w/cpp/string/basic_string/substr).

对于更通用的容器，您应该知道 C++ 通常在对所述容器的元素进行操作时基于迭代器工作。例如，假设您想比较向量中的元素，您将执行以下操作：

```
#include <iostream>
#include <algorithm>
#include <vector>

int main()
{
    std::vector<int> a = {1,2,3,4};
    std::vector<int> b = {1,2,10,4};
    std::cout << "Whole vectors equal? " << (std::equal(a.begin(), a.end(), b.begin())?"yes":"no") << std::endl;
} 
```

现在，假设我们只想比较前两个值（如`[:2]`），那么我们会将最后一条语句重写为如下所示：

```
std::cout << "First 2 values equal? " << (std::equal(a.begin(), a.begin()+2, b.begin())?"yes":"no") << std::endl; 
```

假设我们想比较最后两个值，我们会这样做：

```
std::cout << "Last 2 values equal? " << (std::equal(a.end()-2, a.end(), b.begin())?"yes":"no") << std::endl; 
```

看到出现的模式了吗？`x.begin()+i,x.begin()+j`大致等于`[i:j]`，`x.end()-i,x.end()-j)`大致等于`[-i,-j]`。请注意，您当然可以混合使用这些。

因此，通常在处理容器时，您将使用一系列迭代器，并且这个迭代器范围可以非常类似于 python 的列表拼接来指定。它更冗长，它是另一个习惯用法（拼接列表又是列表，但迭代器不是容器），但你会得到相同的结果。

一些最后的笔记：

*   我写`x.begin()`是为了让代码更清晰一点，你也可以写`std::begin(x)`，它更通用，也适用于数组。这同样适用于`std::end`
*   在为迭代器编写自己的 for 循环之前，请查看[算法库。](http://en.cppreference.com/w/cpp/algorithm)
*   是的，您可以编写自己的 for 循环（类似于`for(auto it = a.begin(); it != a.end(); it++)`，但通常将函数或 lambda 传递给[`std::foreach`](http://en.cppreference.com/w/cpp/algorithm/for_each)
*   真正记住 C++ 不是 python，反之亦然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T13:17:22.473

这是一个函数，它返回一个新的拼接向量，然后是旧的。它只做最基本的拼接（从：到），并且只在一个方向上（不确定从是否大于到，但我相信python会反转输出）。

```
template<typename T>
std::vector<T> splice(const std::vector<T> in, int from, int to)
{
    if (to < from) std::swap(to, from);

    std::vector<T> ret(to - from + 1);

    for (to -= from; to + 1; to--)
    {
        ret[to] = in[from + to];
    }

    return ret;
} 
```

# android - Android GtalkService 端口 5228 被阻止但 Market 工作

> ID：10054464
> 
> 赞同：0
> 
> 时间：2012-04-07T12:24:33.373
> 
> 标签：android, iptables, google-talk

我用 iptables 输出目标端口 5228 阻止了，这似乎是从 GTalkService 使用的。我只想阻止它们并且它有效。我看到 GTalk 服务监视器，连接状态为假。这样 Gtalk Talk 服务就被封锁了市场，其他谷歌的东西一定不能工作。但它有效！我可以从 Market 下载应用程序。这对我来说很奇怪。我阅读了有关 GTalkService 的各种页面，在所有这些页面中，如果 GtalkService 被阻止，市场也无法正常工作。我用以下方法阻止了它：

`iptables -A OUTPUT -p tcp --sport 443 -j ACCEPT`

有人可以帮助我，并解释为什么 Google Market 有效吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:51:36.513

如果要阻止到端口 443 的传出连接，请将 ACCEPT 更改为 REJECT

# iphone - CoreData 一对一关系

> ID：10054468
> 
> 赞同：1
> 
> 时间：2012-04-07T12:24:48.520
> 
> 标签：iphone, objective-c, core-data

在我的应用程序中，我使用 CoreData，我有两个实体。地点信息和联系信息。

在app中可以添加场地，每个场地都有ContactInfo。所以我在我的模型中建立了一对一的关系。

所以我想，我可以简单地执行以下操作：

`[venue.contact setValue:textField.text forKey:email];`

因此，您需要设置属于该场所的联系人对象的电子邮件属性。但是，这不起作用。

是否有可能是因为联系人对象还不存在？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T12:37:12.627

你写的那行不会那样工作。我假设联系人是您在 xCodeModel 中的 Venue 实体中的关系名称。

```
 [venue.contact setValue:textField.text forKey:email]; // can't write this way.. 
```

假设您的`ContactInfo`实体有两个字段 : `phone`，`email`那么您可以这样走。`VenueInfo` 实体有两个字段 ： `name`。

```
 VenueInfo *venueInfo=[NSEntityDescription   insertNewObjectForEntityForName:@"VenueInfo" inManagedObjectContext:self.managedObjectContext];
  vanueInfo.name=txtVenueName.text;           // venue name entry

  ContactInfo *contactInfo=[NSEntityDescription   insertNewObjectForEntityForName:@"ContactInfo" inManagedObjectContext:self.managedObjectContext];

  contactInfo.phone=txtPhone.text;
  contactInfo.email=txtEmail.text;
  contactInfo.venue=venueInfo;  // I assume venue is the relationship name you give in ContactInfo entity towards Venue entity. 
```

我们在这里所做的只是将电话和电子邮件详细信息保存到`ContactInfo`实体，然后我们只是将其与当前选择`VenueInfo`的访问我们在`ContactInfo`Entity 中声明的关系相关联`VenueInfo`。

这可能很令人困惑，因此我建议您遵循一些教程，这些教程将使您了解一些有关核心数据关系的基础知识。

# c - 管子和叉子的问题

> ID：10054473
> 
> 赞同：1
> 
> 时间：2012-04-07T12:25:44.807
> 
> 标签：c, fork, pipe, execvp

我正在制作一个搜索文件并将其结果发送到其他命令（如管道）的程序。ls | 排序当我运行程序时没有任何反应。我认为的问题是孩子等待父母停止在 SO 缓冲区中写入以开始阅读。这是它发送到标准输出的内容，也是管道应该发送给其他命令的内容。

```
 troneras@troneras-VirtualBox:~/Escritorio/busca.2012$ ./busca . -n . -print
    ./permisos.txt
    ./busca2.c
    ./mmap.pdf
    ./busca3.c~
    ./cuadernoso4.2011b.pdf
    ./busca.c~
    ./busca.c
    ./busca2.c~
    ./busca3.c 
```

我不明白问题是什么。

* * *

```
 if(!strcmp(argv[4],"-pipe"))
 {
int pipefd[2];
int pid,dummi;

if (pipe(pipefd)<0){
   perror("pipe");
   exit(1);
}

pid = fork();

if (pid<0){
   perror("fork");
   exit(1); 
}
if (pid == 0){//Child process    
   close(pipefd[1]);//The child is only reading from the pipe
   if(dup2(pipefd[0],0)!=0){perror("dup2");exit(1);}
   close(pipefd[0]);

       char *argumentos[argc-4];
   int j;
   for (j=5;j<argc;j++){
      argumentos[j-5]=argv[j];   
   }         
   argumentos[j-5]= NULL;    

   execvp(argv[5],argumentos);
   perror("execve: ");

}else{ //parent        
   close(pipefd[0]);
   if(dup2(pipefd[1],1)!=1){perror("dup2");exit(1);}
   close(pipefd[1]);

   while(count--){
      if(strcmp(files[count]->d_name,".") && strcmp(files[count]->d_name,"..")){               
         printf("%s/%s\n",argv[1],files[count]->d_name);                       
      free(files[count]);
   }

       wait(&dummi);
}

 }//end pipe                 
 free(files); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T13:57:57.447

顺便说一句，没有理由复制 argv[] 数组。代替

```
 char *argumentos[argc-4];
   int j;
   for (j=5;j<argc;j++){
      argumentos[j-5]=argv[j];   
   }         
   argumentos[j-5]= NULL;    

   execvp(argv[5],argumentos); 
```

你也可以这样做

```
 execvp(argv[5],argv+5); 
```

# android - flash 不能在 android 2.2 中播放，也不能运行 flash 文件？

> ID：10054478
> 
> 赞同：1
> 
> 时间：2012-04-07T12:26:23.573
> 
> 标签：android, flash, adobe

您好，我想在我的 Android 设备上播放 sd 卡中的 flash 文件，因为我安装了 flash 播放器，当我运行我的程序时，iit 显示空白屏幕，但是如果我点击 sd 卡中的烧瓶 .swf 文件而不是它显示该应用程序不可用。请告诉我问题出在哪里，并告诉我应该在设备中安装哪些软件才能在应用程序中运行闪存。我已经在我的 android 设备中安装了 adoble flash player 和 air，但之后我也无法在我的 android 设备中看到 flash，如果我直接单击 flash .swf 文件，它会显示一条 toast 消息，表明应用程序不可用

> ```
> enter code here 
> ```
> 
> 尝试 {
> 
> ```
>  // html file with sample swf video in sdcard
> 
>       //flash.html points to swf in sdcard
> 
>       mWebView = (WebView)findViewById(R.id.webview);
>       mWebView.getSettings().setJavaScriptEnabled(true);
>       mWebView.getSettings().setPluginsEnabled(true);
>       mWebView.getSettings().setAllowFileAccess(true); 
> ```
> 
> if (!Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED)){ System.exit(4); } else { String url ="file://" + Environment.getExternalStorageDirectory() + "/LOST.DIR/"+"p.swf"+"";
> 
> ```
>  mWebView.loadUrl(url);      }
> 
>   }
>   catch (Exception e) {           // TODO: handle exception
>       Toast.makeText(getApplicationContext(), e.toString(), 1).show();        } 
> ```

# matlab - Matlab用白色填充形状

> ID：10054482
> 
> 赞同：5
> 
> 时间：2012-04-07T12:26:56.783
> 
> 标签：matlab, fill

如你所见，我有形状和它们的白色边界。我想用白色填充形状。

输入是： ![在此处输入图像描述](../Images/30a1b0ebc7c01aaa00376fb70f913212.png)

我想得到这个输出： ![http://s12.postimage.org/z3txnlb3f/untitled33.png](../Images/e2474e43e99bb810b3e58faad64b7720.png)

有人可以帮我解决这个代码吗？它不会将黑色椭圆更改为白色。非常感谢 ：]]

```
I = imread('untitled4.bmp');
Ibw = im2bw(I);
CC = bwconncomp(Ibw); %Ibw is my binary image
stats = regionprops(CC,'pixellist');

% pass all over the stats
for i=1:length(stats),
size = length(stats(i).PixelList);
% check only the relevant stats (the black ellipses)
if size >150 && size < 600 
    % fill the black pixel by white    
    x = round(mean(stats(i).PixelList(:,2)));
    y = round(mean(stats(i).PixelList(:,1)));
    Ibw = imfill(Ibw, [x, y]);
end;
end;

imshow(Ibw); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T16:26:39.897

您的代码可以改进和简化如下。首先，求反`Ibw`并使用[BWCONNCOMP](http://www.mathworks.com/help/toolbox/images/ref/bwconncomp.html)查找 4 连通分量将为您提供每个黑色区域的索引。其次，按连接区域中的像素数对连接区域进行排序，然后选择除最大的两个之外的所有区域，将为您提供所有较小圆形区域的索引。最后，可以收集这些较小区域的线性索引并使用白色填充这些区域。这是代码（相当短，不需要任何循环）：

```
I = imread('untitled4.bmp');
Ibw = im2bw(I);

CC = bwconncomp(~Ibw, 4);
[~, sortIndex] = sort(cellfun('prodofsize', CC.PixelIdxList));

Ifilled = Ibw;
Ifilled(vertcat(CC.PixelIdxList{sortIndex(1:end-2)})) = true;
imshow(Ifilled); 
```

这是生成的图像：

![在此处输入图像描述](../Images/5c0a5a510bb97df33b3fa31b61bcb381.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T12:35:41.613

如果您的图像都是黑白的，并且您拥有图像处理工具包，那么这看起来就像您需要的那样：http: [//www.mathworks.co.uk/help/toolbox/images/ref/imfill.html](http://www.mathworks.co.uk/help/toolbox/images/ref/imfill.html)

就像是：

```
imfill(image, [startX, startY]) 
```

其中 startX, startY 是您要填充的区域中的一个像素。

# php - stripslashes 对 SQL 注入的有效性？

> ID：10054484
> 
> 赞同：1
> 
> 时间：2012-04-07T12:27:27.873
> 
> 标签：php, sql, database, sql-injection, stripslashes

> **可能重复：**
> [防御 mysql 注入和跨站点脚本的最佳方法](https://stackoverflow.com/questions/568995/best-way-to-defend-against-mysql-injection-and-cross-site-scripting)
> [如何在 mysql 插入语句中包含 PHP 变量](https://stackoverflow.com/questions/7537377/how-to-include-a-php-variable-inside-a-mysql-insert-statement)

我想知道是否有人在从密码字段获取文本时遇到了[stripslashes](http://php.net/manual/en/function.stripslashes.php)语句，在这种情况下是否有任何方法可以进行 SQL 注入？

即在PHP 语言中，您可以从网站的密码字段中获取文本，并通过stripslashes 语句将其传递以删除任何(')，因此( `' OR 1=1 --`) 变为( `OR 1=1`)。并且使 SQL 注入难以进行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T12:31:09.573

`stripslashes`从数据中删除斜杠 ( `\`)，它们是转义字符，而不是引号 ( `'`)。如果有的话，它的用途将**增加**存在 SQL 注入漏洞的可能性。

要防御 SQL 注入，请[使用准备好的语句和参数化查询](https://stackoverflow.com/a/60496/19068)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T12:33:24.757

stripslashes 不应用于密码。因为它可能会删除用户有意输入的斜杠。根据您使用的 rdbms 防止 sql 注入逃逸。这将确保您输入的字符串与用户输入但已转义的字符串完全相同，因此不会发生 sql 注入。

对于 mysql 使用[mysql_real_escape_string](http://php.net/mysql_real_escape_string)

另一个更好的选择是使用准备好的语句。它在所有最新的 PHP 数据库驱动程序中都可用。通用算法是

1.  准备一份声明。通常通过准备函数
2.  绑定值。通常通过绑定函数。
3.  执行语句。通常是执行函数。

# c# - C#以其他形式登录后如何做方法

> ID：10054485
> 
> 赞同：0
> 
> 时间：2012-04-07T12:27:28.833
> 
> 标签：c#, visual-studio-2010

我有comboBox，用户可以在其中选择sql 数据库视图，例如basicView、fullView 等。其中一个视图是adminView。当用户选择 adminView 时，新表单 (form2) 正在打开，他必须登录。在 form1 中，我有`showDB(string command)`在 dgv 中显示视图的方法。但是在form2中登录后如何执行此方法？任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T12:41:07.840

您应该将 form2 专用于登录过程，如果一切顺利，则返回 DialogResult.OK。

例如在 Form1 中：

```
using(Form2 frm = new Form2())
{
    if(DialogResult.OK != frm.ShowDialog(this))
    {
        // Inform the user or simply exit from this method
    }
}
// Login OK go on to show the info requested 
```

在 Form2 中，您应该有一个 DialogResult 属性设置为 OK 的按钮。
当用户按下此按钮时，请按照您的逻辑检查给定的登录凭据。
如果凭据良好，则不执行任何操作，
否则表单将自行关闭

```
// give a message to the user
this.DialogResult = DialogResult.None; 
```

并且 form2 将保持打开状态，让您的用户重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T12:43:53.717

我会这样做：

```
form2 LoginForm = new form2();
bool LoggedOn = false;
if (LoginForm.ShowDialog() == DialogResult.OK)
{
    LoggedOn = CheckLogin(LoginForm.UserName, LoginForm, Password);
}
LoginForm.Dispose();
if (LoggedOn)
    showDB(command); 
```

或者，如果您想在 form2 中处理登录，请执行以下操作：

```
form2 LoginForm = new form2();
bool LoggedOn = LoginForm.ShowDialog() == DialogResult.OK; 
// login is handled in form2, return DialogResult.OK only if logon succeeded
LoginForm.Dispose();
if (LoggedOn)
    showDB(command); 
```

*编辑*

看起来史蒂夫先搞定了:-)

# javascript - 淘汰赛和数据表

> ID：10054487
> 
> 赞同：4
> 
> 时间：2012-04-07T12:27:46.317
> 
> 标签：javascript, knockout.js, datatables

我正在尝试将 DataTables 与淘汰赛生成的表一起使用。

问题在这里说明：http: [//jsfiddle.net/sQrNu/](http://jsfiddle.net/sQrNu/)

在我的表中，我有一些固定的列标题，以及来自视图模型的一些列标题。这适用于淘汰赛中的标准 HTML 表格。

但是，当 dataTable 小部件应用于表格时，动态列会变成带有文本“[object Object]”的简单列。似乎在应用 dataTables 之后，模板中断了。如果我替换模板：

数据绑定=“文本：$数据”

和：

数据绑定=“文本：JSON.stringify($data)”

然后我突然发现 $data 现在错误地引用了我的根视图模型；“foreach：标题”不再起作用。

这是淘汰赛中的错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T12:48:23.897

添加一个 setTimeout 以让 DOM 在尝试附加数据表之前完成更新。

[http://jsfiddle.net/jearles/sQrNu/1/](http://jsfiddle.net/jearles/sQrNu/1/)

# javascript - 无法在画布中加载图像（在 ie8 中使用 Excanvas）

> ID：10054490
> 
> 赞同：1
> 
> 时间：2012-04-07T12:28:00.857
> 
> 标签：javascript, html, canvas

我使用 excanvas 在 ie8 中使用画布元素，但我无法在画布中加载图像。

我的代码是

```
var el = document.getElementById('cavasid');
G_vmlCanvasManager.initElement(el);
var context = el.getContext('2d');

 var img = new Image();
 img.onload = function() {
 context.drawImage(img, 0,0);
 };
 img.src = "jj.png"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:10:07.713

确保您已在 head 部分添加 excanvas.js，然后尝试以下代码

```
 var el = document.getElementById('cavasid');
 if (typeof G_vmlCanvasManager != 'undefined') {
     el = G_vmlCanvasManager.initElement(el);
 }

 if (el.getContext) {
     var context = el.getContext('2d');

     var img = new Image();
     img.onload = function () {
         context.drawImage(img, 0, 0);
     };
     img.src = "jj.png";
 } 
```

也给你的画布一些宽度和高度，比如

```
<canvas id="cavasid" width="200" height="200"/> 
```

# css - JQuery Mobile - 布局未正确对齐

> ID：10054493
> 
> 赞同：0
> 
> 时间：2012-04-07T12:28:25.633
> 
> 标签：css, jquery-mobile

我正在为一个本地软件开发用户组做一个演示。我正在尝试构建一个 JQuery Mobile 应用程序，它允许我们为下一次会议就不同的食物选项进行投票。选项将被动态加载。因此，我必须动态构建列表。我有实际的投票功能。我的问题是，我无法让布局看起来正确。现在，但按钮看起来像![这](../Images/41c78b038e77bc2d1f4386091415dc38.png)

如您所见，没有正确对齐。我已经尝试了各种 css 更改，但没有任何运气。我觉得有什么我不知道的。我认为这将是相当直截了当的。但到目前为止，我错了。这是我的相关 JavaScript：

```
$("#votesList").empty();
$.each(votesCollection, function (i, item) {
  var s = "<li><div class='ui-grid-a'><div class='ui-block-a'>";
  s += "<label><strong>" + item.data.name + "</strong></label><br />";
  s += "<span style='font-weight:normal;'>" + item.data.description + "</span>";
  s += "</div>";

  var v = getTotalVotes(i);
  s += "<div class='ui-block-b ui-grid-b'>";
  s += "<div class='ui-block-a'><input id='decButton" + i + "' type='button' value=' - '  data-mini='true' onclick='decrementVotes(" + i + ", \"" + item.data.name + "\");' /></div>";
  s += "<div class='ui-block-b'>&nbsp;<input id='voteText" + i + "' type='text'  data-mini='true' value='" + v + "' style='text-align:center;' />&nbsp;</div>";
  s += "<div class='ui-block-c'><input id='incButton" + i + "' type='button'  data-mini='true' value=' + ' onclick='incrementVotes(" + i + ", \"" + ps.data.name + "\");' /></div>";
  s += "</div></div></li>";

  $("#votesList").append(s);
});
$("#votesList").listview("refresh");

for (var x = 0; x < votesCollection.length; x++) {
  $("#decButton" + x).button();
  $("#voteText" + x).textinput();
  $("#incButton" + x).button();
} 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T21:02:50.343

由于评论结果是答案，我将其作为答案：

尝试删除`&nbsp;`

# c++ - cmake + sdl - 禁用 sdlmain

> ID：10054503
> 
> 赞同：4
> 
> 时间：2012-04-07T12:30:25.580
> 
> 标签：c++, cmake, sdl

我正在使用 cmake (winxp sp3, cmake 2.8.4) 将 SDL 与我的应用程序链接起来。

```
cmake_minimum_required(VERSION 2.8)

find_package(SDL REQUIRED)

set(src WIN32 main.cpp)

include_directories(${QT_INCLUDE_DIR} ${QT_QTGUI_INCLUDE_DIR} ${SDL_INCLUDE_DIR})

add_executable(test ${src})

target_link_libraries(test ${SDL_LIBRARY}) 
```

问题：SDL_LIBRARY 包含 SDLmain.lib，我需要避免与它链接（我已经有另一个包含 main 的库，但在此 cmakelists.txt 示例中未提及）。

我需要从 SDL_LIBRARY 中删除 SDLmain 条目。这必须在不使用库的硬编码路径的情况下完成——基本上我需要继续使用 find_package 来设置与 sdl 相关的变量，但我必须确保 SDLmain 不在 SDL_LIBRARY 中。另外，我正在使用没有字符串（查找）的 cmake 2.8.4。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T21:20:29.447

这有帮助吗？

`FindSDL.cmake`：

```
# This module responds to the the flag:
# SDL_BUILDING_LIBRARY
# If this is defined, then no SDL_main will be linked in because 
# only applications need main().
# Otherwise, it is assumed you are building an application and this
# module will attempt to locate and set the the proper link flags
# as part of the returned SDL_LIBRARY variable. 
```

# operating-system - 如何验证 GDT 是否设置正确？

> ID：10054509
> 
> 赞同：2
> 
> 时间：2012-04-07T12:31:25.560
> 
> 标签：operating-system, interrupt, interrupt-handling, keyboardinterrupt

我的操作系统的 IDT 和 GDT 不能作为一个整体工作。我不知道其中哪一个设置不正确。那么我可以验证 GDT 是否设置正确，以便我能够找出问题所在。

我在 C 中这样做。

# android - Android 应用程序：将用户发送到哪里以获得市场应用程序评级？

> ID：10054510
> 
> 赞同：2
> 
> 时间：2012-04-07T12:31:27.370
> 
> 标签：android, rating

在我的 Android 应用程序中，我正在安装一个系统，要求用户在 google play 上对应用程序进行评分。我发现的唯一文档是将用户发送到`market://details?id=packagename`. 有没有办法直接将用户发送到评级页面，这样他就可以直接输入星星和评论，就像在 iOS 应用程序中一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T12:53:15.720

据我了解，市场上没有“评级”部分的锚点，所以你甚至不能尝试像#rating 这样的东西。据我所知，没有任何 API 可以从应用程序本身发送评级。

我认为你唯一的选择是做你目前正在做的事情。唯一的缺点是用户必须向下滚动一点。（我不完全确定 Google Play 应用程序是如何工作的，因为我仍然坚持使用 Market [Blame ATT]）

# php - htmlentities 和 htmlspecialchars 拒绝处理字符串

> ID：10054513
> 
> 赞同：4
> 
> 时间：2012-04-07T12:31:47.917
> 
> 标签：php, mysql, row, html-entities, htmlspecialchars

自从上次在我的 Debian 机器上更新**PHP5 5.4.0-3**以来，我注意到一些页面有空字段，其中应该是来自 MySQL 数据库的文本。

我玩了一下，发现了问题。

```
<?php
$scselect = mysql_query("SELECT `name` FROM `forum_threads` WHERE `forum` = '1' ORDER BY `timestamp` DESC") or exit((mysql_error()));
    while ($scrow=mysql_fetch_array($scselect))
    {
        var_dump($scrow['name']);
        var_dump(htmlentities($scrow['name']));
    }
?> 
```

奇怪的是，这是打印的内容：

```
string(18) "php hu3: the Forum"
string(0) ""
string(18) "php hu2 score-rule"
string(0) ""
string(6) "php hu"
string(0) ""
string(15) "HU 8: Binarycnt"
string(0) "" 
```

但是如果我使用带有硬编码内容的 htmlentities -> htmlentities("test"); 它就像魅力一样。另外，如果我这样做：

```
var_dump("a".$scrow['name']); 
```

它还说

```
string(0) "" 
```

但它变得陌生。如果我将 htmlentities 或 htmlspecialchars 与数据库中的任何其他变量一起使用，它就可以完美地工作。

```
var_dump(htmlspecialchars($scrow['ID'])); // prints for example string(2) "87" 
```

这可能是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T12:37:18.400

**试试这个 ：**

```
htmlentities($scrow['name'], ENT_QUOTES | ENT_IGNORE, "UTF-8"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T10:01:27.617

推荐的方法是在每次使用 htmlentities 时对字符集进行硬编码。

这是 htmlentities 调用的一个特性，不受默认字符集的影响。 [迁移54](http://uk3.php.net/manual/en/migration54.other.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T12:43:37.063

造成这种情况的原因可能是从数据库返回的另一种编码（如 UTF8）

所以玩一点`utf8_encode($string)`或`utf8_decode($string)`

另一种方法是使用 htmlentities 的 encoding 参数：

[http://de2.php.net/htmlentities](http://de2.php.net/htmlentities)

# javascript - 更改 iframe 跨浏览器上的选定文本

> ID：10054514
> 
> 赞同：0
> 
> 时间：2012-04-07T12:31:51.117
> 
> 标签：javascript, text, replace, selection

如何通过js更改可编辑iframe上的选定文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T12:36:28.633

您必须在要加载到 iframe 的页面上包含一些 Javascript。如果那是您所要求的，那么您不能从“外部”做到这一点。

但是，如果您从同一个域加载 iframe，则可以调用 iframe 中已经存在的 Javascript 上的函数。但是，如果您从另一个域加载 iframe，您会遇到[相同来源的策略](https://developer.mozilla.org/en/Same_origin_policy_for_JavaScript)。

如果您对动态填充 iframe 感兴趣，您可能会对以下内容感兴趣：

```
var iframe = createIframe('iframe0', 300, 300);
if (iframe) {
    var iframeDoc;
    if (iframe.contentDocument) {
        iframeDoc = iframe.contentDocument;
    }
    else if (iframe.contentWindow) {
        iframeDoc = iframe.contentWindow.document;
    }
    else if (window.frames[iframe.name]) {
        iframeDoc = window.frames[iframe.name].document;
    }
    if (iframeDoc) {
        iframeDoc.open();
        iframeDoc.write('<html><body><p>Awesomeness for all.<\/p><\/body><\/html>');
        iframeDoc.close();
    }
}​ 
```

*[（从这里](http://bytes.com/topic/javascript/answers/94228-iframe-dynamic-create-populate-immediately)借来的）*

有很多关于这种事情的东西。这是一个相当复杂的话题，很难给出一个好的答案。我建议尝试自己编写编辑器，然后在遇到任何问题时返回这里。这样，您可以提供一个特定的问题，该特定的解决方案是可能的。祝你好运！

# java - Java 线程：在 Windows 和 Linux 上

> ID：10054517
> 
> 赞同：0
> 
> 时间：2012-04-07T12:32:12.617
> 
> 标签：java, multithreading

我有聊天服务器应用程序，我们将在 3 个服务器上部署它。聊天应用程序使用了大量的多线程。

基本上我必须决定我应该为这 3 台服务器使用哪个操作系统。所以我想知道linux和windows如何独特地处理java线程。有什么区别？谁创建操作系统线程？他们分配了什么内存？

如果将来范围可扩展性和集群化哪个选项更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T12:59:16.547

> 如果将来范围可扩展性和集群化哪个选项更好？

可伸缩性和集群最有可能受到代码的内部设计的阻碍，而*不是*受到 JVM 或底层操作系统的阻碍。在不*深入*研究代码的情况下，每条关于此的声明都只是热噪声，而不是深刻的声明。

但是 Java 的好处是：它可以在两个平台上运行而无需更改代码。因此，您可以做的最好的事情是：在同一硬件上对两个操作系统进行基准测试（但不要使用任何类型的虚拟化！）并为您的目的使用最好的一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T12:48:24.580

> linux和windows如何区别处理java线程。

Java 的美妙之处在于你并不在乎。他们只是工作。但如果你真的很好奇，现代 JVM 将线程处理委托给操作系统。所以它更多的是操作系统问题而不是 Java。

> 有什么区别？

看上面。Java 在这里没什么可做的。它是关于如何在主机操作系统中实现线程。

> 谁创建操作系统线程？

JVM 要求操作系统创建它们，并在 Java`Thread`对象和本机线程之间提供一个瘦包装器。

> 他们分配了什么内存？

每个线程都有自己的堆栈（参见`-Xss`JVM 选项）。此外，所有线程共享相同的堆空间。

# jquery - 我在哪里可以找到 jQuery 颜色插件的缩小版？

> ID：10054519
> 
> 赞同：3
> 
> 时间：2012-04-07T12:32:26.683
> 
> 标签：jquery, jquery-plugins

存储库在[这里](https://github.com/jquery/jquery-color)

```
https://github.com/jquery/jquery-color 
```

示例使用显示 jquery.color.min.js

但是我在存储库中的任何地方都找不到该文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T12:35:44.623

加油，希望对你有帮助，加油！

[http://blog.jquery.com/2011/05/31/jquery-color-v2-beta-1-released/](http://blog.jquery.com/2011/05/31/jquery-color-v2-beta-1-released/)

[http://code.jquery.com/color/jquery.color-2.0b1.min.js](http://code.jquery.com/color/jquery.color-2.0b1.min.js)

[http://code.jquery.com/color/jquery.color-2.0b1.js](http://code.jquery.com/color/jquery.color-2.0b1.js)

*进一步报价*

> ```
> >     Back in 2007 we released the jQuery Color Plugin, and it has been providing you with color-based animations ever since. We are now
>  preparing a second version of this plugin which adds an API, RGBA,
> > HSLA, and many other features. It is time for a beta! The repository
> > for this plugin can be found at github.com/jquery/jquery-color.  There
> > are also uncompressed and minified versions available on
> > code.jquery.com. 
> ```

# asp.net - ASPxGridview Master-Detail - EntityDatasource，总是并发异常

> ID：10054520
> 
> 赞同：0
> 
> 时间：2012-04-07T12:32:32.553
> 
> 标签：asp.net, devexpress

我有一个父网格视图和一个详细网格视图，我可以插入/更新/删除父网格视图。我可以在详细网格视图上插入新记录但我无法更新/删除任何详细网格视图中的任何记录我得到以下异常。

> 存储更新、插入或删除语句影响了意外数量的行 (0)。自加载实体后，实体可能已被修改或删除。刷新 ObjectStateManager 条目。

我知道这是不可能的，因为我是唯一一个编辑这条记录的人。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T11:42:28.183

好的，我找到了答案，不需要额外的版本列，而是混合了我在 devexpress 网站上发现的两个支持问题，并提出了以下问题。

```
 protected void gvPackages_RowUpdating(object sender, ASPxDataUpdatingEventArgs e)
    {
        e.OldValues["Version"] = GetVersionField(sender as ASPxGridView);
    }

    Byte[] GetVersionField(ASPxGridView grid)
    {
        return grid.GetRowValues(grid.EditingRowVisibleIndex, "Version") as Byte[];
    } 
```

效果很好，这与外键 id 一起意味着它现在可以按预期工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T08:17:17.457

首先，如果您在绑定方面做错了事，请遵循以下内容：
[How to implement common scenario when using the ASPxGridView component / MVC GridView Extension bound with EntityDataSource / Entity Framework](http://www.devexpress.com/Support/Center/kb/p/K18504.aspx)

如果一切都正确，那么是实体框架存储数据的问题，在删除或更新操作时传递错误。正如我所探讨的那样，这是由于未设置实体的 ID（键）字段造成的。因此，当上下文去保存数据时，它找不到主键字段 = 0。请务必在更新语句中放置一个断点并验证实体的 ID 是否已设置。

> 正如我认为尝试设置详细网格的**KeyFieldName="KeyFieldName"**。它应该可以解决您的问题。

请按照以下链接进行参考：
[实体框架：“存储更新、插入或删除语句影响了意外数量的行 (0)。”](https://stackoverflow.com/questions/1836173/entity-framework-store-update-insert-or-delete-statement-affected-an-unexpec)

[http://smisro.blogspot.in/2010/04/store-update-insert-or-delete-statement.html](http://smisro.blogspot.in/2010/04/store-update-insert-or-delete-statement.html)
[Kevin McNeish 对此的解决方案](https://msmvps.com/blogs/kevinmcneish/archive/2009/12/03/understanding-the-entity-framework-concurrencyexception-store-update-insert-or-delete-statement-affected-an-unexpected-number-of-rows.aspx)

参考：[DevExpress Master Detail 示例](http://www.devexpress.com/Support/Center/e/E3608.aspx)

# google-app-engine - Google App Engine 上的部署错误 - 上传 0 个文件

> ID：10054524
> 
> 赞同：4
> 
> 时间：2012-04-07T12:32:57.983
> 
> 标签：google-app-engine, deployment

我最近将我的 Eclipse Java GAE 项目重新定位到我计算机上的不同位置。（而且这两个位置都在 Dropbox 下。）从那时起，我一直遇到部署问题。当我对文件进行更改并保存它们时，有时它无法识别更改并且不会上传它们（所以当我通过 Eclipse 部署时，它说上传 0 个文件并且未更新实时部署）。

有时它确实有效（经过几次清理并重新启动到 Eclipse）。

任何有关如何解决此问题的帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T21:24:01.970

现在似乎解决了，需要考虑一些注意事项

*   确保您没有手动修改（添加/删除）war/WEB-INF/lib 文件夹下的库。仅在使用库时才添加到该文件夹​​。（我在那里有一些未使用的库）
*   确保清理项目后清理 war/bin/classes
*   我也重新安装了插件，以防万一

# c++ - Qt：使 QHBoxLayout 可滚动

> ID：10054527
> 
> 赞同：2
> 
> 时间：2012-04-07T12:33:05.467
> 
> 标签：c++, qt, user-interface, layout

我有一个`QHBoxLayout`水平布局，其中添加了很多列表小部件。

尽管我调用`setMaximumWidth(300)`了`setMinimumWidth(300)`列表小部件，但一旦它们不适合窗口，它们就会开始缩小。

我想有一个滚动条。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T12:39:59.263

是的，如果您将布局放在父小部件中，而该父小部件则放在 QScrollArea 中。

[QScrollArea 文档](http://qt-project.org/doc/qt-4.8/qscrollarea.html)

# installation - 如何使用 waf 递归安装目录

> ID：10054528
> 
> 赞同：3
> 
> 时间：2012-04-07T12:33:15.087
> 
> 标签：installation, waf

我目前使用以下 valadoc 构建任务为我的 vala 应用程序生成 api 文档：

```
doc = bld.new_task_gen (
  features = 'valadoc',
  output_dir = '../doc/html',
  package_name = bld.env['PACKAGE_NAME'],
  package_version = bld.env['VERSION'],
  packages = 'gtk+-3.0 gee-1.0 libxml-2.0 x11 gdk-x11-3.0 libpeas-gtk-1.0 libpeas-1.0 config xtst gdk-3.0',
  vapi_dirs = '../vapi',
  force = True)

path = bld.path.find_dir ('../src')
doc.files = path.ant_glob (incl='**/*.vala') 
```

此任务在输出目录中创建一个目录 html，其中包括几个带有 html 和图片文件的子目录。

我知道尝试做的是将这些文件安装到/usr/share/doc/projectname/html/。为此，我将以下内容添加到 wscript_build 文件中（按照我在[这里](http://code.google.com/p/waf/wiki/InstallFiles)找到的文档）：

```
output_dir = doc.bld.path.find_or_declare('../doc/html')
doc.outputs = output_dir.ant_glob (incl='**/*')
doc.bld.install_files('${PREFIX}/share/doc/projectname/html', doc.outputs) 
```

但是，这会导致错误“缺少节点签名”。有谁知道如何解决这个错误？还是有一种简单的方法可以使用 waf 递归安装目录？

[您可以在此处](http://bazaar.launchpad.net/~diodon-team/diodon/trunk/view/head:/doc/wscript_build)找到完整的示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T19:30:57.753

我对生成的文件有类似的问题，必须更新相应 Node 对象的签名。尝试创建一个任务：

```
def signature_task(task):
    for x in task.generator.bld.path.find_dir('../doc/html').ant_glob('**/*', remove=False): 
        x.sig = Utils.h_file(x.abspath()) 
```

在构建规则的顶部，尝试添加：

```
#Support running task groups serially
bld.post_mode = Build.POST_LAZY 
```

然后在构建结束时，添加：

```
#Previous tasks belong to a group
bld.add_group()
#This task runs last
bld(rule=signature_task, always=True, name="signature_task") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-21T21:35:07.833

使用 relative_trick 有一种更简单的方法。

```
bld.install_files(destination,
                  bld.path.ant_glob('../doc/html/**'),
                  cwd=bld.path.find_dir('../doc/html'),
                  relative_trick=True) 
```

这会从 glob 中获取文件列表，去掉前缀，并将其放入目的地。

# macos - 如何模拟键盘/鼠标按键？

> ID：10054536
> 
> 赞同：1
> 
> 时间：2012-04-07T12:34:31.473
> 
> 标签：macos, mono, keypress, simulate

我正在开发一个 Mac OS X 项目。我正在使用单声道 Mac。我想模拟键盘按键和鼠标按键并移动，就像我们在 Windows 表单中使用的方法一样（[DllImport("user32.dll")] ....）

我找到了一些 Obj-C 解决方案，但我无法将它移植到 Mono Mac。其中一些在此堆栈链接中： [设置鼠标位置](https://stackoverflow.com/questions/8059667/set-the-mouse-location)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:36:19.017

我自己找到了答案！您需要在 ObjC（在 CoreGraphics 中）中 P/Invoke 所需的类，您可以在 Mono 中轻松执行此操作，如下代码所示：

```
[DllImport(Constants.CoreGraphicsLibrary)] 
```

问候，佩曼·莫尔塔扎维

# iphone - 禁用点击当前选项卡 (UITabBarController) iPhone 应用程序

> ID：10054539
> 
> 赞同：3
> 
> 时间：2012-04-07T12:34:50.810
> 
> 标签：iphone, ios, uitabbarcontroller

目前，点击同一个选项卡（用户正在工作），应用程序移动到该选项卡的第一页。

我想禁用用户当前正在工作的选项卡上的点击事件。

任何提示？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-07T12:55:58.233

你试过`tabBarController:shouldSelectViewController:`委托方法吗？我希望这对你有帮助。

```
- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController {

    id currentViewController = tabBarController.selectedViewController;
    return (viewController != currentViewController);
} 
```

如果标签栏控制器的所有视图控制器都是`UINavigationControllers`，你应该这样做。

```
- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController {

    id nextVC = [(UINavigationController *)viewController topViewController];
    id currentVC = [(UINavigationController *)tabBarController.selectedViewController topViewController];
    return (nextVC != currentVC);
} 
```

对于 Swift 4，委托方法如下所示：

```
func tabBarController(_ tabBarController: UITabBarController, shouldSelect viewController: UIViewController) -> Bool {
    return viewController != tabBarController.selectedViewController
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T13:06:19.727

像下面这样使用它会起作用

```
- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController
    {
        if(self.tabBarController.selectedIndex==[[self.tabBarController viewControllers] indexOfObject:viewController])
            return  NO;   
        else
            return YES;
    } 
```

# jquery - jquery sortable serialize返回空字符串

> ID：10054541
> 
> 赞同：11
> 
> 时间：2012-04-07T12:35:09.140
> 
> 标签：jquery, html, jquery-ui-sortable

HTML：

```
<ul id="categories_list" class="ui-sortable">
<li class="cat_row" style=""> item1 </li>
<li class="cat_row" style=""> item2 </li>
<li class="cat_row"> item3 </li>
</ul> 
```

Javascript：

```
$("#categories_list").sortable({
placeholder: 'sortable_placeholder',
update : function () {
    var order = $("#categories_list").sortable('serialize');
    console.log(order);
} 
}); 
```

订单返回“空字符串”这是为什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-07T12:41:14.513

您的 li 上的 id 属性需要如下所示：

```
<ul id="categories_list" class="ui-sortable">
<li class="catRow_1" style=""> item1 </li>
<li class="catRow_2" style=""> item2 </li>
<li class="catRow_3"> item3 </li>
</ul> 
```

您需要按照[此处](https://stackoverflow.com/questions/965083/jquery-sortable-list-wont-serialize-why)的下划线分隔订单号。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-07T12:44:28.417

> 将可排序的**项目 ID**序列化为表单/ajax 可提交字符串。调用此方法会生成一个哈希值，该哈希值可以附加到任何 url，以便轻松地将新的商品订单提交回服务器。

您需要为 LI-Tag 指定 ID！

见 [http://jsfiddle.net/m47mq/](http://jsfiddle.net/m47mq/)

# php - 如何管理和开发大型 TYPO3 项目？

> ID：10054550
> 
> 赞同：20
> 
> 时间：2012-04-07T12:36:04.937
> 
> 标签：php, project-management, typo3

我从 2006 年开始开发 TYPO3 项目，项目越来越大，越来越复杂。建立一个带有联系表格和新闻列表的简单 CMS 网站都是例行公事。

现在，我们完成了一个更大的项目：一个具有无数扩展的国际公司平台：登录和注册、新闻、列表数据库记录、动态联系表、调查和统计、内网功能：文件上传和下载、几个后端“调整”每个 TCA 修改等。

项目经理对我们这些开发人员很生气，因为有时，在我们完成函数 X 并随后将函数 Y 提交给开发服务器后，函数 X 被破坏了。这与打字稿设置、扩展相互依赖、版本控制错误或有时是简单的编程错误和打字错误有关。我知道如何照顾后者，但总的来说：

根据您的经验：

> **我们如何在 TYPO3 中开发一个防错系统，让一切尽在掌握，并且扩展不会妨碍它们？**换句话说：我们如何保护和隔离功能（扩展） - 并避免那些相互依赖的问题？

我们正在与两名开发人员一起在 DEV 团队中工作，我们已经使用：

*   颠覆存储库
*   用于开发和测试的本地 DEV 服务器
*   外部打字稿配置文件，每个扩展名拆分为单个文件

**赏金猎人编辑：**

我正在寻找的是可能包括以下主题的最佳实践摘要：

*   一般工作流程习惯
*   一般编码习惯
*   我们的颠覆提交（或 Git）的可靠性
*   单元测试（PHPUnit、Selenium？）
*   部署（我还没有弄清楚自动化部署如何帮助我们）
*   排版最佳实践

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-11T08:04:24.327

我们可以在大型 TYPO3 项目中发现的问题与任何开发项目没有太大区别。

一般做法：

*   使用[持续部署工具](https://en.wikipedia.org/wiki/Capistrano_(software))配置[持续集成平台](http://jenkins-ci.org/)；
*   具有自动化测试的测试驱动开发；
*   健壮的架构（dB，URL 路由，...）；
*   [开发过程中的性能测试](http://jmeter.apache.org/)；
*   使用带有格式化注释的版本控制；
*   使用强大的 IDE，如 PHPStorm、Eclipse、Netbeans；

常见的 TYPO3 做法：

*   使用[官方API](http://typo3.org/documentation/api/)；
*   遵循[TYPO3 API 代码指南](http://typo3.org/documentation/document-library/core-documentation/doc_core_cgl/current/view/)；
*   如果您需要修改核心或第 3 方扩展的逻辑，请尽可能使用[TYPO3 挂钩；](http://typo3.org/documentation/document-library/core-documentation/doc_core_api/current/view/3/4/)
*   使用[TypoScript 常量](http://wiki.typo3.org/TypoScript_Constants)将数据与配置中的逻辑分开；

附加参考：

*   [TYPO3 最佳实践研讨会](http://jweiland.net/uploads/media/TYPO3-Best-Practice-Workshop.pdf)
*   [TYPO3 最佳实践 (de)](http://www.jochen-froehlich.de/typo3-best-practice.html)
*   [TDD & Best Practices mit TYPO3 (de)](http://www.slideshare.net/oliverklee/tdd-best-practices-mit-typo3)

扩展可以帮助管理复杂的 TYPO3 安装：

*   [看守人](http://forge.typo3.org/projects/extension-caretaker)
*   [附加报告](http://forge.typo3.org/projects/show/extension-additional_reports/)

使用现代项目管理方法和工具

*   Scrum、看板、精益开发原则
*   Bugtrackers 作为 Redmine, Trac

书籍：

*   [php|企业 PHP 开发架构师指南](http://www.phparch.com/books/phparchitects-guide-to-enterprise-php-development/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T21:45:06.960

我绝对建议开始使用[PHPUnit](http://phpunit.de/)进行单元测试，但请记住，单元测试实际上是关于如何首先创建代码，而不是通常稍后添加的内容。但当然，迟到总比没有好。

您应该考虑设置一个构建服务器，例如 jenkins/hudson 或[atlassian 竹子](http://www.atlassian.com/software/bamboo/overview)。后者非常好，并且与 zend studio 集成，在我看来这是用 PHP 开发时更好的选择。一般来说，[atlassian](http://atlassian.com)产品广泛用于软件项目。（尤其是 Jira + confluence + greenhopper）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T12:14:24.197

我还建议在 jenkins 上设置 phpunit - 请参阅[http://jenkins-php.org/](http://jenkins-php.org/)作为模板，尽管我已经阅读了有关 Teamcity 的良好反馈。然后，根据您编写的代码，您设置单元测试（对于原始 php 代码，可能有点模拟）、集成测试（API 和模块连接）和系统测试（硒）。

一旦在每次构建后运行它，您就可以确定至少涵盖的功能正在运行。然而，问题是您将花费更多时间来编写测试及其支持以及考虑可测试的代码。另请记住，您无法涵盖所有​​内容-这不是重点。您必须涵盖关键路径。

# openoffice.org - 绕过条件格式限制？

> ID：10054555
> 
> 赞同：0
> 
> 时间：2012-04-07T12:36:45.467
> 
> 标签：openoffice.org, openoffice-calc, libreoffice

我必须根据某些字符串条件为 Calc 行着色。因此，每次在 B 列中出现某个字符串值时，整个列都会以某种颜色着色。它看起来像在这张图片上。

![](../Images/e4291d6fddfe8f9d70681e6bd19e6ebb.png)

我需要更多的字符串和更多的条件。我怎样才能克服这个限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T22:46:59.697

使用不再有此限制的 Libreoffice 3.5。

对于较旧的 Libreoffice 版本，应该有一个提供相同功能的扩展。如果可以找到它，请检查 Libreoffice 扩展存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:35:13.227

正如上面的答案所述，LibreOffice 3.5 允许您需要的条件格式规则尽可能多。您只需单击右侧的“添加”按钮。为了清除上一篇文章中的错误，Star/Open/Libre office 中对 VBA 的支持最低。它们有自己的功能和相似的 BASIC 编程规则，但是由于语法完全不同，因此需要重写来自 excel 电子表格的大多数详细 VBA 程序。

我不知道这个链接能用多久，但这是我一直用作编程指南的内容：http: [//198.62.75.4/opt/sun_docs/C/solaris_10/SUNWsodoc/SO7BPG/](http://198.62.75.4/opt/sun_docs/C/solaris_10/SUNWsodoc/SO7BPG/)

# c# - 如何根据字符串输入获取列表

> ID：10054556
> 
> 赞同：-2
> 
> 时间：2012-04-07T12:36:55.123
> 
> 标签：c#, wcf, web-services, rest

我想通过关联标签列出组我正在使用文本框来表示与我的服务中的 GET 方法相关的 TagName。在我的客户端，我有这个：

```
string uriGetGroupsCollection = "http://localhost:8000/Service/GetGroupsCollection/{TagName}";
private void button6_Click(object sender, EventArgs e)
{
    XDocument xDoc = XDocument.Load(uriGetGroupsCollection);
    var Tag = xDoc.Descendants("notsure")
        .Select(n => new
        {
            Tag = n.Element("notsure").Value,
        })
        .ToList();

    dataGridView3.DataSource = Tag;
} 
```

这只返回一个标签列表我该如何更改它，以便它将从我的文本框中获取一个字符串并将一个组列表返回到我的数据网格中？我最好希望它在按钮单击我的数据网格中填充标签和与该标签名关联的组列表。

有点像 SO 如何将标签与问题相关联，如果您单击此问题旁边的任何标签，它将列出与该标签相关的问题，在同样的意义上，我想实现相同的目标，而不是对其组提出问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T15:01:37.790

看起来你需要

```
string uriGetGroupsCollection = 
     "http://localhost:8000/Service/GetGroupsCollection/{TagName}";

private void button6_Click(object sender, EventArgs e)
{
    string tagUri = uriGetGroupsCollection.Replace("{TagName}", textbox1.text);
    XDocument xDoc = XDocument.Load(tagUri);
    ...
} 
```

# sql-server-2008 - BusinessEntityContact 如何与 AdventureWorks2008R2 数据库中的 BusinessEntity、Contact 和 Person 映射

> ID：10054559
> 
> 赞同：4
> 
> 时间：2012-04-07T12:37:37.480
> 
> 标签：sql-server-2008, adventureworks

BusinessEntityContact 如何与 AdventureWorks2008R2 数据库中的 BusinessEntity、Contact 和 Person 映射

我对此进行了头脑风暴，以了解它是如何相关的。我用 Store、Person、Customer 查询 BusinessEntityContact，但我不明白发生了什么..

![在此处输入图像描述](../Images/55852dab31b4dea74792b0cf7e295c25.png)

这个数据库是AdventureWorks2008R2 for Sql Server2008 R2

# wpf - 将 WPF 调度程序转换为 Winforms BGworker？

> ID：10054564
> 
> 赞同：0
> 
> 时间：2012-04-07T12:39:00.333
> 
> 标签：wpf, winforms, multithreading, backgroundworker, dispatcher

我最近获得了一些用于服务器控制台包装器的源代码。该程序最初是在 WPF 中，部分代码是：

```
private void ServerProc_ErrorDataReceived(object sender, DataReceivedEventArgs e)
{
    Dispatcher.Invoke(new Action(() =>
    {
        ConsoleTextBlock.Text += e.Data + "\r\n";
        ConsoleScroll.ScrollToEnd();
    }));
}

private void ServerProc_OutputDataReceived(object sender, DataReceivedEventArgs e)
{
    Dispatcher.Invoke(new Action(() =>
    {
        ConsoleTextBlock.Text += e.Data + "\r\n";
        ConsoleScroll.ScrollToEnd();
        ParseServerInput(e.Data);
    }));
} 
```

它在两个空白处也有这个注释：

> // 您必须通过 Dispatcher 执行此操作，因为此方法由不同的线程调用

但是在 WinForms 中没有这样的东西 - 有没有办法将其更改为后台工作人员或其他东西（我几乎没有做过任何多线程）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T13:04:51.933

这两种方法都是事件处理程序。它们可能来自某种监听代码，我希望它们是从非 UI 线程调用的（例如，通常是一个正在监听的线程池线程）。您可以通过设置断点并查看调试器中的线程窗口来检查。
因此，您将需要应用 winforms 从非 UI 线程更新 UI 的方式。
如果您搜索 SO，您应该会找到很多关于如何做到这一点的信息。例如
[，从不同线程更新 UI](https://stackoverflow.com/questions/724972/updating-ui-from-a-different-thread)
[如何从 C# 中的另一个线程更新 GUI？](https://stackoverflow.com/questions/661561/how-to-update-gui-from-another-thread-in-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T13:05:38.720

一些背景知识：不允许在 UI 线程以外的线程中运行的进程直接访问任何 UI 控件。您的 WPF ServerProc 运行在与 UI 不同的线程中，这需要`Dispatcher`帮助您从 ServerProc 线程与 UI 线程中的 UI 控件进行通信。

如果您的 ServerProc（在 WPF 或 WinForms 中）在 UI 线程中运行，则无需将其与`Dispatcher.Invoke`调用一起包围。

对您而言，您可以将 ServerProc 放入[BackgroundWorker（MSDN 示例）](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)中。您的`DoWork`方法将包含执行工作的代码的核心，然后根据 ServerProc 的工作方式，您可以使用`ProgressChanged`这两种示例 WPF 方法正在执行的操作。`ProgressChanged`有一个传入的参数，您将指示它是错误还是已收到数据，并且在函数内部您可以显示适当的信息。看看 MSDN 文档，因为他们有一个很好的例子。

需要指出的重要一点是，这`ProgressChanged`发生在 UI 线程上，因此您无需使用 Invoke 围绕对 UI 控件的调用；只是正常打电话给他们。当您的 ServerProc 完成其工作时，`RunWorkerCompleted`这可能是显示数据的另一个选项也是如此。

最后，如果您确实必须从您的线程中访问一个 UI 控件，您可以执行与您的 WPF 代码示例非常相似的操作。看看[MethodInvoker](http://msdn.microsoft.com/en-us/library/system.windows.forms.methodinvoker.aspx)。而不是 Dispatcher，您实际上只是从您的主窗体中调用它。

# ios - MapKit：是否有获得精确标记位置的指南？

> ID：10054573
> 
> 赞同：0
> 
> 时间：2012-04-07T12:40:46.207
> 
> 标签：ios, location, mapkit, marker

好的。我在上面的列表中没有看到答案，所以我会问。我真的希望答案很简单，而我却浑然不觉。

我有一个标记资产，它是一个带有阴影的标记。这是一个 37 像素宽和 40 像素高的 PNG。

它有一个阴影图像（与默认图钉一样），“点”（确切地说，位置在哪里）位于标记图像的底部，位于（从左到上）11、40。

现在，根据[MapKit centerOffset 文档](https://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKAnnotationView_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40008207)，我应该简单地将 centerOffset 设为 18、20 的增量，应该是 -7、20。

但是，这似乎对我不起作用。我的标记顽固地保持水平居中。垂直位置似乎还可以。

我知道我一定是在做一些非常愚蠢的事情，有人可以启发这个可怜的白痴标记的正确位置吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T13:43:35.533

地图标注的[示例代码](https://developer.apple.com/library/ios/#samplecode/MapCallouts/Listings/MapViewController_m.html#//apple_ref/doc/uid/DTS40009746-MapViewController_m-DontLinkElementID_10)有一个偏移的自定义图钉视图。

# authentication - Kohana Authlite - 不允许两个用户在同一个会话中使用相同的凭据登录

> ID：10054574
> 
> 赞同：0
> 
> 时间：2012-04-07T12:40:55.107
> 
> 标签：authentication, kohana, kohana-3, kohana-auth

我正在为我的 kohana 3 网站使用 authlite 身份验证模块。现在，两个用户可以在同一个会话中使用相同的凭据登录。出于安全原因，我不希望这种情况发生。

我有没有可能避免它？

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T21:19:22.103

Auth 不会为您做那种检查。如果需要，您需要覆盖生成令牌的函数并将一些代码添加到：

1.  记录谁登录
2.  根据以前的用户->令牌记录列表检查登录并注销旧记录
3.  分配新令牌

# ruby - 如何将哈希值保存到 CSV

> ID：10054576
> 
> 赞同：1
> 
> 时间：2012-04-07T12:41:05.017
> 
> 标签：ruby, csv, nokogiri

我有一个包含一列的 CSV，我喜欢在上面保存我的所有哈希值。我正在使用 nokogiri sax 解析 xml 文档，然后将其保存到 CSV。我得到这样的 xml 值：`@infodata[:academic] = @content.inspect`哈希有以下键：

```
@infodata = {}
@infodata[:titles] = Array.new([])
@infodata[:identifier]  
@infodata[:typeOfLevel]
@infodata[:typeOfResponsibleBody]
@infodata[:type]
@infodata[:exact]
@infodata[:degree]
@infodata[:academic]
@infodata[:code]
@infodata[:text] 
```

当我现在使用此代码循环键并将其保存到 CSV 时：

```
def end_document
 CSV.open("info.csv", "wb") do |row|
  for key, val in @infodata
    row << [val,]
  end
 end
 puts "Finished..."     
end 
```

我得到的输出是：

```
"""avancerad"""
"""Ingen examen"""
"""uh"""
"""Arkivvetenskap""""Archival science"""
"""HIA80D"""
"""10.300"""
"""uoh"""
"""Arkivvetenskap rör villkoren för befintliga arkiv och modern arkivbildning med fokus på arkivarieyrkets arbetsuppgifter: bevara, tillgängliggöra och styra information. Under ett år behandlas bl a informations- och dokumenthantering, arkivredovisning, gallring, lagstiftning och arkivteori. I kursen ingår praktik, där man under handledning får arbeta med olika arkivarieuppgifter."""
"""statlig"""
"""60""" 
```

我如何获得这样的输出：

```
"avancerad", "Ingen examen", "uh", "Arkivvetenskap", "Archival science", "HIA80D", 10.300,"uoh", "Arkivvetenskap rör villkoren för befintliga arkiv och modern arkivbildning med fokus på arkivarieyrkets arbetsuppgifter: bevara, tillgängliggöra och styra information. Under ett år behandlas bl a informations- och dokumenthantering, arkivredovisning, gallring, lagstiftning och arkivteori. I kursen ingår praktik, där man under handledning får arbeta med olika arkivarieuppgifter.", "statlig", 60 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T13:01:58.270

我想我理解你的一般问题，所以也许这可以帮助你：

```
# Flatten the titles Array into one String
@infodata[:titles] = @infodata[:titles].join(", ")

# Open the CSV for writing
CSV.open("info.csv", "wb") do |csv|
  # Write the entire row all at once
  csv <<  @infodata.values
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T22:38:23.293

@joelparkerhenderson 谈到的 join 方法只是采用两个数组值并将它们连接在一起。

您可以`flatten`像这样分离并创建一个新数组：

```
# Open the CSV for writing
CSV.open("info.csv", "wb") do |csv|
  # Write the entire row all at once
  csv <<  @infodata.values.flatten
end 
```

阅读更多：[http ://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-flatten](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-flatten)

# ios - Monotouch/WCF：如何在没有 svcutil 的情况下使用 wcf 服务

> ID：10054581
> 
> 赞同：13
> 
> 时间：2012-04-07T12:41:33.607
> 
> 标签：ios, wcf, xamarin.forms, xamarin.ios, .net-standard

因为monotouch编译为native code，所以它有一些限制，比如不允许动态调用。

但是我在 .net 中有很多类，我使用 ChannelFactory 动态调用 wcf 服务： new ChannelFactory(myBinding, myEndpoint); 现在在 monotouch 中我应该使用 slsvcutil 来生成 wcf 代理类，但是 slsvcutil 生成了很多不必要的额外代码（巨大），并且由于通过 ClientBase 类与 WCF 基础结构的高度耦合，使消费者难以进行单元测试。

除了 ChannelFactory 有没有更好的解决方案？我宁愿手动编写代码，更好地控制服务的调用方式，例如 ChannelFactory。

==========

```
 ChannelFactory<IMyContract> factory = new ChannelFactory<IMyContract>(binding, endpointAddress);
        return factory.CreateChannel(); 
```

//==> 抛出异常：MonoTouch 不支持动态代理代码生成。覆盖此方法或其调用者以返回特定的客户端代理实例

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-07T16:56:01.100

`ChannelFactory<T>`有一个虚方法`CreateChannel()`。如果这没有被覆盖，它会使用动态代码生成，这在 MonoTouch 上会失败。

解决方案是覆盖它并提供您自己的编译时实现。

下面是我的一个旧服务实现，至少曾经在 MonoTouch 上工作。我将它分成 2 个部分类 - 第一个在所有构建中链接，第二个仅在 iOS 构建中（允许动态生成机制仍然在 Windows 上工作）。
我已将其精简为仅包含 1 个服务调用。

事务服务.cs：

```
public partial class TransactionService : ClientBase<IConsumerService>, IConsumerService
{

    public TransactionService()
    {
    }

    public TransactionService(string endpointConfigurationName) : 
        base(endpointConfigurationName)
    {
    }

    public TransactionService(string endpointConfigurationName, string remoteAddress) : 
        base(endpointConfigurationName, remoteAddress)
    {
    }

    public TransactionService(string endpointConfigurationName, EndpointAddress remoteAddress) : 
        base(endpointConfigurationName, remoteAddress)
    {
    }

    public TransactionService(Binding binding, EndpointAddress remoteAddress) : 
        base(binding, remoteAddress)
    {
    }

    public AccountBalanceResponse GetAccountBalance( AccountBalanceQuery query )
    {
        return Channel.GetAccountBalance( query );
    }
} 
```

TransactionService.iOS.cs： `ConsumerServiceClientChannel`通过反射执行调用）

```
public partial class TransactionService
{
    protected override IConsumerService CreateChannel()
    {
        return new ConsumerServiceClientChannel(this);
    }

    private class ConsumerServiceClientChannel : ChannelBase<IConsumerService>, IConsumerService
    {

        public ConsumerServiceClientChannel(System.ServiceModel.ClientBase<IConsumerService> client) :
            base(client)
        {
        }

        // Sync version
        public AccountBalanceResponse GetAccountBalance(AccountBalanceQuery query)
        {
            object[] _args = new object[1];
            _args[0] = query;
            return (AccountBalanceResponse)base.Invoke("GetAccountBalance", _args);
        }

        // Async version
        public IAsyncResult BeginGetAccountBalance(AccountBalanceQuery query, AsyncCallback callback, object asyncState )
        {
            object[] _args = new object[1];
            _args[0] = query;
            return (IAsyncResult)base.BeginInvoke("GetAccountBalance", _args, callback, asyncState );
        }

        public AccountBalanceResponse EndGetAccountBalance(IAsyncResult asyncResult)
        {
            object[] _args = new object[0];
            return (AccountBalanceResponse)base.EndInvoke("GetAccountBalance", _args, asyncResult);
        }

    }
} 
```

编辑：我刚刚用最新的 MT (5.2) 测试了这个 - 它不再需要我以前在那里拥有的所有额外的样板，只需 CreateChannel() 覆盖。我已经清理了示例代码以匹配。

EDIT2：我添加了一个异步方法实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T13:19:07.117

我认为您可能会在这里混淆术语 - [ChannelFactory](http://msdn.microsoft.com/en-us/library/ms576132.aspx)是**通用**类型，而不是**动态**.

根据 MonoTouch 文档，虽然 MonoTouch[中的泛型支持存在限制](http://ios.xamarin.com/documentation/limitations#Limited_Generics_Support)，但ChannelFactory在这里*应该*没问题。

您是否尝试过使用 ChannelFactory？

# vb.net - 如何在 VB.NET 中设置垂直滚动条的位置？

> ID：10054582
> 
> 赞同：4
> 
> 时间：2012-04-07T12:41:36.717
> 
> 标签：vb.net, textbox, scrollbar

我有一个带有大量文本的 TextBox 控件，它有一个垂直滚动条，每次我隐藏/显示控件时，滚动条的位置都保持不变。我试图弄清楚如何将滚动条的位置更改为文本框的顶部，就好像它在文本的开头一样。

我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T12:50:57.737

如果您使用的是 WinForms，这是一个可能的解决方案：

```
YourTextBox.Select(0, 0)
YourTextBox.ScrollToCaret() 
```

如果您使用的是 WPF：

```
YourTextBox.ScrollToHome() 
```

# delphi - Advantage Database Server 10 错误 5211 - 转换 Unicode 字符串时出错

> ID：10054586
> 
> 赞同：1
> 
> 时间：2012-04-07T12:42:25.377
> 
> 标签：delphi, unicode, delphi-2009, advantage-database-server

我正在将 D7 应用程序转换为 D2009，并且遇到了 Advantage 数据库服务器（本地）的问题。每当我在查询中包含非参数化土耳其语字符时，我都会收到错误消息

```
[iAnywhere Solutions][Advantage SQL][ASA] 
Error 5211: There is an error converting Unicode string to or from code page string.
Some Unicode characters cannot be converted to code page characters. 
```

我试过在命令中使用 ansistrings，比如 in；

```
AdsQuery1.SQL.Text:=AnsiString('SELECT something FROM sometable WHERE somefield=''somelocalçharaçterş'' '); 
```

但无济于事。我还将 AdsConnection 的 AdsCollat​​ion 值设置为 ANSI、OEM、TURKISH-1254，但结果是一样的。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T23:17:08.237

你能看一下 adslocal32.dll 同目录下的 adscollat​​e.adt 吗？

根据帮助文件，问题的一个可能原因是服务器加载了旧版本的 adscollat​​e.adt。adscollat​​e.adt 的 10.0 版本有一些额外的列，其中之一是“UnicodeLocale”。

adslocal.cfg 中的 ANSI/OEM 设置是什么？

如果你运行这个“SELECT ::stmt.collat​​ion FROM system.iota”，结果是什么？

# javascript - 当窗口太小时，带有 Javascript 的固定 div 滚动。文档类型问题

> ID：10054588
> 
> 赞同：0
> 
> 时间：2012-04-07T12:42:32.707
> 
> 标签：javascript, html, types, fixed, doc

我正在一个必须为菜单使用固定 DIV 的网站上工作。www.atelier2architecten.nl/index2.php

我试图找到一种方法让固定的 div 水平滚动。因为，当 je 缩小浏览器窗口时，您无法单击窗口外的按钮。

我找到了一些 jquery 解决方案。但那些包括动画。我的客户不希望这样。它必须保持固定。

我还在这个网站上找到了一个很好的解决方案但是当我在我的代码中使用 DOC TYPE 时它不起作用。（我的 CSS 需要它）

这是不适用于任何 DOC TYPE 的代码：

```
function hscrollbar() {

var left = 
    /* window.pageXOffset should work for most recent browsers: */
    window.pageXOffset ? window.pageXOffset : 
    /* If it DOESN'T, let's try this: */
    document.documentElement.scrollLeft ? document.documentElement.scrollLeft : 
    /* And if THAT didn't work: */
    document.body.scrollLeft;
/* Now that we have the horizontal scroll position, set #footpanel's left 
   position to NEGATIVE the value, so it APPEARS to follow the scroll: */
document.getElementById('menu').style.left = -left;
}
window.onscroll = hscrollbar; /* Call the function when the user scrolls */
window.onresize = hscrollbar; /* Call the function when the window resizes */ 
```

我希望有人可以帮助我。当我不使用 DOC TYPE 时，它可以在 google chrome 上完美运行。但是 IE 一如既往地是个问题。

问候托拜厄斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T13:23:49.780

你有没有试过这个：

```
$(window).scroll(function () {
   $('#menu').css('left', -($(window).scrollLeft()));
}); 
```

在 FF 和 Chrome 中测试。

PS需要jQuery

# domain-driven-design - 存储库如何适应 CQRS？

> ID：10054590
> 
> 赞同：45
> 
> 时间：2012-04-07T12:43:01.937
> 
> 标签：domain-driven-design, cqrs, ddd-repositories

根据 Fowler（[此处](http://martinfowler.com/eaaCatalog/repository.html)）的说法，存储库“在域和数据映射层之间进行调解，就像内存中的域对象集合一样”。因此，例如，在我的 Courier Service 应用程序中，当提交新的运行时，我的应用程序服务会创建一个新的 Run 聚合根对象，使用请求中的值填充它，然后在调用工作单元保存之前将其添加到 RunRepository对数据库的更改。当用户想要查看当前运行的列表时，我会查询同一个存储库并返回一个表示信息的非规范化 DTO。

但是，在查看 CQRS 时，查询不会访问同一个存储库。相反，它可能会直接违背数据存储并且总是被非规范化。我的命令端将演变为 NewRunCommand 和 Handler，它们将创建和填充 NewRun 域对象，然后将信息保存到数据存储中。

*所以第一个问题是，如果我们不维护域对象的内存中集合（缓存，如果你愿意的话），存储库在哪里适合 CQRS 模型？*

考虑这样一种情况，提交给我的应用程序服务的信息只包含一系列 ID 值，服务必须解析这些 ID 值才能构建域对象。例如，请求包含分配给运行的快递员的 ID #。服务必须根据 ID 值查找实际的 Courier 对象，并使用 AssignCourier 方法（验证 courier 并执行其他业务逻辑）将该对象分配给 NewRun。

*另一个问题是，考虑到查询的分离和存储库的潜在缺失，应用程序服务如何执行查找以找到 Courier 域对象？*

**更新**

根据丹尼斯评论后的一些额外阅读和思考，我将重新表述我的问题。

在我看来，CQRS 鼓励存储库只是数据访问和数据存储机制的门面。它们给出了集合的“外观”（如 Fowler 所描述的），但不管理内存中的实体（如 Dennis 指出的那样）。这意味着存储库上的每个操作都是直通的，是吗？

*工作单元如何适应这种方法？通常，UoW 用于提交对存储库所做的更改（对吗？）但是如果存储库没有维护内存中的实体，那么 UoW 有什么作用？*

*关于“写入”操作，命令处理程序是否会引用相同的存储库、不同的存储库或者可能是 UoW 而不是存储库？*

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-18T00:50:58.203

我读过 CQRS 系统在命令端维护一个简单的键值存储来表示应用程序的状态，以及其他仅关联消息（使用某种 saga）并利用查询存储来表示应用程序状态的系统。无论哪种方式，这些方法无疑都会涉及持久性技术，但在这些情况下，存储库模式将是不必要的抽象。

不过，我在 CQRS 方面的经验只涉及事件溯源，我们重放过去的事件以重建封装并强制执行业务逻辑和不变量的聚合。在这种情况下，存储库模式是一种熟悉的抽象，它可以提供一种更简单的方法来检索这些聚合中的任何一个。

关于查询方面，我建议尽可能靠近数据存储，我的意思是避免您的 UI（无论是什么）和数据存储之间的任何存储库、服务或外观等。

查看这些方法的使用示例可能会有所帮助。也许看看以下项目：

*   [https://github.com/gregoryyoung/mr/tree/master/SimpleCQRS](https://github.com/gregoryyoung/m-r/tree/master/SimpleCQRS)
*   [https://github.com/MarkNijhof/Fohjin](https://github.com/MarkNijhof/Fohjin)
*   [https://github.com/elliotritchie/NES](https://github.com/elliotritchie/NES)
*   [https://github.com/ToJans/Scritchy](https://github.com/ToJans/Scritchy)
*   [http://ncqrs.org](http://ncqrs.org)

在 NES 的情况下，存储库仅提供了一个熟悉的界面，用于直接在工作单元中添加和读取聚合。

更多可能有帮助的链接：

*   [CQRS 示例和截屏视频](https://stackoverflow.com/questions/5043513/cqrs-examples-and-screencasts)
*   [事件采购资源](https://stackoverflow.com/questions/5779351/event-sourcing-resources)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-13T17:57:54.053

我不确定这是多么正统 - 但在当前项目中，我有一个用于聚合实体根的存储库。这个存储库只有两个方法，Get 和 ApplyEvents。

所有事件都为其类型实现了一个通用接口——订单有OrderEvents等。我个人把每个事件的业务逻辑都放到了一个多态方法中，这样添加新类型的事件就变得非常容易了。

对于 Get，存储库转到事件存储，并获取该类型范围内的所有事件（例如，单个存储位置订单）。然后，它对事件进行重播，以针对它给出的所有事件到达实体的当前状态。它也可以从快照中工作，因此您不必在每次加载时都重新创建每个事件。您还可以拥有一个通用事件存储库，甚至可以抽象出您存储事件的方式，并根据规范检索它们。

ApplyEvents 接收一个事件列表，然后根据这些改变实体的状态，并返回它。请注意，您为存储库提供了重新创建实体的选项，而不仅仅是更改它！这适用于函数式编程，但意味着最好在 C# 或 Java 中避免对象相等 (obj1 == obj2)。我认为只有ValueObjects，而不是Entity，无论如何都应该具有平等性。

以下是它在实践中的工作方式 (C#) - 我有订单，我想添加一个项目。currentOrder.Items 返回一个空列表。然后我做

```
Assert.IsFalse(newEvent.Items.Any())
IOrderEvent newEvent = eventFactory.CreateOrderItemEvent(myItemID);
currentOrder = orderRepository.ApplyEvents(currentOrder, newEvent);
Assert.IsTrue(newEvent.Items.Any()) 
```

我现在应该看到 currentOrder.Items 有一个条目。

这里的缺点是我所有的处理都是通过事件完成的，而不是在实体中拥有我的业务逻辑。但是在我的情况下，我的几乎所有对象都需要可序列化（基本上是 POCO）并在多个系统上工作，这实际上效果很好。

# php - 使用jquery刷新动态php div

> ID：10054595
> 
> 赞同：0
> 
> 时间：2012-04-07T12:43:28.650
> 
> 标签：php, jquery, mysql, loading

我使用 php/while 循环将 mysql 结果打印到 div 中。现在我需要在单击任何链接、使用 jquery 插件或代码的按钮后刷新此结果。单击链接后更好的设计，用户看到任何加载消息（请等待）和 jquery/php 打印新结果（刷新 div）。这可能吗？有办法做到这一点吗？

我的 div 是：

```
<a class="click" href="#"> Link TO refresh Div </a>
<div class="messagelist">
<?PHP $result=mysql_query("select * from messages where id<'$lastmsg' order by id desc limit 20");
$count=mysql_num_rows($result);
<div class="commentbox">
while($row=mysql_fetch_assoc($result))
{?>
<li>
<?php echo $row['id'] . ' #' . $row['date'] . ' / ' . $row['comment']; ?>
</li>
<?PHP } ?>
</div>
</div> 
```

**`NOTE : I dont need To Load From Jquery External File Methods . thanks`**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T12:55:31.557

您的脚本无法运行。您正在混合 PHP 和 HTML：

```
$count=mysql_num_rows($result);
<div class="commentbox"> /*THIS IS WRONG*/
while($row=mysql_fetch_assoc($result)) 
```

我认为这就是你想要的：

创建一个仅输出您的列表的新 PHP 文件。称之为，例如，`list.php`。

主文件内容：

```
<a class="click" href="#"> Link TO refresh Div </a>
<div class="messagelist">
<div class="commentbox">
<ul>
<?PHP $result=mysql_query("select * from messages where id<'$lastmsg' order by id desc limit 20");
$count=mysql_num_rows($result);
while($row=mysql_fetch_assoc($result))
{?>
<li>
<?php echo $row['id'] . ' #' . $row['date'] . ' / ' . $row['comment']; ?>
</li>
<?PHP } ?>
</ul>
</div>
</div> 
```

内容`list.php`：

```
<?PHP $result=mysql_query("select * from messages where id<'$lastmsg' order by id desc limit 20");
$count=mysql_num_rows($result);
while($row=mysql_fetch_assoc($result))
{?>
<li>
<?php echo $row['id'] . ' #' . $row['date'] . ' / ' . $row['comment']; ?>
</li>
<?PHP } ?> 
```

将此添加到`<head>`主文件的一部分：

```
<script type="text/javascript">
$(function(){
    $('.click').on('click', function(e){
        e.preventDefault();
        $('.messagelist').text('Please wait...');
        $('.messagelist').load('list.php');
    });
});
</script> 
```

加载内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T22:19:11.997

添加一个`onclick`到你的元素：

```
<a onclick="loadPhp();">Reload php function</a> 
```

创建`javascript`函数：

```
function loadPhp(){
    //set a variable for the php function
    var func = <?php yourphpfunction();?>;
    //append the php function results to a div using jquery
    $(element).html(func); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T12:54:22.860

为了做你想做的事，你需要使用 Ajax。

1.创建一个单独的 PHP 文件，其中包含您的 mysql 结果，即下面创建的 html-snippet。

**messages.php**的内容：

```
<?PHP $result=mysql_query("select * from messages where id<'$lastmsg' order by id desc limit 20");
$count=mysql_num_rows($result);
<div class="commentbox">
<ul>
while($row=mysql_fetch_assoc($result))
{?>
<li>
<?php echo $row['id'] . ' #' . $row['date'] . ' / ' . $row['comment']; ?>
</li>
</ul>
</div>
<?PHP } ?> 
```

2.如果你使用 jQuery，[ajax-request](http://api.jquery.com/jQuery.ajax/)非常简单。将以下内容添加到当前页面（否则保持当前页面不变）：

```
$(document).ready(function () {
    $('.click').on('click', function (e) {
        e.preventDefault();
        $('.messagelist').html('Please wait...');
        $.ajax({
            type : 'GET',
            url : 'messages.php',
            dataType : 'html',
            success : function (response) {
                $('.messagelist').html(response);    
            }
        });
    });
}); 
```

我没有测试上面的代码，但它应该可以工作。

# ruby - 使用 has_secure_password 时如何让用户确认其当前密码？

> ID：10054601
> 
> 赞同：1
> 
> 时间：2012-04-07T12:44:10.203
> 
> 标签：ruby, ruby-on-rails-3, passwords

我希望用户成功确认他们当前的密码以更改他们的密码。我最初在控制器#update 上有一些东西，但似乎向虚拟属性添加错误不会使实例无效，因为没有阻止保存。

我正在使用 has_secure_password。我现在已经切换到模型中的验证，但是下面的代码总是无法验证，因为身份验证返回 false。我在控制台中做了一些测试，发现如果我这样做了

```
user = User.first
user.current_password = 'thecurrentpassword'
user.password = 'thenewpassword'
user.valid?  => false
user.authenticate('thecurrentpassword') => false
user.authenticate('thenewpassword') => true ... before saving 
```

所以似乎 password_digest 在分配新密码而不是保存时被重置？如果他们的 current_password 在模型层或控制器层错误，我该如何解决这个问题并简单地阻止记录保存？

```
validate  :validate_current_password, if: Proc.new{ |u| u.persisted? and u.password.present? }

  def validate_current_password
    unless authenticate(current_password)
      errors.add(:current_password, 'invalid password')
    end
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T13:13:02.253

您可以添加一个类方法，如下所示：

```
class User
  def self.authenticate(email, password)
    find_by_email(email).try(:authenticate, password)
  end
end 
```

现在任何控制器都可以查明给定的电子邮件 + 密码组合是否是有效用户。

# python - 带有 Python 的 Google 文档 API

> ID：10054604
> 
> 赞同：5
> 
> 时间：2012-04-07T12:44:28.793
> 
> 标签：python, gdata-api, google-docs-api

使用 Google Document API，我正在尝试创建新文档，并在我的 Google Documents 的特定文件夹中提供所有当前文档的列表。我从 python 开发开始，所以我还是有点粗糙。

我想做的事情：

1.  仅当名称尚不存在时才创建名称为 [文件夹名称] 的集合（或文件夹）
2.  在 [文件夹名称] 中创建一个文档
3.  仅从 [Folder Name] 获取文档列表以及指向文档本身的链接

我相信我正在使用 Google Docs API 3.0 并且正在为 python 使用**gdata-2.0.16**助手。

到目前为止的代码：

```
    导入 gdata.docs.data
    导入 gdata.docs.client

    类 SampleConfig（对象）：
        APP_NAME = 'GDataDocumentsListAPISample-v1.0'
        调试 = 假

    客户端 = gdata.docs.client.DocsClient()
    client.ClientLogin('[email_address]','[password]',source=SampleConfig.APP_NAME )

    col = gdata.docs.data.Resource(type='文件夹', title='文件夹名称')
    col = client.CreateResource(col)

    doc = gdata.docs.data.Resource(type='document', title='我做了这个')
    doc = client.CreateResource(doc, collection=col)

```

所以现在开始讨论问题：我陷入绝望的地方：

1.  如何检查 [文件夹名称] 是否存在？
2.  如何检索仅 [文件夹名称] 的内容？
3.  如何获取我在此文件夹中创建的所有文档的绝对链接？

我知道我离完成这里还很遥远，但是您可以提供的任何帮助或建议都会很棒。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T13:21:00.773

[您可以查询文件夹或文档](https://developers.google.com/google-apps/documents-list/#searching_for_documents_and_files)。拥有文件夹后，您可以列出其内容。以下是 Python 库的示例：

```
# Create a query matching exactly a title, and include collections
q = gdata.docs.client.DocsQuery(
    title='EFD',
    title_exact='true',
    show_collections='true'
)

# Execute the query and get the first entry (if there are name clashes with
# other folders or files, you will have to handle this).
folder = client.GetResources(q=q).entry[0]

# Get the resources in the folder
contents = client.GetResources(uri=folder.content.src)

# Print out the title and the absolute link
for entry in contents.entry:
    print entry.title.text, entry.GetSelfLink().href 
```

输出

```
My posted doc https://docs.google.com/...
subtestcoll2 https://docs.google.com/...
guestimates_1 https://docs.google.com/...
phase 2 delivery plan - draft https://docs.google.com/...
Meeting agenda June 09 https://docs.google.com/...
Phase 2 spec for Graeme 2 March 2009 https://docs.google.com/...
EFD Meeting 2nd June https://docs.google.com/... 
```

# jsf-2 - 无需轮询或捎带将服务器端更新发送到浏览器

> ID：10054609
> 
> 赞同：1
> 
> 时间：2012-04-07T12:45:09.307
> 
> 标签：jsf-2, jboss, comet, server-push

我正在尝试在没有客户端（浏览器）请求更新的情况下将数据从服务器推送到客户端。

我的应用程序基于 JBoss 服务器上的 JSF2.0（带有 JSP）和 RF3.3。

我已经通过许多链接来尝试了解如何实现它。长轮询、捎带、服务器端轮询等术语我都理解。

我想它可以使用带有大气的 COMET 来完成（我认为它不适用于 JBoss），但我不确定。主要问题是我几乎想不出一个起点，因为我没有在网上获得任何类型的代码教程或演示代码。

此外，起点本身并不是很清楚，我应该从哪里开始，以及在实现所需功能的过程中我需要什么。

谁能指导我这个问题。我对这个话题很迷茫。

一般用例场景是用户正在浏览我的应用程序中的某个网页，突然我需要在页面上发出通知或更新一个值，而无需用户发出相同的请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:31:50.347

如果您愿意使用 RF 4.0.X，有一个示例说明如何使用 ajax 推送。你可以在这里找到一个例子

```
http://anonsvn.jboss.org/repos/richfaces/branches/4.0.0.CR1/examples/push-demo/src/main/webapp/chat.xhtml
http://anonsvn.jboss.org/repos/richfaces/branches/4.0.0.CR1/examples/ 
```

如果您必须坚持使用 RF 3.3，您可以在此处找到相关示例作为起点

```
http://anonsvn.jboss.org/repos/richfaces/branches/community/3.3.X/samples/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T20:38:30.407

RF4.2 确实使这变得非常简单，但我发现如果您不想要 RichFaces，通过 jQuery 轮询一个特殊的 servlet 也同样有效。

```
// Javascript part
jQuery.ajax({
    url : "/poll?sessionKey=" + sessionKey,
    dataType : "text",
    success : function(data) {
        // ... Do your thing to depending on the contents of data.
    },
    error : function(xhr, ajaxOptions, thrownError) {
        // ... Oops, something went wrong.
    }
});

// Server part
@WebServlet(urlPatterns = "/poll")
public class pollServlet implements Servlet {
} 
```

轮询非常便宜，您可以每隔几秒钟进行一次，而不会产生太大影响。另一个好处是您可以监控浏览器窗口是否仍然打开。

# android - 由于不同行中的数据导致json解析错误

> ID：10054610
> 
> 赞同：-1
> 
> 时间：2012-04-07T12:45:24.760
> 
> 标签：android

现在我正在做一个Android应用程序。现在我在json解析中遇到了一个问题。我的json页面结构是这样的。

```
[
{

"id":3,

"name":"dd"

},

{

"id":4,

"name":"ggg"

}

] 
```

我尝试使用以下代码。

```
URL website = new URL("url");
InputStream in = website.openStream();
BufferedReader reader = new BufferedReader(new InputStreamReader(in));
while ((line = reader.readLine()) != null) {
JSONArray ary=new JSONArray(line);
} 
```

但是我遇到了异常。因为所有数据都在不同的行中。如果它在同一行中 [{"id":3,"name":"dd"},{"id":4,"name":" ggg"}] 然后我可以轻松完成...但是他们在单独的行中提供所有数据..这就是问题..请帮助我的朋友

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T06:20:26.187

Finaly I got..

```
 public void parseMovie(InputStream json) throws Exception {
        BufferedReader reader = new BufferedReader(new InputStreamReader(json));
        StringBuilder sb = new StringBuilder();
        String line = reader.readLine();
        while (line != null) {
            sb.append(line);
            line = reader.readLine();
        }
        reader.close();
        JSONArray jsonReply = new JSONArray(sb.toString()); 

        System.out.println("length is"+jsonReply.length());
        ArrayList<String> id=new ArrayList<String>();
        for (int i = 0; i < jsonReply.length(); i++) {
            JSONObject jsonMovie = jsonReply.getJSONObject(0); 

            id.add(jsonMovie.getString("id"));

        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T13:08:01.043

尝试这个。

```
StringBuilder builder = new StringBuilder();
            HttpClient client = new DefaultHttpClient();

            HttpGet httpGet = new HttpGet("url");
            try {
                HttpResponse response = client.execute(httpGet);
                StatusLine statusLine = response.getStatusLine();
                int statusCode = statusLine.getStatusCode();
                if (statusCode == 200) {
                    HttpEntity entity = response.getEntity();
                    InputStream content = entity.getContent();
                    BufferedReader reader = new BufferedReader(
                            new InputStreamReader(content));
                    String line;
                    while ((line = reader.readLine()) != null) {
                        builder.append(line);
                    }
                } else {
                    Log.v("in else", "Failed to download file");
                }
            } catch (ClientProtocolException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            Log.v("Builder >>", builder.toString());
    String response=builder.toString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T12:47:04.947

首先获取整个数据，然后解析它：

```
StringBuilder sb = new StringBuilder();
while ((line = reader.readLine()) != null) {
    sb.append(line);
}
JSONArray ary=new JSONArray(sb.toString()); 
```

# git - 如何将新的（重写的）历史推送到远程存储库

> ID：10054611
> 
> 赞同：48
> 
> 时间：2012-04-07T12:45:27.167
> 
> 标签：git, github

基本上，我有一个要修复的开放拉取请求，同时我想将包含 2 个功能的 1 个提交放入 2 个单独的提交中。

Github 存储库现在看起来像这样，其中 fix 是一个新分支：

```
master c-c-c
            \
     fix c-c-c-c 
```

我从修复创建了一个拉取请求。

我想将 fix 中的最后一次提交更改为本地存储库中的 2 个提交，如下所示：

```
master c-c-c
            \
     fix c-c-c-n-n 
```

其中 nn 是我的 2 个新提交。

为了在本地达到这一点，我这样做了：

```
1\. git rebase -i HEAD~2
2\. Changed my last commit line to "edit", saved and closed the file
3\. git reset HEAD^
4\. git stash save
5\. Removed the changes I don't want in the first commit
6\. git commit -m "commit a" -a
7\. git stash apply
8\. git commit -m "commit b" 
```

所以现在我按照我想要的方式进行了 2 次提交。问题是我发现了一个最终出现在拉取请求中的错误。由于我已经推送到远程存储库，它不会接受我的新提交（因为现在缺少原始提交）。

我跑：

```
git push origin fix --dry-run 
```

我得到消息：

```
To git@github.com:<UserName>/<Repository>.git
! [rejected]        fix -> fix (non-fast-forward)
error: failed to push some refs to 'git@github.com:<UserName>/<Repository>.git' 
```

我已经看到其他帖子建议在再次推回之前将我的更改从原点拉出，但这不会基本上将我的 2 个提交重置为一个吗？

理想情况下，我想做的是将相同的提交 ID 分配给最后一次提交，以便它可以按原样替换当前的提交 ID。有没有办法做到这一点？（请注意，我没有`git reset`运行`--hard`）

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-04-07T13:07:11.973

当面对这个问题时，强制推动对我有用：

```
git push --force origin fix 
```

# c++ - C++：使用用户定义的泛型函数

> ID：10054613
> 
> 赞同：0
> 
> 时间：2012-04-07T12:46:28.767
> 
> 标签：c++, generics, stl, iterator, generic-programming

我现在正在阅读《C++ 标准库》。我在第 5.7 章中发现了一些困惑。众所周知，我们可以编写自己的函数和算法来处理集合的元素。当然这些操作也可能是通用的。让我们看一个例子。下面的代码定义了一个通用函数，它打印一个可选字符串，后跟传递容器的所有元素。

```
template <class T>
inline void PRINT_ELEMENTS(const T& col1,const char *optcstr = "")
{
    typename T::const_iterator pos;
    for(pos = col1.begin();pos != col1.end();++pos)
        cout << *pos << " ";
    cout << endl;
} 
```

并且 pos 被声明为具有传递的容器类型的迭代器类型，***需要******typyname***来指定 const_iterator 是一个类型而不是 T 类型的值。

 *我有几个问题：

（1）当我擦除代码中的***typename***时，它工作得很好。请参见以下代码：

```
#include <iostream>
#include <vector>
#include <set>
#include <algorithm>

using namespace std;

int square (int value)
{
    return value*value;
}

template <class T>
inline void PRINT_ELEMENTS(const T& col1,const char *optcstr = "")
{
    /*typename T::const_iterator pos;*/
    T::const_iterator pos;

    for(pos = col1.begin();pos != col1.end();++pos)
        cout << *pos << " ";
    cout << endl;
}

int main()
{
    set<int>    coll1;
    vector<int> coll2;

    // insert elements from 1 to 9 into coll1
    for (int i=1; i<=9; ++i) {
        coll1.insert(i);
    }
    /*PRINT_ELEMENTS(coll1,"initialized: ");*/

    // transform each element from coll1 to coll2
    // - square transformed values
    transform (coll1.begin(),coll1.end(),    // source
                    back_inserter(coll2),    // destination
                    square);                      // operation

    PRINT_ELEMENTS(coll2,"squared:     ");
} 
```

它运作良好。它的输出是： ![在此处输入图像描述](../Images/2f276b37e665daf91457b8e9903c0337.png)

为什么？不需要***typename吗？***而且我不太了解它在这里的作用。有人能给我解释一下吗？

（2） 为什么我不能使用vector::iterator来输出这样的元素：

```
#include <iostream>
#include <set>
#include <vector>
#include <algorithm>
using namespace std;

int main()
{
    set<int> intSet;
    vector<int> intVector2;

    for (int i = 1;i <= 10;++i)
        intSet.insert(i);

    transform(intSet.begin(),intSet.begin(),
        back_inserter(intVector2),
        negate<int>());

    vector<int>::iterator iter = intVector2.begin();
    for(;iter != intVector2.end();++iter)
        cout << *iter << endl;
} 
```

它什么也不输出。我使用 Visual Studio 2008 运行我的代码。有人可以帮助我吗？非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T13:03:58.483

`typename`没有必要，因为某些版本的 Visual Studio 不符合标准。较新的版本和其他编译器对此更加严格，如果没有它，您的代码将无法在那里编译。

您的第二个示例不起作用，因为您通过了`begin()`and `begin()`，而不是`begin()`and `end()`。

```
transform(intSet.begin(),intSet.begin(), 
```

哎呀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T13:00:06.363

(1)

typename 有助于在某些情况下将其操作数作为类型消除歧义。

最突出的似乎是在类声明的范围内：

```
class X
{
    ...
    typename Y::Z w; // necessary
}; 
```

(2)

有错别字...

```
-    transform(intSet.begin(),intSet.begin(),
    back_inserter(intVector2),
    negate<int>());

+    transform(intSet.begin(),intSet.end(),
    back_inserter(intVector2),
    negate<int>()); 
```*

# jquery - jQuery setInterval Internet Explorer 8

> ID：10054615
> 
> 赞同：0
> 
> 时间：2012-04-07T12:46:50.970
> 
> 标签：jquery, internet-explorer-8, setinterval

我在 Internet Explorer 8 中遇到了 jQuery setInterval 函数的问题。我有一个脚本可以阻止动画被触发，直到上一个动画完成。它在 Chrome、Firefox 和 IE 9 中也能正常工作，但在 IE 8 中第二个动画无法启动。我也确信问题出在间隔上，因为没有它，工作正常。请参阅下面的代码：

```
 $('#name').animate({top: "325"}, 2000);
 $('#line').animate({width: "525"}, 2000);
 var wait = setInterval(function() {
    if( !$("#line, #name").is(":animated") ) {
       clearInterval(wait);
       $('#photo').fadeIn(2500);
       $('#enter').show(3000);
    }
 }, 0); 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T15:11:07.303

我建议对 .animate 方法使用回调

```
function showItems () {
   $('#photo').fadeIn(2500);
   $('#enter').show(3000);
}
$('#line').animate({width: "525"}, 2000, showItems); 
```

似乎问题不在于 .animate() 方法和动画。在 IE8 中，我根本看不到“Enter”链接。所以它与你的标记有关。尝试制作一个有效的 XHTML。

# c++ - 正确包括在 opencv 2.3 中使用新的 C++ API

> ID：10054616
> 
> 赞同：1
> 
> 时间：2012-04-07T12:46:51.087
> 
> 标签：c++, qt, opencv, include

我对旧的opencv 1很熟悉，并且长期使用它的C函数。但是，我在切换到 opencv 2.3 的 C++ API 时遇到问题

我下载了最新的稳定版本（2.3.1），但其中的示例使用旧的 C 函数或包含`"opencv2/highgui/highgui.hpp"`.

问题是，我的**目录中****唯一的文件`include/opencv2``opencv.hpp`**是. 如果我包括在内，则有很多不正确的路径。里面`opencv.hpp`有这样的东西：

```
#include "opencv2/core/core_c.h"
#include "opencv2/core/core.hpp"
#include "opencv2/flann/miniflann.hpp"
#include "opencv2/imgproc/imgproc_c.h" 
```

等等

但是，在我的 opencv 目录中，包含文件位于以下文件夹中：

```
modules/core/include/opencv2/core
modules/flann/include/opencv2/flann
modules/imgproc/include/opencv2/imgproc 
```

等等

那么，`opencv.hpp`如果我必须为每个标头手动指定包含路径，那有什么意义呢？在 opencv 网站 (http://opencv.willowgarage.com) 上，教程要么已经过时，要么根本没有解决这个问题，而是直接跳到算法上。

**编辑：**如果这很重要，我正在使用 Qt。[我从http://code.opencv.org/svn/opencv/branches/2.3/](http://code.opencv.org/svn/opencv/branches/2.3/)下载了源代码并成功构建了它。

**Edit2：**是的，这很重要。缺少一个 Qt 头文件，因此 opencv 的构建过程跳过了一些库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T12:50:12.807

我没有使用 opencv 2.3.1 太久了，但到目前为止，使用 include from`opencv`已经足够了

```
#include <opencv/cv.h>
#include <opencv/highgui.h> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T13:00:15.020

我最近开始学习 opencv (2.3)，正如 juanchopanza 所提到的，这应该足够了。我正在使用 osx 并安装了 opencv 1.0，所以我机器上的基本程序如下所示：

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>

using namespace cv;

int main()
{
    namedWindow("HelloCV2");
    imshow("image",imread("../HelloCV2/dolphin_1.jpg"));
    waitKey(5000);
    return 1;
} 
```

确保您的路径设置正确。目前我正在使用 Qt，所以 .pro 文件如下所示：

```
QT       += core

QT       -= gui

TARGET = HelloCV2
CONFIG   += console
CONFIG   -= app_bundle

TEMPLATE = app

SOURCES += main.cpp

INCLUDEPATH += /opt/local/include/ #this is where the header files are on my machine
LIBS += /opt/local/lib/libopencv_core.2.3.1.dylib
LIBS += /opt/local/lib/libopencv_highgui.2.3.1.dylib 
```

高温高压

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T15:08:13.060

我想我找到了问题所在。我拥有的 Qt 源（4.6.3）没有`qconfig.h`in `corelib/global`，所以当我构建时`opencv`，并不是所有的库都被创建，并且头文件没有被复制。

只是为了让其他有同样问题的人知道它，而不是浪费时间寻找解决方案：`qtconfig.h`不包含在 Qt 源代码分发中。您必须自己创建该文件，其目录中有许多模板，或者重命名其中一个（`qconfig-large`、`qconfig-minimal`等），或者只是创建一个空的`qconfig.h`.

编辑：我不向任何人推荐这种方式。我下载创建了一个mingw make，重新下载了所有内容，它现在可以工作了。我必须注意我构建的 opencv 的 mingw 版本与 Qt 使用的版本相同。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-23T04:58:53.153

诀窍是构建“安装”项目。这会将所有标题等收集到一个目录中，并将启用示例显示的包含结构。

```
# create a build-directory, run cmake etc.
make
make install 
```

# expressionengine - 表达式引擎 - 为什么“包含”不显示在 Segment_3 + 模板上？

> ID：10054618
> 
> 赞同：0
> 
> 时间：2012-04-07T12:46:53.510
> 
> 标签：expressionengine

我正在一个大多数模板都是segment_1 或segment_2 级别的网站上工作。在这些页脚内容（这是一个包含文件）上正确显示。

示例：http: [//yogahealthfoundation.org/get_involved/studios_and_teachers](http://yogahealthfoundation.org/get_involved/studios_and_teachers)

但是，在 segment_3 页面上，相同的内容无法正确显示。

示例：http: [//yogahealthfoundation.org/blog/entry/must_read_for_every_yogi](http://yogahealthfoundation.org/blog/entry/must_read_for_every_yogi)

这是html：

```
<div id="footer">
<div id="footer-buffer"></div>
<div id="footer-content">
{exp:channel:entries channel="misc" url_title="copyright_notice" }
<p>Copyright © 2007&ndash;{current_time format="%Y"} by {details}</p>
{/exp:channel:entries}
</div><!-- end footer-content -->
</div><!-- end footer -->
</body> 
```

以下是我如何将其包含在 EE 标签中：

```
{embed="includes/html_footer"} 
```

无论如何，嵌入都是在所有段中完成的。为什么内容在 segement_3 + 模板页面上无法正确显示的任何线索？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T19:43:40.850

您的页脚 Channel Entries 标签看到了第三个片段（EE 通常认为它代表条目 ID 或 URL 标题），并且正在寻找“misc”频道中的条目，其 URL 标题是什么`{segment_3}`。

解决方案是添加`dynamic="no"`到您的页脚 Channel Entries 标签，使其完全忽略 URL 段触发的任何过滤。

# json - 已验证播放请求的 parse.json

> ID：10054619
> 
> 赞同：6
> 
> 时间：2012-04-07T12:46:54.657
> 
> 标签：json, scala, authentication, playframework, playframework-2.0

我已经在我的应用程序中设置了这样的身份验证，当提供用户名并且 API 密钥为 123 时始终允许：

```
object Auth  {
    def IsAuthenticated(block: => String => Request[AnyContent] => Result) = {
      Security.Authenticated(RetrieveUser, HandleUnauthorized) { user =>
        Action { request =>
          block(user)(request)
        }
      }
    }

    def RetrieveUser(request: RequestHeader) = {

      val auth = new String(base64Decode(request.headers.get("AUTHORIZATION").get.replaceFirst("Basic", "")))
      val split  = auth.split(":")
      val user = split(0)
      val pass = split(1)
      Option(user)
    }

    def HandleUnauthorized(request: RequestHeader) = {
      Results.Forbidden
    }

    def APIKey(apiKey: String)(f: => String => Request[AnyContent] => Result) = IsAuthenticated { user => request =>

      if(apiKey == "123")
        f(user)(request)
      else
        Results.Forbidden
    }

} 
```

然后，我想在我的控制器（在本例中为 testOut）中定义一个方法，该方法仅将请求用作 application/json。现在，在我添加身份验证之前，我会说“def testOut = Action(parse.json) {...}”，但是现在我正在使用身份验证，如何将 parse.json 添加到混合中并制作这个工作？

```
 def testOut = Auth.APIKey("123") { username => implicit request =>

    var props:Map[String, JsValue] = Map[String, JsValue]()
    request.body  match {
      case JsObject(fields) => { props = fields.toMap }
      case _ => {} // Ok("received something else: " + request.body + '\n')
    }

    if(!props.contains("UUID"))
      props.+("UUID" -> UniqueIdGenerator.uuid)

    if (!props.contains("entity"))
      props.+("entity" -> "unset")

    props.+("username" -> username)

    Ok(props.toString)
  } 
```

作为一个额外的问题，为什么只有 UUID 添加到道具映射中，而不是实体和用户名？

对不起菜鸟因素，我正在尝试同时学习 Scala 和 Play。:-)

干杯

尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T11:27:19.990

事实证明，我根本不需要使用 bodyparser，request.body 有一个我可以使用的 asJson 函数。所以我利用它来做以下事情。这项工作，我可以继续我的工作，但我仍然不太明白如何在这里获取 JSON 正文解析器。学习中…… ;-)

```
def testOut = Auth.APIKey("123") { username => request =>

  var props:Map[String, JsValue] = Map[String, JsValue]()
  request.body.asJson  match {
    case None => {}
    case Some(x) => {
      x match {
        case JsObject(fields) => { props = fields.toMap }
        case _ => {} // Ok("received something else: " + request.body + '\n')
      }
    }
  }

  if(!props.contains("UUID"))
    props += "UUID" -> toJson(UniqueIdGenerator.uuid)

  if(!props.contains("entity"))
    props += "entity" -> toJson("unset")

  props += "should" -> toJson("appear")
  props += "username" -> toJson(username)

  Ok(props.toString)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T13:45:04.953

在这里查看我对这个问题的回答：[Play 2.0 Framework, using a BodyParser with a authenticated request](https://stackoverflow.com/questions/11104005/play-2-0-framework-using-a-bodyparser-with-an-authenticated-request)

要点是我重载了 IsAuthenticated 方法以`BodyParser`作为参数并`Action`用它调用。

# android - 将 USB 摄像头中的位图和视频读取到 Android 4.0 设备上？

> ID：10054622
> 
> 赞同：1
> 
> 时间：2012-04-07T12:47:41.743
> 
> 标签：android

Android 库中是否支持执行此操作？如果有，在哪里？如果没有，你能指出攻击这个问题的库或项目吗？

我可以看到在最近的 Android 版本中支持专门支持 Android USB 协议的 USB 设备，但我看不到任何提及是否可以像键盘或鼠标一样简单地插入和使用相机。 [http://developer.android.com/guide/topics/usb/index.html](http://developer.android.com/guide/topics/usb/index.html)

# image - 带有图像的 RESTful GET

> ID：10054628
> 
> 赞同：4
> 
> 时间：2012-04-07T12:48:31.560
> 
> 标签：image, rest

我有一个 REST API，并且我正在添加一个新功能，该功能允许用户`GET`根据他们提供的条形码图像从资源中获取一些信息。

我的问题是：**就最佳实践而言，这样做的正确方法是什么？**

以下是我对这个问题的一些想法。

**得到：**

使用`GET`，我通常会像这样在 URI 中指定标准：`foo?name=bar`，但是以相同的方式传递图像数据很可能会由于长度而失败（[查看这个](https://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url#answer-417184)）。

根据[这些答案](https://stackoverflow.com/questions/978061/http-get-with-request-body)，在正文而不是 URI 中传递数据似乎也不是一个好的解决方案。

**邮政：**

但是，我可以使用`POST`请求，但这不是很 RESTful，因为我只是在检索信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T14:30:39.550

您的资源将做两件事

1.  分析条形码图像并获取一些 id
2.  使用上面的 id 向从某些（数据）源检索的客户端提供信息

您可以将分析条形码图像建模为资源**BarCodes**。**该资源接受带有通过POST**提交的图像的请求，分析条形码图像 (1) 并在**位置**标头中返回一个 URL，该 URL 可用于检索一些数据 (2)。

这种方法将您想要在两个资源/步骤中实现的两个功能分开。

您可以通过这种方法获得：

*   符合 REST 的接口
*   您可以决定异步处理条形码图像提取任务，并在位置标头中仅返回一个 URL 以检索有关条形码提取过程的状态
*   条码分析和信息检索功能分离

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T13:30:10.617

首先，将图像（文件）数据从浏览器传递到 Web 服务器的唯一方法是通过 POST 请求。在寻找最佳解决方案时请注意这一点。

其次，RESTful 资源模型的含义是资源具有非常短的字符串或数字的标识符，并且由服务器在创建时*分配*以供客户端以后使用。

您的问题不适合 REST 模型。所以你很清楚可以继续使用任何在实践中有效的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T13:11:47.167

在 RESTful 服务上，资源使用一组固定的操作进行操作：

```
PUT : creates a new resource, which can be then deleted using DELETE
GET : retrieves the current state of a resource
POST: transfers a new state onto a resource 
```

在您的情况下，您应该寻找**GET**操作。具有大量输入数据的请求无法在 URI 中编码的问题（即错误 414：URO 太长））只有当您必须在 URI 中传递长参数时才会出现问题，这是 REST 的一个限制，用于检索这不是问题，我尝试了一个 REST 服务，该服务返回一组 XML 文件。

# google-maps - 俄罗斯的 Google Places Api 地铁和火车站搜索停止工作

> ID：10054629
> 
> 赞同：0
> 
> 时间：2012-04-07T12:48:34.430
> 
> 标签：google-maps, google-places-api

直到今天，以下查询： [https ://maps.googleapis.com/maps/api/place/search/json?language=ru&location=55.739216,37.547965&radius=1000&sensor=false&types=subway_station|train_station&key=xxxxxxxx](https://maps.googleapis.com/maps/api/place/search/json?language=ru&location=55.739216,37.547965&radius=1000&sensor=false&types=subway_station|train_station&key=xxxxxxxx)

结果是在莫斯科的 'Студенческая‎'，'Studencheskaya' 地铁站。

今天：ZERO_RESULTS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T04:09:57.993

此问题已在此处的 Google Places API 问题跟踪器上报告：[http ://code.google.com/p/gmaps-api-issues/issues/detail?id=4061](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4061)

请单击“星号”图标以获取有关未来更改的通知，并让我们知道您有兴趣看到它得到解决。

# jquery - AJAX 在页面上持续加载，但过滤器也适用于尚未加载的项目

> ID：10054631
> 
> 赞同：0
> 
> 时间：2012-04-07T12:48:52.377
> 
> 标签：jquery, ajax, fade, jquery-load

恐怕不是最清晰的标题。

我的网站有一个搜索页面，它最初会加载任何查询的前 6 个结果，然后再加载 6 个，直到屏幕已满或用户向下滚动。

在页面顶部，我尝试添加一些过滤器，其中包括淡出任何缺货项目结果。

因此，后面的代码将“outOfStock”类添加到缺货产品的任何项目容器中。然后非常简单的 jQuery 可以淡出这些并切换按钮文本：

```
 $('#inStockOnly').click(function () {
        var buttonText = $(this).html();
        $('.outOfStock').fadeOut('slow');
        $(this).html(buttonText == "Show All Items" ? "In Stock Only" : "Show All Items");
    }); 
```

这很好，当然它只对已显示的项目执行此操作，因此当用户向下滚动页面时，AJAX 会加载更多结果，但此过滤器不适用于这些结果。

当然，再次按下按钮然后在一半项目上错误地切换淡入淡出！

我已经尝试添加`$('.outOfStock').css('display','none')`到 AJAX 成功函数的返回，但这似乎不起作用，即使它起作用了，它仍然会在加载时显示结果，然后立即隐藏它们，这不是我的结果把目标放在。

`display:none`如果之前单击过元素`inStockOnly`（或者如果它有文本`Show All Items`），我将如何强制未加载的项目加载的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T14:01:54.970

加载资源时能否传递按钮的选中或未选中值？那么您只能返回那些具有适当状态的项目。

显然，不利的一面是当用户改变主意并以另一种方式切换按钮时，它们不会出现在标记中。此时，您可以对缺货商品提出另一轮请求。

当返回结果时，您似乎也应该能够在成功函数中按您希望的方式处理它。即，在通过 AJAX 显示这些项目的过程中，仅找出“库存项目”的用户选中或未选中状态的最新状态。这可能意味着您需要创建一个隐藏元素来跟踪他们最近请求的任何内容。

或许像这样：

```
$.ajax({
   url: url,
   data: data,
   success: function(data) {
       // Load all the values onto the page however you were already doing
       if ($("#hiddenElement").attr("showHidden") == "true") {
           $('.outOfStock').hide();
       }
   }
 }); 
```

然后，您需要在 $('#inStockOnly').click 函数中填充该隐藏值。

```
// toggle hidden element
($("#hiddenElement").attr("showHidden") == "true" ? $("#hiddenElement").attr("showHidden","false") : $("#hiddenElement").attr("showHidden","true")); 
```

# php - 使用 PHP 将数组插入 MySQL 数据库

> ID：10054633
> 
> 赞同：44
> 
> 时间：2012-04-07T12:49:10.487
> 
> 标签：php, mysql, arrays

我有以下数组要存储在我的数据库中...

```
$insData = array(
    'uid' => $fbme['id'],
    'first_name' => $fbme['first_name'],
    'last_name' => $fbme['last_name'],
    'email' => isset($fbme['email']) ? $fbme['email'] : '',
    'link' => $fbme['link'],
    'affiliations' => $networks,
    'birthday' => $info[0]['birthday_date'],
    'current_location' => isset($fbme['location']['name']) ? $fbme['location']['name'] : '',
    'education_history' => $education,
    'work' => $workInfo,
    'hometown_location' => isset($fbme['hometown']['name']) ? $fbme['hometown']['name'] : '',
    'interests' => $info[0]['interests'],
    'locale' => $info[0]['locale'],
    'movies' => $movies,
    'music' => $music,
    'political' => $info[0]['political'],
    'relationship_status' => $info[0]['relationship_status'],
    'sex' =>  isset($fbme['gender']) ? $fbme['gender'] : '',
    'tv' => $television,
    'status' => '0',
    'created' => $now,
    'updated' => $now,
); 
```

我试过在谷歌上搜索如何做到这一点，我所能找到的只是说明我的数组需要拆分的信息，然后再插入表中。这个对吗？抱歉天真，对php很陌生。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-04-07T12:53:34.653

**您不能将数组直接插入*MySQL*，因为*MySQL*不理解*PHP*数据类型。** *MySQL*只理解*SQL*。因此，要将数组插入 MySQL 数据库，您必须将其转换为 SQL 语句。这可以手动完成，也可以由库完成。输出应该是一个`INSERT`语句。

> **PHP7 更新**
> 
> 由于 PHP 5.5`mysql_real_escape_string`已被弃用，并且从 PHP7 开始，它已被**删除**。请参阅：[php.net 关于新程序的文档。](http://php.net/manual/en/mysqli.real-escape-string.php)

* * *

**原答案：**

这是一个标准的 MySQL 插入语句。

```
INSERT INTO TABLE1(COLUMN1, COLUMN2, ....) VALUES (VALUE1, VALUE2..) 
```

如果您*有一个表，其名称`fbdata`中的列显示在数组的键中，您*可以使用这个小片段插入。这是您的数组如何转换为该语句的方式。

```
$columns = implode(", ",array_keys($insData));
$escaped_values = array_map('mysql_real_escape_string', array_values($insData));
$values  = implode(", ", $escaped_values);
$sql = "INSERT INTO `fbdata`($columns) VALUES ($values)"; 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-04-07T13:03:13.520

有许多不同的方法......我会给你一个使用准备好的语句的例子：

```
$prep = array();
foreach($insData as $k => $v ) {
    $prep[':'.$k] = $v;
}
$sth = $db->prepare("INSERT INTO table ( " . implode(', ',array_keys($insData)) . ") VALUES (" . implode(', ',array_keys($prep)) . ")");
$res = $sth->execute($prep); 
```

我在这里作弊，并假设您的第一个数组中的键是 SQL 表中的列名。我还假设您有可用的 PDO。更多信息可以在[http://php.net/manual/en/book.pdo.php找到](http://php.net/manual/en/book.pdo.php)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-12-07T09:18:26.140

这是我根据接受的答案对此的完整解决方案。

使用示例：

```
include("./assets/php/db.php");
$data = array('field1' => 'data1', 'field2'=> 'data2');
insertArr("databaseName.tableName", $data); 
```

## 数据库.php

```
<?PHP
/**
 * Class to initiate a new MySQL connection based on $dbInfo settings found in dbSettings.php
 *
 * @example
 *    $db = new database(); // Initiate a new database connection
 *    mysql_close($db->get_link());
 */
class database{
    protected $databaseLink;
    function __construct(){
        include "dbSettings.php";
        $this->database = $dbInfo['host'];
        $this->mysql_user = $dbInfo['user'];
        $this->mysql_pass = $dbInfo['pass'];
        $this->openConnection();
        return $this->get_link();
    }
    function openConnection(){
    $this->databaseLink = mysql_connect($this->database, $this->mysql_user, $this->mysql_pass);
    }

    function get_link(){
    return $this->databaseLink;
    }
}

/**
 * Insert an associative array into a MySQL database
 *
 * @example
 *    $data = array('field1' => 'data1', 'field2'=> 'data2');
 *    insertArr("databaseName.tableName", $data);
 */
function insertArr($tableName, $insData){
    $db = new database();
    $columns = implode(", ",array_keys($insData));
    $escaped_values = array_map('mysql_real_escape_string', array_values($insData));
    foreach ($escaped_values as $idx=>$data) $escaped_values[$idx] = "'".$data."'";
    $values  = implode(", ", $escaped_values);
    $query = "INSERT INTO $tableName ($columns) VALUES ($values)";
    mysql_query($query) or die(mysql_error());
    mysql_close($db->get_link());
}
?> 
```

## dbSettings.php

```
<?PHP
$dbInfo = array(
    'host'      => "localhost",
    'user'      => "root",
    'pass'      => "password"
);
?> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-07T13:12:10.210

就我个人而言，我会 json_encode 数组（考虑到需要的任何转义等）并将整个批次放入适当大小的文本/blob 字段中。

它使存储“非结构化”数据变得非常容易，但它是一个真正的 PITA，可以轻松搜索/索引。

一个简单的 json_decode 将为您将数据“分解”回一个数组。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-04-07T13:02:38.937

[序列化](http://php.net/manual/fr/function.serialize.php)数组，你的数据库列上会有一个文本，这将解决问题。

我这样做，例如保存对象，这样我就可以轻松地检索它们。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-07-16T03:22:03.090

```
$query = "INSERT INTO table ( " . implode(', ', array_keys($insData)) . ")
    VALUES (" . implode(', ', array_values($insData)) . ")"; 
```

只需编写此行即可将数组插入数据库。

`implode(', ', array_keys($insData))` ：*以字符串格式为您提供所有键*

`implode(', ', array_values($insData))`：*以字符串格式为您提供所有值*

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-04-07T12:54:45.093

你有两种方法：

*   您可以为数组的每个键创建一个表（或多个链接在一起的表），并在每个字段中插入数组的相应值。这是最常见的方式
*   您可以只拥有一个包含一个字段的表格，然后将您的数组[序列化](http://php.net/manual/fr/function.serialize.php)。我不建议您这样做，但如果您不想要复杂的数据库模式，它会很有用。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-08-05T15:08:55.833

```
$columns = implode(", ",array_keys($data));
$escaped_values = array_map(array($con, 'real_escape_string'),array_values($data));
$values  = implode("', '", $escaped_values);
return $sql = "INSERT INTO `reservations`($columns) VALUES ('$values')"; 
```

这是对 Shiplu Mokaddim 给出的解决方案的改进

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-05-15T18:22:08.747

我搜索了同样的问题，但我想将数组存储在一个字段中，而不是将数组添加为元组，因此您可能需要函数 serialize() 和 unserialize()。

看到这个[http://www.wpfasthelp.com/insert-php-array-into-mysql-database-table-row-field.htm](http://www.wpfasthelp.com/insert-php-array-into-mysql-database-table-row-field.htm)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-07-01T06:11:09.887

**将数组数据插入mysql php**

我有数组数据..我想将该数据发布到数据库中

**1：这是我的数组数据：**

```
stdClass Object
(
    [questions] => Array
        (
            [0] => stdClass Object
                (
                    [question_id] => 54
                    [question] => Which%20of%20the%20following%20is%20a%20rational%20number%20(s)%3F%3Cbr%20%2F%3E%0D%0A%3Cbr%20%2F%3E
                    [option_1] => %3Cimg%20align%3D%22middle%22%20%20%20src%3D%22formula%2F54%2F010779c34ce28fee25778247e127b82d.png%22%20alt%3D%22%22%20%2F%3E%3Cspan%20class%3D%22Apple-tab-span%22%20style%3D%22white-space%3A%20pre%3B%20%22%3E%09%3C%2Fspan%3E
                    [option_2] => %26nbsp%3B%3Cimg%20align%3D%22middle%22%20%20%20src%3D%22formula%2F54%2F3af35a16c371ffaaf9ea6891fb732478.png%22%20alt%3D%22%22%20%2F%3E
                    [option_3] => %26nbsp%3B%3Cimg%20align%3D%22middle%22%20%20%20src%3D%22formula%2F54%2F4a57d5766a79f0ddf659d63c7443982b.png%22%20alt%3D%22%22%20%2F%3E
                    [option_4] => %26nbsp%3BAll%20the%20above%26nbsp%3B
                    [iscorrect] => yes
                    [answerGiven] => D
                    [marksobtain] => 2
                    [timetaken] => 3
                    [difficulty_levelval] => 2
                )

   [1] => stdClass Object
                (
                    [question_id] => 58
                    [question] => %3Cdiv%3EIf%20A%20%26nbsp%3B%3A%20Every%20whole%20number%20is%20a%20natural%20number%20and%3C%2Fdiv%3E%0D%0A%3Cdiv%3E%26nbsp%3B%20%26nbsp%3BR%20%3A%200%20is%20not%20a%20natural%20number%2C%3C%2Fdiv%3E%0D%0A%3Cdiv%3EThen%20which%20of%20the%20following%20statement%20is%20true%3F%3C%2Fdiv%3E
                    [option_1] => %26nbsp%3BA%20is%20False%20and%20R%20is%20true.
                    [option_2] => A%20is%20True%20and%20R%20is%20the%20correct%20explanation%20of%20A
                    [option_3] => %26nbsp%3BA%20is%20True%20and%20R%20is%20false
                    [option_4] => %26nbsp%3BBoth%20A%20and%20R%20are%20True
                    [iscorrect] => no
                    [answerGiven] => D
                    [marksobtain] => 0
                    [timetaken] => 2
                    [difficulty_levelval] => 2
                )

        )

) 
```

我用来插入该数据的代码：

代码 ：：

```
<?php 
 //require_once("config_new2012.php");

require("codelibrary/fb/facebook.php");
include("codelibrary/inc/variables.php");
include_once(INC."functions.php");
include_once(CLASSES."frontuser_class.php");
include_once(CLASSES."testdetails_class.php");

$data = file_get_contents('php://input');
$arr_data = explode("=",$data);
$final_data = urldecode($arr_data[1]);
$final_data2 = json_decode($final_data);

 //print_r ($final_data2);

 if(is_array($final_data2)){
echo 'i am in array ';
    $sql = "INSERT INTO p_user_test_details(question_id, question, option_1, option_2, option_3, option_4,iscorrect,answerGiven,marksobtain,timetaken,difficulty_levelval) values ";

    $valuesArr = array();
    foreach($final_data2 as $row){

        $question_id = (int) $row['question_id'];
        $question = mysql_real_escape_string( $row['question'] );
        $option_1 = mysql_real_escape_string( $row['option_1'] );
    $option_2 = mysql_real_escape_string( $row['option_2'] );
    $option_3 = mysql_real_escape_string( $row['option_3'] );
    $option_4 = mysql_real_escape_string( $row['option_4'] );
    $iscorrect = mysql_real_escape_string( $row['iscorrect'] );
    $answerGiven = mysql_real_escape_string( $row['answerGiven'] );
        $marksobtain = mysql_real_escape_string( $row['marksobtain'] );
        $timetaken = mysql_real_escape_string( $row['timetaken'] );
        $difficulty_levelval = mysql_real_escape_string( $row['difficulty_levelval'] );
        $valuesArr[] = "('$question_id', '$question', '$option_1','$option_2','$option_3','$option_4','$iscorrect','$answerGiven','$marksobtain','$timetaken','$difficulty_levelval')";
    }

    $sql .= implode(',', $valuesArr);

    mysql_query($sql) or exit(mysql_error()); 
}
else{

echo 'no one is there ';
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-05-07T04:53:19.347

也许这个问题会很复杂，但它肯定会为你完成这项工作。我创建了两个类来处理数组插入以及查询数据库、更新和删除文件。“MySqliConnection”类用于只创建一个数据库连接实例（防止重复新对象）。

```
 <?php
    /**
     *
     * MySQLi database connection: only one connection is allowed
     */
    class MySqliConnection{
        public static $_instance;
        public $_connection;

        public function __construct($host, $user, $password, $database){
            $this->_connection = new MySQLi($host, $user, $password, $database);
            if (isset($mysqli->connect_error)) {
                echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
                echo $mysqli->host_info . "\n";
            }
        }

        /*
        * Gets instance of connection to database
        * @return (MySqliConnection) Object
        */
        public static function getInstance($host, $user, $password, $database){
            if(!self::$_instance){ 
                self::$_instance = new self($host, $user, $password, $database); //if no instance were created - new one will be initialize
            }
            return self::$_instance; //return already exsiting instance of the database connection
        }

        /*
        * Prevent database connection from bing copied while assignig the object to new wariable
        * @return (MySqliConnection) Object
        */
        public function getConnection(){
            return $this->_connection;
        }

        /*
        * Prevent database connection from bing copied/duplicated while assignig the object to new wariable
        * @return nothing
        */
        function __clone(){

        }
    }

    /*// CLASS USE EXAMPLE 
        $db = MySqliConnection::getInstance('localhost', 'root', '', 'sandbox');
        $mysqli = $db->getConnection();
        $sql_query = 'SELECT * FROM users;
            $this->lastQuery = $sql_query;
            $result = $mysqli->query($sql_query);
        while($row = $result->fetch_array(MYSQLI_ASSOC)){
            echo $row['ID'];
        }

    */ 
```

第二个“TableManager”类稍微复杂一些。它还利用了我在上面发布的 MySqliConnection 类。因此，您必须将它们都包含在您的项目中。TableManager 将允许您轻松进行插入更新和删除。类有单独的占位符用于读取和写入。

```
<?php

/*
* DEPENDENCIES:
* include 'class.MySqliConnection.inc'; //custom class
*
*/

class TableManager{

    private $lastQuery;
    private $lastInsertId;
    private $tableName;
    private $tableIdName;
    private $columnNames = array();
    private $lastResult = array();
    private $curentRow = array();
    private $newPost = array();

    /*
    * Class constructor 
    * [1] (string) $tableName // name of the table which you want to work with
    * [2] (string) $tableIdName // name of the ID field which will be used to delete and update records
    * @return void
    */
    function __construct($tableName, $tableIdName){
        $this->tableIdName = $tableIdName;
        $this->tableName = $tableName;
        $this->getColumnNames();
        $this->curentRow = $this->columnNames;
    }

public function getColumnNames(){
    $sql_query = 'SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE table_name = "'.$this->tableName.'"';
    $mysqli = $this->connection();
    $this->lastQuery = $sql_query;
    $result = $mysqli->query($sql_query);
    if (!$result) {
        throw new Exception("Database Error [{$this->database->errno}] {$this->database->error}");
    }
    while($row = $result->fetch_array(MYSQLI_ASSOC)){           
        $this->columnNames[$row['COLUMN_NAME']] = null;
    }
}

    /*
    * Used by a Constructor to set native parameters or virtual array curentRow of the class
    * [1] (array) $v
    * @return void
    */
    function setRowValues($v){

        if(!is_array($v)){
            $this->curentRow = $v;
            return true;    
        }
        foreach ($v as $a => $b) {
            $method = 'set'.ucfirst($a);
            if(is_callable(array($this, $method))){
                //if method is callable use setSomeFunction($k, $v) to filter the value
                $this->$method($b);
            }else{
                $this->curentRow[$a] = $b;
            }
        }

    }

    /*
    * Used by a constructor to set native parameters or virtual array curentRow of the class
    * [0]
    * @return void
    */
    function __toString(){
        var_dump($this);
    }

    /*
    * Query Database for information - Select column in table where column = somevalue
    * [1] (string) $column_name // name od a column
    * [2] (string) $quote_pos // searched value in a specified column
    * @return void
    */
    public function getRow($column_name = false, $quote_post = false){
        $mysqli = $this->connection();
        $quote_post = $mysqli->real_escape_string($quote_post);
        $this->tableName = $mysqli->real_escape_string($this->tableName);
        $column_name = $mysqli->real_escape_string($column_name);
        if($this->tableName && $column_name && $quote_post){
            $sql_query = 'SELECT * FROM '.$this->tableName.' WHERE '.$column_name.' = "'.$quote_post.'"';
            $this->lastQuery = $sql_query;
            $result = $mysqli->query($sql_query);
            if (!$result) {
                throw new Exception("Database Error [{$this->database->errno}] {$this->database->error}");
            }
            while($row = $result->fetch_array(MYSQLI_ASSOC)){
                $this->lastResult[$row['ID']] = $row;
                $this->setRowValues($row);
            }
        }
        if($this->tableName && $column_name && !$quote_post){
            $sql_query = 'SELECT '.$column_name.' FROM '.$this->tableName.'';
            $this->lastQuery = $sql_query;
            $result = $mysqli->query($sql_query);
            if (!$result) {
                throw new Exception("Database Error [{$this->database->errno}] {$this->database->error}");
            }
            while($row = $result->fetch_array(MYSQLI_ASSOC)){           
                $this->lastResult[] = $row;
                $this->setRowValues($row);
            }       
        }
        if($this->tableName && !$column_name && !$quote_post){
            $sql_query = 'SELECT * FROM '.$this->tableName.'';
            $this->lastQuery = $sql_query;
            $result = $mysqli->query($sql_query);
            if (!$result) {
                throw new Exception("Database Error [{$this->database->errno}] {$this->database->error}");
            }
            while($row = $result->fetch_array(MYSQLI_ASSOC)){           
                $this->lastResult[$row['ID']] = $row;
                $this->setRowValues($row);
            }       
        }
    }

    /*
    * Connection class gets instance of db connection or if not exsist creats one
    * [0]
    * @return $mysqli
    */
    private function connection(){
        $this->lastResult = "";
        $db = MySqliConnection::getInstance('localhost', 'root', '', 'sandbox');
        $mysqli = $db->getConnection();
        return $mysqli;
    }

    /*
    * ...
    * [1] (string) $getMe
    * @return void
    */
    function __get($getMe){
        if(isset($this->curentRow[$getMe])){
            return $this->curentRow[$getMe];
        }else{
            throw new Exception("Error Processing Request - No such a property in (array) $this->curentRow", 1);
        }

    }

    /*
    * ...
    * [2] (string) $setMe, (string) $value
    * @return void
    */
    function __set($setMe, $value){
        $temp = array($setMe=>$value);
        $this->setRowValues($temp);
    }

    /*
    * Dumps the object
    * [0] 
    * @return void
    */
    function dump(){
        echo "<hr>";
        var_dump($this);
        echo "<hr>";
    }

    /*
    * Sets Values for $this->newPost array which will be than inserted by insertNewPost() function
    * [1] (array) $newPost //array of avlue that will be inserted to $this->newPost
    * @return bolean
    */
    public function setNewRow($arr){

        if(!is_array($arr)){
            $this->newPost = $arr;
            return false;   
        }
        foreach ($arr as $k => $v) {
            if(array_key_exists($k, $this->columnNames)){
                $method = 'set'.ucfirst($k);
                if(is_callable(array($this, $method))){
                    if($this->$method($v) == false){ //if something go wrong
                        $this->newPost = array(); //empty the newPost array and return flase
                        throw new Exception("There was a problem in setting up New Post parameters. [Cleaning array]", 1);
                    }
                }else{
                    $this->newPost[$k] = $v;
                }
            }else{
                $this->newPost = array(); //empty the newPost array and return flase
                throw new Exception("The column does not exsist in this table. [Cleaning array]", 1);
            }
        }

    }

    /*
    * Inserts new post held in $this->newPost
    * [0]
    * @return bolean
    */
    public function insertNewRow(){
        // check if is set, is array and is not null
        if(isset($this->newPost) && !is_null($this->newPost) && is_array($this->newPost)){
            $mysqli = $this->connection();
            $count_lenght_of_array = count($this->newPost);

            // preper insert query
            $sql_query = 'INSERT INTO '.$this->tableName.' (';
            $i = 1;
            foreach ($this->newPost as $key => $value) {
                $sql_query .=$key;
                if ($i < $count_lenght_of_array) {
                    $sql_query .=', ';
                }

                $i++;
             } 

            $i = 1;  
            $sql_query .=') VALUES (';
            foreach ($this->newPost as $key => $value) {
                $sql_query .='"'.$value.'"';
                if ($i < $count_lenght_of_array) {
                    $sql_query .=', ';
                }

                $i++;
             }  

            $sql_query .=')';
            var_dump($sql_query);
            if($mysqli->query($sql_query)){
                $this->lastInsertId = $mysqli->insert_id;
                $this->lastQuery = $sql_query;
            }

            $this->getInsertedPost($this->lastInsertId);
        }
    }   

    /*
    * getInsertedPost function query the last inserted id and assigned it to the object.
    * [1] (integer) $id // last inserted id from insertNewRow fucntion
    * @return void
    */
    private function getInsertedPost($id){
        $mysqli = $this->connection();
        $sql_query = 'SELECT * FROM '.$this->tableName.' WHERE '.$this->tableIdName.' = "'.$id.'"';
        $result = $mysqli->query($sql_query);
        while($row = $result->fetch_array(MYSQLI_ASSOC)){
            $this->lastResult[$row['ID']] = $row;
            $this->setRowValues($row);
        }       
    }

    /*
    * getInsertedPost function query the last inserted id and assigned it to the object.
    * [0]
    * @return bolean // if deletion was successful return true
    */
    public function deleteLastInsertedPost(){
        $mysqli = $this->connection();
        $sql_query = 'DELETE FROM '.$this->tableName.' WHERE '.$this->tableIdName.' = '.$this->lastInsertId.'';
        $result = $mysqli->query($sql_query);
        if($result){
            $this->lastResult[$this->lastInsertId] = "deleted";
            return true;
        }else{
            throw new Exception("We could not delete last inserted row by ID [{$mysqli->errno}] {$mysqli->error}");

        }
        var_dump($sql_query);       
    }

    /*
    * deleteRow function delete the row with from a table based on a passed id
    * [1] (integer) $id // id of the table row to be delated
    * @return bolean // if deletion was successful return true
    */
    public function deleteRow($id){
        $mysqli = $this->connection();
        $sql_query = 'DELETE FROM '.$this->tableName.' WHERE '.$this->tableIdName.' = '.$id.'';
        $result = $mysqli->query($sql_query);
        if($result){
            $this->lastResult[$this->lastInsertId] = "deleted";
            return true;
        }else{
            return false;
        }
        var_dump($sql_query);       
    }

    /*
    * deleteAllRows function deletes all rows from a table
    * [0]
    * @return bolean // if deletion was successful return true
    */
    public function deleteAllRows(){
        $mysqli = $this->connection();
        $sql_query = 'DELETE FROM '.$this->tableName.'';
        $result = $mysqli->query($sql_query);
        if($result){
            return true;
        }else{
            return false;
        }       
    }

    /*
    * updateRow function updates all values to object values in a row with id
    * [1] (integer) $id
    * @return bolean // if deletion was successful return true
    */
    public function updateRow($update_where = false){
        $id = $this->curentRow[$this->tableIdName];
        $mysqli = $this->connection();
        $updateMe = $this->curentRow;
        unset($updateMe[$this->tableIdName]);
        $count_lenght_of_array = count($updateMe);
        // preper insert query
        $sql_query = 'UPDATE '.$this->tableName.' SET ';
        $i = 1;
        foreach ($updateMe as $k => $v) {
            $sql_query .= $k.' = "'.$v.'"';
            if ($i < $count_lenght_of_array) {
                $sql_query .=', ';
            }

            $i++;
         }
        if($update_where == false){ 
            //update row only for this object id
            $sql_query .=' WHERE '.$this->tableIdName.' = '.$this->curentRow[$this->tableIdName].'';
        }else{
            //add your custom update where query
            $sql_query .=' WHERE '.$update_where.'';
        }

        var_dump($sql_query);
        if($mysqli->query($sql_query)){
            $this->lastQuery = $sql_query;
        }
        $result = $mysqli->query($sql_query);
        if($result){
            return true;
        }else{
            return false;
        }       
    }

}

/*TO DO

1 insertPost(X, X) write function to isert data and in to database;
2 get better query system and display data from database;
3 write function that displays data of a object not databsae;
object should be precise and alocate only one instance of the post at a time. 
// Updating the Posts to curent object $this->curentRow values
->updatePost();

// Deleting the curent post by ID

// Add new row to database

*/

/*
USE EXAMPLE
$Post = new TableManager("post_table", "ID"); // New Object

// Getting posts from the database based on pased in paramerters
$Post->getRow('post_name', 'SOME POST TITLE WHICH IS IN DATABASE' );
$Post->getRow('post_name');
$Post->getRow();

MAGIC GET will read current object  $this->curentRow parameter values by refering to its key as in a varible name
echo $Post->ID.
echo $Post->post_name;
echo $Post->post_description;
echo $Post->post_author;

$Task = new TableManager("table_name", "table_ID_name"); // creating new TableManager object

$addTask = array( //just an array [colum_name] => [values]
    'task_name' => 'New Post',
    'description' => 'New Description Post',
    'person' => 'New Author',
    );
$Task->setNewRow($addTask); //preper new values for insertion to table
$Task->getRow('ID', '12'); //load value from table to object

$Task->insertNewRow(); //inserts new row
$Task->dump(); //diplays object properities

$Task->person = "John"; //magic __set() method will look for setPerson(x,y) method firs if non found will assign value as it is. 
$Task->description = "John Doe is a funny guy"; //magic __set() again
$Task->task_name = "John chellange"; //magic __set() again

$test = ($Task->updateRow("ID = 5")) ? "WORKS FINE" : "ERROR"; //update cutom row with object values
echo $test;
$test = ($Task->updateRow()) ? "WORKS FINE" : "ERROR"; //update curent data loaded in object
echo $test;
*/ 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-09-20T19:44:09.297

最简单的方法

```
for ($i=0; $i < count($tableData); $i++) { 

        $cost     =$tableData[$i]['cost'];
        $quantity =$tableData[$i]['quantity'];
        $price    =$tableData[$i]['price'];
        $p_id     =$tableData[$i]['p_id'];

        mysqli_query($conn,"INSERT INTO bill_details (bill_id, price, bill_date, p_id, quantity, cost) VALUES ($bill_id[bill_id],$price,$date,$p_id,$quantity,$cost)");
    } 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2015-08-10T07:25:47.650

```
<?php
 function mysqli_insert_array($table, $data, $exclude = array()) {
    $con=  mysqli_connect("localhost", "root","","test");
     $fields = $values = array();
    if( !is_array($exclude) ) $exclude = array($exclude);
    foreach( array_keys($data) as $key ) {
        if( !in_array($key, $exclude) ) {
            $fields[] = "`$key`";
            $values[] = "'" . mysql_real_escape_string($data[$key]) . "'";
        }
    }
    $fields = implode(",", $fields);
    $values = implode(",", $values);
    if( mysqli_query($con,"INSERT INTO `$table` ($fields) VALUES ($values)") ) {
        return array( "mysql_error" => false,
                      "mysql_insert_id" => mysqli_insert_id($con),
                      "mysql_affected_rows" => mysqli_affected_rows($con),
                      "mysql_info" => mysqli_info($con)
                    );
    } else {
        return array( "mysql_error" => mysqli_error($con) );
    }
}

 $a['firstname']="abc";
 $a['last name']="xyz";
 $a['birthdate']="1993-09-12";
 $a['profilepic']="img.jpg";
 $a['gender']="male";
 $a['email']="abc@hightecit.com";
 $a['likechoclate']="Dm";
 $a['status']="1";
$result=mysqli_insert_array('registration',$a,'abc');
if( $result['mysql_error'] ) {
    echo "Query Failed: " . $result['mysql_error'];
} else {
    echo "Query Succeeded! <br />";
    echo "<pre>";
    print_r($result);
    echo "</pre>";
}
?> 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-11-26T06:51:30.027

最简单的转义和插入方法：

```
global $connection;
$columns = implode(", ",array_keys($array_data));
$func = function($value) {
    global $connection;
    return mysqli_real_escape_string($connection, $value);
};
$escaped_values = array_map($func, array_values($array_data));
$values  = implode(", ", $escaped_values);
$result = mysqli_query($connection, "INSERT INTO $table_name ($columns) VALUES ($values)"); 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-07-19T08:20:22.063

```
function insertQuery($tableName,$cols,$values,$connection){
  $numberOfColsAndValues = count($cols);
  $query = 'INSERT INTO '.$tableName.' ('.getColNames($cols,$numberOfColsAndValues).') VALUES ('.getColValues($values,$numberOfColsAndValues).')';
   if(mysqli_query($connection, $query))
      return true;
   else{
      echo "Error: " . $query . "<br>" . mysqli_error($connection);
      return false;
   }
}

function getColNames($cols,$numberOfColsAndValues){
  $result = '';
  foreach($cols as $key => $val){
    $result = $result.$val.', ';
  }
    return substr($result,0,strlen($result)-2);
}

function getColValues($values,$numberOfColsAndValues){
  $result = '';
  foreach($values as $key => $val){
    $val = "'$val'";
    $result = $result.$val.', ';
  }
    return substr($result,0,strlen($result)-2);
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-01-29T09:31:58.040

最近在学习Wordpress，它提供了一个WP_QUERY类来操作数据库。可以在数据库中插入数组或对象。我觉得很神奇，所以我去看看如何实现它。也许，你可以从中得到一些想法。主要功能是：[apply_filters](http://codex.wordpress.org/Function_Reference/apply_filters)。

```
apply_filters( $tag, $value, $key); 
```

您可以忽略第一个参数，将第二个参数视为数组，该函数所做的是将数组清理为字符串。

插入数据库后，您可以看到：

```
key     s:12:"focal_length";s:3:"190";s:3:"iso";s:3:"400";s:13:"shutter_speed";s:6:"0.0004";s:5:"title";s:0:"";}} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2012-04-07T12:57:40.363

让我们不要忘记从这样的问题中学到的最重要的东西：[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)。

使用[PDO](http://php.net/manual/en/book.pdo.php)和[准备好的语句](http://www.php.net/manual/en/pdo.prepared-statements.php)。

单击[此处](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)获取有关 PDO 的教程。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-09-16T11:11:14.100

**我们可以使用 serialized() 方法**

> $serialized_userdata = 序列化($data); $sql = "插入 $tableName (details) 值 ('$serialized_userdata')"; $result = mysqli_query($con, $sql);

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-03-03T07:41:31.200

你们可以试试这个，我在我的系统中使用了这种脚本

```
foreach ($insData as $insData) {
    $insdate = array();

    foreach ($insData as $insData) {
        array_push($arr, $dbname);
    }

    $sql = "INSERT INTO tblname (uid, first_name, last_name,email,link)
        VALUES ('$uid', '$first_name', '$last_name', '$email', '$link')";

    if ($conn->query($sql) === TRUE) {
        echo "Successfully insert into db";
    } else {
        echo "Please try again" . "<br>" . $conn->error;
    }
} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-01-19T13:07:08.913

我认为简单的方法是使用

```
ob_start(); //Start output buffer
print_r($var);
$var = ob_get_contents(); //Grab output
ob_end_clean(); //Discard output buffer 
```

并且您的数组输出将被记录为一个简单的变量

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-04-29T14:28:48.420

```
<html>
    <input type="hidden" name="item_id[]" value="<?php echo $value->item_id; ?>">
    <input type="hidden" name="cart_id[]" value="<?php echo $value->cart_id; ?>">
    <input type="hidden" name="item_price[]" value="<?php echo $TotalItemValue; ?>">
    <input type="hidden" name="order_id[]" value="<?php echo $value->cart_order_id; ?>">
    <input type="hidden" name="commision[]" value="<?php echo number_format($commissionamount); ?>">
</html>

$myarray = array();

foreach ($this->input->post('item_id') as $key => $val) {
    $myarray = [
        'item_id' => $val,
        'order_id' => $order_id[$key],
        'recon_gt_amount' => $recon_gt_amount[$key],
        'recon_gt_commision' => $recon_gt_commision[$key],
        'recon_gt_payment' => $recon_gt_payment[$key],
        'cart_id' => $cart_id[$key],
    ] ;

    $result['save_recon_finance'] = $this->productmodel->recondata_financeinsert($myarray);
} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2022-02-25T16:16:44.967

这基于答案 [https://stackoverflow.com/a/10054657/7404511]

这是一个标准的 MySQL 插入语句。

```
INSERT INTO TABLE1(COLUMN1, COLUMN2, ....) VALUES (VALUE1, VALUE2..) 
```

如果您有一个名称为 fbdata 的表，其中列显示在数组的键中，您可以使用这个小片段插入。这是您的数组如何转换为该语句的方式。

我将使用此解决方案，其中显式添加引号`'string'`并显式放置`null`空值：

```
$columns = implode(", ",array_keys($insData));
$escaped_values = array_map(
    function($value) {
        if (is_string($value)) {
            return "'" . $mysqli->real_escape_string($value) . "'";
        }
        if (is_null($value)) {
            return 'null';
        }
        return $value;
    },
    array_values($insData)
);
$values  = implode(", ", $escaped_values);
$sql = "INSERT INTO `fbdata`($columns) VALUES ($values)"; 
```

# wpf - 是否有 WPF XAML 区域？

> ID：10054634
> 
> 赞同：0
> 
> 时间：2012-04-07T12:49:24.270
> 
> 标签：wpf, xaml, regions

当我有一些块时，我想像这样折叠：

```
<region 123>
</region> 
```

有类似的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T12:58:18.313

看看这个。它是 VS 2010 的扩展。 [http://visualstudiogallery.msdn.microsoft.com/3c534623-bb05-417f-afc0-c9e26bf0e177](http://visualstudiogallery.msdn.microsoft.com/3c534623-bb05-417f-afc0-c9e26bf0e177)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T13:01:30.230

XAML 中没有真正支持用户定义的代码折叠。大多数 IDE，如 VS，支持 XAML 标签上的代码折叠，如下所示：

```
-|      <UserControl>
+|          <Grid[...]>
-|      <UserControl/> 
```

虽然代码折叠是我通常会[避免的](http://www.codinghorror.com/blog/2008/07/the-problem-with-code-folding.html)

[此外， #region 在 XAML 中](https://stackoverflow.com/questions/2888347/region-in-xaml) 的副本。

# internet-explorer - CSS3 动画在 IE 或 Opera 中不起作用

> ID：10054635
> 
> 赞同：2
> 
> 时间：2012-04-07T12:50:11.390
> 
> 标签：internet-explorer, browser, css, opera

我使用 webkit 属性和 CSS3 创建了一个简单的动画来在网站上旋转图像。

这里的样式 css（它仅适用于 div）

```
.bg {
    position: relative;
    top: 0px;
    left: 0px;
    display:block;
    -webkit-animation: spin 100s infinite linear;
    -moz-animation: spin 100s infinite linear;
    -o-animation: spin 100s infinite linear;
    -ms-animation: spin 100s infinite linear;
    opacity:0.8;
    filter:alpha(opacity=80); /* For IE8 and earlier */
    z-index:-1;
}
@-webkit-keyframes spin {
    0% { -webkit-transform: rotate(0deg);}
  100% { -webkit-transform: rotate(360deg);}
}
@-moz-keyframes spin {
    0% { -moz-transform: rotate(0deg);}
  100% { -moz-transform: rotate(360deg);}
}
@-o-keyframes spin {
    0% { -o-transform: rotate(0deg);}
  100% { -o-transform: rotate(360deg);}
}
@-ms-keyframes spin {
    0% { -ms-transform: rotate(0deg);}
  100% { -ms-transform: rotate(360deg);}
} 
```

现在的结果是，在 Mozilla Firefox、Chrome 和 Safari 上，它可以正常工作，但在 Opera 和 Internet Explorer 中我看不到任何动画。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T12:54:16.783

[http://caniuse.com/#feat=css-animation](http://caniuse.com/#feat=css-animation)

IE10 和 Opera 12 支持 CSS 动画。不是更早。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T12:28:32.040

也许这些信息对于那些在 Opera 12 中遇到动画问题的人会很有用。

在opera 12.x css 动画属性'infinite' 对我不起作用。动画只播放一次然后停止。但是在我将持续时间的整数值（例如 1s）更改为小数值（例如 1.1s）之后，动画开始无限播放。

# c# - 打开子窗体时出错

> ID：10054641
> 
> 赞同：0
> 
> 时间：2012-04-07T12:51:22.640
> 
> 标签：c#, .net, winforms

我打算用 Telerik 桌面控件制作一个桌面应用程序。我的主要表单代码是：

```
 public partial class MainForm3 : Telerik.WinControls.UI.RadForm
       {
        private string ISadmin = string.Empty;
        private string Customer_ID = string.Empty;
        private string sLanguage_Code = "en-US";
        private string Contact_ID = string.Empty;
        public MainForm3(string Contact_IDa, string Customer_IDa, string ISadmina)
        {
            InitializeComponent();

            this.Contact_ID = Contact_IDa;
            this.Customer_ID = Customer_IDa;
            this.ISadmin = ISadmina;  
        }
        private void MainForm3_Load(object sender, EventArgs e)
                {
                    this.IsMdiContainer = true;
                    this.radDock1.AutoDetectMdiChildren = true;
                }
        private void radMenuItem1_Click(object sender, EventArgs e)
        {
            FormThree formthree= new FormThree ();
            formthree.MdiParent = this;
            formthree.Show();
        }

    } 
```

字符串 Contact_IDa、字符串 Customer_IDa、字符串 ISadmina 来自登录页面

登录页面代码：

```
if(login success){

//setup necessary values 

 System.Threading.Thread t = new System.Threading.Thread(new  System.Threading.ThreadStart(ThreadProc));
 t.Start();
 this.Close();

}

public void ThreadProc()
        {
            Application.Run(new MainForm3(Contact_ID, Customer_ID, IsAdmin));
        } 
```

> 和 FormThree 代码是；

```
public partial class FormThree : Telerik.WinControls.UI.RadForm
           {
        public FormThree ()
        {
            InitializeComponent(); 
            splitPanel1.AllowDrop = true;
            splitPanel1.DragEnter += splitPanel1_DragEnter;
            splitPanel1.DragDrop += splitPanel1_DragDrop;
        }
        private void splitPanel1_DragDrop(object sender, DragEventArgs e)
        {
            if (e.Data.GetDataPresent(DataFormats.FileDrop))
            {
                string[] filePaths = (string[])(e.Data.GetData(DataFormats.FileDrop));

                foreach (string fileLoc in filePaths)
                {
                    // Code to read the contents of the text file
                    if (File.Exists(fileLoc))
                    {
                        using (TextReader tr = new StreamReader(fileLoc))
                        {
                            string Name = Path.GetFileName(fileLoc);
                            string extention = Path.GetExtension(fileLoc);
                            MessageBox.Show("Name:" + Name + " </br>Extention:" + extention);
                            //MessageBox.Show(tr.ReadToEnd());
                        }
                    }
                }
            }
        }

        private void splitPanel1_DragEnter(object sender, DragEventArgs e)
        {
            if (e.Data.GetDataPresent(DataFormats.FileDrop))
            {
                e.Effect = DragDropEffects.Copy;
            }
            else
            {
                e.Effect = DragDropEffects.None;
            }
        }

        private void FormThree_Load(object sender, EventArgs e)
        {
        }
    } 
```

现在的问题是当我单击“radMenuItem1”加载我的表单 FormThree 时，它​​说“DragDrop 注册没有成功”。为什么以及如何解决这个问题.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T13:11:41.280

在每个应用程序启动时启动您的应用程序。
在您的 Main 方法中执行以下操作：

```
Application.Run(new MainForm3()); 
```

构造函数中没有参数，然后在您的 MainForm3 构造函数中（在 InitializeComponent 之前）进行登录，打开一个专用的模式表单以获取继续所需的登录凭据。

如果登录失败，您可以通知用户并使用 Application.Exit() 关闭应用程序。如果登录成功，则读取 MainForm3 所需的值。无需启动不同的线程

# windows-phone - 如何以编程方式通知用户有关 windows phone 'mango' 中软件的升级版本

> ID：10054644
> 
> 赞同：0
> 
> 时间：2012-04-07T12:51:29.087
> 
> 标签：windows-phone

我正在开发一个应用程序（在 windows phone' Mango' 中），我需要通知用户（我们的应用程序用户）我的应用程序的升级版本，我该怎么做？

请帮忙

谢谢！

斯内哈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T16:39:30.113

当您的应用程序的升级版本可用时，Windows Phone Marketplace 应用程序将负责通知用户，因此您不必这样做。

话虽如此，如果您仍然想这样做，您可以做一些简单的事情，例如在保存应用程序当前版本号的网络服务器上托管一个文本文件，然后您可以从您的应用程序定期连接到该站点以确定用户是否正在运行最新版本。

# ruby-on-rails - 如何在端口 80 上的 nginx 上启动 rails 应用程序

> ID：10054646
> 
> 赞同：0
> 
> 时间：2012-04-07T12:52:10.763
> 
> 标签：ruby-on-rails, nginx, passenger, production

我无法在端口 80 上启动我的网站，但只能在 3000 上启动。Nginx 显示标准索引页面。Nginx 配置：

```
http {
  passenger_root /home/my_user_name/.rvm/gems/ruby-1.9.3-p125/gems/passenger-3.0.11;
  passenger_ruby /home/my_user_name/.rvm/wrappers/ruby-1.9.3-p125/ruby;

  include       mime.types;
  default_type  application/octet-stream;

  keepalive_timeout 65;

  server {
    listen 80;
    server_name www.my_site_name.com
    root /home/my_user_name/my_site_name/public;   # <--- be sure to point to 'public'!
    passenger_enabled on;
  }

} 
```

命令：

```
passenger start -e production  # successfully started on port 3000

rvmsudo passenger start -e production -p 80 # error, see below 
```

错误：

```
*** ERROR ***
The address 0.0.0.0:80 is already in use by another process, perhaps another
Phusion Passenger Standalone instance.

If you want to run this Phusion Passenger Standalone instance on another port,
use the -p option, like this:

  passenger start -p 81 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T13:11:56.967

Nginx 是在端口 80 上监听的。Passenger Standalone 是在没有 Web 服务器的情况下使用的。在运行 Nginx 的情况下，您也不必单独启动Passenger。

[使用 Nginx 的乘客文档](http://www.modrails.com/documentation/Users%20guide%20Nginx.html)

[旅客独立文件](http://www.modrails.com/documentation/Users%20guide%20Standalone.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T14:02:59.003

我认为您需要`location`在端口 80 上为您的服务器指定一个，如下所示：

```
http {
  # ...

  server {
    listen 80;
    server_name www.my_site_name.com

    location / {
      root /home/my_user_name/my_site_name/public;
      passenger_enabled on;
    }
  }
} 
```

正如jdl 指出的那样，您也不需要运行Passenger Standalone。您不需要这些命令中的任何一个。Nginx 将为您服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-21T04:14:43.360

好的，你的初始配置是正确的......所以运行这个命令来启动 rails 应用程序：

```
rvmsudo passenger start -e production -p 80 --user="TYPE HERE USERNAME FROM SSH" 
```

# php - 将图片保存在服务器端 SilverLight

> ID：10054647
> 
> 赞同：0
> 
> 时间：2012-04-07T12:52:11.223
> 
> 标签：php, silverlight-4.0

我有一个 SilverLight 应用程序，我想在服务器端将我的 UIElement 的屏幕截图保存为图像

我有**WritableBitmap**，我在其中放置了指定 UIElement 的屏幕截图，我想将其发送到 php 文件以**将其保存在服务器端**

等待有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T17:25:37.110

```
// PHP Side - Saving the image on server

if ( isset ( $GLOBALS["HTTP_RAW_POST_DATA"] )) {

$filename=$_GET['filename'];

// get bytearray
$im = $GLOBALS["HTTP_RAW_POST_DATA"];

$filepath = '....';

$output=file_put_contents( $filepath . $filename, $im);

} else{
    // write the error in log file
} 
```

# java - 获取 java.lang.NullPointerException

> ID：10054650
> 
> 赞同：0
> 
> 时间：2012-04-07T12:52:39.467
> 
> 标签：java, treemap

我正在尝试将一分钟内收到的所有消息对象存储到树形图中，一分钟结束后，将其序列化并将字节 [] 返回到另一个类，同时清除地图并开始存储下一分钟收到的消息等上。

```
public class StoreMessage extends Thread implements Serializable{

    public static byte[] b=null;
    public static Map <Long,Message> map1=Collections.synchronizedMap(new TreeMap<Long,Message>());
    public static Calendar c1=Calendar.getInstance();
    public static  int  year=c1.get(Calendar.YEAR);
    public static   int  month=c1.get(Calendar.MONTH);
    public static   int  day=c1.get(Calendar.DAY_OF_MONTH);
    public static  int  hour=c1.get(Calendar.HOUR_OF_DAY);
    public static  int  min=c1.get(Calendar.MINUTE);
    public static   GregorianCalendar gc = new GregorianCalendar(year, month, day, hour, min);
    public   static Date d=gc.getTime();
    public static long time1=(d.getTime())/60000;  //precision till minute of the time elapsed since 1 Jan 1970
    public static long time2=time1+1;
    public static byte[] store(Message message)throws Exception{

     while(true)
        {
            if(time1<time2)
            {
                long preciseTime=TimeUnit.MILLISECONDS.toNanos(System.currentTimeMillis())+(System.nanoTime()-startNanotime);
                map1.put(preciseTime, message);
            }

            else
            {
                b=Serializer.serialize(map1);
                map1.clear();
                time1=time2;
                time2++;
                            return b;
            }

            }
         }
    } 
```

为什么这段代码给我空指针异常突出显示 **int len=b.length;** 调用它返回值的另一个类？

```
public static void record(Message message){
        try{
            //storing the serialized message in byte[]
            byte[] b =StoreMessage.store(message);
            int len=b.length;  //<--highlights this line for null pointer exception 
```

即使在进行了修改（即，将 return 放在 else 块中）之后，它也不会将控制权返回给调用类。此外，在 else 块内没有打印任何**SOP**语句（添加时）。为什么？

```
The Serializer class
    public class Serializer {
        //serializes an object and returns a byte array
        public static byte[] serialize(Object map) throws IOException 
          {
            ByteArrayOutputStream b = new ByteArrayOutputStream();
            ObjectOutputStream o = new ObjectOutputStream(b);
            o.writeObject(map);
            return b.toByteArray();
          }

        //de-serialization of the byte array and returns an object  
        public static Object toObject (byte[] bytes)
        {
          Object obj = null;
          try 
           {
            ByteArrayInputStream bis = new ByteArrayInputStream (bytes);
            ObjectInputStream ois = new ObjectInputStream (bis);
            obj = ois.readObject();
           }
          catch (Exception ex) { }
          return obj;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T12:57:06.633

这是因为你的`b`变量是`null`. 看这里：

您输入方法并进行检查`if(time1<time2)`。这是`true`. 因此你不会进入 else 也不会初始化 b。之后你去返回`b`. 它是`null`。如果你问我，你把退货声明放错了。将 return 放在 else 语句中，以确保循环已终止，并且在返回之前仍将初始化数组：

```
 while(true) {
     if(time1<time2) {
        long preciseTime=TimeUnit.MILLISECONDS.toNanos(System.currentTimeMillis())+(System.nanoTime()-startNanotime);
         map1.put(preciseTime, message);
      } else {
         b=Serializer.serialize(map1);
         map1.clear();
         time1=time2;
         time2++;
         return b;
      }
 }
 } 
```

# c# - 如何了解 Win32 API？

> ID：10054653
> 
> 赞同：27
> 
> 时间：2012-04-07T12:53:22.150
> 
> 标签：c#, windows, winapi

我想学习如何使用 Win32 API，因为最近我有很多需要完成的任务，需要来自 的函数`user32.dll`，所以我正在努力学习，我在 Google 上搜索，但问题是：每个教程关于它，只是告诉你如何做某件事。喜欢`MessageBox`通过Win32 API展示一个，但实际上并不能学习Win32框架。

那么你是如何真正学习它的呢？你怎么知道所有的功能？使用托管库非常容易，尤其是使用提供 IntelliSense、对象浏览器等的 Visual Studio，但 Win32 API 非常混乱（至少从 C# 开发人员的角度来看）。

直到现在我一直在使用它的方式只是在谷歌上搜索一个任务并看到它可以用 Win32 API 完成（我不知道）然后复制这个函数并使用它（这对我来说太可怕了，我觉得我错过了很多“力量”）。

那么，我该如何学习呢？

明确一点：我对一本书不感兴趣。听起来很糟糕，我需要这些知识来完成一个项目，而我只是没有时间投资一本书。我确实得到了答案。
谢谢你们。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-07T13:04:48.127

从 MSDN 您可以找到 WinAPI 列表： 以下是 Windows 应用程序编程接口 (API) 的参考内容列表。 [http://msdn.microsoft.com/en-us/library/ff818516(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ff818516(v=vs.85).aspx)

你可以通过 Visual Basic Win API 函数学习一些东西。例子很容易理解和理解。然后，您可以将代码翻译成 C#。

55 个类别中有 598 个 Visual Basic Windows API 函数 [http://www.ex-designz.net/api.asp](http://www.ex-designz.net/api.asp)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T13:00:41.280

首先，Win32 是一组子系统。您可能无法轻松学习它们。你只需要优先考虑。

但是，为了能够说出你想学的东西，你可能需要一个大局。我相信接近 Win32 的最佳方式是通过 Charles Petzold 的“Programming Windows”。阅读起来非常清晰易懂。有很多例子你可以自己学习和试验。

在你学习了基本的东西之后，我推荐 Mark Russinovich 的“Microsoft Windows Internals”。它相当先进，但可以让您了解 Windows 核心内部的内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-07T16:10:45.430

我个人认为您应该从[使用 P/Invoke 在 C# 中调用 Win32 DLL开始](http://msdn.microsoft.com/en-us/magazine/cc164123.aspx)

这将为您提供在 c# 中使用 pinvoke 的 WINAPI 所需了解的大部分基本知识。我也有 MSDN 提供的 WINAPI 函数的离线版本，但我不记得我是从哪里下载的。

最后，掌握一些基本的易于理解的 WINAPI 代码，这里有[http://mwinapi.sourceforge.net/](http://mwinapi.sourceforge.net/)。

**编辑：**您可以[从 phatocde 下载文档的离线版本](http://www.phatcode.net/articles.php?id=238)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-07T13:02:53.940

Win32 API - 帮助文档和示例应该在 Windows SDK 下载中。 [http://www.microsoft.com/download/en/details.aspx?id=8279](http://www.microsoft.com/download/en/details.aspx?id=8279)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-08T07:21:12.370

还可以查看[Forger 的 Win32 API 编程教程](http://www.winprog.org/tutorial/)，其中：

> 试图让您尽可能快速、清晰地开始使用 Win32 API 进行开发。

# css - Firefox 中的图像替换不会隐藏文本

> ID：10054655
> 
> 赞同：0
> 
> 时间：2012-04-07T12:53:34.007
> 
> 标签：css, image-replacement

我使用的是旧版本的 FlexSlider（v1.4，主要是因为我还没有时间测试新版本），出于某种原因，控件的文本显示在 Firefox 中。

![问题](../Images/dad079179ecf979f1774075590ec75aa.png)

这是箭头的 CSS：

```
 .flex-direction-nav li a {
    display: block;
    width: 52px; height: 52px;
    margin: -13px 0 0;
    background: url(../images/bg_direction_nav.png) no-repeat;
    position: absolute; top: 50%;
    cursor: pointer;
    text-indent: -999em;
  } 
```

我试过改变`text-indent`周围，但文本没有移动。`text-align: left`当我在 Firebug 中更改它时，这似乎不是问题。此问题未在 Chrome 中显示。

为什么文本不隐藏自己？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:57:17.033

我遇到了同样的问题。我的问题是导航链接继承了“text-align：right;”。

尝试重置您的 text-align 属性：

```
 .flex-direction-nav li a {
    display: block;
    width: 52px; height: 52px;
    margin: -13px 0 0;
    background: url(../images/bg_direction_nav.png) no-repeat;
    position: absolute; top: 50%;
    cursor: pointer;
    text-indent: -999em;
    text-align:left;
  } 
```

此外，对于 IE 调试，请记住，在较低版本中 text-indent 仅在您设置了 text-transform 属性时才有效......所以只需添加

```
text-transform: uppercase; 
```

会帮助...

# php - 我想对成员表中的每个成员进行 SQL 查询

> ID：10054664
> 
> 赞同：2
> 
> 时间：2012-04-07T12:54:54.490
> 
> 标签：php, mysql, sql, foreach, member

我怎么做？

我有一张桌子，目前有 3 名成员。对于这些成员中的每一个，我想在另一个表中添加一行。我应该在一段时间内使用一段时间吗？还是 Foreach 循环？

这就是我到目前为止所拥有的。

```
$sql = "SELECT email FROM members";
$query = mysql_query($sql);

while ($row = mysql_fetch_assoc($query)){

// Do I add a new while in here? Do I use a for loop? 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T13:01:45.913

您可以使用`insert`语句将一组行添加到另一个表：

```
insert  OtherTable
        (email)
select  email
from    Members 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T13:05:37.420

这可以通过一个查询来完成。

```
INSERT INTO anotherTable (email) SELECT email FROM members; 
```

您可以在 MySQL 文档中阅读有关[`INSERT ... SELECT`语法的](http://dev.mysql.com/doc/refman/5.0/en/insert-select.html)更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T13:35:01.257

根据您的餐桌信息：

```
while ($row = mysql_fetch_assoc($query)){

 mysql_query("insert into aanwezigheid set email='{$row['email']}', 
   date='{$your_date_var}',
   city='{$your_city_var}',
   address='{$your_address_var}'" );
} 
```

# javascript - 形状不在画布上绘制

> ID：10054666
> 
> 赞同：0
> 
> 时间：2012-04-07T12:55:12.560
> 
> 标签：javascript, html, mouseevent

我是 html5 的新手。我写了一个在画布上添加一个矩形的小代码。当我双击画布时，它无法正常工作，任何人都可以指导我哪里做错了吗？

```
<script>
function init() {
    var canvas2 = document.getElementById("canvas2");
    canvas2.ondblclick = doubleclickhandler;

}
function doubleclickhandler (){
      var canv = document.getElementById("canvas2");
      var ctx = canv.getContext("2d"); 
      ctx.fillStyle = "rbga(0,200,0,1)" ;
      ctx.fillRect = (36,10,22,22);
}
</script>
<style>
#div2
{
    float:left;
    width:100px;
    height:150px;
    margin:10px;
    border:1px solid #aaaaaa;

}
</style>
<body onLoad="init()">
 <div id= "div2">
 <canvas id="canvas2" width="100" height="150" ></canvas>          
 </div>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T12:57:51.977

`ctx.fillRect = (36,10,22,22)`是赋值，而`ctx.fillRect`通常是方法，而不是属性。您需要像函数一样调用它：

```
ctx.fillRect(36, 10, 22, 22); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T12:59:28.233

`fillRect`是函数而不是属性。你必须打电话给它。AFAIK 那是你唯一的错误。

```
<script>
function init() {
    var canvas2 = document.getElementById("canvas2");
    canvas2.ondblclick = doubleclickhandler;

}
function doubleclickhandler (){
      var canv = document.getElementById("canvas2");
      var ctx = canv.getContext("2d"); 
      ctx.fillStyle = "rbga(0,200,0,1)" ;
      ctx.fillRect(36,10,22,22);
}
</script>
<style>
#div2
{
    float:left;
    width:100px;
    height:150px;
    margin:10px;
    border:1px solid #aaaaaa;

}
</style>
<body onLoad="init()">
 <div id= "div2">
 <canvas id="canvas2" width="100" height="150" ></canvas>          
 </div>
</body> 
```

# php - 自动完成撇号和注入攻击

> ID：10054670
> 
> 赞同：1
> 
> 时间：2012-04-07T12:55:57.733
> 
> 标签：php, ajax, autocomplete

我很难将撇号传递到我的自动完成中。数据库包含不带撇号的条目...而是使用 html 等效项 (&POUND039;)。我对 ajax 还是很陌生，所以我非常感谢您的帮助。问题是，我如何传入撇号的值并使其匹配？另外，我的代码容易受到注入攻击吗？在此先感谢您的帮助！

代码是这样的：

```
<script type="text/javascript">
var options = {
        serviceUrl:'autocomplete/autoQuery.php',
            minChars:2, 
            delimiter: /(,|;)\s*/, // regex or character
            maxHeight:400,
            width:500,
            zIndex: 9999,
            deferRequestBy: 0, //miliseconds
            params: { country:'Yes' }, //aditional parameters
            noCache: false, //default is false, set to true to disable caching
            // callback function:
            // onSelect: function(value, data){ alert('You selected: ' + value + ', ' + data); },
            onSelect: function(value, data){ window.location = "textbooks.php?bk=" + data;}
    }; 
$('#query').autocomplete(options);
</script> 
```

我有一个 php 脚本发回查询结果。该页面称为 query.php，代码如下：

```
$get = htmlentities($_GET['query']);
$query = "SELECT title,author,id,isbn10,isbn13 FROM textbook
        WHERE title LIKE '%" . $get . "%'
        OR author LIKE '" . $get . "%'
        OR isbn10 LIKE '" . $get . "%'
        OR isbn13 LIKE '" . $get . "%'
        LIMIT 5
        ";
$result = mysql_query($query,$connection);
if(mysql_num_rows($result) == 0){
$resString = "'No result found. Click here',";
$idString = "'unknown',";
}else{
$resString = "";
$idString = "";
while($data = mysql_fetch_array($result)){
    $resString .= "'" . $data['title'] . " by " . $data['author'] . "',";
    $idString .= "'" . $data['id'] . "',";
}   
}

$resString = rtrim($resString, ',');
$idString = rtrim($idString, ',');
$code = "{\n";
$code .= "query:'" . $get . "',\n";
$code .= "suggestions:[" . $resString . "],\n";
$code .= "data:[" . $idString . "]\n";
$code .= "}";
echo $code; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T13:27:22.027

您的脚本本身很*容易*受到 SQL 注入的影响，因为它是`$get`未转义的。`htmlentities()`你拥有它的方式不会对引号进行编码。

## 先修复数据：

不建议将编码值存储在数据库中（尤其是不奇怪编码的值，例如`&POUND039`）。所以我建议的第一件事是用实际的撇号替换数据库中的这些值。

```
UPDATE textbook 
SET 
  title = REPLACE(title, '&POUND039', '\''),
  author = REPLACE(author, '&POUND039', '\''),
  etc... 
```

然后不要使用( 顺便说一句，除非您传递常量，`htmlentities()`否则不会对引号进行编码，而是传入一个正确转义的 string ，它将匹配数据库中的常规单引号。注意，转义包含文字的字符串还有其他问题并在语句中使用，所以这只是可以做的最低限度的事情。`ENT_QUOTES``$get``%``_``LIKE`

```
$get = mysql_real_escape_string($_GET['query']);
$query = "SELECT title,author,id,isbn10,isbn13 FROM textbook
        WHERE title LIKE '%" . $get . "%'
        OR author LIKE '" . $get . "%'
        OR isbn10 LIKE '" . $get . "%'
        OR isbn13 LIKE '" . $get . "%'
        LIMIT 5
        "; 
```

## 真正的解决方案：

但是，正如评论中所建议的那样，如果您使用 PDO 和绑定参数，这一切都会更加顺利并且无需担心注入：

```
// PDO connection information omitted...
$query = "SELECT title,author,id,isbn10,isbn13 FROM textbook
        WHERE title LIKE CONCAT('%', :get, '%')
        OR author LIKE CONCAT(:get, '%')
        OR isbn10 LIKE CONCAT(:get, '%')
        OR isbn13 LIKE CONCAT(:get, '%')
        LIMIT 5
        ";

$stmt = $db->prepare($query);
$stmt->execute(array(':get', $_GET['query']);
while ($data = $stmt->fetch(PDO::FETCH_ASSOC)) {
  $resString .= "'" . $data['title'] . " by " . $data['author'] . "',";
  $idString .= "'" . $data['id'] . "',";
}
// etc... 
```

# css - 在 servlet 中嵌入 CSS

> ID：10054672
> 
> 赞同：0
> 
> 时间：2012-04-07T12:56:02.873
> 
> 标签：css, tomcat, servlets

我需要在 servlet 中嵌入样式表和 javascript。

```
import java.io.*;
import javax.servlet.*;
import java.util.*;
import javax.servlet.http.*;

public class StyleServlet extends HttpServlet
{
     public void doGet(HttpServletRequest request, HttpServletResponse response) throws IOException,ServletException
         {

    response.setContentType("text/html");
    PrintWriter out=response.getWriter();

        out.println("<html>");
        out.println("<head>");
        out.println("<link rel='stylesheet' type='text/css' href='" + request.getContextPath() +  "/mystyle.css' />");    
        out.println("</head>);

        out.println("<h3>demo</h3>");
        }
} 
```

我已将 .css 放在 tomcat\webapps\myproject\mystyle.css

这种方式我也试过

```
out.println("</style>");

out.println("<link rel="+"stylesheet"+" type="+"text/css");
out.println("href=" + request.getContextPath() +  "/mystyle.css/>");     
out.println("</style>"); 
```

但我的html页面仍然格式化:(

# algorithm - 查找连续 1 的最大数量

> ID：10054677
> 
> 赞同：3
> 
> 时间：2012-04-07T12:56:36.043
> 
> 标签：algorithm, matrix, binary-search

> 一个二维矩阵用 1 和 0 填充。假设连续的所有 1 都在所有 0 之前。我们必须找到连续 1 的最大数量。

我已经提出了解决方案，我们可以在每一行上应用二进制搜索，以在 0 开始之前获取该行中最后一个 1 的最后一个索引，因此没有。1的将是它的索引+1。所以我们可以在每一行都这样做。所以复杂度将是 O(mlogn)，其中 m 是数字。行数，n 是行数。的列。可以有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T13:03:52.217

您只对最大值感兴趣，因此您不必为每一行找到开关的位置。

找到第一行的开关位置k(0)后，从位置k(0)开始搜索第二行，如果是0，那么第二行不包含最长的序列，所以可以忽略where它实际上是。这不会提高最坏情况的时间复杂度，但会提高平均情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T13:11:26.173

它可以在O（n + m）中完成。

从等于 0 的 curmax 开始。

然后逐行处理。当该行中至少有 curmax 时增加 curmax，即检查 curmax 值是否为 1。

在处理完所有行之后，答案将是 curmax-th。

这将在 O(n+m) 中工作。

它会比 O(m*logn) 快吗？这取决于。如果 m 小于 n/(log(n) - 1) 它将起作用，实际上比 O(m*log n) 更长，否则更快，仅就复杂性而言。
在估算时间时，考虑常数是另一个问题。所以对于一个数量级的 n 和 m 这会更快，对于不同的只有一个选择 - 尝试两者，选择更好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-07T13:21:48.943

O(n+m) 算法的要点是这样的。

把你的矩阵想象成一个网格。

从左上角开始。

如果你在 1，向右移动。否则向下移动。

继续这样做，直到通过最后一行。

那么你的 x 坐标是 1 的最大计数。

如果有一行全为 1，您可以将其移过最后一列。您的算法需要满足这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-07T13:15:25.780

```
1     bool matrix[100][200];
2     int max = 0, count, x;
3     
4     for(int y=0;y<100;y++){
5         count = 0;
6         x=max; // This would optimize the search times!
7         for(;x<200;x++){
8             if(matrix[y][x] == 0 && count>max){
9                max=count;
10            }
11            else count++;
12        }
13        if(x == 199)break; // Optimization - the end reached
14    }
15
16    // Now the max var contains the maximum number of 1's of a single row in all columns. 
```

无需遍历每一行，您只需跳过已知位置即可。这种优化在**第 6 行**实现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-07T13:08:18.123

只需连续检查它，然后从您在上一行停止的位置开始下一行。如果为 0，则转到下一行，否则继续检查该行。重复该过程直到最后一行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-09T16:26:22.637

似乎在上面的代码中，第 5 行，即 count = 0 应该从第一个循环中出来，因为如果最大数量的 1 不在矩阵的第一行中，它会错误地更新 max 变量。

我在下面编写的正确测试代码：

```
public static int findRowWithMax1s(int arr[][],int m, int n){

    int x,y,count=0,max=0;
    int row = 0;
    for(x=0;x<m;x++) {
        y = max;
        for(;y<n;y++) {
            if(arr[x][y] == 0) {
                max = count;
                row = x;
                break;
            }
            else
                count++;
        }
    }

    return max;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-08T02:55:36.263

```
#include <stdio.h>
#define R 4
#define C 4

/* A function to find the index of first index of 1 in a boolean array arr[] */
int first(bool arr[], int low, int high)
{
  if(high >= low)
  {
    // get the middle index  
    int mid = low + (high - low)/2; 

    // check if the element at middle index is first 1
    if ( ( mid == 0 || arr[mid-1] == 0) && arr[mid] == 1)
      return mid;

    // if the element is 0, recur for right side
    else if (arr[mid] == 0)
      return first(arr, (mid + 1), high);

    else // If element is not first 1, recur for left side
      return first(arr, low, (mid -1));
  }
  return -1;
}

// The main function that returns index of row with maximum number of 1s. 
int rowWithMax1s(bool mat[R][C])
{
    int max_row_index = 0, max = -1; // Initialize max values

    // Traverse for each row and count number of 1s by finding the index 
    // of first 1
    int i, index;
    for (i = 0; i < R; i++)
    {
       index = first (mat[i], 0, C-1);
       if (index != -1 && C-index > max)
       {
           max = C - index;
           max_row_index = i;
       }
    }

    return max_row_index;
}

/* Driver program to test above functions */
int main()
{
    bool mat[R][C] = { {0, 0, 0, 1},
        {0, 1, 1, 1},
        {1, 1, 1, 1},
        {0, 0, 0, 0}
    };

    printf("Index of row with maximum 1s is %d n", rowWithMax1s(mat));

    return 0;
} 
```

# linux - CapsLock，NumLock，Insert，当键盘没有 LED 时如何在屏幕上显示键盘状态

> ID：10054681
> 
> 赞同：4
> 
> 时间：2012-04-07T12:57:38.570
> 
> 标签：linux, keyboard

当键盘**没有 LED**时，对于 Linux 机器，有没有简单的方法可以做到这一点？`CapLock`通过命令行、Python、Perl 或 Ruby ，显示键盘何时`NumLock`激活？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-10-04T14:03:14.630

如果要使用命令行检查 LED 状态，请使用：

```
xset q | grep LED 
```

这将返回一个由 LED 状态灯的二进制加法产生的数字。Caps lock 是第一位，Numlock 是第二位......其余的你需要试验，因为我只使用了这两个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-26T11:01:15.657

如果您使用的是 gnome 3 [Lock Keys](https://extensions.gnome.org/extension/36/lock-keys/)扩展，可能会有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T22:10:14.897

这是一个很好的问题，如果您有虚拟机也适用。

我发现以下代码在 ESXi 5.1 上运行的 Ubuntu Lucid VM 上运行良好，在 mx5500 旋转蓝牙键盘组合上没有硬件 LED。

[http://freecode.com/projects/numlockx](http://freecode.com/projects/numlockx)

```
tar -xzf numlockx-1.2.tar.gz
./configure
make
./numlockx on 
```

您可能无法看到当前状态，但至少您可以强制它成为您想要的状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T13:04:54.677

查看这篇关于*key-mon*工具的[帖子。](http://www.webupd8.org/2009/12/key-mon-displays-keyboard-and-mouse.html)

 *[http://www.webupd8.org/2009/12/key-mon-displays-keyboard-and-mouse.html](http://www.webupd8.org/2009/12/key-mon-displays-keyboard-and-mouse.html)

据我所知，还有一个 CLI 命令可以检查包中的状态。*

# asp.net-mvc-3 - MVC3 路由：匹配任何字符串

> ID：10054682
> 
> 赞同：0
> 
> 时间：2012-04-07T12:57:40.137
> 
> 标签：asp.net-mvc-3, routing, url-routing, string-matching

简单的问题：

如何匹配 MVC3 路由系统中的字符串？

例子：

```
{sub}.domain.com/{contoller}/{action}/{id}

sub = [Match any string here] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T14:05:00.300

看起来您的问题已在[此处得到解答](https://stackoverflow.com/questions/278668/is-it-possible-to-make-an-asp-net-mvc-route-based-on-a-subdomain)。

基本上，要访问 {subdomain}.domain.com，正常的路由处理程序不会在那里查看，但您可以创建自己的自定义 Route 类，并将其注册到 Global.asax Application_Start() 中。

# php - MaxMind GEO_IP 重定向

> ID：10054687
> 
> 赞同：2
> 
> 时间：2012-04-07T12:58:05.363
> 
> 标签：php, .htaccess, redirect, geolocation, geotargetting

这个问题有一段时间了！无论如何，我已经下载了 Maxminds GEOIP php 模块并将其上传到我的服务器，然后我将这部分代码放入我的 index.php 页面

```
<?php
require_once("geoip/geoip.inc");
$gi = geoip_open("geoip/GeoIP.dat",GEOIP_STANDARD);
$country = geoip_country_code_by_addr($gi, $_SERVER['REMOTE_ADDR']);
geoip_close($gi);

$my_countriesrow = array('AD','AE','AF'......and so on);
$my_countrieseuro = array('AN','AT','BA','BE','BG','BY'.......and so on);
/* $my_country = array('GB','UK'); */

if (!in_array(strtolower($country), $my_countriesrow)){
    header('Location: https://www.website.com/row/index.php');
    exit();
}
elseif (!in_array(strtolower($country), $my_countrieseuro)){
    header('Location: https://www.website.com/euro/index.php');
    exit();
}
else {
    header('Location: https://www.website.com/index.php');
    exit();
}
?> 
```

我已将该页面上传到我的服务器，并且在 Google Chrome 中我得到了......这个网页有一个重定向循环

```
The web page at https://www.website.com/index.php has resulted in too many redirects. Clearing your cookies for this site or allowing third-party cookies may fix the problem. If not, it is possibly a server configuration issue and not a problem with your computer. 
```

和火狐一样！任何人都有任何想法，因为我全力以赴....

提前致谢！

-菲利普·杜斯

**更新**

OK 已经决定走 .HTACCESS 路线了！我已将我的 htaccess 文件编辑为如下所示....

```
GeoIPEnable On
GeoIPDBFile /geoip/GeoIP.dat

# Europe
RewriteEngine on
RewriteCond %{ENV:GEOIP_COUNTRY_CODE} ^AM$
RewriteCond %{ENV:GEOIP_COUNTRY_CODE} ^AO$
RewriteCond %{ENV:GEOIP_COUNTRY_CODE} ^AQ$
RewriteCond %{ENV:GEOIP_COUNTRY_CODE} ^AR$
RewriteCond %{ENV:GEOIP_COUNTRY_CODE} ^AS$
RewriteCond %{ENV:GEOIP_COUNTRY_CODE} ^AU$
RewriteCond %{ENV:GEOIP_COUNTRY_CODE} ^AW$
RewriteCond %{ENV:GEOIP_COUNTRY_CODE} ^AX$
RewriteCond %{ENV:GEOIP_COUNTRY_CODE} ^AZ$
RewriteRule ^(.*)$ https://www.Website.com/europe$1 [L]

# Rest Of World
RewriteEngine on
RewriteCond %{ENV:GEOIP_COUNTRY_CODE} ^AD$
RewriteCond %{ENV:GEOIP_COUNTRY_CODE} ^AE$
RewriteCond %{ENV:GEOIP_COUNTRY_CODE} ^AF$
RewriteCond %{ENV:GEOIP_COUNTRY_CODE} ^AG$
RewriteCond %{ENV:GEOIP_COUNTRY_CODE} ^AI$
RewriteCond %{ENV:GEOIP_COUNTRY_CODE} ^AL$
RewriteRule ^(.*)$ https://www.Website.com/row$1 [L] 
```

但是由于某种原因，我收到了 500 个内部错误，即使在每个国家/地区都输入了它仍然对我不起作用！真的不知道现在该怎么做，因为我已经使用不同的 php 脚本和现在这个工作了一个多星期。希望任何人都可以帮助提前再次感谢，我问的原因是有很多国家代码要手动输入，所以不想把它们都放进去却发现它不起作用！再次感谢！

-菲利普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T13:06:29.530

好吧，我不确定我会这样做。

你为什么不“玩”一下`htaccess`文件？

**在这里检查我的答案：**

[如何根据国家IP地址重定向域](https://stackoverflow.com/questions/9838344/how-to-redirect-domain-according-to-country-ip-address/9838434#9838434)

*我想这对你来说可能也是正确的......*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T13:04:17.380

好吧，如果您的两个 if 语句都不匹配，那么您将重定向到`/index.php`. 由于您正在编辑的代码服务`index.php`，请求`/index.php`被重定向......再次，到`index.php`。你可能想要：

```
$my_countrieseuro = array('AN','AT','BA','BE','BG','BY'.......and so on);

if (in_array(strtolower($country), $my_countrieseuro)){
    // European version
    header('Location: https://www.website.com/euro/index.php');
    exit();
} else {
    // International version
    header('Location: https://www.website.com/row/index.php');
    exit();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-19T04:11:32.010

.htaccess 文件中的大量 RewriteCond 语句不起作用的原因是它们在逻辑上被“与”在一起。

```
RewriteCond %{ENV:GEOIP_COUNTRY_CODE} ^AM$ [OR]
RewriteCond %{ENV:GEOIP_COUNTRY_CODE} ^AO$ [OR]
RewriteCond %{ENV:GEOIP_COUNTRY_CODE} ^AQ$
RewriteRule ...some special stuff for any of these hosts... 
```

您需要在每个条件末尾的方括号中使用“本地 OR”，以防止隐式 AND。

# java - 如何将 JTable 列设置为 String 并排序为 Double？

> ID：10054688
> 
> 赞同：2
> 
> 时间：2012-04-07T12:58:13.303
> 
> 标签：java, swing, jtable, jxtable

我对 Java 还是很陌生，并且对 JTable（更具体地说是 JXTable）和按列类对混合数据类型对行进行排序有疑问......让我详细说明......

我有一个保存产品列表数据的 JXTable。此表有一个价格列，我已将其设置为 String.class，以便我可以显示带有“$”前缀的价格。

我遇到的问题是，当行按价格排序时，它们没有按双精度排序，而是按字符串排序，因此这些值：

89.85、179.70、299.40、478.80

排序为：

179.70、299.40、478.80、89.85（上升）和 89.85、478.80、299.40、179.70（下降）

我想做的是在排序时删除'$'并将列排序为双精度。我将如何做到这一点？

**编辑：**

非常感谢 Jiri Patera 的回复。这对帮助我理解 tablecellrenderer 负责在这些类型的情况下操作值很有帮助。下面是完成的摘录，终于完成了我想要的。

```
public Component getTableCellRendererComponent(JTable pTable, Object pValue, boolean pIsSelected, boolean pHasFocus, int pRow, int pColumn) {

        // Use the wrapped renderer
        Component renderedComponent = mWrappedRenderer.getTableCellRendererComponent(pTable, pValue, pIsSelected, pHasFocus, pRow, pColumn);
        Component renderedComponentHeader = pTable.getTableHeader().getDefaultRenderer().getTableCellRendererComponent(pTable, pValue, pIsSelected, pHasFocus, pRow, pColumn);

        if (pColumn == 4 && pValue instanceof Double){
            DecimalFormat df = new DecimalFormat("$###,##0.00");
            Double d = (Double) pValue;
            String s = df.format(d);
            renderedComponent = mWrappedRenderer.getTableCellRendererComponent(pTable, s, pIsSelected, pHasFocus, pRow, pColumn);
        }

        // Set the alignment
        Integer alignment = mSpecialColumnAlignmentMap.get(pColumn);
        Integer width = mSpecialColumnWidthMap.get(pColumn);
        if (alignment != null) {
            ((JLabel) renderedComponent).setHorizontalAlignment(alignment);
            ((JLabel) renderedComponentHeader).setHorizontalAlignment(alignment);
        } else {
            ((JLabel) renderedComponent).setHorizontalAlignment(mDefaultAlignment);
            ((JLabel) renderedComponentHeader).setHorizontalAlignment(mDefaultAlignment);
        }

        if (width != null){
            pTable.getColumnModel().getColumn(pColumn).setPreferredWidth(width);
            pTable.getColumnModel().getColumn(pColumn).setMaxWidth(width);
        }

        return renderedComponent;
    } 
```

如您所见，我已经有一个自定义的 tablecellrenderer。我使用 DecimalFormat 来格式化我想要的价格。

希望这对将来的其他人有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T13:48:57.840

HFOE 是对的。但是，这对于 Java 新手来说可能很棘手。请原谅我使用匿名内部类。请参阅以下示例以获取一些提示...

```
 package test;

import java.awt.Component;
import java.util.ArrayList;
import java.util.List;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.DefaultTableCellRenderer;

public class TableTest {

  public static void main(String[] args) {
    TableTest tt = new TableTest();
    tt.start();
  }

  private void start() {
    JTable t = new JTable(new AbstractTableModel() {
      private static final long serialVersionUID = 1L;
      private List<Double> values = new ArrayList<Double>();
      {
        values.add(Double.valueOf(179.70d));
        values.add(Double.valueOf(299.40d));
        values.add(Double.valueOf(478.80d));
        values.add(Double.valueOf(89.85d));
      }
      @Override
      public String getColumnName(int column) {
        return "Double";
      }
      @Override
      public Class<?> getColumnClass(int column) {
        return Double.class;
      }
      @Override
      public int getRowCount() {
        return values.size();
      }
      @Override
      public int getColumnCount() {
        return 1;
      }
      @Override
      public Object getValueAt(int rowIndex, int columnIndex) {
        return values.get(rowIndex);
      }
    });
    t.setDefaultRenderer(Double.class, new DefaultTableCellRenderer() {
      private static final long serialVersionUID = 1L;
      @Override
      public Component getTableCellRendererComponent(JTable table,
          Object value, boolean isSelected, boolean hasFocus, int row,
          int column) {
        Double d = (Double)value;
        String s = "$" + String.valueOf(d.doubleValue());
        Component c = super.getTableCellRendererComponent(table, s, isSelected, hasFocus,
            row, column);
        return c;
      }
    });
    t.setAutoCreateRowSorter(true);
    JFrame f = new JFrame();
    f.setSize(320, 200);
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    JScrollPane sp = new JScrollPane(t);
    f.getContentPane().add(sp);
    f.setVisible(true);
  }

} 

```

# python - 在 python 代码中配置服务器端执行时间的选项

> ID：10054692
> 
> 赞同：1
> 
> 时间：2012-04-07T12:58:37.547
> 
> 标签：python, http, profiling, multicore, execution

我有一个用 Python 编写的 HTTP 服务器，它接受一个大的二进制文件（>50MB）并在文件上执行一些与文件相关的计算（解密、解压缩......）。我想对执行这些操作所需的时间有一个很好的估计。我的 python 服务器在 Ubuntu 11.10 上的多 CPU 和多核服务器上运行。

目前我只是在做一个时间差异 (`date.now()`以获得各种操作的执行时间。我知道有几个 Python 模块提供分析功能。但是，我的理解是它们仅限于小代码片段。

我还有什么其他选择？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T13:20:53.637

我会说 cProfile 非常可靠，并且绝对是对使用 date.now() 之类的东西的改进。这是 cProfile 生成的用于比较无用和无用的斐波那契生成器的内容。

```
$ python -m cProfile script.py
         4113777 function calls (1371305 primitive calls) in 1.337 seconds

   Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000    0.000    0.000 cProfile.py:5(<module>)
        1    0.000    0.000    0.000    0.000 cProfile.py:66(Profile)
        1    0.009    0.009    1.337    1.337 script.py:1(<module>)
2692508/30    1.069    0.000    1.268    0.042 script.py:3(fib)
74994/25000    0.058    0.000    0.058    0.000 script.py:9(fibber)
  1346269    0.200    0.000    0.200    0.000 {max}
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
        2    0.001    0.000    0.001    0.000 {range} 
```

这是我使用的代码：

```
import cProfile

def fib(num):
    if num < 3:
        return max(num, 1)
    return fib(num - 1) + fib(num - 2)

fibdict = {0:1, 1:1, 2:2}
def fibber(num):
    if num not in fibdict:
        n = fibber(num - 1) + fibber(num - 2)
        fibdict[num] = n
    return fibdict[num]

a = [fib(i) for i in range(30)]
b = [fibber(i) for i in range(25000)] 
```

cProfile 非常清楚地告诉我 fib 运行的速度有多慢，并为我提供了每次调用时间/调用次数以及在该方法中花费了多少总时间的不错数据。显然这是琐碎/玩具代码，但我经常使用 cProfile 来了解我的代码在哪里花费的时间最多，并且我发现它对于非琐碎代码非常有效。我想它会给你你需要的数据。

# iphone - 如何创建流畅的图像动画

> ID：10054693
> 
> 赞同：1
> 
> 时间：2012-04-07T12:58:38.617
> 
> 标签：iphone, objective-c, ios, xcode, animation

我有这个动画，其中有一个背景图像和 12 个中心针的图像。它运行正常，但每次显示图像和之后的图像时，我只希望它在图像之间平稳运行。我怎样才能做到这一点？

这是我当前的代码：

```
- (IBAction)startAnimation:(id)sender
{
    imgAnimation.frame = CGRectMake(0, 0, 184.5f, 172.5f);
    imgAnimation.center = CGPointMake(160, 164);
    imgAnimation.animationImages = [NSArray arrayWithObjects:
                                [UIImage imageNamed:@"pointer01.png"],
                                [UIImage imageNamed:@"pointer02.png"],
                                [UIImage imageNamed:@"pointer03.png"],
                                [UIImage imageNamed:@"pointer04.png"],
                                [UIImage imageNamed:@"pointer05.png"],
                                [UIImage imageNamed:@"pointer06.png"],
                                [UIImage imageNamed:@"pointer07.png"],
                                [UIImage imageNamed:@"pointer08.png"],
                                [UIImage imageNamed:@"pointer09.png"],
                                [UIImage imageNamed:@"pointer10.png"],
                                [UIImage imageNamed:@"pointer11.png"],
                                [UIImage imageNamed:@"pointer12.png"], nil];
    [imgAnimation setAnimationRepeatCount:5];
    [imgAnimation setAnimationDuration:4.0f];
    [imgAnimation startAnimating]; 
```

}

![测量](../Images/95f5d05a0b6d0249c4e5b9285f7afb1d.png) ![测量](../Images/7238fb54192ae2bce8cff3c5892b81ef.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T13:55:02.843

**编辑**：我最初建议使用 UIView 动画，但它总是采用最短的路线，旋转 90 度而不是 270 度。试试这个，[我可以使用 CGAffineTransformMakeRotation 将视图旋转超过 360 度吗？](https://stackoverflow.com/a/1423495/1318452)

要获得最流畅的针动画，请不要使用图像序列。从 UIImageView 中的单个针图像开始，视图以背景表盘图像为中心。然后`transform`使用旋转变换更改 UIImageView 图层的属性。

排列好几何图形后，使用 Core Animation 动画变换通过适当的角度范围变化。

只是为了详细说明，假设这`imgAnimation`是一个 UIImageView：

```
- (IBAction)startAnimation:(id)sender
{
    // This assumes that the center of the needle image is the center of the dial.  If they aren't, it's probably simplest to resize the needle image so it is centered.
    imgAnimation.frame = CGRectMake(0, 0, 184.5f, 172.5f);
    imgAnimation.center = CGPointMake(160, 164);

    // The needle image used should show the needle pointing straight up, or some other known direction.
    imgAnimation.image = [UIImage imageNamed:@"pointer06.png"];
    // Position the needle in its position before animating.
    [imgAnimation.layer setTransform:CATransform3DMakeRotation(-M_PI*3/4, 0, 0, 1)];

    // Construct an animation moving the needle to its end position.
    // Mose of these properties should be self-explanatory.  Look up the CABasicAnimation Class Reference if not.
    CABasicAnimation *needleAnim = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
    needleAnim.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    needleAnim.duration = 4;
    needleAnim.repeatCount = 5;
    needleAnim.autoreverses = YES;
    // Setting fillMode means that, once the animation finishes, the needle stays in its end position.
    needleAnim.fillMode = kCAFillModeForwards;
    needleAnim.removedOnCompletion = YES;
    needleAnim.toValue = [NSNumber numberWithFloat:M_PI*3/4];

    // Add the animation to the needle's layer.
    [senderView.layer addAnimation:needleAnim forKey:nil];
} 
```

# c# - 如何根据条件使用 FROM..SELECT 选择 Linq 元素？

> ID：10054695
> 
> 赞同：2
> 
> 时间：2012-04-07T12:59:07.187
> 
> 标签：c#, linq-to-xml

我正在使用 from..select linq 查询从 XML 文件中读取数据，数据量很大。我能读取的最大数据集是 1100 行，每行由 100 个字符组成。这会导致我的手机挂起并且应用程序崩溃。在模拟器上，它工作正常，尽管加载需要相当长的时间。

现在我想要的是基于一些我想要在查询中包含数据元素的条件。例如，我现在拥有的是...

```
 var dataSet = from r in something.Elements("chapter")
               select new dictChapter{
                   Name = r.Attribute("Name").Value,
                   Desc1 = r.Attribute("Description1").Value,
                   Desc2 = r.Attribute("Description2").Value,
                   Desc3 = r.Attribute("Description3").Value
               };
ListBox.DataContext = dataSet; 
```

但我想根据设置选择描述。我想要类似的东西（我知道它不起作用，但我想解释一下我想做什么）

```
 var dataSet = from r in something.Elements("chapter")
               select new dictChapter{
                   Name = r.Attribute("Name").Value,
                   if (ShowDesc1 == true)
                       Desc1 = r.Attribute("Description1").Value,

                   if (ShowDesc2 == true)
                       Desc2 = r.Attribute("Description2").Value,

                   if (ShowDesc3 == true)
                       Desc3 = r.Attribute("Description3").Value
               };
ListBox.DataContext = dataSet; 
```

1.  如何在 C Sharp 中实现这一点？
2.  我的问题有更好的解决方案吗？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T13:03:01.733

使用[条件运算符“ ***?:*** ”](http://msdn.microsoft.com/en-us/library/ty67wk28.aspx)

```
var dataSet = from r in something.Elements("chapter")
               select new dictChapter{
                   Name = r.Attribute("Name").Value,
                   Desc1 = ShowDesc1 ? r.Attribute("Description1").Value : String.Empty,
                   Desc2 = ShowDesc2 ? r.Attribute("Description2").Value : String.Empty,
                   Desc3 = ShowDesc3 ? r.Attribute("Description3").Value : String.Empty,

               }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T13:04:40.937

您可以尝试以下方法：

```
var dataSet = from r in something.Elements("chapter")
               select new dictChapter{
                   Name = r.Attribute("Name").Value,
                   Desc1 = (ShowDesc1 ? r.Attribute("Description1").Value : null),
                   Desc2 = (ShowDesc2 ? r.Attribute("Description2").Value : null),
                   Desc3 = (ShowDesc3 ? r.Attribute("Description3").Value : null),
               }; 
```

这不是您想要的，因为所有 Desc1-3 属性总是在每个元素上设置，但如果 ShowDesc1-3 为 false，它们将设置为 null。

# iphone - 无法在委托方法中更改 UIButton 文本颜色

> ID：10054699
> 
> 赞同：1
> 
> 时间：2012-04-07T12:59:32.060
> 
> 标签：iphone, objective-c, ios, xcode

所以我有一个调用 API 方法的类，一旦请求完成，它会在我的控制器视图上调用一个委托方法，我在其中执行以下操作：

```
[self.myButton setEnabled:NO];
self.myButton.titleLabel.textColor = [UIColor grayColor];
NSLog(@"%@", self.myButton.titleLabel.textColor); 
```

将文本颜色从蓝色更改为灰色，让用户知道他/她不能第二次单击该按钮。

但是，颜色没有变化。这是调试日志中的内容：

```
UIDeviceWhiteColorSpace 0.5 1 
```

为什么？当我在以下情况下做同样的事情时：

```
- (void)viewWillAppear:(BOOL)animated 
```

它起作用并将按钮上的文本颜色更改为灰色。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T13:04:37.690

您可以在 viewDidLoad 中执行此操作

```
[self.myButton setTitleColor:[UIColor blueColor] forState:UIControlStateNormal];
[self.myButton setTitleColor:[UIColor grayColor] forState:UIControlStateDisabled]; 
```

当您执行 setEnabled:NO 时，它将自动切换到禁用状态，因此文本颜色将设置为灰色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T13:02:08.253

您应该在主线程上进行所有 UI 更新。这可能就是问题所在。

# iphone - 如何识别 Iphone 来电并显示通知？

> ID：10054706
> 
> 赞同：8
> 
> 时间：2012-04-07T13:00:39.590
> 
> 标签：iphone, objective-c, ios, xcode

我需要创建应用程序，例如识别 iphone 中的来电并检查我们数据库中的来电号码。然后想要显示通知该特定号码在数据库中存储了哪些信息。这些所有功能都希望在用户接听电话时运行。

这可能吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T13:05:57.923

您可能想在[CoreTelephony](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/CoreTelephonyFrameworkReference/_index.html)中开始搜索。话虽如此，如果有来电，iOS 的呼叫处理事件将接管您的应用程序。换句话说，您的应用程序将在来电时暂停，并在通话完成后移回前台。您可以使用 CoreTelephony 访问 CTCallCenter，其中包含一组 CTCall（正在进行的呼叫）。据我所知，CTCall 不包含通话的电话号码。此外，您无法阻止 iOS 为您的应用程序提供后台处理呼叫。

# android - 直接从麦克风播放声音到扬声器 Android

> ID：10054708
> 
> 赞同：3
> 
> 时间：2012-04-07T13:00:45.743
> 
> 标签：android, audio, routes

我只是想制作一个可以用作扬声器的应用程序。进入麦克风（耳机）的任何东西都必须通过外部扬声器播放。我尝试了一些，我遵循了以下链接程序，但我无法做到。有没有其他方法可以解决这个问题。请帮我。提前致谢。

[Android - 让音频通过听筒播放](https://stackoverflow.com/questions/2119060/android-getting-audio-to-play-through-earpiece)

[如何直接在android上从麦克风播放声音到扬声器？](https://stackoverflow.com/questions/4654779/how-to-play-sound-from-microphone-to-speaker-directly-on-android)

```
boolean isRecording; //currently not used
AudioManager am;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    am = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
    Record record = new Record();
    record.run();

}

public class Record extends Thread
{

    static final int bufferSize = 200000;
    final short[] buffer = new short[bufferSize];
    short[] readBuffer = new short[bufferSize];

    public void run() {
        isRecording = true;
        android.os.Process.setThreadPriority
        (android.os.Process.THREAD_PRIORITY_URGENT_AUDIO);

        int buffersize = AudioRecord.getMinBufferSize(11025,
                AudioFormat.CHANNEL_CONFIGURATION_MONO,
                AudioFormat.ENCODING_PCM_16BIT);

        AudioRecord arec = new AudioRecord
        (MediaRecorder.AudioSource.MIC,
                11025,

                AudioFormat.CHANNEL_CONFIGURATION_MONO,

                AudioFormat.ENCODING_PCM_16BIT,
                buffersize);

        AudioTrack atrack = new AudioTrack
        (AudioManager.STREAM_VOICE_CALL,
                11025,

                AudioFormat.CHANNEL_CONFIGURATION_MONO,

                AudioFormat.ENCODING_PCM_16BIT,
                buffersize,

                AudioTrack.MODE_STREAM);

        am.setRouting(AudioManager.MODE_NORMAL,
                AudioManager.ROUTE_EARPIECE,

                AudioManager.ROUTE_ALL);

        Log.d("SPEAKERPHONE", "Is speakerphone on? : " + am.isSpeakerphoneOn());

        atrack.setPlaybackRate(11025);

        byte[] buffer = new byte[buffersize];
        arec.startRecording();
        atrack.play();

        while(isRecording) {
            arec.read(buffer, 0, 
                    buffersize);
            atrack.write(buffer, 0,
                    buffer.length);
        }

        arec.stop();
        atrack.stop();
        isRecording = false;
    }
} 
```

# java - 多路树可比接口问题

> ID：10054709
> 
> 赞同：1
> 
> 时间：2012-04-07T13:00:57.577
> 
> 标签：java, generics, b-tree, multiway-tree

我正在创建一个通用的多路树，我知道它只会采用四种类型（整数、双精度、字符串和字符）中的一种。我在使用可比较的界面和插入功能时遇到问题。这是我到目前为止编写的相关代码：

```
public class BTree<T extends Comparable<? super T>>
{
    private int m=0, height=0, numkeys=0;
    private BTreeNode<T> root;
    boolean ready=false;

class BTreeNode<T extends Comparable<? super T>>
{
    boolean leaf = true;
    int keyTally = 1;
    Comparable<T> keys[] = new Comparable[m-1];
    BTreeNode<T> references[] = new BTreeNode[m];
    BTreeNode( T key)
    {
        keys[0] = (Comparable<T>) key;
        for ( int i=0; i<m; i++)
            references[i] = null;
    }
}

public BTree( int c)
{
    root=null;
    m=c;
}

// Not finished - can't test due to other bug
public boolean insertElement( T elem)
{
    insert( elem, root, height);
    numkeys++;
    return true;
}

// And now the ploblem function

private BTreeNode<T> insert( T elem, BTreeNode<T> node, int hvar)
{
    int i;

    BTreeNode<T> temp = null;

    if (hvar == 0)
    {
        for (i = 0; i < node.keyTally; i++)
            if ( elem.compareTo(node.keys[i]) < 0)
                break;
    }
    else
    {
        for (i = 0; i < node.keyTally; i++)
        {
            if ((i+1 == node.keyTally) || elem.compareTo(node.keys[i]) < 0)
            {
                Node n = insert( elem, node.references[i++], hvar-1);
                if (n == null)
                    return null;

                temp.keys[0] = n.keys[0];
                temp.references[0] = n;
                break;
            }
        }
    }

    for (int j = node.keyTally; j > i; j--)
        node.keys[j] = node.keys[j-1];
    node.children[i] = temp;
    node.keyTally++;
    if (node.keyTally < m)
        return null;
    else
    {
        BTreeNode<T> newNode = null;
        newNode.keyTally = m/2;
        for( i=0; i<m/2; i++)
        newNode.references[i] = node.references[m/2+i];
        return newNode;
    }
    return null;
} 
```

这是我的控制台输出：

```
BTree.java:169: error: method compareTo in interface Comparable<T#2> cannot be applied
to given types;
if ( elem.compareTo(node.keys[i]) < 0)
         ^
required: CAP#1
found: Comparable<T#1>
reason: actual argument Comparable<T#1> cannot be converted to CAP#1 by method
invocation conversion
where T#1,T#2 are type-variables:
T#1 extends Comparable<? super T#1> declared in class BTree
T#2 extends Object declared in interface Comparable
where CAP#1 is a fresh type-variable:
CAP#1 extends Object super: T#1 from capture of ? super T#1

BTree.java:176: error: method compareTo in interface Comparable<T#2> cannot be
applied to given types;
if ((i+1 == node.keyTally) || elem.compareTo(node.keys[i]) < 0)
                                  ^
required: CAP#1
found: Comparable<T#1>
reason: actual argument Comparable<T#1> cannot be converted to CAP#1 by
method invocation conversion
where T#1,T#2 are type-variables:
T#1 extends Comparable<? super T#1> declared in class BTree
T#2 extends Object declared in interface Comparable
where CAP#1 is a fresh type-variable:
CAP#1 extends Object super: T#1 from capture of ? super T#1

BTree.java:178: error: cannot find symbol
Node n = insert( elem, node.references[i++], hvar-1);
^
symbol:   class Node
location: class BTree<T>
where T is a type-variable:
T extends Comparable<? super T> declared in class BTree

BTree.java:191: error: cannot find symbol
node.children[i] = temp;
    ^
symbol:   variable children
location: variable node of type BTree<T>.BTreeNode<T>
where T is a type-variable:
T extends Comparable<? super T> declared in class BTree

Note: Some input files use unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
4 errors 
```

我不明白我在可比较接口上做错了什么，使它抱怨 compareTo 方法。另外，我想知道如果使用字符串类型会做什么？我认为它只会按字母顺序查看哪个先出现。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:56:50.700

这是因为`node.keys[i]`是类型`Comparable<T>`，不是`T`。反过来尝试比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T19:25:08.003

我建议您将 from 的类型更改为`keys`to `Comparable<T>[]`（`T[]`因为这是您想要使用它的类型；您只需要小心不要将其返回到课堂之外）；`T`或者您每次从中获得一些东西时手动转换为：`(T)node.keys[i]`

# android - 如何从android中的json在可扩展列表视图中动态创建组和子项？

> ID：10054711
> 
> 赞同：7
> 
> 时间：2012-04-07T13:01:16.257
> 
> 标签：android, json, expandablelistview

我正在开发 Android 中的客户端-服务器项目。我需要从给定的 URL 解析 JSON 并将其放在`ExpandableListView`. 在 JSON 响应中，我正在获取包含数组的节点的数据。所以，我必须将 main 放在`JsonArray`Groups 中`ExpandableListView`。它工作正常。

我可以找出有多少组来自 JSON，但是当我尝试根据来自服务器的数据将孩子放入每个组中时，就会出现问题。我的代码只将第一个孩子放在第一组中，但是当我点击第二个孩子时，它显示错误。

我需要在各自的组内放置“ID”和“用户名”（例如：电子邮件、传真、上传）。我的代码可以将一个子信息放在一组中，但是当我单击第二组时，它会崩溃。任何形式的帮助将不胜感激。

**所以，我的查询是，如何根据服务器数据动态创建组并在每个子项中放置子数据？**

***这是日志中的错误：***

```
04-07 17:49:02.194: E/AndroidRuntime(13285): FATAL EXCEPTION: main
04-07 17:49:02.194: E/AndroidRuntime(13285): java.lang.IndexOutOfBoundsException: Invalid index 1, size is 1
04-07 17:49:02.194: E/AndroidRuntime(13285):    at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
04-07 17:49:02.194: E/AndroidRuntime(13285):    at java.util.ArrayList.get(ArrayList.java:304)
04-07 17:49:02.194: E/AndroidRuntime(13285):    at android.widget.SimpleExpandableListAdapter.getChildrenCount(SimpleExpandableListAdapter.java:255)
04-07 17:49:02.194: E/AndroidRuntime(13285):    at android.widget.ExpandableListConnector.refreshExpGroupMetadataList(ExpandableListConnector.java:561)
04-07 17:49:02.194: E/AndroidRuntime(13285):    at android.widget.ExpandableListConnector.expandGroup(ExpandableListConnector.java:682)
04-07 17:49:02.194: E/AndroidRuntime(13285):    at android.widget.ExpandableListView.handleItemClick(ExpandableListView.java:561)
04-07 17:49:02.194: E/AndroidRuntime(13285):    at android.widget.ExpandableListView.performItemClick(ExpandableListView.java:521)
04-07 17:49:02.194: E/AndroidRuntime(13285):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:2514)
04-07 17:49:02.194: E/AndroidRuntime(13285):    at android.widget.AbsListView$1.run(AbsListView.java:3168)
04-07 17:49:02.194: E/AndroidRuntime(13285):    at android.os.Handler.handleCallback(Handler.java:605)
04-07 17:49:02.194: E/AndroidRuntime(13285):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-07 17:49:02.194: E/AndroidRuntime(13285):    at android.os.Looper.loop(Looper.java:137)
04-07 17:49:02.194: E/AndroidRuntime(13285):    at android.app.ActivityThread.main(ActivityThread.java:4424)
04-07 17:49:02.194: E/AndroidRuntime(13285):    at java.lang.reflect.Method.invokeNative(Native Method)
04-07 17:49:02.194: E/AndroidRuntime(13285):    at java.lang.reflect.Method.invoke(Method.java:511) 
```

**`JSON response`**

```
{   "email":[   
    {"ID":"123","username":"dipakadmin"},
    {"ID":"3233","username":"raju"},
    {"ID":"5445","username":"hussain"}
    ]
,
"fax":[ 
    {"ID":"6665","username":"mohammad"},
    {"ID":"9877","username":"raj"},
    {"ID":"87655","username":"aryan"}
    ]
,
"upload":
    [   
    {"ID":"132322","username":"raja"},
    {"ID":"544333","username":"bala"},
    ]
} 
```

这只是 JSON 响应的一个示例。真实的响应有很多标签。

***ExpandableListActivity 的代码示例如下：***

```
package com.ExpandableListActivity;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import android.app.ExpandableListActivity;
import android.os.Bundle;
import android.util.Log;
import android.widget.SimpleExpandableListAdapter;
import android.widget.TextView;

public class DocumentCenter extends ExpandableListActivity {

    public static JSONObject  jsonDocu=null;
    JSONArray jArray = null;
    JSONObject json_data = null;
    JSONObject root = null;

    List<List<Map<String, String>>> childs;

    List<Map<String, String>> child1;
    List<Map<String, String>> child2;
    List<Map<String, String>> child3;
    SimpleExpandableListAdapter adapter;

    Map<String, String> childdata1;

    public static String url3=null;
    String strEmailNull=null;
    String strFaxNull=null;
    String strUploadNull=null;
    public String user=null;
    TextView txtMLSID;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main2);

        user= TabBarExample.getJsonUser;
        Log.e("log_tag","USERNAME On Document : "+user); 

        List<Map<String, String>> groups = new ArrayList<Map<String, String>>();

        child1 = new ArrayList<Map<String, String>>();
        child2 = new ArrayList<Map<String, String>>();
        child3 = new ArrayList<Map<String, String>>();  

        url3 ="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx";
        Log.e("log_tag","URL on DOCUMENT : "+url3); 
        try {
            jsonDocu = JSONfunctions1.getJSONfromURL(url3);
            JSONArray ary = jsonDocu.names();

            Log.e("log_tag","ary : "+ary .toString()); 

            for (int i1 = 0; i1 < ary.length(); i1++) {
                String value =      ary.get(i1).toString();
                Log.e("log_tag","value : "+value); 
                strEmailNull=   jsonDocu.getString(value);
                if (!strEmailNull.equals("null")){
                    try{
                        Map<String, String> group1 = new HashMap<String, String>();
                        group1.put("group", value);
                        //group1.put("group", value+(i1+1));
                        groups.add(group1);

                        JSONArray  email = jsonDocu.getJSONArray(value);
                        for(int i=0;i<email.length() ;i++){                     
                            childdata1 = new HashMap<String, String>();

                            JSONObject e = email.getJSONObject(i+1);
                            childdata1.put("child", e.getString("ID"));
                            childdata1.put("child1",  "Name:  "+e.getString("name"));
                            childdata1.put("child2", "Size:  "+e.getString("size"));
                            childdata1.put("child3",  "Update:  "+e.getString("lastUpdate"));

                            child1.add(childdata1); 
                            childs = new ArrayList<List<Map<String, String>>>();
                        }
                    }catch(JSONException e){
                        Log.e("log_tag", "Error parsing data "+e.toString());
                    }
                }
            }
            childs.add(child1);
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        adapter = new SimpleExpandableListAdapter(
            this, groups, R.layout.groups2, new String[] { "group" },
            new int[] { R.id.group }, childs, R.layout.childs2,
            new String[] { "child1","child2" ,"child3"}, new int[] { R.id.child1, R.id.child2, R.id.child3});
        setListAdapter(adapter);
    }

    @Override
    public boolean setSelectedChild(int groupPosition, int childPosition,
        boolean shouldExpandGroup) {
        //do something
        Log.e("log_tag","setSelectedChild: "); 
        return super.setSelectedChild(groupPosition, childPosition,
            shouldExpandGroup);
    }

    @Override
    public void setSelectedGroup(int groupPosition) {
        //do something

        Log.e("log_tag","setSelectedGroup: "); 
        super.setSelectedGroup(groupPosition);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T06:57:17.213

这就是我将如何做到的。当然，您可以像解析一样使用 parse 。但是，我会使用杰克逊库并根据响应创建一个对象类，并使用看起来更优雅的 ObjectMapper，它可以节省您的解析时间。您可以根据需要在此处添加更多字段，例如内部传真和电子邮件类和列表：

```
public class ResponseObject {

private List<Email> email;

/**
 * @return the email
 */
public List<Email> getEmail() {
    return email;
}

/**
 * @param email
 *            the email to set
 */
public void setEmail(List<Email> email) {
    this.email = email;
}

public static class Email {
    private Integer ID;
    private String username;

    /**
     * @return the ID
     */
    public Integer getID() {
        return ID;
    }

    /**
     * @param ID
     *            the ID to set
     */
    public void setID(Integer ID) {
        ID = ID;
    }

    /**
     * @return the username
     */
    public String getUsername() {
        return username;
    }

    /**
     * @param username
     *            the username to set
     */
    public void setUsername(String username) {
        this.username = username;
    }
}
} 
```

然后像这样使用 BaseExpandableListAdapter ，根据需要进行更改并添加视图：

```
import java.util.ArrayList;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseExpandableListAdapter;

public class ResponseAdapter extends BaseExpandableListAdapter {
private ArrayList<ResponseObject> responseList = new ArrayList<ResponseObject>();

public ResponseAdapter(ArrayList<ResponseObject> responseObject) {
    this.responseList = responseObject;
}

@Override
public Object getChild(int groupPosition, int childPosition) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public long getChildId(int groupPosition, int childPosition) {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public View getChildView(int groupPosition, int childPosition,
        boolean isLastChild, View convertView, ViewGroup parent) {
    int ID = responseList.get(groupPosition).getEmail().get(childPosition)
            .getID();
    String username = responseList.get(groupPosition).getEmail()
            .get(childPosition).getUsername();
    return null;
}

@Override
public int getChildrenCount(int groupPosition) {
    return responseList.get(groupPosition).getEmail().size();
}

@Override
public Object getGroup(int groupPosition) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public int getGroupCount() {
    return responseList.size();
}

@Override
public long getGroupId(int groupPosition) {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public View getGroupView(int groupPosition, boolean isExpanded,
        View parent, ViewGroup viewGroup) {
    // Email group goes here
    return null;
}

@Override
public boolean hasStableIds() {
    // TODO Auto-generated method stub
    return false;
}

@Override
public boolean isChildSelectable(int arg0, int arg1) {
    // TODO Auto-generated method stub
    return false;
}

} 
```

# visual-c++ - dllmain 函数和导出函数作为线程运行还是作为单独的进程运行？

> ID：10054718
> 
> 赞同：0
> 
> 时间：2012-04-07T13:02:06.007
> 
> 标签：visual-c++, dll, dllexport, entry-point

这更多是概念性问题，可能相当基本，我并没有真正找到了解 dll 的好资源，

我需要创建 dll（加载时动态链接），它需要 function1 在加载 dll 时开始并一直在后台运行，

而function2需要导出，它将被应用程序调用多次，

function1 提供了需要在 function2 中使用的对象，

我打算在导出函数2时使用函数1作为入口函数（dllmain）。

作为系统调用的 dllmain 函数，而应用程序调用的导出函数，它们是作为两个线程运行还是作为两个单独的进程运行？

如上所述使用 dllmain 和 export 来完成我的需要是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T21:16:02.017

Jeffrey Richter 的“Advanced Windows”是了解 DLL 的好地方。

在你的情况下，这样的事情就可以完成。

```
BOOL WINAPI DllMain(HINSTANCE hinstDLL,DWORD fdwReason,LPVOID lpvReserved)
{
   if (fdwReason == DLL_PROCESS_ATTACH)
   {
       //start thread with function1()
       begin_thread_ex(..., &function1, ....)
   }
}

__declspec(dllexport) function2()
{
    ....
} 
```

# android - 如何为我的应用程序创建自定义搜索框？

> ID：10054726
> 
> 赞同：0
> 
> 时间：2012-04-07T13:03:37.187
> 
> 标签：android, android-edittext, customization, search-box

如何为我的 android 应用程序制作自定义搜索框？像这样的东西，例如： ![在此处输入图像描述](../Images/ef627e4ff2644d68ffbd5afe9eb04772.png)

或者如果很难，是否可以`SearchManager`在本地应用程序中使用 Android？

![在此处输入图像描述](../Images/3a0932d78d551e2fad49fa7f467b200a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T14:37:44.803

正如 bughi 所说，为您的小部件使用自定义背景 9-patch 可绘制对象。第二个图像由彼此相邻放置的 EditText 和 ImageButton 组成。对 EditText 使用像这样的![EditText 的背景可绘制](../Images/e19b905809b02c3470c6dd02d29ee1c5.png)9-patch drawable，对 ImageButton使用像这样的 9-patch drawable ![ImageButton 的背景可绘制](../Images/b3a9b399a988ae59dcacc16c7d62c347.png)。当然使用选择器作为`android:background`小部件状态正常，按下和聚焦。

第一个图像也可以通过使用属性来实现`android:drawableRight`。小部件的重写`onTouchEvent()`方法可能如下所示：

```
public boolean onTouchEvent(MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_UP && event.getX() >= getWidth() - getCompoundPaddingRight()) {
        // search drawable was touched
    }
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T13:20:05.313

只需使用您自己的图像而不是默认图像作为背景。

对于`EditText`视图，我建议查看[9-patch](http://developer.android.com/guide/developing/tools/draw9patch.html)以便能够在任何屏幕上平滑调整大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-04T01:36:51.043

对于背景，我认为使用这样的可绘制形状更容易：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <corners android:radius="10dp" />

    <solid android:color="@android:color/white" />

    <padding 
        android:left="8dp"
        android:right="8dp"
        android:top="8dp"
        android:bottom="8dp" />

</shape> 
```

半径为背景提供了圆形边框，并且可以轻松调整，改变填充的大小也是如此。

# actionscript-3 - 在第 1 帧中仅导出加载程序图像，但加载程序仍仅以 100% 显示

> ID：10054727
> 
> 赞同：0
> 
> 时间：2012-04-07T13:03:40.157
> 
> 标签：actionscript-3, flash, preloader

正如标题所说，文件加载正确，但加载屏幕只在最后闪烁。

在第 1 帧中导出的唯一内容是加载程序图像，而且非常小。

是否有可能有一个正在加载的队列并且加载器图像位于该队列的底部？因为这是添加到项目中的最后一件事

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T13:33:59.937

如果您的预加载器仅在文件加载后显示，这意味着您仍有其他对象链接到第 1 帧。Flash 对此非常挑剔，无论您的设置如何，都很容易将事物拉到第 1 帧。编译时，Flash 会构建一个依赖关系图来确定每一帧需要哪些项目。如果它认为在导出框架设置之前需要资源，它将忽略该设置并将资源推送到该框架上。特别是，**您的文档类直接引用的任何类都将被自动拉到第 1 帧。**

检查文件、发布设置、Flash 中的“生成大小报告”可以帮助您查看有多少数据被导出到第 1 帧。这里有一些技巧可以确保所有内容都链接到正确的帧：

*   在发布设置、Flash、ActionScript 设置中，**确保“类的导出框架”设置为 2**或更高。
*   **确保库符号**在其链接属性中显示“在第 2 帧上导出”。较旧版本的 Flash 可能会在第 1 帧上导出它们，而不管类导出帧如何。在这种情况下，您必须使用老式方法取消选中“在第 1 帧导出”选项，然后手动将这些符号拖到第 2 帧的时间线上。
*   **不要直接从您的文档类或主时间轴上引用类。**Document 类及其引用的所有资源始终放置在第 1 帧上。无论何时您`var f : MyClass;`在文档类或根时间轴上执行此操作，您都在引用`MyClass`，Flash 会自动将其拉到第 1 帧上。

为了避免在你的预加载器中直接引用你的主应用程序类，你想间接地实例化它，使用这样的东西：

```
var gameClass : Class = flash.utils.getDefinitionByName("Game") as Class;
var game : Sprite = new gameClass(); 
```

在这种情况下，您的 Preloader 成为文档类，并在 SWF 加载时间接创建 Game 类。这避免了对游戏及其内容的任何直接引用。

# linux - 用于比较 tarball、SRPM 和源代码文件的 Linux 软件

> ID：10054728
> 
> 赞同：1
> 
> 时间：2012-04-07T13:03:40.823
> 
> 标签：linux, debugging, compilation, rpm

我正在寻找可以比较源代码包（tarball、SRPM 等）并显示源代码差异的 Linux 软件。能推荐一些好的软件吗？

最好的祝愿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T21:43:20.980

试试 gendiff（通常与 RPM 一起打包）。

# algorithm - 在恒定空间中创建 1..N 的随机排列

> ID：10054732
> 
> 赞同：25
> 
> 时间：2012-04-07T13:03:53.590
> 
> 标签：algorithm, random

我希望枚举固定空间中数字 1..N 的随机排列。这意味着我无法将所有数字存储在列表中。原因是 N 可能非常大，超过可用内存。我仍然希望能够一次遍历这样一个数字排列，每个数字只访问一次。

我知道对于某些 N 可以做到这一点：许多随机数生成器随机但完全地循环遍历它们的整个状态空间。状态大小为 32 位的良好随机数生成器将发出数字 0..(2^32)-1 的排列。每个数字恰好一次。

例如，我想选择 N 为任何数字，而不是受限于 2 的幂。有这个算法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-07T13:49:31.400

最简单的方法可能是只为比您关心的更大范围创建一个全范围 PRNG，当它生成的数字大于您想要的数字时，只需将其扔掉并获得下一个。

另一种几乎相同的变体的可能性是首先使用线性反馈移位寄存器（LFSR）来生成数字。这有几个优点：首先，LFSR 可能比大多数 PRNG 快一点。其次，（我相信）设计一个产生接近您想要的范围的数字的 LFSR 会更容易一些，并且仍然确保它以（伪）随机顺序循环其范围内的数字，没有任何重复。

无需在细节上花费大量时间，LFSR 背后的数学就已经得到了相当彻底的研究。生成一个遍历其范围内所有数字而不重复的数字，只需要选择一组对应于不可约多项式的“抽头”。如果您不想自己搜索，可以很容易地找到几乎任何合理大小的已知表格（例如，快速浏览一下，维基百科文章列出了它们最大 19 位的大小）。

如果没有记错的话，至少有一个可能的位大小的不可约多项式。这意味着在最坏的情况下，您可以创建一个生成器，其范围大约是您需要的两倍，因此平均而言，您会（大约）丢弃您生成的所有其他数字。鉴于 LFSR 的速度，我猜你可以做到这一点并且仍然保持相当可接受的速度。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-07T13:42:34.973

一种方法是

1.  找到一个`p`大于的素数`N`，最好不要大很多。
2.  `g`求单位模的原根`p`，即一个数`1 < g < p`，`g^k ≡ 1 (mod p)`当且仅当`k`是 的倍数`p-1`。
3.  遍历`g^k (mod p)`for `k = 1, 2, ...`，忽略大于 的值`N`。

对于每个素数`p`，都有`φ(p-1)`统一的原始根，所以它有效。但是，可能需要一段时间才能找到。一般来说，找到一个合适的素数要容易得多。

为了找到一个原始根，我知道什么比试错更好，但是可以通过`p`适当地选择素数来增加快速找到的概率。

由于原根的数量是`φ(p-1)`，如果`r`在 1 到 的范围内随机选择，那么`p-1`直到找到原根的预期尝试次数是，因此`(p-1)/φ(p-1)`应该选择相对较大的，这意味着必须有很少的不同素数除数（最好只有大除数，因子 2 除外）。`p``φ(p-1)``p-1`

除了随机选择，还可以按顺序尝试是否`2, 3, 5, 6, 7, 10, ...`是一个原始根，当然跳过完美幂（或者不，它们通常很快被消除），这应该不会对所需的尝试次数造成很大影响。

所以它归结为检查一个数字是否`x`是一个原始根模`p`。如果`p-1 = q^a * r^b * s^c * ...`有不同的素数`q, r, s, ...`，`x`是原根当且仅当

```
x^((p-1)/q) % p != 1
x^((p-1)/r) % p != 1
x^((p-1)/s) % p != 1
... 
```

因此需要一个体面的模幂运算（通过重复平方的幂运算非常适合，每一步都减少模数）。和一个很好的方法来找到的主要因素分解`p-1`。但是请注意，即使是简单的试除法也只有 O(√p)，而置换的生成是 Θ(p)，因此分解是最优的并不是最重要的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-11T05:32:11.310

另一种方法是使用分组密码。有关详细信息，请参阅[此博客文章](http://blog.notdot.net/2007/9/Damn-Cool-Algorithms-Part-2-Secure-permutations-with-block-ciphers)。

该博客发布了论文[Ciphers with Arbitrary Finite Domains](http://web.cs.ucdavis.edu/~rogaway/papers/subset.pdf)的链接，其中包含一系列解决方案。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-03-26T03:28:55.607

考虑素数 3。要充分表达所有可能的输出，请这样想...

```
bias + step mod prime 
```

这`bias`只是一个偏移偏差。`step`是一个累加器（`1`例如，它只是按`0, 1, 2`顺序排列，而`2`结果是`0, 2, 4`）并且`prime`是我们想要生成排列的素数。

例如。一个简单的序列`0, 1, 2`将是......

```
0 + 0 mod 3 = 0
0 + 1 mod 3 = 1
0 + 2 mod 3 = 2 
```

修改其中的几个变量一秒钟，我们将采用`bias`of`1`和`step`of `2`（仅用于说明）...

```
1 + 2 mod 3 = 0
1 + 4 mod 3 = 2
1 + 6 mod 3 = 1 
```

你会注意到我们制作了一个完全不同的序列。集合中没有数字重复，所有数字都被表示（它是双射的）。偏移和偏差的每个独特组合将导致`prime!` 该集合的一种可能排列。在你的情况下`prime`，`3`你会看到有`6`不同的可能排列：

```
0,1,2
0,2,1
1,0,2
1,2,0
2,0,1
2,1,0 
```

如果你对上面的变量进行数学运算，你不会认为它会产生相同的信息要求......

```
1/3! = 1/6 = 1.66.. 
```

……对……

```
1/3 (bias) * 1/2 (step) => 1/6 = 1.66.. 
```

限制很简单，`bias`必须在范围内`0..P-1`并且`step`必须在范围内（我在自己的工作中`1..P-1`一直在使用`0..P-2`和添加算术）。`1`除此之外，它适用于所有素数，无论它们有多大，并且将排列它们的所有可能的唯一集合，而不需要超过几个整数的内存（每个在技术上比素数本身需要的位数略少）。

**请**注意，此生成器并非旨在用于生成数量上不是素数的集合。这样做是完全有可能的，但不建议出于安全敏感的目的，因为它会引入定时攻击。

也就是说，如果您想使用此方法生成一个非素数的集合序列，您有两个选择。

首先（也是最简单/最便宜的），选择比您正在寻找的集合大小稍大的素数，并让您的生成器简单地丢弃任何不属于的东西。再一次，**危险**，如果这是一个安全敏感的应用程序，这是一个非常糟糕的主意。

其次（迄今为止最复杂和最昂贵的），您可以认识到所有数字都由质数组成，并创建多个生成器，然后为集合中的每个元素生成一个乘积。换句话说，一个`n`of`6`将涉及所有可能匹配的素数生成器`6`（在这种情况下，`2`和`3`），按顺序相乘。这既昂贵（尽管在数学上更优雅）也引入了定时攻击，因此更不推荐使用。

最后，如果你需要一个生成器`bias`和或`step`......你为什么不使用同一系列的另一个:)。突然之间，您非常接近于创建真正的简单随机样本（通常这并不容易）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-09-15T17:23:12.073

LCG（`x=(x*m+c)%b`样式生成器）的根本弱点在这里很有用。

如果生成器是正确形成的，那么`x%f`它也是所有低于的值的重复序列`f`（`f`如果因子为`b`）。

由于`b`通常是 2 的幂，这意味着您可以采用 32 位生成器并通过屏蔽最高位将其减少为 n 位生成器，并且它将具有相同的全范围属性。

这意味着您可以通过选择适当的掩码将丢弃值的数量减少到少于 N。

不幸的是，由于与上面给出的完全相同的原因，LCG 是一个糟糕的生成器。

此外，这与我在@JerryCoffin 的回答的评论中指出的完全相同的弱点。它总是会产生相同的序列，而种子控制的唯一事情是在该序列中从哪里开始。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-09T13:18:27.877

这是一些[SageMath代码，应该按照](https://www.sagemath.org/)[Daniel Fischer 建议](https://stackoverflow.com/a/10054982/640584)的方式生成随机排列：

```
def random_safe_prime(lbound):
    while True:
        q = random_prime(lbound, lbound=lbound // 2)
        p = 2 * q + 1
        if is_prime(p):
            return p, q

def random_permutation(n):
    p, q = random_safe_prime(n + 2)

    while True:
        r = randint(2, p - 1)
        if pow(r, 2, p) != 1 and pow(r, q, p) != 1:
            i = 1
            while True:
                x = pow(r, i, p)
                if x == 1:
                    return

                if 0 <= x - 2 < n:
                    yield x - 2

                i += 1 
```

# birt - 如果交叉表不包含数据，如何显示默认消息

> ID：10054734
> 
> 赞同：0
> 
> 时间：2012-04-07T13:04:02.323
> 
> 标签：birt

我对 Birt Tool 很陌生

如果数据立方体不包含数据，我可以隐藏交叉选项卡，但我的问题是我无法显示默认消息，如“未找到记录”

请给我一些建议。

进阶谢谢…………

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:37:37.283

将新表添加到交叉表下的报表中，绑定到与交叉表相同的数据源，并将所需的消息（“未找到记录”）作为文本项添加到报表基础。将 Text 项的 Visibility 属性设置为对所有输出隐藏，以表达式为条件：

```
row.__rownum > 0 
```

确保您的新表设置了与交叉表相同的过滤器。

# c# - 使用内部构造函数为抽象类创建动态代理

> ID：10054736
> 
> 赞同：5
> 
> 时间：2012-04-07T13:04:21.163
> 
> 标签：c#, dynamic, proxy, castle-dynamicproxy, dynamic-proxy

我想为 BCL 中的类型创建动态代理，该类型是具有内部构造函数的抽象类。我一直是城堡的动态代理，这失败了，但有一个例外，说明没有无参数构造函数（它们是 - 它是内部的）。

有没有办法用城堡来实现这一点？如果不是，是否有任何其他动态代理框架能够做到这一点？这是开发的开始，因此很容易更改框架。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T20:27:55.940

DynamicProxy 不会做任何您在 C# 中无法手动完成的事情。所以它不能从它不能构造的类型继承，包括DynamicProxy可以访问的没有构造函数的类型。

* * *

如果您拥有该程序集，您可以通过您的 AssemblyInfo.cs 提供 DynamicProxy 访问，方法是添加：

```
[assembly: InternalsVisibleTo("DynamicProxyGenAssembly2")] 
```

需要注意的重要一点是文字值，`DynamicProxyGenAssembly2`这是由 DynamicProxy 创建的内存程序集，您需要为其提供*访问*权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-25T04:47:06.573

我刚刚找到了一种方法来实现这一点，而无需修改目标程序集。

关键是它`TypeBuilder.DefineConstructor`允许你创建一个构造函数而不调用基的任何构造函数。因此，可以使用公共构造函数动态创建继承原始类的 FAKE 类。

然后只需从假类创建代理。您可以在您的`IInterceptor`对象中或在假类的某些字段中记录真实的目标对象。

顺便说一句，我使用这个技巧来记录`ILGenerator.Emit`通话。谁知道更简单的拆卸方法`ILGenerator.m_ILStream`？

# android - 如何在活动代码中从清单中设置 android:configChanges

> ID：10054737
> 
> 赞同：0
> 
> 时间：2012-04-07T13:04:36.330
> 
> 标签：android, screen-orientation

对于运行 < 3.x SDK 的设备，只需添加

```
android:configChanges="keyboardHidden|orientation" 
```

在清单文件中，以便在屏幕旋转时不会再次调用 onCreate 方法，但在运行 > 3.x 的那些上，这还不够，必须添加一个额外的标志

```
android:configChanges="keyboardHidden|orientation|screenSize" 
```

现在我的问题是如何在活动的 Java 代码中设置 screenSize？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:51:05.773

您不必根据[文档](http://developer.android.com/guide/topics/resources/runtime-changes.html)。它适用于 HC 和 pre-HC（前提是您的目标是 API 13+）。话虽如此，以您的方式处理配置更改是非常糟糕的做法。尝试阅读`onRetainNonConfigurationInstance()`和`onSaveInstanceState()`。

# python - 如何使用 pip 安装 Python Xlib？

> ID：10054745
> 
> 赞同：17
> 
> 时间：2012-04-07T13:05:21.023
> 
> 标签：python, pip, xlib

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-07T13:47:28.840

```
sudo pip install svn+https://svn.code.sf.net/p/python-xlib/code/trunk/ 
```

Worked for me.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-10T16:43:01.373

`pip3 install python3-xlib`

and

`pip3 install python-xlib`

When we run this command from the terminal, we can easily install it:

```
 Collecting python3-xlib
Downloading https://files.pythonhosted.org/packages/ef/c6/2c5999de3bb1533521f1101e8fe56fd9c266732f4d48011c7c69b29d12ae/python3-xlib-0.15.tar.gz (132kB)
     |████████████████████████████████| 133kB 1.3MB/s 
Installing collected packages: python3-xlib
  Running setup.py install for python3-xlib ... done
Successfully installed python3-xlib-0.15

GeorgeGentlys-Mac-mini:~ georgegently$ pip3 install python-xlib

Collecting python-xlib
Downloading https://files.pythonhosted.org/packages/f7/91/9f794491d1a8b810a9d4bb8fc9766a98354cb62bd6990685032b00f87001/python_xlib-0.25-py2.py3-none-any.whl (165kB)
     |████████████████████████████████| 174kB 1.3MB/s 
Collecting six>=1.10.0 (from python-xlib)
  Downloading https://files.pythonhosted.org/packages/73/fb/00a976f728d0d1fecfe898238ce23f502a721c0ac0ecfedb80e0d88c64e9/six-1.12.0-py2.py3-none-any.whl
Installing collected packages: six, python-xlib
Successfully installed python-xlib-0.25 six-1.12.0``` 
```

# html - 没有 alt 键的 HTML 元素键盘快捷键

> ID：10054750
> 
> 赞同：1
> 
> 时间：2012-04-07T13:05:44.943
> 
> 标签：html, access-keys

我有一个可以通过键盘快捷键访问的按钮，但用户必须按`ALT`+ `Z`。无论如何让用户只需按下`Z`（或其他键）而无需按下即可访问按钮`ALT`？

非常感谢，

```
<input style="display:none;" id='stopButton1' type="button" value="Z" onclick="stop('z')" accesskey="z" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T13:06:35.133

不，这在纯 HTML 中是不可能的。

需要JavaScript：使用`keypress`事件检测特定的字符代码，并调用一些函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-07T07:32:12.670

我们可以使用`jquery 2.1.3`插件`keypress`和`ASCII`价值

JS：

```
$(document).keypress(function (e) {
    if (e.which == 72 || e.which==104) {
        window.location.replace("http://soluvations.in");
    }
}); 
```

HTML：

```
<p>Press H/h to go to Home Page</p> 
```

这是 [JSFIDDLE 链接](http://jsfiddle.net/pradeep1008/2L3xxd9d/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-06T11:21:53.810

我登陆这个页面寻找一种快速的方法来使 accesskey 在没有修饰符 (alt) 键的情况下运行。

如果其他人也在寻找相同的内容，我已将其添加到我的页面：

```
 $(document).on('keydown', function(e) {
    var link = $("a[accesskey=" + e.key + "]");
    if (link.length) {
      window.location = link.attr('href');
    }
  }); 
```

这将捕获按键，如果有与该`accesskey`集合的链接，它将重定向到其`href`.

# tags - LinkedIn 技能和专长

> ID：10054753
> 
> 赞同：-1
> 
> 时间：2012-04-07T13:06:02.067
> 
> 标签：tags, compare, linkedin, information-retrieval

我正在寻找有关linkedIn 如何管理“搜索技能和专业知识”的详细信息。有人知道标签比较如何工作吗？开发人员可以基于哪些算法来基于标签比较系统？像“二进制独立模型”之类的东西 - 比如？欢迎每一个假设或信息。我正在尝试考虑一个与linkedIn“搜索技能和专业知识”等标签相关的系统，所以我会从一些好的开始，研究一些网络信息检索材料并询问比我更了解这个论点的人。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T13:28:24.030

你问过LinkedIn吗？

他们最近还发布了[IndexTank](http://nosql.mypopescu.com/post/14584603231/linkedin-open-sources-indextank-what-is-indextank-and)作为开源软件，这是他们用于搜索和索引的引擎，我怀疑它会为您提供信息，因为您可以下载并自己运行它。

# java - 使用 Reflection 与 java.math.BigInteger 交互时，我会遇到哪些问题？

> ID：10054757
> 
> 赞同：5
> 
> 时间：2012-04-07T13:06:32.417
> 
> 标签：java, scala, math, reflection, biginteger

我正在实现一个更快的`BigInt`实现，但我不确定我应该走多远才能提供与底层平台的互操作。

今天`BigInt`只包装 a`BigInteger`并且值`bigInteger`只返回包装的值：

```
class BigInt(val bigInteger: BigInteger) ... 
```

因为我没有包装 Java 类型，所以我必须做类似的事情

```
final class BigInt private(final val signum: Int,
                           final private[math] val arr: Array[Int])
  def bigInteger: java.math.BigInteger = {
    // Avoid copying of potentially large arrays.
    val ctor = classOf[java.math.BigInteger]
                 .getDeclaredConstructor(classOf[Array[Int]], classOf[Int])
    ctor setAccessible true
    ctor.newInstance(arr, signum.asInstanceOf[Object])
  }
...
} 
```

这会造成麻烦还是有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T15:14:11.990

一般来说，当我看到人们使用这样的私有（或其他未记录的）构造函数或方法时，他们会捕获`NoSuchMethodException`并提供替代方案：

```
object BigInt {
  import java.math.BigInteger

  private val toBigInteger: (Array[Int], Int) => BigInteger = try {
    val ctor = classOf[BigInteger].getDeclaredConstructor(
      classOf[Array[Int]], classOf[Int]
    )
    ctor.setAccessible(true)

    (arr, signum) => ctor.newInstance(arr, signum.asInstanceOf[Object])
  } catch { case _: NoSuchMethodException =>
    (arr, signum) =>
      val buffer = java.nio.ByteBuffer.allocate(arr.length * 4)
      buffer.asIntBuffer.put(arr)
      new BigInteger(signum, buffer.array)
  }
}

final class BigInt(final val signum: Int, final val arr: Array[Int]) {
  def bigInteger = BigInt.toBigInteger(arr, signum)
} 
```

我还把反射业务转移到一个伴生对象上，以避免每次调用时都要支付大部分费用`bigInteger`。

# ruby-on-rails - Rails 3 - 工厂女孩和 belongs_to 表的序列

> ID：10054759
> 
> 赞同：1
> 
> 时间：2012-04-07T13:06:36.673
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, factory, factory-bot

我有 2 个模型 - **User**和**Teacher**。**Teacher**属于_to **User**，**User**拥有**Teacher**。

所以，我使用工厂女孩宝石：

```
Factory.define :user do |user|
  user.user_login "Another User"
  user.user_role "admin"
  user.password "foobar"
end

Factory.sequence :user_login do |n|
  "person-#{n}"
end

Factory.define :teacher do |teacher|
  ...
  teacher.user                                                                            
end 
```

我遇到了问题，我不明白如何解决。当我通过工厂创建用户时，我可以轻松编写：

```
@user = Factory( :user, :user_login => Factory.next(:user_login)  ) 
```

这将创建具有唯一登录名的用户。

我怎样才能为老师做同样的事情？我试过了：

```
@teacher = Factory( :teacher, :user_login => Factory.next(:user_login)  ) 
```

它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T13:32:37.343

您不必单独指定序列，然后将它们传递给另一个工厂 - 您可以在工厂中使用它们，如下所示：

```
Factory.define :user do |user|
  # ...
  user.sequence(:user_login) { |n| "person=#{n}" }
end 
```

或更短

```
Factory.define :user do
  # ...
  sequence(:user_login) { |n| "person=#{n}" }
end 
```

然后，将用户与教师关联：

```
Factory.define :teacher do
  association :user
end 
```

然后你可以打电话

```
@teacher = Factory(:teacher) 
```

这将自动创建具有序列中下一个 user_login 的关联用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T13:19:20.767

我解决了那个。

```
@teacher = Factory( :teacher, 
                    :user => Factory(:user, :user_login => Factory.next(:user_login)) ) 
```

# java - 在 Java 中处理静态集合

> ID：10054760
> 
> 赞同：1
> 
> 时间：2012-04-07T13:06:42.463
> 
> 标签：java, collections, static, hashmap

说我有一个A类如下

```
 public class A {
      protected static float[] floatArray = null;
      protected static Map<Integer, float[]>  history = new HashMap<Integer,float[]>();
      protected static Integer historyCount = 0;

      public void runEverySecond(Populator objPopulator) {
         floatArray = objPopulator.getValues();
         history.put(historyCount, floatArray);
         historyCount++;
      }  
    } 
```

B类看起来如下

```
 public class B {
      private A objA;
      protected final static Populator objPopulator = new Populator();

      public void run(Integer numOfTime) {
        for(int i = 0; i < numOfTime; i++)
           objA.runEverySecond(objPopulator);
      }
    } 
```

和类 Populator 如下所示

```
 public class Populator {
      protected float[] randomValues = new float[2];
      public float[] getValues() {
        randomValues[0] = //some new random float value generated for every call
        randomValues[1] = //some new random float value generated for every call
        return randomValues;
      }
    } 
```

和包含主要外观的类如下

```
 public class MainClass {
      public static void main() {
        final B objB = new B();
        objB.run(10);
      }
    } 
```

这是我面临的问题，地图历史记录包含地图中每个条目的相同值。我希望地图历史记录存储 objPopulator.getValues() 方法生成的所有值。我该怎么做？

一些帮助将非常明显。提前致谢 ：）

由 A 类表示的实际代码（已删除无关代码）

```
public class MySuperAgent implements Agent {
protected static float[] marioFloatPos = null;
protected static Map<Integer, float[]> levelRecord = new HashMap<Integer, float[]>();
protected static Integer mapCount = 0;
/*  protected static int testCount = 0;
protected static float[] testx = new float[2];
protected static float[] testy = new float[2];*/

@Override
public void integrateObservation(Environment environment) {
    marioFloatPos = environment.getMarioFloatPos();
    levelRecord.put(mapCount, marioFloatPos);
    mapCount++;

   /*if(testCount < 2){
        testx[testCount] = marioFloatPos[0];
        testy[testCount] = marioFloatPos[1];
        testCount++;
    } else {
        testCount = 0;
    }*/
  }
} 
```

如果我使用注释块中的代码，则从类似于 B 类的类调用 C 类表示环境对象集成观察方法，那么我只能记录马里奥的 x 和 y 的 2 个过去值。我需要一种方法来存储马里奥的 x 和 y 的所有值:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T13:13:40.340

您的每个条目`Map`都引用了`floatArray`与其值相同的静态字段。

而不是考虑`floatArray`作为静态成员变量`A`：

```
 public void runEverySecond(Populator objPopulator) {
     float[] floatArray = objPopulator.getValues();
     history.put(historyCount, floatArray);
     historyCount++;
  } 
```

**编辑**另外我不知道你的类代码`A`将如何编译。不应该`runEverySecond`采用`Populator`参数而不是`Object`? 请参阅上面的修订片段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T13:12:58.987

只有一个`floatArray`，你不断地重新分配它。

这段代码几乎不可能以合理的方式遵循——真是一团糟。

# google-app-engine - appengine memcache 为不同的对象设置不同的过期时间

> ID：10054767
> 
> 赞同：0
> 
> 时间：2012-04-07T13:08:44.550
> 
> 标签：google-app-engine

我可以为appengien memcache中的不同对象设置不同的过期时间吗？或者我提供的过期时间对于 memcache 中的所有对象都是全局的。我认为过期时间适用于所有 memcache 值，来自[appengine 文档](https://developers.google.com/appengine/docs/java/memcache/usingjcache#Configuring_Expiration)：`The app can specify a expiration time for valueS, a maximum amount of time the value will be available.`有人可以确认我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T13:12:55.463

您可以为 memcache 中的不同对象设置不同的过期时间通过 Then use void
获取缓存实例 来源：[https ://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/memcache/MemcacheService](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/memcache/MemcacheService#put%28java.lang.Object,%20java.lang.Object,%20com.google.appengine.api.memcache.Expiration%29) [#put%28java.lang.Object,%20java.lang.Object,%20com.google.appengine.api.memcache.Expiration%29](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/memcache/MemcacheService#put%28java.lang.Object,%20java.lang.Object,%20com.google.appengine.api.memcache.Expiration%29)`MemcacheServiceFactory.getMemcacheService()`
`put(java.lang.Object key, java.lang.Object value, Expiration expires)`

# html - Jquery Position 绝对验证器插件无法在线工作

> ID：10054768
> 
> 赞同：0
> 
> 时间：2012-04-07T13:09:01.213
> 
> 标签：html, jquery-plugins

我正在使用这个插件

[http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/](http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/)

只要我将它上传到由 one.com 托管的 Web 服务器，它就可以在脱机的dreamweaver 中完美运行，但它不起作用。它使用 jquery 验证引擎和 css 来显示错误消息。

在线时，表格会显示但不会验证。

这是我无法使用的网页

[http://www.notgotaclue.co.uk/contactUs.html](http://www.notgotaclue.co.uk/contactUs.html)

任何帮助将不胜感激...

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T18:56:40.623

这些是您的应用程序当前加载的 js 文件 ![这些是您的应用程序当前加载的 js 文件](../Images/25f7d6a0fc176fe3a6f5a5d56c8d56b0.png)

* * *

您需要包括所有这些缺少的 jquery 和 js 文件

![您需要包含所有 jquery 和 js 文件](../Images/770127f53153294a6cdeb1d50eb2cc4f.png)

* * *

并添加正确的文件路径引用

![并添加正确的文件路径引用](../Images/5f7934f19c3ef5ccee87a77ed2c8cba5.png)

# iphone - 在 iOS 应用程序中加入自定义单词词典

> ID：10054770
> 
> 赞同：1
> 
> 时间：2012-04-07T13:09:21.187
> 
> 标签：iphone, ios, macos, dictionary

我有两个非常相关的问题。

1.  我添加了一个自定义语言词典作为 Mac OSX Lion 的内置词典应用程序的扩展。这很棒。有什么办法可以将它包含在 iOS 的应用程序中？好像没有！该应用程序以 .dictionary 扩展名结尾。

2.  有没有办法从iOS的内置字典中提取字符串的字典内容，并将其显示在我的自定义视图中？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T13:18:08.607

第一个不太确定，但 Objective-C 中的字典就像现实生活中的字典一样工作。因此，如果您有一个字典条目“StackOverflow (n. stak - over - flow)：程序员提问和接收答案的网站”，将其翻译成 Objective-C 字典非常简单。StackOverflow 这个词将是您的关键，而“（n. stak - over - flow）：程序员提问和接收答案的网站”将是您的对象，包装为 NSString。您可以使用 [myDictionary objectForKey:@"StackOverflow"]; 拉出定义。您也可以使用 allKeysForObject: 来获取密钥。从那里，将它显示为 UIView 是微不足道的。

# list - 带有继承对象列表的 ReportViewer 表

> ID：10054782
> 
> 赞同：0
> 
> 时间：2012-04-07T13:11:42.907
> 
> 标签：list, reportviewer, inherited

我需要显示一个包含继承对象列表的表格。例如：

```
public abstract class Animal
{
    public string Name { get; set; }
    public abstract string Detail { get; }
}

public class Dog : Animal
{
    public override Detail { get { return "A dog"; } }
}

public class Cat : Animal
{
    public override Detail { get { return "A cat"; } }
} 
```

似乎数据源采用第一个对象类类型，而其他对象显示为#ERROR 我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T13:26:05.710

您需要使用表达式区域映射您的属性。如果要显示包含猫详细信息的列，请将其添加到该字段的表达式中。

```
=Fields!Cat.Value.Detail 
```

# database - 在 Alias 位置获取所有表的列表

> ID：10054783
> 
> 赞同：2
> 
> 时间：2012-04-07T13:11:43.403
> 
> 标签：database, delphi

无论如何，当用户从组合框中选择别名时，它会轮询该别名并获取该别名中所有表的列表？

我希望我能做的是将此表列表返回到 TStringList 中，然后用他们选择的别名中的所有表的列表填充另一个组合框。我有以下代码用可用的别名填充 cbox：

```
lvAliasList := TStringList.Create;
try
  session.GetAliasNames(lvAliasList);
  cboxAliasSel.Items := lvAliasList;
finally
  lvAliasList.Free;
end; 
```

以上基本上是我想要的，但不是别名，它需要是表名。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T16:28:49.320

您可以使用[`TDatabase.GetTableNames`](http://docwiki.embarcadero.com/Libraries/en/Bde.DBTables.TDatabase.GetTableNames)or[`TSession.GetTableNames`](http://docwiki.embarcadero.com/Libraries/en/Bde.DBTables.TSession.GetTableNames) 方法。

# php - jQuery弹出但能够像新页面一样对待？

> ID：10054791
> 
> 赞同：0
> 
> 时间：2012-04-07T13:12:55.217
> 
> 标签：php, javascript, jquery, html

我已经看到其中一些漂浮在周围，但是我想以与他们在此处发布的方式不同的方式使用它。

我在页面顶部有我所有的服务器验证（用于注册页面），所以表单提交看起来像（我在 index.php 上，所以它只是它自己）：

但是，index.php 页面有一个登录按钮和一个注册按钮，并且表单会根据您单击的内容弹出。

但是我需要那个 div 像一个页面一样，所以你提交它并重新加载 div 就好像它是一个网页，如果这有意义的话？

谢谢阅读 ：-）

# java - rmic 编译中找不到类错误

> ID：10054795
> 
> 赞同：0
> 
> 时间：2012-04-07T13:13:19.840
> 
> 标签：java, rmi

我使用 rmi 类，但我有一个问题。我的接口名称是`server`，我的实现类的名称是`serverImpl`. 当我输入`rmic -v1.2 -classpath .. serverImpl`命令行时（在编译接口和类之后）它显示这个错误：

```
error: Class serverImpl not found. 
```

我检查`serverImpl`了指定目录中是否存在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-14T12:03:14.987

1.  将您的服务器类和实现的类放在一个文件夹中，命名它`x`

2.  在每个类的顶部添加这个包`package x;`

3.  打开 cmd 并从包含该文件夹的目录中写入`javac x/MyServer.java`和。`javac x/MyImpl.java``x`

4.  `rmic x.MyServer`从包含该文件夹的目录写入`x`。

5.  你现在应该有一个`MyServer_stub.class`，你可以有一个美好的一天:)

PS：包名与 RMI 或类中使用的任何对象不同，这一点很重要。否则你会发生物体碰撞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T00:42:09.247

`serverImpl`不必“存在于指定目录中”。你没有指定一个目录，你已经指定了一个 CLASSPATH，并且`serverImpl`必须存在于其中，在适当的包结构下，你还必须在命令行中正确命名。因此，如果`serverImpl`在 package`x.y`中，则必须指定包含 x/y 目录的 CLASSPATH，并`x.y.serverImpl`在命令行中指定。与使用“java”命令运行时完全一样。

`rmic`但是大约八年来您根本不需要- 请参阅 Javadoc 类`UnicastRemoteObject`。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-13T07:49:04.520

请将斜杠 (/) 转换为点 (.)。它对我有用。

我有以下结构

```
rmitest/
rmitest/MyRemoteIf.java
rmitest/MyRemoteImpl.java

javac rmitest/*.java

rmic rmitest.MyRemoteImpl 
```

输出是：

```
rmitest/MyRemoteIf.class

rmitest/MyRemoteImpl.class

rmitest/MyRemoteImpl_Stub.class

rmitest/MyRemoteImpl_Skel.class 
```

祝你好运！！卡兰

# c++ - 多态性和指针数组 (C++)

> ID：10054800
> 
> 赞同：1
> 
> 时间：2012-04-07T13:14:10.427
> 
> 标签：c++, arrays, inheritance, pointers, polymorphism

我有以下类：**Container**、**Element以及从 Element****继承**的几个类，例如。**按钮，输入**等...

将元素添加到 Container 数组时遇到问题，我的 main() 如下所示：

```
Container c;
c.Add( Button(...) );
c.Add( Input(...) ); 
```

其中“...”是一些构造函数参数。

在容器类中，我有一个指针数组来存储属于该容器的所有元素：

```
Element ** elements; 
```

但我遇到的问题是如何实现 Add 方法，我希望这样的事情会起作用：

```
void Add(const CControl & newElement){                      
    elements[elemCnt++] = &newElement;              
} 
```

（分配元素数组：elements = new Element * [100];）

但是我收到了这个编译错误：

```
main.cpp: In member function ‘Container& Container::Add(const Element&)’:
main.cpp:138:23: error: invalid conversion from ‘const Element*’ to ‘Element*’ 
```

当我删除 const 限定符时，我收到一个编译错误，指出没有合适的候选人。

问题是，我是 C++ 中的多态性和继承的新手，所以我可能会走错路。对此最好的方法是什么？

PS：主要方法必须看起来一样，也不建议任何向量或STL的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T13:18:20.040

`Add`应该带一个指针：

```
void Add(CControl * newElement){                       
    elements[elemCnt++] = newElement;               
} 
```

那么你可以这样称呼它

```
c.Add( new Button(...) ); 
c.Add( new Input(...) ); 
```

如果您确实无法更改调用代码，则需要以某种方式创建临时副本。例如，通过在,中实现一个虚拟`Clone`方法，在 中调用它。`CControl``Input``Button``Add`

```
void Add(const CControl & newElement){                        
    elements[elemCnt++] = newElement.Clone();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T13:30:00.577

不更改就无法修复此代码`main`，因为您尝试存储对临时的引用。无论您做什么，这都是不可撤销的。

# objective-c - 我在哪里可以使用 drawInRect 字符串？

> ID：10054801
> 
> 赞同：0
> 
> 时间：2012-04-07T13:14:14.287
> 
> 标签：objective-c, uiview, uikit

我在追踪 drawInRect 的确切用法时遇到了一些麻烦；我知道语法，但它只能在 UIView 或其子类中使用吗？所需的“上下文”到底是什么，以及如何创建或获取它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T15:15:44.383

上下文就像核心图形绘制的画布。`UIGraphicsGetCurrentContext()`您可以通过调用 inside从任何 UIView 获取上下文`drawRect:`。您还可以在任何地方创建自己的上下文，您可以从中创建 UIImage 或保存到文件等。

希望这可以帮助！

# jquery - 添加功能以保持 div.pop-up 悬停

> ID：10054802
> 
> 赞同：1
> 
> 时间：2012-04-07T13:14:24.247
> 
> 标签：jquery

悬停后弹出停留并在鼠标向右移动时关闭或关闭.......

```
 $(document).ready(function() {
            //If Javascript is running, change css on product-description to display:block
            //then hide the div, ready to animate
            $("div.pop-up").css({'display':'block','opacity':'0'})

            $("a.trigger").hover(
              function () {
                $(this).prev().stop().animate({
                  opacity: 1
                }, 500);
              },
              function () {
                $(this).prev().stop().animate({
                  opacity: 0
                }, 200);
              }
            )
          }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T13:32:59.053

我不完全确定你在问什么，但这就是我翻译它的方式......

**问：**如何使弹出窗口在悬停时保持打开状态，而不是因为触发器不再悬停而关闭？

**A：**你能改变加价吗？如果是这样，您可以将弹出窗口放在触发器元素中，这样当弹出窗口悬停在您没有离开触发器时：

`​ <div class="trigger"> <a>Hover over me</a> <div class="pop-up"> This is the pop-up, hover over me as well. </div> </div>​`

然后你只需要稍微修改你的Javascript：

```
$("div.pop-up").css({
    'display': 'block',
    'opacity': '0'
});
$("div.trigger").hover(
function() {
    $(this).find("div.pop-up").stop().animate({
        opacity: 1
    }, 500);
}, function() {
    $(this).find("div.pop-up").stop().animate({
        opacity: 0
    }, 200);
});​ 
```

## [看演示](http://jsfiddle.net/2kjVh/)

# php - 简单的 PHP 登录脚本

> ID：10054810
> 
> 赞同：0
> 
> 时间：2012-04-07T13:15:46.063
> 
> 标签：php, login

我正在寻找一个简单的安全脚本，可以添加到我的网站（在 iis 7 上运行），它允许用户创建帐户、登录和注销。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T13:17:25.167

**例子 ：**

[一个简单的 PHP 登录脚本](http://www.knowledgesutra.com/discuss/tlddl-php-simple-login-tutorial-learn-simple-login.html)

# c# - VS2010 重命名后找不到程序集

> ID：10054817
> 
> 赞同：3
> 
> 时间：2012-04-07T13:17:07.757
> 
> 标签：c#, visual-studio-2010, clr, .net-assembly, filenotfoundexception

我有一个解决方案，简单地说，一个 Windows 窗体应用程序项目和一个类库，两者都用 C# 编写。我的图书馆项目名为`OldName`. 因此命名空间也是`OldName`，生成的文件是`OldName.dll`.

我想更改名称，所以我进入属性，并将程序集名称从 更改`OldName`为`NewName`。

构建现在生成一个`NewName.dll`. 然而，当我的应用程序试图访问这个 dll 时，我得到了一个`System.Runtime.Serialization.SerializationException`（dll 包含我对某些东西进行二进制序列化的方法）：它声称`Unable to find assembly 'OldName, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'.`Procmon.exe 确认它正在寻找旧的 dll ( `NAME NOT FOUND`)。

现在奇怪的是，如果我复制 并将其`NewName.dll`重命名为`OldName.dll`，这样我就有了`OldName.dll`，`NewName.dll`问题仍然存在。如果我删除`NewName.dll`并只离开`OldName.dll`，程序在启动时崩溃：`System.IO.FileNotFoundException: Could not load file or assembly 'NewName, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. The system cannot find the file specified.`这一次，Procmon.exe 报告它在因为上的`CreateFileMapping`操作失败，但它似乎在.`OldName.dll``FILE LOCKED WITH ONLY READERS``NewName.dll`

将程序集名称改回以`OldName`修复所有问题，但当然文件名变成了`OldName`我不想要的。

我一生都无法弄清楚它在哪里引用了旧的程序集名称。我会错过什么？

**解决方案：**我的程序允许用户创建一个文件，然后使用我的 dll 中的方法使用序列化将其保存到磁盘。它还允许加载文件。懒得做了一次测试文件，一直重复使用。事实证明，正如@Tigran 所建议的那样，旧的程序集名称仍然出现在序列化数据文件中，所以当我试图从我的程序中加载它时，我遇到了一个异常，因为它找不到*序列化文件中*引用的程序集。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T13:20:14.977

我**想**在你的程序中你使用`standart .NET serialization`. 请记住，在*这种*序列化中也`.NET`保存了*类型信息*。完整的类型信息，带有命名空间。这意味着如果您更改程序集名称并重新编译*完整*的类型名称将不匹配。

如果这不是你正在做的，请澄清。

# php - 将重音字符转换为其纯 ascii 等价物

> ID：10054818
> 
> 赞同：35
> 
> 时间：2012-04-07T13:17:13.547
> 
> 标签：php, utf-8, character-encoding, locale, diacritics

我必须在我的 php 上将法语字符转换为英语。我使用了以下代码：

```
iconv("utf-8", "ascii//TRANSLIT", $string); 
```

但结果`ËËË`是`"E"E"E`。

我不需要那个双引号和其他额外的字符——我想显示一个像`EEE`. 有没有其他方法可以将法语转换为英语？你能帮我做这件事吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-08T17:14:26.227

[PHP 手册 iconv Intro](http://www.php.net/manual/en/intro.iconv.php)有一个警告：

> 请注意，某些系统上的 iconv 功能可能无法按预期工作。在这种情况下，最好安装 GNU libiconv 库。它很可能最终会得到更一致的结果。

但是，如果重音字符是唯一的问题，那么您可以使用脏 strtr （部分来自[strtr 注释](http://ie2.php.net/manual/en/function.strtr.php#98669)）：

```
$string = 'Ë À Ì Â Í Ã Î Ä Ï Ç Ò È Ó É Ô Ê Õ Ö ê Ù ë Ú î Û ï Ü ô Ý õ â û ã ÿ ç';

$normalizeChars = array(
    'Š'=>'S', 'š'=>'s', 'Ð'=>'Dj','Ž'=>'Z', 'ž'=>'z', 'À'=>'A', 'Á'=>'A', 'Â'=>'A', 'Ã'=>'A', 'Ä'=>'A',
    'Å'=>'A', 'Æ'=>'A', 'Ç'=>'C', 'È'=>'E', 'É'=>'E', 'Ê'=>'E', 'Ë'=>'E', 'Ì'=>'I', 'Í'=>'I', 'Î'=>'I',
    'Ï'=>'I', 'Ñ'=>'N', 'Ń'=>'N', 'Ò'=>'O', 'Ó'=>'O', 'Ô'=>'O', 'Õ'=>'O', 'Ö'=>'O', 'Ø'=>'O', 'Ù'=>'U', 'Ú'=>'U',
    'Û'=>'U', 'Ü'=>'U', 'Ý'=>'Y', 'Þ'=>'B', 'ß'=>'Ss','à'=>'a', 'á'=>'a', 'â'=>'a', 'ã'=>'a', 'ä'=>'a',
    'å'=>'a', 'æ'=>'a', 'ç'=>'c', 'è'=>'e', 'é'=>'e', 'ê'=>'e', 'ë'=>'e', 'ì'=>'i', 'í'=>'i', 'î'=>'i',
    'ï'=>'i', 'ð'=>'o', 'ñ'=>'n', 'ń'=>'n', 'ò'=>'o', 'ó'=>'o', 'ô'=>'o', 'õ'=>'o', 'ö'=>'o', 'ø'=>'o', 'ù'=>'u',
    'ú'=>'u', 'û'=>'u', 'ü'=>'u', 'ý'=>'y', 'ý'=>'y', 'þ'=>'b', 'ÿ'=>'y', 'ƒ'=>'f',
    'ă'=>'a', 'î'=>'i', 'â'=>'a', 'ș'=>'s', 'ț'=>'t', 'Ă'=>'A', 'Î'=>'I', 'Â'=>'A', 'Ș'=>'S', 'Ț'=>'T',
);

//Output: E A I A I A I A I C O E O E O E O O e U e U i U i U o Y o a u a y c
echo strtr($string, $normalizeChars); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-08-08T14:16:34.437

这对我来说适用于法语字符。

```
$str = utf8_encode($str);
$str = iconv('UTF-8', 'ASCII//TRANSLIT', $str); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-07-02T17:52:06.263

替代：

```
function replaceAccents($str) {

  $search = explode(",","ç,æ,œ,á,é,í,ó,ú,à,è,ì,ò,ù,ä,ë,ï,ö,ü,ÿ,â,ê,î,ô,û,å,ø,Ø,Å,Á,À,Â,Ä,È,É,Ê,Ë,Í,Î,Ï,Ì,Ò,Ó,Ô,Ö,Ú,Ù,Û,Ü,Ÿ,Ç,Æ,Œ");

  $replace = explode(",","c,ae,oe,a,e,i,o,u,a,e,i,o,u,a,e,i,o,u,y,a,e,i,o,u,a,o,O,A,A,A,A,A,E,E,E,E,I,I,I,I,O,O,O,O,U,U,U,U,Y,C,AE,OE");

  return str_replace($search, $replace, $str);
}

$str = "À é ü ä ç";
$str = replaceAccents($str);
echo "$str \n"; 
//output "A e u a c" 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-07-29T18:08:42.213

这是wordpress的方式：

[http://codex.wordpress.org/Function_Reference/remove_accents](http://codex.wordpress.org/Function_Reference/remove_accents)

您可以复制 remove_accents() 函数并实施到您的系统中。

[https://core.trac.wordpress.org/browser/tags/3.9.1/src/wp-includes/formatting.php#L682](https://core.trac.wordpress.org/browser/tags/3.9.1/src/wp-includes/formatting.php#L682)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-10-10T13:19:29.403

在这种情况下对我有用的是在字符串上使用 utf8_encode，然后在编码后使用 strtr() 函数。

IE。

```
$normalizeChars = array(
            'Š'=>'S', 'š'=>'s', 'Ð'=>'Dj','Ž'=>'Z', 'ž'=>'z', 'À'=>'A', 'Á'=>'A', 'Â'=>'A', 'Ã'=>'A', 'Ä'=>'A',
            'Å'=>'A', 'Æ'=>'A', 'Ç'=>'C', 'È'=>'E', 'É'=>'E', 'Ê'=>'E', 'Ë'=>'E', 'Ì'=>'I', 'Í'=>'I', 'Î'=>'I',
            'Ï'=>'I', 'Ñ'=>'N', 'Ń'=>'N', 'Ò'=>'O', 'Ó'=>'O', 'Ô'=>'O', 'Õ'=>'O', 'Ö'=>'O', 'Ø'=>'O', 'Ù'=>'U', 'Ú'=>'U',
            'Û'=>'U', 'Ü'=>'U', 'Ý'=>'Y', 'Þ'=>'B', 'ß'=>'Ss','à'=>'a', 'á'=>'a', 'â'=>'a', 'ã'=>'a', 'ä'=>'a',
            'å'=>'a', 'æ'=>'a', 'ç'=>'c', 'è'=>'e', 'é'=>'e', 'ê'=>'e', 'ë'=>'e', 'ì'=>'i', 'í'=>'i', 'î'=>'i',
            'ï'=>'i', 'ð'=>'o', 'ñ'=>'n', 'ń'=>'n', 'ò'=>'o', 'ó'=>'o', 'ô'=>'o', 'õ'=>'o', 'ö'=>'o', 'ø'=>'o', 'ù'=>'u',
            'ú'=>'u', 'û'=>'u', 'ü'=>'u', 'ý'=>'y', 'ý'=>'y', 'þ'=>'b', 'ÿ'=>'y', 'ƒ'=>'f',
            'ă'=>'a', 'î'=>'i', 'â'=>'a', 'ș'=>'s', 'ț'=>'t', 'Ă'=>'A', 'Î'=>'I', 'Â'=>'A', 'Ș'=>'S', 'Ț'=>'T',
        );

$legal_name = utf8_encode($res['LEGAL_NAME']);
$res['LEGAL_NAME'] = strtr($legal_name, $normalizeChars); 
```

输出 = Burelle Amélie -> Burelle Amelie

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-03-23T15:51:53.743

这对我有帮助。将语言环境设置为 en_US 而不是您的真实语言环境很重要。

```
$curLocale = setlocale(LC_ALL, 0); //gets current locale
setlocale(LC_ALL, "en_US.utf8"); //without this iconv removes accented letters. If you use another locale it will also fail

$text = iconv('UTF-8', 'ASCII//TRANSLIT', $text);

setlocale(LC_ALL, $curLocale); //set locale to what it was before 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-03-07T23:55:05.190

只是把这里作为替代（本质上有点复杂），wordpress 使用这个功能来去除重音。在下面进行了一些更改，使其在不引用 wordpress 函数的情况下独立运行。

```
 function mbstring_binary_safe_encoding($reset = false)
{
    static $encodings  = array();
    static $overloaded = null;

    if (is_null($overloaded)) {
        $overloaded = function_exists('mb_internal_encoding') && (ini_get('mbstring.func_overload') & 2);
    }

    if (false === $overloaded) {
        return;
    }

    if (!$reset) {
        $encoding = mb_internal_encoding();
        array_push($encodings, $encoding);
        mb_internal_encoding('ISO-8859-1');
    }

    if ($reset && $encodings) {
        $encoding = array_pop($encodings);
        mb_internal_encoding($encoding);
    }
}

function seems_utf8($str)
{
    mbstring_binary_safe_encoding();
    $length = strlen($str);
    mbstring_binary_safe_encoding(true);
    for ($i = 0; $i < $length; $i++) {
        $c = ord($str[$i]);
        if ($c < 0x80) {
            $n = 0;
        }
        // 0bbbbbbb
        elseif (($c & 0xE0) == 0xC0) {
            $n = 1;
        }
        // 110bbbbb
        elseif (($c & 0xF0) == 0xE0) {
            $n = 2;
        }
        // 1110bbbb
        elseif (($c & 0xF8) == 0xF0) {
            $n = 3;
        }
        // 11110bbb
        elseif (($c & 0xFC) == 0xF8) {
            $n = 4;
        }
        // 111110bb
        elseif (($c & 0xFE) == 0xFC) {
            $n = 5;
        }
        // 1111110b
        else {
                return false;
            }
            // Does not match any model
            for ($j = 0; $j < $n; $j++) {
                // n bytes matching 10bbbbbb follow ?
                if ((++$i == $length) || ((ord($str[$i]) & 0xC0) != 0x80)) {
                    return false;
                }

            }
        }
        return true;
    }

    function remove_accents($string)
{
        if (!preg_match('/[\x80-\xff]/', $string)) {
            return $string;
        }

        if (seems_utf8($string)) {
            $chars = array(
                // Decompositions for Latin-1 Supplement
                'ª' => 'a', 'º'  => 'o',
                'À' => 'A', 'Á'  => 'A',
                'Â' => 'A', 'Ã'  => 'A',
                'Ä' => 'A', 'Å'  => 'A',
                'Æ' => 'AE', 'Ç' => 'C',
                'È' => 'E', 'É'  => 'E',
                'Ê' => 'E', 'Ë'  => 'E',
                'Ì' => 'I', 'Í'  => 'I',
                'Î' => 'I', 'Ï'  => 'I',
                'Ð' => 'D', 'Ñ'  => 'N',
                'Ò' => 'O', 'Ó'  => 'O',
                'Ô' => 'O', 'Õ'  => 'O',
                'Ö' => 'O', 'Ù'  => 'U',
                'Ú' => 'U', 'Û'  => 'U',
                'Ü' => 'U', 'Ý'  => 'Y',
                'Þ' => 'TH', 'ß' => 's',
                'à' => 'a', 'á'  => 'a',
                'â' => 'a', 'ã'  => 'a',
                'ä' => 'a', 'å'  => 'a',
                'æ' => 'ae', 'ç' => 'c',
                'è' => 'e', 'é'  => 'e',
                'ê' => 'e', 'ë'  => 'e',
                'ì' => 'i', 'í'  => 'i',
                'î' => 'i', 'ï'  => 'i',
                'ð' => 'd', 'ñ'  => 'n',
                'ò' => 'o', 'ó'  => 'o',
                'ô' => 'o', 'õ'  => 'o',
                'ö' => 'o', 'ø'  => 'o',
                'ù' => 'u', 'ú'  => 'u',
                'û' => 'u', 'ü'  => 'u',
                'ý' => 'y', 'þ'  => 'th',
                'ÿ' => 'y', 'Ø'  => 'O',
                // Decompositions for Latin Extended-A
                'Ā' => 'A', 'ā'  => 'a',
                'Ă' => 'A', 'ă'  => 'a',
                'Ą' => 'A', 'ą'  => 'a',
                'Ć' => 'C', 'ć'  => 'c',
                'Ĉ' => 'C', 'ĉ'  => 'c',
                'Ċ' => 'C', 'ċ'  => 'c',
                'Č' => 'C', 'č'  => 'c',
                'Ď' => 'D', 'ď'  => 'd',
                'Đ' => 'D', 'đ'  => 'd',
                'Ē' => 'E', 'ē'  => 'e',
                'Ĕ' => 'E', 'ĕ'  => 'e',
                'Ė' => 'E', 'ė'  => 'e',
                'Ę' => 'E', 'ę'  => 'e',
                'Ě' => 'E', 'ě'  => 'e',
                'Ĝ' => 'G', 'ĝ'  => 'g',
                'Ğ' => 'G', 'ğ'  => 'g',
                'Ġ' => 'G', 'ġ'  => 'g',
                'Ģ' => 'G', 'ģ'  => 'g',
                'Ĥ' => 'H', 'ĥ'  => 'h',
                'Ħ' => 'H', 'ħ'  => 'h',
                'Ĩ' => 'I', 'ĩ'  => 'i',
                'Ī' => 'I', 'ī'  => 'i',
                'Ĭ' => 'I', 'ĭ'  => 'i',
                'Į' => 'I', 'į'  => 'i',
                'İ' => 'I', 'ı'  => 'i',
                'Ĳ' => 'IJ', 'ĳ' => 'ij',
                'Ĵ' => 'J', 'ĵ'  => 'j',
                'Ķ' => 'K', 'ķ'  => 'k',
                'ĸ' => 'k', 'Ĺ'  => 'L',
                'ĺ' => 'l', 'Ļ'  => 'L',
                'ļ' => 'l', 'Ľ'  => 'L',
                'ľ' => 'l', 'Ŀ'  => 'L',
                'ŀ' => 'l', 'Ł'  => 'L',
                'ł' => 'l', 'Ń'  => 'N',
                'ń' => 'n', 'Ņ'  => 'N',
                'ņ' => 'n', 'Ň'  => 'N',
                'ň' => 'n', 'ŉ'  => 'n',
                'Ŋ' => 'N', 'ŋ'  => 'n',
                'Ō' => 'O', 'ō'  => 'o',
                'Ŏ' => 'O', 'ŏ'  => 'o',
                'Ő' => 'O', 'ő'  => 'o',
                'Œ' => 'OE', 'œ' => 'oe',
                'Ŕ' => 'R', 'ŕ'  => 'r',
                'Ŗ' => 'R', 'ŗ'  => 'r',
                'Ř' => 'R', 'ř'  => 'r',
                'Ś' => 'S', 'ś'  => 's',
                'Ŝ' => 'S', 'ŝ'  => 's',
                'Ş' => 'S', 'ş'  => 's',
                'Š' => 'S', 'š'  => 's',
                'Ţ' => 'T', 'ţ'  => 't',
                'Ť' => 'T', 'ť'  => 't',
                'Ŧ' => 'T', 'ŧ'  => 't',
                'Ũ' => 'U', 'ũ'  => 'u',
                'Ū' => 'U', 'ū'  => 'u',
                'Ŭ' => 'U', 'ŭ'  => 'u',
                'Ů' => 'U', 'ů'  => 'u',
                'Ű' => 'U', 'ű'  => 'u',
                'Ų' => 'U', 'ų'  => 'u',
                'Ŵ' => 'W', 'ŵ'  => 'w',
                'Ŷ' => 'Y', 'ŷ'  => 'y',
                'Ÿ' => 'Y', 'Ź'  => 'Z',
                'ź' => 'z', 'Ż'  => 'Z',
                'ż' => 'z', 'Ž'  => 'Z',
                'ž' => 'z', 'ſ'  => 's',
                // Decompositions for Latin Extended-B
                'Ș' => 'S', 'ș'  => 's',
                'Ț' => 'T', 'ț'  => 't',
                // Euro Sign
                '€' => 'E',
                // GBP (Pound) Sign
                '£' => '',
                // Vowels with diacritic (Vietnamese)
                // unmarked
                'Ơ' => 'O', 'ơ'  => 'o',
                'Ư' => 'U', 'ư'  => 'u',
                // grave accent
                'Ầ' => 'A', 'ầ'  => 'a',
                'Ằ' => 'A', 'ằ'  => 'a',
                'Ề' => 'E', 'ề'  => 'e',
                'Ồ' => 'O', 'ồ'  => 'o',
                'Ờ' => 'O', 'ờ'  => 'o',
                'Ừ' => 'U', 'ừ'  => 'u',
                'Ỳ' => 'Y', 'ỳ'  => 'y',
                // hook
                'Ả' => 'A', 'ả'  => 'a',
                'Ẩ' => 'A', 'ẩ'  => 'a',
                'Ẳ' => 'A', 'ẳ'  => 'a',
                'Ẻ' => 'E', 'ẻ'  => 'e',
                'Ể' => 'E', 'ể'  => 'e',
                'Ỉ' => 'I', 'ỉ'  => 'i',
                'Ỏ' => 'O', 'ỏ'  => 'o',
                'Ổ' => 'O', 'ổ'  => 'o',
                'Ở' => 'O', 'ở'  => 'o',
                'Ủ' => 'U', 'ủ'  => 'u',
                'Ử' => 'U', 'ử'  => 'u',
                'Ỷ' => 'Y', 'ỷ'  => 'y',
                // tilde
                'Ẫ' => 'A', 'ẫ'  => 'a',
                'Ẵ' => 'A', 'ẵ'  => 'a',
                'Ẽ' => 'E', 'ẽ'  => 'e',
                'Ễ' => 'E', 'ễ'  => 'e',
                'Ỗ' => 'O', 'ỗ'  => 'o',
                'Ỡ' => 'O', 'ỡ'  => 'o',
                'Ữ' => 'U', 'ữ'  => 'u',
                'Ỹ' => 'Y', 'ỹ'  => 'y',
                // acute accent
                'Ấ' => 'A', 'ấ'  => 'a',
                'Ắ' => 'A', 'ắ'  => 'a',
                'Ế' => 'E', 'ế'  => 'e',
                'Ố' => 'O', 'ố'  => 'o',
                'Ớ' => 'O', 'ớ'  => 'o',
                'Ứ' => 'U', 'ứ'  => 'u',
                // dot below
                'Ạ' => 'A', 'ạ'  => 'a',
                'Ậ' => 'A', 'ậ'  => 'a',
                'Ặ' => 'A', 'ặ'  => 'a',
                'Ẹ' => 'E', 'ẹ'  => 'e',
                'Ệ' => 'E', 'ệ'  => 'e',
                'Ị' => 'I', 'ị'  => 'i',
                'Ọ' => 'O', 'ọ'  => 'o',
                'Ộ' => 'O', 'ộ'  => 'o',
                'Ợ' => 'O', 'ợ'  => 'o',
                'Ụ' => 'U', 'ụ'  => 'u',
                'Ự' => 'U', 'ự'  => 'u',
                'Ỵ' => 'Y', 'ỵ'  => 'y',
                // Vowels with diacritic (Chinese, Hanyu Pinyin)
                'ɑ' => 'a',
                // macron
                'Ǖ' => 'U', 'ǖ'  => 'u',
                // acute accent
                'Ǘ' => 'U', 'ǘ'  => 'u',
                // caron
                'Ǎ' => 'A', 'ǎ'  => 'a',
                'Ǐ' => 'I', 'ǐ'  => 'i',
                'Ǒ' => 'O', 'ǒ'  => 'o',
                'Ǔ' => 'U', 'ǔ'  => 'u',
                'Ǚ' => 'U', 'ǚ'  => 'u',
                // grave accent
                'Ǜ' => 'U', 'ǜ'  => 'u',
            );

            $string = strtr($string, $chars);
        } else {
            $chars = array();
            // Assume ISO-8859-1 if not UTF-8
            $chars['in'] = "\x80\x83\x8a\x8e\x9a\x9e"
                . "\x9f\xa2\xa5\xb5\xc0\xc1\xc2"
                . "\xc3\xc4\xc5\xc7\xc8\xc9\xca"
                . "\xcb\xcc\xcd\xce\xcf\xd1\xd2"
                . "\xd3\xd4\xd5\xd6\xd8\xd9\xda"
                . "\xdb\xdc\xdd\xe0\xe1\xe2\xe3"
                . "\xe4\xe5\xe7\xe8\xe9\xea\xeb"
                . "\xec\xed\xee\xef\xf1\xf2\xf3"
                . "\xf4\xf5\xf6\xf8\xf9\xfa\xfb"
                . "\xfc\xfd\xff";

            $chars['out'] = "EfSZszYcYuAAAAAACEEEEIIIINOOOOOOUUUUYaaaaaaceeeeiiiinoooooouuuuyy";

            $string              = strtr($string, $chars['in'], $chars['out']);
            $double_chars        = array();
            $double_chars['in']  = array("\x8c", "\x9c", "\xc6", "\xd0", "\xde", "\xdf", "\xe6", "\xf0", "\xfe");
            $double_chars['out'] = array('OE', 'oe', 'AE', 'DH', 'TH', 'ss', 'ae', 'dh', 'th');
            $string              = str_replace($double_chars['in'], $double_chars['out'], $string);
        }

        return $string;
    } 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-09-30T15:31:53.027

在 laravel 中，您可以简单地使用`str_slug($accentedPhrase)`，如果您关心破折号 (-)，这种方法可以用空格代替`str_replace('-', ' ', str_slug($accentedPhrase))`

# eclipse - CDT Eclipse：未定义的变量，甚至包括 .h 文件

> ID：10054824
> 
> 赞同：1
> 
> 时间：2012-04-07T13:17:28.677
> 
> 标签：eclipse, eclipse-cdt, cortex-m3, stm32

我是使用 CDT 和 Eclipse 的新手。我想做一个 STM32F10XX (Cortex-M3) 应用程序。我在编译代码时遇到问题，它总是显示未定义的变量错误。我使用了 Eclipse 设置，如为 STM32 Discovery Development 设置 Eclipse 和 Code Sourcery lite 中所示。

但我自己编写启动代码，只使用 stm32_flash.ld 和 startup_stm32f10x_md_vl.S。

是否遗漏了任何包含或项目设置？

讨论stackoverflow问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:07:31.477

Try using the gnu99 flavor of C. Found in project Properties > C/C++ Build > Settings. MCU C Compiler Miscellaneous.

I'm guessing it is complaining about an untagged union. But this is a guess...

# android - Android 选项卡式活动

> ID：10054831
> 
> 赞同：0
> 
> 时间：2012-04-07T13:18:17.247
> 
> 标签：android, tabactivity

我已经使用intents.MainPage.java 创建了选项卡，它是我的类，它扩展了TabActivity 和其他5 个扩展了我添加为选项卡的Activity 的活动。一旦在 MainPage.java 类中执行单击，我需要从我添加为选项卡的 5 个活动中获取字符串

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T13:29:38.207

从文档中：

> TabActivity 类已弃用。新的应用程序应该使用 Fragments 而不是这个类；要继续在旧设备上运行，您可以使用 v4 支持库，它提供了与 DONUT 兼容的 Fragment API 版本。

[**这里**](http://mobile.tutsplus.com/tutorials/android/android-sdk_fragments/)有一些[**`Fragment`**](http://developer.android.com/guide/topics/fundamentals/fragments.html)教程可以帮助您[**入门**](http://android-developers.blogspot.com/2011/02/android-30-fragments-api.html)。

另外，请查看[**`FragmentTabs.java`**](http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentTabs.html)开发人员网站。

# mysql - MySQL：选择多个随机行的最有效方法是什么

> ID：10054836
> 
> 赞同：3
> 
> 时间：2012-04-07T13:19:07.973
> 
> 标签：mysql, sql, random

我有一个相当大的数据集和一个需要两个连接的查询，所以查询的效率对我来说非常重要。我需要从数据库中检索 3 个满足基于连接结果的条件的随机行。[最明显的解决方案](https://stackoverflow.com/questions/4586858/mysql-how-to-retrieve-a-random-row-or-multiple-random-rows)[在这里](https://stackoverflow.com/questions/19412/how-to-request-a-random-row-in-sql)被指出是低效的，因为

> [这些解决方案] 需要对所有表进行顺序扫描（因为需要计算与每一行关联的随机值 - 以便可以确定最小的值），即使是中等大小的表也可能会非常慢。

但是，那里的作者建议的方法（`SELECT * FROM table WHERE num_value >= RAND() * (SELECT MAX(num_value) FROM table) LIMIT 1`其中 num_value 是 ID）对我不起作用，因为可能缺少某些 ID（因为某些行可能已被用户删除）。

那么，在我的情况下，检索 3 个随机行的最有效方法是什么？

*编辑：*解决方案不需要是纯 SQL。我也使用 PHP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T11:06:01.853

由于您不想要很多结果，因此使用`LIMIT`和有几个有趣的选项`OFFSET`。

我将假设一个`id`列是唯一的并且适合排序。

第一步是执行 a `COUNT(id)`，然后在 PHP 中从`0`to中随机选择 3 个数字。`COUNT(id) - 1`（如何做到这一点是一个单独的问题，最佳方法取决于总行数和您想要的数量）。

第二步有两个选择。假设您选择的随机数是 0、15、2234。在 PHP 中都有一个循环

```
// $offsets = array(0, 15, 2234);
foreach ($offsets as $offset) {
    $rows[] = execute_sql('SELECT ... ORDER BY id LIMIT 1 OFFSET ?', $offset);
} 
```

或构建一个`UNION`. 注意：这需要子选择，因为我们使用的是 ORDER BY。

```
// $offsets = array(0, 15, 2234);
$query = '';
foreach ($offsets as $index => $offset) {
    if ($query) $query .= ' UNION ';
    $query .= 'SELECT * FROM (SELECT ... ORDER BY id LIMIT 1 OFFSET ?) Sub'.$index;
}
$rows = execute_sql($query, $offsets); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T13:53:02.597

将您的 RAND() 调用添加到 ORDER BY 子句中应该允许您忽略 ID。试试这个：

```
SELECT * FROM table WHERE ... ORDER BY RAND() LIMIT 3; 
```

在指出性能问题之后，您最好的选择可能是这些方面（使用 PHP）：

```
$result = PDO:query('SELECT MAX(id) FROM table');
$max    = $result->fetchColumn();
$ids    = array();
$rows   = 5;

for ($i = 0; $i < $rows; $i++) {
    $ids[] = rand(1, $max);
}

$ids     = implode(', ', $ids);
$query   = PDO::prepare('SELECT * FROM table WHERE id IN (:ids)');
$results = $query->execute(array('ids' => $ids)); 
```

此时您应该能够选择前 3 个结果。这种方法的唯一问题是处理已删除的行，如果您没有收到至少 3 个结果，您可能必须增加 $rows 变量或添加一些逻辑来执行另一个查询。

# multithreading - 低级键盘 Hook 不在 UI 线程

> ID：10054839
> 
> 赞同：2
> 
> 时间：2012-04-07T13:19:21.967
> 
> 标签：multithreading, keyboard, hook, keyboard-hook, setwindowshookex

我想为键盘钩子创建一个好的库。我使用了 SetWindowsHookEx 方法，我注意到如果我的应用程序的主线程很忙，则不会执行应该在任何系统 KeyDown 事件中调用的方法 hookProc。我认为钩子应该这样制作，另一个线程将对此负责。那可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T17:04:26.533

[LowLevelKeyboardProc](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644985%28v=vs.85%29.aspx)的 Microsoft 帮助页面提到

> 如果钩子过程超时，系统将消息传递给下一个钩子。但是，在 Windows 7 及更高版本上，**该挂钩会在**不被调用的情况下被静默删除。应用程序无法知道挂钩是否被移除。

我怀疑这就是发生在你身上的事情。您的 HookProc 函数应该非常快：我所做的只是将关键事件推送到 std::vector 中。真正的代码在另一个线程中执行。

# easymock - 如何使用 EasyMock 为传递给 void 方法的参数设置期望

> ID：10054845
> 
> 赞同：4
> 
> 时间：2012-04-07T13:20:06.163
> 
> 标签：easymock

我正在使用 EasyMock 和 EasyMock CE 3.0 来模拟依赖层并测试我的类。以下是我无法找到任何解决方案的场景

我有要测试的类，它调用一个依赖类**void 方法，该方法接受一个输入参数，并更改相同的参数**。我正在测试的方法是根据更改的参数进行一些操作，我现在必须针对各种场景进行测试

考虑下面的示例，我尝试在其中放置相同的场景

```
public boolean voidCalling(){
    boolean status = false;
    SampleMainBean mainBean = new SampleMainBean();
    dependentMain.voidCalled(mainBean);
    if(mainBean.getName() != null){
        status = true; 
    }else{
        status = false;
    }
    return status;
} 
```

和dependentMain 类下面的方法

```
public void voidCalled(SampleMainBean mainBean){
    mainBean.setName("Sathiesh");
} 
```

为了全面覆盖，我需要有 2 个测试用例来测试返回 true 和 false 的场景，但我总是得到 false，因为我无法设置 void 方法的行为来更改此输入 bean。在这种情况下，如何使用 EasyMock 获得真实的结果

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T09:59:05.657

从这个答案中的答案开始：[EasyMock: Void Methods](https://stackoverflow.com/questions/859031/easymock-void-methods)，您可以使用[IAnswer](http://www.easymock.org/api/easymock/3.1/index.html)。

```
// create the mock object
DependentMain dependentMain = EasyMock.createMock(DependentMain.class);

// register the expected method
dependentMain.voidCalled(mainBean);

// register the expectation settings: this will set the name 
// on the SampleMainBean instance passed to voidCalled
EasyMock.expectLastCall().andAnswer(new IAnswer<Object>() {
    @Override
    public Object answer() throws Throwable {
        ((SampleMainBean) EasyMock.getCurrentArguments()[0])
                .setName("Sathiesh");
        return null; // required to be null for a void method
    }
});

// rest of test here 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T10:41:15.657

感谢您的回复.. 我解决了问题... :) 也感谢您的示例代码。

使用上面的代码片段，我必须做的一个改变是，

```
// register the expected method
dependentMain.voidCalled((SampleMainBean) EasyMock.anyObject()); 
```

有了这个，我就可以在要测试的方法中获取更新的 bean。

再次感谢您的帮助。

# ruby-on-rails - Rails、devise 和 Haml：语法错误，意外的 kELSE

> ID：10054846
> 
> 赞同：2
> 
> 时间：2012-04-07T13:20:08.333
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, haml

我正在尝试设置一个简单的应用程序来运行多个博客，我的 app/views/layouts/application.html.haml 文件如下所示：

```
!!!
%html
  %head
    %title Brimble's Blogs
    = stylesheet_link_tag    "application", :media => "all"
    = javascript_include_tag "application"
    = csrf_meta_tags

  %body
    %p.notice= notice
    %p.alert= alert

  .user-auth-nav{style => 'float:right'}
    = if user_signed_in?
      = link_to('Edit registration', edit_user_registration_path)
      = link_to('Logout', destroy_user_session_path)
    = else
      = link_to('Login', new_user_session_path)
      = link_to('Register', new_user_registration_path)
    = end

= yield 
```

我得到的错误是：

```
compile error
<myapp>/app/views/layouts/application.html.haml:18: syntax error, unexpected kELSE
<myapp>/app/views/layouts/application.html.haml:22: syntax error, unexpected kEND
<myapp>/app/views/layouts/application.html.haml:23: unknown regexp options - htl
<myapp>/app/views/layouts/application.html.haml:23: syntax error, unexpected $undefined
));}\n  </div>\n</html>\n#{_hamlout.adjust_tabs(-2); _...
                        ^
<myapp>/app/views/layouts/application.html.haml:25: syntax error, unexpected kENSURE, expecting $end 
```

提取的源代码（大约第 18 行）：

```
15:       = link_to('Edit registration', edit_user_registration_path)
16:       = link_to('Logout', destroy_user_session_path)
17:     = else
18:       = link_to('Login', new_user_session_path)
19:       = link_to('Register', new_user_registration_path)
20:     = end
21: 
```

我正在关注此页面上的教程： [http](http://www.logansbailey.com/2011/02/27/adding-authorization-using-devise/) ://www.logansbailey.com/2011/02/27/adding-authorization-using-devise/ 该教程使用 erb 但我真的很喜欢 Haml 的想法，所以我想搏一搏。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T13:23:48.630

对于不应输出某些内容的 ruby​​ 代码，请`-`使用`=`：

```
 .user-auth-nav{style => 'float:right'}
    -if user_signed_in?
      =link_to('Edit registration', edit_user_registration_path)
      =link_to('Logout', destroy_user_session_path)
    -else
      =link_to('Login', new_user_session_path)
      =link_to('Register', new_user_registration_path) 
```

在`end`haml中可以省略标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T13:22:51.327

当您使用 Haml 作为视图引擎时，您不使用`end`. 只写

```
= if user_signed_in?
  = link_to('Edit registration', edit_user_registration_path)
  = link_to('Logout', destroy_user_session_path)
= else
  = link_to('Login', new_user_session_path)
  = link_to('Register', new_user_registration_path) 
```

它会起作用。Haml 将自行关闭块。

**PS**
也使用`-`（破折号）代替`=`不可打印的代码行，如`if`和`else`。

# ios - AFJsonRequest 和 AFHttpClient 一起工作吗？

> ID：10054850
> 
> 赞同：0
> 
> 时间：2012-04-07T13:20:38.663
> 
> 标签：ios, json, afnetworking

```
 NSURL *url = [NSURL URLWithString:@"contact.php"];
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];

NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                        @"companyID", constCompanyID,
                        nil];

NSURLRequest *request = [httpClient requestWithMethod: @"POST" path:@"contact.php" parameters:params];

AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    for(id entry in JSON)
    {
        self.strAddr = [entry valueForKeyPath:@"addr"];
        CCLOG(@"Address: %@", self.strAddr);
    }
} failure:nil];
[operation start];
CCLOG(@"Address: %@", strAddr); 
```

在日志中，地址为空。PHP很好；在浏览器中，它返回我想要的。

在我添加 AFHTTPClient 以传入变量之前，此代码一直有效。我一定是做错了什么，或者我不能那样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T00:00:41.900

在第 1 行，您尝试从“contact.php”（`NSURL +URLWithString:`返回`nil`）创建一个 URL，而您真正需要的是基本 URL——在对特定 Web 服务的请求中常见的完整 URL，例如“ http://api.twitter.com/1/”。

# django - Django 表单集

> ID：10054855
> 
> 赞同：0
> 
> 时间：2012-04-07T13:21:06.757
> 
> 标签：django, django-forms, formsets

我正在用 django 制作一个调查网站。我是 django 的新手，所以如果我不能很好地解释，我提前道歉。我的问题集中在以下模型上：

```
class SurveyType(models.Model):

    name = models.CharField(max_length=200)

    def __unicode__(self):
        return self.name    

class Question(models.Model):

    ANSWERTYPE_CHOICES = (
        (u'T', u'Text'),
        (u'R', u'Range'),
        (u'M', u'Media'),
    )

    question = models.CharField(max_length=200)

    surveytype = models.ForeignKey(SurveyType)

    answertype = models.CharField(max_length=1, choices=ANSWERTYPE_CHOICES)

    order = models.IntegerField(default=0)

    def __unicode__(self):
        return self.question        

class Survey(models.Model):

    course = models.ForeignKey(Course)

    surveytype = models.ForeignKey(SurveyType)

    def __unicode__(self):
        return u"%s %s" % (self.course, self.surveytype) 

class Answer(models.Model):

    answer = models.CharField(max_length=400)

    survey = models.ForeignKey(Survey)

    question = models.ForeignKey(Question)

    def __unicode__(self):
        return self.answer 
```

Django 接收调查 ID。使用调查 ID，它会获取调查类型并显示必须显示的问题。

```
def survey(request, survey_id):
    survey_data = get_object_or_404(Survey, pk=survey_id)
    survey_type = survey_data.surveytype
    questions = Question.objects.all().filter(surveytype = survey_type).order_by('order') 
```

我已经阅读了关于表单集的 django 文档，但我不明白我必须在 forms.py 中写什么，所以我不能在views.py 中调用表单来在显示问题的模板中呈现表单并编写答案模型中的答案。

在此先感谢并为我的英语感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T17:47:09.063

使用 modelforms 和 foo 循环解决。

模型.py

```
class Question(models.Model): 
    question = models.CharField(max_length=200)
    surveytype = models.ForeignKey(SurveyType)
    answertype = models.ForeignKey(ContentType,
    limit_choices_to = Q(name='text answer', app_label='surveys')| \
    Q(name='media answer', app_label='surveys')| \
    Q(name='range answer', app_label='surveys'))

class RangeAnswer(models.Model):
    answer = models.IntegerField(max_length=1, choices=CHOICES_RANGE, default=0)
    def __unicode__(self):
        return u'%s'%(self.answer)

class TextAnswer(models.Model):
    answer= models.CharField(max_length=200)
    def __unicode__(self):
        return u'%s'%(self.answer)

class MediaAnswer(models.Model):
    answer= models.ForeignKey(Media)
    def __unicode__(self):
        return u'%s'%(self.answer) 
```

表格.py

```
class RangeAnswerForm(forms.ModelForm):
    def __init__(self, *args, **kwargs):
        super(RangeAnswerForm, self).__init__(*args, **kwargs)
        self.fields['answer'].label = "Mi valoración"    
    class Meta:
        model = RangeAnswer
        widgets = {
            'answer': forms.RadioSelect(renderer=RadioRenderer)
        } 
RangeAnswer.form = RangeAnswerForm

class MediaAnswerForm(forms.ModelForm):
    def __init__(self, *args, **kwargs):
        super(MediaAnswerForm, self).__init__(*args, **kwargs)
        self.fields['answer'].label = "Medio"    
    class Meta:
        model = MediaAnswer
MediaAnswer.form= MediaAnswerForm

class TextAnswerForm(forms.ModelForm):
    def __init__(self, *args, **kwargs):
        super(TextAnswerForm, self).__init__(*args, **kwargs)
        self.fields['answer'].label = "Respuesta"    
    class Meta:
        model = TextAnswer
TextAnswer.form = TextAnswerForm 
```

视图.py

```
for q in questions :
    q.form = q.answertype.model_class().form(prefix="%s"%q.id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T13:30:09.567

您是否将表单导入到您的views.py？

之后，您只需创建一个将表单传递给模板的视图。

例如在views.py

```
def your_form(request):
    form = RegisterForm()
    return render_to_response('your_template.html', {'form': form}, RequestContext(request)) 
```

然后在您的模板中，您可以简单地通过编写来呈现表单

```
{{ form }} 
```

# c# - LINQ to Entities 查询编译时间长，SQL 运行速度快

> ID：10054856
> 
> 赞同：6
> 
> 时间：2012-04-07T13:21:20.157
> 
> 标签：c#, linq-to-entities, sql-server-2008-r2

我正在编写一段代码，由一位同事编写，它与我们公司使用的 CRM 应用程序交互。这段代码中有两个 LINQ to Entities 查询在我们的应用程序中多次执行，我被要求优化它们，因为其中一个非常慢。

这些是查询：

第一个查询，这个查询几乎可以立即编译。它从 CRM 数据库中获取关系信息，通过应用程序给出的关系 ID 列表进行过滤：

```
from relation in context.ADRELATION
where ((relationIds.Contains(relation.FIDADRELATION)) && (relation.FLDELETED != -1))
join addressTable in context.ADDRESS on relation.FIDADDRESS equals addressTable.FIDADDRESS
   into temporaryAddressTable
from address in temporaryAddressTable.DefaultIfEmpty()
join mailAddressTable in context.ADDRESS on relation.FIDMAILADDRESS equals
   mailAddressTable.FIDADDRESS into temporaryMailAddressTable
from mailAddress in temporaryMailAddressTable.DefaultIfEmpty()
select new { Relation = relation, Address = address, MailAddress = mailAddress }; 
```

第二个查询，**编译**大约需要 4-5 秒，并从数据库中获取有关人员的信息（再次通过 ID 列表过滤）：

```
from role in context.ROLE
join relationTable in context.ADRELATION on role.FIDADRELATION equals relationTable.FIDADRELATION into temporaryRelationTable
from relation in temporaryRelationTable.DefaultIfEmpty()
join personTable in context.PERSON on role.FIDPERS equals personTable.FIDPERS into temporaryPersonTable
from person in temporaryPersonTable.DefaultIfEmpty()
join nationalityTable in context.TBNATION on person.FIDTBNATION equals nationalityTable.FIDTBNATION into temporaryNationalities
from nationality in temporaryNationalities.DefaultIfEmpty()
join titelTable in context.TBTITLE on person.FIDTBTITLE equals titelTable.FIDTBTITLE into temporaryTitles
from title in temporaryTitles.DefaultIfEmpty()
join suffixTable in context.TBSUFFIX on person.FIDTBSUFFIX equals suffixTable.FIDTBSUFFIX into temporarySuffixes
from suffix in temporarySuffixes.DefaultIfEmpty()
where ((rolIds.Contains(role.FIDROLE)) && (relation.FLDELETED != -1))
select new { Role = role, Person = person, relation = relation, Nationality = nationality, Title = title.FTXTBTITLE, Suffix = suffix.FTXTBSUFFIX }; 
```

我已经设置了 SQL Profiler 并从两个查询中获取 SQL，然后在 SQL Server Management Studio 中运行它。即使有大量（~1000）个 ID，这两个查询都运行得非常快。所以问题似乎出在 LINQ 查询的编译上。

我尝试使用已编译的查询，但由于那些只能包含原始参数，我不得不用过滤器去除部分并在 Invoke() 调用之后应用它，所以我不确定这是否有很大帮助。此外，由于此代码在 WCF 服务操作中运行，因此我不确定编译后的查询在后续调用中是否仍然存在。

最后我尝试的是在第二个查询中只选择一列。虽然这显然不会给我所需的信息，但我认为它会比我们现在选择的约 200 列更快。没有这种情况，仍然需要4-5秒。

我根本不是 LINQ 专家，所以我几乎无法遵循这段代码（我觉得它写得不是最理想的，但我不能指望它）。谁能给我一个提示，为什么会出现这个问题？

我剩下的唯一解决方案是手动选择所有信息，而不是加入所有这些表。然后我会得到大约 5-6 个查询。我想还不错，但由于我在这里没有处理效率极低的 SQL（或者至少是可接受的低效率水平），我希望能防止这种情况发生。

在此先感谢，希望我说清楚了。如果没有，请随时询问，我将提供更多详细信息。

* * *

**编辑：** 我最终在我的实体框架上添加了关联（目标数据库没有指定外键）并因此重写查询：

```
context.ROLE.Where(role => rolIds.Contains(role.FIDROLE) && role.Relation.FLDELETED != -1)
            .Select(role => new 
                            { 
                                ContactId = role.FIDROLE, 
                                Person = role.Person, 
                                Nationality = role.Person.Nationality.FTXTBNATION,
                                Title = role.Person.Title.FTXTBTITLE,
                                Suffix = role.Person.Suffix.FTXTBSUFFIX
                            }); 
```

似乎更具可读性，而且速度也更快。

感谢您的建议，我一定会牢记对不同数量的参数进行多个编译查询的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T18:45:55.167

Gabriels 的回答是正确的：使用已编译的查询。

看起来您正在为每个 WCF 请求重新编译它，这当然违背了一次性初始化的目的。相反，将编译后的查询放入静态字段。

编辑：

这样做：向您的服务发送最大负载并暂停调试器 10 次。查看调用堆栈。它是在 L2S 代码还是在 ADO.NET 代码中更频繁地停止？这将告诉您问题是否仍然存在于 L2S 或 SQL Server 上。

接下来，让我们修复过滤器。我们需要将它推回编译后的查询中。这只能通过转换它来实现：

```
rolIds.Contains(role.FIDROLE) 
```

对此：

```
role.FIDROLE == rolIds_0 || role.FIDROLE == rolIds_1 || ... 
```

您需要为每个 rolIds 基数创建一个新的编译查询。这很讨厌，但有必要让它编译。在我的项目中，我已经自动化了这项任务，但你可以在这里做一个一次性的解决方案。

我猜大多数查询将只有很少的角色 ID，因此您可以为基数 1-10 实现 10 个已编译查询，如果基数超过 10，您将回退到客户端过滤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T15:29:25.263

如果您决定将查询保留在代码中，则可以编译它。当您运行您的应用程序时，您仍然必须编译一次查询，但所有后续调用都将使用该已编译的查询。您可以在此处查看 MSDN 帮助：http: [//msdn.microsoft.com/en-us/library/bb399335.aspx](http://msdn.microsoft.com/en-us/library/bb399335.aspx)。

另一种选择是使用存储过程并从您的代码中调用该过程。因此没有编译时间。

# iphone - OpenGL ES 旋转纹理

> ID：10054857
> 
> 赞同：0
> 
> 时间：2012-04-07T13:21:22.077
> 
> 标签：iphone, ios, opengl-es, opengl-es-2.0

我有以下片段着色器：

```
varying highp vec2 coordinate;
precision mediump float;

uniform vec4 maskC;
uniform float threshold;
uniform sampler2D videoframe;
uniform sampler2D videosprite;
uniform vec4 mask;
uniform vec4 maskB;

uniform int recording;

vec3 normalize(vec3 color, float meanr)
{
    return color*vec3(0.75 + meanr, 1., 1\. - meanr);
}

void main() {
    float d;
    float dB;
    float dC;

    float meanr;
    float meanrB;
    float meanrC;

    float minD;

    vec4 pixelColor;
    vec4 spriteColor;

    pixelColor = texture2D(videoframe, coordinate);
    spriteColor = texture2D(videosprite, coordinate);

    meanr   = (pixelColor.r + mask.r)/8.;
    meanrB  = (pixelColor.r + maskB.r)/8.;
    meanrC  = (pixelColor.r + maskC.r)/8.;

    d   = distance(normalize(pixelColor.rgb, meanr), normalize(mask.rgb, meanr));
    dB  = distance(normalize(pixelColor.rgb, meanrB), normalize(maskB.rgb, meanrB));
    dC  = distance(normalize(pixelColor.rgb, meanrC), normalize(maskC.rgb, meanrC));

    minD = min(d, dB);
    minD = min(minD, dC);

    gl_FragColor = spriteColor;
    if (minD > threshold) {
        gl_FragColor = pixelColor;
    }

} 
```

现在，根据`recording`是 0 还是 1，我想旋转`uniform sampler2D videosprite`180 度（在 x 轴上反射，垂直翻转）。我怎样才能做到这一点？

我找到了函数 glRotatef()，但是如何指定要旋转`videosprite`而不是旋转`videoframe`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T17:28:51.397

呃，你不能只修改`videosprite`片段着色器中的访问方式吗？

```
vec2 c2;
if(recording == 0) {
    c2 = coordinate;
} else {
    c2 = vec2(coordinate.x, 1.0 - coordinate.y);
} 
```

# ios - 尝试将第三个选项卡添加到 tabBarController

> ID：10054865
> 
> 赞同：47
> 
> 时间：2012-04-07T13:22:34.903
> 
> 标签：ios, tabbarcontroller

我正在尝试使用 ios5 向 tabBarController 添加第三个选项卡。将其拖到情节提要时获得的标准对象有 2 个选项卡。有谁知道如何做到这一点？我搜索了互联网，所有示例都从带有额外选项卡的 tabBarController 开始，但没有显示如何获取它。

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2015-09-28T05:54:10.863

这是我观看的视频，它教我如何将第三个选项卡添加到 TabBarController：

*   [Xcode Swift for iOS 的标签栏](https://www.youtube.com/watch?v=d1_X0DQdY8o)

下面我总结一下这个过程。

# 创建一个新的选项卡式应用程序项目

[![在此处输入图像描述](../Images/2f9086df028afab0eee228ece9ed9bb0.png)](https://i.stack.imgur.com/ddI7N.png)

这将自动提供两个已经“正常工作”的选项卡。

[![在此处输入图像描述](../Images/100371f507bea47997b9686f4fef48f6.png)](https://i.stack.imgur.com/PWo6Y.png)

# 添加新的视图控制器

将另一个视图控制器拖到情节提要上。

[![在此处输入图像描述](../Images/646fd161abaa3b8cf9d778fdbbf94d30.png)](https://i.stack.imgur.com/iLcqH.png)

# 添加标签栏项目

将一个 Tab Bar Item 拖到刚刚添加的新 View Controller 上。

[![在此处输入图像描述](../Images/304a7c5ee937ea00b5e145aa8793948a.png)](https://i.stack.imgur.com/Sa7L4.png)

# 连接到选项卡视图控制器

单击并按住 Control 从 Tab View Controller 拖动到新的 View Controller。将弹出一个菜单。选择**Relationship Segue**组下的**视图控制器**选项。

 **[![在此处输入图像描述](../Images/92f3ffb6252a64878fffe9559a802e60.png)](https://i.stack.imgur.com/nbnOY.png)

就是这样。您现在应该能够运行它并且所有三个选项卡都可以工作。观看我链接到的视频以获取更多详细信息。

笔记：

*   要在新选项卡上执行任何操作，请不要忘记添加新的 View Controller 类（就像添加任何新的 View Controller 一样）。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-11-04T15:59:11.590

根据 Wolvorin 和 Tom van 的回应，根据我的经验，您应该执行以下操作：

1.  创建一个空的`View Controller`（在控制器和对象中）
2.  从 Windows 和 Bars 拖动`Tab Bar Item`到新添加的视图
3.  从主视图控制器中，选择`Tab Bar Controller`图标（在 First Responder 旁边），然后按住 Control 并拖动到新添加的视图
4.  BOOM你有新标签

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-04-05T15:43:02.247

为了阐述@Roozbeh 的答案，当您控制从标签栏控制器拖动到新添加的视图控制器时，请确保您选择关系序列下的视图控制器选项

![从这里控制拖动](../Images/e29d46b4a191b49338e80244e107219d.png)

![并选择关系序列下的视图控制器](../Images/1c8ac29a737d90d2bc4dd83a555ef0c9.png)

在遇到同样的问题后，我正在阅读这个问题，我想澄清确切的步骤是什么。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-04-07T13:38:40.600

对于第三个选项卡，首先添加一个视图控制器，然后右键单击 tabview 控制器，然后从它的故事板 segway 从关系控件拖动到添加的视图控制器，就完成了

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-07T13:26:41.270

看屏幕的右侧，我相信它是对象库视图。只需找到“标签项”（或其他东西）并将其拖到栏中。**

# c# - .Net CLR 卸载与关闭？

> ID：10054866
> 
> 赞同：2
> 
> 时间：2012-04-07T13:22:38.633
> 
> 标签：c#, .net, garbage-collection, clr, appdomain

> 是什么导致 Finalize 方法被调用？

这个问题的 2 个答案（共 4 个）是：

*   `The CLR is unloading an AppDomain`当 AppDomain 卸载时，CLR 将 AppDomain 中的任何内容都视为根，并执行由所有代组成的垃圾回收。

*   `The CLR is shutting down`当进程正常终止时，CLR 会关闭（例如，与通过任务管理器进行的外部关闭相反）。

我假设这`The CLR is unloading an AppDomain`是程序（例如控制台 [exe]）正在关闭（通过按关闭/程序正常结束）

怎么样`The CLR is shutting down`？*继续上面的 [Exe] 程序类比：*

*   这是什么意思 ？我怎样才能*关闭 CLR* ...？
*   [在 IIS 世界中] 这是否意味着 IIS 重置？

拜托，我能解释一下吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T13:32:35.560

AppDomain 是比 Process 更细化的单元。一个 Process 可以有多个 AppDomain 实例，每个实例都可以单独卸载。

CLR 关闭是进程终止。

AppDomain 卸载是每个 AppDomain 分开的。

（尽管我个人不会在不检查文档的情况下保证在任何一种情况下都会执行所有终结器等）

例如，我在一个长时间运行的自更新 Windows 服务中使用了多个 AppDomain 实例；当检测到新版本时，它会拉下新的二进制文件，生成一个新的 AppDomain，让它运行，将未来的操作切换到新的 AppDomain，并卸载旧的 AppDomain（当运行操作完成时）。

# html - When a child element overflows horizontally, why is the right padding of the parent ignored?

> ID：10054870
> 
> 赞同：85
> 
> 时间：2012-04-07T13:23:11.033
> 
> 标签：html, css, browser, overflow

Given this simple structure:

```
<div id="parent">
    <div id="child">Lorem ipsum</div>
</div> 
```

with this CSS:

```
#parent {
    width: 200px;
    height: 200px;
    padding: 20px;
    overflow-x: scroll;
}

#child {
    width: 500px;      
} 
```

**Live demo:** [http://jsfiddle.net/523me/5/](http://jsfiddle.net/523me/5/)

Notice that the parent has a `20px` padding and that the child overflows horizontally (because it is wider). If you scroll the parent all the way to the right, you'll see that the child touches the right edge of the parent.

So, the parent should have a right padding, but it is ignored. It seems that when the child has a fixed width, the right padding of the parent does not apply. (Is this specified by a standard? I would love to know. Please let me know if you find anything!)

Is there a way to force the right padding to be applied in this scenario *without* having to remove any of the elements from the flow (by floating or positioning)?

![enter image description here](../Images/c81f8f5aa773d89c24d381d5de7d17a9.png)

Screenshot 1 - The right padding is ignored. This is how all current browsers behave.

Screenshot 2 - The right padding applies. This is what I'm trying to accomplish. (Btw, the screenshot is from IE7, which is the only browser which does not ignore the right padding.)

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-07T14:30:37.460

你正遭受[这个](https://web.archive.org/web/20170707053030/http://www.brunildo.org/test/overscrollback.html)问题的困扰。

我会通过给孩子一个边距（而不是给父母一个填充）来解决它：

```
body {
  padding: 2em;
}

#parent {
  width: 200px;
  height: 200px;
  overflow-x: scroll;
  background: gray;
}

#child {
  width: 500px;
  background: yellow;
  margin: 20px;
  display: inline-block;
}
```

```
<div id="parent">
  <div id="child">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras et turpis eu lorem consectetur blandit sed vel ligula. In lorem ligula, lacinia sed aliquet sed, congue quis tortor. In sed magna eros, eget blandit arcu. Nulla sit amet volutpat ipsum. Duis
    quis nisl massa. Sed ipsum magna, tempus non malesuada in, gravida et sapien. Fusce a odio nulla, quis ultrices mauris. Maecenas in tellus id massa fringilla molestie.</div>
</div>
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-07T14:15:10.070

不知道，但补充说：

```
#child{
  display: inline-block;
} 
```

似乎修复它：http: [//jsfiddle.net/523me/6/](http://jsfiddle.net/523me/6/)

我只在最新的 Chrome 中测试过，可能不是跨浏览器

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-07T14:17:32.413

您可以将填充更改为边框。

```
padding: 20px; 
```

至

```
border: 20px solid gray; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-07T14:17:59.427

不，填充不会被忽略，但它仍然在父级内部。

请参阅[更新的 jsFiddle](http://jsfiddle.net/523me/8/)，您可以在其中看到填充没有从其原始位置移动。

编辑：嗯，有一些异常。如果你给内部 div 一个右边距，那也会被忽略。嗯。支持你的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-07T14:29:25.507

将 padding-right 应用于溢出元素本身，并将背景移动到其直接子元素。

```
<div id="parent">
    <div id="child"><div>Lorem ipsum...</div></div>
</div>

<style>
#parent {padding-right: 0; }
#child {padding-right: 20px; }
#child > DIV {background: yellow; }
</style> 
```

[http://jsfiddle.net/523me/9/](http://jsfiddle.net/523me/9/)

# python - How do I get the full DN, distinguishedName of an user with python ldap?

> ID：10054878
> 
> 赞同：0
> 
> 时间：2012-04-07T13:24:42.113
> 
> 标签：python, active-directory, ldap

I was able to get attributes about an user by doing queries on LDAP using Python ldap but I don't know how to obtain his DN.

Remark: Doing `CN=sAMAccount,base_dn)` is not valid because the user can be somewhere in another sub-tree.

Which is the proper way of getting the `DN` for an user for which I do have the `sAMAccount`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T16:20:47.357

搜索结果包含：

*   搜索结果条目列表。列表中的每个搜索结果条目都包含条目的可分辨名称和（部分）属性列表

*或者*

*   搜索结果参考列表。每个搜索结果引用都包含一系列 URI

在条目或引用之后是单个搜索结果完成消息。

因此，如果任何条目匹配，它们将在搜索结果条目列表中返回，每个条目都包含匹配条目的可分辨名称。您的 python API 文档应包含有关如何提取匹配条目的可分辨名称的信息。

# python - pygame.camera 不工作？

> ID：10054880
> 
> 赞同：2
> 
> 时间：2012-04-07T13:25:40.163
> 
> 标签：python, camera, pygame

此脚本正在使用 Face.com API 分析面部反应。由于某种原因，pygame 找不到我的相机（我认为这就是问题所在）。我的代码有什么问题吗？

我已经安装了 pygame 并且看起来运行良好。但下面的代码给了我错误。

```
####################################################
#  IMPORTS
####################################################

# imports for capturing a frame from the webcam
import pygame
import pygame.camera
import pygame.image

# import for detecting faces in the photo
import face_client

# import for storing data
from pysqlite2 import dbapi2 as sqlite

# miscellaneous imports
from time import strftime, localtime, sleep
import os
import sys

####################################################
# CONSTANTS
####################################################

DB_FILE_PATH="log.db"
FACE_COM_APIKEY="API CODE"
FACE_COM_APISECRET="API SECRET"
DALELANE_FACETAG="name@name.name"
POLL_FREQUENCY_SECONDS=3

class AudienceMonitor():

    #
    # prepare the database where we store the results
    #
    def initialiseDB(self):
        self.connection = sqlite.connect(DB_FILE_PATH, detect_types=sqlite.PARSE_DECLTYPES|sqlite.PARSE_COLNAMES)
        cursor = self.connection.cursor()

        cursor.execute('SELECT name FROM sqlite_master WHERE type="table" AND NAME="facelog" ORDER BY name')
        if not cursor.fetchone():
            cursor.execute('CREATE TABLE facelog(ts timestamp unique default current_timestamp, isSmiling boolean, smilingConfidence int, mood text, moodConfidence int)')

        cursor.execute('SELECT name FROM sqlite_master WHERE type="table" AND NAME="guestlog" ORDER BY name')
        if not cursor.fetchone():
            cursor.execute('CREATE TABLE guestlog(ts timestamp unique default current_timestamp, isSmiling boolean, smilingConfidence int, mood text, moodConfidence int, agemin int, ageminConfidence int, agemax int, agemaxConfidence int, ageest int, ageestConfidence int, gender text, genderConfidence int)')

        self.connection.commit()

    #
    # initialise the camera
    #
    def prepareCamera(self):
        # prepare the webcam
        pygame.camera.init()
        self.camera = pygame.camera.Camera(pygame.camera.list_cameras()[0], (900, 675))
        self.camera.start()

    #
    # take a single frame and store in the path provided
    #
    def captureFrame(self, filepath):
        # save the picture
        image = self.camera.get_image()
        pygame.image.save(image, filepath)

    #
    # gets a string representing the current time to the nearest second
    #
    def getTimestampString(self):
        return strftime("%Y%m%d%H%M%S", localtime())

    #
    # get attribute from face detection response
    #
    def getFaceDetectionAttributeValue(self, face, attribute):
        value = None
        if attribute in face['attributes']:
            value = face['attributes'][attribute]['value']
        return value

    #
    # get confidence from face detection response
    #
    def getFaceDetectionAttributeConfidence(self, face, attribute):
        confidence = None
        if attribute in face['attributes']:
            confidence = face['attributes'][attribute]['confidence']
        return confidence

    #
    # detects faces in the photo at the specified path, and returns info
    #
    def faceDetection(self, photopath):
        client = face_client.FaceClient(FACE_COM_APIKEY, FACE_COM_APISECRET)
        response = client.faces_recognize(DALELANE_FACETAG, file_name=photopath)
        faces = response['photos'][0]['tags']
        for face in faces:
            userid = ""
            faceuseridinfo = face['uids']
            if len(faceuseridinfo) > 0:
                userid = faceuseridinfo[0]['uid']
            if userid == DALELANE_FACETAG:
                smiling = self.getFaceDetectionAttributeValue(face, "smiling")
                smilingConfidence = self.getFaceDetectionAttributeConfidence(face, "smiling")
                mood = self.getFaceDetectionAttributeValue(face, "mood")
                moodConfidence = self.getFaceDetectionAttributeConfidence(face, "mood")
                self.storeResults(smiling, smilingConfidence, mood, moodConfidence)
            else:
                smiling = self.getFaceDetectionAttributeValue(face, "smiling")
                smilingConfidence = self.getFaceDetectionAttributeConfidence(face, "smiling")
                mood = self.getFaceDetectionAttributeValue(face, "mood")
                moodConfidence = self.getFaceDetectionAttributeConfidence(face, "mood")
                agemin = self.getFaceDetectionAttributeValue(face, "age_min")
                ageminConfidence = self.getFaceDetectionAttributeConfidence(face, "age_min")
                agemax = self.getFaceDetectionAttributeValue(face, "age_max")
                agemaxConfidence = self.getFaceDetectionAttributeConfidence(face, "age_max")
                ageest = self.getFaceDetectionAttributeValue(face, "age_est")
                ageestConfidence = self.getFaceDetectionAttributeConfidence(face, "age_est")
                gender = self.getFaceDetectionAttributeValue(face, "gender")
                genderConfidence = self.getFaceDetectionAttributeConfidence(face, "gender")
                # if the face wasnt recognisable, it might've been me after all, so ignore
                if "tid" in face and face['recognizable'] == True:
                    self.storeGuestResults(smiling, smilingConfidence, mood, moodConfidence, agemin, ageminConfidence, agemax, agemaxConfidence, ageest, ageestConfidence, gender, genderConfidence)
                    print face['tid']

    #
    # stores face results in the DB
    #
    def storeGuestResults(self, smiling, smilingConfidence, mood, moodConfidence, agemin, ageminConfidence, agemax, agemaxConfidence, ageest, ageestConfidence, gender, genderConfidence):
        cursor = self.connection.cursor()
        cursor.execute('INSERT INTO guestlog(isSmiling, smilingConfidence, mood, moodConfidence, agemin, ageminConfidence, agemax, agemaxConfidence, ageest, ageestConfidence, gender, genderConfidence) values(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)',
                        (smiling, smilingConfidence, mood, moodConfidence, agemin, ageminConfidence, agemax, agemaxConfidence, ageest, ageestConfidence, gender, genderConfidence))
        self.connection.commit()

    #
    # stores face results in the DB
    #
    def storeResults(self, smiling, smilingConfidence, mood, moodConfidence):
        cursor = self.connection.cursor()
        cursor.execute('INSERT INTO facelog(isSmiling, smilingConfidence, mood, moodConfidence) values(?, ?, ?, ?)',
                        (smiling, smilingConfidence, mood, moodConfidence))
        self.connection.commit()

monitor = AudienceMonitor()
monitor.initialiseDB()
monitor.prepareCamera()
while True:
    photopath = "data/photo" + monitor.getTimestampString() + ".bmp"
    monitor.captureFrame(photopath)
    try:
        faceresults = monitor.faceDetection(photopath)
    except:
        print "Unexpected error:", sys.exc_info()[0]
    os.remove(photopath)
    sleep(POLL_FREQUENCY_SECONDS) 
```

我得到的错误是

```
 Traceback (most recent call last):
  File "gamemood.py", line 147, in <module>
    monitor.prepareCamera()
  File "gamemood.py", line 56, in prepareCamera
    self.camera = pygame.camera.Camera(pygame.camera.list_cameras()[0], (900, 675))
TypeError: 'NoneType' object is not subscriptable 
```

我不明白这个错误！怎么了？Pygame 找不到我的相机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:09:09.750

`list_cameras`正在返回`None`而不是列表，您看到的错误是您尝试检索`None[0]`.

`camera`根据源代码，当 Pygame 在非 Linux 平台上编译时，模块中的大部分功能似乎都被悄悄禁用了。即使这些函数应该在 Mac OS 上运行，也有预处理器指令直接将其排除在外。

从 Pygame 1.9.1 开始：

```
/* list_cameras() - lists cameras available on the computer */
PyObject* list_cameras (PyObject* self, PyObject* arg)
{
#if defined(__unix__)
    PyObject* ret_list;
    PyObject* string;
    char** devices;
    int num_devices, i;

    num_devices = 0;
    ret_list = NULL;
    ret_list = PyList_New (0);
    if (!ret_list)
        return NULL;

    devices = v4l2_list_cameras(&num_devices);

    for(i = 0; i < num_devices; i++) {
        string = PyString_FromString(devices[i]);
        PyList_Append(ret_list, string);
        Py_DECREF(string);
        free(devices[i]);
    }
    free(devices);

    return ret_list;
#else
    Py_RETURN_NONE;
#endif
} 
```

我认为这是对正在发生的事情最有可能的解释。您的代码可能没问题，但您调用的函数只能返回`None`。我对 Mac OS 或`camera`模块知之甚少，无法告诉您如果您将所有这些语句更改为`#if defined(__unix__) || defined(__APPLE__)`并自己编译它会起作用或不起作用。

# iphone - How to init UIButton's type after using alloc?

> ID：10054881
> 
> 赞同：1
> 
> 时间：2012-04-07T13:25:50.350
> 
> 标签：iphone, objective-c, ios, uibutton

I know we can use the `buttonWithType` method to get an UIButton with specific type.

```
UIButton * button = [UIButton buttonWithType:(UIButtonTypeRoundedRect)]; 
```

Today, I casually use UIButton's alloc/init method to create an UIButton:

```
UIButton * button = [[UIButton alloc] initWithFrame:CGRectMake(20, 300, 100, 50)]; 
```

then I found there is no way to change the button's type.Because the UIButton's buttonType property is readonly.

In UIKit.framework, UIButton.h :

```
@property(nonatomic,readonly) UIButtonType buttonType; 
```

My question is:if I use alloc/init to create a UIButton, can I change the UIButton's type? If not, since there is **NOT** any init method like `-initWithType` in UIButton, we can only use the `+buttonWithType` method to get an autorelease UIButton. It sounds a little strange, why not provide an initWithType method?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T13:34:01.680

如果 +buttonWithType 为您处理，为什么还要分配和初始化？像这样扭转你的想法：

```
UIButton * button = [UIButton buttonWithType:(UIButtonTypeRoundedRect)];
[button setFrame:CGRectMake(20, 300, 100, 50)]; 
```

# android - How to delay code execution (draw the path) for few seconds?

> ID：10054882
> 
> 赞同：2
> 
> 时间：2012-04-07T13:25:50.363
> 
> 标签：android, handler, progressdialog, delayed-execution

This is the problem about loading. My application should wait for 3 seconds and then draw path. Now, the loading message box appears within 3 seconds but the application does not wait for 3 seconds and draw immediately . Is there any problem in my coding ?

Many Thanks!!

```
 public void drawpath(){
       // first to do some checking
    if (sourceLat.equals("22.3366467")  && destinationLat.equals("35.68449"))
        ShowMsgDialog("Please enter the starting point and destination");
    else if (sourceLat.equals("22.3366467") )
        ShowMsgDialog("Please enter the starting point by touch");
    else if (destinationLat.equals("35.68449") )
        ShowMsgDialog("Please enter the destination by touch");

    else if (pairs != null ){
        //  go to loading function
        loading();
        // Start to draw the path
        String[] lngLat = pairs[0].split(",");

        GeoPoint startGP = new GeoPoint((int) (Double.parseDouble(lngLat[1]) * 1E6), (int) (Double.parseDouble(lngLat[0]) * 1E6));

         mc = mapView.getController();
         geoPoint = startGP;
         mc.setCenter(geoPoint);
         mc.setZoom(15);
         mapView.getOverlays().add(new DirectionPathOverlay(startGP, startGP));

                ...... 
        } 
```

in the loading() function:

```
private void loading() {
    progressDialog = ProgressDialog.show(this, "Showing Data..", "please wait", true, false);
    new Thread()
    { 
      public void run()
      { 
        try{ 
          sleep(3000);
        }
        catch (Exception e){
          e.printStackTrace();
        }
        finally{
            progressDialog.dismiss();    
        }
      }
    }.start(); 
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-29T12:12:30.853

您也可以通过以下方式执行此操作：

```
new Handler().postDelayed(new Runnable() {
        @Override
        public void run() {
            drawPath();
        }
    }, 5000); 
```

这不会显示任何 lint 警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T15:18:11.920

**处理程序**会很容易地完成这项工作。您*不需要*单独的线程或 AsyncTask()。

在您的 Activity 中使用 Handler 来延迟事件，例如在您的情况下调用方法 drawPath() ：

```
private RefreshHandler mRedrawHandler = new RefreshHandler(); 
 private RefreshHandler mRedrawHandler = new RefreshHandler(); 

     class RefreshHandler extends Handler {  
            @Override  
            public void handleMessage(Message msg) {  
          drawPath(); 
            }  

            public void sleep(long delayMillis) {  
              this.removeMessages(0);  
              sendMessageDelayed(obtainMessage(0), delayMillis);  
            }  
          }; 
```

在您的 Activity 的 onCreate() 中（或在任何按钮的 onClick() 中，只要您想开始延迟）， call`mRedrawHandler.sleep(3000); , drawPath();`是您开始绘制的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T13:33:38.913

生成新线程后，您的代码将重新获得控制权并继续执行。您的附加线程正在等待不是原始线程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-19T07:41:02.940

用于 android 活动中的延迟器

```
 import android.os.Handler; 
```

在代码主

```
 new Handler().postDelayed(new Runnable() {
        @Override
        public void run() {

        }
    }, 5000); 
```

但是上面的代码已经过时了

最好使用以下代码

**将其用于 Java**

```
new Handler(Looper.getMainLooper()).postDelayed(new Runnable() {
    @Override
    public void run() {
        // Your Code
    }
}, 3000); 
```

**将它用于 Kotlin**

```
Handler(Looper.getMainLooper()).postDelayed({
        {
            //Your Code
        }
    }, 3000) 
```

# java - 如何在 Swing 组件中显示 Flash 动画？

> ID：10054884
> 
> 赞同：0
> 
> 时间：2012-04-07T13:26:02.353
> 
> 标签：java, eclipse, flash, swing

我正在尝试使用 eclipse (java swing) 开发一个应用程序，我想知道是否可以在 JButton 或 JPanel 中添加 Flash 动画

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T13:33:07.350

是的，您可以使用[来自 DJ Project 的 DJ sweet](http://djproject.sourceforge.net/main/index.html)，它的最后一个版本是 2011-07-02。

这是[一个截图](http://djproject.sourceforge.net/sweet/screenshots/images/FlashPlayer.png)。

您可以[从其 sourceforge 站点](http://sourceforge.net/projects/djproject/files/DJ%20Sweet/)下载它。

# java - How to deny choose same file with JFileChooser

> ID：10054885
> 
> 赞同：0
> 
> 时间：2012-04-07T13:26:15.777
> 
> 标签：java, swing, jfilechooser, jtabbedpane

I am creating program whose function is that reading "n" .txt or .java files and of these files creates a UML diagram. I have reading method, but I came to problem with load more same files. I would like to deny load same files, because it makes problems with creating a UML diagram.

I trying to solve it so that I store uploaded file into ArrayList and checking each load file with files saved in ArrayList, where are previous loaded files.

Next problem is that I click to button Yes or No when I choose same file, file is equally loaded.

And when I creating this answer I found next problem. When user select more then one file, ArrayList don't know how to add two files at once.

Is there anyone option how I would solve this problem more easily?

```
ArrayList<String> filenames = new ArrayList<String>();
JTabbedPane tabbedPaneUML_Files = new JTabbedPane();

private void readFiles() {
    JFileChooser fc = new JFileChooser();
    fc.setMultiSelectionEnabled(true);
    FileNameExtensionFilter fileFilter =
            new FileNameExtensionFilter("Only .txt a .java files",
            "txt", "java");
    fc.setFileFilter(fileFilter);
    int returnValue = fc.showOpenDialog(this);        

    if (returnValue == JFileChooser.APPROVE_OPTION) {
        File[] files = fc.getSelectedFiles();
        File file;            
        tabbedPaneUML_Files.addTab("UML diagram", panelUML);

        for (int i = 0; i < files.length; i++) {
            file = files[i];

            for (int j = 0; j < filenames.size(); j++) {
                if (filenames.get(i).equals(fc.getSelectedFile().getName())) {
                    Object[] options = {"Yes", "No"};

                    int answer = JOptionPane.showOptionDialog(this,
                            "Unable to load the same files! To retrieve the other files?",
                            "Load new file", JOptionPane.YES_NO_OPTION,
                            JOptionPane.WARNING_MESSAGE, null, options, options[0]);     

                    if(answer == 0) {
                        readFiles();
                    }
                }
            }         
            filenames.add(file.getName());
            JTextArea loadCode = new JTextArea();
            JScrollPane scrollingFile = new JScrollPane();
            scrollingFile.setViewportView(loadCode);
            tabbedPaneUML_Files.addTab("" + file.getName(), scrollingFile);
            int ch;

            try {
                Reader charsReader =
                        new InputStreamReader(new FileInputStream(file),
                        "UTF-8");

                while ((ch = charsReader.read()) != -1) {
                    loadCode.append(Character.toString((char) ch));
                }
                loadCode.setSelectionStart(0);
                loadCode.setSelectionEnd(0);
                loadCode.setEditable(false);
            } catch (FileNotFoundException ex) {
                Logger.getLogger(HlavniOkno.class.getName()).log(Level.SEVERE, null, ex);
            } catch (IOException ex) {
                Logger.getLogger(HlavniOkno.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    }
} 
```

Thanks for any advice. I already lost ideas. Sorry for my English.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T13:57:12.293

您可以使用[此处找到的验证文件选择器](http://www.isaacsukin.com/news/2011/11/04/java-validated-filechooser)

并对其进行调整，而不是拥有无效文件名列表，而是拥有已选择文件的列表。然后你可以编辑这部分：

> ```
> if (file.exists() && getDialogType() == SAVE_DIALOG) {
> int confirm = JOptionPane.showConfirmDialog( this, file.getName() + " already exists! Would you like to overwrite it?", "File already exists", JOptionPane.YES_NO_OPTION, JOptionPane.WARNING_MESSAGE );
> if (confirm != JOptionPane.YES_OPTION)
> return;
> } 
> ```

说`getDialogType() == LOAD_DIALOG`和错误信息：“文件已被加载”例如。

至于多个文件名，请`File[] files = chooser.getSelectedFiles();`获取所选文件的列表，遍历它们以获取它们的名称，然后将它们存储在已选择文件名的数组中。

*编辑*- 抱歉刚刚看到你已经完成了`File[] files = chooser.getSelectedFiles();`，所以你需要做的就是将它添加到包含已加载文件名的数组中。

# c - 调试我的操作系统的调试器

> ID：10054887
> 
> 赞同：0
> 
> 时间：2012-04-07T13:26:53.813
> 
> 标签：c, debugging, assembly, error-handling, operating-system

我想要一个调试器来调试我的操作系统。在许多地方，我无法弄清楚出了什么问题。**那么有没有可以调试操作系统的调试器**呢？我可以用 gdb 做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T13:35:31.117

您将需要使用在您的计算机上模拟另一台计算机的解决方案 - 本质上是虚拟机。立即想到的最明显的是 VirtualBox 和 VMware，但它们的设计并不是为了调试机器和/或操作系统。

您正在寻找的是[Bochs](http://bochs.sourceforge.net/)或[QEMU](http://wiki.qemu.org/Main_Page)。两者（据我记得）都可以与 gdb 集成，以便设置断点并分析代码的执行。您可能还想阅读[这篇 OSdev.org 文章](http://wiki.osdev.org/How_Do_I_Use_A_Debugger_With_My_OS)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T13:35:43.660

我主要使用[Bochs](http://bochs.sourceforge.net/ "博克斯")来测试我的操作系统项目。它包括一个有用的调试器 (bochsdbg)。

# ios - time limited ios feature

> ID：10054889
> 
> 赞同：0
> 
> 时间：2012-04-07T13:27:12.947
> 
> 标签：ios, app-store

I would like to put a free version of my ios app on appstore. This is a data driven app that remembers events on certain past dates. Can I limit the time of past event to ,lets say, 2 weeks? And if the client want to see the events added more than two weeks ago, he has to upgrade to full (for a fee) ? Is this possible, or will the app be rejected by the apple review process?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T13:31:07.160

You'll probably be able to get away with this. You'll likely want to use an In-App Purchase mechanism to unlock archived events as opposed to having separate free and paid versions of the apps on the app store.

# git - Should I generate new SSH key pair for every workstation or reuse a single one?

> ID：10054893
> 
> 赞同：15
> 
> 时间：2012-04-07T13:27:46.797
> 
> 标签：git, ssh, openssh

This is a newbie question from a Windows guy but when I work with Git or other software relying on (Open)SSH, should I generate a new SSH key for every workstation and then upload the public key to GitHub / BitBucket etc. or should I be reusing some previously generated one? Or does it matter at all?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-07T13:39:09.960

您应该为每个工作站生成一对密钥。这样，如果密钥被泄露，您将能够仅撤销对该密钥的权限，而不会影响其他工作站

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T13:35:47.327

是的，您应该为每个工作站生成一个新的 ssh 密钥。还要确保为您的私钥指定密码并确保其安全。永远不要分享它。

# ruby-on-rails - Resize image using mini_magick, but no file in /tmp directory

> ID：10054894
> 
> 赞同：1
> 
> 时间：2012-04-07T13:28:22.280
> 
> 标签：ruby-on-rails, carrierwave, minimagick

I'm using the carrier_wave and mini_magick gems along with ImageMagick in a Rails app. All versions are as current as can be.

It works fine in development mode. However, I just deployed the app and it does not work in production mode.

The problem occurs when I request mini_magick to resize an image:

```
rake aborted!
No such file or directory - gm identify -ping /tmp/mini_magick20120407-19273-jjzz44.jpg
/usr/local/rvm/gems/ruby-1.9.3-p125/gems/subexec-0.2.1/lib/subexec.rb:71:in `spawn'
/usr/local/rvm/gems/ruby-1.9.3-p125/gems/subexec-0.2.1/lib/subexec.rb:71:in `spawn'
/usr/local/rvm/gems/ruby-1.9.3-p125/gems/subexec-0.2.1/lib/subexec.rb:55:in `run!'
/usr/local/rvm/gems/ruby-1.9.3-p125/gems/subexec-0.2.1/lib/subexec.rb:41:in `run'
/usr/local/rvm/gems/ruby-1.9.3-p125/gems/mini_magick-3.4/lib/mini_magick.rb:405:in `run'
/usr/local/rvm/gems/ruby-1.9.3-p125/gems/mini_magick-3.4/lib/mini_magick.rb:399:in `run_command'
/usr/local/rvm/gems/ruby-1.9.3-p125/gems/mini_magick-3.4/lib/mini_magick.rb:198:in `valid?'
/usr/local/rvm/gems/ruby-1.9.3-p125/gems/mini_magick-3.4/lib/mini_magick.rb:163:in `create'
/usr/local/rvm/gems/ruby-1.9.3-p125/gems/mini_magick-3.4/lib/mini_magick.rb:73:in `read'
/usr/local/rvm/gems/ruby-1.9.3-p125/gems/mini_magick-3.4/lib/mini_magick.rb:134:in `block in open'
/usr/local/rvm/gems/ruby-1.9.3-p125/gems/mini_magick-3.4/lib/mini_magick.rb:133:in `open'
/usr/local/rvm/gems/ruby-1.9.3-p125/gems/mini_magick-3.4/lib/mini_magick.rb:133:in `open'
/usr/local/rvm/gems/ruby-1.9.3-p125/gems/carrierwave-0.6.0/lib/carrierwave/processing/mini_magick.rb:245:in `manipulate!'
/usr/local/rvm/gems/ruby-1.9.3-p125/gems/carrierwave-0.6.0/lib/carrierwave/processing/mini_magick.rb:145:in `resize_to_fit' 
```

When I comment out the CarrierWave request to 'resize_to_fit' the image everything works fine.

I've read where mini_magick had some problems with a race condition where the files in the /tmp directory were being deleted by the garbage collector before mini_magick could process them, but those cases seemed to deal with large images and/or cloud storage.

My image file is only 6K and everything is local, so I find it hard to believe that the garbage collector is swooping in and deleting the /tmp file before it can be resized. (But then again, I have no idea of the timing of these things, so I could be wrong.)

Can anyone help me with this?

Thanks, Larry

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T19:15:46.130

缺少 ImageMagick

检查（在 Fedora Core/CentOS/RHEL 5 上）：`rpm -qa | grep ImageMagick`

安装（在 Fedora Core/CentOS/RHEL 5 上）：`yum install ImageMagick`

# fonts - font: .81em/150% Arial; why is it 0.81?

> ID：10054898
> 
> 赞同：0
> 
> 时间：2012-04-07T13:29:01.020
> 
> 标签：fonts

I saw this font declaration on a [web page](http://webdesignerwall.com/demo/adaptive-design/final.html) and I don't understand what it does. I googled, but no results. Any idea?

**font: .81em/150% Arial, Helvetica, sans-serif;**

I know what the Arial, Helvetic, sans-serif part of it does; I'm wondering what the .81em does.

why is it 0.81? why not it is 0.8 or 0.82 or other value?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T14:45:17.707

这是一次定义**字体大小**和**行高**的简写。

0.81 可能是随机的，只是适合的尝试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:00:53.880

可能有人想将 font-size 设置为 13px 并使用一些转换工具来转换 em，然后发现，例如[这个表](http://pxtoem.com/)有 .813em 为 13px，然后向下舍入。

# ios - 前贴片广告会出现在 iOS 上嵌入的 youtube 视频上吗？

> ID：10054899
> 
> 赞同：0
> 
> 时间：2012-04-07T13:29:19.783
> 
> 标签：ios, youtube, video-streaming, video-encoding

我们正在考虑使用 youtube 为我们的 iOS 应用程序存储和编码我们的视频。如果我们这样做，通过网络出现在 youtube 上的前贴片广告是否也会出现在移动设备上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T13:36:36.583

据我所知，移动版或 HTML5 版 YouTube 上不会出现任何形式的广告。嵌入式广告仅出现在由 Flash Player 驱动的页面版本中，可在桌面浏览器中使用。

# google-image-search - 谷歌图片搜索图片文件（不是网址）

> ID：10054900
> 
> 赞同：2
> 
> 时间：2012-04-07T13:29:24.363
> 
> 标签：google-image-search

我环顾四周，以前有人问过这个问题，但我想知道是否可以这样做，可能不使用 API 或使用其他搜索引擎。

我想通过搜索图像来检查网络上的图像。

有没有办法这样做，如果有人可以指出我正确的方向，我似乎无法开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T22:30:38.457

更新：现在 Chrome 原生支持此功能。您可以右键单击图像并选择“在 Google 中搜索图像”。

这个[扩展](https://chrome.google.com/webstore/detail/search-by-image-by-google/dajedkncpodkggklbegccjpmnglmnflm)是最好的方法。该工具是 Google Chrome 的原生工具。

右键单击以按图像 URL 搜索。没有复制和粘贴。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T13:36:50.310

像这样？

[https://www.google.nl/search?tbm=isch&hl=nl&source=hp&biw=1680&bih=989&q=YourImageURL_Here](https://www.google.nl/search?tbm=isch&hl=nl&source=hp&biw=1680&bih=989&q=YourImageURL_Here)

或者只是将图像拖到谷歌的搜索栏中。

无论如何，看看这篇文章 [谷歌图片搜索：如何构建反向图片搜索 URL？](https://stackoverflow.com/questions/7584808/google-image-search-how-do-i-construct-a-reverse-image-search-url)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T04:08:42.867

您可以使用谷歌按图片搜索。看看这个[http://www.google.com/insidesearch/features/images/searchbyimage.html](http://www.google.com/insidesearch/features/images/searchbyimage.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-16T16:52:24.250

这是目前有效的直接链接。但不一定永远。

```
https://www.google.com/searchbyimage?image_url=YOUR_IMAGE_URL 
```

# c# - How to track user response to confirm box, generated at runtime from c# code?

> ID：10054901
> 
> 赞同：0
> 
> 时间：2012-04-07T13:29:33.297
> 
> 标签：c#, asp.net

I am trying to get user confirmation from c# code behind file, to confirm if user wants to overwrite the existing file on server of cancel the operation but so far no luck.

this is my code :

```
if (File.Exists(filePath))
{
   string alertMsg = @"confirm('A File already exists with the same name. \n Would you like to overwrite the existing file ?');";
   ScriptManager.RegisterStartupScript(this, this.GetType(), "Test", alertMsg, true);
}
else
{
   fuPSD.SaveAs(filePath);
} 
```

any help would be highly appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T13:33:12.030

像这样的东西：

创造

```
<asp:hiddenField id="hf" />* in the aspx file
also put on the JS location a Declaration : 

var answer=null; 
```

返回服务器：

```
string alertMsg = @"if (confirm('A File already exists with the same name. \n Would you like to overwrite the existing file ?')==true) answer='1'; else answer='0';"; 
```

现在在服务器端：阅读：

```
hf.value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T13:34:58.427

如果文件存在，该代码将弹出消息，如果不存在则保存。

但是您需要对客户端的确认对话结果采取一些措施，并在覆盖的情况下触发回发或其他一些服务器调用以执行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T13:38:44.307

问题是您的 JavaScript 注册将要求用户 在下一页加载*后确认覆盖该文件。*然后，这提出了一个问题，即告诉用户是从服务器确认还是拒绝，因为您是在客户端确认。

过去，我使用隐藏字段来切换真/假以显示来自服务器端的弹出窗口。这使我能够将事件连接到代码后面的委托（即用我自己的按钮制作我自己的确认框）。你仍然可以在没有它的情况下执行此操作，因为我发现它会导致很多混乱且难以遵循脚本，例如手动调用 __doPostback。

# sql-server-2008-r2 - Visual Studio 无法处理维度

> ID：10054906
> 
> 赞同：0
> 
> 时间：2012-04-07T13:30:15.390
> 
> 标签：sql-server-2008-r2, ssas, cube

我正在尝试使用 SQL Server 2008 R2 创建一个多维数据集。当我试图**处理**一个维度时，发生了这个错误：

> 由于以下连接问题，该项目无法部署到“wasim-PC/Joker”服务器：无法建立连接。确保服务器正在运行。要验证或更新目标服务器的名称，请在解决方案资源管理器中右键单击项目，选择项目属性，单击部署选项卡，然后输入服务器名称。

我搜索了一个解决方案，但我失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:40:11.620

处理多维数据集或维度时，首先将其定义部署到运行 SQL Server Analysis Services 的服务器。

该错误告诉您部署失败，因为它在“wasim-PC/Joker”上找不到服务。我猜这是你的工作站。确保他们的分析服务服务已安装并在您的本地系统上运行。如果要部署到不同的服务器，请按照错误消息中指定的步骤进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:31:01.340

我将**UAC 设置**更改为*“从不通知我”*，现在一切正常！（ Windows 7的 ）

# emacs-ecb - ECB：标签文件提示？

> ID：10054907
> 
> 赞同：0
> 
> 时间：2012-04-07T13:30:31.120
> 
> 标签：emacs-ecb

我在 ECB 上工作了一小段时间——突然 ECB 开始问我要打开哪个标签文件。我不知道它在说什么——我的源代码通常很小......所以我认为没有这些标签文件我会很高兴。我怎样才能打开这个标签文件提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:54:22.823

下面解决了这个问题：

```
(setq tags-file-name (expand-file-name "~/its/dbes/etgs/TAGS")) 
```

因此，emacs 不再询问标记文件。

仅标记给定的文件集（例如库）可能很有用。为此 - 删除`~/.emacs.d/semanticdb`目录，然后关闭

```
(setq global-semanticdb-minor-mode nil) 
```

然后应该打开想要标记的库，然后调用

```
(semantic-force-refresh) 
```

（默认键`C-c , ,`）

# python - How to split a long list of email address using Python 3.2.2

> ID：10054910
> 
> 赞同：0
> 
> 时间：2012-04-07T13:30:50.280
> 
> 标签：python, python-3.x

I wish to split a long list of email address into lines, such as:

```
test01@testing.com; test02@testing.com; test03#testing1.com; test04@testing2.com, 
```

I wish to split them into lines:

```
test01@testing.com (carriage return)
test02@testing.com (carriage return)
test03#testing1.com (carriage return)
test04@testing2.com 
```

Can anyone pls help? Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T13:35:39.650

您可以使用`split`以分号分隔并`strip`删除任何空格：

```
>>> s = "test01@testing.com; test02@testing.com; test03#testing1.com"
>>> [(e.strip() + '\n') for e in s.split(';')]
['test01@testing.com\n', 'test02@testing.com\n', 'test03#testing1.com\n'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T13:36:44.113

您可以使用[`split`](http://docs.python.org/library/stdtypes.html#str.split)将地址拆分为多行，[`strip`](http://docs.python.org/library/stdtypes.html#str.strip)删除逗号和分号，并[`join`](http://docs.python.org/library/stdtypes.html#str.join)重新排列它们。

```
>>> s = 'test01@testing.com; test02@testing.com; test03#testing1.com; test04@testing2.com,'
>>> print('\n'.join(m.strip(',;') for m in s.split())))
test01@testing.com
test02@testing.com
test03#testing1.com
test04@testing2.com 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T13:37:05.283

如何使用正则表达式：

```
import re
elist = re.findall(r'([^;,]+)', long_list)
print "".join("\n", elist) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T13:42:28.853

如果您只想将它​​们维护为单个多行字符串，则简单的字符串替换就可以了：

```
long_list.replace('; ', '\n') 
```

更灵活的解决方案可以使用正则表达式：

```
import re
re.sub(r'\s+;\s+', '\n') 
```

# c++ - 在 C++ 的编译过程中如何在内部表示重载函数

> ID：10054913
> 
> 赞同：3
> 
> 时间：2012-04-07T13:31:27.437
> 
> 标签：c++, c, overloading

> **可能重复：**
> [在 C++ 中，函数重载通常是如何实现的？](https://stackoverflow.com/questions/2227516/in-c-how-is-function-overloading-typically-implemented)

我正在阅读 bruce eckel 的书，`OOPS`其中说明了如何处理重载函数，以防它们在返回值和传递的参数上有差异。

* * *

```
int fun() :: could be represented as __int__fun
float fun():: could be represented as __float__fun
int fun(int a):: as _int _fun_int 
```

但是在c中的块的情况下重载如何工作

```
 {
                  void fun(){}
                  ...........
                  ..
                  fun()
               }
               /......sme code/
               {
                   void fun(){}
               } 
```

谁能解释这在内部是如何表示的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T14:02:38.670

在块内定义函数在 C++ 中是不合法的。

如果我们想象一下这样的事情是合法的，那么你的两个函数仍然没有重载。它们只是具有不重叠的范围。您的示例与此示例没有什么不同：

```
 {
     int i;
     ...
  }
  {
     int i;
     ...
  } 
```

这里没有“重载变量”，您的示例中也没有重载函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T16:57:21.817

在 C 中，不同块中具有相同名称的两个函数的命名如下：

`functionName.number`

例如，您可能有：

`fun.2051`

和

`fun.2053`

我通过使用以下命令编译 C 程序来解决这个问题：

`gcc -S -o test.asm test.c`

然后我打开汇编文件并观察 gcc 用什么标记函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T14:02:56.213

块只能发生在函数内部。C++ 不支持/允许嵌套函数（即，一个函数定义在另一个函数中），所以这个问题永远不会出现。

如果它被允许（例如，像 gcc 这样的编译器作为扩展），你仍然不会重载。重载要求两个（或多个）具有相同基本名称的实体在同一范围内可见。在这种情况下，每个名称都将在一个单独的范围内，在这种情况下不会发生重载——您只需进行正常的范围查找，它会从匹配的最本地范围中找到名称。

编辑：顺便说一句，我还应该补充一点，与您所展示的相反，函数的返回类型可能通常不包含在损坏/修饰的名称中——函数重载取决于函数“签名”，它包括参数类型，但*不*包括返回类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T14:04:16.903

> 在 C++ 的编译过程中如何在内部表示重载函数

谷歌“C++[名称修改](http://en.wikipedia.org/wiki/Name_mangling)”。它将被表示为具有类似名称的普通函数`writeCDATA@QXmlStreamWriter@@QAEXABVQString@@@Z`

> 但是在块的情况下重载如何工作

您的代码示例不包含有效的 C++ 代码，因此无法编译。

# javascript - 使用 v8cgi/mysql，我可以连接到非默认端口吗？

> ID：10054915
> 
> 赞同：0
> 
> 时间：2012-04-07T13:31:50.850
> 
> 标签：javascript, mysql, server-side, v8cgi

我在 IIS 服务器环境中安装了 googles 的[v8cgi](http://code.google.com/p/v8cgi/) javascript 引擎，它的工作原理应该如此。

使用引擎的[API_MySQL 模块](http://code.google.com/p/v8cgi/wiki/API_MySQL)，我想连接到该服务器上的 MySQL 数据库，但不是默认端口（3306）。常规连接方法是`[MySQL].connect(host,root,pass,database);`。我试过了`'localhost:port'`，`'localhost,port'`但两者都不起作用。有谁知道使用此模块连接到非默认端口的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T13:47:33.410

在看过 API_MySQL 模块的源代码之后，我会回答我自己的问题：*nope*。连接调用被硬编码为使用默认端口（`unsigned int port`硬编码为 0）。

# php - 将动态表单数据插入数据库。PHP

> ID：10054916
> 
> 赞同：0
> 
> 时间：2012-04-07T13:32:05.783
> 
> 标签：php, mysql, codeigniter

我有问题，我正在创建非常复杂的表单。表单的某些部分是动态创建的。可以说，如果您从下拉列表中选择某个选项，则会将额外的字段注入到表单中。

哪种方法最适合存储该数据？我想尝试在不使用多张桌子的情况下离开。因为我使整个应用程序变得如此复杂。

我正在考虑在我的模型中将所有可能的值初始化为“0”。然后用发布数据覆盖它们，并将整个数组存储在表中。有人看到这种方法有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T14:31:58.457

在模型中使用多个表的必要性并不取决于您必须存储多少数据（多少字段） - 它取决于模型的逻辑。因此，如果有合乎逻辑的理由在您的模型中使用关系（fe 1:n，n:m），那就去做吧！！！

如果您在创建模型时不遵循基本规则并尝试将所有数据存储在一张表中，虽然它应该分成许多表，但您很快就会后悔。将来对代码的任何更改都会花费您更多的工作，并且在某些时候您将无法理解自己的代码，并且必须再次编写它，这次要遵守规则；）

如果开发正确的模型会花费大量工作，请不要担心（最近我在开发模型上投入了两周多的时间）——这真的很有意义，因为之后你可以通过一个精心开发和计划的模型更快、更有效地工作模型。

另一方面，在某些情况下，在一个表中存储超过 100 个或更多字段是有意义的 - 这取决于逻辑。因此，如果您提供一些示例，也许可以说您是否应该使用一张或多张桌子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T14:19:52.007

很大程度上取决于您以后要如何处理表单数据以及频率。

# 序列化单场

在最简单的用例中，您可以 base64_encode(serialize($data)) 所有数据并将其放入数据库中的单个列中。

*   简单的
*   快速插入
*   易于添加/更改输入字段
*   搜索值困难且缓慢（尤其是在规模上）
*   如果您需要对数据进行系统更改，则难以以编程方式更新
*   如果您总是从数据库中提取所有数据并且从不通过序列化字符串中的数据来缩小您的 sql 查询范围，那就完美了。

# 元数据表

添加第二个元数据表可以提供更多的灵活性。第二个表将具有对主表单提交的外键引用、元数据名称和值。这允许您轻松存储、搜索和操作非常灵活的多对一关系。你可以在 wordpress 中看到这样的例子。

*   2张桌子，但仍然很简单
*   易于添加/更改输入字段
*   通过 sql 进行更好的搜索
*   更容易系统地更新
*   如果您并不总是获得所有数据或必须通过表单数据缩小搜索范围，那就完美了

还有一个不同的方向 - 如果您发现自己处理大量此类数据，您也可以考虑查看基于文档的数据库，例如 MongoDB 或 CouchDB。

# fixed - 表列与表布局重叠固定

> ID：10054917
> 
> 赞同：1
> 
> 时间：2012-04-07T13:32:23.100
> 
> 标签：fixed, overlap, tablelayout

当表格设置了“表格布局：固定”CSS属性时，我的表格列重叠时遇到了一些问题。

左侧的列是响应式的，设置了最小宽度。右边的列的宽度是固定的，并且是向右浮动的。当浏览器调整大小时，右列开始与左列重叠，忽略其最小宽度。

当我拿走“表格布局：固定”（所以它默认为自动）时，这不会发生。但这是不可取的，因为在像 IE7 这样的旧浏览器中，该页面的渲染效果不是很好，这与 IE8 和更现代的浏览器不同。

我已经设置了一个基本示例（非常精简）来演示这个问题。看看下面的链接。

[http://jsfiddle.net/hGzQu/](http://jsfiddle.net/hGzQu/)

非常感谢任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T05:29:45.840

使用`col`元素 with来避免和`table-layout:fixed`的并发症：`float``min-width`

```
<table>
  <colgroup>
    <col width="0*"><!--min-width equivalent-->
    <col width="30"><!--fixed width column-->
  </colgroup>
  <tr>
    <td>foo</td>
    <td>bar</td>
  </tr>
</table> 
```

# c - 如何有效地调试由 fork() 创建的进程

> ID：10054919
> 
> 赞同：2
> 
> 时间：2012-04-07T13:32:28.187
> 
> 标签：c, debugging, gdb

我想知道是否有任何方法可以同时调试（使用 gdb）子进程和父进程。我知道用于将进程更改为子进程的命令。但这不是我正在寻找的解决方案，因为这种方法只能控制孩子或父母。我正在寻找孩子和父母的同时执行步骤。

例如，假设孩子正在执行程序 b 中的第 a 步，而父母正在执行程序 d 中的第 c 步。

似乎有必要逐步完成父母和孩子的过程。有没有办法做到这一点，如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T14:12:56.960

> 我想知道是否有任何方法可以同时调试（使用 gdb）子进程和父进程。

是的，[有](http://sourceware.org/gdb/wiki/MultiProcess)。[此处](http://sourceware.org/gdb/onlinedocs/gdb/Inferiors-and-Programs.html)和[此处](http://sourceware.org/gdb/onlinedocs/gdb/Forks.html#Forks)的文档。如果你在 Linux 上，你会想要

```
(gdb) set detach-on-fork off 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-24T20:56:56.143

关于ctt的评论，用gdb做起来并不难，正如我刚刚发现的那样。我找到[了这个资源](http://www.cs.toronto.edu/~maclean/csc209/ddd-gdb-children.html)，它适用于 ddd 和 gdb：

> **使用 gdb/ddd 调试子进程**
> 
> 如果您尝试使用 ddd 调试子进程，您可能已经注意到在调用 fork() 之后 ddd 会进入父进程（而不是子进程）。也可以调试子级，但需要特殊程序。由于子进程是一个单独的进程，它需要第二个调试器窗口，我们将利用 gdb 的能力“附加”到一个已经在运行的进程。
> 
> **在开始之前，您必须执行以下操作：**
> 
> 确保您对 fork() 的调用为某个变量分配了一个值，以便您可以轻松读取它，例如`pid = fork()`.
> 
> 确保将 sleep() 语句作为 fork() 之后的第一行代码放置在 child 中，例如`sleep(60)`[使 sleep() 足够长，以便执行下面的步骤 4 ...]。调试完成后可以删除 sleep() 语句。[仅当您需要立即附加到子进程时才需要这样做。]
> 
> 使用“-g”选项集编译你的程序，例如`gcc myProg.c -o myProg -g`
> 
> **现在您可以开始了：**
> 
> 在后台启动 ddd [或 gdb] 的 2 个副本，例如[或对于 gdb，在两个单独的终端中`ddd myProg & ddd myProg &`正常启动 gdb（例如）]。`gdb myProg`两个副本同时运行很重要。
> 
> 选择（任意）一个窗口作为“父”窗口，并在调用 fork() 之后设置断点（但不在子将执行的任何代码中……也就是说，在父代码中的某处设置断点…… . 如果你在孩子的代码中设置断点，DDD 会在孩子创建后立即杀死它！）。
> 
> 将父节点运行到断点。注意fork()返回的值，即子进程ID。
> 
> 在“child”窗口中，在 gdb 控制台窗口中键入“attach”，其中是子进程 ID。注意：gdb 控制台位于 ddd 窗口的底部；这是您可以直接向 gdb 键入命令的地方。
> 
> 在 sleep() 语句之后在 child 中设置一个断点，然后单击“cont”（在弹出的“Command Tool”窗口中）以允许 child 继续执行到断点。

附加后，您还需要键入`c`或`continue`输入子 gdb。用于`print pid`查看 的值`pid`。

如果您有一个启动不同进程的进程，则启动子 gdb 并传入子进程的名称。前任。如果程序`a`启动程序`b`，您需要一个带有`gdb a`（父 gdb）的终端和一个带有`gdb b`（子 gdb）的终端。在这种情况下，您`run`来自`gdb a`终端（它不再是任意的）。

这个答案对我更有帮助，因为我使用的是旧版本的 gdb，它`set detach-on-fork off`没有按我的预期工作。这样，您也不必暂停当前未调试的进程，这可能是出于某些目的而需要的。

# c - 随机数生成器如何在 C 中工作？

> ID：10054922
> 
> 赞同：2
> 
> 时间：2012-04-07T13:32:47.690
> 
> 标签：c, random, generator

我正在尝试生成 0 到 40（含）之间的随机数。所以我实现的代码是这样的——

```
 y=rand()%41; 
```

但是每次我点击编译并点击运行。它输出相同的随机数。例如，我在一个循环中运行它。

```
for(i=0;i<4;i++)
{
     y=rand()%41;
     printf("%d ",y);
} 
```

每次，输出都是相同的 4 个数字。它总是在终端上输出 14,2 等。无论。

所以我的第一个问题是，为什么会这样？

其次，随机数生成器如何在 C 中工作？

我想因为我包含 time.h 库，所以这些数字是通过使用系统时间的一些标准算法生成的。而且由于系统时间是不断变化的，所以每次运行程序时生成的数字也应该发生变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T13:37:19.987

`rand()` generates only pseudorandom numbers. This means that every time you run your code you will get exactly the same sequence of numbers.

Consider using

```
srand(time(NULL)) 
```

to get every time different numbers. In fact a possible implementation for `rand` is

```
next = next * 1103515245 + 12345;
return (UINT32)(next>>16) & RAND_MAX; 
```

where `next` is defined as

```
static UINT32 next = 1; 
```

Calling `srand()` has the effect of changing the initial value of `next`, thus changing the "next" value you get as result.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T14:46:08.187

这实际上是一个关于 comp.lang.c 的常见问题解答。这是他们建议的解决方案：

```
(int)((double)rand() / ((double) RAND_MAX + 1) * N ) 
```

`N`你的随机数范围的上限在哪里。这是因为糟糕的 C 编译器上的低位是“令人震惊的非随机”。这并不能解决使用 srand() 的需要。但是请注意，应该在循环*之外*调用 srand( time(NULL) ) ... time() 的分辨率为 1 秒，因此在循环内部调用它会将随机数生成器重新初始化为相同的种子连续多次。

对此的需求可能在很大程度上是历史性的，我确信现代编译器可能没有随机数生成器会发出非常糟糕的随机数，但我记得使用 Borland C 编译器编写了一个程序，它会在大约 5 个数字时循环我`rand() % 41`反复使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T13:44:35.927

至于它是如何工作的，这取决于。许多实现使用具有不同参数的[线性同余生成器。](http://en.wikipedia.org/wiki/Linear_congruential_generator)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-07T14:03:25.417

`rand`C标准未指定用于的算法，

根据规范，如果您在程序中的调用`srand`之前不调用`rand`，就好像`srand(1)`被调用了：种子值将`1`在程序的每次执行时出现，并且生成的序列将始终相同。

为程序的不同执行设置不同种子的一种常见方法是使用取决于当前时间的种子，例如：

```
srand(time(NULL)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-07T13:36:22.353

它由传递种子的参数生成。要生成不同的数字，请在调用`rand()`函数之前添加：

```
srand (time(NULL)); 
```

这会生成一个新的随机种子。

你应该有这个库：`#include <time.h>`如果你仍然有错误使用这个库：`#include <stdlib.h>`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-07T13:39:26.037

原因是 rand() 每次运行时都使用相同的种子。你必须自己播种。srand ( time(NULL) );` 通常用于初始化随机种子。

# python - 在 Python 列表中迭代 - 它是复制还是使用迭代器？

> ID：10054928
> 
> 赞同：5
> 
> 时间：2012-04-07T13:33:42.707
> 
> 标签：python, list, iteration, name-binding

我有一个这样的清单

```
a = [ [ 1,2,3 ], [ 4,5,6] ] 
```

如果我写

```
for x in a:
    do something with x 
```

第一个列表是从`a`复制到的`x`吗？或者 python 是否使用迭代器来执行此操作而无需进行任何额外的复制？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-07T13:37:07.467

Python 不会将项目从 a 复制到 x 中。它只是将 a 的第一个元素称为 x。这意味着：当你修改 x 时，你也修改了 a 的元素。

这是一个例子：

```
>>> a = [ [ 1,2,3 ], [ 4,5,6] ]
>>> for x in a:
...     x.append(5)
... 
>>> a
[[1, 2, 3, 5], [4, 5, 6, 5]] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-07T13:37:23.903

First, those are mutable lists `[1, 2, 3]`, not immutable tuples `(1, 2, 3)`.

Second, the answer is that they are not copied but passed by reference. So with the case of the mutable lists, if you change a value of `x` in your example, `a` will be modified as well.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-07T15:41:54.830

执行以下`for element in aList:`操作：它创建一个名为的标签，该标签`element`引用列表的第一项，然后是第二个……直到它到达最后一项。它不会复制列表中的项目。

写作`x.append(5)`会修改项目。写入`x = [4, 5, 6]`只会将`x`标签重新绑定到新对象，因此不会影响`a`.

# java - 如何为工具栏创建复选框？

> ID：10054933
> 
> 赞同：0
> 
> 时间：2012-04-07T13:34:07.153
> 
> 标签：java, checkbox, jpanel

我有 JCheckBoxMenuItem，但我不知道如何使它有用。当您选中 JCheckBoxMenuItem 时，它会显示工具栏，如果未选中则不显示。

```
if(Toolbarbox.isSelected()==true) // if check box is checked
   Toolbar.setEnabled(true);  //enable Jpanel

else   // if check box unchecked   
   Toolbar.setEnabled(false);  //disable Jpanel 
```

我正在使用该代码，但它不起作用，有什么解决方案吗？

**感谢您的回答**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T13:49:10.273

您应该像这样更改函数的主体：

```
Toolbar.setVisible(!Toolbar.isVisible()); 
```

# jquery - Jquery Cycle Plugin and IE - 预加载和重新调整大小，但间歇性地，图像在 IE 中无法正确呈现/重新调整大小

> ID：10054934
> 
> 赞同：2
> 
> 时间：2012-04-07T13:34:39.010
> 
> 标签：jquery, internet-explorer, jquery-plugins, image-manipulation, jquery-cycle

重新调整图像大小并运行 jquery 循环插件 ( [http://www.jquery.malsup.com/cycle/](http://www.jquery.malsup.com/cycle/) )。我也在使用预加载器插件。

**目标**

目标是获取许多图像（来自 cms 数据库），重新调整每个图像的高度或宽度（取决于其纵横比与容器纵横比的比较），使其适合容器，居中在容器中，然后运行幻灯片（项目图像）。

**问题**

循环幻灯片在图像加载之前运行（图像太大，因此它可以在图像显示之前循环播放 3 张幻灯片）。希望它等到 iamges 加载完毕，在加载时显示 gif。

这是我正在运行以预加载、重新调整大小和运行循环幻灯片的 html 和 jquery 代码：

```
<div id="slideshow" class="single_project_images pics">
    <img src="/components/com_sedarticles/assets/1333588925" />
    <img src="/components/com_sedarticles/assets/1333852906" />
    <img src="/components/com_sedarticles/assets/1333852914" />
 </div> 
```

剧本：

```
$(document).ready(function() {
    $(".single_project_images img").each(function(){
        $(this).imagesLoaded(function(){
            var w = $(this).width();
            var h = $(this).height();
            if( (w/h) < 0.85){
                $(this).height("541px");
                $(this).css("margin-left", parseInt((460 - $(this).width())/2)+"px");
            }else{
                $(this).width("460px");
                $(this).css("margin-top", parseInt((541 - $(this).height())/2)+"px");
            }
        }); 
});

    $('#slideshow').cycle({
        speed:  1000,
        timeout: 5000,  
        pager:  '#nav'
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T05:16:12.810

图像 2 和 3 没有显示的原因是因为在 css 中 margin-top 设置为 1000px 并且它没有被调整，因为这两个图像不符合你的 js 中的 if 条件。

为了防止幻灯片在加载图像之前开始，您需要跟踪已加载的数量并在它们全部完成后调用周期。

像这样的东西：

```
var totalimages = 6, imagesloaded = 0;

$('img').each(function() {

    this.onload = function() {
       imagesloaded++;
       if(imagesloaded === totalimages){
           //call cycle plugin
       }
    }

}); 
```

# python - 在 Python 3.1 中使用 Duck 类型进行排序的最少方法

> ID：10054937
> 
> 赞同：5
> 
> 时间：2012-04-07T13:35:21.803
> 
> 标签：python, python-3.x, duck-typing

[手册](http://docs.python.org/release/3.1.3/library/stdtypes.html#comparisons)中说：

> 一般来说，如果您想要比较运算符的常规含义，就足够`__lt__()`了`__eq__()`

但我看到了错误：

```
>       assert 2 < three
E       TypeError: unorderable types: int() < IntVar() 
```

当我运行这个测试时：

```
from unittest import TestCase

class IntVar(object):

    def __init__(self, value=None):
        if value is not None: value = int(value)
        self.value = value

    def __int__(self):
        return self.value

    def __lt__(self, other):
        return self.value < other

    def __eq__(self, other):
        return self.value == other

    def __hash__(self):
        return hash(self.value)

class DynamicTest(TestCase):

    def test_lt(self):
        three = IntVar(3)
        assert three < 4
        assert 2 < three
        assert 3 == three 
```

我很惊讶什么时候`IntVar()`在右边，`__int__()`没有被调用。我究竟做错了什么？

添加`__gt__()`修复此问题，但意味着我不明白订购的最低要求是什么......

谢谢，安德鲁

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T13:43:37.783

Python 3.x 永远不会对运算符进行任何类型强制，因此`__int__()`不在此上下文中使用。比较

```
a < b 
```

将首先尝试调用`type(a).__lt__(a, b)`，如果返回`NotImplemented`，它将调用`type(b).__gt__(b, a)`。

文档中的引用是关于使比较适用于单一类型，上面的解释说明了为什么这对于单一类型就足够了。

要使您的类型与 正确交互`int`，您应该实现所有比较运算符，或者使用Python 2.7 或 3.2 中可用的[`total_ordering`装饰器。](http://docs.python.org/py3k/library/functools.html#functools.total_ordering)

# ruby-on-rails - 为什么 Rails 3 in Action 书中的 ticketee 应用程序使用 Sinatra？

> ID：10054939
> 
> 赞同：2
> 
> 时间：2012-04-07T13:35:24.097
> 
> 标签：ruby-on-rails, api, rest, sinatra

我正在研究与我的 Ruby on Rails 应用程序一起构建平台 API 的最佳方法。我遇到了这个引用[ticketee的](https://github.com/rails3book/ticketee)[问题，这是一个为](https://stackoverflow.com/questions/6885572/complete-rails-json-api-example-with-rspec-tests)[Rails 3 in Action](http://manning.com/katz/)编写的示例应用程序。我正在查看他们构建的 API，我注意到他们没有在他们的 Ruby on Rails 堆栈中使用“respond_to”或任何类型的 JSON 生成函数来支持他们的 API。他们实际上是在 Ruby on Rails 之外使用 Sinatra 构建了他们的 API。这是最佳实践吗？这基本上不需要维护两个代码库吗？也许我缺少一些链接？

作为一个后续问题，如果这是最佳实践并且不需要开发人员维护两个代码库，那么在 Rails 控制器中使用 Sinatra 而不是“respond_to”方法或其他类型的 JSON 生成有什么优点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T17:07:35.580

我们确实`respond_to`在第 13 章中使用了 API 的第一个版本，但是为了演示如何在第 18 章中安装 Rack 应用程序，我们为此构建了一个 Sinatra 应用程序。这样做并没有什么特别的好处，它更多地证明了a）有不止一种方法可以给API cat蒙皮，b）如何将应用程序安装到Rails中。

可以这么说，您不必维护单独的代码库，因为 Sinatra 应用程序将位于 Rails 应用程序的`lib`目录中。就好像 API 的 V2 只是在另一个目录`app/controllers/api/v2`或类似的东西中一样。

# php - RewriteCond 将一个域重定向到另一个，除了一个脚本，做相反的事情

> ID：10054941
> 
> 赞同：2
> 
> 时间：2012-04-07T13:35:29.667
> 
> 标签：php, apache, .htaccess, mod-rewrite, url-rewriting

1) 一般来说，我希望 www.ABC.com 上的所有内容都重定向到 www.XYZ.com

2）*除了 www.ABC.com/this/123([az]+).html* ...它必须重写（不重定向）到 ... www.ABC.com/that_script.php?var=123

3）*除了*：当它是 www.XYZ.com/this/123([az]+).html ...它必须去（重定向）到 .... www.ABC.com/this/123([az ]+).html （因此第二条规则将在此之后适用）

*编辑*两个域都停在同一个主机上，所以共享同一个 HTACCESS

*EDIT2*项目语言为 PHP

* * *

我用 %{REQUEST_URI} 或 %{SCRIPT_FILENAME} 尝试了各种 RewriteCond 但它从来没有用过，要么说它是一个无限循环，要么根本不接受条件。

* * *

*EDIT3*在 PHP 中，它看起来像这样......

```
if( FALSE !== strstr($_SERVER['HTTP_HOST'], 'ABC.com') && FALSE !== strstr($_SERVER['SCRIPT_FILENAME'], 'that_script') ) {
    header("Location: http://www.XYZ.com".$_SERVER['REQUEST_URI'],TRUE,301);
}
if( FALSE !== strstr($_SERVER['HTTP_HOST'], 'XYZ.com') && FALSE === strstr($_SERVER['SCRIPT_FILENAME'], 'that_script') ) {
    header("Location: http://www.ABC.com".$_SERVER['REQUEST_URI'],TRUE,301);
} 
```

我想要这个，但在 HTACCESS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:39:39.027

根据您上面的内容，它将产生以下效果：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
ReWriteRule ^/this/([a-z0-9]+).html www.ABC.com/that_script.php?var=$1 [PT,L]
RewriteCond %{HTTP_HOST} www.ABC.com$ [NC]
ReWriteRule ^(.*)$  www.XYZ.com [R=301,L]
</IfModule> 
```

这将执行以下操作 -

1 - 任何流量点击`http://www.ABC.com/this/<Anything made of Numbers and Letters>`都会通过，`http://www.ABC.com/that_script.php?var=<Anything made of Numbers and Letters>`同时继续对`http://www.ABC.com/this/<Anything made of Numbers and Letters>`访问者说。

2 - 除#1 所引用的内容之外的任何流量都将被重定向到 www.XYZ.com，HTTP 代码为 301（永久移动）。

请记住，您必须能够将 mod_rewrite 规则放入您的 .htaccess 文件中。选择`AllowOverride FileInfo`目录可以确保这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:40:33.877

您是否阅读过有关[mod_rewrite](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html)的官方文档？您需要的所有信息都在手册中，没有秘密。

```
RewriteEngine On
RewriteBase /

# Redirect www.xyz.com/this/123([a-z]+).html to www.abc.com/this/123([a-z]+).html.
RewriteCond %{HTTP_HOST} ^www.xyz.com$ [AND]
RewriteCond %{REQUEST_URI} ^/this/123([a-z]+).html$
RewriteRule ^(.*)$ http://www.abc.com/$1 [R=301,L]

# Rewrite www.abc.com/this/123([a-z]+).html to www.abc.com/that_script.php?var=123.
RewriteCond %{HTTP_HOST} ^www.abc.com$ [NC]
RewriteRule ^/this/123([a-z]+)\.html$ /that_script.php?var=123 [L]

# Redirect everything else to www.xyz.com.
RewriteCond %{HTTP_HOST} ^www.abc.com$ [NC]
RewriteRule ^(.*)$ http://www.xyz.com/$1 [R=301,L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:44:10.440

在 DOCUMENT_ROOT 下的 .htaccess 中使用此代码：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

# Redirect www.xyz.com/this/123([a-z]+).html to www.abc.com/that_script.php?var=123
RewriteCond %{HTTP_HOST} ^(www\.)?xyz\.com$ [NC]
RewriteRule ^this/(123)[a-z]+\.html$ http://www.abc.com/that_script.php?var=$1 [R,L,NC]

# Forward www.abc.com/this/123([a-z]+).html to www.abc.com/that_script.php?var=123
RewriteCond %{HTTP_HOST} ^(www\.)?abc\.com$ [NC]
RewriteRule ^this/(123)[a-z]+\.html$ that_script.php?var=$1 [L,QSA,NC]

# Redirect abc.com to www.xyz.com
RewriteCond %{HTTP_HOST} ^(www\.)?abc\.com$ [NC]
RewriteRule ^ http://www.xyz.com%{REQUEST_URI} [R,L] 
```

一旦您确认一切正常，将所有更改`R`为。`R=301`

另请注意，我使用了第一个 RewriteRule 以避免 1 个额外的转发（上面的 RewriteRule #2）。

# javascript - Make code work for multiple links

> ID：10054957
> 
> 赞同：0
> 
> 时间：2012-04-07T13:37:33.150
> 
> 标签：javascript, jquery, animation, hyperlink

I have this navigation menu:

```
<nav id="hoofd_menu">
    <a href="portfolio/" title="Portfolio" target="_self" class="fade portfolio">Portfolio</a>
    <a href="blog/" title="Blog" target="_self" class="fade blog">Blog</a>
    <a href="over/" title="Over" target="_self" class="fade over">Over</a>
    <a href="contact/" title="Contact" target="_self" class="fade contact">Contact</a>
</nav> 
```

and this function:

```
$(document).ready(function(){
            $("a.portfolio").click(function(e) {
                e.preventDefault();
                $('a.blog, a.over, a.contact').hide("slow");
                $(this).animate({"opacity": "1"}, "slow");
                $(this).hide("slow", function(){
                    document.location = $(this).attr('href');
                });
            });
        }); 
```

Is it possible to change the function code so it works for all four links (without duplication of it)?

The function slowly hides the other links, after this is finished it slowly hide the link itself, and follows the href after this.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T13:42:58.013

这个怎么样？您可以将“锚标记”用于单击事件，然后隐藏其兄弟姐妹。

```
$(document).ready(function(){
        $("#hoofd_menu a").click(function(e) {
            e.preventDefault();
            $(this).siblings().hide("slow");
            $(this).animate({"opacity": "1"}, "slow");
            $(this).hide("slow", function(){
                document.location = $(this).attr('href');
            });
        });
    }); 
```

链接到 jsfiddle [http://jsfiddle.net/C6fKE/](http://jsfiddle.net/C6fKE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T13:50:56.943

```
$(document).ready(function() {
    $("a.fade").on('click', function(e) {
        e.preventDefault();
        $(this).siblings('a.fade').hide("slow").end().delay("slow").hide("slow", function() {
            document.location = $(this).attr('href');
        });
    });
});​ 
```

[小提琴](http://jsfiddle.net/adeneo/mKQdV/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T13:45:49.433

```
<nav id="hoofd_menu">
    <a href="portfolio/" title="Portfolio" target="_self" class="fade      portfolio">Portfolio</a>
    <a href="blog/" title="Blog" target="_self" class="fade blog">Blog</a>
    <a href="over/" title="Over" target="_self" class="fade over">Over</a>
    <a href="contact/" title="Contact" target="_self" class="fade contact">Contact</a>
</nav>  

$(document).ready(function(){
    $("a.fade").click(function(e) {
        e.preventDefault();
        var me = $(this),
            rest = $('.fade').not(me).hide('slow');
        me.animate({"opacity": "1"}, "slow");
        me.hide("slow", function(){
            document.location = me.attr('href');
        });
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T13:46:07.983

您可以选择所有`fade`类，不包括单击的元素，如下所示：

```
$("#hoofd_menu a.fade").click(function(e) {
    e.preventDefault();
    $(this).parent().find('.fade')
                    .filter(':not(a[title="' + $(this).attr('title') + '"])')
                    .hide("slow");
    $(this).animate({
        "opacity": "1"
    }, "slow");
    $(this).hide("slow", function() {
        document.location = $(this).attr('href');
    });
});​ 
```

## [看演示](http://jsfiddle.net/yWY3s/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-07T13:47:15.483

当然，只需使用 .not(this) 函数从要隐藏的元素列表中删除当前元素。

```
$(document).ready(function(){
        $("#hoofd_menu > a").click(function(e) {
            e.preventDefault();
            $('#hoofd_menu > a').not(this).hide("slow");
            $(this).animate({"opacity": "1"}, "slow");
            $(this).hide("slow", function(){
                document.location = $(this).attr('href');
            });
        });
    }); 
```

这是一个带有更新代码的快速 jsFiddle - [http://jsfiddle.net/GA7ev/1/](http://jsfiddle.net/GA7ev/1/)

# java - displaying Blob (image) in jsp page using struts 2 and hibernate

> ID：10054958
> 
> 赞同：1
> 
> 时间：2012-04-07T13:37:33.910
> 
> 标签：java, hibernate, jakarta-ee, struts2, web

i managed to store an image in my mysql database as Blob. (i am also using hibernate) now i am trying to load that image and send it on a jsp page so the user can view the image.

This is my struts 2 action class

> ```
> import java.io.File;
> import java.io.FileInputStream;
> import java.io.FileNotFoundException;
> import java.io.IOException;
> import java.sql.Blob;
> import org.hibernate.Hibernate;
> 
> import domain.post.image.Image;
> 
> public class FileUploadAction {
> 
>   private File file;
> 
>   @SuppressWarnings("deprecation")
>   public String execute() {
> 
>       try {
>           System.out.println(file.getPath());
>           Image image = new Image();
>           FileInputStream fi = new FileInputStream(file);
> 
>           Blob blob = Hibernate.createBlob(fi);
>           image.setImage(blob);
>           image.save();
> 
>       } catch (FileNotFoundException e) {
> 
>           e.printStackTrace();
>       } catch (IOException e) {
> 
>           e.printStackTrace();
>       }
>       return "success";
>   }
> 
>   public File getFile() {
>       return file;
>   }
> 
>   public void setFile(File file) {
>       this.file = file;
>   } 
> ```

and this is my Image class

> ```
> public class Image extends AbsDBObject<Object> {
> 
>   private static final long serialVersionUID = 1L;
>   private static Logger logger = Logger.getLogger(Image.class);
>   private Blob image;
>   private String description;
> 
> //Getters and Setters
> 
> } 
> ```

would you please tell me what should i put in an action class, jsp page and struts.xml in order to showing the stored image?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T21:15:52.227

最后，我为未来的谷歌人解决了这个问题：

将此行添加到jsp，

```
 <img src="<s:url value="YourImageShowAction" />" border="0"
 width="100" height="100"> 
```

这是`ShowImageAction`类：注意执行方法是无效的，所以没有重定向

> ```
> import java.io.IOException;
> import java.io.OutputStream;
> import java.sql.SQLException;
> 
> import javax.servlet.http.HttpServletResponse;
> import org.apache.struts2.ServletActionContext;
> import com.raysep.maxlist.domain.post.image.Image;
> 
> public class ShowImageAction {
> 
>   private static byte[] itemImage;
> 
>   public static void execute() {
> 
>       try {
> 
>           Image slika = Image.fetchOne();
> 
>           HttpServletResponse response = ServletActionContext.getResponse();
>           response.reset();
>           response.setContentType("multipart/form-data"); 
> 
>           itemImage = slika.getImage().getBytes(1,(int) slika.getImage().length());
> 
>           OutputStream out = response.getOutputStream();
>           out.write(itemImage);
>           out.flush();
>           out.close();
> 
>       } catch (SQLException e) {
>           e.printStackTrace();
>       } catch (IOException e) {
>           e.printStackTrace();
>       }
> 
>   }
> 
>   public byte[] getItemImage() {
>       return itemImage;
>   }
> 
>   public void setItemImage(byte[] itemImage) {
>       this.itemImage = itemImage;
>   }
> 
> } 
> ```

# css - how to line break if the equation not fits in the width?

> ID：10054959
> 
> 赞同：0
> 
> 时间：2012-04-07T13:37:53.800
> 
> 标签：css, mathml

I have a MathML script which shows an equation and its usage, in which I want's a max of 600 PX width.

```
<span style="color: red;max-width: 600px;">
    <math>
    <mn>2</mn>
    <mfenced>
    <mrow><mi>l</mi><mi>b</mi><mo>+</mo><mi>b</mi><mi>h</mi><mo>+</mo><mi>h</mi><mi>l</mi></mrow>
    </mfenced>
    <mo>=</mo>
    <mn>2</mn><mo mathvariant="sans-serif">x</mo><mfenced>
    <mrow><mn>26</mn><mtext>cm</mtext><mo mathvariant="sans-serif">x</mo><mn>32</mn><mtext>cm</mtext><mo>+</mo><mn>28</mn><mtext>cm</mtext><mo mathvariant="sans-serif">x</mo><mn>58</mn><mtext>cm</mtext><mo>+</mo><mn>69</mn><mtext>cm</mtext><mo mathvariant="sans-serif">x</mo><mn>98</mn><mtext>cm</mtext></mrow>
    </mfenced>
    </math>
</span> 
```

and i wan't to break the line into new line from the '=' sign if it not fits in 600PX. and also needed that broken piece at the right side thanx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T14:16:09.730

你可以使用

```
<mo linebreak="goodbreak" indentalign="right">=</mo> 
```

使等号成为首选断点，第二行右对齐。但是这是否有效取决于您使用的 MathML 渲染器的功能（并非所有渲染器都实现了 MathML3 的换行功能）。它应该适用于 MathJax，但不适用于 Firefox 的原生 MathML 渲染。

但是请注意，公式缩进仅适用于块级数学；即，您需要使用`<math display="block">`才能进行右对齐。

另请注意，它`max-width`仅适用于块级元素，因此对`<span>`. 您将需要使用类似 a 的东西`<div>`。

您还应该使用正确的符号来表示“times”而不是“x”。例如，

```
<mo>&#xD7;</mo> 
```

应该这样做。这将获得正确的间距并为乘法提供正确的语义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T14:14:46.823

对于内联元素，该`max-width`属性将被忽略。您需要`display: block`在`span`元素上设置（或者，更合乎逻辑地，使用`div`or`p`代替`span`）来强制执行最大宽度。

如果您希望仅在等号后允许换行，则需要额外的标记。然后，您可以设置`white-space: nowrap`不允许中断的任何元素。或者，如果没有其他字符允许在它们后面换行，您可以使用不间断空格。

我认为如果你使用 MathML，你也应该得到正确的数学符号；具体来说，字母“x”不是乘法符号，正确的符号“×”和“⋅”需要在它们周围加空格。这与该主题相关，因为当您使用空格时，您需要考虑它们是破坏性的还是非破坏性的。

# url-rewriting - Nginx，重写规则中的异常

> ID：10054961
> 
> 赞同：0
> 
> 时间：2012-04-07T13:38:01.523
> 
> 标签：url-rewriting, nginx

我坚持使用特定的服务器配置。

*   我有一个域：**www.domain.com**。
*   我将手机用户重定向到**m.domain.com**

到现在为止，没问题。

我不想将移动用户**重定向**到特定页面上的 m.domain.com。

这就是我现在所拥有的：

```
if ($mobile_rewrite = perform) {
    rewrite ^ http://m.domain.com redirect;
    break;
} 
```

我想要类似的东西（伪代码）：

```
if ($mobile_rewrite = perform && Location != /path/* ) {
    rewrite ^ http://m.domain.com redirect;
    break;
} 
```

谢谢你的提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T06:52:06.720

我实际上使用**$request** var 找到了一些东西：

```
set $mobile_rewrite = [...] (perform or do_not_perferm)
if ($request ~* "path") {
    set $mobile_rewrite do_not_perform;
}
if ($mobile_rewrite = perform) {
    rewrite ^ http://m.domain.com redirect;
    break;
} 
```

也许不是最好的解决方案，但它有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-08T10:35:15.187

```
if ($request_uri !~ "^/blog/\w+$")
 { 
   set $mobile_rewrite do_not_perform;
 } 
```

我认为这项工作。

# php - 重新显示包含更新数据的表单

> ID：10054963
> 
> 赞同：0
> 
> 时间：2012-04-07T13:38:36.077
> 
> 标签：php

我对php相当陌生，并且在重新显示带有更新数据的表单时遇到问题；

到目前为止的故事：

我有通过电子邮件地址识别“用户”的注册和登录页面；在登录时，用户被带到他们自己的“会员”页面，该页面将显示该人持有的个人数据。然后，如果他们愿意，他们会被邀请编辑该数据。这会将他们带到“更新”页面，完成后，数据库会通过（隐藏的）“更新+ac”页面更新，然后返回到他们自己的“主”页面。问题是我无法让“会员”页面在表单中重新显示更新的数据，也无法让表单本身重新显示。

这是“会员”页面的相关代码：（我还没有编写任何安全或验证代码 - 这一切都在本地主机上 - 我想先正确编码）

```
<?php
        include_once 'login.php';
        include_once 'functions.php';

        if (isset($_SESSION['user']))
            {
            $user = $_SESSION['user'];        

        mysql_connect($dbhost, $dbuser, $dbpass) or die(mysql_error());
        mysql_select_db($dbname) or die("Unable to connect: " . mysql_error());

        $data = "SELECT * FROM `names` WHERE email='$user'";
        $result=mysql_query($data) or die(mysql_error());
    while($row=mysql_fetch_array($result)){
    }
?>
    <table border='1px' style="background-color:#F0F8FF; font-weight: bold;" >
        <caption>Personal Record</caption>

    <tr>
    <th>ID</th>
        <td><?php
            echo $row['id'];
         ?></td>
    </tr>
    <tr>
    <th>Name</th>
        <td><?php
            echo $row['name'];
         ?></td>
    </tr>

    <tr>
    <th>E-Mail</th>
        <td><?php
            echo $row['email'];
         ?></td>
    </tr>

    <tr>
    <th>Main Telephone</th>
        <td><?php
            echo $row['maintel'];
         ?></td>
    </tr>
    <tr>
    <th>Mobile Telephone</th>
        <td><?php
            echo $row['mobtel'];
         ?></td>
    </tr>
    <tr>
    <th>Organisation</th>
        <td><?php
            echo $row['organisation'];
         ?></td>
    </tr>
    <tr>
    <th>Group Leader</th>
        <td><?php
            echo $row['group_leader'];
         ?></td>
    </tr>
    <tr>
    <th>Supervisor</th>
        <td><?php
            echo $row['supervisor'];
         ?></td>
    </tr>
    <tr>
    <th>Volunteer</th>
        <td><?php
            echo $row['volunteer'];
         ?></td>
    </tr>
    <tr>
    <th>Assessor</th>
        <td><?php
            echo $row['assessor'];
            }

         ?></td>
    </tr>
    </table>

        <p><br />
        <form method="post" action="update.php">
            <input name="Submit1" type="submit" value="Edit" style="width: 67px" /></form>
        </p>
        <p>&nbsp;</p> 
```

以下是“update.php”页面的代码：

```
<?php
include_once 'login.php';
        include_once 'functions.php';

    session_start();
// Connect to server and select database.
    mysql_connect($dbhost, $dbuser, $dbpass) or die(mysql_error());
        mysql_select_db($dbname) or die("Unable to connect: " . mysql_error());
// get value of id that sent from address bar
            if (isset($_SESSION['user']))
            {
            $user = $_SESSION['user'];
// Retrieve data from database
$sql="SELECT * FROM names WHERE email='$user'";
$result=mysql_query($sql);
$rows=mysql_fetch_array($result);
}
?>
<table width="400" border="0" cellspacing="1" cellpadding="0">
<tr>
<form name="form1" method="post" action="update_ac.php">
<td>
<table width="100%" border="0" cellspacing="1" cellpadding="0">
<tr>
<td>&nbsp;</td>
<td colspan="3"><strong>Update data in mysql</strong> </td>
</tr>
<tr>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
</tr>
<tr>
<td align="center">&nbsp;</td>
<td align="center"><strong>Name</strong></td>
<td align="center"><strong>E-Mail</strong></td>
<td align="center"><strong>Main Tel</strong></td>
<td align="center"><strong>Mob Tel</strong></td>
<td align="center"><strong>Organisation</strong></td>
<td align="center"><strong>Group Leader</strong></td>
<td align="center"><strong>Supervisor</strong></td>
<td align="center"><strong>Volunteer</strong></td>
<td align="center"><strong>Assessor</strong></td>
</tr>
<tr>
<td>&nbsp;</td>
<td align="center"><input name="name" type="text" id="name" value="<? echo $rows['name']; ?>"></td>
<td><input name="email" type="text" id="email" value="<? echo $rows['email']; ?>" size="40"></td>
<td align="center"><input name="maintel" type="text" id="maintel" value="<? echo $rows['maintel']; ?>" size="15"></td>
<td align="center"><input name="mobtel" type="text" id="mobtel" value="<? echo $rows['mobtel']; ?>"></td>
<td align="center"><input name="organisation" type="text" id="organisation" value="<? echo $rows['organisation']; ?>"></td>
<td align="center"><input name="group_leader" type="text" id="group_leader" value="<? echo $rows['group_leader']; ?>"></td>
<td align="center"><input name="supervisor" type="text" id="supervisor" value="<? echo $rows['supervisor']; ?>"></td>
<td align="center"><input name="volunteer" type="text" id="volunteer" value="<? echo $rows['volunteer']; ?>"></td>
<td align="center"><input name="assessor" type="text" id="assessor" value="<? echo $rows['assessor']; ?>"></td>
</tr>
<tr>
<td>&nbsp;</td>
<td><input name="id" type="hidden" id="id" value="<? echo $rows['id']; ?>"></td>
<td align="center"><input type="submit" name="Submit" value="Submit"></td>
<td>&nbsp;</td>
</tr>
</table>
</td>
</form>
</tr>
</table>
<?
// close connection
mysql_close();
?> 
```

最后，这里是“upate_ac.php”页面的代码：

```
<?php
        include_once 'login.php';
        include_once 'functions.php';
// Connect to server and select database.
mysql_connect($dbhost, $dbuser, $dbpass) or die(mysql_error());
        mysql_select_db($dbname) or die("Unable to connect: " . mysql_error());
// update data in mysql database
$id = $_POST['id'];
$name = $_POST['name'];
$email = $_POST['email'];
$maintel = $_POST['maintel'];
$mobtel = $_POST['mobtel'];
$organisation = $_POST['organisation'];
$group_leader = $_POST['group_leader'];
$supervisor = $_POST['supervisor'];
$volunteer = $_POST['volunteer'];
$assessor = $_POST['assessor'];
$sql="UPDATE `names` SET id='$id', `name`='$name', `email`='$email', `maintel`='$maintel', `mobtel`='$mobtel', `organisation`='$organisation', `group_leader`='$group_leader', `supervisor`='$supervisor', `volunteer`='$volunteer', `assessor`='$assessor' WHERE `id`='$id''";
$result=mysql_query($sql);
// if successfully updated.
if($result){
echo "Successful";
echo "<BR>";
echo "<a href='member.php?view=$user'>View result</a>";
}
else {
echo "ERROR";
}
?> 
```

发生的事情是我得到“成功”和“查看结果”。当我点击“查看结果”时，我会进入“会员”页面，但没有显示任何表格。

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T13:48:50.163

`session_start()`页面开头缺少。此外，在 update_ac.php 中，您将链接作为

```
<a href='member.php?view=$user'>View result</a>". 
```

因此，要么您应该使用它来获取成员页面中的用户字段，`$_GET['view']`然后使用它来进一步执行查询，因为`$_SESSION`它不可用。

# database - Oracle 存储过程“遇到符号...”错误

> ID：10054966
> 
> 赞同：1
> 
> 时间：2012-04-07T13:38:57.397
> 
> 标签：database, oracle, symbols, procedure

经过长时间的研究，我决定我不知道是什么导致了以下问题！我想创建一个存储过程，如果满足语句，它将增加列的值。我可以将该过程作为匿名块运行，但我不能将它作为存储过程运行！

这是存储过程代码：

```
1 create or replace
2 Procedure RaiseSalary
3 Is
4 Salary number;
5 Cursor RaiseCursor
6 Is
7 Select Salary_A From Person Where Salary_A<400 for update of Salary_A;
8 Begin 
9 Open RaiseCursor;
10    Loop
11 Fetch RaiseCursor Into Salary;
12    Exit When RaiseCursor%Notfound;
13 Update Person Set Salary_A=(Salary + 200) Where Current Of RaiseCursor;
14    End Loop;
15 Close RaiseCursor;
16 Commit;
17 End; 
```

我在第 3 行收到一个错误，上面写着“在预期以下情况之一时遇到符号“SALARY”：....”，我在第 5 行的 Cursor 单词的“s”字母处遇到同样的错误，但此时它说“;” 而不是“工资”。编译器日志显示“权限不足”，但我找不到对此的合理解释。我试图将代码作为匿名块运行，如下所示：

```
 Declare
 Salary number;
 Cursor RaiseCursor
 Is
  Select Salary_A From Person Where Salary_A<400 for update of Salary_A;
  Begin
  Open RaiseCursor;
    Loop
  Fetch RaiseCursorInto Salary ;
    Exit When RaiseCursor%Notfound;
  Update Person Set Salary_A =(Salary + 200) Where Current Of RaiseCursor;
    End Loop;
  Close RaiseCursor;
  Commit;
  End;
  .
  run; 
```

而且效果很好！！！我确信我有编写存储过程的权限，因为我已经成功创建了一些！
我做错了什么吗？我无法弄清楚导致问题的原因，如果您有任何建议，我将不胜感激:)

编辑：由于某种原因，我的程序出错了架构，这就是我遇到这个问题的原因！我只删除了程序并再次创建它并修复了！！！！无论如何感谢您的时间！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T14:13:42.933

让我指出，如果你这样做会更有效率：

```
UPDATE Person Set Salary_A=(Salary_A + 200)
 Where Salary_A<400 
```

没有光标，没有循环。也会简单很多。

# c# - 在第二个表单上使用 BackgroundWorker 运行方法

> ID：10054967
> 
> 赞同：0
> 
> 时间：2012-04-07T13:39:01.257
> 
> 标签：c#, .net, winforms, backgroundworker

假设我们有两种形式：`MainForm`和`WaitingForm`. 我想从 传递`MainForm`到`WaitingForm`在后台运行的方法，使用`BackgroundWorker`.

现在，我正在这样做：

`MainForm.cs`：

```
public partial class MainForm: Form
{
    private void btnImport_Click(object sender, EventArgs e)
    {
        var waitingFrm = new WaitingForm();
        waitingFrm.DoWork = (o, args) => this.LongRunningOperation(this, new DoWorkEventArgs("foo bar"));
        waitingFrm.OnWorkCompleted = (o, args) => MessageBox.Show("Finished!");
        waitingFrm.Show();
        waitingFrm.Run(); // should execute LongRunningOperation, method below.
    }

    private void LongRunningOperation(object sender, DoWorkEventArgs e)
    {
        MessageBox.Show("Running long operation!....");
        // some long running stuff here;
    }
} 
```

`WaitingForm.cs`

```
public partial class WaitingForm: Form
{
    private BackgroundWorker worker = new BackgroundWorker();
    public DoWorkEventHandler DoWork { get; set; }
    public RunWorkerCompletedEventHandler OnWorkCompleted { get; set; }

    public WaitingForm()
    {
        this.worker.DoWork += DoWork;
        this.worker.RunWorkerCompleted += OnWorkCompleted;
        InitializeComponent();
    }

    public void Run()
    {
        this.worker.RunWorkerAsync();
    }
} 
```

但是在`waitingFrm.Run();`我`LongRunningOperation`没有被执行之后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T13:53:52.267

在您的 WaitingForm 中，我会这样做：

```
public event DoWorkEventHandler DoWork {
    add { worker.DoWork += value; } 
    remove { worker.DoWork += value; }
} 
```

（而不是 get;set; 属性）。然后在你的主窗口`btnImport_Click`处理程序中：

```
waitingFrm.DoWork += LongRunnignOperation; 
```

对于已完成的处理程序也是如此。您的语法似乎过于复杂。这只是公开事件（在这种情况下是在您的等待表单上）和将事件处理程序传递给真正的处理程序（在这种情况下是 worker.DoWork）的一种干净的方式。它相当于

```
 waitingFrm.worker.DoWork += LongRunnignOperation; 
```

这也可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T13:56:34.073

> 我想从 MainForm 传递到 WaitingForm 使用 BackgroundWorker 在后台运行的方法

在这种情况下我会

*   声明一个事件`WaitingForm`
*   在`Form1`节目`WaitingForm`订阅该事件之前
*   当必须*运行长时间运行的操作*时，会`WaitingForm`引发一个事件，`Form1`获取它并 `Form1`在其他线程中运行它的方法。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T13:58:59.723

在这种特殊情况下，您希望所有工作都在其中发生，`MainForm`并且看起来`WaitingForm`只是为用户展示。如果是这种情况，那么我只需将其`BackgroundWorker`放入`MainForm`并使用该事件来调用`WaitingForm`

```
public partial class MainForm: Form
{
  private void btnImport_Click(object sender, EventArgs e) {
    var waitingForm = new WaitingForm();
    waitingForm.Show();
    var worker = new BackgroundWorker();
    worker.DoWork += (o, args) => this.LogRunningOperation(o, args);
    worker.OnWorkComplete += (o, args) => {
      waitingForm.Close();
      worker.Dispose();
    };
    worker.RunWorkerAsync();
  }

  private void LongRunningOperation(object sender, DoWorkEventArgs e) {
    MessageBox.Show("Running long operation!....");
    // some long running stuff here;
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-07T14:43:30.287

所以，简单的答案是这样的。您的代码不起作用，因为主窗体没有*看到*BackgroundWorker 对象实例事件。而不是这样做：

```
 this.worker.DoWork += DoWork;
    this.worker.RunWorkerCompleted += OnWorkCompleted; 
```

在 WaitingForm - InitializeComponent() 中，改为在 mainForm 中执行此操作，如下所示：

```
 waitingFrm.worker.DoWork += waitingFrm.DoWork;
    waitingFrm.worker.RunWorkerCompleted += waitingFrm.OnWorkCompleted; 
```

# bash - 在我的 awk 语句中插入变量

> ID：10054968
> 
> 赞同：5
> 
> 时间：2012-04-07T13:39:05.960
> 
> 标签：bash, awk

这是我的 awk 语句的片段。我试图在语句中插入这两个变量，但它们没有得到评估。有人可以指出我正确的方向吗？

```
ZONE=`date "+%Z %Y"`
DAY=`date "+%a"`

awk '{if (NR<2) {print "["$1, $2, $3"]"}}' 
```

我正在尝试这个：

```
awk '{if (NR<2) {print "[" $DAY, $1, $2, $3, $ZONE "]"}}' 
```

这里的这个技巧帮助解决了我的问题。

通过用“'”将它们括起来（即双引号 - 单引号 - 双引号）来保护 shell 变量免受 awk 的影响。

awk '{print "'"$VAR1"'", "'"$VAR2"'"}' input_file

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-07T15:31:16.510

您可以使用 -v 选项：

```
ZONE=`date "+%Z %Y"`
DAY=`date "+%a"`
awk -vzone="$ZONE" -vday="$DAY" 'BEGIN { print zone, day }' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T13:47:19.777

这些变量不会在用单引号括起来的地方展开。考虑在 awk 表达式中使用双引号作为最外层引号和转义双引号。

不过，我只是在这里猜测，因为您似乎没有包含您使用的实际命令，其中嵌入了变量，但没有被评估。

将来，或者如果此答案没有帮助，请考虑包括您使用的命令及其输出以及您期望发生的情况的解释。这样，你会更容易理解你的意思。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-09T15:40:32.650

我喜欢上面 yazu 的回答，虽然为了让它在我的 MaxOSX (BSD) 环境中工作，我不得不调整语法：

```
~ $ ZONE=`date "+%Z %Y"`
~ $ DAY=`date "+%a"`
~ $ awk -v zone="$ZONE" -v day="$DAY" 'BEGIN { print zone, day }'
CEST 2018 Wed 
```

# html - 从 HTML 调用 Servlet

> ID：10054971
> 
> 赞同：0
> 
> 时间：2012-04-07T13:39:23.057
> 
> 标签：html, servlets, seo

我想在每次加载 html 页面时调用 servlet。换句话说，HTML 页面会自动调用 servlet 链接，而不是通过表单。

为此，我在 html 页面中使用下面的元标记，

```
<meta http-equiv="refresh" content="0; url=http://zerocool:8080/practice/WelcomeServlet?123"> 
```

现在，当用户访问 HTML 页面时，他被重定向到 servlet，并且这个 servlet 在分析用户后将他重定向回原始 HTML URL 或其他 URL，具体取决于有效和无效用户。

现在我的问题是，通过添加上面的元标记，网站是否会在 SEO/排名方面受到谷歌搜索引擎的惩罚，因为用户被重定向了两次，第一次到 servlet，第二次回到 html 页面。但这一切发生得非常快。

或者您可以建议一些替代方法来调用 servlet。实际上 servlet 将在用户浏览器中监视 cookie 以验证用户

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T14:38:05.573

这样一来，它很可能会进入一个对用户来说非常烦人的不定式循环。

您应该使用 Ajax 或应用重新设计。您不能在允许谷歌查看的同时保护 html 页面免受用户的侵害。

保护页面的一种方法是首先检查用户是否登录，如果登录则显示受保护的页面，否则收集授权数据。

# mysql - mysql：在没有具体列的情况下将表导出到 xml

> ID：10054975
> 
> 赞同：1
> 
> 时间：2012-04-07T13:41:04.520
> 
> 标签：mysql, xml, mysqldump

要将数据从某个 mysql 表导出到 xml，我使用以下命令：

```
mysqldump --xml -t -u [username] --password=[password] [database] [table] > /path/to/file.xml 
```

它工作得很好。
我的问题是它从表中导出所有列，我不想要这个。我需要用于单元测试的 xml 输出，因此在输出中有一个“created_at”列会使我的所有测试都失败。

所以我的问题是：假设我有一个名为“Table”的mysql表，列“col_1，created，col_2”，我如何将“created”标记为不会显示在通过`mysqldump`命令获得的输出xml文件中的列？

更新：我现在无法回答我的问题，我稍后再回答。我需要它用于 PHPUnit，但实际上我可以直接在 PHPUnit 中过滤 DataSet，而不是过滤 mysqldump 输出。

```
 $filterDataSet = new PHPUnit_Extensions_Database_DataSet_DataSetFilter($notFilteredDataSet);
  $filterDataSet->setExcludeColumnsForTable('Table', array('created_at')); 
```

会做我需要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:04:32.697

`WHERE`您可以通过在 mysqldump 命令中添加子句来控制转储哪些记录（请参阅[http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html#option_mysqldump_where](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html#option_mysqldump_where)）。

# php - 在 Joomla 的页脚中添加脚本的方法（使用我的插件）

> ID：10054978
> 
> 赞同：0
> 
> 时间：2012-04-07T13:41:47.250
> 
> 标签：php, joomla

我正在为 Joomla 制作一个插件，它需要在 joomla 网站页面的页脚中添加一个 javascript 代码。是否有任何方法可以将此类脚本添加到页脚，而无需破解核心文件，因为无论谁安装插件，都会添加该脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T18:18:25.653

没有向页脚添加脚本的方法。但是，您可以制作一个插件来获取输出，搜索适当命名的标签，例如页脚并使用 str_replace 添加到您的代码中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-21T16:37:22.130

要在页脚中移动 java 脚本，需要在 footer.php 中创建新类并在 document.php 中编写特殊函数。有关此主题的文章 -[在页脚 Joomla 2.5 中迁移 Java 脚本。哈克](http://tsyba.org/en/coding-laboratory/migrating-java-scripts-in-the-footer-joomla-2-5-hack.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-15T10:14:29.400

到目前为止，我认为没有选项可以在页面底部加载脚本。

但是您可以使用这些扩展来实现：

1.  [ScriptsDown](http://extensions.joomla.org/extensions/extension/core-enhancements/performance/scriptsdown)
2.  [JCH优化](http://extensions.joomla.org/extensions/extension/core-enhancements/performance/jch-optimize)

我也找到了一种方法。**我不想破解核心代码**，但这是我目前能想到的最好的方法。

请检查此链接 - [Javascript 文件包含在页脚中](https://github.com/rishiv3/joomla-adding-javascript-file-in-the-footer)

我希望它会帮助别人:)

# amazon-s3 - 如何从 S3 存储桶中递归删除文件

> ID：10054985
> 
> 赞同：119
> 
> 时间：2012-04-07T13:43:05.440
> 
> 标签：amazon-s3, amazon-web-services

我在 S3 中有以下文件夹结构。有没有办法递归删除某个文件夹下的所有文件（比如`foo/bar1 or foo or foo/bar2/1`..）

```
foo/bar1/1/..
foo/bar1/2/..
foo/bar1/3/..

foo/bar2/1/..
foo/bar2/2/..
foo/bar2/3/.. 
```

* * *

## 回答 #1

> 赞同：221
> 
> 时间：2013-09-09T12:28:41.627

使用最新的[aws-cli python 命令行工具](http://aws.amazon.com/cli/)，递归删除存储桶中文件夹下的所有文件只是：

```
aws s3 rm --recursive s3://your_bucket_name/foo/ 
```

或者删除存储桶下的所有内容：

```
aws s3 rm --recursive s3://your_bucket_name 
```

如果您想要实际删除存储桶，则有一步捷径：

```
aws s3 rb --force s3://your_bucket_name 
```

这将递归删除该存储桶中的内容，然后删除该存储桶。

注意：`s3://`这些命令需要协议前缀才能工作

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2012-04-07T14:33:27.190

[这过去需要对每个密钥（文件）进行专门的 API 调用，但由于在 2011 年 12 月引入了Amazon S3 - 多对象删除](http://aws.amazon.com/s3/faqs/#How_can_I_delete_large_numbers_of_objects)，这已大大简化：

> [Amazon S3 的](http://aws.amazon.com/s3)新多对象删除功能使您能够通过单个请求从 S3 存储桶中删除多达 1000 个对象。

请参阅我对相关问题[delete from S3 using api php using wildcard](https://stackoverflow.com/a/9054601)的回答，了解有关此内容和 PHP 中相应示例的更多信息（[AWS SDK for PHP自](http://aws.amazon.com/sdkforphp/)[版本 1.4.8](http://aws.amazon.com/releasenotes/2917833986024270)起支持此功能）。

大多数 AWS 客户端库同时以一种或另一种方式引入了对此功能的专门支持，例如：

### Python

您可以使用 AWS 的出色[boto](https://github.com/boto/boto) Python 接口来实现这一点，大致如下（未经测试，从我的头顶开始）：

```
import boto
s3 = boto.connect_s3()
bucket = s3.get_bucket("bucketname")
bucketListResultSet = bucket.list(prefix="foo/bar")
result = bucket.delete_keys([key.name for key in bucketListResultSet]) 
```

### 红宝石

这从适用于 Ruby的[AWS 开发工具包](http://aws.amazon.com/sdkforruby/)[1.24 版](http://aws.amazon.com/releasenotes/1484692008474752)开始可用，发行说明也提供了一个示例：

```
bucket = AWS::S3.new.buckets['mybucket']

# delete a list of objects by keys, objects are deleted in batches of 1k per
# request.  Accepts strings, AWS::S3::S3Object, AWS::S3::ObectVersion and 
# hashes with :key and :version_id
bucket.objects.delete('key1', 'key2', 'key3', ...)

# delete all of the objects in a bucket (optionally with a common prefix as shown)
bucket.objects.with_prefix('2009/').delete_all

# conditional delete, loads and deletes objects in batches of 1k, only
# deleting those that return true from the block
bucket.objects.delete_if{|object| object.key =~ /\.pdf$/ }

# empty the bucket and then delete the bucket, objects are deleted in batches of 1k
bucket.delete! 
```

或者：

```
AWS::S3::Bucket.delete('your_bucket', :force => true) 
```

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2012-11-19T04:13:04.370

您也可以考虑使用 Amazon S3 Lifecycle 为前缀为 的文件创建过期时间`foo/bar1`。

打开 S3 浏览器控制台并单击存储桶。然后单击属性，然后单击生命周期。

为所有带有前缀的文件创建过期规则，`foo/bar1`并将日期设置为文件创建后的 1 天。

保存，所有匹配的文件将在 24 小时内消失。

完成后不要忘记删除规则！

没有 API 调用，没有第三方库、应用程序或脚本。

我只是以这种方式删除了几百万个文件。

**显示生命周期规则窗口的屏幕截图（请注意，在此截图中，前缀已留空，影响存储桶中的所有键）：**

![在此处输入图像描述](../Images/36d6702d6872c49d448e38b08e8a59ae.png)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-08-20T18:50:32.937

在`s3cmd`Linux 机器上安装软件包后，您可以执行此操作

`s3cmd rm s3://foo/bar --recursive`

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-11-13T03:22:22.800

如果您想使用 Java AWS SDK 2.0 删除所有带有“foo/”前缀的对象

```
import java.util.ArrayList;
import java.util.Iterator;
import software.amazon.awssdk.services.s3.S3Client;
import software.amazon.awssdk.services.s3.model.*;

//...

ListObjectsRequest listObjectsRequest = ListObjectsRequest.builder()
    .bucket(bucketName)
    .prefix("foo/")
    .build()
;
ListObjectsResponse objectsResponse = s3Client.listObjects(listObjectsRequest);

while (true) {
    ArrayList<ObjectIdentifier> objects = new ArrayList<>();

    for (Iterator<?> iterator = objectsResponse.contents().iterator(); iterator.hasNext(); ) {
        S3Object s3Object = (S3Object)iterator.next();
        objects.add(
            ObjectIdentifier.builder()
                .key(s3Object.key())
                .build()
        );
    }

    s3Client.deleteObjects(
        DeleteObjectsRequest.builder()
            .bucket(bucketName)
            .delete(
                Delete.builder()
                    .objects(objects)
                    .build()
            )
            .build()
    );

    if (objectsResponse.isTruncated()) {
        objectsResponse = s3Client.listObjects(listObjectsRequest);
        continue;
    }

    break;
}; 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2019-01-22T23:16:58.033

投票赞成的答案缺少一步。

根据 aws s3 帮助：

> 目前，不支持在命令的路径参数中使用 UNIX 样式的通配符。但是，大多数命令都有 可以达到预期结果`--exclude "<value>"`的`--include "<value>"` 参数......... 当有多个过滤器时，规则是命令中后面出现的过滤器优先于命令中前面出现的过滤器。例如，如果传递给命令的过滤器参数是`--exclude "*"` `--include "*.txt"`除以 .txt 结尾的文件外，所有文件都将从命令中排除

```
aws s3 rm --recursive s3://bucket/ --exclude="*" --include="/folder_path/*" 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-02-26T11:37:46.013

如果将 AWS-SKD 用于 ruby​​ V2。

```
s3.list_objects(bucket: bucket_name, prefix: "foo/").contents.each do |obj|
  next if obj.key == "foo/" 
  resp = s3.delete_object({
    bucket: bucket_name,
    key: obj.key,
  })
end 
```

请注意，bucket下的所有“foo/*”都会被删除。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-11-02T05:31:38.277

I just removed all files from my bucket by using PowerShell:

```
Get-S3Object -BucketName YOUR_BUCKET | % { Remove-S3Object -BucketName YOUR_BUCKET -Key $_.Key -Force:$true } 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-09-17T12:44:12.450

刚刚看到亚马逊在 AWS 控制台菜单中添加了“如何清空存储桶”选项：

[http://docs.aws.amazon.com/AmazonS3/latest/UG/DeletingaBucket.html](http://docs.aws.amazon.com/AmazonS3/latest/UG/DeletingaBucket.html)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-05-08T20:06:53.110

最好的方法是使用生命周期规则来删除整个存储桶内容。以编程方式，您可以使用以下代码 (PHP) 来 PUT 生命周期规则。

```
$expiration = array('Date' => date('U', strtotime('GMT midnight')));
$result = $s3->putBucketLifecycle(array(
            'Bucket' => 'bucket-name',
            'Rules' => array(
                array(
                    'Expiration' => $expiration,
                    'ID' => 'rule-name',
                    'Prefix' => '',
                    'Status' => 'Enabled',
                ),
            ),
        )); 
```

在上述情况下，将从日期开始删除所有对象 - “今天格林威治标准时间午夜”。

您还可以按如下方式指定天数。但是对于 Days，它将等待至少 24 小时（最少 1 天）才能开始删除存储桶内容。

```
$expiration = array('Days' => 1); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-11-11T08:39:34.463

我需要执行以下操作...

```
def delete_bucket
  s3 = init_amazon_s3
  s3.buckets['BUCKET-NAME'].objects.each do |obj|
    obj.delete
  end
end

def init_amazon_s3
  config = YAML.load_file("#{Rails.root}/config/s3.yml")
  AWS.config(:access_key_id => config['access_key_id'],:secret_access_key => config['secret_access_key'])
  s3 = AWS::S3.new
end 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-06-09T02:43:49.243

要删除特定文件夹下对象的所有版本：

将路径传递`/folder/subfolder/`给前缀 -

```
 import boto3

s3 = boto3.resource('s3')
bucket = s3.Bucket("my-bucket-name")
bucket.object_versions.filter(Prefix="foo/bar1/1/").delete() 
```

# android - 如何在android中使用光标获取单行？

> ID：10054987
> 
> 赞同：1
> 
> 时间：2012-04-07T13:43:22.600
> 
> 标签：android, sqlite, cursor

我想从数据库中获取名称 = jiten 但语法错误的行 谁能告诉我获取单行的正确语法是我的数据库类代码

```
public void getdata()
{

     Cursor cursor = myDataBase.query("emp", new String[] {"email","name"}, " name='jiten'",new String[]{}, null, null, null);

     Log.e("running", "cursor run");

     if(cursor!=null)
     {

         Log.e("running", "curosr is not null");
     while(cursor.moveToFirst())
     {

         Log.e("running", "curosr while loop enter");

         String temp =  (cursor.getString(cursor.getColumnIndex(email)));
             String temp2 =(cursor.getString(cursor.getColumnIndex(name)));
        Log.e("running", "id  email" +temp+ " name"+temp2);

    }
 }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T13:58:05.170

您缺少 selectionArgs

```
 public Cursor query (String table, String[] columns, String selection, String[] selectionArgs, String groupBy, String having, String orderBy, String limit) 
```

> 您可以在选择中包含 ?s，它将被 selectionArgs 中的值替换，以便它们出现在选择中。这些值将绑定为字符串。

[http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)

在您的情况下，它将是：

```
 Cursor cursor = myDataBase.query("emp", new String[] {"email","name"}, "name=?",new String[]{"jiten"}, null, null, null); 
```

# c# - linq-to-sql orderby 并选择空条目

> ID：10054992
> 
> 赞同：1
> 
> 时间：2012-04-07T13:43:53.630
> 
> 标签：c#, linq, linq-to-sql

我有一个看起来像这样的查询：

```
var TheOutput = from u in MyDC.TheTable
                where ....
                orderby u.TheDateTimeUsed
                select new MyModel()
                {
                   ....
                   TheDateCreated = u.TheDateTimeCreated,
                   TheDateUsed = u.TheDateTimeUsed
                   ...

                };

return TheOutput.Take(10).ToList(); 
```

u.DateTimeUsed 是一个可以为空的日期。如果值为空，那么我希望这些记录首先出现在我正在加载的 10 个列表中。

我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T13:49:01.143

也许是这样的：

```
var TheOutput = from u in MyDC.TheTable
                where ....
                orderby !u.TheDateTimeUsed.HasValue
                orderby u.TheDateTimeUsed
                select new MyModel()
                {
                   ....
                   TheDateCreated = u.TheDateTimeCreated,
                   TheDateUsed = u.TheDateTimeUsed
                   ...

                }; 
```

你也可以这样做：

```
var TheOutput = from u in MyDC.TheTable
                where ....
                orderby u.TheDateTimeUsed??DateTime.MinValue
                select new MyModel()
                {
                   ....
                   TheDateCreated = u.TheDateTimeCreated,
                   TheDateUsed = u.TheDateTimeUsed
                   ...

                }; 
```

不如第一个好看。

# html - 按下带有图像的任何链接将表单发送到服务器，html

> ID：10054994
> 
> 赞同：0
> 
> 时间：2012-04-07T13:44:07.643
> 
> 标签：html, image, forms

我使用 Grails 2.0.1 我有这样的问题：

我有`<g:form>...</g:form>`标签内的数据表。表格中的每一行都有两个链接：删除和编辑当前行。这是其中之一：

```
<a onclick="deleteDialog(${speciality?.id})" class="delBtn">
      <input type="image" src="<g:createLinkTo dir="/images/ctrl" file="del.jpg"/>"/>
</a> 
```

当我单击编辑链接时，必须显示确认消息。但是当我点击它时，表单被发送到服务器，就像我点击了提交按钮一样。如果链接不包含图像一切正常。

那么，我怎样才能使用带有图片的链接呢？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:19:22.737

非常感谢您的四点意见。我已更改`<input type="image" ... />`为`<img .../>`解决此问题

# android - Android：AutoCompleteTextView 作为可协作的 ActionItem 键盘未显示在焦点上

> ID：10054995
> 
> 赞同：0
> 
> 时间：2012-04-07T13:44:15.957
> 
> 标签：android, keyboard, android-actionbar

我有一个 AutoCompleteTextView 作为 Collabsible ActionItem，我希望键盘在展开和聚焦时显示。这是我在 onCreateOptionsMenu() 中的代码：

```
 menu.add("Search")
            .setIcon(R.drawable.ic_search)
            .setActionView(R.layout.collapsible_edittext)
            .setShowAsAction(
                    MenuItem.SHOW_AS_ACTION_ALWAYS
                            | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);

    final MenuItem searchMenuItem = menu.getItem(0);
    searchMenuItem.setOnActionExpandListener(new OnActionExpandListener() {

        @Override
        public boolean onMenuItemActionExpand(MenuItem item) {
            AutoCompleteTextView autoCompleteTextView = (AutoCompleteTextView) item
                    .getActionView();
            autoCompleteTextView
                    .setOnFocusChangeListener(new OnFocusChangeListener() {

                        @Override
                        public void onFocusChange(View v, boolean hasFocus) {
                            Log.d(TAG, "onFocusChange: " + hasFocus);
                            if (hasFocus) {
                                mInputManager.showSoftInput(v,
                                        InputMethodManager.SHOW_FORCED);
                            } else {
                                mInputManager.hideSoftInputFromWindow(
                                        v.getWindowToken(), 0);
                            }

                        }
                    });
            autoCompleteTextView.requestFocus();
            return true;
        }

        @Override
        public boolean onMenuItemActionCollapse(MenuItem item) {
            AutoCompleteTextView autoCompleteTextView = (AutoCompleteTextView) item
                    .getActionView();

            autoCompleteTextView.clearFocus();
            autoCompleteTextView.setText("");
            return true;
        }
    }); 
```

当我第一次单击 ActionItem 时，没有显示键盘。折叠并单击项目后，将显示键盘。但我希望在用户第一次单击操作项时显示键盘。如果这很重要，我正在使用 ActionBarSherlock。那么为什么在第一次扩展时没有显示键盘？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T17:14:22.657

您是否尝试过手动将焦点设置为编辑文本并在 onOptionsItemSelected 方法中手动显示键盘？

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case MENU_SEARCH:
        // select edittext here
        // show keyboard here
        return true;

    }
    return super.onOptionsItemSelected(item);
} 
```

编辑：我发现这段代码从这里显示键盘：

[https://code.google.com/p/android-batavierenrace/source/browse/trunk/BataApp/src/com/ut/bataapp/activities/TeamsActivity.java](https://code.google.com/p/android-batavierenrace/source/browse/trunk/BataApp/src/com/ut/bataapp/activities/TeamsActivity.java)

我在我的应用程序上对其进行了测试，并且可以正常工作...

```
public static void setKeyboardFocus(final EditText primaryTextField) {
                (new Handler()).postDelayed(new Runnable() {
                        public void run() {
                                primaryTextField.dispatchTouchEvent(MotionEvent.obtain(SystemClock.uptimeMillis(), SystemClock.uptimeMillis(), MotionEvent.ACTION_DOWN, 0, 0, 0));
                                primaryTextField.dispatchTouchEvent(MotionEvent.obtain(SystemClock.uptimeMillis(), SystemClock.uptimeMillis(), MotionEvent.ACTION_UP , 0, 0, 0));
                        }
                }, 100);
        } 
```