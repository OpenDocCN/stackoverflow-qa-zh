# StackOverflow 问答 10830000-10830999

# java - String.substring 在 Java 中究竟做了什么？

> ID：10830004
> 
> 赞同：9
> 
> 时间：2012-05-31T08:32:42.323
> 
> 标签：java, string

我一直在想，如果我这样做`String s = "Hello World".substring(0, 5)`了，那么我就会得到一个新字符串`s = "Hello"`。这也记录在 Java API 文档中：*“返回一个新字符串，它是这个字符串的子字符串”*。

但是当我看到以下两个链接时，我开始怀疑了。

*[Java 中表达式“new String(...)”的目的是什么？](https://stackoverflow.com/questions/390703/what-is-the-purpose-of-the-expression-new-string-in-java)*

[被认为无用的字符串构造函数毕竟是有用的](http://kjetilod.blogspot.co.uk/2008/09/string-constructor-considered-useless.html)

基本上，他们说如果我使用`String s = "Hello World".subString(0, 5)`，我仍然会得到一个包含“Hello World”字符数组的字符串。

为什么？Java真的以这种方式实现子字符串吗？为什么会这样？为什么不只返回一个全新的较短子字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T08:34:05.540

反过来，为什么`char[]`在不需要的时候分配一个新的？这是一个有效的实现，因为`String`它是不可变的。它在聚合中节省了分配和内存。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T08:35:51.683

这应该是一种效率措施。即，当您使用子字符串时，您不会创建新的 char 数组，而只是在现有 char 数组上创建一个窗口。

这值得吗？也许。缺点是它会引起一些混乱（例如，参见[这个 SO question](https://stackoverflow.com/questions/2147783/why-does-appending-to-a-string-save-memory/2147803#2147803)），而且每个`String`对象都需要将偏移信息携带到数组中，即使它没有被使用。

编辑：从 Java 7 开始，这种行为现在已经改变。有关更多信息，请参阅链接的答案

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T08:45:29.407

> Java真的是这样实现subString的吗

查看代码（JDK 7）（我已简化），是的：

```
public String substring(int beginIndex, int endIndex) {
    .......
    return new String(offset + beginIndex, endIndex - beginIndex, value);
}

// Package private constructor which shares value array for speed.
String(int offset, int count, char value[]) {
    this.value = value;
    this.offset = offset;
    this.count = count;
} 
```

> 为什么会这样？为什么不只返回一个全新的较短子字符串？

该评论似乎暗示速度是原因

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-13T18:32:15.510

尽管以前确实 a `String`created with`subString()`具有相同的支持`char[]`（可能是为了节省复制的空间和时间），但自 Java 7 Update 6 以来不再如此，因为这种共享`char[]`有其内存开销。如果加载（大）字符串，采用小子字符串并丢弃大字符串，则尤其存在这种开销。如果小字符串保留很长时间，这可能会导致大量不需要的内存使用。

无论如何，在当前版本（Java 7 Update 21）中，使用原始字符串的`subString()`调用构造函数，然后构造函数从 char 数组中复制指定范围：`String(char value[], int offset, int count)``char[]`

```
public String(char value[], int offset, int count) {
    if (offset < 0) {
        throw new StringIndexOutOfBoundsException(offset);
    }
    if (count < 0) {
        throw new StringIndexOutOfBoundsException(count);
    }
    // Note: offset or count might be near -1>>>1.
    if (offset > value.length - count) {
        throw new StringIndexOutOfBoundsException(offset + count);
    }
    this.value = Arrays.copyOfRange(value, offset, offset+count);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T08:35:04.193

因为 String 无论如何都是不可变的。所以完全创建一个新对象没有多大意义

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-13T17:56:23.723

请记住，字符串是不可变的，并且它们占用内存，设想如果每个字符串都创建一个新字符串，则对字符串执行多个子字符串操作！相反，只需创建一个新的 String 对象，该对象指向相同的不可变字符串，但具有不同的 offset 和 count 属性。现在，无论您对原始字符串或该字符串的子字符串执行多少子字符串，内存中都只有一个字符串本身的副本。效率更高。

另外，在做的时候要`String s = "Hello, World".substring(0,5);`考虑操作的顺序。首先将在堆上创建字符串“Hello, World”，并且一个全新的 String 对象将指向它。然后将在新的 String 对象上调用 substring 方法，并创建另一个由`s`实例指向的新 String 对象。所以，因此，`s`指向堆“Hello, World”上的字符串，`offset`并且 a 为 0，a`count`为 5。

# jquery - JQuery val() 返回空字符串

> ID：10830008
> 
> 赞同：19
> 
> 时间：2012-05-31T08:32:46.107
> 
> 标签：jquery, string, return

这非常令人费解，我什至不确定我应该在这里发布什么代码。然而问题非常简单。我在 JQuery 模式对话框中有一个表单，我正在其中进行一些价格计算。其中，我有一个字段折扣。呈现为：

```
<div class="editor-label">
    @Html.LabelFor(model => model.Discount)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.Discount, new { size = 10 })
</div> 
```

我在 Firebug 调试器的 DOM 选项卡中看到，该字段的值为 20。当然，它在表单上可见。但是调用：

```
 $('#Discount').val() 
```

返回一个空字符串。这是唯一存在此问题的领域。为其他字段调用 val() 会返回正确的值。即使单击提交并调试提交模型的 MVC 操作，我也看到 Discount 的值在那里。只是 JQuery 函数返回一个空字符串，并且只针对这个字段。

我知道这是一个有点抽象的问题，但有人有过这样的经历吗？

谢谢

生成的 HTML：

```
<div class="editor-label">
  <label for="Discount">Popust (%)</label>
</div>
<div class="editor-field">
  <input id="Discount" class="text-box single-line valid" type="text" value="0" name="Discount" data-val-range-min="0" data-val-range-max="100" data-val-range="Vredonst mora biti izmedju 0 i 100" data-val-number="Polje Popust (%) mora biti broj" data-val="true" size="10">
</div> 
```

虽然此元素的 Firebug 中的 DOM 选项卡显示值：“20”

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-31T08:57:48.653

检查 id 'Discount' 是否唯一。

当在一个页面上放置多个表单时，我将单独保留“名称”，但始终将“表单”元素的 id 作为每个“值”的 id 的前缀。

为我省去了很多头痛。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-09T15:36:01.067

达人的回答绝对是一针见血。

但是，有时您希望返回具有相同 ID 的多个元素的值。（**注意：** ID 应该是唯一的。另一方面，类不需要是唯一的。）

为此，您需要使用该`.each()`方法进行迭代。大多数返回对象的 jQuery 方法都*隐式迭代*。`.val()`返回一个字符串，而不是一个对象。因此，它需要一个*显式的迭代*循环。

你可以使用这样的`.each()`方法。

```
$('.discount').each(function(){
    $(this).val()
}); 
```

请注意，我将 OP 的 ID 更改为一个类，以便它是正确的 HTML。

# ios - 如何保护我的 iOS 应用程序中的数字内容 (PDF)？

> ID：10830014
> 
> 赞同：7
> 
> 时间：2012-05-31T08:33:07.547
> 
> 标签：ios, pdf, drm

这个问题主要是关于保护我的 iOS 应用程序中的内容。我打算制作一个可以根据用户请求下载大量内容（主要是 PDF 文件）的应用程序。下载这些 PDF 后，它们将存储在本地，以便于离线访问。

现在，我不希望任何人掌握 .ipa 文件并设法提取 PDF 文件。如果这是不可能的，是否有可能即使他们提取了 PDF，他们也无法查看或运行它们？

我不确定如何处理。任何建议表示赞赏。

另一种方法是，我可以向用户提供密码保护的文件以供下载。将关联的密码存储在 sqlite 数据库中。然后当用户从APP内部打开PDF时，应用程序会从数据库中找到密码并打开它，而不提示用户输入密码。这可能吗？如何？

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T10:10:12.247

假设您在将 PDF 放到下载服务器之前以某种方式对其进行了加扰，并且应用程序在将其显示给用户之前对其进行了解扰。

然后，您可以在应用程序中执行以下操作：

1.  将加扰的 PDF 文件加载到`NSData`对象中。
2.  `NSMutableData`使用您选择的任何算法创建一个对象并将您的 PDF 数据解扰到该缓冲区中。
3.  现在您在内存中有一个可用的 PDF 文档，但在磁盘上只有一个打乱版本。如果你需要创建一个`CGPDFDocumentRef`你可以通过首先使用你的解扰对象创建一个数据提供者来做到这一点，该对象是通过简单的演员`NSMutableData`免费桥接的`CFData`

就像是

```
NSMutableData *data = descrambled PDF;
CFDataRef myPDFData = (CFDataRef)data;
CGDataProviderRef provider = CGDataProviderCreateWithCFData(myPDFData);
CGPDFDocumentRef pdf = CGPDFDocumentCreateWithProvider(provider); 
```

（该片段的功劳归于[这个答案](https://stackoverflow.com/a/4875829/469015)。）

由于应用程序必须能够对 PDF 进行解密，并且用户可以访问应用程序和加密的 PDF 文件，因此您为防止他们提取它所做的任何事情基本上都相当于默默无闻的安全性。因此，我不会为复杂的加密算法而烦恼。您可能只需使用隐藏在应用程序二进制文件中的秘密字符串对数据进行 XOR 之类的简单操作。

击败这种方法将需要攻击者反汇编您的二进制文件，如果有人确定您无法获胜，当前视频游戏 DRM 的悲惨状态就证明了这一点。

顺便说一句：本着默默无闻的精神，您可能还想将您的乱码下载的 PDF 命名为比`valuabledocument.pdf`. 但真正的安全并非如此。

**编辑以说明 XOR'ing 数据**：

把你的炒菜喂给`NSData`这样的东西......

```
// Fill this out with whatever you want. Use the same string
// and algorithm to scramble the files on the server.
static unsigned char secretString[SECRET_STRING_LENGTH];

- (NSData *)scrambleOrDescrambleData:(NSData*)input
{
    unsigned char *outputBytes = malloc(input.length);
    memcpy(outputBytes, input.bytes, input.length);
    for (int i = 0; i < input.length; i++)
    {
        outputBytes[i] = outputBytes[i] ^ secretString[i % SECRET_STRING_LENGTH];
    }

    NSData *outputData = [[NSData alloc] initWithBytes:outputBytes length:input.length];
    free(outputBytes);

    return outputData;
} 
```

XOR 的方便之处在于，执行两次会返回原始数据，因此加扰和解扰是相同的代码。

我在这里避免使用术语加密，因为这实际上只是混淆数据以防止不经意的观察者看到它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T08:41:16.670

您可以通过加密来保护您的文件。查看有关[使用磁盘加密保护数据](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html)的苹果参考资料。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T16:04:24.267

看看这篇文章：[http ://aptogo.co.uk/2010/07/protecting-resources/](http://aptogo.co.uk/2010/07/protecting-resources/)

作者详细介绍了加密应用程序包资源，然后将文件解密到内存中，以便只有加扰版本驻留在磁盘上。

他们使用自定义的 NSURLProtocol 进行动态加密。很不错的总结。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T23:48:48.720

您不必担心有人持有 .ipa 文件并以这种方式提取 PDF（因为您的应用程序会下载 PDF 并且它们的 PDF 不附带 .ipa 文件）。

但是，有一些工具可以让用户浏览其设备上的应用程序中的文件。例如，结帐[iExplorer](http://www.macroplant.com/iexplorer/)。您应该注意，用户可能会打开任何文件——因此将密码存储在 sqlite 数据库中并不是一个好主意。使用[SFHKeychainUtils](https://github.com/ldandersen/scifihifi-iphone)之类的东西会是一种更安全的方法。

至于为 PDF 设置用户名/密码，这里有一些示例代码（您可以从[CGPDFContext Reference](http://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CGPDFContext/Reference/reference.html#//apple_ref/doc/uid/TP30000957)了解更多信息）：

```
NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys: @"letMeIn", kCGPDFContextOwnerPassword, @"r3adm3", kCGPDFContextUserPassword, nil];
[myPDFDocument writeToFile: @"/some/path" withOptions: options]; 
```

我还建议将加密的文件存储在磁盘上。您可以使用[NSData+AES](https://github.com/nicerobot/objc/tree/master/NSData/NSData+AES/)来执行此操作。这是[NSData+AES](http://code.google.com/p/iphonebits/source/browse/trunk/src/Encryption/NSData-AES.m?r=2)的另一种实现。从磁盘读取时，您可以将未加密的 NSData 保存在内存中并从中显示 PDF，而不是从磁盘读取未加密的 PDF。

# javascript - 使用 AJAX 冒泡的 jQuery 事件

> ID：10830020
> 
> 赞同：1
> 
> 时间：2012-05-31T08:33:44.063
> 
> 标签：javascript, ajax, dom, jquery

我很难让一些 jQuery 函数正常工作。

我的网站上有一个点赞按钮，该按钮在添加新项目之前一直有效，然后停止工作。当我有以下代码时，这有效：

```
$('.like').toggle(
    function() {
        console.log('href');
    }, function() {
        console.log('rel');
    }
); 
```

我的一个朋友指导我使用事件冒泡，但我很难让它发挥作用。

这是我目前所拥有的。

简单的 HTML

```
​&lt;button href='123.html' rel='456.html' class='like'>Click here</button>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**jQuery，包裹在 $(document).ready( ...我**尝试了切换功能，似乎按钮在第一次**单击**时处于休眠状态，然后它突然醒来并执行事件。

```
$('body').click(function(event) {
    if ($(event.target).is('.like')) {
        var $like = $(event.target);
        $like.toggle(
            function() {
                console.log('href');
            }, function() {
                console.log('rel');
            }
        );
    }
});​ 
```

为了在添加新项目时继续工作并确保按钮不会以这种方式运行，代码应该是什么样的

这是一个小提琴。

[http://jsfiddle.net/_entreprenerd/SpmbQ/](http://jsfiddle.net/_entreprenerd/SpmbQ/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:39:44.317

您需要委托事件处理程序来解决您的问题。

```
$('body').on('click', '.like', function() {
  $(this).toggle(
    function() {
        console.log('href');
    }, function() {
        console.log('rel');
    });
}).click(); 
```

看**[`.on()`](http://api.jquery.com/on)**

你也有[`delegate()`](http://api.jquery.com/delegate)

```
$('body').delegate('.like', 'click', function() {
  $(this).toggle(
    function() {
        console.log('href');
    }, function() {
        console.log('rel');
    });
}).click(); 
```

**注意**您可以使用**包含**`.like`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T08:41:43.190

您可能正在寻找[.on()](http://api.jquery.com/on/)（或[.delegate()](http://api.jquery.com/delegate/)用于 jQuery 版本 < 1.7）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T08:43:56.543

要么是代码悖论的解决方案，要么是在 ajax 调用之后 Hook 事件在 DOM 中添加了新元素。但是codeparadox的解决方案更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T09:26:27.860

问题是，我们不能委托“切换”，因为切换不是一个事件，它只是 jQuery 中的一个方法。因此，您需要为委托事件实现自己的切换功能。

示例解决方案：

```
$("body").on("click", ".like", function () {
    var $this = $(this);
    var toggled= $this.data("toggled");
    if (toggled) {
        console.log('rel');
    } else {
        console.log('href');
    }
    $this.data("toggled", !toggled);
}); 
```

我还建议将上述代码中的选择器从“body”更改为 .like 元素的父容器，因此委托在文档树上的路径更短。

和一个小提琴样本：http: [//jsfiddle.net/t2pXr/3/](http://jsfiddle.net/t2pXr/3/)

# css - 使用 CSS3 选择除按钮之外的所有表单元素

> ID：10830026
> 
> 赞同：7
> 
> 时间：2012-05-31T08:34:06.913
> 
> 标签：css, css-selectors

CSS3有没有办法选择每个**不**具有、、或标签的与输入相关的元素？这是我到目前为止所得到的：`type``button``reset``submit``button`

```
input:not([type="submit"]),
textarea {

    /* ... */

}

input:not([type="submit"]):focus,
textarea:focus {

    /* ... */

}

input:not([type="submit"]):hover,
textarea:hover {

    /* ... */

} 
```

......但它并不像它可能的那样普遍。我想将一些不错的新转换应用于仅与输入相关的字段。如果将这些特定样式应用于页面上的任何按钮，它就会开始看起来很奇怪。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-31T17:00:40.407

只需将多个`:not`选择器链接在一起：

```
/* Fields */
input:not([type=button]):not([type=reset]):not([type=submit]):not([type=image]),
textarea {
  outline: 3px solid green;
}

/* Buttons */
input[type=button],
input[type=reset],
input[type=submit],
input[type=image],
button {
  outline: 3px solid red;
}

/* Both */
input,
button,
textarea {
  margin: 6px;
}
```

```
<h1>Form elements</h1>
<p>Buttons should be outlined in red, fields in green.</p>
<button>Button</button>
<input type="button" value="Input Button">
<input type="checkbox">
<input type="color">
<input type="date">
<input type="datetime-local">
<input type="email">
<input type="file">
<input type="hidden">
<input type="image" src="//placehold.it/100x40/ffff00/0000ff/?text=foo">
<input type="month">
<input type="number">
<input type="password">
<input type="radio">
<input type="range">
<input type="reset">
<input type="search">
<input type="submit">
<input type="tel">
<input type="text">
<input type="time">
<input type="url">
<input type="week">
<textarea></textarea>
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-31T16:55:49.287

我认为您将不得不硬着头皮这样做：

```
input[type=text],input[type=password],input[type=url],input[type=email],textarea,select{
    /* css */
}
input[type=text]:focus,input[type=password]:focus,input[type=url]:focus,input[type=email]:focus,textarea:focus,select:focus{
    /* css */
}
input[type=text]:hover,input[type=password]:hover,input[type=url]:hover,input[type=email]:hover,textarea:hover,select:hover{
    /* css */
} 
```

只是因为 CSS 中没有 and 特性，所以任何后面`:not()`的 s 都会抵消其他`:not()`的

# php - php如何在表格中添加编辑按钮并加载数据以编辑表格

> ID：10830028
> 
> 赞同：0
> 
> 时间：2012-05-31T08:34:10.813
> 
> 标签：php, html, button

**我正在尝试做的事情：** 从 mysql 数据库中将数据加载到带有编辑按钮的表中。

**出了什么问题：** 单击编辑按钮时，它不会在编辑表单上加载数据。

**我尝试过的：** 我在家中在 Firefox 上尝试了以下代码，它运行良好。但在工作中，它无法在编辑表单中加载 Firefox 中的数据，而在 IE 中单击该按钮什么也不做。

```
<?php
echo '<table id="viewAll">';
            echo '<tr>';
            echo '<th>Product</th>';
            echo '<th>Status</th>';
            echo '<th>Summary</th>';
            echo '<th>Created</th>';
            echo '<th>Updated</th>';
            echo '<th>Edit</th>';

            echo '</tr>';

            while ($data=mysqli_fetch_array($result)){

            echo '<tr align="center">

            <td>'.$data['product'].'</td>
            <td>'.$data['status'].'</td>
            <td align="left">'.$data['summary'].'</td>
            <td>'.$data['created'].'</td>
            <td >'.$data['updated'].'</td>';

            echo "<td><a href=\"editForm.php?id=$data[id]\" style=\"text-decoration: none\"><input type=\"submit\" value=\"Edit\" /></a></td>";

            echo '</tr>';

                }#end of while

            }#end of if

echo '</table>';
?> 
```

然后我做：

```
$id=$_GET['id'];

            $query="SELECT * FROM tickets WHERE id='$id'";

            $result = mysqli_query($db,$query) or die( "My query ($query) generated an error: ".mysql_error());

            $data=mysqli_fetch_array($result);

            mysqli_close($db); 
```

我使用数据数组中的内容将其加载到编辑表单中的字段中。

不幸的是，这在 IE 中不起作用。单击编辑按钮不执行任何操作。有人可以告诉我如何解决吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:12:58.193

尝试使用这个：

```
echo "<td><form action=\"editForm.php\" method=\"get\"><input type=\"hidden\" name=\"id\" value=\"$data['id']\" style=\"text-decoration: none\" /><input type=\"submit\" value=\"Edit\" /></form></td>"; 
```

这意味着您仍然可以使用按钮。

另外，我强烈建议如果您不使用表格来存储表格数据，请找到替代方案，例如`<div>`s。

记得清理你的 SQL 查询，否则你可能容易受到 SQL 注入攻击。（例如`$id=$_GET['id'];`=>你的 MySQL 连接对象`$id=mysqli_real_escape_string($conn, $_GET['id']);`在哪里）。`$conn`

[您可以在Google](//google.com)上搜索任何这些内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T08:47:45.133

你不应该使用`<input type="submit" value="edit" name="edit" />`.

只有`"<a href='editForm.php?id='".$data['id']."' style='text-decoration: none' />Edit</a>"`将数据发送到`editForm.php`页面就足够了。

PS：提交按钮只能用于提交表单内的所有表单元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T08:37:36.703

以这种方式更正您将按钮写入的行

```
echo "<td><a href=\"editForm.php?id=$data[id]\" style=\"text-decoration: none\">Edit</a></td>"; 
```

单击按钮尝试提交表单。但是您要做的是访问页面editForm.php

PS：你应该阅读一些关于 PHP 和 html 的教程来学习最佳实践；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T08:39:00.773

在第一个 PHP 脚本的 while 循环中，回显编辑按钮的行是错误的。
您必须使用连接函数`.`和引号来获取`$data["id"]`
您的行`echo "<td><a href=\"editForm.php?id=$data[id]\" style=\"text-decoration: none\">Edit</a></td>";`中的值必须替换为：

`echo "<td><a href=\"editForm.php?id=".$data['id']."\" style=\"text-decoration: none\">Edit</a></td>";`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T08:39:10.990

或者你可以用 jQuery 以一种很好的方式做到这一点。试试看[这个](http://api.jquery.com/click/)。

# ruby-on-rails-3 - 如何在rails 3中为fields_for添加一个带有ajax的表单部分

> ID：10830031
> 
> 赞同：1
> 
> 时间：2012-05-31T08:34:19.363
> 
> 标签：ruby-on-rails-3, forms, jquery, controller, nested-forms

我真的需要帮助

我在一个屏幕上有一个多级表单

产品 => 产品组 => 产品材料

我想在产品编辑和新产品中为产品组和产品材料动态添加新字段。

productgroups 属于materialgroups，productmaterials 属于materials（而material 属于materialgroup）

我将 simple_form gem 用于我的表单，所以 => 在产品表单中我为产品组添加了一个 fields_for partial，在 productgroups 中我还有另一个 fields_for productmaterials。

现在用户应该根据选择框选择一种材料组，他想将其作为产品组添加到产品中。在产品组内应该有一个用于添加产品材料的材料组合框。每个材料组和材料都有一些特定的字段值设置。所以我需要通过ajax获取部分！

现在的问题是：如何创建一个控制器方法来检索产品表单的部分字段？那是正确的方向还是我认为有问题？

PS：编辑表格作品

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:06:11.050

我建议你使用[茧宝石](https://github.com/nathanvda/cocoon)。它使用[JQuery](http://docs.jquery.com/Main_Page)并允许您添加或删除嵌套组件。

部分 ( `haml`) 示例：

```
.nested-fields
  .close.remove_photo
    = link_to_remove_association '', f
  = f.input :asset, :as => :image_preview 
```

这是一个 form_for ( `haml`)：

```
= place.simple_fields_for :photos do |photo|
  = render 'photo_fields', :f => photo
.links
  = link_to_add_association t('add_photo'), place, :photos 
```

# javascript - JavaScript，Jquery 查找被点击元素的索引

> ID：10830033
> 
> 赞同：1
> 
> 时间：2012-05-31T08:34:31.827
> 
> 标签：javascript, jquery

我正在构建幻灯片，我需要解决以下问题 - 单击标签时如何在数组中找到位置（索引）？这部分代码正在获取所有标签

```
 this.thumbs = this.nav.find('a'); 
```

从那里怎么走？此外，还有另一个问题 - 我需要在标签内切换 div 的类（当点击标签时，div 标签需要获取类 promo_tumb_current 并且具有该标签的类需要松开它）。

HTML 代码：

```
<div class="promo_tumbs col_12">
    <div data-dir="prev" class="prev"></div>
    <div data-dir="next" class="next"></div>
    <div class="promo_tumbs_centar">
        <a href="#first"><div class="promo_tumb promo_tumb_current"></div></a>
        <a href="#second"><div class="promo_tumb"></div></a>
        <a href="#thrid"><div class="promo_tumb"></div></a>
        <a href="#fourh"><div class="promo_tumb"></div></a>
        <a href="#fifth"><div class="promo_tumb"></div></a>
        <a href="#fifth"><div class="promo_tumb"></div></a>
        <a href="#fifth"><div class="promo_tumb"></div></a>
    </div>
</div> 
```

JS代码：

```
<script>
                function Slider(container, nav){
                    this.container = container;
                    this.nav = nav;

                    this.li = this.container.find('li');
                    this.li_width = this.li.first().width();
                    this.li_len = this.li.length;

                    this.thumbs = this.nav.find('a');

                    this.current = 0;
                }

                Slider.prototype.transition = function (coords){
                    this.container.stop().animate({
                        'margin-left' : coords || -(this.current * this.li_width)
                    })
                }

                Slider.prototype.set_current = function(dir){
                    var pos = this.current;
                    if (dir === 'next') {pos++}
                    else if (dir === 'prev') {pos--}                
                    this.current = (pos < 0) ? this.li_len - 1 : pos % this.li_len;

                    return pos;
                }

                var slider = new Slider($('div.promo_inner ul'), $('div.promo_tumbs'));
                    slider.nav.find('div').on('click', function(){                               
                    if ($(this).attr("data-dir") === undefined ) {
                        var index = slider.thumbs.index();

                        console.log(index)
                    } else {
                         slider.set_current($(this).data('dir'));                    
                    }               
                    slider.transition();

                }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:38:07.840

我认为你需要的是

[http://api.jquery.com/index/](http://api.jquery.com/index/)

例如，在您的事件处理程序中（这是单击的标签）：

```
var index = thumbs.index($(this)) 
```

# rest - 为rest GET请求添加参数

> ID：10830037
> 
> 赞同：3
> 
> 时间：2012-05-31T08:34:45.997
> 
> 标签：rest, post, get

我有一个使用 AS2/PHP 运行的应用程序。AS2 通过 $_POST 数据数组与 PHP 脚本通信，该数组包含 sessionkey、userID 和一些数据库过滤（sql 限制、order by 等）等数据。

该应用程序的 iOS 版本正在计划中，我正在尝试找出使用现有服务器端代码并​​仅重写图形的最佳方法。

问题是我需要大量数据，理想情况下应该通过 $_POST 数组将数据发送到 GET http 请求中（对不起，如果我不清楚，请随时问我问题）。

我读过这篇文章[了解 REST：动词、错误代码和身份验证](https://stackoverflow.com/questions/2001773/understanding-rest-verbs-error-codes-and-authentication)，这让我更好地理解了 REST 应该如何工作，但我需要将更多数据发送到服务器。

例如，假设我想检索一组项目，请求将类似于：

```
GET http://xxx/rest/item 
```

但是我如何告诉服务器我只想从集合中检索 X 元素，甚至我想要哪种排序顺序？

之前感谢您的回答

编辑：@laurent，这里是收到的脚本 POST 参数示例：

```
 // COMMON PARAMETERS (each script)
$idPROF     = Utils_Mv::getVariablePOST('idPROF');
$idVISITE   = Utils_Mv::getVariablePOST('idVISITE');
$typeConnexion  = Utils_Mv::getVariablePOST('typeConnexion');
$typeSupport    = Utils_Mv::getVariablePOST('typeSupport');
$cleSession     = Utils_Mv::getVariablePOST('cleSession');
$idCLIENT   = Utils_Mv::getVariablePOST('idCLIENT');
$idCONTEXTE = Utils_Mv::getVariablePOST('idCONTEXTE');

    // SCRIPT-SPECIFIC PARAMETERS
$idSUIVI        = (int) Utils_Mv::getVariablePOST('idSUIVI');
$nbPrescription = (int) Utils_Mv::getVariablePOST('nbPrescription');
$indiceDebut    = (int) Utils_Mv::getVariablePOST('indiceDebut');
$critereTri     = Utils_Mv::getVariablePOST('critereTri');
$isTriInverse   = Utils_Mv::boolval(Utils_Mv::getVariablePOST('isTriInverse'));
$chaineFiltres  = Utils_Mv::getVariablePOST('chaineFiltres'); 
```

您会在 GET 请求中将公共参数作为获取参数传递吗？（和 POST 用于 PUT/POST）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T09:41:58.040

要获得多个项目，我会这样做：

```
GET http://example.com/items/1_2_3_4 
```

其中 1、2、3、4 是项目 ID。要仅获得一件物品，您将执行以下操作：

```
GET http://example.com/items/1 
```

对于排序顺序，我会将其设为查询参数。通常，一个 REST URL 应该指向一个资源或多个资源。任何额外的东西，如排序顺序、资源格式等都应该是一个查询参数：

```
GET http://example.com/items/1_2_3?order=by_name 
```

# awk - AWK：在第二列用下划线替换空格

> ID：10830042
> 
> 赞同：0
> 
> 时间：2012-05-31T08:35:04.570
> 
> 标签：awk

我有一个 2column,tab delimiterde 文件：

```
email@address   Name Fullname 
```

（注：`Name`和之间`Fullname`是空格）

* * *

我想得到的是一个 mutt 别名文件：

```
alias nickname Name Fullname email@address 
```

（注意：这里没有标签，一切都是空格。）

* * *

我解决了

```
awk -F "\t" '{ print "alias" " " $2 " " $2 " " $1 }' $FILE 
```

这给了我：

> 别名 姓名 全名 姓名 全名 电子邮件@地址

但我想得到：

```
alias Name_Fullname Name Fullname email@address 
```

那么，如何用下划线替换第二列中的所有空格？谢谢

* * *

我试过了

```
awk -F "\t" '{ print "alias" " " sub(/ /,"_",$2) " " $2 " " $1 }' $FILE 
```

但这让我很奇怪：

```
alias 1 Name_Fullname email@ddress 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:59:59.307

try this:

```
awk -F "\t" '{x=$2;print "alias" " " gsub(/ /,"_",x) " " $2 " " $1 }' $FILE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:40:11.933

使用默认输入分隔符怎么样：

```
awk '{printf "alias %s %s_%s %s %s %s\n", $2, $3, $2, $3, $1}' $FILE 
```

# c# - 我将什么指定为 ClientBuildManager 构造函数的“目标文件夹”参数？

> ID：10830044
> 
> 赞同：2
> 
> 时间：2012-05-31T08:35:11.263
> 
> 标签：c#, asp.net, .net, iis, pre-compilation

我想试验一下[ClientBuildManager 类构造函数](http://msdn.microsoft.com/en-us/library/ms150256)的第四个参数，它可以让我指定编译选项。问题是我必须提供指定“目标文件夹”的第三个参数。

以前我使用这样的[两参数构造函数](http://msdn.microsoft.com/en-us/library/ms150254)：

```
VirtualDirectory dir = ...;
using( var buildManager = new ClientBuildManager( dir.Path, dir.PhysicalPath ) ) {
     buildManager.PrecompileApplication();
} 
```

它工作正常 - 这两个参数非常明显。

我不知道从哪里获得第三个“目标文件夹”参数。

如何获取可以作为第三个“目标文件夹”参数传递的值，以便预编译像以前一样工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T21:22:39.773

如果您只想[“就地编译应用程序”，](http://msdn.microsoft.com/en-us/library/ms229863%28v=vs.80%29.aspx)则可以为 TargetFolder**传递 null**。如果您为 TargetFolder 传递一个有效文件夹，您将[“编译应用程序以进行部署”](http://msdn.microsoft.com/en-us/library/ms229863%28v=vs.80%29.aspx)。

# iphone - 将 NSMutablearray 的对象与 For 循环值进行比较

> ID：10830051
> 
> 赞同：0
> 
> 时间：2012-05-31T08:35:31.717
> 
> 标签：iphone, ios, for-loop, nsmutablearray

我有具有以下值的 NSMutableArray：

```
NSMutableArray *array = [[NSMutableArray alloc]initWithObjects:@"1",@"2",@"3",@"4",@"5", nil]; 
```

这是我的 For 循环：

```
for(int i=0; i<30; i++)
{
    //here I want to compare each object from above array with value of i from for loop. and add the further output. e.g.
    if(i== object from array)
    {
          //do this
    }
} 
```

实际上我在数组中只有五个对象或值，所以我如何将 i 的每个值与 NSMutableArray 的每个对象或值进行比较。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T08:43:33.383

因此，如果我理解正确，您想将数组中的每个对象与数组中的所有其他对象进行比较？这是示例，不是测试，可能需要一些优化。

```
NSMutableArray *array = [[NSMutableArray alloc]initWithObjects:@"1",@"2",@"3",@"4",@"5", nil];

for(NSInteger i = 0; i < [array count]; i++) {
    for(NSInteger j = 0; j < [array count]; j++) {
        if ( i == j) {
           // No need to check if its the same object.
           continue;
        }

        NSString *stringI = [array objectAtIndex:i];
        NSString *stringJ = [array objectAtIndex:j];

        if ([stringI isEqualToString:stringJ) {
           // Do something.
        } 
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T08:47:22.980

如果您信任 IOS 函数`containsObject`和 `indexOfObject`，那么：

```
NSMutableArray *array = [[NSMutableArray alloc]initWithObjects:@"1",@"2",@"3",@"4",@"5", nil];

for(int i = 0; i< 30; i++)
{
    if([array containsObject:[NSString stringWithFormat:@"%i",i]])
    {
        //array contains  "i" item,  
        //and we can know it's location this way:
        int foundArrayItemId = [array indexOfObject:[NSString stringWithFormat:@"%i",i]];
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T08:45:42.737

只需使用嵌套循环进行比较

```
for(i = 0; i <= [array count];i++)
    {
        for(j=0; j<=[mutableArrya count]; j++)
            {
                 //Do comparison
            }
    } 
```

我想这会对你有所帮助

快乐编码 :) 享受它 :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T08:50:46.307

```
NSMutableArray *array = [[NSMutableArray alloc]initWithObjects:@"1",@"2",@"3",@"4",@"5", nil];

for(int i=0;i<30;i++)

    {
      NSString str= [NSString stringWithFormat:@"%i",i];
        if([array containsObject:str])
        {
          //do this
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T09:17:21.217

# 写下这段代码：

```
NSMutableArray *arrCount = [[NSMutableArray alloc]initWithObjects:@"1",@"2",@"3",@"4",@"5",@"6",@"7",@"8",@"9",@"10",@"11",@"12",@"13",@"14",@"15",@"16",@"17",@"18",@"19",@"20",@"21",@"22",@"23",@"24",@"25",@"26",@"27",@"28",@"29",@"30", nil];
NSMutableArray *array = [[NSMutableArray alloc]initWithObjects:@"21",@"12",@"23",@"14",@"25", nil];

    for (NSString *strComapre in array)
    {
        NSLog(@"%@",strComapre);
        if ([arrCount containsObject:strComapre]) 
        {
             NSLog(@"Compare");
        }
        else
        {
             NSLog(@"Not Compare");
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T18:19:35.637

NSArray 中有一个 isEqualToArray 方法。你能不能像下面这样使用它：

`[array1 isEqualToArray:array2]`

# visual-studio - Visual Studio 键盘不起作用

> ID：10830058
> 
> 赞同：31
> 
> 时间：2012-05-31T08:36:07.987
> 
> 标签：visual-studio

在我的 VS2008 中，突然之间，我只能使用字母，不能使用回车、空格、删除、退格或任何其他键。任何建议如何解决这个问题？键盘在其他应用程序中运行良好。谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-09-11T13:27:22.243

我每天遇到这个问题好几次。确保在工具 -> 选项 -> 环境下将语言设置设置为“与 Microsoft Windows 相同”。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-09-19T06:31:59.113

ReSharper`Options - Environment - General - Clear Caches`解决了问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-11T14:04:27.963

关闭您正在处理的文档并重新打开它。当我的键盘似乎无法正常工作并且我无法输入当前表单时，它对我有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-28T13:21:01.030

尝试记住行号（更好；）），关闭要修改的文件，然后重新打开它。

它有时会发生在我身上，而且“黑客”效果很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-24T09:32:19.360

禁用 Productivity Power Tools 并重新启动 IDE 对我有用。

不应该是在安装 Resharper 后不久就出现了问题，以前从未遇到过。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-15T21:07:10.357

这真是奇怪的行为，在我的情况下，即使重新启动 Windows 也没有帮助。诀窍是我使用 VS 中的“文件”菜单打开项目，然后打开 .csproj 而不是 .sln 文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-04T18:31:52.477

我在虚拟机下工作，就我而言，我不得不再次关闭并打开 VS。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-26T12:11:44.857

我在使用 Visual Studio 2017 时遇到了同样的问题。我在输入后无法删除代码。我只是关闭 Visual Studio 并以管理员身份运行。它对我来说工作正常。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-23T08:56:44.263

**在工具**-**选项**-**环境**-**键盘**中设置另一个关键字映射方案

 *** * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-11-24T17:22:41.683

当我快用完 RAM 时，它就会发生在我身上。关闭进程（不是 VS）使键盘再次可用。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-04-04T06:56:29.303

您是否在推送/提交之前比较过更改？检查您是否打开了任何模态窗口。有同样的问题，当我试图关闭 VS17 时，它警告我，我有一个模式窗口，阻止了一些用户输入。我在窗口上按“确定”，重新启动 VS，我可以再次输入。我遇到了和你一样的错误——可以插入字母，但不能删除、“end”、“home”等。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-03-09T07:31:26.223

对我来说唯一有效的是这个链接中的这个解决方案=> [https://superuser.com/a/1626086/1055404](https://superuser.com/a/1626086/1055404)

只需转到工具 -> 选项 -> 环境 -> 键盘，然后单击右上角的重置按钮

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2021-01-12T07:07:35.650

关闭垂直或水平组。**

# magento - Magento 1.6.2 上一个 下一个按钮，用于在子类别中从一个产品移动到另一个产品

> ID：10830060
> 
> 赞同：0
> 
> 时间：2012-05-31T08:36:11.983
> 
> 标签：magento

我想创建上一个下一个按钮，用于在特定类别中从一种产品移动到另一种产品。

我在 view.phtml 中使用此代码，但现在它为 $search_parameter 提供了未定义的变量错误。

```
<?php // Previous and Next product links in product page

$_product = $this->getProduct();

if(!$_product->getCategoryIds())
return; // Don't show Previous and Next if product is not in any category

$cat_ids = $_product->getCategoryIds(); // get all categories where the product is located
$cat = Mage::getModel('catalog/category')->load( $cat_ids[0] ); // load first category, you should enhance this, it works for me

$order = Mage::getStoreConfig('catalog/frontend/default_sort_by');
$direction = 'asc'; // asc or desc

$category_products = $cat->getProductCollection()->addAttributeToSort($order, $direction);
$category_products->addAttributeToFilter('status',1); // 1 or 2
$category_products->addAttributeToFilter('visibility',4); // 1.2.3.4

$cat_prod_ids = $category_products->getAllIds(); // get all products from the category
$_product_id = $_product->getId();

$_pos = array_search($_product_id, $cat_prod_ids); // get position of current product
$_next_pos = $_pos+1;
$_prev_pos = $_pos-1;

// get the next product url
if( isset($cat_prod_ids[$_next_pos]) ) {
$_next_prod = Mage::getModel('catalog/product')->load( $cat_prod_ids[$_next_pos] );
} else {
$_next_prod = Mage::getModel('catalog/product')->load( reset($cat_prod_ids) );
}
// get the previous product url
if( isset($cat_prod_ids[$_prev_pos]) ) {
$_prev_prod = Mage::getModel('catalog/product')->load( $cat_prod_ids[$_prev_pos] );
} else {
$_prev_prod = Mage::getModel('catalog/product')->load( end($cat_prod_ids) );
}
?>                

<div class="clear"></div>
 <!--PREVIOUS BUTTON NEXT BUTTON STARTS-->
 <div class="previousNext">

<?php if($_prev_prod != NULL): ?>
<a href="<?php print $_prev_prod->getUrlPath(); if($search_parameter):?>?search=1<?php endif;?>"><span style="margin-right: 270px;"><?php echo $this->__('<< PREVIOUS') ?></span></a>
<?php endif; ?>
<?php if($_next_prod != NULL): ?>
<a href="<?php print $_next_prod->getUrlPath(); if($search_parameter):?>?search=1<?php endif;?>"><span style="margin-left: 270px;"><?php echo $this->__('NEXT >>') ?></span></a>
<?php endif; ?>

</div>
<!--PREVIOUS BUTTON NEXT BUTTON ENDS-->
<div class="clear"></div> 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-28T14:49:18.830

嘿终于让上面的代码在我的网站上工作了..

以下是遵循的步骤：

第 1 步：添加产品时，请确保每个产品仅添加到一个类别中。超过一个类别的产品，此代码不起作用。换句话说，如果您要添加产品以表示 Cat1 > Subcat1 > subsubcat2，请确保仅将其添加到 subsubcat2。然后，您将能够在该子子猫中移动下一个上一个。

STEP2：打开view.phtml，添加如下代码：

```
<?php // Previous and Next product links in product page

$_product = $this->getProduct();

if(!$_product->getCategoryIds())
return; // Don't show Previous and Next if product is not in any category

$cat_ids = $_product->getCategoryIds(); // get all categories where the product is   located
$cat = Mage::getModel('catalog/category')->load( $cat_ids[0] ); // load first category, you should enhance this, it works for me

$order = Mage::getStoreConfig('catalog/frontend/default_sort_by');
$direction = 'desc'; // asc or desc

$category_products = $cat->getProductCollection()->addAttributeToSort($order,   $direction);
$category_products->addAttributeToFilter('status',1); // 1 or 2
$category_products->addAttributeToFilter('visibility',4); // 1.2.3.4

$cat_prod_ids = $category_products->getAllIds(); // get all products from the category
$_product_id = $_product->getId();

$_pos = array_search($_product_id, $cat_prod_ids); // get position of current product
$_next_pos = $_pos+1;
$_prev_pos = $_pos-1;

// get the next product url
if( isset($cat_prod_ids[$_next_pos]) ) {
$_next_prod = Mage::getModel('catalog/product')->load( $cat_prod_ids[$_next_pos] );
} else {
$_next_prod = Mage::getModel('catalog/product')->load( reset($cat_prod_ids) );
}
// get the previous product url
if( isset($cat_prod_ids[$_prev_pos]) ) {
$_prev_prod = Mage::getModel('catalog/product')->load( $cat_prod_ids[$_prev_pos] );
} else {
$_prev_prod = Mage::getModel('catalog/product')->load( end($cat_prod_ids) );
}
?> 
```

STEP3：添加PREVIOS和NEXT按钮代码

```
 <!--PREVIOUS BUTTON NEXT BUTTON STARTS-->
 <div class="previousNext">

<?php if($_prev_prod != NULL): ?>
<a href="<?php print $_prev_prod->getUrlPath();?>"><span style="margin-right: 270px;"><?php echo $this->__('<< PREVIOUS') ?></span></a>
<?php endif; ?>
<?php if($_next_prod != NULL): ?>
<a href="<?php print $_next_prod->getUrlPath();?>"><span style="margin-left: 270px;"><?php echo $this->__('NEXT >>') ?></span></a>
<?php endif; ?>

</div>
<!--PREVIOUS BUTTON NEXT BUTTON ENDS--> 
```

STEP4：给链接添加css样式

```
<style>
.previousNext {width: 100%; height: 20px; text-align: right;  }
.previousNext a:link {font-size: 12px; color:#ffffff; font-weight: bold; text-decoration: none}
.previousNext a:visited {font-size: 12px; color:#ffffff; font-weight: bold; text-decoration: none}
.previousNext a:hover {font-size: 12px; color:#ff9900; font-weight: bold; text-decoration: underline}
.previousNext a:active {font-size: 12px; color:#ffffff; font-weight: bold; text-decoration: none}
</style> 
```

将前面的 next 按钮理想地放置在 product-essential div 内（默认模板）

您的下一个或上一个项目已准备就绪...

希望这可以帮助...

# sql-server - 多值参数中的大量值

> ID：10830063
> 
> 赞同：3
> 
> 时间：2012-05-31T08:36:35.420
> 
> 标签：sql-server, variables, reporting-services, parameters

我需要能够从 4000 个客户那里返回数据。不幸的是，这 4000 个客户必须在多值参数中，因此我可以从列表中选择例如 10 个不同的客户，然后它将返回其数据（带有额外的过滤器，因此可以节省上下滚动的时间）。如果我错了，请纠正我，多值参数最多只能处理 1000 个值，虽然我可以在列表中看到所有 4000 个值，但它不会返回所有 4000（它在预览中，而不是在部署后）。我已尝试将其浏览至 900，它将返回全部 900。我确实理解用户勾选更多复选框是不合理的，但我仍然无法返回 3000+ 的其余部分顾客。请问最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T10:47:18.550

我们在开发环境 sql server 2008 R2 SP1 上也遇到了同样的问题。但我们找到了解决方法： `<...>\Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportManager\Web.config` 在里面添加密钥：

```
<!-- language: xml -->
<add key="aspnet:MaxHttpCollectionKeys" value="10000" /> 
```

重新启动报告服务，它应该可以工作。不添加 aspnet:MaxHttpCollectionKeys 默认值为 1000。

[资源](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/cb6ede72-6ed1-4379-9d3c-847c11b75b32 "报表管理器 - 由于对象的当前状态，操作无法运行")

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T10:54:15.563

1000 行的限制来自于声明如下内容：

```
DECLARE @myTable MyTableType
INSERT INTO @myTable VALUES (1), VALUES (2), VALUES (3)
EXEC myProc @myTable 
```

这被称为行构造函数语法，并且有一个限制。

您可以通过使用单插入或将行构造函数批处理在一起来解决此问题。虽然这似乎对性能来说可能很差，但 SQL Server 创建了一个所谓的“琐碎计划”——你可以在 Bob B 的优秀博客上阅读更多关于它的信息——[这里](http://webstats.interknack.com/BLOGS/BOBB/post/The-interesting-case-of-TVPs-and-plan-compilation.aspx)和[这里](http://webstats.interknack.com/BLOGS/BOBB/post/TVPs-and-plan-compilation-the-reprise.aspx)。

# php - PHP：如何访问类内的对象

> ID：10830065
> 
> 赞同：1
> 
> 时间：2012-05-31T08:36:47.750
> 
> 标签：php, oop

我有一个带有公共数据成员的语言类：

```
class language {
    public $error = "There was an error";
} 
```

然后我有许多不同的类使用这个类。如何从其他课程中访问该课程？您当然可以在所有使用它的类中实例化它的一个对象，但我想如果我要对多个类进行此操作，那会大大降低性能。

我只需要一个对象，因为无论如何我都不会更改它们。所以，我已经完成了

```
$language = new language();

class name {
    private $language;

    public function __construct() {
        global $language;
        $this->language = $language;
    }

    public function method() {
        mysql_query(...) or die($this->language->error);
    }
} 
```

这是一个好方法吗？现在我必须在每个“母亲”脚本中实例化它。而且我想通过做 __construct() 我只是传递一个参考，因为我不使用克隆词？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:45:41.547

基本上，您的语言对象是其他对象的依赖项。您需要考虑许多因素： - 性能（每次需要时实例化一个新的语言对象是多么明智，或者这是否可能） - 测试 - 如果每个类都有，您如何测试您的类对您的语言类的硬编码依赖 - 可维护性/可读性。

该问题有多种不同的解决方案。在 PHP 社区中似乎最流行的一种是依赖注入容器。如果您处于未开发状态，这可能是一个很好的解决方案。

一篇关于一般主题的好文章是[Martin Fowler](http://martinfowler.com/articles/injection.html)的一篇（还有谁？）。

编辑：为了解释更多，这篇文章涉及控制反转原理。我不会深入解释它，因为我认为我不能像 Martin Fowler 一样做到这一点，但关键是你的类不管理它们自己的依赖关系；这是在其他地方完成的（因此称为控制反转）。大致有两种不同的方法 - 依赖注入（可能涉及也可能不涉及容器）和服务定位器。Martin Fowler 文章的这一[部分](http://martinfowler.com/articles/injection.html#DecidingWhichOptionToUse)处理了两者之间的一些差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T08:37:58.047

`Language`在类的构造函数中实例化对象：

```
public function __construct() {
  $this->language = new Language();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T08:40:44.447

如果您不想拥有此类的实例，请考虑使其属性和方法`static`：

```
class language {
    static public $error = "There was an error";
} 
```

然后静态使用它们：

```
$error = language::$error; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T08:41:41.247

您可以通过构造函数传递它，而不是使用全局变量。

```
public function __construct($language) {
    $this->language = $language;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-31T08:43:10.897

> 我只需要一个对象

这就是单例模式。

这是一个只有一个 Language 类实例的快速示例：

```
class Language {
  public $error = "text";

  private static $instance = null;

  public static function getInstance() {
    if (self::$instance == null)
      self::$instance = new self();
    return self::$instance;
  }

  private function __construct() {}
}

$lang = Language::getInstance();
$text = $lang->error; 
```

您还可以使用依赖注入：

```
interface ILanguage {
  public function getError();
}

class Language implements ILanguage {
  private $error = "error";
  public function getError() {
    return $this->error;
  }
}

class name {
  private $language;

  public function __construct(ILanguage $lang) {
    $this->language = $lang;
  }

   public function method() {
     mysql_query(...) or die($this->language->getError());
   }
}

$language = new Language();
$n = new name($language); 
```

这个依赖注入的例子称为[构造函数注入](http://martinfowler.com/articles/injection.html#ConstructorInjectionWithPicocontainer)。

# algorithm - Pollard Rho 分解方法实现

> ID：10830068
> 
> 赞同：3
> 
> 时间：2012-05-31T08:36:58.913
> 
> 标签：algorithm, primes, factorization

每次我使用 Pollard Rho 分解方法分解一个数字时，是否有必要在 Pollard Rho 分解之前检查它的素数？如果是，那么每次我想分解任何数字时，我都必须实施米勒拉宾的素性检验或任何素性检验，而且我必须处理强伪素数，这不是很复杂吗？有没有简单且更快的方法来处理这个问题？（我对最多 10 位的数字使用这些测试）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T13:02:59.787

是的，在申请 Pollard Rho 之前，您必须检查您所分解的数字是复合的。如果它是素数，gcd 步骤将始终返回 1，因为素数始终与其他数字互质，并且 Pollard Rho 将永远运行而没有结果。

对于最多十位数的数字，不需要 Pollard Rho。简单的试除法就足够快了，因为你只需要小于 100000 的素数，而且只有 9592 个。

# c# - 在 Windows Phone c# 中解析 JSON

> ID：10830071
> 
> 赞同：2
> 
> 时间：2012-05-31T08:37:09.970
> 
> 标签：c#, json, windows-phone-7, jsonp

我对 json 和 c# 有点陌生，我正在尝试从 api 收集一些数据。json数据的部分链接是：`https://data.cityofchicago.org/api/views/*REMOVED*/rows.json?search=rahm&jsonp=?` 而且给出的数据有点乱：

```
{
  "meta" : {
    "view" : {
      "id" : "xzkq-xp2w",
      "name" : "Current Employee Names, Salaries, and Position Titles",
      "attribution" : "City of Chicago",
      "attributionLink" : "http://www.cityofchicago.org",
      "averageRating" : 0,
      "category" : "Administration & Finance",
      "createdAt" : 1317154735,
      "description" : "This dataset is a listing of all current City of Chicago employees, complete with full names, departments, positions, and annual salaries. For hourly employees the annual salary is estimated. Data Owner: Human Resources. Frequency: Data is updated quarterly. Last Updated: April 19, 2012\. For information on the positions and related salaries detailed in the budget as of January 1, 2012, visit the \"Budget - Positions and Salaries in 2012 Appropriation Ordinance\" dataset: http://bit.ly/twq5oO",
      "displayType" : "table",
      "downloadCount" : 4033,
      "numberOfComments" : 0,
      "oid" : 538938,
      "publicationAppendEnabled" : false,
      "publicationDate" : 1334860835,
      "publicationGroup" : 241512,
      "publicationStage" : "published",
      "rowClass" : "",
      "rowsUpdatedAt" : 1334860755,
      "rowsUpdatedBy" : "scy9-9wg4",
      "searchString" : "rahm",
      "signed" : false,
      "tableId" : 300029,
      "totalTimesRated" : 0,
      "viewCount" : 48059,
      "viewLastModified" : 1334860836,
      "viewType" : "tabular",
      "columns" : [ {
        "id" : -1,
        "name" : "sid",
        "dataTypeName" : "meta_data",
        "fieldName" : "sid",
        "position" : 0,
        "renderTypeName" : "meta_data",
        "format" : {
        }
      }, {
        "id" : -1,
        "name" : "id",
        "dataTypeName" : "meta_data",
        "fieldName" : "id",
        "position" : 0,
        "renderTypeName" : "meta_data",
        "format" : {
        }
      }, {
        "id" : -1,
        "name" : "position",
        "dataTypeName" : "meta_data",
        "fieldName" : "position",
        "position" : 0,
        "renderTypeName" : "meta_data",
        "format" : {
        }
      }, {
        "id" : -1,
        "name" : "created_at",
        "dataTypeName" : "meta_data",
        "fieldName" : "created_at",
        "position" : 0,
        "renderTypeName" : "meta_data",
        "format" : {
        }
      }, {
        "id" : -1,
        "name" : "created_meta",
        "dataTypeName" : "meta_data",
        "fieldName" : "created_meta",
        "position" : 0,
        "renderTypeName" : "meta_data",
        "format" : {
        }
      }, {
        "id" : -1,
        "name" : "updated_at",
        "dataTypeName" : "meta_data",
        "fieldName" : "updated_at",
        "position" : 0,
        "renderTypeName" : "meta_data",
        "format" : {
        }
      }, {
        "id" : -1,
        "name" : "updated_meta",
        "dataTypeName" : "meta_data",
        "fieldName" : "updated_meta",
        "position" : 0,
        "renderTypeName" : "meta_data",
        "format" : {
        }
      }, {
        "id" : -1,
        "name" : "meta",
        "dataTypeName" : "meta_data",
        "fieldName" : "meta",
        "position" : 0,
        "renderTypeName" : "meta_data",
        "format" : {
        }
      }, {
        "id" : 6676081,
        "name" : "Name",
        "dataTypeName" : "text",
        "fieldName" : "name",
        "position" : 1,
        "renderTypeName" : "text",
        "tableColumnId" : 1532233,
        "width" : 148,
        "cachedContents" : {
          "non_null" : 32925,
          "smallest" : "AARON,  ELVIA J",
          "null" : 0,
          "largest" : "ZYSKOWSKI,  DARIUSZ",
          "top" : [ {
            "count" : 20,
            "item" : "ZYSKO,  RICHARD"
          }, {
            "count" : 19,
            "item" : "ZYSKOWSKI,  DARIUSZ"
          } ]
        },
        "format" : {
        }
      }, {
        "id" : 6676082,
        "name" : "Position Title",
        "dataTypeName" : "text",
        "fieldName" : "job_titles",
        "position" : 2,
        "renderTypeName" : "text",
        "tableColumnId" : 1532235,
        "width" : 220,
        "cachedContents" : {
          "non_null" : 32925,
          "smallest" : "A/MGR COM SVC-ELECTIONS",
          "null" : 0,
          "largest" : "ZONING PLAN EXAMINER",
          "top" : [ {
            "count" : 20,
            "item" : "POLICE OFFICER"
          }, {
            "count" : 19,
            "item" : "FIREFIGHTER"
          }, {
            "count" : 18,
            "item" : "MOTOR TRUCK DRIVER"
          }, {
            "count" : 17,
            "item" : "SANITATION LABORER"
          }, {
            "count" : 16,
            "item" : "FIREFIGHTER-EMT"
          }, {
            "count" : 15,
            "item" : "POLICE OFFICER (ASSIGNED AS DETECTIVE)"
          }, {
            "count" : 14,
            "item" : "SERGEANT"
          }, {
            "count" : 13,
            "item" : "CROSSING GUARD"
          }, {
            "count" : 12,
            "item" : "TRAFFIC CONTROL AIDE-HOURLY"
          }, {
            "count" : 11,
            "item" : "POOL MOTOR TRUCK DRIVER"
          }, {
            "count" : 10,
            "item" : "CONSTRUCTION LABORER"
          }, {
            "count" : 9,
            "item" : "FIREFIGHTER/PARAMEDIC"
          }, {
            "count" : 8,
            "item" : "LIBRARIAN I"
          }, {
            "count" : 7,
            "item" : "OPERATING ENGINEER-GROUP C"
          }, {
            "count" : 6,
            "item" : "PARAMEDIC"
          }, {
            "count" : 5,
            "item" : "FRM OF MACHINISTS - AUTOMOTIVE"
          }, {
            "count" : 4,
            "item" : "ELECTRICAL MECHANIC"
          }, {
            "count" : 3,
            "item" : "SENIOR PUBLIC INFORMATION OFFICER"
          }, {
            "count" : 2,
            "item" : "LEGAL SECRETARY"
          }, {
            "count" : 1,
            "item" : "AIRPORT OPERATIONS SUPVSR I"
          } ]
        },
        "format" : {
          "align" : "left"
        }
      }, {
        "id" : 6676083,
        "name" : "Department",
        "dataTypeName" : "text",
        "fieldName" : "department",
        "position" : 3,
        "renderTypeName" : "text",
        "tableColumnId" : 1532236,
        "width" : 183,
        "cachedContents" : {
          "non_null" : 32925,
          "smallest" : "ADMIN HEARNG",
          "null" : 0,
          "largest" : "WATER MGMNT",
          "top" : [ {
            "count" : 20,
            "item" : "WATER MGMNT"
          }, {
            "count" : 19,
            "item" : "POLICE"
          }, {
            "count" : 18,
            "item" : "GENERAL SERVICES"
          }, {
            "count" : 17,
            "item" : "FIRE"
          }, {
            "count" : 16,
            "item" : "FAMILY & SUPPORT"
          }, {
            "count" : 15,
            "item" : "STREETS & SAN"
          }, {
            "count" : 14,
            "item" : "FINANCE"
          }, {
            "count" : 13,
            "item" : "BUSINESS AFFAIRS"
          }, {
            "count" : 12,
            "item" : "OEMC"
          }, {
            "count" : 11,
            "item" : "TRANSPORTN"
          }, {
            "count" : 10,
            "item" : "HEALTH"
          }, {
            "count" : 9,
            "item" : "AVIATION"
          }, {
            "count" : 8,
            "item" : "LAW"
          }, {
            "count" : 7,
            "item" : "PUBLIC LIBRARY"
          }, {
            "count" : 6,
            "item" : "ADMIN HEARNG"
          }, {
            "count" : 5,
            "item" : "CULTURAL AFFAIRS"
          }, {
            "count" : 4,
            "item" : "COMMUNITY DEVELOPMENT"
          }, {
            "count" : 3,
            "item" : "BUILDINGS"
          }, {
            "count" : 2,
            "item" : "CITY COUNCIL"
          }, {
            "count" : 1,
            "item" : "CITY CLERK"
          } ]
        },
        "format" : {
        }
      }, {
        "id" : 6676084,
        "name" : "Employee Annual Salary",
        "dataTypeName" : "money",
        "fieldName" : "employee_annual_salary",
        "position" : 4,
        "renderTypeName" : "money",
        "tableColumnId" : 1532237,
        "width" : 161,
        "cachedContents" : {
          "non_null" : 32925,
          "smallest" : "0.96",
          "sum" : "2475198578.40",
          "null" : 0,
          "average" : "75176.87405922551",
          "largest" : "260004.00",
          "top" : [ {
            "count" : 20,
            "item" : "75372.00"
          }, {
            "count" : 19,
            "item" : "78012.00"
          }, {
            "count" : 18,
            "item" : "80724.00"
          }, {
            "count" : 17,
            "item" : "70408.00"
          }, {
            "count" : 16,
            "item" : "68203.20"
          }, {
            "count" : 15,
            "item" : "83706.00"
          }, {
            "count" : 14,
            "item" : "73216.00"
          }, {
            "count" : 13,
            "item" : "18886.40"
          }, {
            "count" : 12,
            "item" : "84032.00"
          }, {
            "count" : 11,
            "item" : "86840.00"
          }, {
            "count" : 10,
            "item" : "61530.00"
          }, {
            "count" : 9,
            "item" : "83982.00"
          }, {
            "count" : 8,
            "item" : "99648.00"
          }, {
            "count" : 7,
            "item" : "87324.00"
          }, {
            "count" : 6,
            "item" : "62796.00"
          }, {
            "count" : 5,
            "item" : "100048.00"
          }, {
            "count" : 4,
            "item" : "62916.00"
          }, {
            "count" : 3,
            "item" : "87372.00"
          }, {
            "count" : 2,
            "item" : "84760.00"
          }, {
            "count" : 1,
            "item" : "89772.80"
          } ]
        },
        "format" : {
          "precisionStyle" : "standard",
          "noCommas" : "false",
          "align" : "right"
        }
      } ],
      "grants" : [ {
        "inherited" : false,
        "type" : "viewer",
        "flags" : [ "public" ]
      } ],
      "metadata" : {
        "custom_fields" : {
          "Metadata" : {
            "Last Updated Date via Automated Load" : "",
            "Time Period" : "Last Updated April 19, 2012",
            "Data Owner" : "Human Resources",
            "Frequency" : "Data is updated quarterly"
          }
        },
        "renderTypeConfig" : {
          "visible" : {
            "table" : true
          }
        },
        "availableDisplayTypes" : [ "table", "fatrow", "page" ],
        "rdfSubject" : "0",
        "filterCondition" : {
          "value" : "AND",
          "children" : [ {
            "value" : "OR",
            "type" : "operator",
            "metadata" : {
              "includeAuto" : 15,
              "tableColumnId" : {
                "241512" : 1532236
              },
              "operator" : "EQUALS"
            }
          } ],
          "type" : "operator",
          "metadata" : {
            "unifiedVersion" : 2,
            "advanced" : true
          }
        },
        "rowIdentifier" : "0",
        "rdfClass" : ""
      },
      "owner" : {
        "id" : "vi9p-p863",
        "displayName" : "Eric Phillips",
        "emailUnsubscribed" : false,
        "privacyControl" : "login",
        "profileLastModified" : 1333412533,
        "roleName" : "administrator",
        "screenName" : "Eric Phillips",
        "rights" : [ "create_datasets", "edit_others_datasets", "edit_sdp", "edit_site_theme", "moderate_comments", "manage_users", "chown_datasets", "edit_nominations", "approve_nominations", "feature_items", "federations", "manage_stories", "manage_approval", "change_configurations", "view_domain", "view_others_datasets", "edit_pages", "create_pages" ]
      },
      "query" : {
      },
      "rights" : [ "read" ],
      "tableAuthor" : {
        "id" : "vi9p-p863",
        "displayName" : "Eric Phillips",
        "emailUnsubscribed" : false,
        "privacyControl" : "login",
        "profileLastModified" : 1333412533,
        "roleName" : "administrator",
        "screenName" : "Eric Phillips",
        "rights" : [ "create_datasets", "edit_others_datasets", "edit_sdp", "edit_site_theme", "moderate_comments", "manage_users", "chown_datasets", "edit_nominations", "approve_nominations", "feature_items", "federations", "manage_stories", "manage_approval", "change_configurations", "view_domain", "view_others_datasets", "edit_pages", "create_pages" ]
      },
      "tags" : [ "personnel" ],
      "flags" : [ "default" ]
    }
  },
  "data" : [ [ 8172, "56A29995-E979-411D-BE47-27F48FD1A0A1", 8172, 1334860745, "386464", 1334860745, "386464", "{\n}", "EMANUEL,  RAHM", "MAYOR", "MAYOR'S OFFICE", "216210.00" ]
 ]
} 
```

现在我正在尝试获取特定人员的薪水，即 216210，它位于“数据”列表的最后一行。

所以这就是我现在所拥有的：

```
void webClient_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
        {
            if (e.Error != null)
            {
                return;
            }
            List<Employee> emp = JsonConvert.DeserializeObject<List<Employee>>(e.Result);
            this.lbTweets.ItemsSource = emp;
        }
    }

    public class Employee
    {

        [JsonProperty("data")]
        public string salary
        {
            get;
            set;
        }

    } 
```

我猜我没有`[JsonProperty("data")]`正确的部分，单击按钮后出现此错误：

```
An unhandled exception of type 'Newtonsoft.Json.JsonReaderException' occurred in Newtonsoft.Json.dll

Additional information: Unexpected character encountered while parsing value: ?. Line 0, position 0. 
```

任何人都可以帮忙吗？谢谢

编辑：不确定这是否有帮助，但我用这段代码在javascript中解析了它：

```
$.getJSON(this.query, function(response) {
        var i, results;
        results = [];
        for (i = 0; i < response.data.length; i += 1) {
            row = { 
                name: response.data[i][8],
                salary: response.data[i][11]
            }
            results.push(row);
        } 
```

更新：在仅将链接设为 json 请求而不是 jsonp 请求后，新的 json 不再具有任何额外字符。但我收到一个新错误：附加信息：无法将 JSON 对象反序列化为类型“System.Collections.Generic.List`1[WPJsonSample.Tweet]”。第 2 行，位置 11。

我已经使用 json2csharp 为我生成类，所以我有这个类：

```
public class RootObject
{
    public Meta meta { get; set; } // removed this line because I only want the data
    public List<List<object>> data { get; set; }
} 
```

但是我仍然从上面得到那个错误，可能是我没有正确的数据类型：

```
List<RootObject> tweets = JsonConvert.DeserializeObject<List<RootObject>>(e.Result); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:04:36.560

你真的需要使用 JSONP 吗？[http://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP)

这个 url 是否更适合获取和反序列化一个简单的 JSON 对象？ [https://data.cityofchicago.org/api/views/xzkq-xp2w/rows.json?search=rahm](https://data.cityofchicago.org/api/views/xzkq-xp2w/rows.json?search=rahm)

通过使用 JSONP（对于每个示例的“ajax 跨域请求”），您最后需要一个回调函数： [https ://data.cityofchicago.org/api/views/xzkq-xp2w/rows.json?search=rahm&jsonp= callbackfunc](https://data.cityofchicago.org/api/views/xzkq-xp2w/rows.json?search=rahm&jsonp=callbackfunc) （使用 jquery 的 JSONP 请求每次都会添加一个唯一的回调函数）。

# ember.js - 用 Ember.js 编写的推荐示例应用程序

> ID：10830072
> 
> 赞同：29
> 
> 时间：2012-05-31T08:37:14.007
> 
> 标签：ember.js

您推荐哪些最新的、公共的、中等规模的 Ember.js 应用程序来通过阅读其实现来了解使用模式？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-31T14:05:07.430

我推荐**[Travis CI](https://github.com/travis-ci/travis-ci)**项目——它在客户端使用 Ember，在服务器上使用 Rail 3。虽然它没有使用最新的 Ember 功能，但它有很好的基础。[您将在单独的 repo travis-web](https://github.com/travis-ci/travis-web)中找到客户端代码。

我还发现阅读**@ebryn 的“ [New Twitter](https://github.com/ebryn/newtwitter) ”**很有帮助，尽管它比 Travis CI 更老（Sproutcore 2）并且更小/更简单。

**更新：**在发布 1.0 之前，Ember 经历了许多重大变化，因此许多较旧的示例应用程序使用已弃用的 API，不再代表最佳实践。一个新的例子是**Discourse** ( [https://github.com/discourse/discourse](https://github.com/discourse/discourse) ) 一个由 Jeff Atwood 和 Robin Ward 构建的大型 web 应用程序。另外，请查看@trek 的**Ember Todos**，这是一个具有更多流程的**TodoMVC版本（** [https://github.com/trek/ember-todos-with-build-tools-tests-and-other-modern-conveniences](https://github.com/trek/ember-todos-with-build-tools-tests-and-other-modern-conveniences)）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-10T14:09:22.570

我推荐 ToDoMVC 项目，它提供了在当今大多数流行的 JavaScript MV* 框架中使用 MV* 概念实现的相同 Todo 应用程序。现在 ToDO MVC ember.js 示例适应了 ember.js 1.0.rc1。网址：[http](http://todomvc.com/) ://todomvc.com/ 来源：[https ://github.com/addyosmani/todomvc](https://github.com/addyosmani/todomvc)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-14T06:17:34.607

[Emberwatch](http://emberwatch.com/)有一个[开源类别](http://emberwatch.com/open_source.html)，其中包含一系列有趣的项目。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-14T06:47:47.367

我推荐[http://www.embercasts.com/episodes/client-side-authentication-part-1](http://www.embercasts.com/episodes/client-side-authentication-part-1)非常适合从身份验证开始。

还有它来自粉碎杂志[http://coding.smashingmagazine.com/2013/11/07/an-in-depth-introduction-to-ember-js/](http://coding.smashingmagazine.com/2013/11/07/an-in-depth-introduction-to-ember-js/)

一个很好的练习是将这些应用程序放在具有当前版本的[http://iamstef.net/ember-app-kit/中工作](http://iamstef.net/ember-app-kit/)

# ffmpeg - 使用 ffmpeg 缩放视频时保持精确的纵横比

> ID：10830079
> 
> 赞同：1
> 
> 时间：2012-05-31T08:37:43.367
> 
> 标签：ffmpeg, scaling, video-encoding

我有一个 mkv 视频，它混合了多种分辨率的记录，例如，我有前几秒的宽屏 16:9 (1024x576) 分辨率，其余的视频则为 4:3 (768x576) 分辨率。我想将此视频缩小 3 倍，同时复制所有其他属性（音频编解码器、字幕等）。我用`ffmpeg -i <input_mkv> -vf scale=iw/2:-1 -acodec copy <output_mp4>`. 此外，VLC 检测到它的分辨率为 720x576。

问题是缩放后，分辨率不断变为 4:3 (360x288)。如何保持输入视频文件的动态纵横比，即 16:9 部分缩放为 16:9，而 4:3 部分缩放为 4:3？

**更新**

当分辨率切换时，播放器大小实际上会发生变化，至少在 mplayer 中是这样。我发现了主要问题。似乎每一帧都标有一个样本纵横比（SAR），所以当玩家播放它时，它可以找到显示纵横比。编码为 MKV 时，不会复制此 SAR 值。当编码为 MPG 时，它确实被复制了，我得到了一个精确的副本，播放器切换大小，但不是 MKV。

输出`ffprobe -show_streams filename`：

```
ffprobe version 0.10.3 Copyright (c) 2007-2012 the FFmpeg developers
  built on May  9 2012 17:51:07 with gcc 4.7.0 20120505 (prerelease)
  configuration: --prefix=/usr --enable-libmp3lame --enable-libvorbis --enable-libxvid --enable-libx264 --enable-libvpx --enable-libtheora --enable-libgsm --enable-libspeex --enable-postproc --enable-shared --enable-x11grab --enable-libopencore_amrnb --enable-libopencore_amrwb --enable-libschroedinger --enable-libopenjpeg --enable-librtmp --enable-libpulse --enable-gpl --enable-version3 --enable-runtime-cpudetect --disable-debug --disable-static
  libavutil      51\. 35.100 / 51\. 35.100
  libavcodec     53\. 61.100 / 53\. 61.100
  libavformat    53\. 32.100 / 53\. 32.100
  libavdevice    53\.  4.100 / 53\.  4.100
  libavfilter     2\. 61.100 /  2\. 61.100
  libswscale      2\.  1.100 /  2\.  1.100
  libswresample   0\.  6.100 /  0\.  6.100
  libpostproc    52\.  0.100 / 52\.  0.100
Input #0, matroska,webm, from 'sample.mkv':
  Metadata:
    title           : Pan prstenu. Dve veze
  Duration: 00:00:29.80, start: 0.000000, bitrate: 3124 kb/s
    Stream #0:0(eng): Video: mpeg2video (Main), yuv420p, 720x576 [SAR 64:45 DAR 16:9], 15000 kb/s, 25 fps, 25 tbr, 1k tbn, 50 tbc (default)
    Stream #0:1(cze): Audio: mp2, 48000 Hz, stereo, s16, 128 kb/s (default)
[STREAM]
index=0
codec_name=mpeg2video
codec_long_name=MPEG-2 video
codec_type=video
codec_time_base=1/50
codec_tag_string=[0][0][0][0]
codec_tag=0x0000
width=720
height=576
has_b_frames=1
sample_aspect_ratio=64:45
display_aspect_ratio=16:9
pix_fmt=yuv420p
level=8
timecode=16:35:19:10
id=N/A
r_frame_rate=25/1
avg_frame_rate=25/1
time_base=1/1000
start_time=0.000000
duration=N/A
nb_frames=N/A
TAG:language=eng
[/STREAM]
[STREAM]
index=1
codec_name=mp2
codec_long_name=MP2 (MPEG audio layer 2)
codec_type=audio
codec_time_base=1/48000
codec_tag_string=[0][0][0][0]
codec_tag=0x0000
sample_fmt=s16
sample_rate=48000
channels=2
bits_per_sample=0
id=N/A
r_frame_rate=0/0
avg_frame_rate=125/3
time_base=1/1000
start_time=0.000000
duration=N/A
nb_frames=N/A
TAG:language=cze
[/STREAM] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T21:29:42.590

FFmpeg video filters have a [surprisingly rich set of logical functions](http://ffmpeg.org/ffmpeg.html#Expression-Evaluation) for building complex filters and you should be able to use those to preserve the changing SAR in your file. Try something like this:

```
ffmpeg ... -vf scale='if(gt(dar\, 4/3)\, 512) + ifnot(gt(dar\, 4/3)\, 384):-1' ... 
```

Replacing `512` and `384` with appropriate values as necessary. That said, I don't have a multi-SAR video to test with, so YMMV.

You might also look into the [`showinfo` filter](http://ffmpeg.org/ffmpeg.html#showinfo) to get excruciatingly detailed information about each frame, and potentially the [`setsar` filter](http://ffmpeg.org/ffmpeg.html#setdar_002c-setsar), though the lack of frame-specific variables would suggest difficulty in changing it midstream.

# java - 确定可用的 Vaadin 屏幕空间和 GridLayout

> ID：10830096
> 
> 赞同：0
> 
> 时间：2012-05-31T08:38:31.087
> 
> 标签：java, awt, vaadin, layout-manager, grid-layout

我正在尝试创建一个 Vaadin 应用程序，该应用程序在 a 内有一个网格，`VerticalLayout`它占据了大部分屏幕（因此，小页眉、大网格、小页脚）。很容易做到。

但我想计算可供我使用的浏览器区域的大小并将其划分为 80x60 像素块，因此不同的显示器会有不同数量的`GridLayout`单元格。即显示越大，网格中的单元格就越多。

我遇到的问题是，`init()`当时`WebBrowser`我无法获得宽度和高度的信息（API 中这样说）。我已经尝试了示例代码，但仍然`init`有效地从 'attach' 调用。

我可以使用某种监听器（不确定是哪个）来进行网格设置并为所有这些添加控件，但这对我来说听起来真的很混乱和麻烦。

所以，问题：

1.  什么 Listener 合适？
2.  难道没有一种简单的方法可以计算出可用的屏幕空间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:41:52.033

**备选方案 1**：

```
WebBrowser browser = ((WebApplicationContext) getApplication().getContext()).getBrowser();
int width = browser.getScreenWidth();
int height = browser.getScreenHeight(); 
```

**最好的办法：**

```
getApplication().getMainWindow().addListener(new ResizeListener() {
    @Override
    public void windowResized(ResizeEvent e) {
        System.out.printf("window info : %sx%s\n", 
                         e.getWindow().getWidth(), 
                         e.getWindow().getHeight()));
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T09:53:48.293

制作您的`Application`implement `HttpServletRequestListener`，并像这样实现回调：

```
public void onRequestEnd(HttpServletRequest request,
        HttpServletResponse response) {
    WebBrowser browser = ((WebApplicationContext) getContext()).getBrowser();
    int width = browser.getScreenWidth();
    int height = browser.getScreenHeight();
    if(width==0 || width==-1) return;
    if(height==0 || height==-1) return;
    System.out.println("Your browser window is "+width+" by "+height); 
```

# asp.net - 调用它的 ASP.NET 应用程序超时时是否执行存储过程？

> ID：10830100
> 
> 赞同：2
> 
> 时间：2012-05-31T08:38:41.417
> 
> 标签：asp.net, sql-server, timeout

我有一个 ASP.NET Web 应用程序，它调用一个长时间运行的存储过程，并且在两者之间超时，在这种情况下，存储过程将执行。是的，我知道我们可以增加超时持续时间，但我对存储过程的执行表示怀疑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:46:43.170

首先检查您的存储过程是否执行它，如果它显示正确的结果，则意味着它已成功执行。然后增加超时持续时间存储过程需要时间来显示结果取决于数据、您的逻辑等，但最终它肯定会显示结果。

关于应用程序超时

在 web.config 中

```
<location path="something.aspx">
        <system.web>
                <httpRuntime executionTimeout="90"/>
        </system.web>
</location> 
```

您可以根据需要更改 executionTimeout

更多信息 [http://msdn2.microsoft.com/en-us/library/e1f13641.aspx](http://msdn2.microsoft.com/en-us/library/e1f13641.aspx)

# eclipse - 不断的日食崩溃

> ID：10830112
> 
> 赞同：1
> 
> 时间：2012-05-31T08:39:25.097
> 
> 标签：eclipse

我在一台机器上使用最新的 eclipse 版本（Indigo）：CPU：Intel Core i5 2.4 GHz，8 GB RAM，64 位 Windows，并且 eclipse 经常冻结。我增加了所有记忆的东西（permgen ...），但它没有帮助。当它停止响应时，会弹出一个窗口，其中包含以下数据：

```
Java was started but returned exit code= -805306369
-XX:PermSize=256M
-XX:MaxPermSize = 512M
-Xms512m
-Xmx1024m
... 
```

如果您需要更多输入，请随时询问:)

任何帮助将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T11:42:47.337

查看您的 64 位 Windows；我想起了这个话题。看看那里的解决方案是否解决了它

[https://superuser.com/questions/314015/eclipse-crashed](https://superuser.com/questions/314015/eclipse-crashed)

正如我上面的评论所暗示的那样；-clean 开始 Eclipse 是一个好主意，因为您有足够的 RAM 可以更快地清理它。每次启动 Eclipse 时，较慢的机器都会难以清洁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-27T12:07:40.263

从终端/命令提示符使用 -clearPersistedState 运行 eclipse

# java - 使用jsp在主页菜单栏上显示类别和子类别

> ID：10830113
> 
> 赞同：0
> 
> 时间：2012-05-31T08:39:28.137
> 
> 标签：java, servlets

我想在主页上将类别和子类别显示为菜单栏。所有类别都应该在那里，并且子类别显示在类别菜单上的鼠标悬停上。

我已经尝试过 servlet 来获取记录和 jsp 来显示它。我的jsp代码如下

```
<ul>
    <% Iterator itr;%>
    <% List data=(List)request.getAttribute("data");
        for(itr=data.iterator(); itr.hasNext(); ){
    %>
    <li><a href=""><%=itr.next()%></a></li>
    <%}%>
</ul> 
```

使用上述方法，我可以正确获取类别，但问题是我想要存储在名为 tbl_subcategory 的另一个表中的子类别。使用上述方法，我可以得到如下输出：

> 首页 关于我们 运动厨房 婴儿玩具

现在我想在鼠标悬停时显示每个类别的子菜单。

但它只显示类别而不是子类别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:59:52.877

我不知道“数据”中存储了什么，但假设它加载了字符串：

```
String data[] = new String[] { "Array 1", "Array 2", "Array 3" }; 
```

JSP 页面看起来像这样打印出“数据”中的所有字符串：

```
<ul>
  <% Iterator<String> iterator = request.getAttribute("data");
     while (iterator.hasNext()) {
  %>

  <li> <a href=""><%=iterator.next()%></a> </li>

  <%}%>
</ul> 
```

生成的 HTML 页面看起来像这样：

```
<ul>
  <li><a href="">Array 1</a></li>
  <li><a href="">Array 2</a></li>
  <li><a href="">Array 3</a></li>
</ul> 
```

**或者您可以使用 JSTL**来遍历“数据”。在您的 HTML-Header 中添加此声明：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %> 
```

然后遍历“数据”：

```
<% String data[] = request.getAttribute("data"); %>

<ul>
<c:forEach var="d" items="${data}">
  <li><a href=""><c:out value="${d}" /></a></li>
</c:forEach>
</ul> 
```

至于您的下拉菜单，请查看[这个带有简单下拉菜单的教程](http://javascript-array.com/scripts/simple_drop_down_menu/#)，它是免费的。如果您正在寻找更高级的下拉菜单，请查看[带有高级下拉菜单的本教程](http://javascript-array.com/scripts/multi_level_drop_down_menu/?st)，但请记住，尽管此高级下拉菜单需要花钱

我不知道您从哪里获得子菜单项，但我只能说，`<a>`当您使用这些教程时，您应该在标签内输入子菜单值以创建子菜单项。像这样：

```
<li><a href="#" 
    onmouseover="mopen('m1')" 
    onmouseout="mclosetime()">Array 1</a>
    <div id="m1" 
        onmouseover="mcancelclosetime()" 
        onmouseout="mclosetime()">
    <a href="#">Array 1.1</a>
    <a href="#">Array 1.2</a>
    <a href="#">Array 1.3</a>
    </div>
</li>

<li><a href="#" 
    onmouseover="mopen('m2')" 
    onmouseout="mclosetime()">Array 2</a>
    <div id="m2" 
        onmouseover="mcancelclosetime()" 
        onmouseout="mclosetime()">
    <a href="#">Array 2.1</a>
    <a href="#">Array 2.2</a>
    <a href="#">Array 2.3</a>
    </div>
</li> 
```

只需按照教程中的步骤操作即可

# wpf - 将边际定义为静态资源是否会产生显着的性能开销？

> ID：10830114
> 
> 赞同：3
> 
> 时间：2012-05-31T08:39:40.647
> 
> 标签：wpf, performance, xaml, staticresource

我有很多“乐趣”，试图使我的 XAML 中的边距（和宽度）与同一应用程序中的其他边距和同一应用程序“套件”中的其他应用程序中的边距相匹配。

所以我有了将边距定义为静态资源的想法：

```
<Thickness x:Key="MarginDetailTabPageContent">0</Thickness>
<Thickness x:Key="MarginLeftHeader">2,4,2,2</Thickness>
<Thickness x:Key="MarginAdditionalInfoOnTop">1,2,2,0</Thickness>
<Thickness x:Key="MarginSmallHeaderOnTop">1,2,2,0</Thickness>
<Thickness x:Key="MarginFieldWithAdditionalMarginOnTop">0,0,2,2</Thickness>
<System:Double x:Key="WidthSmallField">70</System:Double> 
```

..然后我计划在任何地方使用这些静态资源..标签，文本块，文本框，复选框..在我的应用程序中的几乎所有控件上。

但在我做出这个相当耗时的更改之前，我想请您就这将如何影响性能提出专家意见。

不知何故，在我看来，我决定在任何地方使用静态资源 - 写作`<TextBlock Margin="{StaticResource=MarginLeftHeader}" ... />`而不是`<TextBlock Margin="2,4,2,2" ... />`- 至少需要为每个使用它的地方调用某个函数。这对吗？

总体问题是：用户是否能够感受到性能的任何变化（变坏..或变好）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:47:48.263

在应用程序实际运行之前加载 XAML 期间，将解析 StaticResource 并将其分配给属性。它只会被分配一次，并且对资源字典的任何更改都会被忽略。所以性能上没有显着差异；该资源的查找行为*类似于*编译时查找。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T08:55:02.167

在您的应用程序中拥有多个实例`<TextBlock Margin="2,4,2,2" ... />`将导致`Thickness`为每个实例创建一个新的独立对象。

拥有一个`Thickness`资源和多个实例`<TextBlock Margin="{StaticResource MarginLeftHeader}" ... />`将只创建一个`Thickness`对象，并对其进行多个引用。

几个因素：

*   第二个选项将比第一个选项使用更少的内存（即`Thickness`内存中的对象更少）。
*   如果要在全球范围内调整应用程序的边距，或者在不同情况下提供不同的边距，则第二种选择会让生活变得更加轻松。
*   我不确定哪个选项会更好 - 实例化新`Thickness`对象与查找资源。我的直觉是，对于一个简单的`Thickness`结构，第一个选项实际上可能性能更好（而对于更复杂的基于类的对象可能会有所不同）

总而言之，因为您正在处理一个`Thickness`只有四个`double`值的简单结构，所以内存和性能差异可能相当可忽略不计，所以随您选择！

# java - 输入流的缓冲读取器仍然有损坏

> ID：10830116
> 
> 赞同：0
> 
> 时间：2012-05-31T08:39:48.420
> 
> 标签：java, sockets

我们有 java 套接字连接应用程序，它从 gps 设备接收数据。现在的问题有时我们收到损坏的数据并在设备日志上检查一切都很好。First BufferedReader 被使用并被怀疑是罪魁祸首。我们搬到 inpustream 也仍然有问题。损坏是随机的，而不是固定的时间间隔。下面是代码片段。

```
public void run() { 

     String completeMessage="";
     //BufferedReader readerBuffer = null; 
     InputStream is = null;    
     BufferedWriter writeBuffer = null;

     try {
         //readerBuffer = new BufferedReader(new InputStreamReader(sockConn1.getInputStream()));
         is = sockConn1.getInputStream();
         writeBuffer = new BufferedWriter(new OutputStreamWriter(sockConn1.getOutputStream()));

         int readChar=0;         

         sockConn1.setSoTimeout(120000);
         //dbConnection = connectionPool.getConnection();
         //dbConnection.setAutoCommit(false);
           int readChar
            while ((readChar=is.read()) != -1) 
             {                

                 System.out.println("Char value: "+(char)readChar) ;
                  if (readChar == '*') {
                   try {

                     //writeBuffer.write("@@\r\n\r\n");
                     //writeBuffer.flush();                 
                     //db processing
                    dbConnection.commit();
                   }
                   catch (SQLException ex){ 
                         ex.printStackTrace();
                            try{    
                            dbConnection.rollback();  
                            } 
                            catch (Exception rollback){    
                                rollback.printStackTrace();
                            }
                  }
                  catch (Exception e){
                        e.printStackTrace(System.out);
                            try{    
                            dbConnection.rollback();  
                            } 
                            catch (Exception rollback){    
                                rollback.printStackTrace(System.out);
                            }
                  }
                  finally{
                        try{
                            if ( dbStmt != null ){
                              dbStmt.close();
                            }                           
                        }
                        catch(SQLException ex){
                            ex.printStackTrace(System.out);
                        }                      
                      }      
                completeMessage="";           
                }

             }
          }
          catch (SocketTimeoutException ex){ 
               ex.printStackTrace();
          }  
          catch (IOException ex){ 
               ex.printStackTrace();
          }  
          catch (Exception ex){ 
               ex.printStackTrace();
          }      
          finally{
            try{
                if ( dbConnection != null ){
                  dbConnection.close();
                }
            }
            catch(SQLException ex){
                 ex.printStackTrace();
            }
            try{
                if ( writeBuffer != null ){
                    writeBuffer.close();
                }
            }
            catch(IOException ex){
               ex.printStackTrace(System.out);
            }           
          }

      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:51:17.470

这儿存在一个问题。您将二进制数据读/写为文本：

*   InputStream, OutputStream = 二进制数据
*   读者，作家=文本

这是通过以下方式桥接的：

*   新的 InputStremReader(inputStream, charEncoding)
*   新的 OutputStreamWriter(outputStream, charEncoding)

并且字符串到字节由以下方式桥接：

*   新字符串（字节，字符编码）
*   string.getBygtes(charEncoding)

其中 charEncoding 是可选参数，默认为操作系统编码。

使用 UTF-8，Unicode 多字节编码，如果做错了，你很快就会陷入困境。其他编码也有问题的字节。

所以不要使用 Reader/Writer。

`read()`传递一个 int，-1 表示文件结束，否则传递一个字节值。似乎您使用 read() 进行的测试会抛出一个字节，并且随后的读取不会测试 -1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:26:38.553

不清楚这里使用什么字符编码。

当您处理字符流时，显式提供字符编码以对字节流进行编码/解码几乎总是一个好主意。

在我看来，这很可能是字符编码问题。两边使用相同的编码，读写器不会有问题。

# python - 如何解调（音频）莫尔斯电码

> ID：10830123
> 
> 赞同：4
> 
> 时间：2012-05-31T08:40:14.263
> 
> 标签：python, morse-code

我有一个无线电接收器。那台收音机的声音输出到我的电脑。声音输出包含 440 Hz 或大约 440 Hz 的摩尔斯电码。该莫尔斯电码的速度范围为 2 到 20 [WPM](http://en.wikipedia.org/wiki/Words_per_minute#Morse_Code)。我有点知道如何判断对方是否在传输，但是我如何将传输/未传输状态转换为文本？我认为可能有比蛮力更好的解决方案。

复杂因素：

*   我希望程序能够计算出另一个站的传输速度，而不是像大多数摩尔斯电码程序那样由用户指定。
*   有噪音
*   莫尔斯电码发射器不会立即打开和关闭。上升和下降时间约为 4 毫秒。
*   这种莫尔斯电码大部分是由人发送的，因此并不完美：
    *   例如，单词之间的停顿应该由 7 个元素组成，但它可以是 5 到 8 个之间的任何元素。
    *   在一次对话中，一个人的发送速度可能会发生大约 20% 的变化
*   我想或多或少实时地做到这一点。如果程序输出一些东西，意识到这是一个错误并纠正它，那就没关系了。

[源代码](https://github.com/nickodell/morse-code)

到目前为止的程序示例输出。它可以将音频解析为键控/非键控，但将其解析为点/破折号不起作用。

```
###########################################################__________________________
_________________________________####################################################
#####################################################################################
#######################################______________________________________________
_____________________________________________________________________________________
_____________________________________________________________________________________
_____________________________________________________________________________________
_____________________________________________________________________________________
_________________________ 
```

任何关于确定传输/不传输和/或将其解析为莫尔斯电码的部分的代码/建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T05:04:54.050

关于将点与破折号和空格分开，一个想法是在对话开始时开始收集统计数据，并将所有“键控的 XXms”事件放入一个数组（或其他东西），将所有“未键控的 YY 毫秒”放入另一个数组（或者其他的东西）。然后，您最终将得到一个直方图概率（t），用于键控和相同的未键控。这些直方图应该有一些最大值和最小值，对人类和某些算法都是可见的。因此，您对曲线进行了一些舍入，将它们拆分为这些最小值，以将左侧的点与右侧的破折号分开，与可能不止一个带有空格的最小值相同。这种方法确实可以很好地融入对话，但不需要调整。

# c# - 什么时候是保持配置的合适时间？

> ID：10830125
> 
> 赞同：0
> 
> 时间：2012-05-31T08:40:32.757
> 
> 标签：c#, xml, configuration, xml-serialization

我有以下问题：我在应用程序退出时保存（xml 序列化）我的配置（非常大的对象列表），主窗体关闭，但有时某些组合上的操作系统（win 7）会在保存完成之前终止我的应用程序。所以我问什么时候是最好的时机，我想可能是在主窗体上最小化，但这是有条件的（用户可能永远不会最小化应用程序）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:18:46.777

**仅 WPF**

你试过把它放在你的应用程序类中吗？在应用程序退出时会触发一个覆盖。下面的方法需要 10 秒来完成它的任务，并且还使用户在应用程序关闭之前单击消息框上的 OK 按钮。

但是，如果您将配置保存在另一个线程中，这将不起作用，它只会退出应用程序。

应用程序.xaml.cs

```
 /// <summary>
    /// Interaction logic for App.xaml
    /// </summary>
    public partial class App : Application
    {
        protected override void OnExit(ExitEventArgs e)
        {
            Thread.Sleep(10000);
            MessageBox.Show("done");
            base.OnExit(e);
        }
    } 
```

**赢取表格**

在 Winforms 应用程序中，您可以连接到 ApplicationExit 事件并将您的配置保存在那里。

```
Application.ApplicationExit += new EventHandler(Application_ApplicationExit);
static void Application_ApplicationExit(object sender, EventArgs e)
{

} 
```

# c# - 在c#中将1个文件内容复制到另一个文件中

> ID：10830126
> 
> 赞同：-1
> 
> 时间：2012-05-31T08:40:41.953
> 
> 标签：c#

我想用 C# 将一个文件的选定部分复制到另一个文件中

例如，假设我有一个包含以下内容的文件：

```
<div id="1"> contents of this div.. </div>
<div id="2"> contents of this div.. </div>
<div id="3"> contents of this div.. </div> 
```

现在，如果我只想将该行复制`<div id="2"> contents of this div.. </div>`到一个新文件中。那我怎样才能有效地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:43:25.983

使用 XPath 选择内容，然后导出到第二个文件。

例如

```
XmlDocument document = new XmlDocument();
document.LoadXml(data);
XmlNode node = document.SelectSingleNode("//div[@id='2']");
SaveToFile(node.InnerText); 
```

[在此处](http://www.w3schools.com/xpath/xpath_syntax.asp)阅读XPath 示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T08:44:45.880

例如，使用正则表达式来提取您想要的内容

```
<div id="2">(.*)</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T08:46:30.927

有不同的方法可以解决这个问题：

1.  您可以使用[Regex](http://www.mikesdotnetting.com/Article/46/CSharp-Regular-Expressions-Cheat-Sheet)选择应复制的部分
2.  [XPath](http://www.codeproject.com/Articles/9494/Manipulate-XML-data-with-XPath-and-XmlDocument-C)也可用于选择内容
3.  如果是 html 你也可以使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)

**HTML 敏捷性示例：**

```
var doc = new HtmlWeb().Load(url);
var comments = doc.Descendants("div")
                  .Where(div => div.GetAttributeValue("class", "") == "comment"); 
```

[在这里，您可以找到通过 C#](http://olussier.net/2010/03/30/easily-parse-html-documents-in-csharp/)**解析 HTML 字段**的不同方法的概述（包括示例）

# symfony - 使用 Assetic / Twig / Symfony2，我可以定义前端库吗？

> ID：10830129
> 
> 赞同：4
> 
> 时间：2012-05-31T08:40:48.433
> 
> 标签：symfony, twig, assetic

我正在使用 Symfony2、Assetic 和 Twig。我有各种前端库——Backbone、jQuery、jQuery UI 和 Bootstrap。Bootstrap 和 jQuery UI 都包含 CSS 和 JS 文件。

有没有一种方法可以定义他们需要包含的资源（包括依赖项），然后在 Twig / Assetic 中将所有这些资源包含在一个标签中？我希望拥有的是这样的：

```
// config.yml <!-- DOES NOT WORK -->
assetic:
  resources:
    jquery:
      js: /filepath/to/jquery.js
    jquery_ui:
      dependencies: jquery
      css: /filepath/to/jqueryui.css
      js: /filepath/to/jqueryui.js
    less:
      js: /filepath/to/less.js
    bootstrap:
      dependencies: { less, jquery }
      js: /filepath/to/bootstrap.js
      css: /filepath/to/bootstrap.css
    backbone:
      dependencies: { jquery }
      js: { /filepath/to/underscore.js, /filepath/to/backbone.js }

// view.html.twig
{% use jquery_ui %}
{% use bootstrap %} 

// outputs all js and css for jQuery, jQueryUI, Less, Backbone, and Bootstrap 
```

我发现了几个相关的问题：

*   [如何在 Symfony 2 yml 或 xml 配置文件中定义 Assetic 资源？](https://stackoverflow.com/questions/6922759/how-to-define-assetic-resources-in-symfony-2-yml-or-xml-configuration-file)
*   [Symfony2 Assetic + Twig 模板 JavaScript 继承](https://stackoverflow.com/questions/8769269/symfony2-assetic-twig-template-javascript-inheritance)

但似乎都不涉及在 config.yml 中定义资源。相反，他们在其中定义它们，`base.html.twig`但这就是我试图避免的。

我尝试`use`在 Twig 中使用该标签，方法是定义一个名为“jquery_ui”的模板，并在该块中使用`{% stylesheets %}`and `{% javascripts %}`，然后`base.html.twig`将`{% use "jquery-ui.html" %}`. 但是，`use`不会导入模板，因为它有一个正文。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-31T20:39:12.770

虽然确实支持定义前端库，但遗憾的是不支持依赖解析。您还必须分别定义 CSS 和 JavaScript。

我一直在做的是在`/app/config/`调用中创建一个单独的文件`assets.yml`并将其包含在主配置中以保持干净。

```
assetic:
    assets:
        jquery:
            inputs:
                - '%kernel.root_dir%/Resources/public/js/jquery.js'
                - '%kernel.root_dir%/Resources/public/js/jquery-ui.js'
        my_lib:
            inputs:
                - '%kernel.root_dir%/Resources/public/js/my-custom-lib.js'
                - ... 
```

请注意，'%kernel.root_dir%'`app`在 Symfony2 中默认解析为目录。您现在可以使用 Twig 模板中的资产。

```
{% block javascripts %}
    {% javascripts '@jquery' '@my_lib' output="js/jquery.js" %}
        <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock %} 
```

对 CSS 文件也可以这样做。该示例还演示了为什么不能将 CSS 和 JavaScript 定义为单一资产。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-06T17:15:24.323

最简单的解决方案是将它们放在 web/ 目录中的适当目录中，因为这是为所有 Symfony 包提供服务的站点的根目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-19T17:08:49.223

您可能想查看 Cartero，它允许您定义“资产包”，包括依赖项，然后将这些包包含在您的页面中。

[https://github.com/rotundasoftware/cartero](https://github.com/rotundasoftware/cartero)

你需要编写一个 Symfony2 Hook，但这不会太难。

# sql - SQL Server 2008 - 动态比较列

> ID：10830134
> 
> 赞同：0
> 
> 时间：2012-05-31T08:41:10.220
> 
> 标签：sql, sql-server, tsql

我在 SQL Server 2008 中有一个包含大约 50 列的表。这些列中的每一列都对应一个条形码扫描仪；我们在工厂周围散布着各种串口转 IP 盒。收到扫描后，一个小型应用程序会在相关字段中插入一个日期。

我要做的是对此表中的字段进行比较，而不必手动列出它们；理想情况下，我希望能够从表中添加/删除字段，而不必更改在表上运行的 SPROCS/脚本。

所以而不是

```
UPDATE scans 
SET completed = 1 
WHERE (scanner_1 IS NOT NULL OR scanner_2 IS NOT NULL) 
```

...我正在尝试一些类似的东西

```
UPDATE scans 
SET completed = 1 
WHERE (/* Something to select all columns, maybe with an exclusion */ WHERE fields IS NOT NULL) 
```

我希望我已经解释得很好，感谢大家的关注！

* * *

我们有一张表格，列出了所有的扫描仪和 COM 端口，例如

```
id (PK)
com_port
scanner 
```

然后是每个扫描仪都有一个字段的表，键是创建记录时自动插入的条形码编号（用作真实名称的示例名称有点神秘）

```
barcode_id (PK)
scanner_1
scanner_2
scanner_3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:56:57.467

我当然同意有关规范化数据库的评论。理想情况下，您应该有一个单独的表，其中包含链接回 IP 盒和扫描仪的外键。

为了帮助规范化数据，您可能需要查看该`UNPIVOT`函数。例如

```
CREATE TABLE T (ID INT NOT NULL, Scanner1 DATETIME, Scanner2 DATETIME, Scanner3 DATETIME, Scanner4 DATETIME)

INSERT INTO T VALUES 
    (1, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
    (2, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, NULL),
    (3, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, NULL, NULL),
    (4, CURRENT_TIMESTAMP, NULL, NULL, NULL),
    (5, NULL, NULL, NULL, NULL)

SELECT  ID, Scanner, ScannedDate
FROM    T
        UNPIVOT 
        (   ScannedDate 
            FOR Scanner IN ([Scanner1], [Scanner2], [Scanner3], [Scanner4])
        ) UnPvt
ORDER BY ID, Scanner 
```

这将返回如下内容：

```
ID  Scanner     ScannedDate
-----------------------------------
1   Scanner1    May 31 2012 10:40AM
1   Scanner2    May 31 2012 10:40AM
1   Scanner3    May 31 2012 10:40AM
1   Scanner4    May 31 2012 10:40AM
2   Scanner1    May 31 2012 10:40AM
2   Scanner2    May 31 2012 10:40AM
2   Scanner3    May 31 2012 10:40AM
3   Scanner1    May 31 2012 10:40AM
3   Scanner2    May 31 2012 10:40AM
4   Scanner1    May 31 2012 10:40AM 
```

这仍然存在必须手动写出列的问题，但是您也可以动态创建 UNPIVOT 语句：

```
DECLARE @SQL NVARCHAR(MAX) = '',
        @Columns NVARCHAR(MAX) = ''

SELECT  @Columns = @Columns + ',' + QUOTENAME(Name)
FROM    SYS.COLUMNS
WHERE   OBJECT_ID = OBJECT_ID(N'T')
AND     LEFT(Name, 7) = 'Scanner'

SET @SQL = 'SELECT  ID, Scanner, ScannedDate
            FROM    T
                    UNPIVOT 
                    (   ScannedDate 
                        FOR Scanner IN (' + STUFF(@Columns, 1, 1, '') + ')
                    ) UnPvt
            ORDER BY ID, Scanner'

DECLARE @UnPivot TABLE (ID INT, Scanner VARCHAR(50), ScannedDate DATETIME)
INSERT INTO @UnPivot
EXECUTE SP_EXECUTESQL @SQL

SELECT  *
FROM    @UnPivot 
```

最后，如果您需要将标准化数据转换回平面视图，这仍然可以使用该`PIVOT`函数完成（假设 @SQL 和 @Columns 已经如上定义）：

```
CREATE TABLE ##UnPivot (ID INT, Scanner VARCHAR(50), ScannedDate DATETIME)
INSERT INTO ##UnPivot
EXECUTE SP_EXECUTESQL @SQL

SELECT  *
FROM    ##UnPivot

SET @SQL = 'SELECT  ID' + @Columns + '
            FROM    ##Unpivot
                    PIVOT 
                    (   MAX(ScannedDate)
                        FOR Scanner IN (' + STUFF(@Columns, 1, 1, '') + ')
                    ) UnPvt
            ORDER BY ID'

EXECUTE SP_EXECUTESQL @SQL

DROP TABLE ##UnPivot 
```

[我已经放置了一个完整的动态反透视数据的工作示例，然后在SQL Fiddle](http://sqlfiddle.com/#!3/c1d9d/9)上再次对其进行透视

* * *

**编辑**

我刚刚意识到我实际上并没有回答最初的问题，我只是建议如何规范化数据。以下是无需手动输入列的方法：

```
DECLARE @SQL NVARCHAR(MAX) = '',
        @Columns NVARCHAR(MAX) = ' WHERE 1 = 1 '

SELECT  @Columns = @Columns + 'AND ' + QUOTENAME(Name) + ' IS NOT NULL '
FROM    SYS.COLUMNS
WHERE   OBJECT_ID = OBJECT_ID(N'T')
AND     LEFT(Name, 7) = 'Scanner'

SET @SQL = 'UPDATE T SET Completed = 1' + @Columns
EXECUTE SP_EXECUTESQL @SQL 
```

[同样，在SQL Fiddle](http://sqlfiddle.com/#!3/3edd2/3)上有一个工作示例

# cohesion - 什么是高内聚力以及如何使用/制造它？

> ID：10830135
> 
> 赞同：86
> 
> 时间：2012-05-31T08:41:14.880
> 
> 标签：cohesion

我正在学习计算机编程，在几个地方我偶然发现了凝聚力的概念，我明白软件具有“高凝聚力”是可取的，但这意味着什么？我是一名 Java、C 和 Python 程序员，从《C++ Primer》一书中学习 C++，其中提到了内聚性，但没有在索引中包含它，你能给我指出一些关于这个主题的链接吗？我没有找到关于计算机科学凝聚力的维基百科页面，因为它只是说这是一种定性衡量标准，并没有给出真实的代码示例。

* * *

## 回答 #1

> 赞同：250
> 
> 时间：2012-05-31T08:47:48.230

高凝聚力是指你的班级做得很好。低凝聚力是指一个班级做了很多没有太多共同点的工作。

让我们看这个例子：

您有一个添加两个数字的类，但同一个类创建了一个显示结果的窗口。这是一个低内聚类，因为窗口和加法操作没有太多共同点。窗口是程序的可视部分，添加功能是其背后的逻辑。

要创建高内聚解决方案，您必须创建一个类 Window 和一个类 Sum。窗口会调用 Sum 的方法来获取结果并显示出来。这样，您将分别开发应用程序的逻辑和 GUI。

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2012-05-31T09:11:03.990

来自 Steve McConnell 的*Code Complete*的解释：

> 内聚是指一个类中的所有例程或例程中的所有代码**支持一个中心目的**的紧密程度。包含 **强相关功能**的类被描述为具有强内聚力，启发式目标是使内聚力尽可能强。内聚是管理复杂性的有用工具，因为类中支持中心目的的代码越多，您的大脑就越容易记住代码所做的一切。

从鲍勃叔叔的*清洁代码*中实现它的一些方法：

> 类应该有**少量的实例变量**。一个类的每个方法都应该操作一个或多个这些变量。一般来说**，一个方法操作的变量越多，该方法**对其类的凝聚力就越大。每个方法都使用每个变量的类具有最大的内聚性。
> 
> 一般来说，创建这种最大凝聚力的类既不可取，也不可能；另一方面，我们希望凝聚力高。当内聚度高时，意味着类的方法和变量是相互依赖的，并且作为一个逻辑整体挂在一起。

内聚的概念与耦合的概念密切相关。此外，还有一个基于高内聚启发式的原则，称为单一责任原则（SOLID 中的 S）。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-05-31T08:52:32.967

高内聚是一个软件工程概念。基本上，它说一个类应该只做它应该做的事情，并且完全做到。不要用它不应该做的函数重载它，任何与它直接相关的东西也不应该出现在其他类的代码中。

示例是相当主观的，因为我们还必须考虑规模。一个简单的程序不应该过于模块化，否则会碎片化；而复杂的程序可能需要更高级别的抽象来处理复杂性。

例如电子邮件类。它应该包含数据成员 to、from、cc、bcc、subject、body，并且可能包含这些方法 saveAsDraft()、send()、discardDraft()。但是 login() 不应该在这里，因为有许多电子邮件协议，应该单独实现。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-10-31T20:41:14.470

凝聚力通常使用 LCOM（缺乏凝聚力）指标之一来衡量，原始 LCOM 指标来自 Chidamber 和 Kemerer。参见例如： http: [//www.computing.dcu.ie/~renaat/ca421/LCOM.html](http://www.computing.dcu.ie/~renaat/ca421/LCOM.html)

一个更具体的例子：如果一个类有一个私有字段和三个方法；当所有三个方法都使用该字段执行操作时，该类具有很强的凝聚力。

内聚类的伪代码：

```
class FooBar {
  private SomeObject _bla = new SomeObject();

  public void FirstMethod() {
    _bla.FirstCall();
  }

  public void SecondMethod() {
    _bla.SecondCall();
  }

  public void ThirdMethod() {
    _bla.ThirdCall();
  }
} 
```

例如，如果一个类具有三个私有字段和三个方法；当所有三种方法只使用三个字段之一时，则该类的凝聚力很差。

内聚性差的类的伪代码：

```
class FooBar {
  private SomeObject _bla = new SomeObject();
  private SomeObject _foo = new SomeObject();
  private SomeObject _bar = new SomeObject();

  public void FirstMethod() {
    _bla.Call();
  }

  public void SecondMethod() {
    _foo.Call();
  }

  public void ThirdMethod() {
    _bar.Call();
  }
} 
```

类做一件事原则是来自 Robert C. Martin的[单一职责原则，是](http://www.objectmentor.com/resources/articles/srp.pdf)[SOLID](http://en.wikipedia.org/wiki/Solid_%28object-oriented_design%29)原则之一。该原则规定一个类应该只有一个改变的理由。

保持单一职责原则可能会导致代码更具凝聚力，但在我看来，这是两件不同的事情。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-31T08:47:35.530

这是一个低内聚的例子：

```
class Calculator
{

     public static void main(String args[])
     {

          //calculating sum here
          result = a + b;
          //calculating difference here
          result = a - b;
          //same for multiplication and division
     }
} 
```

但是高内聚意味着类中的函数做它们应该做的事情（就像它们被命名一样）。而不是某些功能可以完成其他功能的工作。因此，以下可能是高内聚的示例：

```
class Calculator
{

     public static void main(String args[])
     {

          Calculator myObj = new Calculator();
          System.out.println(myObj.SumOfTwoNumbers(5,7));
      }

     public int SumOfTwoNumbers(int a, int b)
     {

          return (a+b);
     }

     //similarly for other operations

} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-01T09:43:24.263

考虑内聚原则的一般方法是，您应该将一个代码与其他依赖于它或依赖于它的代码一起定位。凝聚力可以​​而且应该应用于高于班级水平的构成水平。例如，理想情况下，包或命名空间应包含与某些常见主题相关的类，并且与其他包/命名空间的依赖相比，它们之间的相互依赖程度更高。即保持本地依赖。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-02-28T20:48:56.977

凝聚力一词最初用于描述源代码模块，作为模块源代码相互关联程度的定性度量。凝聚力的概念被用于各种领域。例如，一群人（例如军事单位）可能具有凝聚力，这意味着该单位中的人们为了共同的目标而共同努力。

源代码内聚的本质是模块中的源代码朝着一个共同的、明确定义的目标一起工作。创建模块输出所需的最少源代码在模块中，仅此而已。接口定义明确，输入通过接口流入，输出通过接口流出。没有副作用，强调极简主义。

功能内聚模块的一个好处是开发和自动化单元测试很简单。事实上，一个模块凝聚力的一个很好的衡量标准是为模块创建一整套详尽的单元测试是多么容易。

模块可以是面向对象语言的类，也可以是函数式语言或非面向对象语言（如 C）中的函数。这一测量内聚力领域的许多原始工作主要涉及早在 IBM 的 COBOL 程序。 1970 年代所以凝聚力绝对不仅仅是一个面向对象的概念。

产生内聚概念和相关联的耦合概念的研究初衷是研究程序易于理解、维护和扩展的特点在哪里。目标是能够学习编程的最佳实践，编纂这些最佳实践，然后将这些实践传授给其他程序员。

优秀程序员的目标是在给定环境和要解决的问题的情况下编写内聚性尽可能高的源代码。这意味着在大型应用程序中，源代码主体的某些部分与其他部分的源代码在该模块或类中的内聚程度不同。有时，由于您要解决的问题，您可以获得的最佳效果是时间或顺序凝聚力。

最好的凝聚力是功能凝聚力。具有功能凝聚力的模块类似于数学函数，因为您提供一组输入并获得特定的输出。一个真正的功能模块除了输出之外不会有副作用，也不会保持任何状态。相反，它将具有一个定义明确的接口，该接口封装了模块的功能，而不会暴露模块的任何内部结构，并且使用该模块的人将提供一组特定的输入并获得特定的输出作为回报。一个真正的功能模块也应该是线程安全的。

许多编程语言库包含许多功能模块的示例，无论是类、模板还是函数。最具功能性的内聚示例是数学函数，例如正弦、余弦、平方根等。

其他功能可能会产生副作用或维持某种状态，从而导致这些功能的使用更加复杂。

例如，抛出异常或设置全局错误变量（`errno`在 C 中）或必须按顺序使用（`strtok()`函数是标准 C 库中的一个示例，因为它维护内部状态）或提供指针的函数，然后必须被管理或向某些日志实用程序发出日志都是不再具有功能凝聚力的功能的示例。

我读过 Yourdon 和 Constantine 的原著《结构化编程》，在 1980 年代我第一次接触到内聚的概念，以及 Meil​​ir Page-Jones 的《结构化系统设计实用指南》一书，Page-Jones 在描述方面做得更好耦合和内聚。Yourdon 和 Constantine 的书似乎更具学术性。Steve McConnell 的书 Code Complete 非常好且实用，修订版有很多关于良好编程实践的内容。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-03-07T13:40:44.703

大多数答案都没有解释什么是内聚力，它在鲍勃叔叔的书清洁代码中得到了很好的定义。

> 类应该有少量的实例变量。一个类的每个方法都应该操作一个或多个这些变量。一般来说，一个方法操作的变量越多，该方法对其类的凝聚力就越大。每个方法都使用每个变量的类具有最大的内聚性。一般来说，创建这种最大凝聚力的类既不可取，也不可能；另一方面，我们希望凝聚力高。当内聚度高时，意味着类的方法和变量是相互依赖的，并且作为一个逻辑整体挂在一起。

让我用一个类定义来解释它

```
class FooBar {
private _bla;
private _foo;
private _bar;

function doStuff()

   if(this._bla>10){
     this._foo = 10;
     this._bar = 20;
   }

}
function doOtherStuff(){

    if(this._foo==10){
       this._bar = 100;
       this._bla = 200;
    }
}

} 
```

如果您看到上面的示例，则类是内聚的，这意味着变量在类之间共享以一起工作，更多的变量被共享，这意味着类是高度内聚的并且作为一个单元工作。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-05-31T08:46:00.483

内聚意味着一个类或方法只完成一项定义的工作。方法或类的名称也应该是不言自明的。例如，如果您编写一个计算器，您应该将类​​命名为“calculator”而不是“asdfghj”。您还应该考虑为每个任务创建一个方法，例如subtract() add() 等...将来可能使用您的程序的程序员确切地知道您的方法在做什么。好的命名可以减少评论工作

还有一个原则是 DRY - 不要重复自己

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-05-31T08:46:00.120

[在这种情况下， MSDN](http://msdn.microsoft.com/en-us/magazine/cc947917.aspx)关于它的文章可能比 Wikipedia 提供更多信息。

# selenium - Selenium 测试一个缺少 id 和 title 以及其他敏感信息的 iterface

> ID：10830138
> 
> 赞同：0
> 
> 时间：2012-05-31T08:41:28.247
> 
> 标签：selenium, junit, webdriver

我正在为一个希望我进行 selenium/junit 测试的客户工作，但整个用户界面没有显示任何 html 代码的 id 或页面的标题，只是像“欢迎来到......”这样的内容，如何例如，您要检查一个是在主页上还是在登录页面上？

这是一个html示例：

```
<div class="site-body m-welcome" data-module="welcome">
<div class="inner">
  <h1 class="starred dark"><span>Welcome to ...</span></h1>

  <div class="choices">
    <div class="choice">
      <a href="http://www.alink/account/validate/driver" class="btn btn-primary">Become a xxxxx</a>
    </div>

    <span class="or"><span>Or</span></span>

    <form action="http://www.alink/welcome" method="post" class="choice" data-response-type="json">
              <input type="text" name="plate_number" id="car_plate_validation_plate_number" value="" maxlength="8" class="plate required numberplate" placeholder="Enter number plate">

      <button type="submit" class="btn btn-primary">Become an yyyyy</button>

      <div class="invalid-message inline-modal" data-behavior="modal">
        <h1>Sorry - you are not eligible to join the company</h1>

        <p>See <a href="#">am I eligile?</a> for full eligibility critera.</p>
      </div>
    </form>
  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:52:02.073

您可以使用 XPath 查找几乎所有元素，我不会经常使用它，但在您的情况下（没有任何 ID），您可能需要经常使用它：

```
IWebElement element = driver.FindElement(By.XPath, "//*[text='Welcome in ...']"); 
```

这将为您提供任何类型的第一个元素，其中包含“Welcome in ...”文本

为了检查您是否在某个页面上，我想您必须搜索该页面独有的元素，而不是其他页面。

如果您想要更具体的示例，您需要向我们展示一些 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:56:52.590

html示例：

```
 <div class="site-body m-welcome" data-module="welcome">
    <div class="inner">
        <h1 class="starred dark"><span>Welcome to ...</span></h1>

        <div class="choices">
            <div class="choice">
                <a href="http://www.alink/account/validate/driver" class="btn btn-primary">Become a xxxxx</a>
            </div>

            <span class="or"><span>Or</span></span>

            <form action="http://www.alink/welcome" method="post" class="choice" data-response-type="json">
                                <input type="text" name="plate_number" id="car_plate_validation_plate_number" value="" maxlength="8" class="plate required numberplate" placeholder="Enter number plate">

                <button type="submit" class="btn btn-primary">Become an yyyyy</button>

                <div class="invalid-message inline-modal" data-behavior="modal">
                    <h1>Sorry - you are not eligible to join the company</h1>

                    <p>See <a href="#">am I eligile?</a> for full eligibility critera.</p>
                </div>
            </form>
        </div> 
```

# php - 退出；在 PHP 配置文件中

> ID：10830144
> 
> 赞同：0
> 
> 时间：2012-05-31T08:42:09.103
> 
> 标签：php, exit, exploit

我有一个名为 config.php 的脚本。这个脚本里面是包含 mysql 登录信息等的变量。一些孩子一直说他对我的网站有 root 访问权限，最近我们刚刚听说有泄漏，但不知道是否可以证实。我知道你放了出口；在 header(location:.. to stop script execution; 在这种情况下是否需要同样的事情？如何利用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:47:35.433

如果有人对您的服务器具有 root 访问权限，他可以打开文件并查看密码。此外，他可以重置 mysql root 密码，并获得访问权限。

一些资源：

*   [https://serverfault.com/questions/218138/finding-how-a-hacked-server-was-hacked](https://serverfault.com/questions/218138/finding-how-a-hacked-server-was-hacked)
*   [https://serverfault.com/questions/179876/hacked-by-black-jaguar](https://serverfault.com/questions/179876/hacked-by-black-jaguar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:44:26.783

您应该添加`exit;`after `header(location:...`，这是正确的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T08:44:50.027

有人对您的服务器具有 root 访问权限，永远不会告诉您！在这种情况下，退出对您没有帮助...您的 config.php 的变量将不会显示，因为该文件是由 PHP 解析的。你最好检查服务器日志、进程、shell 历史...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T08:47:32.473

首先，您应该考虑将配置文件放在文档根文件夹之外。

其次，如果您`config.php`没有产生任何输出，使用浏览器访问它会显示一个空白页面。

破坏了您的系统的人基本上可以做任何事情，无论您的脚本中有什么;-)

# java - ResultSet 没有正确定位，也许你需要调用 next

> ID：10830145
> 
> 赞同：0
> 
> 时间：2012-05-31T08:42:12.377
> 
> 标签：java, sql

嗨，我对这段代码有疑问，因为它似乎总是返回 SQL 异常。它工作了几次然后停止并异常返回。所以我不确定出了什么问题。我曾尝试将 vld.close() 更改为不同的地方，所以是的。谢谢

```
PreparedStatement vld = conn.prepareStatement("SELECT * FROM carsharing.available(?,?,?,?)");
        vld.setString(1, carName);
        vld.setString(2, memberUser);
        vld.setTimestamp(3, new java.sql.Timestamp(startTime.getTime()));
        vld.setTimestamp(4, new java.sql.Timestamp(endTime.getTime()));
        System.out.println("test1");
        ResultSet rset = vld.executeQuery();
        System.out.println("test2");
        rset.next();
        int num = rset.getInt("num");
        boolean valid = rset.getBoolean("aval");
        vld.close();
        System.out.println(num);
        System.out.println(valid); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:53:17.553

**1) 验证 SQL**

您能先验证一下 SQL 是否正确吗？这对我来说看起来不正确。您现在尝试执行的是以下 SQL：

```
SELECT * FROM carsharing.available(?,?,?,?) 
```

如果您想通过给定名称限制结果集，用户和时间戳 SQL 应如下所示：

```
SELECT * FROM carsharing WHERE carNameField=? AND memberUserField=? AND tsField1=? AND tsField2=? 
```

您可以将字段名称替换为架构的正确列名。

**2) 结果集导航**

然后，当您在执行后获得结果集时，您可以使用 first() 导航到第一个位置，它还返回布尔值，因此您可以检查是否有可用的结果。如果您想获取更多值，则需要一个循环。

```
//...
ResultSet rset = vld.executeQuery();
if( rset.first()){
   int num = rset.getInt("num");
   boolean valid = rset.getBoolean("aval");   
}
//... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:14:59.573

你需要迭代结果集。你不能因为 `rset.next();` 代码是

```
ResultSet rset = vld.executeQuery();
System.out.println("test2");
while(rset.next()) {
  int num = rset.getInt("num");
  boolean valid = rset.getBoolean("aval");
  System.out.println(num);
  System.out.println(valid);
}
vld.close(); 
```

# javascript - 点击按钮时触发谷歌地图的问题

> ID：10830149
> 
> 赞同：0
> 
> 时间：2012-05-31T08:42:40.250
> 
> 标签：javascript, html, google-maps

我编写了代码，当自动完成输入框中的位置发生变化时显示地图。但我无法将活动从

```
google.maps.event.addListener(autocomplete, 'place_changed', function() {} 
```

单击按钮。我的意思是，我们可以`addListener`通过单击按钮来使用吗？

这是 HTML 部分：

```
<body onload="initialize()">
    <input id="searchTextField" type="text" size="50">
    <input type="button" id="Go" value="Go"/>
    <div id="map_canvas"></div>
</body> 
```

这是Javascript代码：

```
function initialize(){
  var mapOptions = {
    center: new google.maps.LatLng(-33.8688, 151.2195),
    zoom: 13,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  var map = new google.maps.Map(
    document.getElementById('map_canvas'),
    mapOptions);
  var input = document.getElementById('searchTextField');
  var autocomplete = new google.maps.places.Autocomplete(input);
  autocomplete.bindTo('bounds', map);
  var go = document.getElementById('Go');
  var infowindow = new google.maps.InfoWindow();
  var marker = new google.maps.Marker({
    map: map
  });
  google.maps.event.addListener(autocomplete, 'place_changed', function() {
    infowindow.close();
    var place = autocomplete.getPlace();
    if (place.geometry.viewport) {
      map.fitBounds(place.geometry.viewport);
    } else {
      map.setCenter(place.geometry.location);
      map.setZoom(15);
    }
  var image = new google.maps.MarkerImage(
    place.icon,
    new google.maps.Size(71, 71),
    new google.maps.Point(0, 0),
    new google.maps.Point(17, 34),
    new google.maps.Size(35, 35));
  marker.setIcon(image);
  marker.setPosition(place.geometry.location);
  var address = '';
  if (place.address_components) {
    address = [(place.address_components[0] &&
      place.address_components[0].short_name || ''),
    (place.address_components[1] &&
      place.address_components[1].short_name || ''),
    (place.address_components[2] &&
      place.address_components[2].short_name || '')
    ].join(' ');
  }
  infowindow.setContent('<div><strong>' + place.name + '</strong><br>' + address);
  infowindow.open(map, marker);
});
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:54:09.377

document.getElementByid("Go").addEventListener("onclick", yourFunction, false);

yourFunction 可以是示例中的 lambda 函数，也可以是对命名函数的引用（只是它的名称）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:04:00.843

完毕。只需要注释掉`infowindow.close();`

代码：

```
<script type="text/javascript">
var map;
var infowindow;
var autocomplete;
var place;
var input;

function initialize(){
var mapOptions = {
          center: new google.maps.LatLng(-33.8688, 151.2195),
          zoom: 13,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById('map_canvas'),
          mapOptions);
input = document.getElementById('searchTextField');
autocomplete = new google.maps.places.Autocomplete(input);
autocomplete.bindTo('bounds', map);
str = "strr";

infowindow = new google.maps.InfoWindow();
        var marker = new google.maps.Marker(
{
map: map,
}
);

function onGo(){
//infowindow.close();
place = autocomplete.getPlace();

if (place.geometry.viewport) {
map.fitBounds(place.geometry.viewport);
} else {
map.setCenter(place.geometry.location);
map.setZoom(15);
}

var image = new google.maps.MarkerImage(
 place.icon,
 new google.maps.Size(71, 71),
 new google.maps.Point(0, 0),
 new google.maps.Point(17, 34),
 new google.maps.Size(35, 35));
marker.setIcon(image);
marker.setPosition(place.geometry.location);

var address = '';
if (place.address_components) {
address = [(place.address_components[0] &&
place.address_components[0].short_name || ''),
  (place.address_components[1] &&
place.address_components[1].short_name || ''),
  (place.address_components[2] &&
place.address_components[2].short_name || '')
 ].join(' ');
}

infowindow.setContent('<div><strong>' + place.name + '</strong><br>' + address);
infowindow.open(map, marker);
}
</script>
</head>
<body onload="initialize()">
<input id="searchTextField" type="text" size="50">
<input type="button" id="Go" onclick="javascript:onGo()" value="Go"/>
<div id="map_canvas"></div>
</body>
</html> 
```

# html - 锚标签之间有很多空白空间

> ID：10830156
> 
> 赞同：0
> 
> 时间：2012-05-31T08:43:15.500
> 
> 标签：html, jsp, anchor

嗨，我遇到了一个烦人的问题。查看以下代码，在代码中，我有 2 个链接，这些链接根据自定义标签检查的条件出现。问题是当我看到这个页面的 HTML 源代码时，第二个锚点出现在第一个锚点之后 700 行（空行）。任何人请帮我解决这个问题。在此先感谢..

```
<a href="${contextPath}/rts/reports/listOfReports.do"> rts</a>
<s:userHasAccess functionId="<%=ReportsConstants.CFS_LOAD_PLANNING_FNCT_ID%>">             
<jsp:attribute name="yes">
<a href="${contextPath}/lprt/reports/listOfReports.do">lprt</a> 
```

自定义标签执行权限检查并返回 true 或 false。

更新：HTML来源：

```
<a href="/ptp/rts/reports/listOfReports.do"> rts</a> //700 blank lines
<a href="/ptp/lprt/reports/listOfReports.do">lprt</a> 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T07:35:59.780

这在 web.xml 中添加修剪空白指令后起作用。

```
<jsp-property-group>     
<url-pattern>*.do</url-pattern>     
<trim-directive-whitespaces>true</trim-directive-whitespaces>   
</jsp-property-group> 
```

# javascript - 服务器 - 缓存 - 回击时错误只显示代码

> ID：10830158
> 
> 赞同：0
> 
> 时间：2012-05-31T08:43:17.530
> 
> 标签：javascript, ruby-on-rails, caching, passenger, ubuntu-10.04

当我在我构建的应用程序上回击/转发时，最奇怪的事情发生了。它只向我展示了我编写的其中一个 javascriptfile 的原始代码。

这可能是什么主要原因？我不知道从哪里开始，要照顾什么？

该应用程序是一个运行在 Ubuntu 服务器上的 Ruby On Rails，安装了用于处理该应用程序的乘客。

我怀疑它必须与缓存有关？

# jsf - 如何从组件中读取 bean 验证

> ID：10830161
> 
> 赞同：1
> 
> 时间：2012-05-31T08:43:27.013
> 
> 标签：jsf, bean-validation, phaselistener

我正在尝试使用简单的阶段侦听器，使用 uiInputObject.isRequired() 自动将“*”添加到我的 JSF 页面上的必填字段，但这似乎只有在标记中明确设置所需属性时才有效，如下所示：

```
<h:inputText required="true"/> 
```

这可以通过 JSF-303 bean 验证来实现吗？请注意，GET 需要此信息，而不是 POST。例子

模型类

```
@NotNull
private String myField; 
```

标记

```
<h:inputText value="#{myBean.myField"/> <!-- required field --> 
```

# php - 调用未定义的方法 Fuel\Core\Validation::errors()

> ID：10830166
> 
> 赞同：0
> 
> 时间：2012-05-31T08:43:56.583
> 
> 标签：php, fuelphp

当我想在fuelphp框架中验证我的表单时遇到问题

这是我在控制器中的代码

```
 /*
   * for getting request param for client and save to database
   */
  public function action_input(){
     $data = array();
     //checking method from client
     if(Input::method() == 'POST'){
        $val = Validation::forge();
        $val->add('name','Name')
           ->add_rule('required');
        $val->add('age','Age')
           ->add_rule('required');
        $val->add('alamat','Alamat')
           ->add_rule('required');
        $val->add('email', 'Email address')->add_rule('match_value', 'msofyancs@gmail.com', true)->add_rule('valid_email');

        if($val->run()){
           $data['name'] = Input::post('name');
           $data['body'] = Input::post('age');
           $data['alamat'] = Input::post('alamat');
           $data['email'] = Input::post('email');
        }else{
           $data['error'] = $val->errors('name')->get_message('The field :label must be filled out before auth is attempted.');
        } 
      return View::forge('testing/result', $data); 
     }
  } 
```

如果我输入的验证是真的（所有字段都是正确的）那没问题，但是当任何字段不正确时我会出现这样的错误

```
ErrorException [ Error ]: Call to undefined method Fuel\Core\Validation::errors() 
```

和指向此代码的调试器

```
$data['error'] = $val->errors('name')->get_message('The field :label must be filled out before auth is attempted.'); 
```

我不知道发生了什么，但我仍然在语句顶部声明 $val 但错误未定义，有人知道吗？

我是fuelPHP框架的新手，也许你可以给我建议如何在fuelphp框架中验证表单，比如更好......谢谢你的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:09:28.957

从[手册](http://docs.fuelphp.com/classes/validation/validation.html#config)：

```
// get an array of validation errors as field => error pairs
$errors = $val->error(); 
```

# ajax - 等待慢速重定向消息

> ID：10830172
> 
> 赞同：0
> 
> 时间：2012-05-31T08:44:26.967
> 
> 标签：ajax, submit, message

我有以下代码：

```
<?PHP

  if (isset($_POST['submit'])) {
    header("Location: http://mysite.com");
  }

?>

<form name="form1" action="" method="post"> 
  Name: <input name="name" type="text"> 
  <input type="submit" value="submit" name="submit">
</form> 
```

问题是当我提交表单时，重定向到 mysite.com 需要很长时间，5-10 秒。我想显示一个消息“正在加载...请稍候”，然后显示一个动画图像，以便我知道正在发生一些事情。

我如何在 javascript och ajax 中进行操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:56:24.497

我不知道这是否可能（但我不这么认为）但你可以添加 exit(); 在设置标题之后，脚本的其余部分不会执行并发送到浏览器。这样可以减少一点时间。

您可以尝试使用 javascript 而不是 http 标头进行重定向。

```
<?php if (isset($_POST['submit'])): ?>
<script>
  alert('Loading... Please wait');
  document.location.href = 'http://mysite.com';
</script>
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:01:11.740

你应该有这样的东西加载有图像 GIF 移动直到 ajax 请求结束然后加载变为隐藏结果在屏幕上显示数据库结果网格搜索

```
<tr valign="top">
        <td id="results" colspan="8" align="center" width="100%" height="250px">
    </td>
</tr>

<tr valign="top" id="loading" style="display:none;">
    <td colspan="8" width="100%" align="center">
      <img name="loading_image" src="images/loading.gif" border="0" width="214" height="200">
    </td>
</tr> 
```

```
function search(tableEvent){
              try
              {

                  document.getElementById('loading').style.display="";

                  var params = 'formAction=' + document.mainForm.formAction.value;
                  params += '&tableEvent=' + tableEvent;
                  params += '&txtActionDivisionDesc=' + document.mainForm.txtActionDivisionDesc.value;

                  createXmlHttpObject();

                  sendRequestPost(http_request,'Controller',false,params);

                  ValidationResult();
              }
              catch(e)
              {

                  alert(e.message);
              }

          }

function ValidationResult()
          {
              try
              {
                  if (http_request.readyState == 4)
                  {
                      var errors = http_request.responseText;
                      errors = errors.replace(/[\n]/g, '');

                      if (window.ActiveXObject)
                      {// code for IE
                          xmlRecords=new ActiveXObject("Microsoft.XMLDOM");
                          xmlRecords.loadXML(errors);
                      }
                      else
                      {
                          xmlRecords=document.implementation.createDocument("","",null);
                          parser=new DOMParser();
                          xmlRecords=parser.parseFromString(errors,"text/xml");
                      }

                      document.getElementById('loading').style.display="none";

                      document.getElementById('results').innerHTML = errors;

                      http_request = false;
                  }
              }//end try
              catch(e)
              {
                  document.getElementById('results').innerHTML = errors;
                  return;
              }
          } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T09:04:34.767

5-10 秒提交页面。首先要弄清楚为什么要花这么多时间。

无论如何，如果您只想在按下提交按钮时看到一些消息，那么您可以简单地添加任何 div（最初是隐藏的）。单击提交按钮后，您可以显示此 div。

查看示例代码：

```
<?PHP

  if (isset($_POST['submit'])) {
    header("Location: http://mysite.com");
  }

?>

 <div id='loadingDIV' style='display: none;'></div>

<form name="form1" action="" method="post"> 
  Name: <input name="name" type="text"> 
  <input type="submit" value="submit" name="submit" onclick='showLoadingAndSubmit();'>
</form> 
```

* * *

```
 function showLoadingAndSubmit(){
        document.getElementById ('loadingDIV').innerHTML = 'Form submitting. Please wait...';
document.getElementById ('loadingDIV').style.display = 'block';
        return true;
    } 
```

# asp.net-mvc-3 - MVC3 角色下拉框

> ID：10830173
> 
> 赞同：0
> 
> 时间：2012-05-31T08:44:39.587
> 
> 标签：asp.net-mvc-3, selectlistitem

我正在尝试将角色添加到下拉框，但我得到了下面的错误。请帮忙。

型号代码

```
 public SelectListItem RolesForUser {get; set;} 
```

控制器代码

```
 var roles = Roles.GetRolesForUser(model.username);
 model.RolesForUser=roles.select(m => new SelectListItem() 
 {Value=m.ToString(),Text=m.ToString()}); 
```

错误 21 无法将类型“System.Collections.Generic.IEnumerable”隐式转换为“System.Web.Mvc.SelectListItem”。存在显式转换（您是否缺少演员表？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:51:16.567

将 RolesForUser 声明为`List<SelectListItem> RolesForUser`并将 LINQ 查询更改为

```
model.RolesForUser=roles.select(m => new SelectListItem() {Value=m.ToString(),Text=m.ToString()}).ToList(); 
```

# c# - VS2010，C#，将参数批量传递到线程，速度问题

> ID：10830175
> 
> 赞同：1
> 
> 时间：2012-05-31T08:44:42.540
> 
> 标签：c#, multithreading, visual-studio-2010, .net-4.0

我有下面的代码，它更新列表视图中的数据，我试图将参数传递到更新列表视图表的主代码中。

我有可以发送突发数据流的外部代码，它在列表中显示相同的值。

以下基于匿名方法，该方法有效，但较早的数据被覆盖。

列表视图太慢了，这会减慢主程序（此处未列出），突发数据会转到此代码并使用单独的线程来处理显示（大约 20 组）。突发数据约为20组dataTX阵列等。

我愿意建议如何解决这个问题。

==================================================== =========================

```
 public void LIN_Request_Add_Message(bool isCRCIncluded)           // This Add new line for request based message.
    {
        byte[] dataTX = new byte[10];
        dataTX = myLinTools.LinArrayTXArray();
        DateTime d = DateTime.Now;

        this.ReqAddMessageThread = new Thread(delegate() { ReqAddMessageThreadProc(isCRCIncluded, dataTX, d); });          //anonymous method
        this.ReqAddMessageThread.Start();
    }
    #endregion

    private void ReqAddMessageThreadProc(bool isCRCIncluded, byte[] dataTX, DateTime d)
    {
        if (this.OutputView.InvokeRequired)
        {
            test1Callback del = new test1Callback(ReqAddMessageThreadProc);
            this.Invoke(del, new object[] { isCRCIncluded, dataTX,d });
            return;
        }

        if (this.Visible == true)
        {
            SendMessage(this.Handle, WM_SETREDRAW, false, 0);
        }

        int length = myLinTools.LINDataLength;
        int pCRC = 0;
        elem = new ListViewItem(m_Item.ToString());

        elem.SubItems.Add(d.Date.ToShortDateString());
        elem.SubItems.Add(d.ToShortTimeString() + ":" + d.Second.ToString());
        elem.SubItems.Add("");
        for (int i = 0; i < length + 1; i++)
        {
            elem.SubItems.Add(dataTX[i].ToString("X2"));
            pCRC = i;
        }
        for (int i = length; i < 8; i++)
        {
            elem.SubItems.Add("  ");  // fill gaps
        }
        if (isCRCIncluded == true)      // Does the message contains processed CRC data?
        {
            elem.SubItems.Add(dataTX[pCRC + 1].ToString("X2"));
        }
        else                            // No, then make one for display only!!
        {
            Byte CRC = myLinTools.CRC_Processor(false);
            elem.SubItems.Add(CRC.ToString("X2"));
        }
        this.OutputView.Items.Add(elem);
        this.OutputView.EnsureVisible(m_Item);
        if (myLinTools.IsRequestResponse == true)       // Request Message Only
        {
            if (this.Visible == true)                   // Is form open?
            {
                SendMessage(this.Handle, WM_SETREDRAW, true, 0);
                this.Refresh();
            }
        }
        m_Item++;
    } 
```

==================================================== ================================

感谢 KazR，我修改了运行良好的代码，但是它减慢了其他高级程序（称为主程序）的速度，使数据传输到显示数据的程序。此显示程序中的列表视图导致主程序无延迟或暂停地流式传输数据的要求之一。这就是为什么我正在寻找使用线程的方法，因此它将控制释放回主程序，从而运行得更快，但是由于 listview 很慢，因此存在防止数据被下一个线程覆盖的问题。也许我应该考虑一个缓冲区，它仅在主程序中没有活动时更新。

我不想使用虚拟，我愿意接受其他建议。

==================================================== =================================

```
delegate void ReqAddMessageTCallback(bool isCRCIncluded, byte[] dataTX, DateTime d);
#region//==================================================LIN_Request_Add_Message
public void LIN_Request_Add_Message(bool isCRCIncluded)           // This Add new line for request based message.
{
    byte[] dataTX = new byte[10];
    dataTX = myLinTools.LinArrayTXArray();
    DateTime d = DateTime.Now;
    ReqAddMessageThreadProc(isCRCIncluded, dataTX, d);

}
#endregion

#region//==================================================ReqAddMessageThreadProc
private void ReqAddMessageThreadProc(bool isCRCIncluded, byte[] dataTX, DateTime d)
{
    if (this.OutputView.InvokeRequired)
    {
        ReqAddMessageTCallback del = new ReqAddMessageTCallback(ReqAddMessageThreadProc);
        this.BeginInvoke(del, new object[] { isCRCIncluded, dataTX, d });
        return;
    }

    if (this.Visible == true)
    {
        SendMessage(this.Handle, WM_SETREDRAW, false, 0);
    }

    int length = myLinTools.LINDataLength;
    int pCRC = 0;
    elem = new ListViewItem(m_Item.ToString()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:46:39.797

从您的代码示例看来，您每次接收数据时都在创建一个新的 Thread 对象，并且该线程所做的所有事情都是调用 ReqAddMessageThreadProc 方法。假设没有在主 UI 线程中调用 LIN_Request_Add_Message，您可以尝试删除线程创建和启动调用，将它们替换为直接调用 ReqAddMessageThreadProc 并使用 BeginInvoke 而不是 Invoke。

例如

```
public void LIN_Request_Add_Message(bool isCRCIncluded)           // This Add new line for request based message.
{
    byte[] dataTX = new byte[10];
    dataTX = myLinTools.LinArrayTXArray();
    DateTime d = DateTime.Now;

    ReqAddMessageThreadProc(isCRCIncluded, dataTX, d);

}
#endregion

private void ReqAddMessageThreadProc(bool isCRCIncluded, byte[] dataTX, DateTime d)
{
    if (this.OutputView.InvokeRequired)
    {
        test1Callback del = new test1Callback(ReqAddMessageThreadProc);
        this.BeginInvoke(del, new object[] { isCRCIncluded, dataTX,d });
        return;
    } 
```

ETC...

BeginInvoke 调用是 Invoke 的异步版本，这应该消除每次接收新数据时使用单独的新线程对象的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:04:50.160

你应该让你的 ListView 虚拟。然后你可以用你的线程全速操作，列表视图将只显示当前可见的项目。如果您确实将内容附加到 ListView 而不是每次添加内容时都强制使其可见，您可以让用户决定他何时想要向下滚动。他确实看到了什么时候添加了东西，因为在添加项目时滚动条变得越来越小。

通过这种方式，您可以毫无问题地显示数百万个条目，并且您将摆脱通过 SendMessage 调用、重绘、刷新列表视图。这是一个[虚拟列表视图示例](http://geekswithblogs.net/akraus1/archive/2010/06/21/140545.aspx)，您可以如何更改它。

通过这样做，您的代码将变得更简单和更快，因为您不会将后台数据处理与 UI 内容混合在一起。例如，排序可以在原始数据数组级别完成，而无需在 UI 中执行任何操作，除非触发它。

# android - 安卓电池使用情况

> ID：10830180
> 
> 赞同：2
> 
> 时间：2012-05-31T08:44:58.230
> 
> 标签：android, power-management

我的目标是确定我的应用程序是否存在电池问题，因此我想添加一个模块来检查每个间隔时间我的应用程序电池使用百分比。

**如何按百分比检索每个应用程序（或至少我的应用程序）的电池使用值？** 我在堆栈溢出中看到几个答案说没有办法......

我能做点什么吗？甚至反思对我也有好处。

此外，是否有任何**好的**开发工具可以帮助我调查我的应用程序电池消耗？（按组件，即 wifi、gps、gsm 等）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T14:00:29.703

BatteryIndi​​cator的作者在他的[FAQ-How_does_Battery_Indicator_work](http://code.google.com/p/battery-indicator/wiki/FAQ#How_does_Battery_Indicator_work?_/_How_does_it_know_what_percent)[中写道。](https://play.google.com/store/apps/details?id=com.darshancomputing.BatteryIndicator&hl=en)

> 电池指示灯如何工作？/ 它如何知道电池电量的百分比？
> 
> Android 系统有一种机制，您可以在其中注册您的应用程序，以便在电池状态更改时收到通知。因此，Battery Indicator 有一个后台服务，该服务在技术上始终在运行，但本质上始终处于休眠状态并且基本上不使用系统资源（因为它不进行任何轮询——它只是休眠并等待操作系统在发生变化时通知），然后当电池电量（或插入状态）发生变化时，系统会唤醒它并告诉它新的电池电量（和状态）是什么。然后只需几毫秒即可更改其图标以反映当前充电（和状态）并重新进入睡眠状态。
> 
> 如果您以技术为导向，Battery Indicator 使用的核心 API 的文档在这里：http: [//developer.android.com/reference/android/os/BatteryManager.html](http://developer.android.com/reference/android/os/BatteryManager.html) 以及开发版本的实际源代码应用程序在这里：[http](http://code.google.com/p/battery-indicator/source/browse/trunk) ://code.google.com/p/battery-indicator/source/browse/trunk 。

该应用程序显示不同模块的消耗

```
 Phone in Standby 59%
 Akku in Standby 39%
 Display 4% 
```

但我不知道这是如何实现的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:50:55.977

> 如何按百分比检索每个应用程序（或至少我的应用程序）的电池使用值？

抱歉，Android SDK 中没有任何内容。

> 此外，是否有任何好的开发工具可以帮助我调查我的应用程序电池消耗？（按组件，即 wifi、gps、gsm 等）

购买 Qualcomm MDP 并使用 Trepn。不幸的是，这很昂贵。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T17:32:29.930

从 Android Market 下载“Dr. Power”。这个应用程序是由一家有确切问题的公司开发的。

# node.js - 处理 res.render() 中的翡翠错误

> ID：10830183
> 
> 赞同：0
> 
> 时间：2012-05-31T08:45:04.540
> 
> 标签：node.js, error-handling, express, pug

我有一个基于 node.js / express 的工作服务器，并且正在使用 jam 进行模板。通常没有问题，但每天有几次我在请求任何页面时都会收到一条错误消息。错误是“未能找到视图”。我不知道为什么我会收到此错误，因为它在几分钟前还可以正常工作。

然而，问题是我如何才能在这个事件上强制崩溃，例如：

```
res.render('index.jade', {info: 'msg'}, function(error, ok) {
    if (error)
        throw new Error('');
    // Proceed with response
}; 
```

我该怎么做？我将如何进行响应？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-11T00:24:39.173

您可以添加错误处理中间件。

```
app.use(function handleJadeErrors(err, req, res, next) {
  // identify the errors you care about
  if (err.message === 'failed to locate view') {
    // do something sensible, such as logging and then crashing
    // or returning something more useful to the client
  } else {
    // just pass it on to other error middleware
    next(err);
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-10T22:45:53.620

尝试这个：

```
app.use(function (req, res, next) {
    fs.exists(__dirname + '/views/' + req.url.substring(1) + '.jade', function (exists) {
      if(!exists) {
        console.log(err);
        return next();
      }
      res.render(req.url.substring(1), { title: "No Controller", user: req.session.user });
    }
}); 
```

# java - 正则表达式拆分骆驼案例 - 使用数字

> ID：10830184
> 
> 赞同：1
> 
> 时间：2012-05-31T08:45:04.877
> 
> 标签：java, regex, camelcasing

我想使用正则表达式将 camelCase 名称拆分为单个名称，以执行拼写检查。

拆分应如下所示：

1）extendedStructureForNUB --> 扩展，结构，For，NUB

2) extendedStructureFor2004 --> 扩展，结构，For，2004

使用以下问题的答案，我可以针对第一个条件进行拆分。

***问题***： [RegEx 拆分 camelCase 或 TitleCase（高级）](https://stackoverflow.com/questions/7593969/regex-to-split-camelcase-or-titlecase-advanced)

但是对于包含数字的字符串（第二个条件），它不会按格式返回。

```
extendedStrctureFor2004 --> extended, Structure, For2004 
```

请提出一种我可以重用此正则表达式来拆分数字的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T08:53:41.403

```
public static void main(String[] args) 
{     
    for (String w : "camelValue".split("(?<!(^|[A-Z0-9]))(?=[A-Z0-9])|(?<!^)(?=[A-Z][a-z])")) {
         System.out.println(w);
    } 
} 
```

编辑：更正 UPPER2000UPPER 的大小写，正则表达式变为：

```
public static void main(String[] args) 
{     
    for (String w : "camelValue".split("(?<!(^|[A-Z0-9]))(?=[A-Z0-9])|(?<!(^|[^A-Z]))(?=[0-9])|(?<!(^|[^0-9]))(?=[A-Za-z])|(?<!^)(?=[A-Z][a-z])")) {
         System.out.println(w);
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T08:49:08.177

```
public static void main(String[] args)
{
    for (String w : "extended2004FeeStructure".split("(?<!(^|[A-Z0-9]))(?=[A-Z0-9])|(?<!^)(?=[A-Z][a-z])")) {
        System.out.println(w);
    }
} 
```

更正了一个

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T09:31:26.527

我看到的是您之前问题的答案几乎是不完美的。如果我知道你，我只会添加另一个拆分操作，但这次是在每个单词中间的第一个数字之前。

这是示例：

```
String data="2Hello2000WORLDHello2000WORLD";
//your previois split
String[] myFirstSplit=data.split("(?<!(^|[A-Z]))(?=[A-Z])|(?<!^)(?=[A-Z][a-z])");

//I will store split results in list (I don't know size of array)
List<String> list=new ArrayList<>();
for (String s:myFirstSplit){
    //if splited word contains digit after letter then split
    for (String tmp:s.split("(?<=[a-zA-Z])(?=[0-9])"))
        list.add(tmp);
}
System.out.println(list);
//out [2, Hello, 2000, WORLD, Hello, 2000, WORLD] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T08:53:13.327

在你分开这个之后

extendedStrctureFor2004 --> 扩展，结构，For2004

**将其存储在诸如“arr”之类的数组中**

使用这个正则**表达式**

**var numberPattern = /[0-9]+/g; var numMatch=arr[i].match(numberPattern);**

现在 numMatch 将包含你想要的数字..

# performance - Windows 7 上的 Subversion 慢得让人难以忍受

> ID：10830186
> 
> 赞同：9
> 
> 时间：2012-05-31T08:45:10.477
> 
> 标签：performance, svn, windows-7, tortoisesvn, visualsvn-server

我的公司目前在 Windows XP 上使用 TortoiseSVN 1.6.16 32 位通过 HTTPS 连接到位于同一网络（无代理）的 Windows Server 2003 上运行的 VisualSVN-Server 2.1.19。我们使用自签名证书和使用 Windows 凭据的 Kerberos 身份验证（我想这是 VisualSVN 特有的功能）。在此设置中，一切正常。

当我的公司决定迁移到 Windows 7 时，我们在 Windows 7 64 位上尝试了 TortoiseSVN 1.7.6 64 位，结果出现以下问题：

*   任何涉及服务器的操作（repo-browser、checkout、update、checkin、...）都非常慢，例如
    *   打开 repo 浏览器（10 个项目）：15 分钟
    *   更新 50 个文件的新签出：1 分钟
    *   签入单个空文件：30 秒
*   乌龟交替显示正常传输速度和 0 字节/秒。许多小文件似乎比一些大文件慢。
*   使用 neon 作为 http-lib 时连接慢导致各种失败（serf 仍然很慢，但操作成功完成且没有错误）
*   EasySVN、SmartSVN 和 TortoiseSVN 附带的 SVN 命令行客户端显示相同的行为。与 TortoiseSVN 1.6.16 64 位相同。
*   将服务器协议更改为 HTTP（无 SSL）并不能改善这种情况

另一方面

*   Windows XP 上的 TortoiseSVN 1.7.6 32 位在我们的服务器上运行良好
*   通过浏览器/WebDAV 访问即使在 Windows 7 下也能正常工作
*   服务器端日志不显示错误甚至警告

我发现几个帖子也抱怨 Windows 7 上的缓慢行为，但它们不符合我的要求，因为它们是本地操作或仅限于 TortoiseSVN。

由于没有迹象表明 Windows 7 上的 Subversion 存在一般问题，我怀疑这可能是我们操作系统的网络参数或协议版本。是否有任何已知会影响 Subversion 性能的参数？

我不得不承认我不熟悉 Subversion（或者更确切地说是 neon/serf）是如何依赖操作系统以及依赖于哪些部分的。任何有关这方面的信息将不胜感激。

我应该测试的 subversion 'servers' 文件中是否有任何参数？您如何看待 Wiresharking 连接对我有帮助的机会？

欢迎类似的经验、意见、提示、帮助和吸管。

Wireshark 显示 ca 的零星间隙。TCP 流中的 5 秒显然是由 VisualSVN 服务器引起的。

*   https：服务器确认客户端问候，然后等待 5 秒，然后再发送服务器问候
*   https：服务器确认客户端密钥，然后在提供其加密握手数据之前需要 5 秒
*   https：即使在握手之外，服务器有时也会发送一个 ACK​​（在 TCP 级别），然后等待 5 秒，然后再将某些内容发送回客户端（数据是加密的，因此很难判断中断是否发生在某个感兴趣的点）
*   http：在 NTLM 身份验证期间在两个服务器端传输
*   http：在服务器发送 FIN 标志之前

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T16:12:32.497

Windows 7 对旧服务器的典型失败是 IPv6 网络。

如果您的机器没有侦听 IPv6 地址的 SVN 服务器，Windows 7 可能仍会首先尝试进行 TCP6 连接（如果您在尝试操作时查看 TortoiseSVN 进程的打开套接字，则可以在[Process Explorer](https://en.wikipedia.org/wiki/Process_Explorer)中看到它），这有几秒钟的超时，然后用 IPv4 重试。

简单的解决方案是将您的服务器升级到支持 IPv6 的服务器，或者为 Windows 7 客户端禁用 IPv6。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T18:01:44.000

您可以验证的另一件事（上面的答案对我们不起作用）是 Internet Explorer 设置，特别是如果您有 IE9。我们发现通过禁用 中的选项`Automatically detect settings`，`Internet Options -> Connection tab -> LAN settings`SVN 又开始正常工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-17T06:01:35.583

这个问题从未得到妥善解决。最有可能的是，客户端和服务器之间的公司内部网络路径出现了某种故障。当我们将 SVN 服务器移到另一台机器上时，这件事就过时了。即使在 Windows 7 中，服务器和客户端的相同设置现在也可以正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-06T16:12:52.503

我有相同的症状，即存储库浏览速度非常慢、更新速度慢、一切都变慢。

我的 SVN 服务器有两个以太网卡，所以它有两个以太网 IP 地址。SVN 服务器只监听其中一个 IP 地址。因此，通过 WINS 或 NetBIOS 的名称解析可能会解析为“错误”的 IP 地址。

TortoiseSVN 会重试，最终名称解析会找到“正确”的 IP 地址，然后一切正常。

# java - 标题栏在 JInternalFrame 上无法正常工作

> ID：10830193
> 
> 赞同：1
> 
> 时间：2012-05-31T08:45:49.097
> 
> 标签：java, swing, jframe, jinternalframe

我有一个 JInternalFrame 类，其构造函数如下所示：

```
public MyInternalFrame() {
        super("Name");
        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(AutogeneFrame.class.getName()).log(Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            Logger.getLogger(AutogeneFrame.class.getName()).log(Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            Logger.getLogger(AutogeneFrame.class.getName()).log(Level.SEVERE, null, ex);
        } catch (UnsupportedLookAndFeelException ex) {
            Logger.getLogger(AutogeneFrame.class.getName()).log(Level.SEVERE, null, ex);
        }

        initComponents();

    } 
```

问题是应该在窗口左上角的最大化、最小化和退出按钮没有显示出来。但是，标题“名称”确实显示在标题栏的中心。我在 Mac 上，而不是所有窗口左上角的三个小圆圈（红色、黄色和绿色），它们只是显示为三个不可点击的灰色小圆圈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T11:15:49.117

您正在构建“创建具有指定标题[`JInternalFrame`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JInternalFrame.html#JInternalFrame%28java.lang.String%29)的不可调整大小、不可关闭、不可最大化、不可图标化”。`JInternalFrame`你想要这样的：

```
super("Name", true, true, true, true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T11:16:56.450

不要调用`UIManager.setLookAndFeel()`框架的构造函数。而是在创建框架之前并从 EDT 使用`SwingUtilities.invokeLater()`.

# google-chrome - 安装扩展后如何打开新标签页？

> ID：10830202
> 
> 赞同：4
> 
> 时间：2012-05-31T08:46:37.770
> 
> 标签：google-chrome, google-chrome-extension

安装扩展程序后，我需要打开一个新选项卡（指向显示如何使用我的扩展程序的链接）。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-31T08:51:52.323

您可以让后台页面`hasSeenIntro`在页面加载时检查本地存储中的密钥，每次加载浏览器以及安装浏览器时都会发生这种情况。如果它在那里，则用户已经看到了介绍性插页式广告，如果没有，则向他们显示页面（使用[`chrome.tabs.create`](http://code.google.com/chrome/extensions/tabs.html#method-create)）然后设置密钥。

在你的 background.html 中的某个地方：

```
if (!window.localStorage.getItem('hasSeenIntro')) {
  window.localStorage.setItem('hasSeenIntro', 'yep');
  chrome.tabs.create({
    url: '/help.html'
  });
} 
```

您可以扩展它以显示扩展中每个新主要版本/功能的介绍，不仅检查本地存储中键的存在/不存在，还检查值（例如，最后看到的功能页面）。

不过要小心，每次扩展程序更新时显示一个页面可能会很烦人。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-07-11T09:36:53.803

您可以使用 onInstalled 侦听器。当用户安装 Chrome 扩展时，它只会打开一次 options.html。

```
chrome.runtime.onInstalled.addListener(function (){
    chrome.tabs.create({url:chrome.extension.getURL("options.html")},function(){})
}) 
```

# php - PHP - 最佳实践 - 网站模板

> ID：10830210
> 
> 赞同：1
> 
> 时间：2012-05-31T08:46:52.693
> 
> 标签：php, templates

我只是想看看我构建网站模板的方式是否是最好和最动态的方式。目前我有我的网站播放，但是对于我想要更改内容的区域，我使用以下代码。

```
<? 
 if (preg_match("/\W/",$page) || !file_exists("../$page.html")) {
  include("../home.html");
 }
 else {
  include("../$page.html");
 }
?> 
```

然后导航通过说类似的话链接到该页面，

```
<a href="index.php?page=about">About</a> 
```

这是使用 PHP 构建模板的最佳方法还是有更好的方法？感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T09:02:43.737

没有创建网站模板的最佳或最动态的方法。

你所能做的就是从经验和其他人中学习。

您的代码是在模板之间切换的一种方式。一些直接的改进可能是：

*   使用 && 代替 || 由于 AND 运算符的短路特性。如果页面不匹配，则无需进行文件检查

*   使用数组查找表将页面值映射到文件名模板（例如，'home'->'homepage.html' 等），这主要有助于防止将外部输入用于文件路径的严重漏洞。

*   不要文件检查，因为为什么有一个不存在的模板的链接？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:10:06.533

与其像这样从头开始编写（而且 IMO 也不那么漂亮或动态），不如看看框架是如何做到的。大多数框架都有（好的、漂亮的、动态的、可扩展的，等等）模板机制，无论是纯 PHP 还是使用 3rd 方引擎。

# html - 如何将另一个目录中的 html 文件作为 ActionResult 提供

> ID：10830212
> 
> 赞同：36
> 
> 时间：2012-05-31T08:46:58.663
> 
> 标签：html, asp.net-mvc, actionresult, controller-action

我有一个专门的案例，我希望从控制器操作中提供一个直接的 html 文件。

我想从 Views 文件夹以外的其他文件夹提供它。该文件位于

```
Solution\Html\index.htm 
```

我想通过标准的控制器动作来服务它。我可以使用返回文件吗？我该怎么做？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-31T10:54:22.217

看一下这个 ：

```
 public ActionResult Index()
    {
        return new FilePathResult("~/Html/index.htm", "text/html");
    } 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-05-31T09:30:21.420

如果你想在浏览器中呈现这个 index.htm 文件，那么你可以像这样创建控制器动作：

```
public void GetHtml()
{
    var encoding = new System.Text.UTF8Encoding();
    var htm = System.IO.File.ReadAllText(Server.MapPath("/Solution/Html/") + "index.htm", encoding);
    byte[] data = encoding.GetBytes(htm);
    Response.OutputStream.Write(data, 0, data.Length);
    Response.OutputStream.Flush();
} 
```

或者只是：

```
public ActionResult GetHtml()
{
    return File(Server.MapPath("/Solution/Html/") + "index.htm", "text/html"); 
} 
```

所以假设这个动作在*Home*控制器中，一些用户点击[http://yoursite.com/Home/GetHtml](http://yoursite.com/Home/GetHtml)然后 index.htm 将被渲染。

**编辑：其他2种方法**

如果您想在浏览器中查看*index.htm*的原始 html ：

```
public ActionResult GetHtml()
{
    Response.AddHeader("Content-Disposition", new System.Net.Mime.ContentDisposition { Inline = true, FileName = "index.htm"}.ToString());
    return File(Server.MapPath("/Solution/Html/") + "index.htm", "text/plain"); 
} 
```

如果您只想下载文件：

```
public FilePathResult GetHtml()
{
    return File(Server.MapPath("/Solution/Html/") + "index.htm", "text/html", "index.htm"); 
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-05-04T20:39:59.617

我扩展了 wahid 的答案以创建 HtmlResult

创建扩展 FilePathResult 的 Html 结果

```
public class HtmlResult : FilePathResult
{
    public HtmlResult(string path)
        : base(path, "text/html")
    {
    }
} 
```

在控制器上创建静态方法

```
public static HtmlResult Html(this Controller controller, string path)
{
    return new HtmlResult(path);
} 
```

像我们返回视图一样使用

```
public HtmlResult Index()
{
    return this.Html("~/Index.html");
} 
```

希望能帮助到你

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-31T09:01:50.687

我想把我的两分钱放进去。我发现这个最简洁，它已经在那里了：

```
public ActionResult Index()
{
     var encoding = new System.Text.UTF8Encoding();
     var html = ""; //get it from file, from blob or whatever
     return this.Content(html, "text/html; charset=utf-8");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T09:29:13.887

您可以读取字符串中的 html 文件并将其返回吗？它呈现为 Html 页面，如下所示：

```
public string GetHtmlFile(string file)
{
    file = Server.MapPath("~/" + file);
    StreamReader streamReader = new StreamReader(file);
    string text = streamReader.ReadToEnd();
    streamReader.Close();
    return text;
} 
```

主页/GetHtmlFile?file=Solution\Html\index.htm

如果 HTML 文件的目标或存储机制很复杂，那么您可以使用[虚拟路径提供程序](http://msdn.microsoft.com/en-us/library/system.web.hosting.virtualpathprovider.aspx)

[虚拟路径提供程序 MVC 示例](http://padcom13.blogspot.in/2009/04/virtualpathprovider-example.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-15T09:14:33.273

如果使用 .net 核心，另一种方法是使用 FileProvider。这些文件可以在文件夹中或在编译时嵌入。

在本例中，我们将使用嵌入文件。

在你的项目中添加一个文件夹，比如说资产，在其中创建一个文件 myfile.html，向文件中添加一些基本的 html 说

```
<html>
<head>
  <title>Test</title>
</head>
<body>
   Hello World
</body>
</html> 
```

右键单击新文件（假设您在 Visual Studio 中）选择属性，在属性屏幕/构建操作中，选择嵌入式资源。它会将文件添加到 csproj 文件中。

右键单击您的项目，编辑您的 csproj 文件。检查您的属性组是否包含以下内容：

```
<GenerateEmbeddedFilesManifest>true</GenerateEmbeddedFilesManifest> 
```

如果没有请添加。csproj 还应包含新创建的 html 文件，如下所示：

```
 <ItemGroup>
    <EmbeddedResource Include="assets\myfile.html" />
  </ItemGroup> 
```

要读取控制器中的文件并将其传递给客户端，需要将文件提供程序添加到 startup.cs

编辑您的 startup.cs 确保它包含 HostingEnvironment：

```
private readonly IHostingEnvironment HostingEnvironment;
public Startup(IHostingEnvironment hostingEnvironment)
{
     HostingEnvironment = hostingEnvironment;
} 
```

然后创建一个文件提供者并使其成为可以在运行时注入的服务。如下创建它：

```
 var physicalProvider = HostingEnvironment.ContentRootFileProvider;
 var manifestEmbeddedProvider =
      new ManifestEmbeddedFileProvider(Assembly.GetEntryAssembly());
 var compositeProvider =
      new CompositeFileProvider(physicalProvider, manifestEmbeddedProvider);

 services.AddSingleton<IFileProvider>(compositeProvider); 
```

要将文件提供给您的控制器，请使用依赖注入来获取 FileProvider，创建新服务并提供文件。为此，从依赖注入开始，将提供程序添加到您的构造函数中。

```
IFileProvider _fileProvider;
public MyController(IFileProvider fileProvider)
{
    this._fileProvider = fileProvider;
} 
```

然后在您的服务中使用文件提供程序

```
[HttpGet("/myfile")]
[Produces("text/html")]
public Stream GetMyFile()
{
   // Use GetFileInfo to get details on the file passing in the path added to the csproj
   // Using the fileInfo returned create a stream and return it.
   IFileInfo fileinfo = _fileProvider.GetFileInfo("assets/myfile.html");
   return fileinfo.CreateReadStream();
} 
```

有关详细信息，请参阅[此处的 ASP](https://docs.microsoft.com/en-us/aspnet/core/fundamentals/file-providers?view=aspnetcore-2.2) [.Net Core 文件提供程序示例](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/file-providers/samples/2.x/FileProviderSample)和 Microsoft 文档。

# ios - UIWebview - 加载 PNG 图像 - 出错

> ID：10830227
> 
> 赞同：0
> 
> 时间：2012-05-31T08:47:48.777
> 
> 标签：ios

我正在尝试在 UIWebview 中加载图像（png）。但我收到以下错误“”ImageIO：PNGinvalid literal/lengths set“

我将从网络服务中获取“png”。我将它存储在以下路径中。“用户/XXX/库/应用程序支持/iPhone 模拟器/4.3.2/Applications/E4DE3097-EA84-492F-A2A7-5882202F3B00/Documents/attachment.png”

当我从路径读取文件时，出现错误。我正在使用以下代码

```
 NSBundle *bundle = [NSBundle mainBundle]; 

  NSString *path = [bundle bundlePath];
    NSURL *baseURL = [NSURL fileURLWithPath:path];

    NSString *commentHtml = [NSString stringWithFormat:@"<img src=\"%@\"/>", documentEntity.path];
    NSString *html3 = [NSString stringWithFormat:@"<html><head/><body><div><b>COMMENTS:</b></div>%@</body></html>", commentHtml];
    [self.documentView loadHTMLString:html3 baseURL:baseURL]; 
```

请帮我。

谢谢 Girija

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:34:24.500

如果您已将图像保存在 Documents 文件夹中，为什么要从 MainBundle 中获取。从文档目录中获取图像将是：

```
 NSString *aDocumentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
    NSString *aFilePath = [NSString stringWithFormat:@"%@/attachement.png", aDocumentsDirectory];
    UIImage *anImage = [UIImage imageWithContentsOfFile:aFilePath]; 
```

# c# - 使用c#单独计算字符串中的字符

> ID：10830228
> 
> 赞同：-2
> 
> 时间：2012-05-31T08:47:54.253
> 
> 标签：c#, c#-4.0, c#-3.0

我有一个字符串如下：

```
string str = "ssmmmjjkkkkrrr" 
```

使用 C#，我需要显示每个字符的计数，如下所示：

```
 s = 2
 m = 3
 j = 2
 k = 4
 r = 3 
```

提前致谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-31T08:49:15.387

最简单的方法是使用 LINQ：

```
var counted = text.GroupBy(c => c)
                  .Select(g => new { g.Key, Count = g.Count() });

foreach (var result in counted)
{
    Console.WriteLine("{0} = {1}", result.Key, result.Count);
} 
```

或者更简单地说：

```
foreach (var group in text.GroupBy(c => c))
{
    Console.WriteLine("{0} = {1}", group.Key, result.Count());
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T08:49:32.080

```
string str = "ssmmmjjkkkkrrr";
var counts = str.GroupBy(c => c).Select(g => new { Char = g.Key, Count = g.Count() });

foreach(var c in counts)
{
    Console.WriteLine("{0} = {1}", c.Char, c.Count);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-31T09:03:02.603

由于每个人都提出了 linq 解决方案，我将提供一种简单的代码方式来实现相同的结果（可能也快得多）

```
 string str = "ssmmmjjkkkkrrr";
  Dictionary<char, int> counts = new Dictionary<char, int>();

  for (int i = 0; i < str.Length; i++)
       if (counts.ContainsKey(str[i]))
         counts[str[i]]++;
       else
         counts.Add(str[i], 1);

  foreach (var count in counts)
       Debug.WriteLine("{0} = {1}", count.Key, count.Value.ToString()); 
```

**编辑** 为了回应下面的性能评论，我会尝试让它更快一点，这是肮脏的代码，但它运行得很快。

字典方法会受到字典分配存储的方式的影响，每次添加一个超过分配存储阈值的项目时，它都会使可用存储翻倍（分配具有新大小的新数组并复制所有元素），这需要一些时间！这个解决方案解决了这个问题。

```
// we know how many values can be in char.
int[] values = new int[char.MaxValue];

// do the counts.
for (int i = 0; i < text.Length; i++)
    values[text[i]]++;

// Display the results.
for (char i = char.MinValue; i < char.MaxValue; i++)
    if (values[i] > 0)
       Debug.WriteLine("{0} = {1}", i, values[i]); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T08:56:22.510

```
mystring.GroupBy(ch => ch)
        .Select(a => new { ch = a.Key, count = a.Count() })
        .ToList()
        .ForEach(x => Console.WriteLine("{0} = {1}", x.ch, x.count)); 
```

# java - 如何在 jboss6 中设置 log4j.properties 的类路径

> ID：10830233
> 
> 赞同：-1
> 
> 时间：2012-05-31T08:48:36.280
> 
> 标签：java, axis2, jboss6.x

朋友您好，我已经部署`axis2.war`在 jboss6final 中，我在`axis2.war`.

`axis2.war`目录结构`axis2.war/WEB-INF/classes/log4j.properties`显示 log4j.properties 存在于战争中。

我的问题是如何在 Classpath 中设置 log4j.properties。因为当我尝试在 jboss 中部署 axis2.war 时，它会给出一些错误，例如

```
012-05-30 16:33:53,867 ERROR [STDERR] (http-127.0.0.1-7001-1) log4j:WARN No appenders could be found for logger (com.cdac.AsyncResponseComponent.PrepareSubmitResponse).

2012-05-30 16:33:53,867 ERROR [STDERR] (http-127.0.0.1-7001-1) log4j:WARN Please initialize the log4j system properly.

2012-05-30 16:33:53,868 ERROR [STDERR] (http-127.0.0.1-7001-1) log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. 
```

如果有人有一些宝贵的时间，请帮助我，谢谢......

**log4j.properties**

```
#

# Licensed to the Apache Software Foundation (ASF) under one

# or more contributor license agreements. See the NOTICE file

# distributed with this work for additional information

# regarding copyright ownership. The ASF licenses this file

# to you under the Apache License, Version 2.0 (the

# "License"); you may not use this file except in compliance

# with the License. You may obtain a copy of the License at

#

# http://www.apache.org/licenses/LICENSE-2.0

#

# Unless required by applicable law or agreed to in writing,

# software distributed under the License is distributed on an

# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY

# KIND, either express or implied. See the License for the

# specific language governing permissions and limitations

# under the License.

#

# Set root category priority to INFO and its only appender to CONSOLE.

log4j.rootCategory=INFO, CONSOLE

#log4j.rootCategory=INFO, CONSOLE, LOGFILE

# Set the enterprise logger priority to FATAL

log4j.logger.org.apache.axis2.enterprise=FATAL

log4j.logger.de.hunsicker.jalopy.io=FATAL

log4j.logger.httpclient.wire.header=FATAL

log4j.logger.org.apache.commons.httpclient=FATAL

# CONSOLE is set to be a ConsoleAppender using a PatternLayout.

log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender

log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout

log4j.appender.CONSOLE.layout.ConversionPattern=[%p] %m%n

# LOGFILE is set to be a File appender using a PatternLayout.

log4j.appender.LOGFILE=org.apache.log4j.FileAppender

log4j.appender.LOGFILE.File=axis2.log

log4j.appender.LOGFILE.Append=true

log4j.appender.LOGFILE.layout=org.apache.log4j.PatternLayout

log4j.appender.LOGFILE.layout.ConversionPattern=%d [%t] %-5p %c %x - %m%n 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:59:31.810

无需在 Classpath 中专门设置 log4j.properties。只需将属性文件放入项目的根级别即可自动将其添加到项目的类路径中。

# java - 如何使用 jamod 连接到设备并解释数据

> ID：10830234
> 
> 赞同：0
> 
> 时间：2012-05-31T08:48:39.407
> 
> 标签：java, modbus

我的客户希望使用自定义解决方案来控制安装在其站点中的 HVAC 系统。HVAC 设备提供 MODBUS TCP/IP 连接。我是这个领域的新手，对MODBUS一无所知。我搜索了互联网，发现 jamod 作为 MODBUS 的 java 库。现在我想用jamod写一个程序。但我的困惑是如何获得我想要连接的设备的地址。我的第二个问题是，即使我设法连接设备，我如何才能从 MODBUS 获取所需的数据（以温度等工程单位表示）。我的问题可能听起来很糟糕，但请原谅我，因为我是这个领域的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:51:14.893

**如何获取要连接的设备的地址？**

这种类型取决于您是通过 Modbus RTU 还是 Modbus TCP 进行连接。RTU（串行）将具有您指定的从属 ID，而 tcp 更直接，从属 ID 应始终为 1。

**如何从 MODBUS 获取所需的数据（以温度等工程单位表示）？**

希望数据已经以工程单位格式化。检查设备的手册，应该有一个表格或图表将寄存器映射到值。

**例子：**

```
String portname = "COM1"; //the name of the serial port to be used
int unitid = 1; //the unit identifier we will be talking to, see the first question
int ref = 0; //the reference, where to start reading from
int count = 0; //the count of IR's to read
int repeat = 1; //a loop for repeating the transaction

// setup the modbus master
ModbusCoupler.createModbusCoupler(null);
ModbusCoupler.getReference().setUnitID(1); <-- this is the master id and it doesn't really matter

// setup serial parameters
SerialParameters params = new SerialParameters();
params.setPortName(portname);
params.setBaudRate(9600);
params.setDatabits(8);
params.setParity("None");
params.setStopbits(1);
params.setEncoding("ascii");
params.setEcho(false);

// open the connection
con = new SerialConnection(params);
con.open();

// prepare a request
req = new ReadInputRegistersRequest(ref, count);
req.setUnitID(unitid); // <-- remember, this is the slave id from the first connection
req.setHeadless();

// prepare a transaction
trans = new ModbusSerialTransaction(con);
trans.setRequest(req);

// execute the transaction repeat times because serial connections arn't exactly trustworthy...
int k = 0;
do {
  trans.execute();
  res = (ReadInputRegistersResponse) trans.getResponse();
  for (int n = 0; n < res.getWordCount(); n++) {
    System.out.println("Word " + n + "=" + res.getRegisterValue(n));
  }
  k++;
} while (k < repeat);

// close the connection
con.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T06:52:28.993

首先，当您使用 Modbus/TCP 时，“地址”是不明确的，因为有从站的 IP 地址、您正在与之交谈的设备的单元号（对于 Modbus/TCP 通常为 0）以及任何寄存器。

对于“工程单位”问题，您需要的是 Modbus 寄存器映射，包括任何单位或转换因子。您可能还需要了解数据类型，因为所有 Modbus 寄存器都是 16 位的。

# java - MessageConsumer.receive() 挂在 ioexception 上

> ID：10830238
> 
> 赞同：0
> 
> 时间：2012-05-31T08:48:58.210
> 
> 标签：java, jakarta-ee, jboss, jms

使用 jboss 5.1，java 独立应用程序。

我正在尝试收听从独立应用程序到 jboss jms 的消息。

问题是当我杀死 jboss 服务器时，我在独立应用程序端出现异常，但接收（）仍然挂起，因为我的线程被卡住了，我无法重新连接或做任何其他事情。

那是我独立的例外：

```
2012-05-31 11:47:18,738 org.jboss.remoting.transport.socket.SocketClientInvoker [ERROR] Got marshalling exception, exiting
java.io.IOException: Connection reset by peer: socket write error
    at java.net.SocketOutputStream.socketWrite0(Native Method)
    at java.net.SocketOutputStream.socketWrite(Unknown Source)
    at java.net.SocketOutputStream.write(Unknown Source)
    at java.io.BufferedOutputStream.flushBuffer(Unknown Source)
    at java.io.BufferedOutputStream.flush(Unknown Source)
    at java.io.DataOutputStream.flush(Unknown Source)
    at org.jboss.jms.wireformat.SerializedPacket.write(SerializedPacket.java:81)
    at org.jboss.jms.wireformat.JMSWireFormat.write(JMSWireFormat.java:237)
    at org.jboss.remoting.transport.socket.MicroSocketClientInvoker.versionedWrite(MicroSocketClientInvoker.java:971)
    at org.jboss.remoting.transport.socket.MicroSocketClientInvoker.transport(MicroSocketClientInvoker.java:606)
    at org.jboss.remoting.transport.bisocket.BisocketClientInvoker.transport(BisocketClientInvoker.java:418)
    at org.jboss.remoting.MicroRemoteClientInvoker.invoke(MicroRemoteClientInvoker.java:122)
    at org.jboss.remoting.ConnectionValidator.doCheckConnectionWithLease(ConnectionValidator.java:522)
    at org.jboss.remoting.ConnectionValidator.run(ConnectionValidator.java:301)
    at java.util.TimerThread.mainLoop(Unknown Source)
    at java.util.TimerThread.run(Unknown Source) 
```

我的独立应用程序代码：

```
 private static Logger log = LoggerFactory.getLogger(MomTopicListenerAbs.class);
    protected String componentCode = null;
    protected int reconnectTimeInterval = 30000;
    MessageConsumer topicMsgConsumer = null;
    Session topicSession = null;
    String momUrl = null;
    Connection topicConnection = null;
    InitialContext jmsContext = null;
    private Thread listenerThread = null;
    boolean shouldListen = true;

@Override
    public void connectToTopic() throws Exception
    {
        TopicConnectionFactory myConnFactory;
        Topic myTopic;
        String MYCF_LOOKUP_NAME = MomConstants.MOM_EXTERNAL_CONNECTION_FACTORY;
        String MYTOPIC_LOOKUP_NAME = MomConstants.DISPATCHER_TOPIC_LOOKUP;
        jmsContext = new InitialContext();
        jmsContext.addToEnvironment("java.naming.factory.initial", "org.jnp.interfaces.NamingContextFactory");
        jmsContext.addToEnvironment("java.naming.factory.url.pkgs", "org.jnp.interfaces");
        jmsContext.addToEnvironment(Context.PROVIDER_URL, momUrl);
        myConnFactory = (javax.jms.TopicConnectionFactory) jmsContext.lookup(MYCF_LOOKUP_NAME);
        myTopic = (Topic) jmsContext.lookup(MYTOPIC_LOOKUP_NAME);
        topicConnection = myConnFactory.createConnection();
        topicSession = topicConnection.createSession(false, Session.AUTO_ACKNOWLEDGE);
        topicMsgConsumer = topicSession.createConsumer(myTopic);
        topicConnection.start();
    }

@Override
    public void run()
    {
        Message msg = null;
        log.info("Listening to Mom Topic at url=" + momUrl + " started.");
        try
        {

            connectToTopic();
            while (shouldListen)
            {
                try
                {       //this is where it hangs when I kill the jboss  server.
                    msg = topicMsgConsumer.receive();
                    if (msg == null)
                    {
                        throw new Exception("Received empty msg from Topic Listener. could be caused by stopListening() invoke");
                    }
                    executeMsgThread(msg);
                }
                catch (JMSException e)
                {
                    log.error("Caught JMS exception, reconnecting...", e);
                }
                catch (Exception e)
                {
                    log.error("Error in topic Listener. errorMsg=" + e.getMessage(), e);
                }
            }
        }
        catch (Throwable t)
        {
            log.error(TAG + ", System error", t);
        } 
```

我将如何捕捉该异常？

谢谢，雷。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:55:55.563

您需要在客户端的连接上[添加](http://docs.oracle.com/javaee/6/api/javax/jms/Connection.html#setExceptionListener%28javax.jms.ExceptionListener%29)一个[ExceptionListener](http://docs.oracle.com/javaee/6/api/javax/jms/ExceptionListener.html)。当服务器停止时，你会从你注册的监听器那里得到一个回调。

**====== 更新 ======**

奇怪的是，您没有从异常侦听器中获得回调。为避免线程停滞，您可以考虑使用[超时版本的接收](http://docs.oracle.com/javaee/6/api/javax/jms/MessageConsumer.html#receive%28long%29)或[设置消息侦听](http://docs.oracle.com/javaee/6/api/javax/jms/MessageConsumer.html#setMessageListener%28javax.jms.MessageListener%29)器。这样你就不会处于永久块中。

# android - 在复选框事件上重绘 expandableListView

> ID：10830241
> 
> 赞同：1
> 
> 时间：2012-05-31T08:49:03.287
> 
> 标签：android, expandablelistview

我有一个可扩展列表视图，其中包含按组的复选框和按子项的复选框。当一个组被选中/取消选中时，所有的孩子都被选中/取消选中。我没有问题保持这个复选框的状态，但我想强制 expandableListView 重绘以显示所有孩子的复选框被选中或取消选中。我搜索了几个小时并没有找到解决方案。有没有人能解释一下我们解决这个问题的方法，我会很高兴的。

这是我在 expandableListAdapter 中管理复选框更改的代码：

```
 public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {

    GroupViewHolder gholder;
    final TypeVehicule type=(TypeVehicule) getGroup(groupPosition);
    if (convertView==null)
    {
        gholder=new GroupViewHolder();
        convertView = inflater.inflate(R.layout.listevehicule_type,null);
        gholder.textViewGroup=(TextView)convertView.findViewById(R.id.LV_textType);
        gholder.checkType=(CheckBox)convertView.findViewById(R.id.LV_CheckType);
        gholder.checkType.setTag(groupPosition);        
        gholder.imgType=(ImageView)convertView.findViewById(R.id.LV_ImageType);
        convertView.setTag(gholder);
    }
    else
    {
        gholder = (GroupViewHolder)convertView.getTag();
    }
    gholder.textViewGroup.setText(type.getType());
        if (type.getColor()==-1)
        { 
            int color;
            Random rnd = new Random(); 
            color = Color.argb(255, rnd.nextInt(256), rnd.nextInt(256), rnd.nextInt(256));
            type.setColor(color);       
        }   
        gholder.imgType.setBackgroundColor(type.getColor());
        gholder.checkType.setChecked(type.isIschecked());

        gholder.checkType.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) 
            {                   
                type.setIschecked(((CheckBox) v).isChecked());

                    for (Vehicule _v : type.getListeVehicules())
                    {
                        _v.setIschecked(type.isIschecked());

                    }
            }       

        });

        gholder.checkType.setChecked(type.isIschecked());
      //
    return convertView;
} 
```

和 onCreate 的代码：

```
protected void onCreate(Bundle savedInstanceState) 
{
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(net.ornicar.ornimobile.R.layout.listevehicule);
    listView_Vehic = (ExpandableListView)findViewById(R.id.ListeVehicules);     
    // ici pour l'instant on rempli en dur en attendant l'implementation de la couche metier..      
    for (int i=1; i<10;i++)
    {
        TypeVehicule type = new TypeVehicule("Type " + i);

        ArrayList<Vehicule> oListVeh = new ArrayList<Vehicule>();

        for (int j=0;j<10;j++)
        {
            oListVeh.add(new Vehicule(type, "Veh N°"+j+"-"+i));
        }
        type.setListVehicule(oListVeh);
        oListType .add(type);           
    }
    ListeVehiculesAdapter adapter = new ListeVehiculesAdapter(this, oListType,true);
    listView_Vehic.setAdapter(adapter);
    this.registerForContextMenu(listView_Vehic);
    listView_Vehic.setOnChildClickListener(new  OnChildClickListener() {

        @Override
        public boolean onChildClick(ExpandableListView parent, View v, int groupPosition, int childPosition, long id) { 
            Toast.makeText(getApplicationContext(), oListType.get(groupPosition).getListeVehicules().get(childPosition).getNom()+" Clicked!!", 4000).show();    
            return true;
        }
    });

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:06:40.480

要强制任何 (Expandable)ListView 重绘，您可以在视图使用的 Adapter 上调用[notifyDataSetChanged](http://developer.android.com/reference/android/widget/BaseAdapter.html#notifyDataSetChanged%28%29)。这将强制重绘屏幕上可见的任何内容。这意味着您的适配器必须扩展[BaseAdapter](http://developer.android.com/reference/android/widget/BaseAdapter.html)或[BaseExpandableListAdapter](http://developer.android.com/reference/android/widget/BaseExpandableListAdapter.html)。

# driver - 如何验证inf文件安装

> ID：10830242
> 
> 赞同：2
> 
> 时间：2012-05-31T08:49:07.150
> 
> 标签：driver, inf

我在同一个文件夹中有一个 .inf 文件和一个兄弟 .sys 文件。它们是通过 USB 实现即插即用设备的驱动程序。

当我尝试双击/右键单击 .inf 文件并按“安装”它不起作用，但如果我尝试从“设备管理器”并选择使用给定路径手动安装 - 它安装正常。

我该如何处理，以使 inf 文件*可安装*..？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:05:03.573

有一个名为“chkinf”的 perl 脚本工具 [http://msdn.microsoft.com/en-us/library/windows/hardware/ff543461(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff543461(v=vs.85).aspx) 可以验证 inf 文件的正确性。

此外，为了正确安装 inf，它应该有 [defaultinstall] 语句。

这不是安装设备驱动程序的正确方法。正确的方法是使用一个工具，如 DPInst.exe 指南位于 [http://blogs.technet.com/b/svengruenitz/archive/2008/07/02/driver-installation-and-updating-made-easy- dpinst-exe.aspx](http://blogs.technet.com/b/svengruenitz/archive/2008/07/02/driver-installation-and-updating-made-easy-dpinst-exe.aspx)

请享用。

# asp.net - 想要显示带有访客人数的国旗 asp.net

> ID：10830243
> 
> 赞同：0
> 
> 时间：2012-05-31T08:49:07.467
> 
> 标签：asp.net

在我的 asp.net 表单中，我想显示国旗以及当前的访客人数。当用户从美国访问我们的网站时，美国国旗计数将增加一，当同一用户关闭浏览器或转到另一个站点时，计数将减少。请给我最好的逻辑，以显示当前国家/地区的访客人数以及国旗。需要帮忙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:58:34.160

这里最大的问题是——你不能依赖关闭浏览器的事件。

[http://www.codeproject.com/Articles/58835/Window-Close-Event-of-Browser](http://www.codeproject.com/Articles/58835/Window-Close-Event-of-Browser)

但是，您可以尝试至少获得近似结果。在上面的文章中，您会看到如何对这些事件做出反应。我会使用 ajax 与服务器通信以根据需要增加/减少值，并在此过程中更新页面的相关部分。对于存储，您可以使用数据库来存储这些值。

在这里查看有关在 asp.net 中使用 jquery 的 ajax 的更多信息：[http](http://www.simple-talk.com/dotnet/asp.net/ajax-basics-with-jquery-in-asp.net/) ://www.simple-talk.com/dotnet/asp.net/ajax-basics-with-jquery-in-asp.net/如果不是对你来说还不够，使用谷歌，那里有很多资源等着你。

# boost - Google mock 不能使用 std::vector 的 boost::variant 编译

> ID：10830248
> 
> 赞同：4
> 
> 时间：2012-05-31T08:49:22.443
> 
> 标签：boost, googlemock

我正在尝试为一些使用 boost::variant 的接口类创建 Google Mock 对象

```
#include <gtest/gtest.h>
#include <gmock/gmock.h>
#include <boost/variant.hpp>
#include <vector>

typedef std::vector<int> VectorOfInt;
typedef boost::variant<VectorOfInt> VariantOfVector;

class InterfaceClass
{
public:
     virtual ~InterfaceClass() {}
     virtual void SetSome( const VariantOfVector& ) = 0;
     virtual const VariantOfVector& GetSome() const = 0;
};

class MockInterfaceClass
{
public:
     MOCK_METHOD1( SetSome, void( const VariantOfVector& ) );
     MOCK_CONST_METHOD0( GetSome, const VariantOfVector&() );
}; 
```

当我编译它时

> g++ mytest.cpp -o mytest

我明白了

> /usr/include/boost/variant/detail/variant_io.hpp:64: error: no match for 'operator<<' in '((const boost::detail::variant::printer > >*)this)-> boost::detail::variant::printer > >::out_ <<operand'</p>

boost::variant 是否与 std::vector 一起使用？似乎 boost::variant 适用于我定义的任何类型，但 std:vector 除外。为什么？

升压版 - 1.45 g++ 版 - 4.4.5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T10:31:08.370

似乎模拟尝试将运算符 << 应用于您的变体。您必须为其内容定义运算符 <<，即 std::vector 模板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-28T10:14:32.947

正如 Igor R. 回答的那样，您需要像这样添加运算符 << （没有命名空间）：

```
std::ostream& operator <<(std::ostream& out, VariantOfVector const& rhs)
{
    //Print or apply your visitor to **rhs**
    return out;
} 
```

# java - Eclipse 程序无法运行

> ID：10830250
> 
> 赞同：1
> 
> 时间：2012-05-31T08:49:25.883
> 
> 标签：java, android, eclipse, apk

每次我尝试通过 Eclipse 运行我的 APK 时，我都会得到

```
[2012-05-31 10:09:54 - DZC68] Performing sync
[2012-05-31 10:09:57 - DZC68] Uploading DZC68.apk onto device '0019eb16662fae'
[2012-05-31 10:09:57 - DZC68] Installing DZC68.apk...
[2012-05-31 10:10:00 - DZC68] Success! 
```

它不会在我的手机 (SGS2) 或 Android 模拟器上启动我的 APK。我得到的另一个 APK

```
[2012-05-31 10:01:18 - VoetbalCoachWNS] Performing voetbalcoah.wns.VoetbalCoachWNSActivity activity launch
[2012-05-31 10:01:20 - VoetbalCoachWNS] Uploading VoetbalCoachWNS.apk onto device '0019eb16662fae'
[2012-05-31 10:01:20 - VoetbalCoachWNS] Installing VoetbalCoachWNS.apk...
[2012-05-31 10:01:22 - VoetbalCoachWNS] Success!
[2012-05-31 10:01:22 - VoetbalCoachWNS] Starting activity voetbalcoah.wns.VoetbalCoachWNSActivity on device 0019eb16662fae 
```

这工作正常。它将在我的手机和模拟器上启动 APK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:51:18.070

请尝试以下步骤；这可能会帮助你：

转到项目-> 属性

从左侧列表中选择 Android

取消选中“是库”复选框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:03:23.507

确保您的清单已使用以下意图过滤器声明 Launcher 活动。

```
 <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter> 
```

# jquery - 在 jquery 脚本中调用 .each() 函数

> ID：10830253
> 
> 赞同：0
> 
> 时间：2012-05-31T08:49:38.223
> 
> 标签：jquery, each

我有一些 html 元素和 jquery 可以在文档加载时正确更新元素值。

这看起来像：

```
$('.elem_text, .elem_text10').each(function() {
.... 
} 
```

在我想做以下事情之后：

我想更新元素的值，该新值被保留，并且我需要再次刷新值，因为我想从另一个函数触发每个函数，否则我只需将代码复制到另一个函数。

我找不到如何触发 each() 函数的任何可能性，我尝试过的方法不起作用：

```
function updateElements() {
  ....
     !  $('#elem_id').trigger("each");  // <- does not work 
     !  $('#elem_id').each();           // <- does not work
} 
```

也许有人对如何实现功能有自己的建议？

或者我仍然应该复制代码 2 次？

乌尔马斯·列宾斯基。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:52:59.060

每个都不是事件！它只是一个异步迭代器。将每个输出中的代码重构为一个函数，然后在您的 updateElements 中重用它。发布 JSFiddle，我可以进一步帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:07:27.860

```
$('body').delegate('#elem_id','click',function(){
   $('.elem_text, .elem_text10').each(function() {
   .... 
   }
}); 
```

我在这里所做的是将您的代码包装在一个事件中。每次单击#elem_id 时，它都会运行您的代码。因为我不确定您何时要更新我刚刚使用“点击”的值

# opends - 使用java打开用户密码更改

> ID：10830254
> 
> 赞同：0
> 
> 时间：2012-05-31T08:49:38.233
> 
> 标签：opends

一旦管理员设置了 Spring LDAP，我需要开发一个代码来更改用户密码。我使用 OpenDS 2.2 作为我的目录服务器。

每当我使用我的代码更改它时，它会将属性“pwdReset”设置为 true，这意味着需要更改密码。但再次更改密码不会将此属性重置为 false。我设法找到了一种解决方法，即通过 java 代码将“pwdReset”显式重置为 false，但这不能也不应该是正确的方法。

据我了解，这是一个操作属性，不应由用户修改，而要走的路是首先对用户进行身份验证，然后在用户仍然通过身份验证时更改密码。

这是我需要帮助的地方。如果有人能给我提供一个示例代码来实现我在上一段中提到的内容，我将不胜感激。

我目前使用的代码如下

```
 ModificationItem item = new ModificationItem(DirContext.REPLACE_ATTRIBUTE, new        BasicAttribute("userPassword", password));
             ldapTemplate.modifyAttributes("cn="+userName, new ModificationItem[]{item}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:12:41.843

OpenDS 中的密码重置（以及 OpenDJ 是 OpenDS 的积极开发的分支，请查看 opendj.forgerock.org），是一种操作，包括在以另一个用户身份验证时更改用户帐户的密码（通常为 cn=Directory Manager）。当经过身份验证的用户更改自己的密码时，这不是重置，而是更改（并不是说在使用 ProxiedAuthorization 控件时也是如此）。

在任何情况下，如果密码策略被定义为在重置密码时强制更改密码，则将设置 pwdReset 属性。如果您知道密码将始终由管理帐户更改，那么您不应在重置时强制更改密码。

亲切的问候，卢多维奇。

# mysql - 在codeigniter中使用mysql错误进行表单验证

> ID：10830255
> 
> 赞同：0
> 
> 时间：2012-05-31T08:49:42.523
> 
> 标签：mysql, codeigniter, callback, validation, duplicates

我正在尝试 codeigniter 的表单验证库来验证表单。我有一些问题，我需要帮助。1.假设用户填写表单提交。
2.验证库在 db 表中查找重复项并为字段设置错误消息。
3\. 表格显示有消息。
在这种方法中，我看到了一个缺点。假设表中有 5 个字段设置为唯一。因此验证将运行查询以查找唯一字段 5 次。

另一种方法是让用户插入，db产生错误。在表单验证库中没有调用 callback_find_duplicate 函数。表单已填充。在这种方法中，很难找到哪个字段是重复的，因此为此设置错误消息会很麻烦。最糟糕的情况是该用户输入了重复的名称。填写表格，然后填写电子邮件。然后还有一些继续。
我需要找到一种方法，或者我们可以编写一个查询来查找我所有字段的所有重复项。并为所有字段设置错误消息，而无需调用 callback_find_duplicate 五次。因为我认为调用单个查询将花费更少的执行时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:05:04.873

尽管 form_validation 很重要，但我发现自己有时更喜欢其他解决方案。

添加这个：

**库/My_Form_validation.php**

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class MY_Form_validation extends CI_Form_validation {

    /* Custom function to create errors manually
     * */
    function create_error($str_field, $str_message) {

        $str_message = t($str_message, $str_line);

        $this->_field_data[$str_field] = 
        array('error' => $str_message,
              'is_array' => FALSE,
              'postdata' => $this->CI->input->post($str_field),
              'rules' => '',
              'field' => $str_field);

        $this->_error_array[$str_field] =   $str_message;

    }

} 
```

然后你可以在你的控制器中手动运行它`->run()`。

尽可能获取查询，并为每种情况设置一个 if，如下所示：

```
$arr_uniques = array('email', 'name', 'snn'); // whatev
foreach($arr_uniques as $h)
    if ($row->$h == $this->input->post($h))
        $this->form_validation->create_error($h, "{$h} is not unique!"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:58:14.623

对数据库的五次调用并不多。第一种方法是我会这样做的方式，而不是让 CodeIgniter 可以很好地处理的事情变得复杂。

# silverlight - SL5 UserControl 正在忽略应用程序资源

> ID：10830256
> 
> 赞同：0
> 
> 时间：2012-05-31T08:49:52.313
> 
> 标签：silverlight, prism, silverlight-5.0

我有一个 Prism 应用程序，一个包含外壳和基础设施的主应用程序，以及一个测试模块。我从测试模块中删除了 App.xaml，因为我不需要它（Prism 不加载它）。现在我想把它放回去，把一些设计时资源放进去。我手动添加了 App.xaml，将其设置为项目的启动对象。App.xaml 包含资源字典 Style.xml（与主应用程序相同，我将其链接）但 UserControl 没有它们可用。还有什么我必须还原以便项目使用 App.xaml 的吗？如果我将它们放在 UserControl.Resources 中，相同的资源就可以工作，所以这不是拼写错误的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:03:48.297

您必须将 App.xaml 的 Build Action 更改为 ApplicationDefinition

# mysql - Drupal cache not working (tables empty)

> ID：10830258
> 
> 赞同：0
> 
> 时间：2012-05-31T08:49:57.133
> 
> 标签：mysql, drupal-7, centos

I am having a problem with several Drupal 7 distributions running on CentOS 5, Apache 2, PHP 5, MySQL 5\. Several of the `cache_*` tables are empty and are not being filled up, no matter what I do, and that is the reason why my AJAX login form isn't working (I've debugged the core and traced it down to the `form_get_cache` function returning empty).

I have the **exact** same code and DB running on a Windows 7 machine, and the cache tables are being populated with no problem.

Did anyone stumble upon something like this and can point me in a direction? I've really tried everything and nothing works.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-10T16:50:44.653

This is related: [Drupal cache not working - tables remain empty](https://stackoverflow.com/questions/22993322/drupal-cache-not-working-tables-remain-empty/)

It's necessary to remove/uncomment the following line from settings.php after disabling the memcache module:

```
$conf['cache_inc'] = 'sites/all/modules/memcache/memcache.inc'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:01:17.310

Debugged a little more into the core and found out what the problem was: Memcache.

I was using memcache with Drupal on the CentOS servers, but not on the Windows one. Seems like Drupal doesn't work 100% correct with Memcache yet.

# java - 形式参数不能是常数 def

> ID：10830262
> 
> 赞同：0
> 
> 时间：2012-05-31T08:50:12.907
> 
> 标签：java, ruby, jruby

正如标题所示，当我运行我的程序时，我遇到了这个错误。

这是我的红宝石文件：

```
require 'java'
java_import org.arc.Something

def hello(Something)
    Something.print()
end 
```

基本上我这样称呼它：

```
invoke.invokeFunction("hello", new SomethingElse()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T08:58:29.367

正如错误消息中所说，您不能在 ruby​​ 中使用常量作为形式参数。

常量的名称类似于局部变量，只是它们以大写字母开头。

因此，您应该只使用通常的变量来代替参数：

```
def hello(something)
    something.print()
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:55:59.910

`[arc.org.]Something`您的常量名称 ( ) 和参数名称 ( )之一似乎存在冲突`Something`。

尝试将您的参数重命名为其他名称：

```
require 'java'
java_import org.arc.Something

def hello(st)
    st.print()
end 
```

# android - Charts4j 库适用于 Java 项目但不适用于 Android 项目？

> ID：10830264
> 
> 赞同：1
> 
> 时间：2012-05-31T08:50:16.510
> 
> 标签：android, noclassdeffounderror, charts4j

我正在使用这个库：CHARTS4J VERSION 1.3

这个演示课：[看我的课](http://www.androidadb.com/source/charts4j-read-only/src/test/java/com/googlecode/charts4j/example/GeneralExample.java.html)正在**处理一个java项目**（在eclipse下）。但是在我的**android项目中，我有这个错误**：“java.lang.NoClassDefFoundError ：com.googlecode.charts4j.Data”对于我的班级尝试使用的第一个对象（这一行：*Plot plot = Plots.newPlot(Data* **.***新数据(0, 66.6, 33.3, 100));* )

我确实在我的项目**的“构建路径”中有该库，**并检查它是否在我的**类路径**中：

*classpathentry kind="lib" path="D:/WorkspaceAndroid/myproject/charts4j-1.3.jar"*

我迷路了。为什么它在运行时不起作用？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:59:51.140

我真的不明白你有什么问题，chart4j。但我也在 Android 上尝试了图表，而 androidplot.com 是一个易于使用且文档齐全的库，在编程时不会让我感到头疼。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-19T17:19:40.120

同样的问题，但是构建了一个 Eclipse 插件。

**Java中NoClassDefFoundError的原因是什么？**

*当 Java 虚拟机无法在运行时找到在编译期间可用的特定类时，Java 中的*NoClassDefFoundError就会出现。*例如，如果我们有一个类的方法调用或访问一个类的任何静态成员，并且该类在运行时不可用，那么 JVM 将抛出 NoClassDefFoundError。重要的是要了解这与 ClassNotFoundException 不同，后者仅在尝试在运行时加载类时出现，并且名称是在运行时而不是在编译时提供的。许多 Java 开发人员将这两个错误混为一谈而感到困惑。*

 *简而言之，如果在编译期间存在类但在运行期间在 java 类路径中不可用，则会出现*NoClassDefFoundError 。*

**Java中java.lang.NoClassDefFoundError和ClassNotFoundException的区别**

很多时候，我们将自己与*java.lang.ClassNotFoundException*和*java.lang.NoClassDefFoundError*混淆了，尽管它们都与 Java Classpath 相关，但它们彼此完全不同。*当 JVM 尝试在运行时动态加载类时出现ClassNotFoundException*，这意味着您在运行时给出类的名称，然后 JVM 尝试加载它，如果在类路径中找不到该类，则会抛出*java.lang.ClassNotFoundException*. 而在 NoClassDefFoundError 的情况下，有问题的类在编译期间存在，这就是程序成功编译但在运行时不可用的原因。在我看来，NoClassDefFoundError 比 ClassNotFoundException 更容易解决，因为在这里我们知道 Class 在构建期间存在，但它完全取决于环境，如果您在 J2EE 环境中工作，即使存在 class，您也可以获得 NoClassDefFoundError 因为它可能不存在对相应的 ClassLoader 可见。

更多详情：http: [//javarevisited.blogspot.com.es/2011/06/noclassdeffounderror-exception-in.html](http://javarevisited.blogspot.com.es/2011/06/noclassdeffounderror-exception-in.html)

**现在是 Eclipse 插件的解决方案**

当我们得到*NoClassDefFoundError*时，类路径至少没有在一个地方定义。在 Eclipse 插件中，这些都是需要定义外部库的类路径的地方：

1.  *项目属性*：右键单击项目，然后单击属性。然后是 Java 构建路径，然后是库。最后添加库的罐子（外部或项目文件夹中）
2.  *在 plugin.xml 文件中*：打开 plugin.xml 文件，然后单击选项卡 Runtime。在 Classpath 部分中添加库。在选项卡中单击 Build 并在 Extra Classpath Entries 中添加库。

就这样。

对于 Android 项目应该是一个类似的解决方案，因为这种错误来自错误的类路径定义。*

# android - 在 Android 启动过程中添加命令

> ID：10830269
> 
> 赞同：0
> 
> 时间：2012-05-31T08:50:41.497
> 
> 标签：android, security, locking, boot, keyguard

我想知道是否可以在 Android 启动过程中插入我自己的命令来修改其行为。具体来说，我希望修改用户输入他/她的 PIN/密码/模式的安全锁，获取用户输入，并自己验证用户。成功验证后，我想在加载主屏幕并发送 ACTION_USER_PRESENT 广播之前运行一些本机 ARM 二进制文件。

这是在框架或应用程序级别完成的吗？

我研究了 Android 启动过程，似乎 ACTION_BOOT_COMPLETED 广播是在 android 系统服务器运行时启动并运行后发送的。但是，这发生在用户解锁设备之前。所以我假设我不能在系统服务器上做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:54:55.777

在大多数 ROM 中，您可以将命令添加到 /system/etc/init.d/ 中的任何文件中，它将在启动时执行。或者，您可以在该文件夹中创建一个文件，并对其设置 755 权限。

# php - 在查询中使用条件语句来查找合适的列进行连接和分组？

> ID：10830271
> 
> 赞同：0
> 
> 时间：2012-05-31T08:50:49.700
> 
> 标签：php, mysql

我正在开发一个私人消息系统，它看起来更像是一个社交网络消息传递。没有标题，相关的 pms 显示为论坛主题。

我有两张桌子来跟踪下午

```
pm_sessions  : pm_session  , sender , receiver, pm_counter 

pm           : id , pm_session  , text , date , sender 
```

pm_session 就像 pm 的包装器一样工作

现在在用户配置文件中，我想显示从当前用户发送或接收 pm 的用户列表

问题是我不想分别显示接收者和发送者用户，我希望将所有与我的人交谈的用户都放在一个列表中

这就是我的想法，我现在它不适用于所有 IF 语句

```
$current_user = $_session['userid'];
    $query = " 

 select pms.sender , pms.receiver, 
 count(pms.otheruser) as total_dialogs_with_this_user , 
 u.username as other_user_name  , u.id as other_user_id

 from pm_session pms

   //// joining to the users table on the other user id
   if($current_user = pms.sender)
     JOIN users u on pms.receiver= u.id 
   if($current_user = pms.receiver)
     JOIN users u on  pms.sender = u.id 

  WHERE pms.reciver = $current_user || pms.sender = $current_user

   /// grouping by other user id
   if($current_user = pms.sender)
     group by pms.receiver
   if($current_user = pms.receiver)
     group by pms.sender "; 
```

我希望结果是这样的

```
HELLO max ... you have been talking to :

ross... 3 dialogs
joey ... 4 dialogs
chandler ... 5 dialogs 
```

我可以很容易地用两个查询来写这个，一个用于接收者，一个用于发送者，但就像我说的我不想将它们分开

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:01:52.723

```
SELECT   CASE $current_user
           WHEN pms.sender   THEN pms.receiver
           WHEN pms.receiver THEN pms.sender
         END                  AS other_user_id,
         u.username           AS other_user_name,
         COUNT(pms.otheruser) AS total_dialogs_with_this_user
FROM     pm_session           AS pms
  JOIN   users                AS u
           ON u.id = CASE $current_user
             WHEN pms.sender   THEN pms.receiver
             WHEN pms.receiver THEN pms.sender
           END
GROUP BY other_user_id, other_user_name 
```

# php - PhoneGap 登录表格

> ID：10830272
> 
> 赞同：1
> 
> 时间：2012-05-31T08:50:56.777
> 
> 标签：php, jquery, ajax, cordova, login

我正在尝试为我的 PhoneGap 应用程序制作一个简单的登录表单。由于 PhoneGap 不能在客户端使用任何 PHP，我必须使用 AJAX 将数据发送到服务器。我找到了一个简单的 PHP 登录教程，但我真的不知道如何让它与 ajax 一起使用。

我知道如何将值发布到 PHP 文件，但是如果用户名和密码正确，我如何将用户重定向到页面，或者如果信息无效，如何拒绝他们进入网站？

这是我现在拥有的代码：

JS

```
jQuery.ajax({ 
    type: "POST", 
    url: serviceURL + "login.php", 
    data: 'username='+username+'&password='+password,  
    cache: false,
        } 
```

登录.php

```
<?php
include 'config.php';

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

// username and password sent from form
$myusername=$_POST['username'];
$mypassword=$_POST['password'];

// To protect MySQL injection (more detail about MySQL injection)
$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);

$sql="SELECT * FROM users WHERE username='$myusername' and password='$mypassword'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);
// If result matched $myusername and $mypassword, table row must be 1 row

if($count==1){
//  redirect 
header("location:settings.html");
}
else {
echo "Wrong Username or Password";
}
?> 
```

那么我怎样才能使`if($count==1){....`部分对我的应用程序采取行动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:41:07.687

首先，您必须设置要检索的预期数据类型（例如 html）。之后，您还必须在成功检索数据后对检索到的数据指定一个函数...

像这样的东西：

```
jQuery.ajax({ 
    type: "POST", 
    success: function(data) { // After retrieving the data from the php-file
    alert(data);}
    url: serviceURL + "login.php", 
    data: 'username='+username+'&password='+password,  
    cache: false,
    dataType:'html' // Expected return data type...
} 
```

The **data** Variable contains the return string from the php file, so you have to echo something out with the php script, like "logged in" and then you have to filter / check this string with javascript...

Lucian

# eclipse - 即使在安装 m2e + DWM 之后，Eclipse Indigo SR2 EE 中也没有 Maven 菜单项

> ID：10830284
> 
> 赞同：2
> 
> 时间：2012-05-31T08:51:56.463
> 
> 标签：eclipse, maven, m2eclipse, m2e

我已经安装了 Eclipse Indigo SR2 EE：

```
Eclipse Java EE IDE for Web Developers.
Version: Indigo Service Release 2 
Build id: 20120216-1857 
```

甚至在从 Marketplace 安装 m2e 之后，我在 File->Import、File->New->Project... 或 Window->Preferences 中也没有任何 Maven 菜单项。

我真的很困惑。我在一台 Fedora 17 x64 机器上——而我的*另一*台 Fedora 17 x64 机器在使用相同版本的 Eclipse 时运行良好！

m2e 在“已安装的软件”中清楚显示：

```
 m2e - Maven Integration for Eclipse   1.0.200.20111228-1245   org.eclipse.m2e.feature.feature.group   Eclipse.org - m2e 
```

...并出现在配置报告中。然而它在 UI 中是完全不可见的，这让我发疯了。

**更新：**错误日志中的某些内容可能很重要 - 至少，它与 m2e 相关。请参阅`-consolelog` [此处](http://pastebin.com/Ld0tpwLB)或帖子末尾附近的缩写粘贴。

我对 Eclipse 还很陌生，所以我可能正在做一些愚蠢的事情——但无论是什么，Eclipse 都可以让问题更加明显。

这与[“Eclipse Indigo for JAVA EE + Maven 插件 = Maven 菜单未出现在导入和首选项中”不同](https://stackoverflow.com/questions/10378602/eclipse-indigo-for-java-ee-maven-plugin-the-maven-menu-does-not-appear-in-im)；他们的 m2e 没有正确安装，这显示为已安装并且 Eclipse 不会重新安装它，因为它已经安装，因此在“安装新软件...”中显示为灰色。

从命令行启动 Eclipse 时，stdout/stderr 上不会发出任何错误。

我正在使用：

```
java -version
java version "1.7.0_b147-icedtea"
OpenJDK Runtime Environment (fedora-2.1.fc17.6-x86_64)
OpenJDK 64-Bit Server VM (build 22.0-b10, mixed mode) 
```

这在工作的工作站上运行良好。`ls -d plugins/*m2e*`显示：

```
plugins/org.eclipse.m2e.archetype.common_1.0.200.20111228-1245           plugins/org.eclipse.m2e.logback.appender_1.0.200.20111228-1245.jar
plugins/org.eclipse.m2e.core_1.0.200.20111228-1245.jar                   plugins/org.eclipse.m2e.logback.configuration_1.0.200.20111228-1245.jar
plugins/org.eclipse.m2e.core.ui_1.0.200.20111228-1245.jar                plugins/org.eclipse.m2e.maven.indexer_1.0.200.20111228-1245
plugins/org.eclipse.m2e.discovery_1.0.200.20111228-1245.jar              plugins/org.eclipse.m2e.maven.runtime_1.0.200.20111228-1245
plugins/org.eclipse.m2e.editor_1.0.200.20111228-1245.jar                 plugins/org.eclipse.m2e.model.edit_1.0.200.20111228-1245.jar
plugins/org.eclipse.m2e.editor.xml_1.0.200.20111228-1245.jar             plugins/org.eclipse.m2e.refactoring_1.0.200.20111228-1245.jar
plugins/org.eclipse.m2e.jdt_1.0.200.20111228-1245.jar                    plugins/org.eclipse.m2e.scm_1.0.200.20111228-1245.jar
plugins/org.eclipse.m2e.launching_1.0.200.20111228-1245.jar              plugins/org.eclipse.m2e.usagedata_1.0.200.20111228-1245.jar
plugins/org.eclipse.m2e.lifecyclemapping.defaults_1.0.200.20111228-1245  plugins/org.sonatype.m2e.mavenarchiver_0.15.0.201109290002.jar 
```

可能很严重的`-consolelog`错误：

```
16:58:08,042 |-ERROR in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Could not create component [filter] of type [org.eclipse.m2e.logback.appender.ConsoleAppenderFilter] java.lang.ClassNotFoundException: org.eclipse.m2e.logback.appender.ConsoleAppenderFilter
        at java.lang.ClassNotFoundException: org.eclipse.m2e.logback.appender.ConsoleAppenderFilter
        at      at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:513)
        at      at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
        at      at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
        at      at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
        at      at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
        at      at ch.qos.logback.core.util.Loader.loadClass(Loader.java:110)
        at      at ch.qos.logback.core.joran.action.NestedComplexPropertyIA.begin(NestedComplexPropertyIA.java:100)
        at      at ch.qos.logback.core.joran.spi.Interpreter.callBeginAction(Interpreter.java:273)
        at      at ch.qos.logback.core.joran.spi.Interpreter.startElement(Interpreter.java:145)
        at      at ch.qos.logback.core.joran.spi.Interpreter.startElement(Interpreter.java:127)
        at      at ch.qos.logback.core.joran.spi.EventPlayer.play(EventPlayer.java:40)
        at      at ch.qos.logback.core.joran.spi.Interpreter.play(Interpreter.java:332)
        at      at ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:126)
        at      at ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:93)
        at      at ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:52)
        at      at org.eclipse.m2e.logback.configuration.LogPlugin.loadConfiguration(LogPlugin.java:190)
        at      at org.eclipse.m2e.logback.configuration.LogPlugin.configureLogback(LogPlugin.java:149)
        at      at org.eclipse.m2e.logback.configuration.LogPlugin.access$2(LogPlugin.java:112)
        at      at org.eclipse.m2e.logback.configuration.LogPlugin$1.run(LogPlugin.java:65)
        at      at java.util.TimerThread.mainLoop(Timer.java:555)
        at      at java.util.TimerThread.run(Timer.java:505) 
```

从 Eclipse 安装的软件列表：

```
 Context and Dependency Injection Tools    1.2.0.v20120504-0314-H63-Beta3  org.jboss.tools.cdi.feature.feature.group   JBoss by Red Hat
  Eclipse EGit  1.3.0.201202151440-r    org.eclipse.egit.feature.group  Eclipse EGit
  Eclipse IDE for Java EE Developers    1.4.2.20120213-0813 epp.package.jee null
  Eclipse JGit  1.3.0.201202151440-r    org.eclipse.jgit.feature.group  Eclipse JGit
  Forge Tools   1.0.0.v20120504-2048-H71-Beta3  org.jboss.tools.forge.feature.feature.group JBoss by Red Hat
  Hibernate Tools   3.4.0.v20120504-2121-H72-Beta3  org.hibernate.eclipse.feature.feature.group JBoss by Red Hat
  JBoss Archives Tools  3.2.1.v20120504-0235-H64-Beta3  org.jboss.ide.eclipse.archives.feature.feature.group    JBoss by Red Hat
  JBoss Central Community   1.0.0.v20120514-1749-H82-Beta3  org.jboss.tools.community.central.feature.feature.group JBoss by Red Hat
  JBoss JAX-RS Tools    1.2.2.v20120514-1752-H106-Beta3 org.jboss.tools.ws.jaxrs.feature.feature.group  JBoss by Red Hat
  JBoss Maven CDI Configurator  1.3.0.v20120514-1625-H96-Beta3  org.jboss.tools.maven.cdi.feature.feature.group JBoss by Red Hat
  JBoss Maven Hibernate Configurator    1.3.0.v20120514-1625-H96-Beta3  org.jboss.tools.maven.hibernate.feature.feature.group   JBoss by Red Hat
  JBoss Maven Integration   1.3.0.v20120514-1625-H96-Beta3  org.jboss.tools.maven.feature.feature.group JBoss by Red Hat
  JBoss Maven JAX-RS Configurator   1.3.0.v20120514-1625-H96-Beta3  org.jboss.tools.maven.jaxrs.feature.feature.group   JBoss by Red Hat
  JBoss Maven JPA Configurator  1.3.0.v20120514-1625-H96-Beta3  org.jboss.tools.maven.jpa.feature.feature.group JBoss by Red Hat
  JBoss Maven JSF Configurator  1.3.0.v20120514-1625-H96-Beta3  org.jboss.tools.maven.jsf.feature.feature.group JBoss by Red Hat
  JBoss Maven Project Examples  1.3.0.v20120514-1625-H96-Beta3  org.jboss.tools.maven.project.examples.feature.feature.group    JBoss by Red Hat
  JBoss Maven Seam Integration  1.3.0.v20120514-1625-H96-Beta3  org.jboss.tools.maven.seam.feature.feature.group    JBoss by Red Hat
  JBoss OpenShift Tools 2.3.0.v20120510-2034-H93-Beta3  org.jboss.tools.openshift.express.feature.feature.group JBoss by Red Hat
  JBoss Packaging Maven Configurators   1.3.0.v20120514-1625-H96-Beta3  org.jboss.tools.maven.jbosspackaging.feature.feature.group  JBoss by Red Hat
  JBoss Runtime AS Detector 1.3.0.v20120504-1621-H89-Beta3  org.jboss.tools.runtime.as.detector.feature.feature.group   JBoss by Red Hat
  JBoss Runtime Detection Core  1.3.0.v20120504-1621-H89-Beta3  org.jboss.tools.runtime.core.feature.feature.group  JBoss by Red Hat
  JBoss Tools Community Project Examples    1.2.1.v20120504-1659-H91-Beta3  org.jboss.tools.community.project.examples.feature.feature.group    JBoss by Red Hat
  JBoss Tools EGit Integration (Experimental)   2.3.0.v20120510-2034-H93-Beta3  org.jboss.tools.openshift.egit.integration.feature.feature.group    JBoss by Red Hat
  JBoss Tools Java Standard Tools   3.3.0.v20120504-2056-H66-Beta3  org.jboss.tools.jst.feature.feature.group   null
  JBoss Tools JDT Extensions    3.3.0.v20120510-2001-H58-Beta3  org.jboss.tools.common.jdt.feature.feature.group    JBoss by Red Hat
  JBoss Tools JSF   3.3.0.v20120504-0520-H88-Beta3  org.jboss.tools.jsf.feature.feature.group   JBoss by Red Hat
  JBoss Tools RichFaces 3.3.0.v20120504-0520-H88-Beta3  org.jboss.tools.richfaces.feature.feature.group JBoss by Red Hat
  JBoss Tools Source Lookup 1.3.0.v20120514-1625-H96-Beta3  org.jboss.tools.maven.sourcelookup.feature.feature.group    JBoss by Red Hat
  JBoss Tools Usage Reporting   1.1.0.v20120504-2022-H52-Beta3  org.jboss.tools.usage.feature.feature.group JBoss by Red Hat
  JBoss Tools Visual Page Editor    3.3.0.v20120504-2124-H75-Beta3  org.jboss.tools.vpe.feature.feature.group   null
  JBoss WebServices Tools   1.2.2.v20120514-1752-H106-Beta3 org.jboss.tools.ws.feature.feature.group    JBoss by Red Hat
  JBossAS Tools 2.3.0.v20120504-2054-H105-Beta3 org.jboss.ide.eclipse.as.feature.feature.group  JBoss by Red Hat
  JMX Console   1.2.0.v20120504-0232-H50-Beta3  org.jboss.tools.jmx.feature.feature.group   JBoss by Red Hat
  m2e - Maven Integration for Eclipse   1.0.200.20111228-1245   org.eclipse.m2e.feature.feature.group   Eclipse.org - m2e
  m2e - slf4j over logback logging (Optional)   1.0.200.20111228-1245   org.eclipse.m2e.logback.feature.feature.group   Eclipse.org - m2e
  Maven Integration for WTP 0.15.2.20120306-2040    org.maven.ide.eclipse.wtp.feature.feature.group JBoss by Red Hat
  Maven Profiles Management 1.3.0.v20120514-1625-H96-Beta3  org.jboss.tools.maven.profiles.feature.feature.group    JBoss by Red Hat
  Project Examples  1.2.1.v20120504-1659-H91-Beta3  org.jboss.tools.project.examples.feature.feature.group  JBoss by Red Hat
  Seam 3 Tools  1.2.0.v20120504-0314-H63-Beta3  org.jboss.tools.cdi.seam.feature.feature.group  JBoss by Red Hat 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T22:07:48.200

我设法按照以下描述的步骤安装它：

1.  [http://www.eclipse.org/m2e/download/](http://www.eclipse.org/m2e/download/)

2.  [http://help.eclipse.org/juno/index.jsp?topic=//org.eclipse.platform.doc.user/tasks/tasks-127.htm](http://help.eclipse.org/juno/index.jsp?topic=//org.eclipse.platform.doc.user/tasks/tasks-127.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T15:30:41.813

我通过下载和安装[“Java 开发人员的 Eclipse IDE”](http://www.eclipse.org/downloads/packages/eclipse-ide-java-developers/indigosr2) （即：*不是*EE 包）解决了这个问题。与 Eclipse 的 EE 版本不同，基本的 Java 版本内置了 m2e，并且开箱即用。首选项条目在那里，导入项目出现在菜单中，等等。

然后我刚刚从“Help -> Install new software...”安装了“Eclipse Java EE Developer tools”。我不知道它是否是一个完整的EE包，但EE的观点和我需要的工具都在那里。您可以将[Eclipse EE 包列表](http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/indigosr2)与上面的纯 Java 版本列表进行比较，表明 EE 包具有以下附加功能包：

*   org.eclipse.datatools（数据工具）
*   org.eclipse.jpt（Java 持久性工具）
*   org.eclipse.jsf（JavaServer 面）
*   org.eclipse.jst（？似乎是 Web Tools Platform 的一部分和 core 的一部分？）
*   org.eclipse.pde（插件开发环境）
*   org.eclipse.rse（远程系统资源管理器）
*   org.eclipse.tm（目标管理终端）
*   org.eclipse.wst（看起来支持 XSL）

# facebook - 使用 API 管理 Facebook 群组

> ID：10830286
> 
> 赞同：1
> 
> 时间：2012-05-31T08:51:58.060
> 
> 标签：facebook, api, facebook-graph-api

我们在 Facebook 有内部企业组。我们需要使用 API 来管理群组成员。不幸的是，我没有找到任何方法来加入或从 Facebook 群组中删除用户。那么，有没有办法使用 API 从 Facebook 组中删除用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:45:08.860

抱歉，目前无法在 Graph API 中使用 Groups 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-16T10:45:20.387

您看到新的 v2.1 API 版本了吗？ [https://developers.facebook.com/docs/graph-api/reference/v2.1/group/members/](https://developers.facebook.com/docs/graph-api/reference/v2.1/group/members/)

应该有助于找到您要查找的内容，您不能直接添加成员 - 但您当然可以邀请他们加入，如果您拥有管理员权限，则删除由 API 控制

# android - 将投影矩阵44分解为左、右、下、上、近、远边界值

> ID：10830293
> 
> 赞同：6
> 
> 时间：2012-05-31T08:52:22.800
> 
> 标签：android, opengl-es, qcar-sdk

任何人都可以帮助我从投影矩阵 44 中获取左、右、下、上、近和远边界值吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T03:26:57.350

[以下是Christian Rau](https://stackoverflow.com/a/10836497/758666)提到 的方程系统的分辨率：

对于正交矩阵 ：

```
near   =  (1+m34)/m33;
far    = -(1-m34)/m33;
bottom =  (1-m24)/m22;
top    = -(1+m24)/m22;
left   = -(1+m14)/m11;
right  =  (1-m14)/m11; 
```

对于透视矩阵：

```
near   = m34/(m33-1);
far    = m34/(m33+1);
bottom = near * (m23-1)/m22;
top    = near * (m23+1)/m22;
left   = near * (m13-1)/m11;
right  = near * (m13+1)/m11; 
```

[您可以用glOrtho](http://msdn.microsoft.com/en-us/library/windows/desktop/dd373965%28v=vs.85%29.aspx)和[glFrustum](http://msdn.microsoft.com/en-us/library/windows/desktop/dd373537%28v=vs.85%29.aspx)文档中定义的公式替换值 m11、m12 等，以检查它是否正确。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T15:22:46.010

首先，您可以查看这些矩阵是如何为对[`glOrtho`](http://www.opengl.org/sdk/docs/man/xhtml/glOrtho.xml)和[`glFrustum`](http://www.opengl.org/sdk/docs/man/xhtml/glOrtho.xml)（或框架中的类似函数）的相应调用定义的。接下来的步骤取决于投影的类型，可以是正投影（例如从`glOrtho`）还是透视（例如从`glFrustum`或`gluPerspective`），这可以通过查看第 3 列来决定。

现在对于正交矩阵，很容易得到两个方程：

```
right - left = 2 / m11
right + left = -2 * m14 / m11 
```

从这些你可以很容易地计算`right = (1-m14) / m11`和`left = right - 2/m11`（你可以重新检查我在心算过程中犯的任何错误）。其他两对参数也类似（注意 的符号`m33`）。

对于透视投影，您应该首先计算`near`和`far`使用`m33`and `m34`。然后您可以计算`right/left`并`bottom/top`类似于上述情况，但使用计算`near`值。

所以总而言之，一旦你知道了基于参数的矩阵公式，它真的可以归结为一堆易于求解的简单 2x2 方程组。一个更有趣的问题是，为什么您实际上需要从投影矩阵计算这些参数。如果你真的需要它们，你应该只存储它们（因为你是构造矩阵的人，无论如何）。否则，这听起来像是将 OpenGL 用于更多事情（如场景管理）的另一个实例，而不是它的实际用途，它只是一个简单的绘图 API。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-29T08:48:07.713

为了将来参考，我在下面复制了 C++ 中的近、远等值，用于具有 0 索引列主要投影矩阵的 OpenGL：

```
float near = m_projectionMatrix[3][2] / (m_projectionMatrix[2][2] - 1.0f);
float far = m_projectionMatrix[3][2] / (m_projectionMatrix[2][2] + 1.0f);
logStderr(VERBOSE, "near, far %5.2f, %5.2f...\n", near, far);

float nearBottom = near * (m_projectionMatrix[2][1] - 1) / m_projectionMatrix[1][1];
float nearTop = near * (m_projectionMatrix[2][1] + 1) / m_projectionMatrix[1][1];
float nearLeft = near * (m_projectionMatrix[2][0] - 1) / m_projectionMatrix[0][0];
float nearRight = near * (m_projectionMatrix[2][0] + 1) / m_projectionMatrix[0][0];
logStderr(VERBOSE, "nearLeft, nearRight, nearTop, nearBottom %5.2f, %5.2f, %5.2f, %5.2f...\n", nearLeft, nearRight, nearTop, nearBottom);

float farBottom = far * (m_projectionMatrix[2][1] - 1) / m_projectionMatrix[1][1];
float farTop = far * (m_projectionMatrix[2][1] + 1) / m_projectionMatrix[1][1];
float farLeft = far * (m_projectionMatrix[2][0] - 1) / m_projectionMatrix[0][0];
float farRight = far * (m_projectionMatrix[2][0] + 1) / m_projectionMatrix[0][0];
logStderr(VERBOSE, "farLeft, farRight, farTop, farBottom %5.2f, %5.2f, %5.2f, %5.2f...\n", farLeft, farRight, farTop, farBottom); 
```

# spotify - 添加为播放列表 - 循环播放曲目时出错

> ID：10830297
> 
> 赞同：1
> 
> 时间：2012-05-31T08:52:31.210
> 
> 标签：spotify

我正在尝试循环播放具有 x 曲目的专辑，然后将它们添加到播放列表中。

但我在控制台中收到以下错误消息：

`Uncaught Error: link not allowed`

代码：

```
var album = models.Album.fromURI(uri);

$('.add-playlist').live('click', function() {
    var newPlaylist = new models.Playlist('Awesome album ' + album.name);
    $.each(album.data.tracks, function(i, track) {
        console.log(i + ' ::: ' + track.name);
        newPlaylist.add(track);
    });
}); 
```

如果我在按下 .add-playlist 按钮时将单个曲目添加到播放列表中，但在遍历`album.data.tracks`数组时不会。

可能是我错过的一些小东西。;)

**更新：** 我通过删除`.data.`from`album.data.tracks`所以它只说`album.tracks`.

# browser - [浏览器]为什么 config_useragentprofile_url 不能工作

> ID：10830301
> 
> 赞同：0
> 
> 时间：2012-05-31T08:53:00.220
> 
> 标签：browser, frameworks, webkit

在Android ICS android\frameworks\base\core\res\res\values\config.xml 中，从原注释来看，config_useragentprofile_url 可以设置浏览器的header ua profile 链接。设置值后尝试，从 tcpdump 日志中，我们无法获取请求头中的 ua 配置文件链接。该代码可能无效。有谁知道为什么代码不能工作？谢谢

```
<!-- The URL that should be sent in an x-wap-profile header with an HTTP request,
     as defined in the Open Mobile Alliance User Agent Profile specification
     OMA-TS-UAProf-V2_0-20060206-A Section 8.1.1.1\. If the URL contains a '%s'
     format string then that substring will be replaced with the value of
     Build.MODEL. The format string shall not be escaped. -->
<string name="config_useragentprofile_url" translatable="false"></string> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:58:12.753

最后，我们自己实现。在 Tab.java 中，

```
 public void loadUrl(String url, Map<String, String> headers) {                                 ...                                                                                          headers.put("x-wap-profile", HERMES_UAPURL);          

} 
```

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:32:02.847

我在 ics 上有同样的问题。要启用它，必须实现 uaprofile 功能。请参考 websetting、jni、外部网络、lib 核心等的用户代理。不幸的是，由于与运营商合同的办公室政策，我无法共享我的代码。祝你好运

# objective-c - NSDate组件

> ID：10830302
> 
> 赞同：2
> 
> 时间：2012-05-31T08:53:04.570
> 
> 标签：objective-c, ios

我已阅读 Zaph 的以下答案

[iPhone - 获取给定地点/时区的当前日期和时间并将其与同一地点的另一个日期/时间进行比较的正确方法](https://stackoverflow.com/questions/7362199/iphone-correct-way-for-getting-current-date-and-time-for-a-given-place-timez)

问题是我不理解以下代码。

```
NSDate *newDate;
NSDateComponents *dateComponents = [[NSCalendar currentCalendar] components:~ NSTimeZoneCalendarUnit fromDate:[NSDate date]];
newDate = [[NSCalendar currentCalendar] dateFromComponents:dateComponents];
.... 
```

我想在NSTimeZoneCalendarUnit 之前向我解释使用~ 的原因。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:07:59.423

苹果要求他们按位给出。这是 NOT 的 C 运算符。比较[这个](http://www.cocoanetics.com/2011/12/bit-masks/)。

# javascript - Jquery 可拖动 + 可调整大小导致问题，元素不会留在它的父级中

> ID：10830307
> 
> 赞同：1
> 
> 时间：2012-05-31T08:53:19.467
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-draggable

这是 JSfiddle：http: [//jsfiddle.net/hjtBA/](http://jsfiddle.net/hjtBA/)

当您尝试将元素拖到东南角并重复此操作时，您会注意到该元素超出了边界。我注意到只有在一个元素上同时使用可拖动和可调整大小的插件时才会发生这种情况。

如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T02:57:56.127

您还需要在可调整大小时将包含设置为父级：

```
$(function(){
    $('#inner').resizable({
        containment: 'parent'        
    });
    $('#inner').draggable({
        containment: 'parent'        
    });    
});​ 
```

在这里更新：http: [//jsfiddle.net/hjtBA/97/](http://jsfiddle.net/hjtBA/97/)

# scala - scala中的类别名

> ID：10830308
> 
> 赞同：12
> 
> 时间：2012-05-31T08:53:21.637
> 
> 标签：scala, alias

是否可以在 Scala 中定义`MyAlias[A]`为`MyClass[String, A]`. 例如，`MyAlias[Int]`将指`Map[String, Int]`.

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-31T08:59:36.490

请注意，`Map`是 a `trait`，而不是 a `class`。

您仍然可以使用`type`关键字对其进行别名：

```
type StringMap[A] = Map[String, A]

val myMap: StringMap[Int] = Map("a" -> 1) 
```

这可以在 a或定义的范围`class`内完成（以及在任何方法或表达式的范围内）。`object``trait`

有时您会希望别名对其声明范围是私有的，纯粹是为了方便您的实现代码。如果您希望该类型普遍可用，[Package Objects](http://www.artima.com/scalazine/articles/package_objects.html)很有用：

```
package object mypackage {
  type StringMap[A] = Map[String, A]
} 
```

因为`Map`是一个特征（和关联的伴随对象）而不是一个类，所以您将无法直接使用它来创建实例：

```
val myMap = new StringMap[Int]
// error: trait Map is abstract; cannot be instantiated 
```

但是，如果你给一个类起别名，你仍然可以使用`new`关键字：

```
type StringHashMap[A] = HashMap[String, A]
val myMap = new StringHashMap[Int] 
```

# php - MailChimp merge_vars 除了 FNAME 和 LNAME 还接受什么？

> ID：10830311
> 
> 赞同：13
> 
> 时间：2012-05-31T08:53:38.347
> 
> 标签：php, mailchimp

我已经使用电子邮件地址+姓名实现了一个非常基本的注册，尽管我现在想添加额外的数据，例如电话号码、网站等。

我的问题是，在[API 文档](http://apidocs.mailchimp.com/api/1.3/)中，除了 FNAME 和 LNAME 之外，我还能在哪里找到支持的其他内容？

目前我有：

```
$merge_vars = array(
     'FNAME' => $fname,
     'LNAME' => $lname
); 
```

我正在使用该方法`listSubscribe`，这是上面提供的信息：

```
@param array $merge_vars optional merges for the email (FNAME, LNAME, etc.) (see examples below for handling "blank" arrays). Note that a merge field can only hold up to 255 bytes. Also, there are a few "special" keys:
                        string EMAIL set this to change the email address. This is only respected on calls using update_existing or when passed to listUpdateMember()
                        array GROUPINGS Set Interest Groups by Grouping. Each element in this array should be an array containing the "groups" parameter which contains a comma delimited list of Interest Groups to add. Commas in Interest Group names should be escaped with a backslash. ie, "," =&gt; "\," and either an "id" or "name" parameter to specify the Grouping - get from listInterestGroupings()
                        string OPTINIP Set the Opt-in IP fields. <em>Abusing this may cause your account to be suspended.</em> We do validate this and it must not be a private IP address.
                        array MC_LOCATION Set the members geographic location. By default if this merge field exists, we'll update using the optin_ip if it exists. If the array contains LATITUDE and LONGITUDE keys, they will be used. NOTE - this will slow down each subscribe call a bit, especially for lat/lng pairs in sparsely populated areas. Currently our automated background processes can and will overwrite this based on opens and clicks.

                        <strong>Handling Field Data Types</strong> - most fields you can just pass a string and all is well. For some, though, that is not the case...
                        Field values should be formatted as follows:
                        string address For the string version of an Address, the fields should be delimited by <strong>2</strong> spaces. Address 2 can be skipped. The Country should be a 2 character ISO-3166-1 code and will default to your default country if not set
                        array address For the array version of an Address, the requirements for Address 2 and Country are the same as with the string version. Then simply pass us an array with the keys <strong>addr1</strong>, <strong>addr2</strong>, <strong>city</strong>, <strong>state</strong>, <strong>zip</strong>, <strong>country</strong> and appropriate values for each

                        string date use YYYY-MM-DD to be safe. Generally, though, anything strtotime() understands we'll understand - <a href="http://us2.php.net/strtotime" target="_blank">http://us2.php.net/strtotime</a>
                        string dropdown can be a normal string - we <em>will</em> validate that the value is a valid option
                        string image must be a valid, existing url. we <em>will</em> check its existence
                        string multi_choice can be a normal string - we <em>will</em> validate that the value is a valid option
                        double number pass in a valid number - anything else will turn in to zero (0). Note, this will be rounded to 2 decimal places
                        string phone If your account has the US Phone numbers option set, this <em>must</em> be in the form of NPA-NXX-LINE (404-555-1212). If not, we assume an International number and will simply set the field with what ever number is passed in.
                        string website This is a standard string, but we <em>will</em> verify that it looks like a valid URL 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-16T15:05:07.007

在您的列表设置中，您会找到“列表字段和 *|MERGE|* 标签”。你可以在这里添加任何你想要的！

您还可以通过 api 以编程方式添加“合并变量”：

*   listMergeVarAdd
*   listMergeVarDel
*   listMergeVarUpdate

当您通过 listSubscribe 在此列表中添加用户时，只需像使用 FNAME 一样使用合并变量

```
$merge_vars = array(
     'FNAME' => $fname,
     'LNAME' => $lname,
     'PHONE' => '010203040506',
     'OTHERCUSTOM' => 'custom field'
); 
```

如果您需要更新用户信息，只需将 update_existing 标志设置为 true。

# audio - Monotouch：使用 iPhone 模拟器播放背景音频

> ID：10830313
> 
> 赞同：0
> 
> 时间：2012-05-31T08:53:42.540
> 
> 标签：audio, background, xamarin.ios, avaudioplayer

首先对不起英语不好！

我在 plist 设置了这个值

```
<key>UIBackgroundModes</key>
<array>
    <string>audio</string>
</array> 
```

并使用 AVAudioPlayer 播放音频，但是播放音频时，状态栏中的播放图标不显示，当按下主页按钮时，我听不到任何音频，当返回应用程序播放音频时，我可以听到音频，但是如果我在大约 10 秒前按下主页按钮，音频将在后台播放，直到反应应用程序我听不到任何东西，并且丢失了大约 10 秒我听不到的音频。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:04:07.713

当我上次检查时，背景音频测试是您只能在硬件设备上获得的功能。这是有道理的，因为您无法在模拟器上测试呼叫中断等。

# android - 决赛桌并在android中添加元素

> ID：10830315
> 
> 赞同：0
> 
> 时间：2012-05-31T08:54:02.760
> 
> 标签：android

我有一张决赛桌：

```
 final Item itemsList[] = new Item[]{
            new Item(R.drawable.per1,contacts.get(0).getName(),contacts.get(0).getTitle(), contacts.get(0).getPhone(),contacts.get(0).getTitle(),contacts.get(0).getEmail())

    }; 
```

这是我的问题。我想在此表中添加多个元素。我从列表“联系人”中获得的元素。如果我在“联系人”列表中有 10 个元素，我想将 10 个元素添加到“itemList”中，但我不能这样做，因为我的 itemList 是最终的并且它必须是最终的，因为我需要这种方式。如何动态地将元素数量添加到 itemList？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:09:39.987

`List`如果您需要添加未知数量的项目，您最好只使用 a ：

```
final List<Item> myList = new ArrayList<Item>();
myList.add(new Item(...));
//add more Items 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:08:57.300

制作`itemList[]`final 意味着一旦初始化就不能更改引用，而不是其内容。所以，如果你在初始化时知道​​元素的数量，`itemList`你可以这样做

```
int itemsCount = ...;
final Item itemList[] = new Item[itemsCount]; 
```

然后将其内容设置为

```
for (int i = 0; i < itemsCount; i++) {
     itemsList[i] = new Item(...);
} 
```

此外，正如 Jave 建议的那样，使用`List<>`可能更适合您的情况。

# java - 在 JDK 1.7 中找不到 jnlp.jar

> ID：10830317
> 
> 赞同：2
> 
> 时间：2012-05-31T08:54:08.157
> 
> 标签：java, jar, jnlp, java-web-start

我已经安装了 JDK 1.7，我需要制作一个 Java Web Start 应用程序。我搜索了互联网，发现您的项目构建路径中需要 jnlp.jar。

有一个类似的问题（http://stackoverflow.com/questions/7593029/where-can-i-download-jnlp-jar），用户说它在 jdk 文件夹中，特别是在 C:\Program Files\Java\ jdk1.6.0_27\sample\jnlp\servlet。

但这是针对 JDK 1.6 的。在 1.7 中没有示例文件夹，我无法通过 windows 搜索找到任何 jnlp.jar。

如果有其他使用 JNLP API 的方法，请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T08:57:51.337

实际上它是`javaws.jar`，你会在`jre/lib`目录中找到它。

# vb.net - 为什么 Paint 不绘制此图像？

> ID：10830319
> 
> 赞同：-1
> 
> 时间：2012-05-31T08:54:16.330
> 
> 标签：vb.net, custom-controls, onpaint

我正在重写我的控件中的 OnPaint 方法，该方法是直接从我自己的`ICan3D.Graphics`类生成的图像中绘制的。当我保存图像时（如您所见，该行已被注释掉）图像是正确的。但是，当表单加载时，它不会将图像作为背景显示。

```
Imports System

Namespace ICan3D

    Public Class RenderSurface
        Inherits Control

        Dim nImg As Graphics

        Protected Overrides Sub OnPaint(e As System.Windows.Forms.PaintEventArgs)
            Dim img As Bitmap = nImg.Visual
            'img.Save("C:\image.png")
            Dim nGraphDis As System.Drawing.Graphics = System.Drawing.Graphics.FromImage(img)
            Dim nPaintEventArgs As New PaintEventArgs(nGraphDis, New Rectangle(0, 0, Width, Height))
            MyBase.OnPaint(nPaintEventArgs)
        End Sub

        Private Sub RenderSurface_Resize(sender As Object, e As System.EventArgs) Handles Me.Resize
            nImg = New Graphics(Width, Height)
        End Sub

    End Class

End Namespace 
```

我正在使用 VB.net，所以所有 .net 答案都是可以接受的 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T09:21:51.317

```
Protected Overrides Sub OnPaint(e As PaintEventArgs)
    MyBase.OnPaint(e)
    e.Graphics.DrawImageUnscaled(nImg.Visual, 0, 0, Width, Height)
End Sub 
```

# mysql - 插入...选择...在重复键上

> ID：10830320
> 
> 赞同：0
> 
> 时间：2012-05-31T08:54:20.987
> 
> 标签：mysql, insert-update

我有一张这样的桌子：

```
 CREATE TABLE `UserTmp` (
`user_id` bigint(20) unsigned NOT NULL,
`nb_invit` bigint(20) unsigned DEFAULT '0',
`nb_share` bigint(20) unsigned DEFAULT '0',
`nb_sent` bigint(20) unsigned DEFAULT '0',
`total` bigint(20) unsigned DEFAULT '0',
PRIMARY KEY (`user_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 
```

我想执行 3 个这样的查询（每个表一个，以便拥有 nb_share、nb_invit 和 nb_sent）：

```
INSERT INTO UserTmp (user_id, nb_share)
  select user_id, count(share_date) as 'nb_share' 
  from Share 
  where share_date between '2012-05-21 00:00:00' and '2012-05-28 00:00:00'
ON DUPLICATE KEY UPDATE nb_share=VALUES(nb_share); 
```

nb_share 字段等于表中存在的当前用户的共享数，需要更新

目标是获得用户列表，其中包含操作数和一个总字段，该字段是用户完成的操作的总和。

VALUES(nb_share) 接缝给我所有用户而不是当前用户的 nb_share 总数。

你有解决这个问题的想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T08:55:45.457

您需要对`SELECT`by进行分组`user_id`：

```
INSERT INTO UserTmp (user_id, nb_share)
  SELECT   user_id, count(share_date)
  FROM     Share
  WHERE    share_date BETWEEN '2012-05-21 00:00:00' AND '2012-05-28 00:00:00'
  GROUP BY user_id
ON DUPLICATE KEY UPDATE nb_share = VALUES(nb_share) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-25T18:11:34.737

或者您可以使用用户定义的变量：

```
INSERT INTO UserTmp (user_id, nb_share)
  SELECT   user_id, @nbshare := count(share_date)
  FROM     Share
  WHERE    share_date BETWEEN '2012-05-21 00:00:00' AND '2012-05-28 00:00:00'
  GROUP BY user_id
ON DUPLICATE KEY UPDATE nb_share = @nbshare 
```

# android - 验证应用程序中任何操作的响应时间超过 3 秒时是否有视觉反馈

> ID：10830321
> 
> 赞同：0
> 
> 时间：2012-05-31T08:54:24.397
> 
> 标签：android, response, user-feedback

我正在开发一个 Android 应用程序，我想在其中插入来自用户的特定反馈响应。每当应用程序操作没有响应超过 3 秒时，我就想要一个视觉反馈，其中可能包括该特定实例的应用程序屏幕截图。我想知道有没有什么方法可以使用任何工具或 3rd 方应用程序集成来完成这项任务？

# asp.net - Asp .Net 上的 URL 重写

> ID：10830322
> 
> 赞同：0
> 
> 时间：2012-05-31T08:54:28.597
> 
> 标签：asp.net, url-rewriting

我使用带有 global.asax 和站点地图的 URL 重写

一切都在这样的页面上工作：“mysite/AboutUs/”但是在我传递参数的页面上，例如：“mysite/SomeProduct/12345”当使用sitemap.currentnode时它返回null。

我应该怎么办？

# java - JPA getResultList() 为 MySQL 返回 BigInteger，但为 Microsoft SQL 服务器返回 Integer

> ID：10830323
> 
> 赞同：9
> 
> 时间：2012-05-31T08:54:30.890
> 
> 标签：java, mysql, sql-server, jpa

我有以下方法：

```
Query q = getEntityManager().createNativeQuery("SELECT COUNT(1) FROM table1 WHERE column = :column_id " + "UNION " + "SELECT COUNT(1) FROM table2 WHERE column = :column_id");
q.setParameter("column_id", column_id); 
```

当我想获取计数列表（将是 2 行）时，我执行此操作：

```
List<BigInteger> counts = (List<BigInteger>) q.getResultList(); 
```

这在 MySQL 中运行良好。但是一旦我连接到 MS SQL 服务器，我就会得到一个整数对象列表：

```
List<Integer> 
```

知道为什么会有区别吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-31T13:17:44.007

JPA 定义了 JPQL 查询的返回类型，但对于本机 SQL 查询，您可以获得数据库返回的任何内容。这就是原生 SQL 查询的重点。

将您的代码更改为数字，

```
List<Number> counts = (List<Number>) q.getResultList();
long count = counts.get(0).longValue(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:01:43.550

它是在服务器端定义的

[http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_count](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_count)

“返回 SELECT 语句检索的行中 expr 的非 NULL 值的计数。结果是 BIGINT 值。”

[http://msdn.microsoft.com/en-us/library/aa258232%28v=sql.80%29](http://msdn.microsoft.com/en-us/library/aa258232%28v=sql.80%29)

“返回类型

诠释”

# git - Git repos 无法在 Redmine 中使用 Gitorious

> ID：10830327
> 
> 赞同：1
> 
> 时间：2012-05-31T08:54:49.770
> 
> 标签：git, redmine, gitorious

我正在尝试将 GIT 存储库添加到我的 redmine 安装中。

我正在使用 gitorious 进行远程管理。根据[Redmine 和 Git 集成](https://stackoverflow.com/questions/2797774/redmine-git-integration)，我添加了脚本（[http://blog.sofistes.net/2010/03/unhashing-gitorious-paths.html](http://blog.sofistes.net/2010/03/unhashing-gitorious-paths.html)），它使符号链接到存储库。这一切都很好。

但是当我将这样的 repo 添加到 Redmine 时，我收到一个错误：

> 404 - 在存储库中找不到条目或修订。

在日志文件（/var/www/redmine/default/production.log）中，我发现：

> Processing RepositoriesController#show (for 192.168.1.100 at 2012-05-31 10:46:09) [GET] 参数：{"action"=>"show", "id"=>"test-123", "controller" =>"repositories"} 布局/基础中的渲染模板渲染常见/错误（404）在 169 毫秒内完成（查看：42，DB：8）| 404 未找到 [ [http://redmine.test.com/projects/test-123/repository]](http://redmine.test.com/projects/test-123/repository])

但是，当我在 /var/www/test.com 中创建一个 git repo 并将其 (/var/www/test.com/.git/) 添加到 Redmine 时，一切都很好......

两个 repos 都归 git:git 所有，并且具有相同的权限。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-26T08:54:52.537

> 两个 repos 都归 git:git 所有，并且具有相同的权限。

存储库具有相同的权限，但 Redmine 用户可能无法访问该路径。您可以尝试将 git 用户添加到 www-data 组

```
sudo usermod -a -G www-data git 
```

或者为您的存储库路径明确设置权限：

```
sudo chmod 775 -R /projects 
```

# html - Perl 错误：写入 CGI 回复时发生错误

> ID：10830331
> 
> 赞同：1
> 
> 时间：2012-05-31T08:55:11.510
> 
> 标签：html, perl, cgi

当我添加`use CGI::Session;`到我的 cgi 文件时，我收到此错误：

> 写入 CGI 回复时出错

如果我评论那条线它工作正常。

我正在使用 cPanel 来托管我的网站。这个错误的原因是什么？这是否缺少`CGI::Session`托管服务提供商服务器上的模块？

如何解决这个问题？

代码：

```
#!/usr/local/bin/perl 
use HTML::Template; 
use DBI;
use CGI;
use CGI::Carp qw/fatalsToBrowser warningsToBrowser/;
#use CGI::Session ;

#send the obligatory Content-Type
print "Content-Type: text/html\n\n"; 

$user = '*******';
$password = '********';

#$session = CGI::Session->load();
#$q = new CGI;

$db_handle = DBI->connect ('DBI:mysql:database=amdvsfre_justclick',$user,$password) 
or die "Couldn't connect to database: $DBI::errstr\n";

#set the value of SQL query

$sql_query = "SELECT t1.request_id, t1.request_message, t2.user_name, t2.user_city , COUNT(t3.request_id), t1.request_date, t1.request_time
FROM requests t1 INNER JOIN users t2 ON t1.user_id = t2.user_id
LEFT JOIN responses t3 ON t1.request_id = t3.request_id
GROUP BY t1.request_id desc" ;

 ...
 ...
 passing the query result in template file, so that it can be displayed on the browser 
```

如果我取消注释 #use CGI::Session ；然后它给出错误。我需要导入该文件，因为我想使用会话变量。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:32:47.493

由于您显然没有按照要求获得 fatalsToBrowser，因此您需要从命令行运行程序并查看它的位置。

这样做：

```
$ /usr/local/bin/perl yourscriptname 
```

查看您收到的错误消息。

我会使用调试器来控制程序，以防错误不在 CGI::Session 中。

```
$ /usr/local/bin/perl -d yourscriptname 
```

一旦我们可以看到真正的错误消息，我们就可以帮助您解决问题。

# sql-server-2005 - SQL 查询翻转值并使其成为新表中的字段

> ID：10830332
> 
> 赞同：3
> 
> 时间：2012-05-31T08:55:14.377
> 
> 标签：sql-server-2005

我在下面有这张表

![在此处输入图像描述](../Images/eb44d6a43697857ce724794591cd5a90.png)

我如何制作这样的输出

![在此处输入图像描述](../Images/3e6f064c39787035f036eecaa4e25a45.png)

我使用此查询完成了上面的输出：

```
SELECT DISTINCT 
    C.RefVal, 
    C.CalibrationEventID, 
    C1.Result As "Trial One", 
    C2.Result AS "Trial Two", 
    C3.Result AS "Trial Three", 
    C4.Result AS "Trial Four", 
    C5.Result AS "Trial Five" 
FROM CalibrationTrials AS C 
INNER JOIN 
    (SELECT DISTINCT RefVal, Result FROM CalibrationTrials WHERE CalibrationEventID = 'CAL000001' AND RefVal = '1.0010'AND TrialNo = 1) As C1 
ON C1.RefVal = C.RefVal
INNER JOIN 
    (SELECT DISTINCT RefVal, Result FROM CalibrationTrials WHERE CalibrationEventID = 'CAL000001' AND RefVal = '1.0010'AND TrialNo = 2) As C2 
ON C2.RefVal = C.RefVal
INNER JOIN 
    (SELECT DISTINCT RefVal, Result FROM CalibrationTrials WHERE CalibrationEventID = 'CAL000001' AND RefVal = '1.0010'AND TrialNo = 3) As C3 
ON C3.RefVal = C.RefVal
INNER JOIN 
    (SELECT DISTINCT RefVal, Result FROM CalibrationTrials WHERE CalibrationEventID = 'CAL000001' AND RefVal = '1.0010'AND TrialNo = 4) As C4 
ON C4.RefVal = C.RefVal
INNER JOIN 
    (SELECT DISTINCT RefVal, Result FROM CalibrationTrials WHERE CalibrationEventID = 'CAL000001' AND RefVal = '1.0010'AND TrialNo = 5) As C5 
ON C5.RefVal = C.RefVal

WHERE C.CalibrationEventID = 'CAL000001' AND C.RefVal = '1.0010'
ORDER BY C.RefVal, C.CalibrationEventID 
```

显然，使用此查询，输出仅固定为一个 RefVal，即“1.0010”

为 CalibrationEventID 的每个 RefVal 输出 image2 格式的正确查询是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:31:54.743

以下是如何为查询使用[PIVOT子句：](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.90%29.aspx)

```
SELECT
  RefVal,
  CalibrationEventID,
  [1] AS [Trial One],
  [2] AS [Trial Two],
  [3] AS [Trial Three],
  [4] AS [Trial Four],
  [5] AS [Trial Five],
  [6] AS [Trial Six]
FROM CalibrationTrials
PIVOT (
  MAX(Result) FOR TrialNo IN ([1], [2], [3], [4], [5], [6])
) AS p 
```

以上假设您的表仅包含 columns `RefVal, CalibrationEventID, TrialNo, Result`。如果表中有更多列，则应先分别选择这四个，然后应用 PIVOT。这里：

```
SELECT
  RefVal,
  CalibrationEventID,
  [1] AS [Trial One],
  [2] AS [Trial Two],
  [3] AS [Trial Three],
  [4] AS [Trial Four],
  [5] AS [Trial Five],
  [6] AS [Trial Six]
FROM (
  SELECT
    RefVal,
    CalibrationEventID,
    TrialNo,
    Result
  FROM CalibrationTrials
) AS c
PIVOT (
  MAX(Result) FOR TrialNo IN ([1], [2], [3], [4], [5], [6])
) AS p 
```

这是必需的，因为 PIVOT 查询本质上是一种特殊情况的 GROUP BY 查询。*除了隐式*`Result`参与分组之外的所有列。这就是为什么你应该摆脱这种分组中不需要的那些。

 *这是另一种方法，没有 PIVOT：

```
SELECT
  RefVal,
  CalibrationEventID,
  MAX(CASE TrialNo WHEN 1 THEN Result END) AS [Trial One],
  MAX(CASE TrialNo WHEN 2 THEN Result END) AS [Trial Two],
  MAX(CASE TrialNo WHEN 3 THEN Result END) AS [Trial Three],
  MAX(CASE TrialNo WHEN 4 THEN Result END) AS [Trial Four],
  MAX(CASE TrialNo WHEN 5 THEN Result END) AS [Trial Five],
  MAX(CASE TrialNo WHEN 6 THEN Result END) AS [Trial Six]
FROM CalibrationTrials
GROUP BY
  RefVal,
  CalibrationEventID 
```*

# javascript - Ext.Ajax.request 在jQuery.ajax 发送GET 时发送OPTIONS 请求跨域

> ID：10830334
> 
> 赞同：9
> 
> 时间：2012-05-31T08:55:25.847
> 
> 标签：javascript, jquery, ajax, sencha-touch

我有一个使用 Ext.Ajax.request 跨域调用我的 Web 服务的 Sencha Touch 应用程序。由于我已经构建了 Web 服务，因此我已启用它来访问跨域请求。然而，Ext 首先发送一个 OPTIONS 请求作为握手，然后是一个 GET 请求，而 jQuery.ajax 只是发送一个 GET 请求。由于我无法控制的情况，托管服务提供商不支持 OPTIONS 请求。目前，我对 ajax 请求使用 jQuery，对应用程序的其余部分使用 Sencha Touch。我真的不想为此加载 jQuery 库。

谁能解释一下为什么 Ext.Ajax 发送一个 OPTIONS 请求，有没有办法让它只发送一个 GET？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-06T09:40:52.000

在`Ext.Ajax.request`配置中，设置`useDefaultXhrHeader`为 false。这将阻止额外的 OPTIONS 请求。

根据[文档](http://docs.sencha.com/touch/2-0/#!/api/Ext.Ajax)：

> 将此设置为 false 以不随每个请求发送默认 Xhr 标头 (X-Requested-With)。发出 CORS（跨域）请求时，应将其设置为 false。

我的经验是 OPTIONS 调用消失了，我得到了我期望的 POST 动词。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-15T12:33:25.900

**放**

`Ext.Ajax.useDefaultXhrHeader = false`

**前**

```
 Ext.Ajax.request({
        url: 'www.yourUrl.com',
        .....
    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-08T14:01:21.827

或者您可以使用这样的方法进行设置：

```
Ext.Ajax.setUseDefaultXhrHeader(false);
Ext.Ajax.request({
                    url: "http://yoururl.domain",
                    success: function(response, eOpt) {
                        console.log('success');
                    },
                    failure: function(response, eOpt) {
                        console.log('error');
                    }
                }); 
```

# c# - 使用 HTTPWEBREQUEST 从 URL 读取响应

> ID：10830344
> 
> 赞同：1
> 
> 时间：2012-05-31T08:56:27.033
> 
> 标签：c#, asp.net

我必须阅读来自[http://www.bk.com/en/us/restaurant-locator/index.html?s=89165](http://www.bk.com/en/us/restaurant-locator/index.html?s=89165)的回复 。我使用了以下代码但没有得到所有回复。提前致谢。

```
protected void Page_Load(object sender, EventArgs e)
{

    string sUrl = "http://www.bk.com/en/us/restaurant-locator/index.html?s=89165";
    XmlDocument rssDoc = new XmlDocument();
    XmlTextReader rssReader = new XmlTextReader(sUrl.ToString());

    WebRequest wrGETURL;
    wrGETURL = WebRequest.Create(sUrl);

    Stream objStream;
    objStream = wrGETURL.GetResponse().GetResponseStream();
    StreamReader objReader = new StreamReader(objStream, Encoding.UTF8);
    WebResponse wr = wrGETURL.GetResponse();
    Stream receiveStream = wr.GetResponseStream();
    StreamReader reader = new StreamReader(receiveStream, Encoding.UTF8);
    string content = reader.ReadToEnd();
    Response.Write(content);
   } 
```

有没有人可以帮助所有数据出现在网页上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:01:28.813

除非您的方法有特定原因，否则我会使用 webclient。

```
Console.Write("\nPlease enter a URI (for example, http://www.contoso.com): ");
string remoteUri = Console.ReadLine();

// Create a new WebClient instance.
WebClient myWebClient = new WebClient();
// Download home page data.
Console.WriteLine("Downloading " + remoteUri);                        
// Download the Web resource and save it into a data buffer.
byte[] myDataBuffer = myWebClient.DownloadData (remoteUri);

// Display the downloaded data.
string download = Encoding.ASCII.GetString(myDataBuffer);
Console.WriteLine(download);

Console.WriteLine("Download successful."); 
```

上面的例子直接来自 MSDN 文章。

[http://msdn.microsoft.com/en-us/library/xz398a3f.aspx](http://msdn.microsoft.com/en-us/library/xz398a3f.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:01:51.597

首先，您需要解决从网站下载 HTML 的方式。

1.  使用该`XMLDocument.Load`方法并将您要加载的文档的 URL 传递给它。
2.  使用`WebClient.DownloadString`方法。

两者都将在大约 3 行中下载页面文本，从而使您的上述代码更清晰。

其次，您不能依赖第三方网站来创建有效的 XML/XHTML 代码，这意味着当您尝试使用 XMLDocument 解析内容时，它很可能会失败。

第三，可能更重要的是，许多网站禁止您使用这种方法“抓取”内容。您可能需要仔细检查您是否被允许。

最后.. 如果您向我们提供有关您希望在该页面中找到的内容的想法，我们可能会为您提供进一步的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:17:02.963

在此处尝试此代码...

```
 System.Net.HttpWebRequest _HttpWebRequest = (System.Net.HttpWebRequest)System.Net.HttpWebRequest.Create(_URL);

        _HttpWebRequest.AllowWriteStreamBuffering = true;

        // set timeout for 20 seconds (Optional)
        _HttpWebRequest.Timeout = 20000;

        // Request response:
        System.Net.WebResponse _WebResponse = _HttpWebRequest.GetResponse();

        // Open data stream:
        System.IO.Stream _WebStream = _WebResponse.GetResponseStream(); 
```

# ssrs-2008 - SSRS 2008 R2 + 授予用户的权限不足以执行此操作。（rsAccess Denied）

> ID：10830346
> 
> 赞同：5
> 
> 时间：2012-05-31T08:56:48.747
> 
> 标签：ssrs-2008

我花了几个小时来解决这个问题，现在我放弃了。

我希望有人可以帮助我。

SSRS 2008 R2 报表服务器已启动并运行，我使用 BIDS 设计了一个示例报表并成功部署。

作为管理员，我可以查看所有内容并运行示例报告。

我在这里想要实现的是限制用户查看文件夹和报告的访问权限。

这就是我为实现这一目标所做的工作：

1.  在本地服务器（安装 SQL 服务器的地方）创建了几个组

    ```
    SQLReportUsers - Users who has access to SQL Server Reporting Services (Web) 
    Finance - Users who can access to Finance folder in Home Folder
    SalesTeam - Users who can access to SalesTeam Folder in Home folder 
    ```

2.  我创建了用户并将他们分配给财务/销售团队组之一，他们都属于 SQLReportUsers 组。

3.  拥有 SQLReportUsers 组的原因是甚至限制任何随机用户访问报告服务。创建“每个人”将允许访问它（即使他们无法看到没有访问项目（文件夹、报告）的权限的任何内容。在 Home foder 中，我将 SQLReportUsers 作为浏览器。

4.  部署到 Finance 文件夹和 SalesTeam 文件夹的示例报表。数据源和数据集位于主文件夹中，其他用户看不到它们（我删除了）

5.  我在 SQL Server 中创建了 SQLReport 用户帐户，我想将其用作访问 SQL 中数据的中心点。然后在数据源的属性（现在只有一个）下，我使用了“在报表服务器中安全存储的凭据”并提供了用户名和密码。测试连接正常。

6.  我创建了一个测试用户（Windows server 2003）然后分配给 SQLReportUsers 和 Finance。

7.  打开 Internet Explorer 并成功登录报告服务。正如预期的那样，此用户帐户只能看到财务文件夹。在财务文件夹中，有示例报告。

问题是当我点击报告时，它说

'报告处理过程中发生错误。(rsProcessingAborted) 授予用户“MSERVER-DELL\test2”的权限不足以执行此操作。(rsAccessDenied)'

一切正常，但用户无法打开报告。

我尝试了“安全存储在报表服务器中的凭据”下的所有选项

我尝试了“连接到数据源时用作 Windows 凭据”（不仅是报告帐户，还有我的管理员帐户）以及“在连接到数据源后模拟经过身份验证的用户。

一切都没有奏效。我尝试了所有可能的组合，但没有奏效。

在报告项的处理选项下，我做了'缓存报告的临时副本。几分钟后过期报告副本：在我的管理员访问权限下 30' 然后返回用户帐户，用户可以提取报告。

这意味着我是用户帐户遇到问题的数据源。

我想知道哪里出错了。

你能帮帮我吗？

感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T20:53:34.030

我遇到了与此完全相同的问题，并且解决方案几乎与 Ken Mc 所说的完全相同。我试图打开的报告包含共享数据源和共享数据集。我已授予经过身份验证的用户访问数据源的权限，但完全忘记了数据集，而且神秘的错误消息从未让我遇到这个问题。

因此，总而言之，如果您使用任何外部（共享）数据源或数据集，请确保为您在该文件夹上的使用启用正确的安全角色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:41:16.537

我认为问题确实在您的 DS 上。如果用户有浏览器权限，他应该能够看到报告。

尝试将您的管理员用户凭据添加到数据源，看看它是否有效。

![在此处输入图像描述](../Images/9e9beb8b799cc219e2cf543c979814a9.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T07:43:34.947

![数据源连接设置](../Images/b6343a012d7490931c3f0180faddd881.png)

设置数据源时，连接设置应如下所示。对我来说，您似乎拥有由运行报告集的用户提供的凭据。我错了，但你能把你的数据源设置的截图放上去吗

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T23:49:58.340

我有一个类似的问题。该报告使用了一个共享数据源，该数据源保存在主文件夹下的共享文件夹中。使用报表管理器 (\server\reports)，我在共享文件夹上选择安全性并添加具有浏览权限的用户组。那解决了它。我之前已将具有浏览权限的用户组添加到主文件夹属性，并作为系统用户添加到站点设置安全性。

我正在为我的网站使用 Windows 身份验证，所以我只是将域用户添加为安全组，但我确信其他组应该也可以工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-30T21:20:42.960

尽管问这个问题已经 4 年了，但这仍然是我遇到的第一个问题。所以我认为值得分享有效的修复程序。最终我不得不删除缓存的凭据，如下所述：[https ://stackoverflow.com/a/22234961/6576560](https://stackoverflow.com/a/22234961/6576560)

基本上，启动控制面板 > 凭证管理器并在那里删除存储的凭证。Windows 一直在缓存错误的凭据，并且不会使用我的*实际*登录名。

我希望这可以帮助一些未来的读者。

# php - 在 htaccess 重定向中发送的值错误

> ID：10830349
> 
> 赞同：1
> 
> 时间：2012-05-31T08:56:55.363
> 
> 标签：php, apache, .htaccess, codeigniter, mod-rewrite

人们，我遇到了htaccess的问题。我正在使用 codeigniter 作为框架。我当前使用的代码是：

```
RewriteCond %{HTTP_HOST} !^www\.
RewriteCond %{HTTP_HOST} ([a-zA-Z0-9_-]+)\.example\.(.*+) [NC]
RewriteCond %{REQUEST_URI} /index([0-9]+) [NC]
RewriteRule .* /index.php/main_controller/method/%1 [QSA,L] 
```

现在我想做的是将 %1 作为一个值发送到我的 'main_controller' 控制器的名为 'method' 的方法。问题：不是发送进来的值（[a-zA-Z0-9_-]+），而是发送进来的值（[0-9]+），如果我发送%2应该是这种情况....我想发送传入的值（[a-zA-Z0-9_-]+），比如说，如果 url 是

> somevalue.example.com/index33

它正在发送`33`而不是`somevalue`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:23:19.180

```
RewriteCond %{HTTP_HOST} !^www\.
RewriteCond %{HTTP_HOST} ^([^.]+)\.example\.(.*+) [NC]
RewriteRule /index([0-9]+) /index.php/main_controller/method/%1/$1 [QSA,L] 
```

所以，愚弄我。要从 URI 中获取变量，您不必将其放入 REQUEST_URI，只需将其放入 Rewrite rule 即可，RewrideCond 中的变量是在 %1 中获得的，而 ([0-9]+) 中的变量是从 RewriteRule /index([0 -9]+) 获得 1 美元。希望它也可以帮助其他人

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:07:25.437

```
RewriteCond %{HTTP_HOST} !^www\.
RewriteCond %{REQUEST_URI} /index([0-9]+) [NC]
RewriteCond %{HTTP_HOST} ^([^.]+)\.example\.(.*+) [NC]
RewriteRule .* /index.php/main_controller/method/%1 [QSA,L] 
```

# sql - SQL Server CAST / CONVERT 到特定的数字文化

> ID：10830350
> 
> 赞同：3
> 
> 时间：2012-05-31T08:56:57.367
> 
> 标签：sql, sql-server, sql-server-2008, internationalization

来自 Oracle 的背景让我无法相信 SQL Server 如何让我为这样一个微不足道的问题而烦恼。

我只想将列中的数字解析`varchar`为数字列。问题是，数字不是美式格式，而是德式格式。这意味着，小数点和数字组分隔符是互换的。

例子：

```
1.767,13 equals one thousand and seven hundred ... 
```

我浏览了每一篇 MSDN 文章。`CAST`不接受任何附加参数。`CONVERT`可以采用一种似乎只适用于日期/时间和货币转换的*样式。*此外，我发现`TRY_PARSE`它需要一个*文化*参数，但在 2008 版本中似乎还没有。

我想出了一个杂乱无章的解决方案，但那不可能！

```
cast(replace(replace([TOTALVALUE],'.',''), ',','.') as numeric(20,2)) 
```

首先删除数字组分隔符，然后将小数点从逗号更改为点。它有效，但它是否强大等。

感谢您的评论和回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:10:46.017

很抱歉让您失望，但是是的，

```
cast(replace(replace([TOTALVALUE],'.',''), ',','.') as numeric(20,2)) 
```

是这样做的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T19:30:32.120

为了完整性 -[这里](http://msdn.microsoft.com/en-us/library/hh213316.aspx)是 PARSE 的 MSDN 文档的链接，带有代码示例和文化字符串表，即美国英语的“en-US”，德语的“de-DE”等...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T09:03:51.137

抱歉，这对您没有帮助，但 SQL Server 2012 具有文化感知`PARSE`功能

# arrays - 为数组中的所有项目选择单个属性

> ID：10830353
> 
> 赞同：1
> 
> 时间：2012-05-31T08:57:05.727
> 
> 标签：arrays, powershell

我有以下情况：

*   `$catalogitems`定义 s 的集合`CatalogItem`。
*   每个都`CatalogItem`定义了一个名为 的 NoteProperty `Policies`，其中包含一个`Policy`实例集合。
*   每个`Policy`都有一个`GroupUserName`System.String 类型的属性。

我的问题是，我如何`CatalogItem`以这样的方式按摩 s，使我得到每个s`CatalogItem`数组`GroupUserName`（即它们之间没有额外的`Policy`对象步骤）？

我尝试了以下方法：

```
$catalogitems | Select-Object @{Name="GroupUserNames"; Expression = {($_ | Select-Object -ExpandProperty Policies | Select-Object GroupUserName)}} 
```

这似乎不是正确的方法，因为它返回的结果如下：

```
@{GroupUserName=BUILTIN\Administrators}
{@{GroupUserName=BUILTIN\Administrators}, @{GroupUserName=MYMACHINE01\Administrator}} 
```

“ `@{...}`”符号表明（在我看来）它以哈希图而不是数组的形式返回结果。更糟糕的是，每个结果元素似乎也作为键值对返回？

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:03:21.677

我仍然不太确定我是否了解您的对象的外观以及您想要从它们中得到什么，但可能类似于以下内容：

```
$catalogitems | ForEach-Object {
  $_ | Add-Member -PassThru NoteProperty GroupUserNames (@(
    $_ | Select-Object -ExpandProperty Policies |
         Select-Object -ExpandProperty GroupUserName
  ))
} 
```

可以缩短（在 shell 中，不建议在脚本中）

```
$catalogitems | %{ $_ | Add-Member -p NoteProperty GroupUserNames (@($_|%{$_.Policies}|%{$_.GroupUserName})) } 
```

# scala - Scalacheck 忽略了提供的生成器

> ID：10830355
> 
> 赞同：5
> 
> 时间：2012-05-31T08:57:18.857
> 
> 标签：scala, sbt, scalacheck

我正在尝试实现一个简单的属性检查，但 Scalacheck 忽略了我的生成器。我在这里做错了什么？

```
object AlgorithmTest extends Properties("Algorithm") {
  property("Test") = forAll (Gen.choose(0,10)) (n => n>=0 & n<10)
} 
```

这就是 SBT 的结果

```
[info] ! Algorithm.Test: Falsified after 12 passed tests. [info] >
ARG_0: -1 [error] Failed: : Total 1, Failed 1, Errors 0, Passed 0,
Skipped 0 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T12:24:22.290

看起来传递给`forAll`方法的 Shrink 实例在搜索较小的反例时没有使用生成器。如果您将您的财产更改为：

```
property("Test") = Prop.forAllNoShrink(Gen.choose(1, 10)) (n => n >= 0 && n < 10) 
```

然后它应该正确地失败：

```
[info] ! Algorithm.Test: Falsified after 7 passed tests.
[info] > ARG_0: 10
[error] Failed: : Total 1, Failed 1, Errors 0, Passed 0, Skipped 0 
```

可视化收缩值的一种方法是使用以下`Prop.collect`方法：

```
property("Test") = Prop.forAll(Gen.choose(1, 10)) { n =>
  Prop.collect(n) { n >= 0 && n < 10 }
} 
```

然后收集的值如下所示：

```
[info] ! Algorithm.Test: Falsified after 40 passed tests.
[info] > ARG_0: -1
[info] > Collected test data: 
[info] 17% 3
[info] 17% 1
[info] 15% 6
[info] 12% 9
[info] 10% 2
[info] 10% 5
[info] 7% 4
[info] 7% 8
[info] 2% -1
[info] 2% 7 
```

在哪里可以看到在收缩过程中使用了 -1。

# javascript - 如何在不舍入或修剪零的情况下处理我的下拉列表的十进制值

> ID：10830356
> 
> 赞同：0
> 
> 时间：2012-05-31T08:57:21.977
> 
> 标签：javascript, jquery, decimal, rounding

我有一个带有十进制值的下拉列表。（格式化为字符串）

```
<select id="SizeBox">
   <option id="size_5" value="14.00">14</option>
   <option id="size_6" value="16.00">16</option>
   <option id="size_7" value="18.00">18</option>
   <option id="size_8" value="20.00">20</option>
   <option id="size_9" value="24.00">24</option>
   <option id="size_10" value="28.00">28</option>
   <option id="size_11" selected="selected" value="28.35">28,35</option>
   <option id="size_12" value="36.00">36</option>
</select> 
```

我总是取选定的值并将其保存在一个变量中：

```
var backupSize = "28.35"; 
```

当用户选择另一个大小并想要撤消他的更改时，我提供了一个重置​​按钮，该按钮应该再次选择 backupSize 值。

```
SelectSize(parseFloat(backupSize).toFixed(2));

function SelectSize(size) {
   $('#SizeBox').val(size);
} 
```

问题是使用这个 toFixed 方法会删除我的小数精度并将值 28.00 传递给 SelectSize 函数。当然，我的列表中没有具有此值的选项，因此重置功能失败。

如果我在没有 toFixed(2) 部分的情况下使用 SelectSize 函数，则“20.00”之类的值将作为“20”传递，并且 SelectSize 函数也将无法重置下拉框中的大小。

我已经搜索了处理这些十进制数字的函数，就像字符串一样，但到目前为止没有成功。我该如何解决这个问题？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:21:23.763

这是几乎可以使用任何值的东西：工作示例：http: [//jsfiddle.net/4DSNS/2/](http://jsfiddle.net/4DSNS/2/)

```
var backupSize = 20
var backupSize = 28.35
var backupSize = "28.35"
var backupSize = "20.00"
var backupSize = "20"
var backupSize = "28.35"
var backupSize = "28,35"
function SelectSize(size) {
   size = size.toString().replace(',','.');
   parseFloat(size).toFixed(2);
   $('#SizeBox').val(size);
}

SelectSize(backupSize); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:14:38.277

像这样修改您的 selectSize 函数：

```
SelectSize(backupSize);

function SelectSize(size) {
    $("#sizebox option").attr("selected","");
    $("#sizebox option[value='"+size+"']").attr("selected","selected");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T09:19:31.940

你好 tdk 请看这个**工作演示** [http://jsfiddle.net/B3Uwj/1/](http://jsfiddle.net/B3Uwj/1/)

如果我错过了什么，请告诉我，这按预期工作正常。IE

它在通过 20.00 时起作用，它不会失败引用：

> 如果我在没有 toFixed(2) 部分的情况下使用 SelectSize 函数，则“20.00”之类的值将作为“20”传递，并且 SelectSize 函数也将无法重置下拉框中的大小。

**jQuery代码**

```
var backupSize = "20.00";

SelectSize(parseFloat(backupSize).toFixed(2));

function SelectSize(size) {
    alert("Size is (Preserving the .00 ==> " + size);
   $('#SizeBox').val(size);
} 

// mini jQuery plugin that formats to two decimal places
    (function($) {
        $.fn.currencyFormat = function() {
            this.each( function( i ) {
                $(this).change( function( e ){
                    if( isNaN( parseFloat( this.value ) ) ) return;
                    this.value = parseFloat(this.value).toFixed(2);
                });
            });
            return this; //for chaining
        }
    })( jQuery );

    // apply the currencyFormat behaviour to elements with 'currency' as their class
    $( function() {
        $('.currency').currencyFormat();
    });​ 
```

# javascript - javascript toISOString() 忽略时区偏移

> ID：10830357
> 
> 赞同：188
> 
> 时间：2012-05-31T08:57:24.160
> 
> 标签：javascript, datetime, timezone-offset

我现在正在尝试将 Twitter 日期时间转换为本地 iso 字符串（对于 prettyDate）2 天。我只是没有得到正确的当地时间..

我使用以下功能：

```
function getLocalISOTime(twDate) {
    var d = new Date(twDate);
    var utcd = Date.UTC(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours(),
        d.getMinutes(), d.getSeconds(), d.getMilliseconds());

    // obtain local UTC offset and convert to msec
    localOffset = d.getTimezoneOffset() * 60000;
    var newdate = new Date(utcd + localOffset);
    return newdate.toISOString().replace(".000", "");
} 
```

在 newdate 中一切正常，但 toISOString() 再次将其扔回原来的时间...谁能帮我从 Twitterdate 中获取 iso 中的当地时间，格式为：Thu, 31 May 2012 08:33:41 +0000

* * *

## 回答 #1

> 赞同：362
> 
> 时间：2015-01-26T11:50:02.183

`moment.js`很棒，但有时您不想为简单的事情提取大量依赖项。

以下也有效：

```
 var tzoffset = (new Date()).getTimezoneOffset() * 60000; //offset in milliseconds
    var localISOTime = (new Date(Date.now() - tzoffset)).toISOString().slice(0, -1);

    console.log(localISOTime)  // => '2015-01-26T06:40:36.181'
```

`slice(0, -1)`摆脱了代表祖鲁时区的尾随，`Z`可以用您自己的时区替换。

* * *

## 回答 #2

> 赞同：135
> 
> 时间：2016-06-06T15:35:01.540

我不使用的解决方案`moment`是将其转换为时间戳，添加时区偏移量，然后转换回日期对象，然后运行`toISOString()`

```
var date = new Date(); // Or the date you'd like converted.
var isoDateTime = new Date(date.getTime() - (date.getTimezoneOffset() * 60000)).toISOString(); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-08-05T20:05:14.867

moment.js FTW ！！！

只需将您的日期转换为一个时刻并随心所欲地对其进行操作：

```
var d = new Date(twDate);
var m = moment(d).format();
console.log(m);
// example output:
// 2016-01-08T00:00:00-06:00 
```

[http://momentjs.com/docs/](http://momentjs.com/docs/)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-09-19T22:33:38.743

下面这个日期函数不需要额外的脚本库就可以达到预期的效果。基本上它只是一个简单的以正确格式连接的日期组件，以及对 Date 对象原型的扩充。

```
 Date.prototype.dateToISO8601String  = function() {
    var padDigits = function padDigits(number, digits) {
        return Array(Math.max(digits - String(number).length + 1, 0)).join(0) + number;
    }
    var offsetMinutes = this.getTimezoneOffset();
    var offsetHours = offsetMinutes / 60;
    var offset= "Z";    
    if (offsetHours < 0)
      offset = "-" + padDigits(offsetHours.replace("-","") + "00",4);
    else if (offsetHours > 0) 
      offset = "+" + padDigits(offsetHours  + "00", 4);

    return this.getFullYear() 
            + "-" + padDigits((this.getUTCMonth()+1),2) 
            + "-" + padDigits(this.getUTCDate(),2) 
            + "T" 
            + padDigits(this.getUTCHours(),2)
            + ":" + padDigits(this.getUTCMinutes(),2)
            + ":" + padDigits(this.getUTCSeconds(),2)
            + "." + padDigits(this.getUTCMilliseconds(),2)
            + offset;

}

Date.dateFromISO8601 = function(isoDateString) {
      var parts = isoDateString.match(/\d+/g);
      var isoTime = Date.UTC(parts[0], parts[1] - 1, parts[2], parts[3], parts[4], parts[5]);
      var isoDate = new Date(isoTime);
      return isoDate;       
}

function test() {
    var dIn = new Date();
    var isoDateString = dIn.dateToISO8601String();
    var dOut = Date.dateFromISO8601(isoDateString);
    var dInStr = dIn.toUTCString();
    var dOutStr = dOut.toUTCString();
    console.log("Dates are equal: " + (dInStr == dOutStr));
} 
```

用法：

```
var d = new Date();
console.log(d.dateToISO8601String()); 
```

希望这对其他人有帮助。

编辑

更正了评论中提到的 UTC 问题，并感谢[Alex](https://stackoverflow.com/questions/5802461/javascript-which-browsers-support-parsing-of-iso-8601-date-string-with-date-par#20223090)的`dateFromISO8601`功能。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-07-23T04:58:26.370

获取当前日期和时间将非常有帮助。

```
var date=new Date();
  var today=new Date(date.getTime() - (date.getTimezoneOffset() * 60000)).toISOString().replace(/T/, ' ').replace(/\..+/, ''); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-08-01T18:52:20.533

使用`moment.js`，您可以使用以下`keepOffset`参数`toISOString`：

`toISOString(keepOffset?: boolean): string;`

`moment().toISOString(true)`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-18T12:38:23.577

Moment js 解决方案是

```
var d = new Date(new Date().setHours(0,0,0,0));
m.add(m.utcOffset(), 'm')
m.toDate().toISOString()
// output "2019-07-18T00:00:00.000Z" 
```

# java - 运行可执行 Jar 时出现问题

> ID：10830361
> 
> 赞同：0
> 
> 时间：2012-05-31T08:57:42.447
> 
> 标签：java, jar

我在运行我创建的可执行 jar 时遇到了很多问题。

首先，当我通过 Eclipse（靛蓝）中的常用方法创建 jar 时遇到了很多问题。所以我切换到 Fatjar 插件。这解决了大多数问题。

但不是全部，我还有一些问题。例如 ：

![在此处输入图像描述](../Images/3dfefcd570d499ab1fb20fa7adc96925.png)

我的项目结构是这样的。

![在此处输入图像描述](../Images/48d5ad3de52fcf4a89d28ce76ec57a95.png)

通过创建 jar，我已经准备好将 dir 包含在属性文件中，但他仍然没有找到它？！

在eclipse中运行时我没有问题。

有什么建议么。谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:01:34.407

jar 中的文件不再是`File`（对文件系统），它是 jar 的资源，请参阅[如何从 jar 加载属性文件](https://stackoverflow.com/questions/9349044/load-properties-from-resources-folder-within-jar)

**另见**

*   [在 jar 中加载属性文件](https://stackoverflow.com/questions/2815404/load-properties-file-in-jar)

# inno-setup - 为所有用户安装应用程序和数据库

> ID：10830365
> 
> 赞同：6
> 
> 时间：2012-05-31T08:57:55.380
> 
> 标签：inno-setup

我正在尝试使用最新的 inno 设置来部署我的程序。似乎我不能（也不推荐）将我的程序安装到 Program Files 文件夹，因为它会给出限制（例如，我的程序在使用修改数据库的程序部分时总是会出现问题，除非它以管理员）。我在某处读到我们应该要求 inno setup 安装我们的程序，`CSIDL_APPDATA`但我并不精通 inno setup。如何使用 Inno 设置执行此操作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T09:33:43.453

应用程序本身应安装到`{pf}`（程序文件）下面的文件夹中。然而，应用程序数据（或数据库）应放入`{commonappdata}`. 如果数据库要由普通用户修改，则需要设置此文件夹的权限（使用`Permissions`参数）。如果是用户特定的，他们可以将默认值复制到用户的 appdata 文件夹并进行修改。

```
[Dirs]
Name: {commonappdata}\i-Catcher Console; permissions: everyone-modify admins-full; 
```

当使用具有内置于数据库本身的 UI 的 Access 应用程序时，就会出现复杂情况。在这种情况下，两个位置都一样糟糕（`{commonappdata}/blah`稍微好一点），但您需要根据需要设置权限。

# java - 如何使扫描仪正确读取转义字符？

> ID：10830366
> 
> 赞同：8
> 
> 时间：2012-05-31T08:57:55.910
> 
> 标签：java, java.util.scanner

我正在从一个文件中读取，该文件在一行上读取类似 all 的内容：

```
Hello World!\nI've been trying to get this to work for a while now.\nFrustrating.\n 
```

我的扫描仪从文件中读取并将其放入字符串中：

```
Scanner input = new Scanner(new File(fileName));
String str = input.nextLine();
System.out.print(str); 
```

现在，我希望输出为：

```
Hello World!
I've been trying to get this work for a while now.
Frustrating. 
```

但相反，我得到与输入完全相同的东西。也就是说，每个 \n 都包含在输出中，并且所有内容都在一行而不是单独的行上。

我认为 Scanner 能够正确读取转义字符，但它会将其复制到字符串上，就像它是 \\n。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T09:08:57.130

如果`\n`写入的是您不能使用的文件，`nextLine()`因为没有`\n`（行尾）而是有`\\n`（两个字符）。

而是尝试使用分隔符：

```
 Scanner sc = new Scanner(new File("/home/alain/Bureau/ttt.txt"));
    sc.useDelimiter("\\\\n");
    while(sc.hasNext()){
        System.out.println(sc.next());
    } 
```

输出 ：

> 你好世界！
> 
> 我一直在努力让它工作一段时间。
> 
> 令人沮丧。

编辑：

如果您想阅读文件并将`\n`文本中的 替换为实际的 EOL。您可以简单地使用：

```
Scanner sc = new Scanner(new File("/home/alain/Bureau/ttt.txt"));

//loop over real EOL
while(sc.hasNextLine()){

     //Replace the `\n` in the line with real EOL.
     System.out.println(sc.nextLine().replace("\\n", System.getProperty("line.separator")));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T08:59:57.397

不，`Scanner`不会为你这样做。您必须自己进行翻译。

（请注意，如果您使用`sc.useDelimiter("\\\\n")`其他人建议的方法，您将破坏普通`next()`方法的功能，并且`nextLine()`可能无法按预期运行。）

这是我将如何解决它的草图：

改变

```
Scanner input = new Scanner(new FileReader(fileName)); 
```

到

```
Scanner input = new Scanner(new JavaEscapeReader(new FileReader(fileName)));
                            ^^^^^^^^^^^^^^^^^^^^^                        ^ 
```

哪里`JavaEscapeReader`会像这样延伸[`FilterReader`](http://docs.oracle.com/javase/6/docs/api/java/io/FilterReader.html)：

```
class JavaEscapeReader extends FilterReader {

    JavaEscapeReader(Reader in) {
        super(in);
    }

    @Override
    public int read() throws IOException {
        int ch = super.read();
        switch (ch) {
        case '\\':
            switch (super.read()) {
            case '\\': return '\\';
            case 'n': return '\n';
            case 't': return '\t';
            case 'f': return '\f';
            // ...
            default:
                throw new IOException("Invalid char sequence.");
            }
        default:
            return ch;
        }
    }

    @Override
    public int read(char[] cbuf, int off, int len) throws IOException {
        int i = 0, ch;
        while (i < len && -1 != (ch = read()))
            cbuf[i++] = (char) ch;
        return i == 0 ? -1 : i;
    }
} 
```

给定一个包含内容的输入文件

```
Line1\nLine2
Line3\nLine3 
```

该程序

```
Scanner sc = new Scanner(new JavaEscapeReader(new FileReader("filename.txt")));
while (sc.hasNextLine())
    System.out.println(sc.nextLine()); 
```

印刷

```
Line1
Line2
Line3
Line4 
```

* * *

另一种选择是使用[`StringEscapeUtils.unescapeJava`](http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/StringEscapeUtils.html#unescapeJava%28java.lang.String%29)和后处理读取的字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T09:06:47.707

您可以使用[`Scanner.useDelimiter`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#useDelimiter%28java.lang.String%29)来设置自己的分隔符。在您使用双引号的情况下`\\n`：

```
s.useDelimiter("\\\\n"); 
```

例子：

```
Scanner s = new Scanner("Hello World!\\nI've been trying to get this to " +
                        "work for a while now.\\nFrustrating.\\n");
s.useDelimiter("\\\\n");

System.out.println(s.next());
System.out.println(s.next());
System.out.println(s.next()); 
```

输出：

```
Hello World!
I've been trying to get this to work for a while now.
Frustrating. 
```

# rake - 执行 rake 任务会引发错误 - 使用 rbconfig 而不是过时和弃用的配置

> ID：10830369
> 
> 赞同：4
> 
> 时间：2012-05-31T08:58:03.283
> 
> 标签：rake, selenium-rc

我们正在尝试在 Windows 机器上使用 Selenium RC 运行我们的 selenium 脚本。我们创建了一个 rake 文件，其中的任务将运行我们所有的规范文件（run_all_spec）

安装：

红宝石 1.9.3，

耙版本 0.9.1,

rspec 1.2.8

硒客户端 1.2.18

但我们收到“不推荐对 Rake DSL 方法的全局访问”错误

以下[Global access to Rake DSL methods is deprecated](https://stackoverflow.com/questions/6199301/global-access-to-rake-dsl-methods-is-deprecated)，我们确实将我们的 rake 版本降级到 0.8.7

但是当我们调用命令“rake run_all_spec”时，我们得到了错误：

使用 RbConfig 而不是过时和不推荐使用的 Config。

我们还尝试使用“spec”命令手动运行我们的脚本，如果它的 rspec 试图隔离问题，但我们能够运行脚本，所以我们一定是一个 rake 问题。

请帮忙。

先谢谢了，姑娘

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:59:55.720

现在能够使用 rake 运行我的 rspec 文件。我们所做的是降级到 ruby​​ 1.8.7、rake (0.8.7) 和 rspec (1.2.9)

# python - 如何启动并将输入传递给外部程序

> ID：10830372
> 
> 赞同：2
> 
> 时间：2012-05-31T08:58:17.437
> 
> 标签：python, autologin

我正在使用 Python 执行外部程序。而且我还希望 Python 向被调用程序发送一些击键以完成自动登录。

问题是当我使用 subprocess.call() 执行外部程序时，程序获得了系统焦点，并且 Python 脚本无法响应，直到我关闭外部程序。

大家对此有什么建议吗？非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T08:59:40.503

使用`subprocess.Popen()`代替`.call()`

`Popen`您还可以控制*stdin*、*stdout*和*stderr*文件描述符，因此您可以与外部程序进行交互。

愚蠢的例子：

```
s = subprocess.Popen(command, stdout=subprocess.PIPE, 
                     stderr=subprocess.PIPE) # The script is not blocked here

# Wait to finish
while s.poll() is None: # poll() checks if process has finished without blocking
    time.sleep(1)
    ... # do something

# Another way to wait
s.wait() # This is blocking

if s.returncode == 0:
    print "Everything OK!"
else:
    print "Oh, it was an error" 
```

一些有用的方法：

> Popen.poll() 检查子进程是否已经终止。设置并返回 returncode 属性。
> 
> Popen.wait() 等待子进程终止。设置并返回 returncode 属性。
> 
> Popen.communicate(input=None) 与进程交互：向标准输入发送数据。从 stdout 和 stderr 读取数据，直到到达文件结尾。等待进程终止。可选的输入参数应该是要发送到子进程的字符串，或者如果不应该向子进程发送数据，则为 None。

[文档中有](http://docs.python.org/library/subprocess.html)更多信息

# javascript - 如何在prototypejs中将DIV从Display None设置为Block

> ID：10830373
> 
> 赞同：0
> 
> 时间：2012-05-31T08:58:22.777
> 
> 标签：javascript, html, prototypejs, scriptaculous

我需要显示一个 div 从`display:none`给`display:block`它一个`fade effect`. 我怎样才能在prototypejs中做到这一点？谢谢。

```
<div id="fadeId" style="display:none">
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:09:49.170

开箱即用的prototypejs没有办法做到这一点。

如果您正在寻找一种简单的方法来做到这一点，您应该看看[scriptaculous](http://script.aculo.us/)。这是一个基于prototypejs的UI框架，据我所知，它是每个prototypejs的用户都使用的。

下面是一些例子：

```
// Fade-in
Effect.Appear('fadeId', {duration: 2}); // the duration parameter is optional

// Toggle fadein/fadeout
Effect.Toggle('fadeId', 'appear'); 
```

我没有提到一直这样做的方法，因为它会代码太多（并且超出了这个问题的范围）。对于一个简单的动画库，我建议你看看[$fx](http://fx.inetcat.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T17:05:32.693

我看到我在这里聚会迟到了，但是您可以使用自定义功能和计时器来完成。

```
function animate() {
  var element = $('fadeId');
  var opacity = element.getOpacity() + 0.1;
  element.setStyle({'display': 'block', 'opacity': opacity});
  if(opacity < 1) {
    setTimeout(animate, 100);
  }
}
function doshow() {
  var element = $('fadeId');
  element.setStyle({'display': 'block', 'opacity': 0.0});
  setTimeout(animate, 100);
}
$('show').on('click', doshow); 
```

[请参阅http://jsfiddle.net/ApzhJ/](http://jsfiddle.net/ApzhJ/)上的小提琴

要淡入淡出，请查看小提琴[http://jsfiddle.net/Y5CB9/](http://jsfiddle.net/Y5CB9/)

* * *

## 回答 #3

> 赞同：-7
> 
> 时间：2012-05-31T09:04:10.273

您可以为此使用 Jquery

```
$("#fadeId").fadeIn(slow); 
```

# iphone - 使用带有一些动画和狄拉克 LE 的 iphone 陀螺仪

> ID：10830375
> 
> 赞同：1
> 
> 时间：2012-05-31T08:58:33.710
> 
> 标签：iphone, objective-c, core-animation, nstimer, gyroscope

我正在尝试制作一个与 Power Ball 具有相同“目标”的应用程序（对于那些知道它是什么的人；）

当玩家从左到右移动他的 iphone 时，我使用陀螺仪值使一些图片转动并改变音乐样本的速度/音高。

这是我的问题： 陀螺仪没问题 音乐没问题 但动画我真的不知道。

我用 NSTimer 尝试了这种方法：

```
//Start the timer
[timerRotationImage invalidate];
timerRotationImage = [NSTimer scheduledTimerWithTimeInterval:0.5
                                 target:self
                               selector:@selector(TimerRotateImage:)
                               userInfo:nil
                                repeats:YES];

//Make a picture turn with some angle
uiImageRotate.center = CGPointMake(160, 140);
angleRotation = angleRotation + 0.3;
uiImageRotate.transform = CGAffineTransformMakeRotation(angleRotation);

//For the acceleration/deceleration
[timerRotationImage setFireDate:[NSDate dateWithTimeIntervalSinceNow:timerRotationImage.timeInterval / (uiDurationSlider.value*50)]]; 
```

问题是，有时高速画面似乎在减速

你能给我其他方法/更有效吗？

* * *

现在我尝试了一些可能性：

*   此方法与 NSTimer 和 CGAffineTransformMakeRotation
*   另一个使用 CALayer 和 CABasicAnimation
*   最后一个带有 UIImageView 和动画（带有图像 .jpg 数组）

我仍然无法做的是实时更新旋转速度/更改它。这些方法都不起作用=（这里需要一些帮助！

# linq-to-sql - 缓存 LinqToSql 实体

> ID：10830380
> 
> 赞同：0
> 
> 时间：2012-05-31T08:58:50.463
> 
> 标签：linq-to-sql, caching

我有一个实体，上面有许多链接的实体集对象，我不确定如果我缓存这个对象，实体集链接是否得到解析，并且它们的结果与顶级对象一起缓存。换句话说，整个对象图是否被缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:04:13.313

只要`DataContext`它处于活动状态，它就应该缓存检索到的数据。

# c++ - C++中具有相同参数类型的函数重载

> ID：10830384
> 
> 赞同：1
> 
> 时间：2012-05-31T08:59:08.663
> 
> 标签：c++

我想覆盖具有相同参数类型但具有不同逻辑含义的函数。我试过类似的东西：

```
class T
{
};

typedef T Age;
typedef T Height;
typedef T Weight;

void foo(Age a){}
void foo(Height a){}
void foo(Weight a){} 
```

但我有构建错误：错误 C2084：函数 'void foo(Age)' 已经有一个主体

一种解决方案是：

```
class Age : public T{};
class Height : public T{};
class Weight : public T{}; 
```

但我不想仅仅为此目的用新类填充我的命名空间。

在不使用派生类的情况下如何实现这一点？

编辑：我的代码在一个 cpp 文件中，我不使用标题。这只是一个简单的例子。完整的 cpp 内容在这里：

```
class T
{
};

typedef T Age;
typedef T Height;
typedef T Weight;

void foo(Age a){}
void foo(Height a){}
void foo(Weight a){}

int main()
{
    return 0;
} 
```

错误消息：.cpp(10): error C2084: function 'void foo(Age)' has a body

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T09:07:11.217

您可以将模板用作：

```
//1\. First define T as class template
template<typename U>
class T
{
 public:
    typedef U tag_type;  //you may need this to inspect the type
    //...
};

//2\. then define some tags
struct tag_age{};
struct tag_height{};
struct tag_weight{};

//3\. then define typedefs
typedef T<tag_age> Age;
typedef T<tag_height> Height;
typedef T<tag_weight> Weight;

//4\. then function overloads
void foo(Age a){}
void foo(Height a){}
void foo(Weight a){} 
```

这样，每个 typedef 都是*不同*的类型，并且不能*隐式*转换为其他类型，除非您在类模板的定义中明确允许此功能`T`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T09:08:04.310

我认为这不是 typedefs 的适当用法-至少就您的示例而言，这在生产代码中可能有所不同。但是，恕我直言，这不是 typedef 应该使用的。您应该正确命名变量和函数，因为它们会执行不同的逻辑操作：

```
void doAge(T age);
void doHeight(T height); 
```

更新： 那么 typedefs 在哪里合适呢？

在您的情况下，该解决方案会使代码复杂化，因此它似乎相当不合适。应该使用 Typedef 来简化事情。例如，请参阅我对以下问题的回答：[复杂 C 语法的含义](https://stackoverflow.com/questions/9817734/meaning-of-complex-c-syntax)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T09:15:20.983

你基本上是在错误的轨道上。更改实际参数的名称而不是其类型。你在做什么没有意义。typedef 基本上使用二级简化名称来更多地与手头的代码相关，但它只是程序员的简写，编译器在所有情况下仍然会看到 T。

一个数字可能代表年龄、球数、长度、身高……在所有情况下，它们的逻辑用途是不同的，但用于对其信息进行编码的基本数据类型保持不变。你不应该以这种方式接近它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T09:00:48.387

试试 BOOST_STRONG_TYPEDEF，它是 Boost.Serialization 中的 avalailabel。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T09:29:34.910

您可以使用标签来执行此操作

```
class T{};

typedef T Age;
typedef T Height;
typedef T Weight;

struct age_tag {};
struct height_tag {};
struct weight_tag {};

void foo(Age a, age_tag ){...}
void foo(Height h, height_tag ){...}
void foo(Weight a, weight_tag ){...}

template<typename TAG> void bar(T t);
template<> void bar<age_tag>(Age a) {...};
template<> void bar<height_tag>(Height h) {...};
template<> void bar<weight_tag>(Weight a) {...}; 
```

# maven-2 - 无法访问Tomcat中部署的war文件

> ID：10830387
> 
> 赞同：0
> 
> 时间：2012-05-31T08:59:16.597
> 
> 标签：maven-2, axis2, m2eclipse, axis

我正在尝试使用axis2、eclipse和Maven2在tomcat中部署一个war文件。我对此并不陌生，并按照下面给出的文章创建了所有内容

[http://maksim.sorokin.dk/it/2011/01/13/axis2-maven-servlets-tomcat/](http://maksim.sorokin.dk/it/2011/01/13/axis2-maven-servlets-tomcat/)

我已经尝试了上面文章中给出的所有步骤并成功部署了war文件。当我尝试点击“localhost:8080/axis2Example-1.0.0-SNAPSHOT/”时，我收到“hello”消息

但是当我点击 localhost:8080/axis2Example/services/HelloWs/sayHello?name=Max 或 localhost:8080/axis2Example/ 我得到 404 页面 有人可以帮我吗

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T09:11:30.287

您在这里混合了两种不同的上下文路径：

*   `/axis2Example-1.0.0-SNAPSHOT`
*   `/axis2Example`

我猜Eclipse默认使用第一个。

您可以通过右键单击 Eclipse 中的项目并单击 Properties -> Web Project Settings -> Context root 来设置应用程序的上下文路径。在这里，您可以将上下文路径设置为您想要的任何内容。

# c# - SQL 到 LINQ。LEFT OUTER JOIN 和 GROUP BY 一起

> ID：10830394
> 
> 赞同：0
> 
> 时间：2012-05-31T08:59:49.143
> 
> 标签：c#, sql-server, linq, group-by, left-join

我有表“客户”和列“ID”、“国家”、“性别”。我想要的是在同一个查询中获得按国家字段分组的客户总数和男性和女性总数。我已经在sql查询中完成了。有用。但找不到如何在 LINQ 中实现它。

```
SELECT  c.country, COUNT(c.id) AS TotalClients, 
ISNULL(max(c2.total),0) AS TotalMales,
COUNT(c.id)-ISNULL(MAX(c2.total),0) AS TotalFemails,

FROM Clients c
LEFT OUTER JOIN(
SELECT country, count(id) AS total FROM Clients 
WHERE sex='male'
GROUP BY country
) c2 
ON c2.country = c.country
GROUP BY c.country
ORDER BY c.country 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:32:26.927

```
var query = (from c in db.Clients
            let TotalMales = (
            from c2 in db.Clients.Where(a=>a.Sex=='male') where c.Country=c2.Country select c2).Count()
            group c by new {c.Country, TotalMales}
            into g
            select new {
                g.Key.Country,
                TotalClients = g.Count(),
                TotalMales = g.Key.TotalMales,
                TotalFemales = g.Count()-TotalMales
            }).OrderBy(s=>s.Country); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T15:21:13.873

考虑使用更简单的查询：

```
SELECT
  c.Country,
  SUM(CASE WHEN c.Sex = 'Male' THEN 1 ELSE 0 END) as TotalMales,
  SUM(CASE WHEN c.Sex = 'Female' THEN 1 ELSE 0 END) as TotalFemales,
  COUNT(*) as TotalClients
FROM Clients c
GROUP BY c.Country
ORDER BY c.Country 
```

大致翻译为：

```
from c in Clients
group c by c.Country into g
order by g.Key
select new {
  Country = g.Key,
  Males = g.Count(y => y.Sex == "Male"),
  Females = g.Count(x => x.Sex == "Female"),
  Total = g.Count()
} 
```

# google-visualization - 如何在使用编号标签列时默认打开“使用第一列作为标签”

> ID：10830399
> 
> 赞同：0
> 
> 时间：2012-05-31T09:00:10.213
> 
> 标签：google-visualization

我正在尝试绘制折线图并添加类似于Google Code Playground[中示例的图表编辑器按钮。](https://code.google.com/apis/ajax/playground/?type=visualization#chart_editor)[这](https://github.com/gokceneraslan/googplot/blob/master/testfile.html)是我的html文件。操场示例和我的情节之间的区别在于我的所有列类型都是数字，包括第一列。

我的情节看起来不错，有两行符合预期，但是当我打开编辑器窗口时，**未**选中“使用第一列作为标签”复选框，并且有**三行**而不是两行。我的数字类型的标签列也被绘制了。

当我选择复选框时，图表编辑器上的绘图似乎没问题，但我不想手动执行此操作。我应该如何自动执行此操作？

顺便说一句，我认为developers.google.com 中的Discrete vs Continuous 页面是相关的，但我在那里找不到任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:51:34.927

您是否考虑过使用 Annotation 角色而不是第三个数据列？

[https://developers.google.com/chart/interactive/docs/roles](https://developers.google.com/chart/interactive/docs/roles)

诚然，该功能被很好地隐藏了，直到我明确地寻找它时我才发现它。

它将注释附加到图表的第一个系列，看起来非常漂亮，并且还可以有悬停文本。

希望有帮助！

# html - 表格边框区别 IE9 vs IE8

> ID：10830401
> 
> 赞同：2
> 
> 时间：2012-05-31T09:00:17.337
> 
> 标签：html, html-table, internet-explorer-9, border

IE9 显示 table、th 和 td 的边框与 IE8 不同。这是什么原因以及可以做些什么呢？
从下面的屏幕打印中可以看出，IE9 中的边框似乎具有阴影效果，这导致它们不再像 IE8 中那样清晰。这似乎适用于实心 (table, th) 以及虚线 (td) 边框。

使用的html

```
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <title>table border test</title>
      <style type="text/css">
table {
    border: solid black 1pt;
    border-collapse: collapse;
    padding: 0;
    border-spacing: 0;
}

th {
    background: rgb(255, 255, 153);
    border-style: solid;
    border-color: black;
    border-width: 1pt;
    padding: 0cm 5pt;
    color: black;
    font-family: Verdana;
    font-size: 10pt;
    font-style: normal;
    vertical-align: top;
}

td {
    border-style: dotted dotted none none;
    border-color: black;
    border-width: 1pt;
    padding: 0cm 5pt;
    color: black;
    font-style: normal;
    font-family: Verdana;
    font-size: 10pt;
    vertical-align: top;
    margin-bottom: 4.5pt;
    margin-top: 0pt;
}

    </style>
      </head>
   <body>
      <br>

      <table>
         <thead>
            <tr>
               <th class="small">col A</th>
               <th class="small">col B</th>
               <th class="large">col C</th>
               <th class="medium">col D</th>
            </tr>
         </thead>
         <tbody>
            <tr>
               <td align="center">A1</td>
               <td align="center">B1</td>
               <td>C1</td>
               <td>D1</td>
            </tr>
            <tr>
               <td align="center">A2</td>
               <td align="center">B2</td>
               <td>C2</td>
               <td>D2</td>
            </tr>
         </tbody>
      </table>
   </body>
</html> 
```

IE8 结果

![IE8 结果](../Images/7432e2a79b34820e2d981dced4d3c7ee.png)

IE9 结果

![IE9 结果](../Images/835c34348f019245514c554185e104ca.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T09:10:56.203

`pt`单位是物理单位（1/72 英寸）。较新版本的 IE 可能会在给定没有整数像素的渲染对象时使用亚像素渲染。

无论如何，物理单位在屏幕上的服务质量很差（因为浏览器通常对屏幕的 DPI 做出错误的假设），因此应该为打印媒体保留。

改为使用`px`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:07:49.597

IE9 不会将您的 1pt 边框四舍五入为 1px。这不是一个错误，这是一个功能！

要解决这个问题，您可以使用 px 而不是 pt，并确保使用整数。

# selenium - 使用 RavenDB 进行 UI 测试

> ID：10830402
> 
> 赞同：0
> 
> 时间：2012-05-31T09:00:18.183
> 
> 标签：selenium, ravendb, specflow, ui-testing

一点背景：

我有一个 Web 应用程序，它从存储在 RavenDB 中的一组非规范化文档中读取。这些文档由事件处理程序创建和修改。在生产中，应用程序使用标准文档存储，该存储通过 c# API 连接到远程数据库。

当我对应用程序进行单元测试时，我将处理程序配置为使用内存中的嵌入式数据库、创建一些事件并查询预期的文档。这绝对没问题。

编写 UI 测试：

我想让我们的测试人员使用 SpecFlow 和 Selenium 编写自动化 UI 测试。在为其他应用程序（使用 SQL）实现此功能时，功能文件的执行将通过以下方式准备测试环境：

*   在本地 SQLExpress 实例中创建一个新数据库（按照惯例，每个人在他们的机器上都有相同的实例名称）
*   重新配置处理程序以使用新数据库并引发事件以创建所需状态
*   将正在测试的 Web 应用程序复制到新的临时位置并重新配置以从新数据库中读取
*   在 IIS Express 中启动 Web 应用程序（再次每个人都遵循此约定）
*   如果需要，运行功能、消隐和重建每个功能之间的状态
*   停止 IIS，删除正在测试的应用程序，并删除数据库

现在我想使用 Raven 遵循相同的方法，并且正在考虑两种方法。

首先是遵循与上述完全相同的模型。我在这里遇到的问题是如何/在哪里存储数据库，以及之后如何整理它们。服务器可执行文件可以在安装和拆卸期间以编程方式启动和停止，之后可以通过删除文件来删除数据库。我还没有尝试过，但理论上它应该可以工作。

第二种是遵循类似的方法，但用标准文档存储替换嵌入式存储（不在内存中运行）。为此，我需要修改 Web 应用程序的 IoC（如果在 xml 中使用配置，则可能）以将 IDocumentStore 解析为 EmbeddedDocumentStore。然后我像以前一样使用处理程序建立状态，然后在启动 IIS 之前处理处理程序的文档存储（似乎不可能同时运行两个使用相同嵌入式数据库的应用程序，除非我错过了某物）。

第二种方法最初似乎是更好的选择，但我遇到了一些奇怪的行为，即处理程序创建的文档与 Web 应用程序查询时返回的结果不一致。具体来说，一些子集合由处理程序填充，但在从 Web 应用程序执行的查询返回时为空。老实说，我并没有太惊讶，因为我怀疑这是打算使用嵌入式数据库的场景。此外，当我从一个应用程序跳转到另一个应用程序时，通过管理工作室查看嵌入式数据库非常困难。

所以无论如何，在冗长的描述之后，我很好奇其他人对这些方法的看法，以及是否有更好的选择我错过了。此外，我确信有许多我不知道的隐藏的 RavenDB 宝石，因此任何指向该方向的指针也会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:57:00.640

`raven.server`Nigel，以编程方式启动/停止。但是传入`/ram`标志，这样你就可以在内存中运行整个事情，并且可以处理所有的清理工作

# iphone - 动画块无法调整 UiView 的大小，但可以移动它

> ID：10830403
> 
> 赞同：0
> 
> 时间：2012-05-31T09:00:22.890
> 
> 标签：iphone, ios

我的 appdelegate 窗口顶部有一个 UIView。当我尝试调整它以使其消失时，动画不起作用。

**TLDR**：无法使用 UIAnimation 块调整 UIView 的大小，但可以移动它

```
[UIView animateWithDuration:0.3
                      delay:0
                    options: UIViewAnimationCurveEaseIn
                 animations:^{ 
                     CGRect frame = viewMore.frame;
                     frame.size.height = 0;
                     viewMore.frame = frame;

                 } 
                 completion:^(BOOL finished){

                 }]; 
```

但是，如果我想移动视图，使用此代码，它就像魅力一样。例子 ：

```
[UIView animateWithDuration:0.3
                      delay:0
                    options: UIViewAnimationCurveEaseIn
                 animations:^{ 
                    CGPoint centerMore =    viewMore.center;
                     centerMore.y += viewMore.frame.size.height;
                     viewMore.center = centerMore;

                 } 
                 completion:^(BOOL finished){

                 }]; 
```

viewMore 有 2 个 UIButton 子视图。相同的代码可以调整 UIWebView 的大小。有些东西我不明白。你是我唯一的希望（嗯，不，你不是:)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:00:23.047

好吧，问题是子视图（带有图像的 UIButton）没有调整大小。解决方案： 在视图[上将 clipsToBounds](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/clipsToBounds "clipsToBounds")设置为 YES 以调整大小。

# regex - 如何将网址与帖子的变量匹配

> ID：10830404
> 
> 赞同：0
> 
> 时间：2012-05-31T09:00:23.147
> 
> 标签：regex, nginx, pcre

如何将以下网址与 PCRE 匹配：

1.  `http://www.test.com/abc?v=123&feature=True`
2.  `http://www.test.com/def?v=456&feature=True`

我要做的是匹配域下的路径（abc 或 def），以便我可以使用 nginx 将请求重定向到指定的主机。

```
 #content of /etc/nginx/sites-enabled/default
             location / {
               #default redirect
                proxy_pass http://www.google.com;

               #redirect by domain name.
               if ($path ~* abc)
               {
                       proxy_pass http://10.1.1.47:8081?v=123&feature=True;
               }
               if ($path ~* edf)
               {
                       proxy_pass http://10.1.1.48:8081?v=456&feature=True;
               }
             } 
```

PS：域和路径不限于 www.test.com 和 (abc|def)，分别。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:48:10.530

```
location / {
    proxy_pass http://www.google.com;
}

location /abc/ {
    proxy_pass http://10.1.1.47:8081?v=123&feature=True;
}

location /edf/ {
    proxy_pass http://10.1.1.48:8081?v=456&feature=True;
} 
```

# c++ - 在编译时将 mpl::vector_c 复制到静态数组

> ID：10830406
> 
> 赞同：5
> 
> 时间：2012-05-31T09:00:23.360
> 
> 标签：c++, templates, boost, c++11, boost-mpl

使用 C++11 我有类似的东西

```
#include <boost/mpl/vector_c.hpp>
#include <boost/mpl/size.hpp>

#include <boost/array.hpp>

#include <iostream>

namespace mpl = boost::mpl;

template<std::size_t ... Args>
struct Test
{
            typedef mpl::vector_c<std::size_t, Args ...> values_type;

            static const boost::array<std::size_t, sizeof...(Args)> values;
};

int main (int argc, char** argv)
{
            Test<3,2,5,6,7> test;
            return 0;
} 
```

我想用 mpl::vector_c 中的“包含”值初始化 boost::array 内容。此初始化应在编译时执行。我在 SO 上看到了一些使用预处理器的解决方案，但我不知道如何将它们应用于可变参数模板案例。

**请注意，在上面的示例代码中，mpl::vector_c 的元素与 Test 的模板参数相同。在实际代码中并非如此**，而是`values_type`具有长度 == 模板参数的数量，但实际值来自于 mpl 算法序列的应用。因此，不要假设论点是相同的。

希望问题清楚，谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T10:00:50.683

一种方法是使用`at_c`将vector_c提取到参数包中，然后将其展开并使用它来初始化数组。

```
#include <cstdio>
#include <array>
#include <boost/mpl/vector_c.hpp>
#include <boost/mpl/at.hpp>
#include <boost/mpl/size.hpp>
#include <utils/vtmp.hpp>
// ^ https://github.com/kennytm/utils/blob/master/vtmp.hpp

template <typename MPLVectorType>
class to_std_array
{
    typedef typename MPLVectorType::value_type element_type;
    static constexpr size_t length = boost::mpl::size<MPLVectorType>::value;
    typedef std::array<element_type, length> array_type;

    template <size_t... indices>
    static constexpr array_type
            make(const utils::vtmp::integers<indices...>&) noexcept
    {
        return array_type{{
            boost::mpl::at_c<MPLVectorType, indices>::type::value...
        }};
    }

public:
    static constexpr array_type make() noexcept
    {
        return make(utils::vtmp::iota<length>{});
    }
}; 
```

```
int main()
{
    typedef boost::mpl::vector_c<size_t, 3, 2, 5, 6, 7> values;

    for (size_t s : to_std_array<values>::make())
        printf("%zu\n", s);
    return 0;
} 
```

我在`std::array`这里使用，但您可以简单地将其更改为`boost::array`它仍然有效。表达方式

```
to_std_array<MPLVector>::make() 
```

是在编译时运行的，因为`make()`函数是`constexpr`.

* * *

相同的技术通常用于将 a 扩展`std::tuple`为 a `std::array`（[将 std::tuple 转换为 std::array C++11](https://stackoverflow.com/questions/10604794/convert-stdtuple-to-stdarray-c11)）、函数调用（[“解包”元组以调用匹配的函数指针](https://stackoverflow.com/questions/7858817/unpacking-a-tuple-to-call-a-matching-function-pointer)）等。

# java - Java 线程错误

> ID：10830408
> 
> 赞同：0
> 
> 时间：2012-05-31T09:00:39.353
> 
> 标签：java, multithreading

对于给定的程序，您能否解释一下，因为我没有得到预期的结果：

```
package javaapplication14;

class Mythread implements Runnable{
    String myname;
    int myage;

    public Mythread( String par_name, int par_age){
        myname = par_name;
        myage = par_age;
    }
    public void run(){
        try{
          for(int i=1; i<=myage; i++)  {
              System.out.println("Happy birthday "+myname);
              Thread.sleep(2000);
          }
        }catch(Exception e){
            System.out.println();
        }
    }
}
public class JavaApplication14 {

    public static void main(String[] args) {
      Mythread m = new Mythread("Mutinda ", 2);
      Mythread p = new Mythread("Boniface", 2);
      Thread k = new Thread(m);
      Thread q = new Thread(p);
      k.start();
      q.start();
      Thread t = new Thread(m);
      try{
        for( int i=1; i<=5; i++){
          System.out.println("Main thread executing");
          Thread.sleep(1000);          
        }  
      }catch(Exception e){
          System.out.println("Thread interrupted");
      }

    }
} 
```

这是我的输出：

```
Main thread executing
Happy birthday Boniface
Happy birthday Mutinda 
Main thread executing
Main thread executing
Happy birthday Boniface
Happy birthday Mutinda 
Main thread executing
Main thread executing 
```

我期待这个：

```
Main thread executing
Happy birthday Mutinda 
Happy birthday Boniface
Main thread executing
Main thread executing
Happy birthday Mutinda
Happy birthday Boniface
Main thread executing
Main thread executing 
```

我需要有人向我解释为两个线程设置的优先级，`k`并且无论睡眠时间如何，`q`输出都`q`成为第一个 than 。`k`

我的论点：因为在 ,`k.start()`之前被调用`q.start()`，所以期望我的输出以 开始`k`，因为我首先调用它并且两者花费相同的睡眠时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T09:03:27.400

基本上你的论点是错误的。start() 函数不会启动踏板。它只是将其置于可运行状态。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T09:04:45.340

当您启动线程时，这是因为您有独立的任务，这些任务很少或没有相互依赖。因此，您不应该期望两个线程之间有特定的执行顺序，实际上大多数多线程错误来自做出这样的假设。

如果您希望事情以特定顺序发生，请使用单个线程。如果您可以假设任务没有特定的顺序，那么只有使用多个线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T09:08:14.073

您不能依赖于多线程序列执行的优先级。Java Threading 的基本规则是它依赖于 JVM，并且不能确定每个线程的执行顺序。优先级可以影响但不能确保执行

# wordpress - WordPress htaccess modrewrite

> ID：10830412
> 
> 赞同：0
> 
> 时间：2012-05-31T09:00:57.900
> 
> 标签：wordpress, .htaccess, mod-rewrite

这是我的 WordPress 的 htaccess

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

我创建了一个名为“酒店”的类别，我喜欢通过 mod rewrite apache 模块更改我的 url。我现在的网址是这样的

```
http://www.mydomains.com/hotels?state=newyork&country=us 
```

但我想要如下网址：

```
http://www.mydomains.com/hotels/us/newyork 
```

我怎样才能做到这一点？

我试图得到这样的网址： `http://www.mydomains.com/hotels/newyork`从`http://www.mydomains.com/hotels?state=newyork`

所以我在重写规则之后使用了这一行，但没有奏效。

```
RewriteRule ^hotels/([^/]*)$ /hotels/?state=$1 [L] 
```

有人可以帮帮我吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:26:47.347

您尝试通过 htaccess 更改永久链接是否有特殊原因？这可以通过下面的 wordpress 仪表板更有效地完成

**设置>固定链接**

您可以选择自定义永久链接结构，也可以从通过 wordpress 预先选择的结构中进行选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:16:49.363

把它放在 RewriteConds 之前：

```
RewriteRule ^hotels/([^/]+)/?$ hotels?state=$1 
```

您不需要该`[L]`标志，因为它会阻止 Wordpress 处理它。

# c++ - 如何防止在argv中丢失双引号？

> ID：10830418
> 
> 赞同：2
> 
> 时间：2012-05-31T09:01:09.343
> 
> 标签：c++, console, mingw

好的，我知道我可以像这样循环：

```
for (int i=1; i<=argc-1;i++) {
  cout << argv[i] << endl;
} 
```

但是这种方式会丢失双引号，即字符串`"something here"`被视为 args 数组的一个元素并且引号会丢失。

好的，我知道如果参数内部有空格，我可以假设引号，但是无论是否有空格，引号总是会丢失。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T09:07:42.197

它是删除引号的外壳。如果您希望 shell 将引号传递给您，则必须对它们进行转义：

```
$ ./my-program \"hello\ world\" 
```

请注意，我也逃避了这个空间，让它成为一个论点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T09:15:43.117

当您需要原始命令行时，您可以使用 [GetCommandLine()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683156%28v=vs.85%29.aspx) API 函数。

# hadoop - Hadoop MapFile：如何将可写值传输到其原始类？

> ID：10830424
> 
> 赞同：0
> 
> 时间：2012-05-31T09:01:18.487
> 
> 标签：hadoop, nutch

Hadoop中有nutch数据，我通过get(key,val)方法获取值，但是如何将可写数据转移到其原始类中。我的代码粘贴在下面：

```
Text key = new Text();
key.set(url);
Writable value = null;
value = reader.get(key, value); 
```

值是这样的：

```
Version: -1
url:http://www.google.com
base: http://www.google.com
contentType: application/xhtml+xml
metadata:***
Content:
<!DOCTYPE html**** 
```

以及如何获取仅获取内容或内容类型？我可以将值转移到其原始类并使用 getContent() 方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T02:32:09.070

如果运行时类型为`value`是[`org.apache.nutch.protocol.Content`](http://nutch.apache.org/apidocs-1.4/org/apache/nutch/protocol/Content.html)，则可以强制转换为该类型，然后调用该`getContent()`方法

```
Content content = (Content) value;
content.getContent(); 
```

# java - 错误：无法创建 Java 虚拟机

> ID：10830430
> 
> 赞同：2
> 
> 时间：2012-05-31T09:01:35.827
> 
> 标签：java, oracle, oracle11g, oracle-adf

我已经创建了`Oracle ADF`项目并尝试运行。但我得到了以下错误。

```
*** Using HTTP port 7101 ***
*** Using SSL port 7102 ***
"C:\Documents and Settings\ABC\Application Data\JDeveloper\system11.1.2.2.39.61.83.1\DefaultDomain\bin\startWebLogic.cmd"
[waiting for the server to complete its initialization...]
.
.
JAVA Memory arguments: -Xms256m -Xmx512m
.
WLS Start Mode=Development
.
Error: Could not create the Java Virtual Machine.
Error: A fatal exception has occurred. Program will exit.
Unrecognized option: -jrockit
CLASSPATH=D:\Oracle\MIDDLE~1\ORACLE~1\modules\oracle.jdbc_11.1.1\ojdbc6dms.jar;D:\Oracle\MIDDLE~1\patch_wls1035\profiles\default\sys_manifest_classpath\weblogic_patch.jar;D:\Oracle\MIDDLE~1\patch_jdev1112\profiles\default\sys_manifest_classpath\weblogic_patch.jar;C:\Java\JDK17~1.0\lib\tools.jar;D:\Oracle\MIDDLE~1\WLSERV~1.3\server\lib\weblogic_sp.jar;D:\Oracle\MIDDLE~1\WLSERV~1.3\server\lib\weblogic.jar;D:\Oracle\MIDDLE~1\modules\features\weblogic.server.modules_10.3.5.0.jar;D:\Oracle\MIDDLE~1\WLSERV~1.3\server\lib\webservices.jar;D:\Oracle\MIDDLE~1\modules\ORGAPA~1.1/lib/ant-all.jar;D:\Oracle\MIDDLE~1\modules\NETSFA~1.0_1/lib/ant-contrib.jar;D:\Oracle\MIDDLE~1\ORACLE~1\modules\oracle.jrf_11.1.1\jrf.jar;D:\Oracle\MIDDLE~1\WLSERV~1.3\common\derby\lib\derbyclient.jar;D:\Oracle\MIDDLE~1\WLSERV~1.3\server\lib\xqrl.jar
.
PATH=D:\Oracle\MIDDLE~1\patch_wls1035\profiles\default\native;D:\Oracle\MIDDLE~1\patch_jdev1112\profiles\default\native;D:\Oracle\MIDDLE~1\WLSERV~1.3\server\native\win\32;D:\Oracle\MIDDLE~1\WLSERV~1.3\server\bin;D:\Oracle\MIDDLE~1\modules\ORGAPA~1.1\bin;C:\Java\JDK17~1.0\jre\bin;C:\Java\JDK17~1.0\bin;C:\DOCUME~1\ABC\LOCALS~1\Temp\sfx113.tmp\jre160_05\bin;D:\Program Files\WANdisco\uberSVN\bin;D:\oraclexe\app\oracle\product\11.2.0\server\bin;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\Program Files\WinSCP\;D:\Oracle\MIDDLE~1\WLSERV~1.3\server\native\win\32\oci920_8
.
***************************************************
*  To start WebLogic Server, use a username and   *
*  password assigned to an admin-level user.  For *
*  server administration, use the WebLogic Server *
*  console at http:\\hostname:port\console        *
***************************************************
starting weblogic with Java version:
Starting WLS with line:
C:\Java\JDK17~1.0\bin\java -jrockit   -Xms256m -Xmx512m -Dweblogic.Name=DefaultServer -Djava.security.policy=D:\Oracle\MIDDLE~1\WLSERV~1.3\server\lib\weblogic.policy -Djavax.net.ssl.trustStore=C:\DOCUME~1\ABC\LOCALS~1\Temp\trustStore2528913390651243248.jks -Doracle.jdeveloper.adrs=true -Dweblogic.nodemanager.ServiceEnabled=true  -Xverify:none  -da -Dplatform.home=D:\Oracle\MIDDLE~1\WLSERV~1.3 -Dwls.home=D:\Oracle\MIDDLE~1\WLSERV~1.3\server -Dweblogic.home=D:\Oracle\MIDDLE~1\WLSERV~1.3\server  -Djps.app.credential.overwrite.allowed=true -Dcommon.components.home=D:\Oracle\MIDDLE~1\ORACLE~1 -Djrf.version=11.1.1 -Dorg.apache.commons.logging.Log=org.apache.commons.logging.impl.Jdk14Logger -Ddomain.home=C:\DOCUME~1\ABC\APPLIC~1\JDEVEL~1\SYSTEM~1.1\DEFAUL~1 -Djrockit.optfile=D:\Oracle\MIDDLE~1\ORACLE~1\modules\oracle.jrf_11.1.1\jrocket_optfile.txt -Doracle.server.config.dir=C:\DOCUME~1\ABC\APPLIC~1\JDEVEL~1\SYSTEM~1.1\DEFAUL~1\config\FMWCON~1\servers\DefaultServer -Doracle.domain.config.dir=C:\DOCUME~1\ABC\APPLIC~1\JDEVEL~1\SYSTEM~1.1\DEFAUL~1\config\FMWCON~1  -Digf.arisidbeans.carmlloc=C:\DOCUME~1\ABC\APPLIC~1\JDEVEL~1\SYSTEM~1.1\DEFAUL~1\config\FMWCON~1\carml  -Digf.arisidstack.home=C:\DOCUME~1\ABC\APPLIC~1\JDEVEL~1\SYSTEM~1.1\DEFAUL~1\config\FMWCON~1\arisidprovider -Doracle.security.jps.config=C:\DOCUME~1\ABC\APPLIC~1\JDEVEL~1\SYSTEM~1.1\DEFAUL~1\config\fmwconfig\jps-config.xml -Doracle.deployed.app.dir=C:\DOCUME~1\ABC\APPLIC~1\JDEVEL~1\SYSTEM~1.1\DEFAUL~1\servers\DefaultServer\tmp\_WL_user -Doracle.deployed.app.ext=\- -Dweblogic.alternateTypesDirectory=D:\Oracle\MIDDLE~1\ORACLE~1\modules\oracle.ossoiap_11.1.1,D:\Oracle\MIDDLE~1\ORACLE~1\modules\oracle.oamprovider_11.1.1 -Djava.protocol.handler.pkgs=oracle.mds.net.protocol  -Dweblogic.jdbc.remoteEnabled=false -Dwsm.repository.path=C:\DOCUME~1\ABC\APPLIC~1\JDEVEL~1\SYSTEM~1.1\DEFAUL~1\oracle\store\gmds   -Dweblogic.management.discover=true  -Dwlw.iterativeDev= -Dwlw.testConsole= -Dwlw.logErrorsToConsole= -Dweblogic.ext.dirs=D:\Oracle\MIDDLE~1\patch_wls1035\profiles\default\sysext_manifest_classpath;D:\Oracle\MIDDLE~1\patch_jdev1112\profiles\default\sysext_manifest_classpath  weblogic.Server
Error: Could not create the Java Virtual Machine.
Error: A fatal exception has occurred. Program will exit.
Unrecognized option: -jrockit
Process exited. 
```

我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T23:16:12.623

您需要使用 JDK 6 - 目前不支持 JDK 7 在 JDeveloper 中运行集成的 WebLogic。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:05:33.270

如果您使用的是 Hotspot JVM，则应该删除`-jrockit`java 选项，因为它是针对[JRockit JVM](http://docs.oracle.com/cd/E15289_01/doc.40/e15062/intro.htm)的。

# ios - NSXMLParser 不断收到空文档错误

> ID：10830436
> 
> 赞同：3
> 
> 时间：2012-05-31T09:02:12.630
> 
> 标签：ios, xml, asihttprequest, nsxmlparser

我试图让 NSXMLParser 解析一个文件，如下所示：

```
<message>
<id>73</id>
<data><(some BLOB data)></data>
</message> 
```

这是我的 obj-c 代码：

```
- (void)request:(ASIHTTPRequest *)request didReceiveData:(NSData *)data
{
    if (receivedData == nil) {
        receivedData = [[NSMutableData alloc] init];
    }
    [receivedData appendData:data];
}

- (void)requestFinished:(ASIHTTPRequest *)request
{
    if (parser) {
        [parser release];
        parser = nil;
    }
    parser = [[[NSXMLParser alloc] initWithData:receivedData] retain];
    if (parser == nil) {
        NSLog(@"Error occured");
    }
    [parser setDelegate:self];
    [parser parse];
} 
```

我很确定变量 receiveData 不为空。但是 NSXMLParser 一直给我这个错误：

> `Error Domain=NSXMLParserErrorDomain Code=4 "The operation couldn't be completed. (NSXMLParserErrorDomain error 4.)"`

根据 Apple 提供的参考资料，此错误表明解析器正在解析一个空文档。有谁知道为什么？receiveData 很大，因为它包含音频信息

# wpf - 将 userControl 添加到 DockPanel 在 Wpf 中不会动态影响

> ID：10830439
> 
> 赞同：0
> 
> 时间：2012-05-31T09:02:25.960
> 
> 标签：wpf, oop, events

我是 Wpf 的新手。一个 UserControl (Wpf UserControl) 被添加到 DockPanel 中，并且在某些操作中 O 用 DockPanel 中的另一个 UserControl 动态替换了第一个 UserControl。但是第一个 UserContorl 仍然可见，第二个 UserControl 没有显示在 DockPanel 中。

我不知道如何动态加载的正确行为。我添加了这段代码（这段代码执行得很好），但它没有反映在 Dockpanel 中显示“CtlAddEmployee”控件的操作。

```
CtlAddEmployee frm2 = new CtlAddEmployee(str);
        DockPanelInRibbon.Children.Clear();
        DockPanelInRibbon.Children.Add(frm2); 
```

有关完整的详细信息，请在我之前的问题中详细询问它是如何工作的：

[当我们单击 DataGrid 行时，在 wpf 功能区窗口中加载另一个用户控件](https://stackoverflow.com/questions/10818005/loading-another-usercontrol-in-wpf-ribbon-window-when-the-we-click-on-datagrid-r)

请为此提供解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:36:24.900

是的，在这里我需要引用旧对象而不是新创建的对象以获取相应的类引用...

为了更好地使用参数化构造函数..

# c# - 十六进制网格 A* 寻路...类型参数错误

> ID：10830440
> 
> 赞同：1
> 
> 时间：2012-05-31T09:02:32.367
> 
> 标签：c#, path-finding, a-star, generic-type-argument, hexagonal-tiles

我是一名初出茅庐的编程爱好者和游戏设计师，正在学习完成我的学位，因此在编程世界中还是很新的。我已经完成了大量的 JavaScript（实际上是 UnityScript），现在正尝试涉足 C#。我一直在关注 hakimio 的在 Unity 中制作回合制 RPG 的教程，该教程基于使用 A* 寻路的六边形网格。(http://tbswithunity3d.wordpress.com/)

我的问题是，我已经按照他的教程一步一步完成了 A* 寻路脚本和资产，但在 Unity 中遇到了错误：

“错误 CS0308：非泛型类型‘IHasNeighbours’不能与类型参数一起使用”

这是在行上引发错误消息的代码`public class Tile: GridObject, IHasNeighbours<Tile>`：

```
using System.Collections.Generic;
using System;
using System.Linq;
using UnityEngine;

public class Tile: GridObject, IHasNeighbours<Tile>
{
public bool Passable;

public Tile(int x, int y)
    : base(x, y)
{
    Passable = true;
}

public IEnumerable AllNeighbours { get; set; }
public IEnumerable Neighbours
{
    get { return AllNeighbours.Where(o => o.Passable); }
}

public static List<Point> NeighbourShift
{
    get
    {
        return new List<Point>
        {
            new Point(0, 1),
            new Point(1, 0),
            new Point(1, -1),
            new Point(0, -1),
            new Point(-1, 0),
            new Point(-1, 1),
        };
    }
}
public void FindNeighbours(Dictionary<Point, Tile> Board, Vector2 BoardSize, bool EqualLineLengths)
{
    List<Tile> neighbours = new List<Tile>();

    foreach (Point point in NeighbourShift)
    {
        int neighbourX = X + point.X;
        int neighbourY = Y + point.Y;
        //x coordinate offset specific to straight axis coordinates
        int xOffset = neighbourY / 2;

        //if every second hexagon row has less hexagons than the first one, just skip the last one when we come to it
        if (neighbourY % 2 != 0 && !EqualLineLengths && neighbourX + xOffset == BoardSize.x - 1)
            continue;
        //check to determine if currently processed coordinate is still inside the board limits
        if (neighbourX >= 0 - xOffset &&
            neighbourX < (int)BoardSize.x - xOffset &&
            neighbourY >= 0 && neighbourY < (int)BoardSize.y)
            neighbours.Add(Board[new Point(neighbourX, neighbourY)]);
    }

    AllNeighbours = neighbours;
}
} 
```

任何有关如何克服此错误的帮助或见解将不胜感激，过去几天我一直在努力解决这个脚本，试图让它工作，并且无法继续使用教程（和我的项目）错误。

提前谢谢大家！

亚伦:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:07:07.207

问题将是 IHasNeighbours 不是通用接口，因此您无法像传递 Tile 类那样将类传递给它。

您需要修改您的 IHasNeighbours 接口以使其通用，或者您需要在它之后取出对 Tile 类的引用。解决方案将取决于您需要代码执行的操作。:)

# java - Hibernate：如何在嵌入集合中的对象中维护多对一关系的多方时按属性设置映射

> ID：10830442
> 
> 赞同：2
> 
> 时间：2012-05-31T09:02:38.513
> 
> 标签：java, hibernate, jpa, hibernate-mapping

我有 2 个实体和一个嵌入式对象。为了保持讨论的通用性，我将称它们为 Project、ProjectAssociation（嵌入式对象）、员工。

员工使用项目关联与项目相关联。

我的业务要求是我应该能够从员工那里查找 projectAssociation。此外，未来我们可以期待 projectAssociation 获得更多属性。projectAssociation 的生命周期将始终与项目相关联。

Project 和员工实体之间通过 projectAssociation 嵌入对象具有多对多关系。

我如何配置从项目到项目关联的映射。？

```
Employee {
    Project projects;

    @OneToMany(mappedBy="What to set here?")
    public Set<Project> getProjects() {
        return projects;
    }

    public void setProjects(Set<Project> projects) {
        this.projects= projects;
    }
}

Project {
    Set<ProjectAssociation> projectAssocs;

    @Embedded
    @ElementCollection
    public Set<ProjectAssociation> getProjectAssociation() {
        return projectAssocs;
    }

    public void setProjectAssociation(Set<ProjectAssociation> hostRecovery) {
        this.projectAssocs = projectAssocs;
    }
}

ProjectAssociation {
// Parent association variable and methods are omitted for brevity
    Employee  employee;

    @ManyToOne
    public Employee getEmployee() {
        return employee;
    }

    public void setEmployee(Employee employee) {
        this.employee = employee;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:27:16.250

您需要将其映射为 @ManyToMany 与中间表和外键列，然后设置 Inverse() 以便 Employee 不维护任何链接表条目

```
@ManyToMany(...)
@Inverse()
public Set<Project> getProjects() {
    return projects;
} 
```

# regex - 正则表达式 - 查找具有至少一个大写字母的特定字符串

> ID：10830446
> 
> 赞同：1
> 
> 时间：2012-05-31T09:02:50.060
> 
> 标签：regex

我正在寻找一个匹配特定字符串的正则表达式：

1.  总是从 `"fu:`
2.  总是以`"`
3.  并且在这些起点和终点之间至少包含一个大写字母

第3点是我真的无法解决的部分。

正则表达式`"fu:(.*)?"`匹配除第 3 点之外的所有字符串。

[编辑] 现在已经很接近了，唯一的问题是它不会在第二个“之后停止。基本上这个字符串：
“fu：没有大写字母：，一些其他带有大写字母的随机文本”
是匹配但不应该。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T09:45:51.027

适合您的正则表达式是这样的：

```
/^"fu:.*?[A-Z].*?"$/ 
```

这里[是上述正则表达式的现场演示](http://www.rubular.com/r/cBUaBLVsrC)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:08:45.197

```
^"fu:.*[A-Z].*"$ 
```

如果您希望搜索多行文本，请不要忘记多行模式。

```
^"fu:  - starts with "fu:
.*     - any other characters
[A-Z]  - capital letter
.*     - other characters
"$     - " at the end 
```

测试它的好工具：[http ://www.regexplanet.com/advanced/java/index.html](http://www.regexplanet.com/advanced/java/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T11:57:20.003

我评论了 anubhava 解决方案的一个问题（它只匹配 A 到 Z 范围内的大写字母），但后来自己找到了解决方案。请注意，这需要[符合 POSIX](http://en.wikipedia.org/wiki/Regular_expression#POSIX_Extended_Regular_Expressions)且支持 Unicode 的正则表达式引擎。

我的解决方案是

```
/^"fu:.*[[:upper:]].*"$/ 
```

它解决了在英语以外的其他语言（部分或完全不同的字母表）中查找大写字母的问题。

Ruby 中的一个示例：

```
rx = /^"fu:.*[[:upper:]].*"$/
arr = ['"fu:Berlin"', '"fu:İstanbul"', '"fu:Washington"', '"fu:Örebro"', '"fu:Москва"']
arr.map {|s| s.scan rx} 
```

在这种情况下，所有字符串都匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T09:06:31.980

就像是

```
^"fu:([^"]*?[A-Z][^"]*?)"$ 
```

# php - 如何更改 CakePHP 中默认的 setFlash()？

> ID：10830447
> 
> 赞同：2
> 
> 时间：2012-05-31T09:02:51.770
> 
> 标签：php, cakephp-2.0

如何更改 CakePHP 中默认的 setFlash()？如何或在何处更改此默认元素：

```
<div id="flashMessage" class="message">
My message.
</div> 
```

必要的：

```
<div id="myid" class="myclass">
My message.
</div> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:10:40.667

根据[文档](http://book.cakephp.org/2.0/en/core-libraries/components/sessions.html#creating-notification-messages)：

创建文件 app/View/Elements/flash_custom.ctp 并构建我们的自定义 flash 元素：

```
<div id="myid"><?php echo $message; ?></div> 
```

然后`setFlash()`使用这些参数调用：

```
<?php 
$this->Session->setFlash('My message.', 'default', array('class' => 'myclass')); 
```

`$this->Session->flash()`与上述示例一起使用的模板中的输出将是：

```
<div id="myid" class="myclass">My message.</div> 
```

# nosql - Cassandra 使用复合索引和辅助索引一起使用

> ID：10830453
> 
> 赞同：6
> 
> 时间：2012-05-31T09:03:13.103
> 
> 标签：nosql, cassandra, cql

我们想使用 cassandra 来存储复杂的数据
，但我们不知道如何组织索引。

我们的表（列族）如下所示：

```
Users =
  { 
    RandomId int,
    Firstname varchar,
    Lastname varchar,
    Age int,
    Country int,
    ChildCount int
  } 
```

我们的查询包含必填字段（名字、姓氏、年龄）和额外的搜索选项（国家、ChildCount）。
我们应该如何组织索引以使这种查询更快？

首先我想，在（名字，姓氏，年龄）上创建复合索引并在剩余字段（国家和儿童计数）上添加单独的二级索引是很自然的。
但是创建二级索引后我无法将行插入表中，也无法查询该表。

使用

*   卡桑德拉 1.1.0
*   带有 --cql3 选项的 cqlsh。

欢迎任何其他解决我们问题的建议（具有强制性和附加选项的复杂查询）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T20:36:13.470

This is my idea. You could simply create a column family with your RandomId as the row key and all the remaining fields simply as columns (e.g. column name 'firstname', column value 'jonh'). After this you have to create a secondary index for each of these columns. The cardinality of your values seems to be low so it should be slightly efficient.

THe CQL code should be something like:

```
create column family users with comparator=UTF8Type and column_metadata=[{column_name:  firstname, validation_class: UTF8Type,index_type: KEYS},
{column_name: lastname, validation_class: UTF8Type, index_type: KEYS},
{column_name: contry, validation_class: IntegerType, index_type: KEYS},
{column_name: age, validation_class: IntegerType, index_type: KEYS]},
{column_name: ChildCount, validation_class: IntegerType, index_type: KEYS]]; 
```

A good reference for it could be [http://www.datastax.com/docs/0.7/data_model/secondary_indexes](http://www.datastax.com/docs/0.7/data_model/secondary_indexes)

Let me know if I'm wrong;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-29T19:40:20.317

对于涉及大量分区的查询，索引不是很有效。

我认为最好根据您要进行的查询来考虑表：您想要一个基于用户名的查询表，这似乎是存储有关用户的所有信息的正确位置。另一方面，我假设您希望能够根据国家/地区进行搜索以提供用户列表：因为您实际上并不需要所有信息，可能只需要名字和姓氏，或者只需要电子邮件，等等。然后另一张桌子可以做到。

这涉及一些数据重复，但更符合 Cassandra 数据建模思想。

这将给出：

```
CREATE TABLE users(
   id UUID,
   lastname TEXT,
   firstname TEXT,
   age INT,
   country TEXT,
   childcount INT,
   PRIMARY KEY(UUID)
);

CREATE TABLE users_by_country(
   country TEXT,
   firstname TEXT,
   lastname TEXT,
   user_uuid UUID,
   PRIMARY KEY((country), firstname, lastname)
);

CREATE TABLE users_by_age(
   age INT,
   firstname TEXT,
   lastname TEXT,
   user_uuid UUID,
   PRIMARY KEY((age), firstname, lastname)
); 
```

# iphone - 使用“SecondViewController *”类型的表达式初始化“NSMutableArray *__strong”的不兼容指针类型

> ID：10830455
> 
> 赞同：1
> 
> 时间：2012-05-31T09:03:17.183
> 
> 标签：iphone, ios, xcode, xcode4

我必须将第一个数组中的值调用到下一个数组。但是我在声明数组时收到了这条消息：-

```
SecondViewController *second = [[SecondViewController alloc] init];
NSMutableArray *_iArray = [second initWithMethod:@"jjsh" :@"jkhfhads"]; 
```

如何纠正它以阻止我的应用程序崩溃？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:08:49.117

`initWithMethod`: 这个方法的返回类型是 (id)，它会说它是 SecondViewController 的初始化器。如果您要初始化数组。然后使用`NSMutableArray`方法的返回类型`initWithMethod`

# java - java.io.FileNotFoundException（找不到文件）使用扫描仪。我的代码有什么问题？

> ID：10830460
> 
> 赞同：5
> 
> 时间：2012-05-31T09:03:45.210
> 
> 标签：java, java.util.scanner, filenotfoundexception

我的 netbeans“/build/classes”目录中有一个 .txt 文件（“file.txt”）。

在**同一**目录中有为以下代码编译的 .class 文件：

```
try {
File f = new File("file.txt");
Scanner sc = new Scanner(f);
}
catch (IOException e) {
   System.out.println(e);
} 
```

调试代码（“Scanner sc ..”中的断点）会启动异常并打印以下内容：

> java.io.FileNotFoundException: file.txt（系统找不到指定文件）

我也尝试使用“/file.txt”和“//file.txt”，但结果相同。

提前感谢您的任何提示

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T09:10:52.747

如果您只是使用`new File("pathtofile")`该路径相对于您当前的工作目录，则根本不一定是您的类文件所在的位置。

如果您确定该文件位于类路径中的某个位置，则可以改用以下模式：

```
URL path = ClassLoader.getSystemResource("file.txt");
if(path==null) {
     //The file was not found, insert error handling here
}
File f = new File(path.toURI()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T09:07:26.237

JVM 将在当前工作目录中查找该文件。

这取决于您的 IDE 设置（您的程序如何执行）。

要弄清楚*它*的预期`file.txt`位置，您可以这样做

```
System.out.println(new File(".")); 
```

如果它例如输出

```
/some/path/project/build 
```

您应该放置`file.txt`在构建目录中（或指定相对于构建目录的正确路径）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T09:05:42.253

尝试：

```
File f = new File("./build/classes/file.txt"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T09:47:39.383

```
Use "." to denote the current directory

String path = "./build/classes/file.txt";

File f = new File(path); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-20T06:10:53.213

文件对象加载，在其当前目录中寻找匹配项....直接在您的项目文件夹中，您的类文件在其中加载而不是在您的源中......将文件直接放在项目文件夹中

# c# - 在没有页面刷新的情况下将数据发布到 MVC3 控制器

> ID：10830461
> 
> 赞同：0
> 
> 时间：2012-05-31T09:03:45.710
> 
> 标签：c#, html, json, asp.net-mvc-3, post

我有这个脚本，基本上有 4 个选择框，我想要的是对于 2 个顶部选择框，他将选择的选项值提交给一个动作（可以在“ProductKoppeling/ProductKoppelingPartial”找到），我想让当我单击一个选项但没有刷新页面时，他会提交此数据。

我尝试了 JSON 并尝试了 Ajax，但我没有让它工作。我应该怎么做？

**脚本：**

```
<script language="javascript" type="text/javascript">
function delete_1() {
    var answer = confirm("U staat op het punt dit product te verwijderen, wilt u doorgaan?")
    if (answer) {
        document.getElementById('Actie_1').value = '5';
        document.getElementById('hpg_submit').submit();
    }
}
function delete_2() {
    var answer = confirm("U staat op het punt dit product te verwijderen, wilt u doorgaan?")
    if (answer) {
        document.getElementById('Actie_2').value = '6';
        document.getElementById('pg_submit').submit();
    }
}
function delete_3() {
    var answer = confirm("U staat op het punt dit product te verwijderen, wilt u doorgaan?")
    if (answer) {
        document.getElementById('Actie_3').value = '6';
        document.getElementById('p_submit').submit();
    }
}
</script> 
```

**CSHTML：**

```
<div style="width: 500px; float: left;">
@using (Html.BeginForm("ProductKoppelingPartial", "ProductKoppeling", FormMethod.Post, new { id = "onload_submit" }))
{
    @Html.DropDownList("Klant.Id", (ViewBag.Klant as SelectList), new { onchange = "document.getElementById('onload_submit').submit()" })
}
<div style="clear: both"></div>
<div style="float: left;">
    <b>Hoofdgroepen</b><br />
    @using (Html.BeginForm("ProductKoppelingPartial", "ProductKoppeling", FormMethod.Post, new { id = "hpg_submit" }))
    {
        if (ViewBag.SelectedKlant != null)
        {
            <input type="hidden" name="Klant.Id" value="@ViewBag.SelectedKlant.Id" />
        }
        <select style="width: 200px;" size="6" id="HoofdProductGroep" name="HoofdProductGroep.Id" onchange="document.getElementById('hpg_submit').submit();">
            @foreach (var hpg in ViewBag.HoofdProductGroep)
            {
                if (ViewBag.SelectedHPG != null)
                {
                    if (hpg.Id == ViewBag.SelectedHPG.Id)
                    {
                        <option value="@hpg.Id" selected="selected">@hpg.Naam</option>
                    }
                    else
                    {
                        <option value="@hpg.Id">@hpg.Naam</option>
                    }
                }
                else
                {
                    <option value="@hpg.Id">@hpg.Naam</option>
                }
            }
        </select>
        <input type="hidden" name="Actie" id="Actie_1" value="0" />
        <br />
        <img src="../../Content/toevoegen.png" style="cursor: pointer; width: 30px;" onclick="document.getElementById('Actie_1').value='1';document.getElementById('hpg_submit').submit();" />
        <img src="../../Content/bewerken.png" style="cursor: pointer; float: none; width: 30px;" onclick="document.getElementById('Actie_1').value='2';document.getElementById('hpg_submit').submit();" />
        <img src="../../Content/verwijderen.png" style="cursor: pointer; float: none; width: 30px;" onclick="delete_1()" />
    }
</div>
<div style="float: right;">
    <b>Groepen</b><br />
    @using (Html.BeginForm("ProductKoppelingPartial", "ProductKoppeling", FormMethod.Post, new { id = "pg_submit" }))
    {
        if (ViewBag.SelectedHPG != null)
        {
            <input type="hidden" name="HoofdProductGroep.Id" value="@ViewBag.SelectedHPG.Id" />
        }
        if (ViewBag.SelectedKlant != null)
        {
            <input type="hidden" name="Klant.Id" value="@ViewBag.SelectedKlant.Id" />
        }
        <select size="6" style="width: 200px;" id="ProductGroep_Id" name="ProductGroep.Id" onchange="document.getElementById('pg_submit').submit();">
            @foreach (var pg in ViewBag.ProductGroep)
            {
                if (ViewBag.SelectedPG != null)
                {
                    if (pg.Id == ViewBag.SelectedPG.Id)
                    {
                        <option value="@pg.Id" selected="selected">@pg.Naam</option>
                    }
                    else
                    {
                        <option value="@pg.Id">@pg.Naam</option>
                    }
                }
                else
                {
                    <option value="@pg.Id">@pg.Naam</option>
                }
            }
        </select>
        <input type="hidden" name="Actie" id="Actie_2" value="0" />
        <br />
        <img src="../../Content/toevoegen.png" style="cursor: pointer;  width: 30px;" onclick="document.getElementById('Actie_2').value='3';document.getElementById('pg_submit').submit();" />
        <img src="../../Content/bewerken.png" style="cursor: pointer; float: none; width: 30px;" onclick="document.getElementById('Actie_2').value='4';document.getElementById('pg_submit').submit();" />
        <img src="../../Content/verwijderen.png" style="cursor: pointer; float: none; width: 30px;" onclick="delete_2()" />
    }
</div>
<div style="clear: both; height: 25px;"></div>
@using (Html.BeginForm("Save", "ProductKoppeling", FormMethod.Post, new { id = "p_submit" }))
{
    <div style="float: left">
        <b>Producten</b><br />
        <select size="18" style="width: 200px;" name="Product.Id">
            @foreach (var p in ViewBag.Product)
            {
                <option value="@p.Id">@p.Naam</option>
            }
        </select>
        @if (ViewBag.SelectedPG != null)
        {
            if (ViewBag.SelectedPG.Id != null)
            {
                <input type="hidden" name="ProductGroep.Id" value="@ViewBag.SelectedPG.Id" />
            }
        }
        <input type="hidden" name="Actie" id="Actie_3" value="0" />
        <br />
        <img src="../../Content/toevoegen.png" style="cursor: pointer; width: 30px;" onclick="document.getElementById('Actie_3').value='1';document.getElementById('p_submit').submit();" />
        <img src="../../Content/bewerken.png" style="cursor: pointer; float: none; width: 30px;" onclick="document.getElementById('Actie_3').value='2';document.getElementById('p_submit').submit();" />
        <img src="../../Content/verwijderen.png" style="cursor: pointer; float: none; width: 30px;" onclick="delete_3()" />
        <br />
    </div>
    <div style="float: left; width: 100px;">
        <center>
            <br /><br /><br /><br />
            <a style="cursor: pointer; float: none; color: blue; font-size: 30px;" onclick="document.getElementById('p_submit').submit();">»</a>
            <br /><br /><br /><br /><br /><br /><br /><br /><br />
            <a style="cursor: pointer; float: none; color: blue; font-size: 30px;" onclick="document.getElementById('pgp_submit').submit();">«</a>
        </center>
    </div>
}
<div style="float: right;">
    <b>Producten in groepen</b><br />
    @using (Html.BeginForm("Delete", "ProductKoppeling", FormMethod.Post, new { id = "pgp_submit" }))
    {
        <select size="18" style="width: 200px;" name="ProductGroepProduct.Id">
            @foreach (var pgp in ViewBag.ProductGroepProduct)
            {
                if (pgp != null)
                {
                    if (pgp.Product != null)
                    {
                        <option value="@pgp.Id">@pgp.Product.Naam</option>
                    }
                }
            }
        </select>
    }
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:06:29.700

您正在使用 Html 表单。

默认情况下，这会导致刷新。

使用 ajax 表单或根本不使用表单，只调用一个操作但不返回操作结果。

创建一个类似于以下内容的控制器：

```
public void Action(String paramater)
{
    ...
} 
```

当您从视图中调用它时，它将在服务器端执行代码，而不会对客户端造成任何影响。

按照要求：

添加了非刷新 Ajax 表单示例：

```
$.ajax({
  type: "POST",
  url: "URL",
  data: dataString,
  success: function() {
    ...
    };
});
return false; 
```

return false 防止刷新。

请按照[本](http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/)指南获取完整教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:12:17.463

也许您应该使用 Ajax 调用...并选择您希望刷新的 div：这是一个简短的示例：

```
AjaxOptions ajaxOptions = new AjaxOptions
{
    HttpMethod = "Post",
    UpdateTargetId = "Mydiv",
    OnSuccess = "aJqueryFunction"
}; 
```

在你的 ajax 调用中：

```
<div id="Mydiv">
   @using (Ajax.BeginForm("text", "Action",(optional)"Cotroller", ajaxOptions))
{}
</div> 
```

# android - Android App 从后台状态重新打开

> ID：10830476
> 
> 赞同：3
> 
> 时间：2012-05-31T09:04:47.137
> 
> 标签：android

有什么方法可以识别应用程序是从头开始（即**尚未**在内存中）还是从后台（已经打开应用程序并点击`home`按钮）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:23:26.907

如果你真的是指 Application 而不是 Activity，那么你应该创建一个从 android.app.Application 对象派生的类，并在清单中声明这个类，以便能够通过覆盖的方法监视它的生命周期。每次您的应用程序从头开始时都会创建一个此类对象，因此如果您需要在应用程序生命周期中保存一些数据，则此对象或任何类型的单例都是一种很好的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T13:51:58.150

如果您只想知道 APP 何时从后台状态返回（当您返回家中或另一个应用程序并再次返回您的应用程序时）也许这可以帮助您。如果您发现不适用的情况，请告诉我。

* * *

```
public class FatherClass extends Activity {

      private static int activities = 0;

      public void onCreate(Bundle savedInstanceState, String clase) {
           super.onCreate(savedInstanceState);
      }

      protected void onRestart(){
           super.onRestart();
           if(activities == 0){
                 Log.i("APP","BACK FROM BACKGROUND");
           }
      }

      protected void onStop(){
           super.onStop();
           activities = activities - 1;
      }

      protected void onStart(){
           super.onStart();
           activities = activities + 1;
      }
} 
```

* * *

您的所有活动都必须从这个扩展。

而且很简单，如果您的主要活动执行 onCreate() （您想要的活动中的方法，而不是我的示例中的 onCreate ）并且您永远不会从另一个活动中调用它（将其视为启动屏幕），那么您就是从头开始，但是如果您的活动执行 onRestart() 并且计数器“活动”值是 0“零”，那么您正在从后台状态返回，我希望这可以帮助您并且不会为另一个人迟到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-17T10:40:57.723

整个代码应该写在一个应用程序特定的超级活动中

```
 boolean isForeground = isInForeground(this);

        if ((!hasFocus) && (!isForeground)) {
            context.isBackground = true;
            Log.v("Alalytics", "Background...");
        }
        else if (context.isBackground) {
            context.isBackground = false;
            Log.v("Alalytics", "Forground...");
        } 
```

然后...创建方法来检查应用程序是前台还是后台的天气

/** * 检查应用程序是否在前台 * * @param context 上下文 * @return true，如果在前台 ** /

```
private boolean isInForeground(Context context) {
    ActivityManager activityManager = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
    List<RunningAppProcessInfo> appProcesses = activityManager.getRunningAppProcesses();
    if (appProcesses == null) {
        return false;
    }
    final String packageName = context.getPackageName();
    for (RunningAppProcessInfo appProcess : appProcesses) {
        if (appProcess.importance == RunningAppProcessInfo.IMPORTANCE_FOREGROUND
                && appProcess.processName.equals(packageName)) {
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-09T18:38:42.390

由于声誉低，我无法添加评论，因此我将为 Reddy Raaz 添加新答案：这样您需要额外的权限，这可能会阻止某些用户安装该应用程序。框架只有在从头开始时才真正调用 Application.onCreate 方法。这样您就可以可靠地获取信息，而无需额外的许可。

# ajax - 可抓取的 Ajax 内容。没有 hashbang 的 SEO。我的方法好吗？

> ID：10830478
> 
> 赞同：3
> 
> 时间：2012-05-31T09:05:04.577
> 
> 标签：ajax, url, seo, web-crawler, hashbang

我将基于 ajax 构建我的应用程序，我的 URL 类似于：

```
http://server.com/module/#function_name,param1,param2...etc 
```

在参考了一些关于 google 建议的讨论后：hashbang (#!)，我不难意识到这不是最好的解决方案。有几个原因：

*   无论如何，URL 非常难看。
*   如果有一天谷歌（或其他一些搜索引擎）提出了一个比 hashbang 更好的解决方案，那就太糟糕了。我必须用 hashbang 保留我丑陋的 url，或者编写一些 js 代码来使指向我的页面的链接仍然有效。
*   HTML5 pushState 总有一天会流行起来。

对于上述所有事情，我决定按照自己的方式进行：我的导航链接将是这样的：

```
<a href="http://server.com/module/for-crawler/function-name/param1/param2/...">
Some text </a> 
```

一些 jQuery 代码将使其能够加载 ajax 内容，而不是像普通链接那样进行页面更改：

```
$(function(){
    $('a').live('click',function(e){
        var realURL = translateURL( $(this).attr('href') )
        loadContent( realURL );
        e.prevetnDefault(); 
        return false;
    })
})
/* -- the function translateURL will turn url like :
..... http://server.com/module/for-crawler/function-name/param1/param2/...
Into:
..... http://server.com/module/#function-name/param1/param2/...
    That's the real url I think all ajaxers are used to dealing with
*/ 
```

当爬虫读取我的页面时，它会跟随“href”属性中的url，我会提供我页面的静态非js版本供google阅读。几天后，我的页面被编入索引，用户将在 Google 的搜索结果中看到我的页面，如下所示：

```
http://server.com/module/for-crawler/function-name/param1/param2/... 
```

我将再次使用用户 js 将用户重定向到我的正常 ajax 版本，我的意思是，到真正的 URL：

```
http://server.com/module/#function-name/param1/param2/... 
```

这是我目前能想到的最好的方法。请给我建议：我应该这样做，还是可以做得更好？谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T18:32:53.903

根据您的听众，我建议还是使用 HTML5 PushState。

如果客户端不支持 HTML5 PushState，让他简单地使用与爬虫相同的应用程序版本。在我看来，页面重新加载并不像散列 URL 那样糟糕。由于用户共享 URL，因此您的散列 URL 会暴露给其他用户。此 URL 不适用于 Facebook 链接共享预览或任何其他不支持 JavaScript 的客户端。

相反，我只会将爬虫友好型应用程序与 HTML5 PushState 结合使用。使用 PushState，您将始终公开单个 URL，而与客户端的 JavaScript 支持无关。

首先检测是否支持PushState：

`function supports_history_api() { return !!(window.history && history.pushState); }`

然后你`click-handler`会看起来像这样：

```
$('a').live('click',function(e){
  var url = $(this).attr('href');
  e.preventDefault();
  loadContent( url );
  history.pushState({"url":url}, $(this).attr('title'), url);
  return false;
}) 
```

# c# - 换出数千个值的效率

> ID：10830480
> 
> 赞同：1
> 
> 时间：2012-05-31T09:05:05.823
> 
> 标签：c#, sql, switch-statement, performance

我正在将数据导入数据库。每次大约 5000 行。当我插入数据库时​​，其中一列有一个位置。总共有大约 80 个可能的位置。在将每一行插入数据库之前，我想检查每一个并将其更改为另外 80 个位置名称的列表。目前我有一个 switch 语句可以帮助我，但我想知道是否有人认为这是一种不好的方法，或者我是否走在正确的轨道上。

所以目前基本上是这样。当我上传我的数据时，需要检查该 switch 语句并且值更改了 5000 次。开关是正确的方式吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T09:08:27.993

不要使用 switch 语句，很难维护。在您的数据库中创建另一个表，将您的输入位置映射到所需的数据库位置，然后查询该位置。使更新/插入新位置等变得更加容易，并将脚本的长度保持在合理的水平。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T09:13:23.840

您可以使用数据库中的转换表或应用程序中的字典来代替开关。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T09:14:20.110

在导入过程中似乎不适合转换。

我会按原样导入数据，然后导入`UPDATE`表格，或者使用前面建议的查找表

# mysql - 多表加载（PHP + MySQL）

> ID：10830481
> 
> 赞同：0
> 
> 时间：2012-05-31T09:05:11.600
> 
> 标签：mysql, sql

我已经搜索并找到了类似的问题和答案，但我无法让它发挥作用。

**我有两张桌子：**

**播放列表** （id、name 和 song_id）

**歌曲**（ID，名称）

我的 php 文件地址如下：`http://example.com/?playlist=30` 我想`$_GET['playlist']`从该特定播放列表中获取并选择所有歌曲。

喜欢： `$result = mysql_query("SELECT * FROM playlist WHERE id=$_GET['playlist']");` 并且从那个结果中我想选择歌曲，

像：`$result = mysql_query("SELECT * FROM songs WHERE playlist.song_id = songs.song_id");`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:09:53.627

您可以在一个查询中将这些表连接在一起[：](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

```
SELECT *
FROM   playlist JOIN songs ON songs.id = playlist.song_id
WHERE  playlist.id = ? 
```

请不要`$_GET`直接在 SQL 中使用变量 - 这会使您容易受到 SQL 注入攻击。您*确实*应该使用准备好的语句，将变量作为参数传递到其中，而不会针对 SQL 进行评估。如果您不知道我在说什么或如何解决它，请阅读[Bobby Tables](http://bobby-tables.com)的故事。

另外，请停止使用古老的 MySQL 扩展编写新代码：它不再维护，社区已开始[弃用过程](http://news.php.net/php.internals/53799)。相反，您应该使用改进的[MySQLi](http://php.net/mysqli)扩展或[PDO](http://php.net/pdo)抽象层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:09:56.547

你试过这样

`mysql_query("SELECT * FROM songs WHERE song_id IN(SELECT song_id FROM playlist WHERE id=$_GET['playlist'])`;

如果您的播放列表表有 song_id 列

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T09:10:29.720

```
 $result = mysql_query("SELECT s.id,s.name,p.id,p.name FROM songs s inner join playlist p on s.id=p.song_id where p.id=$_GET['playlist']"); 
```

# ruby - HAML 模板助手中的多行字符串

> ID：10830482
> 
> 赞同：3
> 
> 时间：2012-05-31T09:05:16.183
> 
> 标签：ruby, haml

我希望能够将多行字符串传递给 haml 助手。

我有一个函数 format_code，它接受一个字符串和一组要突出显示的行号。

此函数的目的是将原始源代码转换为格式化的 HTML，其中突出显示的行、行号、换行符转换为 brs 等。

如果我这样称呼它：

```
%p Some HAMl

=format_code("def something
  a = b
  b = c
end", :highlight_line => 2)

%p Some more HAML 
```

这样做的原因是将代码示例嵌入到 HAML 文档中。

HAML 抱怨纯文本中的嵌套。嵌套发生在一个字符串中，所以我认为这没问题。同样的调用在 irb 中运行良好。

我会使用一个助手，但我希望能够传递一个参数哈希。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:57:59.757

我假设您想将代码示例硬编码到 HAML 模板中，因此您确实想要我立即响应的内容：“您不想要这个”。在这种情况下，我可能会选择：

```
:ruby
  code = <<-CODE
    def something
      a = b
      b = c
    end
  CODE

%p Some HAMl

=format_code(code, :highlight_line => 2)

%p Some more HAML 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:39:50.537

我尝试了不同的变体，我认为最简单的变体如下（代码直接取自你的）：

```
%p Some HAMl

=format_code("def something\t  a = b\t  b = c\tend", :highlight_line => 2)

%p Some more HAML 
```

这至少应该是多行的问题......

# perl - 不能将 SOAP 对象的对象方法与 SOAP::Lite 一起使用

> ID：10830483
> 
> 赞同：0
> 
> 时间：2012-05-31T09:05:21.380
> 
> 标签：perl, soap, jira, soaplite

我正在通过 SOAP 从我们的 Jira 中读取数据并收到一组`RemoteIssue`-Objects。现在我想遍历这些并获取每张票的状态。RemoteIssue的[文档](http://docs.atlassian.com/rpc-jira-plugin/4.4/com/atlassian/jira/rpc/soap/beans/RemoteIssue.html)说有一个`getStatus()`-Method。当我在对象上调用它时，我的程序会引发错误。

一些代码：

```
my $soap = SOAP::Lite->uri($soap_uri)->proxy($soap_proxy);
my $login = $soap->login( $soap_user, $soap_password)->result;

if ($login) {
    # This works
    my $issues = $soap->getIssuesFromJqlSearch( $login, "project = \"$project\" AND fixVersion = \"$project_version\"", 500 );

    if ($issues) {
        foreach my $issue (@{$issues->result}) {
            my $foo = $issue->getStatus(); # This doesn't work
            print Dumper $foo;
        }
    }
}
$soap->logout(); 
```

抛出的错误：

`Can't locate object method "getStatus" via package "RemoteIssue" at D:\ZeuS\lib/ZeuS.pm line 81`

其他所有对象方法也不起作用。

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:42:31.117

根据我收集到的信息，您的印象是您正在接收您将在 Java 使用者上操作的 Java 对象。

除非`$issue->getStatus()`是 SOAP 调用（我认为不是），否则您不是在处理 API，而是在处理`SOAP::Lite`XML 响应的 Perl 表示。

`getIssuesFromJqlSearch`似乎是远程调用。从那里，你应该得到`$issues`一个[`SOAP::SOM`](http://search.cpan.org/perldoc?SOAP%3a%3aSOM)对象。然后，您可以使用该[`result`](http://search.cpan.org/perldoc?SOAP%3a%3aSOM#result)方法正确解决。

这将具有为该对象所祝福的类定义的任何方法。

要查看所有此对象的响应，请尝试以下操作：

```
use mro ();
use Scalar::Util qw<blessed>;
...
    foreach my $issue (@{$issues->result}) {
        say '$issue ISA ('
          . join( ',', @{ mro::get_linear_isa( blessed( $issue )) } )
          . ')'
          ;
          ...
    } 
```

`$issue`只会有那些在 Perl 端为它定义的方法。

*   **注意：**从您的代码中不清楚`ZeuS.pm`这件事的来源。

# iphone - iOS 框架二进制文件位于文件系统中的什么位置？

> ID：10830488
> 
> 赞同：12
> 
> 时间：2012-05-31T09:05:48.353
> 
> 标签：iphone, ios, jailbreak

我对 iOS 上的框架有点困惑。我认为它们基本上是一个包含动态库、标题和资源的目录。

但在我的设备中，System/Library/Frameworks 中的 frameworks 目录不包含动态库。这怎么可能？当需要它的应用程序启动时，它不应该被加载到内存中吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-02T03:09:18.700

二进制文件不再存在于设备上（自 iOS 3.1 以来也不再存在）：Apple 已将它们全部合并到一个大`mmap()`的缓存文件中，以使应用程序启动更加高效。由于页面通常永远不会改变，内核可以在每个运行的映像之间有效地共享它们。您仍然可以`dlopen()`在缓存中保存的文件上使用，当给定库存在于缓存中时，作为`dyld`短路文件查找。

缓存文件位于 中，并以体系结构（或）`/System/Library/Caches/com.apple.dyld`命名。可以使用[dsc_extractor](http://opensource.apple.com/source/dyld/dyld-195.6/launch-cache/dsc_extractor.cpp "dsc_extractor source")或 KennyTM 的 dyld_decache来提取其中的库，[在这个存储库](https://github.com/kennytm/Miscellaneous "kennytm/Miscellaneous")中可用，但是一旦提取它们实际上就不能正确地加载到内存中（因为它们都有效地将它们的符号表合并到缓存中。）`armv6``armv7`

这里有一些更好的（虽然更老，信息更少，更深入）的文章：http: [//blog.howett.net/2009/09/cache-or-check/](http://blog.howett.net/2009/09/cache-or-check/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T23:06:03.597

我也注意到了这一点。奇怪的。我无法向您解释“它们在哪里”，但我观察到，例如：

如果我列出一个（私有）框架目录：

```
iPhone4:/System/Library/PrivateFrameworks/BluetoothManager.framework root# ls -alt
total 8
lrwxr-xr-x   1 root wheel   28 Nov  4  2011 CodeResources -> _CodeSignature/CodeResources
drwxr-xr-x   3 root wheel  170 Nov  2  2011 ./
drwxr-xr-x   2 root wheel  102 Nov  2  2011 _CodeSignature/
-rw-r--r--   1 root wheel  740 Nov  2  2011 Info.plist
drwxr-xr-x 170 root wheel 5814 Dec 31  2007 ../

iPhone4:/System/Library/PrivateFrameworks/BluetoothManager.framework root# ls -alt _CodeSignature/
total 0
drwxr-xr-x 3 root wheel  170 Nov  2  2011 ../
drwxr-xr-x 2 root wheel  102 Nov  2  2011 ./
-rw-r--r-- 1 root wheel 1222 Nov  2  2011 CodeResources 
```

您看不到`BluetoothManager.framework/BluetoothManager`dylib 文件。 **但是，此代码实际上确实**可以动态打开该框架，就好像该文件存在一样：

```
handle = dlopen("/System/Library/PrivateFrameworks/BluetoothManager.framework/BluetoothManager", RTLD_LAZY); 
```

使用`find`根文件系统 ("/") 位置的命令也找不到名为**BluetoothManager**的设备上的文件。

我知道这可能不是您正在寻找的答案，但取决于您想知道的**原因，也许它有帮助？**

# backbone.js - Collat e Backbone 收集成功和错误

> ID：10830493
> 
> 赞同：0
> 
> 时间：2012-05-31T09:06:10.460
> 
> 标签：backbone.js

我有两个函数循环遍历 Backbone 集合中的所有模型，并保存已更改的模型，或销毁已选择删除的模型。我需要做的是整理成功和错误，以便我可以通知“X 个更改/删除成功”和/或“更改/保存 X 个域时出错”。

我没有保存/销毁 Backbone 集合的经验，只有模型；并且在互联网上找不到任何显示如何执行此操作的内容。

保存和删除由父视图中的事件调用。

相关代码：

```
App.Views.SiteDomains = Backbone.View.extend({
    el: '.site-domains',
    initialize: function() {
        this.collection.on('all',this.render, this);
    },
    render: function() {
        $('.site-domains').empty();

    this.collection.each( function(model)
    {
        var view = new App.Views.SiteDomain({model: model});
        this.$('.site-domains').append(view.render().el);

        return this;
    });
},
saveDomainChanges: function() {

    this.collection.each( function(model)
    {
        var ref = model.get('ref');

        if ($('#' + ref).val() != model.get('domain')) {

            $('.save-domains').prop('disabled', true);

            var fields = $(this.el).find('form').serializeArray(), data = {};

            $.each(fields, function(i, pair)
            {
                data[pair.name] = pair.value;
            });

            model.save(data, {

                wait:true,
                success: function(model, response, event)
                {
                    // Pass each success to notification function
                },

                error: function(model, response, event)
                {
                    // Pass each error to notification function
                }
            });
        }
    });
    $('.save-domains').prop('disabled', false);
},
removeDomain: function() {
    this.collection.each( function(model)
    {
        var ref = model.get('ref');

        if ($('#remove-' + ref).prop('checked'))
        {
            model.destroy({
                wait:true,
                success:function() {
                    // Pass each success to notification function
                },
                error: function() {
                    // Pass each error to notification function
                }
            });
        }
    });
}
}); 
```

非常非常多，非常感谢任何可以提供帮助的人！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T11:47:43.737

您可以根据您的应用程序设计使用事件聚合器并创建模型/视图或仅用于通知的 POJO。像这样的东西：

```
// Event aggregator
App.vent = _.extend({}, Backbone.Events);

// POJO for the notifications
App.notifications = {
    var onCreateSuccess = function (model, response) {
        ...
    };
    var onCreateError = function (model, response) {
        ...
    };
    App.vent.on('sitedomain:create:success', onCreateSuccess);
    App.vent.on('sitedomain:create:error', onCreateError);
};

// Add event triggering to corresponding callbacks
model.save(data, {
    wait:true,
    success: function(model, response, event) {
        App.vent.trigger('createdomain:create:success', model, response);
    },

    error: function(model, response, event) {
        App.vent.trigger('createdomain:create:error', model, response);
    }
}); 
```

# playframework-2.0 - 播放 2 多个 BodyParser

> ID：10830496
> 
> 赞同：2
> 
> 时间：2012-05-31T09:06:21.283
> 
> 标签：playframework-2.0

如何使控制器的动作方法包含两个不同的bodyparser？例如，

```
@BodyParser.Of(BodyParser.Json.class)
@BodyParser.Of(BodyParser.FormUrlEncoded.class)
public static Result register() {

    RequestBody body = request().body();
    JsonNode node = body.asJson();
    Map<String, String[]> map = body.asFormUrlEncoded();

    if(node != null) {
        return ok("Got: " + node);
    } else if (map != null) {
        return ok("Got: " + map);
    } else {
        return badRequest("Expecting application/json request body");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T12:12:02.813

我不认为它遵守约定以允许一种方法来解析两种不同的编码。你基本上想要两个控制器功能合二为一。我认为最好有单独的方法来处理不同的编码，像这样

```
private static void sharedApplicationLogic() { }

public static Result registerJSON() {
    JsonNode node = request().body().asJson();
    // Parse 
    sharedApplicationLogic();
}

public static Result registerFD() {
    Map<String,String[]> formdata = request().body().asFormUrlEncoded()
    // Parse
    sharedApplicationLogic();
} 
```

然后，您可以在路由文件中区分这些控制器方法

```
POST /register.json         controllers.Application.registerJSON()
POST /register.formdata     controllers.Application.registerFD() 
```

（这不是很 RESTfulness，但你明白了）

**或者**通过确定这是在控制器功能中。我觉得这很难看，但我想这就是您正在寻找的答案。诀窍是省略`@BodyParser`注释：

```
public static Result register() {

    RequestBody body = request().body();
    JsonNode node = body.asJson();
    Map<String, String[]> map = body.asFormUrlEncoded();

    if(node != null) {
        return registerJSON(node);
    } else if (map != null) {
        return registerFD(map);
    } else {
        return badRequest("Expecting application/json request body");
    }
} 
```

据我所知，没有比这更漂亮的方法了。可能不应该，因为您想将两种不同的方法映射到一个方法上。

# javascript - 设备 (ios/Android) 和桌面上的 WebSQL 数据库大小差异

> ID：10830505
> 
> 赞同：4
> 
> 时间：2012-05-31T09:07:01.170
> 
> 标签：javascript, ios, html, sqlite, cordova

我目前正在使用 Phonegap 开发一个 HTML5/Jquery 移动应用程序，以将其嵌入设备 (ios/Android)。

此应用程序需要一个离线数据库，并且在 safari mobile 上，此数据库的大小不能超过 50MB。这似乎很好，因为当我在我的 win 7 桌面上检查 chrome 上的数据库文件大小时，数据库是 37Mo。

该数据库通过应用程序中的 Web 服务填充。当我尝试从桌面执行时，没问题，结果文件是 37Mo。但是，当我从设备（ios 或 android）执行此操作时，超过了 50MB 大小限制并且应用程序抛出错误。

有人知道为什么嵌入式数据库文件和桌面数据库文件的文件大小不同（实际上几乎是两倍）吗？

而且，我该如何解决这个问题？（即：我怎样才能拥有小于 50MB 的嵌入文件？）。

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T09:36:44.957

我不确定，只是一个想法。WebSQL 使用 UTF-16 存储信息，但也许在 Chrome 中，它使用 UTF-8。看：

*   [确定 HTML5 数据库内存使用情况](https://stackoverflow.com/questions/3899983/determining-html5-database-memory-usage)
*   [http://hacks.mozilla.org/2012/03/people-of-html5-andrew-betts-on-building-the-ft-com-html5-app/](http://hacks.mozilla.org/2012/03/people-of-html5-andrew-betts-on-building-the-ft-com-html5-app/)

这可能就是为什么它正好是两倍

# javascript - 在 JavaScript 中，为什么 num == [num]？

> ID：10830510
> 
> 赞同：1
> 
> 时间：2012-05-31T09:07:16.800
> 
> 标签：javascript, numbers

为什么这些陈述评估为真的有理由吗？

```
0 == [0];
1 == [1];
5 == [5];
5000 == [5000];
1000000 == [1000000]; 
```

所以基本上任何数字都等于包裹在一个数组中？这背后的逻辑是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T09:11:05.050

这是因为在这种情况下，[非严格相等运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Comparison_Operators)将其操作数强制转换为字符串，而数组的字符串表示形式是它包含的元素，由逗号分隔：

```
>>> [1, 5].toString()
"1,5" 
```

由于您问题中的数组仅包含一个元素，因此它们的字符串表示形式与其元素的相同：

```
>>> [5000].toString()
"5000" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:12:15.283

`[0]`是一个包含一个元素“0”的数组。所以`0 == [0]`相当于做：

`0 == myArray(0)`用另一种语言。其中`myArray(0) returns the value at the index 0`，在这种情况下为 0。

这就是我对 JavaScript 数组的理解。如果我错了，其他人可能想跳进去纠正我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T09:15:47.913

因为 == 不比较变量的类型，而 === 比较变量的类型，所以：

```
0 == [0]  //true
0 === [0] // false 
```

在同样的情况下：

```
0 == '0'  //true
0 === '0' //false 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T09:11:49.173

这背后的一个原因是使用的运算符是“==”，它只比较比较值而不是数据类型，因为 1=="1" 是真的。

# javascript - 当翻书文件夹位于项目文件夹之外时，javascript + flash中的翻书

> ID：10830511
> 
> 赞同：1
> 
> 时间：2012-05-31T09:07:22.037
> 
> 标签：javascript, flash

我使用 JavaScript 和 flash 创建了一本翻书。当我们在项目根目录中保留翻书文件夹（即书页和 SWF 和其他支持文件）时，该翻书工作正常。但是当我想将此文件存储在项目文件夹之外或其他驱动器上时，它不起作用。

有谁知道我该怎么做？

# entity-framework - 不需要在 EF 中处理 DataContext/ObjectContext？

> ID：10830517
> 
> 赞同：10
> 
> 时间：2012-05-31T09:07:37.027
> 
> 标签：entity-framework, repository, repository-pattern, idisposable

Albahari 在“c# 4.0 in a nutshell”中写道：

> > 尽管 DataContext/ObjectContext 实现了 IDisposable，但您（通常）可以在不释放实例的情况下逃脱。释放会强制释放上下文的连接——但这通常是不必要的，因为每当您完成从查询中检索结果时，L2S 和 EF 都会自动关闭连接<<

这感觉不对，如果您不处理 IDisposable 的东西，FxCop 也会抱怨。

我有以下存储库代码：

```
 public abstract class Repository<TEntity> : IRepository<TEntity> where TEntity : class
    { ...
        public void Add(TEntity entity)
    {
        using (var dbContext = this.UnityContainer.Resolve<DbContext>())
        {
            dbContext.Set<TEntity>().Add(entity);
            dbContext.SaveChanges();
        }
    }

    ...

    public virtual IEnumerable<TEntity> Find(Expression<Func<TEntity, bool>> expression)
    {
       using (var dbContext = this.UnityContainer.Resolve<DbContext>())
       {
           return dbContext.Set<TEntity>().Where(expression).ToList().AsEnumerable();
       }
    }
    ... 
```

注意：我不返回 IQueryable - 延迟加载不应该起作用。Resolve DbContext 配置为 PerResolveLifetimeManager。

这种方法可以吗，还是我需要根据 Albaharis 的描述重新考虑？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T09:18:43.950

如果类公开它，您应该始终调用 dispose。该声明声称 EF 和 L2S 在完成操作时关闭连接 - 我知道该声明是正确的，但同时 ADO.NET 团队也关闭了`Dispose`方法中的连接，因此可能存在连接未关闭的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-12T04:31:13.190

我正在研究 EF 4.0 ObjectContext（是的，我知道......）。我最终查看了 DotPeek 中的代码，并且 dispose 只是将连接的引用和 ObjectContext 类中的一些其他内容置为空。

创建连接时（也可以通过 DotPeek 找到），它会返回现有实例。如果连接字符串发生更改，它将更新所有实例的连接字符串。

至少这是我的看法。需要深入研究，但乍一看，您似乎可以侥幸逃脱。

# sharepoint - 创建 Sharepoint 2010 服务应用程序数据库、不带 GUID 的应用程序池名称

> ID：10830518
> 
> 赞同：0
> 
> 时间：2012-05-31T09:07:37.817
> 
> 标签：sharepoint, sharepoint-2010

我最近开始研究 Sharepoint 2010 并创建了一个 3 层测试设置（服务器 1-WFE 和 CA，服务器 2-运行所有服务应用程序，服务器 3-数据库服务器）。[我使用本博客](http://www.toddklindt.com/blog/Lists/Posts/Post.aspx?ID=241)中列出的 powershell 命令首先创建了管理和配置数据库。之后，我使用 Farm 向导来配置所有服务应用程序。

完成后，所有服务应用程序数据库名称都有 GUID。在 IIS 7 中，Sharepoint Web 服务下的所有应用程序池和虚拟目录都有 GUID。此外，所有服务应用程序都在相同的用户 ID（域\spservice）中运行，我无法更改某些服务的 ID。

我想重新创建我的环境并且在数据库名称和 IIS 中都没有任何 GUID。我找不到任何关于如何在没有 GUID 的情况下创建所有服务应用程序数据库和 IIS 应用程序池的文档。我发现的[一篇文章](http://stevemannspath.blogspot.in/2011/01/sharepoint-2010-removing-guids-in.html)提到了如何在安装后删除 GUID。（我想知道那里的所有生产 Sharepoint 2010 农场是否真的在 DB 名称和 IIS（应用程序池、虚拟目录）中使用 GUID！？）

有人可以指导我看一篇文章，其中概述了在 DB 和 IIS 中配置没有 GUID 的完整 sharepoint 2010 环境的步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:02:46.800

当我开始进行初始测试设置时，我使用了农场配置向导，它创建了几乎所有带有 GUID 的数据库，并且所有这些 GUID 似乎对于管理环境、文档等来说都是压倒性的。

简而言之，可以在没有 GUID 的情况下创建共享点数据库（使用 powershell）。但是在 IIS 中，在 IIS 中为服务应用程序创建应用程序池和虚拟目录必须使用 GUID。没有其他选择。

我按照本文中的步骤[进行](http://www.toddklindt.com/blog/Lists/Posts/Post.aspx?ID=241)初始安装，然后使用脚本从这篇[technet](http://technet.microsoft.com/en-us/library/gg983005.aspx)文章创建服务应用程序，并进行必要的服务器和数据库名称更改。

凭借我作为 Windows 网络场管理员和管理统一命名约定的大部分经验，GUID 名称最初看起来很烦人！但是由于很少需要从 IIS 界面进行管理或故障排除，因此我们不必担心应用程序池名称和带有 GUID 的 vdir。一切都与 ULS 日志、事件查看器和管理中心站点有关！

# python - PyQt4 - QGIS 表单错误

> ID：10830520
> 
> 赞同：0
> 
> 时间：2012-05-31T09:07:42.347
> 
> 标签：python, pyqt4, qt-designer, qgis

我必须在 QGIS 中构建一个表单来自定义 shapefile 中每个多边形的数据输入。我使用 QtDesigner 创建一个表单 (.ui)，其中一些文本框和组合框指向我的 shapefile 的字段。
然后我使用来自 Nathan QGIS Blog 的 python 文件来添加一些逻辑。

Python代码：

```
from PyQt4.QtCore import *
from PyQt4.QtGui import *

nameField = None
myDialog = None

def formOpen(dialog,layerid,featureid):
    global myDialog
    myDialog = dialog
    global nameField
    nameField = dialog.findChild(QTextEdit,"PART")
    buttonBox = dialog.findChild(QDialogButtonBox,"buttonBox")

    nameField.textChanged.connect(Name_onTextChanged)

    # Disconnect the signal that QGIS has wired up for the dialog to the button box.
    buttonBox.accepted.disconnect(myDialog.accept)

    # Wire up our own signals.
    buttonBox.accepted.connect(validate)
    buttonBox.rejected.connect(myDialog.reject)

def validate():
    # Make sure that the name field isn't empty.
    if not nameField.text().length() > 0:
        nameField.setStyleSheet("background-color: rgba(255, 107, 107, 150);")
        msgBox = QMessageBox()
        msgBox.setText("Field PART must not be NULL.")
        msgBox.exec_()
    else:
        # Return the form as accpeted to QGIS.
        myDialog.accept()

def Name_onTextChanged(text):
    if not nameField.text().length() > 0:
        nameField.setStyleSheet("background-color: rgba(255, 107, 107, 150);")
    else:
        nameField.setStyleSheet("") 
```

因此，我在 QGIS 中打开一个编辑会话，然后使用识别工具单击多边形，但是当我单击自定义表单上的 OK 按钮时，无论字段 PART 是否为 NULL，都会发生以下错误：

```
ERROR CODE LINE >>>> if not nameField.text().length() > 0:
ERROR MESSAGE   >>>> AttributeError: 'str' object has no attribute 'text' 
```

我正在运行 QGIS 1.7.4、Python 2.7.2、Windows 7 64 位。
我想念一些东西...拜托，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T12:48:19.893

看起来您遇到的 Python 错误不仅仅是 QGIS 的问题。

如果不是 nameField.text().length() > 0，您有两个实例：

```
def validate():
    if not nameField.text().length() > 0: 
```

和

```
def Name_onTextChanged(text):
    if not nameField.text().length() > 0: 
```

最初，看起来 nameField 不是这些函数中的任何一个的输入。所以我猜这些是分配在其他地方的，你已经减少了代码示例。此外，您将文本作为“Name_onTextChanged”的变量输入，但您也尝试将其用作函数“nameField.text().length()”。这可能是个问题。

通常，Python 会抱怨，因为它无法对变量 nameField 执行操作“text()”，它认为这是一个字符串。[没有可用于字符串的 text() 函数](http://docs.python.org/2/library/string.html)。看起来 nameField 实际上应该是一个 QTextEdit 对象。

如果 nameField 是 QTextEdit 对象，那么您可以使用 toPlainText() 代替它应该做您需要做的事情。所以像

```
if not nameField.toPlainText().strip().length() > 0: 
```

在这种情况下，我也包含了 .strip() ，这样如果文本字段中有空格，您就不会得到肯定的结果。

这些帮助有用？

# java - 启动 webApp 时发生“无法解析占位符 KName”异常

> ID：10830521
> 
> 赞同：3
> 
> 时间：2012-05-31T09:07:44.330
> 
> 标签：java, spring, placeholder

这是Spring的博客：http: [//blog.springsource.org/2011/02/15/spring-3-1-m1-unified-property-management/](http://blog.springsource.org/2011/02/15/spring-3-1-m1-unified-property-management/)

它引入了一个新功能：导入标签中的用户占位符。例子：`<import resource="com/bank/service/${customer}-config.xml"/>`

嗯，我也是3.1。

然后，当我启动 MYAPP 时，奇迹并没有发生..

这是我的代码：（sourceFolder 中的 config.properties）：

```
kName = P0765 
```

（春天的xml）：

```
<bean id="placeholderConfig" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">;
    <property name="location" value="classpath:config.properties" >;
</bean>

<import resource="readyData/${KName}.xml"/> 
```

:( 什么工作没做？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:00:42.983

在 import 元素中解析的属性必须设置为 JVM 系统属性或系统环境变量。您在此处链接的博客文章中对此进行了描述。这是因为合并 Spring 配置文件发生在初始化 bean（PropertyPlaceholderConfigurer 是一个 bean）之前它可能不会改变，请参阅这个被拒绝的功能请求[https://jira.springsource.org/browse/SPR-1358](https://jira.springsource.org/browse/SPR-1358)

# jdbc - Jython 中的 JDBC，准备好的语句

> ID：10830522
> 
> 赞同：0
> 
> 时间：2012-05-31T09:07:45.553
> 
> 标签：jdbc, jython, jython-2.5

我正在使用**JDBC** ( **zxJDBC** ) / SQLite在**Jython中寻找准备好的语句。**我发现的只是这样的例子（[书](http://books.google.de/books?id=eoPGiDflrtkC&pg=PA243&lpg=PA243&dq=jython+jdbc+preparedstatement&source=bl&ots=i-9u5yVS_v&sig=JxM1RKMnGXXfrdmainjFEkddi_c&hl=de&sa=X&ei=fi7HT5TeAvPO4QSZpeGrDg&sqi=2&ved=0CGwQ6AEwBQ#v=onepage&q=jython%20jdbc%20preparedstatement&f=false)，[Jython 文档](http://www.jython.org/jythonbook/en/1.0/DatabasesAndJython.html#prepared-statements)）：

 ****```
qry = "select continent from country where name = ?"
cursor.executemany(qry,['Austria']) 
```

但是，我始终将准备好的语句理解为一种让数据库优化语句而不知道为占位符插入的值的方法。然后接收到该语句的句柄，该语句已通过优化器传递，并且可以使用不同的值执行此语句，从而节省查询优化工作，因此我希望以下方法更好：

```
qry = cursor.prepare("SELECT * FROM `table` WHERE `field`=? AND `field2`=?") #usually mor complex queries
qry.execute(cursor, ?, (val1, val2)??) #here is the problem 
```

不幸的是，我找不到如何使用执行的示例，并且缺少文档。

```
PyStatement.execute(cursor, params, bindings) 
```

你能解释一下我对`params`如何使用的猜测`bindings`是正确的吗？我对 params 的最佳猜测是，它们是`setInt`来自 Javas JDBC 的 -Method （或类似的）的第一个参数，这将是相当令人惊讶的。我希望 Jython 的人手更短，并且只希望参数按正确（从前到后）的顺序排列。

**奖励**：有没有办法释放结果集？（除了关闭光标）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:14:51.983

看起来这个扩展使用了普通的[Python 数据库规范 v2](http://www.python.org/dev/peps/pep-0249/)

因为`execute`它说：

> 游标将保留对该操作的引用。如果再次传入相同的操作对象，则游标可以优化其行为。这对于使用相同操作但绑定不同参数（很多次）的算法最有效。

它说`executemany`：

> 与 .execute() 相同的注释也相应地适用于此方法。

因此，如果此驱动程序实际上实现了这些建议的语义，那么只需将相同的字符串传入`execute`或`executemany`应该重用preparedstatement，但是您可能需要检查实现（或询问实现者）以确保****

# c++ - 在模板类中初始化 std::vector

> ID：10830526
> 
> 赞同：1
> 
> 时间：2012-05-31T09:08:10.463
> 
> 标签：c++, templates, linker, stdvector

编译以下代码时出现链接器错误：

这里是头文件：

```
// Solver.h

#ifndef SOLVER_H_
#define SOLVER_H_

#include <vector>
#include "Resource.h"
#include "ValueFunction.h"

template<typename T>
class Solver {
    public:
        Solver(std::vector<Resource>& resources);
    private:
        std::vector<T> valfuncs;
};

#endif /* SOLVER_H_ */ 
```

这里是源文件：

```
// Solver.cpp

#include "Solver.h"

template<typename T>
Solver<T>::Solver(std::vector<Resource>& resources) : 
    valfuncs(resources.size()) {}

// Explicit class declaration
template class Solver<ValueFunction>; 
```

和电话：

```
// openadp.cpp

#include "Solver.h"

int main(int argc, char *argv[]) {
    std::vector<Resource> resources(4);
    Solver<ValueFunction> sol(resources);

    return 0;
} 
```

如果我`valfuncs(resources.size())`从初始化列表中删除，代码编译正常。为什么无法使用从我的模板列表传递的类来初始化向量？

在此先感谢，礼萨

**更新**

抱歉，这个小例子没有重现错误！我正在尝试找到一个可以做到的。

**更新 2**

链接器错误是由于我的 cmake 文件中包含的错误顺序造成的。

**评论**

这个问题不是重复[为什么模板只能在头文件中实现？](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)首先，因为（最明显的）代码可以编译，其次，`Solver`模板有一个隐式实例化：`template class Solver<ValueFunction>;`，因此编译器知道定义类型的实例。

# objective-c - 保留计数如何工作？

> ID：10830549
> 
> 赞同：1
> 
> 时间：2012-05-31T09:09:30.893
> 
> 标签：objective-c, memory-management, retaincount

我对 retainCount 有疑问

```
NSLog(@"%i", [self.albumReceiver retainCount]);
    self.albumReceiver = [[[FacebookAlbumsDelegateReceiver alloc] init: self] autorelease];

    NSLog(@"%i", [self.albumReceiver retainCount]); 
```

第一行的保留计数为 0，但当它到达第三行时为 3。self.albumReceiver 上的属性是保留属性......但据我所知，它应该是 2，而其他后来的保留计数应该去1，因为它是后来自动发布的。

```
 NSLog(@"%i", [self.albumReceiver retainCount]);
    albumReceiver = [[[FacebookAlbumsDelegateReceiver alloc] init: self];

    NSLog(@"%i", [self.albumReceiver retainCount]); 
```

保留计数从 0 开始，在这种情况下，第二个保留计数打印 2....

有人可以给出一些关于保留和释放如何工作的想法......

我以为没有'self'关键字，它会忽略setter调用是吗？但是如果我在第二个例子上放自动释放，我会有错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T09:36:29.977

首先，保留计数是您不应该过度关注的实现细节。你真的应该只关心所有权。

话虽如此，您所看到的解释如下：

> 第一行的保留计数为 0

那是因为`self.albumReceiver`在`nil`那个时候。在真实对象上，您永远不会看到保留计数为 0（在 Foundation 的当前实现中）。

> 当它到达第三行时是 3

*通常*，您希望保留计数为 2，分配为 +1，分配给保留属性时为 +1。但是，该`init:`方法可能会导致某些其他对象保留它，属性的设置器也可能会保留它。另一个观察该属性的对象也可能选择保留该对象。简而言之，除非您知道所涉及的所有方法的确切实现，并且您确定没有在 albumReceiver 上使用 KVO，否则您只能说保留计数`self`拥有它的所有权（NB 所有权不是排他性的，其他事情可能也有所有权）。这就是为什么您不应该过多关注保留计数的原因。

> 有人可以了解一下这个保留和释放是如何工作的吗

是的。您需要考虑所有权。某些方法会为您提供您拥有的对象。这些是任何以 开头的`alloc`方法、任何以 开头的方法`new`、任何以`copy`or`mutableCopy`和开头的方法`-retain`。如果您以任何其他方式收到一个物品，您就不拥有它。这包括将它们作为方法的返回结果、方法的 ass 参数或方法的引用参数或全局或静态变量接收。

如果您拥有一个对象，则必须通过释放或自动释放它来放弃所有权，否则它将泄漏。如果您不拥有对象，则不得释放或自动释放它。

我发现最好将上面的“你”理解为“声明对象引用的范围”。

无论如何，我建议您阅读 Apple 的[内存管理规则](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html)以获得明确的解释，而不是相信这里的答案。如果您查看此答案的原始编辑，您会发现我的规则略有错误，因为自从我上次阅读它们以来它们已经收紧了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T09:16:09.577

不要使用`retainCount`. （对于适合使用它的情况，[请参阅此网站](http://whentouseretaincount.com/)。）进一步阅读：[bbum 的博客文章](http://www.friday.com/bbum/2011/12/18/retaincount-is-useless/)，[之前的 SO 线程一](https://stackoverflow.com/questions/3730804/how-many-times-do-i-release-an-allocated-or-retained-object/3730835#3730835)，[线程二](https://stackoverflow.com/questions/4636146/when-to-use-retaincount)。另请注意，`retainCount`在最近的 SDK 中已弃用。注意弃用警告是一个好主意，将所有警告变成错误甚至更好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T09:22:22.690

在 Objective-C 中关注`retainCount`对象的 t 通常是一个坏主意，因为通常不可能知道框架的哪些秘密部分需要保留对象。

在您引用将对象添加到自动释放池的位置的情况下，自动释放池**可能**会保留该对象，直到需要刷新池（在运行循环期间）。这**可能**解释了为什么`autorelease`d 对象的保留计数更高。

请注意上一段中“大概”和“可能”这两个词的使用。我不知道这是否真的是 Cocoa/Cocoa Touch 框架内部发生的事情。这是 using 的问题`retainCount`，您无法随时知道保留计数应该是多少。

如果您`retain`是对象（或使用包含`alloc`、或的方法名称创建它），那么您`copy`就是它。框架对对象也是免费的，当它们准备好时它们就会这样做。当保留计数达到零时，它将被编辑。 `mutableCopy``new``release``retain``release``dealloc`

**更新：**查看了 NSObject 和 NSAutoreleasePool 的 GNUStep 源代码后，我上面*可能*的解释*可能*不是正在发生的事情。但是，我无法确定，因为我看不到 Apple 对这两个对象的实现。更有理由不信任`retainCount`或从中得出任何推论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T09:14:24.963

在具有手动内存管理的环境中真正存在的唯一规则是

如果您使用`alloc`, `copy`, `mutableCopy`,`new`

释放它。否则不要。retainCounts 并不能真正用于调试。看[这里](https://stackoverflow.com/questions/4636146/when-to-use-retaincount)

# c# - Quartz.net - 将程序集（单个计划）放在 /bin 以外的不同文件夹中

> ID：10830551
> 
> 赞同：2
> 
> 时间：2012-05-31T09:09:33.617
> 
> 标签：c#, windows-services, quartz.net

我有一个调用quartz.net 的Windows 服务，如下所示：

```
 ISchedulerFactory schedFact = new StdSchedulerFactory();
  sched = schedFact.GetScheduler();
  sched.Start(); 
```

我的配置文件如下：

```
<add key="quartz.plugin.xml.fileNames" value="~/quartz/quartz_jobs.xml" /> 
```

在发布我的 Windows 服务时，我设计了以下文件夹结构：

```
/bin/      "Various Dlls for my windows service"
/bin/Quartz/    "Includes by schedule plugins ( Seperate classes and my Jobs file ) 
```

我遇到的问题是，quartz 找不到我的程序集，除非我将它们复制到 /bin/ 的根目录中。

有什么想法可以将所有计划程序集保存在单独的文件夹中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:05:00.130

感谢 Google 小组的 Karell。

这是我解决这个问题的代码。

```
 AppDomain currentDomain = AppDomain.CurrentDomain;
   currentDomain.AssemblyResolve += new ResolveEventHandler(MyResolveEventHandler);

 private Assembly MyResolveEventHandler(object sender, ResolveEventArgs args)
        {

            Assembly MyAssembly,objExecutingAssemblies = Assembly.GetExecutingAssembly();
            AssemblyName[] arrReferencedAssmbNames = objExecutingAssemblies.GetReferencedAssemblies();
            if(args.Name.Contains("Coyname.Product.Service.Scheduler"))
            {
                string assName = Parser.ParseAssemblyNameReference(args.Name);
                var rootDirectory = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);
                var pluginDir = Path.Combine(rootDirectory, "Quartz");
                pluginDir += string.Format("\\{0}.dll",assName);;
                MyAssembly =  Assembly.LoadFrom(pluginDir); 
            }
            else
            {
                MyAssembly = Assembly.LoadFrom(string.Empty); 
            }
            return MyAssembly;
} 
```

# c# - 根据数据类型在 MVC 3 中自动生成 HTML 属性

> ID：10830554
> 
> 赞同：3
> 
> 时间：2012-05-31T09:09:51.547
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3, razor

我在 MVC 模型中有以下属性：

```
[Range(0, double.MaxValue, ErrorMessage = "The Volume must have positive values!")]       
public decimal? Volume { get; set; } 
```

生成的 HTML 是

```
<input type="text" value="1,00" name="Product.Volume" id="Product_Volume" data-val-range-min="0" data-val-range-max="1.79769313486232E+308" data-val-range="The Volume must have positive values!" data-val-number="The field Volume must be a number." data-val="true" class="text-box single-line"> 
```

如何使生成的 HTML 如下所示：

```
<input type="text" value="1,00" name="Product.Volume" id="Product_Volume" data-val-range-min="0" data-val-range-max="1.79769313486232E+308" data-val-range="The Volume must have positive values!" data-val-number="The field Volume must be a number." data-val="true" class="text-box single-line" data-type="decimal" > 
```

不同的是额外的**`data-type="decimal"`**

我希望**自动**添加 HTML 属性，所以我不必手动添加它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-31T09:12:31.997

为该类型创建您自己的显示模板和编辑器模板视图`Decimal`，这样您就可以控制它的显示，然后任何类型的模型属性都会在您调用或`Decimal`调用时自动使用该视图`Html.DisplayFor(m => m.DecimalType)``Html.EditorFor(m => m.DecimalType)`

**在文件夹Views > Shared > DisplayTemplates 和 EditorTemplates**中添加这些视图

 **例如，您的 EditorTemplate 将类似于：

```
@model decimal
@{
    Layout = "~/Views/Shared/EditorTemplates/Template.cshtml";
}

@Html.TextBoxFor(x => x, new {data-type = "decimal"}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:11:22.910

我的解决方案是覆盖 HTML TextBoxFor 辅助方法：

```
 public static MvcHtmlString TextBoxWithCustomHtmlAttributesFor<TModel, TProperty>(this HtmlHelper<TModel> helper, Expression<Func<TModel, TProperty>> expression, object htmlAttributes)
        {
            Type propertyType = typeof(TProperty);
            Type undelyingNullableType = Nullable.GetUnderlyingType(propertyType);
            var metadata = ModelMetadata.FromLambdaExpression(expression, helper.ViewData);
            string prefix = ExpressionHelper.GetExpressionText(expression);
            var validationAttributes = helper.GetUnobtrusiveValidationAttributes(prefix, metadata);

            string pType = (undelyingNullableType ?? propertyType).Name.ToString().ToLower();
            if (htmlAttributes != null)
            {
                var dataTypeDict = new Dictionary<string, object>(); 
                dataTypeDict.Add("data-type", pType);
                if (validationAttributes != null && validationAttributes.Count > 0)
                {
                    foreach (var i in validationAttributes)
                    {
                        dataTypeDict.Add(i.Key, i.Value);
                    }
                }
                htmlAttributes = Combine(new RouteValueDictionary(htmlAttributes), new RouteValueDictionary(dataTypeDict));
            }
            var textBox = helper.TextBoxFor(expression, (Dictionary<string, object>)htmlAttributes);
            return textBox;
        } 
```**

# php - 动态选择列表和 PHP 数组

> ID：10830562
> 
> 赞同：1
> 
> 时间：2012-05-31T09:10:07.957
> 
> 标签：php, javascript, selectlist

我想创建一个选择列表的 PHP 数组。该列表具有动态选项，这些选项是在 javascript 的帮助下填充的。我想在下一页获得所有选项。所以我想创建一个选项数组。有没有其他方法可以完成这些东西？有人可以帮帮我吗？非常感谢你。

```
<script type = "text/javascript">
 var val = "";
  function removeOptions(selectbox) {
val = selectbox.value;
for (var i = selectbox.options.length-1; i>=1; i--) {
    if (selectbox.options[i].selected) {
        addOption(document.form1.list2,val,val);
        selectbox.remove(i);
        document.form1.list1.focus();
    }
}
}

  function addOption(selectbox,optiontext,optionvalue ){
  var optn = document.createElement("OPTION");
  optn.text = optiontext;
  optn.value = optionvalue;
  selectbox.options.add(optn);
  }</script>

  //list1
<select name="list1" size="7" multiple="multiple" id="jumpMenu" onchange="removeOptions(this)" style="width:200px">
      <option>Choose Area...</option>
      <?php foreach($dbh->query($sql) as $row){
       $a=$row['name'];?>
        <option value="<?php echo $a?>"><?php echo $a?></option>
  <?php  }?>
   </select>
    //list2 
    <select name="list2" size="7" multiple="MULTIPLE" id="list2" style="width:170px">
     </select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:56:06.743

第一：如果你想使用多个选择框，那么这个选择框的名称必须包含尖括号：`name="list1[]"`和`name="list2[]"`- 这样一个 PHP 将知道这是一个值数组。

第二：学习 jQuery——虽然一开始可能看起来很难，但它会为你节省很多时间和未来的浏览器兼容性问题。并且jQuery将来会多次保存你的a*s。

出于您的目的，我建议不仅使用`onchange`事件，而且在两个多选框之间实现额外的 4 个按钮，这些按钮会将选定的选项从一个移动到另一个或全部从一个移动到另一个。这种多选看起来如下图所示。

![多选框](../Images/9447ae5a2632f7eeecf7e3e0ddeb5a19.png)

通过第一个按钮`>>`，来自 1\. select 的所有选项都移动到第二个选项，反之亦然，使用第 4 个按钮`<<`。通过第二个按钮`>`，只有选定的选项被移动到第二个选择，反之亦然，第三个按钮`<`。

通过这个你只能捕捉到按钮上的点击事件......使用jQuery真的很容易......

# android - 屏幕超时时停止 WebView 中的音乐

> ID：10830563
> 
> 赞同：1
> 
> 时间：2012-05-31T09:10:11.357
> 
> 标签：android, webview

我正在编程允许用户通过 URL 网络链接在 WebView 中收听音乐。但我想知道为什么当android手机用户屏幕超时时，我在WebView中的音乐也停止了。你有什么办法可以解决这个问题吗？

# 这是我的代码：

```
public class PlayMusicActivity extends Activity {

WebView mWebView;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.playlist);

    mWebView = (WebView) findViewById(R.id.webView1);
    mWebView.setWebViewClient(new HelloWebViewClient());
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.getSettings().setPluginsEnabled(true);
    mWebView.getSettings().setAllowFileAccess(true);
    mWebView.loadUrl("http://www.myweb.com/music.html");
}
private class HelloWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl(url);
        return true;
    }
}
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK) && mWebView.canGoBack()) {
        mWebView.goBack();
        return true;
    }
    return super.onKeyDown(keyCode, event);
}
@Override
public void onPause() {
    mWebView.setVisibility(View.GONE);
    mWebView.destroy();
    super.onPause();
}
} 
```

感谢您的帮助。

最好的问候， 维拉克

# c# - 将编码 Windows 1252 转换为 UTF-8 在 Windows Server 2008 R2 上无法正常工作

> ID：10830564
> 
> 赞同：1
> 
> 时间：2012-05-31T09:10:14.947
> 
> 标签：c#, encoding

我在本主题中使用示例代码：http://stackoverflow.com/questions/5568033/convert-a-strings-character-encoding-from-windows-1252-to-utf-8 将 windows-1252 字符串转换为 utf- 8 串。它在 Windows 7 平台上运行良好。但是当我在服务器 - Windows Server 2008R2 上部署这个程序时，它并不能完全按照我的预期工作。

例子：

在窗口 7 上，转换后的字符串：

> Phần 1: Thị **trường** chứng khoán và các Công ty phát hành chứng khoán
> 
> Phần 2: Quản lý Nhà **nước đối** với các Công ty phát hành chứng khoán
> 
> Phần 3: Thực trạng và **phương hướng** quản lý phù hợp ở Việt Nam hiện nay

在windows server 2008R2上，转换后的字符串：

> Phần 1: Thị **trýờng** chứng khoán và các Công ty phát hành chứng khoán
> 
> Phần 2: Quản lý Nhà **nýớc ðối** với các Công ty phát hành chứng khoán
> 
> Phần 3: Thực trạng và **phýõng hýớng** quản lý phù hợp ở Việt Nam hiện nay

我找不到解决这个问题的方法。你有什么办法可以帮助我吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:38:00.223

我的猜测是您的两台机器上的旧代码页之间存在不匹配。

您可以使用

```
[Text.Encoding]::Default 
```

在 PowerShell 中找出答案：

```
IsSingleByte      : True
BodyName          : iso-8859-1
EncodingName      : Western European (Windows)
HeaderName        : Windows-1252
WebName           : Windows-1252
WindowsCodePage   : 1252
IsBrowserDisplay  : True
IsBrowserSave     : True
IsMailNewsDisplay : True
IsMailNewsSave    : True
EncoderFallback   : System.Text.InternalEncoderBestFitFallback
DecoderFallback   : System.Text.InternalDecoderBestFitFallback
IsReadOnly        : True
CodePage          : 1252 
```

# java - 如果操作失败，则尝试强制转换返回 null 的命名模式的建议

> ID：10830574
> 
> 赞同：0
> 
> 时间：2012-05-31T09:10:53.510
> 
> 标签：java, naming-conventions, interface-design

我在很多地方都看到过这种模式，但从未见过它命名。

我更喜欢关于如何命名实现它的方法的建议，因为不同的人似乎使用不同的命名模式。

抱歉，我不记得任何库作为示例，但如果将其中一个用作您的答案的一部分，请命名它们。

```
public class Produce{

   package private Produce(){};

   Fruit isFruit(){
     return null;
   }
   Veg isVeg(){
     return null;
   } 
}

public class Veg extends Produce {

   package private Veg(){};

   Veg isVeg(){
     return this;
   }
}

public class Fruit extends Produce {

    package private Fruit(){};

   Fruit isFruit(){
     return this;
   }
} 
```

额外的

@LouisWasserman

首先，通过将其 ctor 包设为私有来限制 Produce 的子类型的数量。通过包含 2 个 isXXX 方法，我说明了一个事实，即只有 2 个子类，这比进行 instanceof 检查要好。也许只有我，但是，这种方法也意味着在其他代码或上述代码中没有强制转换，这一定是件好事，对吧？

当搜索或查询失败时，也不会从方法返回一个空列表，这与在尝试将 Veg 转换为 Fruit 时返回 null 以标记操作 isFruit() 失败类似吗？

我在 JType 中的 GWT 中找到了一个快速示例，我相信它是 Eclipse JDT 的克隆。无论如何，起源并不重要，但在这里我们有两种非常知名的产品，完全符合我的描述......

[http://code.google.com/p/google-web-toolkit/source/browse/trunk/dev/core/src/com/google/gwt/core/ext/typeinfo/JType.java](http://code.google.com/p/google-web-toolkit/source/browse/trunk/dev/core/src/com/google/gwt/core/ext/typeinfo/JType.java)

还有很多其他 isXXX 尝试强制转换或返回 null，我在下面粘贴了一些。

```
/**
* Returns this instance as a {@link JAnnotationType} if it is an annotation
* or <code>null</code> if it is not.
*/
JAnnotationType isAnnotation();

JArrayType isArray();

JClassType isClass();

JClassType isClassOrInterface();

/**
* Returns this instance if it is an enumeration or <code>null</code> if it is
* not.
*/
JEnumType isEnum();

JGenericType isGenericType(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:14:10.353

首先，我认为这是一个可怕的模式。超类通常*不*应该知道它的子类。

如果添加另一个子类会`Produce`怎样？您需要记住修改`Produce`. 容易出错。

不过，要回答您的问题，我会避免`isFruit`使用 ，因为用户可能希望它返回布尔值。如果被迫使用这种模式，我可能会使用`getFruit()`or `asFruit()`。

# c# - 复杂的 EF 查询返回基础对象但过滤子对象

> ID：10830578
> 
> 赞同：0
> 
> 时间：2012-05-31T09:11:05.697
> 
> 标签：c#, linq, entity-framework, entity-framework-4

1.  我有一个名为 Query 的课程。
2.  我有一个名为 Permissions 的课程
3.  查询具有权限集合
4.  我需要查询用户有权限的查询。

但我不确定如何制作 where 子句。

```
public class Query
{
    public int QueryId { get; set; }
    public string QueryName { get; set; }
    public string QuerySql { get; set; }
    public string CreatedBy { get; set; }
    public string QueryType { get; set; }
    public string Column1 { get; set; }
    public string Operator1 { get; set; }
    public string Value1 { get; set; }
    public string Connector2 { get; set; }
    public string Column2 { get; set; }
    public string Operator2 { get; set; }
    public string Value2 { get; set; }
    public string Connector3 { get; set; }
    public string Column3 { get; set; }
    public string Operator3 { get; set; }
    public string Value3 { get; set; }
    public virtual ICollection<Permission>  Permissions { get; set; }
}

public class Permission
{
    public int PermissionId { get; set; }
    public string UserName { get; set; }
}

public IQueryable<Query> GetQueriesForUser(string userName)
{
    _context.Queries.Where(m=>m.Permissions.Contains(???))
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T09:17:03.030

因此，您希望所有具有该查询
权限的查询
，其中权限的用户名是用户的用户名

你可以使用类似的东西：

```
_context.Queries.Where(q => q.Permissions.Any(p => p.UserName.Equals(userName))); 
```

# drupal - 在 Drupal 中不向匿名用户显示块

> ID：10830579
> 
> 赞同：1
> 
> 时间：2012-05-31T09:11:08.003
> 
> 标签：drupal, drupal-blocks

我在 drupal 中的所有块仅显示给管理员，而不显示给未登录的匿名用户。

我哪里出错了？我从来没有遇到过这个问题。有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:52:04.477

检查匿名用户的权限，我相信你可以解决这个问题。

每种用户类型都设置了块可见性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:13:43.483

我建议你安装这个模块。将有助于更好地管理权限。[http://drupal.org/project/fpa](http://drupal.org/project/fpa)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T22:36:14.820

也可能有助于检查您在 /admin/structure/block 上的块放置是否设置为面向公众的主题，而不仅仅是管理主题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T00:05:43.900

你知道权限部分和个人块权限吗？可以拒绝用户从这些地方的任何地方访问。如果所有这些设置正确，请检查您的模板以确保没有硬编码的 PHP 检查（非常糟糕的形式，但我经常看到它）。

# java - 如何在java中读取pdf文件

> ID：10830583
> 
> 赞同：0
> 
> 时间：2012-05-31T09:11:42.547
> 
> 标签：java, pdf

我正在开发一个需要读取 pdf 文件的 java 项目。

我知道可以使用一些外部库，例如**itext**。

但是是否可以在不使用任何外部库的情况下使用 java inbuild 功能读取 pdf 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:17:05.907

是的，有可能。用于从通过 Apache PDFBOX 的 java 读取 pdf 文件。此 PDFBOX 允许创建新的 PDF 文档、操作现有文档以及从文档中提取内容的能力。Apache PDFBox 还包括几个命令行实用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-25T08:23:31.560

您可以使用 Apache PDFBox 恢复 PDF 文件的文本。在maven项目pom.xml中，我们必须添加依赖

```
<dependency>
    <groupId>org.apache.pdfbox</groupId>
    <artifactId>pdfbox</artifactId>
    <version>2.0.8</version>
</dependency> 
```

编码：

```
try {
    DLFileEntry fileEntry = DLFileEntryLocalServiceUtil.getFileEntry(folder.getGroupId(), folder.getFolderId(), fileName);
    File file = DLFileEntryLocalServiceUtil.getFile(themeDisplay.getUserId(), fileEntry.getFileEntryId(), fileEntry.getVersion(), true);
    PDDocument pddDocument=PDDocument.load(file);
    PDFTextStripper textStripper = new PDFTextStripper();
    String text = textStripper.getText(pddDocument);
} catch (Exception e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

要阅读/创建 PDF，请参阅文档：

[https://pdfbox.apache.org/](https://pdfbox.apache.org/)

# asp.net-mvc-3 - 如何使用linq传递两个变量值

> ID：10830590
> 
> 赞同：0
> 
> 时间：2012-05-31T09:12:03.573
> 
> 标签：asp.net-mvc-3, linq, stored-procedures

当我使用 linq 将两个变量值传递给存储过程时出现错误

下面是我过去如何将变量传递给 linq

```
Customer objCustomer = DbContext.ExecuteStoreQuery<Customer>
                ("exec getCustomerDetails {0}{1}", CustomerId, OrderId).AsQueryable().ToList(); 
```

下面是我的存储过程

```
create procedure getCustomerDetails 
@CustomerId int,
@OrderId int
as
select * from customer c
where c.CustomerId = @CustomerId and c.OrderId = @OrderId 
```

下面是我得到的错误

```
Message = "Must declare the scalar variable \"@p0@p1\"." 
```

请建议

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:33:46.373

除了杰基所说的，我认为问题在于你的参数之间没有空格。尝试：

```
("exec getCustomerDetails {0} {1}", CustomerId, OrderId) 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:17:52.887

我认为您在 {0} 和 {1} 之间缺少逗号...

但是为什么不[将存储过程导入实体模型](http://msdn.microsoft.com/en-us/library/bb896231)中，以便您可以像这样调用存储过程：

`DbContext.getCustomerDetails(CustomerId, OrderId)`

# html - Html，外部 CSS 链接在 Linux 上失败

> ID：10830595
> 
> 赞同：0
> 
> 时间：2012-05-31T09:12:17.157
> 
> 标签：html, linux, lighttpd, filepath

我知道有人问过类似的问题，但看不出为什么我们的外部 css 链接在 Linux 上不起作用。Windows 和 Linux 上的文件夹结构是：

```
/
    /static
        /css
            style.css
        /img
        /js
    /html
        index.html 
```

index.html 链接到 style.css：

```
<link rel="stylesheet" type="text/css" href="../static/css/style.css" /> 
```

它在 Windows 上工作，但在 Linux 上失败，出现 404。这意味着 /static 文件夹和子文件夹没有正确的权限，但它们实际上具有与 /html 文件夹相同的权限。如果所有 /static 内容都放在 /html 文件夹中，那么它可以工作。

有没有人遇到过类似的情况或知道问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:20:49.273

为确保路径正常，请在浏览器上打开 index.html 并从那里的页面源检查 css 文件的路径。

问题可能是对 css 文件的权限。

运行的用户 apache ir 必须能够读取该文件，否则将无法加载它

你可以尝试运行：

```
chmod a+r style.css 
```

为该文件上的每个人添加读取权限，或者：

```
chown [user]:[group] style.css 
```

将文件的所有者更改为 apache 正在使用的用户和组。

您还可以在这个问题中检查正在运行[哪个用户 Apache 找出 Apache 正在以什么用户身份运行？](https://stackoverflow.com/questions/2509334/finding-out-what-user-apache-is-running-as)

默认情况下，它通常是 apache 用户和 apache 组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T11:31:11.087

你在使用 mod_rewrite 吗？应该是服务器配置问题。确保它配置正确

# java - 游戏框架中的异常？

> ID：10830597
> 
> 赞同：1
> 
> 时间：2012-05-31T09:12:30.263
> 
> 标签：java, eclipse, playframework

我有这个例外，

```
 @6agjdofnm
Internal Server Error (500) for request GET /

Oops: UnsupportedClassVersionError
An unexpected error occured caused by exception UnsupportedClassVersionError: DocViewerPlugin : Unsupported major.minor version 51.0

play.exceptions.UnexpectedException: Unexpected Error
    at play.Invoker$Invocation.onException(Invoker.java:232)
    at play.Invoker$Invocation.run(Invoker.java:273)
    at Invocation.HTTP Request(Play!)
Caused by: java.lang.UnsupportedClassVersionError: DocViewerPlugin : Unsupported major.minor version 51.0
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    at play.classloading.ApplicationClassloader.loadApplicationClass(ApplicationClassloader.java:148)
    at play.classloading.ApplicationClassloader.loadClass(ApplicationClassloader.java:84)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at play.plugins.PluginCollection.reloadApplicationPlugins(PluginCollection.java:141)
    at play.Play.start(Play.java:440)
    at play.Play.detectChanges(Play.java:599)
    at play.Invoker$Invocation.init(Invoker.java:186)
    ... 1 more 
```

当我激活我的 index.html 页面时。每件事似乎都是正确的，不知道为什么会发生这种异常。我正在使用 play-1.2.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:27:01.243

您使用比您在运行时使用的更高的 java 版本编译源代码。

例子：

使用 1.6 编译，但运行时 JRE 1.5

您必须更改 eclipse 启动配置并使用更高的 Java 版本，或者您可以在 eclipse 首选项页面“Java-Installed JRE”中更改默认运行时版本

# asp.net - 如何在 mvc3 中将会话保存在被阻止的 cookie 上

> ID：10830600
> 
> 赞同：0
> 
> 时间：2012-05-31T09:12:45.477
> 
> 标签：asp.net, asp.net-mvc-3

在我的 mvc3 应用程序中，我将每个用户的数据保存到会话中。

```
HttpContext.Current.Session["UserName"] = "Jon"; 
```

问题出在 Safari 浏览器中。默认设置为：“阻止来自第三方和广告商的 cookie”。所以会话没有保存。我找到了解决方案：

```
var ticket = new FormsAuthenticationTicket(
                1,
                "currentUser",
                DateTime.Now,
                DateTime.Now.AddMinutes(30),
                false,
                null);

                string encryptedTicket = FormsAuthentication.Encrypt(ticket);
                var cookie = new HttpCookie(FormsAuthentication.FormsCookieName, encryptedTicket);

                this.Response.Cookies.Add(cookie); 
```

但是这个解决方案只能在本地主机上工作，不能在服务器上工作......有人有这个问题的替代解决方案吗？或者可以解释为什么我的解决方案不能在服务器上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:29:51.097

尝试将 cookie 的 Domain 属性设置为与您的工作服务器所在的域的名称完全匹配，如下所示：

```
var cookie = new HttpCookie(...
cookie.Domain = "Microsoft.com"; 
```

一旦你这样做了，你的 cookie 就是第一方 cookie（而不是第三方的）。

# jquery - jquery拖放位置

> ID：10830601
> 
> 赞同：0
> 
> 时间：2012-05-31T09:12:45.897
> 
> 标签：jquery

我希望有人可以帮助我解决我的问题。现在我正在做 jquery 拖放。我的问题是，当用户将图像拖放到放置区域时。那个下降区域就像树的图片。所以放置区域应该像树图片。但现在我可以放在矩形区域上。我不知道我该如何解决这个问题。请任何人帮助我。

我使用以下编码。

```
 $j("#draggable").draggable({

                revert: function (dropped) {
                    var $jdraggable = $j(this),
                 hasBeenDroppedBefore = $jdraggable.data('hasBeenDropped'),
                 wasJustDropped = dropped && dropped[0].id == "tree";
                    if (wasJustDropped) {
                        //centering with css
                        centerPopup();
                        //load popup
                        loadsharePopup();
                        return false;
                    } else {
                        if (hasBeenDroppedBefore) {
                            return true;
                        } else {
                            return true;
                        }
                    }
                }
            });

            $j("#tree").droppable({
                activeClass: 'ui-state-hover',
                hoverClass: 'ui-state-active',
                drop: function (event, ui) {
                    //var Stoppos = $j(this).position();
                    //alert("STOP: \nLeft: "+ Stoppos.left + "\nTop: " + Stoppos.top);
                    var newPosX = ui.offset.left - $j(this).offset().left;
                    var newPosY = ui.offset.top - $j(this).offset().top;
                    //alert($j(this).offset().left);
                    $j("#txtPosX").val(newPosX);
                    $j("#txtPosY").val(newPosY);
                    //alert("STOP: \nLeft: "+ newPosX + "\nTop: " + newPosY);
                    $j(this).addClass('ui-state-highlight').find('p').html('Dropped!');
                    $j(ui.draggable).data('hasBeenDropped', true);
                }
            });
        });

<div id="tree">
                    <div id="draggable"></div>
                </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:16:56.793

如果我正确理解了您的问题，那么您可能希望使用**区域**标签来创建一个树形，其中将放置可拖动的元素。

可以在此处找到有关**区域的信息：** [http ://www.quackit.com/html/tutorial/html_image_maps.cfm](http://www.quackit.com/html/tutorial/html_image_maps.cfm)

示例（女巫简单坐标）：

```
<map id ="tree">
  <area shape ="poly" coords ="55,55,120,80,90,80,90,100,70,100,20,80,55,55"
  href ="LINK"
  alt="Mount Cook" />
</map> 
```

# java - Spring Security 如何保存 RedirectUrl

> ID：10830603
> 
> 赞同：0
> 
> 时间：2012-05-31T09:12:51.523
> 
> 标签：java, spring, jakarta-ee, spring-mvc, spring-security

我想知道 Spring 如何保存有关用户来自哪个页面的信息，因为在成功认证后 Spring 安全性倾向于将用户重定向到他/她来自的同一位置。

我知道如何通过类似的方式从 Spring 安全性中获取信息

```
protected String getRedirectUrl(HttpServletRequest request) {
    HttpSession session = request.getSession(false);
    if(session != null) {
        SavedRequest savedRequest = (SavedRequest) session.getAttribute(WebAttributes.SAVED_REQUEST);
        if(savedRequest != null) {
            return savedRequest.getRedirectUrl();
        }
    }

    /* return a sane default in case data isn't there */
    return request.getContextPath() + "/";
} 
```

但我没有在我的应用程序中使用 Spring 安全性，我需要为我的应用程序实现相同的功能。我想知道在哪里可以查看Spring如何处理这个细节

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:48:20.593

查看该类的文档`org.springframework.security.web.authentication.SavedRequestAwareAuthenticationSuccessHandler`。它负责从用户来到登录页面的位置重定向到相同的视图。

希望这对您有所帮助。干杯。

# javascript - 点击后会滚动到页面顶部

> ID：10830605
> 
> 赞同：0
> 
> 时间：2012-05-31T09:12:58.953
> 
> 标签：javascript, jquery

我有这个代码来切换切换按钮图像：

```
$("#invio_scatola_on, #invio_scatola_off").click(function(){
    $("#invio_scatola_off").toggle();
    $("#invio_scatola_on").toggle();
}); 
```

执行时，浏览器会转到页面顶部。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T09:16:52.387

您可能需要阻止您单击的任何元素的默认操作：

```
$("#invio_scatola_on, #invio_scatola_off").on('click', function(e){
    e.preventDefault();
    $("#invio_scatola_off, #invio_scatola_on").toggle();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:16:42.663

根据您提供的少量信息，如果浏览器滚动到顶部，则意味着您需要阻止其默认行为。

检查浏览器是否将“某物”**附加**到当前 URL...

**您可以像这样防止这种情况：**

```
$("#invio_scatola_on, #invio_scatola_off").click(function(event){

  // prvent default behavior
  event.preventDefault();

  $("#invio_scatola_off").toggle();
  $("#invio_scatola_on").toggle();
}); 
```

有关它如何工作的更多信息，请参阅 jQuery [event.preventDefault()](http://api.jquery.com/event.preventDefault/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T09:17:08.857

我只能猜测，因为您没有发布您的 html 代码。很可能您的两个元素与`href="#"`. 单击处理程序后，将触发常规操作，导航到`#`您网站上的锚点（位于顶部）。

尝试：

```
$("#invio_scatola_on, #invio_scatola_off").click(function(event){
    $("#invio_scatola_off").toggle();
    $("#invio_scatola_on").toggle();
    event.preventDefault();
}); 
```

看看是否有帮助。更多关于使用 jQuery 取消事件的信息：

[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T09:23:40.020

我认为您将**单击****锚**标记与**href****绑定**为**#**这样您就可以使用javascript**的****preventDefault()**，例如：

 ******```
$("#invio_scatola_on, #invio_scatola_off").click(function(evt){
    evt.preventDefault();
    $("#invio_scatola_off").toggle();
    $("#invio_scatola_on").toggle();
}); 
```******

# maven - Sonar 在错误的 Maven 存储库中查找工件

> ID：10830606
> 
> 赞同：1
> 
> 时间：2012-05-31T09:13:00.250
> 
> 标签：maven, hudson, jenkins, sonarqube

我有一份在主计算机上运行 Maven 的 Jenkins 工作

我添加了一个后期构建步骤来运行声纳并将其指向项目的`pom.xml`.

问题是 Jenkins 构建运行在主服务器上，而声纳服务器运行在不同的机器上。因此，当构建完成时，Sonar 会在安装它的存储库中查找构建工件，而不是 Jenkins 运行 Maven 的主机。

除了在同一台机器上安装 Sonar 和 Jenkins 之外，还有其他解决方法吗？

更多细节：

```
[ERROR] Failed to execute goal on project server-api: Could not resolve dependencies for project frm:frm-server-api:jar:1.0-SNAPSHOT: Failure to find frm:frm-model:jar:1.0-SNAPSHOT in http://DIFFERENT_SERVER:7080/nexus/content/repositories/releases/ was cached in the local repository, resolution will not be reattempted until the update interval of releases has elapsed or updates are forced -> [Help 1] 
```

这是一个与服务器或服务器`DIFFERENT_SERVER`无关的服务器，我们正在使用它，但不在这个项目的上下文中，所以我真的不知道它是如何到达那里的。我猜这是配置错误。更多细节：`sonar``Jenkins`

1.  Jenkins 作业类型是一个通用项目，而不是纯粹的 maven 作业。
2.  我正在使用`sonar`jenkins 插件作为构建后触发器并指定`pom.xml`我正在使用的。
3.  我已经配置`settings.xml`了`MAVEN_HOME/conf`所需的详细信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:12:58.573

Sonar 服务器在另一台机器上运行的事实绝对不是启动分析的问题，并且您应该没有任何问题从您的 Jenkins 主服务器运行 Sonar 分析，可能 Sonar DB 和/或 Sonar 服务器在不同的机器。

您只需确保 Jenkins 上的配置（= Sonar 属性）+ 您的机器配置（= 潜在防火墙）允许 Sonar 批处理：

1.  查询 Sonar Web 服务器 URL
2.  查询配置的数据库

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T14:32:24.143

我的问题是我没有在我的项目中添加任何东西，`pom.xml`而且我一直在使用 maven 到`package`Sonar 需要`install`maven 存储库中的工件的阶段，以便以后可以使用它们。

所以我运行了 maven，`mvn clean install -DskipTests=true`后来又使用了 Sonar 后期构建步骤。

# asp.net - 将动态表单字段添加到数据库

> ID：10830607
> 
> 赞同：2
> 
> 时间：2012-05-31T09:13:00.390
> 
> 标签：asp.net, forms, dynamic, insert, design-patterns

我有一些如何解决这个问题的想法，但这一定是一件相对常见的事情，我想知道是否有一种“标准”的方式来解决它。

基本上，我在 HTML 页面上有一个表单，它使用 jQuery AJAX 发布到 ASP.NET 页面，然后获取表单字段并将它们放入数据库。

表单本身包含一些标准字段，例如文章标题、文章内容和日期。但是，该表格还允许添加许多作者详细信息，包括作者姓名、作者电子邮件地址、作者年龄。因此，在表单上，​​用户填写表单标题和内容字段，并可以添加一个或多个作者，这些字段是使用 jQuery.clone() 动态构建的。

因此，作者数量未知，因此接受表单发布的 .NET 控件不知道它应该接收哪些字段。

标准表单详细信息被添加到一个称为“文章”的表中。每个作者都被单独添加到不同的表中，称为“作者”。

所以问题是，处理这类事情的最佳方法是什么？

感谢您在这里的任何建议。

**编辑：**

添加我最初的想法...首先，我可以用递增的数字命名每个作者表单字段，如下所示：

```
<fieldset>
  Author 1 name: <input name="name-1" /><br />
  Author 1 email: <input name="email-1" /><br />
  Author 1 age: <input name="age-1" />
</fieldset>
<fieldset>
  Author 2 name: <input name="name-2" /><br />
  Author 2 email: <input name="email-2" /><br />
  Author 2 age: <input name="age-2" />
</fieldset> 
```

并且还有一个名为“作者数”的隐藏字段，当 jQuery 脚本添加/删除新作者字段集时，该字段会递增/递减。然后在接收表单帖子的 .NET 代码中，我可以遍历从 0 到 x 的每个表单字段（其中 x 是“作者数”的值。这里的困难是我必须重新索引删除字段集时的每个表单字段，例如，以防用户删除第一个字段集。

我的第二个想法是我可以使用 jQuery 序列化将表单字段值序列化为单个字符串，然后将该字符串处理回 .NET 代码中的对象。虽然我真的不知道如何做到这一点，但我相信这是可能的。

在这种情况下，人们的建议是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:55:53.750

由于您无法在回发时读取动态表，因此我通常将所有行读入对象并将它们通过 WebMethod 或 WCF 服务传递回服务器。我对 Ajax 表单和传统回发表单都使用了相同的技术。

这是我所做工作的快速总结。

**HTML**

```
<table class="mediumTable" id="PartTable">
    <thead>
        <tr class="rowHeader">
            <th>Part </th>
            <th>Price </th>
            <th>UOM </th>
            <th>Apply Date </th>
            <th>Remarks </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Part12345</td>
            <td>0.298</td>
            <td>1</td>
            <td>5/31/2012</td>
            <td></td>
        </tr>
    </tbody>
</table> 
```

**JavaScript**

```
 // Read a row in View Mode into a Cross Object
    function GetRowAsObject(rowNum) {
        var row = $('#PartTable tbody tr').eq(rowNum);

        var cross = {};

        cross.Part = row.find('td:eq(1)').text();
        cross.Price = row.find('td:eq(2)').text();
        cross.UOM = row.find('td:eq(3)').text();
        cross.ApplyDate = row.find('td:eq(4)').text();
        cross.Remarks = row.find('td:eq(5)').text();

        return cross;
    }

    // Read all rows into Cross Object Array
    function GetAllViewRowsAsCrossObjects() {
        var parts = [];

        $('#PartTable tbody tr').each(function (index, value) {
            var part = GetRowAsObject(index);
            parts.push(row);
        });

        return parts;
    }

    // Post all rows to the server and put into Cache
    function PostTable() {
        var batchId = getParameterByName('id');
        var jsonRequest = { crosses: GetAllViewRowsAsCrossObjects(), batchId: batchId};

        $.ajax({
            type: 'POST',
            url: 'PartsForm.aspx/SaveParts',
            data: JSON.stringify(jsonRequest),
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            async: false,
            success: function (data, text) {
                // Do Something
            },
            error:function (request, status, error){
                // Do Something
            } 
        }); 
```

**代码背后**

```
public partial class Part3 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
    }

    /// <summary>
    /// This is a Ajax WebMethod that can be called via jQuery.
    /// </summary>
    /// <param name="crosses">Array of Cross Objects</param>
    /// <param name="batchId">Batch number to apply to all parts</param>
    /// <returns></returns>
    [WebMethod]
    public static bool SaveParts(List<Cross> crosses, int batchId)
    {
        // Save Parts to the DB

        return true;
    }
}

// Data Transfer Object, must match the object sent from the client
public class Cross
{
    public string Part { get; set; }
    public double Price { get; set; }
    public int UOM { get; set; }
    public DateTime ApplyDate { get; set; }
    public string Remarks { get; set; }
} 
```

# objective-c - 如何用 doxygen 记录 Objective-C 块？

> ID：10830608
> 
> 赞同：11
> 
> 时间：2012-05-31T09:13:03.520
> 
> 标签：objective-c, documentation, doxygen, objective-c-blocks

我正在研究一个基于 doxygen 文档的项目，但我不知道如何记录一个块。让我们想象一个带有块作为回调的异步函数

```
- (void)startWithCompletionBlock:(void (^)(BOOL success, NSError *error))block; 
```

应该如何记录这个参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T10:03:40.843

[如文档](http://www.doxygen.nl/manual/docblocks.html)中所示，评论一个块看起来像这样

```
/**
 *@brief Short description
 *
 * Extended description
 *
 *@param[in/out/in,out] success
 *@param[in/out/in,out] error
 */
(void)startWithCompletionBlock:(void (^)(BOOL success, NSError *error))block; 
```

# java - (Linked)BlockingQueue.put(null) 抛出 NullPointerException

> ID：10830609
> 
> 赞同：12
> 
> 时间：2012-05-31T09:13:12.330
> 
> 标签：java, collections, null, nullpointerexception

我已经检查了实现，它是故意这样做的

```
 public void put(E e) throws InterruptedException {
     if (e == null) throw new NullPointerException(); 
```

这个惊喜对于用户（例如，想要以这种方式发出流结束信号）来说并不方便，并且打破了与集合的一般合同，这些集合很容易接受空元素。BlockingQueue 区分空元素的意义何在？如果空值如此糟糕，我们是否应该完全避免使用它们并在 JLS 中强制执行这个低值？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-31T09:15:54.980

接受空值*不是*`Collection`合同的一部分。事实上，`Collection` [Javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html)明确指出：

> 一些集合实现对它们可能包含的元素有限制。例如，一些实现禁止空元素，而一些实现对其元素的类型有限制。尝试添加不合格的元素会引发未经检查的异常，通常是 NullPointerException 或 ClassCastException。

在许多情况下，添加`null`到集合中意味着您的程序中某处存在错误，而不是您故意将其放入。例如，Guava 库（我参与其中）[做出了明确的决定](http://code.google.com/p/guava-libraries/wiki/ImmutableCollectionsExplained)，拒绝来自其许多集合实现的空值，特别是不可变的：

> 我们对 Google 的内部代码库进行了详尽的研究，结果表明大约 5% 的时间集合中允许空元素，而其他 95% 的情况最好通过在空值上快速失败来解决。

通常有一些解决方法*确实*接受空值，但许多集合实现决定拒绝空值（大多数用户认为这很有帮助，因为它可以帮助他们发现错误）并为显式空值合适的罕见情况提供解决方法。

老实说，我认为属于`LinkedBlockingQueue`这一类的原因是在开发原始集合框架时所有这些都没有被弄清楚，但是在添加并发集合时已经很清楚了。Doug Lea 在 上做了很多工作`util.concurrent`，他被引述说，

> 空很烂。

在最坏的情况下，对象包装器或“毒对象”始终是有效的解决方法；Guava 提供了一个[`Optional`](http://code.google.com/p/guava-libraries/wiki/UsingAndAvoidingNullExplained)可以在许多情况下充当该角色的类，这在 StackOverflow 上进行了广泛[讨论](https://stackoverflow.com/questions/9561295/whats-the-point-of-guavas-optional-class/9561334#9561334)。

# android - 如何使用矢量在 android 中创建 TreeView？

> ID：10830614
> 
> 赞同：2
> 
> 时间：2012-05-31T09:13:33.087
> 
> 标签：android, treeview

我想在 Android 中使用矢量创建树视图。它会像 Windows 资源管理器一样，即如果单击“+”则应该展开子文件夹。明智地“-”应该折叠子文件夹和文件。我正在开发小型应用程序。请指导如果有人知道，请告诉我。在此先感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:19:57.090

树形视图有几种实现方式，即：
[http ://code.google.com/p/tree-view-list-android/](http://code.google.com/p/tree-view-list-android/)
[https://github.com/haxar/mangler/blob/master/android/src/ org/mangler/android/ChannelList.java](https://github.com/haxar/mangler/blob/master/android/src/org/mangler/android/ChannelList.java)
[https://stackoverflow.com/a/5515080/200272](https://stackoverflow.com/a/5515080/200272)

亲切的问候，
博

# content-management-system - 用于基于角色的内容交付的 CMS

> ID：10830618
> 
> 赞同：1
> 
> 时间：2012-05-31T09:13:56.500
> 
> 标签：content-management-system

我们正在研究用于我们下一个新闻门户的 CMS 系统。在人们投票结束之前，请记住，这个问题已经过充分研究，并且没有很多信息。

要求是我们需要**提供基于角色的内容**。这意味着我们需要有不同的用户角色，例如客人、员工、招聘人员、主管等。并且**根据用户角色，我们将提供不同的新闻文章**。所有角色都应该可以访问所有新闻文章，因此区别仅在于首页上突出显示的新闻。

那里有大量不同的 CMS 系统，所以如果有人能阐明哪些系统可能满足我的需要，我会非常高兴。这种个性化的内容交付似乎没有很好的文档记录或通常不受支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T21:00:03.563

我个人处理过的前三个 CMS 是 Wordpress、Drupal 和 Joomla。这三个都为您提供了多个角色组。

这三个都易于安装，但没有什么比 Wordspress 的快速安装更好的了。我真的很喜欢那个。

在易用性方面，我认为 Wordpress 是最简单的，然后是 Joomla，最后是 Drupal。但是，这可能会根据用户对每个系统的体验而有所偏差。

在创建模板方面，我真的很喜欢为 Wordpress 创建模板，Drupal 还可以，但我真的很害怕用 Joomla 创建模板。

这三个人都有大量可用的插件，但我是喜欢创建自己的插件的类型，而 wordpress 被证明对我来说最容易使用。我很难理解 Joomla 的后端知识（但我只是一个新手程序员）而且我并没有真正用 Drupal 进行任何插件开发，所以我不能对此发表评论。

因此，根据我的评估，您可能会说 Wordpress 是最佳选择。然而，它对我来说是最好的，因为它对我有用。您可能有不同的偏好，所以我建议您尝试一下，但只潜入您真正感兴趣的那些。

最后，如果您找不到任何适合您需求的东西，这可能很明显，但您可以考虑创建自己的 CMS。

为您寻找适合您需求的完美 CMS 干杯并祝您好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T14:40:28.163

我假设您的网站有相当大的流量，您正在寻找一个强大的系统，并且您可以利用一些 PHP 开发人员的专业知识。（如果您的开发团队主要了解 Java，您应该开始研究像 dotCMS 和 Alfresco 这样的系统——但我不能谈论他们基于角色的内容和个性化功能。）

如果你需要一个工业级的系统并且可以使用 PHP，那么 Drupal 绝对应该是你的首选。然而，除了 Joomla 和 Wordpress 之外，还有一些 PHP 替代品——尤其是[MODX Revolution](http://modx.com/revolution/)。

Drupal 在用户角色方面做得很好。它们已融入产品的核心，因此 Drupal 经常用于基于会员的网站和新闻门户。例如，它为《经济学人》运营网站。了解 PHP 的开发人员应该很快就能找到解决方法。仅当您受到限制（例如需要使用 Java 或 .net 技术）时才排除它。

Joomla 过去只有三个用户角色，但他们的系统在过去几年中得到了显着改进，您现在可以创建自己的用户组。

Wordpress 使用插件来完成这些任务，并且可以完成这项工作。它是一个非常适合快速启动的系统，它的博客界面令人钦佩。但它最初的设计并没有考虑到细粒度的用户角色，在这样的工作中使用它可能会扩展它的功能。随着您远离核心博客任务，它的架构变得越来越难以使用。

MODX 为用户角色和内容访问提供了一个非常灵活和健壮的架构。MODX 让您可以非常轻松地提供基于角色的内容，其复杂的缓存为您提供了相当不错的性能权衡。它的扩展性也很好，尽管 Drupal 仍然是该领域的可扩展性之王。坏消息是 MODX 的角色和权限系统需要努力才能理解。好消息是你只需要理解一次。

MODX 的架构非常好，因此您可以在其之上快速构建。Drupal、Joomla 或 WordPress 并非总是如此。Drupal 确实受益于很长的贡献“模块”列表来扩展系统。但是，如果您认为您可能需要做一些尚未内置到 CMS 中或作为附加组件提供的事情 - 或者如果您对 Drupal 陡峭的学习曲线不感兴趣 - MODX Revolution 可能是您最好的选择。

我[在 Stack Overflow](https://stackoverflow.com/questions/8818684/what-are-the-questions-that-needs-to-asked-before-choosing-a-cms/)的其他地方总结了您在选择 CMS 时需要更普遍地考虑的事情，但人是您最重要的考虑因素 - 将使用系统的人、将构建系统的人以及更广泛的政治你的实施。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T00:37:01.777

**我建议[Drupal](http://drupal.org/)。**

它是用于处理多个角色组的出色 CMS。它还使用了一种`Views`与角色组很好地集成的东西，允许您灵活地根据用户组显示内容。

我能看到的唯一问题是学习曲线。**Drupal一开始**可能会让人有点难以理解。

主要和最大的好处是存在于 Drupal 代码库周围的丰富而充满活力的 Drupal 社区和基础设施。

希望有所帮助:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T08:12:40.783

这个问题基本上是无法回答的。几乎所有 CMS 都提供基于角色的内容交付，因此不会为您提供差异化​​优势。描述您的其他要求，包括功能性和非功能性（性能、#users、#articles、#images、#pageviews/day 等）。您需要开箱即用还是想要进行一些开发？多少？您可以自己将模块升级到新版本吗？你的团队有什么专长？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-10T08:18:07.840

使用[露天](http://wiki.alfresco.com/wiki/Download_and_Install_Alfresco)。它应该满足您的所有要求，并提供以下设施 文档管理 Web 内容管理 记录管理 图像管理 内容存储库

您可以配置角色/权限添加/更新/删除用户/组和很多东西

# jquery-mobile - 如何在 jquery mobile 的 div 中插入外部 html 文件

> ID：10830619
> 
> 赞同：0
> 
> 时间：2012-05-31T09:13:56.800
> 
> 标签：jquery-mobile

我的页面中有两个 div。第一个 div 包含一个有两个选项的导航栏。我想要做的是当我单击导航栏中的一个选项时，我希望将相应的 html 文件加载到第二个 div 中。我该怎么做。请帮忙。

到目前为止，这是我的代码..

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>Test Document</title>
<meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1" />
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>

<script type = "text/javascript">
function loadSurveyPage()
{
alert("Survey");
$('#myBody').load('survey.html #myQuestions');
}

function howToSurvey()
{
alert("How to Survey");
$('#myBody').load('howToSurvey.html #myQuestions');
}
</script>
</head>
<body id="myBody">

<div data-role="page" id="indexPage">

<div  data-role="header" data-position="fixed">
<div data-role="navbar" id="navbar">
<ul>
    <li><a href="#" rel="external" onclick="howToSurvey()">How To Take The Survey</a></li>
    <li><a href="#" onclick="loadSurveyPage()">Take Survey</a></li>    
</ul>
</div>
</div>

<div data-role="content" id="myQuestions"></div>
</div>

</body>
</html> 
```

单击选项时出现以下错误..

XMLHttpRequest 无法加载 file:///C:/Users/sp05/Desktop/Self/TMS/testForTab/howToSurvey.html。Access-Control-Allow-Origin 不允许 Origin null。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:27:00.800

1.  您应该使用本地网络服务器进行开发（例如 Windows 的 IIS）。您在这里遇到的问题可能是安全问题。
2.  您使用的 .load() 方法错误。选择器参数指向返回的 html 上的一个元素。使用 .get() 或 .post() 代替：[http ://api.jquery.com/category/ajax/shorthand-methods/](http://api.jquery.com/category/ajax/shorthand-methods/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T12:55:51.990

我遇到了一些跨域问题......我在 wamp 服务器上运行了相同的项目，它运行得非常好......

# java - 为大型应用程序进行分析时很困难

> ID：10830622
> 
> 赞同：1
> 
> 时间：2012-05-31T09:14:05.380
> 
> 标签：java, performance, memory-leaks, profiling

我正在尝试分析我的 Web 应用程序，这是一个非常大的应用程序，并且在缓存和其他进程中占用大量内存，因此很难进行堆转储然后分析，甚至当我尝试通过 JProfiler 分析它时它也在工作非常慢。有没有办法我可以轻松做到这一点。我的应用程序几乎从 120 GB RAM 中占用了 30 GB。

我在某处读到我们可以为堆的不同部分分配不同数量的内存。我们没有在我们的应用程序中做这样的事情。我们刚刚给出了-xmx -110g。这意味着我们提供了 110 GB 的最大 RAM。我可以检查它分配给不同块（如老一代、伊甸园空间、幸存者空间）的内存量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:26:43.630

分析任何使用 30gb 的系统都将是一个挑战。分析会收集大量信息，这会增加更多开销。

最好的方法是将您的应用程序分解为模块 - 您确实创建了一个模块化应用程序，对吗？然后，您可以使用示例数据自行分析每个模块。这样可以限制开销和消耗的内存量。

一些性能调优技巧 可以参考[http://java.dzone.com/articles/java-performance-tuning?page=0,1 ，可以设置不同的内存使用级别。](http://java.dzone.com/articles/java-performance-tuning?page=0,1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:11:40.120

如果你想知道

> 它为不同的块分配了多少内存，比如老一代、伊甸园空间、幸存者空间。

例如，您可以使用此类：[http](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/management/ManagementFactory.html) ://docs.oracle.com/javase/1.5.0/docs/api/java/lang/management/ManagementFactory.html并使用 JMX 访问此信息。

# javascript - 如何将哈希附加到 UIWebView 位置href？

> ID：10830623
> 
> 赞同：0
> 
> 时间：2012-05-31T09:14:05.713
> 
> 标签：javascript, ipad, uiwebview, href

我有 iPad 应用程序，我将本地 html 加载到 UIWebView 中。如何将哈希标记附加到 URL，以便将哈希标记添加到 Web 视图 href 以便它从一开始就存在？

我想做的是：

1.  从本地文件加载html页面
2.  向 UIWebview href 附加一个井号标签
3.  将 html 注入到 web 视图中
4.  显示页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:07:09.210

1) 使用 UIWebView 的 loadHTMLString:baseURL: 方法。详情见往期贴

2）我假设在第 4 步中使用了哈希标签，如果没有提供更多详细信息，为什么它在第 2 步，但直到第 4 步才显示页面。您可以使用 Javascript 执行此操作。

3) 你需要执行 Javascript 来改变 dom。

4) 再次使用 Javascript，进行位置更改。如果您使用 loadHTMLString:baseURL 再次加载页面，您将再次获得原始页面。

所以你需要做大量的Javascript执行，方法是UIWebView的stringByEvaluatingJavaScriptFromString:。有关详细信息，请参阅过去的帖子。如果您正在加载页面以跳转到哈希标记，那么只需在此处添加哈希标记，而不是在单独的步骤 2 中。

# ruby - 如何在没有类型映射的情况下解析 ruby 中的 yaml

> ID：10830624
> 
> 赞同：3
> 
> 时间：2012-05-31T09:14:07.867
> 
> 标签：ruby, mapping, yaml, zipcode

我想从 yaml (PHPMyAdmin) 中的 Mysql 转储中获取数据，但数据没有被引号括起来。

我有可以从 0 开始的邮政编码，解析后我得到十进制版本的八进制值，而不是简单的字符串。

如何强制 Yaml 解析器不进行自动映射，或者只获取所有数据，因为它们是字符串？

谢谢

== 更新 ==

```
2185:
 id: 3274  
 civility: Mr  
 address: CROIX DES COMBES  
 zipcode: 04270 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T09:22:05.720

如果您的邮政编码值是字符串，它们可能应该在数据库中，并且它们被正确转换为 YAML，那么它们将被 Ruby 的 YAML 解析器重新转换回字符串：

```
require 'yaml'
zip = '01234' 
```

如果我们把它当作一个字符串，它就可以正确转换。

```
zip.to_yaml # => "--- \"01234\"\n"
YAML.load(zip.to_yaml) # => "01234" 
```

如果我们将它视为一个整数，它的前导`0`会下降，这是我所期望的。

```
zip.to_i.to_yaml # => "--- 1234\n"
YAML.load(zip.to_i.to_yaml) # => 1234 
```

在您的示例中：

```
zipcode: 04270 
```

`zipcode`是一个 YAML 整数。它应该用引号括起来以保持其“字符串”。

[Wikipedia 的 YAML 文章](http://en.wikipedia.org/wiki/YAML#Casting_data_types)有一个很好的例子，展示了如何消除数据类型的歧义。

* * *

`zipcode`您可以在解析之前调整 YAML 中的所有实例，例如：

```
require 'yaml'

yaml_data = '2185:
 id: 3274  
 civility: Mr  
 address: CROIX DES COMBES  
 zipcode: 04270
'

yaml_data.gsub(/zipcode: (\d+)/, 'zipcode: "\1"') 
# => "2185:\n id: 3274  \n civility: Mr  \n address: CROIX DES COMBES  \n zipcode: \"04270\"\n"

YAML.load(yaml_data.gsub(/zipcode: (\d+)/, 'zipcode: "\1"')) 
# => {2185=>{"id"=>3274, "civility"=>"Mr", "address"=>"CROIX DES COMBES", "zipcode"=>"04270"}} 
```

# javascript - 通过Javascript激活/停用onclick事件？

> ID：10830627
> 
> 赞同：1
> 
> 时间：2012-05-31T09:14:19.400
> 
> 标签：javascript, html, events

我尝试做一个问卷调查，当您单击 1 个答案时，检查它是否是好的答案，然后停用 onclick 事件，在单击另一个按钮更改问题并添加新答案后，我想重新激活单击但我不知道如何在 javascript 中执行此操作：/

这里是更好解释的代码x）：

```
<ol id="answerList" type="A">
      <img class="imgLine" src="" id="answer-a-img" /><li onclick="clickLine(this);" id="answer-a" ></li>
      <img class="imgLine" src="" id="answer-b-img" /><li onclick="clickLine(this);" id="answer-b" ></li>
      <img class="imgLine" src="" id="answer-c-img" /><li onclick="clickLine(this);" id="answer-c" ></li>
      <img class="imgLine" src="" id="answer-d-img" /><li onclick="clickLine(this);" id="answer-d" ></li>
</ol> 
```

这是答案，onclick 事件正在工作并且调用 clickLine 函数

我通过这样做停用了 onclick 事件：（我知道它不干净，但我没有看到其他方式：/）

```
document.getElementById('answer-a').onclick = "";
document.getElementById('answer-b').onclick = "";
document.getElementById('answer-c').onclick = "";
document.getElementById('answer-d').onclick = ""; 
```

但是现在，当我得到新数据时，我没有成功重新激活 onclickevent，我尝试了这个：

```
document.getElementById('answer-a').onclick = "clickLine(this);";
document.getElementById('answer-b').onclick = "clickLine(this);";
document.getElementById('answer-c').onclick = "clickLine(this);";
document.getElementById('answer-d').onclick = "clickLine(this);"; 
```

但没有奏效：/

谢谢 ！

ps：如果有解决方案，我可以使用Jquery ^^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:18:33.033

就像是：

```
 $(".imgLine").click(function(event)
    {
         $('.imgLine').unbind();
         event.preventDefault();
    });

    $("a#activate").click(function(event)
    {
        $('.imgLine').bind();        
        event.preventDefault();
    }); 
```

其中 a#activate 表示下一个问题按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:18:14.630

```
document.getElementById('answer-a').onclick = "javascript:clickLine(this);";
document.getElementById('answer-b').onclick = "javascript:clickLine(this);";
document.getElementById('answer-c').onclick = "javascript:clickLine(this);";
document.getElementById('answer-d').onclick = "javascript:clickLine(this);"; 
```

尝试像这样执行。首先检查你是否有 javascript:clickLine() 函数。

# php - 添加时间经过的部分

> ID：10830631
> 
> 赞同：0
> 
> 时间：2012-05-31T09:14:26.883
> 
> 标签：php, codeigniter

我想要做的是弄清楚我应该在哪里放置一段代码，它需要检查是否尝试了最大登录尝试，然后它会检查 10 分钟是否已经过去，但这样用户可以尝试再次登录。不知道应该如何添加这个逻辑。

```
function submit()
{
    // Sets validation rules for the login form
    $this->form_validation->set_rules('username', 'Username', 'trim|required|xss_clean');
    $this->form_validation->set_rules('password', 'Password', 'trim|required|xss_clean');
    $this->form_validation->set_rules('remember', 'Remember me', 'integer');

    // Checks to see if login form was submitted properly
    if ($this->form_validation->run() === false)
    {
        $outputArray = array('error' => 'yes', 'message' => 'There was a problem submitting the form! Please refresh the window and try again!');  
    }
    else
    {
        if (is_null($userData = $this->usersmodel->getUserByUsername($this->input->post('username'))))
        {
            // Username was not found in the database
            $outputArray = array('error' => 'yes', 'message' => 'Incorrect username and password combination!');  
        }
        else
        {
            // Checks to see if user has exceeded max login attempts
            if ($this->auth->isMaxLoginAttemptsExceeded($userData->userID))
            {

                // Max was exceeded and sends email to account holder
                $outputArray = array('error' => 'yes', 'message' => 'Your account is currently locked, we appologize for the inconvienence. You must wait 10 minutes before you can login again! An email was sent to the owner of this account!');  
                $userData = array('userID' => $userData->userID, 'firstName' => $userData->firstName, 'lastName' => $userData->lastName, 'email' => $userData->email, 'username' => $userData->username);
                $this->auth->sendEmail($this->config->item('defaultTemplate'), 'maxlogins', 'KOW Manager Account Locked', $userData);  
            }
            else
            {
                // Matches user's status for validity
                switch($userData->usersStatusesID)
                {
                    // Registered not validated
                    case 1:
                        $outputArray = array('error' => 'yes', 'message' => 'Sorry you must verify your account before logging in!');  
                        break;
                    // Account suspended
                    case 3:  
                        $outputArray = array('error' => 'yes', 'message' => 'Your account has been suspended!');  
                        break;
                    // Account Banned
                    case 4:
                        $outputArray = array('error' => 'yes', 'message' => 'Your account is currently banned!');  
                        break;
                    // Account Deleted
                    case 5:  
                        $outputArray = array('error' => 'yes', 'message' => 'Your account has been deleted!');  
                        break;
                    // Registered and validated
                    default:
                        // Checks to see if login was successful
                        if ($this->auth->login($this->input->post('username'), $this->input->post('password'), $this->input->post('remember')))
                        {
                            // Login was successful
                            $outputArray = array('success' => 'Yes', 'message' => 'Sending to control panel!');    
                        }
                        else
                        {
                            // Login failed
                            $outputArray = array('error' => 'yes', 'message' => 'Incorrect username and password combination!');  
                        } 
                }
            }

        }
    }
    echo json_encode($outputArray);      
}

/**
* Check if login attempts exceeded max login attempts
*
* @param       integer
* @return      bool
*/
function isMaxLoginAttemptsExceeded($userID)
{
    $this->ci->load->model('users/usersmodel');
    $loginAttempts = $this->ci->usersmodel->getLoginAttemptsNum($this->ci->input->ip_address(), $userID);
    if ($loginAttempts >= 5)
    {
        return true;
    }
    else
    {
        return false;
    }
}

/**
 * Get number of attempts to login occured from given IP-address or username
 *
 * @param   string
 * @param   string
 * @return  integer
 */
function getLoginAttemptsNum($ipAddress, $userID)
{
    $this->db->where('ipAddress', $ipAddress);
    $this->db->or_where('userID', $userID);
    $query = $this->db->get($this->usersLoginsAttempts);
    if ($query->num_rows > 0)
    {
        return $query->num_rows;          
    }
    else
    {
        return 0;
    }        
}

Fields: id, userID, ipAddress, datetime 
```

每次用户进行不正确的登录时，它都会在字段中添加另一行，该字段按 ipAddress 或 userID 中的每 5 个来存储它。所以它需要查看最后一个日期时间，因为它只存储最后 5 个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:13:57.323

您的第一选择是是否在以下情况下锁定用户：

*   已从计算机进行了 5 次无效尝试，任何用户名（更有可能抓住黑客）
*   使用相同的有效用户名进行了 5 次无效尝试（更有可能捕获知道用户名但不知道密码的用户）。

您设置的方法是其中的第二种（根据您的功能判断 isMaxLoginAttemptsExceeded($userData->userID)) ）

所以，基于此：

阶段1：

向用户的数据库添加 3 个字段：“invalid_login_count”、“last_invalid”attempt”和“locked_out_until”

阶段1：

在“// 登录失败”这一行周围，您需要记录进行了无效尝试的事实。增加“invalid_login_count”并存储在数据库中，将“last_invalid_attempt”设置为现在。如果“invalid_login_count”= 5，则还将“locked_out_until”更新为时间 + 5 分钟。

第 2 阶段：

在“//登录成功”这一行周围清除“invalid_login_count”、“last_invalid_attempt”和“locked_out_until”的值（即重置）

第三阶段：

如果“last_invalid_attempt”有一个值，并且是在不到 5 分钟之前，则清除“locked_out_until”、“last_invalid_attempt”和“invalid_login_count”中的值。获取用户详细信息后立即执行此操作，无论是无效还是现在。

第 4 阶段：

您的 $this->auth->isMaxLoginAttemptsExceeded($userData->userID) 函数应该查看“locked_out_until”值，如果 > now，则它们被锁定。

注意：这意味着用户不能输入 5 次无效尝试，每次间隔小于 5 分钟。这并不完全符合您的要求（5 分钟内尝试 5 次），但是存储所有最新尝试的时间并且仅包括最后 5 分钟的值的逻辑有点困难 - 所以我保持简单。

* * *

请注意，我实际上建议按 IP 地址锁定，这是稍微不同的逻辑，因为您需要有一个特定的表来计算尝试次数并按 IP 锁定，并且您还需要在两个地方进行更新（如果未找到用户名，或者如果密码无效），如果 IP 被锁定，您应该在检查用户名是否有效之前将用户退出。否则，这是相同的逻辑。

# entity-framework - System.Data.Entity.Edm.EdmEntityType 没有定义键

> ID：10830632
> 
> 赞同：2
> 
> 时间：2012-05-31T09:14:28.223
> 
> 标签：entity-framework, entity-framework-4.1, ef-code-first

我正在尝试使用 Code-First 创建一个 sdf，但是我收到一个错误，即没有为我的表定义任何键，并且无法理解为什么。

我有以下课程：-

```
public class Article
{
    [Key]
    public int ArticleID;

    //[Display(Name = "Title")]
    //[MaxLength(255)]
    //[Required(ErrorMessage="Title is required")]
    public string ArticleTitle;

    //[Display(Name = "Date")]
    //[DisplayFormat(DataFormatString = "{0:#.#}", ApplyFormatInEditMode = true, NullDisplayText = "")]
    //[Required(ErrorMessage = "Date is required")]
    public DateTime ArticleDate;

    //[Display(Name = "Text")]
    //[Required(ErrorMessage = "Text is required")]
    public string ArticleText;

    //[Display(Name = "Source")]
    public string ArticleSource;

    //[Display(Name = "Category")]
    public int CategoryID { get; set; }

    public virtual Category Category { get; set; }

}

public class Category
{
    [Key]
    public int CategoryID;

    [Display(Name = "Category Title")]
    [MaxLength(255)]
    [Required(ErrorMessage = "Category Title is required")]
    public string CategoryTitle;

}

public class CommonsContext : DbContext
{
    public DbSet<Article> Articles { get; set; }
    public DbSet<Category> Categories { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();

        //A one-to-one relationship between the Article and Category tables. 
        modelBuilder.Entity<Article>().HasRequired(x => x.Category);
    }

} 
```

在 web.config 中：-

```
<add name="CommonsContext" connectionString="Data Source=|DataDirectory|Personal.sdf" providerName="System.Data.SqlServerCe.4.0" /> 
```

当我浏览到 App_Data 文件夹时，我什至看不到 Personal.sdf，所以这意味着它甚至没有被创建。

我究竟做错了什么？目前还想不通。

感谢您的帮助和时间

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T09:16:47.090

可能是因为您还没有为关键属性定义 getter 和 setter

```
public int ArticleID { get; set; }

public int CategoryID { get; set; } 
```

# c# - 确定共享主机中asp.net缓存使用的内存

> ID：10830633
> 
> 赞同：6
> 
> 时间：2012-05-31T09:14:37.670
> 
> 标签：c#, asp.net, caching, shared-hosting

根据这个[问题](https://stackoverflow.com/questions/10829681/asp-net-cache-or-manual-caching/)，我想知道asp.net的system.web.caching.cache对我有好处，还是我应该使用数据库缓存？

所以，我需要知道 system.Web.caching.cache 使用了多少内存？但是由于我使用的是共享托管服务器，所以我不能使用任务管理器。有没有办法使用一些代码来确定 system.web.caching.cache 使用了多少内存？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T09:26:13.523

查看应用程序使用多少工作内存的一种快速方法是直接询问垃圾收集。

```
long bytes = GC.GetTotalMemory(false);
txtMemoryUsed.Text = bytes.ToString(); 
```

并使用这个文字`<asp:Literal runat="server" ID="txtMemorysUsed" EnableViewState="false" />`

但是您可以使用 获取更多详细信息`PerformanceCounter`，例如，您可以获取此代码使用的池的虚拟内存数量：

```
 var oPerfCounter = new PerformanceCounter();
oPerfCounter.CategoryName = "Process";
oPerfCounter.CounterName = "Virtual Bytes";
oPerfCounter.InstanceName = "aspnet_wp";
txtMemorysUsed.Text = "Virtual Bytes: " + oPerfCounter.RawValue + " bytes"; 
```

您可以使用所有这些参数来获取池的信息。

```
Processor(_Total)\% Processor Time
Process(aspnet_wp)\% Processor Time
Process(aspnet_wp)\Private Bytes
Process(aspnet_wp)\Virtual Bytes
Process(aspnet_wp)\Handle Count
Microsoft® .NET CLR Exceptions\# Exceps thrown / sec
ASP.NET\Application Restarts
ASP.NET\Requests Rejected
ASP.NET\Worker Process Restarts (not applicable to IIS 6.0)
Memory\Available Mbytes
Web Service\Current Connections
Web Service\ISAPI Extension Requests/sec 
```

例如，此参数获取 cpu 负载。

```
oPerfCounter.CategoryName = "Processor";
oPerfCounter.CounterName = "% Processor Time";
oPerfCounter.InstanceName = "_Total";
txtOutPut.Text = "Current CPU Usage: " + oPerfCounter.NextValue() + "%"; 
```

参考：http: [//msdn.microsoft.com/en-us/library/ms972959.aspx](http://msdn.microsoft.com/en-us/library/ms972959.aspx)

相对：[从应用程序内部监视 ASP.NET 应用程序内存](https://stackoverflow.com/questions/586544/monitoring-asp-net-application-memory-from-within-the-application)

我已经在本地 iis 上进行了测试，并且可以正常工作。

# iphone - 如何在uiscrollview滚动时添加声音

> ID：10830635
> 
> 赞同：-1
> 
> 时间：2012-05-31T09:14:40.173
> 
> 标签：iphone, ios, uiscrollview, audio

```
 -(void)layoutScrollImages
{
UIImageView *view = nil;
NSArray *subviews = [scrollView1 subviews];
CGFloat curXLoc = 0;
for (view in subviews)
{if ([view isKindOfClass:[UIImageView class]] && view.tag > 0)
{
CGRect frame = view.frame;
frame.origin = CGPointMake(curXLoc, 0);
view.frame = frame;
curXLoc += (kScrollObjWidth);
}
}
    [scrollView1 setContentSize:CGSizeMake((kNumImages * kScrollObjWidth), [scrollView1 bounds].size.height)];
}

-(void)viewDidLoad
{
self.view.backgroundColor = [UIColor clearColor];

    [scrollView1 setBackgroundColor:[UIColor whiteColor]];
[scrollView1 setCanCancelContentTouches:NO];
scrollView1.indicatorStyle = UIScrollViewIndicatorStyleWhite;

scrollView1.clipsToBounds = YES;
scrollView1.scrollEnabled = YES;
scrollView1.pagingEnabled = YES;
NSUInteger i;
for (i = 1; i <= kNumImages; i++)
{
NSString *imageName = [NSString stringWithFormat:@"snap%d.jpg", i];
UIImage *image = [UIImage imageNamed:imageName];

UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
CGRect rect = imageView.frame;
rect.size.height = kScrollObjHeight;
rect.size.width = kScrollObjWidth;
    imageView.frame = rect;imageView.tag = i;
[scrollView1 addSubview:imageView];
[imageView release];
[self layoutScrollImages];
}
[super viewDidLoad];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:21:44.057

添加`UIScrollViewDelegate`到您的界面，然后在

```
scrollViewWillBeginDragging or `scrollViewDidEndDragging`

- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView // called on start of dragging (may require some time and or distance to move)
{
    //add your code here

} 
```

现在，每当您拖动滚动视图时，都会调用此方法

# database - 有没有办法将带有存储过程的数据库作为 Visual Studio 2010 项目？

> ID：10830636
> 
> 赞同：0
> 
> 时间：2012-05-31T09:14:55.723
> 
> 标签：database, visual-studio-2010, stored-procedures

如何将存储过程添加到我的 Visual Studio 2010 解决方案？

我需要一个存储过程来演示 Visual Studio 中的一些示例代码。我不希望用户必须设置数据库。

我快速浏览了 Visual Studio 2010 SQL Server 数据库项目，但我不确定它的方向是否正确，是吗？

现在一张表和几个存储过程就足够了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:03:20.920

请参阅上面的评论 SQL Server 数据库文件是我正在寻找的，msdn.microsoft.com/en-us/library/tk2tbfb5.aspx

# java - 在构造函数中调用未初始化的变量

> ID：10830643
> 
> 赞同：1
> 
> 时间：2012-05-31T09:15:33.153
> 
> 标签：java

在下面的构造函数中，我只初始化了两个变量，而一些变量未显式初始化。

正如我所读到的，如果构造函数是由我们提供的，编译器不会创建参数构造函数。那么在这种情况下，由于我有自己的构造函数，所以没有初始化变量 p 和 q 的默认构造函数。

所以，逻辑应该是如果我们尝试访问那些未初始化的变量，那么它应该是编译时错误。但是，下面的代码运行成功。

输出为 5 10 0.0 0.0

我们如何解释输出 0.0 和 0.0 因为我没有在构造函数中声明它们？

```
public class Rectangle {
int l, b;
double p, q;

public Rectangle(int x, int y) {
l = x;
b = y;
}

public static void main(String[] args) {
    Rectangle obj1= new Rectangle(5,10);
    System.out.println(obj1.l);
    System.out.println(obj1.b);
    System.out.println(obj1.p);
    System.out.println(obj1.q); 
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T09:17:24.743

基元被初始化为默认值，在这种情况下，0 表示整数，0.0 表示浮点数或双精度数。对象默认为空，例如字符串为空。

您在构造函数中设置的值通常与默认值不同，因此需要构造函数。

默认初始值是一种语言特性，根本不需要构造函数。

您在此处阅读了有关默认值的信息：[http ://www.janeg.ca/scjp/lang/defaults.html](http://www.janeg.ca/scjp/lang/defaults.html)

请记住，默认值仅适用于 CLASS 成员，而不适用于局部变量。这种差异就是为什么某些未初始化的值会出现编译错误的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:16:36.977

默认情况下，java 将 double 初始化为 0.0

这是因为 double 是一种**原始数据类型**，不能是 null*引用*。

来自java文档：

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

```
Data Type   Default Value (for fields)
 byte                  0
 short                 0 
 int                   0
 long                  0L
 float                 0.0f
 double               0.0d
 char                 '\u0000'
 String (or any object)     null
 boolean                   false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T09:18:53.620

简单数据类型不能为空（类型如 int 或 double），只有对象可以为空。这些数字简单数据类型的默认值始终为 0。因此，如果您不初始化您的双精度值，您将始终获得 0.0，如果您想使用对象，请使用包装类 Integer 或 Double

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T09:21:41.520

对于局部变量和其他一切，规则是不同的。从根本上说，堆栈分配和堆分配之间的区别。与堆栈帧不同，在您的代码有机会观察它之前，在堆上分配的所有内存（以及所有实例和类变量）都被清零。因此，Java 通过静态分析确保您的代码在初始化之前无法读取本地 var，但是对于堆分配的 var 没有这样的检查，它将始终具有一致的值（无论是问题——零数字、假布尔值、空引用）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T09:24:03.903

记住这一点，

在 Java 中，实例变量默认初始化为它们各自的默认值。这就是您的未初始化值是 0.0 的原因（因为它们的数据类型是双精度的）

字符 = \u0000

双 = 0.0

对象引用变量 = null;

但是在Java 中，局部变量（即方法内部）必须在使用之前进行初始化。这必须由程序员完成。

# c - 如何修复“未找到版本‘GLIBC_2.14’”错误？

> ID：10830650
> 
> 赞同：4
> 
> 时间：2012-05-31T09:15:49.493
> 
> 标签：c, shared-libraries, glibc

我在 Ubuntu 12.04 下编译了一个 C 程序，用它构建了一个 Debian 软件包，并希望将它安装在运行 Debian Lenny 的服务器上。

上次我这样做（大约两个月前）它起作用了：我可以安装软件包并运行二进制文件。但现在我收到以下错误消息：

```
(binary's name): /lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.14' not found (required by (binary's name)) 
```

除了将我的机器升级到 Ubuntu 12.4 之外，我们对代码带来的唯一重大变化是调用`strdup()`，为此我必须启用`_POSIX_C_SOURCE=200809L`功能测试宏。

将服务器升级到最新的 Debian 版本不是我的首选，因为它不受我的直接控制。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T15:16:38.707

我认为这里的关键信息是“升级我的机器”。那么，当这之前工作时，您是在 12.04 之前的版本上构建和打包的？如果是这样，那么问题是 12.04 现在附带了更新版本的 libc（显然是 2.14），并且您的二进制文件现在记录了对该版本 libc 的依赖关系。当您尝试在 Lenny 上运行时，它可能使用旧版本的 libc，链接器检测到 Lenny 版本不支持 2.14 API，并失败。

我认为最好的方法可能是在 12.04 上进行开发和测试，然后当你想为特定的 Debian 版本创建包时，使用[pbuilder](https://wiki.ubuntu.com/PbuilderHowto)或类似的工具来创建 deb。这将确保用于打包构建的库与目标平台匹配。

# c# - 为 RSS 加载 XDocument 时出现 MonoDroid ObjectDisposedException

> ID：10830651
> 
> 赞同：2
> 
> 时间：2012-05-31T09:15:50.340
> 
> 标签：c#, .net, xml, exception, xamarin.android

我正在摆弄 MonoDroid（又名 Mono for Android），试图构建一个简单的播客下载应用程序，目前只是测试对 RSS 提要内容的检索。

我的简单应用是：

*   输入 RSS 提要的 url 的编辑文本
*   一个“下载”RSS的按钮
*   下载操作输出的文本显示

当用户单击下载时，我会获取当前使用的 RSS 内容（我[也](http://docs.xamarin.com/android/tutorials/consuming_web_services#USING_HTTPWEBREQUEST)`XDocument`尝试过使用[/](http://docs.xamarin.com/android/tutorials/consuming_web_services#USING_HTTPWEBREQUEST) [s 等](http://docs.xamarin.com/android/tutorials/consuming_web_services#USING_HTTPWEBREQUEST)），这是简短版本：[`WebRequest``Stream`](http://docs.xamarin.com/android/tutorials/consuming_web_services#USING_HTTPWEBREQUEST)

```
void button_Click(object sender, EventArgs e)
{
    output.Text += "user input: " + rssUriInput.Text + "\n";

    try
    {
        output.Text += "### document ###";
        output.Text += XDocument.Load(rssUriInput.Text).ToString();
        output.Text += "### document ###";
    }
    catch (Exception ex)
    {
        output.Text += "OOOPS something went wrong:\n" + ex.ToString();
    }
} 
```

**我已经尝试了几种方法，但是`ObjectDisposedException`当我这样做时不断得到 s`XDocument.Load(/*my uri here*/);`**

我的 AssemblyInfo.cs 包括

```
[assembly: UsesPermission(Android.Manifest.Permission.Internet)] 
```

现在，免责声明，在运行 hello world 之后，我有点自己跑了，所以我可能缺少一些 MonoDroid 基础知识，但是这段代码在普通的 C# 应用程序中工作（我测试过）但是
**为什么我在这里做错了？我必须做一些特别的事情才能在 MonoDroid 中使用 xml / linq / 网络访问吗？**

这是完整的活动代码：

```
using System;

using Android.App;
using Android.Content;
using Android.Runtime;
using Android.Views;
using Android.Widget;
using Android.OS;
using System.Xml.Linq;

namespace RssDownlowd
{
    [Activity(Label = "RssDownlowd", MainLauncher = true, Icon = "@drawable/icon")]
    public class Activity1 : Activity
    {
        EditText rssUriInput;
        Button button;
        TextView output;

        protected override void OnCreate(Bundle bundle)
        {
            base.OnCreate(bundle);

            SetContentView(Resource.Layout.RssDownload);

            rssUriInput = FindViewById<EditText>(Resource.Id.rssUriText);
            button = FindViewById<Button>(Resource.Id.downloadButton);
            output = FindViewById<TextView>(Resource.Id.outputTextView);

            button.Click += new EventHandler(button_Click);
        }

        void button_Click(object sender, EventArgs e)
        {
            output.Text += "user input: " + rssUriInput.Text + "\n";

            try
            {
                output.Text += "### document ###";
                output.Text += XDocument.Load(rssUriInput.Text).ToString();
                output.Text += "### document ###";
            }
            catch (Exception ex)
            {
                output.Text += "OOOPS something went wrong:\n" + ex.ToString();
            }
        }

    }
} 
```

这是完整的例外：

```
"System.ObjectDisposedException: The object was used after being disposed.

  at System.Net.WebConnection.BeginRead (System.Net.HttpWebRequest request, System.Byte[] buffer, Int32 offset, Int32 size, System.AsyncCallback cb, System.Object state) [0x00000] in <filename unknown>:0 

  at System.Net.WebConnectionStream.BeginRead (System.Byte[] buffer, Int32 offset, Int32 size, System.AsyncCallback cb, System.Object state) [0x00000] in <filename unknown>:0 

  at System.Net.WebConnectionStream.Read (System.Byte[] buffer, Int32 offset, Int32 size) [0x00000] in <filename unknown>:0 

  at System.Xml.XmlInputStream.Read (System.Byte[] buffer, Int32 offset, Int32 count) [0x00000] in <filename unknown>:0 

  at System.Xml.NonBlockingStreamReader.ReadBuffer () [0x00000] in <filename unknown>:0 

  at System.Xml.NonBlockingStreamReader.Read (System.Char[] dest_buffer, Int32 index, Int32 count) [0x00000] in <filename unknown>:0 

  at System.Xml.XmlStreamReader.Read (System.Char[] dest_buffer, Int32 index, Int32 count) [0x00000] in <filename unknown>:0 

  at Mono.Xml2.XmlTextReader.ReadTextReader (Int32 remained) [0x00000] in <filename unknown>:0 

  at Mono.Xml2.XmlTextReader.PeekChar () [0x00000] in <filename unknown>:0 

  at Mono.Xml2.XmlTextReader.ReadChar () [0x00000] in <filename unknown>:0 

  at Mono.Xml2.XmlTextReader.Expect (Int32 expected) [0x00000] in <filename unknown>:0 

  at Mono.Xml2.XmlTextReader.ReadEntityReference (Boolean ignoreEntityReferences) [0x00000] in <filename unknown>:0 

  at Mono.Xml2.XmlTextReader.ReadReference (Boolean ignoreEntityReferences) [0x00000] in <filename unknown>:0 

  at Mono.Xml2.XmlTextReader.ReadText (Boolean notWhitespace) [0x00000] in <filename unknown>:0 

  at Mono.Xml2.XmlTextReader.ReadContent () [0x00000] in <filename unknown>:0 

  at Mono.Xml2.XmlTextReader.Read () [0x00000] in <filename unknown>:0 

  at System.Xml.XmlTextReader.Read () [0x00000] in <filename unknown>:0 

  at Mono.Xml.XmlFilterReader.Read () [0x00000] in <filename unknown>:0 

  at System.Xml.Linq.XElement.LoadCore (System.Xml.XmlReader r, LoadOptions options) [0x00000] in <filename unknown>:0 

  at System.Xml.Linq.XNode.ReadFrom (System.Xml.XmlReader r, LoadOptions options) [0x00000] in <filename unknown>:0 

  at System.Xml.Linq.XContainer.ReadContentFrom (System.Xml.XmlReader reader, LoadOptions options) [0x00000] in <filename unknown>:0 

  at System.Xml.Linq.XElement.LoadCore (System.Xml.XmlReader r, LoadOptions options) [0x00000] in <filename unknown>:0 

  at System.Xml.Linq.XNode.ReadFrom (System.Xml.XmlReader r, LoadOptions options) [0x00000] in <filename unknown>:0 

  at System.Xml.Linq.XContainer.ReadContentFrom (System.Xml.XmlReader reader, LoadOptions options) [0x00000] in <filename unknown>:0 

  at System.Xml.Linq.XElement.LoadCore (System.Xml.XmlReader r, LoadOptions options) [0x00000] in <filename unknown>:0 

  at System.Xml.Linq.XNode.ReadFrom (System.Xml.XmlReader r, LoadOptions options) [0x00000] in <filename unknown>:0 

  at System.Xml.Linq.XContainer.ReadContentFrom (System.Xml.XmlReader reader, LoadOptions options) [0x00000] in <filename unknown>:0 

  at System.Xml.Linq.XElement.LoadCore (System.Xml.XmlReader r, LoadOptions options) [0x00000] in <filename unknown>:0 

  at System.Xml.Linq.XNode.ReadFrom (System.Xml.XmlReader r, LoadOptions options) [0x00000] in <filename unknown>:0 

  at System.Xml.Linq.XContainer.ReadContentFrom (System.Xml.XmlReader reader, LoadOptions options) [0x00000] in <filename unknown>:0 

  at System.Xml.Linq.XDocument.ReadContent (System.Xml.XmlReader reader, LoadOptions options) [0x00000] in <filename unknown>:0 

  at System.Xml.Linq.XDocument.LoadCore (System.Xml.XmlReader reader, LoadOptions options) [0x00000] in <filename unknown>:0 

  at System.Xml.Linq.XDocument.Load (System.String uri, LoadOptions options) [0x00000] in <filename unknown>:0 

  at System.Xml.Linq.XDocument.Load (System.String uri) [0x00000] in <filename unknown>:0 

  at RssDownlowd.Activity1.button_Click (System.Object sender, System.EventArgs e) [0x0004a] in C:\\Users\\khd483\\code\\HelloMonoDroid\\RssDownlowd\\Activity1.cs:47 " 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:39:32.617

奇怪的是，当我尝试你的代码时它工作得很好：

![截屏](../Images/f451173cb971d7848178422f13803990.png)

您是否在 Mono for Android 选项中的项目中启用了链接？

还可以考虑对 RSS 进行异步下载，因为它会阻塞 UI 线程，直到完成，使应用程序无响应。

# android - Android：在 Listadapter 中清除列表视图

> ID：10830656
> 
> 赞同：7
> 
> 时间：2012-05-31T09:16:13.990
> 
> 标签：android, listview, listadapter

> **可能重复：**
> [如何在 android 中清除我的列表视图](https://stackoverflow.com/questions/10832102/how-to-clear-my-listview-in-android)

在android中，我使用了一个listadapter，简单的适配器并传递了一个数组，我想清除listview的内容？它不是 clearing ，而是将记录附加到我的列表视图中。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-31T09:21:05.237

从这里获取我的自定义适配器。[测试适配器](https://stackoverflow.com/questions/10828657/how-to-mark-views-in-a-listview/10828782#10828782)

现在添加一个这样的方法..

```
public void clearAdapter()
    {
        deviceNames.clear();
        selected.clear();
        notifyDataSetChanged();
    } 
```

现在`youListAdapter.clearAdapter()`从你的活动中调用。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-31T09:23:46.277

只需编写 listView.setAdapter(null)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T10:04:39.987

在您的适配器上使用`notifydataSetInValidated()`以通知您的列表视图数据集不再有效。或将您的适配器设置为 null ：`l.setAdapter(null);`

# javascript - 如果尝试使用相同的键名，则更新 json 值

> ID：10830657
> 
> 赞同：0
> 
> 时间：2012-05-31T09:16:17.670
> 
> 标签：javascript, jquery

如果尝试添加具有相同名称的新键，我正在尝试编写一个更新 json 键值的函数

所以在小提琴 - [http://jsfiddle.net/adrianjsfiddlenetuser/C6Ssa/57/](http://jsfiddle.net/adrianjsfiddlenetuser/C6Ssa/57/)

单击“添加”按钮时，应该更新 jSon 数组 toUpdate ：

```
 name: "addThis2",
   id : 10 
```

应该成为

```
 name: "addThis2",
   id : 11 
```

这不会发生吗？

示例 JSON：

```
{
    "toAdd": [
        {
            "name": "addThis",
            "id": 10
        }
    ],
    "toRemove": [
        {
            "name": "removeThis"
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:37:24.453

```
function updateKeyVal() {
    $.each(toUpdate, function(i,e) {
        $.each(e, function(j, f) {
            if (f.name===valToCheck) f.id=11;
        });
    });
}​ 
```

[小提琴](http://jsfiddle.net/adeneo/C6Ssa/60/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:18:17.310

您应该更改数组的索引，如下所示：

```
var toUpdate = {
    toAdd: [],
    toRemove: []
};
toUpdate.toAdd[0].push({
    name: "addThis1",
    id: 10
});
toUpdate.toRemove[0].push({
    name: "removeThis1"
});
toUpdate.toAdd[1].push({
    name: "addThis2",
    id: 10
});
toUpdate.toRemove[1].push({
    name: "removeThis2"
}); 
```

那你可以试试

```
$.each(toUpdate, function(index, data) {
   $.each(data, function(key, val) {  // here this refer to toAdd, toRemove..
    console.log(key);   // here this point key of object like name, id ...
    console.log(val[key]);  // output: addThis, addThis, removeThis
  });
}); 
```

# mysql - MySQL GROUP BY 只返回第一行

> ID：10830660
> 
> 赞同：8
> 
> 时间：2012-05-31T09:16:23.373
> 
> 标签：mysql, group-by, phpmyadmin

我有一个名为`forms`以下结构的表-

```
GROUP       | FORM       | FILEPATH
====================================
SomeGroup   | SomeForm1  | SomePath1
SomeGroup   | SomeForm2  | SomePath2
------------------------------------ 
```

我使用以下查询-

```
SELECT * FROM forms GROUP BY 'GROUP' 
```

它只返回第一行-

```
GROUP       | FORM       | FILEPATH
====================================
SomeGroup   | SomeForm1  | SomePath1
------------------------------------ 
```

它不应该返回两者（或全部）吗？还是我（可能）错了？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-31T09:18:17.037

如[手册](http://dev.mysql.com/doc/en/group-by-hidden-columns.html)所述：

> 在标准 SQL 中，包含`GROUP BY`子句的查询不能引用选择列表中未在`GROUP BY`子句中命名的非聚合列。例如，这个查询在标准 SQL 中是非法的，因为`name`选择列表中的列没有出现在`GROUP BY`：
> 
> ```
> 选择o.custid，c.name，MAX（o.payment）
>   FROM 订单 AS o，客户 AS c
>   WHERE o.custid = c.custid
>   按 o.custid 分组；
> ```
> 
> 为了使查询合法，该`name`列必须从选择列表中省略或在`GROUP BY`子句中命名。
> 
> MySQL 扩展了 的使用，`GROUP BY`以便选择列表可以引用未在`GROUP BY`子句中命名的非聚合列。这意味着前面的查询在 MySQL 中是合法的。您可以使用此功能通过避免不必要的列排序和分组来获得更好的性能。但是，这主要在每个未在 中命名的非聚合列中的所有值`GROUP BY`对于每个组都相同时很有用。服务器可以从每个组中自由选择任何值，因此除非它们相同，否则选择的值是不确定的。

在您的情况下，MySQL 正确地执行了分组操作，但是（因为您选择了所有列，包括您未对查询进行分组的列）为您提供了每个组中不确定的一条记录。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-31T09:22:17.633

它只返回一行，因为您的`GROUP`列的值是相同的......这基本上是如何`GROUP BY`工作的。

顺便说一句，在使用`GROUP BY`其他列时使用聚合函数是一种很好的形式，例如`COUNT()`, `MIN()`, `MAX()`。在 MySQL 中，如果您只指定列名，它*通常会*返回每个组的第一行；其他数据库不会喜欢这样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-10T00:37:10.677

就mysql而言，我只是通过hit & trial解决了我的问题。

10分钟前我遇到了同样的问题。我正在使用这样的mysql语句：

```
SELECT * FROM forms GROUP BY 'ID'; // returns only one row 
```

但是，使用如下语句会产生相同的结果：

```
SELECT ID FROM forms GROUP BY 'ID'; // returns only one row 
```

以下是我的解决方案：

```
SELECT ID FROM forms GROUP BY ID; // returns more than one row (with one column of field "ID") grouped by ID 
```

或者

```
SELECT * FROM forms GROUP BY ID; // returns more than one row (with columns of all fields) grouped by ID 
```

或者

```
SELECT * FROM forms GROUP BY `ID`; // returns more than one row (with columns of all fields) grouped by ID 
```

教训：不要使用分号，我相信它会使用冒号进行字符串类型搜索。从列名中删除冒号，它将按其值分组。但是，您可以使用反引号转义，例如。`ID`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T09:20:38.070

你的代码：

```
SELECT * FROM forms GROUP BY 'GROUP' 
```

不是非常“好”的 SQL，MySQL 让您侥幸逃脱，只为 group by 子句中未提及的所有列返回一个值。几乎任何其他数据库都不会执行此查询。通常，任何不属于分组条件的列都必须与聚合函数一起使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T09:20:04.543

查询结果完美；它只会返回一行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-31T09:20:50.253

```
SELECT * FROM forms GROUP BY `GROUP` 
```

奇怪的是您的查询确实有效

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-31T09:21:57.347

上面的结果是正确的，但并不完全正确。

您选择的所有不属于`GROUP BY`语句的列都必须由某个函数聚合（[来自 MySQL 文档的聚合函数列表](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)）。大多数情况下，它们与数字列一起使用。

除此之外，您的查询将为`GROUP BY`语句中引用的列中的每个（组合）属性返回一个输出行。在您的情况下，该列中只有一个不同的值`GROUP`，即“SomeGroup”，因此输出将仅包含该值的一行。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-31T09:22:17.550

`Group by`仅当您在查询表达式中应用了任何组函数（例如`max`, `min`, `avg`,等）时才需要子句。`sum`您的查询未显示任何此类功能。这意味着您实际上不需要`Group by`子句。如果您仍然使用此类子句，您将只收到分组结果中的第一条记录。

因此，您查询的输出是完美的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-31T09:31:52.180

谢谢大家指出我太盲目看不到的明显错误。我终于替换`GROUP BY`并`ORDER BY`包含了一个`WHERE`子句来获得我想要的结果。这就是我一直打算使用的。傻我。

我的最终查询变成了这个-

```
SELECT * FROM forms WHERE GROUP='SomeGroup' ORDER BY 'GROUP' 
```

# asp.net-mvc - Ajax 调用导致一个奇怪的错误

> ID：10830663
> 
> 赞同：0
> 
> 时间：2012-05-31T09:16:34.510
> 
> 标签：asp.net-mvc, jquery

在我的应用程序中，我有一个编辑个人资料页面，您可以在下面看到；

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.master" 
Inherits="System.Web.Mvc.ViewPage<SHP.WebUI.Models.EmployeeViewModel>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Edit
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

    <% using (Html.BeginForm("Edit", "Employee"))
    {%>
        <%: Html.AntiForgeryToken()%>
        <%: Html.ValidationSummary(true)%>
        <fieldset>
            <legend>Edit Employee</legend>
             <% if (TempData["Message"] != null && TempData["Message"].ToString().Length > 0)
             { %>
                <p class="success">
                   At <% Response.Write(DateTime.Now.ToString("T")); %> 
                   you entered <%: TempData["Message"]%>.
                </p>
             <%} %>
            <table class="groupBorder" id="editTable">
                <tr>
                    <td style="text-align: right;"><%: Html.LabelFor(model => model.Employee.CompanyId)%></td>
                    <td>
                        <%: Html.DropDownListFor(model => model.Employee.CompanyId, Model.CompaniesSelectList)%>
                    </td>
                </tr>
                <tr>
                    <td style="text-align: right;">
                <%: Html.LabelFor(model => model.Employee.EmployeeNumber)%>
                   </td>                    
                    <td>
                <%: Html.TextBoxFor(model => model.Employee.EmployeeNumber,
                    new { maxlength = "4", style = "width:35px;text-transform: uppercase;" })%>
                <%: Html.ValidationMessageFor(model => model.Employee.EmployeeNumber)%>
                    <span class="error" id="errorMessage">
                        <% if (TempData["ErrorMessage"] != null)
                        { %>
                            <%: TempData["ErrorMessage"].ToString()%>
                        <% } %>
                    </span>
                    </td>
                </tr>

                <tr>
                    <td style="text-align: center;padding-top:20px;" colspan="2">
                    <input type="submit" value="Save"  id="btnSubmit"/></td>
                </tr>
            </table>
        </fieldset>

    <% } %>

    <div>
        <%: Html.ActionLink("Back to List", "List")%>
    </div>

    <script language="javascript" type="text/javascript">

        $(document).ready(function() {

            $("#Employee_CompanyId").change(function () {
                validateEmployeeNumber();
            });

            $("#Employee_EmployeeNumber").change(function () {
                validateEmployeeNumber();
            });
        });

        function validateEmployeeNumber() {
            var employeeNumber = $("#Employee_EmployeeNumber").val().toUpperCase();
            $("#Employee_EmployeeNumber").val(employeeNumber);
            if (employeeNumber.length == 0) {
                $('#errorMessage').text("Employee Number Required");
            }
            if (employeeNumber.length > 0) {
                $('#errorMessage').text('');
                $('#btnSubmit').attr("disabled", false);
                var companyId = $("#Employee_CompanyId").val();
                var employeeId = $("#Employee_EmployeeId").val();
                $.ajax({
                    data: { companyId: companyId, employeeNumber: employeeNumber, employeeId: employeeId },
                    dataType: "text",
                    success: function (data) {
                        if (data.length > 0) {
                            $('#errorMessage').text(data);
                            $('#btnSubmit').attr("disabled", true);
                        }
                    },
                    type: "POST",
                    url: '<%= Url.Action("ValidateEmployeeNumber", "Employee")%>'
                });
            }
        }
        </script>

</asp:Content> 
```

这里使用的控制器如下；

```
 [HttpPost]
    [Authorize(Roles = "Administrator, ManagerAccounts, ManagerIT")]
    public string ValidateEmployeeNumber(string companyId, string employeeNumber, string employeeId = null)
    {
        var cid = 0;
        var flag = int.TryParse(companyId, out cid);
        if (!flag)
        {
            return string.Empty;
        }

        var eid = 0;
        if (employeeId != null)
        {
            flag = int.TryParse(employeeId, out eid);
            if (!flag)
            {
                return string.Empty;
            }
        }

        if (Employee.ValidateEmployeeNumberFormat(employeeNumber) == false)
        {
            return "Invalid format";
        }

        var employeeNumberExists = Employee.GetEmployeeByEmployeeNumber(cid, employeeNumber, eid);
        return employeeNumberExists ? "Invalid Employee Number already in use." : string.Empty;
    } 
```

此页面本身已被编辑以显示我感兴趣的位。该页面使管理员能够编辑员工的个人资料，包括员工编号。对服务器的 Ajax 调用是为了检查员工编号是否唯一。现在在我的开发人员机器上，这适用于所有服务器；开发、测试和生产。但是对于一些在其他机器上工作的人来说，它不起作用。当他们尝试在生产服务器上编辑员工编号时，突然在 AJAX 调用后立即出现大量红色的 javascript 文本。为什么会发生这种情况，如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:27:37.577

我找到了答案。该问题是由控制器方法上的授权属性引起的。这个属性排除了一些用户，当他们使用 Ajax 服务时，他们得到了这个错误。我不得不说问题的症状，屏幕上显示的大量红色 javascript 文本，并没有给出任何问题可能是什么。

# java - 我将如何在更小的 appengine 查询计划器中打破这个索引？

> ID：10830664
> 
> 赞同：0
> 
> 时间：2012-05-31T09:16:35.177
> 
> 标签：java, google-app-engine

我有这个索引：

```
<datastore-index kind="Invoices" ancestor="false" source="manual">
    <property name="accountId" direction="asc"/>
    <property name="deleteStatus" direction="asc"/>
    <property name="status" direction="asc"/>
    <property name="date" direction="desc"/>
    <property name="number" direction="desc"/>
</datastore-index> 
```

...还有更多类似的，其中仅更改状态、日期或数字的方向，或者仅更改状态而不是状态，有对应 ID 或其他索引。无论如何，这种类型的索引太多了（28）。我想通过使用新的 appengine 查询计划器来减少数量。你会如何分解这个指数？以下是我目前使用的所有索引： ![要拆分的索引](../Images/8707d79185a0e589255091dfcb9cca92.png) 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:04:34.360

我认为要解决这个问题，您还需要知道您正在执行哪种查询，然后您可以删除您没有查询的索引。很难用你给的东西来回答。

如果您对代码进行了很多更改并针对此类发出了各种查询，那么您最终可能会得到很多索引。您可以摆脱不再使用的查询的旧索引。

# regex - 正则表达式：获取字符串文字之间的关键字列表

> ID：10830667
> 
> 赞同：-1
> 
> 时间：2012-05-31T09:16:41.697
> 
> 标签：regex

我有一个候选字符串：

```
{{keywords: "blah blah", "blah, blah blah", "blah, blah some other text"}} 
```

使用正则表达式，我将如何获取引用关键字的列表？

更新：

所以我试图用纯 PCRE 来完成这个，除非有人能想出一个表达式，否则我将不得不把它分成两个过程：

1.  检查整个文本是否包含关键字行：

    `{{keywords[ ]*([^}]+)}}`

2.  将生成的以逗号分隔的引用文本分成几部分：

    `"([^"]+)"+`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:18:56.480

就像是：

```
/\{\{keywords: "([^"]+)"/gc 
```

使用 Perl 约定。你知道，正确的语法很大程度上取决于你使用的语言，所以如果你能更具体一点，那会有所帮助。在 Perl 中，您可以分两步获得所需的内容：

```
string =~ /\{\{keywords: /c; 
```

this（由于`c`修饰符）将具有将正则表达式指针移动到 after 的效果`{{keywords:`；那么你会这样做：

```
/"([^"]+)"/gc 
```

# android - Asynctask 进度条未正确显示

> ID：10830668
> 
> 赞同：0
> 
> 时间：2012-05-31T09:16:41.890
> 
> 标签：android, android-asynctask

我有一门课，我必须在其中执行 3 个长操作。并且必须以 25%、50%、75% 和 100% 的间隔显示进度条。

由于操作使用 UI 线程，我不能将它们放在 DoinBackground 方法（）中。

我正在将操作置于 progressUpdate 方法中

代码

```
package com.integrated.mpr;

import org.apache.commons.math.linear.RealMatrix;
import org.apache.commons.math.stat.correlation.Covariance;
import org.apache.commons.math.stat.correlation.PearsonsCorrelation;
import org.apache.commons.math.util.FastMath;

public class Logic extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.progress);

        String x = "abc";
        new loadSomeStuff().execute(x);

    }

    public class loadSomeStuff extends AsyncTask<String,Integer,String>{

        ProgressDialog dialog;

        protected void onPreExecute(){

            dialog = new ProgressDialog(Logic.this);
            dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            dialog.setMax(100);
            dialog.show();

        }

        @Override
        protected String doInBackground(String... params) {
            // TODO Auto-generated method stub

            publishProgress(25);

            publishProgress(50);

            publishProgress(75);

            publishProgress(100);
            return null;

        }

        protected void onProgressUpdate(Integer...progress){

            if(progress[0]==25){

                dialog.incrementProgressBy(25);
                Log.d("now in ", "25 loop");

                // do some long work in loop1

                dialog.incrementProgressBy(25);
            }

            else if(progress[0]==25){

                dialog.incrementProgressBy(25);
                Log.d("now in ", "50 loop");

                // do some long work in loop2

                dialog.incrementProgressBy(25);
            }

            else if (progress[0] == 75){

                dialog.incrementProgressBy(25);
                // do some long work in loop3

            }
            else{
                dialog.incrementProgressBy(25);
            }
        }

        protected void onPostExecute(String result){

            dialog.dismiss();
            Intent openList = new Intent("com.integrated.mpr.SENSITIVELIST");
            startActivity(openList);

        }

    }   
} 
```

现在，当我运行此程序时，会出现一个空白屏幕，并且进度仅显示为 100%。我该如何纠正这个？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:28:11.293

首先，你犯了一些大错误。

onProgressUpdate 用于更新 UI，因此您不必在该方法上做一些长时间的工作。您必须在 doInBackground 中完成所有长时间的工作，当您完成其中的一部分时，您可以调用 onProgressUpdate 来更新 UI。

还

> 现在，当我运行这个时，会出现一个空白屏幕，并且进度显示为 100%

那是因为你没有做任何工作而且你的手机很快:P 尝试在每次调用 onProgressUpdate 时放置一个 Thread.sleep(1000) 下注 :)

比你会用真正的工作代替睡眠！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-31T09:21:26.610

您不应该使用 ui 线程来计算长操作。您的长操作应该在 doinbackground 中执行，这将在不同的线程中执行它们。

编辑：我认为问题是你真的想使用 ui 线程，无论你有什么原因。如果是这样的话，也许处理程序会更合适。

[http://developer.android.com/reference/android/os/Handler.html](http://developer.android.com/reference/android/os/Handler.html)

# android - 我的应用程序的 Logcat 输出从 logcat 输出中消失了

> ID：10830675
> 
> 赞同：0
> 
> 时间：2012-05-31T09:16:57.173
> 
> 标签：android, logcat

我的应用程序的 logcat 输出有问题：
通常记录到 logcat 有效。但有时我的应用程序的输出似乎完全从 logcat 输出中删除。虽然我可以证明应用程序已记录，但 logcat 中没有一行。

什么时候发生这种情况：
我安排我的应用程序在午夜通过 BroadcastReceiver 启动服务唤醒。应用程序唤醒并创建一个日志文件，通过调用一个写入两者的函数并行写入该文件和 logcat。日志文件包含 3 行写入。（然后应用程序莫名其妙地死了。）至少这 3 行也已记录到 logcat。
第二天，我显示所有 logcat 消息，包括午夜。没有为我的应用记录一行。

我认为 Android 已经从内存中清除了我的应用程序，并在午夜再次加载它（并且由于未正确初始化而崩溃）。但是为什么没有logcat输出呢？

谢谢你的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:49:00.753

Logcat 有大小限制。达到此限制后，旧消息将被清除，以便为新消息腾出空间。并不是说 Logcat 专门删除了您的应用程序的消息，而是在整夜运行的过程中，有很多其他消息会发送到 Logcat你的正在被删除。

要查看特定设备上的缓冲区大小，请将其插入并在 shell 窗口中执行以下命令：

```
adb logcat -g 
```

如果您需要在无法实际查看输出窗口的时间收集日志消息，那么您通过登录到文件来做正确的事情。我做了类似的事情，我将在构建上设置一个全局标志，告诉它是正常记录还是输出到手机上的本地文件。

# linux - 找到正确的数据包时停止 tshark 命令

> ID：10830676
> 
> 赞同：0
> 
> 时间：2012-05-31T09:16:59.933
> 
> 标签：linux, pcap, tshark

我有一个相当大的 Pcap 文件。我只想读取这个文件中的一个数据包，例如第 10 个数据包。

我有一个像这样的 tshark 命令：

```
tshark -r myfile.pcap frame.number == 10 -V 
```

即使找到第 10 个数据包，该命令也会继续搜索整个文件。这需要很长时间。

我更喜欢在找到数据包时停止命令，我该怎么做？

谢谢你的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T03:13:34.010

editcap（wireshark 软件包的一部分）可用于将一个或多个特定帧从 pcap 文件提取到新的 pcap 文件中。

然后，您可以在新文件上运行 tshark。（这是一个两步过程，但对于大型 pcap 文件，它比 tshark 读取整个文件所需的时间更少）。

```
Usage: editcap [options] ... <infile> <outfile> [ <packet#>[-<packet#>] ... ]

Packet selection:
  -r                     keep the selected packets; default is to delete them. 
```

请参阅`editcap -h`完整的`editcap`选项列表。

# ruby-on-rails-3 - 限制记录数

> ID：10830680
> 
> 赞同：0
> 
> 时间：2012-05-31T09:17:21.147
> 
> 标签：ruby-on-rails-3

我有以下

@articles = Article.find_all_by_published(true)

我如何将其限制为仅显示 3 条记录，但仍需要包含已发布（真实）条件

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:23:26.810

```
@articles = Article.limit(3).find_all_by_published(true) 
```

# html - 可以使用未知的 HTML 标签吗？

> ID：10830682
> 
> 赞同：47
> 
> 时间：2012-05-31T09:17:23.290
> 
> 标签：html

如果我弄错了，请纠正我，但是 AFAIK，标记中的未知 HTML 标记（即未在 HTML 规范中定义的标记，例如， ）最终将在 HTML 5 浏览器环境中`<foobar>`被视为常规。`<div>`

我在想：这种做法的支持程度如何？我的意思是，如果我在标记中使用未知的 HTML 标签，我会遇到什么陷阱？在接下来的几秒钟内，一只迅猛龙会[扑向我](http://xkcd.com/292/)吗？

我问的原因是，如果这些标签遵循`<div>`，我可能会以更语义化的方式使用这些标签，而不是分配标识模块的类名。[看看这篇文章，例如，一个`.media`类](http://www.stubbornella.org/content/2010/06/25/the-media-object-saves-hundreds-of-lines-of-code/)。现在，如果我不是将那个 CSS 写到 target `.media`，而是让它成为 target`<media>`怎么办？在我看来，这使得标记更具可读性和可维护性，但我承认它不是“正确的”HTML。

### 编辑

为了透明起见，我*确实*[从几年前](https://stackoverflow.com/questions/211394/when-to-use-custom-html-tags)发现了这个 SO 问题。它已被关闭为题外话，但我觉得我自己的措辞有一个有效的观点。我承认，这是一个很接近的副本，但它是几年前的事了，因此 Web 开发人员对该主题的看法可能已经发生了变化。

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2015-01-09T20:50:48.837

user1309389 有一个很好的答案，我同意对规范的呼吁。但我不同意他们的结论，我认为他们对导致“未定义行为”的虚构元素是错误的。我想提出另一种思考方式，根植于规范和浏览器*实际*处理组成元素的方式。

现在是 2015 年，我们正处于被广泛采用的[CustomElement](http://www.html5rocks.com/en/tutorials/webcomponents/customelements/)规范的边缘，并且 polyfill 很容易获得。现在是思考“制作自己的元素”的好时机。在不久的将来，您将能够以所有人都喜欢的完全标准和受支持的方式创建具有自己选择的标签和行为的新元素。但是，直到所有浏览器都使用它，并且直到大多数人都使用支持的浏览器，您才能利用[Polymer](https://www.polymer-project.org)或[X-Tags的辛勤工作](http://www.x-tags.org)项目以几乎标准且大多数人喜欢的方式检查自定义元素的未来。这可能是“正确的事情”。但这并没有回答你的问题，坦率地说，我发现“只使用 X”或“不要做 X”比“这是规范如何涵盖这一点，这是浏览器所做的”。所以，这就是我喜欢的。

反对大部分网络开发社区的衷心推荐（有时甚至是尖叫），在过去的一年里，我一直在使用“虚构”元素，在我所有的生产项目中，没有使用 polyfill，而且我已经（还）没有无法解决的问题，也没有投诉。如何？通过依赖[HTMLUnknownElement](http://ryanmorr.com/determine-html5-element-support-in-javascript/)的标准行为，W3C 规范的一部分涵盖了“组成”元素的情况。如果浏览器遇到无法识别的 HTML 元素，则应该有一种*定义明确且明确的*方式来处理它，而 HTMLUnknownElement 定义了该行为，您可以在此基础上进行构建。HTMLUnknownElement 还必须足够强大和*正确*以“不破坏网络”`<blink>`标签。不建议您使用 HTMLUnknownElement，但在理论上和实践中，如果您知道自己在做什么，那么这样做绝对没有坏处。

那么 HTMLUnknownElement 是如何工作的呢？它只是 HTMLElement 接口的扩展，它是所有 HTML 元素底层的标准接口。然而，与大多数其他元素不同的是，HTMLUnknownElement 没有添加任何特殊行为——你得到一个原始元素，没有任何特殊行为，也没有关于使用的限制规则。HTMLDivElement[接口](https://html.spec.whatwg.org/multipage/semantics.html#the-div-element)的工作方式几乎完全相同，扩展了 HTMLElement 并且几乎不添加任何其他行为。简而言之，组成自己的元素*几乎*与使用 div 或 span 相同。

我喜欢“化妆”元素的地方在于思维方式的转变。您应该根据几个因素来使用**或发明**HTML 元素，范围从它使标记阅读的清晰程度、浏览器和屏幕阅读器以及搜索引擎如何解析您的代码，到您的代码被某些人“正确”的可能性有多大客观的衡量。我很少使用虚构的元素，但我完全按照 Richard 所描述的方式使用，以使内容对 HTML 的作者更有意义，而不仅仅是对提取元数据的计算机服务有意义。当在整个团队中以一致的方式使用时，可能会有很大的好处，因为组成的元素可以简洁地表达它们的用途。

我特别喜欢使用虚构的元素来指示我何时将使用 JS 来定义元素的额外行为。例如，如果我有一个元素将通过 JS 添加/删除子元素，我将使用一个虚构的元素作为该元素受特殊行为影响的线索。出于同样的原因，当标准元素就足够时，我不会使用虚构元素。你会在我的代码中看到`<dynamic-list>`快乐地生活在旁边。`<div>`

现在，关于那些讨厌的验证器。是的，使用虚构元素不是“有效的”，因为它不会通过“验证器”。但是现代 HTML 和 JS 开发的许多常用特性、模式和系统都无法通过所有 W3C 验证器。验证者不是法律——规范才是。并且法律没有约束力——所有浏览器中的实现都是。多年来，随着 HTML 的灵活性不断提高，以及浏览器与规范的关系发生了变化，验证器的效用一直在减少。验证器非常适合不熟悉 HTML 并需要指导的人。但是，如果您愿意从规范和浏览器实现中获得指导，则没有理由担心被验证器不及格。当然，如果您遵循 Google、Apple、Microsoft 等提供的许多指南来实施任何实验性功能，那么您将在验证器的范围之外工作。这绝对是一件好事，只要你是故意这样做的，并且你对自己在做什么有足够的了解。

因此，如果您要构建自己的元素并依赖 HTMLUnknownElement，请不要将其视为狂野的西部。您需要遵循一些简单的规则。

1.  您必须在标签名称中使用连字符。如果您这样做，则保证您永远不会与 HTML 规范的未来版本发生冲突。所以永远不要说`<wrong>`，永远说`<quite-right>`。

2.  组成的元素不能自动关闭——你必须用结束标签来关闭它们。你不能只说`<wrong>`或`<still-wrong />`，你必须说`<totally-good></totally-good>`。

3.  您必须`display`在 CSS 中为您的元素定义一个属性，否则呈现行为是未定义的。

就是这样。如果你做这些事情，你应该很好地在 IE9 及更高版本中使用虚构的元素，依靠 HTMLUnknownElement 的安全网。对我来说，好处远远超过成本，所以我一直在大量使用这种模式。我经营着一个面向主要工业公司的 SaaS 网站，到目前为止，我没有遇到任何问题或投诉。如果您必须支持旧版本的 IE，明智的做法是远离任何“2015”技术或其粗略的近似值，并安全地留在规范中被广泛使用的部分。

因此，总而言之，您的问题的答案是“是的，如果您知道自己在做什么”。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-31T09:24:12.883

您应该始终按照其各自规范中定义的方式处理 HTML。“定义”新标签有点极端。它可能会通过浏览器检查，因为它实现了各种故障保护，但不能保证这一点。充其量，您正在进入未定义行为的领域。更不用说您将无法通过验证测试，但您似乎已经意识到这一点。

如果您希望在标记中更具语义表达，您可以使用 HTML5，它定义了很多更具描述性的标签来描述您的页面结构，而不是`div`需要附加`id`s 或`class`es 的通用 s。

最后，一个简短的回答：不，这是不好的做法，你不应该这样做，并且在你的开发后期可能会出现无法预料的问题。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-31T09:21:02.230

不，您将无法通过验证，您将在浏览器中遇到随机问题，您将被上述恐龙吃掉。如果您希望页面的行为可预测，CSS 就是答案。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-01-28T06:54:37.210

**是的，我们可以**。

有一个关于自定义元素/标签的新规范 - [http://w3c.github.io/webcomponents/spec/custom/](http://w3c.github.io/webcomponents/spec/custom/)。

唯一的问题是你必须使用 js 来注册你的新元素

您可以在以下位置阅读更多相关信息

[https://developers.google.com/web/fundamentals/getting-started/primers/customelements](https://developers.google.com/web/fundamentals/getting-started/primers/customelements)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-31T09:29:27.250

浏览器互操作性的规则 #1 是：不要有错误。无论您在多少个浏览器中进行测试，总有一些浏览器是您无法测试的，例如因为它们还不存在。此外，目前大多数浏览器都不
会将未知元素视为。`<span>``<div>`

如果它真的是你所追求的源代码可读性（*），你应该研究 XML+XSLT。
这样，您可以使用您想要的所有标签名称，并使它们以您喜欢的任何方式运行，您不必担心这`<media>`将成为未来 HTML 版本中的真正元素。

一个很好的现实世界的例子是 element `<picture>`。如果一个网站曾经使用`<picture>`并依赖于这个元素本身没有样式或特殊内容的概念，那么他们现在就有麻烦了！

(*) 使用 XML+XSLT，可读性显然在 XML 部分，而不是 XSLT 部分。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-31T09:31:16.573

通常不推荐，例如 IE 不会将 css 样式应用于未知标签。

所有其他浏览器将未知标签呈现为`inline`-Elements（这会导致嵌套问题）。

我向您推荐以下文章：[http](http://diveintohtml5.info/) ://diveintohtml5.info/有一个关于未知标签的部分。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-10-15T12:17:47.237

在我的例子中，我在我的 Webkit 驱动的游戏 GUI 系统中使用了很多它们，并且一切正常。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-01-24T16:18:14.437

W3C 说：

> HTML5 支持将未知标签作为内联元素，但它建议为其设置 CSS 样式。

这里是来源：[https ://www.w3schools.com/html/html5_browsers.asp](https://www.w3schools.com/html/html5_browsers.asp)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-31T09:27:07.650

在您正在谈论的示例中`<media>`，它可能很棒，但如果 html6 为另一个元素添加此标签，您的代码将不兼容。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-10-06T08:08:21.517

让我担心的一个缺点是，如果我现在使用的自定义标签在明年甚至以后成为官方 HTML 标签怎么办？

因此如何：而不是自定义标签使用 'div' + 自定义 CSS 类。

CSS-classes 是自定义的，拥有自己的自定义 CSS-classes 绝对没问题。然后，您的 div 可以进一步具有与其关联的任意数量的 CSS 类，从而使语义机制更加灵活，您可以将其称为多重继承。

您可以使用 span 而不是 div 用于相同目的。实际上我想使用更短的东西，比如 p 但不幸的是 p 有它自己的特殊行为，如果你不关闭它会发生什么。

但是如果你走的是用 CSS 类表达语义的路线，那么使用尽可能短的标签名确实会有所帮助。我希望有比 div 更短的东西，例如 t 表示“标签”。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-03-19T10:18:31.033

默认情况下，自定义元素是许多 JavaScript 框架的主要部分。它是现代 javascript 中最先进的：

```
var XFoo = document.registerElement('x-foo', {
  prototype: Object.create(HTMLElement.prototype)
}); 
```

[https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements](https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements) [https://www.html5rocks.com/en/tutorials/webcomponents/customelements/](https://www.html5rocks.com/en/tutorials/webcomponents/customelements/)

*可以使用未知的 HTML 标签吗？*如果你问错了问题，你总是得到错误的答案。如果您使用 javascript 将未知标签定义为 CustomeElement ，则您的未知标签不再是 HTML5/HTML 定义的一部分。

是的，如果您在 javascript 中定义标签，您可以使用未知标签。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2015-11-28T08:29:04.567

明智地使用 < !-- *your stuff here* -- > 有什么问题。它适用于白垩纪-古近纪边界时期的脚本。恐龙在那个时候不再是一个问题，除了会飞的有羽毛的品种。

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2012-05-31T09:19:31.757

这是不好的做法，你不应该这样做。在大多数情况下，浏览器将其呈现为 div 作为后备解决方案，但它不是有效的 html，因此永远不会通过有效性测试。

# memory - 为什么 OpenCL 内核中的死代码会影响 Nvidia GTX550ti？

> ID：10830686
> 
> 赞同：0
> 
> 时间：2012-05-31T09:17:33.177
> 
> 标签：memory, opencl, nvidia

我在 GTX550ti 显卡上使用 Nvidia 的 OpenCL 开发软件，遇到了一个奇怪的问题。（我是 OpenCL 的新生）。

我的内核代码是这样的：

```
__kernel void kernel_name(...)
{
size_t d = get_local_id(0);
char abc[8];
...
} 
```

实际上，`char abc[8]`对于我的情况来说，这是无用的（死代码）。但是，如果我的`char abc[8]`内核代码中有 ，结果将完全混乱，内核的运行时间会更长（2095712 ns）。如果我将 注释掉`char abc[8]`，结果就会正确，内核的运行时间会变短（697856 ns）。内核的编译器不会清除死代码吗？

以上只是一个明确的例子，我可以重复。我还遇到过更奇怪的情况，即一个程序在完全相同的环境中在不同时间运行时会得到不同的结果。

这与内存分配有关还是..？任何人都可以就如何找到问题给我一些建议？

对了，oclDeviceQuery输出信息如下：Platform Version = OpenCL 1.1
CUDA 4.2.1,
SDK Revision = 7027912

我的操作系统是 Windows XP。

今天是2012-07-17，我想我已经解决了这个问题。

1.  不要在内核源文件中使用#include。

2.  不要在内核源文件中使用超长行（例如，您编写程序为内核源文件生成一些行数据）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:09:39.117

你是对的，这应该不会影响任何事情。

不过，这不是您的真实代码，而且我怀疑考虑到这些运行时间，您的内核并不是一件简单的事情。可能您将本地人推到某个限制之上，这意味着变量必须存储在一些较慢的内存中，这会延长您的运行时间。

如果您在某处有未初始化的变量错误，类似的事情也可能导致行为改变。在快速商店中，它碰巧得到了一个有效的值。在慢商店里，它得到了别的东西。

要检查这个理论，我会尝试删除一些其他本地数据结构，看看它是否具有相同的效果。任何其他 8 字节或更大的字节都应该具有相同的效果。

* * *

...当然，您可能在 OpenCL 实现中发现了一个错误，但这很容易检查。只需为不同的 OpenCL 设备编译内核，例如 CPU。无论如何这都是值得的，因为不同的编译器会处理不同的问题。

除此之外，我认为您又回到了标准调试技术。

* * *

顺便说一句：在您的问题中，您有时会调用数组`abs[8]`而不是`abc[8]`. 我认为这是一个错字，但如果不是，那可能是你的问题，因为名称会与函数`abs`发生冲突。`abs()`这可能会使愚蠢的编译器感到困惑。

# canvas - 画布-您可以将坐标设置为新的零点以相对于定位元素吗？

> ID：10830687
> 
> 赞同：0
> 
> 时间：2012-05-31T09:17:45.367
> 
> 标签：canvas, positioning

我目前正在开发一个小游戏以熟悉画布的东西 - 现在我有一个这样的菜单类

```
function Menu(x,y,width,height,...,game){
    this.x      = x;
    this.y      = y;
    this.width  = width;
    this.height = height;
    // ...

    this.render = function(){
        game.stage.fillRect(this.x, this.y, this.width, this.height); // draw background
        // ...
        game.stage.fillText("MENU", this.x + 20, this.y + 10);
    }
} 
```

是否可以将`this.x`和 设置`this.y`为某种默认值，这样我就不必`this.x + ...`每次想在菜单中定位某些东西时都写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:05:05.273

只需在菜单绘制功能开始时将您的场景转换到菜单位置（this.x，this.y）。之后不要忘记重置它。

我假设`game.stage`是一个画布上下文对象。

```
game.stage.save();
game.stage.translate(this.x, this.y);

// now (0, 0) becomes (this.x, this.y)
// ... some drawings

game.stage.restore(); 
```

# java - 需要正则表达式的帮助

> ID：10830690
> 
> 赞同：0
> 
> 时间：2012-05-31T09:18:07.077
> 
> 标签：java, regex

我正在检查 JTextfield 值，它应该是**XX.YY.Z**格式

**`10.01.5`**

开头或之后不允许有空格。

**编辑：-**

如何将 Last 指定为字母数字字符，即**Z**可以是数字或字符

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:19:33.360

`\d`匹配一个数字，`\.`匹配一个点。

```
\d\d\.\d\d\.\d 
```

即`"\\d\\d\\.\\d\\d\\.\\d"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:44:22.367

我在 Java 方面没有太多经验，但这就是我在 PHP 中所做的。

```
^\d\d.\d\d.\d$ 
```

**\d**代表一位，**\d\d**代表两位

**^**插入字符是为了确保它必须以数字开头（开头没有空格）

**$**美元符号确保末尾没有空格或其他字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T09:49:42.690

你可以使用量词

```
\d{2}\.\d{2}\.\d 
```

这就是指示，您的正则表达式变得更易于阅读和更改。

更多关于[量词](http://docs.oracle.com/javase/tutorial/essential/regex/quant.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-08T19:21:59.590

\d 代表 1 位数字

\。代表一个点字符

[a-zA-Z0-9] 表示字母数字字符。

因此，您可以将正则表达式设置为**\d\d​​.\d\d.[a-zA-Z0-9]**。

java中的正则表达式将是**“\d\d\.\d\d\.[a-zA-Z0-9]”**，因为**\**必须在java字符串中转义。

# asp-classic - 在经典 ASP 站点中使用 WinHttp.WinHttpRequest.5.1 时出现 HTTP 错误 401.1

> ID：10830692
> 
> 赞同：1
> 
> 时间：2012-05-31T09:18:10.107
> 
> 标签：asp-classic, ntlm, winhttprequest

**一般信息**

**操作系统**：Windows Server 2003 R2 Service Pack 2

**网络服务器**：IIS 6

**NTAuthenticationProviders**：仅 NTLM

**网络应用程序**：经典 ASP

**使用的浏览器**：IE7、IE8、IE9

**在名为eblcplaza**的 IIS 网站中有一个名为**Knowledgebase**的经典 ASP Web 应用程序，如下所示：eblcplaza/knowledgebase/。

eblcplaza 已启用匿名访问和集成 Windows 身份验证。知识库禁用匿名访问并启用集成 Windows 身份验证

知识库是一个经典的 ASP 应用程序，有自己的应用程序池，在预定义的应用程序池标识“网络服务”下运行</p>

当我用我的 NT 帐户登录时，我可以访问任何我想要的页面。问题出在 WinHttp.WinHttpRequest.5.1 组件上。它在知识库的某些部分中用于执行服务器端请求，以从驻留在 Web 应用程序中的某些 .asp 脚本中检索内容。

当在知识库上关闭匿名访问时，问题就开始了。 **请注意**，重新打开它不是一种选择。

使用 WinHttpRequest 的请求示例：

```
set WinHTTPRequest = Server.CreateObject("WinHttp.WinHttpRequest.5.1")

WinHTTPRequest.SetTimeouts 20000, 20000, 20000, 20000

call WinHTTPRequest.Open("POST", someUrlToAspScript, false) 

WinHTTPRequest.SetAutoLogonPolicy 0                 

WinHTTPRequest.setRequestHeader "Content-Type", "application/x-www-form-urlencoded"

WinHTTPRequest.Send strQueryString

Response.Write(WinHTTPRequest.ResponseText) 
```

将 SetAutoLoginPolicy 设置为 0，我在使用 WinHttpRequest 的页面上收到以下错误消息：

**您无权使用您提供的凭据查看此目录或页面。HTTP 错误 401.1 - 未经授权：由于凭据无效，访问被拒绝。互联网信息服务 (IIS)**

将 SetAutoLoginPolicy 设置为 2（不要根据 MSDN 自动发送用户凭据），我在使用 WinHttpRequest 的页面上收到以下错误消息：

**您无权使用您提供的凭据查看此目录或页面，因为您的 Web 浏览器正在发送 Web 服务器未配置为接受的 WWW-Authenticate 标头字段。HTTP 错误 401.2 - 未经授权：由于服务器配置，访问被拒绝。**

我知道我的 NT 用户帐户具有访问这些 .asp 脚本的适当权限这一事实，网络服务帐户也是如此。

我试图找出可能是什么问题几天才知道，尝试将 NTAuthenticationProviders 设置为仅 NTLM 以及 Negotiate 和 NTLM 等，但到目前为止没有任何效果。

请帮帮我，它开始让我发疯。

问候，

巴特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T21:29:42.223

First of all let's clear up what it is you asking the server to do. It will have demanded your credentials from the client with which it is now impersonating you for security purposes. The WinHTTP request it is making to a service (WinHTTP doesn't know that its the exact same application) that now demands credentials. What you want this impersonating thread to do is use your creds to authenticate against an "external" service.

I suspect that what is happening here is that the server is not cleared to re-use your credentials in this way. If I recall correctly (which may not be that certain) a server needs to be granted the right to delegate in order to do that. It may also be possible to allow this if Kerberos is used instead of NTLM to perform windows integrated security.

However all that may be academic. You should understand that an app making a http request to itself has the potential to hang when under load in a way that would require a recycle to release.

Consider this alternative. Given that ServicePage.asp is a page used both directly by the browser and by an internal ClientPage.asp do the following.

Rip out the service code from ServicePage.asp and place in a VBScript class in a new ServiceInclude.asp. Now add the this ServiceInclude.asp as an include file in ServicePage.asp where ServicePage.asp only contains the plumbing necessary to instance the class and use it to generate its output.

Modify ClientPage.asp so that instead of attempting WinHttp to ServicePage.asp it simply includes the ServiceInclude.asp, instances the contained class and uses the class to provide the service required.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:54:18.903

我猜知识库中的页面是通过您从 eblcplaza 开始的匿名帐户访问的。尝试仅在您使用请求的 eblcplaza 页面上启用 NTLM，您只能在该文件上执行此操作。就像您的凭据被传递到知识库一样。在两个页面上都记录 Session("username") 变量。

# java - 在 servlet 中识别 html 表单或其编码（文本或文件）

> ID：10830693
> 
> 赞同：2
> 
> 时间：2012-05-31T09:18:11.350
> 
> 标签：java, forms, servlets, apache-commons-fileupload, enctype

如何在 servlet 中识别使用 HTML 表单发送的请求是 enctype`multipart/form-data`还是 default `application/x-www-form-urlencoded`？

或者：有没有其他方法可以识别使用了哪种形式？`request.getParameter("some_param")`仅适用于默认编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:52:19.250

`Content-Type:`您可以使用标头识别

```
if(HttpServletRequest.getContentType().contains("form-data")){
   //handle multipart data
 ....
} else if(HttpServletRequest.getContentType().contains("x-www-form-urlencoded")){
   //handle from data
 ....
} 
```

如果 Web 容器支持**Servlet 3.0，则使用 HttpServletRequest.getParts() API。**

```
if(request.getParts() !=null){
  //handle multipart
} else {
  //handle form data
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:34:25.063

> *我正在将 Apache Commons FileUpload 用于多部分，但不确定如何在处理多部分和默认表单之间切换*

使用 Apache Commons FileUpload 自己的[`ServletFileUpload#isMultipartContent()`](http://commons.apache.org/fileupload/apidocs/org/apache/commons/fileupload/servlet/ServletFileUpload.html#isMultipartContent%28javax.servlet.http.HttpServletRequest%29)来检查它。

```
if (ServletFileUpload.isMultipartContent(request)) {
    // Parse with FileUpload.
}
else {
    // Use normal getParameter().
} 
```

### 也可以看看：

*   [Apache Commons FileUpload 用户指南](http://commons.apache.org/fileupload/using.html)

# macos - 为什么我的 rsync 脚本每次都进行完整备份？

> ID：10830695
> 
> 赞同：2
> 
> 时间：2012-05-31T09:18:14.067
> 
> 标签：macos, backup, rsync

我创建了以下 rsync 脚本来执行增量备份：

```
rsync -arv --exclude-from '/usr/bin/exclude-list.txt' --delete /Volumes/DOCS/ /Volumes/BKUP1/DOCS/ 
&& rsync -arv --delete /Volumes/Webserver/ /Volumes/BKUP1/Webserver/ 
```

我的排除列表是

```
/Volumes/Webserver/.Spotlight-V100
/Volumes/Webserver/.Trashes
/Volumes/Webserver/.fseventsd 
```

每次我运行这个备份。尽管 rsync 应该是增量备份解决方案，但它似乎每次都会遍历并复制所有文件。

EG 第一次运行：

```
....
sites/website/sites/all/libraries/tinymce/jscripts/tiny_mce/plugins/style/js/.svn/prop-base/
sites/website/sites/all/libraries/tinymce/jscripts/tiny_mce/plugins/style/js/.svn/props/
sites/website/sites/all/libraries/tinymce/jscripts/tiny_mce/plugins/style/js/.svn/text-base/
.... 
```

第二次运行：

```
....
sites/website/sites/all/libraries/tinymce/jscripts/tiny_mce/plugins/style/js/.svn/prop-base/
sites/website/sites/all/libraries/tinymce/jscripts/tiny_mce/plugins/style/js/.svn/props/
sites/website/sites/all/libraries/tinymce/jscripts/tiny_mce/plugins/style/js/.svn/text-base/
....
etc... 
```

再次复制相同的文件。此外，我经常遇到以下权限被拒绝错误，尽管它们在我的排除参数中被忽略：

```
building file list ... rsync: opendir "/Volumes/Webserver/.Spotlight-V100" failed: Permission denied (13)
rsync: opendir "/Volumes/Webserver/.Trashes" failed: Permission denied (13)
rsync: opendir "/Volumes/Webserver/.fseventsd" failed: Permission denied (13) 
```

有任何想法吗？我希望我可以调整这个脚本，所以它只会复制修改过的/新文件，并告诉我这些文件在详细输出中是什么文件。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T16:21:25.963

我自己也遇到了这个。尽管这听起来很愚蠢，但我能想到的最好的办法是文件的时间戳没有被保留。然后，当您再次执行此操作时，它会认为“嘿！这些时间戳不匹配 - 更好地同步它们！” 如果您使用 -t 选项，它将发送时间戳，然后文件将被视为相同

或者，您可以使用“仅大小”选项，如果您确定没有您修改过但大小相同的文件，这听起来很像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:49:05.977

您是否从不同格式的驱动器复制到 FAT32 驱动器？我的理解是 FAT32 保留一个 16 位时间戳，它只允许大约两秒的分辨率，这远不如其他驱动器格式精确。默认情况下，rsync 要求时间戳完全匹配，因此几乎每个文件都会通过此测试并被重新复制。

要解决此问题，您需要让 rsync 从源传递时间戳为 +/-1 秒（总范围为 2 秒）的文件。你通过添加来做到这一点

```
--modify-window=1 
```

到 rsync 命令。

# jsf - 来自支持 bean 的动态内容不会在视图中立即更新

> ID：10830702
> 
> 赞同：1
> 
> 时间：2012-05-31T09:18:37.370
> 
> 标签：jsf, jpa, primefaces

我正在开发一个 Java EE 应用程序，用户可以在其中注册一些单元。我希望在用户登录时每个单元都显示在单独的选项卡上。

```
<p:tabView id="unitTabs" cache="false" var="unit" value="#{getUnitsOfLoggedInUser(loginController.checkedUser)}"> 
        <p:tab id="unitTab" title="#{unit.unitName}">  

            //content here

        </p:tab>  
</p:tabView> 
```

在backing bean中我有这个方法

```
public List<Unit> getUnitsOfLoggedInUser(User user) {
    unitsOfLoggedInUser = (List<Unit>) user.getUnitCollection();
    return unitsOfLoggedInUser;
} 
```

但是，如果用户创建一个新单元，则不会立即呈现新选项卡。即使我刷新页面，它仍然不显示。但是，如果我重新启动服务器并再次运行，新选项卡将在那里。似乎它具有一些缓存属性，并且不会在每次调用时加载。

此外，当我调试代码时，该方法`getUnitsOfLoggedInUser(user)`在页面呈现之前被多次调用。

我也尝试过使用 JSF 数据表，但它的行为相同，所以这不是 Primefaces 库的问题

有没有人有任何建议我该如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T09:34:29.450

答案取决于您保存新单位的方式。`user`一种选择是在保存新单位后刷新实体。在任何情况下你都可以

```
em.refresh(user); 
```

保存后，`em`您的`EntityManager`.

更新：

您还可以将新单元添加到用户的集合中，然后合并/编辑用户，而不是直接创建新单元。然后您不需要刷新用户，因为您手动将单元添加到集合中。

# css - 带有 CSS 的凸版印刷效果

> ID：10830703
> 
> 赞同：9
> 
> 时间：2012-05-31T09:18:37.600
> 
> 标签：css

我想制作这样的凸版效果： ![http://img208.imageshack.us/img208/6421/letterpress.png](../Images/1a22308a32e53be93bf0042d49330d14.png) 在 CSS 中。但我似乎找不到合适的文字阴影。

单词颜色：#2f4050 背景颜色：#4f6478

我试过了：

```
.letterpress {
    color:#2f4050;
    font-family:Tahoma, Helvetica, Arial, sans-serif;
    font-size:70px;
    font-style:normal;
    font-variant:normal;
    font-weight:normal;
    line-height:normal;
    text-align:center;
    text-shadow:#4f6478 0 1px 5px; 
} 
```

但这似乎并没有奏效。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T09:33:34.723

```
.letterpress {
    color:#2f4050;
    font-family:Tahoma, Helvetica, Arial, sans-serif;
    font-size:70px;
    text-align:center;
    text-shadow: 0 1px 1px #fff; 
} 
```

那应该这样做。顺便提一句。您不必声明“正常”值对

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T09:34:23.970

有两个影子。尝试类似的东西

```
text-shadow: 1px 1px rgba(255,255,255,0.2), -1px -1px rgba(0,0,0,0.5); 
```

这应该在右下角给出一个透明的白色阴影，在左上角给出一个透明的黑色*内阴影。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T09:32:12.097

为阴影使用较浅的颜色，并减少模糊。就像是：

```
text-shadow: 1px 1px 2px #6ab; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T09:33:07.483

您的文本阴影与背景颜色相同。您应该使用较浅的颜色，例如`#809bb5`. 或者您可以使用 rgba 值，例如`text-shadow: 0 1px 5px rgba(255,255,255,0.4);`。最后一个数字是 alpha 透明度（不透明度）。

我稍微调整了阴影...... [http://jsfiddle.net/qmqF5/](http://jsfiddle.net/qmqF5/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T09:36:52.300

这里的问题很简单。

您为背景颜色和文本阴影提供相同的颜色。

与背景和文本颜色相比，为文本阴影提供更浅的颜色解决了这个问题。

谢谢你。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-12-22T10:29:30.287

要创建凸版效果，我们需要添加比文本颜色更浅的阴影，以确保效果正常工作。

# ios - iPad 2 与新 iPad 上 CGLayerCreateWithContext 的奇怪行为？

> ID：10830705
> 
> 赞同：0
> 
> 时间：2012-05-31T09:18:42.483
> 
> 标签：ios, uiview, core-graphics, cglayer, graphicscontext

在 Single View App 中，FooView 是主视图。在 FooView 中`drawRect`，如果我这样做了

```
if (!self.layer1) {
    CGContextRef context = UIGraphicsGetCurrentContext();
    NSLog(@"current context is drawRect is %@", context);

    self.layer1 = CGLayerCreateWithContext(context, self.bounds.size, NULL);
    NSLog(@"layer1 is %@", self.layer1);

    self.context1 = CGLayerGetContext(self.layer1);

    CGContextSetFillColorWithColor(self.context1, [[UIColor orangeColor] CGColor]);
}

CGContextRef context = UIGraphicsGetCurrentContext();

NSDate *start = [NSDate date];
CGContextDrawLayerAtPoint(context, CGPointZero, self.layer1);
NSTimeInterval timeInterval = -[start timeIntervalSinceNow];
NSLog(@"It took %f to draw", timeInterval); 
```

我正在使用 a`CADisplayLink`来调用`[self.view setNeedsDisplay]`在视图控制器中调用的方法，以便使用该属性`drawRect`每 1 帧、5 帧或 20 帧调用一次。`frameInterval`

在 iPad2 上，当 CGLayer 被数百个 6x6 点矩形填充时，绘制时间约为 0.011 到 0.012 秒，如 NSLog 语句所打印的那样。这能够达到60fps。（60fps 是每帧 0.01666 秒）

如果我将行更改为：

```
 self.layer1 = CGLayerCreateWithContext(NULL, self.bounds.size, NULL); 
```

（使用`NULL`代替`context`）。然后时间大约是 0.014 秒，对于 60 fps 来说还是不错的。

但在新 iPad 上，情况正好相反：如果`context`在这条线上使用，那么时间是惊人的 0.17 秒……这对于 6 fps 来说都不好。如果`NULL`使用，那么时间是0.038，对于60 fps来说是不好的，但至少对于20 fps来说是好的，还是可以接受的。有谁知道它为什么会这样，以及如何让它在 iPad、iPad 2 和新 iPad 的所有平台上运行良好或更好地运行？

如果调用`CGLayerCreateWithContext`with`NULL`给出了 GPU 缓存的图形上下文，调用 with`context`给出了位图上下文，那么为什么在 iPad 2 上调用`CGLayerCreateWithContext`with实际上更快`context`？

（我在新 iPad 上使用 iOS 5.1.1，在 iPad 2 上使用 iOS 5.1 ......这应该没有太大区别......而且我不想升级 iPad 2 以便我可以拥有另一个具有不同 iOS 版本的设备来测试我的应用程序）。

# ruby-on-rails - Bundler 找不到兼容版本的 gem

> ID：10830707
> 
> 赞同：3
> 
> 时间：2012-05-31T09:18:45.363
> 
> 标签：ruby-on-rails, gem

我的本地宝石是：

```
actionmailer (3.2.4.rc1, 3.2.3)
actionpack (3.2.4.rc1, 3.2.3)
activemodel (3.2.4.rc1, 3.2.3)
activerecord (3.2.4.rc1, 3.2.3)
activeresource (3.2.3)
activesupport (3.2.4.rc1, 3.2.3)
arel (3.0.2)
builder (3.0.0)
bundler (1.1.3)
coffee-script-source (1.3.3)
erubis (2.7.0)
hike (1.2.1)
i18n (0.6.0)
journey (1.0.3)
json (1.7.3)
mail (2.4.4)
mime-types (1.18)
multi_json (1.3.6)
polyglot (0.3.3)
rack (1.4.1)
rack-cache (1.2)
rack-ssl (1.3.2)
rack-test (0.6.1)
rails (3.2.3)
railties (3.2.4.rc1, 3.2.3)
rake (0.9.2.2)
rdoc (3.12)
rubygems-bundler (1.0.2)
rvm (1.11.3.3)
sprockets (2.1.3)
thor (0.14.6)
tilt (1.3.3)
treetop (1.4.10)
tzinfo (0.3.33) 
```

我的 Gemfile 看起来像：

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'

group :development, :test do
  gem 'sqlite3' ,'1.3.6'
  gem 'rspec-rails', '2.10.0'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.4'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
end

gem 'jquery-rails' ,'2.0.0'

group :test do
   gem 'capybara' , '1.1.2'
end

group :production do
  gem 'pg' , '0.12.2'
end 
```

但是在执行时`bundle install --without production`，我得到

```
Bundler could not find compatible versions for gem "railties":
  In Gemfile:
    rails (= 3.2.3) ruby depends on
      railties (= 3.2.3) ruby

    jquery-rails (= 2.0.0) ruby depends on
      railties (3.2.4.rc1) 
```

即使我可以在本地 gem 中看到 railties 3.2.3 和 3.2.4.rc1，为什么 bundle 无法安装 jquery-rail 2.0.0。当我已经安装了 Rails 3.2.3 时，它为什么要我安装这个版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:59:07.910

我遇到了类似的问题，我能够通过注释掉导致依赖问题的 gem(s) 来解决它，运行`bundle`，取消注释 gem(s)，然后`bundle`再次运行。

在你的情况下，我会尝试评论和取消评论`jquery-rails`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:05:03.803

是的，但是 bundler 不会让你使用两个不同版本的 gem。你有一个版本依赖冲突，因为`rails 3.2.3`依赖`railties 3.2.3`和`jquery-rails 2.0.0`依赖`railties 3.2.4.rc1`.

您应该使用旧`jquery-rails`版本或新`rails`版本。

# jquery - jquery .load() 加载整个页面而不是一个元素。是对的吗？

> ID：10830712
> 
> 赞同：2
> 
> 时间：2012-05-31T09:19:20.680
> 
> 标签：jquery, jquery-load

如果我这样做：

```
$('#myDiv').load('/somepage.aspx #someDiv #someOtherDiv', function(data){
    console.log(data);
}); 
```

在控制台中，我看到了整个页面代码，而不是#someDiv #someOtherDiv 的内容。

是对的吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:21:07.480

是的，这是正确的。jQuery 加载整个页面，但仅从中获取请求的元素（在您的情况下为#someDiv #someOtherDiv）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:22:54.250

当然，

jQuery 不能要求**服务器**从整个 HTML 文档中提取该元素。它首先加载 HTML 文档，然后在客户端执行选择并返回该片段。

# java - 使用 opentok 在不同应用程序之间进行视频聊天

> ID：10830722
> 
> 赞同：1
> 
> 时间：2012-05-31T09:19:58.557
> 
> 标签：java, audio, video, chat

我正在构建一个 Web 应用程序，它将在每个用户的 PC 上本地运行（使用 Jetty 应用程序服务器的本地 Web 服务器）。我希望用户能够使用视频和音频相互交谈（一对一，而不是群组）。用户可以以 p2p 方式在彼此之间交换消息，但他们没有将托管一个应用程序的中央服务器。这可能吗？用户可以从不同的应用程序使用 opentok 交谈吗？除了opentok还有其他解决方案吗？我正在寻找免费和开源的东西。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T21:11:52.820

Opentok 平台支持 P2P 模式和使用它们的服务器......所以您可以将 OpenTok 用于您的应用程序。我不会推荐它......你不会有这个备份。

点对点流使用 UDP。防火墙可能会阻止 UDP 并导致对等流传输失败。如果点对点流失败，无论是在最初发布流时还是在会话过程中，会话都会退回到使用 OpenTok 服务器来中继流。

[与 Opentok 的 P2P](http://www.tokbox.com/opentok/api/tools/js/documentation/overview/peer_to_peer.html)

# c#-4.0 - 在安装使用 Visual Studio 2010 创建的 Windows 服务时遇到问题

> ID：10830727
> 
> 赞同：0
> 
> 时间：2012-05-31T09:20:15.900
> 
> 标签：c#-4.0, windows-services

我正在尝试在我的本地计算机和 Windows Server 2008 r2 上安装使用 Visual Studio 2010 创建的 Windows 服务。当我使用 InstallUtil.exe 安装它时，我得到了正确的成功结果当我安装了服务时，请找到下面的命令行注释。

> C:\Windows\Microsoft.NET\Framework\v4.0.30319>InstallUtil.exe E:\SomeFolder\MyService\MyService.exe Microsoft (R) .NET Framework 安装实用程序版本 4.0.30319.1 版权所有 (c) Microsoft Corporation。版权所有。运行事务安装。开始安装的安装阶段。查看日志文件的内容以了解 E:\SomeFolder\MyService\MyService.exe 程序集的进度。该文件位于 E:\SomeFolder\MyService\MyService\MyService.InstallLog。安装程序集“E:\SomeFolder\MyService\MyService.exe”。受影响的参数有：logtoconsole = logfile = E:\SomeFolder\MyService\MyService\MyService.InstallLog assemblypath = E:\SomeFolder\MyService\MyService.exe 正在安装服务Service1...服务Service1已成功安装。在日志应用程序中创建 EventLog 源 Service1... 安装阶段成功完成，提交阶段开始。查看日志文件的内容以了解 E:\SomeFolder\MyService\MyService.exe 程序集的进度。该文件位于 E:\SomeFolder\MyService\MyService\MyService.InstallLog。提交程序集“E:\SomeFolder\MyService\MyService.exe”。受影响的参数有： logtoconsole = logfile = E:\SomeFolder\MyService\MyService\MyService.InstallLog assemblypath = E:\SomeFolder\MyService\MyService.exe Commit 阶段成功完成。事务安装已完成。的进步。该文件位于 E:\SomeFolder\MyService\MyService\MyService.InstallLog。提交程序集“E:\SomeFolder\MyService\MyService.exe”。受影响的参数有： logtoconsole = logfile = E:\SomeFolder\MyService\MyService\MyService.InstallLog assemblypath = E:\SomeFolder\MyService\MyService.exe Commit 阶段成功完成。事务安装已完成。的进步。该文件位于 E:\SomeFolder\MyService\MyService\MyService.InstallLog。提交程序集“E:\SomeFolder\MyService\MyService.exe”。受影响的参数有： logtoconsole = logfile = E:\SomeFolder\MyService\MyService\MyService.InstallLog assemblypath = E:\SomeFolder\MyService\MyService.exe Commit 阶段成功完成。事务安装已完成。

但问题是当我转到管理工具->服务并尝试启动已安装的服务时，它会出现以下错误

> 服务 Windows 无法在本地计算机上启动 MyServiceInstaller 服务。错误 1053：服务未及时响应启动或控制请求。好的

请让我知道我应该怎么做才能启动服务器？

问候斯里维迪亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:22:29.750

将一些代码用于登录服务并检查日志文件中的错误。有一些代码给出错误。此代码在`OnStart`服务事件上执行。

检查事件查看器以获取管理工具下的更多详细信息。

# javascript - 如何使用 jsp 和 servlet 验证表单？

> ID：10830734
> 
> 赞同：-6
> 
> 时间：2012-05-31T09:20:40.247
> 
> 标签：javascript, jsp, servlets

> **可能重复：**
> [JavaScript：客户端与服务器端验证](https://stackoverflow.com/questions/162159/javascript-client-side-vs-server-side-validation)

嗨，我是 jsp 和 servlet 的初学者。我想知道使用 servlet 或 javascript 进行表单验证是否更好。这两种方法的优缺点是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:26:16.777

您***总是必须***在服务器端进行验证，因为：

*   验证通常与安全性和数据完整性有关，任何熟练的 javascript 开发人员都可以使用浏览器的调试器来伪造可以绕过客户端验证的请求。
*   如果您稍后在服务器端有另一个使用相同服务的屏幕，则不必完全重写验证

为了使您的应用程序更加流畅，您***还可以***在客户端进行验证。对于客户端，您可以使用[这个出色的插件](http://docs.jquery.com/Plugins/Validation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T15:39:03.460

对于验证，例如检查输入的电子邮件地址是否格式正确，或者名字字段是否全是字符，或者输入的电话号码是否是数字而不是字符，您可以使用客户端验证。

但是对于用户凭据验证和其他类似验证（安全性和数据完整性），您应该使用服务器端验证。

# html - 隐藏溢出的div中的中心图像

> ID：10830735
> 
> 赞同：37
> 
> 时间：2012-05-31T09:20:45.250
> 
> 标签：html, css, center

我有一个 400 像素的图像和一个较小的 div（宽度并不总是 300 像素，如我的示例所示）。我想在 div 中居中图像，如果有溢出，隐藏它。

注意：我必须保留`position:absolute`图像上的。我正在使用 css-transitions，如果我使用`position:relative`，我的图像会有点晃动（[https://web.archive.org/web/20120528225923/http://ta6.maxplus.be:8888/](https://web.archive.org/web/20120528225923/http://ta6.maxplus.be:8888/)）。

jsfiddle [http://jsfiddle.net/wjw83/1/](http://jsfiddle.net/wjw83/1/)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-31T09:33:04.273

你应该使容器相对并给它一个高度，你就完成了。

[http://jsfiddle.net/jaap/wjw83/4/](http://jsfiddle.net/jaap/wjw83/4/)

```
.main {
  width: 300px;
  margin: 0 auto;
  overflow: hidden;
  position: relative;
  height: 200px;
}

img.absolute {
  left: 50%;
  margin-left: -200px;
  position: absolute;
}
```

```
<div class="main">
  <img class="absolute" src="http://via.placeholder.com/400x200/A44/EED?text=Hello" alt="" />
</div>
<br />
<img src="http://via.placeholder.com/400x200/A44/EED?text=Hello" alt="" />
```

如果您愿意，您还可以通过添加负边距和顶部位置来垂直居中图像：http: [//jsfiddle.net/jaap/wjw83/5/](http://jsfiddle.net/jaap/wjw83/5/)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-08-24T20:31:59.277

以上解决方案都不适合我。我需要一个动态图像大小以适合圆形父容器`overflow:hidden`

```
.circle-container {
    width:100px;
    height:100px;
    text-align:center;
    border-radius:50%;
    overflow:hidden;
}

.circle-img img {
  min-width:100px;
  max-width:none;
  height:100px;
  margin:0 -100%;
} 
```

这里的工作示例：http: [//codepen.io/simgooder/pen/yNmXer](http://codepen.io/simgooder/pen/yNmXer)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2019-03-20T22:47:34.653

最新解决方案：

HTML

```
<div class="parent">
    <img src="image.jpg" height="600" width="600"/>
</div> 
```

CSS

```
.parent {
    width: 200px;
    height: 200px;
    overflow: hidden;
    /* Magic */
    display: flex;
    align-items: center; /* vertical */
    justify-content: center; /* horizontal */
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-01-21T14:07:39.947

MELISSA PENTA ( [https://www.localwisdom.com/](https://www.localwisdom.com/) )找到了这个不错的解决方案

HTML

```
<div class="wrapper">
   <img src="image.jpg" />
</div> 
```

CSS

```
div.wrapper {
  height:200px;
  line-height:200px;
  overflow:hidden;
  text-align:center;
  width:200px;
}
div.wrapper img {
  margin:-100%;
} 
```

**在 div 中居中任何大小的图像**
与圆形包装和不同大小的图像一起使用。

CSS

```
.item-image {
    border: 5px solid #ccc;
    border-radius: 100%;
    margin: 0 auto;
    height: 200px;
    width: 200px;
    overflow: hidden;
    text-align: center;
}
.item-image img {
    height: 200px;    
    margin: -100%;
    max-width: none;
    width: auto;    
} 
```

这里的工作示例[codepen](http://codepen.io/egle/pen/wJwzzp)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-06-28T07:39:00.103

对我来说，flex-box 完美地使图像居中。

这是我的 html 代码：

```
<div class="img-wrapper">
  <img src="..." >
</div> 
```

这我用于css：我希望图像与包装元素一样宽，但如果高度大于包装元素的高度，则应该“裁剪”/不显示。

```
.img-wrapper{
  width: 100%;
  height: 50%;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center; 
}
img {
  height: auto;
  width: 100%;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-31T09:42:07.707

```
<html>
<head>
<style type="text/css">
    .div-main{
        height:200px;
        width:200px;
        overflow: hidden;
        background:url(img.jpg) no-repeat center center
    }
</style>
</head>
<body>
    <div class="div-main">  
    </div>
</body> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-31T09:30:22.820

你必须从侧面将你的图像隐藏起来试试这个

[3 种简单快速的 CSS 技术，用于人造图像裁剪 | 文...](https://cssglobe.com/3-easy-and-fast-css-techniques-for-faux-image/)

上面网站上第一种方式的演示之一

[尝试演示](http://cssglobe.com/lab/imagecrop/01.html)

我也会做一些阅读

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-31T11:56:20.483

只需确保您如何通过 css 背景使用图像使用背景图像位置，例如背景：url（您的图像路径）不重复中心中心；它会自动将中心与屏幕对齐。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-05-24T18:40:50.627

这似乎在我们的网站上工作，使用您的想法和基于包装器 div 左边缘的一些数学。向左 50% 然后取出 50% 的额外边距似乎是多余的，但它似乎有效。

```
div.ImgWrapper {
    width: 160px;
    height: 160px
    overflow: hidden;
    text-align: center;
}

img.CropCenter {
    left: 50%;
    margin-left: -100%;
    position: relative;
    width: auto !important;
    height: 160px !important;
}

<div class="ImgWrapper">
<a href="#"><img class="CropCenter" src="img.png"></a>
</div> 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-11-19T07:06:50.060

`flex-box`后代的工作解决方案：

要点：

1.  为包装器隐藏溢出
2.  必须指定图像的高度和宽度，不能是百分比。
3.  使用您想要使图像居中的任何方法。

```
 wrapper {
    width: 80;
    height: 80;
    overflow: hidden;
    align-items: center;
    justify-content: center;
  }
  image {
    width: min-content;
    height: min-content;
  } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-01-13T21:09:13.830

我一直在尝试在我最近的网站的[这个页面](http://artune.be/?q=notes)中实现 Jaap 的答案，但有一个区别： .main {height:} 设置为 auto 而不是固定的 px 值。作为响应式开发人员，我正在寻找一种将图像高度与左侧浮动文本元素同步的解决方案，但前提是我的文本高度变得大于我的实际图像高度。在这种情况下，图像不应重新缩放，而应按照上述原始问题中的描述进行裁剪和居中。这可以做到吗？您可以通过慢慢缩小浏览器的宽度来模拟这种行为。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-07-24T21:29:36.673

这个问题是一个巨大的痛苦。但我终于明白了。我见过很多复杂的解决方案。这很简单，现在我看到了。

```
.parent {
  width:70px;
  height:70px;
}

.child {
  height:100%;
  width:10000px; /* Or some other impossibly large number */
  margin-left: -4965px; /* -1*((child width-parent width)/2) */
}

.child img {
  display:block; /* won't work without this */
  height:100%;
  margin:0 auto;
} 
```

# sql-server - SQL Server 性能 - IF 选择 + 更新与更新

> ID：10830742
> 
> 赞同：6
> 
> 时间：2012-05-31T09:20:57.477
> 
> 标签：sql-server, performance, select, if-statement

我正在编写一个大脚本，里面充满了每天都会运行的更新语句。其中一些更新将影响其他行不会。

我相信不会影响任何事情的更新语句不是很好的做法，但我的问题是：

*   这对性能有多大影响？这与仅在 select 获取某些内容时使用 select 语句和更新有很大不同吗？

谢谢你，蒂亚戈

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T13:26:31.873

首先，SELECT 后跟 UPDATE 在并发下几乎总是不正确的。除非事情在 SERIALIZABLE 隔离级别下运行，否则无法保证SELECT 和 UPDATE*之间*的行不会更改。

其次，对于有要更新的行的情况*，* SELECT + UPDATE 的成本根据定义要高于 UPDATE。

最后，在*没有*行更新的情况下，通过 UPDATE 定位它们的成本通常与通过 SELECT 定位它们的成本相同，因此您没有获得任何收益。我说“经常”，而不是“总是”，因为查询优化器可能会考虑更新与选择的不同策略，并且更新扫描发生在与读取扫描不同的锁定（并发）规则下。

可能有意义的是有一个非常便宜的 SELECT 可以避免昂贵的 UPDATE，即使不是 100% 准确。SELECT 和 UPDATE 之间的条件可能会有很大差异只要你没有得到任何假阴性（SELECT 说不应该有任何行但 UP​​DATE 会找到行，如果它已经运行）和错误的数量正数很低（SELECT 表示有行，但更精确/更昂贵的 UPDATE 检查实际上并没有找到任何行）。

归根结底，这是一个优化问题，所有优化问题都是从**测量**开始的。先**定位到昂贵的UPDATE**，然后开始修改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T13:08:12.480

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T10:49:05.300

这取决于您如何进行更新。如果您使用连接语法进行更新（即）

```
UPDATE targetTable
FROM targetTable INNER JOIN sourceTable 
```

然后，您可以非常简单地添加 WHERE 子句，仅当您要设置的值实际上不同时才更新该行。

是的，它会影响性能，特别是如果你认为这样的事情......

```
UPDATE targetTable SET column = column 
```

...将触发在 UPDATE 上定义的触发器。我不是 100% 同意这一点，但我相信这也确实会进入事务日志，因为需要对其进行维护，以便日志尾备份和镜像目标能够完全拼凑事件序列。

# c# - 无法访问 C# 派生类中的受保护函数？

> ID：10830744
> 
> 赞同：0
> 
> 时间：2012-05-31T09:21:00.663
> 
> 标签：c#

如何在派生类中使用基类的保护函数？

```
public class A
{
  protected void Test()
  {
      // some code....
  }
}

public class B : A
{
  public void Test2()
  {
    A obj = new A();
    obj.Test(); // error thrown;
  }
} 
```

当我尝试使用基类的测试功能时。它正在抛出错误..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:24:08.277

您可以直接调用该`Test()`方法，而无需创建基类型的新对象：

```
public class A
{
  protected void Test()
  {
      // some code....
  }
}

public class B : A
{
  public void Test2()
  {
    Test();  // Calls the test method in the base implementation of the CURRENT B object
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-16T18:46:41.100

我认为可以通过基类中的受保护静态方法来做到这一点，而不会丢失封装。

```
public class A
{
  protected void Test() { /* ... */ }

  protected static void Test(A obj)
  {
    obj.Test();
  }
}

public class B : A
{
  public void Test2()
  {
    A obj = new A();
    A.Test(obj);
  }
} 
```

`A.Test()`只能从派生类及其兄弟姐妹中有效地调用。

测试片段： http://volatileread.com/utilitylibrary/snippetcompiler?id= [37293](http://volatileread.com/utilitylibrary/snippetcompiler?id=37293)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T09:23:53.453

那是因为 'A's`Test()`是受保护的，这意味着，`B`将其视为`private`.

`B`继承自`A`并`A`包含受保护的事实`Test`并不意味着其他对象可以访问`Test`，即使它们继承自该类。

虽然：

由于`B`继承自`A`，`B`包含*私有*方法`Test()`。所以，`B`可以访问它自己的`Test`函数，但这并不意味着`B`可以访问`A`s`Test`函数。

所以：

```
public class A
{
  protected void Test()
  {
      // some code....
  }
}

public class B : A
{
  public void Test2()
  {
    this.Test(); // Will work!
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T09:23:54.217

测试在对象 A 的实例中受到保护。

打电话

```
this.Test() 
```

无需在 B 中创建对象 A。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-31T09:24:42.557

似乎您误解了“受保护”一词。看看 msdn： http: [//msdn.microsoft.com/en-us/library/bcd5672a (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/bcd5672a(v=vs.71).aspx)

您的示例需要是这样的：

```
public class A
{
  protected void Test()
  {
      // some code....
  }
}

public class B : A
{
  public void Test2()
  {
    this.Test();
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-31T09:24:04.390

受保护的方法仅适用于派生类型。换句话说，当您创建 A 的实例时，您正试图公开访问该方法。

# rest - 泽西岛中的类似路径，参数为空

> ID：10830752
> 
> 赞同：0
> 
> 时间：2012-05-31T09:21:11.817
> 
> 标签：rest, jersey

我在泽西岛遇到问题，我有两条路，比方说

```
user/comments/{username} 
```

和

```
user/{username} 
```

第一个为您提供用户的评论，第二个向您显示用户的个人资料。

如果有人在第一个 url 中使用空参数作为 user/comments/ 显然会调用第二种方法，并且您会获得用户“comments”的配置文件。

有一种方法可以让您“保留”一些参数，或者这更像是一个设计问题，我应该重构路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T09:12:58.607

我将使用以下路径，它们正确地代表用户 - >评论层次结构，并避免名称冲突问题：

```
user/{username}/comments 
```

和

```
user/{username} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:08:27.090

如果用户是“评论”，您可以签入第二种方法并调用第一种方法而不是行为。我从来没有听说过有明确的检查程序的球衣。

当然，在使用适当的“评论”登录名注册的用户向您发送一封抱怨您的网站无法正常工作的邮件之前，一切都会正常进行；所以是的，我认为最好的选择是重构它......

# c - 链接共享库时的问题

> ID：10830755
> 
> 赞同：2
> 
> 时间：2012-05-31T09:21:16.200
> 
> 标签：c, makefile, shared-libraries

以下是我如何使用共享库生成可执行文件的步骤。

1.  我有三个文件：

    **文件 libhello.c**

    ```
    /* hello.c - demonstrate library use. */
    #include <stdio.h>
    void hello(void)
    { 
        printf("Hello, library world./n");
    } 
    ```

    **文件 libhello.h**

    ```
    /* hello.h - demonstrate library use. */
    void hello(void); 
    ```

    **文件 main.c**

    ```
    /* main.c -- demonstrate direct use of the "hello" routine */
    #include "hello.h"
    int main(void)
    {
        hello();
        return 0;
    } 
    ```

2.  我使用下面的命令来生成共享库。

    ```
    gcc -g -Wall -fPIC -c hello.c -o hello.o
    gcc -shared -W,soname,-libhello.so.0 -o libhello.so.0.0.0 hello.o 
    ```

3.  最后，我将库路径添加到`LD_LIBRARY_PATH`变量中，并尝试使用共享库创建可执行文件。

    ```
    export LD_LIBRARY_PATH=.:$LD_LIBRARY_PATH
    ln -s libhello.so.0.0.0 libhello.so.0
    gcc -g -Wall -c main.c -o main.o -I.
    gcc -o main main.o -lhello -L. 
    ```

但是，在最后一步，出现了一个错误：找不到-lhello。那么，我哪里错了？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:23:28.243

`gcc``libhello.so`链接新程序时查找。`libhello.so.0`在搜索已链接程序的动态依赖项时使用。

换句话说：`gcc -o main main.o -lhello -L.`寻找`libhello.so`，`./main`寻找`libhello.so.0`。这允许为遗留程序提供多个版本的库，同时精确识别与已安装头文件匹配的库。

符号链接`libhello.so`->`libhello.so.0.0.0`应该可以解决问题。

# haskell - 是否有被认为是“安全”的 GHC 扩展列表？

> ID：10830757
> 
> 赞同：37
> 
> 时间：2012-05-31T09:21:25.277
> 
> 标签：haskell, ghc

有时，如果没有至少一个语言扩展，我想编写的一段代码是不合法的。当试图在研究论文中实现想法时尤其如此，这些论文倾向于使用撰写论文时可用的任何漂亮的、超扩展的 GHC 版本，而没有明确说明实际需要哪些扩展。

结果是我经常在 .hs 文件的顶部得到类似这样的内容：

```
{-# LANGUAGE TypeFamilies
           , MultiParamTypeClasses
           , FunctionalDependencies
           , FlexibleContexts
           , FlexibleInstances
           , UndecidableInstances
           , OverlappingInstances #-} 
```

我不介意，但我常常觉得我在做盲目的牺牲来安抚GHC的大神。它抱怨某段代码在没有语言扩展 X 的情况下无效，所以我为 X 添加了一个 pragma。然后它要求我启用 Y，所以我为 Y 添加一个 pragma。到这完成时，我已经启用三四种我不太了解的语言扩展，我不知道哪些是“安全的”。

解释我所说的“安全”是什么意思：

*   我知道这`UndecidableInstances`是安全的，因为尽管它可能导致编译器不终止，但只要代码编译它就不会产生意外的副作用。

*   另一方面，`OverlappingInstances`显然是不安全的，因为它让我很容易意外地编写出运行时错误的代码。

所以我的问题是：

> 是否有被认为是“安全”和“不安全”的 GHC 扩展列表？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-31T10:22:49.200

最好看看[SafeHaskell](http://hackage.haskell.org/trac/ghc/wiki/SafeHaskell)允许什么：

> **安全语言**
> 
> 安全语言（通过 启用`-XSafe`）以两种不同的方式限制事物：
> 
> 1.  完全不允许某些 GHC LANGUAGE 扩展。
> 2.  某些 GHC LANGUAGE 扩展在功能上受到限制。
> 
> 以下正是属于每个类别的标志和扩展：
> 
> *   完全禁止：`GeneralizedNewtypeDeriving`,`TemplateHaskell`
> *   受限功能：`OverlappingInstances`, `ForeignFunctionInterface`, `RULES`,`Data.Typeable`
>     *   请参阅下面的受限功能
> *   没关系：所有剩余的标志。
> 
> **受限和禁用的 GHC Haskell 功能**
> 
> 在安全语言方言中，我们限制了以下 Haskell 语言功能：
> 
> *   `ForeignFunctionInterface`：这主要是安全的，但是不允许使用非 IO 类型导入函数的外部导入声明。所有 FFI 导入必须驻留在 IO Monad 中。
> *   `RULES`：因为它们可以以意想不到的方式改变受信任代码的行为，违反语义一致性，它们在功能上受到限制。具体来说，在编译`RULES`的模块中定义的任何内容都将被删除。在值得信赖的模块中定义导入仍然有效并且会照常触发。`M``-XSafe``RULES``M`
> *   `OverlappingInstances`：此扩展可用于违反语义一致性，因为恶意代码可以重新定义类型实例（通过包含更具体的实例定义），从而改变导入不受信任模块的代码的行为。`M`对于使用编译`-XSafe`但受限制的模块，扩展不会被禁用。虽然`M`可以定义重叠的实例声明，但它们只能用于`M`. 如果在`N`导入的模块中`M`，在使用类型类函数的调用站点可以选择使用哪个实例（即重叠）并且最具体的选择来自`M`（或任何其他安全编译模块），那么编译将失败。`N`模块是否被认为是安全的、可信赖的或两者都不是，这无关紧要。
> *   `Data.Typeable`：我们允许`Data.Typeable`派生的实例，但我们不允许手工制作的实例。派生实例是由 GHC 机器生成的，应该是完全安全的，但手工制作的实例可能会谎报其类型并允许类型之间的不安全强制。这符合 SYB 原始设计的精神。
> 
> 在安全语言方言中，我们完全禁用了以下 Haskell 语言功能：
> 
> *   `GeneralizedNewtypeDeriving`：它可用于违反构造函数访问控制，允许不受信任的代码以数据类型作者不打算的方式操作受保护的数据类型。即可以用来打破数据结构的不变量。
> *   `TemplateHaskell`: 特别危险，因为即使在编译时也会产生副作用，并且可用于访问抽象数据类型。使用 TH 很容易打破模块边界。

`FunctionalDependencies`我记得曾经读过and的交互`UndecidableInstances`也可能是不安全的，因为除了允许无限的上下文堆栈深度之外，`UndecidableInstances`还提升了所谓的[覆盖条件](http://www.haskell.org/ghc/docs/7.4.1/html/users_guide/type-class-extensions.html)（第 7.6.3.2 节），但我目前找不到这个引用.

编辑 2015-10-27：自从 GHC 获得对类型角色`GeneralizedNewtypeDeriving`的支持以来，不再不安全。（我不确定还有什么可能发生的变化。）

# opengl - OpenGL 固定功能管道是否计算视图空间中的照明？

> ID：10830759
> 
> 赞同：0
> 
> 时间：2012-05-31T09:21:32.420
> 
> 标签：opengl, 3d, lighting

OpenGL 固定功能管道是否计算视图空间中的照明？

如果答案是肯定的，那么它如何应对不均匀比例的视图转换？实际上，它如何应对包含*任何*比例的视图转换？

如果这是真的，那么缩放视图空间将导致不同的光到顶点的距离，这意味着点光源的光照强度将随着视图矩阵的缩放而改变。

世界空间中的照明将使计算的点光强度独立于视图空间缩放，但需要：

1.  将对象到世界矩阵提供给 API（例如在 DirectX 中，在世界空间中指定灯光位置）。
2.  绘图时 API 将所有几何图形转换两次。一次通过 world*view*proj 进入剪辑空间，然后再次通过 world，以计算世界空间中顶点的光照。

获得好的答案以及您可以在一般固定功能照明管道上挖掘的任何其他背景信息可获得积分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T12:04:14.407

我认为您的问题来自“视图空间”与“投影后空间”的混淆。他们*不*一样。

视图空间或相机空间是场景相对于相机的空间。因此，相机位于原点，向下看 -Z 轴，+Y 向上。在 OpenGL 固定函数方面，相机空间是位置和法线乘以`GL_MODELVIEW`矩阵后的空间。

投影后空间是将相机空间值乘以 `GL_PROJECTION`矩阵后得到的空间。这实际上就是为什么有两个单独的矩阵。您在相机空间中进行照明，然后将投影后位置发送出去进行光栅化。

OpenGL 不在投影后空间中进行光照。因此纵横比、相机变焦等*不会*影响照明。观点也没有分歧。

> OpenGL 固定功能管道是否计算视图空间中的照明？

是的，你也应该这样做。

> 如果答案是肯定的，那么它如何应对不均匀比例的视图转换？实际上，它如何应对包含任何比例的视图转换？

与处理包含比例的模型到世界转换的方式完全相同。

这只是一个矩阵。数学既不知道也不关心特定比例变换发生在哪里，无论是在模型到世界的部分还是在世界到相机的部分。重要的是存在规模。或倾斜或任何其他形式的变换。

请记住：模型到世界的变换比世界到相机的变换更可能使用比例*。*您更有可能需要重新调整几何形状以适应世界，而不是需要重新调整相机矩阵的几何形状。相机缩放、纵横比等的缩放是*透视*矩阵的一部分，而不是相机矩阵。

它以通常的方式“处理”这个问题：法线通过模型到视图矩阵的反转置进行转换。这[会改变法线](https://nicolbolas.github.io/oldtut/Illumination/Tut09%20Normal%20Transformation.html)（完全披露：这是我的电子书教程），因此它们在缩放后仍然适合模型。无论您在哪个空间，这都是必要的。

> 如果这是真的，那么缩放视图空间将导致不同的光到顶点的距离，这意味着点光源的光照强度将随着视图矩阵的缩放而改变。

... 和？由于所有对象都由*相同*的相机矩阵转换（在单个场景中），因此所有对象都将应用相同的比例。因此，如果它们在世界空间中都处于相同的比例，那么它们在相机空间中也将处于相同的比例。

所以有什么问题？是的，衰减会发生变化，但它对所有对象的变化都是一样的。因此，只要您的衰减因子是针对此相机空间设计的，就没有问题。

# apache - 拒绝在 apache 中未在包含文件中使用

> ID：10830763
> 
> 赞同：0
> 
> 时间：2012-05-31T09:21:52.133
> 
> 标签：apache

我在虚拟主机中为配置添加了一个包含，该配置包含一个包含拒绝来自的文件。

包含似乎已添加和解析，因为在包含文件中输入废话将导致 Apache 在测试配置时发现错误。但是，当在包含文件中添加拒绝来自时，它们似乎并没有被阻止，但是在目录中的 htaccess 文件中添加拒绝来自完美的工作。

不确定是什么原因造成的 - 非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:09:22.857

使用`Order Deny,Allow`，该`Allow from all`指令优先并允许所有请求。您需要将其更改为`Order Allow,Deny`.

# c++ - 如何用标准算法重新实现它？

> ID：10830764
> 
> 赞同：1
> 
> 时间：2012-05-31T09:21:52.407
> 
> 标签：c++, boost-bind

我有一个指向对象的指针容器。指针是一个基类，层次结构实现了一个虚函数`count()`。我想计算`count()`容器中的总和。

我目前`for_each`使用 lambda 函数来执行此操作：

```
size_t sum = 0;
std::for_each(ptrs_.begin(), ptrs_.end(), [&sum](ptr const *p) {
    expr += p->count();
});
return sum; 
```

谁能帮我用`boost::bind`and`std::accumulate`或其他 std 算法重新实现它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T09:30:01.307

```
auto getcount = std::mem_fun(&Base::count); // nothing to bind, we just need a functor

size_t sum = std::accumulate(
    boost::make_transform_iterator(ptrs_.begin(), getcount),
    boost::make_transform_iterator(ptrs_.end(), getcount),
    (size_t)0
); 
```

如果你不喜欢`auto`，或者如果你的编译器不喜欢，那么当然你可以粘贴两次，或者去寻找返回类型`mem_fun`，或者使用函数模板捕获它：

```
template <typename IT, typename FUNC, typename T>
T transform_accumulate(IT first, IT last, T init, FUNC func) {
    return std::accumulate(
        boost::make_transform_iterator(first, func),
        boost::make_transform_iterator(last, func),
        init
    );
} 
```

然后将其称为：

```
transform_accumulate(ptrs_.begin(), ptrs_.end(), size_t(), std::mem_fun(&Base::count)); 
```

或者，使用`std::accumulate`采用二元仿函数的形式：

```
struct AddCount {
    size_t operator()(size_t result, Base *p) const {
        return result + p->count();
    }
};

size_t sum = std::accumulate(ptrs_.begin(), ptrs_.end(), size_t(), AddCount()); 
```

`AddCount`您当然可以使用 lambda 表达式，而不是编写。我希望你也可以使用里面的东西来构建它`<functional>`，但我不会。

我还没有测试过这些代码，所以让错误发现开始吧！

# php - Jquery 或 PHP - 基于复选框显示链接

> ID：10830765
> 
> 赞同：0
> 
> 时间：2012-05-31T09:21:55.107
> 
> 标签：php, jquery, forms

我有一个文档请求表单，它要求提供一些简单的详细信息和一些复选框，用户可以在其中请求他们感兴趣的文档。

姓名 电子邮件 请求的文件 - 文件 1 - 文件 2 - 文件 3 - 提交

当他们点击提交时，我将他们带到感谢页面，然后我的客户通过电子邮件收到结果，因此她知道请求了哪些文档。

现在愚蠢的部分是我们将用户带到一个“谢谢”页面，无论他们对哪些文档感兴趣，所有文档都可以下载。理想情况下，我只想给他们请求的 PDF。

我怀疑我可以通过以下两种方法中的任何一种来做到这一点，但想知道什么是“最好的”

1.  我使用 PHP 脚本根据请求的复选框通过电子邮件发送文件
2.  我使用一些 Jquery 切换脚本根据请求的复选框切换 DIV。

显然，我不精通这两种方法，但可以修改现有示例以开始工作。有人会有这样的例子吗？

非常感谢P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:31:49.507

最好在 PHP 级别操作“谢谢”页面的输出。只需根据表单复选框制作条件。

```
if($_POST['checkbox1'])
{
  // display document #1
}
if($_POST['checkbox2'])
{
  // display document #2
}
if($_POST['checkbox1'])
{
  // display document #2
} 
```

# c++ - C ++检查可用的内存？

> ID：10830769
> 
> 赞同：4
> 
> 时间：2012-05-31T09:22:06.307
> 
> 标签：c++

在 C++ 中，我将如何检查我有多少可用 RAM？

我在 Windows 上，但对 Unix 答案和 Windows 感兴趣。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T09:27:32.860

Windows：[GlobalMemoryStatusEx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366589%28v=vs.85%29.aspx)。MSDN 页面有详细的 C 示例代码。

Linux：检查“/proc/meminfo”文件（[讨论](http://www.cyberciti.biz/faq/ram-size-linux/)）

OSX：请参阅此 SO 线程[在 OSX 上以编程方式确定物理内存大小](https://stackoverflow.com/questions/583736/determine-physical-mem-size-programmatically-on-osx)

然而，这个问题并不明确。有物理内存，有虚拟内存，操作系统有能力将一些未使用的页面交换到磁盘/其他存储。

如果您需要编写某种系统监视器，那么我的回答就可以了。

如果您需要确保所有 malloc()/new[] 调用都不会失败，那么只需捕获适当的异常或处理 NULL 结果。另一种选择是构建您自己的分配器，它在开始时获得一个大内存块并在那里分配较小的块。

编辑：回答评论

对 WinAPI 的 MapViewOfFile 和 CreateFileMapping 的调用提供了排除致命情况的错误代码。由于文件被映射到与您的进程数据共享的虚拟地址空间，您可以检查是否有足够数量的可用页面。即，如果您在 32 位系统上，您将无法一次将整个 8Gb 文件映射到内存（但您可以映射其较小的部分），但在 64 位系统上，映射的可能性足以满足当前的任何需求。

# java - 如何对 Internet 地址进行编码

> ID：10830770
> 
> 赞同：8
> 
> 时间：2012-05-31T09:22:06.593
> 
> 标签：java, email, mime-message

发送电子邮件的代码如下：

```
 MimeMessage msg = new MimeMessage(session);
    msg.setSubject("subject", "UTF-8"); // here you specify your subject encoding
    msg.setContent("yourBody", "text/plain; charset=utf-8");

    msg.setFrom("senderAddress");
    msg.addRecipient(Message.RecipientType.TO, new InternetAddress(address));
    Transport.send(msg); 
```

我的问题是，当我在 utf-8 中编码主题时，我如何编码收件人地址，即。`new InternetAddress(address)`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-31T09:40:16.633

# 电子邮件地址应遵循 RFC822 标准

JavaMail 的 MimeMessage 使用[InternetAddress](http://javamail.kenai.com/nonav/javadocs/javax/mail/internet/InternetAddress.html)：

> 此类表示使用 RFC822 语法的 Internet 电子邮件地址。典型的地址语法格式为“user@host.domain”或“Personal Name < user@host.domain >”。

[RFC822 格式](http://www.cs.tut.fi/~jkorpela/rfc/822addr.html)说：

> 请注意，RFC 822 将字符库限制为[ASCII](http://www.cs.tut.fi/~jkorpela/chars.html#ascii)。在实践中，其他字符（例如 ä 或 é）通常在用于注释目的（和注释）的带引号的字符串中工作，但它们不能用于正确的地址中。

# 地址的个人名称支持不同的字符集

InternetAddress 使用个人名称：

> 如果名称包含非 US-ASCII 字符，则名称将根据 RFC 2047 使用指定的字符集进行编码。如果名称仅包含 US-ASCII 字符，则不进行编码并按原样使用名称。

要为编码设置字符集，有一个[InternetAddress#constructor](https://javamail.java.net/nonav/docs/api/javax/mail/internet/InternetAddress.html)。查看来源：

```
public InternetAddress(String address, String personal, String charset)
        throws UnsupportedEncodingException {
    this.address = address;
    setPersonal(personal, charset);
} 
```

它只是调用[setPersonal(..)](https://javamail.java.net/nonav/docs/api/javax/mail/internet/InternetAddress.html)，因此选择最方便的方式。

要查找字符集，请使用[Charset.forName()](http://docs.oracle.com/javase/6/docs/api/java/nio/charset/Charset.html#forName%28java.lang.String%29)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-12T21:38:56.347

我这样做，其中 addressString 是带有 NLS 字符的电子邮件地址：

```
InternetAddress address = new InternetAddress(addressString);
String personal = address.getPersonal();
if(personal != null) {
  address.setPersonal(personal, "utf-8");
} 
```

`getPersonal()`如果有原始个人姓名，则获取原始个人姓名，因为如果您使用单个字符串或使用构造 InternetAddress `InternetAddress.parse()`，您将不会在单独的字符串中包含个人姓名部分：

> 公共 java.lang.String getPersonal()
> 
> 获取个人姓名。如果名称按照 RFC 2047 进行编码，则会对其进行解码并转换为 Unicode。如果解码或转换失败，则按原样返回原始数据。

然后`setPersonal()`再次设置字符串，但这次告诉`InternetAddress`要对其进行编码：

> 公共无效 setPersonal（java.lang.String 名称，java.lang.String 字符集）
> 
> 设置个人姓名。如果名称包含非 US-ASCII 字符，则名称将根据 RFC 2047 使用指定的字符集进行编码。如果名称仅包含 US-ASCII 字符，则不进行编码并按原样使用名称。

# c# - 在 C# 中解析 JSON

> ID：10830772
> 
> 赞同：0
> 
> 时间：2012-05-31T09:22:15.100
> 
> 标签：c#, json, json.net

我有一个要发送到 ac# 服务器的 JSON 字符串。它包括一个事件对象数组和一个关系对象数组。关系对象描述数据库表关系。

但是，我无法从服务器上的 JSON 获取数据。服务器上不存在要脱轨的对象，当我尝试以下操作时，JSON.net 会引发解析错误：

```
// Both throw parse errors
JObject o = JObject.Parse(Request.Form.ToString());
JsonConvert.DeserializeObject<MobileEvents>(Request.Form.ToString()); 
```

**JSON：**

```
{
    "CreateEvents": {
        "Event": [
            {
                "Id": "1",
                "Subject": "Hire a Clown"
            }
        ],
        "Relationship": [
            {
                "Primary": "Table1",
                "Secondary": "Table2",
                "Field": [
                    {
                        "Table1Id": "1",
                        "Table2Id": [
                            "101"
                        ]
                    }
                ]
            },
            {
                "Primary": "Table1",
                "Secondary": "Table3",
                "Field": [
                    {
                        "Table1Id": "1",
                        "Table3Id": [
                            "200025"
                        ]
                    }
                ]
            },
            {
                "Primary": "Table1",
                "Secondary": "Table4",
                "Field": [
                    {
                        "Table1Id": "1",
                        "Table4Id": [
                            "3"
                        ]
                    }
                ]
            }
        ]
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T09:40:52.827

`Request.Form.ToString()`会返回类似“a=1&b=3”的结果，这绝对不是你需要的。

如果您在提交表单时传递值，则可以使用`Request.Form["your-key"]`来获取值。

如果您通过 http 正文传递值，则可以使用`new StreamReader(Request.InputStream).ReadToEnd()`来获取整个 JSON 字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T09:28:08.770

我认为您的获取过程中有错误...

它不是

```
this.Request.Form.ToString(); // see http://stackoverflow.com/questions/7065979/why-is-the-return-value-of-request-form-tostring-different-from-the-result-of for output 
```

相反，它应该是

```
this.Request.Form["myInputNAME"].ToString(); 
```

重要 - 真正使用/ /...-element的`name`-attribute`input``select`

不管怎样：我想鼓励你，使用例如。`<asp:HiddenField runat="server" ID="foo" />`. 当您拥有服务器控件时，您可以通过`this.foo.Value`在服务器端进行简单操作来访问其值，而在客户端，您可以访问输入字段，例如`document.getElementById('<%= this.foo.ClientID %>')`

# iphone - 使用 Xcode 查找错误 - 尝试插入 nil 值

> ID：10830784
> 
> 赞同：4
> 
> 时间：2012-05-31T09:22:38.687
> 
> 标签：iphone, ios, xcode, debugging, xcode4.3

我的应用程序出现随机错误，导致它崩溃。我面临的问题是 XCode 并没有告诉我崩溃发生在哪里，只有以下信息。有人可以告诉我如何找出可以在代码中找到问题的地方吗？它必须在应用程序崩溃的同一时间崩溃，它总是显示以下内容。

> *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFDictionary setObject:forKey:]：尝试插入零值（键：0）”***第一次抛出调用堆栈：（0x381e48bf 0x381e47b9 0x381e47db 0x381516bb 0x9237f 0x518 0x9237b 0x59 0x37b9d 0x8b68f 0x3550850f 0x381b0577 0x3813c0cf 0x3547c3fb 0x3547dc2b 0x8d005 0x3814322b 0x34495 0x32e31 0x3372d 0x30a59 0x3813e435 0x7b1df 0x7b88d 0x79e25 0x31ca650f 0x31ca5f01 0x31c8c4ed 0x31c8bd2d 0x37f12df3 0x381b8553 0x381b84f5 0x381b7343 0x3813a4dd 0x3813a3a5 0x37f11fcd 0x31cba743 0x89e8b 0x24a4）终止叫做抛出异常（LLDB）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-31T09:26:47.970

你打开**异常断点**了吗？单击Breakpoint Navigator 左下角的**+ ，然后选择****Add Exception Breakpont**。

![在此处输入图像描述](../Images/a571ad733f63d351bb88f8195bd97828.png)

您可以右键单击断点进行编辑...</p>

![在此处输入图像描述](../Images/0ad92a0de86bf67ac412d6ee20ca08b7.png)

这将导致代码在发生错误的地方停止。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-31T09:28:39.507

有一个我通常在我的项目中使用的解决方案，设置一些特殊的断点。要做到这一点：

1.  打开 XCode
2.  转到“查看 -> 导航器 -> 显示断点导航器”

现在单击“+”按钮添加一些新断点：

*   添加异常断点
*   用符号添加符号断点`[NSException raise]`
*   用符号添加符号断点`objc_exception_throw`

再次运行您的项目，应用程序将在导致您的问题的行上停止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T09:26:19.967

错误很明显。在您为字典设置某些对象的任何一行中，您的键为 nill，这是不允许的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T10:50:29.457

您的问题是您正在使用 setObject: forKey Method to NSDictionary 只需将其设为 NSMutableDictionary 然后尝试此方法您无法为 NSDictionary 分配值，就像您尝试仅针对 NSMutableDictionary 一样。

我希望你能明白我想说的话。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-30T09:42:55.957

试试这个：

```
if([myDictionary objectForKey:@"string"]!= nil && [myDictionary objectForKey:@"string"]!= Nil) { } 
```

# opencv - 如何使用 OpenCV 2.1 从图像中读取数字

> ID：10830785
> 
> 赞同：-2
> 
> 时间：2012-05-31T09:22:38.887
> 
> 标签：opencv

以前我在这个论坛上发布了这个问题，根据专家的建议，他们建议我使用 OpenCV 从图像中提取数据。

我是 OpenCV 的新手，基本上我学会了使用 Visual Studio 2008 安装 OpenCV 2.1，然后我使用了简单的程序，例如加载图像、反转和保存图像。

然后我试图从图像中读取数字。我在 Google 和 OpenCV 教程 PDF 中搜索了很多，我没有得到任何解决方案。

请问有人可以指导我吗？
或从图像中读取数字的简单演练..

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:57:57.690

A example of a basic OCR with OpenCV: [http://blog.damiles.com/2008/11/basic-ocr-in-opencv/](http://blog.damiles.com/2008/11/basic-ocr-in-opencv/)

# java - 在 Google App Engine 上存储 google 协议缓冲区

> ID：10830786
> 
> 赞同：2
> 
> 时间：2012-05-31T09:22:43.400
> 
> 标签：java, google-app-engine, protocol-buffers

我有一个用来存储应用程序状态的原型。它是我需要存储的类的一部分。我尝试过 objectify 但这似乎不起作用，因为协议缓冲区不是核心类型并且具有最终类。我也尝试序列化原型，但这似乎也不起作用。有人可以帮帮我吗？

我的课看起来像这样

```
 public class MyClass {
     int a;
     String b;
     List<State> state;
   } 
```

State 是我用来存储状态的原型。本质上，我需要弄清楚如何存储 MyClass 的实例。谢谢， 卡提克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T12:32:33.523

我猜你想以序列化格式存储 Protobuf 对象，对吧？在这种情况下，只需将其存储为`byte[]`字段。您甚至可以在`@PostLoad`和`@PrePersist`方法`@Transient`中对原始`State`字段进行此序列化/反序列化

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-31T16:14:27.330

App Engine 在内部存储协议缓冲区。读这个。

[https://developers.google.com/appengine/articles/storage_breakdown](https://developers.google.com/appengine/articles/storage_breakdown)

您可以使用 objectify，App Engine 将存储协议缓冲区。完毕。

# c++ - 从缓存中删除键

> ID：10830787
> 
> 赞同：1
> 
> 时间：2012-05-31T09:22:47.060
> 
> 标签：c++, memcached

我正在使用[memcached 和 c++](http://libmemcached.org/libMemcached.html)。我想使用 c++ api 从服务器中删除所有密钥。最好在没有键列表的情况下删除它们。

文档中有功能：[memcached_dump](http://docs.libmemcached.org/memcached_dump.html#memcached_dump_fn)和[memcached_delete](http://docs.libmemcached.org/memcached_delete.html)。第一个返回键列表，第二个 - 删除它们。

但这是第一个函数的文档中的引用：

> memcached_dump() 用于获取在 memcached(1) 服务器中找到的键列表。因为 memcached(1) 不保证转储所有密钥，所以您不能假设您已从服务器获取所有密钥。

第一个问题：获取所有密钥的任何方法，第二个问题是：如何使用这些功能。文档中没有任何示例。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:40:25.387

听起来像你想要的[`memcached_flush`](http://docs.libmemcached.org/memcached_flush.html)？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T05:01:38.630

删除 memcached 键的一种优雅方法是使用基本删除命令。但是由于我们不知道要删除哪些键，因此您应该记录在 memcached 中设置的数据。您可以将这些日志连同它们的时间戳一起转储到任何数据存储中。通过此过程，您将能够删除具有某些规则的键，从而更好地控制删除操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-01T10:05:23.680

当您需要能够删除一堆键时，记录键是一种管理缓存数据的有用方法。此外，使用前缀可以提供一种整体管理缓存数据的方法。

```
function save($key,$data,$group){
    cache_log_key($group,$key);
    cache_save($application_prefix.$key,$data);
}

function deleteGroup($group){
    $loggedKeys = cache_get_log($group);
    foreach($loggedKeys as $key){
        cache_delete($application_prefix.$key);
    }    
    cache_delete_log($group);
} 
```

# javascript - 同步 XMLHttprequest 获取 NETWORK_ERR：Safari 上的 XMLHttpRequest 异常 101

> ID：10830789
> 
> 赞同：2
> 
> 时间：2012-05-31T09:22:55.387
> 
> 标签：javascript, ajax, safari, web

如果请求在服务器上处理的时间超过 10 秒（大约），Safari 将抛出错误并中止同步 XMLHttpRequest。“NETWORK_ERR：XMLHttpRequest 异常 101”。它在所有其他浏览器上运行良好。有什么办法可以解决这个问题？谢谢。

# magento - Magento：一旦选择了选项，货币符号就会在可配置产品的情况下消失

> ID：10830791
> 
> 赞同：0
> 
> 时间：2012-05-31T09:23:01.190
> 
> 标签：magento

请指导我如何解决这个问题。一旦选择了一个选项，货币符号（新卢比）就会在产品视图页面中消失，即使是产品图片旁边的价格也是如此。我认为这可能与js问题有关，因为当页面加载时它显示正确，

非常感谢您的宝贵时间，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T09:01:14.540

I found this solution that worked for me:

[http://vithyamagento.wordpress.com/2012/09/21/magento-currency-symbol-dissapears-in-the-case-of-configurable-products-once-an-option-is-selected/](http://vithyamagento.wordpress.com/2012/09/21/magento-currency-symbol-dissapears-in-the-case-of-configurable-products-once-an-option-is-selected/)

As a summary, in js\varien\product.js you need to replace the call to the formatCurrency(price, this.priceFormat); to a custom formatting function, and then create that custom formatting function in js\varien\js.js

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T07:08:34.593

请将此代码添加到您要显示产品价格的货币符号的位置。

获取当前商店的货币符号：

**Mage::app()->getLocale()->currency(Mage::app()->getStore()->getCurrentCurrencyCode())->getSymbol();**

获取当前商店的货币代码：

**Mage::app()->getStore()->getCurrentCurrencyCode();**

获取指定货币代码的货币符号：

**Mage::app()->getLocale()->currency('EUR')->getSymbol();**

***希望它对你有用:)***

# jquery - json响应格式

> ID：10830792
> 
> 赞同：0
> 
> 时间：2012-05-31T09:23:06.240
> 
> 标签：jquery, jquery-plugins, webmatrix

我正在使用 json helper 和 jquery.form.js 开发 webmatrix。将数据发布到服务器后，我的响应数据如下所示：

"\u003cli\u003monster2010 不是有效的电子邮件。\u003c/li\u003e""\u003cli\u003eaclassgclass@yahoo.com 已被您使用。\u003c/li\u003e"

```
StringWriter writer = new StringWriter();
Json.Write("<li>" + user_mobile[i] + " is already in use by you.</li>", writer);
Json.Write("<li>" + user_mobile[i] + " is not a valid phone number.</li>", writer);
Response.Write(writer); 
```

我也尝试使用编码作家

```
var json = json.Encode(writer); //razor 
```

我也试过：

```
Json.Write(Json.Encode("<li>" + user_mobile[i] + " is already in use by you.</li>"), writer);
Json.Write(Json.Encode("<li>" + user_mobile[i] + " is not a valid phone number.</li>"), writer);

var options = {
            //            target: '#',   // target element(s) to be updated with server response 
            beforeSubmit: showRequest,  // pre-submit callback 
            success: showResponse,  // post-submit callback 

            // other available options: 
            //url:       url         // override for form's 'action' attribute 
            //type:      type        // 'get' or 'post', override for form's 'method' attribute 
            dataType: 'json'        // 'xml', 'script', or 'json' (expected server response 
        };

        // bind to the form's submit event 
        $('#frm_basicinfo').submit(function () {
            $(this).ajaxSubmit(options);

            return false;
        });
        function showRequest(formData, jqForm, options) { 
            var queryString = $.param(formData);

            alert('About to submit: \n\n' + queryString);

            return true;
        }

        // post-submit callback 
        function showResponse(responseText, statusText, xhr, $form) {

            alert('status: ' + statusText + '\n\nresponseText: \n' + responseText);

        } 
```

可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T16:30:20.067

JSON 是一种用于编码结构化数据的格式，而不是用于编码 HTML。您的`dataType`参数值应该是`'html'`您从服务器发送的内容。

# php - 什么是资源 ID #170？

> ID：10830800
> 
> 赞同：0
> 
> 时间：2012-05-31T09:23:28.653
> 
> 标签：php, database, joomla

我在这里想要实现的是我想从 Joomla 的数据库中检索数据。使用下面的代码，我能够成功连接到 Joomla 的数据库。但问题是，$query1 显示了这个输出，“资源 id #170".. 我们尝试连接到不同的表以查看是否能够获得不同的输出，但出现相同的输出.. 所以我想知道，该消息是什么意思？是代码有问题，还是数据库等等。

```
<?php 
session_start();
ob_start();
?>

<html>
<head>
<body>

<?php
include 'config.php';

//This is an example opendb.php
$conn = mysql_connect($dbhost, $dbuser, $dbpass) or die ('Error connecting to mysql');
mysql_select_db($dbname);
echo $dbname;
echo ('connected successfully!!!');

?>

<?php 

$query1 = "select speciesName from jos_mainDBspecies where species_id ='1'"; 
$result1 = mysql_query($query1) or die(mysql_error());
$row1  = mysql_fetch_assoc($result1);
extract($row1);
echo $result1;

?> 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T09:26:11.897

`$result1`是 MySQL 结果资源。它应该是这样的。您的实际结果`$row1`在您的代码中。

# python - python中嵌套for循环中的意外行为

> ID：10830806
> 
> 赞同：2
> 
> 时间：2012-05-31T09:23:59.537
> 
> 标签：python

非常简单的代码嵌套示例：

代码所做的只是创建一个初始化为零的列表列表。它遍历列表的行和列，每个位置都有一个值。由于某种原因，当打印最终向量时，每行都会复制 2D 列表的最后一行。

```
Number_of_channels=2
Coefficients_per_channel=3

coefficient_array=[[0]*Coefficients_per_channel]*Number_of_channels 
print coefficient_array

for channel in range(Number_of_channels):
    for coeff in range(Coefficients_per_channel):
        coefficient_array[channel][coeff]=coeff*channel
        print coefficient_array[channel][coeff]

print coefficient_array 
```

输出：

```
[[0, 0, 0], [0, 0, 0]]
0
0
0
0
1
2
[[0, 1, 2], [0, 1, 2]] 
```

我实际上期望：

```
[[0, 0, 0], [0, 1, 2]] 
```

有人知道这是怎么发生的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T09:26:51.213

您只复制*外部*列表，但该列表的值保持不变。因此，所有（两个）外部列表都包含对同一内部可变列表的引用。

```
>>> example = [[1, 2, 3]]
>>> example *= 2
>>> example
[[1, 2, 3], [1, 2, 3]]
>>> example[0][0] = 5
[[5, 2, 3], [5, 2, 3]]
>>> example[0] is example[1]
True 
```

更好地在循环中创建内部列表：

```
coefficient_array=[[0]*Coefficients_per_channel for i in xrange(Number_of_channels)] 
```

或者，再次用 python 提示进行说明：

```
>>> example = [[i, i, i] for i in xrange(2)]
>>> example
[[0, 0, 0], [1, 1, 1]]
>>> example[0][0] = 5
>>> example
[[5, 0, 0], [1, 1, 1]]
>>> example[0] is example[1]
False 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:39:53.423

和

```
coefficient_array=[[0]*Coefficients_per_channel]*Number_of_channels 
```

您对同一对象进行重复引用：

```
coefficient_array[0] is coefficient_array[1] 
```

评估为`True`。

相反，使用

```
[[coeff*channel for coeff in range(Coefficients_per_channel)] for channel in range(Number_of_channels)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T09:31:08.213

试试这个：

```
coefficient_array=[0]*Number_of_channels 
print coefficient_array

for channel in range(Number_of_channels):
    coefficient_array[channel] = [0] * Coefficients_per_channel
    for coeff in range(Coefficients_per_channel):
        coefficient_array[channel][coeff]=coeff*channel
        print (channel, coeff)
        print coefficient_array[channel][coeff]

print coefficient_array 
```

# php - 在php中重建关联数组

> ID：10830809
> 
> 赞同：0
> 
> 时间：2012-05-31T09:24:04.637
> 
> 标签：php, arrays

我正在尝试使用 foreach 循环重新构造该数组：

```
Array
(
    [0] => Array
        (
            [ID] => 0
            [NAME] => 400
            [QUANTITY] => 12
        )

    [1] => Array
        (
            [ID] => 0
            [NAME] => 403
            [QUANTITY] => 108
        )

    [2] => Array
        (
            [ID] => 5
            [NAME] => 403
            [QUANTITY] => 108
        )
) 
```

这就是我希望它看起来的样子：

```
Array
(
    [ID] => Array
        (
            [NAME] => QUANTITY
            [NAME] => QUANTITY
        )
Array
(
    [ID] => Array
        (
            [NAME] => QUANTITY
        ) 
```

我想出的代码不能正常工作，数组似乎在每个循环上都被覆盖，只显示最后一个条目：

```
Array
(
    [ID] => Array
        (
            [NAME] => QUANTITY
        )
    [ID] => Array
        (
            [NAME] => QUANTITY
        )
) 
```

这是我的代码：

```
$result = $sth->fetchAll(PDO::FETCH_ASSOC);

foreach($result as $key=>$value){
        $i = $value["ID"];
        $x = $value["NAME"];
        $y = $value["QUANTITY"]; 
        $arr[$i] = array( $x=>$y);                    
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:26:11.347

您不能多次拥有相同的密钥。这是不可能的。数组必须有唯一的键。您可以为 name 键创建一个数组，它看起来像这样：

```
[ID] => Array
    (
        [NAME] => Array 
               (
                    [0] => QUANTITY
                    [1] => QUANTITY
               )
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:28:45.277

正如弗拉德所说，您不能使用相同的索引名称......

但可能你想要这样的东西：

```
foreach($result as $key=>$value){
    $i = $value["ID"];
    $x = $value["NAME"];
    $y = $value["QUANTITY"];

    // here you go:
    $data = array($x => $y);
    if (isset($arr[$i]) {
        $arr[$i] = array_merge($arr[$i], $data);
    } else {
        $arr[$i] = $data;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T09:29:00.813

试试这个代码：

```
<?php

$newArray = array();

foreach ($result as $value)
{
    $newArray[$value['id']] = array($value['NAME']=>$value['QUANTITY']);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T09:29:58.880

```
foreach($result as $key=>$value){
    $i = $value["ID"];
    $x = $value["NAME"];
    $y = $value["QUANTITY"]; 
    if(!isset($arr[$i])) $arr[$i] = array();
    $arr[$i][$x] = $y;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T10:18:24.807

我想这会有所帮助。考虑到你声明你的数组。

```
$array = array(0 => array("id" => 0, "Name" => 400, "quantity" =>12),
                1 => array("id" => 0, "Name" => 403, "quantity" =>108),
                2 => array("id" => 5, "Name" => 403, "quantity" =>108)
); 
```

你声明了一个没有值也没有构造的新数组。

```
$newArray = array(); 
```

现在，试试这个代码！

```
foreach($array as $arr => $value)
{
    $id = $value["id"];
    $name = $value["Name"];
    $quantity = $value["quantity"];
    if(count($newArray[$id])>0){
        $newArray[$id] = array_merge($newArray[$id],array($name => $quantity));
    } else {
        $newArray[$id] = array($name => $quantity);
    }
} 
```

# iphone - 当我改变 Localizable.strings (en) 另一个 Localizable.strings (ru) 也改变

> ID：10830814
> 
> 赞同：1
> 
> 时间：2012-05-31T09:24:28.490
> 
> 标签：iphone, ios, multilingual, localizable.strings

我试图为我的 iOS 项目添加多语言（en、ru）支持。我使用了这个问题的教程：

*   [http://www.ibabbleon.com/iphone_app_localization.html](http://www.ibabbleon.com/iphone_app_localization.html)
*   [http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial](http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial)

所以我必须将 localizable.strings 文件放在不同的文件夹中。

但是当我在项目中更改 Localizable.strings (en.lproj) 时，Localizable.strings (ru.lproj) 也会发生变化。所以他们是一样的。我不明白为什么？？？

xcode 中显示的位置和完整路径是正确的。似乎更改了同一个文件。因为当我在 xcode 中保存 Localizable.strings 时，在 finder 中我看到一个文件已更改。

有什么问题？？？我错了什么？？？你可以帮帮我吗？

PS即使我将文件重命名为不同的名称，问题也一样。

PPS 作为一个例子，我使用了项目“ILikeIt”。甚至我打开这个项目并查看 Localizable.strings （在这个项目中）我从我的项目中看到了 Localizable.strings。这似乎很奇怪。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:32:15.423

也许您对文件名感到困惑。它 不是。**`Localizable.strings`**
~~`Localization.strings`~~

或者，也许您在第一次复制原始文件时创建了*别名*`Localizable.strings`而不是副本？

# mysql - 查询过去 30 天，但保留没有结果/值的天数

> ID：10830817
> 
> 赞同：3
> 
> 时间：2012-05-31T09:24:46.573
> 
> 标签：mysql, sql, datetime, sum

我有以下功能来获取过去 30 天每天的积分。此查询仅获取有可用值的日期，如果当天没有奖励积分，则不会获取任何内容。无论那天是否获得任何积分，我如何让它显示所有天？

**例如：**

5 月 31 日 - 30 分。
5 月 30 日 - 0 分。
5 月 29 日 - 5 分。
5 月 28 日 - 10 分。
5 月 27 日 - 0 分。
...

**代替：**

5 月 31 日 - 30 分。
5 月 29 日 - 5 分。
5 月 28 日 - 10 分。
...

```
SELECT date_added, SUM(points) 
FROM points_table pt, userCake_Users u 
WHERE pa.date_added >= (CURDATE() - INTERVAL 30 DAY ) 
AND u.user_id = '" . $user_id . "' 
AND u.user_id = pt.user_id 
GROUP BY date(pt.date_added)"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:29:02.010

在这种情况下，您可以使用内存中的*临时表*，并在必要时用零填充它。

我写了下一个例程：

```
SET @start_date = CURDATE() - INTERVAL 30 DAY;

DROP TEMPORARY TABLE IF EXISTS RawResults;
CREATE TEMPORARY TABLE RawResults ENGINE = MEMORY
SELECT date, SUM(test.table.points)
FROM test.table
WHERE test.table.date >= @start_date
GROUP BY test.table.date;

SET @cur_date = @start_date;    
WHILE @cur_date <= CURDATE() DO    
    IF NOT EXISTS (select * from RawResults where date = @cur_date) THEN
        INSERT INTO RawResults VALUES (@cur_date, 0);
    END IF;        
    SET @cur_date =  DATE_ADD(@cur_date, INTERVAL 1 DAY);
END WHILE;

SELECT *
FROM RawResults
ORDER BY date DESC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:03:45.180

MySQL 不能凭空生成缺失的日期。因此，我的建议是创建一个单独的表（可能是引擎内存）并将查询日期插入其中。然后你可以加入你的基表，如上：

```
select date_added,
(select sum(points_table.points) from points_table where points_table.date_added = inmemorytable.date_added) as "Points"
from inmemorytable
inner join userCake_Users u on u.u.user_id = '" . $user_id . "' AND u.user_id = pt.user_id 
```

未测试，因为我手头没有这些结构。内部连接和子查询可能会造成麻烦，您可能需要切换它们。

# python - 如何使用 Python 脚本将文件上传到 Google Drive？

> ID：10830820
> 
> 赞同：29
> 
> 时间：2012-05-31T09:25:05.370
> 
> 标签：python, backup, google-docs-api, google-drive-api

我需要从一些 linux 服务器将各种文件类型备份到 GDrive（不仅仅是那些可转换为 GDocs 格式的文件）。

使用 python 脚本最简单、最优雅的方法是什么？与 GDocs 有关的任何解决方案都适用吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-31T16:24:54.553

您可以使用 Documents List API 编写写入 Drive 的脚本：

[https://developers.google.com/google-apps/documents-list/](https://developers.google.com/google-apps/documents-list/)

Documents List API 和 Drive API 都与相同的资源（即相同的文档和文件）交互。

Python 客户端库中的此示例显示了如何将未转换的文件上传到云端硬盘：

[http://code.google.com/p/gdata-python-client/source/browse/samples/docs/docs_v3_example.py#180](http://code.google.com/p/gdata-python-client/source/browse/samples/docs/docs_v3_example.py#180)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-07-27T18:43:22.877

可以在此处找到使用 python 将文件保存到谷歌驱动器的当前文档： [https ://developers.google.com/drive/v3/web/manage-uploads](https://developers.google.com/drive/v3/web/manage-uploads)

但是，google drive api 处理文档存储和检索的方式并不遵循与 POSIX 文件系统相同的架构。因此，如果您希望在 linux 文件系统上保留嵌套文件的层次结构，则需要编写大量自定义代码，以便将父目录保留在 google 驱动器上。

最重要的是，谷歌很难获得对普通驱动器帐户的写入权限。您的权限范围必须包括以下链接：[https](https://www.googleapis.com/auth/drive) ://www.googleapis.com/auth/drive并且要获得访问用户普通帐户的令牌，该用户必须首先[加入一个组](https://groups.google.com/forum/#!forum/risky-access-by-unreviewed-apps)以提供对未经审查的应用程序的访问权限。并且任何创建的 oauth 令牌都有有限的保质期。

但是，如果您获得访问令牌，则以下脚本应允许您将本地计算机上的任何文件保存到 google 驱动器上的相同（相对）路径。

```
def migrate(file_path, access_token, drive_space='drive'):

    '''
        a method to save a posix file architecture to google drive

    NOTE:   to write to a google drive account using a non-approved app,
            the oauth2 grantee account must also join this google group
            https://groups.google.com/forum/#!forum/risky-access-by-unreviewed-apps

    :param file_path: string with path to local file 
    :param access_token: string with oauth2 access token grant to write to google drive
    :param drive_space: string with name of space to write to (drive, appDataFolder, photos)
    :return: string with id of file on google drive
    '''

# construct drive client
    import httplib2
    from googleapiclient import discovery
    from oauth2client.client import AccessTokenCredentials
    google_credentials = AccessTokenCredentials(access_token, 'my-user-agent/1.0')
    google_http = httplib2.Http()
    google_http = google_credentials.authorize(google_http)
    google_drive = discovery.build('drive', 'v3', http=google_http)
    drive_client = google_drive.files()

# prepare file body
    from googleapiclient.http import MediaFileUpload
    media_body = MediaFileUpload(filename=file_path, resumable=True)

# determine file modified time
    import os
    from datetime import datetime
    modified_epoch = os.path.getmtime(file_path)
    modified_time = datetime.utcfromtimestamp(modified_epoch).isoformat()

# determine path segments
    path_segments = file_path.split(os.sep)

# construct upload kwargs
    create_kwargs = {
        'body': {
            'name': path_segments.pop(),
            'modifiedTime': modified_time
        },
        'media_body': media_body,
        'fields': 'id'
    }

# walk through parent directories
    parent_id = ''
    if path_segments:

    # construct query and creation arguments
        walk_folders = True
        folder_kwargs = {
            'body': {
                'name': '',
                'mimeType' : 'application/vnd.google-apps.folder'
            },
            'fields': 'id'
        }
        query_kwargs = {
            'spaces': drive_space,
            'fields': 'files(id, parents)'
        }
        while path_segments:
            folder_name = path_segments.pop(0)
            folder_kwargs['body']['name'] = folder_name

    # search for folder id in existing hierarchy
            if walk_folders:
                walk_query = "name = '%s'" % folder_name
                if parent_id:
                    walk_query += "and '%s' in parents" % parent_id
                query_kwargs['q'] = walk_query
                response = drive_client.list(**query_kwargs).execute()
                file_list = response.get('files', [])
            else:
                file_list = []
            if file_list:
                parent_id = file_list[0].get('id')

    # or create folder
    # https://developers.google.com/drive/v3/web/folder
            else:
                if not parent_id:
                    if drive_space == 'appDataFolder':
                        folder_kwargs['body']['parents'] = [ drive_space ]
                    else:
                        del folder_kwargs['body']['parents']
                else:
                    folder_kwargs['body']['parents'] = [parent_id]
                response = drive_client.create(**folder_kwargs).execute()
                parent_id = response.get('id')
                walk_folders = False

# add parent id to file creation kwargs
    if parent_id:
        create_kwargs['body']['parents'] = [parent_id]
    elif drive_space == 'appDataFolder':
        create_kwargs['body']['parents'] = [drive_space] 

# send create request
    file = drive_client.create(**create_kwargs).execute()
    file_id = file.get('id')

    return file_id 
```

PS。我已经从`labpack`python 模块修改了这个脚本。在 rcj1492 编写的模块中有一个名为[driveClient](https://collectiveacuity.github.io/labPack/clients/#driveclient)的类，它以保留 POSIX 文件系统的方式处理保存、加载、搜索和删除 Google 驱动器上的文件。

```
from labpack.storage.google.drive import driveClient 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-01-24T11:27:57.960

我发现[PyDrive](https://pypi.python.org/pypi/PyDrive)可以优雅地处理 Drive API，并且它也有很好的[文档](http://pythonhosted.org/PyDrive/quickstart.html)（尤其是引导用户完成身份验证部分）。

**编辑：将其与**[Automating pydrive verification process](https://stackoverflow.com/questions/24419188/automating-pydrive-verification-process)和[Pydrive google drive automatic](https://stackoverflow.com/questions/46978784/pydrive-google-drive-automate-authentication) authentication的材料相结合，这使得一些很棒的文档可以让事情顺利进行。希望它可以帮助那些对从哪里开始感到困惑的人。

# c++ - 无法捕捉 TVN_SELCHANGED

> ID：10830822
> 
> 赞同：2
> 
> 时间：2012-05-31T09:25:13.990
> 
> 标签：c++, mfc, treecontrol

我在对话框中有一个 CTreeCtrl 并捕获 TVN_SELCHANGED 消息，但执行不会进入处理程序。有什么问题？我的代码：

```
BEGIN_MESSAGE_MAP(CMaterParamExtDlg, CDialog)
   ON_NOTIFY(TVN_ITEMCHANGING, IDC_MATERIAL_PROP_TREE, OnSelChangingTreeCtrl)
   ON_NOTIFY(TVN_ITEMCHANGED, IDC_MATERIAL_PROP_TREE, OnSelChangedTreeCtrl)
END_MESSAGE_MAP()

void CMaterParamExtDlg :: OnSelChangedTreeCtrl (NMHDR* pNMHDR, LRESULT* pResult) 
{
    if (m_TreeCtrl != 0)
    {
        HTREEITEM treeitem = m_TreeCtrl->GetSelectedItem();
        CString treeitemtext = m_TreeCtrl->GetItemText(treeitem);

        MessageBox(treeitemtext);
    }

    *pResult = 0;
}

void CMaterParamExtDlg :: OnSelChangingTreeCtrl (NMHDR* pNMHDR, LRESULT* pResult)
{
    if (m_TreeCtrl != 0)
    {
        HTREEITEM treeitem = m_TreeCtrl->GetSelectedItem();
        CString treeitemtext = m_TreeCtrl->GetItemText(treeitem);

        MessageBox(treeitemtext);
    }

    *pResult = 0;
} 
```

我尝试使用断点来查看执行是否进入处理程序，但没有任何反应。

树控件属性：

```
CONTROL         "",IDC_MATERIAL_PROP_TREE,"SysTreeView32",TVS_HASBUTTONS 
| TVS_HASLINES | TVS_LINESATROOT | TVS_DISABLEDRAGDROP 
| TVS_TRACKSELECT | WS_BORDER | WS_HSCROLL | WS_TABSTOP,4,4,115,218 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T14:49:08.893

Pretty simple. Use TVN_SELCHANGED instead of TVN_ITEMCHANGED. Ditto for TVN_ITEMCHANGING.

# coldfusion - ColdFusion S3 directoryList 抛出此错误“执行文件操作时发生错误 listFiles”

> ID：10830823
> 
> 赞同：1
> 
> 时间：2012-05-31T09:25:16.057
> 
> 标签：coldfusion, amazon-s3

如果我尝试使用 ColdFusion 9 中的内置 S3 集成列出 S3 目录中的文件，当任何文件包含 %（百分比）字符时，我会收到异常。完整的错误消息如下所示：

> 对文件 /activities/18057/files 执行文件操作 listFiles 时出错。
> 
> 此异常的原因是：org.apache.commons.vfs.FileSystemException：未知消息，代码为“无效的 URI 转义序列“%ui”。”..

我认为这是一个由过度热心的字符转义引起的 ColdFusion 错误，但是任何具有 S3 集成的人都可以自己尝试确认吗？我实际上只是这样做：

```
<cfset var files = directoryList("s3://my.bucket.path/somefolder/")/> 
```

它适用于“正常”文件的查找，但只要其中一个文件的文件名中有 % 就会失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:32:12.907

这似乎是 Adob​​e CF9 (ACF9) 中的一个“错误”。如果这不是错误，那肯定是奇怪的行为，因为我尝试了 Railo 3.3.3.0001（当前版本）中的代码，并且运行良好。

我从 ACF9 得到了和你一样的错误。另外，ACF10也有同样的错误。我也在 OpenBD 中尝试过，但无法读取存储桶中所需的文件夹（它读取了主存储桶、其文件并列出了该文件夹，但无法进入该文件夹）。但是，我没有经常使用 OpenBD，所以这可能是我的错误，而不是其他任何事情。

# javascript - 如果单击任何链接，如何使用 jQuery 触发函数？

> ID：10830824
> 
> 赞同：0
> 
> 时间：2012-05-31T09:25:23.517
> 
> 标签：javascript, jquery, css, html

我是一个 jQuery 新手，我花了几个小时试图找到这个问题的答案，但文档对我没有多大帮助。

我只是想改变风格：

```
#footer_menu{bottom:0;} 
```

到

```
#footer_menu{bottom:-48px;} 
```

一旦点击页面上的任何链接。没有任何 ID，我只想能够在单击任何链接时触发该功能。

我开始怀疑这根本不可能，应该通过将 ID 添加到 A 标签来完成。这是真的吗？实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T09:26:22.707

像这样尝试，[在 JsFiddle 上演示](http://jsfiddle.net/rscEB/2/)

```
$('a').click(function() {      
   $('#footer_menu').css('bottom', '-48px');
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T09:27:41.287

```
$('a').on('click', function(e) {
     $('#footer_menu').css('bottom', '-48px');
     e.preventDefault();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T09:27:34.777

```
$('a').on('click', function(event) {
    $('#footer_menu').css('bottom', '-48px');
    event.preventDefault(); // only if links should not navigate afterwards
}); 
```

您基本上只需选择所有带有`$('a')`.

# java - eclipse中字段的一致重命名

> ID：10830825
> 
> 赞同：15
> 
> 时间：2012-05-31T09:25:27.330
> 
> 标签：java, eclipse, refactoring

重构字段时，eclipse 中的默认行为是仅重命名字段，而访问器方法的名称不一致。

按`Alt+Shift+R`两次会显示一个“重命名对话框”，我可以在其中选择是否也应该重命名访问器（作为两个单独的选项）。这减轻了手动重命名访问器的痛苦，但仍然不是最理想的，涉及比就地重命名多按 3 个快捷方式，加上我通常的健忘...... :)

我想不出为什么我不希望我的重构保持一致的原因，那么有没有办法让访问器重命名默认行为？只要它有效，我就可以调整神秘的设置和设置模糊的标志。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T07:17:05.897

刚刚在 Eclipse 3.6 Helios 中尝试过（但我记得它可以在 Eclipse 3.4 和 3.5 甚至更早的版本中使用）

编辑器中的单个 Alt-Shift-R 重命名，一旦按下 ENTER，将更改相应 getter 和 setter 的方法名称。先决条件可能是您应该通过按 Alt-Shift-R 两次打开“重命名字段”对话框，然后选择重命名 getter 和重命名 setter 中的选项。随后的重命名操作将记住您对此的选择。

# javascript - 如何在NodeJS中同时更改对象（在同一个lib但不同的路径中）

> ID：10830826
> 
> 赞同：1
> 
> 时间：2012-05-31T09:25:27.993
> 
> 标签：javascript, node.js

我的项目文件夹是这样的：

*   -- *main.js*
*   --lib
*   ------libA
*   ---------- *a.js*
*   ------libB
*   ---------- *b.js*
*   ----------库
*   --------------libA
*   ------------------ *a.js*

在*main.js 中*：

```
var obja = require('./lib/libA/a');
require('./lib/libB/b'); 
```

在*b.js 中*：

```
var obja = require('./lib/libA/a'); 
```

在*a.js 中*：

```
module.exports = {}; 
```

然后，如果我更改**b.js**中的*obja*，**main.js**中的*obja*并没有改变。

我的问题是如何同时更改两个**obja**。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:29:11.183

您有两个不同的`a.js`文件 - 一个在 中`lib/libA`，另一个在`lib/libB/lib/libA`. 这是两个不同的模块，每个模块都有自己的`exports`对象。如果要引用相同的`a`模块，则需要将`b.js`文件更改为：

```
var obja = require('../libA/a'); 
```

这样，两者`main.js`和`b.js`都将引用同一个模块（中的那个`lib/libA/a.js`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:25:24.077

在您的示例中，如果您摆脱了 obja 变量并仅引用 libA.a ，您可以在这两个地方更改它 - 假设您在同一个进程/集群中

# iphone - 显示选定的其他日历中的日期

> ID：10830828
> 
> 赞同：0
> 
> 时间：2012-05-31T09:25:43.780
> 
> 标签：iphone, uidatepicker

我有两个日历，当我选择第一个日历值时，我的第二个日历将显示上一个日历值 +2 （即，当我从第一个日历中选择 2/07/2012 时，我的第二个日历将显示 4/07/2012）是有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:35:55.033

只需添加适当的秒数即可创建一个新日期：

```
NSDate *newDate = [selectedDate dateByAddingTimeInterval:60*60*24*2]; 
```

并将该日期用作新日历的基础。

# python - 从 tomcat .dbx 文件迁移数据

> ID：10830829
> 
> 赞同：0
> 
> 时间：2012-05-31T09:25:48.213
> 
> 标签：python, tomcat, jetty, data-migration, web-inf

我想将数据从旧的 Tomcat/Jetty 网站迁移到在 Python 和 Django 上运行的新网站。理想情况下，我想通过直接从旧数据库中读取数据并将它们存储在新数据库中来填充新网站。

问题是我得到的数据库是以一堆的形式出现的`WEB-INF/data/*.dbx`，我没有找到任何方法来读取它们。所以，我有几个问题。

*   使用哪种格式`WEB-INF/data/*.dbx`？
*   是否有用于直接从`WEB-INF/data/*.dbx`文件中读取的 python 模块？
*   是否有一些外部工具可以`WEB-INF/data/*.dbx`将其转储为可由 python 解析的 ascii 格式？
*   如果有人尝试过类似的数据迁移，与从旧网站抓取数据相比如何？（假设所有重要数据都可以被抓取）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:55:37.680

多年来，各种软件都使用了“.dbx”后缀，因此它几乎可以是任何东西。了解您真正拥有的唯一方法是浏览遗留 Java 应用程序的源代码（或相关文档或询问作者等）。

wrt/scraping，根据应用程序的不同，结果可能会很痛苦。

# c# - “指定的模块无法找到。” 从 C# 调用 WinRT 时发生

> ID：10830830
> 
> 赞同：1
> 
> 时间：2012-05-31T09:26:04.340
> 
> 标签：c#, windows, windows-runtime, c++-cx

信息

> 指定的模块无法找到。（来自 HRESULT 的异常：0x8007007E）

堆栈跟踪：

```
at System.StubHelpers.StubHelpers.GetWinRTFactoryObject(IntPtr pCPCMD)
at winrt.Wraper.get_Instance()
at XXX.App.OnLaunched(LaunchActivatedEventArgs args) in c:\XXX\App.xaml.cs:line 48 
```

为什么会发生这种情况？谢谢。

# iphone - 如何将 Twitter oauth 添加到 iPhone 项目？

> ID：10830831
> 
> 赞同：1
> 
> 时间：2012-05-31T09:26:07.113
> 
> 标签：iphone, twitter-oauth

我正在尝试添加以下内容：[https](https://github.com/bengottlieb/Twitter-OAuth-iPhone) ://github.com/bengottlieb/Twitter-OAuth-iPhone 自述文件没有一步一步给出，所以我只是尝试将整个文件夹拖到我的项目中，然后当我尝试编译我在#include 上得到一个找不到文件的错误

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T00:09:31.240

我找到了解决方案，它在这个页面的底部：http: [//www.cocos2d-iphone.org/forum/topic/6136](http://www.cocos2d-iphone.org/forum/topic/6136)

为了让您的项目能够编译，您需要首先包含 libxml2 框架（右键单击您的项目并选择添加现有框架）。

现在右键单击您的项目并选择“获取信息”。在构建选项卡中，向下滚动直到看到“搜索路径”部分。在“标头搜索路径”字段中，添加“$(SDKROOT)/usr/include/libxml2”</p>

最后，在您的项目中展开 Twitter+OAuth 组，然后展开 MGTwitterEngine 组。打开 MGTwitterEngine.m 并将 #define USE_LBXML 0 更改为 #define USE_LIBXML 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:33:35.007

您将必须添加以下框架 libxml 并在项目设置中编辑标题搜索路径以包含

```
"$(SDK_DIR)"/usr/include/libxml2 
```

有关更多信息，请阅读以下 [LibXML2.dylib 和 Xcode4](https://stackoverflow.com/questions/4903939/libxml2-dylib-and-xcode4)

# spring - 通过 Spring 访问集群远程 EJB 时出现间歇性故障

> ID：10830838
> 
> 赞同：1
> 
> 时间：2012-05-31T09:26:23.950
> 
> 标签：spring, ejb, weblogic, cluster-computing

我有一个 Spring 应用程序，它使用 WebLogic 中托管的远程无状态 EJB。

```
<jee:remote-slsb id="itemService"
    jndi-name="org.example.ItemService"
    business-interface="org.example.ItemService"
    cache-home="false" lookup-home-on-startup="false"
    home-interface="org.example.ItemServiceHome"
    resource-ref="false" refresh-home-on-connect-failure="true">
    <jee:environment>
        java.naming.factory.initial=weblogic.jndi.WLInitialContextFactory
        java.naming.provider.url=t3://server1:7101,server2:7101
    </jee:environment>
</jee:remote-slsb> 
```

我的应用程序从服务器获取项目，因此：

```
ItemEntry[] itemEntries = itemService.listAvailableItems(criteria);
for(ItemEntry entry: itemEntries) {
    Item item = itemService.getItemAccessObject(entry.getKey());
    // Do something with item
} 
```

这在大多数情况下都可以正常工作。

但是，当项目非常新时（在最后几秒钟内放入数据库），当我尝试对项目执行任何操作时会出现间歇性故障：

```
java.rmi.NoSuchObjectException: CORBA OBJECT_NOT_EXIST 1330446337 No; nested exception is: 
       org.omg.CORBA.OBJECT_NOT_EXIST:   vmcid: OMG  minor code: 1  completed: No 
```

如上所述，对于新对象，失败似乎发生在大约 50% 的尝试中，并且在 for() 循环中会出现失败和成功的混合。

如果我将 t3:// 地址更改为仅包含一个主机名：端口，问题就会消失。

所以，我的工作理论是 listAvailableItems() 调用会转到集群中的一台服务器——有问题的项目已经到达，失败的 getItemAccessObject() 调用会转到另一台服务器，项目仍在同步.

如果我绕过 Spring 并自己管理 EJB 上下文，我将无法重现该问题。

问题：

1.  我的工作理论现实吗？（请注意，服务器集群对我来说是一个黑匣子）
2.  Spring SimpleRemoteStatelessSessionProxyBean 和/或 WebLogic 客户端如何在集群成员之间划分调用？
3.  有没有办法让一系列调用转到同一个集群成员？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:13:45.067

根据经验证据回答我自己的问题。

如果您使用 连接到 Weblogic `wlclient.jar`，它将使用核心 Java RTE 中的 IIOP 实现。

如果您使用 连接到 Weblogic `wlfullclient.jar`，它将使用 WebLogic 的专有 T3 协议。

服务器之间的 IIOP 实现循环。

T3 实现似乎与单个服务器保持会话，至少在它可以做到的时候。

# jquery - 如何使用 jQuery 处理 JSONP 回调？

> ID：10830840
> 
> 赞同：1
> 
> 时间：2012-05-31T09:26:30.517
> 
> 标签：jquery, api, jsonp, flickr

我正在使用 jQuery 对[flickr API](http://www.flickr.com/services/feeds/)进行 ajax 调用。

到目前为止，我已经成功调用了[公共照片](http://www.flickr.com/services/feeds/docs/photos_public/)API 并显示了结果。这是我使用的 jQuery：

```
getPics = function(){
    $.ajax({
        url: 'http://api.flickr.com/services/feeds/photos_public.gne?format=json&jsoncallback=callbackForImages',
        dataType: 'jsonp'
    });
}
callbackForImages = function(data){
    clearResults();
    $.each(data.items, function(i, item) {
        $("<img/>").attr("src", item.media.m).appendTo("#results");
    });
} 
```

但是，当我尝试使用[论坛 API](http://www.flickr.com/services/feeds/docs/forums/)时，我不确定如何格式化回调函数。

这是我到目前为止所拥有的。

```
getTopics = function(){
    $.ajax({
        url: 'http://api.flickr.com/services/feeds/forums.gne?format=json&jsoncallback=callbackForTopics',
        dataType: 'jsonp'
    });
}

callbackForTopics = function(data){
    clearResults();
    //this is the bit that's broken
    $.each(data.items, function()) {
        $("title").value.appendTo("#results");
    }
}

clearResults = function(){
    $("#results").html('<div id="results"></div>');
} 
```

任何帮助理解如何使用返回的 JSONP 将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:33:31.107

fetch 部分似乎是错误的。尝试类似的东西

```
$.each(data.items, function(idx,val) {
   $("#results").append($('<div></div>').text(val.title));
}); 
```

示例：http: [//jsfiddle.net/Y9Jj3/2/](http://jsfiddle.net/Y9Jj3/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:33:55.577

第一段代码的区别：

```
callbackForImages = function(data){ 
```

第二段代码：

```
callbackForTopics = function(){ 
```

您`data`在函数定义中缺少参数。

另外，这很奇怪：

```
$("title").value.appendTo("#results"); 
```

不知道你的意思是什么，但这肯定行不通。

顺便说一句，这可以使用浏览器开发工具（例如 Firebug）轻松捕获

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T13:14:21.247

感谢 Jack 和 Sofl 提供的答案，我知道该怎么做。我的回调方法应该如下：

```
callbackForTopics = function(data){
    clearResults();
    $.each(data.items, function(i, item) {
        $("#results").append($('<div></div>').text(item.title));
    });
} 
```

# perl - 在 perl 中实现 sha-256

> ID：10830844
> 
> 赞同：7
> 
> 时间：2012-05-31T09:26:43.787
> 
> 标签：perl, padding, sha

我正在努力实现 sha-256 算法。我对消息的填充有问题。对于 sha-256，您必须在消息的末尾附加一个位，到目前为止我已经达到了`$message .= (chr 0x80);` 下一步应该是用 0 填充 emtpy 空间（512 位块）。我用这个公式计算它：l+1+k=448-l 然后将它附加到消息中。现在我的问题来了：在最后一个 64 位块中附加消息长度的二进制表示，并再次用 0 填充其余部分。由于 perl 自己处理它们的数据类型，所以没有“字节”数据类型。我怎样才能确定我应该附加哪个值？

另请参阅官方规范： [http ://csrc.nist.gov/publications/fips/fips180-3/fips180-3_final.pdf](http://csrc.nist.gov/publications/fips/fips180-3/fips180-3_final.pdf)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T10:02:53.697

首先，我希望你把它作为一个练习——`Digest`核心中有一个模块已经可以很好地计算 SHA-256。

请注意，`$message .= (chr 0x80);`附加一个字节，而不是一位。如果您真的需要按位操作，请查看该`vec`函数。

要获得整数的二进制表示，您应该使用[pack](http://perldoc.perl.org/functions/pack.html)。要使其达到 64 位，请执行以下操作

```
$message .= pack 'Q', length($message) 
```

请注意，“Q”格式仅适用于 64 位 perls；如果您的不是一个，只需将四个 0 字节与一个 32 位值（包格式`L`）连接起来。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T19:58:03.220

如果可能的话，把一些东西从架子上拿下来。您不想推出自己的 SHA-256 实现，因为要获得官方的祝福，您必须对其进行认证。

也就是说，规范是

> ### 5.1.1 SHA-1、SHA-224 和 SHA-256
> 
> 假设消息的长度*M*为*l*位。将该位附加`1`到消息的末尾，后跟*k*个零位，其中*k*是方程的最小非负解
> 
> *l* + 1 + *k* ≡ 448 mod 512
> 
> 然后附加等于使用二进制表示表示的数字*l的 64 位块。*例如，（8 位 ASCII）消息“<strong>abc”的长度为 8 × 3 = 24，因此该消息用一位填充，然后是 448 - (24 + 1) = 423 个零位，然后消息长度，成为 512 位填充消息
> 
> ```
>  423       64
>                                  .-^-.  .---^---.
> 01100001  01100010  01100011  1  00…00  00…011000
>    “a”       “b”       “c”                  '-v-'
>                                              l=24 
> ```
> 
> 那么填充消息的长度现在应该是 512 位的倍数。

您可能很想使用[`vec`](http://perldoc.perl.org/functions/vec.html)它，因为它允许您寻址单个位，但您必须解决时髦的寻址问题。

> 如果位为 4 或更少，则将字符串分解为字节，然后将每个字节的位分解为 8/ *BITS*组。字节的位以 little-endian-ish 方式编号，如`0x01`, `0x02`, `0x04`, `0x08`, `0x10`, `0x20`, `0x40`, `0x80`。例如，将单个输入字节`chr(0x36)`分成两组给出一个列表`(0x6, 0x3)`；把它分成 4 组给出`(0x2, 0x1, 0x3, 0x0)`。

相反，[`pack`](http://perldoc.perl.org/functions/pack.html)模板`B*`指定

> 一个位串（每个字节内的降序位顺序）。

和`N`

> “网络”（大端）顺序的无符号长整数（32 位）。

后者对于组装消息长度很有用。虽然`pack`有`Q`quad的参数，但结果是本机顺序。

从一些准备工作开始

```
our($UPPER32BITS,$LOWER32BITS);
BEGIN {
  use Config;
  die "$0: $^X not configured for 64-bit ints"
    unless $Config{use64bitint};

  # create non-portable 64-bit masks as constants
  no warnings "portable";
  *UPPER32BITS = \0xffff_ffff_0000_0000;
  *LOWER32BITS = \0x0000_0000_ffff_ffff;
} 
```

然后你可以定义`pad_message`为

```
sub pad_message {
  use bytes;

  my($msg) = @_;
  my $l = bytes::length($msg) * 8;
  my $extra = $l % 512;  # pad to 512-bit boundary
  my $k = 448 - ($extra + 1);

  # append 1 bit followed by $k zero bits
  $msg .= pack "B*", 1 . 0 x $k;

  # add big-endian length
  $msg .= pack "NN", (($l & $UPPER32BITS) >> 32), ($l & $LOWER32BITS);

  die "$0: bad length: ", bytes::length $msg
    if (bytes::length($msg) * 8) % 512;

  $msg;
} 
```

假设代码打印填充消息

```
my $padded = pad_message "abc";

# break into multiple lines for readability
for (unpack("H*", $padded) =~ /(.{64})/g) {
  print $_, "\n";
} 
```

然后输出是

```
616263800000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000018
```

符合规范。

# java - java logging properties：将某个类记录到特定的日志文件中

> ID：10830847
> 
> 赞同：2
> 
> 时间：2012-05-31T09:26:52.953
> 
> 标签：java, logging, properties, java.util.logging

我使用 java.util.logging 的属性文件并希望记录包下的所有类：

```
aaa.bbb.ccc.* 
```

正常的方式（即信息，很好，更好）但类

```
aaa.bbb.ccc.ddd.MyClass 
```

在其自己的日志文件“My Class.log”中，级别更高。

配置只能通过属性文件完成。这会是什么样子？

我尝试了各种方法（例如不同的处理程序）但没有任何成功：两个日志文件都写入它从来没有工作过。

为了使问题更具体-我尝试的配置：

```
handler.performance.class=com.logging.handler.FileHandler
handler.performance.file=${LOGGING_ROOT}/performance.log
handler.performance.level=FINE

handler.fine.class=com.logging.handler.FileHandler
handler.fine.file=${LOGGING_ROOT}/finer.log
handler.fine.level=FINE

handler.async.class=com.logging.handler.AsyncBufferHandler
handler.async.level=ALL
handler.async.targets=fine

handler.asyncperf.class=com.logging.handler.AsyncBufferHandler
handler.asyncperf.level=ALL
handler.asyncperf.targets=performance

com.myapp.handlers=async,console
com.myapp.useParentHandlers=false

com.myapp.common.logging.handlers=asyncperf
com.myapp.common.logging.useParentHandlers=false 
```

我要记录到这个单独的性能日志的类位于 com.myapp.common.logging...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T11:44:06.920

找到了解决方案 - 这是一个错误的初始化：

记录器应初始化为：

```
Logger.getLogger(MyClass.class.getName()) 
```

然后是配置：

```
com.myapp.common.logging.MyClass.handlers=asyncperf
com.myapp.common.logging.MyClass.useParentHandlers=false 
```

根据需要将此类的所有日志记录消息记录在指定的单独文件中！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:35:42.133

为两个目标文件定义两个 File appender

定义一个根记录器以使用第一个附加程序

为特殊类定义第二个记录器，以使用另一个附加器

将记录器的可加性设置为 false 以使任何消息都转到一个文件而不是两个文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:28:58.803

我认为您有问题，因为您无法配置 2 个默认 FileHandler，只能配置其中一个。因此，尝试实现您个人的 FileHandler 子类并将其配置为单独的处理程序。我不记得我们是否可以为单独的类或只为包配置记录器，所以尝试也将处理程序配置为`MyClass`.

# text - 语义搜索引擎和导航器

> ID：10830852
> 
> 赞同：1
> 
> 时间：2012-05-31T09:27:09.943
> 
> 标签：text, nlp, semantics, nltk, aiml

嗨，我在 AI 上做了一个短期课程，我们设计了一个基于 AIML 和 python 的聊天机器人。我有一个新任务来设计某种形式的语义搜索引擎。我希望人们能够浏览数据或搜索问题并给他们结果。最初它将针对特定主题，例如交通和地理。来自用户的一些示例输入：

1.  我从 x 到 y 需要多少钱？

    答：它会花费你 26 美元

2.  x 离 z 多远？

    答：25英里

3.  用户可以添加最喜欢的路线，这样他们就可以简单地输入，添加最喜欢的路线，然后将要求用户输入 f 路线。

    Ans：您是否要求在您最喜欢的路线中添加一个条目？

    用户：是的。

    Ans: 请输入您喜欢的路线。

4.  显示我的常用路线。

    Ans：您的常用路线是 x、y 和 z。

因此，正在搜索的数据可能特定于用户，因此可能必须使用数据库。一些外部数据可能会引发谷歌地图查询距离。有些问题可能只需要聊天机器人的回应。

那么我应该在用户输入时做什么？标记它，阻止它，解析它？

我希望在某处使用 AIML，但我读了一篇文章[http://knytetrypper.proboards.com/index.cgi?board=gbot&action=print&thread=285](http://knytetrypper.proboards.com/index.cgi?board=gbot&action=print&thread=285)。说 AIML 只适用于模式匹配。有人请指出我正确的方向。我下载了 NLTK，它似乎很有用，但我不知道它本身是否可以满足我的要求。

有没有类似的项目文章？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:14:42.117

这是一个非常困难的问题。如果您将输入限制在一个非常小的空间内，那么它是可行的。在这一点上，虽然您只是使用一个词汇表并且对每个可能的查询都有基本的命令。

有几种方法可以区分查询类型：1) 解析并尝试使用所有信息 2) 部分解析/pos 标记 - 查找动词 3) 机器学习/分类方法，使用 pos 作为特征、距离、单词/结构，例如“到”/“从”

...然后您可以在正确分类查询后尝试提取查询参数。

在您非常确定它是哪种查询之前，我会避免进行解析 - 分类方法是最好的第一步，并且对于弄乱该 NLTK 非常有用。

# c# - 从 PartialView MVC3 访问父级的值

> ID：10830853
> 
> 赞同：0
> 
> 时间：2012-05-31T09:27:12.993
> 
> 标签：c#, asp.net-mvc-3

我需要在编辑模式下保持学生的兴趣有部分视图，其中有两个列表框 - 一个用于当前兴趣，另一个用于可用（未添加到学生资料中）每个兴趣都有一个 ajax 操作链接。当我点击它时，它会增加学生当前的兴趣。问题是——我需要发送来自父视图的学生 ID（即不是来自部分视图），并且学生 ID 在 url 中，或者——我如何在部分视图中访问学生 ID

// 代码示例

```
@model StdMan.Models.Student

@{
    ViewBag.Title = "Edit";
}

<h2>Edit</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="../../../../Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Project</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.StId)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.StId)
            @Html.ValidationMessageFor(model => model.StId)
        </div>

    <div class="editor-label">
            Intested In              
        </div>
        <div class="editor-field" id="Interest">
          @Html.Action("PartialAddInterest", "Interest")
        </div>  

     </fieldset>
    <p>
            <input type="submit" value="Save" />
        </p>
} 
```

////////// -- PartialView PartialAddInterest.cshtml

```
@model IEnumerable<StdMan.Models.Interest>

<table>
@foreach (var item in ViewBag.Added)
{
    <tr>
        <td>@item.Name

            @Ajax.ActionLink("Remove", "RemoveInterest",new { id = item.IsId },
    new AjaxOptions
    {
        UpdateTargetId = "Interest",
        InsertionMode = InsertionMode.Replace,
        HttpMethod = "GET"
    })
        </td>
    </tr>
}
</table>

<table>

@foreach (var item in ViewBag.Rem)
{
    <tr>
        <td>@item.Name

            @Ajax.ActionLink("Add", "AddInterest", new { id = item.IsId },
    new AjaxOptions
    {
        UpdateTargetId = "Interest",
        InsertionMode = InsertionMode.Replace,
        HttpMethod = "GET"
    })
        </td>
    </tr>
}

</table> 
```

我必须将 model.StId 与 Ajax Actionlink 一起传递，例如 @Ajax.ActionLink("Add", "AddInterest", new { id = item.IsId, StId = @Model.StId },

在控制器中

```
 public ActionResult AddInterest( int id, int StId)
 {
          //logic to add interest in specific student profile depend on StId
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:50:54.477

您可以将学生 ID 传递给`PartialAddTool`子操作：

```
@Html.Action("PartialAddTool", "Interest", new { id = Model.StId }) 
```

现在控制器操作将具有学生 ID：

```
public ActionResult PartialAddTool(int stdId)
{
    ...
} 
```

现在剩下的就是让`PartialAddTool`操作在传递给局部视图的视图模型上设置一些属性。目前，这个局部视图似乎是强类型的，`IEnumerable<StdMan.Models.Interest>`但您可以创建一个具有 2 个属性的新视图模型：学生 ID 和兴趣集合。这样，部分视图将具有学生 ID，并且可以在生成最终传递给`AddInterest`操作的链接时使用它。

# asp.net - 动态添加控件时更改 asp.net html 输出

> ID：10830855
> 
> 赞同：2
> 
> 时间：2012-05-31T09:27:21.780
> 
> 标签：asp.net, html

我正在向 Asp.Net webforms 页面上的面板添加控件，并且我想更改它生成的 html。我正在做的一个简化示例：

```
Dim control1 As New HiddenField()
control1.ID = "Control1"
control1.Value = "Text"

Dim control2 As New HiddenField()
control2.ID = "Control2"
control2.Value = "Text"

Panel1.Controls.Add(control1)
Panel1.Controls.Add(control2) 
```

这会生成以下 HTML：

```
<input type="hidden" name="Control1" id="Control1" value="Text" /><input type="hidden" name="Control2" id="Control2" value="Text" /> 
```

有没有办法确保每个控件之间都有换行符？当您添加更多控件时，当前源是一个相当大的混乱。我希望 html 的格式如下：

```
<input type="hidden" name="Control1" id="Control1" value="Text" />
<input type="hidden" name="Control2" id="Control2" value="Text" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:32:17.417

假设两个控件都应该添加到 Panel1，试试这个......

```
Panel1.Controls.Add(control1)
Panel1.Controls.Add(New LiteralControl(Environment.NewLine))
Panel1.Controls.Add(control2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:32:11.100

如果您不喜欢某些控件如何自行生成，您始终可以自己创建一个。这是一个相当简单的例子，我相信你会在几分钟内完成它。

# java - 需要帮助在 Java 的 Breakout 游戏中移动桨

> ID：10830857
> 
> 赞同：2
> 
> 时间：2012-05-31T09:27:28.760
> 
> 标签：java, processing, keylistener, key-bindings

我正在为我的 AP 计算机科学课程制作游戏 Breakout。我已经完成了大部分操作，但我不知道如何使用键盘上的箭头键来左右移动桨。我能得到一些帮助吗？我会很感激。

这是我到目前为止所拥有的：

主类：

```
import java.util.ArrayList;
import java.util.Random;
import processing.core.PApplet;
import java.util.random;

public class Main extends PApplet {

ArrayList<Brick> bricks = new ArrayList<Brick>();
ArrayList<Ball> balls = new ArrayList<Ball>();
ArrayList<Paddle> paddles = new ArrayList<Paddle>();
Paddle paddle;
Brick brick;
Brick bricklevel2;
Ball ball;
Random g = new Random();

public void setup() {
    size(600, 600);

    for (int i = 0; i < 4; i ++){
        brick = new Brick(100 + 100*i, 100, 10, 30, color(255, 0, 0), this);
        bricks.add(brick);
    }
    for (int i = 0; i < 4; i ++){
        bricklevel2 = new Brick(100 + 100*i, 110, 10, 30, color(255, 0, 0), this);
        bricks.add(bricklevel2);
    }

    balls.add(ball = new Ball(250, 300, color(89, 700, 999), 20, g.nextInt(20)-10, 10, this));
    paddles.add(paddle = new Paddle(300 - 105, 500, 50, 500, color(500, 65, 800), this));

}

public void draw() {
    background(0);
    for(int i = 0; i < bricks.size(); i++){
        Brick brick = bricks.get(i);

        if (brick.isColliding(ball)) {
            bricks.remove(i);
        }
        brick.draw(); 
    }
    for(Ball b: balls){
        b.update(brick, paddle);
        b.draw();

    }
    for(Paddle p: paddles){
        p.update(paddle);
        p.draw();
    }

}

public static void main(String args[]) {
    PApplet.main(new String[] {"Main"});
}
} 
```

桨类：

```
import java.awt.Color;
import processing.core.PApplet;

 public class Paddle{
private int xPosition, yPosition, length, width, color;
private PApplet p;

public Paddle(int x, int y, int l, int w, int c, PApplet p) {
    xPosition = x;
    yPosition = y;
    length = l;
    width = w;
    color = c;
    this.p = p;

}

public void draw() {
    p.fill(color);
    p.rect(xPosition, yPosition, 210, 17);
}

public void update(Paddle paddle) {
    // TODO Auto-generated method stub

}

public int getLeft(){
    int n = xPosition - 105;
    //System.out.println(n);
    return n;
}

public int getRight(){
    int n = xPosition + 105;
    //System.out.println(n);
    return n;

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:42:45.977

看看`KeyEvent`和`KeyListener`。[Oracle 的本](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)教程应该可以帮助您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:44:32.703

如果您使用的是 Processing，最好阅读这个小教程： http: [//processing.org/reference/keyPressed_.html](http://processing.org/reference/keyPressed_.html)

他们解释了如何拦截按键然后做出响应。

# ruby-on-rails - 模型中的 Rails 关联“父”引用

> ID：10830859
> 
> 赞同：0
> 
> 时间：2012-05-31T09:27:33.143
> 
> 标签：ruby-on-rails, ruby

我的以下问题可能表明对 Ruby、Rails 甚至一般的 oOP 概念中的实际工作方式缺乏正确的理解，相信我在提问之前我思考和搜索了很多，但我什至无法形成正确的搜索查询找到正确的答案，所以无论如何这就是我想要实现的......

```
song = Artist.first.albums.first.songs.first 
```

这 - 据我了解 - 将调用歌曲模型并将艺术家模型和专辑模型引用传递给歌曲模型以形成 SQL 查询以从数据库中获取数据 - 因为我正在使用 ActiveRecord。

真正的问题；有没有办法知道哪个艺术家和专辑称为歌曲模型？这在我不想为专辑/艺术家传递额外参考的多对多关系中特别有用。

因此，如果我的模型中有一个函数，无论出于何种原因，它都能分辨出是谁创建了这个 Song 实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:50:09.623

这是太多的链接，它使事情变得过于复杂。

但是，假设您在 Song 模型中声明了和关系，您`song.artist`可以`song.album`检索歌曲的 Artist 和 Album 。`belongs_to :album``belongs_to :artist`

但是，您可以简单地执行以下操作：

```
artist = Artist.first
album = artist.albums.first
songs = album.songs 
```

这样你就有了艺术家，你想要的他/她的专辑（在这种情况下是第一个）和它的歌曲都在不同的变量上，你可以单独处理它们。

# wpf - 下拉菜单与其他控件重叠

> ID：10830863
> 
> 赞同：0
> 
> 时间：2012-05-31T09:27:46.007
> 
> 标签：wpf, menu

在我的 WPF 应用程序中，我想在窗口中的其他一些元素下获得一个下拉菜单。展开菜单时，它会与其他控件重叠。但我需要这些控件随时保留在菜单上。

我尝试使用 ZIndex，但没有任何成功。是否有可能以某种方式在其他控件下显示下拉菜单？

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:31:19.553

您无法通过下拉菜单实现此目的，因为根据定义，它显示在当前窗口上方的单独窗口中。

因此，如果您希望某些控件出现在其他控件下，则必须仅使用普通控件，例如`Grid`，使它们在开始时不可见，并在需要“下拉菜单”出现时立即显示（当然之后隐藏）。

# eclipse - 我可以使用 eclipse .classpath 文件设置类路径并从命令行启动 jar 吗？

> ID：10830864
> 
> 赞同：4
> 
> 时间：2012-05-31T09:27:45.843
> 
> 标签：eclipse, classpath

在设置了eclipse构建路径之后，我想使用我所做的（在.classpath中）来启动我的项目的一个版本，我只有jar并且没有编译依赖项，使用相同的类路径。这可以使用普通的java命令吗？有可能在命令行上吗？我需要 eclipse 才能使用 .classpath 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:42:07.360

如果你想使用你在 eclipse 中所做的构建路径设置，你应该使用“Run As”命令从 eclipse 运行你的程序。但是，这不会从 jar 中运行程序，而是从您编译的类中运行。

如果您计划从命令行运行 jar 文件，则需要使用“-cp”选项设置类路径。我不知道有什么方法可以将 eclipse .classpath 文件传递​​给 jvm。

# java - 在java中实例化泛型类型

> ID：10830865
> 
> 赞同：7
> 
> 时间：2012-05-31T09:27:56.220
> 
> 标签：java, templates, generics, object, instantiation

我被困住了。来自 C++，我认为这会简单地工作，但事实并非如此。你能给我一个建议吗？我会尽量不在用于 T 的每个类中使用一种创建方法。

```
public class A<T>{

    private T t_;

    public A(){
        t_ = new T(); //error
    }

} 
```

另外我不想让构造函数看起来像： A(Class classT){ ... 理想情况下，我想要这样的 c++ 代码。

```
template<class T>
class A{
private:
   T t_;

public:
   A(){}

}; 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-31T09:30:22.570

除了类型擦除的问题——这在任何情况下都是不可能的——你根本不能保证它`T`有一个暴露的、无参数的构造函数！

传统的解决方法是传递提供可用于获取对象的方法的*工厂*`T`对象。一个简单的例子是

```
interface Factory<T> {
  T create();
} 
```

然后你的班级可以得到 a`Factory<T>`并要求`create()`它得到更多`T`的 s。例如，更复杂的示例可能需要`create`方法的附加参数或重载。

不太漂亮的解决方法包括显式反射、传递`Class<T>`对象。例如，`ArrayList.class.newInstance()`返回一个新构造的 raw `ArrayList`。您必须显式地传递`Class`对象，并且基于反射的方法比普通的构造函数或工厂对象要慢（尽管最近反射的速度一直在提高）。您还依赖于公开无参数构造函数的类，但情况并非总是如此。可以让它发挥作用，但这绝不是我所说的“令人愉快”。

（也就是说，作为参考，有迹象表明在 Java 8 中，Lambda 项目和朋友的情况可能会有所改变。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-31T09:29:12.477

你不能在 Java 中做这样的事情。阅读类型擦除：[http ://docs.oracle.com/javase/tutorial/java/generics/erasure.html](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-31T09:30:02.307

很抱歉让您失望，但这在没有构造函数的 java 中是完全不可能的。

Java 在运行时丢弃通用信息（参见类型擦除）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T09:34:27.137

尝试这个：

```
private <E extends ISomething> E createInstance(Class<E> clazz) {
        E ret;
        try {
            ret = clazz.newInstance();
            ret.setSomething(something);

        } catch (InstantiationException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        }
        return ret;
    } 
```

# python - Python 对象持久化

> ID：10830869
> 
> 赞同：11
> 
> 时间：2012-05-31T09:28:23.420
> 
> 标签：python, persistence

我正在寻求有关在 Python 中实现对象持久性的方法的建议。更准确地说，我希望能够将 Python 对象链接到文件，这样任何打开该文件表示的 Python 进程共享相同的信息，任何进程都可以更改其对象，并且更改将传播到其他进程，即使所有“存储”对象的进程都已关闭，该文件仍将保留并且可以被另一个进程重新打开。

我在我的 Python 发行版中找到了三个主要的候选者——anydbm、pickle 和 shelve（dbm 看起来很完美，但它只适用于 Unix，而且我在 Windows 上）。但是，它们都有缺陷：

*   anydbm 只能处理字符串值的字典（我正在寻求存储一个字典列表，所有这些字典都有字符串键和字符串值，但理想情况下我会寻找一个没有类型限制的模块）
*   搁置要求在更改传播之前重新打开文件 - 例如，如果两个进程 A 和 B 加载相同的文件（包含搁置的空列表），并且 A 将项目添加到列表并调用 sync()，B 将在重新加载文件之前，列表仍然是空的。
*   pickle（我目前用于我的测试实现的模块）具有与搁置相同的“重新加载要求”，并且也不会覆盖以前的数据 - 如果进程 A 将 15 个空字符串转储到文件中，然后是字符串 'hello'，进程 B 必须加载文件 16 次才能获得“hello”字符串。我目前正在处理这个问题，方法是在任何写入操作之前重复读取直到文件结束（“在写入之前擦干净石板”），并通过重复每个读取操作直到文件结束，但我觉得必须有更好的方法。

我的理想模块的行为如下（“A>>>”表示进程 A 执行的代码，“B>>>”表示进程 B 执行的代码）：

```
A>>> import imaginary_perfect_module as mod
B>>> import imaginary_perfect_module as mod
A>>> d = mod.load('a_file') 
B>>> d = mod.load('a_file')
A>>> d
{}
B>>> d
{}
A>>> d[1] = 'this string is one'
A>>> d['ones'] = 1   #anydbm would sulk here
A>>> d['ones'] = 11 
A>>> d['a dict'] = {'this dictionary' : 'is arbitrary', 42 : 'the answer'}
B>>> d['ones']   #shelve would raise a KeyError here, unless A had called d.sync() and B had reloaded d
11    #pickle (with different syntax) would have returned 1 here, and then 11 on next call
(etc. for B) 
```

我可以通过创建自己的使用 pickle 的模块来实现此行为，并编辑转储和加载行为，以便它们使用我上面提到的重复读取 - 但我很难相信这个问题从未发生过并已得到修复靠，以前更有才华的程序员。此外，这些重复读取对我来说似乎效率低下（尽管我必须承认，我对操作复杂性的了解是有限的，并且这些重复读取可能在“幕后”在其他明显更平滑的模块（如 shelve）中进行）。因此，我得出结论，我必须缺少一些可以为我解决问题的代码模块。如果有人能指出正确的方向，或者就实施提供建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-31T09:54:29.483

请改用[`ZODB`](http://zodb.org/)（Zope 对象数据库）。在 ZEO 的支持下，它可以满足您的要求：

*   Python 对象的透明持久性

    ZODB 在下面使用泡菜，因此任何可以泡菜的东西都可以存储在 ZODB 对象存储中。

*   完全兼容 ACID 的事务支持（包括保存点）

    这意味着当一个进程准备就绪时，它们会从一个进程传播到所有其他进程，并且每个进程在整个事务中对数据都有一致的视图。

ZODB 已经存在十多年了，所以你猜想这个问题之前已经解决了是对的。:-)

ZODB 让您插入存储；最常见的格式是 FileStorage，它将所有内容存储在一个 Data.fs 中，并为大型对象提供可选的 blob 存储。

一些 ZODB 存储是其他存储的包装器以添加功能；例如，DemoStorage 将更改保存在内存中，以方便单元测试和演示设置（重新启动，您将再次拥有全新的状态）。BeforeStorage 为您提供了一个时间窗口，仅返回给定时间点*之前的事务数据。*后者有助于为我恢复丢失的数据。

[ZEO](http://www.zodb.org/documentation/guide/zeo.html)就是这样一个插件，它引入了客户端-服务器架构。使用 ZEO 可以让您一次从多个进程访问给定的存储；如果你只需要一个进程的多线程访问，你就不需要这一层。

[使用RelStorage](http://pypi.python.org/pypi/RelStorage)也可以实现相同的目的，它将 ZODB 数据存储在关系数据库中，例如 PostgreSQL、MySQL 或 Oracle。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-15T04:39:50.180

对于初学者，您可以将您的搁置数据库移植到 ZODB 数据库，如下所示：

```
#!/usr/bin/env python
import shelve
import ZODB, ZODB.FileStorage
import transaction
from optparse import OptionParser
import os
import sys
import re

reload(sys)
sys.setdefaultencoding("utf-8")

parser = OptionParser()

parser.add_option("-o", "--output", dest = "out_file", default = False, help ="original shelve database filename")
parser.add_option("-i", "--input", dest = "in_file", default = False, help ="new zodb database filename")

parser.set_defaults()
options, args = parser.parse_args()

if options.in_file == False or options.out_file == False :
    print "Need input and output database filenames"
    exit(1)

db = shelve.open(options.in_file, writeback=True)
zstorage = ZODB.FileStorage.FileStorage(options.out_file)
zdb = ZODB.DB(zstorage)
zconnection = zdb.open()
newdb = zconnection.root()

for key, value in db.iteritems() :
    print "Copying key: " + str(key)
    newdb[key] = value

transaction.commit() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-27T22:08:03.553

我建议使用 TinyDB，它更好用也更简单。

[https://tinydb.readthedocs.io/en/stable/](https://tinydb.readthedocs.io/en/stable/)

# javascript - 如何在文本框上应用正则表达式

> ID：10830871
> 
> 赞同：1
> 
> 时间：2012-05-31T09:28:33.323
> 
> 标签：javascript, jquery, regex

我需要一个必须采用这样的值的文本框

1.  字符：首先它将仅从用户获取整数。如果不是整数，则不会显示它。那只是整数。

2.  字符：如果输入整数，它将自动附加“/”。

3.  字符：在此之后“只能输入字符”而不是整数。如果不是字符，则不会输入整数。

4.  字符：如果输入了字符，它将自动附加“/”。

5.  字符：在此之后它将自动附加常量“uet”。

6.  字符：输入常量 = uet 后，将自动附加“/”并自动附加当前年份。

例如，文本框的值必须是

```
5 integer/5 characters/uet/2012

Length of Character = 5

Length of Integer   = 5
put "/" if integer length = 5
put "/" if charcter length = 5 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T10:16:18.397

您可以捕获`keypress`事件并根据长度允许字符。请参阅此处的示例：http: [//jsfiddle.net/wLqj7/](http://jsfiddle.net/wLqj7/)

这是一个简单的示例，仅用于通知，不适用于复制粘贴和其他一些情况。

另外你可能想看看[jquery masked-input plugin](http://digitalbush.com/projects/masked-input-plugin/) 但如果这是你需要一些文本过滤的唯一情况，我想写你自己的规则会更好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:51:47.583

```
^([0-9]*)/([a-z]*)/uet/[0-2][0-2][0-9][0-9]$ 
```

这是一个匹配的正则表达式：

123/qwerty/uet/2012

12drfsdf3/qwerty/uet/2012 不匹配。

它可能会更短，但这就是我现在能想到的。

# java - 在 cli 中包含 jar 文件库

> ID：10830872
> 
> 赞同：0
> 
> 时间：2012-05-31T09:28:34.157
> 
> 标签：java, ant, command-line-interface, jnlp, args

我正在开发一个使用 jnlp 文件的项目。那里有这样指定的资源：

[代码]

```
<resources>
    <jar href="noterik-apu.jar" main="true" download="eager"/>
    <jar href="springfield-tools.jar" download="eager"/>
    <jar href="commons-httpclient-3.1.jar" />
    <jar href="commons-cli-1.2.jar" />
    <jar href="org.apache.commons.codec.jar" />
    <jar href="org.apache.commons.httpclient.jar" />
    <jar href="org.apache.commons.logging.jar" />
    <jar href="swing-worker-1.1.jar" />
    <jar href="log4j-1.2.16.jar" />
    <jar href="dom4j-1.6.1.jar" />
    <jar href="jaxen-1.1.1.jar" />
    <j2se version="1.6+" href="http://java.sun.com/products/autodl/j2se"/>
</resources> 
```

[/代码]

ant 构建文件不包括构建 .jar 中的那些 jar 文件。我如何在 cli 中添加这些 jar，这样它就不会给我“线程“main”java.lang.NoClassDefFoundError: 中的异常：”？我试过“-cp file1.jar:file2.jar:etc.jar”，但我在互联网上读到你不能使用 -cp 和 -jar .. 我怎样才能让它工作？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:48:14.943

您不应该将 jar 文件嵌入到另一个 jar 文件中。只有使用特殊的类加载器才能起作用。`-cp`启动应用程序时使用该选项：

```
java -cp lib\*:.\myApp.jar com.foo.bar.MyApp 
```

[或者按照此页面](http://docs.oracle.com/javase/tutorial/deployment/jar/downman.html)上的说明将 jar 文件的相对路径包含到 myApp.jar 的清单中，然后使用`java -jar myApp.jar`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:55:07.070

如果您在编译时使用 linux，请使用

```
$ javac -cp myjar.jar Hello.java 
```

并且在运行使用时，需要用点包含当前目录

```
$ java -cp myjar.jar:. Hello 
```

# javascript - javascript删除功能无效

> ID：10830874
> 
> 赞同：0
> 
> 时间：2012-05-31T09:28:38.717
> 
> 标签：javascript

我试图在 Firefox/Firebug 中调试这个函数，它说“dbasedata.remove”不是一个函数？？

```
function dbasetype(){

var dbasedata = document.forms[0]._dbase_name.value;
        dbasedata = dbasedata.toUpperCase();
        dbasedata = dbasedata.replace(/\s/g, "");
        dbasedata = dbasedata.remove("UK_CONTACTS","");

if (dbasedata != "") {
        _area.value = _dbase_name.value;            
    } } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T09:30:44.877

这是因为 JavaScript 字符串没有`remove()`.

[您可以在此处](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String#Methods_2)查看可用的方法。

如果您想将“UK_CONTACTS”替换为“”，请查看以下[`replace()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)方法：

```
dbasedata = dbasedata.replace("UK_CONTACTS",""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:33:17.020

利用

```
dbasedata = dbasedata.replace(/UK_CONTACTS/, ""); 
```

反而。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T09:33:31.100

字符串对象没有 Remove() 函数。萤火虫是正确的。您可能想使用 replace() 代替：

```
function dbasetype(){

var dbasedata = document.forms[0]._dbase_name.value;
        dbasedata = dbasedata.toUpperCase();
        dbasedata = dbasedata.replace(/\s/g, "");
        dbasedata = dbasedata.replace("UK_CONTACTS","");

if (dbasedata != "") {
        _area.value = _dbase_name.value;            
    } } 
```

# c++ - 修改临时对象

> ID：10830883
> 
> 赞同：4
> 
> 时间：2012-05-31T09:29:03.313
> 
> 标签：c++, object, temporary

有人可以告诉为什么对象在调用`test(2)`后被销毁吗？`test_method()`

```
#include<iostream>
#include<string>

using namespace std;

class test
{
    int n;

    public:
    test(int n) : n(n)
    {
        cout << "test: " << n << endl;
    }

    ~test()
    {
        cout << "~test: " << n << endl;
    }

    test & test_method()
    {
        cout << "test_method: " << n << endl;
        return *this;
    }
};

int main(int argc, const char *argv[])
{
    cout << "main start" << endl;
    const test &test1 = test(1);
    const test &test2 = test(2).test_method();
    cout << "main end" << endl;
} 
```

输出是：

```
main start
test: 1
test: 2
test_method: 2

~test: 2
main end
~test: 1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T09:33:09.153

`test(2).test_method()`返回一个绑定到 的引用，`test2`然后它所引用的对象在完整表达式的末尾被销毁，因为它是一个临时对象。*这*应该不足为奇。

真正令人惊讶的是它`test1`仍然是一个有效的引用，因为它*直接*绑定到一个临时变量，并且将一个临时变量绑定到一个引用会将临时变量的生命周期延长到引用变量的生命周期。

您只需要注意，在这种`test(2)`情况下，临时对象没有绑定到任何东西。它只是用来调用一些成员函数，然后它的工作就完成了。它不会“照顾”成员函数，或者换句话说，生命周期扩展不会通过所有可能的未来引用传递。

* * *

这是一个简单的思想实验，为什么实际上不可能有“任意延长寿命”：

```
extern T & get_ref(T &);

{
    T const & x = get_ref(T());

    // stuff

    // Is x still valid?
} 
```

我们不知道`x`在第一行之后是否仍然有效。`get_ref`可以做任何事情。如果它被实现为`T & get_ref(T & x) { return x; }`，我们可能希望有魔法，但也可能是这样的：

```
namespace { T global; }
T & get_ref(T & unused) { return global; } 
```

在原始翻译单元内无法决定是否需要扩展任何内容。所以标准目前的方式是，它是一个完全微不足道的本地决定，只是在查看引用声明表达式时做出的，所讨论的临时对象的生命周期应该是多少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:33:45.053

因为 C++ 标准需要这种行为。如果您希望对象持久存在，请为其命名。它会一直存在，只要名称。

**编辑**：您的示例`test1`是您给第一个对象的名称，而第二个对象根本没有获得名称，因此它不会超过表达式的评估。

# php - facebook api服务器错误500问题

> ID：10830884
> 
> 赞同：1
> 
> 时间：2012-05-31T09:29:07.920
> 
> 标签：php, facebook-graph-api

我想使用 facebook api 让我的网站使用 facebook 登录。它工作正常，但有错误消息。我检查错误日志，它的显示

[Thu May 31 17:10:53 2012] [error] [client 114.34.249.224] PHP Fatal error: Uncaught CurlException: 7: Failed to connect to 2a03:2880:2110:3f01:face:b00c:0:1: No路由到主机\n 在第 886 行的 /home/fb3/src/base_facebook.php 中抛出

我该如何解决这个问题？

谢谢。

# 更新：

我的路由表也不包括inet6：

Internet：目标网关标志 Refs 使用 Netif 过期

默认 xxx.xxx.xxx.xxx UGS 57 1209297 bge0

127.0.0.1 链接#2 UH 0 17 lo0

xxx.xxx.xxx.xxx/24 链接#1 U 0 24067 bge0

xxx.xxx.xxx.xxx 链接#1 UHS 0 192 lo0

互联网6：

目标网关标志 Netif 过期

::1 ::1 呃 lo0

fe80::%lo0/64 链接#2 U lo0

fe80::1%lo0 链接#2 UHS lo0

ff01:2::/32 fe80::1%lo0 U lo0

ff02::%lo0/32 fe80::1%lo0 U

和我的 inet4 设置：$ more rc.conf

-- sysinstall 生成的增量 -- # Tue Jul 13 18:02:58 2010 创建时间： Tue Jul 13 18:02:58 2010 启用网络守护程序以方便用户。请对此文件进行所有更改，而不是 /etc/defaults/rc.conf。该文件现在只包含来自 /etc/defaults/rc.conf 的覆盖。

keymap="us.iso"

defaultrouter="xxx.xxx.xxx.xxx"

主机名="domain.com"

ifconfig_bge0="inet xxx.xxx.xxx.xxx 网络掩码 255.255.255.0"

sshd_enable="是"

apache22_enable="是"

mysql_enable="是"

sendmail_enable="无"

proftpd_enable="是"

命名_启用=“是”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T01:31:30.373

如果您正在运行 Linux，您可能已经加载了 IPv6 内核模块，并且由于它已加载，当您发出 DNS 请求时，它将首先返回给您一个 IPv4 地址，然后是一个 IPv6 地址。如果由于某种原因您无法连接到 IPv4，那么您的系统将尝试下一个地址，并且由于它是 IPv6 并且您没有 IPv6 连接，您将收到上述错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:54:33.760

看起来您正在尝试使用 IPv6 地址来连接 Facebook，但在此过程中未针对 IPv6 正确设置某些内容。

作为一种快速的手动破解，在脚本中找到对 graph.facebook.com 的引用，并快速将其硬编码为 graph.facebook.com 的 IPv4 (xxx.xxx.xxx.xxx) 地址。如果可行，则将脚本改回，然后：

1.  使您的服务器仅运行 IPv4（最简单，但不具有前瞻性）
2.  检查您和服务器之间的哪些硬件未配置 IPv6，并进行更改（比听起来要困难得多 - 可能意味着某处的新路由器，哎呀，但如果您不这样做，那么服务器上没有 IPv6！ ）。

# internet-explorer - 如何强制 IE9 以 IE9 文档模式呈现？

> ID：10830894
> 
> 赞同：5
> 
> 时间：2012-05-31T09:29:39.730
> 
> 标签：internet-explorer, internet-explorer-8, internet-explorer-9

我的网站在 IE7 上显示不好。但无论如何我都不担心这个。但是 IE9 用户说他们在浏览器上也看不到东西。当我单击 F12 并检查他们的浏览器时，他们的 IE9 正在以 IE7 文档模式呈现。如果我更改为 IE9 文档模式，它会完美运行。

所以我想知道，有没有办法通过添加一些额外的代码或其他东西来强制 IE9 以 IE9 文档模式呈现。这些额外的代码不应该影响使用该网站的其他 IE8 用户。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T09:33:29.647

我认为您需要“边缘”模式。

看一下这个：

```
 <html>
   <head>
      <title>My Web Page</title>
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   </head>
   <body>
      <p>Content goes here.</p>
   </body>
  </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:36:28.463

编辑 Mennans 的回答是解决问题的第一步，但也要检查此选项：

IE 用户也可能勾选了“始终以兼容模式显示 Intranet 页面”之类的设置。

# javascript - 如何根据背景图像的高度和宽度设置DIV尺寸

> ID：10830895
> 
> 赞同：2
> 
> 时间：2012-05-31T09:29:47.057
> 
> 标签：javascript, jquery

我有一个带有背景图像的 DIV。但我的要求是如何根据背景图像的高度和宽度扩展 DIV 大小。我在[这个](https://stackoverflow.com/questions/623172/how-to-get-image-size-height-width-using-javascript)链接的帮助下尝试了一些代码。

```
var src = $('#divID').css('background-image').
                      replace('url', '')
                     .replace('(', '')
                     .replace(')', '')
                     .replace('"', '')
                     .replace('"', '');
$('body').append('<img id="appendedImg" src="' + src + '" style="height:0px;width:0px"');
var img = document.getElementById('appendedImg');       
var width = img.clientWidth;
var height = img.clientHeight; 
$('#appendedImg').detach(); 
```

如果可能的话，我只是在寻找任何优雅的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T09:33:24.627

您可能只需要寻找宽度/高度加载：

```
var img = document.getElementById('appendedImg');
img.onload = function() {   
    var width = img.width;
    var height = img.height;
    console.log(width,height);
}; 
```

此外，您不需要附加它，创建一个新图像就足够了。这是我的做法：

```
var $div = $('#divID'),
    src = $div.css('background-image').replace(/url\(\"([^\"]+).*/,'$1');

$(new Image).load(function() {
    $div.width(this.width).height(this.height);
}).attr('src', src); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:44:33.640

我会先加载 img 然后获取它的高度和宽度：

```
imgSrc = 'http://ajthomas.co.uk/wp-content/themes/ajthomascouk/library/images/logo.png'

// append the temp imag
$('body').append('<img src="'+imgSrc+'" alt="" style="display:none" id="dummyImage"/>');

// get the image width and height
imgWidth = $('#dummyImage').width()+'px';
imgHeight = $('#dummyImage').height()+'px';

// remove the image
$('#dummyImage').remove();

// set the css for the div
$('#imADiv').css({height: imgHeight, width: imgWidth, 'background-image': 'url('+imgSrc+')'}); 
```

在这里为您编码 - [http://jsfiddle.net/LTdtM/](http://jsfiddle.net/LTdtM/)

# php - Symfony2 + DoctrineFixtureBundle：.git/info/refs not found

> ID：10830902
> 
> 赞同：0
> 
> 时间：2012-05-31T09:30:21.160
> 
> 标签：php, symfony, bundle

在更新我当前的 symfony 2 版本（从 2.0.12 到 2.0.15）时，我遇到了一个致命错误。

这里的**错误**：

```
> Installing/Updating doctrine-fixtures
HEAD is now at bed8908 Update README.md

> Installing/Updating DoctrineFixturesBundle
fatal: https://github.com/symfony/DoctrineFixturesBundle.git/info/refs not found: did you run git update-server-info on the server? 
```

PS：我已经完成了`git update-server-info`命令。但没什么...

这是我的**deps**文件

```
[doctrine-fixtures]
    git=http://github.com/doctrine/data-fixtures.git    

[DoctrineFixturesBundle]
    git=http://github.com/doctrine/DoctrineFixturesBundle.git
    target=bundles/Symfony/Bundle/DoctrineFixturesBundle
    version=origin/2.0 
```

和我的**deps.lock**文件

```
doctrine-fixtures bed8908ae929562317e5c59dc0bee24f3b63067e 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:10:47.877

我今天注意到了同样的事情。

需要注意的关键是该问题与[DoctrineFixturesBundle](http://github.com/symfony/DoctrineFixturesBundle.git)相关（注意 /symfony 而不是 /doctrine）

如果您检查 2.0 分支的[最新更改](https://github.com/doctrine/DoctrineFixturesBundle/commit/479f10d068bd0b01e055aa2f555946893322b79c)，您会看到他们已将其更改为指向正确的存储库。

我最终不得不`bundles/Symfony/Bundle/DoctrineFixturesBundle`从我的供应商目录中删除并重新运行`php bin/vendors install`.

我现在可以运行 bin/vendors install 而不会引发致命问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T08:41:50.937

我找到了解决方案：

*   感谢先前的回答，将 DoctrenerFixtureBundle 删除到您的存储库中
*   其次，跑`php bin/vendors reinstall`

重新安装供应商将是对我的情况产生影响的命令......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T21:44:36.640

您必须更新您的*deps*文件。

改变：

```
[DoctrineFixturesBundle]
    git=http://github.com/symfony/DoctrineFixturesBundle.git
    target=/bundles/Symfony/Bundle/DoctrineFixturesBundle 
```

进入：

```
[DoctrineFixturesBundle]
    git=http://github.com/doctrine/DoctrineFixturesBundle.git
    target=/bundles/Symfony/Bundle/DoctrineFixturesBundle 
```

然后，运行：

```
bin/vendors install 
```

它应该只安装缺少的包。

# sql - 计算具有 Time DataType 的列的 SUM：

> ID：10830909
> 
> 赞同：0
> 
> 时间：2012-05-31T09:30:47.467
> 
> 标签：sql, sql-server-2008, select, time, sum

我想计算具有时间数据类型的字段的总和。

我的表如下：

```
 TableA:

            TotalTime
          -------------
             12:18:00
             12:18:00 
```

在这里，我想对两个时间字段求和。我尝试了以下查询

```
 SELECT CAST(
              DATEADD(MS, SUM(DATEDIFF(MS, '00:00:00.000', 
                CONVERT(TIME, TotalTime))), '00:00:00.000'
               ) AS TOTALTIME) 
    FROM [TableA] 
```

但它给出的输出为

```
 TOTALTIME
        -----------------
         00:36:00.0000000 
```

但我想要的输出如下：

```
 TOTALTIME
        -----------------
            24:36:00 
```

如何获得此输出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T10:09:12.573

您可以将总秒数相加，或`datediff(second,0,datecolumn)`. 您可以通过一些数学将其格式化为时间字符串。例如，总分钟数为`totalseconds / 60 % 60`。例如：

```
select  cast(sum(datediff(second,0,dt))/3600 as varchar(12)) + ':' + 
        right('0' + cast(sum(datediff(second,0,dt))/60%60 as varchar(2)),2) +
        ':' + right('0' + cast(sum(datediff(second,0,dt))%60 as varchar(2)),2)
from    TestTable 
```

[SQL Fiddle 的工作代码。](http://sqlfiddle.com/#!3/23503/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:24:02.107

您的查询运行良好，结果正确，

24:36 是第二天 00:36 的时间。

您最多可以显示 24 小时。您没有使用任何一天，这就是为什么隔天每 24 小时 = 0 小时。

只需更改列值，您就可以看到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:37:08.690

这会有点冗长，但是如果您想避免当天翻转，但是您可以将第二个 TIME 拆分为组成 datepart() 的，然后添加它们？（如果需要大于 24 的小时值，甚至显示为 varchar。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-27T22:21:19.907

尝试这个。

```
SELECT 
CONVERT(VARCHAR(MAX),SUM(DATEPART(HH,CAST(YOUR_FIELD AS DATETIME)))+ 
(SUM(DATEPART(MINUTE,CAST(YOUR_FIELD AS DATETIME)))/60) + 
(SUM(DATEPART(MINUTE,CAST(YOUR_FIELD AS DATETIME)))%60 + 
(SUM(DATEPART(SECOND,CAST(YOUR_FIELD AS DATETIME)))/60))/60) + ':' +
RIGHT('00' + CONVERT(VARCHAR(MAX), 
(SUM(DATEPART(MINUTE,CAST(YOUR_FIELD AS DATETIME)))%60+ 
(SUM(DATEPART(SECOND,CAST(YOUR_FIELD AS DATETIME)))/60))%60),2) + ':' +   
RIGHT('00' + CONVERT(VARCHAR(MAX),SUM(DATEPART(SECOND, 
    CAST(YOUR_FIELD AS DATETIME)))%60),2) AS YOUR_FIELD

FROM YOUR_TABLE 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T10:10:56.277

24:36 与 00:36 相同（次日）

# sql - SQL Server通过视图查询和通过基表查询得到不同的执行计划

> ID：10830910
> 
> 赞同：3
> 
> 时间：2012-05-31T09:30:53.770
> 
> 标签：sql, sql-server, tsql, view, sql-execution-plan

我有一个视图，它基本上加入了一些表，并且视图上没有索引。当我查询视图（与另一个表连接）时，性能很差，大约需要 10 分钟。当我从视图中提取基表并加入“另一个表”时，大约需要 20 秒。使用视图或使用基表的逻辑完全相同。我检查了，他们确实得到了不同的执行计划。任何想法为什么会发生这种情况？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T09:37:07.980

SQL Server 可能正在使用缓存的执行计划（基于您第一次从视图中选择某些内容。该表可能已经变大并且不再使用最有效的计划，因此性能下降）。

您可以使用以下方法刷新视图：

`sp_refreshview [ @viewname = ] 'viewname'`

或者完全重建视图并再次运行它以生成新的执行计划，但是您以后可能会遇到同样的性能问题。本文更详细地描述了可能发生的情况：

[http://www.sql-server-performance.com/2007/views-general/](http://www.sql-server-performance.com/2007/views-general/)

[http://technet.microsoft.com/en-us/library/ms187821.aspx](http://technet.microsoft.com/en-us/library/ms187821.aspx)

# c# - 使用正确的派生类型调用泛型方法

> ID：10830913
> 
> 赞同：10
> 
> 时间：2012-05-31T09:31:19.393
> 
> 标签：c#, generics, inheritance

我有以下情况：

我有三个班级，我们称它们`A`为`B`和`C`。它们的共同点是它们继承自同一个接口，`ISomeInterface`并且它们是使用 Entity Framework 映射到实体的类。

我有一个接收实现此接口的对象列表的方法，但对象本身将是`A`或`B`的实例`C`。

方法外壳看起来像这样

```
public void MyMethod(List<ISomeInterface> entityList)
{
  foreach(var entity in entityList)
  {
    ProcessEntity(entity);
  }
} 
```

现在，问题出在`ProcessEntity`方法上。这是一个通用方法，需要根据类型或实体从数据库中检索匹配元素的表，所以它看起来像这样：

```
public void ProcessEntity<T>(T entity)
{
  using( var repository = new DbRepository())
  {
    var set = repository.Set<T>();
    ...
  }
} 
```

问题是该行`var set = repository.Set<T>();`失败，因为`T`在`ISomeInterface`这种情况下，而不是实际类型（`A`或`B`）`C`，所以它给出了一个与给定类型无关的异常，这是可以理解的。

所以我的问题是：如何使用列表中对象的实际类型而不是它们实现的接口类型来调用 ProcessEntity。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-31T09:33:59.413

您可以`dynamic`在将实体传递给 ProcessEntity 时应用关键字。在这种情况下，实体的实际类型将在运行时确定。

```
public void MyMethod(List<ISomeInterface> entityList)
{
  foreach(var entity in entityList)
  {
    dynamic obj = entity;
    ProcessEntity(obj);
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T09:38:52.297

好吧，您可以使用类似访问者的技巧并使用以下解决方法：

1.  定义一个`Process(EntityProcessor ep)`方法`ISomeInterface`
2.  `A`以as （以及与and`ep.ProcessEntity<A>(this)`中的相同方式）实现它`B``C`
3.  而不是`ProcessEntity(entity)`在你的循环中，只需调用`entity.Process(this)`.

（方法名称可能不是最干净的，但你应该明白）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T09:39:58.507

您可以使用反射来获取泛型方法定义，然后调用它，例如：

```
var method = typeof(ClassContainingProcessEntity)
    .GetMethod(ProcessEntity)
    .MakeGenericMethod(entity.GetType);
method.Invoke(this, entity); 
```

您可以按类型缓存该方法，如果性能至关重要，您可以在运行时使用某种委托工厂对其进行编译。

或者，您可以使用[访客模式](http://en.wikipedia.org/wiki/Visitor_pattern)

# ruby-on-rails - 来自移动设备的新遗物追踪请求

> ID：10830920
> 
> 赞同：1
> 
> 时间：2012-05-31T09:31:40.090
> 
> 标签：ruby-on-rails, heroku, newrelic

我在 heroku 上使用 newrelic_rpm gem。如何配置 newrelic_rpm gem 来跟踪来自移动设备的请求。现在，newrelic 仅跟踪来自 Web 浏览器的我们的 api 请求，而不是来自 android 和 ios 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:25:24.807

我发现了我的问题——在 Rails 应用程序中，我使用的是 ActionController::Metal 而不是 ApplicaitonController。而对于金属控制器应该使用这个[https://newrelic.com/docs/ruby/adding-instrumentation-to-actioncontroller-metal](https://newrelic.com/docs/ruby/adding-instrumentation-to-actioncontroller-metal)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:37:57.137

New Relic 在服务器级别跟踪所有内容，因此您应该看到所有内容的分析，无论来源如何。

NR 通过 JS 注入管理的前端分析是个例外——我不相信这个功能支持移动。

# java - HBase 设置时间戳

> ID：10830922
> 
> 赞同：5
> 
> 时间：2012-05-31T09:31:46.273
> 
> 标签：java, api, hadoop, hbase

我在使用 java api 设置行时间戳时遇到问题。

当我尝试添加时间戳值以放入构造函数（或放入 put.add()）时，没有任何反应，并且在从表中读取行后，我得到系统提供的时间戳。

```
public static boolean addRecord(String tableName, String rowKey,
    String family, String qualifier, Object value)
{
    try {
        HTable table = new HTable(conf, tableName);
        Put put = new Put(Bytes.toBytes(rowKey), 12345678l);
        put.add(Bytes.toBytes(family), Bytes.toBytes(qualifier), Bytes.toBytes(value.toString()));
        table.put(put);
        return true;
    } catch (Exception e) {
        e.printStackTrace();
        return false;
    }
} 
```

HBase 0.92.1 在独立模式下运行。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T11:56:47.680

最有可能的是，您的表中已经有时间戳 > 的行`12345678l`。要确认不是这种情况，请尝试使用非常大的时间戳值，例如`Long.MAX_VALUE`.

如果确实如此，您可以简单地删除旧版本。然后将显示此条目。

# lambda - 如何在魔法森林中创建一个 K 组合器？（模仿知更鸟）

> ID：10830926
> 
> 赞同：6
> 
> 时间：2012-05-31T09:32:01.520
> 
> 标签：lambda, functional-programming, function-composition, combinators, k-combinator

回想一下，K 组合子是一个常数函数。它总是返回它的第一个参数：

```
Kxy = x for all y 
```

在《*模仿一只知更鸟*》一书中，作者展示了一个包含会说话的鸟儿的魔法森林的例子。鸟类有以下行为：

给定任何鸟 A 和 B，如果你向 A 喊 B 的名字，那么 A 会通过向你呼唤某种鸟的名字来回应：我们将用 AB 指定这只鸟。

假设森林由三只鸟 A、B 和 C 组成。是否有可能至少有一只鸟表现得像 K 组合子？

下表显示了魔法森林中鸟类可能的一组行为。第一列是森林中每只鸟的名字。最上面一行有可以叫到每只鸟的名字。身体是鸟对名字的反应。例如，如果你向鸟 A 喊 A 的名字，那么鸟 A 会用 C 回应（见第 2 行第 2 列）。简而言之，AA = C。如果你向鸟 A 喊 B 的名字，那么鸟 A 会用 B 回应（见第 2 行第 3 列）。简而言之，AB = B。AC 的空槽应该输入什么值？

```
 | A    B    C
------------------
A  | C    B
B  | B    B    B
C  | A    A    A 
```

让我们看看我们是否可以让鸟 A 表现得像 K 组合器。上面的一组值看起来很有希望：

*   对于所有 y，AA = C 和 Cy = A。也就是说，对于所有 y，(AA)y = A。

*   对于所有 y，AB = B 和 By = B。也就是说，对于所有 y，(AB)y = B。

应该在空槽（AC）中放置什么值？考虑所有情况：

*   如果 AC = A，那么对于所有 y，Ay 的值必须是 C，这显然是错误的。因此 A 不能是空槽的正确值。

*   如果 AC = B，那么对于所有 y，By 的值必须是 C，这显然是错误的。因此 B 不可能是空槽的正确值。

*   如果 AC = C，那么对于所有 y，Cy 的值必须是 C，这显然是错误的。因此 C 不能是空槽的正确值。

因此，对于每个 y，都不能在空槽中放置任何值来满足条件 (AC)y = C。

据我所知，不可能让任何鸟表现得像 K 组合子。我希望你能证明我错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T05:49:14.740

你是对的。任何大于 1 的有限数量的鸟都是不可能的。

简单的论点是，如果有这样一只鸟 K，K 的形象中的每只鸟都将是常数（根据定义），并且每只鸟都将在 K 的形象中（通过基数论证），包括 K 本身，即显然是非恒定的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T06:56:51.593

我喜欢心理法官的回答，所以对于那些有问题的人，我会详细说明。

* * *

令 G 为所有函数的集合。

令 F 为子集 G 使得 |F| > 1 和 ∀f ∈ F (f : F → F)。（F 是你的一组鸟。）

令 1 [F]为 F 的恒等函数。

假设存在∃k ∈ F (∀(f,g) ∈ (F×F) (kfg = f)) 的矛盾。修复这样的 k。换句话说，∀f ∈ F（kf 是常数）。根据定义，∀f ∈ F (kkf = k)。所以 ∀f ∈ F (kf = 1 [F]因为 k 有一个由下面引理的左逆)。因此我们有∀f ∈ F（kf 是常数并且kf = 1 [F]），这显然是荒谬的，因为|F| > 1。

引理：令 (f,g) ∈ (F×F) 使得 kf = kg。根据 k 的定义，∀h ∈ F (kfh = f)。所以∀h ∈ F (f = kfh = (kf)h = (kg)h = kgh = g)。这只有在 f = g 时才会发生。因此 k 内射。因此 k 必须有一个左逆。

# asp.net - IIS7 正则表达式模式中的 URL 重写

> ID：10830930
> 
> 赞同：1
> 
> 时间：2012-05-31T09:32:12.450
> 
> 标签：asp.net, regex, iis, iis-7

我想要一个用于以下位置的 URL 模式：

这个

[http://www.test.com/xyz_number.jpg?vin=xyz&date=31052012](http://www.test.com/xyz_number.jpg?vin=xyz&date=31052012)

将被重定向到：

[http://www.test.com/xyz/31052012/xyz_number.jpg](http://www.test.com/xyz/31052012/xyz_number.jpg)

注意：这里 xyz_number 和日期值是动态的，每个请求都会发生变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T11:19:37.650

以下正则表达式将执行匹配：

```
^http://www.test.com/([^.]*).jpg\?vin=([^&]*)&date=(\d*)$ 
```

以下表达式将进行替换：

```
http://www.test.com/$2/$3/$1.jpg 
```

您没有说您是在 ASP.NET HTTP 处理程序中还是在 IIS 模块中执行此操作，但希望这会给您一个开始。

# javascript - HTML5 - 离线模式、本地存储和安全性都在船上

> ID：10830934
> 
> 赞同：6
> 
> 时间：2012-05-31T09:32:20.113
> 
> 标签：javascript, html, cryptography, local-storage, offline

我的客户希望能够**在线**和**离线**工作以处理数据，通常是创建或检索产品。

在线时，他想使用 Web 服务和服务器数据库，但是当离线时（网络中断或其他），他希望将数据**持久化并加密在 localStorage 中**。

我要一个 javascript 加密库，从登录页面获取密码并使用密码派生密钥作为加密密码。密钥将存储在一个简单的 javascript var 中（页面是动态的，因此不会更改页面）。

您对此事有何意见？您会提出什么解决方案？任何好的 javascript 加密库？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T05:10:39.190

正如您所说，解决方案是从客户端密码中获取密钥。这样您就不必直接存储它。这是密码管理器 last pass 使用的技术。大多数人为此使用的功能是 PBKDF2。将密钥存储在一个简单的 var 中并不是不安全的，因为如果有人可以读取该 var，他们就可以读取您的客户端正在处理的数据。只需确保在客户端注销时清除数据

值得庆幸的是，这个[库](http://crypto.stanford.edu/sjcl/)已经很好地完成了几乎所有这些事情，并且是由真正诚实的密码学家编写的，而不是一些阅读 Bruce Schneier 的书并认为他们知道关于加密的所有知识的 web 2.0 人。

# jquery - 为什么 jquery prop() 方法无法获取元素的 value 属性

> ID：10830937
> 
> 赞同：0
> 
> 时间：2012-05-31T09:32:28.823
> 
> 标签：jquery, prop

我`li`在页面中有几个元素：

```
<li value="a">a</li>
<li value="b">b</li>
<li value="c">c</li>
<li value="d">d</li> 
```

我想在鼠标悬停时获取 value 属性：

```
$(function () {
    $('li').live('mouseover', function () {
        console.log($(this).prop('value'));                             
    })
}); 
```

但结果总是`0`，然后我尝试了该`attr()`方法，它仍然无法工作，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:35:14.023

`li`元素没有`value`属性。

要针对元素存储您自己的元数据，您应该使用 HTML5`data-*`属性：

```
<li data-value="a">a</li>
<li data-value="b">b</li>
<li data-value="c">c</li>
<li data-value="d">d</li> 
```

然后使用 jquery[`.data()`](http://api.jquery.com/data/)方法来检索它们：

```
$(function () {
    $('li').live('mouseover', function () {
        console.log($(this).data('value'));                             
    })
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:36:41.647

嗯，我在小提琴中复制了这个，甚至都无法使用`.val`。可能是因为`value`只为表单字段设计。一种解决方案是将 更改`value`为数据属性，如下所示：

```
<li data-value="a">a</li>
<li data-value="b">b</li>
<li data-value="c">c</li>
<li data-value="d">d</li>​

$(function () {
    $('li').live('mouseover', function () {
        alert($(this).data("value"));                             
    });
});​ 
```

试试这个[小提琴](http://jsfiddle.net/7X5hj/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T09:38:23.087

`<li>`元素不能有属性`value`。如果要定义自己的自定义属性，请在它们前面加上`data-`.

```
<li data-value="a">a</li>
<li data-value="b">b</li>
<li data-value="c">c</li>
<li data-value="d">d</li> 
```

然后更改 JavaScript 代码中的名称：

```
$(function () {
    $('li').live('mouseover', function () {
        console.log($(this).prop('data-value'));                             
    });
}); 
```

jQuery 还允许您`data-`使用[`$.data()`](http://api.jquery.com/data/).

```
 console.log($(this).data('value')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T09:41:27.860

**相反，您可以这样做**

```
$(function () 
{
    $('li').hover( function () {
        console.log($(this).attr('value'));                             
    })
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T09:54:33.547

**它工作检查！**

```
$(function ()
{
    $('li').hover( function () {
        alert($(this).text());                             
    })
}); 
```

# mysql - MySQL 需要 10 秒来计算 100k 条记录的条件

> ID：10830938
> 
> 赞同：1
> 
> 时间：2012-05-31T09:32:29.257
> 
> 标签：mysql, query-optimization

```
SELECT COUNT(*) AS count_all, products.id AS products_id 
FROM `products` 
INNER JOIN `product_device_facilities` 
  ON `product_device_facilities`.`product_id` = `products`.`id` 
INNER JOIN `product_vendors` 
  ON `product_vendors`.`ProductId` = `products`.`id` 
INNER JOIN `screen_shots` 
  ON `screen_shots`.`ProductVendorId` = `product_vendors`.`id` 
WHERE ( (DownloadCount >= 10 or DownloadCount is NULL) 
  and (Minsdk <= 10 or Minsdk is null)) 
GROUP BY products.id 
HAVING GROUP_CONCAT(device_facility_id ORDER BY device_facility_id ASC ) IN (0) 
```

100k 条记录需要 10 秒。

如何提高性能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T10:13:03.153

您可以尝试一些事情。

1.  使用到数据库的持久连接来避免连接开销
2.  检查您的所有表是否在键表上都有主键，例如（product_id）
3.  通过将列声明为保留存储在其中的值所需的大小，每行使用更少的 RAM。即正如@manurajhada 所说，不要使用 count(*) 使用 count(primary key)
4.  在发出 GRANT 语句时使用更简单的权限可以使 MySQL 减少权限检查开销。
5.  在不同表之间的引用上使用索引。只要记住不要索引太多列，简单的经验法则，如果您在比较中从不引用列，则无需索引它。
6.  尝试使用[ANALYZE TABLE](http://dev.mysql.com/doc/refman/5.0/en/analyze-table.html)来帮助 mysql 更好地优化查询。
7.  您可以通过确保所有不为空的列都声明为 NOT NULL 来稍微加快查询速度——因此您可以稍微加快表遍历速度。
8.  调整 MySQL 缓存：为缓冲区分配足够的内存（例如 SET GLOBAL [query_cache_size](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_query_cache_size) = 1000000）并根据平均查询结果集大小定义[query_cache_min_res_unit 。](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_query_cache_min_res_unit)
9.  我知道这听起来违反直觉，但有时值得对表进行反规范化，即在几个表中复制一些数据以避免昂贵的 JOIN。您可以使用外键或触发器支持数据完整性。

如果一切都失败了

1.  如果可以的话，升级你的硬件，更多的内存，更快的硬盘驱动器可以对数据库的速度产生重大影响，当你完成后，为 mysql 分配更多的内存。

**编辑**

*   如果您不需要像@ask-bjorn-hansen 建议的那样实时显示结果的另一种选择，您可以每天使用一次后台任务（cron 作业），并将查询结果存储在单独的表中，然后在您的应用程序中必须做的是检查该表的返回结果，这样您就不必查询 100k 结果，并且能够运行需要数小时且不会过度影响您的用户的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:20:05.610

minsdk 和下载计数是否在同一个表中？如果是这样，在这两个上添加索引可能会有所帮助。

这可能只是一个很难/不可能快速完成的查询。如果没有看到您的完整架构和数据，很难具体说明，但将其拆分为几个更易于执行的查询可能会更快。或者正如 Amadeus 建议的那样，可能会对数据进行一些非规范化。

另一种变化是只需要 10 秒，但要确保它总是在后台定期完成（使用 cron 或类似的），并且永远不要在用户等待时完成。如果/当它需要几分钟而不是几秒钟或以其他方式给您的用户体验或服务器带来不可接受的负担时，请花时间修复它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T09:44:16.250

对表上的连接列进行索引，而不是 count(*) 使用 count（一些索引的主键列）。

# debugging - 如何查看我的帧缓冲区？

> ID：10830939
> 
> 赞同：1
> 
> 时间：2012-05-31T09:32:30.163
> 
> 标签：debugging, opengl, framebuffer

正如标题所说，如何验证我的帧缓冲区是否正确渲染？

使用 glReadPixels 并将内容保存到图像的最佳方法是什么？如果是这样，是否有一个简单的开源库可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T11:25:12.573

您可以使用 [gDebugger](http://www.gremedy.com/free_license.php)，它最适合该任务。允许查看缓冲区、纹理、调用、状态和许多其他有用信息。

# .net - C# .Net 的编译器缓存解决方案

> ID：10830940
> 
> 赞同：2
> 
> 时间：2012-05-31T09:32:30.857
> 
> 标签：.net, performance, tfs, build

我们有一个大型 TFS 安装，有数百名开发人员在 500MB 的源代码上工作。目前，我们正在使用功能驱动的方法进行开发，并为每个功能创建一个新分支。您可以讨论这种方法的合理性，但它会产生以下情况：

开发人员将拥有多个 95% 相同的分支。多个开发人员将拥有相同的分支，甚至是相同的版本。只有生产和集成分支是定期构建的，所以为了做任何有用的事情，每个开发人员都必须构建他们需要的每个分支。构建时间大约需要 1-2 小时来构建所有内容。

我们通过在一夜之间构建所需的分支并在实际开发过程中只构建单个模块来解决这个问题。然而，每个开发人员将多次编译完全相同的程序集，只是在不同的分支中。但有时你需要在工作期间完全建立一个分支。

是否有适用于 TFS/Visual Studio 的“企业就绪”编译器缓存解决方案？我已经将 ccache 与 gcc 一起使用，但我几乎看不到如何将其集成到 .Net 环境中。谷歌搜索这个问题也没有找到太多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:55:56.437

当解决方案中有许多项目时，构建时间会显着增加。C# 编译器重新分析每个被复制的 dll，因此从某种意义上说，“复制本地”选项是邪恶的。

有关可能的解决方案，请查看[Patrick Smacchia](https://stackoverflow.com/users/27194/patrick-from-ndepend-team)的[这两篇文章](https://www.ndepend.com/WhiteBooks.aspx)：

*   [通过 .NET 程序集和 Visual Studio 项目对代码库进行分区](https://www.ndepend.com/Res%5CNDependWhiteBook_Assembly.pdf)
*   [使用命名空间定义 .NET 组件](https://www.ndepend.com/Res%5CNDependWhiteBook_Namespace.pdf)

简而言之，构建时间随着项目的数量呈指数增长，因此，您应该尝试通过将所需项目的数量合并在一起来尽量减少它们。项目/程序集通常用于强制架构边界（我也像这样使用它们），但这并不适合大型项目。相反，您可以使用[NDepend](https://ndepend.com)等工具来验证架构规则，并防止类型之间的循环依赖。您可以通过对命名空间中的类型进行分组并按功能对类型进行分组来做到这一点。

一张纸条。我在我的一个开源项目[Simple Injector](https://simpleinjector.org)中通过程序集使用了关于[分区代码库](https://www.ndepend.com/Res%5CNDependWhiteBook_Assembly.pdf)的建议。项目不直接引用其他项目，而仅引用程序集。缺点是 Visual Studio Go To Reference 选项 (F12) 不再起作用，因为 VS 不再了解该项目的任何信息。VS 不会跳转到代码，而是会跳转到一个生成的文件，该文件只包含一个类型的 API 定义。在咨询了 Patrick Smacchia 之后，他解释说他从来没有遇到过这种情况，可能是因为他的团队使用了 Resharper，它似乎仍然知道如何跳转到代码。

结论是您需要对此进行试验，并且可能希望为所有开发人员提供一个生产力工具，例如 Resharper，它允许您仍然“跳转到代码”。并且你需要一个像 NDepend（NDepend 很棒）这样的工具，并将它集成到构建过程中，以确保开发人员不会破坏架构规则。

减少编译时间的另一个选择是以核心库团队成为“外部”的方式拆分团队。这些团队可以在那里开发、版本和发布可重用库作为其他团队可以包含在他们的解决方案中的 DLL（并将该特定版本签入源代码控制）。这使这些团队（可能是产品团队）不必编译基础库，并且由于这些 DLL（在解决方案中）放置在一个文件夹中，因此您可以立即获得如 Pattrick 文章中所述的性能提升。这对开发盒和构建服务器的编译时间都有积极影响。

这种方法的缺点是您（再次）不能“跳入”该代码，并且开发核心库的过程将更加严格。这些库成为可重用的框架，您不能轻易更改这些库的公共 API。产品/功能开发人员也不能简单地在核心库中添加/更改代码或修复错误，他们需要等待核心团队发布新版本。但是，以您组织的当前规模（数百名开发人员），您可能已经需要（或拥有）这样的结构。

# javascript - 在哪里使用地点 API 密钥？

> ID：10830941
> 
> 赞同：-1
> 
> 时间：2012-05-31T09:32:33.327
> 
> 标签：javascript, google-places-api, api-key

我需要 java 脚本中的示例示例来放置 API。

我从以下过程中获得了地点 API 密钥。

单击左侧菜单中的服务链接。单击 Places API 条目旁边的状态开关。开关滑到开。单击左侧导航中的 API 访问。您的密钥列在简单 API 访问部分。

任何人请提供地点API的示例代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T09:42:12.190

如[文档](https://developers.google.com/maps/documentation/places/)中所述，API 密钥作为参数 ( `key=AddYourOwnKeyHere`) 传递：

```
https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key=AddYourOwnKeyHere 
```

# .net - 将 INSERT 上的 ID 返回到 MsAccess Db？

> ID：10830942
> 
> 赞同：1
> 
> 时间：2012-05-31T09:32:35.237
> 
> 标签：.net, ms-access, ado.net

我想获取新添加记录的 id。有没有办法通过**ADO.NET**获得它？？？

id 是**PK**，它的数据类型是**AutoNumber**。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T09:34:52.770

`SELECT @@IDENTITY`在 insert 语句触发后使用。

[http://msdn.microsoft.com/en-us/library/ks9f57t0(v=VS.80).aspx](http://msdn.microsoft.com/en-us/library/ks9f57t0(v=VS.80).aspx)

请参阅标有“检索 Microsoft Access 自动编号值”的部分

排序版本

```
OleDbCommand cmdNewID = new OleDbCommand("SELECT @@IDENTITY",
            connection) 
```

# scala - 在 Scala 中获取子数组的正确方法是什么？

> ID：10830944
> 
> 赞同：105
> 
> 时间：2012-05-31T09:32:53.860
> 
> 标签：scala, scala-collections

我试图在 scala 中获得一个子数组，但我对正确的做法有点困惑。我最想要的是你如何在 python 中做到这一点：

```
x = [3, 2, 1]
x[0:2] 
```

但我相当肯定你不能这样做。

最明显的方法是使用 Java Arrays util library。

```
import java.util.Arrays
val start = Array(1, 2, 3)
Arrays.copyOfRange(start, 0, 2) 
```

但是在 Scala 中使用 Java 库总是让我觉得有点脏。我发现最“scalaic”的方式是

```
def main(args: List[String]) {
    val start = Array(1, 2, 3)
    arrayCopy(start, 0, 2)
}
def arrayCopy[A](arr: Array[A], start: Int, end: Int)(implicit manifest: Manifest[A]): Array[A] = {
    val ret = new Array(end - start)
    Array.copy(arr, start, ret, 0, end - start)
    ret
} 
```

但是有更好的方法吗？

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2012-05-31T09:36:04.660

您可以调用切片方法：

```
scala> Array("foo", "hoo", "goo", "ioo", "joo").slice(1, 4)
res6: Array[java.lang.String] = Array(hoo, goo, ioo) 
```

它就像在 python 中一样工作。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2018-08-10T18:24:07.947

想象一下，您有一个数组，其中包含从`a`to的元素`f`

```
scala> val array = ('a' to 'f').toArray // Array('a','b','c','d','e','f') 
```

然后你可以用不同的方式从中提取一个子数组：

1.  删除前 n 个第一个元素`drop(n: Int)`

    `array.drop(2) // Array('c','d','e','f')`

2.  取前 n 个元素`take(n: Int)`

    `array.take(4) // Array('a','b','c','d')`

3.  用 选择任意间隔的元素`slice(from: Int, until: Int)`。请注意，`until`排除在外。

    `array.slice(2,4) // Array('c','d')`

    slice 方法严格等价于：
    `array.take(4).drop(2) // Array('c','d')`

4.  用 排除最后 n 个元素`dropRight(n: Int)`：

    `array.dropRight(4) // Array('a','b')`

5.  用 选择最后 n 个元素`takeRight(n: Int)`：

    `array.takeRight(4) // Array('c','d','e','f')`

**参考**：[官方文档](https://www.scala-lang.org/api/current/scala/Array.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-16T14:10:58.597

从 2D Scala 数组 (original_array) 中提取特定列的示例：

```
import scala.collection.mutable.ArrayBuffer

val sub_array = ArrayBuffer[Array[String]]()
val columns_subset: Seq[String] = Seq("ColumnA", "ColumnB", "ColumnC")
val columns_original = original_array(0)

for (column_now <- columns_subset) {
      sub_array += original_array.map{_(columns_original.indexOf(column_now))}
    }
sub_array 
```

# java - java - 如何使输入文本框显示在Java应用程序的键盘上键入的印地语字符

> ID：10830948
> 
> 赞同：1
> 
> 时间：2012-05-31T09:33:07.853
> 
> 标签：java, text, input, internationalization

它是一个完整的 Java 桌面应用程序，现在需要它接受非英语工作者以母语输入的数据字段、输入框等条目。因此，本质上需要一种侵入性较小的方法来实际使应用程序国际化，以便在多个本地区域中使用。一步一步问我的障碍-

1.  有什么方法可以使文本输入框在从键盘输入时显示非英文字符？
2.  有什么方法可以直接使用输入文本字符串的 unicode/hexcode？

# asp.net-mvc-3 - 检测动作调用者

> ID：10830951
> 
> 赞同：0
> 
> 时间：2012-05-31T09:33:15.803
> 
> 标签：asp.net-mvc-3

我有返回部分视图的操作。这个局部视图是从不同的网页调用的。我需要在 ResultForm Action 中检测从哪些页面调用 Action，最好的方法是什么？

```
[OutputCache(NoStore = true, Duration = 0, VaryByParam = "*")]
        public ActionResult ResultForm()
        {
            if (Request.IsAjaxRequest())
            {
                return PartialView("ResultForm"......);
            }

            return null;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:35:02.380

将其作为参数传递：

```
[OutputCache(NoStore = true, Duration = 0, VaryByParam = "caller")]
public ActionResult ResultForm(string caller) 
```

请注意缓存必须如何随此参数而变化。并且在生成此操作的链接时，只需确保您将调用者参数与请求一起传递。另一种可能性是在请求上使用[UrlReferrer](http://msdn.microsoft.com/en-us/library/system.web.httprequest.urlreferrer.aspx)属性，但它的值可能并不总是被填充。

# java - 如何用 hibernate-jpa2.0 抛出 OptimisticLockException

> ID：10830963
> 
> 赞同：0
> 
> 时间：2012-05-31T09:33:42.790
> 
> 标签：java, jpa-2.0, jboss7.x, optimistic-locking

我目前正在我的项目中进行乐观锁定管理。我们使用 JPA 2.0 (hibernate-jpa2.0-api-1.0.1.Final)，数据源由 JBoss 7 提供。

**我做了什么**

在我的实体“AccordSimple”中，我使用@Version 注释：

```
@Entity
@Table(name = "AccordSimple")
public class AccordSimple {
    @Id
    @SequenceGenerator(name = "parametresubsidesequence", 
        sequenceName = "parametresubsidesequence", allocationSize = 1)  
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "parametresubsidesequence")
    private Long id;

    // Optimistic lock.
    @Version
    private Long version;

} 
```

这是我的 AccordServiceImpl

```
public AccordDTO updateAccord(AccordDTO accordDTO) throws AppException {

    AccordSimple accord = getAccordRepository().findByReference(
            accordDTO.getAccordReference());

    if (accord == null) {
        return null;
    }

    // copy new values from the DTO...
    accord.setVariable(accordDTO.getVariable());
    // ... 

    // Set the version from the DTO (old version if someone changes before me!)
    accord.setVersion(accordDTO.getVersion());

    getAccordRepository().merge(accord);
    return accordDTO;
} 
```

这样，不会抛出 OptimisticLockException。即使合并前一致的版本包含在我的数据库中的版本之下。

我已经找到了原因。这是负责人：

```
 AccordSimple accord = getAccordRepository().findByReference(
            accordDTO.getAccordReference()); 
```

因为如果我将方法更改为：

```
public AccordDTO updateAccord(AccordDTO accordDTO) throws AppException {

    AccordSimple accord = new AccordSimple(accordDTO.getAccordReference(), accordDTO.getVersion());

    // copy new values from the DTO...
    accord.setVariable(accordDTO.getVariable());
    // ... 

    // Set the version from the DTO (old version if someone changes before me!)
    accord.setVersion(accordDTO.getVersion());

    getAccordRepository().merge(accord);
    return accordDTO;
} 
```

将抛出 OptimisticLockException！

**问题**

该版本来自 Hibernate 缓存，而不是来自我的 DTO。因此，如果我分离实体，那么一切都会正常工作（我猜），但我不想这样做（如果开发人员忘记它，则会出现错误的来源......）。

你有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:51:24.850

[已编辑] 一种可能的选择：尚未尝试过，您可以尝试一下：

通过使用 @PostLoad 或带有 insertable=false,updateable=false 的额外列映射，在实体中保留一个额外的版本号。

让@PreUpdate 方法检查版本字段和额外版本字段。如果它们不匹配，则抛出异常。

所有这些都可以放在基础模型类中。所以没有人会忘记将逻辑放在实体中:)

* * *

（原始信息）

这正是我在之前的项目中所面临的。在执行乐观锁验证时，Hibernate 不会查看实体中的版本字段。

我解决那个时间的方法是在将 DTO“合并”到实体时验证自己。那时，我有一个实用程序来映射 DTO 和实体之间的属性。版本检查只是 DTO 中版本字段中的一个额外注释，而不是将值设置为相应实体的属性，当它不匹配时我会抛出异常。

不过可能不适用于你

* * *

# symfony - FOSUserBundle 无密码登录

> ID：10830965
> 
> 赞同：2
> 
> 时间：2012-05-31T09:33:43.670
> 
> 标签：symfony, fosuserbundle

我的 FOSUserBundle 登录系统工作正常。

现在对于我的移动（iPad）系统，我有一个带有用户图片+名称的缩略图列表，我想做的是通过单击他自己的图片登录系统，但它一直在询问密码，我没有看到任何允许没有密码的用户的配置。

任何帮助或线索？

# jquery - jquery 的 slideToggle 函数与 span 和 div 的行为是否不同？

> ID：10830966
> 
> 赞同：1
> 
> 时间：2012-05-31T09:33:44.867
> 
> 标签：jquery, dom

我正在研究 slideToggle 功能。如果我最初使用 span 标签隐藏我的内容，并且在单击该 span 的父级时，我会触发 click 事件并在其中调用 slide Toggle。结果不正确。跨度向下滑动并立即向上滑动。但是，如果我使用 div 而不是 span，则 slideToggle 可以正常工作。有谁知道为什么这种带有跨度的奇怪行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:55:08.430

默认情况下，`span`具有内联布局特征，而`div`在块中布局。在幕后，`span`元素`display: inline`在其 CSS 声明中，而`div`元素的样式是`display: block`. 实际上，如果您`span`在页面上放置两个没有样式的元素，它们将彼此相邻出现，而两个`div`元素将出现在彼此下方。更多关于 CSS`display`属性的信息可以在[MDN](https://developer.mozilla.org/en/CSS/display)上找到。

`slideToggle`将为元素的属性设置动画`width`，然后在和原始状态`display`之间切换其属性。`none`这不适用于内联元素，因为该`width`属性不适用于它们的样式。自己试试吧！

```
#test {
    display: inline; // Try switching this to block
    width: 100px; // This only works for block elements
    background: red; // Make the change visible
} 
```

所以真的，没有什么错`span`，这完全是关于如何应用样式。如果你想给一个内联元素一个宽度，你可以使用`display: inline-block`：

```
#test {
    display: inline-block; // Layout inline with other content as one block
    width: 100px; // This works!
    background: red;
} 
```

# jquery - 输入输入时的用户空闲时间

> ID：10830972
> 
> 赞同：2
> 
> 时间：2012-05-31T09:33:54.953
> 
> 标签：jquery, user-input, idle-timer

我遇到的问题是一个搜索功能，它应该`doSearch()`在用户停止在我的字段中输入至少 100 毫秒后调用我的 - 方法`$("input#q)`。

我试图通过使用这个[答案](https://stackoverflow.com/a/4029518/982002)的逻辑来实现这一点，但我被困在我应该设置/取消设置`setInterval()`增加`idleTime`.

```
var idleTime = 0;

$("input#q").keyup(function() {
  idleTime = 0;
  idleInterval = setInterval(function() {
    idleTimeIncrement();
  }, 25);
});

function idleTimeIncrement() {
  idleTime += 25;
  if (idleTime >= 100) {
    doSearch($("input#q").val());
  }
} 
```

我在 Firebug 控制台中遇到的错误说：

> 太多的递归。

所以我想我的代码中有一个无限循环...... ;-)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T09:37:07.727

当你开始一个新的计时器时，你需要重置你的计时器。这是我要做的：

```
var timer = null;
$('input#q').keyup(function() {
    if (timer) {
        clearTimeout(timer);
    }
    timer = setTimeout(function() {
        doSearch($('input#q').val())
    }, 100);
}); 
```

# php - 如何让两个按钮以相同的形式在ajax中执行不同的操作？

> ID：10830975
> 
> 赞同：0
> 
> 时间：2012-05-31T09:33:57.437
> 
> 标签：php, javascript, ajax

我有一个表单，它从表单中获取名称，它发送到 javascript 代码并通过 Ajax 在 php 中显示。这些操作是通过单击提交按钮完成的，我需要另一个按钮，作为我的主页中的评论。我如何处理在 process.php 页面中有“if isset(submit)”或“if isset(review)”的 ajax？单击每个按钮时，我需要执行不同的 sql 操作。如何添加另一个按钮并能够对 process.php 页面中的 php 部分执行不同的操作？

```
<script type="text/javascript">
    $(document).ready(function(){
        $("#myform").validate({
            debug: false,

            submitHandler: function(form) {
            $.post('process.php', $("#myform").serialize(), function(data) {
                    $('#results').html(data);
                });
            }
        });
    });
    </script>
<body>
<form name="myform" id="myform" action="" method="POST">  
      <label for="name" id="name_label">Name</label>  
    <input type="text" name="name" id="name" size="30" value=""/>  
    <br>
    <input type="submit" name="submit" value="Submit"> 
</form>
    <div id="results"><div>
</body> 
```

**进程.php：**

```
<?php

    print "<br>Your name is <b>".$_POST['name']."</b> ";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:42:28.543

将事件处理程序绑定到按钮的单击事件而不是表单的提交事件。

使用不同的事件处理函数向传递给 ajax 方法的数据对象添加不同的额外数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:42:48.867

您只需要为其添加一个按钮和一个 onclick 处理程序。

html:

```
<input type="button" id="review" value="Review"/> 
```

JS：

```
$("#review").click(function(){
            var myData = $("#myform").serialize() + "&review=review";
            $.post('process.php', myData , function(data) {
                    $('#results').html(data);
                });
            }
        ); 
```

由于您在此处设置了变量评论，因此您可以通过单击评论按钮来使用它来知道呼叫已经到来。

# underscore.js - Requirejs，加载库下划线时出现问题

> ID：10830978
> 
> 赞同：7
> 
> 时间：2012-05-31T09:34:15.787
> 
> 标签：underscore.js, requirejs

我正在使用 require.version "2.0.0"
我想将下划线作为局部变量：

这是我的代码（1）。

为什么_未定义？
如何`_`像局部变量一样进入函数内部

* * *

(1)

```
require.config({
    baseUrl: "./",
    paths: {
        'underscore': 'vendor/js/underscore-min'
    },
    shim: {
        'underscore': {
            exports: 'underscore'
        }
    }
});

require([
    'underscore'
 ], function(_) {
    "use strict";
    console.log(_); // undefined
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T06:23:01.100

好吧，只需替换`exports: 'underscore'`为`exports: '_'`. 这告诉 require 附加到`_`模块。所以参考`window._`仍然有效。

# java - java: 输入 id 后应显示全部信息

> ID：10830980
> 
> 赞同：0
> 
> 时间：2012-05-31T09:34:17.893
> 
> 标签：java, mysql, swing, jdbc

我创建了一个表单，其中包含用户的信息，如姓名、联系方式、照片 ID 号码、工作资料等。一旦他输入所有信息，它将存储在数据库中。当他第二次登录时，输入照片身份证号码后，整个信息应该显示在表格上，而不是他输入。我为此使用键输入事件。我试过这段代码，但它抛出异常

> java.sql.SQLException：结果集开始之前

```
public void show()
{
   try
   {
        String id=photo_id_num.getText();
        System.out.println(""+id);          
        Connect c=new Connect();
        con=c.getConnection();
        Statement stmt=con.createStatement();
        String queryPhotoid = "select *  from tbl_visitor ";
        ResultSet rs1= stmt.executeQuery(queryPhotoid);    
              while (rs1.next()) 
              {
              if(id.equals(rs1.getString(6)))
              {
        // Read values using column name
            String name = rs1.getString(2);
            int contno = rs1.getInt(3);
                String orgname = rs1.getString(4);
                String jobpro = rs1.getString(5);
                String category = rs1.getString(7);
                String date = rs1.getString(8);
                int noofpeople = rs1.getInt(9);
                Blob image = rs1.getBlob(10);
                int extrapeople = rs1.getInt(11);

             System.out.println("Name:"+name+" Contact_no:"+contno+"Org_Name:"+orgname+" Job_profile:"+jobpro+"Category:"+category+"Date:"+date+"No_Of_People:"+noofpeople+"image:"+image+"Having extra people:"+extrapeople);
          }
              }
    }
    catch (SQLException sqlEx)
    {
         sqlEx.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:37:47.060

当您获取结果集时，光标位于第一条记录之前，因此您需要通过执行将光标移至第一条记录`resultSet.next()`，在您的情况下，您在定位光标之前正在阅读

```
System.out.println("ranu"+rs1.getString(6));  
while (rs1.next()); 
```

所以你首先需要做`rs.next()`的只有你可以阅读记录

所以让它如下

```
ResultSet rs1= stmt.executeQuery(queryPhotoid);    

while (rs1.next())  {

  System.out.println("ranu"+rs1.getString(6));  
  if(id.equals(rs1.getString(6)))
  {
  // blah blah..
  }
//blah
} 
```

# php - 如何使用日文字符管理数据库中的 ID

> ID：10830985
> 
> 赞同：0
> 
> 时间：2012-05-31T09:34:25.927
> 
> 标签：php, mysql, encoding, utf-8, character-encoding

现在我有了一个数据库。该数据库使用全能的 utf-8 排序规则进行编码。实际上排序规则是utf8，我不确定编码是什么。那应该是另一个问题。

然后我编写了一个程序来从数据库中检索数据。

```
<?php
    require_once('convertArraytoJson.php');
    require_once('config.php');
    mysql_connect ( "localhost", $databaseuser, $databasepassword);
    mysql_query("SET character_set_results = 'utf8', character_set_client = 'utf8', character_set_connection = 'utf8', character_set_database = 'utf8', character_set_server = 'utf8'");
    @mysql_select_db ($databasename) or die ( "Unable to select database" );
    $data=$_GET['id'];
    $query="SELECT * FROM `tabletes` where id = '".$data."'";
    $data = mysql_query($query);
    while (true){
        $info = mysql_fetch_array ( $data, MYSQL_ASSOC );
        if ($info == false) {
            break;
        }
        //$output[]=$info;
        $output[$info['ID']]=$info;
        unset ($output[$info['ID']]['ID']);
    }
    $result = array2json($output);

    echo $result;
?> 
```

数据库的内容如下所示：

![在此处输入图像描述](../Images/b631b6a046ffb372f2fb6c61389fead1.png)

现在我通过这样做来调用该函数（您需要放大屏幕才能看到它）：

```
http://localhost/domainname/api/test2.php?id=jr-東北本線-荒川橋梁__35.79_139.72 
```

它不起作用。

但是，如果我不使用 $_GET 而是直接在代码中输入日文字符，它就可以工作。

所以如果我改变：

```
$data = $_GET['id'] 
```

到

```
$data = 'jr-東北本線-荒川橋梁__35.79_139.72' 
```

一切正常。

当然，我不想硬连线 ID，我想通过 $_GET['id'] 访问它。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:39:04.340

只需使用`urlencode()`- 你的字符串变成：

`%E6%9D%B1%E5%8C%97%E6%9C%AC%E7%B7%9A-%E8%8D%92%E5%B7%9D%E6%A9%8B%E6%A2%81`.

这些汉字是不允许的。

检查 rfc1738：[统一资源定位器 (URL)](http://www.ietf.org/rfc/rfc1738.txt)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T09:49:42.623

您不能使用 utf-8 将日文字符直接插入 url。您需要使用 url 编码来传递参数。

也请看下面的链接。

[URL/FTP 服务器中的日文字符](https://stackoverflow.com/questions/3586321/japanese-characters-in-url-ftp-server)

# intersection - 如何知道 ZedGraph 中两条线是否相交？

> ID：10830994
> 
> 赞同：1
> 
> 时间：2012-05-31T09:34:59.257
> 
> 标签：intersection, zedgraph, intersect, line-intersection

我正在使用 ZedGraph 在 C# 中绘制图形。我被要求在同一张图中画一条抛物线和一条“正常”线，我需要以编程方式知道抛物线和线是否在任何点相交（实际上，我必须知道如果一条线足够接近从另一个）。

有没有办法在 ZedGraph 中知道这一点？

非常感谢您提前。

# javascript - Javascript 在谷歌浏览器中无法正常工作

> ID：10830997
> 
> 赞同：0
> 
> 时间：2012-05-31T09:35:03.190
> 
> 标签：javascript, google-chrome, helpndoc

[我在 HelpNDoc 个人版http://www.helpndoc.com/](http://www.helpndoc.com/)的帮助下创建了一个 HTML 文档

我使用了随它提供的默认模板，该模板在几乎所有浏览器中都能很好地加载，除了 google chrome，模板不加载，因为我在 HTML 方面不是那么先进，所以我想你可以提供一些帮助。

错误：

```
Unsafe JavaScript attempt to access frame with URL file:///C:/Users/lenovo        
/Documents     /HelpNDoc/Output/html/testingproject.html from frame with URL   
file:///C:/Users/lenovo/Documents/HelpNDoc/Output/html/toc.html. Domains,   
protocols and ports must match.
toc.html:36

Uncaught TypeError: Cannot call method 'lastIndexOf' of undefined toc.html:36

Unsafe JavaScript attempt to access frame with URL file:///C:/Users/lenovo  
/Documents/HelpNDoc/Output/html/toc.html from frame with URL file:///C:/Users
/lenovo/Documents/HelpNDoc/Output/html/Introduction.html. Domains, protocols and 
ports must match.
Introduction.html:27

Unsafe JavaScript attempt to access frame with URL file:///C:/Users/lenovo   
/Documents/HelpNDoc/Output/html/toc.html from frame with URL file:///C:/Users   
/lenovo/Documents/HelpNDoc/Output/html/Systemrequirements.html. Domains,  
protocols    and ports must match.

Systemrequirements.html:27

Unsafe JavaScript attempt to access frame with URL file:///C:/Users/lenovo 
/Documents/HelpNDoc/Output/html/toc.html from frame with URL file:///C:/Users/lenovo
/Documents/HelpNDoc/Output/html/Gettinghelp.html. Domains, protocols and ports  
must   match.
Gettinghelp.html:27 
```

toc.html 看起来像 - 我在第 36 行之前和之后添加内容

```
<script type="text/javascript" src="js/searchdata.js"></script>
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.17.custom.min.js"></script>
<script type="text/javascript" src="js/jquery.cookie.js"></script>
<script type="text/javascript" src="js/jquery.dynatree.min.js"></script>
<script type="text/javascript" src="js/hndjsse.js"></script>
<script type="text/javascript">

var bSearchDataLoaded = true;
var sHelpIdToActivate = '';

$(document).ready(function()
{
   var sAnchorName = 
   top.location.href.substring(top.location.href.lastIndexOf("#") + 1, 
   top.location.href.length);
        var nSelectedTab = 0;
        if (sAnchorName == '_index') nSelectedTab = 1
        else if (sAnchorName == '_search') nSelectedTab = 
    2;          
        $("#tabs").tabs({
            selected: nSelectedTab,
            select: function(event, ui) { HideKwPopup(); }
        });

        // Toc
        $("#tab-toc").dynatree({
            clickFolderMode: 1,
            debugLevel: 0,
            imagePath: 'css/dynatree/chm/',
            onActivate: function(node){
                if ($("#tab-keywords") && $("#tab-
keywords").dynatree && $("#tab-keywords").dynatree("getTree") && $("#tab-
keywords").dynatree("getTree").activateKey)
                    $("#tab-
keywords").dynatree("getTree").activateKey(null);
                if(node.data.href && node.data.href != '#'){
                    window.open(node.data.href, 
node.data.target);
                }
            }
        }); 
```

Introduction.html 看起来像 - 我在第 27 行之前和之后添加了行

```
</style>
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/hnd.js"></script>
<script type="text/javascript"><!--
if (top.frames.length == 0)
{
            var sTopicUrl = 
          top.location.href.substring(top.location.href.lastIndexOf("/") + 1, 
          top.location.href.length);
            top.location.href = "testingproject.html?" + sTopicUrl;
        }
        else if (top && top.FrameTOC && top.FrameTOC.SelectTocItem)
        {
            top.FrameTOC.SelectTocItem("Introduction");
        }
</script>

</head> 
```

system requirements.html 看起来像

```
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/hnd.js"></script>
<script type="text/javascript"><!--
if (top.frames.length == 0)
        {
            var sTopicUrl = 
top.location.href.substring(top.location.href.lastIndexOf("/") + 1, 
top.location.href.length);
            top.location.href = "testingproject.html?" + sTopicUrl;
        }
        else if (top && top.FrameTOC && top.FrameTOC.SelectTocItem)
        {
            top.FrameTOC.SelectTocItem("Systemrequirements");
        }
    </script>

 </head> 
```

gettinghelp.html 看起来像 -

```
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/hnd.js"></script>
<script type="text/javascript"><!--
    if (top.frames.length == 0)
    {
        var sTopicUrl = 
 top.location.href.substring(top.location.href.lastIndexOf("/") + 1, 
 top.location.href.length);
        top.location.href = "testingproject.html?" + sTopicUrl;
    }
    else if (top && top.FrameTOC && top.FrameTOC.SelectTocItem)
    {
        top.FrameTOC.SelectTocItem("Gettinghelp");
    }
</script>
</head> 
```

非常感谢任何帮助。谢谢埃迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T13:57:26.947

此问题是由于本地启动某些 JavaScript 时 Google Chrome 的安全限制所致。当文档上传到网络服务器时，这不会发生。这在这里解释：[http ://www.helpndoc.com/sites/default/files/documentation/html/index.html?GoogleChromeshowsanerrorwhensear.html](http://www.helpndoc.com/sites/default/files/documentation/html/index.html?GoogleChromeshowsanerrorwhensear.html)

@powtac 也是正确的，这是重复的：[不安全的 JavaScript 尝试使用 URL 访问框架](https://stackoverflow.com/questions/7318788/unsafe-javascript-attempt-to-access-frame-with-url)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:43:23.993

这只是 toc.html，但如果这能解决该文件的问题，我会很高兴：

```
<script type="text/javascript" src="js/searchdata.js"></script>
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.17.custom.min.js"></script>
<script type="text/javascript" src="js/jquery.cookie.js"></script>
<script type="text/javascript" src="js/jquery.dynatree.min.js"></script>
<script type="text/javascript" src="js/hndjsse.js"></script>
<script type="text/javascript">

var bSearchDataLoaded = true;
var sHelpIdToActivate = '';

$(document).ready(function()
{
var sAnchorName = 
top.location.href.substring(top.location.href.lastIndexOf("#") + 1, 
top.location.href.length);
var nSelectedTab = 0;
if (sAnchorName == '_index'){ 
    nSelectedTab = 1
}
else if (sAnchorName == '_search'){
    nSelectedTab = 2;          
    $("#tabs").tabs({
        selected: nSelectedTab,
        select: function(event, ui) { HideKwPopup(); }
    });
}

// Toc
$("#tab-toc").dynatree({
    clickFolderMode: 1,
    debugLevel: 0,
    imagePath: 'css/dynatree/chm/',
    onActivate: function(node){
        if ($("#tab-keywords") && $("#tab-keywords").dynatree && $("#tab-keywords").dynatree("getTree") && $("#tab-keywords").dynatree("getTree").activateKey){
            $("#tab-keywords").dynatree("getTree").activateKey(null);
            if(node.data.href && node.data.href != '#'){
                window.open(node.data.href, node.data.target);
            }
        }
    }
});
}); 
```

如果这行得通，那只是在某处遗漏了一个括号……如果不是，那可能是一个更深层次的问题，我无能为力:)

希望这可以帮助