# StackOverflow 问答 11915000-11915999

# c# - 排序列表 包含坐标 x 和 y

> ID：11915002
> 
> 赞同：3
> 
> 时间：2012-08-11T13:13:18.737
> 
> 标签：c#, string, list, sorting, split

谁能帮我对以下字符串列表进行排序：

List< **String** > 包含坐标

[0] “0 0”
[1] “0 1”
[2] “0 2”
[3] “0 3”
[4] “1 1”
[5] “1 2”
[6] “1 3”

虽然它可能并不总是按照那个顺序，但我想通过排序/排序来确保它是这样的（按 X 坐标 ASC 排序，然后按 Y 坐标 ASC 排序）

我已经尝试过了，但它根本不会改变列表？- 见下文

`boardObjectList.OrderBy(p => (p.Split())[0]).ThenBy(p=> (p.Split())[1]);`

有任何想法吗？

谢谢，
JP

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T13:22:37.033

`OrderBy`并且`ThenBy`不要修改原始列表，它们只会返回一个新列表（以 an 的形式`IEnumerable<>`）。您需要做的是`List<>`从结果中创建一个新的`IEnumerable<>`，如下所示：

```
// Note that we are assigning the variable to a new list
boardObjectList = boardObjectList.OrderBy(p => (p.Split())[0])
                                 .ThenBy(p => (p.Split())[1])
                                 .ToList(); // Also note that we call ToList,
                                            // to get a List from an IEnumerable 
```

将数字存储在字符串中并尝试排序时，您会得到奇怪的结果。我建议将您的代码更改为：

```
boardObjectList = boardObjectList.OrderBy(p => int.Parse(p.Split()[0]))
                                 .ThenBy(p => int.Parse(p.Split()[1]))
                                 .ToList(); 
```

此方法在排序之前将字符串转换为整数。这样做的原因是字符串排序按字母顺序排序，导致排序如下：

```
1
10
11
12
2
3
4
5
6
7
8
9 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T14:05:16.433

这是一个可能的解决方案。我对整数坐标使用单独的结构，并将拆分字符串转换为它的实例。

```
// Defined elsewhere
struct Coord
{
    public int x;
    public int y;
}

// Where you're doing your work...
var intCoords = new List<Coord>();
foreach (var coord in boardObjectList)
{
    var str = coord.Split(new char[] { ' ' });
    intCoords.Add(new Coord() { 
        x = Int32.Parse(str[0]), 
        y = Int32.Parse(str[1])
    });
}

// Do the actual sort. Ensure you assign the result to a variable
var newCoords = intCoords.OrderBy(x => x.x).ThenBy(x => x.y).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T13:18:05.723

当然，它根本不会改变列表——LINQ 不会修改底层集合，它只是创建查询。

您所追求的是将查询结果存储在一个新列表中：

```
boardObjectList = boardObjectList.OrderBy(p => (p.Split())[0]).ThenBy(p=> (p.Split())[1]).ToList(); 
```

编辑：再看一眼。你不应该像那样比较字符串——如果这些“数字”中的任何一个大于“9”会发生什么？这是更新的解决方案：

```
boardObjectList = boardObjectList.Select(p => new { P = p, Split = p.Split() } ).
    OrderBy(x => int.Parse(x.Split[0])).ThenBy(x => int.Parse(x.Split[1])).
    Select(x => x.P).ToList(); 
```

EDIT2：您也可以在没有 LINQ 的情况下使用更少的内存开销来做到这一点：

```
boardObjectList.Sort((a, b) =>
    {
        // split a and b
        var aSplit = a.Split();
        var bSplit = b.Split();
        // see if there's a difference in first coordinate
        int diff = int.Parse(aSplit[0]) - int.Parse(bSplit[0]);
        if (diff == 0)
        {
            // if there isn't, return difference in the second
            return int.Parse(aSplit[1]) - int.Parse(bSplit[1]);
        }
        // positive if a.x>b.x, negative if a.x<b.x - exactly what sort expects
        return diff;
    }); 
```

# cassandra - 无法使用 Astyanax 客户端创建具有复合键的表

> ID：11915007
> 
> 赞同：2
> 
> 时间：2012-08-11T13:13:50.530
> 
> 标签：cassandra, cql, astyanax

如何使用 astyanax 客户端创建带有复合键的表。现在我已经用 cqlsh -3 创建了它，这就是它在 cli 中的样子：

```
[default@KS] describe my_cf;
    ColumnFamily: my_cf
      Key Validation Class: org.apache.cassandra.db.marshal.UTF8Type
      Default column value validator: org.apache.cassandra.db.marshal.UTF8Type
      Columns sorted by: org.apache.cassandra.db.marshal.CompositeType(org.apache.cassandra.db.marshal.TimeUUIDType,org.apache.cassandra.db.marshal.UTF8Type)
      GC grace seconds: 864000
      Compaction min/max thresholds: 4/32
      Read repair chance: 0.1
      DC Local Read repair chance: 0.0
      Replicate on write: true
      Caching: KEYS_ONLY
      Bloom Filter FP chance: default
      Built indexes: []
      Compaction Strategy: org.apache.cassandra.db.compaction.SizeTieredCompactionStrategy
      Compression Options:
        sstable_compression: org.apache.cassandra.io.compress.SnappyCompressor 
```

这就是我期望它在 cqlsh 中的样子：

```
 CREATE TABLE my_cf (
                   ... key text,
                   ... timeid timeuuid,
                   ...   flag boolean,
                   ...   data text,
                   ... PRIMARY KEY (key, timeid)); 
```

我让它使用存储为 blob 的复合键，这是一个问题。

## 我的代码

```
public class MyKey {
    @Component(ordinal=0)
    private String key;
    @Component(ordinal=1)
    private UUID timeid;
 //...
} 
```

CF

```
public static ColumnFamily<MyKey, String> MY_CF = ColumnFamily
        .newColumnFamily("my_cf",
                new AnnotatedCompositeSerializer<MyKey>(MyKey.class),
                StringSerializer.get()); 
```

KS

```
 ksDef = cluster.makeKeyspaceDefinition();

                ksDef.setName(keyspaceName)
                        .setStrategyOptions(keyspaceOptions)
                        .setStrategyClass("SimpleStrategy")
                        .addColumnFamily(
                                cluster.makeColumnFamilyDefinition()
                                        .setName(MY_CF.getName())
                                        .setComparatorType("UTF8Type")
                                        .setDefaultValidationClass("UTF8Type")
// blob if no key validation class specified
// and something looking as a string if I use this:     .setKeyValidationClass("CompositeType(UTF8Type, TimeUUIDType)")
// anyway there's a single column per composite key

                                        .addColumnDefinition(
                                                cluster.makeColumnDefinition()
                                                        .setName("flag")
                                                        .setValidationClass(
                                                                "BooleanType"))
                                        .addColumnDefinition(
                                                cluster.makeColumnDefinition()
                                                        .setName("data")
                                                        .setValidationClass(
                                                                "UTF8Type")));
                cluster.addKeyspace(ksDef); 
```

突变

```
 MutationBatch m = ks.prepareMutationBatch();

            for (char keyName = 'A'; keyName <= 'C'; keyName++) {
                MyKey myKey = new MyKey("THEKEY_" + keyName, TimeUUIDUtils.getUniqueTimeUUIDinMillis());
                ColumnListMutation<String> cfm = m.withRow(MY_CF, myKey);
                cfm.putColumn("flag", true, null);
                cfm.putColumn("data", "DATA_" + keyName, null);
            }
            m.execute(); 
```

cqlsh:KS>描述列族my_cf；

```
CREATE TABLE my_cf (
  KEY blob PRIMARY KEY,
  flag boolean,
  data text
) WITH ... 
```

cqlsh:KS>从my_cf中选择*；

```
 key                                                      | flag | data
----------------------------------------------------------+--------+---------
 00064953494e5f420000109f4513d0e3ac11e19c400022191ad62b00 | True   | DATA_B 
```

cqlsh:KS> select * from my_cf where key = 'THEKEY_B' order by timeid desc;

```
Bad Request: Order by on unknown column timeid 
```

## 它在下面的 cassandra-cli 中看起来不正确吗？为什么它在 cqlsh 中不起作用？

cassandra-cli] 列出 my_cf；

```
RowKey: THEKEY_B:09f29941-e3c2-11e1-a7ef-0022191ad62b
=> (column=active, value=true, timestamp=1344695832788000)
=> (column=data, value=DATA_B, timestamp=1344695832788000) 
```

* * *

我究竟做错了什么？(astyanax 1.0.6, cassandra 1.1.2) cqlsh>[cqlsh 2.2.0 | 卡桑德拉 1.1.2 | CQL 规范 3.0.0 | 节俭协议 19.32.0]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T18:26:09.980

据我所知，复合主键代表了与 cassandra 的协议和接口的主要分歧，而您使用的协议控制着您可以访问的功能。

例如，astyanax 和 hector 主要是 thrift 协议客户端，而 CQL，不仅仅是一种语言，是（或将是？）二进制协议。

这两个协议不是等效的，具有复合主键的 CQL3 使事情变得非常不同。

关于具有复合主键的“TABLES”要理解的是，它们本质上会转换为具有复合列名的宽行。主键的第一部分是行键，其余部分用作前缀以及 TABLE 列名称作为宽行中的列名称。

在您的实例中，行键是“key”，列前缀是“timeid”，因此您插入的标志字段实际上是一个名为 :flag 的列，数据是 :data 等等。

为了使其工作，cassandra 的 CQL 协议接口将“TABLES”转换为宽行并透明地处理所有列命名。

thrift 接口不处理这些东西，并且当您进行突变时，它只是像以前那样写入列，而没有虚拟寻址。

因此，事实上，结果在您的 cassandra-cli 中看起来并不正确。如果您从 cqlsh -3 进行插入，从 cassandra-cli 的角度来看应该是这样的（带有简单的文本日期）：

```
[default@testapp] list my_cf;
RowKey: mykey
=> (column=20120827:data, value=some data, timestamp=1346090889361000)
=> (column=20120827:flag, value=, timestamp=1346090889361001) 
```

CQL3 和表看起来确实很有吸引力，但是需要做出一些权衡，而且似乎还没有可靠的 Java 客户端支持。

# php - 分配负载

> ID：11915010
> 
> 赞同：-1
> 
> 时间：2012-08-11T13:14:07.490
> 
> 标签：php, mysql

假设我有一个包含 5 个电子邮件地址的数据库，并且我有一个联系表。

每次用户提交联系表格时，表格都需要将详细信息提交到我存储的一个电子邮件地址。这我可以处理，但我开始对如何让它*与电子邮件共享提交感到困惑。

IE。我需要在电子邮件地址之间分担负载。每次提交联系表时，都需要发送到我表中的下一个电子邮件地址。然后在到达最后一封电子邮件时从头开始。

抱歉，如果这是一个严肃的初学者问题，我似乎想不出最好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T13:38:13.823

想到两个选择：

1.  只需从您的阵列中选择一个随机的电子邮件地址，不要费心将它们按顺序发送到每封电子邮件。这将更容易实现，并且会在规模上为您提供相同的结果。

    ```
    $my_emails = array('anemail', ...);
    $selected_email = $my_emails[array_rand($my_emails)]; 
    ```

2.  每次发送电子邮件时增加一个计数器，将值保存在数据库表或文件或其他东西中，然后使用计数器的模数和您必须从中选择的电子邮件数量来选择电子邮件，例如

    ```
    $counter = fetch_counter();
    $my_emails = array('anemail', ...);
    $index = ($counter + count($my_emails)) % count($my_emails);
    $selected_email = $my_emails[$index];
    $counter++;
    store_counter($counter); 
    ```

我已经好几年没有编写 PHP 了，所以 YMMV。你被警告了 ;）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T13:41:45.957

您可以在 email 表中考虑一个额外的列，`sendcount`默认值为 0。在脚本中，您要找出将电子邮件发送到哪个地址，请执行以下操作：

```
//Get email with least counts
$query="SELECT * FROM emails ORDER BY sendcount ASC LIMIT 1";
$result=mysql_query($query);
$object=mysql_fetch_object($result); //This will store the required email address in $object->email

//Send email...

//Increase counter by one
$query="UPDATE emails SET sendcount=sendcount+1 WHERE id=".$object->id;
mysql_query($query); 
```

这样，您将始终将电子邮件发送到计数最少的地址！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T14:59:18.597

您可以尝试找出提交的相似之处并分享。然后您可以构建一棵树并使用贪心算法来分发电子邮件。问题看起来像 bin-packing 或 vm 共享。

# c# - 以不同的顺序遍历 3D 数组

> ID：11915021
> 
> 赞同：1
> 
> 时间：2012-08-11T13:15:18.173
> 
> 标签：c#, traversal, jagged-arrays

我有一个这样的数组：`int[][][] grid_floor_row_col;`

我想像这样遍历它：`int[][][] grid_row_col_floor;`

首先我试图改变for循环，然后改变数组（复制到一个新的），但我就是做不到，我的想法没有更进一步......我什至不知道它是否是可能的..

这是相同的数据，我只需要以不同的顺序遍历，每列，每行读取所有楼层......这是我遍历的方式：

```
for (int floor = 0; floor < grid_floor_row_col.Length; floor++)
{
    for (int row = 0; row < grid_floor_row_col[floor].Length; row++)
    {
        for (int col = grid_floor_row_col[floor][row].Length - 1; col >= 0; col--)
        {
            //do stuff
        }

    }
} 
```

现在我需要遍历：

```
for rows
  for cols
    for floors 
```

看起来很琐碎，但我无法理解..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T13:31:59.320

你所拥有的不是[多维数组](http://msdn.microsoft.com/en-us/library/2yd9wwz4%28v=vs.110%29.aspx)，而是[锯齿状数组](http://msdn.microsoft.com/en-us/library/2s05feca%28v=vs.110%29.aspx)。在多维数组中，您有一个数组表示一个固定的 n 维元素矩阵。在锯齿状数组中，您有一个大小可能不同的数组。

假设您可以将定义转换为`int[,,] grid_floor_row_col`，您可以使用 以任何顺序迭代维度[`Array.GetLength(int)`](http://msdn.microsoft.com/en-us/library/system.array.getlength.aspx)。

```
for (int row = 0; row < grid_floor_row_col.GetLength(1); row++) {
    for (int col = 0; col < grid_floor_row_col.GetLength(2); col++) {
        for (int floor = 0; floor < grid_floor_row_col.GetLength(0); floor++) {
            int elem = grid_floor_row_col[floor, row, col];
            // do stuff
        }
    }
} 
```

您不能使用锯齿状数组执行此操作，原因很简单，每个楼层数组可以具有不同的大小，这意味着每层的行数不同（每行的列数也是如此）。如果您从`[floor, row, col]`to的转换`[row, col, floor]`有意义，那么您*需要*在每个维度内具有相同的大小，因此您应该能够使用多维数组。

# java - 使用迭代的字符串排列

> ID：11915026
> 
> 赞同：15
> 
> 时间：2012-08-11T13:15:59.020
> 
> 标签：java, permutation

我正在尝试查找给定字符串的排列，但我想使用迭代。我在网上找到的递归解决方案我确实理解它，但是将其转换为迭代解决方案确实行不通。下面我附上了我的代码。我非常感谢您的帮助：

```
public static void combString(String s) {
    char[] a = new char[s.length()];
    //String temp = "";
    for(int i = 0; i < s.length(); i++) {
        a[i] = s.charAt(i);
    }
    for(int i = 0; i < s.length(); i++) {
        String temp = "" + a[i];    

        for(int j = 0; j < s.length();j++) {
            //int k = j;
            if(i != j) {
                System.out.println(j);
                temp += s.substring(0,j) + s.substring(j+1,s.length());
            }               
        }
        System.out.println(temp);
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-11T15:47:07.417

跟进我的[相关问题评论，这是一个 Java 实现，它使用](https://stackoverflow.com/questions/2390954/how-would-you-calculate-all-possible-permutations-of-0-through-n-iteratively)[Counting QuickPerm Algorithm](http://www.quickperm.org/quickperm.html)执行您想要的操作：

```
public static void combString(String s) {
    // Print initial string, as only the alterations will be printed later
    System.out.println(s);   
    char[] a = s.toCharArray();
    int n = a.length;
    int[] p = new int[n];  // Weight index control array initially all zeros. Of course, same size of the char array.
    int i = 1; //Upper bound index. i.e: if string is "abc" then index i could be at "c"
    while (i < n) {
        if (p[i] < i) { //if the weight index is bigger or the same it means that we have already switched between these i,j (one iteration before).
            int j = ((i % 2) == 0) ? 0 : p[i];//Lower bound index. i.e: if string is "abc" then j index will always be 0.
            swap(a, i, j);
            // Print current
            System.out.println(join(a));
            p[i]++; //Adding 1 to the specific weight that relates to the char array.
            i = 1; //if i was 2 (for example), after the swap we now need to swap for i=1
        }
        else { 
            p[i] = 0;//Weight index will be zero because one iteration before, it was 1 (for example) to indicate that char array a[i] swapped.
            i++;//i index will have the option to go forward in the char array for "longer swaps"
        }
    }
}

private static String join(char[] a) {
    StringBuilder builder = new StringBuilder();
    builder.append(a);
    return builder.toString();
}

private static void swap(char[] a, int i, int j) {
    char temp = a[i];
    a[i] = a[j];
    a[j] = temp;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-17T20:43:30.897

```
 List<String> results = new ArrayList<String>();
    String test_str = "abcd";
    char[] chars = test_str.toCharArray();
    results.add(new String("" + chars[0]));
    for(int j=1; j<chars.length; j++) {
        char c = chars[j];
        int cur_size = results.size();
        //create new permutations combing char 'c' with each of the existing permutations
        for(int i=cur_size-1; i>=0; i--) {
            String str = results.remove(i);
            for(int l=0; l<=str.length(); l++) {
                results.add(str.substring(0,l) + c + str.substring(l));
            }
        }
    }
    System.out.println("Number of Permutations: " + results.size());
    System.out.println(results); 
```

示例：如果我们有 3 个字符串，例如“abc”，我们可以形成如下排列。

1）构造一个第一个字符的字符串，例如'a'并将其存储在结果中。

```
 char[] chars = test_str.toCharArray();
    results.add(new String("" + chars[0])); 
```

2) 现在取字符串中的下一个字符（即'b'）并将其插入结果中先前构造的字符串的所有可能位置。由于此时我们在结果中只有一个字符串（“a”），因此这样做会为我们提供 2 个新字符串 'ba'、'ab'。在结果中插入这些新构造的字符串并删除“a”。

```
 for(int i=cur_size-1; i>=0; i--) {
        String str = results.remove(i);
        for(int l=0; l<=str.length(); l++) {
            results.add(str.substring(0,l) + c + str.substring(l));
        }
    } 
```

3) 对给定字符串中的每个字符重复 2)。

```
for(int j=1; j<chars.length; j++) {
    char c = chars[j];
     ....
     ....
} 
```

这给了我们来自“ba”的“cba”、“bca”、“bac”和来自“ab”的“cab”、“acb”和“abc”

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-24T09:06:25.800

工作队列允许我们为这个问题创建一个优雅的迭代解决方案。

```
static List<String> permutations(String string) {
    List<String> permutations = new LinkedList<>();
    Deque<WorkUnit> workQueue = new LinkedList<>(); 

    // We need to permutate the whole string and haven't done anything yet.
    workQueue.add(new WorkUnit(string, ""));

    while (!workQueue.isEmpty()) { // Do we still have any work?
        WorkUnit work = workQueue.poll();

        // Permutate each character.
        for (int i = 0; i < work.todo.length(); i++) {
            String permutation = work.done + work.todo.charAt(i);

            // Did we already build a complete permutation?
            if (permutation.length() == string.length()) {
                permutations.add(permutation);
            } else {

                // Otherwise what characters are left? 
                String stillTodo = work.todo.substring(0, i) + work.todo.substring(i + 1);
                workQueue.add(new WorkUnit(stillTodo, permutation));
            }
        }
    }
    return permutations; 
} 
```

保存部分结果的辅助类非常简单。

```
/**
 * Immutable unit of work
 */
class WorkUnit {
    final String todo;
    final String done;

    WorkUnit(String todo, String done) {
        this.todo = todo;
        this.done = done;
    }
} 
```

您可以通过将它们包装在此类中来测试上面的代码。

```
import java.util.*;

public class AllPermutations {

    public static void main(String... args) {
        String str = args[0];
        System.out.println(permutations(str));
    }

    static List<String> permutations(String string) {
        ...
    }
}

class WorkUnit {
    ...
} 
```

编译运行试试看。

```
$ javac AllPermutations.java; java AllPermutations abcd 
```

通过使用 LIFO 工作堆栈而不是 FIFO 队列，还可以轻松地调整以下实现以以相反的顺序返回排列列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-01T21:14:21.550

```
import java.util.List;
import java.util.Set;
import java.util.ArrayList;
import java.util.HashSet;

public class Anagrams{

    public static void main(String[] args)
    {

        String inpString = "abcd";
        Set<String> combs = getAllCombs(inpString);

        for(String comb : combs)
        {
            System.out.println(comb);
        }

    }

    private static Set<String> getAllCombs(String inpString)
    {
        Set<String> combs = new HashSet<String>();
        if( inpString == null | inpString.isEmpty())
            return combs;

        combs.add(inpString.substring(0,1));
        Set<String> tempCombs = new HashSet<String>();
        for(char a : inpString.substring(1).toCharArray())
        {
            tempCombs.clear();
            tempCombs.addAll(combs);
            combs.clear();
            for(String comb : tempCombs)
            {
                combs.addAll(getCombs(comb,a));
            }
        }
        return combs;
    }

    private static Set<String> getCombs(String comb, char a) {
        Set<String> combs = new HashSet<String>();
        for(int i = 0 ; i <= comb.length(); i++)
        {
            String temp = comb.substring(0, i) + a + comb.substring(i);
            combs.add(temp);
            //System.out.println(temp);
        }
        return combs;
    }   
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-15T09:21:11.480

只是发布我解决问题的方法：

```
import java.util.ArrayDeque;
import java.util.Queue;

public class PermutationIterative {
    public static void main(String[] args) {
        permutationIterative("abcd");
    }

    private static void permutationIterative(String str) {
        Queue<String> currentQueue = null;
        int charNumber = 1;
        for (char c : str.toCharArray()) {
            if (currentQueue == null) {
                currentQueue = new ArrayDeque<>(1);
                currentQueue.add(String.valueOf(c));
            } else {
                int currentQueueSize = currentQueue.size();
                int numElements = currentQueueSize * charNumber;
                Queue<String> nextQueue = new ArrayDeque<>(numElements);
                for (int i = 0; i < currentQueueSize; i++) {
                    String tempString = currentQueue.remove();
                    for (int j = 0; j < charNumber; j++) {
                        int n = tempString.length();
                        nextQueue.add(tempString.substring(0, j) + c + tempString.substring(j, n));
                    }
                }
                currentQueue = nextQueue;
            }
            charNumber++;
        }
        System.out.println(currentQueue);
    }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-11-22T14:31:55.137

```
package vishal villa;

import java.util.Scanner;

public class Permutation {
    static void result( String st, String ans)
    {

        if(st.length() == 0)
            System.out.println(ans +" ");

        for(int i = 0; i<st.length(); i++)
        {
            char ch = st.charAt(i);
            String r = st.substring(0, i) +  st.substring(i + 1);
            result(r, ans + ch);    
        }   
    }
    public static void main(String[] args) 
    {
        Scanner Sc = new Scanner(System.in);
        System.out.println("enter the string");
        String st = Sc.nextLine();
    Permutation p = new Permutation();
        p.result(st,"" );
    }
} 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2017-03-15T04:18:59.133

```
// Java program to print all permutations of a
// given string.
public class Permutation
{
    public static void main(String[] args)
    {
        String str = "ABC";
        int n = str.length();
        Permutation permutation = new Permutation();
        permutation.permute(str, 0, n-1);
    }

    /**
     * permutation function
     * @param str string to calculate permutation for
     * @param s starting index
     * @param e end index
     */
    private void permute(String str, int s, int e)
    {
        if (s == e)
            System.out.println(str);
        else
        {
            for (int i = s; i <= s; i++)
            {
                str = swap(str,l,i);
                permute(str, s+1, e);
                str = swap(str,l,i);
            }
        }
    }

    /**
     * Swap Characters at position
     * @param a string value
     * @param i position 1
     * @param j position 2
     * @return swapped string
     */
    public String swap(String a, int i, int j)
    {
        char temp;
        char[] charArray = a.toCharArray();
        temp = charArray[i] ;
        charArray[i] = charArray[j];
        charArray[j] = temp;
        return String.valueOf(charArray);
    }

} 
```

# kml - 如果在仍然显示气球的情况下删除了此 kml，是否有关闭从 kml 读取的地标的气球？

> ID：11915027
> 
> 赞同：1
> 
> 时间：2012-08-11T13:16:12.913
> 
> 标签：kml, google-earth-plugin

简单来说，我在 KML 文件中有一些地标，如果我加载了这个 KML，然后单击 Placemark - 会显示气球。
如果我删除该 KML，地标就消失了，但气球仍然显示。
无论如何让它关闭？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T03:23:10.983

这应该可以关闭任何打开的气球：

```
ge.setBalloon(null); 
```

# actionscript-3 - AS3 AIR - “列表/计数”字典内容

> ID：11915029
> 
> 赞同：1
> 
> 时间：2012-08-11T13:16:16.053
> 
> 标签：actionscript-3, flash, air, directory

使用适用于 Android 的 AS3 Air，我可以使用哪些代码列出本地计算机上选定目录中的所有文件或对文件进行计数？在这种情况下，我使用的是 Air For Android。

然后我想把它们放在一个数组中

我愿意为这个答案打 50 分。正如你所看到的，我的代表很多，但这个问题对我来说是巨大的。如果可能的话，我希望我们不使用类包。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-11T13:28:11.817

以下代码输出用户桌面目录中包含的文件和目录的列表。

```
import flash.filesystem.File;

var desktop:File = File.applicationDirectory.resolvePath("images");
var files:Array = desktop.getDirectoryListing();
for (var i:uint = 0; i < files.length; i++)
{
 trace(files[i].nativePath); // gets the path of the files
 trace(files[i].name);// gets the name
 /// PUT ARRAY CODE HERE to add each "files[i].name" into an array for later use.

} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-19T00:16:49.600

您可以通过检查目录列表中的每个文件是否是目录来递归目录。以下函数将递归返回所有文件的计数（不包括目录）。

```
function recursiveDirectoryListing( directory:File ):int
{
     var count:int = 0;
     if (directory.isDirectory) 
     {
         var files:Array = directory.getDirectoryListing();
         for (var i:int = 0; i < files.length; i++)
         {
             if (files[i].isDirectory)
             {
                 count += recursiveDirectoryListing( files[i] );
             }
             else
             {
                 trace("file found: " + files[i].nativePath );
                 count += 1;
             }
         }
     }
     return count;
} 
```

然后，您可以在需要列出的任何位置调用此函数：

```
recursiveDirectoryListing( File.applicationStorageDirectory ); 
```

# objective-c - 修改调度队列中父作用域的数据

> ID：11915030
> 
> 赞同：5
> 
> 时间：2012-08-11T13:16:21.313
> 
> 标签：objective-c

根据并发编程指南：

> 将块添加到调度队列时，这些值通常必须以只读格式保留。但是，同步执行的块也可以使用带有 __block 关键字的变量将数据返回到父级的调用范围。

我一直在更改在队列之外创建的变量，但我从未指定它们，`__block`所以我想知道何时或为什么需要这样做。还是实例变量总是可以通过块固有地改变，就好像它们是`__block`从幕后分配给它们的？

更新：我也应该补充一点，我正在使用异步队列，而上面说变量只能在同步队列中更改（使用`__block`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T14:47:56.623

在块内访问类的实例变量`iVar`被编译器解释为`self->iVar`. 因此块捕获`self`，它没有被修改。

我确信`__block`修饰符也适用于`dispatch_async`，因此这可能是文档错误。

**添加**

以下示例显示了如何将`__block`变量与 一起使用`dispatch_async`：

```
dispatch_queue_t queue = dispatch_queue_create("myQueue", DISPATCH_QUEUE_CONCURRENT);
__block int total = 0;
printf("address of total: %p\n", &total);

// dispatch some (concurrent) blocks asynchronously:
dispatch_async(queue, ^{
    OSAtomicAdd32(5, &total);
});
dispatch_async(queue, ^{
    OSAtomicAdd32(7, &total);
});

// Wait for all blocks to complete:
dispatch_barrier_sync(queue, ^{ });

printf("address of total: %p\n", &total);
printf("total=%d\n", total); 
```

输出：

```
address of total: 0x7fff5fbff8f0
address of total: 0x100108198
total=12 
```

可以看到`total`在执行块时从堆栈复制到堆。

**添加**

我刚刚在*Blocks Programming Guide*中找到了这个。它解释了为什么在`__block`异步块中使用变量是没有问题的。

> __block 变量存在于变量的词法范围和在变量的词法范围内声明或创建的所有块和块副本之间共享的存储中。因此，如果在帧内声明的块的任何副本在帧结束后仍然存在（例如，通过在某处排队以供以后执行），则存储将在堆栈帧的破坏中幸存下来。给定词法范围内的多个块可以同时使用一个共享变量。
> 
> 作为一种优化，块存储从堆栈开始——就像块本身一样。如果块是使用 Block_copy 复制的（或者在 Objective-C 中，当块被发送一个副本时），变量被复制到堆中。因此，__block 变量的地址可以随时间改变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T15:51:17.400

来自并发编程指南的引用是关于在函数或方法中创建的变量。在它们内部创建的变量是在**堆栈**上创建的，只要函数调用就保存它们。换句话说，当函数返回时，它的堆栈帧与变量一起被销毁。

Objective-c 中的对象是在**堆上**创建的，因此它们可以在函数返回后存活，但是当您创建如下行时：

```
MyClass *object = [[MyClass alloc] init]; 
```

您正在创建将放置在堆上的对象，但您也在创建`object`将指向堆中对象的指针的变量。该变量被放置在当前方法/函数的堆栈框架上，并将在它返回后被释放。你的对象，如果你不释放它，即使功能已经结束，也不会被释放。

这就是为什么块复制在块内引用的父范围变量的原因。它们被复制到块的私有内存中，因为它们可能在函数调用结束时被销毁，并且如您所知，块可以在那之后使用。~~这就是为什么您需要使用`__block`说明符来通知块不要从堆栈中复制变量并直接使用它。因为这个变量可以在函数返回时被销毁，并发编程指南指出这种情况只能使用同步调度，因为它会确保在函数返回之前执行块。~~ **编辑：正如 Martin R 正确指出的那样，`__block`变量并不总是直接从堆栈中使用。作为[本文档](https://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/Blocks/Articles/bxVariables.html#//apple_ref/doc/uid/TP40007502-CH6-SW6)说，它们被视为指针，并且它们的地址可以在复制块时从堆栈中更改（如在调度中）。复制的变量被放置在块和函数之间共享的存储中，以延长变量的生命周期。我认为声明局部变量应该与 dispatch_sync 一起使用的原因是在非 ARC 环境变量中不保留[*](https://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/Blocks/Articles/bxVariables.html#//apple_ref/doc/uid/TP40007502-CH6-SW6)，从而造成使用释放对象的危险。出于同样的原因，我认为您不要在静态变量和实例变量之前使用 __block 。**

Variables that are **instance variables** or **static variables** don't live on the stack of any function, thus they're not copied by block, and you don't need `__block` specifier. Static variable will live as long as program runs, but instance variable is destroyed when object which holds that variable is destroyed. That's why blocks have another feature - all objects that are referenced inside a block will be retained for lifetime of a block to ensure that object will not be deallocated unexpectedly.

# c# - 将最后一张背景图片设置为默认值

> ID：11915031
> 
> 赞同：1
> 
> 时间：2012-08-11T13:16:28.390
> 
> 标签：c#, windows-phone-7

我添加了四个图像，默认情况下我有背景图像。我用一个按钮随机改变背景。这是全景页面，我只想让我的应用程序保存最后一个状态（即**记住最后一个背景图像**），如果我的应用程序被激活，那么最后一个图像应该是默认背景图像。由于我已经在我的应用程序中添加了一些图像，所以我认为这不需要隔离存储。我需要的是当前背景图像（imguri）是否为**bg1.jpg**，如果我退出应用程序并重新启动它，则默认背景图像应为**bg1.jpg**。需要帮忙！

```
private void BackgroundBrowser_Click(object sender, RoutedEventArgs e)
{
    string imguri = "";

    click_count = click_count % 5;
    switch (click_count)
    {
        case 0: imguri = "Image/bg.jpg"; break;
        case 1: imguri = "Image/bg1.jpg"; break;
        case 2: imguri = "Image/bg3.jpg"; break;
        case 3: imguri = "Image/bg2.jpg"; break;
        case 4: imguri = ""; break;
    }
    click_count++;

    var app = Application.Current as App;
    app.appBmp = new BitmapImage(new Uri(imguri, UriKind.Relative));
    ImageBrush imageBrush = new ImageBrush();
    imageBrush.Stretch = Stretch.UniformToFill;
    imageBrush.Opacity = 0.7;
    imageBrush.ImageSource = app.appBmp;
    this.LayoutRoot.Background = imageBrush;
    app.appbrush = imageBrush;
    app.backchanged = true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T14:29:04.307

您可以使用[应用程序或用户设置](http://msdn.microsoft.com/en-us/library/bb397750.aspx)。转到项目属性并单击设置选项卡。然后使用 String 作为类型创建设置名称 LastImagePath：

![在此处输入图像描述](../Images/6551e3eeafe332a236208d67ea5201b1.png)

现在就在这一行之前：

```
var app = Application.Current as App; 
```

添加此以将路径保存到 LastImagePath 设置：

```
Properties.Settings.Default.LastImagePath = imguri;
Properties.Settings.Default.Save(); 
```

要加载最后一张图片，你可以像这样在任何你想要的地方加载设置：

```
if (!(Properties.Settings.Default.LastImagePath == null))
   imgpath = Properties.Settings.Default.LastImagePath; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-27T20:16:56.773

[存储在用户/应用程序设置中的所有项目都需要可序列化（此处](http://msdn.microsoft.com/en-us/library/windows/apps/dn263230.aspx)文档底部有注释）。[在此处](http://code.msdn.microsoft.com/windowsapps/CSWinStoreAppSaveCollection-bed5d6e6)了解有关序列化的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T14:34:50.290

您也可以`System.IO.IsolatedStorage.IsolatedStorageSettings.ApplicationSettings`以与 DelegateX 所示类似的方式使用。请注意，无论您如何“保存”您的设置，它**都将**存储在隔离的存储空间中。它只是被很好地包装和隐藏为 Properties/ApplicationSettings/Session 等属性或类名，但实际上数据将落在 ISO 上，并在您从设备上卸载应用程序时消失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T13:23:02.257

您需要在应用程序退出时将最后一个图像名称保存在文件中，并从文件中读取图像名称并在应用程序重新启动时加载它。我认为这是最简单的解决方案。

# python - 获取函数的关键字参数，Python

> ID：11915032
> 
> 赞同：4
> 
> 时间：2012-08-11T13:16:36.960
> 
> 标签：python, function, introspection

```
def thefunction(a=1,b=2,c=3):
    pass

print allkeywordsof(thefunction) #allkeywordsof doesnt exist 
```

这将给出 [a,b,c]

有没有像allkeywordsof这样的功能？

我无法改变内心的任何东西，`thefunction`

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-11T13:23:49.083

我认为您正在寻找[inspect.getargspec](http://docs.python.org/library/inspect.html#inspect.getargspec)：

```
import inspect

def thefunction(a=1,b=2,c=3):
    pass

argspec = inspect.getargspec(thefunction)
print(argspec.args) 
```

产量

```
['a', 'b', 'c'] 
```

* * *

如果您的函数同时包含位置参数和关键字参数，那么查找关键字参数的名称会稍微复杂一些，但并不难：

```
def thefunction(pos1, pos2, a=1,b=2,c=3, *args, **kwargs):
    pass

argspec = inspect.getargspec(thefunction)

print(argspec)
# ArgSpec(args=['pos1', 'pos2', 'a', 'b', 'c'], varargs='args', keywords='kwargs', defaults=(1, 2, 3))

print(argspec.args)
# ['pos1', 'pos2', 'a', 'b', 'c']

print(argspec.args[-len(argspec.defaults):])
# ['a', 'b', 'c'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T13:28:47.510

您可以执行以下操作以获得您正在寻找的内容。

```
>>> 
>>> def funct(a=1,b=2,c=3):
...     pass
... 
>>> import inspect
>>> inspect.getargspec(funct)[0]
['a', 'b', 'c']
>>> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T13:27:19.747

你想要这样的东西：

```
>>> def func(x,y,z,a=1,b=2,c=3):
    pass

>>> func.func_code.co_varnames[-len(func.func_defaults):]
('a', 'b', 'c') 
```

# macos - 如何将 NSGradient 设置为 NSWindow 背景

> ID：11915033
> 
> 赞同：0
> 
> 时间：2012-08-11T13:16:37.740
> 
> 标签：macos, cocoa, nswindow, nsgradient

我是可可新手，我试图设置`NSGradient`为`NSWindow`背景，但这对我来说太难了......我已经尝试过这段代码

```
NSGradient *gradient = [[NSGradient alloc] initWithStartingColor:[NSColor orangeColor] endingColor:[NSColor lightGrayColor]];
NSRect windowFrame = [self frame];
[gradient drawInRect:windowFrame angle:90]; 
```

但它不起作用....任何其他方式设置`NSGradient`为`NSWindow`....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T14:59:30.343

**您可以通过子类化`NSWindow`View 来做到这一点。**

创建新窗口视图的类（例如标题为 WindowViewSubclass）。

然后**.h**文件应如下所示：

```
#import <Cocoa/Cocoa.h>

@interface WindowViewSubclass : NSView {

}

@end 
```

和**.m**文件：

```
#import "WindowViewSubclass.h"

@implementation WindowViewSubclass

- (void)drawRect:(NSRect)dirtyRect
{
    NSGradient *gradient = [[NSGradient alloc] initWithStartingColor:[NSColor orangeColor] endingColor:[NSColor lightGrayColor]];
    NSRect windowFrame = [self frame];
    [gradient drawInRect:windowFrame angle:90];
}

@end 
```

现在选择窗口的视图并转到 Identity Inspectory -> Custom Class -> 并选择这样的类：

![截屏](../Images/37b238e42afbe8f95299bdbde84323b1.png)

**结果：**

![结果图片](../Images/ee71f21b2fada546d5a38be38e377b17.png)

# google-app-engine - JDO + RequestFactory - 实体版本控制

> ID：11915035
> 
> 赞同：0
> 
> 时间：2012-08-11T13:16:49.080
> 
> 标签：google-app-engine, jdo, requestfactory

我试图建立一个非常简单的 RequestFactory 示例，但我失败了。我将实体持久保存到我的数据存储中只是找到，但是当尝试再次将它们拉出时，我得到一个

```
com.google.web.bindery.requestfactory.server.UnexpectedException: The persisted entity with id aglub19hcHBfaWRyCgsSBFVzZXIYBAw has a null version 
```

所以首先这是我的 JPO 注释实体类。最后你会找到一个静态函数供 RequestFactory 调用，以及一个非静态成员函数，它将成为一个 InstanceRequest。

```
package com.test.server;

import java.util.List;

import javax.jdo.PersistenceManager;
import javax.jdo.annotations.Column;
import javax.jdo.annotations.Extension;
import javax.jdo.annotations.IdGeneratorStrategy;
import javax.jdo.annotations.IdentityType;
import javax.jdo.annotations.PersistenceCapable;
import javax.jdo.annotations.Persistent;
import javax.jdo.annotations.PrimaryKey;
import javax.jdo.annotations.Version;
import javax.jdo.annotations.VersionStrategy;

@PersistenceCapable(identityType = IdentityType.APPLICATION)
@Version(strategy = VersionStrategy.VERSION_NUMBER, column = "VERSION", extensions = {         @Extension(vendorName = "datanucleus", key = "field-name", value = "version") })
public class User {

public User() {

}

public User(String name) {
    this.name = name;
}

@PrimaryKey
@Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
@Extension(vendorName = "datanucleus", key = "gae.encoded-pk", value = "true")
private String id;

@Persistent
@Column(name = "version")
private Integer version;      

@Persistent
private String name;

public String getId() {
    return id;
}

public void setId(String id) {
    this.id = id;
}

public Integer getVersion() {
    return version;
}

public void setVersion(Integer version) {
    this.version = version;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

  public static final PersistenceManager persistenceManager() {
        return PMF.get().getPersistenceManager();
      }

  @SuppressWarnings("unchecked")
  public static List<User> findAllUsers() {
      PersistenceManager pm = persistenceManager();
      try {
          String query = "SELECT FROM " + User.class.getName();
          List<User> objects = (List<User>) pm.newQuery(query).execute();
          objects.size(); // This is the workaround to retrieve all objects
          return objects;
      } finally {
          pm.close();
      }
  }

  public static User findUser(String id) {
      PersistenceManager pm = persistenceManager();
      try {
            User u = pm.getObjectById(User.class, id);
            return u;
      } finally {
          pm.close();
      }
  }

  public void persist() {
        PersistenceManager pm = persistenceManager();
        try {
          pm.makePersistent(this);
        } finally {
          pm.close();
        }
      }
  } 
```

RequestFactory 接口本身真的很简单

```
 package com.test.shared;

 import com.google.web.bindery.requestfactory.shared.RequestFactory;

 public interface UserOrderRequestFactory extends RequestFactory {
UserRequest userRequest();
 } 
```

对应的RequestContext也是如此

```
package com.test.shared;

import java.util.List;

import com.google.web.bindery.requestfactory.shared.InstanceRequest;
import com.google.web.bindery.requestfactory.shared.RequestContext;
import com.google.web.bindery.requestfactory.shared.Service;
import com.google.web.bindery.requestfactory.shared.Request;
import com.test.server.User;

@Service(User.class)
public interface UserRequest extends RequestContext {
    Request<List<UserProxy>> findAllUsers();
    InstanceRequest<UserProxy, Void> persist();
} 
```

这是客户端的用户代理

```
package com.test.shared;

import com.google.web.bindery.requestfactory.shared.EntityProxy;
import com.google.web.bindery.requestfactory.shared.EntityProxyId;
import com.google.web.bindery.requestfactory.shared.ProxyFor;

@ProxyFor(com.test.server.User.class)
public interface UserProxy extends EntityProxy {
    EntityProxyId<UserProxy> stableId();
    String getName();
    void setName(String name);
} 
```

最后是我的 onModuleLoad() ，它首先保留一个用户，然后获取所有用户的列表。

```
public void onModuleLoad() {

    final EventBus eventBus = new SimpleEventBus();
    requestFactory = GWT.create(UserOrderRequestFactory.class);
    requestFactory.initialize(eventBus);

    UserRequest userRequest = requestFactory.userRequest();

    UserProxy user = userRequest.create(UserProxy.class);
    user.setName("Luigi");

    userRequest.persist().using(user).fire( new Receiver<Void>()
            {
              @Override
                public void onSuccess(Void arg0)
                {
                    GWT.log("User persisted.");
                }
            });

    userRequest = requestFactory.userRequest();
    Request<List<UserProxy>> findAllUsersRequest = userRequest.findAllUsers();
    findAllUsersRequest.fire( new Receiver<List<UserProxy>>() {
        @Override
        public void onSuccess(List<UserProxy> list) {
            for(UserProxy u: list) {
                GWT.log(u.getName());
            }
        }
    }); 
```

欢迎任何意见。我很乐意收到这方面的任何建议。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-23T06:32:39.487

我不确定这是否重要，但 @Version 列 =“VERSION”与 @Column(name = “version”) 不匹配。

然而，GAE 并没有真正的“列”，您可以通过删除列 = "" 和 @Column 来忽略它们。

见[http://gae-java-persistence.blogspot.com.au/2009/10/optimistic-locking-with-version.html](http://gae-java-persistence.blogspot.com.au/2009/10/optimistic-locking-with-version.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T16:06:50.793

虽然 JPA 似乎自动执行此操作，但在 JDO 中推进版本计数器似乎是我的工作。我将以下代码添加到 User.java 中的持久例程中

```
// JPA @Version does this automatically, but JDO @Version is not working like that. Not sure why.
if (version == null) {
 version = 0l;
}
version++; 
```

# php - iconv 返回奇怪的结果

> ID：11915040
> 
> 赞同：2
> 
> 时间：2012-08-11T13:17:19.573
> 
> 标签：php, utf-8, character-encoding, special-characters, iconv

我正在研究一种方法来解决用于在 PHP 中创建帐户的自动脚本中的特殊字符问题。由于电子邮件地址和其他地方不需要特殊字符，因此我试图摆脱它们，但在将它们提供给脚本之前我无法删除它们，因为用户名必须正确显示给其他用户。

示例：Jörgen Götz 应该获得电子邮件地址 jorgen.gotz@domain.com，但在用户数据库中，他的名字仍然应该是 Jörgen，他的姓氏应该是 Götz。我希望我不会不清楚我想要实现的目标。

我一直在尝试使用 iconv() 但我遇到了一些麻烦。请参阅下面的代码。

> $utf8_sentence = '魏斯、戈德曼、哥贝尔、魏斯、歌德、歌德和哥茨';
> 
> setlocale(LC_ALL, 'en_GB');
> 
> echo $trans_sentence = iconv('UTF-8', 'ASCII//TRANSLIT', $utf8_sentence);

上面的代码应该返回

> 魏斯、戈德曼、戈贝尔、魏斯、歌德、歌德和戈茨

但相反它给了我

> Weiss, Goldmann, G"obel, Weiss, G"othe, Goethe und G"otz

我无法理解报价在那里做了什么。

Chrome 和 IE 都给了我相同的结果，并且页面使用 charset="utf-8"。

在使用 iconv() 之前，我尝试将 strtr() 与“不需要的”字符数组一起使用，但我不喜欢每次需要来回转换字符串时都必须设置特殊字符数组的解决方案。

任何人都可以提供解释或解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T14:43:58.800

尝试将此添加到您的系统（Ubuntu 中的终端）：

```
sudo locale-gen de_DE.UTF-8 
```

然后更改您的 php 脚本的语言环境：

```
setlocale(LC_ALL, 'de_DE.UTF-8'); 
```

### 编辑（Windows 设置）

在 Windows Server 中，您必须安装德语语言包并将上面的更改为：

```
setlocale(LC_ALL, 'germany'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:08:02.313

TRANSLIT 尝试查找与请求字符相似的字符。由于字母 ö 不在 ascii 中，因此将其更改为 umlat 和基本字母的一对。

# html - 带有最小宽度子 Div 的 IE9 HTML 元素调整大小错误

> ID：11915047
> 
> 赞同：0
> 
> 时间：2012-08-11T13:19:02.947
> 
> 标签：html, xhtml, internet-explorer-9, css

考虑以下简单的示例代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" style=" height:100%; width:100%; background:yellow; " >
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>IE9 Min-Width Problem</title>
</head>
<body style=" width:100%; height:100%; margin:0; background:green;">
<div style=" position:relative; min-width:300px; max-width:100%; margin:auto; background:red; ">
<div style=" position:relative; min-width:0; max-width:600px; margin:auto; padding:10px; ">
<div style=" position:relative; width:100%; height:600px; background:blue; ">
Page contents go here.
</div><!-- closes content -->
</div><!-- closes inner-wrapper -->
</div><!-- closes outer-wrapper -->
</body>
</html> 
```

我的网站使用与此类似的代码来实现具有最小和最大宽度的流畅页面布局，并且它在除 Internet Explorer 之外的所有浏览器中都能完美运行。出于某种原因，当您第一次加载页面并将其重新缩小（或放大）时，HTML 元素不会重新调整大小，因此您会立即获得水平滚动条，并且 HTML 背景在右侧可见。但是，如果您刷新页面，问题就会完全消失，IE 的行为就像其他所有浏览器一样。*只有在页面的第一次初始加载时才会出现此问题，因此如果您刷新页面，您必须离开并返回该站点。*

请注意，这似乎只发生在网页位于服务器上时。如果您在本地查看 html 文件，则此错误不会出现丑陋的头部。在这种情况下，我冒昧地将此代码上传到我的测试服务器，以便任何有礼貌的人帮助我弄清楚发生了什么。

[在http://pace-testing.net84.net](http://pace-testing.net84.net)查看页面

如果**有人**有**任何**可能有用的信息，我将不胜感激。这包括 (1) 修复 (2) 解决方法或 (3) 实现目标的更好方法。如果您有任何问题，请告诉我，因为我会经常查看这篇文章（我正在为这篇文章拉头发，所以我急于修复它）。

*其他详细信息：我在 Windows 7 32 位上运行 Internet Explorer 9.0.8。由于 XHTML 1.0 Strict Doctype，浏览器处于 Internet Explorer 9 标准模式。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T13:45:20.843

除非我打开兼容模式（地址栏中的页面图标损坏），否则我看不到在 IE9/W7x64 中发生这种情况。也许你不小心打开了它？

您在页面的第二行似乎有一个严重的错字：

```
<html xmlns="http://www.w3.org/1999/xhtml" style=" height:100%; width:100%; background:yellow; " > 
```

里面在`style`做什么？

[使用validator.w3.org](http://validator.w3.org/)检查您的页面是个好主意，因为它会发现类似的内容。（还有其他验证器。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T15:08:10.710

我已经解决了添加这个元的问题，与你的有点不同。

```
<meta http-equiv="X-UA-Compatible" content="IE=9" /> 
```

此外，您可能想查看这篇文章，尽管您需要以某种方式更改元标记以使其与 XHTML 兼容

[兼容性和标准视图](http://webdesign.about.com/od/internetexplorer/qt/force-compatibility-view-in-ie.htm)

希望能帮助到你

# mysql - 无法连接到 Groovy 中的 MySQLA 数据库

> ID：11915050
> 
> 赞同：0
> 
> 时间：2012-08-11T13:19:10.433
> 
> 标签：mysql, ubuntu, groovy

我有这个小代码：

```
import groovy.sql.Sql
class GroovySqlExample1{
  static void main(String[] args) {
    def sql = Sql.newInstance("jdbc:mysql://localhost/jdb", "root",
           "root", "com.mysql.jdbc.Driver")
    sql.eachRow("select * from user"){ row ->
       //other code . . . . 
    }
  }
} 
```

当我使用以下代码运行以下代码时：

```
 groovy -cp mysql-connector-java-5.1.18-bin.jar database.groovy 
```

我得到这个大错误：

```
Caught: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1116)
    at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:344)
    at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2332)
    at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2369)
    at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2153)
    at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:792)
    at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:381)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:305)
    at GroovySqlExample1.main(database.groovy:4)
Caused by: java.net.ConnectException: Connection refused
    at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:257)
    at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:294)
    ... 9 more 
```

请注意，我可以登录到 mysql 为：

```
 mysql -u root -proot -hlocalhost 
```

一切似乎都很好。但我仍然得到这些错误。我正在使用 Ubuntu 12.04。我在哪里犯错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-26T05:54:04.943

您应该为 MySQL DB 指定端口号，因为 JDBC 永远不知道每种类型的 DB 使用哪个端口号。对于 MySQL，我认为默认端口号应该设置为 3306

# css - 如何创建语音识别后自动搜索的搜索引擎

> ID：11915051
> 
> 赞同：0
> 
> 时间：2012-08-11T13:19:11.153
> 
> 标签：css, html, webkit, speech

> **可能重复：**
> [jQuery HTML5 语音输入](https://stackoverflow.com/questions/6393410/jquery-html5-speech-input)

我想为我的网站创建一个搜索引擎，它将使用语音识别、x-webkit-speech 代码，但问题是我想要用户说出查询并且它识别它必须自动搜索当前用户必须按下搜索按钮或点击回车按钮，我正在使用以下代码：-

`<form method="get" action="http://www.mysite.com/search/"> <input type="speech" id="speech" name="i" size="50" x-webkit-speech /> <input type="submit" value="Search" /> </form>`

你能告诉我我需要添加什么以及在哪里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T13:30:58.390

我建议您使用 JQuery 库：http: [//jquery.com/](http://jquery.com/)

只需将此代码添加到您的标题中：

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

添加然后将此行添加到您的 JavaScript 文件中：

```
$(document).ready(function()
{
    $('#speech').bind('webkitspeechchange',function()
    {
        $(this).parent('form').submit();
    });
}); 
```

# netbeans - 我的 java 项目构建在 jdk 7 中。我想把它转换成jdk 6。我该怎么做？

> ID：11915060
> 
> 赞同：2
> 
> 时间：2012-08-11T13:21:03.897
> 
> 标签：netbeans, java

我的 java 项目构建在 jdk 7 中。我想把它转换成jdk 6。我该怎么做？有可能转换吗？在网豆中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T13:24:17.187

将单独的 JDK (1.6) 添加到您的 IDE 首选项中。在项目更改的构建路径中使用了从 1.7 到刚刚添加的 1.6 的 JRE 环境。

**升级版：**

对于 NetBeans，单击`Tools > Java Platforms > Add Platform`指定附加 JRE 的位置。然后去你的`Project view > Right Click on libraries > Properties`并选择刚刚添加的java平台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T13:39:44.203

您可以将 NetBeans 项目源代码和二进制输出配置为 Java 6，请参阅[此答案](https://stackoverflow.com/a/4142528/303598)：

> 在项目选项卡中，右键单击项目并选择属性。在库类别中选择 Java Platform JDK 1.6。然后，在 Source 类别中选择 Source/Binary Format JDK6。

请注意，您不必这样做，因为 JDK 7 向后兼容。

或者，如果它是基于 Maven 的项目，您可以将[maven-compiler-plugin](http://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html)配置为使用 1.6 版：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>2.3.2</version>
    <configuration>
        <source>1.6</source>
        <target>1.6</target>
    </configuration>
</plugin> 
```

# rest - Restful Web 服务中的 Jaxb

> ID：11915062
> 
> 赞同：1
> 
> 时间：2012-08-11T13:22:01.853
> 
> 标签：rest, jaxb

我之前曾使用 Jaxb 处理过 Web 服务。我从 xsd 生成 Java，然后使用 HTTP post 将 xml 请求发布到指定的 URL。最近听说了这个Restful web services，读起来感觉之前做的只是restful web service。但是，我不确定它是否相同。谁能解释一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T01:31:40.583

听起来您一直在创建相同类型的 RESTful 服务。您可能指的是 JAX-RS，它是一种标准，它定义了一种创建 RESTful 服务的更简单方法，其中 JAXB 是`application/xml`媒体类型的标准绑定层。下面是一个示例服务：

```
package org.example;

import java.util.List;

import javax.ejb.*;
import javax.persistence.*;
import javax.ws.rs.*;
import javax.ws.rs.core.MediaType;

@Stateless
@LocalBean
@Path("/customers")
public class CustomerService {

    @PersistenceContext(unitName="CustomerService",
                        type=PersistenceContextType.TRANSACTION)
    EntityManager entityManager;

    @POST
    @Consumes(MediaType.APPLICATION_XML)
    public void create(Customer customer) {
        entityManager.persist(customer);
    }

    @GET
    @Produces(MediaType.APPLICATION_XML)
    @Path("{id}")
    public Customer read(@PathParam("id") long id) {
        return entityManager.find(Customer.class, id);
    }

    @PUT
    @Consumes(MediaType.APPLICATION_XML)
    public void update(Customer customer) {
        entityManager.merge(customer);
    }

    @DELETE
    @Path("{id}")
    public void delete(@PathParam("id") long id) {
        Customer customer = read(id);
        if(null != customer) {
            entityManager.remove(customer);
        }
    }

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/08/creating-restful-web-service-part-45.html](http://blog.bdoughan.com/2010/08/creating-restful-web-service-part-45.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:37:08.273

说到“RESTful”，它只是 HTTP 方法和 url 模式的约定。

```
CRUD   METHOD   URL                         RESPONSE DESCRIPTION
----------------------------------------------------------------
CREATE POST     http://www.doma.in/people   202      Creates a new person with given entity body
READ   GET      http://www.doma.in/people   200
READ   GET      http://www.doma.in/people/1 200 404  Reads a single person
UPDATE PUT      http://www.doma.in/people/2 204      Updates a single person with given entity body
DELETE DELETE   http://www.doma.in/people/1 204      Deletes a person mapped to given id(1) 
```

您甚至可以使用 Sevlets 实现这类合同。实际上，在 `JAX-RS`.

当您使用`JAX-RS`.

这是 Blaise Doughan 先生的稍作修改的版本。Blaise Doughan 先生的代码没有任何问题。

我只想为上述 url 模式添加更多内容。

可以提供的一件很棒的事情`JAX-RS`是，如果您拥有那些优秀的 JAXB 类，您可以根据客户的需要提供 XML 和 JSON。以相同的方法查看这两种格式的`@Produces`s 和`@Consumes`s。

当客户端想要以 XML 格式接收时`Accept: application/xml`，他们只需获取 XML。

当客户端想要以 JSON 格式接收时`Accept: application/json`，他们只需获取 JSON。

```
@Path("/customers");
public class CustomersResource {

    /**
     * Reads all person units.
     */
    @POST
    @Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    public Response read() {
        final List<Customer> listed = customerBean.list();
        final Customers wrapped = Customers.newInstance(listed);
        return Response.ok(wrapped).build();
    }

    @POST
    @Consumes({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    public Response createCustomer(final Customer customer) {
        entityManager.persist(customer);
        return Response.created("/" + customer.getId()).build();
    }

    @GET
    @Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    @Path("/{id: \\d+}")
    public Response read(@PathParam("id") final long id) {
        final Customer customer = entityManager.find(Customer.class, id);
        if (customer == null) {
            return Response.status(Status.NOT_FOUND).build();
        }
        return Response.ok(customer).build();
    }

    @PUT
    @Consumes({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    public void updateCustomer(final Customer customer) {
        entityManager.merge(customer);
    }

    @DELETE
    @Path("/{id: \\d+}")
    public void deleteCustomer(@PathParam("id") final long id) {
        final Customer customer = entityManager.find(Customer.class, id);
        if (customer != null) {
            entityManager.remove(customer);
        }
        return Response.status(Status.NO_CONTENT).build();
    }
} 
```

假设您想提供一些图像？

```
@GET
@Path("/{id: \\d+}")
@Produces({"image/png", "image/jpeg"})
public Response readImage(
    @HeaderParam("Accept") String accept,
    @PathParam("id") final long id,
    @QueryParam("width") @DefaultValue("160") final int width,
    @QueryParam("height") @DefaultValue("160") final int height) {

    // get the image
    // resize the image
    // make a BufferedImage for accept(MIME type)
    // rewrite it to an byte[]
    return Response.ok(bytes).build();

    // you can event send as a streaming outout
    return Response.ok(new StreamingOutput(){...}).build();
} 
```

# javascript - 将外部 SVG 并包含 JavaScript 加载到 HTML 中

> ID：11915065
> 
> 赞同：2
> 
> 时间：2012-08-11T13:22:28.483
> 
> 标签：javascript, html, xml, ajax, svg

我有一个包含 JavaScript 代码的 SVG 文档。[正如我在这里问的那样](https://stackoverflow.com/questions/11900452/call-javascript-function-inside-svg-from-surrounding-html)，我试图从加载的 HTML 中调用一个在 SVG 图形内定义的 JavaScript 函数。我得到了一个链接到[这个页面](https://jwatt.org/svg/demos/scripting-across-embed.html)的答案，它解释了它是如何工作的。但是，它在 Google Chrome 中不起作用。Firefox 确实正确地创建了所有这些。

我想知道是否有一个唯一的解决方案可以将 SVG 文件的 XML 结构正确附加到调用 HTML 的 DOM 并使脚本可调用。是否有可能使用 jQuery 简单地加载文件并将其附加到 div 或其他东西上？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T13:01:02.677

[这是一个示例](http://xn--dahlstrm-t4a.net/svg/html/get-embedded-svg-document-script.html)，说明如何调用包含在 svg 中的脚本中的函数，该 svg 由 html 引用，每个`object`,`embed`和`iframe`.

您的问题有点不清楚，您应该考虑发布无效的示例。

# php - 如何在PHP中使用数组绑定两个函数的结果

> ID：11915068
> 
> 赞同：1
> 
> 时间：2012-08-11T13:22:44.437
> 
> 标签：php, arrays, binding, merge, array-merge

我在这里有两个功能：

```
public function bindOwnerToSites(){  
error_reporting (E_ALL^ E_NOTICE);  

    foreach( $this->balance as $keysaa =>$key_valuesa)//getsitebalance
            { 
                foreach( $this->sites as $keys=>$key_values)//getsites
                  {

                        if  ($key_values['SiteID'] == $key_valuesa['SiteID'])
                        {

                         $this->arrays[$key_valuesa['SiteID']] = array('SiteID'=>$key_valuesa['SiteID'],'Balance'=>$key_valuesa['Balance'],'MinBalance'=>$key_valuesa['MinBalance'],'MaxBalance'=>$key_valuesa['MaxBalance'],'OwnerAID'=>$key_values['OwnerAID'],'GroupID'=>1);    

                        }

                 }

            }
            print_r ($this->arrays,$return=null);  
    } 
```

bindOwnerToSites() 的输出如下所示：

```
Array
(
[1] => Array
    (
        [SiteID] => 1
        [Balance] => 2000
        [MinBalance] => 1000
        [MaxBalance] => 500
        [OwnerAID] => 1
        [GroupID] => 1
    )

  ) 
```

这是第二个函数的代码：

```
 public function computeGHComponents()
    {
      error_reporting (E_ALL^ E_NOTICE);          

        foreach ($this->transaction as $t){
            $amount = (float) $t['Amount'];

            if (isset($this->totals[ $t['SiteID'] ][ $t['TransactionType'] ])){
                $this->totals[ $t['SiteID'] ][ $t['TransactionType'] ] += (float) $amount;
            } else {
                 $this->totals[ $t['SiteID'] ][ $t['TransactionType'] ] = (float) $amount;
            }
        }

     foreach($this->totals as $key => $value)
        {
          $this->result[$key] = array("Deposit"=>$value['D'], "Redemption"=>$value['W'], "Reload"=>$value['R']);

       }
        print_r($this->result); 

    } 
```

computeGHComponents() 的输出如下所示：

```
Array
(
[1] => Array
    (
        [Deposit] => 10000
        [Redemption] => 500.00
        [Reload] => 200.00
    )

  ) 
```

现在，我需要绑定这两个函数的结果，我会自己尝试，但我的代码有问题，我需要你的帮助，我把所有的东西都放在这里，希望你能更好地了解我想实现的目标。这是我的绑定代码：

```
 public function bindGHComponentsToSites()
    {
    error_reporting (E_ALL^ E_NOTICE);  

    $combined = array();

    foreach($this->arrays as $key => $key_value){

                 foreach($this->result as $keys => $key_values){   

               $combined[$key_values['SiteID']] = array_merge((array)$key_value, (array)$key_values);

          }

     }  
       print_r($combined);

  } 
```

结果应该是这样的，我怎么会有这样的结果？这个问题需要你的耐心，我只是一个初学者，所以希望你能理解。

```
Array
(
[1] => Array
    (
        [SiteID] => 1
        [Balance] => 2000
        [MinBalance] => 1000
        [MaxBalance] => 500
        [OwnerAID] => 1
        [GroupID] => 1
        [Deposit] => 10000.00
        [Redemption] =>  500.00
        [Reload] => 200.00
    )

 ) 
```

在此先感谢，请以正确的方式指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T13:28:36.327

有用于合并数组的**加号运算符**（应保留键时）：

```
<?php
$array1 = array('foo' => 'bar');
$array2 = array('baz' => 'trololol');

print_r($array1 + $array2); // yields "Array ( [foo] => bar [baz] => trololol )" 
```

在您的情况下，可以这样使用：

```
$combined = array();
foreach ($this->arrays as $siteId => $data) {
    $combined[$siteId] = $data + $this->result[$siteId];
} 
```

# node.js - 玉（带快递）：脚本标签 - 未捕获的语法错误：意外的令牌非法

> ID：11915069
> 
> 赞同：1
> 
> 时间：2012-08-11T13:22:57.937
> 
> 标签：node.js, syntax, express, pug

我在 express/nodejs 中有一个应用程序，使用玉作为模板引擎。

在模板文件中有以下段落 `p.btn(onclick='clicked( #{entity._id} )') Click` ，在此段落之后（在一些标记之后）有一个脚本标记，其中有一个 javascript 函数。

问题是如果我点击它抛出的段落

> Uncaught SyntaxError: Unexpected token ILLEGAL

在脚本标签中。如果我在 DOM 检查器中看到这个脚本标记，它是错误的语法突出显示，但它没有不正确的语法。

此外，如果我在上面段落的 onclick 属性中删除`#{entity._id}`它不会引发任何错误。

为什么？在翡翠模板中编写和包含脚本标签的最佳实践是什么？

编辑：

为段落生成的 HTML 是

`<p onclick="clicked(5025)" class="btn">Click</p>`

单击处理程序位于外部文件中（包含在脚本标记中）并且是 `var clicked=function(id){ location.href='/click/'+id+'/'; };`

错误在以下脚本标记中引发（即段落后的某个标记）

`<script>flowplayer("5025","/javascripts/flowplayer/flowplayer-3.2.12.swf",{ clip:{ autoPlay:false } }); </script>`

# ruby-on-rails - 包括用于延迟作业的 ActiveModel 关系对象

> ID：11915082
> 
> 赞同：0
> 
> 时间：2012-08-11T13:24:55.143
> 
> 标签：ruby-on-rails, delayed-job

嗨，我有以下问题。假设有一个用户拥有多个注释。并且一个注释属于一个用户。

```
user = User.new(name:'John')
note = user.notes.new(title:'test')

user.delay.remind_me 
```

我希望 DJ 还包括注释，而不仅仅是用户对象。有没有办法做到这一点？我知道最好只将 user_id 存储到 DJ que 中，但我不想将这些数据存储到数据库中，所以我正在尝试这个。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T13:41:37.327

`remind_me`方法应该负责从用户那里检索笔记。像这样：

```
def remind_me
  self.notes.each do |note|
    # do something
  end
end 
```

但话虽如此，我建议不要将用户对象存储在 DelayedJob 队列中。

你可以这样做：

```
User.delay.remind(user_id) 
```

# android - Android：从服务拨打电话

> ID：11915086
> 
> 赞同：7
> 
> 时间：2012-08-11T13:25:48.567
> 
> 标签：android, phone-call

我尝试从服务内部拨打电话。我使用的代码是：

```
Intent intent = new Intent(Intent.ACTION_CALL);
intent.setData(Uri.parse("tel:" + number));
startActivity(intent); 
```

它在主要活动内部运行良好，但在服务中运行良好。错误发生在最后一行。不能在服务内拨打电话吗？

我怎样才能让这段代码在主要活动上运行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-11T13:32:14.933

尝试从服务内部拨打电话：

```
Intent intent = new Intent(Intent.ACTION_CALL);
intent.setData(Uri.parse("tel:" + number));
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.addFlags(Intent.FLAG_FROM_BACKGROUND);
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-09-17T22:59:18.893

如果服务不在任何活动范围内，请检查清单

# facebook - Scraper 在超过 ~390KB 的文件上失败

> ID：11915087
> 
> 赞同：2
> 
> 时间：2012-08-11T13:26:02.663
> 
> 标签：facebook, debugging, web-scraping, facebook-opengraph

Facebook 的 URL 抓取工具是否有大小限制？我们在网站上有几本书。那些 HMTL 文件大小低于特定大小 (~390KB) 的文件会被抓取并正确读取，但较大的 4 个文件则不会。这些较大的项目会收到 200 响应代码，并且会打开规范 URL。

所有这些页面都是使用相同的模板构建的，唯一的区别是每本书内容的大小以及每本书与网站上其他页面的链接数量。

1.  点击规范网址
2.  在 Firefox 或 Chrome 中的开发人员工具中打开 Firebug 到网络选项卡 3，对于列出的失败，*.html 大小为 >~390KB，成功为 <~390K
3.  点击“查看我们的抓取工具为您的 URL 看到的确切内容”
4.  失败为空白页，成功为 HTML

**失败：**

*   [https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Frcg.org%2Fbooks%2Ftapom.html](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Frcg.org%2Fbooks%2Ftapom.html)
*   [https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Frcg.org%2Fbooks%2Ftbgpu.html](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Frcg.org%2Fbooks%2Ftbgpu.html)
*   [https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Frcg.org%2Fbooks%2Fttjc.html](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Frcg.org%2Fbooks%2Fttjc.html)
*   [https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Frcg.org%2Fbooks%2Ftbdse.html](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Frcg.org%2Fbooks%2Ftbdse.html)

**成功：**

*   [https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Frcg.org%2Fbooks%2Fthogtc.html](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Frcg.org%2Fbooks%2Fthogtc.html)
*   [https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Frcg.org%2Fbooks%2Faabibp.html](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Frcg.org%2Fbooks%2Faabibp.html)
*   [https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Frcg.org%2Fbooks%2Ftww.html](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Frcg.org%2Fbooks%2Ftww.html)
*   [https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Frcg.org%2Fbooks%2Ftsosw.html](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Frcg.org%2Fbooks%2Ftsosw.html)
*   [https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Frcg.org%2Fbooks%2Fsyottc.html](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Frcg.org%2Fbooks%2Fsyottc.html)
*   [https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Frcg.org%2Fbooks%2Fttigtio.html](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Frcg.org%2Fbooks%2Fttigtio.html)
*   [https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Frcg.org%2Fbooks%2Faadac.html](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Frcg.org%2Fbooks%2Faadac.html)
*   [https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Frcg.org%2Fbooks%2Fsiud.html](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Frcg.org%2Fbooks%2Fsiud.html)
*   [https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Frcg.org%2Fbooks%2Ftuyc.html](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Frcg.org%2Fbooks%2Ftuyc.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T12:14:21.840

您的问题的解决方案可能是检查真实用户或 Facebook 机器人是否正在访问您的页面。如果是机器人，则只为它渲染必要的元数据。您可以通过其用户代理检测机器人，根据[Facebook 文档](https://developers.facebook.com/docs/reference/plugins/like/)，该用户代理是：
`"facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php)"`

代码看起来像这样（在 PHP 中）：

```
function userAgentIsFacebookBot() {
    if ($_SERVER['HTTP_USER_AGENT'] == "facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php)") {
        return true;
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T15:21:46.820

你确定这不是你的问题吗？上次我检查刮板只请求了文档的前 4096 个字节，这应该总是有足够的空间来检索`<head></head>`带有元标记的部分

# javascript - html5画布上的自定义滚动

> ID：11915094
> 
> 赞同：7
> 
> 时间：2012-08-11T13:27:44.027
> 
> 标签：javascript, html, scrollbar, html5-canvas

为显示在 hmtl5 画布中的超大数据提供滚动和本机滚动条的推荐方法是什么？

我需要显示 128000x128000 像素的数据。使用宽度/高度设置为 128000 的画布不是一个选项，因为这将使用大量 RAM（根据我的快速计算大约为 61 GB）。

所以我需要一种为 HTML5 画布提供自定义滚动条的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T20:52:30.243

经过快速测试，我不确定 Chrome 或 Firefox 是否会渲染那么大的画布。我的赌注是创建一个画布元素，但从不将其附加到 DOM。像这样：

```
var hiddenCanvas = document.createElement('canvas');
hiddenCanvas.width = 128000;
hiddenCanvas.height = 128000;
var hiddenContext = hiddenCanvas.getContext('2d'); 
```

然后创建一个较小的画布，它将实际显示隐藏画布的一部分

```
<canvas width="something reasonable" height="something reasonable" id="viewCanvas"/> 
```

并使用 drawImage 方法绘制部分：

```
var viewCanvas = document.getElementById('viewCanvas');
var viewContext = viewCanvas.getContext('2d');
viewCanvasContext.drawImage(hiddenCanvas, 40, 50, viewCanvas.width, viewCanvas.height, 0, 0, viewCanvas.width, viewCanvas.height); 
```

然后由您决定是否提供向上/向下/向右/向左按钮进行导航，或者使用 20px 宽的 DIV 来伪造滚动条，该 DIV 只会显示滚动条，并且您可以在其上挂上一个 onscroll 甚至监听器。每次用户改变位置时，再次调用 drawImage，更新 x/y 位置（在我的示例中为 40 和 50）。

话虽如此，即使在隐藏的情况下，我也怀疑浏览器是否可以与这么大的画布一起使用。

我碰巧正在寻找相同问题的解决方案，所以如果在您的研究中幸运的话，请分享。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T09:56:20.597

Interesting question. I haven’t used `<canvas>` very much, but I believe the inside of the `<canvas>` is best thought of like an image, i.e. it’s a black box as far as the DOM is concerned.

As such, I don’t think you can really scroll it in the way that you’re imagining. If you had a 128000×128000 `<canvas>`, you could put it inside a `<div>` that’s e.g. 1280×1280 and set that `<div>` to `overflow:hidden`, but as you say, a 128000×128000 `<canvas>` is impractical.

I guess the kind of solution you’re looking for would provide a virtual 128000×128000 canvas interface, but then split it up into chunks, provide a scroll interface, and draw in each chunk as it was scrolled into view.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T13:33:59.933

**[jCanvas](http://www.webresourcesdepot.com/jcanvas-canvas-manipulation-with-jquery)**是一个可以帮助你的 jQuery 插件。

# cordova - 如何在本地使用 wamp 服务器测试我的 Phonegap 应用程序？

> ID：11915099
> 
> 赞同：1
> 
> 时间：2012-08-11T13:28:32.157
> 
> 标签：cordova, dreamweaver, wampserver, phonegap-plugins

我有一个 Dreamweaver 站点，可以在我的 Chrome 浏览器上成功运行，但我想针对 Android 模拟器对其进行测试。到目前为止，我已经能够通过（站点-> 配置框架）构建和模拟我的 Dreamweaver 站点，但是我在对我的 php 服务所在的本地服务器（即 Wampserver）进行 Ajax 调用时遇到了困难。当我单击连接以进行 Ajax 调用的按钮时，没有任何反应。

需要注意的一件事是我成功安装了 WAMP，并且我的应用程序在 chrome 浏览器中运行良好。问题是我到底做错了什么？

是Phonegap无法连接到本地服务器吗？

下面是我进行 Ajax 调用的代码块：

```
$('form#TSLogin').bind('submit',function() {
  var u=  $('#TsUsername').val();
  var p=  $('#TsPassword').val();
  $.ajax({
    type:"POST",
    url:"/services/login.php",
    dataType:"json",
    data:$("form#TSLogin").serialize(),
    success:function(data){
      if (data.errora==true){
        alert("chima");
      }
      if (data.errora==false){
        alert("failed");
      }
    }
  });
  return false;
}); 
```

我做错了什么，或者我还没有做什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T13:19:20.770

试试安卓模拟器网址

```
url = "http://10.0.2.2/yourfile.php" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T22:51:05.957

您是否尝试过替换：
`url:"/services/login.php",`通过`url:"http://yourAddressIp/services/login.php",`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T14:06:24.040

在这种情况下，您应该使用 jsonp 而不是 json

# java - Java在JPanel中绘制字符串

> ID：11915103
> 
> 赞同：0
> 
> 时间：2012-08-11T13:28:47.280
> 
> 标签：java, methods, jpanel, draw

我是完整的 Java 菜鸟，这个问题会很容易。我确实尝试在整个互联网上找到答案，但没有什么是我特别需要的（如果您知道该主题的任何教程页面，请发布链接，我将非常感激。）

基本上我想在我的 DrawPanel 中绘制字符串。我知道我需要在某个地方调用方法才能这样做，但我不知道在哪里。我的绘图面板有方法：

```
public void drawGuessWord(Graphics g){
    WordsList guessWord = new WordsList();
    String word = guessWord.pickWord();
    g.drawString(word, 20, 20);
} 
```

我想调用该方法，以便在 DrawPanel 中绘制字符串。

以防万一这是我的整个 DrawPanel：

```
import java.awt.*;
import javax.swing.*;
import javax.swing.border.Border;

public class DrawPanel extends JPanel {

    DrawPanel(){
        Border raisedbevel = BorderFactory.createRaisedBevelBorder();
        Border loweredbevel = BorderFactory.createLoweredBevelBorder();
        this.setBackground(Color.WHITE);
        this.setBorder(BorderFactory.createLoweredBevelBorder());
        this.setPreferredSize(new Dimension(200,200));
    }

    public void drawGuessWord(Graphics g){
        WordsList guessWord = new WordsList();
        String word = guessWord.pickWord();
        g.drawString(word, 20, 20);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T13:33:00.803

```
public void paint(Graphics g)
{
  g.drawString(word, 20, 20);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T15:30:26.883

除了 MimiEAM 的解决方案，您可能还想阅读

*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [2D 图形](http://docs.oracle.com/javase/tutorial/2d/index.html)

# c# - 无法加载 DLL UIAutomationCore.dll

> ID：11915104
> 
> 赞同：2
> 
> 时间：2012-08-11T13:28:59.897
> 
> 标签：c#, wpf

我在我的一个应用程序的 XP 上遇到了一个奇怪的错误。该应用程序是 C# 中使用 .NET Client 4 的 WPF 应用程序。应用程序启动时出现错误，应用程序显示 UI，然后崩溃。该错误来自我的跟踪日志文件。有人见过这个吗？

```
Type : System.DllNotFoundException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
    Message : Unable to load DLL 'UIAutomationCore.dll': The specified procedure could not be found. (Exception from HRESULT: 0x8007007F)
    Source : UIAutomationTypes
    Help link : 
    TypeName : 
    Data : System.Collections.ListDictionaryInternal
    TargetSite : Int32 RawUiaLookupId(AutomationIdType, System.Guid ByRef)
    Stack Trace :    at MS.Internal.Automation.UiaCoreTypesApi.RawUiaLookupId(AutomationIdType type, Guid& guid)
       at System.Windows.Automation.AutomationIdentifier.Register(AutomationIdType type, Guid guid, String programmaticName)
       at System.Windows.Automation.InvokePatternIdentifiers..cctor() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T14:54:05.537

我搜索了同样的问题，发现了这个： [VS2010 crashing](http://connect.microsoft.com/VisualStudio/feedback/details/663208/visual-studio-2010-crashing-frequently)

根据那里的帖子，它说您可能有一个过时的 UIautomation DLL。同样根据那里发布的内容更新 DLL 从这里：[UIautomation 下载链接](http://www.microsoft.com/en-us/download/details.aspx?id=13821) 解决了这个问题。

我希望我有所帮助，

萨吉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T02:30:00.893

调用 RawUiaLookupId`UiaCoreTypesApi.UiaLookupId(type, ref guid)`以获取控件的 Id，然后初始化 AutomationIdentifier。UiAutomationCore.dll 常用于提供程序的实现，加上您的应用程序是 WPF 应用程序，因此问题出在服务器端。服务器端提供者通常由系统提供服务。我不确定是否进行 Windows 更新会解决此问题。如果没有，我们需要手动更新这个库。

# c - gcc - pedantic 不会编译，ISO C90 禁止混合声明和代码如何解决这个问题？

> ID：11915105
> 
> 赞同：1
> 
> 时间：2012-08-11T13:29:05.717
> 
> 标签：c, gcc

我需要该代码让我的程序有颜色。但是如果我使用-pedantic，它将无法编译。有没有解决的办法？顺便说一句

```
gcc -pedantic MP1.c -o 哈哈
MP1.c：在函数“主”中：
MP1.c:65：警告：ISO C90 禁止混合声明和代码
MP1.c:686:30：警告：（每个输入文件只会报告一次）

```

第 65 行：

```
int originalAttrs = ConsoleInfo.wAttributes; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T13:31:12.003

将声明移动`originalAttrs`到使用它的范围的顶部。该错误与使用 of 无关，`ConsoleInfo.wAttributes`但与`originalAttrs`. 没有看到整个代码，它可能是这样的：

```
printf("hello\n"); /* For example. */
int originalAttrs = ConsoleInfo.wAttributes; 
```

修理：

```
int originalAttrs;
printf("hello\n"); /* For example. */
originalAttrs = ConsoleInfo.wAttributes; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-11T01:50:09.387

要么修复代码，使其符合 C90 标准（正如[hmjd 的回答](https://stackoverflow.com/a/11915124/827263)所建议的那样），要么告诉 gcc 使用更新版本的标准。

C 确实允许以 C99 标准开头的混合声明和语句。

如果你使用

```
gcc -std=c99 -pedantic 
```

或者

```
gcc -std=c11 -pedantic 
```

它应该工作。

# python - 访问类中的实例变量名

> ID：11915106
> 
> 赞同：0
> 
> 时间：2012-08-11T13:29:09.833
> 
> 标签：python

一点背景 - 我正在玩 pygame，并想创建一个包含所有 Mob 类实例位置的字典。

我的看法：

```
human = Mob(pos)
mob_positions = {human : pos} 
```

所以每次我打电话时，`Mob.__init__()`我都想在字典中添加`pos`一个`mob_positions`。

如何访问当前实例变量名称？或者这是非常错误的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T13:32:06.480

任何绑定方法，包括`__init__`，都至少需要一个参数，通常命名为`self`，这正是您所描述的。

```
class Mob(object):
    def __init__(self, pos):
        mob_positions[self] = pos 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T13:33:45.827

你有几种方法可以解决这个问题。其中之一是将 mob_positions 字典作为参数传递给 __init__。

```
class Mob(object):
    def __init__(self, pos, field=None):
        ...
        if field:
            field[self] = pos 
```

这样的符号允许您将暴徒置于初始化或不初始化（取决于您对暴徒所做的事情）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T13:32:22.300

当前实例变量只是函数的第一个参数。按照惯例，它被命名为`self`.

这是我做事的方式。

```
class Mob(object):
    def __init__(self, pos, mob_positions):
        self.pos = pos
        mob_positions[self] = pos 
```

# css - 如何在rails中使用LESS Elements？

> ID：11915107
> 
> 赞同：0
> 
> 时间：2012-08-11T13:29:18.977
> 
> 标签：css, ruby-on-rails-3, twitter-bootstrap, less

我尝试在[http://lesselements.com/](http://lesselements.com/)上使用 LESS Elements 我下载了[LESS Elements](https://github.com/dmitryf/elements/zipball/master)，然后像这样导入它：

```
@import "elements.less"; 
```

在我的 application.html.haml 中，我尝试像这样使用它：

```
.row{:style=>'height: 105px; gradient(#00F5F5, #EEE, #FFF);'} 
```

我已经在使用 twitter bootstrap，你可以看到上面的 row 类。但是，结果 div 是纯白色的，知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T23:52:45.367

Mixin 以“.”开头。

```
.row{ style: "height: 105px; .gradient(#00F5F5, #EEE, #FFF);" } 
```

您也可以使用类来执行此操作（这在运行时会更有效）

your_controller.css.less

```
@import "elements.less"
.gradient-row {
   .gradient(#00F5F5, #EEE, #FFF);
} 
```

your_view.html.haml

```
.row.gradient-row{style: "height: 105px;"} 
```

# java - 数据库设计 - 使用 Short 而不是 Varchar - 用于状态字段

> ID：11915109
> 
> 赞同：1
> 
> 时间：2012-08-11T13:29:27.370
> 
> 标签：java, database, database-design, database-performance

以下方法可用于设计 DB 表中的状态相关字段。

**方法 01：**

*   使用“VARCHAR”作为数据类型。
*   直接状态将存储为 NEW, IN PROGRESS, CLOSED

**限制：**

*   在表中搜索字符串总是需要更多的时间和资源
*   更改现有状态文本（例如：“已关闭”为“已完成”）需要完整表更新

**方法 02：**

*   创建状态查找表
*   在依赖表中使用状态表作为外键

**限制：**

*   维护外键关系
*   需要对应用程序中的所有相关查询使用 JOIN

**方法 03：**

*   对状态字段使用 short（或）int
*   在应用程序接口 (EJB) 中使用 ENUM 维护状态文本

这将解决以前方法的局限性

**限制：**

*   需要将整数映射到相关状态（但仍然使用枚举而不是文本是更好的方法）

我觉得第三种方法在 * 更快的 DB 索引方面会更有效 * 由于短（或）int 字段（而不是）varchar 而更快的搜索 * 当然更少的内存指纹

您能否告知第三种方法在灵活性、维护和性能方面是否存在任何缺陷？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T01:57:08.137

```
方法 02：

创建状态查找表
在依赖表中使用状态表作为外键
限制：

维护外键关系
需要对应用程序中的所有相关查询使用 JOIN

```

如果您存储为查找表的外键的值不是人类可读的，或者只有全文是合适的，您才需要使用连接。如果您使用整数，则始终需要连接。但是您可以对某些表使用人类可读的代码。并且查询 char(1) 可能比整数更快。（如果您只有三个不同的值和 1 亿行，这些都不会很快。）

```
    status_code 状态
    --
    N 新
    P 进行中
    C 关闭

```

将“已关闭”更改为“已完成”只需要更新一行，但我认为这是一个巧合。

```
方法 03：

对状态字段使用 short（或）int
在应用程序接口 (EJB) 中使用 ENUM 维护状态文本

```

我不想维护一个只有整数作为值的数据库。

如果您要在此处存储一个整数，则该整数需要是一个表的外键，该表存储业务实际感兴趣的值。您的应用程序 ENUM 也应该通过查询该表来生成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T13:54:58.143

在我们的应用程序中，我们使用了

> `[enum,VARCHAR(30)]` 为了`PROCESS TYPES`

和

> `[String,VARCHAR(1)]` 为了`PROCESS STATUS`

`enum`看起来是一个更好的选择，因为它可以保存`String`Java 代码中的比较。所以我相信如果你选择实现作为一个`[enum,NUMERIC]`领域，它应该一路走下去......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T14:05:01.577

在我们的项目中，我们使用了与您的#3 非常相似的方法。在 Java 方面，我们使用`enum`了 s。在持久化到数据库时，我们使用 JPA 的[@Enumerated](http://docs.oracle.com/javaee/6/api/javax/persistence/Enumerated.html) (EnumType.Ordinal ) 将[枚举](http://docs.oracle.com/javaee/6/api/javax/persistence/EnumType.html#ORDINAL)映射到数字。我们将状态文本嵌入到枚举中（参见下面的示例），但它也可以完全分开。

**优点：**

*   Java 代码比仅使用数字或字符串更不容易出错。
*   数据库部分既节省空间又节省 CPU 使用率。
*   您可以随意重命名`enum`项目（但不能重命名或移动，请参阅缺点部分）。

**缺点：**

*   数据库中的数字是枚举的[序数](http://docs.oracle.com/javase/6/docs/api/java/lang/Enum.html#ordinal%28%29)。因此，您不能`enum`在 Java 代码中删除或重新排序项目。您只能在列表末尾添加新的。这取决于你的情况，但对我们来说这没什么大不了的。没有理由移动枚举项的顺序。如果我们想删除一个项目，我们只需将其重命名为`REMOVED_STATUS_XY`确保不再在代码中使用。

* * *

```
public enum Status {
    EXAMPLE_STATUS("User status message"),
    ... ;

    private Status(String label) {
        this.label = label;
    }
    private final String label;

    public final String label() {
        return label;
    }
} 
```

# c# - 模拟物理kinect传感器的驱动程序或dll

> ID：11915110
> 
> 赞同：2
> 
> 时间：2012-08-11T13:29:36.283
> 
> 标签：c#, kinect

对于 kinect 开发，是否有驱动程序或 dll 可以通过使用网络摄像头或其他东西来代替物理 kinect 传感器？或者你必须有一个 kinect 传感器？我没有 x360，我也不太喜欢只买一个 kinect 传感器的想法……

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T21:29:13.583

[libfreenect](http://openkinect.org/wiki/Fakenect)库包含可让您模拟 Kinect 的 fakenect。您必须使用 libfreenect 'record' 程序收集数据集（有很多可供下载），然后您可以离线测试您的算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T01:12:33.910

其他解决方案是使用 Kinect Studio，但其他人必须记录来自真实 kinect 的流，但文件大小约为 GBytes。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-11T14:49:01.933

你必须有一个 Kinect 传感器才能用 Kinect 开发（如果你想测试你的程序），就像 Quentin 说的那样，它不仅仅是一个 VGA 摄像头。它有一个 IR 传感器和 4 个麦克风。此外，您不需要 Xbox 来使用 Kinect 进行开发，您可以使用 XNA 制作桌面应用程序和 Windows 游戏。如果您最终使用 Kinect 进行开发，我建议您使用带有 C#的[Kinect SDK 。](http://www.microsoft.com/en-us/kinectforwindows/develop/overview.aspx)希望这可以帮助！

# c# - 为什么不更改文件中的几个字节会损坏文件？

> ID：11915113
> 
> 赞同：0
> 
> 时间：2012-08-11T13:29:44.990
> 
> 标签：c#, file, corrupt, corrupt-data

在 C# 中，我有一个 ZIP 文件，我想通过 XORing 或 Nulling 它的字节来破坏它。（通过 Nulling，我的意思是使文件中的所有字节都为零）对其字节进行异或首先需要我将字节读取到字节数组，将数组中的字节与某个值进行异或，然后将字节写回文件。

现在，如果我 XOR/Null 文件的所有（或一半）字节，它会被损坏，但如果只是 XOR/Null 一些字节，比如前几个字节（或文件任何位置的任意几个字节） ) 它不会被损坏，我的意思是我仍然可以访问该文件，就好像什么都没发生一样。

mp3 文件也发生了同样的事情。

为什么文件没有损坏？有没有一种“快速”的方式可以破坏文件？

问题是我正在处理的 zip 文件很大，所以 XORing/Nulling 甚至它的一半字节都需要几秒钟。

非常感谢你提前.. :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T13:37:01.923

只需完全阅读所有文件，您可能会遇到阅读错误。

但是，当然，如果您想保留某些“秘密”，请使用加密。

一个 zip 包含一个小标题、一个目录结构（一个结尾）以及各个文件之间。有关详细信息，请参阅[维基百科](http://en.wikipedia.org/wiki/Zip_%28file_format%29)。

损坏第一个字节肯定会损坏文件，但它也很容易修复。读者将无法在最后找到目录块。

损坏最后一个块具有相同的效果：读者会立即放弃，但可以修复。

更改中间的一个字节将损坏 1 个文件。CRC 将失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T13:43:44.980

这取决于您尝试“损坏”的文件格式。它还取决于您尝试修改文件的哪个部分。最后，这取决于您如何验证它是否已损坏。大多数文件格式都有某种类型的错误检测。

对您不利的另一件事是[zip 文件格式](http://en.wikipedia.org/wiki/Zip_%28file_format%29#Structure)使用[CRC 算法进行损坏](http://en.wikipedia.org/wiki/Zip_%28file_format%29#Design)。此外，目录结构有两个副本，因此您需要破坏两个副本。

我建议你在最后破坏目录[结构](http://en.wikipedia.org/wiki/Zip_%28file_format%29#File_headers)，然后修改前面的一些字节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T14:06:46.697

> 我可以通过通行证锁定拉链条目，但我不希望任何人打开它并查看里面有什么

这听起来好像您正在寻找一种安全删除的方法。如果您只是不想让别人阅读该文件，请将其删除。否则，除非你做一些极端的事情，比如用不同的值遍历它十几次，或者对它应用一些复杂的算法一百次，否则仍然会有读取数据的方法，即使格式是“损坏的”。

另一方面，仅仅为了阻止其他人访问它而破坏文件似乎有点过分了。如果是 zip，您可以将其读入（这里有很多关于处理存档文件的问题），使用密码对其进行加密，然后将其写回。如果它是不同类型的文件，则实际上有上百万种不同的问题和解决方案用于加密、隐藏或以其他方式阻止对数据的访问。破坏文件不是你应该做的事情，除非这是为了帮助测试某种 un-zip-corrputing-program 或类似的东西，但你的评论暗示这是为了防止访问。也许更多关于您为什么要这样做的背景可以帮助我们提供更好的答案？

# google-apps-script - 如何以 Google 方式隐藏库源代码？

> ID：11915118
> 
> 赞同：2
> 
> 时间：2012-08-11T13:30:14.733
> 
> 标签：google-apps-script

例如，我有一个[库](https://developers.google.com/apps-script/guide_libraries)，我想保护源代码不被查看。想到的第一个方法是为私有函数创建公共包装器，如下所示

```
function executeMyCoolFunction(param1, param2, param3) {
  return executeMyCoolFunction_(param1, param2, param3);
} 
```

通过这种方式，只有代码的公共部分是可见的。很好，但所有 Google 服务功能看起来都像`function abs() {/* */}`. 我很好奇，有没有像谷歌那样隐藏库源代码的方法？

**编辑00：**不要通过使用另一个库来“隐藏”库代码，即具有已知项目密钥的LibA 使用具有未知项目密钥的LibB。LibB 的公共函数代码可以获取甚至执行。代码是

```
function exploreLib_(lib, libName) {
  if (libName == null) {
    for (var name in this) {
      if (this[name] == lib) {
        libName = name;
      }
    }
  }
  var res = [];
  for (var entity in lib) {
    var obj = lib[entity];
    var code;
    if (obj["toSource"] != null) {
      code = obj.toSource();
    }
    else if (obj["toString"] != null) {
      code = obj.toString();
    }
    else {
      var nextLibCode = exploreLib_(obj, libName + "." + entity);
      res = res.concat(nextLibCode);
    }
    if (code != null) {
      res.push({ libraryName: libName, functionCode: code });
    }
  }
  return res;
}

function explorerLibPublicFunctionsCode() {
  var lstPublicFunctions = exploreLib_(LibA);
  var password = LibA.LibB.getPassword();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T22:40:48.667

编辑：更改了我的答案以反映异常的堆栈跟踪将包含库项目密钥的事实。

在此示例中，MyLibraryB 是 MyLibraryA 包含的库。两者都公开共享以供查看（访问控制），但只有 MyLibraryA 的项目密钥是已知的。攻击者似乎很难看到 MyLibraryB 中的代码：

```
//this function is in your MyLibraryA, and you share its project key
function executeMyCoolFunction(param1, param2, param3) {
  for (var i = 0; i < 1000000; i++) {
    debugger; //forces a breakpoint that the IDE cannot? step over
  }
  //... your code goes here
  //don't share MyLibraryB project key
  MyLibraryB.doSomething(args...); 
} 
```

但根据@megabyte1024 的评论，如果您要在 MyLibraryB.doSomething() 中引发异常，则堆栈跟踪将包含 MyLibraryB 的项目密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T23:33:34.370

我不知道谷歌做了什么，但你可以做这样的事情（未经测试！只是一个想法）：

函数声明：

```
var myApp = {
  foo: function { /**/ },
  bar: function { /**/ }
}; 
```

然后，在另一个地方，一个匿名函数写入 foo() 和 bar()：

```
(function(a) {
  a['\u0066\u006F\u006F'] = function(){
    // here code for foo
  };
  a['\u0062\u0061\u0072'] = function(){
    // here code for bar
  };
})(myApp); 
```

您可以打包或缩小以进一步混淆。

# google-chrome-extension - 使用 chrome 扩展在页面加载时自动运行脚本

> ID：11915119
> 
> 赞同：2
> 
> 时间：2012-08-11T13:30:31.020
> 
> 标签：google-chrome-extension, google-chrome-devtools

页面加载时如何自动加载脚本？

我有这个扩展源：

```
{ "browser_action" : { "default_icon" : "icon.png"},
  "description" : "Alert on Google Load",
  "icons" : { "128" : "icon.png" },
  "name" : "Auto alert",
  "version" : "1.0",
  "content_scripts": [
    {
      "matches": ["http://www.google*"],
      "js": ["myscript.js"],
      "run_at": ["document_end"]
    }
  ],
} 
```

现在 myscript.js 包括：

```
alert("hi") 
```

但是当我加载 google.com 时，什么也没有发生。

多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T18:28:18.010

您使用的匹配模式 ( `http://www.google*`) 无效。您可以使用通配符 ( `*`) 作为URL 的*方案*、*主机*或*路径*部分。您不能将其用作*域*的一部分。

如果你想匹配所有的谷歌网站，你应该使用这个模式：

```
*://*.google.com/* 
```

您可以在以下文档中了解匹配模式，包括好的和坏的示例：http: [//developer.chrome.com/extensions/match_patterns.html](http://developer.chrome.com/extensions/match_patterns.html)

# php - 根据 GMT 转换日期和时间

> ID：11915132
> 
> 赞同：1
> 
> 时间：2012-08-11T13:32:20.940
> 
> 标签：php, mysql, datetime

我在使用 GMT 时间转换日期和时间方面需要帮助。目前我正在使用`Convertdatetime`时区，但我需要基于从下面的下拉列表中选择的 GMT 转换日期和时间，并且该`now()`函数用于将日期和时间存储到[MySQL](http://en.wikipedia.org/wiki/MySQL)（服务器时间）中？

例如 (2012/08/11 18:45:00) 阿富汗到 2012 年 8 月 11 日星期六下午 5:43

安道尔 2012 年 8 月 11 日星期六下午 3:16

```
<option value="Afghanistan">(GMT+4:30) Afghanistan</option>
<option value="Andorra">(GMT +1:00) Andorra</option>
<option value="United Arab Emirates">(GMT +04:00) United Arab Emirates</option>
<option value="Antigua and Barbuda">(GMT +04:00) Antigua and Barbuda</option>

function Convertdatetime($gmttime,$timezoneRequired)
{
    $system_timezone = date_default_timezone_get();

    $local_timezone = $timezoneRequired;
    date_default_timezone_set($local_timezone);
    $local = date("Y-m-d h:i:s A");

    date_default_timezone_set("GMT");
    $gmt = date("Y-m-d h:i:s A");

    date_default_timezone_set($system_timezone);
    $diff = (strtotime($gmt) - strtotime($local));

    $date = new DateTime($gmttime);
    $date->modify("+$diff seconds");
    $timestamp = $date->format("m-d-Y H:i:s");
    return $timestamp;
}
ConvertLocalTimezoneToGMT('2012-08-11 17:24:00.000','Asia/Calcutta'); 
```

> 输出：11-08-2012 11:54:00 || 格林威治标准时间 = IST-5.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T13:41:53.233

要更改您的时区，您只需使用设置器*[setTimezone](http://php.net/manual/en/datetime.settimezone.php)*：

```
$systemTz = new DateTimezone($system_timezone);
$gmt = new DateTimeZone('GMT');
$serverTz = new dateTimezone($server_timezone);
$dateServer = new DateTime($sqlResult['date_column'],$serverTz);
$gmt = clone $dateServer;
$gmt->setTimezone($gmt);
$dateSyst = clone DateServer;
$dateSyst->setTimezone($systemTz); 
```

然后，您可以根据需要格式化它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T13:40:28.820

以下代码可以为您提供不同时区的秒数差异：

```
$timezone = new DateTimeZone("Asia/Karachi");
$offset = $timezone->getOffset(new DateTime("now")); 
```

替换`Asia/Karachi`为用户选择的任何内容，而不是简单地将这些秒数添加到时间中

> DateTimeZone::getOffset — 返回与 GMT 的时区偏移量

[http://www.php.net/manual/en/class.datetimezone.php](http://www.php.net/manual/en/class.datetimezone.php)

# mysql - MySQL对行的查询，如果行项目在其他行中不存在，则仅返回行

> ID：11915135
> 
> 赞同：0
> 
> 时间：2012-08-11T13:32:35.817
> 
> 标签：mysql, sql

```
 ID      stone_free    original_stone_id
   ------- | ---------- | -------------------
     1     |     0      |         1
     2     |     1      |         2
     3     |     1      |         1 
```

只有当**stone_free 等于 0**并且每行的其他行中**没有相应的 original_stone_id**时，我才想从表中**返回行。**因此，例如在上面的示例中，第 1 行的 stone_free 为 0，第 3 行有相应的 original_stone_id，因此查询不应返回任何行。

 ****在下面的示例中，第 1 行的 stone_free 为 0，但另一行中没有对应的 original_stone_id，因此查询应返回第 1 行。

```
 ID      stone_free    original_stone_id
   ------- | ---------- |  -------------------
     1     |     0      |         1
     2     |     1      |         2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T13:47:46.397

一个简单的`LEFT JOIN`就应该做；

```
SELECT a.* 
FROM Stones a
LEFT JOIN Stones b ON a.ID<>b.ID AND a.original_stone_id = b.original_stone_id
WHERE b.ID IS NULL AND a.stone_free=0 
```

演示[在这里](http://sqlfiddle.com/#!2/45ee6/6)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T13:46:31.047

我不确定它是否可以在 MySQL 上运行，但可以试一试

```
select  * 
from tbl
where   stone_free = 0 and
     ( 
    select count(tab.original_stone_id) 
    from tbl tab 
    where tab.original_stone_id = tbl.original_stone_id
     ) = 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T13:49:28.967

```
Select * from tablename t1
Where stone_free = 0
And Not Exists (Select Id from tablename t2 where t2.original_stone_id = t1.original_stone_id And t2.Id <> t1.Id) 
```****

# hadoop - 本地 HDFS 访问是否应该更快？

> ID：11915136
> 
> 赞同：0
> 
> 时间：2012-08-11T13:32:50.487
> 
> 标签：hadoop, hdfs

我在一些 aws 实例上运行 HDFS (0.20.2)。我强制 HDFS 将文件的所有块写入一个数据节点（通过将复制减少到 1 并仅添加 1 个数据节点）。

在本地访问文件（在存储块的数据节点上）或从集群中的另一台主机访问文件时，我没有看到任何显着的性能差异。本质上，执行 copyToLocal 所花费的时间与我在本地数据节点或任何其他机器上的时间完全相同（通过 JAVA-API 访问也是如此）不应该有区别吗？

该文件的大小为 3.5 GB，块大小为 128MB（如果这很重要）。普通中等实例的实例。

**更新**

谢谢您的建议，但实际问题仅发生在小型或中型实例上，而在大型实例上，我得到了预期的行为（因此本地访问明显更快~20s vs ~40s）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T19:51:51.670

不完全确定我理解这个问题，但您可能对[HDFS-2246](https://issues.apache.org/jira/browse/HDFS-2246)感兴趣，当块位于数据节点本地时，它可以加快读取速度。[1.0.0 发行说明](http://hadoop.apache.org/common/docs/r1.0.0/releasenotes.html)和此[HBaseCon 2012 演示文稿](http://www.slideshare.net/cloudera/1-todd-lipcon-past-present-futurepdf)中也提到了它。

# c# - 从 WEB API 控制器以异步方法返回 Void

> ID：11915138
> 
> 赞同：8
> 
> 时间：2012-08-11T13:33:04.453
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api, async-await, async-ctp

我从这个博客获得的 ASP.NET MVC 4 WEB API 控制器中有这个异步方法：http: [//www.strathweb.com/2012/04/html5-drag-and-drop-asynchronous-multi-file-upload -with-asp-net-webapi/](http://www.strathweb.com/2012/04/html5-drag-and-drop-asynchronous-multi-file-upload-with-asp-net-webapi/)

```
 public async Task<IList<RecivedFile>> Post()
    {
        List<RecivedFile> result = new List<RecivedFile>();
        if (Request.Content.IsMimeMultipartContent())
        {
            try
            {
                MultipartFormDataStreamProvider stream = new MultipartFormDataStreamProvider(HostingEnvironment.MapPath("~/USER-UPLOADS"));

                IEnumerable<HttpContent> bodyparts = await Request.Content.ReadAsMultipartAsync(stream);
                IDictionary<string, string> bodyPartFiles = stream.BodyPartFileNames;
                IList<string> newFiles = new List<string>();

                foreach (var item in bodyPartFiles)
                {
                    var newName = string.Empty;
                    var file = new FileInfo(item.Value);

                    if (item.Key.Contains("\""))
                        newName = Path.Combine(file.Directory.ToString(), item.Key.Substring(1, item.Key.Length - 2));
                    else
                        newName = Path.Combine(file.Directory.ToString(), item.Key);

                    File.Move(file.FullName, newName);
                    newFiles.Add(newName);
                }

                var uploadedFiles = newFiles.Select(i =>
                {
                    var fi = new FileInfo(i);
                    return new RecivedFile(fi.Name, fi.FullName, fi.Length);
                }).ToList();

                result.AddRange(uploadedFiles);
            }
            catch (Exception e)
            {
            }
        }
        return result;
    } 
```

我的问题是为什么这个方法的返回类型是 Task？尚不清楚它返回此任务的“去哪里”或“给谁”？就像没有人等待/接收返回的对象一样。

我想知道如果我像这样返回 void 会有什么影响：

**编辑：**

**我已经尝试了下面的代码，它完全破坏了程序。就像运行时失去对代码的引用一样，代码本身并没有完成运行。**

```
 public async void Post()
    {
        List<RecivedFile> result = new List<RecivedFile>();
        if (Request.Content.IsMimeMultipartContent())
        {
            try
            {
                MultipartFormDataStreamProvider stream = new MultipartFormDataStreamProvider(HostingEnvironment.MapPath("~/USER-UPLOADS"));

                IEnumerable<HttpContent> bodyparts = await Request.Content.ReadAsMultipartAsync(stream);
                IDictionary<string, string> bodyPartFiles = stream.BodyPartFileNames;
                IList<string> newFiles = new List<string>();

                foreach (var item in bodyPartFiles)
                {
                    var newName = string.Empty;
                    var file = new FileInfo(item.Value);

                    if (item.Key.Contains("\""))
                        newName = Path.Combine(file.Directory.ToString(), item.Key.Substring(1, item.Key.Length - 2));
                    else
                        newName = Path.Combine(file.Directory.ToString(), item.Key);

                    File.Move(file.FullName, newName);
                    newFiles.Add(newName);
                }

            }
            catch (Exception e)
            {
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-11T15:24:21.947

ASP.NET 运行时等待它。您可能会发现[此视频](http://channel9.msdn.com/Events/aspConf/aspConf/Async-in-ASP-NET)很有用。

大多数示例`async`都假设一个 UI 上下文。ASP.NET[也提供了一个上下文](http://msdn.microsoft.com/en-us/magazine/gg598924.aspx)，但它是一个“请求”上下文——每个 HTTP 请求都有一个上下文。我的[`async`/`await`帖子](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)概述了这个“上下文”，而[`async`/ `await`FAQ](http://blogs.msdn.com/b/pfxteam/archive/2012/04/12/10293335.aspx)则更详细。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T13:35:20.157

使用返回类型 void，您无需等待对象返回。您等待操作完成。你等待你的**任务**完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T15:33:14.083

如果您返回 void，无论您的异步操作的完成状态如何，您都将立即返回 204“No Content”响应消息。这是在 的帮助下完成的`VoidResultConverter`。

> 注意：在 RC 上，您会看到它返回 200“OK”响应，但使用 RTM，它将返回 204“No Content”响应。

# ios - ASIHTTPRequest 响应数据 null

> ID：11915139
> 
> 赞同：0
> 
> 时间：2012-08-11T13:33:17.220
> 
> 标签：ios, asihttprequest, response, nsdata

我正在使用 ASIHTTPRequest 但我的 responseData 为空。响应应该是 JSON 响应，当我尝试在浏览器中执行此操作时，它可以完美运行。

这是我的代码：

```
- (IBAction)simpleURLFetch {
    NSURL *url = [NSURL URLWithString:@"http://url/url/url"];
    ASIHTTPRequest* request = [ASIHTTPRequest requestWithURL:url];
    request.timeOutSeconds = 30;
    [request setDelegate:self]; // I correctly set the ASIHTTPRequestDelegate in my .h file
    [request startAsynchronous];
}

- (void)requestFinished:(ASIHTTPRequest *)azrequest {
    NSString *responseString = [azrequest responseString];
    NSData *responseData = [azrequest responseData];

    NSLog(@"repo : %@ / %@", responseData, responseString);
} 
```

日志显示：“repo : (null) / <> /”

也许，我没有以好的方式使用结果。有没有解决方案让我的 JSON 响应？

问候，塞巴斯蒂安；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T14:20:13.253

问题在于您没有取回数据，而不是您错误地访问了数据。您的代码中的 URL 显然无效，我怀疑这不是您使用的那个。无论哪种方式，请求都无法获取任何数据，因此没有什么要记录的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-19T07:15:26.180

如果你已经实现了委托方法：-(void)request:(ASIHTTPRequest *)request didReceiveData:(NSData *)data

然后，responseData 将为空。因为 API 会将数据处理交给应用程序。

# c++ - 64位和32位进程互通 boost::message_queue

> ID：11915142
> 
> 赞同：8
> 
> 时间：2012-08-11T13:33:38.837
> 
> 标签：c++, boost, boost-interprocess

各位好日子

我目前正在尝试寻找一种在 64 位进程和 32 位进程之间传递数据的方法。由于它是一个实时应用程序，并且两者都在同一台计算机上运行，​​因此我很难使用共享内存 (shm)。

当我在寻找一些使用 shm 的同步机制时，我感觉到了 boost::message_queue。但是它不起作用。

我的代码基本上如下：

**发件人部分**

```
message_queue::remove("message_queue");
message_queue mq(create_only, "message_queue", 100, sizeof(uint8_t));
for (uint8_t i = 0; i < 100; ++i)
{
    mq.send(&i, sizeof(uint8_t), 0);
} 
```

**接收器部分**

```
message_queue mq(open_only, "message_queue");
for (uint8_t i = 0; i < 100; ++i)
{
    uint8_t v;
    size_t rsize;
    unsigned int rpriority;
    mq.receive(&v, sizeof(v), rsize, rpriority);
    std::cout << "v=" << (int) v << ", esize=" << sizeof(uint8_t) << ", rsize=" << rsize << ", rpriority=" << rpriority << std::endl;
} 
```

如果两个进程是 64 位或 32 位，则此代码可以完美运行。但是如果两个过程不相同，则不起作用。

深入了解 boost (1.50.0) 代码，您将在 message_queue_t::do_receive (boost/interprocess/ipc/message_queue.hpp) 中看到以下行：

 ``scoped_lock lock(p_hdr->m_mutex);`

由于某种原因，在使用异构进程时，互斥锁似乎被锁定。我的疯狂猜测是互斥锁被抵消了，因此它的价值被破坏了，但我不太确定。

我是否正在尝试完成一些根本不受支持的事情？

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T16:10:57.437

我认为这与 message_queue 中使用的 offset_ptr 的可移植性有关，以指向每条消息，包括标头互斥体。自 Boost 1.48.0 起应支持 32 位/64 位互操作性，如[https://svn.boost.org/trac/boost/ticket/5230](https://svn.boost.org/trac/boost/ticket/5230)中所述。

根据票证建议，以下定义（到目前为止）在 message_queue 的 leiu 中对我来说效果很好：

```
typedef message_queue_t< offset_ptr<void, int32_t, uint64_t> > interop_message_queue; 
```

在 MSVC 下的 Boost 1.50.0 上，这似乎还需要在 message_queue.hpp 中添加一个小补丁来解决模板歧义：在调用 ipcdetail::get_rounded_size(...) 时转换参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T06:37:24.147

我花了整个工作日找出解决方案，最后我成功了。解决方案部分是 James 提供的，所以我在 32 位和 64 位进程上都使用了 interop_message_queue。

```
typedef boost::interprocess::message_queue_t< offset_ptr<void, boost::int32_t, boost::uint64_t>> interop_message_queue; 
```

问题是通过此修改代码无法编译，因此我还必须添加以下内容，这是我在 boost 错误报告列表中找到的（[#6147: message_queue sample failed to compile in 32-bit](http://web.archiveorange.com/archive/v/Q0J4VAT419XQ0zkYFcMT)），这段代码有在提升包括 message_queue 之前放置：

```
namespace boost {
  namespace interprocess {
    namespace ipcdetail {
      //Rounds "orig_size" by excess to round_to bytes
      template<class SizeType, class ST2>
      inline SizeType get_rounded_size(SizeType orig_size, ST2 round_to) {
        return ((orig_size-1)/round_to+1)*round_to;
      }
    }
  }
} 
````

# .net - 在 Windsor 中将 Pooled Lifestyle 与 PerWebRequest Lifestyle 集成

> ID：11915145
> 
> 赞同：1
> 
> 时间：2012-08-11T13:33:48.543
> 
> 标签：.net, castle-windsor, pool, perwebrequest

我有使用实体框架作为 ORM 的 ASP.NET MVC 应用程序。现在我将**PerWebRequest**生活方式用于 EF **ObjectContext**。

在分析高负载下的应用程序性能时，我发现了 ObjectContext 创建的瓶颈。

我想将**ObjectContext**的生活方式更改为**Pooled**，但是有一个问题。

在我的应用程序的遗留部分有**服务定位器**反模式。因此，每个 Web 请求都可以多次解析 ObjectContext，并且在使用后不会显式释放。

使用**PerWebRequest**这不是问题，因为**ObjectContext**实例实例化一次并保证在**EndRequest**事件上释放。

对于默认的**Pooled**生活方式，将为每个**Resolve**方法调用返回不同的**ObjectContext实例。**但我想在 Web 请求范围内重新使用单个实例。此外，我希望实例在请求结束时自动释放（返回池）（使用**PerWebRequestLifestyleModule**）。

 ****在我看来，我应该为 Windsor 实现自定义**LifestyleManager**或自定义**IPool**。但是我不知道如何将**Pooled**和**PerWebRequest**生活方式结合起来，因为在 Windsor 中缺乏经验。

你能给我一些想法吗？谢谢。

**UPD：关于 ObjectContext 的状态和重用原因**

有性能原因。ObjectContext 的创建非常昂贵。我正在寻找避免它的方法。我有两种方法来处理 ObjectContext 的有状态性质并重用它：

*   使用无状态上下文（关闭 ChangeTracking）进行查询。对于命令，请使用另一个实例。
*   返回池时重置上下文的状态。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T19:15:03.213

不要重用`ObjectContext`跨请求。您将在请求之间（以及可能在用户之间）泄漏共享状态。该类`ObjectContext`不是为重用而设计的。

在您的问题中，我没有找到不使用的理由`PerWebRequest`，所以就使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T18:39:49.580

在您的情况下，您可以将生活方式更改为与当前线程相关联，确保 Web 应用程序中的每个工作线程都获得一个实例****

# ruby-on-rails - Rails ActiveAdmin 最大列长度

> ID：11915148
> 
> 赞同：1
> 
> 时间：2012-08-11T13:34:10.970
> 
> 标签：ruby-on-rails, ruby, activeadmin

在使用 ActiveAdmin 的 Rails 应用程序中，我的一个字段是在一个非常窄的列中打印大量文本，并导致单个 db 行垂直占据整个屏幕。如果超过，我只希望 ActiveAdmin 显示带有省略号的前 50 个字符。

```
index do
  column :too_long
... 
```

我正在寻找这样的东西

```
index do
  column :too_long, :max => 50
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-22T09:49:47.317

您也可以[`truncate`](http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-truncate)为此使用辅助函数

```
index do
   id_column
   column :too_long do |my_resource|
      truncate(my_resource.too_long, length: 50)
   end
   actions
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-11T14:09:46.687

你可以使用类似的东西

```
 index do
   column "TOO LONG" do |object|
      object.too_long.slice(0, 50)
   end
  #.....
 end 
```

我还没有测试过这个，但是这样的东西应该可以工作。

[在文档http://activeadmin.info/docs/3-index-pages/index-as-table.html](http://activeadmin.info/docs/3-index-pages/index-as-table.html)中查看更多详细信息

# logrotate - logrotate 使用的默认大小是多少？

> ID：11915152
> 
> 赞同：1
> 
> 时间：2012-08-11T13:35:08.523
> 
> 标签：logrotate

我查看了手册页，在这里搜索，谷歌搜索等。

有谁知道 logrotate 使用的默认大小？

您可以引用哪些参考来说明默认大小？

我知道我可以在我的配置文件中专门设置大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-10-28T18:18:26.513

没有默认大小，因为它是可选标志。logrotate 将根据您提供的某些标准进行轮换，例如文件大小或时间段（`daily`,`weekly`等）。所以这并不是说它有一个默认的文件大小（除了类似的东西`size 0`），它只是不是旋转文件的先决条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T04:56:53.597

据我所知，logrotate 没有默认大小，不需要在这上面浪费时间，在配置文件中自己设置值。

# java - 我们需要同步这个类的 add() 方法吗？

> ID：11915153
> 
> 赞同：0
> 
> 时间：2012-08-11T13:35:11.863
> 
> 标签：java

如果这个类用在多线程环境中，说有100个线程同时调用这个方法。

案例1：实例方法

```
public class test {

  public int add(int a , int b ){

    return a+b ;
     }

} 
```

案例2：静态方法

```
public class test {

  public static int add(int a , int b ){

    return a+b ;
     }

} 
```

请回答两种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T13:38:44.617

由于您没有使用任何状态/实例变量，因此您不需要`synchronize`方法或对象。

*一个友好的建议：*使方法静态。Ans 在课堂上调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T13:42:07.707

它不需要任何同步，因为所有变量都是本地的。即，实际上没有变量在任何调用者之间共享。

如果你这样做了，你将需要同步，因为 var c 是共享的。在最终的“返回 c”中检索到 c 之前，另一个线程可能已经修改了它。

```
public class test {

  int c = 0;

  public int addKeep(int a , int b ){
          c = a + b;
          return c;
     }
} 
```

这里的另一个答案是让它成为静态的。好吧，这取决于您需要做什么。如果 add(int a, int b) 是子类可以覆盖的行为，则将其保留为实例方法。如果它本身是 Math.class 的一部分，则将其设为静态，因为它可能永远不需要被覆盖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T13:44:33.147

如果对象是可变的并且您正在执行读取更新操作，那么我们只需要为 getter 和 setter 使用同步块（即变异方法）。

# css - Safari 无法在 CSS 中渲染/处理小数点

> ID：11915160
> 
> 赞同：0
> 
> 时间：2012-08-11T13:36:45.100
> 
> 标签：css, firefox, google-chrome, safari, decimal

我正在做响应式布局设计，我发现 safari 无法渲染小数点值，它会四舍五入并破坏设计布局。

我正在使用 Mac Lion Safari 6.0

这是一个示例，尝试在 safari、firefox、google chrome 中启动

看右边框 [http://dabblet.com/gist/3324471](http://dabblet.com/gist/3324471)

我正在使用 twitter 引导网格系统。它在 google chrome 和 firefox 上完美呈现，但不是 safari。

有什么办法可以解决safari的小数点渲染问题？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T14:07:31.877

如果您还没有这样做，您可以随时尝试使用百分比。另外，我正在查看 Mountain Lion 下 Safari 6.0 中的页面，它看起来很棒，没有任何异常的边距。

# cakephp - CakePHP 2 认证组件

> ID：11915163
> 
> 赞同：0
> 
> 时间：2012-08-11T13:37:10.803
> 
> 标签：cakephp, cakephp-2.x

我无法使用 AuthComponent 登录任何用户。user表的名字是users，有一些重要的字段如user_id，user_password，password字段没有散列。

这是我的 AppController

```
class AppController extends Controller {
  public $components = array(
    'Session',
    'Auth' => array(
      'loginRedirect' => array('controller' => 'users', 'action' => 'index'),
      'logoutRedirect' => array('controller' => 'users', 'action' => 'home'),
      'authError' => 'You cannot view this page',
      'authorize' => array('controller')
    )
  );

  public function isAuthorize($user) {
    return true;
  }

  public function beforeFilter() {
    $this->Auth->allow('home');
  }
} 
```

这是我的用户控制器

```
class UsersController extends AppController {
  public function login() {
    if ($this->request->is('post')) {
      if ($this->Auth->login()) {
        $this->redirect($this->Auth->redirect());
      } else {
        $this->Session->setFlash('Cannot login in');  
      }
    }
  }
} 
```

这是我的用户模型。

```
class User extends AppModel {
  public $name = 'User';
  public $primaryKey = 'user_id';
  public $belongsTo = 'Group'; 
} 
```

这是我的观点

```
<h2>Login</h2>

<?php

echo $this->Form->create();
echo $this->Form->input('user_id', array('label' => 'User ID', 'type' => 'text'));
echo $this->Form->input('user_password', array('label' => 'Password', 'type' => 'password'));
echo $this->Form->end('Login');

?> 
```

当我输入更正的 user_id 和密码，然后按下登录按钮时，我从 UsersController 收到了我无法登录的消息。这里出了什么问题？？？

另外，我真的不明白 AuthComponent:login() 的概念，它是如何在数据库中检查 user_id 和密码的，它是如何知道哪个字段包含 user_id，哪个字段包含密码？？？

请帮忙。谢谢。孔塔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T00:00:51.270

我注意到的几件事：

```
public function isAuthorize($user) { 
```

这种方法最后缺少一个“d”。它应该是

```
public function isAuthorized($user) { 
```

接下来，默认情况下，Cake 希望通过名为“用户名”和“密码”的字段来识别用户。所以，如果你想改变它，你需要这样做：

```
class AppController extends Controller {
  public $components = array(
    'Session',
    'Auth' => array(
      'loginRedirect' => array('controller' => 'users', 'action' => 'index'),
      'logoutRedirect' => array('controller' => 'users', 'action' => 'home'),
      'authError' => 'You cannot view this page',
      'authorize' => array('controller'),
      'authenticate' => array(
          'Form' => array( // THIS IS WHERE YOU CHANGE THE DEFAULT FIELDS
             'fields' => array('username' => 'user_id','password' => 'user_password')
          )
       )
    )
  ); 
```

该代码未经测试，但应该让您走上正轨。但正如戴夫所说，阅读完整的文档以了解它是如何工作的真的值得阅读：http: [//book.cakephp.org/2.0/en/core-libraries/components/authentication.html](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html)

最后，我不确定“user_id”是否是列名的好选择。您希望“user_id”的列名是某个表中的外键，指向“users”表的“id”列。如果这不是它所提供的功能，您可能应该使用不同的名称。

# database - MSAccess 2007 更改表单中的连接属性

> ID：11915164
> 
> 赞同：0
> 
> 时间：2012-08-11T13:37:11.063
> 
> 标签：database, ms-access, ms-access-2007

我需要一些帮助来在 MS Access 前端中创建一个表单，以便为访问后端选择一个数据库/数据库服务器。

先说一点历史；

我创建了一个 MSAccess 2007 acccdp 数据库，它被设计为在本地运行的单个用户。（对于一个资金很少或没有资金的大学研究项目）。

最终需要扩展数据库以供同一办公室的几个人同时使用，所以我做了什么；

在桌面上安装 SQLExpress 2008r2。使用数据库工具 > 移动数据 > Sql Sever 将表迁移到新的 SQL 服务器。

现在我想为开发/培训等创建第二个测试数据库......另外，我需要调整不同数据库服务器的属性（在家）。

所以我想我需要一个自动执行的表单（而不是交换机），它允许您选择数据库服务器和数据库来加入链接表，然后如果成功连接以打开交换机。

我可以创建表单，但我需要 vba 的帮助来调整数据库连接属性。

我只是想帮助这个项目，无论如何我都不是程序员。

提前致谢

罗杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:11:31.967

如果您在两个连接之间进行选择，您可以检查现有连接是否正常工作，如果没有，请切换到第二个。但是，按钮可能仍然是最好的选择。这个片段对我有用，但是它将连接超时设置为仅一秒，因此如果您只等待了一点时间，服务器可能是可用的，即使超时，对于不耐烦的人来说也有足够的延迟开始点击。

```
Function IsSQLServer() As String
''Reference Microsoft ActiveX Data Objects x.x Library
Dim cn As New adodb.Connection

    ''http://msdn.microsoft.com/en-us/library/windows/desktop/ms676718(v=vs.85).aspx
    ''Provider=sqloledb
    cn.ConnectionString = ServerCon & "Connect Timeout=1;"

    On Error Resume Next
    cn.Open

    If Err.Number <> 0 Then
        IsSQLServer = "No;" & Err.Description
        Err.Clear
    Else
        If cn.State = adStateOpen Then
            IsSQLServer = "Yes"
        Else
            IsSQLServer = "Maybe"
        End If
        cn.Close
    End If

    Set cn = Nothing

End Function 
```

# json - 使用 Google Chart API 的空白图表

> ID：11915168
> 
> 赞同：0
> 
> 时间：2012-08-11T13:38:06.623
> 
> 标签：json, charts, google-visualization

我目前正在使用以下 JSON 使用 Google Chart API 生成图表：

```
{
"cols":[
    {
        "id":"DateOfBirth",
        "label":"Date of Birth",
        "type":"string"
    },
    {
        "id":"Number",
        "label":"Number",
        "type":"number"
    },
    {
        "id":"Gender",
        "label":"Gender",
        "type":"string"
    }
],
"rows":[
    {
        "c":[
            {
            "v":"F"
            },
            {
            "v":"2012-08-07"
            },
            {
            "v":"1"
            }
        ]
    },
    {
        "c":[
            {
            "v":"M"
            },
            {
            "v":"1988-07-28"
            },
            {
            "v":"1"
            }
        ]
    },
    {
        "c":[
            {
            "v":"F"
            },
            {
            "v":"1990-05-05"
            },
            {
            "v":"1"
            }
        ]
    }
]
} 
```

但是，图表没有显示（它只显示为带有标题的白色画布）。我无法弄清楚我的 JSON 有什么问题。我还包含了用于呈现图表的代码：

```
// where json is the string literal
function drawChart(json) {
    // Create the data table.
    var data = new google.visualization.DataTable(json);

    // Set chart options
    var options = {'title':'Students',
        'width':400,
        'height':300,
        'view': {'columns': [0,2]}};

    // Instantiate and draw our chart, passing in some options.
    var chart = new google.visualization.PieChart($('#chart_div')[0]);
    chart.draw(data, options);
} 
```

...我用 AJAX 调用将所有内容拼凑在一起。

```
$(function() {
    $.ajax({
        type: "GET",
        url: localUrl,
        success: function(data)
        {
            drawChart(data);
        }
    });
});

google.load('visualization', '1.0', {'packages':['corechart']}); 
```

我不太确定我哪里出错了。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T00:02:10.800

“数字”列的值不应是字符串：

```
'{"cols":[{"id":"Gender","label":"Gender","type":"string"},{"id":"DateOfBirth","label":"Date of Birth","type":"string"},{"id":"Number","label":"Number","type":"number"}],"rows":[{"c":[{"v":"F"},{"v":"1988-08-10"},{"v":1}]},{"c":[{"v":"M"},{"v":"1988-07-28"},{"v":1}]},{"c":[{"v":"F"},{"v":"1988-08-10"},{"v":1}]}]}' 
```

您可以在 Google Playground 中为[Table](https://code.google.com/apis/ajax/playground/?type=visualization#table)尝试此操作。如果你想要一个[PieChart](https://code.google.com/apis/ajax/playground/?type=visualization#pie_chart)，3 列是行不通的；删除“DateOfBirth”列正在工作：

```
'{"cols":[{"id":"Gender","label":"Gender","type":"string"},{"id":"Number","label":"Number","type":"number"}],"rows":[{"c":[{"v":"F"},{"v":1}]},{"c":[{"v":"M"},{"v":1}]},{"c":[{"v":"F"},{"v":1}]}]}' 
```

# asp.net - 在没有通知和轮询的情况下进行缓存，是否有另一种解决方法

> ID：11915170
> 
> 赞同：3
> 
> 时间：2012-08-11T13:38:15.413
> 
> 标签：asp.net, sql, sql-server, tsql, caching

我知道查询通知，但由于缺乏对聚合函数的支持，它们非常有限。因此，如果我忘记了 SqlDependancy，我还有哪些其他选项可用于 ASP.NET 网站中的 OUTPUT 缓存？有没有办法从 SQL Server 内部调用外部代码？（2005 及更高版本）。就像从触发器调用网络服务一样？

重要的是要说我的数据没有定期更改，这使得轮询技术“不适合工作”。这样做的原因是因为我有一个购物网站，它需要数据是新鲜的，所以任何时候做出改变都必须立即显示给用户。这就是为什么我正在寻找一种类似的技术来查询通知，但没有它的限制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T14:07:35.340

您可以从触发器插入服务代理消息。您的应用程序可以侦听该特定消息队列。这允许您构建任意通知逻辑，包括聚合。

`SqlDependency`在内部使用服务代理，但灵活性较低。

# javascript - 如何获得我的 Google 地图对象的交通控制？

> ID：11915171
> 
> 赞同：1
> 
> 时间：2012-08-11T13:38:21.207
> 
> 标签：javascript, google-maps, google-maps-api-3

我已将我的 Google Map 对象设置为 ROADMAP，但没有像常规 Google Maps 那样的交通选项。下面是我想要得到的控制。这可以通过 API 中的地图选项实现吗？我尝试查看文档，但没有任何内容（除非我遗漏了什么）。

![在此处输入图像描述](../Images/6a3dca5ce086b4b0b9a00300ee873bad.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T06:10:45.963

您可以从文档中创建一个自定义控件，如[**本示例所示。**](https://google-developers.appspot.com/maps/documentation/javascript/examples/control-custom)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T14:01:54.363

这是一个显示在地图上嵌入交通控制的示例。 [http://pietervogelaar.nl/google-maps-api-v3-traffic-toggle-button/](http://pietervogelaar.nl/google-maps-api-v3-traffic-toggle-button/)

# c# - 从 C# 执行批处理文件

> ID：11915173
> 
> 赞同：0
> 
> 时间：2012-08-11T13:38:35.927
> 
> 标签：c#, command-prompt, batch-file

我有一个小问题。好的，让我们从我的 C# 控制台应用程序中说，我想运行一个带有参数的批处理文件。我的 C# 应用程序停止时的字符串变量将是传递给批处理文件的字符串参数。我该怎么做呢？

到目前为止，这是我的 C# 控制台程序的代码：

```
//String argument to pass to the batch file
string message = "Hello World";

System.Diagnostics.Process process = new System.Diagnostics.Process();

//startInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
startInfo.FileName = "Greetings.bat";
startInfo.Arguments = "/C " + message;
process.StartInfo = startInfo;
process.Start(); 
```

我的批处理文件

```
CLS
@ECHO OFF
ECHO %1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T13:50:10.247

你可以给出这样的论点。

```
ProcessStartInfo psi = new ProcessStartInfo(filePath);
psi.WindowStyle = ProcessWindowStyle.Hidden; 
psi.Arguments = "value1"; 
```

# qml - 如何访问 ListDelegates / ListView 之外的项目？

> ID：11915174
> 
> 赞同：4
> 
> 时间：2012-08-11T13:38:38.030
> 
> 标签：qml

我是 Qt / QML 编码的新手，我在访问列表视图中的列表委托中的元素时遇到了一个问题。

例如，如果我的 Qml 看起来像这样

```
Item
{
 id: item_id
 property int focus_id: 0

 function setFocusImageSource() {}

 ListView
 {
  id: listView_Id
  delegate: listViewdelegate
  model: listModeldata
 }

 Component
 {
  id: listViewdelegate
  Rectangle
  {
   id: rectangle_id
   Image
   {
    id: focus_Image
    source: x.x
   }
  }
 }

 ListModel
 {
   id: listModeldata
   /*elements*/
 } 
} 
```

现在列表视图的基本功能在我的代码（不是上面的代码）中运行良好，但是当我执行特定操作时，我需要更改聚焦图像。我想使用函数 "setFocusImageSource()" 来改变它。我尝试使用 focus_Image.source = "xx" 直接设置图像源。

是否像 Rectangle 组件内的 Image 是委托本地的，不能从 ITEM 标记访问。如果是这样我如何从上面提到的功能中设置图像。

提前致谢。

钱德M

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T18:36:08.583

C++ 中 QML 组件的对应物是一个类。如您所知，您只能在类的实例（对象）中更改成员的值。组件也是如此：您不能更改组件中的任何内容 - 只能在其实例中更改。有两种方法可以解决您的问题：

1.  将 listViewdelegate 的属性绑定到它之外的某个属性：item_id 或 listView_Id 的属性或其他东西。
2.  将 listViewdelegate 的属性绑定到 listModeldata 元素的某个属性。

例子：

```
Image {
    id: focus_Image
    source: x.x // defualt value
    Connections {
        target: item_id
        onFocus_idChanged: {
            if ( /* some logic if needed */ ) {
                focus_Image.source = xx;
            }
        }
    }
} 
```

或者

```
Image {
    id: focus_Image
    source: {
        // inidicator is a property of the element of listModeldata
        if (indicator) { 
            return xx;
        }
    }
} 
```

# spring - PersistenceAnnotationBeanPostProcessor vs JpaVendorAdapter

> ID：11915175
> 
> 赞同：1
> 
> 时间：2012-08-11T13:38:39.243
> 
> 标签：spring, hibernate, persistence

我正在设置一个 maven-spring-hibernate-mysql-tomcat 环境。

我想使用 @PersistenceContext 注释注入我的实体管理器。据我所知，我应该在我的应用程序上下文中定义 PersistenceAnnotationBeanPostProcessor，指向我的 persistence.xml 文件。

在这种情况下，我的应用程序上下文可能或多或少是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:aop="http://www.springframework.org/schema/aop" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jee="http://www.springframework.org/schema/jee" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:task="http://www.springframework.org/schema/task" xmlns:ox="http://www.springframework.org/schema/oxm"
    xsi:schemaLocation="
   http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
   http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
   http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
   http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.1.xsd
   http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
   http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.1.xsd
   http://www.springframework.org/schema/oxm http://www.springframework.org/schema/oxm/spring-oxm-3.1.xsd
   http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-3.1.xsd">

    <!-- Root Context: defines shared resources visible to all other web components -->

    <!-- Context -->
    <context:component-scan base-package="com.yl.mypack" />

    <!-- AOP -->
    <aop:aspectj-autoproxy />

    <!-- Properties -->

    <context:property-placeholder
        location="classpath:db.connection.properties,applicationProperties.properties" />

    <!-- DB Connection Pool -->
    <bean id="dataSourceGlobal" class="com.mchange.v2.c3p0.ComboPooledDataSource"
        destroy-method="close">

        <!-- Data Source -->
        <property name="driverClass" value="${driverClass}" />
        <property name="jdbcUrl" value="${jdbcUrl}" />
        <property name="user" value="${user}" />
        <property name="password" value="${password}" />

        <!-- C3P0 Connection pool properties -->
        <property name="minPoolSize" value="${c3p0.min_pool_size}" />
        <property name="maxPoolSize" value="${c3p0.max_pool_size}" />
        <property name="unreturnedConnectionTimeout" value="${c3p0.timeout}" />
        <property name="idleConnectionTestPeriod" value="${c3p0.idle_test_period}" />
        <property name="maxStatements" value="${c3p0.max_statements}" />
        <property name="automaticTestTable" value="${c3p0.automatic_test_table}" />
    </bean>

    <!-- JPA -->
    <!-- Creates a EntityManagerFactory for use with the Hibernate JPA provider -->
    <bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
            <property name="persistenceXmlLocation" value="classpath:META-INF/persistence.xml"/>
            <property name="persistenceUnitName" value="myPU" />
            <property name="dataSource" ref="dataSourceGlobal" />
    </bean>

    <!-- In order to enable EntityManager injection -->
    <bean id="persistenceAnnotation"
        class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor">
        <property name="persistenceUnits">
            <map>
                <entry key="myPU" value="classpath:META-INF/persistence.xml" />
            </map>
        </property>
    </bean>

    <!-- Transactions -->
    <tx:annotation-driven />

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
        <property name="dataSource" ref="dataSourceGlobal" />
    </bean>

</beans> 
```

我的 persistence.xml 可能如下所示：

```
<persistence-unit name="myPU" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <properties>
        <property name="hibernate.transaction.flush_before_completion"
            value="true" />
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLInnoDBDialect" />
        <property name="hibernate.show_sql" value="true" />
    </properties>
</persistence-unit> 
```

所以现在我想我应该能够使用 @PersistenceContext 注释注入我的实体管理器，在列表中这是我从[文档](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/orm/jpa/support/PersistenceAnnotationBeanPostProcessor.html)中得到的。在我进入 JpaVendorAdapter 之前，我的第一个问题是实体管理器工厂定义：以下属性：

```
 <property name="persistenceXmlLocation" value="classpath:META-INF/persistence.xml"/>
        <property name="persistenceUnitName" value="myPU" /> 
```

这些是否需要从实体管理器工厂转介？这是必须的吗？

我的第二个问题是关于 JpaVendorAdapter，在我的例子中是[HibernateJpaVendorAdapter](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/orm/jpa/vendor/HibernateJpaVendorAdapter.html)。

如果我使用 HibernateJpaVendorAdapter，我还需要一个 persistence.xml 文件吗？由于某些属性是重叠的。此外，我还需要定义 PersistenceAnnotationBeanPostProcessor，指向我的 persistence.xml 文件吗？这两个可以一起使用吗（PersistenceAnnotationBeanPostProcessor 和 HibernateJpaVendorAdapter）？他们应该一起去吗？假设我**避免**使用任何 JDNI 样式定义，最佳实践是什么？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T04:43:18.347

数据源 bean 和 HibernateJpaVendorAdapter 的结合使您可以在 Spring 3.1 中摆脱 persistence.xml。看看这篇文章：

[http://www.baeldung.com/2011/12/13/the-persistence-layer-with-spring-3-1-and-jpa/](http://www.baeldung.com/2011/12/13/the-persistence-layer-with-spring-3-1-and-jpa/)

所以答案：

1.  它们不是必须的。
2.  不，您不需要有 persistence.xml。
3.  我不确定 PersistenceAnnotationBeanPostProcessor 的用途是什么。

    ```
    <context:component-scan base-package="com.demo.dao" />
    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalEntityManagerFactoryBean">
        <property name="persistenceUnitName" value="hibernate-resourceLocal"/>
    </bean>

    <tx:annotation-driven/>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean> 
    ```

我的 Spring 应用程序上下文 xml 看起来就这么简单。它正在工作。

我不知道最佳实践是什么，但我会保留 persistence.xml，以便在需要将我的服务公开为会话 bean 时，可以轻松完成。

# c# - c# RichTextBox - 使用隐藏的 ScrollBar 滚动

> ID：11915177
> 
> 赞同：1
> 
> 时间：2012-08-11T13:39:10.460
> 
> 标签：c#, scrollbar, richtextbox

我有隐藏两个滚动条的 RichTextBox 控件。当它们被隐藏时，我不能用鼠标滚动文本，我只能使用 PgUp 和 PgDown 键来移动文本。

但是当滚动条被禁用时我想用鼠标滚动，有什么办法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T14:12:03.700

```
public Form1()
{
    InitializeComponent();
    richTextBox1.MouseWheel += new MouseEventHandler(richTextBox_MouseWheel);

}

private void Form1_Load(object sender, EventArgs e)
{

}
void richTextBox_MouseWheel(object sender, MouseEventArgs e)
{
         MessageBox.Show(e.Delta.ToString());
         // use this value to scroll

        } 
```

# php - 根据喜欢 Facebook 的数量查找照片或评论

> ID：11915180
> 
> 赞同：-1
> 
> 时间：2012-08-11T13:39:41.737
> 
> 标签：php, .net, api, facebook-like

我需要使用 facebook api 找到任何评论、照片或具有一定数量的喜欢的页面。

我正在用 php 和 .net 编程，有没有人知道或做过类似的事情？

编辑

我正在考虑使用 FQL，比如

```
SELECT photos,comments,pages From photos where likes >=10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T19:06:17.277

这是可能的，但是您将不得不限制您认识的人获得的照片。

页面是最简单的。这将为您和您的朋友提供至少 100 位粉丝喜欢的所有页面：

```
 SELECT name, username, page_id, fan_count FROM page WHERE page_id IN 
   (SELECT page_id FROM page_fan WHERE uid IN
      (SELECT uid1 FROM friend WHERE uid2 = me()) 
      OR uid = me()
    )
  AND fan_count>100 ORDER BY fan_count DESC 
```

照片更具挑战性，因为照片不能直接被用户索引。这将为您提供用户的所有照片以及该用户已被标记的照片：

```
SELECT src, caption, like_info FROM photo WHERE (
  object_id IN (SELECT object_id FROM photo_tag WHERE subject = me()) 
  OR 
  album_object_id IN (SELECT object_id FROM album WHERE owner = me())
) 
```

喜欢的数量是被`like_info`调用的成员`like_count`。我现在不知道如何对此进行排序或过滤。

# javascript - javascript字符串替换函数忽略连字符

> ID：11915183
> 
> 赞同：0
> 
> 时间：2012-08-11T13:40:00.980
> 
> 标签：javascript, string, replace, hyphen

我有以下代码：

```
ttt = 'hello---,,..there';
tt2 = strip(ttt);
alert(tt2);

function strip(str){
  return str.replace(/[^a-zA-Z0-9 ,.-_]/g, '');
} 
```

警报给出`hello,,..there`

我希望它给出`hello---,,..there`所有字符，包括连字符，在替换函数中被指定为例外。

我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T13:41:40.270

转义连字符：

```
'hello---,,..there'.replace(/[^a-zA-Z0-9 ,.\-_]/g, ''); // => "hello---,,..there" 
```

# php - 如果查询 - 仍然执行？

> ID：11915191
> 
> 赞同：2
> 
> 时间：2012-08-11T13:41:23.957
> 
> 标签：php, mysql, if-statement, execute

我是 PHP 新手，即使查询位于 if 语句中，也无法执行查询。

例子/

```
$sql = "INSERT INTO db_name (table1, table2)<br>
VALUES ('value1', 'value2')";

if (!mysql_query($sql) {
    die(mysql_error());
}
Echo 'Created'; 
```

在那里，if 语句可以很好地执行查询，但是如何执行呢？这是一个if语句。它应该只检查值，而不是执行条件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T13:46:18.573

这段代码本质上可以理解为：

1.  使用 $sql 作为参数执行 mysql_query()
2.  得到它的返回值
3.  `true`对照/检查返回值`false`
4.  如果`false`- 死
5.  如果`true`-打印`Created`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-11T13:46:07.957

如果我正确解释了您的问题，代码将执行查询并检查返回值，然后在 if 语句中对其进行评估。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T01:58:41.483

if 语句是关于评估表达式的，因此如果您有一个返回某些内容的函数，您可以执行这种 if 语句。

在这种情况下`mysql_query()`，是一个返回布尔值 true 或 false 的函数，指示查询是否执行正常。

这里的 if 语句正在评估`!mysql_query($sql)`，如果失败，则评估为 true，如果成功，则评估为 false。因此，如果失败则显示错误。

# c++ - 在Qt中打开新文件时如何使应用程序不运行新实例？

> ID：11915192
> 
> 赞同：1
> 
> 时间：2012-08-11T13:41:25.587
> 
> 标签：c++, qt

例如，我们有一个 TextEditor 应用程序。像记事本++。我们有显示文件内容的选项卡。
OS 中的默认文本编辑器设置为 TextEditor Application。当我们打开一个新文件时，应用程序添加了一个选项卡并将内容放入其中。
在 Qt 中打开新文件时如何使应用程序不运行新实例？
你认为最好的方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:59:55.830

问题是如何制作单实例应用程序。当您打开文件时，操作系统将打开关联的应用程序并将文件作为命令行参数提供给它。您不能简单地通过操作系统机制将“打开文件”命令委托给正在运行的应用程序，您必须自己实现它。

在 AppWhirr 项目中，我们使用 QLocalServer/Client 在实例之间进行通信：当 AppWhirr 应用程序执行时，它会检查是否已使用具有修复 ID 的 QLocalServer。如果不是，则此应用程序实例是第一个/唯一运行的实例。如果 ID 已被占用，则意味着应用程序的另一个实例已经在运行，因此第二个实例只会做两件事：通过 Qt 的本地客户端/服务器通信将给定的输入参数发送到另一个实例，以及当它成功完成通信时它将退出（第二个实例）。

这是该问题的一种解决方案，需要大量编码，如果您不想将本地客户端/服务器通信用于其他任何事情，我不会推荐它，但它是一个可行的解决方案。

另一种解决方案是应用程序的第一个实例在固定位置创建一个文本文件并写入我们实例的 ID。在此之后，第二个实例可以读取文本文件并向指定的 ID 发送消息。当然，第一个实例必须在退出时删除文本文件，并且可能您必须实施一些故障安全代码来删除文本文件，以防第一个实例崩溃。此解决方案将使用比第一个解决方案更少的资源，但需要故障安全清理代码。

或者作为第三种选择，您可以使用@Matteo Italia 建议的第三方解决方案。

# drupal-7 - 在用户个人资料上显示内容，其中个人资料和内容都包含相同的词汇

> ID：11915196
> 
> 赞同：1
> 
> 时间：2012-08-11T13:41:38.767
> 
> 标签：drupal-7, views, taxonomy

我有词汇表（“国家”）和内容类型，其中一个字段（称为“新闻”）链接到这个词汇表，该词汇表显示为术语列表。我还创建了具有相同分类字段的用户配置文件。然后我创建了国家值设置为“波兰”的新闻，我只想向在个人资料中选择“波兰”的用户显示具有此值的新闻。

我使用 Profile2 创建用户的个人资料。

我的问题是：我应该如何配置视图来显示新闻？

# javascript - Javascript：将文本作为文件提供

> ID：11915199
> 
> 赞同：0
> 
> 时间：2012-08-11T13:41:48.077
> 
> 标签：javascript

> **可能重复：**
> [用文件名保存文件 Javascript](https://stackoverflow.com/questions/7717851/save-file-javascript-with-file-name)

在 javascript 中，我在一个变量中有一些数据，我想将这些数据作为文件提供给用户。我怎么能这样做呢？

**使用文件名[保存文件 Javascript 的](https://stackoverflow.com/questions/7717851/save-file-javascript-with-file-name)**副本**，抱歉。**

# javascript - “类”中的嵌套函数

> ID：11915201
> 
> 赞同：0
> 
> 时间：2012-08-11T13:41:58.543
> 
> 标签：javascript, oop

```
function Fruits() {

    this.Banana = function() {

        this.getColor = function(){
            return 'yellow';
        };

    };

    this.Apple= function() {

        this.getColor = function(){
            return 'red';
        };

    };
}

var apple = new Fruits.Apple();
console.log(apple.getColor()); 
```

这不起作用。我在这里错过了什么？这是对具有嵌套方法的“类”的错误方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T13:46:52.960

尝试使用：

```
var apple = new Fruits();
apple.Apple();
console.log(apple.getColor()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T13:47:50.343

您需要先实例化 Fruits。从我的控制台...

```
var f = new Fruits()
undefined
new f.Apple()
Fruits.Apple
new f.Apple().getColor()
"red" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T13:48:16.787

这是静态属性和实例属性之间的区别。当您将 Apple 声明为 Fruits 的实例属性时，您必须实例化一个 Fruit 才能实例化一个苹果，Apple 的 cronstructor 将是 Fruit 的一个方法。如果你想要静态类，你必须这样做

```
function Fruits() { 
```

}; Fruits.Apple=函数（）{

```
 this.getColor = function(){
        return 'red';
    };

}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-11T13:50:27.143

一些好奇：

```
var a = new new Fruits().Apple 
```

顺便提一句。也许您想创建一个类似静态类的东西？

```
var Fruits = {
    Apple:function() {

        this.getColor = function(){
            return 'red';
        };

    },
    Banana: function() {

        this.getColor = function(){
            return 'yellow';
        };
    }
} 
```

然后它会工作。

```
var apple = new Fruits.Apple();
console.log(apple.getColor()); 
```

# image - XHTML1.0 中 src 路径错误时折叠 img 标签

> ID：11915202
> 
> 赞同：0
> 
> 时间：2012-08-11T13:42:01.437
> 
> 标签：image, src, xhtml-1.0-strict, onerror

我有一个`img`标签。当`src`路径错误时，我需要折叠`img`标签。我可以通过使用来实现这一点

> 错误

在 HTML4 中。但是，XHTML1.0 不允许*onerror*属性。

我怎样才能在 XHTML1.0 中实现这一点？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:56:52.670

@Manikandan，我不知道你想如何折叠 img 标签。但是如果使用 Javascript 找不到原始图片，我使用以下技术将 onerror 与有效的 xHTML 验证一起使用以显示默认图片。看看能不能帮到你。

```
<img src="sample.gif" alt="Test" id="testimg" />
<script type="text/javascript">

<!--CDATA
document.getElementById("testimg").onerror = function () { this.src='noimage.gif'; };
-->
</script> 
```

# python - Rpy2 和 --max-ppsize

> ID：11915206
> 
> 赞同：1
> 
> 时间：2012-08-11T13:42:51.920
> 
> 标签：python, r, rpy2

我正在通过 Rpy2 在 R 中运行一些递归代码（不幸的是，必须这样）。我不得不增加选项（表达式），但还没有找到增加指针保护堆栈的方法。我查看了 rpy2 代码，但找不到一个明显的位置来设置这个标志。甚至可能吗？

我得到的错误是：

```
protect(): protection stack overflow. 
```

我看过[https://stat.ethz.ch/pipermail/r-help/2006-August/111127.html](https://stat.ethz.ch/pipermail/r-help/2006-August/111127.html)

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T15:31:59.417

发现它隐藏在源代码的第一个文件中，但必须作为初始导入完成

```
import rpy2.rinterface as rinterface 
rinterface.set_initoptions((...)) 
```

# php - 文本框输入的自动完成

> ID：11915208
> 
> 赞同：0
> 
> 时间：2012-08-11T13:43:05.500
> 
> 标签：php, jquery, mysql, autocomplete, textbox

我正在构建一个服务网站，其中一部分要求用户输入城市中的街道名称，并且我计划在输入字段中添加自动完成功能。

我的街道名称记录大约有2000条，所以我的问题是，我应该使用哪种方式？

对于 jQuery 或 AJAX + PHP，我担心的是，如果街道名称的数量太大，可能会影响网站的加载速度性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T13:47:00.837

你可以试试**[Ajax AutoComplete for jQuery](http://www.devbridge.com/projects/autocomplete/jquery/)**

jQuery 的 Ajax 自动完成功能允许您轻松地为文本输入字段创建自动完成/自动提示框。它可以免费下载。您可以尝试在主页本身中进行演示自动填充国家名称。

希望这可以帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T13:48:07.347

我会建议[select2](http://ivaynberg.github.com/select2/)。易于使用且用户友好（搜索、多选等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T13:46:38.217

它通常使用 jquery 或其他 ajax '框架'（例如 mootools）和 php/您决定用来提供 ajax 请求的任何服务器端语言（例如 asp、jsp 等）来完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T13:49:18.180

长街道名称不应该降低性能，只会降低数据库本身的大小。但是2000个条目应该真的是可行的。

我建议 jQuery 客户端中的 ajax 在服务器端调用 php 脚本。ajax 将给 php 用户输入的字符串（例如，在每次按键时），然后 php 将在数据库中查找类似的街道名称（`LIKE`在查询中使用）并返回，例如，包含所有街道名称的 json 对象找到了。

# xcode - 如何解决这个泄漏_NSCFstring UIKIT

> ID：11915209
> 
> 赞同：1
> 
> 时间：2012-08-11T13:43:32.027
> 
> 标签：xcode, memory, memory-leaks

您好，我是 xcode 的新手，我的应用程序中出现内存泄漏，如下所示

```
Object :_NSCFString
Bytes: 48Bytes
Library: UIkit
Frame: [UIStatusBarTimeItemView UpdateForNewData 
```

而且我无法弄清楚原因，我在我的项目中使用了（加载不同jquery移动页面的uiwebview）请帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T18:45:11.283

您可以在 Instruments.app 中运行 Leaks 仪器（在 Xcode 中点击“Profile”而不是“Run”）。它将记录分配的来源，包括回溯，甚至引用计数操作（作为默认关闭的选项）。

在录制时练习您感兴趣的程序区域。

然后您检查它发现的泄漏，并删除所有泄漏，除非不可能并且您使用的另一个库存在错误。

# object - 线与物体的碰撞（Corona SDK）

> ID：11915215
> 
> 赞同：0
> 
> 时间：2012-08-11T13:44:10.790
> 
> 标签：object, line, coronasdk, collision

当有线条和物理对象时，我正在开发游戏

行代码是：

有趣的是，当我编写打印代码时（“碰撞在这里”）（例如），它们甚至不会发生碰撞！

line 和 obj 主体都是静态的

怎样才能让这种碰撞发生？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T01:15:16.037

静态物体不能相互碰撞，但是[这个](https://stackoverflow.com/q/7697555/1369488)问题有一个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T11:23:06.353

如果两条线都是静态的，则创建一个函数，您可以在其中检测两个对象的 x 和 y 并相应地生成方程式，例如：line.x + 20 > obj.x 然后打印（碰撞）。

# android - Android：上下文菜单中的 ContextMenu 和 ItemSelected

> ID：11915217
> 
> 赞同：0
> 
> 时间：2012-08-11T13:45:09.533
> 
> 标签：android

这是 onCreate 和 oncontextitemsselected 代码

```
@Override
    public void onCreateContextMenu(ContextMenu menu, View v,
            ContextMenuInfo menuInfo) {
        super.onCreateContextMenu(menu, v, menuInfo);
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.context_menu, menu);
    }

    @Override
    public boolean onContextItemSelected(MenuItem item) {
    Toast toast;
        if(item.getItemId() == R.id.context_menu_edit)
        {
            Log.d("ContextCheck","EDIT!");
            toast = Toast.makeText(this, "Edit!", Toast.LENGTH_SHORT);
            toast.show();
        }

        if(item.getItemId() == R.id.context_menu_delete)
        {
            Log.d("ContextCheck","DELETE!");
            toast = Toast.makeText(this, "Delete!", Toast.LENGTH_SHORT);
            toast.show();
        }

        return super.onContextItemSelected(item);
    } 
```

在此之前我使用了 ListView 的方法`registerForContextMenu(event_list)`， `event_list`不，我不知道为什么当我从上下文菜单中单击一个项目时，它什么也不做，它不会显示 toast 也不会记录进入 logcat ... OptionsMenu 和 ContextManu 的 item.getItemId() 是否相同？.. 我不知道我的代码有什么问题..

PS在列表视图的对话框内调用上下文菜单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T14:30:21.427

如果您不介意在课堂上创建菜单项，这是您的解决方案。关键字绝对是您的 PS，这意味着您的列表视图在对话框中。

```
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
              super.onCreateContextMenu(menu, v, menuInfo);
              //MenuInflater inflater = getMenuInflater();
              //inflater.inflate(R.menu.context_menu, menu);

              MenuItem delete = menu.add("delete");
              MenuItem add = menu.add("add");
              add.setIcon(android.R.drawable.ic_menu_upload); //adding icons
              delete.setOnMenuItemClickListener(new OnMenuItemClickListener() {
                      public boolean onMenuItemClick(MenuItem item) {
                          Log.d("ContextCheck","EDIT!");
                            Toast.makeText(Pr.this, "Edit!", Toast.LENGTH_SHORT).show();
                              return true;
                      }
              });
              add.setOnMenuItemClickListener(new OnMenuItemClickListener() {
                  public boolean onMenuItemClick(MenuItem item) {
                      Log.d("ContextCheck","EDIT!");
                        Toast.makeText(Pr.this, "Edit!", Toast.LENGTH_SHORT).show();
                      return true;
                  }
          });
            } 
```

您甚至不需要该`onContextItemSelected`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T13:57:29.157

[您需要在onCreateOptionsMenu](http://developer.android.com/reference/android/app/Activity.html#onCreateOptionsMenu%28android.view.Menu%29)中返回 true，如文档中所述：

> **退货**
> 
> 您必须返回 true 才能显示菜单；如果您返回 false 则不会显示。

因此，您可以将代码更改为：

```
@Override
        public void onCreateContextMenu(ContextMenu menu, View v,
                ContextMenuInfo menuInfo) {
            super.onCreateContextMenu(menu, v, menuInfo);
            MenuInflater inflater = getMenuInflater();
            inflater.inflate(R.menu.context_menu, menu);
            return true;
        } 
```

更新：

我在选项菜单上返回了一些东西，在`onOptionsItemSelected`vs中有一个开关盒`onContextItemSelected`

```
public boolean onOptionsItemSelected(MenuItem item) {
            switch (item.getItemId()) {
                case R.id.emaildev:    
                    email();
                    break;
                case R.id.share:     
                    Share();
                    break;                      
            }
            return true;
        } 
```

图标和 ID 在我的 menu.xml 中

# windows-phone-7 - 我可以在 XAP 中包含一个数据库，还是应该在初始加载时为 Windows Phone 7 应用程序创建数据库？

> ID：11915220
> 
> 赞同：1
> 
> 时间：2012-08-11T13:45:40.943
> 
> 标签：windows-phone-7, sql-server-ce

我有一个当前使用来自文本文件的数据的 Windows Phone 7.1 应用程序。在这一点上，我想看看我的查询使用数据库执行得如何。

这是第一个用户不会写入任何数据的应用程序，而是一些预定义的查询将提取他们请求的数据。

过去，我在应用程序第一次启动时创建了数据库。在这种情况下，由于我有他们需要的数据，我想知道我是否可以创建数据库（WP7.1，所以我将使用 SQL Server Compact Edition）并将其包含在 XAP 中。

我已经看到[如何将现有数据库文件添加到我的 windows phone 7 应用程序中并从中读取数据？](https://stackoverflow.com/q/9922649/11912)，这让我了解[如何：使用 Windows Phone 应用程序部署参考数据库](http://msdn.microsoft.com/en-us/library/hh286411%28v=vs.92%29.aspx)，其中有一个重要说明：

> 在桌面上创建的 Microsoft SQL Server Compact (SQL CE) 数据库可以与 Windows Phone 应用程序一起使用，但不受官方支持。

我应该只包含在加载应用程序时将加载到数据库中的数据文件，就像我为我的 CRUD 应用程序所做的那样，还是可以安全地包含我在开发期间创建的数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T01:45:17.753

在继续深入研究之后，我发现了 Jerry Nixon 的 Mango 数据库系列，特别是[Mango Sample: Database Part 2:2](http://blog.jerrynixon.com/2011/11/mango-sample-database-part-22.html)。

我发现他实际上更完整地布置了步骤。

> 第 1 步：创建数据库
> 
> 第 2 步：构建架构和默认数据
> 
> 第 3 步：在项目中包含数据库
> 
> 第 4 步：使用 SqlMetal 生成实体
> 
> 第 5 步：清理数据上下文

最后一步包括有关移动数据库的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T00:15:15.630

在 Stackoverflow 上查看上一个问题。这已经在这里回答了

[Windows Phone 7 数据库](https://stackoverflow.com/questions/9583475/windows-phone-7-databases)

总结这个答案，是的，您可以在您的应用程序中包含预填充的 DB 文件，但它是只读的，请查看这些博客文章，它清楚地解释了如何实现这一点 -

[http://blog.arsanth.com/?p=343](http://blog.arsanth.com/?p=343)

[http://erikej.blogspot.com.au/2012/01/windows-phone-local-database-tip.html](http://erikej.blogspot.com.au/2012/01/windows-phone-local-database-tip.html)

谢谢

# android - 使用 WiFI 从笔记本电脑通过网络浏览器管理 Android 设备

> ID：11915222
> 
> 赞同：8
> 
> 时间：2012-08-11T13:46:08.503
> 
> 标签：android, web-applications, webserver, client-server

**要求：**我想通过我的笔记本电脑使用 WI-Fi 控制我的安卓手机。为此，我需要运行一个 Web 服务器和一个“自定义”Web 应用程序，该应用程序通过特定端口和 wifi 适配器的 IP 地址在 android 手机上运行。例如，我可以使用笔记本电脑中的浏览器连接到手机上运行的 Web 应用程序：`http://(ip address of the phone):port`

**我尝试过的事情：**我评估了一些适用于 android 的网络服务器，它们可以让我运行基于 java 的 servlet，例如 ( [ijetty](http://code.google.com/p/i-jetty/) )。还有其他的，比如 TWJS 、 KWS 、 PAW 等。到目前为止，我可以在手机上运行它们并通过我的笔记本电脑访问 Web 服务器。

**我的问题：**在与为 Android 开发应用程序相关的所有资源和材料中，我很难找到任何有用且清晰的信息，说明我应该创建一个**可以使用 android API 并有效通信的 Web 应用程序的 Web 技术手机就像任何原生 Android 应用程序一样**。

i-Jetty 声称支持可以使用 android api 的 Web 应用程序，但缺乏任何关于如何构建使用 Android API 的 Web 应用程序/servlet 的真实文档。

虽然，我的要求类似于现有的 Android 应用程序，即[AirDroid](http://airdroid.com)，但它不是开源的，也没有讨论与其实现架构相关的任何内容。因此，我愿意接受任何可以帮助我创建用于无线管理 android 手机的 Web 应用程序的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:47:56.300

看一下[i-jetty 示例应用程序](http://code.google.com/p/i-jetty/source/browse/trunk/example-webapps/hello/src/main/java/org/mortbay/ijetty/hello/HelloWorld.java)，您可以看到可以检索[`Context`](http://developer.android.com/reference/android/content/Context.html)和[`ContentResolver`](http://developer.android.com/reference/android/content/ContentResolver.html)对象：

```
android.content.ContentResolver resolver = (android.content.ContentResolver)config.getServletContext().getAttribute("org.mortbay.ijetty.contentResolver");;
android.content.Context androidContext = (android.content.Context)config.getServletContext().getAttribute("org.mortbay.ijetty.context"); 
```

通过它您可以访问系统服务、读取和写入首选项、执行查询以检索联系人等，就好像它是一个普通的 Android 应用程序一样。

# cmd - 如何从 JScript 访问命令行

> ID：11915235
> 
> 赞同：1
> 
> 时间：2012-08-11T13:48:19.123
> 
> 标签：cmd, wsh, jscript

我正在尝试编写一个 Windows JS 脚本，该脚本遍历一堆文件夹并使用特殊程序删除每个文件夹，因为由于某种原因，这些文件夹无法正常删除。我的问题是我不知道如何像在批处理文件中那样简单地在命令行上运行命令。显然，你不能直接调用它，但我用谷歌搜索和搜索，找不到任何东西。

我要运行的命令字符串是`"C:\Program Files\Unlocker\Unlocker.exe" "E:\.Trash-1000\expunged\2443302239\recup_dir.275" -D`. 如果有人能给我写一个可以做到这一点的简单脚本，那就太好了。此外，如果您可以将其放入从 100 到 999 的 for 循环中，并用循环 var 替换 275，那就更好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T14:35:05.107

这是代码。

```
cmdPrefix='"C:\Program Files\Unlocker\Unlocker.exe" "';
dirPrefix='E:\.Trash-1000\expunged\2443302239\recup_dir.';
dirSuffix='';
cmdSuffix='" -D';
showUI=true;
shell=WScript.CreateObject('WScript.Shell');
fso=WScript.CreateObject('Scripting.FileSystemObject');
for (i=100; i<=999; i++) {
  folder=dirPrefix+i+dirSuffix;
  if (fso.FolderExists(folder)) {
    shell.Run(cmdPrefix+folder+cmdSuffix, showUI?1:0, true);
  }
} 
```

# php - 对模块控制器进行 Ajax 调用

> ID：11915240
> 
> 赞同：1
> 
> 时间：2012-08-11T13:49:55.007
> 
> 标签：php, ajax, codeigniter, module, hmvc

我有一个通过 jquery 运行 ajax 请求的模块，我正在尝试将 ajax 请求发送到同一模块文件夹中的控制器。

这是我的代码：

```
 $.ajax({
        dataType: "json",
        url: "../modules/test/controllers/test_controller/get_data",
        success: function(json) {
            alert(json.test);
        },
        error: function() {
            // Errored
        }
    }); 
```

在 firebug 中，url 似乎是正确的，但是在请求控制台的 html 输出中抛出了 404 页面错误。如何访问模块文件夹中的控制器？我需要更改 third_party/MX/ 文件中的任何内容吗？（使用模块所需的文件）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T21:01:12.597

```
url: "../modules/test/controllers/test_controller/get_data", 
```

写在这个路径`base_url();`或`site_url();`

例如

```
<script>
var base_url = <?=base_url();?>
</script> 
```

在你的 js 文件中：

```
url: base_url + 'controller/method' 
```

# c# - 从 Windows 服务打印 pcl 文件的 LPR 命令不起作用（现在是托盘应用程序）

> ID：11915241
> 
> 赞同：4
> 
> 时间：2012-08-11T13:49:55.777
> 
> 标签：c#, printing, windows-services, processstartinfo, lpr

我一直在寻找可能的解决方案和解释，但我真的找不到任何东西。

以下命令正在从 Windows 服务运行。如果直接在 cmd 中使用，相同的命令也会起作用。它不会为此返回任何错误或任何其他内容。

```
 System.Diagnostics.Process process = new System.Diagnostics.Process();
    System.Diagnostics.ProcessStartInfo startInfo = new System.Diagnostics.ProcessStartInfo();
    startInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
    startInfo.FileName = "cmd.exe";
    startInfo.Arguments = "/C lpr.exe –S " + printerIP + " –P " + deviceName + " –o l " + fInfo.DirectoryName + @"\" + fInfo.Name;
    process.StartInfo = startInfo;
    process.Start(); 
```

这可能只是我错过的一些小事，但我就是看不到它。如果有可能使用 lpr-command 和一个简单的替代方法，我会喜欢的，但我还没有看到任何东西。

编辑：忘记添加我要发送到打印机的文件是 pcl 文件。

Edit2：当我在没有应用隐藏窗口样式和 WaitForExit(5000) 的情况下运行命令时，我似乎看不到任何命令行被写入 - 出现的只是空的命令提示符。

编辑3：现在玩弄了一下，我想出了以下几点：

```
 System.Diagnostics.Process process = new System.Diagnostics.Process();
    System.Diagnostics.ProcessStartInfo startInfo = new System.Diagnostics.ProcessStartInfo();
    startInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
    startInfo.FileName = "lpr";
    startInfo.Arguments = " –S " + printerIP + " –P " + deviceName + " –o l " + fInfo.DirectoryName + @"\" + fInfo.Name;
    process.StartInfo = startInfo;
    process.Start(); 
```

如果用户单击表单中的按钮执行上述代码，则该代码有效。所以我决定将我的代码更改为作为托盘应用程序运行，因为我认为这可能会解决问题 - 但它似乎仍然拒绝运行。由触发的计时器或另一个线程运行它可能是某种问题吗？或者也许与这些方法的权利有关？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-09-15T19:07:21.810

将您的代码更改为：

```
System.Diagnostics.Process process = new System.Diagnostics.Process();
System.Diagnostics.ProcessStartInfo startInfo = new System.Diagnostics.ProcessStartInfo();
startInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
startInfo.FileName = "cmd.exe";
startInfo.Arguments = "/C C:\windows\Sysnative\lpr.exe –S " + printerIP + " –P " + deviceName + " –o l " + fInfo.DirectoryName + @"\" + fInfo.Name;
process.StartInfo = startInfo;
process.Start(); 
```

问题是您正试图从 32 位 cmd.exe 应用程序访问 64 位应用程序 (lpr)。简单的解决方案是使用 sysnative 目录。

[http://www.samlogic.net/articles/sysnative-folder-64-bit-windows.htm](http://www.samlogic.net/articles/sysnative-folder-64-bit-windows.htm)

> “Sysnative”文件夹在 Windows 资源管理器中不可见 如果您启动 Windows 资源管理器并打开硬盘上的 Windows 文件夹，您可能会注意到 Sysnative 文件夹未显示。主要原因是 Windows Explorer 是一个 64 位程序（在 64 位 Windows 中运行时），而 Sysnative 文件夹只能从 32 位软件中看到和访问。如果 64 位软件需要访问 Windows 中的 64 位系统文件夹，唯一的选择是使用 System32 文件夹名称（例如：C:\Windows\System32）。
> 
> 使用“Sysnative”文件夹将帮助您从 32 位代码访问 64 位工具 64 位 Windows 中的某些工具仅存在于 64 位版本中；没有可用的 32 位版本。其中一些工具位于 64 位 System32 文件夹中。一个示例是用于帮助解决 NetBIOS 名称解析问题的 nbtstat 工具。如果您尝试从 32 位代码（例如从应用程序或脚本）运行 nbtstat 工具并使用 C:\Windows\System32 之类的路径，您将收到“找不到文件”错误。找不到文件；尽管 Windows 资源管理器显示 nbtstat 程序文件实际上位于 C:\Windows\System32 文件夹中。
> 这个（有点令人困惑）问题的解决方案是在您想要运行该工具时在文件夹路径中包含虚拟 Sysnative 文件夹。例如像这样： C:\Windows\Sysnative\nbtstat.exe 上面的文件路径将使您能够从 32 位应用程序或 32 位脚本访问 64 位 nbtstat 工具。我们建议您阅读这篇文章/博客文章（在 Scottie 的 Tech.Info 上）以获取有关此内容的更多详细信息。

# php - 分页适合我的情况？

> ID：11915246
> 
> 赞同：1
> 
> 时间：2012-08-11T13:50:57.733
> 
> 标签：php, mysql, pagination

我有一个非常复杂的脚本，它不能完全与 MySQL 一起工作，但它部分地工作。让我试着解释一下……

*我的页面的结果是来自特定文件夹*的纯***图像名称***，这意味着我使用这个函数来获取我的结果：

 *```
function get_all_images($dir)
{
    $dir = opendir($dir);
    $dirArray = array();

    while($entryName = readdir($dir)) 
    {
        if(($entryName != ".") && ($entryName != "..") && ($entryName != ".svn") && ($entryName != ".htaccess"))
        {   
            $dirArray[] = $entryName;
        }
    }

    closedir($dir);
    (sizeof($dirArray)) ? arsort($dirArray) : '';

    return (is_array($dirArray)) ? $dirArray : '';
} 
```

这就是我基本上在我的页面中获得结果的方式：

```
 <?php
 include('includes/header.php');
    $images = get_all_images('i');

    $url    = str_replace('www.', '', generate_site_url());
    $flag   = false;
    $count  = 0;

    if (empty($images))
    {
        echo '<h2>There are no uploaded images</h2><br>';
    }

    foreach ($images as $image) 
    {
        $filename = $image_name = $image; 
        $image_link = $url . IMAGES_PATH . $filename;
        $user_id = fetch_user_id($image_link);

        $delete_link        = (isset($_POST['delete_link'])) ? $_POST['delete_link'] : '';
        $delete_image       = (isset($_POST['delete_image'])) ? $_POST['delete_image'] : '';

        if ($delete_admin_submit) 
        {
            unlink('./t/' . $delete_image);
            unlink('./t/big' . $delete_image);
            adminDelete('./i/' . $delete_image, $delete_link); 
            header('Location: ' . $imgit_action); 
            exit();
        }

        echo '<div class="' . ($count++ % 2 ? "odd-color" : "even-color") . '">';
            echo '<table>';
            echo '<tr><td class="fullwidth"><a class="preview_img" href="' . $image_link . '"><img src="' . $image_link . '" title="Click to enlarge" width="300" class="thumb" /></a></td></tr>';

            echo '<tr><td><span class="default">Direct link:</span>&nbsp;';
            echo '<input type="text" readonly="readonly" class="link-area" onmouseover="this.select();" value="' . $image_link . '" />';
            echo '<form method="post" action="" onsubmit="return confirmSingleDeletion();" style="display: inline;"> ';
            echo '<input type="submit" class="icon_delete" name="delete_link" value="' . $image_link . '" title="Delete this image" />';
            echo '<input type="hidden" name="delete_image" value="' . $image_name . '" />';
            echo '</form>'; 
            echo '</td></tr>';

            echo ($flag) ? '<hr /><br>' : '';

            echo '</table>';
            if (!empty($user_id))
            {
                echo '<br><strong class="normal">Uploader ID:</strong>&nbsp;';
                echo '<em class="normal">' . $user_id . '</em><br>';
            }
            echo '<br>';

        $flag = true;
    }
    ?>
    <a href="<?php echo $home_action; ?>"><span class="button-sub">&laquo; Back to Index</span></a> 
    <?php echo '</div>'; ?>
<?php include('includes/footer_alt.php'); ?> 
```

现在我没有任何简单的线索如何开始将我的结果分成页面。我在这里处理超过 12000 个结果，加载页面需要很多时间，我需要帮助将这个大结果分解为页面。

有人愿意帮助我吗？至少给我一个线索如何开始？我将不胜感激。

非常感谢您的阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T15:19:55.343

在收集文件名时考虑您的数组，但在对它们进行排序之后：

```
$imgs = array(
0 => 'image1.jpg',
1 => 'image2.jpg',
2 => 'image3.jpg',
3 => 'image4.jpg',
4 => 'image5.jpg',
5 => 'image6.jpg',
6 => 'image7.jpg',
7 => 'image8.jpg',
);
// create some vars which you can use in your pagination
$perpage = 3 ;
$page=2;
$range_end = ($perpage*$page)-1;
$range_start = ($perpage*($page-1));
$display=range($range_start,$range_end);

// loop through results
foreach($display as $show){
echo $imgs[$show];
} 
```

这会让你开始吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T21:18:22.560

感谢您尝试回答我**Cups**和**Umair Khan**，但我在这里找到了可行的解决方案：

[http://tiffanybbrown.com/2008/12/14/simple-pagination-for-arrays-with-php-5/](http://tiffanybbrown.com/2008/12/14/simple-pagination-for-arrays-with-php-5/)*

# java - 给定 C 的类对象，如何获取 C[] 的类对象

> ID：11915248
> 
> 赞同：4
> 
> 时间：2012-08-11T13:51:04.333
> 
> 标签：java, arrays, reflection

我得到了一个`java.lang.Class`指向`C.class`. 获得`java.lang.Class`which 指代的最优雅/最有效的方法是`C[].class`什么？

我可以做到，`java.lang.reflect.Array.newInstance(clazz, 0).getClass()`但这看起来不太好。还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T14:52:07.813

无论您采用哪种方式，代码看起来都不会很好。就其本质而言，使用反射的 Java 代码往往相当冗长。你能做的最好的就是把这段代码放在一个实用方法中，这样丑陋和冗长将被本地化到那个方法，而不会出现在你的代码的其余部分。

# actionscript-3 - 使用 Mercurial 使用闪存：如何处理 FLA？

> ID：11915251
> 
> 赞同：1
> 
> 时间：2012-08-11T13:51:21.510
> 
> 标签：actionscript-3, flash, version-control, mercurial, flash-cs5

`.fla`在使用版本控制时，团队如何同时处理同一个文件？

我们是一个 2 人的团队，现在正在开发一个 flash 游戏，我们发现，由于它是一个二进制文件，我们不能同时处理该`.fla`文件，否则需要一个或另一个替换他的文件（因为几乎不可能合并）。

短期内我们能找到的最佳解决方案是在我们想要处理文件时向另一个“锁定”和“解锁”发短信。是的，这很不方便，我同意。*必须*有一个干净的解决方案。

那么大团队如何通过版本控制来管理二进制文件呢？

我们的替代方案是什么？

*我们使用 flash cs5 以及 bitbucket 和 TurtoiseHg，如果这有什么改变的话。*

感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T14:13:41.717

参考以下网站：

[Flash CS5 和版本控制](http://www.dz015.com/?p=202)

# android - 在 ViewPageIndicator 中使用多个布局

> ID：11915252
> 
> 赞同：4
> 
> 时间：2012-08-11T13:51:26.080
> 
> 标签：android, viewpagerindicator

我想知道如何在 ViewpageIndicator 中设置布局适配器。我有 3 个布局我想用 ViewpageIndicator 滚动槽。每个布局都有自己的 Activity。

**SampleCirclesWithListener 类：**

```
public class SampleCirclesWithListener extends BaseSampleActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.simple_circles);

        mAdapter = new TestFragmentAdapter(getSupportFragmentManager());

        mPager = (ViewPager)findViewById(R.id.pager);
        mPager.setAdapter(mAdapter);

        mIndicator = (CirclePageIndicator)findViewById(R.id.indicator);
        mIndicator.setViewPager(mPager);

        //We set this on the indicator, NOT the pager
        mIndicator.setOnPageChangeListener(new ViewPager.OnPageChangeListener() {
            public void onPageSelected(int position) {
                Toast.makeText(SampleCirclesWithListener.this, "Changed to page " + position, Toast.LENGTH_SHORT).show();
            }

            public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
            } 
```

我一直在寻找解决方案几个小时。有人可以帮忙吗？非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T19:26:10.033

> 我想知道如何在 ViewpageIndicator 中设置布局适配器

您不要“在 ViewpageIndicator 中设置布局适配器”。您在 a 中设置了`PagerAdapter`a `ViewPager`，并且可能将 a`ViewPagerIndicator`与 that 一起使用`ViewPager`。

> 每个布局都有自己的 Activity。

`ViewPager`不支持活动之间的分页。它支持视图之间的分页，其中这些视图可选地由片段管理（例如，`FragmentPagerAdapter`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T11:55:58.360

要扩展 CommonsWare 的出色答案并用代码填充它，供您想象：

如果你有 Jake Wharton 的 ViewPageIndicator 演示项目，你应该有 a`TestFragmentAdapter`和 a `TestFragment`。该类`TestFragmentAdapter`扩展了**`FragmentPagerAdapter`**并且`TestFragment`该类应该扩展 a **`Fragment`**。现在分页槽活动是不可能的，但您可以分页槽片段。

使用片段中的方法创建一个`Fragment`并将其设置为您的布局：`onCreateView()`

```
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, 
        Bundle savedInstanceState) {

        return inflater.inflate(R.layout.layout, container, false);
    } 
```

现在在您的 FragmentPagerAdapter 中应该有一个名为`getItem()`. `Switch`位置并将其设置为您的片段：

```
@Override
            public Fragment getItem(int position) {
                switch(position){
                case 0:
                    TestFragment fragment = new TestFragment();  

                    return fragment;

                case 1:
                            TestFragment2 fragment2 = new TestFragment2();  
                    return fragment2;

                }

                return defaultFragment fragment3 = new defaultFragment();  
                    return fragment3;
            } 
```

现在它应该像你想要的那样工作。

# java - Java - 一个能够交错来自多个 Reader 的行的 Reader 类

> ID：11915254
> 
> 赞同：2
> 
> 时间：2012-08-11T13:51:38.220
> 
> 标签：java

我想要的结果是：

```
public class InterleavedBufferedReader extends BufferedReader {
...
} 
```

并将其用作：

```
Reader[3] readers = ...; // three readers
InterleavedBufferedReader ibr = new InterleavedBufferedReader(readers);

ibr.readLine();  // this returns the first line of Reader 1
ibr.readLine();  // this returns the first line of Reader 2
ibr.readLine();  // this returns the first line of Reader 3

ibr.readLine();  // this returns the second line of Reader 1
ibr.readLine();  // this returns the second line of Reader 2
ibr.readLine();  // hey, Reader 3 had no more lines, return the third line of Reader 1 
```

我尝试了什么（不好，我知道，这就是我在这里的原因）：

```
public class InterleavedBufferedReader extends BufferedReader {

    static private int current = 0;
    private BufferedReader[] buffers;

    public InterleavedBufferedReader(BufferedReader[] in) {
        super(new StringReader("dummy"));
        buffers = in;
    }

    public InterleavedBufferedReader(Reader[] in) {
        super(new StringReader("dummy"));
        buffers = new BufferedReader[in.length];
        for (int i=0 ; i < in.length ; i++)
            buffers[i] = new BufferedReader(in[i]);
    }

    @Override
    public String readLine() throws IOException {
        int start = current;
        String line = null;
        while ((line = buffers[current].readLine()) == null) {
            current = (current+1) % buffers.length;
            if (current == start)
                return null;
        }       
        current = (current+1) % buffers.length;
        return line;

    }

    @Override 
    public void close() throws IOException {
        for (int i=0;  i < buffers.length; i++)
            buffers[i].close();
    }
} 
```

注释：

*   交错`readLine()`确实有效！
*   也许我不应该延长`BufferedReader`。我不得不给它一个虚拟的 Reader 来管理，否则它甚至不会编译。同时，我重写了`readLine()`在儿童阅读器上调用它的方法。但是实现至少是不完整的，因为其他方法，如`read()`，实际上将引用我的虚拟读者。

我可以以更清洁的方式做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T15:01:28.360

> 也许我不应该延长`BufferedReader`。我不得不给它一个虚拟的 Reader 来管理，否则它甚至不会编译。[...] 实现至少是不完整的，因为其他方法，如 read()，实际上将引用我的虚拟阅读器

您也可以并且应该覆盖`read()`(and `ready()`)。`readLine()`必须保留该实现，但至少您确定所有读取方法都符合您希望实现的交错。无法避免虚拟阅读器，但您的实现可以。您甚至可能希望将 BufferedReader 的缓冲区设置为可以达到的最低值 (1)，以减少内存浪费。

除此之外，您不能忘记流的标记支持：您必须通过覆盖`mark()`and重新实现它`reset()`，或者只是覆盖`markSupported()`它以使其始终返回 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T21:04:32.030

在上面有用的评论之后，我正在回答我自己的问题，以展示我找到的解决方案，这似乎有效。我不确定它是否 100% 正确（未测试过长于缓冲区的行会发生什么）。

与第一版的区别：

*   它延伸`Reader`，不是`BufferedReader`。它更简单，不需要虚拟阅读器。通过确保它的孩子是`BufferedReader`，它可以召唤`readLine()`他们。
*   它仍然实现了 a `readLine()`，它提供了我正在寻找的功能
*   `read(char[], int, int)`使用`readLine()`上述实现。这样，我确信线条永远不会被打破。这是需要的，例如，`new LineNumberReader(new InterleavedReader(...)).readLine()`调用`read(char[], int, int)`.`InterleavedReader`

这是代码。请让我知道您是否可以提出改进建议！

```
public class InterleavedReader extends Reader {

    private int current = 0;
    private BufferedReader[] buffers = null;
    private boolean skipLF = false;

    public InterleavedReader(Reader[] in) {
        super();
        buffers = new BufferedReader[in.length];
        for (int i=0 ; i < in.length ; i++) {
            if (in[i] instanceof BufferedReader)
                buffers[i] = (BufferedReader) in[i];
            else
                buffers[i] = new BufferedReader(in[i]);         
        }
    }

    public String readLine() throws IOException {
        // Every time, we issue readLine() to the next child BuffredReader
        // If we make a complete loop without a valid line,
        // then no child has more lines
        synchronized (lock) {
            int start = current;
            String line = null;
            while ((line = buffers[current].readLine()) == null) {
                current = (current+1) % buffers.length;
                if (current == start)
                    return null;
            }       
            current = (current+1) % buffers.length;
            return line;
        }
    }

    @Override
    public int read(char cbuf[], int off, int len) throws IOException {
        // To be sure we never break a line, we implement this using readLine()
        String s = readLine();
        if (s == null)
            return -1;
        System.arraycopy(s.toCharArray(), 0, cbuf, off, s.length());
        // readLine() doesn't include the '\n', append it to the buffer
        cbuf[off+s.length()] = '\n';
        return s.length()+1;
    }

    private int readChar() throws IOException {
        int start = current;
        int c = -1;
        while ((c = buffers[current].read()) == -1) {
            current = (current+1) % buffers.length;
            if (current == start)
                return -1;
        }   
        return c;
    }

    @Override
    public int read() throws IOException {
        synchronized (lock) {
            int c = readChar();
            if (skipLF && c == '\n') {
                c = readChar();
                skipLF = false;
            }
            switch (c) {
            case '\r':
                skipLF = true;
            case '\n':          /* Fall through */
                current = (current+1) % buffers.length;
                return '\n';
            }           
            return c;
        }
    }

    @Override
    public boolean markSupported() {
        return false;
    }

    @Override
    public boolean ready() throws IOException {
        synchronized (lock) {
            for(int i=0; i < buffers.length; i++)
                if (buffers[i].ready())
                    return true;
            return false;
        }
    }

    @Override 
    public void close() throws IOException {
        synchronized (lock) {
            for (int i=0;  i < buffers.length; i++)
                buffers[i].close();
        }
    }
} 
```

# cassandra - 为什么 Cassandra 中的超级列不再受青睐？

> ID：11915255
> 
> 赞同：30
> 
> 时间：2012-08-11T13:51:44.013
> 
> 标签：cassandra, indexing, database-indexes, super-columns

我在最新版本中读到，由于“性能问题”，超级列是不可取的，但没有在哪里解释。

然后我阅读了[这篇](http://pkghosh.wordpress.com/2011/03/02/cassandra-secondary-index-patterns/)文章，这些文章使用超级列提供了出色的索引模式。

这让我不知道**目前**在 Cassandra 中进行索引的最佳方法是什么。

1.  超级列的性能问题是什么？
2.  在哪里可以找到**当前**的索引最佳实践？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-11T23:41:12.453

超级列存在许多问题，其中最重要的是 Cassandra 在查询时必须反序列化超级列的所有子列（即使结果只会返回一个小子集）。因此，在性能受到影响之前，每个超级列可以存储的子列数存在实际限制。

理论上，这可以通过正确索引子列在 Cassandra 中解决，但共识是复合列是更好的解决方案，并且它们可以在不增加复杂性的情况下工作。

使用复合列的最简单方法是利用[CQL 3](http://cassandra.apache.org/doc/cql3/CQL.html)提供的抽象。考虑以下架构：

```
CREATE TABLE messages(
    username text,
    sent_at timestamp,
    message text,
    sender text,
    PRIMARY KEY(username, sent_at)
); 
```

这里的用户名是行键，但我们使用了 PRIMARY KEY 定义，它创建了一组行键和 sent_at 列。这很重要，因为它具有索引该属性的效果。

```
INSERT INTO messages (username, sent_at, message, sender) VALUES ('bob', '2012-08-01 11:42:15', 'Hi', 'alice');
INSERT INTO messages (username, sent_at, message, sender) VALUES ('alice', '2012-08-01 11:42:37', 'Hi yourself', 'bob');
INSERT INTO messages (username, sent_at, message, sender) VALUES ('bob', '2012-08-01 11:43:00', 'What are you doing later?', 'alice');
INSERT INTO messages (username, sent_at, message, sender) VALUES ('bob', '2012-08-01 11:47:14', 'Bob?', 'alice'); 
```

在幕后，Cassandra 将存储上述插入的数据，如下所示：

```
alice: (2012-08-01 11:42:37,message): Hi yourself, (2012-08-01 11:42:37,sender): bob
bob:   (2012-08-01 11:42:15,message): Hi,          (2012-08-01 11:42:15,sender): alice, (2012-08-01 11:43:00,message): What are you doing later?, (2012-08-01 11:43:00,sender): alice (2012-08-01 11:47:14,message): Bob?, (2012-08-01 11:47:14,sender): alice 
```

但是使用 CQL 3，我们可以使用 sent_at 谓词查询“行”，并返回一个表格结果集。

```
SELECT * FROM messages WHERE username = 'bob' AND sent_at > '2012-08-01';
 username | sent_at                  | message                   | sender
----------+--------------------------+---------------------------+--------
      bob | 2012-08-01 11:43:00+0000 | What are you doing later? |  alice
      bob | 2012-08-01 11:47:14+0000 |                      Bob? |  alice 
```

# java - 如何按行解析 HBase 查询数据，如 oracle/mysql in(row1,row2,row3...)

> ID：11915256
> 
> 赞同：2
> 
> 时间：2012-08-11T13:52:27.750
> 
> 标签：java, database, hadoop, hbase

在 oracle/mysql 我们通常查询记录使用

```
select * from test t where t.id in(1001,1002,1003); 
```

但是hbase没有选择数据的api，只能使用scan(startRow)和endRow；

谁解决了这个问题，或者有办法做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T19:32:37.650

如果您正在寻找 HBase 作为 RDBMS 的替代品，那就不要了。HBase 在查询数据的方式上受到更多限制。

无论如何，如果您在 HBase 中的行键是 id，您可以通过键执行您提到的 3 个 GET 查询

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T01:41:47.710

我完全同意 Arnon... HBase 并不是真正的 RDBMS 替代品。

要获得您正在寻找的一些查询功能，您应该考虑使用[Hive](http://hive.apache.org/)，它是一种几乎是 SQL 的实现，可以在 Hadoop 或 HBase 中的数据上运行。

像您在问题中提到的那样与 HBase 与 Java 交互时，您可以使用[filter](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/filter/package-summary.html)，特别是[`ValueFilter`](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/filter/ValueFilter.html)，来过滤掉值。这将使它只有与要返回的条件匹配的行。查看[有关过滤器的 hbase 参考指南，](http://hbase.apache.org/book.html#client.filter)以了解有关如何实现此功能的更多信息。

# ajax - @ResponseBody 中的 Spring MVC + JSON + 继承

> ID：11915257
> 
> 赞同：0
> 
> 时间：2012-08-11T13:52:52.460
> 
> 标签：ajax, json, spring

我有一个类层次结构。在它的顶部有一个抽象的 AnswerUnit 类。有两个继承类：OpenQuestionAnswer 和 MultipleChoiceQuestionAnswer。

我有一个 .jsp 表单，它使用 AJAX 请求和控制器中的方法将数据（序列化为 JSON 的对象）发送到服务器。

```
@RequestMapping(value = "/test", method = RequestMethod.POST)
    public @ResponseBody
    String testPostMethod(@RequestBody
    OpenQuestionAnswer answer) {
        return "home";
    } 
```

我希望能够将“AnswerUnit answer”作为参数（抽象类型而不是具体类型，因此我可以使用一种方法处理来自不同视图的请求）。当我尝试这样做时出现问题 - 服务器响应是

`400 BAD REQUEST he request sent by the client was syntactically incorrect.`

我认为原因是 Spring（Jackson？）无法找出他应该创建和使用哪个具体类。在客户端，我知道我发送到服务器的类类型。告诉服务器应该创建哪个具体类并用我的请求填充的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-07T05:48:05.330

我想我迟到了，但无论如何:)

[http://wiki.fasterxml.com/JacksonAnnotations](http://wiki.fasterxml.com/JacksonAnnotations)

您可以使用杰克逊多态类型处理

```
@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = "type")
@JsonSubTypes(value = {
    @JsonSubTypes.Type(name = "answer", value = OpenQuestionAnswer.class),
    @JsonSubTypes.Type(name = "multiple", value = MultipleChoiceQuestionAnswer.class)
})
public class AnswerUnit
... 
```

但是您需要在客户端 JSON 中添加“类型”字段。

# php - PHP第一次工作然后失败

> ID：11915261
> 
> 赞同：1
> 
> 时间：2012-08-11T13:53:24.223
> 
> 标签：php, mysql

基本上这样做是为了在用户按下按钮后，他们必须等待 2 分钟才能再次按下它。当你第一次按下它时，它可以工作，然后如果你在2分钟之前再次按下它，它会显示“请等待2分钟”。但是2分钟后，你可以按你喜欢的次数按它而不报错，这不是我想要的。这是代码

```
<?php
if('sub') {

$client = $_SERVER['REMOTE_ADDR'];
$username="user";
$password="pass";
$database="db";
mysql_connect(localhost,$username,$password);
$time = strtotime("2 minutes");
$now = strtotime("now");
@mysql_select_db($database) or die( "Unable to select database");
$query = "SELECT Time FROM log WHERE IP='$client'";
$result= mysql_query($query);
$num=mysql_num_rows($result);

while($rows=mysql_fetch_array($result)){
$timestamp = $rows['Time'];
}
echo n; 
echo $now;
echo t;
echo $timestamp;

if($now < $timestamp)
{
echo "<center><h2 style=\"color:red\" class=\"texts\" id=\"homeLink\">Please wait 2 minutes.</h2></center>";

}
else{
//some other code

$query1 = "INSERT INTO log VALUES ('$client','$time','$username')";
$query2 = "UPDATE `log` SET `Time`='$time' SET `Username`='$username' WHERE `IP`='$client'";

if($num == 0)
{
mysql_query($query1);
}
else
{
mysql_query($query2);
}

mysql_close();
}
?> 
```

如您所见，如果用户的 IP 没有一行，它会创建一个新的，如果有它会更新它。第一次之后，它不再起作用。希望有人可以提供帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T14:00:45.687

你的更新语句有点不对劲，所以更新失败；

```
UPDATE `log` SET `Time`='$time' SET `Username`='$username' WHERE `IP`='$client'" 
```

你应该只使用`SET`一次，像这样；

```
UPDATE `log` SET `Time`='$time', `Username`='$username' WHERE `IP`='$client'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T14:05:16.950

我很确定您的数据库不包含您认为它包含的条目。你能检查一下吗（按下按钮后IP和东西）？

# c# - XNA 使用 depthBuffer 绘制模型，但优于其他模型（如 3dMax Gizmo）

> ID：11915264
> 
> 赞同：1
> 
> 时间：2012-08-11T13:53:50.803
> 
> 标签：c#, .net, xna, rendering

如您所知，我正在尝试为关卡编辑器创建小玩意儿，但遇到了问题。为了在其他模型上绘制我的小发明，我设置

```
 GraphicsDevise.DepthStencilState = DepthStencilState.None; 
```

因为没有深度测试，有时我会遇到以下情况。

![](../Images/82240245afcc43da25e6f8161026180c.png)

我知道我可以用 解决这个问题`renderTarget`，但我不想弄乱 Draw。

你能给我一个建议，我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:40:29.247

感谢@melak47，我解决了这个问题

在主 Draw 调用中，我最后绘制 Gizmo，在 Gizmo 内部，在绘制几何之前我调用

```
_GD.Clear(ClearOptions.DepthBuffer, new Vector4(0), 65535, 0); 
```

# javascript - 如何从 Google Map 对象中隐藏公共汽车？

> ID：11915265
> 
> 赞同：0
> 
> 时间：2012-08-11T13:53:50.557
> 
> 标签：javascript, google-maps, google-maps-api-3

Google Map API 中是否有任何地方可以从地图中隐藏公共汽车？我在 mapOptions 中找不到任何东西。任何帮助将不胜感激。

![在此处输入图像描述](../Images/ad34fbbbd93e7383ac9197b94867edfa.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T14:15:00.750

是的，您可以在 mapOptions 中应用样式：

```
var mapOptions = {
        styles: [
          {
            featureType: "transit.station.bus",
            stylers: [
              { visibility: "off" }
            ]
          }
        ]};
        map.setOptions(mapOptions); 
```

有关更多信息，请参阅[**样式向导**](http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html)。

# c - 优雅地退出 C 应用程序

> ID：11915266
> 
> 赞同：1
> 
> 时间：2012-08-11T13:53:59.450
> 
> 标签：c, shell

我目前有一个我用 C 语言编写的程序，该程序有一个处理信息的无限循环，每个循环大约需要 5 分钟才能完成。我想在 shell 脚本中具有以下功能：

*   终止 C 程序

*   制作源码

*   运行程序

问题是，我不知道如何在不执行 ctrl+c 之类的操作的情况下告诉我的 C 程序退出，我宁愿它在终止自身之前完成当前正在处理的信息的处理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T14:03:34.767

告诉进程完成其业务并干净退出的 POSIX 标准方法是向其发送`SIGTERM`信号。根据您的应用程序，退出 on 可能合适，也可能不合适`SIGINT`，这意味着中断进程，而不是终止进程。（Control-c 发送`SIGINT`。）

尝试在你的紧密循环中放置一个标志；在容易退出的时候检查标志，但仍然足够频繁以迅速退出。在您的情况下，收到 a`SIGTERM`可能会立即在系统日志上显示一条消息，然后承诺在接下来的 5 分钟内退出。

您的信号处理程序将如下所示：

```
static int signalled;  // if nonzero, what signal have we been sent?

static void SignalHandler(int signum) {
  signalled = signum;
} 
```

我在每次 I/O 操作后检查全局`static`变量`signalled`，这意味着每秒多次。

这是我捕获和恢复信号的代码：

```
static __sighandler_t sh, si, st;

static void catch_signals(void) {
  if ((sh = signal(SIGHUP, SignalHandler)) == SIG_IGN) signal(SIGHUP, SIG_IGN);
  if ((si = signal(SIGINT, SignalHandler)) == SIG_IGN) signal(SIGINT, SIG_IGN);
  if ((st = signal(SIGTERM, SignalHandler)) == SIG_IGN) signal(SIGTERM, SIG_IGN);
  signalled = 0;
}

static void restore_signals(void) {
  signal(SIGHUP, sh);
  signal(SIGINT, si);
  signal(SIGTERM, st);
} 
```

（这段代码来自一个图书馆，所以我要格外小心地按照我找到它们的方式保留它们。）

额外技巧：当时间到期（这是一个电视录制库）时，定时器刚刚设置`signalled = SIGTERM`，并且使用相同的逻辑正常退出录制器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-11T13:55:06.233

> 像 ctrl+c 一样，我宁愿它在终止 itel 之前完成对当前正在处理的信息的处理

为 SIGINT 或您想要的任何东西建立一个信号处理程序，并在收到它后进行清理。**但是，您不应该在处理程序本身**中进行清理。

```
volatile sig_atomic_t do_cleanup = 0;
void handler(int sig)
{
    do_cleanup = 1;
} 
```

然后在你的主循环中，你只需要测试`do_cleanup`并在你喜欢的时候退出。`EINTR`如果您还没有这样做，您还必须小心正确处理错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T14:04:40.993

以下是从 shell 发送信号的方法：

[http://bash.cyberciti.biz/guide/Sending_signal_to_Processes](http://bash.cyberciti.biz/guide/Sending_signal_to_Processes)

或者干脆`man kill`

以下是对信号的反应：

[http://www.cs.cf.ac.uk/Dave/C/node24.html#SECTION002400000000000000000](http://www.cs.cf.ac.uk/Dave/C/node24.html#SECTION002400000000000000000)

# c++ - glBlitFramebuffer 无效操作

> ID：11915267
> 
> 赞同：6
> 
> 时间：2012-08-11T13:54:02.617
> 
> 标签：c++, opengl, render, blit

我一直在搞乱帧缓冲区并渲染到纹理，我遇到了对它们进行 blit 处理的需要。再次在某些机器上，我`GL_INVALID_OPERATION`在`glBlitFramebuffer`通话后立即得到。绑定到帧缓冲区的每个纹理都以完全相同的方式设置，所有相同的大小和参数。此外，当我尝试将整个纹理（之前已成功渲染到）blit 到另一个帧缓冲区时，只有要写入的目标“矩形”小于要读取的矩形（例如，当我想将它blit 到屏幕），它`GL_INVALID_OPERATION`也会抛出一个。

**编辑：** *实际上，每当要读取和绘制的矩形具有不同的大小时，它总是会引发错误，因此我不能将纹理粘贴到不同大小的纹理，或者相同大小但不同大小的“渲染到”区域。 ..？*

每次我进入手动生成的帧缓冲区时，都会检查状态`glCheckFramebufferStatus`并始终返回`GL_FRAMEBUFFER_COMPLETE`.

*-有史以来最大的剪辑-，见下文较短的“源代码”，显然有几个 C++ 错误并且不完整，但它仅适用于 GL 调用*

当我以屏幕帧缓冲区为目标（通过传递 NULL）调用视口 (Viewport::blit) 的最后一个方法时，会发生 OpenGL 错误。它首先设置自己帧缓冲区的读取缓冲区（绘制缓冲区已设置），然后调用 RenderTarget::blit 调用`glBlitFramebuffer`. 在 blit 方法中，它绑定了两个缓冲区，您可以看到它`glCheckFramebufferStatus`在那里调用，但不会返回错误。

我一遍又一遍地阅读[这篇](http://www.opengl.org/wiki/GLAPI/glBlitFramebuffer)文章，但我似乎找不到导致它的错误。当我对我使用的颜色缓冲区进行 blit 时`GL_LINEAR`，否则我使用`GL_NEAREST`所有颜色缓冲区`GL_RGB32F`用作内部格式，而深度缓冲区（我从不 blit）使用`GL_DEPTH_COMPONENT32F`

**编辑，一个更短的例子，只是接受了所有的 GL 调用并填充了我使用的参数**

```
glBindFramebuffer(GL_READ_FRAMEBUFFER, _GL_Framebuffer);
glReadBuffer(GL_COLOR_ATTACHMENT0 + index);
glBindFramebuffer(GL_READ_FRAMEBUFFER, 0);

// OpenGL error check, does not return an error

glBindFramebuffer(GL_READ_FRAMEBUFFER, _GL_Framebuffer);
GLenum status = glCheckFramebufferStatus(GL_READ_FRAMEBUFFER);
if(status != GL_FRAMEBUFFER_COMPLETE)
{
    // Some error checking, fortunately status always turns out to be complete
}
glBindFramebuffer(GL_DRAW_FRAMEBUFFER, 0);

glBlitFramebuffer(0, 0, screenWidth, screenHeight, 0, 0, screenWidth, screenHeight, target, (target == GL_COLOR_BUFFER_BIT) ? GL_LINEAR : GL_NEAREST);

// If the source/destination read/draw rectangles are different in size, GL_INVALID_OPERATION is cought here 
```

以及 Framebuffer/Texture 创建：

```
glGenFramebuffer(1, &_GL_Framebuffer);

glGenTextures(1, &_GL_ZBuffer);
glBindTexture(GL_TEXTURE_2D, _GL_ZBuffer);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_BASE_LEVEL, 0);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAX_LEVEL, 0);
glTexImage2D(GL_TEXTURE_2D, 0, GL_DEPTH_COMPONENT32F, screenWidth, screenHeight, 0, GL_DEPTH_COMPONENT, GL_FLOAT, 0);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_R, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
glBindTexture(GL_TEXTURE_2D, 0);

glBindFramebuffer(GL_FRAMEBUFFER, _GL_Framebuffer);
glFramebufferTexture(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT + 0, _GL_ZBuffer, 0);
glBindFramebuffer(GL_FRAMEBUFFER, 0);

int writeIndices[BUFFER_COUNT];
for(unsigned int i = 0; i < BUFFER_COUNT; ++i)
{
    writeIndices[i] = i;

    glGenTextures(1, &_GL_Texture);
    glBindTexture(GL_TEXTURE_2D, _GL_Texture);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_BASE_LEVEL, 0);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAX_LEVEL, 0);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB32F, screenWidth, screenHeight, 0, GL_RGB, GL_FLOAT, 0);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_R, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glBindTexture(GL_TEXTURE_2D, 0);

    glBindFramebuffer(GL_FRAMEBUFFER, _GL_Framebuffer);
    glFramebufferTexture(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0 + i, _GL_Texture, 0);
    glBindFramebuffer(GL_FRAMEBUFFER, 0);

    // In the actual code each texture is obviously saved in an object
}

GLenum *enums = new GLenum[BUFFER_COUNT];
for(unsigned int i = 0; i < BUFFER_COUNT; ++i)
{
    // Get index and validate
    int index = *(indices + i); // indices = writeIndices
    if(index < 0 || index >= maxAttachments)
    {
        delete[] enums;
        return false;
    }

    // Set index
    enums[i] = GL_COLOR_ATTACHMENT0 + index;
}

// Set indices
glBindFramebuffer(GL_DRAW_FRAMEBUFFER, _GL_Framebuffer);
glDrawBuffers(BUFFER_COUNT, enums);
glBindFramebuffer(GL_DRAW_FRAMEBUFFER, 0);

delete[] enums;

// OpenGL error check, no errors 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T19:02:12.000

经过仔细阅读后，我发现多重采样的差异是问题所在。“主”FBO 是由 SFML 设置的，因此只需将启动时的抗锯齿级别设置为 0 即可*部分*解决问题。

如果绘制/读取矩形的大小不相等，它现在会闪烁，但它会在一些应该工作的机器上不断崩溃。

# iphone - 内置赞按钮 - Facebook SDK 3.0

> ID：11915269
> 
> 赞同：3
> 
> 时间：2012-08-11T13:54:46.360
> 
> 标签：iphone, ios, facebook, facebook-like

有没有人碰巧知道将“我喜欢它”按钮放入应用程序的好教程？我对 Facebook SDK 3.0 和所谓的内置 Like 按钮特别感兴趣。

到目前为止，我一直在通过 google 和 stackoverflow 进行搜索，但我没有找到任何关于 SDK 3.0 的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T14:03:47.747

请参阅有关喜欢的帖子和[此](https://stackoverflow.com/a/5837036/445312)[帖子](http://angelolloqui.blogspot.co.uk/2010/11/facebook-like-button-on-ios.html)以查看添加点赞按钮的替代方法。

理想情况下，您可以创建一个链接到该页面的 html iframe。显然，这会打开网页到 facebook like 按钮的链接。atm 我相信这就是 Temple Run 实现这一目标的方式。成功了。他们从 ios 应用程序 Temple run 本身的用户那里获得了很多喜欢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T18:28:22.233

发布一个内置的 like 与发布一个自定义的 Open Graph*动作*非常相似。学习发布内置赞的最佳资源是 Facebook 的参考页面：

[https://developers.facebook.com/docs/opengraph/actions/builtin/likes/](https://developers.facebook.com/docs/opengraph/actions/builtin/likes/)

# java - Java井字游戏架构

> ID：11915275
> 
> 赞同：3
> 
> 时间：2012-08-11T13:56:03.120
> 
> 标签：java

我目前有一个主要的大脑放屁:)。

我的计划是用 Java 构建一个简单的基于摇摆的井字游戏应用程序。我曾计划让该应用程序允许一个播放器、两个播放器本地和两个播放器远程选项。我已经让一个和两个播放器本地版本工作正常，但我正在努力让我的头脑了解两个播放器远程选项。

值得注意的是，在 Netbeans 项目中，我将 gui 放在与逻辑不同的包中。

我已经把所有的选择都炸了。

1.  就像拥有一个客户端服务器架构，但是如果客户端运行在与逻辑不同的 PC 上，这会无缘无故减慢一个播放器和两个播放器的本地版本。

2.  我认为整个应用程序（gui + 逻辑）应该分布在家庭无线网络上的各种 pc 中。这样玩家就可以在没有任何不必要的延迟时间的情况下玩一个和两个玩家本地游戏，并查看是否有其他人可用于两个玩家远程版本。如果我这样做，问题是谁的逻辑充当服务器 - 它是如何工作的？

选项 2 是解决此问题的最佳/唯一方法，因为这不仅仅是一个网络游戏吗？

还有其他方法可以解决这个问题吗？

我知道仅使用远程游戏选项进行井字游戏将是客户端服务器架构的简单案例，但是在同一个应用程序中拥有一个玩家和一个网络版本是很棘手的。

谢谢，

保罗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T14:03:05.447

从技术上讲，您可以在没有实际服务器的情况下执行此操作——您可以将其设置为客户端/主机。

当用户想成为主机时，他会发送 UDP 广播包，其中包含关于什么 ip 以及他想玩什么游戏的信息。每个想加入的人都可以抓住这个数据包。

当用户想加入时，他会监听广播包，然后加入他收到的那个。

每个玩家都可以按照自己的逻辑，将他的动作发送给其他玩家——对方应该只检查这个动作是否合法——因为也许有人想破解你的游戏：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T14:05:33.547

该应用程序应安装在每个客户端上。对于远程 2 人模式，您应该实现自己的 P2P 协议以将动作从一个玩家发送到另一个玩家并跟踪游戏的演变。

简而言之，每个客户端都应该在本地拥有自己的游戏模型，只要本地玩家做出“移动”或远程用户（通过协议）发送“移动”，它就会更新它。

当然，如果您需要跟踪分数、积分等统计数据，您将需要一个中央服务器来存储这些数据。但实际游戏应该以 P2P 模式进行，不需要服务器。

# json - Mason perl JSON 模块拒绝工作

> ID：11915276
> 
> 赞同：0
> 
> 时间：2012-08-11T13:56:09.337
> 
> 标签：json, perl, perl-module, mason

我在我的一个项目中使用 Mason，但在使用模块 JSON 时遇到问题。

该页面`search.mhtml`与其他外部模块（`use DBI`）一起正常工作，但每当我使用以下代码时，浏览器都会给我一个错误“未收到数据”：

![没有收到任何数据](../Images/cafa1a050d0580b94d5413c2e7e5241e.png)

这是我的代码：

```
<%once>

use strict;
use JSON;

</%once>

bla 
```

该脚本只是在“<once>”标签之后打印“bla”......就是这样......当我删除“use JSON”时它正在工作......

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T09:48:19.677

解决了 ！

调试 JSON 模块后，我注意到它在尝试加载模块 JSON::XS 时卡住了。

我安装了它，现在一切正常......仅供参考。

# svg - 是否可以使用 SVG 处理真实照片？调整大小，创建缩略图

> ID：11915277
> 
> 赞同：0
> 
> 时间：2012-08-11T13:56:10.010
> 
> 标签：svg, image-manipulation, image-resizing

我正在寻找像 GD Library 这样的东西，但对于 JavaScript。我阅读了有关 SVG 的信息。

> 可以搜索、索引、编写脚本和压缩 SVG 图像
> 
> SVG 图形在缩放或调整大小时不会丢失任何质量
> 
> SVG 图像是可扩展的

但在 SVG 处理的示例中，我只能看到简单的矩形、圆形、折线等图像。只是儿童的手绘图像。而且我仍然不明白是否可以使用 SVG 处理真实照片？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T14:12:04.087

SVG 用于矢量图形，而不是像 JPEG 这样的光栅图像。

[http://en.wikipedia.org/wiki/Scalable_Vector_Graphics](http://en.wikipedia.org/wiki/Scalable_Vector_Graphics)

# html - HTML 表格 - 我可以在thead 之前有一个额外的 tbody 吗？

> ID：11915278
> 
> 赞同：1
> 
> 时间：2012-08-11T13:56:18.700
> 
> 标签：html, html-table

我需要在表格顶部添加与所述表格的列一致的一些元素。

该表包含一个`<thead>`（由于 jquery.tablesorter 插件，这是必需的）。我假设如果我`<tbody>`在.`<thead>``<tbody>``<thead>`

例子：

```
<table>
    <tbody>
        <tr>
            <td>1</td><td>1</td><td>1</td>
        </tr>
    </tbody>
    <thead>
        <tr>
            <th>head</th><th>head</th><th>head</th>
        </tr>
    </thead>        
    <tbody>
        <tr>
            <td>2</td><td>2</td><td>2</td>
        </tr>
        <tr>
            <td>3</td><td>3</td><td>3</td>
        </tr>
        <tr>
            <td>4</td><td>4</td><td>4</td>
        </tr>
    </tbody>
</table> 
```

虽然我理解这一点，但我仍然需要找到一种方法让这些元素与特定列保持一致。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T08:51:59.467

您可以像这样使用多行`<thead>`：-

```
<table>

   <thead>

     <tr> <td>1</td> <td>1</td> </tr>

     <tr> <td>head</td> <td>head</td> </tr>

   </thead>

</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T14:17:21.380

我建议您使用 id (#) 标记来标识您希望 js 工作的部分并让 js 使用该 id。

有了这个，有第`thead`一个和`tbody`最后一个。

您描述的变体可能会起作用-在您现在使用的浏览器中，在您还可以的操作系统上-并且可能符合特定版本的 HTML 规范-但是（以我的经验）将事物以不寻常的顺序排列只是那种在任何地方都无法工作或工作相同的事情最终会导致很多挫败感，尤其是当网站变得越来越复杂时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T14:00:10.507

一种解决方案是在您的头中使用一个 tr 内的另一个表。虽然，这是一个完全丑陋的解决方案。

您还可以使用 CSS 在表格上方放置一个 div。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T14:19:25.937

正确的表结构是：

```
<table>
    <thead>
        <tr>
            <th></th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td></td>
            <td></td>
        </tr>
    </tbody>
    <tfoot>
        <tr>
            <th></th>
            <th></th>
        </tr>
    </tfoot>
</table> 
```

`<thead>`将永远在顶部，`<tfoot>`永远在底部。

* * *

使用`jQuery`您可以通过以下方式交换`<thead>`和`<tbody>`内容：

```
$(document).ready(function() {
    $('#myTrigger').click(function() {
        var top = $('thead').html();
        var mid = $('tbody').html();
        $('thead').html(mid);
        $('tbody').html(top);
    });
}); 
```

# html - 所有元素的 IE9 空文本节点

> ID：11915285
> 
> 赞同：1
> 
> 时间：2012-08-11T13:57:55.530
> 
> 标签：html, css, debugging, internet-explorer-9

在过去的几天里，我一直在为此绞尽脑汁，但还没有找到解决办法。我正在为客户开发一个网站，它在 Chrome 和 FF 中显示良好，但 IE9 使其无法使用。导航栏（徽标右侧的所有内容）被向下推。如果我打开 IE 的开发人员工具，每个元素都会收到“文本 - 空文本节点”消息，并且我的一些 HTML 元素似乎是重复的，其中没有内容。

*   网站已删除 - 问题已解决。

我对此感到茫然，因为我尝试了几种修复方法，包括删除空格。有人有想法么？

# git - 使用 GIT 将源代码从一个项目迁移到另一个项目的策略

> ID：11915287
> 
> 赞同：0
> 
> 时间：2012-08-11T13:58:00.870
> 
> 标签：git, version-control, branching-and-merging

我喜欢为另一个项目重用 GIT 维护项目的一些代码。工作代码是新项目的一个很好的启动，尽管其中大部分将因新需求而过时。所以问题是处理这个问题的最佳实践是什么？

我可以

*   为新事物创建一个新存储库，然后从旧项目中挑选文件。在剥离代码以匹配新项目所需的基本功能后，进行第一次提交以保持其历史记录中无用的东西。也许需要一些时间来实现这个目标。此外，无法合并旧项目中的增强功能。

*   分支旧代码并逐步适应它的新工作。这意味着这两个项目将纠缠在一个存储库中，该存储库具有一个名称，一个 GitHub 上的 README 等。

*   创建新项目，从最小的主要部分和另一个库项目开始，作为旧项目和新项目的公共集合。然而，随着 HTML 和 JS 的开发，这让人很头疼，因为在 JS 中导入很复杂，在 HTML 中是不可能的，需要拉两个 repo 来让每个项目运行等等。

你会怎么做？是否有任何 GIT 技巧可以支持我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T14:05:15.640

我会做什么（我的术语可能与svn有关）......

A.新建一个仓库，把已有的代码作为一个分支

B. 开始对该分支本身的初始开发......

C. 一旦你觉得分支可以作为新项目的基础，就将它移到主干中......

这是一种另类的方式，但可以让您尽可能保持行李箱清洁。由于它是迁移的代码，因此完整的清理过程将需要多次发布......但尝试应该以尽可能干净的方式开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T14:09:46.423

我会做什么（我确实使用 Git）。如下：

1.  查看旧项目。
2.  为我的新项目创建一个全新的存储库。
3.  将两个项目分开，以免旧的支持文件、配置等污染项目。这对于像 iOS 这样的东西来说可能是一个真正的痛苦。
4.  根据需要将我正在重用代码的旧项目中的位移动到新项目中。

除非项目基本相似，否则我发现采摘樱桃比试图从旧项目中卸下所有不必要的包袱容易得多。

我刚刚概述的策略不需要特殊的 Git 工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T14:17:56.290

也许这与其说是版本控制问题，不如说是重构问题。听起来可能有足够的共享代码可以将通用功能提取到它自己的项目中，您可以在其他项目中引用（通过`git-subtree`或`git-submodule`）。这样，如果您确实对共享代码进行了修复/改进，您的所有项目都可以受益。

# html - 字体在浏览器中呈现不均匀

> ID：11915288
> 
> 赞同：1
> 
> 时间：2012-08-11T13:58:01.947
> 
> 标签：html, css, fonts

我正在尝试在我的网站上使用自定义字体，在 css 中我有以下代码：

```
@font-face {
    font-family: 'Sketch';
    src: url('../fonts/Sketch.eot');
    src: url('../fonts/Sketch.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
}
ul#holder {font-family:'Sketch'} 
```

字体确实在 Firefox 中出现。在 chrome 中，字体似乎没有平滑渲染，并且看起来不如 firefox 好（我应该放弃在侧边栏中使用字体的想法并使用显示平滑文本的图像吗？;-/）

在 IE 中，字体根本没有出现。应该怎么做才能在 Chrome 中适当地平滑这些字体并让它们在 IE 中工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-11T14:02:31.553

不同的浏览器支持不同的字体格式：

![字体格式](../Images/f5e904b49219fa70528e2872a87b4fc6.png)

所以你需要创建所有格式的字体。您可以使用[Font Squirrel](http://www.fontsquirrel.com/fontface/generator)（谢谢，**effectica**）。

然后，您可以像这样导入它们：

```
@font-face {
    font-family: 'Comfortaa Regular';
    src: url('Comfortaa.eot');
    src: local('Comfortaa Regular'), 
         local('Comfortaa'), 
         url('Comfortaa.ttf') format('truetype'),
         url('Comfortaa.svg#font') format('svg'); 
} 
```

这不是唯一可能的方法。您可以在 Paul Irish 的博客上找到有关此问题的[更完整信息。](http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/)

而且，无论如何，它们的外观在不同的浏览器中可能会有所不同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-11T14:16:08.160

所有主要浏览器的字体渲染引擎/技术都略有不同，并且渲染输出的质量也不同。因此，您的字体在各种浏览器之间不太可能是“像素完美”的，并且会出现一些质量差异。哪个最终看起来最好取决于字体。我有一个字形字体，在 Chrome 和 IE 上看起来很棒，但在 Firefox 中看起来有点褪色......

无论如何，有一个小技巧可以帮助您让字体在 IE 上工作，请参阅第二条 src 行。这是必要的，因为虽然添加额外的字体格式可以确保支持每个浏览器，但不幸的是它会导致 IE9 之前的 IE 版本出现问题。那些较旧的浏览器将第一个 url(' 和最后一个 ') 之间的所有内容视为单个 URL 请求，因此将无法加载字体。这个 hack 让浏览器认为 src 属性的其余部分是该查询字符串的参数，因此它会寻找正确的 URL 并加载字体：

```
@font-face {
    font-family: 'Sketch';
    src: url('../fonts/SketchRockwell.eot');
    src: url('../fonts/SketchRockwell.eot?#iefix') format('embedded-opentype'),
         url('../fonts/SketchRockwell.woff') format('woff'),
         url('../fonts/SketchRockwell.ttf') format('truetype'),
         url('../fonts/SketchRockwell.svg#countersoftfontRegular') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

以上来自 Font Squirrel 的 @font-face Kit Generator，可在[http://www.fontsquirrel.com/fontface/generator 访问](http://www.fontsquirrel.com/fontface/generator)。在那里，您可以上传您的字体并将其转换为您希望的任何格式。您还可以控制它输出的 CSS 语法，对字符进行子集化以减小文件大小，并使用更多选项来微调字体

此外，如果您要在文本上使用粗体或斜体，那么您需要包含相应更改字体粗细和字体样式的规则版本，以便浏览器在遇到 CSS 时知道使用什么字体规则与粗体在它。

每种字体通常都有一个设计目的，并且是为特定的工作而创建的。大多数商业字体并非设计用于在屏幕上以小尺寸查看，因此在许多情况下，将这些 @font-face 保留为标题并继续使用网络安全字体（如 Georgia 和 Lucida）作为正文是最有意义的。

可能影响易读性的字体的另一个方面是它们是如何消除锯齿和提示的。现在，网络字体的边缘通常比传统字体更锯齿，即使是抗锯齿，通常是因为大多数字体不是为在屏幕上查看而设计的。更高质量的字体，以及为网络设计的字体，有更好的提示，

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-11T14:05:23.770

这是创建可嵌入字体包的绝佳 URL：

[http://fontface.codeandmore.com/](http://fontface.codeandmore.com/)

上传您的 TTF 或 OTF 字体，它会为您创建整个字体工具包，包括实现 HTML 和 CSS 示例。

干杯!

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-11T14:09:50.570

爱德华全都说了。Chrome 曾经因为它显示某些字体的方式让我发疯。

如果您有字体文件，您可以使用[字体松鼠](http://www.fontsquirrel.com/fontface/generator)来生成代码以及所有浏览器所需的所有字体文件。

# c - 睡眠函数是让所有线程睡眠还是只让调用它的线程睡眠？

> ID：11915292
> 
> 赞同：10
> 
> 时间：2012-08-11T13:59:10.447
> 
> 标签：c, multithreading, pthreads, sleep, thread-sleep

我在 linux(Centos) 上使用 pthread 编程？我想让线程睡眠一小段时间以等待某些事情。我正在尝试使用 sleep()、nanosleep() 或 usleep() 或者某些东西可以做到这一点。我想问一下：睡眠函数是让所有线程睡眠还是只让调用它的线程睡眠？任何建议或参考将不胜感激。

```
void *start_routine () {
    /* I just call sleep functions here */
    sleep (1); /* sleep all threads or just the one who call it? 
                  what about nanosleep(), usleep(), actually I 
                  want the threads who call sleep function can 
                  sleep with micro-seconds or mili-seconds.  
               */
    ...
}

int main (int argc, char **argv) {
    /* I just create threads here */
    pthread_create (... ...);
    ...
    return 0;
} 
```

* * *

我的测试程序：

```
#define _GNU_SOURCE
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>
#include <sched.h>
#include <unistd.h>

void *start_routine (void *j) {

    unsigned long sum;
    int i;
    int jj;
    jj = (int)j;
    do {
        sum = 1;
        for (i=0; i<10000000; i++) {
            sum = sum * (sum+i);
        }
        if (jj == 0) {
            printf ("\033[22;33m[jj%d.%ld]\t", jj, sum);
            sleep(1);           
        }
        else {
            printf ("\033[22;34m[jj%d.%ld]\t", jj, sum);
        }

    }while (1);

    pthread_exit((void *)0);
}
int main(int argc, char *argv[])
{
    cpu_set_t cpuset;
    pthread_t thread[2];
    int i;
    i = 0;
    CPU_ZERO(&cpuset);
    CPU_SET(i, &cpuset);

    pthread_create (&thread[0], NULL, start_routine, (void *)i);
    pthread_setaffinity_np(thread[0], sizeof(cpu_set_t), &cpuset);
    i = 1;
    CPU_ZERO(&cpuset);
    CPU_SET(i, &cpuset);
    pthread_create (&thread[1], NULL, start_routine, (void *)i);
    pthread_setaffinity_np(thread[1], sizeof(cpu_set_t), &cpuset);
    pthread_exit (NULL);
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-11T14:01:50.367

[标准](http://pubs.opengroup.org/onlinepubs/9699919799/functions/sleep.html)是这样写的：

> sleep() 函数将导致**调用线程**暂停执行，直到 ....

[linux](http://www.kernel.org/doc/man-pages/online/pages/man3/sleep.3.html)的也很清楚：

> `sleep()`使调用线程休眠直到...

然而，有一些错误的引用保持不变。linux.die.net 用于声明`sleep`导致*进程*等待。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-11T14:01:23.753

只是调用函数的线程。

# css - 来自 3 张图片的 QPushbutton 背景图片

> ID：11915296
> 
> 赞同：0
> 
> 时间：2012-08-11T14:00:10.417
> 
> 标签：css, qt

我有一个按钮的三个背景图像 - left.png、center.png 和 right.png。左右两边的边缘是圆角的，中间是一条线，需要根据按钮的大小进行延伸。如何创建这样的按钮？我已经考虑过动态构建图像并将其应用于调整大小事件中的按钮的选项，但我希望通过样式表看看这是否可能。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T15:58:41.170

你不能单独使用 background-image 来做到这一点。但它可以在以下帮助下完成：http `border-image`: [//qt-project.org/doc/qt-4.8/stylesheet-reference.html#border-image](http://qt-project.org/doc/qt-4.8/stylesheet-reference.html#border-image)

用于`background-repeat: repeat-x`填充按钮并使`border-image`边缘变圆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T16:14:59.400

您*可以*使用 QPainter 并构建图像来完成它，但老实说，对于复杂性级别和按钮类，您最好通过使用标准原语完全构建一个paintEvent 来学习如何做到这一点。它会给你更好的细粒度控制，只需要一些腿部工作。

# c++ - C++：更改指针字符串的值

> ID：11915302
> 
> 赞同：2
> 
> 时间：2012-08-11T14:01:04.220
> 
> 标签：c++, arrays, string, pointers

有件事困扰了我一段时间，我需要一个答案，

```
char *p = "hello world";
p="wazzup";
p="Hey"; 
```

在这里，我声明了一个指向字符串的指针（或者换句话说，我使用指针创建了一个字符串）

我有一些奇怪的结果，如果我使用 char 数组字符串，我通常不会得到

```
cout <<p<< endl; //"Hey" Gets printer
cout <<p+8<< endl; // I kept adding numbers till "wazzup" got printed
cout <<p+29<< endl; // No matter how much I increment, I cant print "Hello World" 
```

所以我的问题是：

当我更改 char 指针指向的值时。可以

*   像使用 char 数组一样覆盖原始数据；

*   或者它在内存中创建一个新字符串并指向它；

*   还是在旧字符串的开头添加新字符串（包括null）；

*   还是它会在内存中的新位置创建一个新字符串，而我只能偶然打印“wazzup”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T14:09:20.993

它不执行上述任何选项。改变指针的值只是改变它指向的内存地址。在分配给 的每种情况下`p`，它都被设置为指向（不同的）字符串文字的第一个字符 - 它存储在内存中。

使用指向超出字符串文字末尾的指针的行为，例如

`cout <<p+8<< endl`

未定义。这就是使用指针充满危险的原因。

您看到的行为取决于实现：编译器将字符串文字相邻存储在内存中，因此从一个结尾运行到另一个。当使用不同的编译器编译时，您的程序可能同样崩溃。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T14:10:54.947

通过添加到指针，您正在增加地址值......所以在打印时它将打印存储在该内存位置的值，而不是其他......

如果你能打印

```
"hello world"
"wazzup" 
```

那将是**侥幸**:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T14:09:40.163

所有这三个都是字符串文字常量。它们直接出现在可执行文件的二进制文件中，每次分配`p`时，您都指向内存中的这些位置。它们是完全独立的内存；重新分配`p`给另一个不会修改任何字符串数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-11T14:09:43.753

每次分配给它时，您只是使指针指向其他东西。因此，任何地方都没有数据被覆盖的余地。幕后发生的事情取决于实现，因此您所看到的纯属偶然。当你这样做时：

```
cout <<p+8<< endl; 
```

您正在超出字符串文字的范围，调用未定义的行为。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-11T14:11:11.943

当我更改 char 指针指向的值时。可以

- 像使用 char 数组一样覆盖原始数据。不，地址空间的数据部分包含所有三个字符串“Hello World”、“wazzup”和“Hey”。当您更改指针时，您只是将 p 中的值更改为上述任一字符串的起始地址。更改指针指向的地址和更改指针指向的值是两件不同的事情。

- 或者它在内存中创建一个新字符串并指向它。编译器在编译时而**不是**在运行时创建字符串（字符字节）。

- 或者它是否在内存中的新位置创建了一个新字符串，我只能偶然打印“wazzup”，我认为上面的答案涵盖了这个问题。

- 还是在旧字符串的开头添加新字符串。（包括 null）这取决于编译器规范。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-11T14:12:01.420

这三个字符串不在同一个内存位置。这三个内存可能是连续的或不同的位置。如果编译器分配三个内存，那么您会使用 +/- 某个值找到它。这完全取决于编译器。在 c 中，您可以准备好任何内存位置，这样您就不会在 +/- 然后指针 p 时出现任何错误。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-11T14:06:54.237

由于它们 3 不是相同的字符串，因此它们位于内存的不同部分。我认为它们可以通过 64 字节对齐来分隔。试试 p+64 :)

只有相同的字符串位于相同的内存位置，并且只有编译器支持它。

在 p+64 有一个概率“wazzup”，在 p+128 有一个概率“嘿”（如果你使用 VC++ 2010 express 并且你有 pentium-m cpu 并且你使用 windows xp sp-3）

```
cout <<*(p+64)<< endl;
cout <<*(p+128)<< endl; 
```

# c# - PROD环境下使用Redis Win64端口

> ID：11915303
> 
> 赞同：1
> 
> 时间：2012-08-11T14:01:09.527
> 
> 标签：c#, redis, production

几周以来，我一直在使用带有 ServiceStack.Redis 客户端（在 C# 中）的 Redis win64 端口，它让我非常钦佩。
我看到使用 Redis 获得的显着性能提升让我想到将我的 Web 应用程序缓存转移到 Redis。
到目前为止，我还没有遇到任何问题，我的 Web 应用程序使用 Redis 进行缓存运行平稳，性能提升明显。响应时间大大缩短，我的应用程序测试人员对此非常满意。

**现在我计划更进一步并将其移至生产环境。在此之前，我想知道：**

*   如果在 PROD 环境中使用 Redis win64 端口是好的，或者这样做仍然有一些问号。
*   如果我选择参加 PROD，有什么建议吗？
*   StackExchange 如何使用 Redis？

期待一些好的反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T14:16:42.467

开发人员的[官方说法](http://redis.io/topics/introduction)听起来有点像你自己。

***尽管您可能有一些选择，但没有对 Windows 版本的官方支持。***

至于官方支持的 Windows 版本，你似乎不走运，但为了将来参考，[微软正在开发一个 Windows 版本](https://github.com/MSOpenTech/Redis#readme)，但它目前处于原型阶段，还有[其他选项](https://github.com/dmajkic/redis#readme)，但他们似乎目前引用回微软的原型即将到来的官方支持的端口。

您最好的支持选项似乎 - 就像我所知道的所有生产部署一样 - 现在是在 linux 上运行 Redis。

# java - Java mac os x dock 应用程序名称设置不起作用？

> ID：11915304
> 
> 赞同：4
> 
> 时间：2012-08-11T14:01:20.397
> 
> 标签：java, macos

我尝试在我的 Java 程序中设置 Mac OS X 扩展坞的应用程序名称和图标。我使用了以下代码：

```
public static void main(String[] args)
{
    Application.getApplication().setDockIconImage(icon); // Dock icon
    System.setProperty("com.apple.mrj.application.apple.menu.about.name", "Alfabet"); // Program name

    new UpdateChecker(); // Check for an update
    new Alfabet(); // Start the program
} 
```

对象“图标”是一个 java.awt.Image。Alfabet 类创建程序的主 JFrame。图标显示正确，但应用程序名称不显示，它仍然显示程序主类的名称。我究竟做错了什么？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T14:26:41.323

目前还不清楚哪里出了问题，但这里有一个完整的工作示例[供](https://stackoverflow.com/a/8956715/230513)参考。

或者，尝试从命令行设置名称：

```
java -Xdock:name=Alfabet 
```

另请参见[*初始线程*](http://download.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)。

# java - 使用组合（java）时如何实现关闭开关？

> ID：11915306
> 
> 赞同：3
> 
> 时间：2012-08-11T14:01:20.627
> 
> 标签：java, design-patterns, composition

我在 java 中有一个非常简单的*Player*类，它使用一些策略对象，这些对象都继承自接口*PlayerStrategy*。

*PlayerStrategy*的一些实现很简单，但其他一些实现非常耗费资源，我需要确保在策略停止使用时正确释放资源。这些策略有一个额外的方法：turnOff() 可以解决这个问题。

现在，如果 Player 离开游戏，我希望它在所有需要它的策略中调用 turnOff()。

问题是只有少数策略需要 turnOff() ，所以我觉得将该方法添加到*PlayerStrategy*接口并不方便。
现在，当 Player 停止播放时，它会通过反射检查其策略中是否存在方法 turnOff()。但它又笨又丑。有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T14:07:35.247

1.  **避免反思：**反思是个坏主意。只要你能（而且看起来你可以），尽量避免。

2.  **有接口很好`turnOff()`：**如果你必须使用接口......相信我添加`turnOff()`或`cleanup()`方法是个好主意；即使大多数子类只有空的大括号。如果它们将来更新以使用需要清理的某些资源，您将不需要做额外的工作。

3.  **你可以得到你想要的，但成本更高：**如果你真的很死板并且确定子类不会扩展任何其他类。您可以使用空方法创建`PlayerStrategy`一个抽象类。`turnOff()`这将解决您的问题，但会限制子类扩展其他类的能力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T14:51:38.080

如果您不想更改 PlayerStrategy 的实现，可以使用[外观模式](http://en.wikipedia.org/wiki/Facade_pattern)来处理关闭。

# c# - html5和C# web socket通信之间

> ID：11915309
> 
> 赞同：1
> 
> 时间：2012-08-11T14:01:36.343
> 
> 标签：c#, javascript, html, sockets, websocket

尝试使用此代码将字符串数据发送到 windows c# 应用程序；

```
try {
    var ws = new WebSocket('ws://192.168.1.77:10048');
    ws.onopen = function () {
        ws.send("Sunucuya mesaj"); // I WANT TO SEND THIS MESSAGE TO SERVER!
    };

    ws.onclose = function () {
        alert('Bağlantı kapandı.');
    };
}
catch (e) {
    alert(e);
} 
```

并尝试使用此代码从 windows c# 应用程序获取数据；

```
static Socket serverSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.IP);
static private string guid = "258EAFA5-E914-47DA-95CA-C5AB0DC85B11";
serverSocket.Bind(new IPEndPoint(IPAddress.Any, 8181));
serverSocket.Listen(128);
serverSocket.BeginAccept(null, 0, OnAccept, null);

private static void OnAccept(IAsyncResult result)
{
    byte[] buffer = new byte[1024];
    try
    {
        Socket client = null;
        string headerResponse = "";
        if (serverSocket != null && serverSocket.IsBound)
        {
            client = serverSocket.EndAccept(result);
            var i = client.Receive(buffer);
            headerResponse = (System.Text.Encoding.UTF8.GetString(buffer)).Substring(0, i);
            // write received data to the console
            Console.WriteLine(headerResponse);

        }
        if (client != null)
        {

            var key = headerResponse.Replace("ey:", "`")
                      .Split('`')[1]                     // dGhlIHNhbXBsZSBub25jZQ== \r\n .......
                      .Replace("\r", "").Split('\n')[0]  // dGhlIHNhbXBsZSBub25jZQ==
                      .Trim();

            // key should now equal dGhlIHNhbXBsZSBub25jZQ==
            var test1 = AcceptKey(ref key);

            var newLine = "\r\n";

            var response = "HTTP/1.1 101 Switching Protocols" + newLine
                 + "Upgrade: websocket" + newLine
                 + "Connection: Upgrade" + newLine
                 + "Sec-WebSocket-Accept: " + test1 + newLine + newLine
                //+ "Sec-WebSocket-Protocol: chat, superchat" + newLine
                //+ "Sec-WebSocket-Version: 13" + newLine
                 ;

            // which one should I use? none of them fires the onopen method
            client.Send(System.Text.Encoding.UTF8.GetBytes(response));

            var i = client.Receive(buffer); // wait for client to send a message

            // once the message is received decode it in different formats
            Console.WriteLine(Convert.ToBase64String(buffer).Substring(0, i));

            Console.WriteLine("\n\nPress enter to send data to client");
            Console.Read();

            var subA = SubArray<byte>(buffer, 0, i);
            client.Send(subA);
            Thread.Sleep(10000);//wait for message to be send

        }
    }
    catch (SocketException exception)
    {
        throw exception;
    }
    finally
    {
        if (serverSocket != null && serverSocket.IsBound)
        {
            serverSocket.BeginAccept(null, 0, OnAccept, null);
        }
    }
} 
```

使用此代码，我可以在客户端和服务器之间进行通信，但无法获取**ws.send("Sunucuya mesaj");** 从客户端发送的来自服务器的消息。**headerResponse = (System.Text.Encoding.UTF8.GetString(buffer)).Substring(0, i);** 在这一行中，您可以看到从服务器获取的标头；

*GET / HTTP/1.1
升级：websocket
连接：升级
主机：192.168.1.77 :8181
来源：`http://localhost`
Sec-WebSocket-Key：dHI34r7feV/Ar4G0/fONCg==
Sec-WebSocket-Version：13
Sec-WebSocket-Extensions：x-webkit-放气框架*

**如何从服务器端获取来自客户端的数据？**

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T15:39:47.210

客户端和服务器之间的消息不是纯文本。有关如何编码/解码消息的详细信息，请参阅协议规范的[数据帧部分。](https://www.rfc-editor.org/rfc/rfc6455#section-5)

有几个获得自由许可的开源 C# 服务器可以从中获取示例。比如[斑点](https://github.com/statianzo/Fleck/blob/master/src/Fleck/Handlers/Hybi13Handler.cs)

# html - 流浪的 HTML 评论元素在旧浏览器上破坏 Wordpress 网站

> ID：11915315
> 
> 赞同：0
> 
> 时间：2012-08-11T13:44:36.027
> 
> 标签：html, cross-browser, wordpress-theming

所以我决定今天在一台旧电脑上查看我的网站，令我惊恐的是，它唯一显示的东西是一个孤独的

```
<!--> 
```

哦亲爱的。这是有问题的网站：http: [//vibrolabs.com](http://vibrolabs.com)

所以我查看了源代码，我相信我发现了一个未捕获的 HTML 评论，它基本上评论了我的整个网站。这在较新的浏览器上不是问题，但不适用于 Ubuntu 8.04 上的 Firefox 3.6.17

```
<!--[if lt IE 9]>
<script src="http://vibrolabs.com/wp-content/themes/twentyeleven/js/html5.js" type="text/javascript"></script>
<![endif]-->
<!--[if lte IE 8]>
<div id="fb-root" style="width: 90;"></div> 

<!--<![endif]-->

<!-- SEO Ultimate (http://www.seodesignsolutions.com/wordpress-seo/) -->
<meta property="og:type" content="video.other" />
<meta property="og:title" content="Home" />
<meta property="og:url" content="http://vibrolabs.com/" />
<meta property="og:image" content="http://vibrolabs.com/wp-content/uploads/2012/08/vibro-3.jpg" />
<meta property="og:site_name" content="Vibro Labs" />
<meta property="fb:app_id" content="1221720181" />
<meta name="twitter:card" content="summary" /> 
```

如果您查看单独的 [endif] 行，您将看到一个未捕获的注释（我认为它们在 HTML 中称为注释）。

关于从哪里开始的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T04:08:08.047

在你的 twnetyeleven-child 主题的 header.php 中查找错误的注释行。如果子主题中没有 header.php，请查看父主题的 header.php。

除其他外，它会引发验证错误，这可能会导致 Firefox：[[Invalid] Markup Validation of vibrolabs.com - W3C Markup Validator](http://validator.w3.org/check?uri=http%3A//vibrolabs.com/&doctype=Inline&ss=1&group=0&user-agent=W3C_Validator/1.654)。在验证报告中向下滚动以查看行号和源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T14:49:52.970

由于插件“Jamie Social Icons”，我刚刚遇到了这个问题。

罪魁祸首条件注释位于我的 jamie-social_icons.php 的第 126 行。

如果您更改，问题将自行解决

```
<!--[if lte IE 8]> 
```

成为

```
<!--[if lte IE 8]><!--> 
```

由于直接更新插件文件会导致您在任何插件更新时丢失修复，因此实现持久的更正非常重要。

您会注意到有问题的代码位于 jamie_add_my_scripts() 的函数定义中。

该插件在**'wp_enqueue_scripts'**和**'admin_enqueue_scripts'**挂钩上使用 add_action。

在您的 functions.php 文件或您可以控制的其他文件中，放置以下覆盖代码：

```
remove_action( 'wp_enqueue_scripts', 'jamie_add_my_scripts' );
remove_action( 'admin_enqueue_scripts', 'jamie_add_my_scripts' );
add_action( 'wp_enqueue_scripts', 'jamie_override_scripts' );
add_action( 'admin_enqueue_scripts', 'jamie_override_scripts' );
function jamie_override_scripts () {?>
<?php $options = get_option( 'jamie_social_options' ); if($options['insights'] == true){ ?>
<meta property="fb:admins" content="<?php echo $options['insights']; ?>" />
 <?php } ?>
<?php if($options['lang'] == 'eng'){
$locale = 'en_GB';
} else if($options['lang'] == 'esp'){
$locale = 'es_ES';
} else if ($options['lang'] == 'pt'){
$locale = 'pt_PT';
} else if ($options['lang'] == 'de'){
$locale = 'de_DE';
} else if ($options['lang'] == 'fr'){
$locale = 'fr_FR';
} else {?>
<?php include( WP_PLUGIN_DIR . '/jamie-social-icons/locale/locale.php');?>
<?php } ?>
     <!--[if lte IE 8]><!-->
<div id="fb-root" style="width: 90;"></div>
<?php
wp_enqueue_script(
        'fb_ie8',
        'http://connect.facebook.net/'.$locale.'/all.js#xfbml=1');
        ?>
<!--<![endif]-->
<?php   wp_enqueue_script(
        'jamiesocial_tracking',
        plugins_url('/jamie-social-icons/js/googletracking.js')
    );
    wp_enqueue_script(
        'jamietwitterlinkedin',
        plugins_url('/jamie-social-icons/js/head_twitterlinkedin.js')
    );
} 
```

# android - AndEngine - 如何创建一个按钮？

> ID：11915317
> 
> 赞同：3
> 
> 时间：2012-08-11T14:02:17.247
> 
> 标签：android, andengine

昨晚，当我遇到 ButtonSprite 的问题时，我很兴奋。我本可以发誓我以前做过这个 - 看起来很简单 - 但是使用 AndEngineExamples 提供的代码并没有真正意义并且会出现错误（例如 - 为什么一个模糊的“run（）”方法会创建响应每一个触摸事件？）。

所以我做了一些似乎有意义的事情。

```
private void loadScenes()
{
    mainScene = new Scene();
    menu = new Sprite(0, 0, menuTextureRegion, mEngine.getVertexBufferObjectManager()){
        @Override
        protected void preDraw(GLState pGLState, Camera pCamera) 
        {
            super.preDraw(pGLState, pCamera);
            pGLState.enableDither();
        }
    };

    newgamebutton = new ButtonSprite(25, 200, newgameTextureRegion, mEngine.getVertexBufferObjectManager());
    multiplayerbutton = new ButtonSprite(25, 310, multiplayerTextureRegion, mEngine.getVertexBufferObjectManager());

    menu.setScale(1.65f);
    menu.setPosition((CAMERA_WIDTH - menu.getWidth()) * 0.5f, (CAMERA_HEIGHT - menu.getHeight()) * 0.5f);

    mainScene.attachChild(menu);
    mainScene.attachChild(newgamebutton);
    mainScene.attachChild(multiplayerbutton);

    mainScene.registerTouchArea(multiplayerbutton);
    mainScene.setTouchAreaBindingOnActionDownEnabled(true);

    multiplayerbutton.onAreaTouched(mButtonTouched, multiplayerbutton.getWidth(), multiplayerbutton.getHeight());

    if(mButtonTouched.isActionDown()) {
        mainScene.detachChild(menu);
        mainScene.detachChild(multiplayerbutton);
    }

} 
```

这似乎很有道理。当按下“多人游戏按钮”时，它会给你 mButtonTouched，当按下它时......它会分离菜单和多人游戏按钮。这显然只是我测试的东西，而不是任何实际项目的一部分，因为我只是在学习，但是我得到一个空指针异常，并且应用程序在显示“菜单场景”之前就关闭了，这显然是正常工作的。此外，在各个站点上，它说我应该在多人按钮之前放置“公共布尔值”，但 Eclipse 不会这样做。

我相信你们已经想通了，但我对 AndEngine 很陌生。感谢您的帮助，伙计们！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T08:52:38.063

查看代码后，我相信您想做这样的事情：

```
ButtonSprite button = new ButtonSprite(25, 310, multiplayerTextureRegion, mEngine.getVertexBufferObjectManager()) {
       @Override
       public boolean onAreaTouched(TouchEvent pTouchEvent, float pTouchAreaLocalX, float pTouchAreaLocalY) {
           if(pTouchEvent.isActionDown()) {
               mainScene.detachChild(menu);
               mainScene.detachChild(multiplayerbutton);
           }
           return super.onAreaTouched(pTouchEvent, pTouchAreaLocalX, pTouchAreaLocalY);
       }
}; 
```

您的代码不起作用，因为最后一个 if 语句实际上没有意义 - 它正在检查方法 loadScenes() 执行时是否按下按钮。我建议您阅读匿名内部类，我花了很长时间才弄清楚在 AndEngine 中使用它们是一种有效且有用的方法。

这是管理按钮的不同方式的原始示例：

```
mScene.setOnAreaTouchListener(new IOnAreaTouchListener() {
    @Override
    public boolean onAreaTouched(TouchEvent pSceneTouchEvent, ITouchArea pTouchArea, float pTouchAreaLocalX, float pTouchAreaLocalY) {
        if (pTouchArea.equals(button) {
            doSomething();
            return true;
        }
        return false;
    }
}); 
```

请注意，这仅在触摸 Shapes 时有效，如果您想检测 Shapes 之外的触摸事件，则需要使用 IOnSceneTouchListener 代替。

# sql - Sqlmap流量抓包

> ID：11915319
> 
> 赞同：6
> 
> 时间：2012-08-11T14:02:35.377
> 
> 标签：sql, sql-injection, penetration-testing, sqlmap

我试图了解 SQLmap 是如何工作的。

例如，[sqlmap](http://sqlmap.org/)在我的网站上发现注入 -

```
Place: GET
Parameter: selected
    Type: UNION query
    Title: MySQL UNION query (NULL) - 5 columns
    Payload: act=il&ed=1' LIMIT 1,1 UNION ALL SELECT CONCAT(0x3a6,0x579786e676651,0x373a), NULL, NULL, NULL, NULL# 
```

使用 SQLmap，我可以转储数据库，但是如何从浏览器中转储相同的数据库？我试图将以下链接放入浏览器，但它不起作用 -

```
http://www.site.com/index.php?act=il&ed=1' LIMIT 1,1 UNION ALL SELECT CONCAT(0x3a6,0x579786e676651,0x373a), NULL, NULL, NULL, NULL# 
```

我的浏览器根本没有得到任何结果。我尝试了不同的方式来放置 /**/ 和 + 等等，但很糟糕。

*   如何获取 Sqlmap 为渗透测试发送的链接？

*   如何通过此注入利用简单的 select version() 查询？

*   也许这真的行不通？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-28T02:49:48.447

我相信您可以尝试增加 sqlmap 查询的详细程度。

这应该是`-v=4`

以下是该功能的官方使用说明： [https ://github.com/sqlmapproject/sqlmap/wiki/Usage#output-verbosity](https://github.com/sqlmapproject/sqlmap/wiki/Usage#output-verbosity)

> 选项：-v
> 
> 此选项可用于设置输出消息的详细级别。存在七个级别的详细程度。默认级别为 1，其中显示信息、警告、错误、关键消息和 Python 回溯（如果发生）。
> 
> 0：仅显示 Python 回溯、错误和关键消息。
> 
> 1：同时显示信息和警告信息。
> 
> 2：同时显示调试消息。
> 
> 3：还显示注入的有效载荷。
> 
> 4：同时显示 HTTP 请求。
> 
> 5：还显示 HTTP 响应的标头。
> 
> 6：还显示 HTTP 响应的页面内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:42:38.510

您尝试的链接（除非存在复制和粘贴错误）不是有效的 URL，也不是实际 SQL 命令在浏览器中的转换方式。

如果您想知道 SQLmap 实际发送的内容，我建议您在相关接口上运行 tcpdump/tshark/wireshark 之一，以查看实际通过线路发送的内容。这是了解这些工具实际功能的最佳方式。例如，像

```
sudo tcpdump -s0 -Xnnpi eth0 -w /var/tmp/sqlmap.pcap port 80 
```

将工作。

另一方面，只需打开 Wireshark 并在`eth0`界面上捕获。实际流量将显示`Application Layer`在 Wireshark 中。

为了按照您的要求利用应用程序，您需要正确格式化您的 URL，以便正确编码，并且 Web 应用程序可以对其进行转换以将其发送到数据库。请参阅此[链接](https://www.owasp.org/index.php/Testing_for_SQL_Injection_%28OWASP-DV-005%29)以使用浏览器中的 URL 栏测试 SQL 注入，这是另一个[备忘单](http://ha.ckers.org/sqlinjection/)。

我相信`sqlmap`是有效的，它非常好。

免责声明：我相信您已获得合法授权进行此测试，或者它是在实验室环境中进行的。

# .htaccess - httacces 重写 URL

> ID：11915322
> 
> 赞同：0
> 
> 时间：2012-08-11T14:03:18.247
> 
> 标签：.htaccess, mod-rewrite

我想重写一些网址

www.example.ro/women_shoes.php 到 www.example.ro/women-shoes/ 并且分页看起来像 www.example.ro/women_shoes.php?page=1 到 www.example.ro/women_shoes/pagina-2 /

www.example.ro/men_shoes.php 到 www.example.ro/men-shoes/ 与第一个一样的分页

www.example.ro/sandale_barbati.php 到 www.example.ro/sandale-barbati/ 等等..

对于我尝试的最后一个示例

```
RewriteRule ^sandale-barbati/pagina-([0-9]+)/ /sandale-barbati.php?page=$1 [L]
RewriteRule ^sandale-barbati/?$ /sandale_barbati.php?$ 
```

但我需要为每一页都写...有没有办法自动为所有页面做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T14:26:12.987

如果您始终对所有页面使用相同的命名，这将起作用：

```
RewriteRule ^([a-zA-Z]+)([-_]){1}([a-zA-Z]+)/pagina-([0-9]+)/$ $1_$3.php?page=$4
RewriteRule ^([a-zA-Z]+)([-_]){1}([a-zA-Z]+)/$ $1_$3.php
RewriteRule ^([a-zA-Z_]+)/pagina-([0-9]+)/$ /$1.php?page=$2
RewriteRule ^([a-zA-Z_]+)/$ /$1.php

You can surf to /women_shoes/ and it will be the /women_shoes.php page.
You can surf to /women-shoes/ and it will be the /women_shoes.php page.
You can surf to the /shoes/ and it will be the /shoes.php page. 
```

我希望这已经满足了您的所有要求，并且对您有足够的帮助。为了将来参考，网站[http://www.regular-expressions.info/](http://www.regular-expressions.info/)在处理 RegEx（如 .htaccess 重写规则）时非常方便。

# php - OO PHP 未定义变量

> ID：11915327
> 
> 赞同：2
> 
> 时间：2012-08-11T14:04:18.727
> 
> 标签：php, oop, undefined

我正在尝试使用 OO PHP，但是当我尝试代码时，我收到错误消息，指出 dbhost、dbuser、dbpass 和 dbname 未定义。Netbeans 还给我一个警告，说它们可能未初始化。删除 static 关键字会给我一个错误，说 'Unexpected "$dbhost" '。有谁知道我做错了什么？

```
<?php
class DatabaseManager {

private static $dbhost = 'localhost';
private static $dbuser = 'root';
private static $dbpass = '';
private static $dbname = 'app_db';

public static function getConnection(){
    $dbconn;
    try {
    $dbconn = new PDO('mysql:host='.$dbhost,'dbname='.$dbname,
    $dbuser, $dbpass);
    } catch (PDOException $e) {
        echo "Could not connect to database";
        echo $e;
        exit;
    }
    return $dbconn;

}

}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T14:07:42.003

您已将变量声明为静态。在 php 5.2 或更高版本中像这样引用它们：

```
$dbconn = new PDO('mysql:host='.self::$dbhost,'dbname='.self::$dbname,
                   self::$dbuser, self::$dbpass); 
```

在 PHP 5.3 或更高版本中，如果您将它们从私有设置为受保护，您还可以使用：

```
$dbconn = new PDO('mysql:host='.static::$dbhost,'dbname='.static::$dbname,
                   static::$dbuser, static::$dbpass); 
```

它们的行为相似，但如果您扩展类，静态关键字允许后期静态绑定。

# r - 使 Sweave 或 knitr 将图形后缀放在 `\includegraphics{}` 中

> ID：11915328
> 
> 赞同：10
> 
> 时间：2012-08-11T14:04:23.260
> 
> 标签：r, latex, sweave, knitr

我只是遇到了一个（奇怪的）问题，当向一些 Elsevier 期刊提交（pdf）LaTeX 手稿时，需要完整的数字文件名才能通过他们的 pdf 构建和检查系统找到，即：

```
\includegraphics{picture.pdf} 
```

有没有简单方便的方法告诉 Sweave 或 knitr 这样做？

编辑：

*   我熟悉 sweave 的`include=FALSE`选项
*   我也觉得很能打补丁`utils:::RweaveLatexRuncode`

但是，目前我希望有更方便和优雅的东西。

它还涉及将 .Rnw 文件作为补充材料或插图分发。从教学的角度来看，我不喜欢这些使源代码对于我希望他们阅读它的新用户更加复杂的调整。

（这也是我非常欣赏最近`print=TRUE`在 Sweave 中引入的原因）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T14:48:16.010

蛮力解决方案是在 R 代码段中自己显式创建文件。将图形等选项设置为 false，但对代码进行评估以便创建文件，然后让乳胶使用`\includegraphics{}`您显示的调用来调用它们。

我为简单的缓存使用了类似的方案：如果目标文件存在，则跳过代码创建。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T04:35:45.760

`plot`您可以稍微修改钩子`knitr`以添加文件扩展名：

```
<<>>=
knit_hooks$set(plot = function(x, options) {
  x = paste(x, collapse = '.') # x is file.ext now instead of c(file, ext)
  paste0('\\end{kframe}', hook_plot_tex(x, options), '\\begin{kframe}')
})
@ 
```

有关完整示例，请参见[033-file-extension.Rnw](https://github.com/yihui/knitr-examples/blob/master/033-file-extension.Rnw)。要了解幕后发生的事情，[请](https://github.com/yihui/knitr/blob/master/R/hooks-latex.R)参阅`knitr`.

# php - iconv - 注意：iconv() [function.iconv]：在输入字符串中检测到非法字符

> ID：11915330
> 
> 赞同：1
> 
> 时间：2012-08-11T14:04:54.133
> 
> 标签：php, string, unicode, ascii, iconv

`print iconv('UTF-8', 'us-ascii//TRANSLIT', 'Ин Совет Россия, дог фес ю!');`

我不明白为什么它会抛出这个通知。该字符串是有效的 UTF8。

它应该将所有字符转换为它们的 ASCII 等价物，对吧？

例如`И`应该是`I`，`н`应该是`n`等等......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T18:08:18.190

该`iconv`函数实际上并不进行音译；参数名称`TRANSLIT`具有误导性。[文档](http://www.php.net/manual/en/function.iconv.php)说： “如果您将字符串 //TRANSLIT 附加到 out_charset 音译被激活。这意味着当一个字符不能在目标字符集中表示时，它可以通过一个或几个看起来相似的字符来近似。” 显然，这仅意味着一组临时映射，例如“€”到“EUR”，以及“ß”到“ss”。

对于音译，你需要一些不同的东西。要将俄语文本从西里尔字母音译为拉丁字母，困难的部分是决定使用哪种音译方案。在那之后，这只是原始的工作。像这样，只需添加数据（涵盖俄语中使用的西里尔字母的数组以及每个字母的所需音译）：

```
$msg =  'Ин Совет Россия, дог фес ю!';
$cyr = array('и', 'я');
$lat = array('i', 'ya');
$latmsg = str_replace($cyr, $lat, $msg);
print $latmsg; 
```

# php - 搜索时出现 Google Drive 内部服务器错误

> ID：11915339
> 
> 赞同：0
> 
> 时间：2012-08-11T14:05:35.117
> 
> 标签：php, google-drive-api

使用 q 参数搜索时出现错误：

php代码：

```
$parameters['q'] = "title = 'hello'"; 
$children = $service->children->listChildren('root',$parameters); 
```

返回：

> 致命错误：未捕获的异常“Google_ServiceException”和消息“调用 GET 时出错 [https://www.googleapis.com/drive/v2/files/root/children?q=title%20%3D%20%27hello%27](https://www.googleapis.com/drive/v2/files/root/children?q=title%20%3D%20%27hello%27) : (500 ） 内部错误'

我认为这与引号有关，因为如果我搜索 'trashed = false' 它会起作用

我正在使用从 [http://code.google.com/p/google-api-php-client/source/checkout签出的最新 api 客户端](http://code.google.com/p/google-api-php-client/source/checkout)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:11:37.623

当您没有请求正确的权限时，您会收到相同的错误消息。使用范围`https://www.googleapis.com/auth/drive`，而不是（仅）`https://www.googleapis.com/auth/drive.file`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:34:42.797

经过这么长时间再次尝试，现在可以正常工作了。

# javascript - JavaScript 到 CoffeeScript 错误

> ID：11915345
> 
> 赞同：2
> 
> 时间：2012-08-11T14:06:14.743
> 
> 标签：javascript, coffeescript

我有一个功能可以在单击最后一个复选框时切换所有其他复选框。

它在普通 JavaScript 中完美运行：

```
$(document).ready(function() {
  $('#manage').click(function(event) {   
      if(this.checked) {
          $('.checkbox:checkbox').each(function() {
              this.checked = true;                        
          });
      }
      if(!this.checked) {
          $('.checkbox:checkbox').each(function() {
              this.checked = false;                        
          });
      }
  });
}); 
```

[http://jsfiddle.net/PauaN/9/](http://jsfiddle.net/PauaN/9/)

但是，当我编译成 CoffeeScript（使用[http://js2coffee.org/](http://js2coffee.org/)）时，当复选框被关闭时，功能会中断：

```
$(document).ready ->
  $("#manage").click (event) ->
    if @checked
      $(".checkbox:checkbox").each ->
        @checked = true

    unless @checked
      $(".checkbox:checkbox").each ->
        @checked = false 
```

[http://jsfiddle.net/FRs5d/7/](http://jsfiddle.net/FRs5d/7/)

我认为这是因为第二个每个循环只运行一次。

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T14:25:52.993

问题如下。在转换后的脚本中，由 CoffeeScript 创建的隐式返回是`false`

```
unless @checked
  $(".checkbox:checkbox").each () ->
    @checked = false
    # here false is returned stopping the each function from continuing 
```

所以解决方案是`true`在函数的末尾添加

```
unless @checked
  $(".checkbox:checkbox").each () ->
    @checked = false
    true 
```

这个[小提琴](http://jsfiddle.net/afrxk/4/)展示了它的作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T14:25:55.847

发生两件事：

1.  Coffee Script 将 return 放在每个函数的末尾，因此 `@checked = true`更改为`return this.checked = true;`
2.  如果 Jquery 中的函数`each()`返回`false`，则它不会继续。

解决这个问题的方法是改变你的最后一行

```
@checked = false 
```

像这样：

```
@checked = false
return true 
```

# adobe-reader - 用于 IE 的 Acrobat PDF Reader 插件无法为特定 URL 加载

> ID：11915346
> 
> 赞同：0
> 
> 时间：2012-08-11T14:06:19.867
> 
> 标签：adobe-reader

我有一个应用程序需要使用 Acrobat PDF Reader 在浏览器中显示 PDF。我正在使用 Acrobat Reader X，它在工作时使用的 dll 是 AcroPDF.dll。我还安装了 Acrobat Reader X Standard 和常规 Reader。当应用程序处于舞台环境中时，一切正常，AcroPDF.dll 加载并且一切正常。但是，当应用程序处于生产环境中时，AcroPDF.dll 不会加载并且应用程序无法运行。除了 URL 之外，这两种环境之间没有区别。这两个 URL 都是将流量重定向到特定服务器的负载平衡器。更奇怪的是，当我们点击特定服务器 URL 而不是负载平衡器 URL 时，生产工作和 AcroPDF.dll 会加载。为什么加载不出来。为什么会发生这种情况，而且更好，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T14:11:32.827

您的负载均衡器 URL 似乎不在 Stage URL 的同一安全区域中，请参阅下面的 KB [http://support.microsoft.com/kb/174360](http://support.microsoft.com/kb/174360)

# html - HTML5 拖放事件

> ID：11915348
> 
> 赞同：0
> 
> 时间：2012-08-11T14:06:26.623
> 
> 标签：html

HTML5 拖放事件的行为如下：

1.  “拖动”从其位置移除被拖动的元素 - 我希望它即使在被拖动后仍然存在。

2.  drop 事件使用“appendchild”方法，它只是“附加”被删除的元素。但是我希望它被“添加”而不是“附加”。基本上，如果另一个元素被删除，那么它应该替换已经存在的元素而不是附加第二个元素。

这些要求可能吗？

问候，

阿比纳什。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-28T11:49:39.267

```
<head>
    <script>
        var dragSrcEl = null;

        function handleDragStart(e) {
          // Target (this) element is the source node.
          this.style.opacity = '0.4';

          dragSrcEl = this;

          e.dataTransfer.effectAllowed = 'move';
          e.dataTransfer.setData('text/html', this.innerHTML);

        }

        function handleDragOver(e) {
          if (e.preventDefault) {
            e.preventDefault(); // Necessary. Allows us to drop.
          }

          e.dataTransfer.dropEffect = 'move';  // See the section on the DataTransfer object.

          return false;
        }

        function handleDragEnter(e) {
          // this / e.target is the current hover target.
          this.classList.add('over');
        }

        function handleDragLeave(e) {
          this.classList.remove('over');  // this / e.target is previous target element.
        }
        function handleDrop(e) {
          // this/e.target is current target element.

          if (e.stopPropagation) {
            e.stopPropagation(); // Stops some browsers from redirecting.
            this.classList.remove('over');
          }

          // Don't do anything if dropping the same column we're dragging.
          if (dragSrcEl != this) {
            // Set the source column's HTML to the HTML of the column we dropped on.
            dragSrcEl.innerHTML = this.innerHTML;
            this.innerHTML = e.dataTransfer.getData('text/html');
          }

          return false;
        }

        function handleDragEnd(e) {
          // this/e.target is the source node.
          this.style.opacity = '1.0';
          [].forEach.call(cols, function (col) {
            col.classList.remove('over');
          });
        }
        function registerEvents()
        {
            var cols = document.querySelectorAll('#columns .column');
            [].forEach.call(cols, function(col) {
              col.addEventListener('dragstart', handleDragStart, false);
              col.addEventListener('dragenter', handleDragEnter, false)
              col.addEventListener('dragover', handleDragOver, false);
              col.addEventListener('dragleave', handleDragLeave, false);
              col.addEventListener('drop', handleDrop, false);
              col.addEventListener('dragend', handleDragEnd, false);
            });
        }
        window.onload = registerEvents;
    </script>
    <style>
        /* Prevent the text contents of draggable elements from being selectable. */
        [draggable] {
          -moz-user-select: none;
          -khtml-user-select: none;
          -webkit-user-select: none;
          user-select: none;
          /* Required to make elements draggable in old WebKit */
          -khtml-user-drag: element;
          -webkit-user-drag: element;
        }
        .column {
          height: 150px;
          width: 150px;
          float: left;
          border: 2px solid #666666;
          background-color: #ccc;
          margin-right: 5px;
          -webkit-border-radius: 10px;
          -ms-border-radius: 10px;
          -moz-border-radius: 10px;
          border-radius: 10px;
          -webkit-box-shadow: inset 0 0 3px #000;
          -ms-box-shadow: inset 0 0 3px #000;
          box-shadow: inset 0 0 3px #000;
          text-align: center;
          cursor: move;
        }
        .column.over {
          border: 2px dashed #000;
        }

        .column header {
          color: #fff;
          text-shadow: #000 0 1px;
          box-shadow: 5px;
          padding: 5px;
          background: -moz-linear-gradient(left center, rgb(0,0,0), rgb(79,79,79), rgb(21,21,21));
          background: -webkit-gradient(linear, left top, right top,
                                       color-stop(0, rgb(0,0,0)),
                                       color-stop(0.50, rgb(79,79,79)),
                                       color-stop(1, rgb(21,21,21)));
          background: -webkit-linear-gradient(left center, rgb(0,0,0), rgb(79,79,79), rgb(21,21,21));
          background: -ms-linear-gradient(left center, rgb(0,0,0), rgb(79,79,79), rgb(21,21,21));
          border-bottom: 1px solid #ddd;
          -webkit-border-top-left-radius: 10px;
          -moz-border-radius-topleft: 10px;
          -ms-border-radius-topleft: 10px;
          border-top-left-radius: 10px;
          -webkit-border-top-right-radius: 10px;
          -ms-border-top-right-radius: 10px;
          -moz-border-radius-topright: 10px;
          border-top-right-radius: 10px;
        }

    </style>
</head>
<body >
    <div id="columns">
        <div class="column" draggable="true"><header>A</header></div>
        <div class="column" draggable="true"><header>B</header></div>
        <div class="column" draggable="true"><header>C</header></div>
    </div>
</body> 
```

# django - Django不提供一些静态文件

> ID：11915360
> 
> 赞同：1
> 
> 时间：2012-08-11T14:07:43.727
> 
> 标签：django, django-staticfiles

我在使用 Django 时遇到了一个非常奇怪的问题，我`STATIC_URL`的 is`/static/`并且我已经安装了一个应用程序，使用`pip`as`-e git+git://github.com/foo/bar.git#egg=bar`将其加载到 virtualenv src 文件夹中。

现在，我正在尝试获取与此应用程序相关的静态文件，`/static/bar/js/something.js`并且 src 文件夹确实有一个`bar/bar/static/bar/js/something.js`文件。即使我`findstatic` `bar/js/something.js`给了我一个有效的文件路径。但是，当我使用浏览器访问它时，我会 301 访问`/static/bar/js/something.js/`哪个 404。

为什么会发生这种情况？

即使用应用程序四处`staticfiles`寻找，我也能够看到它识别出我的应用程序已安装并且它的`static`文件夹存在。但是不知何故，静态文件没有被提供。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T14:21:02.363

确保您已[设置 django 开发服务器来实际为您提供静态文件](https://docs.djangoproject.com/en/dev/howto/static-files/#serving-static-files-in-development)。

**网址.py**

```
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
# ... the rest of your URLconf goes here ...
urlpatterns += staticfiles_urlpatterns() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T14:14:45.427

尝试使用这个 urlpattern：

```
 url( r'(?P<path>.*)$', 'django.views.static.serve', {'document_root': '/path/to/file/'}), 
```

# mysql - sql 到 xml 和编码问题

> ID：11915361
> 
> 赞同：1
> 
> 时间：2012-08-11T14:07:49.083
> 
> 标签：mysql, xml, encoding, utf-8

我有一个 SQL 数据库，它的编码类型是 utf8。在显示数据并将数据插入 SQL 数据库的网页上，编码为 windows-1255。一切正常，所有字母都正确显示。问题是当我将 sql 数据库保存为 XML 文件并尝试查看它时，或者当我手动输入数据库时​​，我只看到奇怪的字母，例如：øðå。

有没有办法修复它？尝试将 XML 编码更改为 windows-1255 和 utf8，没有。

# android - 在 PC 上下载 Android ISO

> ID：11915363
> 
> 赞同：3
> 
> 时间：2012-08-11T14:08:21.780
> 
> 标签：android, android-source, iso, rom

我在哪里可以获得 PC 的 Android iso 文件。我想知道下载链接。请告诉我！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T17:42:24.390

Android-x86.org 具有现成且合法可用的 Android ISO 映像，可在笔记本电脑/PC/平板电脑上运行......也有来自其他人的开源基础的构建：tabletsx86.org / android-x86.sceners.org / ETC。

论坛在这里：[http ://groups.google.com/group/android-x86](http://groups.google.com/group/android-x86)

android-x86.org iso 在这里：[http ://www.android-x86.org/download](http://www.android-x86.org/download)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-11T14:13:38.480

没有现成且合法可用的 Android ISO 映像。

联想、戴尔、华硕等所有设备制造商都有其 ISO 版本，仅适用于各自的硬件。

我想你会想要制作自己的 Android 版本。这可以通过获取最新的 Android 源代码并在您的设备上构建它来完成。实际上，设置非常简单。我用 Linux VirtualBox 完成了它。但请注意，构建最多可能需要 4 小时 :)

更详细的说明可以在这里找到：[Android 开源项目](http://source.android.com/source/initializing.html)

# javascript - 检索 Chrome 中打开了哪些标签页？

> ID：11915370
> 
> 赞同：11
> 
> 时间：2012-08-11T14:09:07.057
> 
> 标签：javascript, tabs, google-chrome-extension

有没有办法检索所有打开的选项卡并将它们排序到 Chrome 中的数组中？因此，如果 Gmail 和 YouTube 处于打开状态，则数组中将有两个条目分别命名为“gmail.com”和“youtube.com”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-11T19:02:17.503

是的，您可以这样做：

**注意：**这需要在清单文件中指定权限“选项卡”。

```
chrome.windows.getAll({populate:true}, getAllOpenWindows);

function getAllOpenWindows(winData) {

  var tabs = [];
  for (var i in winData) {
    if (winData[i].focused === true) {
        var winTabs = winData[i].tabs;
        var totTabs = winTabs.length;
        for (var j=0; j<totTabs;j++) {
          tabs.push(winTabs[j].url);
        }
    }
  }
  console.log(tabs);
} 
```

在此示例中，我只是按照您在数组中的要求添加选项卡 url，但每个“选项卡”对象都包含更多信息。Url 将是完整的 URL，您可以应用一些正则表达式从 URL 中提取域名。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-11T14:18:04.540

除非您正在构建插件，否则我知道要检索打开选项卡的所有名称，尤其是如果选项卡包含单独的域中的内容。如果你能做这样的事情，那可能是一个相当大的安全问题！

您可以在此处查看 Chrome 文档：http: [//developer.chrome.com/extensions/devguide.html](http://developer.chrome.com/extensions/devguide.html)

# javascript - 如何为 FOR LOOP 中的变量名分配索引？

> ID：11915372
> 
> 赞同：0
> 
> 时间：2012-08-11T14:09:22.710
> 
> 标签：javascript

如何为变量名分配索引？例如，project0、project1、project2 等？

```
for (var i=0; i<data.length; i++)
{
    var project+i = new GanttProjectInfo(1, "Applet redesign", new Date(2010, 5, 11));
    var parentTask+i = new GanttTaskInfo(1, "Old code review", new Date(2010, 5, 11), 208, 50, "");
    project1.addTask(parentTask+i);
    // Load data structure        
    ganttChartControl.addProject(project+i);
    // Build control on the page
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T14:18:15.563

正如@JaredFarrish 建议的那样，您可以简单地使用数组来存储所有项目。在变量被覆盖之前创建它们并将它们添加到数组中：

```
var projects = [];
for (var i = 0; i < data.length; i++) {
    var project = new GanttProjectInfo(1, "Applet redesign", new Date(2010, 5, 11));
    var parentTask = new GanttTaskInfo(1, "Old code review", new Date(2010, 5, 11), 208, 50, "");
    project.addTask(parentTask);
    ganttChartControl.addProject(project);

    // Push this project to the array to save it
    projects.push(project);
}

// Need to access the first project?
projects[0].foo(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T14:32:18.307

使用 eval()

eval(("变量名" + i) + " = " + 5 + i);

但并不真正推荐使用 eval ，总有办法解决你想做的事情。

# sql - SQL，连接两个表。ID 在 table1 中唯一，但在 table2 中重复。从基于 table2 的记录的字段中选择要包含的记录

> ID：11915373
> 
> 赞同：2
> 
> 时间：2012-08-11T14:09:31.920
> 
> 标签：sql, ms-access

我正在尝试根据帐户 ID 连接两个表中的所有字段。帐户 ID 在表 1 中是唯一的，但在表 2 中重复。在表 2 中，我只想为每个 ID 提取一条记录。

表格1：

```
ID...Field1....Field2

1......aa.........bb  
2......cc.........dd  
3......ee.........ff  
4......gg.........hh 
```

表 2：

```
ID...Field3....Field4......Field5

1.....123........123...........123  
1.....345........546...........453   
2.....123........123...........123  
3.....123........123...........123  
4.....123........123...........722   
4.....123........123...........333  
4.....123........123...........123 
```

我需要根据三个字段中的值从表 2 中选择要提取的 ID。逻辑是这样工作的。在重复项中，选择field3中值最高的ID记录，如果都相同，则选择field4中值最高的记录，如果仍然相同，则选择field4中值最高的记录字段 5。

所以最终结果看起来像这样：

```
ID....Field1.....Field2.....Field3.....5ield4.....Field5   
1........aa..........bb............345.......546.........452   
2........cc..........dd............123.......123.........123   
3........ee..........ff............123.......123.........123   
4........gg..........hh............123.......123.........722 
```

太感谢了！这个让我难倒了一段时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T18:35:55.640

jdevelop 有一个好主意，但它没有考虑到 field3 需要优先于 field4 等的事实。

我不相信访问中有行号，这会大大简化事情。我已经很长时间没有使用访问权限了，因此您可能需要修改以下内容，但它应该可以让您几乎一直到那里。如果这是一次努力，那么您可能可以排序然后添加一个自动编号字段。如果不：

```
SELECT a.id, d.field3, d.field4, max(d.field5) as m_field5
FROM (((Table1 a
INNER JOIN (
    select id, max(field3) as m3
    from table2
    group by id
    ) b on a.id = b.id                        )
INNER JOIN (
    select id, field3, max(field4) as m4
    from table2
    group by id, field3
    ) c
    on b.id = c.id
    and b.m3 = c.field3                       )
INNER JOIN table2 d
    on c.id = d.id
    and c.field3 = d.field3
    and c.m4 = d.field4                       )
group by a.id, d.field3, d.field4 
```

注意：根据 dbenham 的建议
进行了编辑注 2：编辑为连接添加括号，因为在进行多个连接时访问需要额外的括号

如果一次性努力或者您可以获得行号，您可能会执行以下操作：

```
select id, field3, field4, field5, rownumber
into #temp_ordered
from table2
order by id, field3, field4, field5

select a.*
from #temp_ordered a
inner join (
    select id, min(rownumber) min_rownumber
    from #temp_ordered 
    group by id
    ) b on a.id = b.id and a.rownumber = b.min_rownumber 
```

最好的，大卫

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T14:30:26.527

我假设您为此使用 MSSQL Server。您需要使用`CROSS APPLY`才能解决问题。

```
SELECT a.*, x.*
FROM   tb1 a 
CROSS APPLY 
(
    SELECT   TOP 1 *
    FROM     tb2 b
    WHERE    a.id = b.id
    ORDER BY f3 desc, f4 desc, f5 desc
) x 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!3/32ab9/11 "点击这里")

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T18:15:39.400

*（此答案是在 OP 将 Access 确定为目标数据库之前开发的）*

以下 ANSI 语法很有效，适用于各种数据库，包括：

*   Oracle 11 及更高版本（如果 CTE 移至内联视图，则可追溯到 8i）
*   SqlServer 2005 及更高版本
*   PostgreSQL 8.4 及更高版本

.

```
with t2 as (
  select id,
         field3,
         field4,
         field5,
         row_number()
           over( partition by id
                 order by field3 desc, field4 desc, field5 desc
               ) as pref
    from table2
)
select t1.id,
       t1.field1,
       t1.field2,
       t2.field3,
       t2.field4,
       t2.field5
  from table1 t1
  join t2
    on t1.id=t2.id
   and t2.pref=1 
```

Oracle 有一种使用 KEEP LAST 的更有效方法，无需任何子查询或 CTE。我相信 SqlServer 2012 可能已经引入了类似的功能，但语法不同，但我并不熟悉。

```
select id,
       field1,
       field2,
       max(field3) keep (dense_rank last order by field3, field4, field5)
       max(field4) keep (dense_rank last order by field3, field4, field5)
       max(field5) keep (dense_rank last order by field3, field4, field5)
  from table1
  join table2 using(id)
 group by id 
```

这是两个 Oracle 查询的[SQL Fiddle](http://www.sqlfiddle.com/#!4/c6315/5)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T19:10:37.320

```
 SELECT T1.ID,F1,F2,MAX(F3) F3,MAX(F4) F4,MAX(F5) F5
 FROM TBL1 T1,TBL2 T2
 WHERE T1.ID=T2.ID
 GROUP BY T1.ID,F1,F2
 ORDER BY T1.ID;
                  (OR)
 SELECT T1.ID,F1,F2,F3,F4,F5
 FROM TBL1 T1,(SELECT ID,MAX(F3) F3,MAX(F4) F4,MAX(F5) F5 FROM TBL2 GROUP BY ID) T2
 WHERE T1.ID=T2.ID
 ORDER BY T1.ID; 
```

我希望这两种解决方案都能奏效。

# regex - 如何在scala中拆分数字和字母？

> ID：11915381
> 
> 赞同：3
> 
> 时间：2012-08-11T14:10:17.467
> 
> 标签：regex, scala

Waht 是将可能包含数字和字母的任意组合的字符串拆分为数字和字母组但保持顺序的惯用方式）。

前任：

```
X45C -> X-45-C
5K -> 5-K 
```

如何以一种优雅的方式来实现它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T14:20:38.597

正则表达式来救援！

```
val xs = List("X45C", "5K")
val ys = xs map {x => """\d+|\D+""".r.findAllIn(x).toList}

println(ys)
  /* List(List(X, 45, C), List(5, K)) */ 
```

如果`\D`是正确的选择取决于实际输入，请查阅[模式文档](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T14:27:28.337

可能这样的事情可能会有所帮助：

```
"x12y 1y2 QW23ER"
    .replace(/([a-z])([0-9])/gi,"$1-$2")
    .replace(/([0-9])([a-z])/gi,"$1-$2");

// OUTPUT: "x-12-y 1-y-2 QW-23-ER" 
```

# c# - 防止 WCF 暴露我的整个班级？

> ID：11915385
> 
> 赞同：2
> 
> 时间：2012-08-11T14:11:03.797
> 
> 标签：c#, wcf, architecture

我刚刚开始学习 WCF，而且我完全没有网络背景。

我已经构建了一个 3 层桌面应用程序，它编译成一个本地运行的 exe。

现在我想将整个业务逻辑层移动到一个中心服务器，并使 GUI 成为客户端应用程序。

据我了解，WCF 应该是我的解决方案，事实上，它帮助我实现了我想要的。

我设法运行远程功能，这是我需要的基础。

我现在的问题是我不太了解*架构*。

例如，我的一项服务从我的业务逻辑层返回一个数据类型（类）。

此类通过 WCF 机制自动对客户端可用。

但问题是，这个类包含一些我绝对不想暴露给客户的方法。

例如 Save 方法（保存到数据库）。

此外，有时我什至不想让客户端更改类的所有属性，因为此类可能会发送到我的服务之一。

我不想重新验证服务中的类实例。

我该怎么办？我是否应该构建另一层、受限版本的业务逻辑，并将其公开给客户端？或者有什么方法只向客户端公开我的类的一部分，而不限制它自己的服务器？

我知道这是一个基本问题，但老实说，在问这里之前我已经搜索了很多。我的问题是我不太清楚要搜索什么。

我的第二个问题是，你对任何可以解释我这个架构的资源有什么建议吗......？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-11T15:56:08.980

通常，如果您想封装您的业务层，您不希望直接公开业务对象。这是因为您现在有一个解耦客户端，并且您不一定希望每次业务逻辑/属性更改时都必须更新客户端。

这就是[数据传输对象 (DTO)](http://martinfowler.com/eaaCatalog/dataTransferObject.html)发挥作用的地方。通常，您希望控制您公开的合同（数据和方法）。因此，您将显式创建构成传输层的其他对象 (DTO)。然后，您可以安全地独立更改您的客户端和服务器代码（只要两者仍然履行合同对象）。

这通常需要更多的映射（在每一方发送或接收之前），但这通常是值得的。

对于 WCF，您的接口和类标记为`[ServiceContract]`以及您的类`[DataContract]`通常构成此传输层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T15:03:23.793

在 WCF 中，要向客户端公开方法，您必须使用 OperationContractAttribute 对其进行标记。因此，如果您不希望客户使用您的 Save 方法，请不要使用此属性对其进行标记。

更多信息在这里：http: [//msdn.microsoft.com/en-us/library/system.servicemodel.servicecontractattribute.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicecontractattribute.aspx)

属性几乎相同，但属性不同：DataMemberAttribute。如果您不想让客户看到它，请不要用它标记它们（[DataMember 属性](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datamemberattribute.aspx)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T21:19:00.020

> 但问题是，这个类包含一些我绝对不想暴露给客户的方法。

你能提供你的类和接口代码的例子吗？如果是这样，我相信您可能会得到更具体的答案。

> 例如 Save 方法（保存到数据库）。

一种可能的方法是将您的班级分成2个班级。在第一个类中定义属性，然后将该类用作第二个类的基类。然后使用第二个类来定义方法。这将允许您只返回属性，同时让您的代码保持干燥。

> 此外，有时我什至不想让客户端更改类的所有属性，因为此类可能会发送到我的服务之一。我不想重新验证服务中的类实例。

虽然您可以为每个属性在 get 和 set 方法中定义逻辑，但我强烈建议您重新验证服务之间收到的任何输入，因为将来一项服务中的任何更改或错误都可能导致整个应用程序出现更大的问题。此外，这还有助于确保您的应用程序更安全地抵御任何潜在的攻击。

> 我是否应该构建另一层、受限版本的业务逻辑，并将其公开给客户端？或者有什么方法只向客户端公开我的类的一部分，而不限制它自己的服务器？

我同意上述答案，您应该能够使用接口中的数据和方法属性来限制对不同属性和方法的访问。

> 我的第二个问题是，你对任何可以解释我这个架构的资源有什么建议吗......？

如果您正在寻找廉价但非常有价值的基于视频的培训，我发现 Pluralsight 提供的课程对于架构和 WFC 服务都非常有用（顺便说一句，我与他们无关，只是喜欢他们的培训）。

# php - ajax php邮件功能不适用于hotmail地址

> ID：11915387
> 
> 赞同：0
> 
> 时间：2012-08-11T14:11:14.697
> 
> 标签：php, jquery, ajax

我的联系表和 php mail() 函数有问题。出于某种原因，它们适用于每个电子邮件地址（@gmail、@yahoo、@outlook 甚至 @facebook！），但旧的可怕的 hotmail 除外。我只是好奇我的代码在哪里丢失了一些东西。我检查了邮件服务器，hotmail 地址显然没有问题。

电子邮件甚至没有发送到垃圾邮件/垃圾文件夹（它没有到达 hotmail）。我在网上看了一下，有人说要更改标题以避免被垃圾邮件过滤器捕获。对此有任何指示吗？

**PHP代码**

```
<?php
    header('Content-Type: application/json charset=utf-8');
    $name = $_POST['name'];
    $email = $_POST['email'];
    $message = $_POST['message'];
    $from = 'companyname@mail.com'; 
    $to = 'myemail@hotmail.com'; 
    $subject = $name . ' has sent you a message';
    $human = $_POST['antispam'];

    $body = "From: $name\n E-Mail: $email\n Message:\n $message";

    if (isset($_POST['name']) && $human == '4') {                
        if (mail ($to, $subject, $body, $from)) { 
            echo '{"status":"1"}';
        } else { 
            echo '{"status":"0"}';
        } 
    } 
    else 
    {
        echo '{"status":"2"}';
    }
?> 
```

if 语句只是检查所有表单是否有效以及是否正确输入了反垃圾邮件 (2+2)。这部分没什么可做的。我猜这个问题在标题中的某个地方

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T14:59:47.573

尝试使用这些更改：

```
<?php
    header('Content-Type: application/json; charset=utf-8');
    ...
    $from = 'companyname@mail.com'; 
    $headers = 'From: '. $from. "\r\n";
    ...
        if (mail ($to, $subject, $body, $headers)) { 
    ...
?> 
```

mail函数的第四个参数应该是additional_headers，而不仅仅是来自地址。

# django - 如何编写 django-piston 处理程序来创建和返回 ApiKey？

> ID：11915388
> 
> 赞同：1
> 
> 时间：2012-08-11T14:11:18.880
> 
> 标签：django, api, rest, django-piston

我目前正在从事将 Android 用于客户端和 Django 用于 Web 服务器的项目。我决定使用活塞-django 来创建 REST API 身份验证，并遵循以下说明： [编写 django-piston 客户端的正确方法是什么？](https://stackoverflow.com/questions/4457876/what-is-the-right-way-to-write-a-django-piston-client/) 并编写我自己的处理程序（api/handlers.py）来创建和返回 ApiKey，如下所示：

```
class ApiKeyhandler(Basehandler):
    model = ApiKey
    allowed_methods = ('GET', 'POST', 'PUT', 'DELETE')
    fields = ('user', 'keys')

    def create(self, request):
        attrs = self.flatten_dict(request.POST)

        if self.exists(**attrs):
            return rc.DUPLICATE_ENTRY
        else:
            apikey = ApiKey(user=request.user)
            apikey.save()

            return apikey 
```

在 urls.py 我使用 HttpBasicAuthentication 这个处理程序：

```
 auth = HttpBasicAuthentication(realm="Authentication API")
 apikey = Resource(handler=ApiKeyHandler, authentication=auth) 
```

但是当我用[http://hurl.it测试它时](http://hurl.it)

[这是来自 GET 的响应](http://hurl.it/hurls/40f437de087c2b109a709b53a20b8b2d735c1c01/c807f01a3a03623563242ecbf822e530c603f2d5)

[这是 POST 方法的响应](http://hurl.it/hurls/b87435ab82ac5d3c215f102926037a1c7da6a969/0dea84f2841d2e3579b6bebefcf0c6bfa70fb436)

谁能告诉我如何为这个问题编写完整的代码或关于这个问题的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T05:15:11.083

由于没有人回答这个问题，我自己想通了，并得到了朋友的帮助。我必须将 ApiKeyHandler 编辑为

```
class ApiKeyHandler(BaseHandler):
    model = ApiKey
    allowed_methods = ('GET', 'POST')
    fileds = ('user', 'key')

    def read(self, request):
        # Return the API key for request.user
        values_query_set = request.user.keys.values('key')
        api_key = list(values_query_set)[0]['key']
        return HttpResponse(api_key)

    def create(self, request):
        #Create a new API Key.

        # Check if API key already exists
        if request.user.keys.count() > 0:
            values_query_set = request.user.keys.values('key')
            api_key = list(values_query_set)[0]['key']
            return HttpResponse(api_key)
        else:
            # Create API key
            api_key = ApiKey(user=request.user)
            api_key.save()
        return HttpResponse(api_key) 
```

根据[django-piston doc](https://bitbucket.org/jespern/django-piston/wiki/Documentation#!resources)方法`read`在 GET`create`上调用，在 POST 上调用方法。因此，当客户端想要创建新的 API 密钥时；`request.user`如果 API 密钥不存在，客户端需要请求 HTTP POST 来创建 API 密钥。

最后在 models.py 中，我需要将 ApiKey 模型编辑为

```
class ApiKey(models.Model):
    user = models.ForeignKey(User, related_name='keys', unique=True)
    key = models.CharField(max_length=KEY_SIZE, null=True, blank=True)

    def save(self, *args, **kwargs):
        self.key = User.objects.make_random_password(length=KEY_SIZE)

        while ApiKey.objects.filter(key__exact=self.key).count():
            self.key = User.objects.make_random_password(length=KEY_SIZE)

        super(ApiKey, self).save(*args, **kwargs)

    def __unicode__(self):
        return self.key 
```

[我们需要调用“真正的” save() 方法](https://docs.djangoproject.com/en/dev/topics/db/models/#overriding-predefined-model-methods)

```
super(ApiKey, self).save(*args, **kwargs) 
```

APIKeyAuthenticatin 现在可以使用了。

最后但同样重要的是，在对用户进行身份验证时，客户端需要使用 HEADER ('Authorization', api_key) 请求 HTTP 请求。`api_key`必须与`request.user`.

# c# - Assembly.GetTypes() 抛出异常

> ID：11915389
> 
> 赞同：22
> 
> 时间：2012-08-11T14:11:25.167
> 
> 标签：c#, .net, reflection

装配`GetTypes()`在幕后做什么？假设程序集已加载到`AppDomain`它是否仍需要从物理 DLL 中读取？装配清单做什么？

像这样遍历程序集：

```
AppDomain.CurrentDomain.GetAssemblies().SelectMany(a => a.GetTypes()) 
```

我偶尔会收到以下错误：

```
 Could not load file or assembly 
```

这告诉我，因为程序集被加载到`AppDomain`它不一定完全加载到内存中。有时它仍然需要返回文件。

我的问题：

1.  为什么这样做？
2.  我能做些什么来检测这些半加载的程序集？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-08-11T14:14:40.693

从程序集中获取类型可能需要加载其他程序集，因此这很可能是错误的原因；加载依赖程序集失败。然而，一个 .NET 程序集可能由不同文件中的多个模块构成，所以我相信如果您有一个[多文件程序集](http://msdn.microsoft.com/en-us/library/168k2ah5.aspx)并且一个或多个文件丢失或损坏，您也可能会遇到这个问题。

与错误相关，您应该获得有关无法加载的特定程序集的更多信息。

如果您只想在程序集中加载可加载类型的列表，您可以使用如下扩展方法：

```
public static IEnumerable<Type> GetLoadableTypes(this Assembly assembly)
{
    if (assembly == null) throw new ArgumentNullException(nameof(assembly));
    try
    {
        return assembly.GetTypes();
    }
    catch (ReflectionTypeLoadException e)
    {
        return e.Types.Where(t => t != null);
    }
} 
```

（来源：[获取程序集中的所有类型](http://haacked.com/archive/2012/07/23/get-all-types-in-an-assembly.aspx)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T14:52:37.470

在幕后，GetType 方法返回存储在指定对象的类型对象指针成员中的地址（当对象存储在堆中时，此信息与同步块索引等其他信息一起存储）。这就是 GetType 方法返回任何对象的真实类型的方式。程序集可能依赖于必须加载的其他程序集。除非应用程序需要它，否则 JIT 不会加载它。所以，是的，它要求组件在物理上始终可用。

# php - PHP：即时从文本生成 png

> ID：11915394
> 
> 赞同：1
> 
> 时间：2012-08-11T14:12:01.193
> 
> 标签：php, png, gd

我编写了这个函数来从文本创建 png 文件：

```
function pngfromtext($text){
    $fontsize = 5;
    $width = imagefontwidth($fontsize)* strlen($text);
    $height = imagefontheight($fontsize);

    $img = imagecreate($width, $height);

    // Transparent background
    $black = imagecolorallocate($img, 0, 0, 0);
    imagecolortransparent($img, $black);

    // Red text
    $red = imagecolorallocate($img, 255, 255, 255);
    imagestring($img, $fontsize, 0, 0, $text, $red);

    header('Content-type: image/png');
    imagepng($img);
    imagedestroy($img);
} 
```

我将代码写入`functions.php`文件，在另一个页面中使用此功能时出现此错误：

```
 Warning: Cannot modify header information - headers already sent by (output started at ..\functions.php on line 58
�PNG  IHDRZ^%JPLTE����ٟ�tRNS@��f�IDAT�c` Hȱ�7�H��'��`c��s�����i��$���Hl`8��Ɛ�� ��#�c��p�� q�3f�òm�� �g�ـ�6fF ���h�bc�sXd4c�A4����?|�¦����r+���!IEND�B`� 
```

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T14:14:35.397

将标题设置在您知道输出将是图像的位置。这意味着设置此语句

```
header('Content-type: image/png'); 
```

在您的 php 脚本的开头。

也有可能在此之前已经执行了 header-command。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T14:36:56.167

在`header('Content-type: image/png');`put`ob_clean();` 清理响应对象之前，您可以再次添加标头

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T09:46:12.730

您不能在页面中使用多个标题。

# git - 在多个客户的 Web 项目中使用 git

> ID：11915397
> 
> 赞同：14
> 
> 时间：2012-08-11T14:12:16.967
> 
> 标签：git, project, web-deployment

*在使用 git 的几个客户项目中，是否有更好的版本控制 Web 项目的建议，其中包含小的随机更新？*

我想使用 git 对 web 项目进行版本控制。与几乎所有其他提案的主要区别在于，这是一个使用 HTML、JavaScript 和一些 PHP 文件的 Web 项目——没有一个或多个程序使用的中央库，就像典型的 Linux 包中通常那样。

我所有不同的 Web 项目都是针对基于相同平台文件的不同客户的，我估计 80% 的文件是相同的（称为平台），而 20% 的文件针对不同的客户进行了修改以满足他们的需求。这里的问题是，我不知道我们需要对哪些文件进行客户更新——每个客户的具体情况都不一样。

最好将平台特定文件保存在一个目录中，并将这些文件与另一个目录中的客户特定文件重叠。为了用 git 解决这个问题，到目前为止我还没有发现什么特别好的东西：

*   **git 子模块**（如建议的[here](https://stackoverflow.com/questions/7931761/working-with-git-and-multiple-projects)）通常设计为让供应商开发的库的源代码靠近链接它的程序。因此问题是平台和客户文件位于不同的目录中，因此我必须在部署期间混合它们以创建 Web 服务器的文件。此外，我必须手动保持目录树同步，而这对于 10 个目录深度层次结构来说将是大量的工作。一般来说，很多帖子都抱怨使用子模块需要进行大量的管理工作，这看起来有点矫枉过正。
*   **git subtree**（就像[这里](http://ruleant.blogspot.de/2011/04/git-subtree-module.html)建议的那样）似乎比 submodule 更简单，但是在不同的目录下也有同样的问题，所以我还需要在部署期间保持 dir 结构同步并混合文件。此外，很难从客户回购中推回平台更改。
*   **GitSlave**（就像建议[在这里](http://gitslave.sourceforge.net/)）我不确定这是否对我有好处。它允许保持几个 git repos 同步，也许它有助于同步平台的目录结构，但我不敢相信
*   **在不同目录中的平台和客户文件之间进行重构**（如[本次](https://stackoverflow.com/questions/1430284/one-project-multiple-customers-with-git)讨论的结果）我认为这对于我的客户和 Web 项目使用的技术来说是根本不可能的。对于一个客户，此页面需要更新，对于另一个客户，该页面需要更新。即使在引入 PHP 框架时，客户特定的更改也会分布在整个树上。
*   **签**出（就像在上一篇文章中的讨论中提出的那样）[这](https://stackoverflow.com/questions/1430284/one-project-multiple-customers-with-git)看起来非常简单和有希望，缺点是所有客户特定的文件都在 git 之外（因此在版本控制之外）。此外，如果文件在平台和客户中更新，git pull 失败 - 它中止，所以这不可用
*   **据我所知，供应商分支**（如此[处重新开始](https://stackoverflow.com/questions/769786/vendor-branches-in-git)），分支被合并回来，这不是针对我的客户特定补丁的。这些分支将始终打开，仅在从平台（主要）向客户更新后合并。这将导致一个庞大的存储库保留所有客户和平台信息——而不是 git 处理存储库的方式。
*   **在部署期间混合**。因此，将平台文件保存在一个存储库中并将客户文件也保存在专用存储库中是一种非常实用的方法。在将文件部署到 Web 服务器期间，它可以首先写入所有平台文件，然后用平台特定文件覆盖其中的一些文件。混合发生在 Web 服务器目录中的时间很晚。这也有一个缺点，即每个客户的目录结构必须手动与平台结构保持同步——否则部署将过于复杂。

*这里最好的方法是什么？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T15:15:41.553

### TL;博士

这实际上是一个架构设计问题，而不是源代码管理问题。尽管如此，这是一个常见且*有趣*的问题，因此我提供了一些关于如何解决架构问题的一般性建议。

### 不是真正的 Git 问题

问题不在于这里的 Git。问题是您没有充分区分客户之间保持不变的内容与将发生变化的内容。一旦确定了正确的设计模式，合适的源代码控制模型就会变得更加明显。

考虑一下 Russ Olsen 的这句话：

> [分离] 可能改变的事物与可能保持不变的事物。如果您可以确定系统设计的哪些方面可能会发生变化，则可以将这些位与更稳定的部分隔离开来。
> 
> 罗斯奥尔森 (2007-12-10)。Ruby 中的设计模式（Kindle 位置 586-588）。培生教育（美国）。Kindle版。

### 一些重构建议

我不太了解您的应用程序，无法提供具体建议，但*总的来说*， Web 项目可以从几种不同的设计模式中受益。模板、复合或原型模式可能都适用，但有时讨论模式会混淆问题而不是帮助。

没有特别的顺序，这是我个人会做的：

1.  在视图层，严重依赖模板。大量使用布局、包含或部分，以便您可以更轻松地组合表示层对象。
2.  大量使用客户特定的配置文件（为此我更喜欢 YAML），以便在不修改核心代码的情况下更轻松地进行定制。
3.  在模型和控制器层，选择一些适当的[结构模式](http://en.wikipedia.org/wiki/Structural_pattern)，以允许您的对象根据您的客户特定配置文件进行多态行为。鸭打字是你的朋友！
4.  使用基于主机名或域的一些自省，为每个客户端启用多态行为。

### Git 的后续步骤

一旦你重构了你的应用程序以最小化客户之间的变化，你可能会发现你甚至不需要将你的代码分开，除非你试图对每个客户隐藏多态代码。如果是这种情况，您当然可以在那时研究子模块或单独的分支，但不会产生分支之间大量重复的负担。

### 符号链接也是你的朋友

最后，如果您发现可以将更改隔离到几个子目录中，Git 支持符号链接。您可以简单地将所有不同的代码放在开发分支的每个客户端子目录中，并将文件符号链接到每个客户端发布分支上的正确位置。您甚至可以使用一些 shell 脚本或在自动部署期间自动执行此操作。

这将您的所有开发代码保存在一个位置，以便于比较和重构（例如开发分支），但确保每个版本*确实*需要不同的代码在您将其推出到生产环境时需要在其中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T14:59:28.320

由于您为每个供应商定制解决方案的性质，供应商分支最有意义。最好的方法是放弃这个并开发一个[多租户应用程序](http://en.wikipedia.org/wiki/Multi-tenant)。

# java - 非 Web 应用程序的安全架构建议

> ID：11915400
> 
> 赞同：0
> 
> 时间：2012-08-11T14:13:09.440
> 
> 标签：java, spring, security, architecture, spring-security

我在独立环境中使用 Spring3.1。

虽然我使用的是 Spring，但我确信可能还有其他 Java-ee 框架（EJB，..）我可以从中汲取灵感。

我正在尝试构建我的安全层架构，我想根据您的经验对我应该如何做有一个好主意。

我的应用程序（非 Web 应用程序）连接到外部协议。

当您实现它时，该协议负责所有连接层，包括登录。

用户登录后，他可以执行某些命令，例如：订阅、取消订阅等。

当我的应用程序获得登录触发器时，我通过 id 对我们的数据库进行身份验证，然后通过该协议我以拒绝或成功消息响应。

认证成功后，我可以通过外部协议从用户那里获得某些消息（订阅、取消订阅等..）

我应该如何用安全层包装我的应用程序？

我考虑过规划一个方面并为每种方法创建身份验证方法，以仔细检查用户是否真正登录？

我将如何管理所有登录/未登录的用户..

mybe协议层（我上面提到的）对我来说足够了吗？

欢迎任何想法。

谢谢，雷。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T14:15:10.023

你应该看看[http://static.springsource.org/spring-security/site/](http://static.springsource.org/spring-security/site/)

# javascript - 使用 javascript 解析

> ID：11915401
> 
> 赞同：0
> 
> 时间：2012-08-11T14:13:28.080
> 
> 标签：javascript, django

我将以下字符串发送到 django 模板。

```
<script>
var data = '[{"a": 0}, {"b": 1}]'
</script> 
```

1.  如何像`["a", "b"]`使用 javascript一样获取密钥
2.  我还需要一个 javascript 函数来检索给定键的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T14:17:19.630

只需将其解析为 JSON：

```
var obj = JSON.parse(data);
obj[0].a // access to a
obj[1].b // access to b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T14:18:09.043

你需要将python对象转换成javascript可以理解的格式，即[json](http://www.json.org/)。为此，请`simplejson`在您的视图中使用：

```
from django.utils import simplejson
from django.shortcuts import render

def some_view(request):
    ...
    python_data = [
        { 'a' : 'foo', 'b' : 'bar' },
        ...
    ]
    json_data = simplejson.dumps(python_data)
    render(request, "some_template.html", { 'data' : json_data }) 
```

并在您的模板中：

```
<script>
var data = {{ data|safe }}
</script> 
```

（Simplejson 可以很好地转换普通的 python 对象。如果你想转换一个 QuerySet，你需要使用 Django 的[序列化](https://docs.djangoproject.com/en/dev/topics/serialization/)器）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T14:40:17.480

1.  如何使用 javascript 获取密钥为 ["a", "b"]

    ```
    var arrMain = [{"a": 2}, {"b": 3}],
        arrKey = []; 

    for (key in arrMain) { 
        if (arrMain.hasOwnProperty(key)) {
            arrKey.push(Object.keys(arrMain[key])[0]); 
        }
    } 

    console.log(JSON.stringify(arrKey)​); // returns ["a","b"] 
    ```

2.  我还需要一个 javascript 函数来检索给定键的值。

    ```
    function returnValueByKey(arrMain, arrKey, lookupKey) {
        for (key in arrKey) {
            if (arrKey.hasOwnProperty(key) && arrKey[key] === lookupKey) {
               return arrMain[key][arrKey[key]]; 
            }
        }
    }

    console.log(returnValueByKey(arrMain, arrKey, 'a')); // returns 2 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T14:16:56.953

为什么不返回 JSON？

```
from django.utils import simplejson

def function(request):
    if not request.is_ajax():
        raise Http404
    data = list(
        dict(
            a=0,
            b=1
        )
    )
    return HttpResponse(simplejson.dumps(data), mimetype='application/json') 
```

**javascript**（在本例中使用 jquery）

```
function getData(){
    $.ajax({
        type: "GET",
        url: "/your/url/to/function/",
        success: function(data){
            return data;
        }
    });
}
var data = getData(); 
```

# android - android 测试样机组件

> ID：11915402
> 
> 赞同：1
> 
> 时间：2012-08-11T14:13:29.157
> 
> 标签：android, testing

我想使用推荐的方法（[http://developer.android.com/tools/testing/index.html](http://developer.android.com/tools/testing/index.html)）为我的 Android 应用程序进行一些自动 UI 测试。我的活动从服务器获取数据，并在获得响应后修改了一些 UI 元素。我想检查 UI 是否被正确修改，但我也想在不连接服务器的情况下测试这个问题。我考虑过提供模拟组件而不是代表活动连接到服务器的对象。但是我怎么能在我的测试用例中告诉 acivity 用模拟对象替换原始对象呢？你知道有什么好的方法吗？

在我的 ActivityInstrumentationTestCase2 实例中调用 getActivity 之前，我考虑过使用 setActivityIntent （指示应该使用模拟对象）在 Intent 中放置一个特殊标志。但是这种方法需要在应用程序代码中添加一些 if 语句，这会使代码变得不那么清晰和复杂。

你有更好的建议吗？提前致谢。

# c# - 通过音译实现集合中的搜索

> ID：11915406
> 
> 赞同：0
> 
> 时间：2012-08-11T14:13:45.047
> 
> 标签：c#, linq, windows-phone-7, search

我需要按单词开头在集合中搜索。

简单收藏{ Ivan Smith、Anthony Clark、Mike Shinoda}

当用户输入“s”时，我需要显示 {Ivan Smith, Mike Shinoda}

这种方法应该有效，但它没有。

```
 private void SortFriends(object sender, TextChangedEventArgs e) {
          var text = (sender as WatermarkTextBox).Text;
          if (text != string.Empty) {
            text = text.ToLowerInvariant();
            var translatedColl = FriendCollectionTranslated.Where(i => i.FirstName.StartsWith(text) || i.LastName.StartsWith(text) ||
                                                i.FirstNameT.StartsWith(text) ||
                                                i.LastNameT.StartsWith(text));

            var newCollection = ((App)App.Current).CollectionFriends.Where(i => translatedColl.First(n => n.Uid == i.Uid) != null);

            friendsBox.ItemsSource = newCollection;
          }
          else friendsBox.ItemsSource = ((App)App.Current).CollectionFriends;
        }
    public class HumanTranslated {
          public string Uid { get; set; }
          public string FirstName { get; set; }
          public string LastName { get; set; }
          public string FirstNameT { get; set; }//Translit
          public string LastNameT { get; set; }//Translit
          public bool IsChecked { get; set; }
        }
private void PrepareCollection()//Ретранслируем наши данные для быстрого поиска
    {
      foreach (var t in ((App)App.Current).CollectionFriends) {
        var item = new HumanTranslated {
          Uid = t.Uid,
          LastNameT = ToTranslit(t.LastName.ToLowerInvariant()),
          FirstNameT = ToTranslit(t.FirstName.ToLowerInvariant()),
          FirstName = t.FirstName.ToLowerInvariant(),
          LastName = t.LastName.ToLowerInvariant()
        };
        FriendCollectionTranslated.Add(item);
      }
    }
public class Human {
          public string Uid { get; set; }
          public string FirstName { get; set; }
          public string LastName { get; set; }
          public bool IsChecked { get; set; }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T14:21:32.593

在 lambda 语句中为每个成员添加相同的 .ToLowerInvariant() 调用。

```
var translatedColl = FriendCollectionTranslated.Where(
                      i => i.FirstName.ToLowerInvariant().StartsWith(text) ||
                           i.LastName.ToLowerInvariant().StartsWith(text) || 
                           i.FirstNameT.ToLowerInvariant().StartsWith(text) || 
                           i.LastNameT.ToLowerInvariant().StartsWith(text)); 
```

更好的是，使用 StringComparison.InvariantCultureIgnoreCase

```
var translatedColl = FriendCollectionTranslated.Where(
              i => i.FirstName.StartsWith(text,StringComparison.InvariantCultureIgnoreCase) ||
                   i.LastName.StartsWith(text,StringComparison.InvariantCultureIgnoreCase) || 
                   i.FirstNameT.StartsWith(text,StringComparison.InvariantCultureIgnoreCase) || 
                   i.LastNameT.StartsWith(text, StringComparison.InvariantCultureIgnoreCase)); 
```

然后，您可以从文本变量中删除 ToLowerInvariant() 调用。

# prefuse - 使用 GraphML Reader Prefuse 读取 gml 文件

> ID：11915412
> 
> 赞同：0
> 
> 时间：2012-08-11T14:14:33.393
> 
> 标签：prefuse, gml, graphml

我是 Prefuse 的新手。我在使用 GraphML Reader 读取 polbooks.gml 文件时遇到问题。它可以成功读取 xml 文件但不能读取 gml 文件。请提出如何在 Prefuse 中读取 gml 文件的解决方案。下面是我的 GraphML Reader 代码

```
package practise;

import prefuse.data.Graph;
import prefuse.data.io.DataIOException;
import prefuse.data.io.GraphMLReader;

public class practise1 {
static Graph graph = null;
public static void main(String[] args){

try{
    graph=new GraphMLReader().readGraph("polbooks.gml");
}
catch(DataIOException e){
    System.out.print("File Not Found");
}
//System.out.print(graph.getDegree(2));
}
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T18:54:09.927

Prefuse 目前没有 GML 阅读器，只有一个 graphml 阅读器。有一个 gml 阅读器可以在这里工作：

[http://nwb.cns.iu.edu/svn/nwb/trunk/plugins/visualization/edu.iu.nwb.visualization.prefuse.alpha.smallworld/src/edu/iu/nwb/visualization/prefuse/alpha/ smallworld/types/GMLGraphReader.java](http://nwb.cns.iu.edu/svn/nwb/trunk/plugins/visualization/edu.iu.nwb.visualization.prefuse.alpha.smallworld/src/edu/iu/nwb/visualization/prefuse/alpha/smallworld/types/GMLGraphReader.java)

# php - 67108864 字节的允许内存大小已用尽

> ID：11915415
> 
> 赞同：2
> 
> 时间：2012-08-11T14:14:41.370
> 
> 标签：php, mysql, memory, mysqli

我一定已经在这里阅读了所有类似的帖子，但仍然无法弄清楚为什么会这样。

我的代码：

```
$stmt = $this->db->stmt_init();
        $stmt->prepare("SELECT Table1.id,Name,type,text,fname,lname FROM Table1, Table2 WHERE Table1.email = Table2.email AND type='text' AND Table1.Id=?");
        $stmt->bind_param("i", $id);
        $stmt->bind_result($legTxtId,$legTxtName, $legTxtType, $legTxtText, $legTxtFname, $legTxtLname);
        $stmt->execute();
        $results = array();
        while($stmt->fetch())
        {
            $results[] = array(
                    'legTxtId' => $legTxtId , 'legTxtName' => $legTxtName , 'legTxtType' => $legTxtType , 
                    'legTxtText' => $legTxtText , 'legTxtFname' => $legTxtFname ,
                    'legTxtLname' => $legTxtLname );
        }
        $stmt->close();
        return $results; 
```

现在我在另一个函数中使用完全相同的代码，该函数在这个函数之前调用，即使它返回一个字段，它也可以正常工作。

特别是这个只返回 1 行，只有纯短文本（没有照片或任何东西），所以它不应该失败，因为它肯定小于 64M。

任何人都可以看到问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:19:51.450

正如在另一个问题中所讨论的，这两种解决方案似乎是：

1) 切换到[mysqlnd](http://us.php.net/manual/en/mysqlnd.install.php)连接器，因为这不会显示相同的错误。

如果您使用 Yum 安装 PHP（例如在 Amazon ec2 服务器上），那么您可以通过更改 LAMP 堆栈的设置来实现：

```
sudo yum install php-mysql php php-xml php-mcrypt php-mbstring php-cli mysql httpd 
```

到：

```
sudo yum install php-mysqlnd php php-xml php-mcrypt php-mbstring php-cli mysql httpd 
```

2) 使用 store_result 或 use_result 也不会显示大量内存分配问题。

切换到 mysqlnd 可能是一个更好的长期解决方案，因为它通常比现有的 php-mysql 连接器编写得更好（例如，结果在复制到 PHP 内存之前不会在 MySQL 内存中复制）并且是 PHP 5.4.0 的默认连接器向前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T14:17:26.907

那你为什么要对一条记录使用while循环呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T14:51:48.577

将数据移动到本地缓冲区可能会有所帮助：

```
// ...
$stmt->prepare(...);
$stmt->bind_param(...);

$stmt->execute();
$stmt->store_result();

$stmt->bind_result(...);
// ... 
```

# java - 使用 NIO 服务器和 IO 客户端

> ID：11915420
> 
> 赞同：0
> 
> 时间：2012-08-11T14:15:21.593
> 
> 标签：java, sockets, nio, apache-mina

我有基于**Mina**与**NIO**合作的服务器。

 **我尝试使用通常的**java.net.Socket**技术为此服务器创建**TCP/IP客户端。**我可以成功建立连接（即**org.apache.mina.core.service.IoHandler.sessionOpened**在客户端打开套接字后在服务器端调用）。但是，如果我尝试将一些字节写入套接字（从客户端），我对服务器没有任何影响（即**org.apache.mina.core.service.IoHandler.messageReceived**不会被调用）。

 ******您能否解释一下*为什么会发生这种情况*，*是否可以从我通常客户端的基于 Socket 的应用程序向我的 NIO 服务器发送一些消息*？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T15:37:50.017

你在接受器中安装了你的 IoHandler 吗？********

# tabs - 基于数组内容延迟打开和关闭选项卡

> ID：11915421
> 
> 赞同：1
> 
> 时间：2012-08-11T14:15:26.540
> 
> 标签：tabs, google-chrome-extension

我想根据数组中的 URL 创建新选项卡，但是在此过程中，我需要脚本等待新选项卡中的页面首先加载或等待几秒钟，然后关闭选项卡并在第一个关闭。

目前，此代码将一次创建所有新选项卡，然后`close.js`脚本将在几秒钟后关闭选项卡。因此，如果我的数组中有 50 个 URL，将同时创建 50 个新选项卡，这很糟糕。我需要一次创建和关闭一个选项卡，而不是一次全部关闭。

我曾尝试使用`chrome.tabs.query`status 参数来解决此问题，但此 status 参数似乎只与选项卡加载状态相关，而不与页面状态相关。

有人有什么想法吗？

```
var jsonObject = xhr.responseText;  
var obj = jQuery.parseJSON(jsonObject);
for (var i = 0; i < obj.url.length; i++) {
    chrome.tabs.create({"url":obj.url[i],"selected":false},function(tab){
        var createdTabId = tab.id;
        chrome.tabs.executeScript(createdTabId, {file: "js/close.js"});
    }); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T02:55:20.740

找到了解决方案：

```
var jsonObject = xhr.responseText;  
var obj = jQuery.parseJSON(jsonObject);
var timeout = 0;
var urlcount = 0;       

for (var i = 0; i < obj.url.length; i++) {
    setTimeout(function(){
        chrome.tabs.create({"url":obj.url[urlcount],"selected":false},function(tab){
        var createdTabId = tab.id;
        chrome.tabs.executeScript(createdTabId, {file: "js/close.js"});
        }); 
        urlcount++;
    },timeout);  // put the timeout here
    timeout = timeout + 2000;
} 
```

# cmake - 将依赖项添加到自定义目标

> ID：11915424
> 
> 赞同：2
> 
> 时间：2012-08-11T14:15:44.880
> 
> 标签：cmake

我需要一种将其他依赖项添加到自定义目标的方法。我有一个将资源文件添加到特定项目的宏，使用如下：

```
ADD_RESOURCES( ${TARGET} some/path pattern1 pattern2 )
ADD_RESOURCES( ${TARGET} another/path pattern1 ) 
```

我创建了一个名为的目标`${TARGET}_ASSETS`，并希望将所有这些资源的生成附加到一个目标。`add_dependencies`但是只接受其他目标。因此，如果我通过 a 生成文件，`add_custom_command`则无法将其用作依赖项。

解决方法可能是为每次调用创建一个新的自定义标记`ADD_RESOURCES`，然后将其附加到资产目标。然而，每个目标都需要一个唯一的名称，而这些无法从 ADD_RESOURCES 的参数中生成这个唯一的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T17:47:38.043

一种解决方法是推迟`${target}_ASSETS`自定义目标的生成，直到所有依赖项都已通过调用`ADD_RESOURCES`.

宏必须将依赖项记录在一个全局变量中，而不是立即将依赖项添加到自定义目标中，该`ADD_RESOURCES`变量的名称取决于目标：

```
macro (ADD_RESOURCES _targetName)
    set (_dependencies ${ARGN})
    ...
    # record depencies in a target dependency variable
    if (DEFINED ${_targetName}_Dependencies)
        list (APPEND ${_targetName}_Dependencies ${_dependencies})
    else()
        set (${_targetName}_Dependencies ${_dependencies})
    endif()
endmacro() 
```

然后添加另一个帮助宏，它通过反射确定所有定义的目标依赖变量，并为每个目标设置一个自定义目标：

```
macro (SETUP_ASSETS_TARGETS)
    get_cmake_property(_vars VARIABLES)
    foreach (_var ${_vars})
        if (_var MATCHES "(.+)_Dependencies")
            set (_targetName ${CMAKE_MATCH_1})
            set (_targetDependencies ${${_var}})
            message("${_targetName} depends on ${_targetDependencies}")
            add_custom_target(${_targetName}_ASSETS DEPENDS ${_targetDependencies})
        endif()
    endforeach()
endmacro() 
```

在您`CMakeLists.txt`通过调用添加所有必要的依赖项时`ADD_RESOURCES`，然后调用`SETUP_ASSETS_TARGETS`宏以定义所有自定义目标。

```
ADD_RESOURCES( target1 some/path pattern1 pattern2 )
ADD_RESOURCES( target1 another/path pattern1 )
ADD_RESOURCES( target2 foo/bar pattern1 )
...
...
SETUP_ASSETS_TARGETS() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-10T14:39:01.633

我知道这是一个迟到的答案，但我为所有搜索此问题的人发布了我的解决方案：

```
function(target_resources THIS)

    if (NOT TARGET ${THIS}_res)
        # this is just a pseudo command which can be appended later
        add_custom_command(OUTPUT ${THIS}_dep COMMAND cd ${CMAKE_CURRENT_SOURCE_DIR})

        # add a dependency with a target, as a command itself can not be a dependency
        add_custom_target(${THIS}_res DEPENDS ${THIS}_dep)
        add_dependencies(${THIS} ${THIS}_res)
    endif ()

    get_target_property(RUNTIME_OUTPUT_DIRECTORY ${THIS} RUNTIME_OUTPUT_DIRECTORY)

    foreach (RES_FILE IN LISTS ARGN)

        if (IS_ABSOLUTE ${RES_FILE})
            file(RELATIVE_PATH PATH ${CMAKE_CURRENT_SOURCE_DIR} ${RES_FILE})
        endif ()

        # append the resource command with our resource
        add_custom_command(OUTPUT ${THIS}_dep
                COMMAND ${CMAKE_COMMAND} -E copy
                ${CMAKE_CURRENT_SOURCE_DIR}/${RES_FILE}
                ${RUNTIME_OUTPUT_DIRECTORY}/${RES_FILE}
                APPEND)

    endforeach ()

endfunction() 
```

这个解决方案的好处是不依赖全局变量，也不需要调用设置宏。

# prolog - 括号是如何工作的？

> ID：11915425
> 
> 赞同：1
> 
> 时间：2012-08-11T14:15:59.737
> 
> 标签：prolog

我写了一个算法并尝试在Prolog中实现它，但我发现括号没有按预期工作：写入的内容并不是在退出括号之前全部完成。这是代码：

```
%1\. If the first member of L1 is smaller than L2
%     A. If the first member of L1 is not equal to Last
%            Than: A.1 Add the first member of L1 to the first member of NL
%                  Begin recurssion on the resumption of L1, L2 resumption of NL
%                  and Last from L1.
%            Else: A.2  begin the recursion on resumption of L1, L2 with the
%                       first member and L3 with the first member.
%  2\. If the first member in L1 is equal to the first member of L2,
%             Than: Start recursion on resumption of L1 and L2 (with its first
%                   member) and Last = *.
%  3\. If the first member of L1 is bigger than the first membber of L2
%             Than: begin recursion on L1 with the first member, resumption of
%             L2 and Last = x. %(x != * only for debugging)
%  

                              */
make_list([X1|L1], [X2|L2], [X3|NewL], Last) :-
    (
        X1 < X2,
        (
            X1 \= Last,   %A
            X3=X1;
            make_list(L1, [X2|L2], NewL, X1) %B
        ),  %Why those parenthesis do not work as expected?

        ! %green cut
    );
    (
        X1=X2,
        make_list(L1, [X2|L2], [X3|NewL], *)
    ),
    !
    ;
    make_list([X1|L1], L2, [X3|NewL], *). 
```

我的问题是如何让它按预期工作，为什么`B`一旦`A`完成就不起作用？毕竟它也在同一个括号中，例如：

```
?- make_list([6,6,10,20],[10,25,30],L, -).
L = [6|_G849]  % (should be [6,20]). 
```

EDIT1：make_list 应该找到所有`L1`不在其中的成员`L2`并将它们放入NewL，同时`Last`存储最后一个`L1`被解析的成员。

EDIT2：不允许->（这是方法）。如果有人可以告诉我如何在序言中表达 if then else ，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T16:06:57.780

简而言之：`!/0`应用于谓词级别：在这里，您希望它应用于某些块级别，其中块将由`(`and分隔`)`。这种应用于块的切割概念在 Prolog 中不存在。剪切将删除所有遇到的选择点，直到它在谓词中的位置。

并且不要编写大量使用的代码，而是考虑引入新的子句，以提高可读性（正是因为我们不喜欢括号和`(;)/2`找出优先级）：`(;)/2``(,)/2`

```
c :- A; B. 
```

可以写

```
c :- A.
c :- B. 
```

这种方式通常会更好。更好地轻松生成代码，更好地维护、阅读和扩展代码。

我没有深入研究您的谓词或其他任何东西，只是想提一下这两件事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T15:02:33.270

我怀疑你的“绿色切割”根本不是绿色的；你有

```
( A ; B ), ! 
```

所以从第一次退出`(A ; B)`时，如果 A 成功，`B`将不再尝试 - 这就是 cut`!`在这里所说的：不要再尝试了。

如果你也想`B`被试，去掉切口`!`。

If-then-else 是：

```
ifte(A,B,C):- A, B.
ifte(A,B,C):- \+A, C. 
```

我们可以`not`通过使用 a来节省我们 a `cut`，

```
ifte(A,B,C):- A, !, B.
ifte(A,B,C):- C. 
```

关于您的代码：我们`and then`用逗号表示：`A,B`. 要输出 Last 最简单的方法是使用工作谓词，并带有附加参数“seen-last”；在基本情况下，最后一次看到并且输出将是统一的。

# php - 使用 Mysql 和 Codeigniter 连接 4 个表

> ID：11915426
> 
> 赞同：2
> 
> 时间：2012-08-11T14:16:06.560
> 
> 标签：php, mysql, codeigniter, join

我有 4 张桌子，这都是有关系的，是的，他们彼此相爱 :p

*   产品
*   产品类别
*   产品类别关系
*   产品图片

我想在一个查询中加入这 4 个表，这是我的 Codeigniter 代码；

```
function list_products($limit = 10, $offset = 0, $category)
{
    $this->db->select('p.url, p.name, p.title, i.image');
    $this->db->from('products p');
    $this->db->join('product_categories c','c.id = r.category_id',
                    'left');
    $this->db->join('product_category_relations r',
                    'r.category_id = c.id','left');
    $this->db->join('product_images i',
                    'p.id = i.product_id AND i.default = 1','left');
    $this->db->where('c.url',$this->category_url.$category);
    $this->db->limit($limit,$offset);
    return $this->db->get()->result();
} 
```

当我执行这个函数/查询时，结果是关于定义“r”的错误。

> “on 子句”中的未知列“cms_r.category_id”

查询：

> 选择`p`。`url`, `p`. `name`, `p`. `title`, `i`. `image`从 ( `cms_products`p) 左连接`cms_product_categories`c 开启`c`。`id`= `cms_r`。`category_id`左加入`cms_product_category_relations`r ON `r`。`category_id`= `c`。`id`左加入`cms_product_images`我 `p`。`id`= `i`。`product_id`AND i.default = 1 WHERE `c`。`url`= '类别/yilbasi' 限制 12

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T14:37:16.700

您使用后分配`r`类似于`product_category_relations`。

你在这里写：

```
$this->db->join('product_categories c','c.id = r.category_id','left'); 
```

但什么是`r`？你只在下一个陈述中回答这个问题。

```
$this->db->join('product_category_relations r','r.category_id = c.id','left'); 
```

* * *

如果您想要具体答案，请提供示例 SQL 创建脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-20T07:22:15.527

@Edward Ruchevits 由于 r.category_id 在加入 product_category_relations r 后定义，您的查询未加入，您需要**products**和**product_categories**之间的关系，然后您的查询类似于

```
$this->db->join('product_categories c','c.product_id = p.id','left'); 
```

# vb.net - 对列表框进行排序，但将项目分组在一起

> ID：11915430
> 
> 赞同：0
> 
> 时间：2012-08-11T14:16:49.957
> 
> 标签：vb.net

我有一个问题，我需要整理列表框中的项目，我知道该怎么做，但问题是，我的列表框是这样整理的

人 1 名字
人 1 姓
人 1 日期
人 1 性别
人 1 地址
人 2 名字
人 2 姓
人 2 日期
人 2 性别
人 2 地址
每个值都在一个新行上。我想要的是把每个人的 5 个详细信息放在一起并按日期对它们进行排序，但我不知道该怎么做，因为我知道的唯一对详细信息进行排序的代码会混淆所有数据。

```
Private Sub btnSortDate_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSortDate.Click
    Dim arr As New ArrayList
    Dim iLp As Integer

    arr.AddRange(lstFDisplay.Items)

    arr.Sort()

    lstFDisplay.Items.Clear()

    For iLp = 0 To arr.Count - 1
        lstFDisplay.Items.Add(arr(iLp))
    Next iLp
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T14:27:25.680

EDIT2：您需要**将您的逻辑**（您的人员，日期）与**您的演示文稿**（您通过放入列表框中向用户展示的内容）分开。您应该始终避免的事情是显示某些内容（例如，显示人员列表），然后将其*读回*并尝试理解它。

```
 Module MyForm
        ' Keep our dates & people in this dictionary
        ' Because it's a SortedDictionary, it'll keep them sorted by key
        '                                                key,     value
        Public personDictionary As New SortedDictionary(Of DateTime, Person)

        Public Sub New()
            InitializeComponent()
            ' Call CreatePeople() to fill our dictionary when the form is made
            CreatePeople()
            ' Then call FillListBox() to fill our listbox from that dictionary
            FillListBox()
        End Sub

        Private Sub CreatePeople()
            ' Make your persons and dates here
            Dim a = New Person(...)
            Dim dateA = New DateTime(2012,2,3)

            ' Keep them in our internal dictionary
            ' .Add(..) takes our key (a DateTime) and a value (a Person)
            personDictionary.Add(dateA, a)
        End Sub

        Private Sub FillListBox()
            lstFDisplay.Clear()

            ' Here we do something 'For Each' item in the dictionary
            ' The dictionary is filled with 'pairs' of key|value (DateTime|Person)
            For Each pair In personDictionary
                DateTime date = pair.Key
                Person person = pair.Value
                'Use this data to add items to our UI
                lstFDisplay.Items.Add("Name: "&person.Name
                lstFDisplay.Items.Add("Address: "&person.Address
                lstFDisplay.Items.Add(person.Name&" registered on "&date)
            Next
        End Sub 
```

当您想添加或删除人员时，只需`.Add(..)`或`.Remove(..)`从字典`FillListBox()`中再次调用以刷新您的 UI。通过将值保留在代码本身中，而不是每次都从列表框中重新读取它，您可以更好地控制如何处理该信息。

# python - Django：执行命令 collectstatic 引发 UnicodeDecodeError

> ID：11915432
> 
> 赞同：1
> 
> 时间：2012-08-11T14:16:57.103
> 
> 标签：python, django, apache, static

为什么要引发 UnicodeDecodeError？我尝试使用 apache 部署我的 django 应用程序来复制静态文件，键入

```
$python manage.py collectstatic 
```

我收到如下错误消息。

```
You have requested to collect static files at the destination
location as specified in your settings.

This will overwrite existing files!
Are you sure you want to do this?

Type 'yes' to continue, or 'no' to cancel: yes
Traceback (most recent call last):
File "manage.py", line 10, in <module>
execute_from_command_line(sys.argv)
File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
utility.execute()
File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 382, in execute
self.fetch_command(subcommand).run_from_argv(self.argv)
File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 196, in run_from_argv
self.execute(*args, **options.__dict__)
File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 232, in execute
output = self.handle(*args, **options)
File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 371, in handle
return self.handle_noargs(**options)
File "/usr/local/lib/python2.7/dist-packages/django/contrib/staticfiles/management/commands/collectstatic.py", line 163, in handle_noargs
collected = self.collect()
File "/usr/local/lib/python2.7/dist-packages/django/contrib/staticfiles/management/commands/collectstatic.py", line 104, in collect
for path, storage in finder.list(self.ignore_patterns):
File "/usr/local/lib/python2.7/dist-packages/django/contrib/staticfiles/finders.py", line 137, in list
for path in utils.get_files(storage, ignore_patterns):
File "/usr/local/lib/python2.7/dist-packages/django/contrib/staticfiles/utils.py", line 37, in get_files
for fn in get_files(storage, ignore_patterns, dir):
File "/usr/local/lib/python2.7/dist-packages/django/contrib/staticfiles/utils.py", line 37, in get_files
for fn in get_files(storage, ignore_patterns, dir):
File "/usr/local/lib/python2.7/dist-packages/django/contrib/staticfiles/utils.py", line 25, in get_files
directories, files = storage.listdir(location)
File "/usr/local/lib/python2.7/dist-packages/django/core/files/storage.py", line 236, in listdir
if os.path.isdir(os.path.join(path, entry)):
File "/usr/lib/python2.7/posixpath.py", line 71, in join
path += '/' + b
UnicodeDecodeError: 'ascii' codec can't decode byte 0xba in position 1: ordinal not in range(128) 
```

我的静态文件有什么问题？我的设置.py

```
import os
PROJECT_ROOT = os.path.dirname(__file__)
STATIC_ROOT = os.path.join(PROJECT_ROOT, 'static/')
# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

STATICFILES_FINDERS = (
'django.contrib.staticfiles.finders.FileSystemFinder',
'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
) 
```

和 apache 主机配置

```
ServerName www.abcd.org
DocumentRoot /srv/www/yyy

<Directory /srv/www/yyy>
    Order allow,deny 
    Allow from all 
</Directory>

WSGIDaemonProcess yyy.djangoserver processes=2 threads=15 display-name=%{GROUP}
WSGIProcessGroup iii.djangoserver

WSGIScriptAlias / /srv/www/yyy/apache/django.wsgi 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T16:03:47.593

看起来要复制的静态文件的一个或多个路径包含非 ASCII 字符。

它与目标目录的路径无关。

**找出答案的一种方法是**将

```
try:
    print path
except:
    pass
try:
    print entry
except:
    pass 
```

就在 /usr/local/lib/python2.7/dist-packages/django/core/files/storage.py 的第 236 行之前片刻，然后再次运行 manage.py。

然后你应该看到问题发生在哪里（你不会看到真正的罪魁祸首，而是看到它之前的文件和问题文件的适当目录）。

**或者，您也可以使用 pdb**：

```
python -m pdb manage.py collectstatic 
```

并检查哪个文件导致调试器中的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-29T08:34:01.750

当我在 docker 容器中使用**django-pipeline**时，我遇到了同样的错误。事实证明，由于某种原因，系统使用了 POSIX 语言环境。我使用了此处提出的解决方案并在系统 shell 中导出了语言环境设置：

```
export LC_ALL=en_US.UTF-8
export LANG=en_US.UTF-8 
```

您可以检查之后您的语言环境应该是这样的：

```
vagrant@vagrant-ubuntu-trusty-64:/project$ locale
LANG=en_US.UTF-8
LANGUAGE=
LC_CTYPE="en_US.UTF-8"
LC_NUMERIC="en_US.UTF-8"
LC_TIME="en_US.UTF-8"
LC_COLLATE="en_US.UTF-8"
LC_MONETARY="en_US.UTF-8"
LC_MESSAGES="en_US.UTF-8"
LC_PAPER="en_US.UTF-8"
LC_NAME="en_US.UTF-8"
LC_ADDRESS="en_US.UTF-8"
LC_TELEPHONE="en_US.UTF-8"
LC_MEASUREMENT="en_US.UTF-8"
LC_IDENTIFICATION="en_US.UTF-8"
LC_ALL=en_US.UTF-8 
```

它运作良好。另外，请注意我在 docker 和外部机器上都这样做了。

# jquery - 获取在 jQuery.each() 中激活的滑块元素的 ID

> ID：11915433
> 
> 赞同：0
> 
> 时间：2012-08-11T14:17:03.133
> 
> 标签：jquery, jquery-ui

我在容器 div 中定义了许多滑块，例如

```
 <div id="opacitySlider" class='slider'>
    <div class="sliderText">Fade Opacity</div>
    <div id="fadeVal"></div>
  </div> 
```

还有很多

它们由`slider()`定义为的 jQuery UI 功能控制

```
$(".slider").each(function(e){
  $(this).slider({
    value: 50,
    orientation: 'horizontal',
    animate: true,
    range: 'min',
    slide: function(e, ui){
      console.log($(e).id);
      console.log($(this).id;
    }
  });
}); 
```

我想要做的是用相关滑块的值更新滑块值 div

两个控制台日志记录语句都返回未定义。我需要知道触发事件以更新正确 div 元素的滑块的 ID。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T14:35:13.237

`.each()`有两个参数，第一个是索引，第二个是元素：

```
$(".slider").each(function(i, e) {
    $(e).slider({
        value: 50,
        orientation: 'horizontal',
        animate: true,
        range: 'min',
        slide: function(e, ui) {
            console.log(this.id); //new scope
        }
    });
});​ 
```

当 only 时`$(".slider").each(function(e) {...}`， then`e`将是索引而不是元素，因此您试图获取数字 0、1、2 等的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T14:23:47.793

尝试这个：

```
$(".slider").each(function(e){

  var curSlider = $(this);

  $(this).slider({
    value: 50,
    orientation: 'horizontal',
    animate: true,
    range: 'min',
    slide: function(e, ui){

      console.log(curSlider.attr('id'));

    }
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T14:34:29.290

使用or的`id`属性：`this``e.target`

```
slide: function(e, ui){
  console.log(this.id);
  //or
  console.log(e.target.id);
} 
```

[jsFiddle](http://jsfiddle.net/ynRwL/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T14:18:51.823

应该是 `$(this).attr('id');`或`$(e).attr('id');`

# sql - SQL SELECT 中的日期格式异常

> ID：11915434
> 
> 赞同：1
> 
> 时间：2012-08-11T14:17:05.523
> 
> 标签：sql, sql-server

我有一个表，其中有一`DATETIME`列名为`dtInsertDate`.

此列中的值为`'2012-08-10 22:48:41.047'`。我知道这个日期是 2012 年 8 月 10 日。

我想运行以下 SELECT 语句来检索这一行：

```
select *
from myTable
where dtinsertdate = '2012-08-10 22:48:41.047' 
```

`dateformat`令人费解的是，如果我在选项为时运行此 SELECT `mdy`，它会找到该行。

如果我在选项`dateformat`为时在数据库的另一个副本上运行它`dmy`，`SELECT`则不会返回任何内容。

为什么是这样 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T14:24:04.217

原因是 dmy 导致您的字符串文字被解释为第一天 - 所以这是 10 月 8 日而不是 8 月 10 日。

解决方案是始终对日期文字使用明确的格式（或使用正确类型的参数，而不是首先处理从字符串进行翻译）。

```
WHERE dtinsertdate = '20120810 22:48:41.047'; 
```

正如您所发现的，日期中的这些破折号可以根据语言/日期格式设置对实际值进行不同的解释。

另一种选择是保留破折号但注入 T 而不是空格，例如：

```
WHERE dtinsertdate = '2012-08-10T22:48:41.047'; 
```

您的原件更具可读性，但只有在您固定语言和日期格式时才能保证工作（例如尝试使用`SET LANGUAGE FRENCH;`）。试试这个实验：

```
SET DATEFORMAT DMY;
DECLARE @d DATETIME = '2012-08-10 22:48:41.047'
SELECT MONTH(@d);
GO

SET LANGUAGE FRENCH;
DECLARE @d DATETIME = '2012-08-10 22:48:41.047'
SELECT MONTH(@d);
GO

SET DATEFORMAT MDY;
DECLARE @d DATETIME = '2012-08-10 22:48:41.047'
SELECT MONTH(@d);
GO

SET DATEFORMAT MDY;
SET LANGUAGE ENGLISH;
DECLARE @d DATETIME = '2012-08-10 22:48:41.047'
SELECT MONTH(@d);
GO 
```

有时结果是 8，有时结果是 10。现在用我上面建议的两种格式之一再试一次 - 结果总是 8。

我有很多有趣的细节值得在这里阅读：

*   [要改掉的坏习惯：错误处理日期/范围查询](https://sqlblog.org/2009/10/16/bad-habits-to-kick-mis-handling-date-range-queries)

但是对于您正在谈论的特定问题，始终，始终，始终使用以下格式之一作为日期/时间文字，我认为其他任何格式都不安全。

**对于日期+时间：**

```
YYYY-MM-DDTHH:MM:SS...
YYYYMMDD HH:MM:SS... 
```

**仅适用于日期：**

```
YYYYMMDD 
```

# algorithm - 完整的二叉树定义

> ID：11915437
> 
> 赞同：1
> 
> 时间：2012-08-11T14:17:18.723
> 
> 标签：algorithm, tree, binary-tree

我对二叉树有一些疑问：

*   维基百科指出，当“**完整**的二叉树是一棵二叉树，其中除了可能的最后一层之外，每一层都被完全填满，并且所有节点都尽可能地靠左”时，二叉树就是完整的。最后一段“尽可能向左”是什么意思？

*   如果（1）它是空的，或者（2）它的左右子树是高度平衡的并且左树的高度在 1正确的树，取自[如何确定二叉树是否平衡？](https://stackoverflow.com/questions/742844/how-to-determine-if-binary-tree-is-balanced)，这是正确的还是 1 值有“抖动”？我阅读了我链接的答案，左右树的高度之间也可能存在 4 的差异因子

*   完整和高度平衡的定义是否仅适用于二叉树或任何其他树？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T20:59:03.613

*   根据维基百科中的定义参考，我到了 [这个页面](http://xlinux.nist.gov/dads//HTML/completeBinaryTree.html)。该定义取自那里，但经过修改：

    > **定义：**一棵二叉树，其中每一层，除了可能最深的，都被完全填满。在深度 n 处，即树的高度，所有节点都必须尽可能靠左。

    它继续下面的注释，

    > 一棵完整的二叉树在每个深度 k < n 以及 2n 和 2^(n+1) - 1 个节点之间都有 2k 个节点。

    有时，定义会因方便而异（对某事有用）。据我了解，该段落可能是一种变体，它需要叶节点首先填充最深层次的左侧（即从左到右填充）。我通常找到的定义与上面描述的完全一样，但没有那段。

*   通常，高度平衡树的定义是您描述的定义。换句话说：

    > 一棵树是平衡的当且仅当对于每个节点其两个子树的高度最多相差 1。

    该定义取自[这里](http://www.ethoberon.ethz.ch/WirthPubl/AD.pdf)。同样，有时定义会更加灵活以服务于特定目的。例如，[AVL 树](http://en.wikipedia.org/wiki/AVL_tree)的定义说

    > 在 AVL 树中，任何节点的两个子子树的高度最多相差 1

    不过，我记得有一次我必须重写一个算法，以便如果任何节点的两个子子树最多相差 2，那么树将被认为是高度平衡的。请注意，您给出的定义是递归的，这对于二进制非常常见树木。

*   在子级数量可变的树中，您无法说它是完整的（任何父级都可以拥有您想要的子级数量）。尽管如此，它仍然可以应用于**n 叉树**（具有固定数量的`n`孩子）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T22:16:41.150

> 完整和高度平衡的定义是否仅适用于二叉树或任何其他树？

简短的回答：是的，它可以扩展到任何 n 叉树。

# cakephp - 如何在 HtmlHelper 等控制器中创建 URL

> ID：11915441
> 
> 赞同：10
> 
> 时间：2012-08-11T14:17:30.077
> 
> 标签：cakephp, html-helper, cakephp-2.x, cakephp-3.x

**TLDR：**如何在控制器中创建 URL，类似于使用 HtmlHelper 在视图中创建 URL？

* * *

**问题：**

我想在我的控制器中打印控制器操作的 url（因为我在控制器中创建我的 JSON 字符串，而不是在视图中）

在 a`View`中，我可以使用`$this->Html->url()`，但是在 Controller 中呢？

我应该使用定义的常量，例如`APP_DIR`+ 控制器名称 + 控制器操作吗？）

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-11T14:57:50.797

使用路由器类。

```
$url = Router::url([
    'controller' => 'Articles',
    'action' => 'index',
    '?' => ['page' => 1],
    '#' => 'top'
]); 
```

或同样的事情，但在更常见/更简单的情况下：

```
$url = Router::url(['controller' => 'Articles', 'action' => 'index']); 
```

注意：在 Cake2.x 中，“Articles”是小写的。

* * *

**[CakePHP 2.x 路由器文档](http://book.cakephp.org/2.0/en/development/routing.html#Router::url)**

**[CakePHP 3.x “生成 URL” 文档](http://book.cakephp.org/3.0/en/development/routing.html#generating-urls)**

# php - 上传文件的限制

> ID：11915445
> 
> 赞同：1
> 
> 时间：2012-08-11T14:18:12.437
> 
> 标签：php, file-upload

> **可能重复：**
> [POST 内容长度超出限制](https://stackoverflow.com/questions/6279897/post-content-length-exceeds-the-limit)
> [PHP 警告：113 字节的 POST 内容长度超出未知中 -1988100096 字节的限制](https://stackoverflow.com/questions/6315358/php-warning-post-content-length-of-113-bytes-exceeds-the-limit-of-1988100096-b)

我有上传图片的表格，我进行测试，如果我上传图片，例如 9 mb 大小，php 返回错误：

```
POST Content-Length of 10194008 bytes exceeds the limit of 8388608 bytes in Unknown on line 0 
```

我希望不要上传超过 2 mb 的文件，在第一行我有这个代码：

```
if (!empty($_FILES['main_photo']['name'])) {

    if ( $_FILES['main_photo']['size'] > 1024 * 1024 * 2 ) {
        header("Location: index.php");
        exit();
    }
} 
```

但是这个错误仍然显示，请告诉什么make，如果文件超过2 mb，我想要，只是：

```
header("Location: index.php"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T14:22:35.280

在 php.ini 中查找`upload_max_filesize` 并`post_max_size`设置为合适的大小：

```
upload_max_filesize = 20M
post_max_size = 20M 
```

只有在更改之后，您才能添加重定向代码。

* * *

如果您无法访问您的 php.ini（共享主机），请尝试在 .htaccess 中：

```
php_value upload_max_filesize 20M
php_value post_max_size 20M 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T14:20:11.403

您尝试上传的文件大于 php.ini 中设置的配置大小。进入 php.ini 并将这些值修改为 2mb 或更大以允许更大的上传：

```
upload_max_filesize
post_max_size <-- This one appears to be your biggest issue 
```

然后你的代码应该可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T14:22:51.473

您的服务器可能已将大小限制为 8 兆字节，我认为您的代码还可以。它是一个服务器问题尝试将 `upload_max_filesize`使用设置`ini_set`为更多。如果您是商用服务器，而不是您自己的，请尝试联系管理员

# javascript - 如何在 JavaScript 中计算字母？

> ID：11915457
> 
> 赞同：2
> 
> 时间：2012-08-11T14:19:51.420
> 
> 标签：javascript, regex

我已经编写了这个函数（它不起作用），它应该计算全局变量（`paraText`）中的字母，然后将其插入到计数中。我该如何解决这个问题？

这是一个学校项目，所以我必须遵守某些规则。我已经尝试了几乎所有的答案，但我无法让它工作:(也许如果你看看所有的代码你会发现我做错了什么。

```
 "use strict";

    var paraText = "";
    var antalParagrafer = 0;

    function addLetter(c) {
        if(!paraText) {
            addParagraph();
        }
        else { //add c to saved textnode
            var tNod = document.createTextNode(c);
            paraText.appendChild(tNod);
    }
    }
        //function is called when enter is pressed
    function addParagraph() {
 /*create a new paragraph with related textnode
    textnode is saved to the global textnodevariable
    add paragraph to the div with id "output"
    you also need to mark the paragraph with the class even/odd
    depending on the class of the previous paragraph*/
        var div = document.getElementById("output");
        var nyParagraf = document.createElement("p");
        div.appendChild(nyParagraf);
        antalParagrafer += 1;
        nyParagraf.className = (antalParagrafer % 2 === 0 ? 'even' : 'odd');
        paraText = nyParagraf;
    }
    //function is called when count letters is pressed
           function countLetters() {
      var count=0;
      for(var i = 0; i < paraText.length; i++) {
        var c = paraText.charAt(i);
        if (c >= 'a' && c <= 'z') count++;
      }
      return count;
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-11T14:21:11.763

我只是去掉非字母，然后使用剩下的长度：

```
var count = paraText.replace(/[^a-zA-Z]/g, '').length; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-11T14:22:56.567

你的函数可以正常工作（尽管它可能没有它应该的那么优雅），但是`count = count ++`是错误的；要么使用

```
count++; 
```

或者

```
count = count + 1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T14:28:32.333

该语句`count = count++`不会增加计数器，因为 的值`count++`是变量增加之前的值，所以您增加变量，然后将之前的值重新赋值。

使用简单的比较比对字符串中的每个字符使用正则表达式提供更好的性能：

```
function countLetters() {
  var count=0;
  for(var i = 0; i < paraText.length; i++) {
    var c = paraText.charAt(i);
    if (c >= 'a' && c <= 'z') count++;
  }
  return count;
} 
```

# nosql - Hbase 架构设计 - 需要建议

> ID：11915460
> 
> 赞同：0
> 
> 时间：2012-08-11T14:20:34.420
> 
> 标签：nosql, hbase, schema-design

我最近开始试验 Hbase 和 hadoop 堆栈。我正在尝试从头开始构建应用程序。我正在为将使用 google n-gram 数据集的应用程序设计架构。

我意识到可以将数据集制作成一个模型，其中 ngram 作为行键，一个列族具有许多限定符（年、页数、match_count），或者模型可以将 n-gram 作为行键和多个列族年，page_count，match_count。

我意识到模型取决于我想使用这些数据的方式，但我想了解这两种方法的优缺点。

干杯，德瓦拉克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T16:01:15.597

考虑从 Hbase 书阅读本章：[6.2。关于列族的数量](http://hbase.apache.org/book.html#number.of.cfs)

“HBase 目前不能很好地处理两个或三个列族以上的任何内容，因此请保持架构中的列族数量较少。目前，刷新和压缩是在每个区域的基础上完成的，所以如果一个列族承载大部分数据带来flush时，相邻的family也会被flush，尽管它们携带的数据量很小。当column family多的时候flush和compaction的交互会导致一堆不必要的i/o加载（通过更改flush和压缩以在每个列族的基础上工作）。”

“如果可以在架构中尝试使用一个列族。仅在数据访问通常是列范围的情况下引入第二个和第三个列族；即您查询一个列族或另一个列族，但通常不会同时在一度”

现在，请记住，在物理上，所有列族成员都存储在文件系统上。因为调整和存储规范是在列族级别完成的，所以建议所有列族成员都具有相同的一般访问模式和大小特征。如果您的所有数据将同时处理，那么您可能需要考虑使用一个只有一个列族的表。您最好不要使用多个系列，除非它们几乎一直单独使用。

# python - 如何将 python .py 文件转换为可执行文件以供跨平台使用？

> ID：11915462
> 
> 赞同：15
> 
> 时间：2012-08-11T14:20:52.940
> 
> 标签：python, exe, py2exe, cx-freeze, pyinstaller

我已经通过 SO 搜索了一段时间，现在试图想出一个答案，但由于我没有编程经验，我不太了解文档，也没有足够的信心进行过多的实验。

谁能用稍微简单的术语来描述我将如何使用 Py2exe、PyInstaller、cx_freeze 等程序？我只是想让其他人（主要是朋友）能够运行我的（简单的，纯文本的）程序，而不必自己下载 python。如果有更简单的方法可以做到这一点，我也会很高兴知道这一点。

运行 Vista 32 位，python 2.7

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-11T14:27:51.790

有两种不同的方法可以冻结 python 脚本来创建可执行文件：

1.  将解释器和 *.pyc 文件打包到一个 exe 文件容器中。[PyInstaller](http://www.pyinstaller.org/)、[Py2exe](http://www.py2exe.org/)、[cx_freeze](http://cx-freeze.sourceforge.net/)等工具使用这种方法。
2.  从 Python 源代码创建本机代码，通常使用将 Python 源代码转换为 C 或 C++ 代码的中间步骤。这是通过[Shed-skin](http://shed-skin.blogspot.com/)和[Nuitka](http://nuitka.net/)等工具完成的。这种方法的问题是这些工具并不总是支持 Python 的所有功能（例如，它们可能有一些类型限制等）

您必须开始阅读文档。这样的工具不仅仅是push-and-run风格的工具，它们通常有一些必须实现的配置（这可能是所有构建系统的问题，并且随着项目的增长，钩子的配置和数量也在增长）。

您可以从[Py2exe 教程](http://www.py2exe.org/index.cgi/Tutorial)和“hello-world”开始了解编译是如何完成的。据我所知，这是实现目标的最简单方法。

最后一件事，**你不能创建跨平台的本机可执行文件**，因为它们的文件格式*强烈依赖于操作系统和硬件*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-29T20:37:07.077

1.  下载**py2exe**
2.  下载这个[msvcp90.dll](https://drive.google.com/file/d/0B6Soi7N9itO_YWV0cVlEdS11alU/edit)
3.  将您的*FileCode.py* **和** *msvcp90.dll*复制到 C:\Python27\
4.  在 C:\Python27\ 创建新的文本文件，然后在其中输入以下代码：

> ```
> from distutils.core import setup
> import py2exe
> setup(console=['Avril.py']) 
> ```

5.  将**Avril.py**替换为**YourFileName.py**
6.  将文件另存为**setup.txt**
7.  打开**CMD**并输入：

> cd C:\Python27\
> python setup.txt py2exe

8.  现在去 C:\Python27\dist\ 那里有你的*.exe*程序。

资料来源：[曼维尔·辛格](https://www.youtube.com/watch?v=kyoGfnLm4LA)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-09T13:49:20.403

安装 pyinstaller，这是一个将 .py 转换为 .exe 的程序，适用于 python 2.7 到 python 所在的位置：

```
cd C:\python27\scripts
pip install pyinstaller 
```

然后将要编译的任何 python 文件移动到 C:\python27\scripts，使用以下命令从那里编译：

```
pyinstaller --onefile yourfile.py 
```

--onefile 是可选的，但它将整个内容（在本例中为 yourfile.py）打包到一个 .exe 中。一切完成后，将有 2 个新文件夹以及一个 .spec 文件。从 C:\python27\scripts 打开文件夹 dist。您的 .exe 将位于一个文件中，您可以双击该文件来执行并分发给没有 python 的任何人。希望能帮助到你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-03T07:17:28.240

通过将 python 环境路径放在脚本文件的顶部，可以使 Python 脚本像 shell 脚本一样直接可执行。

```
#!/usr/bin/env python3.5 
```

Python 安装程序会自动将 .py 文件与 python.exe 关联，以便双击 Python 文件将其作为脚本运行。扩展名也可以是 .pyw，在这种情况下，通常出现的控制台窗口会被抑制。

linux 的详细描述也在[这里](https://docs.python.org/3/tutorial/appendix.html#executable-python-scripts)。

# c - 为什么这个 C 代码的输出如此

> ID：11915464
> 
> 赞同：-1
> 
> 时间：2012-08-11T14:21:09.557
> 
> 标签：c

```
printf("%d %d",sizeof('a'),sizeof("a")) 
```

这给出了 4 和 2 的输出。为什么输出是这样的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T14:23:10.993

在 C 中，字符常量具有 type `int`，因此在您的情况下为 4 个字节。当应用于字符串文字（例如`"a"`）时，`sizeof`产生字节数。因此 2 ( `'a'`, 和`'\0'`)。

此外，`%d`不是打印的正确说明符`size_t`。您可能应该使用`%zu`or `%zd`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T14:23:39.950

第一个因为`'a'`是一个字符（注意单引号）并被认为是`int`C 中的一种类型。

第二个因为`"a"`是一个由两个字节组成的字符串（双引号），`'a'`并且`'\0'`.

# python-3.x - cx_freeze QtWebKit 导入错误

> ID：11915466
> 
> 赞同：0
> 
> 时间：2012-08-11T14:21:23.550
> 
> 标签：python-3.x, pyqt4, cx-freeze

在我将一个 QWebView 元素添加到窗口之前，我的 cx_freeze 构建工作正常。这意味着我应该导入 QtWebKit，对吗？在 Linux 上一切正常。在 Windows 上，如果我运行 main.py 文件，一切正常。

如果我将其冻结为 .exe，这就是[我得到的错误](http://imgur.com/Tak7D)。这是我的 install.py 文件：

```
from cx_Freeze import setup, Executable

includes=["re","PyQt4.QtWebKit"]

exe = Executable(
    script="main.pyw",
    base="Win32GUI",
    targetName = "LEX.exe"
    )

setup(
    name = "blabla",
    version = "1.3",
    description = "My application",
    options = {"build_exe": {"includes":includes}},
    executables = [exe]
    ) 
```

我在 x64 Windows 7 上构建它，但使用 x86 版本的 PyQt4 和 Python3.2 x86。在那个 QWebView 元素之前完全没有问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T12:41:09.710

升级到 cx_freeze 4.3 并编辑导入就可以了。导入现在是这样的：

```
from PyQt4.QtNetwork import *
from PyQt4.QtWebKit import QWebView,QWebPage 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T17:00:00.997

您不应该仅仅为了让 cx_Freeze 识别依赖关系而添加导入（并可能污染您的命名空间）。
而是像使用 PyQt4.QtWebKit 一样将 PyQt4.QtNetwork 添加到“包含”列表中。
您还可以使用“包”选项包含包的所有模块。也就是说，“包”用于整个包，“包含”用于模块。

# java - 不支持 Java 声音格式

> ID：11915469
> 
> 赞同：5
> 
> 时间：2012-08-11T14:21:47.193
> 
> 标签：java, audio, recording

使用以下代码时：http: [//pastebin.com/5iVnttiP](http://pastebin.com/5iVnttiP)

我收到此错误：

```
javax.sound.sampled.LineUnavailableException: line with format PCM_SIGNED 16000.0 Hz, 16 bit, stereo, 4 bytes/frame, little-endian not supported.
    at com.sun.media.sound.DirectAudioDevice$DirectDL.implOpen(Unknown Source)
    at com.sun.media.sound.AbstractDataLine.open(Unknown Source)
    at com.sun.media.sound.AbstractDataLine.open(Unknown Source)
    at com.AIComputer.model.Recorder.<init>(Recorder.java:124)
    at com.AIComputer.AIComputer.main(AIComputer.java:7) 
```

现在我做了一些研究，发现并非所有声卡都支持每种格式，但是在运行这个演示时：http: [//java.sun.com/products/java-media/sound/samples/JavaSoundDemo/](http://java.sun.com/products/java-media/sound/samples/JavaSoundDemo/) 我设法制作了一个使用完全相同的参数（线性、16000、16、有符号、小端序、立体声）进行录制。

我不知道我在这里做错了什么（也因为我仍然是 Java 编码的初学者）。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-19T20:37:34.407

你能说出这个异常是从你的代码的哪一行抛出的吗？

LineUnavailableException的[文档说](http://docs.oracle.com/javase/1.5.0/docs/api/javax/sound/sampled/LineUnavailableException.html)

> 当请求的线路已被另一个应用程序使用时，这种情况最常见。

您在代码中打开了两行。当您尝试打开第二个时，第一个的存在会阻止它。

# c++ - wxWidgets - wxMediaCtrl - 视频不播放

> ID：11915470
> 
> 赞同：1
> 
> 时间：2012-08-11T14:21:47.510
> 
> 标签：c++, wxwidgets

我想用 C++ 和 wxWidgets 创建一个简单的视频播放器。我放置了 wxMediaCtrl 和 wxFileDialog 控件，并为按钮单击事件创建了以下代码：

```
wxFileDialog * fopen = new wxFileDialog(this, wxT("Wybierz plik"), wxT(""), wxT(""), wxT("MP4 file (*.mp4)|*.mp4|AVI file (*.avi)|*.avi"));
if (fopen->ShowModal() == wxID_OK)
{
    wxString fname = fopen->GetFilename();
    media->Load(fname); // media is pointer to wxMediaCtrl object
    media->Play();
}

delete fopen; 
```

当我打开文件时，它不播放。我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T16:04:18.437

该[文档](http://docs.wxwidgets.org/trunk/classwx_media_ctrl.html)指出：

> 对于一般操作，您需要做的就是调用 Load() 来加载要渲染的文件，捕获 EVT_MEDIA_LOADED 事件，然后调用 Play() 以显示该事件中媒体的视频/音频。

所以问题看起来是当您尝试播放文件时该文件尚未完成加载。您还可以在 wxWidgets 安装的示例目录中查看媒体播放器示例以获取更多详细信息。

# javascript - 如何从按钮调用LinkedIn授权javascript

> ID：11915471
> 
> 赞同：0
> 
> 时间：2012-08-11T14:22:21.043
> 
> 标签：javascript, linkedin

LinkedIn API 中的这行示例代码完美运行。

```
<script type="IN/Login" data-onAuth="loadData"></script> 
```

但它会在网页加载时自动运行。我想使用网页上的按钮或链接调用此脚本。这个想法是网页加载并等待用户准备好进行身份验证。

理想情况下，我希望出现 LinkedIn 登录图像，然后等待，直到被点击。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:57:06.497

```
$('#buttonControl').click(function(){
    $('#buttonContent').html('<script type="IN/Login" data-onauth="loadData"></script>');
    $('#buttonControl,#buttonContent').toggle();
    IN.User.authorize(loadData);
    }); 
```

与 'IN.parse($('#buttonContent')[0]);' 略有不同 似乎不起作用...

测试了'IN.User.authorize（loadData）'，效果很好！来自：http: [//developer.linkedin.com/documents/inauth-inevent-and-inui](http://developer.linkedin.com/documents/inauth-inevent-and-inui)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:39:26.830

根据您的评论，如果用户手动单击页面上的按钮/元素，您似乎只想显示[登录插件。](https://developer.linkedin.com/documents/sign-linkedin)像这样使用[jQuery](http://jquery.com/)的东西应该可以工作：

在您的页面上，您有一个按钮：

```
<div id="buttonControl">
  <input type="button" id="showLinkedIn" value="Show LinkedIn" onclick="showLinkedIn();" />
</div>
<div id="buttonContent" style="display: none;"></div> 
```

在`<head>`页面的脚本块中，您具有以下`showLinkedIn()` `onclick`功能：

```
function showLinkedIn() {
  // insert the SignIn plugin
  $('#buttonContent').html('<script type="IN/Login" data-onauth="loadData"><\/script>');

  // tell the LinkedIn JavaScript code to re-parse the element containing the SignIn plugin
  IN.parse($('#buttonContent')[0]);

  // hide button trigger, if needed
  $('#buttonControl').hide();

  // show the LinkedIn control
  $('#buttonContent').show();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-01T08:51:35.800

您需要通过以下方法清除 cookie，例如

```
IN.User.logout(callbackFunction, callbackScope); 
```

您需要在要退出的按钮上调用此函数。

使用 jquery 的示例：

```
$('#demo') .click(function() 
{
    IN.User.logout(console.log("logged out..."));
}); 
```

# javascript - 从post方法获取数据后如何重定向

> ID：11915473
> 
> 赞同：-1
> 
> 时间：2012-08-11T14:22:31.697
> 
> 标签：javascript, ajax, jquery, jquery-selectors

我有一个`post method to servlet`，所以servlet在将请求转发到另一个页面后返回一个网页，
`getServletContext().getRequestDispatcher("/AnotherServlet").forward(request, response);`
所以我不能直接重定向我尝试了很多解决方案：使用链接传递参数并且它正在工作，但我会尝试`window.location ="/Anotherservlet"`
一个更好的并且它正在工作但是页面的 url 仍然是我的主页，即使页面是从服务器下载的，页面仍在加载（所有带有就绪语句的功能都不起作用）所以当我单击带有 href="#" 的按钮时，它会将我重定向到主页，因为正如我在我的 URL=/ not =/anotherservlet 之前所说的那样，我不喜欢执行此操作的 get 方法或 cookie 我搜索其他解决方案感谢帮助 这是我的 servlet：
`var w = window.open(); w.document.write(data);`

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    String name= request.getParameter("name");
    String pass=request.getParameter("pass");

     if (name.equals("a")&&pass.equals("0cc175b9c0f1b6a831c399e269772661"))
    {
    getServletContext().getRequestDispatcher("/BookListServlet").forward(request, response);
    }
    else 
    {
     response.setContentType("text/plain");
        PrintWriter out = response.getWriter();
        out.print("error");
        out.flush();
        out.close();
    }

} 
```

这是我的 BookListServlet：

```
 protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    books= new bookiml().get_books();   
    String name= request.getParameter("name");
    String ipAddress = request.getRemoteAddr();

request.setAttribute("books", books);
request.setAttribute("userip", ipAddress);
request.setAttribute("user", name);
request.setAttribute("title", "Book listing");

getServletContext().getRequestDispatcher("/META-INF/pages/book-list.jsp").forward(request, response);
}

/**
 * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
 */
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    // TODO Auto-generated method stub
    doGet(request, response);
} 
```

在检查登录身份验证后，我不想从 servlet 获取页面，但如果没有在链接中传递参数，就像这样：`

```
$.ajax({
                    url: 'identification',
                    type: 'POST',
                    data:{pass:$hash,name:$name},
                    timeout: 1000,
                    success: function(data){
                     var target = document.getElementById('spinner');
                                    spinner = new Spinner(opts).spin(target);
                                    $('#spinner').fadeIn();

                                    if (data=='error')
                                    {
                                    $("#messages").html(" Check your username and password.");
                                    $('#name').css('border-color','#B94A48');
                                    $('#pass').css('border-color','#B94A48');
                                    $('#spinner').fadeOut();
                                    }

                                    else 

                                        {
                                        $("#messages").html("");

            $('#spinner').fadeOut();
                                    window.location ="/BookListServlet?name="+$name;
                                    }

                }
            });` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T15:16:03.113

据我了解，您只想使用重定向`servlet`？

```
response.setStatus(response.SC_MOVED_TEMPORARILY);
response.setHeader("Location", "http://splinky.com/"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T15:19:31.703

如果成功，您可以将 url 放在要重定向的 ajax 响应中：

示例js响应：

```
{ status: 'ok', redirect: '/example' } 
```

并在客户端使用 js 进行重定向。

客户端代码：

```
$("form.ajaxForm").submit( function(e) {
        var form = $(this);
        form.ajaxSubmit({
            dataType: 'json',
            success: function(data) {
                if( data.redirect != "" ) {
                    window.location = data.redirect;
                }
            }
        });

        return false;
    }); 
```

您必须使用 jQuery 表单插件才能工作。请参阅：http: [//jquery.malsup.com/form/#getting-started](http://jquery.malsup.com/form/#getting-started)

# java - UTF8 字符串到 byte[]，每个字符为单字节

> ID：11915474
> 
> 赞同：0
> 
> 时间：2012-08-11T14:22:33.133
> 
> 标签：java, string, utf-8

我想将用户的输入作为 UTF8 字符串 & 然后检测字符串的语言 & 将字符串存储为**压缩的 byte[]**。如果所有字符*都不*是同一种语言，那么它不是一个有效的输入。从用户获得有效输入后，我想将此输入字符串存储为字节数组。

如果用户输入的字符串包含非英文字符，那么每个字符将占用超过 1 个字节，所以我想存储字符串的语言，然后将每个字符存储在一个字节中（我想现在可以存储字符通过仅存储与该语言的起始代码点的差异而以单字节存储，因为所有字符都来自相同的语言，并且可能（！？）因此适合单字节容量，因为范围小！？）。这就是我**压缩每个字符以适应单字节的方式**。

这是一个正确的方法吗？如果是，我如何检测字符串中字符的语言？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T15:36:00.547

看一下[Character.UnicodeBlock](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.UnicodeBlock.html)类，它提供了静态方法`of(char)`并`of(int)`检测字符的 Unicode 块。例如，这将告诉您一个字符是来自 ARABIC 块还是来自 BASIC_LATIN 块。

但是，请注意有几个 *LATIN* 块，并且许多语言需要使用来自多个块的字符。因此，弄清楚为您提供的语言将是一项非常艰巨的工作。我想不出办法自动检测到这一点。

还要记住，许多 Unicode 块是巨大的，你不可能将一种语言中的所有有效字符都放入一个字节中。（查看[Unicode 6.1 字符代码表](http://www.unicode.org/charts/)以了解 Unicode 有多么庞大。）所以，老实说，您无法将每个字符压缩成一个字节。

UTF-8 是多年国际化标准的结果，它可能是任何需要表示多种语言的软件的最佳选择。尝试生产更高效的东西可能会花费你大量的时间，并且只会带来很小的收益。

# java - 将大型 csv 转换为 xml 并将 xml 数据打印到 GUI 文本区域

> ID：11915480
> 
> 赞同：0
> 
> 时间：2012-08-11T14:22:59.653
> 
> 标签：java, xml, csv

我正在开发一个读取 .CSV 文件的 Java 应用程序，显示 GUI 文本区域的内容并将这些内容转换为 XML 数据（`textarea`也打印 XML），现在使用 XSLT 转换此 XML 数据。

我的应用程序接受 .CSV 文件，将逗号分隔值数据转换为 XML 对我来说是一个挑战。我已经阅读了大量关于它的材料，但我仍然没有掌握这个概念。谁能指导我如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T20:51:33.770

从我读到的您的问题中，您已经在处理 csv 文件并且您的 xml 架构已经定义（您提到了一个对 csv->xml 转换结果进行操作的 xslt）。

我建议使用像 dom4j 这样的小型 xml 库来创建 xml 文档。dom4j的[快速入门指南](http://dom4j.sourceforge.net/dom4j-1.6.1/guide.html)有一个简短的示例，显示了*创建新 XML 文档*和*与字符串相互转换*的步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T19:07:09.177

您应该创建一个实现 Serializable 的 java 类。然后，当您读取 csv 文件时，填充该类中的每个字段。然后您可以使用 Java XMLEncoder 像这样写入 XML 文件。

```
 XMLEncoder encoder = null;
            MyClass data = new MyClass();
            data.setField1("field 1 from csv");

    try {
        encoder = new XMLEncoder(new BufferedOutputStream(new FileOutputStream("c:/myfile.xml")));
        encoder.writeObject(data);
    } catch (final IOException e) {
        logger.error(e.getMessage());
    } finally {
        if (encoder != null) {
            encoder.close();
        }
    } 
```

# c - 找不到数字文字运算符 'operator"" x0'

> ID：11915481
> 
> 赞同：0
> 
> 时间：2012-08-11T14:23:01.347
> 
> 标签：c, bitwise-operators

我正在阅读它解释的协议规范`byte 0 : 0b0000001x if line Available.` 所以，我必须根据这个文档创建数据包，但我不知道如何将 0b0000001x 分配给 C 中的变量。我有：

```
unsigned char * payload;
payload[0] = 0b0000001x; 
```

但我收到以下错误：

> 错误：无法找到数字文字运算符 'operator"" x0'</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T14:44:37.867

根据您的规范，`0b0000001x`很可能意味着“这是一个二进制数，即位序列”，并且`x`是您应该根据线路的当前状态设置或清除的位。[仅在 C++14 或更高版本中支持](https://stackoverflow.com/questions/2611764/can-i-use-a-binary-literal-in-c-or-c)内置二进制文字，在 C++11 中它们可以实现为用户定义的文字，在 C 和旧版本的 C++ 中，您需要手动计算值（或者您可以使用编译器将其实现为非标准扩展，gcc 和 clang 都这样做）。

如果我正确阅读并且字节顺序正确，则生成的字节值应该是：

```
payload[0] = 2 + (is_line_available ? 1 : 0); 
```

* * *

此外，您没有为`payload`，因此您将写入随机内存。您需要分配一些内存：

静态分配，适用于 C 和 C++：

```
unsigned char payload[24]; // or whatever your message's length is 
```

C 风格的动态分配（确保在完成后释放它）：

```
unsigned char *payload = malloc(24);
...; 
free(payload); 
```

C++ 推荐的方法：

```
#include <vector>
std::vector<unsigned char> payload;
payload.reserve(24);
...; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T14:33:32.427

[看起来 C 不支持二进制文字](https://stackoverflow.com/questions/2611764/can-i-use-a-binary-literal-in-c-or-c)。尝试改用十六进制。

```
payload[0] = 0x01; 
```

# php - PHP中的LDAP身份验证用户

> ID：11915485
> 
> 赞同：0
> 
> 时间：2012-08-11T14:23:34.627
> 
> 标签：php, active-directory, ldap

我正在构建一个从 PHP 到 LDAP 的身份验证脚本。我的问题是，如果用户不是我的管理员，我真的不知道如何检查用户。

我不太明白`ldap_bind`- 在这里我只能以我的管理员用户身份登录，但是我可以在我的 ou 中搜索其他用户，但我不知道如何检查他们的密码。

到目前为止我所拥有的：

```
function login($up, $pw){
    $ldap = ldap_connect("dejan.local") or die("Could not connect to LDAP server.");

    if ($ldap){
        ldap_set_option($ldap, LDAP_OPT_REFERRALS, 0);
        ldap_set_option($ldap, LDAP_OPT_PROTOCOL_VERSION, 3);

        //if I try $up and $pw here, I get an error
        if ($bind = ldap_bind($ldap, "Admin", "Somepassword")){
            $sr = ldap_search($ldap, "ou=testunit,DC=dejan,DC=local", "samaccountname=$up");
            $info = ldap_get_entries($ldap, $sr);

            //so here I've gotten information from the user $up
            //but I would like to check if his password matches and then get his information    
        }
    }
} 
```

我查看了其他人的某种身份验证脚本，他们通过检查信息`ldap_bind`，但我只能与我的管理员用户联系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T23:04:07.653

我相信你需要做的唯一改变是：

```
if ($bind = ldap_bind($ldap, "$up@dejan.local", $pw)){ 
```

这将使请求成为特定域的本地请求。使用 Active Directory（这有点不同，归咎于 Kerberos），您必须提供登录上下文。

# c# - 在 VS 2010 中捕获输出窗口消息

> ID：11915488
> 
> 赞同：0
> 
> 时间：2012-08-11T14:23:49.547
> 
> 标签：c#, .net, visual-studio-2010

在 VS 2010 的输出窗口中捕获写入的消息，尝试拦截导致错误的消息。

我试图拦截的消息：

```
A first chance exception of type 'System.Runtime.InteropServices.SEHException' occurred in OpenNETCF.Desktop.Communication.dll
Disconnect 
```

之后，当我连接设备时，应用程序冻结，无一例外。

我如何捕获输出窗口消息或将它们重定向到字符串？我可以拦截我什么时候在生产模式下使用这个应用程序？

我试图捕获控制台消息，但除了从应用程序调用的 console.writeline 之外，我什么也没得到，所以我认为这些消息不是 console.writeline 调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T19:19:28.103

如果您正在调试应用程序，那么为了让调试器在首次引发特定异常（第一次机会异常/抛出）时中断，您可以只勾选您想要的特定异常，而不是 Runtime.InteropServices 中的整个异常集。

请看下面的屏幕截图：

![在此处输入图像描述](../Images/64b46f5fcaa84afe0d667270cb9b6ae4.png)

如果您的应用程序当前没有在调试器中运行，那么您可以让调试器附加到已经运行的进程......通过使用“附加到进程”......但是，这通常不会在生产环境中完成。

如果您想在生产环境中分析您的应用程序，即您无法停止您的应用程序或在调试器中运行它......那么最好的方法是在发生异常时创建进程的“转储” ...然后您可以通过加载保存的 .dmp 文件在 WinDBG 或 Visual Studio 中进行离线分析。

最好的设置方法是使用 DebugDiag 在发生异常时自动创建“完整转储”文件。

*   [http://blogs.msdn.com/b/kaushal/archive/2012/05/09/using-debugdiag-to-capture-a-dump-on-first-chance-exception.aspx](http://blogs.msdn.com/b/kaushal/archive/2012/05/09/using-debugdiag-to-capture-a-dump-on-first-chance-exception.aspx)

也可以通过右键单击任务管理器中的进程并创建转储文件来手动执行应用程序进程的“小型转储”。但是，手动执行意味着您在捕获接近异常时的状态时要慢得多，而且“小型转储”不如完整转储有用。

这里有一个关于如何在生产环境中诊断问题的很好的教程：

*   [http://channel9.msdn.com/Series/-NET-Debugging-Stater-Kit-for-the-Production-Environment](http://channel9.msdn.com/Series/-NET-Debugging-Stater-Kit-for-the-Production-Environment)

# python - 为什么我们在Python中定义方法的时候要加上self参数

> ID：11915490
> 
> 赞同：0
> 
> 时间：2012-08-11T14:24:00.083
> 
> 标签：python, methods, parameters

> **可能重复：**
> [为什么需要在 Python 方法中显式添加“self”参数？](https://stackoverflow.com/questions/68282/why-do-you-need-explicitly-have-the-self-argument-into-a-python-method)

为什么一定要加上这个self参数

```
 def function(self): 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T14:26:26.753

因为在类中定义方法时，它会自动创建一个描述符，将对象实例作为第一个参数传递。如果您想避免这种情况，请使用 @staticmethod 装饰器，或者只在类之外定义您的函数。

至于为什么以这种方式设计语言，在没有显式变量创建的情况下以其他方式使用语言是没有意义的。如果你做a=2，你怎么知道它应该是一个局部变量还是一个实例变量？此外，明确地传递它只是一个更优雅的设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T14:25:41.673

[显式优于隐式](http://www.python.org/dev/peps/pep-0020/)。

# android - Android SQLite SELECT NullPointerException

> ID：11915493
> 
> 赞同：0
> 
> 时间：2012-08-11T14:25:10.043
> 
> 标签：android, sqlite, nullpointerexception

我希望有人可以帮助我，因为我遇到了这个错误并且日志对我没有帮助！我正在尝试从我的数据库中读取数据，我知道该数据库包含我提取的表和数据。这行似乎有错误：

```
Cursor mCursor = mDb.rawQuery("SELECT * FROM " + TABLE_SORTBY, null); 
```

这很奇怪，因为我以前使用过这段代码，但我看不出我做错了什么，任何帮助将不胜感激。

```
/** Get all locations for the dialog box */
public ArrayList<String> allLocations() {
    Cursor mCursor = mDb.rawQuery("SELECT * FROM " + TABLE_SORTBY, null);
    ArrayList<String> mArrayList = new ArrayList<String>();

    try {
        mCursor.moveToFirst();
        while (!mCursor.isAfterLast()) {
            mArrayList.add(mCursor.getString(mCursor.getColumnIndex(SORTBY_SORTBY_TYPE)));
            mCursor.moveToNext();
        }
    } catch (SQLiteException e) {
        Log.e("All Locations", "Error getting locations: " + e.toString());
    }finally{
        mCursor.close();
        close();
    }
    return mArrayList;
} 
```

我得到的错误是：

```
08-11 14:18:00.465: E/ERROR(19396): java.lang.NullPointerException
08-11 14:18:00.465: W/System.err(19396): java.lang.NullPointerException
08-11 14:18:00.465: W/System.err(19396):    at com.swiftdrink.sqlite.SortBySQL.allLocations(SortBySQL.java:99)
08-11 14:18:00.465: W/System.err(19396):    at com.swiftdrink.SortByList.displaySortByList(SortByList.java:127)
08-11 14:18:00.525: D/dalvikvm(19396): GC_FOR_MALLOC freed 2629 objects / 147472 bytes in 51ms
08-11 14:18:00.525: W/System.err(19396):    at com.swiftdrink.SortByList.downloadSortBy(SortByList.java:116)
08-11 14:18:00.525: W/System.err(19396):    at com.swiftdrink.SortBy.onCreate(SortBy.java:58)
08-11 14:18:00.525: W/System.err(19396):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-11 14:18:00.525: W/System.err(19396):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
08-11 14:18:00.525: W/System.err(19396):    at android.app.ActivityThread.startActivityNow(ActivityThread.java:2503)
08-11 14:18:00.535: W/System.err(19396):    at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
08-11 14:18:00.535: W/System.err(19396):    at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
08-11 14:18:00.535: W/System.err(19396):    at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:651)
08-11 14:18:00.535: W/System.err(19396):    at android.widget.TabHost.setCurrentTab(TabHost.java:323)
08-11 14:18:00.535: W/System.err(19396):    at android.widget.TabHost$2.onTabSelectionChanged(TabHost.java:129)
08-11 14:18:00.535: W/System.err(19396):    at android.widget.TabWidget$TabClickListener.onClick(TabWidget.java:453)
08-11 14:18:00.535: W/System.err(19396):    at android.view.View.performClick(View.java:2408)
08-11 14:18:00.535: W/System.err(19396):    at android.view.View$PerformClick.run(View.java:8816)
08-11 14:18:00.535: W/System.err(19396):    at android.os.Handler.handleCallback(Handler.java:587)
08-11 14:18:00.535: W/System.err(19396):    at android.os.Handler.dispatchMessage(Handler.java:92)
08-11 14:18:00.535: W/System.err(19396):    at android.os.Looper.loop(Looper.java:123)
08-11 14:18:00.535: W/System.err(19396):    at android.app.ActivityThread.main(ActivityThread.java:4627)
08-11 14:18:00.535: W/System.err(19396):    at java.lang.reflect.Method.invokeNative(Native Method)
08-11 14:18:00.545: W/System.err(19396):    at java.lang.reflect.Method.invoke(Method.java:521)
08-11 14:18:00.545: W/System.err(19396):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-11 14:18:00.545: W/System.err(19396):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-11 14:18:00.545: W/System.err(19396):    at dalvik.system.NativeStart.main(Native Method) 
```

如果您想知道这是我的整个 SQL 课程。

```
public class SortBySQL {

    private DatabaseHelper mDbHelper;
    private SQLiteDatabase mDb;
    private final Context mCtx;

    private static final String sortby = ("CREATE TABLE " + TABLE_SORTBY
            + " (" + SORTBY_SORTBY_ID + " INT," + SORTBY_SORTBY_TYPE + " TEXT " + ");");

    private static class DatabaseHelper extends SQLiteOpenHelper {

        DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL(sortby);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_NAME);
            onCreate(db);
        }
    }

    public SortBySQL(Context ctx) {
        this.mCtx = ctx;
    }

    public SortBySQL open() throws SQLException {
        this.mDbHelper = new DatabaseHelper(mCtx);
        this.mDb = this.mDbHelper.getWritableDatabase();
        return this;
    }

    public void close() {
        this.mDbHelper.close();     
    }

    /** Add to the sort by list */
    public long addSortBy(String sortByID, String sortByType) {
        Log.d("addLocation", "FUCK");

        Log.d("Add Location", sortByID + " " + sortByType);

        ContentValues values = new ContentValues();

        values.put(SORTBY_SORTBY_ID, sortByID);
        values.put(SORTBY_SORTBY_TYPE, sortByType);

        return this.mDb.insert(TABLE_SORTBY , null, values);
    }

    /** Get all locations for the dialog box */
    public ArrayList<String> allLocations() {
        Cursor mCursor = mDb.rawQuery("SELECT * FROM " + TABLE_SORTBY, null);
        ArrayList<String> mArrayList = new ArrayList<String>();

        try {
            mCursor.moveToFirst();
            while (!mCursor.isAfterLast()) {
                mArrayList.add(mCursor.getString(mCursor.getColumnIndex(SORTBY_SORTBY_TYPE)));
                mCursor.moveToNext();
            }
        } catch (SQLiteException e) {
            Log.e("All Locations", "Error getting locations: " + e.toString());
        }finally{
            mCursor.close();
            close();
        }
        return mArrayList;
    }

    /** Delete all from the location table */
    public void deleteAllSortBy() {
        Log.d("Delete Locations", "Delete Locations");
        mDb.delete(TABLE_SORTBY, null, null);
        close();
    }

    /** Check that there are locations stored */
    public boolean countSortBy() {
        Log.e("countLocation", "countLocation");

        Cursor count = mDb.rawQuery("SELECT COUNT(*) FROM " + TABLE_SORTBY,
                null);

        if (count == null) {
            return false;
        }
        count.close();
        close();
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T15:40:13.453

我认为您正试图在未打开的 sqlite 数据库上打开一个游标，这就是为什么它让您`NullPointerException`在执行任何 sql 命令之前尝试验证您的数据库是否已创建和打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T15:11:39.943

如果您的查询有问题（在这种情况下似乎并不真正），那么也许尝试如下更改它：

```
Cursor mCursor = mDb.query(TABLE_SORTBY, null, null, null, null,
        null, null, null); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-19T07:03:26.713

语境 ？？

```
final Context context = this;
dbhelper = new DatabaseHelper(context); 
```

# java - 将循环嵌套到数学模型中以计算操作次数

> ID：11915495
> 
> 赞同：4
> 
> 时间：2012-08-11T14:25:17.683
> 
> 标签：java, algorithm, math

我正在阅读 Sedgewick 和 Wayne 的“算法 - 第四版”一书，我必须承认“算法分析”一章中的某些部分让我感到困惑！这可能是由于我缺乏数学知识造成的......无论如何！

在书中的某处，有一个程序示例，其中内部循环被称为恰好执行 N(N-1)(N-2)/6 次。这里是：

```
 public static int count(int[] a) {
        int count = 0;

        for (int i = 0; i < a.length; i++) {
            for (int j = i + 1; i < a.length; j++) {
                for (int k = j + 1; k < a.length; k++) {
                    if (a[i] + a[j] + a[k] == 0) {
                        count++; 
                    } 
                }
            }
        }
        return count;
    } 
```

我熟悉大 O 表示法，但在计算循环中操作的确切数量时，我迷路了。我理解 N(N-1)(N-2) 部分，但为什么我们必须除以 6？其背后的逻辑是什么？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-11T14:37:29.557

如果你能理解这`N(N-1)(N-2)`部分，这里有一个想法：

取 3 个数字 i、j、k 的组合，无论 3 落在该范围内`0 <= i,j,k < N`并且彼此不同（这也在代码中得到了注意，这就是为什么公式是`N(N-1)(N-2)`而不是`N^3`.

现在，假设数字是 13、17、42。它们是哪个数字并不重要。你可以用多少种方式把它们排成一行？

```
13-17-42
13-42-17
17-13-42
17-42-13
42-13-17
42-17-13 
```

六！

这些方式中有多少可以出现在代码中？只有一个！`j`（这在和的初始化中得到了注意`k`）。

因此，总数`N(N-1)(N-2)`应除以`6`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-06T16:10:11.917

您可以使用 Sigma 符号并了解如何得出书中提到的公式：

![在此处输入图像描述](../Images/71e285ecfc1f62a17e618944f09a6afe.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T14:37:52.647

据我们所知...

> 1+2+3+4...+N => N(N-1)/2

同样，最里面的循环的工作方式类似于

> 1.n+2(N-1)+3(N-2)+...N.1 => N(N-1)(N-2)/6

这是一个[证明](http://in.answers.yahoo.com/question/index?qid=20100705100158AArpW7n)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-11T15:23:01.070

6 是从 3 派生的！（三个阶乘衍生自三个循环）。

考虑最外层的循环，比如说，一个包含 5 个元素的数组。您为等式的这一部分计算 N=5，但您只会到达值 i=0、i=1 或 i=2 的内部循环。同样，您用 (N-1) 表示下一个循环，但您只会到达值 j=1、j=2 或 j=3 的内部循环，而不是 (N-1) 隐含的四个值）。

除以 6（对于三个循环）可以补偿在到达最内层循环之前数组中的值用完的值。

# django - 防止 Django 用户创建超过 N 个项目

> ID：11915497
> 
> 赞同：0
> 
> 时间：2012-08-11T14:25:38.123
> 
> 标签：django, validation

我的部分商业模式规定，某种类型的用户不能创建超过一定数量的“事物”。

让我用一些伪代码解释一下：

```
class Thing(Model):
     owner = ForeignKey(User) 
```

验证 a 的适当位置在哪里`Form`，以便用户无法创建`nth + 1`事物？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T14:29:32.013

您可以将其添加到表单的[`clean()`](https://docs.djangoproject.com/en/dev/ref/forms/validation/#cleaning-and-validating-fields-that-depend-on-each-other)方法中：

```
class ThingForm(forms.ModelForm):
    def clean(self, *args, **kwargs):
        cleaned_data = super(ThingForm, self).clean()
        owner = cleaned_data.get("owner")
        other_things_count = Things.objects.filter(owner=owner).count()
        if other_things_count >= 20:
            raise forms.ValidationError("Too many things!")
        return cleaned_data 
```

或者，您可以[覆盖模型`save()`方法](https://docs.djangoproject.com/en/dev/topics/db/models/#overriding-model-methods)，或者您可以创建一个[触发的信号`pre_save`](https://docs.djangoproject.com/en/dev/ref/signals/#django.db.models.signals.pre_save)，但是这些都不允许您将验证消息绑定到表单，所以我认为`clean()`上面的方法是最好的。

**编辑**如果你想排除编辑，你可以检查是否`ModelForm`有一个`instance`，即一个现有的对象

```
other_things_count = Things.objects.filter(owner=owner).exclude(pk=self.instance.pk).count() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T14:39:46.917

您可以考虑在以下位置之一引发异常：

*   [覆盖保存方法](https://stackoverflow.com/questions/4269605/django-overwrite-save-for-model)
*   绑定代码到[pre_save 信号](https://docs.djangoproject.com/en/dev/ref/signals/#django.db.models.signals.pre_save)
*   [在模型以干净](https://docs.djangoproject.com/en/dev/ref/forms/validation/#cleaning-and-validating-fields-that-depend-on-each-other)的形式出现的每种形式
*   在[模型清洁方法](https://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.clean)（我最喜欢的方法）中。

引发异常的示例代码：

```
if myThing.pk is None and myThing.owner.thing_set.count() > n:
     # here raise your exception:
     raise ValidationError("Too many things!") 
```

# javascript - 使 Windows 8 ListView 可编辑？

> ID：11915510
> 
> 赞同：1
> 
> 时间：2012-08-11T14:26:48.310
> 
> 标签：javascript, windows-8, microsoft-metro

有没有办法`ListView`使用 Javascript 使 Windows 8 中的 a 可编辑？

例如，当我在项目模板中放置一个输入元素时？

我看到输入，并且它的值已设置，但我无法单击它。

我的列表如下所示：

```
 <div class="InputList">
                <div class="employeeList" id="employeeL"
                    data-win-control="WinJS.UI.ListView" data-win-options="{
                    itemDataSource: employee.groupedItemsList.dataSource, 
                    itemTemplate: select('#employeeListTemplate'),
                    selectionMode: 'single', 
                    tapBehavior: 'directSelect',
                    layout:{type:WinJS.UI.ListLayout}}">
            </div> 
```

还有我的模板：

```
 <div id="employeeListTemplate" data-win-control="WinJS.Binding.Template">
            <div class="employeeItem">
                <input data-win-bind="innerText:Name" />
                <label data-win-bind="innerText:Vorname"></label>
            </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T15:40:13.903

`win-interactive`您需要为要交互的元素添加类。

# javascript - 如何在 window.setInterval 内每分钟运行一次 getJSON 函数？

> ID：11915512
> 
> 赞同：1
> 
> 时间：2012-08-11T14:27:19.717
> 
> 标签：javascript, jquery, json

我有两个工作功能。如何在 window.setInterval 内每分钟运行 $.getJSON(..)？

```
<script>
window.setInterval(function(){
    functionCall(); // ??
}, 60000);
</script>

<script>
$(document).ready(function() {
       var query = "SELECT * FROM schedule;";
       $.getJSON(
                   'modules/mod_scheduler/updateList.php?query='+query,
                   function(data) 
                   {
                       createChartControl('schedule', data);
                   }   
       );
});
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T14:31:04.410

```
<script>
window.setInterval(function(){
       var query = "SELECT * FROM schedule;";
       $.getJSON(
                   'modules/mod_scheduler/updateList.php?query='+query,
                   function(data) 
                   {
                       createChartControl('schedule', data);
                   }   
       );
}, 60000);
</script> 
```

虽然我觉得有必要补充一点，将 SQL 从您的网站前端直接传递到您的数据库是***非常非常糟糕的主意***。黑客可以对你的数据库做任何他们想做的事情，从访问私人数据到删除你的整个宇宙。

# django - IntegrityError：django单元测试中的重复键值

> ID：11915519
> 
> 赞同：4
> 
> 时间：2012-08-11T14:27:59.977
> 
> 标签：django, unit-testing, postgresql

我正在尝试为我的 django 项目运行以下单元测试：

```
from django.test import TestCase
from django.contrib.auth.models import User
from CarbonEmissions import models

class DbTest(TestCase):
    #is called before each test case (e.g test_insertingUserProfiles)
    def setUp(self):
        self.user = User.objects.create(username='ppoliani')
        self.userProfile = models.UserProfile.objects.create(user=self.user, title='Mr', type='student', occupation='student')

    def test_insertingUserProfiles(self):
        """
            Testing the insertion of user profiles into our datbase 
        """
        self.assertEqual(self.user.get_profile().title,'Mr')

    #is called after each test case (e.g test_insertingUserProfiles)
    def tearDown(self):
        self.user.delete()
        self.userProfile.delete() 
```

测试失败，抛出以下错误：

```
IntegrityError: duplicate key value violates unique constraint "CarbonEmissions_userprofile_user_id_key" DETAIL:  Key (user_id)=(1) already exists. 
```

我无法理解该代码有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T15:10:56.713

错误消息告诉您约束“CarbonEmissions_userprofile_user_id_key”失败，因为在某些表中，已经有一行 user_id 等于 1。

要解决这个问题，使用 pgAdminIII 查看约束和数据可能是最简单的方法，它通常与 PostgreSQL 一起安装。展开表名以查看列、约束等。展开约束以查看它们的名称和属性。右键单击表名称，然后选择“查看数据”以获取可让您浏览数据的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T22:01:33.973

也许用户配置文件对象已经由一些监听用户对象的 post_save 信号的代码创建？如果是这样，那么您在 setUp 函数中创建的配置文件是重复的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T23:09:46.107

您还没有发布完整的堆栈跟踪（请这样做！）但我认为错误出现在创建`UserProfile`对象的行上。Django 文档[明确指出，](https://docs.djangoproject.com/en/1.4/topics/auth/#storing-additional-information-about-users)*在*添加新用户时指定配置文件类`AUTH_PROFILE_MODULE`不会自动创建该类型的模型：

 *> 如果配置文件不存在，则 get_profile() 方法不会创建配置文件。您需要为 User 模型的 django.db.models.signals.post_save 信号注册一个处理程序，并且在处理程序中，如果 created 为 True，则创建关联的用户配置文件：

因此，正如 zifot 建议的那样，您的项目中可能还有一些其他代码创建了一个`UserProfile`. 如果这样做正确，只需`self.userProfile = models.UserProfile.objects.create(...`从中删除您的线路`setUp`并通过以下方式访问配置文件

```
self.user.get_profile() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-30T15:55:55.960

这是一个老问题，但我最近遇到了类似的问题。

我有一个模型 ，`Quote`它有一个名为 的字段`reported`。我最近将此字段更改为私有，并创建了一个属性来设置和获取它。（因为它必须更新另一个模型，而且我不想通过信号或在序列化程序中执行此逻辑。）当我更改它时，我在单元测试中遇到了同样的错误。

我的模型（简化）是

```
class Quote(TimeStampedModel):

    _reported = models.BooleanField(
        default=False,
    )

    @property
    def reported(self):
        return self._reported

    @reported.setter
    def reported(self, value):
        self._reported = value
        if value:
            try:
                self.authorization_form.reported = True
                self.authorization_form.save()
            except AuthorizationForm.DoesNotExist:
                pass
        self.save() 
```

我失败的单元测试是

```
def test_can_set_reported(self):
    quote = Quote.objects.create(
        reported=True,
    ) 
```

为了让它通过，我把它改成了

```
def test_can_set_reported(self):
    quote = Quote.objects.create(
        # reported=True,
    )
    quote.reported = True
    quote.save() 
```

我怀疑问题是我在设置`save()`时调用了该方法`reported`。因此，经理创建了对象并设置了`reported`字段（称为保存），然后尝试保存实例。这可能都发生在单个事务中，因此引入了重复密钥。

查看堆栈跟踪是值得的，我注意到两个插入语句。

这可能表明我应该将这个逻辑移到别处。（我会这样做。）但是遇到这个很有趣。*

# git - 如何让 git master 重新与 head 保持一致

> ID：11915527
> 
> 赞同：0
> 
> 时间：2012-08-11T14:29:02.487
> 
> 标签：git

我正在尝试通过 bitbucket 在线同步 git repo。我对这一切有点纠结，将 bitbucket repo 转移到一个团队，更改 repo 的遥控器等......现在当我尝试上传到 bitbucket 时，它说`" ! [rejected] master -> master (non-fast-forward)"`。我已经完成了 git pull，据我所知，一切都被合并了。我希望如果我的`master`标签重新与我的标签一致，`HEAD`一切都会再次解决。

这就是它在我的 git 客户端中的外观——但我很高兴使用命令行（实际上我更经常使用它）。

![git客户端](../Images/157cb9b3b85bdc6d15a15dedcda4bf8a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T14:33:07.107

在 master 上，快进到带有 HEAD 标签的提交，例如使用`git merge <commit>`. 然后推一下，`git push bucket master`。

看起来您当前处于分离的 HEAD 上（我猜这就是 HEAD 标签的含义），在您的 GUI 中选择 HEAD 提交并记下该提交的哈希值。然后你可以合并到那个。

# java - Java、泛型和类 问题

> ID：11915529
> 
> 赞同：2
> 
> 时间：2012-08-11T14:29:12.943
> 
> 标签：java, generics, playframework, ebean

这是我模型的父母：

```
abstract public class ApiModel {
    // Problem 1
    public static ExpressionList<Model> find() {
        return null;
    }

    public static <T extends Model> T findById(Long id) {
        return null;
    }
} 
```

一个模型 ：

```
public class MyModel extends ApiModel {

    private static Model.Finder<Long,MyModel> find = new Model.Finder(Long.class, MyModel.class);

    public static ExpressionList<MyModel> find() {
        return find.where();
    }

    public static MyModel findById(Long id) {
        return find.byId(id);
    }
} 
```

父母的控制器：

```
public class ApiController<T extends ApiModel> extends Controller {
    public Result list() {
            // Problem 2
        ExpressionList<T> list = T.find();
        return ok(Json.toJson(list.orderBy("name"), 10));
    }

    public Result create() {
        return update(null);
    }

    public Result details(Long id) {
            // Problem 3
        T model = T.findById(id);

        // ...
        return ok(result);
    }

    public Result update(Long id) {
            // Problem 4
        Form<T> form = form(T.class).bindFromRequest();

            T model = form.get();

            // Problem 5
            T.save();

        // ...
        return ok(result);
    }

    public Result delete(Long id) {
        // ...
        return ok(result);
    }
} 
```

控制器

```
public class AController extends ApiController<MyModel> {
    public final static AController rest = new AController();

    private AController() {}
} 
```

我面临的问题：

1.  我需要`find()`返回`ExpressionList<T extends Model>`，但如果我把它放在这里，我就会出错。
2.  Pb1 使这个错误出现，它说“类型不匹配：无法从 ExpressionList 转换为 ExpressionList”。我想通过修复 1., 2\. 也将被修复。
3.  这很奇怪，它返回“绑定不匹配：ApiModel 类型的泛型方法 findById(Long) 不适用于参数 (Long)。推断的类型 T&Model 不是有界参数的有效替代品”
4.  我当然不能用`.class`这个。但是我该怎么办呢？
5.  由于模型使用注解来拥有`@Entity`，我不能在这里使用它，它无法识别：/

我认为一切都是相关的。也许我的代码设计不佳？

这就是这种结构的原因。我正在使用 PlayFramework（具有静态控制器），我喜欢继承，因此喜欢通用模型。但为此，我需要实例而不是静态引用，因此`public final static AController rest`. 但是，我无法访问模型（`find`& `findById`）的静态上下文。所以我做了ApiModel。但这也无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T14:42:45.480

`ApiModel`如果您稍微改写一下，则不需要该课程`ApiController`：

```
public class ApiController<T extends Model> extends Controller {

    private Model.Finder<Long,T> finder;

    private final Class<T> modelClass;

    public ApiController(Class<T> modelClass) {
        this.modelClass = modelClass;
        finder = new Model.Finder(Long.class, modelClass);
    }

    public Result list() {
        ExpressionList<T> list = finder.where();
        return ok(Json.toJson(list.orderBy("name"), 10));
    }

    public Result details(Long id) {
        T model = finder.findById(id);

        // ...
        return ok(result);
    }

    public Result update(Long id) {
        // Problem 1
        Form<T> form = form(modelClass).bindFromRequest();

            T model = form.get();

            T.save();

        // ...
        return ok(result);
    }

    ...
}

public class AController extends ApiController<MyModel> {
    public final static AController rest = new AController();

    private AController() {
        super(MyModel.class);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T15:21:43.957

我不知道你为什么需要那些静态方法`ApiModel`。

你应该能够`ApiController`赋予`Class`for `T`。

```
public class ApiController<T extends ApiModel> extends Controller {
    private final Class<T> tClass;
    ApiController(Class<T> tClass) {
        this.tClass = tClass;
    }

public class AController extends ApiController<MyModel> {
    ....
    private AController() {
        super(MyModel.class);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-06T12:12:13.530

从我的角度来看，这样做应该是一个坏主意。你可以在play中使用普通的方法，你只需要在路由列表中以a`@`开头引用该方法。

所以，如果你有这样的控制器：

```
public class MyController extends Controller {
    public Result index() {
        return TODO;
    }
} 
```

您可以在路由器中这样使用：

```
GET         /           @controllers.MyController.index() 
```

# qtp - QTP-将obj添加到本地-对象位置未对齐-距其图像1'

> ID：11915537
> 
> 赞同：0
> 
> 时间：2012-08-11T14:30:38.010
> 
> 标签：qtp

（如果有人需要参考我被卡住的地方，我使用了教程中的chasstudentloans.com）我复制/粘贴了一行来添加一个WebEdit对象，运行，得到在OR中找不到obj的错误。我尝试将 obj 添加到本地，我单击应用程序中 WebEdit 区域的顶部，但它似乎与图像不一致：我不得不猜测在应用程序窗口上单击大约 1 英寸才能找到相应的元素。如果我根据图像单击确切位置，我会得到一个位于下面 2 行的 WebEdit 元素......对我来说奇怪的是以前我对这一步没有任何问题。从那以后，我没有进行任何软件更新。

任何人都知道为什么这不对齐？显示器或软件有什么问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:48:50.017

如果您使用不同于 100% 的缩放，有时可能会发生这种情况。

# objective-c - 在 AppDelegate 中存储、访问和编辑字符串

> ID：11915538
> 
> 赞同：0
> 
> 时间：2012-08-11T14:30:42.613
> 
> 标签：objective-c, ios, nsstring, appdelegate

嗨，我已经看到了这个问题的答案：

[如何将值从一个视图传递到另一个视图](https://stackoverflow.com/questions/7766422/how-to-pass-a-value-from-one-view-to-another-view)

我遇到了一些麻烦。我在 AppDelegate 的头文件中存储了一个字符串。

```
#import <UIKit/UIKit.h>

@interface AppDelegate : UIResponder <UIApplicationDelegate>
{
    NSString *commString;
}

@property (strong, nonatomic) UIWindow *window;

@end 
```

我现在需要访问它并在一个视图中更改它。然后在另一个视图中显示它。上一页的答案简要说明了这一点，但我对答案的第二部分有疑问。它不会让我这样做：

```
AppDelegate.commString = myString; //mystring being an NSString 
```

请问有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T14:34:14.877

问题是双重的。首先，您正在尝试访问类上的 ivar，其次，它是一个类而不是实例。 `[[UIApplication sharedApplication] delegate];`将委托类的有效*实例*作为单例返回，以便在多个位置轻松访问，但您需要将 ivar 声明为 @property，否则会冒使用（非常不稳定的）结构访问运算符的风险。

```
#import <UIKit/UIKit.h>

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) NSString *commString; //@synthesize this
@property (strong, nonatomic) UIWindow *window;

@end

AppDelegate *del = [[UIApplication sharedApplication] delegate];
del.commString = myString; 
```

# freepascal - 用 Pascal 计算二次方程的实根

> ID：11915542
> 
> 赞同：1
> 
> 时间：2012-08-11T14:31:08.977
> 
> 标签：freepascal, quadratic, equation-solving

我正在尝试解决这个问题：

（编写一个程序来计算二次方程的实根（ax ² + bx + c = 0）。根可以使用以下公式计算：

x1 = (-b + sqrt(b ² - 4ac))/2a

和

x2 = (-b - sqrt(b ² - 4ac))/2a

我写了以下代码，但它不正确：

```
program week7_lab2_a1;
var a,b,c,i:integer;
x,x1,x2:real;

begin
  write('Enter the value of a :');
  readln(a);

  write('Enter the value of b :');
  readln(b);

  write('Enter the value of c :');
  readln(c);

  if (sqr(b)-4*a*c)>=0 then
    begin
      if ((a>0) and (b>0)) then
        begin
          x1:=(-1*b+sqrt(sqr(b)-4*a*c))/2*a;
          x2:=(-1*b-sqrt(sqr(b)-4*a*c))/2*a;

          writeln('x1=',x1:0:2);
          writeln('x2=',x2:0:2);
        end
      else
        if ((a=0) and (b=0)) then
          write('The is no solution')
        else
          if ((a=0) and (b<>0)) then
            begin
              x:=-1*c/b;
              write('The only root :',x:0:2);
            end;
    end
  else
    if (sqr(b)-4*a*c)<0 then
      write('The is no real root');

  readln;
end. 
```

你知道为什么吗？

并采取 a=-6,b=7,c=8 .. 你可以在编写伪代码后进行桌面检查吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T15:01:52.223

您在此处遇到运算符优先级错误：

```
x1:=(-1*b+sqrt(sqr(b)-4*a*c))/2*a;
x2:=(-1*b-sqrt(sqr(b)-4*a*c))/2*a; 
```

最后看看，`2 * a`没有做你认为它做的事情。由于优先规则，它确实将表达式除以 2，然后将其*乘以。*`a`这就是你想要的：

```
x1:=(-1*b+sqrt(sqr(b)-4*a*c))/(2*a);
x2:=(-1*b-sqrt(sqr(b)-4*a*c))/(2*a); 
```

事实上，这是因为表达式是从左到右求值的括号，并且乘法和除法[具有相同的优先级](http://www.hkbu.edu.hk/~bba_ism/ISM2110/pas039.htm)。所以基本上，一旦它除以 2，它就会说“我已经完成了除法，我将`a`按照告诉的方式将我现在拥有的东西相乘”。

由于您给出的公式似乎并不清楚，因此这是二次公式：

![在此处输入图像描述](../Images/93fedb3c80fd5a3a5586f6b6bbdd37d3.png)

如您所见，您需要除以 2a，因此您必须在此处使用方括号以使其正常工作，就像此等式的正确纯文本表达式是 x = (-b +- sqrt(b^2 - 4ac) ) / (2a)。

* * *

否则代码看起来很好，如果有些复杂（例如，您可以在输入后立即丢弃 (a = 0) 和 (b = 0) 的情况，这将稍后简化逻辑）。您真的是要排除负系数，还是仅仅排除零系数？你应该检查一下。

还要小心浮点相等比较 - 它适用于 0，但通常不适用于大多数常量，因此如果您需要检查一个值是否等于另一个值（例如：），请改用`abs(a - b) < 1e-6`epsilon

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T15:58:07.273

完全同意托马斯在回答中所说的话。只是想添加一些优化标记：

您检查 if 语句中的判别值，然后再次使用它：

```
if (sqr(b)-4*a*c)>=0 then
...
x1:=(-1*b+sqrt(sqr(b)-4*a*c))/2*a;
x2:=(-1*b-sqrt(sqr(b)-4*a*c))/2*a; 
```

这不是很有效 - 而不是一次计算判别值多次计算它。您应该首先计算判别值并将其存储到某个变量中：

```
D := sqr(b)-4*a*c; 
```

之后，您可以在所有表​​达式中使用您的评估值，如下所示：

```
if (D >= 0) then
...
x1:=(-b+sqrt(D)/(2*a);
x2:=(-b-sqrt(D)/(2*a); 
```

等等。

* * *

另外，我不会写`-1*b`...而不是仅使用`-b`或`0-b`在最坏的情况下使用，而不是乘法。这里不需要乘法。

* * *

**编辑**：

还有一点注意事项：

你的代码：

```
if (sqr(b)-4*a*c)>=0 then
begin
 ...
end
  else
    if (sqr(b)-4*a*c)<0 then
      write('The is no real root'); 
```

您在这里仔细检查 if 条件。我简化了这个：

```
if (a) then
    begin ... end
else
    if (not a)
    ... 
```

您在哪里检查`not a` *（在您的代码中它对应于`(sqr(b)-4*a*c)<0`）* - 在这种情况下，条件只能为假（对于 a），无需仔细检查。你应该把它扔掉。

# javascript - 检测垂直滚动和滚动条宽度并将宽度更改应用于正文

> ID：11915544
> 
> 赞同：0
> 
> 时间：2012-08-11T14:31:32.683
> 
> 标签：javascript, jquery, asp.net

在我的页面中，我希望检测页面是否有垂直滚动条，如果有，需要检测滚动条的宽度，这样我可以将我的 body 缩小宽度，从而防止我的侧边栏改变位置查看非滚动页面到滚动页面。我有以下 jQuery/Javascript 代码：

```
 $(document).ready(function () {
        var parent, child, width;

        if (width === undefined) {
            parent = $('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo('body');
            child = parent.children();
            width = child.innerWidth() - child.height(99).innerWidth();
            parent.remove();
        }

        if ($("body").height() > $(window).height()) {
            //change width of body here
        }
    }); 
```

不幸的是，这段代码对我不起作用。有人可以让我知道我要去哪里错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T14:44:58.087

```
(function($) {
    $.fn.ScrollBarWidth = function() {
        if (this.get(0).scrollHeight > this.height()) { //check if element has scrollbar
            var inner = document.createElement('p');
            inner.style.width = "100%";
            inner.style.height = "200px";
            var outer = document.createElement('div');
            outer.style.position = "absolute";
            outer.style.top = "0px";
            outer.style.left = "0px";
            outer.style.visibility = "hidden";
            outer.style.width = "200px";
            outer.style.height = "150px";
            outer.style.overflow = "hidden";
            outer.appendChild(inner);
            document.body.appendChild(outer);
            var w1 = inner.offsetWidth;
            outer.style.overflow = 'scroll';
            var w2 = inner.offsetWidth;
            if (w1 == w2) w2 = outer.clientWidth;
            document.body.removeChild(outer);
            return (w1 - w2);
        }
    }
})(jQuery); 
```

像这样运行：

```
var scrollbarWidth = $('body').ScrollBarWidth();
console.log(scrollbarWidth);​ //prints the scrollbar width to the console 
```

[小提琴](http://jsfiddle.net/J6rCF/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T14:52:12.057

您不需要更改`body`. 默认情况下，它是窗口宽度的 100%，并且会在出现滚动条时进行调整。

但是，如果由于某种原因您不能将宽度设置为 100%，请首先查看禁用水平滚动条是否对您有帮助：

```
overflow-x: hidden; 
```

如果这不能解决问题，请使用[**此处**](https://stackoverflow.com/questions/986937/javascript-get-the-browsers-scrollbar-sizes)的函数来获取滚动条的宽度。然后，监听`window`resize 事件：

```
var $window = $(window),
    $body = $('body');

function resize() {
    if ($body.height() > $window.height()) {
        $body.width($body.width() - getScrollBarWidth());
    }
}

$(window).resize(resize);​ 
```

# css - 悬停边框底部时更改文本颜色

> ID：11915546
> 
> 赞同：0
> 
> 时间：2012-08-11T14:31:51.553
> 
> 标签：css, menu, hover, border, stylesheet

我有这个代码，请注意这个小提琴：http: [//jsfiddle.net/VjhJ4/19/](http://jsfiddle.net/VjhJ4/19/)

当您将鼠标悬停在单词上时，文本颜色会变为白色 - 这就是我想要的。但是，当鼠标悬停在 20px 边框底部时，文本颜色不会变为白色。只需将鼠标悬停在边框底部并检查。

当您将鼠标悬停在底部时，如何使文本颜色变为白色？我目前有悬停设置`ul#secondary-menu a:hover { color: #FFFFFF;}`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T14:41:16.587

只需添加（或修改您现有的 CSS 以包含）以下内容：

```
#second-menu ul.nav li:hover a {
    color: #fff;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/VjhJ4/21/)。

> 你能解释一下为什么它之前没有改变悬停以及这有什么帮助吗？正如我所提到的，我的编码知识是有限的，所以我试图了解这里的问题是什么

它之前并没有改变悬停效果，因为你大概（我假设，我在不到一半的时间内放弃了阅读你的 CSS），为元素的子元素指定了一个`:hover`规则，但是边框连接到，而不是。所以悬停在's 边界上没有效果。`a``li``li``a``li`

此规则仅指定`a`元素的颜色`li`应为白色 ( `#fff`) 以响应鼠标悬停在`li`元素上。在实践中，将此规则放在样式表的末尾会导致它覆盖任何其他可能已在其他地方声明的冲突规则（并且，由于样式表的长度，我再次放弃阅读样式表）。

我建议您找到定义`a:hover`效果的任何规则，并将这两个规则加在一起，例如：

```
#second-menu ul.nav li a:hover,
#second-menu ul.nav li:hover a {
    color: #fff;
} 
```

特异性可能不需要那么高，因此您可以将选择器减少到更短的内容，例如：

```
ul.nav li a:hover,
ul.nav li:hover a {
    color: #fff;
} 
```

哦，值得注意的是，您有很多内联 ( `style="..."`) 和外部样式（使用样式表）；尝试并仅使用外部形式，以便清晰和易于更新、编辑和维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T14:44:34.613

如果您希望边框成为超链接的一部分（也就是说，当鼠标悬停在边框上时用户可以单击超链接），那么您需要从 中删除边框`li`并将其添加到超链接中. 如有必要，添加`display:inline-block`到超链接。

如果边框不需要成为超链接的一部分，那么@David Thomas 的建议应该就是您所需要的。

[修改后的演示](http://jsfiddle.net/w73bK/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T14:52:46.233

搜索字符串 ul#secondary-menu a:hover { color: #FFFFFF;}

以您的 CSS 样式替换它

ul#secondary-menu li:hover a{ 颜色: #FFFFFF;}

# opengl - OpenGL，如何累积 alpha 并使用 glAlphaFunc 进行 alpha 测试？

> ID：11915548
> 
> 赞同：1
> 
> 时间：2012-08-11T14:32:04.430
> 
> 标签：opengl

`glAlphaFunc(GL_GEQUAL, 0.5)`可以显示 alpha >= 0.5 的图像。

opengl可以显示alpha的累积吗？

例子：

2 图像，它们不会单独显示某些部分，因为 alpha < 0.5。

现在有些重叠，它们的alpha总和为0.6，如​​何显示这个重叠部分？

我尝试使用opengl制作一个metaball示例，如果您有任何想法，请给我一些提示。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T14:44:16.043

我会将图像渲染到单独的缓冲区（关闭 Alpha 测试，并添加它们的 alpha）。然后，使用 Alpha Test 将缓冲区渲染到屏幕上。

1.  首先，创建一个空缓冲区并将每个像素的 alpha 设置为 0。
2.  然后，在所述缓冲区上渲染所有对象，使用颜色混合功能并添加 alpha。
3.  然后，在打开 Alpha 测试的情况下重新渲染屏幕上的缓冲区。

以及“opengl 可以显示 alpha 的累积吗？”的答案？- 是的。例如，您可以将 Alpha 渲染为灰度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-15T08:45:03.893

为我工作 glBlendFunc(GL_SRC_ALPHA, GL_ONE);

# apache-flex - 组件显示在设计视图中，但在应用程序启动时不显示

> ID：11915551
> 
> 赞同：0
> 
> 时间：2012-08-11T14:32:48.680
> 
> 标签：apache-flex, flash-builder4.5

这就是正在发生的事情：我有一个带有以下选项卡的 Tabnavigator：

```
<s:NavigatorContent width="100%" height="100%" label="Add a logo" includeIn="loggedin">

<components:LogoSearch />

</s:NavigatorContent> 
```

当我使用以下代码将状态更改为“登录”时：

```
protected function Login_getStateHandler(event:Event):void
        {
            this.currentState = "loggedin";
        } 
```

navigatorContent 在设计视图中显示但不显示组件“LogoSearch”，但是当我切换状态时它会显示。

“LogoSearch”中没有定义任何状态，应该显示......？

当我在“正常”和“登录”中包含选项卡导航器时，然后将状态更改为“登录”，组件“LogoSearch”显示。当我只在“loggedin”中显示 tabnavigator 时，将状态更改为“loggedin”，组件“LogoSearch”不显示。

知道为什么会这样吗？我根本不是 flex 方面的专家，所以请随时指出我的错误。谢谢。

* * *

按照林天振的建议，尝试使用 invalidateDisplayList() 和 invalidateProperties() 。仍然没有任何显示。

```
<s:NavigatorContent width="100%" height="100%" label="Add a logo" includeIn="loggedin" id="AddLogoTab" >

    <s:Label text="test" id="test" />

</s:NavigatorContent> 
```

和 ：

```
protected function Login_getStateRegisterHandler(event:Event):void
        {
            this.currentState = "register";
            test.invalidateDisplayList();
            test.invalidateProperties();
            test.validateNow();

            AddLogoTab.invalidateDisplayList();
            AddLogoTab.invalidateProperties();
            AddLogoTab.validateNow();
        } 
```

无论我做什么，状态更改后 NavigatorContent 的内容都不会显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T14:52:24.087

为了缩小您遇到的问题，您可以从消除`includeIn="loggedin"`代码开始，这至少可以确保您的组件正确显示。

接下来，我会在你的`Login_getStateHandler`函数上设置一个断点，看看它是否被调用过。如果不是，那么在您的布线中的某个地方没有调用处理程序。您可以在此处发布更多代码以获得帮助。

# python - 机械化和 Python 无法正确处理 cookie

> ID：11915560
> 
> 赞同：0
> 
> 时间：2012-08-11T14:33:35.950
> 
> 标签：python, mechanize, session-cookies

我有一个使用 mechanize 浏览器的 Python 脚本，它登录到一个自托管的 Wordpress 博客，在自动重定向到仪表板后导航到不同的页面以自动化几个内置功能。

这个脚本实际上在我的大多数博客上都 100% 有效，但其中一个进入了永久循环。

不同之处在于，唯一失败的是一个名为 Wassup 的插件正在运行。这个插件为所有访问者设置了一个会话 cookie，我认为这就是导致问题的原因。

当脚本进入新页面时，Wordpress 代码没有设置正确的 cookie，确定浏览器没有登录并重定向到登录页面。脚本再次登录并尝试相同的功能，然后我们再次进行。

我尝试使用 Twill 正确登录并正确处理 cookie，但默认情况下，Twill 将所有内容输出到命令行。这不是我想要的行为，因为此时我正在进行页面操作，我需要访问原始 html。

这是设置代码

```
# Browser
self.br = mechanize.Browser()

# Cookie Jar 
policy = mechanize.DefaultCookiePolicy(rfc2965=True) 
cj = mechanize.LWPCookieJar(policy=policy) 
self.br.set_cookiejar(cj) 
```

成功登录后我调用这个函数

```
def open(self):
    if 'http://' in str(self.burl):
        site = str(self.burl) + '/wp-admin/plugin-install.php' 
        self.burl = self.burl[7:]
    else:
        site = "http://" + str(self.burl) + '/wp-admin/plugin-install.php' 
    try:
        r = self.br.open(site, timeout=1000)
        html = r.read()
        return html
    except HTTPError, e:
        return str(e.code) 
```

我在想我需要将 cookie 保存到一个文件中，然后重新排序，以便 Wordpress 会话 cookie 在 Wassup 之前返回。

还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:38:40.973

事实证明，这是一个完全不同的问题，并且可以解决，这就是为什么我决定将答案放在这里，供以后阅读本文的任何人使用。

设置 WordPress 站点时，可以选择将 url 默认为[http://sample.com](http://sample.com)或[http://www.sample.com](http://www.sample.com)。事实证明这是 cookie 存储的问题。Cookie 与 URL 一起存储，作为其名称的一部分。我的程序使用这些格式中的一种或另一种对 url 进行半硬编码。这意味着每次我发出新的 url 请求时，它的格式都错误，并且找不到具有正确名称的 cookie，因此 WordPress 网站正确地决定我没有登录并让我重新登录。

修复方法是在登录后获取重定向中传递的 url 并重新编码变量（在本例中为 self.burl）以反映 .httaccess 文件期望看到的内容。

这解决了我的问题，因为我的一些网站具有一种格式，而另一些则具有另一种格式。

我希望这可以帮助某人使用请求、斜纹、机械等。

# windows-8 - 我可以将复合形状作为 WinRT XAML 中的资源吗？

> ID：11915561
> 
> 赞同：1
> 
> 时间：2012-08-11T14:33:42.393
> 
> 标签：windows-8, winrt-xaml, windows-store-apps, drawingbrush

我正在开发一个 Windows 8 Metro 风格的应用程序，我想使用矢量图像。由于似乎没有对 svg 图像的直接支持，我尝试使用由多个形状（路径和一些线）组成的 xaml 片段作为图像。我想要一个具有复合形状的资源字典条目，并能够将其包含在不同的页面中。理想情况下，我还希望能够从数据绑定属性中解析特定的复合形状。

从我读过的内容来看，WPF 方法是有一个`VisualBrush`或`DrawingBrush`由形状组成，但在 Windows 8 中没有这样的类（而且似乎它甚至不可能从 派生`Brush`）。

我应该如何使用 WinRT UI 执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:14:32.440

不，您不能将 DrawingBrush 用作 WinRT XAML 中背景属性的值。太糟糕了，是吗？似乎是一个非常强大的功能，可以使用矢量布局设置对象的填充。事实上，DrawingBrush 甚至还不是 Windows 8 的一部分。就是这样。目前，图像是一个很好的解决方案。但我们感受到你的痛苦。

我不妨折腾一下，VisualBrush 也不是 WinRT-XAML 的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T19:37:38.177

每个 XAML 片段实际上都是一个 UI 元素。我认为最简单的方法是将 XAML 放入它自己的用户控件中，然后将用户控件添加到您想要在其上显示“绘图”的每个页面。如果您希望用户控件显示不同的形状，您可以在控件上公开一个属性，将数据绑定到该属性，然后在属性的设置器中读取值并切换各种 XAML 形状的可见性以显示或隐藏任何内容您想要的合成图像的一部分。这有点蛮力，但会做你想做的事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T13:36:40.277

Windows8 在其中包含矢量图形的方法只是使用 ViewBox+Canvas 和 Path 元素。我认为它运作良好，尽管我确实想念 VisualBrush。

# google-chrome-extension - Chrome 扩展内容 -> 后台消息传递

> ID：11915562
> 
> 赞同：3
> 
> 时间：2012-08-11T14:33:45.017
> 
> 标签：google-chrome-extension, message-passing

这是怎么回事？

内容脚本：

```
chrome.extension.sendMessage({message: "whats the url"}, function(response) {
    alert(response.hereistheurl);
}); 
```

背景

```
chrome.extension.onMessage.addListener(function (request, sender, sendResponse) {
    if (request.message) {
        var taburl = sender.tab.url;
        alert("the background is trying to send " + taburl);
        sendResponse = ({hereistheurl: "taburl"});
    }
    else {
        alert("trying")
        var tabnumber = sender.tab.id;
        chrome.tabs.update(tabnumber, {url: request.gohere});
    }
  }); 
```

其他工作正常。当 if 语句为真时，后台会尝试发送响应，但我在内容脚本中看不到任何内容。

# c# - 在开始之前为进程设置 RAM

> ID：11915563
> 
> 赞同：0
> 
> 时间：2012-08-11T14:34:02.050
> 
> 标签：c#, .net, ram

我正在尝试为服务器创建一个 GUI，但是当我启动服务器时它抱怨它没有足够的内存，当我将它添加`-Xmx1024M -Xms1024M`到启动命令时，JAVA 说它不能保留足够的空间，但是怎么做我在启动之前为进程设置了保留的 RAM？

```
 TekkitServer = new Process();
    ProcessStartInfo TekkitStarter = new ProcessStartInfo(@"java", @"-Xmx1024M -Xms1024M -jar ServerFiles\Tekkit.jar nogui");
    TekkitStarter.UseShellExecute = false;
    TekkitStarter.RedirectStandardError = true;
    TekkitStarter.RedirectStandardOutput = true;
    TekkitStarter.CreateNoWindow = true;
    TekkitServer.StartInfo = TekkitStarter;
    TekkitServer.OutputDataReceived += new DataReceivedEventHandler(TekkitServer_OutputDataReceived);
    TekkitServer.ErrorDataReceived += new DataReceivedEventHandler(TekkitServer_ErrorDataReceived);
    TekkitServer.EnableRaisingEvents = true;
    TekkitServer.Start();
    InitializeComponent();
    TekkitServer.BeginErrorReadLine();
    TekkitServer.BeginOutputReadLine(); 
```

这是我现在得到的代码

**更新：**

当我`java -Xmx1024M -Xms1024M -jar ServerFiles\Tekkit.jar nogui`在 CMD 中运行时，它运行良好并且不会哭泣

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T15:10:14.630

应用程序从可用系统内存中自动分配操作所需的内存。您很可能正在使用无限递归（这会导致 stackoverflow 异常，因为堆栈很小）或资源没有得到有效处理。您应该检查您的代码是否存在这些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T21:30:06.063

好的，我通过将我的 jre7 32 位升级到 jre7 64 位来修复它，但现在输入不起作用但问题已经解决了

# android - 使用“bitmap.compress()”将图像存储在内部存储中并使用“setImageUri()”在 ImageView 中显示？

> ID：11915568
> 
> 赞同：0
> 
> 时间：2012-08-11T14:34:23.813
> 
> 标签：android, bitmap, android-imageview

我正在打开图库并在选择图像时获取图像的路径。**然后我从这个路径创建一个位图，并通过bitmap.compress()**函数将此位图存储在内部存储中。**是否可以通过在 ImageView 的setImageUri()**函数中指定此存储位图的路径来在 ImageView 中显示此图像？

```
Bitmap bmap = BitmapFactory.decodeFile(selectedImagePath);
FileOutputStream fos = context.openFileOutput(fileName, Context.MODE_PRIVATE);
bmap.compress(CompressFormat.PNG, 100, fos);
fos.close(); 
```

在这里，**fileName**是一个整数（实际上是一个小部件的 ID）转换为字符串。

是否可以像这样在 ImageView 中加载此图像：

```
File internalFile = getFileStreamPath(fileName);
Uri internal = Uri.fromFile(internalFile);
imageView.setImageUri(internal); 
```

我知道我可以使用**setImageBitmap()**函数设置图像，但这需要我从文件中读取位图并将其传递给 Parcel 对象，这会在图像很大时导致**Failed Binder Transaction错误。**我正在制作一个通过 ImageView 显示图像的小部件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T15:27:11.623

setImageUri() 方法不打算以这种方式使用，请参阅[此问题和答案](https://stackoverflow.com/questions/3870638/how-to-use-setimageuri-on-android)。最好的方法似乎是在调用 setImageBitmap() 之前将位图缩放到视图，例如使用[带有 Matrix 参数的 Bitmap.createBitmap()](http://developer.android.com/reference/android/graphics/Bitmap.html#createBitmap%28android.graphics.Bitmap,%20int,%20int,%20int,%20int,%20android.graphics.Matrix,%20boolean%29)

# servicestack - servicestack 序列化为空的 json 字符串

> ID：11915571
> 
> 赞同：1
> 
> 时间：2012-08-11T14:34:53.507
> 
> 标签：servicestack

我对 ServiceStack (SS) 有一个奇怪的问题。我传递给方法的实体总是被 SS 序列化为空的 json 字符串。所以 s 总是“{}”。我调试并看到该实体是一个水合实例，具有带值的属性。

任何想法为什么会这样？

```
public virtual void Serialize<TEntity>(TEntity entity, Stream stream)
{
    // s is always {}
    var s = JsonSerializer.SerializeToString(entity);

    // rest is not important at this point...
    s = JsvFormatter.Format(s);
    using (var writer = new StreamWriter(stream))
    {
        writer.Write(s);
    }
} 
```

我正在编辑问题，准确显示传入的 (VolumeCreated) 实体是什么。

```
public class VolumeEvent : IEvent<VolumeID>
{
    public VolumeEvent(VolumeID identity)
    {
        Identity = identity;
    }

    #region Implementation of IEvent<out VolumeIdentity>

    public VolumeID Identity { get; private set; }

    #endregion
}

public class VolumeCreated : VolumeEvent
{
    public DateTime PublishDate { get; set; }
    public string Title { get; set; }

    public VolumeCreated(VolumeID identity, string title, DateTime publishDate)
        : base(identity)
    {
        Title = title;
        PublishDate = publishDate;
    }
} 
```

![前](../Images/a061235885a25507c1f575edc87f39d3.png) ![后](../Images/a0085fb67e9c5c1a3da52b9d935e8a44.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T18:17:54.640

ServiceStack 仅序列化公共属性。

# java - 用于提取图像描述符的java库

> ID：11915573
> 
> 赞同：1
> 
> 时间：2012-08-11T14:35:04.703
> 
> 标签：java, image, extract, descriptor

我做了很多研究来找到一个带有预定义函数的库，这些函数可以检测图像的描述符（颜色、形状、纹理），比如主色、Gabor Filtring .. 我发现了不止一个库，但它们都被使用了如果有人知道任何与 java 语言一起使用的库，我将非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T15:31:10.787

考虑[ImageMagick](http://www.imagemagick.org)

要从 java 代码中使用它，请使用[IM4JAVA](http://im4java.sourceforge.net)

另请查看这篇文章：“[确定主色](http://blog.endpoint.com/2011/04/determining-dominant-image-color.html)”

# iphone - 多步骤创建路径

> ID：11915576
> 
> 赞同：0
> 
> 时间：2012-08-11T14:35:55.980
> 
> 标签：iphone, ios

我正在尝试创建一个路径，然后立即检索并修改它。问题是路径被正确创建和显示，但是我无法检索它并进一步修改它。

更新：问题是当我在第二个函数中调用 CGContextClosePath 时，编译器返回此错误 **：：CGContextClosePath：没有当前点。** 它基本上不会“识别”旧路径，因此无法关闭它。任何建议将不胜感激！谢谢！

这是我的代码：

```
//Defined at the very beginning outside the functions
CGMutablePathRef _path;

//First function
UITouch *touch = [touches anyObject];
CGPoint currentPoint = [touch locationInView:self];

UIGraphicsBeginImageContext(self.frame.size);
CGContextRef context = UIGraphicsGetCurrentContext();

[drawImage.image drawInRect:CGRectMake(0, 0, drawImage.frame.size.width, drawImage.frame.size.height)];
CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound); 

CGContextSetLineWidth(UIGraphicsGetCurrentContext(), BrushSize);

CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 1.0, 1.0, 1.0, 1.0);  
_path = CGPathCreateMutable();

CGContextAddPath (context, _path);

CGContextMoveToPoint(context, lastPoint.x, lastPoint.y);
CGContextAddLineToPoint(context, currentPoint.x, currentPoint.y);

CGContextStrokePath(context);

drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

//Second function
UIGraphicsBeginImageContext(self.frame.size);
CGContextRef context = UIGraphicsGetCurrentContext();

[drawImage.image drawInRect:CGRectMake(0, 0, drawImage.frame.size.width, drawImage.frame.size.height)];
CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound); //kCGLineCapSquare, kCGLineCapButt, kCGLineCapRound
CGContextSetLineWidth(UIGraphicsGetCurrentContext(), BrushSize); //1.0); // Brush size

CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 1.0, 0.0, 0.0, 1.0);
CGContextSetRGBFillColor(context, 1.0, 0.4, 1.0, 1.0);

CGPathRef pathFill = CGPathCreateCopy (_path);
CGContextAddPath (context, pathFill);

CGContextClosePath(context);
CGContextFillPath(context);

drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T14:40:25.963

尝试在描边之前再次将路径添加到上下文中。

```
CGContextAddPath (UIGraphicsGetCurrentContext(), _path);
CGContextStrokePath(UIGraphicsGetCurrentContext());
drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

如果它不起作用，请尝试创建原始路径的副本并在其中添加新行，而不是尝试使用原始路径。利用：

```
CGPathCreateCopy 
```

# php - Mysql 存储大量位大小的设置

> ID：11915578
> 
> 赞同：1
> 
> 时间：2012-08-11T14:36:36.700
> 
> 标签：php, mysql, structure, bit, storage

我有大约 38 列的表。

`ID`, `name`, 和其他 36 个是用户的位大小设置。

其他 36 列分为 6 个“设置”，例如`Setting1_on`、`Setting1_colored`等。

这是最好的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T14:41:54.263

如果它必须在一个表中，并且它们都是切换类型设置，例如是/否、真/假等...使用 TINYINT 来节省空间。

我建议创建一个单独的表“设置”，每个选项有 36 条记录。然后创建一个到用户表的链接表，其中包含一个值列来记录用户设置。这将为用户设置创建多对多链接。它还使添加新设置变得容易——只需在“设置”表中添加一个新行。这是一个示例架构。我使用 varchar 作为设置的值，以允许以后设置可能不是位，但如果大小是一个问题，请随意使用 TINYINT。此解决方案不会使用与一个表一样多的空间，但存在大量稀疏填充的列的危险。

```
CREATE TABLE `user` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
   `name` varchar(64) DEFAULT NULL,
  `address` varchar(64) DEFAULT NULL,
  PRIMARY KEY (`id`)
 ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `setting` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(64) DEFAULT NULL,
   PRIMARY KEY (`id`)
  ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `setting_user` (
  `user_id` int(11) NOT NULL DEFAULT '0',
  `setting_id` int(11) unsigned NOT NULL,
  `value` varchar(32) DEFAULT NULL,
  PRIMARY KEY (`user_id`,`setting_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T14:56:10.467

一切都取决于您要如何访问它们。如果您想（或必须）只选择其中之一，请使用@Ray 解决方案。如果它们可以在功能上进行分组（实际上，不是对所有以 F 开头的人进行一些假装分组），即。您将始终需要它们的数量来实现功能，并且读取和写入它们作为单独的标志没有意义，那么也许将它们存储为整数并在它们上使用逻辑操作符可能会很容易。

话虽如此，除非您在会话期间对数据库进行大量读取和写入，否则将它们捆绑到整数中只会给您带来很少的性能，如果所有选项都必须存在，它将在数据库上节省一些空间。如果不存在 = false，则可能是一个折腾。

所以所有事情都是不平等的，我会和雷先生一起去。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T18:02:32.460

MySQL 有一种`SET`在这里可能有用的类型。一切都可以放在一个 SET 中，但六个 SET 可能更有意义。

[http://dev.mysql.com/doc/refman/5.5/en/set.html](http://dev.mysql.com/doc/refman/5.5/en/set.html)

# sql - oracle 子句之间包含格式 HH24:MI

> ID：11915585
> 
> 赞同：0
> 
> 时间：2012-08-11T14:37:25.760
> 
> 标签：sql, oracle, format, to-date

我的查询类似于：

```
select *
from mytable
where date_field between to_date(#from#, 'YYYY/MM/DD HH24:MI')
   and to_date(#to#, 'YYYY/MM/DD HH24:MI') 
```

举个例子：

```
if from = 2012/07/18 00:00 and
   to   = 2012/07/18 00:09 
```

这将包括带有时间戳`2012/07/18 00:09:01`的记录`2012/07/18 00:09:59`吗？

或者我应该将声明更改为：

```
select *
from mytable
where date_field >= to_date(#from#, 'YYYY/MM/DD HH24:MI')
   < to_date(#to#, 'YYYY/MM/DD HH24:MI') 
```

这里从 2012/07/18 00:00 到 2012/07/18 00:10 替换应该给我所有时间戳在午夜和午夜 9M59S 之间的记录，这就是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:40:57.397

between 子句接受**两个**区间界限。我向您建议第二种选择

```
select *
from mytable
where date_field >= to_date(#from#, 'YYYY/MM/DD HH24:MI')
   < to_date(#to#, 'YYYY/MM/DD HH24:MI') 
```

你可能会觉得[这篇文章](http://c2.com/cgi/wiki?WhyNumberingShouldStartAtZero)很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T15:59:42.247

日期转换会将值转换为包含所有日期元素的日期。您没有在字符串中指定秒数，因此这些将变为 0。

换言之，不包括范围“:01” - “:59”。

由于您正在使用字符串并且字符串具有正确的比较顺序的日期元素，为什么不进行字符串比较：

```
where to_char(datefield, 'YYYY/MM/DD HH24:MI') between #from# and #to# 
```

我认为这正是您想要的，而无需摆弄日期算术。

您还可以根据建议更改语句，方法是增加#to# 列并使用“<”而不是 between。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T15:04:21.047

忽略元素的日期部分`DATE`，因为 00:09:01 和 00:09:59 都在您的“到”时间 00:09:00 之后，不，此查询将不包括这些记录。

如果要包含这些记录，则需要将“到”时间延长至 00:10:00，或`TRUNC`将记录的时间戳延长至最接近的分钟。

编辑：

如果您的 from 和 to 仅精确到分钟，我会这样做：

```
SELECT *
  FROM mytable
 WHERE date_field >= to_date(#from#, 'YYYY/MM/DD HH24:MI') 
   AND date_field <  to_date(#to#,   'YYYY/MM/DD HH24:MI') + 1/24/60/60 /* 1 minute */ 
```

并确保对 from 和 to 使用绑定变量。这是 ColdFusion 吗？如果是这样，请使用`cfqueryparam`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T17:48:16.140

你可以这样做：

```
SELECT *
  FROM mytable
 WHERE date_field between to_date(#from#, 'YYYY/MM/DD HH24:MI')
   AND to_date(#to#||':59', 'YYYY/MM/DD HH24:MI:SS') 
```

# perl - Perl Gtk 无法创建抽象（不可实例化）类型“GtkBox”的实例

> ID：11915587
> 
> 赞同：1
> 
> 时间：2012-08-11T14:37:40.083
> 
> 标签：perl, gtk

我正在尝试一个简单的 Perl GtK，gui 只包含一个窗口和一个垂直框。我收到分段错误，在此之前出现警告：“无法创建抽象（非实例化）类型‘GtkBox’的实例”

图形用户界面是：

```
<?xml version="1.0" encoding="UTF-8"?>
<interface>
  <!-- interface-requires gtk+ 3.0 -->
  <object class="GtkWindow" id="window1">
    <property name="can_focus">False</property>
    <property name="title" translatable="yes">Text to EPUB</property>
    <child>
      <object class="GtkBox" id="box1">
        <property name="visible">True</property>
        <property name="can_focus">False</property>
        <property name="orientation">vertical</property>
        <child>
          <placeholder/>
        </child>
        <child>
          <placeholder/>
        </child>
      </object>
    </child>
  </object>
</interface> 
```

代码是：

```
#!/usr/bin/perl
use warnings;
use strict;

use File::Spec::Functions qw(rel2abs);
use File::Basename;
use File::Copy;
use Glib;
use Gtk2 '-init';

my $basedir = dirname(rel2abs($0));

my $guifile = "$basedir/txt2epub1.gui";

print "GUI file: $guifile\n";
my $builder = Gtk2::Builder->new();
$builder->add_from_file($guifile) or die "Couldn't read $guifile";
$builder->connect_signals( undef );

my $window = $builder->get_object("window1") or die "Can't open main window";

$window->show_all();

Gtk2->main();

# Callbacks
sub cb_window1_destroy {
    Gtk2->main_quit();
    exit;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T18:04:17.380

xml 文件有这一行：

```
<!-- interface-requires gtk+ 3.0 --> 
```

但是你的 Perl 脚本有：

```
use Gtk2 '-init'; 
```

看起来您正在尝试使用 Gtk2 库加载使用 Gtk3 创建的文件。

# javascript - 如何使用 Bootstrap 创建模态窗口？

> ID：11915591
> 
> 赞同：0
> 
> 时间：2012-08-11T14:38:12.407
> 
> 标签：javascript, twitter-bootstrap

我尝试使用 Twitter Bootstrap 和以下代码创建模式窗口

```
<link rel= "stylesheet" href = "/static/bootstrap/css/bootstrap.css" >
<script src ="/static/bootstrap/js/bootstrap-modal.js" ></script>
<script type = "text/javascript" src= "/static/bootstrap/js/bootstrap.js" ></script>
<script src="/static/js/jquery.js></script>
<div class="modal hide" id="myModal">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">×</button>
        <h3>Modal header</h3>
    </div>
    <div class="modal-body">
        <p>One fine body…&lt;/p>
    </div>
    <div class="modal-footer">
        <a href="#" class="btn" data-dismiss="modal">Close </a>
        <a href="#" class="btn btn-primary"> Save changes </a>
    </div>
</div>
<a class="btn" data-toggle="modal" href="#myModal"> Launch Modal </a> 
```

但它仍然只显示一个按钮。我点击链接，没有任何反应，模式窗口没有弹出。请帮我找出我做错了什么？PS我现在才开始学习。如果你能告诉我我的错误在哪里，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T14:50:02.110

你正在加载你的`bootstrap.js`after `bootstrap-modal.js`。

同样，最好将它们移动到`<body>`.

```
<html> 

    <head>
        <link href="bootstrap.css" rel="stylesheet"> 
    </head>

    <body>

        <div class="container">

        <div id="example" class="modal hide fade in" style="display: none; ">

            <div class="modal-header">
                <a class="close" data-dismiss="modal">?</a>
                <h3>This is a Modal Heading</h3>
            </div>

            <div class="modal-body">
                <h4>Text in a modal</h4>
                <p>You can add some text here.</p>              
            </div>

            <div class="modal-footer">
                <a href="#" class="btn btn-success">Call to action</a>
                <a href="#" class="btn" data-dismiss="modal">Close</a>
            </div>

        </div>

        <a data-toggle="modal" href="#example" class="btn btn-primary btn-large">Open modal</a>

        <script src="jquery.js"></script>
        <script src="bootstrap-modal.js"></script>

    </body>

</html> 
```

# css - 根据 PageSpeed，我的 CSS 没有使用高效的 CSS 选择器

> ID：11915592
> 
> 赞同：0
> 
> 时间：2012-08-11T14:38:18.100
> 
> 标签：css, pagespeed

根据 PageSpeed，我的 CSS 没有使用高效的 CSS 选择器。

有人可以告诉我知道我做错了什么吗？

我的 CSS ：

```
#header .link-bar .fl .last a:hover
div.box-default div.box-caption .box-title a 
.news ul li div.top a
.news ul li div.top a:visited  
.news ul li div.top a:hover
.link-bar ul li
#header .link-bar a 
#header .link-bar a:visited 
#header .link-bar .last a
#header .link-bar a:hover
#header .link-bar .last a:hover 
#header .link-bar .fl a:hover
#footer .link-bar a
#footer .link-bar a:visited
#footer ul li
div.list ul
div.list li
.ads ul li
.news ul li
#paging_button ul li
#paging_button ul li:hover
.tt_wrap .ttbox span 
#paging_button ul li:hover 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T14:47:37.310

您的选择器可能过于具体，浏览器从右到左而不是从左到右读取 CSS。所以`.link-bar ul li`比`#header .link-bar ul li`

这也意味着最右边的选择器对性能最重要。如果您可以将类添加到最右边的元素，那将有很大`.news ul li div.top a`帮助`.news ul li div.top a.top-link`

看看这个[为什么浏览器从右到左匹配 CSS 选择器？](https://stackoverflow.com/questions/5797014/css-selectors-parsed-right-to-left-why)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T15:14:07.650

如果不知道您的 CSS 做了什么，以及您这样安排它的原因，以及它的使用方式/位置以及页面的处理方式，则没有正确的答案。

PageSpeed 告诉你的是，有一些非常有效的选择器确实可以让你非常快速地找到一个项目，而一些效率较低的选择器会导致 CSS 引擎在找到你想要的东西之前进行一些搜索。两者都将应用您想要的样式，一种类型比另一种类型占用更少的 CPU 周期，但在大多数情况下，我们在这里和那里谈论几个 CPU 周期，而不是几秒钟。运行浏览器的机器和浏览器本身比选择器本身的影响要大得多。所以这只是意味着在你的 CSS 中你有一些效率较低的选择器。

例如，您可以编写这样的规则（带有嵌套元素），并且您显然拥有其中的一些。

```
ul li {color: blue;}
ol li {color: red;} 
```

但同样更有效的是，您可以这样做（单个类选择器） - 但是您需要更改标记以支持在 li 上添加这些类，并在此过程中增加页面的“权重”。

```
.ul-li {color: blue;}
.ol-li {color: red;} 
```

并不是说这个相当微不足道的例子会产生显着差异，但是当渲染速度至关重要并且您在快速网络上本地工作或使用较旧/功能较弱的机器时，它可能会得到回报。如果您必须通过非常慢的连接发送到远程浏览器而不是增加您发送的有效负载可能会使事情变得更糟。

基本上，每次你放其中任何一个都比不放要低效。

```
Rules with descendant selectors 
Rules with child or adjacent selectors
Rules with overly qualified selectors
Rules that apply the :hover pseudo-selector to non-link elements 
```

过度限定的选择器是当您使用许多选择器到达同一个地方时

```
div.box-default div.box-caption .box-title a 
```

以下是否给出相同的结果，或者页面上可能有很多方框图块？

```
.box-title a 
```

构建没有任何这些的 CSS 文件和标记也需要大量工作。

有关这些是什么的更多信息（包括范围类型的示例），请参阅以下链接：
[http ://www.w3.org/TR/CSS2/selector.html#descendant-selectors](http://www.w3.org/TR/CSS2/selector.html#descendant-selectors)
[http://www.w3.org /TR/CSS2/selector.html#child-selectors](http://www.w3.org/TR/CSS2/selector.html#child-selectors)
[http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors)

# css - TextMate 中的 Zen Coding CSS 不会扩展任何内容

> ID：11915597
> 
> 赞同：0
> 
> 时间：2012-08-11T14:38:55.513
> 
> 标签：css, textmate, emmet

我已经安装了……</p>

1.  TextMate.Zen.CSS.1.3.1.zip
2.  TextMate.Zen.HTML.1.3.1.zip
3.  Zen.Coding-TextMate.v0.7.zip

…并使用版本 1.5.11 (1635)

HTML 扩展似乎工作正常。但是没有 CSS 缩写扩展。在 Google 代码中，我没有发现 TextMate 和 ZC CSS 的问题。

可能是什么问题呢？试过 CMD + E 和 Tab

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T15:00:00.017

您是否尝试重新加载捆绑包？

捆绑包 -> 捆绑包编辑器 -> 重新加载捆绑包

您是否也从 textmate 左下角的文件类型中选择了“CSS”？你能在那里看到“CSS Zen”吗？

# java - 使用java匹配器类时的非法状态异常

> ID：11915602
> 
> 赞同：0
> 
> 时间：2012-08-11T14:39:41.343
> 
> 标签：java, regex, pattern-matching, web-crawler

我正在尝试获取一个网页，使用 BufferedReader 将其加载到字符串构建器中，然后使用正则表达式来查找和检索单词或在这种情况下是单词组（如计算机科学、电气工程等部门名称）。 ) 匹配正则表达式模式。我正在使用 java 提供的 Pattern 和 Matcher 类，但遇到了非法状态异常。我已经盯着这段代码看了很长一段时间，想对问题可能是什么有一些新的看法。我知道这与**m.find()**和**m.group()**方法有关。任何帮助将不胜感激。

我会从我得到的输出中说，它识别出与正则表达式匹配的第一个单词，然后开始抛出非法状态异常。

我还在下面发布了我的代码：

```
public class Parser{

    static StringBuilder theWebPage;
    ArrayList<String> courseNames;
    //ArrayList<parserObject> courseObjects;

    public static void main(String[] args) 
    {
        Parser p = new Parser();

        theWebPage = new StringBuilder();
        try {
                URL theUrl = new URL("http://ocw.mit.edu/courses/");
                BufferedReader reader = new BufferedReader(new InputStreamReader(theUrl.openStream()));
                String str = null;

                while((str = reader.readLine())!=null)
                {
                    theWebPage.append(" ").append(str);
                    //System.out.println(theWebPage);
                }
                //System.out.println(theWebPage);
                reader.close();

            } catch (MalformedURLException e) {
                System.out.println("MalformedURLException");

            } catch (IOException e) {
                System.out.println("IOException");
            }

        p.matchString();
    }

    public Parser()
    {
        //parserObject courseObject = new parserObject();
        //courseObjects = new ArrayList<parserObject>();
        courseNames = new ArrayList<String>();
        //theWebPage=" ";
    }

    public void matchString() 
    {
        String matchRegex = "#\\w+(-\\w+)+";
        Pattern p = Pattern.compile(matchRegex);
        Matcher m = p.matcher(theWebPage);
        int i=0;
        int x=0;
        //m.reset();

            while(!(m.matches()))
            {
                System.out.println("inside matches method " + i);
                try{

                        m.find();
                     x = m.end();
                    System.out.println( m.group());
                    PrintStream out = new PrintStream(new FileOutputStream("/Users/xxxx/Desktop/output.txt"));
                    System.setOut(out);

                    //courseNames.add(i,m.group());

                    i++;
                }catch(IllegalStateException e)
                {
                    System.out.println("IllegalStateException");
                } catch (FileNotFoundException e) {
                    System.out.println("FileNotFound Exception");
                }
            }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T14:59:36.787

问题是你打电话：

```
x = m.end(); 
```

即使您可能没有匹配项。为什么不将您对 find() 的调用合并到您的 while 语句中，从而使其也成为保护语句：

```
while (m.find()) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T15:33:09.400

您的解决方案使事情变得有些复杂。这个怎么样？

```
package MitOpenCourseWareCrawler;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import java.util.List;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class Parser {
    private List<String> courseNames = new ArrayList<String>();
    private URL url;

    public Parser(String url) throws MalformedURLException {
        this.url = new URL(url);
    }

    public static void main(String[] args) throws IOException {
        Parser parser = new Parser("http://ocw.mit.edu/courses/");
        parser.parse();
        for (String courseName : parser.courseNames)
            System.out.println(courseName);
    }

    public void parse() throws IOException {
        BufferedReader reader = new BufferedReader(new InputStreamReader(url.openStream()));
        Pattern pattern = Pattern.compile(".*<u>(.+)</u>.*");
        Matcher matcher;
        String line;
        while ((line = reader.readLine()) != null) {
            matcher = pattern.matcher(line);
            if (matcher.matches())
                courseNames.add(matcher.group(1));
        }
        reader.close();
    }
} 
```

此外，我同意 Reimeus 的观点，即使用解析工具或库可能比尝试使用正则表达式模式解析 HTML 更好。但我想只要你知道页面的结构并且确切地知道你想要什么，像你或我这样的快速'n'dirty 解决方案就可以了。

# algorithm - 渐近符号和通过分析算法形成递归关系

> ID：11915603
> 
> 赞同：2
> 
> 时间：2012-08-11T14:39:45.530
> 
> 标签：algorithm, recurrence

我浏览了许多关于渐近符号的讲座、视频和资源。我了解 O、Omega 和 Theta 是什么。但是在算法中，为什么我们总是只使用 Big Oh 表示法，为什么不使用 Theta 和 Omega（我知道这听起来很无聊，但请帮我解决这个问题）。根据算法，这个上限和下限究竟是什么？

我的下一个问题是，我们如何从算法中找到复杂性。假设我有一个算法，我如何找到递归关系 T(N)，然后计算出它的复杂度？我如何形成这些方程？就像使用递归方式进行线性搜索一样，T(n)=T(N-1) + 1。如何？

如果有人能解释我认为我是菜鸟，那就太好了，这样我就能更好地理解。我找到了一些答案，但在 StackOverFlow 中还不够令人信服。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T12:52:22.217

**与 Theta 和 Omega 相比，为什么我们如此多地使用 big-O：**这部分是文化因素，而不是技术因素。当 Theta 真的更合适时，人们会说 big-O 是非常常见的。Omega 在实践中没有得到太多使用，因为我们经常更关心上限而不是下限，也因为非平凡的下限通常更难证明。（微不足道的下限通常是那种说“您必须查看所有输入，因此运行时间至少等于输入的大小。”）

当然，这些关于下界的评论也部分解释了 Theta，因为 Theta 涉及上限和下限。

**提出递归关系：**没有简单的方法可以解决所有情况。这是相对简单的递归算法的描述。

令 N 为初始输入的大小。假设您的递归函数中有 R 个递归调用。（示例：对于合并排序，R 将为 2。）进一步假设所有递归调用将初始输入的大小减少相同的数量，从 N 到 M。（示例：对于合并排序，M 将为 N/2。）最后，假设递归函数 W*在递归调用之外工作。* （例如：对于归并排序，W 将是归并的 N。）

那么递归关系将是 T(N) = R*T(M) + W。（例如：对于归并排序，这将是 T(N) = 2*T(N/2) + N。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T14:55:47.263

当我们创建一个算法时，它总是为了最快，我们需要考虑每一种情况。这就是我们使用 O 的原因，因为我们想要处理复杂性并确保我们的算法永远不会超过它。

要评估复杂性，您必须计算步数。在方程 T(n) = T(n-1) + 1 中，在计算 T(0) 之前会有 N 步，那么复杂度是线性的。（我说的是时间复杂度而不是空间复杂度）。

# struts2 - 如何遍历struts 2中的对象列表

> ID：11915606
> 
> 赞同：1
> 
> 时间：2012-08-11T14:39:50.767
> 
> 标签：struts2

我是 struts2 的新手，面临一个问题。

我有以下数据结构。

```
class Employee extends actionsupport{

Private List<Address> address;

....getters and setters
}

class Address {
private String street_name;
Private City_name;
......and so on 

... getters and setters

} 
```

`<s:iterate>`如何使用标记在 JSP 中迭代此列表。我尝试了很多组合，但在某种程度上它对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T15:33:32.287

我相信最好的方法是使用 Struts2[迭代器](http://struts.apache.org/2.3.1/docs/iterator.html)标签，它需要将集合作为数据源提供给迭代器。

```
<s:iterator value="address">
  <s:property value="street_name"/>
  <s:property value="City_name"/>
  //so on
</s:iterator> 
```

当 Iterator 将迭代地址时，它会将对象（在您的情况下为地址）放在值堆栈的顶部，您可以如上所述直接引用这些属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T15:34:44.040

```
<s:iterator value="%{address}" var="addr">
    <s:property value="%{street_name}"/>
    <s:property value="#addr.street_name"/>
</s:iterator> 
```

# html - 使用 Div 类通过 Xpath 获取图像

> ID：11915609
> 
> 赞同：0
> 
> 时间：2012-08-11T14:40:26.000
> 
> 标签：html, class, xpath

如何编写 xpath 以获取[本文](http://www.reuters.com/article/2012/08/11/us-usa-campaign-romney-idUSBRE87919120120811?feedType=RSS&feedName=wtMostRead&utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3a%20reuters/MostRead%20%28News%20/%20US%20/%20Most%20Read%20Articles%29)中的主要新闻图像？

下面的对我来说失败了。

```
//div[contains(@class,'sectionColumns')]//div[contains(@class,'column2']//*img"] 
```

我希望它在幻灯片的情况下返回所有图像。我希望它是灵活的，因为当新闻发生变化时，某些类会发生变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T15:14:51.397

不看“这篇文章”，你的 XPath 表达式中有一个明显的语法错误：

```
//div[contains(@class,'sectionColumns')]//div[contains(@class,'column2']//*img"] 
```

上面的子字符串: `*img"`, 包含两个错误——`*`后跟一个名称和一个不平衡的引号。

**可能你想要**：

```
//div[contains(@class,'sectionColumns')]//div[contains(@class,'column2']//img] 
```

# c# - Windows 8 上的 Skype4Com

> ID：11915610
> 
> 赞同：1
> 
> 时间：2012-08-11T14:40:40.513
> 
> 标签：c#, visual-studio-2012

我正在尝试在使用 Visual Studio 2012 RC ide 的 Windows8 机器上使用 Skype4COM api C#。由于此错误，我什至无法创建 Skype 对象：

```
Creating an instance of the COM component with CLSID
{830690FC-BF2F-47A6-AC2D-330BCB402664}using CoCreateInstanceFromApp failed due to 
the following error: 80040154 Class not registered 
(Exception from HRESULT: 0x80040154 (REGDB_E_CLASSNOTREG)). 
Please make sure your COM object is in the allowed 
list of CoCreateInstanceFromApp. 
```

我也尝试注册 ddl 没有成功....如果我尝试将 api 与 Visual Studio 2010 一起使用，则没有问题....

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:28:43.347

我遇到过同样的问题。首先确保您已经注册了 COM dll：

`regsvr32 C:\Program Files\Common Files\Skype\Skype4COM.dll`

其次，确保您正在为 (x86) 构建：为项目构建配置选项卡。

# ajax - Drupal 6 Ajax 模块：提交后更改表单

> ID：11915611
> 
> 赞同：1
> 
> 时间：2012-08-11T14:40:50.273
> 
> 标签：ajax, drupal-6

我在 Drupal 6 中使用 Ajax 模块来 ajaxify 我的简单联系表。它工作正常，表单是 ajax 提交的，并且验证错误正确显示，但我无法在成功提交后找到更改表单的方法。也就是说，我想删除我的大部分输入字段并用“谢谢您的请求”消息替换它们。我认为这应该通过 hook_ajax_validate_pass 以某种方式实现，但我不知道如何使用它......任何帮助表示赞赏。

# c# - .NET GZipStream 解压缩产生空流

> ID：11915612
> 
> 赞同：11
> 
> 时间：2012-08-11T14:41:00.587
> 
> 标签：c#, .net, wpf, compression, gzipstream

我正在尝试序列化和压缩 WPF [`FlowDocument`](http://msdn.microsoft.com/en-us/library/system.windows.documents.flowdocument.aspx)，然后执行反向操作 - 解压缩字节数组并反序列化以重新创建 FlowDocument - 使用 .NET[`GZipStream`](http://msdn.microsoft.com/en-us/library/system.io.compression.gzipstream.aspx)类。我正在遵循 MSDN 上描述的示例，并且我有以下测试程序：

```
var flowDocumentIn = new FlowDocument();
flowDocumentIn.Blocks.Add(new Paragraph(new Run("Hello")));
Debug.WriteLine("Compress");
byte[] compressedData;
using (var uncompressed = new MemoryStream())
{
    XamlWriter.Save(flowDocumentIn, uncompressed);
    uncompressed.Position = 0;
    using (var compressed = new MemoryStream())
    using (var compressor = new GZipStream(compressed, CompressionMode.Compress))
    {
        Debug.WriteLine(" uncompressed.Length: " + uncompressed.Length);
        uncompressed.CopyTo(compressor);
        Debug.WriteLine(" compressed.Length: " + compressed.Length);
        compressedData = compressed.ToArray();
    }
}

Debug.WriteLine("Decompress");
FlowDocument flowDocumentOut;
using (var compressed = new MemoryStream(compressedData))
using (var uncompressed = new MemoryStream())
using (var decompressor = new GZipStream(compressed, CompressionMode.Decompress))
{
    Debug.WriteLine(" compressed.Length: " + compressed.Length);
    decompressor.CopyTo(uncompressed);
    Debug.WriteLine(" uncompressed.Length: " + uncompressed.Length);
    flowDocumentOut = (FlowDocument) XamlReader.Load(uncompressed);
}

Assert.AreEqual(flowDocumentIn, flowDocumentOut); 
```

但是，我在行出现异常，`XamlReader.Load`这是正常的，因为调试输出告诉未压缩流的长度为零。

```
Compress
 uncompressed.Length: 123
 compressed.Length: 202
Decompress
 compressed.Length: 202
 uncompressed.Length: 0 
```

为什么最终`uncompressed`流不包含原始的 123 个字节？

（请忽略“压缩”字节数组大于“未压缩”字节数组的事实——我通常会处理更大的流文档）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-11T18:47:49.973

您需要在`GZipStream`从内存流中获取压缩字节之前关闭。在这种情况下，`Dispose`由于使用，关闭由被调用者处理。

```
using (var compressed = new MemoryStream())
{
    using (var compressor = new GZipStream(compressed, CompressionMode.Compress))
    {
        uncompressed.CopyTo(compressor);
    }
    // Get the compressed bytes only after closing the GZipStream
    compressedBytes = compressed.ToArray();
} 
```

这可行，您甚至可以删除`using`for ，因为除非您使用允许您指定底层流应保持打开状态的构造函数重载，否则`MemoryStream`它将由 处置。`GZipStream`这意味着您使用该代码调用`ToArray`已处置的流，但这是允许的，因为字节仍然可用，这使得处置内存流有点奇怪，但如果您不这样做，FXCop 会惹恼您。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-11T20:59:59.113

Joao 的回答成功了。我已经复制了下面的完整工作示例。我在 output 中添加了一行`compressedData.Length`。有趣的是，它输出了 218 个字节，而`compressedStream.Length`只输出了 202 个字节。如果您在读取字节数组之前不关闭 GZipStream，`compressedData.Length`则为 202。我不确定为什么关闭 GZipStream 会给您额外的 16 个字节。

```
var flowDocumentIn = new FlowDocument();
flowDocumentIn.Blocks.Add(new Paragraph(new Run("Hello")));

Debug.WriteLine("Compress");

byte[] compressedData;

using (var uncompressedStream = new MemoryStream())
{
    XamlWriter.Save(flowDocumentIn, uncompressedStream);
    uncompressedStream.Position = 0;
    using (var compressedStream = new MemoryStream())
    {
        using (var gZipCompressor = new GZipStream(compressedStream, CompressionMode.Compress))
        {
            Debug.WriteLine(" uncompressedStream.Length: " + uncompressedStream.Length);
            uncompressedStream.CopyTo(gZipCompressor);
            Debug.WriteLine(" compressedStream.Length: " + compressedStream.Length);
        }
        compressedData = compressedStream.ToArray();
    }
}

Debug.WriteLine(" compressedData.Length: " + compressedData.Length);

Debug.WriteLine("Decompress");

FlowDocument flowDocumentOut;

using (var compressedStream = new MemoryStream(compressedData))
using (var uncompressedStream = new MemoryStream())
{
    using (var gZipDecompressor = new GZipStream(compressedStream, CompressionMode.Decompress))
    {
        Debug.WriteLine(" compressedStream.Length: " + compressedStream.Length);
        gZipDecompressor.CopyTo(uncompressedStream);
        Debug.WriteLine(" uncompressedStream.Length: " + uncompressedStream.Length);
    }
    uncompressedStream.Position = 0;
    flowDocumentOut = (FlowDocument)XamlReader.Load(uncompressedStream);
} 
```

调试输出：

```
Compress
 uncompressedStream.Length: 123
 compressedStream.Length: 202
 compressedData.Length: 218
Decompress
 compressedStream.Length: 218
 uncompressedStream.Length: 123 
```

`uncompressedStream.Position = 0;`还要注意调用之前的附加信息`XamlReader.Load`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-23T12:59:21.257

将解压缩的字节复制到流后，需要将其位置设置为零，以便正确读取

# java - Java 2数组最小值最大值平均值？

> ID：11915613
> 
> 赞同：0
> 
> 时间：2012-08-11T14:41:03.393
> 
> 标签：java

如何创建一个循环来为 2 个数组列表生成最小值、最大值、平均值，到目前为止，我只为单个数组列表生成了最小值、最大值和平均值。

这些是 2 个数组 User[] 和 Withdrawals[]：

```
User, Withdrawals
1 , 90.00
2 , 85.00
4 , 75.00
5 , 65.00
2 , 40.00
1 , 80.00
3 , 50.00
5 , 85.00
4 , 80.00
1 , 70.00

size = 10 
```

这是我尝试过的，因为我不知道 2 个相互依赖的数组：

```
double min = 0.0;
double max = 0.0;
double sum = 0.0;
double avg = 0.0;

for(int i = 0; i <size; i++){
.
.
for(int j = 0; j < Withdrawals.length; j++){
   if(Withdrawals[User[i]] > max){  
      max = Withdrawals[j];  
   }  
   if(Withdrawals[User[i]] < min){  
      min = Withdrawals[j];  
   }
}  
sum += Withdrawals[j];
avg = sum/size;
} 
```

如何从每个用户的提款数量中打印最小、最大、平均？:S

我已经计算了每个用户的提款次数。

条件是：从头开始创建所有内容，而不是使用 Java 的可用库功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T14:46:55.613

Quick n Dirty：对第二个数组使用第二个 for 循环，但不要再次重新初始化最小值、最大值等。

更简洁的方法是创建一个类来保存最小值、最大值等，以及一个传递此结果对象和数组的方法。然后该方法扫描数组并更新结果对象 min、max 等。为每个数组调用该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T15:46:40.517

为什么不尝试查看Commons Math 库中的[描述统计代码？](http://commons.apache.org/math/userguide/stat.html#a1.2_Descriptive_statistics)或者更好的是，使用它而不是重新发明轮子？

```
DescriptiveStatistics de = new DescriptiveStatistics();

de.addValue(..) // Your values
// Add more values

Double max = de.getMax();
Double min = de.getMin();
Double avg = de.getSum() / de.getN(); // or de.getMean(); 
```

并为每个数组使用一个 DescriptiveStatistics 实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T18:19:57.577

我认为最好将每个用户的详细信息存储在单独的数据结构中，例如以下名为`UserWithdrawals`.

```
public class Program1{
    public static class UserWithdrawals{
        private LinkedList<Double> withdrawals=new LinkedList<>();

        public void add(Double amt){
            this.withdrawals.add(amt);
        }

        public Double getMinimum(){
            Double min=this.withdrawals.get(0);
            for(Double amt:this.withdrawals)
                if(amt.compareTo(min)<0) min=amt;
            return min;
        }

        public Double getMaximum(){
            Double max=this.withdrawals.get(0);
            for(Double amt:this.withdrawals)
                if(amt.compareTo(max)>0) max=amt;
            return max;
        }

        public Double getAverage(){
            Double sum=new Double(0);
            for(Double amt:this.withdrawals)
                sum+=amt;
            return sum/this.withdrawals.size();
            //this method will fail if the withdrawals list is updated during the iteration
        }

        /*You can also combine the three into a single method and return an array of Double object coz the iteration is same.*/

    }

    /*now you iterate over your two array lists (This wont work if the two array lists - 'Users' and 'Withdrawals' are of different size) and store the withdrawal data associated with a user in the corresponding map value - Maps or Associative arrays are a very basic data structure so your professor should not have any problems with this*/

    private HashMap<Integer,UserWithdrawals> withdrawals_map=new HashMap<>();

    public Program1(ArrayList<Integer> Users, ArrayList<Double> Withdrawals){
        for(int i=0;i<Users.size();i++){
            Integer user_no=Users.get(i);
            Double withdrawal_amt=Withdrawals.get(i);
            if(this.withdrawals_map.get(user_no)==null){
                this.withdrawals_map.put(user_no,new UserWithdrawals());
            }
            this.withdrawals_map.get(user_no).add(withdrawal_amt);
        }
    }

    public UserWithdrawals getUserWithdrawalsData(Integer user_no){
        return this.withdrawals_map.get(user_no);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T18:32:51.717

分而治之 :) 是的，我知道这是一个用于算法技术的术语，在这种情况下，我的意思是......使用小部件。

首先有一个简单数组的最小值，最大值，平均值：

```
double[] values = {2,3,4,5,6,7};

double min = values[0];
double max = values[0];
double sum = 0;

for (double value : values) {
     min = Math.min(value, min);
     max = Math.max(value, max);
     sum += value;
}

double avg = sum / values.length;

System.out.println("Min: " + min);
System.out.println("Max: " + max);
System.out.println("Avg: " + avg); 
```

**注意：**由于你不能使用 Java 库来完成你的作业，所以很容易做你自己版本的 min/max 函数（阅读[Math JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html)）

现在您可以将此代码封装在一个函数中，您可以从返回另一个数组开始：

```
static double[] minMaxAvg(double[] values) {
    double min = values[0];
    double max = values[0];
    double sum = 0;

    for (double value : values) {
        min = Math.min(value, min);
        max = Math.max(value, max);
        sum += value;
    }

    double avg = sum / values.length;

    return new double[] {min, max, avg};
}

public static void main(String[] args) {
    double[] values = {2,3,4,5,6,7};
    double[] info = minMaxAvg(values);
    System.out.println("Min: " + info[0]);
    System.out.println("Max: " + info[1]);
    System.out.println("Avg: " + info[2]);
} 
```

使用数组有点难读，所以如果你创建一个类来保存最小值、最大值、平均值会更好。所以让我们稍微重构一下代码：

```
class ValueSummary {
    final double min;
    final double max;
    final double avg;

    static ValueSummary createFor(double[] values) {
        double min = values[0];
        double max = values[0];
        double sum = 0;

        for (double value : values) {
            min = Math.min(value, min);
            max = Math.max(value, max);
            sum += value;
        }

        double avg = sum / values.length;

        return new ValueSummary(min, max, avg);
    }

    ValueSummary(double min, double max, double avg) {
        this.min = min;
        this.max = max;
        this.avg = avg;
    }

    public String toString() {
        return "Min: " + min + "\nMax: " + max +"\nAvg: " + avg;
    }
}

public static void main(String[] args) {
    double[] values = {2,3,4,5,6,7};
    ValueSummary info = ValueSummary.createFor(values);
    System.out.println(info);
} 
```

您没有在问题中指定它，但我假设您为每个用户都有一个数组（也许每次取款都是另一个数组）。现在你有了底部部分，我们可以切换到[自上而下的思维](http://en.wikipedia.org/wiki/Top-down_and_bottom-up_design)。

所以你的代码可能是这样的：

```
for (User aUser : users) {
     System.out.println("User: " + aUser);
     System.out.println(ValueSummary.createFor(withdrawalsOf(aUser)));
} 
```

好的，但这只是想法，您仍然无法将 aUser 与其提款联系起来。您在这里有几个选择：

1.  制作一个“表格”用户-> 取款，这就是您要对这两个数组执行的操作。数组中的用户索引就像一个“用户 ID”。当您了解 Map 时，您会发现可以为索引使用更好的表示。
2.  拥有 Map 或数组只是关系 User->Withdrawls 的优化，但您可以用对象表示该关系（即 UserWithdrawls）

**选项1：**

```
static class User {
    final String name;
    public User(String s) { name = s; }
}
public static void main(String[] args) {
    User[] users = { new User("John"), new User("Doe")};
    double[][] withdrawals = {
         new double[] { 1, 2, 3}, new double[] { 10,22, 30} 
    };
    for (int i = 0; i < users.length; i++) {
        System.out.println("User: " + users[i].name);
        System.out.println(ValueSummary.createFor(withdrawals[i]));
    }
} 
```

**选项 2：**

```
static class User {
    final String name;
    public User(String s) { name = s; }
}
static class UserWithdrawls {
    final User user;
    final double[] withdrawals;
    final ValueSummary summary;
    UserWithdrawls(User user, double[] withdrawals) {
        this.user = user;
        this.withdrawals = withdrawals;
        this.summary = ValueSummary.createFor(withdrawals);
    }
}
public static void main(String[] args) {
    UserWithdrawls[] userWithdrawls = {
            new UserWithdrawls(new User("John"), new double[] { 1, 2, 3}),
            new UserWithdrawls(new User("Doe"), new double[] { 10, 22, 30})
    };
    for (UserWithdrawls uw : userWithdrawls) {
        System.out.println("User: " + uw.user.name);
        System.out.println(uw.summary);
    }
} 
```

**附加说明：**如果您正在学习计算机科学，将来您将了解到计算 max、min、avg 的循环的复杂度为 O(n)。如果值数组完全加载到内存中，则在三个不同的函数中执行 max/min/avg（因此读取数组 3 次）仍然是具有更大常数的 O(n) 阶算法。凭借当今计算机的强大功能，该常数非常小，以至于大多数时候您不会从在同一循环中计算 min/max/avg 获得任何收益。相反，您可以获得代码可读性，例如在 Groovy 中，minMaxAvg 代码可以这样编写：

```
 def values = [2,3,4,5,6,7];
 println values.min()
 println values.max()
 println values.sum() / values.size() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-21T09:23:54.950

1.  使用 c++ STL 排序函数，根据第一列对 O(log(n)) 中的二维数组进行排序。
2.  遍历 O(n) 以计算平均值并更新 MaxAverage。

    ```
    // Driver function to sort the 2D vector
    // on basis of a particular column

    bool sortcol( const vector<int>& v1, const vector<int>& v2 ) {
        return v1[0] < v2[0];
    }

    void sortMatrix()
    {
    // Initializing 2D vector "vect" with
    // values S_ID,MARKS
    vector< vector<int> > vect{{1,85}, {2,90}, {1,87}, {1,99}, {3,70}};

    // Number of rows
    int m = vect.size();

    // Number of columns
    int n = vect[0].size();

    // Use of "sort()" for sorting on basis
    // of 1st column
    sort(vect.begin(), vect.end(),sortcol);

    float maxAverage=-1;
    int id=1; // assuming it starts from 1.
    float sum=0;
    int s=0; // size of marks per student to calculate average
    for( int i=0; i<m; i++ )
    {
        sum+=vect[i][1];
        s=s+1;
        if( i+1!= m && vect[i+1][0] != vect[i][0] ){// gotten all the marks of this student
            maxAverage = maxAverage>sum/s? maxAverage:sum/s;
            id = vect[i][0];
            s=0;
            sum=0;
        }
    }
    cout<<"ID: "<<id<<"\tValue: "<<maxAverage<<endl;
    } 
    ```

输出：

```
ID: 2   Value: 90.3333 
```

# symfony - 如何在 Silex / Twig 中注册自定义表单字段类型？

> ID：11915618
> 
> 赞同：0
> 
> 时间：2012-08-11T14:41:56.870
> 
> 标签：symfony, twig, silex

我的应用程序正在运行，但是当我使用自定义表单字段类型（shtumi_daterange）时，例如：

```
public function buildForm(\Symfony\Component\Form\FormBuilderInterface $builder, array $options)
{
    $dateRange4 = new DateRange('m/d/Y');
    $dateRange4->parseData('03/27/2012 - 04/05/2012');
    $builder->add('builddate', "shtumi_daterange", array('required'=>false, 'default'=>$dateRange4));
} 
```

发生此错误：

```
Uncaught exception 'Symfony\Component\Form\Exception\FormException' with 
message 'Could not load type "shtumi_daterange"' in 
../vendor/symfony/form/Symfony/Component/Form/FormRegistry.php:95 
```

我想，我需要类似的东西：

```
<?php
$app->register(new Silex\Provider\TwigServiceProvider(), array(
    'twig.path'        => $path_ext_dir_abs . '/views',
'twig.form.templates' => array('form_div_layout_custom.html.twig'),
    'form.type.shtumi_daterange' => 'Shtumi\UsefulBundle\Form\Type\DateRangeType',
)); 
```

但我只是不知道/找到正确的符号！

从[symfony 文档](http://symfony.com/doc/current/cookbook/form/create_custom_field_type.html)中，我找到了如何注册自定义表单字段类型的示例，但我无法对其进行转换以使其与 silex 一起运行：

```
services:

  form.type.gender:
      class: Acme\DemoBundle\Form\Type\GenderType
      arguments:
          - "%genders%"
      tags:
          - { name: form.type, alias: gender } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T10:27:20.340

我通过扩展`FormServiceProvider`.

```
use Symfony\Component\Form\FormFactoryInterface;

$app->extend('form.factory', function (FormFactoryInterface $factory) {
    $factory->addType(new MyType());

    return $factory;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T15:10:55.507

您无需注册即可使用它。您可以传递一个新实例作为第二个参数`add`：

```
use Shtumi\UsefulBundle\Form\Type\DateRangeType;
/* ... */
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $dateRange4 = new DateRange('m/d/Y');
    $dateRange4->parseData('03/27/2012 - 04/05/2012');
    $builder->add('builddate', new DateRangeType(), array('required'=>false, 'default'=>$dateRange4));
} 
```

[您链接的文档](http://symfony.com/doc/current/cookbook/form/create_custom_field_type.html#using-the-field-type)中提到了它。

# actionscript-3 - Actionscript 3 获取剪贴板数据 (fp 11)

> ID：11915620
> 
> 赞同：0
> 
> 时间：2012-08-11T14:42:10.490
> 
> 标签：actionscript-3, security, clipboard, flash

我想在 AS3（flex、flashdevelop）中获取剪贴板文本。我知道我不能只监视剪贴板，因为虽然大多数其他环境可以，但 Flash 应用程序是邪恶的，并且可以猜测他们何时看到密码以及它实际属于哪个帐户。这就是为什么我会监听 MouseEvent.CLICK 事件，但看起来它最近发生了变化，Flash 仍然说“不，不！”。这就是为什么我将EventListener (Event.Paste) 添加到TextField，但看起来TextField 没有调度这样的事件。

我在 Internet 上尝试了许多解决方案，但它们都不起作用，而且有关剪贴板的文档通常已经过时。

我是否遗漏了什么，或者 Adob​​e 的标志颜色源于社会主义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T15:14:16.083

`flash.desktop.Clipboard`上课呢。这应该是您访问剪贴板的方式。该类从 Flash Player 10 开始可用。使用`Clipboard`该类，您可以以多种预定义格式从系统剪贴板读取数据并将数据写入系统剪贴板。查看[Clipboard 类的 API 文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/desktop/Clipboard.html)以获取有关它的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-09T23:42:51.027

多年后，我偶然发现了自己的问题来回答它。

在 Flash 中粘贴是[用户启动的操作](http://www.adobe.com/devnet/flashplayer/articles/fplayer10_uia_requirements.html "国际建筑师协会")之一。它必须通过右键单击并`Paste`从内置上下文菜单中选择或按下`CTRL+V`组合键（在 Windows 上）来启动，当`InteractiveObject`（除外`TextField`）处于焦点时。

如果满足这些要求，`Event.PASTE`将被分派，并且在侦听器中您可以访问该`Clipboard.getData()`方法。

只剩下一件事，把我带到这里寻找解决方案：`Paste`当剪贴板中没有任何内容时，如何在自定义上下文菜单中禁用按钮？似乎只有一种解决方案 - 定期检查`Clipboard.generalClipboard.formats.length`.

```
package simpletests 
{
import flash.display.Sprite;
import flash.display.Stage;
import flash.events.Event;
import flash.events.FocusEvent;
import flash.events.TimerEvent;
import flash.events.MouseEvent;
import flash.ui.ContextMenu;
import flash.ui.ContextMenuItem;
import flash.desktop.Clipboard;
import flash.desktop.ClipboardFormats;
import flash.utils.Timer;

public class PasteTest extends Sprite
{
    private var cont:ContextMenu;

    public function PasteTest() 
    {
        cont = new ContextMenu ();
        cont.hideBuiltInItems ();
        cont.clipboardMenu = true;

        var timer:Timer = new Timer ( 100 );

        this.contextMenu = cont;        
        stage.focus = stage;

        timer.start ();

        timer.addEventListener ( TimerEvent.TIMER, onTimer );
        stage.addEventListener ( FocusEvent.FOCUS_OUT, onFocusOut );
        stage.addEventListener (Event.PASTE, onPaste );
    }

    private function onTimer ( e:TimerEvent ):void
    {
        cont.clipboardItems.paste = Clipboard.generalClipboard.formats.length;
    }

    private function onPaste ( e:Event ):void
    {
        trace ( Clipboard.generalClipboard.getData(ClipboardFormats.TEXT_FORMAT) );
    }

    private function onFocusOut ( e:FocusEvent ):void
    {
        stage.focus = stage;
    }

}
} 
```

如果您想清除剪贴板以进行测试，您可能会找到错误的解决方案，例如执行如下命令：`%windir%\System32\cmd /c "echo off | clip"`. 它将一个空字符串放入剪贴板，并且不会禁用上下文菜单中的“粘贴”选项。而是（在 Windows 中）剪切并粘贴文件。`Paste`这将使上下文菜单中的选项变灰。

# objective-c - iOS：NSString 变量返回 null

> ID：11915630
> 
> 赞同：1
> 
> 时间：2012-08-11T14:44:11.453
> 
> 标签：objective-c, ios, nsstring, null

我可能遗漏了一些明显的东西（仍在学习 Objective-C！），但由于某种原因，我的 NSString 变量之一在我的`if`语句中有一个空值，我不知道为什么？

我什至已经输出到 NSLog，但我仍然不明白它为什么会这样。

基本上，用户在文本字段 ( **itemWeight** ) 中输入金额，此`if`语句验证输入并根据结果显示警报。问题似乎只出现在输入 0.751 时，如果您输入任何其他数量（0.750、0.749、0.752、0.753 等），它会按预期工作。

相关代码示例如下...

.h 文件：

```
@property (strong, nonatomic) IBOutlet UITextField *itemWeight; 
```

.m 文件：

```
NSString *rawWeightText = itemWeight.text;
float convertedWeightText = rawWeightText.floatValue;

NSString *weightMessage;

if (convertedWeightText <= 0.750)
{
    weightMessage = @"under 0.750";
}
else if (convertedWeightText >= 0.751)
{
    weightMessage = @"0.751 or over";
}

UIAlertView *alert = [[UIAlertView alloc]
                      initWithTitle: @"Error"
                      message: weightMessage
                      delegate: nil
                      cancelButtonTitle:@"OK"
                      otherButtonTitles:nil];
[alert show]; 
```

任何我出错的想法/我忘记做的事情将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T14:49:35.817

查看 if-else if 代码的情况，如果代码没有 from 的范围**`0.750 to 0.751.`**

浮点值必须小心比较。你应该考虑**`0.751`**可能性**`0.75099999...`**

下面循环，结果是99.999046，不是100。继续加多，精度差。

```
float a= 0.1f;
float result = 0.f;
for(int i = 0; i<1000; i++)
{
    result += 0.1f;
}

printf("result:%f", result); //99.999046 
```

所以，一般来说，不推荐比较这些表达式。

```
if (result == expectedResult) 
```

推荐写下面的方法来比较。

```
bool AlmostEqualRelative(float A, float B, float maxRelativeError)
{
    if (A == B)
        return true;
    float relativeError = fabs((A - B) / B);
    if (relativeError <= maxRelativeError)
        return true;
    return false;
} 
```

欲了解更多信息，请阅读此处

[http://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm](http://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm)

此外，您必须阅读此 wiki：

[http://en.wikipedia.org/wiki/Floating_point](http://en.wikipedia.org/wiki/Floating_point)

[http://en.wikipedia.org/wiki/Denormal_number](http://en.wikipedia.org/wiki/Denormal_number)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T15:00:42.440

十进制值通常不能用二进制精确表示。当用户输入 0.751 时，您返回的实际浮点数可能会稍小，例如 0.750999942。尝试记录该值以查看发生了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T15:05:02.043

您不是第一个对浮点数的实际行为感到惊讶的程序员。

实际上，二进制十进制数更多是问题，然后是浮点细节。

尝试将小数部分只有 3 位的 0.751 转换为二进制数，您会看到。

简而言之，0.751 表示为 -1 的二进制指数和浮点数中的尾数 1.10000000100000110001001（浮点数只有 23+1 位的尾数精度）。

也就是说，在十进制中，指数为 -1，尾数为 1.5019999742507935。

因此 2^-1 * 1.5019999742507935 = 0.7509999871254 并且它没有通过 if 中的测试。

# joomla1.5 - 为什么我的 Joomla 网站会出现此错误？致命错误：允许的内存大小为 134217728 字节已用尽

> ID：11915638
> 
> 赞同：1
> 
> 时间：2012-08-11T14:45:04.880
> 
> 标签：joomla1.5

我的网站间歇性地给我以下错误：

致命错误：第 478 行 /home//public_html/libraries/joomla/database/database/mysqli.php 中允许的内存大小为 134217728 字节已用尽（尝试分配 80 字节）

经过研究，我发现有很多模块/扩展可能会导致

它是一个共享主机包，以下是 PHP 规范（取自 Joomla Admin）：

*   PHP 版本 5.2.17
*   memory_limit 512M（本地）64M（主值 - 不确定这意味着什么）

这个问题反复出现，即使我禁用了我们正在使用的所有插件，我也无法解决它。我不确定要做什么。使用更多 PHP memory_limit 升级到更好的服务器会有帮助吗？

链接到我的网站：

bit.ly/RAKDtx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T14:51:43.290

尝试将其放入 configuration.php：

```
ini_set ('memory_limit', '128M '); 
```

或将其放入 .htaccess 文件中：

```
php_value memory_limit 128M 
```

而且，如果 128 不起作用，也许您可​​以将该值更改为 256。祝你好运。

关于Master值：

> “本地”列中显示的值是您正在使用的内存限制。如果未设置本地值，则主值是您的内存限制。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-02T08:51:02.303

我也遇到了内存限制反复出现的问题，所以我更改了两次，从 64 到 128 再到 256 个月，（向我的提供商支付更多费用），几个月后问题又回来了。整个网站也非常缓慢。我禁用了 JV 计数器，一切都恢复了，重新启动并运行！一些糟糕的代码要重写，伙计们！

# mysql - MySQL - 有条件的 WHERE

> ID：11915642
> 
> 赞同：0
> 
> 时间：2012-08-11T14:46:40.530
> 
> 标签：mysql

看，我有这个公告板。这个查询在这里工作得很好。

```
 SELECT bulletin.date,
        bulletin.title,
        bulletin.content,
        bulletin.id,
        bulletin.made_by,
        users.ID,
        users.name
    FROM bulletin, users
    WHERE bulletin.id = '12345'
        AND bulletin.made_by = users.ID
    LIMIT 1 
```

现在，我遇到了麻烦，因为当用户删除他的帐户时，没有关于该人的信息，他会从用户表中删除。我知道可能有其他方法可以解决这个问题，但我现在无法解决。

所以我问：即使我有“AND bulletin.made_by = users.ID”，如何让该查询返回 bulletin.date、bulletin.title 和 bulletin.content，其中 bulletin.id 等于 12345？你看，对于用户仍然存在的所有其他帖子，我需要拥有它。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T14:48:48.643

用一个`LEFT OUTER JOIN`

```
SELECT b.date,
       b.title,
       b.content,
       b.id,
       b.made_by,
       b.ID,
       b.name
FROM bulletin b
LEFT OUTER JOIN users u on b.made_by = u.ID
WHERE b.id = '12345'
LIMIT 1 
```

看到[这个关于连接的精彩解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T14:52:07.550

当前您正在使用`INNER JOIN`，使用`LEFT JOIN`以解决您的问题。

```
SELECT a.date,
       a.title,
       a.content,
       a.id,
       a.made_by,
       a.ID,
       a.name
FROM bulletin a
         LEFT JOIN users c
           ON a.made_by = c.ID
WHERE a.id = '12345'
LIMIT 1 
```

`LEFT JOIN`基本上从`left`表中获取所有记录，无论它在第二个表中是否有匹配的行。

# iphone - viewController nib 的视图为零？

> ID：11915644
> 
> 赞同：0
> 
> 时间：2012-08-11T14:46:51.357
> 
> 标签：iphone, ios, view, xib

我曾经只以编程方式创建 viewController/views。

使用 xib 比我预期的要难。

我发现 xib 或任何其他子视图的 self.view 最初为零。

```
I created the viewController by [[MyViewController alloc] init]  
and tried to [myViewController.imageView setImage: image];  //imageView is nil  

NSLog(@"%p", myViewController.view); // access view here
[myViewController.imageView setImage: image]; //works now 
```

我觉得我错过了一些非常基本的东西。那会是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T15:00:59.917

如[文档中`UIViewController`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)所述，当您第一次访问该`view`属性时，视图会延迟加载。最早可以参考它们的是`viewDidLoad`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T14:50:53.057

根据我的经验，当我尝试在 viewDidLoad 触发之前访问视图时会发生这种情况，例如尝试在视图控制器的 init 方法中访问它。如果是这种情况，请等到 viewDidLoad 触发后才能访问视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T16:15:01.233

尝试

```
[[MyViewController alloc] initWithNibname:@"mynibname" bundle:nil] 
```

以这种格式分配正确的视图....试试看

# css - 如何强制 div 到下一行

> ID：11915647
> 
> 赞同：6
> 
> 时间：2012-08-11T14:47:33.917
> 
> 标签：css, html

在下面的布局中，我想`div1`和`div2`to 在同一行，但移到`div3`下一行（下`div1`）。提前致谢。

```
<html>
 <body>
<div style="width:50%;">
    <div id="div1" style="float:left; 
                                  background-color:red; 
                                  vertical-align: bottom;">
        <label> This is my label</label><br>
        <input  type ="text">
    </div>
    <div id="div2" style="padding-left:10px;
                                  padding-right:0px;
                                  float:left; 
                                  background-color:green;  
                                  vertical-align: bottom;">
        <label> &nbsp;</label><br>
        <button id="btn" >My button</button>
    </div>
    <div id="div3" style="background-color:yellow;">This is error</div>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-11T14:50:19.390

采用`<br style="clear: both;">`

```
<html>
 <body>
<div style="width:50%;">
    <div id="div1" style="float:left; background-color:red; vertical-align: bottom;">
        <label> This is my label</label><br>
        <input  type ="text">
    </div>
    <div id="div2" style="padding-left:10px;padding-right:0px;float:left; background-color:green;  vertical-align: bottom;">
        <label> &nbsp;</label><br>
        <button id="btn" >My button</button>
    </div>

    <br style="clear: both;"> 

    <div id="div3" style="background-color:yellow; float:none" >This is error</div>
</div>
</body>​​​​​​ 
```

[jsFiddle](http://jsfiddle.net/X7nHE/)

# iphone - 播放资源 MP3

> ID：11915649
> 
> 赞同：0
> 
> 时间：2012-08-11T14:47:44.760
> 
> 标签：iphone, objective-c, xcode, avaudioplayer, mpmusicplayercontroller

我想创建一个类似 iPod 的应用程序，它只播放项目资源文件夹中的 MP3 文件。

我应该采取哪种方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T15:46:40.303

## .h 文件

```
#include <AVFoundation/AVFoundation.h>
@interface audioplayer : NSObject 
<AVAudioPlayerDelegate>
{
    NSTimer * timer;
    AVAudioPlayer * audio;
}
@end 
```

## .m 文件

```
// start plying music
@implementation audioplayer
- (void)main 
{
    [super viewDidLoad];
    NSString * path = [[NSBundle mainBundle] pathForResource:@"soundfile" ofType:@"mp3"];
    NSURL * url = [NSURL fileURLWithPath:path];
    audio = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:nil];
    audio.delegate = self;
    [audio play];
    timer = [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(playSequence) userInfo:nil repeats:YES];

}
// display the time playing
- (void) playSequence{
    if(audio.playing){
        NSLog(@"%@", [NSString stringWithFormat:@"%f", audio.currentTime]);
    } else {
        [timer invalidate];
    }    
}
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T19:12:47.450

我会使用这个 [https://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html)

# c# - 受保护的成员对用户可见

> ID：11915651
> 
> 赞同：2
> 
> 时间：2012-08-11T14:47:56.523
> 
> 标签：c#, .net, winforms, protected, access-modifiers

这将是我在这里的第一个问题，所以请宽容。

这怎么可能：

```
//there is a Form1 class which has a TableAdapter member generated by designer...
partial class Form1
{
    private void InitializeComponent()
    {
         this.SomeTableTableAdapter = new SomeDatabaseDataSetTableAdapters.SomeTableTableAdapter();
    }

    private SomeDatabaseDataSetTableAdapters.SomeTableTableAdapter SomeTableTableAdapter;
 }

//here is this TableAdapter class
//It has PROTECTED member called "Adapter"
public partial class SomeTableTableAdapter : global::System.ComponentModel.Component
{
    protected internal global::System.Data.SqlClient.SqlDataAdapter Adapter
    {
    }
}

//and in the constructor of Form1 class I can do something like this:
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        this.SomeTableTableAdapter.Adapter.InsertCommand.CommandText = @"INSERT INTO (...)";
    }
} 
```

既然 Form1 不是从 SomeTableTableAdapter 继承的，我怎么能访问受保护的成员？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T14:53:44.613

`protected internal`表示受保护或内部。允许从派生类或包含程序集进行访问。

[访问修饰符（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173121.aspx)：

> **protected internal**
> 类型或成员可以被声明它的程序集中的任何代码访问，也可以从另一个程序集中的派生类中访问。来自另一个程序集的访问必须在派生自声明受保护内部元素的类的类声明中进行，并且必须通过派生类类型的实例进行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T14:53:27.243

该`Adapter`属性被声明为，这意味着派生类 ( )**和**同一程序集中的类 ( )`protected internal`都可以访问它。由于与 位于同一个程序集中，因此它们可以访问彼此的内部成员。`protected`**`internal``Form1``SomeTableTableAdapter`**

# python - 使用 Python 比较 CSV 文件并打印结果

> ID：11915658
> 
> 赞同：-3
> 
> 时间：2012-08-11T14:49:10.757
> 
> 标签：python, csv, compare

我正在寻找比较（国家名称的拼写）两个 csv 文件的值并打印不匹配的国家/地区的名称。我正在对两个具有国名的数据集进行空间分析，我收到的结果不准确，我认为这是由于国名拼写错误造成的。我提取了国家名称并将它们保存到两个不同的 CSV 文件中进行比较。我查看了该站点上的其他几个示例（许多示例希望比较几列并执行各种其他功能）并且在操作代码方面没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T19:11:53.540

这是一个快速的尝试：

```
import requests
import bs4     # the 'beautifulsoup4' module
import pickle

# find an 'all the countries' listing
url = "http://www.nationsonline.org/oneworld/countries_of_the_world.htm"
r   = requests.get(url)
bs  = bs4.BeautifulSoup(r.text)

# grab all table rows
rows = [
    [cell.text.strip() for cell in row.findAll('td')]
    for row in bs.findAll('tr')
]
# filter for just the rows containing country-name data
rows = [row[1:] for row in rows if len(row) == 4]

# create a look-up table
country = {}
for en,fr,lo in rows:
    country[en] = en
    country[fr] = en
    country[lo] = en

# and store it for later use
with open('country.dat', 'wb') as outf:
    pickle.dump(country, outf) 
```

我们现在有一个字典，它采用各种国家拼写并返回每个国家的规范英文名称。根据您的数据，您可能希望将其扩展为包括 ISO 国家缩写等。

对于字典中没有的拼写，我们可以搜索相近的替代词：

```
import difflib

def possible_countries(c):
    res = difflib.get_close_matches(c, country.keys(), cutoff=0.5)
    return sorted(set(country[r] for r in res)) 
```

我们可以使用它来处理您的 .csv 文件，提示进行适当的替换：

```
import sys
import pickle
import csv

def main(csvfname):
    # get existing country data
    with open('country.dat', 'rb') as inf:
        country = pickle.load(inf)

    # get unique country names from your csv file
    with open(csvfname, 'rb') as inf:
        data = sorted(set(row[0] for row in csv.reader(inf)))

    for c in data:
        if c not in country:
            print('"{}" not found'.format(c))
            sugg = possible_countries(c)
            if sugg:
                print('Suggested replacements:\n  {}'.format('\n  '.join(sugg)))
            else:
                print('(no suggestions)')
            repl = raw_input('Enter replacement value (or <Enter> for none): ').strip()
            if repl:
                country[c] = repl

    # re-save country data
    with open('country.dat', 'wb') as outf:
        pickle.dump(country, outf)

if __name__=="__main__":
    if len(sys.argv) == 2:
        main(sys.argv[1])
    else:
        print('Usage: python fix_countries.py csvfname') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T14:52:04.580

如果我理解正确，您可以使用

```
diff -u file1 file2 
```

或任何其他文件比较工具。如果不是 - 请指定有关输入文件的更多详细信息。

# mongodb - MongoDB：查询数

> ID：11915659
> 
> 赞同：1
> 
> 时间：2012-08-11T14:49:21.637
> 
> 标签：mongodb

最近，我意识到我做了很多查询。（我认为）

编辑：

我只是想知道我是否可以分析我如何构建我的应用程序。使用`top`Linux？或者只是通过在浏览器中加载站点。并以 firebug 为例来查看查询是否很长。没有服务器端技巧？因为我以一个页面为例，它加载了 8 个查询。我觉得很多。不 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T22:43:40.087

与任何数据库一样，您应该关注的不一定是查询的总数，而是每个查询返回的数据的查询性能和效率。根据您的应用程序设计、数据模型和索引......每个页面的预期数量可能是八个查询。无论查询的数量如何，您都希望确保常见的查询是*快速*的。

您可以在几个关键位置尝试了解 MongoDB 中的查询。

按易用性的粗略顺序：

**1)**对查询使用**[explain()](http://www.mongodb.org/display/DOCS/Drivers)**功能，以获取有关查询计划和索引使用的更多信息。

这应该是了解您的常见查询是否需要索引或是否有效使用索引的起点。

**2)**您可以为 MongoDB 数据库启用**[Database Profiler](http://www.mongodb.org/display/DOCS/Database+Profiler)**。

捕获的分析信息类似于 explain() 输出，包括所有读/写查询。如果您只想查看慢查询而不是全部查询，则可以设置适当的分析级别。“慢查询”的默认值为 100 毫秒，但您可以根据需要进行设置。

为来自 MongoDB shell 的所有查询启用分析"

```
$ mongo mydb
MongoDB shell version: 2.2.0-rc0
connecting to: mydb

> db.setProfilingLevel(2);
{ "was" : 0, "slowms" : 100, "ok" : 1 }

> db.getProfilingLevel()
2 
```

该文档包含有关[查看配置文件数据的](http://www.mongodb.org/display/DOCS/Database+Profiler#DatabaseProfiler-ViewingtheData)更多详细信息。

**3）**您也可以尝试查看应用程序/[驱动程序](http://www.mongodb.org/display/DOCS/Drivers)生成的查询，然后再将其发送到 MongoDB。

这样做的说明（或可能性）将根据您使用的驱动程序而有所不同（检查您的驱动程序文档！）。

**4)**其他分析工具

有几个实用程序可以分析您的分析数据并帮助提供索引建议：

*   [Dex - 索引和查询分析器](http://blog.mongolab.com/2012/07/remote-dex/)
*   [教授 - MongoDB Profile Viewer](http://late.am/post/2011/09/22/professor-a-mongodb-profile-viewer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T18:52:19.463

您可以检查 MongoDB 日志中的慢查询：[http ://www.mongodb.org/display/DOCS/Logging](http://www.mongodb.org/display/DOCS/Logging)

至于查询量 - 让您摆脱这种 SQL as-few-queries-as-possible 思维定势。扔掉 MongoDB 的规则手册。例如，每次迭代游标时，它都会再次运行查询，因为它从数据库中流出，所以您认为您正在运行 8 个查询，但实际上可能已经每秒运行 10 个。Mongo 的结果集与 SQL 不同，查询它们不应被视为相同。

* * *

我意识到，当我回答这个问题时，我实际上粘贴了日志链接而不是分析链接，但是@Stennie 粘贴了正确的链接，所以没关系。

# azure - Windows Live/Azure 两步验证

> ID：11915662
> 
> 赞同：3
> 
> 时间：2012-08-11T14:49:58.440
> 
> 标签：azure, windows-live

在阅读了关于 Honan 先生的数字生活被破坏的消息后：http: [//www.wired.com/gadgetlab/2012/08/apple-amazon-mat-h](http://www.wired.com/gadgetlab/2012/08/apple-amazon-mat-honan-hacking/all/) ​​onan-hacking/all/ ，我开始思考 Windows Live 的登录安全性和 Windows Azure。是否有任何类型的两步验证可以应用于 windows live/azure？谷歌的两步验证非常棒，这将是理想的，但我在这个主题上找不到任何东西。

谢谢，

安德鲁·彼得森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:03:22.577

我确信您对使用 Windows Azure 进行两步验证的担忧是有效的。到目前为止，您无法使用 Windows Azure 自己实现 2 因素身份验证，因为它必须在自己的平台中完成。我相信 Windows Azure 产品团队真诚地致力于解决 Windows Azure 中的此类问题，但我认为这个论坛不是讨论这些细节的好地方。

# java - 找不到 xpath 对象中的 Selenium Webdriver

> ID：11915663
> 
> 赞同：0
> 
> 时间：2012-08-11T14:50:01.683
> 
> 标签：java, selenium, webdriver, selenium-webdriver

我正在使用 Java 使用 Selenium Webdriver 进行自动化。我需要单击 span 标签内的类名。例子

为此，我使用 xpath 选择 class="selcteME" 并使用 click()。如果我在调试模式下设置断点但是当我在调试模式下运行没有断点的脚本时，这工作正常，对象没有被选中。

如果您有解决方案，请分享或建议我如何在 span 标签中获取类名

() 没有 xpath

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-11T19:55:09.953

您是否尝试过 CSS 选择器？

我建议使用一些 IDE 来生成基本测试，然后使用你的逻辑。

# sql-server - 从子句中选择查询的优点

> ID：11915665
> 
> 赞同：1
> 
> 时间：2012-08-11T14:50:08.860
> 
> 标签：sql-server

在 from 子句中使用 select 子句与普通 select 子句相比有什么优势？例如。

```
select name, age, address from emp where 
 empid = 12. 
```

下面的查询比上面的查询有什么优势。

```
 select A.name, A.age, A.address from (select
  * from emp where empid = 12) as A. 
```

内部查询创建一个临时视图，并从该结果中选择第一个查询中的字段。对 ？。但是这个问题顶部提到的查询也可以用来获得相同的结果。

有什么好处？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T15:03:38.567

这种技术可用于在内部查询中派生您不希望在外部查询中显示的结果的一种方式。一个简单的例子，我想看看每个家庭中最年长的人，这是一种方法：

```
SELECT name, age, address FROM
( 
  SELECT name, age, address, 
    rn = ROW_NUMBER() OVER (PARTITION BY address ORDER BY age DESC)
  FROM dbo.emp
) AS x
WHERE rn = 1; 
```

这样，派生列（本质上是按年龄排列的家庭成员，首先是最老的）不需要是结果集中的列（这也便于过滤）。

而且我敢肯定还有很多其他的（例如不必重复复杂的表达方式）；这只是第一个想到的。

在您在问题中发布的情况下，我根本看不到优势。如果你发布一个真实的例子，有人说有优势，我们也许能够解释原因（或者至少他们为什么会这么认为）。

# iphone - 如何在 iOS 中将屏幕截图附加到 mailcomposer

> ID：11915671
> 
> 赞同：-2
> 
> 时间：2012-08-11T14:51:01.730
> 
> 标签：iphone, objective-c, ios, xcode, mfmessagecomposeview

嗨，我正在使用下面的代码将屏幕截图附加到 mailcomposer，我没有要检查的设备，所以这可以在实际设备上使用吗？

```
-(void)launchMailAppOnDevice
{
    /*Take a SnapShot of current screen*/
    UIGraphicsBeginImageContext(self.view.frame.size);
    [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage * image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    NSData * imageData = UIImageJPEGRepresentation(image, 1.0);

    NSString *recipients = @"mailto:xyz@abc.com?cc=@\"\"&subject=blah!!blah!!";

    NSString *body = @"&body=blah!!blah!!";

    NSString *email = [NSString stringWithFormat:@"%@%@%@", recipients, body,  imageData];
    email = [email stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:email]];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T15:03:09.123

最后 5 行是错误的。您很可能希望使用 MFMailComposeViewController 类：

```
MFMailComposeViewController *mcv = [[MFMailComposeViewController alloc] init];

[mcv setSubject:@"blah!!blah!!"];
[mcv setToRecipients:[NSArray arrayWithObject:@"xyz@abc.com"]];
[mcv setMessageBody:@"Blah!! 'tis the body!" isHTML:NO];
[mcv addAttachmentData:imageData mimeType:@"image/jpeg" fileName:@"Screenshot.jpg"];

[someViewController presentModalViewController:mcv animated:YES];
[mcv release]; 
```

P.s.：不要忘记将 MessageUI 框架添加到您的项目中，并且`#import <MessageUI/MessageUI.h>`.

P. ps：虽然在实际设备上进行测试很重要，但在编写实际代码之前阅读一些指南和文档更为重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T14:55:48.780

您需要添加：

```
NSData *imageData = UIImagePNGRepresentation(image);
[picker addAttachmentData:imageData mimeType:@"image/png"   fileName:@"fileName"]; 
```

如果您打算使用 a `MFMailComposeViewController`，您应该使用它而不是 mailto:，但我无法强调始终在真实设备上测试您的应用程序的重要性。

# vb.net - 解析文本框时出现无效的强制转换异常

> ID：11915673
> 
> 赞同：-1
> 
> 时间：2012-08-11T14:51:23.477
> 
> 标签：vb.net

[错误图像](http://www.flickr.com/photos/83812754@N07/7759083382/in/photostream)

好吧，上面的链接会告诉你，但我有一些文本框，当输入数字时，它们都会自动总结并在单独的框中显示总和。这是显示总和的文本框的代码：

```
Try
        Dim One As Integer
        Dim two As Integer
        Dim three As Integer
        Dim four As Integer
        Dim five As Integer
        Dim six As Integer
        Dim seven As Integer
        If CDbl(txtMon1.Text) > 24 Then
            MsgBox(Title:="Error", Prompt:="There not more than 24 hours a day.")
        ElseIf CDbl(txtTues1.Text) > 24 Then
            MsgBox(Title:="Error", Prompt:="There not more than 24 hours a day.")
        ElseIf CDbl(txtWed1.Text) > 24 Then
            MsgBox(Title:="Error", Prompt:="There not more than 24 hours a day.")
        ElseIf CDbl(txtThurs1.Text) > 24 Then
            MsgBox(Title:="Error", Prompt:="There not more than 24 hours a day.")
        ElseIf CDbl(txtFri1.Text) > 24 Then
            MsgBox(Title:="Error", Prompt:="There not more than 24 hours a day.")
        ElseIf CDbl(txtSat1.Text) > 24 Then
            MsgBox(Title:="Error", Prompt:="There not more than 24 hours a day.")
        ElseIf CDbl(txtSun1.Text) > 24 Then
            MsgBox(Title:="Error", Prompt:="There not more than 24 hours a day.")
        ElseIf String.IsNullOrEmpty(txtMon1.Text) Then
            One = CInt(0)
            two = CInt(0)
            three = CInt(0)
            four = CInt(0)
            five = CInt(0)
            six = CInt(0)
            seven = CInt(0)
        ElseIf Not IsNumeric(txtMon1.Text) Then
            One = CInt(0)
            two = CInt(0)
            three = CInt(0)
            four = CInt(0)
            five = CInt(0)
            six = CInt(0)
            seven = CInt(0)
        Else
            One = CInt(Convert.ToInt64(txtMon1.Text))
            two = CInt(Convert.ToInt64(txtTues1.Text))
            three = CInt(Convert.ToInt64(txtWed1.Text))
            four = CInt(Convert.ToInt64(txtThurs1.Text))
            five = CInt(Convert.ToInt64(txtFri1.Text))
            six = CInt(Convert.ToInt64(txtSat1.Text))
            seven = CInt(Convert.ToInt64(txtSun1.Text))
            txtTot1.Text = CStr(Math.Round(One + two + three + four + five + six + seven))
        End If
    Catch ex As Exception
        MsgBox(ex.ToString)
    End Try
End Sub

Private Sub txtTot2_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles txtTot2.TextChanged, txtMon2.TextChanged, txtTues2.TextChanged, txtWed2.TextChanged, txtThurs2.TextChanged, txtFri2.TextChanged, txtSat2.TextChanged, txtSun2.TextChanged
    Try
        Dim One As Integer
        Dim two As Integer
        Dim three As Integer
        Dim four As Integer
        Dim five As Integer
        Dim six As Integer
        Dim seven As Integer
        If CDbl(txtMon2.Text) > 24 Then
            MsgBox(Title:="Error", Prompt:="There not more than 24 hours a day.")
        ElseIf CDbl(txtTues2.Text) > 24 Then
            MsgBox(Title:="Error", Prompt:="There not more than 24 hours a day.")
        ElseIf CDbl(txtWed2.Text) > 24 Then
            MsgBox(Title:="Error", Prompt:="There not more than 24 hours a day.")
        ElseIf CDbl(txtThurs2.Text) > 24 Then
            MsgBox(Title:="Error", Prompt:="There not more than 24 hours a day.")
        ElseIf CDbl(txtFri2.Text) > 24 Then
            MsgBox(Title:="Error", Prompt:="There not more than 24 hours a day.")
        ElseIf CDbl(txtSat2.Text) > 24 Then
            MsgBox(Title:="Error", Prompt:="There not more than 24 hours a day.")
        ElseIf CDbl(txtSun2.Text) > 24 Then
            MsgBox(Title:="Error", Prompt:="There not more than 24 hours a day.")
        ElseIf String.IsNullOrEmpty(txtMon2.Text) Then
            One = CInt(0)
            two = CInt(0)
            three = CInt(0)
            four = CInt(0)
            five = CInt(0)
            six = CInt(0)
            seven = CInt(0)
        ElseIf Not IsNumeric(txtMon2.Text) Then
            One = CInt(0)
            two = CInt(0)
            three = CInt(0)
            four = CInt(0)
            five = CInt(0)
            six = CInt(0)
            seven = CInt(0)
        Else
            One = CInt(Convert.ToInt64(txtMon2.Text))
            two = CInt(Convert.ToInt64(txtTues2.Text))
            three = CInt(Convert.ToInt64(txtWed2.Text))
            four = CInt(Convert.ToInt64(txtThurs2.Text))
            five = CInt(Convert.ToInt64(txtFri2.Text))
            six = CInt(Convert.ToInt64(txtSat2.Text))
            seven = CInt(Convert.ToInt64(txtSun2.Text))
            txtTot2.Text = CStr(Math.Round(One + two + three + four + five + six + seven))
        End If
    Catch ex As Exception
        MsgBox(ex.ToString)
    End Try 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T14:57:57.373

您确实应该使用`Integer.TryParse(...)`or`Double.TryParse(...)`将那些字符串转换为数字。

例子：

```
Dim One As Integer = 0
If Not Integer.TryParse(txtMon1.Text, One) Then
  MessageBox.Show("Invalid Entry")
End If 
```

这条线没有什么意义：

```
One = CInt(Convert.ToInt64(txtMon2.Text)) 
```

如果您只是阅读它，它会说“我正在转换为整数转换为整数 64 这个字符串”。

在您可以使用之前，`CInt(...)`您必须验证字符串内容是否可以转换为数字。这就是`TryParse(...)`适合你的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T14:55:42.710

在检查值是否 > 24 之前，您需要检查文本框是否为空或空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T19:55:00.363

一些干净简单的东西怎么样：

```
 Dim hours() As Integer = {txtMon1.Text.Trim.Length, txtTue1.Text.Trim.Length, txtWed1.Text.Trim.Length, txtThurs1.Text.Trim.Length, txtFri1.Text.Trim.Length, txtSat1.Text.Trim.Length, txtSun1.Text.Trim.Length}
    If hours.Min > 0 Then
        Dim hoursval() As Integer = {Convert.ToInt16(txtMon1.Text), Convert.ToInt16(txtTue1.Text), Convert.ToInt16(txtWed1.Text), Convert.ToInt16(txtThurs1.Text), Convert.ToInt16(txtFri1.Text), Convert.ToInt16(txtSat1.Text), Convert.ToInt16(txtSun1.Text)}
        If hoursval.Max > 24 Then
            MsgBox("There cannot be more than 24 hours in a day", MsgBoxStyle.OkOnly)
        End If
    End If 
```

未经测试，但它应该工作！

我忘了添加 - 这是除了使用其他人建议的 tryparse 之外。检查空白字符串是用户经常做的事情，这会在没有太多开销的情况下解决这个问题。

# vim - 仅当更新命令执行某些操作时才执行脚本

> ID：11915677
> 
> 赞同：0
> 
> 时间：2012-08-11T14:51:48.057
> 
> 标签：vim

我是 vimscript 的新手，所以这可能很容易。我知道这个`update`命令，`write`除了它只在进行了更改时才写入。我想要类似的东西

```
if ( update )
    call expensiveOperation() 
```

`update`仅在实际执行某些操作时才调用昂贵的操作。但是，我对 vim 不够熟悉，不知道如何做到这一点。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:02:13.050

不是直接的，它是可能的：`update`如果`&modified`选项似乎为真，则执行一些操作（当`&buftype`“nofile”或“nowrite”时，此选项的值被忽略）。因此，您应该执行以下操作：

```
let wasmodified=(&modified && !(&buftype is# 'nowrite' || &buftype is# 'nofile'))
update
if wasmodified
    call ExpensiveOperation()
endif 
```

# c# - C# 将 Int 转换为两个十六进制字节？

> ID：11915678
> 
> 赞同：3
> 
> 时间：2012-08-11T14:51:52.463
> 
> 标签：c#, hex

我有一个整数，需要将其转换为四位十六进制值。

例如，假设 int 值为 16。我正在寻找一种从 16 到 0x00 0x10 的方法。

任何建议将不胜感激！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T15:02:52.607

试试这个：

```
var input = 16;

var bytes = new byte[2];
bytes[0] = (byte)(input >> 8);  // 0x00
bytes[1] = (byte)input;         // 0x10

var result = (bytes[0] << 8)
           | bytes[1];

// result == 16 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T15:08:23.410

这是一个带有正则表达式的表达式，只是为了好玩：

```
Regex.Replace(number.ToString("X4"), "..", "0x$0 ").TrimEnd(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T14:55:06.563

接班！蒙面！蒙面！[`string.Format`](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)它！

```
int n = 16;
string.Format("0x{0:x2} 0x{1:x2}", (n & 0xff00) >> 8, n & 0xff); // 0x00 0x10 
```

[这是一个演示。](http://ideone.com/iqwuf)

格式说明`x2`符表示 2 位十六进制值。

* * *

好的，显然你只需要两个字节。十六进制在这里不相关。

```
byte lowByte = (byte)(n & 0xff);
byte highByte = (byte)(n >> 8 & 0xff); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T14:59:44.017

或者，更通用的解决方案是通过字节数组来完成（然后你可以将它用于字符串或其他数据类型）

```
public static string ByteArrayToString(byte[] ba)
{
   string hex = BitConverter.ToString(ba);
   return hex.Replace("-","");
}

int i = 39;
string str = "ssifm";
long l = 93823;

string hexi = ByteArrayToString(BitConverter.GetBytes(i));
string hexstr = ByteArrayToString(Encoding.Ascii.GetBytes(str));
string hexl = ByteArrayToString(BitConverter.GetBytes(l)); 
```

这会以“FF”格式返回它们，您可以自己添加“0x”，方法是在 ToString() 之后添加它：

```
return "0x"+hex.Replace("-", " 0x"); 
```

# seo - 重定向电子商务网站上的封闭式拍卖页面

> ID：11915686
> 
> 赞同：0
> 
> 时间：2012-08-11T14:52:38.867
> 
> 标签：seo, e-commerce, http-status-code-301

在过去的几个月里，我们一直在优化一个大型电子商务拍卖网站。该网站可能会连续打开和关闭同一产品的多个拍卖 - 同一产品不会同时进行 2 次拍卖。直到最近，封闭式拍卖页面才自动从网站上删除。最近，他们决定保持封闭式拍卖页面处于活动状态，同时通知用户特定拍卖已关闭。这些封闭式拍卖页面仍在被抓取，并在 Google SERP 中返回，有时位于相同产品的实时拍卖页面之上。

我们一直在考虑如何处理封闭式拍卖页面的一些选项，但不确定要实施哪一个：

1.  301 从封闭式拍卖页面重定向到每个相关产品的相关子类别页面。有大量的 301 对网站的排名有害吗？
2.  保持关闭的拍卖页面处于活动状态并弹出一个 JS 小部件，告诉用户拍卖已关闭，并为他们提供网站上相关拍卖的建议，最好是类似产品的现场拍卖。

有没有人有专门的拍卖网站经验以及如何处理已弃用的拍卖页面？在网上找到的所有信息都没有定论，也不是针对手头的案例（拍卖电子商务网站）。

提前致谢， 内特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T02:39:14.940

I'm not a SEO expert, so you should challenge everything I will say on that matter, but I will try to help you.

1) If you need to do that, 301 is the SEO friendly way to do it. 301 is also known as permanent redirect and should be used if the change you want to make is permanent. The stats of the old page will be *transfered* to the new destination page.

So, on the big picture and to answer your question, a lot of 301 will not *probably* hurt your SEO.

But... you're redirecting the user to a different content and be aware that you are transferring the stats from Product page to another page that is a page with recommendations.

You can read more about it on [http://seo-hacker.com/301-302-redirect-affect-seo/](http://seo-hacker.com/301-302-redirect-affect-seo/)

Another important point is that a lot of redirects can hurt your **scalability**, because you are increasing the load on your web servers.

2) As an user perspective I would prefer to keep the closed auction page alive and just show me some information saying the auction was closed (ebay does this).

You may also show some recommendations for relevant auctions on the site, but you should be very careful with the recommendations, if they are useless you may end angering the users.

# android - Flash打开全屏时Android WebView空白 - ICS 4.0

> ID：11915690
> 
> 赞同：2
> 
> 时间：2012-08-11T14:52:54.817
> 
> 标签：android, flash, webview

我正在构建一个应用程序，该应用程序依赖于能够在 WebView 中播放 Flash 并在发现一切正常，直到 Flash 视频全屏显示。请求全屏时，屏幕变黑，音频持续约 5 秒。

我最初发现屏幕变白了，但在下面的文章中调整了解决方案，这已经移动了球门柱。 [Android ICS 4.0 将 Flash WebView 放入全屏调用 hideAll 方法？](https://stackoverflow.com/questions/9181820/android-ics-4-0-placing-flash-webview-into-full-screen-calls-hideall-method)

```
final WebView mWebView = (WebView)findViewById(R.id.webview);
    WebSettings webSettings = mWebView.getSettings();
    webSettings.setPluginState(WebSettings.PluginState.ON);
    webSettings.setJavaScriptEnabled(true);
    mWebView.requestFocusFromTouch();
    mWebView.setWebViewClient(new WebViewClient());

    mWebView.setWebChromeClient(new WebChromeClient(){
        public void onShowCustomView(View view, int requestedOrientation, WebChromeClient.CustomViewCallback callback){
            super.onShowCustomView(view, callback);   
            if(Build.VERSION.SDK_INT >=14) {
                if (view instanceof FrameLayout) {                  
                    mWebView.addView(view, new FrameLayout.LayoutParams(
                    ViewGroup.LayoutParams.MATCH_PARENT,
                    ViewGroup.LayoutParams.MATCH_PARENT,
                    Gravity.CENTER));                   
                    mWebView.setVisibility(View.VISIBLE);
                }
            }
        }
    }); 
```

当全屏 Flash 视频开始时，我在 logcat 中看到以下内容。

08-11 15:09:47.435:V/VideoSurfaceView(23871):surfaceCreated

08-11 15:09:47.435: V/VideoSurfaceView(23871):surfaceChanged 格式=842094169，宽度=480，高度=690

以下答案参考了从浏览器实现类似于 BaseUI 类的 onShowCustomView 。有一个非常相似的方法叫做 showCustomView，我试图修改我的代码以添加 BaseUI 类的内容，令人惊讶的是我设法让我的代码编译和运行，但它并没有产生一点点差异。

[尝试进入全屏模式android 4.0时Flash播放器崩溃](https://stackoverflow.com/questions/8660866/flash-player-crashes-when-trying-to-enter-fullscreen-mode-android-4-0)

在此先感谢您的想法和帮助....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T18:20:01.023

经过更多的挖掘，我已经回答了我的问题，这使我进入了下一组问题，我将作为单独的问题发布。

以下代码将从 webView 全屏显示 Flash，只要 Flash 不请求更改方向。它还破坏了源 webView，因为在对“指定的孩子已经有父母”崩溃进行故障排除后，我被迫添加了 removeAllViews() 方法。

还将 WebView 作为最终实现以允许从重写的 WebChromeClient 方法进行访问会破坏需要访问此 WebView 的任何其他方法

```
public void startWebView(String url){
   final WebView mWebView = (WebView)findViewById(R.id.webview);
   final Context ctx = this;
   WebSettings webSettings = mWebView.getSettings();
        webSettings.setBuiltInZoomControls(true);
        webSettings.setPluginState(WebSettings.PluginState.ON);
        webSettings.setJavaScriptEnabled(true);
        webSettings.setLoadWithOverviewMode(true);

        mWebView.requestFocusFromTouch();
        mWebView.setWebViewClient(new WebViewClient());

        mWebView.setWebChromeClient(new WebChromeClient(){
            protected WebView tempView;
            public void onShowCustomView(View view, int requestedOrientation, WebChromeClient.CustomViewCallback callback){
                super.onShowCustomView(view, callback);   
                if(Build.VERSION.SDK_INT >=14) {
                    if (view instanceof FrameLayout) {                  
                        mWebView.addView(view, new FrameLayout.LayoutParams(
                        ViewGroup.LayoutParams.MATCH_PARENT,
                        ViewGroup.LayoutParams.MATCH_PARENT,
                        Gravity.CENTER));                   
                        mWebView.setVisibility(View.VISIBLE);
                    }
                }

                if (mCustomView != null) {
                    callback.onCustomViewHidden();
                    return;
                }

                mOriginalOrientation = activity.getRequestedOrientation();
                FrameLayout decor = (FrameLayout) activity.getWindow().getDecorView();
                mWebView.setVisibility(View.INVISIBLE);
                mFullscreenContainer = new FullscreenHolder(ctx);
                mWebView.removeAllViews();
                mFullscreenContainer.addView(view, COVER_SCREEN_PARAMS);
                decor.addView(mFullscreenContainer, COVER_SCREEN_PARAMS);
                mCustomView = view;
                setFullscreen(true);

                mCustomViewCallback = callback;
                activity.setRequestedOrientation(requestedOrientation);

            }

            public void onHideCustomView() {
                if(debug==true)Log.d(name,"onHide start");
                mWebView.setVisibility(View.VISIBLE);

                if(debug==true)Log.d(name,"onHide ");
                if (mCustomView == null)
                    return;
                setFullscreen(false);
                FrameLayout decor = (FrameLayout) activity.getWindow().getDecorView();
                decor.removeView(mFullscreenContainer);
                mFullscreenContainer = null;
                mCustomView = null;
                mCustomViewCallback.onCustomViewHidden();
                if(debug==true)Log.d(name,"onHide callback");
                // Show the content view.
                activity.setRequestedOrientation(mOriginalOrientation);
                if(debug==true)Log.d(name,"onHide set orientation");
                mWebView.loadUrl("http://crooksandliars.com/susie-madrak/scott-brown-cries-over-poor-people-ge");
                if(debug==true)Log.d(name,"onHide start webview");
            }

            public void setFullscreen(boolean enabled) {
                Window win = activity.getWindow();
                WindowManager.LayoutParams winParams = win.getAttributes();
                final int bits = WindowManager.LayoutParams.FLAG_FULLSCREEN;
                if (enabled) {
                    winParams.flags |=  bits;
                } else {
                    winParams.flags &= ~bits;
                    if (mCustomView != null) {
                        mCustomView.setSystemUiVisibility(View.SYSTEM_UI_FLAG_VISIBLE);
                    } else {
                        mContentView.setSystemUiVisibility(View.SYSTEM_UI_FLAG_VISIBLE);
                    }
                }
                win.setAttributes(winParams);
            }
        });

        mWebView.loadUrl(url);
}

   static class FullscreenHolder extends FrameLayout {

        public FullscreenHolder(Context ctx) {
            super(ctx);
            setBackgroundColor(00000);
        }

        @Override
        public boolean onTouchEvent(MotionEvent evt) {
            return true;
        }
    } 
```

# css - 特定屏幕分辨率范围缺少 CSS 样式？

> ID：11915696
> 
> 赞同：2
> 
> 时间：2012-08-11T14:53:30.420
> 
> 标签：css, twitter-bootstrap, responsive-design

我从事响应式设计已经有一段时间了，而 twitter 的引导程序似乎是最好的响应式框架之一。

但我有一个关于媒体查询的问题。我在他们的文档中看到以下内容：

```
/* Landscape phones and down */
@media (max-width: 480px) { ... }

/* Landscape phone to portrait tablet */
@media (max-width: 767px) { ... }

/* Portrait tablet to landscape and desktop */
@media (min-width: 768px) and (max-width: 979px) { ... }

/* Large desktop */
@media (min-width: 1200px) { ... } 
```

正如我已经在测试它，在`979px`和`1200px`布局之间没有样式，所以一切都会搞砸。所以我不明白那里的逻辑，有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T14:58:39.253

假设 an 之间`980px`的宽度`1199px`是默认值，并且不使用特殊的媒体查询。因此，您为该宽度定义所有样式，然后为其他“非标准”屏幕证明您的样式。

# c# - 用户应该能够说出图像不能重复的次数

> ID：11915697
> 
> 赞同：0
> 
> 时间：2012-08-11T14:53:36.143
> 
> 标签：c#

我在一个文件夹中有一组图像，我想在用户应该能够说出图像不能重复的次数的条件下随机显示图像。即如果有 10 个图像并且用户输入 3 个，那么它应该以随机顺序显示最近未显示的其他图像（除了最近显示的 3 个图像）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T15:01:02.357

`List`用其中的所有文件名制作一个。让`n`是位于同一图像的两个显示器之间的最小图像数。

```
var list = new List<string>();
// Fill list with all filenames ... 
```

然后只需从范围中`[0..len(List)-n]`随机选择一张图像

```
// Initialization of random number generator just once...
var rand = new Random();
// ...

var index = rand.Next(list.Count - n);
var nextImage = list[index]; 
```

现在，删除图像并将其放在列表的末尾。

```
list.RemoveAt(index);
list.Add(nextImage); 
```

`nextImage`现在包含您的下一张图片。

# jquery - 分页：我应该缓存下一页吗？

> ID：11915703
> 
> 赞同：1
> 
> 时间：2012-08-11T14:54:16.223
> 
> 标签：jquery, performance, caching, pagination

我有一个 PHP Web 应用程序，每个项目类别都有几个结果。因此，我*使用 jQuery 实现了一个分页，*以最小化从第 j 个页面加载第 i 个页面时加载的数据（但这方面根本不重要）。

问题很简单：我是否应该通过对我的 Web 服务器使用这样的隐藏调用（例如，使用*Ajax 调用）来缓存下一个结果？*好处似乎很明显（用户点击响应更快）。有这样的缺点吗？

预先感谢您的支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T15:05:46.257

这是一种不同的方法。您可以尝试以下步骤；

1.  执行 AJAX 请求（第一次）以在页面加载时调用第二个页面（在文档准备功能中）。
2.  将返回数据存储在变量中。
3.  在第二个请求中，清除 HTML 并使用 AJAX 数据附加该字段。
4.  所有`next`点击都应执行 AJAX 请求并将结果保存在变量中。
5.  对于`prev`点击也必须这样做。

希望这可以帮助。

# php - 具有特定类的 mysql_fetch_object

> ID：11915706
> 
> 赞同：0
> 
> 时间：2012-08-11T14:54:52.273
> 
> 标签：php, mysql, database, class

我开发了一个面向对象的留言簿，我有我的班级`GuestBookEntry`：

```
class GuestBookEntry {
protected $id;
protected $entryDate;
protected $authorName;
protected $authorMail;  
protected $entryText; 

// getters, setters and specific functions are omitted
} 
```

我还有一个`mysql`与列同名的表。

好吧，当我获取留言簿条目时，它似乎可以工作，但它只显示getter 返回的`ID`和。`Date`其他东西不会返回到模板。

代码如下所示：

```
public function showEntries() { 
    $query = mysql_query('SELECT * FROM dng_entries ORDER BY id DESC');     
    while($entry = @mysql_fetch_object($query, 'GuestBookEntry')) {
        if(empty($entry)) {
        echo '<font color="white">Keine Eintr&auml;ge vorhanden...</font>';
        } else {    
        var_dump($entry);
        echo '<table class="table table-bordered entryfield" align="right">
                <thead>
                    <tr>
                        <td rowspan="2">'.$entry->getId().'</td>
                        <td width="20%">Datum:</td>
                        <td>Name:</td>
                        <td>Email:</td>
                    </tr>
                    <tr>
                        <td>'.$entry->getEntryDate().'</td>
                        <td>'.$entry->getAuthorName().'</td>
                        <td><a href="mailto:'.$entry->getAuthorMail().'">'.$entry->getAuthorMail().'</a></td>
                </thead>
                <tbody>
                    <tr>
                    <td width="10%" valign="middle">Eintrag:</td>
                    <th colspan="3" valign="top" height="100px">'.$entry->getEntryText().'</td>
                    </tr>
                </tbody>
            </table>';
        }
    }
} 
```

这是一个`var_dump`例如对象：

```
object(GuestBookEntry)#2 (5) { ["id":protected]=> string(1) "2" ["entryDate":protected]=> int(1344696811) ["authorName":protected]=> NULL ["authorMail":protected]=> NULL ["entryText":protected]=> NULL } 
```

更新：这里是 GuestBookEntry 类的其余部分：

```
public function __construct($authorName, $authorMail, $entryText) {
       $this->authorName    = $authorName;
       $this->authorMail    = $authorMail;
       $this->entryDate     = time();
       $this->entryText     = $entryText;
    }

    public function getId() {
       return $this->id;
    }
    public function getAuthorName() {
       return (String) $this->authorName;
    }
    public function getAuthorMail() {
       return (String) $this->authorMail;
    }
    public function getEntryDate() {
       return date('d.n.Y', $this->entryDate);
    }
    public function getEntryText() {
       return $this->entryText;
    }

    public function setAuthorName($authorName) {
       $this->authorName=$authorName;
    }   
    public function setAuthorMail($authorMail) {
       $this->authorMail=$authorMail;
    }
    public function setEntryDate($entryDate) {
       $this->entryDate=$entryDate;
    }
    public function setEntryText($entryText) {
       $this->entryText=$entryText;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T15:07:08.310

你的问题是区分大小写。MySQL 列名不处理驼峰式大小写，但 PHP 看到了基于大小写的属性之间的区别，例如 $entryDate 和 $entrydate。如果您需要视觉分隔，请坚持使用带下划线的小写字母。起作用的原因`id`是它都是小写的。

我认为，如果您只是将所有应该映射到表列的属性名称小写，那么一切都会起作用。

顺便说一句...列名的驼峰式问题可能会因运行 sql server 的操作系统而异。

# macos - 编译 XNU 内核 2050

> ID：11915708
> 
> 赞同：4
> 
> 时间：2012-08-06T09:28:41.540
> 
> 标签：macos, kernel, osx-mountain-lion

我对编译最新版本的 XNU 内核的最佳方式有点困惑。我已经看到很多 Mac OS X 10.4 附带的旧内核的说明，但新的来源缺少说明中包含的很多内容。只是`make`在 XNU 内核源上运行会带来很多关于找不到的错误`ctfconvert`，`ctfmerge`并且`ctfdump`. 有没有人有一个很好的“howto”来构建一个新的内核？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T16:37:53.680

[威利](https://rads.stackoverflow.com/amzn/click/com/1118057651)的一本新书在第 9 章详细介绍了完整的操作指南。

尝试这个：

```
#
# Getting C++ filter 
#
$ curl http://opensource.apple.com/tarballs/cxxfilt/cxxfilt-9.tar.gz > cxx.tar.gz
$ tar xvf cxx.tar.gz
$ cd cxxfilt-9
$ mkdir -p build obj sym
$ make install RC_ARCHS="i386 x86_64" RC_CFLAGS="-arch i386 -arch x86_64 -pipe" \
RC_OS=macos RC_RELEASE=Lion SRCROOT=$PWD OBJROOT=$PWD/obj \ SYMROOT=$PWD/sym DSTROOT=$PWD/build
#
# Getting DTrace – This is required for ctfconvert, a kernel build tool 
#
$ curl http://opensource.apple.com/tarballs/dtrace/dtrace-90.tar.gz > dt.tar.gz
$ tar zxvf dt.tar.gz
$ cd dtrace-90
$ mkdir -p obj sym dst
$ xcodebuild install -target ctfconvert -target ctfdump -target ctfmerge \ ARCHS="i386 x86_64" SRCROOT=$PWD OBJROOT=$PWD/obj SYMROOT=$PWD/sym \ DSTROOT=$PWD/dst
#
# Getting Kext Tools 
#
$ wget http://opensource.apple.com/tarballs/Kext_tools/Kext_tools-180.2.1.tar.gz \ > kt.tar.gz
$ tar xvf kt.tar.gz
$ cd Kext_tools-180.2.1
$ mkdir -p obj sym dst
$ xcodebuild install -target Kextsymboltool -target setsegname \ ARCHS="i386 x86_64" SRCROOT=$PWD OBJROOT=$PWD/obj SYMROOT=$PWD/sym \
DSTROOT=$PWD/dst
#
# Getting Bootstrap commands – newer versions are available, but would # force xcodebuild
#
$ curl http://opensource.apple.com/tarballs/bootstrap_cmds/bootstrap_cmds-72.tar.gz \ > bc.tar.gz
$ tar zxvf bc.tar.gz
$ cd bootstrap_cmds-84
$ mkdir -p obj sym dst
$ make install RC_ARCHS="i386" RC_CFLAGS="-arch i386 -pipe" RC_OS=macos \
RC_RELEASE=Lion SRCROOT=$PWD OBJROOT=$PWD/obj SYMROOT=$PWD/sym DSTROOT=$PWD/dst 
```

tar 球版本现在不同（例如 DTrace 是 96，而不是 90），但这应该可以满足依赖关系。一旦你有了它们，你只需运行通常的 make (make `ARCH_CONFIGS=" X86_64" KERNEL_CONFIGS="RELEASE"`)。您可能需要添加`DEBUG`, 以获取默认禁用的出色调试和跟踪消息。

这适用于 XCode 4.4。现在才试了一下，真的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:39:27.110

我认为这不适用于 Lion 内核，它需要更高版本的 XCode，但我在构建 10.6.8 内核时解决 ctf* 错误的方法是使用 XCode 3.2。*

ctf* 二进制文件是在“dtrace”编译期间创建的。

只需从没有任何空格的目录中运行此脚本（例如 ~/xnu 就完美了）。最终结果应该是一个工作的 10.6.8 内核。较晚的（实际上更早的）内核都比 10.6.8 简单。

```
#!/usr/bin/env bash

# Builds 10.6.8 kernel - most other builds are easier, this one needs a little patching.
# Script assembled by sfinktah

# Invaluable source: slice - http://www.projectosx.com/forum/lofiversion/index.php/t1922.html

# Note, two (got this down to one) patches necessary to build 10.6.8 - source: http://www.insanelymac.com/forum/index.php?showtopic=261736
# This is automatically applied, but I will detail here:
# 
# You will have to do this: (Automated now, but just in case)
#    Define CPUFAMILY_INTEL_SANDYBRIDGE in ~/xnu-1504.15.3/osfmk/mach/machine.h
#       #define CPUFAMILY_INTEL_SANDYBRIDGE     0x5490b78c
#
# Skipped this step, seemed not to be needed (eventually).  Leaving notes in, just in case.
#    Add line 1 in ~/xnu-1504.15.3/makedefs/MakeInc.def:
#       export BUILD_STABS = 1
# 

# You should probaby use a local proxy, since this script makes no effort not to redownload
# existing items.  Uncomment this line accordingly.

# export http_proxy=192.168.1.6:3128

export PATH="/usr/local/bin:$PATH"

CURL="curl -O "
echo "Download the build tools source(s)" 

KEXT=kext_tools-180.2.1
BOOTSTRAP=bootstrap_cmds-79
DTRACE=dtrace-90
CXXFILT=cxxfilt-9
KERNEL=xnu-1504.15.3
CCTOOLS=cctools-806
# DYLD=dyld-132.13
# LD64=ld64-95.2.12

$CURL http://www.opensource.apple.com/tarballs/cxxfilt/$CXXFILT.tar.gz \
&& $CURL http://www.opensource.apple.com/tarballs/dtrace/$DTRACE.tar.gz \
&& $CURL http://www.opensource.apple.com/tarballs/kext_tools/$KEXT.tar.gz \
&& $CURL http://www.opensource.apple.com/tarballs/bootstrap_cmds/$BOOTSTRAP.tar.gz \
&& $CURL http://www.opensource.apple.com/tarballs/cctools/$CCTOOLS.tar.gz &&
# && # $CURL http://www.opensource.apple.com/tarballs/dyld/$DYLD.tar.gz 
# && # $CURL http://www.opensource.apple.com/tarballs/ld64/$LD64.tar.gz 

echo "Unpack the tools" \
&& 
tar zxf $CXXFILT.tar.gz \
&& tar zxf $DTRACE.tar.gz \
&& tar zxf $KEXT.tar.gz \
&& tar zxf $BOOTSTRAP.tar.gz \
&& tar zxf $CCTOOLS.tar.gz &&
# && # tar zxf $LD64.tar.gz 
# && # tar zxf $DYLD.tar.gz 

# Copy folder cctools-8xx/include/mach-o/ to /usr/include/mach-o/
sudo cp -a $CCTOOLS/include/mach-o /usr/include/ \
&& 
echo "Build cxxfilt" \
&& 
cd $CXXFILT \
&& mkdir -p obj sym dst \
&& make install RC_ARCHS="i386 x86_64" RC_CFLAGS="-arch i386 -arch x86_64 -pipe" RC_OS=macos RC_RELEASE=SnowLeopard SRCROOT=$PWD OBJROOT=$PWD/obj SYMROOT=$PWD/sym DSTROOT=$PWD/dst \
&& sudo ditto $PWD/dst/usr/local /usr/local \
&& cd .. \
&& 
echo "Build dtrace" \
&& 
cd $DTRACE \
&& mkdir -p obj sym dst \
&& xcodebuild install -target ctfconvert -target ctfdump -target ctfmerge ARCHS="i386 x86_64" SRCROOT=$PWD OBJROOT=$PWD/obj SYMROOT=$PWD/sym DSTROOT=$PWD/dst \
&& sudo ditto $PWD/dst/usr/local /usr/local \
&& cd .. \
&& 
echo "Build kext_tools" \
&& 
cd $KEXT \
&& mkdir -p obj sym dst \
&& xcodebuild install -target kextsymboltool -target setsegname ARCHS="i386 x86_64" SRCROOT=$PWD OBJROOT=$PWD/obj SYMROOT=$PWD/sym DSTROOT=$PWD/dst \
&& sudo ditto $PWD/dst/usr/local /usr/local \
&& cd .. \
&& 
echo "Build bootstrap_cmds" \
&& 
cd $BOOTSTRAP \
&& mkdir -p obj sym dst \
&& make install RC_ARCHS="i386" RC_CFLAGS="-arch i386 -pipe" RC_OS=macos RC_RELEASE=SnowLeopard SRCROOT=$PWD OBJROOT=$PWD/obj SYMROOT=$PWD/sym DSTROOT=$PWD/dst \
&& sudo ditto $PWD/dst/usr/local /usr/local \
&& cd .. \
&& 
echo "Download the xnu source" \
&& 
$CURL http://www.opensource.apple.com/tarballs/xnu/$KERNEL.tar.gz \
&& 
echo "Unpack xnu" \
&& 
tar zxf $KERNEL.tar.gz \
&& 
echo "Build xnu" \
&& 
cd $KERNEL \
&& sed -i -e '1s/.*/#define CPUFAMILY_INTEL_SANDYBRIDGE 0x5490b78c \/*/' osfmk/mach/machine.h \
&& make ARCH_CONFIGS="I386 X86_64" KERNEL_CONFIGS="RELEASE" \
&& file BUILD/obj/RELEASE_*/mach_kernel &&
# && # Removing AppleProfileFamily.kext - http://lists.apple.com/archives/darwin-kernel/2009/Dec/msg00000.html
echo "Complete.  Remember to remove /System/Library/Extensions/AppleProfileFamily.kext from target." \
|| echo "Failed"

# vim: set ts=180 sts=0 sw=3 noet: 
```

# java - Spring MVC Hello World 应用程序不工作

> ID：11915715
> 
> 赞同：1
> 
> 时间：2012-08-11T14:55:50.123
> 
> 标签：java, spring, jakarta-ee, spring-mvc

我是 Spring MVC 的新手，我正在尝试编写一个简单的 Web 应用程序来开始使用 Spring。

这是我所拥有的：

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?> 
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns="http://java.sun.com/xml/ns/javaee" 
    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
    id="WebApp_ID" version="2.5"> 
    <display-name>HatifimWeb</display-name> 
    <welcome-file-list> 
        <welcome-file>index.jsp</welcome-file> 
    </welcome-file-list> 
    <servlet> 
        <servlet-name>main</servlet-name> 
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class> 
        <load-on-startup>1</load-on-startup> 
    </servlet> 
    <servlet-mapping> 
        <servlet-name>main</servlet-name> 
        <url-pattern>/</url-pattern> 
    </servlet-mapping> 
</web-app> 
```

主servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?> 
<beans xmlns="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p" 
    xmlns:context="http://www.springframework.org/schema/context" 
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
http://www.springframework.org/schema/context 
http://www.springframework.org/schema/context/spring-context-3.0.xsd"> 
    <context:component-scan base-package="springapp.controller" /> 
    <bean id="viewResolver" 
        class="org.springframework.web.servlet.view.InternalResourceViewResolver"> 
        <property name="viewClass" 
            value="org.springframework.web.servlet.view.JstlView" /> 
        <property name="prefix" value="/WEB-INF/jsps/" /> 
        <property name="suffix" value=".jsp" /> 
    </bean> 
</beans> 
```

登录控制器.java

```
package springapp.controller; 

import org.springframework.stereotype.Controller; 
import org.springframework.web.bind.annotation.RequestMapping; 
import org.springframework.web.servlet.ModelAndView; 

@Controller 
public class LoginController { 

    @RequestMapping("/Login") 
    public ModelAndView handleRequest() throws Exception { 
        System.out.println("Login..."); 

        return new ModelAndView("Login", "message", "test"); 
    } 

} 
```

索引.jsp

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1" 
    pageEncoding="ISO-8859-1"%> 
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
<html> 
<head> 
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"> 
<title>Insert title here</title> 
</head> 
<body> 
    Hello. 
    <br /> 
    <a href="Login">login</a> 
</body> 
</html> 
```

登录.jsp

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" 
    pageEncoding="ISO-8859-1"%> 
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
<html> 
<head> 
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"> 
<title>poopidipoo</title> 
</head> 
<body> 
    ${message} 
</body> 
</html> 
```

index.jsp 启动良好，但是当我单击导航到登录页面时，我得到 404。我正在使用 Tomcat 7。而且我没有想法，看起来 DispatcherServlet 由于某种原因没有被调用。

可能是什么问题呢？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T15:05:10.600

问题可能是您缺少页面中的上下文路径，请尝试以下方式：

```
<a href="${pageContext.request.contextPath}/Login">login</a> 
```

**更新：**

能否请您也添加 `<mvc:annotation-driven/>`到您的`main-servlet.xml`

# javascript - 了解如何使用 jQuery 插件 RhinoSlider

> ID：11915718
> 
> 赞同：1
> 
> 时间：2012-08-11T14:56:36.960
> 
> 标签：javascript, jquery, jquery-plugins

我正在尝试`RhinoSlider`从[http://rhinoslider.com/](http://rhinoslider.com/)使用，但文档在告诉您如何使用它方面非常差。它向您展示了如何*调用*它，而不是如何为它构建内容。

在下载的演示中，它使用了这个..

```
 <div id="page">
        <ul id="slider">
            <li><img src="img/slider/01.jpg" alt="" /></li>
            <li><img src="img/slider/02.jpg" alt="" /></li>
            <li><img src="img/slider/03.jpg" alt="" /></li>
            <li><img src="img/slider/04.jpg" alt="" /></li>
            <li><img src="img/slider/05.jpg" alt="" /></li>
        </ul>
    </div> 
```

这并没有告诉我太多，我必须使用类似的格式吗？`page`ID有什么特别的吗？我必须使用列表吗？

我的代码如下..

```
<div id="slide1" class="slide">
    // Lots of content
</div>
<!-- Slide 1 Ends -->
<div id="slide2" class="slide">
    // Lots of content
</div>
<!-- Slide 2 Ends --> 
```

每张幻灯片（幻灯片 1、2 等）都有一个背景图像作为主图像；那么它里面的内容就是带有文本和/或其他图像的div。

如何让它与我的内容一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T18:11:18.170

您可以使用任何您想要的标记。唯一的限制是，您必须有一个父（包装）元素。

所以你可以使用这个：

```
<div id="slider">
    <div>slide 1</div>
    <div>slide 2</div>
</div> 
```

或者更语义化的版本：

```
<ul id="slider">
    <li>slide 1</li>
    <li>slide 2</li>
</ul> 
```

# javascript - 身份验证后如何关闭 Facebook 弹出窗口？

> ID：11915720
> 
> 赞同：0
> 
> 时间：2012-08-11T14:57:09.533
> 
> 标签：javascript, ruby-on-rails, ruby, facebook

我有一个带有`ominiauth-facebook`gem 的 Rails 3.2.7 应用程序，并且我已经在对用户进行身份验证，但是当回调被激活时，也就是当用户被发送回我的网络应用程序时，我试图以这种方式关闭弹出窗口：

```
if (window.opener !== null) {
  window.opener.location = "/";
  window.opener.close();
} 
```

我试过了

```
if (window.opener !== null) {
  window.opener.location = "/";
  window.close();
} 
```

两人的表现都不好。他们的问题是，例如，如果我通过 Gmail 向您发送指向我的应用程序的链接，则在我的应用程序在另一个窗口/选项卡中打开后，您的 Gmail 窗口将关闭。

我真的很想在我的应用程序中进行“弹出式”身份验证，我很确定这是可能的，因为我在其他网站上看到过。

所以我想要一个不会惹恼用户关闭他的开启器窗口的解决方案，并且还想在身份验证完成后关闭 FB 弹出窗口。

我很感激你能给我的任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:08:00.607

只需使用`FB.login`JS SDK，它就会为您处理一切。

[https://developers.facebook.com/docs/reference/javascript/FB.login/](https://developers.facebook.com/docs/reference/javascript/FB.login/)

# c - 编写Linux内核模块时获取用户进程pid

> ID：11915728
> 
> 赞同：17
> 
> 时间：2012-08-11T14:58:58.063
> 
> 标签：c, linux, kernel-module

如何获取触发我的内核模块`file_operation.read`例程的用户进程的 PID（即，哪个进程正在读取`/dev/mydev`）？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-11T15:01:10.180

当您的读取函数正在执行时，它是在发出系统调用的进程的上下文中执行的。因此，您应该能够使用`current`，即`current->pid`。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-21T07:22:18.710

这些天来，我们在 sched.h 中定义了一些辅助函数。在 pid 的情况下，您可以使用：

```
pid = task_pid_nr(current); 
```

获取当前任务的 pid。

这是从[`include/linux/sched.h`](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/include/linux/sched.h?id=v3.8#n1683)v3.8 开始的评论。

> 从各种命名空间中看到任务的不同 pid 的助手
> 
> *   task_xid_nr() ：全局id，即从init命名空间看到的id；
> *   task_xid_vnr() ：虚拟id，即从当前的pid命名空间看到的id。
> *   task_xid_nr_ns() ：从指定的ns看到的id；
> *   set_task_vxid() ：为任务分配一个虚拟ID；
> 
> 另请参阅 include/linux/pid.h 中的 pid_nr() 等

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-25T23:33:58.590

在内核 2.6.39 arm build 上，如果`current->pid`不起作用，则可以通过以下方式完成：

```
 pid_nr(get_task_pid(current, PIDTYPE_PID)) 
```

`PIDTYPE_PID`可以用或`PIDTYPE_PGID`代替`PIDTYPE_SID`。`include/linux/pid.h`正如 Yasushi 指出的那样，标题来源位于。

哪种方法有效取决于代码使用的头文件。

# facebook - 页面选项卡内的 oauth facebook 重新加载

> ID：11915730
> 
> 赞同：0
> 
> 时间：2012-08-11T14:59:09.747
> 
> 标签：facebook, oauth, reload

我在 facebook 上有一个应用程序，我只使用页面标签，一切都很好。我点击喜欢，我允许应用程序，请求权限，我允许，但现在它回到页面并且出现错误，它一遍又一遍地重新加载......页面无法加载，因为浏览器总是重新加载它，我不知道如何解决它...

非常感谢

这是我的代码：

```
<?php

require_once "sdk/facebook.php";

$app_id = "MY_APPID";
$app_secret = "MY_SECRET";

$is_fan = false;

// Init facebook api.
$facebook = new Facebook(array(
    'appId' => $app_id,
    'secret' => $app_secret,
    'cookie' => true
));

// Get and decode signed request.
$signed_request = $facebook->getSignedRequest();
if (isset($_REQUEST['signed_request'])) {
    $encoded_sig = null;
    $payload = null;
    list($encoded_sig, $payload) = explode(
        '.', $_REQUEST['signed_request'], 2
    );
    $sig = base64_decode(strtr($encoded_sig, '-_', '+/'));
    $data = json_decode(
        base64_decode(strtr($payload, '-_', '+/'), true)
    );
    $signed_request = $data;
}
else {
    $signed_request = false;
}

// Determine if we have a fan request.
if($signed_request) {
    if($signed_request->page->liked) {
        $is_fan = true;
    }
}

// for fans
if ($is_fan) { ?>

    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link href="css/style.css" rel="stylesheet" type="text/css" />       

    <script>
      var oauth_url = 'https://www.facebook.com/dialog/oauth/';
      oauth_url += '?client_id=414328901957674';
      oauth_url += '&redirect_uri=' + encodeURIComponent('https://www.facebook.com/pages/null/167838393340757/?sk=app_414328901957674');
      oauth_url += '&scope=user_birthday,user_likes,photo_upload,publish_stream,user_about_me,user_photos,user_hometown,user_location'

      window.top.location = oauth_url;
    </script>

    </head>
    <body background="images/fanda.jpg" style="overflow:hidden;"">
      </body>

<?php }

// for non-fans
else { ?>

    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link href="css/style.css" rel="stylesheet" type="text/css" />       
    </head>
     <body background="images/klikni-like.jpg" style="overflow:hidden;">
     </body>

<?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T22:18:40.127

我找到了解决您问题的方法。当你检查 if($is_fan) 时更新这个：

```
$user_id = $facebook->getUser();
if ($is_fan) {  
      if($user_id)
          {
               code after authentication and page Liked
          }

             }
else  {
          <script>
              var oauth_url = 'https://www.facebook.com/dialog/oauth/';
              ................ Next 4 lines same as the above code ..............
          </script>
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T18:23:07.807

当某人是粉丝时，您的脚本*总是*在做：

```
window.top.location = oauth_url; 
```

如果某人是粉丝，这将导致页面无限重新加载。

# javascript - 使用 Javascript 更新日期

> ID：11915731
> 
> 赞同：2
> 
> 时间：2012-08-11T14:59:16.340
> 
> 标签：javascript, html, javascript-events

我目前正在尝试通过 Javascript 自动更新日期。下面的代码是一个数字每次增加 1 的示例，但我还需要通过每次增加一个月来更新下一列中的日期。

```
function repeater_update_order( repeater )
{
    repeater.find('> table > tbody > tr.row').each(function(i){
        $(this).children('td.order').html(i+1);
    });

}; 
```

我知道您可以使用以下 Javascript 更新日期：

```
var x = 1; //or whatever offset
var CurrentDate = new Date();
CurrentDate.setMonth(CurrentDate.getMonth()+X); 
```

如何使用第二个代码更新字段中的日期？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T18:54:56.903

在您的 HTML 中，表格日期值是我们将其解释为日期的字符串。您需要将该字符串解析为 JS Date 对象，添加一个月并重新转换为原始字符串格式。

如果，正如你所说，日期总是在一个月的第一天，那么你可以通过在一个函数中解析和转换来缩短这个过程：

```
 function nextMonth (d) {
    d = d.match (/^(.*)(\d\d)/(\d\d)/(d\d\d\d)(.*)$/
    return d ? d[0] + d[1] + '/' + (d[2] < 11 ? +d[2] + 1 : 1) + '/' + (d[2] >= 11 ? 1 + +d[3] : d[3]) + d[4];
  } 
```

这假定数据始终以 dd/mm/yyyy 格式存储在字符串中。如果格式不同，则需要进行相应调整。

如果您的格式复杂或不一致，那么您可以考虑使用日期库，例如 Datejs。

# algorithm - 最短的两条不相交的路径；两个来源和两个目的地

> ID：11915742
> 
> 赞同：5
> 
> 时间：2012-08-11T15:00:06.070
> 
> 标签：algorithm, math, optimization, graph-theory

我们得到一个未加权的无向图***G = (V, E)***其中**|V| <= 40,000**和**|E| <= 10 ⁶**。我们还得到了四个顶点**a, b, a', b'**。有没有办法找到两个节点不相交的路径**a -> a'**和**b -> b'**使得它们的长度之和最小？
我的第一个想法是先找到最短路径**a -> a'**，将其从图中删除，然后找到最短路径**b -> b'**。我认为这种贪婪的方法行不通。

**注意：**在整个应用程序中，**a**和**b**是固定的，而**a'**和**b'**在每次查询时都会发生变化，因此使用预计算以提供高效查询的解决方案将是更可取的。另请注意，只需要最小长度总和，而不是实际路径。

任何帮助、想法或建议将不胜感激。提前非常感谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-11T17:46:41.247

这可以简化为最短边不相交路径问题：

1.  （可选）将图中的所有链折叠成单个边。这会产生一个较小的加权图（如果原始图中有任何链）。
2.  通过将每条边替换为一对有向边，将无向图转换为有向图。
3.  将每个节点分成一对节点：一个只有原始节点的传入边，另一个只有其传出边。用一条有向边连接每对节点。（例如，下图中的节点**c**应该拆分为**c1**和**c2**；现在原始图中包含节点**c**的每条路径都应该经过转换图中的边**c1** -> **c2**；这里**x**和**y**代表所有节点除节点**c**外的图形）。

![在此处输入图像描述](../Images/3153203f6602bbbdb11a5b2cd94a41dc.png) ![在此处输入图像描述](../Images/60b25fa340090a359b2198782a4e5cfc.png) ![在此处输入图像描述](../Images/33b239b1c3c396dc78a10333e8919817.png)

现在，如果**a** = **b**或**a'** = **b'**，您将得到与上一个问题完全相同的[问题](https://stackoverflow.com/q/11880738/1009831)（这是[最小成本流量问题](http://en.wikipedia.org/wiki/Minimum-cost_flow_problem)，可以通过将每条边的流量分配为 1 来解决，然后搜索 a a 和 b 之间的最小成本流，流 = 2)。如果**a** != **b**，您只需创建一个公共源节点并将**a**和**b**连接到它。如果**a'** != **b'**，对公共目标节点执行相同操作。

但是如果**a** != **b**和**a'** != **b'**，最小成本流问题不适用。相反，这个问题可以作为[多商品流动问题](http://en.wikipedia.org/wiki/Multi-commodity_flow_problem)来解决。

* * *

我之前的（不正确的）解决方案是将 ( **a** , **b** ) 和 ( **a'** , **b'** ) 对连接到公共源/目标节点，然后找到最小成本流。下图是这种方法的反例：

![在此处输入图像描述](../Images/b213a129b51a80a9d9728898fe30cc6b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T18:11:02.153

这个怎么样？从 a1 -> a2 执行 BFS（广度优先搜索）遍历并删除路径并计算 BFS b1 -> b2。现在重置图形并首先对 b1->b2 执行相同操作，然后删除路径，然后删除 a1->a2。无论总和是最小的都是答案。

# html - 具有不相等图像的翻转效果

> ID：11915743
> 
> 赞同：0
> 
> 时间：2012-08-11T15:00:14.650
> 
> 标签：html, css

在我的网站上，我试图让翻转效果发挥作用。
目前，在 上`no mouse hover`，该`ul li`项目显示为文本，但在 上`mouse hover`，它具有显示图像的翻转效果。

我不想让文本处于正常的鼠标非悬停状态，而是想要图像。
这意味着，鼠标悬停和非鼠标悬停都是不同的图像，与
我目前所拥有的相比，我没有想问我如何获得这种翻转效果的文字。（非鼠标悬停是我也想更改为图像的文本）

这是我目前如何翻车的 jsfiddle：http: [//jsfiddle.net/PF35v/7/](http://jsfiddle.net/PF35v/7/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T15:53:33.800

这是两种不同的方法，我相信还有其他方法：

**以 HTML 为中心**

```
<ul id="nav">
    <li>
        <a href="#">
            <span>My Text</span>
            <img src="http://goo.gl/tYsDU"/>
            <img class="hover" src="http://goo.gl/UohAz"/>
        </a>
    </li>
    ...
</ul>

#nav,
#nav li {
    list-style-type: none;
    margin: 0;
    padding: 0;
}
#nav li a img {
    display: inline;
}
#nav li a img.hover,
#nav li a span {
    display: none;
}
#nav li a:hover img {
    display: none;
}
#nav li a:hover img.hover {
    display: inline;
} 
```

[http://jsfiddle.net/RdRcj/1](http://jsfiddle.net/RdRcj/1)

**以 CSS 为中心**

```
<ul id="nav">
    <li>
        <a href="#" alt="My Text"></a>
    </li>
    ...
</ul>

#nav,
#nav li {
    list-style-type: none;
    margin: 0;
    padding: 0;
}
#nav li {
    width: 128px;
    height: 128px;
    background-image: url(http://goo.gl/tYsDU);
}
#nav li a {
    display: block;
    width: 128px;
    height: 128px;
    padding: 0;
}
#nav li a:hover {
    background-image: url(http://goo.gl/UohAz);
} 
```

[http://jsfiddle.net/RdRcj/](http://jsfiddle.net/RdRcj/)

从灵活性的角度来看，第一个可能是“最好的”；您不必像第二个那样硬烘烤尺寸。但是，如果它们不变，也许第二种方法更适合您的方法，它只需要针对每个具体目标`li`，`a`这可能有点脆弱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T15:31:17.640

您默认隐藏所有图像，因此当您将图像放入`a`标签内时，它也会被隐藏。

```
ul#nav li a img { display: block; } 
```

这将使链接中的图像始终可见，但其他默认隐藏。我想这就是你所要求的。

# c++ - WriteFile 没有做任何事情

> ID：11915745
> 
> 赞同：0
> 
> 时间：2012-08-11T15:00:53.883
> 
> 标签：c++, file-io, arraylist

嘿，我的 write 和 readFile 方法有问题。这些方法不做任何事情。该方法应该将动态数组的元素写入名为 C++ 的文件中。然后对于读取的文件，该方法应该是读取ArrayList的元素。

这是我的代码：方法

```
//---------------------------------------------------------------------------------------
//  Name:         Array::WriteFile
//  Description:  Writes an array to disk
//  Arguments:    The Filename
//  Return Value: true on success, false on failure
//---------------------------------------------------------------------------------------
   void writeFile(string file)//saves the array elements into a text file
    {
        //sort();
        ofstream outfile(file);//allows you to write to the document passed in
        for(int i = 0; i < m_size; i++)//loops through the array
        {
            outfile << m_array[i] << endl;//saves each element into a single line in the text document
        }
        outfile.close();
    }

//---------------------------------------------------------------------------------------
//  Name:         ReadFile.
//  Description:  Reads an array from disk.
//  Arguments:    The Filename.
//  Return Value: True on success, false on failure.
//---------------------------------------------------------------------------------------
   void readFile(string file)
    {
        ifstream inFile(file);//reads the file
        string line;//creates a string to take in information from the text deocument
        int numLines=0;//number of lines read in text document so far

        while(getline(inFile, line))//loops through the text document counting how many lines are in it.
        {
            numLines++;//increments every time a line is read
        }
        Datatype object;//creates a variable of type DataType to hold whatever is in the text document be it int, float, string etc...
        inFile.clear() ;//these two lines reset the inFile and go back to the start allowing to read through it again
        inFile.seekg(0, ios::beg) ;
        for(int i = 0; i < numLines; i++)//loops for whatever the number of lines there is in the document.
        {
            inFile >> object;//pushes the line into the document into object
            push(object);//calls the push function that will push object into the array in the right order
        }
        inFile.close();

    } 
```

如果需要其他任何东西，请询问，我会发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T21:53:06.627

这个问题是目录权限。因为它只被读取而不被写入，所以文件从未被写入。

# jsp - 如何在 XQuery 中使用 Document 对象，而不是为 doc() 方法提供完整的 xml 文件路径

> ID：11915748
> 
> 赞同：2
> 
> 时间：2012-08-11T15:01:06.487
> 
> 标签：jsp, xquery

我是 XQuery 的新手。我可以使用以下查询从 XML 文件中选择数据：

```
for $contactscontent in doc('/opt//contact.xml')//Contacts/Contact
return $contactscontent/FirstName 
```

这里的问题是我想读取数据而不给出方法的`contact.xml`路径`doc()`。我的 Jsp 中有 Document 对象，如下所示：

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db = dbf.newDocumentBuilder();
Document doc = db.parse(new File("/opt//contact.xml")); 
```

通过使用上面的“doc”对象，我想从 XML 文件中读取数据。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:29:27.843

撒克逊人的例子（虽然使用 XQJ）在[https://stackoverflow.com/a/3112517/271577](https://stackoverflow.com/a/3112517/271577)。看来它会让你`doc(...)`完全摆脱。

# jquery - 如何将错误类添加到具有多个输入（不仅仅是 1）的 twitter 引导控制组

> ID：11915752
> 
> 赞同：1
> 
> 时间：2012-08-11T15:01:39.677
> 
> 标签：jquery, jquery-plugins, twitter-bootstrap, jquery-validate

我有一个表单，我正在尝试使用 jquery.validate.js 上的插件 validate 进行验证。

您可以在以下位置看到它，您可以在以下位置看到实时页面：

[http://optionhomes.net/index.php/test1/index](http://optionhomes.net/index.php/test1/index)

表单是从数据库加载的。如果发生验证错误，我希望表单将引导错误类添加到类“控制组”中。根据我对引导文档的理解，就是这样做的。

我有这样的HTML：

```
<div class="form_row" >

<div class="control-group">
        <label class="control-label" for="input01">city</label>
          <div class="controls">
            <input type="text" class="input-xlarge span3" id="city" name="city" value="<?php echo $this->property->city ?>"  rel="popover" data-content="Re-enter your city." data-original-title="city" >
            <input type="text" class="input-xlarge span3" id="state" name="state" value="<?php echo $this->property->state ?>"  rel="popover" data-content="Re-enter your state." data-original-title="state" >
            <input type="number" class="input-xlarge span2" id="zip" name="zip" value="<?php echo $this->property->zip ?>"  rel="popover" data-content="Re-enter your zip code." data-original-title="zip" >

          </div>
    </div>

</div> 
```

jQuery代码是：

```
 errorClass: "error",
                errorElement: "span",
                highlight:function(element, errorClass, validClass) {
                    $(element).parents('.control-group').addClass('error');
                },
                unhighlight: function(element, errorClass, validClass) {
                    $(element).parents('.control-group').removeClass('error');
                    $(element).parents('.control-group').addClass('success');

                } 
```

我想要做的是将错误类（给出红色框）添加到验证失败的输入元素中。使用我当前的代码 '.succes 的类正在添加，将这些元素变为绿色，即使它们需要更正。

据我了解，问题在于，如果 jquery 扫描的最后一个输入通过验证，则添加了多个输入“.sucess 类”（绿色轮廓）。如果 3 个输入中只有 1 个输入未通过验证，我希望控制组分配红色 .error 类，无论顺序如何

谢谢，

账单

# javascript - 使用临时 gif 图像预加载背景图像

> ID：11915760
> 
> 赞同：5
> 
> 时间：2012-08-11T15:02:44.533
> 
> 标签：javascript

我有几个带有背景图像的 div。我想知道如何使用 gif 图像预加载这些背景图像，因为一些背景图像非常大。执行以下操作不起作用：

HTML：

```
<div id="glykopeels" onload="loadImage()">Glykopeels Content</div>
<div id="facials" onload="loadImage2()">Facials Content</div> 
```

CSS：

```
#glykopeels{
        background: #ebebeb url(http://lamininbeauty.co.za/images/products/preloader.gif) no-repeat top right;
        background-size: contain;
    }
#facials{
    background: #ebebeb url(http://lamininbeauty.co.za/images/products/preloader.gif) no-repeat top right;
    background-size: contain;
    } 
```

JS：

```
function loadImage(){
        document.getElementById('glykopeels').style.background = '#ebebeb url(http://lamininbeauty.co.za/images/products/glykopeel.jpg);';
    }
function loadImage2(){
        document.getElementById('facials').style.background = '#ebebeb url(http://lamininbeauty.co.za/images/products/facial.jpg);';
    } 
```

我猜想在 onload 函数中为该元素定义一个不同的 ID 并为该新 ID 定义 css 是另一种可能性吗？因此仅更改 onload 函数中该元素的 id？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T20:28:19.307

*首先：* div 没有 onload 属性。**编辑：**请阅读下面的评论，非常有趣！

*其次，*您应该将 url 放在引号之间（如果需要，将它们转义）：`url('http://lamininbeauty.co.za/images/products/facial.jpg')`

*第三，*没有名为 的图像`preloader.gif`，但有一个名为 的图像`loader.gif`，因此我使用该图像在底部的 jsfiddle 演示链接中为我的解决方案“修复”您的 css 部分。

在 SO 的服务器迁移期间，我为您编写了一个简单的自定义函数，它**完全**符合您的要求。
*在**IE6**和 FF12 中测试。*
要对此进行测试：请清除您的浏览器缓冲区，否则您将看不到它的实际效果（它会运行得太快），因为图像可能会在第二个视图上被缓冲（再次，非常适合您的目标）！

**JavaScript：**

```
var repBg=function(a, t){ t=t||'*';  // by GitaarLAB
        var c=document.getElementsByTagName(t), i=c.length, r=[];
        while(i--){if (c[i].getAttribute(a)){r.push(c[i]);}} c=r; i=c.length;
        repBg.exec=function(){
            c[this['data-i']].style.background="#ebebeb url('"+this.src+"') no-repeat top right";
        };
        while(i--){ if (c[i].getAttribute(a)) {
            r=new Image();
            r.onload=repBg.exec;
            r['data-i']=i;
            r.src=c[i].getAttribute(a);
        }}  
};

// one could run repBg onload, but better to run it when the image has actually loaded, see html!
// window.onload=function(){  repBg('data-bg_img','div');  }; 
```

**在您的 BODY 中：**将属性“data-bg_img”（根据 html5 约定，以 data- 开头）添加到您要使用此技术的元素中，并使其包含您的背景 url，如下所示：

```
<div id="glykopeels" data-bg_img="http://lamininbeauty.co.za/images/products/glykopeel.jpg">Glykopeels Content</div> 
```

**身体中的“可选”初始化：**

```
<!--
trigger the replace background function when the loader image has actually loaded!
rewriting the onload with nothing to prevent infinite loop in IE6 (and greater?) !!
-->
<img src="http://lamininbeauty.co.za/images/products/loader.gif" style="display:none;" onload="this.onload=null; repBg('data-bg_img','div');"> 
```

**手动/说明：**
图像确实有一个加载事件，所以我们在 html 中放置一个加载图像（在底部），这将触发它自己的加载事件，`repBg()`一旦浏览器实际下载了这个加载图像就会调用！！！

该函数`repBg()`最多需要 2 个参数：

*   包含应选择的属性的第一个强制字符串，
*   第二个可选参数可以定义标记名（以限制第一个参数）。

当被调用时，函数`repBg()`将在主体中搜索符合第二个参数的 elementTagNames，或者`*`然后使用第一个参数过滤它们。
对于保留在过滤后的 htmlObjectCollection 中的每个 htmlObject，将创建一个新图像（不附加到正文），其中 htmlObject 的属性值 (url) 对应于函数的第一个参数作为图像源，以及 htmlObjectCollection 的引用 id (attribute `data-id`） 以供参考。
一旦这些图像加载，它们就会触发它们的 onload 事件：调用`repBg`的`exec`方法，用新加载的（大）背景图像（以及你的 css 的其余部分）替换引用的 htmlObject 的背景。为了进一步模块化，您可以扩展该功能。

最后，**请注意：**背景图像按照它们出现在源代码中的顺序加载，也就是您期望的工作方式！

你可以在这个小提琴中看到它的作用[：http://jsfiddle.net/epdDa/](http://jsfiddle.net/epdDa/)

* * *

**更新版本 2：优雅的回退！和复制粘贴 NOBRAIN 解决方案**
我的第一个解决方案没有提供优雅的回退，这让我很生气。所以我做了一个不同的解决方案来提供优雅的回退。**在IE6**
和 FF12 中也经过全面测试它的工作原理如下： 在您的 BODY 中：简单地将您的 div 的类设置为“预加载”并将其样式属性设置为它应该正常加载的背景图像。像这样：

 **```
<div id="facials" class="preload" style="background: #ebebeb url('http://lamininbeauty.co.za/images/products/facial.jpg') no-repeat top right;">Facials Content</div> 
```

那很容易吧？
然后将以下脚本放在 HTML 的 HEAD（这很重要）中：

```
// getElementsByClass original by dustin diaz, modified by GitaarLAB
document.getElementsByClassName=document.getElementsByClassName||function(searchClass,node,tag) {
    var classElements = [], i=0, j=0;
    if (!node){node = document;}
    if (!tag){tag = '*';}
    var els = node.getElementsByTagName(tag);
    var elsLen = els.length;
    var pattern = new RegExp('(^|\\\\s)'+searchClass+'(\\\\s|$)');
    for (; i < elsLen; i++) {
        if ( pattern.test(els[i].className) ) {
            classElements[j] = els[i]; j++;}
    } return classElements;
};

var repBg=(function(n,u,p,a,i,r){ // by GitaarLAB
    window.onload=function(){repBg(1);};
    i=new Image(); i.onload=function(){this.onload=null; repBg(2);};
    document.write("<style>."+n+"{background:"+p+" url("+u+") "+a+
        " !important; background-size: contain !important;}"+
        "</style>");
    i.src=u; r=0;
    return function(t){
        r=r+t; if(r>2){
            var c=document.getElementsByClassName(n), i=0, l=c.length, s;
            repBg.exec=function(){
                document.getElementById(this['data-id']).className='';
            };
            for(;i<l;i++){
                r=new Image();
                r.onload=repBg.exec;
                r['data-id']=c[i].getAttribute('id');
                s=c[i].getAttribute('style');
                try { // sane browsers
                    r.src=s.match(/url\('?([^'"]*)'?\)/i)[1];
                } catch(e) { // <IE8
                    r.src=s.cssText.match(/url\('?([^'"]*)'?\)/i)[1];
                }
            }
        }
    };
})('preload','http://lamininbeauty.co.za/images/products/loader.gif','#ebebeb','no-repeat top right'); 
```

**说明：**
我花了一整夜……但我找到了办法。
如果启用了 javascript，函数 repBg 将首先向文档头部写入一个额外的样式块（它所在的位置，注意将其放在最后一个 css 脚本之后），为所有元素设置 loader-background-image类“预加载”（从而在页面加载时显示加载图像）。
如果加载了加载图像的加载测试图像并且加载了窗口（以获取正文中的所有元素），那么它与版本 1 基本相同。只是这次我们从元素的样式属性和 onload 随后清空元素的样式属性。

由于此函数会自动执行并用类似于版本 1 的版本（如上）覆盖自身，因此您可以简单地在函数“repBg”的最后一行调整参数。
请注意：在初始状态`repBg`下，最多接受 4 个参数：className、Url、cssPrepend 和 cssAppend。

要查看它的实际效果（不要忘记按照说明清理浏览器缓冲区），
请单击[此小提琴：http://jsfiddle.net/epdDa/1/](http://jsfiddle.net/epdDa/1/)

谁使用此功能，如果您感谢我，我将不胜感激！

* * *

**更新：**
评论的额外解释和答案。

**两个版本之间的主要区别 从**
技术上讲，两个版本使用几乎相同的技术，因此没有真正的区别。

*   对于版本 1，javascript 是使页面工作*所需*的粘合剂，但可以在有效的真正 xhtml 和纯 html 中工作。
    但是，关闭 javascript 的人将获得一个无法正常工作的*站点*（仅显示加载 gif）。请注意，所有其他*当前*答案，包括您要去的方向，都会遇到这个问题！
*   在版本 2 中，javascript 只是增强页面交互（网站应编码的方式）的香料，但仅适用于 html（或无效的 xhtml）。
    但是，这应该确保关闭 javascript 的人仍然可以看到正常运行的页面。IE: 不需要 javascript*来*正确显示网站。这个概念被称为“优雅的后备”或“优雅地降级”。我对版本 2 投了第 1 票。
    **额外奖励：**这条路径为您提供了普通的验证和语义 html，因为您使用了古老的可信赖的内联样式、id 和类。我对第 2 版的第 2 票

**为什么我选择使用 in-line css？为什么“必须”使用内联 CSS 才能正常工作？**
首先，我花了*几个小时*来避免使用内联 CSS。（我没有松开它们，我学到了不起作用的方法，但同样有用）。接下来，我想再次指出，所有当前的答案，包括你要去的方向，实际的背景图像 url 与 css 分开，而在 css 中，你分别在每个 div 上设置加载器图像，一个类会更有意义。版本 2 仅使用可配置的类名。

[在文档的 HEAD 中读取](https://stackoverflow.com/questions/3922139/add-css-to-head-with-javascript)和[写入](https://stackoverflow.com/questions/324486/how-do-you-read-css-rule-values-with-javascript)css 块都是一团糟。
我是否提到了链接的外部 css 文件..？？

在我看来，所有这些都需要大量额外的代码和 cpu 周期，并在每次页面加载时阻止/停止浏览器，以便核心原则起作用：最后一个有效的 css 规则适用。因此加载图像会尽快显示，因为它是页面加载时指定的背景图像，这正是人们想要从这样的功能中获得的。如果元素不再是“预加载”类的一部分？对：它的内联 css 生效，以浏览器可以渲染的速度更新（如果图像已经加载）。好的。

因此，如果您通过简单地使用来牺牲（真正的）xhtml 支持`document.write`，那么目前仍然证明这种方式是“最好的”方式（正如您可以在前面的 2 个链接中阅读的那样）。并且它仍然可以与外部链接的 css 一起使用。我对第 2 版的第三次（KISS-）投票。

我对版本 2 的第四次投票是因为：该`repBg`函数已准备好将其`exec`方法（=函数）“升级”，因此您只能从类的 valuelist 中取出“preload”值。一个简单的 replace() 就足够了（目前为了速度而忽略了）。

我对版本 2 的第五次也是最后一次投票是，由于它是优雅的后备设置，因此修复或阻止某些浏览器使用额外的“香料”也相对容易。

最后，至于速度：我认为版本 2 总是会感觉更快捷：onload-image 的显示速度几乎与浏览器获取它的速度一样快（好像这个额外的 css 总是在那里一样），加载动画加载速度很快，因为：它们的加载已经在头部启动，浏览器在函数调用之前不会下载被否决的图像。此外，它们看起来互动而不会分心。但是..当实际的背景图像被加载并且css更新时：bam！图像在那里，没有从上到下的扫描“效果”。这种效果感觉该死的快。实际上，我确信并将对相册中的图像进行改编，以适应快速感觉和增加感知的初始页面加载。请注意，这是我的观点。你的里程可能会有所不同哈哈。

祝你好运！！（如果你喜欢/使用这个想法/功能，请投票，谢谢！！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T15:41:51.207

1)`div`元素没有`load`事件，该事件仅适用于正文、图像和脚本标签。编辑：就像@icktoofay 指出的那样，在 HTML 规范中`onload`，所有元素都存在，但是主要浏览器不支持这一点（目前）。

2) 将此脚本标记**放在 html 页面的末尾**：

```
<script>
    function loadImages() {
        var glykopeels = document.getElementById('glykopeels');
        var facials = document.getElementById('facials');

         glykopeels.style.backgroundImage = 'url(http://lamininbeauty.co.za/images/products/glykopeel.jpg)';
         facials.style.backgroundImage = 'url(http://lamininbeauty.co.za/images/products/facial.jpg)'; 
```

​​​

3）你可以`style.background`像你做的那样设置，但不要把`;`字符串放在末尾，否则不起作用。

小提琴：http: [//jsfiddle.net/pjyH9/](http://jsfiddle.net/pjyH9/)

**编辑**

似乎加载器图像没有显示，因为一旦浏览器接收到新图像的第一个字节，它就会从背景中删除 loader.gif。让我们采取另一种方法。这是一个将图像加载到缓存的函数，然后 - 当加载图像时 - 将图像设置为具有指定 id 的元素的背景。

```
function loadImageToBackground(elementId, imageUri) {
    var img = new Image();
    img.onload = function() {
       document.getElementById(elementId).style.backgroundImage = "url('" + imageUri +   "')";
    };
    img.src = imageUri;   
} 
```

你想要加载器的元素：

```
// past the element id and the image url to the function
loadImageToBackground('glykopeels', ​'http://image....'); 
```

我很确定这会奏效。该功能`loadImageToBackground`完成基本工作，您可以根据需要扩展和添加更多功能。

这是一个工作示例： http: [//jsfiddle.net/pjyH9/19/](http://jsfiddle.net/pjyH9/19/) （它加载了 2 个图像，每个图像 1.5mb，因此您可以看到加载器的运行情况）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T15:41:14.373

我认为您要做的是让背景图像在加载后切换到大 JPG 图像。你应该能够适应这样的东西来为你工作：

```
<html>
  <head>
    <title>Image Load Test</title>
    <script type="text/javascript">
      function loadImage(preloader, imageDiv) {
        document.getElementById(imageDiv).style.background = '#ebebeb url('+preloader.src+') no-repeat top right';
        // I think resetting the background property also resets backgroundSize.
        // If you still want it 'contained' then you need to set the property again.
        document.getElementById(imageDiv).style.backgroundSize = 'contain';
      }
    </script>
    <style type="text/css">
      #testImage {
              background: #ebebeb url(small-image.gif) no-repeat top right;
              background-size: contain;
      }
      #preloads { display: none; }
    </style>
  </head>
  <body>
    <div id="testImage">Some Content</div>
    <div id="preloads">
      <img src="full-image.jpg" onload="loadImage(this, 'testImage')">
    </div>
  </body>
</html> 
```

这里的主要区别是我将 JPG 图像预加载到`<img>`隐藏在 a`<div>`中的`display: none`属性中以使其隐藏。我不确定该`onLoad`事件对`div`s 的确切作用，但我很确定这不是您想要的。将`onLoad`事件放入`img`元素中会导致事件在图像完全加载后触发，我相信这*就是*您想要的。

***编辑：***我在 JavaScript 中添加了一行来重置`background-size`属性。如果那不是您想要的，那么请忽略该部分。**

# image - 用户上传新图像时如何删除旧图像 - symfony2

> ID：11915761
> 
> 赞同：2
> 
> 时间：2012-08-11T15:02:49.010
> 
> 标签：image, symfony, upload

我正在管理具有图像字段的实体。我遵循了生命周期回调，但我遇到了一个问题：当我编辑现有对象并更改图像时，旧图像仍保留在服务器上。我怎样才能删除它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T15:12:02.377

最简单的方法是[取消链接](http://php.net/manual/de/function.unlink.php)文件。

在上传之前获取当前文件名并删除它们。您可以在 name 或 uplload 函数的 set funktion 中执行此操作。您应该在覆盖名称的全局变量之前执行此操作。

# iphone - Xcode 在调试时失去与设备的连接

> ID：11915764
> 
> 赞同：11
> 
> 时间：2012-08-11T15:03:08.217
> 
> 标签：iphone, xcode, debugging, freeze

我的应用最近开始表现出一种奇怪的行为。当我从 Xcode 构建和运行时，应用程序会启动，直到它从动画启动屏幕过渡到我的应用程序的主屏幕。那时 Xcode 会说“在设备上运行完你的应用程序”，应用程序本身有时会继续在设备上运行，或者有时会死机。

一旦发生这种情况，Xcode 的行为就好像我的设备已断开连接，直到我物理拔出并重新插入 USB 电缆。

有人遇到过这个问题并找到了解决方案吗？

可能相关的是，我最近开始定期看到“设备无法识别此主机”错误（在[此处](https://stackoverflow.com/questions/8152739/trouble-running-instruments-on-ipad)和[此处](https://stackoverflow.com/questions/10843368/the-device-does-not-recognize-this-host-message-when-running-app-on-the-device)提到），尽管我的应用程序不使用权利。

![连接丢失的屏幕截图](../Images/2230133ad1702ca7b52154e1e5e38806.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-12T10:22:46.687

我有一个类似的问题，从这个[链接](http://answers.unity3d.com/questions/923779/game-crashes-on-iphone.html)开始检查我的项目中是否有大于 1024 x 1024 的图像、纹理等，并找到了一个大约 2732 x 2048 的 png。减小它的大小后，我没有得到这个错误。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-30T08:40:14.383

我建议尝试将另一根电缆插入另一个端口。

# sql - 有没有更好的方法来编写这些查询？（内部有错误的 SQL 消息传递模式......）

> ID：11915766
> 
> 赞同：0
> 
> 时间：2012-08-11T15:03:23.123
> 
> 标签：sql, sql-server-2008, schema, relational-database

我继承了一个使用 SQL Server (2008 R2) 的系统，其中包含两个涵盖系统消息传递的表。一条消息具有一对多的关系，它可以发送给多个用户。

主表 Messaging 如下所示：

```
Id (PK, auto increment)
Subject
MessageBody
CreatorEmployeeId
ConversationId
IsConversationStarter (bool) 
```

辅助表 MessagingDetails 如下所示：

```
ID (PK, auto increment)
MessageId (FK to Messaging PK)
RecipientEmployeeId
ConversationId
IsRead (bool) 
```

如果不清楚，则会将一条新消息放入 Messaging 表中，其中包含创建该消息的员工 ID，并创建新的对话 ID。然后将 X 行插入到 MessagingDetails 中，每个收件人一个，引用返回到 Messaging 表并使用相同的对话 ID。

任何新的回复看起来都一样，回复消息进入消息表，收件人详细信息使用相同的对话 ID 进入消息详细信息，这样您就可以将整个消息线程拉一个数字。

当您尝试计算您已创建或已发送给您的所有未读邮件时，这会变得很草率。这是一个现有的查询，它获取系统中其他用户发送给登录用户的所有未读消息，*他们最初是在其中创建消息的*：

```
SELECT * FROM dbo.Messaging m
INNER JOIN dbo.MessagingDetails m1 on m.Id = m1.MessageId
INNER JOIN dbo.MessagingDetails m2 on m1.ConversationId = m2.ConversationId
WHERE m1.RecipientEmployeeId = @employeeId
AND m.IsConversationStarter = 1
AND m.ConversationId = m1.ConversationId
AND m2.IsRead = 0 
AND m2.RecipientEmployeeId == @employeeId 
```

然后要查找员工创建但有未读回复的所有消息，您必须执行几乎相同的查询，将`WHERE`子句的第一部分换成：

```
m.CreatorEmployeeId = @employeeId 
```

我讨厌内部加入同一张桌子两次，一次是自己。鉴于上述架构，是否有更好的方法来编写这些查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T15:14:54.873

为了摆脱第二个 join on `dbo.MessagingDetails`，这个查询应该和你的一样。

```
SELECT * FROM dbo.Messaging m
INNER JOIN dbo.MessagingDetails m1 on m.Id = m1.MessageId
WHERE m1.RecipientEmployeeId = @employeeId
AND m.IsConversationStarter = 1
AND m.ConversationId = m1.ConversationId
AND EXISTS(SELECT * FROM dbo.MessagingDetails m2
    WHERE m1.ConversationId = m2.ConversationId
    AND m2.IsRead = 0 AND m2.RecipientEmployeeId == @employeeId) 
```

我认为它不会更有效率，但您必须检查执行计划。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T15:29:56.753

对于“员工发送的未发送回复的消息”，我认为这可以解决问题：

```
with EmployeeCreatedMessages as (
     select distinct MessageId
     from Messaging
     where m.CreatorEmployeeId = @employeeId
    )
select distinct MessageId
from MessageDetails md
where md.MessageId in (select MessageId from EmployeeCreatedMessages) and
      md.IsRead = false 
```

我不确定您想要关于该消息的哪些信息。这只是给出消息ID。

同样的方法适用于其他人发送给用户的所有消息：

```
with OtherCreatedMessages as (
     select distinct MessageId
     from Messaging
     where m.CreatorEmployeeId <> @employeeId
    )
select distinct MessageId
from MessageDetails md
where md.MessageId in (select MessageId from OtherCreatedMessages) and
      md.IsRead = false and
      md.RecipientEmployeeId = @employeeid 
```

你的描述和你的问题没有提到conversionid。这相关吗？

# mongodb - 将图片保存到mongodb

> ID：11915770
> 
> 赞同：7
> 
> 时间：2012-08-11T15:04:20.627
> 
> 标签：mongodb, python-imaging-library, tornado

我正在尝试使用 tornado 和 pil 和 mongodb 来做到这一点。

```
avat = self.request.files['avatar'][0]["body"]
nomfich = self.request.files['avatar'][0]["filename"]

try:
    image = Image.open(StringIO.StringIO(buf=avat))
    size = image.size
    type = image.format

    avatar = r"/profile-images/{0}/{1}".format(pseudo, nomfich)

except IOError:
    self.redirect("/erreur-im") 
```

和数据库代码：

```
user={
    "pseudo": pseudo, 
    "password":password, 
    "email":email, 
    "tel":tel, 
    "commune":commune,    
    "statut":statut, 
    "nom":nom, 
    "prenom":prenom, 
    "daten":daten, 
    "sexe":sexe, 
    "avatar":avatar
}

self.db.essog.insert(user) 
```

它工作正常，“头像”被保存，但没有图像，它只保存一个名字！

我的问题是：

*   要了解数据库如何处理图片，我必须制作 image.save(path, format)，但路径是普通系统路径（windows 还是 linux）的路径？
*   配置文件很简单，我将图片上传限制为500ko，而mongodb中的文档为16mb，因此该文档将处理整个配置文件，但是当包含图片时，即使对于小文档，我也必须使用gridFS吗？关键问题是图片保存的路径，卡住了，这是我第一次处理数据库，所以很抱歉这个问题。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-11T18:22:28.287

您不一定需要 GridFS 来在 MongoDB 中存储文件，但它肯定会带来更好的体验，因为它可以处理二进制数据的拆分和保存，同时使元数据也可用。然后，您可以将`User`文档中的 ID 存储到头像图片中。

除此之外，您还可以将二进制数据直接存储在您的文档中，尽管在您的代码中您并没有保存数据。你只是用它打开它`PIL.Image`，然后什么都不做。

假设您正在使用`pymongo`您的驱动程序，我认为您可以做的就是将二进制数据包装在一个[`Binary`容器中](http://api.mongodb.org/python/1.6/api/pymongo/binary.html)，然后存储它。这未经我测试，但我认为它应该可以工作：

```
from pymongo.binary import Binary

binary_avatar = Binary(avat)

user={
    ...
    "avatar":avatar,
    "avatar_file": binary_avatar
    ...
} 
```

现在话虽这么说......只是让自己更轻松并使用[GridFS](http://www.mongodb.org/display/DOCS/GridFS)。这就是它的目的。

如果您要使用 GridFS，它可能如下所示：

```
from gridfs import GridFS

avat_ctype = self.request.files['avatar'][0]["content_type"]

fs = GridFS(db)
avatar_id = fs.put(avat, content_type=avat_ctype, filename=nomfich)

user={
    ...
    "avatar_name":avatar,
    "avatar_id": avatar_id
    ...
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-12-31T12:28:44.977

这是在不使用 gridfs 的情况下在 mongodb 中插入和检索图像的代码。

```
def insert_image(request):
    with open(request.GET["image_name"], "rb") as image_file:
        encoded_string = base64.b64encode(image_file.read())
    print encoded_string
    abc=db.database_name.insert({"image":encoded_string})
    return HttpResponse("inserted")

def retrieve_image(request):
    data = db.database_name.find()
    data1 = json.loads(dumps(data))
    img = data1[0]
    img1 = img['image']
    decode=img1.decode()
    img_tag = '<img alt="sample" src="data:image/png;base64,{0}">'.format(decode)
    return HttpResponse(img_tag) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-09T06:25:17.600

有一个错误：

```
 from pymongo.binary import Binary 
```

正确的语法是：

```
 from bson.binary import Binary 
```

谢谢大家的支持

卢卡

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T18:20:57.403

您需要使用 pymongo 的 Binary() 数据类型保存二进制数据。

[http://api.mongodb.org/python/2.0/api/bson/binary.html#module-bson.binary](http://api.mongodb.org/python/2.0/api/bson/binary.html#module-bson.binary)

# java - 在开发过程中实际调用 maven-resources-plugin（并在代码中使用变量）？

> ID：11915776
> 
> 赞同：0
> 
> 时间：2012-08-11T15:05:32.507
> 
> 标签：java, properties, eclipse-juno, maven-resources-plugin

我想使用来自 maven 的信息在 .properties 文件中定义属性；例如 app.name=project.build.artifactId。

如果我在构建时调用资源：资源，它会在我的目标文件夹（在 eclipse 中）中创建一个名为 *.properties 的文件，其中包含 app.name 和（希望）我的 artifactId。

但是，当我通过 eclipse 运行 java 应用程序时，它是使用 /target 中的文件，还是使用 /src/main/resources 中的版本（其中包含变量占位符而不是值本身）？

编辑：

这是我希望使用“过滤”值的代码：

```
// Get project version from maven resource filtering
static {
  Properties prop = new Properties();

  try {
    // load a properties file
    prop.load(new FileInputStream("src/main/resources/project.properties"));

    // get the property value and print it out
    System.out.println(prop.getProperty("app.version"));
  }
  catch (IOException ex) {
    logger.error("Error (1): Failed to get application version from configuration file");
    System.out.println("Unexpected error (1). Aborting...");
  }
} 
```

来自项目的 POM.xml 的相关信息：

```
<build>
  <!-- Resource filtering -->
  <resources>
    <resource>
      <directory>src/main/resources</directory>
      <filtering>true</filtering>
      <includes>
         <include>**/*.properties</include>
      </includes>
    </resource> 
  </resources>
</build> 
```

project.properties 内容：

```
app.version=${project.build.version} 
```

当我通过 Eclipse 运行项目（不执行 JAR）时，第一段的输出（在静态块中）按字面意思返回“${project.build.version}”。它实际上并不返回项目标签的值。

我什至尝试过运行 resources:resources 首先查看是否有任何作用，但没有。资源过滤究竟是如何工作的——或者更好的是，你应该什么时候真正使用它？

# php - 检索卷曲信息 json_decode

> ID：11915777
> 
> 赞同：0
> 
> 时间：2012-08-11T15:05:33.643
> 
> 标签：php, json

我通过以下命令行连接到电子商务应用程序：

```
 curl -u xxxxxx: https://xxxx/xxx 
```

它返回如下内容：

```
{ "charge_enabled": true, 
  "details_submitted": true, 
  "email": "xxx@gmail.com", 
  "id": "xxxx", 
  "statement_descriptor": "xxxx", 
  "xxxx": [ "USD" ] 
} 
```

当我将其更改为 PHP 以在脚本中运行它时，我还可以通过以下方式检索相同的信息：

```
 $ch = curl_init('https://xxxx/xxxx');
 $options = array(        
  CURLOPT_USERPWD=> $xxxxxx
   );
  curl_setopt_array($ch, $options);
  $result2= curl_exec($ch); 
```

但是，当我尝试检索电子邮件等个人信息时，我无法这样做。我尝试通过`json_decode`以下方式这样做：

```
 $parsedresult = json_decode($result2,true);
 $emailretrieve = $parsedresult["email"]; 
```

这仅返回单个号码`1`而不是电子邮件地址。

谁能帮忙告诉我怎么了？我尝试了很多已经在 StackOverflow 上发布的东西，但没有一个可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T15:22:06.177

您应该设置选项（在[http://php.net/curl_exec](http://php.net/curl_exec)`CURLOPT_RETURNTRANSFER`中提到）来获取结果。现在，您只会得到“成功”或“失败”的结果。

# mysql - 如果结果不匹配，则从另一个表中选择

> ID：11915780
> 
> 赞同：0
> 
> 时间：2012-08-11T15:05:48.707
> 
> 标签：mysql

有人问过这个问题，但我的情况与现有问题不太相符。我有两张桌子，第一张桌子是`credentials`和`id` `username``email`

和一个`email-alias`表 `user-id`（对应于`credentials.id`）和`email`。电子邮件`credentials`通常是“user.name@domain.com”，而别名则是“usern@domain.com”。

我现在只有

```
SELECT `username` FROM `credentials` WHERE `email` LIKE ? 
```

但是，如果我使用“usern@domain.com”查询，电子邮件将不会总是匹配。我想要做的是通过一个查询获取用户名，该查询将回退`email-alias`并使用“usern@domain.com”从那里获取一个`user-id`再次`credentials`用于匹配`username`

陷阱是提供的电子邮件可能是别名“usern@..”或“user.name@..”

```
mysql> describe `email-alias`;
+---------+--------------+------+-----+---------+----------------+
| Field   | Type         | Null | Key | Default | Extra          |
+---------+--------------+------+-----+---------+----------------+
| id      | int(11)      | NO   | PRI | NULL    | auto_increment |
| user-id | int(11)      | NO   | UNI | NULL    |                |
| email   | varchar(100) | YES  |     | NULL    |                |
+---------+--------------+------+-----+---------+----------------+

mysql> describe `credentials`;
+-----------------+--------------+------+-----+---------------------+----------------+
| Field           | Type         | Null | Key | Default             | Extra          |
+-----------------+--------------+------+-----+---------------------+----------------+
| id              | int(11)      | NO   | PRI | NULL                | auto_increment |
| username        | varchar(100) | NO   | UNI | NULL                |                |
| email           | varchar(100) | NO   |     | NULL                |                |
+-----------------+--------------+------+-----+---------------------+----------------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T15:25:02.873

您的问题有点令人困惑，但我认为您要做的是`username`从第一个表中选择（如果`email`存在），如果它不从第二个表中选择（如果存在）。您将为此使用子查询。希望这可以帮助。

```
SELECT `c.username`
FROM credentials c
WHERE c.email = 'usern@domain.com' OR c.id = 
(SELECT `e.user-id` from email-alias e WHERE e.email = "usern@domain.com") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T15:14:04.263

我不确定我是否清楚地理解了你的问题，因为它太令人困惑了。但让我试一试。您需要使用`INNER JOIN`.

```
SELECT  `username`
FROM    credentials a
            INNER JOIN email_alias b
                on a.ID = b.userID
WHERE   b.email = 'usern@domain.com' 
```

**更新 1**

```
SELECT  `username`
FROM    credentials a
            INNER JOIN email_alias b
                on a.ID = b.userID
WHERE   b.email LIKE '%usern@%' 
```

# ios - iOS 中的“紧凑”视图

> ID：11915785
> 
> 赞同：0
> 
> 时间：2012-08-11T15:08:25.020
> 
> 标签：ios, layout

我在 iOS (iPhone) 中有一个视图，它有多个组件，以某种堆栈方式组织（一个在下一个的顶部）。这些是用户帐户属性，有些可能是空白的。

所以，在我看来，组件布局是这样的：

UITextField1（名称）

UITextField2（位置）

UITextField3（年龄）

UITextView1（生物）

UITableView（用户条目）。

某些字段可能为空白。我希望下一个字段向上移动，而不是为空白字段留出空格。

这就像 flowlayout 的这个问题：[What is the best/easy way to create 'flow layout' type layout in iOS](https://stackoverflow.com/questions/7871737/what-is-the-best-easiest-way-to-create-flow-layout-type-layout-in-ios)。

我只能看到两种处理方法：

1.  创建一个遍历所有 UIView 并确定哪些是空白的函数并将下面的上移。
2.  创建一个 UITableView 并对内容为空的单元格使用不同的单元格高度。

理想情况下会有一个组件，但我找不到它（基本上是某种堆栈/流布局）。

无论如何，我相信我将实施上面的选项#1，但我不知道是否有一种“标准”的方式来实现这一点（老实说，我什至不知道寻找这个功能的正确术语） .

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T15:25:21.907

通过使用 UITableView 而不是您建议的方式，我会更倾向于您的第二选择。

这将是我使用 UITableView 的方法：

1.  为我的每个组件创建一个 UITableViewCell（或自定义单元格）并为每个组件分配一个标签值，我们稍后将使用它们。您可以在 viewDidLoad 中执行此操作。

2.  在 numberOfRowsInSection 中添加代码以检查哪些字段存在数据值。返回具有数据值的字段数的总数

3.  再次在 cellForRowAtIndexPath 中，检查该字段的数据是否存在 如果存在，请检查是否已经创建了在第一步中创建的单元格（如果没有，则创建） 如果没有，增加某种计数器以增加标签值并找到下一个具有值的字段。找到后，使用该“标签/索引”编号“返回”正确的单元格。

最后，你有一个 UITableView 只显示带有数据的字段。

# ios - 自定义 UITableViewCell 不调用 prepareForSegue

> ID：11915789
> 
> 赞同：12
> 
> 时间：2012-08-11T15:09:25.443
> 
> 标签：ios, uitableview, segue

我有一个自定义 UITableViewCell，名为`EventCell`.

**事件单元.h**

```
#import <UIKit/UIKit.h>

@interface EventCell : UITableViewCell

@property (nonatomic, strong) IBOutlet UILabel *titleLabel;
@property (nonatomic, strong) IBOutlet UILabel *locationLabel;
@property (nonatomic, strong) IBOutlet UILabel *dateLabel;
@property (nonatomic, strong) IBOutlet UILabel *typeLabel;
@end 
```

**事件单元.m**

```
#import "EventCell.h"

@implementation EventCell

@synthesize titleLabel, locationLabel, dateLabel, typeLabel;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

@end 
```

这是我如何设置我的单元格。

**EventsMasterViewController.m**

```
- (EventCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    Event *myEvent;
    NSString *CellIdentifier = @"EventCell";
    EventCell *cell = (EventCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"EventCell" owner:nil options:nil];

    for (id currentObject in topLevelObjects)
    {
        if ([currentObject isKindOfClass:[EventCell class]])
        {
            cell = (EventCell *)currentObject;
            break;
         }
    }

    myEvent = [self.myEventsDataController objectInListAtIndex:indexPath.row];

    cell.titleLabel.text = myEvent.name;
    cell.locationLabel.text = myEvent.location;
    cell.typeLabel.text = @"Social";
    cell.layer.borderColor = [UIColor blackColor].CGColor;
    cell.layer.borderWidth = 1.0;

    return cell;
} 
```

单元格的格式很好，看起来完全符合我的需要。但是当我单击它时，单元格会突出显示蓝色并且不会转到下一个视图。我在 prepareForSegue 方法中放置了一个断点，它甚至没有被调用。

有什么方法可以手动调用 prepareForSegue 吗？如果是这样，我应该在哪里做。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-11T15:49:20.353

你需要实施

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

[self performSegueWithIdentifier:@"YourSegueIdentifier" sender:nil];

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-16T10:53:40.723

您不必*为此*工作`didSelectRow`- 从一个单元格拖动到另一个视图控制器的控制应该创建一个在点击单元格时工作的 segue。

就我而言，问题在于情节提要编辑器错误地创建了转场。我有两个非常相似的情节提要，一个有效，另一个无效，查看源代码（右键单击情节提要文件并选择*Open As* -> *Source Code*），我看到了：

```
<segue destination="UWX-rF-KOc" kind="replace" identifier="showStory" trigger="accessoryAction" splitViewControllerTargetIndex="1" id="Gly-La-KIe"/> 
```

注意`trigger`属性。这向我表明，segue 将从单元的辅助动作中触发。您甚至可以从单元的连接检查器中看到这一点：

![在此处输入图像描述](../Images/a86c54fc8e7d17d00bff5287b27193d6.png)

通过从上面的“选择”句柄拖动而不是从单元格中拖动控件来删除它并替换segue，这给了我正确的segue。

我不确定这个使控制拖动连接到辅助操作而不是选择操作的特定单元格是什么，但你去了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T20:02:54.700

如上所述，`didSelectRowAtIndexPath`除非您将情节提要中的 segue 配置为新的`UIViewController`. 这允许您使用`prepareForSegue`函数而不是编程调用`performSegueWithIdentifier`.

希望这有助于清除它！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-05T12:21:34.620

我的问题是单元格标识符。

因此，在`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`我声明`static NSString *cellIdentifier = @"cell";`中，然后在 storyBoard 中，我在这里添加了这个标识符：

![在此处输入图像描述](../Images/949a203540fb502d194320541becec92.png)

给你！

# c# - 在没有额外查询的情况下对 WPF 数据网格列的值求和？

> ID：11915792
> 
> 赞同：0
> 
> 时间：2012-08-11T15:10:04.327
> 
> 标签：c#, .net, wpf, wpf-controls, wpfdatagrid

我正在填充以下 WPF 数据网格：

![在此处输入图像描述](../Images/db1e985dba3eb61c5de6fb9c4e9086af.png)

使用以下方法：

```
private void ButtonFilterWorkflowWhenClick(object sender, RoutedEventArgs e)
{
    var db = new DatabaseHandle();

    dataGridWorkflow.ItemsSource = db.DisplayHealthIndicator(DateTime.Now, DateTime.Now);

    labelWorkflowLastLoaded.Content = "Last Loaded at " + DateTime.Now.ToString(CultureInfo.InvariantCulture) + " with " +
                              dataGridWorkflow.Items.Count.ToString(CultureInfo.InvariantCulture) + " total events.";

} 
```

其中引用了以下类对象：

```
public DataView DisplayHealthIndicator(DateTime startDate, DateTime endDate)
{
    string queryString = "[marlin].[support_retrieve_workflow_history]";

    using (SqlConnection connection = new SqlConnection(GetConnectionString()))
    {
        using (var cmd = new SqlCommand(queryString, connection))
        {
            connection.Open();

            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.AddWithValue("date_from", startDate.Date);
            cmd.Parameters.AddWithValue("date_to", endDate.Date);

            var reader = cmd.ExecuteReader();

            var dt = new DataTable();
            dt.Load(reader);

            connection.Close();
            return dt.DefaultView;

        }
    }

} 
```

我正在尝试找到一种方法来找到总列的总和，以便将其添加到我的标签中，但没有成功。我可以通过第二个查询来做到这一点，但我想尽可能避免这种情况。我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:52:43.270

您可能必须枚举 中的行`DataView`，例如：

```
dataGridWorkflow.ItemsSource = db.DisplayHealthIndicator(DateTime.Now, DateTime.Now);
DataView dv = (DataView)dataGridWorkflow.ItemsSource;
DataRowCollection drc = dv.Table.Rows;
IEnumerator rowEnum = drc.GetEnumerator();
int sum = 0;
while (rowEnum.MoveNext())
{
    sum += (int)((DataRow)rowEnum.Current)[3];//assuming the 'Total' column has index 3.
}
labelWorkflowLastLoaded.Content = "Last Loaded at " + DateTime.Now.ToString(CultureInfo.InvariantCulture) + " with " + sum.ToString(CultureInfo.InvariantCulture) + " total events."; 
```

**编辑**：我更改了它，以便您应该能够复制并粘贴到您的代码中。

# c# - 带有链接的奇怪 Facebook 帖子行为

> ID：11915794
> 
> 赞同：0
> 
> 时间：2012-08-11T15:10:35.590
> 
> 标签：c#, facebook, facebook-graph-api

这是我在向用户的墙上发帖时提供的参数示例。

![在此处输入图像描述](../Images/1fed10350237cb30417d69a1d00fbe22.png)

这似乎有效。但是，我不想要这似乎创建的“共享链接”类型的墙帖。

这是奇怪的地方，我希望有人能提供帮助。

当我删除“链接”参数时，墙上帖子中的链接突然转到代码为 191 的 facebook 错误页面。此外，作为它要去的 URL 的一部分，它已将 redirect_uri 设置为我提供的图片 url .

任何人都可以对此有所了解吗？

底线是：我想要一个没有“包装”在共享链接墙帖中的墙帖——我只想发布带有图片的消息并将链接转到我的 Facebook 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T18:24:48.210

如果您想在时间轴上显示一张**大**图，从应用程序执行此操作的唯一方法是使用 Open Graph*操作*。但是，照片**必须**是用户生成的，否则 Facebook 将拒绝您的 OG 操作请求。

# php - 用包含 10 行 php 的字符串替换文件的前 23 行

> ID：11915801
> 
> 赞同：1
> 
> 时间：2012-08-11T15:11:04.730
> 
> 标签：php, file, replace, fwrite

我想从文件的开头删除前 23 行并将它们替换为包含 10 行的字符串，例如

```
$newstring = "line1
2
3
4
5
6
7
8
9
10"; 
```

最简单的方法是什么？我一直在玩`fwrite`，但我肯定做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T15:16:36.150

```
replace_first_lines_in_file('path/to/file.txt', 23, $new_string);

function replace_first_lines_in_file( $file_path, $num_lines, $new_string )
{

    $file = file_get_contents($file_path);
    if( ! $file )
        return false;

    $pattern = '#^([^\n]*\n){' . $num_lines . '}#si';
    $new_file = preg_replace($pattern, $newstring, $file);

    if( ! file_put_contents($file_path, $new_file) )
        return false;

    return true;

} 
```

# regex - 如何使用 Notepad++ 轻松删除 HTML 表格单元格中不需要的部分

> ID：11915802
> 
> 赞同：0
> 
> 时间：2012-08-11T15:11:18.080
> 
> 标签：regex, notepad++, html-table, css-tables

我在一些 html 文件中有一系列不同的表格单元格，如下图所示：

[http://screencast.com/t/MqGHN2iwfd](http://screencast.com/t/MqGHN2iwfd)

除了每个单元格的开头和结尾外，它们还有以下共同点：

.net/?mobile=true

/spotlightProfile.htm?f=mkt&v=

/#统计

我希望能够删除所有看起来像那样的部分

或者能够在记事本++中一一删除：

1.  .net/?mobile=true 之前的 url 部分
2.  /spotlightProfile.htm?f=mkt&v= 之前和之后的 url 部分和
3.  /#stats 之前的 url 部分

此外，我还希望能够在 Notepad++ 中删除重复出现

非常感谢期待您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T21:38:04.373

正则表达式看起来像这样。

```
Search for: (.*)(\/\?mobild=true|\/spotlightProfile\.htm\?f=mkt&v=|\/#stats)?(.*)
Replace With: \1\3 
```

基本上我们创建了 3 个组：

1.  在您匹配的表达式之前，
2.  您尝试替换的表达式
3.  该行的其余部分

# java - Java String to CharArray，隐藏方式

> ID：11915803
> 
> 赞同：0
> 
> 时间：2012-08-11T15:11:28.027
> 
> 标签：java, arrays, string, char

我向 Java 大师们提出了另一个棘手的问题

基本上我想要的是：

1.  接话；
2.  将其转换为 arrayOfChar；
3.  将其隐藏为以下方式`_ _ _ _`：

我可以进入第二步，但是当我尝试在下划线中隐藏单词时，它显示为`____`而不是`_ _ _ _`.

代码：

```
//Randomly picks word from Array which played 
public String pickWord(){
    String guessWord = (wordsList[new Random().nextInt(wordsList.length)]);
    return guessWord;
}

//Hides picked word
public char[] setWord(){
    word = pickWord().toCharArray();
    for (int i = 0; i < Array.getLength (word); i++) {
        word[i] = '_';
    }
    return word;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T15:17:15.283

您需要在新的 char 数组中留出空格：

```
 String testWord = "test";
    char[] word = new char[testWord.length() * 2];
    for (int i = 0; i < word.length; i+=2) {
        word[i] = '_';
        word[i + 1] = ' ';
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T15:18:09.490

在 for 循环中添加额外条件

```
if(i%2 == 0)
word[i]='_'; 
else
word[i]=' '; 
```

或者仅当 i%2 =0 时才覆盖 word[i]。在你拥有之后只有一个 if 阻止

```
 word[i]='_';
  if(i%2 != 0)
  word[i]=' '; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T15:18:28.273

当您将 ' *' 存储在 word 变量中并打印它时，它会显示“* __ *”，因为它显示连续的 '* '。你可以通过各种方式来做到这一点——比如你可以在单词的每个字符上放置一个空格或在单词变量中填充一个空格

```
for (int i = 0; i < Array.getLength (word); i++) {
        word[2*i] = '_';
        word[2*i+1] = ' ';
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T15:18:42.480

```
word = pickWord().toCharArray();
spacedWord = new char[word.length*2-1];
for (int i = 0; i < 2*word.length; i+=2) {
    spacedWord[i] = '_';
    spacedWord[i+1] = ' ';
}
return spacedWord; 
```

# .net - LINQPad 错误：“UserQuery”：无法从密封类型“My.Entity.Framework.CustomDataContext”派生

> ID：11915805
> 
> 赞同：5
> 
> 时间：2012-08-11T15:11:39.840
> 
> 标签：.net, entity-framework, linqpad

LINQPad 突然开始无法使用实体框架程序集运行查询。一切似乎都井井有条，所以我有点困惑为什么它不起作用。我的应用程序运行良好。

错误是：

> “UserQuery”：不能从密封类型“My.Entity.Framework.CustomDataContext”派生

关于如何让它再次工作的任何想法？我在网上找不到有关此错误的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T15:42:13.737

`UserQuery`是包含您在 LinqPad 中的代码的类型。如果您使用来自您自己的程序集的自定义实体框架上下文，则 UserQuery 继承自此上下文类。但在您的情况下，您的自定义 EF 上下文类似乎是密封的，因此您不能从它继承。

如果由于某种原因无法“解封”，请不要尝试使用 LinqPad 数据连接系统；只需引用包含您的 EF 上下文的程序集并显式创建上下文的实例。

# php - Magento 产品元标题未填充

> ID：11915806
> 
> 赞同：0
> 
> 时间：2012-08-11T15:11:46.157
> 
> 标签：php, magento, seo

维护由其他人构建的 Magento 站点，注意到站点所有者没有在产品级别填充**Meta Title**、**Description**和**Keywords**。该站点的默认元信息填充到每个产品页面中。

在成功为商店视图填充这些属性、清除缓存、重新索引、验证属性是否处于活动状态等之后，站点的默认元信息仍然是填充产品页面的内容。

似乎这将是一个配置问题，但在这一点上，我想排除原始开发人员以某种方式更改核心功能的可能性。我看到该`getTitle()`方法在找不到更具体的内容时填充默认元信息的位置，这很酷，它这样做是因为在呈现页面时没有标题数据。

**在构建产品页面时，我在哪里可以找到为产品对象创建/填充数据的方法？**

如果我找到发生这种情况的地方，我应该能够直接测试数据库中的内容。

或者，如果通过阅读本文您意识到我错过了检查配置选项，也很想听听。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T16:13:58.443

产品元标题在 _prepareLayout() 方法的 Mage_Catalog_Block_Product_View 中设置

看[这里](https://github.com/LokeyCoding/magento-mirror/blob/magento-1.7/app/code/core/Mage/Catalog/Block/Product/View.php#L58)

# wpf - 带有 SQL Server 数据库的 WPF 应用程序

> ID：11915811
> 
> 赞同：2
> 
> 时间：2012-08-11T15:12:30.967
> 
> 标签：wpf, sql-server

我正在尝试使用 SQL Server 数据库制作 WPF 应用程序，

首先，我使用 SQL Server Management Studio 创建了一个数据库，然后我使用该`./Express`数据库创建了一个 WPF 应用程序，并且运行良好，但是如果我在另一台 PC 上运行它，他就找不到我的数据库了。

我该如何解决这个问题，以便数据库是本地的并且可以在所有 PC 上运行？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T15:17:44.127

另一台 PC 没有本地数据库。您必须使用中央数据库或在另一台 PC 上创建一个。如果您希望应用程序的所有实例都使用同一个中央数据库，请将连接字符串更改为包含`your-pc/Express`，而不是`./Express`其中的“your-pc”是您的机器名称。

# objective-c - 如果 finally 块返回，Xcode 调试器无法捕获异常

> ID：11915814
> 
> 赞同：2
> 
> 时间：2012-08-11T15:13:26.857
> 
> 标签：objective-c, xcode, debugging, exception

我发现了 Xcode 的奇怪行为。Xcode 调试器不会因为这段代码中的未捕获异常而中断。

```
@try            { @throw @"AA"; }
@catch (...)    { @throw;       }
@finally        { return;       } 
```

但是此代码中的异常捕获并触发 Xcode 中断执行以进行调试。

```
@try            { @throw @"AA"; }
@catch (...)    { @throw;       }
@finally        {               } 
```

如果`@finally`block`return`的调试器无法捕获异常。你见过这个问题吗？我不确定这真的是一个问题。从角度来看，它看起来像设计的行为。我不知道为什么。我不应该`return`阻止`@finally`吗？我的问题是它默默地吞下异常，所以我无法检测到它。

对我感到羞耻，我不太了解尝试...抓住...最终的行为。我几乎没有使用异常捕获代码。这是设计的行为还是错误的行为？这是任何已知问题吗？

这是我的环境。

*   Xcode 版本 4.4 (4F250)
*   OS X 10.7.4

* * *

编辑

我附上了完整的测试源代码。

```
#import <Foundation/Foundation.h>

int main (int a, char** b)
{
    @try
    {
        NSLog(@"trying something...");

        @try            { @throw @"AA"; }
        @catch (...)    { @throw;       }
        @finally        { return 0;     }
    }
    @catch (...)
    {
        NSLog(@"something catched.");
    }
    @finally
    {
        NSLog(@"finally...");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T19:15:08.627

将 a`return`放入 @finally 块似乎是个坏主意。异常处理机制将在处理您抛出的异常时尝试展开调用堆栈。如果 @finally 块更改了堆栈上的内容，则您破坏了异常处理程序。这似乎并不奇怪，这会崩溃。

此外，正如 bbum 所指出的，异常不用于 Cocoa 和 Cocoa Touch 中的流控制。通过 Cocoa 方法抛出异常通常会失败。即使您正在做的事情应该在通用的 Objective-C 中工作，它可能仍然会在实际代码中引起问题。

**简短的回答：**不要那样做。

# c# - Socket.ReceiveAsync 什么时候同步返回？

> ID：11915815
> 
> 赞同：2
> 
> 时间：2012-08-11T15:13:46.200
> 
> 标签：c#, sockets, asynchronous

在读取已经接收到的少量数据时，我尝试比较同步和异步方法的性能。所以我发送数据并确保它正在等待接收套接字（相同的程序）。

```
source.Send(sendBuffer);
while (target.Available != sendBuffer.Length)
    Thread.Sleep(50);
SocketAsyncEventArgs arg = new SocketAsyncEventArgs();
arg.Completed += AsyncCallback;
arg.SetBuffer(receiveBuffer, 0, sendBuffer.Length);
if(target.ReceiveAsync (arg))
{
    //Pending request
    //999 out of 1000 times we end up here
} 
```

令我惊讶的是，ReceiveAsync 调用几乎从未同步完成。我会假设 ReceiveAsync 会同步返回并且执行速度与 Receive 一样快，但由于它几乎从未发生过，我无法判断。我对 ReceiveAsync 的期望在这里错了吗？

如果有足够的可用字节，最好总是先检查 target.Available 并执行 Receive 吗？这种使用 ReceiveAsync 而不是 BeginReceive 会破坏一些好处，这就是我写这个问题的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T20:36:25.360

`ReceiveAsync`只需调用底层的 Winsock 子系统。 `ReceiveAsync`使用所谓的重叠 IO（异步 IO）。在创建使用重叠 IO 的套接字的情况下：“无论传入数据是否填满所有缓冲区，重叠套接字都会出现完成指示”。其中“完成指示”是将异步调用的回调。这意味着`ReceiveAsync`将一直是异步的（除非有错误）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-17T19:23:44.970

抱歉回复晚了 ：）

我使用 Socket.Available 属性解决了我的问题。

```
Do
If MySocket.Available > 0 Then
bytes = MySocket.Receive(bytesReceived, bytesReceived.Length, 0)
textFrom &= Encoding.ASCII.GetString(bytesReceived, 0, bytes)
Else
Exit Do
End If
Loop While bytes = bytesReceived.Length 
```

# ruby-on-rails - 用于块引用的 Markdown 中的简单格式化/解析

> ID：11915820
> 
> 赞同：1
> 
> 时间：2012-08-11T15:14:29.760
> 
> 标签：ruby-on-rails, ruby-on-rails-3, markdown, redcarpet

我在我的网站中使用降价，我想对新闻文章做一些简单的解析。

如何解析降价以提取所有块引用和链接，以便我可以将它们与文档的其余部分分开突出显示

> 例如，我想解析文档中的第一个块引用 (>)，以便无论它出现在文档中的哪个位置，我都可以将它推到顶部。（类似于许多新闻网站所做的，突出文章的某些部分。）但然后为正文取消引用。所以它出现了两次（一次总是在顶部突出显示，然后通常出现在文档中）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T18:06:36.367

我会假设您正在尝试在渲染时执行此操作，此时降价将被转换为 HTML。为了为您指明正确的方向，您可以采取的一种方法是

1.  将 Markdown 转换为 HTML
2.  将 HTML 传递给 Nokogiri
3.  抓取第一个`<blockquote>`，复制，注入到Nokogiri节点树的顶部

结果将是第一个的副本`<blockquote>`。

**[Redcarpet 2](https://github.com/vmg/redcarpet)**是将 Markdown 转换为 HTML 的绝佳工具。**[Nokogiri](https://github.com/sparklemotion/nokogiri)**是您进行 HTML 解析的最佳选择。

如有必要，我可以编写示例代码，但是这两个 gem 的文档都很详尽，而且这项任务很简单，只需将文档中示例中的部分拼凑起来。这至少回答了你*如何*去做的问题。

**编辑**

根据需要，这也可以使用一行 jQuery 来完成。

```
$('article').prepend($($('article blockquote').get(0)).clone()) 
```

给定`<article>`页面上一篇文章的 DOM 元素，获取第一个`<blockquote>`，克隆它，并将其添加到`<article>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T12:13:26.800

我知道 wiki 标记（即ruby​​ 的[wikicloth](https://github.com/nricciar/wikicloth/blob/master/examples/info.rb)）具有与您在解析链接、类别和引用方面类似的实现。虽然我不确定块引号，但它可能更适合。

就像是：

```
data = "[[ this ]] is a [[ link ]] and another [http://www.google.com Google].  This is a <ref>reference</ref>, but this is a [[Category:Test]].  This is in another [[de:Sprache]]"

wiki = WikiCloth::Parser.new(:data => data)
wiki.to_html

puts "Internal Links: #{wiki.internal_links.size}"
puts "External Links: #{wiki.external_links.size}"
puts "References:     #{wiki.references.size}"
puts "Categories:     #{wiki.categories.size} [#{wiki.categories.join(",")}]"
puts "Languages:      #{wiki.languages.size} [#{wiki.languages.keys.join(",")}]" 
```

我还没有看到任何可用于降价的解析器。使用 redcarpet，转换为 HTML，然后使用 Nokogiri 似乎有点复杂。

# r - 空索引向量的补码是空索引向量

> ID：11915825
> 
> 赞同：1
> 
> 时间：2012-08-11T15:14:59.320
> 
> 标签：r, indexing

我通过在索引向量前面使用 - （减号）从向量中删除值。像这样：

`scores <- scores[-indexes.to.delete]`

有时`indexes.to.delete`向量为空，即 N/A。所以`scores`向量应该保持不变。但是，当为空时，我得到空`scores`向量`indexes.to.delete`。

例子：

```
x <- c(1, 2, 3);
y <- c(4, 5, 6);
indexes.to.delete <- which(y < x); # will return empty vector
y <- y[-indexes.to.delete]; # returns empty y vector, but I want y stay untouched 
```

我可以编写一个 if 语句来检查是否`indexes.to.delete`为空，但我想知道是否有更简单的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T15:44:49.787

也许使用；

```
x <- c(1, 2, 3)
y <- c(4, 5, 6)
y[!y<x]
> y[!y<x]
[1] 4 5 6

x <- c(1, 2, 3)
y <- c(4, 1, 6)
> y[!y<x]
[1] 4 6
> 
```

# image - 图片未显示在 GitHub 上的 README.md 中

> ID：11915826
> 
> 赞同：63
> 
> 时间：2012-08-11T15:15:07.073
> 
> 标签：image, url, github

我正在尝试使用下面的降价将图像添加到我的存储库中的**README.md**：

```
![ScreenShot](https://github.com/i-saumitra/Voice-controlled-MP3-Player/blob/master/screenshot.jpg) 
```

但是当我访问我的存储库时，图像没有显示。而是显示图像的链接。单击链接将在新窗口中打开图像。

我也尝试过使用相对路径：

```
![ScreenShot](screenshot.jpg) 
```

但这是给页面未找到错误。

**在README.md**中显示图像的正确降价是什么

 **README.md**和**图像文件都在相同的路径/目录中。

在 github README.md 中显示图像的正确方法是什么？

README.md 文件的完整内容如下：

```
Voice-controlled-MP3-Player
===========================

A MP3 player which accept voice command like PLAY, PAUSE, FORWARD, etc. Using C# and Microsoft Speech API.

![ScreenShot](https://github.com/i-saumitra/Voice-controlled-MP3-Player/blob/master/screenshot.jpg) 
```

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-08-11T18:16:43.100

## 更新内容

自 2013 年 1 月 30 日起，GitHub 现在支持标记文档中的相对链接。

这意味着您的代码`![ScreenShot](screenshot.jpg)`现在可以完美运行。

正如@Brad 所指出的，这也可以缓解两个分支中的图像不同但具有相同的情况。在这种情况下，从一个分支切换到另一个分支会在渲染视图中动态切换图像，因此不需要对自述文件内容进行任何更改。

*   **[博文公告](https://github.com/blog/1395-relative-links-in-markup-files)**
*   **[帮助文章](https://help.github.com/articles/relative-links-in-readmes)**

## GitHub 不支持相对链接时的上一个答案

您必须使用原始 url 格式。在你的情况下，这将是[https://raw.githubusercontent.com/i-saumitra/Voice-controlled-MP3-Player/master/screenshot.jpg](https://raw.githubusercontent.com/i-saumitra/Voice-controlled-MP3-Player/master/screenshot.jpg)

这意味着正确的降价将如下

```
![ScreenShot](https://raw.githubusercontent.com/i-saumitra/Voice-controlled-MP3-Player/master/screenshot.jpg) 
```

`.md`在 github 上的文件中使用它会显示以下图片；-)

![截屏](../Images/e152f805e2ef10c9db69b5ac335f5f02.png)

## 根据您的评论更新

> 这个官方记录在哪里我们必须使用原始文件...我在任何地方都找不到

此 URL 格式是 GitHub 站点的未记录功能。这意味着它可能会在以后发生变化。如果发生这种情况，为了“重新发现”新格式，请在显示图像时单击**原始按钮。**这将在您的浏览器中“打开”图像。复制 URL 和 Voilà！

![生的](../Images/524db203dae33d5b5f7d731c437cc7be.png)

**注意：**虽然存储库不再托管在 GitHub 上，但我更新了 url 以反映有关用户内容的新**[GitHub 政策](https://developer.github.com/changes/2014-04-25-user-content-security/)**

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-10-08T07:11:40.793

你真的应该使用相对网址。这样他们也可以更好地用于私人回购。

```
![ScreenShot](/screenshots/latest.png) 
```

假设您的 repo 在 screenshots 文件夹中有 latest.png 。

~B

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2017-11-27T09:57:00.253

要使相对 URL 与图像一起使用，请将其包装在段落标记中。

我遇到了这个问题，尤其是在使用单个图像时。

例子：

```
<p>
    <img src="relativePath/file.png" width="220" height="240" />
</p> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-11-30T19:09:20.527

对先前答案的扩展...

当行时，图像不会显示给我：

```
![ScreenShot](/image.png) 
```

就在一行的正下方`<h2></h2>`，我需要在它们之间添加一个空行。

希望这可以节省一些时间！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-12-28T21:15:43.077

以为我会在 2019 年更新此内容，因为我自己无法解决这个问题。我将图像上传到 GitHub 上的存储库，然后使用图像的原始 url 将其导入我的 markdown 文件。要获取原始 url，请单击 GitHub 中的特定图像链接，以便您位于该特定图像的页面上。照片的右上角有两个按钮，“下载”和“历史记录”。如果您单击“下载”，它会将您带到该原始 url，图片占据全屏。复制该网址，然后将其粘贴到您的降价文件中：

`![image description or alt text](https://raw.githubusercontent.com/i-saumitra/Voice-controlled-MP3-Player/master/screenshot.jpg)`

该按钮用于说“原始”而不是“下载”，所以我希望这可以帮助人们找到它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-01-18T19:09:24.893

这可能与以前的答案无关。我和 OP 有同样的问题 - 我被指引到这里，但对我没有帮助。不过，我希望我可以帮助解决这个问题——因为它涵盖了为什么图像不会在`README.md`文件中呈现的可能性。

我遇到的`issue`是文件名`README.md`file写成`readME`

不仅缺少`.md`它，它的写法也不同。

显然，我们不应该重命名`README.md`文件。`README.md`它必须是该文件的原始名称，以便在 github页面上呈现您要上传的图像或 gif 。希望这可以帮助某人，在极少数情况下，就像我一样。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-08-17T18:10:17.837

检查文件扩展名，因为`.png`与`.PNG`.

在指定文件路径时也使用`/`代替。`\`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-04T15:47:43.217

旁注，使用 reStructuredText 时使用：

```
.. image:: /screenshots/latest.png?raw=true 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-04-02T12:35:10.953

我已经使用“复制路径”进行了测试，在某些地方这是有效的，而在其他地方却没有。

[![在此处输入图像描述](../Images/809026ebe4a2e9eb0958dfedb5fc01a4.png)](https://i.stack.imgur.com/MXJaO.png)

在没有的情况下，我复制了永久链接并改用它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-09T00:32:58.973

当正在导入图像的行上方有任何 html 标记时，它不起作用。您可以尝试删除 html 代码或添加一些空白行以在自述文件中显示图像。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2020-10-01T12:06:09.120

我必须添加一个`<br>`来返回一行，以便图像显示在我的身上。这一发现的灵感来自该线程中的评论，即在标签后留空行。**

# php - 我应该如何在 OS X 上使用可切换的 PHP 和 MySQL 设置本地 LAMP 堆栈？

> ID：11915827
> 
> 赞同：-1
> 
> 时间：2012-08-11T15:15:16.403
> 
> 标签：php, mysql, macos, lamp

几周后我要搬家，并借此机会更新我的技术设置，从 MacBook Pro 和 MacBook Air 切换到 MacBook Air（这将是我的日常计算机）和 Mac Mini Server （这将是一个媒体中心，用于繁重的工作）。

作为此过程的一部分，我希望为 Web 开发工作设置一个良好的本地 LAMP 堆栈。这个 LAMP 堆栈将包括可切换的 PHP 和 MySQL 版本。我想要一个用于 MacBook Air 的开发环境，以及另一个用于 Mac Mini Server 的开发环境。

到目前为止，我在 OS X 上使用 XAMPP 进行所有开发，但在 XAMPP 上切换 PHP 和 MySQL 版本远非简单，而且似乎错过了开箱即用解决方案的意义。

我在想也许最好的方法是在 MacBook Air 上设置一个虚拟 Linux 服务器，并在 Mac Mini 服务器上设置另一个（我网络上具有足够访问权限的任何人都可以访问），并找到某种镜像方式这些。这样做的好处是迫使我学习一些基本的 Linux 服务器管理技能。

我之前曾尝试在我的 MacBook Pro 上设置虚拟 Linux 服务器，但在从主机 OS X 安装访问该服务器时总是卡住：所以，*请*不要回答“只需使用桥接网络设置 Ubuntu “！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T00:47:45.583

我将这个问题交叉发布到我的 Facebook 墙上，最终被引导使用 Mac 作为 Web 服务器，而不是使用 XAMPP 或 MAMP 或虚拟机。Homebrew - [Link](https://brew.sh/) - 然后可用于切换 MySQL 和 PHP（以及，如果需要，Apache）安装。

# ruby - 用于 Google 语音的 Ruby API

> ID：11915828
> 
> 赞同：1
> 
> 时间：2012-08-11T15:15:17.170
> 
> 标签：ruby, google-voice

是否有任何人都可以推荐的用于 Google Voice 的 ruby​​ API/Gem？我找到了这个 gem [http://rubydoc.info/gems/google-voice/](http://rubydoc.info/gems/google-voice/)但它似乎是半生不熟的，我使用它并没有取得太大的成功。

对于 Python，似乎有一些可行的选项，但更喜欢 ruby​​ 选项。

我对此感兴趣的原因是我想编写一些脚本来自动执行我无法使用 Web 应用程序执行的任务，例如存档所有已读消息等。如果现在在 ruby​​ 中无法做到这一点，我想知道是否任何人都在不同的平台和 Google Voice 上取得了成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T18:19:53.097

我不能说这完全满足您的需求。

我通过谷歌搜索找到了这个

[https://github.com/bratta/googlevoiceapi](https://github.com/bratta/googlevoiceapi)

这个基于java的，如果你选择的话，你可以使用它吗`jruby`

[http://code.google.com/p/google-voice-java/](http://code.google.com/p/google-voice-java/)

我没有尝试过，但这并不能阻止你尝试:)

# ios - GDB 转储内存 .bin 文件为空

> ID：11915829
> 
> 赞同：2
> 
> 时间：2012-08-11T15:15:18.133
> 
> 标签：ios, xcode, memory, gdb, dump

当我在 iPhone 上调用 GDB 以“转储内存 X.bin #x#### #x####”时，.bin 文件为空（1.6 MB 没有内容）。我尝试了几种不同的方法来附加到应用程序并转储它，但每次 .bin 都是空的。如果我在模拟器中运行应用程序并尝试从 Xcode 转储，情况也是如此。

我有一个带有 iOS 5.0.1 的 iPhone 4（越狱）和 SDK 5.1（Xcode 捆绑包 4.4.1）和 GDB 版本 6.3.50-20050815（Apple 版本 gdb-1708 + reverse.put.as 补丁 v0.4）。

有任何想法吗？GDB的任何建议替代品？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:06:15.053

您应该通过更改 Mach-O 标头上的 MH_PIE 标志来禁用[ASLR 。](http://fr.wikipedia.org/wiki/Address_space_layout_randomization)

# javascript - 在 Firefox 中使用 indexedDB 时出现错误“由于与数据库无关的原因导致操作失败...”

> ID：11915830
> 
> 赞同：1
> 
> 时间：2012-08-11T15:15:19.663
> 
> 标签：javascript, html, indexeddb

我在 FF 的不同示例之间来回尝试过，我得到的只是`The operation failed for reasons unrelated to the database itself and not covered by any other error code.`我相信它是由`var request = indexedDB.open("mydb",2);`

```
 var db;

  var indexedDB = window.indexedDB || window.webkitIndexedDB 
                ||window.mozIndexedDB||window.msIndexedDB;

  var request = indexedDB.open("mydb",2);    

  customerData=[
    {ssn:"444-44-4444",name:"Bill",age:35,email:"bill@company.com"},      
    {ssn:"555-55-5555",name:"Donna",age:32,email:"donna@home.org"}
  ];

  request.onerror = function(event){

  };
  request.onupgradeneeded = function(event) {

     var objectStore = db.createObjectStore("customers",{keyPath:"ssn"});
     objectStore.createIndex("name","name",{unique:false});
     objectStore.createIndex("email","email",{unique:true});

     for(var i in customerData){
        objectStore.add(customerData[i]);
     }
  } ;
  request.onsuccess = function(e) {

  } ; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:27:09.720

你如何打开这个 html/js 脚本？

如果我没记错的话，FF 无法从它打开 indexedDB`file.html`
取决于视点，这是一个错误或一个功能。

尝试使用 xampit 或其他“服务器”。或者只是使用 Chrome 进行快速测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T11:35:26.813

当我尝试“本地”打开文件时遇到了同样的问题。我在 MDC 上发现一篇帖子说，出于安全原因，任何使用 indexedDb 的操作都只能通过网络服务器的请求获得。因此，似乎问题与文件名（即file.html）无关，而是与协议无关。

# jquery - jquery ajax传递具有相同键的多个值的数据

> ID：11915831
> 
> 赞同：7
> 
> 时间：2012-08-11T15:15:19.743
> 
> 标签：jquery, ajax

有没有一种简单的方法可以用 jquery 构建这样的 ajax 查询？

```
http://www.test.com/?value=happy&value=good&value=day 
```

我试过

```
$.getJSON('http://www.test.com/', {'value': ['happy','good','day']}); 
```

但结果变成`http://www.test.com/?value[]=happy&value[]=good&value[]=day`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-13T08:50:44.060

对于通过搜索来到这里的任何人，您可以使用`traditional` [参数](http://api.jquery.com/jQuery.param)`$.ajax`并将其设置为然后`true`您将获得：

`http://www.test.com/?value=happy&value=good&value=day`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-11T15:25:08.923

这个网址似乎不错：

```
http://www.test.com/?value[]=happy&value[]=good&value[]=day 
```

在 php 中，您可以像数组一样访问值

# jquery - 具有相应 id 号的 jQuery 目标元素

> ID：11915836
> 
> 赞同：0
> 
> 时间：2012-08-11T15:16:57.917
> 
> 标签：jquery

这是我的代码

```
if(jQuery.cookie("box1") == "close") {
        jQuery("#box1").remove();
}; 
```

我已经为每个盒子准备了单独的 cookie。现在我想用 jquery 检查 cookie，如果 cookie 值为“关闭”，则删除相应的框。

我怎样才能使该代码与其他盒子一起使用？.其他盒子有相似的ID（盒子2，盒子3），每个盒子都有一个cookie

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T15:49:10.223

我真的不认为 cookie 插件具有迭代 cookie 的选项，但您可以自己获取所有设置的 cookie，然后迭代它们以查看值是否为`close`，然后删除相应的元素，例如：

```
function get_cookies() {
    var cookies = { };
    if (document.cookie && document.cookie != '') {
        var split = document.cookie.split(';');
        for (var i = 0; i < split.length; i++) {
            var name_value = split[i].split("=");
            name_value[0] = name_value[0].replace(/^ /, '');
            cookies[decodeURIComponent(name_value[0])] = decodeURIComponent(name_value[1]);
        }
    }
    return cookies;
}

var cookies = get_cookies();
for(var name in cookies) {
    if (cookies[name] == 'close') jQuery("#"+name).remove();
}
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T15:23:31.880

看看这个`jquery.cookie`插件：[jQuery.cookie](https://github.com/carhartl/jquery-cookie/blob/master/README.md)。

它将允许您使用类似于以下的代码获得所需的结果：

```
if ($.cookie('box1') === 'close') {
    $('#box').remove();
} 
```

或者，在仍然使用此插件的同时，您可以做的是将 JSON 对象存储在要隐藏的框的 cookie 中，这样您可以使其更通用，并使用以下内容实现它：

```
// assuming the cookie: boxes-to-hide is an array of string id ['box1', 'box2']
$($.cookie('boxes-to-hide')).each(function() {
    // this will be the id of the box to hide
    $('#' + this).remove();
}); 
```

# android - 在 VideoView 中打开一个 url 视频

> ID：11915837
> 
> 赞同：0
> 
> 时间：2012-08-11T15:17:12.287
> 
> 标签：android, android-videoview

我正在尝试使用 url 在 vi​​deoView 中打开视频。

这是我使用的代码：

```
public void playVideo(){
String path= "http://s3.amazonaws.com/yendis_development/uploads/container/content/4fd79353c83b7260e6000003/3.mpg";
String path1="http://commonsware.com/misc/test2.3gp";

Uri uri=Uri.parse(path);
VideoView video=(VideoView)findViewById(R.id.video_view);
video.setVideoURI(uri);
video.start();
} 
```

当我使用“path1”时，我的 VideoView 会获取视频并正常播放。但是当我使用“路径”时，我看不到视频，并且出现一个对话框，上面写着“抱歉，无法播放此视频”。

为什么 webview 适用于 path1 而不是 path？您可以在导航器中打开 path 和 path1 以便查看视频的测试。

当路径时，在我的 logcat 中，我收到此消息（错误）：

```
08-11 17:08:47.411: E/MediaPlayer(10064): error (1, -2147483648)
08-11 17:08:47.411: E/MediaPlayer(10064): Error (1,-2147483648)
08-11 17:08:47.411: D/VideoView(10064): Error: 1,-2147483648 
```

谢谢

# javascript - handlebars.js 中是否有三元运算符？

> ID：11915839
> 
> 赞同：21
> 
> 时间：2012-08-11T15:17:17.043
> 
> 标签：javascript, templates, handlebars.js

在 Handlebars 中，是否有三元运算符？我不是这个意思`if else`；我的意思是像`a == true ? "a" : "b"`。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-08-21T18:49:53.260

通过`if`向它传递三个参数，助手可以用作三元运算符。

在以下示例中，按钮的默认值为`"Save Changes"`，但当`model.isSaving`为 true 时，该值会临时更改为`Saving...`。

```
<button>{{if model.isSaving "Saving..." "Save Changes"}}</button> 
```

...或者，在另一个助手中使用：

```
{{input type="submit" value=(if model.isSaving "Saving..." "Save Changes")}} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-11T16:07:38.803

如果你真的想的话，你可以在handlbars中建立你自己的助手。类似的东西`ternary(a==true, "a", "b")`。有关这方面的更多信息，请参阅[文档](http://handlebarsjs.com/expressions.html)。m90 的想法不是车把背后的想法。这个想法是在你的模板中没有明确的代码，只调用助手和对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-30T18:53:17.733

我有一个帮手（注意里面也可以使用其他帮手） [https://gist.github.com/terion-name/d87ed8907f1bb2e25f32](https://gist.github.com/terion-name/d87ed8907f1bb2e25f32)

```
// app/helpers/iftrue.js
import Ember from 'ember';

export function iftrue(params) {
  if (params[0]) {
    return params.length === 2 ? params[0] : params[1];
  }
  if (params.length === 2) {
    return params[1];
  } else if (params.length === 3) {
    return params[2];
  }
  return null;
}

export default Ember.Helper.helper(iftrue); 
```

有两个参数：如果第一个参数的计算结果为 true，它将被打印，否则第二个

```
{{iftrue project.price 'N/A'}} // $9.99
{{iftrue project.priceNotAvailable 'N/A'}} // N/A 
```

使用三个参数：如果第一个参数计算结果为真，则打印第二个，否则打印第三个

```
// If deadline is set formatted date will be printed, otherwise 'N/A'
{{iftrue project.deadline (moment-format project.deadline 'DD.MM.YYYY') 'N/A'}} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-20T11:27:35.987

下面的代码可用于三元或任何类型的表达式 eval。

> 警告：请在可以安全使用 eval 的场景中使用此代码。

```
{{#if (myfunc "(a[0] + 1) % 2 === 0" arg1)}}

{{/if}}

{{#if (myfunc "(a[0] + a[1]) % 2 === 0" arg1 arg2)}}

{{/if}} 
```

车把辅助功能

```
myfunc: (exp, ...a) => {
    return eval(exp);
  } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-04-23T16:43:27.667

这对我有用

```
{{#if final}} "Final" {{^}} "Interim" {{/if}} 
```

# wordpress - 向 wordpress 插件添加功能

> ID：11915850
> 
> 赞同：1
> 
> 时间：2012-08-11T15:19:45.340
> 
> 标签：wordpress

这是一个简单的概念问题......如果我有一个 wordpress 插件，并且我想为自己编写一些函数，除了他们已经拥有的东西之外，我会将它们放在 wordpress 文件结构中的什么位置？

我不能将它们放在原始 core.php 文件/目录中，因为当插件更新时它们会被清除，对吗？

@NomikOS - 是的，当然......我有一个名为 BP-Phototag 的 wordpress 插件 - 几乎是一张专辑......它位于 wp-content/plugins 文件夹中。我想为我的主题文件夹中的特定模板添加我自己的功能。我是否将函数放在 wp-conten/plugins 文件夹中的 bpa.core.php 文件中，还是创建一个可以继承 bpa.core.php 函数的新 php 文件（我不知道该怎么做）并粘贴它们在 wp-content/themes/mytheme 文件夹下的模板特定文件夹中。我真的不知道如何扩展和覆盖它......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T16:15:55.980

如果插件是基于类的，您可以将其扩展为覆盖/添加方法。如果需要，您可以将包含代码的文件包含在插件目录中（升级后不会删除）或直接包含在`plugins`dir 中。

**编辑 1**

对不起，我没有看到你最后的评论。好吧，我的朋友，是时候学习 OOP PHP5 了。我向您推荐[PHP 5 对象、模式和实践](http://books.google.com/books/about/PHP_5_objects_patterns_and_practice.html?id=U8pQAAAAMAAJ)。它适用于 PHP 认真的编码人员。

基本上你会

```
class leon_my_class extends BP_Phototag_class {

    function __construct()
    {
        parent::__construct();

        // my code
    }

    // overriding protected/public method 
    function BP_Phototag_method()
    {
        // this code will replace original code
    }

    // adding method
    function my_own_method()
    {

    }

} 
```

# c++ - 自动生成移动构造函数

> ID：11915852
> 
> 赞同：1
> 
> 时间：2012-08-11T15:20:00.380
> 
> 标签：c++, c++11, move-semantics

```
#include <iostream>

using namespace std;

struct A
{
    A() {}
    A(const A &a) {
        cout << "copy constructor" << endl;
    }
    A& operator=(const A &a) {
        cout << "assigment operator" << endl;
    }
    A(A &&a) {
        cout << "move" << endl;
    }
    A& operator=(A &&a) {
        cout << "move" << endl;
    }
};

struct B {
    A a;
};

B func() {
    B b;
    return b;
}
int main() {
    B b = func();
} 
```

这将打印“复制构造函数”。

对于 B 类，移动构造函数和移动赋值运算符应该是自动生成的吗？但是为什么它使用类 A 的复制构造函数而不是移动构造函数呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T15:34:58.743

对我来说，它根本不打印任何东西，因为复制/移动已被省略。但是，如果我通过以下方式阻止 RVO：

```
extern bool choice;

B func() {
    B b1, b2;
    if (choice)
      return b1;
    return b2;
} 
```

然后打印：

```
move 
```

可能是您的编译器尚未实现移动成员的自动生成。

# ruby-on-rails - 如何从主干视图调用灰尘模板

> ID：11915853
> 
> 赞同：1
> 
> 时间：2012-08-11T15:20:23.440
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, backbone.js, dust.js

你好。我正在尝试从 rails 项目的主干视图调用灰尘模板。

这是调用JST模板的方式：

```
Spa.Views.PostsIndex = Backbone.View.extend({ 
```

模板：JST['posts/index']，

我需要用灰尘代替erb。我正在使用**dust_assets gem**来渲染灰尘模板。

我在 app/assets/templates/post 下有一个文件 index.jst.dust 模板。

当我像下面这样从 application.js 文件调用模板时，我能够渲染灰尘模板，但我无法从主干视图渲染它。

```
$(function() {

 JST["templates/index"]({ name : "World" }, function(err, out) {
 $('#dust').html(out);
  });
}); 
```

请建议我如何调用灰尘模板或指向一些解释相同的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:23:25.443

Backbone.js 的 View 类有一个无操作的渲染方法——这意味着你必须重写这个方法来告诉 View 类如何渲染它的视图。

即使您已经在类中定义了模板变量，您也必须这样做。

一个例子是：

```
render: function() {
  this.template({name: "World"}, function(err, out){
    $(this.el).html(out); 
  });
  return this;
} 
```

# android - OnActivityResult 没有被调用

> ID：11915854
> 
> 赞同：0
> 
> 时间：2012-08-11T15:20:36.897
> 
> 标签：android, motodev-studio

这是第一个活动的代码：

```
package com.android.shopping;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ListView;
import android.widget.TextView;

public class MainActivity extends Activity implements OnClickListener{

    Button btn;
    ListView lista;
    TextView tekst;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        btn=(Button) findViewById(R.id.button1);
        lista=(ListView) findViewById(R.id.listView1);
        btn.setOnClickListener(this);
        tekst=(TextView) findViewById(R.id.textView1);
    }

    @Override
    public void onClick(View v) {
        Intent i=new Intent(this, DetailsActivity.class);
        startActivityForResult(i, RESULT_OK);

    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if(resultCode==RESULT_OK){
        String item=data.getStringExtra("data").toString();
        tekst.setText(item.toString());
    }

    }
    } 
```

第二个：

```
package com.android.shopping;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class DetailsActivity extends Activity implements OnClickListener{
    Button save;
    EditText details;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_details);
        save=(Button) findViewById(R.id.button1);
        details=(EditText) findViewById(R.id.editText1);
        save.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        Intent in=new Intent();
        in.putExtra("data", details.getText().toString());
        setResult(RESULT_OK, in);
        finish();

    }

} 
```

因此，在带有按钮的第一个活动中，我调用了第二个活动。用户在文本字段中输入内容并单击一个按钮，使他回到第一个活动。他输入的文本应该显示在第一个活动的 textView 中，但事实并非如此。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T15:53:22.403

在你的`MainActivity`课堂上，你应该改变你开始的那一`DetailsActivity`行

'startActivityForResult(i, 1);'

请注意，您不应使用`RESULT_OK`其实际值为 -1。在 sdk 文档中，它说如果您使用负值作为第二个参数，`startActivityForResult`则简单地视为`startActivity`. 这就是为什么你不能得到结果的原因`DetailsActivity`。

顺便说一句，第二个参数是 request_code。我认为让 request_code 和 result_code 相同不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T15:31:12.597

你确定你的代码通过了 setResult() 和 finish() 吗？

`onActivityResult()`当你在新的活动中`startActivityForResult(<new_activity_context>)`被调用。`setResult()`

另外，你能确保你`Manifest`没有`android:launchMode="singleInstance"`吗？

# search - typo3 powermail 2.0.1 后端邮件列表 - 扩展搜索、扩展导出设置、excel 和 csv 符号不起作用

> ID：11915856
> 
> 赞同：0
> 
> 时间：2012-08-11T15:20:43.923
> 
> 标签：search, export, typo3, backend

如果我点击打开邮件列表的扩展搜索或扩展导出设置，它不起作用，它们仍然是隐藏的！对于像 excel 和 csv 这样的导出符号也是如此，它们不起作用，没有任何反应！有人知道如何解决这个问题！谢谢！:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T16:38:58.213

你有多少邮件？

我经历过类似的事情，那是因为我们保存了太多邮件。由于需要获取的邮件数量，连接超时。

尝试限制您希望导出的邮件数量。

请注意，我们使用的是旧版本的 powermail。它可能不适用于 2.0.1。

# regex - 有没有办法评估 Perl 正则表达式匹配的次数？

> ID：11915862
> 
> 赞同：12
> 
> 时间：2012-08-11T15:21:50.587
> 
> 标签：regex, perl

我一直在研究[`perldoc perlre`](http://perldoc.perl.org/perlre.html)正则[表达式食谱](http://shop.oreilly.com/product/9780596520694.do)和 Stack Overflow 上的相关问题，我似乎找不到看起来非常有用的表达式：我怎么知道当前匹配的数量？

有最后一个封闭组匹配的表达式（`$^N`），匹配 3 的内容（`\g{3}`如果我理解正确的文档）`$'`，`$&`和`$``。但似乎没有一个我可以使用的变量来简单地告诉我当前匹配的数量是多少。

真的失踪了吗？如果是这样，是否有任何解释的技术原因为什么很难实施，或者我只是没有足够仔细地阅读 perldoc？

请注意，我对内置变量感兴趣，而*不是*像使用`(${$count++})`.

对于上下文，我正在尝试构建一个仅匹配某些匹配实例的正则表达式（例如，匹配所有出现的字符“E”但不匹配出现的 3、7 和 10，其中 3、7 和 10 只是数字在一个数组中）。当我试图为[这个 SO question](https://stackoverflow.com/questions/11914499/skipping-particular-positions-in-a-string-using-substitution-operator-in-perl)构建一个更惯用的答案时，我遇到了这个问题。

我想避免将正则表达式作为字符串来实际将 3、7 和 10 插入到正则表达式本身中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T00:25:42.427

我完全忽略了将其用于另一个问题的实际效用或智慧。

我想`@-`或者`@+`可能会做你想做的事，因为它们保存了编号匹配的偏移量，但看起来正则表达式引擎已经知道最后一个索引是什么：

```
use v5.14;

use Data::Printer;

$_ = 'abc123abc345abc765abc987abc123';

my @matches = m/
    ([0-9]+)
    (?{ 
        print 'Matched \$' . $#+ . " group with $^N\n";
        say p(@+);
    })
    .*?
    ([0-9]+)
    (?{ 
        print 'Matched \$' . $#+ . " group with $^N\n"; 
        say p(@+);
    })  
    /x;

say "Matches: @matches"; 
```

这给出了将最后一个索引显示为 2 的字符串，即使它尚未匹配`$2`。

```
Matched \$2 group with 123
[
    [0] 6,
    [1] 6,
    [2] undef
]
Matched \$2 group with 345
[
    [0] 12,
    [1] 6,
    [2] 12
]
Matches: 123 345 
```

请注意，第一次`$+[2]`是 undef，因此尚未填写。你也许可以用它做点什么，但我认为这可能偏离了你的问题的精神。如果你真的很喜欢，你可以创建一个绑定的标量，它的值是最后定义的索引 in `@+`，我猜。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-13T11:39:20.450

我玩了一会儿。同样，我知道这并不是您真正想要的，但我认为它不会以您想要的方式存在。

我有两个想法。首先，通过使用分隔符保留模式进行[拆分](http://perldoc.perl.org/functions/split.html)，您可以将间隙位作为输出列表中的奇数元素。使用[split](http://perldoc.perl.org/functions/split.html)中的列表，您可以计算您所在的匹配项，然后按照您的喜好将其重新组合在一起：

```
use v5.14;

$_ = 'ab1cdef2gh3ij4k5lmn6op7qr8stu9vw10xyz';

my @bits = split /(\d+)/; # separator retention mode

my @skips = qw(3 7 10);
my $s;
while( my( $index, $value ) = each @bits ) {
    # shift indices to match number ( index = 2 n - 1 )
    if( $index % 2 and ! ( ( $index + 1 )/2 ~~ @skips ) ) {
        $s .= '^';
        }
    else {
        $s .= $value;
        }
    } 
```

我得到：

```
ab^cdef^gh3ij^k^lmn^op7qr^stu^vw10xyz 
```

我以为我真的很喜欢我的[分裂](http://perldoc.perl.org/functions/split.html)答案，直到我有了第二个想法。[状态](http://perldoc.perl.org/functions/state.html)是否在替换中起作用？看来确实如此：

```
use v5.14;
$_ = 'ab1cdef2gh3ij4k5lmn6op7qr8stu9vw10xyz';
my @skips = qw(3 7 10);

s/(\d+)/
    state $n = 0;
    $n++;
    $n ~~ @skips ? $1 : '$'
    /eg;

say; 
```

这给了我：

```
 ab$cdef$gh3ij$k$lmn$op7qr$stu$vw10xyz 
```

我不认为你能比这更简单，即使那个魔法变量存在。

我有第三个想法，但我没有尝试。我想知道[状态](http://perldoc.perl.org/functions/state.html)是否在代码断言中起作用。可能，但是我必须弄清楚如何使用其中一个来使匹配失败，这实际上意味着它必须跳过可能匹配的位。这看起来真的很复杂，这可能是 Borodin 甚至在伪代码中迫使你展示的东西。

# javascript - 动画并同时向 li 添加类

> ID：11915867
> 
> 赞同：0
> 
> 时间：2012-08-11T15:22:14.823
> 
> 标签：javascript, jquery

我想为一个 div 块设置动画，同时向 li 添加类，我该怎么做？

我的小提琴 - [http://jsfiddle.net/AsfFQ/4/](http://jsfiddle.net/AsfFQ/4/)

当我单击“红色”背景中的 div 时，它将向左设置 0px 动画。如何为 div 的每 20px 动画添加一个“选定”类到 li。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T15:40:52.503

如果使用新的 jQuery 1.8，你实际上可以执行一个动画并得到一个承诺，返回的对象还包含动画状态、补间等，你可以用它来计算应用类的元素，这有点实验性，我刚开始玩这个，但类似：

```
$(function() {
    $('.block').on('click', function(){
        var ani = $.Animation( this, {left:0}, {duration: 1000} );

        ani.progress(function(e) {
            var Now = e.tweens[0].now,
                idx = Math.round(Now/10);
            $(".container ul li").eq(idx).addClass('selected').siblings().removeClass('selected');
        });
    });    
}); 
```

[**小提琴**](http://jsfiddle.net/AsfFQ/12/) ​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T15:37:55.213

看看这个[**演示**](http://jsfiddle.net/AsfFQ/11/)。

这是Javascript：

```
var timer, 
    selectLi = (function() {
        var $block = $('.block'),
            $container = $('.container'),
            $lis = $('.container ul li'),
            liWidth = $lis.width(),
            $selectedLi;

        return function() {
            var pos = $block.offset().left - $container.offset().left,
                liNum = Math.round(pos / liWidth);
            $selectedLi && $selectedLi.removeClass('selected');
            $selectedLi = $($lis.get(liNum));
            $selectedLi.addClass('selected');
        };
    })();

$('.block').click(function() {
    timer = setInterval(selectLi, 30);
    $(this).animate({
        left: 0
    }, function() {
        clearInterval(timer);
    });
}); 
```

# ruby - 在不打开浏览器的情况下运行 Capybara

> ID：11915869
> 
> 赞同：3
> 
> 时间：2012-08-11T15:22:56.710
> 
> 标签：ruby, selenium, capybara

我编写了简单的控制台脚本，用于使用 capybara（硒驱动程序）进行抓取，但不希望浏览器出现。我只是不想在控制台上写文字。

可以在不打开浏览器的情况下运行水豚吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T18:52:41.427

Capybara有一个[headless-webkit 驱动程序](https://github.com/thoughtbot/capybara-webkit)，可以避免打开浏览器窗口。

如果您不依赖 Capybara API 并且不需要担心 JavaScript，那么[mechanize](https://github.com/tenderlove/mechanize)可能是与 Web 站点交互的一种更简单的方法。

# java - AuthMe 如何在验证之前阻止 Minecraft 中的操作？

> ID：11915873
> 
> 赞同：0
> 
> 时间：2012-08-11T15:23:00.553
> 
> 标签：java, bukkit

我想制作一个类似于 AuthMe 的插件，阻止所有操作——放置/破坏块、更改库存、聊天——当玩家刚刚加入时，直到他使用命令登录。

我不想使用 AuthMe 的原因是因为我希望它与我的网站进行通信，例如使用与网站上的帐户相同的密码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T16:06:47.537

创建一个[`Listener`](https://hub.spigotmc.org/javadocs/spigot/org/bukkit/event/Listener.html)监听所有要取消的事件。

查看下的不同包[`org.bukkit.event`](https://hub.spigotmc.org/javadocs/spigot/org/bukkit/event/package-frame.html)。您可能需要参与大多数[`org.bukkit.event.player`](https://hub.spigotmc.org/javadocs/spigot/org/bukkit/event/player/package-frame.html)事件。

我建议您看一下[AuthMe Reloaded](http://dev.bukkit.org/bukkit-plugins/authme-reloaded/)源代码，以了解它是如何做到的。检查[`fr.xephi.authme.listener`](https://github.com/Xephi/AuthMeReloaded/tree/master/src/main/java/fr/xephi/authme/listener)包裹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T17:36:40.993

我可以为您提供一些代码来执行此操作，因为我自己编写了 AuthMC 副本。

首先，您需要列出需要取消的事件。然后，您将需要一个“已登录”玩家的 HashSet。每个事件侦听器都会检查玩家是否在 HashSet 中，如果不在则取消事件。

```
HashSet<String> loggedInPlayers = new HashSet<String>();

public void blockBreak(BlockBreakEvent e) {
    if(!logginInPlayers.contains(e.getPlayer().getName()) {
        e.setCancelled(true);
    }
} 
```

请注意，HashSet 应包含玩家姓名。这是为了节省内存，因为您应该知道直接存储播放器会占用大量内存。

您还需要一个事件侦听器，用于在玩家注销时将其从 HashSet 中移除。

```
public void playerQuit(PlayerQuitEvent e) {
    loggedInPlayers.remove(e.getPlayer().getName();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T15:09:15.283

正如人们之前所说，您所要做的就是监听事件的发生并检查它们是否在指定的列表中。不一定是 List，HashMap 也可以。正如建议的那样，HashSet 也是如此。但是，让它连接到您的网站会有点困难，我无法回答如何做到这一点，因为我对此主题一无所知。

当玩家聊天时取消事件的示例（我在自己的插件中使用它，并使用 HashSet 来判断玩家是否登录）：

```
HashSet<String> loggedIn = new HashSet<String>();

@EventHandler
public void onPlayerChat(PlayerChatEvent event) {
  if (!loggedIn.contains(event.getPlayer().getName()) {
    event.setCancelled(true);
    event.getPlayer().sendMessage("You must log in to chat!"); //Optional
  }
} 
```

您还需要一些东西来将他们从退出时登录的玩家列表中删除：

```
@EventHandler
public void onPlayerQuit(PlayerQuitEvent event) {
    loggedIn.remove(event.getPlayer().getName());
} 
```

只需重复我为其他事件提供的聊天示例，就可以了！

# asp.net-mvc - Web应用程序中最受欢迎的设计模式是什么

> ID：11915877
> 
> 赞同：1
> 
> 时间：2012-08-11T15:23:32.670
> 
> 标签：asp.net-mvc, design-patterns, web-applications, architecture

Web 应用程序中最流行的设计模式是什么？

我知道在 asp.net mvc 中经常使用依赖注入和存储库，但我想知道我可以在 Web 应用程序中使用哪些其他模式。如果你给我一个我可以使用模式的例子，或者给出代码片段，那将是最好的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T15:33:39.623

在过去几十年里，我们作为软件工程师开发的大多数设计模式仍然适用于它们设计的情况。根据您的需要，您将在某些时候在 Web 应用程序中使用其中的大部分。

[http://geekswithblogs.net/subodhnpushpak/archive/2009/09/18/the-23-gang-of-four-design-patterns-.-revisited.aspx](http://geekswithblogs.net/subodhnpushpak/archive/2009/09/18/the-23-gang-of-four-design-patterns-.-revisited.aspx)

下面还有一个指向一个站点的链接，该链接显示了很多这些模式并有解释/示例。他们有自己的产品，该站点是该站点的商店，但该站点确实有示例并包含代码示例，因此如果您愿意，可能值得一游。大多数在 C# 中

[http://www.dofactory.com/Patterns/Patterns.aspx](http://www.dofactory.com/Patterns/Patterns.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-11T22:01:39.123

单例模式是最流行的模式。它也是最知名*的反模式*（被认为是有害的模式）之一。

每个新手都使用它，因为它允许您使用*看起来*像面向对象代码的[全局状态。](http://www.youtube.com/watch?v=-FRm3VPhseI)它还可以让您避免那种令人困惑的[依赖注入](http://www.youtube.com/watch?v=RlfLCWKxHJ0)。

 *至于*“四人帮”*这本书，一些[未受过教育的人发起](http://martinfowler.com/bliki/OOPSLA2004.html)了一项运动，希望在最新版本中删除单例模式，但这种尝试已被成功挫败。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-11T18:14:50.413

或者如果你有 28 美元... [Jon Skeet 的 C# 设计策略](http://tekpub.com/productions/cspatterns)

我还没看，但我确实打算很快买它。

编辑：恕我直言，asp.net web 开发中最流行的设计模式是[智能 UI 反模式](http://geekswithblogs.net/gregorymalcolm/archive/2009/07/14/user-interface-patterns.aspx)；）*

# php - 添加好友 Ajax 然后更改为好友请求

> ID：11915878
> 
> 赞同：0
> 
> 时间：2012-08-11T15:23:50.610
> 
> 标签：php, javascript, jquery, ajax

我有一个使用 Ajax 将数据发送到数据库的按钮。但是，一旦发送了这些数据，我如何让这个按钮自动更改为请求的朋友？

我会把我的朋友请求/撤销按钮放在成功替换它吗？

添加好友按钮

```
<button cursor='pointer' onClick=\"addfriend(".$user2_id.");\">Add Friend</button> 
```

AJAX

```
function addfriend(user2_id){   
$.ajax({
   type: "POST",
   url: "../add_friend.php",
   data: "user2_id="+user2_id,
   success: function(){
   }
 });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T15:27:37.370

您可以在数据库的帮助下做到这一点。目标用户 ID 可以附加到该用户数据库或表。如果找到匹配的用户 ID，则可以使用 php 进行类回显。可以使用 为按钮指定特定的类`php echo`，并且可以使用不同的样式设置按钮`CSS`。您也可以禁用该按钮的 AJAX 请求（仅通过为某些活动类按钮指定 AJAX 功能）。

尝试这个;

在你的 php 中；

```
<?php
// if request not sent: $addfunction  = 'onClick=\"addfriend(".$user2_id.");\"'; AND $addbuttonclass = "active";
// if request sent: $addbuttonclass = "inactive";
?> 
```

在你的按钮部分；

```
<button class="<?php echo $addbuttonclass; ?>" <?php echo $addfunction; ?>\">Add Friend</button> 
```

最后你的 CSS

```
.active{
cursor: pointer;
background-color: #0066CC;
}
.inactive{
background-color: #EEEEEE;
} 
```

# android - 键盘上方的 Android 广告

> ID：11915887
> 
> 赞同：0
> 
> 时间：2012-08-11T15:25:21.947
> 
> 标签：android, view

我有一个 android 应用程序，它在最底部有几个视图和一个 admob 视图：

```
Textview
Button
Textview
Admob view 
```

当我打开键盘时，一切都会调整大小，因为

```
android:windowSoftInputMode="adjustResize" 
```

这看起来不太好，所以我可以通过禁用它

```
android:windowSoftInputMode="adjustPan" 
```

当我现在打开键盘时，我再也看不到广告了，因为它在键盘后面;(

是否可以修复所有视图，但是当我打开键盘时，admob 视图应该在键盘上方？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T16:05:57.230

这将可以滚动浏览除广告之外的所有内容，广告始终在底部可见：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android" >

    <ScrollView
        android:layout_alignParentTop="true"
        android:layout_alignBottom="@id/ad" >

        <EverythingButAd />

    </ScrollView>

    <Ad 
        android:id="@+id/ad"
        android:layout_alignParentBottom="true" />

</RelativeLayout> 
```

记住：

*   设置`android:layout_width`& `android:layout_height`; 我在示例中省略了它们以提高可读性
*   利用`android:windowSoftInputMode="adjustResize"`

# ios5 - 如何为 iPhone 4 编译

> ID：11915889
> 
> 赞同：0
> 
> 时间：2012-08-11T15:25:50.227
> 
> 标签：ios5, compilation, iphone-4, armv6

这是我的问题：我有一个可以在运行 iOS 5.1.1 的 iPhone 4S 上完美运行的应用程序。现在 Apple 拒绝了我的应用程序，因为他们发现该应用程序在运行 iOS 5.1.1 的 iPhone 4 上启动时崩溃了。为 iPhone 4 编译需要做什么？我无法真正测试它，因为我只有一部 iPhone 4S 可供我使用。我已经在项目设置中做了一些调整并添加了 armv6。我还需要做什么？

我象征着我从苹果那里得到的崩溃报告，如下所示。但是，问题仍然存在。我不知道为什么我的应用程序不能在 iPhone 4 上运行。我发现了一段代码，它被提到为最后一个例外的 #6。它位于 ViewController.m 中。这是我在指定行的代码：

```
self.player =[[MPMoviePlayerController alloc] initWithContentURL:[NSURL fileURLWithPath:url]];

Last Exception Backtrace:
0   CoreFoundation                  0x3742088f __exceptionPreprocess + 163
1   libobjc.A.dylib                 0x35125259 objc_exception_throw + 33
2   CoreFoundation                  0x37420789 +[NSException raise:format:] + 1
3   CoreFoundation                  0x374207ab +[NSException raise:format:] + 35
4   Foundation                      0x37c0805f -[NSURL(NSURL) initFileURLWithPath:] + 79
5   Foundation                      0x37c07ffb +[NSURL(NSURL) fileURLWithPath:] + 43
6   Podman                          0x00021feb -[ViewController viewDidLoad] (ViewController.m:43)
7   UIKit                           0x3112dc8b -[UIViewController view] + 167
8   UIKit                           0x3112c461 -[UIWindow addRootViewControllerViewIfPossible] + 45
9   UIKit                           0x3111ee87 -[UIWindow _setHidden:forced:] + 295
10  UIKit                           0x3118f7d5 -[UIWindow makeKeyAndVisible] + 25
11  UIKit                           0x3112ce6d -[UIApplication _callInitializationDelegatesForURL:payload:suspended:] + 1633
12  UIKit                           0x311267dd -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 409
13  UIKit                           0x310f4ac3 -[UIApplication handleEvent:withNewEvent:] + 1011
14  UIKit                           0x310f4567 -[UIApplication sendEvent:] + 55
15  UIKit                           0x310f3f3b _UIApplicationHandleEvent + 5827
16  GraphicsServices                0x33b3622b PurpleEventCallback + 883
17  CoreFoundation                  0x373f4523 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 39
18  CoreFoundation                  0x373f44c5 __CFRunLoopDoSource1 + 141
19  CoreFoundation                  0x373f3313 __CFRunLoopRun + 1371
20  CoreFoundation                  0x373764a5 CFRunLoopRunSpecific + 301
21  CoreFoundation                  0x3737636d CFRunLoopRunInMode + 105
22  UIKit                           0x3112586b -[UIApplication _run] + 551
23  UIKit                           0x31122cd5 UIApplicationMain + 1081
24  Podman                          0x00021e7b main (main.m:16)
25  Podman                          0x00021e30 start + 40 
```

# php - 用户将选择的页面上的多个图像，发布到服务器的最佳方式？

> ID：11915890
> 
> 赞同：0
> 
> 时间：2012-08-11T15:25:52.737
> 
> 标签：php, jquery, ajax

我目前正在为加入我网站的新用户制作“欢迎/演练”。

最初，他们会受到他们喜欢的最近/热门上传的欢迎，这将帮助我的网站找到他们想要的图片。但我的问题是让用户选择他们喜欢或不喜欢的最佳方式是什么？目前我有这个。

[http://jsfiddle.net/BKjJV/](http://jsfiddle.net/BKjJV/)

我希望你能掌握我在这里想要实现的目标，但如果没有，总结一下，

用户单击 (n) 数量的图像来喜欢 -> 点击继续 -> 页面抓取所有被喜欢的图像并将它们发送到添加到我的数据库中的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T16:07:12.710

给定您的代码，最简单的方法是“在下一页按钮上”查看用户选择了哪些图像，然后通过 ajax 将他们的名称发送到 php 页面，该页面将在数据库上检查它以添加它们：

```
$(document).ready(function(){
    var images = new Array(); //images clicked will be stored here 
    $('#next_page_button').click(function(e){ //button that will send users to the next page
        e.preventDefault(); 
        $('.item').each(function(){ //for each image
            if($(this).find('.clicked').is(":visible")){ //see if the user has clicked on it
               images.push($(this).find('img').attr('src')); //and if so add it to the array
            }
        });
        $.ajax({   //time to send it to the php page
            url: '', //url of it
            type: 'POST',
            data: {images: encodeURIComponent(images.join())}, //lets merge the array and create a query string of the image separated by a comma and encode them to be sent via POST
            success: function(data){
                    //if the database actions went well, user will be send to the next page
            }                               
        });
    });
}); 
```

在 PHP 页面上，您将检索，通过[explode](http://php.net/manual/en/function.explode.php)`$_POST['images']` (',' $_POST['images'])拆分变量，然后通过数组循环以检查/将其添加到数据库中`foreach`

小建议：您应该使用 id 创建“唯一”图像并将其显示在页面上，以便更轻松地在数据库中“检查/添加”它们。使用唯一数字索引而不是文本比较更快，并且提供更高的可靠性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T18:07:30.437

你可以用一种简单的方式来做，javascript代码是

```
$('#continue').on('click', 'input', function(e) {
    var selection = [];
    $('.item').filter(function() {
        return $(this).find('.clicked').css('display') == 'block';
    }).each(function() {
        selection.push($(this).find('img').attr('src'));
    });

    alert(JSON.stringify(selection));

    $.post('http://www.example.com', {
        "selection": JSON.stringify(selection)
    }, function(data) {
        console.log(data);
    });
    return false;
}); 
```

查看更新的[小提琴](http://jsfiddle.net/BKjJV/2/)演示

# php - 回显整个预编译的 php 页面

> ID：11915891
> 
> 赞同：2
> 
> 时间：2012-08-11T15:25:55.743
> 
> 标签：php

例如，如果我有脚本：

```
<?php

     $page = "My Page";
     echo "<title>" . $page . "</title>";
     require_once('header.php');
     require_once('content.php');
     require_once('footer.php');

?> 
```

我可以在该页面的底部添加一些东西来显示整个预编译的 php 吗？

我想从字面上回显 php 代码，而不是编译它。

所以在我的浏览器中，我会以代码形式看到以下内容......

```
// stuff from main php
$page = "My Page";
echo "<title>" . $page . "</title>";

// stuff from require_once('header.php');
$hello = "Welcome to my site!";
$name = "Bob";
echo "<div>" . $hello . " " . $name . "</div>";

// stuff from require_once('content.php');
echo "<div>Some kool content!!!!!</div>";

// stuff from require_once('footer.php');
$footerbox = "<div>Footer</div>";
echo $footerbox; 
```

**这可能吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T16:10:12.520

没有办法在 PHP 中实现它，但如果你只是想要一些极其简单和不健壮的东西，你可以尝试破解它：

```
<?php
$php = file_get_contents($_GET['file']);

$php = preg_replace_callback('#^\s*(?:require|include)(?:_once)?\((["\'])(?P<file>[^\\1]+)\\1\);\s*$#m', function($matches) {
    $contents = file_get_contents($matches['file']);
    return preg_replace('#<\?php(.+?)(?:\?>)?#s', '\\1', $contents);
}, $php);

echo '<pre>', htmlentities($php), '</pre>'; 
```

**笔记：**

*   **警告：**允许像我对第一行所做的那样进行任意文件解析是一个安全漏洞。进行自己的身份验证、路径限制等。
*   这不是递归的（尽管它不需要更多的工作来实现），所以它不会处理其他包含文件中的包含文件等等。
*   正则表达式匹配并不健壮，而且非常简单。
*   假定包含的文件在字符串中静态命名。喜欢`include($foo);`或`include(__DIR__ . '/foo.php');`不会工作的事情。

*免责声明：本质上，要正确执行此操作，您需要实际解析 PHP 代码。我只提供上述内容，因为这是一个有趣的问题，我很无聊。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T15:42:09.520

```
echo '$page = "My Page";';
echo 'echo "<title>" . $page . "</title>";';
echo file_get_contents('header.php');
echo file_get_contents('content.php');
echo file_get_contents('footer.php'); 
```

为了清楚起见，我将标题生成放在它自己的文件中，然后只需使用一系列 echo file_get_contents()...

```
echo file_get_contents('title.php');
echo file_get_contents('header.php');
echo file_get_contents('content.php');
echo file_get_contents('footer.php'); 
```

# android - 哪种方式更适合在android中的活动之间传递参数

> ID：11915894
> 
> 赞同：0
> 
> 时间：2012-08-11T15:26:15.757
> 
> 标签：android

> **可能重复：**
> [在 Android 中的活动之间传递数据](https://stackoverflow.com/questions/2965109/passing-data-between-activities-in-android)

好的，可以说在我的 Activity1.java 中有一个名为的变量`date`

如果我将它声明为静态，在我的 Activity2 中，我可以通过编写来回忆它的值`Activity1.date`。

如果它不是静态的，我可以在启动 activity2 时通过`Bundle`.

两种方式都有效。

我的问题是哪个最受青睐并且缺点更少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T15:32:35.117

当然，在捆绑中传递的耦合要少得多。

没有 Activity1 就不能存在静态 Activity2。活动是高度可重用的，但是通过静态，您可以高度耦合活动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T15:32:48.293

静态不好的原因有很多，主要是因为它是嗯……静态的。这意味着它将始终占用内存，并且您将只有一个字段实例可以在您的活动的所有实例中共享。

正因为如此，它可以在很多地方以很多微妙的方式咬你。例如 - 如果您为同一个活动编写多个单元测试，则值将被共享，因此您的测试将不是独立的。或者另一个用例：您在堆栈上有多个活动实例 - 它们都将共享值，这在许多情况下不是您想要的。

底线：不要做静态。静态可以为您节省一两行代码，但会带来很多麻烦。顺便说一句，它不是特定于android的，对于任何平台都是如此

# windows - 如何判断 vim 是否在命令行与 powershell 中运行

> ID：11915895
> 
> 赞同：3
> 
> 时间：2012-08-11T15:26:21.053
> 
> 标签：windows, powershell, vim

我想做一个执行以下操作的函数

```
if (vim is running in powershell)
    call system("only works in powershell")
else
    echo "Skipping powershell command" 
```

有谁知道如何判断 vim 正在从哪个程序运行？

编辑：`echo &term`在两种情况下都输出“win32”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T18:18:18.760

据我所知，你不需要检查 vim 是从什么运行的。您需要检查的值，因为如果选项告诉它`&shell`在 powershell 中运行命令，vim 将在 powershell中运行命令。`&shell`如果 shell 的名称是，`posh`则可以使用

```
if stridx(&shell, 'posh')!=-1
    call system('only works in powershell')
else
    echo 'Skipping powershell command'
endif 
```

. 但我宁愿建议直接用类似的东西运行powershell

```
call system('posh -c '.shellescape('only works in powershell')) 
```

（注意：我不确定`'posh -c '`字符串实际上应该是什么样子）或临时设置 &shell 选项：

```
let savedsh=[&shell, &shellcmdflag, &shellxquote, &shellxescape, &shellquote, &shellpipe, &shellredir]
set shell=posh shellcmdflag=-c shellxquote=\" shellquote=\" shellpipe=> shellredir=>
try
    call system('only works in powershell')
finally
    let [&shell, &shellcmdflag, &shellxquote, &shellxescape, &shellquote, &shellpipe, &shellredir]=savedsh
endtry 
```

（再次，不确定选项的确切值）：这些方式命令将始终在 powershell 中运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-11T15:50:37.260

你可以检查一下`$term`。例如在我的`cygwin`and上`git bash`，我得到`$term`as `cygwin`。

对于 Powershell，您可以在您的个人资料中设置以下内容并检查：

```
$env:TERM = "posh" 
```

请注意，`&shell`cmd.exe 将同时用于 cmd 和 powershell。

# rotation - 如何旋转圆圈以响应碰撞？

> ID：11915897
> 
> 赞同：1
> 
> 时间：2012-08-11T15:26:35.287
> 
> 标签：rotation, collision-detection, physics

我正在开发一个非常简单的物理引擎。其中唯一的非静态对象是圆圈，我将执行的唯一碰撞检测是圆圈和线段之间。

为此，我使用了[Advanced Character Physics](http://web.archive.org/web/20100111035201/http://www.teknikus.dk/tj/gdc2001.htm)中描述的原理。也就是说，我使用一个简单的 Verlet 积分器进行积分。我简单地通过计算圆圈和线段之间的距离来执行碰撞检测和响应，如果距离小于圆圈半径，我将圆圈投影到线段之外。

这非常有效，结果是一个几乎完美的移动圆圈。引擎的当前状态可以在这里看到：http: [//jsfiddle.net/8K4Wj/](http://jsfiddle.net/8K4Wj/)。然而，这也显示了我面临的一个主要问题：圆圈根本不旋转。

据我所知，必须分别处理三种不同的碰撞情况：

1.  当圆与直线顶点碰撞并且不沿直线滚动时。
2.  当圆圈刚刚击中或滚动一条线时。然后必须计算确切的撞击点（如何计算？），并根据撞击位置和投影位置之间的距离旋转圆。
3.  当圆圈沿着一条线滚动时。然后它只是根据自上一帧以来经过的距离旋转。

这是我最接近解决问题的方法：http: [//jsfiddle.net/vYjzt/](http://jsfiddle.net/vYjzt/)。但正如演示所示，它可能无法处理边缘情况。

我已经在网上搜索了一个解决方案，但我找不到任何专门处理给定问题的材料（正如我所说的物理引擎相对简单，我不想为复杂的物理模拟概念而烦恼）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T15:57:44.027

在您的演示中看起来有问题的是**您在确定运动时没有考虑角力矩和能量**。

对于简单的情况，当您的演示中的轮子掉到地板上时，它会在自由落体时停止旋转。角动量应该保持下去。

更复杂的情况是，当轮子最终落地时，它以与落地前相同的水平速度移动。如果它没有滚动，这将是正确的，但由于它正在滚动，一些动能将不得不进入旋转运动，这应该会减慢它的速度。作为一个更清楚的例子，考虑相反的情况，即车轮快速旋转但没有线性动量。当这个轮子放在地板上时，它应该起飞并且旋转应该减慢。此外，例如，当车轮滚下山坡时，它的加速会更慢，因为能量需要同时进入线性和圆周运动。

这并不难，但要以直观正确的方式显示滚动物体，我认为您需要考虑与滚动相关的动能和角动量。通过“不太难”，我的意思是你所有的方程基本上都是两倍长，一个是线性运动，另一个是角度运动。我不会背诵所有的方程式，它基本上只是任何物理课本中关于旋转运动的章节。

（很好的演示，顺便说一句！）

# java - 适用于生产消息传递的 Gmail SMTP

> ID：11915899
> 
> 赞同：2
> 
> 时间：2012-08-11T15:26:59.180
> 
> 标签：java, email, gmail, jakarta-mail

我在我的应用程序中设置了一些自动电子邮件任务。也就是说，我每天都会向客户发送特定于应用程序的电子邮件，以提醒他们约会等。使用 Gmail 的 smtp 是否适用于生产任务，而不仅仅是一条简单的消息？实现我自己的 smtp 服务器（例如 Apache James）有什么好处吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T15:45:00.643

Gmail TOS 禁止未经请求的商业电子邮件。一般来说，我不会向公众部署任何依赖 Gmail 的服务。我认为 Gmail 无论如何都会将电子邮件收件人列表限制为 100，因此如果您尝试将相同的邮件发送给 100 多人，它可能会失败。

通常，出于声誉原因，您需要自己的 IP 来发送邮件。对于我从事自由职业的大多数客户，我推荐负担得起的合作伙伴服务，例如[http://sendgrid.com/](http://sendgrid.com/) ...拥有自己的 IP 意味着您可以合法地管理自己作为批量电子邮件发件人的声誉。而且您不必担心 Gmail 会因为违反 TOS 而将您关闭。Gmail 也不会为您提供有关可传递性的指标，因此您不会知道您是否成功发送这些信息。

在为一家主要的电子邮件营销人员工作后，我可以告诉您，如今仅向 SMTP 服务器发送消息是不够的。所有主要的邮件服务提供商都会做一些事情，比如要求批量邮件的发件人识别密钥。他们还计量消息并标记最终在特定时间内提交过多消息的发件人。如果您希望您的邮件被递送而不是在垃圾邮件文件夹中，您需要做很多工作并启动一个带有专用 IP 的专用服务器，或者您应该使用可以为您完成部分工作的供应商。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T16:05:38.560

我同意@Richthofen - 在生产环境中使用 gmail 发送电子邮件是一个糟糕（且不道德）的想法；Amazon SES 或 Sendgrid 是这里的最佳解决方案。如果您想运行自己的 SMTP 服务器，请记住它会与您的应用程序共享资源，并且可能会减慢它的速度。

但是，我使用 gmail 来使用 javamail API 测试开发/测试环境。这是代码：

```
public class EmailSender{

    public void send(){
      //javamail code
      Session mailSession = createSmtpSession();
      //javamail code
    }

    private Session createSmtpSession() {
        final Properties props = new Properties();
        props.setProperty ("mail.host", "smtp.gmail.com");
        props.setProperty("mail.smtp.auth", "true");
        props.setProperty("mail.smtp.port", "" + 587);
        props.setProperty("mail.smtp.starttls.enable", "true");
        props.setProperty ("mail.transport.protocol", "smtp");
        // props.setProperty("mail.debug", "true");

        return Session.getDefaultInstance(props, new javax.mail.Authenticator() {
            protected PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication(
                    "<gmail ID in user@domain format goes here>", 
                    "<password goes here>");
            }
        });
    }
} 
```

# delphi - 如何使用来自 TIdHTTP 的字符串创建 IHTMLDocument2？

> ID：11915903
> 
> 赞同：6
> 
> 时间：2012-08-11T15:27:28.313
> 
> 标签：delphi, html-parsing, indy, ihtmldocument

我用 下载了一个 URL `IdHTTP.Get`，我需要搜索 HTML 标签并提取一些数据。

如何将`IdHTTP.Get`返回的字符串转换为`IHTMLDocument2`?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T08:31:15.977

试试这个：

```
uses
  ... Variants, MSHTML, ActiveX;

var Cache: string;
    V: OleVariant;
    Doc: IHTMLDocument2;
begin
  ...

  Cache := IdHTTP.Get(url);
  Doc := coHTMLDocument.Create as IHTMLDocument2; // create IHTMLDocument2 instance
  V := VarArrayCreate([0,0], varVariant);
  V[0] := Cache;
  Doc.Write(PSafeArray(TVarData(v).VArray)); // write data from IdHTTP

  // Work with Doc
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-11T15:57:59.300

我用谷歌搜索了这个问题，我可以找到一个很好的代码：

```
Idoc := CreateComObject(Class_HTMLDOcument) as IHTMLDocument2;
try
  IDoc.designMode := 'on';
  while IDoc.readyState <> 'complete' do
    Application.ProcessMessages;
  v := VarArrayCreate([0, 0], VarVariant);
  v[0] := MyHTML;
  IDoc.Write(PSafeArray(System.TVarData(v).VArray));
  IDoc.designMode := 'off';
  while IDoc.readyState <> 'complete' do
    Application.ProcessMessages;

  ParseHTML(IDoc);
finally
  IDoc := nil;
end; 
```

问候

# jquery - 使用 smoothdivscroll 构建页面

> ID：11915904
> 
> 赞同：0
> 
> 时间：2012-08-11T15:27:33.977
> 
> 标签：jquery, smooth-scrolling

我访问了 Thomas Kahn 的实验室页面[http://www.smoothdivscroll.com/lab.html](http://www.smoothdivscroll.com/lab.html)以了解如何构建 html。在此实验室页面上，您可以做出很多选择。但是有没有一种简单的方法可以在代码中获得这些选择？或者我应该使用实验室页面的源代码来查找它？谁能给我建议？

吉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T01:17:40.743

[首先从这里](http://www.smoothdivscroll.com/download.html)下载包含示例的压缩代码

您可以在初始化插件时更改所需的选项。它们都在[这里列出和解释](http://www.smoothdivscroll.com/options.html)

初始化页面上的脚本时更改选项/设置，如下所示：

```
<script type="text/javascript">
    $(document).ready(function () {
        $("div#makeMeScrollable").smoothDivScroll({
            // Copy and paste your settings in here for example..
            hotSpotScrolling: false,
            visibleHotSpotBackgrounds: "always"
      });
    });
</script> 
```

# php - 如何在 PHP 中将数组的结果分为两类？

> ID：11915905
> 
> 赞同：0
> 
> 时间：2012-08-11T15:27:34.573
> 
> 标签：php, arrays, multidimensional-array, grouping

我这里有数据：

```
Array
(
[1] => Array
    (
        [SiteID] => 1
        [OwnerAID] => 1

    )

[3] => Array
    (
        [SiteID] => 3
        [OwnerAID] => 1

    )

[6] => Array
     (
        [SiteID] => 6
        [OwnerAID] => 2

     )
    ) 
```

现在，我需要将它们`OwnerAID`分为两类：第一个是`OwnerAID`只拥有一个`SiteID`，第二个是`OwnerAID`拥有多个 1 `SiteID`。

我试图制作一个程序并进行一些研究，但我的代码输出是错误的。

请看我的代码：

```
 public function groupIndividualAndAggregateSites()
    {

    $arrays = array();
        foreach($this->combined as $key => $key_value)
        {
            $SiteID = "";

        if ($SiteID == "") {

            $SiteID=array($key_value['SiteID']); }

           else {
                   $SiteID = array_merge((array)$SiteID, (array)$key_value['SiteID']);

                   $SiteID = array_unique($SiteID);

                }

       } if ($SiteID != "") {

       $arrays = array('AID'=>$key_value['AID'], 'Sites' => $SiteID);
     }
        print_r($arrays);

    } 
```

结果应如下所示：

```
 Array( 
        [1] => Array

      ( [Sites] => Array ([0] => 1, [1] => 3)))

 Array( 
        [2] => Array

      ( [Sites] => Array ([0] => [6])) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T15:45:01.573

你应该去的是数组：

```
$owners = array(
owner_1 => SiteID1, // int Only one site
owner_2 => array (SiteID2,SiteID3), // array Multiple sites
); 
```

然后使用数组 $owners 像：

```
echo (is_array($owners[$owner_1]) ? 'Has multiple sites' : 'has one site'; 
```

这就是小内存占用的基本思想。

示例，未经测试。

```
public function groupIndividualAndAggregateSites() {
  $owners = array();
  foreach($this->combined as $key => $value) {
    $owner_id = $value['OwnerAID'];
    $site_id = $value['SiteID'];

    if(array_key_exists($owner_id,$owners)) {
      // He has one or more sites already?
      if(is_array($owners[$owner_id]){
        array_push($owners[$owner_id],$site_id);
      } else {
      // User already has one site. Lets make an array instead and add old and new siteID
        $old_site_id = $owners[$owner_id];
        $owners[$owner_id] = array($old_site_id,$owner_id);
      }
    } else {
      $owners[$owner_id] = $site_id;
    }
return $owners;    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T15:41:11.843

您需要做的就是遍历您的初始数组，将每个数组附加`OwnerAID`到相关的输出子数组，具体取决于`SiteID`：

```
$output = array(1=>array(), 2=>array());
foreach ($original as $v) $output[$v['SiteID'] == 1 ? 1 : 2][] = $v['OwnerAID']; 
```

在这里，我使用以下功能：

*   [`array()`](http://php.net/manual/en/function.array.php)初始化函数；
*   [`foreach`](http://php.net/manual/en/control-structures.foreach.php)控制结构；
*   [三元运算符](http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary)；
*   `$array[$key]`寻址；
*   `$array[]`推动。

# java - Java - 断点命中多少次？

> ID：11915907
> 
> 赞同：0
> 
> 时间：2012-08-11T15:27:35.323
> 
> 标签：java, breakpoints

我想知道断点被击中了多少次。

问题是：对于前 4 个命中中的每一个，写下在调试器中可以看到的 currentMin、current Max 和 mid 的值。

我的值是：n=40，currentMin=0，currentMax=40 和 mid=20。

这是四连击吗？还是我需要使用上述值循环四次？

```
public class Breakpoint {

        public int breakp() {

                int n = 40;

                int currentMin = 0;
                int currentMax = n;

                while (currentMin < currentMax) {
                        int mid = (currentMin + currentMax) / 2;
                        if (mid * mid + mid + 1 <= n)//breakpoint is on this line {
                                currentMin = mid;
                        } else {
                                currentMax = mid;
                        }
                }
                return currentMin;

        }

        public static void main(String[] args) {

                Breakpoint b = new Breakpoint();
                int a = b.breakp();
                System.out.println(a);
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T15:49:53.263

我在跟踪程序时收到的前四个点击是：

```
min=0, max=40, mid=20

min=0, max=20, mid=10

min=0, max=10, mid=5

min=5, max=10, mid=7 
```

您需要绕过该函数四次才能获取这些值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T15:59:18.833

如果断点在这一行之后：

```
if (mid * mid + mid + 1 <= n){ 
```

4 次迭代后，值应为..

```
n:40 mid:7 currentMin:5 currentMax:10 
```

# applescript - Applescript：无法将脚本制作成液滴

> ID：11915910
> 
> 赞同：0
> 
> 时间：2012-08-11T15:27:59.917
> 
> 标签：applescript

请原谅我不够优雅的脚本编写能力，但是在脚本编辑器本身中调用该脚本时运行良好。但是，当我将其另存为应用程序时，该图标并未显示它是液滴并且无法正常工作。任何帮助是极大的赞赏！

```
try
    set destinationFolder to "Mercury:F1_PropertyLogos:"
    tell application "Finder" to set logoFileName to name of item 1 of (get selection)

end try

set file_name to logoFileName
set file_name to remove_extension(file_name)

on remove_extension(this_name)
    if this_name contains "." then
            set this_name to ¬
                    (the reverse of every character of this_name) as string
            set x to the offset of "." in this_name
            set this_name to (text (x + 1) thru -1 of this_name)
            set this_name to (the reverse of every character of this_name) as string
    end if
    return this_name
end remove_extension

tell application "Finder"
    set selected_items to selection
    set theFolder to "Mercury:F1_PropertyLogos:"

    repeat with x in selected_items
            move x to theFolder
    end repeat
end tell

tell application "QuarkXPress"
    set mypath to "Mercury:F1_Layouts:"
    set myfile to file_name
    set extension to ".qxp"
    set logoFolderPath to "Mercury:F1_PropertyLogos:"
    set myLogoFile to file_name
    set myLogoExtension to ".psd"
    set myLogo to (logoFolderPath & myLogoFile & myLogoExtension)
    open file (mypath & myfile & extension)
    set selected of picture box "Logo" of spread 1 of document 1 to true
    set image 1 of picture box "Logo" of spread 1 of document 1 to file myLogo
    set bounds of image 1 of picture box "Logo" of spread 1 of document 1 to proportional fit
end tell

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T15:53:56.740

要处理拖放到应用程序上的项目，您将需要添加一个**打开**的处理程序来接收已删除项目的列表（即使只有一个），例如：

```
on open theDroppedItems
    -- whatever
end open 
```

您可能应该重新排列您的代码，将您的主要语句放入一个可以从多个位置调用的处理程序（或多个处理程序）中，因为双击应用程序将改为调用**运行处理程序。**

# c - 拆分以逗号分隔的整数字符串

> ID：11915914
> 
> 赞同：0
> 
> 时间：2012-08-11T15:28:59.250
> 
> 标签：c, string, arduino

我的背景不在 C 语言中（它在 Real Studio 中——类似于 VB），而且我真的很难拆分逗号分隔的字符串，因为我不习惯低级字符串处理。

我正在通过串行向 Arduino 发送字符串。这些字符串是某种格式的命令。例如：

```
@20,2000,5!
@10,423,0! 
```

'@' 是指示新命令的标头和 '!' 是标记命令结束的终止页脚。'@' 之后的第一个整数是命令 id，其余整数是数据（作为数据传递的整数的数量可以是 0 - 10 个整数）。

`handleCommand()`我写了一个草图来获取命令（去掉'@'和'！'）并在有命令处理时调用一个函数。问题是，我真的不知道如何拆分这个命令来处理它！

这是草图代码：

```
String command; // a string to hold the incoming command
boolean commandReceived = false; // whether the command has been received in full

void setup() {
  // put your setup code here, to run once:
Serial.begin(9600);
}

void loop() {
  // main loop
  handleCommand();
}

void serialEvent(){
  while (Serial.available()) {
  // all we do is construct the incoming command to be handled in the main loop

    // get the incoming byte from the serial stream
    char incomingByte = (char)Serial.read();

    if (incomingByte == '!')
    {
       // marks the end of a command
       commandReceived = true;
       return;
    }
    else if (incomingByte == '@')
    {
       // marks the start of a new command
       command = "";
       commandReceived = false;
       return;
    }
    else
    {
      command += incomingByte;
      return;
    }

  }
}

void handleCommand() {

  if (!commandReceived) return; // no command to handle

  // variables to hold the command id and the command data
  int id;
  int data[9];

  // NOT SURE WHAT TO DO HERE!!

  // flag that we've handled the command 
  commandReceived = false;
} 
```

假设我的 PC 向 Arduino 发送字符串“@20,2000,5！”。`command`我的草图以包含“20,2000,5”的字符串变量（称为）结束，`commandRecieved`布尔变量设置为 True，因此`handleCommand()`调用了该函数。

我想在（当前无用的）`handleCommand()`函数中做的是将 20 分配给一个名为的变量，将`id`2000 和 5 分配给一个名为 的整数数组`data`，即：`data[0] = 2000`、`data[1] = 5`等。

我已经阅读过`strtok()`，`atoi()`但坦率地说，我无法理解它们和指针的概念。我确信我的 Arduino 草图也可以优化。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-11T15:58:47.833

由于您使用的是 Arduino 内核`String`类型，`strtok`因此其他`string.h`功能不合适。请注意，您**可以**将代码更改为使用标准 C 以空字符结尾的字符串，但使用 Arduino`String`可以让您在不使用指针的情况下执行此操作。

[`String`](http://arduino.cc/en/Reference/StringObject)类型给你[`indexOf`](http://arduino.cc/en/Reference/StringIndexOf)和。[`substring`](http://arduino.cc/en/Reference/StringSubstring)

假设一个字符串带有`@`和`!`剥离，找到你的命令和参数看起来像这样：

```
// given: String command
int data[MAX_ARGS];
int numArgs = 0;

int beginIdx = 0;
int idx = command.indexOf(",");

String arg;
char charBuffer[16];

while (idx != -1)
{
    arg = command.substring(beginIdx, idx);
    arg.toCharArray(charBuffer, 16);

    // add error handling for atoi:
    data[numArgs++] = atoi(charBuffer);
    beginIdx = idx + 1;
    idx = command.indexOf(",", beginIdx);
}

data[numArgs++] = command.substring(beginIdx); 
```

这将为您提供`data`数组中的整个命令，包括命令号 at `data[0]`，而您已指定只有 args 应该在`data`. 但必要的改变很小。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-11T15:54:41.007

似乎工作，可能是错误的：

```
#include<stdio.h>
#include <string.h>

int main(){
char string[]="20,2000,5";
int a,b,c;
sscanf(string,"%i,%i,%i",&a,&b,&c);
printf("%i %i %i\n",a,b,c);
a=b=c=0;
a=atoi(strtok(string,","));
b=atoi(strtok(0,","));
c=atoi(strtok(0,","));
printf("%i %i %i\n",a,b,c);

return 0;
} 
```

# tsql - SSRS 执行并显示由 TSQL 创建的数据

> ID：11915919
> 
> 赞同：1
> 
> 时间：2012-08-11T15:29:34.770
> 
> 标签：tsql, reporting-services, plot

我有一个将坐标填充为表变量的 TSQL 脚本：

```
declare @reg_data table
(
    I int NOT NULL PRIMARY KEY IDENTITY,
    X float,
    Y float
)

insert into @reg_data
select field1, dbo.func(field1) from table Y where ... 
```

在 SSRS 2008 中，如何在另一个数据集的图表中绘制 Y 与 X？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T04:44:17.343

您只能在 SSRS 2008 的图表中使用一个数据集。您需要先创建一个组合 X 和 Y 的数据集。创建一个设置表变量的存储过程，然后使用那里的第二个数据集的代码返回一个包含 X 和 Y 的数据集。

# html - 微数据重现事件

> ID：11915922
> 
> 赞同：2
> 
> 时间：2012-08-11T15:30:06.487
> 
> 标签：html, events, microdata

我想做的是将微数据添加到我维护的一些站点，这些站点主要是小型酒吧和烧烤类型的企业。我正在寻找的是一种可以接受的方式来标记重复发生的事件，例如“女士之夜星期四 7 至 10 日。任何事情上的两个人。” 我错过了什么吗？我所看到的一切都需要一个未来的日期，而且我无法找到不止一次发生的事件的例子。我认为逗号分隔的列表一次可以工作一个月左右，但我也没有见过这样的事情。

# performance - Solr 具有多个字段的性能

> ID：11915925
> 
> 赞同：0
> 
> 时间：2012-08-11T15:30:31.697
> 
> 标签：performance, solr, field

我必须在 solr 中索引大约 1000 万个文档以进行全文搜索。这些文档中的每一个都有大约 25 个附加的元数据字段。每个元数据字段都很小（最多 64 个字符）。常见查询将涉及搜索词以及用于过滤数据的多个元数据字段。所以我的问题是哪个可以提供更好的搜索响应时间。（索引时间不是问题）：

一个。索引文本数据并将所有元数据字段作为存储字段推送到 solr 中，并使用单个查询查询所有字段的 solr。（有效地 solr 使用元数据进行过滤以及搜索）

湾。将元数据字段存储在像 Mysql 这样的数据库中。仅对全文使用 solr，然后使用从 solr 返回的文档 ID 作为数据库的输入，根据其他元数据进行过滤，以检索最终的文档集。

谢谢阿里吉特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T15:51:21.113

绝对是 a)。Solr 不仅仅是一个全文搜索引擎，它还有更多。它的过滤器查询至少与 MySQL select 一样好/快。

b) 只是愚蠢的。通过选择具有正确元数据的 ID 从 MySQL 中获取许多 id，在 Solr 中进行全文搜索，同时针对该 id 列表进行过滤，从 MySQL 或 Solr 中获取文档（如果您选择在其中存储数据，而不仅仅是索引）。我无法想象这会更快的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T22:20:28.593

为什么要把事情复杂化，特别是如果索引时间和 HD 空间不是问题，您应该将所有数据（即：用户所需的子集）存储在 Solr 中。

例外情况是，如果您在每个文档中存储（和检索）大量文本。在这些情况下，在您获取搜索结果后从 RDB 中获取它会更快。无论如何，没有人能确定在你的情况下哪一个会更快，所以我建议你测试这两种方法的性能（例如使用 JMeter）。

此外，由于您不关心索引时间，因此您应该在索引时间而不是在查询时间进行所有处理（例如，同义词，它们可以替换提升的有效负载，...）。

有关 Solr 性能的更多信息，请参见此处：

[http://wiki.apache.org/solr/SolrPerformanceFactors](http://wiki.apache.org/solr/SolrPerformanceFactors)

# xslt - XPath - 选择具有一个相似属性和一个不同属性的节点

> ID：11915935
> 
> 赞同：0
> 
> 时间：2012-08-11T15:31:29.677
> 
> 标签：xslt, xpath

所以我很难理解为什么一个 XPath 表达式得到我想要的节点，而另一个没有。

首先，xml：

```
<doc>
    <source id="225" clientID="567" matterID="225" level="2" />
    <source id="226" clientID="993" matterID="226" level="2" />
    <dest id="185" level="7" />
    <dest id="226" level="7" />
</doc> 
```

我的 xsl 模板中的键定义如下：

```
<xsl:key name="sourceId" match="//source" use="@id" />
<xsl:key name="destId" match="//dest" use="@id" />
<xsl:key name="destLevel" match="//dest" use="@level" /> 
```

我正在寻找的是源节点，它与 id 上的 dest 节点匹配，但具有不同的 level 属性。我认为可以在我脑海中使用的应用模板如下：

```
<xsl:apply-templates select="source[key('destId', @id) and not(key('destLevel', @level))]" mode="update" /> 
```

但这似乎不起作用。一位同事建议在与我不想要的节点匹配的表达式周围放置一个 not ，经过大量试验和错误，我认为这可能有效，但没有效果：

```
<xsl:apply-templates select="source[not(not(key('destId', @id)) or not(key('destLevel', @level)))]" mode="update" /> 
```

谁能告诉我我需要什么来解决这个问题？

**编辑：**我以前以为我已经用第二个查询解决了这个问题，但似乎我错了。

**====解决方案====**

Dimitre Novatchev 详细介绍了解决此问题的不同方法，但我的最终解决方案实际上与他的略有不同。

本质上，我使用结合了这两个属性的 concat() 函数创建了一个虚拟键。这样，我可以找到与 id 匹配的节点，但不是 id 级别的组合。

额外的钥匙：

```
<xsl:key name="destByIdAndLevel" match="//dest" use="concat(@id,'+',@level)" /> 
```

更改了应用模板调用：

```
<xsl:apply-templates select="source[key('destId', @id) and not(key('destByIdAndLevel',concat(@id,'+',@level)))]" mode="update" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T18:01:37.967

**I. 这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="source">
   <xsl:copy-of select=
     "self::*[../dest[@id = current()/@id and not(@level=current()/@level)]]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于此 XML 文档时**`source`（添加到提供的 XML 文档的附加元素——以验证更多案例）：

```
<doc>
 <source id="185" clientID="567" matterID="225" level="7" />
 <source id="225" clientID="567" matterID="225" level="2" />
 <source id="226" clientID="993" matterID="226" level="2" />
 <dest id="185" level="7" />
 <dest id="226" level="7" />
</doc> 
```

**产生想要的正确结果**：

```
<source id="226" clientID="993" matterID="226" level="2"/> 
```

* * *

**二、使用一键解决方案**：

```
<xsl:stylesheet version="1.0"  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:key name="kDestById" match="dest" use="@id"/>

 <xsl:template match="/*">
  <xsl:copy-of select=
   "source[key('kDestById',@id)
         and
           not(@level=key('kDestById',@id)/@level)]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于同一个 XML 文档（上图）时，同样会产生相同的正确结果**：

```
<source id="226" clientID="993" matterID="226" level="2"/> 
```

* * *

**三、有两个键的解决方案**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:key name="kDestById" match="dest" use="@id"/>
 <xsl:key name="kDestByLevel" match="dest" use="@level"/>

 <xsl:template match="source">
  <xsl:copy-of select=
   "self::*
        [key('kDestById',@id)
       and
         key('kDestById',@id)
             [not(count(.|key('kDestByLevel',current()/@level))
                 =
                  count(key('kDestByLevel',current()/@level))
                 )
             ]
        ]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**这再次产生了想要的正确结果**：

```
 <source id="226" clientID="993" matterID="226" level="2"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T18:00:59.410

```
source[key('destId', @id) and not(key('destLevel', @level))] 
```

这使得源节点的 id 与某些 dest 节点相同，并且具有与任何 dest 节点不同的级别。请注意，它不需要**特定**的dest 节点具有相同的 id 但不同的级别。

我想你正在寻找这样的东西：

```
source[set:difference(key('destId', @id), key('destLevel', @level))] 
```

[set:difference()](http://www.exslt.org/set/functions/difference/index.html)来自 EXSLT。

# scala - 在没有无参数构造函数的情况下实例化类型参数

> ID：11915936
> 
> 赞同：0
> 
> 时间：2012-08-11T15:31:46.673
> 
> 标签：scala

我有一个`Item`s 的类层次结构，每个都需要一个相应的`ItemTemplate`实例作为构造函数参数。我想编写一个通用函数来实例化任何子`Item`类，方法是给它`Item`并`ItemTemplate`作为类型参数，像这样使用它：

```
val newItem = instantiateItem[ItemClass, TemplateClass](templateInstance) 
```

经过一些研究，我现在有了

```
def instantiateItem[I, T](implicit mf: Manifest[I], template: T): I = {
    val constructor = mf.erasure.getConstructor(classOf[T])
    constructor.newInstance(template).asInstanceOf[I]
} 
```

但这不能编译，`classOf[T]`给出错误

> 需要类类型但找到 T

我尝试替换`classOf[T]`为，`classManifest[CM].erasure`但这不起作用，因为 CM 需要将上下文绑定到`ClassManifest`，并且显然不可能将有界类型参数与隐式参数一起使用。

可以在这里做我想做的事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T15:37:30.880

`template`您只需调用即可获得课程`template.getClass`。它需要`template`是 的子类型`AnyRef`，因此要么将其强制转换为`AnyRef`（强制原始类型装箱），要么为 添加上限`T`：

```
def instantiateItem[I, T <: AnyRef](implicit mf: Manifest[I], template: T): I = {
  val constructor = mf.erasure.getConstructor(template.getClass)
  constructor.newInstance(template).asInstanceOf[I]
} 
```

如果您想`template`显式传递，如问题中的代码所示，您需要分隔隐式和显式参数，例如

```
def instantiateItem[I, T <: AnyRef](template: T)(implicit mf: Manifest[I]): I = {
  val constructor = mf.erasure.getConstructor(template.getClass)
  constructor.newInstance(template).asInstanceOf[I]
} 
```

又名

```
def instantiateItem[I : Manifest, T <: AnyRef](template: T): I = {
  val mf = implicitly[Manifest[I]]
  val constructor = mf.erasure.getConstructor(template.getClass)
  constructor.newInstance(template).asInstanceOf[I]
} 
```

* * *

一般来说，如果可能的话，您可以通过精心设计完全避免使用反射：

```
trait ItemCompanion[I,T] {
   def instantiateItem(template: T): I
}

object TestItem extends ItemCompanion[TestItem, TestTemplate] {
   implicit def self: ItemCompanion[TestItem, TestTemplate] = this
   def instantiateItem(template: TestTemplate): TestItem = new TestItem(template)
}
class TestItem(template: TestTemplate)
trait TestTemplate

// try out
def instantiateItem[I, T](implicit ic: ItemCompanion[I, T], t: T): I =
   ic.instantiateItem(t)

implicit val temp: TestTemplate = new TestTemplate {}
instantiateItem[TestItem, TestTemplate] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T15:41:30.640

这些对您的代码的更正应该可以解决问题：

```
def instantiateItem[I : Manifest, T <: AnyRef : Manifest](template: T): I = {
    val constructor = manifest[I].erasure.getConstructor(manifest[T].erasure)
    constructor.newInstance(template).asInstanceOf[I]
} 
```

该`I : Manifest`语法是隐式参数的首选糖化版本。

请注意，由于 Scala 2.10`Manifest`将被弃用，取而代之的是`TypeTag`

# google-maps - 路线 API 选择了错误的城市

> ID：11915938
> 
> 赞同：0
> 
> 时间：2012-08-11T15:32:01.553
> 
> 标签：google-maps, directions, map-directions

所以，看看这个结果：

[http://maps.googleapis.com/maps/api/directions/json?origin=2160%20Barnes%20Ave,%20Bronx,%20NY&destination=2160%20Barnes%20Ave,%20Bronx,%20NY&sensor=false](http://maps.googleapis.com/maps/api/directions/json?origin=2160%20Barnes%20Ave,%20Bronx,%20NY&destination=2160%20Barnes%20Ave,%20Bronx,%20NY&sensor=false)

明文：

*   原产地：2160 Barnes Ave, Bronx, NY
*   目的地： 2160 Barnes Ave, Bronx, NY

当我进行搜索时，它返回：

*   2160 Barnes Ave, 弗农山, NY

我高度怀疑这不是预期的行为。

当我在谷歌地图中尝试地址时，我得到了正确的位置，所以地址存在我没有输入错误。[https://maps.google.com/maps?q=2160+Barnes+Ave,+Bronx,+NY](https://maps.google.com/maps?q=2160+Barnes+Ave,+Bronx,+NY)

现在看看当我搜索同一条街道并添加“near Bronx, NY”子句时会发生什么：

[http://maps.googleapis.com/maps/api/directions/json?origin=2160%20Barnes%20Ave,%20Bronx,%20NY%20near%20Bronx,%20NY&destination=2160%20Barnes%20Ave,%20Bronx,%20NY&sensor =真](http://maps.googleapis.com/maps/api/directions/json?origin=2160%20Barnes%20Ave,%20Bronx,%20NY%20near%20Bronx,%20NY&destination=2160%20Barnes%20Ave,%20Bronx,%20NY&sensor=true)

有什么我做错了吗？截至目前，我觉得我必须搜索：

```
{Address}, {City}, {State} near {City}, {State} 
```

如果我输入邮政编码，它可以正常工作，但我不会总是有可用的邮政编码。

Google 的支持小组说我应该使用 StackOverflow 与官方论坛。所以……救命？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T16:56:38.857

将 2160 更改为 2162，您就完成了！:-)

工作链接：

[http://maps.googleapis.com/maps/api/directions/json?origin=2162%20Barnes%20Ave,%20Bronx,%20NY%20near%20Bronx,%20NY&destination=2162%20Barnes%20Ave,%20Bronx,%20NY&sensor =真](http://maps.googleapis.com/maps/api/directions/json?origin=2162%20Barnes%20Ave,%20Bronx,%20NY%20near%20Bronx,%20NY&destination=2162%20Barnes%20Ave,%20Bronx,%20NY&sensor=true)

这可能是因为 2160 Barnes Ave, Bronx, NY 不存在，而 2160 Barnes Ave, Mt Vernon, NY 以及 2162 Barnes Ave, Bronx, NY 存在。

# java - 空白 EditText 上的弹出错误

> ID：11915939
> 
> 赞同：0
> 
> 时间：2012-08-11T15:32:10.467
> 
> 标签：java, android, android-intent

如何要求用户将数据输入到 an中，并且在填充`EditText`之前不允许应用程序继续？`EditText`

现在，即使用户确认错误消息指出它`EditText`是空的并且是必需的，我的应用程序仍在继续进行。

```
 private final static int EMPTY_TEXT_ALERT = 0;

    protected Dialog onCreateDialog(int id) {

    switch(id) {

        case EMPTY_TEXT_ALERT: {
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("oops!!")
                   .setPositiveButton("ok", new DialogInterface.OnClickListener() {

                       @Override
                       public void onClick(DialogInterface dialog, int which) {
                           dialog.cancel();
                       }
             });

             return builder.create();
        }
    }

    return null;

}

        public void sends(View v) {   

            DatePicker datePicker = (DatePicker) findViewById(R.id.datePicker1);    

            int year = datePicker.getYear();
            int month = datePicker.getMonth();
            int day = datePicker.getDayOfMonth();
                 final EditText phone = (EditText) findViewById(R.id.editText2); 

            final EditText nameplate = (EditText) findViewById(R.id.editText3);  

            final EditText issue = (EditText) findViewById(R.id.editText4);  

                     String ph = phone.getText().toString();
                     if(ph.trim().equals("")) {
                            // text is empty

                            showDialog(EMPTY_TEXT_ALERT);

                        }
                    String np = nameplate.getText().toString();
                    if(np.trim().equals("")) {
                        // text is empty

                        showDialog(EMPTY_TEXT_ALERT);
                    }
                     String i = issue.getText().toString(); 
                     if(i.trim().equals("")) {
                            // text is empty

                            showDialog(EMPTY_TEXT_ALERT);
                        }

                     else
                         {StringBuilder s= new StringBuilder(100);
            s.append(year);
            s.append(". ");
            s.append(month+1);// month starts from 0 in this
            s.append(". ");
            s.append(day);
            s.append(". ");
            s.append(". ");
            s.append(ph);
            s.append(". ");
            s.append(np);
            s.append(". ");
            s.append(i);

            String st=s.toString();

            Intent emailIntentt = new Intent(android.content.Intent.ACTION_SEND); 
            emailIntentt.setType("plain/text");

            String aEmailList[] = { "shreyas.t@gmail.com" };  

            emailIntentt.putExtra(android.content.Intent.EXTRA_EMAIL, aEmailList);  

            emailIntentt.putExtra(android.content.Intent.EXTRA_SUBJECT, "Feedback");  

            emailIntentt.putExtra(android.content.Intent.EXTRA_TEXT, st);

            startActivity(emailIntentt); 
        } 

}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T15:43:17.517

> *什瑞亚斯·塔拉尼*
> 
> 如何验证电话号码...输入超过 10 位应显示错误消息

如果您只是想测试 的长度`String`，只需获取`String`并将长度与最大长度 10 进行比较。

在您的`validate(...)`方法中执行类似于以下的操作：

```
String ph = phone.getText().toString();
if(ph.trim().equals("")) {
    showDialog(EMPTY_TEXT_ALERT);
} else if (ph.length() > 10) {
    showDialog(TEXT_TOO_LONG_ALERT);
} 
```

你也可以让你`EditText`只允许数值。这将帮助您验证数字。您可以在 xml 文件或代码中执行此操作。

**xml**

```
android:inputType="TYPE_NUMBER_VARIATION_NORMAL" 
```

**代码**

```
EditText.setInputType(InputType.TYPE_NUMBER_VARIATION_NORMAL); 
```

* * *

您可以做的第一件事是添加一个`validate(...)`方法。在里面`validate(...)`，您需要验证所有字段，如果有任何内容留空，则显示错误消息并停止应用程序进程。

如果所有字段都很好，则调用您的发送方法。并且`send(...)`应该只发送您的数据，而不是检查验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T15:43:56.470

您可以在显示对话框后添加返回语句，如下所示。

```
if(i.trim().equals("")) {
                            // text is empty

                            showDialog(EMPTY_TEXT_ALERT);
                            return;
                        } 
```

不过，使用 Toast 消息比使用 showDialog 更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T15:44:25.213

我不知道你是如何调用你的 send() 方法的，但是在任何空错误之后，你可以在 showDialog() 之后立即添加一个 return 语句。这意味着在用户输入文本后，必须以某种方式通过 UI 重新调用 send() 方法。

如果您的 send() 方法是通过 onClick() 从按钮调用的，那么这意味着用户将看到带有错误的对话框，输入一些文本，然后单击按钮再次发送。

# c - 哪个更快：i=i+2 还是 i+=2？

> ID：11915942
> 
> 赞同：-3
> 
> 时间：2012-08-11T15:32:43.900
> 
> 标签：c, performance

考虑下面的代码片段：

```
for(i=0;i<10;i+=2) // 1
for(i=0;i<2;i=i+2) // 2 
```

哪一个会更好用？
它对性能有什么影响吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-11T15:43:58.040

以下耗时 0.0260015 秒

```
for (i = 0 ; i < 10000000 ; i += 2) 
```

这花了 0.0170010

```
for (i = 0 ; i < 10000000 ; i = i + 2) 
```

@MasterID 是正确的，但当我启用“优化代码”时，两者都报告了 0.0150009 秒

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-11T15:39:28.400

你的问题没有明确的答案。这取决于您的编译器在其他方面（优化级别，...）和目标平台的智能程度。这不是 C 语言问题。该语言本身并没有或多或少的性能。这仅取决于编译器从中构建的内容。因此，如果性能很重要，请针对您的用例进行测试...

否则，我的建议是，以您觉得更易读的方式编写它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-11T15:41:50.913

至少，第一个选项与第二个选项一样快。尽管任何编译优化都会生成相同的汇编代码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-11T16:01:44.010

两者都表达了完全相同的语义，即在 C 语言的抽象机中完全相同的效果。如果一个比另一个慢，那是编译器中的一个实现质量缺陷。

# html - 在图像上叠加三个不同的图像，仅先叠加

> ID：11915944
> 
> 赞同：0
> 
> 时间：2012-08-11T15:32:48.747
> 
> 标签：html, css, image, overlay

我有一个带有投资组合图像的网站，当图像悬停在上面时，会出现一个叠加层。

我以这样一种方式实现了这一点，这意味着当代码相乘时（对于 3 个不同的投资组合项目），叠加层总是只覆盖第一个图像，而不是翻转的每个不同图像。

任何人都可以帮忙吗？

直播链接在[这里](http://www.haselden.co.uk/james/docs)

用于制作图像叠加的代码：

CSS：

```
.image { 
    position: relative; 
    height: 240px;
}
.hoverimage { 
    position: absolute; 
    top: 5px; 
    left: 25px; 
    display: none;
}
.image:hover .hoverimage { 
    display: block; 
}​ 
```

HTML：

```
<img src="images/portfolio_image_1.png" class="captionme" 
title="I am the only son" alt="Porfolio detail" />

<img src="images/portfolio_image_1.png" class="captionme" 
title="I am the only son" alt="Porfolio detail" />

<img src="images/portfolio_image_1.png" class="captionme" 
title="I am the only son" alt="Porfolio detail" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T19:21:24.130

要覆盖每个不同的翻转图像，您必须对 HTML 和 CSS 文件进行一些更改。在您的 HTML 文件中搜索 <div class="image"> 并将每个 <img class="hoverimage"> 元素放入 <div class=""imgpost"> 中：

 `````
<div class="image">
  <div class="imgpost">
    <img src="images/portfolio_image_1.png" class="captionme" title="I am the only son" alt="Porfolio detail">
    <div class="thecaption">I am the only son</div>
    <img class="hoverimage" src="images/portfolio_overlay.png" alt="">
</div>
  <div class="imgpost">
    <img src="images/portfolio_image_1.png" class="captionme" title="I am the only son" alt="Porfolio detail">
    <div class="thecaption">I am the only son</div>
    <img class="hoverimage" src="images/portfolio_overlay.png" alt="">
</div>
  <div class="imgpost">
    <img src="images/portfolio_image_1.png" class="captionme" title="I am the only son" alt="Porfolio detail">
    <div class="thecaption">I am the only son</div>
    <img class="hoverimage" src="images/portfolio_overlay.png" alt="">
</div>
</div> 
````  `然后在您的 CSS 添加/修改以下样式：

 `````
.hoverimage { position: absolute; top: 1px; left: 1px; display: none;}

.imgpost .hoverimage {
border: none;
background: none;
}

.imgpost:hover .hoverimage {
display: block;
} 
````  `然后删除这个样式：

 `````
.image:hover .hoverimage { display: block; }​ 
`````````

# javascript - jquery - 如何同时在窗口区域和 iframe scrll 中进行滚动？

> ID：11915949
> 
> 赞同：1
> 
> 时间：2012-08-11T15:33:30.273
> 
> 标签：javascript, jquery, scroll

jquery - 如何同时在窗口区域和 iframe scrll 中进行滚动？

下面是我的代码，但不能工作

```
$(window).scrollTop() = $('body iframe').scrollTop(); 
```

例如：http: [//i.imgur.com/1gfhi.png](http://i.imgur.com/1gfhi.png)

```
<html><head><title></title>
<script src="jquery-1.7.2.js" type="text/javascript"></script>
<script type="text/javascript">
 $(window).scrollTop() = $("body iframe").scrollTop();
 $(window).scrollLeft() = $("body iframe").Left();
</script>
<style type="text/css">
 .header{
    position: absolute;
left: 100px;
top: 0px;
background-color: black;
width: 1000px;
height: 100px;
 }
 .iframecontent{
position: absolute;
left: 100px;
top:100px;
 }
 .footer{
position: absolute;
left: 100px;
top: 500px;
background-color: green;
width: 1000px;
height: 100px; 
 }  
</style>
</head><body>
<div class="header"></div>
<iframe class="iframecontent" src="iframecontent.html" scrolling="auto"></iframe>
<div class="footer"></div>
</body></html> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-11T15:39:49.347

```
 <script src="jquery-1.7.2.js" type="text/javascript"></script>

 <script type="text/javascript">
 $(window).scrollTop() = $("body iframe").scrollTop();
 $(window).scrollLeft() = $("body iframe").Left();
 </script>

 use this script in iframecontent.html. 
```

# c - 如何在C中将动态双精度数组元素初始化为0？

> ID：11915953
> 
> 赞同：2
> 
> 时间：2012-08-11T15:33:59.403
> 
> 标签：c, memory-management, malloc

我尝试了以下两种方法。当我在一个小程序中测试它时，两者似乎都有效。但有可能内存来自操作系统，默认情况下会清零。

方法1：

```
int n_var = 1000;
double *vars = malloc(n_var*sizeof(*vars));
if(!vars) die("Memory error."); 
memset(vars, 0, n_var*sizeof(*vars)); 
```

方法2：

```
int n_var = 1000;
double *vars = calloc(n_var, sizeof(*vars))
if(!vars) die("Memory error."); 
```

有人可以确认以上是否正确吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T15:39:59.257

从理论上讲，没有什么要求 0.0 的表示完全清楚，因此您应该显式初始化。实际上，最常见的双重格式具有此属性，并且两种方式都可以。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T15:38:14.253

不幸的是，所有字节零都不是浮点或双精度类型的零表示。做到这一点的唯一方法是对元素进行迭代，然后手动设置为零。

# git - git-blame 中 commit 的 sha1 开头的插入符号是什么意思

> ID：11915954
> 
> 赞同：3
> 
> 时间：2012-08-11T15:34:20.813
> 
> 标签：git

在 git-blame 中，我们通常会在文件中看到如下所示的行：

f9a0a430 (欧文林 2011-08-17 22:07:43 +0800 1)

第一列是 sha1，代表上次修改的提交。但有时它看起来像这样：

^f9a0a43 (欧文林 2011-08-17 22:07:43 +0800 1)

第一列最左边的插入符号是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T19:22:44.307

`^`当您`git blame`处理一系列提交时，会出现插入符号 ( )。插入符号出现在第一次提交范围之前最后修改的行上。

例如，运行将在每一行显示插入符号，因为自（最新提交）`git blame HEAD.. file`以来这些行没有更改。`HEAD`

另一个例子：`git blame HEAD^.. file`将在除上次提交中修改的行之外的所有行上显示插入符号。

# javascript - 为什么在匿名函数调用中使用 NOT 运算符？(a la Knockout 2.1.0)

> ID：11915957
> 
> 赞同：32
> 
> 时间：2012-08-11T15:34:44.343
> 
> 标签：javascript, iife

> **可能重复：**
> [函数前的感叹号有什么作用？](https://stackoverflow.com/questions/3755606/what-does-the-exclamation-mark-do-before-the-function)

如果您查看[KnockoutJS 2.1.0 的源代码，](http://cloud.github.com/downloads/SteveSanderson/knockout/knockout-2.1.0.debug.js)您会看到从第 7 行开始的代码结构如下：

```
!function(factory) { ... }(factoryDefinition); 
```

not 运算符导致此表达式的计算结果为`true`而不是`undefined`，但为什么要麻烦呢？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-08-11T15:37:20.483

这是形成立即执行的函数表达式的简洁方式。

传统上，人们使用这两种形式

```
(function(){ }()); // Recommended by Crockford
(function(){ })(); // What most people use 
```

如果您尝试仅使用

```
function(){ }(); // Syntax error 
```

这将是一个语法错误，因为它被解释为函数声明而不是表达式。这就是为什么您需要将函数包装在括号中的原因。

但是如果你在函数声明之前放置一个一元运算符，你就不必添加一个括号，它会砍掉代码的一个字符，这是一个（非常）微小的性能优势。有几个一元运算符可用于同一目的

```
!function(){ }();
~function(){ }(); 
-function(){ }(); 
+function(){ }(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-11T15:36:00.057

因为如果你不*做某事，*那么它看起来像一个语法错误：

```
function(factory) { ... }(factoryDefinition); 
```

试试看。

有必要让解析器到达它期望表达式的位置，以便`function`在该上下文中识别关键字。否则，当解析器看到`function`语句中的第一个标记时，它需要一个简单的函数声明，并且后面不能跟带括号的参数列表。

有各种各样的选择，围绕着每一个都聚集了各种各样的意见。

# junit - Jaxb 测试工具

> ID：11915960
> 
> 赞同：2
> 
> 时间：2012-08-11T15:35:09.750
> 
> 标签：junit, jaxb

您能否建议任何有助于调试 JAXB 编组和解组错误的工具或插件。运行junit等的任何首选方式。

# android - 如何在 Android 中创建富文本编辑器

> ID：11915964
> 
> 赞同：1
> 
> 时间：2012-08-11T15:36:23.610
> 
> 标签：android, rich-text-editor

> **可能重复：**
> [Android 问题：实现富文本编辑器？](https://stackoverflow.com/questions/4283755/android-question-implementing-a-rich-text-editor)

如何在 Android 中创建富文本编辑器。**它应该允许在用户点击的任何地方**添加文本，而不是默认强制用户从左/右开始。它还应该允许添加图像和视频。如果有人能告诉我制作具有所有这些要求的编辑器所需的全部知识，那将有很大帮助。

# java - Java ExecutorService 暂停/恢复特定线程

> ID：11915968
> 
> 赞同：10
> 
> 时间：2012-08-11T15:36:56.107
> 
> 标签：java, multithreading, concurrency, threadpool, executorservice

有没有办法使用 ExecutorService 来暂停/恢复特定线程？

```
private static ExecutorService threadpool = Executors.newFixedThreadPool(5); 
```

想象一下，我想停止 id=0 的线程（假设为每个线程分配一个增量 id，直到达到线程池的大小）。

过了一会儿，假设按下一个按钮，我想恢复该特定线程，并使所有其他线程保持当前状态，可以暂停或恢复。

我在 Java 文档中发现了一个未完成的 PausableThreadPoolExecutor 版本。但它不适合我的需要，因为它恢复了池中的所有线程。

如果没有办法使用 ExecutorService 的默认实现来做到这一点，任何人都可以为我指出这个问题的 Java 实现吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-11T15:38:28.820

你走错了路。线程池拥有线程，并且通过与您的代码共享它们可能会使事情变得混乱。
您应该专注于*使您的任务*（传递给线程可取消/可中断），而不是直接与池拥有的线程交互。
此外，当您尝试中断线程时，您不会知道正在执行什么作业，所以我不明白您为什么会对这样做感兴趣

**更新：**
取消在线程池中提交的任务的正确方法是通过`Future`执行器返回的任务。
1）通过这种方式，您可以确定您实际瞄准的任务被尝试取消
2）如果您的任务已经设计为可取消，那么您已经完成了一半
3）不要使用标志来表示取消，而是`Thread.currentThread().interrupt()`使用

**更新：**

```
public class InterruptableTasks {  

    private static class InterruptableTask implements Runnable{  
        Object o = new Object();  
        private volatile boolean suspended = false;  

        public void suspend(){          
            suspended = true;  
        }  

        public void resume(){       
            suspended = false;  
            synchronized (o) {  
                o.notifyAll();  
            }  
        }  

        @Override  
        public void run() {  

            while(!Thread.currentThread().isInterrupted()){  
                if(!suspended){  
                    //Do work here      
                }
                else{  
                    //Has been suspended  
                    try {                   
                        while(suspended){  
                            synchronized(o){  
                                o.wait();  
                            }                           
                        }                       
                    }  
                    catch (InterruptedException e) {                    
                    }             
                }                           
            }  
            System.out.println("Cancelled");        
        }

    }

    /**  
     * @param args  
     * @throws InterruptedException   
     */  
    public static void main(String[] args) throws InterruptedException {  
        ExecutorService threadPool = Executors.newCachedThreadPool();  
        InterruptableTask task = new InterruptableTask();  
        Map<Integer, InterruptableTask> tasks = new HashMap<Integer, InterruptableTask>();  
        tasks.put(1, task);  
        //add the tasks and their ids

        Future<?> f = threadPool.submit(task);  
        TimeUnit.SECONDS.sleep(2);  
        InterruptableTask theTask = tasks.get(1);//get task by id
        theTask.suspend();  
        TimeUnit.SECONDS.sleep(2);  
        theTask.resume();  
        TimeUnit.SECONDS.sleep(4);                
        threadPool.shutdownNow();      
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-11T18:52:48.610

建议：与您正在使用的标志类似/代替您使用的标志，为您需要暂停/取消暂停的每个任务创建一个带有 1 个许可 ( ) 的[信号量。](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Semaphore.html)`new Semaphore(1)`在任务的工作周期的开始放一个这样的代码：

```
semaphore.acquire();
semaphore.release(); 
```

这会导致任务获取信号量许可并立即释放它。现在，如果您想暂停线程（例如按下按钮），请`semaphore.acquire()`从另一个线程调用。由于信号量现在有 0 个许可，您的工作线程将在下一个周期开始时暂停，并等待您`semaphore.release()`从另一个线程调用。

（如果您的工作线程在等待时被中断，该`acquire()`方法会抛出`InterruptedException`。还有另一种方法`acquireUninterruptibly()`，它也尝试获取许可，但不会被中断。）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-02-11T13:46:23.487

一种情况可能是，一个人想要模拟许多设备。设备具有功能。总的来说，这组设备同时运行。现在，如果一个线程代表一个设备（或一个线程代表设备的一项功能），则可能想要控制设备的生命周期，例如`start(), shutdown(), resume()`

# javascript - 在 windows Phone 7 移动网站上平滑滚动

> ID：11915974
> 
> 赞同：1
> 
> 时间：2012-08-11T15:37:39.970
> 
> 标签：javascript, windows-phone-7, css, mobile-website

我正在为 windows phone 7.5 设备创建一个移动 web 应用程序，并希望有一个`overflow:scroll`平滑滚动的框（当您释放用手指滚动的内容时不会停止）。

现在对于 iOS 这存在：`-webkit-overflow-scrolling:touch;`

WP7有没有类似的东西？我试过了`overflow-scrolling:touch;`，`-ms-overflow-scrolling:touch;`但那些不起作用。

是否有 WP7.5 Web 开发的在线资源？

任何javascript替代品？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T16:53:52.523

我相信唯一的方法是使用 JavaScript 滚动来替换默认的自动滚动。

看看[iScroll](http://cubiq.org/iscroll)或类似的东西

# opencv - JavaCv 三个及更多图像的比较

> ID：11915980
> 
> 赞同：1
> 
> 时间：2012-08-11T15:38:46.607
> 
> 标签：opencv, image-recognition, javacv

我尝试了 cvMatchTemplate 函数来比较两个图像（一个模板和一个图像）。

```
 IplImage img = cvLoadImage("thumbnail.jpg");
    IplImage template = cvLoadImage("temp.jpg");
    IplImage result = cvCreateImage(cvSize(img.width()-template.width()+1, img.height()-template.height()+1), IPL_DEPTH_32F, 1);
    int method = CV_TM_SQDIFF;
    cvMatchTemplate(img,template,result,method);
    cvShowImage("res",result);

    double[] min_val = new double[2];
    double[] max_val = new double[2];

    //Where are located our max and min correlation points
    CvPoint minLoc = new CvPoint(); 
    CvPoint maxLoc = new CvPoint();

    cvMinMaxLoc(result, min_val, max_val, minLoc, maxLoc, null); //the last null it's for optional mask mat()

    CvPoint point = new CvPoint();
    point.x(minLoc.x()+template.width());
    point.y(minLoc.y()+template.height());

    cvRectangle(img, minLoc, point, CvScalar.WHITE, 2, 8, 0); //Draw the rectangle result in original img.       
    cvShowImage("Image", img);
    cvWaitKey(0);

    //Release 
    cvReleaseImage(img);
    cvReleaseImage(template);
    cvReleaseImage(result); 
```

我得到了想要的结果，但找不到将两个或更多图像与模板进行比较的方法。我使用 asCvMat 将获得的结果图像转换为矩阵，并得到原始图像每个像素的匹配概率矩阵。我在 OpenCv 中遇到了行列式函数来比较两个矩阵以了解哪些图像与模板更接近，但在 JavaCv 中找不到相应的函数。

有什么方法可以比较结果并确定哪个图像更匹配。我确实遇到了 ObjectFinder，但找不到有关如何使用它的正确文档。

请指出某些可以帮助我解决问题的链接或示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:56:41.440

您可以通过比较 max_val 来比较图像匹配结果，我什至会将方法更改为 CV_TM_SQDIFF_NORMED，然后您可以为 max_val 设置一个介于 0 到 1 之间的阈值。

# windows-phone-7 - 如何在 RichTextBox 中插入空格

> ID：11915982
> 
> 赞同：1
> 
> 时间：2012-08-11T15:38:48.573
> 
> 标签：windows-phone-7, richtextbox, whitespace

我正在尝试制作一个 WP7 应用程序，但我遇到了如何在部分文本之后添加空格的问题。我知道这件事可以通过插入一个   字符在 HTML 中完成，但在我的 RichTextBox 中这是无法完成的。
这是我的代码：

```
<RichTextBox>
  <Paragraph>
    <Run>This is a </Run>
    <Bold Foreground="Red">test</Bold>
  </Paragraph>
</RichTextBox> 
```

我希望输出看起来像 "This is a test" 但最后一个空格被忽略，所以输出是 "This is atest" 。

你能帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T17:51:35.110

我发现了问题所在，在设计器中输出是错误的（“这是测试”），但在运行时显示正常。

# android - 播放默认的android按钮声音，点击onTouch()方法

> ID：11915983
> 
> 赞同：27
> 
> 时间：2012-08-11T15:38:51.133
> 
> 标签：android, android-mediaplayer, audio, ontouchlistener

在我的 android 应用程序中，我有一些按钮，它们应该与**onTouch()**方法一起使用，当然当手指处于 ACTION_DOWN 位置时，我需要更改按钮的文本。但是这个按钮应该播放**默认**的 android 按钮点击声音（如 onClick() 方法）。我在哪里可以找到这样的声音？我想，它必须在 SDK 中，但我怎样才能找到它呢？什么方法更适合这种操作？我正在使用媒体播放器。

清单：

```
public boolean onTouch(View v, MotionEvent event) {
    int action = event.getAction();
    switch (action) {
    case MotionEvent.ACTION_DOWN:
        addTextShadow(v);
        Log.v(LOG_TAG, "ACTION_DOWN");
        break;
    case MotionEvent.ACTION_MOVE:
        clearTextShadow(v);
        isMoved = true;
        Log.v(LOG_TAG, "ACTION_MOVE");
        break;
    case MotionEvent.ACTION_UP:
        Log.v(LOG_TAG, "ACTION_UP");
        if (!isMoved) {
            clearTextShadow(v);
            if (v.getId() == R.id.btn_new) {
                Log.v(LOG_TAG, "New pressed");

                            playSound(); //MY METHOD TO PLAY SOUND

            } else if (v.getId() == R.id.btn_saved) {
                Log.v(LOG_TAG, "Saved pressed");
            } else if (v.getId() == R.id.btn_random) {
                Log.v(LOG_TAG, "Random pressed");
            }
        }
        isMoved = false;
        break;
    }
    return true;
} 
```

还有我的 playSound() 方法：

```
 public void playSound(){
    if (mp != null) {
        mp.release();
        mp = null;
    }
    try {
        mp = MediaPlayer
    .create(MyActivity.this, R.raw.sound); //BUT HERE I NEED DEFAULT SOUND!
        mp.start();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-08-11T19:51:42.763

在您的 onTouch() 方法中使用此代码：

```
view.playSoundEffect(android.view.SoundEffectConstants.CLICK); 
```

If you are simply looking for a preset Android sound then it's better to use this functionality that's provided to you for free by the framework. Doing anything else, unless necessary for customization, would simply result in you working against the framework instead of working with it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T15:52:47.917

使用来自的默认声音`/system/media/audio/`

MediaPlayer 或 SoundPool 将有助于实现播放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-29T10:42:51.777

Consider using `view.performHapticFeedback(HapticFeedbackConstants.VIRTUAL_KEY);`.

It will do both: playing the default sound and vibrate if the user has it enabled in the global settings.

# c# - 从 Windows Phone 7 到 PHP 的简单 POST 请求

> ID：11915989
> 
> 赞同：0
> 
> 时间：2012-08-11T15:39:30.913
> 
> 标签：c#, windows-phone-7

我是使用 C# 开发 Windows Phone 应用程序的新手，我试图通过 POST 将一些数据从我的 Windows Phone 7 应用程序发送到 PHP 文件，单击按钮。我希望收到 PHP 脚本的回复并将其打印到文本块。我尝试了一些来自 MSDN 的代码示例，但它们抛出了一些我无法理解的错误。

这是我尝试过的 MSDN 示例：http: [//msdn.microsoft.com/en-us/library/ktfa4fek%28v=VS.90%29.aspx](http://msdn.microsoft.com/en-us/library/ktfa4fek%28v=VS.90%29.aspx)

通过尝试上面的示例，我遇到了许多错误。任何人都可以帮助我使用 C# 代码将 POST 数据发送到 PHP 并接收它的响应吗？此外，为了获得响应，是否足以从 PHP 中回显数据，还是我需要做其他事情，比如返回值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T16:17:07.273

问题是您正在尝试使用完整的 .NET Framework 中的示例。Windows Phone 7 不支持完整的 .NET 框架。您的应用程序实际上必须以 Silverlight 框架为目标，如果您查看`WebClient`Silverlight 中的类，则没有`UploadData()`方法。

您必须使用[Silverlight中的](http://msdn.microsoft.com/en-us/library/system.net.webclient_methods%28VS.95%29.aspx)[适当方法之一`WebClient`](http://msdn.microsoft.com/en-us/library/system.net.webclient_methods%28VS.95%29.aspx)

在不了解更多代码以及您要上传的内容的情况下，很难说是哪一个，但您有几个重载`UploadStringASync()`或`OpenWriteASync()`可供选择。

同样，您尝试使用的其他类没有 Silverlight 框架中的方法